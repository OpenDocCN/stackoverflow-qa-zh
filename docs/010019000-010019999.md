# StackOverflow 问答 10019000-10019999

# java - 将 long 转换为 int 是否比自动装箱 long 到 Long 便宜？

> ID：10019000
> 
> 赞同：1
> 
> 时间：2012-04-04T20:47:11.713
> 
> 标签：java, android, casting, autoboxing

我有一堆使用ID 号`Thingy`跟踪的对象。`long`由于我无法保证 ID 序列，因此我将它们保存在`HashMap<Long, Thingy>`随机访问中。然而，在 Android 中，他们有一个非常好的类[`SparseArray`](http://developer.android.com/reference/android/util/SparseArray.html)，他们声称它比我`HashMap`使用它的方式更快。也许最值得注意的是，它没有自动装箱税。不幸的是，键是`int`，不是`long`。

我的`long`ID 值如此之大，以至于我不担心超出`int`本世纪任何时候的范围。对于我的操作来说，从`long`转换到`int`加`SparseArray`优化会比自动装箱更便宜吗？我的直觉说是的，但我想要一些额外的输入。`long``Long``HashMap`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T20:51:54.173

嗯。转换`long`为`int`可能会更快，是的，但尚不清楚它是否*正确*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T21:14:49.687

`long`强制转换`int`肯定会更快，因为它只是一个 JVM 命令 (l2i)，它在使用装箱时反对内存分配和新对象创建，但是，正如 Louis 指出的那样，你正在失去精度。如果您确定您的 id 值在`int`范围内，那么您可能是安全的，但我不会接受这样的假设。

我要做的是调查从 Android 源复制 SparseArray 类并将其修改为使用`long`键的可能性。我目前正在研究它，乍一看这绝对是可能的。

# android - 如何在 Android XML 中为文本添加下划线？

> ID：10019001
> 
> 赞同：127
> 
> 时间：2012-04-04T20:47:23.323
> 
> 标签：android, textview, android-styles, underline

如何在 XML 文件中为文本添加下划线？我在 中找不到选项`textStyle`。

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2012-04-04T20:55:14.220

如果您使用的是字符串资源 xml 文件（支持 HTML 标签），则可以使用`<b> </b>`,`<i> </i>`和`<u> </u>`.

```
<resources>
    <string name="your_string_here">
        This is an <u>underline</u>.
    </string>
</resources> 
```

如果您想在代码中强调某些内容，请使用：

```
TextView tv = (TextView) view.findViewById(R.id.tv);
SpannableString content = new SpannableString("Content");
content.setSpan(new UnderlineSpan(), 0, content.length(), 0);
tv.setText(content); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：68
> 
> 时间：2013-12-27T05:13:58.973

用这个：

```
TextView txt = (TextView) findViewById(R.id.Textview1);
txt.setPaintFlags(txt.getPaintFlags() | Paint.UNDERLINE_TEXT_FLAG); 
```

* * *

## 回答 #3

> 赞同：25
> 
> 时间：2012-04-05T07:06:34.527

```
<resource>
    <string name="your_string_here">This is an <u>underline</u>.</string>
</resources> 
```

如果它不起作用，那么

```
<resource>
<string name="your_string_here">This is an &lt;u>underline&lt;/u>.</string> 
```

因为“<”有时可能是关键字。

并用于显示

```
TextView textView = (TextView) view.findViewById(R.id.textview);
textView.setText(Html.fromHtml(getString(R.string.your_string_here))); 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2014-04-21T11:28:47.120

首先，转到 String.xml 文件

您可以在此处添加任何 HTML 属性，如斜体、粗体或下划线。

```
 <resources>
        <string name="your_string_here">This is an <u>underline</u>.</string>
    </resources> 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2016-11-07T06:28:21.893

我使用了下面的方法，它对我有用。下面是 Button 的示例，但我们也可以在 TextView 中使用。

```
Button btnClickMe = (Button) findViewById(R.id.btn_click_me);
btnClickMe.setPaintFlags(btnClickMe.getPaintFlags() | Paint.UNDERLINE_TEXT_FLAG); 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-11-04T12:44:37.107

您可以使用下面的标记，但请注意，如果您将 设置`textAllCaps`为`true`下划线效果将被删除。

```
<resource>
    <string name="my_string_value">I am <u>underlined</u>.</string>
</resources> 
```

**笔记**

将 textAllCaps 与包含标记的字符串 (login_change_settings) 一起使用；标记将被大写转换丢弃

textAllCaps 文本转换最终将调用 CharSequence 上的 toString，这具有删除任何标记（例如 . 此检查查找包含同时指定 textAllCaps=true 的标记的字符串的用法。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2018-01-11T12:44:37.793

另一种方法是创建一个扩展 TextView 的自定义组件。这适用于需要多个带下划线的 TextView 的情况。

这是组件的代码：

```
package com.myapp.components;

import android.content.Context;
import android.support.v7.widget.AppCompatTextView;
import android.text.SpannableString;
import android.text.style.UnderlineSpan;
import android.util.AttributeSet;

public class LinkTextView extends AppCompatTextView {
    public LinkTextView(Context context) {
        this(context, null);
    }

    public LinkTextView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    public void setText(CharSequence text, BufferType type) {
        SpannableString content = new SpannableString(text);
        content.setSpan(new UnderlineSpan(), 0, content.length(), 0);

        super.setText(content, type);
    }
} 
```

以及如何在xml中使用它：

```
<com.myapp.components.LinkTextView
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Hello World!" /> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-06-11T14:29:28.927

完成 Bhavin 的回答。例如，添加下划线或重定向。

```
((TextView) findViewById(R.id.tv_cgu)).setText(Html.fromHtml(getString(R.string.upload_poi_CGU)));

<string name="upload_poi_CGU"><![CDATA[ J\'accepte les <a href="">conditions générales</a>]]></string> 
```

你可以在这里知道兼容的标签：http: [//commonsware.com/blog/Android/2010/05/26/html-tags-supported-by-textview.html](http://commonsware.com/blog/Android/2010/05/26/html-tags-supported-by-textview.html)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-08-27T07:07:29.917

有多种方法可以在 Android TextView 中实现带下划线的文本。

1.`<u>This is my underlined text</u>` 或

```
I just want to underline <u>this</u> word 
```

2.您可以以编程方式执行相同的操作。

```
`textView.setPaintFlags(textView.getPaintFlags() | Paint.UNDERLINE_TEXT_FLAG);` 
```

3.可以通过创建一个 SpannableString 然后将其设置为 TextView 文本属性来完成

```
SpannableString text = new SpannableString("Voglio sottolineare solo questa parola");
text.setSpan(new UnderlineSpan(), 25, 6, 0);
textView.setText(text); 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-09-04T06:51:29.543

如果要比较文本字符串或文本会动态更改，则可以在约束布局中创建一个视图，它将根据文本长度进行调整，如下所示

```
 <android.support.constraint.ConstraintLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content">

    <TextView
        android:id="@+id/txt_Previous"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginStart="16dp"
        android:layout_marginLeft="16dp"
        android:layout_marginEnd="16dp"
        android:layout_marginRight="16dp"
        android:layout_marginBottom="8dp"
        android:gravity="center"
        android:text="Last Month Rankings"
        android:textColor="@color/colorBlue"
        android:textSize="15sp"
        android:textStyle="bold"
        app:layout_constraintBottom_toBottomOf="parent"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toStartOf="parent" />

    <View
        android:layout_width="0dp"
        android:layout_height="0.7dp"
        android:background="@color/colorBlue"
        app:layout_constraintEnd_toEndOf="@+id/txt_Previous"
        app:layout_constraintStart_toStartOf="@+id/txt_Previous"
        app:layout_constraintBottom_toBottomOf="@id/txt_Previous"/>

</android.support.constraint.ConstraintLayout> 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-02-07T17:51:08.400

创建字符串资源：

`<string name="HEADER_DELTA"><b><u>DELTA</u></b></string>`

并添加到您的 Textview

```
 <TextView
        android:id="@+id/txtDeltaText"
        style="@style/Default_TextBox_Small"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginTop="4dp"
        android:gravity="center_horizontal"
        android:text="@string/HEADER_DELTA"
        app:layout_constraintEnd_toEndOf="parent"
        app:layout_constraintStart_toEndOf="@+id/txtActualMetric"
        app:layout_constraintTop_toBottomOf="@+id/txtMetricName" /> 
```

# image - HTML5如何在画布中绘制透明像素图像

> ID：10019003
> 
> 赞同：6
> 
> 时间：2012-04-04T20:47:32.480
> 
> 标签：image, html, canvas, pixel, transparent

我正在使用 rgb 像素数据绘制图像。我需要为该图像设置透明背景颜色。我可以为 alpha 设置什么值成为透明图像？或者还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-05T01:57:16.490

如果我了解您的需求，您基本上想将图像上的特定颜色变为透明。为此，您需要`getImageData`查看[mdn 以获取有关像素操作的说明](https://developer.mozilla.org/En/HTML/Canvas/Pixel_manipulation_with_canvas)。

这是一些示例代码

```
var imgd = ctx.getImageData(0, 0, imageWidth, imageHeight),
    pix = imgd.data;

for (var i = 0, n = pix.length; i <n; i += 4) {
    var r = pix[i],
        g = pix[i+1],
        b = pix[i+2];

    if(g > 150){ 
        // If the green component value is higher than 150
        // make the pixel transparent because i+3 is the alpha component
        // values 0-255 work, 255 is solid
        pix[i + 3] = 0;
    }
}

ctx.putImageData(imgd, 0, 0);​ 
```

**[和一个工作演示](http://jsfiddle.net/loktar/bYR28/)**

使用上面的代码，您可以使用

`if(r == 255 && g == 0 && b == 255)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T21:27:56.963

我想你想要*clearRect*画布方法：

[http://www.w3schools.com/html5/canvas_clearrect.asp](http://www.w3schools.com/html5/canvas_clearrect.asp)

这将使您无需大惊小怪或像素操作即可将像素清除为透明（或任何其他 RGBA 颜色）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T20:58:37.107

alpha 为 0 表示像素是完全透明的，alpha 值为 255 是完全不透明的，这意味着它将没有透明度。

如果您的图像部分是完全透明的（alpha 为 0），那么只要使用 0 的 Alpha，您使用什么 RGB 值就无关紧要了。在旁注中，我使用的一些较旧的 windows 程序制作了一个像左上像素或右下像素这样的假设将用作透明度颜色。然后它会循环遍历所有像素，并在遇到此特定 RGB 值时将 alpha 设置为 0。

如果您使用 127 的 Alpha 并且图像出现在另一张图像的顶部，则看起来这两个图像同样可见，或者底部图像将 50% 的颜色渗入顶部图像。

如果您想测试并查看将其应用于整个图像时的外观，请为 alpha 设置一个变量。

# java - Netbeans 中自动删除的项目

> ID：10019006
> 
> 赞同：-1
> 
> 时间：2012-04-04T20:47:39.857
> 
> 标签：java, netbeans

由于电力的原因，我的电脑已经关闭。那时我的 Netbeans 项目正在运行。几分钟前我建立了这个项目。启动电脑，Netbeans项目源文件不见了。如何检索我的项目文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T20:51:13.583

您应该在 NetbeansProject 文件夹中有该项目。

使用打开项目按钮，如果源和 .project 在那里，它应该把它放回去。

因此，如果 nbproject 文件夹存在，那么您可以打开该项目。如果 src 在那里，那么你就有源文件。如果不是，你可能会被搞砸。这就是 SVN 派上用场的地方。

如果它们消失了，则取决于代码的敏感性和重要性。如果它们仍然存在，您可能需要支付服务以从硬盘驱动器中提取这些位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T20:53:29.903

您是否尝试选择（突出显示）包含 ZIP 文件的项目。在版本控制下，选择本地历史 -> 恢复已删除，然后查看您的 ZIP 文件是否恢复。

# mysql - zend 框架自动更改查询

> ID：10019012
> 
> 赞同：0
> 
> 时间：2012-04-04T20:48:00.370
> 
> 标签：mysql, database, zend-framework

我的数据库 (mysql) 表使用 TIMESTAMP 列，每当我希望它们在查询中返回时，我希望它们被查询为“UNIX_TIMESTAMP(columnname)”。

您如何轻松地修改 zend 框架中的查询来实现这一点？

例如，当前代码是：

```
select = $this->select();
$select->where('user_id = ?',$user_id);
return $this->fetchAll($select); 
```

这最终变成：

```
select * from tablename where user_id = 42; 
```

我想要自动找到 TIMESTAMP 列并将结果查询更改为：

```
select user_id,name,unix_timestamp(created) where user_id = 42; 
```

我知道我可以使用 MySQL 视图来实现这一点，但我宁愿避免这样做。

谢谢。

RR

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T21:27:49.240

您应该能够使用 $select->from() 对象在选择中指定所需的字段。

[Zend_Db_Select](http://framework.zend.com/manual/en/zend.db.select.html)

你应该最终得到这样的东西。

```
$select = $this->select();

$select->from(
    array('t' => 'tablename'),
    array('user_id', 'name', 'UNIX_TIMESTAMP(created)')
);

$select->where('user_id = ?',$user_id);
return $this->fetchAll($select); 
```

如果要运行函数中没有括号的表达式，请使用 Zend_Db_Expr() 方法正确转义查询。

# php - OCI_NO_DATA oci8 oracle 错误

> ID：10019019
> 
> 赞同：2
> 
> 时间：2012-04-04T20:48:55.647
> 
> 标签：php, oracle, plsql, oracle10g

我在执行 Oracle 函数时遇到问题。我有一张桌子`loginfo(username,password,type)`，我有这样的功能：

```
CREATE OR REPLACE FUNCTION login(name in varchar2,pass in varchar2 )
    RETURN integer
    IS 
    v_type integer;
    BEGIN 
    Select loginfo.type 
    INTO v_type from loginfo
    where loginfo.username=name 
    and loginfo.password=pass;
    RETURN (v_type); 
    END; 
```

我有两种类型的日志信息；类型 1 和 2。如果我从 php 调用这个函数，并带有一个应该返回类型 1 的参数。当我使用应返回类型 2 的参数调用此函数时，它会`OCI_NO_DATA`在 PHP 页面中返回错误。但是，当我从 Oracle 调用函数时，它返回 2。

当我的参数是`username = '8801716560946'`and时，它应该返回类型 2 `password = '123456'`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T20:56:51.977

`OCI_NO_DATA`表示没有与您在表中传入的参数匹配的行。我敢打赌，当您从 PHP 调用该函数时，您传递了不同的参数。例如，也许您在一种情况下传递带有一些额外空格的字符串，而不是另一种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-13T15:35:34.420

您应该在代码中添加一些异常处理程序。

```
CREATE OR REPLACE FUNCTION login(name in varchar2,pass in varchar2 ) RETURN integer IS 
  v_type integer;
BEGIN      
Select loginfo.type 
INTO v_type from loginfo
where loginfo.username=name 
and loginfo.password=pass;
RETURN (v_type); 
 exception when no_data_found then 
    return null;
END; 
```

这样你就可以保证函数返回一个值。在生产环境中，您还希望使用包，因为它们有很多优点。

# php - 如何在没有“无法反序列化请求”错误的情况下对 .NET Web 服务进行 SOAP Web 服务调用？

> ID：10019023
> 
> 赞同：0
> 
> 时间：2012-04-04T20:49:17.550
> 
> 标签：php, soap

我正在尝试使用如下所示的示例请求从 PHP 向 SOAP Web 服务进行 Web 服务调用：

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ws="http://ws.somedomain.com/">
   <soapenv:Header/>
   <soapenv:Body>
      <ws:SearchMarketplaceSku>
         <ws:Request>
             <ws:Security>
               <ws:PartnerKey>[suppressed]</ws:PartnerKey>
               <ws:Password>[suppressed]</ws:Password>
            </ws:Security>
            <ws:AvailableOnDate>2012-04-03T00:00:00</ws:AvailableOnDate>
            <ws:IncludeStateDetails>true</ws:IncludeStateDetails>
            <ws:State>CA</ws:State>
         </ws:Request>
      </ws:SearchMarketplaceSku>
   </soapenv:Body>
</soapenv:Envelope> 
```

正在使用的 PHP 代码是：

```
$soapClient = new SoapClient($wsdlUrl);   
$ap_param = array('PartnerKey'    =>    $PartnerKey, 'Password'    =>    $metapackPassword, 'AvailableOnDate' => '2012-04-03T00:00:00','IncludeStateDetails'=>true, 'State'=>'CA');
$info = $soapClient->__call("SearchMarketplaceSku", $ap_param); 
```

Web 服务调用导致“请求未正确指定；服务器无法反序列化请求”错误？问题是什么？$ap_param 数组是否需要包含所有与 XML 对应的嵌套节点？有没有更简单的方法可以使用“WSDL”模式进行此调用？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T20:52:04.690

PartnerKey 和 Password 必须位于密钥 Security 下的数组中：

```
$ap_param = array(
'Security' => array(
    'PartnerKey'    =>    $PartnerKey,
    'Password'    =>    $metapackPassword
),
'AvailableOnDate' => '2012-04-03T00:00:00',
'IncludeStateDetails'=>true, 'State'=>'CA'
); 
```

# android - Stericson 的根工具库无法正常工作 - 强制关闭？

> ID：10019026
> 
> 赞同：4
> 
> 时间：2012-04-04T20:49:43.707
> 
> 标签：android

我目前正在一个应用程序中测试由 stericson 制作的 roottools jar/库，但每次应用程序加载它都会强制关闭。

这是代码：

```
package com.liamwli.root;

import android.app.Activity;
import android.os.Bundle;

import android.widget.Toast;

import com.stericson.RootTools.*;

public class root_test extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        if (RootTools.isBusyboxAvailable()) {
            setContentView(R.layout.main);
        } else {
            RootTools.offerBusyBox(this);
        }

        if (RootTools.isRootAvailable()) {
            Toast liam = Toast.makeText(this, "Root Available",
                    Toast.LENGTH_SHORT);
            liam.show();
        } else {
            // do something else
        }

    }
} 
```

这是logcat：

```
04-04 21:44:47.009: I/Process(6622): Sending signal. PID: 6622 SIG: 9
04-04 21:45:40.859: I/dalvikvm(6722): Could not find method com.stericson.RootTools.RootTools.isBusyboxAvailable, referenced from method com.liamwli.root.root_test.onCreate
04-04 21:45:40.859: W/dalvikvm(6722): VFY: unable to resolve static method 16: Lcom/stericson/RootTools/RootTools;.isBusyboxAvailable ()Z
04-04 21:45:40.859: D/dalvikvm(6722): VFY: replacing opcode 0x71 at 0x0003
04-04 21:45:40.859: D/AndroidRuntime(6722): Shutting down VM
04-04 21:45:40.859: W/dalvikvm(6722): threadid=1: thread exiting with uncaught exception (group=0x40ac21f8)
04-04 21:45:40.869: E/AndroidRuntime(6722): FATAL EXCEPTION: main
04-04 21:45:40.869: E/AndroidRuntime(6722): java.lang.NoClassDefFoundError: com.stericson.RootTools.RootTools
04-04 21:45:40.869: E/AndroidRuntime(6722):     at com.liamwli.root.root_test.onCreate(root_test.java:16)
04-04 21:45:40.869: E/AndroidRuntime(6722):     at android.app.Activity.performCreate(Activity.java:4465)
04-04 21:45:40.869: E/AndroidRuntime(6722):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
04-04 21:45:40.869: E/AndroidRuntime(6722):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
04-04 21:45:40.869: E/AndroidRuntime(6722):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
04-04 21:45:40.869: E/AndroidRuntime(6722):     at android.app.ActivityThread.access$600(ActivityThread.java:123)
04-04 21:45:40.869: E/AndroidRuntime(6722):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
04-04 21:45:40.869: E/AndroidRuntime(6722):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-04 21:45:40.869: E/AndroidRuntime(6722):     at android.os.Looper.loop(Looper.java:137)
04-04 21:45:40.869: E/AndroidRuntime(6722):     at android.app.ActivityThread.main(ActivityThread.java:4424)
04-04 21:45:40.869: E/AndroidRuntime(6722):     at java.lang.reflect.Method.invokeNative(Native Method)
04-04 21:45:40.869: E/AndroidRuntime(6722):     at java.lang.reflect.Method.invoke(Method.java:511)
04-04 21:45:40.869: E/AndroidRuntime(6722):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:787)
04-04 21:45:40.869: E/AndroidRuntime(6722):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:554)
04-04 21:45:40.869: E/AndroidRuntime(6722):     at dalvik.system.NativeStart.main(Native Method) 
```

我对android很陌生，现在我很困惑:(

如果有人可以帮助我，我将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T09:05:29.690

在 Eclipse 中，右键单击您的项目，导航到“Build Path”，然后导航到“configure build path” 现在选择“add External Jar” 导航到您下载的 RootTools .jar 文件并选择它。 **导航到“订购和导出”，确保选中库旁边的框，然后将其移至列表顶部。** 选择“确定”完成

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T08:42:15.777

我通过分离进口解决了这个问题。代替：

```
import com.stericson.RootTools.*; 
```

我只使用/需要：

```
import com.stericson.RootTools.RootTools; 
```

如果需要，请尝试单独添加其他人。

```
import com.stericson.RootTools.Mount;
import com.stericson.RootTools.Permissions;
import com.stericson.RootTools.RootToolsException;
import com.stericson.RootTools.Symlink;
import com.stericson.RootTools.SanityCheckRootTools; 
```

它对我有用，希望对你有用！

# macos - 为什么 BSD 上的 RLIMIT_NOFILE rlim_max 为 -1？

> ID：10019034
> 
> 赞同：0
> 
> 时间：2012-04-04T20:50:15.503
> 
> 标签：macos, bsd, setrlimit

在以下代码中：

```
139     struct rlimit limit;
140 
141     method = "rlimit";
142     if (getrlimit(RLIMIT_NOFILE, &limit) < 0) {
143       perror("calling getrlimit");
144       exit(1);
145     }
146 
147     /* set the current to the maximum or specified value */
148     if (max_desired_fds)
149       limit.rlim_cur = max_desired_fds;
150     else {
151         limit.rlim_cur = limit.rlim_max;
152     }
153 
154     if (setrlimit(RLIMIT_NOFILE, &limit) < 0) {
155       perror("calling setrlimit");
156       exit(1);
157     } 
```

setrlimit 行失败（我收到错误“调用 setrlimit”）。进一步调查表明，它`limit.rlim_max`是 -1，这不是一个有效值。任何想法为什么会这样？这是在 Mac OSX 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:50:12.840

如果`setrlimit`失败，请使用`rlim_cur`set to重试`OPEN_MAX`。例如，参见[http://source.winehq.org/source/libs/wine/loader.c#L653](http://source.winehq.org/source/libs/wine/loader.c#L653)。（提到 Leopard 的评论意味着 Leopard 首先引入了这种行为。将其阅读为 Leopard-and-later。）

[ETA：请参阅setrlimit(2) 手册页](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man2/setrlimit.2.html)中的 COMPATIBILITY 中的注释。

# css - 如何使用自动调整大小的列创建多行部分

> ID：10019035
> 
> 赞同：0
> 
> 时间：2012-04-04T20:50:23.620
> 
> 标签：css

仍在学习 CSS，如果这很明显，请原谅 -

我正在构建一个包含四个部分的标题：

```
|Header-------------------------------|  
|----Title----|----NavigationLinks----|  
|----Taglines-|----SelectionBar-------|
|-------------------------------------| 
```

我想要的是标语部分自动设置第一列的宽度（它的内容比标题长），然后第二列延伸到标题部分的末尾。我无法弄清楚如何在不设置特定宽度的情况下使列相互匹配 - 是否可以在没有固定宽度区域的情况下做到这一点？

我已经能够使用 display: table-cell; 来接近我需要的东西。但无法弄清楚如何将第二行“连接”到第一行。

更新：缺少标签导致 div 忽略 display: table* 设置。使用 display: table/table-row/table-cell 创建表格布局可以满足我的需要：table-cell 将自动拉伸影响其上方行宽的列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T20:57:14.820

不确定这是否是您正在寻找的。问题似乎有点不清楚。

[http://jsfiddle.net/KacPY/1/](http://jsfiddle.net/KacPY/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T20:31:24.753

而不是使用过时的表格，我会考虑用百分比来表示你的宽度，以便有一个流畅的布局。

[http://jsfiddle.net/kJRQE/](http://jsfiddle.net/kJRQE/)

# silverlight - 更新 Silverlight bing 地图控件上图钉的位置

> ID：10019036
> 
> 赞同：1
> 
> 时间：2012-04-04T20:50:36.610
> 
> 标签：silverlight, windows-phone-7, bing-maps

我的问题是关于在 windows phone 7 上使用 bing 地图。这是我需要做的总结

*   每 x 秒轮询一次服务以检索一组坐标
*   如果这是第一次轮询服务

    *   将这些坐标绘制为地图上的自定义图钉（我使用的是 Image 和 MapLayer）

        ```
        PinObject pin = new PinObject() //Custom object
                        {
                            Id = groupMember.Id,
                            PushPin = new Image()
                            {
                                Source = new System.Windows.Media.Imaging.BitmapImage(new Uri("blackpin.png", UriKind.Relative)),
                                Opacity = 0.8,
                                Stretch = System.Windows.Media.Stretch.None
                            },
                            PinLocation = new GeoCoordinate(groupMember.Latitude, groupMember.Longitude)
                        }; 
        imageLayer.AddChild(pin.PushPin, pin.PinLocation); //Initialized in constructor
                        pinObjects.Add(pin);// Add pin object to a list to provide a handle to the objects 
        ```

    *   自动设置地图缩放级别，以便所有绘制的点都可见（我假设使用 LocationRect.CreateLocationRect 应该这样做）

        ```
         var coords = pinObjects.Select(p => p.PinLocation).ToList();                        
                    myMap.SetView(LocationRect.CreateLocationRect(coords)); 
        ```

    *   否则根据获得的新坐标，更新地图上每个图钉的位置 PinObject pObj = pinObjects.FirstOrDefault(p => p.Id == groupMember.Id);

        ```
         MapLayer.SetPosition(pObj.PushPin, new GeoCoordinate(groupMember.Latitude, groupMember.Longitude)); 
        ```

引脚加载正常，调用服务以获取他们的新位置也加载正常，问题是他们在地图上的位置永远不会更新，所以即使所有这些工作都在后台进行，他们基本上只是静止不动，我已经调试过，所以我知道它有效。如何重置图钉的位置，如果使用图像不起作用，我可以使用图钉对象吗？这将如何工作？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T13:48:24.863

Here is an option similar to Dispatcher.BeginInvoke but it works better for me in some cases. When I really need to get off the current thread with some work I will use a private static class UICallbackTimer to offset execution just a slight amount. (typos and untested code, just pulling out pieces here you'll have to debug in your code)

UICallbackTimer is not my code but it's available on the Internet. You can get information on this class by searching "private static class UICallbackTimer"

Here is the code to execute it.

```
UICallbackTimer.DelayExecution(TimeSpan.FromSeconds(.01),
                                       () => ( 
```

MapLayer.SetPosition(pObj.PushPin, new GeoCoordinate(groupMember.Latitude, groupMember.Longitude))

);

and here is the class ( I place it inside the current object, so that it remains private to my class) Add using statement for System.Threading

```
private static class UICallbackTimer
    {
        private static bool _running = false;
        private static int runawayCounter = 0;

        public static bool running()
        {
            if (_running && runawayCounter++ < 10)
                return _running;

            runawayCounter = 0;
            _running = false;
            return _running;
        }

        public static void DelayExecution(TimeSpan delay, Action action)
        {
            _running = true;
            System.Threading.Timer timer = null;
            SynchronizationContext context = SynchronizationContext.Current;
            timer = new System.Threading.Timer(
                (ignore) =>
                {
                    timer.Dispose();
                    _running = false;
                    context.Post(ignore2 => action(), null);
                }, null, delay, TimeSpan.FromMilliseconds(-1));
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T01:59:42.237

我发现确保图钉得到更新的最佳方法是`SetView()`再次在地图上调用 call。您可以传入现有视图以基本上强制刷新。例如;`MyMapControl.SetView(MyMapControl.BoundingRectangle);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T21:54:44.313

好问题！

这是一些*非常*丑陋的代码，但至少它可以工作并且可以开始。

我从[这里](http://forums.create.msdn.com/forums/p/69541/426499.aspx)得到了主要结构。如果有人可以通过适当的绑定和更少的代码发布答案，我将不胜感激。

```
 <Grid x:Name="LayoutRoot" Background="Transparent">
    <Grid.RowDefinitions>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <!--RESOURCES-->
    <Grid.Resources>
        <DataTemplate x:Key="LogoTemplate">
            <maps:Pushpin Location="{Binding PinLocation}" />
        </DataTemplate>
        <maps:MapItemsControl x:Name="GroupAPins"
                    ItemTemplate="{StaticResource LogoTemplate}"
                    ItemsSource="{Binding PinsA}">
        </maps:MapItemsControl>
    </Grid.Resources>
    <Grid x:Name="ContentPanel" Grid.Row="0" Margin="12,0,12,0"/>
</Grid>

public partial class MapPage : PhoneApplicationPage
{
    private ObservableCollection<PinData> _pinsA = new ObservableCollection<PinData>();
    private Map MyMap;
    public ObservableCollection<PinData> PinsA { get { return this._pinsA; } }  

    public MapPage()
    {
        InitializeComponent();

        this.DataContext = this;
        //Create a map.
        MyMap = new Map();
        MyMap.CredentialsProvider = new ApplicationIdCredentialsProvider("xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx");
        //Remove the List of items from the resource and add it to the map
        this.LayoutRoot.Resources.Remove("GroupAPins");
        MyMap.Children.Add(GroupAPins);
        MyMap.Center = new GeoCoordinate(40.74569634433956, -73.96717071533204);
        MyMap.ZoomLevel = 5;
        //Add the map to the content panel.
        ContentPanel.Children.Add(MyMap);
        loadAPins_fromString();
    }

    //ADD PIN TO COLLECTION  
    private void addPin(String lat, String lon)
    {
        PinData tmpPin;
        tmpPin = new PinData()
        {
            PinLocation = new GeoCoordinate(System.Convert.ToDouble(lat), System.Convert.ToDouble(lon))
        };
        _pinsA.Add(tmpPin);

        var timer = new DispatcherTimer();
        timer.Interval = TimeSpan.FromSeconds(1);
        timer.Tick += delegate(object sender, EventArgs args)
                        {
                            PinsA.Remove(tmpPin);
                            tmpPin.PinLocation.Latitude += 1;
                            PinsA.Add(tmpPin);

                        };
        timer.Start();

    }

    //LOAD PINS ONE BY ONE  
    private string loadAPins_fromString()
    {
        //BAD  
        addPin("42.35960626034072", "-71.09212160110473");
        //addPin("51.388066116760086", "30.098590850830067");
        //addPin("48.17972265679143", "11.54910385608672");
        addPin("40.28802528051879", "-76.65668606758117");

        var coords = PinsA.Select(p => p.PinLocation).ToList();
        MyMap.SetView(LocationRect.CreateLocationRect(coords));

        return "A PINS LOADED - STRING";
    }
}

public class PinData 
{
    public GeoCoordinate PinLocation{get;set;}
} 
```

# c# - 锦标赛式游戏的移动服务器实现？通过 REST 服务/wcf 访问

> ID：10019037
> 
> 赞同：1
> 
> 时间：2012-04-04T20:50:40.687
> 
> 标签：c#, wcf, rest, appharbor

我正在为比赛风格的游戏在 AppHarbor 上实现游戏服务器。我打算使用 WCF 和 C#。我希望服务器每 5 分钟生成一次新的“级别”并将其发送给当时在线的所有客户端。客户端将在 3 分钟后发回关卡结果（玩家的表现），服务器将分析结果并将通用结果发送回每个客户端（排行榜、统计数据等）。这个循环会重复。

我不确定我应该从哪里开始。我正在考虑使用 REST 服务制作 WCF 服务应用程序来获取信息，但我不知道谁让服务器独立于客户端进行计算和生成。

我将非常感谢你们能给我的任何帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T08:01:36.970

您可以使用[SignalR](http://signalr.net/)创建与客户端的独立持久连接。在这一点上，SignalR 不能很好地扩展，因为它只能在一个开箱即用的工作人员/服务器上运行。有一个扩展功能请求，但尚未完成。根据您在第一个月获得的用户数量，我会说 SignalR 是可行的方法，然后当您需要扩展时，您可以改进 SignalR，使其具有可扩展性，因为它是开源的。:)

# php - 我的 PHP 返回了错误的信息？

> ID：10019038
> 
> 赞同：0
> 
> 时间：2012-04-04T20:50:51.137
> 
> 标签：php, android, sql

试图让我的 PHP 脚本返回一些 SQL 表查询。这是我现在的脚本：

```
<?php

define("DB_HOST", "localhost");
define("DB_USER", "*");
define("DB_PASSWORD", "*");
define("DB_DATABASE", "*");

mysql_connect(DB_HOST, DB_USER, DB_PASSWORD);
mysql_select_db(DB_DATABASE);

if (isset($_POST['tag']) && $_POST['tag'] != '') {
    $tag = $_POST['tag'];
    echo $tag;
if ($tag == 'question') {
    $category = $_POST['category'];
    $response=mysql_query("select * from QUESTIONS where CATEGORY like '$category'");
    return $category; //just doing this, rather than $response to see if it works
}
}
?> 
```

这是与之关联的 Android 代码：

```
public JSONObject getQuestionsJSONFromUrl(String url, List<NameValuePair> params) {

    // Making HTTP request
try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        httpPost.setEntity(new UrlEncodedFormEntity(params));

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            Log.v("while", line);
            sb.append(line + "\n");
            //Log.v("err", line);
        }
        is.close(); 
```

以及调用 getQuestionsJSON 的方法...：

```
private static String question_tag = "question";
public JSONObject getQuestions(String category) {
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", question_tag));
    params.add(new BasicNameValuePair("category", category));
    //JSONObject json;
    JSONObject questionsList = jsonParser.getQuestionsJSONFromUrl(questionURL, params);
    //return json
    return null;
} 
```

这是我在 getQuestionsJSON...() 方法中的 Log.v() 的 LogCat：

```
04-04 20:41:58.721: V/while(933): question 
```

所以我真的不明白为什么这会返回“问题”而不是运行 getQuestions() 时传递的字符串？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T20:59:58.340

在 PHP 文件中，你有

```
echo $tag; 
```

它是对请求的响应。

这应该返回 mysql 响应：

```
if (isset($_POST['tag']) && $_POST['tag'] != '') {
    $tag = $_POST['tag'];
    if ($tag == 'question') {
        $category = $_POST['category'];
        $response=mysql_query("select * from QUESTIONS where CATEGORY like '$category'");

        $rows = array();
        while($r = mysql_fetch_assoc($response)) {
            $rows[] = $r;
        }
        print json_encode($rows);
    }
} 
```

# emacs - Groovy 的 Emacs 自动完成模式？

> ID：10019042
> 
> 赞同：13
> 
> 时间：2012-04-04T20:50:56.800
> 
> 标签：emacs, groovy, autocomplete

是否有适用于 emacs 的 Groovy 兼容的自动完成模式？

我也找不到可以与[emacs autocomplete](http://emacswiki.org/emacs/AutoComplete)一起使用的关键字字典。

帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-12T09:31:39.493

AFAIK 没有适用于 Groovy 的工作（智能）自动完成功能。如果您倾向于进行一些黑客攻击，实现此目的的最简单方法是修改[emacs-eclim](https://github.com/senny/emacs-eclim/)（用于与 Eclipse 对话的 Emacs 包）以使用[Eclipse Groovy 插件](http://groovy.codehaus.org/Eclipse+Plugin)。不应该那么糟糕，因为现有的代码可以用于使用 Eclipse Java，您可以将其用作脚手架。

HTH，对不起:(

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-28T23:28:50.950

我已经“破解”了[emacs-eclim](https://github.com/yveszoundi/emacs-eclim)和[Eclim](https://github.com/yveszoundi/eclim)以获得代码完成，而不是漂亮或功能完整，足以完成几个小时的工作。

**1.注意事项**：

*   **支持代码完成**，但有时使用自动完成模式会很慢，尤其是在自动触发完成时。如果我正在查找所有可能的完成，我使用*TAB*启动*自动完成*弹出窗口和完成缓冲区的*ALT-TAB 。*
*   **支持问题报告的源更新，**但不完全准确。当您保存缓冲区时，将执行增量构建并且错误报告可用（通过*Cc Ce o*的问题。

如果使用自动完成，请设置以下内容：

```
(ac-set-trigger-key "TAB")
(setq ac-auto-start nil) 
```

**2.安装**

*   git 克隆[https://github.com/yveszoundi/eclim](https://github.com/yveszoundi/eclim)
*   cd eclim && ant -Declipse.home=YOUR_ECLIPSE_FOLDER
*   git 克隆[https://github.com/yveszoundi/emacs-eclim](https://github.com/yveszoundi/emacs-eclim)
*   将*emacs-eclim*文件夹添加到您的*加载路径*

**3\. 通过[use-package](https://github.com/jwiegley/use-package)和 ELPA 配置 Emacs 示例。**

如果你不使用 use-package，根据需要进行调整...

```
(use-package eclim                                                                                                               
  :ensure emacs-eclim // overwrite ELPA install with my copy                                                                                                           

  :init (setq help-at-pt-display-when-idle t                                                                                     
              eclimd-default-workspace "~/Documents/workspace/"                                                                  
              help-at-pt-timer-delay 0.1)                                                                                        

  :config (progn (help-at-pt-set-timer)                                                                                          
                 (mapc #'require '(eclimd auto-complete-config))                                                                 
                 (ac-config-default)                                                                                             
                 (add-hook 'groovy-mode-hook 'auto-complete-mode)                                                                
                 (require 'ac-emacs-eclim-source)                                                                                
                 (ac-emacs-eclim-config)                                                                                         

                 (defun ers/eclim-run-class ()                                                                                   
                   (interactive)                                                                                                 
                   (beginning-of-buffer)                                                                                         
                   (search "class ")                                                                                             
                   (forward-word)                                                                                                
                   (eclim-run-class))                                                                                            

                 (bind-keys :map eclim-mode-map                                                                                  
                            ("C-c C-e l m" . eclim-manage-projects)                                                              
                            ("C-c C-e l r" . ers/eclim-run-class)                                                                
                            ("C-c C-e l c" . garbage-collect)                                                                    
                            ("C-c C-e l b" . eclim-project-build))                                                               

                 (add-hook 'groovy-mode-hook                                                                                     
                           (lambda ()                                                                                            
                             (remove 'ac-source-clang 'ac-sources)                                                               
                             (eclim-mode t)))                                                                                    

                 (add-hook 'java-mode-hook                                                                                       
                           (lambda ()                                                                                            
                             (remove 'ac-source-clang 'ac-sources)                                                               
                             (eclim-mode t))))) 
```

# python - Python assert 语句和代码可重用性

> ID：10019043
> 
> 赞同：2
> 
> 时间：2012-04-04T20:50:57.793
> 
> 标签：python, exception, python-3.x, assert, software-design

最佳实践似乎是`assert`用于在代码正确的情况下永远不会发生的条件，以及用于有点不寻常但可能发生的条件的异常（例如，当内存用完或用户输入无效时，或者外部连接断开）。我理解这种做法背后的基本原理如下：

1.  `assert`将使用 -O 解释器标志禁用。不能允许由外部因素引起的条件被默默地忽略，所以断言有不合适的。OTOH，只有在我的代码不正确时才可能出现的情况有望通过测试和调试消除，所以`assert`很好。

2.  `assert`阻止调用者处理异常，因为`AssertionError`通常被解释为“不要抓住我，这是一个灾难性的失败”。此外，它太笼统而无法捕捉。当发现错误时，这是​​完美的；对此的典型处理是停止执行并调试代码。如果是外部原因导致的常见情况，那就不好了。

假设我编写了一些代码来确保某个函数参数始终为正。如果我发现它是否定的，显然我在代码中犯了一个错误。因此，我`assert`认为这个论点是积极的。

后来，有人发现这个功能在另一个应用程序中很有用。他们导入它，并向它发送各种数据。现在从我的功能的角度来看，实际上很有可能收到负值；它只是一个无效的用户输入。可以说，`assert`不再合适，应该用例外替换。

由于几乎任何代码都有可能在某一天被重用，而且通常在我不知情的情况下，这个论点似乎在说“从不使用`assert`；只使用异常”。显然，这不是公认的做法。我错过了什么？

编辑：

更具体地说，假设该函数根本无法处理否定参数。因此，一旦参数为负，该函数将执行以下操作之一：

*   引发异常
*   断言失败
*   继续执行，可能产生不正确的输出

我可以看到，如果调用者捕捉到否定论点，那该有多好。但是，如果对函数的调用散布在代码周围的几十个地方，那么由于多次重复相同的检查，这可能会损害代码的清晰度。（更不用说，它可能会不小心忘记。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T20:58:56.033

如果您正在编写/重用的函数对正数或负数有效，则它不是应该包含断言的方法。调用重用函数的函数应该有断言，因为它是向函数提供无效值的函数。

```
function x() {
   var i;
   // logic to set i. use assertion to test the logic.
   assert(i > 0);
   reusedFunc(i);
} 
```

如果reusedFunc(i) 对负数无效，则如果传递一个负值，它应该抛出异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T01:41:12.580

`assert`语句用于您在开发和调试代码时使用的东西，而不是保证关键的 API 约束。

对于您的正数示例，`ValueError`如果在代码中使用负值会产生不良后果，请测试该值并使用有用的错误消息引发。

**我**告诉人们永远不要使用断言语句。它们很容易写，但它们往往不合适。

`assert`当人们写很长的语句并决定使用括号使语句和消息跨越多行时，语句也会失败......这`SyntaxWarning`会在现代 Python 中生成一个关于作者通过使用 (condition, message) 无意中创建的元组-function 声明，但并非总是如此。

另一个经验法则：如果你看到一个单元测试验证 an`AssertionError`被提出，那么代码不应该使用断言。

如果你不使用`assert`语句，这些东西都不会咬你。

# c# - 使用 JSON 结果返回多个对象

> ID：10019044
> 
> 赞同：8
> 
> 时间：2012-04-04T20:51:02.350
> 
> 标签：c#, jquery, asp.net-mvc, json

我想知道是否可以在 MVC 中返回多个带有 JSON 结果的对象。目前我返回单个对象没有问题。

```
public ActionResult AddToBasket(int quantity, int productdetailid) 
{
    // more code here
    return Json ( new { Name = p.Product.Name, Price = p.Price});
} 
```

这会在我的 ajax 调用中返回一个匿名对象。我想做的是返回多个名称和价格来填充我视图中的表格。

所以基本上我想在每次用户将一个项目添加到他的购物篮并更新作为 html 表的购物篮时更新（更新）cookie。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T20:52:13.290

只需返回一个对象数组，例如：

```
[ { Name: 'foo', Price: 123 }
, { Name: 'bar', Price: 456 }
, { Name: 'baz', Price: 789 } ] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T20:54:46.373

如果你想要一个数组，只需返回一些可枚举的：

```
return Json ( Enumerable.Range(0, 10).Select(i => new { Name = "N" + i, Price = i }); 
```

# perl - =~ 在 Perl 中有什么作用？

> ID：10019049
> 
> 赞同：38
> 
> 时间：2012-04-04T20:51:21.293
> 
> 标签：perl, operators

我猜标签是一个变量，它正在检查`9eaf`- 但是这在 Perl 中存在吗？

这里的“=~”符号是做什么的，前后的“/”字符是`9eaf`什么？

```
if ($tag =~ /9eaf/)
{
    # Do something
} 
```

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-04-04T20:56:45.607

`=~`是测试正则表达式匹配的运算符。该表达式`/9eaf/`是一个正则表达式（斜杠`//`是分隔符，`9eaf`是实际的正则表达式）。换句话说，测试是说“如果变量 $tag 匹配正则表达式 /9eaf/ ...”，并且如果存储在其中的字符串在任何点按顺序连续`$tag`包含这些字符，就会发生这种匹配。`9eaf`所以这对于字符串来说是正确的

```
9eaf

xyz9eaf

9eafxyz

xyz9eafxyz 
```

和许多其他人，但不是字符串

```
9eaxxx
9xexaxfx 
```

和许多其他人。查找[“perlre”手册页](http://perldoc.perl.org/perlre.html)以获取有关正则表达式的更多信息，或谷歌“perl 正则表达式”。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-04T21:01:39.067

'=~' 操作符是一个[二元绑定操作符](http://perldoc.perl.org/perlop.html#Binding-Operators)，表示后面的操作将搜索或修改左边的标量。

默认（未指定）运算符是 'm' 表示匹配。

匹配运算符有一对指定正则表达式开始和结束的字符。最常见的是，这是'//'。

阅读[Perl Re 教程](http://perldoc.perl.org/perlretut.html)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-04T21:57:46.407

该代码正在测试是否`9eaf`是 的值的子字符串`$tag`。

* * *

```
$tag =~ /9eaf/ 
```

简称

```
$tag =~ m/9eaf/ 
```

`m//`匹配运算符在哪里。它将正则表达式模式 (regexp)与（由 的左侧返回）`9eaf`绑定的值匹配。`=~``=~`

* * *

包括`m//`和在内`=~`的运算符记录在[perlop](http://perldoc.perl.org/perlop.html)中。

正则表达式（例如`9eaf`）记录在[perlre](http://perldoc.perl.org/perlre.html)、[perlretut](http://perldoc.perl.org/perlretut.html)中。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-04T20:56:43.380

检查标量`$tag`（可能是字符串）与正则表达式的匹配，正则表达式`/9eaf/`仅检查字符串`"9eaf"`是否为`$tag`. 退房[`perldoc perlretut`](http://perldoc.perl.org/perlretut.html)。

# java - 无法使用 Locale("es_ES") 将日期翻译成西班牙语

> ID：10019050
> 
> 赞同：43
> 
> 时间：2012-04-04T20:51:26.470
> 
> 标签：java, date, locale

我正在尝试做一个简单的日期格式，它确实很好用，很容易，但问题是语言。我使用语言环境“es_ES”来获取“Miércoles”而不是“Wednesday”，但我失败了。

这是我的代码：

```
SimpleDateFormat formato = 
    new SimpleDateFormat("EEEE d 'de' MMMM 'de' yyyy", new Locale("es_ES"));
String fecha = formato.format(new Date()); 
```

`fecha`字符串的预期值为：

> Miércoles 4 de 四月 de 2012

但我仍然得到：

> 2012 年 4 月 4 日星期三

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2012-04-04T20:56:16.170

“es_ES”是一种语言+国家。您必须分别指定每个部分。

的构造函数[`Locale`](http://docs.oracle.com/javase/8/docs/api/java/util/Locale.html)是：

*   [Locale(String language)](http://docs.oracle.com/javase/8/docs/api/java/util/Locale.html#Locale-java.lang.String-)
    从语言代码构造语言环境。
*   [Locale(String language, String country)](http://docs.oracle.com/javase/8/docs/api/java/util/Locale.html#Locale-java.lang.String-java.lang.String-)
    从语言、国家构造一个语言环境。
*   [Locale(String language, String country, String variant)](http://docs.oracle.com/javase/8/docs/api/java/util/Locale.html#Locale-java.lang.String-java.lang.String-java.lang.String-)
    从语言、国家、变体构造语言环境。

您想`new Locale("es", "ES");`获得与 es_ES 一起使用的语言环境。

但是，最好使用[`Locale.forLanguageTag("es-ES")`](https://docs.oracle.com/javase/8/docs/api/java/util/Locale.html#forLanguageTag-java.lang.String-)，使用格式良好的 IETF BCP 47 语言标签`es-ES`（用`-`而不是`_`），因为该方法可以返回一个缓存的`Locale`，而不是总是创建一个新的。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-07-11T23:30:45.057

# tl;博士

```
String output = 
    ZonedDateTime.now ( ZoneId.of ( "Europe/Madrid" ) )
    .format ( 
        DateTimeFormatter.ofLocalizedDate ( FormatStyle.FULL )
                         .withLocale ( new Locale ( "es" , "ES" ) ) 
    )
; 
```

> 马尔特斯 2016 年 7 月 12 日

# 细节

Affe 接受的[答案](https://stackoverflow.com/a/10019105/642706)是正确的。您错误地构造了一个`Locale`对象。

## java.time

Question 和 Answer 都使用旧的过时类，现在已被Java 8 及更高版本中内置的[java.time框架所取代。](http://docs.oracle.com/javase/8/docs/api/java/time/package-summary.html)这些类取代了旧的麻烦的日期时间类，例如`java.util.Date`. 请参阅[Oracle 教程](http://docs.oracle.com/javase/tutorial/datetime/TOC.html)。许多 java.time 功能在 ThreeTen-Backport 中向后移植到 Java 6 和 7，并在[ThreeTenABP](https://github.com/JakeWharton/ThreeTenABP)[中](http://www.threeten.org/threetenbp/)进一步适应 Android 。

这些类包括在[`DateTimeFormatter`](http://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html)从日期时间值生成字符串时控制文本格式。您*可以*指定显式格式模式。但是为什么要打扰呢？让班级自动将格式本地化为特定的人类语言和文化规范`Locale`。

例如，获取[马德里地区时区](http://time.is/Madrid)的当前时刻。

```
ZoneId zoneId = ZoneId.of( "Europe/Madrid" );
ZonedDateTime zdt = ZonedDateTime.now( zoneId );
// example: 2016-07-12T01:43:09.231+02:00[Europe/Madrid] 
```

实例化一个格式化程序以生成一个字符串来表示该日期时间值。通过[`FormatStyle`](http://docs.oracle.com/javase/8/docs/api/java/time/format/FormatStyle.html)（完整、长、中、短）指定文本的长度。

```
DateTimeFormatter formatter = DateTimeFormatter.ofLocalizedDate ( FormatStyle.FULL ); 
```

应用 a[替换](http://docs.oracle.com/javase/8/docs/api/java/time/format/DateTimeFormatter.html#withLocale-java.util.Locale-)[`Locale`](http://docs.oracle.com/javase/8/docs/api/java/util/Locale.html)分配给格式化程序的 JVM[当前默认值。](http://docs.oracle.com/javase/8/docs/api/java/util/Locale.html#getDefault--) `Locale`

```
Locale locale = new Locale ( "es" , "ES" );
formatter = formatter.withLocale ( locale ); 
```

使用格式化程序生成一个字符串对象。

```
String output = zdt.format ( formatter );
// example: martes 12 de julio de 2016 
```

转储到控制台。

```
System.out.println ( "zdt: " + zdt + " with locale: " + locale + " | output: " + output ); 
```

> zdt: 2016-07-12T01:43:09.231+02:00[欧洲/马德里] 区域设置：es_ES | 输出：martes 12 de julio de 2016

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-08-24T22:27:12.973

# 爪哇 8

```
LocalDate today = LocalDate.now();
String day = today.getDayOfWeek().getDisplayName(TextStyle.FULL, new Locale("es","ES"))); 
```

也可以工作一个月。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-11-12T14:45:08.833

```
Locale spanishLocale=new Locale("es", "ES");
    String dateInSpanish=localDate.format(DateTimeFormatter.ofPattern("EEEE, dd MMMM, yyyy",spanishLocale));
    System.out.println("'2016-01-01' in Spanish: "+dateInSpanish); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-08-17T03:03:16.557

```
 Locale esLocale = new Locale("es", "ES");//para trabajar en español
    SimpleDateFormat formatter = new SimpleDateFormat(strFormatoEntrada, esLocale);//El formato con que llega mi strFecha más el lenguaje 
```

# spotify - 如何将专辑添加为播放列表？

> ID：10019055
> 
> 赞同：0
> 
> 时间：2012-04-04T20:51:46.347
> 
> 标签：spotify

我正在制作一个 Spotify 应用程序。当您播放歌曲时，应用程序将显示如下专辑：

[http://s17.postimage.org/votnl6epp/Schermafbeelding_2012_04_04_om_22_47_54.png](http://s17.postimage.org/votnl6epp/Schermafbeelding_2012_04_04_om_22_47_54.png)

我已经阅读了播放列表文档（https://developer.spotify.com/technologies/apps/docs/beta/c49e02a392.html），但我不知道如何订阅专辑。

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T13:17:22.520

如何订阅播放列表？

```
/* Instantiate the global sp object; include models & views */
var sp = getSpotifyApi(1);
var models = sp.require('sp://import/scripts/api/models');
var views = sp.require('sp://import/scripts/api/views');

$("#subscribe").click(function(playlist){
    var playlist = models.Playlist.fromURI("spotify:user:spotify:playlist:3Yrvm5lBgnhzTYTXx2l55x");
    playlist.subscribed = true;

    playlist.observe(models.EVENT.CHANGE, function() {
        console.log("Playlist is subscribed!");
    });
}); 
```

HTML 输入将是：

```
<input type="button" id="subscribe" value="Subscribe" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T07:09:09.360

你不能，你需要从专辑中创建一个播放列表，这是我如何进行的：

```
alb = m.Album.fromURI(uri, function(album) { 
pl.name = album.name;
$.each(album.tracks,function(index,track){
pl.add(m.Track.fromURI(track.uri)); 
});         
var player = new v.Player();
player.track = pl.get(0);
player.context = album;
var saveButton = "<button id='savePlaylist' class='add-playlist sp-button sp-icon' <span class='sp-plus'></span>Add as Playlist</button>";
var list = new v.List(album , function(track) {
return new v.Track(track, v.Track.FIELD.STAR | v.Track.FIELD.SHARE | v.Track.FIELD.NAME  | v.Track.FIELD.DURATION);
});

$("xxx").live('click',function(e){
var myAwesomePlaylist = new m.Playlist(album.artist.name + " - " + pl.name);
$.each(pl.data.all(),function(i,track){
myAwesomePlaylist.add(track);
});
e.preventDefault();
}); 
```

当然，您必须继续处理 HTML 部分。

希望它会有所帮助

热洛

# javascript - 如何在 JavaScript 中转义来自 PHP 的文本？

> ID：10019058
> 
> 赞同：3
> 
> 时间：2012-04-04T20:52:02.490
> 
> 标签：javascript, jquery, escaping, string-literals, html-escape-characters

我正在使用 jPlayer 显示一些视频，并在 php foreach 语句中动态创建播放列表：

```
var playlistacting = 
            [
        <?php foreach($this->result as $val){?>
                {
                    title:  '<?php echo $val->getTitle();?>',
                    artist: '<?php echo $val->getDes();?>',
                    poster: "<?php echo $val->getVideoId();?>.jpg",
                    thumb:  "<?php echo $val->getVideoId();?>.jpg",
                    flv:    "<?php echo $val->getVideoId();?>.flv",
                },
        <?php }?>
]; 
```

和`$val->getDes()`例子是`I have a one-hour (approximately) solo musical revue called "Manhattan With A Twist". The entire...`

我得到的错误是

```
unterminated string literal
[Break On This Error]   

artist: 'I have a one-hour (approximately)solo musical revue called "Manhattan W...

jquery.js (line 2, col 32) 
```

并指向`'`字符串的开头。

我可以做这个：`title: "<?php echo htmlspecialchars($val->getTitle());?>",`

我会得到同样的错误，但用`"`而不是`'`.

我不确定这里发生了什么。是抱怨`'`没有逃脱还是什么？

有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T20:55:07.563

只需使用 json_encode：

```
var playlistacting = <?php echo json_encode($this->result);?>; 
```

# xampp - XAMPP 没有关闭

> ID：10019061
> 
> 赞同：1
> 
> 时间：2012-04-04T20:52:11.760
> 
> 标签：xampp

我的 Windows 上已经安装了 XAMPP，我正在尝试将其关闭，以便我可以使用“它本身看起来就像一部电影”的 IIS。问题是 XAMPP 拒绝关闭并给我一个繁忙的错误：

> 忙碌的...
> 
> 错误 -1

错误消息真的很无语，所以我不知道问题可能是什么。任何人都知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:08:10.983

The problem is really simple (and stupid). I only needed to run XAMPP with administrative access, that's all.

# php - 如何满足所需的依赖关系以便在 Mac OS X 上安装 expect pecl 扩展？

> ID：10019063
> 
> 赞同：2
> 
> 时间：2012-04-04T20:52:31.383
> 
> 标签：php, macos, macports, expect, pecl

我正在尝试安装 expect pecl 扩展。
操作系统版本 = 10.7.3 PHP 版本 5.3.10 通过 macports 安装
期望版本 5.45 通过 macports 安装
我正在执行的命令： `sudo pecl -d preferred_state=beta install expect`
失败`ld: library not found for -lexpect`
libexpect5.45.dylib 文件位于 /opt/local/lib
安装命令的完整输出在这里[PASTEBIN](http://pastebin.com/KWHk7X0b)
从我可以告诉 pecl 只是找不到 libexpect 库，我什至尝试预先添加
`LD_LIBRARY_PATH=/opt/local/lib/expect5.45`，
`LD_LIBRARY_PATH=/System/Library/Tcl/8.5/expect5.45`并且
`LD_LIBRARY_PATH=/opt/local/lib`每个位置都有一个 expect5.45.dylib 文件。它没有帮助。

# iphone - 有没有办法简化这个 IBOutletConnection 语句？

> ID：10019067
> 
> 赞同：2
> 
> 时间：2012-04-04T20:53:20.367
> 
> 标签：iphone, objective-c, xcode, iboutlet

有没有办法简化这种方法？也许一种将 && 两个语句放在一个 for- 循环中的方法？

```
// Enable valid decimal buttons
- (IBAction)enableDecimalValues 
{
    for(UIButton *decimalButton in nonOctalValueCollection)
    {
        decimalButton.enabled = YES;
        [decimalButton setAlpha:1];
    }

    for(UIButton *decimalButton in nonBinaryValueCollection)
    {
        decimalButton.enabled = YES;
        [decimalButton setAlpha:1];
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T20:58:37.170

您的代码本身没有任何“错误”。您在这里拥有的是**清晰度**；读者可以快速看到并理解正在发生的事情。

替代方案需要分配内存和复制对象，这样你就可以有 1 个循环。但最终，性能更差（严格来说）。

但是，如果你坚持，这个怎么样：

```
NSMutableArray *buttons = [[[NSMutableArray alloc] initWithArray:nonOctalValueCollection] autorelease];
[buttons addObjectsFromArray:nonBinaryValueCollection];

for(UIButton *decimalButton in buttons)
{
    decimalButton.enabled = YES;
    [decimalButton setAlpha:1];
} 
```

（`autorelease`如果您使用的是 ARC，请忽略。）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T21:18:26.020

在我看来，您正试图使其干燥，而重复的部分是循环体中发生的事情。我认为不需要分配一个新数组，因此您只需遍历一个集合，所以我会做这样的事情

```
void (^block)(UIButton *button, NSUInteger idx, BOOL *stop) = 
^(UIButton *button, NSUInteger idx, BOOL *stop) {
    button.enabled = YES;
    button.alpha   = 1.0f;
};

[nonOctalValueCollection  enumerateObjectsUsingBlock:block];
[nonBinaryValueCollection enumerateObjectsUsingBlock:block]; 
```

这个 DRY 完成了并且不会导致临时数组的额外分配。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T20:59:13.250

认为这是您可以做到的最简单的方法。或者，您可以将代码重构为另一种方法，并将两个数组都传递给该方法。

```
NSMutableArray *allButtons = [NSMutableArray array];
[allButtons addObjectsFromArray:nonOctalValueCollection];    
[allButtons addObjectsFromArray:nonBinaryValueCollection];

for (UIButton *button in allButtons) {
    button.enabled = YES;
    button.alpha = 1;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T21:08:44.027

怎么样：

```
- (IBAction)enableDecimalValues 
{
    NSArray *combinedArray =
                [nonOctalValueCollection
                       arrayByAddingObjectsFromArray:nonBinaryValueCollection];

    [combinedArray makeObjectsPerformSelector:@selector(setEnabled:)
                                   withObject:[NSNumber numberWithBool:YES]];

    [combinedArray makeObjectsPerformSelector:@selector(setAlpha:)
                                   withObject:[NSNumber numberWithFloat:1.0f]];
} 
```

或者：

```
- (IBAction)enableDecimalValues 
{
    NSArray *combinedArray =
                [nonOctalValueCollection
                       arrayByAddingObjectsFromArray:nonBinaryValueCollection];

    [combinedArray enumerateObjectsUsingBlock:
         ^(UIButton *button, NSUInteger idx, BOOL *stop)
         {
              button.enabled = YES;
              button.alpha = 1.0f;
         }];
} 
```

导致：

```
- (IBAction)enableDecimalValues 
{
    [[nonOctalValueCollection
           arrayByAddingObjectsFromArray:nonBinaryValueCollection]
                enumerateObjectsUsingBlock:
                     ^(UIButton *button, NSUInteger idx, BOOL *stop)
                     {
                          button.enabled = YES;
                          button.alpha = 1.0f;
                     }];
} 
```

# javascript - 为什么我的脚本不更改 HTML 中的文本？

> ID：10019070
> 
> 赞同：0
> 
> 时间：2012-04-04T20:53:42.010
> 
> 标签：javascript, forms, html, radio-button

我有以下代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
<style type="text/css">
body {background-color:Gray;}
body {text-align:left;}
</style>

    <title>My First Project</title>
</head>
<body>
<form>
<table border="1" align="center">
<u><h5>Size</h5></u>
<tr><td><input type="radio" name="size" id="small" />Small</td></tr>
<tr><td><input type="radio" name="size" id="medium" />Medium</td></tr>
<tr><td><input type="radio" name="size" id="large" />Large</td></tr>
</table>
<br />

<script type="text/javascript">
    if (document.getElementById('small').checked) {
        document.getElementById('total').innerHTML = '$1.00';
    }
    else {
    }
</script>
<div id="total">$0.00</div>
</form>
</body>
</html> 
```

我希望脚本在选中 id small 的单选按钮时将 div total 中的文本更改为 $1.00 而不是 $0.00。但是，当我选择它时没有任何反应。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T20:57:12.207

你必须在某个事件上调用一个函数——JS 基本上是在事件上运行的！！

```
<input type="radio" name="size" id="small" onclick="yourFxn()" />Small</td> 
```

在你的脚本中

```
function yourFxn(){
if (document.getElementById('small').checked) {
    document.getElementById('total').innerHTML = '$1.00';
 }
 else {
 }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T21:15:11.450

脚本是按顺序读取的。当您的 javascript 运行时，页面上没有带有 id total 的元素，因为它位于脚本下方。

但是即使您移动下面的代码，它仍然无法工作，因为单选按钮没有附加点击事件。您的脚本仅检查单选按钮是否在页面加载时以某种方式被神奇地选中并更改文本。例如，此代码将更改文本，但需要您对选中的单选按钮进行硬编码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
<style type="text/css">
body {background-color:Gray;}
body {text-align:left;}
</style>

    <title>My First Project</title>
</head>
<body>
<form>
<table border="1" align="center">
<u><h5>Size</h5></u>
<tr><td><input type="radio" name="size" id="small" checked="checked" />Small</td></tr>
<tr><td><input type="radio" name="size" id="medium" />Medium</td></tr>
<tr><td><input type="radio" name="size" id="large" />Large</td></tr>
</table>
<br />

<div id="total">$0.00</div>

<script type="text/javascript">
    if (document.getElementById('small').checked) {
        document.getElementById('total').innerHTML = '$1.00';
    }
    else {
    }
</script>

</form>
</body>
</html> 
```

我认为您真正想要做的是将“单击”事件附加到单选按钮。

你可以在这里阅读更多：

[http://www.w3schools.com/jsref/event_onclick.asp](http://www.w3schools.com/jsref/event_onclick.asp)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T21:01:39.837

你没有得到 1.00 美元的原因是 - 里面的代码将在页面加载时执行。但是您需要在收音机的某些事件上设置 div 的值，而不是在页面加载事件上。

所以在某些函数中使用您的代码并在单选按钮的单击事件中调用该函数

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T20:59:56.293

这是一个基于代码关键部分的工作示例：http: [//jsfiddle.net/9hxDq/](http://jsfiddle.net/9hxDq/)

*   您需要执行代码以响应事件（例如单击、加载事件或响应单击的输入）
*   您的某些标记无效（`U`a 内的标记`TABLE`）

## HTML

```
<table border="1" align="center">
    <tr><td><input type="radio" name="size" id="small" />Small</td></tr>
    <tr><td><input type="radio" name="size" id="medium" />Medium</td></tr>
    <tr><td><input type="radio" name="size" id="large" />Large</td></tr>
</table>

<input type="button" value="Calculate" onclick="calculate()" />

<div id="total">$0.00</div>​ 
```

## JavaScript

```
function calculate()
{
    if (document.getElementById('small').checked) 
    {
        document.getElementById('total').innerHTML = '$1.00';
    }
    else 
    {
        alert("not checked!");
    }
}​ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T21:01:19.553

通过以下方式将单选按钮上的单击事件与您的代码联系起来：

```
var small = document.getElementById('small');
if (small.addEventListener) {
    small.addEventListener('click', calc, false);
} else if (small.attachEvent) {
    small.attachEvent('onclick', calc);
}
function calc() {
    if (document.getElementById('small').checked) document.getElementById('total').innerHTML = '$1.00';
};​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/yVTy3/1/)**。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T21:26:43.527

它不更新的原因是该脚本出现在`<div id='total'>`. 而且，更重要的是，因为脚本在出现在页面中时会立即执行，所以它会在`total`元素添加到 DOM 之前运行。

要解决此问题，您需要将脚本移到 HTML 代码中的较低位置，或者使脚本仅在页面完成加载后运行。这些选项中的第一个是让您启动并运行的快速解决方案；后者可能是更推荐的选择。

要让它仅在页面加载完成后运行，请将其包装到一个函数中，并使用`onload`页面上的事件来触发它。或者，如果您使用的是 JQuery，请将其添加为`$(document).ready()`函数。

# java - 来自 Java 的 Google 查询

> ID：10019077
> 
> 赞同：2
> 
> 时间：2012-04-04T20:54:03.367
> 
> 标签：java

我正在使用此代码使用 google 对单词列表进行查询，并从 google 中提取搜索结果的数量。它工作正常，但从昨晚开始，它在执行 200 次查询后一直给我这个错误（我猜是谷歌标记了我！）：线程“main”java.io.IOException 中的异常：服务器返回 HTTP 响应代码：503 用于 URL：[http ://www.google.com/sorry/?continue=http://www.google.com/](http://www.google.com/sorry/?continue=http://www.google.com/) ...

“红色”只是一个例子。

```
public class Google {
public static void main(String[] args) throws IOException {
        String query = "red";
        String urlName = "http://www.google.com/search?q=\""+query+"\"";
        URL url = new URL(urlName);
        URLConnection conn = url.openConnection();
        conn.setRequestProperty("User-Agent",
                "Mozilla/5.0 (X11; U; Linux x86_64; en-GB; rv:1.8.1.6) Gecko/20070723 Iceweasel/2.0.0.6 (Debian-2.0.0.6-0etch1)");
        BufferedReader in = new BufferedReader(new InputStreamReader(conn.getInputStream()));
        Pattern pattern = Pattern.compile("<div>About (.*?) results</div>"); //<div>About 1,620,000 results</div>
        String line;
        while ((line = in.readLine()) != null) {
            Matcher m = pattern.matcher(line);
            if (m.find()) {
                System.out.println(m.group(1)); // m.group(1) coresponds to results number: i.e.: 1,620,000
            }
        }
        in.close();
    } 
```

}

任何解决方案，建议？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T21:03:59.393

您被标记为机器人，可能是由于您的查询频率。尝试从不同的 IP 运行它（在该 IP 被标记为机器人之前）。

无论如何，您可能应该使用 Google 搜索 API。从网站 [https://developers.google.com/custom-search/v1/overview](https://developers.google.com/custom-search/v1/overview)：

## 价钱

**免费配额**

所有用户均可免费使用，每天最多 100 个查询。

**付费使用**

如果您未注册计费，超出免费使用配额的任何使用都将失败。启用计费后，您将继续每天收到 100 次免费查询。但是，对于所有额外的请求，您将按每 1000 次查询 5 美元的费率付费，每天最多 10,000 次查询。如果您需要额外配额，请从控制台申请额外配额。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T21:02:18.617

具体从错误页面：

“我们的系统检测到来自您的计算机网络的异常流量。此页面检查是否真的是您发送请求，而不是机器人。”

由于您显然*是*一个访问他们页面的机器人，他们已经采取了某些措施来规避您花费他们的流量，并且不希望您继续这种做法。

*话虽如此，*您有时需要向 Google 验证您的身份。[此页面](http://goohackle.com/break-google-captcha/)推荐的方式是向作者（您自己）展示图像，手动绕过验证码，然后[保存 cookie](http://www.hccp.org/java-net-cookie-how-to.html)以供您的程序使用。

# xml - 存储 XML 数据以供插件使用

> ID：10019079
> 
> 赞同：2
> 
> 时间：2012-04-04T20:54:08.730
> 
> 标签：xml, outlook, add-in, application-settings

我正在创建 Outlook 插件。插件的工作方式有点像聚合器。在此插件中，用户需要为插件指定多组帐户信息才能访问...见下文：

```
<Accounts>
  <Account>
    <id>blah1</id>
    <password>blah1 again</password>
  <Account>
  <Account>
    <id>blah2</id>
    <password>blah2 again</password>
  <Account>
  <Account>
    <id>blah3</id>
    <password>blah3 again</password>
  <Account>
</Accounts> 
```

到目前为止，我认为这应该是简单而轻巧的东西，例如 xml 数据集或类似的东西。

我最好的选择是什么？如果它是一个 xml 文件，我在调试时如何访问它（即在开发和运行时文件的路径是什么）。我应该使用注册表（糟糕！），我应该一起寻找不同的方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T20:28:01.860

您应该在文件夹中为每个用户创建一个目录和文件[`LocalApplicationData`](http://msdn.microsoft.com/en-us/library/system.environment.specialfolder.aspx)。

> **账户设置来源：** C:\Users\\AppData\Local\My Company\account-settings.xml

```
string userSettingsPath = Environment.GetFolderPath(Environment.SpecialFolder.LocalApplicationData);

// build company folder full path
string companyFolder = Path.Combine(userSettingsPath, "My Company");

if (!Directory.Exists(companyFolder)) 
   Directory.CreateDirectory(companyFolder);

// build full settings path
string fullSettingsPath = Path.Combine(companyFolder, "account-settings.xml"); 
```

*注意：*如果您需要支持漫游用户配置文件，您应该考虑使用`ApplicationData`特殊文件夹代替`LocalApplicationData`.

# css - 对 COM 组件的调用已返回错误 HRESULT E_FAIL

> ID：10019087
> 
> 赞同：0
> 
> 时间：2012-04-04T20:54:41.973
> 
> 标签：css

我刚开始阅读这本书并尝试实现一些 CSS 代码。每当我尝试创建新的 CSS 文件或打开 css 文件时，我都会收到以下错误：错误 HRESULT E_FAIL 已从对 COM 组件的调用中返回。

谁能告诉我这意味着什么以及如何解决？

坦克x。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-16T23:04:00.030

我在尝试打开或创建任何 .css 文件时遇到了同样的错误。[在我从这里](http://visualstudiogallery.msdn.microsoft.com/7211bcac-091b-4a32-be2d-e797be0db210)安装 CSS3 Intellisense Schema 后问题就解决了。

# javascript - 向表单添加字段（jQuery）

> ID：10019095
> 
> 赞同：1
> 
> 时间：2012-04-04T20:55:14.957
> 
> 标签：javascript, jquery, forms, append

我正在构建一个表格。那里没问题。除了提交按钮之外，我还有另一个按钮，当单击该按钮时，会在表单中添加另一个字段。我正在尝试使用 javascript (jquery) 来执行此操作。不用说我没有运气。我尝试了许多不同的方法，这是我放弃的方法：

```
$("#snew").click(function () {  
var container = $("#sblc").add("div");
var content = "<select> <option>Domestic</option><option>Tiger</option><option>Peeled                  Raw</option><option>Cooked Peeled Tail On<option></select><select> <option>1 lbs</option>   <option>2 lbs</option><option>3 lbs</option></select>";

                $(container).attr("class", "opt");
                $(container).append(content); 
                $(container).appendTo("#sblc"); 

            }) 
```

这是对应的 HTML：http: [//pastie.org/3729304](http://pastie.org/3729304) （我不知道如何让 HTML 在这里正确显示。抱歉链接。）

每当我尝试这个时，我最终要么得到一个完全白页，要么什么都没有发生。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T21:02:11.613

您的附加方式有误。

[http://jsfiddle.net/NYnYw/](http://jsfiddle.net/NYnYw/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T21:03:28.210

试试下面的东西，

[**演示**](http://jsfiddle.net/skram/WqSGN/1/)

```
$("#snew").click(function() {
    var container = $("<div />");
    var content = "<select> <option>Domestic</option><option>Tiger</option><option>Peeled                  Raw</option><option>Cooked Peeled Tail On<option></select><select> <option>1 lbs</option>   <option>2 lbs</option><option>3 lbs</option></select>";

    $(container)
        .attr("class", "opt") //add class to the div container
        .append(content)      //append select to the div
        .appendTo("#sblc");   //append div to #sblc

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T21:03:40.613

这将适用于您提供的代码：

```
$("#snew").click(function () {
    var container = $("#sblc");
    var content = "<div><select> <option>Domestic</option><option>Tiger</option><option>Peeled                  Raw</option><option>Cooked Peeled Tail On<option></select><select> <option>1 lbs</option>   <option>2 lbs</option><option>3 lbs</option></select></div>";

    $(container).attr("class", "opt");
    $(container).append(content);
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T21:08:42.840

您的逻辑似乎很奇怪...您首先声明`container`as `$("#sblc").add("div")`which 指的是一个 jQuery 对象集合，该集合同时包含`#sblc`尽可能多的对象`div`。这真的是你想要做的吗？
然后，您将`container`不必要的 jQuery 对象双重包装。
让我觉得不寻常的部分是`$(container).appendTo("#sblc")`。您要附加双包装`container`，或附加`#slbc + divs`到`#slbc`?? 不明白......
你可以尝试这样的事情：

```
$("#snew").click(function () {

    var $container =  # ('#slbc'),
        materials = ['Domestic', 'Tiger', 'Peeled Raw', 'Cooked Peeled Tail On'],
        values = ['1 lbs', '2 lbs', '3 lbs'],
        html = '<select><option>' + materials.join('</option><option>') + '</option></select>' +
            '<select><option>' + values.join('</option><option>') + '</option></select>';

    $container.append(html).addClass('opt');

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T20:59:26.557

我认为你需要这样做：

```
var container = $("<div>"); // notice the `<` and `>` 
```

这样，您可以创建新`DIV`容器，`append`然后再创建（您已经这样做了）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T21:00:11.240

简单地调用一次 append 怎么样：

```
 $("#sblc").append("<div class=\"opt\"><select><option>Domestic</option><option>Tiger</option><option>Peeled                  Raw</option><option>Cooked Peeled Tail On<option></select><select> <option>1 lbs</option><option>2 lbs</option><option>3 lbs</option></select></div>"); 
```

# c - 多个'fork'（Linux / C）之后多个进程卡在同一个cpu上

> ID：10019096
> 
> 赞同：5
> 
> 时间：2012-04-04T20:55:16.440
> 
> 标签：c, linux, multithreading, cpu, processor

在多核机器上，如果多个进程都在同一个核心上满负荷运行，为什么 CPU 不会自动将一个进程移动到新核心？

这是一个示例程序，它重现了我看到的问题：

```
#include <stdio.h>
#include <unistd.h>
#include <stdlib.h>

void RunClient(int i) {
  printf("Starting client %d\n", i);
  while (true) {
  }
}

int main(int argc, char** argv) {
  for (int i = 0; i < 4; ++i) {
    pid_t p_id = fork();
    sleep(3);
    if (p_id == -1) {
      perror("fork");
    } else if (p_id == 0) {
      RunClient(i);
      exit(0);
    }
  }

  return 0;
} 
```

这按预期工作（当我检查顶部时，我看到所有 4 个进程都在 100% 运行）。

但是，如果我删除“sleep(3)”行，那么有时多个进程会设置为同一个 CPU，因此不会满负荷运行（例如，一个进程可能处于 100%，而其他 3 个进程各处于 33 %）。发生了什么事，我该如何解决？

我知道我可以手动设置 CPU 亲和力，但这似乎是一个脆弱的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T21:04:10.047

这不是您的代码的问题，而是您的操作系统调度程序的问题。无论有无`sleep(3)`

但是 +1 用于发布[SSCCE](http://sscce.org)

# java - 我可以为数据库表主键设置一个 MAX 值吗？

> ID：10019098
> 
> 赞同：2
> 
> 时间：2012-04-04T20:55:25.513
> 
> 标签：java, mysql, sql, jpa, eclipselink

我可以通过 JPA 或在数据库级别为数据库表主键设置一个 MAX 值吗？如果不可能，那么我在考虑

1.  `key`在 0-9999999999 之间创建一个随机数（9999999999 是我的 MAX）
2.  使用新创建的数据库对数据库执行 SELECT `key`，如果返回对象是`null`，则 INSERT，如果不重复，则返回步骤 1

因此，如果我执行上述操作，有两个问题。请记住，环境是高并发的：

Q1：用 SELECT 检查的开销，如果不存在，INSERT 是否显着？我真正的意思是：这个过程是否正常，因为通常我让数据库为我创建一个独特的 PK？

Q2：如果 Q1 没有造成显着的性能下降，我会遇到并发问题吗？例如，如果 P1 用 Id1 查表，Id1 不存在，它准备插入，P2 在 P1 可以之前偷偷插入 Id1。所以当 P1 插入 Id1 时，它会失败。我不希望这个过程在这里失败，我希望它回到循环，找到一个新的 id，重复这个过程。我怎么做？

我的环境是 SQL 和 MYSQL db。我将 JPA 与 Eclipselink 实现一起使用

**注意**：有些人质疑我以这种方式实现它的决定，答案正是`TravisJ`下面的建议。我有一个非常高的并发环境。当一个进程启动时，我需要向另一个进程创建一个请求，向该进程传递一个唯一的 10 个字符长的 ID。由于环境是大电流，我想利用 PK 的独特而非空特性。请求中包含大量信息，因此我创建了一个`Request`表，请求 Id 作为我的 PK。我知道，由于所有数据库都索引他们的 PK，因此查询出 PK 的速度很快。如果有更好的方法，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T23:28:50.803

为什么不从 1 开始并使用自动增量？这将更有效率，因为您不会遇到必须循环通过的碰撞。如果你的数字用完了，无论哪种方式，你都会在同一条船上，但至少按顺序进行，你不必处理碰撞。

想象一下，当您用完 90% 的可用号码时，试图找到一个未使用的密钥。这将需要一些时间，并且如果您随机生成它们，它总是有可能（在您的一生中）永远找不到未使用的密钥。

此外，使用自动增量，很容易判断您是否接近极限 ( `SELECT MAX(col)`)。您可以编写警报脚本，让您知道何时需要重置。对于随机方法，该查询会是什么样子？

如果您使用的是 InnoDB，那么您可能仍然不想使用主键。将随机记录插入聚集索引会影响性能，因为必须对实际表数据进行重新排序。而是使用唯一键（使用自动增量主键）。

在有问题的列上使用唯一索引，只需在范围内生成一个随机数并尝试插入它。如果插入失败，则生成一个新号码并重试。如果插入成功，则继续。这解决了并发问题。

尽管如此，顺序自动增量键将产生更好的性能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T21:00:04.123

您可以在表定义中实现检查约束：

```
CREATE TABLE P
(
P_Id int PRIMARY KEY NOT NULL,
...
CONSTRAINT chk_P_Id CHECK (P_Id>0 and P_Id<9999999999)
) 
```

**编辑：**如评论中所述，MySql 不遵守 CHECK 约束。这是错误日志中存在 6 年的缺陷，MySql 团队尚未修复它。由于 MySql 现在由 Oracle 公司监管，它可能永远不会被修复（简单地认为是“记录的限制”，不喜欢它的人可以升级到付费 DBMS）。但是，这种语法和检查约束特性本身在 Oracle、MS SQL Server（包括 SQLExpress/MSDE）、MS Access、Postgre 和 SQLite 中都可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-05T13:35:47.650

看，

[http://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing](http://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing)

和，

[http://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#Advanced_Sequencing](http://en.wikibooks.org/wiki/Java_Persistence/Identity_and_Sequencing#Advanced_Sequencing)

JPA 已经有很好的 Id 生成支持，实现你自己的没有意义。

如果您关心并发性和性能，并且使用 MySQL，我建议您使用具有较大预分配大小的 TABLE 生成器（在其他数据库上，我建议使用 SEQUENCE 生成器）。如果您有大量数据，请确保使用 long 作为您的 id。

如果你真的认为你需要更多，那么考虑 UUID id 生成。EclipseLink 2.4 提供了一个@UUIDGenerator。

# visual-studio - 在 Visual Studio 中跨项目添加和删除多个引用

> ID：10019100
> 
> 赞同：6
> 
> 时间：2012-04-04T20:55:29.090
> 
> 标签：visual-studio, visual-studio-2010, refactoring, resharper

我有一个包含 50 或 60 多个 csproj 文件的大型项目。我需要删除 6 或 7 个现有引用，并在所有这些项目中添加 10 或 15 个新引用。是否有批量添加引用和删除引用的机制？

或者，如果有办法说，在所有项目中用 Y 替换参考 X，那也会非常有帮助。让我补充一点，Nuget 不是一种选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T19:21:10.797

这很简单：只需编写一个脚本来打开所有`.proj`文件，删除不需要的行并添加您需要的行。这是最简单的方法。我认为也有为 VS 或 ReSharper 编写插件的选项，但是这两个选项都过大了。项目文件毕竟只是 XML 文件（=文本文件），可以这样对待。

当然，如果你发现这是一个重复的动作，或者如果你需要遵守一些条件逻辑，那么编写一个插件是一个明智的选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-03T11:18:37.310

[您可以通过使用AutoHotKey](http://www.autohotkey.com/)编写脚本/宏来添加对 Visual Studio 中多个项目的引用。

下面的方法与 Visual Studio 的运行副本交互，而不是直接操作项目文件中的文本，它利用了这样一个事实，即您可以在没有鼠标且仅使用键盘的情况下完成所有（大多数？）事情。它通过向 Visual Studio 发送适当的按键来工作，以便它找到适当的项目、右键单击、打开引用等。

要使脚本正常工作，您需要在执行脚本之前打开“**资源视图”**窗口并突出显示项目。这样它就可以按名称搜索项目（解决方案资源管理器可能有阻止这种情况的文件夹）。您还需要通过重命名项目窗口*SolutionName*和要添加的引用名称来调整脚本*ReferenceName*。projects.txt 只是与您的 AutoHotKey 脚本位于同一目录中的文本文件，其中包含您希望添加引用的项目的换行符分隔列表。

*注意：我使用的是 Visual Studio 2008。此外，我没有使用任何科学方法来确定我的睡眠时间，它们甚至可能没有必要。这是一个战术解决方案，毫无疑问可以优化和改进脚本。*

```
; Prepare array from project list
ArrayCount = 0 ; Initialise array counter
Loop, Read, projects.txt   ; This loop retrieves each line from the file, one at a time.
{
ArrayCount += 1  ; Keep track of how many items are in the array.
Array%ArrayCount% := A_LoopReadLine  ; Store this line in the next array element.
}
IfWinExist SolutionName - Microsoft Visual Studio (Administrator) ; Check if VS2008 with solution is running
{
WinActivate ; Bring a window to front
Loop %ArrayCount%
{
	element := Array%A_Index% ; Grabs current project name from array
	Send % element ; types the name of the project
	Sleep 100
	Send {AppsKey}F{Tab}{Tab}{Space}
	Sleep 100
	Send ReferenceName{Enter}
	Sleep 100
	Send {Enter}
	Sleep 100
}

}
else
{
MsgBox Cannot find "SolutionName - Microsoft Visual Studio (Administrator)" window.
}
```

# java - 使用来自 ByteArrayInputStream 的配置实例化 SunPKCS11

> ID：10019103
> 
> 赞同：0
> 
> 时间：2012-04-04T20:56:03.660
> 
> 标签：java, cryptography, pkcs#11

我想实现这一点：

```
private static InputStream getTokenCfg() {
    String cfg = MessageFormat.format(
            "name = {0} /n library = {1} /n  slotListIndex = 0",
            config.getPkcs11().getKey(),
            config.getPkcs11().getValue());

    return new ByteArrayInputStream(cfg.getBytes());
} 
```

然后将其与`new SunPKCS11(getTokenCfg());`

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-05T13:20:05.333

奇怪的是，我只是弄错了字符串...
rsss ....
下面的`"name = {0} \r\nlibrary = {1} \r\nslotListIndex = 0"`，就像一个魅力.. 愚蠢的我，我弄错了换行符并忘记了回车符...

# mysql - 在 MySQL 数据库中存储数组

> ID：10019110
> 
> 赞同：0
> 
> 时间：2012-04-04T20:56:42.787
> 
> 标签：mysql

是否可以有一个包含 user_id 和 Friends 列的表，并存储与用户成为朋友的所有用户的用户 ID？还是在朋友表中为每个“关系”设置一行更好？什么更实用？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T20:57:28.180

这在一定程度上取决于您打算如何使用它，但通常，是的，您希望每个关系都有一行，以便更轻松地查询这些个人关系（“有多少人是 Bob 的朋友”，“Jane 有多少朋友有总数”等）。

# c++ - 使用“ofstream”似乎不会创建或写入文件

> ID：10019114
> 
> 赞同：6
> 
> 时间：2012-04-04T20:56:57.667
> 
> 标签：c++, file-io, ofstream

在模拟结束时，我想将一些结果作为附加行写入数据文件。我正在使用的代码如下，您可以在其中假设它`outFile`被正确分配为`std::ofstream`，它`output_file`包含`std::string`一个尚不存在的文件的有效路径，并且打印到文件的变量只是`int`得到的类型模拟过程中的值。

```
outFile.open(output_file.c_str(), std::ios::out | std::ios::app );
outFile << num_nodes << ", " << tot_s << ", " << tot_c << ", " << tot_d << std::endl;
outFile.close(); 
```

我已经检查了它是否正确地使用该`ofstream::is_open()`函数打开文件并返回`false`. 但是，我不知道为什么。我已经尝试了许多不同的文件名和目录路径，所有这些我都检查过并且它们都是有效的（没有拼写错误等）

正在写入的文件只是在桌面上的一个文件夹中，我一直在其中创建文件，所以我看不出它怎么可能是权限问题。如果是权限问题，我该如何检查？

否则，还有什么可以阻止它写入文件？

**添加：**

跟进评论，在添加对 的调用后`perror()`，它显示“没有这样的文件或目录”错误。有问题的文件路径是：

```
/home/ely/Desktop/Evolutionary_Dynamics/GamesOnCycle/data/test.data 
```

我希望创建此文件，并且该路径中的所有目录都存在，拼写正确等，并且 GamesOnCycle 文件夹或其数据子文件夹没有奇怪的权限问题。请注意，它是一个 linux 系统（Ubuntu 11.04），因此正斜杠对于文件路径是正确的，除非我遗漏了 C++ 必须具有 wrt 文件路径的内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T21:12:31.813

这可能是由于几个原因而发生的。

1) 文件已经打开。

2）文件路径中的所有目录都没有创建。

3) 缺乏文件权限。

有关其他参考，请参阅[ofstream::open 何时会失败？](https://stackoverflow.com/questions/5835848/when-will-ofstreamopen-fail)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T21:02:42.750

这听起来可能很糟糕，但你是在 windows 还是 linux 上？如果是windows，对于您的文件路径，您是在字符串中用双“\”定义的，还是只有一个？如果只有一个，你并没有把角色放在你认为的道路上。为了安全起见，请使用“/”字符。

所以如果你有这个：

```
string pathname = "C:\Users\me\Desktop"; 
```

那不是一个有效的路径。您正在将“\U”、“\m”和“\D”转义到您的字符串中。你需要这个：

```
string pathname = "C:\\Users\\me\\Desktop"; 
```

或者

```
string pathname = "C:/Users/me/Desktop"; 
```

“/”不是转义字符。

这对我来说似乎很可能。

# ios - iOS流媒体视频错误

> ID：10019115
> 
> 赞同：0
> 
> 时间：2012-04-04T20:56:58.807
> 
> 标签：ios, video, streaming

我收到以下错误：

```
2012-04-04 23:46:18.374 istiqlaltv[17121:e903] -[istiqlaltvViewController moviePlayBackDidFinish]: unrecognized selector sent to instance 0x6136ee0
2012-04-04 23:46:18.380 istiqlaltv[17121:e903] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[istiqlaltvViewController moviePlayBackDidFinish]: unrecognized selector sent to instance 0x6136ee0' 
```

这是代码，我是iOS新手，我只想在你按下播放按钮时播放一个流媒体视频。

```
-(void)playVideo{
NSURL *url = [[NSURL alloc] initFileURLWithPath:@"http://blabla.com/playlist.m3u8"];

NSString *strVersion = [[UIDevice currentDevice] systemVersion];
float version = [strVersion floatValue];

if(version < 4.0){
    MPMoviePlayerController *themovie = [[MPMoviePlayerController alloc] initWithContentURL:url];
    themovie.scalingMode = MPMovieScalingModeAspectFill;
    [themovie play];
}else{
    MPMoviePlayerViewController *themovie = [[MPMoviePlayerViewController alloc]initWithContentURL:url];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayBackDidFinish) name:MPMoviePlayerPlaybackDidFinishNotification object:themovie.moviePlayer];
    [self presentMoviePlayerViewControllerAnimated:themovie];
}
}

-(void) moviePlayBackDidFinish:(NSNotification *)notification{
    MPMoviePlayerController *player = [notification object];
    [[NSNotificationCenter defaultCenter] removeObserver:self name:MPMoviePlayerPlaybackDidFinishNotification object:player];
    [player stop];
    [self dismissMoviePlayerViewControllerAnimated];
} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:06:44.840

`:`添加观察者时，`moviePayBlackDidFinish:`选择器中缺少：

应该：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(moviePlayBackDidFinish:) name:MPMoviePlayerPlaybackDidFinishNotification object:themovie.moviePlayer]; 
```

请注意，方法名称后面的冒号表示该方法带有参数。您收到错误是因为您的代码正在寻找一个名为 moviePlaybackDidFinish 的方法，该方法不带参数，但不存在这样的方法。

# c# - C# 数据表查询

> ID：10019116
> 
> 赞同：0
> 
> 时间：2012-04-04T20:57:02.850
> 
> 标签：c#, linq

我想在数据行中搜索两个字符串。例如；

```
string1="ex"
string2="ex2"
row1={'ex','ex2','ex3'....}---->True
row2={'ex3','ex1','ex2'....}---->True
row3={'ex2','ex5','ex6'....}---->False 
```

每行必须有两个字符串的值。为此，

```
for (counter = 0; counter < array.Count; counter++)
        {
            int index=0;
            ArrayList array3 = new ArrayList();
            array3 = Split(array[counter].ToString());
            foreach (DataRow row2 in data.Rows)
                foreach (object obje in row2.ItemArray)
                {
                    //Proceeds
                    }
                }
        } 
```

我编码了一些东西。但我不想处理代码中的污染......有没有一种简单的方法来选择方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T21:00:35.127

```
var result = data.AsEnumerable()
            .Where(r => r.ItemArray.Contains(string1) || r.ItemArray.Contains(string2)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T21:00:47.760

尝试做这样的事情：

首先定义一个`DataView`

`DataView dv = new DataView(dt)`哪里`dt`是`DataTable`。

申请后`RowFilter`

`dv.RowFilter = "CONTAINS(ColName, 'ex1') AND CONTAINS(ColName, 'ex2')"`.

希望这可以帮助。

# solr - 打开/关闭词干

> ID：10019118
> 
> 赞同：0
> 
> 时间：2012-04-04T20:57:10.873
> 
> 标签：solr

我已将 schema.xml 修改为具有两个字段，一个用于词干提取，一个用于不进行词干提取。我还使用复制字段将一个复制到另一个。最后在 solrconfig.xml 中我添加了适当的 dismax。这是需要做的一切吗？我有一种感觉，我错过了一些东西。通过 SOLR 管理面板测试它的最佳方法是什么？还有其他方法可以测试吗？

在 solrconfig.xml 中：

```
<requestHandler name="dismax" class="solr.SearchHandler" >
  <lst name="defaults">
  <str name="defType">dismax</str>
  <str name="echoParams">explicit</str>
  </lst>
</requestHandler> 
```

在 schema.xml 中：

```
 <field name="contents" type="text_general" indexed="true" stored="true" termVectors="true" termPositions="true" termOffsets="true"/>
 <field name="contents_a" type="text_en_splitting" indexed="true" stored="true" termVectors="true" termPositions="true" termOffsets="true"/>

  <!-- A general text field that has reasonable, generic
     cross-language defaults: it tokenizes with StandardTokenizer,
 removes stop words from case-insensitive "stopwords.txt"
 (empty by default), and down cases.  At query time only, it
 also applies synonyms. -->
  <fieldType name="text_general" class="solr.TextField" positionIncrementGap="100">
  <analyzer type="index">
    <charFilter class="solr.HTMLStripCharFilterFactory"/>
    <tokenizer class="solr.WhitespaceTokenizerFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
    <!-- in this example, we will only use synonyms at query time
    <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>
    -->
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
  <analyzer type="query">
    <charFilter class="solr.HTMLStripCharFilterFactory"/>
    <tokenizer class="solr.WhitespaceTokenizerFactory"/>
    <filter class="solr.StopFilterFactory" ignoreCase="true" words="stopwords.txt" enablePositionIncrements="true" />
    <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
    <filter class="solr.LowerCaseFilterFactory"/>
  </analyzer>
</fieldType>

 <fieldType name="text_en_splitting" class="solr.TextField" positionIncrementGap="100" autoGeneratePhraseQueries="true">
  <analyzer type="index">
    <charFilter class="solr.HTMLStripCharFilterFactory"/>
    <tokenizer class="solr.WhitespaceTokenizerFactory"/>
    <!-- in this example, we will only use synonyms at query time
    <filter class="solr.SynonymFilterFactory" synonyms="index_synonyms.txt" ignoreCase="true" expand="false"/>
    -->
    <!-- Case insensitive stop word removal.
      add enablePositionIncrements=true in both the index and query
      analyzers to leave a 'gap' for more accurate phrase queries.
    -->
    <filter class="solr.StopFilterFactory"
            ignoreCase="true"
            words="stopwords_en.txt"
            enablePositionIncrements="true"
            />
    <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="1" catenateNumbers="1" catenateAll="0" splitOnCaseChange="1"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
    <filter class="solr.EnglishMinimalStemFilterFactory"/>
  </analyzer>
  <analyzer type="query">
  <charFilter class="solr.HTMLStripCharFilterFactory"/>
    <tokenizer class="solr.WhitespaceTokenizerFactory"/>
    <filter class="solr.SynonymFilterFactory" synonyms="synonyms.txt" ignoreCase="true" expand="true"/>
    <filter class="solr.StopFilterFactory"
            ignoreCase="true"
            words="stopwords_en.txt"
            enablePositionIncrements="true"
            />
    <filter class="solr.WordDelimiterFilterFactory" generateWordParts="1" generateNumberParts="1" catenateWords="0" catenateNumbers="0" catenateAll="0" splitOnCaseChange="1"/>
    <filter class="solr.LowerCaseFilterFactory"/>
    <filter class="solr.KeywordMarkerFilterFactory" protected="protwords.txt"/>
    <filter class="solr.EnglishMinimalStemFilterFactory"/>
  </analyzer>
</fieldType>

  <copyField source="contents" dest="contents_a"/> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T21:09:50.280

是的，要测试字段的词干，您应该能够使用管理面板上的“字段分析”工具完成所需的一切。（点击“分析”）。

在顶部，输入您的字段名称。( `contents_a`)

输入一个测试值，你应该很清楚地看到结果。

您可以选中上半部分的“详细”复选框，以获得按顺序在现场运行的过滤器的超详细视图。

# c# - c#动态ExpandoObjects名称中的句点？

> ID：10019123
> 
> 赞同：2
> 
> 时间：2012-04-04T20:57:23.330
> 
> 标签：c#, expandoobject, facebook-ads-api

也许这是一个愚蠢的问题，但我正在做一个项目，希望我[生成一些如下所示的 JSON](http://developers.facebook.com/docs/reference/ads-api/adcreative/#adtypes)：

```
{'action.type':'post', 'application':APP_ID} 
```

在 C# 中，我试图创建这个“action.type”属性，其值为“post”。我该怎么做？以下是我通常创建的内容，例如：

```
dynamic ActionSpec = new ExpandoObject();
ActionSpec.SomeParam = "something";
ActionSpec.id = 12345; 
```

我不能去“ActionSpec.action.type”，因为那不会输出所需的“action.type”。这有意义吗？谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T20:58:59.600

您可以*尝试*通过字典填充它：

```
IDictionary<string, object> expandoDictionary = ActionSpec;
expandoDictionary["action.type"] = "post"; 
```

但是，如果它拒绝将其作为无效标识符，我一点也不感到惊讶。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T21:14:38.500

使用[Json.Net](http://json.codeplex.com/)

```
JObject jObj = new JObject();

jObj["action.type"] = "post";
jObj["application"] = "APP_ID";

var json = jObj.ToString(); 
```

# c++ - C / C ++程序中数字的浮点表示中的垃圾位

> ID：10019127
> 
> 赞同：1
> 
> 时间：2012-04-04T20:57:34.673
> 
> 标签：c++, floating-point, floating-accuracy

> **可能的重复：**
> [JavaScript 的数学被破坏了吗？](https://stackoverflow.com/questions/588004/is-javascripts-math-broken)
> [处理浮点数的精度问题](https://stackoverflow.com/questions/590822/dealing-with-accuracy-problems-in-floating-point-numbers)

考虑下面的代码及其输出：

```
#include <iostream>
#include <iomanip>
#include <cstdlib>
#include <cmath>
#include <limits>
#include <vector>

int main(int argc, char *argv[])
{
  double xleft  = 0;
  double xright = 1.0;

  double dx = 0.1;
  std::cout << std::setprecision(36) << "dx is " << dx << std::endl; 

  int numgridpts = ((int) ceil (( xright - xleft )/dx))  + 1; 

  for (int i = 0; i < numgridpts  ; ++i)
    {
      std::cout << std::setprecision(36) << xleft + i*dx << std::endl;
    }

  return 0;
}

[~:ICgen/$ ./a.out                                                                                                                               
dx is 0.100000000000000005551115123125782702
0
0.100000000000000005551115123125782702
0.200000000000000011102230246251565404
0.300000000000000044408920985006261617
0.400000000000000022204460492503130808
0.5
0.600000000000000088817841970012523234
0.700000000000000066613381477509392425
0.800000000000000044408920985006261617
0.900000000000000022204460492503130808
1 
```

我的问题是，当我将数字打印到 36 位精度时，为什么数字 0 、 0.5 和 1.0 精确表示，而其他数字似乎在末尾放置了一些垃圾数字？

此外，如果我添加 0.2 和 0.1 的浮点表示，如上面的输出所示，它们似乎与 0.3 的表示相加，在垃圾位的部分。

我正在使用 Linux Ubuntu 10.10 和 gcc 编译器

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T21:02:42.293

这些不是垃圾数字，而是根据 IEEE 754 标准在浮点表示中尽可能准确的数字值。

该标准使用二进制数，而不是十进制数。因此，像 1/2、1/4、1/8（= 0.5、0.25、0.125、...）这样的分数和它们的倍数可以精确表示，而像 1/3 或 1/10 这样的分数则不是。

如果这是一个十进制数字系统，那么像 1/10、1/100、1/1000... 这样的分数以及它们的倍数将是唯一用有限位数精确表示的数字。

在这两个系统中，如果它们不是非常大，所有整数都被精确表示。

# ios - UIView bringSubviewToFront: *不*将视图带到前面

> ID：10019130
> 
> 赞同：7
> 
> 时间：2012-04-04T20:57:53.860
> 
> 标签：ios, uiview, uitouch

我正在实现一个简单的 iOS 纸牌游戏，它允许用户以通常的方式拖动卡片。卡片用`UIView`子类表示`CardView`。所有卡片视图都是兄弟姐妹，它们是`SolitaireView`. 下面的代码片段试图“将卡片放在前面”，以便在拖动时它位于所有其他视图之上：

```
-(void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
   UITouch *touch = [touches anyObject];
   if (touch.view.tag == CARD_TAG) {
      CardView *cardView = (CardView*) touch.view;
      ...
      [self bringSubviewToFront:cardView];
      ...
   }
} 
```

不幸的是，卡片的 z 顺序在拖动过程中保持不变。在下面的图片中，我正在拖动国王。注意它是如何正确地位于左图中的九之上，但不正确地位于右图中的二之下（实际上是在整个堆栈之下）：

![在此处输入图像描述](../Images/17a7a324e559c6edb06422a1b0e38bf0.png) ![在此处输入图像描述](../Images/5f2686ec7ea05a54ca0d925398765b82.png)

我也尝试过更改`layer.zPosition`属性，但无济于事。如何在拖动过程中将卡片视图置于前面？我很迷惑。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-06T03:10:45.117

确认的。`bringSubviewToFront:`导致`layoutSubview`被调用。由于我的版本`layoutSubviews`在所有视图上设置了 z 顺序，因此这将撤消我在`touchesBegan:withEvent`上面的代码中设置的 z 顺序。`bringSubviewToFront`苹果应该在文档中提到这个副作用。

我没有使用`UIView`子类，而是创建了一个`CALayer`名为`CardLayer`. 我在我的`KlondikeView`子类中处理触摸，如下所示。topZPosition 是一个实例变量，它跟踪所有卡片的最高 zPosition。请注意，修改`zPosition`通常是动画的——我在下面的代码中将其关闭：

```
-(void)touchesBegan:(NSSet*)touches withEvent:(UIEvent*)event {
   UITouch *touch = [touches anyObject];
   CGPoint touchPoint = [touch locationInView:self];
   CGPoint hitTestPoint = [self.layer convertPoint:touchPoint
                                           toLayer:self.layer.superlayer];
   CALayer *layer = [self.layer hitTest:hitTestPoint];

   if (layer == nil) return;

   if ([layer.name isEqual:@"card"]) {
     CardLayer *cardLayer = (CardLayer*) layer;
     Card *card = cardLayer.card;

     if ([self.solitaire isCardFaceUp:card]) {
        //...                                                                                                            
        [CATransaction begin]; // disable animation of z change                                                                  
        [CATransaction setValue:(id)kCFBooleanTrue
                         forKey:kCATransactionDisableActions];              
        cardLayer.zPosition = topZPosition++; // bring to highest z

        // ... if card fan, bring whole fan to top

        [CATransaction commit];
        //...                                                                                                            
     }
     // ...                                                                                                             
   }

} 
```

# java - 如何在表单提交之间保留 ModelMap？

> ID：10019132
> 
> 赞同：3
> 
> 时间：2012-04-04T20:58:00.723
> 
> 标签：java, web-applications, spring-mvc

我添加到包含一个下拉列表的 a 中，当表单初始化时，我正在填充 ModelAttribute `ModelMap`：`Map`

```
@RequestMapping(method = RequestMethod.GET)
    public String initForm(HttpServletRequest httpRequest, ModelMap model)
    {
        model.addAttribute("myList", myMap);
        return "MyForm";
    } 
```

它按预期工作，但是当用户提交表单时，此列表将从地图中丢失。

```
@RequestMapping(method = RequestMethod.POST, value ="/dosearch")
    public String processSearch(... ModelMap model)
    {
                .....
    return new ModelAndView("MyForm",model); 
```

上面的这种方法不起作用。

如何在表单提交之间保留地图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T22:31:40.643

不，即使是 Flash 范围也无法帮助您，因为您没有使用 redirect-after-post。以下是选项：

*   输出html表单中的所有值，然后将它们提交给`/dosearch`您，您将能够从请求中获取它们
*   使用会话存储值（更糟糕的选择）

# g++ - Lapack 未定义参考

> ID：10019134
> 
> 赞同：2
> 
> 时间：2012-04-04T20:58:07.267
> 
> 标签：g++, lapack

我是 g++ 和 lapack 的新手，并尝试使用它们。我在尝试编译以下幼稚代码时遇到了问题

```
#include <lapackpp.h>
int main()
{
    LaGenMatDouble A;
    return 0;
} 
```

如果我运行命令

```
$g++ -L/usr/local/lib -llapackpp test2.cpp 
```

其中 test2.cpp 是 cpp 文件的名称，终端会报错：

```
test2.cpp:1:22: fatal error: lapackpp.h: No such file or directory 
```

但是如果我运行命令：

```
$g++ -I/usr/local/include/lapackpp -L/usr/local/lib -llapackpp test2.cpp 
```

终端会报错：

```
/tmp/ccUi11DG.o: In function `main':  
test2.cpp:(.text+0x12): undefined reference to `LaGenMatDouble::LaGenMatDouble()'  
test2.cpp:(.text+0x23): undefined reference to `LaGenMatDouble::~LaGenMatDouble()'  
collect2: ld returned 1 exit status 
```

顺便说一句，如果我运行命令

```
$pkg-config lapackpp --libs 
```

结果是

```
-L/usr/local/lib -llapackpp 
```

你能帮我解决这个问题吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T10:16:11.520

Lapack 需要 fortran 库，这就是它的`-lgfortran`来源。此外，为编译器提供该库的确切方式似乎取决于 Linux 发行版。从[文档](http://lapackpp.sourceforge.net/)中：

> *要求*
> 
> 这个包需要包“blas”、“lapack”（没有“++”）和一个 Fortran 编译器。在大多数 Linux 上，这些都以“blas”和“lapack”的名称作为预编译的二进制文件提供。对于 SuSE 10.x，Fortran 编译器以包“gfortran”的形式提供。对于 SuSE 9.x，Fortran 编译器以包“gcc-g77”的形式提供。

不知道为什么`pkg-config lapackpp --libs`不列出`-lgfortran`

`-I/usr/local/include/lapackpp`指定 lapackpp 相关的头文件。没有它，当您尝试包含它时，编译器无法找到 lapackpp.h ( `#include <lapackpp.h>`) - 请参阅您的问题中的编译器错误

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T03:32:28.360

我终于解决了这个问题，但仍然想知道为什么会这样。可以将 cpp 文件链接到 lapackpp 库的唯一命令是：

```
g++ foo.cpp -o foo -lgfortran -llapackpp -I/usr/local/include/lapackpp 
```

`-lgfortran`如果没有，或`-I/usr/local/include/lapackpp`替换为，它将无法工作`-L/usr/local/lib`。

有人有答案吗？

# mysql - 从 Spring Roo 自动生成数据库表

> ID：10019135
> 
> 赞同：0
> 
> 时间：2012-04-04T20:58:11.590
> 
> 标签：mysql, spring, hibernate, spring-roo

我遇到了一些我理解应该开箱即用的问题 - 尽管进行了以下检查，但我没有在我的 MySQL 数据库中生成任何表：

1.  架构已经定义
2.  persistence.xml 文件包含`<property name="hibernate.hbm2ddl.auto" value="update"/>`
3.  Entity 类包含`@RooJpaActiveRecord`注释。

我正在使用休眠和 MySQL。我`persistence setup`为此使用了命令。我的问题：

A. 我有什么遗漏吗？

B. 是否必须使用 Roo 命令行来进行实体的初始定义？Roo 是否足够聪明地检测（当它运行时）我使用了 Roo 注释，所以它应该“启动”并填充我需要的任何进一步配置，以便下次我重新启动服务器时表存在？（为了平衡，我尝试通过命令行创建一个新实体和创建一个新类/手动添加注释，没有骰子......）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:29:23.300

结果发现，我的 Eclipse 安装不知何故恢复到 Roo v1.5，它似乎不支持 JPA 注释。

现在运行 1.2.0 没有问题。

希望这可以帮助某人。

# ios - iOS - 硬编码数据与 XML 解析的性能

> ID：10019137
> 
> 赞同：0
> 
> 时间：2012-04-04T20:58:26.607
> 
> 标签：ios, xml, core-data

我一直在想很长一段时间，但我真的无法决定哪个在性能方面更好。

假设我们正在构建一个数据驱动的 iOS 应用程序。我们希望在 UITableView 中显示一堆（数百个）用户不可编辑的元素。是从 XML 文件中读取它们还是从代码中加载它们更好。我的意思是：

```
Book *aBook = [Book alloc]init];
aBook.title = @"My First Book";
aBook.author = @"John Doe";
...    

NSArray *books = [NSArray arrayWithObjects: abook, ... , nil]; 
```

或者

```
<book>
   <title>My first book</title>
   <author>John Doe</author>
   ...
</book> 
```

然后用 NSXMLParser 解析它？

什么时候放弃上述两种方法并使用预加载的 SQLite Core Data 数据库？

# playframework - Play Framework [1.2.4]：在视图层中转义 HTML

> ID：10019140
> 
> 赞同：0
> 
> 时间：2012-04-04T20:58:34.030
> 
> 标签：playframework

我需要根据某些标准突出显示部分文本。我正在识别要在我的控制器中突出显示的文本，并将更新的文本（连同嵌入的样式）发送到视图层。

我有一个对象 - obj，带有 obj.text = "Welcome. Hi Dude";

当我在视图层中使用 ${obj.Text} 时。以下内容显示为文本...

欢迎。嗨，伙计”；

相反......有没有办法让文本呈现为 HTML，意味着只显示“Welcome.Hi Dude”？

注意：我使用的是 groovy 模板

谢谢， 卡提克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:10:56.963

您需要使用[Raw 扩展](http://www.playframework.org/documentation/1.2.4/javaextensions)：

```
 ${obj.text.raw()} 
```

将生成不被 groovy 模板转义的 HTML

# iphone - ipad3 上 iphone 应用程序的图标

> ID：10019141
> 
> 赞同：1
> 
> 时间：2012-04-04T20:58:34.470
> 
> 标签：iphone, objective-c

我的应用程序针对 iphone，但显然它也可以安装在 iPad 上。

在 iPhone 上，它使用正确的图标图像；在 iPad 2 上，它也使用正确的图标。

但是在 iPad 3 上，它不是使用图标作为图标，而是使用我的启动图像作为图标。这是 iPad 3 上的常见行为吗？还是我的设置错误？（我使用最新的 SDK，并针对 iOS 5.0，如果这很重要）

*更新*

我附上了下面的 plist 文件。我想我能理解出了什么问题…… Default@2x.png 是启动图像的名称。令我困惑的是，这与我在 Xcode 中“摘要”屏幕上看到的不匹配。在摘要屏幕上的 Xcode 中：

1.  我将视网膜图标设置为 SOF_app_icon.png，但我没有设置非视网膜图标 - 它显示“未指定图像”；
2.  我有两个启动图像集：用于非视网膜的 Default.png 和用于视网膜的 Default@2x.png。

这是 plist 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
<key>CFBundleDevelopmentRegion</key>
<string>English</string>
<key>CFBundleDisplayName</key>
<string>${PRODUCT_NAME}</string>
<key>CFBundleExecutable</key>
<string>${EXECUTABLE_NAME}</string>
<key>CFBundleIcons</key>
<dict>
    <key>CFBundlePrimaryIcon</key>
    <dict>
        <key>CFBundleIconFiles</key>
        <array>
            <string>SOF_app_icon.png</string>
            <string>Default@2x.png</string>
        </array>
    </dict>
</dict>
<key>CFBundleIdentifier</key>
<string>com.overwaitea.${PRODUCT_NAME:rfc1034identifier}</string>
<key>CFBundleInfoDictionaryVersion</key>
<string>6.0</string>
<key>CFBundleName</key>
<string>${PRODUCT_NAME}</string>
<key>CFBundlePackageType</key>
<string>APPL</string>
<key>CFBundleShortVersionString</key>
<string>1.0</string>
<key>CFBundleSignature</key>
<string>????</string>
<key>CFBundleVersion</key>
<string>1.0</string>
<key>LSApplicationCategoryType</key>
<string></string>
<key>LSRequiresIPhoneOS</key>
<true/>
<key>NSMainNibFile</key>
<string>MainWindow</string>
<key>NSZombieEnabled</key>
<false/>
<key>UIBackgroundModes</key>
<array>
    <string>location</string>
</array>
<key>UIFileSharingEnabled</key>
<true/>
<key>UIRequiredDeviceCapabilities</key>
<array>
    <string>location-services</string>
</array>
<key>UISupportedInterfaceOrientations</key>
<array>
    <string>UIInterfaceOrientationPortrait</string>
    <string>UIInterfaceOrientationLandscapeLeft</string>
    <string>UIInterfaceOrientationLandscapeRight</string>
</array>
<key>corelocation</key>
<string>YES</string>
</dict>
</plist> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T21:13:25.523

它使用*启动图像*（即在您的应用程序启动后仍在加载时显示的图像）？这没有任何意义。这当然不是正常行为，我猜你在`Info.plist`图标条目中犯了一个错误。

请注意，您需要为 iPad 3 提供 2x 图标...请参阅Apple 提供[的信息聚宝盆。](https://developer.apple.com/library/ios/#documentation/UserExperience/Conceptual/MobileHIG/IconsImages/IconsImages.html)

如果您发布 Info.plist 的副本（任何敏感信息都已编辑）以及您的图标文件名，我们可能可以准确确定出了什么问题。

最后一点，我注意到应用程序的开发副本相对于图标等资产可能会略微失控，这似乎是因为 Xcode 试图通过仅复制它认为已更改的资产来减少启动时间。出于这个原因，实际上从设备/模拟器中删除应用程序并从头开始重新安装可能是一个好主意，以确保您没有看到过时的信息。

编辑：感谢您发布 Info.plist。这澄清了一些事情。

让我们从这一行开始：

```
<string>Default@2x.png</string> 
```

您是否看到，在您的图标文件设置中，这告诉 iOS 使用您的启动图像作为图标？我猜这是一个错字，但我想确保您不会混淆不同 plist 键的用途。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T11:16:46.473

有同样的问题所有添加到iphone项目的图标文件（包括icon-72.png、icon-72@2x.png、Icon-Small-50.png、Icon-Small-50@2x.png）。

然后将 iPad 文件手动添加到 info.plist 文件中。它表明顺序很重要。把它们放在最后没有用。我的订单现在是 Icon.png Icon@2x.png Icon-72.png Icon-72@2x.png 这对我有用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T18:29:43.210

作为记录，Xcode 4.3.1 使用 CFBundleIconFiles 3 和 4 作为针对 iPhone 的应用程序的启动图像。我在摘要窗口中清除了启动图像并删除了 info.plist 中的项目以确保我不是导致问题的人，并且 Xcode 在重新添加时总是将启动图像设置为相同的插槽。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T22:12:39.647

改变

```
 <string>SOF_app_icon.png</string>
    <string>Default@2x.png</string> 
```

至

```
 <string>SOF_app_icon.png</string>
    <string>SOF_app_icon@2x.png</string> 
```

您如何配置它是告诉设备将视网膜图标设置为“默认”图像的视网膜版本。

澄清“Default.png 和 Default@2x.png”是您的启动（启动）图像的标准名称。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-18T07:36:24.173

解决方法很简单，在你的`plist->icon files->` `Default.png`并且`Default@2x.png`可以添加！只需将其从 pList 中删除，

有用

# memory-management - FORTRAN 中的释放和内存分配问题

> ID：10019150
> 
> 赞同：-6
> 
> 时间：2012-04-04T20:59:02.380
> 
> 标签：memory-management, fortran, glibc, double-free

我的部分 FORTRAN 代码的解除分配和分配方面存在问题。特别是，我认为这个问题与在网上搜索我的错误消息时的内存分配有关。错误消息涉及无效指针，但是，我没有在我的程序中使用任何指针

在完成我的 f 循环的第 2 次迭代后（见下文），程序崩溃了，或者说大部分时间它崩溃了，有时它只是冻结了。我相信这是错误所在。随着程序运行到这一点。

我有未显示的子程序，但由于它们适用于其他模拟组合，我有理由相信它们不是问题。我在程序中的其他地方使用 deallocate 和 allocate （成功），所以我很惊讶它在这里不起作用。

为了便于阅读，我只展示了程序的一部分。特别是，我删除了对我编写的子例程的调用。我希望我已经为你们程序员提供了足够的信息来帮助我找出问题所在。如果不是，请指定您想要的其他信息，我很乐意遵守。我已经使用各种编译器选项编译了该程序，并修复了一些错误并删除了任何警告。然而，此时编译器选项并没有给我更多信息。

```
allocate(poffvect(1:6))
allocate(phi1out(1:1))
allocate(phi2out(1:1))
allocate(phi1outs1(1:1))
allocate(phi2outs1(1:1))

     dummy allocation
   allocate(phi1outind(1:1))
   allocate(phi2outind(1:1))
   allocate(phi1outinds1(1:1))
   allocate(phi2outinds1(1:1))

   do e = 1, 6
     print *,"e", e
     do f = 1, 3

       print *,"f", f, iteratst1(f), trim(filenumcharimp)

       deallocate(phi1outinds1, STAT = AllocateStatus)
     if (AllocateStatus /= 0) stop "Error during  deallocation of phi1outinds1"
     print *, "Allocatestatus of phi1outinds1 is",  AllocateStatus
     deallocate(phi2outinds1, STAT = AllocateStatus)
    print *, "DeAllocatestatus of phi1outinds2 is", AllocateStatus

     if (AllocateStatus /= 0) stop "Error during deallocation of phi2outinds1"
    print *, "we deallocate f loop ok", iteratst1(f)

      allocate(phi1outinds1(1:iteratst1(f)), STAT = AllocateStatus)
     if (AllocateStatus /= 0) stop "Error during allocation of phi1outinds1"
     allocate(phi2outinds1(1:iteratst1(f)), STAT = AllocateStatus)
    if (AllocateStatus /= 0) stop "Error during deallocation of phi1outinds1"

 end do
 end do 
```

编译器选项

```
ifort -free -check  -traceback -o adatptmultistage1new.out adatptmultistage1new.f90 
```

输出

```
 e           1
       f           1        5000 43
     DeAllocatestatus of phi1outinds1 is           0
    DeAllocatestatus of phi1outinds2 is           0
    we deallocate f loop ok        5000
   f loop done           1
  f           2       10000 43
 Allocatestatus of phi1outinds1 is           0
 DeAllocatestatus of phi1outinds2 is           0
 we deallocate f loop ok       10000
   f loop done           2
   f           3       15000 43
  Allocatestatus of phi1outinds1 is           0 
```

错误信息

```
*** glibc detected *** ./adatptmultistage1new.out: munmap_chunk(): invalid pointer:   0x0000000000d3ddd0 ***
    ======= Backtrace: =========
    /lib/libc.so.6(+0x77806)[0x7f5863b7b806]
   .    /adatptmultistage1new.out[0x43247c]
   .    /adatptmultistage1new.out[0x404368] 
   ./adatptmultistage1new.out[0x4031ec]
   /lib/libc.so.6(__libc_start_main+0xfd)[0x7f5863b22c4d]
  .    /adatptmultistage1new.out[0x4030e9]
   ======= Memory map: ========
00400000-004d4000 r-xp 00000000 08:03    9642201 
/home/jgold/smwcv/error_infect/test/surfaces/multistage/adaptonly/adatptmultistage1new.out
006d4000-006dc000 rw-p 000d4000 08:03 9642201 
```

[为简洁起见，未显示其余错误消息]

```
 7fffb004d000-7fffb00bc000 rw-p 00000000 00:00 0                          [stack]
  7fffb01d7000-7fffb01d8000 r-xp 00000000 00:00 0                          [vdso]
  ffffffffff600000-ffffffffff601000 r-xp 00000000 00:00 0                  [vsyscall]
  Aborted 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T22:17:14.883

这是我们试图弄清楚的很多代码。您是否使用尽可能多的编译器调试选项对其进行编译？特别是，您是否使用数组边界检查？你用的是什么编译器？我没有看到“使用”语句......最好将您的子例程放入一个模块并“使用”该模块，以便编译器可以检查实际参数和虚拟参数之间的参数一致性。

编辑：“双重释放或损坏”表明内存已损坏。由于您似乎没有任何指针，因此有三种可能的方式来破坏内存：

1.  使用尚未分配的可分配变量。如果 allocate 语句失败，程序可能会在此时抛出错误。您可能正在使用忘记分配的变量。
2.  对过程的调用中的参数与过程所期望的参数之间存在分歧，即实际参数和虚拟参数之间存在分歧。使用模块将允许编译器对此进行更好的检查。
3.  使用非法的下标值写入数组大小之外——这将覆盖“随机”内存，例如描述下一个数组的内部结构。打开运行时下标或数组绑定检查将对此进行测试。使用 ifort 使用:`-check bounds`或`-check all`. 对于非常通过检查尝试：`-O2 -stand f03 -check all -traceback -warn all -fstack-protector -assume protect_parens -implicitnone`

# c - ANSI C 程序：如何在程序运行时确定长度时初始化数值数组？

> ID：10019154
> 
> 赞同：0
> 
> 时间：2012-04-04T20:59:09.820
> 
> 标签：c

C 的新手。我正在编写一个 ANSI C 程序（在 Linux 上使用 gcc 4.4.6）并且需要知道如何初始化一个数值数组，例如 int 或 double，其中数组的长度在程序运行时确定跑？

ANSI C 是否允许一个人声明变量，执行一些代码（其中长度是确定的），然后声明其他变量（例如有问题的数组）？

如果没有，这在实践中是如何完成的？`gcc -ansi ...`注意程序使用switch编译。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T21:00:35.730

您需要为数组分配内存并在完成后释放它。

查看[malloc](http://linux.die.net/man/3/malloc)和[free并获取](http://linux.die.net/man/1/free)[此处](https://stackoverflow.com/questions/562303/the-definitive-c-book-guide-and-list)列出的初学者书籍之一。在没有扎实基础的情况下尝试编写 C 会导致流血、眼泪和段错误。想想孩子们。不要这样做。

让您开始用脚射击自己的示例：

```
int* intarray = NULL;
intarray = (int*)malloc(sizeof(int) * 23); // allocate space for 23 intS 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T21:02:55.700

要创建动态数组，您可以使用指针；用法几乎相同，但是完成后您需要 free() 内存；

```
int staticArray[10];
int *dynamicArray;

// calculate length of the dynamic array here
int length = 3*4;

dynamicArray = (int*)malloc(length * sizeof(int));

staticArray[4]  = 7;
dynamicArray[8] = 5;

free(dynamicArray); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T21:09:48.943

如果您希望在堆栈上分配数据（并且如果它可用），我会建议您`alloca`结束，但 malloc 在大多数情况下都可以工作。`malloc`

请注意，即使使用 GCC 编译，GCC 也允许使用灵活长度的数组，`-ansi`因此您可以这样做：

```
int size = 0;
printf("please enter array size: ");
scanf("%i", &size);

data_type data[size]; 
```

但是，如果您必须动态分配它，您可以简单地将最后一行替换为：

```
data_type *data = alloca(size * sizeof(*data)); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T21:55:01.447

> ANSI C 是否允许一个人声明变量，执行一些代码（其中长度是确定的），然后声明其他变量（例如有问题的数组）？

从 1999 标准开始，您可以在一个块中混合声明和代码；在此之前，块中的所有声明都必须在代码之前。要为 C99 编译，请使用`-std=c99`代替`-ansi`（与 同义`-std=c89`）。所以以下在 C99 中是合法的：

```
int main(void)
{
  int size;

  // get the size somehow

  int *array = malloc(sizeof *array * size);
  ...
  // don't forget to clean up when you're done
  free(array);
} 
```

如果您*必须*使用标志进行编译`-ansi`（意味着您必须符合 C89 标准），您必须像这样构建代码：

```
int main(void)
{
  int size;
  int *array; 

  // get size somehow

  array = malloc(sizeof *array * size);
  ...
  free(array);
} 
```

请注意，C99 还支持*可变长度数组*，它允许您在运行时指定数组的大小：

```
int main(void)
{
  int size;

  // get size as before

  int array[size];
  ...
} 
```

与常规数组相比，VLA 有一定的局限性（它们不能是结构或联合类型的成员，也不能出现在函数之外），必须小心使用；如果您需要分配*大量*空间，请`malloc`改用。事实证明，它们的实现非常复杂，以至于最近批准的 2011 标准为实现提供了*不*支持它们的选项。

# javascript - 测试 Json 不起作用

> ID：10019157
> 
> 赞同：0
> 
> 时间：2012-04-04T20:59:29.617
> 
> 标签：javascript, json

我是 Json 的初学者，我按照本[教程](http://www.webmonkey.com/2010/02/get_started_with_json/) 编写的示例基于教程，但我不明白它不起作用：

```
<script language="javascript">
var Jtext="{"variables":["var1","var2","var3"]}";
var Jobj=eval("(" + Jtext + ")");
var j=Jobj["variables"];
document.write(j[0]);
</script> 
```

任何帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T21:02:49.193

删除该 JSON Obj 上的邪恶 eval 和双引号。

```
<script>
    var obj={"variables":["var1","var2","var3"]};
    var j=obj["variables"];
    document.write(j[0]);
</script> 
```

你的例子有什么问题：

```
var Jtext="{"variables":["var1","var2","var3"]}"; 
```

这行不通。`variables`, `var1`, `var2`, ... 不在字符串中，就像这里的语法高亮显示的那样。这会导致 Uncaught SyntaxError: Unexpected identifier。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T21:05:52.607

尝试：

```
<script type="text/javascript" language="javascript">

    var Jobj = {'variables':['var1','var2','var3']};

    var j = Jobj.variables;

    document.write(j[0]);

</script> 
```

# java - Java中的参数化字符串

> ID：10019162
> 
> 赞同：42
> 
> 时间：2012-04-04T20:59:49.350
> 
> 标签：java

我发现自己经常想要编写带有参数占位符的可重用字符串，几乎与您在 SQL PreparedStatement 中找到的完全一样。

这是一个例子

```
private static final String warning = "You requested ? but were assigned ? instead.";

public void addWarning(Element E, String requested, String actual){

     warning.addParam(0, requested);
     warning.addParam(1, actual);
     e.setText(warning);
     //warning.reset() or something, I haven't sorted that out yet.
} 
```

Java中是否已经存在类似的东西？或者，有没有更好的方法来解决这样的问题？

我真正要问***的是：这是理想的吗？***

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-04-04T21:03:35.033

# `String.format()`

从 Java 5 开始，您可以使用[`String.format`](http://docs.oracle.com/javase/8/docs/api/java/lang/String.html#format-java.lang.String-java.lang.Object...-)参数化字符串。例子：

```
String fs;
fs = String.format("The value of the float " +
                   "variable is %f, while " +
                   "the value of the " + 
                   "integer variable is %d, " +
                   " and the string is %s",
                   floatVar, intVar, stringVar); 
```

请参阅[http://docs.oracle.com/javase/tutorial/java/data/strings.html](http://docs.oracle.com/javase/tutorial/java/data/strings.html)

或者，您可以创建一个包装器`String`来做一些更花哨的事情。

# `MessageFormat`

根据[Max](https://stackoverflow.com/users/142404/max)的评论和[Affe 的回答](https://stackoverflow.com/a/10019232/642706)，您可以使用该类本地化您的参数化字符串[`MessageFormat`](http://docs.oracle.com/javase/8/docs/api/java/text/MessageFormat.html)。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-04-04T21:04:10.157

你可以使用`String.format`. 就像是：

```
String message = String.format("You requested %2$s but were assigned %1$s", "foo", "bar"); 
```

会产生

```
"You requested bar but were assigned foo" 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-04T21:05:43.967

它是内置的，是的。您要查找的类是[java.text.MessageFormat](http://docs.oracle.com/javase/6/docs/api/java/text/MessageFormat.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-04T21:03:42.160

[Java 字符串格式化程序](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-04T21:43:58.383

String 类提供以下格式方法，[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html)。例如（根据原始帖子）：

```
private final static String string = "You requested %s but were assigned %s instead.";

public void addWarning(Element e, String requested, String actual) {
String warning = String.format(string, requested, actual);
e.setText(warning); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T21:08:35.417

我可能会做类似的事情：

```
private final String warning = String.format("You requested %s but were assigned %s instead.", requested, actual); 
```

如果您想在调用之前放置参数化字符串以格式化字符串，您可以执行如下所示的操作，尽管这不太清楚。

这些解决方案都不是天生可本地化的。如果您希望支持非英语语言环境，您可能需要考虑类似 .properties 文件。

```
private static final String warning = "You requested %s but were assigned %s instead.";

public void addWarning(Element E, String requested, String actual){
     e.setText(String.format(warning, requested, actual);
     //warning.reset() or something, I haven't sorted that out yet.
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-04T21:17:00.007

[格式化程序](http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html)可以为您执行此操作（还有一些附加功能，例如添加前导零间隔等等）

private static final String warning = "您请求了 %1$s，但被分配了 %2$s。";

```
public void addWarning(Element E, String requested, String actual){
     Formatter f = new Formatter();//you'll need to recreate it each time
     try{
         f.format(warning,requested,actual);
         e.setText(f.out().toString());
    }finally{f.close();}

} 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-04-04T21:05:38.053

好吧，如果您的 String 是`final`您确定以后无法修改它。我不知道您是否可以为这种事情找到更好的用例，就像您可以简单地做的那样：

```
public void addWarning(Element E, String requested, String actual){

     String warning = "You requested" + requested + " but were assigned " + actual + " instead."     
     e.setText(warning);
} 
```

# javascript - http://www.engadget.com/rss.xml 没有响应我的 XMLHttpRequest。控制台中没有错误代码

> ID：10019172
> 
> 赞同：0
> 
> 时间：2012-04-04T21:00:29.100
> 
> 标签：javascript, jquery, google-chrome, google-chrome-extension, xmlhttprequest

我正在尝试根据 lifehacker (http://lifehacker.com/5857721/how-to-build-a-chrome-extension) 的示例做一个 RSS 阅读器 chrome 扩展。在此基础上我做了我自己的。它没有用。我尝试了他们的源代码，它工作得非常好（对于 lifehacker），但是当我将 xml 源更改为[http://www.engadget.com/rss.xml](http://www.engadget.com/rss.xml)时，它只显示一个空方块。如果有人能指出任何错误或错误，我真的很感激。我的文件是：

清单.json

```
 {
  "name": "RSS Fetcher",
  "version": "0.1",

  "description": "engadget rss reader.",
  "homepage_url": "http://www.engadget.com/",
    "background_page": "background.html",
    "permissions": [
      "<all_urls>",
      "http://www.engadget.com/*"

],
    "browser_action": {
    "default_title": "engadget reader",      
    "default_popup": "popup.html"       
  }
} 
```

背景.html

```
 <html>
<head>
    <script src='scripts/jquery-1.6.1.min.js'></script>
    <script src="scripts/parse.js"></script>
    <script>

        function fetch_feed(url, callback) {
            var xhr = new XMLHttpRequest();
            xhr.onreadystatechange = function(data) {
              if (xhr.readyState == 4) {
                if (xhr.status == 200) {
                  var data = xhr.responseText;
                  callback(data);
                } else {
                  callback(null);
                }
              }
            }
            // Note that any URL fetched here must be matched by a permission in
            // the manifest.json file!
            xhr.open('GET', url, true);
            xhr.send();
        }   

        function onRequest(request, sender, callback) {
            if (request.action == 'fetch_feed') {
              fetch_feed(request.url, callback);
            }
        }

        // Wire up the listener.
        chrome.extension.onRequest.addListener(onRequest);      

    </script>
</head>
<body>
</body>
</html> 
```

popup.html

```
<html>
<head>
    <script src='scripts/jquery-1.6.1.min.js'></script>
    <script src="scripts/parse.js"></script>
    <script>

        function fetch_feed() {
            chrome.extension.sendRequest({'action' : 'fetch_feed', 'url' : 'http://www.engadget.com/rss.xml'}, 
                function(response) {
                    display_stories(response);
                }
            );
        }

        function display_stories(feed_data) {
            var xml_doc = $.parseXML(feed_data);
            $xml = $(xml_doc);
            var items = $xml.find("item");
            $('#popup').html('<img src="images/logo.png" id="logo" onclick="open_item(\'http://engadget.com/\'); window.close();" /><br clear="all" />');
            items.each(function(index, element) {
                var post = parse_post(element);
                var item = '';
                var class2 = '';
                if (index >= localStorage['unread_count']) {
                    // // console.log('visited');
                    item += '<div class="post read">';
                }
                else {
                    item += '<div class="post">'
                }
                item += '<span class="tag">' + post.tag + '</span>\
                            <a href="' + post.url + '">\
                                <div id="' + post.id + '" class="item" onclick="open_item(\'' + post.url + '\');">\
                                    <img src="' + post.img + '" width="107" height="60" />\
                                    <h4>' + post.title + '</h4>\
                                    <span class="description">' + post.description + '...</span>\
                                </div>\
                            </a>';
                item += '</div>';
                $('#popup').append(item);
            });
        }

    </script>
    <link rel="stylesheet" href="styles/post.css" type="text/css" />
</head>
<body>

    <div id="popup">

    </div>
    <script>
        $(document).ready(function() {
            fetch_feed();
        });
    </script>
</body>
</html> 
```

解析.js

```
function parse_post(element) {
    // console.log(element);
    var post = new Object();
    post.title = $(element).find("title").text();
    post.tag = post.title.split('[')[1].split(']')[0];
    post.title = post.title.split('[')[0];
    post.id = $(element).find("guid").text();
    post.url = $(element).find('link').text();
    post.description = $("<div/>").html($(element).find("description")).text();
    post.img = $('img', post.description)[0].src; //107x60px
    var shorten = 120;
    if (post.title.length > 80) {
        shorten = 70;
    }
    post.description = $.trim($(post.description).text());
    post.description = post.description.substr(0, shorten);
    // console.log(post);
    return post;
}

function open_item(url) {
    chrome.tabs.create({url: url});
    chrome.browserAction.setBadgeText({text:''});
} 
```

我还使用了 jquery-1.6.1.min.js 有什么帮助:) 提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T23:44:30.137

不确定“all_urls”在您的 manifest.json 中是否有效，请将其删除并试一试

# 32bit-64bit - 在 32 位操作系统上运行 64 位汇编代码

> ID：10019179
> 
> 赞同：2
> 
> 时间：2012-04-04T21:00:44.733
> 
> 标签：32bit-64bit

假设您有一个运行 32 位操作系统的 64 位处理器。是否可以在 32 位程序中运行一些 64 位汇编指令？如果你有一个支持 64 位的处理器，我不明白为什么不这样做，但在计算方面有很多小气的技术问题，尤其是操作系统。

注意我不是在谈论在 32 位操作系统上运行 64 位程序，只是使用嵌入在 32 位程序中的 64 位汇编指令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T18:02:18.587

您最需要知道的事情是确保您正确地进行处理器模式转换。您需要做一些基本的工作才能从 32 位模式过渡到 64 位模式（也称为长模式）。最大的问题是确保正确设置描述符表。更多信息在这里： http: [//www.codeproject.com/Articles/45788/The-Real-Protected-Long-mode-assembly-tutorial-for](http://www.codeproject.com/Articles/45788/The-Real-Protected-Long-mode-assembly-tutorial-for)

希望这可以帮助。

# java - 如何使按钮展开Java

> ID：10019181
> 
> 赞同：1
> 
> 时间：2012-04-04T21:00:52.610
> 
> 标签：java, swing, user-interface, applet, layout-manager

我正在尝试创建一个 Java Applet，我在 Java 网站上四处寻找，发现了一个我编辑的好例子。

在此示例中，有 3 个按钮，一个类似于页眉，一个类似于页脚，一个类似于正文。我的问题是，中间（主体）按钮不会完全展开。

如果你运行这段代码，你就会明白我的意思。

```
import java.awt.*;
import javax.swing.JButton;
import javax.swing.JFrame;

public class main {
    final static boolean shouldFill = true;
    final static boolean shouldWeightX = true;
    final static boolean RIGHT_TO_LEFT = false;

    public static void addComponentsToPane(Container pane) {
        if (RIGHT_TO_LEFT) {
            pane.setComponentOrientation(ComponentOrientation.RIGHT_TO_LEFT);
        }

        JButton button;
    pane.setLayout(new GridBagLayout());
    GridBagConstraints c = new GridBagConstraints();
    if (shouldFill) {
    //natural height, maximum width
    c.fill = GridBagConstraints.HORIZONTAL;
    }

    button = new JButton("hi");
    c.fill = GridBagConstraints.HORIZONTAL;
    c.weightx = 0.5;
    c.gridx = 1;
    c.gridy = 0;
    c.ipady = 40;
    pane.add(button, c);

    button = new JButton("Hello, i will not expand");
    c.fill = GridBagConstraints.BOTH;
    c.weighty = 1.0;   //request any extra vertical space
    c.weightx=1.0;
    c.anchor = GridBagConstraints.CENTER; //bottom of space
    c.insets = new Insets(10,0,0,0);  //top padding
    c.gridx = 1;       //aligned with button 2
    c.gridy = 1;       //third row
    pane.add(button, c);

    button = new JButton("fr");
    c.fill = GridBagConstraints.HORIZONTAL;
    c.ipady = 0;       //reset to default
    c.weighty = 1.0;   //request any extra vertical space
    c.anchor = GridBagConstraints.PAGE_END; //bottom of space
    c.insets = new Insets(10,0,0,0);  //top padding
    c.gridx = 1;       //aligned with button 2
    c.gridwidth = 2;   //2 columns wide
    c.gridy = 2;       //third row
    pane.add(button, c);
    }

    /**
     * Create the GUI and show it.  For thread safety,
     * this method should be invoked from the
     * event-dispatching thread.
     */
    private static void createAndShowGUI() {
        //Create and set up the window.
        JFrame frame = new JFrame("main");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        //Set up the content pane.
        addComponentsToPane(frame.getContentPane());

        //Display the window.
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        //Schedule a job for the event-dispatching thread:
        //creating and showing this application's GUI.
        javax.swing.SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

![在此处输入图像描述](../Images/af76e7052de8bc4305aebb4e125c2bff.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T21:27:10.013

看起来不是中间按钮的错，而是底部按钮没有展开，如果您将底部按钮设置为这样，`c.fill = GridBagConstraints.BOTH;`那么它会占用下面的空白空间。

你想让中间更大吗？您可能想将底部按钮的权重更改为 0.5 `c.weighty = .5; //request any extra vertical space`
，看看是否是您要找的？

如果您希望中间比顶部和底部大得多，您可能需要制作更多的网格空间，而不是 1,1,1，尝试 1,3,1 等

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T21:30:02.693

> 我在 Java 网站上环顾四周，发现了一个我编辑的很好的例子。

*所以我认为你*不必使用 GridBagLayout？

使用BorderLayout，在BorderLayout.CENTER 位置制作可展开按钮。

[http://docs.oracle.com/javase/tutorial/uiswing/layout/border.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/border.html)

# javascript - 更改 d3 SVG 画布的缩放级别？

> ID：10019184
> 
> 赞同：2
> 
> 时间：2012-04-04T21:01:21.460
> 
> 标签：javascript, zooming, scale, d3.js

我有[一个测试站点](https://tools.stamlab.org/interactome/)，我正在从我自己的数据中构建一个[基于 d3 的力导向网络图。](http://mbostock.github.com/d3/ex/force.html)

如果我选择大约五六个基因，我的图表中的节点开始被绘制到画布之外。

我需要调用 d3 API 的哪些部分来控制缩放级别，以便节点不会从画布边缘消失？

如果有的话，我肯定会感谢任何简要解释这个概念的代码片段，除非实现相当简单。谢谢你的建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T21:36:12.623

D3 允许使用缩放，而且很容易实现。您只需要将图形包装在我称之为“视口”的“g”元素中。然后您将分配给 svg 元素的缩放事件：

```
svg.call(d3.behavior.zoom().on("zoom", redraw)) 
```

以下功能：

```
function redraw() {
    d3.select("#viewport").attr("transform",
        "translate(" + d3.event.translate + ")"
        + " scale(" + d3.event.scale + ")");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-05T11:00:54.537

```
var x, y, k;
            if (d && centered !== d) {
                var centroid = path.centroid(d);
                x = centroid[0];
                y = centroid[1];
                k = 4;
                centered = d;
            } else {
                x = w / 2;
                y = h / 2;
                k = 1;
                centered = null;
            } 
```

在缩放函数中编写以下代码 svg.attr("transform", "translate(" + w / 2 + "," + h / 2 + ")scale(" + k + ")translate(" + -x + " ," + -y + ")");

对于绝对比例，您不能使用此代码，这将有助于地图缩放和平移

# mysql - MySQL 和并发更新显示同时连接中的用户没有断开连接

> ID：10019188
> 
> 赞同：1
> 
> 时间：2012-04-04T21:01:56.610
> 
> 标签：mysql, phpmyadmin, database-concurrency

我们有一个通过 phpmyadmin 管理的 MySQL 数据库。我的一位同事坚持认为，在所有同时连接都关闭之前，数据库不会解析对数据库的更新。我认为他是说如果我们有 20 个用户连接到同一个数据库并对其进行更新，那么所有 20 个用户都必须在更新完成之前断开连接。即，如果一个用户对表进行了更新，则其他用户在全部断开连接之前都无法看到它。是这样吗？

我环顾四周，找不到答案。[据我所知， MySQL 参考手册](http://dev.mysql.com/doc/refman/5.0/en/index.html)并没有真正说明，虽然这里有一些类似的问题，但我没有找到答案。我的同事说这是几乎所有 DB 和 DBMS 都存在的限制。我不认为这是真的，但我更关心的是知道真相而不是正确，如果我发现这是真的，我会很高兴地改变我的立场。

我们运行的phpmyadmin版本是2.11.11.3，MySQL的版本是5.0.77。

# visual-studio-2010 - Visual Studio 2010/Resharper 插件开发

> ID：10019193
> 
> 赞同：0
> 
> 时间：2012-04-04T21:02:26.977
> 
> 标签：visual-studio-2010, plugins, resharper, intellisense

我无法追踪有关扩展 Intellisense 的信息。看起来为 VS 2010 或 Resharper 创建一个插件就可以了。但是，我找不到任何将项目添加到智能感知下拉列表的文档。

这篇文章非常接近：[如何扩展 IntelliSense 项目？](https://stackoverflow.com/questions/9133887/how-to-extend-intellisense-items)

但是我找不到所使用的接口或类的任何文档。

我想要做的是从 XML 文件中读取，并将这些标签添加为结果的一部分，这些结果显示在 C# 代码中的智能感知中（而不是在 XML 中）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T06:41:56.383

R# 插件开发指南中有关代码完成（即 IntelliSense）的部分在我们的待办事项列表中，但尚未编写。完成后，它应该在[此处](http://confluence.jetbrains.net/display/ReSharper/ReSharper+6+Plugin+Development)可用。当我们正在努力解决这个问题时，请随时通过 jetbrains dot com 给我发送电子邮件 dn，我会尽力帮助您解决您可能遇到的任何问题。

# php - 无法弄清楚如何使用 foreach 循环关闭标签

> ID：10019198
> 
> 赞同：0
> 
> 时间：2012-04-04T21:02:42.797
> 
> 标签：php, arrays, codeigniter, recursion, foreach

我正在通过数据库构建类别管理器。下面的 PHP 生成了我将在下面粘贴的代码：

```
function generate_menu($parent, $menu_array, $result = NULL)
{
    $has_childs = FALSE;

    foreach($menu_array as $key => $value):
        if ($value['parent'] == $parent):
            $result .= '<li id="list_'.$value['id'].'" class="item">';
            $result .= '<div class="item">' . $value['name'] . '</div>';

            if ($has_childs):
                $has_childs = FALSE;
                $result .= '<ol>';
            else:
                $has_childs = TRUE;
                $result .= '</li>';
            endif; 

            $result .= $this->generate_menu($key, $menu_array);
        endif;
    endforeach;

    return $result;
} 
```

这是它生成的 HTML：

```
<li id="list_11" class="item">
    <div class="item">Real Estate</div>
</li>
<li id="list_12" class="item">
    <div class="item">Home Improvements</div>
    <ol>
        <li id="list_13" class="item">
            <div class="item">Interior</div>
        </li>
        <li id="list_14" class="item">
            <div class="item">Exterior</div>
            <ol>
                <li id="list_15" class="item">
                    <div class="item">Exterior Subcat</div>
                </li> 
```

因此，当它是父项时，我可以关闭`<li>`标签，但如果它是具有父项的项目，则 an`<ol>`进入等式。那时我不知道如何关闭它们。我不确定在哪里放置`</li>`and `</ol>`。我尝试过的一切都行不通。

这是它的*外观*：

```
<li id="list_11" class="item">
    <div class="item">Real Estate</div>
</li>
<li id="list_12" class="item">
    <div class="item">Home Improvements</div>
    <ol>
        <li id="list_13" class="item">
            <div class="item">Interior</div>
        </li>
        <li id="list_14" class="item">
            <div class="item">Exterior</div>
            <ol>
                <li id="list_15" class="item">
                    <div class="item">Exterior Subcat</div>
                </li>
            </ol>
        </li>
    </ol>
</li> 
```

**编辑：**

这是传递数组和生成菜单的代码：

```
$query = $this->db->get('categories');

foreach($query->result_array() as $row):
    $menu_array[$row['id']] = array('name' => $row['name'], 'parent' => $row['parent'], 'id' => $row['id']);
endforeach;

echo '<ol class="sortable">';
echo $this->tasks->generate_menu(0, $menu_array);
echo '</ol>'; 
```

这是 $menu_array 的 print_r：

```
Array
(
    [11] => Array
        (
            [name] => Real Estate
            [parent] => 
            [id] => 11
        )

    [12] => Array
        (
            [name] => Home Improvements
            [parent] => 
            [id] => 12
        )

    [13] => Array
        (
            [name] => Interior
            [parent] => 12
            [id] => 13
        )

    [14] => Array
        (
            [name] => Exterior
            [parent] => 12
            [id] => 14
        )

    [15] => Array
        (
            [name] => Exterior Subcat
            [parent] => 
            [id] => 15
        )

) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T22:49:22.997

我已经弄清楚了这一点。我把事情复杂化了一点。

```
function generate_menu($parent, $menu_array, $result = NULL)
{       
    foreach($menu_array as $key => $value):
        if ($value['parent'] == $parent):
            $result .= '<li id="list_'.$value['id'].'" class="item">';
            $result .= '<div class="item">' . $value['name'] . '</div>';
            $result .= '<ol>';
            $result .= $this->generate_menu($key, $menu_array);
            $result .= '</li></ol>';
        endif;
    endforeach;

    return $result;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T23:10:24.680

为了正确使用递归函数，值数组需要像这样反映层次结构：

```
array(
[11] => "Real Estate",
[12] => array(
    [0] => "Home Improvements",
    [13] => "Interior",
    [14] => "Exterior"
    ),
[15] => "Exterior Subcat"
) 
```

该函数现在可以遍历 11，正常添加一个列表项。在 12 时，它会遇到一个数组而不是字符串（使用`gettype($value)`），因此它不会添加一个列表项，而是会再次调用自身 - 将它刚刚找到的数组作为参数传递。这在理论上允许无限数量的级别。

```
function make_menu($menu_array) {

    $result = "<ol>";

    foreach($menu_array as $k=>$v)
    {
        $result .= '<li id="list_'.$k.'" class="item">';

        if(gettype($v) == 'array')
        {
            $result .= '<div class="item">' . $v[0] . '</div>';
            unset($v[0]);
            $result .= make_menu($v);
        }
        elseif(gettype($v) == 'string')
        {
            $result .= '<div class="item">' . $v . '</div>';
        }

        $result .= '</li>';
    }
    $result .= "</ol>";
    return $result;
} 
```

# c# - 如何在从 Cache 而不是 Session 填充的网格上保留已检查的行？

> ID：10019201
> 
> 赞同：0
> 
> 时间：2012-04-04T21:02:57.570
> 
> 标签：c#, asp.net, .net, asp.net-mvc, session

我得到大量数据以填充到客户端的 jqGrid 中。

```
List<MyData> lotsOfRecords = getData(); 
```

然后我将其存储在缓存中，因为很多人会使用它：

```
Cache["SharedData"].Add(lotsOfRecords); 
```

此网格允许用户检查记录以进行处理。我想保留作为用户排序、过滤器、页面等检查的记录。

我的第一个想法是为对象添加一个属性`bool Selected { get; set; }`，`MyData`并在有人检查字段时切换它。显然，这是行不通的，因为这是一个共享缓存。我不想让 Joe User 检查 Bill User 不想检查的东西。

下一个想法是存储一个`Dictionary<int, bool>`会话中，它将记录的 id 映射到检查状态。这还不错，但由于没有简单的方法在 .NET 中组合对象，我看不到一个干净的方法可以在没有笨重的匿名对象的情况下将其发送到我的网格：

```
return lotsOfRecords.Select(record => {
     record.Id,
     record.Name,
     ...
     myDictionary[record.Id] // true/false for checked
}; 
```

那将是一个解决方案，但考虑到我的对象中有很多字段并在几页中以类似的方式使用它，我希望有一个更简洁的设计模式。欢迎任何建议。提前致谢！

顺便说一句，我当前的环境是带有 jQ​​uery/UI 和 jqGrid 的 ASP.NET MVC 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:29:23.603

我不确定您为什么认为“组合”对象很困难。你可以简单地这样做：

```
public class SelectableDataObject
{

   public SelectableDataObject(MyDataObject obj)
   {
      this.DataObject = obj;
   }

   public MyDataObject DataObject { get; private set; }
   public bool Selected {get;set;}

} 
```

然后你可以这样做：

```
return lotsOfRecords.Select(record => {
     return new SelectableDataObject(record){Selected = myDictionary.ContainsKey(record.Id)}
}; 
```

或者，在您的视图模型中，您可以将对象列表和字典作为两个单独的属性，当您在视图中迭代对象列表以填充网格时，您可以检查字典是否存在 Id 并选中/取消选中基于此。这种方式有点笨拙，但应该可以。

无论哪种方式，我认为您的字典想法非常好，我唯一不同的是只存储所选ID的ID，这样您就只为每个用户存储一个子集。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T21:54:57.550

您可能正在缓存列表，但选择需要特定于用户。我建议每次回发页面时都构建一个选定索引的列表，并存储列表会话。

这是我们用来在用户浏览结果时记住选择的函数：

```
/// <summary>
/// Iterates through items in the grid and updates the selected vendor 
/// list with any selections or deselections on the current page
/// </summary>
private void UpdateSelectedItems()
{
    var selectedVendors = new List<int>();

    foreach (GridItem Item in grdVendors.Items)
    {
        if (Item is GridDataItem)
        {
            int VendorID = (int)((GridDataItem)Item).GetDataKeyValue("SupplierID");
            if (Item.Selected)
            {
                if (!selectedVendors.Contains(VendorID))
                    selectedVendors.Add(VendorID);
                continue;
            }

            selectedVendors.Remove(VendorID);
        }
    }            
} 
```

# c# - ASP.NET MVC 3 在 cshtml 文件中使用 C# 代码

> ID：10019202
> 
> 赞同：0
> 
> 时间：2012-04-04T21:03:01.640
> 
> 标签：c#, asp.net-mvc-3, razor

我对 ASP.NET MVC3 有点陌生。我在 cshtml 文件中有这段代码

```
 @grid.GetHtml(
        htmlAttributes: new { id = "grid" },
        tableStyle: "grid",
        headerStyle: "header",
        rowStyle: "row",
        footerStyle: "footer",
        alternatingRowStyle: "altRow",
        columns: grid.Columns(
            grid.Column(header: "", format: @<text><input name="Checked" type="checkbox" value="@item.Key" /></text>, style: "CheckboxColumn", canSort: true),
            grid.Column("Name", "Name"),
            grid.Column("Address", "Address"),
            grid.Column("City", "City"),
            grid.Column("PhoneNumber", "Phone Number"),
            grid.Column("", format: (item) =>
            {

                if (item.ID.Length > 0)
                {
                    //CODE GOES HERE
                    return Html.Raw(string.Format("<text><img src=\"{0}\" alt=\"Image\" class=\"ToolTip\" title=\"ID # {1} <br> \" /></text>", Url.Content("~/images/coupled.png"), @item.ID.ToString()));
                }
                else
                {
                    return Html.Raw("<text></text>");
                }
            }),
        )) 
```

我想要的是在该`//CODE GOES HERE`部分编写一个 C# 代码。为了更改`Url.Content("~/images/coupled.png")` 项目 ID 的附加信息。

所以基本上我想要类似的东西：

```
string URLOfPic;
if(item.ID > 1000)
{
    URLOfPic="~/images/aaa.png
}
else
{
    URLOfPic="~/images/bbb.png
} 
```

最后使用`Url.Content(URLOfPic)`

那么如何在页面中使用该 C# 代码呢？

我希望我很清楚。非常感谢您的帮助

PS：我希望它是 C# 代码，而不是 javascript 或其他任何东西。在普通的 ASP.NET 中，我可以使用后面的代码来完成它。但在 MVC3 中我不知道如何

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:31:17.760

作为 Asp.net mvc 的新手，让我给你一些建议，**不要那样做！** 您应该在视图中拥有的大多数代码是 for 循环，所有这些逻辑都应该在操作中完成。

基本上获取您的数据并在操作中执行所有逻辑和格式化并将其添加到视图模型，然后将其传递给视图。否则，您将创建非常脆弱的代码块，直到运行时才会出错

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T17:06:26.887

修改您的项目类以添加图像类。在图片类中可以添加Image.URL、Image.Title。通过这种方式，您可以在控制器中根据其 ID 为项目分配图像。这也将允许您更轻松地在单个代码点修改图像 URL，而不是在您使用此逻辑的每个视图中进行修改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T21:08:17.893

我想你很接近，这没有用吗？

```
if (item.ID.Length > 0)
{
    string URLOfPic; 
    if(item.ID > 1000) 
    {     
        URLOfPic="~/images/aaa.png";
    } else {     
        URLOfPic="~/images/bbb.png";
    }
    return Html.Raw(string.Format("<text><img src=\"{0}\" alt=\"Image\" class=\"ToolTip\" title=\"ID # {1} <br> \" /></text>", Url.Content(URLOfPic), @item.ID.ToString()));                 
} 
```

# python - 生成一个重新映射的 numpy 数组作为视图。

> ID：10019208
> 
> 赞同：4
> 
> 时间：2012-04-04T21:03:44.887
> 
> 标签：python, numpy

我的问题的玩具箱：

我有一个大小为 1000 的 numpy 数组：

```
import numpy as np
a = np.arange(1000) 
```

我还有一个“投影数组” **p它是从****a**到另一个数组**b**的映射：

```
p = np.random.randint(0,1000,(1000,1000)) 
```

使用“花式索引”很容易从**a中得到****b ：**

 **```
b = a[p] 
```

但是**b**不是一个视图，正如之前的几个问题/答案和 numpy 文档所指出的那样。

不幸的是，在我的情况下，只有在长时间模拟过程中发生变化**的值以及在每次迭代中使用花哨的索引来获得****b**变得非常昂贵。我只从**b**读取而不修改它。

我知道（还）不可能用花哨的索引来解决这个问题。

我想知道是否有人有类似的问题/瓶颈并想出了其他解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T21:27:27.497

你的要求是不切实际的，这就是为什么 numpy 的人没有实现它。你可以自己做这样的事情：

```
class FancyView(object):
    def __init__(self, array, index):
        self._array = array
        self._index = index.copy()
    def __array__(self):
        return self._array[self._index]
    def __getitem__(self, index):
        return self._array[self._index[index]]

b = FancyView(a, p) 
```

但请注意，`a[p]`每次`b`用作数组时都会调用昂贵的操作。没有其他修行方法可以形成这种“观点”。Numpy 可以使用视图进行基本切片，因为它可以操纵步幅，但是没有办法使用步幅来做这样的事情。

如果您只需要其中的一部分，`b`则可以通过索引花哨的视图而不是将其用作数组来节省一些时间。**

# html - CSS布局根据图像宽度在行上分配图像？

> ID：10019215
> 
> 赞同：1
> 
> 时间：2012-04-04T21:04:10.877
> 
> 标签：html, css

我有一个 div 列表，每个 div 里面都有一个图像。在加载页面之前，图像的宽度是未知的。我有一个宽度为 960px 的容器 div。如何将图像排列成行，每行具有行宽允许的尽可能多的图像？因此，例如，如果我有 4 个图像（300px、400px、200px、250px），我需要将前 3 个图像放在一行中，将第 4 个图像放在第二行，因为将所有 4 个图像放在一行中会得到宽度大于 960。并且在每一行上，图像应该居中。

我已经尝试了所有我能想到的使用 css 的方法，但没有找到一种可行的方法。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T21:15:00.440

像这样的[东西](http://jsfiddle.net/J6ASS/)？

好的，我只使用了 div，因为我不想搜索图像，但主要观点是：需要对齐和拟合的元素，制作它们`inline-block`。内联变成多行，框可以设置宽度和高度。之后，您只需要在父级上设置：`text-align: center`

**编辑** Oups，我在 div 之间放置了空格（如真实空格字符），它们显示为 div 之间的空格，因为它们是内联的。确保不要在容器之间放置任何空格，例如[THIS](http://jsfiddle.net/J6ASS/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T21:25:14.530

如果你丢失了容器，你甚至不需要使用`inline-block`.

[http://jsfiddle.net/bryandowning/ghcmM/](http://jsfiddle.net/bryandowning/ghcmM/)

但是，由于这是一个图像列表，您可能应该在无序列表`inline-block`的元素上使用。`li`

# python - 在 Google App Engine 中异步读取 URL

> ID：10019217
> 
> 赞同：0
> 
> 时间：2012-04-04T21:04:17.707
> 
> 标签：python, http, google-app-engine, sockets, concurrency

假设我在 Google App Engine 中有以下代码：

```
from urllib import urlopen
...
data1 = urlopen(url2).read()
data2 = urlopen(url2).read()
... 
```

为了改善延迟，我想异步运行这两个对外部 URL 的请求。我怎样才能做到这一点？我知道如何使用线程池在普通 Python 中执行此操作，但 Google App Engine 似乎不支持多线程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T21:14:31.153

你读过文档吗？[https://developers.google.com/appengine/docs/python/urlfetch/asynchronousrequests](https://developers.google.com/appengine/docs/python/urlfetch/asynchronousrequests)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T21:22:09.263

你应该使用 ndb tasklet。

[https://developers.google.com/appengine/docs/python/ndb/async#urlfetch](https://developers.google.com/appengine/docs/python/ndb/async#urlfetch)

# php - 我将如何通过 AJAX .post() 传递各种类型的数据？

> ID：10019219
> 
> 赞同：0
> 
> 时间：2012-04-04T21:04:24.203
> 
> 标签：php, jquery, ajax, post

我正在尝试将多个数据传递到 AJAX .post() 中。这是我到目前为止所做的：

```
$('form#tutorTableForm').live('submit', function()
{
    var cid = $('#courseSelect').val();
    var lid = $('#lessonSelect').val();
    var lessonCount = $('#lessonSelect option:selected').attr('id');
    $.post('', $(this).serialize(), function(response){
        alert(response);

    });
    return false;    
}); 
```

我也想传入 cid 和 lid 。我该怎么做？

我正在使用 live 而不是 on，因为我们的应用程序使用的是旧版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:08:41.953

我想您可以创建一个包含所有数据的对象，如下所示：

```
var cid = $('#courseSelect').val();
var lid = $('#lessonSelect').val();
var lessonCount = $('#lessonSelect option:selected').attr('id');

var postdata = { 
          formdata: $(this).serialize(), 
          cid: cid, 
          lid: lid 
        };

$.post('', postdata, function(response){ alert(response); }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T22:12:45.300

将它们作为输入隐藏或其他任何内容放置在表单中，并且序列化应该自动添加它们。如果没有看到您的 html，很难确切地看到您需要什么。

# android - Get a single field from multi-column ListView using SimpleAdapter

> ID：10019221
> 
> 赞同：0
> 
> 时间：2012-04-04T21:04:26.617
> 
> 标签：android, listview, arraylist, listactivity, simpleadapter

I have a ListActivity in which i have used a SimpleAdapter to create a list which has 2 fields. The pair of values are stored using a Map, and the list is an ArrayList. I have an onItemClickListener for this. On selecting a list entry, i get the pair i.e. the 2 values. I need to get only 1 of those values.

For example, if the list item is "John", "123" . I want to store "123" in a string after selecting the entry from the list Any help?

Here's the code snippet:

```
 ListView lv = getListView();
        ArrayList<Map<String, String>> list = new ArrayList<Map<String, String>>();

        list.add(putData(scanned_name, scanned_addr));

        String[] from = { "name", "address" };
        int[] to = { android.R.id.text1, android.R.id.text2 };

        SimpleAdapter adapter = new SimpleAdapter(getApplicationContext(), list,
                android.R.layout.simple_list_item_2, from, to);
        setListAdapter(adapter);

        lv.setOnItemClickListener(new OnItemClickListener() {
            public void onItemClick(AdapterView<?> parent, View view,int position, long id) { 

                Toast.makeText(getApplicationContext(),
                        parent.getItemAtPosition(position).toString(), Toast.LENGTH_SHORT).show();
            }

        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:46:34.820

You have to catch the content of `android.R.id.text1` or `android.R.id.text2`. So, in your `onItemClick(...)` you have to do:

> TextView v = (TextView)findViewById(R.id.text1);
> TextView v1 = (TextView)findViewById(R.id.text2);
> String content1=v.getText().toString();
> String content2=v2.getText().toString();

and you can manage them as you want, even within a Toast:

> Toast.makeText(getApplicationContext(),v.getText().toString(),Toast.LENGTH_LONG).show();

# iphone - UIButton 图像未更改/更新

> ID：10019226
> 
> 赞同：3
> 
> 时间：2012-04-04T21:05:16.587
> 
> 标签：iphone, objective-c, ios5

首先，我对 Objective-c 还是很陌生，并且仍在尝试尽可能多地学习，所以请多多包涵。

现在我有一个以编程方式创建的 UIButton。当按下按钮时，会弹出一个 UIActionSheet，其中包含“相机”、“选择照片”或“取消”选项。然后假设按钮图像更改为拍摄的图像（如果选择了相机）或选择的图像（如果选择了相机胶卷）。

我的问题是 UIImagePicker 关闭后按钮的图像没有改变。起初，按钮被创建为 tableView 的子视图，当我滚动 tableView 时，它刷新了按钮并且图像发生了变化（这当然不是我希望它的行为方式）。但是，如果用户决定要更改或删除图像，他们只需再次按下按钮，UIActionSheet 就会显示第三个选项“删除照片”。滚动 tableView 后，我意识到按钮图像根本没有改变，而是在旧按钮之上创建了一个新按钮，因此我将 UIButton 代码移至 viewDidLoad（基于在 stackoverflow 上找到的一些信息）。我还删除了 tableView 滚动的能力，因为我不需要滚动它。

几天来我一直在尝试解决这个问题，如何在 UIImagePicker 被解除或 UIActionSheet 被解除后正确刷新按钮或视图。我曾尝试使用 setNeedsLayout 和 setNeedsDisplay 但这些都无法解决我的问题（我可能将它们放在错误的位置）。希望有人对此有所了解，并可以指导我以正确的方式完成这项工作。还提供了我的代码：

```
- (void)viewDidLoad {
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    // Creates camera button and connects to camera menu UIActionSheet
    UIButton *cameraButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [cameraButton addTarget:self action:@selector(showActionSheet:) forControlEvents:UIControlEventTouchUpInside];
    cameraButton.titleLabel.lineBreakMode = UILineBreakModeWordWrap;
    cameraButton.titleLabel.textAlignment = UITextAlignmentCenter;
    cameraButton.frame = CGRectMake(9, 230, 80, 80);
    [self.view addSubview:cameraButton];

    picturePresent = NO;
    NSLog(@"picturePresent = %@", picturePresent);
}

-(void)showActionSheet:(id)sender {
    if (picturePresent == NO) {
    UIActionSheet *cameraMenuSheet = [[UIActionSheet alloc] initWithTitle:@"Add Photo" 
                                                                 delegate:self 
                                                        cancelButtonTitle:@"Cancel" 
                                                   destructiveButtonTitle:nil 
                                                        otherButtonTitles:@"Camera", @"Choose Photo", nil];
    [cameraMenuSheet showFromTabBar:self.tabBarController.tabBar];
    }
    else if (picturePresent == YES) {
    UIActionSheet *cameraMenuSheet = [[UIActionSheet alloc] initWithTitle:@"Add Photo" 
                                                                 delegate:self 
                                                        cancelButtonTitle:@"Cancel" 
                                                   destructiveButtonTitle:nil 
                                                        otherButtonTitles:@"Remove Photo", @"Camera", @"Choose Photo", nil];
    [cameraMenuSheet showFromTabBar:self.tabBarController.tabBar];
    }
}

- (void)actionSheet:(UIActionSheet *)actionSheet clickedButtonAtIndex:(NSInteger)buttonIndex {
    NSString *title = [actionSheet buttonTitleAtIndex:buttonIndex];

    // Initialize UIImagePickerController
    if ([title isEqualToString:@"Camera"]) {
        // Camera
        UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
        imagePicker.sourceType = UIImagePickerControllerSourceTypeCamera;
        imagePicker.delegate = self;
        imagePicker.allowsEditing = NO;
        imagePicker.showsCameraControls = YES;
        imagePicker.mediaTypes = [NSArray arrayWithObjects:(NSString *)kUTTypeImage, nil];

        [self presentModalViewController:imagePicker animated:YES];
        newMedia = YES;
    }
    else if ([title isEqualToString:@"Choose Photo"]) {
        // Photo library
        UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];
        imagePicker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum;
        imagePicker.delegate = self;
        imagePicker.allowsEditing = NO;
        imagePicker.mediaTypes = [NSArray arrayWithObjects:(NSString *)kUTTypeImage, nil];
        [self presentModalViewController:imagePicker animated:YES];
        newMedia = NO;
    }
    else if ([title isEqualToString:@"Remove Photo"]) {
    picturePresent = NO;

    }
}

- (void)actionSheet:(UIActionSheet *)actionSheet didDismissWithButtonIndex:(NSInteger)buttonIndex {
    [self.view setNeedsDisplay];
    }

// Method for saving image to photo album
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
    NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];

    if ([mediaType isEqualToString:(NSString *)kUTTypeImage]) {

    // Access the uncropped image from info dictionary
    UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];

    UIImage *scaledImage = [image scaleToSize:CGSizeMake(80.0, 80.0)];

        if (newMedia == YES) {
        // Save image
        UIImageWriteToSavedPhotosAlbum(image, self, @selector(image:didFinishSavingWithError:contextInfo:), nil);

        }

        resizedImage = scaledImage;
    }

    picturePresent = YES;
    [self dismissModalViewControllerAnimated:NO];
}

-(void)imagePickerControllerDidCancel:(UIImagePickerController *)picker {
    [self dismissModalViewControllerAnimated:YES];
} 
```

此外，现在我已将 UIButton 编码移至 viewDidLoad，我不确定将这段编码放在哪里：

```
{
    if (picturePresent == NO) {

        [cameraButton setTitle:@"Add\nPhoto" forState:UIControlStateNormal];
    }

    else if (picturePresent == YES) {

        [cameraButton setImage:resizedImage forState:UIControlStateNormal];
    }
} 
```

还使用了 setImage 和 setBackgroundImage ，但仍然无法按照我想要的方式工作。如果需要更多信息，请告诉我，谢谢！

编辑：

以下是一些屏幕截图，以显示我的目标 -

![屏幕1](../Images/70c40a571610987a723383d423056a07.png)

![屏幕2](../Images/85a8b642d4f4be0a12535166997b2574.png)

![屏幕3](../Images/43a7adbfb631eb9deb0568ceb5b2e54c.png)

假设“图片”代表拍摄或选择的图片，然后缩放以适合按钮大小。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:10:24.650

将`viewDidLoad`代码移至`imagePickerController:didFinishPickingMediaWithInfo:`. 此外，如果您可以发布一些屏幕截图，它将有助于准确解释正在发生的事情以及您的期望。这可能是一个裁剪问题，这就是我建议发布屏幕截图的原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T21:27:58.260

没有测试它，但如果你让你的`cameraButton`成员成为你的成员，`UiViewController`以便你可以在需要时访问，你可以在计算 -`setImage: forState:`后调用正确的`resizedImage`- 不需要`picturePresent`bool。我认为`setNeedsDisplay`也不需要。

编辑：

在您的视图控制器头文件中执行类似的操作

```
...
@interface MyViewController : UIViewController
{
   ...
   UIButton * cameraButton;
   ...
}
... 
```

在您的实现文件中的某处（viewDidiLoad 可以）执行以下操作：

```
...
cameraButton = [UIButton buttonWithType:UIButtonTypeCustom];
...    
[self.view addSubview:cameraButton];
... 
```

然后实现你所做的所有其他事情并`didFinishPickingMediaWithInfo`像这样更改代码：

```
 - (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info 
{

   ...
  [cameraButton  scaledImage forState:UIControlStateNormal];
} 
```

正如我所说，没有测试它，但我认为它应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-31T00:13:18.807

很长一段时间我一直在寻找答案..现在这里有一些：

要更改按钮的图像，下面的代码帮助了我：

```
[button.imageView setHighlighted:YES];
[button.imageView setHighlightedImage:[UIImage imageNamed:@"mypic.png"]];
[button.imageView setImage:[UIImage imageNamed:@"mypic.png"]]; 
```

..例如在 viewDidLoad 中。

希望有帮助...

# javascript - 成功后的递归 Ajax

> ID：10019227
> 
> 赞同：2
> 
> 时间：2012-04-04T21:05:21.223
> 
> 标签：javascript, ajax, extjs

我试图在每个请求返回的每个成功响应上递归地发出 ajax 请求我是否容易出现堆栈溢出？如果是这样，您有更好的方法吗？我的要求是最初执行一个 ajax 请求，如果返回的 json 没有完成，则执行另一个具有相同参数的 ajax 请求......等等，直到我得到一个完成标志。

```
go: function (r) {
    Ext.Ajax.request({
        url: 'bleh',
        success: function (response) {
            var data = Ext.decode(response.responseText); // decode json into object
            r.update();
            if (!data.isDone) go(r);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T21:11:59.553

这实际上不是递归，因此没有堆栈溢出的危险。它可能看起来像递归，但是因为 ajax 调用是异步的，所以您的`go()`函数只启动 ajax 调用，然后在`go()`ajax 调用正在进行时函数立即结束。因此，成功处理程序在`go()`函数完成后很长时间才被调用。所以，它实际上不是递归，也没有堆栈堆积。

从代码的视觉效果来看，它可能看起来像是递归，但因为 ajax 调用是异步的，并且成功处理程序是在`go()`函数返回后很长时间才调用的，所以没有堆栈堆积。

# c++ - The future of C++ alignment: passing by value?

> ID：10019228
> 
> 赞同：19
> 
> 时间：2012-04-04T21:05:30.377
> 
> 标签：c++, c++11, memory-alignment, eigen

Reading the Eigen library documentation, I noticed that [some objects cannot be passed by value](http://eigen.tuxfamily.org/dox/TopicPassingByValue.html). Are there any developments in C++11 or planned developments that will make it safe to pass such objects by value?

Also, why is there no problem with returning such objects by value?

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-04T21:22:16.243

It is entirely possible that Eigen is just a terribly written library (or just poorly-thought out); just because something is online doesn't make it true. For example:

> Passing objects by value is almost always a very bad idea in C++, as this means useless copies, and one should pass them by reference instead.

This is not good advice *in general*, depending on the object. It is sometimes necessary pre-C++11 (because you might want an object to be uncopyable), but in C++11, it is *never* necessary. You might still do it, but it is never *necessary* to always pass a value by reference. You can just move it by value if it contains allocated memory or something. Obviously, if it's a "look-but-don't-touch" sort of thing, `const&` is fine.

Simple struct objects, presumably like Eigen's `Vector2d` are probably cheap enough to copy (especially in x86-64, where pointers are 64-bits) that the copy won't mean much in terms of performance. At the same time, it *is* overhead (theoretically), so if you're in performance critical code, it may help.

Then again, it may not.

The particular crash issue that Eigen seems to be talking about has to do with alignment of objects. However, most C++03 compiler-specific alignment support guarantees that alignment in all cases. So there's no reason that should "make your program crash!". I've never seen an SSE/AltaVec/etc-based library that used compiler-specific alignment declarations that caused crashes with value parameters. And I've used quite a few.

So if they're having some kind of crash problem with this, then I would consider Eigen to be of... dubious merit. Not without further investigation.

Also, if an object is unsafe to pass by value, as the Eigen docs suggest, then the proper way to handle this would be to make the object non-copy-constructable. Copy assignment would be fine, since it requires an already existing object. However, Eigen doesn't do this, which again suggests that the developers missed some of the finer points of API design.

However, for the record, C++11 has the `alignas` keyword, which is a standard way to declare that an object shall be of a certain alignment.

> Also, why is there no problem with returning such objects by value?

Who says that there isn't (noting the copying problem, not the alignment problem)? The difference is that you can't return a temporary value by reference. So they're not doing it because it's not possible.

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-04-04T21:23:38.477

They could do this in C++11:

```
class alignas(16) Matrix4f
{
    // ...
}; 
```

Now the class will always be aligned on a 16-byte boundary.

Also, maybe I'm being silly but this shouldn't be an issue anyway. Given a class like this:

```
class Matrix4f
{
public:
    // ...
private:
    // their data type (aligned however they decided in that library):
    aligned_data_type data;

    // or in C++11
    alignas(16) float data[16];
}; 
```

Compilers are now obligated to allocate a `Matrix4f` on a 16-byte boundary anyway, because that would break it; the class-level `alignas` should be redundant. But I've been known to be wrong in the past, somehow.

# asp.net - 比较和对比 ASP.NET Web 窗体和 ASP.NET MVC 中的 HTTP 到 HTML 的旅程

> ID：10019234
> 
> 赞同：1
> 
> 时间：2012-04-04T21:05:55.807
> 
> 标签：asp.net, asp.net-mvc, compare, lifecycle, contrast

我试图理解从用户从浏览器发出请求到为 ASP.NET Web 窗体和 ASP.NET MVC 呈现点响应的完整周期。

**更新：**

具体来说，ASP.NET MVC 中不存在Page **LifeCycle*****的概念。***

 **如果答案从这个角度比较这两种技术，那就太好了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:12:31.407

在问答论坛网站上提出一个简单的问题实在是太难了。根据网站的指南，它非常接近“不是真正的问题”的定义：

> 很难说出这里问的是什么。这个问题模棱两可、含糊不清、不完整、过于宽泛或修辞，无法以目前的形式得到合理的回答

在大多数意义上，这***是***一个真正的问题，也是一个很好的问题，但对于一个简单的答案来说它过于宽泛。

但是，本着努力提供帮助的精神，这里有一些可能会有所帮助的链接：

[ASP.NET 的工作原理](http://www.west-wind.com/presentations/howaspnetworks/howaspnetworks.asp)

[ASP.NET 页面生命周期](http://msdn.microsoft.com/en-us/library/ms178472.aspx)

[ASP.NET MVC 的工作原理](http://howmvcworks.net/GettingStarted/)

[Web 服务器的工作原理](http://www.howstuffworks.com/web-server.htm)

就个人而言，我喜欢在 ASP.NET 和 .NET 总体上是“新事物”时在旧书中出现的解释。他们每个人都很好地解释了静态 HTML 和“动态”技术（如[CGI](http://computer.howstuffworks.com/cgi.htm)、经典 ASP、JSP）之间的区别，然后介绍了 ASP.NET 的工作原理。 [从 Wrox开始使用 C# 开始 ASP.NET 1.0](http://www.wrox.com/WileyCDA/WroxTitle/Beginning-ASP-NET-1-0-with-C-.productCd-0764543709,descCd-tableOfContents.html)是我阅读的第一本关于该主题的书。**

# matlab - || Matlab中的用法

> ID：10019236
> 
> 赞同：0
> 
> 时间：2012-04-04T21:06:03.090
> 
> 标签：matlab

我正在写一个简单的 IF 条件。作用是判断矩阵的每一行是否为一定的向量。代码如下：

```
 if (compareM(i,:)==[1, 0])||(compareM(i,:) ==[2, 1])
      match_1 = match_1 +1;
  else
      mismatch_1 = mismatch_1 +1;
  end 
```

错误说 ''|| 的操作数 和 && 运算符必须可转换为逻辑标量值''。

compareM 是一个 2 矩阵，我想知道错误是否是由 || 造成的 手术。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:11:50.653

`compareM(i, :)`计算结果为 1x2 数值数组，因此`compareM(i,:)==[1, 0]`计算结果为 1x2 逻辑数组。`||`符号右侧的表达式也是如此。但是您需要在 的每一侧都有一个逻辑值`||`，而不是 1x2 的逻辑值数组。

如果您希望此表达式在 lhs 上的两个值`==`与 rhs 上的相应元素相同的情况下计算为真，请环绕`all()`每一侧：

```
all(compareM(i,:)==[1, 0]) || all(compareM(i,:) ==[2, 1]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T21:15:01.940

如果要比较向量而不是标量值，则必须使用`|`运算符。结果，您得到逐元素成对比较的逻辑向量。要在 IF 语句中使用它，您必须将每个逻辑语句（然后使用`||`）或`|`ALL、ANY 或其他函数的结果转换为标量。

如果要比较向量是否相等，请使用 ISEQUAL 函数

```
if isequal(compareM(i,:)==[1, 0]) || isequal(compareM(i,:)==[2, 1]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T21:09:06.010

```
if ((compareM(i,:)==[1, 0])||(compareM(i,:) ==[2, 1]))
    match_1 = match_1 +1;
else
    mismatch_1 = mismatch_1 +1;
end 
```

注意外面的括号。

# perl - 你如何建立一个面向对象的 jsonrpc Mojolicious 应用程序？

> ID：10019238
> 
> 赞同：3
> 
> 时间：2012-04-04T21:06:18.723
> 
> 标签：perl, mojolicious

我正在尝试使用 Mojo 设置一个 jsonrpc 应用程序。我使用 REST 构建了一些控制器和相关模块，但后来决定我需要使用 JSONRPC。

[使用来自http://metacpan.org/pod/Mojolicious::Plugin::JsonRpcDispatcher](http://metacpan.org/pod/Mojolicious%3a%3aPlugin%3a%3aJsonRpcDispatcher)的以下代码

```
# lib/your-application.pm

use base 'Mojolicious';
use MojoX::JSON::RPC::Service;

sub startup {
    my $self = shift;
    my $svc = MojoX::JSON::RPC::Service->new;

    $svc->register(
        'sum',
        sub {
            my @params = @_;
            my $sum = 0;
            $sum += $_ for @params;
            return $sum;
        }
    );

    $self->plugin(
        'json_rpc_dispatcher',
        services => {
           '/jsonrpc' => $svc
        }
    ); 
```

我能够在一个文件中复制我的控制器 => 模型关系之一，其中控制器被移植到这种格式。

我想设置它，以便应用程序文件基本上可以将每个文件加载为类似于此页面显示的服务[http://metacpan.org/pod/MojoX::JSON::RPC::Service](http://metacpan.org/pod/MojoX%3a%3aJSON%3a%3aRPC%3a%3aService)

```
$svc->register(
    'sum',
    sub {
        my @params = @_;
        my $sum    = 0;
        $sum += $_ for @params;
        return $sum;
    }
); 
```

换句话说，我的设想是重新设计每个控制器以类似于上面的代码片段，但将它们全部加载到应用程序模块中。像这样：

```
## Then in Mojolicious application
$self->plugin(
    'json_rpc_dispatcher',
    services => {
        '/jsonrpc'  => $svc,
    }
); 
```

是否可以创建一个像上面的代码一样设置功能的文件，然后将它们作为服务器加载到应用程序模块中？MojoX::JSON::RPC::Service 似乎提供了这一点。我一直无法让它工作。

# c++ - Qt 套接字写入分段错误

> ID：10019241
> 
> 赞同：1
> 
> 时间：2012-04-04T21:06:42.277
> 
> 标签：c++, qt, tcp

我创建了一个基本的多线程 TCP 服务器，我想向所有连接的客户端发送数据。我已将服务器类的信号连接`writing(QByteArray)`到套接字线程的插槽`writeToSocket(QByteArray)`，但是当我尝试通过发出上述信号来写入该套接字时，出现分段错误。就像我无法访问任何套接字对象的（这是线程的属性）方法一样。

我的简化代码：

```
void MyServer::incomingConnection(int handle)
{
ConnectionThread *thread = new ConnectionThread(handle, this);
connect(this, SIGNAL(writing(QByteArray)), thread, SLOT(writeToSocket(QByteArray)));
// Some more code necessary for thread to work
}

void RoleNetServer::WriteToAll(QByteArray data) 
{
    emit writing("test");
} 
```

然后，在线程的源文件中：

```
void ConnectionThread::writeToSocket(QByteArray data) // a slot
{
    this->socket->write(data);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T06:51:51.400

只是一个想法。我可能错了。

新建/删除在 C++ 中不是线程安全的。不确定这对于 C++0x 是否仍然适用。我在 pthreads 中遇到了这个问题。

如果您使用新分配的内存，即使语法看起来正确，它也会引发分段错误。如果可能，尝试在线程/线程函数中分配它。

希望这会帮助你。

# javascript - JQuery .click 功能不适用于包含的标签

> ID：10019245
> 
> 赞同：0
> 
> 时间：2012-04-04T21:06:49.253
> 
> 标签：javascript, jquery, html, pagination

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T21:10:09.097

试着把它包裹在`$(document).ready(function () { ... });`下面的东西里，

```
 $(document).ready(function () {
   $("div.pagination li").click(function(event) {
        alert("Click");
        event.preventDefault();
        var url = $(this).attr("href");
        $("input[name='order']").val(order);
        $("#form_session").attr('action', url).submit();
    });

 }); 
```

如果`li`是动态生成的，那么您应该使用`.on`（对于 jQuery 1.7）或`.live/.delegate`（旧 jQuery）。

```
 $(document).ready(function () {
   $(document).on('click', 'div.pagination li', function(event) {
        alert("Click");
        event.preventDefault();
        var url = $(this).attr("href");
        $("input[name='order']").val(order);
        $("#form_session").attr('action', url).submit();
    });

 }); 
```

**注意：**如果加载时存在，请替换`$(document).on('click', 'div.pagination li', function(event) {`为。`$('div.pagination').on('click', 'li', function(event) {``div.pagination`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T21:10:18.830

把它放在一个`document.ready`

```
$(function(){ 
    $("div.pagination a").click(function(event) {
            alert("Click");
            event.preventDefault();
            var url = $(this).attr("href");
            $("input[name='order']").val(order);
            $("#form_session").attr('action', url).submit();
       });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T21:08:04.213

尝试：

```
<script type="text/javascript" language="javascript">
$(document).ready(function () {
    $("div.pagination li a").click(function(event) {
        event.preventDefault();
        alert("Click");
        var url = $(this).attr("href");
        $("input[name='order']").val(order);
        // Where is order coming from?
        $("#form_session").attr('action', url).submit();
    });
});
</script> 
```

您错过了`a`选择器中的 。确保 DOM 已准备就绪`$(document).ready`。订单变量来自哪里？有`order`定义吗？

# svn - 如何在不获取所有其他目录和子目录的情况下获取 Subversion 外部

> ID：10019246
> 
> 赞同：7
> 
> 时间：2012-04-04T21:06:54.887
> 
> 标签：svn, branch, svn-externals, externals, svn-update

我有一个名为“repo”的 Subversion 存储库。repo 里面是trunk/ 和branches/ 目录。在branchs/ 中有几十个发布分支，例如1.0/、1.1/。这些分支/目录包含一个相对较大的应用程序。

我想在 repo 的根目录添加一个外部，称为“myExternal”。当我定义外部时，让 SVN 创建 myExternal/ 目录的唯一方法是从 repo 的根目录运行“svn up”。但是，这也会导致整个分支/内容被检出，这是不可接受的（我们有许多开发人员需要将 myExternal/ 添加到他们的 repo 副本中，并且不能让他们都检出千兆字节的不需要的分支）。

我试过'svn up --set-depth immediates'，但这似乎没有得到外部。有什么方法可以告诉 svn 获取 myExternal/ 而不获取所有分支 / ？

使用 SVN 1.7。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-10-02T08:19:30.957

外部只是 svn 结帐，因此您可以手动签出。

您也可以使用这样的命令。如果您的外部文件格式不同，您可能需要对其进行一些修改。

```
svn propget svn:externals | awk '{print $2, $1}' | xargs -L1 svn co 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T21:46:11.407

是的，[除非 depth=infinity ，否则不会创建 subversion externals](http://subversion.tigris.org/issues/show_bug.cgi?id=3311)的已知问题。

我认为没有办法重新设计您的目录结构，以便 myExternal 不是附加到*repo*而是附加到它的子文件夹，例如设置在*/trunk和**/branches*中的每个文件夹。

或者，您可以创建一个脚本，首先获取 repo 的立即数，然后获取 repo 上设置的外部（它可以通过读取 repo 的属性获得：*svn propget svn:externals*）。

# geolocation - 使用mysql查看lat / long是否落在多边形内，现在有什么功能吗？

> ID：10019253
> 
> 赞同：0
> 
> 时间：2012-04-04T21:07:41.980
> 
> 标签：geolocation, polygon

我想知道'5.03529 -754368'是否在多边形内，你能帮我吗，我该怎么做？

我看到这两个字段有不同的格式，我该如何解决这个问题？

从 manuelitapolygon 中选择 ('5.03529 -754368',PyPolygon)

PyPolygon = 'POLYGON((5.035247876391217 -75.43594128570524,5.035158505114919 -75.43594598760016,5.03507011299693 -75.43596004176999,5.034983668480416 -75.43598329423428,5.0349001186705165 -75.43601549023417,5.034820378957751 -75.43605627702355,5.034745322988647 -75.436105207733864))'

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-04T21:10:32.763

请参阅[空间扩展](http://dev.mysql.com/doc/refman/5.0/en/spatial-extensions.html)。

# linq - linq 查询不工作

> ID：10019256
> 
> 赞同：0
> 
> 时间：2012-04-04T21:08:10.210
> 
> 标签：linq

我有以下查询：

```
 var req= (from tl in resultlist
                           where (tl.Message.StartsWith("Do not return") && tl.Type == "Int") && 
                                 (tl.Note.StartsWith("Do no return") && tl.Type == "Ext")
                           select tl).Any(); 
```

我正在尝试查看是否有消息以“不返回”开头且类型为“Int”的记录，并且还有另一条消息，其中注释以“不返回”开头且类型为“Ext”。

似乎我的查询是错误的，因为没有返回任何内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:19:26.060

您可能想将 && 更改为 || 正如上面的评论之一（Joachim Isaksson）指出的那样。您要求属性 (.Type) 在一个实体上以 2 种不同方式存在。这是不可能的。

尝试

```
req= (from tl in resultlist 
    where (tl.Message.StartsWith("Do not return") && tl.Type == "Int") ||
    (tl.Note.StartsWith("Do no return") && tl.Type == "Ext")
    select tl).Any(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T21:14:41.960

```
var intMessages = from tl in resultlist
                  where tl.Message.StartsWith("Do not return") 
                        && tl.Type == "Int"
                  select tl;
var extMessages = from tl in resultlist
                  where tl.Message.StartsWith("Do not return") 
                        && tl.Type == "Ext"
                  select tl;

var intAndExtMessages = intMessages.Any() && extMessages.Any(); 
```

这将确保在结果集中有一些以**AND开头的***“不返回”*消息在同一结果集中还有一些其他以*“Ext”开头的消息*`"Int"`

 ***该函数（查询中的条件）检查源元素是否满足某些要求，因此如果您检查同一对象的类型为“Int”和“Ext”是不可能的，因为不能同时有两个字符串值.

另一方面，您需要确定结果列表中是否存在两种不同类型或两种排他条件的项目，因此不能在一次迭代中完成（每个 LINQ 查询最终都是一个迭代器..） .***

# c# - “元素已经是另一个元素的子元素。”

> ID：10019259
> 
> 赞同：2
> 
> 时间：2012-04-04T21:08:17.620
> 
> 标签：c#, windows-phone-7, stackpanel

起初，这个例外对我来说真的没有意义。为什么我不能多次复制这个对象？但这不是重点：

我使用列表。每当我导航到一个站点时，它应该这样做：

```
 (App.Current as App).recent.ForEach(x => container.Children.Add(x)); 
```

（容器 = 另一个 StackPanel）

第一次，它有效。之后，我得到问题标题中显示的异常。我已经尝试过使用列表框，但我只是得到了一个 ArgumentException。我认为这些异常有相同的来源，但我不知道我做错了什么。请帮忙

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-04T21:18:49.460

错误很明显：一个 WPF/SL 控件一次只能属于 1 个父控件。

因此，当您离开页面时，您要么必须从其父级中删除控件，要么必须在此 ForEach 中创建（可能克隆）新控件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-09-03T07:16:29.043

当您导航到一个页面时，旧实例不会立即删除，因此当您将控件添加到新页面时，如果旧页面没有被销毁，它们可能仍会在旧页面中使用，从而导致异常。

尝试覆盖离开页面时调用的`OnNavigatedFrom(NavigationEventArgs e)`和`OnNavigatingFrom(NavigatingCancelEventArgs e)`方法，以便清空 StackPanel。

例如，您可以这样做：

```
protected override void OnNavigatedFrom(NavigationEventArgs e)
{
    base.OnNavigatedFrom(e);
    container.Children.Clear();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-01T19:08:09.070

从页面导航时，您必须删除容器的子项。但如果导航是由于暂停，则不是。为了避免孩子们在导航是由于暂停时清除，最好覆盖`OnNavigatingFrom`而不是`OnNavigatedFrom`

```
protected override void OnNavigatingFrom(NavigatingCancelEventArgs e)
    {
        container.Children.Clear();
        base.OnNavigatingFrom(e);
    } 
```

# java - Guice 是否使我的代码可读性降低？

> ID：10019262
> 
> 赞同：1
> 
> 时间：2012-04-04T21:08:31.313
> 
> 标签：java, guice

我刚开始使用Guice。
当我使用 Guice 时，我的应用程序类变得松散耦合。
使用 Google Guice 是否会降低代码的可读性、不清晰、更难理解和调试？
你对它的体验如何？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T21:12:26.567

我的经验一直是积极的。我的代码更具可读性；它在*天文*上更容易测试和维护。松散耦合是重点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T21:13:52.173

如果有人一般不熟悉依赖注入，那么是的，我认为它会使代码更难理解和理解......*起初*。例如，我第一次使用 Spring 时，至少可以说有点困惑。然而，一旦你理解了注入 bean 之类的概念，它就会变得有意义。

良好的设计至关重要，而 DI 对松散耦合和可测试性至关重要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T21:42:55.413

明智地使用依赖注入，无论是通过 Guice 还是其他方式，都可以使代码更容易测试并保持干净和松散耦合。它使测试替身（模拟对象等）的使用变得更加容易。

做得不好，或者走极端，它会使*系统*几乎无法理解——即使每个类可能孤立地很清楚，但很难说出类的*组装*是做什么的（尤其是在涉及大量 XML 配置文件的情况下！） . 一些系统似乎将 DI 配置本身用作一种编程语言，这很快就会变得难以管理。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-05T06:01:27.567

哪个更容易阅读？

A：

```
public class ServiceCaller {
  private String url;
  private Service service;
  public A {
    url = System.getProperty("url);
    Hashtable env = ...;
    Context ctx = new InitialContext(...)
    service = ctx.lookup(...)
  }
  public String getValue() {
    return service.getValue();
  } ... 
```

或者

```
public class ServiceCaller {
  private Service service;
  @Inject
  public ServiceCaller(Service service) {
    this.service = service;
  }
  public String getValue() { ...} 
```

如果你不习惯 DI，你可能会说“#1”，因为你可以阅读所有的实现，并且确切地知道发生了什么，服务是什么等等。但问题是：从外部看类合同，你不知道里面发生了什么。#2 明确指出：“给我一个服务实例，我会给你一个值。你所要做的，就是相信有一个隐藏的机制会提供这个服务实例”。（Hidden=hidden，你需要在你的代码中有一个“getproperty-getcontext-getService-Module”）

所以在我看来：DI 更容易阅读（尽可能使用基于构造函数的注入）。它更容易测试，有些人可能会说，最好的文档是编写良好的、有效的测试。你只需要一点信心就可以相信会有一个服务实例......

# c# - 中欧是否有通用的 TimeZoneInfo？

> ID：10019267
> 
> 赞同：18
> 
> 时间：2012-04-04T21:08:37.193
> 
> 标签：c#, .net, datetime, date

是否存在将 CET 和 CEST 合二为一的中欧通用 TimeZoneInfo？

我有一个应用程序正在执行以下操作：

```
TimeZoneInfo tzi = TimeZoneInfo.FindSystemTimeZoneById("Central European Standard Time"); 
DateTimeOffset dto = new DateTimeOffset(someDate, tzi.BaseUtcOffset);
var utcDate = dto.ToUniversalTime().DateTime; 
```

问题是这会返回错误的 utcDate，因为 BaseUtcOffset 是 +1 而不是 +2。CET 似乎也有 DST，并且根据一年中的时间是 +1 或 +2。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-04T21:21:59.020

首先，我想赞扬 mgnoonan 使用 Noda Time 的回答 :) 但如果你感觉不那么冒险......

您已经使用了正确的时区 - 但您不应该使用[`BaseUtcOffset`](http://msdn.microsoft.com/en-us/library/system.timezoneinfo.baseutcoffset.aspx)被*记录*为与 DST 无关的时区：

> 获取当前时区的标准时间与协调世界时 (UTC) 之间的时差。

`DateTime`当您不提供它来获取偏移量时，它不可能考虑 DST :)

假设`someDate`是`DateTime`，您可以使用：

```
DateTimeOffset dto = new DateTimeOffset(someDate, tzi.GetUtcOffset(someDate)); 
```

或者只是[`ConvertTimeToUtc`](http://msdn.microsoft.com/en-us/library/bb381744.aspx)：

```
var utcDate = TimeZoneInfo.ConvertTimeToUtc(someDate, tzi); 
```

请注意，如果您的当地时间由于 DST 转换而出现两次，或者根本不出现，您应该计算出您想要做什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T21:11:08.137

也许[野田时间](http://noda-time.blogspot.com/)可以帮助你？

# python - 在 python 3 中解码 base64 字符串（是否使用 lxml）

> ID：10019268
> 
> 赞同：12
> 
> 时间：2012-04-04T21:08:38.407
> 
> 标签：python, python-3.x, base64, lxml

我知道这看起来非常容易，我想问题是我还没有清楚地了解所有这些*bytes-str-unicode*（和*encoding-decoding*，坦率地说）的东西。

我一直在尝试让我的工作代码在 Python 3 上运行。我坚持的部分是当我解析 XML`lxml`并解码该 XML 中的 base64 字符串时。

该代码现在以以下方式工作：

我使用 XPath 查询检索二进制数据`'.../binary/text()'`。这将生成一个包含`lxml.etree._ElementUnicodeResult`对象的单元素列表。然后，使用 python 2，我能够做到：

```
decoded = source.decode('base64') 
```

最后

```
output = numpy.frombuffer(decoded) 
```

但是，在 python 3 上，我收到一条错误消息说

```
AttributeError: 'lxml.etree._ElementUnicodeResult' object has no attribute 'decode' 
```

这并不奇怪，因为`lxml.etree._ElementUnicodeResult`它是`str`.

`str`另一种方法是用相同的数据获得一个真实的

```
 binary = tree.xpath('//binary')[0]
 binary_string = binary.text 
```

那基本上是一样的。那么我该怎么做才能从base64解码呢？我看过这个`base64`模块，但它需要一个`bytes`对象作为参数，我想不出如何呈现`str`为`bytes`，因为如果我尝试构造一个`bytes`对象，Python 会尝试对字符串进行**编码**，而我不这样做不需要。

进一步谷歌搜索，我发现了这个模块（如果我没记错的话，`binascii`它是间接调用的），但是调用我的字符串会产生`base64``binascii.b2a_base64()`

```
TypeError: 'str' does not support the buffer interface 
```

PS我什至找到了一个关于[如何在 Python 3 中解码十六进制字符串的](https://stackoverflow.com/questions/3283984/decode-hex-string-in-python-3)已回答问题，但这是通过专用方法完成的，`bytes.fromhex()`所以我看不出它会有什么帮助。

有人可以告诉我我错过了什么吗？恐怕大部分帖子都无关紧要，只会加剧我的耻辱，但至少你们知道[我尝试了什么](http://whathaveyoutried.com/)。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-05T12:07:57.060

好的，我想我将总结一下我目前对事物的理解（请随时纠正我）。希望它能帮助像我一样困惑的其他人。

当然，这完全[归功于 thebjorn](https://stackoverflow.com/users/75103/thebjorn)和[delnan](https://stackoverflow.com/users/395760/delnan)。

所以，从最常见的事情开始：有[Unicode](http://en.wikipedia.org/wiki/Unicode)，它是一个全球标准，为你能想象到的所有奇异字符分配代码（或代码点）。这些代码只是整数。维基百科说，截至 Unicode 6.1 有 109,975 个图形字符。

然后是定义如何用字节码指定 Unicode 字符的编码。一个字节不足以指定任意 Unicode 字符。虽然，如果你只取其中的一小部分（英文字母、数字、标点符号、一些控制字符），你可以使用每个字符一个字节（甚至 7 位；参见[ASCII](http://en.wikipedia.org/wiki/ASCII)）。

* * *

要将 Unicode 字符串传递到任何地方，需要以字节为单位对其进行编码，然后可以在另一端对其进行解码。

在 Python 2 中，`str`实际上是字节，并且`unicode`是 Unicode，但 Python 2 会在需要时为您进行隐式编码/解码。它将尝试使用 ASCII 编码。

在 Python 3 中，`str`始终是 Unicode 字符串，并且`bytes`是实际字节的新数据类型。Python 3 从未进行过隐式转换，您始终需要自己进行并指定编码。这意味着在您了解发生了什么之前，您的程序将无法运行，这完全发生在我身上。

* * *

现在，或多或少清楚了，让我们继续讨论[base64](http://en.wikipedia.org/wiki/Base64)编码，它也是一种编码，但含义略有不同。假设您有一些二进制数据（即*bytes*）可能意味着任何东西（在我的情况下它是一堆`float`s）。现在你想用一个字符串来表示这个二进制数组。这就是 base64 编码的含义：您将字节表示为 ASCII 字符串。

Base64 表示 6 位，因此在 base64 编码的字符串中，单个字符代表 6 位数据。这就是为什么 base64 编码的字符串长度必须是 4 的倍数：否则编码的字节数将不是整数。

* * *

最后，要从 base64 解码，您需要一个 ASCII 字符串。Unicode 字符串不行，只能有 base64 字母表中的字符。[Base64 模块](http://docs.python.org/py3k/library/base64.html)在 Python 中完成这项工作。该`base64.b64decode()`函数将**字节字符串**作为参数。在 Python 2 中，这意味着：`str`. 在 Python 3 中，这意味着：`bytes`. 所以如果你有一个`str`，比如

```
>>> s = 'U3RhY2sgT3ZlcmZsb3c=' 
```

在 Python 2 中，你可以这样做

```
>>> s.decode('base64') 
```

因为`s`已经是ASCII。在 Python 3 中，您需要先将其**编码为 ASCII**，因此您必须这样做：

```
>>> base64.b64decode(s.encode('ascii')) 
```

顺便说一句，这将返回一个`bytes`对象，所以如何处理这些字节真的取决于你。也许这是我的花车，但也许你应该尝试将它解码为 ASCII :) 在 Python 2 中，它只是一个`str`. 无论如何，看看[`struct`](http://docs.python.org/library/struct.html)从这些字节中解压缩数据的工具。

因此，如果您需要代码同时在 Python 2 和 3 上工作，请使用最后一个。为确保最终有 Unicode（如果您从 base64 解码文本），您必须对其进行解码：

```
>>> base64.b64decode(s.encode('ascii')).decode('ascii') 
```

在 Python 2 上，`encode('ascii')`不会有效地做任何事情，因为它应用于`str`. 所以它会先*隐式转换*为 Unicode，然后做你想做的事情（将其转换回 ASCII）。将在 Python 2 上`decode('ascii')`返回一个对象。`unicode`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T21:16:53.460

我没有安装 Python 3，但听起来你需要将从 lxml 返回的 Unicode 转换为字节，也许通过调用 .encode('ascii') ？

# tridion - 使用 TcmUploadAssembly 上传 DD4T.Templates.dll 时出现“无法加载请求的类型”错误

> ID：10019273
> 
> 赞同：3
> 
> 时间：2012-04-04T21:08:44.773
> 
> 标签：tridion

尝试使用 DD4T Tridion Tools 文件夹中的 TcmUploadAssembly 将 DD4T.Templates.dll 重新上传到 Tridion 2011 SP1 - 我已确保上传了必要的 DLL - DD4T.ContentModel.Contracts.dll、DD4T.ContentModel.dll、DD4T。 Templates.Base.dll - 但我不断收到“错误：无法再加载一种请求的类型”。

检查 Fusion 日志，我可以看到以下绑定问题：

```
LOG: DisplayName = TcmUploadAssembly.XmlSerializers, Version=5.4.0.509, Culture=neutral, PublicKeyToken=360aac4d3354074b, processorArchitecture=MSIL
 (Fully-specified)
LOG: Appbase = file:///D:/
LOG: Initial PrivatePath = NULL
LOG: Dynamic Base = NULL
LOG: Cache Base = NULL
LOG: AppName = TcmUploadAssembly.exe
Calling assembly : System.Xml, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089.
===
LOG: This bind starts in default load context.
LOG: No application configuration file found.
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework64\v2.0.50727\config\machine.config.
LOG: Post-policy reference: TcmUploadAssembly.XmlSerializers, Version=5.4.0.509, Culture=neutral, PublicKeyToken=360aac4d3354074b, processorArchitecture=MSIL
LOG: GAC Lookup was unsuccessful.
LOG: Attempting download of new URL file:///D:/TcmUploadAssembly.XmlSerializers.DLL.
LOG: Attempting download of new URL file:///D:/TcmUploadAssembly.XmlSerializers/TcmUploadAssembly.XmlSerializers.DLL.
LOG: Attempting download of new URL file:///D:/TcmUploadAssembly.XmlSerializers.EXE.
LOG: Attempting download of new URL file:///D:/TcmUploadAssembly.XmlSerializers/TcmUploadAssembly.XmlSerializers.EXE.
LOG: All probing URLs attempted and failed. 
```

不知道这个 TcmUploadAssembly.XmlSerializers 来自哪里？

build 文件夹中有一个 DD4T.ContentModel.XmlSerializers.dll ，但这似乎与其他文件合并形成 DD4T.Templates.merged.dll - 但我不知道这是做什么用的。

不知道从哪里开始 - 这是 DD4T 问题还是 TcmUploadAssembly 问题？（我在 Tridion 2011 SP1 安装中尝试了与 TcmUploadAssembly 相同的步骤，但得到了相同的错误，尽管对于更新的 TcmUploadAssembly.XmlSerializers，版本 6.1.0.996）

**编辑** 为混淆道歉 - 我已将 DD4T 程序集添加到 GAC 中。我原来的帖子“*我已经确保上传了必要的 DLL* ”具有误导性，但我的意思是加载到 GAC 中！

我将检查 Mihai 关于注册 .NET 4 的观点——我这样做的时候已经是昨晚很晚了！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T22:57:46.287

版本 5.4 是 Tridion 2009。我认为使用 T2009 中的 TcmUploadAssembly 不适用于 T2011。所以我绝对建议使用最新的 TcmUploadAssembly（T2011SP1 的 v6.1.0.966）。

您是否已将模板 DLL 注册到TCM 服务器`DD4T.ContentModel.Contracts.dll`上的 GAC 中？仅仅上传它们是不够的。看看[http://code.google.com/p/dynamic-delivery-4-tridion/wiki/40_Templates](http://code.google.com/p/dynamic-delivery-4-tridion/wiki/40_Templates)。`DD4T.ContentModel.dll``DD4T.Templates.Base.dll`

我还看到您的错误是指 .NET 2。您是否使用 .NET 4 注册了 DLL？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-16T15:54:10.233

推荐的方法是从[https://code.google.com/p/dynamic-delivery-4-tridion/downloads/detail?name=DD4T-template-installer-1.31.zip](https://code.google.com/p/dynamic-delivery-4-tridion/downloads/detail?name=DD4T-template-installer-1.31.zip)下载安装程序。这会将 DD4T.Templates.Merged.dll 上传到 Tridion，其中包括模板 DLL + ILMerge 合并在一起的所有依赖 DLL。

如果您出于某种原因不喜欢 ILMerge，可以将以下 DLL 放入 GAC：

*   DD4T.ContentModel.dll
*   DD4T.ContentModel.Contracts.dll
*   DD4T.Templates.Base.dll
*   DD4T.ContentModel.XmlSerializers.dll

您可以通过下载源代码、打开 Dynamic Delivery Publishing.sln 解决方案并构建它来获取这些 DLL。

# php - 尝试了一切仍然得到...无法发送会话缓存限制器 - 标头已发送

> ID：10019274
> 
> 赞同：-1
> 
> 时间：2012-04-04T21:08:51.327
> 
> 标签：php, session, cookies, header

我已经在 google 和 stackoverflow 上搜索了可能的解决方案，我相信我已经尝试了所有方法，但由于某种原因我遇到了错误。以前工作时我没有更改任何内容：-s 请在上面的索引页面上找到 PHP 的顶部块。

或访问我的网站亲自查看 - www.budgie.richardcmpage.com

```
 <?php
ini_set('session.cookie_httponly', '' );
echo ini_get('session.cookie_httponly');
session_start();    
if (isset($_SESSION['last_ip']) === false) {
    $_SESSION['last_ip'] = $_SERVER['REMOTE_ADDR'];
}    
if ($_SESSION['last_ip'] !== $_SERVER['REMOTE_ADDR']) {
    session_unset();
    session_destroy();
}

include 'functions/functions.php';    
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T21:12:32.093

我认为您的问题是第一行的空格：

```
 <?php 
```

并在第三处回声：

```
echo ini_get('session.cookie_httponly'); 
```

触发输出并发送标头

# reporting-services - SSRS 显示嵌入式或数据库映像

> ID：10019276
> 
> 赞同：0
> 
> 时间：2012-04-04T21:09:02.760
> 
> 标签：reporting-services

如果该图像存在于报告上显示的人员记录的数据库中，我想在我的报告上显示该图像。但是，如果该人员记录没有图像，我想在数据库图像所在的确切位置显示嵌入图像。当我将它们放在一起并根据表达式切换可见性时，SSRS 似乎正在“保留”隐藏图像的空间。例如，如果嵌入图像位于报表上的数据库图像之上，并且嵌入图像设置为隐藏 SSRS 将在可见图像右侧显示一个空白区域。

我试图将图像放在表格中并在没有运气的情况下切换列并使用图像设置（自动调整、剪辑等）。看起来我们不能使用表达式，因为它们属于不同的类型（嵌入式与数据库）。除了将嵌入的图像放入数据库之外，还有什么方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:09:07.253

我们让它工作的方式是创建一个 Tablix，然后切换列的可见性。有趣的是，Tablix 的工作方式与 Table 不同，但确实如此。

我们发现这个讨论了这个问题：

[http://sqlserverpedia.com/blog/sql-server-bloggers/dealing-with-white-space-due-to-a-hidden-textbox-in-reporting-services/](http://sqlserverpedia.com/blog/sql-server-bloggers/dealing-with-white-space-due-to-a-hidden-textbox-in-reporting-services/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-10T13:38:26.147

在表格的单元格中放置一个矩形对象，以便您可以自由放置图像项。将默认嵌入图像添加到您的 rdl 中，将其命名为 defaultImage。由于来自数据库的数据类型将是 byte[]，为了让您检查数据库字段值是否为空，您在默认嵌入图像上的可见性表达式将是：

```
 =Not(IsNothing(Fields!{FieldName}.Value)) 
```

现在，当数据库中有字段值时，您的默认图像将隐藏。在默认图像的顶部放置一个新的图像对象，大小相同。此图像将直接使用数据库字段值，无需抑制。当 byte[] 为空时，数据库图像将不显示，而嵌入的（默认图像）将显示。

# c# - 使用 System.Windows.Forms

> ID：10019280
> 
> 赞同：-1
> 
> 时间：2012-04-04T21:09:30.973
> 
> 标签：c#, windows, forms, mouse, system

我正在尝试在 Visual Studio 2010 C# 中控制光标。我有它的代码 ( `Cursor.Position = new Point(x, y);`) 但我需要包含`System.Windows.Forms`它才能使用它，否则它只会给我一个错误。问题是，它在windows下找不到Forms！我已经包含`System.Windows.Forms.dll`在我的程序集中，但仍然没有运气。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T21:12:50.450

您应该将项目的目标框架更改为 .NET 4 Framework 客户端配置文件。

/蒂比

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T21:13:41.190

在 VS2010 中转到项目 -> 添加引用 -> .net 选项卡 -> 查找 system.windows.forms -> ok，然后添加 using 指令

# php - php oncouch 不会用空对象搜索

> ID：10019286
> 
> 赞同：1
> 
> 时间：2012-04-04T21:10:07.787
> 
> 标签：php, couchdb

在沙发上使用 php：[php-on-couch](https://github.com/dready92/PHP-on-Couch)

我正在尝试传入 startkey 和 endkey，这有效：

```
$client->startkey( array( $val1, $val2) ) ); 
$client->endkey( array( $val1 , $val2) ) ); 
```

但是这不起作用：

```
$client->startkey( array( $val1) ) ); 
$client->endkey( array( $val1 , '{}') ) ); 
```

我认为 PHP 在处理空对象时遇到了问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T00:39:33.053

字符串是否有可能`'{}'`不是作为对象发送，而是作为字符串发送？您要发送（为清晰起见格式化）

```
startkey=%5B%22val1%22%5D        // decodes to: ["val1"]
endkey=%5B%22val1%22%2C%7B%7D%5D // decodes to: ["val1",{}] 
```

但也许沙发上的 PHP 正在请求

```
startkey=%5B%22val1%22%5D              // decodes to: ["val1"]
endkey=%5B%22val1%22%2C%22%7B%7D%22%5D // decodes to: ["val1","{}"] 
```

如果是这种情况（我猜了一下），那么使用数组（对象）作为第二个元素呢？

```
$client->startkey( array( $val1) ) ); 
$client->endkey( array( $val1 , array() ) ) ); 
```

那样有用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T01:44:22.860

我正在补充@JasonSmith 的答案，希望它能对其他人有所帮助。这是澄清上述答案所需的要点。如果您将它们作为数组对象传递，则 startkey 和 endkey 将起作用，即使您每个只需要一个参数。

```
$this->couchdb
->startkey(array($gallery_id))
->endkey(array($gallery_id))
->getView('galleries','by_galleryid'); 
```

# android - 如何帮助用户在 Android 设备上将外部日历订阅到 Google 日历？

> ID：10019288
> 
> 赞同：5
> 
> 时间：2012-04-04T21:10:13.280
> 
> 标签：android, calendar, google-api, google-calendar-api, android-calendar

目前，我的应用程序能够帮助用户将单个事件添加到他们的 Google 日历中：

```
final Intent calendarIntent = new Intent(Intent.ACTION_EDIT)
        .addFlags(Intent.FLAG_ACTIVITY_NEW_TASK)
        .setType("vnd.android.cursor.item/event")
        .putExtra("beginTime", startTime)
        .putExtra("endTime", startTime + 7200000L) // 2 hours
        .putExtra("title", name)
        .putExtra("description", description.toString())
        .putExtra("eventLocation", address);

// later
startActivity(calendarIntent); 
```

但是，许多用户希望将他们的所有活动自动添加到他们的 Google 日历中。我们的服务器团队制作了一个 ICS 提要，人们可以[订阅它作为外部 Google 日历](http://support.google.com/calendar/bin/answer.py?hl=en&answer=37100)。但这涉及到复制和粘贴 URL，并且会让最终用户感到困惑。

在网络上，我们可以将人们链接到表单的 URL `http://www.google.com/calendar/render?cid=OUR_ICS_URL`，他们将能够相对轻松地从那里添加提要。但是，当您在 Android 浏览器上访问此 URL 时，您会收到各种关于移动网站与桌面网站的奇怪弹出窗口，甚至我们开发团队中的高级 android 用户也无法弄清楚如何从那里添加日历。

我研究的另一件事是 Google Calendar API，但似乎他们的[日历列表插入方法](https://developers.google.com/google-apps/calendar/v3/reference/calendarList/insert)需要一个 google 日历 ID，而不是外部日历的 URL。

那么，这里有什么好的解决方案吗？似乎应该有一种方法可以帮助我们的用户订阅他们的日历，而不需要他们去他们的桌面并打开一个全尺寸的网络浏览器。但是我尝试过的任何事情都没有产生任何结果。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T15:29:34.293

也许您可以使用[AuthSub](http://code.google.com/apis/gdata/docs/auth/authsub.html)来验证您的用户，然后您就可以使用日历列表插入方法。我认为[Zend 框架](http://framework.zend.com/manual/en/zend.gdata.calendar.html)就是这样做的。

# rest - JAX-RS 通用响应和接口代理

> ID：10019294
> 
> 赞同：3
> 
> 时间：2012-04-04T21:10:36.197
> 
> 标签：rest, jax-rs, resteasy

有什么方法可以使用 JAX-RS 响应返回通用描述实体类型？类似于 REST-Easy ClientReponse 但 JAX-RS 标准而不是特定于实现的类。

问题是我想通过它的共享接口（由一些代理提供者创建）调用我的 REST 服务，并且只返回对象不允许添加我需要的信息。例如，对于通过 POST 创建资源，我还想返回新创建资源的 URL 等等。返回简单响应不会显示此类响应中存储的实体类型。

```
Response<MyObject> getMyObject(@PathParam("id" Integer id) 
```

到目前为止，我似乎必须返回简单的 Response 然后创建适配器，它将简单地调用 Response.getEntity(.class)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T11:39:37.887

可能没有这样的选择...

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-06T05:05:11.817

[GenericEntity](http://docs.oracle.com/javaee/6/api/javax/ws/rs/core/GenericEntity.html)允许您返回一个泛型。实际类型在运行时由 GenericEntity 保存，允许对对象进行序列化。

这是如何使用它的人为示例。

```
GenericEntity entity = new GenericEntity<Employee>(new Employee());
return Response.ok(entity).build(); 
```

# php - 换行符文本区域的字符分隔符

> ID：10019295
> 
> 赞同：1
> 
> 时间：2012-04-04T21:10:40.953
> 
> 标签：php, newline, carriage-return

很明显：

```
\n = CR (Carriage Return) // Used as a new line character in Unix
\r = LF (Line Feed) // Used as a new line character in Mac OS
\r\n = CR + LF // Used as a new line character in Windows
(char)13 = \n = CR // Same as \n 
```

但后来我也听说对于 HTML textarea，当它被 php 脚本提交和解析时，所有新行都被转换为 \r\n 而不管平台

这是真的吗？我可以依靠这个还是我完全错了？

IE。如果我想根据新行做explode()，我可以使用'\r\n'作为分隔符，无论用户是否使用mac、pc等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T21:23:20.423

所有换行符都应`\r\n`由[规范](http://www.w3.org/MarkUp/html-spec/html-spec_8.html#SEC8.2.1)转换。

`explode("\r\n", $theContent)`所以无论使用什么平台，你都可以做一个简单的事情。

附言

`\r`仅在旧（er）Mac 上使用。现在 Mac 也使用 *nix 样式的换行符 ( `\n`)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-25T09:22:55.940

您可以尝试 preg_split，它将使用正则表达式来拆分字符串。在这个正则表达式中，您可以匹配所有 3 个新行变体。

```
$ArrayOfResults = preg_split( '/\r\n|\r|\n/', $YourStringToExplode ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T21:20:31.217

这取决于您想要达到的目标。如果您最终这样做是为了将其显示/格式化为 HTML，您也可以使用[nl2br()](http://php.net/nl2br)函数或可能像这样使用[str_replace](http://php.net/str_replace)：

```
$val = str_replace( array("\n","\r","\r\n"), '<br />', $val ); 
```

如果您只想获取所有行的数组，我建议您使用所有 3 个字符（“\n”、“\r”、“\r\n”）进行爆炸

# asp.net - 如何在 devexpress aspxgridview 中使用组合框

> ID：10019298
> 
> 赞同：1
> 
> 时间：2012-04-04T21:10:54.463
> 
> 标签：asp.net, combobox, devexpress, aspxgridview

我在 devexpress gridview 中显示我的数据。其中一列是状态值。编辑网格时，我必须在组合框中显示状态，以便用户可以通过选择不同的状态来更改状态。目前它显示在文本框中，因为它是默认值。本质上，当用户单击编辑按钮时，组合框应显示为编辑控件的一部分，组合框应填充代码隐藏中的所有可能状态，并且所选值应为网格上的初始值。在 MS gridview 中很容易做到。但是我在 devexpress gridview 中看不到任何示例代码。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-07T13:37:09.890

```
 <dx:GridViewDataTextColumn FieldName="FieldName" VisibleIndex="4">
          <EditItemTemplate>
                <dx:ASPxComboBox ID="ASPxComboBox1" runat="server" DataSourceID="newDataSource" >
                </dx:ASPxComboBox>
           </EditItemTemplate>
  </dx:GridViewDataTextColumn> 
```

您需要设置数据源，以便获得值列表

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-09T17:22:01.747

如果您没有数据源并希望在代码中包含组合框项，则可以使用另一种创建列的方法：

```
<dx:GridViewDataComboBoxColumn FieldName="QAAproval" VisibleIndex="11" Width="30px">
    <PropertiesComboBox>`enter code here`
        <Items>
            <dx:ListEditItem Text="GENERIC" Value="GENERIC" />
            <dx:ListEditItem Text="FAIR" Value="FAIR" />
            <dx:ListEditItem Text="VSE" Value="VSE" />
            <dx:ListEditItem Text="ECAV" Value="ECAV" />
            <dx:ListEditItem Text="FMMDS" Value="FMMDS" />
            <dx:ListEditItem Text="CLEAR" Value="CLEAR" />
       </Items>
   </PropertiesComboBox>
   <CellStyle Font-Size="XX-Small">
   </CellStyle>
</dx:GridViewDataComboBoxColumn> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-31T16:26:06.450

我已使用以下代码在 aspxgridview 中有组合框。

我希望这个例子有帮助：

```
 <dx:GridViewDataComboBoxColumn FieldName="DatabaseFieldName" Settings-FilterMode="DisplayText"
Width="3%" VisibleIndex="3" Visible="True" Caption="Priority" Settings-AutoFilterCondition="Contains"
 HeaderStyle-VerticalAlign="Middle" HeaderStyle-HorizontalAlign="Center" CellStyle-HorizontalAlign="Center"
    CellStyle-VerticalAlign="Top">

    <PropertiesComboBox ValueType="System.String" DataSourceID="objDataSourceID"
 Width="200px" Height="25px" TextField="TextFieldName" ValueField="ValueFieldName"
   IncrementalFilteringMode="StartsWith">
</PropertiesComboBox>
</dx:GridViewDataComboBoxColumn> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T21:21:07.193

编辑 GridView 模板，并在字段的 EditTemplate 中，添加下拉框。它可能看起来像这样

```
<dx:GridViewDataTextColumn Caption="Field Name" 
            FieldName="FieldName" VisibleIndex="3">
            <EditItemTemplate>
                <cc1:DropDownList ID="DropDownList1" runat="server">
                </cc1:DropDownList>
            </EditItemTemplate>
        </dx:GridViewDataTextColumn> 
```

因此，当您编辑该行时，它将显示 DDL

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-05T07:17:54.820

使用[GridViewDataComboBoxColumn](http://documentation.devexpress.com/#AspNet/clsDevExpressWebASPxGridViewGridViewDataComboBoxColumntopic)。声明数据源并将其附加到组合框列或在后面的代码中填充它。此[示例](http://www.devexpress.com/Support/Center/e/E134.aspx)包含两种变体。
您还可以查看[DevExpress 网格编辑演示](http://demos.devexpress.com/ASPxGridViewDemos/GridEditing/EditModes.aspx)。

# android - Android 3.0 兼容包

> ID：10019303
> 
> 赞同：0
> 
> 时间：2012-04-04T21:11:24.663
> 
> 标签：android, compatibility

如果运行 3.0+，android 兼容性包是否会返回默认片段使用，还是仍然使用包的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:22:43.627

它总是使用 Android 支持包中的那些。

# php - jQuery AJAX 调用 - 是否可以取消不需要的调用？

> ID：10019310
> 
> 赞同：4
> 
> 时间：2012-04-04T21:11:58.320
> 
> 标签：php, jquery

我只是想问问。我有文本输入，允许用户输入他们的城市。

jQuery 有一个`keyup`链接到这个输入的事件，并在每次字符更改后发送一个 AJAX 调用。

然而，我发现当人们打字时会发送许多不需要的 AJAX 调用，并且根据结果的数量，这可能会降低性能。

如果有新的呼叫，有没有办法取消 AJAX 呼叫？有一个更好的方法吗？

一个例子可以在这里看到：[www.datingjapan.co](http://www.datingjapan.co)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T21:14:57.290

您可以使用该`abort`方法[`jqXHR`](http://api.jquery.com/jQuery.ajax/#jqXHR)返回的对象的[`ajax`](http://api.jquery.com/jQuery.ajax/)方法（其他 AJAX 方法`get`也可以`post`返回一个`jqXHR`实例）：

```
var xhr = $.ajax(opts);
xhr.abort(); 
```

请注意，`jqXHR`对象实际上只是 的扩展`XMLHttpRequest`，并且`XMLHttpRequest`它本身也有一个[`abort`](https://developer.mozilla.org/en/XMLHttpRequest#abort%28%29)方法。

# javascript - 为注册名称字段添加验证

> ID：10019313
> 
> 赞同：0
> 
> 时间：2012-04-04T21:12:10.060
> 
> 标签：javascript, regex, joomla1.7, joomla1.6, joomla2.5

我正在尝试向注册名称字段添加验证规则。我在我的 validation.js 文件中添加了一个函数，例如：

```
this.setHandler('name',
function (value) {
regex=/^\S[\S ]{2,98}\S$/;
return regex.test(value);
}
); 
```

在registration.xml（components/com_users/models/forms/）中，我添加了name字段：

```
class="validate-name"
validate="name" 
```

但它仍然没有验证规则。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T14:57:57.583

您的注册字段的属性是什么？
乍一看您的正则表达式，我认为最少 2 个字符，最多 98 个字符。您可以添加除空格以外的任何符号吗？

如果我是你，我会将我的注册字段（如果在用户名上）设置`\w\S{4,}`
`\w`为很方便，因为它涵盖了表达式`[a-zA-Z_0-9]` ，如果你添加 \S 到它，它会涵盖空白问题。
另外，为什么你`\S`在表达的开头和结尾使用“”对我来说有点模糊。

希望这有帮助；）

PS：如果你喜欢一个很好的工具来练习/测试你的正则表达式，我可以推荐[Regex Designer](http://www.radsoftware.com.au/regexdesigner/)。它是免费软件和 ez 使用。此外，它还为您提供有关各种不同表达方式的大量额外信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T12:42:36.910

使验证生效的解决方案是添加`aria-required="true"`到该字段。

# php - PHP 识别单词前的句号

> ID：10019318
> 
> 赞同：1
> 
> 时间：2012-04-04T21:12:19.410
> 
> 标签：php, regex, text

我有一种方法可以查找“不”这个词，然后是一个词，但是如果我有一个句子，例如：

> 这很好。不好

由于某种原因，由于前面的句号，'not'不会被拾取，任何人都知道如何解决这个问题，代码如下

```
 preg_match_all("/(?<=\b not\b)\b good\b/i", $find, $matches); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T21:21:38.787

`\b`匹配单词边界，即两个字符之间的位置，一个是单词字符，一个不是。单词字符是`[a-zA-Z0-9]`. 您在 之前的空格之前匹配单词边界`not`，并且那里没有单词边界，因为字符串的前一个字符是句号。

也就是说，句号和空格之间没有单词边界，因为*两者都不*是单词字符。

更多信息：[http ://www.regular-expressions.info/wordboundaries.html](http://www.regular-expressions.info/wordboundaries.html)

# selenium - 将一个 JUnit @Test 的结果与同一类中的另一个 @Test 进行比较

> ID：10019319
> 
> 赞同：0
> 
> 时间：2012-04-04T21:12:24.950
> 
> 标签：selenium, junit4

是否可以将一个 JUnit 测试的结果/输出与同一类中的另一个测试进行比较？

下面是算法

```
Public class CompareResult {

@Before
{
open driver
}

@After
{
quit driver
}

@Test
{
Connect to 1st website
Enter data and calculate value
Store the value in Variable A
}

@Test
{
Connect to 2nd website
Enter data and calculate value
Store the value in Variable B
}

@Test
{
Compare A and B
}
} 
```

当我在第三个@Test 中显示变量 A 和 B 的值时，它为 NULL。我们不能在一个@Test 中将变量用于JUnit 中的另一个@Test 吗？请告知，我是 JUnit 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T00:33:14.913

为什么他们需要进行两次测试？如果您正在比较这些值，那么您确实有一个包含多个方法和可能多个断言的测试。如果 helper1 和 helper2 中没有任何断言，这将变得更加明显。没有断言的测试只是测试它不会爆炸！

```
private helper1
{
    // Connect to 1st website
    // Enter data and calculate value
    // Store the value in Variable A
}

private helper2
{
    // Connect to 2nd website
    // Enter data and calculate value
    // Store the value in Variable B
}

@Test actualTest
{
    // Compare A and B with assertion
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T12:43:51.057

正如我所理解的，您将值存储在局部变量中。首先声明私有字段 A 和 B，然后使用它来存储您的数据。

```
Public class CompareResult {

    private String a = null;
    private String b = null;

    @Before
    public void Setup() {
        open driver
    }
    ... 
```

顺便说一句，您的测试应该是独立的，并且将值从一个测试传递到另一个测试并不是实现它们**的好方法。**另外我没有经常使用junit，所以我不知道你的测试的执行顺序是如何设置的。你应该定义一些测试依赖或类似的东西，我再重复一遍：这对于测试是不正确的。

# objective-c - Segue 不在委托方法 Zbar 中执行

> ID：10019325
> 
> 赞同：0
> 
> 时间：2012-04-04T21:12:41.950
> 
> 标签：objective-c, ios5

在捕获 QR 数据后，我试图在 Zbar 委托方法中执行转场，但我没有成功我认为与委托方法和转场的调用有关。我的想法是对另一个视图执行 segue 并在那里显示 QR 扫描结果，我使用 segue 方法并将 QR 值传递给 descuentoController：

```
- (void) imagePickerController: (UIImagePickerController*) reader
 didFinishPickingMediaWithInfo: (NSDictionary*) info
{
    // ADD: get the decode results
    id<NSFastEnumeration> results =
    [info objectForKey: ZBarReaderControllerResults];
    ZBarSymbol *symbol = nil;
    for(symbol in results)
        // EXAMPLE: just grab the first barcode
        break;

    // EXAMPLE: do something useful with the barcode data

    self.encodedQR = [encriptationData Midesencriptacion:symbol.data llave:@"RR4$t%%"];

    resultText.text = [encriptationData Midesencriptacion:symbol.data llave:@"RR4$t%%"];;

    // EXAMPLE: do something useful with the barcode image
    resultImage.image =
    [info objectForKey: UIImagePickerControllerOriginalImage];

    NSLog(@"Valor QR %@", resultText.text);

    // ADD: dismiss the controller (NB dismiss from the *reader*!)
    [reader dismissModalViewControllerAnimated: YES];

    [self segue];

}

-(void) segue{
    [self performSegueWithIdentifier:@"descuentoSegue" sender:self];

}

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{

    if ([[segue identifier] isEqualToString:@"descuentoSegue"]) 
    {

       descuentoController *vc = ( descuentoController *)[segue destinationViewController];

        vc.encodedQR = self.encodedQR;

    } 
} 
```

谢谢

# c# - 在“：”处解析-甚至不知道如何问..所以这是一个EX

> ID：10019326
> 
> 赞同：-4
> 
> 时间：2012-04-04T21:12:50.417
> 
> 标签：c#, parsing, richtextbox

我有这段代码，我想用“：”解析它很难解释，所以很难搜索所以决定在这里问我的第一个问题

```
if (command == "hi")
{
    MessageBox.Show(command);
    skype.SendMessage(msg.Sender.Handle, nick + " Says: " + "what");
}
else { }
if (command == "what's up?")
{
    MessageBox.Show(command);
    skype.SendMessage(msg.Sender.Handle, nick + " Says: " + "nothing much");
}
else { } 
```

现在我想要上面的内容是让richtextbox一次排序一行，所以对于EX：

```
hi:what  
what's up?:nothing much 
```

是否有可能将其作为广告的每一行都是新的 if 语句，而不是将用户限制在一定数量？

编辑：我需要它像这样工作-
消息 | 回复
你好：怎么了？

当前代码的工作方式是：

```
//if message "hi" 
    if (command == "hi")
    {
        //return this message if message "hi"
        skype.SendMessage(msg.Sender.Handle, nick + " Says: " + "what");
    } 
```

相反，我想要一个富文本框在“：”处解析它，并使每一行成为一个新的 if 语句。

谢谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T21:18:35.967

我真的不确定你在问什么，但我的假设是你想要得到一个命令并且知道如何响应那个命令。

一个直接的方法是使用`Dictionary<string, string>`.

```
Dictionary<string, string> commandsAndResponses = new Dictionary<string, string>();
commandsAndResponses.Add("hi", "what");
// Add the rest

if (commandsAndResponses.ContainsKey(command))
{
    MessageBox.Show(command);
    skype.SendMessage(msg.Sender.Handle, nick + " Says: " +  commandsAndResponses[command]);
} 
```

**更新**

如果您从 RichTextBox 获取命令和响应作为“：”分隔的字符串列表，您可以使用它`string.Split()`来构建您的字典。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T21:17:46.210

我并不完全清楚你在问什么，但如果我理解正确，你有一个看起来像的字符串，`"command:some other stuff"`你想将这两个部分分开。如果我的理解是正确的，这很容易：

```
var originalString = "command:some other stuff";
var parts = originalString.Split(new[] {':'});
var command = parts[0]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T21:21:52.283

看起来您并不真正想要 if 语句。你可以这样做：

```
string[] lines = richTextBox1.Text.Split('\n'); // split on line
foreach(string ln in lines)
{
    string[] commands = ln.Split(':');
    if(commands.Length == 2) 
    {
        // first statement 
        skype.SendMessage(msg.Sender.Handle, string.Format("{0} Says: {1}",nick, command[0]); 
        // second statement
        skype.SendMessage(msg.Sender.Handle, string.Format("{0} Says: {1}",nick, command[1]);
    }
} 
```

这将遍历文本框中的每一行，然后处理命令的两个部分，如果它只有一个“：”。我将由您决定是否允许用户在文本中使用“：”。

# java - GraphML 节点着色 Prefuse

> ID：10019329
> 
> 赞同：1
> 
> 时间：2012-04-04T21:12:56.020
> 
> 标签：java, user-interface, prefuse, graphml

我有一个 prefuse 应用程序，它加载 GraphML 文件，其中节点具有“颜色”字符串属性。IE。

```
<node id="1">
  <data key="Color">Green</data>
<node> 
```

我想允许指定一系列预定义的颜色，并且我不想强制创建 GraphML 的程序使用所有颜色。

我认为这将是一项简单的任务（也许是？），但 prefuse 似乎动不动就和我作对。我提出了两个部分解决方案，但它们都有自己的问题。我的第一种方法是手动添加一个与“颜色”字符串相关的新整数属性，如下所示：

```
// Add new property to Graph g
g.addColumn("ColorNumber", int.class);

// Add property to each node   
Iterator<Node> it = g.nodes();
while(it.hasNext()) {
    Node n = it.next();
    String type = n.getString("Color");
    // Compare to an array of accepted types
    for(int i=0; i < colorMap.length; i++) {
        if(type.equalsIgnoreCase(colorMap[i])) {
            n.setInt("ColorNumber", i);
            break;
        }
    }
} 
```

然后，您可以使用 prefuse 的默认颜色管理器将这些整数链接到数组索引。

```
draw.add(new DataColorAction("graph.nodes", "ColorNumber", Constants.NUMERICAL, VisualItem.FILLCOLOR, fillArray)); 
```

这种方法的最大问题（除此之外不优雅）是当用户指定的唯一颜色少于三种时它会失败。如果指定了两种颜色，prefuse 使用颜色数组的第一个和最后一个元素。如果有的话，第一个。嗯。

我的另一个解决方案是手动设置每个节点的颜色。

```
// Iterate over VisualItems in Visualization vis
Iterator<VisualItem> v_it = vis.items("graph.nodes");
while(v_it.hasNext()) {
    VisualItem item = v_it.next();
    String type = item.getString("Color");
    for(int i=0; i < typeMap.length; i++) {
        if(type.equalsIgnoreCase(typeMap[i])) {
            item.setFillColor(fill[i]);
            item.setEndFillColor(fill[i]);
            break;
        }
    }
}
vis.repaint(); 
```

这适用于任意数量的颜色，但随机混乱。我认为 prefuse 在自己的线程上处理这些方法，由于某种原因，这些方法运行缓慢。对于较小的网络，我可以设置一个固定的等待时间（我还没有找到要使用的 Thread.join() 方法）。但是，这对于大型网络来说非常失败（阅读：我的电脑崩溃）。

所以你有它。对本应是微不足道的任务的不必要的大量时间投入。有人设法做到这一点吗？有没有简单的方法？请告诉我我想太多了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T13:09:03.787

我非常了解有关 prefuse 的此类经验：-/

第一种方法是正确的，但指定了错误的数据类型。颜色是一个`NOMINAL`变量。

```
DataColorAction color = new DataColorAction("graph.nodes", "Color",
    Constants.NOMINAL, VisualItem.FILLCOLOR, fillArray); 
```

该`ColorNumber`字段不是必需的。

您对第二种方法的结论是正确的。prefuse`ActionList`在单独的线程中运行它。因此，不应手动设置视觉属性。

如果需要更细粒度的代码，您可以扩展`DataColorAction`.

# java - 在 Android 应用中使用 Google 地图路线

> ID：10019331
> 
> 赞同：0
> 
> 时间：2012-04-04T21:13:18.453
> 
> 标签：java, android, google-maps, android-maps

我正在尝试开发一个 Android 应用程序来配合我的网络应用程序[www.scroutenise.com](http://www.scroutenise.com)，所以我制作了一个后端 API 来模仿返回的 Javascript 应用程序的行为

1.  谷歌地图路线结果
2.  一堆谷歌地图的地方

两者都采用 Google Maps API 提供的相同格式。太好了 - 使用 JS，我可以轻松地在 Google 地图上呈现它。

到目前为止，在我的应用程序中，我已经成功地与 API 通信并获得了完整的结果 - 请记住，API 是一个 WebSockets API，因此没有 URL - 我有一个谷歌地图显示。

我唯一找不到的文档或教程是如何在地图上显示方向。我确信我可以弄清楚如何放置标记，但方向方面是我的应用程序的一个非常重要的方面。甚至可能吗？谷歌是否有一些 Ts&C 来阻止人们制作与路线相关的应用程序？

感谢阅读，希望有人可以帮忙：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-05T01:40:40.290

在 Android 中，您可以通过使用 Intent 来指定行车路线：

```
String geoUriString = "http://maps.google.com/maps?" + 
   "saddr=" + srcLat + "," + srcLng + "&daddr=" + dstLat + "," + dstLng;

Intent mapCall = new Intent(Intent.ACTION_VIEW, Uri.parse(geoUriString)); 
```

然后根据您设备上安装的应用程序（导航、地图等），用户将能够从这些应用程序之一接收路线。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T21:55:50.043

我不明白你在这里所说的方向是什么意思，但你可以使用本文中描述的方式绘制路径。

[http://csie-tw.blogspot.com/2009/06/android-driving-direction-route-path.html](http://csie-tw.blogspot.com/2009/06/android-driving-direction-route-path.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-24T08:31:32.813

```
String uri= "https://www.google.com/maps/dir/" + 
    fromLat + "," + fromLng + "/" + toLat + "," + toLng;

Intent mapCall = new Intent(Intent.ACTION_VIEW, Uri.parse(uri)); 
```

或者只有“到”的位置，用户必须打开 GPS：

```
String uri= "https://www.google.com/maps/dir//" + toLat + "," + toLng;

Intent mapCall = new Intent(Intent.ACTION_VIEW, Uri.parse(uri)); 
```

# android - 屏幕关闭时检测硬件音量按钮点击

> ID：10019335
> 
> 赞同：2
> 
> 时间：2012-04-04T21:13:29.453
> 
> 标签：android

我编写了一个将硬件音量按钮用于其他目的的 Andoid 应用程序。

如果应用程序正在运行并且可见，它工作正常，但是当我关闭屏幕或让它超时时，按钮点击不会进入我的处理程序。

有谁知道屏幕关闭时是否有办法检测这些按钮点击？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T17:19:06.973

在屏幕关闭时继续检测此类事情的唯一方法是获取一个唤醒锁，它允许屏幕关闭，并且仍然让您的应用程序运行。但是，这会极大地消耗电池寿命，并且只能在绝对必要时使用。

在这种情况下，您将需要一个[PARTIAL_WAKE_LOCK](http://developer.android.com/reference/android/os/PowerManager.html#PARTIAL_WAKE_LOCK)。

# python - 渲染时出现 IntegrityError，不会采用 Autocomplete 值

> ID：10019337
> 
> 赞同：0
> 
> 时间：2012-04-04T21:13:30.263
> 
> 标签：python, django, autocomplete, django-views

说明：模板完美呈现自动完成......但是一旦我对其进行测试并单击“添加管理器”，它就会返回此错误：

```
Exception Type:     IntegrityError
Exception Value:    investments_managesfund.manager_id may not be NULL 
```

我想不通。因为在 POST 中，它发送的是 csrf_token 和 manager 用户名。

**添加经理以资助 VIEWs.py：**

```
@login_required
    def add_manager_to_fund(request, fund_id):
        fund = get_object_or_404(Fund, id=fund_id)
        if request.POST['from'] == 'fund':
            if 'omnibox' in request.POST:
                manager = ManagerProfile.objects.get(user=request.user)
                if not ManagesFund.objects.filter(verified=True, fund=fund, manager=manager).exists() and not request.user.is_staff:
                    return HttpResponseRedirect('/profile/fund/' + fund_id + '/')       
                try:
                    mp = ManagerProfile.objects.get(user__username=request.POST['omnibox'])
                    fundManager = ManagesFund.objects.get(manager=mp, fund=fund, from_user=True)
                    if not fundManager.verified:
                        fundManager.verified = True
                        fundManager.save()
                except ObjectDoesNotExist:
                    fundManager, created = ManagesFund.objects.get_or_create(manager__user__username=request.POST['omnibox'], fund=fund, from_user=False)
                    if created:
                        fundManager.save()
        return HttpResponseRedirect('/profile/edit/fund/' + fund_id + '/') 
```

**自动完成 VIEWs.py：**

```
@login_required
def managers(request):
    managers = ManagerProfile.objects.exclude(user=None)
    result = {}
    for manager in managers:
        result[manager.user.get_full_name()] = manager.user.username
    return HttpResponse(json.dumps(result)) 
```

自动完成视图传递用户名， add_manager_to_fund() 接受用户名。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T21:40:56.470

你真的应该重组你的代码。您在尝试中有两个调用可能会引发 ObjectDoesNotExist。我想其中一个肯定是，但我们不能说是哪个。除此之外，您似乎正在创建 ManagesFund 而不指定经理。这就是导致您的 IntegrityError 的原因。

如果您需要从用户名中查找经理（看起来您正在尝试）。提前为 get_or_create 做这件事。

# asp.net-mvc - 嵌套模型属性不适用于@Html.EditorFor？

> ID：10019339
> 
> 赞同：0
> 
> 时间：2012-04-04T21:13:40.520
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我对嵌套属性有一个奇怪的问题..不确定这是否是设计使然？当我做

```
@Html.EditorFor(model => model.Name) 
```

帖子有效并且模型被填充。当我改为

```
@Html.EditorFor(model => model.Detail.Name) 
```

model.Detail.Name 在帖子上为空。我需要做些什么特别的事情才能让它工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T05:56:20.863

那应该行得通。我无法复制。

模型：

```
public class ModelClass 
{ 
    public string Name { get; set; }
    public DetailClass Detail { get; set; }
}

public class DetailClass 
{
    public string Name { get; set; } 
} 
```

控制器：

```
public class HomeController : Controller
{
    public ActionResult Index()
    {
        var model = new ModelClass
        {
            Name = "model name",
            Detail = new DetailClass
            {
                Name = "detail name"
            }
        };
        return View(model);
    }

    [HttpPost]
    public ActionResult Index(ModelClass model)
    {
        return Content(
            string.Format(
                "name: {0}, detail.name: {1}", 
                model.Name, 
                model.Detail.Name
            )
        );
    }
} 
```

看法：

```
@model ModelClass

@using (Html.BeginForm())
{
    @Html.EditorFor(x => x.Name)
    @Html.EditorFor(x => x.Detail.Name)
    <button type="submit">OK</button>
} 
```

2 个属性已正确绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-08T21:07:21.333

如果您使用的是 EntityFramework，则应在查询中包含子项。

例如：

```
public MyClass getById(int id){
    return DbSet.Include(q => q.Detail).SingleOrDefault(q => q.Id == id);
} 
```

然后，当您调用模型时，将包含详细信息。所以你可以使用 Name.Detail.Name。

# asp.net-mvc-3 - 提供不带唯一参数名称的 URL

> ID：10019346
> 
> 赞同：0
> 
> 时间：2012-04-04T21:14:01.573
> 
> 标签：asp.net-mvc-3, url, maproute

有谁知道如何为具有多个参数名称的同一区域中的多个控制器提供路由映射？

我请求为每个具有唯一参数名称的控制器提供不带参数名称（仅值）的 URL（以避免歧义）

这可能吗？

我想在 URL 中得到这个输出：

```
/myAreaName1/mycontrollerName1/Edit/12/23
/myAreaName1/mycontrollerName2/Edit/someValue1/23 
```

使用这样的东西：

```
context.MapRoute(
                "mapRouteName1",
                "myAreaName1/{controller}/{action}/{customID}/{sustomID2}",
                new { controller = "mycontrollerName1", action = "Index", customID= UrlParameter.Optional, sustomID2= UrlParameter.Optional },
                new string[] { "Project.Areas.SomeArea.Controllers" }
            );

context.MapRoute(
                "mapRouteName1",
                "myAreaName1/{controller}/{action}/{customValue}/{sustomID3}",
                new { controller = "mycontrollerName2", action = "Index", customValue= UrlParameter.Optional, sustomID3= UrlParameter.Optional },
                new string[] { "Project.Areas.SomeArea.Controllers" }
            ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:22:02.173

您需要使用 RegEx 路由（我使用了一篇关于此的文章来指导我如何创建它一次......效果很好）。我过去曾将它们用于此类事情。我建议你不要这样做，因为它可能会导致错误。如果您添加正则表达式规则以根据所有数字进行捕获，并且如果参数具有非数字值，则它使用另一条路线...然后用户在该位置输入所有数字？我认为这将导致难以找到错误。

想要更好的东西吗？企业是否坚持让您使用这些 URL？您还可以考虑使用 URL 重写规则将其写入 MVC 框架之外的另一个路由，然后将路由更改为更独特。

# jquery - Safari 中的 jQuery 循环动画

> ID：10019348
> 
> 赞同：0
> 
> 时间：2012-04-04T21:14:07.407
> 
> 标签：jquery, arrays, jquery-animate

我有一个 for 循环附加到音频文件上的侦听器，该文件根据音频的时间位置显示（动画）对象。这一切都有效。问题是在 Safari 5.1.5 中只有第一个对象动画，其余的才变得可见（出现在屏幕上，没有动画）。我想知道是否有人以前看过这个，以及是否有解决方法。

```
function loadAudio() {

aud = document.getElementById("audio");
aud.src = xmlDoc.getElementsByTagName("cues")[0].getAttribute("audioURL");
aud.load();
aud.addEventListener("timeupdate", function(){
    for(var i = 0; i<cues.length; i++) {
    if(aud.currentTime >= cues[i].time && !cues[i].on) {
        q = cues[i].p;
        cues[i].on = true;
        //alert(q);
        $(q).css({opacity: 0.0, visibility: "visible"}).stop().animate({opacity: 1.0});

    }
}

});

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T11:32:54.263

我见过类似的东西，虽然与音频完全无关。如果您使用将最终的 .css() 调用放入它自己的 setTimeout() 中，可能会修复它。请参阅：[Safari：绝对定位的 DIV 在通过 DOM 更新时不会移动](https://stackoverflow.com/questions/9471038/safari-absolutely-positioned-divs-not-moving-when-updated-via-dom)

# c# - NHibernate 鉴别器

> ID：10019349
> 
> 赞同：0
> 
> 时间：2012-04-04T21:14:08.607
> 
> 标签：c#, nhibernate, hibernate-mapping

我有一个名为 DomainType 的表，其中包含几个名称/值对以及一个 Domain 列，该列标识属于一起的行。我有两个名为 PackageType 和 ComponentType 的 C# 类，它们都将它们的数据存放在同一个表中，它们的域值分别是“PackageType”和“ComponentType”。我以为我可以在我的 hbm.xml 文件中使用 NHibernate 鉴别器概念来定义这些，但每次我在我的应用程序中查询 PackageTypes 时，我都会从 DomainType 表中取回所有行。

在这一点上，我不确定我的映射逻辑/语法是否不好，或者我是否只是误解了鉴别器的概念。毕竟这些不是子类，所以也许这不是正确的策略（？）。

这是我的 PackageType 表的映射文件：

```
 <class name="PackageType" table="DomainType" 
    discriminator-value="PackageType" dynamic-update="true">

    <id name="Id" column="Id" type="Int32" unsaved-value="0">
       <generator class="identity" />
    </id>

    <discriminator column="Domain" type="AnsiString" not-null="true" />

    <property name="Description" column="Description" 
     type="AnsiString" length="100" not-null="true" />
 </class> 
```

下面是返回 DomainType 表中所有行的 C# 代码（即使是 Domain="ComponentType" 的行）：

```
IEnumerable<PackageType> rslt = GetSession().Query<PackageType>().ToList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T10:45:34.187

您需要定义 PackageType 和 ComponentType 都继承自的抽象类 DomainType，然后创建一个映射文档 DomainType.hbm.xml，其中包含两个子类的映射。这在 NHibernate 参考文档中被称为[Table-per-class-hierarchy 。](http://nhforge.org/doc/nh/en/index.html#inheritance-tableperclass%20Table-per-class-hierarchy)

```
<hibernate-mapping namespace=" ... " assembly=" ... ">
  <class name="DomainType" abstract="true" table="DomainType">
    <id name="Id" column="Id" type="Int32" unsaved-value="0">
       <generator class="identity" />
    </id>
    <discriminator column="Domain" type="AnsiString" not-null="true" />
    <subclass name="PackageType" discriminator-value="PACKAGE">
      <property .../>
    </subclass>
    <subclass name="ComponentType" discriminator-value="COMPONENT">
      <property .../>
    </subclass>
  </class>
</hibernate-mapping> 
```

然后，您可以为 PackageType 或 ComponentType 创建查询。

# javascript - NamedNodeMap 对象内的 Attr 对象索引问题

> ID：10019350
> 
> 赞同：0
> 
> 时间：2012-04-04T21:14:14.180
> 
> 标签：javascript, firefox, dom, google-chrome

标准对 NamedNodeMap 对象内的 Attr 对象的索引序列有何规定？

我在 Firefox 和 chrome 中得到反向序列。

```
<form action="test.php" method="post" name="test_form" id="test_form">

element = document.getElementById("test_form");
element.attributes.item(0);
element.attributes.item(1);
element.attributes.item(2);
element.attributes.item(3); 
```

火狐：

```
id="test_form"
name="test_form"
method="post"
action="test.php" 
```

铬合金：

```
action="test.php"
method="post"
name="test_form"
id="test_form" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T21:52:58.953

[文档](http://www.w3.org/TR/DOM-Level-2-Core/core.html#ID-1780488922)说：

> NamedNodeMaps 不以任何特定顺序维护。包含在实现 NamedNodeMap 的对象中的对象也可以通过序号索引访问，但这只是为了方便枚举 NamedNodeMap 的内容，并不意味着 DOM 指定了这些节点的顺序。

所以，没有排序。

# postgresql - 有哪些好的 postgresql 管理界面？

> ID：10019352
> 
> 赞同：1
> 
> 时间：2012-04-04T21:14:26.807
> 
> 标签：postgresql

目前我使用mysql和phpMyAdmin，我想知道postgresql是否有像phpmyadmin一样好的工具？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T21:36:19.523

[http://wiki.postgresql.org/wiki/Community_Guide_to_PostgreSQL_GUI_Tools](http://wiki.postgresql.org/wiki/Community_Guide_to_PostgreSQL_GUI_Tools)有一个列表

# asp.net - 如何在运行的应用程序 asp.net 上禁用验证？

> ID：10019358
> 
> 赞同：0
> 
> 时间：2012-04-04T21:14:51.657
> 
> 标签：asp.net, .net, validation, webforms

如何在应用程序运行时禁用控件的原因验证属性，因为我有一个单选按钮可以禁用控件，但这仍然会导致验证

我放了这个但没有用。

```
text.CausesValidation = false; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:25:03.677

如果您使用的是 asp 验证器，您将希望禁用*验证器*以跳过对其正在验证的控件的验证。

例如..如果你有

```
<asp:RequiredFieldValidator ID="RFV_Text" runat="server" ... >*</asp:RequiredFieldValidator> 
```

然后在服务器代码中，禁用

```
RFV_Text.enabled = false; 
```

# c# - 多线程 - 不能同时工作

> ID：10019365
> 
> 赞同：-4
> 
> 时间：2012-04-04T21:15:06.223
> 
> 标签：c#, multithreading

我想实现一个多线程系统（两个线程就可以了），我按照教程

```
 Thread t1 = new Thread(new ThreadStart(threadA));
    Thread t2 = new Thread(new ThreadStart(threadB));
    t1.Start();
    t2.Start(); 
```

输出对我来说是出乎意料的，因为它显示：“threadA”“threadA”“threadA”“threadB”“threadB”“threadB”。
我的代码有问题吗？非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T21:26:45.207

简而言之，线程在 CLR 和 OS 调度它们执行时执行，基于许多实现细节，这些细节因操作系统和 CPU 而异。

使用 Thread 类确实避免了 ThreadPool，这是 CLR 对线程调度的大部分控制级别，但 OS 内核仍然决定线程何时运行。在您的情况下，每个线程只是将三行输出到控制台，完全可以预期一个线程会在操作系统启动另一个线程之前完成。

但是，您永远无法*保证*线程运行的顺序。因此，如果您要循环此代码（使用 Join() 语句）并运行 100 次，您可能会看到“threadA”和“threadB”的几种不同排列，因为操作系统在不同时间调度了线程。如果两个 EU 完全同时可用，将会有很大的重叠；如果 threadA 被认为不如 threadB 重要，则 threadB 可能会在 threadA 开始之前完整执行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T21:27:54.140

发生这种情况是因为在您从`t1.Start()`到的时间里`t2.Start()`，您`t1`已经完成了。

如果你想看到你的代码有一点交替，请尝试这样的事情

```
Thread t1 = new Thread(
    new ThreadStart(()=>
    {
        for(int i = 0; i < 3; i++)
        {
            System.Console.WriteLine("ThreadA");    
            Thread.Sleep(3000)
        }
    }));
Thread t2 = new Thread(
    new ThreadStart(()=>
    {
        for(int i = 0; i < 3; i++)
        {
            System.Console.WriteLine("ThreadB");    
            Thread.Sleep(1000)
        }
    }));
t1.Start();
t2.Start(); 
```

它应该打印如下内容：

```
ThreadA
ThreadB
ThreadB
ThreadA
ThreadB
ThreadA 
```

但是，这仅表明您无法保证线程的任何顺序。

# android - 按下 android 按钮状态

> ID：10019367
> 
> 赞同：7
> 
> 时间：2012-04-04T21:15:14.093
> 
> 标签：android, button, background, state

我一直在关注一个教程，该教程解释了如何为具有不同状态的按钮使用背景，但它似乎不起作用：S

这是我的代码：

```
 <?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/boutonn" android:state_window_focused="false"/>
    <item android:drawable="@drawable/boutonnpousse" android:state_pressed="true"/>
    <item android:drawable="@drawable/boutonnpousse" android:state_focused="true"/>
    <item android:drawable="@drawable/boutonn" android:state_focused="false" 
    android:state_pressed="false" />

</selector> 
```

这是我放置在可绘制文件夹中的 xml 代码，这是使用这些按钮的活动的 xml 的一部分：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/backgrounddd"
    android:orientation="vertical" >

            <Button
                android:id="@+id/bNoteRemind"
                android:layout_width="100dp"
                android:layout_height="100dp"
                android:layout_gravity="center"
                android:background="@drawable/imagebutton1" /> 
    ... 
```

这是java类：

```
public class MenuPrincipal extends Activity {

    Button NoteRemind;          

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);

        //on lui associe le layout menuprincipal.xml
        setContentView(R.layout.menuprincipal);

        NoteRemind = (Button) findViewById(R.id.bNoteRemind);     

        // Si on choisit de rédiger une nouvelle task on va être rediriger sur l'activité NoteReminder

        NoteRemind.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub

                //On créé l'Intent qui va nous permettre d'afficher l'autre Activity
                //Mettez le nom de l'Activity dans la quelle vous êtes actuellement pour le premier parametre
                v.setPressed(true);

                Intent intent = new Intent(MenuPrincipal.this, NoteReminder.class);
                //Intent intent = new Intent(MenuPrincipal.this, Teste2.class);
                //On démarre l'autre Activity
                startActivity(intent);

            }
        }); .... 
```

该按钮显示良好，但是当我按下它时，它不会显示按下的图像：s 我不明白我做错了什么！

有人在某处看到错误吗？？？

* * *

我应该把这些线放在哪里？我已经把它们放在我的按钮 xml 中

```
 <Button
        android:id="@+id/bNoteRemind"
        android:layout_width="100dp"
        android:layout_height="100dp"
        android:layout_gravity="center"
        android:background="@drawable/imagebutton1"
        android：focusable="true"
        android:focusableInTouchMode="true" /> 
```

但是现在我的按钮背景更改为按下的图像，而我没有按下它：p并且它没有改变

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-06T02:16:26.573

是`Button`您唯一显示的内容`Activity`吗？如果是这样，那么当窗口加载时它将被聚焦（触发您的第三个项目`selector`），并且您将无法离开它。如果您只想在按下时更改，请删除第三行。当你在它的时候，删除第一行，因为当窗口没有聚焦时，按钮永远不会被按下。

实际上，我建议使用以下代码：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@drawable/boutonnpousse" android:state_pressed="true"/>
    <item android:drawable="@drawable/boutonn"/>
</selector> 
```

# css - 使用@font-face 时浏览器会下载哪些字体

> ID：10019369
> 
> 赞同：3
> 
> 时间：2012-04-04T21:15:21.147
> 
> 标签：css, font-face

@font-face 有点令人困惑，因为所有浏览器都无法决定要使用的单一文件格式。下面是我目前用来向网站添加 1 种新字体的方法，您可以看到有 4 个单独的字体文件，我知道每个文件都是因为某些浏览器支持不同的格式，但浏览器下载所有文件还是只下载 1 个它需要什么？

```
@font-face {
    font-family: 'Oswald';
    src: url('oswald-webfont.eot');
    src: url('oswald-webfont.eot?#iefix') format('embedded-opentype'),
         url('oswald-webfont.woff') format('woff'),
         url('oswald-webfont.ttf') format('truetype'),
         url('oswald-webfont.svg#OswaldRegular') format('svg');
    font-weight: normal;
    font-style: normal;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T22:07:04.297

我希望浏览器下载*它支持的所有字体，*而不是只应用最新的字体，就像其他 css 属性一样。

不过，我的期望似乎是错误的。在嵌入与您在上面提供的标记相同的字体的网站上，FF 只下载了 .woff 文件，即使它也支持 .ttf/.otf 。

仅供参考，[支持矩阵](http://caniuse.com/fontface)；个别格式链接到底部。

# sql - T-Sql（复杂？）查询

> ID：10019372
> 
> 赞同：3
> 
> 时间：2012-04-04T21:15:36.457
> 
> 标签：sql

我正在尝试进行查询，但找不到方法。

所以我有3张桌子

```
Table Card (card_id)

Table Level(leve_id, leve_desc)

Table CardDetails(cade_id, card_id, leve_id) 
```

所以问题来了：每张卡片都有一个详细信息列表。

我想要一个查询来计算每张卡的数量，即具有完全相同详细信息的卡的数量，不包括卡本身。这意味着相同的列表`leve_id`。

是否可以在普通的 t-sql 中实现它？

我希望我已经足够清楚，如果没有，我会尝试更好地解释我需要什么。

**编辑：**

目前我真的不需要知道它是哪张卡，但如果知道的话，它肯定会获得奖励积分。

编辑#2：让我们说表卡（card_id）1,2,3,4,5,6

```
Table level (leve_id, leve_desc)
(1, Level 1), (2,Level 2), (3,Level 3), (4,Level 4), (5, Level5), (6, Level6)

Table CardDetails (card_id, leve_id)
(1, 1), (1, 3), (1, 4), (2, 1), (2, 2), (3, 1)
(3, 3), (3, 4), (4, 5), (5, 1), (5, 2), (5, 3)
(5, 4), (5, 5), (5, 6), (6, 1), (6, 3), (6, 4) 
```

所以，结果应该是：

```
Card_id   Nbr_Cards
1    ..   2
2    ..   0
3    ..   2
4    ..   0
5    ..   0
6    ..   2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T21:27:59.933

如果我理解正确，你想要这样的东西

```
SELECT * 
FROM   cards c 
       INNER JOIN carddetails cd 
         ON c.card_id = cd.card_id 
       INNER JOIN (SELECT cade_id, 
                          leve_id 
                   FROM   carddetails 
                   GROUP  BY cade_id, 
                             leve_id 
                   HAVING COUNT (card_id) > 1)dups 
         ON cd.cade_id = dups.cade_id 
            AND cd.leve_id = dups.leve_id 
```

或者如果你喜欢 COUNT OVER

```
with dups as  (
SELECT 
   COUNT(CARD_ID)  OVER (PARTITION BY cade_id, leve_id) cardCount
   cade_id,
   leve_id
FROM  carddetails 
)
    SELECT * 
    FROM   cards c 
           INNER JOIN carddetails cd 
             ON c.card_id = cd.card_id 
           INNER JOIN  dups 
             ON cd.cade_id = dups.cade_id 
                AND cd.leve_id = dups.leve_id 
    WHERE cardCount > 1 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T21:34:32.257

如果我理解你的问题。
对于每张卡片，计算完全相等的详细信息的数量：

```
declare @CardDetails table (card_id int, leve_id int)

insert into @CardDetails values
(1, 1),         (1, 3), (1, 4), 
(2, 1), (2, 2), 
(3, 1),         (3, 3), (3, 4), 
(4, 5), 
(5, 1), (5, 2), (5, 3), (5, 4), (5, 5), (5, 6), 
(6, 1),         (6, 3), (6, 4)

select card_id,
       count(*) over(partition by leve_ids) - 1 as EqualCount
from 
  (
    select card_id,
           (select ','+cast(leve_id as varchar(10))
            from @CardDetails as C2
            where C1.card_id = C2.card_id
            order by C2.leve_id
            for xml path('')) as leve_ids
    from @CardDetails as C1
    group by card_id
  ) T
order by card_id 
```

结果：

```
card_id     EqualCount
----------- -----------
1           2
2           0
3           2
4           0
5           0
6           2 
```

# wordpress - wordpress 出现 500 内部服务器错误？

> ID：10019374
> 
> 赞同：2
> 
> 时间：2012-04-04T21:16:06.370
> 
> 标签：wordpress

我已经尝试过使用 php.ini memory=20MB 解决方案，但它不起作用。我将它上传到 wp-admin/ 文件夹下。

我不确定还有什么可以尝试的。帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T01:59:22.813

内存凸点不会进入 wp-admin 中的 .htaccess 文件。它进入 Web 根目录中的 .htaccess。使用 FTP 查找并删除您放入 wp-admin 的 .htaccess 文件。

然后忘记 .htaccess 文件并尝试在 wp-config.php 文件顶部附近添加以下行，在打开后几行 `<?php`

`define('WP_MEMORY_LIMIT', '64M');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-30T09:00:20.907

临时重命名插件目录为我解决了这个问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-08T23:31:02.417

内部服务器错误的另一个重要修复是尝试将新版本的 wp-admin 和 wp-includes 上传到您的站点。

这一步应该是不得已而为之，但如果您已经使用了上述解决方案，但仍然找不到有效的解决方案，那么值得一试。备份您的站点，然后从主站点下载新版本的 WordPress。

从 ZIP 文件中提取文件，然后打开提取的文件夹。在 FTP 客户端中打开站点的根目录，然后将 wp-admin 和 wp-includes 从新版本的 WordPress 上传到站点的目录，覆盖旧版本。

刷新客户端，然后刷新您的站点。如果错误消失，则可能是由损坏的核心文件引起的。如果您仍然看到该错误，您可能别无选择，只能联系您的房东。查看更多[WordPress 内部服务器错误修复](https://www.onlinetoolsexpert.com/how-to-fix-wordpress-500-internal-server-error)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-31T23:11:50.293

500 错误是内部服务器错误，有时可能是主机配置问题，但在 WordPress 中通常是致命的 PHP 错误。

首先，只需删除该 php.ini 文件 - 一些 Web 主机不允许您修改 PHP 设置，所以让我们先把它排除在外。

如果是服务器错误，请暂时将您的`.htaccess`文件重命名为其他名称（也将其从混合中删除）。此外，检查`error_log`文件系统中的文件，或主机控制面板中的错误日志。

如果这没有告诉您任何信息，则可能是 PHP 问题。通过将以下代码添加到您的 wp-config.php 文件来打开 WordPress 调试：

```
// Enable WP_DEBUG mode
define( 'WP_DEBUG', true );

// Enable Debug logging to the /wp-content/debug.log file
define( 'WP_DEBUG_LOG', true );

// Disable display of errors and warnings 
define( 'WP_DEBUG_DISPLAY', false );
@ini_set( 'display_errors', 0 );

// Use dev versions of core JS and CSS files (only needed if you are modifying these core files)
define( 'SCRIPT_DEBUG', true ); 
```

确保注释掉以下内容：

```
 define( 'WP_DEBUG', true ); 
```

现在，当您刷新页面并收到错误消息时，WordPress 会将所有 PHP 错误写入`wp-content/debug.log`. 检查该日志中是否存在致命的 PHP 错误 - 它会告诉您哪个文件导致了错误，通常是主题或插件文件。

知道原因后，重命名该主题或插件以暂时将其从 WordPress 中删除。那应该恢复正常功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-25T21:00:42.470

出现此问题是因为您的 php 没有任何 xml 或有已弃用的 xml 版本，因此如果您手动安装或更新您的 xml，问题将得到解决。如果您使用 Ubuntu，请尝试在终端中执行以下代码：

```
sudo apt-get install php-xml 
```

在此之后，您需要重新启动 apache 使其生效，为此执行命令：

```
sudo service apache2 restart 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-31T22:52:24.653

转到设置-> 永久链接，然后选择任何常用设置，然后保存。重新加载网站。一切都会好起来的。

然后将其重置为以前的常用设置，使其不会影响 URL。

# javascript - 使用 jQuery get(0) 索引暂停和播放多个 HTML5 视频？

> ID：10019379
> 
> 赞同：3
> 
> 时间：2012-04-04T21:16:32.033
> 
> 标签：javascript, jquery, html, video

我有一页有几个视频。可以单击缩略图来播放每个视频。问题在于，对于超过 2 个视频，单击第 3 个缩略图不会暂停第 2 个视频，因此我会同时播放 2 个视频。我还使用 a`fadeOut()`来切换每个视频的可见性，无论视频数量如何，这都可以正常工作。因此，我认为问题在于`get(0)`代码的一部分。

这是一个显示问题的 jsfiddle：http: [//jsfiddle.net/trpeters1/EyZdy/28/](http://jsfiddle.net/trpeters1/EyZdy/28/)

此外，这是一个更详细的代码块，应该可以清楚地说明问题：

```
$(function(){
      $('#video_1,#video_2,#video_3,#video_4,#video_5,#video_6').hide();

      $('.icon_1').click(function(){
            $('#video_2,#video_3,#video_4,#video_5,#video_6').fadeOut(function(){
                  $('#video_1').fadeIn();
            $('.video_2,.video_3,.video_4,.video_5,.video_6').get(0).pause();
            $('.video_2,.video_3,.video_4,.video_5,.video_6').get(0).currentTime = 0;
            $('.video_1').get(0).play();
            });
      });

      $('.icon_2').click(function(){
            $('#video_1,#video_3,#video_4,#video_5,#video_6').fadeOut(function(){
                  $('#video_2').fadeIn();
            $('.video_1,.video_2,.video_4,.video_5,.video_6').get(0).pause();
            $('.video_1,.video_2,.video_4,.video_5,.video_6').get(0).currentTime = 0;
            $('.video_2').get(0).play();
            });
      });

      $('.icon_3').click(function(){
            $('#video_1,#video_2,#video_4,#video_5,#video_6').fadeOut(function(){
                  $('#video_3').fadeIn();
            $('.video_1,.video_2,.video_4,.video_5,.video_6').get(0).pause();
            $('.video_1,.video_2,.video_4,.video_5,.video_6').get(0).currentTime = 0;
            $('.video_3').get(0).play();
            });
      });
}); 
```

和html：

```
<div id="video_1">
<div id="mediaplayer">cadillac</div>
    <video class="video_1" width="100%" height="100%" controls="controls">
        <source src="videos/cadillac_x264.mp4" type="video/mp4" />
    <object data="videos/cadillac_x264.mp4" width="100%" height="100%">
</object> 
</video>
</div>

<div id="video_2">
<div id="mediaplayer2">nike</div>
    <video class="video_2" width="100%" height="100%" controls="controls">
    <source src="videos/Nike_Pretty - Computer_x264.mp4" type="video/mp4" />
<object data="videos/Nike_Pretty - Computer_x264.mp4" width="100%" height="100%">
</object> 
</video>
</div>

<div id="video_3">
<div id="mediaplayer3">russian standard</div>
    <video class="video_3" width="100%" height="100%" controls="controls">
    <source src="videos/Russian_Standard.mp4" type="video/mp4" />
<object data="videos/Russian_Standard.mp4" width="100%" height="100%">
</object> 
</video>
</div> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-04T21:37:12.907

当您执行以下操作时：

```
$('.video_2,.video_3,.video_4,.video_5,.video_6').get(0) 
```

“get(0)”返回匹配选择器的第一个元素——在这种情况下，只是匹配“.video_2”的第一个元素。其余视频被忽略。要对所有选定的元素执行操作，请查看 jQuery 的“ [each()](http://api.jquery.com/each/) ”方法。此外，您可以通过执行以下操作将代码简化为更通用的方法：

```
<a href="#" class="video-thumbnail" data-video-id="video-1">Video 1</a>
<a href="#" class="video-thumbnail" data-video-id="video-2">Video 2</a>

<video id="video-1"> ... </video>
<video id="video-2"> ... </video> 
```

然后通过执行以下操作来连接 JS：

```
$('.video-thumbnail').on('click', function () {
    // Just go ahead and pause/reset all the video elements
    $('video').each(function () {
        this.pause();
        this.currentTime = 0;
    });

    $('#' + $(this).data('video-id')).get(0).play();
}); 
```

我刚刚从我的脑海中输入了这个，但希望它能让你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T21:46:18.303

感谢 P1aincloth3sM4n，我按照您所说的重置所有视频并制定更通用的解决方案，对于那些感兴趣的人，请参阅以下工作 jsfiddle：http: [//jsfiddle.net/trpeters1/EyZdy/52](http://jsfiddle.net/trpeters1/EyZdy/52)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-30T05:34:04.513

使用 JQUERY 在页面上仅播放一个 HTML5 视频元素的简单解决方案：

```
$(function() {
$("video").each(function() {
    this.pauseOthers = function(event) {
        $('video').addClass('stopvideo');
        $(this).removeClass('stopvideo');
        $('.stopvideo').each(function() {
            this.pause();
        });
    };
    this.addEventListener("play", this.pauseOthers.bind(this), false);
});
}); 
```

# c++ - 你能告诉我为什么这段代码会崩溃吗？

> ID：10019380
> 
> 赞同：2
> 
> 时间：2012-04-04T21:16:36.810
> 
> 标签：c++, class, function, pointers, crash

所以我很好奇以下代码崩溃的原因。将感谢帮助。

```
#include <iostream>
using namespace std;

class temp
{    
  public:

    temp(int i)
    {
        intPtr = new int(i);
    }

    ~temp()
    {
        delete intPtr;
    }

  private:
    int* intPtr;
};

void f (temp fInput)
{
    cout << "f called" << endl;
}

int main()
{
    temp x = 2;
    f(x);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T21:20:15.413

当 x 被传递时指针被复制（隐式复制构造函数）并且析构函数被调用两次（在函数返回之前和 main 返回之前），因此内存被删除了两次。

在此处使用`std::shared_ptr<int>`而不是原始 int 指针（假设您希望行为相同，即`int`从两个`temp`s 引用相同；否则，您自己实现复制构造函数、移动构造函数和赋值运算符）。

```
#include <memory>

class temp {    
public:
  temp(int i) : intPtr(std::make_shared<int>(i)) {

  }

private:
  std::shared_ptr<int> intPtr; // reference counting ftw
}; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T21:20:23.370

发生崩溃的原因是您通过的方式`x`。

在`f`函数作用域之后，`x`将调用 's destructure 并删除`intPtr`。

但是，这将删除仍在`main`. 因此，在`return 0`调用之后，它将尝试删除已经存在的内存，因为您在同一指针上调用了两次 delete。

要修复此错误，请更改

```
void f (temp fInput) 
```

至

```
void f (const temp& fInput) 
```

或者，您可以考虑使用[std::shared_ptr](http://en.cppreference.com/w/cpp/memory/shared_ptr)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-04-04T21:20:50.897

你违反[了三法则](http://en.wikipedia.org/wiki/Rule_of_three_%28C++_programming%29)

您维护一个指针成员并将对象的副本传递给函数`f`。因此，最终结果是您`delete`在同一个指针上调用了两次。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T21:21:03.650

您在这里遇到的问题是双重删除。因为您没有在这里定义任何复制构造函数，所以 C++ 很乐意为您这样做。该实现通过执行所有内容的浅拷贝来做到这一点。

```
f(x); 
```

此行通过创建副本`x`并将其传递给`f`. 此时有 2 个`temp`实例拥有一个`intPtr`成员。这两个实例都会删除该指针，这很可能是导致您崩溃的原因。

要解决此问题，您可以采取一些步骤

1.  使用用于共享的指针类型，例如`shared_ptr<T>`
2.  创建一个不可调用的复制构造函数，强制实例由 ref 传递

＃2的一个例子是

```
class temp {
  temp(const temp& other);
  temp& operator=(const temp& other);
public:
  // Same
}; 
```

现在该`f(x)`行根本无法编译，因为它无法访问必要的复制构造函数。它强制它改为重新定义`f`以防止复制。

```
void f(const temp& fInput) {
  ...
} 
```

# android - 如何使几种不同的屏幕配置映射到一小组布局，而不必复制我的布局 XML 的一部分？

> ID：10019386
> 
> 赞同：6
> 
> 时间：2012-04-04T21:17:07.480
> 
> 标签：android, android-layout, include, alias, dry

我的应用程序根据屏幕配置显示单窗格 UI 或两窗格 UI。在较小的屏幕上，纵向和横向都应该是一个窗格。在中型屏幕（“最小宽度”为 600dp 及以上的任何屏幕）上，横向可以很好地适应两窗格布局，但在纵向屏幕上，它应该使用单窗格布局。在较大的屏幕上，它应该在两个方向上使用双窗格布局。我还想支持 3.2+ 风格的限定符（如 sw600dp 和 sw720dp）以及旧的“大小桶”限定符（“xlarge”）。

最直接的方法是创建几个不同的 XML 布局文件，每个配置一个：

*   res/layout-sw600dp-land/main.xml
*   res/layout-sw600dp-port/main.xml
*   res/layout-sw720dp-land/main.xml
*   res/layout-sw720dp-port/main.xml
*   res/layout-xlarge-port/main.xml
*   res/layout-xlarge-land/main.xml
*   资源/布局端口/main.xml
*   资源/布局/main.xml

因此，这 8 个 XML 文件中有很多代码重复，它们基本上只描述了两种不同的布局。

我怎样才能做到这一点，而不必维护所有这些令人头疼的重复 XML 文件？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-04T21:18:39.350

您可以使用布局别名。与其在每个屏幕配置的 XML 文件中直接描述您的布局，不如在名为“onepane.xml”和“twopanes.xml”的两个 XML 文件中定义您的两个布局。这些文件放在 res/layout 中。

现在，您必须将这些布局映射到不同的屏幕配置，这就是“布局别名”技术派上用场的地方。对于每个屏幕限定符组合，在 res/values-X/layout.xml 中创建一个 XML 文件，其中 X 是限定符组合。在该文件中，根据需要声明一个指向 @layout/onepane 或 @layout/twopanes 的布局资源：

*res/values-sw600dp-land/layout.xml：*

```
<resources>
  <item name="main" type="layout">@layout/twopanes</item>
</resources> 
```

*res/values-sw600dp-port/layout.xml：*

```
<resources>
  <item name="main" type="layout">@layout/onepane</item>
</resources> 
```

对您的其他配置组合执行相同的操作，这样您就可以完成您正在寻找的内容：您可以将您的两个布局（一个窗格和两个窗格）映射到几个不同的屏幕配置，而无需复制您的布局。

有关这方面的更多信息，请查看 Android 培训中的“支持多个屏幕”课程：http: [//developer.android.com/training/multiscreen/screensizes.html#TaskUseAliasFilters](http://developer.android.com/training/multiscreen/screensizes.html#TaskUseAliasFilters)

# android - 时间不转换为正确的 int 以存储在 db 中

> ID：10019387
> 
> 赞同：0
> 
> 时间：2012-04-04T21:17:08.650
> 
> 标签：android, time

我正在连接两个编辑文本框。一个有日期，另一个有时间。然后我将它们更改为时间并将它们存储到数据库中。我运行了调试器，日期对象似乎是正确的，直到我将它转换为 int，然后它没有正确转换。这是我的代码

```
 Time userTime;
    userTime= new Time(date.getText().toString().concat(time.getText().toString()));

    int enteredTime = (int) ((userTime).toMillis(true) / 1000); 
```

UpDate：由于某种原因，所有信息都在 userTime 的时区下？任何人有任何想法为什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T21:18:47.273

```
int enteredTime = (int) ((userTime).toMillis(true) / 1000); 
```

将时间存储在 long 中总是比 int 更好。我想这可能是您看到错误时间的原因。

试试下面这样的事情：

```
 long enteredTime = (long) ((userTime).toMillis(true) / 1000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T21:33:56.873

您在哪里使用转换后的时间？大多数 Java 代码喜欢毫秒而不是秒，因此请尝试省略除以 1000。请确保在这种情况下使用 a`long`而不是 an 。`int`

# telerik-grid - Telerik MVC Grid，无法显示对象的数量。

> ID：10019388
> 
> 赞同：0
> 
> 时间：2012-04-04T21:17:19.790
> 
> 标签：telerik-grid, telerik-mvc

我有一个名为“AchFile”的实体，Ach 文件有“与它们关联的批次。当网格从操作中填充时，批次计数显示。我无法弄清楚如何在 Ajax 之后显示计数网格排序时发生的调用。而不是获取计数值，例如“2”，而是在列中显示“[object Object]，[object Object]”而不是 2。

```
 columns.Template(o => o.Batches.Count()).ClientTemplate("<span>"+"<#= Batches #>"+"</span>").Title("Batch Count"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-06T18:00:43.733

可以直接调用 use <#= Batches.Count #>

# eclipse - 使用 Eclipse 调试节点应用程序

> ID：10019389
> 
> 赞同：1
> 
> 时间：2012-04-04T21:17:21.960
> 
> 标签：eclipse, debugging, node.js

我遵循本[教程](https://github.com/joyent/node/wiki/Using-Eclipse-as-Node-Applications-Debugger)并让 Eclipse 识别我正在调试的程序。

但是，在设置断点并将应用程序引导到断点之后，应用程序似乎忽略了它。

代码继续愉快地进行，好像什么也没发生，我看不到我要查看的变量。

不幸的是，我不知道这里要包含哪些信息，所以如果您需要更多信息，请在评论中告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-11T15:50:37.133

你必须小心你正在做的事情。在eclipse中调试节点应用程序时有一些陷阱。以下是一些可能对您有所帮助的提示。

1.  开始你的应用程序`node --debug-brk your-script.js`
2.  在eclipse中启动调试器
3.  跳过 (F6) 前几个 require 语句，这些语句导入您要调试的代码。
4.  设置断点。（请确保您**没有**在当前正在编辑的源文件中设置断点。调试时，您的工作区中有一个“项目”，其中包含节点加载的所有脚本。在其中一些文件中设置断点。否则断点将被忽略。通常您希望在回调开始时设置断点。）
5.  然后恢复 (F8) 脚本，它将在它通过的第一个断点处暂停。

从那开始，直到第一次调试工作。之后，您可以尝试更多非常规的案例。

# asp.net-mvc - 使用 Razor 进行 Google 式分页

> ID：10019391
> 
> 赞同：0
> 
> 时间：2012-04-04T21:17:33.487
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我目前有显示总页数的分页功能，但我想知道如何让页面链接显示类似于 Google 搜索结果？本质上一次只显示 10 个总链接，如果当前页面大于 7，则显示的第一个链接将为 currentPageIndex - 5。

这是我拥有的当前 Razor/html，它显示的链接数等于总页数：

```
@for (int i = 0; i < Model.PageCount; i++)
{
    if (Model.CurrentPageIndex == i)
    {
    <li id="page@(i)" class="disabled"><a href="#">@(i + 1)</a></li>
    }
    else
    {
    <li id="page@(i)"><a href="/Search/@(i.ToString() + "?q=" + Model.SearchTerm)">@(i + 1)</a></li>
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:31:33.293

这似乎更像是一个逻辑问题，而不是一个剃刀问题。

```
@{
    int pagesDisplayed = 10;
    int firstPage = Model.CurrentPageIndex - pagesDisplayed / 2;
    if(firstPage < 0){
        firstPage = 0;
    }
}
@for (int i=firstPage; i <= (firstPage + pagesDisplayed); i++){
    if (Model.CurrentPageIndex == i)
    {
    <li id="page@(i)" class="disabled"><a href="#">@(i + 1)</a></li>
    }
    else
    {
    <li id="page@(i)"><a href="/Search/@(i.ToString() + "?q=" + Model.SearchTerm)">@(i + 1)</a></li>
    }
} 
```

# python - Django：找不到标签为 XYZ 的应用程序。您确定您的 INSTALLED_APPS 设置正确吗？

> ID：10019393
> 
> 赞同：5
> 
> 时间：2012-04-04T21:17:39.220
> 
> 标签：python, django

我正在尝试按照[此处](https://docs.djangoproject.com/en/1.1/intro/tutorial01/)的 Django 教程（适用于 v1.1） 。我遇到的问题是它无法识别我的示例测试应用程序。例如，我在 /home/user1234/rst 工作。我可以从那里成功运行服务器并创建一个应用程序。但是，如果我创建应用程序“xyz”，然后将“rst.xyz”附加到 settings.py 中的 installed_apps 列表，它似乎不起作用。我收到以下错误消息：

```
Error: App with label xyz could not be found. Are you sure your INSTALLED_APPS setting is correct? 
```

我确实看到有[Near duplicate question](https://stackoverflow.com/questions/2614358/apps-with-lable-xyz-could-not-be-found)，但这些建议似乎没有帮助。

我的 settings.py 文件包括：

```
INSTALLED_APPS = ( 
'django.contrib.auth',
'django.contrib.contenttypes',
'django.contrib.sessions',
'django.contrib.sites',
'rst.xyz', 
```

)

我已经确认 mysql 正在运行并且我可以连接到数据库。我也在同一台机器上运行 postresql 和 apache（我不确定这是否会导致错误）。

此外，这可能会有所帮助：

```
 python -c "import sys; print sys.path"
 ['', '/usr/lib/python2.6', '/usr/lib/python2.6/plat-linux2', '/usr/lib/python2.6/lib-tk', '/usr/lib/python2.6/lib-old', '/usr/lib/python2.6/lib-dynload', '/usr/lib/python2.6/dist-packages', '/usr/lib/pymodules/python2.6', '/usr/lib/pymodules/python2.6/gtk-2.0', '/usr/lib/python2.6/dist-packages/wx-2.8-gtk2-unicode', '/usr/local/lib/python2.6/dist-packages'] 
```

如果有人有任何建议，我很想听听他们的意见！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-03-16T03:22:11.637

好的，我有一个非常相似的问题，这可能看起来很愚蠢，但我花了几个小时试图解决它，然后才意识到我做错了什么。

我所做的是将应用程序放到错误的位置，而不是：

```
 INSTALLED_APPS = (
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'polls', 
```

)

我做了：

```
 MIDDLEWARE_CLASSES = (
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
    'polls', 
```

)

虽然当您阅读它时这似乎很明显，但我在网上发现的网站数量惊人，人们报告了相同的错误。我希望这可以节省我必须经历的所有麻烦。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T21:29:50.540

您添加到已安装应用程序的应用程序名称很可能只是`xyz`. 不是`project_dir.app_name`

并重申 jvc26 的要求。Django 1.1 相当简陋，你为什么从它开始而不是 1.4？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-01T09:54:15.687

在项目开始时，2 个目录由相同的名称创建（在我的情况下为 mysite），两个文件夹都有一个 setting.py 文件，因此您需要更改两个文件中的已安装应用程序设置。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-06T15:13:14.880

按照教程，我遇到了同样的错误。我的错误是在我的应用程序的 models.py 中，我将第一行从

```
from django.db import models 
```

到（在你的情况下）

```
from rst.db import models 
```

我的错误（除了第一次尝试使用 python）是假设“django.db”只是我项目的 sqlite3 数据库名称的占位符。要点是，将这行代码单独留在 models.py 中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-05T02:01:37.220

另一个可能有助于考虑的因素是，此错误消息也与设置文件中的数据库配置有关，因此请检查命名、引擎等是否与您的设置匹配。

# asp.net - x.509 证书 - 当主题以电子邮件开头时无法读取 CN

> ID：10019395
> 
> 赞同：0
> 
> 时间：2012-04-04T21:17:44.953
> 
> 标签：asp.net, x509certificate

我正在尝试`X509Store`通过 subjectName 从对象获取证书，`X509FindType.FindBySubjectName.`在调试时我能够在 store 对象内的 innerList 数组中看到正确的证书，但由于某种原因在尝试时无法实例化 X509CertificateCollection 对象按 SubjectName 查找证书。

```
X509Store store = new X509Store(StoreName.My, StoreLocation.LocalMachine);
store.Open(OpenFlags.ReadOnly);
X509CertificateCollection certs = store.Certificates.Find(X509FindType.FindBySubjectName, Vendor.CertName, true); 
```

我注意到主题以电子邮件地址属性开头，商店中的所有其他证书（我能够找到）都以证书名称 (CN) 开头。

主题示例：

```
E=someDude@theirSite.com, CN=Our Technology, L=Tampa, S=FL, C=US 
```

其他有效的证书如下所示：

```
CN=Some Certificate Authority, OU=Ecommerce, O=Company Inc, C=US 
```

如果主题以电子邮件属性开头，我是否应该做一些不同的事情来按主题名查找证书？如果没有，关于如何从证书存储中检索它的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T22:43:36.450

原来这是安装在个人证书文件夹中的根证书。将其移至根目录，然后使用`StoreLocation.Root`就可以了。

# ruby-on-rails - 在 routes.rb 中访问当前请求？

> ID：10019396
> 
> 赞同：2
> 
> 时间：2012-04-04T21:17:45.310
> 
> 标签：ruby-on-rails

我的 routes.rb 文件中有这个：

```
class SubdomainWww
  def self.matches?(request)  
    request.subdomain.start_with? "www."
  end

  def self.strip_www(subdomain)
    if subdomain.start_with? "www."
      subdomain.slice!(4..-1) 
    else
      subdomain
    end
  end
end

MyApp::Application.routes.draw do

  constraints(SubdomainWww) do
    match '*path', :to => redirect(:subdomain => SubdomainWww.strip_www(???))  
    match '/', :to => redirect(:subdomain => SubdomainWww.strip_www(???))  
  end
... 
```

如果这样做的目的是删除 www。对于子域（例如 www.sub.domain.tld 应重定向到 sub.domain.tld；子域稍后用于识别客户端）。我怎样才能替换'???' 以便将当前请求的子域（字符串）传递给函数 strip_www()？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-19T00:10:07.103

不知道这是否会起作用或有帮助，但我在使用带有 Devise 的 Cells 时遇到了同样的问题，其中 Devise current_* 方法需要存储在请求中的 env 和warden。我有一条通往单元格（控制器和视图）的路线，它为我呈现了单元格的视图。我将请求发送到单元控制器的方式是将 self 作为来自 route.rb 的请求传递。

```
match "/dashboard/widget/:name" => proc { |env|
  cell_name = env["action_dispatch.request.path_parameters"][:name]
  [ 200, {}, [ Cell::Base.render_cell_for(cell_name, :display, :request => self) ]]
} 
```

注意 :request => self。当您在路线中时， self 是 ActionDispatch::Request 对象本身。只是传递请求，你应该很好。

```
MyApp::Application.routes.draw do

  constraints(SubdomainWww) do
    match '*path', :to => redirect(:subdomain => SubdomainWww.strip_www(self))  
    match '/', :to => redirect(:subdomain => SubdomainWww.strip_www(self))  
  end
... 
```

# c# - 如何使用 LINQ 将数组对象转换为另一个？

> ID：10019399
> 
> 赞同：3
> 
> 时间：2012-04-04T21:18:06.047
> 
> 标签：c#, asp.net-mvc-3, linq

我有一个匿名对象列表，其中包含从 LINQ 查询派生的 C# 中的以下字段。

```
{ 
String category
decimal Jan
decimal Feb
decimal Mar
decimal Apr
decimal May
decimal Jun
decimal Jul
decimal Aug
decimal Sep
decimal Oct
decimal Nov
decimal Dec
} 
```

我如何创建一个对象列表，其中每个类别值都有一个字段（因此基本上每个月有 12 个对象一个对象（一月、二月、三月等）。

```
ExpectedResult {
string Month, 
decimal category1,
decimal category2,
decimal category3,
...
decimal categoryN
} 
```

所以结果将有 12 个 ExpectedResult 对象。不知道有多少类别/是个问题。任何快速的建议都会有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T21:50:33.820

您可以尝试 SelectMany() 方法：

```
anonymousList.SelectMany(x=>new[]{
                                    new {Cat=category, Month="Jan", Val=Jan}, 
                                    new {Cat=category, Month="Feb", Val=Feb}, 
                                    ... , 
                                    new {Cat=category, Month="Dec", Val=Dec}
                                 }); 
```

对于您的每个源匿名对象，此查询将生成一个包含 12 个新匿名对象的数组，然后这些数组（作为 Enumerables）将连接到一个大集合中。

为了避免以后比较字符串，请考虑在一年中的几个月内使用 Enum（不幸的是 .NET 没有内置的）：

```
public enum Month
{
   January = 1,
   February = 2,
   ...
   December = 12
}

...

anonymousList.SelectMany(x=>new[]{
                                    new {Cat=category, Month=Month.January, Val=Jan}, 
                                    new {Cat=category, Month=Month.February, Val=Feb}, 
                                    ... , 
                                    new {Cat=category, Month=Month.December, Val=Dec}
                                 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T22:31:53.907

从 KeithS 回答开始，您可以按月分组：

```
var results = from x in KeithsAnswer
              group x by x.Month into g
              select new { Month = g.Key, CategoryValues = g.Select(c => new { c.Month, c.Val }).ToArray()}; 
```

您可以将其直接传递给客户端进行处理，或者如果您确实需要上面指定的表单，您可以实现自己的`JavaScriptConverter`或使用动态/ExpandoObject 将值存储为属性。

# actionscript-2 - 如何使用 Actionscript 2 和三角函数显示完整的 360 度？

> ID：10019404
> 
> 赞同：0
> 
> 时间：2012-04-04T21:18:34.843
> 
> 标签：actionscript-2, distance, trigonometry, degrees

我正在创建一个使用三角函数来计算和显示动态文本框中的距离和度数的游戏。我正在计算光标与影片剪辑中心的距离。并且使用影片剪辑的中心，当我的光标在 swf 周围移动时，我试图计算并显示一个完整的 360º。我有游戏的距离部分工作，但显示度数的部分工作不正常。动态文本框仅从 90º 到 270º 显示。它不是从 270º 到 360º/0º 到 90º，而是从 270º 倒数到 90º。下面是我的动作脚本。我非常感谢任何帮助或建议。谢谢！

```
//Mouse and Dynamic Text Boxes-------------------------

Mouse.hide();

onMouseMove = function () {
feedback.text = "You are moving your mouse";
cursor._x = _xmouse;
cursor._y = _ymouse;
updateAfterEvent();
xmouse_value.text = Math.atan2((a), (b));
ymouse_value.text = Math.round(radians*180/Math.PI)
updateAfterEvent();  
};

Mouse.addListener(myListener);

//distance (RANGE)
_root.onEnterFrame = function () {
xmid = Stage.width/2;
ymid = Stage.height/2;

a = _root._ymouse-ymid;
b = _root._xmouse-xmid;
c = Math.sqrt(Math.pow(a, 2)+Math.pow(b, 2));
feedbacka.text = Math.round(a);
feedbackb.text = Math.round(b);
feedbackc.text = Math.round(c/30.4);

updateAfterEvent();  

var radians:Number;
var degrees:Number;

//Calculcate Radians
//Radians specify an angle by measuring the length around the path of the circle.
radians = Math.atan2((c), (b))

//calculate degrees
//the angle the circle is in relation to the center point
//update text box inside circle
radians_txt = Math.round(radians*360/Math.PI);
degrees_txt = Math.round(radians*180/Math.PI);

updateAfterEvent();  

//getting past 270 degrees

radians2_txt = Math.round(radians/Math.PI);
radians2_txt = Math.floor(radians + -270);

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T02:27:50.533

to 的参数`atan2`应该是两点之间的 delta-y 和 delta-x，但是您传递的是两点之间的距离和 delta-x。试试这个：

```
radians = Math.atan2(a, b); 
```

下一个问题是将弧度转换为度数。要将弧度转换为度数，您可以这样做：

```
degrees_txt = radians * 180 / Math.PI; 
```

请注意，`atan2`从之间返回`-Math.PI / 2`到`Math.PI / 2`。转换为度数时，此范围变为 -180 到 180。要转换为 0 到 360，如果结果为负，您可以将 360 添加到结果中：

```
if(degrees_txt < 0) degrees_txt += 360; 
```

# c# - Marshal.Copy/UnlockBits 挂起

> ID：10019410
> 
> 赞同：3
> 
> 时间：2012-04-04T21:18:50.367
> 
> 标签：c#, .net, wpf, graphics

用户选择图像的一部分进行剪切和粘贴操作。我创建了一个新位图，将所选部分粘贴到新图像中，擦除源数组并将其粘贴回旧图像中。工作，但至少有一半的时间挂起尝试读取或写入受保护的内存。这通常表明其他内存已损坏。

有什么想法或帮助吗？

```
public BitmapSource CutToNew(double left, double top, double width, double height, double pageWidth, double pageHeight)
{
    var destBmp = new Bitmap((int)pageWidth, (int)pageHeight);
    var g = Graphics.FromImage(destBmp);
    g.FillRectangle(new SolidBrush(Color.White), 0, 0, 
       (int)pageHeight, (int)pageWidth);
    g.Dispose();

    var croppedArea = new Rectangle((int)left, (int)top, (int)width, (int)height);
    BitmapData croppedSource = _bitmapImage.LockBits(croppedArea, 
          ImageLockMode.ReadWrite, BitmapImage.PixelFormat);
    var croppedDestArea = new Rectangle((int)left, (int)top, (int)width, (int)height);
    BitmapData croppedDest = destBmp.LockBits(croppedDestArea, 
          ImageLockMode.WriteOnly, BitmapImage.PixelFormat);

    // Create data array to hold bmpSource pixel data
    int stride = croppedSource.Stride;
    int numBytes = stride * (int)height;
    var srcData = new byte[numBytes];
    var destData = new byte[numBytes];

    Marshal.Copy(croppedSource.Scan0, srcData, 0, numBytes);
    //Tried creating a separate array in case that helped.
    Array.Copy(srcData, destData, srcData.Length);
    //Often hangs here with Attempted to read or write protected memory.
    Marshal.Copy(destData, 0, croppedDest.Scan0, numBytes);

    destBmp.UnlockBits(croppedDest);
    var retVal = new DocAppImage {BitmapImage = destBmp};
    destBmp.Dispose();

    //Blank the source area
    for (int y = 0; y < srcData.Length; y++)
        srcData[y] = 0xFF;

    Marshal.Copy(srcData, 0, croppedSource.Scan0, numBytes);
    _bitmapImage.UnlockBits(croppedSource);

    return retVal.bmpSource;
}

private Bitmap _bitmapImage;
public Bitmap BitmapImage
{
    get
    {
        if (_bitmapImage != null)
            return _bitmapImage;

        if (FileImage != null)
        {
            var stream = new MemoryStream(FileImage); //Fileimage=TIFF read from file.
            _bitmapImage = new Bitmap(stream);
            return _bitmapImage;
        }
        return null;
    }
    set
    {
        if (value != null)
        {

            ImageCodecInfo codecInfo = GetImageCodecInfo("TIFF");
             ... implementation to set the bitmap image. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T21:27:00.927

您可能想尝试`PixelFormat`在创建新对象时指定您的。

例如：

```
var destBmp = new Bitmap((int)pageWidth, (int)pageHeight, PixelFormat.Format24bppRgb); 
```

# certificate - 证书：扩展密钥用法的 OID 参考

> ID：10019412
> 
> 赞同：4
> 
> 时间：2012-04-04T21:18:56.037
> 
> 标签：certificate, x509certificate

是否有将 OID 映射到 Microsoft 文档中使用的术语（如“服务器身份验证”或“安全电子邮件”）的参考？

```
Server Authentication:    1.3.6.1.5.5.7.3.1
Client Authentication:    1.3.6.1.5.5.7.3.2
Secure Email:             1.3.6.1.5.5.7.3.4
Data Encipherment:        1.3.6.1.4.1.311.10.3.4
Key Encipherment:         ?
Digital Signature:  ? 
```

我正在使用这些 OID 通过 makecert.exe 生成测试证书。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-13T13:01:35.390

微软知识库中有一个支持文档：https://web.archive.org/web/20180608195005/https: [//support.microsoft.com/en-us/help/287547/object-ids-associated-with -微软密码学](https://web.archive.org/web/20180608195005/https://support.microsoft.com/en-us/help/287547/object-ids-associated-with-microsoft-cryptography)

由于 MSFT 不断翻转 URL 并丢弃信息，这里是一个废品：

```
Microsoft OID...................................1.3.6.1.4.1.311

Authenticode....................................1.3.6.1.4.1.311.2
     Software Publishing (with associated encoders/decoders)
        SPC_INDIRECT_DATA_OBJID                 1.3.6.1.4.1.311.2.1.4
        SPC_STATEMENT_TYPE_OBJID                1.3.6.1.4.1.311.2.1.11
        SPC_SP_OPUS_INFO_OBJID                  1.3.6.1.4.1.311.2.1.12
        SPC_PE_IMAGE_DATA_OBJID                 1.3.6.1.4.1.311.2.1.15
        SPC_SP_AGENCY_INFO_OBJID                1.3.6.1.4.1.311.2.1.10
        SPC_MINIMAL_CRITERIA_OBJID              1.3.6.1.4.1.311.2.1.26
        SPC_FINANCIAL_CRITERIA_OBJID            1.3.6.1.4.1.311.2.1.27
        SPC_LINK_OBJID                          1.3.6.1.4.1.311.2.1.28
        SPC_HASH_INFO_OBJID                     1.3.6.1.4.1.311.2.1.29
        SPC_SIPINFO_OBJID                       1.3.6.1.4.1.311.2.1.30

     Software Publishing (with NO associated encoders/decoders)
        SPC_CERT_EXTENSIONS_OBJID               1.3.6.1.4.1.311.2.1.14
        SPC_RAW_FILE_DATA_OBJID                 1.3.6.1.4.1.311.2.1.18
        SPC_STRUCTURED_STORAGE_DATA_OBJID       1.3.6.1.4.1.311.2.1.19
        SPC_JAVA_CLASS_DATA_OBJID               1.3.6.1.4.1.311.2.1.20
        SPC_INDIVIDUAL_SP_KEY_PURPOSE_OBJID     1.3.6.1.4.1.311.2.1.21
        SPC_COMMERCIAL_SP_KEY_PURPOSE_OBJID     1.3.6.1.4.1.311.2.1.22
        SPC_CAB_DATA_OBJID                      1.3.6.1.4.1.311.2.1.25
        SPC_GLUE_RDN_OBJID                      1.3.6.1.4.1.311.2.1.25  

     CTL for Software Publishers Trusted CAs    1.3.6.1.4.1.311.2.2
     (sub-subtree is defined for Software Publishing trusted CAs)
        szOID_TRUSTED_CODESIGNING_CA_LIST       1.3.6.1.4.1.311.2.2.1
        szOID_TRUSTED_CLIENT_AUTH_CA_LIST       1.3.6.1.4.1.311.2.2.2
        szOID_TRUSTED_SERVER_AUTH_CA_LIST       1.3.6.1.4.1.311.2.2.3

Time Stamping...................................1.3.6.1.4.1.311.3
(with Associated encoder/decoders)
        SPC_TIME_STAMP_REQUEST_OBJID            1.3.6.1.4.1.311.3.2.1

Permissions.....................................1.3.6.1.4.1.311.4

Crypto 2.0......................................1.3.6.1.4.1.311.10
     PKCS #7 ContentType Object Identifier for Certificate Trust List (CTL)
        szOID_CTL                               1.3.6.1.4.1.311.10.1
     Sorted CTL Extension
        szOID_SORTED_CTL                        1.3.6.1.4.1.311.10.1.1

     Next Update Location extension or attribute. Value is an encoded GeneralNames
        szOID_NEXT_UPDATE_LOCATION              1.3.6.1.4.1.311.10.2

     Enhanced Key Usage (Purpose)
        Signer of CTLs
        szOID_KP_CTL_USAGE_SIGNING              1.3.6.1.4.1.311.10.3.1

        Signer of TimeStamps
        szOID_KP_TIME_STAMP_SIGNING             1.3.6.1.4.1.311.10.3.2

     Can use strong encryption in export environment
        szOID_SERVER_GATED_CRYPTO               1.3.6.1.4.1.311.10.3.3
        szOID_SERIALIZED                        1.3.6.1.4.1.311.10.3.3.1

     Can use encrypted file systems (EFS)
        szOID_EFS_CRYPTO                        1.3.6.1.4.1.311.10.3.4
        szOID_EFS_RECOVERY                      1.3.6.1.4.1.311.10.3.4.1

     Can use Windows Hardware Compatible (WHQL)
        szOID_WHQL_CRYPTO                       1.3.6.1.4.1.311.10.3.5

     Signed by the NT5 build lab
        szOID_NT5_CRYPTO                        1.3.6.1.4.1.311.10.3.6

     Signed by and OEM of WHQL
        szOID_OEM_WHQL_CRYPTO                   1.3.6.1.4.1.311.10.3.7

     Signed by the Embedded NT
        szOID_EMBEDDED_NT_CRYPTO                1.3.6.1.4.1.311.10.3.8

     Signer of a CTL containing trusted roots
        szOID_ROOT_LIST_SIGNER                  1.3.6.1.4.1.311.10.3.9

     Can sign cross-cert and subordinate CA requests with qualified 
     subordination (name constraints, policy mapping, etc.)
        szOID_KP_QUALIFIED_SUBORDINATION        1.3.6.1.4.1.311.10.3.10

     Can be used to encrypt/recover escrowed keys
        szOID_KP_KEY_RECOVERY                   1.3.6.1.4.1.311.10.3.11

     Signer of documents
        szOID_KP_DOCUMENT_SIGNING               1.3.6.1.4.1.311.10.3.12

     Microsoft Attribute Object Identifiers
        szOID_YESNO_TRUST_ATTR                  1.3.6.1.4.1.311.10.4.1

     Microsoft Music
        szOID_DRM                               1.3.6.1.4.1.311.10.5.1

     Microsoft DRM EKU
        szOID_DRM_INDIVIDUALIZATION             1.3.6.1.4.1.311.10.5.2

     Microsoft Licenses
        szOID_LICENSES                          1.3.6.1.4.1.311.10.6.1
        szOID_LICENSE_SERVER                    1.3.6.1.4.1.311.10.6.2

     Microsoft CERT_RDN attribute Object Identifiers
        szOID_MICROSOFT_RDN_PREFIX              1.3.6.1.4.1.311.10.7
     Special RDN containing the KEY_ID. Its value type is CERT_RDN_OCTET_STRING.
        szOID_KEYID_RDN                         1.3.6.1.4.1.311.10.7.1

     Microsoft extension in a CTL to add or remove the certificates. The
     extension type is an INTEGER. 0 =&amp;gt; add certificate, 1 =&amp;gt; remove certificate
        szOID_REMOVE_CERTIFICATE                1.3.6.1.4.1.311.10.8.1

     Microsoft certificate extension containing cross certificate distribution
     points. ASN.1 encoded as follows:
         CrossCertDistPoints ::= SEQUENCE {
             syncDeltaTime               INTEGER (0..4294967295) OPTIONAL,
             crossCertDistPointNames     CrossCertDistPointNames
         } --#public--
              CrossCertDistPointNames ::= SEQUENCE OF GeneralNames

        szOID_CROSS_CERT_DIST_POINTS            1.3.6.1.4.1.311.10.9.1

     Microsoft CMC OIDs                         1.3.6.1.4.1.311.10.10

     Similar to szOID_CMC_ADD_EXTENSIONS. Attributes replaces Extensions.
        szOID_CMC_ADD_ATTRIBUTES                1.3.6.1.4.1.311.10.10.1

     Microsoft certificate property OIDs        1.3.6.1.4.1.311.10.11
     The OID component following the prefix contains the PROP_ID (decimal)
        szOID_CERT_PROP_ID_PREFIX               1.3.6.1.4.1.311.10.11.

     CryptUI                                    1.3.6.1.4.1.311.10.12
        szOID_ANY_APPLICATION_POLICY            1.3.6.1.4.1.311.10.12.1

Catalog.........................................1.3.6.1.4.1.311.12
        szOID_CATALOG_LIST                      1.3.6.1.4.1.311.12.1.1
        szOID_CATALOG_LIST_MEMBER               1.3.6.1.4.1.311.12.1.2
        CAT_NAMEVALUE_OBJID                     1.3.6.1.4.1.311.12.2.1
        CAT_MEMBERINFO_OBJID                    1.3.6.1.4.1.311.12.2.2

Microsoft PKCS10 OIDs...........................1.3.6.1.4.1.311.13
        szOID_RENEWAL_CERTIFICATE               1.3.6.1.4.1.311.13.1
        szOID_ENROLLMENT_NAME_VALUE_PAIR        1.3.6.1.4.1.311.13.2.1
        szOID_ENROLLMENT_CSP_PROVIDER           1.3.6.1.4.1.311.13.2.2

Microsoft Java..................................1.3.6.1.4.1.311.15

Microsoft Outlook/Exchange......................1.3.6.1.4.1.311.16
          Outlook Express                       1.3.6.1.4.1.311.16.4
          Used by OL/OLEXP to identify which certificate signed the PKCS # 7 message

Microsoft PKCS12 attributes.....................1.3.6.1.4.1.311.17
        szOID_LOCAL_MACHINE_KEYSET              1.3.6.1.4.1.311.17.1

Microsoft Hydra.................................1.3.6.1.4.1.311.18

Microsoft ISPU Test.............................1.3.6.1.4.1.311.19

Microsoft Enrollment Infrastructure..............1.3.6.1.4.1.311.20
        szOID_AUTO_ENROLL_CTL_USAGE             1.3.6.1.4.1.311.20.1
     Extension contain certificate type
        szOID_ENROLL_CERTTYPE_EXTENSION         1.3.6.1.4.1.311.20.2
        szOID_ENROLLMENT_AGENT                  1.3.6.1.4.1.311.20.2.1
        szOID_KP_SMARTCARD_LOGON                1.3.6.1.4.1.311.20.2.2
        szOID_NT_PRINCIPAL_NAME                 1.3.6.1.4.1.311.20.2.3
        szOID_CERT_MANIFOLD                     1.3.6.1.4.1.311.20.3

Microsoft CertSrv Infrastructure.................1.3.6.1.4.1.311.21
     CertSrv (with associated encoders/decoders)
        szOID_CERTSRV_CA_VERSION                1.3.6.1.4.1.311.21.1

Microsoft Directory Service.....................1.3.6.1.4.1.311.25
        szOID_NTDS_REPLICATION                  1.3.6.1.4.1.311.25.1

IIS.............................................1.3.6.1.4.1.311.30

Windows updates and service packs...............1.3.6.1.4.1.311.31
        szOID_PRODUCT_UPDATE                    1.3.6.1.4.1.311.31.1

Fonts...........................................1.3.6.1.4.1.311.40

Microsoft Licensing and Registration............1.3.6.1.4.1.311.41

Microsoft Corporate PKI (ITG)...................1.3.6.1.4.1.311.42

CAPICOM.........................................1.3.6.1.4.1.311.88
        szOID_CAPICOM                           1.3.6.1.4.1.311.88      Reserved for CAPICOM.
        szOID_CAPICOM_VERSION                   1.3.6.1.4.1.311.88.1    CAPICOM version
        szOID_CAPICOM_ATTRIBUTE                 1.3.6.1.4.1.311.88.2    CAPICOM attribute
        szOID_CAPICOM_DOCUMENT_NAME             1.3.6.1.4.1.311.88.2.1  Document type attribute
        szOID_CAPICOM_DOCUMENT_DESCRIPTION      1.3.6.1.4.1.311.88.2.2  Document description attribute
        szOID_CAPICOM_ENCRYPTED_DATA            1.3.6.1.4.1.311.88.3    CAPICOM encrypted data message.
        szOID_CAPICOM_ENCRYPTED_CONTENT         1.3.6.1.4.1.311.88.3.1  CAPICOM content of encrypted data.
Microsoft OID...................................1.3.6.1.4.1.311

Authenticode....................................1.3.6.1.4.1.311.2
     Software Publishing (with associated encoders/decoders)
        SPC_INDIRECT_DATA_OBJID                 1.3.6.1.4.1.311.2.1.4
        SPC_STATEMENT_TYPE_OBJID                1.3.6.1.4.1.311.2.1.11
        SPC_SP_OPUS_INFO_OBJID                  1.3.6.1.4.1.311.2.1.12
        SPC_PE_IMAGE_DATA_OBJID                 1.3.6.1.4.1.311.2.1.15
        SPC_SP_AGENCY_INFO_OBJID                1.3.6.1.4.1.311.2.1.10
        SPC_MINIMAL_CRITERIA_OBJID              1.3.6.1.4.1.311.2.1.26
        SPC_FINANCIAL_CRITERIA_OBJID            1.3.6.1.4.1.311.2.1.27
        SPC_LINK_OBJID                          1.3.6.1.4.1.311.2.1.28
        SPC_HASH_INFO_OBJID                     1.3.6.1.4.1.311.2.1.29
        SPC_SIPINFO_OBJID                       1.3.6.1.4.1.311.2.1.30

     Software Publishing (with NO associated encoders/decoders)
        SPC_CERT_EXTENSIONS_OBJID               1.3.6.1.4.1.311.2.1.14
        SPC_RAW_FILE_DATA_OBJID                 1.3.6.1.4.1.311.2.1.18
        SPC_STRUCTURED_STORAGE_DATA_OBJID       1.3.6.1.4.1.311.2.1.19
        SPC_JAVA_CLASS_DATA_OBJID               1.3.6.1.4.1.311.2.1.20
        SPC_INDIVIDUAL_SP_KEY_PURPOSE_OBJID     1.3.6.1.4.1.311.2.1.21
        SPC_COMMERCIAL_SP_KEY_PURPOSE_OBJID     1.3.6.1.4.1.311.2.1.22
        SPC_CAB_DATA_OBJID                      1.3.6.1.4.1.311.2.1.25
        SPC_GLUE_RDN_OBJID                      1.3.6.1.4.1.311.2.1.25

     CTL for Software Publishers Trusted CAs    1.3.6.1.4.1.311.2.2
     (sub-subtree is defined for Software Publishing trusted CAs)
        szOID_TRUSTED_CODESIGNING_CA_LIST       1.3.6.1.4.1.311.2.2.1
        szOID_TRUSTED_CLIENT_AUTH_CA_LIST       1.3.6.1.4.1.311.2.2.2
        szOID_TRUSTED_SERVER_AUTH_CA_LIST       1.3.6.1.4.1.311.2.2.3

Time Stamping...................................1.3.6.1.4.1.311.3
(with Associated encoder/decoders)
        SPC_TIME_STAMP_REQUEST_OBJID            1.3.6.1.4.1.311.3.2.1

Permissions.....................................1.3.6.1.4.1.311.4

Crypto 2.0......................................1.3.6.1.4.1.311.10
     PKCS #7 ContentType Object Identifier for Certificate Trust List (CTL)
        szOID_CTL                               1.3.6.1.4.1.311.10.1
     Sorted CTL Extension
        szOID_SORTED_CTL                        1.3.6.1.4.1.311.10.1.1

     Next Update Location extension or attribute. Value is an encoded GeneralNames
        szOID_NEXT_UPDATE_LOCATION              1.3.6.1.4.1.311.10.2

     Enhanced Key Usage (Purpose)
        Signer of CTLs
        szOID_KP_CTL_USAGE_SIGNING              1.3.6.1.4.1.311.10.3.1

        Signer of TimeStamps
        szOID_KP_TIME_STAMP_SIGNING             1.3.6.1.4.1.311.10.3.2

     Can use strong encryption in export environment
        szOID_SERVER_GATED_CRYPTO               1.3.6.1.4.1.311.10.3.3
        szOID_SERIALIZED                        1.3.6.1.4.1.311.10.3.3.1

     Can use encrypted file systems (EFS)
        szOID_EFS_CRYPTO                        1.3.6.1.4.1.311.10.3.4
        szOID_EFS_RECOVERY                      1.3.6.1.4.1.311.10.3.4.1

     Can use Windows Hardware Compatible (WHQL)
        szOID_WHQL_CRYPTO                       1.3.6.1.4.1.311.10.3.5

     Signed by the NT5 build lab
        szOID_NT5_CRYPTO                        1.3.6.1.4.1.311.10.3.6

     Signed by and OEM of WHQL
        szOID_OEM_WHQL_CRYPTO                   1.3.6.1.4.1.311.10.3.7

     Signed by the Embedded NT
        szOID_EMBEDDED_NT_CRYPTO                1.3.6.1.4.1.311.10.3.8

     Signer of a CTL containing trusted roots
        szOID_ROOT_LIST_SIGNER                  1.3.6.1.4.1.311.10.3.9

     Can sign cross-cert and subordinate CA requests with qualified
     subordination (name constraints, policy mapping, etc.)
        szOID_KP_QUALIFIED_SUBORDINATION        1.3.6.1.4.1.311.10.3.10

     Can be used to encrypt/recover escrowed keys
        szOID_KP_KEY_RECOVERY                   1.3.6.1.4.1.311.10.3.11

     Signer of documents
        szOID_KP_DOCUMENT_SIGNING               1.3.6.1.4.1.311.10.3.12

     Limits the valid lifetime of the signature to the lifetime of the certificate.
        szOID_KP_LIFETIME_SIGNING               1.3.6.1.4.1.311.10.3.13
        szOID_KP_MOBILE_DEVICE_SOFTWARE         1.3.6.1.4.1.311.10.3.14

     Microsoft Attribute Object Identifiers
        szOID_YESNO_TRUST_ATTR                  1.3.6.1.4.1.311.10.4.1

     Microsoft Music
        szOID_DRM                               1.3.6.1.4.1.311.10.5.1

     Microsoft DRM EKU
        szOID_DRM_INDIVIDUALIZATION             1.3.6.1.4.1.311.10.5.2

     Microsoft Licenses
        szOID_LICENSES                          1.3.6.1.4.1.311.10.6.1
        szOID_LICENSE_SERVER                    1.3.6.1.4.1.311.10.6.2

     Microsoft CERT_RDN attribute Object Identifiers
        szOID_MICROSOFT_RDN_PREFIX              1.3.6.1.4.1.311.10.7
     Special RDN containing the KEY_ID. Its value type is CERT_RDN_OCTET_STRING.
        szOID_KEYID_RDN                         1.3.6.1.4.1.311.10.7.1

     Microsoft extension in a CTL to add or remove the certificates. The
     extension type is an INTEGER. 0 => add certificate, 1 => remove certificate
        szOID_REMOVE_CERTIFICATE                1.3.6.1.4.1.311.10.8.1

     Microsoft certificate extension containing cross certificate distribution
     points. ASN.1 encoded as follows:
         CrossCertDistPoints ::= SEQUENCE {
             syncDeltaTime               INTEGER (0..4294967295) OPTIONAL,
             crossCertDistPointNames     CrossCertDistPointNames
         } --#public--
              CrossCertDistPointNames ::= SEQUENCE OF GeneralNames

        szOID_CROSS_CERT_DIST_POINTS            1.3.6.1.4.1.311.10.9.1

     Microsoft CMC OIDs                         1.3.6.1.4.1.311.10.10

     Similar to szOID_CMC_ADD_EXTENSIONS. Attributes replaces Extensions.
        szOID_CMC_ADD_ATTRIBUTES                1.3.6.1.4.1.311.10.10.1

     Microsoft certificate property OIDs        1.3.6.1.4.1.311.10.11
     The OID component following the prefix contains the PROP_ID (decimal)
        szOID_CERT_PROP_ID_PREFIX               1.3.6.1.4.1.311.10.11.

     CryptUI                                    1.3.6.1.4.1.311.10.12
        szOID_ANY_APPLICATION_POLICY            1.3.6.1.4.1.311.10.12.1

Catalog.........................................1.3.6.1.4.1.311.12
        szOID_CATALOG_LIST                      1.3.6.1.4.1.311.12.1.1
        szOID_CATALOG_LIST_MEMBER               1.3.6.1.4.1.311.12.1.2
        CAT_NAMEVALUE_OBJID                     1.3.6.1.4.1.311.12.2.1
        CAT_MEMBERINFO_OBJID                    1.3.6.1.4.1.311.12.2.2

Microsoft PKCS10 OIDs...........................1.3.6.1.4.1.311.13
        szOID_RENEWAL_CERTIFICATE               1.3.6.1.4.1.311.13.1
        szOID_ENROLLMENT_NAME_VALUE_PAIR        1.3.6.1.4.1.311.13.2.1
        szOID_ENROLLMENT_CSP_PROVIDER           1.3.6.1.4.1.311.13.2.2
        szOID_OS_VERSION                        1.3.6.1.4.1.311.13.2.3

Microsoft Java..................................1.3.6.1.4.1.311.15

Microsoft Outlook/Exchange......................1.3.6.1.4.1.311.16
      Used by OL/OLEXP to identify which certificate signed the PKCS # 7 message
        szOID_MICROSOFT_Encryption_Key_Preference  1.3.6.1.4.1.311.16.4

Microsoft PKCS12 attributes.....................1.3.6.1.4.1.311.17
        szOID_LOCAL_MACHINE_KEYSET              1.3.6.1.4.1.311.17.1

Microsoft Hydra.................................1.3.6.1.4.1.311.18
     License Info root
        szOID_PKIX_LICENSE_INFO                 1.3.6.1.4.1.311.18.1

     Manufacturer value
        szOID_PKIX_MANUFACTURER                 1.3.6.1.4.1.311.18.2

     Manufacturer Specfic Data
        szOID_PKIX_MANUFACTURER_MS_SPECIFIC     1.3.6.1.4.1.311.18.3

     OID for Certificate Version Stamp
        szOID_PKIX_HYDRA_CERT_VERSION           1.3.6.1.4.1.311.18.4

     OID for License Server to identify licensed product.
        szOID_PKIX_LICENSED_PRODUCT_INFO        1.3.6.1.4.1.311.18.5

     OID for License Server specific info.
        szOID_PKIX_MS_LICENSE_SERVER_INFO       1.3.6.1.4.1.311.18.6

     Extension OID reserved for product policy module - only one is allowed.
        szOID_PKIS_PRODUCT_SPECIFIC_OID         1.3.6.1.4.1.311.18.7
        szOID_PKIS_TLSERVER_SPK_OID             1.3.6.1.4.1.311.18.8

Microsoft ISPU Test.............................1.3.6.1.4.1.311.19

Microsoft Enrollment Infrastructure.............1.3.6.1.4.1.311.20
        szOID_AUTO_ENROLL_CTL_USAGE             1.3.6.1.4.1.311.20.1
     Extension contain certificate type
        szOID_ENROLL_CERTTYPE_EXTENSION         1.3.6.1.4.1.311.20.2
        szOID_ENROLLMENT_AGENT                  1.3.6.1.4.1.311.20.2.1
        szOID_KP_SMARTCARD_LOGON                1.3.6.1.4.1.311.20.2.2
        szOID_NT_PRINCIPAL_NAME                 1.3.6.1.4.1.311.20.2.3
        szOID_CERT_MANIFOLD                     1.3.6.1.4.1.311.20.3

Microsoft CertSrv Infrastructure................1.3.6.1.4.1.311.21
     CertSrv (with associated encoders/decoders)
        szOID_CERTSRV_CA_VERSION                1.3.6.1.4.1.311.21.1

     Contains the sha1 hash of the previous version of the CA certificate.
        szOID_CERTSRV_PREVIOUS_CERT_HASH        1.3.6.1.4.1.311.21.2

     Delta CRLs only. Contains the base CRL Number of the corresponding base CRL.
        szOID_CRL_VIRTUAL_BASE                  1.3.6.1.4.1.311.21.3

     Contains the time when the next CRL is expected to be published. This may be sooner than the CRL's NextUpdate field.
        szOID_CRL_NEXT_PUBLISH                  1.3.6.1.4.1.311.21.4

     Enhanced Key Usage for CA encryption certificate
        szOID_KP_CA_EXCHANGE                    1.3.6.1.4.1.311.21.5

     Enhanced Key Usage for key recovery agent certificate
        szOID_KP_KEY_RECOVERY_AGENT             1.3.6.1.4.1.311.21.6

     Certificate template extension (v2)
        szOID_CERTIFICATE_TEMPLATE              1.3.6.1.4.1.311.21.7

     The root oid for all enterprise specific oids
        szOID_ENTERPRISE_OID_ROOT               1.3.6.1.4.1.311.21.8

     Dummy signing Subject RDN
        szOID_RDN_DUMMY_SIGNER                  1.3.6.1.4.1.311.21.9

     Application Policies extension -- same encoding as szOID_CERT_POLICIES
        szOID_APPLICATION_CERT_POLICIES         1.3.6.1.4.1.311.21.10

     Application Policy Mappings -- same encoding as szOID_POLICY_MAPPINGS
        szOID_APPLICATION_POLICY_MAPPINGS       1.3.6.1.4.1.311.21.11

     Application Policy Constraints -- same encoding as szOID_POLICY_CONSTRAINTS
        szOID_APPLICATION_POLICY_CONSTRAINTS    1.3.6.1.4.1.311.21.12

        szOID_ARCHIVED_KEY_ATTR                 1.3.6.1.4.1.311.21.13   
        szOID_CRL_SELF_CDP                      1.3.6.1.4.1.311.21.14   

     Requires all certificates below the root to have a non-empty intersecting issuance certificate policy usage.
        szOID_REQUIRE_CERT_CHAIN_POLICY         1.3.6.1.4.1.311.21.15   
        szOID_ARCHIVED_KEY_CERT_HASH            1.3.6.1.4.1.311.21.16   
        szOID_ISSUED_CERT_HASH                  1.3.6.1.4.1.311.21.17   

     Enhanced key usage for DS email replication
        szOID_DS_EMAIL_REPLICATION              1.3.6.1.4.1.311.21.19    

        szOID_REQUEST_CLIENT_INFO               1.3.6.1.4.1.311.21.20   
        szOID_ENCRYPTED_KEY_HASH                1.3.6.1.4.1.311.21.21   
        szOID_CERTSRV_CROSSCA_VERSION           1.3.6.1.4.1.311.21.22        

Microsoft Directory Service.....................1.3.6.1.4.1.311.25
        szOID_NTDS_REPLICATION                  1.3.6.1.4.1.311.25.1

IIS.............................................1.3.6.1.4.1.311.30
        szOID_IIS_VIRTUAL_SERVER                1.3.6.1.4.1.311.30.1

Microsoft WWOps BizExt..........................1.3.6.1.4.1.311.43

Microsoft Peer Networking.......................1.3.6.1.4.1.311.44
     Subtrees for genaral use including pnrp, IM, and grouping
        szOID_PEERNET_GENERAL
        szOID_PEERNET_PNRP                      1.3.6.1.4.1.311.44.1
        szOID_PEERNET_IDENTITY                  1.3.6.1.4.1.311.44.2
        szOID_PEERNET_GROUPING                  1.3.6.1.4.1.311.44.3

     Property that contains the type of the certificate (GMC, GRC, etc.)
        szOID_PEERNET_CERT_TYPE                 1.3.6.1.4.1.311.44.0.1

     Type of the value in the 'other' name: peer name
        szOID_PEERNET_PEERNAME                  1.3.6.1.4.1.311.44.0.2

     Type : classifier
        szOID_PEERNET_CLASSIFIER                1.3.6.1.4.1.311.44.0.3

     Property containing the version of the certificate
        szOID_PEERNET_CERT_VERSION              1.3.6.1.4.1.311.44.0.4

     PNRP specific properties
        szOID_PEERNET_PNRP_ADDRESS              1.3.6.1.4.1.311.44.1.1
        szOID_PEERNET_PNRP_FLAGS                1.3.6.1.4.1.311.44.1.2
        szOID_PEERNET_PNRP_PAYLOAD              1.3.6.1.4.1.311.44.1.3
        szOID_PEERNET_PNRP_ID                   1.3.6.1.4.1.311.44.1.4

     Identity flags, placeholder
        szOID_PEERNET_IDENTITY_FLAGS            1.3.6.1.4.1.311.44.2.2

     Peer name of the group
        szOID_PEERNET_GROUPING_PEERNAME         1.3.6.1.4.1.311.44.3.1

     Group flags: placeholder
        szOID_PEERNET_GROUPING_FLAGS            1.3.6.1.4.1.311.44.3.2

     List of roles in the GMC
        szOID_PEERNET_GROUPING_ROLES            1.3.6.1.4.1.311.44.3.3

     List of classifiers in the GMC
        szOID_PEERNET_GROUPING_CLASSIFIERS      1.3.6.1.4.1.311.44.3.5

Mobile Devices Code Signing.....................1.3.6.1.4.1.311.45

CAPICOM.........................................1.3.6.1.4.1.311.88
     Reserved for CAPICOM.
        szOID_CAPICOM                           1.3.6.1.4.1.311.88      

     CAPICOM version
        szOID_CAPICOM_VERSION                   1.3.6.1.4.1.311.88.1

     CAPICOM attribute
        szOID_CAPICOM_ATTRIBUTE                 1.3.6.1.4.1.311.88.2

     Document type attribute   
        szOID_CAPICOM_DOCUMENT_NAME             1.3.6.1.4.1.311.88.2.1

     Document description attribute
        szOID_CAPICOM_DOCUMENT_DESCRIPTION      1.3.6.1.4.1.311.88.2.2

     CAPICOM encrypted data message.
        szOID_CAPICOM_ENCRYPTED_DATA            1.3.6.1.4.1.311.88.3

     CAPICOM content of encrypted data.
        szOID_CAPICOM_ENCRYPTED_CONTENT         1.3.6.1.4.1.311.88.3.1 
```

# vb.net - 等待进程

> ID：10019413
> 
> 赞同：2
> 
> 时间：2012-04-04T21:18:57.927
> 
> 标签：vb.net, process

在我的 VB.NET 应用程序中，我启动了一个应用程序并引入了 20 秒的等待延迟。但是对于加载第二个应用程序，时间会有所不同。是否可以有一个do while循环，类似于下图的结构：

```
Start the application1
do {
    sleep(2seconds)
}until(Application1 Window is loaded 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T21:33:16.593

你看了`Process.WaitForInputIdle()`吗？它一直在等待应用程序进入其用户界面的消息循环（创建一个窗口）。

**编辑：在**[此处](http://msdn.microsoft.com/en-us/library/8d7363e2.aspx)查看有关该主题的 MSDN 描述

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T21:34:12.787

您将面临的最大障碍是子进程如何传达它已准备好。确定是否加载了另一个进程的窗口充其量是不稳定的。如果您决定更确定的东西，它会更干净

*   创建特定的注册表项
*   将值写入预定文件
*   Windows 消息

一旦你决定了，那就是相当直接的循环

```
Dim span = TimeSpan.FromSeconds(20)
Thread.Sleep(span)
Do While Not IsProcessReady()
  Thread.Sleep(span)
Loop 
```

如前所述，您需要选择一种机制来“加载”通信，这将成为您的`IsProcessReady`功能

# c# - 通过代码加载页面的控件集合

> ID：10019415
> 
> 赞同：0
> 
> 时间：2012-04-04T21:19:19.700
> 
> 标签：c#, asp.net

我正在尝试编写一个方法来动态加载给定页面的控件集合，以便我可以遍历它并创建驻留在页面上的某些类型的控件的列表。这个想法是，对于从特定页面类继承的任何页面，我想编译一个具有某些属性的可编辑字段列表。这一切都发生在这些页面之外（在允许用户管理这些其他页面的不同页面上）。

我尝试了以下两种情况：

```
BasePage page = (BasePage)System.Web.Compilation.BuildManager.CreateInstanceFromVirtualPath(string.Format("~/Pages/{0}/Manage.aspx", type.ToString()), typeof(BasePage));

IHttpHandler handler = PageParser.GetCompiledPageInstance(string.Format("~/Pages/{0}/Manage.aspx", type.ToString()), Context.Server.MapPath(string.Format("~/Pages/{0}/Manage.aspx", type.ToString())), HttpContext.Current);
BasePage page = handler as BasePage; 
```

在这两种情况下，页面变量都已启动，但控件集合为空白，可能是因为这两种方法都只加载代码隐藏而不是标记。如何动态加载页面的控件集合？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T21:32:41.957

我不会弄乱页面生命周期。让 ASP.NET 自己管理控件层次结构，并使用一些递归逻辑来检查页面上的控件：

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
    {
        FindPanelControls(Page);
    }
}

private void FindPanelControls(Control ctrl)
{
    if (ctrl.HasControls())
    {
        foreach (var childCtrl in ctrl.Controls.OfType<WebControl>())
        {
            //check for certain attributes
            if (childCtrl is Panel)
                Response.Write(childCtrl.ID);

            //recursively call the function for this control
            FindPanelControls(childCtrl);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T21:32:54.297

你把它复杂化了；只需递归遍历 Page.Controls 集合并检查您感兴趣的控件类型。看看这些较早的问题：

[ASP.Net / C#，循环浏览页面上的某些控件？](https://stackoverflow.com/questions/5122987/asp-net-c-loop-through-certain-controls-on-a-page)

[循环访问 asp.net 网页上的所有控件](https://stackoverflow.com/questions/4259850/loop-through-all-controls-on-asp-net-webpage)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-16T05:33:33.340

我遇到了完全相同的要求，即需要在运行时从页面 B 评估页面 A 的控件。

在页面的整个生命周期中运行页面还需要一个额外的步骤。我们只需要调用 Page.ProcessRequest() 方法。[Page.ProcessRequest 方法 (MSDN)](http://htmlagilitypack.codeplex.com/)。该方法对 Intellisense 隐藏。

在此之后，您将能够访问页面中的控件：

```
Page page = (Page)BuildManager.CreateInstanceFromVirtualPath("~/MyPage.aspx", typeof(Page));
page.ProcessRequest(HttpContext.Current); 
```

如果您的页面有母版页，您将需要深入了解母版页的占位符。

请务必注意微软的言论：

> “你不应该调用这个方法。”
> 
> “此 API 支持 .NET Framework 基础结构，**不打算直接从您的代码中使用。** ”

我还不知道这样做是否有任何不利影响。

**编辑**：在一个页面中执行一个页面会导致无数的问题，所以我朝一个稍微不同的方向走。

使用[HTML Agility Pack](http://htmlagilitypack.codeplex.com/)，我们可以很容易地加载 *.aspx 文件并递归遍历其节点。如果我们想查找页面上的所有 asp 按钮，例如：

```
private static void FindAllButtonControls(HtmlNodeCollection htmlNodeCollection, List<HtmlNode> controlNodes)
{
    foreach (HtmlNode childNode in htmlNodeCollection)
    {
        if (childNode.Name.Equals("asp:button"))
        {
            controlNodes.Add(childNode);
        }
        else
        {
            FindAllButtonControls(childNode.ChildNodes, controlNodes);
        }
    }
}

public static List<HtmlNode> FindButtonControlsAtVirtualPath(String path)
{
    HtmlAgilityPack.HtmlDocument aspx = new HtmlAgilityPack.HtmlDocument();

    aspx.OptionFixNestedTags = true;
    aspx.Load(HttpContext.Current.Server.MapPath(path));

    List<HtmlNode> controlNodes = new List<HtmlNode>();
    FindAllButtonControls(aspx.DocumentNode.ChildNodes, controlNodes);

    return controlNodes;
} 
```

# ios - iOS 上的 PhoneGap 会话（cookie）

> ID：10019418
> 
> 赞同：10
> 
> 时间：2012-04-04T21:19:40.873
> 
> 标签：ios, jquery-mobile, cordova, https, session-cookies

在服务器上，我们有一组 JSON API。

有一种登录方法可以对用户进行身份验证并创建用户会话。对 API 上其他方法的后续调用假定用户已通过身份验证。

在客户端，我们有 PhoneGap 和 jQuery mobile。我们使用 ajax 调用与服务器通信。

在 Android 会话管理上是可以的，但在 iOS 上，登录后会话 cookie 似乎没有在下次调用时发回（或根本不被接受），并且调用在服务器上失败，就好像用户没有经过身份验证一样。

在同一设备上从 Safari 进行测试时，一切正常。

相同的行为在装有 iOS 5.0 的 iPad 2 和装有 iOS 5.1 的 iPhone 4S 上。

任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T08:49:33.653

问题出在 UserAgent 字符串上。ASP.NET 需要配置为接受 Mozilla/iOS。请参阅[使用 iPhone UIWebView 时的 Asp.Net 表单身份验证](https://stackoverflow.com/questions/4158550/problem-with-asp-net-forms-authentication-when-using-iphone-uiwebview)

# scala - Play Framework - 使用参数重定向

> ID：10019420
> 
> 赞同：15
> 
> 时间：2012-04-04T21:20:04.887
> 
> 标签：scala, playframework, playframework-2.0

我试图弄清楚如何使用 Scala 在 Play (2.0) 中的控制器操作中进行重定向。

重定向使用

```
Redirect(routes.Application.index) 
```

工作得很好。

我无法从文档、API 或 Google 中弄清楚如何向调用添加参数。

我来自 Grails，这可以很容易地完成，如下所示：

> 重定向操作：“index”，参数：[“key”：“value”]。

我发现的唯一方法是使用字符串 url 和查询字符串调用 Redirect，这看起来很尴尬。

基本上我想以某种方式使用 Redirect(Call) ，但我不知道如何使用反向路由创建 Call 对象。

我错过了什么/没有在 Play/Scala 中得到这个概念吗？

提前致谢！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-04T21:38:32.203

埃卢

路由只是一个函数，所以你可以像往常一样传递参数：

```
// Redirect to /hello/Bob
def helloBob = Action {
    Redirect(routes.Application.hello("Bob"))    
} 
```

这个片段来自[http://www.playframework.org/documentation/2.0/ScalaRouting](http://www.playframework.org/documentation/2.0/ScalaRouting)（在底部）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-01T06:37:05.567

您还可以避免在控制器中为此创建另一个函数。在您的路线配置中，您可以简单地添加如下内容：

```
 GET  /google  @controllers.Default.redirect(to = "http://google.com") 
```

# iphone - 使用 Storyboard 在 UISplitViewController 中的 Master 和 Detail 之间传递值

> ID：10019422
> 
> 赞同：4
> 
> 时间：2012-04-04T21:20:21.580
> 
> 标签：iphone, objective-c

我在 Customer.h 文件中定义了协议，如下所示：

```
@class Customer; 
@protocol CustomerDelegate <NSObject>

-(void) didSelectCustomer:(Customer *) customer; 

@end

@interface Customer : NSObject
{

}

@property (nonatomic,copy) NSString *name; 
@property (nonatomic,copy) NSString *occupation; 

@end 
```

MasterViewController（左侧）调用 didSelectCustomer 方法，如下所示：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    Customer *selectedCustomer = [customers objectAtIndex:[indexPath row]];
    [self.delegate didSelectCustomer:selectedCustomer]; 
} 
```

现在，我需要告诉 DetailViewController（右侧）做某事。DetailViewController 符合 CustomerDelegate 协议。

```
@interface DetailViewController : UIViewController<UISplitViewControllerDelegate,CustomerDelegate>
{

}

-(void) didSelectCustomer:(Customer *)customer
{
    NSLog(@"sssdasdasdasd");
} 
```

didSelectCustomer 方法永远不会被调用。我想我需要设置 masterViewController.delegate = self 但我不确定在哪里设置这个东西。

**更新 1：**

我在 DetailViewController 中添加了 MasterViewController 的实例，但它不起作用：

```
- (void)viewDidLoad
{
    [super viewDidLoad];    

    MasterViewController *master = [[MasterViewController alloc] init];
    master.delegate = self; 
} 
```

**解决方案：**

在 AppDelegate 中：

```
 else 
    {
        UISplitViewController *splitViewController = (UISplitViewController *) self.window.rootViewController; 
        splitViewController.delegate = [splitViewController.viewControllers lastObject];

        UINavigationController *navigationController = [splitViewController.viewControllers lastObject];
       // splitViewController.delegate = (id)navigationController.topViewController;

        DetailViewController *detail =(DetailViewController *) [splitViewController.viewControllers lastObject];

        UINavigationController *masterNavigationController = [splitViewController.viewControllers objectAtIndex:0];

        MasterViewController *master = (MasterViewController *)masterNavigationController.topViewController;

        master.delegate = detail; 
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T21:32:26.133

您永远不会明确地将自己声明为 Consumer 类的委托。仅仅符合它不会削减它。通过创建 Consumer 的实例在 -viewDidLoad 中声明它，可能像这样：

```
-(void)viewDidLoad {
    Consumer *consumer = [[Consumer alloc]init];
    [consumer setDelegate:self];
} 
```

您也没有在 Consumer 中为您的委托对象声明属性，因此它永远无法真正被访问。首先这样做：

```
@class Customer; 
@protocol CustomerDelegate <NSObject>

-(void) didSelectCustomer:(Customer *) customer; 

@end

@interface Customer : NSObject
{

}

@property (nonatomic,copy) NSString *name; 
@property (nonatomic,copy) NSString *occupation; 
@property (weak) id <CustomerDelegate> delegate; //use assign or __unsafe_unretained if targeting <5.0.

@end 
```

您可以检查您的课程是否符合您的协议，如下所示：

```
if (![delegate conformsToProtocol:@protocol(CustomerDelegate)]) {
    [NSException raise:@"Delegate Exception"
                format:@"Parameter does not conform to CustomerDelegate protocol at line %d", (int)__LINE__];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-20T08:42:30.110

拆分视图控制器的最后一个对象。

此对象返回一个 UI 导航控制器。

你知道，那么你可以自己做。

# php - 将数组的任何或所有部分匹配到 mysql

> ID：10019424
> 
> 赞同：1
> 
> 时间：2012-04-04T21:20:23.930
> 
> 标签：php

我有一个爆炸的搜索字符串，我需要查看它的任何或所有部分是否与 mysql DB 表中的条目匹配。

如果用户搜索“pour house greensboro”之类的内容，则“pour house”将匹配表中的条目。但是搜索也可以是“$ 1 beer pour house greensboro，或者其他类似的东西，并且以任何顺序，所以我需要将搜索字符串的每个部分放在一起并检查它是否与数据库中的内容匹配

所以，如果分解字符串的部分只是数字，那么我需要像这样检查它：
0 + 1 + 2 + 3 + 4
0 + 1 + 2 + 3
0 + 1 + 2
0 + 1
0
1 + 2 + 3 + 4
1 + 2 + 3
1 + 2
1
2 + 3 + 4
2 + 3
2
3 + 4
3
4

字符串可能多于或少于 5 个部分

有什么方法可以轻松做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T19:55:39.013

我想出了如何做到这一点，直到现在才想到更新这个......

```
(for $i=0; $i < count($search_string); $i++){
    $output = '';
    (for $a=$i; $a < count($search_string); $a++){
        $output = $output." ".$search_string[$a];
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T21:28:54.460

虽然 %LIKE% 会起作用，但它会很慢。您可能想改用 MySQL 的全文搜索功能。只是谷歌一些教程:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T21:25:19.580

好吧，您总是可以将分解后的字符串放在一个数组中，并在数据库中为每个数组值进行查询搜索。即 select * from table where data = array[$x];

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T21:27:10.600

使用“%LIKE%”：

```
SELECT *
  FROM MyTable
 WHERE MyField LIKE '%SearchKeyword1%'
    OR MyField LIKE '%SearchKeyword2%'
    OR MyField LIKE '%SearchKeyword3%'
... 
```

# spring - Spring @Transactional 不起作用

> ID：10019426
> 
> 赞同：23
> 
> 时间：2012-04-04T21:20:30.467
> 
> 标签：spring, spring-mvc, spring-transactions, transactional

我之前有一篇关于这个问题的帖子已解决。但是，自从使用自动连接的 bean 和更少的 XML 配置重建项目后，我发现我正在重新审视这个问题。我遵循了我以前的项目实现这一点的方式，但它不起作用。有人可以帮我解释为什么或我应该改变什么来使它工作吗？

我故意在插入用户详细信息方法中使用不存在的表名来故意抛出异常。但是，插入用户和插入用户角色的语句不会回滚。请帮忙。

* * *

我目前的注册设计是这样的。

*servlet.xml*的一部分：

```
<context:component-scan base-package="com.doyleisgod.golfer.controllers"/>
<context:component-scan base-package="com.doyleisgod.golfer.dao"/>
<context:component-scan base-package="com.doyleisgod.golfer.services"/>
<context:component-scan base-package="com.doyleisgod.golfer.validators"/> 
```

*应用程序上下文* 的一部分：

```
<context:annotation-config />
<tx:annotation-driven />    

<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
<property name="driverClassName" value="${jdbc.driverClassName}"/>
<property name="url" value="${jdbc.url}"/>
<property name="username" value="${jdbc.username}"/>
<property name="password" value="${jdbc.password}"/>
</bean>

<bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="dataSource"/>
</bean> 
```

注册*控制器*：

```
package com.doyleisgod.golfer.controllers;

import javax.validation.Valid;

import org.apache.commons.logging.Log;
import org.apache.commons.logging.LogFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.WebDataBinder;
import org.springframework.web.bind.annotation.InitBinder;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import com.doyleisgod.golfer.formdata.RegistrationForm;
import com.doyleisgod.golfer.services.IRegistrationService;
import com.doyleisgod.golfer.validators.RegistrationFormValidator;

/**
 * Description: Registration controller provides and processes the registration form.
 * @author Chris Doyle
*/
@Controller
@RequestMapping("/registration.htm")
public class RegistrationController {
    protected final Log logger = LogFactory.getLog(getClass());
    @Autowired private IRegistrationService iRegistrationService;
    @Autowired private RegistrationFormValidator registrationFormValidator;

    // sets a customer validator for the registration form
    @InitBinder
    protected void initBinder(WebDataBinder binder) {
        binder.setValidator(registrationFormValidator);
    }

    // Description: Method called by a get request to the registration controller. Returns the
    @RequestMapping(method=RequestMethod.GET)
    public String registration (Model model){
        model.addAttribute(new RegistrationForm());
        return "registration";
    }

     // Description: Method called by a post request to the registration controller. Method calls validation on the registration form using custom validator and returning 
     // any errors back to the user. 
    @RequestMapping(method=RequestMethod.POST)
    public String processRegistration (@Valid RegistrationForm registrationForm, BindingResult bindingResult, Model model){
        logger.info("Received the following registration form details");
        logger.info(registrationForm.toString());

        if (bindingResult.hasErrors()) {
            logger.warn("Registration Validation Failed");
            model.addAttribute("validationError", "Please correct the fields marked with errors");
            return "registration";
        }

        try {
            iRegistrationService.registerUser(registrationForm);
        } catch (Exception e) {
            logger.error("An Exception has occured processing the registration form");
            model.addAttribute("exceptionError", "An exception has occured, please try again.");
            e.printStackTrace();
            return "registration";
        }

        return "redirect:login.htm?registration=sucessful";
    }
} 
```

注册*服务*：

```
package com.doyleisgod.golfer.services;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.security.authentication.encoding.ShaPasswordEncoder;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;
import org.springframework.transaction.support.TransactionSynchronizationManager;

import com.doyleisgod.golfer.dao.IRegistrationDAO;
import com.doyleisgod.golfer.formdata.RegistrationForm;

@Service("IRegistrationService")
public class RegistrationService implements IRegistrationService {
    @Autowired private IRegistrationDAO iRegistrationDAO;
    private final boolean enabled = true;
    private final String roles = "ROLE_USER";

    @Override
    @Transactional (rollbackFor = Exception.class)
    public void registerUser(RegistrationForm registrationForm) throws Exception {
        System.out.println("inside the registerUser method. is wrapped in transaction: "+TransactionSynchronizationManager.isActualTransactionActive());

        String username = registrationForm.getUsername();
        String password = registrationForm.getPassword();
        String firstname = registrationForm.getFirstname();
        String lastname = registrationForm.getLastname();
        String email = registrationForm.getEmail();
        int handicap = Integer.parseInt(registrationForm.getHandicap());
        String encryptedPassword = ((new ShaPasswordEncoder()).encodePassword(password, username));

        iRegistrationDAO.insertUser(username, encryptedPassword, enabled);
        iRegistrationDAO.insertRoles(username, roles);
        iRegistrationDAO.insertUserDetails(username, firstname, lastname, email, handicap);
    }

    @Override
    public boolean checkUser(String username) {
        return iRegistrationDAO.checkUserName(username);
    }
} 
```

注册*DAO*：

```
package com.doyleisgod.golfer.dao;

import javax.annotation.Resource;
import org.apache.commons.dbcp.BasicDataSource;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.stereotype.Repository;
import org.springframework.transaction.support.TransactionSynchronizationManager;

@Repository("iRegistrationDAO")
public class RegistrationDAO extends JdbcTemplate implements IRegistrationDAO {

    @Resource private BasicDataSource dataSource;

    @Override
    public boolean checkUserName(String username) {
        int db_user = queryForInt("select count(username) from users where username = ?", username);

        if (db_user == 1 ){
            return true;
        }

        return false;
    }

    @Override
    public void insertUser(String username, String password, boolean enabled) throws Exception {
        System.out.println("inside the insertuser method. is wrapped in transaction: "+TransactionSynchronizationManager.isActualTransactionActive());

        update("insert into users (username, password, enabled) VALUES (?,?,?)", username, password, enabled);
    }

    @Override
    public void insertRoles(String username, String roles) throws Exception {
        update("insert into user_roles (username, authority) VALUES (?,?)", username, roles);
    }

    @Override
    public void insertUserDetails(String username, String firstname, String lastname, String email, int handicap) throws Exception {
        update("insert into user_detailss (username, first_name, last_name, email_address, handicap)" + 
                "VALUES (?,?,?,?,?)", username, firstname, lastname, email, handicap);

    }

    public void setDataSource(BasicDataSource dataSource) {
        this.dataSource = dataSource;
    }

    public BasicDataSource getDataSource() {
        return dataSource;
    }
} 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-04-05T02:25:46.257

将`context:component-scan`标签移动到应用程序上下文 xml 修复事务行为的原因是： `<tx:annotation-driven />`是一个后处理器，`@Transactional`它使用处理事务行为的 AOP 方法拦截器包装带注释的 bean 方法。Spring 后处理器，仅对它们定义的特定应用程序上下文进行操作。

在您的情况下，您已经`<tx:annotation-driven />`在应用程序上下文中定义了后处理器，而带有注释的 bean`@Transactional`在 servlet 应用程序上下文中。因此，`<tx:annotation-driven />`后处理器仅对应用程序上下文 bean 进行操作，而不对 servlet 上下文 bean 进行操作。当`context:component-scan`标签被移动到应用程序上下文时，`<tx:annotation-driven />`后处理器会适当地包装它们的事务方法。

希望这有点道理。

**[编辑]**

[应用程序上下文和 Servlet 上下文有什么区别？](https://stackoverflow.com/questions/11708967/what-is-the-difference-between-applicationcontext-and-webapplicationcontext-in-s)

[什么是 Spring 后处理器，它是如何工作的？](https://stackoverflow.com/questions/29743320/how-exactly-works-the-spring-bean-post-processor)

[Spring中的AOP是什么？](http://docs.spring.io/spring/docs/current/spring-framework-reference/html/aop.html)

# android - 从另一个活动添加列表视图项目

> ID：10019428
> 
> 赞同：0
> 
> 时间：2012-04-04T21:20:43.843
> 
> 标签：android, android-listview, listactivity

我是 android 开发的初学者，我正在尝试从不同的活动添加列表项值，我编写了一个代码，我可以从活动内部添加列表项，但不能从活动外部添加

测试数据库活动.java

```
package com.laith.sql;

import java.util.List;
import android.app.ListActivity;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.EditText;

public class TestDatabaseActivity extends ListActivity {
private CommentsDataSource datasource;
public ArrayAdapter<Comment> adapter;
private EditText insert_et;
public Comment comment;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.sqlite);

    insert_et =(EditText)findViewById(R.id.editText1);
    datasource = new CommentsDataSource(this);
    datasource.open();

    List<Comment> values = datasource.getAllComments();

    // Use the SimpleCursorAdapter to show the
    // elements in a ListView
    adapter = new ArrayAdapter<Comment>(this,
            android.R.layout.simple_list_item_1, values);
    setListAdapter(adapter);
}

// Will be called via the onClick attribute
// of the buttons in main.xml
public void onClick(View view) {
    ArrayAdapter<Comment> adapter = (ArrayAdapter<Comment>) getListAdapter();
    comment = null;
    switch (view.getId()) {
    case R.id.add:
                    MySingleton mys = MySingleton.getInstance();

        String test = mys.getInstance().getMyStrings();
        addComment(test);
        break;
    case R.id.delete:
        if (getListAdapter().getCount() > 0) {
            comment = (Comment) getListAdapter().getItem(0);
            datasource.deleteComment(comment);
            adapter.remove(comment);
        }
        break;
    }
    adapter.notifyDataSetChanged();
}

@Override
protected void onResume() {
    datasource.open();
    super.onResume();
}

@Override
protected void onPause() {
    datasource.close();
    super.onPause();
}

/// method used to add a comment from a different directory 
public void addComment(String LastComment)
{
    // code here to be called by another activity

                ArrayAdapter<Comment> adapter = (ArrayAdapter<Comment>)getListAdapter();
        comment = datasource.createComment(LastComment);
        adapter.add(comment);
        adapter.notifyDataSetChanged();
           // am getting a null value for comment when I call the function from another activity

}

} 
```

另一个活动中的测试按钮

```
public Button.OnClickListener Test_button = new Button.OnClickListener() 
 {
     public void onClick(View v)
     {
         String verify_string="test";
         MySingleton mys = MySingleton.getInstance();
         mys.setMyStrings(verify_string);

         TestDatabaseActivity tdba = new TestDatabaseActivity();
         tdba.addComment(mys.getMyStrings());
     }
 }; 
```

请帮忙 ！:)

谢谢

<---------------------------- 工作解决方案-------------------- -------------------------> 新类创建

```
 public class ConnectToDB 
{
private CommentsDataSource datasource;

public void addCommentToDB(Context context, String new_comment)
{
    datasource = new CommentsDataSource(context);
    datasource.open();
    datasource.createComment(new_comment);  
} 
```

}

onResume 已编辑

```
protected void onResume() {
    datasource.open();
    values = datasource.getAllComments();
    adapter = new ArrayAdapter<Comment>(this,
            android.R.layout.simple_list_item_1, values);
    setListAdapter(adapter);
    adapter.notifyDataSetChanged();

    super.onResume();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:28:11.263

应该像您在 onClick 部分中那样工作：

```
public void addComment(String LastComment)
{
    ArrayAdapter<Comment> adapter = (ArrayAdapter<Comment>) getListAdapter();
    comment = datasource.createComment(LastComment);
    adapter.add(comment);
    adapter.notifyChange();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T21:27:49.757

使用[android bundles](http://developer.android.com/reference/android/os/Bundle.html)，将额外的值从你的活动中放到另一个。

或者只创建一个单例并从您的两个活动中使用它。创建一个字段，例如 listViewStrings，将字符串存储在其中，然后从另一个活动中获取它们（通过访问单个（单例）实例）

创建一个新类：

```
public class MySingleton {
// ----------------------------------------------------------------------
// Properties
// ----------------------------------------------------------------------

private String[] myStrings;

// ----------------------------------------------------------------------
// Public methods
// ----------------------------------------------------------------------

public void setMyStrings(String[] myStrings) {
          this.myStrings = myStrings;
}

public String[] getMyStrings() {
          return myStrings;
}

// ----------------------------------------------------------------------
// Singleton object
// ----------------------------------------------------------------------

private static MySingleton instance = new MySingleton();

/**
 * Close public access to the constructor
 */
private MySingleton() {
}

/**
 * Gets object's singleton instance
 * 
 * @return singleton instance
 */
public static MySingleton getInstance() {
    return instance;
} 
```

}

并在第一个活动中使用：

```
MySingleton mys = MySingleton.getInstance();
mys.setMyStrings(new String[] {"element1", "element2", "element3"}); 
```

在第二个：

```
MySingleton mys = MySingleton.getInstance();
String[] mySavedStrings = ys.getMyStrings(); 
```

# qt - QListWidget：一行上有更多图标

> ID：10019431
> 
> 赞同：1
> 
> 时间：2012-04-04T21:20:51.873
> 
> 标签：qt, qlistwidget

对于我的学士论文，我正在编写角色扮演游戏制作器。我正在使用tilesets（左下图）。我在我的项目中加载这样的图像并将其拆分为小方块（瓷砖）。现在，我将它们加载到 QListWidget 中，但我希望 QListWidget 在一行中显示与图像中一样多的图块（例如：下图包含 8 个图块/行，但在我的程序中，仅 QListWidget每行显示 6 个图块）。

我曾尝试使用布局，但这些似乎不起作用。关于如何让 QListWidget 每行显示自定义数量的项目的任何想法？我喜欢使用 QListWidget，因为它提供了一种很好的方法来选择图块并传播到父小部件，哪个图块应该在另一个小部件中绘制。

提前致谢。

![在此处输入图像描述](../Images/295e63e489b48b22f8433c7d56efb1a6.png) ![在此处输入图像描述](../Images/ec121402f66afc33f0485874bc0f4f68.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-21T17:29:31.080

好吧...我对 user336063 的当前回答不是 100% 满意

QListWidget 有一个“viewMode”属性，

[![在此处输入图像描述](../Images/483fa20916fca80656f8743520b17643.png)](https://i.stack.imgur.com/O8AQB.png)

如果您将其设置为 IconMode 您的列表将如下所示：

[![在此处输入图像描述](../Images/7f292eb227e83bc3b3bace2289d254d4.png)](https://i.stack.imgur.com/Q2b2k.png)

默认情况下，它看起来像：

[![在此处输入图像描述](../Images/2495bd84ec75d847e3c04222a7ac85a6.png)](https://i.stack.imgur.com/DHPzn.png)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-04T21:57:38.457

使用 QTreeWidget 或 QTableWidget 可能会更轻松。

# sql-server - SQL Server 中图像字段内容的大小是多少？

> ID：10019438
> 
> 赞同：51
> 
> 时间：2012-04-04T21:21:27.780
> 
> 标签：sql-server, tsql, datalength

我在 SQL Server 中有一个表。该表有一个图像字段，应用程序在其中存储文件。

有没有办法使用 T-SQL 读取图像字段中文件的大小？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-04-04T21:26:34.493

```
SELECT DATALENGTH(imagecol) FROM  table 
```

见[MSDN](http://msdn.microsoft.com/en-us/library/ms173486.aspx)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-06-20T10:03:09.933

不同的展示风格：

```
SELECT DATALENGTH(imagecol) as imgBytes,
       DATALENGTH(imagecol) / 1024 as imgKbRounded,
       DATALENGTH(imagecol) / 1024.0 as imgKb,      
       DATALENGTH(imagecol) / 1024 / 1024 as imgMbRounded,
       DATALENGTH(imagecol) / 1024.0 / 1024.0 as imgMb
FROM   table 
```

示例输出：

```
imgBytes    imgKbRounded    imgKb       imgMbRounded    imgMb
68514       66              66.908203   0               0.065340041992 
```

# python - Python：为变量分配新内容时是否释放了“旧”内存？

> ID：10019442
> 
> 赞同：8
> 
> 时间：2012-04-04T21:21:49.090
> 
> 标签：python, memory-management, garbage-collection

如果为变量分配了任何新内容，那么为“旧内容”分配的内存是否会“正确”释放？例如，在下面的脚本中，变量“a”作为零数组的内存是否会在“a”被分配一些新的东西之后被释放？

```
import numpy
a = numpy.zeros(1000)
a = a+1 
```

我会想象 Python 足够聪明，可以使用所谓的“垃圾收集”来干净利落地做所有事情，但我永远无法真正阅读。有什么确认吗？我会很感激的。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T21:24:52.877

最终，旧内存将被释放，尽管您无法预测何时会发生。它取决于 Python 实现和许多其他因素。

也就是说，对于您提供的示例和 CPython 实现，应在分配期间对旧数组进行垃圾收集。

（请注意，NumPy 数组是讨论垃圾收集器行为的一个特别复杂的示例。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T21:36:04.267

您可以通过玩 gc 模块（可能还有微调）来找到答案。它提供了禁用收集器、调整收集频率和设置调试选项的能力。它还提供对收集器发现但无法释放的无法访问对象的访问。请参阅[http://docs.python.org/library/gc.html](http://docs.python.org/library/gc.html)

# submit - 上下文参数在 Tapestry 5.3.2 中对提交不起作用

> ID：10019446
> 
> 赞同：1
> 
> 时间：2012-04-04T21:22:02.320
> 
> 标签：submit, tapestry

我有一个显示记录的循环，我想向所有行添加提交按钮。他们需要提交的原因是，当用户选择其中一个按钮时，我希望在底部有一个表单。

我已经看到有关使用延迟等的评论，但似乎没有什么对我有用。我正在尝试的当前提交代码是：

```
<input t:id="deleteItem" t:type="submit" t:context="item.number.content"   value="deleteItem" class="deleteItem" /> 
```

扩展上下文：我列出的当前上下文只是 item 对象中 number 对象中的一个字符串。事实上，它在上面的代码中显示得非常好。

为了进行不同的测试，我用 getContext() 方法替换了 item.number.content 并让它返回一个硬编码的 1。然后我调试这个方法并看到它在页面提交时被调用，而不是页面像我预期的那样呈现。

直到按下按钮后才会填充上下文。我是不是误会了什么？？

编辑：

所以我的问题是获取上下文值。以我的代码为例：

```
<t:loop source="itemsList" value="item" formState="none">
<!-- Display info here -->
<input t:id="deleteItem" t:type="submit" t:context="myContext" value="deleteItem"    class="deleteItem" />  
</t:loop> 
```

getMyContext 的定义是：

```
public String getMyContext() {
    String context = item.getNumber().getContent();
    return context;
} 
```

问题是，在按下提交之后，该方法才会被调用，此时变量“item”为空。我期望每次呈现提交按钮时都会调用 getMyContext ，然后在选择提交时，将使用适当的上下文触发事件。那有意义吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T19:03:55.957

我终于弄清楚我的问题是什么：

```
formState="none" 
```

我最初这样做是因为在我的对象和字符串之间进行转换时遇到了问题。选择此选项后，提交按钮无法正常工作。我最终将其更改为 formState="iteration" 现在它的工作方式完全符合我的预期（而且我也需要按预期进行延迟）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T06:40:17.703

尝试将以下内容添加到您将此 t:submit 添加到的页面/组件中：

```
@OnEvent(component = "deleteItem")
private void handleSubmit(Integer contextValue) {
     //Do whatever you need to do with the passed context value here.
     //Most commonly you would store the context in a java page/component field to 
     //be used by the form eventhandler to do some sort of CRUD
} 
```

呈现页面时不会写出上下文值，它会在提交表单时作为参数传递给您的事件处理程序。所以你看到的是正确的行为。

# objective-c - 当我滚动时，uitableviewcell 中的 UIslider 不再自动更新

> ID：10019448
> 
> 赞同：1
> 
> 时间：2012-04-04T21:22:12.880
> 
> 标签：objective-c, uitableview, uislider

我的代码有点问题，我希望在这里得到一些帮助

我有一个 uitableview，在每个 uitableviewcell 中我放了一个单独的 uislider。每个 uislider，用作音乐播放的进度条。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    UIButton *button = nil;
    UISlider *customSlider = nil;

    static NSString *CellIdentifier = @"cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

        UIImage *image = [UIImage imageNamed:@"button_play.png"];
        button = [UIButton buttonWithType:UIButtonTypeCustom];
        CGRect frame = CGRectMake(340.0, 10.0, image.size.width, image.size.height);
        button.frame = frame;
        [button setBackgroundImage:image forState:UIControlStateNormal];
        [button addTarget:self action:@selector(playAudio:) forControlEvents:UIControlEventTouchUpInside];
        button.tag = 4;
        [cell.contentView addSubview:button];

        customSlider = [[UISlider alloc] initWithFrame:CGRectMake(10, 45, 456, 20)];    
        customSlider.minimumValue = 0.0;
        customSlider.maximumValue = 100.0;
        customSlider.continuous = YES;
        customSlider.tag = 3;
        customSlider.value = 0.0;
        [cell.contentView addSubview:customSlider];
    }

    else {
        customSlider = (UISlider *)[cell.contentView viewWithTag:3];
        button = (UIButton *)[cell.contentView viewWithTag:4];
    }
    return cell;
}

- (void) playAudio:(UIButton *)sender {

    UIButton *button = (UIButton *)[sender superview];
    UITableViewCell *currentCellTouched = (UITableViewCell *)[button superview];
    UITableView *currentTable = (UITableView *)[currentCellTouched superview];
    NSIndexPath *indexPath = [currentTable indexPathForCell:currentCellTouched];

    //currentCellPlaying type of UITableViewCell and accessible from the rest classe
    currentCellPlaying = currentCellTouched;

    NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:NSLocalizedString([listFilesAudio objectAtIndex:indexPath.row], @"") ofType:@"mp3"]];

    player = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:nil];
    player.delegate = self;
    [player prepareToPlay];

    [(UISlider *)[currentCellTouched.contentView viewWithTag:3] setMaximumValue:[player duration]];
    [(UISlider *)[currentCellTouched.contentView viewWithTag:3] setValue:0.0];

    NSTimer *sliderTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(updateTime:) userInfo:nil repeats:YES];
    [player play];

}

- (void)updateTime:(NSTimer *)timer {
    [(UISlider *)[currentCellPlaying.contentView viewWithTag:3] setValue:player.currentTime];
} 
```

当我启动一个游戏时，一切都很好，进度条也更新了。

我的问题是，当我向下/向上滚动表格视图时，正在播放音乐的单元格消失了，一旦我们回到播放音乐的单元格，uislider 又回到 0，并且不再更新......（一个 NSLOG 确认我们仍然进入“updateTime”方法）

如果您有我的问题的解决方案，我会很高兴阅读它。

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T22:12:59.720

Otium 的答案并不完全正确，但它朝着正确的方向发展。单元格并非都是同一个对象，但是（实际上您是这样实现的）通过滚动离开可见区域的单元格被重用于显示其他单元格，滚动到可见区域。因此，当播放音乐的单元格再次可见时，其中会显示**另一个**滑块对象，然后是原始滑块对象。此外，`currentCellPlaying`对象（可能）不再显示或显示为另一个单元格。因此，当您更新时，`viewWithTag:3`您（有时）不会看到。您应该做的是存储“indexCurrentPlaying”而不是单元格或滑块引用。使用该索引，您可以在 ... 末尾装饰单元格。`cellForRowAt`您可以在该索引内部更新该单元格的滑块`updateTime`。

编辑：

一些应该可以工作的未经测试的代码（也许有一些修复，但我认为它解释了这个想法）：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
    UIButton *button = nil;
    UISlider *customSlider = nil;

    static NSString *CellIdentifier = @"cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) 
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];

        UIImage *image = [UIImage imageNamed:@"button_play.png"];
        button = [UIButton buttonWithType:UIButtonTypeCustom];
        CGRect frame = CGRectMake(340.0, 10.0, image.size.width, image.size.height);
        button.frame = frame;
        [button setBackgroundImage:image forState:UIControlStateNormal];
        [button addTarget:self action:@selector(playAudio:) forControlEvents:UIControlEventTouchUpInside];
        button.tag = 4;
        [cell.contentView addSubview:button];

        customSlider = [[UISlider alloc] initWithFrame:CGRectMake(10, 45, 456, 20)];    
        customSlider.minimumValue = 0.0;
        customSlider.maximumValue = 100.0;
        customSlider.continuous = YES;
        customSlider.tag = 3;
        customSlider.value = 0.0;
        [cell.contentView addSubview:customSlider];
    }
    else
    {
       customSlider = [cell viewWithTag:3];     
    }
    if([indexPath isEqual:currentPlayingIndexPath])
    {
       currentPlayingSlider = customSlider; 
       [self updateTime];
    } 
    else if(customSlider == currentPlayingSlider)
    {
       currentPlayingSlider = nil;  
    }
    return cell;
}

- (void) playAudio
{

    NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle] pathForResource:NSLocalizedString([listFilesAudio objectAtIndex:currentPlayingIndexPath.row], @"") ofType:@"mp3"]];

    player = [[AVAudioPlayer alloc] initWithContentsOfURL:url error:nil];
    player.delegate = self;
    [player prepareToPlay];

    NSTimer *sliderTimer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(updateTime:) userInfo:nil repeats:YES];
    [player play];
}

- (void)updateTime:(NSTimer *)timer 
{
    [currentPlayingSlider setValue:player.currentTime];
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
   currentPlayingIndexPath = indexPath;
   currentPlayingSlider = [cellForRowAtIndexPath: currentPlayingIndexPath]; 
   [self playAudio];    
} 
```

小心`NSIndexPath isEqual`。似乎在不同版本的 SDK 中回答不同（[看这里](https://stackoverflow.com/questions/3791044/isequal-doesnt-always-work-for-nsindexpath-what-can-i-use-in-its-place)）......因为您只需要可以将其更改为的行`currentPlayingIndexPath.row == indexPath.row`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T21:27:20.377

UItableView 使用可取消队列的单元格，因此您的所有单元格基本上都是同一个对象。在 cellForRowAtIndexPath 方法中，您应该再次设置滑块的进度。

# php - 使用 wordpress 进行 PHP 加密

> ID：10019450
> 
> 赞同：1
> 
> 时间：2012-04-04T21:22:18.627
> 
> 标签：php, wordpress, encryption

我的网站是在 Wordpress 中构建的，我们正在收集需要放入数据库中的个人信息。到目前为止，这是我的 php 插入：

```
//defined in wp-config.php
$key = KEY_ENCRYPT;

function encrypt($text) 
{   
    return trim(base64_encode(mcrypt_encrypt(MCRYPT_RIJNDAEL_256, $key, $text, MCRYPT_MODE_ECB, mcrypt_create_iv(mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB), MCRYPT_RAND)))); 
} 

if($_POST){ 
    //POST object placed in variables
    $user_domain = $_POST['domain'];
    $s_user = $_POST['s-username'];
    $s_pass = $_POST['s-password'];
    $w_user = $_POST['w-username'];
    $w_pass = $_POST['w-password'];

    //encrypting data
    $encrypted_server_username = encrypt($s_user); 
    $encrypted_server_password = encrypt($s_pass);
    $encrypted_wordpress_username = encrypt($w_user); 
    $encrypted_wordpress_password = encrypt($w_pass);

    //set up array for options table
    $user_website_data = array(
        'domain'=>$user_domain,
        'server_username'=>$encrypted_server_username,
        'server_password'=>$encrypted_server_password,
        'wordpress_username'=>$encrypted_wordpress_username,
        'wordpress_password'=>$encrypted_wordpress_password
        );  

        update_option($user_domain . '_website_data', $user_website_data); 
```

此代码成功地将信息存储在一个数组中。您甚至可以在[http://thewpvalet.staging.wpengine.com/sign-up/?plan=basic](http://thewpvalet.staging.wpengine.com/sign-up/?plan=basic)上查看此代码的工作和流程。请使用 4242424242424242 作为 CC 号进行测试。

现在我正在尝试在后端管理区域实现解码，以便我可以按域搜索并提取凭据。这是我的代码：

```
if(isset($_POST['domain'])){
        function decrypt($text) 
        {
            $key = KEY_ENCRYPT;

            return trim(mcrypt_decrypt(MCRYPT_RIJNDAEL_256, $key, base64_decode($text), MCRYPT_MODE_ECB, mcrypt_create_iv(mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB), MCRYPT_RAND)));
        }

        $search_domain = $_POST['domain'];
        $url_removal = array("http://","www.");
        $clean_search_domain = str_replace($url_removal, '', $search_domain);
        $user_options = get_option($search_domain.'_website_data');

        echo '<strong>Login Information:</strong></br>' .
        'Domain:' . $user_options['domain'] . '</br>' .
        'Server Username:' . decrypt($user_options['server_username']) . '</br>';

    } 
```

这将返回 mcrypt_decrypt() [function.mcrypt-decrypt]: Size of key is too large for this algorithm in /nas/wp/www/staging/thewpvalet/wp-content/plugins/user-info/index.php 第 43 行

知道我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-18T13:35:43.357

> 知道我在这里做错了什么吗？

是的，您做错的事情是[滚动您自己的密码学](https://security.stackexchange.com/a/18198/43688)。让我们添加一些空格并详细查看您的函数：

```
/**
 * THIS CODE IS INSECURE. DO NOT USE IT. PURGE IT FROM YOUR CODEBASE!
 */
function encrypt($text) 
{
    return trim(
        base64_encode(
            mcrypt_encrypt(
                MCRYPT_RIJNDAEL_256, // Non-standard block cipher; not AES
                $key,
                $text,
                MCRYPT_MODE_ECB, // ECB mode is insecure
                mcrypt_create_iv( // ECB mode doesn't use an IV anyway
                    mcrypt_get_iv_size(MCRYPT_RIJNDAEL_256, MCRYPT_MODE_ECB),
                    MCRYPT_RAND // you want MCRYPT_DEV_URANDOM
                )
            )
        )
    ); 
} 
```

对于非标准 Rijndael 变体，您正在使用 ECB 模式（无论如何都会丢弃 IV）生成 IV（不安全），并且您没有使用消息身份验证。[没有消息认证的加密是一个致命的错误](https://paragonie.com/blog/2015/05/using-encryption-and-authentication-correctly)。

> Marc B，密钥长度为 34 个字符

如果您使用`MCRYPT_RIJNDAEL_256`的是 AES 或 AES（`MCRYPT_RIJNDAEL_128`顺便说一句；[mcrypt 被认为是有害](https://paragonie.com/blog/2015/05/if-you-re-typing-word-mcrypt-into-your-code-you-re-doing-it-wrong)的），那么这些是唯一可接受的密钥大小：

*   16 字节
*   24 字节
*   32 字节

您收到错误的原因是 34 是无效输入。这可能意味着您使用的是人类可读的密码而不是加密密钥。

**TL;DR**：不要推出自己的加密货币，而是使用经过充分研究的实现。[defuse/php-encryption](https://github.com/defuse/php-encryption)和[Zend\Crypt](https://github.com/zendframework/zend-crypt)是你最好的选择。

# javascript - 根据键/值从 JSON 数组中删除条目

> ID：10019451
> 
> 赞同：1
> 
> 时间：2012-04-04T21:22:26.710
> 
> 标签：javascript, jquery, json

这就是我的对象的样子（我无法控制它的格式）：

```
[{
    "Country": "Spain",
    "info info1": 0.329235716,
    "info info2": 0.447683684,
    "info info3": 0.447683747
}, {
    "Country": "Chile",
    "info info1": 1.302673893,
    "info info2": 1.357820775,
    "info info3": 1.35626442
}, {
    "Country": "USA",
    "info info1": 7.78805016,
    "info info2": 26.59681951,
    "info info3": 9.200900779
}] 
```

我需要为多个国家/地区保留数据，但更改国家/地区名称。还有一些国家我需要完全省略。

这是我一次咬掉的次数超过我一次咀嚼的次数之一，到目前为止我所做的工作只是轮胎旋转。

```
$.each(output_json, function() {
  $.each(this, function(k, v) {
    console.log(k);
  });
}); 
```

我试图以这种方式遍历它，但我只是得到键/值对，我不确定如何根据我在里面找到的内容删除整个条目。

有谁知道一个函数/库/jQuery 插件，它可以让我以我描述的方式快速操作对象？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T21:25:33.953

[Underscore.js](http://documentcloud.github.com/underscore/)是用于所有事物数据的库。对您的数据有用的功能是；[each](http://documentcloud.github.com/underscore/#each)，[拒绝](http://documentcloud.github.com/underscore/#reject)和[groupBy](http://documentcloud.github.com/underscore/#groupBy)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T21:34:17.307

该死的，忘掉jQuery吧！这是一个纯 JavaScript 任务。

*   要遍历 Array，请使用`for (var i=0; i<array.length; i++)`, 遍历 Object 使用`for (var i in object)`
*   要删除数组条目，请使用[`splice()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/splice). 要删除对象属性，请使用`delete object[key];`.
*   要过滤数组，在现代 javascript 版本中，您可以[`filter()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/filter)为每个条目使用回调函数；它创建一个新数组。对象没有这样的（本机）方法。

您可能会发现一些具有有用实用功能的库，例如下划线。但是要学JS，可能还是先用native方法做比较好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T21:57:22.650

```
$(output_json).each(function(i){
    if (this["Country"] == "USA") output_json.splice(i,1);
    else if (this["Country"] == "Spain") this["Country"] = "Brazil";
    else {
        var country = this;
        $(this).each(function(i){
            if (this["info info2"] == 1.302673893) {
                country.splice(i,1);
            } 
        });
    }
}) 
```

这就是代码的骨架——显然你可能有更好的方法来检测重命名、删除等。但是使用 splice 方法和方括号使这比使用 delete 更安全，并且比维护多个数组等更有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T21:26:42.820

如果您不想直接编写代码来执行您想要的操作，您可以使用像[underscore.js](http://documentcloud.github.com/underscore/)这样的库，它封装了许多方便的函数来操作集合。因此，在解析完 JSON 之后，您可以使用 reject() 过滤掉集合中的特定对象。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-04T21:34:29.293

我相信以下代码大致可以满足您的要求。查看工作小提琴： http: [//jsfiddle.net/pUhDR/3/](http://jsfiddle.net/pUhDR/3/) 顺便说一句，我同意@Gazler，您可以使用下划线库，它比这更高级且更易于阅读：

```
var countriesString = JSON.stringify([{
    "Country": "Spain",
    "info info1": 0.329235716,
    "info info2": 0.447683684,
    "info info3": 0.447683747
}, {
    "Country": "Chile",
    "info info1": 1.302673893,
    "info info2": 1.357820775,
    "info info3": 1.35626442
}, {
    "Country": "USA",
    "info info1": 7.78805016,
    "info info2": 26.59681951,
    "info info3": 9.200900779
}]);

var countries = JSON.parse(countriesString);

// create new array
var newCountriesArray = new Array();
// exclude some countries
var excludeCountries = new Object();
excludeCountries['Spain'] = true;
// rename some countries
var renameCountries = new Object();
renameCountries['USA'] = 'United States of America';

for (index in countries) {
    if (countries[index].Country in renameCountries) {
        countries[index].Country = renameCountries[countries[index].Country];
    }
    if (!(countries[index].Country in excludeCountries)) {
        newCountriesArray.push(countries[index]);
    }
}

alert(JSON.stringify(newCountriesArray)); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-04T21:36:41.813

您可以`delete`在数组上使用运算符并删除元素。

1.  创建要删除的项目列表。在下面的情况下'智利'
2.  遍历列表并删除项目

[**演示**](http://jsfiddle.net/skram/PGmhs/)

**代码：**

```
var toRemove = [];
$.each(output_json, function(i) {
  $.each(this, function(k, v) {
    if (v == 'Chile') toRemove.push(i);
  });
});

//remove all marked
for (var i = 0; i < toRemove.length; i++) {
    delete output_json[toRemove[i]];
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-18T10:03:15.280

由于我们必须删除我们当前正在迭代的集合中的一些索引，我选择像这样反转迭代：

```
const fields = [{key: "entry1",},{key: "entry2",},{key: "entry3",},{key: "entry4",},{key: "entry5",},]

const arrToDelete = ['entry3', 'entry4']
for (let idx = fields.length - 1; idx >= 0; idx--) {
  if (arrToDelete.includes(fields[idx].key)){
    fields.splice(idx, 1);
  }
} 
```

# python - sys.stdout.flush() 方法的使用

> ID：10019456
> 
> 赞同：213
> 
> 时间：2012-04-04T21:22:57.353
> 
> 标签：python, sys

做什么`sys.stdout.flush()`？

* * *

## 回答 #1

> 赞同：213
> 
> 时间：2012-04-04T21:35:18.087

Python 的标准输出是缓冲的（这意味着它会在将其写入终端之前收集一些“写入”到标准输出的数据）。调用`sys.stdout.flush()`会强制它“刷新”缓冲区，这意味着它将缓冲区中的所有内容写入终端，即使通常它会在这样做之前等待。

这里有一些关于（非）缓冲 I/O 及其有用的有用信息：
[http ://en.wikipedia.org/wiki/Data_buffer](http://en.wikipedia.org/wiki/Data_buffer)
[缓冲与非缓冲 IO](https://stackoverflow.com/questions/1450551/buffered-i-o-vs-unbuffered-io)

* * *

## 回答 #2

> 赞同：144
> 
> 时间：2012-04-04T21:34:48.513

考虑以下简单的 Python 脚本：

```
import time
import sys

for i in range(5):
    print(i),
    #sys.stdout.flush()
    time.sleep(1) 
```

这旨在每秒打印一个数字，持续五秒钟，但如果您现在按原样运行它（取决于您的默认系统缓冲），在脚本完成之前您可能看不到任何输出，然后您将立即看到`0 1 2 3 4`打印到屏幕。

这是因为输出正在被缓冲，除非您`sys.stdout`在每次之后刷新，否则您`print`不会立即看到输出。从`sys.stdout.flush()`行中删除注释以查看差异。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-10-27T09:41:22.297

据我了解，当我们执行打印语句时，输出将被写入缓冲区。当缓冲区被刷新（清除）时，我们将在屏幕上看到输出。默认情况下，缓冲区将在程序退出时被刷新。但我们也可以通过在程序中使用“sys.stdout.flush()”语句手动刷新缓冲区。在下面的代码中，当 i 的值达到 5 时，缓冲区将被刷新。

你可以通过执行下面的代码来理解。

```
chiru@online:~$ cat flush.py 
```

```
import time
import sys

for i in range(10):
    print i
    if i == 5:
        print "Flushing buffer"
        sys.stdout.flush()
    time.sleep(1)

for i in range(10):
    print i,
    if i == 5:
        print "Flushing buffer"
        sys.stdout.flush() 
```

```
chiru@online:~$ python flush.py 
0 1 2 3 4 5 Flushing buffer
6 7 8 9 0 1 2 3 4 5 Flushing buffer
6 7 8 9 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-08-28T07:12:10.537

```
import sys
for x in range(10000):
    print "HAPPY >> %s <<\r" % str(x),
    sys.stdout.flush() 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-07-16T12:41:04.347

根据我的理解 sys.stdout.flush() 将所有已缓冲到该点的数据推送到文件对象。使用标准输出时，数据在写入终端之前存储在缓冲内存中（一段时间或直到内存被填满）。使用 flush() 强制清空缓冲区并写入终端，甚至在缓冲区有空空间之前。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-08-10T03:52:47.173

你可以看到这两者的区别

```
import sys

for i in range(1,10 ):
    sys.stdout.write(str(i))
    sys.stdout.flush()

for i in range(1,10 ):
    print i 
```

在第一种情况下，由于刷新，字符在每个写入后一个接一个地输出。在第二种情况下，字符由 Python 缓冲，直到它认为它有值得写的东西，然后批量写入。

`time.sleep(0.2)`如果您在循环中添加 a ，这将变得更加明显。

# actionscript-3 - 如何指定 ENTER_FRAME 以便对象每 4 帧进入一次？

> ID：10019458
> 
> 赞同：2
> 
> 时间：2012-04-04T21:23:00.697
> 
> 标签：actionscript-3, flash, flash-cs5, frame, enterframeevent

因此 ENTER_FRAME 属性将在游戏运行的每一帧上向舞台添加一个对象。如果游戏是 24 fps，每秒创建 24 个对象。我该如何限制它，使其每 4 帧生成一个对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T21:32:55.050

你可以有一个每帧递增的计数器

```
var f:int = 0;
addEventListener(Event.ENTER_FRAME,onEnterFrame);
function onEnterFrame(e:Event):void{
    if (f%4 == 0){
        // do something
    }
    f++;
} 
```

如果你愿意，你可以`f=0;`在 if 语句中设置

# c++ - C++ - 极其奇怪的机器代码行为

> ID：10019459
> 
> 赞同：7
> 
> 时间：2012-04-04T21:23:01.970
> 
> 标签：c++, performance, assembly, machine-code

完整代码在这里： http: [//pastebin.com/MM3vWmqA](http://pastebin.com/MM3vWmqA)

在函数 fast_generator 中，我为两个语句添加了注释。如果你切换这些语句，代码运行速度会快 1.8 倍。如果删除第一个语句，代码将比原始版本执行得更快，但与切换它们相比会更慢。

测试用例应该如下。

第一 - 最慢。452 毫秒。

```
counter++;
i--; 
```

第二 - 比第一个更快。280 毫秒。

```
i--;
counter++; 
```

第三 - 比第一个快，但比第二个慢。421 毫秒。

```
i--; 
```

原始语句的汇编器输出是。

```
inc edx
mov eax, 6 
```

我已经验证，在切换这些语句时，汇编器输出保持不变，这些 asm 指令的唯一区别是互换了。

我已经用 VC++10 和 VC++11 对其进行了测试，行为相同。有人能解释一下为什么切换这些语句会加速算法 ~ 1.8 倍吗？如果您认为 std::clock() 不准确，请更改 size = 7。在我的机器上，size = 7 的差异是 12000 毫秒与 7000 毫秒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T22:13:44.063

您的慢示例`i`在循环开始时使用它来索引数组之前立即递减。您的快速示例添加了一个干预步骤。如果不了解处理器的内部架构，就不可能确定，但​​很可能正在发生的事情是处理器已经`buffer[i]`在其管道中，但递减使该值无效，导致管道停止。通过干预步骤，它有更多时间在需要之前恢复正确的值。

顺便说一句，`mov eax, 5`执行的指令不是`i--`. 对于我们这些没有编译器的人来说，发布更多的程序集上下文会很有帮助。

# facebook - Facebook注册成就access_token问题

> ID：10019465
> 
> 赞同：0
> 
> 时间：2012-04-04T21:23:42.097
> 
> 标签：facebook, facebook-php-sdk, achievements, facebook-access-token

**解决方案编辑：** 原来您不能使用 PHP SDK 返回正确的应用程序令牌，也不能点击开发人员网站应用程序部分中的 OpenGraph 选项，单击“获取代码”并从那里获取应用程序访问令牌。 . 你必须这样做：

```
$token_url = 'https://graph.facebook.com/oauth/access_token?client_id=' . $fbConfig['appId'] . '&client_secret=' . $fbConfig['appSecret'] . '&grant_type=client_credentials';
$accessToken = explode('=',file_get_contents($token_url));
$accessToken = $accessToken[1]; 
```

**原始问题：** 使用 PHP SDK，我一直在尝试注册我的成就，但没有成功。我不断收到以下错误：“必须使用应用程序 access_token 调用此方法。”

但是，当我将我正在使用的令牌输入到 opengraph (https://graph.facebook.com/app?access_token=ACCESS_TOKEN) 时，我会正确获取我的应用程序信息。

以下是我迄今为止在注册成就时尝试过的方法：

```
$param = array(
    'access_token' => $accessToken,
    'achievement' => 'http://domain.com/path/to/my/achievement/page',
    'display_order' => $achievements['achievementWeight']
);
$achievement = $fb->api('/'.$this->CI->config->item('app_id').'/achievements', 'POST', $param);

$superCurl = "curl -F 'achievement=" . $achieveUrl . "&access_token=" . $accessToken . "' https://graph.facebook.com/" . $appId . "/achievements";
exec($superCurl,$result);

$url = 'https://graph.facebook.com/' . $this->CI->config->item('app_id') . '/achievements?access_token=' . $accessToken;
$c = curl_init ($url);
curl_setopt($c, CURLOPT_HEADER, false);
curl_setopt($c, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($c, CURLOPT_POST, true);
curl_setopt($c, CURLOPT_POSTFIELDS, $param);
curl_setopt($c, CURLOPT_RETURNTRANSFER, true);
if(curl_errno($c)){
    $this->CI->firephp->log(curl_error($c));
}
$page = curl_exec ($c);
curl_close ($c); 
```

一切都会回来说它需要一个access_token。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T22:06:14.897

请参阅[Authenticating as an App](https://developers.facebook.com/docs/authentication/applications/)文档 - 您必须使用应用程序的访问令牌，它允许您代表应用程序执行操作 - 对于这种情况（以及其他几种情况），用户访问令牌是不够的

# linux - 如何在 php 文件中搜索特定关键字？

> ID：10019466
> 
> 赞同：0
> 
> 时间：2012-04-04T21:23:45.083
> 
> 标签：linux, ssh, centos

我正在尝试在所有 php 文件和运行命令的所有子目录中搜索单词/短语。我正在使用具有 root 访问权限的 ssh。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T21:24:47.417

```
find . -type f -name \*php|xargs grep -i yourword 
```

# sublimetext - Windows 上 Sublime Text 2 的键盘列选择

> ID：10019468
> 
> 赞同：23
> 
> 时间：2012-04-04T21:24:06.693
> 
> 标签：sublimetext, sublimetext2

我一直在尝试通过在 Windows 上工作的键盘绑定来选择列。

*默认 (Windows).sublimekeymap*说明：

```
{ "keys": ["ctrl+alt+up"], "command": "select_lines", "args": {"forward": false} },
{ "keys": ["ctrl+alt+down"], "command": "select_lines", "args": {"forward": true} }, 
```

它也记录在这里：[http](http://www.sublimetext.com/docs/2/column_selection.html) ://www.sublimetext.com/docs/2/column_selection.html但是，每次我尝试通过键盘进行列选择时它都不起作用。这是特定于环境的问题还是实际的错误？或者也许我做错了什么。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-05T08:12:18.333

假设您在使用`Ctrl`+ `Alt`+进入文本块时获得多个光标`Up`，则需要使用`Shift`+`Left`和`Shift`+`Right`进行列选择。

如果您根本没有获得多个光标，请尝试将键绑定更改为`up`and `down`，看看是否有效。可能是您的 Windows 环境将`Ctrl`++ `Alt```Up`用于其他用途，并阻止它在 Sublime 中使用。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-17T19:18:54.240

这不是正确的位置，但是如果您将 RDP 放入 VM，默认设置也将不起作用。

为此，我重新定义了 Ctrl+Shift 的行重新排序绑定

```
{ "keys": ["ctrl+shift+up"], "command": "select_lines", "args": {"forward": false} },
{ "keys": ["ctrl+shift+down"], "command": "select_lines", "args": {"forward": true} } 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2013-08-11T01:53:23.237

我认为这真的很晚了，但是我找到了以下最有效的解决方案。

1.  把它放在你的“键绑定默认值”中并保存

    ```
    { "keys": ["alt+shift+up"], "command": "select_lines", "args": {"forward": false} },
    { "keys": ["alt+shift+down"], "command": "select_lines", "args": {"forward": true} }, 
    ```

2.  之后，您可以使用以下内容进行列选择

    `Alt`+ `Shift`+ [ `Down`| `Up`]

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-13T23:48:24.357

由于 Winamp Global Hotkeys，我遇到了同样的问题。只需从 Winamp Preferences 中删除该组合键，它就会起作用。

# html - CSS - 寻找一种很好的展示方式 位置选项：绝对

> ID：10019469
> 
> 赞同：0
> 
> 时间：2012-04-04T21:24:19.747
> 
> 标签：html, css

我有代码：

```
<div class='selectAnAction'>
   <ul>
      <li class='actionSelect'><span>Select an Action</span></li>
      <li class='action' onclick='location.href=\"/post.php?key=".$row['hash']."\";'>post</li>
      <li class='action' onclick='location.href=\"/adpreview.php?key=".$row['hash']."\";'>preview</li>
      <li class='action' onclick='location.href=\"/adupdate.php?key=".$row['hash']."\";'>edit</li>
      <li class='action' onclick='location.href=\"/addelete.php?key=".$row['hash']."\";'>archive</li>
   </ul>
</div> 
```

我有这个CSS：

```
.selectAnAction ul { 
    display: block;
    background-image: url("/images/selectAnAction-dropdown.png");
    background-position: 0px -200px;
    background-repeat: repeat-x;
    border: 1px solid #FFFFFF;
    box-shadow: 0px 0px 3px #CCCCCC;
    font-size: 0.75em;
    list-style: none outside none;
    margin: 0px;
    overflow: hidden;
    padding: 0px;
    text-indent: 0px;
    width: 120px;
    color:white;
}
ul { 
display: block;
}
.selectAnAction ul li.actionSelect { 
background: url("/images/selectAnAction-bg.png") repeat-x transparent;
font-weight: bold;
 }
.selectAnAction ul li:first-child { 
display: block;
 }

.selectAnAction ul li { 
display: none;
margin: 0px;
text-indent: 0px;
width: 120px;
background-color:grey;
}
.selectAnAction:hover  ul li{
display: block;
margin: 0px;
text-indent: 0px;
width: 120px;
}
.selectAnAction ul { 
font-size: 0.75em;
list-style: none outside none;
}

.selectAnAction ul li { 
display: none;
margin: 0px;
text-indent: 0px;
width: 100%;
padding-left:10px;
font-family:"Times New Roman",Georgia,Serif;
font-size:1.3em;
text-align:left;
}

.action:hover {
    background-color:black;
    cursor:pointer;
} 
```

我得到的是一个动作菜单。首先，我只看到 LI“选择选项”。鼠标悬停 - 它显示其他选项（发布、编辑、存档等）
我在页面上有很多这样的菜单。

我想修复 .action 元素的位置，这样它们就不会影响网站其余部分的设计（因为现在当它们变得可见时 - 网站的其他元素也会移动）。

所以我试图添加类似的东西：

```
.action {
    position:absolute;
} 
```

但是发生的情况是所有 .action 元素都显示在彼此之上 - 就在第一个 LI (.actionSelect) 之后。
所以现在我试图让它们不是一个接一个地显示，而是一个接一个地显示，但位置是绝对的。有什么好办法吗？(mb someting like top:+20px;)
Position: relative 不起作用 - 这样，当 .action 元素变得可见时 - 它们将移动所有其他元素。也不能使用硬绝对定位（顶部：100px），因为我在页面上有很多这样的列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T00:26:14.633

您想绝对定位 ul，然后将操作 select 移到 ul 之外作为父元素。如果要将选择保留在 ul 中，则应该为选项设置一个嵌套的 ul。确保添加位置：相对于选项列表的父项。

```
<div class='selectAnAction'>
   <ul>
     <li class='actionSelect'>
         <span>Select an Action</span></li>
         <ul class="optionMenu">
            <li class='action' onclick='location.href=\"/post.php?key=".$row['hash']."\";'>post</li>
            <li class='action' onclick='location.href=\"/adpreview.php?key=".$row['hash']."\";'>preview</li>
            <li class='action' onclick='location.href=\"/adupdate.php?key=".$row['hash']."\";'>edit</li>
            <li class='action' onclick='location.href=\"/addelete.php?key=".$row['hash']."\";'>archive</li>
         </ul>
     </li>
   </ul>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T21:26:17.510

位置：绝对应该在`.selectAnAction ul li ul`我相信

看看这个网站做下拉菜单[http://www.htmldog.com/articles/suckerfish/dropdowns/](http://www.htmldog.com/articles/suckerfish/dropdowns/)

# r - 为什么重复调用 lapply 后闭包中的变量值会丢失？

> ID：10019477
> 
> 赞同：5
> 
> 时间：2012-04-04T21:25:13.847
> 
> 标签：r, scope, closures, currying, lapply

我正在尝试使用一系列`lapply`调用来构建柯里化函数列表，理想情况下，在最后一次`lapply`调用时，它会返回最终所需的值。柯里化有效，但`lapply`似乎总是在第二次应用之后应用列表中的最后一个元素。

例子：

```
curry <- function(fn, ...) {
  arglist <- list(...)
  function(...) {
    do.call(fn, append(arglist, list(...)))
  }
}
# rcurry is used only to init the first lapply.
rcurry <- function(v1, fn, ...) {
  arglist <- append(list(v1), list(...))
  function(...) {
    do.call(fn, append(arglist, list(...)))
  }
}

myadd <- function(a,b,c) {
  a+b+c
} 
```

这按预期工作：

```
# you can achieve the same by closure:
# curry.a <- lapply(c(10, 1000), FUN = function(a) { curry(myadd, a) })
curry.a <- lapply(list(10, 1000), rcurry, myadd)
curry.a[[1]](1,2)
curry.a[[2]](1,2)

# > [1] 13
# > [1] 1003 
```

“破坏范围”的下一个`lapply`：`curry`

```
# this does give the desired output:
# curry.a.b <- list(curry(curry.a[[1]], 1), curry(curry.a[[2]], 1))
curry.a.b <- lapply(curry.a, curry, 1)
curry.a.b[[1]](2)
curry.a.b[[2]](2)

# > [1] 1003
# > [1] 1003 
```

它似乎不是`curry`or`rcurry`函数的结果。使用`roxygen`'s`Curry`函数做同样的事情。通过上面的闭包创建`curry.a`或使用`curry.a <- list(curry(myadd, 10), curry(myadd, 1000))`也产生相同的结果。

当然还有最后的咖喱：

```
# it doesn't work if you re-define this:
# curry.a.b <- list(curry(curry.a[[1]], 1), curry(curry.a[[2]], 2))
curry.a.b.c <- lapply(curry.a.b, curry, 2)
lapply(curry.a.b.c, do.call, list())

# > [1] 1003
# > [1] 1003 
```

这里发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T04:48:56.313

`fn`in`curry`不在函数范围内评估，因此它是`promise`. 如果你`force`做到了，那么你可以得到你所期望的：

```
curry <- function(fn, ...) {
  force(fn)
  arglist <- list(...)
  function(...) {
    do.call(fn, append(arglist, list(...)))
  }
} 
```

然后，

```
> curry.a.b <- lapply(curry.a, curry, 1)
> curry.a.b[[1]](2)
[1] 13
> curry.a.b[[2]](2)
[1] 1003
> 
> curry.a.b.c <- lapply(curry.a.b, curry, 2)
> lapply(curry.a.b.c, do.call, list())
[[1]]
[1] 13

[[2]]
[1] 1003 
```

在内部，`lapply`生成一个局部变量`X`，每次调用函数都会引用该变量。If`X`在调用 , 时没有在每个函数中评估`lapply`，`X`是承诺。调用后`lapply`，`X`在所有函数调用中`lapply`返回相同的（即最后一个）值。所以`lapply`类似于：

```
f0 <- function(i) function() i
f1 <- function(i) {force(i); function() i}

f <- local({
 r0 <- list()
 r1 <- list()
 for (i in 1:2) {
    r0[[i]] <- f0(i)
    r1[[i]] <- f1(i)
 }
 list(r0 = r0, r1 = r1)
}) 
```

然后，

```
> f$r0[[1]]()
[1] 2
> f$r1[[1]]()
[1] 1
> f$r0[[2]]()
[1] 2
> f$r1[[2]]()
[1] 2 
```

# android - Android：在 OnSeekBarChangeListener 中显示 Toast？

> ID：10019480
> 
> 赞同：2
> 
> 时间：2012-04-04T21:25:21.550
> 
> 标签：android, seekbar

我想在用户移动它时显示搜索栏的值，类似于联系人列表视图在滚动时显示您所在部分的字母的方式（Android 2.3.x）。

有人对如何实施它有建议吗？我正在考虑 OnSeekBarChangeListener 的 onProgressChanged() 方法中的 Toast，但无法获取显示（） Toast 的上下文。

编辑：此外，Seekbar 位于 ListView 的一行中，因此 OnSeekBarChangeListener 位于扩展 ArrayAdapter 的类中，而不是通常的“Activity”，因此该方法无法使用 getBaseContext() 之类的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:29:06.317

您可以使用 ：

```
Toast.makeText(Main.this, "Message", Toast.LENGTH_LONG).show(); 
```

或者

```
Toast.makeText(getBaseContext(), "Message", Toast.LENGTH_LONG).show(); 
```

`Application`第一种方式：全局使用类

```
public class MyApp extends Application {
    private static MyApp instance;

    public static MyApp getInstance() {
        return instance;
    }

    public static Context getContext(){
        return instance.getApplicationContext();
    }

    @Override
    public void onCreate() {
        super.onCreate();
        instance = this;
    }
} 
```

**第二种方式：** 传递`Context` 给您的类构造函数或类中的方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T13:47:50.327

感谢您的回复。我从这两个建议中都使用了一点并想出了这个，但即使在 500 毫秒时，Toast 也没有足够快地更新以跟上 seekBar 的变化。嗯……

```
public class adapListControl extends ArrayAdapter <String>
{
   final Context mCtx;
   ...

   public adapListControl (Context context, int textViewResourceId)
   {
      super (context, textViewResourceId);
      this.mCtx = context;
   }
   ...

   OnSeekBarChangeListener osbl = new OnSeekBarChangeListener ()
   {
      @Override
      public void onProgressChanged (SeekBar seekBar, int progress, boolean fromUser)
      { 
         Log.d (TAG, " prog change:" + progress);
         Toast.makeText(mCtx, "" + progress, 500).show();
      }
      ...
   } 
```

# javascript - Javascript 过渡页面滚动

> ID：10019484
> 
> 赞同：0
> 
> 时间：2012-04-04T21:25:57.777
> 
> 标签：javascript, jquery, scroll

我的问题很简单。如何创建一个看起来像这里的过渡卷轴：http: [//eee.asus.com/eeepad/transformer-prime/features/](http://eee.asus.com/eeepad/transformer-prime/features/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T22:40:24.243

此页面使用 scrollAnimate jquery 插件为页面上的元素设置动画 - 您可以在[https://github.com/Cardume/scrollAnimate找到此插件](https://github.com/Cardume/scrollAnimate)

# php - 添加类 current_page_item

> ID：10019493
> 
> 赞同：5
> 
> 时间：2012-04-04T21:26:44.710
> 
> 标签：php, wordpress

我正在做一个 Wordpress 设计，我想创建一个自定义菜单。

```
$items = wp_get_nav_menu_items('Menu', array(
    'order'                  => 'ASC',
    'orderby'                => 'menu_order',
    'post_type'              => 'nav_menu_item',
    'post_status'            => 'publish',
    'output'                 => ARRAY_A,
    'output_key'             => 'menu_order',
    'nopaging'               => true,
    'update_post_term_cache' => false));
echo '<pre>'; print_r($items); echo '</pre>'; 
foreach($items as $item){
    echo '<div class="menu_entry"><a href="'.$item->url.'">'.$item->title.'</a></div>';
} 
```

问题是，我需要标准菜单中的“当前页面”类，这是 WordPress 创建的。

任何想法如何添加这个类？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2016-01-28T15:39:20.847

解决时间：

WordPress 添加这些类的功能是[`_wp_menu_item_classes_by_context()`](https://developer.wordpress.org/reference/functions/_wp_menu_item_classes_by_context/). 当您使用`wp_nav_menu`但不使用时，它已经被调用`wp_get_nav_menu_items`。幸运的是，后者提供了一个过滤器，所以我们可以自己做：

```
add_filter( 'wp_get_nav_menu_items', 'prefix_nav_menu_classes', 10, 3 );

function prefix_nav_menu_classes($items, $menu, $args) {
    _wp_menu_item_classes_by_context($items);
    return $items;
} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-04-05T01:49:07.780

您可以对当前页面/猫等 ID 与菜单项 object_id 进行比较，该 ID 是其链接到的页面/类别等的 ID。

类似的东西（未经测试）；

```
global $post;
$thePostID = $post->ID;
foreach($items as $item){

    if($thePostID === $item->object_id) {
        echo '<div class="menu_entry"><a href="'.$item->url.'" class="current-menu-item">'.$item->title.'</a></div>';
    }else{
        echo '<div class="menu_entry"><a href="'.$item->url.'">'.$item->title.'</a></div>';
    }

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-06-21T22:47:45.963

使用功能[`get_queried_object_id()`](https://developer.wordpress.org/reference/functions/get_queried_object_id/)。这适用于所有页面，包括博客页面。

看一个例子：

```
if ( $menu_items = wp_get_nav_menu_items( 'menu' ) ) {
   foreach ( $menu_items as $menu_item ) {
      $current = ( $menu_item->object_id == get_queried_object_id() ) ? 'current' : '';
      echo '<li class="' . $current . '"><a href="' . $menu_item->url . '">' . $menu_item->title . '</a></li>';
   }
} 
```

# ios - Xcode 4.3.2 默认启动图像损坏的底部像素

> ID：10019496
> 
> 赞同：4
> 
> 时间：2012-04-04T21:26:53.363
> 
> 标签：ios, xcode, pngcrush

当我在 iOS 5.1 上启动我的应用程序时（目前仅在视网膜显示器上测试过），Default@2x.png 图像在图像底部下方显示有一条绿线。我已经确认图像是 640x960，并且不包含这条绿线。

我猜这一定是由于PNG优化工具Xcode在将资源添加到包之前运行的问题，特别是因为我在使用模拟器运行时没有看到这一点。

有没有办法修复或更新这个 PNG 优化实用程序？（我正在为 Lion 运行最新的 Xcode 4.3.2，来自 Mac App Store）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T22:07:33.453

pngcrush 1.6.4 中有一个错误，它安装在 Xcode 4.3.2 的应用程序包中。我可以按照以下说明解决此问题（感谢[http://www.mactricksandtips.com/2012/02/installing-and-using-pngcrush-on-your-mac.html](http://www.mactricksandtips.com/2012/02/installing-and-using-pngcrush-on-your-mac.html)）：

1.  在此处下载最新版本的 pngcrush：http: [//sourceforge.net/projects/pmt/files/pngcrush/](http://sourceforge.net/projects/pmt/files/pngcrush/)
2.  使用您喜欢的压缩实用程序解压缩文件（或者，在终端（或您喜欢的命令行工具）中，导航到保存此下载的目录，然后运行此命令（您可能需要根据下载更改版本号）

    `tar -xvzf pngcrush-1.7.15.tar.xz`

3.  导航到命令行工具中的解压缩目录。
4.  运行命令“make”
5.  运行命令“sudo cp pngcrush /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/pngcrush”将这个最新版本复制到旧版本之上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-25T21:15:50.980

对于像我这样使用 XCode 4.5.2 解决此问题的人，当 project.pbxproj 与此支持论坛线程中所述的 PNG 图像文件记录冲突时，此错误似乎会表现出来： [https ://devforums.apple.com /消息/731402](https://devforums.apple.com/message/731402)

与该线程中的答案不同（即，手动编辑 .pbxproj 文件，不是我最喜欢做的事情......）我发现删除对有问题的图像的引用并将它们再次添加到项目文件中可以解决问题。

# c++ - 在代码中设置 C++ 应用程序以使用最大 CPU 使用率

> ID：10019513
> 
> 赞同：0
> 
> 时间：2012-04-04T21:28:07.933
> 
> 标签：c++, visual-c++, mfc

我用 c++ 开发了一个程序，当我在 windows XP 中运行它时，它使用所有可用的 CPU 到 100% 的使用率，但是当我在 windows 7 中运行应用程序时，即使将任务设置为，应用程序也很难达到 40%任务栏中的实时或高优先级有一种方法可以强制操作系统让我的应用程序使用最大可用 CPU，就像我的代码中的 winXP 一样。我的意思是 API 或库之类的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T21:30:24.613

这很可能是因为您拥有多个核心。为了使用 100% 的 CPU，您可能需要创建多个线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T21:36:13.500

如果您的应用程序使用任何类型的 IO，并且该 IO 在 XP 中出现问题（驱动程序错误和/或其他原因），则可能会导致您的应用程序完全旋转 CPU。

7 在这些方面可能会得到更好的优化，因此它可以释放 CPU，直到慢速（磁盘、网络）的东西完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T02:07:40.827

此外，取决于该线程在做什么以及它在处理器上花费时间的频率（睡眠、对象等待）可能是一个因素，但 MK 几乎为您总结了这一点。你也可以看看这里：

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms686277%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686277%28v=vs.85%29.aspx)

# html - 在 ie7 中右对齐 inline-block 元素

> ID：10019516
> 
> 赞同：1
> 
> 时间：2012-04-04T21:28:19.820
> 
> 标签：html, internet-explorer, css-float, css

我正在尝试实现一种布局，其中一系列 div 呈现在一行中，其中一些左对齐，一些右对齐。

```
<html>
    <body>
        <div width="100%">
            <div class="left">item1</div>
            <div class="left">item2</div>
            <div class="right">item3</div>
            <div class="right">item4</div>
        </div>
    </body>
</html>​
.left, .right
{
    display: inline-block;
    *display: inline;
    zoom: 1;
}
.right
{
    float: right;
} 
```

​</p>

我有上面的代码，它呈现了我在 ie8、firefox、chrome 中所期望的方式。但在 ie7 上，右浮动 div 显示在下一行而不是同一行

![非ie7结果](../Images/24b6a52dfc8f0e4fec2ecbaba2947fb2.png) ![ie7 结果](../Images/deeb75a1f7ef781382cdf82f8c1b2dc6.png)

我在[http://jsfiddle.net/acdara/MEDSy/27/有一个 jsFiddle](http://jsfiddle.net/acdara/MEDSy/27/)

我知道另一种解决方案也是浮动左对齐元素，但我真的很想保留内联块的好处，比如不必担心元素脱离流程。

我想知道我是否可以为 ie7 做些什么来保持内联块的优点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T23:46:07.753

一种解决方案是翻转标记的顺序，以便您首先浮动正确的元素：

```
<div class="right">item3</div>
<div class="right">item4</div>
<div class="left">item1</div>
<div class="left">item2</div> 
```

它不适用于 IE7 的原因是 inline-block 不适用于 IE7 默认情况下不内联的项目（请参阅[浏览器兼容性图表 inline-block](https://developer.mozilla.org/en/CSS/display)），因此您的浮动将表现出浮动的正常行为对于块项目 - 即如果项目首先向左浮动，则右侧浮动项目将落在它们下方，就像顺序块项目没有浮动一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T21:56:01.427

我得到了它的所有工作

```
<html>
    <head>
        <style>

.right
{
    float: right;
}
.left
{
    float: left;
}

        </style>
    </head>
    <body>
        <div width="100%">
            <div class="left">item1</div>
            <div class="left">item2</div>
            <div class="right">item3</div>
            <div class="right">item4</div>
        </div>
    </body>
</html> 
```

​查看：http: [//jsfiddle.net/Zgz9G/2/](http://jsfiddle.net/Zgz9G/2/)

# ios - 通过 Web 应用程序自定义 SMS 文本

> ID：10019518
> 
> 赞同：0
> 
> 时间：2012-04-04T21:28:43.347
> 
> 标签：ios

我需要根据在 iOS Web 应用程序中单击的按钮填充 SMS 正文。我有什么办法可以做到这一点？就像是 ：

a href="sms:1234" body = "hello world !">发送短信 /a

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T13:32:33.210

确定的答案可以在这里找到：

[https://developer.apple.com/library/ios/featuredarticles/iPhoneURLScheme_Reference/SMSLinks/SMSLinks.html#//apple_ref/doc/uid/TP40007899-CH7-SW1](https://developer.apple.com/library/ios/featuredarticles/iPhoneURLScheme_Reference/SMSLinks/SMSLinks.html#//apple_ref/doc/uid/TP40007899-CH7-SW1)

# sorting - 对网格面板列的组合框进行排序

> ID：10019519
> 
> 赞同：1
> 
> 时间：2012-04-04T21:28:44.083
> 
> 标签：sorting, extjs, combobox, gridpanel

在网格面板的 a 列中，我使用组合框作为编辑器和渲染器来显示值：

```
editor: {
    xtype: 'combobox',
    alias: 'bienTypeCombobox',
    store: 'BienTypesStore',
    valueField: 'id_bien_type',
    displayField: 'nom',
    autoHeight: true,
    editable: false,
    autoSelect: true,
    allowBlank: false
},
renderer: function (value, metaData, record, rowIndex, colIndex, store, view) {
    var display = '';
    Ext.data.StoreManager.get("BienTypesStore").each(

    function (rec) {
        if (rec.get('id_bien_type') === value) {
            display = rec.get('nom');
            return false;
        }
    });
    return display;
} 
```

因此，当单元格被编辑时，组合框被显示，当单元格未被编辑时，该组合框的 displayField 被显示。

我的问题是，现在，当我单击此列的标题时，行按组合框的 valueField 排序。

我想让用户能够通过组合框的显示字段对该列进行排序。

请帮忙，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T00:45:54.313

我认为这没有简单的解决方案。我能想到的唯一一种方法是：

*   在您的模型中创建一个虚拟字段（基本上带有显示字段）。为这个虚拟字段创建转换函数，所以当它设置真实值字段时得到更新。

*   在网格中使用此虚拟字段，无需额外渲染

*   对该字段使用编辑器，其中 valueField 和 displayField 都指向该字段。

# build - TFS：查询包含特定变更集的构建

> ID：10019522
> 
> 赞同：6
> 
> 时间：2012-04-04T21:28:59.030
> 
> 标签：build, tfs-sdk

我有许多基于 TFS 中的单个分支（例如 Main）执行的构建定义。

我想（以某种方式）查询 TFS 以查找包含我提供的特定变更集编号的所有构建，并返回 TFS 包含的构建名称的字符串列表。任何类型的应用程序（VS 扩展程序、CLI 应用程序、winforms 等等）都可以。

注意：这不是“请给我代码”请求；我愿意为此付出努力并认真工作。任何指向有关如何查询数据库或 SDK 的文档的指针，或如何查询构建的示例；只是一些开始寻找的地方将非常有帮助。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-05T11:31:36.890

以下代码段将抓取集合的所有团队项目的所有构建定义，并将检查每个构建是否与输入变更集编号的关联：

```
using System;
using System.Linq;
using Microsoft.TeamFoundation.Build.Client;
using Microsoft.TeamFoundation.Client;
using Microsoft.TeamFoundation.VersionControl.Client;

namespace FindChangesetInBuild
{
    class Program
    {
        static void Main(string[] args)
        {
            TfsTeamProjectCollection teamProjectCollection = TfsTeamProjectCollectionFactory.GetTeamProjectCollection(new Uri("http://tfs:8080/tfs/collectionName"));

            var versionControl = teamProjectCollection.GetService<VersionControlServer>();
            var buildService = (IBuildServer)teamProjectCollection.GetService(typeof(IBuildServer));

            var teamProjects = versionControl.GetAllTeamProjects(true);
            foreach (var teamProject in teamProjects)
            {
                var buildDefinitions = buildService.QueryBuildDefinitions(teamProject.Name);
                foreach (var buildDefinition in buildDefinitions)
                {
                    var builds = buildService.QueryBuilds(buildDefinition);
                    foreach (var buildDetail in builds)
                    {
                        var changesets = InformationNodeConverters.GetAssociatedChangesets(buildDetail);
                        if (changesets.Any(changesetSummary => changesetSummary.ChangesetId == Convert.ToInt32(args[0])))
                        {
                            Console.WriteLine("Changeset was build in "+buildDetail.BuildNumber);
                        }
                    }
                }
            }
        }
    }
} 
```

不用说，这是一种蛮力攻击。
如果您缩小列表`buildDefinition`，专注于特定`teamProjects`等，您可以进一步细化代码。无论如何，我几乎无法想象上述内容按原样有用！

除了（显然）[MSDN](http://msdn.microsoft.com/en-us/library/bb130146%28v=vs.100%29.aspx)之外，Shai Raiten 的[博客](http://blogs.microsoft.co.il/blogs/shair/archive/2011/05/18/tfs-api-index-parts-1-to-37.aspx)是 TFS-SDK 的一个很好的资源。
对于特定于构建的示例，请[在此处](https://stackoverflow.com/questions/7914104/tfs-sdk-query-yesterdays-builds)和[此处](https://stackoverflow.com/questions/5263005/tfs-api-how-to-query-builds-independent-of-which-build-definition-they-belong)查看一些可能有趣的 SO 帖子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-07T23:16:43.547

您可以在 TFS 2010 中使用这个小数据库查询，只需将 90264 替换为您的变更集 ID。

```
USE Tfs_Warehouse
go
SELECT BuildName 
FROM DimBuild
   INNER JOIN FactBuildChangeset
   ON DimBuild.BuildSK = FactBuildChangeset.BuildSK
WHERE FactBuildChangeset.ChangesetSK = 90264 
```

# sql - 实体异常：基础提供程序无法打开，超时已过期

> ID：10019523
> 
> 赞同：0
> 
> 时间：2012-04-04T21:29:06.187
> 
> 标签：sql, asp.net-mvc, entity-framework, c#-4.0, connection-string

好吧，我难住了。我正在尝试创建一个 .NET Winforms 应用程序以通过实体框架与数据库通信。我最初创建了一个 ASP.NET MVC3 应用程序（带有单独的 DAL 层），它可以在最初失败后与数据库通信。所以第一次尝试打开连接时，它会超时。如果我然后在浏览器中按 F5，则连接正常！我在我的 Winforms 应用程序中引用了这个 DAL。

*   我可以通过 SQL Management Studio 中的 SQL Auth 连接到数据库。
*   我可以在 VS2010 中创建 ADO.NET 数据类（它连接、获取表并将连接字符串存储在 app.config 中）。
*   但是，一旦我运行 Winforms 应用程序，我就无法连接。我得到了上面提到的异常，带有“超时已过期”的 InnerException。

我将连接字符串从 web.config 复制到 app.config。

SQL 数据库托管在我的称为 SERVER 的 Windows Home Server 上。我在一个工作组中（没有域）。我在 Management Studio 和 VS 中使用 SERVER\SQLEXPRESS 成功连接到它。

我尝试过的事情：

*   禁用客户端计算机上的防火墙。
*   在服务器上启用 DTC 并将 msdtc.exe 添加到服务器上的排除列表中。
*   确保在 SQL 服务器实例上启用了命名管道。
*   尝试了不同的 SQL 用户。
*   尝试了在 C# 中构建连接的不同方法。
*   在我的 WinForms 项目本地生成了一个新的 ADO.NET Data 类（不引用 DAL）。VS 连接良好，读取表格，生成代码。但是正在运行的应用程序会导致“超时已过期”SqlException。

所以运行应用程序连接不成功。当我在 ProcessExplorer 中观看应用程序时，当它尝试使用 SYN_SENT 消息连接远程端口 4845 时，我可以在 TCP 窗口中看到一个条目。不确定这是否正确。

在过去的几天里，我已经用谷歌搜索并搜索了这个，我已经阅读了 Stackoverflow 上所有提到这个异常的文章和回复，但我已经碰壁了。

这是VS读取DB后生成的ConnectionString：

```
<add name="LLDBEntities" connectionString="metadata=res://*/LLDB.csdl|res://*/LLDB.ssdl|res://*/LLDB.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=SERVER\SQLEXPRESS;initial catalog=LLDB;persist security info=True;user id=sa;password=sapwd;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" /> 
```

任何帮助表示赞赏，甚至任何关于如何弄清楚发生了什么的提示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T22:30:55.720

您的连接字符串看起来更像 SQL Server 的连接字符串，而不是 SQL Express。

查看 SQL Express 的连接字符串：[SQL Server Express connection string for Entity Framework Code First](https://stackoverflow.com/questions/4116994/sql-express-connection-string-for-entity-framework-code-first)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-06T00:39:26.467

好的，解决了。

我注意到它实际上会在第二次尝试时使用相同的应用程序和连接进行连接。那时我找到了这个链接： http: [//kromey.us/2011/06/microsoft-sql-server-2008-times-out-on-first-connection-attempt-447.html](http://kromey.us/2011/06/microsoft-sql-server-2008-times-out-on-first-connection-attempt-447.html)

因此，我在实例的 TCP/IP 属性上打开了 SQL Server 配置管理器中 IPAll 动态端口下列出的防火墙端口，现在一切正常。我仍然不知道为什么它会在第二次尝试中通过......

# asp.net - 查询ELMAH_Error sql server表的AllXml列的输出内容

> ID：10019528
> 
> 赞同：2
> 
> 时间：2012-04-04T21:29:30.480
> 
> 标签：asp.net, sql-server, xml, elmah

我在编写查询时遇到问题，以便可以查询 Elmah_Error 表中 AllXml 列的内容。

如何列出所有项目节点作为查询的输出。我如何编写查询以仅列出某些项目节点？

我想获得以下结果集：

项目价值

===== =====

ALL_HTTP HTTP_CONNECTION:xxxx

ALL_RAW 连接：xxxxx

我还希望能够通过 ErrorID 过滤查询

AllXml 列的内容可能如下所示。

```
<error
  application="/"
  message="hello world"
  source="TestWebElmah"
  detail="xxxxx">
  <serverVariables>
    <item
      name="ALL_HTTP">
      <value
        string="HTTP_CONNECTION:xxxx" />
    </item>
    <item
      name="ALL_RAW">
      <value
        string="Connection: xxxxx" />
    </item>

  </serverVariables>
</error> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T22:45:29.883

远程地址节点

```
select T.N.value('(value/@string)[1]', 'varchar(30)') as REMOTE_ADDR
from 
(select cast(AllXml as xml) as AllXml from ELMAH_Error) e
   cross apply AllXml.nodes('//item[@name="REMOTE_ADDR"]') as T(N) 
```

包含*mozilla的 HTTP 用户代理*

```
select T.N.value('(value/@string)[1]', 'varchar(30)') as HTTP_USER_AGENT
from 
(select cast(AllXml as xml) as AllXml from ELMAH_Error) e
   cross apply AllXml.nodes('//item[@name="HTTP_USER_AGENT"]') as T(N)
where T.N.value('(value/@string)[1]', 'varchar(30)') like '%mozilla%' 
```

[Elmah](http://code.google.com/p/elmah/) table stores the AllXml column as nvarchar so it needs to be casted to xml

all tags + values, by error id

```
select T.N.value('@name', 'varchar(30)') as Name,
       T.N.value('(value/@string)[1]', 'varchar(30)') as Value
from 
(select cast(AllXml as xml) as AllXml from ELMAH_Error where ErrorId = 'DC82172B-F2C0-48CE-8621-A60B702ECF93') e
cross apply AllXml.nodes('/error/serverVariables/item') as T(N) 
```

*Before voting down this answer, because uses most of the part of Mikael Eriksson's answer, I let you know I'll happily accept the downvotes only for this reason, since is mainly true*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T22:18:32.403

此查询将为您提供所有`item`节点

```
select T.N.value('@name', 'varchar(30)') as Name,
       T.N.value('(value/@string)[1]', 'varchar(30)') as Value
from Elmah_Error
  cross apply AllXml.nodes('/error/serverVariables/item') as T(N) 
```

如果要过滤任何值，可以将其放在子查询中，应用常规 where 子句。

```
select Name, 
       Value
from
  (
    select T.N.value('@name', 'varchar(30)') as Name,
           T.N.value('(value/@string)[1]', 'varchar(30)') as Value
    from Elmah_Error
      cross apply AllXml.nodes('/error/serverVariables/item') as T(N)
  ) T
where Name = 'ALL_HTTP' 
```

# scala - 通常采用类型并返回相同类型的函数

> ID：10019529
> 
> 赞同：6
> 
> 时间：2012-04-04T21:29:32.987
> 
> 标签：scala, generics, collections, functional-programming, type-theory

我很难理解为什么 Scala 编译器对这个函数定义不满意：

```
def trimNonWordCharacters[T <: Iterable[String]](items: T): T =
     items map { _.replaceAll("\\W", "") } 
```

这是[REPL](http://en.wikipedia.org/wiki/Read-eval-print_loop)输出：

```
scala> def trimNonWordCharacters[T <: Iterable[String]](items: T): T =
     items map { _.replaceAll("\\W", "") }
<console>:5: error: type mismatch;
 found   : Iterable[java.lang.String]
 required: T
       def trimNonWordCharacters[T <: Iterable[String]](items: T): T = items map { _.replaceAll("\\W", "") } 
```

目标是传入 Iterable 的任何实现并获得相同类型的回退。这可能吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-04T21:52:33.087

`map`on 方法`Iterable`返回一个`Iterable`，所以即使`T`是 的子类`Iterable`，它的方法`map`也会返回`Iterable`。

为了更好地打字，你必须这样写：

```
import scala.collection.IterableLike
def trimNonWordCharacters[T <: Iterable[String]](items: T with IterableLike[String, T]): T =
     items map { _.replaceAll("\\W", "") } 
```

但是，这也行不通，因为没有信息可以让地图`T`生成另一个`T`. 例如，将 a 映射`BitSet`到 a`String`不会导致 a `BitSet`。所以我们需要别的东西：教如何`T`从 a构建 a 的东西`T`，其中映射的元素是 type `String`。像这样：

```
import scala.collection.IterableLike
import scala.collection.generic.CanBuildFrom
def trimNonWordCharacters[T <: Iterable[String]]
                         (items: T with IterableLike[String, T])
                         (implicit cbf: CanBuildFrom[T, String, T]): T =
     items map { _.replaceAll("\\W", "") } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:58:38.260

*[作为答案而不是评论输入，因为评论中的代码格式不正确]*

@Daniel，感谢您的解释，我也发现它很有用。由于 Iterable 派生自 IterableLike，以下似乎也可以工作，并且稍微紧凑：

```
import scala.collection.IterableLike
import scala.collection.generic.CanBuildFrom
def trimNonWordCharacters[T <: IterableLike[String, T]]
 (items: T)
 (implicit cbf: CanBuildFrom[T, String, T]): T =
 items map { _.replaceAll("\\W", "") } 
```

# android - 创建 Android 虚拟设备时没有 ABI 错误

> ID：10019532
> 
> 赞同：36
> 
> 时间：2012-04-04T21:29:35.780
> 
> 标签：android, android-emulator

创建虚拟设备时出现 No ABI 错误。我的设置包括

安卓 SDK

ADT 插件

蚀

当我跑步时

```
 android list targets 
```

它给了我

```
 Name: Android 4.0.3
  Type: Platform
  API level: 15
  Revision: 2
  Skins: HVGA, QVGA, WQVGA400, WQVGA432, WSVGA, WVGA800 (default), WVGA854, WXGA720,
  WXGA800
 ABIs : no ABIs. 
```

当我尝试跑步时

```
 android create avd -n myandroid -t 1 
```

它给

```
 This platform has more than one ABI. Please specify one using --abi. 
```

如何指定 ABI 并因此创建 AVD

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2015-04-08T18:30:27.523

**查找相对于您的 android 版本的 ABI：**

```
android list sdk --extended --no-ui --all 
```

**安装 ABI：**

```
echo "y" | android update sdk -a --no-ui --filter sys-img-armeabi-v7a-android-22,sys-img-x86_64-android-22 
```

**创建 AVD：**

```
echo "n" | android create avd --name myandroid22 -t "android-22" 
```

**如果您有多个，请列出并找到有效的 ABI：**

```
android list targets 
```

**创建 AVD：**

```
echo "n" | android create avd --name myandroid22 -t "android-22" --abi "default/armeabi-v7a" 
```

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2012-06-09T17:12:48.960

使用命令**tools/android**启动**Android SDK Manager**并从那里安装 ABI。

![Android SDK 管理器](../Images/8cb882b8e825e697d2ca0facd7ca1e09.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-11-16T06:52:41.550

使用“android list targets”获取可能的目标配置列表。

使用命令创建虚拟设备时，使用 -t 指定列表中的 id，使用 -b 指定 ABI。您可以在“list target”命令的结果中看到这一点。

```
$ android create avd -n my_android1.1 -t 1 -b default/x86
$ android list target

----------
id: 1 or "android-19"
     Name: Android 4.4.2
     Type: Platform
     API level: 19
     Revision: 4
     Skins: HVGA, QVGA, WQVGA400, WQVGA432, WSVGA, WVGA800 (default), WVGA854, WXGA720, WXGA800, WXGA800-7in
 Tag/ABIs : default/armeabi-v7a, default/x86
----------
id: 2 or "android-20"
     Name: Android 4.4W.2
     Type: Platform
     API level: 20
     Revision: 2
     Skins: HVGA, QVGA, WQVGA400, WQVGA432, WSVGA, WVGA800 (default), WVGA854, WXGA720, WXGA800, WXGA800-7in
 Tag/ABIs : no ABIs.
---------- 
```

# c# - 在内存方面，将长的非动态字符串存储为单个字符串对象还是让程序从重复部分构建它更好？

> ID：10019533
> 
> 赞同：1
> 
> 时间：2012-04-04T21:29:37.027
> 
> 标签：c#, string, memory-management

这是一个有点奇怪的问题，**更像是一个我需要的任何实验**，但我仍然对答案感到好奇：如果我有一个我提前知道永远不会改变但（大部分）组成的字符串重复部分，最好将字符串作为单个字符串对象，在需要时调用并完成它 - 或者我应该将字符串分解成代表重复部分的较小字符串并在需要时将它们连接起来?

让我举个例子：假设我们有一个天真的程序员想要创建一个用于验证 IP 地址的正则表达式（换句话说，我知道这个正则表达式不会按预期工作，但它有助于说明我所说的重复是什么意思部分，并为示例的第二部分节省了一些打字时间）。所以他写了这个函数：

```
 private bool isValidIP(string ip)
 {
   Regex checkIP = new Regex("\\d\\d?\\d?\\.\\d\\d?\\d?\\.\\d\\d?\\d?\\.\\d\\d?\\d?");
   return checkIP.IsMatch(ip);
 } 
```

现在我们的年轻程序员注意到他有“\d”、“\d?”和“\”。只是重复了几次。这给了他一个想法，即他既可以节省一些存储空间，又可以帮助提醒自己这对以后意味着什么。所以他重新制作了这个函数：

```
 private bool isValidIP(string ip)
 {
   string escape = "\\";
   string digi = "d";
   string digit = escape + digi;
   string possibleDigit = digit + '?';
   string IpByte = digit + possibleDigit + possibleDigit;
   string period = escape + '.';
   Regex checkIP = new Regex(IpByte + period + IpByte + period + IpByte + period + IpByte);
   return checkIP.IsMatch(ip);
 } 
```

第一种方法很简单。它只在程序指令中存储 38 个字符，每次调用函数时都会将这些字符读入内存。第二种方法将（我怀疑）两个长度为 1 的字符串和两个字符存储到程序指令中，以及将这四个字符串连接成不同顺序的所有调用。当程序被调用时，这会在内存中创建至少 8 个字符串（六个命名字符串，一个用于正则表达式前四个部分的临时字符串，然后是从前一个字符串创建的最终字符串 + 正则表达式的三个字符串）。第二种方法也恰好有助于解释正则表达式正在寻找什么 - 尽管不是最终正则表达式的样子。它还可以帮助重构，

再次，哪种方法会更好？它会像程序大小与内存使用之间的权衡一样简单吗？ **当然，对于这样简单的事情，权衡充其量可以忽略不计，但是更大、更复杂的字符串呢？**

哦，是的，一个更好的 IP 地址正则表达式是：

```
 ^(25[0-5]|2[0-4]\\d|[01]?\\d\\d?)(\\.(25[0-5]|2[0-4]\\d|[01]?\\d\\d?)){3}$ 
```

不会像例子一样好用，不是吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T22:10:30.660

第一个是迄今为止更好的选择。这就是为什么

1.  更清楚了。

2.  这个更便宜。任何时候你声明一个新对象都是一个“昂贵”的过程。您必须在堆上为它腾出空间（至少对于字符串来说）。是的，理论上你可以节省一个字节左右，但是你花费更多的时间（可能，我没有测试过）为每个字符串分配空间，额外的内存指令等。更不用说这个事实了请记住，您还必须考虑使用 GC。您不断分配字符串，最终您将不得不应对它占用进程滴答声。您真的很想进行优化，我可以很容易地看出这段代码没有达到预期的效率。一件事没有常量，这意味着您可能会创建比您需要的更多的对象，而不是让编译器优化那些没有的字符串' t需要改变。这让我想到，作为一个审查这段代码的人，我需要更仔细地看看会发生什么，并找出是否有问题。

3.  它更清楚（是的，我又说了一遍）。你想做一个学术追求，看看你能做到多么高效。这很酷。我明白了。我自己做。很有趣。我从不让它溜进生产代码。我不关心丢失一个滴答声，我关心生产中的错误，我关心其他程序员是否能够理解我的代码的作用。阅读别人的代码已经够难了，我不想增加他们必须尝试找出我放入了哪些微优化以及如果他们“轻推”错误的代码会发生什么的额外任务。

4.  你又说到了一点。如果原始正则表达式错误怎么办。谷歌会告诉你这个问题已经解决了。您可以谷歌另一个正确且经过测试的正则表达式。你不能谷歌“我的代码有什么问题”。你可以肯定地把它张贴在上面，但这意味着其他人必须参与其中并仔细查看。

以下是如何使第一个示例轻松赢得赛马：

```
 Regex checkIP = new Regex(
   "\\d\\d?\\d?\\.\\d\\d?\\d?\\.\\d\\d?\\d?\\.\\d\\d?\\d?");

 private bool isValidIP(string ip)
 {
   return checkIP.IsMatch(ip);
 } 
```

声明一次，反复重用。如果您花时间动态地重新创建正则表达式以节省一些，请不要这样做。从技术上讲，您可以这样做并且仍然只创建一次对象，但这比将其移动到类级别变量要多得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T21:58:31.867

您正在有效地尝试在这里玩弄编译器并实现自己的字符串压缩。对于您所描述的那种字符串文字，您的节省似乎只是从编译的二进制文件中减少了数十个字节，由于内存对齐，这甚至可能无法实现。为了换取这几个字节节省的空间，这种方法增加了代码复杂性和运行时开销，更不用说调试困难了。

存储很便宜。为什么要让你的生活（和你同事的生活）更艰难？保持你的代码简单、清晰和明显——你以后会感谢自己的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T21:47:45.630

第二个在内存消耗方面更糟，因为每次连接两个字符串时，内存中都有三个。

尽管编译器通过为您创建一个开始处理字符串常量的一些实例`StringBuilder`，但我仍然会投票支持第一个占用较少内存的实例，因为如果系统确实`StringBuilder`为您创建了，您将为此承担开销，如果它没有看到第一段......

我现在很好奇编译 RegEx 会如何影响内存使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T21:47:56.940

这里的储蓄是虚幻的，把这个字符串分开是一个很大的过度。节省微不足道的内存并使如此简单的代码复杂化是毫无意义的。您不会看到任何节省，但下一个维护该代码的人将花费 10 倍以上的时间来理解它。

字符串是不可变的，因此如果您的字符串从不/很少更改，请将其保持为一体。强烈的字符串连接给垃圾收集器带来了额外的压力。

除非您的字符串和子字符串很大并且您可以节省至少千字节，否则不要将您的时间和精力花在此类优化上。

# ruby-on-rails - 需要为应用程序诊断 routes.rb 以将英语/西班牙语添加到 Rails 3 应用程序

> ID：10019534
> 
> 赞同：1
> 
> 时间：2012-04-04T21:29:43.397
> 
> 标签：ruby-on-rails, internationalization, rails-routing

我正在关注 Ryan Bates [railscasts I18n Internationalization](http://railscasts.com/episodes/138-i18n-revised)并遇到问题/问题。

我正在尝试在我的链接中设置语言，如下所示：

[http://localhost:3000/en/site/services](http://localhost:3000/en/site/services)英语

和

[http://localhost:3000/es/site/services](http://localhost:3000/es/site/services)西班牙语

我在我的路由文件中定义这个：

路线.rb

```
scope ":locale" do
  get "site/home"
  get "site/about_us"
  get "site/faq"
  get "site/discounts"
  get "site/services"
  get "site/contact_us"
  get "site/admin"
  get "site/posts"
  get "categories/new_subcategory"
  get "categories/edit_subcategory"
end 
```

我在我的应用程序控制器中有

```
before_filter :set_locale

private
  def set_locale
  I18n.locale = params[:locale] if params[:locale].present?
end

def default_url_options(options = {})
  {locale: I18n.locale}
end 
```

在我的意见/布局/application.html.erb

```
<%= link_to_unless_current "English", locale: "en" %> |
<%= link_to_unless_current "Spanish", locale: "es" %> 
```

现在，每当我尝试运行 rake 路由或导航到我得到的 URL

```
C:\www\project>rake routes
  rake aborted!
  missing :controller 
```

我对路线相当陌生，有人可以帮我看看/解释这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T23:16:02.273

我刚刚将您发布的所有代码粘贴到了一个新的 Rails 应用程序中，并且它工作正常。我的猜测是您的 routes.rb 文件中有其他路由，其中​​一个是无效的。您发布的路线如下所示：

```
mike@sleepycat:~/projects/testproj$ rake routes
site_home GET /:locale/site/home(.:format)               :locale/site#home
site_about_us GET /:locale/site/about_us(.:format)       :locale/site#about_us
site_faq GET /:locale/site/faq(.:format)                 :locale/site#faq
site_discounts GET /:locale/site/discounts(.:format)     :locale/site#discounts
site_services GET /:locale/site/services(.:format)       :locale/site#services
site_contact_us GET /:locale/site/contact_us(.:format)   :locale/site#contact_us
site_admin GET /:locale/site/admin(.:format)             :locale/site#admin
site_posts GET /:locale/site/posts(.:format)             :locale/site#posts
categories_new_subcategory GET /:locale/categories/new_subcategory(.:format)  :locale/categories#new_subcategory
categories_edit_subcategory GET /:locale/categories/edit_subcategory(.:format) :locale/categories#edit_subcategory 
```

虽然您可能有类似的能力，但问题是您*应该这样*做。如果您还不熟悉它，我强烈建议您阅读面向资源的架构。我不建议您将 Rails 弯曲成奇怪的形状，除非您能很好地掌握它。它是 Rails 路由所基于的概念以及 routes.rb 中发生的事情在您理解之前不会有多大意义。

互联网上有很多可用的东西，一本为我澄清事情的好书是 Leonard Richardson 和 Sam Ruby 的 Restful Web services。我希望这会有所帮助。

# c - C 语言中的 Kinect 和 OpenNI 示例代码（也不是 C++）

> ID：10019537
> 
> 赞同：0
> 
> 时间：2012-04-04T21:29:52.167
> 
> 标签：c, kinect, openni

有没有人知道 C（不是 C++）中的一些示例代码，这些代码与“让事物看到”中给出的项目中使用的 Java/处理代码相一致？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T23:40:19.023

我自己没有尝试过，但这是我发现的东西：[https ://github.com/OpenNI/OpenNI/blob/master/Samples/NiCRead/NiCRead.c](https://github.com/OpenNI/OpenNI/blob/master/Samples/NiCRead/NiCRead.c)

显然它与[NiSimpleRead](http://openni.org/docs2/Tutorial/samples.html#nicread)相同，但我不确定这是否是您想要的。

# javascript - 如何使用 jquery / Javascript 将段落合并到父链接中？

> ID：10019538
> 
> 赞同：0
> 
> 时间：2012-04-04T21:30:00.443
> 
> 标签：javascript, jquery, merge, append

我该如何转这个：

```
<a class="link">
   <p class="paragraph">This is some text</p>
   <p class="paragraph">This is some more text</p>
   <p class="paragraph">And some more</p>
</a> 
```

进入这个：

```
<a class="link">
   This is some text This is some more text And some more
</a> 
```

用 jQuery。我尝试使用追加和合并，但我无法弄清楚。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T21:31:45.187

由于该[`text`](http://api.jquery.com/text/)方法返回元素的文本内容及其后代，因此您可以使用它：

```
var link = $("a.link");
link.text(link.text());​​​​​​​​​ 
```

从文档：

> 获取匹配元素集中每个元素的组合文本内容，包括它们的后代。

这是一个[工作示例](http://jsfiddle.net/ehCVt/)。

**更新**（见评论）

如果这需要应用于多个`.link`元素，您可以使用`each`：

```
$("a.link").each(function() {
    $(this).text($(this).text()); 
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T21:33:24.000

这将起作用：

```
$("a.link").text(function(i,text){
    return text;
}); 
```

还有另一种方式（未测试）：

```
// you can optionally filter to
// only p elements too with
// .children("p")
$("a.link").children().contents().unwrap(); 
```

这是第二种的另一种变体：

```
$("a.link p").contents().unwrap(); 
```

**编辑：**只是为了清楚起见：
所有这些解决方案都适用于多个元素。第一个解决方案是一种相对不常见的语法，可用于大多数 jQuery setter 函数。它在每个匹配的元素上运行回调，并将属性/属性的值设置为从回调返回的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T21:33:19.930

试试这个

```
 $(document).ready(function(){
      var concatText = "";

      $("p.paragraph").each(function(){
       concatText = concatText + " " + $(this).text() 
      });

        $("a.link").html(concatText);
​     });​ 
```

# html - Internet Explorer 显示粉色条带

> ID：10019541
> 
> 赞同：0
> 
> 时间：2012-04-04T21:30:04.410
> 
> 标签：html, css, wordpress

我正在网站[http://childrensdentalland.com/](http://childrensdentalland.com/)上工作，它是一个 wordpress 网站。当从除 IE 之外的所有浏览器查看时，该网站显示正常，但是当我们通过 IE 查看时，它在“欢迎来到凤凰儿科牙科专家”下显示一个粉红色的条带。

谁能帮我纠正这个问题。谢谢颂德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T21:47:51.563

你在那里有一些奇怪的绝对定位。

相反，您应该做的是向左浮动 .menu-header，向右浮动 #searchpedi，然后在 .navshadow 上清除两者。删除所有 position: absolute 并使用 float 代替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T08:00:18.073

嗨，很简单，您只需在 css 文件中定义一个属性`.navshadow{top:221px;}`

像这样

```
.navshadow {top:221px;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T21:44:41.933

嗯可能与浮动有关。您的 navDiv 没有浮动，它可以破坏浏览器中的内容。

还要检查您的边距和高度。让它们设置，这也可以解决问题

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T21:44:58.113

尝试将此添加到您的课程中。我在 Firefox 中这样做只是为了看看发生了什么。但无论如何。我认为这是因为它需要有`float:left;`。我没有带有开发工具的 IE，所以我有点摸不着头脑。

```
.footshadow {
float:left;
margin-top:13px; /*this will have to be tweaked*/
} 
```

# java - 如何选择使用哪个构造函数以及Class类型属于哪个类

> ID：10019544
> 
> 赞同：1
> 
> 时间：2012-04-04T21:30:41.447
> 
> 标签：java, constructor, hashmap

我有一个类，我在静态块中初始化了 hashmap。通过密钥，我检索了一个类的值。为了为这个类创建对象。我已经使用构造函数类来获取构造函数并传递参数和创建的对象。

我在哈希图中有两个班级。要为 EchoExpression 创建对象，我需要传递两个参数，而对于 OutExpression 类，我只需要传递一个参数（字符串）。

1.  根据键返回的类，我需要执行要获取和实现的构造函数，无论是带有一个参数还是两个参数的构造函数。

2.  在 EchoExpression 中，构造函数包含两个参数。

例如：

```
JXPathExpression check = new JXPathExpression(String expression, Class<?> type) 
```

String 属于 String.class 但 Class 类型参数也属于什么类？这样我就可以使用它来获取构造函数

```
public class ExampleFactory {

    private static HashMap<String,Class<?>> hmap = new HashMap<String,Class<?>>();

    static
    {                   
        hmap.put("echo", EchoExpression.class);         
        hmap.put("Out", OutExpression.class);                       
    }

    public void getExpo(String key,String expression)
      {
        Class aClass =map.get(key);

//Constructor implementation for OutExpression where only one argument string is passed

        Constructor constructor = aClass.getConstructor(new Class[]{String.class});

        Object object= constructor.newInstance(expression);

//Need constructor for passing two arguments string and class<?> for EchoExpression

        return null;        
      }                
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T21:54:45.303

对于这样的事情，您应该在所有情况下尝试使用统一的构造函数参数或存储每个类的参数的方法。

现在回答你的问题。`Class<?>`是对未知类的引用。基本上到任何班级。使用它时，它或多或少等于`Class<Object>`因为所有类都`Object`作为父类。

要使用具有多个参数的构造函数，您首先需要获取合适的构造函数。在这一点上，如果类不支持具有这种参数配置的实例，它已经可以获取发生的错误。获取构造函数的工作方式如下：

```
aClass.getConstructor(new Class[]{String.class, Object.class, ...});
```

This works with as many argument types as you like. Creating the new instance of the class then works this way:

```
constructor.newInstance(theString, theObject, ...);
```

The function `newInstanace` is implemented as many arguments as needed. So depending on how many arguments the constructor that was requested requires the `newInstance` function will be able to work with it.

For all what you intend... maybe a proposal: Maybe its a option not to load the new objects using reflection but rather by storing instances of those objects and returning copies of the objects created using copy constructors or the `clone` method. In many cases this is less difficult to get running.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T21:40:54.420

也许您正在寻找的是 Class.class ，例如：

```
Constructor constructor = aClass.getConstructor(new Class[]{String.class, Class.class}); 
```

# dynamics-crm-2011 - 在 Dynamics CRM 2011 图表上组合属性分组

> ID：10019545
> 
> 赞同：1
> 
> 时间：2012-04-04T21:30:42.553
> 
> 标签：dynamics-crm-2011, dynamics-crm, microsoft-dynamics, fetchxml

如果我有一个带有状态代码的约会列表，我想创建一个饼图，有没有办法组合一些状态代码以使图表更具可读性：

示例：我有状态代码 A1、A2、A3、A4、B1、B2、B3、B4、C1、C2、C3、C4。有没有一种方法可以通过 FetchXML 创建所有 A、所有 B 和所有 C 状态代码的分组，以便饼图只有 3 个部分？

这是现有的代码：

```
 <visualization>
  <visualizationid>{F312E947-987E-E111-8116-00155D825C08}</visualizationid>
  <name>This Week's Status Codes</name>
  <primaryentitytypecode>serviceappointment</primaryentitytypecode>
  <datadescription>
    <datadefinition>
      <fetchcollection>
        <fetch mapping="logical" aggregate="true">
          <entity name="serviceappointment">
            <attribute groupby="true" alias="_CRMAutoGen_groupby_column_Num_0" name="statuscode" />
            <attribute alias="_CRMAutoGen_aggregate_column_Num_0" name="statuscode" aggregate="count" />
          </entity>
        </fetch>
      </fetchcollection>
      <categorycollection>
        <category alias="_CRMAutoGen_groupby_column_Num_0">
          <measurecollection>
            <measure alias="_CRMAutoGen_aggregate_column_Num_0" />
          </measurecollection>
        </category>
      </categorycollection>
    </datadefinition>
  </datadescription>
  <presentationdescription>
    <Chart Palette="None" PaletteCustomColors="55,118,193; 197,56,52; 149,189,66; 117,82,160; 49,171,204; 255,136,35; 97,142,206; 209,98,96; 168,203,104; 142,116,178; 93,186,215; 255,155,83">
      <Series>
        <Series ShadowOffset="0" IsValueShownAsLabel="True" Font="{0}, 9.5px" LabelForeColor="59, 59, 59" CustomProperties="PieLabelStyle=Inside, PieDrawingStyle=Default" ChartType="pie">
          <SmartLabelStyle Enabled="True" />
        </Series>
      </Series>
      <ChartAreas>
        <ChartArea>
          <Area3DStyle Enable3D="false" />
        </ChartArea>
      </ChartAreas>
      <Legends>
        <Legend Alignment="Center" LegendStyle="Table" Docking="right" IsEquallySpacedItems="True" Font="{0}, 11px" ShadowColor="0, 0, 0, 0" ForeColor="59, 59, 59" />
      </Legends>
      <Titles>
        <Title Alignment="TopLeft" DockingOffset="-3" Font="{0}, 13px" ForeColor="0, 0, 0"></Title>
      </Titles>
    </Chart>
  </presentationdescription>
  <isdefault>false</isdefault>
</visualization> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-11T21:09:50.833

您不能在图表中聚合单独的类型。相反，为此创建一个单独的字段并正确映射数据。按需工作流可以非常轻松地完成此数据迁移任务。

# php - Mysql逗号分隔的列匹配来自另一个表

> ID：10019547
> 
> 赞同：0
> 
> 时间：2012-04-04T21:30:57.657
> 
> 标签：php, mysql

我想从 table2 中的逗号分隔列中选择所有匹配项，其中列可能是这样的：0,1,2 OR 2,4,5 OR 2,5 OR 1,3,5 等。

我尝试过：

```
SELECT * from table where 1,3,5 IN(SELECT commaseparated FROM table2) WHERE .. 
```

但是使用逗号时语句出错。

我也尝试过使用 REGEXP 但在我的情况下我需要搜索 1,3,5 内的所有匹配项

我该如何解决这个问题？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T21:36:12.583

在标准 SQL 中无法做到这一点。它是

```
 WHERE singlevalue IN (list, of, values) 
```

如果您想将列表与列表进行比较，您应该修改您的表格，以便它们正确规范化。在字段中存储格式化数据基本上否定了拥有关系数据库的目的 - 如果数据不是允许形成关系的格式，则无法与数据建立关系。

如果这些 CSV 列表位于子表中，您可以执行一个非常简单的 JOIN 查询来满足您的规范。

# java - 如何：Eclipse Maven 安装带有依赖项的构建 jar

> ID：10019549
> 
> 赞同：20
> 
> 时间：2012-04-04T21:31:13.953
> 
> 标签：java, maven, dependencies, maven-3, m2eclipse

我在 Eclipse 中使用 Eclipse Maven (m2e)，我正在运行我的项目，如下所示：

我的`pom.xml`样子是这样的：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>ro.project</groupId>
    <packaging>jar</packaging>
    <version>1.0-SNAPSHOT</version>
    <name>ro.project</name>

    <properties>
        <org.springframework.version>3.1.1.RELEASE</org.springframework.version>
        <org.hibernate.version>4.1.0.Final</org.hibernate.version>
    </properties>
    <dependencies>

        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-core</artifactId>
            <version>${org.springframework.version}</version>
        </dependency>
    <build>
        <plugins>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-jar-plugin</artifactId>
                <configuration>
                    <archive>
                        <manifest>
                            <addClasspath>true</addClasspath>
                            <classpathPrefix>lib/</classpathPrefix>
                            <mainClass>ro.project.ProjectServer</mainClass>
                        </manifest>
                    </archive>
                </configuration>
            </plugin>
            <plugin>
                <artifactId>maven-antrun-plugin</artifactId>
                <dependencies>
                    <dependency>
                        <groupId>com.sun</groupId>
                        <artifactId>tools</artifactId>
                        <version>1.7.0_02</version>
                        <scope>system</scope>
                        <systemPath>${java.home}/../lib/tools.jar</systemPath>
                    </dependency>
                </dependencies>
                <executions>
                    <execution>
                        <id>ant-magic</id>
                        <phase>prepare-package</phase>
                        <goals>
                            <goal>run</goal>
                        </goals>
                        <configuration>
                            <tasks>
                                <property name="compile_classpath" refid="maven.compile.classpath" />
                                <property name="runtime_classpath" refid="maven.runtime.classpath" />
                                <property name="test_classpath" refid="maven.test.classpath" />
                                <property name="plugin_classpath" refid="maven.plugin.classpath" />

                                <ant antfile="${basedir}/clientExport.xml" target="export-all" />
                            </tasks>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins>
    </build>

    <artifactId>project-core</artifactId>
    <url>http://www.project.ro</url>
</project> 
```

在我运行 Maven 安装后，它正在工作......

Maven 运行配置：

![maven安装部署jar](../Images/d29f54ec95d39f85983dbc251a1e89c4.png)

问题是我生成的`.jar`它没有包含依赖项....我如何配置`pom.xml`以包含`.jar`格式中的所有依赖项而不是解包..因为似乎解包不正确...

确保包括所有 jar 都可以。我下载并添加了每个库到`jar`'s`/lib`文件夹中并且 jar 正在运行...所以..我唯一的问题是：如何配置`pom.xml`才能以`jar`格式添加我的所有依赖项?

我尝试了所有方法：

1.  `assembly:assembly`
2.  `assembly:single`
3.  `assembly:single`使用我的描述符（一个`assemble.xml`文件），但它不起作用
4.  `maven copy dependencies`插件但仍然无法与 Eclipse Maven 一起使用 -`m2e`

我没有解决方案......谁能告诉我在jar中添加我的依赖项的正确方法？我不敢相信这`maven`是如此复杂，我无法在任何地方找到我的问题的答案..

先感谢您

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-04-04T21:54:19.157

有几种方法可以做到这一点。

**1）**如果您想要一个 uber-jar（重新打包所有依赖项），请查看使用和配置[*maven-shade-plugin*](https://maven.apache.org/plugins/maven-shade-plugin/)：

```
 <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-shade-plugin</artifactId>
        <version>1.6</version>
        <executions>
          <execution>
            <phase>package</phase>
            <goals>
              <goal>shade</goal>
            </goals>
            <configuration>
              <transformers>
                <transformer implementation="org.apache.maven.plugins.shade.resource.ManifestResourceTransformer">
                  <mainClass>com.group.id.Launcher1</mainClass>
                </transformer>
              </transformers>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build> 
```

这将解压缩所有依赖项并将它们合并到一个 JAR 文件中。

**2)**如果你想提供一个包（zip、tar.gz 等）和包中的解压 JAR 文件（可能在 lib/ 下），那么你需要查看[*maven-assembly-plugin*](https://maven.apache.org/plugins/maven-assembly-plugin/)：

```
 <build>
    <plugins>
      <plugin>
        <groupId>org.apache.maven.plugins</groupId>
        <artifactId>maven-assembly-plugin</artifactId>
        <version>2.3</version>
        <executions>
          <execution>
            <id>create-distro</id>
            <phase>package</phase>
            <goals>
              <goal>single</goal>
            </goals>
            <configuration>
              <descriptors>
                <descriptor>src/main/assembly/dist.xml</descriptor>
              </descriptors>
            </configuration>
          </execution>
        </executions>
      </plugin>
    </plugins>
  </build> 
```

请注意，这需要一个程序集描述符`src/main/assembly/dist.xml`，示例如下所示：

```
<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0">
  <id>distribution</id>
  <formats>
    <format>zip</format>
  </formats>

  <dependencySets>
    <dependencySet>
      <useProjectArtifact>false</useProjectArtifact>
      <useTransitiveDependencies>false</useTransitiveDependencies>
      <unpack>false</unpack>
      <scope>runtime</scope>
      <fileMode>0755</fileMode>
      <directoryMode>0755</directoryMode>
      <outputDirectory>bin</outputDirectory>

      <includes>
        <include>com.group.id:project-launch1</include>
        <include>com.group.id:project-launch2</include>
      </includes>

    </dependencySet>
    <dependencySet>
      <useProjectArtifact>false</useProjectArtifact>
      <useTransitiveDependencies>true</useTransitiveDependencies>
      <unpack>false</unpack>
      <scope>runtime</scope>
      <fileMode>0644</fileMode>
      <directoryMode>0755</directoryMode>
      <outputDirectory>lib</outputDirectory>

      <includes>
        <include>com.group.id:project-lib1</include>
        <include>com.group.id:project-lib2</include>
        <include>com.group.id:project-lib3</include>
        <include>com.group.id:project-lib4</include>
      </includes>

    </dependencySet>
  </dependencySets>
</assembly> 
```

由于您现在正在组装依赖项，因此最好在 pom.xml 中定义依赖项，如下所示：

```
 <dependencies>
    <dependency>
      <groupId>com.group.id</groupId>
      <artifactId>project-launch1</artifactId>
      <version>0.0.1-SNAPSHOT</version>
      <type>jar</type>
    </dependency>
    <dependency>
      <groupId>com.group.id</groupId>
      <artifactId>project-launch2</artifactId>
      <version>0.0.1-SNAPSHOT</version>
      <type>jar</type>
    </dependency>
    <dependency>
      <groupId>com.group.id</groupId>
      <artifactId>project-lib1</artifactId>
      <version>0.0.1-SNAPSHOT</version>
      <type>jar</type>
    </dependency>
    ... and so on ...
  </dependencies> 
```

**3)**如果您要交付带有可执行 JAR 文件启动器的捆绑包，则除了*maven-assembly-plugin之外，您可能还需要添加*[*maven-jar-plugin*](https://maven.apache.org/plugins/maven-jar-plugin/)配置：

 *```
 <dependencies>
    <dependency>
      <groupId>com.group.id</groupId>
      <artifactId>project-lib1</artifactId>
      <version>0.0.1-SNAPSHOT</version>
      <type>jar</type>
    </dependency>
    <dependency>
      <groupId>com.group.id</groupId>
      <artifactId>project-lib2</artifactId>
      <version>0.0.1-SNAPSHOT</version>
      <type>jar</type>
    </dependency>
    <dependency>
      <groupId>com.group.id</groupId>
      <artifactId>project-lib3</artifactId>
      <version>0.0.1-SNAPSHOT</version>
      <type>jar</type>
    </dependency>
    ... and so on ...
  </dependencies>

  <build>
    <plugins>
      <plugin>
        <artifactId>maven-jar-plugin</artifactId>
        <configuration>
          <archive>
            <addMavenDescriptor>false</addMavenDescriptor>
            <compress>true</compress>
            <manifest>
              <mainClass>com.group.id.Launcher1</mainClass>
              <addClasspath>true</addClasspath>
              <classpathPrefix>../lib/</classpathPrefix>
            </manifest>
          </archive>
        </configuration>
      </plugin>
    </plugins>
  </build> 
```

请注意，“addClasspath”指令将项目依赖项添加到类路径中。这是 JAR 启动器所需要的，因为它们明确忽略所有 CLASSPATH 环境变量。*

# spring - Spring security：remember-me 不适用于自定义 AuthenticationProvider

> ID：10019550
> 
> 赞同：1
> 
> 时间：2012-04-04T21:31:15.577
> 
> 标签：spring, jsf, spring-security, remember-me

我正在使用自定义`AuthenticationProvider`：

```
public class CustomAuthenticationProviderImpl extends AbstractUserDetailsAuthenticationProvider {

    @Resource(name="userDetailsService")
    private UserDetailsService userDetailsService;

    //.......

} 
```

我也尝试使用记住我的功能：

```
<security:http auto-config="true" use-expressions="true" access-denied-page="/auth/accessDenied.xhtml" >

    <!-- ........... -->

    <security:remember-me user-service-ref="userDetailsService" key="some-string"/>

</security:http> 
```

一切正常，除了记住我。当我不使用 custom 时，它曾经工作过`AuthenticationProvider`。

为了使记住我起作用，我需要做什么？

**更新**

我也在使用`AuthenticationSuccessHandler`：

```
public class AuthenticationSuccessHandlerImpl extends SimpleUrlAuthenticationSuccessHandler {

    @Override
    public void onAuthenticationSuccess(HttpServletRequest request, HttpServletResponse response, Authentication authentication) throws ServletException, IOException {

        int timeout = 60*60;

        request.getSession().setMaxInactiveInterval(timeout); //60 minutes

        System.out.println("Session timeout of user: " + authentication.getName() + " has been set to: " + request.getSession().getMaxInactiveInterval() + " seconds.");

        setDefaultTargetUrl("/views/home.jsf");

        super.onAuthenticationSuccess(request, response, authentication);
    }
} 
```

**更新 2：**

重新启动 Tomcat 时，我得到以下调试输出。但是当我加载登录表单并提交它时 - 我没有看到`remember`调试输出中包含的任何文本，并且没有创建记住我的 cookie。

```
DEBUG [pool-2-thread-1] 2012-04-16 09:18:11,166 (DefaultSingletonBeanRegistry.java:217) - org.springframework.beans.factory.support.DefaultSingletonBeanRegistry getSingleton :
 Creating shared instance of singleton bean 'rememberMeFilter'
DEBUG [pool-2-thread-1] 2012-04-16 09:18:11,166 (AbstractAutowireCapableBeanFactory.java:430) - org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory createBean :
 Creating instance of bean 'rememberMeFilter'
DEBUG [pool-2-thread-1] 2012-04-16 09:18:11,182 (AbstractEnvironment.java:114) - org.springframework.core.env.AbstractEnvironment <init> :
 Initializing new StandardServletEnvironment
DEBUG [pool-2-thread-1] 2012-04-16 09:18:11,182 (MutablePropertySources.java:103) - org.springframework.core.env.MutablePropertySources addLast :
 Adding [servletConfigInitParams] PropertySource with lowest search precedence
DEBUG [pool-2-thread-1] 2012-04-16 09:18:11,182 (MutablePropertySources.java:103) - org.springframework.core.env.MutablePropertySources addLast :
 Adding [servletContextInitParams] PropertySource with lowest search precedence
DEBUG [pool-2-thread-1] 2012-04-16 09:18:11,182 (MutablePropertySources.java:103) - org.springframework.core.env.MutablePropertySources addLast :
 Adding [jndiProperties] PropertySource with lowest search precedence
DEBUG [pool-2-thread-1] 2012-04-16 09:18:11,182 (MutablePropertySources.java:103) - org.springframework.core.env.MutablePropertySources addLast :
 Adding [systemProperties] PropertySource with lowest search precedence
DEBUG [pool-2-thread-1] 2012-04-16 09:18:11,182 (MutablePropertySources.java:103) - org.springframework.core.env.MutablePropertySources addLast :
 Adding [systemEnvironment] PropertySource with lowest search precedence
DEBUG [pool-2-thread-1] 2012-04-16 09:18:11,182 (AbstractEnvironment.java:120) - org.springframework.core.env.AbstractEnvironment <init> :
 Initialized StandardServletEnvironment with PropertySources [servletConfigInitParams,servletContextInitParams,jndiProperties,systemProperties,systemEnvironment]
DEBUG [pool-2-thread-1] 2012-04-16 09:18:11,182 (AbstractAutowireCapableBeanFactory.java:504) - org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory doCreateBean :
 Eagerly caching bean 'rememberMeFilter' to allow for resolving potential circular references
DEBUG [pool-2-thread-1] 2012-04-16 09:18:11,182 (DefaultSingletonBeanRegistry.java:217) - org.springframework.beans.factory.support.DefaultSingletonBeanRegistry getSingleton :
 Creating shared instance of singleton bean 'rememberMeServices'
DEBUG [pool-2-thread-1] 2012-04-16 09:18:11,182 (AbstractAutowireCapableBeanFactory.java:430) - org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory createBean :
 Creating instance of bean 'rememberMeServices'
DEBUG [pool-2-thread-1] 2012-04-16 09:18:11,198 (AbstractAutowireCapableBeanFactory.java:504) - org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory doCreateBean :
 Eagerly caching bean 'rememberMeServices' to allow for resolving potential circular references
DEBUG [pool-2-thread-1] 2012-04-16 09:18:11,198 (AbstractBeanFactory.java:245) - org.springframework.beans.factory.support.AbstractBeanFactory doGetBean :
 Returning cached instance of singleton bean 'userDetailsService'
DEBUG [pool-2-thread-1] 2012-04-16 09:18:11,213 (AbstractAutowireCapableBeanFactory.java:1498) - org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory invokeInitMethods :
 Invoking afterPropertiesSet() on bean with name 'rememberMeServices'
DEBUG [pool-2-thread-1] 2012-04-16 09:18:11,213 (AbstractBeanFactory.java:245) - org.springframework.beans.factory.support.AbstractBeanFactory doGetBean :
 Returning cached instance of singleton bean 'org.springframework.security.methodSecurityMetadataSourceAdvisor'
DEBUG [pool-2-thread-1] 2012-04-16 09:18:11,213 (AbstractBeanFactory.java:245) - org.springframework.beans.factory.support.AbstractBeanFactory doGetBean :
 Returning cached instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'
DEBUG [pool-2-thread-1] 2012-04-16 09:18:11,213 (AbstractAutowireCapableBeanFactory.java:458) - org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory createBean :
 Finished creating instance of bean 'rememberMeServices'
DEBUG [pool-2-thread-1] 2012-04-16 09:18:11,213 (AbstractBeanFactory.java:245) - org.springframework.beans.factory.support.AbstractBeanFactory doGetBean :
 Returning cached instance of singleton bean 'org.springframework.security.authenticationManager'
DEBUG [pool-2-thread-1] 2012-04-16 09:18:11,213 (AbstractAutowireCapableBeanFactory.java:1498) - org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory invokeInitMethods :
 Invoking afterPropertiesSet() on bean with name 'rememberMeFilter'
DEBUG [pool-2-thread-1] 2012-04-16 09:18:11,213 (AbstractBeanFactory.java:245) - org.springframework.beans.factory.support.AbstractBeanFactory doGetBean :
 Returning cached instance of singleton bean 'org.springframework.security.methodSecurityMetadataSourceAdvisor'
DEBUG [pool-2-thread-1] 2012-04-16 09:18:11,213 (AbstractBeanFactory.java:245) - org.springframework.beans.factory.support.AbstractBeanFactory doGetBean :
 Returning cached instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'
DEBUG [pool-2-thread-1] 2012-04-16 09:18:11,213 (AbstractAutowireCapableBeanFactory.java:458) - org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory createBean :
 Finished creating instance of bean 'rememberMeFilter'
DEBUG [pool-2-thread-1] 2012-04-16 09:18:11,213 (AbstractBeanFactory.java:245) - org.springframework.beans.factory.support.AbstractBeanFactory doGetBean :
 Returning cached instance of singleton bean 'rememberMeServices'
DEBUG [pool-2-thread-1] 2012-04-16 09:18:11,213 (DefaultSingletonBeanRegistry.java:217) - org.springframework.beans.factory.support.DefaultSingletonBeanRegistry getSingleton :
 Creating shared instance of singleton bean 'rememberMeAuthenticationProvider'
DEBUG [pool-2-thread-1] 2012-04-16 09:18:11,213 (AbstractAutowireCapableBeanFactory.java:430) - org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory createBean :
 Creating instance of bean 'rememberMeAuthenticationProvider'
DEBUG [pool-2-thread-1] 2012-04-16 09:18:11,213 (AbstractAutowireCapableBeanFactory.java:504) - org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory doCreateBean :
 Eagerly caching bean 'rememberMeAuthenticationProvider' to allow for resolving potential circular references
DEBUG [pool-2-thread-1] 2012-04-16 09:18:11,213 (AbstractAutowireCapableBeanFactory.java:1498) - org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory invokeInitMethods :
 Invoking afterPropertiesSet() on bean with name 'rememberMeAuthenticationProvider'
DEBUG [pool-2-thread-1] 2012-04-16 09:18:11,213 (AbstractBeanFactory.java:245) - org.springframework.beans.factory.support.AbstractBeanFactory doGetBean :
 Returning cached instance of singleton bean 'org.springframework.security.methodSecurityMetadataSourceAdvisor'
DEBUG [pool-2-thread-1] 2012-04-16 09:18:11,213 (AbstractBeanFactory.java:245) - org.springframework.beans.factory.support.AbstractBeanFactory doGetBean :
 Returning cached instance of singleton bean 'org.springframework.transaction.config.internalTransactionAdvisor'
DEBUG [pool-2-thread-1] 2012-04-16 09:18:11,213 (AbstractAutowireCapableBeanFactory.java:458) - org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory createBean :
 Finished creating instance of bean 'rememberMeAuthenticationProvider' 
```

我有以下内容`AuthenticationSuccessHandlerImpl`：

`System.out.println("_spring_security_remember_me after authentication = " + request.getParameter("_spring_security_remember_me"));`

输出是：

`_spring_security_remember_me after authentication = on`

但是没有创建记住我的cookie！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T08:33:21.403

您可以尝试禁用 auto-config:`auto-config="false"`并直接声明 RememberMeAuthenticationProvider ：

```
<bean id="rememberMeFilter" class=
 "org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter">
  <property name="rememberMeServices" ref="rememberMeServices"/>
  <property name="authenticationManager" ref="authenticationManager" />
</bean>

<bean id="rememberMeServices" class=
 "org.springframework.security.web.authentication.rememberme.TokenBasedRememberMeServices">
  <property name="userDetailsService" ref="userService"/>
  <property name="key" value="some-string"/>
</bean>

<bean id="rememberMeAuthenticationProvider" class=
 "org.springframework.security.authentication.RememberMeAuthenticationProvider">
  <property name="key" value="some-string"/>
</bean> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T12:26:53.237

对于最新版本的 Spring 安全性，您可以添加如下配置：

它将帮助您创建一个过滤器，如果在安全上下文中找不到凭据，它将处理自动登录。它还可以帮助您创建 rememberMeServices 和 rememberMeAuthenticationProvider。

您说，在重写 CustomAuthenticationProviderImpl 之前，它可以工作。所以我想你已经设置好了。

现在的问题是，你重写了 CustomAuthenticationProviderImpl ，然后你打破了关于记住我的原始行。首先，您需要在自定义提供程序中设置 rememberMeService：

```
<beans:bean id="customFilter" class="..CustomAuthenticationProviderImpl ">
    <beans:property ... />
    <beans:property name="rememberMeServices" ref="rememberMeServices" />
</beans:bean> 
```

你可以试试这个，如果它说“rememberMeServices”找不到，那么你也应该设置remember me service作为上面的回复。

# gstreamer - 如何使用最短剪辑对视频矩阵进行编码？

> ID：10019552
> 
> 赞同：1
> 
> 时间：2012-04-04T21:31:21.180
> 
> 标签：gstreamer, video-encoding

我正在制作一个具有可变输入流长度的视频矩阵。如何在完成最短视频剪辑后停止写入文件？

这很重要，因为一旦剪辑完成播放，我不想看到空的视频框元素。

gstreamer 是否提供一些功能以在一段时间后停止处理？

```
GST_DEBUG=2 gst-launch-0.10 -e videomixer2 name=mix ! ffmpegcolorspace ! jpegenc ! avimux  ! filesink location=test.avi \
uridecodebin uri="file:///home/me/1.wmv" ! videoscale ! videorate ! "video/x-raw-yuv,width=300,height=200, framerate=25/1" ! videobox border-alpha=0 top=0 left=0 ! mix. \
uridecodebin uri="file:///home/me/2.wmv" ! videoscale ! videorate ! "video/x-raw-yuv,width=300,height=200,framerate=25/1" ! videobox border-alpha=0 top=0 left=-300 ! mix. \
uridecodebin uri="file:///home/me/3.wmv"  ! videoscale ! videorate ! "video/x-raw-yuv,width=300,height=200,framerate=25/1" ! videobox border-alpha=0 top=-200 left=0 ! mix. \
uridecodebin uri="file:///home/me/4.wmv"  ! videoscale ! videorate ! "video/x-raw-yuv,width=300,height=200,framerate=25/1" ! videobox border-alpha=0 top=-200 left=-300 ! mix. \ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T07:01:28.833

如果您知道最短的持续时间，则可以使用带有停止时间的搜索事件。当整个管道完成时，EOS 是按照定义的。您也许可以使用垫探针在 videomixer 的水槽垫上捕捉 EOS，然后停止。

# sql - 在 like 语句中加入 SQL Server 表

> ID：10019557
> 
> 赞同：13
> 
> 时间：2012-04-04T21:31:44.207
> 
> 标签：sql, tsql, select, join

我希望这不是重复。我检查了搜索，似乎找不到明确的答案。

我有一个表，它的主键设置为`UniqueIdentifier`. 我还有另一个表，其中有一`varchar`列基本上包含一个带有查询字符串的 url，该查询字符串包含我的第一个表中的 guid。

所以我的两张桌子就像：

**状态表**

```
StateID                                  StateName
EB06F84C-15B9-4397-98AD-4A63DA2A238E     Active 
```

**网址表**

```
URL
page.aspx?id=EB06F84C-15B9-4397-98AD-4A63DA2A238E 
```

我要做的是连接在一起`URLTable`，并且`StateTable`ON 的值`StateID`包含在 URL 表的 URL 中。我还没有真正弄清楚加入。我什至尝试只选择一张表并尝试按`StateTable`. 我试过做这样的事情：

```
SELECT  *
FROM URLTable
WHERE     EXISTS
    (SELECT  *
     FROM  StateTable
     WHERE URL LIKE '%' + StateID + '%') 
```

即使这样也不起作用，因为它说我正在比较`uniqueidentifier`and `varchar`。

有什么方法可以使用 like 命令连接 2 个表，并且 like 命令不比较 2 个不兼容的变量？

谢谢！！

更新：让我添加一些我应该提到的其他内容。该查询用于构建分析报告。这些表是 CMS 分析包的一部分......因此更新或更改表结构不是一种选择。

其次，这些表会看到非常高的流量，因为它们正在捕获站点分析......所以性能是一个非常重要的问题。第三件事是，在我的示例中，我说 id= 但可能有多个值，例如`id=guid&user=guid&date=date`.

更新 2：我刚刚意识到的另一件事让我感到恐惧的是，有时查询字符串会从 GUID 中删除破折号.. 有时没有.. 所以除非我弄错了，否则我不能将子字符串转换为`Uniqueidentifier`. 任何人都可以确认？*叹息*。我确实让它工作了

```
REPLACE('-','',CONVERT(varchar(50), a.AutomationStateId)) 
```

但现在我非常担心这方面的性能问题，因为 URL 的表非常大。不过，这可能是野兽的本性，除非我能做些什么。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-04T21:35:40.070

将 StateID 转换为兼容类型，例如

```
WHERE URL LIKE '%' + CONVERT(varchar(50), StateID) + '%' 
```

或者

```
WHERE URL LIKE N'%' + CONVERT(nvarchar(50), StateID) + N'%' 
```

如果 URL 是 nvarchar(...)

**编辑**

正如另一个答案中所指出的，这可能会导致大型表的性能不佳。LIKE 与 CONVERT 结合将导致表扫描。这对于小型表可能不是问题，但如果性能成为问题，您应该考虑将 URL 拆分为两列。一列将包含“page.aspx?id=”，另一列包含 UNIQUEIDENTIFIER。然后可以更轻松地优化您的查询。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T21:42:03.560

你知道吗，`=`总是在那里，总是一个`UNIQUEIDENTIFIER`。然后你可以这样做：

```
WHERE CAST(SUBSTRING(URL, CHARINDEX('=',URL)+1,LEN(URL)) AS UNIQUEIDENTIFIER)=StateID 
```

**编辑**

作为评论的一部分，您也可以使用`JOIN`. 像这样：

```
select 
   u.* 
from 
   urltable
join statetable s 
   on CAST(SUBSTRING(URL, CHARINDEX('=',URL)+1,LEN(URL)) AS UNIQUEIDENTIFIER)=StateID 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-04T21:43:53.557

```
select u.* from urltable
join statetable s on url like N'%' + (convert(varchar(50),s.stateid) + N'%' 
```

性能可能很糟糕

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-08T06:30:12.053

如果您首先构建一个临时表，并且可以选择为临时表建立索引，您可能会获得性能提升。然后，您还可以修改（您的临时表的）架构，这可以为您提供加入选项。通常，在加入 BIG 表时，首先将数据子集提取到临时表，然后再加入它会有所帮助。其他时候临时表的开销比使用“丑陋”连接更大

# ruby-on-rails - rails lib 目录中的模块

> ID：10019559
> 
> 赞同：0
> 
> 时间：2012-04-04T21:31:45.097
> 
> 标签：ruby-on-rails, module, instantiation, instance-variables

```
module MyModule
    def self.my_method
        @instance_variable ||= "some string"
    end
end 
```

考虑另一个`OtherModule`包含`MyModule`. 当多次`OtherModule`调用中的代码`my_method`将`@instance_variable`被多次实例化？还是只有一次？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T22:56:59.340

更新答案：

1.  如果委托模块调用该方法，您将收到错误消息。
2.  如果原始模块调用该方法，则类实例变量仅实例化 1 次。
3.  如果你想在一个模块中定义“类方法”，你不能定义`self.xx`然后简单地扩展/包含它。您应该“扩展”它，或“将其包含到本征类中”，例如

    ```
    module SomeModule
      def self.aim_to_be_class_method ;    end;  
      def aim_to_be_instance_method ;    end;
    end

    # class methods:  []
    # instance methods: ["aim_to_be_instance_method"]
    class SomeClassIncludingTheModule
      include SomeModule  
    end

    # class methods:  ["aim_to_be_instance_method"]
    # instance methods: []
    class SomeClassExtendingTheModule
      extend SomeModule   
    end

    # class methods:  ["aim_to_be_instance_method"]
    # instance methods: []
    class SomeClassMadeEigenClassIncludingModule
      class << self
        include SomeModule
      end
    end 
    ```

您的代码是“类实例变量”的示例。根据书<< metaprogramming ruby​​>>，第127页，您可以将“类实例变量”视为Java的静态字段。所以，我认为大多数情况下，它应该运行一次。

有关更多详细信息，请编写单元测试，看看会发生什么？不久后，我将使用我自己编写的单元测试代码更新我的答案。

更新：我的单元测试和结果：

```
# all of the code is placed in a file: class_instance_variable_test.rb

# define a class so that we see its initialize process
class Apple
  def initialize
    puts "Apple initialized~"
  end 
end

# define an original_module that calls Apple.new
module OriginalModule
  def self.original_method
    @var ||= Apple.new
  end 
end

# define another module to call the original_module
module DelegateModule
  include OriginalModule
end

# now the test begins
require 'test/unit'
class ClassInstanceTest < Test::Unit::TestCase

  # output of this test case: 
  # NoMethodError: undefined method `original_method' for DelegateModule:Module      
  def test_if_delegate_module_could_call_original_method_by_including_original_module
    DelegateModule.original_method
  end

  # output of this test case: 
  # ----- calling from original_method, 3 times called, how many times initialized?
  # Apple initialized~
  # ------ ends
  def test_if_we_could_call_original_method_from_original_module
    puts "----- calling from original_method, 3 times called, how many times initialized? "
    OriginalModule.original_method
    OriginalModule.original_method
    OriginalModule.original_method
    puts "------ ends "
  end

end 
```

# javascript - Javascript：使用当前 URL 中的变量来创建和打开新 URL

> ID：10019560
> 
> 赞同：-1
> 
> 时间：2012-04-04T21:31:49.353
> 
> 标签：javascript

我有一个如下所示的当前 URL：

[http://example?variables1=xxxx&example&variables2=yyyyy](http://example?variables1=xxxx&example&variables2=yyyyy)

我想使用 variables1 和 variables2 创建一个新 URL 并打开这个新 URL：

[http://example?variables3=variables1&example&variables4=variables2](http://example?variables3=variables1&example&variables4=variables2)

我希望有人可以帮助我:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T22:04:47.783

您将需要从第一个 URL 解析所需的查询参数，并使用字符串添加来创建第二个 URL。

[您可以使用此代码](https://stackoverflow.com/a/901144/816620)从 URL 中获取特定的查询参数。如果你使用它，你可以像这样得到 variables1 和 variables2：

```
var variables1 = getParameterByName("variables1");
var variables2 = getParameterByName("variables2"); 
```

然后，您可以使用它们来构建您的新 URL。

```
newURL = "http://example.com/?variables1=" + 
    encodeURIComponent(variables1) + 
    "&someOtherStuff=foo&variables2=" + 
    encodeURIComponent(variables2); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T22:10:46.853

因为我不完全了解需要更改的内容，所以这是我最好的尝试^*，使用[其他答案](https://stackoverflow.com/a/901144/1267663)和[在线资源](http://www.bloggingdeveloper.com/post/JavaScript-QueryString-ParseGet-QueryString-with-Client-Side-JavaScript.aspx)的混搭。

```
// the original url
// will most likely be window.location.href
var original = "http://example?variables1=xxxx&example&variables2=yyyyy";

// the function to pull vals from the URL
var getParameterByName = function(name, uri) {
    name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
    var regexS = "[\\?&]" + name + "=([^&#]*)";
    var regex = new RegExp(regexS);
    var results = regex.exec(uri);

    if(results == null) return "";
    else return decodeURIComponent(results[1].replace(/\+/g, " "));
};

// so, to get the vals from the URL
var variables1 = getParameterByName('variables1', original); // xxxxx
var variables2 = getParameterByName('variables2', original); // yyyyy

// then to construct the new URL
var newURL =  "http://" + window.location.host;
    newURL += "?" + "variables3=" + variables1;
    newURL += "&example&"; // I don't know what this is ...
    newURL += "variables4=" + variables2;

// the value should be something along the lines of
// http://example?variables3=xxxx&example&variables4=yyyy 
```

​</p>

^*所有这些都未经测试。

# .net - 使用 MassTransit 时 IIS 冻结

> ID：10019566
> 
> 赞同：1
> 
> 时间：2012-04-04T21:32:17.277
> 
> 标签：.net, iis, msmq, servicebus, masstransit

我们在 Web 应用程序的请求/响应模型中使用 MassTransit。我们能够发送请求并接收响应。出于测试/调试目的，我们将响应处理程序上的 HandleTimeOut 设置为 1 小时。问题是当服务器无法发送响应时，我无法在客户端做任何事情（我无法访问任何其他页面）。在重置 IIS 之前，应用程序服务器不会响应来自浏览器的任何其他请求。这是预期的行为。如果可以的话，有人可以解释一下为什么 IIS 没有响应任何其他页面请求，以及是否有办法改变这种行为。

我在 autofac 模块中注册总线

```
builder.Register(c => ServiceBusFactory.New(sbc =>
        {
            sbc.UseMsmq();
            sbc.VerifyMsDtcConfiguration();
            sbc.VerifyMsmqConfiguration();
            sbc.ReceiveFrom("msmq://localhost/MassTransit_ClientQueue");
            sbc.UseBinarySerializer();
            sbc.SetCreateTransactionalQueues(false);
        })).As<IServiceBus>().SingletonScoped(); 
```

我的客户端代码如下所示

```
var bus = IoC.Resolve<IServiceBus>();
bus.GetEndpoint(new Uri("msmq://localhost/MassTransit_ServerQueue"))
                        .SendRequest(new Message(), bus, rc =>
                        {
                            rc.HandleTimeout(new TimeSpan(1, 0, 0),
                                () => { });
                            rc.Handle<MessageResponse>(resmess =>
                            {

                            });
                            rc.Handle<MassTransit.Fault<Message>>
                                (resmess =>
                                    {

                                    });
                        }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T21:19:43.800

原因是您的 ASP.Net Web 应用程序的用户基本上已经序列化了对您的 Web 应用程序的访问——您不能在 ASP.Net 中对单个用户会话 id 进行并行请求，除非您调用的自定义 HttpHandler 没有没有实现接口`IRequiresSessionState`。

因此，如果您没有得到响应，并且您等待一个小时以等待超时，那么您将无法在该小时内为该应用程序域为该用户发出更多 http 请求，直到您捆绑等待的线程消息已超时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T22:57:03.330

这可能是由于 MassTransit 未配置为一次处理多条消息。

[http://readthedocs.org/docs/masstransit/en/latest/configuration/config_api.html#bus-tuning-options](http://readthedocs.org/docs/masstransit/en/latest/configuration/config_api.html#bus-tuning-options)

```
ServiceBusFactory.New(sbc =>
{
  //...
  sbc.SetConcurrentConsumerLimit(5); //try setting this to a larger number.
  //...
}); 
```

# c# - 模拟 RouteData 以测试 HtmlHelper RouteLink

> ID：10019571
> 
> 赞同：1
> 
> 时间：2012-04-04T21:33:04.607
> 
> 标签：c#, asp.net-mvc-3, unit-testing, moq

帮手：

```
public static MvcHtmlString RouteLink(this HtmlHelper helper, String linkText, String routeName, Object routeValues, String status)
{
    if (status.ToLower() == "post-game" || status.ToLower() == "mid-game")
    {
        return helper.RouteLink(linkText, routeName, routeValues);
    }

    return MvcHtmlString.Create("&nbsp;");
} 
```

单元测试：

```
[TestMethod]
public void RouteLinkTest()
{
    var httpContext = new Mock<HttpContextBase>();
    var routeData = new Mock<RouteData>();
    var viewContext = new ViewContext { HttpContext = httpContext.Object, RouteData = routeData.Object };

    var helper = new HtmlHelper(viewContext, new Mock<IViewDataContainer>().Object);
    var target01 = helper.RouteLink("Linking Text", "route-name", new { id = "id" }, "status");
    Assert.IsNotNull(target01);
} 
```

错误：

```
Test method Web.Tests.Extensions.HtmlHelpersTest.RouteLinkTest threw exception: 
System.ArgumentException: A route named 'route-name' could not be found in the route collection.
Parameter name: name 
```

问题：如何模拟路线以获得正确的路线名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T16:38:15.310

而不是模拟路由值告诉 MvcApplication 注册它们

```
 var routes = new RouteCollection();
  MvcApplication.RegisterRoutes(routes); 
```

当我必须在我的控制器中使用类似的东西测试一些 redirectToAction 时，我会使用它

```
 var controller = GetController();
  var httpContext = Utilities.MockControllerContext(true, false).Object;
  controller.ControllerContext = new ControllerContext(httpContext, new RouteData(), controller);
  var routes = new RouteCollection();
  MvcApplication.RegisterRoutes(routes);
  controller.Url = new UrlHelper(new RequestContext(httpContext, new RouteData()), routes);
  var result = controller.DoMyStuff();
  Assert.IsInstanceOfType(typeof(RedirectResult), result);
  var actual = (RedirectResult)result;
  Assert.AreEqual("/myurl", actual.Url.ToString()); 
```

我从来没有测试过像你这样的助手，但我认为这应该可行

# c# - 切换按钮可见性不起作用

> ID：10019572
> 
> 赞同：0
> 
> 时间：2012-04-04T21:33:04.733
> 
> 标签：c#, windows-phone-7, xaml

我有一个使用简单的向前和向后导航方案的网络浏览器，如果用户选择，也可以刷新或停止导航。所有导航都正常工作，但是当我尝试切换“刷新”和“停止”按钮时，会出现我的问题，具体取决于网络浏览器是正在导航还是已导航。只要没有导航发生，我希望将刷新按钮设置为可见，并且在导航发生时将停止按钮设置为可见。我的基本实现如下，但根据这些场景，我似乎无法让按钮从可见切换到折叠。

主页.xaml

```
<Button x:Name="RefreshButton" Content="" Style="{StaticResource RefreshBtn}" Grid.Column="0" Grid.Row="0" Visibility="Visible" Click="RefreshButton_Click" toolkit:TiltEffect.IsTiltEnabled="True">
<Button x:Name="StopButton" Content="" Style="{StaticResource StopBtn}" Grid.Column="0" Grid.Row="0" Visibility="Collapsed" Click="StopButton_Click" toolkit:TiltEffect.IsTiltEnabled="True"/> 
```

MainPage.xaml.cs

```
public MainPage()
    {
        InitializeComponent();

        //Change Navigation buttons if the browser is currently Navigating
        if (TheBrowser._IsNavigating == false)
        {
            RefreshButton.Visibility = Visibility.Visible;
            StopButton.Visibility = Visibility.Collapsed;
        }
        else
        {
            RefreshButton.Visibility = Visibility.Collapsed;
            StopButton.Visibility = Visibility.Visible;
        }
        //while (TheBrowser._IsNavigating == true)
        //{
        //    RefreshButton.Visibility = Visibility.Collapsed;
        //    StopButton.Visibility = Visibility.Visible;
        //}
    } 
```

WebBrowser.xaml.cs

```
//Flag to check if the browser is navigating
    public bool _IsNavigating = false;

void TheWebBrowser_Navigating(object sender,
        Microsoft.Phone.Controls.NavigatingEventArgs e)
    {
        _IsNavigating = true;
    }

    void TheWebBrowser_Navigated(object sender,
        System.Windows.Navigation.NavigationEventArgs e)
    {
        _IsNavigating = false;
    } 
```

我的 WebBrowser.xaml.cs 是嵌入到 MainPage.xaml 并命名为 TheBrowser 的 webbrowser 用户控件。调试时，我可以看到 bool 变量 _IsNavigating 在 true 和 false 之间的变化，但在 MainPage.xaml.cs 中没有检测到这种变化，这就是我认为按钮可见性没有变化的原因。任何有关此问题的帮助将不胜感激。我已经没有如何解决这个问题的想法了！提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:40:52.970

设置可见性的代码放错地方了，现在只在页面构建时调用。

每当您的`_isNavigating`变量更改时，您都必须调用代码。

请执行下列操作：

```
 void ChangeVisibility()
 {
    if (TheBrowser._IsNavigating == false)
    {
        RefreshButton.Visibility = Visibility.Visible;
        StopButton.Visibility = Visibility.Collapsed;
    }
    else
    {
        RefreshButton.Visibility = Visibility.Collapsed;
        StopButton.Visibility = Visibility.Visible;
    }
  }

void TheWebBrowser_Navigating(object sender,
    Microsoft.Phone.Controls.NavigatingEventArgs e)
{
    _IsNavigating = true;
    ChangeVisibility();
}

void TheWebBrowser_Navigated(object sender,
    System.Windows.Navigation.NavigationEventArgs e)
{
    _IsNavigating = false;
    ChangeVisibility();
} 
```

# sharepoint - SharePoint 2010 - 图片库幻灯片 Web 部件

> ID：10019573
> 
> 赞同：1
> 
> 时间：2012-04-04T21:33:04.893
> 
> 标签：sharepoint

我正在使用图片库幻灯片 Web 部件，我想显示实际图像而不是预览图像。

我找到了一个解决方案，使用 JQUERY 将预览图像的宽度扩大到页面上我想要的宽度，但这当然会破坏图像的质量。

上传的实际图片将位于以下路径：/Home%20Page%20Banners/Banner2.jpg

SharePoint 创建预览图像并放置在另一个路径中并重命名文件，例如：/Home%20Page%20Banners/_w/Banner2_jpg.jpg

我的问题是如何让预览图像显示已上传的实际完整图像而不是按比例缩小的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-28T15:12:31.450

[图片库 SlideShow](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.webpartpages.picturelibraryslideshowwebpart.aspx) web 部件类被标记为[seal](http://msdn.microsoft.com/en-us/library/88c54tsw%28v=vs.71%29.aspx)，因此无法对其进行扩展。

但它可以在客户端进行定制，更准确地说，幻灯片库 (imglib.js) 中的函数可以被覆盖。

* * *

## 如何在图片库幻灯片 Web 部件中显示全尺寸（原始）图像

下面描述的解决方案允许在幻灯片 Web 部件中显示原始图像。为了完成它，在幻灯片中初始化图片的功能应该被覆盖（见下面的代码）。

步骤 1\. 将以下 JavaScript 代码保存到文件中，例如 SlideshowObjectInitializer.txt 并将其上传到 SiteAssets 库

```
<script type="text/javascript">

function SlideshowObjectInitializer() {

  ShowPic = (function(ShowPicOrig) {
      return function() {

           var ssObj = arguments[0];  //SlideShow object
           var curPicIdx=ssObj.index; //current picture index

           ShowPicOrig.apply(this, arguments); //call original ShowPic

           //apply some changes to display original picture in SlideShow control
           ssObj.image.src = ssObj.linkArray[curPicIdx]; //display original image instead of web image
           //change picture & container size to auto instead of fixed (by default web image size is used)
             ssObj.image.setAttribute('height','100%'); 
             ssObj.image.setAttribute('width','100%'); 
             var cell = ssObj.cell; 
             cell.style.width = 'auto';
             cell.style.height = 'auto';
             cell.style.display = '';
             var pcell = ssObj.cell.parentNode; 
           pcell.style.width = 'auto';
             pcell.style.height = 'auto';
      };
  })(ShowPic);

}  

ExecuteOrDelayUntilScriptLoaded(SlideshowObjectInitializer, 'imglib.js');
</script> 
```

步骤 2\. 在幻灯片 Web 部件所在的页面上添加[内容编辑器](http://msdn.microsoft.com/en-us/library/microsoft.sharepoint.webpartpages.contenteditorwebpart.aspx)Web 部件 (CEWP)，并在内容编辑器工具窗格中的内容链接下，键入 /SiteAssets/SlideshowObjectInitializer.txt。

* * *

有关自定义幻灯片 Web 部件的更多详细信息，请关注[此博文](http://vgrem.wordpress.com/2013/04/27/beyond-the-slideshow-web-part-capabilities-in-sharepoint-2010/)

# javascript - 在 jsrender 模板中定义一个变量

> ID：10019578
> 
> 赞同：0
> 
> 时间：2012-04-04T21:33:19.523
> 
> 标签：javascript, jquery, jsrender

我需要在循环中保留一个“colcounter”变量，用于填充 jsrender 模板。

这是我的模板代码

```
 <script id="datascapeTemplate" type="text/x-jsrender">

<div id="dsViewport">

    <div class="ds-column" style="width:{{:(name.length*100)}}px;">
        <h1 id="datascapeName">{{:name}}</h1>
        <div><span id="dsToggle">toggle</span></div>
    </div>
{{=colcounter}}
    {{for sections}}
    <div class="ds-section">

        <h3>{{:label}}</h3>
        <div class="ds-column" id="start">

        {{for items}}

            {{* if (colcounter > 4){ 
                colcounter = 1;
                }} 
        </div>
        <div class="ds-column" id="start">

            {{* } }}

            {{* 
            if ( data.selected || datascape.showInvisible) {  }}     
            <div class="ds-item {{* if (data.featured){ }} nowActive {{*} }} {{* if (data.active){ }} nowActiveRed {{*} }}"  background="{{:background}}" bgcolor="#000000" fgcolor="#FFFFFF">
                <div class="ds-item-container">
                    <h4>{{:title}}<br/>{{:time}}</h4>

                    <p><a item="{{:id}}" href="{{:url}}" class="itemLink">view file {{:colcounter}}</a></p>
                </div>
            </div>

            {{* colcounter++; }}

            {{* } }}

        {{/for}}
        </div>
        {{* colcounter=1; }}
        </div>
    {{/for}}
    {{* colcounter=1; }}
</div>

</script> 
```

不幸的是，它在循环的第一次迭代中打印“错误：未定义 colcounter。”。之后它工作。

似乎我初始化 colcounter 变量的方式不起作用，但我找不到正确的方法。`var colcounter =0`不起作用。

**更新**

*   jsfiddle：http: [//jsfiddle.net/ZX6Mk/](http://jsfiddle.net/ZX6Mk/)
*   colcounter 现在可以工作了。我在全局范围内声明了它。但我对 datascape.showInvisible 有疑问。它也会触发错误 `Error: Cannot read property 'showInvisible' of undefined`。

谢谢你的时间，一个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T15:36:55.770

我拿了你的小提琴并做了一些改变。[http://jsfiddle.net/johnpapa/bLSkz/](http://jsfiddle.net/johnpapa/bLSkz/)

1.  toggleButton 在 jQuery 中被引用，没有 #。所以我添加了那个.List 项，否则点击没有被捕获。
2.  您的小提琴没有引用 jQuery 和 JsRender，尽管您同时使用了两者，所以我添加了它们。（我假设你从来没有演奏过小提琴）
3.  没有 datascape.showInvisible 属性，所以我创建了一个。
4.  我使用参数将 showInvisible 传递给内部 for 循环，因此可以在其上下文中访问它。

    ```
    {{for sections ~showIt=showInvisible}}

    {{if (editorspick_amount > 0 || ~showIt)}} 
    ```

5.  您尝试渲染的模板不存在，因此我更改了渲染代码以使用您创建的脚本标签。这也设置了 allowCode=true，这是安全打开 allowCode 功能所必需的。

    ```
    $.templates("myTmpl", {markup: "#datascapeTemplate", allowCode: true });

    $('#toggleButton').click(function(){
        if(!rendered){
            rendered = true;
            $("#datascape").html(
                $.render.myTmpl( datascape.json )
            ).show();
        }
    }); 
    ```

6.  由于不需要使用允许代码，因此我更改了您过去`{{* }}`使用块的地方。`{{if}}`

这允许所有代码运行并渲染模板，尽管我承认我没有遵循您尝试做的所有事情。

希望这可以帮助。

一个建议...... allowCode 功能使模板非常难看，并且难以维护和阅读。我强烈建议用辅助函数（或其他构造）替换它。例如，您使用 allowCode 为某些元素创建样式。您可以为此使用自定义标记，并将逻辑移至 javascript 并简化您的模板。colcounter 可以移动到辅助函数。将逻辑移至 javascript 并保持模板/html 干净，这样更具可读性。只是我的 2 美分 :)

# javascript - 需要计算按钮上的复选框单击它不起作用

> ID：10019581
> 
> 赞同：1
> 
> 时间：2012-04-04T21:33:26.623
> 
> 标签：javascript, html, forms, function, checkbox

以下表单有 11 个复选框。我设置脚本以单击按钮执行一个函数，该按钮将显示一个弹出窗口，告诉您选中了多少个复选框。但是，当我单击该按钮时，没有任何反应。我认为我的错误可能在于功能代码和辨别名称与 ID 等的使用......但我不确定错误是什么。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
<style type="text/css">
body {background-color:Gray;}
body {text-align:left;}
p {text-align:center}

</style>

    <title>My First Project</title>
</head>
<body>
<form id="form1" >

<table align=center>
<tr>
<td><input type="checkbox" name="ingredients" value="sausage" /> Italian Sausage<br /></td>
<td><input type="checkbox" name="ingredients" value="mushrooms" /> Fresh Mushrooms<br /></td>
<td><input type="checkbox" name="ingredients" value="pepperoni" /> Pepperoni<br /></td>
</tr>

<tr>
<td><input type="checkbox" name="ingredients" value="onions" /> Fresh Onions<br /></td>
<td><input type="checkbox" name="ingredients" value="ham" /> Diced Ham<br /></td>
<td><input type="checkbox" name="ingredients" value="peppers" /> Fresh Green Peppers<br /></td>
</tr>

<tr>
<td><input type="checkbox" name="ingredients" value="beef" /> Beef<br /></td>
<td><input type="checkbox" name="ingredients" value="tomatoes" /> Diced Tomatoes<br /></td>
<td><input type="checkbox" name="ingredients" value="bacon" /> Bacon Bits<br /></td>
</tr>

<tr>
<td><input type="checkbox" name="ingredients" value="green" /> Green Olives<br /></td>
<td><input type="checkbox" name="ingredients" value="olives" /> Ripe Olives<br /></td>
</tr>
</table>
<br />

<script type="text/javascript">

        function anyCheck(form) {
            var total = 0;
            var max = form.ckbox.length;
            for (var idx = 0; idx < max; idx++) {
                if (eval("document.form.ckbox[" + idx + "].checked") == true) {
                    total++;
                }
            }
            alert("You selected " + total + " boxes.");
        }

    }
</script>
<input type="button" name="submit" value="Submit" onclick="anyCheck(form1);"  />
</form>
</body>
</html> 
```

更新代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
<style type="text/css">
body {background-color:Gray;}
body {text-align:left;}
p {text-align:center}

</style>

    <title>My First Project</title>
</head>
<body>
<form id="form1" >

<table align="center">
<tr>
<td><input type="checkbox" name="ingredients" value="sausage" /> Italian Sausage<br /></td>
<td><input type="checkbox" name="ingredients" value="mushrooms" /> Fresh Mushrooms<br /></td>
<td><input type="checkbox" name="ingredients" value="pepperoni" /> Pepperoni<br /></td>
</tr>

<tr>
<td><input type="checkbox" name="ingredients" value="onions" /> Fresh Onions<br /></td>
<td><input type="checkbox" name="ingredients" value="ham" /> Diced Ham<br /></td>
<td><input type="checkbox" name="ingredients" value="peppers" /> Fresh Green Peppers<br /></td>
</tr>

<tr>
<td><input type="checkbox" name="ingredients" value="beef" /> Beef<br /></td>
<td><input type="checkbox" name="ingredients" value="tomatoes" /> Diced Tomatoes<br /></td>
<td><input type="checkbox" name="ingredients" value="bacon" /> Bacon Bits<br /></td>
</tr>

<tr>
<td><input type="checkbox" name="ingredients" value="green" /> Green Olives<br /></td>
<td><input type="checkbox" name="ingredients" value="olives" /> Ripe Olives<br /></td>
</tr>
</table>
<br />

<script type="text/javascript">

    function anyCheck() {
    var form = document.getElementById("form1"),
        inputs = form.getElementsByTagName("input"),
        i,
        total = 0;

    for (i = 0; i < inputs.length; i++) {
        if (inputs[i].type.toLowerCase() === "checkbox" && inputs[i].checked)
            total++;
    }
    alert("You selected " + total + " boxes.");
}

    }
</script>
<input type="button" name="submit" value="Submit" onclick="anyCheck();"  />
</form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T21:48:51.557

正如其他答案所说，参数 in`anyCheck()`需要是对表单的引用。我将 id 作为字符串传递并`document.getElementById()`在函数内部使用。或者，如果只有一种形式，甚至不将其作为参数，如下所示：

```
function anyCheck() {
    var form = document.getElementById("form1"),
        inputs = form.getElementsByTagName("input"),
        i,
        total = 0;

    for (i = 0; i < inputs.length; i++) {
        if (inputs[i].type.toLowerCase() === "checkbox" && inputs[i].checked)
            total++;
    }
    alert("You selected " + total + " boxes.");
} 
```

[http://jsfiddle.net/ZxyPW/](http://jsfiddle.net/ZxyPW/)

您的代码试图使用一个`ckbox`不存在的数组。我展示的是如何选择所有`input`元素，然后测试每个元素是否都是选中的复选框。

您根本不需要使用`eval`，当然也不需要在数组（或类似数组的对象）中使用索引变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T21:52:54.750

试试这个代码。

您在传递表单以及如何访问表单中的元素时遇到了一些问题。我还强烈建议您使用内置 javascript 调试器的 IDE。VS 2010 是一款免费的，您可以使用它来开发 html 或 asp.net 代码。如果你愿意，你可以坚持使用直接的 html 代码。如果您打开正确的选项，IE 会内置一个。

要使用调试器，您可以取消注释 //debugger 行

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <style type="text/css">
        body
        {
            background-color: Gray;
        }
        body
        {
            text-align: left;
        }
        p
        {
            text-align: center;
        }
    </style>
    <title>My First Project</title>
</head>
<body>
    <form id="form1">
    <table align="center">
        <tr>
            <td>
                <input type="checkbox" name="ingredients" value="sausage" />
                Italian Sausage<br />
            </td>
            <td>
                <input type="checkbox" name="ingredients" value="mushrooms" />
                Fresh Mushrooms<br />
            </td>
            <td>
                <input type="checkbox" name="ingredients" value="pepperoni" />
                Pepperoni<br />
            </td>
        </tr>
        <tr>
            <td>
                <input type="checkbox" name="ingredients" value="onions" />
                Fresh Onions<br />
            </td>
            <td>
                <input type="checkbox" name="ingredients" value="ham" />
                Diced Ham<br />
            </td>
            <td>
                <input type="checkbox" name="ingredients" value="peppers" />
                Fresh Green Peppers<br />
            </td>
        </tr>
        <tr>
            <td>
                <input type="checkbox" name="ingredients" value="beef" />
                Beef<br />
            </td>
            <td>
                <input type="checkbox" name="ingredients" value="tomatoes" />
                Diced Tomatoes<br />
            </td>
            <td>
                <input type="checkbox" name="ingredients" value="bacon" />
                Bacon Bits<br />
            </td>
        </tr>
        <tr>
            <td>
                <input type="checkbox" name="ingredients" value="green" />
                Green Olives<br />
            </td>
            <td>
                <input type="checkbox" name="ingredients" value="olives" />
                Ripe Olives<br />
            </td>
        </tr>
    </table>
    <br />
    <script type="text/javascript">

        function anyCheck(form) 
        {
            //debugger;
            var total = 0;
            var max = form.length;
            for (var idx = 0; idx < max; idx++)
            {
                var element = form[idx];
                if(element.type == "checkbox" && element.checked)                
                {
                    total++;
                }
            }
            alert("You selected " + total + " boxes.");
        }
    </script>
    <input type="button" name="submit" value="Submit" onclick="anyCheck(document.getElementById('form1'));" />
    </form>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T21:37:24.703

你的函数调用有问题。form1 未定义。

使用 document.getElementById("form1"); 相反，像这样：

```
onclick="anyCheck(document.getElementById('form1'));" 
```

**编辑：** 还有一些问题：

没有 ckbox 数组。要么为此创建一个数组，要么使用 form.elements 数组（它将为您提供所有表单元素，然后您可以检查它是否是一个复选框）。

而且你不需要调用 eval。

```
 for (var idx = 0; idx < max; idx++) {
            if (form.ckbox[idx].checked == true) {
                total++;
            }
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T21:41:32.203

这适用于较新的浏览器（IE8+、FF 3.5+、Chrome）：

```
function anyCheck() {
        var total = 0;
        var max = document.querySelectorAll('[type=checkbox]');
        for (var idx = 0; idx < max.length; idx++) {
            if (max[idx].checked) {
                total++;
            }
        }
        alert("You selected " + total + " boxes.");
 } 
```

演示：http: [//jsfiddle.net/6pNjf/1/](http://jsfiddle.net/6pNjf/1/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-04T21:42:27.617

有几个问题：

您需要将字符串或元素传入anyCheck。我会做一个字符串。

```
onclick="anyCheck('form1')" 
```

在 anyCheck 中，您应该首先将表单的实际实例放入一个变量中，如下所示：

```
form = document.getElementById(form); 
```

然后，您可以使用循环遍历表单中的每个项目`getElementsByTagName()`

```
var inputs = form.getElementsByTagName("input");

for(var x = 0; x < inputs.length; x++) {
    var input = inputs[x];
    if(input.type != "checkbox") continue;

    if(input.checked) {
        total += 1;
    }
} 
```

# facebook - 第二次交换短期访问令牌？

> ID：10019582
> 
> 赞同：1
> 
> 时间：2012-04-04T21:33:27.213
> 
> 标签：facebook, facebook-access-token

如果您使用交换短期访问令牌以将其延长至 60 天

[https://graph.facebook.com/oauth/access_token?client_id=(APP_ID)&client_secret=(APP_SECRET)&grant_type=fb_exchange_token&fb_exchange_token=(AccessToken1ST](https://graph.facebook.com/oauth/access_token?client_id=(APP_ID)&client_secret=(APP_SECRET)&grant_type=fb_exchange_token&fb_exchange_token=(AccessToken1ST) )

当由此返回的访问令牌（AccessToken2）即将到期时，能否用原来的短期访问令牌（AccessToken1ST）换取新的访问令牌（AccessToken3）？

我会对其进行测试，但它只是一遍又一遍地返回相同的访问令牌，因为访问令牌 2 尚未过期。

我知道我可能可以使用访问令牌 2 来执行此操作，但我正在从某个文件中读取访问令牌 1，因为我没有以用户身份登录，我只想读取公共 Facebook 数据，而不必手动更新访问令牌 1（因为我没有对它的写访问权），如果可能的话，宁愿只使用访问令牌 1 来生成访问令牌 3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T02:44:31.027

您不能交换过期的令牌 - 但只能在过期之前交换短期访问令牌。

您的语言表明您可以交换过期的令牌，这违背了使它们过期的全部目的！

# html - 偏移页间链接

> ID：10019584
> 
> 赞同：2
> 
> 时间：2012-04-04T21:33:49.277
> 
> 标签：html, css

所以在我的页面上，我有一个固定在页面顶部的菜单。菜单大约 50 像素高，横跨屏幕的整个宽度。为了在加载时正确显示页面内容，我在正文内容的顶部设置了任意数量的填充。现在，如果我想使用以下方法链接到页面上的元素：

`<a href="#idOfElement">anchor text</a>`

通常，当单击这些链接时，相关元素会显示在浏览器窗口的顶部。但是，由于我在那里有我的固定菜单，因此菜单隐藏了内容（或至少前约 50 像素）。

有没有办法抵消内页链接，所以它不会将请求的元素带到页面的最顶部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:36:31.520

使用 Javascript (jQuery)，假设您的内容 div 和您的超链接有一个 id，并且假设我理解您的问题：

```
$("#yourAId").click(function(){

  $("#yourContentId").css("padding-top", $("#yourContentId").css("padding-top") + 50 );

}); 
```

# grails - Grails 插件项目中的 jsf2“...backup for factory javax.faces.context.FacesContextFactory”出错

> ID：10019587
> 
> 赞同：3
> 
> 时间：2012-04-04T21:34:06.493
> 
> 标签：grails, plugins, jsf-2

我在开发模式下运行 Grails 2.01 和 Tomcat（普通 STS 开发人员下载）。

我尝试运行 jsf 插件，但它在 Grails 2 中不起作用。

因此，为了指导我，我尝试构建自己的本地插件，将其构建为原生 v2 插件，并在途中了解插件项目。我一直在（缓慢地）解构 Grails jsf2 插件，并以艰难的方式一点一点地重建它，并且边走边学。

我的问题如下 - 我已经在本地构建了我的插件 - 称之为'wwjsf'。

我已经完成了 doWithWebDescriptor 关闭 - 但是当我运行插件时，我得到一个错误 - 服务器不会呈现 .xhtml 文件 - 任何此类请求都会给出相同的错误。

我已将最新的 Mojarra jsf 2.1.7 api/impl 文件包含在我的项目构建路径中 - 这是 Grails 2.01 中嵌入的默认 Tomcat 的错误。

```
Message: Could not find backup for factory javax.faces.context.FacesContextFactory.
Line | Method
->> 1008 | getFactory in javax.faces.FactoryFinder$FactoryManager
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
|    343 | getFactory in javax.faces.FactoryFinder
|    302 | init . . . in javax.faces.webapp.FacesServlet
|    303 | innerRun   in java.util.concurrent.FutureTask$Sync
|    138 | run . . .  in java.util.concurrent.FutureTask
|    886 | runTask    in java.util.concurrent.ThreadPoolExecutor$Worker
|    908 | run . . .  in     ''
^    662 | run        in java.lang.Thread
| Error 2012-04-04 18:32:55,748 [pool-6-thread-1] ERROR [localhost].[/wwjsf]  - Servlet    /wwjsf threw load() exception
Message: Could not find backup for factory javax.faces.context.FacesContextFactory.
Line | Method
->> 1008 | getFactory in javax.faces.FactoryFinder$FactoryManager
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -
|    343 | getFactory in javax.faces.FactoryFinder
|    302 | init . . . in javax.faces.webapp.FacesServlet
|    303 | innerRun   in java.util.concurrent.FutureTask$Sync
|    138 | run . . .  in java.util.concurrent.FutureTask
|    886 | runTask    in java.util.concurrent.ThreadPoolExecutor$Worker
|    908 | run . . .  in     ''
^    662 | run        in java.lang.Thread
| Server running. Browse to http://localhost:8080/wwjsf 
```

我已经完成了在闭包中最终确定的 web.xml 的转储，以便查看。我在 Google 上查找了错误，它说你必须设置 facesConfigureListener - 我有，我已经检查了 xml 中的 faces 服务器元素，我认为它看起来不错。

此外，我在 WEB-INF 下放了一个空 faces-config.xml（我会担心如何在稍后使用该插件的项目中创建它），正如一些 Google 警告所说，我必须拥有WEB-INF/lib 目录中的 jsf 文件 - 我手动创建了该 /lib 并将我的 jsf 2.1.7 api/impl jars 复制到其中以及用于皮带和大括号。

如何摆脱嵌入式 Tomcat 服务器中的此错误？

最终的 web.xml 配置如下所示：

```
 <?xml version="1.0" encoding="UTF-8"?>
 <web-app xmlns="http://java.sun.com/xml/ns/javaee" 
    xmlns:xsi="http://www.w3.org /2001/XMLSchema-instance" 
    metadata-complete="true" version="2.5" 
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
    http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">
   <display-name>/wwjsf-development-null</display-name>
   <context-param>
      <param-name>contextConfigLocation</param-name>
      <param-value>/WEB-INF/applicationContext.xml</param-value>
   </context-param>
   <context-param>
     <param-name>com.sun.faces.validateXml</param-name>
     <param-value>false</param-value>
   </context-param>
   <context-param>
      <param-name>com.sun.faces.verifyObjects</param-name>
      <param-value>false</param-value>
   </context-param>
   <context-param>
      <param-name>javax.faces.application.CONFIG_FILES</param-name>
      <param-value>C:\Users\802518659\Documents\grails-workspace\wwjsf\web-app\WEB-INF\faces-config.xml</param-value>
   </context-param>
   <context-param>
      <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
      <param-value>server</param-value>
   </context-param>
   <context-param>
      <param-name>javax.faces.FACELETS_RESOURCE_RESOLVER</param-name>
      <param-value>com.softwood.grails.jsf.facelets.GrailsResourceResolver</param-value>
   </context-param>
   <context-param>
      <param-name>javax.faces.PROJECT_STAGE</param-name>
      <param-value>Production</param-value>
   </context-param>
   <context-param>
      <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
      <param-value>.xhtml</param-value>
   </context-param>
   <context-param>
      <param-name>javax.faces.REFRESH_PERIOD</param-name>
      <param-value>0</param-value>
   </context-param>
   <context-param>
      <param-name>webAppRootKey</param-name>
      <param-value>wwjsf-development-null</param-value>
   </context-param>
   <filter>
     <filter-name>sitemesh</filter-name>
     <filter-class>org.codehaus.groovy.grails.web.sitemesh.GrailsPageFilter</filter-class>
   </filter>
   <filter>
     <filter-name>charEncodingFilter</filter-name>
     <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>
     <init-param>
        <param-name>targetBeanName</param-name>
        <param-value>characterEncodingFilter</param-value>
     </init-param>
     <init-param>
        <param-name>targetFilterLifecycle</param-name>
        <param-value>true</param-value>
     </init-param>
   </filter>
   <filter>
      <filter-name>urlMapping</filter-name>
      <filter-class>org.codehaus.groovy.grails.web.mapping.filter.UrlMappingsFilter</filter-class>
   </filter>
   <filter>
     <filter-name>hiddenHttpMethod</filter-name>
     <filter-class>org.codehaus.groovy.grails.web.filters.HiddenHttpMethodFilter</filter-class>
   </filter>
   <filter>
      <filter-name>grailsWebRequest</filter-name>
      <filter-class>org.codehaus.groovy.grails.web.servlet.mvc.GrailsWebRequestFilter</filter-class>
   </filter>
   <filter-mapping>
      <filter-name>charEncodingFilter</filter-name>
      <url-pattern>/*</url-pattern>
   </filter-mapping>
   <filter-mapping>
      <filter-name>hiddenHttpMethod</filter-name>
      <url-pattern>/*</url-pattern>
     <dispatcher>FORWARD</dispatcher>
     <dispatcher>REQUEST</dispatcher>
   </filter-mapping>
   <filter-mapping>
      <filter-name>grailsWebRequest</filter-name>
      <url-pattern>/*</url-pattern>
      <dispatcher>FORWARD</dispatcher>
      <dispatcher>REQUEST</dispatcher>
      <dispatcher>ERROR</dispatcher>
   </filter-mapping>
   <filter-mapping>
      <filter-name>sitemesh</filter-name>
       <url-pattern>/*</url-pattern>
       <dispatcher>REQUEST</dispatcher>
       <dispatcher>ERROR</dispatcher>
   </filter-mapping>
   <filter-mapping>
      <filter-name>urlMapping</filter-name>
      <url-pattern>/*</url-pattern>
      <dispatcher>FORWARD</dispatcher>
      <dispatcher>REQUEST</dispatcher>
   </filter-mapping>
   <listener>
      <listener-class>org.codehaus.groovy.grails.plugins.log4j.web.util.Log4jConfigListener</listener-class>
   </listener>
   <listener>
      <listener-class>com.sun.faces.config.ConfigureListener</listener-class>
    </listener>
    <listener>
        <listener-class>org.codehaus.groovy.grails.web.context.GrailsContextLoaderListener</listener-class>
    </listener>
  <servlet>
   <servlet-name>H2Console</servlet-name>
   <servlet-class>org.h2.server.web.WebServlet</servlet-class>
   <init-param>
    <param-name>-webAllowOthers</param-name>
    <param-value>true</param-value>
   </init-param>
   <load-on-startup>2</load-on-startup>
  </servlet>
  <servlet>
     <servlet-name>Faces Servlet</servlet-name>
     <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
     <load-on-startup>1</load-on-startup>
  </servlet>
  <servlet-mapping>
    <servlet-name>H2Console</servlet-name>
    <url-pattern>/dbconsole/*</url-pattern>
    </servlet-mapping>
  <servlet-mapping>
     <servlet-name>Faces Servlet</servlet-name>
     <url-pattern>*.xhtml</url-pattern>
  </servlet-mapping>

  <servlet>
    <servlet-name>grails</servlet-name>
    <servlet-class>org.codehaus.groovy.grails.web.servlet.GrailsDispatcherServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
  </servlet>

  <servlet>
    <servlet-name>gsp</servlet-name>
    <servlet-class>org.codehaus.groovy.grails.web.pages.GroovyPagesServlet</servlet-class>
    <init-param>
    <description>
            Allows developers to view the intermediate source code, when they pass
            a spillGroovy argument in the URL.
            </description>
    <param-name>showSource</param-name>
    <param-value>1</param-value>
    </init-param>
  </servlet>
  <servlet>
     <servlet-name>grails-errorhandler</servlet-name>
     <servlet-class>org.codehaus.groovy.grails.web.servlet.ErrorHandlingServlet</servlet-class>
  </servlet>
  <servlet-mapping>
    <servlet-name>gsp</servlet-name>
    <url-pattern>*.gsp</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
   <servlet-name>grails-errorhandler</servlet-name>
   <url-pattern>/grails-errorhandler</url-pattern>
  </servlet-mapping>
  <servlet-mapping>
     <servlet-name>grails</servlet-name>
     <url-pattern>*.dispatch</url-pattern>
  </servlet-mapping>
  <welcome-file-list>

    <welcome-file>index.html</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>index.gsp</welcome-file>
  </welcome-file-list>
  <error-page>
    <error-code>500</error-code>
    <location>/grails-errorhandler</location>
 </error-page>
 <jsp-config>
    <taglib>
        <taglib-uri>http://java.sun.com/jsp/jstl/core</taglib-uri>
        <taglib-location>/WEB-INF/tld/c.tld</taglib-location>
    </taglib>
       <taglib>
           <taglib-uri>http://java.sun.com/jsp/jstl/fmt</taglib-uri>
           <taglib-location>/WEB-INF/tld/fmt.tld</taglib-location>
        </taglib>
        <taglib>
            <taglib-uri>http://www.springframework.org/tags</taglib-uri>
            <taglib-location>/WEB-INF/tld/spring.tld</taglib-location>
        </taglib>
        <taglib>
            <taglib-uri>http://grails.codehaus.org/tags</taglib-uri>
            <taglib-location>/WEB-INF/tld/grails.tld</taglib-location>
        </taglib>
    </jsp-config>
 </web-app> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-07T12:07:45.947

当我收到此错误时（我在 spring 和 jsf2 旁边使用 maven 和嵌入式码头），我在 web.xml 上添加了这个

```
 <listener>
        <listener-class>com.sun.faces.config.ConfigureListener</listener-class> 
    </listener> 
```

并且错误消失了。

# solr - JBOSS 中的 SOLRCloud

> ID：10019593
> 
> 赞同：3
> 
> 时间：2012-04-04T21:34:34.707
> 
> 标签：solr, jboss, jboss7.x, solr4, jboss-eap-6

有没有人分享了在 2 节点 JBOSS 集群中设置 SOLR Cloud 的分步说明。我检查了其他新闻组，只发现了类似的问题，但没有关于 wiki 页面或带有分步说明的博客的详细信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-29T18:37:55.427

你去：[http](http://wiki.apache.org/solr/SolrCloud%20with%20Jboss)
://wiki.apache.org/solr/SolrCloud%20with%20Jboss 它看起来非常简单明了。

# php - 使用 PHP 强制 MySQL 字段为小写

> ID：10019594
> 
> 赞同：1
> 
> 时间：2012-04-04T21:34:37.250
> 
> 标签：php, mysql, uppercase, lowercase

我有一个带有电子邮件字段的数据库，它在数据库中循环以获取有关某个电子邮件地址的所有交易。

当他们的电子邮件以几个大写字母存储时，用户输入小写字母会导致它不显示他们的交易。当我修改它以与其他电子邮件完美匹配时，它可以工作。

我该如何修改它以使其正确地与电子邮件字段进行比较并且大小写无关紧要？是否会改变电子邮件的存储方式？

```
$result = mysql_query("SELECT * FROM `example_orders` WHERE `buyer_email`='$useremail';") or die(mysql_error()); 
```

提前谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T21:44:49.780

呃……你知道电子邮件地址是区分*大小写*的，对吧？来自[RFC 2821](https://www.ietf.org/rfc/rfc2821.txt)：

> 动词和参数值（例如，RCPT 命令和扩展名关键字中的“TO：”或“to：”
> ）不区分大小写，唯一的
> 例外是邮箱本地部分的本规范（SMTP
> 扩展可能明确指定大小写-敏感元素）。也就是说，命令动词、除邮箱本地部分以外的参数值
> 和自由格式文本可以以大写、小写或任何大小写
> 混合编码，而不影响其含义。这
> 不适用于邮箱本地部分。 *邮箱的本地部分
> 必须被视为区分大小写。* 因此，SMTP 实现
> 必须注意保留邮箱本地部分的大小写。邮箱
> 域不区分大小写。特别是，对于某些主机，
> 用户“smith”与用户“Smith”不同。但是，利用邮箱本地部分的大小写敏感性会阻碍互操作性
> ，因此不鼓励使用。

（重点补充）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T21:41:26.227

混合 PHP/MySQL 解决方案：

```
$result = mysql_query("
    SELECT * 
    FROM example_orders
    WHERE LOWER(buyer_email) = '" . strtolower($useremail) . "';
") or die(mysql_error()); 
```

它所做的是将比较的两边都转换为小写。这不是很有效，因为使用`LOWER`会阻止 MySQL 使用索引进行搜索。

**更高效的纯 SQL 解决方案：**

```
$result = mysql_query("
    SELECT * 
    FROM example_orders
    WHERE buyer_email = '$useremail' COLLATE utf8_general_ci;
") or die(mysql_error()); 
```

在这种情况下，我们强制使用不区分大小写的排序规则进行比较。如果该列首先具有不区分大小写的排序规则，则您不需要它。

下面是如何更改列排序规则，正如 Basti 在评论中所建议的那样：

```
ALTER TABLE `example_orders` 
CHANGE `buyer_email` `buyer_email` VARCHAR( 100 ) 
   CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL 
```

如果您选择这样做，您可以运行不带`COLLATE utf8_general_ci`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-04T21:36:47.300

如果你这样做`WHERE buyer_email LIKE '...'`，默认情况下会进行不区分大小写的匹配。

但是，对于电子邮件字段，我更喜欢在将电子邮件地址插入数据库时​​将其小写。

# c++ - 可变长度数据和零长度数组的二进制序列化，安全吗？

> ID：10019597
> 
> 赞同：3
> 
> 时间：2012-04-04T21:34:51.320
> 
> 标签：c++, c, serialization

我做了一些研究，但找不到明确的赞成或反对意见。

我想要的是一个固定大小的结构+可变长度的部分，这样序列化就可以用简单且不易出错的方式来表达。

```
struct serialized_data
{
    int len;
    int type;
    char variable_length_text[0];
}; 
```

进而：

```
serialize_data buff = (serialize_data*)malloc(sizeof(serialize_data)+5);
buff->len=5;
buff->type=1;
memcpy(buff->variable_length_text, "abcd", 5); 
```

不幸的是，我找不到 MSVC、GCC、CLang 等是否可以接受。

也许有更好的方法来实现同样的目标？

我真的不想要那些丑陋的演员：

```
memcpy((char*)(((char*)buffer)+sizeof(serialize_data)), "abcd", 5); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T21:50:29.423

该程序使用零长度数组。这不是 C，而是 GNU 扩展。

[http://gcc.gnu.org/onlinedocs/gcc/Zero-Length.html](http://gcc.gnu.org/onlinedocs/gcc/Zero-Length.html)

C89 中的一个常见习语，称为*struct hack*，是使用：

```
struct serialized_data
{
    int len;
    int type;
    char variable_length_text[1];
}; 
```

不幸的是，它作为灵活数组的常见用途并不严格符合。

C99 带有类似的东西来执行相同的任务：一个称为*灵活数组成员*的功能。这是标准中的一个示例（C99，6.7.2.1p17）

```
struct s { int n; double d[]; };
int m = 12;  // some value
struct s *p = malloc(sizeof (struct s) + sizeof (double [m])); 
```

# drupal - Drupal 6 Views - 获取和设置记住的过滤器值

> ID：10019598
> 
> 赞同：1
> 
> 时间：2012-04-04T21:35:01.177
> 
> 标签：drupal, drupal-6, drupal-views, drupal-exposed-filter

我有一个带有过滤器的视图，带有“记住最后一个选项”。我需要从这些过滤器中获取记住的值，以便将这些过滤器应用于站点上的其他子视图。此外，我不仅需要获取这些值，还需要将这些值设置为另一个值，或者重置它们。请提供线索，我不知道从哪里开始。查看代码很大:(谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:56:47.750

在数据库中进行一些研究并打印 $_SESSION 超全局变量我发现这些值在 $_SESSION['views'] 中。所以，我可以读取这些值，也可以更新它们。问题解决了 ：）

# php - 将 JSON 解析为 JSONArray

> ID：10019599
> 
> 赞同：2
> 
> 时间：2012-04-04T21:35:02.273
> 
> 标签：php, android, sql, json

我的 PHP 成功地从我的 SQL 表中返回 JSON。但我的 Android 代码将它们全部存储在一个字符串中。它确实应该存储在一个字符串中，然后解析成多个对象吗？这是相关的代码。

首先，当前存储的结果是什么样的：

```
04-04 21:26:00.542: V/line(1230): [{"category":"elections","id":"0","title":"Who will you vote for in November's Presidential election?","published":"2012-04-02","enddate":"2012-04-30","responsetype":"0"},{"category":"elections","id":"2","title":"Question title, ladies and gents","published":"2012-04-02","enddate":"2012-04-30","responsetype":"1"}] 
```

所以很明显，所有这些都只是存储为一个巨大的字符串，即使它是两个表行。这是为我生成该行的代码：

```
public JSONObject getQuestionJSONFromUrl(String url, List<NameValuePair> params) {

    // Making HTTP request
try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        httpPost.setEntity(new UrlEncodedFormEntity(params));

        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            Log.v("while", line);
            sb.append(line + "\n");
            //Log.v("err", line);
        }
        is.close();
        json = sb.toString();

    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

} 
```

显然，我现在在 WHILE 循环之后遇到了各种错误。我花了几天时间试图解决它，但只是让 PHP 返回正确的 JSON（以前没有）。我希望我需要一个 JSONArray，每个 JSON 结果都存储在 Array 的一个索引中 - 所以我希望需要将此方法的返回更改为 JSONArray，对吗？任何人都可以引导我走上正确的路径来解析我从 PHP 脚本收到的 JSON 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:39:02.110

是的，这是正确的。您需要将其解析为 JSONArray，因为它就是这样。例如（忽略异常等）：

```
JSONArray jarr = new JSONArray(jsonString);
for (int i = 0; i < jarr.length(); ++i) {
    JSONObject jobj = jarr.getJSONObject(i);
    // work with object
} 
```

# html - 如何使用 css 从中心对齐任何大小的图像，而不是顶部/底部/侧面

> ID：10019604
> 
> 赞同：2
> 
> 时间：2012-04-04T21:35:17.013
> 
> 标签：html, css, image, alignment

我希望能够定位图像（蓝色），以便无论它的大小如何，它始终相对于后面的 div 的基线（红色，而不是包含的 div）居中。后面的 div 将始终具有相同的大小/位置。

![在此处输入图像描述](../Images/1f8936ffa60815ce5a62c4f7f5f1e9ec.png)

最好这将仅在我使用drupal时使用css，并且我对tpl文件之外的编辑知之甚少。

谢谢！

编辑：这是布局[http://pastebin.com/SisQHM4y](http://pastebin.com/SisQHM4y)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T06:44:39.713

嗨，你可以像这样做这个纯 CSS

**css**

```
.wraptocenter {
    display: table-cell;
    text-align: center;
    vertical-align: middle;
    width: 500px;
    height: 400px;
    background:green;
} 
```

**HTML**

```
<div class="wraptocenter"><img src="//?" alt="images" /></div> 
```

现场演示[http://jsfiddle.net/rohitazad/tvrMp/](http://jsfiddle.net/rohitazad/tvrMp/)

有关此[http://www.brunildo.org/test/img_center.html](http://www.brunildo.org/test/img_center.html)的更多信息 ​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T21:39:10.303

也许是这样的：

```
<style>
 #blue { margin-left:auto;margin-right:auto; }
</style>

<div id="red">
 <div id="blue">
  <img src="?" id="myImg" />
 </div>
</div> 
```

*编辑*

我明白了，所以您希望将 x 轴水平居中，而不是垂直居中。而且那个链接有点乱。也许你可以尝试

```
<style>
 .user-picture { margin-top: auto; margin-bottom: auto; }
</style>

<div class="content">
<div class="profile" typeof="sioc:UserAccount" about="/users/diver1">
    <div class="user-picture">
        <a href="/users/diver1" title="View user profile." class="active">
        <img typeof="foaf:Image" src="http://waterworksworldwide.com/sites/default/files/pictures/picture-126-1333572014.gif" alt="Diver1&#039;s picture" title="Diver1&#039;s picture" />
    </a>  
</div>
</div> 
```

正如问题中的红色和蓝色所暗示的那样，我仍然很难看到区域之间的重叠在哪里。如果与我的建议没有重叠，请告诉我，也许我们可以尝试使用一些变体`position: absolute;`

# mercurial - 由于 mercurial “hg clone”，我想创建一个版本化文件夹 "

> ID：10019609
> 
> 赞同：2
> 
> 时间：2012-04-04T21:36:01.470
> 
> 标签：mercurial, dvcs

在 Mercurial 中克隆存储库时，有没有办法根据最新的变更集创建目标文件夹？例子：

```
$ hg clone http://hg.repo.com:8000/myrepo 'myrepo-$VERSION' 
```

该文件夹应以项目的版本命名，例如`myrepo-1.3`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T00:49:16.623

您必须首先将其克隆到某个临时文件夹中，然后检查 repo 的提示以查看其修订版或您想在命名方案中使用的任何特征，然后将以前的（临时）位置重命名为现在应该是的任何位置.. . 据我所知，它在香草汞中不可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T09:35:46.610

如果您可以使用变更集哈希，那么您可以从

```
$ hg identify -i http://hg.repo.com:8000/myrepo 
```

获取提示变更集的 ID。您可以在 Unix shell 中将它与这样的克隆结合起来：

```
$ hg clone http://hg.repo.com:8000/myrepo \
           "myrepo-$(hg -i identify http://hg.repo.com:8000/myrepo)" 
```

为了更方便使用，我会为此创建一个别名：

```
[alias]
vclone = !DEST=$(basename "$1")-$($HG identify -i "$1");
          echo "destination directory: $DEST";
          $HG clone "$1" "$DEST" 
```

这让你`hg vclone foo`得到一个`foo-<ID>`克隆。

在别名中，我负责从克隆 URL 计算一个合适的基本名称，并以与`hg clone`您不提供明确目标时通常执行的方式相同的方式打印目标。最后，我小心地引用了参数，以便您可以克隆名称中带有空格的目录。（如果你`"`的名字中也有类似的字符，那么如果没有更好的支持在 Mercurial shell 别名中引用，那么你就不走运了。）

# winforms - 如何在设计时将 RichTextBox 的 Rtf 属性绑定到 RTF 资源？

> ID：10019626
> 
> 赞同：0
> 
> 时间：2012-04-04T21:37:25.223
> 
> 标签：winforms, richtextbox

我有一个 RichTextBox，我希望在设计时用 RTF 文本填充。这并不**意味着**这样做：

```
richTextBox1.Rtf = @"<a bunch of rich text>"; 
```

它实际上是在运行时分配值（或者是吗？）。

我创建了一个名为“TextResources.resx”的项目资源文件，其中包含一个名为 InstructionsRTF 的资源，其值包含富文本。这在设计时如何绑定到 RichTextBox？

**编辑添加：**

@hans-passant 是正确的，尽管我最终使用的确切代码有所不同：

```
rtfInstructions.Rtf = TextResoures.InstructionsRTF; 
```

其中 TextResources 是项目中的 TextResources.resx。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:56:29.807

RichTextBox 不支持绑定。如果它已经是一个预先准备好的资源，那么在设计时尝试支持它是没有意义的。它只是表单构造函数中的一行代码：

```
 public Form1() {
        InitializeComponent();
        richTextBox1.Rtf = Properties.Resources.instructionsRTF;
    } 
```

如果您想在设计时更具冒险精神，那么这也是可能的。您可以创建一个 UITypeEditor，让您在设计时编辑 RTF。代码[在这里](https://stackoverflow.com/questions/2984875/is-it-possible-to-style-text-in-a-richtextbox-at-design-time/2985687#2985687)。

# xaml - 背景图像的 XAML 事件在屏幕外呈现

> ID：10019629
> 
> 赞同：1
> 
> 时间：2012-04-04T21:37:41.333
> 
> 标签：xaml, windows-8, microsoft-metro, windows-runtime

我正在使用 Uri 在我的 XAML 网格上设置背景图像。Uri 指向一个 HTTP url，它将从那里获取，然后将图像渲染为 Win8 Metro 应用程序的背景。

我一直在试图弄清楚是否有一个事件或我可以挂钩的东西让我知道 WPF 已将其加载到内存中，并完成将其渲染出视野。

目前，小图像加载速度足够快，并且可以平滑淡入。但是，如果我加载更大、更慢的图像，则需要 100 毫秒才能显示为背景，这意味着它要么在淡入淡出中弹出，要么渐变效果完成后。这看起来很可怜​​。

目标是在应用程序页面之间进行淡入淡出转换（我已经有了这个），而不会在完成时弹出背景图像的不一致。

任何建议都会受到欢迎。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T21:42:59.503

您没有确切说明您是如何加载图像的，但是 BitmapImage 上有一个 DownloadCompleted 事件，例如

```
BitmapImage bmp = new BitmapImage(imageUri); 
bmp.DownloadCompleted += ReadyToDisplay; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T19:06:21.983

就像 Phil 说的，但是对于 Windows Store 应用程序：

```
BitmapImage bmp = new BitmapImage(imageUri);
bmp.ImageOpened += ReadyToDisplay; 
```

> ImageOpened 当图像源下载和解码没有失败时发生。您可以使用此事件在渲染之前确定图像的大小。

来源：[MSDN](http://msdn.microsoft.com/library/windows/apps/BR243235)

# actionscript-3 - Actionscript 3 中的“if (MouseEvent.CLICK = true)”错误？

> ID：10019630
> 
> 赞同：1
> 
> 时间：2012-04-04T21:37:42.727
> 
> 标签：actionscript-3

这是两个错误；

> 1067：将布尔类型的值隐式强制转换为不相关的字符串类型。
> 
> 1049: 对指定为常量的变量的非法赋值。

我想基本上设置它，如果鼠标点击

符号直升机的 -y 速度 = 变量“速度”

有什么帮助吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T22:14:57.820

这个测试没有任何意义：`MouseEvent.CLICK`是一个常数，它的值**总是** `"click"`。`(MouseEvent.CLICK)`总是如此（`true`如果此字符串不为空，则测试字符串返回 true）。

要检查鼠标是否关闭，您应该编写如下内容：

```
var mouseDown:Boolean;
addEventListener(MouseEvent.MOUSE_DOWN, onMouseDown);
addEventListener(MouseEvent.MOUSE_UP, onMouseUp);
addEventListener(Event.ENTER_FRAME, onEnterFrame);

function onMouseDown(event:MouseEvent):void
{
  mouseDown = true;
}

function onMouseUp(event:MouseEvent):void
{
  mouseDown = false;
}

function onEnterFrame(event:Event):void
{
  if (mouseDown)
  {
    helicopter.y += speed;
  }
  else
  {
    //maybe fall?
  }
} 
```

# delphi - 如何从具有另一个扩展名的文件中加载 Png 图像？

> ID：10019632
> 
> 赞同：5
> 
> 时间：2012-04-04T21:37:56.053
> 
> 标签：delphi, delphi-xe2, image-conversion, timage

我正在使用 TImage 组件来加载一些 png 图像，但其中一些具有`.imp`扩展名。我将*Vcl.Imaging.pngimage*单元添加到我的代码中，并使用此代码加载图像

```
 if OpenDialog1.Execute then
  Image1.Picture.LoadFromFile(OpenDialog1.FileName); 
```

但是当执行 LoadFromFile 过程时会引发异常

> 未知图片文件扩展名 (.imp)

这些图像（.imp）是由外部应用程序生成的 png 文件，位于只读文件夹中，因此重命名这些文件不是一个选项，问题是如何从文件中加载 TImage 组件中的 Png 图像哪个有另一个扩展名？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-04T21:39:45.987

您必须先使用[`TPicture.RegisterFileFormat`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Graphics.TPicture.RegisterFileFormat)方法注册文件格式

尝试这个

```
TPicture.RegisterFileFormat('imp','imp (png) image file',TPngImage); 
```

# lwuit - 如何最好地从使用 RMS 重写 lwuit 应用程序以使用 lwuit.io 库？

> ID：10019635
> 
> 赞同：2
> 
> 时间：2012-04-04T21:38:13.883
> 
> 标签：lwuit, codenameone

我在 lwuit 中编写了一个应用程序，我使用 RMS 来存储数千条记录，每条记录都有一个唯一的 id。现在我想移植/重写它以使用 lwuit IO 库使其可移植到 CodenameOne，但我遇到了一些挑战：

1.  lwuit.io.Storage 中似乎没有办法像在 RMS 中那样删除记录（我可以使用 Storage.writeObject 和 readObject 创建和检索它们，但不能再次删除它们）
2.  当我使用 writeObject 写入记录时，它们会被赋予一个名称（字符串），但是我无法检索名称列表以确保再次检索所有这些名称。使用 RMS，我可以获得总列表。
3.  我想使用 lwuit.io.CacheMap，但找不到一个示例或教程来展示如何将它与 io.Storage 一起使用（lwuit 开发指南甚至没有提到 Cachemap）？

当我有数以千计的记录可以频繁且独立地存储和检索（除了使用原因的 CacheMap ;-)

也许我错过了一些东西，但似乎没有上述功能，从 RMS 移植到 lwuit.io 并不简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T06:28:13.907

花了一夜，阅读代码而不是文档，并意识到我误解了 Storage 的工作原理;-)。当谈到文件名时，它不是实际 (RMS) 文件，而是 RMS 中的条目。所以，回答我自己的问题：1）使用deleteStorageFile（name）删除；2) 使用 listEntries() ；3）CacheMap其实是在使用Storage的时候自动使用的，不用自己写代码。考虑到这一点，性能将类似于 RMS（如果您之前没有使用任何缓存可能会更好）。

# generics - OCaml 中的通用定时器高阶函数

> ID：10019645
> 
> 赞同：7
> 
> 时间：2012-04-04T21:39:17.430
> 
> 标签：generics, ocaml

我正在尝试在 OCaml 中实现一个通用计时器函数，它将作为输入一个任意数量的函数并返回类型***'r***并返回一个函数：

*   输入参数的数量和类型相同，并且
*   返回类型`float * 'r`，其中浮点数将是函数中花费的时间的度量（例如由 报告`Sys.time()`）

问题是我无法以它可以处理任何数量的功能的方式实现它。例如以下代码：

```
让计时器 f =              
   让 timerf xy =                                 
      让 t0 = Sys.time ()                                         
      在让结果 = fxy                                                 
      在 let diff = Sys.time() -。t0                                     
      在差异中，结果                                    
   在定时器    

```

仅适用于输入 arity 2 的函数。对我来说，如何概括它以处理任何 arity 的函数并不明显。我希望部分功能应用程序能以某种方式神奇地解决这个难题，但我无法让它工作。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-04T22:01:26.340

我理解您制作具有任意数量的计时器功能的意图。但是你不能在 OCaml 中轻松地做到这一点。

此外，一个只有一个参数的定时器函数在实践中就足够了：

```
let timer f x =
   let t0 = Sys.time()                                         
   in let result = f x                                              
   in let diff = Sys.time() -. t0                                     
   in diff, result 
```

由于任何`g`具有任何数量的函数都可以通过以下方式`timer`轻松传递：

```
let diff, result = timer (fun () -> g x1 x2 x3 ... xN) () 
```

*或通过使用部分应用程序更好（如@Andreas 所建议）：*

```
let diff, result = timer (g x1 x2 x3 ... xN-1) xN 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-05T13:21:27.043

对 pad 解决方案的评论过于冗长，无法发表评论。

在实践中，我发现`f : unit -> 'a`通过传递`()`而不是延迟参数来强制执行是一种更好的设计。

```
let timer f =
  let t0 = Sys.time() in
  let result = f () in
  let t1 = Sys.time() in
  t1 -. t0, result 
```

原因是我倾向于经常使用以下模式：

```
let fun_to_test = match some_configuration with ... in
timer fun_to_test 
```

pad 的设计，一开始更吸引人，因为更通用，鼓励你改写：

```
let fun_to_test, arg = match some_configuration with .... in
timer fun_to_test arg 
```

这种选择的问题在于，起初它看起来不错，在添加了一些选项之后，您会遇到要测试的不同函数的参数类型不同的情况。你有一个类型错误。*错误*代码示例：

```
let fun_to_test, arg =
  if Random.bool ()
  then (foo, 3)
  else (bar, 3.2)
in timer fun_to_test arg 
```

通过使用预先传递的参数强制闭包，我在这里免费获得“存在类型”：最后一个函数参数的类型不会出现在`timer`应用程序的类型中。我发现这在实践中会更好。

当然，您也可以延迟完整的调用并`()`在 pad 的设计中用作参数。但我更喜欢强迫我这样做的选择，因为否则我太想不这样做了，我以后再付钱。

# qt - 如何在 Qt Creator 中选择自定义编译器“工具链”

> ID：10019650
> 
> 赞同：3
> 
> 时间：2012-04-04T21:39:53.107
> 
> 标签：qt, gcc, qt-creator, cross-compiling, mingw32

我的 Mac 上有 Qt Creator。我下载了 Qt sdk 源代码，我构建了它们，并且我能够为 mac 编译代码并且它运行良好。

我想以 Windows 为目标，所以我下载了 mingw32 源，我构建了它们，现在我有了一个`i386-mingw32-g++`可以很好地编译 c++ 代码的可执行文件，并且从我的 mac 编译的二进制可执行文件在 Windows 机器上运行得很好。

我现在想在 Qt Creator 中创建一个新的构建配置，以便它将使用 mingw32 作为编译器，以生成 Windows 二进制文件。

这是我在工具链配置窗口中得到的：

![工具链配置窗口](../Images/6452afafaf56bd8eacf528c1461ae340.png)

这是我的构建配置中的内容：

![构建配置工具链选项](../Images/ae6d3f30fab59f4b6fa90bde0fc3329a.png)

如您所见，我无法选择 mingw32 作为编译器。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T00:44:00.347

这是因为您的 Qt 库是 Mac 版本。Creator 知道所选 Qt 安装的目标平台，并仅显示与其一起使用的工具链。

我不知道如何在 Mac 上安装 Windows 版本的 Qt。安装程序显然不起作用。唯一可能的路径是使用您已构建的 mingw 构建 Qt。

编辑：这里有一些关于交叉编译 Windows 库的信息：http: [//lists.qt.nokia.com/pipermail/qt-interest/2011-March/031945.html](http://lists.qt.nokia.com/pipermail/qt-interest/2011-March/031945.html)

# sql - SQL3中类型和类型的引用有什么区别

> ID：10019651
> 
> 赞同：1
> 
> 时间：2012-04-04T21:39:56.387
> 
> 标签：sql, oracle

下面的代码有什么区别？

```
CREATE TYPE f1_MemberType AS OBJECT (
NINum VARCHAR2(10),
Name VARCHAR2(20),
Address f1_AddressType)
/ 
```

和

```
CREATE TYPE f1_MemberType AS OBJECT (
NINum VARCHAR2(10),
Name VARCHAR2(20),
Address REF f1_AddressType)
/ 
```

编辑

使用 REF 而不是仅仅给元素一个类型的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:42:43.743

不同之处在于引用作为指向实际对象的指针保存在内存中，然后必须取消引用才能用作数据。

可以在对象之间复制引用比复制数据本身更便宜（因为指针将是一个简单的数字内存地址，而不是可能包括字符串、日期等的多个字段）。这将允许在 F1_MemberType 的实例之间轻松复制地址，但在您想要引用对象中的实际数据时必须取消引用指针。

# php - 如何只获取 URL 的一部分？(php)

> ID：10019652
> 
> 赞同：1
> 
> 时间：2012-04-04T21:39:56.547
> 
> 标签：php, url

我有这个网址：

```
example.com/?do=search&q=testing+this+out 
```

我需要将 &q= 之后的部分存储在变量中。

什么 PHP 函数最适合这样做，爆炸，切片？

PS我`$request_url = $_SERVER['REQUEST_URI'];`用来获取URI。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T21:41:56.883

如果你只需要q的值，你可以简单地写：

```
$value = $_GET['q']; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T21:42:15.143

将`parse_url()`一个 url 分割成它的组件，然后`parse_str()`将一个查询字符串分解为一个常规的键值数组。

```
$url = 'your url here';
$parts = parse_url($url);
$query = parse_str($parts['query']);
echo $query['q']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T21:58:39.707

也许更快速，更简单......

```
$requested_query_vars = $_SERVER["QUERY_STRING"]; 
```

或 parse_url() php 函数

```
$requested_query_vars = parse_url($request_url, PHP_URL_QUERY); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T21:43:57.660

我不明白为什么 $_GET 是不够的。但如果不是，这里：

```
$ php -r '$url = "http://example.com/?do=search&q=testing+this+out"; $parts = parse_url($url); $vars = explode("&", $parts["query"]); print_r($vars);'
Array
(
    [0] => do=search
    [1] => q=testing+this+out
) 
```

# authentication - 如何与 PrincipalContext.ValidateCredentials 相同，但使用 LdapConnection（非 AD 特定）

> ID：10019654
> 
> 赞同：0
> 
> 时间：2012-04-04T21:40:21.603
> 
> 标签：authentication, c#-4.0, ldap, directoryservices

如果我有一个 PrincipalContext 连接到 ActiveDirectory 服务器（带有一些凭据），那么我可以调用它的[ValidateCredentials](http://msdn.microsoft.com/en-us/library/bb154889.aspx)方法来验证其他一些凭据（例如，与 PrincapContext 连接所使用的凭据不同的一些其他用户名/密码对）。

我想做基本相同的事情，但使用[LdapConnection](http://msdn.microsoft.com/en-us/library/system.directoryservices.protocols.ldapconnection.aspx)。我有一个 LdapConnection 成功连接并绑定到一个 openLDAP 服务器。现在我想验证一组不同的凭据。我希望这些凭据需要是专有名称和密码对，而不是上面的用户名和密码对；没关系。

我想我可以创建一个临时的第二个 LdapConnection 并通过与第二组凭据绑定来验证。

有一个更好的方法吗？特别是，有没有办法使用我现有的 LdapConnection 来验证/验证其他凭据？顺便说一句，我为此使用 C# 4.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T09:52:18.203

应用程序代码可以通过更改现有连接的身份验证状态来验证凭据（仅限 LDAPv3）。这个过程是通过发送一个`bind` [请求](https://www.rfc-editor.org/rfc/rfc4511#section-4.2)并检查来自服务器的响应来完成的。如果来自服务器的绑定响应中的结果代码是`0`，则凭证是正确的并且帐户（由专有名称标识）是可用的。如果绑定响应中的结果代码非零，则发生错误：可能凭据无效、可分辨名称不存在、与可分辨名称关联的帐户已禁用或其他错误。

这可以通过现有连接完成，或者应用程序可以建立新连接并在新连接上传输绑定请求。

# c++ - 插入成员函数指针映射

> ID：10019655
> 
> 赞同：3
> 
> 时间：2012-04-04T21:40:40.277
> 
> 标签：c++

我的问题有点复杂，所以我将从一个例子开始：

```
class a
{
public:
     a()
     {
          pointerMap.insert(pair<std::string, void a::*(int, int)> ("func1", func1);
          pointerMap.insert(pair<std::string, void a::*(int, int)> ("func2", func2);
     }

private:
     void func1(int a, int b);
     void func2(int a, int b);
     std::map<std::string, void a::* (int, int)> pointerMap;
} 
```

我的问题是，这是将指向成员函数的指针添加到对象内的映射的正确方法，以便您仅引用单个实例的`func1`or `func2`？

而且，我不知道如何从指针调用这个函数。会是这样吗？

```
map["func1"](2,4); 
```

使用成员函数时，我对语法有点困惑。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T21:47:46.813

首先，代码：

```
#include <map>
#include <string>
class a
{
public:
     a()
     {
       pointerMap["func1"] = &a::func1;
       pointerMap["func2"] = &a::func2;
     }

     void invoke(const std::string& name, int x, int y) {
       if(pointerMap[name])
         (this->*pointerMap[name])(x, y);
     }

private:
     void func1(int a, int b) {};
     void func2(int a, int b) {};
     std::map<std::string, void (a::*)(int, int)> pointerMap;
};

int main () {
  a o;
  o.invoke("func1", 1, 2);
} 
```

现在，对于您的问题：

> 我的问题是，这是将成员函数的指针添加到对象内的映射的正确方法吗

我发现下标运算符`[]`比您所做的插入更容易阅读。

> 以便您仅引用单个实例的 func1 或 func2。

指向成员函数的指针没有与之关联的实例。当您调用它时，您将指针绑定到一个实例。因此，您的地图也可以很容易地成为静态成员。

> 我将如何从指针调用这个函数。

语法是：`(instance.*pointer)(args)`或`(class_pointer->*pointer)(args)`。由于您没有说明应该在哪个实例上调用函数，我假设`this`. 您的指针位于地图中，因此我们有：

```
((this)->*(this->pointerMap["func1"]))(arg1, arg2) 
```

或者

```
(this->*pointerMap[name])(x, y); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T21:49:45.290

这有点对。也许 typedef 可以使事情变得更干净：

```
typedef std::map<std::string, void(a::*)(int, int)> pfmap_type;
pfmap_type m;               //    ^^^^^^

// ...

m.insert(pfmap_type::value_type("hello", &a::func1));
                                      // ^^^

(this->*(m["hello"]))(1, 2);
(this->*(m.find("hello")->second))(3, 4); 
```

实际上，这两种地图访问都不是一个好主意，因为您绝对必须检查地图项是否*存在*，否则您的指针会出错。所以我推荐这样的东西：

```
void call(const char * key, int a, int b) const
{
    pfmap_type::const_iterator it = m.find(key);
    if (it != m.end()) { (this->*(it->second))(a, b); }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T21:48:51.247

这是将指针插入映射的正确方法，但您可以使用 来整理一下`make_pair`，它会为您推导出模板参数：

```
pointerMap.insert(std::make_pair("func1", &func1));  // The '&' is optional 
```

要调用函数，您需要使用`.*`or`->*`运算符，具体取决于您调用它的对象是否通过指针引用：

```
a obj;  // Regular object
(a .* map["func1")(2, 4);  // Extra parens needed due to operator precedence

a *ptr;  // Pointer
(a ->* map["func1")(2, 4); 
```

有些人喜欢定义一个宏来让你在做什么更明显，因为语法可能会让一些人感到困惑：

```
#define CALL_MEMBER_FUN_PTR(obj, fun) ((obj) ->* (fun))
...
a *ptr;
CALL_MEMBER_FUN_PTR(ptr, map["func1"])(2, 4); 
```

# mysql - 替换 MySQL 表中的整个数据

> ID：10019663
> 
> 赞同：1
> 
> 时间：2012-04-04T21:41:29.643
> 
> 标签：mysql, transactions, truncate

对于游戏，我正在尝试实现一个分数表。根据游戏逻辑，分数通常会在一个用户完成一轮（每隔几分钟发生一次）时发生变化；但不能保证两个用户会同时完成。

为了避免每次用户检查分数时都重新计算分数，我计划将分数数据保存在一个持久表中，该表将在每轮完成时更新。

我计划通过

```
TRUNCATE TABLE scores; INSERT INTO SCORES SELECT .... 
```

但我担心的是当两个用户同时完成时会发生什么。我在一个连接中传递整个查询（来自 ASP.NET，如果这很重要），但是两个查询一起被认为是原子的吗？还是您建议我必须实现手动事务逻辑？

如果您建议交易，那么用“BEGIN TRAN...END TRAN”将查询括起来就足够了，您是否建议使用 MyISAM 或 InnoDB 作为“分数”表？

如果重要的话，我的 MySQL 版本是 5.0.92-log。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T21:46:36.533

两个查询只有在事务中执行时才是原子的。即便如此，它们对于世界其他地方也只会是原子的。在事务内部，它仍然是两个完全独立的操作。

事务不会保护您免受两个以上用户对数据集进行操作。您仍然必须在相关表上建立锁定以防止并发访问。

# java - 在线程中使用变量

> ID：10019667
> 
> 赞同：1
> 
> 时间：2012-04-04T21:41:57.693
> 
> 标签：java, android, multithreading

```
 new Thread(new Runnable() {
        public void run() {
            String response = null;
            //String res = null;
            try {
                response = CustomHttpClient.executeHttpPost("http://abc.org/fypcps/furqan.php");
            } catch (Exception e) {
                // TODO Auto-generated catch block
                //Toast.makeText(context, e.toString(), 0).show();
                //Log.i("furqan", "ya ALLAH madad");
            }  //Enetr Your remote PHP,ASP, Servlet file link  
            String res = response.toString();  
            // res = res.trim();  
            //res= res.replaceAll("\\s+","");  
            //error.setText(res);  
            //if(res.equals("1"))  
                //Log.i("furqan1", res);
            //else  
                //Log.i("furqan2", "no string is captured");
            response1 = res;
        }
      }).start(); 
```

在我的代码中 response1 是我在线程上方声明的变量，我想将字符串“res”分配给“response1”，但它给了我封闭的类型错误。任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T22:12:56.290

另一种方法是将 Thread 之外的 String 变量声明为**final Array**，这样您就可以在线程内分配所需的值。

```
 final String [] answer = new String[1];      
  answer[0]="init value";
  System.out.println(answer[0]); // return "init value"
  new Thread(new Runnable() {
      public void run() {

          answer[0]="value assigned from the thread";
      }
    }).start();

  try {
    Thread.currentThread().sleep(1000);
  } catch (InterruptedException e) {
    e.printStackTrace();
  }
  System.out.println(answer[0]); //return "value assigned from the thread" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T22:03:05.203

我认为您可以从线程内发送实例变量的值。就像是

```
package pro.Project;

import android.app.Activity;
import android.os.Bundle;

public class ProjectActivity extends Activity {
    /** Called when the activity is first created. */
    private String foo = "";
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        String bar = ""; // Non-final local variable

        Thread t = new Thread(new Runnable() {

            @Override
            public void run() {
                foo ="bar"; // This would work
                bar ="baz"; // This WOULDN'T. As 'bar' is a non-final local variable
            }
        });
        t.start();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T21:45:04.123

您不能从匿名类内部为变量分配某些内容，因为`final`如果在这种情况下使用 java 需要变量（以防止不必要的副作用）。

您可以尝试通过为变量创建包装器来解决此问题：

```
class StringWrapper {
    public String innerString;
}

final StringWrapper wrapper = new StringWrapper();

new Thread(new Runnable() {
    public void run() {
         ...
         wrapper.innerString = res;
    }
}); 
```

# c# - .NET4.5 中异步 POST 方法的 HttpResponseMessage 异常

> ID：10019668
> 
> 赞同：3
> 
> 时间：2012-04-04T21:41:57.927
> 
> 标签：c#, .net, http, windows-8, last.fm

我正在用 C# 开发适用于 Windows 8（Consumer Preview）的应用程序。它对 Last.fm API 进行简单的 REST 调用。

有一个异常困扰着我很多天了。我正在尝试向 Last.fm API 方法发送 POST 调用。但是每当我拨打电话时，我都会收到以下消息 -

> “在 mscorlib.dll 中发生了 'System.Net.Http.HttpRequestException' 类型的异常，但未在用户代码中处理”。附加信息：发送请求时出错。

如果我打印出它说的异常 -

> System.Net.Http.HttpRequestException：发送请求时出错。---> System.Net.WebException：底层连接已关闭：连接意外关闭。
> 
> 在 System.Net.HttpWebRequest.EndGeetResponse（IAsyncResult asyncResult）
> 
> 在 System.Net.Http.HttpClientHandler.GetResponseCallback（IAsyncResult ar）

我对 last.fm 的身份验证 API 的 GET 调用工作正常。

我附上一个代码片段：

```
private async void Collection_Click_1(object sender, RoutedEventArgs e)
{
    /* .
       .
       .
    */

HttpClient Cli = new HttpClient();
string track_updateNowPlaying = "method=track.updateNowPlaying&track=" + id3.Title + "&artist=" +id3.Artist + "&album=" + id3.Album + "&api_key=" + lfm_api_key + "&api_sig=" + updtrack_sig + "&sk=" + Globalv.session_key;

HttpContent tunp =new StringContent(track_updateNowPlaying);

try
{
    //getting exception in the following line
    HttpResponseMessage upd_now_playing = await cli.PostAsync(new Uri("http://ws.audioscrobbler.com/2.0/", UriKind.RelativeOrAbsolute), tunp);

}
catch(Exception ex) {textblock.text = ex.ToString();}
}

private async void LoginBtn_Click_1(object sender, RoutedEventArgs e) //this function is called before collection_click_1 function
{
    /* .
       .
       .
    */
HttpClient cli = new HttpClient();
string auth_request = "http://ws.audioscrobbler.com/2.0/?method=auth.getMobileSession&username=" + UsernameTBx.Text + "&authToken=" + lfm_authToken + "&api_key=" + lfm_api_key + "&api_sig=" + lfm_api_sig;

HttpResponseMessage auth = await cli.GetAsync(auth_request); //this works fine...

} 
```

请让我知道是否需要堆栈跟踪。

-萨加尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T09:00:39.477

我想我想通了。我保留这个帖子供其他人参考。

情况是 Last.fm 服务器在标头字段中不接受 Expect:100Continue。所以我不得不明确地将其更改为 false。

所以不得不添加以下内容：

```
HttpClient cli = new HttpClient();
cli.DefaultRequestHeaders.ExpectContinue = false; 
```

# java - 使用 Windows 集成身份验证的 JBoss AS 7 数据源到 SQL Server

> ID：10019672
> 
> 赞同：1
> 
> 时间：2012-04-04T21:42:06.100
> 
> 标签：java, sql-server, sql-server-2008-r2, datasource, jboss7.x

标题很能说明问题。我需要在 JBoss AS 7 中配置一个数据源，它将使用集成的 windows 连接到 SQL Server 2008 R2 数据库。

我进行了很多搜索，但所有示例都只使用 SQL 身份验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T13:05:14.810

您需要下载此驱动程序[http://www.microsoft.com/download/en/details.aspx?id=11774](http://www.microsoft.com/download/en/details.aspx?id=11774)

然后阅读说明，您将看到您需要添加一个 dll，以便 java 运行时能够使用本机层。

您还需要以拥有数据库权限的用户身份运行该服务。

我建议从 jboss 5.1 开始并尝试在该平台上进行身份验证以确保其正常工作，即创建一个从数据库读取的简单 war 文件并将数据源配置为使用集成身份验证。

如果这行得通，那么你就完成了目标的一半。

[由于https://docs.jboss.org/author/display/MODULES/Native+Libraries](https://docs.jboss.org/author/display/MODULES/Native+Libraries)在 jboss 7 中配置集成身份验证可能更具挑战性

如果您发现问题，我还建议您在 jboss.org jboss-as 留言板中提问。他们通常很有帮助。

# c# - 如何使用按钮侦听器（基本上）使 C# UI 删除面板控件？

> ID：10019674
> 
> 赞同：1
> 
> 时间：2012-04-04T21:42:16.090
> 
> 标签：c#, mysql, winforms

好的，所以我的数据库类有一个数据库项目。我有一个用 MySQL 制作的数据库，并且正在用 C# 制作我的应用程序。该数据库基本上只是一个零件数据库，在 4NF 中由零件、关系表、构建、客户和订单表组成，因为这是基于客户的计算机构建数据库。我对我的数据库的设计方式或任何东西没有任何问题，但我想知道我应该如何为这样的事情做我的 GUI。

我目前在选项卡中设置了它，每个选项卡都是构建中需要的一部分，但我不喜欢它的外观。有没有一种方法可以让我拥有下一个和上一个按钮，并为每个部分设置一个窗格并逐步浏览它们？我对 C# 有点陌生，正在努力学习。建议？

**编辑：我想我应该明确表示我正在考虑可能使用面板并使用“下一个”和“上一个”按钮来切换它们，而不是使用选项卡并遍历它们。**

**EDIT2：我没有想办法通过将视图更改为新面板来做到这一点，但我想出了如何通过动态添加/删除数据来做到这一点。这就是我想要的 - 一种在面板中存储按钮、标签和所有其他所需控件并能够更改在表单中查看的面板的方法......所有这些都只需单击一个按钮。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T21:49:49.810

我没有完整的答案给你，但我有一个建议。

windowsclient.net/learn/videos.aspx 上有一些关于构建数据访问表单的非常好的视频和教程，其中大部分都很简短、中肯且非常有用。我会看一些，看看是否有任何看起来很有趣。

使用“下一个/上一个”按钮，您正在谈论“分页”。我不知道如何在 WinForms 中做到这一点，但这将是我首先要看的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T21:57:14.193

你可以很容易地拥有上一个/下一个按钮。我会将它们放在 TabControl 之外（这样您就不会复制它们），然后让它们的处理程序简单地增加或减少 TabControl 的 SelectedIndex 属性。

编辑：你知道你可以让标签看起来不像标签吗？例如，您可以将 Appearance 属性设置为 TabAppearance.Buttons，“选项卡”将改为呈现为按钮，这将使选项卡行看起来更像一个面包屑控件。

您还可以使用在表单上重叠的面板，并调用代表您想要的页面的面板的 BringToFront() 方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-06T07:12:42.107

我成功地实现了我想要的。对于我需要的每个计算机部件，我为每个屏幕的每个布局都有一个类。该类是 Panel 的子类。所有这些 Panel 子类都在其中包含控件（按钮、文本框、标签等），并且每个 Panel 的索引都存储在每个类的变量中。这些变量说明您正在查看的“页面”以及相对于您当前位置的下一个/上一个页面。然后，我缺少的主要内容是 z 顺序。要在执行下一个/上一个按钮时更改 z 顺序，我使用以下命令：

```
Controls.SetChildIndex(PartLayout,0); //this sets the PartLayout Panel (Extended)
                                      //to the 0 index or the front/visible layer 
```

基本上就是这样。我实际上还没有实现我特别想要的东西，但是我已经用一个测试文件完成了它并让它做我想做的事情。感谢大家的帮助！

# opengl - 将 OpenGL 纹理拉伸到窗口尺寸

> ID：10019676
> 
> 赞同：0
> 
> 时间：2012-04-04T21:42:19.637
> 
> 标签：opengl, video, render, draw, rgb

我有一个将 RGB 视频帧呈现到窗口的功能。如果窗口尺寸相同，这对于捕获的尺寸（640 x 480）来说很好，但是当我调整窗口大小时，渲染不正确：

[img http://img855.imageshack.us/img855/1694/screenshot20120404at536.png](http://img855.imageshack.us/img855/1694/screenshot20120404at536.png)

编辑：现在工作的功能。

```
static inline void draw_rgb(
     unsigned char * buf, unsigned x, unsigned y, unsigned window_width,
     unsigned window_height, unsigned frame_width, unsigned frame_height
 )
{
    glEnable(GL_TEXTURE_RECTANGLE_EXT);
    glBindTexture(GL_TEXTURE_RECTANGLE_EXT, 1);

    glTextureRangeAPPLE(GL_TEXTURE_RECTANGLE_EXT, window_width * window_height * 2, buf);

    glTexImage2D(GL_TEXTURE_RECTANGLE_EXT, 0, GL_RGBA, frame_width, frame_height, 0, GL_BGRA, GL_UNSIGNED_INT_8_8_8_8_REV, buf);

    glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
    glEnable(GL_TEXTURE_2D);

    glViewport(x, y, window_width, window_height);

    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();

    glOrtho((GLfloat)0, (GLfloat)window_width, (GLfloat)0, (GLfloat)window_height, -1.0, 1.0);

    glBindTexture(GL_TEXTURE_RECTANGLE_EXT, 1);

    glMatrixMode(GL_TEXTURE);
    glLoadIdentity();

    glBegin(GL_QUADS);
    {
        glTexCoord2f(0.0f, 0.0f);
        glVertex2f(0.0f, window_height);
        glTexCoord2f(0.0f, frame_height);
        glVertex2f(0.0f, 0.0f);
        glTexCoord2f(frame_width, frame_height);
        glVertex2f(window_width, 0.0f);
        glTexCoord2f(frame_width, 0.0f);
        glVertex2f(window_width, window_height);
    }
    glEnd();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T00:17:48.213

主要问题在这里

> ```
> glTexImage2D(GL_TEXTURE_RECTANGLE_EXT, 0, GL_RGBA, window_width, window_height, 0,
>          GL_BGRA, GL_UNSIGNED_INT_8_8_8_8_REV, buf); 
> ```

glTexImage 采用纹理数据的大小，而不是窗口大小或所需输出的大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-05T00:40:16.487

你的问题是两个因素的结合。

首先，正如 datenwolf 指出的那样，您的纹理的宽度/高度是恒定的。当窗口大小改变时，它不会改变。顺便说一句，除非纹理的数据发生变化，否则您不应该每帧都重建纹理。即使这样，您也可以使用[`glTexSubImage2D`](http://www.opengl.org/wiki/GLAPI/glTexSubImage2D)而不是`glTexImage`. 你也不需要调用这些`glTexParameter`东西。

其次，这也意味着您的*纹理坐标*不会改变。所以你需要改变你的四边形图是这样的：

```
glBegin(GL_QUADS);
{
    glTexCoord2f(0.0f, 0.0f);
    glVertex2f(0.0f, window_height);
    glTexCoord2f(0.0f, texture_height);
    glVertex2f(0.0f, 0.0f);
    glTexCoord2f(texture_width, texture_height);
    glVertex2f(window_width, 0.0f);
    glTexCoord2f(texture_width, 0.0f);
    glVertex2f(window_width, window_height);
}
glEnd(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T21:55:39.843

您的`glViewport`调用使用了相同的`w`变量`h`和表示其他地方纹理大小的变量。

尝试更改`glViewport`以使用您正在渲染的窗口的大小，而不是`w`and `h`。其他一切都应该能够保持不变。

为了获得更好的结果，您可以调整视口大小以保持视频的纵横比，方法是减小视口的宽度或高度，以使视频看起来不会被拉伸。

# php - 如何在上传到服务器之前预处理本地 CSV 文件？

> ID：10019679
> 
> 赞同：1
> 
> 时间：2012-04-04T21:42:38.187
> 
> 标签：php, javascript, user-interaction

我正在尝试建立一个网页，受信任的用户可以在其中上传本地 CSV 文件，这些文件将由用户解析、验证、审查，然后插入 MySQL 数据库上的各种表中。

该站点的其余部分是使用 PHP 和 jQuery 编写的。我知道如何将 CSV 文件读入 PHP 并生成查询。问题是文件的验证和解析是交互式的——用户需要被询问有关数据的各种信息，将文件中的列与数据库中的字段匹配，并有机会查看和更新​​他们的直到他们确定一切都正确为止。

每次用户更改某些内容时重新加载整个页面似乎有点像 1990 年代，所以我认为 AJAX 将是在客户端执行此操作的方式，但出于“安全原因”，浏览器似乎特别禁止打开本地文件.

## 我的问题是：

是否有一种普遍接受的模式可以让用户在将文件实际上传到服务器之前根据文件的内容安全有效地做出决定？或者人们真的只是在这种情况下发送几十个 POST 请求？

顺便说一句，我们不使用 Windows 或任何封闭源代码，因此很遗憾该解决方案不能依赖 Internet Explorer 或 ActiveX。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T22:00:16.903

如果您使用从 firefox 3.6 和 Chrome 7 开始可用的 javascript FileReader API，则无需向服务器发出任何请求。幸运的是，存在非常有趣的文章，它们非常清楚地解释了 API 的工作原理。

[http://www.html5rocks.com/en/tutorials/file/dndfiles/](http://www.html5rocks.com/en/tutorials/file/dndfiles/)

如果您对不同浏览器中对 API 的支持有疑虑，则会在另一篇文章的末尾显示：

[https://developer.mozilla.org/en/DOM/FileReader](https://developer.mozilla.org/en/DOM/FileReader)

我最近使用这个 API 来上传文本和二进制文件，所以如果你决定要尝试它并且有任何疑问，请随时回复我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-20T10:25:53.610

有关如何有效执行此操作的示例，请尝试使用[Papa Parse](http://papaparse.com/)库。

它可以毫无问题地处理非常大的文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T21:50:18.877

您有两大类解决方案：

*   上传 CSV 并依靠服务器端逻辑来执行转换，并可能与用户交互。这可能包括加载一个浏览器页面，该页面在上传后实现第二个选择。
*   让用户将文件复制并粘贴到浏览器文本框中，并使用基于浏览器的 javascript 或小程序来转换文本，可能在本地或与网络服务器交互。

两者都可以通过基于标准的实现来完成。最不寻常的选择是依赖于用户复制/粘贴的第二选择。出于这个原因，大多数实现会选择第一个选项的一些变体。

文件转换的主要逻辑放在哪里取决于你。如果小心的话，这不会有任何安全问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-20T09:25:57.140

HTML：

```
<form id = "emailform" action = "admincsvupload" role="form" method="post" enctype="multipart/form-data">
<div class="form-group">
<label class="sr-only" for="csvfile">Upload CSV</label>
<input type="file" name = "csvfile" class="form-control" id="csvfile" placeholder="Select CSV file">                 
</div>
<button type="button" class="btn btn-success" id="btnLoad">Load</button>
<button type="submit" class="btn btn-success" id="btnSubmit" style="display:none">Upload Now!</button>
</form> 
```

0%

Javascript：

```
 // File load as HTMl n a table before actuly upload it on the server

    function updateProgress(evt) {
    // evt is an ProgressEvent.
    if (evt.lengthComputable) {
        var percentLoaded = Math.round((evt.loaded / evt.total) * 100);
        // Increase the progress bar length.
        if (percentLoaded < 100) {
            progress.style.width = percentLoaded + '%';
            progress.textContent = percentLoaded + '%';
        }
    }
}

     function readBlob(opt_startByte, opt_stopByte) {
    var progress = document.querySelector('.percent');
    var files = document.getElementById('csvfile').files;
    if (!files.length) {
        alert('Please select a file!');
        return;
    }

    var file = files[0];
    var start = 0;
    var stop = file.size - 1;
    progress.style.width = '0%';
    progress.textContent = '0%';
    var reader = new FileReader();

    //Reader progress 
    reader.onprogress = updateProgress;

    // If we use onloadend, we need to check the readyState.
    reader.onloadend = function (evt) {
        if (evt.target.readyState == FileReader.DONE) { // DONE == 2
            var data = evt.target.result;
            var delimiter = ',';
            var escape = '\n';
            var rows = data.split(escape);
            var tbl = document.createElement('table');
            tbl.style.width = '100%';
            //tbl.setAttribute('border', '1', "green");
            tbl.className = "table table-hover table-condensed dataTable";
            var tbdy = document.createElement('tbody');

            for (index in rows) {
                var tr = document.createElement('tr'); // creating new row 
                var items = rows[index].split(delimiter);
                for (itemindex in items) {
                    var td = "";
                    if (index == 0) {
                        td = document.createElement('th');
                    } else {
                        td = document.createElement('td');
                    }

                    td.appendChild(document.createTextNode(items[itemindex])); // creating new cell 
                    tr.appendChild(td); // add to current tr
                }

                tbdy.appendChild(tr); // add new row (tr) to table 
            }
            tbl.appendChild(tbdy);

            document.getElementById('byte_content').innerHTML=tbl;

        }
    };

    // Progress Loading
    reader.onloadstart = function(e) {
      document.getElementById('progress_bar').className = 'loading';
    };

    reader.onload = function(e) {
      // Ensure that the progress bar displays 100% at the end.
      progress.style.width = '100%';
      progress.textContent = '100%';
      setTimeout("document.getElementById('progress_bar').className='';", 2000);
    }
    var blob = file.slice(start, stop + 1);
    reader.readAsBinaryString(blob);
    document.querySelector('#btnLoad').style.display = "none";
    document.getElementById("btnSubmit").style.display = "block";

}

//Change event if user select a new file.
document.querySelector('#csvfile').addEventListener('change', function (evt) {
        return readBlob();

}, false); 
```

# php - PHP/jQuery：通过分页结果计算总点击次数

> ID：10019687
> 
> 赞同：0
> 
> 时间：2012-04-04T21:43:22.650
> 
> 标签：php, jquery, ajax

看起来很简单。我正在创建一个以分页方式将结果返回给用户的搜索引擎。每个结果都显示在一个列表中，如果用户单击任何特定结果，它会展开手风琴风格并向他们显示更多信息。

我想在我的搜索排名中进行一些学习，所以我将跟踪用户点击的结果，以及他们被点击的顺序。

我已经可以跟踪一页的点击次数。每次用户单击结果时，它都会存储在数据库中，其中包含我需要的所有信息。

**这是我的问题：**如果用户转到下一页结果，我会丢失当前的点击次数。我正在使用 jQuery 计算点击次数 - 每次用户点击结果时，点击次数都会增加，结果、结果在列表中的实际排名以及当前点击次数作为单行添加到数据库中。

那么如何保持点击次数呢？

这是我的点击函数，其中 js/clicklog.php 是将查询发送到数据库的位置：

```
var order = 0;
$(document).ready(function() { 
    alert(order);
    $('.accordionButton').click(function(e) {
        if($(this).next().is(':hidden') == true) {
            $(this).addClass('on');
            $(this).next().slideDown('normal');
            $(this).next().slideDown(test_accordion);

            order++;
            var actualOrder = $(this).find("h3").eq(0).text();
            var major = $(this).find("h3").eq(2).text();
            var sessionID = $("#sessionID").text();

            $.post("js/clicklog.php", {sessionID:sessionID, major:major, actualOrder:actualOrder, order:order});
    } 
```

sessionID 是从页面上的隐藏 div 中提取的，该 div 由 $_SESSION['id'] 设置。我想我可以为点击次数做类似的事情吗？

我明白**为什么**它不起作用，但我只是想不出如何解决它的解决方案，因为我对 jQuery、PHP 和 AJAX 还是很陌生。

如有必要，如果您希望我发布任何其他代码，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:45:57.427

您可以将其放入 PHP 会话变量中

```
<?php
session_start();

if(isset($_SESSION['views']))
{
$_SESSION['views']=$_SESSION['views']+1;
}
else
{
$_SESSION['views']=1;
echo "Views=". $_SESSION['views'];
}
?> 
```

您可能会发送到 clicklog.php 文件，您将在其中拥有会话变量并递增它，然后返回它如何返回 sessionID

从评论更新你需要做的是在你的 jquery 中发送一个 ajax 请求

```
 var count = 2;
     $.ajax({
   type: "GET",
   url: "some.php",
   data: ({'count' : count}),
   success: function(msg){
     alert( "Data Saved: " + msg );
   }
 }); 
```

然后通过 post 方法接收它，或者如果您选择这种方式，则获取它，然后处理将 1 添加到变量并返回它。提示任何 php 回声变成味精。

# javascript - 修改 Twitter Bootstrap 折叠插件以保持手风琴打开

> ID：10019689
> 
> 赞同：63
> 
> 时间：2012-04-04T21:43:25.013
> 
> 标签：javascript, jquery, oop, twitter-bootstrap

我正在尝试修改 Bootstrap 折叠插件以允许我指定单击手风琴（打开）是否应自动关闭手风琴中的其他项目（因此一次可以打开手风琴中的多个项目）

我想在手风琴上创建一个新的数据属性，比如`data-collapse-type="auto|manual"`

引导 jQuery 插件对于我的技能水平来说有点高级。我需要处理的最相关的部分似乎在第 52 行，`actives.collapse('hide')`. 如果设置了 'data-collapse-type="manual"'，我不希望这种情况发生（省略属性或设置`auto`应保持默认行为）。

我已经创建了一个[jsfiddle](http://jsfiddle.net/aksKD/)我一直在体验。

任何人都可以帮助我走上正轨吗？

* * *

## 回答 #1

> 赞同：222
> 
> 时间：2012-07-25T21:33:13.760

实际上，**您不需要修改任何代码**。从 twitterbootstrap 网站仔细阅读以下声明

> 只需将 data-toggle="collapse" 和 data-target 添加到元素即可自动分配对可折叠元素的控制。data-target 属性接受一个 CSS 选择器来应用折叠。请务必将类折叠添加到可折叠元素。如果您希望它默认打开，请添加其他类。

因此，不要使用`data-parent='#idofAccordion'`，而是使用`data-target='#idofCollapseItem'`。

它应该可以完美运行。

这是[关于 plunker 的演示](http://plnkr.co/edit/OxbVII?p=preview)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-04T22:04:46.020

我已经分叉并更新了你的小提琴。

只需转到 .show 功能，我也写了评论。

[http://jsfiddle.net/2Rnpz/](http://jsfiddle.net/2Rnpz/)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-08-08T12:31:28.757

由于问题没有提到特定版本的 Bootstrap，这里有一个 bootstrap 4 解决方案： 从带有属性`data-parent="#accordion"`的标签中删除。`data-toggle="collapse"`这是从 Collapse 文档中取出的示例`data-parent=#accordion"`。

引导层： [https ://www.bootply.com/3wV4WbzBtT#](https://www.bootply.com/3wV4WbzBtT#)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-07-20T18:46:21.477

一次只打开一个手风琴（即折叠其余部分）的技术是同时放置 data-parent="#accordion" data-target="#collapseOne" 所以它看起来像这样

```
<a class="accordion-toggle" data-toggle="collapse" href="#"
    data-parent="#accordion" data-target="#collapseOne">
  Item #1
</a> 
```

您可以在 plunker 中查看它：[http ://plnkr.co/edit/56iXtA?p=preview](http://plnkr.co/edit/56iXtA?p=preview)

# android - 调用异步任务

> ID：10019690
> 
> 赞同：7
> 
> 时间：2012-04-04T21:43:40.203
> 
> 标签：android, android-asynctask

我正在播放广播流。我想在流中的歌曲更改时生成通知。我正在使用streamscraper (http://code.google.com/p/streamscraper) 来获取当前流的元数据，并尝试在元数据更改时生成通知。

这是我为实现它而创建的异步任务。

```
public class updateMetadata extends
        AsyncTask<String, Void, PlaylistSong<BaseArtist, BaseAlbum>> {

    private static final String TAG = updateMetadata.class.getSimpleName();
    private PlaylistSong<BaseArtist, BaseAlbum> oldSong = null;
    private PlaylistSong<BaseArtist, BaseAlbum> newSong = null;
    private metadataHarvester fetchMetadata = new metadataHarvester();
    private String streamUrl = null;

    @Override
    protected PlaylistSong<BaseArtist, BaseAlbum> doInBackground(String... urls) {
        for (String url : urls) {
            try {
                oldSong = fetchMetadata.prepareRadioSong(url);
            } catch (Exception e) {
                e.printStackTrace();
            }
            streamUrl = url;
        }

        newSong = oldSong;

        while (newSong == oldSong) {
            try {
                newSong = fetchMetadata.prepareRadioSong(streamUrl);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }

        return newSong;
    }

    @Override
    protected void onPostExecute(PlaylistSong<BaseArtist, BaseAlbum> song) {
        Log.v(TAG, "New Song: " + song.getTitle());
    }
} 
```

该应用程序建立在两个链接的项目之上。项目 A 是初始化应用程序的地方，项目 B 包含集合和播放逻辑。我想在项目 B 中使用这个任务。这是播放功能（在项目 B 中）。

```
protected synchronized void play(final IMediaPlayerWrapper mp) {

        streamURL = streamFetcher.getStreamUrl();
        Log.i(TAG, "Stream URL: " + streamURL);
        try {
            Log.i(TAG, "Testing metadata harvester");
            radioSong = metadata.prepareRadioSong(streamURL);
        } catch (Exception e) {
            Log.w(TAG, e);
        }
        updateMetadata(radioSong);
        currentPlaylistManager.clearPlaylist();
        currentPlaylistManager.appendSongAtEnd(radioSong);
        listenerInformer.informCurrentSongChangeListener(radioSong);
        try {
            mp.setSong(radioSong, streamURL);
            mp.play();
            if (mp.isPlaying()) {
                setPlayerState(PlayerState.PLAY);
            }
        } catch (Exception e) {
            Log.w(TAG, e);
            setPlayerState(PlayerState.ERROR);
        }

        updateMetadata metadataChecker = new updateMetadata();
        metadataChecker.execute(streamURL);
    } 
```

当我尝试执行它时，应用程序崩溃了。

这是完整的错误跟踪：

```
04-04 23:34:34.975: E/WindowManager(18080): Activity ch.ethz.dcg.pancho2.view.radioplayer.RadioPlayerActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4053e8f0 that was originally added here
04-04 23:34:34.975: E/WindowManager(18080): android.view.WindowLeaked: Activity ch.ethz.dcg.pancho2.view.radioplayer.RadioPlayerActivity has leaked window com.android.internal.policy.impl.PhoneWindow$DecorView@4053e8f0 that was originally added here
04-04 23:34:34.975: E/WindowManager(18080):     at android.view.ViewRoot.<init>(ViewRoot.java:258)
04-04 23:34:34.975: E/WindowManager(18080):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:148)
04-04 23:34:34.975: E/WindowManager(18080):     at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:91)
04-04 23:34:34.975: E/WindowManager(18080):     at android.view.Window$LocalWindowManager.addView(Window.java:424)
04-04 23:34:34.975: E/WindowManager(18080):     at android.app.Dialog.show(Dialog.java:241)
04-04 23:34:34.975: E/WindowManager(18080):     at android.app.ProgressDialog.show(ProgressDialog.java:107)
04-04 23:34:34.975: E/WindowManager(18080):     at android.app.ProgressDialog.show(ProgressDialog.java:90)
04-04 23:34:34.975: E/WindowManager(18080):     at ch.ethz.dcg.pancho2.view.radioplayer.RadioPlayerActivity$5.onClick(RadioPlayerActivity.java:276)
04-04 23:34:34.975: E/WindowManager(18080):     at android.view.View.performClick(View.java:2485)
04-04 23:34:34.975: E/WindowManager(18080):     at android.view.View$PerformClick.run(View.java:9080)
04-04 23:34:34.975: E/WindowManager(18080):     at android.os.Handler.handleCallback(Handler.java:587)
04-04 23:34:34.975: E/WindowManager(18080):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-04 23:34:34.975: E/WindowManager(18080):     at android.os.Looper.loop(Looper.java:130)
04-04 23:34:34.975: E/WindowManager(18080):     at android.app.ActivityThread.main(ActivityThread.java:3683)
04-04 23:34:34.975: E/WindowManager(18080):     at java.lang.reflect.Method.invokeNative(Native Method)
04-04 23:34:34.975: E/WindowManager(18080):     at java.lang.reflect.Method.invoke(Method.java:507)
04-04 23:34:34.975: E/WindowManager(18080):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-04 23:34:34.975: E/WindowManager(18080):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-04 23:34:34.975: E/WindowManager(18080):     at dalvik.system.NativeStart.main(Native Method) 
```

我对异步任务的理解感到困惑。这不是使用它们的正确方法吗？

编辑：答案单独添加。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T07:49:47.840

使用 TimerTask 解决。

```
private void pollMetadata() {

    lastSong = radioSong;
    newSong = lastSong;
    Log.i(TAG, "Old Song: " + lastSong.getTitle());
    Log.i(TAG, "New Song: " + newSong.getTitle());

    updateMetadataTask = new TimerTask() {

        @Override
        public void run() {
            try {
                newSong = metadata.prepareRadioSong(streamURL);
            } catch (Exception e) {
                e.printStackTrace();
            }

            Log.i(TAG, "Old Song: " + lastSong.getTitle());
            Log.i(TAG, "New Song: " + newSong.getTitle());

            if (newSong.getTitle().equals(lastSong.getTitle())) {
                Log.v(TAG, "SAME SONG");
            }
            else {
                Log.v(TAG, "SONG CHANGED");
                lastSong = newSong;

                currentPlaylistManager.clearPlaylist();
                currentPlaylistManager.appendSongAtEnd(newSong);
                listenerInformer.informCurrentSongChangeListener(newSong);

            }

        }
    };

    t.schedule(updateMetadataTask, 300, 30000);
} 
```

# ios - iOS - 多个动画块？

> ID：10019696
> 
> 赞同：3
> 
> 时间：2012-04-04T21:44:06.413
> 
> 标签：ios, uiviewanimation

我有多个必须作为链运行的动画。我一直在处理这个问题的方法是使用 completionHandler 并运行下一个动画块。有没有更清洁的方法来处理这个问题？

```
[UIView animateWithDuration:1 animations^{

        // perform first animation
     }completion:(BOOL finished){

          [UIView animateWithDuration:1 animations^{

               // perform second animation
          }completion:(BOOL finished){

         }];

}]; 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-04T22:04:21.130

您也可以使用`animateWithDuration:delay:options:animations:completion:`交错延迟，以便它们按顺序开始，但通常最好使用完成块来完成。

如果有几个并且它使代码难以阅读，只需将这些块分解（我是在脑海中输入这个，所以它可能无法编译）：

```
typedef void (^AnimationBlock)();

AnimationBlock firstAnimation = ^{ ... };
AnimationBlock secondAnimation = ^{ ... };

[UIView animateWithDuration:1 animations:firstAnimation completion:(BOOL finished) {
  [UIView animateWithDuration:1 animations:secondAnimation];}]; 
```

您可以在其上创建一个类别`UIView`，将这些块的数组并为您将它们链接在一起，但是您必须处理所有极端情况。你如何定义时间；您如何处理中止的动画等。在大多数情况下，上述方法可能是最好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-21T19:36:53.863

我写了[一篇](http://www.a-coding.com/2013/05/simplifying-uikit-animations.html)关于这个的博客文章。我的方法是创建一个封装块和其他动画属性的动画对象。然后，您可以将这些对象的数组传递给另一个将按顺序执行它们的动画对象。代码可在[GitHub](https://github.com/aleph7/AIAnimation)上找到。

# php - 为特定用户创建特定会话

> ID：10019697
> 
> 赞同：1
> 
> 时间：2012-04-04T21:44:18.983
> 
> 标签：php

我正在尝试根据数据库中一个人的“角色”创建会话和页面条目。我以为我掌握了逻辑并创建了代码。有效。问题是，它适用于所有人。我想要一些帮助来指出为什么我的代码在逻辑上是不正确的，而对我来说它是正确的。任何帮助将不胜感激。这是我的代码。它似乎允许任何不是“管理员”的人加入，我可以指出原因：

```
function auth($email, $pass){
        global $result;

        while ($row = mysql_fetch_array($result)) {
            if($email == $row["email"] && $pass == $row["password"])
            {
                return true;
            }
        }
        return false;
    }

    function test($email, $pass){
        $test1 = auth($email, $pass); <--above
        if ($test1) {
           get_role($email); <-- below (This is the one where I'm puzzled)
        $_SESSION['email'] = true;
            header('location:menupage.php');
            exit;      
        }
        else{
            echo "Please enter correct username and password or <a href='register.php'>Register</a>";}
    }

    function get_role($email){
    global $connection;
    $sql="SELECT * FROM exam WHERE email= '$email'";
    $result = mysql_query($sql, $connection);
    confirm_query($result);
    while ($row = mysql_fetch_array($result)) {
        if ($row["role"] == 'Admin'){
                $_SESSION['role'] = true;
            }
            else
            $_SESSION['role'] = false;
    }

    } 
```

这是具有会话的管理页面的标题

```
<?php
session_start();
if(!isset($_SESSION['role']))
{   $_SESSION['msg'] = 'you are not logggedd in';
    header('location: menupage.php');
    exit;
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:47:00.327

`$_SESSION['role'] = false`仍然是一个设置的变量。所以`!isset($_SESSION['role'])`不会像你期望的那样评估。使用类似的东西：

管理页面：

```
if($_SESSION['role'] === false){ ... 
```

# java - 从 Eclipse 的组织导入中排除包

> ID：10019698
> 
> 赞同：4
> 
> 时间：2012-04-04T21:44:22.000
> 
> 标签：java, eclipse

某些类，例如和`Closeable`，在我极不可能使用的晦涩包中具有分身类。通常，这不是问题，但是当我组织导入时，我必须手动选择要导入的正确类型。有没有办法从组织导入工具中排除特定的包？`File``Container`

![](../Images/89131a4ce659c5d23dfed2dd835b4c25.png)

Eclipse 版本：
版本：3.7.1
构建 ID：M20110909-1335

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T21:59:09.517

例如，当我使用 ContentAssist 或 Organize Imports 时，我在您的示例中看不到 com.sun.*.Closeable。我认为您要配置它的位置是**Preferences > Java > Appearance > Type Filters**。但是，我的过滤器列表中没有列出 com.sun.*。也许是“隐藏禁止引用”选项。

![在此处输入图像描述](../Images/5bb17dcc281abac7200e47d7d13935e8.png)

# image - 图片中的 IE8 alt / 标题标签

> ID：10019699
> 
> 赞同：0
> 
> 时间：2012-04-04T21:44:22.493
> 
> 标签：image, title, alt

有一位客户在 IE8 中看不到 img 标题标签。是否有禁用 alt / 标题标签的设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:40:52.863

Alt 标记在 IE8 中不显示为悬停文本（正确）。

改用 title 属性

# facebook - Facebook 不允许我在用户的离线朋友的墙上发帖

> ID：10019704
> 
> 赞同：0
> 
> 时间：2012-04-04T21:44:47.960
> 
> 标签：facebook, posts

所以，我的应用程序允许用户在他们的朋友墙上发帖。但是，当我发布给离线朋友时，我从 Facebook 收到“无法发布到用户的墙”错误。确切的代码适用于在线的朋友。还有什么需要做的吗？我正在使用 publish_actions 权限。

请参阅下面的权限和代码：

权限 - scope=email,publish_actions&grant_type=client_credentials

发布代码 -

```
FB.ui(
                    {
                        method: 'feed',
                        link: linktocanvaspage,
                        picture: imageLink,
                        name: title,
                        caption: ' ',
                        description: (description),
                        to: id
                    },
function(response) {
//Do stuff
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T07:16:09.210

为了在用户的墙上发布一些消息，不需要 publish_actions。

如果您收到错误“无法发布到用户的墙”，则可能是用户在他的隐私设置中屏蔽了他的墙;-)。

# html - Nokogiri Xpath 在 inside 和之后检索文本

> ID：10019711
> 
> 赞同：1
> 
> 时间：2012-04-04T21:45:23.930
> 
> 标签：html, ruby, xpath, nokogiri

我有以下 html 并且想知道如何使用 xpath 来检索所有信息： - 姓名（名字，姓氏） - 昵称 - 电子邮件 - 送货地址......

首先，在`<BR>`. 提前谢谢了。

```
<table>
<tr>
<td valign="top" width="50%" align="left">
<span>Buyer</span><br/>FirstName LastName<br/>NickName<br/>First.Last@SomeCompany.com</td>

<tr><td valign="top" width="40%" align="left">
<span><span>Shipping address - </span><span>confirmed</span></span><br/>FirstName LastName<br/>Attn: FirstName<br/>1234 Main St.<br/>TheCity, TheState, 12345<br/>United States<br/></td>
</tr></table> 
```

在发布上述问题后，我了解到我可以做到这些，但看起来并不干净：

```
buyer = html.xpath("//span/text()[contains(., 'Buyer')]").first.parent 
buyer_name = buyer.next.next 
puts "Buyer's Full name: #{buyer_name.text}" 
buyer_nick = buyer_name.next.next 
puts "Buyer's Nick name: #{buyer_nick.text}" 
buyer_email = buyer_nick.next.next 
puts "Buyer's email: #{buyer_email.text}" 
```

我现在的问题是为什么 html.xpath("//span/text()[contains(., 'Buyer')]") 返回 TEXT 本身而不是 ELEMENT。再次，谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-05T00:06:00.310

这是一个简洁的方法：

```
name, nick, email, *addr = doc.search('//td/text()[preceding-sibling::br]')

puts name, nick, email, "--", addr 
```

XPath 完全按照您所说的那样做：它采用`br`. 该地址被放入一个变量中，但如果需要，您可以单独获取组件。

输出：

```
FirstName LastName
NickName
First.Last@SomeCompany.com
--
FirstName LastName
Attn: FirstName
1234 Main St.
TheCity, TheState, 12345
United States 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T22:30:47.267

`<br>`在处理 HTML 时有点独特的问题。除了格式化页面中的内容外，它们并没有真正用于任何事情，即像换行一样在 *nix 文本文件中换行。因此，我在提取文本时处理它们的策略是将它们转换为换行符。

将内容解析为 Nokogiri::HTML 文档：

```
doc = Nokogiri::HTML(html_doc_to_parse) 
```

将 转换为`<br>`换行符：

```
doc.search('br').each { |br| br.replace("\n") } 
```

然后，找到您想要的单元格：

```
doc.search('//td').map{ |td| td.content } 
```

这将返回如下内容：

```
doc.search('//td').map(&:content)
=> ["\n  Buyer\nFirstName LastName\nNickName\nFirst.Last@SomeCompany.com",
 "\n  Shipping address - confirmed\nFirstName LastName\nAttn: FirstName\n1234 Main St.\nTheCity, TheState, 12345\nUnited States\n"] 
```

打印时看起来像这样：

```
puts doc.search('//td').map(&:content)

  Buyer
FirstName LastName
NickName
First.Last@SomeCompany.com

  Shipping address - confirmed
FirstName LastName
Attn: FirstName
1234 Main St.
TheCity, TheState, 12345
United States 
```

从那里可以确定您想要的正确数组元素，然后在换行符上拆分，即`String.split("\n")`.

# ruby-on-rails - 尝试将 Rails 3.2 应用程序推送到 Heroku sqlite3 错误

> ID：10019713
> 
> 赞同：3
> 
> 时间：2012-04-04T21:45:46.667
> 
> 标签：ruby-on-rails, heroku, sqlite, ruby-on-rails-3.2

我正在尝试将我的 Rails 应用程序推送到 Heroku，但不断收到此错误。

```
Installing sqlite3 (1.3.5) with native extensions
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension. 
```

这是我的宝石文件

```
 source 'https://rubygems.org'

gem 'rails', '3.2.1'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

  gem 'pg'
  gem 'thin'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'twitter-bootstrap-rails'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer'

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails', '~> 2.0.1'
gem 'modernizr-rails', '~> 2.0.6'
gem 'will_paginate', '~> 3.0.3'
gem 'simple_form', '~> 2.0.1'
gem 'friendly_id', '~> 4.0.4'

# Authentication
gem 'devise', '~> 2.0.4'
# gem 'recaptcha', :require => 'recaptcha/rails'

# Authorisation 
gem 'cancan', '~> 1.6.7'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the web server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug19', :require => 'ruby-debug' 
```

这是我的 gemlock 文件

```
GEM
  remote: https://rubygems.org/
  specs:
    actionmailer (3.2.1)
      actionpack (= 3.2.1)
      mail (~> 2.4.0)
    actionpack (3.2.1)
      activemodel (= 3.2.1)
      activesupport (= 3.2.1)
      builder (~> 3.0.0)
      erubis (~> 2.7.0)
      journey (~> 1.0.1)
      rack (~> 1.4.0)
      rack-cache (~> 1.1)
      rack-test (~> 0.6.1)
      sprockets (~> 2.1.2)
    activemodel (3.2.1)
      activesupport (= 3.2.1)
      builder (~> 3.0.0)
    activerecord (3.2.1)
      activemodel (= 3.2.1)
      activesupport (= 3.2.1)
      arel (~> 3.0.0)
      tzinfo (~> 0.3.29)
    activeresource (3.2.1)
      activemodel (= 3.2.1)
      activesupport (= 3.2.1)
    activesupport (3.2.1)
      i18n (~> 0.6)
      multi_json (~> 1.0)
    arel (3.0.2)
    bcrypt-ruby (3.0.1)
    builder (3.0.0)
    cancan (1.6.7)
    coffee-rails (3.2.2)
      coffee-script (>= 2.2.0)
      railties (~> 3.2.0)
    coffee-script (2.2.0)
      coffee-script-source
      execjs
    coffee-script-source (1.2.0)
    commonjs (0.2.5)
    daemons (1.1.8)
    devise (2.0.4)
      bcrypt-ruby (~> 3.0)
      orm_adapter (~> 0.0.3)
      railties (~> 3.1)
      warden (~> 1.1.1)
    erubis (2.7.0)
    eventmachine (0.12.10)
    execjs (1.3.0)
      multi_json (~> 1.0)
    friendly_id (4.0.4)
    hike (1.2.1)
    i18n (0.6.0)
    journey (1.0.3)
    jquery-rails (2.0.2)
      railties (>= 3.2.0, < 5.0)
      thor (~> 0.14)
    json (1.6.6)
    less (2.1.0)
      commonjs (~> 0.2.0)
      therubyracer (~> 0.10.0)
    less-rails (2.2.0)
      actionpack (>= 3.1)
      less (~> 2.1.0)
    libv8 (3.3.10.4)
    mail (2.4.4)
      i18n (>= 0.4.0)
      mime-types (~> 1.16)
      treetop (~> 1.4.8)
    mime-types (1.18)
    modernizr-rails (2.0.6)
    multi_json (1.2.0)
    orm_adapter (0.0.7)
    pg (0.13.2)
    polyglot (0.3.3)
    rack (1.4.1)
    rack-cache (1.2)
      rack (>= 0.4)
    rack-ssl (1.3.2)
      rack
    rack-test (0.6.1)
      rack (>= 1.0)
    rails (3.2.1)
      actionmailer (= 3.2.1)
      actionpack (= 3.2.1)
      activerecord (= 3.2.1)
      activeresource (= 3.2.1)
      activesupport (= 3.2.1)
      bundler (~> 1.0)
      railties (= 3.2.1)
    railties (3.2.1)
      actionpack (= 3.2.1)
      activesupport (= 3.2.1)
      rack-ssl (~> 1.3.2)
      rake (>= 0.8.7)
      rdoc (~> 3.4)
      thor (~> 0.14.6)
    rake (0.9.2.2)
    rdoc (3.12)
      json (~> 1.4)
    sass (3.1.15)
    sass-rails (3.2.5)
      railties (~> 3.2.0)
      sass (>= 3.1.10)
      tilt (~> 1.3)
    simple_form (2.0.1)
      actionpack (~> 3.0)
      activemodel (~> 3.0)
    sprockets (2.1.2)
      hike (~> 1.2)
      rack (~> 1.0)
      tilt (~> 1.1, != 1.3.0)
    therubyracer (0.10.0)
      libv8 (~> 3.3.10)
    thin (1.3.1)
      daemons (>= 1.0.9)
      eventmachine (>= 0.12.6)
      rack (>= 1.0.0)
    thor (0.14.6)
    tilt (1.3.3)
    treetop (1.4.10)
      polyglot
      polyglot (>= 0.3.1)
    twitter-bootstrap-rails (2.0.5)
      actionpack (>= 3.1)
      less-rails (~> 2.2.0)
      railties (>= 3.1)
    tzinfo (0.3.32)
    uglifier (1.2.4)
      execjs (>= 0.3.0)
      multi_json (>= 1.0.2)
    warden (1.1.1)
      rack (>= 1.0)
    will_paginate (3.0.3)

PLATFORMS
  ruby

DEPENDENCIES
  cancan (~> 1.6.7)
  coffee-rails (~> 3.2.1)
  devise (~> 2.0.4)
  friendly_id (~> 4.0.4)
  jquery-rails (~> 2.0.1)
  modernizr-rails (~> 2.0.6)
  pg
  rails (= 3.2.1)
  sass-rails (~> 3.2.3)
  simple_form (~> 2.0.1)
  thin
  twitter-bootstrap-rails
  uglifier (>= 1.0.3)
  will_paginate (~> 3.0.3) 
```

我没有对 sqlite3 的任何引用，但它仍在尝试安装它。我已经删除了我的 gemfile.lock & Bundle install'd 然后 git add + commit 几次。我哪里错了？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-05T03:46:07.110

我建议为您的 PostgreSQL gem 使用组。我不确定它为什么要安装 sqlite3，但这可能会解决它。

```
group :development, :production do
  gem 'pg'
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T04:16:08.313

我还有一种情况，Rails 似乎没有根据我配置 Gemfile 的方式选择要使用的数据库引擎。

如果您使用的是 Mac OS X 或 Linux，请检查您的环境变量以查看是否有一个名为“DATABASE_URL”的变量。在我的例子中，Gemfile 指定了 sqlite3，但我可以告诉 Rails 正在使用 Postgres，我不知道为什么，直到我遇到使用 PostgreSQL 信息设置的环境变量。

我也会听从亚当的建议并建立小组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-16T19:55:04.273

确保您将在哪个环境中使用数据库。您正在尝试使用 PostgreSQL，但尚未决定在哪个环境中使用它。所以在 gem 文件中创建组来使用它。例如

```
group :development, :production do
  gem 'pg'
end 
```

# php - MySQL - bigints 和 php

> ID：10019714
> 
> 赞同：1
> 
> 时间：2012-04-04T21:45:55.473
> 
> 标签：php, mysql, bigint

当 php 中的最大 int 大小比当前日期和时间低很多时，我如何处理从 mysql 表中获取的 bigint（自 1970 年以来的毫秒数）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T21:47:54.087

PHP 的最大 int 大小在 64 位架构上非常大。你在什么上面运行它？其他想法包括：

1.  将结果除以 1000 并在 MySQL 中转换为整数，例如，`SELECT CAST(ts/1000 AS INT) AS ts`
2.  在 PHP 中收到时转换为浮点数（准确性较低）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T22:37:01.427

你可以

1.  除以 1000 并使用浮点数（可选择使用任意精度数学函数对它们进行任何计算（在 <、= 或 > 之外））
2.  存储为字符串（不进行任何计算）
3.  升级到 64 位操作系统并重新安装 PHP（更大的 MAXINT 值）

# mysql - MySQL：在给 root 密码后无法创建用户帐户

> ID：10019717
> 
> 赞同：0
> 
> 时间：2012-04-04T21:46:11.733
> 
> 标签：mysql

我在我的 EC2 实例中安装 MySQL，然后给 root 一个密码。

现在我正在尝试为 localhost 域和 '%' 域创建一个用户。创建用户很好：

```
CREATE USER 'valter'@'localhost' IDENTIFIED BY '******'; 
```

但是当我尝试授予它一些特权时：

```
GRANT ALL PRIVILEGES ON *.* TO 'valter'@'localhost' WITH GRANT OPTION; 
```

给我以下错误：

```
ERROR 1045 (28000): Access denied for user 'root'@'localhost' (using password: YES) 
```

[这里](http://dev.mysql.com/doc/refman/5.1/en/adding-users.html)说：

> shell> mysql --user=root mysql 如果你已经为 root 账户分配了密码，你还需要为这个 mysql 命令和本节后面的命令提供一个 --password 或 -p 选项。

但是它应该如何看起来像命令呢？

我在这里做错了什么？

我想创建一个也可以访问本地主机和外部网络的用户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:52:30.593

这是 EC2 的问题，而不是 MySQL。 [这是一个相关的论坛条目：](https://forums.aws.amazon.com/thread.jspa?messageID=155742)

> 问题是 RDS 实例没有超级用户权限，所以我不能“授予所有权限”给任何用户。
> 
> 通过创建具有我需要的特定权限（插入、更新、创建等）的用户，我能够让我的应用程序工作

这个论坛讨论也可能值得一看：

[https://forums.aws.amazon.com/thread.jspa?threadID=64618](https://forums.aws.amazon.com/thread.jspa?threadID=64618)

# c - 为什么 C 中的这个循环不起作用？

> ID：10019719
> 
> 赞同：1
> 
> 时间：2012-04-04T21:46:16.707
> 
> 标签：c

我正在尝试创建一个循环，以便用户可以输入一个数字，并在每个数字之后提示他们是否要输入另一个数字。如果他们选择除`n`or之外的任何内容`N`，则计数会增加，因此循环继续进行，但事实并非如此！

```
#include <stdio.h>

main() {

    int nums[10], i, tot = 0;
    int answer;
    double avg;

    int count = 1;

    for (i = 0; i < count; i++) {
        printf("Enter number %d: ", i + 1);
        scanf("%d", &nums[i]);
        printf("Enter another number? ");
        scanf(" %c", &answer);
        tot += nums[i];
        if (answer != 78 && answer != 110) {
            count++;
        }
        else { count = count - 1; }
        printf("[c:%d][i:%d]", count, i);
    }

} 
```

我得到的输出：

```
Enter number 1: 2
Enter another number? y
[c:2][i:0]Enter number 2: 3
Enter another number? y
[c:3][i:1]Enter number 3: 4
Enter another number? n
[c:4][i:2]Enter number 4: 1
Enter another number? n
[c:5][i:3]Enter number 5: 2
Enter another number? n
[c:6][i:4]Enter number 6: 2
Enter another number? n
[c:7][i:5]Enter number 7: ^C 
```

`n`当我输入or时 count 变量不会减少`N`，为什么不呢？它应该递减退出循环，并且使用`break;`也不起作用！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T21:49:38.237

您可能想要使用`answer`类型`char`而不是 int。

# javascript - 谷歌地图融合表查询

> ID：10019721
> 
> 赞同：1
> 
> 时间：2012-04-04T21:46:19.860
> 
> 标签：javascript, sql, google-maps, google-fusion-tables

我正在尝试过滤数据融合表返回。

这是我的代码：

```
 // Set Fusion Table Layer
    layer = new google.maps.FusionTablesLayer({
        query: {
            select: 'geometry',
            from: fusionTable,
            where: whereQuery
        }
    }); 
```

whereQuery 等于：name =' Antelope Valley | 圣费尔南多 | 东区 | 南湾 |name =' 羚羊谷 | 圣费尔南多 | 东区 | 南湾'

但是，它没有正确发射。

有什么我想念的吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T22:02:32.560

尝试在 where 子句中使用 IN 语句，即：

```
name IN ('Antelope Valley','San Fernando','East Area','South Bay') 
```

# java - 如何从 Java 调用 Web 服务？（我有一个执行它的 perl 脚本）

> ID：10019722
> 
> 赞同：1
> 
> 时间：2012-04-04T21:46:20.377
> 
> 标签：java, soap, wsdl, jax-ws

我有一个 Java Web 应用程序，它需要调用位于不同服务器上的 Web 服务。

这是我调用该服务的 perl 脚本的代码：

```
#!/usr/bin/perl -w

use SOAP::Lite;

my $user = 'user';
my $password = 'password';

my $loginURI = "http://someserver:8080/SakaiLogin.jws?wsdl";
my $scriptURI = "http://someserver:8080/sakai-axis/scripts/RosterService.jws?wsdl";

my $loginsoap = SOAP::Lite
-> proxy($loginURI)
-> uri($loginURI);

my $scriptsoap = SOAP::Lite
-> proxy($scriptURI)
-> uri($scriptURI);

my $session = $loginsoap->login($user, $password)->result;

# doSiteRoster(session, site_id, user_id)
my $result = $scriptsoap->doSiteRoster($session, "cfc338aa-acfb-41a6-a998-7e467afc297b", "djswartz")->result;

my $logout = $loginsoap->logout($session)->result;

exit; 
```

现在，我想我可以使用 javax.xml.ws.Service ......虽然我不太确定如何去做。任何方向都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T00:03:16.597

This is a very open ended question. -There are quite a few frameworks/libraries in java to invoke webservices.

Check these frameworks out [wsif](http://ws.apache.org/wsif/), [axis](http://ws.apache.org/wsif/),[jax-ws](http://en.wikipedia.org/wiki/Java_API_for_XML_Web_Services) and choose what you like. While the first one is specifically for invocation, the last two are more full fledged and helps you created server side (your own services) as well as client side code.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T23:47:31.457

我会使用：

1.  一个简单的 http 连接到服务端口并自己发送 XML

或者

1.  Jax-ws 作为客户端 - 您需要在 Wsdl 上运行 wsimport，然后使用生成的 java 类来调用您的服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T23:53:57.850

[您可以在http://code.google.com/p/simple-samples/downloads/list](http://code.google.com/p/simple-samples/downloads/list)中找到简单的示例[http://code.google.com/p/simple-samples/source/checkout](http://code.google.com/p/simple-samples/source/checkout)和有关它们的文档

# bash - 有条件地启用 Apple 远程桌面 shell 脚本

> ID：10019723
> 
> 赞同：0
> 
> 时间：2012-04-04T21:46:22.713
> 
> 标签：bash, shell

即使启用了 ARD，脚本也会继续运行 else 语句。如果 $ardstatus = enabled，无法弄清楚如何退出

```
#!/bin/sh
#check if users have ARD enabled or disabled
ardstatus="echo `cat /private/etc/RemoteManagement.launchd`"
if [ "$ardstatus" = enabled ]; then
    echo "ARD is enabled"
else
    #if disabled enable it for specifiedUsers which is determined in the next command
    sudo /System/Library/CoreServices/RemoteManagement/ARDAgent.app/Contents/Resources/kickstart -configure -allowAccessFor -specifiedUsers
    #configure ARD
    sudo /System/Library/CoreServices/RemoteManagement/ARDAgent.app/Contents/Resources/kickstart -configure -users admin,administrator -access -on -privs -ControlObserve -ObserveOnly -TextMessages
fi 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T22:58:40.077

所以这意味着 ardstatus 中出现的内容比您想象的要多，很可能是换行符。尝试这个

```
 ardstatus=$( < /private/etc/RemoteManagement.launchd ) 
```

如果那不能解决它，那么“检查”你的变量

```
 echo "ardstatus=XXX${ardstatus}XXX" 
```

这假设一个 bash 或 ksh 之类的 shell，如果你真的有一个 bourne shell，那么你需要继续使用 back-tics 来替换 cmd。如果你需要它，你仍然不需要回声，所以这样做

```
ardstatus="`cat /private/etc/RemoteManagement.launchd`" 
```

并使用上面的检查代码。

我希望这有帮助。

# asp.net - Sitecore 将页面强制使用一种语言

> ID：10019726
> 
> 赞同：0
> 
> 时间：2012-04-04T21:46:38.237
> 
> 标签：asp.net, sitecore

所以我有部分网站我希望我的所有用户都去美国版的页面，因为我们还没有所有语言的翻译。

我怎样才能将所有不同语言的用户发送到美国版本？对于每个语言版本，我们在 URL 中都有语言，即..

我们/页面名称 mx/页面名称 ca/页面名称

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T22:10:05.330

语言回退会为您解决这个问题吗？你有两个选择：

*   如果版本中不存在项目，则使用回退模块回退到另一种语言
*   使用“部分”语言回退模块，它将回退未填充到另一种语言的数据字段。在这种情况下，您只需要在每种目标语言中创建一个空语言版本。

[http://trac.sitecore.net/LanguageFallback](http://trac.sitecore.net/LanguageFallback)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T01:31:16.350

我喜欢 Language Fallback Provider 的想法，它基本上使任何在某种语言中没有值的字段回退到另一种语言（例如英语）。

另一种选择是在附近创建一个自定义`HttpRequest`管道处理器，`LanguageResolver`以查找站点该部分中的项目并为它们解析英语：

1.  创建一个继承自的类`HttpRequestProcessor`
2.  使用`public override void Process(HttpRequestArgs args)`代码来检查您是否在网站的该部分，如果是，请将其设置`Context.Language`为英语。

这只是一个想法，我没有尝试过。如果您想查看当前的`LanguageResolver`工作原理，请`Sitecore.Kernel`使用[ILSpy](http://wiki.sharpdevelop.net/ILSpy.ashx)反编译并查看`Sitecore.Pipelines.HttpRequest.LanguageResolver`

# javascript - Javascript getElementByID 和表单处理

> ID：10019727
> 
> 赞同：1
> 
> 时间：2012-04-04T21:46:47.100
> 
> 标签：javascript, forms, getelementbyid

我目前在提交动态表单时无法获取某些输入字段。

如果选择了该州的某个字段，则启用城市/学校字段（因为我们只需要从特定州的学生而不是其他州的学生那里收集信息）。

HTML 代码：

```
<form name="email" method="post" action="...email.php">
. 
. 
. 
<div id="cityDiv" class="row">
<h5 id="c1" class="mandatory">City:</h5>
<select id="c2" class="inputColumn" onchange="fillSchoolDropdown();" name="extra_city">
  --select options ---  
 </div>
 <div id="schoolDiv" class="row">
 <h5 id="sch1" class="mandatory">School:</h5>
 <input id="extra_school" class="inputColumn" type="text" name="extra_school">
 </div> 
```

Javascript：

```
 if(verify(document.email)){ 
     .
     .
     .
   var school = document.getElementById("extra_school").value;
   var citySelect=document.getElementById("extra_city");
   var city=citySelect.options[citySelect.selectedIndex].text; 
```

我要么得到 null CitySelect，要么表单成功验证，但不知何故……尽管在表单中输入了什么，两者的最终结果仍然是“”。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:50:17.593

```
var citySelect=document.getElementById("extra_city"); 
```

应该：

```
var citySelect=document.getElementById("c2"); 
```

因为那是身份证。您正在尝试选择`name`attr。

`select`或者您可以更改元素的 id ：

```
<select id="extra_city" class="inputColumn" onchange="fillSchoolDropdown();" name="extra_city"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T21:50:43.697

您的选择元素的 id 为“c2”，但您试图通过其名称“extra_city”调用

```
var citySelect=document.getElementById("c2"); 
```

# python - 在 Python 中使用正则表达式逐行搜索 HTML

> ID：10019728
> 
> 赞同：0
> 
> 时间：2012-04-04T21:46:59.750
> 
> 标签：python, html, regex

我正在尝试根据这个日历创建一个小时字典：http: [//disneyworld.disney.go.com/parks/magic-kingdom/calendar/](http://disneyworld.disney.go.com/parks/magic-kingdom/calendar/)

```
<td class="first"> <div class="dayContainer">
      <a href="/parks/magic-kingdom/calendardayview/?asmbly_day=20120401"> 
         <p class="day"> 1
         </p> <p class="moreLink">Park Hours<br />8:00 AM - 12:00 AM<br /><br/>Extra Magic Hours<br />7:00 AM - 8:00 AM<br /><br/>Extra Magic Hours<br />12:00 AM - 3:00 AM<br /><br/>
         </p> 
      </a> 
   </div>
</td> 
```

每个日历条目都在一行上，所以我认为最好逐行浏览 HTML，如果该行包含小时，则将这些小时添加到相应日期的字典中（有些日子有多个小时条目）。

```
import urllib
import re
source = urllib.urlopen('http://disneyworld.disney.go.com/parks/magic-kingdom/c\
alendar/')
page = source.read()
prkhrs = {}

def main():
    parsehours()

def parsehours():
    #look for #:## AM - #:## PM                                                 
    date = r'201204\d{02}'
    hours = r'\d:0{2}\s\w{2}\s-\s\d:0{2}\s\w{2}'
    #go through page line by line                                               
    for line in page:
        times = re.findall(hours, line)
        dates = re.search(date, line)
        if dates:
            start = dates.start()
            end = dates.end()
            curdate = line[start:end]
        #if #:## - #:## is found, a date has been found                         
        if times:
            #create dictionary from date, stores hours in variable              
            #extra magic hours(emh) are stored in same format.                  
            #if entry has 2/3 hour listings, those listings are emh             
            prkhrs[curdate]['hours'] = times
    #just print hours for now. will change later                                
    print prkhrs 
```

我遇到的问题是，当我将“打印行”放在遍历页面的 for 循环中时，它一次打印出一个字符，我假设这是把事情搞砸了。

现在，'print prkhrs' 什么都不打印，但是使用 re.findall 来打印日期和时间会打印出正确的时间，所以我知道正则表达式有效。关于如何让它工作的任何建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T21:49:19.517

更改`page = source.read()`为`page = source.readlines()`

`source.read()`将整个页面作为一个大字符串返回。迭代一个字符串（就像你做的那样`for line in page`）一次返回一个字符。仅仅因为你的变量被调用`line`并不`page`意味着 Python 知道你想要什么。

`source.readlines()`返回一个字符串列表，每个字符串都是页面中的一行。

# c# - 何时在 c# 中使用 SqlConnection.ClearAllPools()

> ID：10019730
> 
> 赞同：9
> 
> 时间：2012-04-04T21:47:02.543
> 
> 标签：c#, sql-server

我注意到`sqlWrite.ExecuteNonQuery();`在几秒钟内执行 200 次插入查询后我的代码错误。我一直认为这`using`将确保资源被正确地重用，并且不需要做任何事情。这是我第一次遇到这个错误，我已经处理 sql/c# 近 3 年了，做不同的事情。

```
using (SqlConnection varConnection = Locale.sqlConnectOneTime(Locale.sqlDataConnectionDetails)) 
{
    using (var sqlWrite = new SqlCommand(preparedCommand, varConnection)) 
    {
        sqlWrite.Parameters.AddWithValue("@var_agr_fname", var_agr_fname == "" ? (object) DBNull.Value : var_agr_fname);
        sqlWrite.ExecuteNonQuery();
    }
}

public static SqlConnection sqlConnectOneTime(string varSqlConnectionDetails)
{
    var sqlConnection = new SqlConnection(varSqlConnectionDetails);
    try
    {
        sqlConnection.Open();
    }
    catch
    {
        DialogResult result = MessageBox.Show(new Form {TopMost = true},
                                              "Błąd połączenia z bazą danych. Czy chcesz spróbować nawiązac połączenie ponownie?",
                                              "Błąd połączenia (000001)",
                                              MessageBoxButtons.YesNo,
                                              MessageBoxIcon.Stop);
        if (result == DialogResult.No)
        {
            if (Application.MessageLoop)
            {
                Application.Exit(); // Use this since we are a WinForms app
            }
            else
            {
                Environment.Exit(1); // Use this since we are a console app
            }
        }
        else
        {
            sqlConnection = sqlConnectOneTime(varSqlConnectionDetails);
        }
    }
    return sqlConnection;
} 
```

错误信息：`A transport-level error has occurred when sending the request to the server. (provider: Shared Memory Provider, error: 0 - No process is on the other end of the pipe.)`

考虑[到此错误](https://stackoverflow.com/questions/6534175/a-transport-level-error-has-occurred)的建议，我应该使用`SqlConnection.ClearAllPools();`它来确保正确重置或丢弃连接。所以我可以使用它，但问题是在哪里以及何时使用它？如何知道限制是否会被打破？极限在哪里？在 50 / 150 / 200 ？还是我应该在循环中每次都使用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T22:37:49.907

首先，让我说这段代码太可怕了。您将 UI 与数据连接创建混合在一起。更重要的是，您在一个部分内显示一个对话窗口`catch`并进行递归调用！这是非常混乱的，它本身就可能导致错误和不可预测的行为。并且（原始）格式使其难以阅读。很抱歉评论很苛刻，但你真的应该重新设计这段代码。

除此之外，您的代码应该可以正常工作，但如果您遇到`No process is on the other end of the pipe.`错误，则意味着您的数据库和/或 SQL Server 有问题。看起来它被堵塞了，只是不再接受任何连接。如果您在短时间内运行一批插入，请尽可能在一个连接上进行。`ClearAllPools`是一种在发生错误时恢复的方法，最好找出它是什么而不是掩盖它。这就像当您的牙齿疼痛并且从不去看牙医时服用扑热息痛一样。

另一件事是使用多个 SqlConnections 为每个连接创建单独的事务。这增加了 SQL Server 的负载，尽管它确实可以每秒执行超过数百个事务。

此外，您可以将传输更改为命名管道和 TCP，以查看它是否更改了任何内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T22:04:24.027

*“我有一种方法，我可以通过使用它一次或多次来重用它。它完成了从建立连接（或使用已经连接的连接）到将连接返回到池的所有过程。这些是我得到的建议。这样如果连接打开，我总是会重复使用它，如果它关闭，我总是打开它。”*

这听起来像是您重新发明了连接池。如果它们关闭，它总是重用连接，如果它们打开，它不能重用它们。

~~所以关闭catch块中的连接：~~

 ~~```
public static SqlConnection sqlConnectOneTime(string varSqlConnectionDetails) {
    var sqlConnection = new SqlConnection(varSqlConnectionDetails);
    try {
        sqlConnection.Open();
    } catch {
        //log and
        sqlConnection.Close();
        throw
    }
    return sqlConnection;
} 
```~~ 

~~**编辑**：说实话，我根本不会使用这样的工厂方法。它们只是不可重现错误的来源。在您使用它的地方创建和打开连接如此耗时？~~

 ~~```
using(SqlConnection varConnection = new SqlConnection(Locale.sqlDataConnectionDetails)) {
    using (var sqlWrite = new SqlCommand(preparedCommand, varConnection)) {
        sqlWrite.Parameters.AddWithValue("@varSecus_agr_fname", varSecus_agr_fname == "" ? (object) DBNull.Value : varSecus_agr_fname);
        varConnection.Open();
        sqlWrite.ExecuteNonQuery();
    }
} 
```

前两个链接来自您的链接问题（不是接受的答案），它们也可能会有所帮助：

*   [http://social.msdn.microsoft.com/Forums/en-US/sqldataaccess/thread/9609559d-f7ce-4bd8-97d0-0003ff7c9c98/](http://social.msdn.microsoft.com/Forums/en-US/sqldataaccess/thread/9609559d-f7ce-4bd8-97d0-0003ff7c9c98/)
*   [http://blogs.msdn.com/b/spike/archive/2009/04/16/a-transport-level-error-has-occurred-when-sending-the-request-to-the-server-provider- tcp-provider-error-0-an-existing-connection-was-forcibly-closed-by-the-remote-host.aspx](http://blogs.msdn.com/b/spike/archive/2009/04/16/a-transport-level-error-has-occurred-when-sending-the-request-to-the-server-provider-tcp-provider-error-0-an-existing-connection-was-forcibly-closed-by-the-remote-host.aspx)
*   [ExecuteReader 需要一个打开且可用的连接。连接的当前状态是正在连接](https://stackoverflow.com/questions/9705637/executereader-requires-an-open-and-available-connection-the-connections-curren/9707060#9707060)（不是同一个主题，但显然是相似的背景）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T08:30:26.283

这两个错误：

> 向服务器发送请求时发生传输级错误。（提供者：TCP 提供者，错误：0 - 现有连接被远程主机强行关闭。）
> 
> 向服务器发送请求时发生传输级错误。（提供者：共享内存提供者，错误：0 - 管道的另一端没有进程。）

与在 1900 年之前将 DateTime 值插入 SQL 相关。此处的 Microsoft 规则是 .. 不要在 SQL 中的 DateTime 值中存储小于 1900 年的 DateTime 值。改用字符串...~~

# php - 从另一个控制器调用 Codeigniter HMVC 控制器时不打印

> ID：10019731
> 
> 赞同：1
> 
> 时间：2012-04-04T21:47:15.397
> 
> 标签：php, model-view-controller, codeigniter, hmvc

我不明白为什么我会从我的控制器那里得到回报，但它不会打印一个简单的`var_dump`.

我遵循的步骤：

1.  模块/控制器/home.php

    ```
    $result = modules::run("apis/c_$api/data", $parameters);
    var_dump($result); //works 
    ```

2.  模块/apis/controllers/c_api1.php

    ```
     function data()
     {

        #....
        case 'getDataInfo':
            echo 'baa'; //Not working
            $result = simplexml_load_string($this->api1->getDataEntry($parameters['id'], false));
            var_dump($result); //Not working
            break;
        #....

    } 
    ```

任何想法为什么会发生这种情况？`$result`返回有效但不是`echo`or的事实`var_dump()`

## 更新

该函数有效，因为如果我在案例内注释`$result`行，我没有输出。这意味着案例有效，但即便如此我还是不明白`echo`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T22:13:33.750

我认为 MX HMVC 扩展在通过调用时会以某种方式阻止模块的输出`Modules::run`。

下面是一小段 MX 的 Modules.php，可以看到输出并没有发送到浏览器，而是返回了：

```
ob_start();
$args = func_get_args();
$output = call_user_func_array(array($class, $method), array_slice($args, 1));
$buffer = ob_get_clean();
return ($output !== NULL) ? $output : $buffer; 
```

据我所知，`Modules::run`除非您想修改上面的代码，否则无法将某些内容发送到调用模块的输出。

这就是为什么您可以`$result`在调用者控制器上而不是在被调用者控制器上打印的原因。

您需要返回要打印的内容，以便可以在调用方打印。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T21:52:59.017

最明显的原因`case`是不匹配。

没有看到更多的`api1.php`，我被迫推测。

# bash - Bash for - 条件变量

> ID：10019733
> 
> 赞同：2
> 
> 时间：2012-04-04T21:47:22.650
> 
> 标签：bash, variables, for-loop

这段代码...

```
#!/bin/bash

cond=10;

for i in {1..$cond}
do
    echo hello;
done 
```

...简直让我发疯。这仅打印一个“你好”，`i`如`{1..10}`.

```
#!/bin/bash

cond=10;

for i in {1..10}
do
    echo hello;
done 
```

打印 10x hello，这是需要的。如何将变量放入条件中？我尝试了不同的方法，但都没有奏效。多么容易的任务啊..提前谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T21:53:29.123

这将起作用：

```
cond=10;

for ((i=0;i<=$cond;i++));
do
    echo hello;
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-04T22:07:27.837

除了已经回答的经典循环之外，您还可以使用一些魔法：

```
#!/bin/bash

cond=10

for i in $(eval "echo {1..$cond}")
do
    echo hello
done 
```

但是，当然，更难阅读。

# google-chrome-extension - Chrome 扩展程序的自动更新不起作用

> ID：10019735
> 
> 赞同：3
> 
> 时间：2012-04-04T21:47:46.020
> 
> 标签：google-chrome-extension, auto-update

我正在尝试实现[Chrome 扩展程序](https://stackapps.com/questions/3298/cv-pls-helper-chrome-extension)的自动更新功能。但由于某种原因，它不起作用。我`updates.xml`在 GitHub 上托管了一个文件，我看到它已被下载（下载计数器显示此内容）。但是从未下载过[最新版本](https://github.com/downloads/PeeHaa/cv-pls/cv-pls.0.14.0.crx)的扩展程序。

我的`manifest.json`样子：

```
"version": "0.14.0",
"update_url": "https://github.com/downloads/PeeHaa/cv-pls/updates.xml", 
```

我的`updates.xml`样子：

```
<?xml version='1.0' encoding='UTF-8'?>
<gupdate xmlns='http://www.google.com/update2/response' protocol='2.0'>
  <app appid='bcbifciedokdgkokbbfippkbecnkpclj'>
    <updatecheck codebase='https://github.com/downloads/PeeHaa/cv-pls/cv-pls.0.14.0.crx' version='0.14.0' />
  </app>
</gupdate> 
```

我已经检查并仔细检查`appid`了下载 URL，它们都是正确的。

有人知道这里出了什么问题吗？它与托管在 GitHub 上的事实有关吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T18:42:48.060

我以前尝试过这种方法，但也失败了。update.xml 文件已正确下载，但我的应用程序的最新版本无法安装。

我发现它不起作用，因为 github 没有提供正确的标题。如果您查看[托管文档](http://code.google.com/chrome/extensions/hosting.html)，内容类型标头应该是“application/x-chrome-extension”。

我只是在 php 中编写了一个简单的脚本来为我提供文件：

```
<?php
$file = "";
header("Content-type: application/x-chrome-extension");
header("Content-Disposition: attachment; filename='extension.crx'");
header("Content-Transfer-Encoding: binary");
header("Content-Length: " . filesize($file));
echo readfile($file);
exit; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T22:02:31.163

看起来 update.xml 和 crx URL 都从 重定向`https://github.com`到`https://cloud.github.com`。这是我能看到导致更新失败的唯一原因。尝试更新 update.xml 代码库 URL 以包含`cloud`.

# vb6 - 受 MsgBox 影响的 VB 6 数据访问

> ID：10019737
> 
> 赞同：3
> 
> 时间：2012-04-04T21:47:49.377
> 
> 标签：vb6, citrix

这个问题太离谱了。我提交它是希望有人可能以前看过它并且知道修复。

环境 VB6、SQL 2005、Citrix XenApp 6.5。此行为仅在从 Citrix 客户端运行时出现。

上下文：

Main .bas 模块加载并在 Main sub 中调用 SQL server (2005) 使用 ADO 记录集加载数据。从控制台运行时，应用程序会在 1 或 2 秒内加载并显示。当从 Citrix 客户端调用时，它会减慢至少 30 倍。但是，如果我们放置一个 MsgBox

IE

MsgBox "测试消息..."

在 Main sub 的代码中，它在 1 到 2 秒内加载，就像从控制台加载一样。MsgBox 必须在加载用作应用程序视觉背景的 MDI 表单之后放置。如果在加载 MDI 之前放置，则不能解决问题。

通过将调试消息放在 MDI 表单的标题中，我们检测到遍历记录集所花费的时间是所有时间都被添加进去的地方。

问题是 MsgBox 语句如何影响记录集的访问速度。听起来很奇怪，但是有了 MsgBox 语句：快，没有它：非常慢。

下面是 Sub Main 的简化版本，其中显示了神奇的 MsgBox。

```
****************************************************************
*
****************************************************************
Sub Main()
On Error GoTo errHandler

'CSR 527
If Not ReadIniFiles Then
    MsgBox "Error reading ini files...contact systems.", vbExclamation
    End
End If

g_SecurityInClause = "YES"

If Not SetSecurity Then
    MsgBox "Unable to acquire your authorization credentials. Exiting..."
    Exit Sub
End If

Set cn = New Connection
With cn
 ' .ConnectionTimeout = 30
  .ConnectionString = CONNECTION_STRING
  .Open 'Options:=adAsyncConnect
End With

App.HelpFile = App.path & "\xx.chm"

g_bExiting = False

frmMain.MousePointer = vbHourglass
DoEvents
frmMain.Show

MsgBox "test"  <== PLACING THIS MSGBOX HERE SPEEDS UP APP BY A FACTOR OF AT LEAST 30
                   IF IT IS ABOVE frmMain.Show IT HAS NO EFFECT

'assign connection string and record source to ado controls
'PLOG 74

Load frmA

frmA.Adodc1.ConnectionString = CONNECTION_STRING
frmA.Adodc2.ConnectionString = CONNECTION_STRING
frmA.Adodc3.ConnectionString = CONNECTION_STRING

'timeouts for Phoenix
frmA.Adodc1.CommandTimeout = 300
frmA.Adodc2.CommandTimeout = 500
frmA.Adodc3.CommandTimeout = 500

frmA.Adodc1.RecordSource = "select some stuff"
frmA.Adodc2.RecordSource = "select some stuff"
frmA.Adodc3.RecordSource = "select some stuff"

frmA.Adodc1.Refresh
frmA.Adodc2.Refresh
frmA.Adodc3.Refresh

LoadMinorCodes
DetermineDeleteAccess
LoadStates

frmMain.MousePointer = vbNormal
frmStartBoard.Show

Exit Sub

errHandler:
MsgBox Err.Number & " " & Err.Description & " Main"

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T13:08:53.240

从 jac 的评论中，添加一个 DoEvents，并且从它对您有用的事实来看，它一定只是一个竞争条件问题。在显示表单之前，它可能正在等待数据库连接。添加 doEvents 更改了该顺序。

# html - HTML：在网页上的特定坐标处显示指标/图像

> ID：10019742
> 
> 赞同：1
> 
> 时间：2012-04-04T21:47:59.563
> 
> 标签：html, image, background, web, coordinates

我先说我是 Web 开发的新手。我希望在页面上的特定坐标处显示图像。例如，如果页面背景是世界地图，并且我希望特定城市闪烁指示器，那么最简单的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T21:55:56.893

您可以使用 CSS 样式来实现您想要的：[http ://www.w3schools.com/css/default.asp](http://www.w3schools.com/css/default.asp)

我将仅描述一种实现方式：使用[Position](http://www.w3schools.com/cssref/pr_class_position.asp) : absolute 和 top/bottom left/right 属性将图像放置在特定位置。

再想一想……还有[HTML `<map>`Tag](http://www.w3schools.com/tags/tag_map.asp)。看看它是否符合要求。:)

示例代码：

```
<img src="WorldMap.jpeg" width="800" height="600" alt="Earth Planet"
     usemap="#planetmap" />

<map name="planetmap">
  <area shape="rect" coords="0,0,82,126" href="sun.htm" alt="Sun" />
  <area shape="circle" coords="90,58,3" href="mercur.htm" alt="Mercury" />
  <area shape="circle" coords="124,58,8" href="venus.htm" alt="Venus" />
</map> 
```

# sql - SQL JOIN 两个具有一对多关联数组的表？

> ID：10019744
> 
> 赞同：1
> 
> 时间：2012-04-04T21:48:17.983
> 
> 标签：sql, join, union, one-to-many

我是相对较新的 SQL 查询，我正在尝试连接两个表以获得一个不错的数据集，但是遇到了一些问题。我试过两个：

```
SELECT wp_rg_lead.id, wp_rg_lead.created_by, wp_rg_lead_detail.field_number, wp_rg_lead_detail.value
FROM wp_rg_lead, wp_rg_lead_detail
WHERE wp_rg_lead.id = wp_rg_lead_detail.lead_id AND wp_rg_lead.form_id = '9' AND wp_rg_lead.payment_status = 'Approved' 
```

和

```
SELECT wp_rg_lead.id, wp_rg_lead.created_by, wp_rg_lead_detail.field_number, wp_rg_lead_detail.value
FROM wp_rg_lead
INNER JOIN wp_rg_lead_detail
ON wp_rg_lead.id = wp_rg_lead_detail.lead_id
WHERE wp_rg_lead.form_id = '9' AND wp_rg_lead.payment_status = 'Approved' 
```

两者都不起作用，两者都说明了我相对无法做出漂亮的 SQL 语句:)

基本上，其中一个表`wp_rg_lead`包含`wp_rg_lead.id`与第二个表相关`wp_rg_lead_detail`的表单 ID `wp_rg_lead_detail.lead_id`。

我基本上想获得`wp_rg_lead.created_by`并将其与许多`wp_rg_lead_detail.field_number`及其相关联的`wp_rg_lead_detail.value`. 这必须基于`wp_rg_lead.form_id = '9'`AND`wp_rg_lead.payment_status = 'Approved'`

基本上我想得到一个很好的数组，最终看起来像：

```
Array
(
    [0] => stdClass Object
        (
            [id] => 301
            [created_by] => 213
            [field_number(1)] => [value(1)]
            [field_number(2)] => [value(2)]
            [field_number(3)] => [value(3)]
            ...
        )
     ...
) 
```

但我不知道如何构造一个 SQL 语句来关联`field_number`and `value`。我是否需要构建两个不同的语句并将它们联合起来？

最后，我希望能够对数组执行 count() 并让它只返回基于“已批准”状态的条目数。我的第二个查询结果为 208 或其他结果。

我将不胜感激尝试使此查询正常工作的任何帮助。这超出了我现在的理解。

万分感谢！

特雷

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T22:13:56.490

如果我明白你在说什么，那么你就是在交叉表查询结果之后。[这里](http://www.sommarskog.se/dynamic_sql.html#Crosstab)有一些关于动态交叉表查询的好建议

如果您可以处理将“字段编号”列限制为一组组，那么这样的查询可能会起作用：

```
SELECT
  [ID],
  [CREATED_BY],
  [FIELD_NUMBER1] = SUM(CASE WHEN [FIELD_NUMBER] = 'FIELD_NUMBER1' THEN [FIELD_VALUE] ELSE 0 END),
  [FIELD_NUMBER2] = SUM(CASE WHEN [FIELD_NUMBER] = 'FIELD_NUMBER2' THEN [FIELD_VALUE] ELSE 0 END)
....
FROM wp_rg_lead
INNER JOIN wp_rg_lead_detail
ON wp_rg_lead.id = wp_rg_lead_detail.lead_id
WHERE wp_rg_lead.form_id = '9' AND wp_rg_lead.payment_status = 'Approved' 
```

（从您的示例中得到最后一点，根据需要进行修改）

# java - 返回包含多个变量的字符串的方法

> ID：10019745
> 
> 赞同：0
> 
> 时间：2012-04-04T21:48:19.997
> 
> 标签：java, string

这是我编写的一个包含地址信息的构造函数，但我在最后一部分遇到了问题，我必须返回一个包含名称、地址、城市、州邮政编码的字符串。写它的正确方法是什么？

公共类地址{

```
private String name;
private String address;
private String state;
private String city;
private String zipcode;

public Address(String name, String address, String state, String city, String zipcode){

    this.name = name;
    this.address = address;
    this.state = state;
    this.city = city;
    this.zipcode = zipcode;

}

public Address(){

    name = "occupant";
    address = " ";
    state = " ";
    city = " ";
    zipcode = " ";

}

public void setAddress(String Address){

    this.address = Address;

}

public void setstate(String state){

    this.state= state;

}

public void setcity(String city){

    this.city = city;
}

public void setzipcode(String code){

   this.zipcode = code; 

}

public String getaddress(){  // Return string that contains name and address and city and zipcode

    return getaddress() + " " + return state + " " + return city + " " + return code;

} 
```

}

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T21:50:10.653

```
 return address + " " + state + " " + city + " " + code; 
```

几点注意事项：

*   只有一个`return`，后面是要返回的对象，是字符串拼接的结果
*   调用您的连接方法`getFullAddress()`以将其与 getter 区分开来。
*   使用小写的变量名
*   getter 和 setter 应该得到 camel-case: `setCity()`，`getState()`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T22:04:33.710

为了清楚起见，我将变量地址重命名为街道。无论如何，我不会重写，而是`toString()`在每个字段上添加 getter，并添加一个静态实用程序类以使用以下方法打印地址

```
static String formatAddress(Address address){
    final String formatter = "Address\n%s\n%s\n%s, %s  %s";
    return String.format(formatter, address.getName(),address.getAddress(),address.getCity(), address.getState(), address.getZipcode());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T21:51:45.680

我认为您的问题可能是您在`getaddress()`内部调用`getaddress()`而不是使用`address`

编辑：正如 Bozho 指出的那样，方法中的每个语句只有一个返回值。

# php - 使用 exec 命令触发 php 文件：如何查看进程何时停止

> ID：10019751
> 
> 赞同：2
> 
> 时间：2012-04-04T21:48:56.643
> 
> 标签：php, exec

鉴于以下 php 代码...

```
 <?php   
     exec('myscript.php');
     exec('finish.php'); 
?> 
```

有没有办法判断 myscript.php 何时停止运行？

我想阻止`finish.php`运行直到`myscript.php`完成。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T21:52:36.210

exec() 调用将阻塞，直到外部作业完成。除非您强制 myscript 调用之一在后台运行，否则您将永远无法在 myscript.php 运行时运行 finish.php。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T21:52:55.393

```
$output = shell_exec("myscript.php"); 
```

这只是一个猜测，但我敢打赌你会看到执行错误。这可能是因为 myscript.php 没有运行所需的 bang 行 (#!/usr/bin/php) 和 +x 标志。

*** 更新 ***

或者，您似乎可以

```
include("myscript.php");
include("finish.php"); 
```

这将得到您正在寻找的结果。如果您真的想在运行过程之外执行这些，请参阅我上面关于 bang line 和使脚本可执行的评论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T21:54:23.547

> 有没有办法判断 myscript.php 何时停止运行？

如果它运行`finish.php`，则执行`myscript.php`完成。如果它是一个后台进程，你可以例如做一些“hacky”的事情，比如在`myscript.php`完成时创建一个文件并检查它。

从[文档](http://php.net/manual/en/function.exec.php)：

> 如果使用此函数启动程序，为了使其继续在后台运行，程序的输出必须重定向到文件或另一个输出流。否则将导致 PHP 挂起，直到程序执行结束。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T21:57:25.707

我建议您使用 proc_open，因为它提供了更多的灵活性。您还应该注意，在 exec() 的情况下，第二个只会在第一个终止后调用。

# scala - scala中map和for循环的意外副作用

> ID：10019754
> 
> 赞同：0
> 
> 时间：2012-04-04T21:49:17.313
> 
> 标签：scala, for-loop, map, hashmap, side-effects

也许是一个简单的问题，但我没有从 API 中找到令人满意的答案。我不是想写好的代码，而是想更多地了解某些事情是如何工作的：

我创建了一个初始 HashMap。从任意列表中，我想使用 map 来创建 HashMaps 列表。我在 .map 函数中向我的 HashMap 添加了一个（键，值）对。因此，在此列表中的任何连续索引中，存储的 HashMap 的大小应该增加一（因此 list(i).size == list(i+1).size - 1 对于每个 i）。

但是通过以下代码剪辑，我得到了一个映射列表，它们都是相等的（即完整的 HashMap）。不过，如果我打印出不断增长的初始 HashMap 一切似乎都是正确的。

```
scala> import scala.collection.mutable.HashMap

val m = new HashMap[Int, Int]

List(1,2,3,4) map {e =>
    println(m)
    val newM = m += e -> (e+2)
    newM
}
Map()
Map(1 -> 3)
Map(1 -> 3, 2 -> 4)
Map(3 -> 5, 1 -> 3, 2 -> 4)

import scala.collection.mutable.HashMap
m: scala.collection.mutable.HashMap[Int,Int] = Map(3 -> 5, 4 -> 6, 1 -> 3, 2 -> 4)
res7: List[scala.collection.mutable.HashMap[Int,Int]] = List(Map(3 -> 5, 4 -> 6, 1 -> 3, 2 -> 4), Map(3 -> 5, 4 -> 6, 1 -> 3, 2 -> 4), Map(3 -> 5, 4 -> 6, 1 -> 3, 2 -> 4),     Map(3 -> 5, 4 -> 6, 1 -> 3, 2 -> 4)) 
```

我所期望的是

列表（地图（1 -> 2），地图（1 -> 2, 2 -> 4），地图（1 -> 2, 2 -> 4, 3 -> 5），地图（1 -> 2, 2 - > 4, 3 -> 5, 4 -> 6))

使用生成 for 循环的等效（我假设是）版本会产生完全相同的结果：

```
scala> for {
    i <- 1 to 4
    val newM = m += i -> (i+2)
} yield newM
 res10: scala.collection.immutable.IndexedSeq[scala.collection.mutable.HashMap[Int,Int]] = Vector(Map(3 -> 5, 4 -> 6, 1 -> 3, 2 -> 4), Map(3 -> 5, 4 -> 6, 1 -> 3, 2 -> 4), Map(3 -> 5, 4 -> 6, 1 -> 3, 2 -> 4), Map(3 -> 5, 4 -> 6, 1 -> 3, 2 -> 4))

scala> for (i <- 1 to 4) yield {
    val newM = m += i -> (i+2)
    println(m)
    newM
} 
Map(1 -> 3)
Map(1 -> 3, 2 -> 4)
Map(3 -> 5, 1 -> 3, 2 -> 4)
Map(3 -> 5, 4 -> 6, 1 -> 3, 2 -> 4)
res11: scala.collection.immutable.IndexedSeq[scala.collection.mutable.HashMap[Int,Int]] = Vector(Map(3 -> 5, 4 -> 6, 1 -> 3, 2 -> 4), Map(3 -> 5, 4 -> 6, 1 -> 3, 2 -> 4), Map(3 -> 5, 4 -> 6, 1 -> 3, 2 -> 4), Map(3 -> 5, 4 -> 6, 1 -> 3, 2 -> 4)) 
```

我想我错过了一个基本步骤，但我只是看不出是哪个。我感谢任何进一步的帮助！

随后的问题：显然，（键，值）对的打印顺序总是相同的（尽管不是按照它们是元素的顺序，但我不希望 Map 无论如何，这是自然的）。当存储对时，后台会发生什么情况似乎总是如此？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T22:10:27.820

`m`是一个可变的 HashMap。

该`+=`方法将一个新元素添加到同一张地图，并返回该地图。

您已为地图命名`newM`，但这是一条红鲱鱼！这只是同一张地图`m`。所以他们都只是`m`。

如果你真的想要一份副本，你可以打电话`clone`（`m`例如`val newM = (m += e -> (e+2)).clone`）。

或者，如果您想随时构建一个*不可变*的地图，您可以使用以下`scan`方法：

```
List(1,2,3,4).scanLeft(collection.immutable.HashMap[Int,Int]()){ (m,e) => m + (e -> (e+2)) } 
```

它需要一个项目（在这种情况下是一个空地图）并逐步构建它，完成后将整个历史记录返回给您：

```
res7: List[scala.collection.immutable.HashMap[Int,Int]]
  = List(Map(), Map(1 -> 3), Map(1 -> 3, 2 -> 4),
         Map(1 -> 3, 2 -> 4, 3 -> 5), Map(1 -> 3, 2 -> 4, 3 -> 5, 4 -> 6)) 
```

更好的是，你可以

```
List(1,2,3,4).map(e => e -> (e+2)).toMap 
```

无需担心构建过程即可获得最终地图。

# java - jToggleButton.setText() 不更改按钮上的文本

> ID：10019757
> 
> 赞同：1
> 
> 时间：2012-04-04T21:49:22.917
> 
> 标签：java, swing, netbeans, jtogglebutton

我在 NetBeans 工作。单击切换按钮后，我想进行简单的 3-2-1 倒计时，并在按钮上显示倒计时。我对在 Java 中处理任何与时间相关的事情有点陌生，但是进行如此简单的倒计时的最简单方法似乎只是使用 Thread.sleep() 如下。程序按原样等待 3 秒，然后将按钮的文本打印到命令行，但是，按钮本身的文本并没有改变。知道为什么会发生这种情况以及如何解决吗？谢谢！

```
jToggleButton1.setText("3...");
System.out.println(jToggleButton1.getText());
try{
    Thread.sleep(1000);
}
catch(InterruptedException e){}
jToggleButton1.setText("2...");
System.out.println(jToggleButton1.getText());
try{
    Thread.sleep(1000);
}
catch(InterruptedException e){}
jToggleButton1.setText("1...");
System.out.println(jToggleButton1.getText());
try{
    Thread.sleep(1000);
}
catch(InterruptedException e){} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T22:05:13.363

您的问题是您正在事件调度线程中执行所有操作。所以UI没有机会更新。您需要使用 SwingWorker 或更好的摇摆计时器（具有 Action 回调的计时器）才能使这项工作正常进行

# sql - DESC 和 ASC 作为存储过程中的参数

> ID：10019758
> 
> 赞同：10
> 
> 时间：2012-04-04T21:49:32.963
> 
> 标签：sql, sql-server-2008, tsql

我有以下 SP 用于对新闻文章列表进行分页。正如您可能猜到的，`@count`是要返回的行数，`@start`是从中选择行的索引（按内部查询排序），`@orderby`表示要排序的列，并`@orderdir`表示是按一个方向排序还是按另一个方向排序。在我添加参数之前，我的原始查询在 [这里。](https://stackoverflow.com/questions/10002401/conversion-failed-when-converting-date-and-or-time-from-character-string "我的原始查询")`@orderdir`

```
ALTER PROCEDURE [mytable].[news_editor_paginate]
    @count int,
    @start int,
    @orderby int,
    @orderdir int
AS 
BEGIN
    SET NOCOUNT ON; 
    SELECT TOP (@count) * FROM 
    (  
        SELECT ne.*,n.publishstate, 
            (CASE WHEN @orderdir = 1 THEN
                ROW_NUMBER() OVER (
                    ORDER BY                    
                        CASE WHEN @orderby = 0 THEN ne.[time] END DESC,
                        CASE WHEN @orderby = 1 THEN ne.lastedit END DESC,    
                        CASE WHEN @orderby = 2 THEN ne.title END ASC
                    )
            WHEN @orderdir = 2 THEN
                ROW_NUMBER() OVER (
                    ORDER BY                    
                        CASE WHEN @orderby = 0 THEN ne.[time] END ASC,    
                        CASE WHEN @orderby = 1 THEN ne.lastedit END ASC,
                        CASE WHEN @orderby = 2 THEN ne.title END DESC
                    )
                END
            ) AS num
            FROM news_edits AS ne
            LEFT OUTER JOIN news AS n
            ON n.editid = ne.id 
        ) 
     AS a
    WHERE num > @start
END 
```

现在实际上没有任何问题，但`@orderby`参数不起作用。如果提供 1 作为`@orderdir`参数，它将给我完全相同的结果，就像我提供 2 作为该参数一样。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-04T21:55:37.627

不会在每一行上评估行号，但是 case 语句是这样的，所以不管是什么情况，你都会被 rownum 卡住。

试试这个：

```
 ROW_NUMBER() OVER (
                ORDER BY                    
                    CASE WHEN @orderby = 0 AND @orderdir = 1 THEN ne.[time] END DESC,    
                    CASE WHEN @orderby = 0 AND @orderdir = 2 THEN ne.[time] END ASC,    
                    CASE WHEN @orderby = 1 AND @orderdir = 1 THEN ne.lastedit END DESC,
                    CASE WHEN @orderby = 1 AND @orderdir = 2 THEN ne.lastedit END ASC,
                    CASE WHEN @orderby = 2 AND @orderdir = 1 THEN ne.title END ASC
                    CASE WHEN @orderby = 2 AND @orderdir = 2 THEN ne.title END DESC
                ) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-12-30T08:33:15.623

这对我来说很好 - （在哪里，顺序，方向，偏移获取）

```
 -- parameters

        @orderColumn  int ,
        @orderDir  varchar(20),
        @start  int ,
        @limit  int

        select * from items
        WHERE        (items.status = 1) 
        order by 

        CASE WHEN @orderColumn = 0 AND @orderdir = 'desc' THEN items.[category] END DESC,    
        CASE WHEN @orderColumn = 0 AND @orderdir = 'asc' THEN items.[category] END ASC,    
        CASE WHEN @orderColumn = 1 AND @orderdir = 'desc' THEN items.[category] END DESC,
        CASE WHEN @orderColumn = 1 AND @orderdir = 'asc' THEN items.[category] END ASC,
        CASE WHEN @orderColumn = 2 AND @orderdir = 'desc' THEN items.[category] END DESC,
        CASE WHEN @orderColumn = 2 AND @orderdir = 'asc' THEN items.[category] END ASC

        OFFSET @start ROWS FETCH NEXT @limit ROWS ONLY 
```

# android - 可以在activity中打开的网页链接

> ID：10019761
> 
> 赞同：0
> 
> 时间：2012-04-04T21:49:49.753
> 
> 标签：android

我正在寻找一种方法来获得一个网站列表，当按下时打开链接。但保持应用程序仍然运行，这样当用户完成链接时，他或她仍然在活动页面上

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T21:56:41.480

您需要添加一个从 WebView 继承的活动，请参阅 Android[参考](http://developer.android.com/reference/android/webkit/WebView.html)，而不是说发送一个完整的意图，该意图`http://`委托给最适合处理该意图的操作系统，在默认情况下，该意图将是设备的 Web 浏览器。如果您添加一个 WebView，那么您就处于控制之中，当活动结束时，它应该返回到原始活动。

# mysql - 如何构建 MySql 查询以从数据库中获取通话记录

> ID：10019769
> 
> 赞同：-1
> 
> 时间：2012-04-04T21:50:29.640
> 
> 标签：mysql, date, range

我是网络开发领域的新聘实习生，我的前辈让我构建 mysql 查询以从数据库中提取通话历史记录。

他们希望我建立查询以获取以下通话记录： 1- 今天 2- 昨天 3- 上周 4- 本周

只需给我示例代码或给我提示。我们正在开发移动计费应用程序。请帮助我，这对我来说非常必要，因为我是一名新实习生。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T21:52:24.477

您的提示是 sql 关键字“之间”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T21:57:03.443

```
select fname, lname, tCalled, date from calls where date between now() and now() - INTERVAL 1 DAY; 
```

如果我想对了。我没有测试这个

# mysql - 在联接派生表查询中使用 LIMIT

> ID：10019777
> 
> 赞同：2
> 
> 时间：2012-04-04T21:51:37.753
> 
> 标签：mysql, sql

我正在使用派生表（最新版本的 MySQL）从其他表中获取计数和数据，并将其放入我的主要结果集中。LEFT OUTER JOIN 中的一个小查询给我带来了问题。我正在尝试使用 LIMIT 1 条件获取该博客成员发表最新评论的日期。下面的整个查询获取会员的帐户详细信息和活动/登录统计信息。

```
SELECT mem.member_id, mem.screen_name, mem.firstname, mem.lastname,
mem.email, mem.add1, mem.add2, mem.town, mem.county,
mem.post_code, mem.country_code, mem.country_name, mem.joined, mem.member_status,
IFNULL(rep.rep,0) as reputation,
IFNULL(com.cnt,0) as comments,
com1.lcomm as last_comment
FROM members AS mem
LEFT OUTER JOIN (
    SELECT member_id, SUM(awarded_what) as rep
    FROM members_reputation
    GROUP BY member_id) rep
    ON mem.member_id = rep.member_id
LEFT OUTER JOIN (
    SELECT member_id, COUNT(comment_id) as cnt
    FROM blog_comments
    GROUP BY member_id) com
    ON mem.member_id = com.member_id
LEFT OUTER JOIN (
    SELECT member_id, posted as lcomm
    FROM blog_comments
    ORDER BY posted DESC LIMIT 1) com1   **** problem with LIMIT
    ON mem.member_id = com1.member_id

// more left outer join sub queries to other tables

WHERE mem.member_id = 1
GROUP BY mem.member_id 
```

我将查询标记为问题的地方就是问题所在。如果我使用`ORDER BY posted DESC LIMIT 1`，即使该成员有 4 条评论，它有时也不会返回 last_comment 日期，但有时会返回 - 不确定模式。如果我删除 LIMIT 1 它可以正常工作，但我担心它会返回所有评论日期，而不仅仅是最新日期，这会在数据库增长时导致我出现问题。

这里发生了什么？为什么 LIMIT 1 有时不返回 last_comment 日期？我的查询是否在没有 LIMIT 条件的情况下返回所有评论日期？解释/建议会很棒。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T22:22:48.300

这是你的问题

```
LEFT OUTER JOIN (
    SELECT member_id, posted as lcomm
    FROM blog_comments
    ORDER BY posted DESC LIMIT 1) com1   **** problem with LIMIT
    ON mem.member_id = com1.member_id 
```

在您的另一个左连接节中，您正在按...进行分组，但在上述问题之一中，您依靠 join 子句将您的集合限制为 member_id，但是到那时您已经订购并受到限制...

这意味着有时（一个）结果与您的加入标准不匹配，导致空 lcomm

你需要这样的where子句

```
LEFT OUTER JOIN (
    SELECT member_id, posted as lcomm
    FROM blog_comments
        WHERE member_id = X
    ORDER BY posted DESC LIMIT 1) com1
    ON mem.member_id = com1.member_id 
```

# ios - 为什么生成的托管类没有 dealloc/release？

> ID：10019778
> 
> 赞同：1
> 
> 时间：2012-04-04T21:51:44.990
> 
> 标签：ios, core-data

您可以使用 Xcode 生成实体的托管类。此类使用 @dynamic 并且不使用 ivars。

我的问题是：为什么生成的托管类没有 dealloc/release？答案是因为没有变量吗？每次我调用 getter/setter 方法时，我实际上是从 parent 调用 valueForKey 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T02:38:25.387

getter 和 setter 是在运行时动态创建的。他们是否调用`valueForKey:`是一个实现细节。但你是对的，生成的子类中没有 ivars。NSManagedObject 本身当然有 ivars 和它自己的 dealloc。

[您可以在Core Data Programming Guide](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreData/Articles/cdAccessorMethods.html)中阅读有关访问器的更多信息。

# python - 有效地将数据组织成可读的 .csv 格式

> ID：10019780
> 
> 赞同：1
> 
> 时间：2012-04-04T21:51:56.083
> 
> 标签：python, optimization, csv, matrix

我试图找出一种更好的方法来从大量文件中提取数据，对一些数据运行额外的计算，最后将其格式化为电子表格应用程序可读的格式。以下是我目前的做法，但我相信一定有更简单的方法。

首先，我创建一个将搜索文件并提取数据的定义。我使用一个定义，因为有时数据会从多个位置编译。我通过混合正则表达式来做到这一点并找到所有。如果需要，可以采用不同的格式。结果是这样的：

```
RawData=
[[M1,A1,305.91,288.12,Variable_M1_A1],
[M1,A2,319.07,303.70,Variable_M1_A2],
[M2,A1,237437.32,191460.91,Variable_M2_A1],
[M2,A2,270773.28,192581.05,Variable_M2_A2]] 
```

我希望对一些数据做的是以这样一种方式组织它，即从变量 A 和 M 创建网格，然后将列中的数据放置在正确的网格位置。实际上看起来像一个简单的二维矩阵，第一行和第一列表示变量。

csv 文件应如下所示：

```
Placeholder,A1,A2
M1,Variable_M1_A1,Variable_M1_A2
M2,Variable_M2_A1,Variable_M2_A2 
```

我目前正在做的是创建一个空矩阵（在这种情况下为 3x3）调用它 Result 然后运行以下代码。当变量匹配时，基本上迭代所有行和所有变量，它为结果矩阵分配来自 RawData 的值。

```
MVar=[M1,M2]
AVar=[A1,A2]
for a in range(len(RawData):
    for b in range(len(MVar)):
        for c in range(len(AVar)):
            if RawData[a][0]==Mvar[b] and RawData[a][1]==AVar[c]:
                Result[b+1][c+1]=RawData[a][4] 
```

我编写了一段代码，它将获取 RawData 矩阵并根据 M1 和 A1 的所有可能组合创建结果矩阵。如果我想将此输出到 .csv，我只需使用 csv.writer。因此，如果我只想组织已经存在的数据，这很有效。但是，当我想对数据进行计算时——例如生成另一列，该列基于未出现在矩阵中的 RawData 中的值——这变得很困难。例如，获取 csv 文件输出的样子：

```
Placeholder,A1,A2,NewA
M1,Variable_M1_A1,Variable_M1_A2,(RawData[0][3]*RawData[1][2]) 
M2,Variable_M2_A1,Variable_M2_A2,(RawData[2][3]*RawData[3][2]) 
```

请注意，用于计算的数据需要相同的 M 值但不同的 A 值。虽然可以做到这一点，但它很快就会变得非常复杂。

有没有更简单的方法来做到这一点？

编辑：使用自动生成 M 和 A 列表：

```
 [MethodList[i] for i,x in enumerate(MethodList) if x not in MethodList[i+1:]] 
```

这似乎使它更容易使用，但它仍然是一个复杂的过程！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-17T15:07:08.380

这是通过 for 循环和相应的 if 条件完成的。我仍然相信有更好的方法，但这完全有可能做到。

# facebook - 向公众显示网站注册用户的 Facebook 和 Twitter 提要

> ID：10019792
> 
> 赞同：0
> 
> 时间：2012-04-04T21:53:04.687
> 
> 标签：facebook, twitter

通过搜索、Facebook 和 Twitter 自己的文档搜索了 Internet，我不知道需要使用哪些 API 来实现我的目的。

我有一个组织可以注册的网站，这些组织可以添加活动。公众可以浏览组织或事件。注册任一类型时，我想要求用户提供 facebook 和/或 twitter URI（或只是用户名/ID，无论需要什么），以便我可以在时间线或推文中显示最新的 10 个帖子。

我相信这是可能的，我需要使用哪些 API？哪里有一些解释如何执行此操作的文档？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T22:21:53.933

您将需要使用每个平台的 API。请注意，您可能希望通过 Javascript 使用 Twitter，因为 Twitter 每个 IP 地址的 API 容量非常低。您将希望将其推送到客户端以获得多样化的 IP 池。

[https://dev.twitter.com/docs/api/1/get/statuses/home_timeline](https://dev.twitter.com/docs/api/1/get/statuses/home_timeline)

这是我如何解决的：

[http://blog.voltampmedia.com/2011/08/15/twitter-api-restrictions-and-ajax-to-the-rescue/](http://blog.voltampmedia.com/2011/08/15/twitter-api-restrictions-and-ajax-to-the-rescue/)

Facebook 将允许您重复请求信息，因此不需要推送给客户端。虽然您可能想考虑通过 ajax 加载，但您不必等待 Facebook 请求加载您的页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T03:09:23.593

如果您使用的是 java，则可以使用 spring social api。 [http://www.springsource.org/spring-social](http://www.springsource.org/spring-social)。它在内部调用 facebook graph api 函数，您不必担心解析 json 数据，它会为您完成。

# splunk - 如何有条件地创建 splunk 字段别名？

> ID：10019793
> 
> 赞同：2
> 
> 时间：2012-04-04T21:53:10.797
> 
> 标签：splunk

我正在尝试将来自两个不同日志的信息组合到一个查询中，但我不确定如何或是否可以做到这一点。基本上我想这样做：

```
LOG 1:
<client=foo userId=1234 version=10>
<client=foo userId=5432 version=8>
<client=bar userId=4567 version=4>

LOG 2:
fooid=1234 speed=500
fooid=5432 speed=300 
```

我要做的是收集所有版本 == 10 的用户的速度统计数据。

根据我的阅读，如果我创建 userId == fooid 的别名，可以这样说：

```
fooid=* AND version=10 
```

但是，我仍然有一个问题，即并非所有 userId 都是 foid。所以我希望能够在日志 1 中创建一个 fooid 字段别名，但前提是 client=foo。这可能吗，如果可以，我该怎么做？

此外，如果有其他方法可以执行此搜索，我们将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T22:58:48.600

您是将这些日志引入同一个索引还是让它们分开索引？您应该能够执行 index=FOO OR index=FOO2 | 之类的操作。如果您要引入单独的索引，请搜索 fooid=* AND version=10。

我们的开发者网站 (http://dev.splunk.com) 上有一个搜索备忘单 - [http://dev.splunk.com/web_assets/developers/pdf/splunk_reference.pdf](http://dev.splunk.com/web_assets/developers/pdf/splunk_reference.pdf)

搜索语言参考指南也可以提供帮助： [http ://docs.splunk.com/Documentation/Splunk/latest/SearchReference/WhatsInThisManual](http://docs.splunk.com/Documentation/Splunk/latest/SearchReference/WhatsInThisManual)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-24T21:25:41.013

这应该可以解决问题：

```
index=FOO (sourcetype=LOG1 client=foo version=10) OR (sourcetype=LOG2) 
| eval user=coalesce(fooid,userid) 
| stats avg(speed) by user 
```

合并评估说“如果用户存在，则用户是 fooid，否则用户是用户 ID”。除此之外，我刚刚进行了适当的搜索，以获取您想要的数据和简单的统计数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-01-06T17:08:38.737

在搜索时这样做： `index=FOO OR index=FOO2 | eval mergedID=if(isnotnull(fooid),fooid,userId) | transaction mergedID | stats min(speed) max(speed) avg(speed) by version`

# iphone - Cocos2d：将屏幕分成2个场景

> ID：10019795
> 
> 赞同：0
> 
> 时间：2012-04-04T21:53:25.890
> 
> 标签：iphone, ios, cocos2d-iphone, xcode4.2

嗨，我正在设计一个 iPhone 应用程序，它需要 3 个单独的场景，一个在顶部，一个在中间（主），一个在底部，将根据用户操作隐藏和取消隐藏。

这是一个要求，因为我需要中间（主）场景在滑动手势时改变，顶部/底部场景保持不变。

我怎样才能做到这一点？

PS：

我看过几个问题/解决方案，但没有一个给出直截了当的答案。我只需要一些真正的帮助，如果可以的话！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T22:29:21.577

嗯..我能想到的最简单的方法是在同一个屏幕上制作 3 层..并根据需要定位它们

它很容易创建一个图层，

改变它的大小只需使用`[ <layer> setContentSize:...]`, 改变它的位置：`<layer>.position=....`

并检测触摸了哪一层：

```
- (BOOL)ccTouchBegan:(UITouch *)touch withEvent:(UIEvent *)event 
{
  CGPoint location = [self convertTouchToNodeSpace: touch];
if (CGRectContainsPoint(<layer1>.boundingBox, location))
{
  CCLog(@"touched 1st layer");
  return YES;
}
if (CGRectContainsPoint(<layer2>.boundingBox, location))
{
  CCLog(@"touched 2nd layer");
  return YES;
}
 return NO;
} 
```

也...对于第 3 层，只需使用`CCMoveTo`在屏幕上和离开屏幕上移动图层

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T05:43:33.773

试试看。可能对你有帮助。

```
 -(void) registerWithTouchDispatcher
 {
[[CCTouchDispatcher sharedDispatcher] addTargetedDelegate:self priority:0 swallowsTouches:YES];
  } 
```

# javascript - 纯css关闭按钮

> ID：10019797
> 
> 赞同：76
> 
> 时间：2012-04-04T21:53:33.227
> 
> 标签：javascript, jquery, css, overlay

## [JSFiddle](http://jsfiddle.net/adzFe/)

有没有办法用纯css在那个链接上制作像X这样的东西？

![在此处输入图像描述](../Images/0d98dc38b46be0207b446670bd8d9002.png)

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2012-04-04T22:10:30.940

我花在这上面的时间比我应该做的要多，并且由于明显的原因没有在 IE 中进行测试。话虽如此，它几乎是相同的。

[http://jsfiddle.net/adzFe/14/](http://jsfiddle.net/adzFe/14/)

```
a.boxclose{
    float:right;
    margin-top:-30px;
    margin-right:-30px;
    cursor:pointer;
    color: #fff;
    border: 1px solid #AEAEAE;
    border-radius: 30px;
    background: #605F61;
    font-size: 31px;
    font-weight: bold;
    display: inline-block;
    line-height: 0px;
    padding: 11px 3px;       
}

.boxclose:before {
    content: "×";
} 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2013-11-22T07:56:23.550

我尝试关闭图标，没有文字

```
.close-icon
{
  display:block;
  box-sizing:border-box;
  width:20px;
  height:20px;
  border-width:3px;
  border-style: solid;
  border-color:red;
  border-radius:100%;
  background: -webkit-linear-gradient(-45deg, transparent 0%, transparent 46%, white 46%,  white 56%,transparent 56%, transparent 100%), -webkit-linear-gradient(45deg, transparent 0%, transparent 46%, white 46%,  white 56%,transparent 56%, transparent 100%);
  background-color:red;
  box-shadow:0px 0px 5px 2px rgba(0,0,0,0.5);
  transition: all 0.3s ease;
}
```

```
<a href="#" class="close-icon"></a>
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-04-10T13:54:45.933

尝试实现在所有浏览器中看起来一致的东西并使用可以用 css 设置样式的 svg 按钮时，我感到很沮丧。

**html**

```
<svg>
    <circle cx="12" cy="12" r="11" stroke="black" stroke-width="2" fill="white" />
    <path stroke="black" stroke-width="4" fill="none" d="M6.25,6.25,17.75,17.75" />
    <path stroke="black" stroke-width="4" fill="none" d="M6.25,17.75,17.75,6.25" />
</svg> 
```

**css**

```
svg {
    cursor: pointer;
    height: 24px;
    width: 24px;
}
svg > circle {
    stroke: black;
    fill: white;
}
svg > path {
    stroke: black;
}
svg:hover > circle {
    fill: red;
}
svg:hover > path {
    stroke: white;
} 
```

[http://jsfiddle.net/purves/5exav2m7/](http://jsfiddle.net/purves/5exav2m7/)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-04-04T21:57:45.933

基本思路：对于a.boxclose：

```
border-radius: 40px;
width:20px;
height 10px;
background-color: #c0c0c0;
border: 1px solid black;
color: white;
padding-left: 10px;
padding-top: 4px; 
```

在关闭框的内容中添加“X”。

[http://jsfiddle.net/adzFe/1/](http://jsfiddle.net/adzFe/1/)

又快又脏，但有效。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-04-05T06:25:31.280

嗨，您可以在纯 css 中使用此代码

像这样

**css**

```
.arrow {
cursor: pointer;
color: white;
border: 1px solid #AEAEAE;
border-radius: 30px;
background: #605F61;
font-size: 31px;
font-weight: bold;
display: inline-block;
line-height: 0px;
padding: 11px 3px;
}
.arrow:before{
 content: "×";
} 
```

**HTML**

```
<a href="#" class="arrow"> 
</a> 
```

​ 现场演示[http://jsfiddle.net/rohitazad/VzZhU/](http://jsfiddle.net/rohitazad/VzZhU/)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-04-04T21:58:52.177

**编辑：**更新了 css 以匹配你所拥有的..

[**演示**](http://jsfiddle.net/skram/xLSLd/24/)

**HTML**

```
<div>
    <span class="close-btn"><a href="#">X</a></span>
</div> 
```

**CSS**

```
.close-btn {
    border: 2px solid #c2c2c2;
    position: relative;
    padding: 1px 5px;
    top: -20px;
    background-color: #605F61;
    left: 198px;
    border-radius: 20px;
}

.close-btn a {
    font-size: 15px;
    font-weight: bold;
    color: white;
    text-decoration: none;
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2013-04-25T23:25:16.817

这里令人失望的是“X”不是透明的（至少我可能会这样创建PNG）。

我整理了这个快速测试。 [http://jsfiddle.net/UM3a2/22/embedded/result/](http://jsfiddle.net/UM3a2/22/embedded/result/)它允许您在使负空间透明的同时为正空间着色。由于它完全由边框组成，因此很容易着色，因为边框颜色默认为文本颜色。

它不完全支持 IE 8 及更早版本（边框半径问题），但它可以很好地降级为正方形（如果您可以使用方形关闭按钮）。

它还需要两个 HTML 元素，因为每个选择器只允许两个伪元素。我不知道我是从哪里学到的，但我认为这是在 Chris Coyier 的一篇文章中。

```
<div id="close" class="arrow-t-b">
  Close
  <div class="arrow-l-r"> </div>
</div>

#close {
  border-width: 4px;
  border-style: solid;
  border-radius: 100%;
  color: #333;
  height: 12px;
  margin:auto;
  position: relative;
  text-indent: -9999px;
  width: 12px;
}
#close:hover {
  color: #39F;
}
.arrow-t-b:after,
.arrow-t-b:before,
.arrow-l-r:after, 
.arrow-l-r:before {
  border-color: transparent;
  border-style: solid;
  border-width: 4px;
  content: "";
  left: 2px;
  top: 0px;
  position: absolute;
}
.arrow-t-b:after {
  border-top-color: inherit;
}
.arrow-l-r:after {
  border-right-color: inherit;
  left: 4px;
  top: 2px;
}
.arrow-t-b:before {
  border-bottom-color: inherit;
  bottom: 0;
}
.arrow-l-r:before {
  border-left-color: inherit;
  left: 0;
  top: 2px;
} 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2014-01-17T11:56:54.693

[您可以在http://www.cssbuttongenerator.com/](http://www.cssbuttongenerator.com/)上创建`close`（或任何）按钮。它为您提供按钮的纯 css 值。**HTML**

 **```
<span class="classname hightlightTxt">x</span> 
```

**CSS**

```
<style type="text/css">
.hightlightTxt {
  -webkit-touch-callout: none;
  -webkit-user-select: none;
  -moz-user-select: none;
}
.classname {
    -moz-box-shadow:inset 0px 3px 24px -1px #fce2c1;
    -webkit-box-shadow:inset 0px 3px 24px -1px #fce2c1;
    box-shadow:inset 0px 3px 24px -1px #fce2c1;
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #ffc477), color-stop(1, #fb9e25) );
    background:-moz-linear-gradient( center top, #ffc477 5%, #fb9e25 100% );
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffc477', endColorstr='#fb9e25');
    background-color:#ffc477;
    -webkit-border-top-left-radius:20px;
    -moz-border-radius-topleft:20px;
    border-top-left-radius:20px;
    -webkit-border-top-right-radius:20px;
    -moz-border-radius-topright:20px;
    border-top-right-radius:20px;
    -webkit-border-bottom-right-radius:20px;
    -moz-border-radius-bottomright:20px;
    border-bottom-right-radius:20px;
    -webkit-border-bottom-left-radius:20px;
    -moz-border-radius-bottomleft:20px;
    border-bottom-left-radius:20px;
    text-indent:0px;
    border:1px solid #eeb44f;
    display:inline-block;
    color:#ffffff;
    font-family:Arial;
    font-size:28px;
    font-weight:bold;
    font-style:normal;
    height:32px;
    line-height:32px;
    width:32px;
    text-decoration:none;
    text-align:center;
    text-shadow:1px 1px 0px #cc9f52;
}
.classname:hover {
    background:-webkit-gradient( linear, left top, left bottom, color-stop(0.05, #fb9e25), color-stop(1, #ffc477) );
    background:-moz-linear-gradient( center top, #fb9e25 5%, #ffc477 100% );
    filter:progid:DXImageTransform.Microsoft.gradient(startColorstr='#fb9e25', endColorstr='#ffc477');
    background-color:#fb9e25;
}.classname:active {
    position:relative;
    top:1px;
}</style>
/* This button was generated using CSSButtonGenerator.com */ 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-04-05T07:21:56.063

只是一个想法-如果您不针对 IE7，则可以摆脱[任何经过 base64 编码并嵌入到 css 中的图像](https://stackoverflow.com/questions/1124149/embedding-background-image-data-into-css-as-base64-good-or-bad-practice)。我假设您的目标是避免不必要的 http 请求，而不是实际将 css 按钮作为自己的目标。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-04-05T00:11:22.117

如果你想要纯 css，没有字母“x”....

这里有一些很棒的实验图标，其中包括一个用 CSS 制作的圆圈中的“x”：http: [//nicolasgallagher.com/pure-css-gui-icons/demo/](http://nicolasgallagher.com/pure-css-gui-icons/demo/)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2016-07-02T08:34:49.660

我认为这是最好的！

并使用简单的 JS 来完成这项工作。

```
<script>
function privacypolicy(){
    var privacypolicy1 = document.getElementById('privacypolicy');
    var privacypolicy2 = ('display: inline;');
    privacypolicy1.style= privacypolicy2;
}
function hideprivacypolicy(){
    var privacypolicy1 = document.getElementById('privacypolicy');
    var privacypolicy2 = ('display: none;');
    privacypolicy1.style= privacypolicy2;
}
</script>
<style type="text/css">
            .orthi-textlightbox-background{
                background-color: rgba(30, 23, 23, 0.82);
                font-family: siyam rupali; 
                position: fixed; top:0px; 
                bottom:0px; 
                right:0px; 
                width: 100%; 
                border: none; 
                margin:0; 
                padding:0; 
                overflow: hidden; 
                z-index:999999; 
                height: 100%;
                }

                .orthi-textlightbox-area {
                background-color: #fff;
                position: absolute;
                width: 50%;
                left: 300px;
                top: 200px;
                padding: 20px 10px;
                border-radius: 6px;
                }
                .orthi-textlightbox-area-close{
                font-weight: bold;
                background-color:black;
                color: white;
                border-radius: 50%;
                padding: 10px;
                float: right;
                border: 1px solid black;
                box-shadow: 0 0 10px 0 rgba(33, 157, 216, 0.82);
                margin-top:-30px;
                margin-right:-30px;
                cursor:pointer;
                }
</style>
<button onclick="privacypolicy()">Show Content</button>
<div id="privacypolicy" class="orthi-textlightbox-background" style="display:none;">
<div class="orthi-textlightbox-area">
LOL<button class="orthi-textlightbox-area-close" onclick="hideprivacypolicy()">×</button>
</div>
</div> 
```**

# delphi - 我如何替换用于展开和折叠节点的 Treeview 的图像？

> ID：10019799
> 
> 赞同：1
> 
> 时间：2012-04-04T21:53:38.047
> 
> 标签：delphi, delphi-xe2

我正在使用**TCustomTreeView.OnCustomDrawItem**事件来更改 TTreeview 节点的颜色，但现在我需要替换用于展开和折叠节点的图像，但我坚持这一点。我如何替换用于展开折叠节点的 Treeview 的图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T22:33:53.270

标准`TTreeView`组件不允许您直接或通过所有者绘图替换展开/折叠图像。您必须找到支持它的第三方 TreeView 组件。

# java - windows7如何关闭无头图形环境

> ID：10019802
> 
> 赞同：3
> 
> 时间：2012-04-04T21:54:18.173
> 
> 标签：java, eclipse, windows-7, headless, awtrobot

我设法破坏了一个工作应用程序，但无法解决如何修复它。

我有一个 Java Web 应用程序，它在 Eclipse（春季 STS 版本）内的 Windows7 机器上的“tc 服务器”上运行。

该应用程序将使用 java.awt.robot 执行屏幕捕获，并在后续页面上显示捕获的图像。

到目前为止一切顺利，我已经能够从屏幕上收集缓冲图像并将其显示在网络应用程序的后续页面上。

然后我以某种方式破坏了网络应用程序，可能正在加载 Android SDK 和 Eclipse 工具。

现在，我收到了 Robot 的异常，因为它无法在 HeadlessEnvironment 中运行。谷歌搜索表明 headlessEnvironment 是在没有屏幕和键盘的情况下运行的，但我两者都有。该应用程序以前可以正常工作，但从未遇到 HeadlessEnvironment。

如果我调试并显示 GraphicsEnvironment；

```
 GraphicsEnvironment env = GraphicsEnvironment.getLocalGraphicsEnvironment(); 
```

我得到一个基于 Win32GraphicsEnvironment 的 HeadlessGraphicsEnvironment 对象。

同时：

```
String nm = java.security.AccessController.doPrivileged
(new sun.security.action.GetPropertyAction("java.awt.graphicsenv", null));
System.out.println("java.awt.graphicsenv = " + nm); 
```

给

```
java.awt.graphicsenv = sun.awt.Win32GraphicsEnvironment 
```

我对 android 的糟糕升级导致我最初放弃升级并重新安装最新的 SpringSource 工具集。这遇到了 HeadlessEnvironment 问题，所以我已经恢复到我原来的 eclipse 版本，现在也有同样的问题。

我现在感觉很卡，大多数搜索都告诉我如何打开无头模式，谁能解释如何再次关闭无头模式？

非常感谢 ！

<------------- 编辑：添加了堆栈跟踪 ------------------------------- ------------------------------------>

```
05-Apr-2012 18:42:51 org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [viewerServlet] in context with path [/WebView]  threw exception [Request processing failed; nested exception is java.lang.RuntimeException:  java.awt.AWTException: headless environment] with root cause
java.awt.AWTException: headless environment
at java.awt.Robot.<init>(Robot.java:75)
at uk.co.fred.MSWindowsHandler.WindowHandlerUtilities.setupRobot(WindowHandlerUtilities.java:191)
at uk.co.fred.MSWindowsHandler.WindowHandlerUtilities.scanWindow(WindowHandlerUtilities.java:71)
at uk.co.fred.Scanner.ScanServiceImpl.scanScreenToBufferedImage(ScanServiceImpl.java:66)
at uk.co.fred.viewer.controller.scan.control.ScanControlController.postPage_control_Scan(ScanControlController.java:57)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:426)
at org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter.handle(AnnotationMethodHandlerAdapter.java:414)
at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)
at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:224)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:175)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at com.springsource.insight.collection.tcserver.request.HttpRequestOperationCollectionValve.traceNextValve(HttpRequestOperationCollectionValve.java:112)
at com.springsource.insight.collection.tcserver.request.HttpRequestOperationCollectionValve.invoke(HttpRequestOperationCollectionValve.java:94)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:405)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:279)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:515)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-07T11:55:18.293

已解决的问题：在 Eclipse 的服务器启动配置中，有一组配置参数，其中包括以下语句：

```
-Djava.awt.headless=true 
```

通过在 Eclipse 中创建另一个服务器配置并选择“基本”类型而不是“洞察”类型的 tc 服务器实例，我能够获得一个非无头环境。

tc 服务器的“洞察”类型似乎坚持使用无头运行环境（尽管我没有进一步调查。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-05T00:34:18.877

既然您提到了“web-app”，那么应用服务器是否作为 Windows 服务运行？如果您在服务面板中，则有一个“与桌面交互”复选框可能会导致您的症状。

![在此处输入图像描述](../Images/ee6f92740e92a20a4873ff5eeab65de5.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-20T15:18:16.770

切换到新的 SSH 客户端时，我遇到了这个问题。我一直使用腻子没有问题。使用 Putty，Java 将以无头模式运行。当我使用 MobaXTerm 时，Java 尝试连接到 X11 服务器。我确信某处有一个设置可以修复 MobaXTerm，所以这不会发生，还有一个 Putty 中的设置可能会导致同样的问题。

我使用此代码（感谢 OP）来验证这是我的问题：

```
import java.awt.GraphicsEnvironment;
public class GetGraphics{
  public static void main(String[] args){
    GraphicsEnvironment env = GraphicsEnvironment.getLocalGraphicsEnvironment();
    String nm = java.security.AccessController.doPrivileged
      (new sun.security.action.GetPropertyAction("java.awt.graphicsenv", null));
    System.out.println("java.awt.graphicsenv = " + nm);
  }
} 
```

首先在与 MobaXTerm 连接的服务器上运行它：

```
$javac GetGraphics.java
$java GetGraphics 
```

我收到了这个错误：

```
Xlib: connection to "localhost:10.0" refused by server
Xlib: MobaXterm X11 proxy: unable to connect to forwarded X server: Network error: Connection refused

Exception in thread "main" java.awt.AWTError: Can't connect to X11 window server using 'localhost:10.0' as the value of the DISPLAY variable.
.... More stack trace .... 
```

现在我将 headless 设置为 true 并再次运行，仍然使用 MobaXTerm：

```
$ java -Djava.awt.headless=true GetGraphics
java.awt.graphicsenv = sun.awt.X11GraphicsEnvironment 
```

现在我终于可以像这样使用腻子运行它了：

```
$ java GetGraphics
java.awt.graphicsenv = sun.awt.X11GraphicsEnvironment 
```

结论：用于连接服务器的客户端可能会导致图形问题。在我的情况下，使用 JFreeChart 的图表停止工作。切换回腻子解决了这个问题。

# .htaccess - 电子商务网站的 HTACCESS 重定向

> ID：10019805
> 
> 赞同：1
> 
> 时间：2012-04-04T21:54:40.227
> 
> 标签：.htaccess, redirect, e-commerce

您能否帮助在 htaccess 文件中从以下位置进行一次性重定向：

```
/something-something-something-something-c-2_19_70.html 
```

对于这种没有编号 -2_ 的文件：

```
/something-something-something-something-c-19_70.html 
```

我确信有一个短代码将应用于该类型的所有 url

非常感谢您提前

大卫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T14:59:21.853

将此代码放在 DOCUMENT_ROOT 下的 .htaccess 中：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

# redirect /something-something-something-something-c-2_19_70.html 
# to /something-something-something-something-c-19_70.html
RewriteRule ^(.*)2_(.*)$ $1$2 [L,NC,R]

# redirect /ethical-jewellery-silver-c-2_19.html to /silver-c-19.html
RewriteRule ^[^-]+-[^-]+-([^-]+-)([^-]+-)2_(.*)$ $1$2$3 [L,NC,R] 
```

# objective-c - 修改 Google OAuth2 登录页面

> ID：10019818
> 
> 赞同：2
> 
> 时间：2012-04-04T21:56:02.727
> 
> 标签：objective-c, ios, oauth-2.0

是否可以从 google 的 oauth2 服务修改或显示对 iOS 更友好的登录页面？我不确定我之前是否看到过修改，但我找不到任何信息。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T06:48:53.307

我认为您可以做的唯一更改是提供您自己的徽标，如下所述：[https ://developers.google.com/youtube/2.0/developers_guide_protocol_oauth2#OAuth2_Register](https://developers.google.com/youtube/2.0/developers_guide_protocol_oauth2#OAuth2_Register)

为了使登录过程更像您的应用程序的一部分，可以在嵌入式浏览器中打开登录页面，而不是在 Safari 中打开它，但您将无法更改其外观。

# tsql - 如果 select count(*) = 1 with grouping，最有效的获取价值的方法

> ID：10019819
> 
> 赞同：0
> 
> 时间：2012-04-04T21:56:16.117
> 
> 标签：tsql, group-by, common-table-expression

假设我有 ID 为 int、VALUE 字符串的表：

```
ID    |  VALUE
1        abc 
2        abc 
3        def
4        abc
5        abc
6        abc 
```

如果我选择值，count(*) 按值分组，我应该得到

```
VALUE   | COUNT
abc       5
def       1 
```

现在棘手的部分，如果有 count == 1 我需要从第一个表中获取该 ID。我应该使用 CTE 吗？创建结果集，我将在其中添加 ID string == null 并运行 update b.ID = a.ID where count == 1 ？

或者还有其他更简单的方法吗？

编辑：

我想要这样的结果表：

```
ID      VALUE  count
null    abc    5
3       def    1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T22:21:48.690

**如果您的 ID 值是唯一的**，您可以简单地检查一下 max(id) = min(id)。如果是这样，则使用其中之一，否则您可以返回 null。像这样：

```
Select Case When Min(id) = Max(id) Then Min(id) Else Null End As Id,
       Value, Count(*) As [Count]
From   YourTable
Group By Value 
```

由于您已经在执行聚合，包括 MIN 和 Max 函数不太可能花费任何额外（显着）时间。我鼓励你试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T22:00:37.330

使用 group by 时，可以在 group by 语句之后使用 having 子句。

所以

```
SELECT [ID]
FROM table
GROUP BY [VALUE]
HAVING COUNT(*) = 1 
```

编辑：关于您编辑的问题：这使用了一些有趣的连接和联合

```
CREATE TABLE #table
(ID int IDENTITY,
VALUE varchar(3))

INSERT INTO #table (VALUE)
VALUES('abc'),('abc'),('def'),('abc'),('abc'),('abc')

    SELECT * FROM (
    SELECT Null as ID,VALUE, COUNT(*) as [Count]
    FROM #table
    GROUP BY VALUE
    HAVING COUNT(*) > 1
UNION ALL
    SELECT t.ID,t.VALUE,p.Count FROM
    #table t
    JOIN
    (SELECT VALUE, COUNT(*) as [Count]
    FROM #table
    GROUP BY VALUE
    HAVING COUNT(*) = 1) p
    ON t.VALUE=p.VALUE
) a

DROP TABLE #table 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T22:05:12.130

我这样做的方式确实是 CTE：

```
using @group AS (SELECT value, Count(*) as count from MyTable GROUP BY value HAVING count = 1)
SELECT MyTable.ID, @group.value, @group.count from MyTable
   JOIN @group ON @group.value = MyTable.value 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-04T22:00:10.407

也许不是最有效的，但这样的工作：

```
SELECT MAX(Id) as ID,Value FROM Table WHERE COUNT(*) = 1 GROUP BY Value 
```

# ruby-on-rails-3 - ActionMailer 在本地主机上工作，但不在公共服务器上

> ID：10019820
> 
> 赞同：0
> 
> 时间：2012-04-04T21:56:18.143
> 
> 标签：ruby-on-rails-3, smtp, actionmailer

我用 Rails 3 构建了一个应用程序，并创建了一个简单的联系我们页面，通过我的 SMTP 服务器发送邮件。问题是我的应用程序在我的本地主机（我的电脑）中运行时可以发送邮件，但是当我在托管服务器（hostgator）中运行应用程序时它不起作用。有趣的是，smtp 服务器是一样的！

这是我的本地主机中的配置（它有效！）：

**配置/环境/developer.rb**

```
# ActionMailer Config
config.action_mailer.default_url_options = { :host => 'localhost:3000' }
config.action_mailer.delivery_method = :smtp
config.action_mailer.perform_deliveries = true
config.action_mailer.raise_delivery_errors = true
config.action_mailer.default :charset => "utf-8" 
```

**配置/初始化程序/setup_mail.rb**

```
ActionMailer::Base.smtp_settings = {  
  :address              => "mail.mydomain.org",  
  :port                 => 26,  
  :domain               => "app.mydomain.org",  
  :user_name            => "register@app.mydomain.org",  
  :password             => "********",  
  :authentication       => "plain",  
  :enable_starttls_auto => false  
} 
```

我的主机服务器的 url 是 app.mydomain.org，所以在托管应用程序中我只更改了这个：

**配置/环境/development.rb**

```
# ActionMailer Config
config.action_mailer.default_url_options = { :host => 'mydomain.org' }
... 
```

在主机服务器中，现在我在开发模式下使用 WEBrick 运行应用程序。我得到一个超时错误：

```
....
Timeout::Error (execution expired):
  app/controllers/contact_us_controller.rb:13:in `create'
... 
```

我错过了什么吗？？

**编辑和解决：**

Hostgator 支持人员刚刚找出了此问题的原因。在`ActionMailer`设置中，`:address`必须是`localhost`，而不是`mail.mydomain.org`。所以 ActionMailer 将是：

```
ActionMailer::Base.smtp_settings = {  
  :address              => "localhost",  
  :port                 => 26,  
  :domain               => "app.mydomain.org",  
  :user_name            => "register@app.mydomain.org",  
  :password             => "********",  
  :authentication       => "plain",  
  :enable_starttls_auto => false  
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T22:43:25.433

我认为您的意思是 development.rb，而不是 developer.rb。此设置仅在开发中运行，并且假设您已将 RAILS_ENV 设置为服务器上的生产，它将是 production.rb，而不是 development.rb，将被处理。

如果两者的服务器相同，则可以将其移至 application.rb（或 config/initializers 中的脚本）。不过，您可能需要不同的生产设置，以便它指向 localhost。这也可以解决这里的问题，以防某些 DNS 问题或服务器配置阻止传出 SMTP 请求。

# c++ - Windows C++ 纳秒计时？

> ID：10019824
> 
> 赞同：3
> 
> 时间：2012-04-04T21:56:44.140
> 
> 标签：c++, windows, performance, visual-c++

Windows 上的 C++ 中有没有办法以纳秒为单位测量时间？

我能找到的只是linux解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-04T21:59:13.153

使用该[`QueryPerformanceFrequency`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644905%28v=vs.85%29.aspx)函数查看 QueryPerformanceCounter 的运行速度。我认为它可能在纳秒范围内。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-04T22:00:33.760

查看 Windows 上的 QueryPerformanceCounter。

> 在对代码进行计时以识别性能瓶颈时，您希望使用系统必须提供的最高分辨率计时器。本文介绍如何使用 QueryPerformanceCounter 函数对应用程序代码进行计时

[http://support.microsoft.com/kb/172338](http://support.microsoft.com/kb/172338)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T22:01:29.580

使用 Windows7 和硬件计数器分析 API [http://msdn.microsoft.com/en-us/library/windows/desktop/dd796395(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd796395(v=vs.85).aspx)

rdtsc 和 QueryPerformanceCounter/QueryPerformanceFrequency 都不够准确，因为开销大，中断和任务切换。

[编辑]：抱歉将 PerformanceCounter 的链接与硬件计数器混淆了。抱歉只使用过一次，这是一个快速的答案。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T21:59:08.453

如果您可以运行自己的程序集，则可以读取 CPU 的周期计数器并将周期差除以 CPU 的时钟速率：

```
static inline uint64_t get_cycles()
{
  uint64_t t;
  __asm__ __volatile__ ("rdtsc" : "=A"(t));
  return t;
} 
```

# reporting-services - SSRS 2008 中的 Switch 和 IIF 条件格式

> ID：10019827
> 
> 赞同：1
> 
> 时间：2012-04-04T21:56:58.110
> 
> 标签：reporting-services, formatting, conditional, switch-statement, iif

我在 SSRS 中的条件格式方面遇到了一些问题。我已经尝试过 Switch 和 IIF 语句（如下）。报告运行但没有像我希望的那样返回颜色。我正在尝试以红色突出显示 <= 今天的日期，而其他所有内容都将是黑色的。此字段是否为日期字段是否重要？我在这里看到了其他具有相同问题但没有解决方案的问题。希望今天是我找到答案的幸运日。这是我尝试过的，并提前感谢您的任何意见。

```
 =Switch( Fields!Decision_Must_Be_Made.Value <= today(), "Red",  
         Fields!Decision_Must_Be_Made.Value > today(),  "Black")

        =IIF( Fields!Decision_Must_Be_Made.Value <=today(), "Red",  "Black") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T22:39:19.040

是的，如果该字段是日期时间字段，这绝对很重要。如果是字符串，则需要先将其转换为日期时间。你如何做到这一点将取决于字符串的格式。但是，如果您可以坚持使用数据库中的日期时间字段，那就更好了。（我已经看到有些人会在 sql 查询的选择中将日期格式化为字符串。不要那样做。尽可能晚地格式化：在 SSRS 中，在文本框级别。）

如果它是日期时间，请分解您的公式以找出未按预期工作的内容并使其更加可见，即使仅用于调试。把它放在一个单元格的表达式中，例如：

```
=IIF( Fields!Decision_Must_Be_Made.Value <=today(), "Old",  "New") 
```

编辑以添加有关应在何处添加颜色公式的信息：

听起来您没有在正确的位置指定颜色的 IIF。您可以在几个不同的地方指定它：它需要在文本框或占位符的属性中。这些东西的值应该只是您的日期字段 ( `=Fields.Decision_Must_Be_Made.Value`)，但需要单独指定字体颜色。这样做的一个地方是在文本框属性对话框中。在字体窗格中，您需要指定字体颜色。Fx 符号表示您可以指定公式。单击此按钮以输入您的“=iif...”公式。

![文本框属性字体窗格](../Images/87e4a209ad8ca5a6e0391766d4f6ead5.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-18T00:58:10.310

诚然，这并不能回答您的情况，但可能会对其他人有所帮助。我有一个问题，一个独立的文本框使用我想在没有记录或重复记录时显示错误消息的场景。我的公式 "=IIf(IsNothing(First(Fields!MyField.Value)) 或 First(Fields!MyField.Value) <> Last(Fields!MyField.Value), "Red", "SomeOtherColorButNotBlack") 没有呈现正确的前景色（出现“黑色”）但是，在 Tablix 或 Matrix 上做一个等同于 True 或 False 的类似表达式确实可以正常工作。MS 要解决的另一个问题。我通过将颜色设置为 always 找到了自己的解决方法是红色的，然后在没有错误时将Text的表达为空白。

# haskell - 序列的乐趣

> ID：10019828
> 
> 赞同：2
> 
> 时间：2012-04-04T21:56:58.797
> 
> 标签：haskell

我有一组五个功能，可以称为五种方式之一。我用这样的模式匹配来表达这一点，

```
type Configure = ReaderT Config IO ()
data Step = PreVal
          | PreProc
          | Proc
          | PostProc
          | PostVal

foo :: Step -> Configure
foo PreVal = do some stuff
foo PreProc = do some stuff 
```

依此类推`bar`，`baz`并且设置类似

我知道如何使用`sequence`来调用动作列表。给定一个`[Step]`，我怎么能去打电话`[foo,bar,baz]`。按顺序，同时还调用每个可能的步骤。

所以它应该这样做 `foo PreVal` `foo PreProc` ......等等 `bar Preval` `bar PreProc` ..等等 `baz`......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T22:02:25.517

```
mapM_ (\ f -> mapM_ f [PreVal, PreProc, Proc, PostProc, PostVal]) [foo, bar, baz] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T22:18:52.277

我想在之前的答案中添加一些内容。只要您的值构造函数的顺序与步骤的执行顺序相同，您就可以指定`deriving (Enum)`. 这将允许您编写所有`Step`s的列表`[PreVal..PostVal]`并缩短代码。

此外，考虑在 之前`PreVal`或之后添加步骤的情况`PostVal`。为了确保您的调用考虑到新引入的步骤，您最好也定义一个实例`Bounded`，然后在代码中使用`minBound`和。`maxBound`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-04T22:13:16.317

```
doThemAll steps = sequence_ $ do
    f <- [foo, bar, baz]
    step <- steps
    return (f step) 
```

# java - Java中的图像处理

> ID：10019833
> 
> 赞同：0
> 
> 时间：2012-04-04T21:57:14.813
> 
> 标签：java, jpeg

我想使用 JAVA 语言提取 jpeg 图像的像素值，并且需要将其存储在 array(bufferdArray) 中以便进一步操作。那么我如何从 jpeg 图像格式中提取像素值呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T22:46:43.857

看看 BufferedImage.getRGB()。

这是一个精简的说明示例，说明如何拆分图像以对像素进行条件检查/修改。根据需要添加错误/异常处理。

```
public static BufferedImage exampleForSO(BufferedImage image) {
BufferedImage imageIn = image;
BufferedImage imageOut = 
new BufferedImage(imageIn.getWidth(), imageIn.getHeight(), BufferedImage.TYPE_4BYTE_ABGR);
int width = imageIn.getWidth();
int height = imageIn.getHeight();
int[] imageInPixels = imageIn.getRGB(0, 0, width, height, null, 0, width);
int[] imageOutPixels = new int[imageInPixels.length];
for (int i = 0; i < imageInPixels.length; i++) {
    int inR = (imageInPixels[i] & 0x00FF0000) >> 16;
    int inG = (imageInPixels[i] & 0x0000FF00) >> 8;
    int inB = (imageInPixels[i] & 0x000000FF) >> 0;

    if (  conditionChecker_inRinGinB  ){
        // modify
    } else {
        // don't modify
    }

}
imageOut.setRGB(0, 0, width, height, imageOutPixels, 0, width);
return imageOut;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T22:04:59.440

将 JPEG 转换为 java 可读对象的最简单方法如下：

```
BufferedImage image = ImageIO.read(new File("MyJPEG.jpg")); 
```

BufferedImage 提供了在图像中的确切像素位置（XY 整数坐标）获取 RGB 值的方法，因此您可以自己决定如何将其存储在一维数组中，但这就是要点.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-06T03:17:22.093

有一种方法可以获取缓冲图像并将其转换为整数数组，其中数组中的每个整数代表图像中像素的 rgb 值。

```
int[] pixels = ((DataBufferInt)image.getRaster().grtDataBuffer()).getData(); 
```

有趣的是，当整数数组中的一个元素被编辑时，图像中对应的像素也是如此。

为了从一组 x 和 y 坐标中找到数组中的像素，您将使用此方法。

```
public void setPixel(int x, int y ,int rgb){
    pixels[y * image.getWidth() + x] = rgb;
} 
```

即使有了坐标的乘法和加法，它仍然比使用 BufferedImage 类中的 setRGB() 方法快。

编辑：另外请记住，图像需要的类型必须是 TYPE_INT_RGB，默认情况下不是。可以通过创建相同尺寸和类型为 TYPE_INT_RGB 的新图像来转换它。然后使用新图像的图形对象将原始图像绘制到新图像上。

```
public BufferedImage toIntRGB(BufferedImage image){
    if(image.getType() == BufferedImage.TYPE_INT_RGB)
         return image;
    BufferedImage newImage = new BufferedImage(image.getWidth(), image.getHeight, BufferedImage.TYPE_INT_RGB);
    newImage.getGraphics().drawImage(image, 0, 0, null);
    return newImage;
} 
```

# iphone - 如果我在项目的构建阶段从编译源中删除所有文件会发生什么？

> ID：10019837
> 
> 赞同：1
> 
> 时间：2012-04-04T21:57:30.433
> 
> 标签：iphone, objective-c, ios, xcode

如果我在项目的构建阶段从编译源中删除所有文件会发生什么？

在 Targets -> Build Phses -> Compile Sources -> 文件列表下。如果那里没有文件会发生什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T22:53:55.663

正如警告本身所说，编译器不知道如何处理某些文件。

检查遵循“无规则处理文件”警告的文件名，并在构建阶段查找它。然后尝试仅删除该文件并重建项目。

通常，当 Build Phases 下的 Compile Sources 列表中有一个头文件 (.h) 时，就会发生这种情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T22:54:33.873

您将objective-c列为标签。您的文件都是 .h、.m 还是 .mm？- 除了任何 .xib 或 .nib 文件？

“编译源”组是编译器预期编译的文件集。那些属于特定目标的成员然后将其编译的输出链接在一起以形成该目标。错误“没有规则来处理文件”通常表明系统无法推断出文件是哪种语言，因此无法推断出如何编译它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-22T09:05:10.810

**在下面添加 main.m 和 yourclassess .m 文件到编译源之后**

它非常相似：

1.在项目导航器中选择项目。

2\. 在详细视图中选择目标。

3.选择构建阶段选项卡。

4.展开编译源部分

5.删除不想编译的文件

# matlab - MATLAB中带有乘法步骤的for循环

> ID：10019838
> 
> 赞同：0
> 
> 时间：2012-04-04T21:57:38.177
> 
> 标签：matlab, syntax, for-loop, octave

有没有办法在 MATLAB 中通过自定义步骤使用 for 循环？我想要做的是遍历小于给定数字的 2 的所有幂。C++ 中的等效循环（例如）将是：

```
for (int i = 1; i < 65; i *= 2) 
```

*注 1：*这是最适合 for 循环的迭代，所以我不想使用 while 循环。
*注 2：*我实际上使用的是 Octave，而不是 MATLAB。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T22:15:03.433

也许你想要一些类似的东西

```
for i=2.^[1:6]
   disp(i)
end 
```

除了你需要弄清楚指数的范围。这使用了这样一个事实，因为 `a_(i+1) = a_i*2`这可以重写为`a_i = 2^i`.

否则，您可以执行以下操作

```
i=1;
while i<65
   i=i*2;
   disp(i);
end 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T22:19:40.173

您可以迭代任何向量，因此您可以在开始循环之前使用向量操作来创建值向量。例如，前 100 个平方数的循环可以这样写：

```
values_to_iterate = [1:100].^2;
for i = values_to_iterate
   i
end 
```

或者您可以遍历向量中的每个*位置*`values_to_iterate`（这给出了相同的结果，但有一个好处是`i`可以跟踪您已经完成了多少次迭代 - 如果您将每个循环的结果顺序写入输出向量，这很有用） ：

```
values_to_iterate = [1:100].^2;
for i = 1:length(values_to_iterate)
   values_to_iterate(i)
   results_vector(i) = some_function( values_to_iterate(i) );
end 
```

更简洁地说，您可以简单地编写第一个示例：

```
for i = [1:100].^2
   i
end 
```

与 C 不同，不必有一个“规则”来从一个值到下一个值。迭代的向量可以是完全任意的：

```
for i = [10, -1000, 23.3, 5, inf]
     i
end 
```

# magento - Magento 和 PayPal 网站付款专业版错误

> ID：10019854
> 
> 赞同：0
> 
> 时间：2012-04-04T21:59:17.963
> 
> 标签：magento, paypal, magento-1.5

我们的 Magento 商店通过 PayPal 使用 Website Payments Pro 支付网关。在大多数情况下，这工作得很好。偶尔（大约每天一次），我们会收到失败的交易电子邮件，并且错误非常普遍（即“内部错误”或“处理您的订单时出错。请联系我们或稍后再试。”）。我一直在与我们的 PayPal 代表合作，但他还没有弄清楚原因。并非每笔交易都会发生这种情况，通常如果客户重新提交订单，它将再次生效。作为开发人员、我的雇主和在弹出对话框中看到相同通用错误消息的客户，这对我来说非常令人沮丧。

我的问题如下：

1.  对于每天获得约 300 多个订单的网站来说，这是否正常？
2.  我们是否受制于 PayPal 系统中的漏洞？
3.  有没有人遇到过类似的问题？或者，相反，您是否有使用过至少获得同样多流量且 PayPal 从未出现任何错误的网站的经验？

我不知道该怎么办。我想相信这不是我们发送给 PayPal 的错误。但是，如果每个使用 PP 作为网关的客户都经历过这么大的痛苦，我认为声音足够大的人会推动改进。我对其他支付网关没有任何经验，所以也许 PP 是万恶之源......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T08:12:22.493

1.  您当然需要为此类问题做好准备，并且为客户提供的错误消息需要清晰且信息丰富，如果发生错误该怎么办。
2.  是的，你是，这不仅仅是贝宝问题，这可能是网络延迟用户交互等问题。
3.  有 n 数量的网站遇到这种情况，因为系统设计有很多断点，你不能保证问题不会发生在第 3 方系统或网站上，你可以采取一些预防措施来避免这种情况，方法是加倍付款方式几个网关等

# django - South SchemaMigration 类中模型属性的用途是什么？

> ID：10019855
> 
> 赞同：2
> 
> 时间：2012-04-04T21:59:30.310
> 
> 标签：django, django-south, schema-migration

在 South manage.py schemamigration 生成的每个迁移文件中，通常都会有一个 south.v2.SchemaMigration 的子类。该类将包含 forwards() 和 backwards() 方法以及模型属性。South 如何使用模型属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T23:06:03.890

这称为 ORM 冻结。

> 我们还使用易于更改的人类可读格式；由于 South 不仅依赖于冻结的模型来重新创建 ORM，还依赖于检测更改，因此能够一次又一次地编辑它们非常有用（如果您将失败的迁移附加到票证上，它也可以作为一个有价值的调试工具）。

[http://south.aeracode.org/docs/ormfreezing.html](http://south.aeracode.org/docs/ormfreezing.html)

# shell - 如何在其中包含选项卡的 hbase shell 中指定行键？

> ID：10019856
> 
> 赞同：6
> 
> 时间：2012-04-04T21:59:32.647
> 
> 标签：shell, escaping, hbase

在我们无限的智慧中，我们决定我们的行将在中间用一个制表符键控：

```
item_id <tab> location 
```

例如：

```
000001  http://www.url.com/page 
```

使用 Hbase Shell，我们无法执行 get 命令，因为制表符没有正确写入输入行。我们尝试了

```
get 'tableName', '000001\thttp://www.url.com/page' 
```

没有成功。我们应该做什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-07-26T00:17:29.807

我对二进制值有同样的问题：\x00。这是我的分隔符。

为了让 shell 接受您的二进制值，您需要用双引号 (") 而不是单引号 (') 来提供它们。

> 把 'MyTable', "MyKey", 'Family:Qualifier', "\x00\x00\x00\x00\x00\x00\x00\x06Hello from shell"

检查你的标签是如何编码的，我最好的选择是它是 UTF8 编码的，所以从 ASCII 表中，这将是“000001\x09http://www.url.com/page”。

在旁注中，您应该使用空字符作为分隔符，它将帮助您进行扫描。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T15:47:08.090

希望您可以更改制表符。:) 是的，这是一个坏主意，因为 Map Reduce 作业使用制表符作为分隔符，使用制表符或空格作为分隔符通常是个坏主意。

您可以使用双冒号 (::) 作为分隔符。但是等等，如果 URL 中有一个双冒号呢？好吧，在将 URL 存储到 HBase 时对 URL 进行 urlencode - 这样，您就有了标准分隔符，并且密钥的 URL 部分不会与分隔符冲突。

在 Python 中：

```
import urllib

DELIMITER = "::"
urlkey = urllib.quote_plus(location)

rowkey = item_id + DELIMITER + urlkey 
```

# php - 删除文件并记录

> ID：10019857
> 
> 赞同：-2
> 
> 时间：2012-04-04T21:59:34.097
> 
> 标签：php, sql, sql-delete, delete-file

我有以下代码从数据库中删除记录。但是我也希望它从服务器中删除关联的文件。其中一列包含文件的路径。有人可以解释我将如何在这里使用 unlink 功能吗？

```
<?php

 include('config.php');

 if (isset($_GET['id']) && is_numeric($_GET['id']))
 {    
     $id = $_GET['id'];      
     $result = mysql_query("DELETE FROM images WHERE id=$id")     
     or die(mysql_error());      
     header("Location: view.php");
 }   
 else    
 {
     header("Location: view.php");
 }

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T22:03:05.697

首先，修复您的[SQL 注入](http://bobby-tables.com)漏洞。

要回答您的问题，首先您必须选择有关该本地文件的详细信息的记录。一旦你核对了数据库记录，你就失去了存储文件位置的唯一位置，所以首先获取该数据。

就这样，在伪代码中：

1.  获取文件位置
2.  删除文件
3.  删除数据库记录

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T22:02:56.287

您可以先进行查询以检索图像名称，然后简单地删除文件：

```
unlink($theFilenameRetrievedFromDb); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T22:03:34.703

您必须首先对数据库进行选择语句才能知道文件的路径。完成此操作后，您可以在此路径上使用 unlink，然后进行删除语句。

# php - Sqlite 3 添加外键错误 php yii

> ID：10019858
> 
> 赞同：0
> 
> 时间：2012-04-04T21:59:49.637
> 
> 标签：php, sqlite, yii

我正在尝试将外键添加到我的表中，但是当我尝试这样做时，我收到：

SQLite 不支持向现有表添加外键约束。

```
 $this->addForeignKey('fk_user', 'tbl_data', 'id_responsable','tbl_user', 'id', 'CASCADE');

    $this->createTable('tbl_data', array(
              'id' => 'pk',
              'name' => 'string',
      'id_responsable' => 'integer',
    )); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T07:48:46.510

这是预期的行为，请参阅来源：[https ://github.com/yiisoft/yii/blob/master/framework/db/schema/sqlite/CSqliteSchema.php#L242](https://github.com/yiisoft/yii/blob/master/framework/db/schema/sqlite/CSqliteSchema.php#L242)

```
public function addForeignKey($name, $table, $columns, $refTable, $refColumns, $delete=null, $update=null)
{
    throw new CDbException(Yii::t('yii', 'Adding a foreign key constraint to an existing table is not supported by SQLite.'));
} 
```

我假设这是试图成为跨不同 DBMS 的可移植代码（如果不是并且仅适用于 sqlite，请不要将调用放在那里：p）

如果你想覆盖这个功能，你必须扩展 Sqlite Schema 类，然后你就会陷入麻烦。

根据 Yii::app()->db->driverName 关闭添加外键可能会更好。如果它 == sqlite 则不要添加外键。

或者做一些hack doogery来保存表，用外键重新创建它，然后重新加载所有数据。

# c - 阻止 Linux 将 USB 条码扫描器字符发送到控制台

> ID：10019859
> 
> 赞同：2
> 
> 时间：2012-04-04T21:59:49.597
> 
> 标签：c, linux, barcode-scanner

对于客户，我编写了一个中间件，让他使用以太网适配器访问串行端口或网络串行端口，并使用 Web 服务读取数据。

他最近要求添加对从条形码扫描仪读取数据的支持，我已经实现了直接从设备（/dev/input/eventX 或 /dev/input/by-id/xyz）读取事件的东西。

条形码扫描仪直接连接到服务器，并且正在通过我的网络服务器公开的网络服务读取数据。

一切正常，除了条形码由 linux 控制台接收！

我如何“阻止”（停止）系统向控制台发送内容？

注意：没有 X11/Xorg 或其他任何东西，服务器只是控制台机器！条形码由在 Android 平板电脑上执行的 javascript (jsonp) 读取

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T22:09:38.300

检查`/etc/inittab`a`getty`是否在该串行端口上运行。`#`如果是，则通过插入 a作为第一个字符来注释掉该行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T00:51:49.003

可能是因为您正在从启动脚本运行服务器进程并且它正在输出到 stdout/stderr，所以条形码正在进入控制台，或者它们是某种系统日志或内核消息。

假设它们是标准输出，在启动脚本中找到服务器运行的位置，并将输出重定向到文件或 /dev/null，例如：

```
noisy-server-cmd >/dev/null 2>&1 & 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T22:08:55.670

这取决于您的 Linux 发行版。在 Redhat/Centos 上，您可以通过编辑 /etc/syslog.conf 和 /etc/sysconfig/syslog 来关闭或过滤控制台消息。

# android - 有没有办法在 Android 中默认 TouchImageView 的比例？

> ID：10019861
> 
> 赞同：4
> 
> 时间：2012-04-04T22:00:11.943
> 
> 标签：android, imageview

像这里的许多其他用户一样，我正在使用[https://github.com/MikeOrtiz/TouchImageView提供的 TouchImageView 类](https://github.com/MikeOrtiz/TouchImageView)

在我的应用程序中，我正在加载来自服务的图像文件，我将其设置到我的 TouchImageView 对象中。这很好用，因为我可以放大和平移我的图像。但是，每当我单击其中一个按钮移动到下一个或上一个图像时，图像会在显示下一个图像之前缩小到标准缩放。这是第一个问题。

每次更新另一个组件时，TouchImageView 对象都会返回到其初始缩放级别。只需在 EditText 上调用下一行代码即可重置缩放。

```
imagePageNumber.setText(imagePageNumber.getText()); 
```

为了解决这个问题，我尝试在当前缩放级别信息丢失之前保存它，然后在图像加载后再次应用它。我在 TouchImageView 中编写了一个名为 setZoom(float mScaleFactor) 的方法，它基本上模仿了现有 onScale 方法的缩放行为。如果我在使用 imageView.setImageBitmap(bm) 更新图像后直接调用它，则图像不会缩放。但是，如果我在按钮上有一个单击侦听器，并在图像加载后尝试缩放，它将正确地将缩放更新为我之前保存的值。我假设图像加载方式可能存在线程问题，并且在调用 setImageBitmap 后无法立即缩放。

有谁知道将比例从一个图像加载到另一个图像的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2021-01-05T13:51:42.633

我在其他情况下遇到过，但解决方案可能相同。参考你的

```
imagePageNumber.setText(imagePageNumber.getText()); 
```

和

```
 TouchImageView object returns to its initial zoom level any time another component is updated 
```

您必须记住其中的 onMeasure() 方法和 translateMatrixAfterRotate() 会导致 TouchImageView 更新。translateMatrixAfterRotate() 支持旋转，如果您对应用程序的旋转能力不感兴趣，您只需删除 translateMatrixAfterRotate 函数和所有以“temp..”开头的变量，这些变量在旋转之前存储移动数据。它必须解决您遭受的强制 TouchImageView 更新问题。

# entity-framework - 选择性/部分继承（EF 代码优先）

> ID：10019865
> 
> 赞同：0
> 
> 时间：2012-04-04T22:00:27.997
> 
> 标签：entity-framework, code-first

我首先使用 EF 4.1 代码来定义我的数据库模型类。请看下面的代码：

```
public abstract class TableElement
{
    public Guid ID { get; set; }
    // and other common properties
}

public class Row : TableElement
{
    public double? Width { get; set; }
    public double? Height { get; set; }

    public ICollection<Cell> Cells { get; set; }
}

public class Cell : TableElement
{
    public double? CellWidth { get; set; }
    public double? CellHeight { get; set; }

    public virtual Row ParentRow { get; set; }
} 
```

我想部分/选择性地从类 Row 继承类 Cell 的一些属性（注意我是从 Row 驱动 Cell）。这个想法是我希望 Row 类控制/更改其 Cells 子级的某些属性，除非它们具有本地覆盖。我使用这段代码来完成这项工作：

```
public class Cell : TableElement
{
    public double? CellWidth { get; set; }
    [NotMapped]
    public double? Width
    {
        get { return CellWidth ?? ParentRow.Width; }
        set { CellWidth = value; }
    }

    public double? CellHeight { get; set; }
    [NotMapped]
    public double? Height
    {
        get { return CellHeight ?? ParentRow.Height; }
        set { CellHeight = value; }
    }

    public virtual Row ParentRow { get; set; }
} 
```

我不确定这是不是最好的方法，因为我的实际项目中的一些属性是复杂类型而不是 Nullable（虽然有一个解决方法）。无论如何，我会很感激对此的任何其他想法。

# parsing - 只要满足第一行中的数值，就使用 grep -A1 在第二行中返回一个值

> ID：10019870
> 
> 赞同：0
> 
> 时间：2012-04-04T22:01:04.130
> 
> 标签：parsing, awk, grep, conditional-statements

我有每条成对两行的日志条目。我必须解析第一行以提取一个数字以知道它是否大于 5000。如果这个数字大于 5000，那么我需要返回第二行，这也将被解析以检索一个 ID。

我知道如何 grep 所有信息并解析它。如果它们小于特定值，我不知道如何让 grep 忽略它们。请注意，如果可以替代 awk/sed 等其他方式，我不承诺使用 grep。

**原始数据**（两行分开，例如清晰）。

我的 grep 的目标是“提取的积分 =”之后的数字 5001，如果超过 5000，那么我想从第二行返回数字“12345”---------------- ----------

```
2012-03-16T23:26:12.082358 0x214d000 DEBUG ClientExtractAttachmentsPlayerMailTask for envelope 22334455 finished: credits extracted = 5001, items extracted count = 0, status = 0\. [Mail.heomega.mail.Mail](PlayerMailTasks.cpp:OnExtractAttachmentsResponse:944)    
2012-03-16T23:26:12.082384 0x214d000 DEBUG Mail Cache found cached mailbox for: 12345 [Mail.heomega.mail.Mail](MailCache.cpp:GetCachedMailbox:772) 
```

**片段**--------------

-- 找出提取的学分数量，没有逗号噪音：

```
grep "credits extracted = " fileName.log | awk '{print $12}' | awk -F',' '{print $1}' 
```

-- 无论提取的 credits 的值是多少，查找第二行的 ID：

```
grep -A1 "credits extracted = " fileName.log | grep "cached mailbox for" | awk -F, '{print $1}' | awk '{print $10}' 
```

-- 一个“if”语句，象征着我需要获得的逻辑：

```
v_CredExtr=5001; v_ID=12345; if [ $v_Cred -gt 5000 ]; then echo $v_ID; fi; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T22:25:16.063

我相信您可以使用单个 AWK 过滤器完成所有操作：

```
#!/usr/bin/awk -f

/credits extracted =/ {
    credits = substr($12, 1, length($12) - 1) + 0
    if (credits > 5000)
        show_id = 1
    next
}

show_id == 1 {
    print $10
    show_id = 0
} 
```

显然，您可以将所有 AWK 脚本填充到脚本内的 shell 字符串中，甚至是多行。为了清楚起见，我在它自己的脚本中展示了它。

PS：请在工作时通知;-)

# iphone - 删除默认放置在我的 TableView 中的复选标记附件

> ID：10019871
> 
> 赞同：2
> 
> 时间：2012-04-04T22:01:06.267
> 
> 标签：iphone, xcode, ios5, uitableview

StackOverflow 上的全新海报。我已经在这里阅读和学习了一段时间，但我需要开始提出一些问题并进行互动，因此对于我的一些问题的任何帮助将不胜感激。

我基本上从 cellForRowAtIndexPath 中的 plist 在 tableView 中生成默认声音列表。这会为我生成一个说“x”声音的列表，其中一个声音在其单元格上放置了一个默认的复选标记附件。我有一个存储“活动”声音文件的索引值的 plist 文件，这就是我在生成的 tableView 中放置原始复选标记的方式。因此，在下面的代码中，如您所见，我为“活动”声音索引加载了 plist 的值，但是，当用户与我的 tableView 交互并选择新声音时，我需要放置默认复选标记从视图中删除。其他一切工作正常。我似乎无法破解这个简单的问题，我确定它是一个简单的语法问题，我只是不知道如何完成它。我确定解决方案是一两行代码，就在我的眼皮底下。提前感谢您的帮助。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{ 
NSDictionary *dictionarySound = [NSDictionary dictionaryWithContentsOfFile:[self ActDataFilePath]];

NSNumber *defaultSoundIndex = [dictionarySound valueForKey:@"soundIndex"];

int theIntVal = [defaultSoundIndex integerValue]; 

UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

//Everything below works just fine, checkmarks are removed and placed accordingly, sounds are played just fine.  I just need help above in removing the default checkmark

if(self.checkedPath)
{        
    UITableViewCell *uncheckCell = [tableView cellForRowAtIndexPath:self.checkedPath];

    uncheckCell.accessoryType = UITableViewCellAccessoryNone;
}

cell.accessoryType = UITableViewCellAccessoryCheckmark;

self.checkedPath = indexPath; 
```

.......下面的其他代码在点击时播放我的声音并将新活动的声音名称和索引值存储在plist中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T22:13:48.540

处理这个问题的常用方法是使用 didSelectRowAtIndexPath: 记录选择已更改的事实并告诉表视图重新加载数据，无论是全部还是仅针对受影响的单元格，然后在 cellAtRowForIndexPath: 中进行附件类型配置。

如果可以滚动表格，其他方法往往会失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T04:39:36.717

试试下面的代码

```
cell.accessoryType = UITableViewCellAccessoryNone; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-05T07:41:58.483

好的男孩和女孩，这是我自己问题的解决方案。

当基于我的 plist 文件构建表时，最初确定并放置在 cellForRowAtIndexPath 中的复选标记。这是我的 cellForRowAtIndexPath 的代码，它获取我的 plist 数据、构建我的表并使用复选标记设置默认选择。

```
NSDictionary *dicSound = [NSDictionary dictionaryWithContentsOfFile:[self ActDataFilePath]];

NSNumber *defaultSoundIndex = [dicSound valueForKey:@"soundIndex"];

//conversion of NSNumber to integer for comparison below to indexPath.row, both need to be int's
int theIntVal = [defaultSoundIndex integerValue];

static NSString *CheckMarkCellIdentifier = @"CheckMarkCellIdentifier";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier: CheckMarkCellIdentifier];

cell.textLabel.text = [[MyArray objectAtIndex:indexPath.row] objectForKey:@"name"];

if(indexPath.row == theIntVal)
{
    cell.accessoryType = UITableViewCellAccessoryCheckmark;

}
else 
{
   cell.accessoryType = UITableViewCellAccessoryNone;

}

return cell; 
```

当用户通过单击另一个单元格与 tableView 交互并且 didSelectRowAtIndexPath 启动时，这就是我放置新复选标记的方式以及我如何将旧单元格设置为没有辅助复选标记。

```
//This is a dictionary file that contains a number of values I need to grab
NSDictionary *dictionarySound = [NSDictionary dictionaryWithContentsOfFile:[self ActDataFilePath]];

NSNumber *defaultSoundIndex = [dictionarySound valueForKey:@"soundIndex"];

//conversion of NSNumber to integer for comparison below to indexPath.row, both need to be int's

UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];               

if(self.checkedPath)
{        
    UITableViewCell *uncheckCell = [tableView cellForRowAtIndexPath:self.checkedPath];

    uncheckCell.accessoryType = UITableViewCellAccessoryNone;
}

cell.accessoryType = UITableViewCellAccessoryCheckmark;

self.checkedPath = indexPath;

//THE FIX
[tableView reloadData]; 
```

这里的关键是[tableView reloadData]；行，因为它重新加载表并选中新选项并删除原始复选标记。显然，我正在重新加载数据，这意味着我在 plist 文件中内置了持久性。每次用户单击单元格时，我基本上都会更新本地字典的“soundIndex”值，然后将其写入持久 plist 文件。

希望这可以帮助其他遇到此问题的人。

# git - 自动 git 合并

> ID：10019874
> 
> 赞同：1
> 
> 时间：2012-04-04T22:01:11.320
> 
> 标签：git, merge

我的用例是这样的......

我有一个有两个生产分支的项目。任何分支中的大多数更改都需要合并到另一个分支中。只有非常具体且不频繁的更改需要在两个分支中分开。

我想要做的是在主远程存储库上的两个分支之间设置自动合并，该存储库用作生产构建机器的源，以便将某些东西推送到分支 A 的任何人都会自动将其合并到分支 B 并处理一个特殊的手动不合并推送（这种情况很少发生）。

有什么简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T23:05:21.430

您可以使用 post-receive git hook。当有人推送到主远程存储库时，会调用一个脚本（钩子），您可以在其中获取各种信息、推送的内容、预览提交哈希和新提交哈希。

在这里，您可以准确确定推送了哪个分支。鉴于此信息，您可以在另一个存储库中签出另一个分支，进行合并并推送此信息。

您的 .git/hooks/ 文件夹中有一个 post-receive.sample 文件。将其重命名为 post-receive 并确保它是可执行的。在 bash 中，它可能看起来像：

```
#!/bin/sh
# <oldrev> <newrev> <refname>
while read oldrev newrev ref
do
    echo "$oldrev $newrev $ref"
done 
```

# wpf - 动画（WPF）时自定义面板布局无法按预期工作

> ID：10019878
> 
> 赞同：0
> 
> 时间：2012-04-04T22:01:29.557
> 
> 标签：wpf, layout, wpf-controls

我有一个习惯（并且变得复杂）`TabControl`。这是许多来源的集合，加上我自己想要的功能。自定义`Panel`显示 TabControl 的标题。它的功能是压缩 的大小`TabItems`直到它们达到最小值，然后激活滚动功能（再次在面板中）。还有另一个自定义面板可以容纳一个按钮，它呈现在右侧`TabItems`（它是一个“新标签”按钮）。

这一切都很好，直到我尝试为滚动设置动画。

以下是一些相关的片段：

在 CustomTabPanel（C#，覆盖`Panel`和实现`IScrollInfo`）中：

```
private readonly TranslateTransform _translateTransform = new TranslateTransform();

public void LineLeft()
{
    FirstVisibleIndex++;

    var offset = HorizontalOffset + _childRects[0].Width;
    if (offset < 0 || _viewPort.Width >= _extent.Width)
        offset = 0;
    else
    {
        if (offset + _viewPort.Width > _extent.Width)
            offset = _extent.Width - _viewPort.Width;
    }

    _offset.X = offset;
    if (_scrollOwner != null)
        _scrollOwner.InvalidateScrollInfo();

    //Animate the new offset
    var aScrollAnimation = new DoubleAnimation(_translateTransform.X, -offset,
                                           new Duration(this.AnimationTimeSpan), FillBehavior.HoldEnd) { AccelerationRatio = 0.5, DecelerationRatio = 0.5 };
    aScrollAnimation.Completed += ScrollAnimationCompleted;

    _translateTransform.BeginAnimation(TranslateTransform.XProperty, aScrollAnimation , HandoffBehavior.SnapshotAndReplace);

    //End of animation

    // These lines are the only ones needed if we remove the animation
    //_translateTransform.X = -offset;
    //InvalidateMeasure();
}

void ScrollAnimationCompleted(object sender, EventArgs e)
{
    InvalidateMeasure();
} 
```

在`_translateTransform`构造函数中初始化：

```
 base.RenderTransform = _translateTransform; 
```

同样，如果我删除动画部分并在最后用注释掉的行替换它，一切都很好。

我还必须指出，问题不在于动画本身。那部分效果很好。问题出在我删除一些选项卡项时：所有布局都搞砸了。TranslateTransformation 似乎保留了一些错误的值或其他东西。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T22:58:46.520

好。通常情况下，我一直在做这件事，然后……回答自己。

对其他人仍然有用，所以这里有一个问题。在行中：

```
var aScrollAnimation = new DoubleAnimation(_translateTransform.X, -offset, new Duration(this.AnimationTimeSpan), FillBehavior.HoldEnd)
    { AccelerationRatio = 0.5, DecelerationRatio = 0.5 }; 
```

`FillBehavior`应该是的`FillBehavior.Stop`。

就这么简单！

# actionscript-3 - Alt键改变场景？

> ID：10019883
> 
> 赞同：0
> 
> 时间：2012-04-04T22:02:08.217
> 
> 标签：actionscript-3, air, alt, flash-cs5.5

我有一个 Adob​​e AIR 3 应用程序。出于某种原因，只要我`Alt`在应用程序中按下键，它就会切换到下一个场景（或者如果在最后一个场景，它会切换到第一个场景）。我不能在我的应用程序中使用它，而且我从未对其进行编程。如何摆脱这个功能？（我使用的是 Flash Professional CS5.5）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T22:42:02.893

我解决了。在第一个场景中，我为任何按键创建了一个事件监听器以跳到下一个场景。我意识到按下空格键并得到相同的结果后。为了解决这个问题，我将 removeEventListener() 添加到事件函数中。问题解决了。

# mysql - 在 MySQL 中等同于 MS SQL 作业？

> ID：10019889
> 
> 赞同：5
> 
> 时间：2012-04-04T22:02:34.577
> 
> 标签：mysql, sql-server, migration, jobs, job-scheduling

是否有与 MS SQL Server 作业和作业调度等效的 MySQL？还是这种东西在 MySQL 世界中被认为是应用层的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T22:18:15.217

您在寻找[事件调度](http://dev.mysql.com/doc/refman/5.1/en/events-overview.html)器吗？

> 当您创建一个事件时，您正在创建一个命名数据库对象，其中包含一个或多个 SQL 语句，这些 SQL 语句将在一个或多个固定时间间隔执行，在特定日期和时间开始和结束。

# oracle11g - 是否可以将多个版本的 Oracle.DataAccess.dll 放在同一台机器上？

> ID：10019891
> 
> 赞同：0
> 
> 时间：2012-04-04T22:02:40.867
> 
> 标签：oracle11g

我的团队开发了几个针对 Oracle 11.2.0.1 客户端和旧版本进行了优化的应用程序。我最近安装了最新的 Oracle 11.2.0.3 客户端以利用实体​​框架支持。一些较旧的应用程序不适用于新客户端。我希望允许需要最新 11.2.0.3 客户端和旧版本的应用程序在我们客户端的机器上和谐地生存。有没有办法做到这一点？

我有一台装有 Oracle 11.2.0.1 的机器。我尝试手动将 Oracle.DataAccess.dll 11.2.0.3 加载到 GAC 中，但依赖它的应用程序仍然无法运行。还有什么我需要做的吗？

这就是我的 GAC 的样子：

![在此处输入图像描述](../Images/31ed774114f48560ee97941fd925bc37.png)

以下是政策文件：

![在此处输入图像描述](../Images/b24f3a41f8829fdbc8208625f95fed46.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T15:35:30.253

好的，所以我的同事帮我找到了解决方案。由于某种原因，没有注册 OraOLEDB11.dll，所以当我们使用以下命令注册它时，

> Regsvr32 C:\Oracle\product\11.2.0\client_1\BIN\OraOLEDB11.dll

（到客户家的路径对你来说可能不同），它奏效了。

安装 11.2.0.3 客户端并注册此 .dll 后，在 11.2.0.1 平台上开发的软件可以与新的 11.2.0.3 客户端正常工作。

# r - R：如何从 lmer() 模型的回归结果中提取协变量 p 值列表？

> ID：10019892
> 
> 赞同：2
> 
> 时间：2012-04-04T22:02:41.707
> 
> 标签：r, csv, extract, summary

我有一个带有 8 个预测变量的混合 lmer 模型示例，我想提取协变量的名称、它们的系数、它们的标准误差和它们的 p 值，并将它们放入一个矩阵中，这样我就可以将它们写成 .csv。

我已将前 3 个提取到列中，但我不知道如何提取 p 值。你怎么做到这一点？它是 vcov 或 getME() 的变体吗？

以下是模型和摘要的样子：

```
mod <- lmer(outcome ~ predictor1 + etc...
summary(mod)

Generalized linear mixed model fit by the Laplace approximation 
Formula: Freq ~ pm.lag0 + pm.lag1 + pm.lag2 + pm.lag3 + pm.lag4 + pm.lag5 
+ temp13 + temp013 + rh13 + rh013 + (1 | county) 
   Data: dt 
  AIC  BIC logLik deviance
 3574 3636  -1775     3550
Random effects:
 Groups Name        Variance Std.Dev.
 county (Intercept) 1.6131   1.2701  
Number of obs: 1260, groups: county, 28

Fixed effects:
              Estimate Std. Error z value Pr(>|z|)    
(Intercept)  2.9356504  0.2614892  11.227  < 2e-16 ***
pm.lag0      0.0012996  0.0005469   2.376 0.017494 *  
pm.lag1      0.0005021  0.0005631   0.892 0.372568    
pm.lag2      0.0009126  0.0005596   1.631 0.102893    
pm.lag3     -0.0007073  0.0005678  -1.246 0.212896    
pm.lag4      0.0031566  0.0005316   5.939 2.88e-09 ***
pm.lag5      0.0019598  0.0005359   3.657 0.000255 ***
temp13      -0.0028040  0.0007315  -3.833 0.000126 ***
temp013     -0.0023532  0.0009683  -2.430 0.015087 *  
rh13         0.0058769  0.0009909   5.931 3.01e-09 ***
rh013       -0.0028568  0.0006070  -4.706 2.52e-06 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1 

Correlation of Fixed Effects:
        (Intr) pm.lg0 pm.lg1 pm.lg2 pm.lg3 pm.lg4 pm.lg5 temp13 tmp013 rh13  
pm.lag0 -0.025                                                               
pm.lag1 -0.032 -0.154                                                        
pm.lag2 -0.021  0.044 -0.179                                                 
pm.lag3  0.002  0.003  0.033 -0.176                                          
pm.lag4  0.016  0.102 -0.016  0.041 -0.176                                   
pm.lag5  0.008  0.027  0.090 -0.002  0.040 -0.186                            
temp13  -0.316  0.026  0.027  0.004 -0.019 -0.055 -0.035                     
temp013  0.030 -0.015  0.051  0.015 -0.015  0.002 -0.069 -0.205              
rh13    -0.350  0.043  0.078  0.056 -0.012 -0.042 -0.030  0.430  0.055       
rh013    0.193 -0.008 -0.021  0.011  0.030  0.101 -0.028 -0.278  0.025 -0.524 
```

我已经在这里为 p-value 列留了一个空格并为它输入了一个 colname，所以这个代码示例无法操作：

```
mixed.results <- mod
cbind(names(fixef(mod)),as.numeric(fixef(mod)),sqrt(diag(vcov(mod))),  ????  )
mixed.results
colnames(mixed.results) <- c("Pred", "Coef", "St. Error", "Pr(>|z|)")
mixed.results
write.csv(mixed.results, file="mixedmod1.csv") 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-04T22:19:52.527

这只是`coef(summary(model))`，我相信：

```
gm1 <- glmer(cbind(incidence, size - incidence) ~ period + (1 | herd),
                   data = cbpp, family = binomial)
cc <- coef(summary(gm1))
str(cc)
# num [1:4, 1:4] -1.376 -1.058 -1.196 -1.638 0.205 ...
# - attr(*, "dimnames")=List of 2
#  ..$ : chr [1:4] "(Intercept)" "period2" "period3" "period4"
#  ..$ : chr [1:4] "Estimate" "Std. Error" "z value" "Pr(>|z|)"
cc[,4] ## or cc[,"Pr(>|z)"] to be more explicit
# (Intercept)      period2      period3      period4 
#1.907080e-11 1.996120e-41 4.634385e-43 4.657952e-47 
```

我使用了开发版本，`lme4`但我认为这已经工作了一段时间。

# android - android:onClick 在列表视图的可点击元素中找不到方法

> ID：10019893
> 
> 赞同：0
> 
> 时间：2012-04-04T22:02:45.233
> 
> 标签：android, listview, methods, onclick, onclicklistener

我有一个带有 属性的`xml`文件，它在我的第一个加载的列表视图中运行良好：当我单击它位于 的每一行时，该方法运行。 `ImageView``android:onClick="playSound"``Activity``ImageView``listview``playSound`

问题是我在这个的顶部`Activity`过滤`EditText`了加载的内容`listview`，过滤元素/行，例如按名称搜索（如字典）。当我写东西并且`listview`元素较少时，如果我单击`ImageView`任何行的相同内容，则会出现强制关闭异常：`NoSuchMethodException: playSound`

似乎`onClick`找不到`playSound`里面的方法`Activity`，但它就在那里。

这`Activity`

```
public class ListaCaracteres extends Activity{

private Context context;
private Cursor c;
private SQLiteDatabase hanyuDB;
private HanyuSQLHelper hanyuDBHelper;
private AdapterListaCaracteres adapter;
private ListView listaCaracteres;
private EditText buscador;
private ImageView play;
private MediaPlayer mediaPlayer;
private String texto = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(es.hsk.ap.R.layout.lista_caracteres);

    /*
     * Query a la base de datos, obtenemos todos los lugares en Cursor
     */
    try{
        hanyuDBHelper = new HanyuSQLHelper(this);
        hanyuDB = hanyuDBHelper.getReadableDatabase();
        c = hanyuDB.rawQuery(" SELECT * FROM Caracteres ", null);
    }
    catch(SQLiteException ex)
    {
        Toast mensajeError=Toast.makeText(getApplicationContext(), "Error accediendo a los datos", Toast.LENGTH_SHORT);
        mensajeError.show();
        Log.e("LogLugares", "Error en getReadableDatabase()", ex);
    }     

    /*
     * Utilizamos nuestro Adapter AdapterListaCaracteres con el contenido del Cursor
     */
    adapter = new AdapterListaCaracteres(this,c, true);
    listaCaracteres = (ListView)findViewById(es.hsk.ap.R.id.listaCaracteres);   
    listaCaracteres.setAdapter(adapter);       

    /*
     * Localizamos y damos funciona al buscador
     */
    buscador = (EditText)findViewById(R.id.buscador); 

    buscador.setOnKeyListener(new OnKeyListener() {

        @Override
        public boolean onKey(View v, int keyCode, KeyEvent event) {
            // TODO Auto-generated method stub
            texto = buscador.getText().toString();

            c = hanyuDB.rawQuery(
                    " SELECT * FROM Caracteres WHERE significado LIKE '%"
                            + texto + "%'", null);

            AdapterListaCaracteres adapter2 = new AdapterListaCaracteres(getApplicationContext(), c, false);
            listaCaracteres.setAdapter(adapter2);

            return false;
        }
    });

    /*
     * Ponemos acción al clic sobre un elemento del listview
     */
    listaCaracteres.setOnItemClickListener(new OnItemClickListener(){
        public void onItemClick(AdapterView<?> parent, View view, int position, long id){

            /*
             * Al hacer clic se inicia activity MostrarCaracter
             * El Intent enviado lleva como parámetro el id del objeto a mostrar
             */
            if(texto!=null){
                c = hanyuDB.rawQuery(
                        " SELECT * FROM Caracteres WHERE significado LIKE '%"
                                + texto + "%'", null);
                c.moveToPosition(position);
                position=c.getInt(0)-1;
            }

            Intent intent=new Intent();
            intent.setClass(getApplicationContext(), MostrarCaracter.class);                    

            intent.putExtra("idObjeto", position);
            startActivity(intent);
        }
    }); 
}

/*
 * Método para reproducir sonido de carácter
 */
public void playSound(View view){
    int posicion=listaCaracteres.getPositionForView(view);
    if(texto!=null){
        c = hanyuDB.rawQuery(
                " SELECT * FROM Caracteres WHERE significado LIKE '%"
                        + texto + "%'", null);
        c.moveToPosition(posicion);
        posicion=c.getInt(0)-1;
    }

    c = hanyuDB.rawQuery(" SELECT audio FROM Caracteres WHERE _id="+(posicion+1), null);
    c.moveToFirst();
    String audio=c.getString(0);
    int resID = getResources().getIdentifier(audio, "raw", "es.hsk.ap");
    mediaPlayer = MediaPlayer.create(this, resID);
    mediaPlayer.start();
} 
```

`xml`我的适配器中的膨胀文件，具有`ImageView (id play)`可点击性和`onClick`操作性

```
<TableRow
    android:id="@+id/tableRow1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingTop="5dp" >

<TextView
    android:id="@+id/caracter"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center_horizontal"
    android:paddingLeft="5dp"
    android:paddingRight="15dp"
    android:paddingBottom="5dp"
    android:textSize="28dp" />

<TextView
    android:id="@+id/pinyin"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:textSize="24dp" />

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:gravity="right" >

    <ImageView
        android:id="@+id/play"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:contentDescription="@string/icono"
        android:paddingRight="7dp"
        android:onClick="playSound"
        android:src="@drawable/speaker" />
</LinearLayout>

</TableRow>

<TableRow
    android:id="@+id/tableRow2"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingBottom="5dp" >

<TextView
    android:id="@+id/significado"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:paddingLeft="5dp"
    android:textSize="16dp" />

</TableRow> 
```

日志猫：

```
 04-04 21:36:07.144: E/AndroidRuntime(5569): Uncaught handler: thread main exiting due to uncaught exception
04-04 21:36:07.164: E/AndroidRuntime(5569): java.lang.IllegalStateException: Could not find a method reproducir(View) in the activity
04-04 21:36:07.164: E/AndroidRuntime(5569):     at android.view.View$1.onClick(View.java:2020)
04-04 21:36:07.164: E/AndroidRuntime(5569):     at android.view.View.performClick(View.java:2364)
04-04 21:36:07.164: E/AndroidRuntime(5569):     at android.view.View.onTouchEvent(View.java:4179)
04-04 21:36:07.164: E/AndroidRuntime(5569):     at android.view.View.dispatchTouchEvent(View.java:3709)
04-04 21:36:07.164: E/AndroidRuntime(5569):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
04-04 21:36:07.164: E/AndroidRuntime(5569):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
04-04 21:36:07.164: E/AndroidRuntime(5569):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
04-04 21:36:07.164: E/AndroidRuntime(5569):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
04-04 21:36:07.164: E/AndroidRuntime(5569):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
04-04 21:36:07.164: E/AndroidRuntime(5569):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
04-04 21:36:07.164: E/AndroidRuntime(5569):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
04-04 21:36:07.164: E/AndroidRuntime(5569):     at android.view.ViewGroup.dispatchTouchEvent(ViewGroup.java:884)
04-04 21:36:07.164: E/AndroidRuntime(5569):     at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchTouchEvent(PhoneWindow.java:1659)
04-04 21:36:07.164: E/AndroidRuntime(5569):     at com.android.internal.policy.impl.PhoneWindow.superDispatchTouchEvent(PhoneWindow.java:1107)
04-04 21:36:07.164: E/AndroidRuntime(5569):     at android.app.Activity.dispatchTouchEvent(Activity.java:2061)
04-04 21:36:07.164: E/AndroidRuntime(5569):     at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchTouchEvent(PhoneWindow.java:1643)
04-04 21:36:07.164: E/AndroidRuntime(5569):     at android.view.ViewRoot.handleMessage(ViewRoot.java:1691)
04-04 21:36:07.164: E/AndroidRuntime(5569):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-04 21:36:07.164: E/AndroidRuntime(5569):     at android.os.Looper.loop(Looper.java:123)
04-04 21:36:07.164: E/AndroidRuntime(5569):     at android.app.ActivityThread.main(ActivityThread.java:4363)
04-04 21:36:07.164: E/AndroidRuntime(5569):     at java.lang.reflect.Method.invokeNative(Native Method)
04-04 21:36:07.164: E/AndroidRuntime(5569):     at java.lang.reflect.Method.invoke(Method.java:521)
04-04 21:36:07.164: E/AndroidRuntime(5569):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-04 21:36:07.164: E/AndroidRuntime(5569):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-04 21:36:07.164: E/AndroidRuntime(5569):     at dalvik.system.NativeStart.main(Native Method)
04-04 21:36:07.164: E/AndroidRuntime(5569): Caused by: java.lang.NoSuchMethodException: reproducir
04-04 21:36:07.164: E/AndroidRuntime(5569):     at java.lang.ClassCache.findMethodByName(ClassCache.java:308)
04-04 21:36:07.164: E/AndroidRuntime(5569):     at java.lang.Class.getMethod(Class.java:1014)
04-04 21:36:07.164: E/AndroidRuntime(5569):     at android.view.View$1.onClick(View.java:2017) 
```

我的自定义适配器：

```
public class AdapterListaCaracteres extends CursorAdapter{

private Context  mContext;
private Cursor  datos;
private boolean aRequery;
private LayoutInflater inflater;

/*
 * Constructor de la clase
 */
public AdapterListaCaracteres(Context  context, Cursor  c, boolean autoRequery){
    super(context, c, autoRequery);
    this.mContext = context;
    this.datos = c;
    this.aRequery=autoRequery;
}

public void reproducir(View view){
}

/*
 * Métodos
 */
@Override
public int getCount() {
    // TODO Auto-generated method stub
    return datos.getCount();
}

@Override
public Object  getItem(int position) {
    // TODO Auto-generated method stub
    return datos.getString(position);
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return 0;
}

public View  getView(int position, View  convertView, ViewGroup parent) {
    // TODO Auto-generated method stub

    View item = convertView;
    ViewHolder holder;

    inflater = (LayoutInflater) mContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    datos.moveToPosition(position);

    //Comprobamos si el item existe para reaprovecharlo
    if(item==null){
        try{
            item = inflater.inflate(es.hsk.ap.R.layout.caracter, null);
        }
        catch(InflateException ex)
        {
            // lo que querais hacer en este caso,mostrar un toast o lo que sea
        }

        holder = new ViewHolder();
        holder.caracter = (TextView)item.findViewById(es.hsk.ap.R.id.caracter);
        holder.pinyin = (TextView)item.findViewById(es.hsk.ap.R.id.pinyin);
        holder.significado = (TextView)item.findViewById(es.hsk.ap.R.id.significado);
        holder.audio = (ImageView)item.findViewById(es.hsk.ap.R.id.play);

        item.setTag(holder);
    }
    else{
        holder = (ViewHolder)item.getTag();
    }           

    holder.caracter.setText(datos.getString(2));            
    holder.pinyin.setText(datos.getString(3));  
    holder.significado.setText(datos.getString(4));

    return item;

}

/*
 * Utilizamos clase ViewHolder para obtener IDs de objetos View inflados anteriormente
 * (objetos hijos del objeto convertView) y así reparovecharlos para ahorrar recursos 
 * y batería al hacer scroll. Se localizan mediante la propiedad Tag
 */
static class ViewHolder{
    TextView caracter;
    TextView pinyin;
    TextView significado;
    ImageView audio;
}

@Override
public void bindView(View view, Context context, Cursor cursor) {
    // TODO Auto-generated method stub

}

@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {
    // TODO Auto-generated method stub
    return null;
} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T22:04:59.347

onClick 将在 Context 实例上查找方法。确保用于膨胀 ListView 项目的 Context 是您的 Activity。

# awk - 获取输入文件每一行的输出。只需要输出一次

> ID：10019894
> 
> 赞同：1
> 
> 时间：2012-04-04T22:02:50.927
> 
> 标签：awk

这应该很简单，但我遇到了 awk 脚本流程的问题。我运行以下脚本，它一遍又一遍地打印输出（如果我不得不猜测我会说它为输入文件的每一行打印一次）。根据要求，这是一些假输入：

```
[30000] (03/20 00:00:02.950):{0x2D90} Pattern1 5.0.3.57  
[30000] (03/20 00:00:03.911):{0x2D90} Pattern2 5.0.3.57  
[30000] (03/20 00:00:02.950):{0x2D90} Pattern3 5.0.3.16  
[30000] (03/20 00:00:03.911):{0x2D90} Pattern4 5.0.3.16 
```

这是脚本：

```
/Pattern1/ {
    gsub(/\./,"");
    agtver=$5;
}

/Pattern2/ {
         gsub(/\./,"");
    ctrver=$5;
}

{
if (agtver ~ 50357 && ctrver ~ 50357) {
        print "Blamo!";
}
else print "No blamo. :("
} 
```

这是我得到的输出：

```
[chawkins@chawkins-DT Devel]$ ./fakeawk.awk < fake.txt  
No blamo. :(  
Blamo!  
Blamo!  
Blamo! 
```

`Blamo!`如果模式匹配，我期望的输出是单一的，如果不匹配，则输出是单一的`No blamo. :(`。

问题似乎是有三个单独的 { ... } 部分，但我需要这些能够处理两种模式......除非有办法浓缩它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T22:38:26.787

如果您在第一次之后再也没有看到 pattern1 和 pattern2，那么 agtver 和 ctrver 保持设置。您必须再次将它们归零。

**编辑**添加的调试输出，您应该能够看到逻辑失败的地方。用您的数据测试，感谢您添加！

```
/Pattern1/ { gsub(/\./,""); agtver=$5;}    
/Pattern2/ { gsub(/\./,""); ctrver=$5;}   
{
   #dbg print "\n#dbg: $5=" $5 "xx\tagtver=" agtver "xx\tctrver=" ctrver "xxx\t$0=" $0
   if (agtver ~ 50357 && ctrver ~ 50357) {
     print "Blamo!";
     agtver="" ; ctrver=""
   }
   else print "No blamo. :("
}

./fakeawk.awk < fake.txt 
```

**输出**

```
No blamo. :(
Blamo!
No blamo. :(
No blamo. :( 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-05T19:07:27.640

发射器：

```
@(gather :vars (agtver ctrver))
@  (skip :greedy) @/Pattern1/ @{agtver /5\.0\.3\.57/}
@  (skip :greedy) @/Pattern2/ @{ctrver /5\.0\.3\.57/}
@(end)
@(do (put-string "Blamo!\n")) 
```

输出：

```
$ txr fake.txr fake.log
Blamo!

$ echo "junk" | txr fake.txr -
false 
```

该`@(gather)`指令非常适合这一点。它匹配可以以任何顺序出现的材料，并`:vars (agtver ctrver)`添加必须为这两个变量找到绑定的约束，否则会发生故障。

然后，我们可以将我们正在寻找的两个独立条件表示为一对独立的整行模式匹配，它们绑定了两个不同的变量。

该逻辑可以理解为*“请扫描输入以收集绑定变量`agtver`，`ctrver`否则失败”*。然后指定收集变量的规则，每行一个。

我们真的不需要打印的副作用`Blamo!`：程序的成功或失败终止告诉我们一切。

# mysql - 使用 PDO 和参数更改表？

> ID：10019896
> 
> 赞同：7
> 
> 时间：2012-04-04T22:02:56.507
> 
> 标签：mysql, pdo

`ALTER TABLE`是否可以使用 PDO添加参数。

我努力了，

```
$q = $dbc -> prepare("ALTER TABLE emblems ADD ? TINYINT(1) UNSIGNED NOT NULL DEFAULT '0', ADD ? DATETIME NOT NULL");
$q -> execute(array($emblemDB, $emblemDB . 'Date')); 
```

但它失败了。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T05:26:53.240

据我所知，alter table 查询的性质不是准备好的语句。但是您应该为大多数表更改查询调用`beginTransaction`and函数。`commit()`

```
$dbh->beginTransaction();

/* Change the database schema and data */
$sth = $dbh->exec("DROP TABLE fruit");
$sth = $dbh->exec("UPDATE dessert
SET name = 'hamburger'");
$sth = $dbh->exec("ALTER TABLE `dessert` ADD `field1` VARCHAR(24) NOT NULL");

/* Commit changes */
$dbh->commit(); 
```

尽管据我所知，您可以使用准备好的语句并执行。

***注意：***
MySQL 隐式调用`CREATE TABLE`和`DROP TABLE`查询的 commit() 函数，因此无法回滚。

此外，如果您想将变量传递给更改表查询，请确保清理您的用户输入（如果它来自那里），并在您的数据库上创建一个存储过程，然后使用 PDO 调用它并附加您的变量输入输出。只是关于您的问题的措辞的想法。

# javascript - 方括号内的交替运算符不起作用

> ID：10019898
> 
> 赞同：2
> 
> 时间：2012-04-04T22:03:05.400
> 
> 标签：javascript, regex

我正在创建一个 javascript 正则表达式来匹配搜索引擎字符串中的查询。我遇到了交替的问题。我有以下正则表达式：

```
.*baidu.com.*[/?].*wd{1}= 
```

我希望能够匹配除 'wd' 之外还有字符串 'word' 或 'qw' 的字符串，但我尝试的一切都失败了。我以为我可以执行以下操作：

```
.*baidu.com.*[/?].*[wd|word|qw]{1}= 
```

但它似乎不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-04T22:07:12.770

替换`[wd|word|qw]`为`(wd|word|qw)`或`(?:wd|word|qw)`。

`[]`表示字符集，`()`表示逻辑分组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T22:22:01.793

你的表情：

```
.*baidu.com.*[/?].*[wd|word|qw]{1}= 
```

确实需要一些更改，包括`[wd|word|qw]`删除`(wd|word|qw)` *和*删除多余的`{1}`，如下所示：

```
.*baidu.com.*[/?].*(wd|word|qw)= 
```

但是您还需要了解表达式的第一部分 ( `.*baidu.com.*[/?].*`) 将匹配`baidu.com hello what spelling/handle?????????`或`hbaidu-com/`什至类似`lkas----jhdf lkja$@@!3hdsfbaidugcomlaksjhdf.[($?lakshf`的内容，因为点 ( `.`) 匹配除换行符以外的任何字符...要匹配文字点，您必须使用反斜杠对其进行转义（喜欢`\.`）

您可以采用几种方法来匹配 URL 中的内容，但如果您告诉我们您正在尝试做什么或完成什么，我们可以为您提供更多帮助 - 也许正则表达式不是最佳解决方案或（**编辑**）只是最佳解决方案的*一部分*?

# javascript - 内联编辑功能导致单击多个 ajax 请求

> ID：10019902
> 
> 赞同：1
> 
> 时间：2012-04-04T22:03:37.740
> 
> 标签：javascript, jquery, json

这是我的示例代码：http: [//jsfiddle.net/Rf3pU/1/](http://jsfiddle.net/Rf3pU/1/)

当我进行内联编辑并单击提交时 - 它会向服务器触发 2 个 JSON 请求，我不确定为什么。

有人在我的 JavaScript 中看到任何问题吗？

# javascript - For循环从redis延迟获取项目

> ID：10019903
> 
> 赞同：1
> 
> 时间：2012-04-04T22:03:48.620
> 
> 标签：javascript, node.js, redis

我正在使用带有 node_redis 的 Node.js 并循环遍历一个对象并在 Redis 中查找数据，然后返回结果。

我有这样的设置：

```
 for (var key in items) {
            if (items.hasOwnProperty(key)) {

                    app.client.llen(items[key].id+'_click', function(err, total) {
                        items[key].total = total;

                    });
            }
        }

       callback(items); 
```

问题是它在完成对 redis 的调用之前循环。因此，在实际更新总值之前调用回调。由于延迟，它似乎也跳过了一些项目。

有没有更好的方法来处理这个？

谢谢！

编辑：

好的，所以我已经像这样更新它：

```
 getTotal(function () {
       callback(items);
   });

   getTotal = function (callback) {

       var count = 1;

       for (var key in items) {
           if (items.hasOwnProperty(key)) {
               app.client.llen(items[key].id + '_click', function (err, total) {
                   items[key].total = total;

                   if (items.length == count) {
                       callback();
                   }

                   count++;
               });
           };
       } 
```

这似乎会起作用，它会在适当的时间触发回调，但是似乎只有最后一个键正在完全更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T09:08:25.687

您的第一个示例无法工作，因为循环是同步的，而 Redis 客户端调用是异步的。由于 Javascript 闭包管理，您的第二个示例效果不佳。您需要在循环本身中有一个适当的范围，以便正确处理闭包，并相应地更新所有总字段。

在这里使用 forEach 似乎更容易：

```
getTotal = function (callback) {
  var count = 0;
  Object.keys( items ).forEach( function(key) {
    ++count;
    app.client.llen(items[key].id + '_click', function (err, total) {
      items[key].total = total;
      if ( --count == 0 ) {
        callback( items );
      }
    })
  })
}

getTotal( function(items) {
  console.log( items );
}) 
```

# apache-flex - Flex 4.5：自定义组件在自定义 ItemRenderer 中不可见

> ID：10019904
> 
> 赞同：0
> 
> 时间：2012-04-04T22:03:50.540
> 
> 标签：apache-flex, datagrid, flex4.5, custom-component, itemrenderer

我正在为 Spark DataGrid 开发一个动态的 ItemRenderer 来编辑。

使用 Edit 按钮（第一列）上的 Click 事件，我正在使用 grid.invalidateCell(x,y); 刷新单元格的行。在此自定义 ItemRenderer 中，在函数**prepare**中，我正在评估“编辑”动态属性以隐藏/显示 (.visible/.includeInLayout) 用于编辑的默认标签或控件；我实际上并没有使用 itemEditor DataGrid 的操作，只是模拟了这个功能。

一切都与标准的 spark 组件配合得很好：TextInput、ComboBox 等，但自定义组件（从 SkinnableContainer 扩展）不可见，有时只是随机出现在第一行。

自定义组件是否必须实现任何特定接口才能在 ItemRenderer 中工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T22:30:28.817

问题是这个属性：customComponent.includeInLayout; 一旦您将其设置为 false，它就会再次出现问题。我认为在 ItemRenderer 中使用 includeInLayout 是个坏主意。

现在我只使用 .visible=(false/true) 和 .x 坐标。

谢谢。

# spring - spring mybatis 事务被提交

> ID：10019905
> 
> 赞同：0
> 
> 时间：2012-04-04T22:03:52.150
> 
> 标签：spring, mybatis

我正在尝试使用 mybatis spring 事务管理我的问题是即使抛出异常，事务也会被提交。对此相对较新，非常感谢任何帮助。以下是代码片段

春天的xml配置

```
 <bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">

        <property name="location">

            <value>classpath:Config.properties</value>

        </property>

    </bean>
    <bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
     <property name="driverClassName" value="${db.driver}"/>
    <property name="url" value="${db.url}"/>
    <property name="username" value="${db.user}"/>
    <property name="password" value="${db.pass}"/>
    <property name="defaultAutoCommit" value="false" />
    </bean>

     <bean id="transactionManager"      class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
        <property name="dataSource" ref="dataSource"/>
    </bean>

  <tx:annotation-driven transaction-manager="transactionManager" />

<bean id="sqlSessionFactory" class="org.mybatis.spring.SqlSessionFactoryBean">
        <property name="configLocation" value="classpath:Configuration.xml" />
        <property name="dataSource" ref="dataSource" />
    </bean>

    <bean class="org.mybatis.spring.SqlSessionTemplate" id="sqlSessionTemplate">
        <constructor-arg ref="sqlSessionFactory"/>
   </bean> 
```

服务等级

```
@Transactional(rollbackFor=Exception.class, propagation=Propagation.REQUIRED)
public void insertNotes(String noteTypeId,String confidentialValue,String summaryValue,String notes ,String notesId,String noteTypeValue,
        String claimNumber,String notepadId,String mode)
{

        NotepadExample notepadExample= new NotepadExample();

        //to be moved into dao class marked with transaction boundaries
        Notepad notepad = new Notepad();
        notepad.setAddDate(new Date());
        notepad.setAddUser("DummyUser");
        if("true".equalsIgnoreCase(confidentialValue))
            confidentialValue="Y";
        else
            confidentialValue="N";
        notepad.setConfidentiality(confidentialValue);
        Long coverageId=getCoverageId(claimNumber);
        notepad.setCoverageId(coverageId);
        notepad.setDescription(summaryValue);

        notepad.setEditUser("DmyEditUsr");
        //notepad.setNotepadId(new Long(4)); //auto sequencing
        System.out.println(notes);
        notepad.setNotes(notes);
        notepad.setNoteType(noteTypeValue); //Do we really need this?
        notepad.setNoteTypeId(Long.parseLong(notesId));
        if("update".equalsIgnoreCase(mode))
        {
            notepad.setNotepadId(new Long(notepadId));
            notepad.setEditDate(new Date());
            notepadMapper.updateByPrimaryKeyWithBLOBs(notepad);

        }
        else
            notepadMapper.insertSelective(notepad);

              throw new java.lang.UnsupportedOperationException();

} 
```

不知道我哪里错了......

当前呼叫来自控制器，如下所示

```
 @Controller
public class NotesController {

    private static final Logger logger = LoggerFactory
            .getLogger(NotesController.class);

    @Autowired
    private Utils utility;

    @Autowired
     NotepadService notepadService;

    public  @ResponseBody List<? extends Object> insertNotes(HttpServletRequest request,
        HttpServletResponse response,@RequestParam("noteTypeValue") String noteTypeId,
    @RequestParam("confidentialValue")String confidentialValue,
    @RequestParam("summaryValue")String summaryValue,
    @RequestParam("notes")String notes ,
    @RequestParam("notesId")String notesId,
    @RequestParam("noteTypeValue")String noteTypeValue,
    @RequestParam("claimNumber")String claimNumber,
    @RequestParam("notepadId")String notepadId,
    @RequestParam("mode")String mode) {

        try {
            notepadService.insertNotes(noteTypeId, confidentialValue, summaryValue, notes, notesId, noteTypeValue, claimNumber, notepadId, mode);
        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        return null;  
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-05T03:23:23.447

我遇到过同样的问题。我对春天也比较陌生。但据我说，这取决于您如何调用您的 insertNotes() 方法。如果您从另一个本地方法调用它，那么它将不起作用，因为 spring 无法知道它被调用并启动事务。

如果您通过使用包含 insertNotes() 方法的类的自动装配对象从另一个类的方法调用它，那么它应该可以工作。

例如

```
class ABC
{
 @Autowired
 NotesClass notes;

   public void testMethod() {
      notes.insertNotes();
   }
}

class NotesClass
{
   @Transactional(rollbackFor=Exception.class, propagation=Propagation.REQUIRED)  
   public void insertNotes(String noteTypeId,
                           String confidentialValue,
                           String summaryValue,String notes ,
                           String notesId,String noteTypeValue, 
                           String claimNumber,
                           String notepadId,
                           String mode) {
                //Your code
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-06T01:27:14.147

您可以尝试使用交易模板。从方法中删除 @Transactional 注释，并将以下代码添加到 xml 文件中。

```
 <bean id="trTemplate" class="org.springframework.transaction.support.TransactionTemplate">
<property name="timeout" value="30"/>
<property name="transactionManager" ref="transactionManager"/>
</bean> 
```

创建 Trasactiontemplate 的对象并像这样从控制器调用 insertNotes

```
@Autowired
private TransactionTemplate transactionTemplate;

transactionTemplate.execute(new TransactionCallbackWithoutResult() {

        @Override
        protected void doInTransactionWithoutResult(TransactionStatus transactionStatus)  {

            try {
                insertNotes();
            } catch (Exception e) {
                transactionStatus.setRollbackOnly();
                logger.error("Exception ocurred when calling insertNotes", e);  

                throw new RuntimeException(e);
            }
        }
    }); 
```

注意：在调用 insertNotes 方法之前，您必须将所有参数设为最终参数

# php - 带有变量的php函数参数

> ID：10019906
> 
> 赞同：1
> 
> 时间：2012-04-04T22:03:56.370
> 
> 标签：php, function, global-variables, arguments

有没有办法设置带有变量的默认函数参数，例如

```
function example($test = 'abc', $image = $scripturl . 'abc.png')
{
        // ...
} 
```

我想这样做的原因是因为我有源，我有全局变量设置和路径设置，以便在我需要包含 css 文件或图像时很容易抓取。

上面的代码给出了一个意外的 T_VARIABLE...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T22:09:16.783

默认值应该是一个常数。它们应该具有在编译时已经可用的值，而不是在运行时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T22:10:14.747

那是不可能的；默认参数必须是常量。

您可以像这样轻松地模拟它：

```
function example($test = 'abc', $image = null) {
    if($image === null) {
        global $scripturl;
        $image = $scripturl . 'abc.png';
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T22:10:14.623

否。函数参数中的默认值必须是常量值，而不是表达式的结果：http: [//php.net/manual/en/functions.arguments.php#functions.arguments.default](http://php.net/manual/en/functions.arguments.php#functions.arguments.default)

在解析参数时，无论如何 $scripturl 将不存在，并且始终显示为 NULL，因为在使用它之前您无法将其设为全局。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-04T22:10:57.197

好吧，正如错误已经说明的那样，您不能将变量用作函数签名中的（部分）默认值。

但是，您可以做的是传递一些已知的非法值（`null`例如），然后检查函数内部并在需要时分配：

```
function example($test = 'abc', $image = null)
{
   global $scripturl;
   if($image === null) $image = $scripturl . 'abc.png';
   ...
} 
```

# c++ - std::string 数组元素访问

> ID：10019911
> 
> 赞同：0
> 
> 时间：2012-04-04T22:04:27.440
> 
> 标签：c++, visual-studio-2010, multidimensional-array, stdstring

尽管是一个 Project Euler 程序，但下面的代码实际上并不太关心它。我想添加 50 个 100 位数字，并将每个数字的每个数字分配给数组 addends[100][50] 中的一个元素。然后我会单独添加每个数字/位置，并结转额外的数字。这些数字是从名为 的文本文件中读取的`Input.txt`，它仅包含所有数字。[http://projecteuler.net/problem=13](http://projecteuler.net/problem=13)

我无法`string numbers[100][50]`从文件输入流 ( `<fstream>`) 将字符分配给字符串数组 ( ) 的元素。评论中更完整地描述了该问题：

“[对于第一个循环] 这个循环为字符串数组中的每个字符串分配一个数字。即使第二个数字 (50) 没有做任何事情（它似乎被 std::string 覆盖；参见变量声明），它需要在那里才能使循环工作。循环的“逻辑”相同；“j”什么也不做，但需要在那里才能使循环工作？

而且，（对于第二个循环）“这个循环从相应的字符串数组元素中填充“addends[100][50]”数组。如果我尝试用数组“numbers[i] 调用“char_to_int()” [j]”，编译器抱怨输入的数据类型不正确。添加变量“k”使循环运行一次，但最终在第二次循环中崩溃（使用“numbers[i][j ][k]")。所以我尝试了“char_to_int((numbers[i][j]).c_str())”，但编译器抱怨“const char *”与“char”不兼容。添加指针可以解决问题 ("char_to_int( *( (numbers[i][j]).c_str() ) )")，但程序稍后仍然崩溃。" 我取出了一些无关紧要的代码以使其更具可读性。

```
#include <iostream>
#include <fstream>
#include <string>

using namespace std;
int char_to_int(char chInput);

int main()
{

    int placeholder;    //so console doesn't close immediately upon finish
    int sum[102] = {0}; // 100+2, 100 places + 2 places from carrying over
    int addends[100][50] = {0};
    string numbers[100][50];
    ifstream input("Input.txt");

    /* This loop assigns a number to every string in the string array. Even
     * though the second number (50) doesn't do anything (it seems to be
     * overridden by std::string; see variable declaration), it needs to be
     * there for the loop to work. Same "logic" for the loop; "j" doesn't do
     * anything but needs to be there??? Confused :-\
     */
    for (int i = 0; i < 100; i++)
        for (int j = 0; j < 1; j++)
            getline(input, numbers[i][j]);

    /* This loop fills in the "addends[100][50]" array from the corresponding
     * string array element. If I try to call "char_to_int()" with the array
     * "numbers[i][j]", the compliler complains that the input isn't of the
     * right data type. Adding a variable "k" makes the loop work for one run,
     * but eventually crashes on the second loop (using "numbers[i][j][k]").
     * So I tried "char_to_int((numbers[i][j]).c_str())", but the compiler
     * complains that "const char *" is incompatible with "char". Adding a
     * pointer resolves the issue ("char_to_int( *( (numbers[i][j]).c_str() ) )"),
     * but the program still crashes on the second loop through.
     */
    for (int i = 0; i < 100; i++)
        for (int j = 0; j < 50; j++)
            for (int k = 0; k < 1; k++) //used when the variable "k" was being used
                addends[i][j] = char_to_int( (numbers[i][j]).c_str() );

    return 0;
} 
```

代码还没有完成；我决定不继续，因为我（显然）需要先解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T22:23:07.143

它编译并运行良好

```
string numbers[100];

for (int i = 0; i < 100; i++)
        getline(input, numbers[i]);

for (int i = 0; i < 100; i++)
    for (int j = 0; j < 50; j++)
            addends[i][j] = char_to_int( (numbers[i][j])); 
```

删除`stdafx.h`包含和定义后`char_to_int`。

A`std::string`本身包含一个字符数组，因此您只需要一个 s 的一维数组`std::string`。`[]`然后，您可以通过索引访问字符串的字符，

```
numbers[i][j] 
```

获取数组中第 i 个字符串的第 j 个字符（而不是字节）`numbers`。

# android - 存储我的应用程序制作的文件的默认目录

> ID：10019922
> 
> 赞同：0
> 
> 时间：2012-04-04T22:05:11.910
> 
> 标签：android, file, default, text-files, dir

一个问题，我正在制作一个应用程序，它将存储一个带有高分数据的文本文件（.txt）。我从我的高分活动中用这一行制作了一个文件：

```
 File highscoreList = new File("highscores.txt"); 
```

它将被放置在哪里？在与 highscores.java 文件相同的目录中？或者，我应该如何指定将文本文件放在与 highscores.java 相同的文件夹中的目录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T22:08:20.347

您应该使用 Context 方法`openFileInput`和`openFileOutput`. 您可以使用 确定它们的实际存储位置`getFileStreamPath`。（他们进入的目录可以用`getFilesDir`.） 使用这种方法的好处是这些文件将是您的应用程序私有的，并且如果您的应用程序被卸载，这些文件将被自动删除。

在您的活动中，您可以创建您`File`的：

```
File highscoreList = getFileStreamPath("highscores.txt"); 
```

如果您只想写信给它：

```
FileOutputStream output = null;
try {
    output = openFileOutput("highscores.txt", MODE_PRIVATE);
    // write to file
} finally {
    if (output != null) {
        try { output.close(); }
        catch (IOException e) {
            Log.w(LOG_TAG, "Error closing file!", e);
        }
    }
} 
```

同样，对于阅读，您可以使用：

```
FileInputStream input = openFileInput("highscores.txt"); 
```

如果您尝试从子类外部访问您的文件`Activity`，则需要一个`Context`. （`View`例如，在 a 中，您可以使用`getContext()`。对于辅助类，您需要传入您的`Activity`实例或其他`Context`对象。）

# twitter - 我可以获得授权我的 Twitter 应用程序的用户列表吗？

> ID：10019924
> 
> 赞同：1
> 
> 时间：2012-04-04T22:05:14.073
> 
> 标签：twitter

我正在尝试获取已授权我的 Twitter 应用程序的用户列表。我试过检查 API 文档，但似乎没有我能找到的 twitter 应用程序特定的 API。我试图避免自己存储这些 Twitter 用户名，因为用户列表将与 Twitter 的授权用户列表完全相同，甚至可以为我处理未授权用户。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-06T17:24:50.887

不，无法从 Twitter API 获取此信息。如果您有兴趣跟踪正在使用您的应用程序的用户，则需要自己进行跟踪。

# join - SOLR：从单独的索引加入

> ID：10019926
> 
> 赞同：0
> 
> 时间：2012-04-04T22:05:18.103
> 
> 标签：join, solr

有没有从 SOLR 索引中加入数据的好方法？当然，我认为服务器端对此的支持是有限的，但我想在客户端进行（现在，我在 java 中手动执行此操作，使用 hashmaps 和循环......我假设可能有更好的组合方式来自不同指数的数据）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T23:31:43.733

如果加入你的意思是关系加入la SQL，那么没有。

如果加入你的意思是合并，那么服务器端支持远非有限。
您正在寻找的是索引分片。这不是“快”，因为搜索是分布式然后合并的，但它的扩展性非常好。

阅读以下文章：

*   [http://lucidworks.lucidimagination.com/display/solr/Distributed+Search+with+Index+Sharding](http://lucidworks.lucidimagination.com/display/solr/Distributed+Search+with+Index+Sharding)
*   [http://wiki.apache.org/solr/DistributedSearch](http://wiki.apache.org/solr/DistributedSearch)

# process - 在 Rational Team Concert 中将自定义工作流分配给工作项类型

> ID：10019928
> 
> 赞同：2
> 
> 时间：2012-04-04T22:05:22.483
> 
> 标签：process, workitem, rational-team-concert, ibm-rational

我正在定制 Rational Team Concert 以包含一个定制的工作项类型。作为我创建工作项类型测试的一部分，我用数据填充了一些自定义工作项。当我增强了自定义工作项类型并添加了其他属性时，我能够使用“类型和属性”中的“检查存储库中的属性使用情况”来确保将新属性传播到我的测试工作项。

现在我已经到了需要为此工作项类型创建自定义工作流的地步。我已经定义了工作流并将其分配给工作项类型，但我现有的测试工作项似乎无法使用它。单击“检查存储库中的工作流使用情况”链接显示“存储库中有 9 个工作项引用了绑定工作流中不存在的工作流状态或解决方案。您想在工作项视图中显示这些项目吗？”。

![解决潜在问题？ 也许](../Images/1aa61cdfe514117f83245ef170a16377.png)

然后工作项视图只显示测试工作项的状态 = 1。 ![9 个测试工作项的清单](../Images/8444b079ed0e97fb4c6ce3599cd70158.png)

如果我选择在富客户端编辑器中打开一个作品，所有流程元素都处于非活动状态。如果我在网页编辑器中打开它，它说状态为“1”，如下图所示：

![Web 客户端进程问题](../Images/1846b719b4ae978c52911341204b6ee3.png)

有没有办法解决这个问题并改变现有工作项的工作流程？我应该补充一点，新的工作项工作得很好，但我担心如果我将来需要再次更新流程会发生什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-06T05:04:11.890

在工作项自定义的上下文中，您必须手动将现有工作项属性与最新版本的 PA 同步，以便将您的更改考虑在内。

这些步骤在[手册页“定义工作项类型和属性”](http://publib.boulder.ibm.com/infocenter/clmhelp/v3r0m1/index.jsp?topic=/com.ibm.team.workitem.doc/topics/t_defining_types.html)中有详细说明：（
页面底部）

> 要使用新的或修改的自定义属性手动更新现有工作项：
> 
> 1.  **运行查询，以便查询结果包含您要更新的所有工作项**。
>     注意：不要选择要在查询结果中显示的任何关系。
>     如果显示关系，则不会显示类型图标，并且您无法完成这些步骤。
>     要清除显示的所有关系，请在“工作项”视图菜单中选择“关系”，单击“取消全选”，然后单击“确定”。
> 2.  在工作项视图中，选择要修改的工作项。
> 3.  **在选定工作项之一的行中，右键单击类型图标并选择同步属性**。

谢谢。埃里克。

# asp.net-mvc-3 - 上传图片路径名读取“System.Web.HttpPostedFileWrapper”

> ID：10019931
> 
> 赞同：2
> 
> 时间：2012-04-04T22:05:37.757
> 
> 标签：asp.net-mvc-3

有这个工作；在一个阶段。问题是以下文本现在出现在数据库“System.Web.HttpPostedFileWrapper”中的图像字段中

以下代码来自控制器：

```
 [HttpPost]
    public ActionResult Create(CarAdvert caradvert,
         HttpPostedFileBase picture1)
    {
        if (ModelState.IsValid)
        {

            if (picture1 != null)
            {
                string image1 = picture1.FileName;
                caradvert.Image1 = image1;
                var image1Path = Path.Combine(Server.MapPath("~/Content/Images"), image1);
                picture1.SaveAs(image1Path);
            }

             db.CarAdverts.Add(caradvert);
             db.SaveChanges();
             return RedirectToAction("Index");  
        } 
```

此代码来自创建视图：

```
@using (Html.BeginForm("Create", "UserCarAdverts", FormMethod.Post, new { enctype = "multipart/form-data" })) {

    @Html.ValidationSummary(true)
    <fieldset>
        <legend>CarAdvert</legend>
      <div class="editor-field">

        <input type="file" name="Image1" />
        </div>

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T22:23:39.110

HttpPostedFileBase 控制器中的参数必须与输入 type="file" 具有相同的名称。要么做：

```
[HttpPost]     
public ActionResult Create(CarAdvert caradvert,          
HttpPostedFileBase Image1) 
```

或者

```
<input type="file" name="picture1" /> 
```

应该这样做

# android - 完成应用程序时关闭套接字

> ID：10019934
> 
> 赞同：6
> 
> 时间：2012-04-04T22:06:04.390
> 
> 标签：android, sockets

我的应用程序有一些活动，在第一个活动中，我连接了一个套接字以在其他活动上与服务器进行通信。此套接字在工作线程中运行。

我的问题是：应用程序完成后我在哪里可以关闭这个套接字？例如，使用 BACK 按钮...

我想关闭`onDestroy()`最后一个活动的套接字，但是这个活动可以在运行时被系统破坏并关闭套接字，即使应用程序没有完成。我不想要这个。

我`run()`处理套接字连接的线程方法如下：

```
public void run() { 
    if (this.bliveclient.isConnected()){       
        try {
            //...
            while (running) {
                //waiting for input data and do something...
            }
        }
        catch (IOException ex) {
            //handle exception
        }
        finally{
            try {
                mySocket.close();
            } catch (IOException ex) {
                //handle exception
            }
        }
    } 
```

但是该`finally`块永远不会被调用。

谁能给我一些提示？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-31T18:00:48.733

该`finally`块永远不会执行，因为运行循环永远不会完成。在某些时候，Android 只是杀死了进程，这会杀死 VM，一切都消失了。

如果您有一个只包含活动的应用程序，并且您在单独的线程中执行网络 I/O，那么您将无法知道何时关闭线程，因为“应用程序”永远不会“完成”。您需要定义应用程序如何“完成”。

更好的方法是将其放入 Service 中，因为如果 Android 想要终止该进程，它将首先在 Service 中调用 onDestroy() ，这将使您有机会正确关闭线程。

# visual-studio-2010 - 尝试在 ASP.NET MVC3 中创建新控制器时出现 IDE 异常

> ID：10019937
> 
> 赞同：1
> 
> 时间：2012-04-04T22:06:22.410
> 
> 标签：visual-studio-2010, asp.net-mvc-3, asp.net-mvc-areas, asp.net-mvc-scaffolding

我在 MVC3 项目中为一些功能创建了一个“区域”，然后改变了主意。我没有看到从我的项目中删除“Areas”的方法，所以我只是删除了“Areas”文件夹。现在，当我尝试创建一个新控制器时，我在 VS2010 Ultimate 中收到此异常消息：

> 使用“1”参数调用“GetControllerScaffolders”的异常：“管道关闭后无法调用 WriteObject 和 WriteError 方法。请联系 Microsoft 支持服务”

相关事实：

*   我知道我之前在这个项目上使用这种方法添加了一个控制器。
*   我至少有一个月没有添加控制器了。
*   我刚刚创建了一个新的 MVC3 项目并尝试添加一个控制器并得到了相同的异常
*   最近没有安装新的扩展。
*   最近没有更新 VS2010 或 MVC 框架。

我不确定删除“区域”文件夹是否会导致此问题（实际上，在全新项目中发生同样的事情之后似乎不太可能），但这是我在尝试添加控制器之前所做的最后一件事导致了这个异常。

有人有这个问题吗？有人知道修复吗？

# android - 三星 Galaxy ICS 4.0.3 LPQ 固件发送两条短信的任何解决方案？

> ID：10019938
> 
> 赞同：7
> 
> 时间：2012-04-04T22:06:25.707
> 
> 标签：android, galaxy, samsung-mobile

专门针对运行 ICS 4.0.3 的三星 Galaxy S2 的固件 (LPQ) 存在问题，其中 SMS 在除股票消息应用程序之外的所有 3rd 方应用程序（包括 Handcent、GO SMS 等）上发送两次。我认为最新版本的固件 LP7 修复了重复发送 SMS 问题。

然而，Handcent & GO SMS 已经找到了自己的解决方法并将他们的 apk 升级到市场。

有其他人知道如何使用 sendMultipartTextMessage() 或/和 sendTextMessage() 以编程方式解决此问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T12:03:47.060

查看官方错误报告中的解决方法[http://code.google.com/p/android/issues/detail?id=27024#c23](http://code.google.com/p/android/issues/detail?id=27024#c23)

以及将解决方法包装在一个很好的一致 API 中的 Android 库项目：[https ://github.com/nadam/compatibility-sms-manager](https://github.com/nadam/compatibility-sms-manager)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T06:27:11.653

有一个选项可以检查您是否在

> 设置>发送消息

# iphone - iPhone 检测到用户向上移动了他们的设备

> ID：10019944
> 
> 赞同：1
> 
> 时间：2012-04-04T22:07:19.273
> 
> 标签：iphone, objective-c, ios, accelerometer, core-motion

我正在开发一个应用程序，用户在其中设置一些东西（不重要它是什么），然后放下手机。片刻之后，用户会再次拿起电话。我想检测用户何时拿起电话。我对使用加速度计不是很有经验。我尝试使用加速度计，但我注意到我会遇到问题，因为我正在寻找运动，即从一个位置变为另一个位置。如果有人知道如何做到这一点，将不胜感激。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T22:25:21.933

您可以尝试这样的事情，当加速度计加速度等于您指定的值时触发您的操作。

```
- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration
{
     if(acceleration.y > 1.0f)
     {
         NSLog(@"acceleration > myValue");
     } 
} 
```

[这篇文章也可以帮助你](https://stackoverflow.com/a/159610/716216)

# jquery - 加快 iPhone 上 jQuery Mobile 中的对话框/页面转换？

> ID：10019947
> 
> 赞同：2
> 
> 时间：2012-04-04T22:07:30.993
> 
> 标签：jquery, iphone, ios, ios5, jquery-mobile

还有其他关于加速 jQuery Mobile for Android 的问题，但有谁知道如何加速 iPhone 上的页面转换，特别是对话框转换？

我们在 JQM 1.0 上。JQM 1.1 应该加速页面转换（虽然我们还没有看到任何演示），但我们想知道是否有人为 JQM 1.0 做过任何事情。

现在，有两秒钟的延迟，这对于显示对话框来说太长了。我们采用两种选择之一。页面过渡不使用动画，提供即时反馈，或者通过绑定到“touchstart”并为对话框设置动画来滚动我们自己的动画，这实际上只是当前页面内的一个大 DIV。

两者都不理想。

建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T23:28:45.663

您可能应该首先使用应用程序的副本更新到 1.1。JQM 1.1 更广泛地使用 HTML5 转换。在我们的 webapps 中，这大大提高了转换的性能。

如果您想在 1.0 中模拟这一点，请使用 webkit 的 CSS 转换和动画属性创建转换，并使用两个类“.active”和“.hidden”，然后将 addClass() 函数绑定到 JQM 中的 touchStart 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T23:24:22.803

我认为“点击”延迟是 android webkit 的一部分，您对此无能为力。您可以将`touchstart`事件绑定到按钮，然后调用 JQM 的[.changePage](http://jquerymobile.com/test/docs/api/methods.html)。

无需滚动您自己的动画，JQM 将管理它！

# memory - Solr 多面搜索内存不足

> ID：10019952
> 
> 赞同：0
> 
> 时间：2012-04-04T22:08:00.220
> 
> 标签：memory, solr, out-of-memory

我们有一个包含 86,315,770 个文档的 solr 实例。它使用多达 4GB 的内存，我们需要它来对称为内容的标记化字段进行分面。磁盘上的索引大小为 23GB。问题是我们在尝试对一组记录（大约 3000 条记录）进行构面时内存不足。查询如下所示：

```
/select/?q=criteria_oid:20185100 and createdAt:[2012-20-01T00:00:00Z TO 2012-20-01T01:00:00Z]&facet=true&facet.field=content 
```

关于如何提高内存使用率的任何建议？提前致谢。

# python - 从 HTML 文档中提取特定字符串

> ID：10019954
> 
> 赞同：0
> 
> 时间：2012-04-04T22:08:16.470
> 
> 标签：python, html, parsing

我需要从脱机 HTML 文档中仅采样和提取特定字符串，并将该信息干净整洁地写入 *.txt 文件中。

例如，假设这是 HTML 文件的一部分：

```
 <span id="dataView01">001.00 SPL</span>
    <span id="dataView02">543.00 SPL</span>
    <span id="dataView03">056.00 SPL</span>
    <span id="dataView04">228.00 SPL</span> 
```

我需要得到这个结果：

```
 001.00 SPL
   543.00 SPL
   056.00 SPL
   228.00 SPL 
```

你能帮我解决这个问题吗，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-04T22:14:59.380

使用像[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)这样的 HTML 解析器。
例子：

```
from bs4 import BeautifulSoup as bs
import re

markup = '''<span id="dataView01">001.00 SPL</span>
    <span id="dataView02">543.00 SPL</span>
    <span id="dataView03">056.00 SPL</span>
    <span id="dataView04">228.00 SPL</span>'''

soup = bs(markup)
tags = soup.find_all('span', id=re.compile(r'[dataView]\d+'))
for t in tags:  
    print(t.text) 
```

结果：

```
001.00 声压级
543.00 声压级
056.00 声压级
228.00 声压级

```

* * *

下一步; 写入 .txt 文件：

```
import csv

with open('output.txt','wb') as fou:
    csv_writer = csv.writer(fou)
    for tag in tags:
        split_on_whitespace = t.text.split()
        csv_writer.writerow(split_on_whitespace) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T22:13:55.587

使用[BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T22:11:53.563

```
 import re
 s='001.00 SPL 543.00 SPL 056.00 SPL 228.00 SPL'
 print re.search(r'(\d{3}\.\d{2}\sSPL\s\d{3}\.\d{2}\sSPL\s\d{3}\.\d{2}\sSPL\s\d{3}\.\d{2}\sSPL)',s).group() 
```

我不知道 html 文档中的周围文本，但这可能有效。

我看到你的编辑我会更新我的

实际上与jldupont的答案一起去。

# facebook-graph-api - Facebook Graph API 是否支持音频文件上传？

> ID：10019955
> 
> 赞同：2
> 
> 时间：2012-04-04T22:08:18.523
> 
> 标签：facebook-graph-api, audio, post

是否可以将音频文件（即 mp3、flac...）上传到 Facebook Graph？如果是这样，任何人都可以将我指向一种资源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-05T14:37:45.607

不幸的是，您不能将音频文件直接发布到 Facebook 墙上。

但是，您可以发布嵌入式闪存来播放您的音频。

这是将 Flash 播放器发布到墙上的资源： [https ://developers.facebook.com/blog/post/486/](https://developers.facebook.com/blog/post/486/)

# c# - 从后台工作人员或事件更新 GUI

> ID：10019960
> 
> 赞同：1
> 
> 时间：2012-04-04T22:08:32.893
> 
> 标签：c#, wpf, multithreading, events, backgroundworker

我想了解如何定期使用简单的文本字符串更新我的 GUI。本质上，我正在编写一个 twitter 应用程序，它会定期轮询 twitter 以获取更新。我希望更新的内容在一个文本块中显示，在一个恒定循环中一一显示。

为了保持 GUI 响应，我需要在后台工作线程中执行查询，但是无法从该线程更新 GUI。作为一名学习者，我正在努力实现一种通过使用事件来更新 GUI 的方法。

在下面的代码中，我赞赏“MainWindowGoUpdate”将在“错误线程”上，但我怎样才能让 GUI 线程监听事件？

一个指针表示赞赏。

```
public partial class MainWindow : Window
{
  public MainWindow()
  {
    public static event UpdateTimeLineEvent _goUpdate;

    public static string TheTimeLine;
    UpdateTimeLine();
  }

  private void UpdateTimeLine()
  {        
   txtb_timeline.Text = "Updating...";

   BackgroundWorker startTimelineUpdater = new BackgroundWorker();
   startTimelineUpdater.DoWork += new DoWorkEventHandler(startTimelineUpdater_DoWork);
   startTimelineUpdater.RunWorkerCompleted += new RunWorkerCompletedEventHandler(startTimelineUpdater_RunWorkerCompleted);
   startTimelineUpdater.RunWorkerAsync();        
  }

  void startTimelineUpdater_DoWork(object sender, DoWorkEventArgs e)
  {
    while (true)
    {
      Xtweet getSQL = new Xtweet();
      var sqlset = getSQL.CollectLocalTimelineSql();

      int i = 0;
      while (i < 10)
      {
        foreach (var stringse in sqlset)
        {
          StringBuilder sb = new StringBuilder();

          sb.Append(stringse[0] + ": ");
          sb.Append(stringse[1] + " @ ");
          sb.Append(stringse[2]);

          sb.Append("\n");

          TheTimeLine = sb.ToString();

          _goUpdate += new UpdateTimeLineEvent(MainWindowGoUpdate);
          _goUpdate.Invoke();

          Thread.Sleep(10000);
          i++;
        } 
      } 
    }        
  }
  void MainWindowGoUpdate()
  {
    txtb_timeline.Text = TheTimeLine;
  }
  void startTimelineUpdater_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
  {
    txtb_timeline.Text = "should not see this";
  }  
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-04T22:44:52.137

您可以使用 Dispatcher 类：

```
Dispatcher.BeginInvoke(
    DispatcherPriority.Input, new Action(() => 
    { 
        //update UI
    })); 
```

但是，在您的情况下，我会在局部变量中从 BackgroundWorker 收集结果，然后更改您的标签以循环基于 WPF`Timer`对象的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-04T22:22:28.293

您可以使用 Dispatcher 更新您的 GUI。查看[此博客文章](http://elegantcode.com/2009/07/03/wpf-multithreading-using-the-backgroundworker-and-reporting-the-progress-to-the-ui/)以获取有关如何执行此操作的相当好的示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-04T22:35:30.977

你在哪里

```
 txtb_timeline.Text = "should not see this"; 
```

是你得到结果的地方。结果将在 e.Result 中，您可以将 e.Result 与多个属性打包。

如果您想获得中间结果，您可以使用进度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-04T22:44:12.540

我将尝试这些更改：
在您的 UpdateTimeLine 添加

```
 startTimelineUpdater.WorkerReportsProgress = true;
 startTimelineUpdater.ProgressChanged += new ProgressChangedEventHandler
                                      (startTimelineUpdater_ProgressChanged); 
```

在 startTimelineUpdater_DoWork 中删除这些行

```
TheTimeLine = sb.ToString();  
_goUpdate += new UpdateTimeLineEvent(MainWindowGoUpdate);  
_goUpdate.Invoke(); 
```

并插入这些：

```
BackgroundWorker bkgwk = sender as BackgroundWorker;
bkgwk.ReportProgress(0, sb.ToString()); 
```

最后添加进度事件

```
private void startTimelineUpdater_ProgressChanged(object sender, ProgressChangedEventArgs e)
{
   txtb_timeline.Text = e.ObjectState.ToString();
} 
```

现在您可以只保留对 UpdateTimeLine 的调用并删除 MainWindowGoUpdate 方法

# objective-c - Objective-C：@interface 之前的@class 指令？

> ID：10019961
> 
> 赞同：86
> 
> 时间：2012-04-04T22:08:40.113
> 
> 标签：objective-c, syntax

这两个类声明有什么区别？我不明白为什么在这里使用@class。谢谢。

```
@class TestClass;

@interface TestClass: UIView {
    UIImage *image1;
    UIImage *image2;
} 
```

和

```
@interface TestClass: UIView {
    UIImage *image1;
    UIImage *image2;
} 
```

* * *

## 回答 #1

> 赞同：203
> 
> 时间：2012-04-04T22:22:40.770

`@class`存在打破循环依赖。假设你有 A 类和 B 类。

```
@interface A:NSObject
- (B*)calculateMyBNess;
@end

@interface B:NSObject
- (A*)calculateMyANess;
@end 
```

鸡; 遇见蛋。这永远无法编译，因为 A 的接口取决于 B 的定义，反之亦然。

因此，它可以通过使用来修复`@class`：

```
@class B;
@interface A:NSObject
- (B*)calculateMyBNess;
@end

@interface B:NSObject
- (A*)calculateMyANess;
@end 
```

`@class`有效地告诉编译器这样的类存在于某处，因此，声明为指向所述类的实例的指针是完全有效的。但是，您无法在类型仅定义为的实例引用上调用方法，`@class`因为编译器没有可用的其他元数据（我不记得它是否将调用站点恢复为通过调用`id`或不是）。

在您的示例中，这`@class`是无害的，但完全没有必要。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-04T22:17:00.187

```
@class TestClass; 
```

这只是声明“将定义类 TestClass”。

在这种情况下（您粘贴的那个），这没有任何效果，所以它们是相同的。

但是，如果您要定义一个使用您的类名的协议（例如，作为传递给委托的参数类型），您需要`@class TestClass`在协议定义之前声明，因为您的类仍未定义。

一般来说，如果你需要在类定义之前提到你的类名，你需要先发出`@class`声明

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-04T22:17:52.683

根据马特的回答`@class`，您的代码中的声明绝对没有意义。`@class`forward 定义了一个类，以便编译器随后知道您所指的一般类型的单元。由于 Objective-C 在运行时几乎是无类型的，这通常是编译器实际需要知道的全部内容 - 足以将事物与原子 C 值区分开来。

我将在黑暗中刺痛并说因为实例变量是在`@interface`您正在查看一些旧代码中声明的。因为它是旧代码，它`@class`可能曾经在其他地方（例如，在两者之间声明了一个委托协议）并且刚刚结束了无害的搁浅。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-05-13T02:01:50.243

当您需要为一个对象定义一个协议时，@class 非常方便，该协议通常会与您也定义其接口的对象交互。使用@class，您可以将协议定义保留在类的标题中。这种委托模式经常用在 Objective-C 上，通常比定义“MyClass.h”和“MyClassDelegate.h”更可取。这可能会导致一些令人困惑的导入问题

```
@class MyClass;

@protocol MyClassDelegate<NSObject>

- (void)myClassDidSomething:(MyClass *)myClass
- (void)myClass:(MyClass *)myClass didSomethingWithResponse:(NSObject *)reponse
- (BOOL)shouldMyClassDoSomething:(MyClass *)myClass;
- (BOOL)shouldMyClass:(MyClass *)myClass doSomethingWithInput:(NSObject *)input

@end

// MyClass hasn't been defined yet, but MyClassDelegate will still compile even tho
// params mention MyClass, because of the @class declaration.
// You're telling the compiler "it's coming. don't worry".
// You can't send MyClass any messages (you can't send messages in a protocol declaration anyway),
// but it's important to note that @class only lets you reference the yet-to-be-defined class. That's all.
// The compiler doesn't know anything about MyClass other than its definition is coming eventually.

@interface MyClass : NSObject

@property (nonatomic, assign) id<MyClassDelegate> delegate;

- (void)doSomething;
- (void)doSomethingWithInput:(NSObject *)input

@end 
```

然后，当您使用该类时，您既可以创建该类的实例，也可以使用单个 import 语句实现协议

```
#import "MyClass.h"

@interface MyOtherClass()<MyClassDelegate>

@property (nonatomic, strong) MyClass *myClass;

@end

@implementation MyOtherClass

#pragma mark - MyClassDelegate Protocol Methods

- (void)myClassDidSomething:(MyClass *)myClass {

    NSLog(@"My Class Did Something!")

}

- (void)myClassDidSomethingWithResponse:(NSObject *)response {

    NSLog(@"My Class Did Something With %@", response);

}

- (BOOL)shouldMyClassDoSomething {

    return YES;

- (BOOL)shouldMyClassDoSomethingWithInput:(NSObject *)input {

    if ([input isEqual:@YES]) {

        return YES;

    }

    return NO;

}

- (void)doSomething {

    self.myClass = [[MyClass alloc] init];
    self.myClass.delegate = self;
    [self.myClass doSomething];
    [self.myClass doSomethingWithInput:@0];

} 
```

# iphone - 带有底部填充的 UITextView

> ID：10019963
> 
> 赞同：2
> 
> 时间：2012-04-04T22:08:54.823
> 
> 标签：iphone, objective-c, ios, ipad

所以我想创建这样的东西：

![在此处输入图像描述](../Images/376fc10bf067cad6aae30d565bf475de.png)

基本上，我希望该文本计数的底部填充高度约为 20 px。我试过设置插图，但它不起作用..我怎样才能做到这一点，以便在文本视图的底部总是有一个 20 像素？

这是我所做的：

```
 [self.comments_ setScrollIndicatorInsets:UIEdgeInsetsMake(0, 0, 25, 0)];
    [self.comments_ setContentInset:UIEdgeInsetsMake(0, 0, 25, 0)]; 
```

但是当它溢出时我仍然在底部填充上得到文本..有什么想法吗？这是来自浮动应用阅读器

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-04T22:43:34.640

尝试将您的 UITextView 包装在具有填充尺寸的 UIView 中。它看起来像这样：

```
UITextView *textView = [[[UITextView alloc] initWithFrame:CGRectMake(5, 5, 100, 50)] autorelease];
textView.text = @"Lorem ipsum";
textView.backgroundColor = [UIColor clearColor];

UIView *view = [[[UIView alloc] initWithFrame:CGRectMake(0, 0, 110, 80)] autorelease];
[view addSubview:textView]; 
```

这将在文本视图的每一侧填充 5px，除了 25px 底部填充。也许我错过了一些细节，但框架部分应该可以帮助你。

# heuristics - 8 谜题：汉明和马纳坦启发式考虑“空白空间”？

> ID：10019965
> 
> 赞同：3
> 
> 时间：2012-04-04T22:08:55.967
> 
> 标签：heuristics, hamming-distance

我有一个非常简单的问题。

我正在研究 8 个谜题（8 个数字（从 1 到 8）+ 空白（=0））

在计算汉明距离（错误位置的数字）和曼哈顿距离（开始和最终位置之间的水平+垂直距离）时，我应该考虑“空白”空间来计算结果吗？

例如..

```
 |7 2 4|
 |5 _ 6|
 |8 3 1| 
```

有目标状态

```
 |_ 1 2|
 |3 4 5|
 |6 7 8| 
```

什么是正确的？

*   汉明距离 = 8（每个数字都没有到位）或 9（也 0 = 考虑空白）
*   曼哈顿距离 (distance(7),distance(2),distance(4),...) = 3 (=1+2) + 1 (=1+0) + 2 (1+1) + 2 (2+ 0) + 0 (空白) + 3 (1+2) + 2 (2+0) + 3 (1+2) + 3 (2+1) --> 不考虑空白是 18 ，有空白 (+2)是20。什么是正确的？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-29T03:46:42.957

如果您希望启发式算法被接受，那么您不应该将空白瓷砖计入其中。

例如

```
|1 _ 2|  
|3 4 5|  
|6 7 8| 
```

真正的答案是 1，但曼哈顿距离是 2，如果你算上空白瓷砖的话。这不能是可接受的启发式方法。

# php - XDebug 未在 Windows 7 64 位 PHP 5.4 上加载

> ID：10019966
> 
> 赞同：21
> 
> 时间：2012-04-04T22:08:59.380
> 
> 标签：php, xdebug

我在 apache 上运行 php。我已经下载了我认为正确的 xdebug 编译 dll 用于 php 版本 5.4 64 位窗口。我启用了线程安全，它使用的是 VC9。我已经下载了 dll 并把它放在这里：

```
C:\php5\extras\php_xdebug-2.2.0RC1-5.4-vc9-x86_64.dll 
```

这是我的 php.ini 中的内容：

```
[xdebug]
zend_extension = "C:\php5\extras\php_xdebug-2.2.0RC1-5.4-vc9-x86_64.dll" 
```

当我启动 Apache 时，我收到此错误：

```
[Wed Apr 04 17:01:56 2012] [notice] Parent: Received restart signal -- Restarting the server.
Failed loading C:\php5\extras\php_xdebug-2.2.0RC1-5.4-vc9-x86_64.dll
hild process is ending.
[Wed Apr 04 17:01:56 2012] [notice] Apache/2.2.22 (Win32) PHP/5.4.0 configured -- resuming normal operations
[Wed Apr 04 17:01:56 2012] [notice] Server built: Jan 28 2012 11:16:39
[Wed Apr 04 17:01:56 2012] [notice] Parent: Created child process 2120
[Wed Apr 04 17:01:57 2012] [notice] Child 2120: Child process is running
[Wed Apr 04 17:01:57 2012] [notice] Child 2120: Acquired the start mutex.
[Wed Apr 04 17:01:57 2012] [notice] Child 2120: Starting 64 worker threads.
[Wed Apr 04 17:01:57 2012] [notice] Child 5624: Released the start mutex
[Wed Apr 04 17:01:58 2012] [notice] Child 5624: All worker threads have exited.
[Wed Apr 04 17:01:58 2012] [notice] Child 5624: Child process is exiting
Failed loading C:\php5\extras\php_xdebug-2.2.0RC1-5.4-vc9-x86_64.dll 
```

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2012-04-05T08:54:19.360

为了确保您下载了正确的二进制文件，您可以使用[http://xdebug.org/wizard.php](http://xdebug.org/wizard.php)上的向导它会准确地告诉您要下载哪个文件以及您应该将哪个 php.ini 文件放入zend_extension 行（当然，您现在使用的是正确的行，因为您收到“加载失败”错误）。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-04-05T18:53:31.233

好的，它现在正在工作，我想我知道出了什么问题。我使用的是 64 位版本的 PHP，但使用的是 32 位版本的 Apache 和 64 位版本的 xdebug。我重新开始使用 Apache 2.4 32 位，因为 php5 模块似乎没有 64 位版本。所以，我确保我拥有一切的 32 位版本。我正在使用 php5.4 和 VC9，线程安全。

这篇博文有助于设置它：http: [//lifeofageekadmin.com/how-install-apache-2-4-php-5-4-and-mysql-5-5-21-on-windows-7/](http://lifeofageekadmin.com/how-install-apache-2-4-php-5-4-and-mysql-5-5-21-on-windows-7/)

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-08-05T18:32:41.257

我终于让这个工作了。按照 xdebug 网站上的说明，我使用向导将 dll 文件下载到“ext”目录。然后向导告诉我将此行添加到我的 php.ini 文件中：`zend_extension=ext\php_xdebug-2.3.3-5.6-vc11.dll`

这给了我上面看到的错误：`Failed loading ext\php_xdebug-2.3.3-5.6-vc11.dll`

我还尝试用正斜杠替换反斜杠，但失败并显示以下消息：`Failed loading ext\ext/php_xdebug-2.3.3-5.6-vc11.dll`

查看最后一条消息，我认为可能是扩展目录引起了问题，我在 php.ini 文件中看到了这一行：`extension_dir = "ext"`

所以我改用：`zend_extension=php_xdebug-2.3.3-5.6-vc11.dll` 它有效！

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-07-10T08:15:59.357

在最新版本中`xampp`你只需要添加`zend_extension=xdebug`到`php.ini`，例如：

```
zend_extension=xdebug
[XDebug]
xdebug.profiler_append = 0
xdebug.profiler_enable = 1
xdebug.profiler_enable_trigger = 0
xdebug.profiler_output_dir = "c:\tmp"
xdebug.profiler_output_name = "cachegrind.out.%t-%s"
xdebug.remote_enable = 1
xdebug.remote_handler = "dbgp"
xdebug.remote_host = "127.0.0.1"
xdebug.trace_output_dir = "c:\xampp\php"
xdebug.remote_autostart=on
xdebug.remote_enable=on
xdebug.remote_connect_back=on
xdebug.remote_port=9000
xdebug.remote_mode=req
xdebug.idekey="PHPSTORM" 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-02-24T21:01:07.340

好的，我知道这是一个非常古老的僵尸线程，但是最近自己解决了这个问题，结果证明有一个简单的解决方案。

PHP.INI 要求对目录使用正斜杠，而在 windows 下安装 XDebug 的说明使用反斜杠。所以对于上面的原始问题，解决方法是将zend_extension行改为：

zend_extension = "C:/php5/extras/php_xdebug-2.2.0RC1-5.4-vc9-x86_64.dll"

希望这可以帮助。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-04-04T23:55:44.090

进去`C:\php5\ext`看看是否`php_xdebug.dll`已经在里面。如果没有，请尝试重命名`php_xdebug-2.2.0RC1-5.4-vc9-x86_64.dll`并将`php_xdebug.dll`其放入`C:\php5\ext`，然后将您的`php.ini`添加更改为：

```
[xdebug]
zend_extension = "C:\php5\ext\php_xdebug.dll" 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-01-09T19:31:15.253

有同样的问题。对我来说，我需要`zend_extension`引号中的 , 的绝对路径（但反斜杠很好）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-02-10T19:00:44.667

我有 Windows 7 64bit 和 php v5.4.4，但我需要下载的 x-debug 版本是：

PHP 5.4 VC9 (32 位) (MD5: ffeb0215621d330fa53b249f0930ffae)

因为 IIS 不能使用 xdebug 64bit

还有我的 php.ini 说明：

```
[Xdebug]
zend_extension="C:\Program Files (x86)\iis express\PHP\v5.4\ext\php_xdebug-2.4.0rc4-5.4-vc9-nts.dll"
xdebug.remote_enable=1
xdebug.remote_host=127.0.0.1
xdebug.remote_port=9000
xdebug.profiler_enable=1
xdebug.profiler_output_name = cachegrind.out.%t.%p
xdebug.profiler_output_dir = "C:\temp\php"
xdebug.profiler_output_dir="C:\temp\php" 
```

# android - 推迟由 Loader 管理的查询的最佳方法是什么？

> ID：10019972
> 
> 赞同：3
> 
> 时间：2012-04-04T22:09:25.077
> 
> 标签：android

我正在使用 LoaderManager 来处理支持列表视图的查询。它依赖于一些直到过程后期才知道的参数。目前我打电话

```
getSupportLoaderManager().initLoader(0, null, callback); 
```

在 onCreate() 中。这将在所有参数都知道之前立即创建加载程序并执行查询。为了处理这个问题，我在 onCreateLoader() 中有一个虚拟查询，当并非所有参数都知道时，我的回调处理程序中有一个标志，用于在 onLoadFinished() 中检查我们是否有合法查询。如果不是，我忽略游标数据。当需要进行真正的查询时，我会打电话给

```
getSupportLoaderManager().restartLoader(0, null, callback); 
```

并将我的标志设置为 true，以便 onLoadFinshed() 正确处理它。

我在上面所做的似乎有点老套；有没有更好的办法？我最初试图稍后调用 initLoader()，当我第一次需要查询时，但是在方向更改时事情会失败，类似于[这个问题](https://stackoverflow.com/questions/7166363/loadercallbacks-onloadfinished-not-called-if-orientation-change-happens-during-a)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T01:18:09.700

您可以简单地调用`restartLoader`而无需`initLoader`先调用。只需`initLoader`从 中删除调用`onCreate`，并在`restartLoader`获得参数后运行，不需要标志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T06:50:34.350

只是为了结束这个问题，对于我的用例，我能够依靠使用每个片段加载器管理器，在我需要它们并获得信息时实例化它们。如果这不适合其他任何人的用例，如果您想避免编写 AsyncTasks 并利用加载程序的一些内置功能，那么我最初的 hack 可能已经足够好了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-17T08:04:16.707

我找到了另一个更简单的解决方案。出于某种原因，您必须在 onCreate() 中调用 initLoader()，但是因为每次调用 restartLoader() 时都必须传递 LoaderCallbacks，所以在此首先使用什么回调，对 initLoader() 的虚拟调用并不重要）。我创建了非常简单的实用方法：

```
public static void initEmptyLoaders(Activity activity, int... ids) {
    initEmptyLoaders(activity, activity.getLoaderManager(), ids);
}

public static void initEmptyLoaders(final Context ctx, LoaderManager loaderManager, int... ids) {
    LoaderManager.LoaderCallbacks callbacks = new LoaderManager.LoaderCallbacks() {
        @Override
        public Loader onCreateLoader(int i, Bundle bundle) {
            return new Loader(ctx);
        }

        @Override
        public void onLoadFinished(Loader loader, Object o) {
        }

        @Override
        public void onLoaderReset(Loader loader) {
        }
    };

    for (int id : ids) {
        loaderManager.initLoader(id, null, callbacks);
    }
} 
```

现在我在我的 onCreate() 中调用 initEmptyLoaders() 以及我以后可能需要的每个加载器 id - 一切正常:-)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-05T07:59:39.433

这是一个老问题，在某些机器人中仍然存在，并且支持库更新得更多。然后使用`android.support.v4.*`Loader API 的版本来修复它。

# java - 为什么我会在此泛型类型上收到未经检查的强制转换警告？

> ID：10019974
> 
> 赞同：1
> 
> 时间：2012-04-04T22:09:39.563
> 
> 标签：java, generics, types, casting, warnings

所以这是我的代码：

```
public class SetWritable<T extends Writable> implements Writable {      
    private Class<? extends Writable> valueClass;
    private Set<T> values;  

    public SetWritable(Class<T> valueClass) {
        this.valueClass = valueClass;
        this.values = new HashSet<T>();
    }

        public void readFields(DataInput in) throws IOException {
        values = new HashSet<T>();          
        int len = in.readInt();

        for (int i = 0; i < len; i++) {         
            //this line is where I get the warning
            //FYI, WritableFactories.newInstance returns an instance of Writable
            T value = (T) WritableFactories.newInstance(valueClass);

            value.readFields(in);               
            values.add(value);
        }
    }
} 
```

令我困惑的是：我断言 T 扩展了 Writable，那么为什么当我尝试将 Writable 强制转换为 T 时会收到警告？既然我知道 T 扩展了 Writable，那么抑制这个警告是否安全？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T22:13:49.873

您收到警告是因为`WritableFactories.newInstance`返回 a`Writable`和您的`T` **extends** `Writable`，所以它*可能*不是一个安全的演员表。但是，由于您将其`Class<T>`用作参数，`newInstance`因此可以安全地禁止此警告。

`valueClass`存储为`Class<T>`和使用[`Class#cast`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#cast%28java.lang.Object%29)为您投射可能会更好，那么您`@SuppressWarnings`的方法就不会有任何难看的东西了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-04T22:12:14.357

所有`T`的都是`Writable`，但不是所有`Writable`的都是`T`s。因此，当您将 a`Writable`转换为`T`时，不能确定 the`Writable`实际上*是*a `T`。

例如，假设有一个`S extends Writable`. `newInstance`可能是 a而*不是*a `S`，但它仍然是- 但将其转换为会给你一个.*`T``Writable``T``ClassCastException`*

 ** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T22:12:44.980

所有的 T 都是可写的，但并非所有的可写都是 T*

# c# - decimal.parse("value") 看起来很奇怪

> ID：10019975
> 
> 赞同：4
> 
> 时间：2012-04-04T22:09:45.143
> 
> 标签：c#

我正在处理其他人的代码，并看到如下内容：

```
if ((somevariable) >  decimal.Parse("24,999.99")) ... 
```

和

```
return int.Parse("0"); 
```

我想不出任何合乎逻辑的理由来代替

```
if ((somevariable) > 24999.99) ... 
```

或者

```
return 0; 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-04T22:12:24.280

原始代码和您提议的更改之间存在语义差异，但您的怀疑是正确的。

对不起，从字符串转换简直是愚蠢的。永远没有必要这样做。不同之处在于原始代码将字符串解析为 a `decimal`，但您的更改将使用 a `double`。所以，它应该是：

```
if (somevariable > 24999.99m) ... 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-04T22:13:07.400

一方面，因为 24999.99 是一个`double`值而不是一个`decimal`值 - 你会想要使用`24999.99m`. 但是，是的，否则使用文字会更好*。*（我也不会为变量周围的括号而烦恼。）

请注意，执行解析的代码甚至*会失败*，如果它在某些文化中运行，其中小数分隔符不是`.`和/或千位分隔符不是`,`. 我想不出*任何*好的理由来使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-04T22:12:54.480

你没有错过任何东西。那个代码是假的。按照您在问题中描述的方式重构它。

对于它的价值，`decimal.Parse("24,999.99")`将返回`24999.99m`a`decimal`而不是`24999.99`a `double`。所以第一个摘录真的应该是

```
if (somevariable > 24999.99m) 
```

当然，这假设比较中的右手操作数确实应该是 a `decimal`。鉴于这段代码的性质，我会怀疑一切的正确性。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-04T22:17:10.147

解析中的字符串是否真的作为字符串文字输入，而不是作为变量输入？

如果是这样，我会说这只是可怕的编码，我只希望他们没有把它放在热点函数中。这将是一个糟糕的编码器的标志。我听说其中一些存在。

他们可能希望看到逗号使数字更具可读性。（上面写着：eeek！可能会警告其余代码......）

# ios - MapKit 缩放问题

> ID：10019988
> 
> 赞同：0
> 
> 时间：2012-04-04T22:11:01.017
> 
> 标签：ios, mapkit, cllocationmanager

我有一个应用程序，它有一个带有位置图钉的地图，但我想更改它以便放大用户位置。

默认情况下，它从坐标 0,0（非洲海岸外）开始，但现在它位于英国，但我无法让它放大到街道水平。当我调整`Delta`设置时，它没有任何区别。

这是我正在使用的代码。

```
#import "FirstViewController.h"
#import "MapPin.h"

@implementation FirstViewController

@synthesize map;
@synthesize locationManager , location;

-(void)addAnnotations{

    // Normally read the data for these from the file system or a Web service
    CLLocationCoordinate2D coordinate = {53.0670, -2.521};
    MapPin *pin = [[MapPin alloc]initWithCoordinates:coordinate
                                           placeName:@"Mr Shoe - Gents,Ladies,Kids"
                                         description:@"01270 626767, 123 Your Street, CW5 5NA"
                   ];

    [self.map addAnnotation:pin];

    [pin release];

    // Normally read the data for these from the file system or a Web service
    CLLocationCoordinate2D coordinate2 = {53.0659, -2.521};
    MapPin *pin2 = [[MapPin alloc]initWithCoordinates:coordinate2
                                            placeName:@"Veg-is-us - Fruit & veg"
                                          description:@"01270 626767, 123 Your Street, CW5 5NA"

                    ];

    [self.map addAnnotation:pin2];

    [pin2 release]; 

    CLLocationCoordinate2D coordinate3= {53.06879, -2.52195};
    MapPin *pin3= [[MapPin alloc]initWithCoordinates:coordinate3
                                            placeName:@"PC Centre Nantwich"
                                          description:@"01270 626767, 15c Beam street, CW5 5NA"

                    ];

    [self.map addAnnotation:pin3];

    [pin3 release]; 
}

// The designated initializer.  Override if you create the controller programmatically and want to perform customization that is not appropriate for viewDidLoad.
/*
 - (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
 self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
 if (self) {
 // Custom initialization.
 }
 return self;
 }
 */

// Implement viewDidLoad to do additional setup after loading the view, typically from a nib.
- (void)viewDidLoad {

    [[CLLocationManager alloc] init];
    locationManager.desiredAccuracy = kCLLocationAccuracyBest;
    [locationManager startUpdatingLocation];
    [self addAnnotations];
        [self addAnnotations];

     [super viewDidLoad];
}
-(void) locationManager: (CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {
    location = newLocation.coordinate;
    //One location is obtained.. just zoom to that location

    MKCoordinateRegion region;
    region.center=location;
    //Set Zoom level using Span
    MKCoordinateSpan span;
    span.latitudeDelta=0.4;
    span.longitudeDelta=0.4;
    region.span=span;
    NSLog(@"map=%@", map);
    [map setRegion:region animated:TRUE];

}

/*
 // Override to allow orientations other than the default portrait orientation.
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
 // Return YES for supported orientations.
 return (interfaceOrientation == UIInterfaceOrientationPortrait);
 }
 */

- (void)didReceiveMemoryWarning {
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc. that aren't in use.
}

- (void)viewDidUnload {
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (void)dealloc {
    [super dealloc];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-05T16:31:56.257

在`viewDidLoad`中，此行不执行任何操作：

```
[[CLLocationManager alloc] init]; 
```

编译器应该在该行给出警告，例如“未使用的表达式结果”。

您需要将该代码的结果实际分配给`locationManager`变量，并且您需要设置`delegate`否则委托方法将不会被调用：

```
self.locationManager = [[CLLocationManager alloc] init];
locationManager.delegate = self; 
```

顺便说一句，在 中`viewDidLoad`，您调用`[self addAnnotations];`了两次，我认为最好先调用`[super viewDidLoad]`而不是最后调用。

# android - 是否可以通过在 XML 中定义它的状态来启动一个隐藏的片段？

> ID：10019989
> 
> 赞同：7
> 
> 时间：2012-04-04T22:11:09.770
> 
> 标签：android

目前我在资源文件中定义了各种 Fragment 并将它们隐藏在包含 Activity 的 onCreate 方法中，但我对这种方法并不满意，因为我希望这是每个 Fragment 为自己定义的特征之一.

我是过于客观化 Fragments 还是只是错过了技术？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-04T22:30:05.617

> 我对这种方法不满意，因为我希望这是每个片段为自己定义的特征之一。

我不同意这种评价。

片段负责屏幕的一小部分以及纯粹包含在屏幕的该小部分中的任何事件。

Fragment 是托管的 Activity A 还是 Activity B 还是 Activity C，是否与其他 Fragment 并排，当前是否可见等等都不是 Fragment 的责任。该责任在于托管活动（或活动，如果片段被重用）。托管活动知道屏幕大小以及在将特定片段加载到屏幕上时应该做什么。

毕竟，规则可能会改变。也许片段隐藏在小/普通屏幕上，但在大/超大屏幕上可见。或者，也许该片段最初是单独使用的，但后来被加载到`ViewPager`. 或者，也许片段作为 a 的一部分被动态创建`FragmentTransaction`并添加到 BACK 堆栈中，因此用户可以独立地摆脱片段。恕我直言，片段不应该知道也不应该关心这些东西，因为它都超越了那个单独片段的界限。

# javascript - HTML5 音频：即使离开网站后音乐也不会停止

> ID：10019990
> 
> 赞同：1
> 
> 时间：2012-04-04T22:11:32.657
> 
> 标签：javascript, iphone, ipad, html, html5-audio

我正在使用 HTML5 制作手机游戏。有一个背景音乐在游戏过程中运行，最好在我导航到另一个页面时停止......该逻辑在旧款 iPhone 和 android 上正常工作。但是，在 iPhone 4 和 iPad 上，音乐不会停止并继续播放（即使我导航到另一个网站），直到浏览器关闭。当然有电话

```
music_var.pause()
```

代码中的函数以及卸载处理程序......但这似乎根本不起作用。关于这里发生的事情有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-04T22:34:10.207

标签有各种各样的差异`audio`，有些浏览器甚至`pause`在被告知时也不会（加上没有正确发出回调、预加载甚至工作）。

为了规避这个问题，您可以在暂停之前将`volume`参数设置为。`0`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-04T23:21:24.230

尝试使用 onbeforeunload 停止音乐，因为当 iphone 上的 safari 正在播放音乐时，即使退出应用程序，音乐也会继续在后台播放（有点像音乐如何在后台播放）。如果你双击主页按钮，按住 Safari 图标直到出现减号按钮，然后点击减号，音乐应该停止。这是因为较旧的 iphone 可能没有运行 iOS4 或更高版本（它具有多任务处理功能，即使没有运行也可以在后台播放 safari 的音乐）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-21T12:07:27.350

正如[我在这里发布的那样，设法找到了解决方案](https://stackoverflow.com/a/14438227/401137)

利用循环来检查用户是否在网页上。存储时间。

```
var lastSeen;
var loop = function (){
    lastSeen = Date.now();
    setTimeout(loop, 50);
};
loop();

var music = document.getElementById('music');
music.addEventListener('timeupdate', function (){
    if(Date.now() - exports.lastSeen > 100){
        this.pause();
    }
}, false); 
```

这大致就是我的文件的样子。由于 timeupdate 事件会在音频元素上持续触发，如果它正在播放，我只需要检查我的循环最后一次调用的时间。如果它在 100 多毫秒前被调用，我会暂停音乐。在我测试过的 iPad 上工作起来就像一个魅力。