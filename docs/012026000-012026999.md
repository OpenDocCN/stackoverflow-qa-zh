# StackOverflow 问答 12026000-12026999

# c++ - 如何在 std::map 中存储“对象类型”？

> ID：12026003
> 
> 赞同：8
> 
> 时间：2012-08-19T11:06:43.677
> 
> 标签：c++

介绍很长，问题在最后：

* * *

假设我有一个创建接口的基类

```
class base
{
public:
  virtual ~base();
  virtual void calc( int* variables ) = 0;
} 
```

以及一些可以完成工作的继承类（这里只显示了两个）：

```
class add : public base
{
  const int a, b, c;
public:
  add( int a_, int b_, int c_ ) : a(a_), b(b_), c(c_) {}
  void calc( int* variables ) 
  {
     variables[a] = variables[b] + variables[c];
  }
}

class inc : public base
{
  const int a;
public:
  inc( int a_ ) : a(a_) {}
  void calc( int* variables ) 
  {
     variables[a]++;
  }
} 
```

最后是一些使用此构造的代码：

```
base* task[2];
task[0] = new add( 0, 1, 2 );
task[1] = new inc( 3 );
int data[4];

/* ... */

for( int i = 0; i < 2; i++ )
  task[i]->calc( data ); 
```

到目前为止，这是有效的——但它在编译时定义了我的任务。应该通过解析输入文件将其更改为运行时。假设解析已经完成，`std::string`变量`command`中是对象类型（如`add`or `inc`），a`std::vector<int> params`中是构造函数的参数。

现在我可以列出一长串

```
if( command.compare( "add" ) ) 
  task[end] = new add( params[0], params[1], params[2] );
else if( command.compare( "inc" ) ) 
  task[end] = new inc( params[0] );
else /... */ 
```

除了变得非常难以理解之外，这只是一个线性搜索。那么本着[为什么 switch 语句不能应用于字符串的精神？](https://stackoverflow.com/questions/650162/why-switch-statement-cannot-be-applied-on-strings)我想用`std::map`（或哈希映射......）替换线性搜索。

所以经过这么长的介绍，我终于可以提出这个问题了：

* * *

**如何定义和填充一个`std::map`对象的引用（？），以便我可以根据这些信息动态地在对象上创建后期？**

因此，对于上面的代码，我想做一些最终可能看起来像这样的事情：

```
// define and fill
std::map< std::sting, ???? > lookup;
lookup["add"] = add;
lookup["inc"] = inc;

/* ... */

// use:
while( linesInConfigAvailable )
{
  /* ... parse ... */
  switch( params.size() )
  {
    case 1:
      task[end] = new lookup[command]( params[0] );
      break;
    case 3:
      task[end] = new lookup[command]( params[0], params[1], params[2] );
      break;
  }
} 
```

PS：到目前为止，我的代码中不需要 RTTI。如果能一直这样就好了……

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-19T11:15:36.813

好吧，你不能。在 C++ 中，类不是对象，它们更像是一种抽象结构，仅存在于编译器编译时的工作数据中。

但是，您可以使用给定的签名创建所谓的工厂函数：

```
class A : public Base
{
public:
     static Base* Create() { return new A; }
};

class B : public Base
{
public:
     static Base* Create() { return new B; }
};

... 
```

编辑：如果“创建”功能像这样统一，您当然可以制作模板。

然后，您可以在映射中存储函数指针：

```
typedef Base* (*FactoryType)();
std::map< std::string, FactoryType >

lookup["A"] = A::Create;
lookup["B"] = B::Create; 
```

并适当地称呼他们：

```
task[end] = lookup[command](); 
```

# c - 打印链表

> ID：12026007
> 
> 赞同：0
> 
> 时间：2012-08-19T11:07:48.887
> 
> 标签：c, linked-list

由于某种原因，我无法打印整个链表。我哪里会出错？请帮忙。提前致谢。

列表的基本结构。

```
struct node
{
    int num;
    struct node *next;
};

typedef struct node *list; 
```

主功能。

```
int main()
{
    int i, j, k, l;
    list head = NULL, start = NULL, temp, p;

    printf("Enter the number of nodes in the list: ");
    scanf("%d", &k); 
```

链表的形成。

```
 for(i=0;i<k;i++)
    {
        if (i==0)
        {
            start = (list) malloc(sizeof(struct node));
            start->num = i;
            head = start;
            head->next = NULL;
        }
        else
        {   
            temp = (list) malloc(sizeof(struct node));
            temp->num = i;
            head->next = temp;
            head->next = NULL;
        }
    } 
```

打印链表。

```
 p = start;
    while(p != NULL)
    {
        printf("%d", p->num);
        p = p->next;
    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T11:11:21.980

```
 temp = (list) malloc(sizeof(struct node));
        temp->num = i;
        head->next = temp;
        head->next = NULL; 
```

您始终将新元素放置为第二个元素，然后将其删除 - 有效地使您的恒定大小列表为 1。

您可能需要设置`temp->next = NULL`（而不是`head->next`）**和**设置`element->next = temp`-`element`列表中的最后一个元素在哪里（而不是`head`）。
（另一种方法是将元素添加为 new`head`和 set `temp->next = head;`）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T11:12:28.250

你是不是错过了一些东西：

```
head->next = temp;
head->next = NULL; 
```

你正在`head`用覆盖你的下一个`NULL`。你应该有你`head`的第一点`temp`。

```
head->next = temp;   // (4) see my comment on this post for 
head = temp;         // (5) the meaning of the number
head->next = NULL;   // (6) 
```

编辑：顺便说一句，您应该重命名`head`为`current`/`last`或类似的名称。否则，可以很容易地交换`head`and的含义`start`。

# python - 尝试在开发服务器上提供 django 静态文件 - 未找到

> ID：12026010
> 
> 赞同：12
> 
> 时间：2012-08-19T11:08:27.657
> 
> 标签：python, django

我已经按照[这个问题](https://stackoverflow.com/q/9197599/344286)、[文档](https://docs.djangoproject.com/en/dev/howto/static-files/)中的说明进行操作，甚至还查看了[这个](https://stackoverflow.com/q/10644649/344286)，但到目前为止，我无法使用`python manage.py runserver`.

这些是我的（相关？）设置：

```
STATIC_ROOT '/home/wayne/programming/somesite/static'
STATICFILES_DIRS ('/home/wayne/programming/somesite/static/styles',
                  '/home/wayne/programming/somesite/static/admin') 
```

在我的 urls.py 中：

```
from django.contrib.staticfiles.urls import staticfiles_urlpatterns
# The rest of my urls here...
if settings.DEBUG:
    urlpatterns += staticfiles_urlpatterns() 
```

我的 base.html 中有以下代码

```
 <link rel="stylesheet" type="text/css" href="{% static "styles/main.css" %}">
    {% block styles %}
    {% for sheet in styles %}
    <link rel="stylesheet" type="text/css" href="{% static sheet %}">
    {% endfor %} 
```

我保证我不会产生幻觉：

```
(.env)wayne:~/programming/somesite/static$ pwd 
/home/wayne/programming/somesite/static 
(.env)wayne:~/programming/somesite/static$ ls 
admin  styles 
```

但是，当导航到`http://localhost:8000/`我的站点时缺少它的样式表，当我去时，`http://localhost:8000/static/styles/main.css`我得到`'styles/main.css' could not be found`，并试图导航到`localhost:8000/static/`，或者`localhost:8000/static/styles`它告诉我不允许目录索引。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-19T19:14:12.317

Django 对静态文件的处理仍然有些混乱，特别是在相关设置的命名方面。

简短的回答是移动你的静态文件；代替

```
/home/wayne/programming/somesite/static 
```

把它们放进去

```
/home/wayne/programming/somesite/yourapp/static 
```

（其中“yourapp”显然是您的主应用程序的名称）。

更长的答案是我认为您（可以理解）对各种设置感到困惑。`STATIC_ROOT` *仅指*静态文件在运行后**应该结束**的位置`manage.py collectstatic`。`collectstatic`在本地开发时，你不需要这个集合（因为你不应该真的需要）。无论哪种方式，`STATIC_ROOT`都应该始终引用一个空目录。

您的`STATICFILES_DIRS`设置几乎可以工作，除了您告诉 Django 有两条路径可以找到静态文件

```
/home/wayne/programming/somesite/static/styles
/home/wayne/programming/somesite/static/admin 
```

所以当你这样做时，`{% static "styles/main.css" %}`它会寻找

```
/home/wayne/programming/somesite/static/styles/styles/main.css
/home/wayne/programming/somesite/static/admin/styles/main.css 
```

并且显然不会找到它们。*可能*有效的是

```
STATICFILES_DIRS = ('/home/wayne/programming/somesite/static',) 
```

但没有必要这样做，因为您可以依赖`django.contrib.staticfiles.finders.AppDirectoriesFinder`（在[默认的 STATICFILES_FINDERS 中](https://docs.djangoproject.com/en/1.4/ref/contrib/staticfiles/#std:setting-STATICFILES_FINDERS)）并将您的静态文件移动到应用程序目录。

希望这能澄清一点。

# c# - 在表达式树中引用“this”

> ID：12026011
> 
> 赞同：2
> 
> 时间：2012-08-19T11:08:52.150
> 
> 标签：c#, expression-trees

我正在尝试 C# 中的表达式树，只是遇到了一些看似简单但也无法通过谷歌搜索的东西。如何创建引用的表达式`this`？`Expression.PropertyOrField(..., "this")`抛出异常“'this' 不是类型 [...] 的成员”。

该类`Expression`有很多方法，但在这种情况下似乎不适用，而且这不是一个搜索友好的问题......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T11:26:59.470

看来你需要[`Expression.Constant()`](http://msdn.microsoft.com/en-us/library/system.linq.expressions.expression.constant.aspx)方法。例如，您可以使用如下表达式调用类方法：

```
class Foo
{
    public void Test()
    {
        var instance = Expression.Constant(this);
        var body = Expression.Call(instance, GetType().GetMethod("ToString"));
        var exp = Expression.Lambda<Func<string>>(body);
        Console.WriteLine(exp.Compile()());
    }
} 
```

或访问实例属性：

```
class Foo
{
    public string TestProperty
    {
        get { return "It works."; }
    }

    public void Test()
    {
        var instance = Expression.Constant(this);
        var body = Expression.Property(instance, "TestProperty");
        var exp = Expression.Lambda<Func<string>>(body);
        Console.WriteLine(exp.Compile()());
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T11:19:08.647

" `this`"，在您的示例代码中，等于`...`. 您已经*拥有*对象引用。没有被调用的隐藏成员`this`或其他东西。

`this`从概念上讲，仅在实例方法的主体中才有意义。

# mysql - 为什么我的触发器不起作用？

> ID：12026015
> 
> 赞同：-1
> 
> 时间：2012-08-19T11:09:11.417
> 
> 标签：mysql, triggers

我的触发器：

```
create trigger cnt after insert on tc_contract
  for each rowbegin
    select count(*) into @num from tc_contract group by account_id where account_id = new.account_id;
    if @num >0 and @num <3 then
      update tc_account set account_status = 2 where account_id = new.account_id;
    end if;
end 
```

错误信息：

```
You have an error in your SQL syntax; check the manual that corresponds to your MySQL 
server version for the right syntax to use near 'where account_id = new.account_id;
if @num >0 and @num <3 then update tc_accou' at line 4 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T11:18:59.020

您需要将子句放在`WHERE`子句之前`GROUP BY`。

IE

```
select count(*)
into @num
from tc_contract
where account_id = new.account_id
group by account_id; 
```

# sql - SQL Server 2005 从多个表中选择

> ID：12026016
> 
> 赞同：2
> 
> 时间：2012-08-19T11:09:54.360
> 
> 标签：sql, sql-server, select, join

如何`SELECT`从 4 个不同的表中进行此查询并返回所有 4 个表中按日期排序的结果？（我需要按日期排序的最新 200 个结果）

```
SELECT * 
FROM [CPU_Benchmarks] 
JOIN [CPU_Slugs] ON CPU_Benchmarks.Id = CPU_Slugs.BenchmarkId AND [Approved] = 'true' 
ORDER BY [TimeStamp] DESC 
```

这些表非常相似

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T11:17:01.930

取决于您到底要做什么，UNION 语句可能会有所帮助，例如：

```
SELECT TOP 200 col1, col2
FROM
(
    SELECT col1, col2 FROM table1
    UNION
    SELECT col1, col2 FROM table2
    UNION
    SELECT col1, col2 FROM table3
    UNION
    SELECT col1, col2 FROM table4
) myTableAlias
ORDER BY col1 
```

你当然可以用你的连接或其他所需的逻辑来丰富它。

# php - 将下拉选择值传递给 URL

> ID：12026018
> 
> 赞同：0
> 
> 时间：2012-08-19T11:10:06.523
> 
> 标签：php, javascript, forms, url, drop-down-menu

```
<select id="langu" name="langu">
    <option value="English">English</option>
    <option value="Chinese">中国的&lt;/option>
    <option value="Korean">한국의&lt;/option>
    <option value="Vietnamese">Việt</option>
</select> 
```

以上是基于 .PHP 的一部分，基于用户所做的选择，我想将 select 的值作为`URL`表单操作的一部分传递：

```
<form name="frmLang" 
action="index2.php?r=<?php echo $rguid;?>&l=[THE DROPDOWN OPTION HERE];?>" 
method="post"> 
```

首先这可能吗？如果是这样，如何将该变量传递到 URL 而不必转到另一个页面？Javascript？（不能使用 AJAX）。

谢谢，

H。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T11:11:36.083

更改`method="post"`为隐藏输入`method="get"`并包含`$rguid`为隐藏输入：

```
<form name="frmLang" action="index2.php" method="get">
  <input type="hidden" name="r" value="<?php echo $rguid; ?>">
  <select id="langu" name="l">
        .
        .
        . 
```

# objective-c - 如果应用程序菜单变大，NSSatusItem 会被隐藏

> ID：12026019
> 
> 赞同：2
> 
> 时间：2012-08-19T11:10:28.790
> 
> 标签：objective-c, cocoa, nsstatusitem, nsstatusbar

> **可能重复：**
> [被告知何时隐藏 NSStatusItem](https://stackoverflow.com/questions/7745954/being-apprised-of-when-nsstatusitem-is-hidden)

我目前正在开发一个小型 Mac OS X 应用程序，它在状态栏中显示文本。如果有帮助，我正在使用`NSStatusItem`可变长度的。

我看到的问题是，当活动应用程序的菜单太大时，它会从右到左隐藏状态项。

![这里有足够的空间来显示我的状态项](../Images/389f40eb2451d0f83c0a13ba71e0af76.png)

如果我现在切换到具有更大菜单的另一个应用程序，我的状态项将被隐藏，如您在此屏幕截图中所见。

![没有足够的空间来显示我的状态项](../Images/d55ab06af5d023a891b009613175d04e.png)

我已经尝试通过订阅[此处](https://stackoverflow.com/questions/11504696/get-notification-of-nsstatusitem-frame-change)`NSWindowDidMoveNotification`建议的来调整文本长度，但它只触发一次，我调整文本长度的代码没有任何效果。

我的问题是：是否有任何其他通知可以让我收听以调整我的状态项？

提前致谢！

**更新：**让我补充一点，我的应用程序是一个代理应用程序，它在运行时不会显示在 Dock 中，如果这有影响的话。

# php - Doctrine 2 和 Propel 1.6 的弱点和力量

> ID：12026020
> 
> 赞同：13
> 
> 时间：2012-08-19T11:10:38.843
> 
> 标签：php, doctrine-orm, propel

我想知道 Doctrine 2 和 Propel 1.6 的力量和弱点是什么。例如，Doctrine 2 确实是用户友好的，但如果您想超越墨守成规，则会限制您。教义 2 文档缺乏更新...

如果可能的话，您可以分享 Doctrine2 在哪些方面做得很好或 Propel 在哪些方面是完美的经验。

提前致谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-19T22:42:06.260

**已编辑**

我刚刚[加入聊天](https://chat.stackoverflow.com/transcript/message/5010192#5010192)以了解有关此问题的一些见解。让我们做一份简历：

![单一职责原则](../Images/dc203cc67c76643bbf107bc7a8437bb8.png)

*   只有 Doctrine 2.x 使用了一些 DataMapper 的想法
*   开发者仍然认为**ActiveRecord**是神仙的珍馐
*   无法与 DB 分开测试
*   依赖注入敌人

请参阅：[https ://softwareengineering.stackexchange.com/questions/119352/does-the-activerecord-pattern-follow-encourage-the-solid-design-principles](https://softwareengineering.stackexchange.com/questions/119352/does-the-activerecord-pattern-follow-encourage-the-solid-design-principles)

**描述**

Propel 基于[ActiveRecord](http://martinfowler.com/eaaCatalog/activeRecord.html)模式，而 Doctrine 则使用[数据映射器](http://martinfowler.com/eaaCatalog/dataMapper.html)和[虚拟代理](http://martinfowler.com/eaaCatalog/lazyLoad.html)。

当我第一次使用 PHP 了解 OOP 时，ActiveRecord 被广泛使用，这主要是由于 Ruby On Rails 的影响。然后开发人员开始意识到 ActiveRecord 是一个有限的概念，特别是对于大型应用程序。

为什么？

自己想想，是不是域模型对象有责任知道如何自救？甚至将其数据转换为 JSON 格式？

答案是否定的，因为它违反了[单一职责原则 (SRP)](http://en.wikipedia.org/wiki/Single_responsibility_principle)和域[凝聚力](http://en.wikipedia.org/wiki/Cohesion_%28computer_science%29)。

> Martin 将责任定义为改变的理由，并得出结论认为一个类或模块应该有一个，而且只有一个改变的理由。

假设您有一个`Author`实体。你会因为什么原因改变它？好吧，如果使用 ActiveRecord 实现，除了需要更改对象属性本身之外，如果您实现特定于该对象的新类型的持久性，您还需要更改它，就像我们在实现缓存策略时所做的那样。

另外，假设 Propel 库改变了模型基类的方法（只是一个简单的例子）。现在您有理由更改应用程序的其他部分，因为您的实体与 ORM 基类紧密耦合。换句话说，你的领域模型对象不应该依赖于每个 ORM 框架的细节。您应该能够更改您的 ORM，让您的域模型对象保持不变。

所以活动记录需要你的领域模型知道持久层的存在。有**两个责任**。

使用 Active Record 时最糟糕的事情是你“搞砸”了你的域模型继承层次结构。如果你有一个`Human`实体为了持久化目的而扩展了一个基类，然后一个`Man`实体扩展了该`Human`实体，如果由于某种原因你有另一个`Woman`实体扩展了该`Human`实体而没有持久化的能力，那么你将打破基类建立的[契约](http://en.wikipedia.org/wiki/Design_by_contract)这表明每个实体都需要知道如何自救。你将无法做到`$woman->save()`。

[严格来说，这也导致了对里氏替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)的违反

**最后，停止使用 ActiveRecord**的最终原因。查看以下代码，您将能够看到 ORM 在事务期间将对象映射到存储的责任已委托给域模型实体：

```
class Book extends BaseBook
{
  public function postSave(PropelPDO $con)
  {
    $this->updateNbBooks($con);
  }

  public function postDelete(PropelPDO $con)
  {
    $this->updateNbBooks($con);
  }

  public function updateNbBooks(PropelPDO $con)
  {
    $author = $this->getAuthor();
    $nbBooks = $author->countBooks($con);
    $author->setNbBooks($nbBooks);
    $author->save($con);
  }
} 
```

> [http://www.propelorm.org/documentation/06-transactions.html](http://www.propelorm.org/documentation/06-transactions.html)您必须在每次保存或删除 Book 对象时更新此新列；这将使写查询慢一点，但读查询快得多。幸运的是，Propel 模型对象支持 save() 和 delete() 方法的前钩子和后钩子，所以这很容易实现

因此，在单个模型实体中，您拥有：

1.  持久性
2.  拦截过滤器模式，用于保存/删除前后
3.  验证（[http://www.propelorm.org/documentation/05-validators.html](http://www.propelorm.org/documentation/05-validators.html)）
4.  缓存
5.  你去...

# php - 如何使用php用表单替换文本文件数据？

> ID：12026021
> 
> 赞同：0
> 
> 时间：2012-08-19T11:11:03.707
> 
> 标签：php

我有一个文本文件。现在我想用 PHP 中的表单（POST 或 GET）替换文本数据。我的文本文件就是这样-

```
"
Mr.A                         
87362                
Mr.B           
87427         
Mr.C          
85423
" 
```

现在如果我想通过表单提交 POST 或 GET 方法将 Mr.A 更改为 Mr.H，我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T11:15:42.703

每当您必须更改文本文件时，您总是必须将其读入内存，进行字符串操作并将整个内容再次写入文件。

这解释了很多[用 PHP 覆盖文件中的行](https://stackoverflow.com/questions/235604/overwrite-line-in-file-with-php)

假设您可以从 POST 请求中获取变量，您应该能够按照上述链接中的解决方案来帮助解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T11:22:47.740

这是代码

```
 <?php  
  $n="filename.txt";
  $f=fopen($n,'r');
  $c=fread($f,100);
  $final = str_replace("Mr.A ", "Mr.".$_POST['field'], $c);
  fclose($f);
  $f=fopen($n,'w');
  fwrite($f,$final);
  fclose($f);
  ?> 
```

# iphone - Corona Lua - Facebook 发布视频

> ID：12026022
> 
> 赞同：2
> 
> 时间：2012-08-19T11:11:07.270
> 
> 标签：iphone, facebook, lua, coronasdk

我正在使用 Corona 并已集成我的应用程序以使用 FB Graph Api 共享消息和照片。有谁知道如何在 Corona 中发布视频。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:29:29.733

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T12:22:01.550

根据[http://developers.facebook.com/docs/reference/api/，Facebook](http://developers.facebook.com/docs/reference/api/)上没有上传视频的写入权限。

您可以使用 facebook.request("me/photos", "POST", attachment ) 发布照片，但没有“me/video”或类似的东西，主要是因为 Facebook 出于某种原因不想要它。

# css - twitter-bootstrap 轮播中的表格？

> ID：12026029
> 
> 赞同：3
> 
> 时间：2012-08-19T11:12:28.967
> 
> 标签：css, twitter-bootstrap, html-table, css-transitions, carousel

我正在玩backbone.js，并且正在考虑滥用bootstrap-carousel插件来使视图转换更加闪亮。

当从一个包含表格的项目过渡到另一个项目时，幻灯片进行得很好。但是，在转换*到*表格时，表格直到幻灯片完成后才会出现。

有关演示，请参阅此[jsFiddle](http://jsfiddle.net/RichardTowers/XtWVQ/)。

```
<div id="myCarousel" class="carousel slide">
  <!-- Carousel items -->
  <div class="carousel-inner">
    <div class="active item">
      <table class="table table-bordered table-striped">
        <tr>
          <th>Key</th>
          <th>Value</th>
        </tr>
        <tr>
          <td>bootstrap</td>
          <td>Awesome</td>
        </tr>
      </table>
    </div>
    <div class="item">Second</div>
    <div class="item">Third</div>
  </div>
  <!-- Carousel nav -->
  <a class="carousel-control left" href="#myCarousel" data-slide="prev">&lsaquo;</a>
  <a class="carousel-control right" href="#myCarousel" data-slide="next">&rsaquo;</a>
</div>​ 
```

```
$('.carousel').carousel({
  interval: false
});​ 
```

这是我做错了什么，这些转换如何工作的必然结果还是引导程序的一个小错误？

（可在 Chrome 21 和 22、Firefox 14 和 Safari 5.1.7 中重现）

截屏：

![到表转换的一半](../Images/ae38c5100f6dc95ca5853bac4f211818.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T19:59:52.897

如果您将 的高度设置为与您的高度`.carousel-inner`相同，`#myCarousel`怎么样？

[http://jsfiddle.net/9ga5t/](http://jsfiddle.net/9ga5t/)

```
#myCarousel, 
.carousel-inner {
  height: 300px;
} 
```

# asp.net-mvc - mvc - request.params 获取异常的第一个“get”结果，第二个“get”没问题

> ID：12026032
> 
> 赞同：0
> 
> 时间：2012-08-19T11:14:16.020
> 
> 标签：asp.net-mvc, exception, http-post, dangerous-request

mvc - request.params 获取异常的第一个“get”结果，第二个“get”是可以的。我有一个页面，其中有一个带有 xml 文本的字段。我正在使用验证=假。但是，在控制器中的 post 方法上，我试图获取 requset.params 并且我收到“从客户端检测到潜在危险的 Request.Form 值”的错误。经过一些挖掘和调试后，我看到我第一次尝试获取 request.params 时出现异常，但是当我第二次尝试获取它时一切正常。

这是我用来避免 xml 问题的过滤器（我将其转换为二进制数据并清空 xml 字符串字段）：

```
 public class RestAPIAttribute : ActionFilterAttribute
    {
        public override void OnActionExecuting(ActionExecutingContext filterContext)
        {
                 ((SimulationModel)filterContext.ActionParameters["model"]).Data = CommonConverters.StringToByteArray(((SimulationModel)filterContext.ActionParameters["model"]).StringData);
            ((SimulationModel)filterContext.ActionParameters["model"]).StringData = string.Empty;

            base.OnActionExecuting(filterContext);
        }
    } 
```

这是发布方法：

```
 [HttpPost]
    [ValidateInput(false)]
    [RestAPIAttribute]
    public ActionResult EditSimulation(Guid id, SimulationModel model)
    {
        try
        {
            model.RelationModel = new RelationModel(false, this.Resource("Simulations.AddToObjects"), "SimulationToObjects", id, sessionId, Request.Params, new List<ObjectTypes>() { ObjectTypes.Entity, ObjectTypes.EntityType, ObjectTypes.Universe });
        }
        catch (Exception ex)
        {
            Logger.LogException(ex);
        }

        /* more code here*/

        return View(newModel);
    } 
```

现在，如您所见，RelationModel 的构造函数之一有一个 request.param 参数，这给了我问题。

我目前对这个问题的解决方法只是调用它两次（但我正在寻找更好的解决方案或至少一个解释）：

```
 [HttpPost]
    [ValidateInput(false)]
    [RestAPIAttribute]
    public ActionResult EditSimulation(Guid id, SimulationModel model)
    {
        try
        {
             try
            {
                model.RelationModel = new RelationModel(false, this.Resource("Simulations.AddToObjects"), "SimulationToObjects", id, sessionId, Request.Params, new List<ObjectTypes>() { ObjectTypes.Entity, ObjectTypes.EntityType, ObjectTypes.Universe });
            }
            catch
            {
                model.RelationModel = new RelationModel(false, this.Resource("Simulations.AddToObjects"), "SimulationToObjects", id, sessionId, Request.Params, new List<ObjectTypes>() { ObjectTypes.Entity, ObjectTypes.EntityType, ObjectTypes.Universe });
            }
        }
        catch (Exception ex)
        {
            Logger.LogException(ex);
        }

        /* more code here*/

        return View(newModel);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T12:01:40.947

如果这是 ASP.NET MVC 3+，您可以`[AllowHtml]`在包含 XML 的模型属性上使用该属性。这将仅禁用此属性而不是整个请求的请求验证：

```
public class SimulationModel 
{ 
    [AllowHtml]
    public string StringData { get; set; } 
} 
```

接着：

```
[HttpPost]
public ActionResult EditSimulation(Guid id, SimulationModel model)
{
    // you could directly use model.StringData here without any 
    // encoding needed

    return View(newModel);
} 
```

如果这是在 ASP.NET 4.0 中运行的 ASP.NET MVC 2 应用程序，除了使用`[ValidateInput(false)]`属性装饰控制器操作之外，您可能需要在 web.config 中添加以下内容：

```
<httpRuntime requestValidationMode="2.0"/> 
```

如果它是 ASP.NET MVC 3 应用程序，则无需将此行放在 web.config 中即可使用该`[ValidateInput(false)]`属性。

# c# - WinRT Windows 8 RTM 中的 DateTime 解析错误？

> ID：12026034
> 
> 赞同：2
> 
> 时间：2012-08-19T11:14:20.557
> 
> 标签：c#, datetime, windows-8, windows-runtime, .net-4.5

升级到 Windows 8 RTM 后，我的一些日期时间解析代码已经停止工作。我已经使用标准控制台应用程序复制了这个：

```
CultureInfo provider;

provider = new CultureInfo("en-US");

string testDate = "1/1/2012";

DateTime date = DateTime.MinValue;
if (DateTime.TryParseExact(testDate, 
      CultureInfo.CurrentCulture.DateTimeFormat.ShortDatePattern,  // (dd/MM/yyyy)
      provider,
      DateTimeStyles.None,
      out date))
    Console.WriteLine("Date: {0}", date);
else
    Console.WriteLine("Can't parse date: {0} / {1}", testDate, date);

Console.ReadLine(); 
```

输出：`Can't parse date: 1/1/2012 ...`

我也尝试过将文化信息设为“eb-GB”（因为它对给定格式没有影响）。 **但是**，如果我将输入日期更改为`01/01/2012`，它工作正常。

.net 4.5 DateTime 框架中是否发生了影响这一点的变化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T11:23:17.827

您需要更改`ShortDatePattern`以使用来自所选提供者的那个，而不是`CurrentCulture`.

```
DateTime date = DateTime.MinValue;
if (DateTime.TryParseExact(testDate, 
      provider.DateTimeFormat.ShortDatePattern, // Change this line
      provider,
      DateTimeStyles.None,
      out date))
    Console.WriteLine("Date: {0}", date);
else
    Console.WriteLine("Can't parse date: {0} / {1}", testDate, date); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T11:34:49.433

你检查过`ShortDatePattern`你使用的是真的`"dd/MM/yyyy"`吗？也许`CurrentCulture`是你没想到的。

除此之外，`"d/M/yyyy"`如果`"dd/MM/yyyy"`您使用它们来*格式化*您的`DateTime`. 也许*解析*现在变得更加严格并反映了和`DateTime`之间的区别？`"d/M/yyyy"``"dd/MM/yyyy"`

# android - 无法显示 android 搜索对话框

> ID：12026035
> 
> 赞同：1
> 
> 时间：2012-08-19T11:14:25.800
> 
> 标签：android, search, dialog

我是android的新手，我正在创建一个测试程序来测试`search dialog`android。这是**searchable.xml**配置文件

```
<?xml version="1.0" encoding="utf-8"?>
<searchable 
      xmlns:android="http://schemas.android.com/apk/res/android" 
   android:label="Search"
   android:hint="Type text to search">
</searchable> 
```

这是**清单**文件

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="luan.com.bk"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity android:name=".SearchActivity" >
            <intent-filter>
                <action android:name="android.intent.action.SEARCH" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>

            <meta-data
                android:name="android.app.searchable"
                android:resource="@xml/searchable" />
        </activity>

        <activity
            android:name=".TestActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

            <meta-data
                android:name="android.app.default_searchable"
                android:value=".SearchActivity" />
        </activity>
    </application>
</manifest> 
```

这是请求搜索的**searchActivity.java**

```
 package luan.com.bk;

import android.app.Activity;
import android.os.Bundle;

public class SearchActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
    }
} 
```

这是**testActivity.java**初始化搜索对话框

```
 package luan.com.bk;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.Button;

public class TestActivity extends Activity {
    /** Called when the activity is first created. */

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }
} 
```

但是当我在android模拟器上按搜索键按钮时，搜索栏不显示，我怎么了？请帮忙。对不起，因为我的英语不好。

# c++ - 警告类成员自初始化

> ID：12026039
> 
> 赞同：6
> 
> 时间：2012-08-19T11:15:35.410
> 
> 标签：c++, gcc, initialization, warnings, compiler-options

看看这段 C++ 代码：

```
class Foo
{
    int a;

    public: Foo(int b): a(a) {}
}; 
```

显然，开发人员打算`a`用`b`而不是`a`自己进行初始化，这是一个很难发现的错误。

Clang++ 会警告这个可能的错误，而 GCC 不会，即使启用了额外的警告：

```
$ clang++ -c init.cpp 
init.cpp:5:27: warning: field is uninitialized when used here [-Wuninitialized]
    public: Foo(int b): a(a) {}
                        ^

$ g++ -Wall -Wuninitialized -Winit-self -c init.cpp 
$ 
```

是否有机会为 g++ 启用相同的输出？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-19T11:28:10.910

使用更新的 gcc :-) 对我来说似乎工作正常：

```
stieber@gatekeeper:~$ g++ -Wall -Wuninitialized -Winit-self -c Test.cpp
Test.cpp: In constructor ‘Foo::Foo(int)’:
Test.cpp:5:9: warning: ‘Foo::a’ is initialized with itself [-Wuninitialized]

stieber@gatekeeper:~$ gcc --version
gcc (Debian 4.7.1-2) 4.7.1 
```

# javascript - 当我移动我的three.js-referring html-file时，three.js停止工作

> ID：12026043
> 
> 赞同：0
> 
> 时间：2012-08-19T11:15:52.897
> 
> 标签：javascript, three.js

这很奇怪。。

我在我的目录'brick'中下载了three.js：

> git 克隆[https://github.com/mrdoob/three.js.git](https://github.com/mrdoob/three.js.git)

这会产生一个子目录：

```
brick/three.js/ 
```

当我去

```
brick/three.js/examples 
```

并在 Firefox 中打开文件

```
brick/three.js/examples/webgl_geometry_cube.html 
```

一个漂亮的旋转立方体出现了。然后当我将它（即brick/three.js/examples/webgl_geometry_cube.html）复制到目录'brick'并相应地更改新brick/webgl_geometry_cube.html中的three.min.js引用时，brick/webgl_geometry_cube。 html 不起作用 - 当我在 Firefox 中打开它时，没有立方体出现。

让我更具体地说明 webgl_geometry_cube.html 中的three.min.js 引用。brick/three.js/examples/webgl_geometry_cube.html 的顶部如下所示：

```
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>three.js webgl - geometry - cube</title>
        <meta charset="utf-8">
        <style>
            body {
                margin: 0px;
                background-color: #000000;
                overflow: hidden;
            }
        </style>
    </head>
    <body>

        <script src="../build/three.min.js"></script>

        <script>

            var camera, scene, renderer;
            var mesh; 
```

当我将它复制到

```
brick/webgl_geometry_cube.html 
```

我换行

```
<script src="../build/three.min.js"></script> 
```

到：

```
<script src="three.js/build/three.min.js"></script> 
```

我通过打开来验证这个新参考确实有效

```
brick/webgl_geometry_cube.html 
```

在 Firefox 中，选择“查看源代码”，并在源代码中遵循对 three.min.js 的引用。如果我看到three.min.js（我就是）的源代码，我很高兴。

但是为什么在 Firefox 中打开移动的文件时没有立方体旋转呢？我很困惑。webgl_geometry_cube.html 中似乎没有任何其他依赖于路径的引用。webgl_geometry_cube.html 的完整源代码可以在这里看到：

[Github 上的 webgl_geometry_cube.html](https://github.com/mrdoob/three.js/blob/master/examples/webgl_geometry_cube.html)

另外，我该如何调试呢？我可以对代码进行某种单步执行，以查看两个文件在执行过程中的不同之处吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T13:30:28.177

原来在 webgl_geometry_cube.html 中还有一个我没有发现的引用：文件 crate.gif 在第 34 行被引用，当然这个引用也应该更新以反映 crate.gif 的新相对位置：

```
three.js/examples/textures/crate.gif 
```

此解决方案由用户[maenu 提供](https://stackoverflow.com/users/656878/maenu)。谢谢你，兄弟..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T20:31:36.980

该示例使用纹理，因此您还需要`textures/crate.gif`在 JavaScript 中调整路径，否则找不到纹理。

# python - 垃圾回收后保留循环引用

> ID：12026045
> 
> 赞同：3
> 
> 时间：2012-08-19T11:16:01.440
> 
> 标签：python, garbage-collection, weak-references, circular-reference

```
import weakref
import gc

class MyClass(object):
    def refer_to(self, thing):
        self.refers_to = thing

foo = MyClass()
bar = MyClass()
foo.refer_to(bar)
bar.refer_to(foo)
foo_ref = weakref.ref(foo)
bar_ref = weakref.ref(bar)
del foo
del bar
gc.collect()
print foo_ref() 
```

我希望`foo_ref`并`bar_ref`保留对 和 的弱引用，`foo`只要`bar`它们相互引用^*，但这会打印`None`. 如何防止垃圾收集器在引用周期内收集某些对象？

`bar`应该在此代码中进行垃圾收集，因为它不再是`foo`-`bar`引用循环的一部分：

```
baz = MyClass()
baz.refer_to(foo)
foo.refer_to(baz)
gc.collect() 
```

^(*[我意识到阻止循环引用被垃圾收集似乎毫无意义，但我的用例需要它。我有一堆对象，它们以类似 web 的方式相互引用，还有`WeakValueDictionary`一个对束中的每个对象保持弱引用的对象。我只希望在该组中的一个对象被孤立时进行垃圾收集，即当该组中没有其他对象引用它时。])

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T12:11:20.360

*通常*使用弱引用意味着您无法阻止对象被垃圾收集。

但是，您可以使用一个技巧来防止*引用循环中的对象*被垃圾收集：在这些对象上定义一个[`__del__()`方法](http://docs.python.org/reference/datamodel.html#object.__del__)。

从[`gc`模块文档](http://docs.python.org/library/gc.html#gc.garbage)：

> **gc.垃圾**
> 
> 收集器发现无法访问但无法释放的对象列表（无法收集的对象）。默认情况下，此列表仅包含具有`__del__()`方法的对象。具有 `__del__()`方法并且是引用循环一部分的对象会导致整个引用循环无法收集，包括不一定在循环中但只能从循环中访问的对象。Python 不会自动收集此类循环，因为通常 Python 无法猜测运行循环的安全顺序`__del__()`方法。如果您知道安全顺序，则可以通过检查垃圾列表来强制执行该问题，并由于列表中的对象而显式中断循环。请注意，由于位于垃圾列表中，这些对象仍然保持活动状态，因此它们也应该从垃圾中删除。例如，在中断循环后，`del gc.garbage[:]`清空列表。通常最好通过不创建包含具有`__del__()`方法的对象的循环来避免该问题，并且在这种情况下可以检查垃圾以验证没有创建此类循环。

当您定义`MyClass`如下：

```
class MyClass(object):
    def refer_to(self, thing):
        self.refers_to = thing
    def __del__(self):
        print 'Being deleted now, bye-bye!' 
```

然后您的示例脚本打印：

```
<__main__.MyClass object at 0x108476a50> 
```

但注释掉其中一个`.refer_to()`调用会导致：

```
Being deleted now, bye-bye!
Being deleted now, bye-bye!
None 
```

换句话说，通过简单地定义一个`__del__()`方法，我们防止了引用循环被垃圾收集，但是任何孤立的对象*都*被删除了。

请注意，为了使它起作用，您需要循环引用；无论如何，对象图中*不*属于参考圆的任何对象都将被剔除。

# python - OpenID 单一用户名

> ID：12026046
> 
> 赞同：1
> 
> 时间：2012-08-19T11:16:11.727
> 
> 标签：python, django, openid, single-sign-on, registration

我在单个 django 代码库下创建了一个 django 多站点，其中每个站点都有自己的域和自己的数据库。我使用**OpenID**进行登录/注册。

我的问题是：当用户通过 OpenID 注册时，他需要为每个站点创建一个用户名。为什么？

有没有办法为 stackexchange 等所有网站维护*一个*用户**名**？

 *任何帮助表示赞赏！谢谢！*

# ios - IOS 应用程序 - 从后台模式重新打开应用程序

> ID：12026047
> 
> 赞同：1
> 
> 时间：2012-08-19T11:16:29.863
> 
> 标签：ios, cocoa-touch

有没有办法从后台模式重新打开我的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T11:32:47.710

不可以。无法自动打开应用程序。但是，您可以使用[通知](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194-CH1-SW1)让用户了解与您的应用相关的某些事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T11:54:25.970

从技术上讲，它实际上是**可能的**，但仅限于越狱设备。使用 SpringBoardServices 框架中的以下函数：

```
SBSLaunchApplicationWithIdentifier(CFSTR("com.mycompany.bundleid"), NO); 
```

在非越狱设备上，这是不可能的。

# symfony - 如何在 symfony 2 中创建一个接受带逗号或句点的数字的数字字段

> ID：12026050
> 
> 赞同：5
> 
> 时间：2012-08-19T11:16:56.170
> 
> 标签：symfony, decimal

我有一个带有十进制字段的应用程序，例如：

```
/**
 * @var decimal $amount
 *
 * @ORM\Column(name="amount", type="decimal", scale="2")
 */
private $amount; 
```

我希望表单接受格式为“3,4”或“3.4”的数字。

如果我输入“3.4”，应用程序保存在数据库“3.4”中，如果我输入“3,4”，应用程序保存在数据库“34”中（是的，没有逗号，也没有显示验证错误！）。

（这是一个已知的 symfony 错误：[https](https://github.com/symfony/symfony/issues/2059) ://github.com/symfony/symfony/issues/2059 ）

**那么，我如何接受带逗号和小数点的数字？**

（我已经尝试在 DataTrasformer 中用点替换逗号，但 DataTransformer 采用已经标准化的数字。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T13:48:56.080

我找到了一个使用带有 appendClientTransformer 的 DataTransformer 的解决方法，这里是片段：[https ://gist.github.com/3394880](https://gist.github.com/3394880)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-21T03:23:58.163

我遇到了同样的问题，我决定在没有语言环境格式化程序的情况下制作自己的数字字段。这是我想出的变压器： [https ://gist.github.com/3411067](https://gist.github.com/3411067)

注意：我必须做的一件事是抛出[TransformationFailedException](https://github.com/symfony/Form/blob/v2.0.16/Form.php#L530)以获得正确的验证。

# c++ - stl:map 插入值时出错

> ID：12026052
> 
> 赞同：3
> 
> 时间：2012-08-19T11:17:19.497
> 
> 标签：c++, std

套接字映射定义：

```
map<unsigned char[6],RawSocket> sockets_; 
```

为套接字映射设置值：

```
RawSocket tmp(ifcName,newSocketsIt->src_mac_);
sockets_[newSocketsIt->src_mac_] = tmp; 
```

原始套接字定义：

```
class RawSocket{
public:
    RawSocket(string ifcName,const unsigned char dstMac[6]);
} 
```

**我不想有 RawSocket 的默认构造函数。** 错误是：

```
/usr/include/c++/4.6/bits/stl_map.h: In member function ‘std::map<_Key, _Tp, _Compare, _Alloc>::mapped_type& std::map<_Key, _Tp, _Compare, _Alloc>::operator[](const key_type&) [with _Key = unsigned char [6], _Tp = RawSocket, _Compare = std::less<unsigned char [6]>, _Alloc = std::allocator<std::pair<const unsigned char [6], RawSocket> >, std::map<_Key, _Tp, _Compare, _Alloc>::mapped_type = RawSocket, std::map<_Key, _Tp, _Compare, _Alloc>::key_type = unsigned char [6]]’:
../sockets_container.cpp:18:34:   instantiated from here
/usr/include/c++/4.6/bits/stl_map.h:453:11: error: no matching function for call to ‘RawSocket::RawSocket()’
/usr/include/c++/4.6/bits/stl_map.h:453:11: note: candidates are:
/root/workspace/networkutils/src/raw_socket.h:23:2: note: RawSocket::RawSocket(std::string, const unsigned char*)
/root/workspace/networkutils/src/raw_socket.h:23:2: note:   candidate expects 2 arguments, 0 provided
/root/workspace/networkutils/src/raw_socket.h:21:7: note: constexpr RawSocket::RawSocket(const RawSocket&)
/root/workspace/networkutils/src/raw_socket.h:21:7: note:   candidate expects 1 argument, 0 provided
/root/workspace/networkutils/src/raw_socket.h:21:7: note: constexpr RawSocket::RawSocket(RawSocket&&)
/root/workspace/networkutils/src/raw_socket.h:21:7: note:   candidate expects 1 argument, 0 provided 
```

像这样插入：

```
sockets_.insert(pair<unsigned char[6],RawSocket>(newSocketsIt->src_mac_,tmp)); 
```

将失败并出现此错误：

```
/usr/include/c++/4.6/bits/stl_pair.h: In constructor ‘std::pair<_T1, _T2>::pair(const _T1&, _U2&&) [with _U2 = RawSocket&, <template-parameter-2-2> = void, _T1 = unsigned char [6], _T2 = RawSocket]’:
../sockets_container.cpp:19:78:   instantiated from here
/usr/include/c++/4.6/bits/stl_pair.h:126:45: error: array used as initializer
/usr/include/c++/4.6/bits/stl_pair.h: In constructor ‘std::pair<_T1, _T2>::pair(std::pair<_U1, _U2>&&) [with _U1 = unsigned char [6], _U2 = RawSocket, _T1 = const unsigned char [6], _T2 = RawSocket]’:
/usr/include/c++/4.6/bits/stl_tree.h:139:49:   instantiated from ‘std::_Rb_tree_node<_Val>::_Rb_tree_node(_Args&& ...) [with _Args = {std::pair<unsigned char [6], RawSocket>}, _Val = std::pair<const unsigned char [6], RawSocket>]’
/usr/include/c++/4.6/ext/new_allocator.h:114:4:   instantiated from ‘void __gnu_cxx::new_allocator<_Tp>::construct(__gnu_cxx::new_allocator<_Tp>::pointer, _Args&& ...) [with _Args = {std::pair<unsigned char [6], RawSocket>}, _Tp = std::_Rb_tree_node<std::pair<const unsigned char [6], RawSocket> >, __gnu_cxx::new_allocator<_Tp>::pointer = std::_Rb_tree_node<std::pair<const unsigned char [6], RawSocket> >*]’
/usr/include/c++/4.6/bits/stl_tree.h:405:8:   instantiated from ‘std::_Rb_tree_node<_Val>* std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::_M_create_node(_Args&& ...) [with _Args = {std::pair<unsigned char [6], RawSocket>}, _Key = unsigned char [6], _Val = std::pair<const unsigned char [6], RawSocket>, _KeyOfValue = std::_Select1st<std::pair<const unsigned char [6], RawSocket> >, _Compare = std::less<unsigned char [6]>, _Alloc = std::allocator<std::pair<const unsigned char [6], RawSocket> >, std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::_Link_type = std::_Rb_tree_node<std::pair<const unsigned char [6], RawSocket> >*]’
/usr/include/c++/4.6/bits/stl_tree.h:971:66:   instantiated from ‘std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::iterator std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::_M_insert_(std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::_Const_Base_ptr, std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::_Const_Base_ptr, _Arg&&) [with _Arg = std::pair<unsigned char [6], RawSocket>, _Key = unsigned char [6], _Val = std::pair<const unsigned char [6], RawSocket>, _KeyOfValue = std::_Select1st<std::pair<const unsigned char [6], RawSocket> >, _Compare = std::less<unsigned char [6]>, _Alloc = std::allocator<std::pair<const unsigned char [6], RawSocket> >, std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::iterator = std::_Rb_tree_iterator<std::pair<const unsigned char [6], RawSocket> >, std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::_Const_Base_ptr = const std::_Rb_tree_node_base*]’
/usr/include/c++/4.6/bits/stl_tree.h:1285:64:   instantiated from ‘std::pair<std::_Rb_tree_iterator<_Val>, bool> std::_Rb_tree<_Key, _Val, _KeyOfValue, _Compare, _Alloc>::_M_insert_unique(_Arg&&) [with _Arg = std::pair<unsigned char [6], RawSocket>, _Key = unsigned char [6], _Val = std::pair<const unsigned char [6], RawSocket>, _KeyOfValue = std::_Select1st<std::pair<const unsigned char [6], RawSocket> >, _Compare = std::less<unsigned char [6]>, _Alloc = std::allocator<std::pair<const unsigned char [6], RawSocket> >]’
/usr/include/c++/4.6/bits/stl_map.h:526:64:   instantiated from ‘std::pair<typename std::_Rb_tree<_Key, std::pair<const _Key, _Tp>, std::_Select1st<std::pair<const _Key, _Tp> >, _Compare, typename _Alloc::rebind<std::map<_Key, _Tp, _Compare, _Alloc>::value_type>::other>::iterator, bool> std::map<_Key, _Tp, _Compare, _Alloc>::insert(_Pair&&) [with _Pair = std::pair<unsigned char [6], RawSocket>, <template-parameter-2-2> = void, _Key = unsigned char [6], _Tp = RawSocket, _Compare = std::less<unsigned char [6]>, _Alloc = std::allocator<std::pair<const unsigned char [6], RawSocket> >, typename std::_Rb_tree<_Key, std::pair<const _Key, _Tp>, std::_Select1st<std::pair<const _Key, _Tp> >, _Compare, typename _Alloc::rebind<std::map<_Key, _Tp, _Compare, _Alloc>::value_type>::other>::iterator = std::_Rb_tree_iterator<std::pair<const unsigned char [6], RawSocket> >]’
../sockets_container.cpp:19:79:   instantiated from here
/usr/include/c++/4.6/bits/stl_pair.h:137:40: error: array used as initializer 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T11:22:19.003

```
sockets_[newSocketsIt->src_mac_] = tmp; 
```

`map`'s`operator[]`正在尝试使用该键默认构造一个元素，因为它还没有在地图中。`tmp`然后它将通过分配给它`operator=`。您要么需要提供默认构造函数，`RawSocket`要么[`std::map::insert()`](http://en.cppreference.com/w/cpp/container/map/insert)改为使用；

你得到一个错误，`insert`因为 unsigned[6] 和`src_mac_`都是数组类型，你不能用另一个数组初始化一个数组（当你在做时会发生这种情况`std::pair`）。考虑切换到 std::array 或 std::vector 之类的容器，或者将数组包装在您自己的结构中并将其用作键。

快速解决方法是：

```
struct Arr6 {
    unsigned char array[6];
};

std::map <Arr6, RawSocket> sockets_; 
```

也将 的定义更改`src_mac_`为`Arr6`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T11:29:08.140

我不确定你想在这里知道什么....但是如果你会写

```
class RawSocket{
public:
    RawSocket(){}
    RawSocket(string ifcName,const unsigned char dstMac[6]);
} 
```

错误会消失

# sass - Susy grid - 任何（简单？）方法可以使“列”具有相同的高度？

> ID：12026053
> 
> 赞同：1
> 
> 时间：2012-08-19T11:17:21.307
> 
> 标签：sass, compass-sass, susy-compass

用 Susy/sass/haml 等弄湿我的脚（使用调整后的中间人 - 来自 master 分支的最新 susy）

在 grid.css.scss 中有这个

```
@import 'susy';

$total-columns  : 8;
$column-width   : 4em;
$gutter-width   : 0em;
$grid-padding   : $gutter-width;

$break-max      : 12;

$container-style: magic;

// Container
.page {
  @include container($total-columns, $break-max);
}

// Layout

.header {
  @include at-breakpoint($break-max) {
    @include pad(1,1);
  }
}

.pagenav {
  clear: both;
  @include at-breakpoint($break-max) {
    @include pad(1,1);
  }
}

.main {
  clear: both; 
  .main-left {  
    @include span-columns($total-columns omega);
    @include at-breakpoint(10) {
      @include span-columns(7);  
    } 
  }
  .main-right {  
    @include span-columns($total-columns omega);  
    @include at-breakpoint(10) {
      @include span-columns(3 omega);  
    }        
  }
  @include at-breakpoint($break-max) {
    @include pad(1,1);
  }
}

.footer {
  clear: both;
  @include at-breakpoint($break-max) {
    @include pad(1,1);
  }
} 
```

此片段来自 site.css.scss

```
.main {
  background-color: #eee;
}

.main-left {
  background-color: #fff;
}

.main-right {
  background-color: #eee;
} 
```

.body 背景是黑色的...

现在，当 main-left 中的内容大于 main-right 时，我会在右下角看到一个黑色方块...无论如何我都可以使右下角 #eee iow main-right 与 main-left 具有相同的高度（动态）-或者有.main 背景来申请......？？？

谢谢

彼得

PS拥有更多学分的人应该在stackoverflow中制作一个Susy标签......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-20T16:14:29.730

```
#main {
  display: table;
  background-color: #eee;
}
.main-left,
.main-right{
  display: table-cell;
  vertical-align: top;
}
.main-left {
  background-color: #fff;
}

.main-right {
  background-color: #eee;
} 
```

这将使两个 div 相互匹配，就好像它们是相邻的表格单元格一样。别担心，这不符合使用表格进行布局的条件，对于列来说很酷，而且不会给我带来任何问题。当然，糟糕的旧浏览器不支持它，但您可以使用 .js 脚本（如[ie9.js](http://code.google.com/p/ie7-js/)）在必要时对其进行修补。

# haskell - 为什么湿在 DPH 程序中会出现“Can't vectorise expression GHC.Prim.Int#”错误？

> ID：12026056
> 
> 赞同：9
> 
> 时间：2012-08-19T11:18:04.123
> 
> 标签：haskell, data-parallel-haskell

我试图使用 DPH 实现 nqueens 问题，但最终出现 Can't vectorise GHC.Prim.Int# 错误。当我搜索错误时，我发现了一个 GHC 错误，它讨论了用于模式匹配的矢量化文字 (http://haskell.1045720.n5.nabble.com/GHC-5702-Can-t-vectorise-pattern-matching-on -numeric-literals-td5076659.html）。我不确定这是否是同一个错误。我的代码如下，

```
{-# LANGUAGE ParallelArrays #-}
{-# OPTIONS_GHC -fvectorise #-}
module NQueensP (nqueens_wrapper) 
where

import qualified Prelude
import Data.Array.Parallel
import Data.Array.Parallel.Prelude
import Data.Array.Parallel.Prelude.Int as I
import qualified Data.Array.Parallel.PArray as P

isSafe i q n  = isSafeHelper i (Prelude.zip (P.toList (toPArrayP q)) [n, n I.- 1..1]) 
            where isSafeHelper i []  = True
                  isSafeHelper i (x:xs) = (i I.== Prelude.fst x) && I.abs(i I.-   
                                  (Prelude.fst x)) I./= I.abs(n I.- (Prelude.snd x)) && 
                                       isSafeHelper i xs

nqueens_wrapper::Int -> PArray (PArray Int)
nqueens_wrapper n = toPArrayP (mapP toPArrayP (nqueens n 0))

nqueens::Int -> Int -> [:[:Int:]:]
nqueens n 1 = [:[:i:] | i <- (enumFromToP 1 n) :]
nqueens n k = [: [:i:] +:+ q | i <- oneton, q <- boards, isSafe i q k:]
           where boards = nqueens n (k I.- 1)
                 oneton = (enumFromToP 1 n) 
```

如果我做错了什么，请告诉我。我正在使用 GHC 7.4.1。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T22:48:25.900

是的，这似乎与您提到的错误有关。您得到的错误源于这一行：

```
nqueens n 1 = [:[:i:] | i <- (enumFromToP 1 n) :] 
```

显然，您不能使用`-fvectorise`启用的 n 模式。让我们手动对这一行进行脱糖以删除 n 模式：

```
nqueens n w | w I.== 1 = [:[:i:] | i <- (enumFromToP 1 n) :] 
```

* * *

我们现在已经处理了一个神秘的错误信息。这并不意味着我们已经完成了，因为下一条错误消息似乎同样神秘：

```
*** Vectorisation error ***
    Tycon not vectorised:  [] 
```

（我认为）的问题`isSafe`在于您使用了很多未使用`-fvectorise`. 这意味着您不能只使用链表 ( `Tycon not vectorised: []`)、`Prelude.fst`、`Prelude.snd`或`Prelude.zip`，除非您在模块中重新定义这些结构。（很烦人，如果不重新定义，我什至无法使用`(.)`。）

我们将不得不重写`isSafe`. 让我们看一下它的第一行：

```
isSafe i q n  = isSafeHelper i (Prelude.zip (P.toList (toPArrayP q)) [n, n I.- 1..1]) 
```

我们不能使用`Prelude.zip`，但我们可以使用`zipP`，这意味着我们不必再转换`q`了。但是，我们的递减列表应该使用 DPH 组合器重写。愚蠢的是，`enumFromThenToP`它不存在，所以相反，我们会说`mapP (n I.-) (enumFromToP 0 (n I.- 1))`获得`[n, n I.- 1..1]`. 所以这条线变成：

```
isSafe i q n  = isSafeHelper i (zipP q (mapP (n I.-) (enumFromToP 0 (n I.- 1)))) 
```

现在为`isSafeHelper`：

```
isSafeHelper i [] = True
isSafeHelper i (x:xs)
    = (i I.== Prelude.fst x)
    && I.abs(i I.- (Prelude.fst x)) I./= I.abs(n I.- (Prelude.snd x))
    && isSafeHelper i xs 
```

因为`Prelude.fst`和`Prelude.snd`不可用，您可以通过在模式本身中提取元组的这些部分来解决此问题：

```
isSafeHelper i [] = True
isSafeHelper i ((x1,x2):xs)
    = (i I.== x1)
    && I.abs(i I.- x) I./= I.abs(n I.- x2)
    && isSafeHelper i xs 
```

但是，当然，它仍然无法编译：您的参数将是一个并行列表，而不是 Prelude 风格的链表。为了解决这个问题，我们将使用以下函数以更实用的方式重写它[`all`](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:all)：

```
isSafeHelper i xs = all (isSafePredicate i) xs

isSafePredicate i (x1,x2)
    = (i I.== x1)
    && I.abs(i I.- x) I./= I.abs(n I.- x2) 
```

`all`仍然适用于链接列表，但请注意，您不是在自己的函数中手动解构列表。如果有一个`allP`for 并行列表不是很好吗？会的，但没有。不过，写起来并不难：

```
allP :: (a -> Bool) -> [: a :] -> Bool
allP p arr = andP (mapP p arr) 
```

将它们放在一起，您可以编写`isSafe`如下：

```
isSafe i q n = allP (isSafePredicate i n) (zipP q ntoone) 
  where
    isSafePredicate i n (x1, x2)
        = (i I.== x1)
        && I.abs(i I.- x1) I./= I.abs(n I.- x2)
    ntoone = mapP (n I.-) (enumFromToP 0 (n I.- 1)) 
```

* * *

`nqueens_wrapper`看起来还不错。您的代码现在应该可以编译了。

几点注意事项：

*   我不知道它是否有效（我得到`*** Exception: crossMapP: not implemented`了，但不知道如何修复它），但它看起来应该。
*   反过来重写`isSafe`是行不通的。如果您尝试使用列表中的`Prelude`数字`Prelude`，您将再次收到投诉`Int#`。我认为这是因为`isSafe`至少有一个矢量化函数使用了它`nqueens`。
*   不包括`Data.Array.Parallel.Prelude`. [模块描述](http://hackage.haskell.org/packages/archive/dph-lifted-vseg/0.7.0.1/doc/html/Data-Array-Parallel-Prelude.html)是这样说的：

    > *不应再在用户代码中显式导入此模块。*用户代码应该只导入 Parallel 和，直到矢量化器支持类型类，类型特定的模块。

*   不要对本地定义发疯。`isSafeHelper`在您的版本中缺少它的`n`论点。

# php - jquery 复选框数组包含最后一个选中的复选框

> ID：12026058
> 
> 赞同：0
> 
> 时间：2012-08-19T11:19:00.393
> 
> 标签：php, jquery

我有一组复选框，我试图通过 AJAX/PHP 传递 POST。当我填充数组时，它只会拾取最后一个。

HTML

```
<input type="checkbox" name="committee[]" value="membership">Membership <br/>
<input type="checkbox" name="committee[]" value="operations">Operations <br/>
<input type="checkbox" name="committee[]" value="membership">Board <br/> 
```

Javascript

```
$("#save").click(function (e) { 
 ...
 var committee = { 'committee[]' : []};
  $('input:checked').each(function(){
   committee['committee[]'].push($(this).val());
 });

 $.ajax({
  url: 'save.php',
  type: 'POST',
  data: {
  ...
  committee: committee
  }
 });
}); 
```

在`save.php`这一点上我所做的就是`print_r($_POST);`看到只有最后一个复选框出现。我知道这是我在函数中做错的事情`input:checked`，但我不确定是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T11:56:09.440

我建议做一个 $('#save').click(function(){ $('#hiddendiv').post('save.php');});

或 onclick=$('#hiddendiv').post('save.php');

并让 save.php 像这样对待文件 $test=$_POST['committee'];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T11:27:36.207

带有“[]”的数组索引可能会导致问题。改为这样做：

```
 var committee = new Array();
      $('input:checked').each(function(){
       committee.push($(this).val());
     }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T11:30:30.647

```
$("input:checked").map(function (i,e) { return $(this).val();}) 
```

将返回带有选中复选框值的数组。所以：

```
var committee = $("input:checked").map(function (i,e) { return $(this).val();});
$.ajax({
  url: 'save.php',
  type: 'POST',
  data: {
  ...
  committee: committee
  }
 }); 
```

# validation - JAXB 验证

> ID：12026060
> 
> 赞同：2
> 
> 时间：2012-08-19T11:19:37.860
> 
> 标签：validation, jaxb

我使用 xjc 将 XML 转换为 JAXB 元素并执行编组操作。但是，xml 中的某些字段未针对 xsd 进行验证。

例如：我已将其中一个字段指定为 integer ，但它接受字符串并且不会引发验证错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T11:37:04.237

JAXB (JSR-222) 被设计为在默认情况下进行如果部分文件不直接对应的映射。您可以指定`ValidationEventHandler`要通知任何转换问题的实例。`Schema`有关更多验证，您可以设置on 的实例`Unmarshaller`（请参阅：[http](http://blog.bdoughan.com/2010/12/jaxb-and-marshalunmarshal-schema.html) ://blog.bdoughan.com/2010/12/jaxb-and-marshalunmarshal-schema.html ）。

# c - 此示例中的 if 语句和按位运算有何相同之处？

> ID：12026061
> 
> 赞同：24
> 
> 时间：2012-08-19T11:19:49.660
> 
> 标签：c, if-statement, bit-manipulation

我正在阅读[此答案](https://stackoverflow.com/a/11227902/886669)，并提到此代码；

```
if (data[c] >= 128)
    sum += data[c]; 
```

可以用这个代替；

```
int t = (data[c] - 128) >> 31;
sum += ~t & data[c]; 
```

我很难理解这一点。有人可以解释按位运算符如何实现 if 语句的作用吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-08-19T12:16:15.703

```
if (data[c] >= 128)
    sum += data[c]; 
```

清楚地添加`data[c]`到`sum`当且仅当`data[c]`大于或等于 128。很容易证明

```
int t = (data[c] - 128) >> 31;
sum += ~t & data[c]; 
```

是等价的（当`data`只有正值时，它确实如此）：

`data[c] - 128`当且仅当`data[c]`大于或等于 128 时为正。算术右移 31，它变为全 1（如果它小于 128）或全零（如果它大于或等于 128）。

然后，第二行在 that 的情况下添加到(so 0) 或在 that 的情况下`sum`添加到(so ) 。`0 & data[c]``data[c] < 128``0xFFFFFFFF & data[c]``data[c]``data[c] >= 128`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T11:36:03.590

`int t = (data[c] - 128) >> 31; sum += ~t & data[c];`

> （请注意，这个 hack 并不严格等同于原始 if 语句。但在这种情况下，它对 data[] 的所有输入值都有效。）

`(data[c] - 128) >> 31;`//当data[c]大于或等于128时，尝试仅提取data[c]的符号位，如果小于128，则（data[c] - 128）将自动转换为负数number 从而设置符号位。

并将`sum += ~t & data[c];` 值 data[c] 与 1 或 0 取决于符号位的补码。表示`sum`如果 value( `(data[c] - 128)`) 为负数，则不会添加任何内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-26T09:20:04.073

```
if (data[c] >= 128)
    sum += data[c]; 
```

等于

```
if (data[c] - 128 >= 0)
    sum += data[c]; 
```

这意味着`data[c]`如果`data[c] - 128`不是负数，则相加。所以我们需要提取 的符号`data[c] - 128`。由于数据是 32 位 int 数组。因此，为了获得符号，我们需要对其进行算术移位`32 - 1 = 31`。所以

```
int t = (data[c] - 128) >> 31; //where t is the sign of data[c] - 128, 0 for positive and 1 for negative
sum += ~t & data[c]; //Add data[c] in sum if t = 0 i.e when the sign of data[c] - 128 is positive 
```

# objective-c - NSPredicate predicateWithFormat 不评估格式说明符

> ID：12026063
> 
> 赞同：3
> 
> 时间：2012-08-19T11:20:17.213
> 
> 标签：objective-c, nspredicate

`predicateWithFormat:`我对 NSPredicate 的方法有一个（对我来说）奇怪的案例。

使用以下内容，我将两个 NSPredicate 实例的描述记录到控制台：

```
NSNumber *myNumber = [NSNumber numberWithInt:1];

NSString *predicateFormatByHand = [NSString stringWithFormat:@"self MATCHES 'chp%@_img[0-9]+\\.png'", myNumber];
NSPredicate *firstPredicate = [NSPredicate predicateWithFormat:predicateFormatByHand];

NSLog(@"firstPredicate description: %@", firstPredicate);

NSPredicate *secondPredicate = [NSPredicate predicateWithFormat:@"self MATCHES 'chp%@_img[0-9]+\\.png'", myNumber];

NSLog(@"secondPredicate description: %@", secondPredicate); 
```

这输出：

```
 firstPredicate description: SELF MATCHES "chp1_img[0-9]+.png"
secondPredicate description: SELF MATCHES "chp%@_img[0-9]+.png" 
```

我希望这些描述是相同的。

有人可以解释为什么他们不是吗？

（在[这个问题](https://stackoverflow.com/questions/6726467/nspredicate-predicatewithformatnsstring-inconsistency)之后，我已经为嵌入式单引号使用了各种转义序列，但是这样做时，NSPredicate 一直抱怨它无法解析格式字符串。我很高兴知道发生了什么。）

更新：一个答案表明使用 NSNumber 而不是 int 是一个问题，所以：

```
NSPredicate *thirdPredicate = [NSPredicate predicateWithFormat:@"self MATCHES 'chp%d_img[0-9]+\\.png'", [myNumber intValue]];

NSLog(@"thirdPredicate description: %@", thirdPredicate); 
```

我最初是从这个开始的，但是输出是一样的：

```
thirdPredicate description: SELF MATCHES "chp%d_img[0-9]+.png" 
```

（这意味着不评估格式说明符。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T12:57:41.177

答案很简单： 使用的解析器`NSPredicate`假定引号内的任何内容都是字符串文字，并且不会尝试对其内容进行任何替换。如果您需要一个动态字符串值，则必须先构建字符串，然后再将其替换为谓词格式字符串，如您的第一个示例所示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T12:31:49.407

......因为`predicate`不是这样的事情`string`。

对于任何`predicate`s，您应该只使用两个格式说明符 100% 安全：

*   一个用于*键*（`%K`）；和
*   一个用于*值*( `%@`)；

将*键*和*值*添加到`predicate`. 这就是为什么您的第二个（和第三个）`predicates`没有在值内格式化的原因。

您可以在将其添加到类似**之前**格式化该*值：* **`predicate`**

 **```
NSNumber *myNumber = [NSNumber numberWithInt:1];
NSString *string = [NSString stringWithFormat:@"chp%@_img[0-9]+\\.png", myNumber];
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", string];
NSLog(@"%@", predicate); 
```

结果是：

```
SELF MATCHES "chp1_img[0-9]+\\.png" 
```

...永远不要忘记我的第一句话：the`predicates`和 the`strings`不是一回事。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T11:44:16.187

我的解释

> %@ 是对象值的 var arg 替换

在“谓词编程指南”中，`%@`它只能用于替换核心数据对象可以与之比较的值。例如

```
NSNumber *myNumber = [NSNumber numberWithInt:1]; 
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"count = %@", myNumber]; 
```

如果“count”是实体的 Number 属性，则完全有效。它类似于将值绑定到 SQLite 准备好的语句。

如果`%@`可以用于谓词中的一般字符串格式化，那么就不需要有两个不同的格式说明符`%K` 以及`%@`键路径和值。**

# list - 将列表附加到 F# 中的另一个列表会导致复制底层对象还是仅复制指针？

> ID：12026065
> 
> 赞同：5
> 
> 时间：2012-08-19T11:20:28.313
> 
> 标签：list, f#, functional-programming

我一直认为将一个列表附加到另一个列表意味着从第一个列表中复制对象，然后指向附加列表，例如[此处](http://diditwith.net/2008/03/03/WhyILoveFListsTheBasics.aspx)所述。但是，在[这篇](http://fsharpnews.blogspot.se/2007/02/avoiding-copying-in-functional.html)博文及其评论中，它说只有指针被复制，而不是底层对象。那么什么是正确的呢？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T19:21:59.750

根据 Snowbear 的回答，组合两个列表的更准确图像（比问题中第一篇提到的文章中提供的图像）如下所示。

```
let FIRST = [1;2;3]
let SECOND = [4;5;6]
let COMBINED = FIRST @ SECOND 
```

![附加列表的更准确描述](../Images/f4917fbceb0e757a08306f4429dc4247.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T12:04:10.967

> 在函数世界中，列表是不可变的。这意味着节点共享是可能的，因为原始列表永远不会改变。因为第一个列表以空列表结尾，所以必须复制其节点以将其最后一个节点指向第二个列表。

如果你的意思是这个陈述，那么答案似乎很简单。第一篇文章的作者在谈到列表节点元素时说`nodes`。节点元素与列表项本身不同。看看第一篇文章中的图片。从每个元素到下一个节点都有箭头。这些箭头是指针。但是整数类型（放入列表中）没有这样的指针。可能有某种`list node`类型可以包装这些整数并存储指针。当作者说`nodes must be copies`他正在谈论这些包装被复制时。底层对象（如果它们不是本例中的值类型）将不会被克隆，新的包装器将指向与以前相同的对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T14:21:52.157

`ref`F# 列表包含对其元素的引用（不要与 F# 混淆）；列表操作复制那些引用（指针），但不复制元素本身。

有两种方法可以将项目附加到现有列表，这就是为什么文章之间似乎存在差异（尽管它们看起来都是正确的）：

*   Cons 运算符 ( `::`)：cons 运算符将单个项目添加到 F# 列表中，从而生成一个新列表。它非常快（`O(1)`），因为它只需要调用一个非常简单的构造函数来生成新列表。
*   附加运算符 ( `@`)：附加运算符将两个 F# 列表附加在一起，生成一个新列表。它没有那么快（`O(n)`），因为为了使组合列表的元素正确排序，它需要遍历运算符左侧的整个列表（因此复制可以从该列表的第一个元素开始）。如果已知左侧的列表非常小，您仍然会在生产中看到它，但通常使用`::`.

# xml - AntiXML 中的链式转换

> ID：12026068
> 
> 赞同：3
> 
> 时间：2012-08-19T11:21:05.523
> 
> 标签：xml, scala

我有anti-xml Elem，像这样（自动生成的数据）：

```
<library>
  <bookshelf number="0">
    <book year="1997" title="Puzzled Coordinators" author="Lily Williams"></book>
    <book year="2005" title="Jittery Fare" author="Lucy Taylor"></book>
    <book year="2001" title="Dizzy Jurisdiction" author="Lucy Robinson"></book>
  </bookshelf>
  <bookshelf number="1">
    <book year="1997" title="Bashful Trusts" author="Lucas Wilson"></book>
    <book year="2003" title="Outrageous Consequences" author="Byron White"></book>
    <book year="1992" title="Irritated Accusations" author="Anne Roberts"></book>
  </bookshelf>
</library> 
```

我想对其应用几个转换，例如：

```
val transforms: Seq[...] = ...
val result = transforms.foldLeft(library)(l,t) => t(l)) 
```

但我只得到了这个解决方案：

```
val transforms: Seq[Elem => Zipper[Node]] = Seq(
  x => x \\ "book" filter (_.attrs("year").toInt > 2000) unselect,
  x => x \\ "book" filter (_.attrs("title").contains("J")) unselect
)
val result = transforms.foldLeft(lib)((l,t) => t(l).head.asInstanceOf[Elem]) 
```

有没有办法获得更好的转换类型（Elem => Elem）并避免那些丑陋的演员表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T17:17:36.583

鉴于`unselect`目前只返回 a `Zipper[Node]`，我看不到在不控制类型系统的情况下获得你想要的东西的方法，这将需要像演员一样的东西。

在这种情况下，鉴于 Anti-XML 库的当前状态，您确实*知道*类型系统无法做到的事情：您知道转换产生的 zipper 的父级是 a `Zipper[Elem]`，因此`unselect`实际上给您的*将*是a `Zipper[Elem]`，即使它被键入为 a `Zipper[Node]`。

所以我认为你能做的最好的就是把不愉快的东西包装得更干净一点：

```
def toEndo(t: Elem => Zipper[Elem]): Elem => Elem =
  t andThen (_.unselect.head.asInstanceOf[Elem]) 
```

或者，为了让您的意图更加明显：

```
def toEndo(t: Elem => Zipper[Elem]) = t andThen (_.unselect.head match {
  case e: Elem => e
  case _ => throw new RuntimeException("Aaaaah! This was never meant to happen!")
}) 
```

然后您可以编写以下内容：

```
val transforms: Seq[Elem => Zipper[Elem]] = Seq(
  _ \\ "book" filter (_.attrs("year").toInt > 2000),
  _ \\ "book" filter (_.attrs("title").contains("J"))
)

val result = Function.chain(transforms map toEndo)(lib) 
```

请注意，我已将 移动`unselect`到帮助程序中，以便为我们提供更多的类型安全性。

# html - 如何使用 HTML5 和 CSS3 创建图像条？

> ID：12026070
> 
> 赞同：-1
> 
> 时间：2012-08-19T11:21:16.057
> 
> 标签：html, css, html5-animation

我想使用 HTML5 和 CSS3 制作水平的图像缩略图条。并水平滚动。谁能告诉我如何进行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T11:29:03.650

尝试设置css：

```
<div style="white-space:nowrap; overflow-x: scroll">
<img><img><img> <!-- Images here -->
</div> 
```

nowrap 防止内容换行，overflow-x:scroll 导致 x 方向溢出有滚动条

# objective-c - 如何在 Objective-C 的类方法中访问实例变量？

> ID：12026072
> 
> 赞同：5
> 
> 时间：2012-08-19T11:21:25.540
> 
> 标签：objective-c

我正在开发一个实现类方法的应用程序。h 如何访问类方法中的实例变量？

这是我的实例方法，并创建了类“SomeClass”的对象：

```
-(void)viewDidLoad
{
   SomeClass *obj=[SomeClass alloc] init];
} 
```

这是类方法，在这个方法中我试图访问实例变量'obj'，所以我收到一条错误消息“实例变量'obj'在类方法中访问”。

```
+(void)classMethodImplement
{

} 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-19T11:52:19.427

您不能从类方法访问实例变量。由于实例变量绑定到类的某些*实例*，因此从类方法访问它们没有意义，因此语言不允许这样做。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-19T12:31:55.400

有一种明显的方法可以做到这一点。你只需要使用静态变量。

**选项1：**

将所需的实例变量存储到静态变量中：

```
static id static_iVar = nil;
- (void)viewDidLoad {
    // blah, blah, blah
    static_iVar = _iVar;
} 
```

**选项 2：**

存储`self`到静态变量中，然后根据需要访问其 iVar：

```
static id static_self = nil;
- (void)viewDidLoad {
    // blah, blah, blah
    static_self = self;
} 
```

在任一选项中，请格外小心。如果您分配同一类的两个实例而没有进行适当的检查和填充，那么没人知道会出现什么样的错误。

其次，只需在静态方法中使用静态变量即可：

```
+(void)classMethodImplement
{
    // Use it here...
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-19T14:07:33.087

重写类方法，使其调用者提供必要的对象。

```
+(void)classMethodImplement:(SomeClass *)obj
{
} 
```

# ruby-on-rails - scss中的编译错误

> ID：12026076
> 
> 赞同：0
> 
> 时间：2012-08-19T11:23:08.790
> 
> 标签：ruby-on-rails, compiler-errors, compass-sass, sass

我正在尝试将我所有的 css 文件转换为 scss，这样做会导致错误。我现在要做的是调试错误的来源，以及导致错误的原因。

查看我认为错误所在的文件时，我可以查看以下内容

```
body:before {
        font-weight: bold;
        content: "\000a Sass::SyntaxError: File to import not found or unreadable: compass.\000a Load path: \002f home\002f html\002f teammngt\000a   (in \002f home\002f html\002f teammngt\002f app\002f assets\002f stylesheets\002f content.css.scss)";
      }

      body:after {
        content: "\000a   \002f home\002f html\002f teammngt\002f app\002f assets\002f stylesheets\002f content.css.scss:1";
      } 
```

虽然我确实知道这是什么意思。

内容.css.scss

```
@import "compass";

/* Let the body fill the window */

html, body {
  height: 100%;
  min-height: 100%;
  background-color: #fafafa; }

/* Fill the window but let some space for the footer */

#height-wrapper {
  height: auto !important;
  height: 100%;
  margin: 0 auto -38px;
  min-height: 100%; }

#content-wrapper {
  height: 100%;
  position: relative;
  margin-bottom: 38px; }

.push {
  height: 38px; }

.webkit {
  .push {
    height: 60px; }
  .clear .push {
    height: 38px; } }

/* ==================================================
 * 2) Main Content
 * ================================================== */

#main_content {
  padding: 20px;
  overflow: hidden;
  h2 {
    margin-top: 0;
    padding-bottom: 6px;
    margin-bottom: 4px;
    width: 100%;
    background: url('main_content/title-underline.png') repeat-x bottom; } }

/* ==================================================
 * 3) Boxes
 * ================================================== */

.box {
  margin-top: 15px;
  .header {
    background: rgb(120, 177, 237);
    @include background-image(linear-gradient(top, rgba(120, 177, 237, 1) 0%, rgba(65, 123, 181, 1) 100%));
    height: 34px;
    line-height: 34px;
    border: 1px solid #2B5177;
    border-radius: 3px 3px 0 0;
    border-bottom: none;
    box-shadow: inset 0 1px 0 0 rgba(255, 255, 255, 0.5);
    &.grey {
      background: url(../img/sprites/boxes/bg-header.png);
      filter: none;
      border-color: #C8C8C8;
      h3 {
        color: #383838;
        text-shadow: none; } } }
  &.closed .header {
    border-bottom: 1px solid #2B5177;
    border-radius: 3px; }
  .header {
    h3 {
      float: left;
      display: inline-block;
      margin: 0;
      padding: 0;
      margin-left: 8px;
      padding-left: 10px;
      background: url('sprites/boxes/divider-header.png') top left no-repeat !important; }
    &.no-icon h3 {
      background: none !important;
      margin-left: 0; }
    img {
      display: inline-block;
      margin: 9px auto;
      margin-left: 8px;
      float: left;
      -moz-user-select: none; }
    span {
      background: url('icons/packs/fugue/16x16/toggle.png') no-repeat;
      cursor: pointer;
      display: block;
      float: right;
      height: 16px;
      margin-right: 10px;
      margin-top: 10px;
      width: 16px; } }
  &.closed span {
    background: url('icons/packs/fugue/16x16/toggle-expand.png') no-repeat; }
  .content {
    padding: 0 10px;
    border: 1px solid #C8C8C8;
    border-radius: 0 0 3px 3px;
    border-top: 1px solid #2B5177;
    background: #fff; }
  &.closed .content {
    display: none; }
  .content {
    &.grey {
      border-top-color: #C8C8C8; }
    &:after {
      content: ".";
      display: block;
      height: 0;
      clear: both;
      visibility: hidden; }
    &.with-actions {
      border-radius: 0;
      border-bottom: 0; }
    &.no-header {
      border-radius: 3px;
      border: 1px solid #C8C8C8; }
    &.no-padding {
      padding: 0; } } }

/* ==================================================
 * 3a) Boxes: Header
 * ================================================== */

/* ==================================================
 * 3b) Boxes: Content
 * ================================================== */

.border-radius-bottom {
  border-radius: 0 0 3px 3px; }

/* ==================================================
 * 3c) Boxes: Actions Bar
 * ================================================== */

.box {
  .actions {
    border: 1px solid #c8c8c8;
    background: url('sprites/boxes/bg-action.png') repeat-x #f7f7f7;
    border-radius: 0 0 3px 3px;
    &:after {
      content: ".";
      display: block;
      height: 0;
      clear: both;
      visibility: hidden; }
    input {
      margin: 0; } }
  .actions-left {
    float: left;
    margin: 5px;
    margin-left: 10px; }
  .actions-right {
    float: right;
    margin: 5px;
    margin-right: 10px; }
  .header ul {
    font-size: 12px;
    height: 23px;
    padding: 0;
    margin: 7px 0;
    margin-right: 6px;
    margin-top: 6px;
    float: right; } }

/* ==================================================
 * 3d) Boxes: Tabs
 * ================================================== */

.ie ul {
  overflow: hidden;
  border-radius: 5px; }

.box li {
  display: inline;
  list-style: none;
  a {
    padding: 0 10px;
    margin: 0;
    border-bottom: 1px solid #C0C0C0;
    border-top: 1px solid #C0C0C0;
    /* Gradient */
    background: #fefefe;
    /* Old browsers */
    @include background-image(linear-gradient(top, #fefefe 0%, #f7f7f7 80%, #ededed 96%, #e5e5e5 100%));
    /* IE6-9 */ }
  &:first-child a {
    border-radius: 5px 0 0 5px;
    border-bottom: 1px solid #C0C0C0;
    border-top: 1px solid #C0C0C0;
    border-left: 1px solid #C0C0C0; }
  &:last-child a {
    border-radius: 0 5px 5px 0;
    border-bottom: 1px solid #C0C0C0;
    border-top: 1px solid #C0C0C0;
    border-right: 1px solid #C0C0C0; }
  &.current a {
    background: rgb(46, 86, 129);
    @include background-image(linear-gradient(top, rgba(46, 86, 129, 1) 0%, rgba(88, 130, 175, 1) 100%));
    -moz-background-clip: padding;
    -webkit-background-clip: padding-box;
    background-clip: padding-box;
    /* The inset shadow */
    -webkit-box-shadow: inset 0px 0px 3px 0px #000;
    -moz-box-shadow: inset 0px 0px 3px 0px #000;
    box-shadow: inset 0px 0px 3px 0px #000; }
  a {
    line-height: 21px;
    display: block;
    float: left; }
  &.current a {
    color: #FFFFFF; } } 
```

宝石文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'
gem 'therubyracer'

# Database Gems
gem 'yaml_db'
gem 'sqlite3'
gem 'thin'
gem 'pg'
gem 'rb-readline'

#Application Processing
gem 'haml'
gem 'json'
gem "spreadsheet"
gem "paperclip"

#Application required gems
gem "simple-navigation", "~> 3.7.0"
gem 'event-calendar', :require => 'event_calendar'
gem "watu_table_builder", :require => "table_builder"
gem 'best_in_place'
gem "to_xls", :git => "https://github.com/dblock/to_xls.git", :branch => "to-xls-on-models"
#gem 'nexmo'
#gem 'action_smser'
gem 'twilio-ruby'

#Auth and Management
gem "devise"
gem 'devise_invitable', '~> 1.0.0'
gem "cancan"
gem 'cantango'
gem "switch_user"
gem 'paper_trail', '~> 2'
gem "omniauth-facebook"
gem 'bcrypt-ruby', '~> 3.0.0'
gem 'announcements'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platform => :ruby

  gem 'uglifier', '>= 1.0.3'
  gem 'compass-rails'
  gem "compass", "~> 0.12.1"
end

gem 'jquery-rails' 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T11:59:38.620

消除

```
gem "compass" 
```

从你的`Gemfile`. `compass-rails`安装后，`compass`不需要 gem 。

确保

```
/path/to/your/project/.bundle/config 
```

不包含在行**中**`assets`。`BUNDLE_WITHOUT`

如果您要从使用 SASS 的旧版本升级 Rails，请在您的`config/`目录中搜索以下行

```
Sass::Plugin.options[... 
```

并尝试删除它们。我已经看到至少一个导致问题的案例。

在[您](https://stackoverflow.com/a/9021785/605707)的`config/application.rb`.

尝试移出`compass-rails`该`:assets`组并再次捆绑。

**确保每次更改后都重新启动服务器**

您还应该考虑将您的应用程序升级到 Rails 3.2.8。您将不得不对应用程序的代码进行很少的更改。

# java - 关于类与枚举

> ID：12026079
> 
> 赞同：0
> 
> 时间：2012-08-19T11:24:00.810
> 
> 标签：java

我有一个查询，我已经声明了一个类，其中所有方法都是静态的，它遵循实用程序设计模式，它就像帮助类现在我可以用对应的枚举来复制那个类，我可以有枚举里面有所有的 staic 方法，如果是，那么它提供了什么其他优势..!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T11:29:22.520

静态方法的问题是：它们不能被模拟进行测试。至少不容易。

将方法放在具有单个实例的 Enum 中可以让您更接近一些。我不确定枚举是否可以用标准库来模拟，你当然不能不使用反射。

但是如果你把你的方法放在一个由枚举实现的接口中，而其他人只是使用这个接口，通过构造函数（或者如果你必须的话）接受该接口的一个实例，你可以轻松地模拟它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T12:14:32.570

是的，您可以将 an`enum`用作实用程序类。然而，它并没有太多优点：它归结为私有构造函数，它可以防止不受控制的实例化。我宁愿坚持使用私有构造函数的普通类，因为期望枚举用于枚举类型而不是实用程序类。如果您将枚举用于单例，那只会让它更有意义。

# android - 不同语言环境中的键盘字符

> ID：12026082
> 
> 赞同：2
> 
> 时间：2012-08-19T11:24:56.003
> 
> 标签：android, keyboard, locale, ime

我正在为 Android 开发键盘 (IME)。我希望它对来自每个国家的人们都有用。所以，我需要知道根据当前语言环境应该在键盘上放置哪些符号。

我的第一个想法是复制计算机键盘布局。我在哪里可以获得每个语言环境的首选计算机键盘布局的内容？

另外，我注意到电话键盘通常包含一些计算机键盘上不存在的特殊符号。哪些符号对手机很重要，为什么？例如，我遇到的所有键盘都提供了一种输入“¿”符号的方法。但是这个符号在我的语言环境（俄语）中没有任何意义，也没有在英语中使用。是否有理由在每个键盘上放置此符号？

# javascript - jqGrid - TypeError: "#List".jqGrid 不是函数

> ID：12026083
> 
> 赞同：1
> 
> 时间：2012-08-19T11:24:57.660
> 
> 标签：javascript, jquery, jqgrid

我的项目中有一个单独的脚本文件中有以下代码，用于填充 jqGrid。

```
jQuery(document).ready(function () {
    ("#List").jqGrid({
    url: '/Dept/Index/',
    datatype: 'json',
    mtype: 'POST',
    colNames: ['Name'],
    colModel: [{ name: 'Name', index: 'Name', width: 300, align: 'left'}],
    pager: jQuery('#pager'),
    rowNum: 10,
    rowList: [5, 10, 20, 50],
    sortname: 'Id',
    sortOrder: "desc",
    viewrecords: true,
    caption: 'Dept List'
    });
}); 
```

当我运行该项目时，我在 Firebug 的控制台中观察到以下错误。类型错误：`"#List".jqGrid is not a function`。

但是，如果我将脚本嵌入文件中，错误就会消失。我已按照有关[如何安装](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:how_to_install)的说明进行操作，并查看了[类似错误](https://stackoverflow.com/questions/5970600/jqgrid-error-b-jgrid-jqid-is-not-a-function)的答案，并且我确信我的 jqgrid.js 和 grid.locale-en.js 的顺序正确。

我怎样才能消除这个错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T04:12:08.840

你应该使用：

```
$("#List") 
```

或者：

```
jQuery("#List") 
```

你可以在这里读到它：

[http://api.jquery.com/jQuery/](http://api.jquery.com/jQuery/)

结果`("#List")`只是一个字符串，这就是解释器声称没有调用方法的原因`jqGrid`。

# codeigniter - Codeigniter - 通过ajax加载图像时未保存验证码闪存数据

> ID：12026084
> 
> 赞同：0
> 
> 时间：2012-08-19T11:25:06.770
> 
> 标签：codeigniter, jquery, captcha, session-cookies

我正在使用 Codeigniter 并使用 Captcha 插件进行用户注册。一切正常，直到我在顶部导航栏使用的同一页面上有一个 ajax (jQuery) 加载图像。包含此内容时，flash 会话变量似乎未保存。

我可以将 img 添加到 HTML 并且一切正常，只有当它通过 ajax 加载它时才会中断。

我猜这是由于另一个请求触发图像，并且会话变量被覆盖。

关于如何解决这个问题的任何想法？

# c# - 想要关于自动化软件安装项目的建议

> ID：12026086
> 
> 赞同：2
> 
> 时间：2012-08-19T11:25:23.463
> 
> 标签：c#

我正在制作程序以在 C# 中自动安装软件。我用鼠标和键盘来监听安装程序安装时执行的事件。首先管理员需要安装需要在连接的客户端上大量安装的程序。因此，管理员运行服务器，该服务器在特定安装软件时挂钩鼠标和键盘事件，并且管理员选择唯一的屏幕区域进行屏幕截图，以便稍后在客户端安装过程中匹配以确定特定表单是否已到达，然后再模拟键或单击否则等待屏幕截图匹配。 .（例如，下一个表单是在单击下一个按钮后才出现的，然后才模拟单击或击键）

如果我错了，请纠正我..plz..

1）好吧，我知道组策略对象可以实现同样的事情，但它只能安装 msi 包而不是 exe 设置......所以它们需要首先转换为 msi.. 我为这个转换搜索了免费程序，但没有一个是免费的. （所有免费程序都只是简单的 exe 到 msi 转换器，但是转换后的 msi 在安装时仍会询问客户是否存在任何错误情况）&ofcource 你需要为域控制器 pc 购买 windows 服务器许可证，这对于印度学校和网吧是不可能的,慈善信托..

2）没有免费的程序可以完美地完成这项任务 AutoIT，AutoHotkey 尝试它很好但不是每次都成功。

3) Codeplex 上的 White Framework 很不错，但有时在安装时仍然会闲逛..

那么这种方式可以吗？或者有任何其他方法可以做到这一点（我想自动化 exe，msi ondemand 无人值守安装）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T02:02:49.543

关于＃2，您确实不正确。AutoIt 完全有能力处理这个问题，事实上 AutoIt 的基本示例之一是安装程序（此处的教程：[http](http://www.autoitscript.com/forum/topic/82288-installer-creator/) ://www.autoitscript.com/forum/topic/82288-installer-creator/ ）

通过一些调整，您可以将其变成一个出色的安装程序，比在 C# 中花费的精力要少得多

也许你能告诉我们 AutoIt 给你带来了什么问题？

# c++ - 在 qsort() 中进行强制转换

> ID：12026087
> 
> 赞同：1
> 
> 时间：2012-08-19T11:25:37.213
> 
> 标签：c++, pointers

下面的程序使用`qsort()`库函数对字符串的所有内容进行排序。

```
int sacomp(const void *a, const void *b) 
{
    return strcmp(*(const char**)a, *(const char**)b); <------------
}

void sort(string s) 
{
    int size = s.size();
    char const *data = s.c_str();
    char const **sa = new char const *[size+1];

    for(int i = 0; i < size; i++)
        sa[i] = data+i;

    qsort(sa, size, sizeof(sa[0]), sacomp); // O(n * Lon n)
}

int main() 
{
    string s("ABCCCDEFABBABBA");
    sort(s);

    return 0;
} 
```

我无法理解该`sacomp()`方法中完成的铸造。

```
strcmp(*(const char**)a, *(const char**)b); 
```

为什么 a 被强制转换为 const char** 然后被取消引用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T11:31:39.697

qsort 传递元素的指针。你传递了 sa as `char**`，所以每个元素都是`char*`，并且 qsort 传递`char**`了 ，最后你得到`char**`了 sort 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T11:35:39.760

您的元素是`char *`，因此您应该更改 void on`char *`并获取指向 的指针`char *`，即`char **`. 同时strcmp需要`char *`。

# postgresql - 将更新的文件导入数据库

> ID：12026090
> 
> 赞同：3
> 
> 时间：2012-08-19T11:25:56.990
> 
> 标签：postgresql, streaming, data-access-layer, notify, listen

我有每 2 小时更新一次的文件。我必须自动检测文件并将从中提取的信息插入数据库。

我们的 DBMS 是 Postgresql，编程语言是 Python。你会建议我怎么做？

我想利用 DAL（数据库抽象层）在文件和数据库之间建立连接，并使用 postgresql `LISTEN`/`NOTIFY`技术来检测新文件。如果您同意我的观点，请告诉我如何使用`LISTEN`/`NOTIFY`函数来检测文件。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T01:46:07.767

您需要编写一个作为守护程序保持运行的脚本，使用文件系统通知 API 在文件更改时运行回调函数。当通知脚本文件更改时，它应该连接到 PostgreSQL 并执行所需的工作，然后返回睡眠状态等待下一次更改。

监视目录更改的唯一真正跨平台的方法是使用延迟循环来轮询`os.listdir`并`os.stat`检查新文件和更新的修改时间。这是对电源和磁盘 I/O 的浪费；对于大量文件，它也会变慢。如果您的操作系统在目录中的文件更改时可靠地更改目录修改时间，您可以只`os.stat`在延迟循环中使用目录，这会有所帮助。

使用操作系统特定的通知 API 要好得多。如果您使用 Java，我会告诉您使用 NIO2[监视服务](http://docs.oracle.com/javase/tutorial/essential/io/notification.html)，它为您处理所有平台细节。看起来[Watchdog](http://packages.python.org/watchdog/)可能会为 Python 提供类似的东西，但我不需要在我的 Python 编码中进行目录更改通知，所以我没有对其进行测试。如果它不起作用，您可以使用特定于平台的技术，例如 Linux 的 inotify/dnotify 和 Windows 的各种观察程序 API。

也可以看看：

*   [如何查看文件的更改？](https://stackoverflow.com/questions/182197/how-do-i-watch-a-file-for-changes-using-python)
*   [用于监视文件夹和更新数据库的 Python 守护程序](https://stackoverflow.com/questions/2314892/python-daemon-to-watch-a-folder-and-update-a-database)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T12:59:39.710

您不能使用 LISTEN/NOTIFY，因为它只能从数据库中发送消息，而您的文件显然不在那里。

您需要让您的 python 脚本扫描文件所在的目录并检查它们的修改时间 (mtime)。如果它们被更新，您需要读入文件，解析数据并将其插入数据库。在不知道文件格式的情况下，没有办法更具体。

# dynamics-crm-2011 - 如何在 Dynamics CRM 2011 中隐藏所有营销和销售资料

> ID：12026092
> 
> 赞同：1
> 
> 时间：2012-08-19T11:27:12.190
> 
> 标签：dynamics-crm-2011

我正在尝试为只想进行 CAS 管理的呼叫中心设置动态。如何关闭这些东西，以便系统用户没有证据？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T17:22:39.953

一个好的起点是编辑站点地图。

有一个[关于 codeplex 的项目可能会有所帮助](http://sitemapeditor.codeplex.com/)，否则你可以在这个地方找到很好的指南：

*   [编辑站点地图](http://community.dynamics.com/product/crm/crmtechnical/b/crmmitchmilam/archive/2010/11/29/crm-2011-editing-the-sitemap.aspx)
*   [编辑站点地图 2](http://nicolaet.wordpress.com/2010/11/19/customizing-the-site-map-in-dynamics-crm-2011/)

有了这个，您可以隐藏销售和营销，这将是一个好的开始。您可能还想查看修改潜在客户/机会的权限，这可以通过[编辑安全角色](http://www.dynamicscrmtrickbag.com/2011/07/20/dynamics-crm-2011-security-roles/)来完成。如果他们在其他地方找到链接，这将有助于爱管闲事/好奇的用户创建记录。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-19T17:29:46.183

我假设您指的是本地 CRM 导航结构的子部分，其中显示了 Workplace、Sales、Marketing、Service 和 Settings。

这些区域的可见性可以通过两种不同的方式来驱动。您可以选择同时使用这两种方法。

首先，记录类型的可见性由用户的权限控制。例如，删除用户对 Invoices 的读取权限，它将不再作为可导航选项出现在其 UI 中。同样，如果用户无法访问其中包含的任何记录类型，我之前提到的子区域将不再出现。因此，通过授予正确的 ouot-of-the-box 角色或克隆和自定义一个角色，为用户提供完成工作所需的尽可能少的权限（尽管您确实应该这样做），可以实现您的某些目标那些角色。问题是销售部分，例如，包含您的用户需要查看的记录类型，例如联系人。您将无法撤销对联系人的访问权限，因此您可能还需要技巧 #2：

可以自定义 CRM 站点地图以包含您想要的任何内容，甚至可以包含新区域。可用的一项功能是根据记录权限更改或创建显示/隐藏区域的规则。我建议下载[Visual SiteMap Editor并阅读](http://dynamics.pinpoint.microsoft.com/en-us/applications/microsoft-dynamics-crm-sitemap-editor-12884928049)[CRM SDK](http://msdn.microsoft.com/en-us/library/gg309259.aspx)的这一部分

# c# - 升级到 Azure SDK 1.7 但 TransientFaultHandling.RetryPolicy 仍在寻找 1.1

> ID：12026099
> 
> 赞同：1
> 
> 时间：2012-08-19T11:28:10.743
> 
> 标签：c#, azure

出现错误

`Could not load file or assembly 'Microsoft.WindowsAzure.StorageClient, Version=1.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040)`

堆

`Microsoft.Practices.EnterpriseLibrary.WindowsAzure.TransientFaultHandling.AzureStorage.StorageTransientErrorDetectionStrategy.CheckIsTransient(Exception ex) +0 Microsoft.Practices.EnterpriseLibrary.WindowsAzure.TransientFaultHandling.AzureStorage.StorageTransientErrorDetectionStrategy.IsTransient(Exception ex) +21 Microsoft.Practices.TransientFaultHandling.RetryPolicy.ExecuteAction(Func`1 功能）+557 `

我将我的 SDK 升级到 1.7，为什么 TransientFaultHandling 仍然在寻找 1.1，尽管我有 1.7 版本的 StorageClient。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T12:06:58.763

目前没有支持 1.7 SDK 的 TOPAZ 版本。您需要在 app.config/web.config 中添加绑定重定向来解决此问题，直到发布新版本：

```
 <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.WindowsAzure.StorageClient" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="1.1.0.0" newVersion="1.7.0.0" />
      </dependentAssembly>
    </assemblyBinding>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.ServiceBus" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="1.6.0.0" newVersion="1.7.0.0" />
      </dependentAssembly>
    </assemblyBinding>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="Microsoft.ApplicationServer.Caching.Core" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="101.0.0.0" newVersion="1.0.4655.0" />
      </dependentAssembly>
    </assemblyBinding> 
  </runtime> 
```

# python - 组匹配的python正则表达式

> ID：12026100
> 
> 赞同：0
> 
> 时间：2012-08-19T11:28:16.450
> 
> 标签：python, regex

这是我的代码：

```
import re

pattern_str = '(?P<style>[^|]*>)\|(?P<tags>[^|]*)'

p = re.compile(pattern_str)

m = p.match('OL|AAAAA')
a = m.group('style')  # AttributeError: 'NoneType' object has no attribute 'group'
print a 
```

不能用，怎么解决？

我的python版本是2.6.5

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T11:33:19.687

你有一个额外`>`的`style`模式：

```
pattern_str = '(?P<style>[^|]*)\|(?P<tags>[^|]*)' 
```

# c# - 有没有为 C# 中的各种事件定义一个事件处理程序？

> ID：12026103
> 
> 赞同：1
> 
> 时间：2012-08-19T11:28:57.770
> 
> 标签：c#, silverlight, events, delegates, event-handling

我想为各种事件声明通用处理程序，这基本上会将事件路由到应用程序的 JavaScript 部分。我自己是为 JS/AS3 背景而来的，在这种情况下，这样的事情做起来相对简单。SilverLight 和 C# 看起来相当严格。

计划如下，JS 将调用一个特殊的***[ScriptableMember]***并带有要实例化的类名和要调用的方法，作为字符串参数。***[ScriptableMember]***然后必须构造该类的实例并可选择订阅可由该实例触发的事件。要订阅的事件将在某种公共静态结构中公开。***[ScriptableMember]***必须从该结构中提取事件属性并使用单个事件处理程序订阅所有这些属性。通用的单个事件处理程序应该将 C# 事件转换为 JS 事件。

显然，一切都应该在某种工厂逻辑中通用化和自动化。

一个大问题是我无法事先知道委托或 EventArgs 对象的类型。即使我知道为每个案例都创建一个超载会很麻烦。无论如何要在 C# 中定义通用事件处理程序吗？

**更新：**

这是处理所描述逻辑的代码片段：

```
[ScriptableMember]
public void exec(string compName, string action, ScriptObject scriptObject)
{
    String compFQName;
    Type compClass; 
    object comp;    

    compFQName = "fully.qualified.name." + compName;

    compClass = Type.GetType(compFQName);

    if (compClass != null) {
        comp = Activator.CreateInstance(compClass);

        FieldInfo fieldInfo = compClass.GetField("dispatches", BindingFlags.Static | BindingFlags.Public);
        object[] dispatches = (object[])fieldInfo.GetValue(comp);

        if (dispatches != null) {
            foreach (string eventName in dispatches) {
                EventInfo eventInfo = compClass.GetEvent(eventName);
                Delegate handler = Delegate.CreateDelegate(eventInfo.EventHandlerType, this, "OnComponentEvent");
                eventInfo.AddEventHandler(comp, handler);
            }                       
        }
    }

    // ...
} 
```

然后有一个事件处理程序应该赶上所有的事件：

```
public void OnComponentEvent(object sender, EventArgs args)
{
     // do something ...
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T16:09:25.520

每个事件参数都必须从`EventArgs`类继承。如果你遵循这条规则，你可以像这样声明你的处理程序

```
public void GenericHandler(object sender, EventArgs e) 
```

并订阅任何事件

**编辑：** 就像所说的 OR Mapper，如果您的处理程序的签名与上面所说的无法比较，您可以从订阅您的事件的匿名方法调用它，例如：

```
public delegate void StupidEventHandler(int walueThatMustBeWrappedToEventArgs);
public event StupidEventHandler StupidEventOccured;

//....

{
    //....
    stupidClass.StupidEventOccured += delegate(int value) { handlerObject.GenericHandler(stupidClass, new StupidEventHandlerWrapper(value)); }
} 
```

**编辑：** 由于问题表明使用了不寻常的 .NET 功能，因此处理也很不寻常。由于您订阅了所有内容，因此您必须知道可以发生哪些事件类型。然后像这样处理它：

```
public void GenericHandler(object sender, EventArgs e)
{
    if (e is MouseEventArgs)
    {
        var mouseArgs = e as MouseEventArgs;
        // .. process this case
    }
    else if (e is ....)
} 
```

**编辑：**

要订阅它，试试这个：

```
[ScriptableMember]
public void exec(string compName, string action, ScriptObject scriptObject)
{
    String compFQName;
    Type compClass; 
    object comp;    

    compFQName = "fully.qualified.name." + compName;

    compClass = Type.GetType(compFQName);

    if (compClass != null) {
        comp = Activator.CreateInstance(compClass);

        FieldInfo fieldInfo = compClass.GetField("dispatches", BindingFlags.Static | BindingFlags.Public);
        object[] dispatches = (object[])fieldInfo.GetValue(comp);

        if (dispatches != null) {
            foreach (string eventName in dispatches) {
                EventInfo eventInfo = compClass.GetEvent(eventName);

                EventHandler handlerMethod = OnComponentEvent;
                var handler = Delegate.CreateDelegate(eventInfo.EventHandlerType, handlerMethod.Target, handlerMethod.Method);
                eventInfo.AddEventHandler(comp, handler);
            }                       
        }
    }

    // ...
} 
```

为什么你的版本不起作用是一个很大的谜。

# sql - 什么 SQL 语句将确定集合中的哪些值不在指定列中？

> ID：12026109
> 
> 赞同：1
> 
> 时间：2012-08-19T11:29:51.283
> 
> 标签：sql, set

什么 SQL 语句将确定一组值中的哪些值不在指定列中？例如：

```
{"String1","String2","String3"} 
```

什么 SQL 语句将确定哪些字符串值不在`Column1`其中`Table1`？

没有 Linq，因为我使用的是 VS2005。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T11:40:24.783

尝试这个：

```
 select *
 from 
 (
      select 'String1' as s 
      union select 'String2' 
      union select 'String3'
 ) as x
 where x.s not in (select column1 from table1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T11:32:07.227

尝试这个：

```
WHERE Table1.Column1 NOT IN ("String1", "String2", "String3") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T11:34:04.613

运营`IN`商

例如。

```
SELECT COLUMN1 FROM TABLE1 WHERE COLUMN1 IN ('String1','String2','String3') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T11:49:57.607

这可能会有所帮助，

```
select * from 
(
  select 'String1' as s 
  union select 'String2' 
  union select 'String3'
) as a
where not exists (select 'x' from Table1 where Column1 = a.s) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-07-16T15:47:40.527

这个怎么样：

```
SELECT * FROM Table1
WHERE Table1.Column1 NOT IN 
(
'String1',
'String2',
'String3'
) 
```

# maven - 在测试之间与共享资源同时运行surefire

> ID：12026111
> 
> 赞同：2
> 
> 时间：2012-08-19T11:29:54.367
> 
> 标签：maven, maven-surefire-plugin

我有一个包含许多集成测试的项目，我正在尝试减少测试执行时间。这些测试都是使用数据库连接的 JUnit 测试。目前，所有测试都使用 maven-surefire-plugin 和 fork 为每个测试逐一运行，以处理缓存问题（这里的缓存不是问题）。

所有测试都使用坚持相同数据库架构的应用程序。这在尝试并行处理过程时面临挑战。

[我找到了一个不错的博客，它在surefire http://incodewetrustinc.blogspot.com/2010/01/run-your-junit-tests-concurrently-with.html](http://incodewetrustinc.blogspot.com/2010/01/run-your-junit-tests-concurrently-with.html)中解释了一些关于并发 的问题，但我仍然在实施这个解决方案时遇到问题，因为我有一个共享资源。

我的想法是创建多个模式并在线程\进程之间共享它们。如何为每个测试分配一个单独的连接并避免冲突？

我很想听听一些想法。

谢谢，伊卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-15T14:56:34.617

用作`${surefire.forkNumber}`数据库连接 ID 的一部分。然后每个运行测试的线程将使用单独的连接。

# jquery - 在 jQuery FullCalendar 中调整事件大小

> ID：12026114
> 
> 赞同：0
> 
> 时间：2012-08-19T11:30:10.697
> 
> 标签：jquery, jquery-plugins, fullcalendar

如何更改 FullCalendar 单元格中的事件大小。

我日历中的每个事件都是一个图像，所以目前如果显示多个图像，它们会垂直显示。但我想水平显示所有事件。

我试图修改它的 css, used `float: left, display: inline`，但没有运气。还将每个图像的大小更改为`11px`，但没有运气

请看我的现场： http: [//oryxtesting.com/learning-events/](http://oryxtesting.com/learning-events/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T04:16:54.403

我在月视图的日历中添加了一个 eventRender ......这是我的代码：

```
eventRender: function(event, element, view) { 
    var diff=datediff(view.visStart,event.start);   //note datediff if a self-made function which returns the number of days between calendar start view and current day
    var rows=parseInt(diff/7); 
    var cols=diff;
    element.css('position','static'); 
    $('tr.fc-week'+rows+' td.fc-day'+cols+' div.fc-day-content div:first').append($(element));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T16:28:11.867

发生这种情况是因为图像被绝对定位并被迫看起来它们在日历中的位置很好。这些元素甚至不在表格单元格中，它们只是覆盖在表格上方。

此外，图像没有继承 11px 的宽度，因为它们的内联宽度为 54px。

修复并不容易。您需要更正脚本以将图像插入日历表格单元格中。或者，您需要绝对定位它们，使它们看起来在同一条线上。

# javascript - 使用javascript查找滚动条的位置

> ID：12026119
> 
> 赞同：0
> 
> 时间：2012-08-19T11:31:34.123
> 
> 标签：javascript, scrollbar

我需要提示我的用户，一旦他越过我的网页（主页）宽度的一半，下一页就会有一些有用的结果。为此，我想知道滚动条的确切位置，所以，只要滚动条的位置超过 50% ，我就可以触发一些 javascript 函数来做同样的事情。

我把图片中的滚动条圈出来了，我要找出来

![在此处输入图像描述](../Images/d166c7231cfb0888bde44d9f358ec334.png)

另外，如果我们找不到滚动条的位置，请告诉我一些替代方法来做同样的事情！

谢谢 ！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T11:55:48.030

您找不到滚动条的位置，因为它不是 DOM 的一部分，但您可以做的是确定位置。因为我不知道如何使用 vanilla JavaScript 来做，所以我会给你一个 jQuery 示例：

```
var scrollTop = $("body").scrollTop(); // pixels scrolled from top
var documentHeight = $(document).height(); // the height of the document

if(scrollTop >= documentHeight / 2){
    // 50%+ scrolled
} 
```

# jquery - jQuery DatePicker 问题：字符串未被识别为有效的 DateTime

> ID：12026121
> 
> 赞同：0
> 
> 时间：2012-08-19T11:31:41.650
> 
> 标签：jquery, jquery-ui-datepicker

例外是：

操作失败字符串未被识别为有效的日期时间。

这是jQuery参考

```
 <script src="Resource/JS/jquery-1.7.2.min.js" type="text/javascript"></script>
<link href="Resource/css/jquery-ui-1.8.21.custom.css" rel="stylesheet" type="text/css" />
<script src="Resource/JS/jquery-ui-1.8.21.custom.min.js" type="text/javascript"></script> 
```

弹出 DatePicker 的函数：

```
 function showDatePicker(datepicker) {
            var id = "#" + datepicker;
            $(function () {
                $(id).datepicker();
            });
        }

    </script> 
```

输入组件：

```
<input id="tbActionDate" type="text" runat="server"  class="datePickerControl" clientidmode="Static"  onclick="showDatePicker('tbActionDate');" /> 
```

而且我尝试过这样做： $(id).datepicker("option", "dateFormat", "mm/dd/yy"); 它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T12:05:15.723

您可以使用最新版本的 jQuery UI datepicker，它具有以下有用的功能

*   [http://docs.jquery.com/UI/Datepicker/formatDate](http://docs.jquery.com/UI/Datepicker/formatDate)
*   [http://docs.jquery.com/UI/Datepicker/parseDate](http://docs.jquery.com/UI/Datepicker/parseDate)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T14:01:28.727

我终于弄明白了。这不是因为 jQuery DatePicker，而是 .NET 中的 Convert.ToDateTime() 无法处理日期格式（mm/dd/yyyy）。

所以我写了我自己的方法将它转换为正确的DateTime对象。

你们有什么解决方案可以将此日期格式转换为 C# 中的 DateTime 对象吗？

我尝试使用 CultureInfo 来获取本地文化对象并将其用作 Convert.ToDateTime() 方法中的参数，但它不起作用。

# php - 你如何在 Imagick 中设置图像像素颜色？

> ID：12026124
> 
> 赞同：2
> 
> 时间：2012-08-19T11:32:08.850
> 
> 标签：php, imagemagick, imagick

我正在使用 Imagick 进行图像处理。我找不到任何本机函数来设置特定的像素颜色，而有一个可以得到一个。我是说，

```
$image->getimagepixelcolor($i, $j); 
```

将返回一个对象以获取像素的颜色，`($i, $j)` 但似乎没有设置颜色的方法。像这样的东西，

```
$image->setimagepixelcolor($i, $j, "#FFFFFF"); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-26T14:10:41.533

类上没有`setImagePixelColor`方法`Imagick`。我不能说为什么没有，但是可以通过调用[ImagickPixelIterator](http://www.php.net/manual/en/class.imagickpixeliterator.php)或[ImagickDraw](http://www.php.net/manual/en/class.imagickdraw.php)类来实现相同的效果。

**迭代器示例：**

正确的方法是迭代图像中的像素，改变像素颜色，然后将数据同步回图像。

```
$image = new Imagick('source.png');

// Grab iterator
$iterator = $image->getPixelIterator();
// Seek to row at Y
$iterator->setIteratorRow($j);
// Get pixel in row
$row = $iterator->getCurrentIteratorRow();
// Seek to pixel at X
$pixel = $row[$i];
// Set Color
$pixel->setColor('#FFFFFF');
// Sync data back to image
$iterator->syncIterator();

$image->writeImage('out.png'); 
```

**绘制示例：**

另一种选择是在现有图像之上绘制新像素。

```
$image = new Imagick('source.png');
$draw  = new ImagickDraw();
$color = new ImagickPixel('#FFFFFF');

// Set fill color
$draw->setFillColor($color);
// Draw a point at X,Y
$draw->point($i,$j);
// Apply the drawing on top of the image
$image->drawImage($draw);

$image->writeImage('dest.png'); 
```

当然使用 PHP 中的 Object，您可以简单地扩展核心 Imagick 对象，并创建自己的`setImagePixelColor`方法

```
class MyImagick extends Imagick 
{
   /**
    * Alter image by defining the color of a single pixel
    *
    * @param integer $x
    * @param integer $y
    * @param string $color
    */
   public function setImagePixelColor($x,$y, $color) 
   {
      //... Apply one of the methods here
      $draw  = new ImagickDraw();
      $draw->setFillColor(new ImagickPixel($color));
      $draw->point($x,$y);
      $this->drawImage($draw);
   }
} 
```

# c - C、#include 和#define 覆盖

> ID：12026126
> 
> 赞同：1
> 
> 时间：2012-08-19T11:32:25.900
> 
> 标签：c, include

我有一个这样的图书馆：

```
mylib
  |__ device
        |__ lcd.h
        |__ lcd_config.h
        |__ lcd.c 
```

.

```
// File lcd.h
#include lcd_config.h

void function initLcd();
void function writeLcd(); 
```

.

```
// File lcd.c
#include lcd.h

void function writeLcd(){
     // some code
} 
```

.

```
// File lcd_config.h inside mylib
#ifndef lcd_config_H
#define lcd_config_H

#define TEST 10

#endif 
```

我想在项目中使用该库，但我想重新定义配置文件。

```
myproject
    |__ lcd_config.h
    |__ mylcd.c
    |__ main.c 
```

.

```
// File lcd_config.h inside myproject(at main.c level)
#ifndef lcd_config_H
#define lcd_config_H

#define TEST 20

#endif 
```

.

```
// File mylcd.c
#include lcd.h

void function initLcd(){
     printf("%d", TEST);
} 
```

.

```
// File main.c
#include "device/lcd.h"

int main(void) {
    initLcd(); // print 10
} 
```

.

```
// File main1.c
#include "lcd_config.h"
#include "device/lcd.h"

int main(void) {
    initLcd(); // print 10 too
} 
```

在我的项目中，我希望 TEST = 20，我该如何实现？

**更新**

现在看文件，这是我的真实情况。

要打印 TEST=20 我必须把`#include lcd_config.h`before `#include lcd.h`inside `mylcd.c`。如果我把它放在主文件中（如 main1.c） 10 将被打印，我认为预处理在 mylcd.h 之前查看 main.c。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T11:37:28.310

首先包含将 TEST 定义为 20 的标头。请注意，`#ifndef`条件会阻止第二个标头实际执行任何操作，这就是为什么在您的情况下 TEST 的值仍然为 10。

更详细地说，下面的块说“这个标题应该只包含在项目中一次”。如果在第一个标题之后包含该标题，则在其中定义具有相同子句的第二个标题不会改变任何事情。

```
#ifndef lcd_config_H
#define lcd_config_H
...
#endif 
```

我认为整个情况看起来很奇怪，但是不应该有太多具有完全相同名称的标题。

# php - 如何判断一个电话号码是否被张贴？

> ID：12026135
> 
> 赞同：0
> 
> 时间：2012-08-19T11:33:43.107
> 
> 标签：php

在我的一个网站上，我遇到了太多新用户不阅读规则并公开发布他们的电话号码的问题，这是违反规则的。

因此，为了结束这种情况，我想在发布帖子之前检查是否已提交电话号码。确定电话号码是否出现在字符串中的最佳和最有效的方法是什么？

这是我对此的思考过程：

1) 电话号码至少为 10 位数字。

2) 有时用户在他们的电话号码中使用`(`、`)`、和 空格。`-`

因此，要检查是否已发布电话号码，似乎我必须获取帖子的字符串，从`2)`上面删除所有字符，然后搜索任何出现的 10 个或更多连续数字。

当然，这可以被规避，但绝大多数新用户并没有试图规避规则，他们只是发布他们的电话号码，完全不遵守规则，我不知道还有什么方法可以阻止他们，所以我不必浪费太多时间来审核网站。

我将如何在 PHP 中执行上述操作？或者，还有更好的方法？

**编辑：** 澄清一下，我的网站已经有一个“报告帖子”按钮供用户报告违规帖子，这是我审核网站的方式，但我 90% 的审核时间都花在了编辑电话号码并警告那些用户不要这样做。可以说，我想通过在问题发生之前将其捕获并警告用户有关规则来“抢占”问题。当然，用户可以规避它，但是我会禁止他们，因为他们被特别警告不要这样做，而且我无法理解许多用户故意无视规则只是为了被禁止。所以我的解决方案可以为我节省很多时间，而且缺点最小。我只是无法理解在我的网站上输入 10 个或更多连续数字而不是电话号码的许多案例，所以我不担心误报。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T11:37:49.123

> 哪个最好

手动检查帖子（我猜这不是一个有效的选项，但它是最好的）。

> 最有效的方式

不要这样做。

> 当然，这是可以绕过的，

错误的。新用户和当前用户都**将**绕过它。

抱歉，这并不是您问题的真正答案，但它是恕我直言的唯一正确答案。

* * *

但是，您可以在帖子上运行一些正则表达式模式以检查其中是否可能有电话号码，但这样做有两个缺点：

1.  用户将规避这一点，您将无法将他们全部困住
2.  您可能会得到误报，这对用户来说*非常*烦人。

如果你真的想走这条路，最好的做法是获取大量包含电话号码的帖子，并列出你在其中找到的所有可能的电话号码格式。一旦你有了这个列表，你就可以根据这个列表编写一个正则表达式模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T11:49:27.727

您可以删除您在 2) 中提到的所有字符，然后使用像这里这样的正则表达式：[https](https://stackoverflow.com/a/3764902/1130734) ://stackoverflow.com/a/3764902/1130734找到这样的数字

```
$string = preg_replace('/[() -]+/','',$string);
$found = preg_match("/\+?[0-9][0-9()-\s+]{4,20}[0-9]/",$string);
if ($found==1){
    //tell user they may be breaking the rules and face a ban
} 
```

您可能想要更改正则表达式，使其仅匹配以零或加号开头的数字（虽然不确定这是否正确......）`/[0\+][0-9()-\s+]{4,20}[0-9]/`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T11:43:21.630

最好的办法是使用正则表达式来搜索常见的电话号码格式。这可以通过经验不断审查和改进

然而，人类是一种狡猾的生物，所以你永远不会消灭它。

**编辑**

当然你可以使用 PHP。

只需在代码中添加在您的网站上发布的一些验证 - 即执行检查以确保发布遵守规则。

# emacs - Emacs：defun 或 defmacro 主体中的代码不能引用周围的词法变量？

> ID：12026137
> 
> 赞同：5
> 
> 时间：2012-08-19T11:34:13.200
> 
> 标签：emacs, lisp, elisp, emacs24, lexical-scope

**2013 年 5 月更新**：从 GNU Emacs 24.3.1 开始，(let .. (defun..)) bytecompiles 很好，没有警告，bytecompiled 代码与未编译代码一样工作。只是不要忘记将文件变量添加`lexical-binding: t`到要进行字节编译的文件中。现在不需要在此问题末尾的解决方法。

* * *

[Lexical Binding - Emacs Lisp Manual](http://www.gnu.org/software/emacs/manual/html_node/elisp/Lexical-Binding.html)有这一段：

> 请注意，symbol-value、boundp 和 set 等函数仅检索或修改变量的动态绑定（即其符号值单元格的内容）。此外，defun 或 defmacro 主体中的代码不能引用周围的词法变量。

我不确定我是否理解了第二句话的意思。在下面应该以词法绑定模式运行的代码中，defun 主体中的代码成功地引用了 name 的词法绑定值`n`。

```
(let ((n 0))
  (defun my-counter ()
    (incf n)))

(my-counter) ;; 1
(my-counter) ;; 2 
```

这句话只是说 (let .. (defun ..)) 是一种不好的做法吗？

* * *

**解决方法**：

```
;; -*- lexical-binding: t -*-

;; a way to define the counter function without byte-compile error or warning

(defvar my--counter-func
  (let ((n 0))
    (lambda ()
      (setq n (1+ n)))))

(defun my-counter ()
  (funcall my--counter-func))

;; another way to define the counter function, again without byte-compile error or warning

(fset 'my-another-counter
      (let ((n 0))
        (lambda ()
          (setq n (1+ n))))) 
```

这是测试上述代码的代码：

```
;; run:
;; emacs -q --load path-to-the-el-file-of-this-code.el

(load "path-to-file-defining-my-counter.elc") ;; loading the ELC file to test if byte-compiled code runs as expected.

(print (my-counter)) ;; 1
(print (my-counter)) ;; 2

(print (my-another-counter)) ;; 1
(print (my-another-counter)) ;; 2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T06:01:57.110

至少在 Emacs 24.1.1 中，代码不能很好地进行字节编译。我在文件中保存了以下代码`foo.el`，它使用`setq`代替`incf`以避免`cl`库可能产生的任何影响：

```
;; -*- lexical-binding: t -*-

(let ((n 0))
  (defun my-counter ()
    (setq n (1+ n)))) 
```

当我尝试对其进行字节编译（`M-x byte-compile-file``foo.el`）时，我收到以下警告消息：

```
foo.el:3:1:Warning: Function my-counter will ignore its context (n)
foo.el:3:1:Warning: Unused lexical variable `n'
foo.el:5:11:Warning: reference to free variable `n'
foo.el:5:17:Warning: assignment to free variable `n' 
```

所有消息都表明`defun`构造体中的代码不能`n`像手册所声称的那样引用周围的词法变量。

实际上，当我加载字节编译代码 ( `M-x load-file``foo.elc`) 并`(my-counter)`评估表单时，我得到了以下错误：

```
Debugger entered--Lisp error: (void-variable n)
  ... 
```

不幸的是，我不确定为什么在以源代码形式评估时代码似乎可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-22T15:38:57.140

正如我在 gnu.emacs.help 上回复的那样，您可以使用 (defalias 'foo (lambda ...)) 来解决该限制。在 Emacs 的开发代码中，这个限制被解除了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T04:29:57.023

就像您在上面所做的那样，从一个定义中引用词法范围（*）中的变量是非常好的，就像该手册页上的“my-ticker”示例一样。

要么我错过了手册中说的那一行：

> defun 或 defmacro 主体中的代码不能引用周围的词法变量。

应该说更像：

> defun 主体中的代码只能访问在相同词法范围内定义的词法变量。

注意：其他答案中有关于字节编译此类代码的问题的评论。这些应该在最新的 emacs 中修复。我已经在 v24.2.50.1 中验证了这个字节可以正确编译和加载。

# c# - 如何为 PdfPTable 设置宽度并在页面中对齐表格中心

> ID：12026138
> 
> 赞同：1
> 
> 时间：2012-08-19T11:34:17.373
> 
> 标签：c#, itextsharp, pdfptable

我是 iTextSharp 的初学者，我编写此代码以将 RoundRectangle 创建到 PdfPTable 并在页面中心对齐表格

```
 string pdfpath = Server.MapPath("PDFs");
        RoundRectangle rr = new RoundRectangle();

        using (Document document = new Document())
        {
            PdfWriter writer = PdfWriter.GetInstance(document, new FileStream(pdfpath + "/Graphics6.pdf", FileMode.CreateNew));
            document.Open();
            PdfPTable table = new PdfPTable(1);
                           float[] f=new float[]{0.5f};

            table.SetWidths(f);
            PdfPCell cell = new PdfPCell()
            {
                CellEvent = rr,
                Border = PdfPCell.NO_BORDER,

                Phrase = new Phrase("test")
            };
            table.AddCell(cell);
            document.Add(table); 
```

我想改变表格宽度我改变代码

```
 string pdfpath = Server.MapPath("PDFs");
        RoundRectangle rr = new RoundRectangle();

        using (Document document = new Document())
        {
            PdfWriter writer = PdfWriter.GetInstance(document, new FileStream(pdfpath + "/Graphics6.pdf", FileMode.CreateNew));
            document.Open();
            PdfPTable table = new PdfPTable(1);
            table.TotalWidth = 5;

            int[] w = new int[] { 12};
           table.SetWidths(w);
            PdfPCell cell = new PdfPCell()
            {
                CellEvent = rr,
                Border = PdfPCell.NO_BORDER,

                Phrase = new Phrase("test")
            };
            table.AddCell(cell);
            document.Add(table); 
```

但没有工作，也没有改变页面中的宽度表。请帮我。谢谢大家

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T12:04:47.187

您可以使用`TotalWidth`属性设置宽度，`PdfPTable`如下代码：

```
string pdfpath = Server.MapPath("PDFs");
RoundRectangle rr = new RoundRectangle();

using (Document document = new Document())
{
    PdfWriter writer = PdfWriter.GetInstance(document, new FileStream(pdfpath + "/Graphics200.pdf", FileMode.CreateNew));
    document.Open();
    PdfPTable table = new PdfPTable(1);
    table.TotalWidth = 144f;

    table.LockedWidth = true;
    PdfPCell cell = new PdfPCell()
    {
        CellEvent = rr,
        Border = PdfPCell.NO_BORDER,
        Phrase = new Phrase("test")
    };
    table.AddCell(cell);
    document.Add(table);
} 
```

# javascript - Mozilla 并没有完美地执行此代码，尽管它适用于 Chrome 和 IE

> ID：12026141
> 
> 赞同：0
> 
> 时间：2012-08-19T11:34:33.403
> 
> 标签：javascript, regex, expression

它是 JavaScript 中的文件验证代码，用于验证上传的文件是否符合要求的格式。使用 Mozilla 执行此代码时，Mozilla 总是显示“不是有效的文件扩展名”错误，而此脚本可以完美地与 Chrome 和 IE 一起使用。

```
regx_docx = /^(([a-zA-Z]:)|(\\{2}\w+)\$?)(\\(\w[\w].*))+(.doc|.docx|.DOC|.DOCX|.jpg|.jpeg|.JPG|.JPEG|.gif|.GIF|.bmp|.BMP|.png|.PNG|.pdf|.PDF|.xls|.XLS|.xlsx|.XLSX|.txt|.TXT|.rar|.RAR|.zip|.ZIP)$/;
        for (var i = 0; i < fields.length; i++) {
            var field = fields[i];      
            if ((field.name == 'doc[]') && (field.value!= '')) {            
                if(!regx_docx.test(field.value)){
                    count++;
                    errtxt+= "\n"+count+") Not a valid file Extension.";
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-09T07:08:18.293

那个部分

```
^(([a-zA-Z]:)|(\\{2}\w+)\$?)(\\(\w[\w].*))+ 
```

有两个方面的问题：

1.  它仅适用于 Windows，因为它假定`\`为路径分隔符
2.  它仅在浏览器提供所选文件的路径时才有效，出于安全原因，Firefox 不提供（IE 提供虚拟路径）

由于您只对扩展感兴趣，只需从您的正则表达式中删除该部分即可。

此外，您需要转义点以使其与文字`.`字符匹配。

```
regx_docx = /\.(doc|docx|DOC|DOCX|jpg|jpeg|JPG|JPEG|gif|GIF|bmp|BMP|png|PNG|pdf|PDF|xls|XLS|xlsx|XLSX|txt|TXT|rar|RAR|zip|ZIP)$/; 
```

# java - 用 jBCrypt 散列时有什么方法可以找回纯文本密码

> ID：12026149
> 
> 赞同：0
> 
> 时间：2012-08-19T11:35:51.763
> 
> 标签：java, cryptography, hash

我正在使用 jBCrypt 对密码进行哈希处理并将其存储在数据库中。由于它是一种方式算法，我们无法获取密码（原始纯密码字符串）。

当用户忘记密码时，我想我们无法提供密码，而只能要求用户设置新密码。我的意见正确吗？

有没有办法在用 jBCrypt 散列时检索纯文本密码（来自散列的密码？:-) .. 我不这么认为......）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T11:37:20.807

不，没有。这就是使用散列函数的全部意义所在。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T11:45:15.740

有一种方法 - 蛮力破解，直到你有一个匹配。但这不是一个选择。

无论如何 - 我不会相信任何能够告诉我“hej dantuch，似乎你忘记了密码，所以它是 YOUR_SECRET_PASSWORD”的服务......这意味着它被存储为纯文本或类似的东西。

# .net - Google Drive SDK 请求权限

> ID：12026152
> 
> 赞同：1
> 
> 时间：2012-08-19T11:36:02.273
> 
> 标签：.net, oauth-2.0, google-drive-api

我有一个使用 DrEdit 示例在 .NET 中创建的测试应用程序。我已将此发布到 testusers 组，以便我可以在 Chrome 网上商店中打开它。但是每次我访问它时，它都会请求权限“我的应用程序正在请求权限：”。

这是预期的行为还是我的 .NET 应用程序中的事故？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T20:16:48.327

通过设置`approval_prompt=force`谷歌完全按照他们在[文档](https://developers.google.com/accounts/docs/OAuth2WebServer#formingtheurl)中指定的内容：

> 指示是否应重新提示用户同意。默认值为自动，因此给定用户应仅在第一次通过序列时看到给定范围集的同意页面。如果该值为 force，则即使用户先前已同意您针对给定范围的应用程序，用户也会看到一个同意页面。

因此，当您设置该值时，您不能期待别的东西。

您应该更好地寻找您遇到的其他问题的原因，而不是在不了解其后果的情况下实施一些解决方法。如果您通过查找该原因需要帮助，请随时发布一个新问题，您可以在其中为代码的*相关*部分提供一些上下文，我相信有人可以帮助您。

# php - Jquery 自动完成搜索框结果以 HTML 格式显示

> ID：12026156
> 
> 赞同：0
> 
> 时间：2012-08-19T11:36:30.437
> 
> 标签：php, jquery-autocomplete, forms, search-box

我的网站上的 jquery autocoomplete 插件有点问题。我有一个搜索框，可以针对数据库查询注册用户的用户名。这很好用，但是一方面。当用户单击用户完成对查询的搜索时，输入文本字段中的结果以 HTML 形式显示，即 和 。

我只想显示他们在输入框中选择的用户名，或者直接将它们直接重定向到查询页面。

如果这听起来令人困惑，这是该网站，您无需注册即可搜索... [http://www.socialpurge.com/search_query.php](http://www.socialpurge.com/search_query.php)

下面是一些 php，它是用于搜索数据库的附加代码

```
<?php

$input = $_POST['search'];

include($_SERVER['DOCUMENT_ROOT'] . "/scripts/members_connect.php");

$c_search = mysql_query("SELECT * FROM members WHERE fname LIKE '%$input%' or fullname LIKE '%$input%'");

while($rows = mysql_fetch_assoc($c_search)) {

$data = $rows['fullname'];

$fname = $rows['fname'];

$id = $rows['ID'];
    ///////  Mechanism to Display Pic. See if they have uploaded a pic or not  //////////////////////////

$check_pic = "/members/$id/default.jpg";

$user_pic = print "<img src=\"$check_pic\" width=\"35px\" />"; // forces picture to be 100px wide and no more

print "<a href='profile.php?=&fname=" . $fname ."&user=" . $id . "'>" . $data . "</a>\n";

}

    mysql_close($con);

    ?> 
```

下面是调用上述 php.ini 的 Javascript 函数。此功能附加到搜索表单

```
 <script>

    $().ready(function() {

    $("#search").autocomplete("include/user_search.php", {

        width: 260,

        matchContains: true,

        selectFirst: false

});

 });

    </script> 
```

如果您在该网站上进行快速搜索，您会看到我在说什么。如果有人有任何想法，那就太好了。顺便说一句，我尝试稍微更改一下 php，但仍然无法正常工作。我对Javascript有点熟悉。我尝试更改 autocomplete.js 插件的来源，但没有奏效。

有没有办法使用 Javascript/Jquery 删除 html 标签并在触发选择和/或 onclick 事件后保留文本？

请帮我

回答

Ofir Baruch 是对的，我只需要完全改变我正在使用的功能。我正在为 Jquery 使用单独的函数插件。我更新了我拥有的 Jquery，并使用了打包在 js 文件中的原生 Jquery。如果它对任何人有帮助，这就是我所做的。

```
<script type="text/javascript" src="js/jquery-1.4.2.min.js"></script> 
<script type="text/javascript" src="js/jquery-ui-1.8.2.custom.min.js"></script> 
    <link rel="stylesheet" href="css/smoothness/jquery-ui-1.8.2.custom.css" /> 

 <script>
$(document).ready(function() {
        $("input#search").autocomplete({
                source: 'include/user_search.php',
                minLength: 1,
                select: function(event, ui) {
                    var item = ui.item.value.replace(/(<([^>]+)>)/ig,"");

                    $('#search').val(item);
                    return false; 
                }
        });
});
</script> 
```

然后在我的查询文件中：

```
 <?php

$input = $_REQUEST['term'];
include($_SERVER['DOCUMENT_ROOT'] . "/scripts/members_connect.php");
$c_search = mysql_query("SELECT * FROM members WHERE fname LIKE '%$input%' or fullname LIKE '%$input%'");
$data = array();
if ( $c_search && mysql_num_rows($c_search) )
{
while( $row = mysql_fetch_array($c_search, MYSQL_ASSOC) )
{
    $check_pic = "/members/" . $row['ID'] . "/default.jpg";
    $data[] = array(
        'label' => "<img src='/members/" . $row['ID'] . "/default.jpg' width='35px' /><a href='profile.php?=&fname=" . $row['fname'] . "&user=" . $row['ID'] . "'>" . $row['fullname'] . "</a>"
    );
}
}

// jQuery wants JSON data
echo json_encode($data);
flush();
mysql_close($con);
?> 
```

再次感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T13:34:47.937

基本上，php 文件应该返回一个 JSON 字符串（仅限数据），jquery 脚本应该处理它的“设计”，附加标签等（img，a）。

无论如何，自动完成 jquery UI 插件有一个`select`事件。

```
select: function(event, ui) { ... } 
```

> 当从菜单中选择一个项目时触发；ui.item 是指选中的项目。select 的默认操作是将文本字段的值替换为所选项目的值。取消此事件可防止值被更新，但不会阻止菜单关闭

所以 ，

```
 $("#search").autocomplete("include/user_search.php", {

        width: 260,
        matchContains: true,
        selectFirst: false,
        select: function(event, ui) { 

           //use ui.item to manipulate the HTML code and to replace the field's
           //value only with the user's name.

         }

}); 
```

**编辑：**

如前所述，您的 php 文件应返回 JSON 格式的数据。`array variable`在下一个结构中使用 an ：

```
$results = array(
0 => array('id' => $ROW['id'] , 'name' => $ROW['name'] , 'fullname' => $ROW['full_name']),
....
....
); 
```

使用php函数：`json_encode`和`echo`它。

在您的 jquery 中，执行以下操作：

```
function(data) {
    $.each(data.items, function(i,item){
      //use: item.id , item.name , item.full_name
      $("#autocomplete-list").append("<img src='dir/to/image/"+item.id+".jpg>"+item.name);
    }); 
```

# c - 用 %20 替换硬盘上文件中的空格

> ID：12026158
> 
> 赞同：1
> 
> 时间：2012-08-19T11:36:47.483
> 
> 标签：c, file

我已经阅读了之前发布的类似问题的所有答案，[用 C 中的 %20 替换空格](https://stackoverflow.com/questions/3424474/replacing-spaces-with-20-in-c)。但是，我无法猜测在硬盘上的文件的情况下我们如何做到这一点，其中磁盘访问可能很昂贵并且文件太长而无法立即加载到内存中。如果可以安装，我们可以简单地加载文件并写入相同的现有文件。此外，对于内存限制，人们希望替换原始文件而不是创建新文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T11:55:17.137

可怕的想法。由于 "%20" 比 " " 长，你不能只替换文件中的字符，你必须将后面的任何内容移到后面。如果您想在现有磁盘文件上执行此操作，这将非常混乱且昂贵。

您可以尝试在第一次通过时确定文件的总增长，然后从文件后面进行整个移位，考虑到块大小并在遇到“”时调整移位。但正如我所说——混乱。除非绝对必须，否则您真的不想这样做。

读取文件，进行替换，写入新文件，然后将新文件重命名为旧文件。

编辑：作为副作用，如果您的程序在执行此操作时终止，您将不会得到一个半转换的文件。这实际上是许多程序写入新文件的原因，即使他们不需要，以确保文件“始终”正确，因为新文件仅在成功写入后替换旧文件。这是一个简单的事务方案，不考虑系统故障，但适用于应用程序故障（包括用户强行终止程序）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T12:00:06.437

对于替换部分，您可以有两个缓冲区，一个用于读入，一个用于将翻译后的字符串写入其中，另一个用于写入磁盘。根据您的内存限制，即使是小的输入缓冲区（比如 1KiB）也足够了。但是，为避免重复重新分配，您可以为输出保留一个固定缓冲区，并将其大小设为输入缓冲区大小的三倍（最坏的情况，输入全是空格）。总共是 4KiB 的内存，加上操作系统使用的任何缓冲区。我建议使用磁盘块大小的倍数作为输入大小。

问题是您需要读取和写入同一个文件。不幸的是，这是不可能的。如果你逐个字符地阅读，想想当你到达一个空格时会发生什么......然后你必须写三个字符并覆盖文件中接下来的两个字符。不完全是你想要的。

# jquery - jquery attr("href") 返回相同的值

> ID：12026166
> 
> 赞同：0
> 
> 时间：2012-08-19T11:38:03.347
> 
> 标签：jquery

我有两个名为“阅读更多”（代码底部）的链接，其中包含不同的值。单击时，他们调用一个 jquery 函数将其发送到 demo_search.php。问题是，无论我点击哪个链接，我都会得到相同的值。如果我要使用

```
var searchString = ($(this).attr("href")) 
```

代替

```
var searchString = ($(".more_info").attr("href")) 
```

一切正常。但我不能使用`(this)`. 如何解决这个问题？

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Test Search</title>
<link rel="stylesheet" type="text/css" href="my.css">
<script type="text/javascript" src="http://localhost/dev/ajax/jquery.js"></script>
<script type="text/javascript">

$(function() {

    $(".more_info").click(function() {

        // getting the value that user typed
        var searchString    =($(".more_info").attr("href"));

        // form the queryString
        var data            = 'search='+ searchString;
        var imgLoad         = '<img src="loading.gif">';

        // if searchString is not empty
        if(searchString) {
        alert (searchString);
            // ajax call
            $.ajax({
                type: "GET",
                url:  "demo_search.php",
                data: searchString,
                beforeSend: function(html) { // this happens before actual call

                    $(".word").html(searchString);
                    $(".imgProgress").html(imgLoad);

                },
               success: function(page_data){ // this happens after we get results
                    $("#results").empty();
                    $("#results").fadeIn(200);
                    $("#results").append(page_data);
                    $(".imgProgress").empty();
              },

            });    
        }
        return false;
    });
});
</script>

</head>
<body>
<div id="container">
<div style="margin:20px auto; text-align: center;">
<form method="post">
    <input type="text" name="search" id="search_box" class='search_box'/>
    <input type="submit" value="Search" class="search_button" /><br />
</form>
</div>      

<div>
<div id="searchresults">Search results for <span class="word"></span><span class="imgProgress"></span></div>
<div id="results" class="update" style="display:none;"><ul></ul>

</div>
<div>
<a href="search=sony&offset=20&lang=en" class="more_info">Read More</a>
<a href="search=pioneer&offset=30&lang=en" class="more_info">Read More</a>
</div>

</div>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T11:51:12.347

您有多个元素，其类为 more_info。这意味着您的选择器会产生多个元素。你不可能得到两个不同元素的href。

使用此代码时代码起作用的原因是因为一次只有一个元素被点击。

要么你需要继续使用它，要么你需要编写一个唯一的选择器，比如给 span 一个 id 为 more_info_1。

此外，您的评论似乎没有任何意义。你写：

        // 获取用户输入的值 var searchString =($(".more_info").attr("href"));

你的意思是写吗？

        var search = $(".search_box").val();

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T11:57:27.167

`($(".more_info")`将返回您使用此类的所有元素的集合。除非您在数组中指定特定位置，否则调用其他函数将始终以该集合中的第一个元素为目标。*当您单击两个不同的“阅读更多”时，*
*比较下面小提琴之间的变化`searchStringA`。`searchStringB`*

`this`被调用的函数是一个 JavaScript 对象，因此它没有`.attr()`属于 jQuery 范围的方法。*见`searchStringC`小提琴*

所以你必须通过转换`this`为一个 jQuery 对象`$(this)`，然后你可以调用

```
$(this).attr("href") 
```

我剥离了原始代码并将`<a>`标签替换`<span>`为使其更易于点击:) 你可以在[这里](http://jsfiddle.net/Uj6TH/2/)找到小提琴。
*我强烈建议它使用打开的控制台运行以观察行中的错误：*

```
var searchStringC    = this.attr("href"); 
```

# excel - 从参考单元格的下一个单元格中获取值

> ID：12026171
> 
> 赞同：0
> 
> 时间：2012-08-19T11:38:59.587
> 
> 标签：excel

简而言之，我有下表：

![桌子](../Images/0cc525f8fe6675fd337b5853fd01887d.png)

我在 A15 单元格中使用对 A2 单元格的引用，我正在尝试 B15 和 C15 来显示 B2 和 C2 中显示的适当数值。

我怎样才能归档它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T11:42:23.487

点击 B15。在单元格边框中，将方​​块拖到右下角到 C15 并松开。完毕。

这个问题属于[超级用户](https://superuser.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T11:44:30.490

有一个简单的方法来做到这一点

放`A15 = A$2`

选择A15，同时点击A15的右下角拖动光标（光标会变成' **+** '）到C15，数值会自动填入。

# android - Android - 无法获取某些联系人的电话号码

> ID：12026173
> 
> 赞同：1
> 
> 时间：2012-08-19T11:39:12.020
> 
> 标签：android, android-contacts, phone-number, contactscontract

我在提取联系人列表中某些人的电话号码时遇到问题。

首先，我在列表视图中显示所有联系人：

```
String[] projection = new String[] {
            ContactsContract.Contacts._ID,
            ContactsContract.CommonDataKinds.Phone.CONTACT_ID,
            ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME,
            ContactsContract.CommonDataKinds.Phone.NUMBER
    };

mCursor = mContext.getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI,
            projection, ContactsContract.CommonDataKinds.Phone.CONTACT_ID + "=?", new String[] {mContactId}, null); 
```

单击一个项目时，这就是我获取contact_id的方式：

```
@Override
public void onListItemClick(ListView l, View v, int position, long id) {
        Cursor currentCursor = mContactsAdapter.getCursor();

    if (currentCursor != null) {
        notifyOnContactSelectedListeners(String.valueOf(id));
    }
} 
```

然后我创建一个新片段，并在加载它时查询联系人的电话和显示名称：

```
if (cursor != null && cursor.getCount() > 0) {

        cursor.moveToFirst();

        String firstName = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.DISPLAY_NAME));
        String number = cursor.getString(cursor.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
    } 
```

所以对于一些有电话的人，我通过这种方式得到电话号码，这没关系。但是对于某些人来说，我无法通过这种方式获取电话号码 - 但他们在默认的电话通讯录中确实有电话号码。

什么地方出了错？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T13:59:31.040

试试这个可能对你有用

公共类联系人扩展活动实现 OnItemClickListener{

```
private static final int PICK_CONTACT = 0;
Cursor c;
Cursor cursor,phones,emails,address;
String id,phoneNo,name;
String[] from;
int[] to;
ListView lv;
Cursor cur,pCur;
List<String> list1 = new ArrayList<String>();

@Override
public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  setContentView(R.layout.contact);
  lv = (ListView)findViewById(R.id.contactlist);
  displayContacts();
  lv.setAdapter(new ArrayAdapter<String>(this,
          android.R.layout.simple_list_item_1, list1)); 
  lv.setOnItemClickListener(this);
}

private void displayContacts() {

    ContentResolver cr = getContentResolver();
   cur = cr.query(ContactsContract.Contacts.CONTENT_URI,
            null, null, null, null);
    if (cur.getCount() > 0) {
        while (cur.moveToNext()) {
            id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
             name = cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
            if (Integer.parseInt(cur.getString(
                    cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
                  pCur = cr.query(
                         ContactsContract.CommonDataKinds.Phone.CONTENT_URI, 
                         null, 
                         ContactsContract.CommonDataKinds.Phone.CONTACT_ID +" = ?", 
                         new String[]{id}, null);
                 while (pCur.moveToNext()) {
                     phoneNo = pCur.getString(pCur.getColumnIndex(ContactsContract.CommonDataKinds.Phone.NUMBER));
                 // setContact(name,phoneNo);
                     System.out.println("name"+name+"ph no"+phoneNo);
                     list1.add(name+"\n"+phoneNo);
            //       Toast.makeText(this, "Name: " + name + ", Phone No: " + phoneNo, Toast.LENGTH_SHORT).show();

                 } 

            pCur.close();
          }
        }
    }

}

@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    // TODO Auto-generated method stub
    String s = lv.getItemAtPosition(arg2).toString();

    Log.i("my msg", s.substring(0, s.indexOf("\n")));

    Toast.makeText(this, s.substring(s.indexOf("\n")+1,s.length() ),1 ).show();
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T11:58:41.350

我也有类似的困难。我发现我无法收到的号码都是从我链接的 Facebook 帐户中导入的。您将能够检测到联系人存在，并且确实他们有电话号码。但是，当您尝试使用 SQL 查询检索所述数字时，返回的结果将是`null`.

事实证明，Facebook 出于安全原因限制了对其联系人的访问。我还没有找到隐藏电话号码的其他提供商（例如 LinkedIn、Google）。

进一步阅读：[在 RawContacts 中找不到 Facebook 联系人](https://stackoverflow.com/questions/6038290/cannot-find-facebook-contacts-in-rawcontacts)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-10T19:37:19.233

我收到`null`了一些联系方式。

我验证了我的代码，发现在查询我正在使用的电话号码时，我根据它所说的 android[文档](https://developer.android.com/reference/android/provider/ContactsContract.CommonDataKinds.Phone#NUMBER)`ContactsContract.CommonDataKinds.Phone.NORMALIZED_NUMBER`更改为那个。`ContactsContract.CommonDataKinds.Phone.NUMBER`

> 用户输入的电话号码。

并且代码运行良好。

# c# - 如何安装/部署用 C#.net 开发的 VSTO Excel 2010 插件？

> ID：12026176
> 
> 赞同：4
> 
> 时间：2012-08-19T11:40:09.193
> 
> 标签：c#, excel, vsto

我已经在 C#.net 中使用 VSTO 开发了一个 excel 插件。现在我也想在其他机器上部署这个插件。所以安装它的用户可以在 excel 菜单 -> Addins-> MyAddin 中看到我的插件

或者，我可以只给他们带有 myaddin 的 Excel。这样任何拥有此 Excel 的人都可以访问插件并使用它。这样他们就不会在每个 excel 文件插件菜单中看到 myaddin。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T13:38:01.157

您可以使用 Visual Studio 2010 安装项目来创建 Windows Installer 包。请参阅此[MSDN](http://msdn.microsoft.com/en-us/library/ff937654.aspx)链接

引用该链接

> 摘要：了解如何使用 Visual Studio 2010 安装项目为 Office system 2010 加载项或文档级解决方案部署 Microsoft Visual Studio 工具，以创建面向 2007 Microsoft Office system 或 Microsoft Office 2010 的 Windows Installer 程序包。
> 
> Wouter van Vugt，代码顾问
> 
> 泰德帕蒂森，泰德帕蒂森集团
> 
> 本文由 Microsoft 经原作者许可更新。
> 
> 适用于：Visual Studio 2010 Tools for Office、2007 Microsoft Office system、Microsoft Office 2010、Visual Studio 2010。
> 
> 下载：[http ://code.msdn.microsoft.com/VSTO2010MSI](http://code.msdn.microsoft.com/VSTO2010MSI)
> 
> 内容
> 
> ```
> Overview
> Deployment Methods
> Deploying Office solutions that target the Visual Studio 2010 Tools for Office runtime
> Download Samples Provided with this Article
> Creating a Basic Installer
> Conclusion
> Additional Resources
> About the Authors 
> ```

**编辑**

您还可以看到所有用户的此[链接](http://blogs.msdn.com/b/vsto/archive/2010/03/08/deploying-your-vsto-add-ins-to-all-users-saurabh-bhatia.aspx)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-26T06:15:49.913

Conceptually, all you need to concentrate on is get yourself a COM object created which must be running even when the application (MS Excel here) is not open in the explorer.

More can be figured out from the following link :

[http://www.codeproject.com/Articles/7859/Building-COM-Objects-in-C](http://www.codeproject.com/Articles/7859/Building-COM-Objects-in-C)

(P.S : link is for c# not c).

Next you should give your users a .exe file including code to create the COM object.

# java - Java FTP上传创建一个空文件

> ID：12026180
> 
> 赞同：3
> 
> 时间：2012-08-19T11:40:47.840
> 
> 标签：java, ftp, apache-commons-net

当我尝试使用 Apache Commons`FTPClient`和此代码上传一个简单的文本文件时：

```
FTPClient ftp = new FTPClient();
int reply;

// connect
try {

    ftp.connect(serverAdd);
    ftp.login(username,password);
    reply = ftp.getReplyCode();

    if(FTPReply.isPositiveCompletion(reply)){
        System.out.println("Connected Success..");

        // upload file
        try {
            String fileDir = "testfile.txt";
            FileInputStream in = null;         
            in = new FileInputStream(fileDir);       
            ftp.storeFile(fileDir,in);
            System.out.println("File upload complete..");
        }catch(IOException e){
            System.out.println(e);
        }

        ftp.disconnect();
        System.out.println("Disconnected..");

    }else {
        System.out.println("Connection Failed..");
        ftp.disconnect();
    }    

} catch (SocketException ex) {
    ex.printStackTrace();
} catch (IOException ex) {
    ex.printStackTrace();
} 
```

在 FTP 服务器的根目录中创建了一个文件，但它是空的。怎么了？上传 PDF 文件时，我已经尝试将 ftp 模式更改为 BINARY。但该文件的大小也是 0。

```
ftp.setFileType(FTP.BINARY_FILE_TYPE); 
```

我也只想上传一堆txt文件，所以默认ascii模式应该没问题吧？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T16:25:03.067

好的，看来这是我的防火墙的问题。当我停用防火墙时，文件会毫无问题地写入 ftp。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-14T13:25:13.103

我遇到了同样的问题。创建的文件但大小为 0 KB。将模式设置为*被动*后，我的文件成功传输到 FTP 服务器。事实上，在 FTP 服务器上上传文件时，我们必须注意两件事。

1.  将文件类型设置为二进制

    ```
    objFtpClient.setFileType(FTP.BINARY_FILE_TYPE); 
    ```

2.  将模式设置为*被动*：

    ```
    objFtpClient.enterLocalPassiveMode(); 
    ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T16:55:16.247

您可能还必须将 FileTranserMode 设置为二进制：

```
ftp.setFileType(FTP.BINARY_FILE_TYPE);
ftp.setFileTransferMode(FTP.BINARY_FILE_TYPE); 
```

# objective-c - 存在 C API 函数的单元测试

> ID：12026181
> 
> 赞同：3
> 
> 时间：2012-08-19T11:40:49.520
> 
> 标签：objective-c, cocoa, c-preprocessor, ocunit

我的应用程序使用第三方**C** API 来完成某些任务。我想知道如何对调用 API 的类进行单元测试，因为设置单元测试环境以使其正常工作是不切实际的。

一个例子。我的一个类可能有这样的方法：

```
- (id) doSomeStuff
{
    // my code
    // ...
    thirdPartyDoStuffFunction(17, 4);
    // etc...
} 
```

对应的单元测试：

```
- (void) testDoSomeStuff
{
    MyClass *x = [[MyClass alloc] init];
    id result = [x doSomeStuff];

    STAssertNotNil(result, @"Result mustn't be nil");
} 
```

假设由于我无法控制的原因，`thirdPartyDoStuffFunction`在运行单元测试目标时调用会使测试崩溃。出于这个原因，并且因为我想确保使用正确的参数调用了该函数，所以我想模拟它。

这是我到目前为止所尝试的：

*   定义将第三方函数重定向到它们的模拟版本的[预处理器宏。](https://stackoverflow.com/questions/5271022/opengl-how-to-unit-test)但是，到目前为止，我无法完成这项工作。首先，我尝试`UNIT_TEST`在单元测试目标的配置中定义一个预处理器常量，但该常量只对我的单元测试类有影响，对我正在测试的类没有影响。
*   然后我发现this thread about [created a prefix header for the test target](https://stackoverflow.com/questions/6748087/xcode-test-vs-debug-preprocessor-macros)，这似乎与第一种方法的效果完全相同：`UNIT_TEST`前缀头中定义的常量仅在测试类中可见，而不是在测试类中可见。

**更新：**以上两种方法现在都对我有用。他们没有的原因似乎是`.m`被测类的实现文件（）没有被添加到单元测试目标中。一旦我添加了它们，宏就会按预期执行，即它们会覆盖第三方 API。

我仍然想知道为什么没有编译器/链接器错误，并且单元测试实际上运行了，而某些实现不存在于他们的目标中，但重要的是它现在可以工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T03:48:15.410

您应该创建一个`TestRedirect.h`包含以下内容的头文件：

```
#ifdef UNIT_TESTING

#define thirdPartyDoStuffFunction MyTest_thirdPartyDoStuffFunction
..........

#endif 
```

您将此文件包含在您要测试的类的所有文件中。之后，您创建 2 个不同的构建：

*   一个带有用于测试的编译器密钥`-DUNIT_TESTING`；
*   其他没有正常工作的钥匙。

您的测试功能应该简单地定义为`MyTest_thirdPartyDoStuffFunction`，并且它们应该仅包含在测试配置中的链接中。

# mysql - MySQL按总和问题加入表组

> ID：12026182
> 
> 赞同：10
> 
> 时间：2012-08-19T11:40:52.193
> 
> 标签：mysql, join, group-by, sum

我在加入表格时遇到问题，这里是示例表格：

表 A：（30 行）

```
╔════╦════════════╦═════════════╗
║ ID ║ 名称 ║ 描述 ║
╠════╬════════════╬═════════════╣
║ 1 ║ 类型 ║ Unicode 艺术 ║
║ 2 ║ 页眉 ║ 电子表格 ║
║ 3 ║ 自动对齐 ║ 关闭 ║
╚════╩════════════╩═════════════╝

```

表 B：（100 行）

```
╔════╦════════════╦═════════════╦════════╕
║ ID ║ 名称 ║ 描述 ║ 表 A ║
╠════╬════════════╬═════════════╬════════╕
║ 1 ║ 类型 ║ Unicode 艺术 ║ 1 ║
║ 2 ║ 页眉 ║ 电子表格 ║ 1 ║
║ 3 ║ 自动对齐 ║ 关闭 ║ 2 ║
╚════╩════════════╩═════════════╩════════╕

```

表 C：（8000 行）

```
╔════╦════════════╦═════════════╦════════╕
║ ID ║ 文章 ║ 文字 ║ TableB ║
╠════╬════════════╬═════════════╬════════╕
║ 1 ║ 类型 ║ Unicode 艺术 ║ 1 ║
║ 2 ║ 页眉 ║ 电子表格 ║ 1 ║
║ 3 ║ 自动对齐 ║ 关闭 ║ 2 ║
╚════╩════════════╩═════════════╩════════╕

```

表 D：（100 000 行并且还在计数）

```
╔════╦═══════════╦════════════╦═════════════╦═════ ════╗
║ ID ║ 日期 ║ 点击次数 ║ 展示次数 ║ TableC ║
╠════╬═══════════╬════════════╬═════════════╬═════ ════╣
║ 1 ║ 20120814 ║ 10 ║ 3 ║ 1 ║
║ 2 ║ 20120815 ║ 13 ║ 5 ║ 1 ║
║ 3 ║ 20120816 ║ 15 ║ 10 ║ 2 ║
╚════╩═══════════╩════════════╩═════════════╩═════ ════╝

```

表 E：（200 000 行并且还在计数）

```
╔════╦═══════════╦════════════╦═══════════╦═══════ ══╗
║ ID ║ 日期 ║ 浏览量 ║ 访客 ║ TableC ║
╠════╬═══════════╬════════════╬═══════════╬═══════ ══╣
║ 1 ║ 20120814 ║ 10 ║ 3 ║ 1 ║
║ 2 ║ 20120815 ║ 13 ║ 5 ║ 1 ║
║ 3 ║ 20120816 ║ 15 ║ 10 ║ 2 ║
║ 4 ║ 20120817 ║ 8 ║ 7 ║ 2 ║
║ 5 ║ 20120818 ║ 9 ║ 4 ║ 2 ║
╚════╩═══════════╩════════════╩═══════════╩═══════ ══╝

```

我用单个 sql 语句查询这些表：

```
选择
       一个名字，
       说明，
       总和（D.clicks），
       总和（D. 印象数），
       总和（E.Views），
       总和（电子访客）
从
       一种
       左连接 B
         ON A.ID=B.TableA
       左连接 C
         ON B.ID=C.TableB
       左连接 D
         ON C.ID=D.TableC
       左连接 E
         ON C.ID=E.TableC
通过...分组
       援助

```

问题是查询为表 D 和表 E 返回无效的 SUM
但是，如果在单个查询中查询表 D 和表 E，我会得到正确的值：

```
选择
       一个名字，
       说明，
       总和（D.clicks），
       总和（D. 印象数）
从
       一种
       左连接 B
         ON A.ID=B.TableA
       左连接 C
         ON B.ID=C.TableB
       左连接 D
         ON C.ID=D.TableC
通过...分组
       援助

```

编辑 1：
我尝试过 RIGHT JOIN、JOIN、LEFT OUTER JOIN，但它们都
不起作用，当然我可能在错误的地方使用了这些。
但是在我得到“全部包含”的第一个语句中，值
比实际值高出数千倍。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-19T12:14:11.197

您需要展平 D 和 E 表。然后我想 A 和 B 只是 C 的查找，所以没有必要对 A 进行 GROUP BY：[http ://www.sqlfiddle.com/#!2/fccf1/8](http://www.sqlfiddle.com/#!2/fccf1/8)

我删除了噪音（A 和 B），因为我（还）看不到 A 和 B 如何与汇总 C 的信息相关

试试这个：

```
SELECT
       C.Article,
       C.Text,

       COALESCE(D.ClicksSum,0) AS ClicksSum,
       COALESCE(D.ImpressionsSum,0) AS ImpressionsSum,

       COALESCE(E.ViewsSum,0) AS ViewsSum,
       COALESCE(E.VisitorsSum,0) AS VisitorsSum
FROM 
       C

       LEFT JOIN 
       (
         SELECT TableC, SUM(Clicks) AS ClicksSum, SUM(Impressions) AS ImpressionsSum
         FROM D
         GROUP BY TableC
       ) D ON C.ID=D.TableC

       LEFT JOIN 
       (
         SELECT TableC, SUM(Views) AS ViewsSum, SUM(Visitors) AS VisitorsSum
         FROM E
         GROUP BY TableC       
       ) E ON C.ID=E.TableC 
```

输出：

```
|    ARTICLE |        TEXT | CLICKSSUM | IMPRESSIONSSUM | VIEWSSUM | VISITORSSUM |
----------------------------------------------------------------------------------
|       Type | Unicode Art |        23 |              8 |       23 |           8 |
|     Header | Spreadsheet |        15 |             10 |       32 |          21 |
| Auto Align |         Off |         0 |              0 |        0 |           0 | 
```

请注意，我没有在我的 sqlfiddle 帖子中手动输入这些模式，我使用 sqlfiddle 的**Text to DDL**

我喜欢[http://sqlfiddle.com](http://sqlfiddle.com)，它的**Text to DDL**甚至可以从你的 ASCII 艺术作品中解析出数据ツ</p>

* * *

在看到您更清晰的目标（来自您的评论）后，这可能是：[http ://www.sqlfiddle.com/#!2/fccf1/13](http://www.sqlfiddle.com/#!2/fccf1/13)

```
SELECT
       A.Name, A.Description,

       COALESCE(SUM(D.ClicksSum),0) AS ClicksSum,
       COALESCE(SUM(D.ImpressionsSum),0) AS ImpressionsSum,

       COALESCE(SUM(E.ViewsSum),0) AS ViewsSum,
       COALESCE(SUM(E.VisitorsSum),0) AS VisitorsSum
FROM 
       C

       LEFT JOIN 
       (
         SELECT TableC, SUM(Clicks) AS ClicksSum, SUM(Impressions) AS ImpressionsSum
         FROM D
         GROUP BY TableC
       ) D ON C.ID=D.TableC

       LEFT JOIN 
       (
         SELECT TableC, SUM(Views) AS ViewsSum, SUM(Visitors) AS VisitorsSum
         FROM E
         GROUP BY TableC       
       ) E ON C.ID=E.TableC

       RIGHT JOIN B ON B.ID = C.TableB
       RIGHT JOIN A ON A.ID = B.TableA

GROUP BY A.ID 
```

输出：

```
|       NAME | DESCRIPTION | CLICKSSUM | IMPRESSIONSSUM | VIEWSSUM | VISITORSSUM |
----------------------------------------------------------------------------------
|       Type | Unicode Art |        38 |             18 |       55 |          29 |
|     Header | Spreadsheet |         0 |              0 |        0 |           0 |
| Auto Align |         Off |         0 |              0 |        0 |           0 | 
```

* * *

上述方法可能仍会产生笛卡尔积，在将 SubCategory(B) 分组到 Category(A) 之前将其展平： [http ://www.sqlfiddle.com/#!2/fccf1/19](http://www.sqlfiddle.com/#!2/fccf1/19)

```
SELECT 
  A.Name, A.Description,
  COALESCE(SUM(B.ClicksSum),0) AS ClicksSum,
  COALESCE(SUM(B.ImpressionsSum),0) AS ImpressionsSum,
  COALESCE(SUM(B.ViewsSum),0) AS ViewsSum,
  COALESCE(SUM(B.VisitorsSum),0) AS VisitorsSum
FROM A
LEFT JOIN
(

  SELECT 
    B.ID, B.TableA,
    SUM(C.ClicksSum) AS ClicksSum,
    SUM(C.ImpressionsSum) AS ImpressionsSum,
    SUM(C.ViewsSum) AS ViewsSum,
    SUM(C.VisitorsSum) AS VisitorsSum
  FROM B
  LEFT JOIN
  (

    SELECT
      C.TableB,

      D.ClicksSum,
      D.ImpressionsSum,

      E.ViewsSum,
      E.VisitorsSum
    FROM 
    C

    LEFT JOIN 
    (
      SELECT TableC, SUM(Clicks) AS ClicksSum, SUM(Impressions) AS ImpressionsSum
      FROM D
      GROUP BY TableC
    ) D ON C.ID=D.TableC

    LEFT JOIN 
    (
      SELECT TableC, SUM(Views) AS ViewsSum, SUM(Visitors) AS VisitorsSum
      FROM E
      GROUP BY TableC       
    ) E ON C.ID=E.TableC

  ) C ON C.TableB = B.ID
  GROUP BY B.ID

) B ON B.TableA = A.ID
GROUP BY A.ID 
```

输出：

```
|       NAME | DESCRIPTION | CLICKSSUM | IMPRESSIONSSUM | VIEWSSUM | VISITORSSUM |
----------------------------------------------------------------------------------
|       Type | Unicode Art |        38 |             18 |       55 |          29 |
|     Header | Spreadsheet |         0 |              0 |        0 |           0 |
| Auto Align |         Off |         0 |              0 |        0 |           0 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T12:06:00.993

表 D 和表 E 都通过表 C 链接到其余表。因此，您的第一个查询给出了表 D 中的所有行乘以表 E 中的所有行的笛卡尔积，并且 SUM 函数聚合了这个笛卡尔积。可能您还必须按表 C 分组，而不仅仅是按表 A。

# c# - TableAdapter.Update() 不起作用

> ID：12026183
> 
> 赞同：1
> 
> 时间：2012-08-19T11:40:53.417
> 
> 标签：c#, dataset, sql-server-ce

我想从数据库中删除现有记录并将新数据添加到数据库中。我使用了以下代码。它运行正常，但是当我通过 Visual Studio 中的数据库查看器查看数据库时，我在数据库中看不到任何更新。

```
Databases.MoodleOCDataSet quizDT = new Databases.MoodleOCDataSet();
Databases.MoodleOCDataSetTableAdapters.QuizTableAdapter tableAdaptor = new Databases.MoodleOCDataSetTableAdapters.QuizTableAdapter();            
tableAdaptor.Fill(new Databases.MoodleOCDataSet.QuizDataTable());

string[] quizList = GetServerQuizList();

quizDT.Quiz.Clear();

foreach(string quiz in quizList)
{
    Databases.MoodleOCDataSet.QuizRow row = quizDT.Quiz.NewQuizRow();
    row.course = 1;
    row.name = quiz;
    quizDT.Quiz.Rows.Add(row);
}

tableAdaptor.Update(quizDT.Quiz); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T15:43:52.023

实际上这不是更新命令的问题。Visual Studio 保留两个数据库。一个在项目文件夹中，一个在 bin/debug 文件夹中。bin/debug 文件夹中的数据库始终与项目文件夹中的数据库一起更新。如果您通过 Visual Studio 查看数据库，它总是显示项目文件夹中的数据库，而不是 bin/debug 文件夹中的其他数据库。

# html - 链接上的 css3 转换在加载时显示蓝色

> ID：12026186
> 
> 赞同：4
> 
> 时间：2012-08-19T11:41:47.917
> 
> 标签：html, css, css-transitions

在我的网站 ( [http://amosjackson.com](http://amosjackson.com) ) 上，当用户将鼠标悬停在导航链接上时，导航链接使用 css 过渡来改变颜色。尽管在样式表中将颜色设置为白色，但当页面加载时，链接是蓝色的（链接的默认颜色）。然后这会转换回正常的白色，除非页面被刷新，否则不会再次发生。我无法在页面的其他地方重现此问题，并且在联系页面（导航栏中的链接之一）上不会发生此错误。

编辑：错误只发生在谷歌浏览器中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T11:52:47.903

在`style.css`中，在 class 下`.links`，移除 CSS 过渡。这应该会停止初始过渡，但也会影响淡出。

```
.links{
    text-decoration:none;
    color:white;
    font-family:goudy;
    margin:0px;
    font-size:40px;
    padding:10px;
} 
```

也尝试设置`a {color: white}`，看看是否有影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-28T15:01:43.900

在您的 HTML 文件中：

```
<body class="preload"> 
```

在 CSS 中：

```
.preload * {
  -webkit-transition: none !important;
  -moz-transition: none !important;
  -ms-transition: none !important;
  -o-transition: none !important;
  transition: none !important;
} 
```

在 JS 中：

```
$(window).load(function() {
  $("body").removeClass("preload");
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-31T10:36:52.947

我知道已经晚了，但这就是我所做的，没有`.js`参与。

对于一两个样式，您可以手动将它们包含在页面头部，如下所示：

```
<head>
    ...
    <style>
        nav a.btn {
            color: white;
        }
    </style>
</head> 
```

允许浏览器立即呈现这些样式，从而防止 FOUC 发生 - 对于大量样式，您应该查看可以提供帮助的预处理器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-23T16:01:14.930

希望您仍在跟踪这个问题，:( 无论如何，回答这个以标记我也面临的问题。

这可能是由定义样式类的 <link> 标记引起的，我只是移动了

```
a {
  color: white;
  transition: color 0.5s;
} 
```

从 <link> 引用到嵌入的 <style> 标记，该问题已解决。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-01T15:45:50.083

我通过包含 CSS 样式`<head>`而不是`<body>`. 它在所有 html 加载后加载样式。

# c - 需要解释此代码（算法）

> ID：12026195
> 
> 赞同：0
> 
> 时间：2012-08-19T11:43:23.923
> 
> 标签：c, algorithm, math, dynamic

**问题：**

拉里的数学很差——他通常使用计算器，这在整个大学期间都很好用。不幸的是，他现在和他的好伙伴瑞恩在一次滑雪事故后被击中了一个荒岛。他们现在正试图花一些时间解决一些好的问题，如果他不能回答，莱恩会吃掉拉里，所以他的命运取决于你！

这是一个非常简单的问题——给定一个数 N，小于 N 的 K 个数加起来 N 有多少种方式？

例如，对于 N = 20 和 K = 2，有 21 种方式：

```
0+20
1+19
2+18
3+17
4+16
5+15
...
18+2
19+1
20+0 
```

输入 每行将包含一对数字 N 和 K。N 和 K 都是从 1 到 100 的整数，包括 1 到 100。输入将在 2 个 0 处终止。输出 由于拉里只对答案的最后几位感兴趣，因此对于每对数字 N 和 K，在一行上打印一个数字 mod 1,000,000。

**样本输入**

```
20 2
20 2
0 0 
```

**样本输出**

```
21
21 
```

解决方案代码：

```
#include<iostream>
#include<stdlib.h>
#include<stdio.h>
using namespace std;
#define maxn 100

typedef long ss;
ss T[maxn+2][maxn+2];

void Gen() {
    ss i, j;
    for(i = 0; i<= maxn; i++)
        T[1][i] = 1;
    for(i = 2; i<= 100; i++) {
        T[i][0] = 1;
        for(j = 1; j <= 100; j++)
            T[i][j] = (T[i][j-1] + T[i-1][j]) % 1000000;
    }
}

int main() {
    //freopen("in.txt", "r", stdin);
    ss n, m;
    Gen();
    while(cin>>n>>m) {
        if(!n && !m) break;
        cout<<T[m][n]<<endl;
    }
    return 0;
} 
```

这个计算是如何得出的？它是怎么来的`T[i][j] = (T[i][j-1] + T[i-1][j])`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T11:52:02.540

***注意***：我只使用*n*和*k*（小写）来引用一些匿名变量。我将始终使用 N 和 K（大写）来指代问题中定义的 N 和 K（总和和部分数量）。

设 C( *n* , *k* ) 为*n*选择*k*的结果，则问题的解为 C(N + K - 1, K - 1)，假设这 K 个数是非负数（或者有即使对于 N = 0 和 K = 2) 也是无限多解。

由于 K 个数是非负数，并且 N 的总和是固定的，我们可以把问题想成：K 个人之间有多少种分配糖果的方法。我们可以通过将糖果排成一条线来划分糖果，并在糖果之间放置 (K - 1) 分隔符。(K - 1) 分隔符将糖果分成 K 份糖果。换个角度看，也好比在（N+K-1）个位置中选择（K-1）个位置放入分隔符，剩下的位置都是糖果。所以，这就解释了为什么方法数是 N + (K - 1) 选择 (K - 1)。

*然后问题归结为如何找到 C( n* , *k* )的最低有效数字。（由于 N 和 K 的最大值是 100 中定义的`maxn`，因此我们不必担心算法是否达到 O(n ³ )）。

* * *

计算使用此组合恒等式 C( *n* , *k* ) = C( *n - 1* , *k* ) + C( *n* , *k - 1* ) （[帕斯卡规则](http://en.wikipedia.org/wiki/Pascal%27s_rule)）。该实现的聪明之处在于它不存储 C( *n* , *k* )（组合结果表，它是一个锯齿状数组），而是存储 C(N,K)。身份实际上存在于`T[i][j] = (T[i][j-1] + T[i-1][j])`：

*   第一个维度实际上是 K，即部分的数量。而第二维是和N。`T[K][N]`将直接存储结果，根据上面推导的数学结果，是C(N + K - 1, K - 1)的(最低有效位)。
*   将背面重写`T[i][j] = (T[i][j-1] + T[i-1][j])`为等效的数学结果：

    C(i + j - 1, i - 1) = C(i + j - 2, i - 1) + C(i + j - 2, i - 2)，根据恒等式正确。

该程序将逐行填充数组：

*   行 K = 0 已经初始化为 0，使用静态数组初始化为 0 的事实。
*   它用 1 填充行 K = 1（只有一种方法可以将 N 分成 1 部分）。
*   对于其余的行，它将案例 N = 0 设置为 1（只有 1 种方法可以将 0 分成 K 个部分 - 所有部分都是 0）。
*   然后用表达式 填充其余部分，该表达式`T[i][j] = (T[i][j-1] + T[i-1][j])`将引用前一行和同一行的前一个元素，这两者都已在早期的迭代中填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T12:43:27.613

这是一个著名的问题 - 您可以[在此处查看解决方案](http://www.physicsforums.com/showthread.php?t=428074)

有多少种方法可以将 N 个相同的球扔到 K 个盒子中。

以下算法是您问题的动态规划解决方案：

将 D[i,j] 定义为 i 数小于 j 的方式数，总和为 j。

0 <= i < = N 1 <= j <= K

其中对于每个 j，D[j,1] = 1。

在哪里 j > 1 你得到：

```
D[i,j] = D[i,j-1] + D[i-1,j-1] +...+ D[0,j-1] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T12:50:01.293

令 C(x, y) 为 x 选择 y 的结果，则其值`T[i][j]`等于：`C(i - 1 + j, j)`。

你可以通过归纳来证明这一点。

基本情况：

`T[1][j] = C(1 - 1 + j, j) = C(j, j) = 1`

`T[i][0] = C(i - 1, 0) = 1`

对于归纳步​​骤，使用公式（对于 0<=y<=x）：

`C(x,y) = C(x - 1, y - 1) + C(x - 1, y)`

所以：

`C(i - 1 + j, j) = C(i-1+j - 1, j - 1) + C(i-1+j - 1, j) = C(i-1+(j-1), (j-1)) + C((i-1)-1+j, j)`

或者换句话说：

`T[i][j] = T[i,j-1] + T[i-1,j]`

现在，正如*nhahtdh*之前提到的，您正在寻找的值是 C(N + K - 1, K - 1)，它等于：

`T[N+1][K-1] = C(N+1-1+K-1, K-1)`

（模 1000000）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-26T15:20:10.157

该问题被称为“整数分区问题”。基本上存在 n 的 k 分区的递归计算，但您的解决方案只是它的动态编程版本（简称非递归和自下而上计算）。

# javascript - 在具有相同属性 javascript 的元素上保存值

> ID：12026196
> 
> 赞同：2
> 
> 时间：2012-08-19T11:43:31.257
> 
> 标签：javascript

我有几个条目的数组，其中一些具有相同的名称。所有条目都有位置，但一个是空的。我想将相同的位置值保存到同一用户的数组的所有条目中。我怎样才能做到这一点？

```
 array=[{
                    user: angelos,
                    user_id: 121212,
                    date: 12/12/12,
                    profile_img: cfdf,
                    text: nhkjhgjtdkghd,
                    url: g.htm,
                    location:Romania
                },{
                    user: angelos,
                    user_id: 121212,
                    date: 12/12/12,
                    profile_img: cfdf,
                    text: nhkjhgjsdfsadstdkghd,
                    url: g.htm,
                    location:""
                },{
                    user: Mike,
                    user_id: 121212,
                    date: 12/12/12,
                    profile_img: cfdf,
                    text: nhkjhgjtdkghd,
                    url: g.htm,
                    location:New York
                },{
                    user: Mike,
                    user_id: 121212,
                    date: 12/12/12,
                    profile_img: cfdf,
                    text: nhkjhgjsdfsadstdkghd,
                    url: g.htm,
                    location:""
                }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T11:49:25.230

首先，对于每个用户，存储其非空位置。然后，在第二遍中，只需根据存储的`user -> location`地图设置空白位置。

```
var userLocationMap = {};
for (var i = 0; i < array.length; i++) {
  if (array[i].location) {
    userLocationMap[array[i].user] = array[i].location;
  }
}

for (var i = 0; i < array.length; i++) {
  if (!array[i].location) {
    array[i].location = userLocationMap[array[i].user];
  }
} 
```

# php - 如何在 Netbeans FTP 视图中下载新文件

> ID：12026198
> 
> 赞同：5
> 
> 时间：2012-08-19T11:43:42.893
> 
> 标签：php, netbeans, ftp

我从远程服务器创建了一个新项目作为 PHP 应用程序。我正在使用被动模式 FTP 连接设置，因为没有此设置，我根本无法通过 Netbeans 访问文件。但是，服务器上的某些文件没有显示在我的 Netbeans 面板中。**如何刷新视图以显示服务器上的新文件？**我尝试关闭并重新打开 Netbeans，但似乎 Netbeans 只会上传，不会下载新文件。我看不到用于从服务器刷新视图的明显菜单项，并且添加按需扫描插件也无济于事。谢谢你。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-01-10T14:06:10.573

右键单击****源文件****，然后选择：

 ***   **下载**用于下载文件。

*   **上传**以上传您的本地文件。

*   **同步**以同步本地和服务器中的现有文件。

希望我的回答对你有用

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-25T11:04:56.790

如果您使用“项目”选项卡，则可以在所有文件夹上找到“上传/下载”选项。浏览“文件”选项卡时不存在相同的选项。这将解决您的问题。因为它对我有用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-16T18:54:13.583

在 7.2.1 中，转到项目，展开您要为其获取文件的项目，然后右键单击显示“源文件”的文件夹以获取下载菜单项，该菜单项将获取该项目的所有文件。

![在此处输入图像描述](../Images/b1d5e8fa3dcf6f7cc9f78b3da24dd78c.png)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-19T13:40:05.810

有趣的是，内部文件夹确实有一个“下载”菜单项，用于从服务器下载新的和更改的文件，但源文件和顶级目录没有此项。因此，用户只能刷新至少两级深度的文件夹。**

# sql-server - MS Access 无限期地锁定表行

> ID：12026199
> 
> 赞同：7
> 
> 时间：2012-08-19T11:44:08.667
> 
> 标签：sql-server, ms-access

我们使用 MS Access 作为我们其中一个系统的 GUI，但我们遇到了一个问题，即 Access 会锁定基础表或行，这会阻止 SQL 服务器对此数据运行任何更新查询。这是有问题的，因为虽然我们的 Access 前端只需要对这些数据进行只读访问，但我们有系统会定期刷新数据。由于 Access 已对数据持有锁定，这些刷新操作会失败（或无限期延迟）。

通过打开 Access 前端并使用 sys.dm_tran_locks DMV 显示数据锁定来说明此问题。我为重现该问题所采取的步骤是：

1.  打开访问前端。这显示了一个包含数千条记录的可滚动表单
2.  使用 SQL Server DMV 显示数据锁定。这显示了请求模式为“IS”（意图共享）的 5 个“对象”类型锁。使用 sys.dm_exec_requests 将命令状态显示为“暂停”，等待类型显示为“ASYNC_NETWORK_IO”。只要用户打开 Access 前端，这些锁就会被持有，并防止对所涉及的表进行任何更新/删除/截断操作。现在，如果用户**滚动到**Access 中记录集的末尾，锁就会被释放！

第二个问题发生在用户单击以在前端显示单个记录时。当屏幕上显示单个记录时，SQL 服务器 DMV 会显示这些锁：3x 对象、1x 键、1x 页面。钥匙是共享锁，其他是意图共享的。同样，命令状态为挂起，等待类型为 ASYNC_NETWORK_IO。只要用户正在查看记录，这些锁就会被持有

我们需要阻止访问无限期地持有这些锁。不幸的是 MS Access 不是我技能的一部分，所以我不知道需要做什么来解决这个问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T11:52:13.783

我没有解决这个问题，但一位同事解决了。所做的是，他没有创建与 SQL Server 表的链接表，而是创建了与视图的链接表。视图如下所示：

```
CREATE VIEW dbo.acc_tblMyTable
AS
  SELECT * FROM tblMyTable WITH (NOLOCK) 
```

没有锁定，并且作为奖励，Access 将数据视为只读。

但是，请确保您了解[使用 时会发生什么`NOLOCK`](http://blogs.msdn.com/b/davidlean/archive/2009/04/06/sql-server-nolock-hint-other-poor-ideas.aspx)。

> 不幸的是 MS Access 不是我技能的一部分，所以我不知道需要做什么来解决这个问题。

摆脱访问 :)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2014-07-08T17:02:14.693

多年来一直在开发使用 SQL Server 作为后端的应用程序，主要是 .NET。从未遇到您正在讨论的锁定（阻塞）问题。一个设计合理的数据库应该在更新时使用 SQL Server 的默认行级锁定。

访问是问题所在。因为从前它有一个内部数据库，它可以完全控制它，所以它继续认为这就是它所拥有的东西，行为就是它认为正确的东西。实际上，它已经结束运行 SQL Server 来做它认为正确的事情。这并不是一件好事，因为 Access 是一种基于文件的产品，而且还不是生产就绪的产品。适合电话簿或食谱，仅此而已。也不缩放。

# github-api - 无法访问 api.github

> ID：12026206
> 
> 赞同：0
> 
> 时间：2012-08-19T11:45:19.343
> 
> 标签：github-api

我无法访问 api.github.com。我总是收到相同的回复：

`curl: (7) Failed to connect to 207.97.227.243: Host is down`

例如我正在尝试这个：

```
curl -i https://api.github.com 
```

任何想法？

# windows-8 - 检查是否启用了执行禁用位

> ID：12026207
> 
> 赞同：4
> 
> 时间：2012-08-19T11:45:27.937
> 
> 标签：windows-8

Win8 的 RTM 版本需要从 bios 中启用执行禁用位才能自行安装。我当前的 BIOS 没有显示任何启用/禁用此功能的选项，除非我刻录 DVD 来测试安装程序，否则我不知道 Win8 是否会在我的笔记本电脑上运行（我的 CPU 是支持 XD Bit 的 i5-2430M） , 如果 XD Bit 始终处于启用状态，或者 HP 从 bios 中删除了启用它的选项。

应该有一个指令/系统调用让用户知道他/她的机器是否在启用 NX Bit（或任何其他实现，如 XD Bit、增强病毒保护等）的情况下运行，因为 Win8 设置可以做到这一点，但是我在谷歌上找不到。有什么资料吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T12:02:51.223

如果您现在使用的是 Windows，您可以访问

我的电脑->高级系统设置->高级（选项卡）->性能（设置按钮）->数据执行保护以检查它是否已启用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T09:51:19.013

听起来不错，我希望能解决我在 Windows 7 上的问题，我正在尝试在 Vmware Windows 8 中安装，但我有个家伙，如果你用可引导的映像 W8 重新启动系统并尝试安装删除 Windows 7，它也可以工作？

# java - Excel表格编写JAVA+POI API

> ID：12026212
> 
> 赞同：1
> 
> 时间：2012-08-19T11:46:56.150
> 
> 标签：java, apache-poi

我正在使用以下 POI api 通过 java 代码在 excel 上编写

```
public static HSSFWorkbook sampleWorkbook = new HSSFWorkbook();
public static HSSFSheet sampleDataSheet = sampleWorkbook.createSheet("ABC"); 
```

它在 excel 中创建一个名为 ABC 的工作表。没关系我的问题是我需要在同一个工作簿中添加/创建另一个名为“XYZ”的工作表。我怎么做？好像我写了这样的东西

```
public static HSSFSheet sampleDataSheet = sampleWorkbook.createSheet("XYZ"); 
```

它将覆盖第一个（ABC）..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T12:10:25.270

它**不会**覆盖第一个，它将创建一个新工作表，但您需要将其分配给不同的变量：

```
HSSFSheet firstSheet = sampleWorkbook.createSheet("ABC");
HSSFSheet secondSheet = sampleWorkbook.createSheet("XYZ"); 
```

这是[文档](http://poi.apache.org/apidocs/org/apache/poi/xssf/usermodel/XSSFWorkbook.html#createSheet%28java.lang.String%29)：

> 公共 XSSFSheet createSheet(java.lang.String sheetname)
> 
> 为此工作簿创建一个新工作表并返回高级表示。使用它来创建新工作表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T12:47:21.547

澄清一下，您**可以**将相同的变量名称分配给 2 个不同的工作表，这 2 个工作表将被创建。但是，这不是一个好的做法，因为您失去了创建的第一个工作表的句柄。

编码：

```
public static HSSFSheet sampleDataSheet = sampleWorkbook.createSheet("ABC"); 
```

建议您在班级成员部分创建一个新工作表。不建议这样做，因为诸如`sampleWorkbook`可能尚未初始化的因变量。

用于工作表/Excel 文件创建的方法可能如下所示：

```
private void createExcelFile() {
   HSSFWorkbook workbook = new HSSFWorkbook();
   HSSFSheet sampleDataSheet1 = workbook.createSheet("ABC");
   HSSFSheet sampleDataSheet2 = workbook.createSheet("XYZ");
   // save to disk
} 
```

有关更多信息，请参阅：

[公共 HSSFSheet createSheet()](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFWorkbook.html#createSheet%28%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-03T09:38:34.490

## 用excel写

```
public class Writesheet 
{

 public static void main(String[] args) throws Exception 

 {

  //Create blank workbook
  XSSFWorkbook workbook = new XSSFWorkbook(); 
  //Create a blank sheet
  XSSFSheet spreadsheet = workbook.createSheet( 
  " Employee Info ");
  XSSFSheet spreadsheet1 = workbook.createSheet( 
          " Employee Info1 ");
  XSSFSheet spreadsheet2 = workbook.createSheet( 
          " Employee Info2 ");
  XSSFSheet spreadsheet3 = workbook.createSheet( 
          " Employee Info3 ");
  XSSFSheet spreadsheet4 = workbook.createSheet( 
          " Employee Info4 ");
  XSSFSheet spreadsheet5 = workbook.createSheet( 
          " Employee Info5 ");

  XSSFSheet spreadsheet9 = workbook.createSheet( 

  //Create row object
//This data needs to be written (Object[])
  Map < String, Object[] > empinfo =  new TreeMap < String, Object[] >();
  empinfo.put( "1", new Object[] { "EMP ID", "EMP NAME", "DESIGNATION" });
  empinfo.put( "2", new Object[] { "tp1", "Gopal", "Technical Manager" });
  empinfo.put( "3", new Object[] {  "tp2", "Manisha", "Proof Reader" });
  empinfo.put( "4", new Object[] { "tp3", "Masthan", "Technical Writer" });
  empinfo.put( "5", new Object[] {  "tp4", "Satish", "Technical Writer" });
  empinfo.put( "6", new Object[] { "tp5", "Krishna", "Technical Writer" });

  Map < String, Object[] > empinfo1 =  new TreeMap < String, Object[] >();
  empinfo1.put( "1", new Object[] { "tp6", "Gop", "Technical Manager" });
  empinfo1.put( "2", new Object[] {  "tp7", "Mani", "Proof Reader" });
  empinfo1.put( "3", new Object[] { "tp8", "than", "lyricist" });
  empinfo1.put( "4", new Object[] {  "tp9", "Sat", " Writer" });
  empinfo1.put( "5", new Object[] { "tp10", "Krish", "Technical Writer" });

  Map < String, Object[] > empinfo2 =  new TreeMap < String, Object[] >();
  empinfo2.put( "1", new Object[] { "tp11", "nayan", " Manager" });
  empinfo2.put( "2", new Object[] {  "tp12", "priyanka", " developer" });
    empinfo2.put( "3", new Object[] { "tp13", "pradyot", "Technical Writer" });
  empinfo2.put( "4", new Object[] {  "tp14", "manisa", "developer" });
  empinfo2.put( "5", new Object[] { "tp15", "limca", "Technical Writer" });

  //Iterate over data and write to sheet
 func1( spreadsheet,empinfo);

 func1( spreadsheet1,empinfo1);

 func1( spreadsheet2,empinfo2);

 func1( spreadsheet3,empinfo);

 func1( spreadsheet4,empinfo1);

 func1( spreadsheet5,empinfo2);

  //Write the workbook in file system
  FileOutputStream out = new FileOutputStream( 
  new File("Writesheet2.xlsx"));
  workbook.write(out);
  out.close();
  System.out.println( 
  "Writesheet.xlsx written successfully" );
  workbook.close();

  }

 static void func1(XSSFSheet var,Map<String, Object[]> var1)
   {

   XSSFRow row;
Set < String > keyid = var1.keySet();
   int rowid = 0;
   for (String key : keyid)
   {

    row = var.createRow(rowid++);
       Object [] objectArr = var1.get(key);
       int cellid = 0;
       for (Object obj : objectArr)
        {
           Cell cell = row.createCell(cellid++);
           cell.setCellValue((String)obj);
        }
   }
 }

 } 
```

# c# - 如何获取对象内部类型的属性

> ID：12026214
> 
> 赞同：1
> 
> 时间：2012-08-19T11:47:38.117
> 
> 标签：c#, linq, list, getproperties

我有这个代码。我收到几个列表作为我插入到对象列表中的参数。

```
public static void SaveTransactionsToSeparateFiles(List<Receivables> genRecList, 
    List<Dilution> genDilList, List<Accountable> genAccList, string excelFile, 
    string typeReport, List<Outstanding> genOutList = null)
{
    List<object> listObj = new List<object> 
    { 
        genRecList, 
        genDilList, 
        genAccList, 
        genOutList 
    };
} 
```

然后我有一个 foreach ，我在其中遍历所有列表`List(object) listObj`，将它们转换为数据表，并在每个数据表中添加每个列表的内容。

```
foreach (var obj in listObj)
{
    DataTable genTable = HelperMethods.ConvertListToDataTable(obj, true);
    Worksheet pantaReiWorkSheet = pantaReiWorkSheets[sheet.SheetName];

    int iRow = 0;
    foreach (DataRow row in genTable.Rows)
    {
        iRow++;

        int iCol = 0;
        foreach (DataColumn col in genTable.Columns)
        {
            iCol++;
            pantaReiWorkSheet.Cells[iRow + 1, iCol] = row[col.ColumnName];
        }
    }

    i++;
} 
```

然后我有转换为数据表的方法。

```
public static DataTable ConvertListToDataTable(object genList, bool toExcel)
{
    DataTable genDt = new DataTable();
    PropertyInfo[] p =  p.genList.GetType().GetProperties();

    for (int prop = 1; prop < p.Length - 2; prop++)
    {
        genDt.Columns.Add(new DataColumn(p[prop].Name, p[prop].PropertyType));
    }

    foreach (object t in (IEnumerable<object>)genList)
    {
        DataRow genDR = genDt.NewRow();

        for (int prop = 1; prop <  p.Length - 2; prop++)
        {
            genDR[p[prop].Name] = p[prop].GetValue(t, null);
        }

        genDt.Rows.Add(genDR);
    }

    return genDt;
} 
```

问题是，我没有在 List listObj 中获取每个列表的属性。那么，如何访问`List<Receivables> genRecList`, `List<Dilution> genDilList`, `List<Accountable> genAccList`,`List<Outstanding> genOutList`属性？

我以前做过这个，但是`List(T)`一次只有一个列表，它起作用了。现在是一团糟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T20:05:15.833

在我看来，你让自己变得比必要的更难。你从你知道类型的列表开始。然后你把它们扔进一堆不起眼的列表中，类型信息被埋没了，你很难再把它挖出来。

**如何解决这个问题？**

基本上，您将两件事合二为一：创建`DataTable`s 并将它们写入 Excel。这将有助于区分这些问题。那这个呢：

*   创建一个方法`DataTable ConvertListToDataTable<T>(List<T>)`并使用泛型类型参数来`T`获取`PropertyInfo`
*   分别为每个列表调用此方法并将数据表放入列表中。
*   然后做类似的事情`SaveDataTablesToSeparateFiles(List<DataTable> tables, string excelFile, string typeReport)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T14:42:15.637

如果你想`Type`上课`T`：`List<T>`

```
var list = new List<T>();
var typeT = list.GetType().GenericTypeArguments.First(); 
```

所以你的代码应该改变：

```
PropertyInfo[] p =  genList.GetType().GenericTypeArguments
                           .First().GetProperties(); 
```

# php - 使用 javascript 和 postgres 的 php 文本框自动完成功能

> ID：12026215
> 
> 赞同：-1
> 
> 时间：2012-08-19T11:47:51.673
> 
> 标签：php, javascript, postgresql

有谁知道如何使用 javascript 和 postgres db 在 php 中实现自动完成功能。我不想为此目的使用ajax。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T12:37:58.227

如果您的意思是您不想使用 XMLHttpRequest 并说您**不想使用 AJAX**，那么还有另一种技术可以实现相同的结果。例如[JSONP](http://en.wikipedia.org/wiki/JSONP)。你的问题应该更具体。

# php - Android php web服务访问错误

> ID：12026216
> 
> 赞同：0
> 
> 时间：2012-08-19T11:48:17.917
> 
> 标签：php, android, json

我想从 Android 应用程序访问一个简单的 php web 服务。为了测试这一点，我创建了第一个使用 json 编码的 php Web 服务，并将其托管在本地主机上运行的 WAMPSERVER 中。

```
<?php
$string='{"name":"John Adams"}';
echo json_encode($string);
?> 
```

为了访问这个 Web 服务，我创建了一个 Android http 客户端，如下所示。

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.apache.http.util.EntityUtils;
import org.json.JSONException;
import org.json.JSONObject;
import org.json.JSONTokener;

public class JsonV01Activity extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    HttpClient httpclient = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://10.0.2.2/json/phpjson.php");
    try {
       HttpResponse response = httpclient.execute(httppost);
       String str =  EntityUtils.toString(response.getEntity());

       JSONObject object = (JSONObject) new JSONTokener(str).nextValue();

       String name = object.getString("name");

       TextView tv = (TextView) findViewById(R.id.textView1);
       tv.append(name);
    }
    catch (JSONException e) {e.printStackTrace();}

    catch(Exception ex){ex.printStackTrace();}

    }
} 
```

我添加了互联网权限，但这只会提供空白屏幕。我知道这个问题很简单，但我无法解决。请帮忙，错误是什么以及如何纠正。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T12:33:09.447

那我怎么总是这样做！

```
 try {
URL url2 = new URL("http://10.0.2.2/2010/phpfile.php");
                BufferedReader in = new BufferedReader(new InputStreamReader(url2.openStream()));
                String line ="";
                while ((line = in.readLine()) != null) {

                    JSONArray ja = new JSONArray(line);
                    values = new String [ja.length()];          

                    // fetching data
                    for (int i=0; i < ja.length(); i++ ) {
                        JSONObject jo = (JSONObject) ja.get(i);

                        int id = jo.getInt("id");
                        String name = jo.getString("name");

                    }

                }

            }
            catch (Exception e) {
                Toast.LENGTH_SHORT).show();
                return "Interrupted";

            } 
```

# javascript - JavaScript 中的动态实例化

> ID：12026217
> 
> 赞同：1
> 
> 时间：2012-08-19T11:48:31.050
> 
> 标签：javascript, asp.net

我查看了其他在线示例，但它们不起作用。

所以...

我正在尝试在 JavaScript 中实现“Head First”中的经典“装饰器模式”......而且我真的很接近。

**鉴于以下“课程”：**

```
// "CLASSES": BEVERAGES
function DarkRoast(){
    this.cost = 1.00;
    this.description = "Dark Roast";
};

// DECORATORS: CONDIMENTS
function Milk(beverage){
    var instance = beverage;
    beverage.cost = function(){
        return instance.cost + 0.25;
    };
    beverage.description = functionn(){
        return instance.description + ', Milk';
    };
}; 
```

**问题：如何从以下函数动态实例化“牛奶”？**

```
function appendCondiment(className, beverage) {
    /* Needs to do this, but dynamically:
        var instance = new Milk(beverage); */

    // This fails (of course)
    var instance = new window[className].call(beverage);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T12:06:49.927

怎么样：

```
var DarkRoast = function () {
    this.cost = 1.00;
    this.description = 'Dark Roast';
};

var condiments = {
    milk: {
        cost: 0.25;
        description: 'Milk'
    },
    cream: {
        cost: 0.3,
        description: 'Cream'
    }
};

var appendCondiment = function ( condimentName, beverage ) {
    var condiment = condiments[ condimentName ];
    beverage.cost += condiment.cost;
    beverage.description += ', ' + condiment.description;
}; 
```

用法：

```
var bev = new DarkRoast();
appendCondiment( 'milk', bev );

bev.cost // 1.25
bev.description // 'Dark Roast, Milk' 
```

* * *

顺便说一句，考虑`DarkRoast`从一个类继承`Beverage`，然后定义一个`appendCondiment`方法来`Beverage.prototype`. 然后你就可以这样写：

```
var bev = new DarkRoast();
bev.appendCondiment( 'milk' ); 
```

哪个更具可读性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T11:54:47.433

你需要：

```
var instance = new window[className](beverage); 
```

# c# - .NET 4.0 与 3.5 的性能

> ID：12026225
> 
> 赞同：0
> 
> 时间：2012-08-19T11:49:58.347
> 
> 标签：c#, .net, performance

有人知道 .NET 4 是否更高效？

从下面的简单片段来看，它似乎更慢。使用 .NET 4.0 大约需要 630 毫秒，使用 .NET 3.5 SP1 大约需要 530 毫秒。

你得到什么结果？有什么建议么？我正在考虑将我的应用程序转换为 .NET 4.0，但这些结果让我望而却步。

```
 Stopwatch sw = new Stopwatch();
        sw.Start();

        for (int i = 0; i <= 1000000; i++)
        {
            string s = "asdfx54545454545454545454545454545454545454545454545454545454545454545454545454adsf4asdf";
            int j = s.IndexOf("asdf");
            s.IndexOf("asdf", j);

            s = s + "zxcv";
            s = s + "gtjiortege";
        }

        sw.Stop();
        Console.WriteLine(sw.ElapsedMilliseconds);

        Console.ReadLine(); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T12:57:09.273

此问题已[报告](http://connect.microsoft.com/VisualStudio/feedback/details/616367/framework-4-string-indexof-string-string#details)并已[修复](http://support.microsoft.com/kb/2467309)。

如果不需要特定区域性的比较，解决方法是将 Oridinal 指定为 StringComparison 类型，而不是安装此修补程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T06:03:39.057

是的，.Net 4.0 比 3.5 更高效。在我的例子中，我有一个数值算法，它在循环中有一个指数函数。我能够确定性地重现约 2 倍的速度。看起来主要的胜利来自 CRT，而不是 JIT。8.0/3.5 CRT 使用 x87 浮点指令，但 10.0/4.0 CRT 使用 SSE。JIT 使用 CRT 进行 Log/Log10 和 Exp 调用。似乎 C 运行时使用的 SSE 指令是获胜的主要来源，尽管 JIT 编辑的代码也更好。

# email - 哪些设置使 vim 成为方便的电子邮件编辑器？

> ID：12026227
> 
> 赞同：3
> 
> 时间：2012-08-19T11:50:14.143
> 
> 标签：email, vim, settings, composition

Claws-mail 是我的电子邮件客户端，它可以在您撰写电子邮件时启动外部编辑器。总的来说，我更喜欢使用 vim 作为我的编辑器。但是对于电子邮件，我找不到方便的设置。

我希望 vim 自动换行超过 76 个字符的行，但并非总是如此，例如，如果我制作一个（无）有序列表。我想 vim 可能是最方便的编辑器。到目前为止，我只知道`textwidth`、格式化段落的`gqip`键和`:set formatoption+=a`选项。我对其他格式选项设置有点困惑。所以我转向你问：

哪些设置将使 vim 成为出色的电子邮件编辑器？

# perl - 在 Perl 中覆盖现有的 WorkSheet

> ID：12026229
> 
> 赞同：0
> 
> 时间：2012-08-19T11:50:16.823
> 
> 标签：perl

我的问题：

我正在编写一个 perl 脚本，用于每天在 Excel 工作表中生成报告（Excel 工作表文件名：报告。）。

```
I have 4 worksheets in this excel sheet. They are
1\. Aug19
2\. Error Code.
3\. success count.
4\. failure count. 
```

我将继续通过每天使用 perl 模块 Spreadsheet::ParseExcel 和 Spreadsheet::ParseExcel::SaveParser 解析现有的 excel 文件（报告）来附加“Aug19”和“错误代码”的报告。

但是在解析现有文件后，我将如何每天覆盖工作表“成功计数”和“失败计数”。

请建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T12:07:47.127

检查 perldoc

```
AddWorksheet()
    $workbook = $workbook->AddWorksheet($name, %properties); 
```

创建一个类型为 Spreadsheet::ParseExcel::Worksheet 的新 Worksheet 对象。

%properties 散列包含新工作表的属性。

# database - 用户名和密码数据库设计

> ID：12026230
> 
> 赞同：0
> 
> 时间：2012-08-19T11:51:08.250
> 
> 标签：database, ms-access, database-design

我正在为工业公司设计一个数据库，我有这些实体（员工、供应商、客户、司机），每个实体都有自己唯一的 ID（员工 ID，.. 等）。那么，如何为每个用户分配一个唯一的用户名？（使用女士访问）。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T11:55:58.283

创建实体表。每当您向其他表（ Employee 、 Suppliers 、 Customers 、 Drivers ）添加条目时，请在实体表中为它们添加一行。

在其他表（ Employee 、 Suppliers 、 Customers 、 Drivers ）中，添加一个外键（列名：entity_id）。

要获取员工的实体 ID：

```
SELECT entity_id FROM employees WHERE id = {employee_id}; 
```

作为奖励，所有实体类型共有的字段可以移动到实体表中。

# java - 设计师如何使用 Google Web 工具包？

> ID：12026232
> 
> 赞同：4
> 
> 时间：2012-08-19T11:51:26.093
> 
> 标签：java, javascript, gwt

一些背景知识，通常当我开始一个新项目时，设计师会为其创建 HTML 模板、图像和 css，然后将其传递给我。然后我编写了让网站正常运行所需的 javascript 和 PHP 代码。

但是我正在考虑迁移到谷歌网络工具包，这样我就可以使用 Java 而不是 Javascript/PHP 对网站进行编码。然而，障碍是我如何将设计器的 HTML 和 CSS 导入 GWT。

从我所看到的似乎没有任何简单的方法可以做到这一点？或者，如果我首先在 GWT 中编写所有内容，并且他能够使用 CSS 为所有内容设置样式以使它们看起来像他需要的那样，那也可以。但是他能单独使用 css 做到这一点吗？

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T17:05:46.487

我们是一个设计师和两个程序员的团队，我们在普通的 UiBinders 上玩得很开心，没有 GWT Designer 参与。我们的流程有两种基本模式：

1.  设计师编写纯 HTML，我们稍后将其转换为 UiBinder，或者
2.  我们制作了基本的 UiBinder，他用必要的结构和 Css 完成了它。

我们根据芯片在我们的设计过程中的落入方式选择任何一种模式。这真的很自然，效果很好。

设计师必须学习：

*   CssResources（例如`addStyleNames='{resources.css.style}'`，代替`class='style'`）
*   ImageResources（例如使用 GPE 将它们添加到 ClientBundles）
*   UiBinder 语法（例如`<g:TextBox>`，代替`<input>`）

这很自然。与 HTML 和 CSS 的相关性极高，他可以将自己的 html/css 技能直接转移到 UiBinder。

我没有使用 GWT 设计器的经验，但我认为它是我们流程中间的另一个工具。也许这是值得的，但避免它并不是那么难。我在它加入官方 GWT 存储库后立即使用了早期迭代，它非常令人讨厌。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T12:11:05.707

注意[GWT 设计器](https://developers.google.com/web-toolkit/tools/gwtdesigner/)。它是支持 GWT 的 UI 创建向导。GWT Designer 具有可视化工具来为您生成代码。

# ios - IOS 应用程序 - 拦截来电并将其重定向到语音邮件

> ID：12026233
> 
> 赞同：0
> 
> 时间：2012-08-19T11:51:36.043
> 
> 标签：ios

有没有办法拦截来电并将其重定向到语音邮件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T11:53:04.517

不，无法从您的应用程序与电话应用程序进行交互。

# jquery - 当我移动鼠标太快时如何解决这个不一致的下拉切换？

> ID：12026234
> 
> 赞同：0
> 
> 时间：2012-08-19T11:51:38.077
> 
> 标签：jquery

我编写了以下代码来在鼠标悬停在 LI 项目上时展开菜单，并在鼠标离开 LI 时隐藏菜单。

```
$('.sort').bind('mouseenter',function(){
    $('.options').slideDown('slow');
}).bind('mouseleave',function(){
    $('.options').fadeOut('fast');
}); 
```

.sort 是 li 项目的类。.options 是子 UL。该代码工作正常，因为当我将鼠标移到列表项上时它会展开菜单，而当我离开该项目时，它会淡出。但是，如果我在项目上和项目中移动鼠标太快，我会得到不一致的切换/淡入淡出。它创建了一个无限的淡入淡出/切换如何修复它？

对不起，HTML：

```
 <ul id="options">
            <li class="sort"><a href="#" class="sort-link"><?php _e('Shop by Brand','onecart'); ?></a>
                <ul class="options">
                    <li><a href="#">Latest Arrivals</a></li>
                    <li><a href="#">For Men</a></li>
                    <li><a href="#">For Women</a></li>
                    <li><a href="#">For Kids</a></li>
                    <li><a href="#">On Sale</a></li>
                </ul>
            </li>
        </ul> 
```

的CSS：

```
#options li.sort {
    position: relative;
    padding: 0 0 8px 0;
}
#options li.sort .sort-link {
    display: block;
    font-size: 14px;
    height: 28px;
    line-height: 28px;
    color: #686868;
    text-transform: uppercase;
    text-shadow: 0 1px #eee;
    background: url(../img/arrow-list.png) no-repeat right top;
    padding: 0 16px 0 0;
}
#options li.sort .sort-link:hover {color: #000}
#options li.sort .current {
    color: #000;
    background-position: right bottom;
}

ul.options {
    display: none;
    position: absolute;
    background: #fff;
    top: 36px;
    left: 0;
    width: 180px;
    padding: 6px 0;
    border-top: 3px solid #ea6ea0;
    box-shadow: 0 1px 2px #aaa;
    z-index: 4;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T11:54:06.810

用于`.stop(true, true)`移除排队动画并立即完成当前动画：

```
$('.sort').hover(function(){
  $('.options').stop(true, true).slideDown('slow');
}, function() {
  $('.options').stop(true, true).fadeOut('fast');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T12:08:19.790

试试 jquery hoverintent [插件](http://cherne.net/brian/resources/jquery.hoverIntent.html)。另外，看看[这里的好帖子](http://benalman.com/code/projects/jquery-dotimeout/examples/hoverintent/)。

如果您正在处理任何类型的下拉式大型菜单，这将证明几乎是必要的，除非您想编写自己的延迟鼠标悬停实现，并带有超时和光标装箱。

# python - 如何在新文件名中复制带有日期的图像？

> ID：12026235
> 
> 赞同：0
> 
> 时间：2012-08-19T11:51:57.963
> 
> 标签：python, linux, image

我正在寻找一种使用 Python 从给定源复制图像文件的方法。

我确实在互联网上阅读了几篇文章，但我发现总是只在一个特定平台上工作。我想知道 Python 中是否存在可以轻松复制图像文件的功能？

我的目标是最终做到这一点：

1.  文件夹/image_title.jpg
2.  复制图像
3.  新文件夹/新图像标题.jpg

其中 *new_image_title* 是当天的日期。

我的代码目前看起来像这样：

```
import shutil
import datetime

shutil.copy('folder/alpha.jpg', 'new_folder/'datetime.date()'.jpg') 
```

但我收到一个错误：*SyntaxError: invalid syntax*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T11:53:45.970

**更新**：

您可能需要一个简单的字符串作为第二个参数：

而不是这个：

```
shutil.copy('folder/alpha.jpg', 'new_folder/'datetime.date()'.jpg') 
```

尝试：

```
dest = new_folder + '/' + str(datetime.date(2012, 8, 19)) + '.jpg'
shutil.copy('folder/alpha.jpg', dest) 
```

和：

```
new_folder = 'bla' 
```

`dest`变成：

```
 'bla/2012-08-19.jpg' 
```

根据需要进行调整以使名称唯一（添加时间戳？）。另请注意，通常最好使用[os.path.join()](http://docs.python.org/library/os.path.html?highlight=os.path.join#os.path.join)创建新路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T12:25:06.563

您得到 a 是`SyntaxError`因为您的字符串形成语法不正确。更正后，代码如下所示：

```
import shutil
import datetime
import os

DATE_FORMAT = '%Y-%m-%d'

filename = 'folder/alpha.jpg'
target_folder = 'new_folder'

ext = os.path.splitext(filename)[1]

shutil.copy(filename,
            os.path.join(target_folder, '%s%s'
                         % (datetime.datetime.now().strftime(DATE_FORMAT), ext)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T08:36:04.277

安装[exiftool](http://owl.phy.queensu.ca/~phil/exiftool/)

并在照片路径中运行命令：

> exiftool -d "./%Y-%m-%d" "-目录

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-19T13:03:27.613

我已经完成了，谢谢你:)所以这是我的最终版本，以防它可以帮助其他人：

```
import shutil
import datetime

now = datetime.datetime.now()
date=str(now.year)+'-'+str(now.month)+'-'+str(now.day)

new_folder = "source/new_folder"
dest = new_folder + '/' + str(date) + '.jpg'
shutil.copy('source/alpha.jpg', dest) 
```

最后一件事：目前，程序只是运行，没有说什么。那么有谁知道如何打印一条消息，说明复制是否有效？

# c# - 使用对象填充 Cellset

> ID：12026242
> 
> 赞同：0
> 
> 时间：2012-08-19T11:52:59.540
> 
> 标签：c#, ado.net, mdx, adomd.net

我最近一直在使用 MDX 和 cellset。我得到了一个 MDX 查询，它可以以 3 暗格式显示数据，并且我能够在 .Net 代码中使用 CELLSET 获取数据。稍后我将单元集转换为数据表，以使其更容易在应用程序中操作和显示。（类似于来自的代码： http: [//asmdx.blogspot.in/2008/05/code-utility-code-for-converting.html](http://asmdx.blogspot.in/2008/05/code-utility-code-for-converting.html)）

我只是想知道为什么我需要使用会占用大量内存的数据表。我不得不考虑用对象替换数据表。即，**将 Cellset 转换为用户定义对象的集合。**. t可以吗？请问有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T08:32:46.787

[您可以使用 ADOMD.NET 的ExecuteXmlReader 方法](http://msdn.microsoft.com/en-us/library/ms123462.aspx)以 XML 格式获取 MDX 查询结果：您的内存问题将得到解决，然后您可以（相对）轻松地在应用程序中使用生成的 XML（例如，您可以使用 Linq for XML 将 XML 转换为业务对象）。

# mysql - 仅针对具有相同 ID 的记录按字段排序记录

> ID：12026244
> 
> 赞同：0
> 
> 时间：2012-08-19T11:53:23.423
> 
> 标签：mysql, sql

我在 SQL 中有一个 EAV 表，它像往常一样对每个 ID 都有几条记录。这些记录中的每一个在名为“权重”的列中都有一个数值，我正在尝试对该表进行排序，以便对于每个 ID，记录按权重的降序排列。这将是一个一次性的过程，因为我打算确保数据在将来进入表时进行排序。

同样是对`SELECT`所有数据执行类似操作的常规协议，按照您想要的方式对其进行排序，然后使用`REPLACE`命令替换表中的旧数据？

我知道我可以通过以下方式为一个 id 做到这一点：

```
SELECT * FROM my_table WHERE id = 'X' ORDER BY weight DESC 
```

但我需要以某种方式为表中的每个 id 执行此操作。这通常是如何完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T11:59:07.503

在这种情况下，您将始终按照您希望的顺序返回数据：

```
SELECT * from theTable order by  id, weight desc 
```

您不以任何特定顺序存储数据。（即使您尝试这样做也没关系）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T11:56:08.317

删除`WHERE`子句并添加`id`到`ORDER BY`. 这样，您的结果集将首先按 排序`id`，对于每个`id`，它将按 排序`weight`。

```
SELECT * FROM my_table ORDER BY id, weight DESC 
```

# http - 为什么 HTTP 代理能够支持 IRC 和 FTP 等协议？

> ID：12026247
> 
> 赞同：32
> 
> 时间：2012-08-19T11:53:44.797
> 
> 标签：http, proxy, protocols, socks

我了解 SOCKS 代理仅在 TCP 级别建立连接，而 HTTP 代理在 HTTP 级别解释流量。因此，SOCKS 代理可以用于任何类型的协议，而 HTTP 代理只能处理 HTTP 流量。但是为什么像 Squid 这样的 HTTP 代理可以支持像 IRC、FTP 这样的协议呢？当我们使用 HTTP 代理进行 IRC 或 FTP 连接时，具体会发生什么？通过 HTTP 协议将包发送到代理时，是否有任何元数据添加到包中？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-02-27T10:58:09.127

如果 HTTP 代理支持主要用于 HTTPS 连接的 CONNECT 方法，则 HTTP 代理能够支持 HTTP 以外的高级协议，以下是 Squid wiki 的描述：

> CONNECT 方法是一种通过 HTTP 代理建立任何类型连接的方法。默认情况下，代理会与指定服务器建立 TCP 连接，以 HTTP 200（已建立连接）响应进行响应，然后在客户端和服务器之间来回传送数据包，而无需了解或解释隧道流量

如果客户端软件支持通过启用“HTTP CONNECT”的 (HTTPS) 代理进行连接，则它可以是可以与此类代理一起使用的任何高级协议（VPN、SSH、SQL、版本控制等）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-08-18T02:19:03.190

正如其他人所提到的，“HTTP CONNECT”方法允许您通过代理建立任何基于 TCP 的连接。此功能主要用于 HTTPS 连接，因为对于 HTTPS 连接，整个 HTTP 请求都是加密的（因此在代理看来它是一个“无意义的”TCP 连接）。换句话说，通过代理的 HTTPS 会话，或通过代理的 SSH/FTPS 会话，对于代理来说都将显示为“加密会话”，并且无法区分它们，因此它必须要么允许他们全部或不接受。

在正常操作期间，HTTP 代理接收 HTTP 请求，并且“足够聪明”以理解请求以便能够对其进行高级操作（例如，搜索其缓存以查看它是否可以在不到达目的地的情况下提供响应服务器，或查阅白名单/黑名单以查看是否允许此 URL 等）。在“连接”模式下，这些都不会发生。代理与目标服务器建立 TCP 连接，并将所有来自客户端的流量转发到目标服务器，并将所有流量从目标服务器转发到客户端。这意味着任何 TCP 协议都可以工作（HTTPS、SSH、FTP - 甚至是纯 HTTP）

# java - 正确的日期格式？

> ID：12026253
> 
> 赞同：-5
> 
> 时间：2012-08-19T11:54:20.427
> 
> 标签：java, date

只是一些可能很容易，但让我很困惑的事情，我有一个类调用另一个类。

```
public static int getNumberOfDaysBetweenDates(Date d1, Date d2)
{
    //rest of code
} 
```

在文件的另一部分被调用。唯一的问题是，我究竟如何声明 d1 和 d2？我尝试了一些事情，但不断遇到不兼容的错误等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T12:04:35.457

Curia，你传递的不是`Date`物体..它们甚至不是`String`s。您必须创建`Date`对象，然后传递给您的方法，然后它才能工作。

```
SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy"); 
Date d = sdf.parse("21/12/2012"); 
```

# c# - 通过从 xml 文件中获取数据来更新共享点列表

> ID：12026260
> 
> 赞同：0
> 
> 时间：2012-08-19T11:55:23.820
> 
> 标签：c#, sharepoint-2010

伙计们，我需要你的帮助。

我有一个列表，它包含两列：标题和比例

```
List                                         xml
-----                                        ---------
Title      Scale                             root

Title1     1                                    <Scale>1</Scale>
title2     3                                    <Scale>3</Scale>
title3     5                                    <Scale>5</Scale>
title4     8                                    <Scale>8</Scale>

and so on 
```

标题字段已经填好，假设使用以下值：Title1、title2 和 Title3。现在，我想用 xml 文件中的值填充 Scale 字段。

我不知道如何做到这一点。请问可以帮忙吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T07:14:07.633

As for what I know, you cannot enter it through the xml file. But I am pretty sure you can use a c sharp code to edit each item (SPListItem)

# c - 打印直方图时出现分割错误

> ID：12026263
> 
> 赞同：0
> 
> 时间：2012-08-19T11:55:49.837
> 
> 标签：c, kernighan-and-ritchie

好的，所以我想做这个问题：“编写一个程序来打印其输入中单词长度的直方图”（Brian 和 dennis ritchie 的《C 编程》一书的练习 1-13）。在这段代码中，我只打印各种字长的计数（作为我的第一次尝试）。

这个程序编译得很好，但是在运行代码时我得到了这个分段错误（代码转储）错误。这段代码有什么问题？

```
#include<stdio.h>
void read(char input[]);
void draw(int i[]);
main()
{
    int i,k,l;
    int len[16];
    char input[100];
    read(input);
    i=k=l=0;
    for(l=0;l<=15;l++)
    {
        len[l]=0;
    }
    while(input[i]!='/0')
    {   
        if(input[i]!='\n'&&input[i]!='\t'&&input[i]!=' ')
        {   k++;
            i++;
        }
        else
        {   len[k]=len[k]+1;
            k=0;
            i++;    
        }
    }
    draw(len);
    return 0;
}

void read(char c[])
{
    int i=0;
    int a;
    while((a=getchar())!=EOF)
    {   c[i]=a;
        i++;
    }
    c[i]='\0';
}

void draw(int len[])
{   int i=0;
    printf("Length\tWords\n");
    for(i=1;i<=15;i++)
    printf("%6d\t%6d\n",i,len[i]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T11:58:02.713

```
for(l=0;l<=15;l++)
{
    len[l]=0;
} 
```

您的数组是类型`int [15]`，因此您正在访问数组外的元素。

`draw`您在此处的函数中有完全相同的问题：

```
for(i=1;i<=15;i++) 
```

还：

```
char a;
while((a=getchar())!=EOF) 
```

`a`应该是 type`int`而不是`char`。看这里的解释：

[http://c-faq.com/stdio/getcharc.html](http://c-faq.com/stdio/getcharc.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T12:40:01.313

此行包含错误：

```
while(input[i]!='/0') 
```

并导致您的代码访问不属于您的程序的内存。

它应该是：

```
while(input[i]!='\0') 
```

因为以 char 结尾的字符串是 '\0'。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T11:59:21.817

我注意到的一个错误是在`for(l=0;l<=15;l++)`. 它应该是`for(l=0;l<15;l++)`。

`int len[15]`手段`len`是大小为 15 的 int 数组，具有有效位置，`len[0], len[1], ... len[14]`但在这里您正在访问`len[15]`的是`undefined`并且可能导致`segmentation fault`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T12:09:27.480

在函数`read`中，您不检查输入的长度，因此如果您的输入大于您的条目数，`c`您将写入不属于您的内存中。

**编辑：**

签入调试器后，更容易搜索错误原因，如果您查看该`while`循环，您会非常清楚地看到它：

```
while(input[i]!='/0') 
```

您将一个字符`input`与一个非法字符文字进行比较。您正在使用正斜杠，但它应该是一个反斜杠：`'\0'`。实际上，您应该对多字符字符文字发出警告。

# ruby-on-rails - 如何处理“has_many:through”关联的关联对象？

> ID：12026272
> 
> 赞同：0
> 
> 时间：2012-08-19T11:56:40.633
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, associations, naming-conventions

*我正在使用 Ruby on Rails* 3.2.2，我想知道为了处理`has_many :through` `ActiveRecord::Association`. 也就是说，我有：

```
class User < ActiveRecord::Base
  has_many :article_editor_associations, :class_name => 'Articles::UserEditorAssociation'
  has_many :articles, :through => :article_editor_associations
end

class Article < ActiveRecord::Base
  has_many :user_editor_associations, :class_name => 'Articles::UserEditorAssociation'
  has_many :editor_users, :through => :user_editor_associations
end

class Articles::UserAssociation < ActiveRecord::Base
  belongs_to :editor_users
  belongs_to :articles
end 
```

通过使用上面的代码，我可以运行该`@article.editor_users`方法来检索*Editor*`Array`。但是，为了使事情更适合我的应用程序（例如，为了以“程序化”方式处理 I18n 翻译和类似的事情），我正在考虑向我的应用程序添加一个新*模型*，例如以下： *`User`*

 **```
class EditorUser < User # Note the class name and the class inheritance
  ...
end 
```

这样，通过我的应用程序，我可以引用`EditorUser`该类，以便像处理`User`对象一样处理文章“编辑器用户”实例......更多，因为继承，`EditorUser`我可以在类中声明“特定方法”（例如，范围方法）仅适用于`EditorUser`实例（不适用于`User`实例）...

*这是一种“常见”的方法来制作我想做的事情吗？是“铁路之路”吗？如果是这样，我可以/应该做什么来处理这种情况？如果没有，我怎么能/应该继续？*

* * *

换句话说，我认为使用类`EditorUser < User ... end`是因为关联的对象（通过运行方法`EditorUser`检索）是对象。我认为通过在目录（或其他地方）中声明一个类可以简化我的应用程序中的事情，因为您可以解决该常量名称（例如，您可以“使用”该常量名称以“构建”翻译字符串或通过说明仅用于实例的新方法）。`@article.editor_users``User``EditoUser``app/models``EditorUser`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T12:06:31.040

使用 Rails，我学会了首先关注命名约定和标准用法（“约定”优于配置），并将其设置如下：

```
class User < ActiveRecord::Base
  has_many :editors
  has_many :articles, :through => :editors
end

class Article < ActiveRecord::Base
  has_many :editors
  has_many :users, :through => :editors
end

class Editor < ActiveRecord::Base
  belongs_to :user
  belongs_to :article
end 
```

如果您想要不同的编辑器访问级别，您可以使用加入记录的存在，例如 User.editor 或向编辑器添加附加属性。

以上内容可能并不能完全回答您的问题，但应该是一个很好的起点。我这么说是因为关于 Rails 的最重要的事情之一是它使用了“约定优于配置”的原则。这很好，因为它导致了简洁、简约的代码。这很糟糕，因为您必须学习所有无数的约定。如果您不了解它们或框架，您可能会陷入一大堆麻烦，正如我在多年来从事的许多 Rails 应用程序中所看到的那样。

所以我的建议是真的退后一步。不要试图强迫事情与类重命名之类的事情一起工作。如果我展示的设置不能满足您的需求，请重新审视您的需求并阅读更多关于 API 中的活动记录和关联的信息。我知道这对于 Rails 可能会令人沮丧很长一段时间，但如果你想长期成为一名优秀的 Rails 程序员，你真的需要看看如何以正确的方式做事。**

# c++ - 分配空间失败时的函数返回值

> ID：12026276
> 
> 赞同：1
> 
> 时间：2012-08-19T11:57:25.630
> 
> 标签：c++, pointers

```
int main()
{

 cout<<"Enter n";

 cin >> n;

 int * a = new int[n];

 a = foo(n);

 free(a);

 return -1;

}

int * foo(int n)
{
 int * a = new int [n];

 if(!a) // what should I return here if allocation of a fails 

 {}

 free(a);

} 
```

在上面的代码中，我试图从 main 中捕获函数的返回值，函数的返回类型是指针。但是我正在动态分配内存。那么，如果我的内存分配失败，我应该返回什么...任何特殊符号，如 NULL。

PS - 这是一个非常基本的问题，无法将我的问题形式化为任何简洁的形式，以便通过 Google 进行搜索。

编辑：谢谢大家。我已经解决了我的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T12:00:33.273

`operator new`抛出异常（except `nothrow operator new`），因此，您可以捕获此异常并返回`null pointer`，或重新抛出，或抛出其他异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T12:00:57.323

如果函数分配失败，则返回 NULL 是一种习惯，这些函数分配自己的内存并返回指向它的指针。参见例如[`strdup()`](http://linux.die.net/man/3/strdup)。请注意，如果无法分配内存，则运算符`new`会抛出`std::bad_alloc`，因此如果您想返回 NULL，则可能需要捕获它，或者您可以让`std::bad_alloc`传播出函数。

但是请注意，返回此类指针并不总是明智的，因为它会引发所有权问题并增加内存泄漏的可能性。

您可能会发现坚持使用[RAII](http://en.wikipedia.org/wiki/Resource_Acquisition_Is_Initialization)惯用语会使您的代码更易于推理且不易出错。RAII 习惯用法的一个结果是分配和释放是由同一个代码单元完成的。

在您的特定情况下，您分配数组，`main()`因此您可以将指向它的指针传递给`foo()`并释放内存`main()`。

此外，如果您使用`new`分配，您应该使用正确版本的`delete`解除分配（这里`delete[]`因为您分配了一个数组）。您用于`free()`释放分配给`malloc()`和朋友的内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T12:11:19.513

如果分配失败，`new`运算符会抛出异常。`bad_alloc`因此，您可以捕获此异常并处理错误。

举个例子：

```
#include <new> // std::bad_alloc

int* foo(int n)
{
   int* a(new int[n]);

   return a; // I guess you want to return the address stored in a
}

int main()
{
   try
   {
      int* a(foo(n));
   }
   catch(std::bad_alloc& ba)
   {
      // Handle here the error (e.g: std::cerr << "Allocation failed:" << ba.what() << std::endl;)
   }

   return 0;
} 
```

**EDIT1：**如果您使用 C++11 功能，请忘记`NULL`或`0`改用`nullptr`！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T11:59:52.213

如果您的返回值是一个指针，那么 NULL 是发生错误时最合乎逻辑的值。您也可以考虑引发异常，但现在返回 NULL 应该适合您的需要。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-19T12:01:25.043

在这种情况下，新运算符会抛出 bad_alloc 异常，您可能应该根据自己的要求捕获并处理它（[http://www.cplusplus.com/reference/std/new/bad_alloc/](http://www.cplusplus.com/reference/std/new/bad_alloc/)）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-19T12:02:23.863

它可以返回任何值。问题是你必须正确对待它。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-19T12:03:11.873

```
if(!a) // what should I return here if allocation of a fails 

 { return NULL;} 
```

这将意味着分配失败，即返回一个 NULL 指针。

# php - 在mysql中显示特定行

> ID：12026281
> 
> 赞同：0
> 
> 时间：2012-08-19T11:58:31.163
> 
> 标签：php, mysql

我有一个需要获取所有数据的表，但我需要在下拉列表中显示“类型”列。现在在我的桌子上有 2 个绿色、1 个红色和 3 个白色。

```
id  type_id     type        info1                   info2
1   1           green       some important data     some important data
2   1           green       some important data     some important data
3   2           red         some important data     some important data
4   3           white       some important data     some important data
5   3           white       some important data     some important data
6   3           white       some important data     some important data 
```

我想像这样在 php 上显示它（如果代码不完整，请不要担心，我明白了：D），

```
<select>
 <?php
 foreach($result as $r):
 echo '<option>'. $r['type'] . '</option>';
 endforeach;

?>
</select> 
```

这样做的问题是它在列（类型）中显示所有数据，我需要每个 type_id 显示 1 个。我不能使用 GROUP BY，因为它不会显示我在该类型下需要的信息。我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T12:06:40.930

在您的案例中获取类型列表的正确方法：

```
SELECT DISTINCT type FROM table; 
```

[阅读有关 MySQL SELECT](http://dev.mysql.com/doc/refman/5.0/en/select.html)的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T12:15:54.103

如果您不想运行第二个查询：

```
<select>
    <?php
        $type=array();
        foreach($result as $r):
            $type[$r['type']] = '<option>'. $r['type'] . '</option>';
        endforeach;
        echo implode("", $type);
    ?>
</select> 
```

如果可以运行第二个查询，请阅读[Alex Belyaev 的回答](https://stackoverflow.com/a/12026334/679318)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T14:49:47.500

首先，您需要使用选择查询从表中检索所有数据。在处理查询结果集时，您需要将类型字段的所有值存储到一个数组中，并将 array_unique 函数应用于包含类型值的数组，并使用 foreach 循环生成唯一数组，您可以填充具有不同类型值的下拉列表。此解决方案将消除第二次查询的使用，您将能够访问存储在表中的所有必需数据。

# javascript - 使用剔除缓存计算值

> ID：12026287
> 
> 赞同：6
> 
> 时间：2012-08-19T11:59:43.593
> 
> 标签：javascript, knockout.js, knockout-2.0

假设我想创建一个函数来循环数组 ( `observableArray`) 中的所有元素并从数组中返回适当的项目。

我正在考虑创建一个`computed`函数来处理这个问题，并使用`ko.utils.arrayFilter`它来进行过滤。

我应该缓存这个动作吗？还是在`computed`内部`arrayFilter`做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-19T21:35:12.680

计算出的 observables 的值被缓存。它们的值仅在最初和依赖项更改时计算。因此，您可以一遍又一遍地访问该计算的值并始终接收缓存的值。

根据您的评论，听起来您想根据某些参数创建计算出的 observables。该技术的几个注意事项：

*   单个元素的绑定在计算的 observable 内部执行以跟踪依赖关系。这意味着，如果您只想在 UI 中使用过滤器，那么您实际上可以避免创建计算的 observable，而直接调用过滤器函数。每当依赖项更改时，您的绑定将触发并且该函数将再次运行。如果您还想以编程方式与过滤后的数据进行交互，这不是最好的解决方案。这是一个示例：http: [//jsfiddle.net/rniemeyer/QSgPz/](http://jsfiddle.net/rniemeyer/QSgPz/)

*   如果您要经常使用这个概念，那么您甚至可以扩展 observableArrays 以直接从 observableArray 中调用过滤器，例如：http: [//jsfiddle.net/rniemeyer/VhCVc/](http://jsfiddle.net/rniemeyer/VhCVc/)

*   作为替代方案，如果您有一个返回计算本身的函数，那么您要确保只为您需要的每个计算过滤器调用一次。您不想从每次触发绑定时重新创建的绑定中调用它（除非您有一个自定义绑定在 init 中正确处理它）。这是一个示例：http: [//jsfiddle.net/rniemeyer/JrHnT/](http://jsfiddle.net/rniemeyer/JrHnT/)。如果您经常使用它，您可以再次扩展 observableArrays 以便能够为您创建一个计算对象。

因此，如果您仅在绑定中使用 this，那么您可以选择跳过计算并仅使用函数，因为绑定使用其自己的计算 observable。如果您需要从视图模型与其交互，那么您可能希望在此处创建过滤器。

# javascript - 当另一个切换器尚未切换回时，如何禁用一个切换器？

> ID：12026291
> 
> 赞同：0
> 
> 时间：2012-08-19T12:00:02.133
> 
> 标签：javascript

我有一个带有 2 个按钮的图像：

```
<div class="panel">
    <div>
        <a class="a-button>Toggle A</a>
        <a class="b-button>Toggle B</a>
    </div>
    <p id="statics">Statics numbers</p>
   <p id='chart">Chart</p>
</div>
<div class="item-img"><img src="..."></div> 
```

如果我想查看#statics，我点击一个按钮来隐藏item-img。然后，再次单击以显示 img 并隐藏 #statics。

如果我想查看#chart，我单击b 按钮隐藏item-img，然后再次单击显示item-img 并隐藏#chart。

```
jQuery(document).ready( function($) {
    $(".a-button").click(function () {
        $("#statics").toggle("slow");
        $(".item-img").toggle('slow');
        });
    $(".b-button").click(function () {
        $("#chart").toggle("slow");
        $(".item-img").toggle('slow');
        });
}); 
```

问题是 - 如果我通过切换器 a 按钮或 b 按钮隐藏 item-img，然后，单击另一个切换器（a 或 b），然后单击第一个切换器以再次显示项目 -img，#statics 和#chart 出现，搞得一团糟。

当另一个切换器尚未切换回时，如何禁用一个切换器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T12:05:17.813

```
jQuery(document).ready( function($) {
    $(".a-button").click(function () {
        if(!$("#chart").is(':visible')) {
            $("#statics").toggle("slow");
            $(".item-img").toggle('slow');
        }
        });
    $(".b-button").click(function () {
        if(!$("#statics").is(':visible')) {
            $("#chart").toggle("slow");
            $(".item-img").toggle('slow');
        }
        });
}); 
```

[工作小提琴](http://jsfiddle.net/K2q3k/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T12:05:26.193

```
jQuery(document).ready( function($) {
    var state;

    $(".a-button").click(function () {
        $("#statics").toggle("slow");
        $(".item-img").toggle('slow');

        state = $(".b-button").prop('disabled');
        $(".b-button").prop('disabled', !state);
    });
    $(".b-button").click(function () {
        $("#chart").toggle("slow");
        $(".item-img").toggle('slow');

        state = $(".a-button").prop('disabled');
        $(".a-button").prop('disabled', !state);
    });
}); 
```

**编辑**：没有意识到您没有使用实际按钮，[请参阅使用此更新的 html 的工作演示](http://jsfiddle.net/yfruG/)（不确定您是否可以选择更改这些按钮）：

```
<input type="button" class="a-button" value="Toggle A">
<input type="button" class="b-button" value="Toggle B"> 
```

# c# - 如何为列表视图项设置填充？

> ID：12026301
> 
> 赞同：4
> 
> 时间：2012-08-19T12:01:31.083
> 
> 标签：c#, winforms, listview, padding

我在 Windows 窗体中的大图标视图上有一个 Listview，图像彼此如此接近。
那么我怎么能设置填充项呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T13:30:54.967

ListView 中没有方法可以做到这一点。你可以看看[LVM_SETICONSPACING](http://msdn.microsoft.com/en-us/library/bb761176%28VS.85%29.aspx)。[如果您需要帮助，这](http://qdevblog.blogspot.co.uk/2011/11/c-listview-item-spacing.html)是一个非常好的教程。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-10-23T16:02:08.077

您可以使用 IndentCount 属性。

# c++ - 将字符串添加到 char * 数组中

> ID：12026306
> 
> 赞同：0
> 
> 时间：2012-08-19T12:02:13.020
> 
> 标签：c++, arrays, c++11

我想知道如何将字符串添加到 char* 数组中

```
#define FROM    "<rasulasath@Tester.com>"
#define TO      "<rasulasath@gmail.com>"
#define CC      "<rasulasath@gmail.com>"
#define SUBJECT "TESTING SUBJECT"

string testing("USING variables");
const char * c = "Subject: ";

static const char *payload_text[]={
"To: " TO "\n","From: " FROM "\n","Cc: " CC "\n",c "\n",
"\n", /* empty line to divide headers from body, see RFC5322 */
SUBJECT "\n",
"\n",
"Testing the msg.\n",
"Check RFC5322.\n",
NULL
   }; 
```

我想将`c`变量 testing 添加到 payload_test[] 数组中，或者是否有其他方法可以使用用户创建的变量创建数组 paylod_text[]。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T12:08:12.760

为什么不使用动态分配的数组？

```
char **email = malloc(sizeof(*email) * 6);
email[0] = "To: " TO "\n";
...
char buf[256];
snprintf(buf, sizeof(buf), "%s \n", c);
email[3] = strdup(buf);
.. 
```

不要忘记在使用后释放 strdup() 创建的任何字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T12:08:50.997

如果要添加测试，只需将其放入参数中即可

```
testing.c_str() 
```

还有另一种方法

```
string body="Testing the msg.\n";
body+=testing;
body+="Bye ...."; 
```

并放入数组使用

```
body.c_str(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T12:08:53.413

我更喜欢使用`string`for `payload_text`。然后您可以轻松地附加字符和其他字符串。`payload_text.c_str()`如果底层库需要，则后者`char*`

有`boost::format()`。您可以使用它来替换`%1%`,`%2%`与您的主题和正文。像`boost::format("SOME STRING %1% AND THEN %2%") % subject % body`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T12:12:14.833

要在 C 中本地执行此操作（相对于使用 C++ STL 类），您可以使用 strcat：

```
char* buffer = malloc((strlen(c) + strlen(payload_text) + 1) * sizeof(char));
strcpy(buffer, payload_text);
strcat(buffer, c); 
```

这仅在您确定输入以空值结尾且不包含内部空值时才有效。否则使用 strncpy 和 strncat。

要使用 STL 类在 C++ 中执行此操作：

```
string result = string(payload_text);
result += testing; 
```

# jquery-mobile - jquery导航栏，如何自定义外观

> ID：12026308
> 
> 赞同：-1
> 
> 时间：2012-08-19T12:02:29.130
> 
> 标签：jquery-mobile, navbar

有没有办法让导航栏看起来像这样？
你知道一个插件吗？jqm 导航栏真的很难看....
谢谢

![在此处输入图像描述](../Images/4e56f73032bcdce3e74c36de0996b8aa.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T15:13:52.033

您可以使用自定义图标等自定义导航栏。这是文档：http: [//jquerymobile.com/test/docs/toolbars/docs-navbar.html](http://jquerymobile.com/test/docs/toolbars/docs-navbar.html)

至于其他选项，您可以使用 jQuery Mobile Themeroller 更改颜色主题等：[http ://www.jquerymobile.com/themeroller](http://www.jquerymobile.com/themeroller)

# java - jdt.core Java 模型的 JUnit 测试

> ID：12026309
> 
> 赞同：2
> 
> 时间：2012-08-19T12:02:33.730
> 
> 标签：java, eclipse, junit, eclipse-plugin, eclipse-jdt

我正在尝试为我的代码做一些 JUnit 测试。但问题是，我使用了 ICompilationUnit、IPackageFragment、ITypes 等 Java 模型。我不知道如何创建一些 ICompilationUnit 然后进行测试。我在 google 和 stackoverflow 上搜索了信息，但没有找到任何东西。

我的问题是，如何使用 jdt.core 的类进行 Junit 测试......有人可以给我一些代码示例。

谢谢

这是我编码的方法：

```
private void updateLists() {

    if(!getCompilationUnit().isEmpty()){

        for(int i = 0;  i < getCompilationUnit().size(); i++){

        try {

                Document doc = new Document(getCompilationUnit().get(i).getSource());

                int totalNumberOfCode = doc.getNumberOfLines();

                IType type = getCompilationUnit().get(i).findPrimaryType();                 

                                    IType[] types = getCompilationUnit().get(i).getTypes();

                updateListPrimaryType(type, totalNumberOfCode, types);

                updateListIMethod(type);
                updateListMember(type,types);

            } catch (JavaModelException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T14:37:22.277

这段代码展示了如何使用 Java AST 解析器获取一些 Java 源代码（在变量 javaSource 中）并从中获取 ICompilationUnit。您可以通过使用插件 org.eclipse.jdt.core 作为依赖项来获取这些类。

```
import org.eclipse.jdt.core.dom.ASTParser;

String javaSource = "some java source"'

    // see org.eclipse.jdt.core.dom.AST for a complete
    // list of supported levels.
ASTParser parser = ASTParser.newParser(AST.JLS2);
parser.setSource(javaSource.toCharArray());
CompilationUnit unit = (CompilationUnit) parser.createAST(null); 
```

# php - 只在 mssql_fetch_array 中返回最后一行粗体

> ID：12026312
> 
> 赞同：0
> 
> 时间：2012-08-19T12:03:23.317
> 
> 标签：php

我有一个类似于下面的 php 代码。我想让最后一行加粗。是否可以？

```
<table border = "5">
<?php
if (isset($startdate) && isset($enddate) ){
$query = "storedprocedure '$startdate','$enddate','field1'";
$result = mssql_query($query);
while ($rows = mssql_fetch_array($result) ) {
echo "<tr><td>".$rows[0]."&nbsp;<td>".$rows[1]."&nbsp;
<td>".$rows[2]."&nbsp;<td>".$rows[3]."&nbsp;
<td>".$rows[4]."&nbsp;<td>".$rows[5]."&nbsp;";
}
}
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T12:09:35.540

您可以[`mssql_num_rows()`](http://php.net/mssql_num_rows)在循环之前获取查询返回的总行数，然后（使用计数器）查看当前行是否是最后一行，然后应用您想要的任何样式：

```
<table border = "5">
<?php
if (isset($startdate) && isset($enddate) ){
    $query = "storedprocedure '$startdate','$enddate','field1'";
    $result = mssql_query($query);
    $numRows = mssql_num_rows($result);
    if ($numRows > 0) {
        $counter = 0;
        while ($rows = mssql_fetch_array($result) ) {
            $style = ($counter++ == ($numRows - 1)) ? ' style="font-weight: bold;"' : '';
            ?>
            <tr>
                <td<?=$style;?>><?=$rows[0];?></td>
                <td<?=$style;?>><?=$rows[1];?></td>
                <td<?=$style;?>><?=$rows[2];?></td>
                <td<?=$style;?>><?=$rows[3];?></td>
                <td<?=$style;?>><?=$rows[4];?></td>
            </tr>
            <?
        }
    }
}
?>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T12:11:51.627

我发现将数据复制到数组（或更好的对象）要好得多，然后在最后输出数据使这些事情变得更容易。

在这种情况下，如果您将数据放入一个数组中，您可以使用一些可爱的东西`count()`，例如查看有多少行等。这让您可以在显示循环中进行简单的检查，以查看它是否是最后一个元素大批。

这应该有效：

```
<?php
if (isset($startdate) && isset($enddate))
{
    $res=array();
    $query = "storedprocedure '$startdate','$enddate','field1'";
    $result = mssql_query($query);
    while ($rows = mssql_fetch_array($result) ) 
    {
        $res[]=$rows;
    }
}
?>

<table border = "5" id="1">
<?php
    $numberRows=count(%res);
    for($i=0;$i<$numberRows;$i++)
    {
        $boldStart="";
        $boldEnd="";
        if($i==($numberRows-1))
        {
            $boldStart="<B>";
            $boldEnd="</B>";
        }
        echo "<tr><td>".$boldStart.$rows[$i][0].$boldEnd."&nbsp;</td><td>".$boldStart.$rows[$i][1].$boldEnd."&nbsp;
        </td><td>".$boldStart.$rows[$i][2].$boldEnd."&nbsp;</td><td>".$boldStart.$rows[$i][3].$boldEnd."&nbsp;
        </td><td>".$boldStart.$rows[$i][4].$boldEnd."&nbsp;</td><td>".$boldStart.$rows[$i][5].$boldEnd."&nbsp;</td>";
    }
?>
</table> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T12:11:54.287

只需使用 CSS：

t1 tr:last-child{font-weight:bold;}

# jquery - 响应式布局——试图隐藏元素

> ID：12026313
> 
> 赞同：0
> 
> 时间：2012-08-19T12:03:23.510
> 
> 标签：jquery, css, responsive-design, media-queries

我正在构建一个响应式图片库页面，可以在[此处查看](http://tinyurl.com/8gk5ey9). 使用媒体查询，我已经成功地为 iPad 定义了替代布局——纵向和横向——但是我在隐藏 iPhone 视口的关键元素时遇到了问题。问题源于我正在使用 jQuery——通过“galleriffic”图片库插件——动态显示#gallery div，从而允许在禁用 javascript 时优雅降级（在这种情况下，只有缩略图将是显示。）我最终想在面向 iphone 的媒体查询中复制这种行为——即只显示缩略图块，但是将 #gallery ID 和 .content 类都设置为“display:none”没有效果，我'我假设是因为 Galleriffic 脚本将“display:block”指定为内联声明。

将“！important”添加到“display：none”似乎没有帮助；有什么办法让我以某种方式覆盖 jQuery 内联声明？我想一种选择就是禁用 iPhone 的脚本，但这似乎不是最优雅的解决方案......

非常感谢这里的任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T12:12:31.857

`!important`声明位于分号之前的 CSS 属性值中：`display: none !important;`。那应该解决它：-p

# winbugs - 我可以从 Winbugs/OpenBUGS 获得预测吗？

> ID：12026315
> 
> 赞同：2
> 
> 时间：2012-08-19T12:03:32.353
> 
> 标签：winbugs

我是 WinBUGS 和 OpenBUGS 的新手。我刚刚运行了一个示例模型，想知道是否可以得到 WinBUGS/OpenBUGS 生成的预测。如果没有，是否有任何方便的方法来实现这一点（例如，借助 R 等其他应用程序）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T08:23:51.557

是的你可以。在贝叶斯工具中，很容易得到预测。在您的设计矩阵中，只需添加新行，并将响应变量设置为 NA。您可以[在此处查看具体示例](https://stats.stackexchange.com/a/31554/5509)。

# java - 从 HTML 响应中提取数据 - Android

> ID：12026317
> 
> 赞同：0
> 
> 时间：2012-08-19T12:03:51.463
> 
> 标签：java, android, html, api, http-get

在我的 Android 应用程序中，我正在使用对其 API 的 GET 请求访问网站。该请求返回一个包含各种用户信息的 HTML 文件。从中，我想知道如何提取用户数据，例如他们的个人资料图片，他们的数据等。我想知道如何访问和检索这些数据以显示在我的应用程序中。

任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T12:20:11.037

如果您只想能够访问数据，您可以让 api 以 JSON 格式输出并从您的应用程序中读取 JSON，例如：

```
public void getData(){

          String result = "";

          //http post

          try{
                 HttpClient httpclient = new DefaultHttpClient();
                 HttpPost httppost = new HttpPost("http://website.com/download.html");
                 HttpResponse response = httpclient.execute(httppost);
                 HttpEntity entity = response.getEntity();
                 InputStream is = entity.getContent();

                  BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
                  StringBuilder sb = new StringBuilder();
                  String line = null;
                  while ((line = reader.readLine()) != null) {
                          sb.append(line + "\n");
                  }
                  is.close();
                  result=sb.toString();

          }catch(Exception e){
                  Log.e("log_tag", "Error converting result "+e.toString());
          }

          //parse json data

          try{
                JSONArray jArray = new JSONArray(result);
                  for(int i=0;i<jArray.length();i++){
                          JSONObject json_data = jArray.getJSONObject(i);
                          names.add("   " + json_data.getString("name"));
                          age.add("   " + Integer.toString(json_data.getInt("age")));

                  }

          }catch(JSONException e){
                  Log.e("log_tag", "Error parsing data "+e.toString());

          }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T13:23:55.757

**HTML解析提取和操作**数据的最简单方法然后去`JSoup`......

**有关详细信息，请参阅此链接：**

[http://jsoup.org/](http://jsoup.org/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-19T12:04:48.503

最简单的方法是在 WebView 中显示 HTML 数据。

# graphics - 运行 OGRE SDK 失败

> ID：12026319
> 
> 赞同：0
> 
> 时间：2012-08-19T12:04:18.807
> 
> 标签：graphics, 3d, ogre3d, ogre

我是食人魔的新手。我下载了 OgreSDK_vc9_v1-7-4，我想用 VS2008 运行它。从中提取源代码后，我打开文件夹 OgreSDK_vc9_v1-7-4\Samples\Browser。它构建并成功运行。

但随后出现一个错误对话框。信息是：

```
错误：
这些请求的示例插件丢失、损坏或无效。
_:.\Sample_BezierPatch_d
_:.\Sample_BSP_d
ETC

```

![](../Images/f8530f8958056202747df0aeebef6e2c.png)

我是按照《OGRE 3D 1.7 Beginner's Guide》一书所说的那样做的。我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:46:20.617

在构建 Ogre 时，请确保构建了整个解决方案。即主文件夹中的主 Ogre.sln。您看到的问题很可能是由于仅执行部分构建时未构建某些组件。

# search - 狮身人面像：收到零大小的搜索响应

> ID：12026321
> 
> 赞同：4
> 
> 时间：2012-08-19T12:04:30.640
> 
> 标签：search, sphinx

我在 mac os x lion 上运行 sphinx。在配置文件中，我设置了 workers = thread. 当我尝试使用这些设置查询搜索时，我收到一条错误消息，提示收到零大小的 searchd 响应。但是，当我使用 --nodetach 选项开始 searchd 时，它工作正常。也改变 workers = fork 解决了这个问题，但我需要使用 rt 索引，所以我不能改变它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-16T09:17:10.240

你确定没有错字吗？正确的变体是：

```
workers = threads 
```

[http://sphinxsearch.com/docs/current/conf-workers.html](http://sphinxsearch.com/docs/current/conf-workers.html)

# web-services - 从 F# 3.0 查询蛋白质数据库

> ID：12026328
> 
> 赞同：7
> 
> 时间：2012-08-19T12:05:19.497
> 
> 标签：web-services, rest, soap, f#, type-providers

这个[实用](http://www.haskellforall.com/2012/08/code-example-1.html)的 Haskell 示例鼓励我安装 Visual Studio 2012 试用版，以便使用 F# 类型提供程序。但是，我完全不知道如何使用它来解决这个问题。有一个[RCSB SOAP Web 服务](http://www.rcsb.org/pdb/software/soap.do)。我使用来自 RCSB 的 WSDL Web 服务的 URL 复制[了一个示例](http://fsharp3sample.codeplex.com/wikipage?title=WsdlService_w3cschools%20temperature%20conversion)（由于 Web 服务 API 已更改，因此该示例不起作用）：

```
open Microsoft.FSharp.Data.TypeProviders

type pdb = WsdlService<"http://www.rcsb.org/pdb/services/pdbws?wsdl">

do
    let ws = pdb.Getpdbws()
    ws.getCurrentPdbIds()
    |> printfn "%A" 
```

但这在运行时崩溃并出现错误：

```
Unhandled Exception: System.InvalidOperationException: RPC Message blastPDBRequest1 in operation blastPDB1 has an invalid body name blastPDB. It must be blastPDB1
   at System.ServiceModel.Description.XmlSerializerOperationBehavior.Reflector.OperationReflector.EnsureMessageInfos()
   at System.ServiceModel.Description.XmlSerializerOperationBehavior.Reflector.EnsureMessageInfos()
   at System.ServiceModel.Description.XmlSerializerOperationBehavior.CreateFormatter()
   at System.ServiceModel.Description.XmlSerializerOperationBehavior.System.ServiceModel.Description.IOperationBehavior.ApplyClientBehavior(OperationDescription description, ClientOperation proxy)
   at System.ServiceModel.Description.DispatcherBuilder.BindOperations(ContractDescription contract, ClientRuntime proxy, DispatchRuntime dispatch)
   at System.ServiceModel.Description.DispatcherBuilder.ApplyClientBehavior(ServiceEndpoint serviceEndpoint, ClientRuntime clientRuntime)
   at System.ServiceModel.Description.DispatcherBuilder.BuildProxyBehavior(ServiceEndpoint serviceEndpoint, BindingParameterCollection& parameters)
   at System.ServiceModel.Channels.ServiceChannelFactory.BuildChannelFactory(ServiceEndpoint serviceEndpoint, Boolean useActiveAutoClose)
   at System.ServiceModel.ChannelFactory.CreateFactory()
   at System.ServiceModel.ChannelFactory.OnOpening()
   at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
   at System.ServiceModel.ChannelFactory.EnsureOpened()
   at System.ServiceModel.ChannelFactory`1.CreateChannel(EndpointAddress address, Uri via)
   at System.ServiceModel.ChannelFactory`1.CreateChannel()
   at System.ServiceModel.ClientBase`1.CreateChannel()
   at System.ServiceModel.ClientBase`1.CreateChannelInternal()
   at System.ServiceModel.ClientBase`1.get_Channel()
   at Program.pdb.ServiceTypes.PdbWebServiceClient.getCurrentPdbIds()
   at Program.pdb.ServiceTypes.SimpleDataContextTypes.PdbWebServiceClient.getCurrentPdbIds()
   at <StartupCode$ConsoleApplication2>.$Program.main@() in c:\users\jon\documents\visual studio 11\Projects\ConsoleApplication2\ConsoleApplication2\Program.fs: line 5 
```

[SOAP Web 服务](http://www.rcsb.org/pdb/software/soap.do)也被弃用，取而代之的[是 RESTful](http://www.rcsb.org/pdb/software/rest.do)服务。我如何从 F# 3.0 使用它？最简单的工作示例是什么样的？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T12:36:50.440

看起来操作`BlastPDB`已重载，并且 TypeProvider 使用的底层生成代码没有正确支持（它没有将“1”放在正文名称上）。直接使用 Svcutil [WCF 时，请参阅此答案以了解相同的问题：Svcutil 生成无效的客户端代理、Apache AXIS Web 服务、重载操作](https://stackoverflow.com/q/799365/418492)- 此页面显示[类型提供程序在内部使用 svcutil](http://msdn.microsoft.com/en-us/library/hh362328.aspx)。

AFAIK 您将无法使用类型提供程序访问 REST 服务，因为 REST 服务不提供架构（请参阅此答案[F# Type Providers and REST apis](https://stackoverflow.com/q/7462694/418492)）。您可能不得不使用 REST 客户端库（请参阅此处的一些选项[.NET Rest Client Frameworks](https://stackoverflow.com/q/4073564/418492)）或执行原始 HTTP。

> 最简单的工作示例是什么样的？

[以下是一个使用列出所有当前 PDB ID](http://www.rcsb.org/pdb/software/rest.do#current) REST API获取当前 PDB id 列表的简单示例（我相信这相当于您尝试使用 Web 服务进行的调用）。您需要添加对 System.Net.Http 的引用。

```
open System.Net.Http
open System.Threading.Tasks

[<EntryPoint>]
let main argv = 

    use httpClient = new HttpClient()
    let task = httpClient.GetStringAsync("http://www.rcsb.org/pdb/rest/getCurrent")
    printfn "%s" task.Result

    0 
```

# rvm - 无法在 Debian 上升级 rvm，似乎挂了？

> ID：12026331
> 
> 赞同：0
> 
> 时间：2012-08-19T12:05:36.397
> 
> 标签：rvm, debian, upgrade

我正在尝试在我的 Debian 服务器上升级 RVM，但由于某种原因它不起作用。这是命令的输出`rvm get stable`：

```
% Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                             Dload  Upload   Total   Spent    Left  Speed
100  9979  100  9979    0     0  10276      0 --:--:-- --:--:-- --:--:--     0
Turning on auto mode.

Downloading RVM from wayneeseguin branch stable
% Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                             Dload  Upload   Total   Spent    Left  Speed

100 1047k  100 1047k    0     0   438k      0  0:00:02  0:00:02 --:--:--  757k

Upgrading the RVM installation in /usr/local/rvm/
  RVM system user group 'rvm' exists, proceeding with installation. 
```

之后它不会继续。我已经等了大约一个小时，但没有运气。

还尝试了[https://rvm.io/rvm/upgrading/上显示的其他方法](https://rvm.io/rvm/upgrading/)

有谁知道这里有什么问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T14:30:32.273

您可以检查进程挂起的内容：

```
rvm --trace get stable 
```

会有很多输出，但最后几行很重要，它们将显示哪个命令停止执行。

您很可能重新定义了一些函数/别名，这会改变 RVM 代码的含义 - 因为它直接加载到您的 shell，最常见的重新定义之一是：

```
: -> "cd .." 
```

# mysql - 通过旋转值对 MySQL 表进行排序

> ID：12026339
> 
> 赞同：1
> 
> 时间：2012-08-19T12:07:20.350
> 
> 标签：mysql, repeat

我有电话号码表。我想按每个数字的开头对该表进行排序，但必须重复。例如，有如下行：

```
phone_number
0911226778
0905625238
0907952386
0904235582 
```

前四位数字确定提供者。前缀 0911 和 0904 属于提供商 A，0905 和 0907 属于提供商 B。我想根据提供商根据电话号码对表格进行排序。我想要的是订购 A、B、A、B 等表，其中“A”代表一堆前缀以及“B”。所以想要的顺序看起来像：

```
phone_number
0911226778
0905625238
0904235582
0907952386 
```

我找到了使用 UNION 语句或类似内容的示例。问题是我想在 php 脚本中更改非常复杂的查询。由于我不熟练，我想找到简单的方法，只需使用 ORDER BY 语句或对 WHERE 子句进行少量更改即可。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T12:12:55.363

您可以通过获取 via 的前 4 个字符来执行此`ORDER BY CASE`操作：`phone_number``LEFT(phone_number, 4)`

```
SELECT
  phone_number
FROM yourtable
ORDER BY
  CASE
    /* first group of A prefixes */
    WHEN LEFT(phone_number, 4) IN ('0911','other_a','another_a') THEN 1
    /* first group of B prefixes */
    WHEN LEFT(phone_number, 4) IN ('0905','other_b','another_b') THEN 2
    /* second group of A prefixes */
    WHEN LEFT(phone_number, 4) IN ('0904','some_a','someother_a') THEN 3
    /* second group of B prefixes */
    WHEN LEFT(phone_number, 4) IN ('0907','some_b','someother_b') THEN 4
    ELSE 5
  END ASC,
  phone_number ASC 
```

`IN()` 在我拥有的地方替换其他前缀`other_a`等...。这样做是匹配前 4 个字符，如果它们在分配的排序组中，只需应用一个数字来排序。在上面的示例中，所有 0911、other_a、another_a 都将被赋予 1，因此排在 0905、other_b、another_b 和您碰巧分配的下一组 A 之前。

在这些组内，对`phone_number`.

我想我从您的问题中了解到，A 和 B 的前缀比您列出的 4 个要多。如果这不正确，您可以将`IN()`下面的子句替换为简单`= '0904'`的示例。

不幸的是，这种方法可能对索引不是很友好。如果性能不能满足您的需求，我建议将前缀作为 a 存储`CHAR(4)`在单独的列中（带有索引）并在`ORDER BY`.

# ubuntu - 需要帮助在 Ubuntu 中设置 Rubymine 4.5 的配色方案

> ID：12026340
> 
> 赞同：1
> 
> 时间：2012-08-19T12:07:23.833
> 
> 标签：ubuntu, rubymine

我看到一些文章描述了如何更改 Rubymine 的默认配色方案。但是他们在 Mac OS 或 Windows 中做到了。我想在 Ubuntu 中制作我的 Rubymine 4.5 的配色方案，就像在 railscast.com 上的 TextMate 一样。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T12:26:31.223

配色方案配置不依赖平台，Linux、Mac、Windows步骤相同。转到`Settings`（`Preferences`在 Mac 上）| `Editor`| **颜色和字体**，然后选择其中一种预定义方案：

![计划](../Images/086972bc0ec77f8f7a17e93435910209.png)

如您所见，**RailsCasts**方案已经捆绑。您还可以使用[配色方案工具](https://github.com/JetBrains/colorSchemeTool)将其他 TextMate 方案转换为 RubyMine。`config/colors`IDE 未运行时，应将带有方案的 XML 文件放在目录中。`config`目录位置[取决于操作系统](http://devnet.jetbrains.net/docs/DOC-181)。对于 Linux 上的 RubyMine 4.5，它将是`~/.RubyMine40/config`.

# php - 从php中的字符串中删除俄语字母

> ID：12026341
> 
> 赞同：4
> 
> 时间：2012-08-19T12:07:36.597
> 
> 标签：php, regex, string, expression, whitelist

如何从 PHP 中的字符串中删除所有俄语字母？
或者相反，我只想保留。
英文字母、空格、数字和所有符号，如 !@#$%^&*(){}":?><>~'"

我怎样才能做到这一点，谢谢。

我想通了，我用### 替换所有俄罗斯 cherecters，然后我从头到尾子串。

```
$desc = preg_replace('/[а-я]+/iu','###', $desc);

$start = strpos ($desc,'###');
$end =strrpos ($desc,"###");

if($start!==false)
{
    $descStart = substr($desc,0,$start);
    $descEnd = substr($desc,$end+3);
    $desc = $descStart.$descEnd;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T12:30:23.497

```
$string = 'тест тест Тест Обязателльно Stackoverflow >!<';
var_dump(preg_replace('/[\x{0410}-\x{042F}]+.*[\x{0410}-\x{042F}]+/iu', '', $string)); 
```

输入字符串必须是 unicode，输出也必须是 unicode

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T12:43:59.033

以下正则表达式将匹配西里尔字母中的字母：[http](http://regex101.com/r/sO0uB7) ://regex101.com/r/sO0uB7 （基于 Andrey Vorobyev 文本的示例）

我想这就是你所追求的。

我不确定`i`修饰符是否必要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T12:13:20.650

我的方法是首先将字符串转译为 ASCII（以保留尽可能多的信息），然后删除不允许的字符：

```
$url = iconv("utf-8", "us-ascii//TRANSLIT", $url);
$url = strtolower($url);
$url = preg_replace('~[^-a-z0-9_]+~', '', $url); 
```

您必须在最后扩展正则表达式以匹配您需要的内容。

# c# - 如何使用 Array.sort 按特定元素对结构数组进行排序

> ID：12026344
> 
> 赞同：5
> 
> 时间：2012-08-19T12:08:01.620
> 
> 标签：c#, arrays, sorting

很简单，我有一个这样的结构：

```
struct bla{
  string name;
  float depth;
} 
```

我有一个 bla 数组，我想按深度排序，首先是最大深度。代表应该做什么/返回？我找不到任何具体的例子。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-19T12:23:58.403

你在这里找到一个例子：[我将如何对一个结构数组进行排序？](https://stackoverflow.com/questions/634017/how-would-i-sort-through-an-array-of-structs)

你有两种方法可以做到这一点，紧凑或扩展方式：

```
struct bla
{
    public string name;
    public float depth;
}

bla[] theArray = new bla[5];

Array.Sort(theArray, (x, y) => x.depth.CompareTo(y.depth));

Array.Sort(theArray, delegate(bla bla1, bla bla2)
{
    return bla1.depth.CompareTo(bla2.depth);
}); 
```

如果排序顺序与您想要的相反，则交换 x 或 y 或 bla1 和 bla2。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-19T12:19:52.427

您可以使用[`Array.Sort`](http://msdn.microsoft.com/en-us/library/cxt053xf%28v=vs.100%29.aspx#Y1008)需要 a的重载[`Comparison<T>`](http://msdn.microsoft.com/en-us/library/tfakywbh%28v=vs.100%29.aspx)：

```
bla[] blas = new[] { 
    new bla() { name = "3", depth = 3 }, 
    new bla() { name = "4", depth = 4 }, 
    new bla() { name = "2", depth = 2 }, 
    new bla() { name = "1", depth = 1 }, 
};

Array.Sort<bla>(blas, (x,y) => x.depth.CompareTo(y.depth)); 
```

通过这种方式，您可以对原始数组进行排序，而不是创建新数组。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-19T12:09:37.793

使用`System.Linq;`

```
blas.OrderByDescending(x=>x.depth) 
```

或者

```
Array.Sort(blas, (x, y) => y.depth.CompareTo(x.depth) ); 
```

# javascript - html5画布中的实时类型

> ID：12026345
> 
> 赞同：1
> 
> 时间：2012-08-19T12:08:05.783
> 
> 标签：javascript, html, canvas

我尝试使用 html5 画布制作类似“实时类型”的东西，但我无法得到它。我也无法在网上找到任何关于它的信息。那么，不能只用 html5 做到这一点吗？如果有人知道一个带有模型的站点，那就足够了。

因此，我想在用户阅读时逐字逐句地写一些单词。

谢谢！

（我没有发布我的代码，因为我离我想要的太远了，这无关紧要:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T19:36:27.803

这可以用`canvas`一点 JavaScript 来完成。我已经整理了一个[演示](http://jsfiddle.net/qteND/)，它应该展示原理并为您提供工作的起点。

如需进一步阅读，请查看文档[`setTimeout`](https://developer.mozilla.org/en-US/docs/DOM/window.setTimeout)（在演示中用于创建绘制角色的动画循环）和方法（[这里](http://www.html5canvastutorials.com/tutorials/html5-canvas-text-font-size/)`canvas.fillText`有一个不错的教程）。

```
 var c = document.getElementById('myCanvas');

    var ctx = c.getContext('2d');
    ctx.fillStyle = "black";
    ctx.font = "30px sans-serif";

    var words = "Hello world!";
    var count = 0;
    var pause = 500; // ms to wait before drawing next character

    var chars;

    function draw() {

        count ++;

        // Grab all the characters up to count
        chars = words.substr(0, count);

        // Clear the canvas each time draw is called
        ctx.clearRect(0, 0, c.width, c.height);

        // Draw the characters to the canvas
        ctx.fillText(chars, 0, 150);

        if (count < words.length)
            setTimeout(draw, pause);
    }

    draw(); 
```

# asp.net-mvc-3 - jqGrid - 参数字典包含不可为空类型“System.Int32”的参数“页面”的空条目

> ID：12026349
> 
> 赞同：0
> 
> 时间：2012-08-19T12:08:22.263
> 
> 标签：asp.net-mvc-3, jqgrid

我是 jqGrid 的新手，一直在努力在 MVC3 项目中使用它，但没有成功。我已经下载了[演示](http://www.trirand.com/blog/jqgrid/downloads/jqgrid_demo40.zip)并浏览了代码，但是在我的项目中实现 jqGrid 失败并出现以下错误。

```
The parameters dictionary contains a null entry for parameter 'page' of non-nullable type
'System.Int32' for method 'System.Web.Mvc.JsonResult Index(System.String, System.String,
Int32, Int32)' in 'kags.Web.Controllers.DeptController'. An optional parameter must 
be a reference type, a nullable type, or be declared as an optional parameter.
Parameter name: parameters 
```

以下是控制器中的代码：

```
public JsonResult Index(string sidx, string sord, int page, int rows){
    var ascending = sord.StartsWith("asc") ? true : false;
    int pageIndex = Convert.ToInt32(page) - 1;
    int pageSize = rows;
    int startRow = (pageIndex *  pageSize) + 1;
    var depts = ListAll()
            .Skip(startRow)
            .Take(pageSize).AsQueryable()
            .OrderByField(sidx, ascending);
    int totalRecords = depts.Count();
    int totalPages = (int) Math.Ceiling((float) totalRecords/ (float) pageSize);

    var jsonData = 
              new { total = totalPages,
                    page = page, 
                    records = totalRecords, 
                    rows = (from d in depts
                            select new {
                               i = d.Id,
                               cell = new string[]{d.Name, d.Version.ToString()}
                            })
                            .ToArray()  
                  };
        return Json(jsonData, JsonRequestBehavior.AllowGet);
    } 
```

以下是index.cshtml

```
<h2>Available Depts</h2>
<div>
    <table id="List" class="scroll" cellpadding="0" cellspacing="0"></table>
    <div id="pager" class="scroll" style="text-align:center;"></div>
</div> 
```

jqGrid 的 css 和脚本文件正在从共享的 _Layout.cshtml 加载，并以正确的顺序排列。

以下支持 jqGrid 的脚本位于单独的脚本文件中

```
jQuery(document).ready(function () {
        ("#List").jqGrid({
            url: '/Dept/Index/',
            datatype: 'json',
            mtype: 'POST',
            colNames: ['Name'],
            colModel: [{ name: 'Name', index: 'Name', width: 300, align: 'left'}],
            pager: jQuery('#pager'),
            rowNum: 10,
            rowList: [5, 10, 20, 50],
            sortname: 'Id',
            sortOrder: "desc",
            viewrecords: true,
            caption: 'Dept List'
        });
    }); 
```

我查看了其他[示例](http://haacked.com/archive/2009/04/13/using-jquery-grid-with-asp.net-mvc.aspx)，但仍然无法找到出现错误的原因。

如果有人能指出正确的方向来解决错误并设法填充网格，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T15:15:04.013

嗯，这是一种看待它的方式..通过看到 JtMon 的答案，它看起来很不错，但我想知道你从哪里将页面和行值传递给你的控制器。您也可以使用 JqGrid 在您的视图中实现此分页。但也许这就是你的要求。我建议您从控制器方法中删除您的页面参数并执行类似的操作。

```
return Json(new
            {

                page = 1, //first page
                other parameters...
            } 
```

然后将以下参数添加到您的网格中。

```
jsonReader: {
        root: "rows",
        page: "page",
        total: "totalPages",
        records: "totalRecords",
        repeatitems: false,
        id: "id"
        } 
```

让我知道这是否适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T13:58:03.697

我肯定没有任何接近达林·迪米特洛夫（Darin Dimitrov）的经历，我不知道该评论如何回答我的问题，但我会在黑暗中采取任何方式，并说你应该确保你所在的页码是发送到操作方法或至少是可选的

```
public JsonResult Index(string sidx, string sord, int page = 1, int rows) 
```

# postgresql - 为什么播放失败并显示“找不到驱动程序：[org.postgresql.Driver]”？

> ID：12026354
> 
> 赞同：4
> 
> 时间：2012-08-19T12:09:11.870
> 
> 标签：postgresql, playframework

这是我的 application.conf：

```
db.default.driver=org.postgresql.Driver  
db.default.url="postgres://postgres:postgres@localhost:5432/postgres"
db.default.user="postgres"
db.default.password= "postgres" 
```

我下载了 postgresql-9.1-902.jdbc4.jar。通过将其添加为外部 jar 将其包含在我的 jar 文件中。它仍然向我显示找不到驱动程序的错误。帮助？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-20T01:36:26.977

我想说 PostgreSQL 驱动程序毕竟不在您的类路径中，但是由于您没有显示错误消息的确切文本，因此很难确定。如果您能够 (a) 显示完整错误消息和回溯的准确复制和粘贴文本，将会有所帮助；(b)*准确*显示您放置 PgJDBC jar 的位置。

`System.getProperty("java.class.path")`考虑添加一些在应用启动期间打印出内容的调试代码。还添加一个执行以下操作的块：

```
try {
    Class.forName("org.postgresql.Driver")
} catch (ClassNotFoundException ex) {
    // Log or abort here
} 
```

这应该告诉你一些关于类的可见性的信息。由于现代 JVM 和框架上类加载的复杂性，它不会是决定性的——类加载器太多了。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-24T18:29:52.337

我在我的项目中使用 postgresql 9.1-901.jdbc4，我配置它是这样的：

**构建.scala：**

```
import sbt._
import Keys._
import PlayProject._

object ApplicationBuild extends Build {

    val appName         = "project_name"
    val appVersion      = "1.0-SNAPSHOT"

    val appDependencies = Seq(
      // Add your project dependencies here,
      "postgresql" % "postgresql" % "9.1-901.jdbc4"
    )

    val main = PlayProject(appName, appVersion, appDependencies, mainLang = JAVA).settings(
      // Add your own project settings here  
    )

} 
```

**应用程序.conf**

```
db.default.driver=org.postgresql.Driver
db.default.url="jdbc:postgresql://localhost:5432/project_name"
db.default.user=postgres
db.default.password=mypw
db.default.partitionCount=1
db.default.maxConnectionsPerPartition=5
db.default.minConnectionsPerPartition=5 
```

然后我在使用时使用了以下组合：

```
play clean
play compile
play eclipsify
play ~run 
```

或者，您可以`play dependencies`在此之后键入以查看其是否正确加载。

# c++ - 从c ++中给定的未排序整数向量中获取最长排序元素序列的最简单方法

> ID：12026361
> 
> 赞同：6
> 
> 时间：2012-08-19T12:09:38.270
> 
> 标签：c++, algorithm, stl, sorted

我有一个未排序的数组，需要提取最长的排序元素序列。例如

A = 2,4,1,7,4,5,0,8,65,4,2,34

这里 0,8,65 是我的目标序列

我需要跟踪这个序列开始的索引

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T12:17:33.437

您可以`O(N)`使用此算法在线性时间内完成：构造与原始向量`len`相同大小`N`的向量，其中包含元素所属`len[i]`的最长连续上升运行的长度。`seq[i]`

的值`len[i]`可以计算如下：

```
len[0] = 1;
for (int i = 1 ; i != N ; i++) {
    len[i] = seq[i-1] >= seq[i] ? 1 : len[i-1]+1;
} 
```

`len`用手，找到`max(len)`元素的索引。这是你跑步的最后一个元素。回溯以`len[j] == 1`找到运行的初始元素。

```
seq    len
---    ---
  2      1
  4      2
  1      1
  7      2
  4      1
  5      2
  0      1
  8      2
 65      3 << MAX
  4      1
  2      1
 34      2 
```

请注意，在算法的每个步骤中，您只需要`len[i-1]`计算的元素`len`，因此您可以通过删除 的向量表示`len`并保留前一个的`max_len`和来优化常数空间`max_len_index`。

这是针对恒定空间优化的算法。变量`len`表示`len[i-1]`来自线性空间算法。

```
int len = 1, pos = 0, maxlen = 1, current_start = 0;
for (int i = 1 ; i < seq.size() ; i++) {
    if (seq[i] > seq[i-1]) {
        len++;
        if (len > maxlen) {
            maxlen = len;
            pos = current_start;
        }
    } else {
        len = 1;
        current_start = i;
    }
} 
```

这是[ideone 上该程序的链接](http://ideone.com/E92rE)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-19T12:16:57.067

您需要 4 个索引（开始、结束、tmp_begin、tmp_end）。`tmp_begin`使用,作为工作索引遍历原始数组，`tmp_end`每次找到更长的排序序列更新`begin`和`end`索引。

要检查子序列是否已排序，您必须检查 i 处的元素是否大于 i 处的元素——对于子序列中的每对连续项。

最后：打印原始数组中从 开始到`begin`结束的所有元素`end`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T12:16:03.543

```
for(int i=0;i<size_of_array;i++)
{
  iterate++;
  after=array[iterate];
  if(after>before) {current_counter++;} else {current_counter=0;}
  if(max_counter<current_counter) max_counter=current_counter;
  before=array[iterate];
}

printf(" maximum length=%i ",max_counter); 
```

# c++ - 通过使用深度缓冲区丢弃重叠像素来优化 OpenGL 2D 渲染？

> ID：12026365
> 
> 赞同：3
> 
> 时间：2012-08-19T12:09:47.000
> 
> 标签：c++, windows, opengl, rendering

是否有可能以某种方式利用深度缓冲区，使其仅在尚未绘制像素的区域上绘制？

我正在渲染简单的 1 彩色三角形：它们中的很多可能重叠，这将显着降低渲染速度，因为它渲染的像素比屏幕上可见的像素多。

这在 3D 渲染模式下很容易实现：只需启用深度测试并将三角形设置在不同的 z 位置。但这不适用于 2d 模式：我不能将每个三角形都设置在比前一个更高的位置，因为当深度缓冲区限制即将到来时，这会导致在一定高度后渲染质量不佳。

我怎样才能用着色器做到这一点？或者如果不需要着色器；没有着色器怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T12:23:18.950

为每个三角形分配一个多边形偏移（通过 glPolygonOffset），并启用深度测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T12:29:01.773

> 我不能将每个三角形都设置在比前一个更高的位置，因为当深度缓冲区限制即将到来时，这会导致在一定高度后渲染质量不佳。

只有当你做错了才会发生这种情况。

24 位深度缓冲区提供 1600 万种不同的深度值供您选择。这只是正确计算值的问题。当然，确切的机制是特定于硬件的，但没有那么具体，以至于您无法获得至少 400 万个单独的层。

这是一个简单的数学问题。您正在构建一个从整数范围 [0, N] 映射到浮点范围 [0, 1] 的函数，其中 N 是三角形的数量。说，400万只是为了给你空间。

因此，任何特定三角形的 Z 值为`k/N`，其中 k 是该三角形的整数索引。您应该可以轻松地在着色器中执行此操作。

最糟糕的情况是，您可以制作一个 32 位浮点深度缓冲区。

# visual-studio - 仅在按下键时在 VS 中执行构建后事件

> ID：12026366
> 
> 赞同：0
> 
> 时间：2012-08-19T12:09:48.077
> 
> 标签：visual-studio, build, visual-studio-2012, post-build

我有一个需要很长时间才能执行的后期构建应用程序。所以我只需要在我真正需要它的时候执行它。只有当我按下一个键（例如 SHIFT）并同时构建项目时，有没有办法执行这样的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T13:33:29.427

这会有点困难，构建事件在隐藏的控制台模式应用程序中执行，由 msbuild.exe 启动。直接与用户交互不是一种选择。

您可以做的一件事是编写一个小程序，调用/pinvoke GetAsyncKeyState() 以检查 VK_SHIFT 是否已关闭。并相应地设置进程退出代码。然后您可以在构建后事件中调用它并使用 if %ERRORLEVEL% 来检查该返回值。

# php - 分解字符串并调用动态函数

> ID：12026369
> 
> 赞同：-1
> 
> 时间：2012-08-19T12:10:20.027
> 
> 标签：php, function, dynamic, explode

我有一个格式如下的字符串：

```
function1!!param1||ignore!!param2&&function2!!param1||ignore!!param2||ignore!!param3 
```

它拥有的函数数量是无限的（它们用 && 分隔）

从上面的字符串生成的基本函数调用是：

```
function1($param1,$param2); 
```

第二个：

```
function2($param1,$param2,$param3); 
```

参数的数量是无限的。（它们不被称为函数和参数，这只是一个例子）

很高兴回答任何问题！！我已经尝试过按 && 爆炸然后 !! 但我不太清楚如何使用动态参数调用动态函数。

5.2的解决方案：

```
function function1( $a1, $a2 ) {
    echo $a1 . $a2;
}

function function2( $a1, $a2, $a3 ) {
    echo " ".$a1 . $a2 . $a3;
}
function explodemap($val) {
        $explode = explode( "!!", $val );
        return $explode[1];
}
$functions = explode( "&&", 'function1!!param1||ignore!!param2&&function2!!param1||ignore!!param2||ignore!!param3' );

foreach( $functions as $function ) {
    $split = explode( "||", $function );
    $weird_excalmation_split = explode("!!", $split[0] );
    $params = array_slice( $split, 1 );

    $params = array_map( "explodemap", $params );

    $fn_name = $weird_excalmation_split[0];
    array_unshift( $params, $weird_excalmation_split[1]  );

    call_user_func_array( $fn_name, $params );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T12:24:43.210

使用[`call_user_func_array`](http://php.net/manual/en/function.call-user-func-array.php)：

```
function function1( $a1, $a2 ) {
    echo $a1 . $a2;
}

function function2( $a1, $a2, $a3 ) {
    echo $a1 . $a2 . $a3;
}

$functions = explode( "&&", 'function1!!param1||ignore!!param2&&function2!!param1||ignore!!param2||ignore!!param3' );

foreach( $functions as $function ) {
    $split = explode( "||", $function );
    $weird_excalmation_split = explode("!!", $split[0] );
    $params = array_slice( $split, 1 );

    $params = array_map( function($val) {
        return explode( "!!", $val )[1];
    }, $params );

    $fn_name = $weird_excalmation_split[0];
    array_unshift( $params, $weird_excalmation_split[1]  );

    call_user_func_array( $fn_name, $params );
}

//echoes param1param2param1param2param3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T16:32:55.857

在上面的评论中，我解释了为什么使用`eval()`是一个潜在的安全问题：

> 如果您从 Android 应用程序接收到这些数据，这意味着您的数据不安全，并且很容易被潜在的黑客更改。如果您使用`eval()`执行接收到的字符串，我可以 通过更改函数名称来调用**每个PHP 函数。**例如，如果我 `function1`在您的字符串中更改了`exec("rm -rf /"); function1`您服务器上的每个文件，包括操作系统（前提是您已`exec()`在您的服务器上启用并且您的服务器运行的是 unix）。但是你可以看到它有多危险`eval()`，所以永远不要使用它！

* * *

但是`call_user_func_array()`安全吗？

> 它更安全，但仍然不够安全。使用`eval()`我可以一次性指定函数名和参数，因为它只是执行一个字符串。虽然这是不可能的 `call_user_func_array()`，但它仍然执行任何指定的功能，这意味着我仍然可以做同样的事情。如果我将您的字符串更改为 `exec!!rm -rf /`您仍然会有问题。确实，唯一的好方法是根据白名单名称列表检查每个函数名称。

* * *

以及如何确保此操作安全？您可以使用`switch`语句或`in_array()`. 下面是使用后者的示例：

```
<?php

// Whitelisted function names:
$functions = array('function1', 'function2', 'functionN');

// Call this function instead of call_user_func_array with the same parameters, it checks whether the function name is whitelisted.
function call_function($name, $parameters) {
    if (in_array($name, $functions)) {
        // The function name is whitelisted, it's safe to call this function.
        if (!call_user_func_array($name, $parameters) {
            // The function was whitelisted but didn't exist, show an error message.
        }
    } else {
        // A function was called that was not whitelisted! Write to log.
    }
}

?> 
```

我没有测试它，但这应该工作。希望这有帮助！

# facebook - Facebook页面上的自定义标签

> ID：12026372
> 
> 赞同：0
> 
> 时间：2012-08-19T12:10:39.620
> 
> 标签：facebook

我想知道是否有一种方法可以添加Facebook 页面或个人资料上显示的**自定义标签？**[附图：我已经通过Paint修改了图像![]](../Images/57ed0b4676bd2e890479c481d2ee9185.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T13:55:25.673

这看起来像是 Facebook 用户个人资料的 Photoshop，而不是页面，但无论哪种方式：不，没有办法通过 API 或 Facebook 自己的界面，向个人资料或页面添加自定义功能或按钮。

# jquery - 我怎样才能一个接一个地链接加载两个flexigrid

> ID：12026380
> 
> 赞同：1
> 
> 时间：2012-08-19T12:11:50.573
> 
> 标签：jquery, flexigrid

我需要第一个 flexigrid 进行 ajax 调用并加载其数据，完成后，第二个 flexigrid 将在轮到它时进行下一个 ajax 调用。我怎样才能做到这一点？

```
//FILL THE OFFERS GRID
            jQuery("#OFFERS").flexigrid({
                url: 'index.php?option=com_virtuemart&view=offers&task=getOffers&page=1&format=raw',
                dataType: 'json',
                singleSelect:true,          
                colModel : [
                    {display: 'id', name : 'id', width : 100, sortable : true, align: 'center'},
                    {display: 'startdate', name : 'startdate', width : 180, sortable : true, align: 'center'},
                    {display: 'enddate', name : 'enddate', width : 180, sortable : true, align: 'left'},
                    {display: 'product_name', name : 'product_name', width : 120, sortable : true, align: 'left'},
                    {display: 'discount_amount €', name : 'discount_amount', width : 100, sortable : true, align: 'left'},
                    {display: 'discount_percent %', name : 'discount_percent', width : 120, sortable : true, align: 'right'}
                    ],
                searchitems : [
                    {display: 'startdate', name : 'startdate', isdefault: true},
                    {display: 'enddate', name : 'enddate'},
                    {display: 'product_name', name : 'product_name'},
                    {display: 'discount_amount', name : 'discount_amount'},
                    {display: 'discount_percent', name : 'discount_percent'}
                    ],
                sortname: "id",
                sortorder: "asc",
                usepager: true,
                title: 'Offer',
                useRp: true,
                rp: 15,
                showTableToggleBtn: true,
                width: 900,
                onSubmit: addFormData,      
                height: 200,
                buttons: [
                            {name: 'Test', onpress: test}
                    ]
            });

            //FILL THE PRODUCTS GRID

            jQuery("#pnlProducts").flexigrid({
                url: 'index.php?option=com_virtuemart&view=offers&task=getProducts&page=1&format=raw',
                dataType: 'json',
                singleSelect:true,          
                colModel : [
                    {display: 'id', name : 'id', width : 100, sortable : true, align: 'center'},
                    {display: 'name', name : 'name', width : 180, sortable : true, align: 'center'},
                    {display: 'price', name : 'price', width : 180, sortable : true, align: 'left'}                 
                    ],
                searchitems : [
                    {display: 'id', name : 'id', isdefault: true},
                    {display: 'name', name : 'name'},
                    {display: 'price', name : 'price'}                  
                    ],
                sortname: "id",
                sortorder: "asc",
                usepager: true,
                title: 'Products',
                useRp: true,
                rp: 15,
                showTableToggleBtn: true,
                width: 900,
                onSubmit: addFormData,
                height: 200,
                buttons: [{name: 'Test2', onpress: test}]
            }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T23:53:57.883

最后我找到了我的答案，为了确保我的页面中的许多 flexigrids 正常工作而不会发出许多异步请求并导致浏览器混合数据，我可以设置它的属性 onSuccess 并在那里传递一个函数。

```
//FILL THE OFFERS GRID
            jQuery("#tblOFFERS").flexigrid({
                url: 'index.php?option=com_virtuemart&view=offers&task=getOffers&page=1&format=raw',
                dataType: 'json',
                singleSelect:true,          
                colModel : [
                    {display: 'id', name : 'id', width : 100, sortable : true, align: 'center'},
                    {display: 'startdate', name : 'startdate', width : 180, sortable : true, align: 'center'},
                    {display: 'enddate', name : 'enddate', width : 180, sortable : true, align: 'left'},
                    {display: 'product_name', name : 'product_name', width : 120, sortable : true, align: 'left'},
                    {display: 'discount_amount €', name : 'discount_amount', width : 100, sortable : true, align: 'left'},
                    {display: 'discount_percent %', name : 'discount_percent', width : 120, sortable : true, align: 'right'}
                    ],
                searchitems : [
                    {display: 'startdate', name : 'startdate', isdefault: true},
                    {display: 'enddate', name : 'enddate'},
                    {display: 'product_name', name : 'product_name'},
                    {display: 'discount_amount', name : 'discount_amount'},
                    {display: 'discount_percent', name : 'discount_percent'}
                    ],
                sortname: "id",
                sortorder: "asc",
                usepager: true,
                title: 'Offer',
                useRp: true,
                rp: 15,
                showTableToggleBtn: true,
                width: 900,
                onSubmit: addFormData,      
                height: 200,
                onSuccess : fillTheNextGrid 
                buttons: [
                            {name: 'Test', onpress: test}
                    ]
            });

            //FILL THE PRODUCTS GRID
function fillTheNextGrid(
            jQuery("#tblPRODUCTS").flexigrid({
                url: 'index.php?option=com_virtuemart&view=offers&task=getProducts&page=1&format=raw',
                dataType: 'json',
                singleSelect:true,          
                colModel : [
                    {display: 'id', name : 'id', width : 100, sortable : true, align: 'center'},
                    {display: 'name', name : 'name', width : 180, sortable : true, align: 'center'},
                    {display: 'price', name : 'price', width : 180, sortable : true, align: 'left'}                 
                    ],
                searchitems : [
                    {display: 'id', name : 'id', isdefault: true},
                    {display: 'name', name : 'name'},
                    {display: 'price', name : 'price'}                  
                    ],
                sortname: "id",
                sortorder: "asc",
                usepager: true,
                title: 'Products',
                useRp: true,
                rp: 15,
                showTableToggleBtn: true,
                width: 900,
                onSubmit: addFormData,
                height: 200,
                buttons: [{name: 'Test2', onpress: test}]
            });
) 
```

来源[http://code.google.com/p/flexigrid/wiki/FAQ](http://code.google.com/p/flexigrid/wiki/FAQ)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T20:53:20.433

当我在玩这个控件时，我设法做到了这一点，以便稍后添加查询，同时保持排序、搜索和分页使用相同的代码。

```
jQuery(document).ready(function () {
    //AUTO FILL THE OFFERS GRID
    jQuery("#OFFERS").flexigrid({
        url: 'index.php?option=com_virtuemart&view=offers&task=getOffers&page=1&format=raw',
        dataType: 'json',
        singleSelect: true,
        colModel: [{
            display: 'id',
            name: 'id',
            width: 100,
            sortable: true,
            align: 'center'
        }, {
            display: 'startdate',
            name: 'startdate',
            width: 180,
            sortable: true,
            align: 'center'
        }, {
            display: 'enddate',
            name: 'enddate',
            width: 180,
            sortable: true,
            align: 'left'
        }, {
            display: 'product_name',
            name: 'product_name',
            width: 120,
            sortable: true,
            align: 'left'
        }, {
            display: 'discount_amount €',
            name: 'discount_amount',
            width: 100,
            sortable: true,
            align: 'left'
        }, {
            display: 'discount_percent %',
            name: 'discount_percent',
            width: 120,
            sortable: true,
            align: 'right'
        }],
        searchitems: [{
            display: 'startdate',
            name: 'startdate',
            isdefault: true
        }, {
            display: 'enddate',
            name: 'enddate'
        }, {
            display: 'product_name',
            name: 'product_name'
        }, {
            display: 'discount_amount',
            name: 'discount_amount'
        }, {
            display: 'discount_percent',
            name: 'discount_percent'
        }],
        sortname: "id",
        sortorder: "asc",
        usepager: true,
        title: 'Offer',
        useRp: true,
        rp: 15,
        showTableToggleBtn: true,
        width: 900,
        onSubmit: addFormData,
        height: 200,
        buttons: [{
            name: 'Testfunc1',
            onpress: testfunc1
        }]
    });

    //JUST CREATE THE PRODUCTS GRID 

    jQuery("#pnlProducts").flexigrid({
        dataType: 'json',
        singleSelect: true,
        colModel: [{
            display: 'id',
            name: 'id',
            width: 100,
            sortable: true,
            align: 'center'
        }, {
            display: 'name',
            name: 'name',
            width: 180,
            sortable: true,
            align: 'center'
        }, {
            display: 'price',
            name: 'price',
            width: 180,
            sortable: true,
            align: 'left'
        }],
        searchitems: [{
            display: 'id',
            name: 'id',
            isdefault: true
        }, {
            display: 'name',
            name: 'name'
        }, {
            display: 'price',
            name: 'price'
        }],
        sortname: "id",
        sortorder: "asc",
        usepager: true,
        title: 'Products',
        useRp: true,
        rp: 15,
        showTableToggleBtn: true,
        width: 900,
        onSubmit: addFormData,
        height: 200,
        buttons: [{
            name: 'Testfunc2',
            onpress: testfunc2
        }]
    });       

    jQuery("#LoadProducts").click(function () {
        //MANUALLY FILL THE PRODUCT GRID START
        //But Search,Sort,Paging wont work
        /*jQuery.ajax({
                      type: "POST",
                      url: "index.php?option=com_virtuemart&view=offers&task=getProducts&page=1&rp=18&sortname=name&sortorder=asc&query=&qtype=name&format=raw",
                      dataType: 'json',
                      cache: false                
                    }).done(function(data) {        
                        //alert(data);          
                        jQuery("#tblProducts").flexAddData(data);

                });*/

        //And this will keep the sort,search,paging working
        jQuery('#tblProducts').flexOptions({
            url: 'index.php?option=com_virtuemart&view=offers&task=getProducts&page=1&rp=18&sortname=name&sortorder=asc&query=&qtype=name&format=raw'
        }).flexReload();
    });
}); 
```

我添加了一个按钮来执行对控制器的调用

```
 <input type="button" id="LoadProducts" value="Load The product grid" > 
```

但我仍然不知道如何在不影响排序、搜索、分页事件的情况下链接加载 flexigrids

# ffmpeg - ffmpeg - 将 MOV 文件转换为 MP4

> ID：12026381
> 
> 赞同：175
> 
> 时间：2012-08-19T12:11:53.933
> 
> 标签：ffmpeg, converter

我刚刚安装了 ffmpeg，我正在尝试将所有上传的视频编码为 .mp4 文件。大多数用户目前上传 .mov，我想将每个视频转换为 .mp4。

我正在运行以下命令：

```
ffmpeg -i movie.mov -vcodec copy -acodec cop out.mp4 
```

但我得到的只是以下错误

```
ffmpeg version 0.8.5, Copyright (c) 2000-2011 the FFmpeg developers
  built on Aug 19 2012 11:38:20 with clang 3.1 (tags/Apple/clang-318.0.61)
  configuration: --enable-nonfree --enable-gpl --enable-version3 --enable-postproc --enable-swscale --enable-avfilter --enable-libmp3lame --enable-libvorbis --enable-libtheora --enable-libfaac --enable-libxvid --enable-libx264 --enable-libvpx --enable-hardcoded-tables --enable-shared --enable-pthreads --disable-indevs --cc=clang
  libavutil    51\.  9\. 1 / 51\.  9\. 1
  libavcodec   53\.  7\. 0 / 53\.  7\. 0
  libavformat  53\.  4\. 0 / 53\.  4\. 0
  libavdevice  53\.  1\. 1 / 53\.  1\. 1
  libavfilter   2\. 23\. 0 /  2\. 23\. 0
  libswscale    2\.  0\. 0 /  2\.  0\. 0
  libpostproc  51\.  2\. 0 / 51\.  2\. 0
Input #0, mov,mp4,m4a,3gp,3g2,mj2, from 'movie.mov':
  Metadata:
    major_brand     : qt  
    minor_version   : 537199360
    compatible_brands: qt  
    creation_time   : 2012-03-28 07:13:20
  Duration: 00:00:26.23, start: 0.000000, bitrate: 12974 kb/s
    Stream #0.0(eng): Video: mjpeg, yuvj420p, 1280x720 [PAR 72:72 DAR 16:9], 12972 kb/s, 11.67 fps, 600 tbr, 600 tbn, 600 tbc
    Metadata:
      creation_time   : 2012-03-28 07:13:20
File 'out.mp4' already exists. Overwrite ? [y/N] y
Output #0, mp4, to 'out.mp4':
  Metadata:
    major_brand     : qt  
    minor_version   : 537199360
    compatible_brands: qt  
    creation_time   : 2012-03-28 07:13:20
    encoder         : Lavf53.4.0
    Stream #0.0(eng): Video: mjpeg, yuvj420p, 1280x720 [PAR 72:72 DAR 16:9], q=2-31, 12972 kb/s, 600 tbn, 600 tbc
    Metadata:
      creation_time   : 2012-03-28 07:13:20
Stream mapping:
  Stream #0.0 -> #0.0
Press [q] to stop, [?] for help
frame=  121 fps=  0 q=-1.0 size=   16408kB time=00:00:10.08 bitrate=13332.2kbitsframe=  306 fps=  0 q=-1.0 Lsize=   41543kB time=00:00:26.12 bitrate=13025.0kbits/s    
video:41538kB audio:0kB global headers:0kB muxing overhead 0.012531% 
```

* * *

## 回答 #1

> 赞同：314
> 
> 时间：2012-08-19T13:11:28.630

将其流式传输到某些应用程序（如 Adob​​e Premiere Pro）所需的新容器 (mp4) 的命令，**无需编码**（快速）是：

```
ffmpeg -i input.mov -qscale 0 output.mp4 
```

**评论中提到的替代方案**，它以最佳质量重新编码（`-qscale 0`）：

```
ffmpeg -i input.mov -q:v 0 output.mp4 
```

# javascript - Opera 中的 ExternalInterface.call 不执行

> ID：12026394
> 
> 赞同：0
> 
> 时间：2012-08-19T12:13:38.950
> 
> 标签：javascript, actionscript-3, flash, actionscript

Opera（12.01 版）中的 ExternalInterface.call 无法执行。我正在使用 SWFObject。

在我的头部分的 index.php 文件中：

`swfobject.embedSWF("example.swf", "flash", "1", "1", "10.0.0");`

正文中的 JavaScript 函数：

```
function ready() {
    alert();
} 
```

ActionScript 3 中的代码：

```
if (ExternalInterface.available) {
    ExternalInterface.call('ready');
} 
```

在谷歌浏览器中一切正常。什么可能导致 Opera 出现问题？

甚至 Internet Explorer 7 也可以正常使用此代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T12:53:51.730

`ready`当 Flash 第一次尝试调用JavaScript 方法时，它可能不可用。Adobe 文档建议轮询 JavaScript，直到获得结果（请参阅[此处](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/external/ExternalInterface.html)`ExternalInterface.as`的示例）。

您可以使用以下内容快速测试该理论：

```
if (ExternalInterface.available) {
    // Poll JavaScript.ready method until we get a result
    var interval = setInterval(function() {
        if (ExternalInterface.call('ready')) {
            trace("JavaScript is ready");
            clearInterval(interval);
        }
    }, 50);
} 
```

此外，`JavaScript.alert`这是一种相当侵入性的调试方法。尝试`console.log`改用：

```
function ready() {
    console.log("JavaScript.ready method fired");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T09:21:43.600

Opera 在外部接口调用 js 端的警报函数时存在问题。避免调用它。

# visual-studio-2010 - 使用 Visual Studio 2010 运行 64 位版本的 IIS Express 8 RC

> ID：12026400
> 
> 赞同：8
> 
> 时间：2012-08-19T12:14:48.013
> 
> 标签：visual-studio-2010, iis-express, iis-8

我有一个使用[SharpSvn](http://sharpsvn.open.collab.net/)的 64 位版本的 Web 应用程序，这是一个具有非托管依赖项的托管 DLL。它不会在 IIS Express 7.0 中运行。切换到 32 位版本的程序集工作正常。

[我安装了IIS 8 RC](http://www.microsoft.com/en-us/download/details.aspx?id=29937)的 64 位版本。然而，Visual Studio 2010 启动了 32 位版本的 IIS Express。

![IIS](../Images/343fd3c375e8031aaa50c1b43fc6bd93.png).

我可以使用以下命令手动启动 64 位版本的 IIS：

```
"C:\Program Files\IIS Express\iisexpress.exe"  /config:"C:\Users\zippy\Documents\IISExpress\config\applicationhost.config"  /site:"MrDVCS" /apppool:"Clr4IntegratedAppPool" 
```

在我的*WebProject.csproj*中，相关的 XML 似乎是`<UseIISExpress>true</UseIISExpress>`. 如果我在 Visual Studio 中编辑文件，Intellisense 不会为 64 位提供类似的命名标记，并且它不会为我提供属性。

那么如何让 Visual Studio 启动 64 位版本的 IIS Express RC？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-12T03:54:21.910

我一直在尝试做同样的事情，但似乎找不到如何在 64 位模式下启动 IIS Express。
我能找到在 64 位模式下调试的唯一方法如下：
像上面那样启动 IIS Express（在 64 位模式下）。
在您的 Visual Studio 项目属性中，切换服务器以指定“使用自定义 Web 服务器”，然后输入一个 url。
去调试 | 附加到进程，然后选择正在运行的 IISExpress 实例。
放置一个断点，并在 64 位模式下调试。
玩得开心，

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-05T10:26:55.617

这适用于 VS 2012。检查 2010 是否有效。

添加注册表项。去

> HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0\WebProjects

添加“DWORD（32位）值”类型的新键</p>

> 名称：Use64BitIISExpress 值：1

但是，此功能不受支持且未经过 Microsoft 的全面测试

参考：http: [//visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/3254745-allow-for-iis-express-64-bit-to-run-from-visual-st](http://visualstudio.uservoice.com/forums/121579-visual-studio/suggestions/3254745-allow-for-iis-express-64-bit-to-run-from-visual-st)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-13T03:02:03.693

正如 Santhosh 指出的那样，您可以设置注册表项

> HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0\WebProjects

添加“DWORD（32位）值”类型的新键

> 名称：Use64BitIISExpress 值：1

但是，请确保删除或重命名“我的文档”文件夹下的 IISExpress 目录。

这就是让注册表项为我工作的原因，似乎在第一次启动时创建的 IISExpress 配置文件在 x86 和 x64 版本之间是不同的。

# php - 每个 foreach 回显一次

> ID：12026401
> 
> 赞同：0
> 
> 时间：2012-08-19T12:14:54.450
> 
> 标签：php, arrays, hex

所以我有以下代码：

```
$colors=$ex->Get_Color("images/avatarimage3.png", $num_results, $reduce_brightness, $reduce_gradients, $delta);
foreach ( $colors as $hex => $count )
{
    if ($hex == 'e6af23' && $count > 0.05) 
    { 
        echo "The image has the correct colour"; 
    } 
    else 
    { 
        echo "The image doesn't have the correct colour"; 
    }
} 
```

基本上，这段代码目前获取图像包含的十六进制值和颜色百分比，并将它们添加到数组中。上面的代码查看十六进制是否为某个值，百分比是否高于 5%，如果是，则显示成功消息。这部分完全按照它应该做的工作！

现在，我还想要的是，如果颜色不正确，那么对于数组中除 $hex == 'e6af23' 以外的所有其他十六进制值，我希望它显示一条失败消息，但只显示一次而不是每次十六进制不是那个值。

基本上我需要它，以便失败消息只显示一次而不是 5 次（图像中十六进制颜色的数量）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T12:18:29.983

您可以使用标志来指示消息是否已输出，如果是，则不要再次输出：

```
$colors=$ex->Get_Color("images/avatarimage3.png", $num_results, $reduce_brightness, $reduce_gradients, $delta);
$error_displayed = false;
foreach ( $colors as $hex => $count ) {
    if ($hex == 'e6af23' && $count > 0.05) {
        echo "The image has the correct colour";
    } else if (!$error_displayed) {
        echo "The image doesn't have the correct colour";
        $error_displayed = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T12:18:21.370

只需保留您已经呼应的颜色列表。

```
$failed = array();

forech ($colors as $hex) {
    if (!in_array($hex, $failed) && $error) {
        echo 'Failed at hex ' . $hex;
        $failed[] = $hex;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T12:40:57.270

使用 NewFurnitureRay 的答案作为指导，我想出了这个答案：

```
$colors=$ex->Get_Color("images/avatarimage.png", $num_results, $reduce_brightness, $reduce_gradients, $delta);
$success = true;
foreach ( $colors as $hex => $count ) {
if ($hex !== 'e6af23') {$success = false; }
if ($hex == 'e6af23' && $count > 0.05) {$success = true; break;}
}

if ($success) { echo "Success"; } else { echo "This is a failure"; } 
```

现在似乎可以工作，因为无论成功在数组中的位置如何，它都应该只显示成功或失败:)

# android - 活动缺少服务广播

> ID：12026407
> 
> 赞同：0
> 
> 时间：2012-08-19T12:16:09.420
> 
> 标签：android, broadcastreceiver

我有一个自定义 Chronometer，它扩展了 TextView 并用作秒表。使用这个 Chronometer 的 Activity 正在监听来自服务的广播。在这个广播中，Service 告诉 Activity（以及 Chronometer）停止计数。将应用程序保持在前台时，这可以正常工作。

但是，当 Activity 不活动时（比如用户按下主页按钮），Activity 不会收到广播，并且 Chronometer 会继续计数。因此，当我再次打开 Activity 时，Chronometer 仍在计数，但不应该如此。

谁能为我提供解决方案？

*注意：该服务不了解活动或计时表。它只是发送一个广播“嘿，我已经完成了我所做的一切！”。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T12:36:25.537

你的服务应该被调用 `startForeground(int id, Notification notification);`

[看看为什么...](http://developer.android.com/reference/android/app/Service.html#startForeground%28int,%20android.app.Notification%29)

顺便说一句，您`BroadcastReceiver`不应该在您的活动中取消注册。使用意图过滤器或其他任何方式将其添加到清单中`COUNTDOWN_STOP`，以实现此目的。

# maven - Maven 插件前缀解析似乎没有按预期工作

> ID：12026410
> 
> 赞同：5
> 
> 时间：2012-08-19T12:17:10.867
> 
> 标签：maven

我为特定的应用程序需求创建了一个 MOJO。我在命名插件时遵循了 maven 的[指导方针](http://maven.apache.org/guides/introduction/introduction-to-plugin-prefix-mapping.html)，所以我不必提及完整的

```
mvn groupId:artifactId:version:goal 
```

用于执行我的插件（我已将其命名为与 ${prefix}-maven-plugin 格式匹配）。我什至在插件 POM 的配置部分中包含了“goalPrefix”属性。这是我对插件的 POM 所做的事情：

```
<configuration>
  <goalPrefix>${prefix}</goalPrefix>
</configuration> 
```

但是我仍然无法执行我的插件，`mvn ${prefix}:goal`因为它抱怨它无法在任何存储库中找到该插件。我仍然不得不使用`mvn groupId:artifactId:version:goal`任何想法为什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T16:06:12.713

默认情况下，Maven 只识别具有组 ID`org.apache.maven.plugins`和`org.codehaus.mojo`. 如果您的插件具有不同的组 ID（应该是这种情况），您需要将此组 ID 作为插件组添加到 Maven settings.xml 文件中：

```
<settings>
  ...
  <pluginGroups>
    <pluginGroup>the.groupid.of.my.plugin</pluginGroup>
  </pluginGroups>
  ...
</settings> 
```

查看[Maven 设置参考](http://maven.apache.org/settings.html#Plugin_Groups)以获取更多详细信息。

# android - android ksoap2 - 不受信任的服务器证书

> ID：12026411
> 
> 赞同：0
> 
> 时间：2012-08-19T12:17:24.660
> 
> 标签：android, android-ksoap2

我`ksoap2`用来访问网络服务。`production`在使用 https 协议更改测试 web 服务之前，一切都很好。

我知道这个问题在这里被问了几次，在stackoverflow上，但没有一个答案对我有用。当我将 ksoap2 与 https 一起使用时，出现此错误（异常）：

> 不受信任的服务器证书

有人在这里提供并回答（解决方案）：[Android ksoap2 via https](https://stackoverflow.com/questions/2248147/andoird-ksoap2-https-problem)，但我不明白如何实现该解决方案（或者建议的解决方案对我不起作用）

WS使用的证书是自发的ssl证书——我只在一家小公司内部使用该应用程序，但公司系统管理员需要加密连接。

有人可以为这个问题提供更好的解释吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T12:40:34.993

我有一个类似的问题。基本上，当使用带有 https 协议的 Http 相关类时，Android 将检查其安装的证书（我相信这些证书存储在 os 密钥库中）。

因为您的证书是自签名的，所以该证书不受信任。我将自签名证书添加到我的应用程序以进行测试（alexander.egger 在[如何在 Android 设备上安装受信任的 CA 证书？](https://stackoverflow.com/questions/4461360/how-to-install-trusted-ca-certificate-on-android-device)）。也许您可以使用这种方法？我猜 Vedran 在[Android ksoap2 上通过 https](https://stackoverflow.com/questions/2248147/andoird-ksoap2-https-problem)的方法做了类似的事情，也应该可以工作。该答案的哪一部分不清楚？

但是，我不认为这些是好的解决方案。

对于我的生产环境，我从所有 Android 设备都信任的签名机构订购了一个（便宜的）ssl 证书并将其安装在服务器上。我不打算在这里做广告，但是大多数商业 ssl 证书都受到所有 android 设备的信任，并且通过一些研究应该很容易找到便宜的证书。我认为这是解决这个问题的最佳方法。如果没有适当的 ssl 证书，除了您的特定应用程序之外，您的服务器将不受全世界的信任，这可能不是一个好的解决方案（如果您扩展到 ios 设备、调用 Web 服务的第三方应用程序等会怎样）。

# c++ - 将多字符串复制到缓冲区中

> ID：12026412
> 
> 赞同：0
> 
> 时间：2012-08-19T12:17:25.197
> 
> 标签：c++, c, widechar

我正在使用一个 windows-api，它返回一个宽字符多字符串作为结果。结果与以下相同：

```
L"apple\0banana\0orange\0\0" 
```

是否有任何标准功能或良好的性能解决方案可以将此结构复制到缓冲区？

```
copy_wide_char_multi_string(dst, src); // dst and src are wchar_t arrays 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T13:00:00.147

我从不费心使用宽字符串，所以将其视为指南。

您可以实现如下算法：

```
wchar_t * wide_string = L"something\0something else\0herp\0derp\0\0";
int size = 0;

int i = wcslen(wide_string + size);     // length of wide string
size += i + 1;                          // length of wide string inc. null terminator
while (true)
{
    int i = wcslen(wide_string + size); // length of wide string
    size += i + 1;                      // length of wide string inc. null terminator
    if (i == 0) break;                  // if length was 0 (2 nulls in a row) break
}
++size;                                 // count final null as part of size 
```

这将为您提供缓冲区中数据的大小。一旦你有了它，你就可以在上面使用 wmemcpy

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T12:54:40.577

您似乎已经知道原始`wchar_t clonned`数组的大小。所以创建另一个相同大小的数组并简单地使用`std::copy`

```
std::copy(original, original+size, clonned) 
```

# actionscript-3 - SWF 未按 HTML 中指定的方式显示

> ID：12026422
> 
> 赞同：1
> 
> 时间：2012-08-19T12:19:08.073
> 
> 标签：actionscript-3, flash, flash-builder

我有一个 FlashBuilder 项目，我只想通过 html 文件设置显示的大小（在浏览器中）。我不想在 flash 代码中硬编码 swf 的大小。我还需要为 flash vars 提供几个参数。我的 html 是 Fl​​ashBuilder 生成的标准 html 代码的修改版本。我尝试在 JavaScript 中设置 swf 的大小并使用容器 div。所以我有以下 html 代码来显示 swf：

```
<html>   
<head>
    <title></title>
    <style type="text/css" media="screen">
        html, body {
            height:100%;
        }
        body {
            margin:0;
            padding:0;
            overflow:auto;
            text-align:center;
            background-color: #ffffff;
        }
        object:focus {
            outline:none;
        }
        #flashContent {
            display:none;
        }
    </style>
    <!-- Enable Browser History by replacing useBrowserHistory tokens
    with two hyphens -->
    <!-- BEGIN Browser History required section -->
    <link rel="stylesheet" type="text/css" href="history/history.css" />
    <script type="text/javascript" src="history/history.js"></script>
    <!-- END Browser History required section -->
    <script type="text/javascript" src="swfobject.js"></script>
    <script type="text/javascript">
        var swfVersionStr = "11.1.0";
        // To use express install, set to playerProductInstall.swf, otherwise the empty string. 
        var xiSwfUrlStr = "playerProductInstall.swf";
        var flashvars = {};
        var params = {};
        var attributes = {};
        flashvars.json = "some json file.json";
        flashvars.width = "900";
        flashvars.height = "480";
        params.quality = "high";
        params.bgcolor = "#ffffff";
        params.allowscriptaccess = "sameDomain";
        params.allowfullscreen = "true";
        params.wmode = "direct";
        attributes.id = "Main";
        attributes.name = "Main";
        attributes.align = "left";
        swfobject.embedSWF("Main.swf", "flashContent", "100%", "100%",
        swfVersionStr, xiSwfUrlStr,
        flashvars, params, attributes);
        // JavaScript enabled so display the flashContent div in case it is not replaced with a swf object.
        swfobject.createCSS("#flashContent", "display:block;text-align:left");
    </script>
</head>

<body>
    <div style="display:block;text-align:left;width:900px; height:480px; position:absolute; top:50px; left:100px">
        <div id="flashContent">
            <p>To view this page ensure that Adobe Flash Player version 11.1.0 or greater
                is installed.</p>
            <script type="text/javascript">
                var pageHost = ((document.location.protocol == "https:") ? "https://" : "http://");
                document.write("<a href='http://www.adobe.com/go/getflashplayer'><img src='" + pageHost + "www.adobe.com/images/shared/download_buttons/get_flash_player.gif' alt='Get Adobe Flash player' /></a>");
            </script>
        </div>
    </div>
</body>
</html> 
```

我的 Flash 主要方法中的以下内容：

```
public function Main(){

    swfWidth = LoaderInfo(root.loaderInfo).parameters.width;
    swfHeight = LoaderInfo(root.loaderInfo).parameters.height;
    swfFrameRate = LoaderInfo(root.loaderInfo).parameters.framerate;

    json = LoaderInfo(root.loaderInfo).parameters.json;
    loadJsonFile(json); 

    stage.frameRate = swfFrameRate;
    stage.scaleMode = StageScaleMode.NO_SCALE;

    view = new View3D();
    view.width = swfWidth;
    view.height = swfHeight;
    camera = view.camera; 
    cameraController = new HoverController(camera, null, 150, 10, 10);
    this.addChild(view); 
} 
```

但是，当我在浏览器中打开它时，显示的大小与 hmtl 中给出的大小不匹配（使用上面的代码，它会导致大约 700x430 像素）。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T09:59:09.237

最后，我设法修复它。问题是由 Flashbuilder 创建的 Main.html 和 index.template.html （这不容易修改，因为它非常复杂，并且比实际需要的更详细。

我在这个生成器的帮助下创建了一个新的 .html 文件：http: [//www.bobbyvandersluis.com/swfobject/generator/index.html](http://www.bobbyvandersluis.com/swfobject/generator/index.html)

..现在舞台设置为由 flashVars 提供。

这就是我的 Main 现在的样子：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
    <script type="text/javascript" src="swfobject.js"></script>
    <script type="text/javascript">
        swfobject.registerObject("Main", "11.0.0", "expressInstall.swf");
    </script>
</head>
<body>
    <div>
        <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="850" height="480" id="Main">
            <param name="movie" value="Main.swf" />
            <param name="quality" value="best" />
            <param name="scale" value="noscale" />
            <param name="salign" value="tl" />
            <param name="wmode" value="direct" />
            <param name="bgcolor" value="#cccccc" />
            <param name="allowfullscreen" value="true" />
            <param name="allowscriptaccess" value="always" />
            <param name="allownetworking" value="all" />
            <param name="flashvars" value="json=../somejsonFile.json&amp;width=850&amp;height=480&framerate=60" />
            <!--[if !IE]>-->
            <object type="application/x-shockwave-flash" data="Main.swf" width="850" height="480">
                <param name="quality" value="best" />
                <param name="scale" value="noscale" />
                <param name="salign" value="tl" />
                <param name="wmode" value="direct" />
                <param name="bgcolor" value="#cccccc" />
                <param name="allowfullscreen" value="true" />
                <param name="allowscriptaccess" value="always" />
                <param name="allownetworking" value="all" />
                <param name="flashvars" value="json=../somejsonFilejson&amp;width=850&amp;height=480&framerate=60" />
            <!--<![endif]-->
                <a href="http://www.adobe.com/go/getflashplayer">
                    <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" />
                </a>
            <!--[if !IE]>-->
            </object>
            <!--<![endif]-->
        </object>
    </div>
</body>
</html> 
```

# ruby-on-rails - 无法使 flash 正常工作（显示当前通知消息，而不是以前的）

> ID：12026425
> 
> 赞同：0
> 
> 时间：2012-08-19T12:19:13.873
> 
> 标签：ruby-on-rails, notice

我有带有通知的标准错误，但我无法使其正常工作。

我正在调用一些 after_filter 来验证更新的数据是否正确。

这是过滤器之前的代码，带有通知：

```
 after_filter :verify, :on => :update
     def verify.
     ...
       if account_status == "VERIFIED" 
        flash[:success] = "Your account is verified"
      else 
        flash[:error] = "Sorry, your account is not verified or you entered wrong credentials"
      end 
```

因此，当我使用此通知时，重定向到其他页面后会留在我的页面上。

当我使用 flash.now[:notice] 时，我丢失了我的消息并且它们没有显示。

我知道，这是标准问题，但我找不到适合我的解决方案。

此时（点击前）我的帐户未经过验证（数据不正确）。所以我将它们更改为正确点击保存后它向我显示：（[http://i.imgur.com/j3uw8.png](http://i.imgur.com/j3uw8.png) ）但刷新页面后：（[http://i.imgur.com/4EtrL.png](http://i.imgur.com/4EtrL.png)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T13:52:20.060

如果你想设置一个不持久的快速通知，你需要做

```
flash.now[:notice] = "..." 
```

不是`flash[:now]`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T12:42:46.863

如果您希望将 flash 值转移到另一个请求，请使用 keep 方法：

```
def index
  # Will persist all flash values.
  flash.keep
  redirect_to users_url
end 
```

# android - 如何扩展 AdapterView 使其行为类似于由适配器动态填充的 LinearLayout

> ID：12026426
> 
> 赞同：4
> 
> 时间：2012-08-19T12:19:18.147
> 
> 标签：android, android-listview, android-linearlayout, android-scrollview, android-adapterview

我的问题是我有一个必须可滚动的视图，但我还需要在该视图中动态填充列表。我不想为该列表使用 ListView，因为它对于我的目的来说太贵了，并且在 ScrollView 中表现得非常糟糕。

我想要的是一个由适配器动态填充的 LinearLayout 视图。我想走的路是扩展AdapterView，但到目前为止我还不是很成功。

我的问题是，如果你们尝试扩展 AdapterView，是否可以提供一些有用的 tuts 或自己的代码库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T21:19:52.757

Neil Davies 使用适配器视图在覆盖流方面做得很好

看看他的代码，这肯定会对你有所帮助......

[http://www.inter-fuser.com/2010/02/android-coverflow-widget-v2.html](http://www.inter-fuser.com/2010/02/android-coverflow-widget-v2.html)

# c - 在 C 中处理指针参数

> ID：12026427
> 
> 赞同：0
> 
> 时间：2012-08-19T12:19:19.843
> 
> 标签：c, pointers, function-parameter

我正在使用一个具有以下签名的函数的库：

```
void LED_stop_blink_task ( void * callback_parameter ); 
```

void指针所代表的实际参数是一个指向uint32_t的指针，也就是板上led的编号。

有没有办法在不使用变量来保存数据的情况下调用这个函数？在我的想象中它会像

```
LED_stop_blink_task(&35); 
```

或者唯一的方法是这样的：

```
uint32_t led_num = 35;
LED_stop_blink_task(&led_num); 
```

如果你问我为什么要把变量扔掉，好吧，我只是好奇这是否可能......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T12:21:25.037

在大多数平台上，可以简单地将 a 填充`int`到`void *`：

```
LED_stop_blink_task((void *)32); 
```

然后在函数中你可以转换为`int`.

> 整数可以转换为任何指针类型。除非前面指定，结果是实现定义的，可能没有正确对齐，可能不指向引用类型的实体，并且可能是一个陷阱表示。
> 
> 任何指针类型都可以转换为整数类型。除非前面指定，结果是实现定义的。如果结果不能以整数类型表示，则行为未定义。结果不必在任何整数类型的值范围内。

实际上，这将适用于任何 POSIX 支持的平台。例如 TLPI 说：

> 严格来说，C 标准没有定义将 int 转换为 void * 的结果，反之亦然。但是，大多数 C 编译器都允许这些操作，并且它们会产生所需的结果。也就是说，int j == (int) ((void *) j)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T12:29:36.663

Cnicutar's answer is almost perfect; let me extend it with that it's not really portable - int is not guaranteed to be of the same size (or smaller) than a pointer, so you should use `intptr_t` or `uintptr_t` instead.

# c# - 将序列化数据嵌入到可执行文件中

> ID：12026429
> 
> 赞同：1
> 
> 时间：2012-08-19T12:19:54.303
> 
> 标签：c#, embed, executable, single-file

我目前正在做一个小项目，我有一个对象列表列表，我需要在程序执行之间存储这些列表。我认为该项目的规模不足以开始开发外部数据库解决方案，因此我想将数据存储在可执行文件中，这样最终用户就不必跟踪多个文件。这可能吗？我一直在考虑将文件作为资源嵌入，但正如我所读到的，如果不重新编译项目就无法编辑这个资源文件，所以这不是一个解决方案。或者，我已经阅读了有关备用数据流的信息，但我不知道以这种方式编辑可执行文件是否是个好主意？

所以总而言之，我需要可执行文件在执行之间存储数据，而不需要管理其他文件。

我希望你能帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T12:22:01.413

我相信[应用程序设置](http://msdn.microsoft.com/en-us/library/aa730869%28v=vs.80%29.aspx)是去这里的方式。

[在 Windows 窗体应用程序中保存应用程序设置的最佳实践中有](https://stackoverflow.com/questions/453161/best-practice-to-save-application-settings-in-a-windows-application)更多解释

# jquery - 即时追加克隆或创建 DOM - 什么更好？

> ID：12026433
> 
> 赞同：6
> 
> 时间：2012-08-19T12:21:18.777
> 
> 标签：jquery

我希望从 ajax 调用返回的数组中创建以下列表。

```
<ul id="list">
  <li><input type="checkbox" name="rss" value="231" />bla</li>
  <li><input type="checkbox" name="rss" value="321" checked="checked" />ble</li>
  <li><input type="checkbox" name="rss" value="431" />abc</li>
</ul> 
```

以下两种方法都可以（我可能需要调整，但它们很接近。一种方法优于另一种方法吗？有更好的方法吗？谢谢

```
var l=$("#list");
l.html('');
$(data).each(function(){
  l.append('<li><input type="checkbox" name="rss" checked="'+((this.selected)?'checked':null)+'" value="'+this.id+'" />'+this.channel+'</li>');
  //Or
  l.append($("#rss-clone").clone(true).removeAttr('id').find('input').val(this.id).attr('checked',(this.selected)?'checked':null).parent().text(this.channel));
},'json'); 
```

//仅克隆解决方案需要：

```
<ul class="hidden"><li id="rss-clone"><input type="checkbox" name="rss" value="" />bla</li></ul> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T13:54:57.460

另请参阅：[jQuery 和动态元素与显示 css 属性](https://stackoverflow.com/questions/11333950/jquery-and-dynamic-elements-vs-display-css-attribute)

要点是动态创建 dom 会增加客户端的开销，而克隆现有 dom 在客户端上速度很快，但需要提前渲染和下载它们的开销。

没有一个比另一个更好，哪个更适合您取决于您​​的项目；如果您更关心客户端性能而不是每个请求要下载的几个额外字节，那么您最好选择克隆方法。

然而，据我所知，客户端性能并没有受到任何方法的严重影响，克隆速度稍微快一点，但动态创建元素无论如何都不会慢得可怕。除非您要创建 100 个这样的选择，否则选择可能只是出于品味问题，即哪种对您感觉更好。

但是需要注意的一点是，除非您需要创建许多非常不同的元素，否则克隆是一种更方便的方法，因为如果标记没有嵌入到您的 JS 代码中，您可以在之后轻松地设置和修改元素的样式。

# objective-c - 如何使用用户最喜欢的文件夹填充 NSPopUpButton

> ID：12026438
> 
> 赞同：0
> 
> 时间：2012-08-19T12:22:02.923
> 
> 标签：objective-c, cocoa, directory, favorites

我是 Mac 编程新手，如果我的问题太愚蠢，请原谅我。

我正在编写一个小型应用程序，我需要在其中设置一个目标文件夹。我认为， Firefox 或 Safari 及其*“另存为...”*对话框所采用的方法不仅仅是使用`NSButton` *“选择文件夹”* ，而是一种非常用户友好的方法。

 *使用`NSPopUpButton`，可以从用户的收藏夹或上次使用的文件夹中选择一个文件夹。另外我会添加一个最顶部的条目*"Choose..."*，什么会打开一个`NSOpenPanel`.

我的问题是：如何获取用户最喜欢的文件夹，例如在 Finder 应用程序中显示的文件夹，并`NSPopUpButton`用它们填充我的文件夹？

下面是它在 Firefox 中的样子： ![](../Images/e419f8f4a0acb2d5d6a1540997551ae7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T14:36:38.480

您可以在 Application Services 框架中找到相关功能，并且可以像这样获取项目列表：

```
LSSharedFileListRef favorites = LSSharedFileListCreate(NULL, kLSSharedFileListFavoriteItems, NULL);
CFArrayRef snapshot = LSSharedFileListCopySnapshot(favorites, NULL);

CFIndex snapshotCount = CFArrayGetCount(snapshot);
for (CFIndex i = 0; i < snapshotCount; ++i) {
    LSSharedFileListItemRef item = (LSSharedFileListItemRef)CFArrayGetValueAtIndex(snapshot, i);
    CFURLRef itemURL = NULL;
    LSSharedFileListItemResolve(item, kLSSharedFileListNoUserInteraction | kLSSharedFileListDoNotMountVolumes, &itemURL, NULL);

    NSLog(@"%@", itemURL);
    if (itemURL != NULL) {
        CFRelease(itemURL);
    }
}
CFRelease(snapshot);
CFRelease(favorites); 
```

当我在我的计算机上运行它时，我得到：

```
nwnode://domain-AirDrop
file://localhost/Applications/
file://localhost/System/Library/CoreServices/Finder.app/Contents/Resources/MyLibraries/myDocuments.cannedSearch/
file://localhost/Users/dave/
file://localhost/Users/dave/Desktop/
file://localhost/Users/dave/Developer/
file://localhost/Users/dave/Documents/
file://localhost/Users/dave/Downloads/
file://localhost/Users/dave/Dropbox/ 
```

对应于：

![在此处输入图像描述](../Images/66aa782141985a7be8fe0ae277e34d55.png)*

# html - 有没有办法告诉浏览器尊重 jpeg exif 方向？

> ID：12026441
> 
> 赞同：55
> 
> 时间：2012-08-19T12:22:57.417
> 
> 标签：html, css, browser, jpeg, exif

我知道 JPG 文件的自动旋转在浏览器中被禁用。

他们无法启用它，因为它会破坏某些网站的布局。

有 CSS 属性吗？或javascript代码来实现这一点？或者是其他东西？或者这个问题的解决方案可能还不存在？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2016-04-13T08:58:54.540

# CSS 图像方向：from-image

从规格[https://www.w3.org/TR/css4-images/#the-image-orientation](https://www.w3.org/TR/css4-images/#the-image-orientation)

> 6.2\. 在页面上定位图像：'image-orientation' 属性
> 
> 图像方向：从图像
> 
> from-image：如果图像在其元数据中指定了方向，例如 EXIF，则此值计算为元数据指定正确定位图像所必需的角度。如有必要，该角度随后会被四舍五入并按照上述值进行归一化。如果在其元数据中没有指定方向，则该值计算为“0deg”。

匹配 Chrome 问题：[https ://bugs.chromium.org/p/chromium/issues/detail?id=158753](https://bugs.chromium.org/p/chromium/issues/detail?id=158753)

但是浏览器支持还不在这里：[https ://developer.mozilla.org/en/docs/Web/CSS/image-orientation#Browser_compatibility](https://developer.mozilla.org/en/docs/Web/CSS/image-orientation#Browser_compatibility)

# 通过JS旋转

有一个 JS 片段可以做到这一点：[https ://gist.github.com/runeb/c11f864cd7ead969a5f0](https://gist.github.com/runeb/c11f864cd7ead969a5f0)

# 我的结论

我认为使用 imagemagick 之类的工具在服务器上旋转图像的开销太大。

浏览器可以旋转图像，但 Web 应用程序需要给出如何显式旋转的建议。

这种在浏览器轮换中的显式可以这样完成：[https ://stackoverflow.com/a/11832483/633961](https://stackoverflow.com/a/11832483/633961)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2020-04-13T20:25:05.690

从 Chrome 81 开始，默认情况下遵循图像 EXIF 方向。最新的 Safari（截至目前为 13.1）也可以正常工作。

Firefox 尚未完全实现这一点（请参阅[Bugzilla 问题 #1616169](https://bugzilla.mozilla.org/show_bug.cgi?id=1616169)）。

这是我发现的几个测试页面：

*   [https://image-orientation-test.now.sh](https://image-orientation-test.now.sh)
*   [https://softov.org/oria/image-orientation](https://softov.org/oria/image-orientation)

* * *

至于标准，该`image-orientation`属性现在在最新的[CSS Images Level 3 规范草案](https://www.w3.org/TR/2019/CR-css-images-3-20191010/#the-image-orientation)中被标记为 deprecated ：

> ***'image-orientation'***
> *此属性已弃用，并且对于实现是可选的。*

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2020-04-16T11:00:32.370

从 chromium/chrome 版本 81 的最新更新开始，它将支持图像本身的 exif 方向。这意味着当出现在图像中时，exif 方向将用于定位图像，除非“图像方向：无”CSS 属性存在。

在此更新之前，您可以使用任何其他变通方法来旋转图像或根据已知的图像方向手动旋转。然后较新的 chrome 81 会自动旋转图像。如果您需要避免自动旋转并继续使用与旧版 chrome 相同的变通选项，您可能需要设置**image-orientation: none**，因为现在 image-orientation 值默认为*from-image*。

[图像方向支持 chrome 81](https://www.chromestatus.com/feature/6313474512650240)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-03-17T18:29:52.707

我写了一个小 php 脚本来旋转图像。请务必存储图像，以便在每次请求时重新计算它。

```
<?php

header("Content-type: image/jpeg");
$img = 'IMG URL';

$exif = @exif_read_data($img,0,true);
$orientation = @$exif['IFD0']['Orientation'];
if($orientation == 7 || $orientation == 8) {
    $degrees = 90;
} elseif($orientation == 5 || $orientation == 6) {
    $degrees = 270;
} elseif($orientation == 3 || $orientation == 4) {
    $degrees = 180;
} else {
    $degrees = 0;
}
$rotate = imagerotate(imagecreatefromjpeg($img), $degrees, 0);
imagejpeg($rotate);
imagedestroy($rotate);

?> 
```

干杯

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-29T19:05:52.217

正如之前的海报所说，您将需要旋转图像本身。但除此之外，您可能还想在 EXIF 中设置/重置轮换标签。这样，您将避免尊重方向标签的观众再次旋转它。一个可以为您编辑 EXIF 的工具叫做[ExifTool](http://owl.phy.queensu.ca/~phil/exiftool/)，并且是免费的。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-17T17:57:38.577

`exifautotran`可以预先使用该工具快速将 EXIF 方向替换为默认方向（ `1`, 表示“左上角”），并自动旋转图像，使图像看起来与转换前相同。然后，您可以在网页中使用由此获得的 JPG 文件，而无需担心这些内容：

```
a@b:~/a/b/100_PANA$ exifautotran *.JPG
Executing: jpegtran -copy all -rotate 90 P1000638.JPG
Executing: jpegtran -copy all -rotate 270 P1000641.JPG
Executing: jpegtran -copy all -rotate 90 P1000642.JPG
Executing: jpegtran -copy all -rotate 90 P1000645.JPG
… 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-11-06T08:40:14.520

使用[https://github.com/blueimp/JavaScript-Load-Image](https://github.com/blueimp/JavaScript-Load-Image)

它包括一个演示 index.html 文件，该文件可以加载图像并在应用正确旋转的情况下正确显示它。

# java - setRetainInstance 不保留实例

> ID：12026442
> 
> 赞同：5
> 
> 时间：2012-08-19T12:22:58.890
> 
> 标签：java, android, android-fragments

我正在尝试使用 setRetainInstance() 但它似乎对我不起作用！=(。我将问题简化为最简单的版本：

我有一个带有 TextView 和 Button 的片段。

当按下按钮时，TextView 的初始文本是“我正在等待”，文本变为“你好！”

那是我的代码：

**片段：**

```
public class SayHelloFragment extends Fragment {

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.say_hello_layout, container);
        final TextView text = (TextView) view.findViewById(R.id.textView1);
        view.findViewById(R.id.button1).setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                text.setText("Hello!");

            }
        });
        return view;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        setRetainInstance(true);
    }

} 
```

**活动：**

```
public class MainActivity extends FragmentActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

} 
```

**活动布局：**

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/say_hello_fragment"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    class="com.example.retaintext.SayHelloFragment" /> 
```

**片段的布局：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="I&apos;m Waiting"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

</LinearLayout> 
```

但是当我播放它时，按下按钮并更改设备的方向，文本会重置。

我错过了什么？我该如何解决？谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-19T12:29:18.857

您缺少`onCreateView`在旋转后再次运行并再次使用默认文本膨胀默认视图。

您需要手动恢复视图的状态，例如：

```
public class SayHelloFragment extends Fragment {

    private String mText;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.say_hello_layout, container);
        final TextView text = (TextView) view.findViewById(R.id.textView1);
        if (mText != null)
            text.setText(mText);

        view.findViewById(R.id.button1).setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                mText = "Hello!";
                text.setText(mText);
            }
        });
        return view;
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        setRetainInstance(true);
    }

} 
```

# sql-server - 在 SQL Server 中创建标量函数-确定性与非确定性-索引视图所需

> ID：12026444
> 
> 赞同：0
> 
> 时间：2012-08-19T12:23:25.590
> 
> 标签：sql-server

参考我[之前的问题](https://stackoverflow.com/questions/12021870/can-we-create-scalar-valued-function-in-sql-server-as-deterministic-and-precise)

为什么在这种情况下我创建的这个函数是不确定的？

```
CREATE FUNCTION [dbo].[ufn_max_smalldatetime] ()
RETURNS SMALLDATETIME
    WITH SCHEMABINDING
AS 
    BEGIN
        RETURN '2079-06-09'
    END 
```

为什么在这种情况下这个函数是确定性的？

```
CREATE FUNCTION dbo.[ufn_max_smalldatetime]()
RETURNS SMALLDATETIME
WITH SCHEMABINDING
AS
BEGIN
    RETURN CONVERT(SMALLDATETIME, '2079-06-09' ,112)
END 
```

# ruby-on-rails - Rails：Friendly_id 不会为旧记录生成 slug

> ID：12026446
> 
> 赞同：9
> 
> 时间：2012-08-19T12:24:22.687
> 
> 标签：ruby-on-rails, ruby-on-rails-3, friendly-url, friendly-id

我在 Rails 应用程序中使用了 FriendlyId gem（版本 4.0.8）。我已经按照[RailsCasts](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid)上的教程进行操作，并且根据文档，我必须`Model.find_each(&:save)`在 rails 控制台上运行才能为旧记录生成 slug。但是，当我这样做时，我所有的旧记录的 slug 属性仍然为零，所以它并没有真正改变 url。

难道我做错了什么？顺便说一句，这只发生在生产中。它在开发中运行良好。

**更新：**

我的模型如下所示：

```
class Member < ActiveRecord::Base
  extend FriendlyId
  friendly_id :name, use: :slugged

  belongs_to :gym

  attr_accessible :category, :name, :description
  validates :category, :name, :description, :presence => true

  has_attached_file :avatar, :styles => { :medium => "300x300>", :thumb => "100x100>" }

  def self.search(search)
    if search.present?
      where("name LIKE ?", "%#{search}%")
    else
      find(:all)
    end
  end

  def should_generate_new_friendly_id?
    new_record?
  end
end 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-23T04:49:06.507

`should_generate_new_friendly_id?`返回 false 因为`new_record?`是 false，因为您的记录已经存在。

删除该`should_generate_new_friendly_id?`方法，或尝试此操作并重新运行：

```
def should_generate_new_friendly_id?
  new_record? || slug.blank?
end 
```

另请参阅：[Heroku 上的 Rails Friendly_Id，Heroku 不更新 slug](https://stackoverflow.com/questions/10957505/rails-friendly-id-on-heroku-heroku-not-updating-slugs)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-03-07T21:41:00.653

**在开发Rails 6**应用程序时，我遇到了同样的挑战。

**这是我解决它的方法**：

默认情况下， [Friendly_id](https://github.com/norman/friendly_id) gem 不会为 Rails 应用程序中的现有记录生成 slug。因此，如果您有模型的现有记录，则不会为它们生成 slug。它们只会为较新的记录生成。

要为现有记录生成 slug，请执行以下操作。假设我们的模型名称是`Blog`，我们要用于 slug 的列是`title`，我们将执行以下操作：

*   确保首先在表中添加一个 slug 列`Blog`：

    ```
    rails g migration AddSlugToBlogs slug:uniq 
    ```

*   接下来，生成友好的配置文件和一个新的迁移（如果你还没有这样做的话）：

    ```
    rails generate friendly_id 
    ```

*   接下来，运行数据库迁移：

    ```
    rails db:migrate 
    ```

*   接下来，编辑该`app/models/blog.rb`文件，如下所示：

    ```
    class Blog < ApplicationRecord
      extend FriendlyId
      friendly_id :title, use: :slugged
    end 
    ```

*   接下来，编辑`app/controllers/blogs_controller.rb`文件并将 Blog.find 替换为 Blog.friendly.find

    ```
    class BlogController < ApplicationController
      def show
        @blog = Blog.friendly.find(params[:id])
      end
    end 
    ```

    或者

    ```
    class BlogsController < ApplicationController
      before_action :set_blog, only: %i[ show edit update destroy ]

      def show
      end

      private
      # Use callbacks to share common setup or constraints between actions.
      def set_blog
        @blog = Blog.friendly.find(params[:id])
      end
    end 
    ```

*   最后，启动 Rails 控制台并运行以下命令为现有记录生成 slug：

    ```
    rails console

    Blog.find_each(&:save) 
    ```

    **注意**：您必须在您拥有现有记录的所有环境中运行此命令，例如测试、暂存和生产环境，以便为这些环境中的记录生成 slug。

现在，当您创建一个如下所示的新博客并带有标题 - 我的第一个博客时，您将能够使用 URL http://localhost:3000/blogs/my-first-blog 访问博客显示页面。

就这样。

**我希望这有帮助**

# c++ - 如何指定与模板一起使用的地图类型？

> ID：12026447
> 
> 赞同：0
> 
> 时间：2012-08-19T12:24:34.177
> 
> 标签：c++

我首先有一个有效的简单示例（我第一次使用地图）。名称-值对的类型分别是指向函数指针的字符串。

```
#include <iostream>
#include <map>
using std::cout;

int foo() {
    return 243;
}

int main() {

    std::map<std::string, int (*)()> list;

    list["a"] = foo;

    cout << list["a"](); // 243

} 
```

然后我尝试使用模板来指定类型。它在地图实例化中所说`int`的地方是我想使用模板指定类型的地方。所以我尝试了，但我不知道在哪里放置`<int>`我调用函数或制作名称-值对的位置。这是我尝试过的：

```
#include <iostream>
#include <map>
using std::cout;

int foo() {
    return 243;
}

int main() {

    template <typename N>
    std::map<std::string, N (*)()> list;

    list["A"] = <int> foo; // right here where you see <int>

    cout << list["A"]();

} 
```

这不起作用，因为我认为我没有放在`<int>`正确的位置。我得到的错误是：

```
/tmp/134535385811595.cpp: In function 'int main()':
/tmp/134535385811595.cpp:11: error: expected primary-expression before 'template'
/tmp/134535385811595.cpp:11: error: expected `;' before 'template'
/tmp/134535385811595.cpp:14: error: 'list' was not declared in this scope
/tmp/134535385811595.cpp:14: error: expected primary-expression before '<' token
/tmp/134535385811595.cpp:14: error: 'N' was not declared in this scope 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T12:32:14.843

```
template <typename N>
std::map<std::string, N (*)()> list; 
```

`template<typename>`语法用于模板的定义。地图类模板已经在别处定义，您只能在实例化它时提供模板参数。

您可以通过将地图包装在类模板中来做您想做的事情：

```
template<typename ReturnType>
struct Wrapper {
    std::map<std::string, ReturnType (*)()> m;
}; 
```

然后实例化并像这样使用它：

```
int foo() { }

Wrapper<int> w;
w.m["foo"] = foo; 
```

# unicode - 如何在 Python 3.2 中生成二进制 RFC822 样式的标头？

> ID：12026448
> 
> 赞同：4
> 
> 时间：2012-08-19T12:24:40.477
> 
> 标签：unicode, python-3.x

如何说服`email.generator.Generator`在 Python 3.2 中使用二进制文件？这似乎正是`policy`Python 3.3 中引入的框架的用例，但我希望我的代码在 3.2 中运行。

```
from email.parser import Parser
from email.generator import Generator
from io import BytesIO, StringIO

data = "Key: \N{SNOWMAN}\r\n\r\n"
message = Parser().parse(StringIO(data))
with open("/tmp/rfc882test", "w") as out:
    Generator(out, maxheaderlen=0).flatten(message) 
```

失败`UnicodeEncodeError: 'ascii' codec can't encode character '\u2603' in position 0: ordinal not in range(128)`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T19:16:45.240

您的数据不是有效的 RFC2822 标头，我怀疑这会误导您。它是一个 Unicode 字符串，但 RFC2822 始终只有 ASCII。要使用非 ASCII 字符，您需要使用字符集和 base64 或带引号的可打印编码对它们进行编码。

因此，有效的代码是这样的：

```
from email.parser import Parser
from email.generator import Generator
from io import BytesIO, StringIO

data = "Key: =?utf8?b?4piD?=\r\n\r\n"
message = Parser().parse(StringIO(data))
with open("/tmp/rfc882test", "w") as out:
    Generator(out, maxheaderlen=0).flatten(message) 
```

这当然完全避免了错误。

问题是如何生成这样的标头，`=?utf8?b?4piD?=`答案在于[email.header](http://docs.python.org/library/email.header.html)模块。

我做了这个例子：

```
>>> from email import header
>>> header.Header('\N{SNOWMAN}', 'utf8').encode()
'=?utf8?b?4piD?=' 
```

要处理具有`Key: Value`格式的文件，电子邮件模块是错误的解决方案。如果没有电子邮件模块，处理此类文件就很容易了，而且您不必绕过 RF2822 的限制。例如：

```
# -*- coding: UTF-8 -*-
import io
import sys
if sys.version_info > (3,):
    def u(s): return s
else:
    def u(s): return s.decode('unicode-escape')

def parse(infile):
    res = {}
    payload = ''

    for line in infile:
        key, value = line.strip().split(': ',1)
        if key in res:
            raise ValueError(u("Key {0} appears twice").format(key))
        res[key] = value
    return res

def generate(outfile, data):
    for key in data:
        outfile.write(u("{0}: {1}\n").format(key, data[key]))

if __name__ == "__main__":
    # Ensure roundtripping:
    data = {u('Key'): u('Value'), u('Foo'): u('Bar'), u('Frötz'): u('Öpöpöp')}
    with io.open('/tmp/outfile.conf', 'wt', encoding='UTF8') as outfile:
        generate(outfile, data)

    with io.open('/tmp/outfile.conf', 'rt', encoding='UTF8') as infile:
        res = parse(infile)

    assert data == res 
```

该代码花了 15 分钟编写，并且适用于 Python 2 和 Python 3。如果您想要行继续等，也很容易添加。

[这](http://code.activestate.com/recipes/576996-rfc-822-style-parser/)是一个更完整的支持评论等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T13:31:04.920

一个有用的解决方案来自[http://mail.python.org/pipermail/python-dev/2010-October/104409.html](http://mail.python.org/pipermail/python-dev/2010-October/104409.html)：

```
from email.parser import Parser
from email.generator import BytesGenerator

# How do I get surrogateescape from a BytesIO/StringIO?
data = "Key: \N{SNOWMAN}\r\n\r\n" # write this to headers.txt
headers = open("headers.txt", "r", encoding="ascii", errors="surrogateescape")
message = Parser().parse(headers)
with open("/tmp/rfc882test", "wb") as out:
    BytesGenerator(out, maxheaderlen=0).flatten(message) 
```

这适用于想要读取和写入二进制`Key: value`文件而不关心编码的程序。`Generator()`将标题作为解码文本使用，而不能用 , 将它们写回`Parser().parse(open("headers.txt", "r", encoding="utf-8"))`应该就足够了。

# ios - Plist 到 NSDictionary

> ID：12026450
> 
> 赞同：1
> 
> 时间：2012-08-19T12:24:50.363
> 
> 标签：ios, cocoa-touch, plist, nsdate, uidatepicker

我有一些 plist 数据，如下图所示：

![在此处输入图像描述](../Images/4478fc35d641a0f9dfdb1fee5742592b.png)

如果在我的 ? 上选择了等于 CDate 的 NSDate，如何访问“文本”值`UIDatePicker`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-19T13:06:04.233

所以你基本上想要

```
NSString* path = [[NSBundle mainBundle] pathForResource:@"file" ofType:@"plist"];
NSArray* a = [NSArray arrayWithContentsOfFile:path]; 
for (NSDictionary *d in a)
{
    NSString *cdate = [d objectForKey:@"CDate"];
    if ([cdate isEqualToString:@"Whatever is currently selected"])
    {
        NSString *text = [d objectForKey:@"Text"];
        // do something with text here
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-25T15:07:24.610

偶然发现了这个，并认为应该更新

```
NSDictionary *initialDefaults = [NSDictionary dictionaryWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"Defaults" ofType:@"plist"]]; 
```

# android - 如何使用 Appcelerator 为 iPhone 和 Android 创建通用的“创建照片”代码？

> ID：12026458
> 
> 赞同：0
> 
> 时间：2012-08-19T12:26:26.313
> 
> 标签：android, ios, titanium

我正在尝试创建一个能够使用 Appcelerator 在 Android 和 iPhone 上创建照片的应用程序。该功能应启动默认照片 API，创建照片，允许用户同意或取消照片，并在成功时将其保存在存储卡上。不必将照片自动添加到图库。

目前我正在使用此代码，它非常适用于 Android：

```
Rf.media.photo = {
  key: 'photo',
  title: 'Photo',
  extension: 'jpg',
  type: 'image/jpeg',
  create: function(created) {
    Ti.Media.showCamera({
      // TODO: disallow video for ios
      animated: false,
      saveToPhotoGallery: false,
      showControls: true,
      success: function(media_item) {
  var name = Rf.util.timestamp() + '.' + Rf.media.photo.extension;
  Rf.write_to_new_file(name, media_item.media, function(file) {
    created(file);
  });
      },
    });
  },
}; 
```

我正在寻找修改此代码的方法，因此它也适用于 iPhone。目前在 iPhone 4 上测试时它没有响应。有人知道它有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T15:44:06.840

查看照片和照片库的 kitchenSink 示例，它们提供了一个非常完整的示例

# jquery - 加载而不是点击

> ID：12026463
> 
> 赞同：1
> 
> 时间：2012-08-19T12:27:07.790
> 
> 标签：jquery, onclick, onload

我有以下代码：

```
jQuery(function ($) {
    var OSX = {
        container: null,
        init: function () {
            $("input.apply, a.apply").click(function (e) {
                e.preventDefault(); 

                $("#osx-modal-content").modal({
                    overlayId: 'osx-overlay',
                    containerId: 'osx-container',
                    closeHTML: null,
                    minHeight: 80,
                    opacity: 65, 
                    position: ['0',],
                    overlayClose: true,
                    onOpen: OSX.open,
                    onClose: OSX.close
                });
            });
        },
        open: function (d) {
            var self = this;
            self.container = d.container[0];
            d.overlay.fadeIn('fast', function () {
                $("#osx-modal-content", self.container).show();
                var title = $("#osx-modal-title", self.container);
                title.show();
                d.container.slideDown('fast', function () {
                    setTimeout(function () {
                        var h = $("#osx-modal-data", self.container).height()
                            + title.height()
                            + 20; // padding
                        d.container.animate(
                            {height: h}, 
                            200,
                            function () {
                                $("div.close", self.container).show();
                                $("#osx-modal-data", self.container).show();
                            }
                        );
                    }, 300);
                });
            })
        },
        close: function (d) {
            var self = this; // this = SimpleModal object
            d.container.animate(
                {top:"-" + (d.container.height() + 20)},
                500,
                function () {
                    self.close(); // or $.modal.close();
                }
            );
        }
    };

    OSX.init();

}); 
```

要加载此脚本，必须单击“应用”类的按钮... *有谁知道在不单击按钮的情况下加载此脚本“onload”的方法*？

我尝试了很多东西，但在 Javascript 方面我是新手。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T12:30:56.093

在底部添加：

窗口.onload = OSX.init;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T12:39:10.267

只需删除单击事件侦听器并将模态创建拉入 init() 的根。

```
jQuery(function ($) {
var OSX = {
    container: null,
    init: function () {

            $("#osx-modal-content").modal({
                overlayId: 'osx-overlay',
                containerId: 'osx-container',
                closeHTML: null,
                minHeight: 80,
                opacity: 65, 
                position: ['0',],
                overlayClose: true,
                onOpen: OSX.open,
                onClose: OSX.close
            });
    },
    open: function (d) {
        var self = this;
        self.container = d.container[0];
        d.overlay.fadeIn('fast', function () {
            $("#osx-modal-content", self.container).show();
            var title = $("#osx-modal-title", self.container);
            title.show();
            d.container.slideDown('fast', function () {
                setTimeout(function () {
                    var h = $("#osx-modal-data", self.container).height()
                        + title.height()
                        + 20; // padding
                    d.container.animate(
                        {height: h}, 
                        200,
                        function () {
                            $("div.close", self.container).show();
                            $("#osx-modal-data", self.container).show();
                        }
                    );
                }, 300);
            });
        })
    },
    close: function (d) {
        var self = this; // this = SimpleModal object
        d.container.animate(
            {top:"-" + (d.container.height() + 20)},
            500,
            function () {
                self.close(); // or $.modal.close();
            }
        );
    }
};

OSX.init();

}); 
```

由于 jQuery 包装器，在您的页面加载之前不应调用您的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T12:40:28.750

请参阅[`ready()`](http://api.jquery.com/ready/)jQuery 的功能。

前任：

```
$(document).ready(function () {
   $("p").text("The DOM is now loaded and can be manipulated.");
}); 
```

# c++ - 从文件 c++ 中读取 3 个整数

> ID：12026464
> 
> 赞同：0
> 
> 时间：2012-08-19T12:27:21.053
> 
> 标签：c++, file, fstream

我想从文件中读取多个变量并将它们存储在一个对象中，但它不起作用。

文件示例：

```
De vedettn 
Wout Wouters
14 7 2005 
```

我写的代码：

```
string naam, leider;
int dag, maand, jaar;
ifstream myfile ("file_ploeg.txt");
if (myfile.is_open())
{
    cout << "Entering file" << endl;
    while ( myfile.good() )
    {
        cout << "Entering while" << endl;
        getline (myfile,naam);
        cin >> dag >> maand >> jaar;
        getline (myfile,leider);
    }
    Datum* datumOBploeg = new Datum(dag,maand,jaar);

    Wielerploeg* wielerploegOB = new Wielerploeg(naam, *datumOBploeg,leider);
    myfile.close();
    cout << "\n";
    return wielerploegOB;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T12:36:33.060

看起来您正在无序地阅读您的行（至少根据您的示例文件）。

```
while ( myfile.good() )
{
    cout << "Entering while" << endl;
    getline (myfile,naam);
    cin >> dag >> maand >> jaar;
    getline (myfile,leider);
} 
```

应该：

```
while ( myfile.good() )
{
    cout << "Entering while" << endl;
    getline (myfile,naam);
    getline (myfile,leider);        // reordered this line
    myfile >> dag >> maand >> jaar; // use myfile instead of cin
} 
```

另外，如果我是你，我会检查你函数中的其余代码，并确保你没有滥用指针。

# c - 多次拆分字符串以获取字符串数组

> ID：12026466
> 
> 赞同：1
> 
> 时间：2012-08-19T12:27:27.653
> 
> 标签：c, posix

制作一个非常基本的shell作为分配。假设我有一个字符串`"ls a b c | grep a"`

我怎样才能得到这样的东西

```
commands[0][0] = "ls"
commands[0][2] = "a"
commands[0][2] = "b"
commands[0][3] = "c"
commands[0][4] = NULL

commands[1][0] = "grep"
commands[1][1] = "a"
commands[1][2] = NULL 
```

首先拆分`"|"`，然后在空格上进一步拆分，因此能够执行`execvp(commands[0][0], commands[0])`

我可以很好地进行单分裂，但是这种双分裂有点麻烦

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T15:13:58.643

我没有用 execvp 测试过

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#define WHITESPACE 1
#define ARGUMENT 2
#define COMMAND 3
void process_command(const char *string)
{
   char *argument = (char *) 0;
   char *args[100];
   char *const * commands[10];
   int commands_index = 0;
   int char_index = 0;
   int args_index = 0;
   int state = WHITESPACE;
   commands[commands_index] = &args[args_index];
   for (const char *p = string; *p != '\0'; p++)
   {
      if ( *p != ' ' )
      {
         if ( *p == '|' )
         {
            if ( state == ARGUMENT)
            {
               argument[char_index] = '\0';
               char_index = 0;
            }
            state = COMMAND;
            args[args_index] = 0;
            args_index++;
            commands_index++;
            commands[commands_index] = &args[args_index];
         }
         else
         {
            if ( state != ARGUMENT )
            {
               argument = malloc(100);
               args[args_index] = argument;
               args_index++;
               state = ARGUMENT;
            }
            argument[char_index] = *p;
            char_index++;
         }
      }
      else 
      {
         if ( state == ARGUMENT)
         {
            argument[char_index] = '\0';
            char_index = 0;
         }
         state = WHITESPACE;
      }
   }
   argument[char_index] = '\0';
   args[args_index] = 0;
   //execvp(commands[0][0],commands[0]);
   //execvp(commands[1][0],commands[1]);

   for (int i = 0; i <= commands_index; i++)
   {
      int j = 0;
      for (; commands[i][j] != 0;j++)
      {
         printf("commands[%d][%d] = \"%s\"\n",i,j,commands[i][j]);
      }
      printf("commands[%d][%d] = NULL\n",i,j);
   }
   printf("\n");
}

int main(void)
{

   const char *string1 = "ls a b c | grep a";
   const char *string2 = "ls -al|grep txt";
   const char *string3 = "cat file.txt | grep hello |more";
   process_command(string1);
   process_command(string2);
   process_command(string3);
} 
```

输出：

```
commands[0][0] = "ls"
commands[0][1] = "a"
commands[0][2] = "b"
commands[0][3] = "c"
commands[0][4] = NULL
commands[1][0] = "grep"
commands[1][1] = "a"
commands[1][2] = NULL

commands[0][0] = "ls"
commands[0][1] = "-al"
commands[0][2] = NULL
commands[1][0] = "grep"
commands[1][1] = "txt"
commands[1][2] = NULL

commands[0][0] = "cat"
commands[0][1] = "file.txt"
commands[0][2] = NULL
commands[1][0] = "grep"
commands[1][1] = "hello"
commands[1][2] = NULL
commands[2][0] = "more"
commands[2][1] = NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T12:30:58.737

您可以尝试使用`strtok_r`拆分字符串并获取令牌并构建预期的命令行/字符串数组。

# c# - 你如何枚举 MetaType 的成员？

> ID：12026469
> 
> 赞同：1
> 
> 时间：2012-08-19T12:27:47.530
> 
> 标签：c#, .net, protobuf-net

我正在使用 protobuf-net v2 (r480)，并且我有一个`MetaType`类，其中一些成员已通过该`Add()`方法添加。我想枚举它们（获取`ValueMember`对象集合），但似乎尽管有一个按索引索引器，但它`MetaType`不是`IEnumerable`.

我发现了两种不令人满意的枚举成员的方法：对私有字段的反射，`MetaType`当内部实现发生更改时，该私有字段将中断，以及缓慢、浪费和愚蠢的蛮力攻击。

反射：

```
ValueMember[] fields = ((IEnumerable)typeof(MetaType)
    .GetField("fields", BindingFlags.Instance | BindingFlags.NonPublic)
    .GetValue(metaType)).OfType<ValueMember>().ToArray(); 
```

蛮力（为了简洁起见，使用 LINQ，`for`循环可能会更快）：

```
ValueMember[] fields = Enumerable.Range(0, int.MaxValue).Select(i => metaType[i])
    .Where(m => m != null).ToArray(); 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T13:14:34.803

~~是的，没有暴露。有一个内部`.Fields`属性，但值得添加一个功能请求以在公共 API 上公开它。~~

从 r581 开始，可以通过以下方式获得：

```
ValueMember[] fields = metaType.GetFields();
SubType[] subTypes = metaType.GetSubtypes(); 
```

# clr - CLR 无法设置断点

> ID：12026473
> 
> 赞同：0
> 
> 时间：2012-08-19T12:28:10.200
> 
> 标签：clr, breakpoints

有时，当我尝试设置断点时，我会收到一条错误消息，指出公共语言运行时无法设置断点。

即使代码被编译为“发布”版本（我不想\不能再次构建它作为调试） -

1.  我添加了一个指向 JIT 编译器的 ini 文件，而不是优化它（并且还生成跟踪信息）
2.  当我在模块窗口中看到加载的模块时，我发现它确实没有优化
3.  在“用户代码”下（在模块窗口中）它显示 N/A。符号被加载并自动找到源代码。
4.  一些断点被认为是有效的，当到达它们时执行会停止

# windows - 致命错误：使用 Windows Vista、PHP5、MySQL 和 Apache2 调用未定义的函数 mysql_connect()

> ID：12026476
> 
> 赞同：2
> 
> 时间：2012-08-19T12:28:38.073
> 
> 标签：windows, apache2, php-5.2

我正在努力让 PHP 连接到 Apache 环境中的 MySQL 数据库。我试图自己解决这个问题，但是，我在这个问题上花费了太多时间而没有解决方案。

在我的`php.ini`文件中，我有以下内容（经过广泛研究，这似乎是所需 INI 语句的共识）：

```
; Directory in which the loadable extensions (modules) reside.
; extension_dir = "./"
extension_dir = "C:\php\ext"
extension=php5apache2_2.dll

extension=msql.dll
extension=php_mysql.dll
extension=php_mysqli.dll

mysql.default_port = 3607

mysqli.default_port = 3306 
```

在我的 Apache`httpd.conf`文件中：

```
LoadModule php5_module "C:/php/php5apache2_2.dll"
ServerName localhost:80

DocumentRoot "C:/Apache2/htdocs"

AddType text/html .shtml
AddType application/x-httpd-php .php
AddType application/x-httpd-php .phtml

extension=php_msql.dll

PHPIniDir "C:/php" 
```

我有 PHP 5.2.17、Apache 2.2.22(Wind32) 和 MySQL 5.2。

PHP 脚本工作正常，包括`<?php phpinfo(); ?>`. 我可以使用 MySQL Workbench 创建模式、表、脚本等。

我在某处（经过数小时搜索答案）读到，如果在 PHPInfo 的页面中没有看到 MSQL，说明某些东西安装不正确？我已按照建议重新安装，但无济于事。我已启动/停止服务，更改后定期重新启动以确保更改生效。

我正在使用装有 Windows Vista 的笔记本电脑。当我尝试访问 MySQL 时，出现以下致命错误：

> 致命错误：调用未定义函数 mysql_connect()

对此安装新手的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T05:06:24.763

我有一个类似的问题。原来它没有从 php 文件夹中加载 php.ini 文件（是的，愚蠢的权利）我检查了 phpinfo 它说......

“配置文件（php.ini）路径”设置为“C:\Windows”。将 php.ini 放在该目录中，嗯，瞧。

...希望我安装了 WAMP

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T12:38:59.627

尝试以下

将**libmysql.dll**复制到路径**c:\windows\system32**。该文件应位于 C:\php\ 根文件夹中。重新启动您的电脑。

请参考***Windows 下的扩展安装部分*** [http://php.net/manual/en/install.windows.extensions.php](http://php.net/manual/en/install.windows.extensions.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-21T11:25:17.403

成功！！！！

我不声称对其他人有解决方案，但是，这是经过多次折腾后最终对我有用的方法。我正在开发基于 Windows Vista 的环境，仅供参考。

卸载：MySQL、Apache 和 PHP。确保所有相关服务不再运行并且已被删除（通常卸载会处理此问题，但并非总是如此）。从本质上讲，清洁石板。

转到（不确定是否允许）www.WAMPServer.com 在那里我下载了 Apache 2.2.22 - MySQL 5.5.24 - PHP 5.4.3 XDebug 2.1.2 XDC 1.5 PhpMyadmin 3.4.10.1 SQLBuddy 1.3.3 webGrind 的组1.0

对于安装，我只是按照屏幕提示进行操作。

有一些配置设置如下： 在 HTTPD.CONF

```
ServerRoot (set according to where Apache is installed)
Listen 80
ServerName localhost:80

LoadModule php5_module "c:/wamp/bin/php/php5.4.3/php5apache2_2.dll"
* Note the above line - you may have to copy the dll into that directory if not there

#
# This should be changed to whatever you set DocumentRoot to.
#
# <Directory "c:/wamp/www/">
<Directory "C:/wamp/bin/apache/apache2.2.22/htdocs">
* Note - above line will be changed to match your htdocs directory

#
# "C:/Program Files/Apache Software Foundation/Apache2.2/cgi-bin"
# CGI directory exists, if you have that configured.
#
<Directory "C:\wamp\bin\apache\apache2.2.22\cgi-bin">

* In the section <IfModule mime_module>

AddType application/x-httpd-php .php
AddType application/x-httpd-php .php3

AddType text/html .shtml
AddOutputFilter INCLUDES .shtml

* Note at the end of the CONF file set the directory where the PHP.INI file is located

PHPIniDir "C:\wamp\bin\php\php5.4.3" 
```

在 PHP.INI 文件中：

```
extension=php_mysql.dll
extension=php_mysqli.dll
extension=php_pdo_mysql.dll
extension=php_pdo_sqlite.dll 
```

在 My.INI 文件中：

```
# The MySQL server
[wampmysqld]
port        = 3306
socket      = /tmp/mysql.sock
key_buffer = 16M
max_allowed_packet = 1M
table_cache = 64
sort_buffer_size = 512K
net_buffer_length = 8K
read_buffer_size = 256K
read_rnd_buffer_size = 512K
myisam_sort_buffer_size = 8M
basedir=c:/wamp/bin/mysql/mysql5.5.24
log-error=c:/wamp/logs/mysql.log
datadir=c:/wamp/bin/mysql/mysql5.5.24/data

[mysqld]
port=3306 
```

之后我去了 MySQL.com 并下载了 MySQL Workbench GUI Tool。我使用它来创建数据库、模式、表等。第一次使用工作台时，请确保您拥有正确的端口#3306（或您的首选端口）。如果您创建用户和密码，请记住记下它们，因为它们将在您的“连接”语句中使用。

我差点忘了。确保这两个 dll 在你的 PHP/Ext 目录下 php_mysql.dll 和 php_mysqli.dll

我下班了...我希望这可以帮助您解决问题。

最诚挚的问候，特里

# php - 连接根目录上方或下方的 php 文件？

> ID：12026478
> 
> 赞同：0
> 
> 时间：2012-08-19T12:28:57.453
> 
> 标签：php, .htaccess, security, root

就这样我有这个权利...

在根（此处的词所在的位置）上方将是...

```
 here/public/allfiles.php 
```

在根（此处的词所在的位置）下方将是....

```
 public/here/allfiles.php 
```

好吧，那么...

我一直在尝试将 php 连接文件放在根目录之上，但当然我一直遇到问题，原因很明显，因为根目录之上的任何东西都无法访问

所以我的问题是这个...

通过将 connection.php 文件夹（用于 mysql 连接等）放置在根目录下方并在该文件夹中放置一个 htaccess 文件以防止偷看它，它是否被认为是安全的以创建安全的 php 网站

# php - 为什么我不能在 xml 文件中嵌入 php？

> ID：12026481
> 
> 赞同：0
> 
> 时间：2012-08-19T12:29:24.650
> 
> 标签：php, ajax

> **可能重复：**
> [转义 <? 使用 require 时在启用 php 速记的服务器上](https://stackoverflow.com/questions/10457409/escaping-on-php-shorthand-enabled-server-when-using-require)

我想要的是，当我向`domain/xml.php`. 它返回一个 XML 文件，因此我可以使用 httpRequest.responseXML 来解析 XML 文件。

我所做的是：

```
<?php
    $name = 'Just a tester';
?>

<?xml version='1.0' ?>
<name><?php echo $name ?></name> 
```

但是解析器给了我一行错误`<?xml version='1.0' ?>`，我认为这可能是与 php 分隔符的语法冲突`<?php`。

如何请求 url 并获取 php 生成的 xml？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T12:38:49.453

您启用了短标签。这是默认设置，从 PHP 5.4 开始，所有地方都支持标签，无论短标签设置如何。

问题是它`<?xml version='1.0' ?>`以 开头和结尾`<? ?>`，就像带有短标签的 PHP 一样。

为了解决这个问题：

```
echo "<?xml version='1.0' ?>"; 
```

在那条线上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T13:10:01.773

为什么您尝试将 PHP 变量嵌入 XML 而不是使用 PHP 生成 XML？

示例（xml.php）：

```
<?php 
header('Content-type: text/xml; charset=utf-8');

//Your Data
$persons = array(array('name'=>'bob','age'=>20,'sex'=>'M'),
                 array('name'=>'steve','age'=>26,'sex'=>'M'),
                 array('name'=>'jen','age'=>33,'sex'=>'F'),
                 );

$xml = new SimpleXMLElement('<?xml version="1.0" encoding="UTF-8"?><persons/>');

foreach ($persons as $person) {
    $node = $xml->addChild('person');
    foreach($person as $key=>$value){
        $node->addChild($key, $value);
    }
}
//DOMDocument to format code output
$dom = new DOMDocument('1.0');
$dom->preserveWhiteSpace = false;
$dom->formatOutput = true;
$dom->loadXML($xml->asXML());

echo $dom->saveXML();

/* OUTPUT
<?xml version="1.0" encoding="UTF-8"?>
<persons>
  <person>
    <name>bob</name>
    <age>20</age>
    <sex>M</sex>
  </person>
  <person>
    <name>steve</name>
    <age>26</age>
    <sex>M</sex>
  </person>
  <person>
    <name>jen</name>
    <age>33</age>
    <sex>F</sex>
  </person>
</persons>
*/
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T12:41:35.050

你可以试试：

```
<?php
header('Content-type: text/xml; charset=utf-8');
$name = 'Just a tester';
echo "<?xml version='1.0' ?>";
?>

<name><?php echo $name; ?></name> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-19T13:33:33.470

改变

```
echo "<?xml...?>"; 
```

到

```
echo '<'."?...?".'>'; 
```

或使用劳伦斯解决方案

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-19T12:35:03.153

您应该将您的网络服务器设置为不仅可以处理 PHP，还可以通过 PHP 预处理器处理 XML 文件。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-08-19T12:34:18.703

您启用了短标签。这些应该在您的 php.ini 中禁用，搜索“short_open_tag”和“asp_tag”。

如果您的版本早于 PHP 5.3.0，这可能会起作用（如果您只希望当前文档使用此版本）：

```
<?php ini_set('short_open_tag', 0); ?> 
```

# mysql - mysql查询监控工具

> ID：12026488
> 
> 赞同：2
> 
> 时间：2012-08-19T12:30:22.973
> 
> 标签：mysql

我想实时查看所有正在运行的 mysql 查询（如 mssql 中的分析器）我尝试了 jet profiler，但我没有得到与 mssql profiler 相同的结果。是否有这样的工具或者可能内置选项来输出到日志？

我会透露更多信息，也许有人会考虑解决方法。我使用实体框架从.net 连接到 mysql。有些查询在开发环境中有效，而不是在生产环境中。我想查看解析后的查询，看看有什么问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T12:41:53.273

您可以编辑配置文件并启用日志记录。在`my.cnf`寻找：

```
#
# * Logging and Replication
#
# Both location gets rotated by the cronjob.
# Be aware that this log type is a performance killer.

# log = /var/log/mysql/mysql.log 
```

取消注释该`log`行，然后您可以使用 tail 来监控查询：

```
tail -f /var/log/mysql/mysql.log 
```

您需要重新启动服务器以应用新配置。

# jquery - AJAX 调用期间的 Node.js 响应问题

> ID：12026489
> 
> 赞同：2
> 
> 时间：2012-08-19T12:30:24.357
> 
> 标签：jquery, ajax, node.js

也许这似乎是一个非常菜鸟的问题，但我不知道我做错了什么。我想要完成的是一个简单的 AJAX 请求。这是我在服务器端的代码：

```
http.createServer(function(request, response) {
        response.writeHead(200, {
            "Content-Type": "text/html"     
        });
        response.end("No data to return.");

}).listen(8666); 
```

在客户端，我使用 jQuery：

```
$(document).ready(function() {
        $("#magicSend").on("click", function() {
            $.ajax({                   
               url: "http://localhost:8666/",
               type: "POST"
             });
        });
    }); 
```

问题是，根据 Firebug，我得到的是响应标头而不是内容。AJAX 调用在 Firebug 的控制台上也会变红，尽管它显示“200 OK”。我知道我错过了一些东西，但不知道是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T12:43:29.267

您是否也在端口 8666 上运行您的网络服务器？从您的代码来看，您的 NodeJS 服务器所做的只是提供一个答案，所以我猜不是。**您不能对不同的端口进行 AJAX 调用，即使它是同一主机（在您的情况下为 localhost）。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T14:41:11.303

由于[相同的原产地政策](http://en.wikipedia.org/wiki/Same_origin_policy)而无法正常工作。

这可能并不明显，但浏览器也会将策略强制执行到端口号。

所以[http://example.com:80](http://example.com:80)不同于[http://example.com:81](http://example.com:81)

您可以使用[jsonp](http://en.wikipedia.org/wiki/JSONP)解决它。

# objective-c - 未在 tableView 上调用 didSelectRowAtIndexPath

> ID：12026493
> 
> 赞同：0
> 
> 时间：2012-08-19T12:30:48.153
> 
> 标签：objective-c, uitableview, uiviewcontroller

我在 viewcontroller1 中使用 tableView 并实现了一个 didSelectRowAtIndexPath 来移动到带有一些数据的 viewController2 并将其显示在 viewController2 上的 tableView 上……现在一切正常，但是当我在 viewController2 上实现代码时：

```
 (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath) {

    // some code
} 
```

在我选择一行后，它被选中并以蓝色着色，但在方法中永远不会停止`didSelectRowAtIndexPath`。

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T12:32:40.440

您不仅应该将表视图的数据源设置为视图控制器，还应该将委托设置为：

```
tableView.delegate = self; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T12:32:33.220

您需要在情节提要或 XIB 文件中或以编程方式设置 tableView 的委托。

# django - 尽管 static_url 正确，Django-Chosen 似乎忽略了小部件

> ID：12026501
> 
> 赞同：1
> 
> 时间：2012-08-19T12:32:12.327
> 
> 标签：django, jquery-chosen

我可以使用选定的 jquery 直接将 ManyToManyField 放入选定的小部件：

```
<script type="text/javascript" src="{{ STATIC_URL }}projectx/projectx_chosen.js"></script> 
```

**项目x_chosen.js：**

```
$(document).ready(function () {
    $('#id_sales_item').chosen();
}); 
```

这清楚地表明我的 static_url 设置正确。

但是尝试用 django-chosen 实现同样的目标没有任何效果。

```
class DealType(models.Model):   
    sales_item          = models.ManyToManyField(SalesItem)

class DealTypeForm(ModelForm):   

    class Meta:
        model = DealType

        widgets = {
                    'sales_item': ChosenSelectMultiple(),
                   } 
```

我选择了.jquery.min.js 下`{{STATIC_URL}}js/chosen.jquery.min.js` 和 selected.css 下`{{STATIC_URL}}css/chosen.css`

知道为什么这不起作用吗？

**更新**

```
[21/Aug/2012 11:16:13] "GET /static/css/chosen.css HTTP/1.1" 304 0
[21/Aug/2012 11:16:16] "GET /static/js/chosen.jquery.min.js HTTP/1.1" 304 0 
```

因此，根据我对源代码的调查，现在两者都处于扩展所期望的路径中。他们被加载了。

然而它根本行不通。

直接使用 selected.js 就像一个魅力，所以我知道我通常会如何使用它，但是 django-chosen 似乎还没有成熟。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T01:38:35.003

我遇到了同样的问题，并通过链接到 selected.jquery.ready.js 文件来解决它。所以我有：

```
<link href="{% static 'css/chosen.css' %}" rel="stylesheet">
<script type="text/javascript" src="{% static 'js/chosen.jquery.js' %}"></script>
<script type="text/javascript" src="{% static 'js/chosen.jquery_ready.js' %}"></script> 
```

# mysql - 比较mysql中的日期

> ID：12026506
> 
> 赞同：0
> 
> 时间：2012-08-19T12:32:40.227
> 
> 标签：mysql, sql

我在mysql中有一个不工作的存储过程我需要比较他的名字作为参数得到的列和他的值作为参数得到的日期'我的语法是这样的。

* * *

```
DELIMITER $$

CREATE DEFINER=`vladiraheli`@`%` PROCEDURE sheepfarm.create_date_filter
( 
      in columnName VARCHAR(100), 
      in param varchar(100),
      in val varchar(100)
)
BEGIN

    declare formated_date  date;

    set formated_date = str_to_date(val,'%Y-%m-%d');

    set @stmt1 = concat(
     'select * from sheepfarm.Sheep where ' + 
      columnName + param  + 'formated_date') ;

    prepare stmt1 from @stmt1; 
    EXECUTE stmt1;

END $$ 
```

我怎样才能使这项工作？

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T13:22:52.723

这句话有问题：

```
set @stmt1 = concat('select * from sheepfarm.Sheep where ' + 
  columnName + param  + 'formated_date') ; 
```

`formated_date`作为字符串传递，而不是作为变量传递。

```
set @stmt1 = concat('select * from sheepfarm.Sheep where ',  
  columnName, ' ', param, ' ', formated_date) ; 
```

既然你正在使用`CONCAT`，你应该使用`comma`而不是`plus sign`. `columnName`问题，`param`和的可能值是`val`多少？

# android - 如何创建可点击的矩形？

> ID：12026517
> 
> 赞同：0
> 
> 时间：2012-08-19T12:35:18.593
> 
> 标签：android, view, canvas, drawrect, ondraw

我使用 DrawRect 方法绘制室内地图。我想通过用户的 OnTouch 事件来识别每个矩形。我怎样才能做到这一点？

我想知道我是否可以将绘制的矩形用作独立对象，我可以在其中唯一地识别它们。

**更新**

**我试过这个。但这给了我错误。如何使用 for 循环创建新意图？:(**

```
ArrayList<Rect> rectangles = new ArrayList<Rect>();
 {rectangles.add(new Rect(232,78,419,238));
 rectangles.add(new Rect(285,27,524,239));
 rectangles.add(new Rect(418,79,524,239));
 rectangles.add(new Rect(181,79,233,215));
 rectangles.add(new Rect(232,237,524,315));}

 String Selected_rect = null;

public boolean onTouchEvent(MotionEvent event) {
int touchX = (int) event.getX();
int touchY = (int) event.getY();
switch(event.getAction()){

case MotionEvent.ACTION_DOWN:
        System.out.println("Touching down!");
        for(int i =0; i< rectangles.size();i++){

                if(rectangles.get(i).contains(touchX,touchY)){
                    System.out.println("Touched Rectangle, start activity.");
                    rectangles.get(i).describeContents ();
                    Selected_rect = String.valueOf(rectangles.get(i));
                                       }
//                    Intent inte = new Intent("android.intent.action.DetectBlock");
//                    startActivity(inte);
            }

        break;
case MotionEvent.ACTION_UP:
        System.out.println("Touching up!");
        break;
case MotionEvent.ACTION_MOVE:
        System.out.println("Sliding your finger around on the screen.");
        break;
}
  return true;
} 
```

**我的 Intent 方法体**

```
private void startActivity(Intent inte) {
    // TODO Auto-generated method stub
     startActivity(inte);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T12:47:10.077

画布不会记住您在其上绘制的形状。您必须分别跟踪它们。您应该使用 Rect 对象（“模型”对象）或其他包含矩形坐标、尺寸和您需要的任何内容的自定义对象填充列表（或其他一些数据结构），并检查触摸是否触摸的坐标位于这些矩形中的任何一个内。Android Rect 的EG 方法`contains(int x, int y)`会有所帮助。在您的绘图方法中，您还可以使用这些对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-11T03:27:17.523

我不确定这是否已得到解答，但我正在构建类似的东西。对于矩形的构造，我刚刚手动添加了每个矩形，然后使用 Rect.intersect() 来查看构造的矩形是否穿过接触点。那是一个模糊的答案，但我想您已经弄清楚了，如果您没有，请告诉我：D

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T16:10:41.847

我意识到这个问题是不久前被问到的，但我注意到你更新的问题......

我猜你遇到的问题实际上是你试图从 View 类运行“startActivity”。

首先，如果您像这样在活动类上创建一个新的静态无效

```
public static void Rectclicked(Context c) {
        Intent inte = new Intent(c, SecondActivity.class);
        c.startActivity(inte);
    } 
```

然后回到你的 View 类，如果点击了一个矩形，在你的 TouchEvent 中将它添加到 for 循环中

```
MainActivity.Rectclicked(getContext()); 
```

# c# - 创建 T 类型的通用选择列表生成方法

> ID：12026519
> 
> 赞同：4
> 
> 时间：2012-08-19T12:35:40.923
> 
> 标签：c#, .net, asp.net-mvc-3

我想知道我如何能够创建一个可重用的方法来创建基于方法参数的选择列表？我在想像下面这样的事情：

```
public IEnumerable<SelectListItem> CreateSelectList(IList<T> entities, T value, T text)
{

   return  entities
           .Select(x => new SelectListItem
                           {
                               Value = x.value.ToString(),
                               Text = x.text.ToString()
                           });
} 
```

我觉得我有点倒退了。我不确定如何调用这样的方法，当我使用类别的 IList 作为第一个参数调用它时，编译器抱怨它不能将类别类型分配给类型 T？另外，我如何将方法参数插入到 lambda 中？任何帮助表示赞赏！

我试图用来调用它的代码（这是错误的，但你明白了）

```
viewModel.Categories = _formServices.CreateSelectList(categories, Id, Name); 
```

我试图使代码更通用和可重用的代码：

```
viewModel.Categories = categories
                      .Select(x => new SelectListItem
                     {
                         Value = x.Id.ToString(),
                         Text = x.Name
                      }); 
```

**编辑答案**

归功于@Pavel Backshy 的工作答案。我想编辑我对他的回答所做的扩展，以防它帮助任何人！该扩展只是在组合中添加了一个 .Where 子句：

```
 public IEnumerable<SelectListItem> CreateSelectListWhere<T>(IList<T> entities, Func<T, bool> whereClause, Func<T, object> funcToGetValue, Func<T, object> funcToGetText)
    {
        return entities
               .Where(whereClause)
               .Select(x => new SelectListItem
                {
                    Value = funcToGetValue(x).ToString(),
                    Text = funcToGetText(x).ToString()
                });
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-19T13:03:14.053

您可以使用反射来定义它以按名称获取属性值，但我认为使用 Func 更加优雅和灵活。将您的方法更改为：

```
public IEnumerable<SelectListItem> CreateSelectList<T>(IList<T> entities, Func<T, object> funcToGetValue, Func<T, object> funcToGetText)
{
    return entities
            .Select(x => new SelectListItem
            {
                Value = funcToGetValue(x).ToString(),
                Text = funcToGetText(x).ToString()
            });
} 
```

然后你可以通过这种方式使用它：

```
viewModel.Categories = _formServices.CreateSelectList(categories, x => x.Id, x => x.Name); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-06T14:33:09.337

我发现 Pavel Bakshy 的回答以及您对包含“whereClause”的编辑非常有帮助，这正是我想要完成的。同样，我还添加了一个“selectedValue”对象，因为这是我尝试做的一部分。'null' 检查适用于列表没有当前选定值的情况（即首次加载时）。

编辑：我也使用 IEnumerable 而不是 IList 作为我的第一个参数

```
 IEnumerable<SelectListItem> ISelectUtils.CreateSelectList<T>(IEnumerable<T> entities, Func<T, bool> whereClause, Func<T, object> funcToGetValue, Func<T, object> funcToGetText, object selectedValue)
    {
        return entities
                .Where(whereClause)
                .Select(x => new SelectListItem
                {
                    Value = funcToGetValue(x).ToString(),
                    Text = funcToGetText(x).ToString(),
                    Selected =  selectedValue != null ? ((funcToGetValue(x).ToString() == selectedValue.ToString()) ? true : false) : false
                });
    } 
```

# c++ - 模板和信息丢失

> ID：12026520
> 
> 赞同：1
> 
> 时间：2012-08-19T12:35:51.780
> 
> 标签：c++, templates, matrix, c++11

我创建了一个矩阵类：

```
template <typename T>
class Matrix
{
public:
    Matrix(size_t n_rows, size_t n_cols);
    Matrix(size_t n_rows, size_t n_cols, const T& value);

    void fill(const T& value);
    size_t n_rows() const;
    size_t n_cols() const;

    void print(std::ostream& out) const;

    T& operator()(size_t row_index, size_t col_index);
    T operator()(size_t row_index, size_t col_index) const;
    bool operator==(const Matrix<T>& matrix) const;
    bool operator!=(const Matrix<T>& matrix) const;
    Matrix<T>& operator+=(const Matrix<T>& matrix);
    Matrix<T>& operator-=(const Matrix<T>& matrix);
    Matrix<T> operator+(const Matrix<T>& matrix) const;
    Matrix<T> operator-(const Matrix<T>& matrix) const;
    Matrix<T>& operator*=(const T& value);
    Matrix<T>& operator*=(const Matrix<T>& matrix);
    Matrix<T> operator*(const Matrix<T>& matrix) const;

private:
    size_t rows;
    size_t cols;
    std::vector<T> data;
}; 
```

现在我想启用不同类型的矩阵之间的操作，例如：

```
Matrix<int> matrix_i(3,3,1); // 3x3 matrix filled with 1
Matrix<double> matrix_d(3,3,1.1); // 3x3 matrix filled with 1.1

std::cout << matrix_i * matrix_d << std::endl; 
```

我想这样做（是正确的方法吗？）：

```
template<typename T> // Type of the class instantiation
template<typename S>
Matrix<T> operator*(const Matrix<S>& matrix)
{
   // Code
} 
```

我认为如果我将双矩阵与整数矩阵相乘，这会很好：我将获得一个新的双矩阵。问题是，如果我将整数矩阵与双精度矩阵相乘，我会丢失一些信息，因为我获得的矩阵将是一个整数矩阵......对吗？我该如何解决这种行为？

```
std::cout << matrix_d * matrix_i << std::endl; // Works: I obtain a 3x3 matrix full of 1.1
std::cout << matrix_i * matrix_d << std::endl; // Doesn't work: I obtain a 3x3 matrix full of 1 instead of 1.1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T12:40:44.850

为了做你想做的事，你需要提供一个`operator*`返回一个`Matrix<X>`where`X`是具有最大范围/最高精度的类型。

如果您手头有 C++11 编译器，则可以使用：

```
template <typename T, typename U>
auto operator*( Matrix<T> const & lhs, Matrix<U> const & rhs) 
     -> Matrix< delctype( lhs(0,0) * rhs(0,0) ) >
{
   Matrix< delctype( lhs(0,0) * rhs(0,0) ) > result( lhs );
   result *= rhs;
   return result;
} 
```

假设您已经`operator*=`实现了一个允许与其他实例相乘的模板，`Matrix<T>`并且您有一个转换构造函数。

# json - couchdb - 导入 json 文件

> ID：12026521
> 
> 赞同：1
> 
> 时间：2012-08-19T12:35:58.610
> 
> 标签：json, node.js, import, couchdb

我有一个包含 json 格式数据的文件。数据很奇怪，因为这些行具有一组属性的不同子集，这些属性并非都是事先知道的（随着时间的推移，它们会逐渐增加）。例如：

```
[{"firstName":"Joe","education":"highschool","sex":"male"},
 {"lastName":"Edwards","address":"ohio","sex":"male"},
{"favoriteSport":"cycling","bicycle":"raleigh","ownsBoat":"yes","ownsDog":"yes","ownsHouse":"yes"}] 
```

文件中已经存在大量数据，因此我想将其导入到 couchdb 中，而不是逐项输入数据。我按照[此处](https://stackoverflow.com/questions/790757/import-json-file-to-couch-db)帖子中的程序进行操作，但是在创建数据库时，它是空的。我用了：

```
curl -X PUT -d @../Data/data.json http://127.0.0.1:5984/test_import 
```

更新：由于我正在使用 nodejs（新手），我想我会尝试使用“摇篮”。我的想法是将数据作为数组导入，并使用'cradle's dbsave() 批量加载。但使用以下内容：

```
var fs = require('fs');
var cradle = require('cradle');

var data = fs.readFile( '../Data/data.json', function (err, data) {
  if (err) {
    throw err; 
  }
.
.
.
makeDB(bigdata,'test_import');  // where 'bigdata' is an array of json objects/couchdb 'documents'
});

function makeDB (p,filename) {

var db = new(cradle.Connection)().database(filename);
console.log(db);

db.save(p, function(err,res) {
if (err) {
    console.log(err);
} else {
    console.log('Success!');
}
});

}; 
```

后者似乎工作！创建并填充了一个数据库，但它确实引发了以下错误：

```
k:\nodejs\node_modules\cradle\lib\cradle.js:198
            return callback(body);
                   ^
TypeError: undefined is not a function

OR

k:\nodejs\node_modules\cradle\lib\cradle.js:201
        callback(null, self.options.raw ? body : new cradle.Response(body, res
        ^
TypeError: undefined is not a function
    at Request.cradle.Connection.request [as _callback] (k:\nodejs\node_modules\cradle\lib\cradle.
js:201:9)
    at Request.init.self.callback (k:\nodejs\node_modules\request\main.js:120:22)
    at Request.EventEmitter.emit (events.js:91:17)
    at Request.<anonymous> (k:\nodejs\node_modules\request\main.js:633:16)
    at Request.EventEmitter.emit (events.js:88:17)
    at IncomingMessage.Request.start.self.req.self.httpModule.request.buffer (k:\nodejs\node_modul
es\request\main.js:595:14)
    at IncomingMessage.EventEmitter.emit (events.js:115:20)
    at IncomingMessage._emitEnd (http.js:366:10)
    at HTTPParser.parserOnMessageComplete [as onMessageComplete] (http.js:149:23)
    at Socket.socketOnData [as ondata] (http.js:1366:20) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T02:26:52.517

[解决了]

我的问题的答案是肯定的，当然，couchdb 非常适合这种数据。我发现使用 node.js 进行批量导入的最简单方法是使用[cradle](https://github.com/cloudhead/cradle/#%22cradle%22)（其创建者提供了问题的解决方案）。通过对 makeDB 函数进行以下更改，上述代码可以正常工作：

```
//  Take the array of objects and create a couchdb database

function makeDB (data,filename) {

var db = new(cradle.Connection)().database(filename);
//console.log(db);
db.create(function(err){
    if (err) console.log(err); 
    });
db.save(data, function(err) {
    if (err) console.log(err);
    console.log(filename + ' is created.');
    });

}; 
```

# c++ - 在函数中使用文件中的字符串

> ID：12026528
> 
> 赞同：3
> 
> 时间：2012-08-19T12:37:00.503
> 
> 标签：c++, casting

我在 C++ 中有这个功能

```
double f_x(double y , string sfy )
{
  return sfy;
} 
```

1.  我想从文件中读取字符串 sfy 并将其传递给 f_x 函数。
2.  sfy 包含类似 y 或 cos(y) 或 exp(y) 的内容。
3.  当我将 y 和 sfy 传递给 f_x 时，我希望 f_x 计算 sfy 并返回它。

我可以做第 1 和第 3，但问题是 f_x 的类型是 double 而 sfy 是字符串，所以我得到错误。

我无法将 f_x 的类型更改为任何其他类型，它应该是 double 或 float。

我该如何克服这个问题，即我应该怎么做才能使 f_x 返回 sfy 作为双倍。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T13:01:29.237

像这样的东西，也许：

```
#include <map>
#include <string>
#include <fstream>
#include <iostream>
#include <cmath>

std::map<std::string, double(*)(double)> m;

double f_x(double y , std::string sfy )
{
    if (m.find(sfy) == m.end()) throw "Invalid operation.";
    return m[sfy](y);
}

int main()
{
    m["exp"] = std::exp;
    m["cos"] = std::cos;
    m["sin"] = std::sin;

    std::ifstream file("test.txt");
    std::string op;
    std::getline(file, op);

    std::cout << f_x(42.0, op);
} 
```

# jquery - 使用“this”选择器在同一类的各个 div 上执行 Jquery 函数

> ID：12026529
> 
> 赞同：0
> 
> 时间：2012-08-19T12:37:47.223
> 
> 标签：jquery, class, html

我试图在将鼠标悬停在图像上时进行简单的叠加，该功能可以完美运行，但会出现在该类的所有 div 上。我希望该函数在悬停的 div 上运行，而不是所有具有相同类的 div。

我正在使用这个简单的函数来应用 .css 内联。

```
$(document).ready(function() {
    $('.attachment-home-sub-feature, .thumb-hover').hover(function() {
        $('.thumb-hover').css({
            'display': 'block'
        });
    }, function() {
        $('.thumb-hover').css({
            'display': 'none'
        });
    });
});​ 
```

的HTML：

```
<div class="sfp-img">
<div class="thumb-hover"><a class="thumb-hover-link" href="<?php the_permalink() ?>"></a></div><?php if ( has_post_thumbnail()) the_post_thumbnail('home-sub-feature'); ?>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T13:10:44.157

利用`$(this)`

```
$(document).ready(function() {
    $('.attachment-home-sub-feature, .thumb-hover').hover(function() {
        $(this).css({
            'display': 'block'
        });
    }, function() {
        $(this).css({
            'display': 'none'
        });
    });
});​ 
```

看看 - [http://jsfiddle.net/LtmCP/](http://jsfiddle.net/LtmCP/)

**编辑：**

阅读您的评论后，我认为还有另一种方法可以做到这一点。在你的 CSS 中，而不是仅仅`thumb-hover`创建 2 个类：

1.`thumb-regular`

2.`thumb-hover`

其中一个将带有显示块，另一个将不显示。在您的 jQuery 中，而不是使用`css()`，使用`addClass`和`removeClass`。（但仍然`this`像上面的代码一样使用）

# java - 在项目树中将 smartgwt 图标文件夹放在哪里？

> ID：12026534
> 
> 赞同：1
> 
> 时间：2012-08-19T12:38:25.960
> 
> 标签：java, smartgwt

```
setNodeIcon("icons/person.png"); 
```

或者

```
setIcon("icons/person.png"); 
```

在 SmartGWT`TreeGrid`和`Tab`(in `TabSet`) 中，我猜应该在文件夹“icons”中找到“person.png”，但我应该在项目本身的哪里放置“icons”？

在 JavaDoc 中还说*setNodeIcon的默认值是**[SKIN]*是`[SKIN]file.gif`什么意思？

 *谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T16:08:16.020

我不知道你在哪里可以找到默认值（在我看来，使用 Skin 文件夹是为了使用 smartgwt 皮肤中已经存在的图像）但是我通常将我的图像直接放在我的项目中的 war 中，子文件夹与他们的大小。例如，要使用我只是做的图标`btnClear.setIcon("16/clear.png"); With war/images/16.clear.png image folders structure.`

你可以看看`getSkinImgDir`并做一个测试*

# c++ - getline(cin,_string);

> ID：12026541
> 
> 赞同：0
> 
> 时间：2012-08-19T12:39:17.627
> 
> 标签：c++, string, getline

我知道`getline(cin,_string);`效果很好

但这不会：

```
char* _chArr = new char;
getline(cin,_chArr); 
```

即使这也不起作用：

```
char* _chArr = new char[30];
getline(cin,_chArr); 
```

不是`char*`字符串吗？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T12:41:11.203

> 不是 char* 是一个字符串

不，它是指向 a 的指针，仅此而已`char`。该函数`std::getline`做了一些在`char *`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T12:51:31.653

好好想想逻辑。char* 只是一个指向字符类型内存块的指针。您必须为其分配一些动态内存，然后使用 strcpy() 或手动将数据复制到其中。C++ 不支持直接输入。字符串实际上是自身包含大小的对象。它们是由该行业的专家设计的，它们提供了直接输入和动态增长，就像内置功能一样。字符串和 cstring 是有区别的。Cstring 是 char*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T12:42:14.737

不，C++ 字符串*不仅仅是*字符数组，它们是一个成熟的类，通常在封面下还有很多额外的东西，超出了字符数组提供的功能。

# c++ - 如何使用 libclang 确定成员函数是 const 还是 volatile？

> ID：12026551
> 
> 赞同：12
> 
> 时间：2012-08-19T12:41:21.447
> 
> 标签：c++, c, clang, libclang

我有一个`CXCursor`kind的实例`CXCursor_CXXMethod`。我想知道函数是`const`还是`volatile`，例如：

```
class Foo {
public:
    void bar() const;
    void baz() volatile;
    void qux() const volatile;
}; 
```

我在 libclang 的文档中找不到任何有用的东西。我试过了`clang_isConstQualifiedType`，`clang_isVolatileQualifiedType`但这些似乎总是返回`0`C++ 成员函数类型。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-26T14:52:14.360

我可以想到两种方法：

**使用`libclang`词法分析器**

[此 SO 答案](https://stackoverflow.com/a/11738120/1071136)中出现的代码对我有用；它使用`libclang`标记器将方法声明分开，然后记录方法括号之外的任何关键字。

它不*访问*代码的 AST，据我所知，它根本不涉及解析器。如果您确定您调查的代码是正确的 C++，我相信这种方法是安全的。

*缺点*：该解决方案似乎没有考虑预处理指令，因此必须首先处理代码（例如，通过`cpp`）。

示例代码（要解析的文件必须是程序的第一个参数，例如`./a.out bla.cpp`）：

```
#include "clang-c/Index.h"
#include <string>
#include <set>
#include <iostream>

std::string GetClangString(CXString str)
{
  const char* tmp = clang_getCString(str);
  if (tmp == NULL) {
    return "";
  } else {
    std::string translated = std::string(tmp);
    clang_disposeString(str);
    return translated;
  }
}

void GetMethodQualifiers(CXTranslationUnit translationUnit,
                         std::set<std::string>& qualifiers,
                         CXCursor cursor) {
  qualifiers.clear();

  CXSourceRange range = clang_getCursorExtent(cursor);
  CXToken* tokens;
  unsigned int numTokens;
  clang_tokenize(translationUnit, range, &tokens, &numTokens);

  bool insideBrackets = false;
  for (unsigned int i = 0; i < numTokens; i++) {
    std::string token = GetClangString(clang_getTokenSpelling(translationUnit, tokens[i]));
    if (token == "(") {
      insideBrackets = true;
    } else if (token == "{" || token == ";") {
      break;
    } else if (token == ")") {
      insideBrackets = false;
    } else if (clang_getTokenKind(tokens[i]) == CXToken_Keyword && 
             !insideBrackets) {
      qualifiers.insert(token);
    }
  }

  clang_disposeTokens(translationUnit, tokens, numTokens);
}

int main(int argc, char *argv[]) {
  CXIndex Index = clang_createIndex(0, 0);
  CXTranslationUnit TU = clang_parseTranslationUnit(Index, 0, 
          argv, argc, 0, 0, CXTranslationUnit_None);

  // Set the file you're interested in, and the code location:
  CXFile file = clang_getFile(TU, argv[1]);
  int line = 5;
  int column = 6;
  CXSourceLocation location = clang_getLocation(TU, file, line, column);
  CXCursor cursor = clang_getCursor(TU, location);

  std::set<std::string> qualifiers;
  GetMethodQualifiers(TU, qualifiers, cursor);

  for (std::set<std::string>::const_iterator i = qualifiers.begin(); i != qualifiers.end(); ++i) {
    std::cout << *i << std::endl;
  }

  clang_disposeTranslationUnit(TU);
  clang_disposeIndex(Index);
  return 0;
} 
```

**使用`libclang`的统一符号解析 (USR)**

这种方法涉及使用解析器本身，并从 AST 中提取限定符信息。

*优点*：似乎适用于带有预处理器指令的代码，至少对于简单的情况。

*缺点*：我的解决方案解析了未记录的 USR，并且将来可能会更改。尽管如此，编写单元测试来防止这种情况仍然很容易。

看一下`$(CLANG_SRC)/tools/libclang/CIndexUSRs.cpp`，它包含生成 USR 的代码，因此包含解析 USR 字符串所需的信息。[具体来说，限定符部分的第 523-529 行（在从www.llvm.org](http://www.llvm.org)下载的 LLVM 3.1 的源代码中）。

在某处添加以下函数：

```
void parseUsrString(const std::string& usrString, bool* isVolatile, bool* isConst, bool *isRestrict) {
  size_t bangLocation = usrString.find("#");
  if (bangLocation == std::string::npos || bangLocation == usrString.length() - 1) {
    *isVolatile = *isConst = *isRestrict = false;
    return;
  }
  bangLocation++;
  int x = usrString[bangLocation];

  *isConst = x & 0x1;
  *isVolatile = x & 0x4;
  *isRestrict = x & 0x2;
} 
```

并且在`main()`,

```
CXString usr = clang_getCursorUSR(cursor);
const char *usr_string = clang_getCString(usr);
std::cout << usr_string << "\n";
bool isVolatile, isConst, isRestrict;
parseUsrString(usr_string, &isVolatile, &isConst, &isRestrict);
printf("restrict, volatile, const: %d %d %d\n", isRestrict, isVolatile, isConst);
clang_disposeString(usr); 
```

继续`Foo::qux()`从

```
#define BLA const

class Foo {
public:
    void bar() const;
    void baz() volatile;
    void qux() BLA volatile;
}; 
```

产生预期的结果

```
c:@C@Foo@F@qux#5
restrict, volatile, const: 0 1 1 
```

*警告*：您可能已经注意到`libclang`'s source 建议我的代码应该是`isVolatile = x & 0x2`而不是`0x4`，因此您可能应该将 0x4 替换为 0x2。我的实现（OS X）可能已经替换了它们。

# excel - VBA Excel宏中Split()的字符串长度限制

> ID：12026552
> 
> 赞同：0
> 
> 时间：2012-08-19T12:41:22.883
> 
> 标签：excel, vba

我目前正在重建一个 excel 宏，它解析文本文件并根据特定规则集填充 Excel 工作表中的单元格。我的新版本应该每天处理更长的时间跨度的文件，而不是一周的总结结果。但是，似乎自从我得到这些较大的文件后，拆分命令就不会返回任何内容。

```
 rawDataArray = Split(rawData, Chr$(10)) 
```

在逐步浏览时，我可以清楚地看到 rawData 字符串包含我从源文本文件加载的数据，我还在十六进制编辑器中打开了该文件，以验证 chr(10) 是否存在。执行操作后，rawDataArray 仍然为空。

以前的版本只处理最多几千个字符的文本文件，而且运行完美。当前文件大约有 500.000 个字符长，这是唯一（嗯，第一个；））行不起作用，这让我想到 split 命令可以处理的字符串长度可能存在上限。这可能是真的吗？如果是这样，它有多长？

也可能是因为我们在我的办公室从 Office 2007 切换到了 Office 2010？我不知道 vbscript 版本的行为是否相同，我想这也可能是一个因素。

提前非常感谢！

编辑：我不确定是否习惯用解决方案回答您自己的帖子，但是，这里有。

似乎 split 命令无法处理这么大的字符串，我试图将文件减少到 ~7k 字符并且有效。我还没有找到确切的数字，但至少这似乎是原因。另外，感谢 Avner 对 vbscript 与 VBA 的更正，在编程/脚本方面我是自学的，所以现在我学到了一些新东西！

感谢 Avner 的更正

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T12:53:20.263

Excel 宏是用 VBA 而非 VBScript 编写的。VBA 的限制对您来说应该不是问题。如果有的话，您的计算机的 RAM 可能是一个限制。这是来自 Office 2010 的[VBA 文档](http://msdn.microsoft.com/en-us/library/gg251467.aspx)，对于 Office 2007 也是如此：

> 字符串有两种：可变长度字符串和固定长度字符串。
> 
> *   可变长度字符串最多可包含大约 20 亿 (2^31) 个字符。
> *   一个固定长度的字符串可以包含 1 到大约 64K (2^16) 个字符。

我猜问题是该`Split`方法不能很好地处理大字符串。也许最好`Mid`在循环中使用将其拆分为块，然后`Split`单独调用，尽管这还有其他问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T11:06:35.007

Split 可以处理任意大小的字符串。我刚刚用一个简单的 sub 检查了 split 函数（在 Excel 2010 中，但我认为 2007 应该是一样的）

```
Public Sub TestSplit()

    Dim Count As Long
    Count = 1000000

    Dim x
    ReDim x(Count)

    Dim i As Long
    For i = 1 To Count
        x(i) = "My String " & i
    Next

    Dim RawString As String
    RawString = Join(x, Chr(10))

    Debug.Print "RawString length = " & Len(RawString)

    Dim SplitArray
    SplitArray = Split(RawString, Chr(10))

    Debug.Assert UBound(SplitArray) = Count

End Sub

Output:
RawString length = 16888896 
```

阅读您的源文件必须有一些东西。您确定 rawData 变量中有 chr(10) 字符吗？我建议你用 instr 函数检查它：

```
InStr(RawString, Chr(10)) 
```

它应该大于 0。但即使在这种情况下，rawDataArray 也应该包含一个元素和整个 rawData 字符串。

# sql - 如何在单个表上执行 UNION？

> ID：12026555
> 
> 赞同：11
> 
> 时间：2012-08-19T12:42:01.937
> 
> 标签：sql, sql-server-2008, union

我只需要显示居住在“Peters”或“Crows”大道的所有客户的姓名和地址以及出生日期。

这很好，我是这样做的：

```
SELECT Customers.FirstName, Customers.Surname,
       Customers.CustomerAddress, Customers.DOB
FROM Customers
WHERE 
(  Customers.CustomerAddress LIKE '%'+ 'Peters' + '%' 
or Customers.CustomerAddress LIKE '%'+ 'Crows'+ '%') 
```

但后来我读得更努力了，它说：

> 使用 UNION 查询生成结果。

所以我读了一些关于`UNION`s 的内容，但大多数情况下我看到两个*SELECT*查询的返回值**必须具有相同的长度**，并且通常示例使用 2 个不同的表？

所以我需要`UNION`在同一张桌子上执行一个，这样所有在他们的地址中带有*Peters*和*Crows字样的客户都会显示出来。*我试过：

```
SELECT Customers.CustomerAddress
FROM Customers
WHERE 
(  Customers.CustomerAddress LIKE '%'+ 'Peters' + '%'
or Customers.CustomerAddress LIKE '%'+ 'Crows'+ '%')
UNION
SELECT Customers.FirstName, Customers.Surname,
       Customers.CustomerAddress, Customers.DOB
FROM Customers 
```

但我得到错误：

> 使用 UNION、INTERSECT 或 EXCEPT 运算符组合的所有查询必须在其目标列表中具有相同数量的表达式。

这是可以理解的，因为我的第一个*SELECT*只返回 3 个结果（即我正在寻找的结果），而另一个返回所有地址（包括我需要的那些）。

所以我的确切问题是，我如何在同一张桌子上执行 a （客户总共 10 条记录），以便显示地址中包含*Peters*和*Crows*`UNION`字样的所有客户？（其中 3 条记录符合条件，其他 7 条不符合）

 *** * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-19T12:51:04.193

```
 SELECT Customers.FirstName, Customers.Surname,  Customers.DOB, Customers.CustomerAddress
 FROM Customers
 WHERE Customers.CustomerAddress LIKE '%'+ 'Main' + '%'  
 UNION
 SELECT Customers.FirstName, Customers.Surname,  Customers.DOB, Customers.CustomerAddress
 FROM Customers
 WHERE Customers.CustomerAddress LIKE '%'+ 'Gladys'+ '%' 
```

在联合中，两个或多个查询在`SELECT`语句中应始终具有相同数量的字段。该`WHERE`子句似乎是您的联合查询中的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T12:50:00.673

如果您希望能够合并这两个集合，则需要两个返回的集合具有相同的格式。第一组只返回一个客户地址，例如：

```
123 Main St 
```

但是从第二个查询返回的集合返回三列：名字、姓氏、出生日期。例如：

```
John, Doe, 1970-12-31 
```

因此，让两个查询返回相同的列集，以便它们可以合并。例如，包括所有 4 列：

```
Jane, Smith, 1975-11-22, 123 Main St 
```

和

```
John, Doe, 1970-12-31,  89 Elm St 
```

如果列数相同，顺序相同，类型相同，则可以使用 UNION 合并这两个集合。

```
Jane, Smith, 1975-11-22, 123 Main St
John, Doe, 1970-12-31,  89 Elm St 
```

还请务必阅读并区分 UNION 和 UNION ALL。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-22T20:04:59.217

我认为问题本身并不完全是 where 子句，而是您尝试对需要不同数据集的两个查询的结果执行 UNION 的事实。我可能错了，但据我了解，UNION 所做的是垂直粘贴两个表格，因此如果您要正常工作，它们必须具有相同的形状。

查询的第一部分仅返回`CustomerAddress`符合您条件的客户：

```
SELECT Customers.CustomerAddress
FROM Customers
WHERE 
(  Customers.CustomerAddress LIKE '%'+ 'Peters' + '%'
or Customers.CustomerAddress LIKE '%'+ 'Crows'+ '%') 
```

而这个查询：

```
SELECT Customers.FirstName, Customers.Surname,
       Customers.CustomerAddress, Customers.DOB
FROM Customers 
```

返回四个不同的列并且没有限制，这不会阻止联合的发生*，因为您的第一个查询也有 4 列*，但不会显示您要查找的内容**

# c - 指针问题和困惑

> ID：12026556
> 
> 赞同：1
> 
> 时间：2012-08-19T12:42:11.687
> 
> 标签：c, pointers, null

这可能很简单，但它让我感到困惑。

```
int x;
int *p = NULL;
int *q = &x; 
```

什么时候发生

```
 q = p;   // Address where q points to equals NULL  .
 &x = q;  // I don't think this is possible  .
 *q = 7;  // Value of memory where q is pointing to is 7?  
 *q = &x  // That's just placing the address of x into memory where q points to right?  
 x = NULL; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T12:47:05.447

`q = p;`

是的。`q`现在点到`NULL`，就好了`p`。

`&x = q;`

不合法。您不能重新分配变量的地址。

`*q = 7;`

是的，将 q 指向的地址的内存设置为 7。如果`q`指向，`NULL`那么这将导致错误。

`*q = &x;`

~~不合法，`q`指向一个整数，所以你不能给它分配地址。~~这是合法的，因为存在从`int*`( `&x`) 到`int`( `*q`) 的隐式转换，但不是很安全。在 C++ 中，这只是一个简单的错误。您说得对，它将`x`(cast to an `int`) 的地址放入 . 指向的内存中`q`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T12:52:59.310

添加到彼得斯的解释

`*q=&x`

这在`*q=(int)&x`.However 在 32 位操作系统上是合法的，写起来很好`*q=(long)&x`。

```
Note:Some Compilers wont give you an error on  *q=&x 
```

`x = NULL;`
x 将变为 0；

# c++ - 错误：从 'const char*' 到 'char' 的无效转换 [-fpermissive]

> ID：12026567
> 
> 赞同：3
> 
> 时间：2012-08-19T12:43:45.163
> 
> 标签：c++

```
#include<stdio.h>
#include<iostream>
#include<fstream>
#include<string.h>
using namespace std;

class base {
 public:
    int lookup(char c);
}; // class base

int base::lookup(char c)
{
    cout << c << endl;
} // base::lookup

int main() {
    base b;
    char c = "i";
    b.lookup(c);
} // main 
```

在编译上面的代码时，我得到以下错误：

> g ++ -c test.cpp test.cpp：在函数'int main（）'中：test.cpp：20：10：错误：从'const char *'到'char'的无效转换[-fpermissive]

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-19T12:45:57.850

尝试更换

```
 char c = "i"; 
```

和

```
 char c = 'i'; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-19T12:46:08.557

`"i"`不是字符，它是一个字符数组，基本上衰减为指向第一个元素的指针。

你几乎肯定想要`'i'`。

Alternatively, you may actually *want* a lookup based on more than a single character, in which case you *should* be using `"i"` but the type in that case is `const char *` rather than just `char`, both when defining `c` and in the `base::lookup()` method.

However, if that were the case, I'd give serious thought to using the C++ `std::string` type rather than `const char *`. It may not be *necessary,* but using C++ strings may make your life a lot easier, depending on how much you want to manipulate the actual values.

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-19T12:45:42.997

`"i"`是一个字符串文字，你可能想要一个字符文字：`'i'`.

字符串文字是空终止的数组`const char`（在该表达式中使用时会隐式转换为`char const*`，因此会出现错误）。

char 文字只是`char`s

# java - 未找到根目录中的属性文件

> ID：12026569
> 
> 赞同：1
> 
> 时间：2012-08-19T12:44:19.970
> 
> 标签：java, file-io, properties

我的属性文件位于我的 webapp 的根目录下。

```
properties.load(new FileInputStream("myfile.properties")); 
```

给出：

```
java.io.FileNotFoundException: myfile.properties
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(FileInputStream.java:138)
    at java.io.FileInputStream.<init>(FileInputStream.java:97) 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T12:49:14.837

将您的属性文件放到 WEB-INF/classes/ 目录中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T12:52:52.720

作为一般经验法则：

1.  添加`System.out.println(System.getProperty("user.dir"));`到您的代码中。
2.  转到打印出来的目录。
3.  将您的属性文件复制到该位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T12:46:44.680

你试过“/myfile.properties”吗？您引用文件的方式将解析相对于类所在位置的路径，AFAIK。

# visual-c++ - MFC - “hello world”中的 CFrameWnd::LoadFrame() 问题

> ID：12026570
> 
> 赞同：1
> 
> 时间：2012-08-19T12:44:27.643
> 
> 标签：visual-c++, mfc

因此，这是我的代码（为简单起见，我将其全部放入一个文件中）：

```
#include <afxwin.h>
#include "resource.h"

class CMainWnd : public CFrameWnd
{
};

class CApp : public CWinApp
{
public:
    virtual BOOL InitInstance()
    {
        CMainWnd* wnd = new CMainWnd();
        if (!wnd->Create(0, _T("test"))) return FALSE;
        m_pMainWnd = wnd;
        wnd->ShowWindow(SW_SHOW);
        wnd->UpdateWindow();
        return TRUE;
    }
};

CApp app; 
```

它使用默认参数和标题“test”创建简单的窗口。完美运行。但是，我想从资源中加载我的窗口，所以我可以给它一些东西。我替换：

```
 if (!wnd->Create(0, _T("test"))) return FALSE; 
```

和

```
 if (!wnd->LoadFrame(IDD_CLIENTWINDOW)) return FALSE; 
```

（`IDD_CLIENTWINDOW`是我在资源中的对话的 ID）。LoadFrame 返回 FALSE，程序退出。输出中有调试消息：

```
Warning: failed to load menu for CFrameWnd. 
```

`IDD_CLIENTWINDOW`但是我创建的对话框中没有菜单。如何正确加载框架？我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T04:09:06.450

你正在尝试的东西是行不通的。带有对话框 ID 的 LoadFrame() 不会加载对话框。如果要使用对话框，请使 CWnd 从 CDialog 派生或使用从 CFormView 派生的视图。您对 LoadFrame 的调用失败，因为您没有具有正确 ID 的菜单资源。但是，您并没有真正尝试这样做。

我建议您使用 AppWizard 生成基于对话框或基于 CFormView 的新应用程序，并查看生成的代码类型。您可以查看代码以了解您真正想要做什么。

# javascript - 在 Aptana Studio 中自动插入版本号

> ID：12026574
> 
> 赞同：2
> 
> 时间：2012-08-19T12:45:11.387
> 
> 标签：javascript, git, aptana, aptana3

假设我在我的 javascript/php/html 等顶部有一些评论，我想在 Aptana Studio 中添加自动版本号......我怎么能这样做。我所有的项目都在 Aptana 中使用 git，而我真的只想插入文件的 git 版本号？

在其他开发应用程序中，我可以在文件中执行类似`$VERSION`的操作，但在 Aptana 中找不到此参考。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T14:45:11.783

您可以设置一个过滤器驱动程序，以便用`$VERSION`从 git describe 推导出的当前版本号替换 ：

*   有关更多信息，请参阅“[是否可以使用 git / github 添加版本号](https://stackoverflow.com/a/6921307/6309)”`git describe`
*   有关内容过滤器驱动程序的示例，请参阅“[如何将修订和构建日期添加到源”](https://stackoverflow.com/a/2698081/6309)

但是，还有其他方法可以放置这些信息，如“[为 Git repos 启用 ident string](https://stackoverflow.com/questions/1792838/enable-ident-string-for-git-repos/1796675#1796675) ”中所述：

> 在产品中嵌入版本信息的推荐方法是为此使用构建系统；有关详细信息和替代方法，请参见下文。

# jquery - jQuery - 相同的效果，在多个 div 上

> ID：12026577
> 
> 赞同：0
> 
> 时间：2012-08-19T12:45:36.197
> 
> 标签：jquery, html, jquery-animate, slide

我最近一直在玩`jQuery`，我设法编写了一个简单的代码，它将移动/滑动（悬停）图像，揭示一些我隐藏在它后面的数据。

我想在作品集页面上使用它来展示一些作品。

我的问题是，该脚本在单个 DIV 上运行良好，但是，它似乎不适用于我在代码中调用的具有相同 ID 的其他 DIV。

这是我的 Javascript 代码：

```
<script type="text/javascript">
$(document).ready(function(){     
    $('#featured-work-thumbnail').hover(function(){
        $(this).children('.front').stop().animate({'top' : '300px'}, 1000, 'easeInOutExpo');
    }, function(){
        $(this).children('.front').stop().animate({'top' : '0px', 'left' : '0px'}, 1000, 'easeInOutExpo');
    });
});
</script> 
```

这是 DIV 正在使用的示例：

```
<div id="featured-work-thumbnail" class="wrap">
    <div class="details">
        <h1>Website Title</h1>
        <p>Website Desc</p>
        <a href="#">Visit Website</a>
    </div>
<img src="images/thumbnails/thumb1.png" class="front" />
</div> 
```

当我将鼠标悬停在图像上时，它会向下滑动，露出`class="details"`它下面的 DIV。这正是我所追求的，但是正如我所提到的。它只适用于我的 DIV 的一个副本。

提前感谢您的时间和帮助。非常感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T12:52:19.267

尝试，

```
$(document).ready(function(){
$('#featured-work-thumbnail').hover(function(){
$(this).children('.front').stop().animate({'top' : '300px'}, 1000, 'easeInOutExpo');
$(this).children('.front').stop().animate({'top' : '0px', 'left' : '0px'}, 1000, 'easeInOutExpo');
});
}); 
```

# javascript - 如何在事件处理程序中获取 javascript 事件对象？

> ID：12026583
> 
> 赞同：1
> 
> 时间：2012-08-19T12:46:05.803
> 
> 标签：javascript, event-handling

我有一个带有 onclick 参数的 div：

```
<div onclick="some_function()"></div> 
```

如何访问函数内的事件对象？我需要它来获取 event.target

```
function some_function() 
{
event = event || window.event;
var target = event.target || event.srcElement;
//does not work in IE and Firefox, but works in chrome
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T12:47:44.570

这边走：

```
<div onclick="some_function(event)"></div>

function some_function(evt) 
{
    // do something with evt (the event passed in the function call)
} 
```

请注意，参数名称必须`event`在函数调用中。在事件处理程序中，您可以使用您想要的名称。

一个活生生的例子：http: [//jsfiddle.net/davidbuzatto/KHyAb/](http://jsfiddle.net/davidbuzatto/KHyAb/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-30T12:40:45.503

如果我们使用事件监听器，那么您在 'this' 中有 html 元素，在 'event' 中有事件对象。

```
<a id="mya" href="#">Link</a>
var myA= document.querySelector("#mya");
myA.addEventListener("click", some_function);
function some_funtion() {
  //Here the html element is: this
  //Here the event object is: event
  //event.target is not always equal to this
}
<div id="mydiv">click here <span>then here</span></div>
var myDiv = document.querySelector("#mydiv");
myDiv.addEventListener("click", other_function);
function other_function() {
    alert(this === event.target);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T12:48:01.483

使用事件到达目标。当心目标与 currentTarget 问题：

[https://developer.mozilla.org/en-US/docs/Web/API/Event/currentTarget](https://developer.mozilla.org/en-US/docs/Web/API/Event/currentTarget)

```
 <div onclick="some_function(event)"></div>

   function some_function(event) 
   {
       // event.target is the DOM element that triggered the event
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-19T13:03:13.123

使用 event 和 this，两者

```
document.querySelector("div").addEventListener("click", function(event) {

  some_function(event, this);

}, false);

function some_function(currentEvent, currentObject) {

  alert("Object is: " + currentObject.nodeName);
  alert("Event is: " + currentEvent.type);

};
```

```
<div>Click Me</div>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-30T10:27:25.487

```
<div onclick="some_function(this, event)"></div>
function some_function(elem, e) 
{
    //You have both: html element (elem), and object event (e)
    //elem is not always equal to e.target
}

<div onclick="alert(this === event.target);">click here <span>then here</span></div> 
```

# browser - 是否有任何浏览器在链接中存在 url 编码的 UTF-8 问题

> ID：12026584
> 
> 赞同：0
> 
> 时间：2012-08-19T12:46:06.997
> 
> 标签：browser, urlencode

我们的网站刚刚推出了一个新版本，现在页面的 url 中有 Unicode。我看到 Rails 在渲染锚标签时正确地转义了这些 UTF-8 字符。

```
/regions/%E4%B8%AD%E5%BD%B0%E6%8A%95/ 
```

但是，我仍然看到大量带有错误编码网址的流量：

```
/regions/%A4%A4%B9%FC%A7%EB/ 
```

显然这是同一个地址，但以非 UTF-8 编码，然后 url 转义。

**问题**

我想知道是否有任何旧浏览器，它将正确转义 url，将其取消转义以获取 UTF-8，将其编码为其他编码，然后在请求服务器时对其进行 url-escape？

否则我不知道如何解释这些流量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T08:33:43.193

我在 Internet Explorer 6 和 7 中进行了测试。我还测试了“始终以 UTF-8 形式发送 URL”选项。没有一个组合导致不正确的编码请求。

我猜这是一些处理解码但不编码的网络爬虫。

# python - 从 python 脚本中检索当前 Pyramid ini 设置

> ID：12026591
> 
> 赞同：0
> 
> 时间：2012-08-19T12:47:26.110
> 
> 标签：python, pyramid

我有一个 python 脚本，作为 tummy 的 memcached python 包装器的附加包装器。我有这样的事情：

```
class CacheIt(object):
  def __init__(self, host=<hostname>, port=11211, **kwargs):
    ... 
```

我希望能够从我的 ini 文件中检索 memcached 主机名，但我不想指定哪个文件，因为它可能取自 development.ini 或 production.ini 或 test.ini。我需要当前ini文件的“查找”是动态的，这意味着应用程序应该知道当前的ini文件是什么，从而从设置中检索主机名。

我不能使用线程本地 get_current_request 并反过来检索设置文件，因为在应用程序启动时返回值为 None （我将我的类的实例附加到 NewRequest 事件）。

这：

```
from paste.deploy.loadwsgi import appconfig
config = appconfig('config:development.ini', 'myapp', relative_to='.') 
```

不过，我需要先知道路径才能使用它。这意味着如果我使用它，我需要在每次部署时将 development.ini 的值更改为 production.ini，如果我进行测试则更改为 test.ini。当然，必须有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:20:25.477

不是最好的方法，但这里有一个想法。您必须将配置文件的路径保存在某处。

您甚至可以将配置文件的路径保存在配置文件中...

类似的东西：

```
config_file=%(here)s/development.ini 
```

加载此文件时，将在`config.registry.settings`. 从那里你有两个选择。您可以像`pid`使用它一样编写一个文件，`pid`但使用您当前的设置文件。或者您可以创建一个 api 调用以从实时应用程序中查询设置。老实说，我会把它写在一个文件中。从应用程序查询设置似乎不太好。

然后您必须打开该文件并读取 file.ini 的路径，然后将其作为配置文件加载。

或者你可以尝试这样的事情：

```
ps -ax | egrep "`cat pyramid.pid`.*[s]tart" | cut -d" " -f14 
```

从 python 运行时，您可以省略“cut”并自己从 python 中剪切它以获取配置 ini 文件。

换句话说，您将获得用于包含在 pyramid.pid 中的 pid 的命令行，该文件只会在守护程序模式下创建。当你有命令行时，你可以获得配置文件等等......缺点是它只适用于 pserve 或任何实际保存 PID 并使用配置作为参数的东西。如果您使用的是 uWSGI 等，则可能无法执行此类操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T07:23:19.603

在您的事件 ( `NewRequest`) 中，您可以检索注册表以及其中的所有设置。

```
event.request.registry 
```

将包含完整的注册表。

* * *

我的另一个建议是，您创建一个类的实例，并`main()`在其余配置完成后进行所有配置。这也是 SQLAlchemy 设置的工作方式。举个简单的例子，看看[CouchDB 和 Pyramid](http://docs.pylonsproject.org/projects/pyramid_cookbook/en/latest/database/couchdb.html)的集成。[Pyramid 和 .ini 配置](https://stackoverflow.com/questions/7570930/pyramid-and-ini-configuration)中提供了相同的答案。[`ApplicationCreated`](http://pyramid.readthedocs.org/en/latest/api/events.html#pyramid.events.ApplicationCreated)如果您想在配置完成后但在发出任何请求之前立即设置内存缓存，您也可以附加到该事件。

# php - Cakephp 无法通过 Belongsto 提取关联的模型详细信息

> ID：12026594
> 
> 赞同：1
> 
> 时间：2012-08-19T12:47:53.543
> 
> 标签：php, cakephp

我在我的模型中定义了以下内容：

```
public $belongsTo = array(
        'User' => array(
            'className' => 'User',
            'foreignKey' => 'user_id',
            'conditions' => '',
            'fields' => '',
            'order' => ''
        ),
        'GroupBuy' => array(
            'className' => 'GroupBuy',
            'foreignKey' => 'group_buy_id',
            'conditions' => '',
            'fields' => '',
            'order' => ''
        )
    ); 
```

但是，这不会从 GroupBuy 或 User 表中提取详细信息，而是仅获取此 GroupBuyUser 模型中定义的 user_id 和 group_buy_id。

我在下面设置了递归两个：

```
$this->GroupBuyUser->recursive = 2; 
```

我在这里做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T16:41:42.803

在您的 中尝试以下代码`GroupBuyUser Model`：

```
public $belongsTo = array(
    'User' => array(
        'className' => 'User',
        'foreignKey' => 'user_id',
    ),
    'GroupBuy' => array(
        'className' => 'GroupBuy',
        'foreignKey' => 'group_buy_id'
    )
); 
```

您不需要将递归属性设置为 2。这基本上是在我们想要从更深层次的关联模型中获取结果时使用的。

# api - wso2 api mgr：oauth 不工作

> ID：12026596
> 
> 赞同：0
> 
> 时间：2012-08-19T12:48:15.943
> 
> 标签：api, oauth, wso2, wso2-am

在安装 wso2 mgr 并在 jdbi 中进行小改动以使用我们的 mysql 服务器之后，除了 oauth 之外，一切“似乎”都能正常工作。

在 carbon web UI 中，当我单击“oauth”上的左侧菜单时，我收到一条错误消息

```
System Error Occurred - Error occurred while reading OAuth application data 
```

我看了其他帖子，[看到了这个](http://blog.thilinamb.com/2012/08/configuring-oauth-20-access-token-store.html)。我看了看我在`${WSO2_IS_HOME}/repository/conf/identity.xml`哪里看到我有一个条目 `<skipdbschemacreation>true</skipdbschemacreation>`

我尝试将其更改为 false 并且没有更改...

有人对 wso2 apu mgr 有这个问题吗？

知道如何在 api mgr 中设置 oauth 吗？

我必须安装 wso2 身份管理器吗？

----更新1 ------

似乎将此标志更改为 false 会给我们的数据库带来问题，因为我们现在收到一条错误消息。当您将此标志重置为 true 时，db 错误仍然存​​在...

错误消息说

[2012-08-19 15:40:13,649] 错误 - JDBCResourceDAO 无法删除 id 为 688 的资源。无法执行语句：无法写入二进制日志，因为 BINLOG_FORMAT = STATEMENT 并且至少一个表使用仅限于行的存储引擎- 基于日志记录。当事务隔离级别为 READ COMMITTED 或 READ UNCOMMITTED 时，InnoDB 仅限于行日志记录。java.sql.SQLException：无法执行语句：无法写入二进制日志，因为 BINLOG_FORMAT = STATEMENT 并且至少一个表使用仅限于基于行的日志记录的存储引擎。当事务隔离级别为 READ COMMITTED 或 READ UNCOMMITTED 时，InnoDB 仅限于行日志记录。

后来 wso2 启动脚本说：

[2012-08-19 15:40:13,654] 致命 - CarbonServerManager WSO2 Carbon 初始化失败 org.wso2.carbon.registry.core.exceptions.RegistryException：无法删除 ID 为 688 的资源。无法执行语句：无法写入二进制日志，因为 BINLOG_FORMAT = STATEMENT 并且至少一个表使用仅限于基于行的日志记录的存储引擎。当事务隔离级别为 READ COMMITTED 或 READ UNCOMMITTED 时，InnoDB 仅限于行日志记录。

稍后在我们拥有的同一个启动脚本中

org.eclipse.osgi.framework.eventmgr.EventManager$EventThread.run(EventManager.java:340) 原因：java.sql.SQLException：无法执行语句：由于 BINLOG_FORMAT = STATEMENT 和至少一个表，无法写入二进制日志使用仅限于基于行的日志记录的存储引擎。当事务隔离级别为 READ COMMITTED 或 READ UNCOMMITTED 时，InnoDB 仅限于行日志记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T11:52:45.083

skipdbschemacreation属性是在引入 WSO2 ***APIManager***之后专门引入的。这是因为 WSO2 APIManager 有一个单独的 sql 脚本来创建所有必需的表（包括 OAuth2.0 相关表）。因此有必要在服务器启动时跳过 OAuth 组件的模式创建步骤。因此，此属性在 WSO2 APIManager 中默认设置为*“true”* ，而在 WSO2 Identity Server 中默认设置为*false是正确的。*

您面临的问题应该是因为指向 MySQL 数据库的配置不正确。如果您使用的是 MySQL 数据库，则应配置其设置的位置是**{WSO2_APIMANAGER_HOME}/repository/conf/datasources/master-datasources.xml**。更改名称为 WSO2AM_DB 的数据源的设置。这是具有 OAuth2.0 相关表的数据源。

例如

```
 <datasource>
            <name>WSO2AM_DB</name>
            <description>The datasource used for API Manager database</description>
            <jndiConfig>
                <name>jdbc/WSO2AM_DB</name>
            </jndiConfig>
            <definition type="RDBMS">
                <configuration>
                    <url>jdbc:mysql://localhost:3306/wso2am_db</url>
                    <username>admin</username>
                    <password>admin@123</password>
                    <driverClassName>com.mysql.jdbc.Driver</driverClassName>
                    <maxActive>50</maxActive>
                    <maxWait>60000</maxWait>
                    <testOnBorrow>true</testOnBorrow>
                    <validationQuery>SELECT 1</validationQuery>
                    <validationInterval>30000</validationInterval>
                </configuration>
            </definition>
        </datasource> 
```

我假设您已经通过运行**{WSO2_APIMANAGER_HOME}/dbscripts/apimgt/mysql.sql**中提供的 mysql.sql 脚本创建了所需的数据库模式。

为 WSO2 APIManager 创建 MySQL 数据库模式：

1.  导航到您拥有用于创建 WSO2AM_DB 的 mysql 脚本的位置。

2.  从该位置打开命令提示符并从 cmd 提示符登录到 mysql

    mysql -u 根目录 -p

3.  创建一个数据库。创建用户并授予访问权限。

    创建数据库apimgt；

4.  `GRANT ALL ON apimgt.* TO admin@localhost IDENTIFIED BY "admin";`

5.  运行 mysql.sql 脚本。这将配置数据库。

    使用 apimgt；

    源mysql.sql；

# google-apps-script - 访问 Google 通讯录中的 Google+ 数据

> ID：12026598
> 
> 赞同：1
> 
> 时间：2012-08-19T12:48:18.357
> 
> 标签：google-apps-script, google-plus

如果联系人拥有公开的 Google+ 个人资料并且此数据出现在您的 Google 通讯录中，是否可以通过 Google Apps 脚本访问该数据？如果是这样，怎么做？

例如，我添加了一个只有全名和电子邮件地址的联系人。该联系人拥有公开的 Google+ 个人资料，其中包含电话号码。他们的电话号码将显示在我的 Google 通讯录中（包括从 Google 通讯录中搜索），但以下代码不会返回他们的电话号码：

```
var contacts = ContactsApp.getContacts();
for (i in contacts) {
  phones = contacts[i].getPhones();
  for (j in phones) {
    Logger.log(phones[j].getPhoneNumber());
  }
} 
```

如何通过 Google Apps 脚本访问 Google+ 电话号码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T14:17:03.803

无法检索此信息。至少，不是直接通过 Google Apps 脚本联系人服务。

我也认为这应该是可能的。[请在 Apps 脚本问题跟踪器](http://code.google.com/p/google-apps-script-issues/issues/list)上打开增强请求。

# ios - iOS：特定标签的自定义字体

> ID：12026599
> 
> 赞同：0
> 
> 时间：2012-08-19T12:48:23.573
> 
> 标签：ios, fonts, objective-c++

我在 OS 上查看了一些示例，也关注[了这个](http://kgriff.posterous.com/45359635)示例，但我想知道的是如何仅为一个特定标签设置自定义字体。

此行应该更改字体：

```
[UIFont fontWithName:@"Cloister Black" size:64.0] 
```

但我不希望一切都受到影响。任何想法我如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T12:51:50.650

在标签上设置字体就像修改该标签的[" `font`" 属性](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UILabel_Class/Reference/UILabel.html#//apple_ref/occ/instp/UILabel/font)一样简单（我已经为您链接了 Apple 的文档）。

例如：

```
labelIWantToModify.font = [UIFont fontWithName:@"Cloister Black" size:64.0]; 
```

我希望您指的是一个特定的标签，而不是出现在标签中的字符串的一部分或一部分，这是一个单独的（属性字符串）事物。

# php - 如果页面有多个表单，则使用 jquery/ajax 提交表单而不刷新

> ID：12026600
> 
> 赞同：3
> 
> 时间：2012-08-19T12:48:37.830
> 
> 标签：php, jquery, ajax, forms, submission

大家好，我知道如果页面上只有一个表单，那么提交表单而不刷新非常容易，但是如果页面上有多个表单怎么办。我使用以下代码提交表单，如果页面上只有一个表单，它可以正常工作。当页面上有多个表单时，如何更改它以使其工作。提前致谢。

```
function processForm() { 
        $.ajax( {
            type: 'POST',
            url: form_process.php,
            data: 'user_name=' + encodeURIComponent(document.getElementById('user_name').value),
            success: function(data) {
                $('#message').html(data);
            }
        } );
}

<form action="" method="post" onsubmit="processForm();return false;">
<input type='text' name='user_name' id='user_name' value='' />
<input type='submit' name='submit' value='submit'/>
</form>
<div id='message'></div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T21:39:53.557

只需自定义您的函数并添加参数，例如`formid`在函数中获取表单数据以传递`processForm("id of the form");`

```
function processForm(formId) { 
    //your validation code
    $.ajax( {
            type: 'POST',
            url: form_process.php,
            data: $("#"+formId).serialize(), 
            success: function(data) {
                $('#message').html(data);
            }
        } );
    }

<form action="" id="form1" method="post" onsubmit="processForm('form1');return false;">
<input type='text' name='user_name' id='user_name' value='' />
<input type='submit' name='submit' value='submit'/>
</form>

<form action="" id="form2" method="post" onsubmit="processForm('form2');return false;">
<input type='text' name='user_name' id='user_name' value='' />
<input type='submit' name='submit' value='submit'/>
</form>
<form action="" id="form3" method="post" onsubmit="processForm('form3');return false;">
<input type='text' name='user_name' id='user_name' value='' />
<input type='submit' name='submit' value='submit'/>
</form>
<div id='message'></div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T12:54:09.400

你所拥有的应该在多种表单上工作，但是如果使用 jQuery 应用事件侦听器，它会更好，更容易调试：

```
$('form').submit(processForm); // listen to each form’s submit

function processForm(e) { 
    e.preventDefault(); // prevents default submit action
    $.ajax( {
        type: 'POST',
        url: form_process.php,
        data: 'user_name=' + encodeURIComponent(document.getElementById('user_name').value),
        success: function(data) {
            $('#message').html(data);
        }
    } );
} 
```

HTML（没有丑陋的 onsubmit 属性）：

```
<form action="" method="post">
<input type='text' name='user_name' id='user_name' value='' />
<input type='submit' name='submit' value='submit'/>
</form> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-11T17:51:19.800

只是想补充一点，如果您在一页上有多个表单，您可以设置一个函数，通过获取表单的`action`值来独立处理所有表单。如下（使用 jQuery 1.8.3 测试）：

```
 $('form').submit(function(){
   var action = $(this).attr("action")
   $.ajax({
     url: action,
     type:'POST',
     data: $(this).serialize(),
     success: function(){
            //alert message
        }                   
     })
   return false
 }) 
```

希望这可以帮助某人！

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-19T16:26:45.023

`processForm(form_id)`在调用和使用`id`序列化表单时添加 form_id 。

```
function processForm(form) { 
    $.ajax( {
        type: 'POST',
        url: form_process.php,
        data: $(form).serialize(),
        success: function(data) {
            $('#message').html(data);
        }
    } );
    return false;
}
<form action="" method="post" onsubmit="processForm(this)">
  <input type="text" name="user_name" id="user_name1" value="">
  <input type="submit" name="submit" value="submit" >
</form>
<form action="" method="post" onsubmit="processForm(this)">
  <input type="text" name="user_name" id="user_name2" value="">
  <input type="submit" name="submit" value="submit" >
</form>
<div id='message'></div> 
```

[jsFiddle](http://jsfiddle.net/abhishekchand/qQrFn/1/)

# javascript - Backbone View 触发事件两次

> ID：12026604
> 
> 赞同：2
> 
> 时间：2012-08-19T12:49:21.590
> 
> 标签：javascript, backbone.js

我有一个通过路由初始化的主干视图，但是当我导航到另一条路由并通过链接再次返回到前一个路由时，视图中的事件被触发两次 这是我的路由器

```
define(['underscore','backbone','views/projects/view_project',
    'views/projects/project_tasks','views/projects/project_milestones',
    'views/projects/project_tasklists','views/projects/project_documents'
    ],
    function( _,Backbone,ProjectTasks,ProjectMilestones,
        ProjectTasklists,ProjectDocuments) {

    var ProjectRouter = Backbone.Router.extend({
        initialize: function(projects) {
            if(projects) {
                this.projects = projects;
            }
        },
        //url routes mapped to methods
        routes: {
            "project/:id":"get_project",
            "project/:id/milestones":"get_project_milestones",
            "project/:id/tasks":"get_project_tasks",
            "project/:id/tasklists":"get_project_tasklists",
            "project/:id/documents":"get_project_documents"
        },

        get_project: function(id) {
            UberERP.UI.loadpage("#project-view");
            var project_view = new ProjectView(this.projects,id);
        },

        get_project_tasks: function(id) {
            UberERP.UI.loadpage("#project-tasks-view");
            var project_tasks_view = new ProjectTasks(id,this.projects);
        },

        get_project_tasklists: function(id) {
            UberERP.UI.loadpage("#project-tasklist-view");
            var project_tasks_view = new ProjectTasklists(id,this.projects);
        },

        get_project_milestones: function(id) {
            UberERP.UI.loadpage("#project-milestones-view");
            var project_milestones_view = new ProjectMilestones(id,this.projects);
        },

        get_project_documents: function(id) {
            UberERP.UI.loadpage("#project-documents-view");
            var project_documents_view = new ProjectDocuments(id,this.projects);
        }
    });

    return ProjectRouter;
}); 
```

和视野中的狙击手

```
events: {
          "click input[name=task]":"select_task",
          "click a.remove-icon":"remove_task",
          "click td.view-task":"view_task",
          "click #project-tasks-table .sort-by-status":"sort_by_status",
          "click #project-tasks-table .group-filter-btn":"sort_by_task_list"
        },

select_task: function( event ) {
            var el = $(event.currentTarget);
            row = el.parent('td').parent('tr');
            console.log(el.val());
            if(row.hasClass('active')) {
                row.removeClass('active');
            }
            else {
                row.addClass('active');
            }
        } 
```

我在 select_task 方法中有一行记录单击的输入元素的值。最初调用视图时，它可以正常工作并记录到控制台。但是在导航到另一条路线并返回后，单击时输入元素的值会被记录两次。有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T12:55:48.217

我认为您只是发现自己处于[Backbone ghost View 问题](https://www.google.com/search?&q=ghost+view+backbone)的中间。

当您从一条*路线*移动到另一条路线时，请尝试*删除*并*取消绑定*所有视图。

# android - android列表视图绑定数组失败

> ID：12026605
> 
> 赞同：0
> 
> 时间：2012-08-19T12:49:54.760
> 
> 标签：android, android-listview

我检查了每个 listView 绑定教程，但我在适配器部分有一个强烈的困惑。先看我的代码

```
ListView listView = (ListView) findViewById(R.id.mylist);
String[] values = new String[] { "Android", "iPhone", "WindowsMobile",
  "Blackberry", "WebOS", "Ubuntu", "Windows7", "Max OS X",
  "Linux", "OS/2" };

// First paramenter - Context
// Second parameter - Layout for the row
// Third parameter - ID of the TextView to which the data is written
// Forth - the Array of data
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
  android.R.layout.simple_list_item_1, android.R.id.text1, values);

// Assign adapter to ListView
listView.setAdapter(adapter); 
```

看到这条线

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
      android.R.layout.simple_list_item_1, android.R.id.text1, values); 
```

这是什么？`android.R.layout.simple_list_item_1`谁说我们可以参考`listeView`by **R** ???

为什么？？？请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T12:57:28.283

检查文档：

> 公共 ArrayAdapter（上下文上下文、int 资源、int textViewResourceId、T[] 对象）
> 
> 参数
> 
> 上下文 当前上下文。
> 
> resource 包含在实例化视图时使用的布局的布局文件的资源 ID。
> 
> textViewResourceId 要填充的布局资源中 TextView 的 id
> 
> objects 要在 ListView 中表示的对象。

[http://developer.android.com/reference/android/widget/ArrayAdapter.html#ArrayAdapter(android.content.Context](http://developer.android.com/reference/android/widget/ArrayAdapter.html#ArrayAdapter(android.content.Context) , int, int, T[])

您应该在布局文件 simple_list_item_1.xml 中有一个带有 id 的 textview `text1`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T12:58:00.733

代替

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
android.R.layout.simple_list_item_1, android.R.id.text1, values); 
```

尝试使用

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
android.R.layout.simple_list_item_1, values); 
```

或使用

```
ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
android.R.layout.simple_list_item_1,R.id.theTextViewID, values); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T12:58:35.107

使用以下代码....

```
 ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, 
```

android.R.layout.simple_list_item_1，值）；

# winapi - Visual C - Win32 APP - 如何在不打开命令提示符窗口的情况下使用 system() 系统调用？

> ID：12026608
> 
> 赞同：0
> 
> 时间：2012-08-19T12:50:00.800
> 
> 标签：winapi, visual-c++, command-prompt

我是 VC++ 新手，我通过默认模板构建了一个简单的 Win32 应用程序。当我运行它时，它会显示一个带有菜单栏的普通窗口。

我在 InitInstance 函数中添加了一个执行 curl 操作的系统调用：

```
BOOL InitInstance(HINSTANCE hInstance, int nCmdShow)

{

   HWND hWnd;
   hInst = hInstance; // Store instance handle in our global variable

   hWnd = CreateWindow(szWindowClass, szTitle, WS_OVERLAPPEDWINDOW,
      CW_USEDEFAULT, 0, CW_USEDEFAULT, 0, NULL, NULL, hInstance, NULL);
   if (!hWnd)
   {
      return FALSE;
   }

   ShowWindow(hWnd, nCmdShow);

   UpdateWindow(hWnd);

   //EDITED THIS WILL CREATE A FILE.HTML

   system("curl www.google.co.in > file.html");

   return TRUE;
} 
```

一切正常。

但问题是当我调用系统时，它会在控制台窗口中打开。我希望它是一个不显示命令提示符窗口的隐藏进程。

帮我解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T13:05:40.567

该`system`函数始终显示一个控制台窗口。如果你想要一个隐藏的控制台窗口，你需要`CreateProcess`直接调用。然后，您可以要求`DETACHED_PROCESS`在没有控制台的情况下运行。请注意，`CreateProcess`不会等待进程退出，因此您需要自己执行等待。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T15:36:20.690

我将代码放在单独的函数中，以 url 和文件名作为参数。

```
 #include <tchar.h>
    #include <windows.h>

    BOOL DownloadWithoutConsole(TCHAR* pszURI, TCHAR* pszFileName)
    {
    //here we will calculate our command line length in bytes
    DWORD dwLen = (lstrlen(pszURI) + lstrlen(pszFileName) + 20)*sizeof(TCHAR);
    //memory allocation for the command line
    TCHAR* pszCmdLine = (TCHAR*)HeapAlloc(GetProcessHeap(), 0, dwLen);
    ZeroMemory(pszCmdLine, dwLen);
    //making command line
    _stprintf_s(pszCmdLine,dwLen/sizeof(TCHAR), TEXT("cmd /c curl %s > %s"), pszURI, pszFileName);

    //preparing arguments for CreateProcess
    STARTUPINFO si;
    ZeroMemory(&si, sizeof(si));
    si.cb = sizeof(si);

    PROCESS_INFORMATION pi;
    ZeroMemory(&pi, sizeof(pi));

    //creating new process 
    BOOL bResult = CreateProcess(NULL, pszCmdLine, NULL, NULL, FALSE, CREATE_NO_WINDOW,
    NULL, NULL, &si, &pi);

    if(bResult)
    {
    //waiting for process termination
    WaitForSingleObject(pi.hProcess, INFINITE);
    //cleanup
    CloseHandle(pi.hProcess);
    CloseHandle(pi.hThread);
    }
    //freeing memory
    HeapFree(GetProcessHeap(), 0, pszCmdLine);
    return(bResult);
    }

   int __cdecl _tmain(void)
   {
      DownloadWithoutConsole(TEXT("stackoverflow.com"), TEXT("test.txt"));
      return(0);
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T12:54:01.697

设置`nCmdShow`为`SW_HIDE(0)`（显示窗口）。这样你就可以在没有 cmd 提示的情况下运行它

# escaping - Wordpress：使用 $wpdb->get_results 时如何取消转义结果？

> ID：12026609
> 
> 赞同：9
> 
> 时间：2012-08-19T12:50:02.527
> 
> 标签：escaping, wordpress

向我使用的数据库添加新行`$wpdb->insert`，并获取我使用的行`$wpdb->get_results`。

问题是这`$wpdb->insert`似乎正在逃避输入。例如，在数据库`a"b`中保存为。`a\"b`但是，似乎`$wpdb->get_results`并没有逃回.`a\"b``a"b`

这是设计的正确行为吗？

我应该取消`$wpdb->get_results`手动的结果吗？（这个的正确功能是什么？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-12T04:40:55.707

`$wpdb->insert()`并且`$wpdb->prepare()`会转义数据以防止[SQL注入攻击](http://en.wikipedia.org/wiki/SQL_injection)。该`$wpdb->get_results()`函数设计用于一般地与 SQL`SELECT`语句一起使用，所以我相信斜杠留在原处的事实是有意的。这允许数据的消费者在必要时对其进行处理。

由于`$wpdb->get_results()`函数返回一个对象数组`stdClass`，为了删除每一行中所有列中的斜线，您必须遍历行，并遍历在其上运行 PHP`stripslashes()`函数的每个行对象的属性。

```
foreach( $quotes as &$quote ) {
    foreach( $quote as &$field ) {
        if ( is_string( $field ) )
            $field = stripslashes( $field );
    }
} 
```

关于 wpdb->get_results() 函数的更多信息：http: [//codex.wordpress.org/Class_Reference/wpdb#SELECT_Generic_Results](http://codex.wordpress.org/Class_Reference/wpdb#SELECT_Generic_Results)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-06T11:55:28.530

[http://codex.wordpress.org/Function_Reference/stripslashes_deep](http://codex.wordpress.org/Function_Reference/stripslashes_deep)

```
//replace $_POST with $POST
    $POST      = array_map( 'stripslashes_deep', $_POST);
    $wpdb->insert( 
            'wp_mytable', 
            array( 
                'field_name'        => $POST['field_name'], 
                'type'              => $POST['type'],
                'values'            => serialize($POST['values']),
                'unanswered_link'   => $POST['unanswered_link'], 
            ), 
            array( 
                '%s','%s','%s','%s'
            ) 
        ); 
```

# java - 没有 E 的 Java BigDecimal

> ID：12026610
> 
> 赞同：13
> 
> 时间：2012-08-19T12:50:30.343
> 
> 标签：java, bigdecimal

我有一个 BigDecimal 变量

```
BigDecimal x = new BigDecimal("5521.0000000001"); 
```

公式：

```
x = x.add(new BigDecimal("-1")
      .multiply(x.divideToIntegralValue(new BigDecimal("1.0")))); 
```

我想删除整数部分以获取值`x = ("0.0000000001")`，但我的新值是 1E-10 而不是 0.0000000001。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-19T13:18:48.130

要获得没有指数部分的`String`表示，您可以使用. 在您的示例中： `BigDecimal`
[`BigDecimal.toPlainString()`](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#toPlainString%28%29)

```
BigDecimal x = new BigDecimal("5521.0000000001");
x = x.add(new BigDecimal("-1").
              multiply(x.divideToIntegralValue(new BigDecimal("1.0"))));
System.out.println(x.toPlainString()); 
```

印刷

```
0.0000000001 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-10-06T06:06:46.200

尝试使用 BigDecimal.toPlainString() 根据需要获取纯字符串的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-20T20:06:22.750

也许使用 BigDecimal 并不能真正帮助您。

```
double d = 5521.0000000001;
double f = d - (long) d;
System.out.printf("%.10f%n", f); 
```

印刷

```
0.0000000001 
```

但该值`5521.0000000001`只是一个近似表示。

实际的表示是

```
double d = 5521.0000000001;
System.out.println(new BigDecimal(d));
BigDecimal db = new BigDecimal(d).subtract(new BigDecimal((long) d));
System.out.println(db); 
```

印刷

```
5521.000000000100044417195022106170654296875
1.00044417195022106170654296875E-10 
```

我怀疑你试图做的任何事情都没有意义，因为你似乎试图获得一个不是你认为的值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-07T10:27:44.463

如果您想在 BigDecimal 对象上执行此操作，而不是使用格式化程序将其转换为字符串，您可以在 Java 8 上通过 2 个步骤执行此操作：

1.  stripTrailingZeros()
2.  if scale < 0 setScale to 0 if don't like esponential/scientific notation

您可以尝试此代码段以更好地理解行为

```
BigDecimal bigDecimal = BigDecimal.valueOf(Double.parseDouble("50"));
bigDecimal = bigDecimal.setScale(2);
bigDecimal = bigDecimal.stripTrailingZeros();
if (bigDecimal.scale()<0)
bigDecimal= bigDecimal.setScale(0);
System.out.println(bigDecimal);//50
bigDecimal = BigDecimal.valueOf(Double.parseDouble("50.20"));
bigDecimal = bigDecimal.setScale(2);
bigDecimal = bigDecimal.stripTrailingZeros();
if (bigDecimal.scale()<0)
bigDecimal= bigDecimal.setScale(0);
System.out.println(bigDecimal);//50.2
bigDecimal = BigDecimal.valueOf(Double.parseDouble("50"));
bigDecimal = bigDecimal.setScale(2);
bigDecimal = bigDecimal.stripTrailingZeros();
System.out.println(bigDecimal);//5E+1
bigDecimal = BigDecimal.valueOf(Double.parseDouble("50.20"));
bigDecimal = bigDecimal.setScale(2);
bigDecimal = bigDecimal.stripTrailingZeros();
System.out.println(bigDecimal);//50.2 
```

# c# - 我如何使用 AForge（IsCircle 函数）检测黑色圆圈，因为它需要带有黑色背景的图像？

> ID：12026616
> 
> 赞同：0
> 
> 时间：2012-08-19T12:51:14.820
> 
> 标签：c#, image-processing, aforge

我有一张带有一些石头的围棋棋盘图像。我需要检测这些石头。我正在尝试[AForge 的 IsCircle 函数](http://www.aforgenet.com/articles/shape_checker/) ，但图像的背景必须先变为黑色。但我需要检测黑圈。

可能吗？或者是否有其他库（OpenCV）的其他解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:02:24.237

您可以将黑色像素转换为白色像素，将白色像素转换为黑色像素，然后使用 Iscircle 函数检测圆形这里是使用 Aforge.net 转换的代码

```
 Bitmap orig = (Bitmap)pictureBox1.Image;
            Bitmap clone = new Bitmap(orig.Width, orig.Height, System.Drawing.Imaging.PixelFormat.Format24bppRgb);
            using (Graphics gr = Graphics.FromImage(clone))
            {
                gr.DrawImage(orig, new Rectangle(0, 0, clone.Width, clone.Height));
          }

            FiltersSequence commonSeq = new FiltersSequence();
            commonSeq.Add(Grayscale.CommonAlgorithms.BT709);
            commonSeq.Add(new BradleyLocalThresholding());
            commonSeq.Add(new DifferenceEdgeDetector());

            Bitmap temp = commonSeq.Apply(clone); 
```

# database - 什么数据库用于统计/报告数据？

> ID：12026617
> 
> 赞同：2
> 
> 时间：2012-08-19T12:51:18.097
> 
> 标签：database, nosql

我的应用程序是一种 POS 系统。问题在于报告。每个产品、每个桌子、每个员工、每个类别的销售额。拥有 1 年的日期范围报告非常慢，因为它们必须汇总很多行等。所以我想知道 no-sql 数据库是否可以提供帮助，例如每天进行摘要或其他内容。但也许这并不容易，因为可能有针对每个项目*产品*类别*员工等查询。那么我该怎么办？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T13:08:47.857

如果您对关系数据库感到满意，我建议您坚持使用它们，并为您常用的报告使用每日汇总表。

例如，如果想要按产品编号分组销售报告，请找出您正在寻找的统计数据（即销售数量）并将您的原始数据按产品编号汇总到一天大小的“桶”中。

```
+-----------+------------+------------+-------+-------+
| salesdate | productNum | totalSales | stat2 | stat3 |
+-----------+------------+------------+-------+-------+ 
```

如果您在每天结束时执行一天大小的存储桶，您的报告每月将只有 30 个存储桶，或每年 365 个存储桶。总结起来要快得多。在构建仪表板（小时大小的存储桶）时，我已经使用网络性能指标完成了这项工作，它大大减少了查询时间。如果需要，您始终可以挖掘原始数据，但对于想要一目了然的普通用户来说，聚合的存储桶就足够了。

您也可以考虑将汇总表放在单独的数据库中。

请记住，如果您的一个统计数据是平均值，则一系列平均值的平均值不是整个范围的平均值。

# android - 如何使用 Appaccelerator 切换语言环境？

> ID：12026618
> 
> 赞同：0
> 
> 时间：2012-08-19T12:51:23.103
> 
> 标签：android, ios, titanium

我有一个使用 Appaccelerator 构建的 iPhone/Android 应用程序。我已经通过将所有文本放入语言环境（i18n//strings.xml）来翻译所有文本，并且我还实现了一个开关：

```
<label for="flip-1" class="username">Language:</label>
<select name="flip-1" id="flip-1" data-role="slider">
    <option value="off">EN</option>
    <option value="on">NL</option>
</select> 
```

这在 Android 和 iPhone 上运行良好。

如何启用此选择元素以更新应用程序中的活动语言区域设置，以便应用程序的语言会发生变化，这是否可以在不重新启动应用程序的情况下实现？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T07:50:03.050

无法在运行时更改当前语言环境。区域设置取决于手机的当前语言，但您仍然可以做一些工作。在您的 i18n 目录中创建 strings.xml 文件并将所有文本放在那里，如下所示：

```
<resources>
    <string name="en_car">Car</string>
    <string name="de_car">Auto</string>
</resources> 
```

您可以实现自己的`L()`功能：

```
Ti.App.defaultLang = "en"; // global variable with default language (set it in app.js)
function myL(str, lang) {
    if(lang && str) {
        return L(lang + '_' + str);
    } else {
        return L(Ti.App.defaultLang + '_' + str);
    }
} 
```

我没有测试它，只是想给你一些例子来处理它。您也可以通过 Ti 文档中的提示选项：[http ://docs.appcelerator.com/titanium/2.1/index.html#!/api/Titanium.Locale-method-getString](http://docs.appcelerator.com/titanium/2.1/index.html#!/api/Titanium.Locale-method-getString)

# c# - StreamWriter 构造函数问题

> ID：12026625
> 
> 赞同：0
> 
> 时间：2012-08-19T12:52:35.120
> 
> 标签：c#, buffer, streamwriter

我正在尝试做一些非常简单的事情。

在查找与 StreamWriter(string path) 构造函数关联的默认缓冲区大小对于我正在记录的信息而言太小时，我尝试使用以下构造函数：

```
public StreamWriter(
    string path,
    bool append,
    Encoding encoding,
    int bufferSize
) 
```

生成的日志文件完全是空的——这更糟。

注意：我的原始帖子引用了错误 "Error: Attempted to read past end of stream" ，但这与方法后面的功能有关，由于此日志文件问题，我无法记录信息。

这是我的代码中的旧构造函数用法：

```
drawGameBoardLog = new StreamWriter(debugFileName); 
```

这是新的构造函数，具有讽刺意味的是，它使事情变得更糟：

```
drawGameBoardLog = new StreamWriter(debugFileName, false, System.Text.Encoding.Default, 65535); 
```

我对此完全感到困惑。

更新：更多细节：

这是我记录活动的方法的开始：

```
 public void DrawGameBoard()
    {
        StreamWriter drawGameBoardLog;
        bool debug = true;

        // Logging---------------------------------------------------------------------------------
        // Build timestamp string
        DateTime currentDateTime = DateTime.Now;
        string timeStampString = currentDateTime.ToString("ddMMyyyy_HHmmss");

        // Build filename, concat timestamp and .txt extension.
        string debugFileName = "D:\\Programming\\PacmanLogs\\DrawGameBoard"+timeStampString+".txt";

        // Create filestream and pass this to a stream writer, setting a nice big buffer.
        drawGameBoardLog = new StreamWriter(debugFileName, false, System.Text.Encoding.Default, 65535);
        //drawGameBoardLog = new StreamWriter(debugFileName);

        // Write to the file:
        drawGameBoardLog.WriteLine(DateTime.Now);
        drawGameBoardLog.WriteLine("timeStampString = {0}",timeStampString);
        // -------------------------------------------------------------------------------------------

        if(debug){drawGameBoardLog.WriteLine("DrawGameBoard()...");} 
```

当使用接受路径、附加、编码和缓冲区大小的 StreamWriter 构造函数时，甚至没有出现“DrawGameBoard()...”行。而在我获得将文件大小变为 1K 的内容之前。这是到目前为止的日志文件（顺便说一下，我从图形编程开始）：

```
19/08/2012 14:13:21
timeStampString = 19082012_141321
DrawGameBoard()...
noOfIndexes = [6], noOfVertices = [4]
...just set stremSize = [80]
...creating vertices DataStream...
...building Matrices...
...Scaling matrix DONE...
...Rotation matrix DONE...
...Translation matrix DONE...
...Orthogonal matrix DONE...
...Perspective matrix DONE...
...COMBINED matrix DONE...
...creating Vector3 and Vector2 arrays to hold positions and texture coords...
...Writing Texture coords....
...Building Index Array (order of vertices to be drawn for a quad)....
...Declaring indicesStream. Set size of stream to [24]....
...Created data stream for indices OK. Now writing indices array to it....
...DONE. Just set position back to ZERO...
...Created new index buffer OK....
...configure the Input Assembler....
...Getting Vectors for position [0,0]...
...Got Vectors into myVectorPositions....
myVectorPositions[0] = [X:0 Y:0 Z:0.5]
myVectorPositions[1] = [X:20 Y:0 Z:0.5]
myVectorPositions[2] = [X:0 Y:20 Z:0.5] 
```

默认缓冲区大小就在那里启动。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T13:29:13.373

您没有关闭 StreamWriter。最后类型：

`drawGameBoardLog.Close();`

或使用`using`块：

```
using(StreamWriter sw = new StreamWriter(path))
{
     sw.WriteLine("Sth");
} 
```

或者最后尝试一下：

```
StreamWriter sw;

try
{
   sw = new StreamWriter(path);
   sw.WriteLine("sth");

}
finally
{
   sw.Close();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T13:30:55.327

请更改此行

```
 drawGameBoardLog = new StreamWriter(debugFileName, false, 
                      System.Text.Encoding.Default, 65535); 
```

在

```
 using(StreamWriter drawGameBoardLog = new StreamWriter(debugFileName, false, 
                      System.Text.Encoding.Default, 65535))
 {

  .... write all the stuff in your log

 } 
```

语句块将`using`确保 streamwriter 将被关闭并写入磁盘

可能，您第一次尝试使用没有缓冲区的 StreamWriter 部分工作，但是，当您将缓冲区更改为一个大值时，只有当您达到该尺寸时，文件才会写入磁盘。

# javascript - mongoosejs: $where 不相等

> ID：12026634
> 
> 赞同：3
> 
> 时间：2012-08-19T12:53:27.713
> 
> 标签：javascript, node.js, mongodb, mongoose

我想使用 mongoosejs 的查询构建器界面获取一组文档，而不需要一组特定的 id。

=>所以我正在照顾某种：

```
var query = Document.find();
query.$where('this._id !== ' + req.session.user_id);
query.exec(cb); 
```

这个例子分解...

但它是如何真正起作用的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T15:39:25.313

我不相信这是推荐的方式。但是至少它有效......

```
query.nin('_id', [req.session.user_id]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T03:45:14.330

如果它只是您要排除的一个 id：

```
query.ne('_id', req.session.user_id); 
```

# magento - Magento 1.6.2。添加新的信用卡类型

> ID：12026636
> 
> 赞同：1
> 
> 时间：2012-08-19T12:53:51.887
> 
> 标签：magento, payment-gateway, credit-card

我正在开发 Magento 1.6.2。使用自定义构建 OptimalPayments/Netbanx 支付网关。我需要为客户提供一个选项，以在结帐页面上选择 VisaDebit 和 VisaElectron 信用卡类型。查看核心代码，我发现 Magento 仅支持 Visa (VI)，但不支持 VD 和 VE。这意味着我需要以某种方式扩展 Mage_Payment_Model_Method_Cc 类和 js/prototype/varien/validation.js 以添加对这些卡类型的支持。如果有人能建议我如何介绍这些 CC 类型，那就太好了。提前致谢。

# java - 在 Java Web 应用程序中实现 CAS 身份验证

> ID：12026638
> 
> 赞同：0
> 
> 时间：2012-08-19T12:54:02.940
> 
> 标签：java, jsp, glassfish, cas

我有一个使用 Glassfish3+ 服务器使用 java JSP 和 servlet 构建的 Web 应用程序。现在我正在为我的管理控制台使用基于表单的身份验证，但是我想切换到 CAS 身份验证。这可能吗？如何？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T12:34:58.873

您可以在应用程序中使用 Java CAS 客户端切换到 CAS 身份验证： - [https://wiki.jasig.org/display/CASC/CAS+Client+for+Java+3.1](https://wiki.jasig.org/display/CASC/CAS+Client+for+Java+3.1) - [http://shiro.apache.org /cas.html](http://shiro.apache.org/cas.html) - [http://static.springsource.org/spring-security/site/docs/3.1.x/reference/cas.html](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/cas.html) 和 CAS 服务器。最好的，杰罗姆

# c# - 在 MVC 中实现自定义模型绑定器以从容器中解析类型

> ID：12026644
> 
> 赞同：1
> 
> 时间：2012-08-19T12:55:19.910
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-4, model-binding, proxy-classes

简而言之，我的问题归结为：

我需要在 MVC4 中实现一个自定义模型绑定器，它可以从容器/服务定位器中解析模型，无论如何。我已经实现了以下模型绑定器：

```
public class ServiceLocatorModelBinder : DefaultModelBinder
{
    private readonly IServiceLocator _serviceLocator;

    public ServiceLocatorModelBinder(IServiceLocator serviceLocator)
    {
        _serviceLocator = serviceLocator;
    }

    protected override object CreateModel(ControllerContext controllerContext, ModelBindingContext bindingContext, Type modelType)
    {
        var typeValue = bindingContext.ValueProvider.GetValue(bindingContext.ModelName + ".ModelType");
        var type = Type.GetType(
            (string)typeValue.ConvertTo(typeof(string)),
            true
        );
        var model = _serviceLocator.GetInstance(modelType);
        bindingContext.ModelMetadata = ModelMetadataProviders.Current.GetMetadataForType(() => model, type);
        return model;
    }
} 
```

现在我想用它代替 mvc 中的 DefaultModelBinder 来解析我的所有模型。我该怎么做呢？

为了澄清我这样做的需要（通常认为最好的做法是只为视图模型/模型使用具体的简单类），是我正在尝试自动生成代理来代替我的简单视图模型的概念/poco 整个应用程序中的类，因此我没有要绑定的具体类型。我希望实现的目标是采用保持模型/视图模型简单的模式，并通过使任何人都无法向这些类添加任何逻辑来进一步执行它。这是我需要一个容器来解析模型类型的地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T12:58:01.023

> 我该怎么做呢？

您可以将默认模型绑定器替换为您的自定义模型绑定器`Application_Start`：

```
IServiceLocator sl = ...
ModelBinders.Binders.DefaultBinder = new ServiceLocatorModelBinder(sl); 
```

# javascript - 尝试检查表单中的值是设定范围内的数字

> ID：12026647
> 
> 赞同：1
> 
> 时间：2012-08-19T12:55:41.183
> 
> 标签：javascript, forms, validation, numbers, range

尝试编写一个脚本来检查表单中的值是一个介于 1 到 99999 之间的数字。

1）脚本主要工作除了两件事如果你输入一个数字然后是字母它不会检测到你输入的字母和数字

2）我希望它在 onblur 事件上运行脚本，但是每次我尝试脚本都不起作用。

多年前学习Java，发现我忘记了大部分事情，如果人们能指出我哪里出错了，那就太好了

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>Please enter your age</title>
<script language="JavaScript1.2">
function checknumber(){
var x=document.checknum.pnum.value
/*does it contain non digits */
var anum=/(^\D+$)|(^\D+\.\D+$)/
if (anum.test(x))
{
alert("Please input a valid Runner ID between 1 to 99999 !")
testresult=false
}
/*is it above 99999*/
else if (x > 99999)
{
alert("Please input a valid Runner ID between 1 to 99999 !")
testresult=false
}
/*is it below 1*/
else if (x < 1)
{
alert("Please input a valid Runner ID between 1 to 99999 !")
testresult=false
}
return (testresult)
}
</script>
</head>
<body>
<form name="checknum" onSubmit="return checknumber()">
Please input a valid Runner ID between 1 to 99999:
<input type="text" name="pnum" onchange="checknumber()">
<input type="submit" value="Submit">
</form>
</body>
</html> 
```

非常感谢达米安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T13:05:52.960

导入 Jquery 库并使用此功能

```
<script type="text/javascript">

$(document).ready(function(){    
$("#pnum").keypress(function (e)  
{ 
  //if the letter is not digit then display error and don't type anything
  if( e.which!=8 && e.which!=0 && (e.which<48 || e.which>57))
  {
    return false;
  } 
});
}); 
```

但文本框的 id

```
 <input type="text" name="pnum" id="pnum" maxLength="5" > 
```

这将确保您只能添加数字和 5 个字符

# c# - 已检查 null 时 ReSharper 可能出现 Null 异常

> ID：12026649
> 
> 赞同：9
> 
> 时间：2012-08-19T12:55:48.840
> 
> 标签：c#, resharper, extension-methods, nullreferenceexception, code-contracts

这是带有 Visual Studio 2012 的 ReSharper 7。下面的示例

```
// This code works fine and as expected and ReShrper is happy with it
if (!string.IsNullOrWhiteSpace(extension) && extension.Length == 3)
{
    // do something
}

// ReSharper highlights "extension" in extension.Length with "Possible 'System.NullReferenceException'"
if (!extension.IsNullOrWhiteSpace() && extension.Length == 3)
{
    // do something
} 
```

而且，我创建了以下扩展方法：

```
public static class StringExtensions
{
    public static bool IsNullOrWhiteSpace(this string s)
    {
        return string.IsNullOrWhiteSpace(s);
    }
} 
```

我查看了反映的代码，`String.IsNullOrWhiteSpace`它没有任何相关代码或属性可以突出显示检查已验证的 R#。这是在 R# 中硬编码的吗？

我查看了 Code Contracts，但我不确定它是否对我有帮助。

您是否有向 ReSharper 证明检查条件已通过我的扩展方法验证的解决方法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-20T11:32:31.257

# 在 Resharper 7 及更高版本中可用

```
[ContractAnnotation("null=>true")]
public static bool IsNullOrWhiteSpace(this string s) 
```

你的项目不会知道是什么`ContractAnnotation`。您需要将其添加到您的项目中。首选方法是通过 nuget：

> PM> 安装包[JetBrains.Annotations](https://www.nuget.org/packages/JetBrains.Annotations)

或者，您可以直接将源代码嵌入到您的项目中：

> Resharper -> 选项 -> 代码注释 -> 将默认实现复制到剪贴板

Then paste that into a new file, eg Annotations.cs. The `ContractAnnotation` definition lives in that file. For an official article on ContractAnnotation see [here](http://blogs.jetbrains.com/dotnet/2012/08/contract-annotations-in-resharper-7/)

* * *

## Previous answer (for non R#7 versions)

> Is this hardcoded in R#?

No, Resharper uses External Annotations to provide this functionality. [This article](http://blogs.jetbrains.com/dotnet/2010/11/resharper-nullreferenceexception-analysis-and-its-contracts/) should answer all your questions, including a solution to provide your own external annotation for your `IsNullOrWhiteSpace` method.

### Example

*note: external annotations appear to only work on referenced libraries; if your reference is from a project the external annotations are not picked up; this is less than ideal*

Suppose you have your extension method in a class called `TempExtensions` which itself resides in an assembly named `ClassLibrary1`

You need to add a new file at this location

> C:\Program Files (x86)\JetBrains\ReSharper\v7.0\Bin\ExternalAnnotations.NETFramework.ExternalAnnotations\ClassLibrary1\ClassLibrary1.xml

The contents of the xml should contain:

```
<assembly name="ClassLibrary1">
  <member name="M:ClassLibrary1.TempExtensions.IsNullOrWhiteSpace(System.String)">
    <attribute ctor="M:JetBrains.Annotations.ContractAnnotationAttribute.#ctor(System.String,System.Boolean)">
        <argument>null=&gt;true</argument>
        <argument>true</argument>
    </attribute>
  </member>
</assembly> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T13:19:49.047

据我所知，这是 reshaper 的问题。它不能查看方法并验证方法中是否会进行空值检查。如果您想避免此消息，我认为您必须自己进行空值检查。但在这种情况下，我宁愿忽略 resharper-message。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-20T10:45:46.190

我看到的唯一解决方法是将函数参数添加到扩展方法。

```
public static class StringExtensions
{
  public static bool IsNotNullAndNotWhiteSpaceAnd(this string s, Func<string, bool> func)
  {
    if (string.IsNullOrWhiteSpace(s))
    {
      return false;
    }

    return func(s);
  }
} 
```

使用此扩展方法的示例：

```
string extension = null;     //Test for null
//string extension = "123";  //Test for Length==3

if (extension.IsNotNullAndNotWhiteSpaceAnd(_ => _.Length == 3))
{
  Console.Out.WriteLine("Length == 3");
}
else
{
  Console.Out.WriteLine("Null or WhiteSpace or Length != 3");
} 
```

# java - 只有当我将 Tomcat lib 中的 jar 与类路径中的 lib 文件夹分开时，我的 jsp 代码才有效

> ID：12026650
> 
> 赞同：0
> 
> 时间：2012-08-19T12:56:24.470
> 
> 标签：java, web-applications

在我的应用程序中，我从 JSP 调用一个 bean 并显示数据。我已将所有必需的 jar 保存在 lib 文件夹中，并且位于构建路径中。当我运行此 bean 时，它会成功获取数据。但是当我在 JSP 中调用这个 bean 时，它说没有类定义。我找到了一个解决方法，将所有 jars 也放在 Tomcat 的 lib 文件夹中。（除了保留在类路径中）。意味着现在我必须部署战争并将罐子放在tomcat lib中。但是当罐子已经在类路径中时，为什么我必须这样做。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T13:14:47.127

听起来您可能与某些罐子发生冲突。如果其中一个 jar 依赖于 tomcat 类加载器中其他地方提供的东西，或者它提供了相同的功能 - 您最终可能会遇到问题。您过去经常看到这种情况与冲突的 XML 解析器实现有关。

这有一些关于所包含内容的更多信息：http: [//tomcat.apache.org/tomcat-7.0-doc/class-loader-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/class-loader-howto.html)

# python - 从 Javascript 和 HTML 文件（模板）中提取 gettext 字符串

> ID：12026651
> 
> 赞同：13
> 
> 时间：2012-08-19T12:57:05.800
> 
> 标签：python, html, gettext, python-babel

我知道至少有两种方法可以从 .js 文件中提取 gettext 字符串——在 python 模式下使用 gettext 解析器（我听说它有一些缺点）和用 python 编写的 Babel。

有没有办法从 HTML 文件中提取 gettext 字符串 - 或者更准确地说 - Javascript 模板（下划线、小胡子等......）。据我所知，Babel 或 gettext 也没有这样做。

我的一个朋友试图让 Babel 来做这件事，但它有一些严重的问题，比如缺少一些翻译等......

更新：一位朋友指导了我一点，所以现在看来​​我可以按照我想要的方式提取所有字符串。我唯一缺少的是“翻译评论”。我正在使用的命令是这样的：

```
find . -iname '*.html' -o -iname '*.js' | xargs xgettext --language=Python --from-code=utf-8 --keyword=pgettext:1c,2 --keyword=npgettext:1c,2,3 
```

这将在关键字中包含 pgettext 和 npgettext

更新 2：我发现要提取 HTML 标记属性内的 gettext 消息，我必须在 JS 部分之间插入换行符。例如，我必须转换它：

```
<a href="" title="<%= ST.i18n.gettext('Click to add another row') %>"></a> 
```

进入这个：

```
<a href="" title="
<%= ST.i18n.gettext('Click to add another row') %>"></a> 
```

如果 gettext 消息在同一行，Python 模式下的 xgettext 将不会提取它。这是一个快速的技巧，但似乎对我有用。

更新 3：PHP 模式下的 xgettext 似乎可以毫无问题地从 HTML 中提取消息（至少使用 Undsrscore 模板），这也适用于翻译者的评论。

```
find ../app -iname '*.html' | xargs xgettext --language=PHP --from-code=utf-8 -c --keyword=gettext --keyword=ngettext:1,2 --keyword=pgettext:1c,2 --keyword=npgettext:1c,2,3 -o translations.po 
```

这样，我可以在模板文件中保持正常格式：

```
<a href="" title="<%= ST.i18n.gettext('Click to add another row') %>"></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T13:30:56.070

Babel 的消息抽取是可扩展的，你需要为新类型创建专门的抽取器。

您没有具体说明您（或您的朋友）发现了哪些“严重问题”，因此很难在这里更详细地为您提供帮助，但特定格式的任何问题都归结为错误的提取代码。

Babel支持[使用](https://pypi.python.org/pypi?%3Aaction=search&term=babel&submit=search)`entry_points`.然而）。您可以使用额外的 PyPI 搜索来搜索特定的模板系统，以查看这些模板系统是否有 Babel 提取器。

# javascript - 我可以把这个功能一分为二吗？

> ID：12026655
> 
> 赞同：0
> 
> 时间：2012-08-19T12:57:38.697
> 
> 标签：javascript, jquery

我有包含类似于以下内容的代码。我可以一次在屏幕上打开一个或多个模式。这是代码的**简短**版本。在实际应用程序中还有很多，所以我想将此函数分成两个：

```
function openModal(oLink, content) {
    var btns = {
        'Close': function (win) {
            modal.closeModal()
        }
    }
    var modal = $.modal({
        buttons: btns
    });
} 
```

我是否可以将其拆分为两个函数，如下所示：

```
function btnsModal() {
    var btns = {
        'Close': function (win) {
            modal.closeModal()
        }
    }
    return btns;
}

function openModal(oLink, content) {
    var btn = btnsModal();
    var modal = $.modal({
        buttons: btn
    });
} 
```

当我尝试这个时，我得到了错误：

```
Object doesn't support property or method 'closeModal' 
```

第一个脚本是否只起作用，因为 modal 是在与使用 modal.closeModal() 的文件相同的文件中定义的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T13:09:56.407

以下是如何获得所需内容的示例：

```
function createModal(options) {

    // create your modal and use the options passed
    // like options.message, and options.title for example
    // here you will set its default behavior

}

// calling it
createModal({
    message: "This is the message".
    title: "A modal"
}); 
```

这是一个使用 jQuery UI 的示例，您可以轻松更改为您需要的内容。我只是使用 jQuery UI 来简化构建示例，因为我没有您的 $.modal 方法。

**HTML：**

```
<button id="btn1" type="button">Open Modal 1</button>
<button id="btn2" type="button">Open Modal 2</button> 
```

**JavaScript：**

```
 $(function() {

    $( "#btn1" ).click(function(){
        createModal({
            title: "Title!",
            message: "This is a Dialog!"
        });
    });

    $( "#btn2" ).click(function(){
        createModal({
            title: "Another Title!",
            message: "This is another Dialog!"
        });
    });

    function createModal( options ) {

        var $div = $( "<div></div>" );
        $div.append( $( "<p></p>" ).html( options.message ) );

        $div.dialog({
            modal: true,
            title: options.title,
            buttons: {
                "Foo": function() {
                    $(this).dialog( "close" );
                },
                "Bar": function() {
                    $(this).dialog( "close" );
                }
            },
            close: function( event, ui ) {
                // as the container was created on-the-fly
                // we need to do this to destroy the container
                $(this).dialog( "destroy" );
            }
        });

    }

}); 
```

现场示例：http: [//jsfiddle.net/davidbuzatto/ZJzky/](http://jsfiddle.net/davidbuzatto/ZJzky/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T13:10:11.807

您需要在函数范围之外声明变量“模态”，以便在两个函数中都可以访问。

```
var modal;
function btnsModal() {
    var btns = {
        'Close': function (win) {
            modal.closeModal()
        }
    }
    return btns;
}

function openModal(oLink, content) {
    var btn = btnsModal();
    modal = $.modal({
        buttons: btn
    });
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T13:01:25.903

您可以缓存模态 (var modal = $.modal...) 并在两个函数之前定义它。

```
var modal = $.modal

function btnsModal()

function openModal() 
```

# asp.net-mvc - 带有加密文本的 ASP.net MVC Route 404

> ID：12026656
> 
> 赞同：2
> 
> 时间：2012-08-19T12:57:39.093
> 
> 标签：asp.net-mvc

我在 asp.net MVC 3 web 应用程序中实现密码重置工具。发送给用户的电子邮件包含一个带有加密字符串的链接。下面是一个示例链接：

```
forgotprocess/QU1jfNoTb1Qd7qObop1FinQai4hCbzg7%2bMGfMF63d9Vvahi%2bmg9cT8KyaGo9jE1gbsWl5r%2f6DzpcRLf6HYNGeeFujG9QeblKUUvfxLDJ7UwcSCKD2AdsrR3EmC80PNCGGnGMQiya7ILNOJjWh%2fKSRQ%3d%3d 
```

单击链接时，我收到 404 错误。为了测试我使用 RouteDebugger 的路线，我仍然得到 404 页面 - 似乎链接没有进入应用程序。但是，如果我将链接更改为以下内容：

```
forgotprocess/?i=QU1jfNoTb1Qd7qObop1FinQai4hCbzg7%2bMGfMF63d9Vvahi%2bmg9cT8KyaGo9jE1gbsWl5r%2f6DzpcRLf6HYNGeeFujG9QeblKUUvfxLDJ7UwcSCKD2AdsrR3EmC80PNCGGnGMQiya7ILNOJjWh%2fKSRQ%3d%3d 
```

它工作正常。我宁愿不必使用查询字符串参数。

整个链接的大小约为 200 个字符，所以它不应该达到任何限制吗？

标记

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T14:00:09.390

在您的顶级路线中：

```
forgotprocess/QU1jfNoTb1Qd7qObop1FinQai4hCbzg7%2bMGfMF63d9Vvahi%2bmg9cT8KyaGo9jE1gbsWl5r%2f6DzpcRLf6HYNGeeFujG9QeblKUUvfxLDJ7UwcSCKD2AdsrR3EmC80PNCGGnGMQiya7ILNOJjWh%2fKSRQ%3d%3d 
```

%2f 会将 URL 解码为 / 所以它会混淆路由引擎。

您可以更改生成加密字符串的方式以防止这种情况发生吗？

[或者，如果它是最后一个参数，您可以像在这篇文章](https://stackoverflow.com/questions/591694/url-encoded-slash-in-url)中那样更改您的路线，但这可能会导致其他问题：

```
routes.MapRoute(
    "Default",                                                // Route name
    "{controller}/{action}/{*id}",                            // URL with parameters
    new { controller = "Home", action = "Index", id = "" });  // Parameter defaults 
```

# ruby-on-rails - 当旧值和新值都为零时，ActiveRecord 对象被标记为脏

> ID：12026661
> 
> 赞同：2
> 
> 时间：2012-08-19T12:58:07.923
> 
> 标签：ruby-on-rails, activerecord

我有一个模型`Day`，它代表时间表中的一天。我注意到，每当我调用`@day.save`它时，它都会写入数据库，即使对象的所有属性都没有改变它们的值。

```
@day = Day.last
 => #<Day lunch_minutes: 0, updated_at: "2012-08-19 12:09:40", work_hours: 5.5> 
```

一天的长度以小时为单位，午休时间的长度以分钟为单位，存储起来。我已经裁剪了一些不相关的属性。

```
@day.lunch_minutes
=> 0
@day.lunch_minutes = 0
 => 0
@day.changes
=> {"lunch_minutes"=>[0, 0]}
@day.lunch_minutes_changed?
 => true 
```

那应该是假的。与不为零的值进行比较：

```
@day.work_hours = 5.5
=> 5.5
@day.work_hours_changed?
=> false 
```

因此，如果我调用保存，则会调用它。理想情况下，这里不会有不必要的数据库交互。

```
@day.save
(0.5ms)  UPDATE "days" SET "lunch_minutes" = 0, "updated_at" = '2012-08-19 12:22:59.586860' WHERE "days"."id" = 48 
```

我不确定这是否是 Rails 错误，或者我在某处做错了什么。看起来这可能是[“changes_from_zero_to_string”中的问题？](https://github.com/rails/rails/blob/2ab9ff5dfea452b0b0cf769a5ee0e91e0f77d354/activerecord/lib/active_record/attribute_methods/dirty.rb)- 我认为`&& value != 0`在该方法中添加一个可以修复它 - 但我想知道是否有其他人以前看过这个/一个修复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T13:27:22.813

您使用的是什么版本的导轨？我刚刚在我的应用程序（3.1.5/1.8.7）中试了一下，但它的行为不是这样。我只是在我的一个模型上使用了一个随机整数属性来测试：

```
1.8.7 :006 > o = Order.first
 => <Order id:...>
1.8.7 :007 > o.order_items_count
 => 0 
1.8.7 :008 > o.order_items_count = 0
 => 0 
1.8.7 :009 > o.changes
 => {} 
1.8.7 :010 > o.order_items_count = '0'
 => "0" 
1.8.7 :011 > o.changes
 => {} 
1.8.7 :012 > o.save
   (0.1ms)  BEGIN
   (0.1ms)  COMMIT
 => true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T13:21:23.427

这似乎是一个错误。

有趣的是，根据代码，如果你这样做：

```
@day.lunch_minutes = '0' 
```

它可能会认为它没有改变！

试试看，如果这个变化确实会导致@day.lunch_minutes_changed？为假，然后确保将其作为问题报告给[https://github.com/rails/rails](https://github.com/rails/rails)。

# c# - Windows Phone 应用程序上 ShakeGesture 库中的奇怪现象

> ID：12026663
> 
> 赞同：0
> 
> 时间：2012-08-19T12:58:17.150
> 
> 标签：c#, windows-phone-7, xna, shake

我对 windows phone 抖动库有问题。我构建了一个应用程序，它的震动声音会消失，它的工作很好，但奇怪的错误让我感到困惑。我有两页。这是我的单独代码：

```
void Instance_ShakeGesture1(object sender, ShakeGestureEventArgs e)
    {            
        Stream stream = TitleContainer.OpenStream("Sounds/C.wav");
        effect = SoundEffect.FromStream(stream);
        effectInstance = effect.CreateInstance();
        if (effectInstance.State != SoundState.Playing || effectInstance == null)
        {
            FrameworkDispatcher.Update();
            effectInstance.Play();
        }

        else if (effectInstance.State == SoundState.Playing || effectInstance != null)
        {
            effectInstance.Stop();
        }
    }

    void Instance_ShakeGesture2(object sender, ShakeGestureEventArgs e)
    {
        Stream stream = TitleContainer.OpenStream("Sounds/D.wav");
        effect = SoundEffect.FromStream(stream);
        effectInstance = effect.CreateInstance();
        FrameworkDispatcher.Update();
        if (effectInstance.State == SoundState.Stopped || effectInstance == null)
        {
            effectInstance.Play();
        }

        else if (effectInstance.State == SoundState.Playing || effectInstance != null)
        {
            effectInstance.Stop();
        }
    } 
```

Instance_ShakeGesture1 是我在第 1 页摇动时播放音乐的程序，在第 2 页摇动时播放音乐首先是 Instance_ShakeGesture1，然后是 Instance_ShakeGesture2。当我尝试先摇动第 2 页而不是第 1 页时，问题同样出现，Instance_ShakeGesture2 将首先执行，Instance_ShakeGesture2 将在第二个执行。当我使用断点时，我知道这个错误。有谁知道如何解决这个问题？谢谢之前:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T09:56:13.600

当您导航到第二页时，可能事件 Instance_ShakeGesture1 仍然处于活动状态。尝试

Instance.ShakeEvent -= new EventHandler(Instance_ShakeGesture1);

在 Instance_ShakeGesture1 方法中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-29T10:09:36.967

试试这个，它对我有用，

```
protected override void OnBackKeyPress(CancelEventArgs e)
{
    e.Cancel = false;
    ShakeGesturesHelper.Instance.ShakeGesture -= new EventHandler<ShakeGestureEventArgs>(Instance_ShakeGesture1);
} 
```

因为您应该在离开第一页时删除事件。因此，您可以在按下后退键按钮时清除 hakeGestureEventArgs。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T07:31:24.030

好吧，我的坏。不知道您需要它多次工作。

试试这个，让我知道它是否有效：

在方法内部编写您添加的同一行代码`OnNavigatedFrom`并将其从当前`method('Instance_ShakeGesture2')`

# c# - 调用 Bitmap.GetHicon 时在 GDI+ 中发生一般错误

> ID：12026664
> 
> 赞同：16
> 
> 时间：2012-08-19T12:58:25.640
> 
> 标签：c#, gdi+

为什么我收到“GDI+ 中发生一般错误”异常？

```
IntPtr hicon = tempBitmap.GetHicon();             
Icon bitmapIcon = Icon.FromHandle(hicon);            
return bitmapIcon; 
```

当我的应用程序运行超过 30 分钟时发生错误。（我正在转换`System.Drawing.Bitmap`为`System.Drawing.Icon`每一秒）

![在此处输入图像描述](../Images/2825139bb86c7b145de242ad3d8f6cf1.png)

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-19T13:25:40.930

那是由手柄泄漏引起的。您可以使用 TaskMgr.exe 的“进程”选项卡来诊断泄漏。查看 + 选择列并勾选句柄、GDI 对象和用户对象。在程序运行时观察这些列。如果我的猜测是正确的，您将看到您的流程的 GDI 对象值稳步攀升。当它达到 10,000 时，节目就结束了，Windows 拒绝让您泄漏更多对象。

Icon.FromHandle 的备注部分说：

> 使用此方法时，您必须使用 Win32 API 中的 DestroyIcon 方法处理生成的图标，以确保释放资源。

这是个好建议，但做起来通常很痛苦。[您可以在此答案](https://stackoverflow.com/a/1551567/17034)中找到强制 Icon 对象拥有句柄并自动释放它的技巧。相关代码位于“调用私有图标构造函数”部分之后。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-04-23T23:01:06.677

您可能需要清理您的图标。

[MSDN 上的Icon.FromHandle](http://msdn.microsoft.com/en-us/library/vstudio/system.drawing.icon.fromhandle%28v=vs.90%29.aspx)示例向您展示了如何操作。不幸的是，它需要 PInvoke：

```
[System.Runtime.InteropServices.DllImport("user32.dll", CharSet=CharSet.Auto)]
extern static bool DestroyIcon(IntPtr handle); 
```

然后在你的方法中：

```
IntPtr hicon = tempBitmap.GetHicon();             
Icon bitmapIcon = Icon.FromHandle(hicon);        

// And then somewhere later...
DestroyIcon(bitMapIcon.Handle); 
```

如果您`DestoryIcon`在使用它之前调用它，它可能无法正常工作。对于我自己的这个问题的特定实例，我最终保留了对我创建的最后一个图标的引用，然后`DestroyIcon`在下次生成图标时调用它。

# php - 检查 ZIP 存档中内容的文件大小

> ID：12026667
> 
> 赞同：6
> 
> 时间：2012-08-19T12:59:02.173
> 
> 标签：php, zip, filesize

我需要打开一个 ZIP 存档，检查存档中每个文件的文件大小并返回一个包含数值（大小）的数组。我可能不希望提取存档以检查文件大小。

我自己尝试了很多，但似乎没有 ZIP 函数具有这样的功能，我想不出任何组合来自己编写函数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-10-05T14:05:13.590

我知道这个问题已经很老了。我希望这个答案可以帮助某人。
以下代码循环文件中的所有**`test2.zip`**文件并以字节为单位打印其名称和大小。

```
<?php
$zip = new ZipArchive;
$res = $zip->open('test2.zip');
if ($res) {
    $i=0;
    while(!empty($zip->statIndex($i)['name']))
    {
       echo "Filename: ".$zip->statIndex($i)['name']." | Size: ".$zip->statIndex($i)['size']." bytes<br>";
       $i++;
    }
}
?> 
```

**输出 ：**

```
Filename: main.php | Size: 44 bytes
Filename: test.php | Size: 385 bytes
Filename: test2.json | Size: 35 bytes
Filename: Token.txt | Size: 5 bytes
Filename: trans.png | Size: 95442 bytes
Filename: url_xml.xml | Size: 399 bytes 
```

# c - 比较 Haskell 和 C 计算素数的速度

> ID：12026668
> 
> 赞同：7
> 
> 时间：2012-08-19T12:59:03.780
> 
> 标签：c, math, optimization, haskell, ghc

我最初写了这个（蛮力和低效的）计算素数的方法，目的是确保在 Haskell 中使用“if-then-else”与使用守卫之间没有速度差异（并且没有差异！）。但后来我决定编写一个 C 程序进行比较，我得到了以下结果（Haskell 慢了 25% 以上）：

（请注意，我从以下帖子中得到了使用 rem 而不是 mod 以及编译器调用中的 O3 选项的想法：[在 fibonacci micro-benchmark 中与 C 相比提高 Haskell 的性能](https://stackoverflow.com/questions/6716315/on-improving-haskells-performance-compared-to-c-in-fibonacci-micro-benchmark)）

***Haskell：论坛.hs***

```
divisibleRec :: Int -> Int -> Bool
divisibleRec i j 
  | j == 1         = False 
  | i `rem` j == 0 = True 
  | otherwise      = divisibleRec i (j-1)

divisible::Int -> Bool
divisible i = divisibleRec i (i-1)

r = [ x | x <- [2..200000], divisible x == False]

main :: IO()
main = print(length(r)) 
```

***C：主要.cpp***

```
#include <stdio.h>

bool divisibleRec(int i, int j){
  if(j==1){ return false; }
  else if(i%j==0){ return true; }
  else{ return divisibleRec(i,j-1); }
}

bool divisible(int i){ return divisibleRec(i, i-1); }

int main(void){
  int i, count =0;
  for(i=2; i<200000; ++i){
    if(divisible(i)==false){
      count = count+1;
    }
  }
  printf("number of primes = %d\n",count);
  return 0;
} 
```

我得到的结果如下：

***编译时间***

```
time (ghc -O3 -o runProg Forum.hs)
real    0m0.355s
user    0m0.252s
sys 0m0.040s

time (gcc -O3 -o runProg main.cpp)
real    0m0.070s
user    0m0.036s
sys 0m0.008s 
```

以及以下运行时间：

***在 Ubuntu 32 位上的运行时间***

```
Haskell
17984
real    0m54.498s
user    0m51.363s
sys 0m0.140s

C++
number of primes = 17984
real    0m41.739s
user    0m39.642s
sys 0m0.080s 
```

Haskell 的运行时间给我留下了深刻的印象。但是我的问题是：我可以做任何事情来加速haskell程序没有：

1.  改变底层算法（很明显，通过改变算法可以获得巨大的加速；但我只是想了解我可以在语言/编译器方面做些什么来提高性能）
2.  调用 llvm 编译器（因为我没有安装它）

***[编辑：内存使用]***

在 Alan 发表评论后，我注意到 C 程序使用恒定数量的内存，而 Haskell 程序的内存大小会缓慢增长。起初我认为这与递归有关，但 gspr 在下面解释了为什么会发生这种情况并提供了解决方案。Will Ness 提供了一个替代解决方案（如 gspr 的解决方案）也确保内存保持静态。

***[编辑：大运行总结]***

测试的最大数量：200,000：

(54.498s/41.739s) = ***Haskell 慢 30.5%***

测试的最大数量：400,000：

3m31.372s/2m45.076s = 211.37s/165s = ***Haskell 慢 28.1%***

最大测试数：800,000：

14m3.266s/11m6.024s = 843.27s/666.02s = ***Haskell 慢 26.6%***

***[编辑：艾伦的代码]***

这是我之前编写的没有递归的代码，我在 200,000 上测试过：

```
#include <stdio.h>

bool divisibleRec(int i, int j){
  while(j>0){
    if(j==1){ return false; }
    else if(i%j==0){ return true; }
    else{ j -= 1;}
  }
}

bool divisible(int i){ return divisibleRec(i, i-1); }

int main(void){
  int i, count =0;
  for(i=2; i<8000000; ++i){
    if(divisible(i)==false){
      count = count+1;
    }
  }
  printf("number of primes = %d\n",count);
  return 0;
} 
```

带有和不带有递归的 C 代码的结果如下（对于 800,000）：

带递归：11m6.024s

没有递归：11m5.328s

请注意，无论最大数量如何，可执行文件似乎都占用了 60kb（如系统监视器中所示），因此我怀疑编译器正在检测此递归。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T18:39:45.140

这并不是真正回答您的问题，而是您在评论中询问的关于当数字 200000 增长时内存使用量增加的问题。

当这个数字增加时，列表也会增加`r`。您的代码`r`最后需要全部来计算它的长度。另一方面，C 代码只是增加一个计数器。如果你想要持续使用内存，你也必须在 Haskell 中做类似的事情。代码仍然非常Haskelly，总的来说这是一个明智的提议：你并不需要`divisible`is的数字列表`False`，你只需要知道有多少。

你可以试试

```
main :: IO ()
main = print $ foldl' (\s x -> if divisible x then s else s+1) 0 [2..200000] 
```

（`foldl'`更严格`foldl`的`Data.List`是避免建立thunk）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T18:38:44.627

好棒的模式给你一个很小的胜利（就像 llvm 一样，但你似乎已经预料到了）：

```
{-# LANUGAGE BangPatterns #-}

divisibleRec !i !j | j == 1         = False 
```

在我的 x86-64 上，我通过切换到较小的表示形式（例如 Word32）获得了巨大的胜利：

```
divisibleRec :: Word32 -> Word32 -> Bool
...
divisible :: Word32 -> Bool 
```

我的时间：

```
$ time ./so             -- Int
2262

real    0m2.332s

$ time ./so              -- Word32
2262

real    0m1.424s 
```

这与您的 C 程序更接近，后者仅使用`int`. 它仍然与性能不匹配，我怀疑我们必须查看核心才能找出原因。

编辑：正如我已经注意到的那样，内存使用与命名列表有关`r`。我只是inlined ，让它为每个不可分割的值`r`输出 a并取总和：`1`

```
main = print $ sum $ [ 1 | x <- [2..800000], not (divisible x) ] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T15:33:30.260

写下算法的另一种方法是

```
main = print $ length [()|x<-[2..200000], and [rem x d>0|d<-[x-1,x-2..2]]] 
```

不幸的是，它运行速度较慢。用作`all ((>0).rem x) [x-1,x-2..2]`测试，它运行速度仍然较慢。但也许你会在你的设置上测试它。

用带有爆炸模式的显式循环替换您的代码没有任何区别：

```
{-# OPTIONS_GHC -XBangPatterns #-}
r4::Int->Int
r4 n = go 0 2 where
  go !c i | i>n = c
          | True = go (if not(divisible i) then (c+1) else c) (i+1)

divisibleRec::Int->Int->Bool
divisibleRec i !j | j == 1 = False 
                  | i `rem` j == 0 = True 
                  | otherwise = divisibleRec i (j-1) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T17:26:02.833

当我开始用 Haskell 编程时，我也对它的速度印象深刻。您可能有兴趣阅读[本文](http://www.haskell.org/haskellwiki/Why_Haskell_matters#The_speed_of_Haskell)的第 5 点“Haskell 的速度” 。

# jquery - jQuery 悬停在 IE 中的问题

> ID：12026669
> 
> 赞同：0
> 
> 时间：2012-08-19T12:59:04.607
> 
> 标签：jquery, css, windows, internet-explorer, webcam

我最近做了一个网络摄像头应用程序。在这里看到它：http: [//kennipoke.dk/nickelodeon/da/docs/webcam.php](http://kennipoke.dk/nickelodeon/da/docs/webcam.php)

顶部是 4 个头盔，点击后会将 ?helmet=X 添加到 URI 中。

现在，在实际的网络摄像头屏幕上方，我希望所选头盔以某种透明度出现，这样您就可以通过它看到自己的脸。

图像应该只在您悬停拍摄按钮时出现。

现在我得到了所有这些工作，除了在 IE 中！！！！！！

以下是相关代码：

```
<div id="camera">
    <div id="screen-frame<?php echo $helmet ?>"></div>
    <div id="screen"></div>
    <div id="buttons">
         <div class="buttonPane">
           <a id="shootButton" href="" class="blueButton btn btn-info">Hold musen over denne knap og tag et billede</a>
         </div>
         <div class="buttonPane hidden">
               <a id="cancelButton" href="" class="blueButton btn btn-danger">Tag et nyt</a> <a id="uploadButton" href="" class="greenButton btn btn-info">Videre</a>
         </div>
    </div>
    <span class="settings"></span>
</div> 
```

当然 $helmet 是 URI 的值

```
$('#shootButton').mouseover(function() {
    $('#screen-frame1').removeClass('hide').addClass('show');
});
$('#shootButton').mouseout(function() {
    $('#screen-frame1').removeClass('show').addClass('hide'); 
```

我对 jQuery 没有那么多经验，所以我制作了这个脚本的四个副本。每个#screen-frameX 一个

这是CSS：

```
#camera{
    background:url('../img/cam_bg.jpg') repeat-y;
    border:1px solid #f0f0f0;
    height:370px;
    width:520px;
    -moz-border-radius:4px 4px 0 0;
    -webkit-border-radius:4px 4px 0 0;
    border-radius:4px 4px 0 0;
    -moz-box-shadow:0 0 4px rgba(0,0,0,0.6);
    -webkit-box-shadow:0 0 4px rgba(0,0,0,0.6);
    box-shadow:0 0 4px rgba(0,0,0,0.6);
    margin: 130px 30px 0;
    position: relative;
    z-index: 5;
}

#screen{
    width:520px;
    height:370px;
    background:#ccc;
    line-height: 360px;
    text-align: center;
    color:#666;
}

#screen-frame1 {
    background: url("../img/overlay/transparent/helmet-t-1.png") no-repeat scroll 0 0 transparent;
    position: absolute;
    width: 520px;
    z-index: 10;
}
#screen-frame2 {
    background: url("../img/overlay/transparent/helmet-t-2.png") no-repeat scroll 0 0 transparent;
    position: absolute;
    width: 520px;
    z-index: 10;
}
#screen-frame3 {
    background: url("../img/overlay/transparent/helmet-t-3.png") no-repeat scroll 0 0 transparent;
    position: absolute;
    width: 520px;
    z-index: 10;
}
#screen-frame4 {
    background: url("../img/overlay/transparent/helmet-t-4.png") no-repeat scroll 0 0 transparent;
    position: absolute;
    width: 520px;
    z-index: 10;
}

.hide {
    height:0;
}

.show {
    height:370px;
} 
```

任何人都可以发现任何会导致 IE 出现故障的问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T15:44:53.560

尝试 ：

```
$('#shootButton').mouseenter(function() {
    $('#screen-frame1').removeClass('hide').addClass('show');
});
$('#shootButton').mouseleave(function() {
    $('#screen-frame1').removeClass('show').addClass('hide'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T13:01:24.197

您是否尝试过正常的悬停功能？

```
$('#shootButton').hover(function() {
    $('#screen-frame1').removeClass('hide').addClass('show');
}, function() {
    $('#screen-frame1').removeClass('show').addClass('hide');
}); 
```

* * *

编辑：

`show`为您的和`hide`类尝试以下 CSS ：

```
.show {
   display: block;
   height: 370px;
}
.hide {
   display: none;
   height: 0px;
} 
```

您甚至可能不需要更改`height`属性，这应该可以解决问题，在 IE 中也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T14:12:32.417

据我了解，您的内容是动态加载的吗？尝试使用 .live 而不是单次悬停。

```
$('#shootButton').live('hover', function() {
    $('#screen-frame1').removeClass('hide').addClass('show');
}, function() {
    $('#screen-frame1').removeClass('show').addClass('hide');
}); 
```

# android - iPhone上的html输入类型密码行为

> ID：12026673
> 
> 赞同：0
> 
> 时间：2012-08-19T13:00:12.813
> 
> 标签：android, iphone, html, passwords, android-webview

我在适用于 Android 和 iPhone 4 的 WebView 中有一个 html 页面。登录页面。它有`<input type="password" />`. 在 Android 设备上它工作正常，但在 iPhone 中，当第一次在密码字段上点击时，页面会跳转并且没有键盘出现。只有在第二盘磁带上出现了键盘。更重要的是，当第一次录制（iPhone）时，页面的大小几乎没有调整，这会改变页面的外观。

如何防止跳转/调整页面大小？我怎样才能让它和安卓手机一样工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T14:44:01.467

我设置了这个小小提琴来测试它：http: [//jsfiddle.net/9keRU/](http://jsfiddle.net/9keRU/)

在我的iphone上试了一下，效果很好。键盘立即弹出并放大该字段。没有什么意外。也许您可以向我们展示一些代码，因为问题可能出在其他地方。

# c++ - 具有树状组织项目的 Qt 小部件

> ID：12026674
> 
> 赞同：1
> 
> 时间：2012-08-19T13:00:30.020
> 
> 标签：c++, qt, qtreeview, qlistview

我想要一个带有以树结构组织的项目的小部件。但是，它应该在一行中查看，并且每个子树都应该用大括号表示。例如：

**1\. element1 2\. element2 3\. element3** ( *3\. element31 4\. element41 {4\. element43 5\. element53} 5\. element 51 6\. element61* 3\. element32 4\. element 42) **4 element4 5\. element5**

每个元素还应该有一个关联的图标并且应该是可点击的。我想到了 QListView 或 QTreeView。第二个听起来更好，但我必须知道如何强制它以这种方式显示项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T13:53:46.573

正确的方法仍然是实现自己的观点。就用户与视图的交互而言，它应该不是那么困难（[参见](http://qt-project.org/doc/qt-4.8/itemviews-chart.html)Qt 的 pieview 示例，您的应该更简单）。

或者，您可以只创建一组样式按钮（像这样：）

```
//stylesheet:
QPushButton {
     background-color: white;
     border-width:0px;
    border-style:none;
 }
 QPushButton:pressed {
     background-color: blue;
     color:white;
 }
 QPushButton:checked {
     background-color: darkblue;
     color:white;
 } 
```

然后，每个按钮将代表您视图中的一个项目。

# javascript - 如何检查浏览器是否支持文本溢出：省略号

> ID：12026675
> 
> 赞同：1
> 
> 时间：2012-08-19T13:00:33.953
> 
> 标签：javascript, firefox, browser, ellipsis

我想检查省略号溢出的可支持性，而不是通过查询浏览器类型或版本。那可能吗？

我知道 Firefox 版本 < 7 不支持这一点。

谢谢，塔尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T13:13:09.157

没有尝试过这种方法，但这可能有效：

```
function checkEllipsis() {
  var d = document.createElement('div');
  if(typeof d.style.textOverflow == 'undefined')
    return false;
  d.style.textOverflow = 'ellipsis';
    return d.style.textOverflow == 'ellipsis';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T13:07:17.527

CanIUse 是一个非常有用的检查浏览器支持的网站 - [http://caniuse.com/#search=ellipsis](http://caniuse.com/#search=ellipsis)。

不知道如何在不测试浏览器的情况下测试浏览器是否支持某些东西？！[该线程](https://stackoverflow.com/questions/4927257/text-overflowellipsis-in-firefox-4-and-ff5)涵盖了类似的主题，并且可能有用。

# ios - iOS中的facebook SDK错误

> ID：12026676
> 
> 赞同：0
> 
> 时间：2012-08-19T13:00:54.687
> 
> 标签：ios, facebook, sdk

我完全按照developers.facebook.com中的教程进行操作，但是当我按下登录时，我得到一个SIGABRT错误。调试器显示：

```
[SixthViewController login:]: unrecognized selector sent to instance 0x8476230
2012-08-19 15:56:35.710 pyxida3[21363:c07] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[SixthViewController login:]: unrecognized selector sent to instance 0x8476230'
*** First throw call stack:
(0x256c022 0x1c7fcd6 0x256dcbd 0x24d2ed0 0x24d2cb2 0x256de99 0xde514e 0xde50e6 0xe8bade 0xe8bfa7 0xe8b266 0xe0a3c0 0xe0a5e6 0xdf0dc4 0xde4634 0x1f46ef5 0x2540195 0x24a4ff2 0x24a38da 0x24a2d84 0x24a2c9b 0x1f457d8 0x1f4588a 0xde2626 0x280d 0x2775)
terminate called throwing an exception(lldb) 
```

这是调用的方法

```
- (IBAction)authButtonAction:(id)sender {
AppDelegate* appDelegate = (AppDelegate*)[[UIApplication sharedApplication] delegate];
// The user has initiated a login, so call the openSession method
// and show the login UX if necessary.
[appDelegate openSessionWithAllowLoginUI:YES];

} 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T13:33:21.357

显然，您在某处调用 SixthViewController 的登录，并且该方法未在该 viewController 类上定义。请检查您在代码中的哪个位置进行登录调用。您可能期望那里有另一个实例（可能是您定义登录方法的应用程序委托？），但实际上，该实例指向 SixthViewController 实例。

就像 OhhMee 发布的那样，显示登录调用的代码片段可以更加清晰。

# c# - 动态创建的命令按钮不触发命令

> ID：12026679
> 
> 赞同：2
> 
> 时间：2012-08-19T13:01:12.730
> 
> 标签：c#, .net, button, webforms

我正在为 Umbraco 创建一个自定义数据类型。这种数据类型只是从数据库中读取记录并将它们呈现在 html 表中，没有重复器。在每一行中，最初有两个按钮，一个用于编辑记录，一个用于删除记录。

单击编辑时，该行将进入编辑模式，其中使用文本框代替文字，并且按钮不是“编辑”和“删除”，而是“保存”和“取消”。单击这些按钮中的任何一个似乎都不起作用。他们应该发射的命令不是发射。

我读过关于必须在页面加载之前创建这些按钮的信息，我这样做了。我对每种类型都有一个列表（保存、取消）。那是在 Init 上生成的，ids 是基于记录的 ids 的。这里也分配了命令和命令参数。

但是，这些命令似乎仍然没有触发。

**代码**

```
public class ProductManagerDataEditor : System.Web.UI.UpdatePanel, umbraco.interfaces.IDataEditor
{
    private umbraco.interfaces.IData _data;

    //Properties
    private List<Record> Records { get; set; }
    private int EditRecordID = 0;

    //Editor Controls
    TextBox tb_EditName;
    TextBox tb_EditPrice;
    Button btn_Add;
    List<Button> EditButtons;
    List<Button> DeleteButtons;
    List<Button> SaveButtons;
    List<Button> CancelButtons;

    /// <summary>
    /// Constructor.
    /// Reads in curent data along with configuration settings for this data type.
    /// </summary>
    /// <param name="Data"></param>
    /// <param name="Configuration"></param>
    public ProductManagerDataEditor(umbraco.interfaces.IData Data, SortedList<String, String> Configuration)
    {
        _data = Data;
    }

    public virtual bool TreatAsRichTextEditor
    {
        get { return false; }
    }
    public bool ShowLabel
    {
        get { return true; }
    }
    public Control Editor { get { return this; } }
    public void Save()
    {

    }

    /// <summary>
    /// On Init Method
    /// </summary>
    protected override void OnInit(EventArgs e)
    {
        base.OnInit(e);
    }

    /// <summary>
    /// On Load Method
    /// </summary>
    protected override void OnLoad(EventArgs e)
    {
        base.OnLoad(e);
            LoadRecords();
        GenerateControls();
    }

    protected override void Render(HtmlTextWriter writer)
    {
        base.Render(writer);
        RenderTableContents(writer);
    }

    /// <summary>
    /// Generates the buttons to be used
    /// </summary>
    protected void GenerateControls()
    {
        SaveButtons = new List<Button>();
        CancelButtons = new List<Button>();
        DeleteButtons = new List<Button>();
        EditButtons = new List<Button>();

        //Other Buttons
        foreach (Record r in Records)
        {
            //Save Button
            Button btn_Save = new Button();
            btn_Save.CssClass = "btn-save";
            btn_Save.ID = "btnSave_" + r.ID;
            btn_Save.Text = "Save";
            btn_Save.Command += new CommandEventHandler(Save);
            btn_Save.CommandArgument = r.ID.ToString();

            //Cancel Edting Button
            Button btn_Cancel = new Button();
            btn_Cancel.CssClass = "btn-cancel";
            btn_Cancel.ID = "btnCancel";
            btn_Cancel.Text = "Cancel";
            btn_Cancel.Click += new EventHandler(CancelEdit);

            //Delete Button
            Button btn_Del = new Button();
            btn_Del.CssClass = "btn-delete";
            btn_Del.ID = "btnDelete_" + r.ID;
            btn_Del.Text = "Delete";
            btn_Del.Command += new CommandEventHandler(Delete);
            btn_Del.CommandArgument = r.ID.ToString();

            //Edit Button
            Button btn_Edit = new Button();
            btn_Edit.CssClass = "btn-edit";
            btn_Edit.ID = "btnEdit_" + r.ID;
            btn_Edit.Text = "Edit";
            btn_Edit.Command += new CommandEventHandler(EditRecord);
            btn_Edit.CommandArgument = r.ID.ToString();

            SaveButtons.Add(btn_Save);
            CancelButtons.Add(btn_Cancel);
            DeleteButtons.Add(btn_Del);
            EditButtons.Add(btn_Edit);
        }
    }

    /// <summary>
    /// Loads the records from the database
    /// </summary>
    protected void LoadRecords()
    {
        Records = //Loaded from db...
    }

    /// <summary>
    /// Renders The Table of Records
    /// </summary>
    protected void RenderTableContents(HtmlTextWriter w)
    {
        bool editMode = false;

        w.Write("<table class='product-manager' cellspacing='0' cellpadding='3px'>");
        w.Write("<tr class='head'>");
        w.Write("<th>Name</th>");
        w.Write("<th>Price</th>");
        w.Write("<th></th>");
        w.Write("<th></th>");
        w.Write("</tr>");

        int buttonIndex = 0;
        foreach (Record r in Records)
        {
            //If editing this record, display text boxes
            if (EditRecordID == r.ID)
            {
                editMode = true;

                tb_EditName = new TextBox { Text = r.Name };
                tb_EditPrice = new TextBox { Text = r.Price.ToString() };

                w.Write("<tr>");
                    w.Write("<td>");
                    tb_EditName.RenderControl(w);
                    w.Write("</td>");
                    w.Write("<td>");
                    tb_EditPrice.RenderControl(w);
                    w.Write("</td>");
                    w.Write("<td>");
                    SaveButtons[buttonIndex].RenderControl(w);
                    w.Write("</td>");
                    w.Write("<td>");
                    CancelButtons[buttonIndex].RenderControl(w);
                    w.Write("</td>");
                w.Write("</tr>");
            }
            //Not in edit mode
            else
            {
                w.Write("<tr>");
                    w.Write("<td>" + t.Name + "</td>");
                    w.Write("<td>&pound;" + t.Price + "</td>");
                    w.Write("<td>");
                    EditButtons[buttonIndex].RenderControl(w);
                    w.Write("</td>");
                    w.Write("<td>");
                    DeleteButtons[buttonIndex].RenderControl(w);
                    w.Write("</td>");
                w.Write("</tr>");
            }
            buttonIndex++;
        }

        w.Write("</table>");
    }

    #region Events
    /// <summary>
    /// Sets the id of the row to edit
    /// </summary>
    protected void EditRecord(object sender, CommandEventArgs e)
    {
        EditRecordID = e.CommandArgument.ToString();
    }

    /// <summary>
    /// Cancels editing mode
    /// </summary>
    protected void CancelEdit(object sender, EventArgs e)
    {
        EditRecordID = 0;
    }

    /// <summary>
    /// Deletes Selected Record
    /// </summary>
    protected void DeleteRecord(object sender, CommandEventArgs e)
    {
        //TODO
    }

    /// <summary>
    /// Updates Record Details
    /// </summary>
    protected void Save(object sender, CommandEventArgs e)
    {
       //Update the Record
    }
    #endregion

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T15:47:12.317

我试过你的代码，显然有问题的代码是渲染。`UpdatePanel`根本没有将按钮视为触发器。

解决方案是将控件添加到面板中`asp:Table`并让其`UpdatePanel`进行渲染，因此跳过渲染代码。

这是您需要更改的内容（这仅适用于编辑按钮，但您可以为所有人添加代码）：

```
protected void GenerateControls()
{
    var table = new Table();
    var headerRow = new TableHeaderRow();
    var headerCell = new TableHeaderCell();
    headerCell.Text = "Name";
    headerRow.Cells.Add(headerCell);
    headerCell = new TableHeaderCell();
    headerCell.Text = "Price";
    headerRow.Cells.Add(headerCell);
    headerCell = new TableHeaderCell();
    headerRow.Cells.Add(headerCell);
    headerCell = new TableHeaderCell();
    headerRow.Cells.Add(headerCell);
    table.Rows.Add(headerRow);

    //Other Buttons
    foreach (Record r in Records)
    {
        var row = new TableRow();

        var cell = new TableCell();
        //Edit Button
        Button btn_Edit = new Button();
        btn_Edit.CssClass = "btn-edit";
        btn_Edit.ID = "btnEdit_" + r.ID;
        btn_Edit.Text = "Edit";
        btn_Edit.Command += new CommandEventHandler(EditRecord);
        btn_Edit.CommandArgument = r.ID.ToString();
        cell.Controls.Add(btn_Edit);
        row.Cells.Add(cell);
        table.Rows.Add(row);
    }

    ContentTemplateContainer.Controls.Add(table);
} 
```

顺便说一句，这看起来像一个网格。为什么不使用 a`GridView`或 a `ListView`？

# matlab - textread 不适用于 MATLAB 中的 .txt 文件

> ID：12026680
> 
> 赞同：0
> 
> 时间：2012-08-19T13:01:18.650
> 
> 标签：matlab, text-files, text-parsing

在 MATLAB 中：在我尝试应用`textread`到*.txt*文件之前，我已经使用脚本将文件从大文本文件拆分为较小的文本文件，该脚本成功执行并使用函数`fopen`, `fgetl`.

大文本文件 -> 小文本文件 1、小文本文件 2、小文本文件 3

小文本文件 1 的输出：

```
Run Lat Long Time

2   1    13   3

2   3    3   3  

3   3    5   12 
```

从拆分的文本文件 - 小文本文件 1 - 是列格式，我应用`textread`并返回来自文本文件的随机（分散）数据的混合（来自*col2*和*col3*的随机数据样本）。

在代码中：函数是基本的：

```
[col1 col2] = textread('smallfile.txt', '%d %d'); 
```

输出返回：

```
3
12
13
5 
```

不是 Col1 =`2 2 3`

我试图通过检查 ANSI 编码并`rt`在我的打开函数中应用来修复它。但没有成功。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T17:49:30.713

You're reading only two numbers at a time with `textread`, instead of four. Try this:

```
[col1 col2, col3, col4] = textread('test.txt', '%d %d %d %d'); 
```

This yields:

```
col1 =

     2
     2
     3 
```

like you wanted.

### P.S

You can use the asterisk (`*`) in a field to ignore that field. For example, if you want to extract the first two columns and ignore the other two, you can do the following:

```
[col1, col2] = textread('test.txt', '%d %d %*d %*d'); 
```

# django - Django 1.4：为什么我的上下文处理器不工作？

> ID：12026689
> 
> 赞同：5
> 
> 时间：2012-08-19T13:02:26.917
> 
> 标签：django, django-templates, django-1.4

我最近将一个项目从 Django 1.3 升级到 1.4，这似乎破坏了我的上下文处理器。

在`myapp/myapp/processors.py`：

```
def currentPath(request):
    return {'current_path': request.get_full_path()} 
```

在`myapp/myapp/settings.py`：

```
from django.conf import global_settings

global_settings.TEMPLATE_CONTEXT_PROCESSORS += (
    'myapp.processors.currentPath',
    'django.core.context_processors.request',
) 
```

在任何模板中，`{{ current_path }}`都是预期的——并且在升级之前确实返回了当前路径。现在，它根本没有得到处理。我完全被困在这里。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-06-11T17:33:37.177

`Django 1.8`添加处理器`TEMPLATE_CONTEXT_PROCESSORS`将不起作用 。

```
Deprecated since version 1.8:
Set the 'context_processors' option in the OPTIONS of a DjangoTemplates backend instead. 
```

你必须这样做：

```
TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [
            # insert your TEMPLATE_DIRS here
        ],
        'OPTIONS': {
            'context_processors': [
                # Insert your TEMPLATE_CONTEXT_PROCESSORS here or use this
                # list if you haven't customized them:
                'django.contrib.auth.context_processors.auth',
                'django.template.context_processors.debug',
                'django.template.context_processors.i18n',
                'django.template.context_processors.media',
                'django.template.context_processors.static',
                'django.template.context_processors.tz',
                'django.contrib.messages.context_processors.messages',
            ],
            'loaders': [
                # insert your TEMPLATE_LOADERS here
            ]
        },
    },
] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T18:38:28.917

只是为了踢，你会考虑指定通常的设置方式：

```
- global_settings.TEMPLATE_CONTEXT_PROCESSORS += (
+ TEMPLATE_CONTEXT_PROCESSORS = (                                                 
+     'django.contrib.auth.context_processors.auth',                                   
+     'django.core.context_processors.debug',                                       
+     'django.core.context_processors.i18n',                                        
+     'django.core.context_processors.media',                                       
+     'django.core.context_processors.static',                                      
+     'django.contrib.messages.context_processors.messages',
     'myapp.processors.currentPath',
     'django.core.context_processors.request',
 ) 
```

这可以消除您（看起来很有用！）`global_settings`作为问题根源的参考。

其次，如果你跑

```
manage.py shell 
```

做

```
from myapp.processors import currentPath 
```

工作？您的项目结构似乎有点古怪（我没有在与`settings.py`以前相同的目录中看到上下文处理器； my`context.py`与 a 位于同一目录中`models.py`，我理解它通常不应与 相同的目录`settings.py`）。

*（根据OP的要求从评论转换为回答）*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-19T13:05:03.260

你应该返回字典：

```
def currentPath(request):
    return {'current_path': request.get_full_path()} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-19T17:57:03.053

您需要包含`RequestContext`要处理的上下文处理器。

您可以使用[`render`](https://docs.djangoproject.com/en/1.4/topics/http/shortcuts/#render)快捷方式将其自动包含在内：

```
from django.shortcuts import render

def my_view(request):
   context = {}
   return render(request, 'mytemplate.html', context) 
```

如果您使用基于分类的视图，`RequestContext`则会自动包含 。

# haskell - Haskell：解析键值对（键：值）

> ID：12026690
> 
> 赞同：1
> 
> 时间：2012-08-19T13:02:31.473
> 
> 标签：haskell, parsec

我将如何使用 parsec 解析包含键和值的文件到`[[(String, String)]]`？

```
key1: value 1 key2: value 2
key1: value 1 key2: value 2
key1: value 1 key2: value 2 
```

key是一个词，value可以是多个词。

我努力了

```
tag :: GenParser Char st Tag
tag = do
  name <- key
  value <- manyTill anyChar (try key)
  return (name, value)

key :: GenParser Char st String
key = do
  name <- many (noneOf ": ")
  char ':'
  return name

> parse (many tag) "" "key1: value 1 key2: value 2"
Right [("key1"," value 1 ")] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T15:04:52.943

I have changed the `tag` function to test both newline and next key, and that works for me.

```
tag :: GenParser Char st Tag
tag = do
  name <- key
  value <- manyTill anyChar ((test newline) <|> (test key))
  return (name, strip value)

test :: GenParser Char st a -> GenParser Char st ()
test p = lookAhead $ try p >> return ()

key :: GenParser Char st String
key = do
  name <- many1 (noneOf ": \n\r")
  char ':'
  return name 
```

# c++ - 套接字的 pty 功能

> ID：12026694
> 
> 赞同：2
> 
> 时间：2012-08-19T13:03:31.880
> 
> 标签：c++, linux, sockets, pty, libreadline

我正在编写 linux 守护程序，我想实现通过 telnet 配置其参数的能力。我有一个 cli 接口代码，使用带有历史和完成程序的 gnu readline 库编写，我想将该接口代码用于守护进程。

我尝试将标准输入/标准输出重定向到套接字，将 rl_instream/rl_outstream 重定向到套接字，读/写到主/从 pty，但没有成功。

[类似的问题在这里问](https://groups.google.com/d/topic/comp.os.linux.development.apps/WY9XcjKe3cY/discussion)没有任何答案。

还阅读[了这个问题](https://stackoverflow.com/questions/2500344/forkpty-socket)，但我没有子进程。

我的问题是：

1.  如何在单个进程中使用 pty 功能？
2.  如果我只有单个进程，是否需要使用 master 和 slave pty？

代码示例（在 pty 设备上没有操作），预期结果 - readline 正常工作

```
char* readline_buff;

int main(void){
int mSock = socket(PF_INET, SOCK_STREAM, IPPROTO_IP);
int socketfd, n, flag = 1;

int addrlen;
daemon(1,1);
setsockopt(mSock, SOL_SOCKET, SO_REUSEADDR, &flag, sizeof(int));
struct sockaddr_in addr;
bzero(&addr, sizeof(addr));
addr.sin_family = AF_INET;
addr.sin_port = htons(5000);
addr.sin_addr.s_addr = INADDR_ANY;
bind(mSock, (const sockaddr*)&addr, sizeof(addr));
listen(mSock,SOMAXCONN);
addrlen = sizeof(addrlen);
bzero(&addr, sizeof(addr));

int m_pty = posix_openpt(O_RDWR);
grantpt(m_pty);
unlockpt(m_pty);
string m_ptsname = ptsname(m_pty);
int slave = open(m_ptsname.c_str(), O_RDWR);
//
socketfd = accept(mSock, (struct sockaddr *) &addr, (socklen_t*)&addrlen);
//
close(STDOUT_FILENO);
dup2(socketfd, STDOUT_FILENO);
close(STDIN_FILENO);
dup2(socketfd, STDIN_FILENO);
close(STDERR_FILENO);
dup2(socketfd, STDERR_FILENO);
//
 while(true){   
  readline_buff = readline("ME: ");
  add_history(readline_buff);
  free(readline_buff);
}
return 0;
} 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T16:16:38.067

telnet 协议基本上是一个基于行的协议，因此它不能轻易处理单个按键或特殊代码。您可以要求连接的 telnet 客户端发送每个密钥而不是线路，这是通过称为 telnet 协商的方式完成的。

要了解更多信息，您应该阅读 telnet RFC，最重要的是[RFC 854](http://www.faqs.org/rfcs/rfc854.html)和[RFC 855](http://www.faqs.org/rfcs/rfc855.html)。要禁用客户端编辑，您还应该阅读[RFC 1116](http://www.faqs.org/rfcs/rfc1116.html)。另请查看[Wikipedia 页面](http://en.wikipedia.org/wiki/TELNET)以查看所有与 telnet 相关的 RFC 的列表。

简而言之，您必须向客户端发送一系列命令，要求它停止进行线路模式处理，并希望客户端回复它会停止执行此操作。这不是简单的事情，实际上恰恰相反。不过，要实现一个完整的 telnet 状态机是可以的。即使这样，您也可能无法正确使用 readline 库，因为击键可能不会被识别为正确的向上/向下键，并且您可能仍需要进行一些翻译。我实际上建议您也跳过正常的 stdin/stdout 处理和 PTY 处理，让客户端处理编辑，同时您可以通过使用 readline 等外部库的功能或使用内部库来跟踪历史记录历史队列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T13:03:30.673

不需要 Pty。您需要`readline`通过将以下行添加到`/etc/inputrc`或`~/.inputrc`文件来配置新的历史记录键：

```
"\e[A":history-search-backward
"\e[B":history-search-forward 
```

原因：

通常，当用户按下向上或向下箭头键时，终端程序（阅读：telnet 客户端）会发送转义码。

转义码是：

```
\33[A   - up arrow 
\33[B   - down arrow 
```

因为您的程序打印: `^[[A^[[A^[[A^[[A`，所以它不会重新设置转义序列。所以你需要将这些转义序列告诉`readline`.

查看[更多信息](https://wiki.archlinux.org/index.php/Readline)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-30T02:07:52.703

Readline 提供了一个测试文件 rlPtyTest.c，它通过 PTY 测试 readline。您可以将其用作实现套接字的模板。[https://github.com/alexmac/alcextra/blob/master/readline-6.2/examples/rlptytest.c](https://github.com/alexmac/alcextra/blob/master/readline-6.2/examples/rlptytest.c)

# facebook - 获取任意 facebook 用户的详细个人资料信息

> ID：12026696
> 
> 赞同：1
> 
> 时间：2012-08-19T13:04:23.383
> 
> 标签：facebook, facebook-graph-api

我想知道，对于任意 facebook 用户，给定他们的 facebook ID，我可以如何访问他们向用户公开的详细个人资料信息？

我有一个Facebook个人资料ID列表，我想编制一些统计数据，例如照片数量的分布和点赞数的分布等。对于那些公开信息的人，我可以查看此信息（点赞数，用户被标记的照片数量等）作为登录用户。

如何访问与应用程序相同的信息？一些消息来源告诉我，我需要明确请求每个用户对我感兴趣的每个字段的许可。如果我有 40,000 个随机用户，这显然是不可行的。

有什么出路，还是我被困在这一点上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T13:28:40.240

您可以通过访问/请求[http://graph.facebook.com/PROFILE_ID来检索他们的公开信息](http://graph.facebook.com/PROFILE_ID)

有关更多详细信息，您还可以查看 FQL 用户表。看来他们是“任何有效的访问令牌”可用的附加信息（可能是您自己授权的，类似于您登录到 Facebook）[http://developers.facebook.com/docs/reference/ fql/用户/](http://developers.facebook.com/docs/reference/fql/user/) . 请注意，仍有一长串例外情况。

任何说您需要许可的内容都将无法访问。要检索该信息，用户必须明确授权您的应用程序和必要的权限。

# linux - Autotools 和一个带有普通 Makefile 的嵌套项目项目

> ID：12026697
> 
> 赞同：1
> 
> 时间：2012-08-19T13:04:38.353
> 
> 标签：linux, autotools, makefile

这个问题扩展了问题[How to handle subprojects with autotools？](https://stackoverflow.com/questions/11776382/how-to-handle-subprojects-with-autotools)

所以我在 modules/libfoo 中有一些带有自己的 Makefile（不是 GNU autotools）的项目

我添加了 SUBDIRS = include/jsonbox Makefile.am 并且它编译得很好，但前提是我从顶级目录调用 ./configure 和 make 。

如果我创建一个子目录，比如 build，然后从中运行 ../configure，我在 make 过程中会遇到错误：

```
 Making all in modules/libfoo
   /bin/sh: line 17: cd: modules/libfoo: No such file or directory
   make: *** [all-recursive] Error 1 
```

有可能处理这个吗？我需要几个用于不同拱门和 CFLAGS 的构建目录。

**编辑：** 正如它在[文档](http://www.gnu.org/software/automake/manual/html_node/Third_002dParty-Makefiles.html#Third_002dParty-Makefiles)中所建议的那样，我在嵌套项目中创建了一个 GNUmakefile.in。但它仍然不适用于 VPATH：

```
Making all in modules/libfoo
make[1]: Entering directory `/home/galadog/test/build/moudles/libfoo'
GNUmakefile:2: Makefile: No such file or directory
make[1]: *** No rule to make target `Makefile'.  Stop.
make[1]: Leaving directory `/home/galadog/test/build/moudles/libfoo'
make: *** [all-recursive] Error 1 
```

**Edit2** 实际的 Makefile 可以在这里看到： [https ://github.com/anhero/JsonBox/blob/master/Makefile](https://github.com/anhero/JsonBox/blob/master/Makefile)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T08:17:32.890

可悲的是，如果没有以下任何一项，您将无法*正确*实现这一目标：

1.  修改/替换上游 Makefile，
2.  为上游库添加自己的 make 规则并忽略它们的 Makefile。

您链接的文档主要集中在解决问题上`make distcheck`，而不支持实际构建。

然而，有一个简单的技巧可以用最少的工作来工作——它将整个子树复制到构建目录。这不是一个很好的解决方案，但它会使子树构建工作：

```
SUBDIRS = modules/libfoo

# and possibly all other -recursive targets you'll be using
all-recursive: copy-libfoo

copy-libfoo:
    mkdir -p modules
    cp -R -H $(top_srcdir)/modules/libfoo modules/ 
```

但正如我所说，这很丑陋。上游 Makefile 仍然需要定义正确的 automake 目标（`all`等`install`），因此在您的情况下，您还需要`GNUmakefile`在项目子目录中添加一个，例如：

```
include Makefile
INSTALL: 
```

这将提供一个虚拟目标来避免`*** No rule to make target 'install'`；可能也是这样。然后`EXTRA_DIST`，如果您想使用`make dist`，但这都包含在链接的文档中。

* * *

老实说，你在一个湿滑的地面上。如果我是你，我要么干脆不使用该项目并忽略它，因为维护它比从头开始编写相同的东西更难。

我会考虑的第二个解决方案，一个正确的解决方案是在你的主目录中复制 Makefile`Makefile.am`并且不对该子目录使用递归自动生成：

```
LIBRARIES = modules/libfoo/libfoo.a

modules_libfoo_libfoo_a_SOURCES = modules/libfoo/src/a.c # ...

# and possibly some...
EXTRA_DIST = # ... 
```

# java - 使用 Jersey 手动定义资源

> ID：12026701
> 
> 赞同：0
> 
> 时间：2012-08-19T13:05:50.393
> 
> 标签：java, jersey

我已将我的资源分成接口 - impl，因为它更有意义，但如果我让它扫描我的资源，最新版本的球衣似乎不支持这一点。

如何在 web.xml 中手动定义资源？如果我在 web.xml 中手动定义资源 impl，这会起作用吗？

谢谢亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-19T21:17:20.377

[1]。创建一个扩展**javax.ws.rs.core.Application**的 java 类并注册您的资源：

```
public class MyRESTApp 
     extends Application {
    @Override
    public Set<Class<?>> getClasses() {
        Set<Class<?>> s = new HashSet<Class<?>>();

        s.add(MyResource.class);
        ....

        return s;
    }
} 
```

[2]。在 web.xml 中注册应用程序如果您使用的是**spring**，请在 web.xml 中：

```
<servlet>
    <servlet-class>com.sun.jersey.spi.spring.container.servlet.SpringServlet</servlet-class>
    <init-param>
    <param-name>javax.ws.rs.Application</param-name>
        <param-value>com.xxx.MyRESTApp</param-value>
    </init-param>
    ...
</servlet> 
```

如果您使用的是**guice**，请在 web.xml 中：

```
<filter>
    <filter-name>guiceFilter</filter-name>
    <filter-class>com.google.inject.servlet.GuiceFilter</filter-class>
</filter>

<filter-mapping>
   <filter-name>guiceFilter</filter-name>
   <url-pattern>/*</url-pattern>
</filter-mapping>

<listener>
    <listener-class>com.xx.MyGuiceServletContextListener</listener-class>
</listener> 
```

**然后创建扩展com.google.inject.servlet.GuiceServletContextListener**的 java 类 MyGuiceServletContextListener

 **```
public class MyGuiceServletContextListener 
     extends GuiceServletContextListener {
    @Override
    protected Injector getInjector() {
        Guice.createInjector(new JerseyServletModule() {
@Override
protected void configureServlets() {
        // Route all requests through GuiceContainer
        // IMPORTANT
        // If this property is not defined guice tries to find the @Path annotated types defied at the injector
        Map<String,String> params = new HashMap<String, String>();
        params.put("javax.ws.rs.Application",
        MyRESTApp.class.getName());
        serve("/*").with(GuiceContainer.class,
                         params);
        });
    }
} 
```**

# facebook - Facebook 之类的回调函数在歌剧中不起作用

> ID：12026703
> 
> 赞同：1
> 
> 时间：2012-08-19T13:05:52.457
> 
> 标签：facebook, callback, facebook-like

不要对此按钮使用回调函数。Opera Dragonfly for facebook 显示此错误：

> 未处理的错误：JSON.parse：字符串中未转义的控制字符：“

在文件[http://connect.facebook.net/ru_RU/all.js](http://connect.facebook.net/ru_RU/all.js)

代码页标准：

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/ru_RU/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

        <script type="text/javascript">
            window.fbAsyncInit = function() {
                FB.Event.subscribe('edge.create', function(href, widget) {
                   alert('ok'); 
                });
            }
        </script>
        <div class="fb-like" data-send="false" data-layout="button_count" data-width="150" data-show-faces="true"></div> 
```

# python - Scrapy 如果请求错误然后返回项目

> ID：12026707
> 
> 赞同：1
> 
> 时间：2012-08-19T13:06:29.527
> 
> 标签：python, scrapy, web-crawler

我被困在试图找出解决方案...

我的 Scrapy 蜘蛛抓取一个站点并将一些数据放入项目，然后根据抓取的数据返回一个请求，然后去爬取其他站点以完成该项目。

发生的情况是，有时第二个 URL 可能会返回错误，因此项目也不会被输出。

如何将项目携带到 errback 功能？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T15:05:11.163

从[文档](http://doc.scrapy.org/en/latest/topics/request-response.html)：

> errback (callable) – 如果在处理请求时引发任何异常，将调用该函数。这包括因 404 HTTP 错误等而失败的页面。它接收 Twisted Failure 实例作为第一个参数。

尝试使用 lambda：

```
 ...
    yield Request(..., errback=lambda failure, item=item: self.on_error(failure, item))

def on_error(self, failure, item):
    ... 
```

# java - 在面向对象设计中保持数据和格式分离

> ID：12026708
> 
> 赞同：4
> 
> 时间：2012-08-19T13:06:30.227
> 
> 标签：java, object-oriented-analysis

我正在创建一个程序，其中有一个名为“层次结构”的对象，它只不过是一个带有字符串（`ArrayList<ArrayList<String>>`）和适当吸气剂的列表的列表。

用户应该能够选择这些层次结构的表示/格式 - 例如，层次结构 [1,2,3,4] 是否应该表示为 {1,2,3,4} 或 (1-4) 或其他，在写入文件之前。

有没有一种聪明/标准的方法来进行这种数据和格式的分离？我正在考虑创建一个“FormattedHierarchy”对象，它仅由一个层次结构对象和一个格式化对象组成，但我不知道这是否是一个好的设计选择。

感谢任何指针/提示/答案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T13:10:14.943

您可以做的最糟糕的事情是将层次结构数据表示与格式相结合。层次结构类不应该对格式化一无所知*。*我的建议是创建一个`HierarchyFormatter`具有多个不同实现的单独接口。

我认为代码值千言万语：

```
public interface HierarchyFormatter {
    String format(Hierarchy hierarchy);
}

public class BraceFormatter implements HierarchyFormatter {
    public String format(Hierarchy hierarchy) {
        //...
    }
}

public class RangeFormatter implements HierarchyFormatter {
    public String format(Hierarchy hierarchy) {
        //...
    }
} 
```

这称为[策略设计模式](http://en.wikipedia.org/wiki/Strategy_pattern)。如果某些代码需要格式化您的层次结构，只需传递一个实例`HierarchyFormatter`- 任何实例。

如果您想用某种格式永久绑定层次结构，请使您的格式化程序有状态：

```
public abstract class HierarchyFormatter {
    protected final Hierarchy hierarchy;

    public HierarchyFormatter(Hierarchy hierarchy) {
        this.hierarchy = hierarchy;
    }

    public abstract String format();
}

public class BraceFormatter extends HierarchyFormatter {
    public String format() {
        //...
    }
}

public class RangeFormatter extends HierarchyFormatter {
    public String format() {
        //...
    }
} 
```

每次创建格式化程序时，都将层次结构类封装在其中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T13:11:03.633

您可以将其作为模型视图模式来处理。您的*模型*是包含实际数据的模型：`ArrayList<ArrayList<String>>`视图*是*进行格式化的模型，以各种方式呈现数据。这就是 Formatting 类。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T13:10:09.560

您可以添加类似于标准`toString()`方法的方法，例如`toArrayString()`将对象格式化为 {1,2,3,4} 或`toIntervalString()`将其格式化为 (1-4) ...

# python - matplotlib：更快的 PDF 生成？

> ID：12026711
> 
> 赞同：10
> 
> 时间：2012-08-19T13:06:43.723
> 
> 标签：python, matplotlib, pdf-generation

我想使用[matplotlib](http://matplotlib.sourceforge.net/)生成一些 PDF 文件。我的主要问题是 matplotlib 很慢，每个文件需要 0.5 秒。

我试图弄清楚为什么需要这么长时间，我编写了以下测试程序，它只是将一条非常简单的曲线绘制为 PDF 文件：

```
import matplotlib
matplotlib.use('Agg')
import matplotlib.pyplot as plt

X = range(10)
Y = [ x**2 for x in X ]

for n in range(100):
    fig = plt.figure(figsize=(6,6))
    ax = fig.add_subplot(111)
    ax.plot(X, Y)
    fig.savefig("test.pdf") 
```

但即使是这么简单的事情也需要很多时间：100 个 PDF 文件总共需要 15-20 秒（现代英特尔平台，我尝试了 Mac OS X 和 Linux 系统）。

有什么技巧和技术可以用来加速 matplotlib 中的 PDF 生成吗？显然我可以在多核平台上使用多个并行线程，但我还能做些什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T14:45:15.433

如果可行，您可以使用多进程来执行此操作（假设您的机器上有多个内核）：

**注意：以下代码将在您机器上的当前目录中生成 40 个 pdf**

```
import matplotlib.pyplot as plt

import multiprocessing

def do_plot(y_pos):
    fig = plt.figure()
    ax = plt.axes()
    ax.axhline(y_pos)
    fig.savefig('%s.pdf' % y_pos)

pool = multiprocessing.Pool()

for i in xrange(40):
    pool.apply_async(do_plot, [i])

pool.close()
pool.join() 
```

它不能完美地扩展，但通过在我的 4 个内核（具有超标题的双核）上执行此操作，我得到了显着提升：

```
$> time python multi_pool_1.py 
done

real    0m5.218s
user    0m4.901s
sys 0m0.205s

$> time python multi_pool_n.py 
done

real    0m2.935s
user    0m9.022s
sys 0m0.420s 
```

我确信 mpl 的 pdf 后端有很大的性能改进空间，但这不在您所追求的时间范围内。

高温下，

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-26T14:15:56.213

Matplotlib has a lot of overhead for creation of the figure, etc. even before saving it to pdf. So if your plots are similar you can safe a lot of "setting up" by reusing elements, just like you will find in animation examples for matplotlib.

You can reuse the figure and axes in this example:

```
import matplotlib
matplotlib.use('Agg')
import matplotlib.pyplot as plt

X = range(10)
Y = [ x**2 for x in X ]
fig = plt.figure(figsize=(6,6))
ax = fig.add_subplot(111)

for n in range(100):
    ax.clear() # or even better just line.remove()
               # but should interfere with autoscaling see also below about that
    line = ax.plot(X, Y)[0]
    fig.savefig("test.pdf") 
```

Note that this does not help that much. You can save quite a bit more, by reusing the lines:

```
line = ax.plot(X, Y)[0]
for n in range(100):
    # Now instead of plotting, we update the current line:
    line.set_xdata(X)
    line.set_ydata(Y)
    # If autoscaling is necessary:
    ax.relim()
    ax.autoscale()

    fig.savefig("test.pdf") 
```

This is close to twice as fast as the initial example for me. This is only an option if you do similar plots, but if they are very similar, it can speed up things a lot. The [matplotlib animation examples](http://matplotlib.sourceforge.net/examples/animation/index.html) may have inspiration for this kind of optimization.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T13:18:03.247

您可以使用[报告实验室](http://www.reportlab.com/software/opensource/)。开源版本应该足以做你想做的事情。它应该比使用 matplotlib 生成 pdf 快得多。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-30T14:35:14.687

我认为更改库（matplotlib）不是您的选择，因为您实际上喜欢 matplotlib 产生的内容:-)。我还假设——这里的一些人已经对此发表了评论——matplotlib 的其他后端并没有明显更快。我认为在每台机器和具有良好任务调度程序的操作系统的这些日子里，并行运行像您这样的作业以优化吞吐量（即 PDF 文件创建速率）是很好的。我认为您将设法以合理的计算能力每秒生成大量文件。这**是**要走的路，所以我真的相信你的问题很有趣，但在实践中并不真正相关。

# android - 未在 Android 的 SQLite 数据库中创建表

> ID：12026712
> 
> 赞同：2
> 
> 时间：2012-08-19T13:06:47.360
> 
> 标签：android, sqliteopenhelper, sqlite

实际上，当我创建数据库、我的第一个表（table_userprofile）及其相关字段时，代码运行良好。

但是，一旦我在`onCreate()`Helper 类的方法下创建了另一个表（table_bloodgroup）。

它开始显示未创建第二个表..并且弹出许多与未创建数据库相关的异常。

以下是代码：

```
package com.example.databaseexample;

import java.util.ArrayList;
import java.util.List;
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.util.Log;

public class DatabaseHelper extends SQLiteOpenHelper {

    // All Static variables

    // Database Version
    private static final int DATABASE_VERSION = 1;

    // Database Name
    private static final String DATABASE_NAME = "bloodDonation";

    // Contacts table name
    private static final String TABLE_USER="table_userprofile";
    private static final String TABLE_BLOODGROUP="table_bloodgroup";

    //UserProfile Table Columns names
    private static final String KEY_ID="id";
    private static final String KEY_NAME="name";
    private static final String KEY_PH_NO="phone_number";

    private static final String KEY_BGID="id";
    private static final String KEY_BNAME="bloodgroup_name";

    public DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        context.deleteDatabase(DATABASE_NAME);
        // TODO Auto-generated constructor stub
    }
    // Creating Tables
    @Override
    public void onCreate(SQLiteDatabase db) {
        // TODO Auto-generated method stub
        String CREATE_UserProfile_TABLE = "CREATE TABLE IF NOT EXISTS " + TABLE_USER + "("
                + KEY_ID + " INTEGER PRIMARY KEY," + KEY_NAME + " TEXT,"
                + KEY_PH_NO + " TEXT" + ")";
        db.execSQL(CREATE_UserProfile_TABLE);

        String createTable_BLOODGROUP="CREATE TABLE IF NOT EXISTS " + TABLE_BLOODGROUP + "( " +
                KEY_BGID + " INTEGER PRIMARY KEY AUTOINCREMENT, "+
                KEY_BNAME + " VARCHAR(30)); ";
        db.execSQL(createTable_BLOODGROUP);

        Log.d("Created", "Created Both the Tables");
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        // TODO Auto-generated method stub
        //db.execSQL("DROP TABLE IF EXISTS " + TABLE_USER);
        //db.execSQL("DROP TABLE IF EXISTS " + TABLE_BLOODGROUP);
        // Create tables again
        //onCreate(db);
    }

    // **************** Add New UserProfile Entry **********************

    void addUser(UserProfile user){
        SQLiteDatabase db=this.getWritableDatabase();

        ContentValues values=new ContentValues();
        values.put(KEY_NAME, user.get_name());
        values.put(KEY_PH_NO, user.get_phone_number());

        // Inserting Rows
        db.insertOrThrow(TABLE_USER, null, values);
        db.close();
    }

    // *****  Retrieve all UserProfile Entry *******

    public List<UserProfile> getAllUser(){
        List <UserProfile> userList=new ArrayList<UserProfile>();

        // Select All Query
        String selectQuery="SELECT * FROM " + TABLE_USER;

        SQLiteDatabase db=this.getReadableDatabase();
        Cursor c=db.rawQuery(selectQuery, null);

        // looping through all rows and adding to the list
        if(c.moveToFirst()){
            do{
                UserProfile user=new UserProfile();
                user.set_id(Integer.parseInt(c.getString(0)));
                user.set_name(c.getString(1));
                user.set_phone_number(c.getString(2));

                // Adding user to the list
                userList.add(user);
            }while(c.moveToNext());
        }
        c.close();
        return userList;
    }

    // **************** Add BloodGroup Entry **********************

        void addBloodGroup(BloodGroup group){
            try{
                    SQLiteDatabase db=this.getWritableDatabase();

                    ContentValues values=new ContentValues();
                    values.put(KEY_BNAME, group.get_name());

                    //  Inserting Rows
                    db.insertOrThrow(TABLE_BLOODGROUP, null, values);
                    db.close();
            }
            catch(Exception e)
            {
                e.printStackTrace();
            }
        }   

        // *****  Retrieve all BloodGroups Entry *******

        public List<BloodGroup> getAllGroups(){
            List <BloodGroup> groupList=new ArrayList<BloodGroup>();
            try{

                //  Select All Query
                String selectQuery="SELECT * FROM " + TABLE_BLOODGROUP;

                SQLiteDatabase db=this.getReadableDatabase();
                Cursor c=db.rawQuery(selectQuery, null);

                //  looping through all rows and adding to the list
                if(c.moveToFirst()){
                    do{
                        BloodGroup grp=new BloodGroup();
                        grp.set_id(Integer.parseInt(c.getString(0)));
                        grp.set_name(c.getString(1));

                        // Adding user to the list
                        groupList.add(grp);
                    }while(c.moveToNext());
                }
                c.close();
            }
            catch(Exception e)
            {
                e.printStackTrace();
            }
            return groupList;
        }
} 
```

记录猫错误：

```
 08-20 08:36:30.181: I/Database(736): sqlite returned: error code = 1, msg = table table_bloodgroup has no column named bgname
 08-20 08:36:30.200: E/Database(736): Error inserting bgname=O
 08-20 08:36:30.200: E/Database(736): android.database.sqlite.SQLiteException: table table_bloodgroup has no column named bgname: , while compiling: INSERT INTO table_bloodgroup(bgname) VALUES(?); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-19T13:10:51.913

试试这个.... 将数据库版本更改为 2。

私有静态最终 int DATABASE_ VERSION = 2;

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-15T11:05:40.307

更改版本号会创建一个完整的新数据库模式，包括您的新表。但是，您可以覆盖 SqliteOpenHelper 类的 onUpgrade 方法并编写删除表语句以删除任何现有表或表并使用修改的表列重新创建另一个表。

```
@Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

        //delete table if table is modified
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
        db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);

        //create table again
        onCreate(db);

    } 
```

# javascript - 计算合并对象的数量

> ID：12026714
> 
> 赞同：0
> 
> 时间：2012-08-19T13:07:30.467
> 
> 标签：javascript

这可能有一个我没有意识到的简单解决方案。使用以下代码（来自 php/javascript 拼图代码），我将一个对象与另一个对象（拼图）合并。我希望能够计算每次合并后有多少对象，以检查只剩下一个对象的情况（解决了难题）。我尝试编写一个单独的函数来计算对象的 hasownproperties 数量（尽管我只想计算合并的对象数量，而不是数量对象属性，以避免因不同的拼图难度级别而使此脚本复杂化），但它没有不工作。建议？

```
var cluster = new Array();

function merge_cluster(a, b) {
    for (i in cluster[b]) {
        obj = dd.elements[cluster[b][i]];
        cluster[a][obj.name] = obj.name;
        obj.cluster = a;
    }
}

function my_DropFunc() {
    align_cluster(dd.obj.cluster);

    for (r = -1; r <= 1; r++) {
        for (c = -1; c <= 1; c++) {
            if (c != 0 || r != 0) {
                obj = dd.elements['t_' + (dd.obj.row + r) + '_' + (dd.obj.col + c)];
                if (obj) {
                    if (dd.obj.x + c * < ? = $vw ? > == obj.x && dd.obj.y + r * < ? = $vh ? > == obj.y) {
                        merge_cluster(dd.obj.cluster, obj.cluster);
                        //this is probably the ideal place to do a count check since it runs every time a piece is dropped, only once, whereas the merge_cluster function runs multiple times when a new cluster is merged.
                    }
                }
            }
        }
    }

} 
```

# android - Android RESTLet SSL 空指针

> ID：12026715
> 
> 赞同：0
> 
> 时间：2012-08-19T13:08:06.037
> 
> 标签：android, ssl, restlet

几天来我一直在尝试如何解决我的问题，但我没有成功。

我只是想执行 RESTlet HTTPS 请求。代码很简单，因为我只有一个 acritivity：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    System.setProperty("java.net.preferIPv6Addresses", "false");

    Engine.getInstance().getRegisteredClients().clear();
    Engine.getInstance().getRegisteredClients().add(new HttpsClientHelper(null));

    System.out.println("VERIFICO IL TOKEN: ");
    ClientResource clientResource = new ClientResource(
            "https://www.googleapis.com/oauth2/v1/tokeninfo?access_token=lalala");

    Representation rep = clientResource.get();
} 
```

restlet给出的原因是：

```
Caused by: Communication Error (1001) - Error while processing a connection 
```

原因：

```
Caused by: java.lang.NullPointerException
at org.apache.harmony.xnet.provider.jsse.ClientSessionContext$HostAndPort.hashCode(ClientSessionContext.java:214)
at java.util.HashMap.put(HashMap.java:393) 
```

我在网上读到它是一个 android 错误，但我找不到任何解决方法

任何想法？我正在使用 Restlet 2.1 RC5

完整的堆栈跟踪是：

```
08-19 13:43:23.911: E/AndroidRuntime(30053): FATAL EXCEPTION: main
08-19 13:43:23.911: E/AndroidRuntime(30053): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.helloandroid/com.example.helloandroid.MainActivity}: Communication Error (1001) - Error while processing a connection
08-19 13:43:23.911: E/AndroidRuntime(30053):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2787)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2803)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at android.app.ActivityThread.access$2300(ActivityThread.java:135)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2136)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at android.os.Handler.dispatchMessage(Handler.java:99)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at android.os.Looper.loop(Looper.java:144)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at android.app.ActivityThread.main(ActivityThread.java:4937)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at java.lang.reflect.Method.invokeNative(Native Method)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at java.lang.reflect.Method.invoke(Method.java:521)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at dalvik.system.NativeStart.main(Native Method)
08-19 13:43:23.911: E/AndroidRuntime(30053): Caused by: Communication Error (1001) - Error while processing a connection
08-19 13:43:23.911: E/AndroidRuntime(30053):    at org.restlet.resource.ClientResource.doError(ClientResource.java:611)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at org.restlet.resource.ClientResource.handleInbound(ClientResource.java:1201)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at org.restlet.resource.ClientResource.handle(ClientResource.java:1068)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at org.restlet.resource.ClientResource.handle(ClientResource.java:1043)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at org.restlet.resource.ClientResource.handle(ClientResource.java:949)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at org.restlet.resource.ClientResource.get(ClientResource.java:657)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at com.example.helloandroid.MainActivity.onCreate(MainActivity.java:30)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1069)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2751)
08-19 13:43:23.911: E/AndroidRuntime(30053):    ... 11 more
08-19 13:43:23.911: E/AndroidRuntime(30053): Caused by: java.lang.NullPointerException
08-19 13:43:23.911: E/AndroidRuntime(30053):    at org.apache.harmony.xnet.provider.jsse.ClientSessionContext$HostAndPort.hashCode(ClientSessionContext.java:214)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at java.util.HashMap.put(HashMap.java:393)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at org.apache.harmony.xnet.provider.jsse.ClientSessionContext.putSession(ClientSessionContext.java:190)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at org.apache.harmony.xnet.provider.jsse.ClientHandshakeImpl.unwrap(ClientHandshakeImpl.java:308)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at org.apache.harmony.xnet.provider.jsse.SSLRecordProtocol.unwrap(SSLRecordProtocol.java:413)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at org.apache.harmony.xnet.provider.jsse.SSLEngineImpl.unwrap(SSLEngineImpl.java:478)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at javax.net.ssl.SSLEngine.unwrap(SSLEngine.java:383)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at org.restlet.ext.ssl.internal.ReadableSslChannel.onDrain(ReadableSslChannel.java:114)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at org.restlet.engine.io.Buffer.process(Buffer.java:553)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at org.restlet.engine.io.Buffer.process(Buffer.java:668)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at org.restlet.engine.io.ReadableBufferedChannel.read(ReadableBufferedChannel.java:172)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at org.restlet.engine.io.Buffer.fill(Buffer.java:391)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at org.restlet.engine.connector.InboundWay.onFill(InboundWay.java:278)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at org.restlet.engine.io.Buffer.process(Buffer.java:597)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at org.restlet.engine.io.Buffer.process(Buffer.java:668)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at org.restlet.engine.connector.Way.processIoBuffer(Way.java:477)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at org.restlet.engine.connector.InboundWay.processIoBuffer(InboundWay.java:353)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at org.restlet.engine.connector.Way.onSelected(Way.java:430)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at org.restlet.engine.connector.ConnectionController.controlConnections(ConnectionController.java:105)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at org.restlet.engine.connector.ConnectionController.doRun(ConnectionController.java:156)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at org.restlet.engine.connector.Controller.run(Controller.java:158)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
08-19 13:43:23.911: E/AndroidRuntime(30053):    at java.lang.Thread.run(Thread.java:1102) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T21:32:30.310

尽管您致电：

```
Engine.getInstance().getRegisteredClients().clear();
Engine.getInstance().getRegisteredClients().add(new HttpsClientHelper(null)); 
```

您应该确保尝试这样做：

```
Engine.getInstance().getRegisteredClients().clear();
Engine.getInstance().getRegisteredClients().add(new org.restlet.ext.net.HttpClientHelper(null)); 
```

# c++ - Qt Gui 应用程序背景颜色样式表

> ID：12026717
> 
> 赞同：1
> 
> 时间：2012-08-19T13:08:23.317
> 
> 标签：c++, css, qt, user-interface, stylesheet

我想为我的表单设置背景颜色

像这样

```
body
{
  background-color: #fff;
} 
```

我正在使用 QWidget 选择器，但我只想更改窗口背景；

以及如何为所有窗口创建一个样式表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T14:40:50.767

您可以为任何`QWdiget`. 如果它是您的主窗口，您可以执行以下操作：

```
QString style = "QMainWindow { background-color: #fff; }";  // or other color
this->setStyleSheet(style); // assuming you are calling from the QMainWindow inherited class 
```

您可以对主窗口中的单个小部件执行相同操作，例如`QLabel`实例化为`label`：

```
QString style = "QLabel { background-color: #fff; }";  // or other color
label->setStyleSheet(style); 
```

您还可以定位另一个的所有子小部件或指定单个子小部件。看看[http://doc.qt.io/archives/qt-4.7/stylesheet-examples.html](http://doc.qt.io/archives/qt-4.7/stylesheet-examples.html)

# php - 使用 AJAX 的带有参数的 PHP POST 不起作用

> ID：12026720
> 
> 赞同：0
> 
> 时间：2012-08-19T13:08:50.593
> 
> 标签：php, javascript, html, ajax

我正在使用 AJAX 调用 PHP 脚本，并传递一些参数。

PHP 脚本正在使用 FPDF 创建 PDF。我传递给 PHP 脚本的值只能用于连接到脚本中的另一个字符串。

AJAX 正在调用 PHP 脚本并且 PDF 正在生成，但唯一的问题是参数显示为空。我不确定我做错了什么，这让我发疯......

这是我的 HTML：

```
<input type="submit" value="Download Completed DA190" onclick="printCompletedForm()" />
<script type="text/javascript">

function printCompletedForm()
{
    var testDate = "2012-08-19";

    $.ajax({  
        type: "POST",  
        url: "saveZeroRelease.php",
        data: {testdate : testDate},
        success: function(msg){

        },
        error: function(msg){

        }
    });
}

</script> 
```

这是我的PHP：

```
$testDate = $_POST['testdate'];

$pdf = new PDF_MC_Table();
$pdf->Open();
$pdf->AddPage();
$pdf->SetFont('Arial','',8);
$pdf->Cell(150,10,'Certificate of foreign Currency usage in respect of materials and components in terms of the notes to rebate item ',1);
$pdf->SetFont('Arial','',10);
$pdf->Cell(40,10,'Form C1',1);
$pdf->Ln(10);
$pdf->Cell(190,10,'NOTE:',1);
$pdf->Ln(10);
$pdf->MultiCell(190,10,'Certificate Number:      Effective Date :'.$testDate.'  
Replaces Certificate No:_________________                                                        Effective Date :________________',1);
$pdf->Output(); 
```

我不知道我做错了什么。任何帮助请大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T15:51:30.723

首先，在您的 JavaScript 中，将您的代码包装在里面；

```
$(document).ready( function() {
//your code here
}); 
```

并且不要忘记链接您的 jQuery 文件，例如；

```
<script type="text/javascript" src="jquery.js"></script> 
```

另外，在你的 php 中，改变；

```
$testDate = $_POST['testdate']; 
```

至

```
$testDate = $_POST["testdate"]; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T15:59:05.990

看起来提交表单的默认行为是在您的 AJAX 调用有时间完成您要求的所有操作之前触发和执行的。研究`event.preventDefault()`完全覆盖提交处理程序。提交表单后，您的函数将处理从制作 $.ajax POST 到必要时重定向用户的所有事情。

# django - Django 使用 to_field 值形成干净的外键

> ID：12026721
> 
> 赞同：1
> 
> 时间：2012-08-19T13:09:27.010
> 
> 标签：django, forms, validation, foreign-keys

```
class Advert(models.Model):
    location_relation = models.ForeignKey("administrative_division.Towns", to_field='name_unique')

class Towns(models.Model):
    name = models.CharField(max_length=128)
    slug = models.SlugField()

    voivodship = models.ForeignKey("Voivodships", to_field='voivodship_identifier')
    county = models.ForeignKey("Counties")

    name_unique=models.CharField(max_length=255, unique=True)
    town_unique=models.BooleanField()

    def __unicode__(self):
        return "%s. %s"% (self.id, self.name) 

class AdvertForm(ModelForm):

    category = CustomTreeNodeChoiceField(queryset=Category.objects.filter(parent__isnull=False), empty_label="Wybierz kategorię", label="Kategoria")

    class Meta:
        model = Advert
        exclude = ('ip', 'user')
        widgets = {
            'location_relation': TextInput
        }

    def __init__(self, *args, **kwargs):
        self.request = kwargs.pop('request', None)
        super(AdvertForm, self).__init__(*args, **kwargs)

    def clean_location_relation(self):
        from string import capitalize
        from django import forms
        from administrative_division.models import Towns

        cleaned_data = self.cleaned_data['location_relation']
        try:
            cleaned_data = Towns.objects.get(name_unique=capitalize(cleaned_data.name_unique))
        except:
            raise forms.ValidationError("Such city does not exist")

        return cleaned_data 
```

我使用文本输入表单字段而不是选择字段。所以我需要手动提供唯一的名称。

我需要将提供的字符串大写到名为 location_relation 的字段中。我尝试了不同的选项，例如在模型中使用清洁方法，现在我尝试以模型形式进行清洁。

我现在真的不知道该怎么做。

请给我一些提示或解决此问题的方法:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T16:19:14.660

我只是做了这样的事情；您应该子类化`ModelChoiceField`并修改其`prepare_value`和`clean`方法以使用非整数输入（FK -ModelChoiceField 需要）。

在我的例子中，它是一个预先输入的外键文本字段，如果它不存在则创建新条目（例如对标签有用）。

```
class MyModelChoiceField(forms.ModelChoiceField):
    def __init__(self, *args, **kwargs):
        self.widget = kwargs.pop('widget', forms.TextInput)
        super(MyModelChoiceField, self).__init__(*args, **kwargs)

    def prepare_value(self, value):
        # return value from original value, a PK.
        value = super(MyModelChoiceField, self).prepare_value(value)
        if not value:
            return value

        try:
            return self.queryset.model.objects.get(id=value).name
        except self.queryset.model.DoesNotExist:
            return ''

    def clean(self, value):
        # return instance from text input string
        if not value and not self.required:
            return None
        elif not value:
            raise forms.ValidationError("%s is required" % (self.queryset.model._meta.verbose_name,))
        try:
            return self.queryset.model.objects.filter(my_field=value).get()
        except self.queryset.model.DoesNotExist:
            raise forms.ValidationError("%s is not a valid option" % (self.queryset.model._meta.verbose_name,))

class MyForm(forms.ModelForm):
    # ...
    my_field = MyModelChoiceField(queryset=Foo, etc.) 
```

结合自定义小部件，我现在可以通过几行代码将它用于任何 FK 字段，并自动包含我的 typeahead JS。我爱django！

# php - CakePHP：复杂的连接模型

> ID：12026724
> 
> 赞同：0
> 
> 时间：2012-08-19T13:09:56.843
> 
> 标签：php, cakephp, join, has-and-belongs-to-many

以下场景：

```
Recipe hasMany RecipeItem
RecipeItem belongsTo Recipe, Ingredient 
```

（`Ingredient`可能与 相关`hasMany RecipeItem`，但我不需要这种关系。）

所以基本上，一个没有连接表的单面HABTM，因为我的连接元素（`RecipeItem`）需要有一个额外的属性：计数。

这篇文章：[http](http://book.cakephp.org/1.3/view/1650/hasMany-through-The-Join-Model) ://book.cakephp.org/1.3/view/1650/hasMany-through-The-Join-Model描述了如何一次创建/保存全部或完全分离。我想要的是创建分离的一侧（成分）和关联的另一侧（食谱）。创建新食谱时，您可以选择多种成分。

你会怎么做？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T13:25:19.073

老实说，我认为您应该尝试简化架构。这听起来不必要的复杂。为什么需要一个 RecipeItem*和*一个成分的记录？他们似乎应该是同一件事。

您可以在连接表中创建其他字段，这样就不需要额外的关系。我认为你应该能够只使用配方 HABTM 成分并完成。

此外，我往往无法正确格式化我的表单数据，以便蛋糕的自动功能正常工作。对我来说，更容易格式化我想手动保存的连接表记录，然后用连接表模型显式保存它们（在清除现有记录之后）。就像是：

```
$toSave = array();
$this->loadModel('RecipesIngredients');
foreach($this->data['Ingredient'] as $ingredient) {
    $toSave[] = array(
        'recipe_id'=>$this->data['Recipe']['id'],
        'ingredient_id'=>$ingredient['id'],
        'count'=>$ingredient['count']
    );
}
$this->RecipesIngredients->deleteAll(array('recipe_id'=>$this->data['Recipe']['id']);
$this->RecipesIngredients->saveAll($toSave); 
```

# blackberry - 在黑莓文本字段中创建一个选择

> ID：12026725
> 
> 赞同：2
> 
> 时间：2012-08-19T13:09:58.900
> 
> 标签：blackberry

如何在黑莓中以编程方式为 TextField 中的特定数量的字符创建选择？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-20T07:12:37.393

我认为以下步骤应该有效，假设`myTextField`是一个[TextField](http://www.blackberry.com/developers/docs/7.0.0api/net/rim/device/api/ui/component/TextField.html)实例。

1.  调用`myTextField.select(true)`方法，开启选择模式。
2.  调用`myTextField.setCursorPosition(int)`以将光标位置设置为选择开始
3.  使用[EventInjector](http://www.blackberry.com/developers/docs/7.0.0api/net/rim/device/api/system/EventInjector.html)注入击键来模拟“选择”动作。击键在[TextField 类 javadoc中描述](http://www.blackberry.com/developers/docs/7.0.0api/net/rim/device/api/ui/component/TextField.html)
4.  通过上述移动光标`setCursorPositionMethod(int)`以扩大选择区域。

而已。

# javascript - 如何隐藏相对于浏览器缩放的元素

> ID：12026731
> 
> 赞同：0
> 
> 时间：2012-08-19T13:10:21.563
> 
> 标签：javascript, css, zooming

如果浏览器缩放为 +200 或以上，我想隐藏一个 div。

我想隐藏的 div 位于站点的右侧（绝对位置，右侧 0px）。所以想法是：如果浏览器缩放是默认的，那么该 div 将是可见的，但如果浏览器缩放更多是默认值​​，那么该 div 不应该对用户可见。

# html - 以 Windows Phone 7 为目标的 CSS 提供了奇怪的余量

> ID：12026734
> 
> 赞同：1
> 
> 时间：2012-08-19T13:10:31.290
> 
> 标签：html, css, windows-phone-7, media-queries

我正在尝试添加一个针对 Windows Mobile 的 .css 文件，但我在 wf 的网站上得到了一个奇怪的右边距：

[这是一张显示问题的照片](https://dl.dropbox.com/u/11855903/wp_margin.jpg)

我尝试将所有元素的边距设置为 0 并删除部分，但没有运气。有人遇到过这个问题吗？

**编辑：** 我发现了问题，当我从网站显示正确的 html 中删除 rtl 时，它似乎是 rtl 网站上的 windows phone 上的错误。作为临时解决方案，我从 html 中删除了 rtl 并放置在容器 div 上。 [这是剥离的例子](https://dl.dropbox.com/u/11855903/wf7rtl.htm)

有谁知道这个错误或可以做些什么来修复它？

谢谢

# javascript - javascript中的上一个视图/撤消

> ID：12026738
> 
> 赞同：0
> 
> 时间：2012-08-19T13:11:25.800
> 
> 标签：javascript, jquery

有没有办法回到上一个视图（不是 url），或者说撤消在 javascript 或 jquery 中的点击？

history.go(-1) 不起作用，因为先前的视图实际上不是地址栏上的 url。我正在使用一个创建对象（相册查看器）的 jquery 插件，您可以在那里在不同的照片之间导航，地址栏上的 url 不会改变。我设置它，以便在单击照片时，页面将更改为另一个页面。我想将用户带回到上一个视图，即插件创建对象上的特定照片。

# android - 多个对话框，第二个不显示

> ID：12026740
> 
> 赞同：3
> 
> 时间：2012-08-19T13:11:37.510
> 
> 标签：android, exception, dialog

我试图在按下按钮时显示几个对话框，一个接一个，并且无法显示第二个。第一个只是一个开发存根，用于在开发期间替换验证过程......

```
@Override
public void onCreate(Bundle savedInstanceState)
{
  <snip>

  btnLogin.setOnClickListener(new View.OnClickListener()
     {
        public void onClick(View v)
        {
           <snip>

           VerifyLogin(userName, 
                       password);
        }
     });
} 
```

...和...

```
private void VerifyLogin(String userName,
                        String password)
{
  boolean ok = false;

  if ((userName.length() > 0) && (password.length() > 0))
     ok = DevStub(); // <- Mimics server validation, allows dev. to choose success or not

  <snip>
} 
```

...和...

```
private boolean DevStub()
{
  new AlertDialog.Builder(this)
     .setTitle("DEVELOPMENT")
     .setMessage("Login: Successful or Not")
     .setPositiveButton("Successful",
                        <snip>
                       )
     .setNegativeButton("Not Successful",
                        new DialogInterface.OnClickListener()
                           {
                              public void onClick(DialogInterface dialog, int which)
                              {
                                  new AlertDialog.Builder(getApplicationContext())
                                     .setTitle("Invalid Username/Password")
                                     .setMessage("Try Again or Recover your password")
                                     .setPositiveButton( <snip> )
                                     .setNegativeButton( <snip> )
                                     .show();
                              }
                           })
     .show();

  return success;
} 
```

正如我所说，这只是在我开发界面时，然后 DevStub() 将被真正的登录验证所取代，但我想了解我在这里做错了什么。当我点击“不成功”按钮时，我只是得到一个例外。

我认为它与内部对话框中的 getApplicationContext() 有关，但是，再说一遍，我不知道 - 有什么建议吗？

日志猫：

```
E/SKIA(12620): FimgApiStretch:stretch failed
D/AndroidRuntime(12620): Shutting down VM
W/dalvikvm(12620): threadid=1: thread exiting with uncaught exception (group=0x40c581f8)
E/AndroidRuntime(12620): FATAL EXCEPTION: main
E/AndroidRuntime(12620): android.view.WindowManager$BadTokenException: Unable to add window -- token null is not for an application
E/AndroidRuntime(12620):    at android.view.ViewRootImpl.setView(ViewRootImpl.java:706)
E/AndroidRuntime(12620):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:316)
E/AndroidRuntime(12620):    at android.view.WindowManagerImpl.addView(WindowManagerImpl.java:218)
E/AndroidRuntime(12620):    at android.view.WindowManagerImpl$CompatModeWrapper.addView(WindowManagerImpl.java:143)
E/AndroidRuntime(12620):    at android.app.Dialog.show(Dialog.java:278)
E/AndroidRuntime(12620):    at android.app.AlertDialog$Builder.show(AlertDialog.java:932)
E/AndroidRuntime(12620):    at com.mtbsoft.wud.LoginActivity$2.onClick(LoginActivity.java:62)
E/AndroidRuntime(12620):    at com.android.internal.app.AlertController$ButtonHandler.handleMessage(AlertController.java:168)
E/AndroidRuntime(12620):    at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(12620):    at android.os.Looper.loop(Looper.java:137)
E/AndroidRuntime(12620):    at android.app.ActivityThread.main(ActivityThread.java:4514)
E/AndroidRuntime(12620):    at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(12620):    at java.lang.reflect.Method.invoke(Method.java:511)
E/AndroidRuntime(12620):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:993)
E/AndroidRuntime(12620):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:760)
E/AndroidRuntime(12620):    at dalvik.system.NativeStart.main(Native Method)
D/dalvikvm(12620): GC_CONCURRENT freed 148K, 4% free 13223K/13639K, paused 2ms+4ms 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T13:53:43.757

您不能`Dialog`使用 Application创建一个`Context`，它必须是一个 Activity `Context`，特别`Activity`是它所在的那个。

尝试这样的事情：

```
final Context context = this;
new AlertDialog.Builder(context)
 .setTitle("DEVELOPMENT")
 .setMessage("Login: Successful or Not")
 .setPositiveButton("Successful",
                    <snip>
                   )
 .setNegativeButton("Not Successful",
                    new DialogInterface.OnClickListener()
                       {
                          public void onClick(DialogInterface dialog, int which)
                          {
                              dialog.dismiss(); //you probably want to add this...
                              new AlertDialog.Builder(context)
                                 .setTitle("Invalid Username/Password")
                                 .setMessage("Try Again or Recover your password")
                                 .setPositiveButton( <snip> )
                                 .setNegativeButton( <snip> )
                                 .show();
                          }
                       })
 .show();

return success; 
```

另外，请注意我`dialog.dismiss()`在negativeButton 中添加了一个`OnClickListener`。

# sql - SQL Server：过程调用，内联连接不可能？

> ID：12026741
> 
> 赞同：6
> 
> 时间：2012-08-19T13:11:40.277
> 
> 标签：sql, sql-server

我正在使用 SQL Server 2008 R2 并且想知道是否还有另一种编写方式

```
EXEC dbo.myProcedure (SELECT columnName FROM TableName) 
```

或者

```
EXEC dbo.myProcedure @myStringVariable + 'other text' 
```

这样这些过程调用才能**真正起作用**，**而无需**先将整个内容放入变量中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-22T08:25:47.123

不允许在 SP 的内联执行中进行串联。

假设您`@myStringVariable`要对某些文本和某些动态文本进行妥协，然后将其连接起来。

`@myStringVariable`为什么在调用 proc 之前不计算它并分配给它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T21:59:01.023

不确定“不先将整个东西放入变量”是什么意思。但是，我有一个解决方案，即使它可能与我*认为*您的意思背道而驰。但无论如何，它就在这里。

```
DECLARE @SQL VARCHAR(MAX)

SET @SQL = ''

SELECT
    @SQL = @SQL + 'EXEC SprocName ''' + ColumnName + ''''
FROM
    MyTable 

EXEC (@SQL) 
```

当我需要根据表中的特定值执行存储过程时，我一直使用这种方法。

# android - java.lang.RuntimeException: Unable to start service with intent has extras android.os.NetworkOnMainThreadException

> ID：12026743
> 
> 赞同：0
> 
> 时间：2012-08-19T13:11:54.180
> 
> 标签：android

这是我在这里的第一篇文章，我希望我能做得很好......

我正在尝试编辑开源更新程序（YAOS Updater），当我尝试连接时，它给了我一个错误。

我会尽力解释得更好。

我在用于列出所有文件的 JSON 中添加了一个值。每个文件的新值为 urlArchivo，其中包含文件的完整 url。

这是代码的一部分：

```
package org.yaosupdater.services;

import java.io.BufferedReader;
import java.io.BufferedWriter;
import java.io.File;
import java.io.FileWriter;
import java.io.IOException;
import java.io.InputStreamReader;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLConnection;

import org.yaosupdater.R;

import android.annotation.TargetApi;
import android.app.DownloadManager;
import android.app.DownloadManager.Query;
import android.app.DownloadManager.Request;
import android.app.Service;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.content.SharedPreferences;
import android.database.Cursor;
import android.net.Uri;
import android.os.Bundle;
import android.os.IBinder;
import android.util.Log;
import android.widget.Toast;

@TargetApi(16)
public class DownloadService extends Service{

private DownloadManager dm;
private String nombre;
private String archivo;
private String urlArchivo;
private String[] mirrors;
private long enqueue;

@Override
public IBinder onBind(Intent intent) {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void onStart(Intent intent, int startid){
    super.onStart(intent, startid);
    dm = (DownloadManager) getSystemService(DOWNLOAD_SERVICE);
    Bundle bundle = intent.getExtras();
    nombre = (String) bundle.get("nombre");
    Log.d("Dexafree", "Nombre: " +nombre);
    archivo = (String) bundle.get("archivo");
    Log.d("Dexafree", "Archivo: " +archivo);
    urlArchivo = (String) bundle.getString("urlArchivo");
    Log.d("Dexafree", "urlArchivo: " +urlArchivo);
    mirrors = (String[]) bundle.get("mirrors");
    URL url;
    int j = 0;
    boolean found = false;
    while((j < mirrors.length)&&(!found)){
        try {
            url = new URL(urlArchivo);
            Log.d("Dexafree", "Intentando conectar a: " +urlArchivo);
            //url = new URL(urlArchivo);
            //Log.d("Dexafree", "Intentando conectar a: " +urlArchivo);
            URLConnection urlCon = url.openConnection();
            Log.d("Dexafree", "Conexion abierta a: " +urlCon);
            Log.d("Dexafree", "Debe ser igual a: " + urlArchivo);
            InputStreamReader is = new InputStreamReader(urlCon.getInputStream());
            found = true;
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            Log.d("MIUIEsUpdater", "El archivo " +urlArchivo +" no se encontró.");
            found = false;
        }
        j++;
    }   
    j--; 
```

logcat 中的变量 urlArchivo 获取正确的 URL，我的意思是，

```
 Log.d("Dexafree", "Intentando conectar a: " +urlArchivo); 
```

返回文件正确的完整 url，但它是 FC，显示下一个 logcat

```
08-19 14:51:40.417: E/Trace(4134): error opening trace file: No such file or directory (2)
08-19 14:51:40.449: D/Dexafree(4134): Nombre: MODEM KF1
08-19 14:51:40.453: D/Dexafree(4134): Archivo: Modem_KF1.zip
08-19 14:51:40.453: D/Dexafree(4134): urlArchivo: http://content.wuala.com/contents/elitemovil/Galaxy_S/GT-I9000/carpetaprueba/Modem_KF1.zip
08-19 14:51:40.453: D/Dexafree(4134): Intentando conectar a: http://content.wuala.com/contents/elitemovil/Galaxy_S/GT-I9000/carpetaprueba/Modem_KF1.zip
08-19 14:51:40.453: D/Dexafree(4134): Conexion abierta a: libcore.net.http.HttpURLConnectionImpl:http://content.wuala.com/contents/elitemovil/Galaxy_S/GT-I9000/carpetaprueba/Modem_KF1.zip
08-19 14:51:40.453: D/Dexafree(4134): Debe ser igual a: http://content.wuala.com/contents/elitemovil/Galaxy_S/GT-I9000/carpetaprueba/Modem_KF1.zip
08-19 14:51:40.457: D/AndroidRuntime(4134): Shutting down VM
08-19 14:51:40.457: W/dalvikvm(4134): threadid=1: thread exiting with uncaught exception (group=0x40edb300)
08-19 14:51:40.500: E/AndroidRuntime(4134): FATAL EXCEPTION: main
08-19 14:51:40.500: E/AndroidRuntime(4134): java.lang.RuntimeException: Unable to start service org.yaosupdater.services.DownloadService@416c0c38 with Intent { cmp=org.yaosupdater/.services.DownloadService (has extras) }: android.os.NetworkOnMainThreadException
08-19 14:51:40.500: E/AndroidRuntime(4134):     at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2507)
08-19 14:51:40.500: E/AndroidRuntime(4134):     at android.app.ActivityThread.access$1900(ActivityThread.java:130)
08-19 14:51:40.500: E/AndroidRuntime(4134):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1292)
08-19 14:51:40.500: E/AndroidRuntime(4134):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-19 14:51:40.500: E/AndroidRuntime(4134):     at android.os.Looper.loop(Looper.java:137)
08-19 14:51:40.500: E/AndroidRuntime(4134):     at android.app.ActivityThread.main(ActivityThread.java:4745)
08-19 14:51:40.500: E/AndroidRuntime(4134):     at java.lang.reflect.Method.invokeNative(Native Method)
08-19 14:51:40.500: E/AndroidRuntime(4134):     at java.lang.reflect.Method.invoke(Method.java:511)
08-19 14:51:40.500: E/AndroidRuntime(4134):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
08-19 14:51:40.500: E/AndroidRuntime(4134):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
08-19 14:51:40.500: E/AndroidRuntime(4134):     at dalvik.system.NativeStart.main(Native Method)
08-19 14:51:40.500: E/AndroidRuntime(4134): Caused by: android.os.NetworkOnMainThreadException
08-19 14:51:40.500: E/AndroidRuntime(4134):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
08-19 14:51:40.500: E/AndroidRuntime(4134):     at java.net.InetAddress.lookupHostByName(InetAddress.java:385)
08-19 14:51:40.500: E/AndroidRuntime(4134):     at java.net.InetAddress.getAllByNameImpl(InetAddress.java:236)
08-19 14:51:40.500: E/AndroidRuntime(4134):     at java.net.InetAddress.getAllByName(InetAddress.java:214)
08-19 14:51:40.500: E/AndroidRuntime(4134):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:70)
08-19 14:51:40.500: E/AndroidRuntime(4134):     at libcore.net.http.HttpConnection.<init>(HttpConnection.java:50)
08-19 14:51:40.500: E/AndroidRuntime(4134):     at libcore.net.http.HttpConnection$Address.connect(HttpConnection.java:341)
08-19 14:51:40.500: E/AndroidRuntime(4134):     at libcore.net.http.HttpConnectionPool.get(HttpConnectionPool.java:87)
08-19 14:51:40.500: E/AndroidRuntime(4134):     at libcore.net.http.HttpConnection.connect(HttpConnection.java:128)
08-19 14:51:40.500: E/AndroidRuntime(4134):     at libcore.net.http.HttpEngine.openSocketConnection(HttpEngine.java:315)
08-19 14:51:40.500: E/AndroidRuntime(4134):     at libcore.net.http.HttpEngine.connect(HttpEngine.java:310)
08-19 14:51:40.500: E/AndroidRuntime(4134):     at libcore.net.http.HttpEngine.sendSocketRequest(HttpEngine.java:289)
08-19 14:51:40.500: E/AndroidRuntime(4134):     at libcore.net.http.HttpEngine.sendRequest(HttpEngine.java:239)
08-19 14:51:40.500: E/AndroidRuntime(4134):     at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:273)
08-19 14:51:40.500: E/AndroidRuntime(4134):     at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
08-19 14:51:40.500: E/AndroidRuntime(4134):     at org.yaosupdater.services.DownloadService.onStart(DownloadService.java:73)
08-19 14:51:40.500: E/AndroidRuntime(4134):     at android.app.Service.onStartCommand(Service.java:450)
08-19 14:51:40.500: E/AndroidRuntime(4134):     at android.app.ActivityThread.handleServiceArgs(ActivityThread.java:2490)
08-19 14:51:40.500: E/AndroidRuntime(4134):     ... 10 more 
```

我希望我已经发布了解决此问题所需的所有信息。如果需要更多信息，请告诉我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T13:17:55.003

Android抛出`android.os.NetworkOnMainThreadException`，因为...

> 当应用程序尝试在其主线程上执行网络操作时引发的异常。
> 
> 这仅针对面向 Honeycomb SDK 或更高版本的应用程序抛出。允许以早期 SDK 版本为目标的应用程序在其主事件循环线程上进行网络连接，但非常不鼓励这样做。

为您的网络操作创建一个单独的线程，它基本上告诉您。

> 可能长时间运行的操作（如网络或数据库操作）或计算量大的计算（如调整位图大小）应在子线程中完成
> 
> 请注意，服务与其他应用程序对象一样，在其托管进程的主线程中运行。这意味着，如果您的服务要执行任何 CPU 密集型（例如 MP3 播放）或阻塞（例如网络）操作，它应该生成自己的线程来完成这项工作。

[来源1](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html) [来源 2](http://developer.android.com/guide/practices/responsiveness.html) [来源 3](http://developer.android.com/reference/android/app/Service.html)

你本可以自己调查一下，但是嗯 - 下次再做。

# python - 使用 for 循环比较整数

> ID：12026747
> 
> 赞同：0
> 
> 时间：2012-08-19T13:13:07.607
> 
> 标签：python

我是 python 新手，在做一些练习时遇到了问题。

以下是我到目前为止的代码：

```
def gt(nums, n):
    for c in nums:
        if n < c:
            return True
        elif c < n:
            return False
        else:
            break 
```

使用上面的代码，它不能正确返回。这里的正确答案示例：

```
gt([1,2,3],3) => False
gt([1,2,3],2) => True 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T13:20:22.657

一个更简单、更易读的解决方案如下：

```
def gt(lst, n):
    return max(lst) > n 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T13:21:11.000

使用一个衬垫

```
def gt(nums, n):
    return any(e > n for e in nums) 
```

当找到大于 n 的第一个元素时，这会中断。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T15:02:46.983

对 Niklas B. 评论的长篇回应：

我决定对此进行测试，结果如下。蓝点是你的功能，绿色是马里奥的；y 轴是以秒为单位的运行时间，x 轴是 len(nums)。 ![在此处输入图像描述](../Images/e61ca866cb899baed97f7b988fa33e69.png)

正如你所说，两者都是O（n）。你的速度更快，最多可达 45 项；对于超过 100 个项目，他的速度大约是其两倍。

这几乎是无关紧要的——这似乎更像是一个初学者的语法问题——而且，正如你所说，Python 一开始就不是速度恶魔。另一方面，谁不喜欢更快的速度（只要可读性不受影响）？

对于那些感兴趣的人，这是我为测试而编写的代码：

```
from random import randint
from timeit import Timer
import matplotlib.pyplot as plt

def gt1(nums, n):
    # based on Niklas B.'s answer - NOTE comparison is corrected
    return n < max(nums)

def gt2(nums, n):
    # based on Mario Fernandez's answer
    return any(e > n for e in nums)

def make_data(length, lo=0, hi=None):
    if hi is None:
        hi = lo + length - 1
    elif lo > hi:
        lo,hi = hi,lo
    return [randint(lo, hi) for i in xrange(length)]

def make_args(d):
    nums = make_data(d)
    n = randint(0,d)
    return "{}, {}".format(nums, n)

def time_functions(fns, domain, make_args, reps=10, number=10):
    fns = [fn.__name__ if callable(fn) else fn for fn in fns]
    data = [[] for fn in fns]
    for d in domain:
        for r in xrange(reps):
            args = make_args(d)
            for i,fn in enumerate(fns):
                timer = Timer(
                    setup='from __main__ import {}'.format(fn),
                    stmt='{}({})'.format(fn, make_args(d))
                )
                data[i].extend((d,res) for res in timer.repeat(number=number))
    return data

def plot_data(data, formats=None):
    fig = plt.figure()
    ax = fig.add_subplot(111)
    if formats is None:
        for d in data:
            ax.plot([x for x,y in d], [y for x,y in d])
    else:
        for d,f in zip(data, formats):
            ax.plot([x for x,y in d], [y for x,y in d], f)
    plt.show()

def main():
    data = time_functions([gt1, gt2], xrange(10, 501, 10), make_args)
    plot_data(data, ['bo', 'g.'])

if __name__=="__main__":
    main() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T13:19:45.487

这可能会更好

```
def gt(nums, n):
    for c in nums:
       if n < c:
            return True

    return False 
```

# javascript - js键限制但有点仁慈？

> ID：12026749
> 
> 赞同：3
> 
> 时间：2012-08-19T13:13:30.243
> 
> 标签：javascript, jquery, regex

我使用 JS 构建了一个只接受数字的机制：

但是我想允许 : `Delete`, `Backspace`, `left arrow`, `right arrow`:

我想出的解决方案是：

假设我用 html 编写*（我知道发送事件不好，但请关注 Js 代码）*：

```
<input  onKeyPress='return CheckDigit(event)'/>

function CheckDigit(evt)
{
    var charCode = (evt.which) ? evt.which : evt.keyCode;
    if (((charCode >= 48) && (charCode <= 57)) || checkIfDelOrNavigate(charCode)))
        return true;
    return false;
}

  function checkIfDelOrNavigate(c)
    {
        if (((c == 46) || (c == 39) || (c == 37) || (c == 8))) return true;return false;
        /*46=delete , 39,37 = arrows , 8=backspace*/
    } 
```

问题 ：

*   这是正确的解决方案吗？（如果不是，请您提供答案）

*   我认为它可以更改为正则表达式检查：

代码：

```
 var regEx =/^[0-9]+$/;    
 isValid = regEx.test(keyChar); 
 return isValid; 
```

但是完整的`regEx`表达方式是什么？

*ps：奇怪，但我看到的所有解决方案都不想允许`Delete`, `Backspace`, `left arrow`, `right arrow` chars ，只是类别本身。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T14:09:50.123

[我将此问题](https://stackoverflow.com/questions/4194163/detect-printable-keys)的答案与以下检查结合起来，以确保我只捕获数字，同时允许不可打印的字符。不过，您必须对粘贴操作做一些事情。

```
return !window.isNaN(String.fromCharCode(event.which)) 
```

请参阅[jsFiddle](http://jsfiddle.net/F6YMf/3/)。

# codeigniter - CodeIgniter xmlrpc - 在非对象上调用成员函数...

> ID：12026752
> 
> 赞同：1
> 
> 时间：2012-08-19T13:13:58.607
> 
> 标签：codeigniter, xml-rpc

再会！

我正在使用：Codeigniter，xmlrpc 库。

我对一个 api 的客户端有疑问。（http://api.textsale.ru），这是俄语）

在api的文档中有类似的功能

```
(array) textsale.GetUser((int)UserId, (string)$hash) 
```

我有代码

```
$this->xmlrpc->server('http://api.textsale.ru/xmlrpc/', 80);
$this->xmlrpc->method('textsale.getUser');

$request = array(array('UserId'=> array('444***', 'int'),'hash'=>array('435gwrege***', 'string')),'struct');
if ( ! $this->xmlrpc->send_request($request))
{ 
echo '<pre>';
print_r($this->xmlrpc->display_response());
echo '</pre>';
echo $this->xmlrpc->display_error();
} 
```

并得到

```
<b>Fatal error</b>:  Call to a member function getVal() on a non-object in <b>***/apiserver1.php</b> on line <b>42</b><br /> 
```

我试过 $request：

```
$request = array(array( array( ...
$request['UserId'] = ... 
```

等等

如果我要发送没有参数的方法 - textsale.GetCategories() - 没关系。我正在获取类别列表。

那么，我应该如何处理 $request ？

# msbuild - 升级到 .NET 4.5 后 MSBuild 部署失败

> ID：12026754
> 
> 赞同：47
> 
> 时间：2012-08-19T13:14:21.153
> 
> 标签：msbuild, .net-4.5, msbuild-4.0

我们最近将 VS 2010 和 .NET 4 应用程序升级到 VS 2012 和 .NET 4.5。我们有一个构建脚本来在测试服务器上部署应用程序。我们有两个盒子——一个是带有 VS 2012（全新安装）的 Windows 8，另一个是带有 VS 2010 和 VS 2012（新安装）的 Windows 7。

从 Windows 8 运行构建脚本时，框构建脚本运行良好并将应用程序部署到测试服务器。但是从 Windows 7 框中部署应用程序时，出现以下错误：

> \Achinth\Build\Work\App\App.csproj]C:​​\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v10.0\Web\Microsoft.Web.Publishing.targets(3847,5)：错误：您尝试使用的应用程序池将“managedRuntimeVersion”属性设置为“v4.0”。此应用程序需要“v4.5”。[C:\Achinth\Build\Work\App\App.csproj]

查看错误，看起来 MSBuild 使用的是 VS 2010 目标而不是 VS 2012，这会导致错误。由于 Windows 8 机器没有 VS 2010，它正确使用了 VS 2012 目标。

有人可以提供有关如何使 MSBuild 选择正确版本的指示吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-08-19T21:11:58.077

在这种情况下，您需要指定 MSBuild 属性 VisualStudioVersion=11.0。我刚刚在[http://sedodream.com/2012/08/19/VisualStudioProjectCompatabilityAndVisualStudioVersion.aspx](http://sedodream.com/2012/08/19/VisualStudioProjectCompatabilityAndVisualStudioVersion.aspx)上写了一篇博客，为了您的方便，我也将它粘贴在下面。

Visual Studio 2012 最受欢迎的功能之一是能够在 VS 2012 和 VS 2010 中打开项目（需要 VS 2010 SP1）。如果您还没有听说我们确实实现了该功能。您可能想知道我们是如何做到这一点的，以及这会如何影响您。

如果您为在 VS2010 中创建的 Web 项目打开 .csproj/.vbproj，您将看到以下导入语句。

```
<Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\
                  v10.0\WebApplications\Microsoft.WebApplication.targets" /> 
```

当您在 VS 2012 中打开此项目时，对您的项目文件进行了一些更改，以确保它可以在 VS 2010 SP1 和 VS 2012 中打开。第一次在 VS 2012 中加载项目时对项目所做的更改之一是添加以下内容以替换该导入语句。

```
<PropertyGroup>
  <VisualStudioVersion Condition="'$(VisualStudioVersion)' == ''">10.0</VisualStudioVersion>
  <VSToolsPath Condition="'$(VSToolsPath)' == ''">
    $(MSBuildExtensionsPath32)\Microsoft\VisualStudio\v$(VisualStudioVersion)</VSToolsPath>
</PropertyGroup>
<Import Project="$(VSToolsPath)\WebApplications\Microsoft.WebApplication.targets" Condition="'$(VSToolsPath)' != ''" /> 
```

我们删除了硬编码的 10.0，而是使用属性 VisualStudioVersion。在 Visual Studio 2012 中构建时，此值将始终为 11.0，但对于 VS 2010，它不存在。这就是为什么我们将其默认为 10.0 以上。在某些情况下，从命令行构建需要显式设置此属性。在我们到达那里之前，让我解释一下这个属性是如何设置的（按这个顺序）

1.  如果 VisualStudioVersion 被定义为环境变量/全局 MSBuild 属性，则使用该属性。
    *   这是 VS 和 VS 开发人员命令提示符设置此值的方式
2.  基于 .sln 文件的文件格式版本（使用的工具集是 sln 文件格式 –1）
    *   为了简化此语句，.sln 文件将通过将 VisualStudioVersion 指定为创建 .sln 文件的 VS 版本的值来构建。
3.  选择默认
    *   10.0 如果安装了 VS 2010
    *   安装了最高版本的子工具集版本

对于#2，当您构建 .sln 文件时，VisualStudioVersion 的值将是 .sln 文件中找到的格式版本的 –1。这里要注意的重要一点是，如果您构建一个 .sln 文件，它将使用与创建 .sln 文件的 VS 版本相对应的 VisualStudioVersion 值来构建。因此，如果您在 VS2012 中创建 .sln 文件并且始终构建该 .sln 文件，则 VisualStudioVersion 的值将为 11.0。在许多情况下，如果您构建 .sln 文件，您就很好。

如果您正在构建 .csproj/.vbproj 文件而不通过 .sln 文件？如果您从命令行（不是开发人员提示符）构建 Web 项目，则使用的 VisualStudioVersion 的值为 10.0。那是我上面展示的属性的产物。在这种情况下，您应该将其作为 MSBuild 属性传入。例如

```
msbuild.exe MyAwesomeWeb.csproj /p:VisualStudioVersion=11.0 
```

在这种情况下，我明确地传递了属性。这将始终覆盖任何其他机制以确定 VisualStudioVersion 的值。如果您在构建脚本中使用 MSBuild 任务，则可以在 Properties 属性或 AdditionalProperties 属性中指定属性。有关 Properties 和 AdditionalProperties 之间的区别，请参阅我之前的博客文章。

如果您在构建/发布时遇到任何有趣的行为，并且您注意到正在导入错误的 .targets 文件，那么您可能需要指定此属性。

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-10-24T00:44:07.853

从[这个链接](http://social.msdn.microsoft.com/Forums/en-US/msbuild/thread/72e42de2-9e11-4ad2-bed6-ea90a72694fe)。

“在文本编辑器中打开您的 *.csproj 或 *.vbproj Web 项目文件并添加以下行。

```
<IgnoreDeployManagedRuntimeVersion>True</IgnoreDeployManagedRuntimeVersion> 
```

我在该行之前添加了该行

```
<TargetFrameworkVersion>v4.5</TargetFrameworkVersion> 
```

它的部署没有错误。”

它对我有用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-10-22T01:00:11.010

对于找到此页面以搜索为什么 msdeploy/webdeploy 显示类似错误的任何人，我发现这是解决方案。

要解决此问题，只需将 DeployManagedRuntimeVersion 属性添加到您的 VS 项目中：

```
<targetframeworkversion>v4.5</TargetFrameworkVersion></code>
<DeployManagedRuntimeVersion>v4.0</DeployManagedRuntimeVersion> 
```

从这里： [http ://techblog.dorogin.com/2013/11/deploying-45-projects-with-webdeploy.html](http://techblog.dorogin.com/2013/11/deploying-45-projects-with-webdeploy.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-25T20:07:27.023

我观察到，当我使用 VS2012 Publish Web Deploy Package 功能时，它会生成一个 .zip 文件。在该 zip 中有一个名为 archive.xml 的文件，其中包含一个带有属性 'managedRuntimeVersion="v4.0"' 的 createApp 标记。当我使用 msdeploy.exe 将其同步到 iis 实例时，它可以工作。

但是，当我使用 msbuild.exe 创建 Web 包 .zip 文件时，它包含一个具有“managedRuntimeVersion="v4.5"' 的 archive.xml。尝试使用 msdeploy.exe 将此 Web 包部署到 IIS 会导致 ERROR_APPPOOL_VERSION_MISMATCH 错误。

正如 Sayed Ibrahim Hashimi 在这里解释的那样，在我的 msbuild.exe 命令行中添加“/p:VisualStudioVersion=11.0”可以有效地在生成的 Web 包的 archive.xml 中强制使用“managedRuntimeVersion="v4.0"”，从而解决了问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-08-24T21:06:37.023

在我的情况下，WebDeploy 没有安装在构建服务器上。所以它抛出了类似的错误。我安装了 WebDeploy，我很成功。

[http://www.microsoft.com/en-ca/download/confirmation.aspx?id=25230](http://www.microsoft.com/en-ca/download/confirmation.aspx?id=25230)

# ios - 在 viewDidLoad 处将可调整大小的 UIImage 设置为 UIImageView 被忽略

> ID：12026758
> 
> 赞同：2
> 
> 时间：2012-08-19T13:15:08.403
> 
> 标签：ios, cocoa-touch, uiimageview, uiimage, viewdidload

我有一个`UIImageView`我想要可拉伸的图像。为了实现这一点，我执行以下操作`viewDidLoad`：

```
-(void) buildResizableDescriptionAreaBackground
{
    UIImage *image = [UIImage imageNamed:@"description_area_background"];
    CGFloat top = ceilf(image.size.height / 2.0) - 1;
    CGFloat bottom = floorf(image.size.height / 2.0);
    CGFloat left = ceilf(image.size.height / 2.0) - 1;
    CGFloat right = floorf(image.size.height / 2.0);
    if ([image respondsToSelector:@selector(resizableImageWithCapInsets:)])
    {
        image = [image resizableImageWithCapInsets:UIEdgeInsetsMake(top, left, bottom, right)];
    }
    else 
    {
        image = [image stretchableImageWithLeftCapWidth:left topCapHeight:top];
    }
    [self.descriptionAreaBackgroundImage setImage:image];
    [self.descriptionAreaBackgroundImage setHighlightedImage:image];
} 
```

当我调试它时，我确保它`descriptionAreaBackgroundImage`不是 nil，不是隐藏的，alpha = 1 并且具有正确的框架。此外，我确保图像不为零，具有正确的大小，并且可调整大小的图像也不为零。然而图像未设置为 UIImageView。

如果我这样做`viewDidAppear:`一切正常。如果我设置一个常规图像（不可拉伸，即使在`viewDidLoad`）一切正常。

据我所知，任何不需要超级视图或窗口的设置都可以在 完成`viewDidLoad`，那么为什么它不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T20:57:49.607

看起来您的 UIEdgeInsetsMake() 调用指定了 0x0 点的区域。尝试确保指定一个 1x1 区域。

例如，您的可拉伸图像的大小为 7x7 像素，并且您希望拉伸中心像素，您可以像这样指定边缘插入： UIEdgeInsetsMake(3.0f, 3.0f, 3.0f, 3.0f)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-20T07:55:04.897

好的，我找到了导致它的原因，愚蠢的错误。

在我的 viewDidLoad 中，我正在加载另一个包含其他视图的 .xib 文件：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Some setups
    [[NSBundle mainBundle] loadNibNamed:@"RatingDialog" owner:self options:nil];
    // More setups...
    [self buildResizableDescriptionAreaBackground]; // NOT WORKING!!
} 
```

显然，该笔尖中的一个 UIImageViews 也错误地连接到了我的 descriptionAreaBackground 插座。所以当我设置可调整大小的图像时，它是错误的视图......

多么愚蠢。

# c++ - 声明数组并稍后赋值

> ID：12026759
> 
> 赞同：0
> 
> 时间：2012-08-19T13:15:12.960
> 
> 标签：c++, arrays, c++11, declaration

您好我想声明一个全局数组，并且我想稍后在数组中设置项目。所以最后数组会有这样的元素。

```
 const char *payload_text[]= new const char(){"To: " TO "\n","From: " FROM "\n","Cc: " CC 
   "\n","Subject: Test2 \n",  "\n", "Testing using methods ver1.\n",NULL }; 
```

对不起，我对此完全陌生，我被分配了一个没有 c++ 背景的 c++ 作业。请建议

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T13:33:17.160

在 C++ 中，使用与您提供的代码类似的代码是不可能实现您的目标的。

**编辑：**如果您想动态添加项目，至少不会。仅当在声明向量时初始化向量时，发布在其他答案中的代码 galadog 才有效。

但是，在运行时创建和/或填充数组有多种可能性。

最接近您的示例的方法是

```
char **payload_text;
// ...
payload_text = new char*[number_of_entries];
payload_text[0] = "To: ..."
payload_text[1] = "From: ..."
// ... and so on. 
```

但是，您分配的内存`new`不是由 C++ 管理的（我假设您来自 C# 和/或 Java）。您必须手动释放它以避免内存泄漏。

更好的（更多 C++）方法是使用 STL 容器，例如`std::vector`动态管理字符串的类：`std::string`.

```
// Beginning of your source code
#include <vector>
#include <string>

//...

std::vector<std::string> payload_text;
//...
payload_text.push_back("For...");
payload_text.push_back("To..."); 
```

这也将允许您在不重新分配数组的情况下添加更多字符串。

我建议您阅读一些关于标准库的教程，因为它可以在许多方面简化常见任务的编程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T13:28:24.500

1.  数组和全局变量是邪恶的[http://www.parashift.com/c++-faq-lite/defn-evil.html](http://www.parashift.com/c++-faq-lite/defn-evil.html)如果我们谈论的是 c++，而不是 c

2.  在您的情况下，您最好使用字符串向量，例如

    ```
    static std::vector<std::string> payload{"To: ", TO, "\n","From: ", FROM} 
    ```

# android - 如何检测动作项是否溢出

> ID：12026760
> 
> 赞同：3
> 
> 时间：2012-08-19T13:15:15.783
> 
> 标签：android, android-actionbar, actionbarsherlock

如何检查操作栏中的菜单项是否溢出？

我还没有找到可以做到的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-08T15:59:02.720

我不知道以编程方式执行此操作的方法，并且我很难找到从用户体验的角度来看这是一个好主意的用例，但是[Android 设计文档](http://developer.android.com/design/patterns/actionbar.html)已更新，并提供了多少图标的指南显示给定的设备尺寸。

![http://developer.android.com/design/media/action_bar_pattern_table.png](../Images/3ab20dfc78ceaba0e20e4a5758f03c19.png)

# centos - 在 CentOS 上安装 jvisualvm

> ID：12026763
> 
> 赞同：6
> 
> 时间：2012-08-19T13:15:43.667
> 
> 标签：centos, java, openjdk, jvisualvm

我在我的 CentOS 机器上安装了 Java，但我没有 jvisualvm：

```
[root@ bin]# ls -la /usr/lib/jvm/jre-1.6.0-openjdk.x86_64/bin/
total 496
drwxr-xr-x. 2 root root  4096 2012-05-22 17:31 .
drwxr-xr-x. 4 root root  4096 2012-02-15 03:11 ..
-rwxr-xr-x. 1 root root 41120 2012-02-15 03:13 java
-rwxr-xr-x. 1 root root 41088 2012-02-15 03:13 keytool
-rwxr-xr-x. 1 root root 41168 2012-02-15 03:13 orbd
-rwxr-xr-x. 1 root root 41128 2012-02-15 03:13 pack200
-rwxr-xr-x. 1 root root 42368 2012-02-15 03:13 policytool
-rwxr-xr-x. 1 root root 41080 2012-02-15 03:13 rmid
-rwxr-xr-x. 1 root root 41088 2012-02-15 03:13 rmiregistry
-rwxr-xr-x. 1 root root 41088 2012-02-15 03:13 servertool
-rwxr-xr-x. 1 root root 41176 2012-02-15 03:13 tnameserv
-rwxr-xr-x. 1 root root 91352 2012-02-15 03:13 unpack200 
```

我该如何安装它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T14:59:00.373

来自 Oracle 的网站：

> Sun 的 Java 开发工具包 (JDK) 发行版提供了各种可选工具，包括 Java VisualVM

您安装了 Java JDK（Java 开发工具包）还是只安装了运行时 (JRE)？

Java 6 JDK 可从[http://www.oracle.com/technetwork/java/javase/downloads/jdk6-downloads-1637591.html下载](http://www.oracle.com/technetwork/java/javase/downloads/jdk6-downloads-1637591.html)

Java 7 JDK 位于： [http ://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1637583.html](http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1637583.html)

还是您仅限于使用 OpenJDK？[在这种情况下，您可以从http://visualvm.java.net/download.html](http://visualvm.java.net/download.html)下载 VisualVM

# entity-framework - EF 5.0 - 在不同的 DbSet 中使用时，停止将基类和子类组合到单个数据库表中

> ID：12026765
> 
> 赞同：3
> 
> 时间：2012-08-19T13:16:02.293
> 
> 标签：entity-framework, inheritance, ef-code-first, mapping, fluent

我有一个代码优先的 DbContext，它使用不同 DBSet 中的基类和子类

例如。数据库集动物；DbSet 狗；数据库集猫；

其中 Dog 和 Cat 是动物的子类。当数据库由代码优先 EF 5.0 生成时，我只得到一个表（动物）——正如我所期望的（并且想要三个）——动物、猫和狗。有没有办法让它做到这一点（使用流利的api？）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-19T19:57:20.930

是的，有一种方法可以通过 fluent API 实现，但映射取决于您期望的继承类型。目前，您有默认的 Table-per-Hierarchy 继承映射，其中所有实体都映射到同一个表，并默认调用一个附加列，`Discriminator`以在每条记录中存储的类型之间有所不同。

假设您有以下实体：

```
public class Animal {
    public int Id { get; set; }
    public string Name { get; set; }
}

public class Dog : Animal {
    public string Breed { get; set; }
} 
```

现在，如果您使用 Table-per-Type 继承映射：

```
public class Context : DbContext {
    public DbSet<Animal> Animals { get; set; }
    public DbSet<Dog> Dogs { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder) {
        modelBuilder.Entity<Dog>().ToTable("Dogs");
    }
} 
```

您将获得两个表：`Animals`with `Id`and `Name`columns 和`Dogs`with `Id`and `Breed`column。表之间也将存在一对一的关系，因为每个`Dog`实体在两个表中都有其记录。

如果您使用 Table-per-Class 继承映射：

```
public class Context : DbContext {
    public DbSet<Animal> Animals { get; set; }
    public DbSet<Dog> Dogs { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder) {
        modelBuilder.Entity<Dog>().Map(m => {
            m.MapInheritedProperties();
            m.ToTable("Dogs");
        });
    }
} 
```

您将再次获得两张桌子。`Animals`将与第一种情况相同，但`Dogs`将包含来自父类和子类的列：`Id`, `Name`, `Breed`. 这些实体之间也不会有任何关系，因为 Dog 将在其自己的类中拥有所有数据。

TPC 继承可能看起来更好，但使用起来要困难得多。例如，EF 不使用标识，`Id`因为 Id 在 TPC 继承中的所有表中必须是唯一的。TPC 继承的基础实体中的导航属性也会导致问题。

# c# - 如何从另一个线程进行导航？

> ID：12026766
> 
> 赞同：0
> 
> 时间：2012-08-19T13:16:03.163
> 
> 标签：c#, windows-phone-7

我正在做一些 Httprequest 并在路上我希望我的应用程序继续前进，到另一个 xaml 页面。盲目地做这个Visual Studio指出我不能做这个跨界。

我怎么`NavigationService.Navigate()`能从另一个线程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T13:18:06.653

将其包装在`Dispatcher.BeginInvoke`通话中

# java - Java 7 JColorChooser：禁用透明度滑块

> ID：12026767
> 
> 赞同：8
> 
> 时间：2012-08-19T13:16:07.877
> 
> 标签：java, swing, transparency, java-7, jcolorchooser

[JDK 7 为JColorChooser](http://docs.oracle.com/javase/7/docs/api/javax/swing/JColorChooser.html)添加了一个新的透明度滑块：

![在此处输入图像描述](../Images/963d35caf1700c4cb2afdb7b98969cf0.png)

问题是我不想让我的用户选择透明颜色。不幸的是，似乎没有一种简单的方法可以禁用滑块。

摆脱透明度的一种方法是仅根据所选颜色创建一种新颜色，但删除 alpha 值。然而，这会给用户一个错误的印象，因为滑块现在实际上什么都不做，我讨厌周围有一个无用的 UI 元素。

所以我的问题是，摆脱透明度滑块的最佳方法是什么？

PS：IMO，奇怪的是他们只会添加滑块并使其成为默认行为。这可能会导致 JDK 6 程序中的许多错误，这些错误不希望颜色选择器返回具有 alpha 值的颜色。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T14:57:20.077

根据文档，可以只修改/配置现有的类。因此，推荐的方法是创建自己的选择器面板（它们需要扩展`AbstractColorChooserPanel`），然后调用

```
JColorChooser jc = new JColorChooser();
jc.setChooserPanels(new AbstractColorChooserPanel[]{yourChooserPanel}); 
```

或者，如果您正在寻找一种更快/更糟糕/更丑陋的方式来做到这一点，请为您写下：

```
private static void removeTransparencySlider(JColorChooser jc) throws Exception {

    AbstractColorChooserPanel[] colorPanels = jc.getChooserPanels();
    for (int i = 1; i < colorPanels.length; i++) {
        AbstractColorChooserPanel cp = colorPanels[i];

        Field f = cp.getClass().getDeclaredField("panel");
        f.setAccessible(true);

        Object colorPanel = f.get(cp);
        Field f2 = colorPanel.getClass().getDeclaredField("spinners");
        f2.setAccessible(true);
        Object spinners = f2.get(colorPanel);

        Object transpSlispinner = Array.get(spinners, 3);
        if (i == colorPanels.length - 1) {
            transpSlispinner = Array.get(spinners, 4);
        }
        Field f3 = transpSlispinner.getClass().getDeclaredField("slider");
        f3.setAccessible(true);
        JSlider slider = (JSlider) f3.get(transpSlispinner);
        slider.setEnabled(false);
        Field f4 = transpSlispinner.getClass().getDeclaredField("spinner");
        f4.setAccessible(true);
        JSpinner spinner = (JSpinner) f4.get(transpSlispinner);
        spinner.setEnabled(false);
    }
} 
```

祝你好运:)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-19T15:20:49.857

尽管它依赖于实现，但您可以`AbstractColorChooserPanel`按名称删除具体的子类。

此示例删除除 RGB 面板之外的所有面板：

```
AbstractColorChooserPanel[] ccPanels = chooser.getChooserPanels();
for (AbstractColorChooserPanel ccPanel : ccPanels) {
    System.out.println(ccPanel.getDisplayName());
    String name = ccPanel.getClass().getSimpleName();
    if (!"DefaultRGBChooserPanel".equals(name))
        tcc.removeChooserPanel(ccPanel);
} 
```

此示例恢复 HSB 面板：

```
for (AbstractColorChooserPanel ccPanel : ccPanels) {
    String name = ccPanel.getClass().getSimpleName();
    if ("DefaultHSBChooserPanel".equals(name))
        tcc.addChooserPanel(ccPanel);
} 
```

您需要根据经验确定所需的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-24T12:03:09.763

这是对 aymeric 答案的轻微修改，将它们完全隐藏而不是禁用。

```
private static void removeTransparencySlider(JColorChooser jc) throws Exception {

    AbstractColorChooserPanel[] colorPanels = jc.getChooserPanels();
    for (int i = 1; i < colorPanels.length; i++) {
        AbstractColorChooserPanel cp = colorPanels[i];

        Field f = cp.getClass().getDeclaredField("panel");
        f.setAccessible(true);

        Object colorPanel = f.get(cp);
        Field f2 = colorPanel.getClass().getDeclaredField("spinners");
        f2.setAccessible(true);
        Object spinners = f2.get(colorPanel);

        Object transpSlispinner = Array.get(spinners, 3);
        if (i == colorPanels.length - 1) {
            transpSlispinner = Array.get(spinners, 4);
        }
        Field f3 = transpSlispinner.getClass().getDeclaredField("slider");
        f3.setAccessible(true);
        JSlider slider = (JSlider) f3.get(transpSlispinner);
        slider.setEnabled(false);
        slider.setVisible(false);
        Field f4 = transpSlispinner.getClass().getDeclaredField("spinner");
        f4.setAccessible(true);
        JSpinner spinner = (JSpinner) f4.get(transpSlispinner);
        spinner.setEnabled(false);
        spinner.setVisible(false);

        Field f5 = transpSlispinner.getClass().getDeclaredField("label");
        f5.setAccessible(true);
        JLabel label = (JLabel) f5.get(transpSlispinner);
        label.setVisible(false);
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-21T22:01:29.687

The other answers here show how to remove the transparency sliders from an instance of JColorChooser, but the main way to use JColorChooser is the static [`showDialog`](http://docs.oracle.com/javase/8/docs/api/javax/swing/JColorChooser.html#showDialog-java.awt.Component-java.lang.String-java.awt.Color-) method, in which case you don't get access to an instance. Therefore I present two methods, one which hides the controls from an instance of JColorChooser, and a drop-in replacement method for `showDialog` that has `showTransparencyControls` as a extra parameter:

```
import java.awt.*;
import java.awt.event.ActionListener;
import java.lang.reflect.Field;
import java.lang.reflect.Method;
import javax.swing.*;
import javax.swing.colorchooser.AbstractColorChooserPanel;

class SwingUtil {
    /**
     * Hides controls for configuring color transparency on the specified
     * color chooser.
     */
    public static void hideTransparencyControls(JColorChooser cc) {
        AbstractColorChooserPanel[] colorPanels = cc.getChooserPanels();
        for (int i = 0; i < colorPanels.length; i++) {
            AbstractColorChooserPanel cp = colorPanels[i];
            try {
                Field f = cp.getClass().getDeclaredField("panel");
                f.setAccessible(true);
                Object colorPanel = f.get(cp);

                Field f2 = colorPanel.getClass().getDeclaredField("spinners");
                f2.setAccessible(true);
                Object sliders = f2.get(colorPanel);

                Object transparencySlider = java.lang.reflect.Array.get(sliders, 3);
                if (i == colorPanels.length - 1)
                    transparencySlider = java.lang.reflect.Array.get(sliders, 4);

                Method setVisible = transparencySlider.getClass().getDeclaredMethod(
                    "setVisible", boolean.class);
                setVisible.setAccessible(true);
                setVisible.invoke(transparencySlider, false);
            } catch (Throwable t) {}
        }
    }

    /**
     * Shows a modal color chooser dialog and blocks until the dialog is
     * closed.
     * 
     * @param component the parent component for the dialog; may be null
     * @param title the dialog's title
     * @param initialColor the initial color set when the dialog is shown
     * @param showTransparencyControls whether to show controls for
     *        configuring the color's transparency
     * @return the chosen color or null if the user canceled the dialog
     */
    public static Color showColorChooserDialog(Component component,
            String title, Color initialColor, boolean showTransparencyControls) {
        JColorChooser pane = new JColorChooser(
            initialColor != null ? initialColor : Color.white);
        if (!showTransparencyControls) hideTransparencyControls(pane);
        Color[] result = new Color[1];
        ActionListener okListener = e -> result[0] = pane.getColor();
        JDialog dialog = pane.createDialog(component, title, true, pane, okListener, null);
        dialog.setVisible(true);
        dialog.dispose();
        return result[0];
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-01T03:34:14.727

Java 9[添加了](http://hg.openjdk.java.net/jdk9/jdk9/jdk/rev/113246aec5a4)一个新属性`AbstractColorChooserPanel`来控制这些滑块：

```
public void setColorTransparencySelectionEnabled(boolean b);
public boolean isColorTransparencySelectionEnabled(); 
```

还有一个新的静态`JColorChooser.showDialog`方法重载来指定相同的属性：

```
public static Color showDialog(Component component, String title, Color initialColor,
    boolean colorTransparencySelectionEnabled); 
```

Java 9[预计将于](http://www.java9countdown.xyz/)2017 年 3 月发布。

# wcf - 3rd 方 SOAP 1.1 服务的 WCF 客户端配置，通过 SSL 使用纯文本用户名凭据

> ID：12026768
> 
> 赞同：4
> 
> 时间：2012-08-19T13:16:20.267
> 
> 标签：wcf, soap, wcf-security, ws-security, basichttpbinding

我正在尝试连接到需要 SSL 安全性和用户名/密码凭据的第三方 SOAP 1.1 服务。预期的一个例子是：

```
<soapenv:Header>
    <wsse:Security>
        <wsse:UsernameToken>
            <wsse:Username>username</wsse:Username>
            <wsse:Password>password</wsse:Password>
        </wsse:UsernameToken>
    </wsse:Security>
</soapenv:Header> 
```

我的客户端配置如下：

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="thirdpartyservicebindingconfig">
                <security mode="TransportWithMessageCredential">
                    <message clientCredentialType="UserName"
                             algorithmSuite="Default" />
                </security>
            </binding>
        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint address="https://..." 
                  binding="basicHttpBinding"
                  bindingConfiguration="thirdpartyservicebindingconfig"
                  contract="thirdpartyservicecontract" 
                  name="thirdpartyserviceendpoint" />
    </client>
</system.serviceModel> 
```

服务客户端代码为：

```
var client = new thirdpartyservicecontractclient();

client.ClientCredentials.UserName.UserName = "username";
client.ClientCredentials.UserName.Password = "password";

var result = client.DoSomething(); 
```

我收到以下故障异常消息：

> 安全处理器无法在邮件中找到安全标头。这可能是因为消息是不安全的错误，或者是因为通信双方之间存在绑定不匹配。如果为安全配置了服务并且客户端未使用安全性，则可能会发生这种情况。

**编辑：**
如果我将安全模式重新配置为“传输”：
`<security mode="TransportWithMessageCredential">`
我收到来自第三方服务的错误：

> com.sun.xml.wss.XWSSecurityException: 消息不符合配置的策略 [AuthenticationTokenPolicy(S)]: No Security Header found; 嵌套异常是 com.sun.xml.wss.XWSSecurityException：com.sun.xml.wss.XWSSecurityException：消息不符合配置的策略 [AuthenticationTokenPolicy(S)]：未找到安全标头。

如何配置我的客户端以连接到此服务？

*   WS Security 通过 SSL 使用纯文本密码

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T16:51:52.083

碰巧里克·斯特拉尔也遇到了同样的问题。[这是](http://www.west-wind.com/weblog/posts/2007/Dec/09/Tracing-WCF-Messages)他描述和解决问题的博客文章的链接。

问题：

> 问题是 WCF 在响应中需要一个 TimeStamp Soap 标头。如果您查看出站响应和 Soap 标头，您会发现那里有一个时间戳。时间戳预计将在返回 Soap 响应中返回。请注意，这不是 WS-Security 的要求，因此 WCF 在这里做了一些“特殊”的事情，实际上是中断了这个服务调用。

解决方案：

```
BindingElementCollection elements = client.Endpoint.Binding.CreateBindingElements();
elements.Find<SecurityBindingElement>().IncludeTimestamp = false;
client.Endpoint.Binding = new CustomBinding(elements); 
```

> 上面的代码通过从出站调用中显式删除时间戳来修改绑定配置，从而消除了服务器返回它的要求。这让 WCF 很高兴，并且电话通过了。

# java - 无法使用 Hibernate 将数据持久保存到数据库中

> ID：12026773
> 
> 赞同：0
> 
> 时间：2012-08-19T13:17:42.920
> 
> 标签：java, hibernate

我编写了一个简单的 Web 应用程序来注册用户。但我收到如下错误。

```
INFO: Configuration resource: /com/vaannila/config/adminuser.hbm.xml
java.lang.NullPointerException
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1399)
    at org.hibernate.cfg.Configuration.doConfigure(Configuration.java:1378)
    at org.hibernate.cfg.Configuration.configure(Configuration.java:1298)
    at com.vaannila.utility.FactoryUtil.<clinit>(FactoryUtil.java:18)
    at com.vaannila.service.AdminUserBO.addUser(AdminUserBO.java:17)
    at com.vaannila.delegate.AdminUserBusinessDelegate.addUser(AdminUserBusinessDelegate.java:11)
    at com.vaannila.action.AdminUserAction.addUser(AdminUserAction.java:27)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:280)
    at org.apache.struts.actions.DispatchAction.execute(DispatchAction.java:216)
    at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:484)
    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:274)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1482)
    at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:525)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source)
java.lang.NullPointerException
    at com.vaannila.service.AdminUserBO.addUser(AdminUserBO.java:17)
    at com.vaannila.delegate.AdminUserBusinessDelegate.addUser(AdminUserBusinessDelegate.java:11)
    at com.vaannila.action.AdminUserAction.addUser(AdminUserAction.java:27)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:280)
    at org.apache.struts.actions.DispatchAction.execute(DispatchAction.java:216)
    at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:484)
    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:274)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1482)
    at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:525)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:859)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:602)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Unknown Source)
1123damuammudamodardamuchinni@gmail.com 
```

下面还有 FactoryUtil 类和 BO 类的代码

```
import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;

public class FactoryUtil {
    //Static Session Factory
        private static org.hibernate.SessionFactory sessionFactory;

        private FactoryUtil() {}

        static {

            //Creates the SessionFactory based on the XML Configuration
            try{
            Configuration configs = new Configuration();
            sessionFactory = configs.configure("/com/vaannila/config/adminuser.hbm.xml").buildSessionFactory();
            }catch(Exception e){
                e.printStackTrace();
            }
        }

        public static SessionFactory getInstance() {
            return sessionFactory;
        }

        public Session openSession() {
            return sessionFactory.openSession();
        }

        public Session getCurrentSession() {
            return sessionFactory.getCurrentSession();
        }

        public static void close() {
            if (sessionFactory != null)
                sessionFactory.close();
            sessionFactory = null;
        }

        public static FactoryUtil getSessionFactory() {
            // TODO Auto-generated method stub
            return null;
        }

}

import org.hibernate.HibernateException;
import org.hibernate.Session;
import org.hibernate.Transaction;

import com.vaannila.domain.AdminUserVO;
import com.vaannila.utility.FactoryUtil;

public class AdminUserBO {

    public void addUser(AdminUserVO auserVO) {
        // TODO Auto-generated method stub

        Session session = FactoryUtil.getInstance().openSession();
        Transaction transaction = null;
        Long singerId = null;

        try {
            transaction = session.beginTransaction();
            AdminUserVO userVO = new AdminUserVO();
            singerId = (Long)session.save(userVO);
            transaction.commit();
        }
        catch (HibernateException e) {
            transaction.rollback();
            e.printStackTrace();
        }
        finally {
            session.close();
        }

    }

} 
```

下面是映射文件。

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE hibernate-mapping PUBLIC
"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
<class name="com.vaannila.domain.AdminUserVO" table="users">
<id name="userId" type="int" column="userId" >
<generator class="increment"/>
</id>
<property name="userName">
<column name="userNm" />
</property>
<property name="password">
<column name="password" />
</property>
<property name="emailAddress">
<column name="emailId" />
</property>

</class>
</hibernate-mapping> 
```

请任何人都可以建议我解决上述问题

***编辑***

```
public class AdminUserVO implements java.io.Serializable{
    private String userName;
    private String userId;
    private String password;
    private String emailAddress;

    public String getUserName() {
        return userName;
    }
    public void setUserName(String userName) {
        this.userName = userName;
    }
    public String getUserId() {
        return userId;
    }
    public void setUserId(String userId) {
        this.userId = userId;
    }
    public String getPassword() {
        return password;
    }
    public void setPassword(String password) {
        this.password = password;
    }
    public String getEmailAddress() {
        return emailAddress;
    }
    public void setEmailAddress(String emailAddress) {
        this.emailAddress = emailAddress;
    }

}

User Name  damodar
User Id  damuammu
Password  1123
Email Address  damuchinni@gmail.com 
```

以上是我输入的数据，同样也打印在 stacttrace 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T13:37:57.817

Hibernate 配置方法

```
public Configuration configure(String resource)
                        throws HibernateException 
```

应该采用您的`hibernate.cfg.xml`文件的路径，而不是映射文件。请参阅[http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/cfg/Configuration.html#configure%28java.lang.String%29](http://docs.jboss.org/hibernate/orm/3.5/api/org/hibernate/cfg/Configuration.html#configure%28java.lang.String%29)。

# javascript - jQuery：如何使用文字对象方法中的方法获取全局变量

> ID：12026780
> 
> 赞同：1
> 
> 时间：2012-08-19T13:18:12.370
> 
> 标签：javascript, jquery, scope

将原型插件移植到 jQuery。

该插件使用禁止的方法收集对象文字中的所有插件方法，然后像 [object].[method] 一样调用它们

我不明白的是，在任何这些方法中，都使用了属性（在脚本的请求中定义，即 var x = 0、var y = 0 等），这些属性似乎是全局的，而不是作为参数或属性传递的一种具体的方法。

我将如何在 jQuery 中做到这一点，这可能吗？

**请参考下面代码中的“var1”。这将在哪里设置，以便所有方法都可以访问它？**

例子：

```
;(function($){

    var methods = {
        init : function(options) {

            var config = {
            // default options...
            }

            // overide config
            var settings = $.extend(config, options);

            return this.each(function() {
                        // init code goes here...
            });
        },

        function1 : function() {
            function2();
        },

        function2 : function() {
                $(selector).css({
                  width : var1,
                });             
        },
    }

    $.fn.[PLUGINNAME] = function(method) {

      if ( methods[method] ) {
        return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
      } else if ( typeof method === 'object' || ! method ) {
        return methods.init.apply( this, arguments );
      } else {
        $.error( 'Method ' +  method + ' does not exist on jQuery.tooltip' );
      } 

    };

})(jQuery); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T13:23:50.510

您需要在自调用函数内部声明变量，但在任何其他函数外部。

```
(function($){
    // This variable will be available to all methods, 
    // but not outside the plugin
    var var1,
        methods = {
            init : function(options) {
                ...
            }
            ...
        };
})(jQuery); 
```

然后，您可以使用 init 方法为其设置适当的值，例如，如果它是初始化过程的一部分，而不仅仅是一个静态变量。

由于 JavaScript 使用函数来声明变量范围，外部自调用函数将确保变量不会“泄漏”到全局范围，但由于它是在任何内部函数之外声明的，因此它可以用于插件中的所有功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T13:23:19.120

如果您在最顶层的函数中先定义它，则所有其他方法都可以访问它：

```
(function($){
    var var1 = "some value";

    var methods = {
        init : function(options) {

            var config = {
            // default options...
            }

            // overide config
            var settings = $.extend(config, options);

            return this.each(function() {
                        // init code goes here...
            });
        },

        function1 : function() {
            function2();
        },

        function2 : function() {
                $(selector).css({
                  width : var1,
                });             
        },
    }

    $.fn.slideshow = function(method) {

      if ( methods[method] ) {
        return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
      } else if ( typeof method === 'object' || ! method ) {
        return methods.init.apply( this, arguments );
      } else {
        $.error( 'Method ' +  method + ' does not exist on jQuery.tooltip' );
      } 

    };

})(jQuery); 
```

# c - 读取系统调用从 STDIN 读取

> ID：12026784
> 
> 赞同：-1
> 
> 时间：2012-08-19T13:19:12.340
> 
> 标签：c, unix, operating-system, system

从 STDIN 获取输入时读取系统调用何时终止？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T13:36:55.370

这有很多部分。

首先，让我们澄清一下 OS 级 IO 和 stdio 级 IO 的区别。`read(2)`和`write(2)`(POSIX IO) 由 POSIX 指定，使用文件描述符（从 0 开始的数字）进行操作；`fread(3)`和`fwrite(3)`(stdio IO) 由 ISO C 指定并在文件句柄上进行操作，例如`STDIN`POSIX 系统上的文件句柄封装文件描述符并在它们之上添加一些东西（例如输出缓冲）。

所以，`read(2)`不要`write(2)`自己做任何缓冲。您在标准输入上看到的缓冲（文件描述符`0`，**而不是** `STDIN`上面的一种抽象）是由终端（或终端仿真）完成的。搜索规范模式以禁用它。

在 stdio 级别，`fwrite(3)`（和`printf(3)`, `fprintf(3)`, 等）根据输出连接的内容进行输出缓冲。

另请参阅：
[如何检查 Linux 中是否按下了某个键？](https://stackoverflow.com/questions/3962263/checking-if-a-key-was-pressed)
[终端上不打印单个字符](https://stackoverflow.com/questions/7559917/single-characters-are-not-printed-on-the-terminal)
[打印到屏幕是否会导致切换到内核模式并在 Unix 中运行 OS 代码？](https://stackoverflow.com/questions/6476438/does-printing-to-the-screen-cause-a-switch-to-kernel-mode-and-running-os-code-in)

# android - 单元格内的表格视图？

> ID：12026788
> 
> 赞同：0
> 
> 时间：2012-08-19T13:19:55.457
> 
> 标签：android, iphone, ios, uitableview, nested

有许多显示嵌套列表的应用程序（尤其是 sns 应用程序）。

例如）pinterest，路径。

是否有在 iOS（或 android）中制作嵌套列表的标准做法？

1.  部分作为外部列表，行作为内部列表
2.  tableview 作为外部列表，单元格内的 tableview 作为内部列表。
3.  别的东西。。

# ios - 翻转容器内的视图，显示第二个视图

> ID：12026793
> 
> 赞同：0
> 
> 时间：2012-08-19T13:21:35.823
> 
> 标签：ios, uiview, core-animation

我目前正在使用此代码：

```
FlipView *fv = [[FlipView alloc]init];
[UIView transitionWithView:flipContainer
                  duration:1
                   options:UIViewAnimationOptionTransitionFlipFromLeft
                animations:^{ 
                    [flipContainer addSubview:fv];
                }
                completion:NULL]; 
```

翻转包含 UIImage 的容器视图以显示第二个视图 (FlipView)。FlipView 是一个 UIView，它的背景设置为红色以进行调试。

现在发生的是容器翻转，但它显示的内容与以前相同，尽管使用了：

```
[flipContainer addSubview:fv]; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T13:40:33.570

如果添加没有动画的子视图会发生什么？子视图是否出现？也许子视图没有被正确初始化（比如它的框架可能没有被正确设置？）

您可以尝试像这样初始化：

```
CGRect frame = CGRectMake(xOrigin,yOrigin,width,height);
FlipView *fv = [[FlipView alloc] initWithFrame:frame]; 
```

或者尝试设置 FlipView 的 frame 属性：

```
FlipView *fv = [[FlipView alloc]init];
CGRect frame = CGRectMake(xOrigin,yOrigin,width,height);
fv.frame = frame; 
```

# jsp - 仅为特定 IP 地址授予对 JSP 文件/文件夹的访问权限

> ID：12026794
> 
> 赞同：7
> 
> 时间：2012-08-19T13:22:02.603
> 
> 标签：jsp, tomcat, servlets, ip

我使用 JSP 和 servlet 制作了一个 CMS 应用程序。我没有使用任何类型的框架。CMS 有 2 个部分：

1.  前端
2.  管理员（后端）

例如，如果我将它托管在 上`www.example.com`，那么我的所有前端站点都将显示给所有用户。

但`www.example.com/admin`必须可以从几个 IP 地址访问。并非来自所有用户。

我找到了这些链接：

*   [链接 1](http://www.jguru.com/faq/view.jsp?EID=445942)
*   [链接 2](http://middlewaremagic.com/jboss/?p=494)
*   [堆栈溢出链接](https://stackoverflow.com/questions/3381531/tomcat-restrict-access-by-ip-address)

链接 1 看起来有点混乱，链接 2 看起来不错，但我没有使用 JBoss。

在 Stack Overflow 链接中，他们没有提到如何使用它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-23T11:00:02.130

据我从您的问题中了解到，您将其`Apache Tomcat`用作网络服务器。在这种情况下，请使用[远程地址过滤器](http://tomcat.apache.org/tomcat-7.0-doc/config/filter.html#Remote_Address_Filter)来限制 IP 地址的访问。它允许将请求客户端的 IP 与正则表达式进行比较，以根据比较结果允许或阻止请求。

如果您使用[Tomcat 7](http://tomcat.apache.org/tomcat-7.0-doc/)，您需要使用类[RemoteAddrFilter](http://tomcat.apache.org/tomcat-7.0-doc/api/org/apache/catalina/filters/RemoteAddrFilter.html)并在应用程序的配置文件中为必要的 IP 定义正则表达式`web.xml`：

```
<filter>
   <filter-name>Remote Address Filter</filter-name>
   <filter-class>org.apache.catalina.filters.RemoteAddrFilter</filter-class>
   <init-param>
      <param-name>allow</param-name> <!-- or deny -->
      <param-value>10\.10\.1[12]\..*</param-value> <!-- regexp for your ip adress -->
   </init-param>
</filter>
<filter-mapping>
   <filter-name>Remote Address Filter</filter-name>
   <url-pattern>*/admin</url-pattern> <!-- the url of your admin page -->
</filter-mapping> 
```

您可以使用硬编码的特定 IP 地址或正则表达式模式。但在某些情况下，正则表达式在地址验证方面为您提供了很大的灵活性。

如果您使用[6](http://tomcat.apache.org/tomcat-6.0-doc/)或[5](http://tomcat.apache.org/tomcat-5.5-doc/)版本的 Tomcat，您需要使用类[RemoteAddrValve](http://tomcat.apache.org/tomcat-6.0-doc/api/org/apache/catalina/valves/RemoteAddrValve.html)并在 Tomcat 的配置文件中定义以下行`server.xml`：

```
<Valve className=”org.apache.catalina.valves.RemoteAddrValve” allow=”10\.10\.1[12]\..*”/> 
```

或者

```
 <Valve className="org.apache.catalina.valves.RemoteAddrValve"
    deny="86.57.158.37, 213.117.195.*, 124.86.42.*" /> 
```

有关[使用请求过滤阀](http://books.google.by/books?id=bgMKmsXVbTAC&pg=PA116&lpg=PA116&dq=tomcat+Remote+Address+Filter+example&source=bl&ots=tpGJMIhsWZ&sig=-he76l1CJEGwXPhayLzvpnMvqMc&sa=X&ei=KeowUMm7J43ItAbbkYDQBg&ved=0CCoQ6AEwBQ#v=onepage&q&f=false)的更多信息。

还有一篇关于[使用 Tomcat 保护管理 Web 应用程序的](http://thelowedown.wordpress.com/2010/08/07/tomcat6-securing-the-administrative-webapps/)有趣文章。

顺便说一句，不拒绝`localhost`测试请求很方便。`127\.0\.0\.1`因此，添加到您允许的 IP 地址范围是有意义的。

但不要忘记，在某些情况下，可以使用代理服务器绕过 IP 块。还应用登录身份验证以获得更好的安全性。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-23T08:30:37.753

您可以定义一个`WebFilter`.

一个例子：

```
import java.io.IOException;
import javax.servlet.Filter;
import javax.servlet.FilterChain;
import javax.servlet.FilterConfig;
import javax.servlet.ServletException;
import javax.servlet.ServletRequest;
import javax.servlet.ServletResponse;
import javax.servlet.annotation.WebFilter;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

@WebFilter(filterName = "ezSecurityAdminFilter", urlPatterns = "/admin/*")
public class EZSecurityAdminFilter implements Filter {

    private static String allowIP = "0:0:0:0:0:0:0:1";

    @Override
    public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {

        HttpServletRequest req = (HttpServletRequest) request;
        HttpServletResponse res = (HttpServletResponse) response;

        String ipAddr = req.getRemoteAddr();

        System.out.println("IP-Addr: " + ipAddr);

        if (ipAddr.equals(allowIP)) {
            chain.doFilter(request, response);
        } else {

            res.sendRedirect("/WebApplication1/access_denied.jsp");
        }
    }

    @Override
    public void init(FilterConfig filterConfig) throws ServletException {
    }

    @Override
    public void destroy() {
    }
} 
```

`allowIP`然后将重定向来自其他 IP 地址的所有请求。

# c#-4.0 - 在 Windows Phone 中向 ScheduledActionService 添加两个提醒

> ID：12026798
> 
> 赞同：0
> 
> 时间：2012-08-19T13:22:43.193
> 
> 标签：c#-4.0, windows-phone-7.1, scheduledactionservice

我正在尝试`ScheduledActionService`在 Windows Phone 应用程序中添加两个提醒，如下所示：

```
private void button1_Click(object sender, RoutedEventArgs e)
    {
        if (ScheduledActionService.Find("PomodoroAkshay") != null)
        {                
            ScheduledActionService.Remove("PomodoroAkshay");
            this.Storyboard_Copy1.Begin();
            this.textBlock1.Text = "It's stopped!";
            if (ScheduledActionService.Find("BreakAkshay") != null)
            {
                ScheduledActionService.Remove("BreakAkshay");
            }
        }

        else
        {
            if (ScheduledActionService.Find("BreakAkshay") != null)
            {
                ScheduledActionService.Remove("BreakAkshay");
            }

            Reminder brk = new Reminder("BreakAkshay");
            brk.Title = "BreakUP";
            brk.Content = "Time up!";
            brk.BeginTime = DateTime.Now.AddSeconds(20);
            ScheduledActionService.Add(brk);

            Reminder pdro = new Reminder("PomodoroAkshay");
            pdro.Title = "PomodoroUP";
            pdro.Content = "Time for break!";
            pdro.BeginTime = DateTime.Now.AddSeconds(5);
            ScheduledActionService.Add(pdro);             

            this.Storyboard1.Begin();
            this.textBlock1.Text = "It's running!";
        }
    } 
```

当我按下`button1`重新开始时，`else`会按预期触发。但是，我收到了三个提醒。其中两个（`PomodoroAkshay`和`BreakAkshay`）在五秒后触发。此外，`BreakAkshay`按预期在 20 秒后触发。但是，我只想在 5 秒后触发一次提醒，在 20 秒后触发第二次提醒。我哪里错了？

附加信息：该语句`if`清除提醒，以便`button1`充当切换按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T05:05:40.337

我想我已经找到了发生的事情。在计算非常小的块时间（例如几秒钟）时，提醒似乎并不那么准确。它会导致奇怪的行为。我将`BeginTime`s 更改为几分钟，一切都按预期工作。应提交有关该问题的错误。

# javascript - 在JavaScript中获取范围随机数的最佳方法？

> ID：12026799
> 
> 赞同：1
> 
> 时间：2012-08-19T13:22:48.833
> 
> 标签：javascript, math, random

> **可能重复：**
> [在特定范围内的 Javascript 中生成随机数？](https://stackoverflow.com/questions/1527803/generating-random-numbers-in-javascript-in-a-specific-range)

最好的方法使用 Math 对象来获取随机数：

*   [a, b]（双整数）（2 种情况）
*   (a, b) (双整数)
*   [a, b) (双整数)
*   (a, b] (双整数)

任何人都可以帮助我吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T13:27:18.053

我想这就是你要找的东西：

```
var rand = function(a,b){
    return a+Math.round((b-a)*Math.random());
}
var r = rand(5,10);
console.log(r); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T13:33:26.553

```
Math.extendedRandom = function(a,b,excludeA,excludeB, round)
{
    var start = a;
    var end = b;
    if(excludeA)
        start++;
    if(excludeB)
        end--;

    var res = (end-start) * Math.random();
    return start + (round ? Math.floor(res) : res);
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T14:16:06.313

最简单的情况是第三种，它已经`Math.random`在 J​​avaScript 中实现了。

[Trevor 在这个问题中回答了](https://stackoverflow.com/questions/2143723/write-a-truly-inclusive-random-method-for-javascript)第一个案例。不过，请务必阅读其他答案和评论，以清楚地了解其含义。

同样，nickf 在同一个问题中回答了第四种情况。

第二种情况可以通过特雷弗回答的变体来处理：

```
function zero_exclusive_random(){
  var r = Math.random();
  return r == 0 ? zero_exclusive_random() : r;
} 
```

# iphone - 即将为移动设备创建网站，不确定一些事情

> ID：12026804
> 
> 赞同：0
> 
> 时间：2012-08-19T13:23:55.750
> 
> 标签：iphone, html, css, mobile

我即将创建我的网站的移动版本，我习惯于仅对计算机进行编程，我所知道的是我需要记住具有不同屏幕尺寸的设备将显示网站，因此我需要使网站可伸缩等等，

我一直想知道的是，我如何处理图像？我是一个非常关心我网站中图像质量的人，我讨厌像素化的东西，

让我困惑的是视网膜屏幕的整个想法，我为 iPhone 开发了一些应用程序，我必须为视网膜创建两倍大小的图像，但我需要为我的移动网站创建大图像吗？好？我有一种强烈的感觉，我不知道，但我想我会问，

另外，我想知道我应该为网站使用什么文档类型，以及什么可以帮助我防止人们能够缩小屏幕并使屏幕拉伸，我曾经知道这个 css 代码可以做到这一点，

我也很想听听那些已经有经验的人提供一些关于创建这样一个网站的提示，

非常感谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T13:30:39.580

至于 doctype 你可以使用两个`<!DOCTYPE>`s 如下

```
<!DOCTYPE html>
<html lang="en">

----OR----

<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.2//EN" "http://www.openmobilealliance.org/tech/DTD/xhtml-mobile12.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"> 
```

要阻止它拉伸，您还可以使用设置视口，我在许多移动网站中都使用过（iOS 中通常是 320 的倍数）

```
<meta name="viewport" content="width=640" /> 
```

但最终你也应该研究一下[jQuery Mobile Framework](http://jquerymobile.com/)。

对于我使用的大多数图像，我将在 Photoshop 中以 30% 的质量和网站所需的大小导出。使用设置视口，您真的不必担心大小。

或者，您可以使用`CSS3`媒体屏幕大小来格式化您的 CSS（也可以格式化为纵向和横向）

```
@media only screen and (min-device-width : 320px) and (max-device-width : 480px) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T13:26:57.807

您将需要使用[jQuery mobile](http://www.jquerymobile.com)之类的移动框架。这将使所有这些问题更容易解决。为了专门显示图像，您可能需要使用诸如[photoswipe之类的插件](http://www.photoswipe.com/)

# android - 如何在设备上安装“捆绑”应用程序（apk），只提示用户一次

> ID：12026806
> 
> 赞同：0
> 
> 时间：2012-08-19T13:24:10.697
> 
> 标签：android, android-package-managers

我的应用程序基于多个应用程序（每个应用程序都有不同的 apk 签名）。我想安装一个 apk 并在一次确认后设备应安装“捆绑包”中的所有应用程序。

我设法安装了应用程序包，但每次安装后我都会在安装前进行确认（见下文）。

我需要这是一个无缝的过程，用户只需确认一次安装过程。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    installAPK(R.raw.apk0, 0);
}

private void installAPK(int apk, int apk_code) {
    try {

        InputStream in = this.getResources().openRawResource(apk);

        byte[] b = new byte[in.available()];

        int read = in.read(b);

        // String tempFileName = "currentapk.apk";

        FileOutputStream fout = openFileOutput(tempFileName,
                MODE_WORLD_READABLE);

        fout.write(b);
        fout.close();
        in.close();

        File tempFile = getFileStreamPath(tempFileName);

        Intent intent = new Intent(Intent.ACTION_VIEW);
        intent.setDataAndType(Uri.fromFile(tempFile),
                "application/vnd.android.package-archive");
        startActivityForResult(Intent.createChooser(intent, "install"),
                apk_code);
    }

    catch (Exception ex) {
        ex.printStackTrace();
    }
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    File tempFile = getFileStreamPath(tempFileName);

    if (tempFile.delete()) {
        Log.d("******PACKAGING******", "FILE DELETED!");
    }

    switch (requestCode) {
    case 0: {

        installAPK(R.raw.apk1, 1);
        break;
    }

    case 1: {
        installAPK(R.raw.apk2, 2);
        break;
    }
          case 2: {
        installAPK(R.raw.apk3, 3);
        break;
    } 
```

知道如何通过仅提示用户一次来安装它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T14:13:57.637

> 我需要这是一个无缝的过程，用户只需确认一次安装过程。

幸运的是，这是不可能的——正如 zapi 所说，出于安全原因。用户有权知道正在安装什么，并有权说“不，我不想要那个”。

当然，欢迎您创建自己的内置所有这些应用程序的 ROM 模组，然后说服人们安装该 ROM。这消除了每个应用程序用户的选择。希望分发预装了应用程序的设备的企业会走这条路，不仅是为了避免提示，而且是为了防止人们在获得修改后的设备后卸载这些应用程序。

# html - Twitter Bootstrap - 内容居中

> ID：12026807
> 
> 赞同：1
> 
> 时间：2012-08-19T13:24:26.017
> 
> 标签：html, css, twitter-bootstrap

[http://elosource.herokuapp.com/](http://elosource.herokuapp.com/)

正如您在我的测试页面上看到的那样，内容在左侧站点中对齐。我想把它放在中间。

我虽然阅读了 [http://www.w3.org/Style/Examples/007/center.en.html](http://www.w3.org/Style/Examples/007/center.en.html)但由于某种原因它没有工作。

我的内容看起来像这样

```
<div class="content">

        <div class="row">
            <div class="span">
               <img src="http://placehold.it/180x1200">
            </div>
        <div class="span12">
                @content
            </div>
            <div class="span">
                <img src="http://placehold.it/180x1200">
            </div>
        </div>

    </div> 
```

我的CSS：

```
.content {
background-color: #fff;
display: block;
margin-left:auto;
margin-right: auto; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T14:35:51.547

你也应该在你的 .content 上设置一个宽度。像这样的东西：

```
.content {
   margin: 0 auto;
   width: 1340px;
} 
```

在 chrome 检查器中尝试过，效果很好...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T23:42:59.750

您是否希望将@content 居中？如果是这样试试这个。

```
 <div class="span12 pagination-centered"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-04T15:52:46.513

试试[这个](http://jsfiddle.net/rfkrocktk/hcQ48/)。我从[twitter 问题跟踪器中得到它](https://github.com/twitter/bootstrap/issues/399)

```
 <div class="container">
    <div class="alert-message block-message info" style="margin:10px">
        <h3>Centered Layouts</h3>
        <div class="alert-message block-message success span12 offset1">
            <p>Layout for <code>span12 offset1</code></p>
        </div>
        <div class="alert-message block-message success span10 offset2">
            <p>Layout for <code>span10 offset2</code></p>
        </div>
        <div class="alert-message block-message success span8 offset3">
            <p>Layout for <code>span8 offset3</code></p>
        </div>
        <div class="alert-message block-message success span6 offset4">
            <p>Layout for <code>span6 offset4</code></p>
        </div>
        <div style="clear:both"></div>
    </div>
    <div class="alert-message block-message info" style="margin:10px">
        <h3>Split Layouts</h3>
        <div class="row">
            <div class="alert-message block-message success span6">
                <p>Layout for<code>span6</code></p>
            </div>
            <div class="alert-message block-message success span4 offset4">
                <p>Layout for <code>span2 offset6</code></p>
            </div>
        </div>
        <div style="clear:both"></div>
    </div> 
</div> 
```

希望这会有所帮助

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-19T13:28:37.120

将css更改为：

```
.content {
background-color: #fff;
display: block;
text-align: center;
}​ 
```

**编辑：**

这是一个小提琴：http: [//jsfiddle.net/FlameTrap/x6vPH/](http://jsfiddle.net/FlameTrap/x6vPH/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-11-07T22:12:03.753

我不喜欢为事物设置宽度。这就是为什么我喜欢使用 inline-block 进行居中。

```
<div style="text-align: center;">
  <div style="display: inline-block; text-align: left;">
    <p>I'm so centered</p>
  </div>
</div> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-11-07T23:14:30.530

创建一个 .center 类并围绕您想要居中的任何内容包装一个 div。

```
.center {
 text-align: center;
}

<div class="center">
  ... stuff ...
</div> 
```

# hibernate - Hibernate Search：继承模型

> ID：12026813
> 
> 赞同：4
> 
> 时间：2012-08-19T13:25:46.063
> 
> 标签：hibernate, orm, hibernate-search

我计划在我的模型上使用 Hibernate Search 进行全文搜索，我担心我是否可以继续使用`InheritanceType.SINGLE_TABLE`我的模型层次结构，或者我是否必须手动创建一个大的平面模型。基本上我有两个要求：

*   能够在层次结构中对具体模型的所有子模型执行搜索
*   能够在基本模型的公共字段和具体子模型的字段上执行搜索

不幸的是，该参考文献没有说明任何关于继承的内容，而只是关于嵌入和关联的对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T06:32:17.720

JPA 继承模型对 Hibernate Search 不起作用，正如前面的答案所示，它甚至是默认值。

另一方面，Lucene 文档是一个扁平结构，基本上是字段名称到值的映射。在您要索引的字段之上，Hibernate Search 添加实体的唯一主键及其类名。当您将搜索限制在某个类时使用后者。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T13:13:25.360

没问题，因为“SINGLE_TABLE”是 InheritanceType 的默认值并支持您指定的内容。

问候，

# browser - 针对 CSRF 的更简单解决方案？

> ID：12026814
> 
> 赞同：0
> 
> 时间：2012-08-19T13:26:01.907
> 
> 标签：browser, web, security, csrf

我一直在考虑[Same Origin Policy](http://en.wikipedia.org/wiki/Same_origin_policy)和[CSRF](http://en.wikipedia.org/wiki/CSRF)，但无法回答自己为什么 Web 浏览器开发人员不使用更简单的解决方案。

与其禁止跨域脚本，为什么它们不能允许对任何站点的任何访问，但使用一个空的 cookie jar？（或者更确切地说，一个只包含当前域的 cookie 的 cookie jar）

任何标签（img、脚本等）都是一样的

如果任何访问都没有 cookie，那么 CSRF 可以做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T20:02:43.540

关于仅包含当前域的 cookie 的 cookie jar：当前域的 cookie 可能包含例如会话信息。然后可以通过线路发送此信息并导致会话劫持（例如）。

即使脚本没有 cookie 信息，网站上也可能存在其他敏感信息，可能通过 DOM 可见。然后可以跨域上传此信息。

另一方面，我不认为同源策略实际上对阻止恶意黑客有任何作用。正如您所说，img 和脚本可以发出请求。我可以运行一个返回 404 的服务器，但保留 GET 请求的日志（例如：恶意网站here.com/fake404.html?bankaccountnumber=34398439843983&otherinformation=blah）

# android - Android：支持同一屏幕尺寸类型内的多种屏幕尺寸

> ID：12026816
> 
> 赞同：1
> 
> 时间：2012-08-19T13:26:17.840
> 
> 标签：android, android-layout

我遇到的问题与支持多种屏幕尺寸有关——我相信这是一个相当普遍的问题。我搜索了很多，但没有找到有用的东西。

我的项目以传统方式布局，带有支持各种大小的文件夹，称为`layout`, `layout-small`, `layout-large`, `layout-xlarge`.

因此，正如我发现的那样，即使在这些尺寸范围内，屏幕的尺寸也不尽相同。例如，我的 320x480 屏幕符合正常尺寸布局，但某人的 480x800 也是如此。可以想象，我的应用程序的内容不会填满 480x800 设备的整个屏幕，因为有更多区域。以下是它的外观示例：

在 320x480（我设计的）上：

![在此处输入图像描述](../Images/08fd5939cd864ae31eb57c9c72c02214.png)

在 480x800 上（注意底部的额外空间）：

![在此处输入图像描述](../Images/b500abf1610a7ccf26c1426e89bb42d3.png)

现在，我做了很多研究并应用了很多技术，努力让我的应用在所有屏幕上都看起来不错，但我觉得我缺少一些基本的东西。我已经采取了所有基本步骤来使用，`dp`而不是到处`px`使用`RelativeLayout`，诸如此类。但我需要一些方法让我的应用程序重新调整自身大小以更好地适应更大的屏幕。例如，各个组件之间的边距可能会增加一点，以占用更多的空白垂直空间。

有什么建议或帮助吗？在最坏的情况下，有没有办法设计一个专门为 480x800 屏幕启动的布局（因为它们似乎是最常见的）？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T13:30:35.883

320 : 480 与 480 : 800 的比例不同。因此，与水平空间相比，后者的垂直空间比前者多。所以你的布局没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T14:01:23.023

如果我是你，我会使用这样的布局：

```
<LinearLayout android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1">
        <!-- Your first form line -->
    </LinearLayout>
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1">
        <!-- Your second form line -->
    </LinearLayout>
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1">
        <!-- Your third form line -->
    </LinearLayout>
        <!-- .... -->

</LinearLayout> 
```

这个布局将产生[这个](http://dl.dropbox.com/u/232549/linearlayout_sample.PNG)（当然没有颜色:)）。线条（彩色框）的比例是固定的，但它的大小在动态上适合屏幕高度。fill_parent 和 layout_weight 可以解决问题。

如果你想使用RelativeLayout，你必须从JAVA编程设置空白和高度（一些解释[here](http://www.androidhive.info/2011/12/android-dashboard-design-tutorial/)）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T13:32:05.103

您需要设计屏幕，以便*始终*考虑您定义的视图在屏幕尺寸缩小或增长时的行为方式。如您所见，即使在相同尺寸类别中，屏幕也可能有很大差异。

在您显示的屏幕的情况下，您需要通过使用权重而不是精确的 dp 量来给出 EditText 组件的宽度。您可以找到很多关于如何做到这一点的文章，[这里](http://joseluisugia.wordpress.com/2012/01/19/android-linearlayout-distribution-explained-weight-and-sizes/)有一篇作为开始。

# linux - 挂载目录？

> ID：12026818
> 
> 赞同：0
> 
> 时间：2012-08-19T13:26:20.430
> 
> 标签：linux, busybox

我想将特定文件夹挂载为 /system。我试着`mount -t ext2 -o loop /sd-ext/rom/system /system` 让`mount: mounting /sd-ext/rom/system /system failed: Block device required` 我使用 android，所以我仅限于 android shell 和busybox。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T13:37:57.430

我对 Android 不熟悉，但如果您想挂载*目录*而不是*设备*，则必须使用 mount`--bind`选项。

如果它真的是一个文件，那么您的 Android 可能没有循环设备支持。你有什么`/dev/loop*`设备吗？

# c# - .net 中未使用的用法会影响性能吗？

> ID：12026820
> 
> 赞同：11
> 
> 时间：2012-08-19T13:26:52.837
> 
> 标签：c#, .net, namespaces

> **可能重复：**
> [为什么要使用指令删除不必要的 C#？](https://stackoverflow.com/questions/136278/why-should-you-remove-unnecessary-c-sharp-using-directives)
> [未使用的 using 语句如何影响性能](https://stackoverflow.com/questions/1162766/how-is-performance-affected-by-an-unused-using-statement)

c# 中未使用的用法会影响运行时性能吗？如果是，怎么做？

```
using System;
using System.Collections.Generic;
using System.ComponentModel; -----//Unused
using System.Data;---------------//Unused
using System.Drawing;-----------//Unused
using System.Text;-------------//Unused
using System.Windows.Forms;
using System.Threading;------//Unused
using System.Linq;----------//Unused
using System.IO;-----------//Unused
using System.Diagnostics;-//Unused
using System.Data.OleDb;
using OBID; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-19T13:30:13.970

否，但它会影响 IDE 性能和项目的编译过程。我可以给你一个简短的例子。如果您曾经使用过来自 devexpress 的 coderush [http://devexpress.com/Products/Visual_Studio_Add-in/Coding_Assistance/](http://devexpress.com/Products/Visual_Studio_Add-in/Coding_Assistance/)，他们的 IDE 优化器和代码优化器也会建议您删除未使用的命名空间。

**更新：**这里是来自 Dmitriy 博客的更多使用信息 在 C# 代码中删除未使用的使用的原因很少。

```
•It is useless code, that just creates clutter in your source code and it also confusing for the developer because you don’t know which namespaces are actually used.
•Over time as your code changes it can accumulate a lot of unused using statements which create even more clutter in you code.
•It can make your compiling faster, since compiler does not have to look up all those extra unused namespaces.
•It will help avoid name conflict with new items that you going to add to your solution if both of those have same names.
•It will reduce number of items in your Visual Studio editor auto completion 
```

有几种方法可以删除那些未使用的用途，您可以在每个文件上单独执行

[http://msdn.microsoft.com/en-us/library/bb514115.aspx](http://msdn.microsoft.com/en-us/library/bb514115.aspx)

您还可以下载名为 batchFormat for Visual Studio 2010 的插件，它可以帮助您删除整个项目中所有未使用的用途。

[http://www.addictivetips.com/windows-tips/batch-format-remove-unused-usings-and-format-visual-studio-document/](http://www.addictivetips.com/windows-tips/batch-format-remove-unused-usings-and-format-visual-studio-document/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T13:29:17.053

不，他们没有。事实上，无论是否使用它们，它们都没有任何运行时意义。它们只是一个编译时常量，允许编译器识别类型而无需明确指定它们的全名。

他们的主要问题是，一个充满未使用`using`s 的文件会迫使您在检查代码时创建一个毫无意义的 PgDn。

# c# - 抽象类与接口

> ID：12026823
> 
> 赞同：0
> 
> 时间：2012-08-19T13:27:22.003
> 
> 标签：c#, interface, abstract-class

抽象类与接口是一样的，只是它是一个实际的类，而不仅仅是一个契约。为什么接口被称为契约？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T13:55:20.973

接口和抽象类都是契约，因为它们绑定了你。

但是接口和抽象类之间还有其他区别。

就像您说的那样，如果您需要一个实际的类，其中包含函数的内容或具有默认值的实际数据成员，或者一个 ctor，那么显然您将需要一个抽象类。

但很多时候，在接口或抽象类之间进行选择在技术上是相同的。有时即使从长远来看，情况也是如此。

那么你的决定应该基于你正在寻找的东西的*性质。*

它是您的数据类型的额外字符吗？还是它*定义*了您的数据类型**是**什么？

我试图想出任何现实世界的例子，但我找不到任何例子，因为我多年来没有对这个主题做过任何事情，所以我会给你一个类似书本的例子。

假设我们有一个抽象类 Animal：

```
public abstract class Animal
{
    abstract string Name;
    abstract bool IsWild;
    abstract bool IsHappy;
} 
```

这很容易成为一个界面。

并且选择它作为界面实际上不会对您的设计产生任何负面影响。

但就它的性质而言，它必须是一个抽象类，因为`class Dog` **它是**一种动物。它必须是`class Dog : Animal`而不是`class Dog : IAnimal`。

作为动物并不是`Dog`. 它**定义了**它。

并且您希望限制所有动物仅继承自`Animal`.

`IAnimal`让某人继承其他东西。喜欢：

```
public class Dog : Food, IAnimal {} 
```

有趣的是，有时人们可能会写一个*什么都没有*的抽象类，只是为了同一件事。

例如，如果没有任何共同财产，`Animal`您仍然愿意这样做：

```
public abstract class Animal { }

public class Dog : Animal // No actual added value.
{ 
        .........
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T13:43:59.300

> 抽象类与接口是同一回事 不正确。接口不定义方法体、私有方法、静态字段/方法等。

抽象方法可以是私有的，因此不能保证外部世界可以访问，接口实现有义务公开接口的方法，因此“保证”这些方法的存在和可访问性，因此术语合同。

# android - 互联网连接不可用时难以隐藏广告

> ID：12026827
> 
> 赞同：0
> 
> 时间：2012-08-19T13:27:54.843
> 
> 标签：android

我正在制作一个提供广告的应用程序。我想在互联网连接不可用时隐藏广告。但我无法做到这一点。这是我用来实现该结果的代码。请告诉我的代码有什么问题。

```
AdView myAddView = (AdView) findViewById(R.id.ad);
        ConnectivityManager cm = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo ni = cm.getActiveNetworkInfo();
        if (ni == null) {
            myAddView.setVisibility(8);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T13:44:03.163

添加：

```
|| !ni.isAvailable() || !ni.isConnected() 
```

第二个原因：您可以隐藏 Ad 的容器（例如），因为它可以强制显示自己，但不能显示它的父级。

并使用`View.GONE`而不是硬编码的“8”。

抱歉英语不好。

# c# - 如何在不删除其他字段的情况下使用 2 个不同的类更新 MongoDB 中的记录

> ID：12026828
> 
> 赞同：1
> 
> 时间：2012-08-19T13:28:09.423
> 
> 标签：c#, asp.net-mvc, c#-4.0, mongodb, mongodb-.net-driver

假设我有两个类，如下所示：

```
public class Class1 
{
    ....
    public int CityId {get;set;}
    public string CityName {get;set;}
    public ObjectId _id {get;set;}
}

public class Class2 : Class1
{
    public string OrderId {get;set;}
}

collUser.Update(
    Query.EQ("_id", model._id), 
    Update.Replace(model)); 
```

当我使用对象类型时`Class2`，更新以正常方式工作。

但是当我使用对象类型时`Class1`，更新会删除`OrderId`记录中的字段。

我假设它替换了集合中的所有记录（文档）。

有没有办法避免这种情况？或者有比使用 Update.Set 更简单的方法吗？

```
Update.Set("fieldName",value).Set("fieldName2",value2) 
```

我的意思是，如果该对象（Class1 或 Class2）拥有该属性而不删除其余字段，我只想更新字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T04:59:22.503

我不确定您是如何尝试实现这一点的，但它应该已经按照您期望的方式工作了。我已经这样做了：

```
var collection = db.GetCollection<Class1>("stuff");
var class2 = new Class2 {CityName = "Toronto", OrderId = "12345"};
collection.Save(class2);

var retrieved = collection.FindOne();
collection.Save(retrieved);
retrieved = collection.FindOne();
Console.WriteLine("Object deserialized as type {0}", retrieved.GetClass().Name); 
```

该`retrieved`对象实际上是`Class2`并且`OrderId`被保留（没有数据丢失）。我认为这可能是最预期的行为。Mongo 通过包含一个[类型鉴别器](http://www.mongodb.org/display/DOCS/CSharp+Driver+Serialization+Tutorial#CSharpDriverSerializationTutorial-Scalarandhierarchicaldiscriminators)来实现这一点。这基本上是对其自身的提示，因此它知道将文档反序列化为哪种类型。如果将`Employee`对象保存到`Person`类型化集合中，mongo 知道包含类型鉴别器，因为`Employee`它是`Person`.

为了避免麻烦，请遵循一个简单的规则：将您的集合强类型化为一种类型。如果您有一个包含`Employees`and的集合`Managers`，您应该只创建`db.GetCollection<Person>("people")`. 这样，Mongo 就可以正常工作。一旦你开始同时做这两件事`db.GetCollection<Employee>("people")`，`db.GetCollection<Manager>("people")`你就会遇到严重的麻烦（以及你发现的数据丢失问题）。

如果您仍然对这个答案不满意，您可能会喜欢[直接更新文档](http://www.mongodb.org/display/DOCS/CSharp+Driver+Tutorial#CSharpDriverTutorial-Updatemethod)的想法。MongoDB 实际上以其快速更新文档的能力而闻名。我强烈建议您查看本节，即使您对我的第一个建议感到满意。

# java - Java 等价于 COM

> ID：12026829
> 
> 赞同：2
> 
> 时间：2012-08-19T13:28:15.723
> 
> 标签：java, com, ipc

我正在开发一个 Java 应用程序，它将作为两个需要通信的进程运行。我想避免使用管道、套接字和类似的东西。我正在寻找像 COM 这样的东西，它允许我在两个进程之间共享一个对象（我知道它可能不仅仅是“共享”，例如对于 COM，这需要编组和 RPC）。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T13:32:43.733

我对[com](/questions/tagged/com "显示标记为“com”的问题")了解不多，但在 Java 世界中，[rmi](/questions/tagged/rmi "显示标记为“rmi”的问题")是两个 JVM 之间通信时的内置首选。[原则上，它是rpc](/questions/tagged/rpc "显示标记为“rpc”的问题")的面向对象的实现。在它下面使用 TCP/IP 和 Java 序列化 + [jndi](/questions/tagged/jndi "显示标记为“jndi”的问题")进行发现。

# javascript - 在 AngularJS 上模拟对单独表单的提交和验证

> ID：12026835
> 
> 赞同：4
> 
> 时间：2012-08-19T13:28:50.040
> 
> 标签：javascript, angularjs

如何在按钮位于其外部的表单上模拟提交和**验证？**

可以这样做：

HTML：

```
<div ng-controller="MyCtrl">
    <form ng-submit="onSubmitted()">

    Header inputs:
        <input type="name" ng-model="sample" required/>
        <input type="name" ng-model="sampleX" required/>

        <div style="visibility: hidden">
        <input type="submit" id="clcikMe" value="This submit triggers validation. But I wanted to put this button at the end of the page"/>
        </div>
    </form>

    <hr/>

    Some other form here. Think line items

    <hr />
    <a class="btn" linked="clcikMe">Wanted this submit button to trigger the validation+submit on the form in which this button doesn't belong</a>

</div> 
```

Javascript：

```
var app = angular.module('myApp', []);

function MyCtrl($scope) {

    $scope.onSubmitted = function() {
        alert('submitted!');
    };

}
app.directive("linked",function(){
    return function (scope, element, attrs) {
        var id = attrs["linked"];
        element.on("click",function(){
            document.getElementById(id).click();
        });
    };
}); 
```

* * *

但我想远离这种方法，它非常笨拙，它通过单击隐藏的提交按钮模拟第一个表单上的提交来触发验证+提交

AngularJS（甚至是普通的javascript）上是否有一个API可以让我实现我的目标？即不使用任何隐藏的提交按钮

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-25T19:59:05.503

你在这里思考的不是很Angular。没有人强迫您使用表单 ng-submit。只需使用 2 个按钮，每个按钮都有自己的`ng-click="runThisFunction()"`，或者只是使用相同的功能并传递一个参数。IE：

```
<button ng-click="submitForm(true)">Validate + Submit</button> 
```

和

```
<button ng-click="submitForm(false)">Only Validate</button> 
```

然后在你的控制器中：

```
$scope.submitForm = function(shouldSubmit) {
    //run validation here.
    //either using $scope.form.name.$valid or ng-model $scope variable
    var dataGood = false;
    if ($scope.sample === "goodData" && $scope.sample === "alsoGoodData" ) {
        //data is good
        dataGood = true;
        //alert user that data is good!
        alert('good job, your data is great!');
    }
    else {
    //data is bad
         alert (' data bad, dear padowan');
    }

    if (!shouldSubmit) return;

    //perform $http request to server, or navigate to a different page or whatever
    if (dataGood) {
    //submit data to server and let the party begin
    $http.post('/api/rocknroll/submit', { sample: $scope.sample, sampleX: $scope.sampleX}).then( $scope.handleResponse);
    }
} 
```

无论您是否在表单的范围内，这都会起作用，但您需要在控制器的范围内。

# java - 在静态类上初始化？

> ID：12026836
> 
> 赞同：1
> 
> 时间：2012-08-19T13:29:05.583
> 
> 标签：java, static

如果我有一个带有静态方法的辅助类，我怎样才能最好地进行一些初始化？

```
public class MyClass {

   //init a properties file
   {
     properties.load(..)
   }

   public static String getStringFromProperty(String name);
       return properties.getProperty(name);
   }
} 
```

有没有比静态代码块更好的初始化方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T13:38:48.737

试试这样...

`static initializer block`在加载类时**初始化属性。**

```
public class MyClass {

  static
        {
          properties.load(..)
        }

   public static String getStringFromProperty(String name);

       return properties.getProperty(name);
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T13:32:22.767

您可以使用[单例模式](http://en.wikipedia.org/wiki/Singleton_pattern)，它允许您将您的课程设计为普通的普通课程。在这种情况下，您将在构造函数中进行初始化。如果您在应用程序服务器下运行，您还可以使用[EJB](http://en.wikipedia.org/wiki/Enterprise_JavaBeans)来提供您的静态服务（例如 DAO）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T13:35:43.920

> 首先要知道；这个函数只能调用类的静态方法和属性。

所以最好将属性声明为静态的。

公共静态字符串 getStringFromProperty（字符串名称）；返回属性.getProperty(name); }

# php - 如何在 PHP 中验证电子邮件地址

> ID：12026842
> 
> 赞同：263
> 
> 时间：2012-08-19T13:29:34.963
> 
> 标签：php, regex, email, email-validation

我有这个功能来验证电子邮件地址：

```
function validateEMAIL($EMAIL) {
    $v = "/[a-zA-Z0-9_-.+]+@[a-zA-Z0-9-]+.[a-zA-Z]+/";

    return (bool)preg_match($v, $EMAIL);
} 
```

这可以检查电子邮件地址是否有效吗？

* * *

## 回答 #1

> 赞同：656
> 
> 时间：2012-08-19T13:32:14.213

检查电子邮件地址是否格式正确的最简单和最安全的方法是使用以下[`filter_var()`](http://php.net/manual/en/function.filter-var.php)功能：

```
if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
    // invalid emailaddress
} 
```

此外，您可以检查域是否定义了`MX`记录：

```
if (!checkdnsrr($domain, 'MX')) {
    // domain is not valid
} 
```

但这仍然不能保证邮件存在。找出这一点的唯一方法是发送确认邮件。

* * *

现在您有了简单的答案，如果您想学习或只是使用快速答案并继续前进，请随时阅读有关电子邮件地址验证的信息。别往心里放。

尝试使用正则表达式验证电子邮件地址是一项“不可能”的任务。我什至会说你所做的那个正则表达式是没用的。有三个关于电子邮件地址的 rfc 和编写正则表达式来捕获错误的电子邮件地址，同时没有误报是凡人无法做到的。查看[此列表](http://fightingforalostcause.net/misc/2006/compare-email-regex.php)`filter_var()`以了解 PHP函数使用的正则表达式的测试（失败和成功） 。

即使是内置的 PHP 函数、电子邮件客户端或服务器也无法正确处理。在大多数情况下仍然`filter_var`是最好的选择。

如果您想知道 PHP（当前）使用哪种正则表达式模式来验证电子邮件地址，请参阅[PHP 源代码](http://lxr.php.net/xref/PHP_5_4/ext/filter/logical_filters.c#525)。

如果您想了解有关电子邮件地址的更多信息，我建议您开始阅读规范，但我必须警告您，这无论如何都不容易阅读：

*   [RFC5322](https://www.rfc-editor.org/rfc/rfc5322)
*   [RFC5321](https://www.rfc-editor.org/rfc/rfc5321)
*   [RFC3696](https://www.rfc-editor.org/rfc/rfc3696)
*   [rfc6531](https://www.rfc-editor.org/rfc/rfc6531)（允许 unicode 字符，尽管许多客户端/服务器不接受它）

请注意，`filter_var()`如前所述，仅在 PHP 5.2 中可用。如果您希望它与早期版本的 PHP 一起使用，您可以使用 PHP 中使用的正则表达式：

```
<?php

$pattern = '/^(?!(?:(?:\\x22?\\x5C[\\x00-\\x7E]\\x22?)|(?:\\x22?[^\\x5C\\x22]\\x22?)){255,})(?!(?:(?:\\x22?\\x5C[\\x00-\\x7E]\\x22?)|(?:\\x22?[^\\x5C\\x22]\\x22?)){65,}@)(?:(?:[\\x21\\x23-\\x27\\x2A\\x2B\\x2D\\x2F-\\x39\\x3D\\x3F\\x5E-\\x7E]+)|(?:\\x22(?:[\\x01-\\x08\\x0B\\x0C\\x0E-\\x1F\\x21\\x23-\\x5B\\x5D-\\x7F]|(?:\\x5C[\\x00-\\x7F]))*\\x22))(?:\\.(?:(?:[\\x21\\x23-\\x27\\x2A\\x2B\\x2D\\x2F-\\x39\\x3D\\x3F\\x5E-\\x7E]+)|(?:\\x22(?:[\\x01-\\x08\\x0B\\x0C\\x0E-\\x1F\\x21\\x23-\\x5B\\x5D-\\x7F]|(?:\\x5C[\\x00-\\x7F]))*\\x22)))*@(?:(?:(?!.*[^.]{64,})(?:(?:(?:xn--)?[a-z0-9]+(?:-+[a-z0-9]+)*\\.){1,126}){1,}(?:(?:[a-z][a-z0-9]*)|(?:(?:xn--)[a-z0-9]+))(?:-+[a-z0-9]+)*)|(?:\\[(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){7})|(?:(?!(?:.*[a-f0-9][:\\]]){7,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,5})?)))|(?:(?:IPv6:(?:(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){5}:)|(?:(?!(?:.*[a-f0-9]:){5,})(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3})?::(?:[a-f0-9]{1,4}(?::[a-f0-9]{1,4}){0,3}:)?)))?(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))(?:\\.(?:(?:25[0-5])|(?:2[0-4][0-9])|(?:1[0-9]{2})|(?:[1-9]?[0-9]))){3}))\\]))$/iD';

$emailaddress = 'test@gmail.com';

if (preg_match($pattern, $emailaddress) === 1) {
    // emailaddress is valid
} 
```

*PS 关于上面使用的正则表达式模式的注释（来自 PHP 源）。看起来[Michael Rushton](http://lxr.php.net/xref/PHP_5_4/ext/filter/logical_filters.c#501)有一些版权。如前所述：“请随意使用和重新分发此代码。但请保留此版权声明。”*

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-08-19T13:33:15.257

您可以为此使用[filter_var 。](http://www.php.net/manual/en/function.filter-var.php)

```
<?php
   function validateEmail($email) {
      return filter_var($email, FILTER_VALIDATE_EMAIL);
   }
?> 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2017-02-04T07:03:37.473

以我的经验，`regex`解决方案有太多误报，`filter_var()`解决方案有误报（尤其是对于所有较新的[TLD](https://en.wikipedia.org/wiki/Top-level_domain)）。

相反，最好确保地址包含电子邮件地址的所有必需部分（用户、“@”符号和域），然后验证域本身是否存在。

无法确定（服务器端）是否存在外部域的电子邮件用户。

这是我在 Utility 类中创建的方法：

```
public static function validateEmail($email)
{
    // SET INITIAL RETURN VARIABLES

        $emailIsValid = FALSE;

    // MAKE SURE AN EMPTY STRING WASN'T PASSED

        if (!empty($email))
        {
            // GET EMAIL PARTS

                $domain = ltrim(stristr($email, '@'), '@') . '.';
                $user   = stristr($email, '@', TRUE);

            // VALIDATE EMAIL ADDRESS

                if
                (
                    !empty($user) &&
                    !empty($domain) &&
                    checkdnsrr($domain)
                )
                {$emailIsValid = TRUE;}
        }

    // RETURN RESULT

        return $emailIsValid;
} 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2012-08-19T13:32:43.840

我认为使用 PHP 的内置[过滤器](http://php.net/manual/en/filter.filters.validate.php)可能会更好——在这种特殊情况下：

`FILTER_VALIDATE_EMAIL`与参数一起提供时，它可以返回真或假。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2017-03-23T07:26:02.473

这不仅会验证您的电子邮件，还会对意外字符进行清理：

```
$email  = $_POST['email'];
$emailB = filter_var($email, FILTER_SANITIZE_EMAIL);

if (filter_var($emailB, FILTER_VALIDATE_EMAIL) === false ||
    $emailB != $email
) {
    echo "This email adress isn't valid!";
    exit(0);
} 
```

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2019-04-26T08:46:20.577

在这里阅读答案后，这就是我最终得到的结果：

```
public static function isValidEmail(string $email) : bool
{
    if (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
        return false;
    }

    //Get host name from email and check if it is valid
    $email_host = array_slice(explode("@", $email), -1)[0];

    // Check if valid IP (v4 or v6). If it is we can't do a DNS lookup
    if (!filter_var($email_host,FILTER_VALIDATE_IP, [
        'flags' => FILTER_FLAG_NO_PRIV_RANGE | FILTER_FLAG_NO_RES_RANGE,
    ])) {
        //Add a dot to the end of the host name to make a fully qualified domain name
        // and get last array element because an escaped @ is allowed in the local part (RFC 5322)
        // Then convert to ascii (http://us.php.net/manual/en/function.idn-to-ascii.php)
        $email_host = idn_to_ascii($email_host.'.');

        //Check for MX pointers in DNS (if there are no MX pointers the domain cannot receive emails)
        if (!checkdnsrr($email_host, "MX")) {
            return false;
        }
    }

    return true;
} 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2020-10-02T17:09:36.283

使用以下代码：

```
// Variable to check
$email = "john.doe@example.com";

// Remove all illegal characters from email
$email = filter_var($email, FILTER_SANITIZE_EMAIL);

// Validate e-mail
if (filter_var($email, FILTER_VALIDATE_EMAIL)) {
  echo("Email is a valid email address");
} 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2016-12-13T20:21:57.107

在关于电子邮件验证的“热门问题”中回答了这个问题[https://stackoverflow.com/a/41129750/1848217](https://stackoverflow.com/a/41129750/1848217)

> 对我来说，检查电子邮件的正确方法是：
> 
> 1.  检查符号 @ 是否存在，并且在它之前和之后有一些非 @ 符号：`/^[^@]+@[^@]+$/`
> 2.  尝试使用一些“激活码”向该地址发送电子邮件。
> 3.  当用户“激活”他的电子邮件地址时，我们会看到一切正常。
> 
> 当然，当用户输入“奇怪”的电子邮件时，您可以在前端显示一些警告或工具提示，以帮助他避免常见错误，例如域部分没有点或名称中有空格而没有引用等等。但是如果用户真的想要它，你必须接受地址“hello@world”。
> 
> 此外，您必须记住，电子邮件地址标准曾经并且可以不断发展，因此您不能只输入一些“标准有效”的正则表达式，一劳永逸。而且您必须记住，一些具体的互联网服务器可能无法满足通用标准的某些细节，实际上可以使用自己的“修改后的标准”。

因此，只需检查@，在前端提示用户并在给定地址发送验证电子邮件。

* * *

## 回答 #9

> 赞同：4
> 
> 时间：2018-05-02T08:44:35.630

如果您想检查**电子邮件地址提供的域**是否有效，请使用以下内容：

```
/*
* Check for valid MX record for given email domain
*/
if(!function_exists('check_email_domain')){
    function check_email_domain($email) {
        //Get host name from email and check if it is valid
        $email_host = explode("@", $email);     
        //Add a dot to the end of the host name to make a fully qualified domain name and get last array element because an escaped @ is allowed in the local part (RFC 5322)
        $host = end($email_host) . "."; 
        //Convert to ascii (http://us.php.net/manual/en/function.idn-to-ascii.php)
        return checkdnsrr(idn_to_ascii($host), "MX"); //(bool)       
    }
} 
```

这是过滤大量无效电子邮件地址以及标准电子邮件验证的便捷方法，因为有效的*电子邮件格式*并不意味着有效的*电子邮件*。

请注意，`idn_to_ascii()`（或他的姊妹函数`idn_to_utf8()`）函数*可能*在您的 PHP 安装中不可用，它需要扩展 PECL intl >= 1.0.2 和 PECL idn >= 0.1。

`user@[IPv6:2001:db8::1]`另请记住，无法验证IPv4 或 IPv6 作为电子邮件中的域部分（例如），只有*命名*主机可以。

[在这里](http://us3.php.net/manual/en/function.idn-to-utf8.php)查看更多。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-08-14T12:32:09.200

```
/(?![[:alnum:]]|@|-|_|\.)./ 
```

如今，如果您使用 HTML5 表单，`type=email`那么您已经安全了 80%，因为浏览器引擎有自己的验证器。为了补充它，将此正则表达式添加到您的`preg_match_all()`并否定它：

```
if (!preg_match_all("/(?![[:alnum:]]|@|-|_|\.)./",$email)) { .. } 
```

[查找 HTML5 表单用于验证的正则表达式](https://stackoverflow.com/questions/7786058/find-the-regex-used-by-html5-forms-for-validation)
[https://regex101.com/r/mPEKmy/1](https://regex101.com/r/mPEKmy/1)

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-12-28T18:19:47.677

如果您只是在寻找一个允许各种点、下划线和破折号的实际正则表达式，如下所示`[a-zA-z0-9.-]+\@[a-zA-z0-9.-]+.[a-zA-Z]+`：这将允许验证看起来相当愚蠢的电子邮件`tom_anderson.1-neo@my-mail_matrix.com`。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-09-13T09:07:24.587

[在FILTER_VALIDATE_EMAIL](https://www.php.net/manual/en/filter.filters.validate.php)中有一个更好的正则表达式，但任何正则表达式都会产生不好的结果。

例如..

```
// "not an email" is invalid so its false.
php > var_export(filter_var("not an email", FILTER_VALIDATE_EMAIL));
false
// "foo@a.com" looks like an email, so it passes even though its not real.
php > var_export(filter_var("foo@a.com", FILTER_VALIDATE_EMAIL));
'foo@a.com'
// "foo@gmail.com" passes, gmail is a valid email server,
//  but gmail require more than 3 letters for the address.
var_export(filter_var("foo@gmail.com", FILTER_VALIDATE_EMAIL));
'foo@gmail.com' 
```

您可能需要考虑使用像[Real Email](https://isitarealemail.com)这样的 API ，它可以进行深入的邮箱检查以检查电子邮件是否真实。

有一点像 ..

```
$email = "foo@bar.com";
$api_key = ???;

$request_context = stream_context_create(array(
    'http' => array(
        'header'  => "Authorization: Bearer " . $api_key
    )
));

$result_json = file_get_contents("https://isitarealemail.com/api/email/validate?email=" . $email, false, $request_context);

if (json_decode($result_json, true)['status'] == "valid") {
    echo("email is valid");
} else if (json_decode($result_json, true)['status'] == "invalid") {
    echo("email is invalid");
} else {
  echo("email was unknown");
} 
```

# python - 在 Mountain Lion 中前 mkvirtualenv 时出错

> ID：12026843
> 
> 赞同：3
> 
> 时间：2012-08-19T13:29:38.287
> 
> 标签：python, django, virtualenv, osx-mountain-lion

我有 Mountain Lion，我使用这种方法安装了 virtualenv：

```
sudo easy_install pip
sudo pip install virtualenv virtualenvwrapper
echo "export WORKON_HOME=$HOME/Envs" >> $BASH_CONFIG_FILE
echo "source /usr/local/bin/virtualenvwrapper.sh" >> $BASH_CONFIG_FILE
source ~/.bashrc 
```

当我尝试使用以下命令创建 virtualenv 时出现问题：

```
mkvirtualenv test 
```

我收到此错误：

```
New python executable in test/bin/python
Installing setuptools...........
Complete output from command /Users/marco/Envs/test/bin/python -c "#!python
\"\"\"Bootstra...sys.argv[1:])

" /Library/Python/2.7/...ols-0.6c11-py2.7.egg:
Traceback (most recent call last):
File "<string>", line 279, in <module>
File "<string>", line 207, in main
File "/Library/Python/2.7/site-packages/virtualenv_support/setuptools-0.6c11-py2.7.egg/setuptools/__init__.py", line 2, in <module>
File "/Library/Python/2.7/site-packages/virtualenv_support/setuptools-0.6c11-py2.7.egg/setuptools/extension.py", line 1, in <module>
File "/Users/marco/Envs/test/lib/python2.7/distutils/__init__.py", line 16, in <module>
exec(open(os.path.join(distutils_path, '__init__.py')).read())
IOError: [Errno 2] No such file or directory: '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/distutils/__init__.py'
----------------------------------------
...Installing setuptools...done.
Traceback (most recent call last):
File "/usr/local/bin/virtualenv", line 8, in <module>
load_entry_point('virtualenv==1.7.2', 'console_scripts', 'virtualenv')()
File "/Library/Python/2.7/site-packages/virtualenv.py", line 942, in main
never_download=options.never_download)
File "/Library/Python/2.7/site-packages/virtualenv.py", line 1052, in create_environment
search_dirs=search_dirs, never_download=never_download)
File "/Library/Python/2.7/site-packages/virtualenv.py", line 598, in install_setuptools
search_dirs=search_dirs, never_download=never_download)
File "/Library/Python/2.7/site-packages/virtualenv.py", line 570, in _install_req
cwd=cwd)
File "/Library/Python/2.7/site-packages/virtualenv.py", line 1020, in call_subprocess
% (cmd_desc, proc.returncode))
OSError: Command /Users/marco/Envs/test/bin/python -c "#!python
\"\"\"Bootstra...sys.argv[1:])
" /Library/Python/2.7/...ols-0.6c11-py2.7.egg failed with error code 1 
```

你能帮助我吗？

谢谢！标记

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T14:12:17.050

您没有安装 setuptools，

从[这里安装](http://pypi.python.org/pypi/setuptools#cygwin-mac-os-x-linux-other)

如果您从 lion 升级到山狮，由于文件系统的一些更改，python 安装会中断，理想情况下，您应该从 xcode 安装命令行工具，然后从 python 网站安装 python，然后从 python 网站安装 setuptools，然后通过 easy_install 安装 pip ，之后一切都会正常进行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T09:35:39.907

问题解决了：

Xcode 4 不会自动安装命令行工具。

基本上，安装 Xcode，进入首选项，然后下载并安装“命令行工具”。现在可以了。

:)

# mysql - Mysql-Null or table之间的一对多可选关系

> ID：12026855
> 
> 赞同：3
> 
> 时间：2012-08-19T13:31:26.903
> 
> 标签：mysql

好的，我有一张专辑和图片表。

一个相册可以有许多图像。

但是，图像可能并不总是属于相册。它可以是独立的。

更好的做法是在 image 表中的 album_id 上添加 null 还是在album_id 和 image_id 之间创建一个表。由于一张图片只能属于一个相册，我会在连接表中的 image_id 中添加一个独特的约束。

所以选项 1）图像表中的空字段选项 2）对 image_id 具有唯一约束的连接表

我读过这要么是识别关系，要么是非识别关系。如果我有非识别关系，则该字段仍需要设置为正确的空值。换句话说，非识别关系需要设置为非强制性的 - 是否正确？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T13:35:39.080

如果关系是一对多的，这里的 a `NULL`on the`images.album_id`更合适。在表上定义`album_id`及其外键约束时`images`，允许`NULL`是图像可能没有父相册的信号。这种设计允许一对多的相册到图像，同时也允许孤儿图像。

```
CREATE TABLE albums (
  album_id INT PRIMARY KEY AUTO_INCREMENT NOT NULL,
  othercol VARCHAR()
)
CREATE TABLE images (
  image_id INT PRIMARY KEY AUTO_INCREMENT NOT NULL,
  album_id INT NULL,
  FOREIGN KEY (album_id) REFERENCES albums (album_id)
) 
```

如果一张图片需要以多对多的关系属于多个相册，则需要在它们之间建立一个表格来关联它们。`album_images`当给定图像没有相关行时，这仍然允许孤立。

```
CREATE TABLE albums (
  album_id INT PRIMARY KEY AUTO_INCREMENT NOT NULL,
  othercol VARCHAR()
)
CREATE TABLE images (
  image_id INT PRIMARY KEY AUTO_INCREMENT NOT NULL,
  othercol VARCHAR()
)
/* Link albums to images as many times as necessary */
CREATE TABLE album_images (
  album_id INT NOT NULL,
  image_id INT NOT NULL,
  FOREIGN KEY (album_id) REFERENCES albums (album_id) ON DELETE CASCADE ON UPDATE CASCADE,
  FOREIGN KEY (image_id) REFERENCES images (image_id) ON DELETE CASCADE ON UPDATE CASCADE,
  /* composite key on the two, ensuring uniqueness */
  PRIMARY KEY (album_id, image_id)
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T13:43:59.610

就个人而言 - 我会把桌子放在中间。

这将允许您自己拥有图像。
和自己的专辑。
并且在适当的时候，您可以将它们关联到中间的表格中。多个相册中的相同图像，同一个相册中的多个图像。

如果您采用这种方式，您以后将永远不需要更改您的表定义——即使您的业务规则发生了变化。

# text - 将字符串分割成单词和句子（仅限英文）

> ID：12026856
> 
> 赞同：1
> 
> 时间：2012-08-19T13:31:53.213
> 
> 标签：text, nlp, artificial-intelligence

我正在寻找以下任务的解决方案。我从英文随机书中随机抽取几页并删除所有非字母字符并将所有字符转换为小写。结果我有类似的东西：

> 当iwasakidi想要成为飞行员时...

现在我正在寻找的是能够以相当高的准确度逆转该过程的东西。我需要找到单词和句子分隔符。任何想法如何解决这个问题？有没有我可以在不重新发明轮子的情况下使用的现有解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T16:52:37.417

这比普通的标记化更难，因为基本的标记化任务假设有空格。基本上，所有正常的标记化必须弄清楚，例如，标点符号应该是单词的一部分（如“先生”）还是单独的（如句子的末尾）。如果这是您想要的，您可以下载 Stanford CoreNLP 包，它使用基于规则的系统很好地执行此任务。

对于您的任务，您需要弄清楚在哪里放置空格。这个贝叶斯推理[教程](http://www.isi.edu/natural-language/people/bayes-with-tears.pdf)有一章中文分词（中文写作不使用空格）。相同的技术可以应用于无空格的英语。

基本思想是你有一个语言模型（一个 N-Gram 就可以了），并且你想根据语言模型选择一个最大化数据概率的拆分。因此，例如，根据语言模型，在“when”和“iwasakidiwantedtobeapilot”之间放置一个空格会比在“whe”和“niwasakidiwantedtobeapilot”之间放置一个空格，因为“when”是一个比“whe”更好的词”。你可以这样做很多次，添加和删除空格，直到你弄清楚是什么让你的句子看起来最英文。

这样做会给你一长串令牌。然后，当您想将这些标记拆分为句子时，您实际上可以使用相同的技术，除了使用基于单词的语言模型来帮助您在单词之间添加空格之外，您将使用基于句子的语言模型来拆分该列表标记成单独的句子。同样的想法，只是在不同的层面上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T14:43:49.693

您描述的任务称为“[单词标记化](http://en.wikipedia.org/wiki/Tokenization)”和“句子分割”。NLP中有很多关于它们的文献。他们有非常简单直接的解决方案，以及基于语言模型的高级概率方法。选择一个取决于您的确切目标。

# c - 浮点比较的差异 C

> ID：12026858
> 
> 赞同：0
> 
> 时间：2012-08-19T13:31:56.357
> 
> 标签：c, floating-point

```
float a = 0.7;
if(a<0.7)
  printf("true");
else
  printf("false"); 
```

**`OUTPUT : true`**

现在，如果我将 a 的值更改为 1.7 ，那么

```
float a = 1.7;
if(a<1.7)
  printf("true");
else
  printf("false"); 
```

**`OUTPUT : false`**

由于 0.7 被视为 double (HIGH PRECISION) 而 a 是 float (LESS PRECISION) ，因此 a < 0.7 ，在第二种情况下它应该再次相同，所以它也应该打印`true`。为什么这里的输出不同？

PS：我已经看过[这个](https://stackoverflow.com/questions/6883306/floating-point-comparison-a-0-7)链接。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-19T14:50:04.383

既然您看到了[我](https://stackoverflow.com/a/6885023/142434)对您链接的问题的回答，让我们完成它并进行必要的更改以检查您的第二种情况：

* * *

在二进制中，1.7 是：

```
b1.1011001100110011001100110011001100110011001100110011001100110... 
```

但是，1.7 是一个双精度字面量，其值是 1.7 舍入到最接近的可表示双精度值，即：

```
b1.1011001100110011001100110011001100110011001100110011 
```

在十进制中，这正是：

```
 1.6999999999999999555910790149937383830547332763671875 
```

当您编写 float a = 1.7 时，该双精度值再次四舍五入为单精度，并且 a 获取二进制值：

```
b1.10110011001100110011010 
```

这正是

```
 1.7000000476837158 
```

十进制（注意它是四舍五入的！）

当您进行比较 (a < 1.7) 时，您正在将此单精度值（转换为双精度值，它不会四舍五入，因为所有单精度值都可以用双精度表示）与原始双精度值进行比较。因为

```
 1.7000000476837158 > 1.6999999999999999555910790149937383830547332763671875 
```

比较正确返回 false，并且您的程序打印“false”。

* * *

好的，那么为什么 0.7 和 1.7 的结果不同呢？这一切都在四舍五入。单精度数有 24 位。当我们用二进制写下 0.7 时，它看起来像这样：

```
b.101100110011001100110011 00110011... 
```

（第 24 位之后有空格来显示它的位置）。因为第 24 位之后的下一个数字是零，所以当我们四舍五入到 24 位时，我们向下舍*入*。

现在看 1.7：

```
b1.10110011001100110011001 10011001... 
```

因为我们有前导`1.`，第 24 位的位置移动，现在第 24 位之后的下一个数字是 1，我们改为*四舍五入。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-19T13:56:19.730

如果`float`和`double`分别是 IEEE-754 32 位和 64 位浮点格式，则最接近`float`1.7 的是 ~1.7000000477，最接近`double`的是 ~1.6999999999999999556。在这种情况下，最接近的`float`恰好在数值上大于最接近的`double`。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-19T13:38:24.997

0.7 和 1.7 在 base-2 中的表示方式不同 - 所以一个可能比实际（精确）值略多，另一个略少。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-19T14:33:25.820

这一切都与浮点的基数 2 表示有关。这是关于该主题的一个很好的参考：[What Every Computer Scientist Should Know About Floating-Point Arithmetic。](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

# php - 当标题是php插入时，如何在导航菜单上使用当前标签？

> ID：12026864
> 
> 赞同：0
> 
> 时间：2012-08-19T13:32:21.097
> 
> 标签：php, html, css, navigation

我正在建立一个网站。

我已经建立了一个网站。对于每个页面，页眉和页脚都作为 php 包含包含在内。过去，在我决定使用 insert 之前，我会简单地添加`class='current'`. 但是，作为一个包含，我不能这样做，因为所有页面都使用相同的代码，例如，如果我将当前课程放在主页链接上，那么即使您在关于我们页面上，主页链接也将具有当前班级。我该如何克服呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T13:37:20.383

在您的`header.php`文件中添加一个函数来检查哪个页面是当前页面，然后更新您的`menu code`，使其具有如下条件：

```
<a href='?page=about' <?php if($current_page == 'about') echo "class='current'"; ?>>About</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T13:39:54.137

这是您可以解决的一种方法：

每页：

```
$current_page_id = 'about';

include "nav.php"; 
```

包含文件：

```
$nav_items = array(

  'home' => array(

    'href' => "/",

    'label' => "Home Page"

  ),
  // home

  'about' => array(

    'href' => "/about",

    'label' => "About"

  ),
  // about

  ...

);
// $nav_items

?>

<ul>

<?php

foreach ( $nav_items as $nav_id => $nav_item ) {

  $nav_item[ 'class' ] = $nav_id === $current_page_id ? 'active' : '';

  echo <<<DOCHERE

<li>
<a class="{$nav_item[ 'class' ]}" href="{$nav_item[ 'href' ]}">{$nav_item[ 'label' ]}</a>
</li>

DOCHERE;

?>

</ul> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T13:54:44.087

作为替代方案，您还可以为您的身体提供一个 id，在您的页面上指明您的身份。像这样的东西：

```
<body id="home-page">
...
<ul id="nav">
  <li id="home-button">home</li>
  <li id="about-button">about us</li>
  ...
</ul>
... 
```

然后在你的CSS中你可以做这样的事情

```
#nav li {
   /* the default styling */
}
#home-page #home-button, about-page #about-button, ... {
   /* the 'active' styling */
} 
```

很多可能性！

# ruby-on-rails - Faye 如何计算最大客户数

> ID：12026870
> 
> 赞同：4
> 
> 时间：2012-08-19T13:33:03.000
> 
> 标签：ruby-on-rails, faye

我正在使用 faye 和 ruby​​ 服务器进行发布-订阅消息传递，它运行良好，但我有一些疑问：

1.  我如何估计可以同时接收消息的最大客户端数？它应该与我的消息大小有关，但我现在不知道如何衡量这个值。我认为了解这一点非常重要，因为我想防止将来出现任何形式的延迟。
2.  如何模拟同时连接的 N 个客户端？可以通过水豚完成还是有更好的方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-04T16:22:14.873

您可以尝试负载测试。这里有几个选项可以帮助您入门：

[https://github.com/dbrady/tourbus](https://github.com/dbrady/tourbus)
[https://flood.io/](https://flood.io/)

# jquery - 如何检查/取消待处理的 ajax 请求？

> ID：12026882
> 
> 赞同：-1
> 
> 时间：2012-08-19T13:33:52.433
> 
> 标签：jquery

谁能告诉我如何在 jQuery 中检查当前工作/待处理的 ajax 请求，或者如何在发送新的 ajax 请求之前停止所有待处理的请求？

我不需要发送多个 ajax 请求。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T22:40:22.283

要取消请求，您可以像其他人建议的那样使用“中止”。

要检查状态，您可以使用 beforeSend 之类的触发器来了解它是在发送之前。您还可以使用可能有助于跟踪的全局触发器。

所有回调/触发器都在[JQuery 的 AJAX 页面](http://api.jquery.com/jQuery.ajax/)中有详细记录。

# algorithm - 理解算法时间和空间复杂性需要什么类型的数学？

> ID：12026883
> 
> 赞同：4
> 
> 时间：2012-08-19T13:34:06.277
> 
> 标签：algorithm, math, time-complexity, space-complexity

我一直在申请工作，每次听到有关算法时间/空间复杂性的问题时，我都会畏缩和跌跌撞撞。无论我读了多少书，我的大脑似乎都被编程为无法获得任何东西，我认为原因是因为逃学导致我的数学背景非常低。这可能不是常见的 SO 问题，甚至可能由于从根本上讲数学而被删除，但至少我希望我能弄清楚这个问题接下来要去哪里。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-19T13:56:18.257

我不知道为什么工作的人会这样做，所以这里只是几个例子。整个“复杂性”只是提供算法使用多少时间（或内存）的指示。

现在，如果您有一个包含值的数组，则访问给定索引处的值是 O(1) - 常量。in 数组有多少元素并不重要，如果您有索引，则可以直接获取该元素。

另一方面，如果您正在寻找一个特定的值，您将别无选择，只能查看每个元素（至少在找到一个元素之前，但这对于复杂性无关紧要）。因此，在随机数组中搜索是 O(n)：运行时间对应于元素的数量。

另一方面，如果您已经对数组进行了排序，那么您可以进行“二分搜索”，即 O(log n)。“Log n”是二进制对数，基本上是 2^n 的倒数。例如，2^10 是 2*2*2*2...*2 10 次 = 1024，而 log2(1024) 是 10。因此，通常认为 O(log n) 的算法非常好：找到一个使用二进制搜索排序数组中的元素，如果数组最多有 1024 个元素，则二进制搜索只需查看其中的 10 个即可找到任何值。对于 1025-2048 元素，它最多为 11 次，对于 2049-4096 则为 12 次，依此类推。因此，添加更多元素只会慢慢增加运行时间。

当然，事情可能会变得更糟。一个简单的排序算法往往是 O(n**2)，这意味着对于只有 2 个元素的数组，它需要 2^2 = 4 次“操作”，如果数组有 3，则需要 3^2 = 9，4^2 =如果数组有 4 个元素，则为 16，依此类推。实际上很糟糕，考虑到只有 1000 个元素的数组已经需要 1000*1000 = 100 万次比较才能排序。这被称为指数增长，当然它可能会变得更糟：O(n^3)、O(n^4) 等。越来越糟糕。

一个“好的”排序算法是 O(n*log n)。假设一个数组有 1024 个元素，这将是 1024*10=10240 比较 --- 比我们之前的 100 万要好得多。

只需将这些 O(...) 作为运行时行为（或应用到内存时的内存占用）的指标。我确实插入了实数，你可以看到数字是如何变化的，但这些并不重要，通常这些复杂性是最坏的情况。尽管如此，仅看数字，“恒定时间”显然是最好的，指数总是不好的，因为运行时间（或内存使用）飞速增长。

编辑：另外，你对常数因素并不感兴趣；您通常不会看到“O(2n)”。这仍然是“O(n)”——运行时与元素的数量直接相关。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-19T13:46:12.307

要分析算法的时间/空间复杂度 - 高中知识应该没问题。我在大学学过这个。在我的第一个学期，我很好。

基础的兴趣领域是：

*   基本微积分（了解什么是[“极限”](http://en.wikipedia.org/wiki/Limit_%28mathematics%29)和[渐近线](http://en.wikipedia.org/wiki/Asymptote)）
*   [级数](http://en.wikipedia.org/wiki/Series_%28mathematics%29)计算（特别是[算术级数](http://en.wikipedia.org/wiki/Arithmetic_progression)和经常使用）
*   [组合](http://en.wikipedia.org/wiki/Combinatorics)数学的基础知识（“有多少选择……？”）
*   多项式算术基础 (p(x) + q(x) = ?)

以上对于分析*算法*的复杂性是正确的。计算*问题*的复杂性是一个更深层次的领域，仍处于研究阶段——[复杂性理论](http://en.wikipedia.org/wiki/Computational_complexity_theory)。这需要广泛的集合论、计算理论、高级微积分、线性代数等知识。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-20T01:02:05.703

虽然了解微积分、求和级数和离散数学都是好事，但从您的问题和我在行业中的有限经验来看，我怀疑您的面试官是否期望达到这种理解水平。

在实践中，您可以对时间和空间复杂性做出有用的大 O 语句，而无需进行大量的数学思考。以下是基础知识，我将根据时间复杂度来讨论这些基础知识，只是让语言不那么抽象。

大 O 时间复杂度告诉您算法的最坏情况运行时间如何随其输入的大小而变化。您从 big-O 函数获得的实​​际数字*表示*您的算法将在给定大小的输入上执行的恒定时间操作的数量。

因此，big-O 函数只计算您的算法将执行的恒定时间操作的数量。

*   恒定时间操作称为 O(1)。[请注意，任何固定长度的恒定时间操作序列也是 O(1)，因为该序列也需要恒定的时间。]

O(k) = O(1)，对于任何常数 k。

*   如果您的算法连续执行多个操作，则将它们的成本相加。

O(f) + O(g) = O(f + g)

*   如果您的算法多次执行操作，则将操作的成本乘以执行的次数。

n * O(f) = O(n * f)

O(f) * O(f) * ... * O(f) = O(f^n)，其中左侧有 n 项

*   一个经典的 big-O 函数是 log(n)，它总是对应于“包含 n 个项目的平衡树的高度”。你只要知道排序是 O(n log(n)) 就可以逃脱惩罚。

*   最后，您只报告大 O 函数中增长最快的项，因为随着输入大小的增长，这将支配所有其他项。任何常数因子也会被丢弃，因为我们只对结果的缩放属性感兴趣。

例如，O(2(n^2) + n) = O(n^2)。

这里有两个例子。

**冒泡排序 n 项**

每次遍历项目都会将（至少）一个项目排序到位。因此，我们需要 n 次遍历来对所有项目进行排序。

```
O(bubble-sort(n)) = n * O(traversal(n))
                  = O(n * traversal(n)) 
```

项目的每次遍历都涉及 n - 1 个相邻的比较和交换操作。

```
O(traversal(n)) = (n - 1) * O(compare-and-swap)
                = O((n - 1) * O(compare-and-swap)) 
```

比较和交换是一个恒定时间操作。

```
O(compare-and-swap) = O(1) 
```

收集我们的条款，我们得到：

```
O(bubble-sort(n)) = O(n * (n - 1) * 1)
                  = O(n^2 - n)
                  = O(n^2) 
```

**合并排序 n 个项目**

合并排序自下而上工作，将项目合并成对，将成对成四，四成成八，依此类推，直到列表被排序。将每组这样的操作称为“合并遍历”。由于 n = 2 ^ log_2(n) 最多可以有 log_2(n) 个合并遍历，并且在每个级别上，我们都将要合并的子列表的大小加倍。所以，

```
O(merge-sort(n)) = log_2(n) * O(merge-traversal(n))
                 = O(log_2(n) * merge-traversal(n)) 
```

每个合并遍历遍历所有输入数据一次。每个输入项是至少一个比较和选择操作的主题，并且每个比较和选择操作选择一对项目中的一个来“发出”。因此

```
O(merge-traversal(n)) = n * O(compare-and-select)
                      = O(n * compare-and-select) 
```

每个比较和选择操作都需要固定时间：

```
O(compare-and-select) = O(1) 
```

收集术语，我们得到

```
O(merge-sort(n)) = O(log_2(n) * n * 1)
                 = O(n * log_2(n))
                 = O(n * log(n)), since change of log base is 
                                  multiplication by a constant. 
```

呸呸呸！

# c++ - 在 boost::lambda 中表达 _1.second->pair().first == r

> ID：12026884
> 
> 赞同：2
> 
> 时间：2012-08-19T13:34:19.423
> 
> 标签：c++, boost, boost-lambda

我有一个需要`std::transform`作为回调输入的表达式，但我不想为它编写另一个方法。`_1.second->pair().first == r`我想表达`boost::lambda`假设`_1`是唯一传递给它的参数类型的表达式`std::pair`

我有一个通用的速记函子`util::shorthand::pair_second`，`util::shorthand::pair_first`它返回一对中的第二个和第一个项目。

我可以做`boost::bind(util::shorthand::pair_second, _1)`但是然后做什么？如何实现表达式的其余部分？

`-1.second`是模板类型的`Connection<T>`。我不能使用 C++11

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T13:50:23.737

看看[Boost.Lambda 绑定表达式](http://www.boost.org/doc/libs/1_50_0/doc/html/lambda/le_in_details.html#lambda.bind_expressions)。您可以使用它们来绑定成员函数和成员数据。

关于您使用的类型，我没有足够的信息，但这样的事情应该可以工作：

```
bind(&std::pair<S, R>::first,
     bind(&Connection<T>::pair,
          bind(&std::pair<U, Connection<T> >::second, _1))) == r 
```

注意：`bind`此示例中的 是`boost::lambda`命名空间中的，而不是 Boost.Bind。

**编辑：**完整的，可编译的例子：

```
#include <algorithm>
#include <iostream>
#include <utility>
#include <vector>

#include <boost/lambda/lambda.hpp>
#include <boost/lambda/bind.hpp>

// http://stackoverflow.com/questions/12026884/expressing-1-second-pair-first-r-in-boostlambda/

typedef int S;
typedef int R;

template <typename T>
struct Connection
{
    std::pair<S, R> pair() const {
        return std::make_pair(0, 0);
    }
};

int main()
{
    using namespace boost::lambda;

    typedef int T;
    typedef int U;

    std::vector<std::pair<U, Connection<T> > > vec;
    vec.push_back(std::make_pair(3, Connection<T>()));
    std::vector<bool> res(vec.size());

    int r = 0;
    std::transform(vec.begin(), vec.end(), res.begin(),
        bind(&std::pair<S, R>::first,
            bind(&Connection<T>::pair,
                bind(&std::pair<U, Connection<T> >::second, _1))) == r);

    std::vector<bool>::iterator it, end = res.end();
    for (it = res.begin(); it != end; ++it) {
        std::cout << ' ' << *it;
    }
    std::cout << std::endl;
} 
```

# java - 是否有一个通用的 Java 实用程序可以将列表分成多个批次？

> ID：12026885
> 
> 赞同：200
> 
> 时间：2012-08-19T13:34:23.357
> 
> 标签：java, collections

我给自己写了一个实用程序，可以将列表分成给定大小的批次。我只是想知道是否已经有任何 apache commons util 用于此。

```
public static <T> List<List<T>> getBatches(List<T> collection,int batchSize){
    int i = 0;
    List<List<T>> batches = new ArrayList<List<T>>();
    while(i<collection.size()){
        int nextInc = Math.min(collection.size()-i,batchSize);
        List<T> batch = collection.subList(i,i+nextInc);
        batches.add(batch);
        i = i + nextInc;
    }

    return batches;
} 
```

请让我知道是否已经有任何现有的实用程序。

* * *

## 回答 #1

> 赞同：310
> 
> 时间：2012-08-19T13:38:07.477

从[Google Guava](http://code.google.com/p/guava-libraries/)查看： [`Lists.partition(java.util.List, int)`](https://google.github.io/guava/releases/19.0/api/docs/com/google/common/collect/Lists.html#partition(java.util.List,%20int))

> 返回列表的连续子列表，每个子列表大小相同（最终列表可能更小）。例如，对包含`[a, b, c, d, e]`3 的分区大小的列表进行分区会产生`[[a, b, c]`, `[d, e]]`-- 一个包含两个由三个和两个元素组成的内部列表的外部列表，所有这些都按原始顺序排列。

* * *

## 回答 #2

> 赞同：91
> 
> 时间：2015-05-06T09:23:04.613

如果要生成 Java-8 批处理流，可以尝试以下代码：

```
public static <T> Stream<List<T>> batches(List<T> source, int length) {
    if (length <= 0)
        throw new IllegalArgumentException("length = " + length);
    int size = source.size();
    if (size <= 0)
        return Stream.empty();
    int fullChunks = (size - 1) / length;
    return IntStream.range(0, fullChunks + 1).mapToObj(
        n -> source.subList(n * length, n == fullChunks ? size : (n + 1) * length));
}

public static void main(String[] args) {
    List<Integer> list = Arrays.asList(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14);

    System.out.println("By 3:");
    batches(list, 3).forEach(System.out::println);

    System.out.println("By 4:");
    batches(list, 4).forEach(System.out::println);
} 
```

输出：

```
By 3:
[1, 2, 3]
[4, 5, 6]
[7, 8, 9]
[10, 11, 12]
[13, 14]
By 4:
[1, 2, 3, 4]
[5, 6, 7, 8]
[9, 10, 11, 12]
[13, 14] 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2019-05-28T14:09:40.377

使用 Apache Commons [ListUtils.partition](https://commons.apache.org/proper/commons-collections/apidocs/org/apache/commons/collections4/ListUtils.html#partition-java.util.List-int-)。

```
org.apache.commons.collections4.ListUtils.partition(final List<T> list, final int size) 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2017-01-06T07:16:03.057

另一种方法是使用`Collectors.groupingBy`索引，然后将分组索引映射到实际元素：

```
 final List<Integer> numbers = range(1, 12)
            .boxed()
            .collect(toList());
    System.out.println(numbers);

    final List<List<Integer>> groups = range(0, numbers.size())
            .boxed()
            .collect(groupingBy(index -> index / 4))
            .values()
            .stream()
            .map(indices -> indices
                    .stream()
                    .map(numbers::get)
                    .collect(toList()))
            .collect(toList());
    System.out.println(groups); 
```

输出：

> [1、2、3、4、5、6、7、8、9、10、11]
> 
> [[1, 2, 3, 4], [5, 6, 7, 8], [9, 10, 11]]

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2019-05-25T18:58:32.763

使用 Java 9，您可以使用[`IntStream.iterate()`](https://docs.oracle.com/javase/9/docs/api/java/util/stream/IntStream.html#iterate-int-java.util.function.IntPredicate-java.util.function.IntUnaryOperator-)条件`hasNext`。因此，您可以将方法的代码简化为：

```
public static <T> List<List<T>> getBatches(List<T> collection, int batchSize) {
    return IntStream.iterate(0, i -> i < collection.size(), i -> i + batchSize)
            .mapToObj(i -> collection.subList(i, Math.min(i + batchSize, collection.size())))
            .collect(Collectors.toList());
} 
```

使用`{0, 1, 2, 3, 4, 5, 6, 7, 8, 9}`，结果`getBatches(numbers, 4)`将是：

```
[[0, 1, 2, 3], [4, 5, 6, 7], [8, 9]] 
```

* * *

## 回答 #6

> 赞同：8
> 
> 时间：2016-03-16T13:31:44.863

我想出了这个：

```
private static <T> List<List<T>> partition(Collection<T> members, int maxSize)
{
    List<List<T>> res = new ArrayList<>();

    List<T> internal = new ArrayList<>();

    for (T member : members)
    {
        internal.add(member);

        if (internal.size() == maxSize)
        {
            res.add(internal);
            internal = new ArrayList<>();
        }
    }
    if (internal.isEmpty() == false)
    {
        res.add(internal);
    }
    return res;
} 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2015-03-18T00:06:27.380

以下示例演示了 List 的分块：

```
package de.thomasdarimont.labs;

import java.util.ArrayList;
import java.util.Arrays;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

public class SplitIntoChunks {

    public static void main(String[] args) {

        List<Integer> ints = Arrays.asList(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11);

        List<List<Integer>> chunks = chunk(ints, 4);

        System.out.printf("Ints:   %s%n", ints);
        System.out.printf("Chunks: %s%n", chunks);
    }

    public static <T> List<List<T>> chunk(List<T> input, int chunkSize) {

        int inputSize = input.size();
        int chunkCount = (int) Math.ceil(inputSize / (double) chunkSize);

        Map<Integer, List<T>> map = new HashMap<>(chunkCount);
        List<List<T>> chunks = new ArrayList<>(chunkCount);

        for (int i = 0; i < inputSize; i++) {

            map.computeIfAbsent(i / chunkSize, (ignore) -> {

                List<T> chunk = new ArrayList<>();
                chunks.add(chunk);
                return chunk;

            }).add(input.get(i));
        }

        return chunks;
    }
} 
```

输出：

```
Ints:   [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]
Chunks: [[1, 2, 3, 4], [5, 6, 7, 8], [9, 10, 11]] 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2020-09-25T08:14:41.847

这里有一个例子：

```
final AtomicInteger counter = new AtomicInteger();
final int partitionSize=3;
final List<Object> list=new ArrayList<>();
            list.add("A");
            list.add("B");
            list.add("C");
            list.add("D");
            list.add("E");

final Collection<List<Object>> subLists=list.stream().collect(Collectors.groupingBy
                (it->counter.getAndIncrement() / partitionSize))
                .values();
        System.out.println(subLists); 
```

**输入：** [A、B、C、D、E]

**输出：** [[A, B, C], [D, E]]

您可以在此处找到示例： [https ://e.printstacktrace.blog/divide-a-list-to-lists-of-n-size-in-Java-8/](https://e.printstacktrace.blog/divide-a-list-to-lists-of-n-size-in-Java-8/)

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2019-09-20T06:57:27.573

这是 Java 8+ 的简单解决方案：

```
public static <T> Collection<List<T>> prepareChunks(List<T> inputList, int chunkSize) {
    AtomicInteger counter = new AtomicInteger();
    return inputList.stream().collect(Collectors.groupingBy(it -> counter.getAndIncrement() / chunkSize)).values();
} 
```

* * *

## 回答 #10

> 赞同：5
> 
> 时间：2019-02-14T12:36:17.567

还有[另一个问题](https://stackoverflow.com/questions/41265999/java-splitting-list-of-strings-into-smaller-list)作为这个问题的重复而被关闭，但如果你仔细阅读它，它就会有微妙的不同。因此，如果有人（比如我）实际上想要将列表拆分为*给定数量的几乎相同大小的子列表*，请继续阅读。

[我只是将这里](https://stackoverflow.com/questions/2130016/splitting-a-list-into-n-parts-of-approximately-equal-length/37414115#37414115)描述的算法移植到 Java。

```
@Test
public void shouldPartitionListIntoAlmostEquallySizedSublists() {

    List<String> list = Arrays.asList("a", "b", "c", "d", "e", "f", "g");
    int numberOfPartitions = 3;

    List<List<String>> split = IntStream.range(0, numberOfPartitions).boxed()
            .map(i -> list.subList(
                    partitionOffset(list.size(), numberOfPartitions, i),
                    partitionOffset(list.size(), numberOfPartitions, i + 1)))
            .collect(toList());

    assertThat(split, hasSize(numberOfPartitions));
    assertEquals(list.size(), split.stream().flatMap(Collection::stream).count());
    assertThat(split, hasItems(Arrays.asList("a", "b", "c"), Arrays.asList("d", "e"), Arrays.asList("f", "g")));
}

private static int partitionOffset(int length, int numberOfPartitions, int partitionIndex) {
    return partitionIndex * (length / numberOfPartitions) + Math.min(partitionIndex, length % numberOfPartitions);
} 
```

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2015-09-11T09:53:03.877

使用来自网络的各种作弊，我来到了这个解决方案：

```
int[] count = new int[1];
final int CHUNK_SIZE = 500;
Map<Integer, List<Long>> chunkedUsers = users.stream().collect( Collectors.groupingBy( 
    user -> {
        count[0]++;
        return Math.floorDiv( count[0], CHUNK_SIZE );
    } )
); 
```

我们使用 count 来模拟一个正常的集合索引。
然后，我们将集合元素分组到桶中，使用代数商作为桶号。
最终的地图包含桶号作为**键**，桶本身作为**值。**

然后，您可以轻松地对每个存储桶执行操作：

```
chunkedUsers.values().forEach( ... ); 
```

* * *

## 回答 #12

> 赞同：3
> 
> 时间：2019-10-21T15:09:25.740

类似于没有流和库的 OP，但更简洁：

```
public <T> List<List<T>> getBatches(List<T> collection, int batchSize) {
    List<List<T>> batches = new ArrayList<>();
    for (int i = 0; i < collection.size(); i += batchSize) {
        batches.add(collection.subList(i, Math.min(i + batchSize, collection.size())));
    }
    return batches;
} 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2013-04-25T06:02:35.543

```
List<T> batch = collection.subList(i,i+nextInc);
->
List<T> batch = collection.subList(i, i = i + nextInc); 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2021-04-20T08:26:22.617

请注意，它`List#subList()`返回基础集合的视图，这可能会在编辑较小的列表时导致意外后果 - 编辑将反映在原始集合中或可能会抛出`ConcurrentModificationException`.

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-09-26T08:14:05.953

您可以使用下面的代码来获取批次列表。

```
Iterable<List<T>> batchIds = Iterables.partition(list, batchSize); 
```

您需要导入 Google Guava 库才能使用上述代码。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-05-02T17:56:36.220

解决这个问题的另一种方法，问题：

```
public class CollectionUtils {

    /**
    * Splits the collection into lists with given batch size
    * @param collection to split in to batches
    * @param batchsize size of the batch
    * @param <T> it maintains the input type to output type
    * @return nested list
    */
    public static <T> List<List<T>> makeBatch(Collection<T> collection, int batchsize) {

        List<List<T>> totalArrayList = new ArrayList<>();
        List<T> tempItems = new ArrayList<>();

        Iterator<T> iterator = collection.iterator();

        for (int i = 0; i < collection.size(); i++) {
            tempItems.add(iterator.next());
            if ((i+1) % batchsize == 0) {
                totalArrayList.add(tempItems);
                tempItems = new ArrayList<>();
            }
        }

        if (tempItems.size() > 0) {
            totalArrayList.add(tempItems);
        }

        return totalArrayList;
    }

} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2019-07-24T07:03:20.853

Java 8 中的单行代码是：

```
import static java.util.function.Function.identity;
import static java.util.stream.Collectors.*;

private static <T> Collection<List<T>> partition(List<T> xs, int size) {
    return IntStream.range(0, xs.size())
            .boxed()
            .collect(collectingAndThen(toMap(identity(), xs::get), Map::entrySet))
            .stream()
            .collect(groupingBy(x -> x.getKey() / size, mapping(Map.Entry::getValue, toList())))
            .values();

} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2021-12-07T20:19:12.663

这是使用 vanilla java 和超级秘密模运算符的解决方案:)

鉴于块的内容/顺序无关紧要，这将是最简单的方法。（在为多线程准备东西时，通常并不重要，例如在哪个线程上处理哪些元素，只需要平均分配）。

```
public static <T> List<T>[] chunk(List<T> input, int chunkCount) {
    List<T>[] chunks = new List[chunkCount];

    for (int i = 0; i < chunkCount; i++) {
        chunks[i] = new LinkedList<T>();
    }

    for (int i = 0; i < input.size(); i++) {
        chunks[i % chunkCount].add(input.get(i));
    }

    return chunks;
} 
```

用法：

```
 List<String> list = Arrays.asList("a", "b", "c", "d", "e", "f", "g", "h", "i", "j");

    List<String>[] chunks = chunk(list, 4);

    for (List<String> chunk : chunks) {
        System.out.println(chunk);
    } 
```

输出：

```
[a, e, i]
[b, f, j]
[c, g]
[d, h] 
```

* * *

## 回答 #19

> 赞同：-2
> 
> 时间：2019-06-18T09:48:06.313

`import com.google.common.collect.Lists;`

`List<List<T>> batches = Lists.partition(List<T>,batchSize)`

使用 Lists.partition(List,batchSize)。您需要`Lists`从谷歌通用包（`com.google.common.collect.Lists`）导入

它将返回 List of `List<T>`with 和每个元素的大小等于你的`batchSize`.

# php - 如何在不使用 extract() 的情况下提取变量？

> ID：12026886
> 
> 赞同：0
> 
> 时间：2012-08-19T13:34:24.803
> 
> 标签：php

我想要一个函数将变量导出到它被调用的范围而不使用extract（），例如

```
function get_vars(){
  $return['a'] = 1;
  $return['b'] = 2
  return $return;
} 
```

然后而不是使用：

```
exctract(get_vars()); 
```

我会用

```
get_vars(); 
```

有没有可用的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T13:59:49.213

您可以尝试使用`global`关键字

```
function get_vars() {
  global $a, $b;
  $a = 1;
  $b =2;
} 
```

但对我来说，这是一种非常奇怪的方法。我更喜欢使用 OOP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T13:42:26.087

在 extract 函数的 php 手册中看到了可能的解决方案。(http://www.php.net/manual/en/function.extract.php#62727)

```
function free_args (&$V) {
    foreach ($V as $k => &$v) {
        $$k =& $v;
    }
    unset ($k);  unset ($v);  unset ($V);

    // be careful that if you need to extract $k, $v or $V variables you should find other names for them in the lines above (ie. $__k, $__v and $__V)
} 
```

# php - Twitter API 发布状态/过滤器与 Twitter OAuth 类

> ID：12026888
> 
> 赞同：0
> 
> 时间：2012-08-19T13:34:48.177
> 
> 标签：php, api, twitter, twitter-oauth

尝试使用 abraham twitteroauth 类 (https://github.com/abraham/twitteroauth) 向 statuses/filter 方法发出发布请求时，我不断收到错误代码 34（抱歉，此页面不存在）。身份验证后（工作正常）我的请求很简单：

`$filter = $twitteroauth->post('statuses/filter',array('track' => 'seo'));`

我还有其他调用在工作，但即使我在站点的单独实例上隔离它，我也只收到“抱歉，该页面不存在”错误。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-20T23:14:02.763

TwitterOAuth 目前不支持流 API。您可以尝试@JohnC 建议的方法，但我不知道它是否真的有效。

[Phiehose](https://github.com/fennb/phirehose/)是我推荐与 Streaming API 一起使用的 PHP 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T01:00:06.500

该[`statuses/filter`](https://dev.twitter.com/docs/api/1/post/statuses/filter)调用使用与许多其他 API 调用不同的 URL - 使用 stream.twitter.com 而不是 api.twitter.com。您正在使用的库似乎被硬编码为仅使用 api.twitter.com，因此这可能是您问题的根源。您可以更改该调用的 URL：

```
$twitteroauth->host = "https://stream.twitter.com/1/";
$filter = $twitteroauth->post('statuses/filter',array('track' => 'seo')); 
```

或者，如果您使用完整的 URL，它将覆盖默认值（如果您多次调用`$twitteroauth`该类，这可能是最好的方法）：

```
$filter = $twitteroauth->post('https://stream.twitter.com/1/statuses/filter.json',array('track' => 'seo')); 
```

# google-app-engine - App Engine 开发服务器编码

> ID：12026889
> 
> 赞同：4
> 
> 时间：2012-08-19T13:35:12.313
> 
> 标签：google-app-engine, encoding

是否可以在开发服务器上设置 UTF-8 编码？在外部（谷歌）服务器上一切正常，但在本地服务器上我得到“???????” 而不是数据存储查看器中的真实字符。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-09T18:52:35.617

在 GAE Python 中，要将 utf-8 字符串保存在数据存储中，您需要考虑两点。

1/ 在文件顶部添加标题：

第一个用于约定，第二个默认情况下将文件的所有内容设置为 utf-8。

```
#!/usr/bin/env python
# -*- coding: utf-8 -*- 
```

2/ 解码您的 utf-8 字符串以在数据存储中保存一个 unicode 字符串。

```
my_value="çéè!§ç!éàèàçèéàçè(à"
instance = mydatastore(mySavedUnicodeString=my_value.decode("utf-8"))
user_instance.put() 
```

# windows-phone-7 - 列表框绑定错误滚动

> ID：12026890
> 
> 赞同：1
> 
> 时间：2012-08-19T13:35:34.383
> 
> 标签：windows-phone-7, checkbox, listbox, scroll

我有一个包含约 500 个项目的列表框（JumpListBox）。

列表框模板是一个网格，它有两列 - 复选框和图像；

重现问题：我检查了两个项目，然后进行滚动，然后我可以看到该复选框与选中的项目不对应。当我滚动回我被选中的项目时，我看到项目没有被选中，但其他项目被选中。

我录制了一个 **[视频](http://www.youtube.com/watch?v=DakRc-7JvjA)**，您可以看到一个问题。

# javascript - jQuery slideUp() 麻烦

> ID：12026895
> 
> 赞同：1
> 
> 时间：2012-08-19T13:36:06.553
> 
> 标签：javascript, jquery, html, overlay

我在开发 jQuery '对象' 时遇到问题。我希望 div1（请参阅下图）成为背景 div，其中包含图像（使用背景图像）。然后我希望 div 2（请参阅下图）覆盖 div 1，我可以这样做。然而，由于我对 jQuery 没有什么经验，所以我正在努力解决下一部分。我想，当您将鼠标悬停在 div 2 上时，我使用 jQuery slideDown() / slideUp() 来显示和隐藏 div 3（请参阅下图）。它也不需要在向上滑动时关闭（因为光标将不再位于 div 2 上）。只有当您不再将鼠标悬停在整个对象上时，它才会关闭。我希望这是有道理的......我只是不知道从哪里开始。如果需要更多信息，请询问。

![问题说明](../Images/e4ee64dccd35300916d5fed330bffd11.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T13:45:16.287

我相信这样的事情应该做到这一点，或者至少它为您提供了一个可以尝试并进一步改进的起点。

**标记**

```
<div class="wrapper">
    <div class="one"></div>
    <div class="two"></div>
    <div class="three"></div>
</div> 
```

**CSS**

```
.wrapper {
    float: left;
}
.one {
    background-color: grey;
    width: 100px;
    height: 100px;
}
.two {
    background-color: blue;
    width: 100px;
    height: 20px;
}
.three {
    background-color: green;
    width: 100px;
    height: 100px;
    display: none;
}​ 
```

**JavaScript**

```
$(function () {
    $(".two").mouseenter(function (){
         $(".one, .three").slideToggle();
    });
    $(".wrapper").mouseleave(function (){
         $(".one, .three").slideToggle();
    });
});​ 
```

**一个活生生的例子：http:** [//jsfiddle.net/ZHxe5/1/](http://jsfiddle.net/ZHxe5/1/)

# visual-studio - MMX 错误 A2022：指令操作数必须相同大小

> ID：12026897
> 
> 赞同：1
> 
> 时间：2012-08-19T13:36:19.563
> 
> 标签：visual-studio, masm, mmx

我正在尝试手动调整一段代码（最初用 C++ 编写的函数）并且汇编程序抛出此错误：错误 A2022：指令操作数必须相同大小

在使用“movq”指令的行。

编码：

```
.686P       
.mmx          
.xmm           
.MODEL flat, stdcall
.STACK 4096

.data
packedbytes db 10, 20, -30, 40, 50, 60, -70, 80
packedwords dw 10, 20, 30, 40
packeddwords dd 10, 20

.code
main PROC 

    movq mm0, packedbytes   ; <== error thrown here
    movq mm1, packedwords   ; <== here
    movq mm2, packeddwords  ; <== and here

    mov a0, 04d
    mov al, 0d  
    int 21h     
main ENDP
END main 
```

我在 32 位盒子上使用 masm。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T14:30:01.400

我已经想通了。您不能直接使用寄存器；您只能通过指针放置数据（至少使用 masm）。

```
 mov edx, offset packedbytes
    movq mm0, [edx] 
    mov edx, offset packedwords
    movq mm1, [edx]
    mov edx, offset packeddwords   
    movq mm2, [edx] 
```

这应该可以解决问题。

# css - 如何使用图像和按钮标签实现 JSF 按钮

> ID：12026900
> 
> 赞同：2
> 
> 时间：2012-08-19T13:36:58.740
> 
> 标签：css, jsf, jsf-2

我想用图像和自定义标签实现 JSF 按钮。我测试了这段代码：

```
<h:commandButton id="savesettings" styleClass="avesettings" value=" Save Settings " action="#{GeneralController.updateDBSettings}" rendered="true" update="growl">
    <f:ajax render="@form" execute="@form"></f:ajax>
</h:commandButton>

.avesettings {
    background-image: url('../images/small.png');
} 
```

这是结果：

![在此处输入图像描述](../Images/baec7a752403adf17a4e6770d5770d25.png)

我还测试了第二个代码：

```
<h:commandButton id="savesettings" image="resources/images/first.png" value=" Save Settings " action="#{GeneralController.updateDBSettings}" rendered="true" update="growl">
    <f:ajax render="@form" execute="@form"></f:ajax>
</h:commandButton> 
```

我得到这个没有标签的结果：

![在此处输入图像描述](../Images/920f88255bb036f1ec4d1c53e679741f.png)

你能帮我创建背景图像和自定义标签定义为按钮属性的 JSF 按钮吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T20:19:52.357

您使用的第一种方法，`styleClass="avesettings"`即使用 CSS 样式是唯一可行的方法，因为如果您指定图像属性，输入元素将变为图像。

另见[文档](http://docs.oracle.com/cd/E17802_01/j2ee/javaee/javaserverfaces/2.0/docs/pdldocs/facelets/h/commandButton.html)

因此，您最好的选择是对按钮使用高级样式技术，请参阅以下文章：

*   [http://coding.smashingmagazine.com/2009/11/18/designing-css-buttons-techniques-and-resources/](http://coding.smashingmagazine.com/2009/11/18/designing-css-buttons-techniques-and-resources/)
*   [http://www.tyssendesign.com.au/articles/css/styling-form-b​​uttons/](http://www.tyssendesign.com.au/articles/css/styling-form-buttons/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T15:15:44.837

您是否尝试过他的 commandButton 标签的[“图像”属性？](http://livedemo.exadel.com/richfaces-demo/richfaces/commandButton.jsf?tab=info&cid=1060125)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-24T08:25:45.283

实现这一点的一种方法是将图像作为 jsf 资源加载到样式表中：

```
 <style type="text/css">
        .imageButton
        {
            background-image:url(#{resource['images/button.png']});
        }
    </style> 
```

然后在xhtml中设置相关的commandButton styleClass：

```
 <h:commandButton value="Submit" styleClass="imageButton" action="#{...}"/> 
```

将文件 button.png 放在资源文件夹下，即 resources/images/button.png 并确保资源文件夹位于 WEB-INF 文件夹旁边

或者，如果您希望图像在 commandButton 中的文本旁边显示为图标，那么您可以稍微玩一下 css：

```
 .imageButton
        {
            padding: ...
            border: ...
            color: ...
            background: [<'background-color'> || <'background-image'> || <'background-repeat'> || <'background-attachment'> || <'background-position'>] 
        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-24T09:20:31.837

以下 JSF/CSS 应该可以解决您的问题：

JSF（与您的第一个示例相同）：

```
<h:commandButton id="savesettings" styleClass="avesettings" value="Save Settings" action="#{GeneralController.updateDBSettings}" rendered="true" update="growl">
    <f:ajax render="@form" execute="@form"></f:ajax>
</h:commandButton> 
```

CSS（改编）：

```
.avesettings {
    background: url('../images/small.png') no-repeat;
    cursor: pointer;
    width: 126px;
    height: 41px;
    border: none;
} 
```

css 的宽度和高度必须是图像的宽度和高度。我还有一个外部 css 文件中的 css，而不是直接在 JSF 模板中。

# jquery - jquery 移动触发器（'创建'）

> ID：12026902
> 
> 赞同：1
> 
> 时间：2012-08-19T13:37:41.450
> 
> 标签：jquery, jquery-mobile

我有一种情况，我从 AJAX 调用生成列表然后切换到页面。当我这样做时，我收到以下错误：

```
 TypeError: d[0] is undefined
[Break On This Error]   

...-corner-all");this._addThumbClasses(h);this._addThumbClasses(e.find(".ui-link-in... 
```

这是执行 ajax 调用并加载 DIV 的代码：

```
function handleGetReports(data) {
        $('#recentReportsText').html(data).trigger('create');
        $.mobile.changePage("#recentReportsPage", { changeHash:true});
}
function recentReports() {             
        $.post("getrecentreports.php",'',handleGetReports);
} 
```

这是 ajax 调用返回的数据：

```
<ul data-role="listview" data-split-icon="delete"><li data-role="list-divider">08/17 01:46pm<p class="ui-li-aside">Pending</p></li>
<li><a href="#">basic Company<br/>basic Username</a><a href="javascript:deleteReport('4');">Delete</a></li><li data-role="list-divider">08/16 06:50pm<p class="ui-li-aside">Complete</p></li>
<li><a href="javascript:popUp('reports/2012-08-16-3.pdf');">basic Info</a><a href="javascript:deleteReport('3');">Delete</a></li><li data-role="list-divider">08/16 06:44pm<p class="ui-li-aside">Complete</p></li>
<li><a href="javascript:popUp('reports/2012-08-16-2.pdf');">basic Number</a><a href="javascript:deleteReport('2');">Delete</a></li><li data-role="list-divider">07/16 06:38pm<p class="ui-li-aside">Pending</p></li>
<li><a href="#">basic Address</a><a href="javascript:deleteReport('1');">Delete</a></li></ul> 
```

这是显示的页面：

```
<div data-role="page" id="recentReportsPage" data-title="Recent Reports" data-needs-auth="true">
<div data-role="header" data-theme="e">
<a href="#home" data-icon="home" data-iconpos="notext"></a>
<h1>Recent Reports</h1>
</div>
<div data-role="content">        
<div id="recentReportsText"></div>
</div><!-- /content --> 
</div><!-- /recent reports --> 
```

如果我停止 .trigger('create') 调用，则不会生成错误，但显示的数据未增强（即：没有列表视图）。如果我剪切并粘贴 ajax 返回的 HTML 并将其直接放在要显示的内容部分的页面中，它将按照我的意图以拆分列表格式正确显示。这是一个 jquery 移动错误还是我做错了什么？

编辑：我正在使用 jquery 的最小化版本。我已将其更改为最小化，这是错误：

```
TypeError: parentPage[0] is undefined (line 5189 of jquery-mobile.1.1.1.js)
[Break On This Error]   

parentId = parentUrl || parentPage[ 0 ][ $.expando ], 
```

编辑：顺便说一句。这只是列表视图的错误。我最初将结果作为表格返回，在所有浏览器中都没有发生任何事故。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T09:00:00.673

我修改了您发布的源代码并创建了一个工作示例。

index.html 包含两个页面，第一页和报告页面。test.html 是包含报告数据的文件。

**索引.html**

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
        <script type="text/javascript" src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
        <script type="text/javascript" src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>
    </head>
    <body>
        <script>

            function handleGetReports(d) {
                $('#recentReportsText').html(d).trigger('create');
            }

            $(function() { 
                $('#recentReportsPage').live("pagecreate", function() {
                    $.get('test.html', function(data) {
                        handleGetReports(data);
                    });
                });
            });
        </script>

        <div data-role="page" id="firstpage" class="type-home">
            <div data-role="content">
                <a href="#recentReportsPage">Click</a>
            </div>
        </div>

        <div data-role="page" id="recentReportsPage" data-title="Recent Reports" data-needs-auth="true">
            <div data-role="header" data-theme="e">
                <a href="#firstpage" data-icon="home" data-iconpos="notext"></a>
                <h1>Recent Reports</h1>
            </div>
            <div data-role="content">        
                <div id="recentReportsText"></div>
            </div> 
        </div>
    </body>
</html> 
```

**测试.html**

```
<ul data-role="listview" data-split-icon="delete"><li data-role="list-divider">08/17 01:46pm<p class="ui-li-aside">Pending</p></li>
<li><a href="#">basic Company<br/>basic Username</a><a href="javascript:deleteReport('4');">Delete</a></li><li data-role="list-divider">08/16 06:50pm<p class="ui-li-aside">Complete</p></li>
<li><a href="javascript:popUp('reports/2012-08-16-3.pdf');">basic Info</a><a href="javascript:deleteReport('3');">Delete</a></li><li data-role="list-divider">08/16 06:44pm<p class="ui-li-aside">Complete</p></li>
<li><a href="javascript:popUp('reports/2012-08-16-2.pdf');">basic Number</a><a href="javascript:deleteReport('2');">Delete</a></li><li data-role="list-divider">07/16 06:38pm<p class="ui-li-aside">Pending</p></li>
<li><a href="#">basic Address</a><a href="javascript:deleteReport('1');">Delete</a></li></ul> 
```

![在此处输入图像描述](../Images/baac99ad40b25f2d2fbc758191d43699.png)

![在此处输入图像描述](../Images/ca557eb30cdb1f8abb00158fe41b4ab4.png)

我希望这有帮助。

BR，
托利斯

# php - 具有多个实体的 DataMapper

> ID：12026903
> 
> 赞同：0
> 
> 时间：2012-08-19T13:37:52.803
> 
> 标签：php, datamapper, entities

寻求一些最佳实践建议。基本上我有一个由各种属性组成的大型实体，其中一些属性是其他实体。

在我的数据映射器中“实例化”大实体的最佳实践是什么？我是否为“主”映射器中的其他实体调用其他映射器？例如，我有一个实体“大”，它由各种属性组成，其中“客户”属性是客户实体，这是最好的方法吗？

```
class BigMapper{

  //Find and return a BigEntity
  function find($id){
    $customerMapper = new CustomerMapper($this->db);
    $customer = $customerMapper->findByBigEntityId($id);
    $bigRow = $this->db->fetchRow('SELECT * FROM big WHERE id = ?', $id);
    $bigRow['customer'] = $customer; //This line feels sort of ugly.... and then:
    return( new EntityBig($bigRow) );
  }

} 
```

我已经看到人们在服务层中实例化其他映射器的解决方案，然后自行验证每个实体，最后将它们全部组合起来等等，但我真的不确定“构建”大型实体的最佳方式是什么基于其他几个实体。

任何意见或帮助表示赞赏，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T13:48:30.740

如果您同时拥有数据层中的所有属性，最好将它们全部映射。它将使大实体本身变得完整。

但是如果你需要做延迟加载。您不需要一次所有数据（即客户实体），您可以先映射客户实体的 ID。如果以后需要，您可以调用数据库以根据其 ID 获取客户实体，然后将客户实体映射到大实体中。

# c++ - 如何将分隔的 txt 文件传递 给采用常量 char * 的函数？

> ID：12026910
> 
> 赞同：-1
> 
> 时间：2012-08-19T13:38:20.677
> 
> 标签：c++, c

我有一个将常量 char * 作为输入的 API 函数。我必须创建一个分隔的文本文件，它是函数的输入，例如：

```
193.875 0.0     0.0     2
193.876 0.0     0.0     2
193.877 0.0     0.0     2
193.878 0.0     0.0     2
193.879 0.0     0.0     2
193.880 0.0     0.0     2
193.881 0.0     0.0     2 
```

该软件的支持人员告诉我，我可以使用*sprintf()*创建和保存此文件的每一行，所以我使用它：

```
sprintf(wsp,"%.3f\t0.0\t0.0\t%d\n", start_freq, z); 
```

并将这一行放入循环后，我将每个创建的 wsp 保存在一个字符串数组中：

```
for (int j = 0; j < start; j++){

sprintf(wsp,"%.3f\t0.0\t0.0\t%d\n", start_freq, z);
start_freq = start_freq + 0.001;
wspfile[j] = wsp;

} 
```

现在我有一个具有所需格式的文件，但包含在字符串数组中。我的问题是创建数组后如何将此数组作为**常量 char ***传递，或者如何将其转换为**常量 char ***

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T13:50:15.927

您可以使 wspFile 成为 std::string 而不是数组。然后代替

```
wspFile[j]=wsp; 
```

你将会拥有

```
wspFile+=wsp; 
```

然后得到你会调用的 const char* 版本

```
wspFile.c_str(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T13:59:54.163

您似乎预先知道数据的大小，因此您可以这样做：

```
std::vector<char> wspfile(start * wsp_max_length);
// C-ish way:
/* char* wspfile = (char*) malloc(start * wsp_max_length) */

for (int j = 0; j < start; j++) {
    sprintf(wsp + (wsp_max_length * j), "%.3f\t0.0\t0.0\t%d\n", start_freq, z);
    start_freq = start_freq + 0.001;
}

your_API_func(&wspfile[0]); 
```

在更多类似 C++ 的时尚中：

```
#include <vector>
#include <sstream>
#include <string>
#include <iomanip>  // for setprecision()

std::vector<char> wspfile;
double start_freq = 193.875;

for (int j = 0; j < start; ++j, start_freq += 0.0001) {

    std::ostringstream oss;
    oss << std::setprecision(3)
        << start_freq
        << "\t0.0\t0.0\t"
        << z << "\n\0";  // your version with sprintf adds '\0', too,
                         // although I'm pretty sure you don't want it

    std::string wsp = oss.str();
    wspfile.insert(wspfile.end(), wsp.begin(), wsp.end());
}

your_API_func(&wspfile[0]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T14:08:07.540

我希望我没有误解你的问题。我开始假设我有一个 N 数组`char*`，即`wspfile[]`，对吗？现在，我想将此数组转换为单个字符串：

```
char *join(char **strings, int N)
{
    //Step 1: find out the total amount of memory we need
    int i, total = 0;
    for (i = 0; i < N; i++) {
        total += strlen(strings[i]);
    }

    //Step 2\. Allocate resulting string.
    char *str = malloc(total + 1); //Alloc 1 more byte for end \0

    //Step 3\. Join strings.
    char *dst = str;
    for (i = 0; i < N; i++) {
        char *src = strings[i];
        while(*src) *dst++ = *src++;
    }
    *dst = 0; //end \0
    return str; //don't forget to free(str) !
} 
```

然后，在您的代码中：

```
char *s = join(wspfile, N);
/* do whatever with `s`*/
free(s); 
```

# groovy - 获取当月的最后一天

> ID：12026920
> 
> 赞同：3
> 
> 时间：2012-08-19T13:40:11.517
> 
> 标签：groovy

在 Groovy 中，如何找到当月的最后一天？

感谢您的睿智建议和更好的智慧。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-19T13:54:48.757

是的，正如您评论的那样，Calendar.FIELD 可能是您最好的朋友（尽管 groovy 的 TimeCategory 也有巧妙的技巧）。

以下是我为当月最后一天制作的内容：

```
Calendar.with {
    println instance.getActualMaximum( DATE )
} 
```

我不明白您所说的“如果我要循环一个月，则突破当前工作日”是什么意思。也许得到每个月的工作日？

```
Calendar.with {
    (JANUARY..DECEMBER).each { month ->
        def cal = instance
        cal[MONTH] = month
        println cal[DAY_OF_WEEK]
    }
} 
```

# c++ - 在c ++中的两个向量之间交换不同长度的序列

> ID：12026924
> 
> 赞同：3
> 
> 时间：2012-08-19T13:40:45.837
> 
> 标签：c++, stl, vector, range, swap

假设您有两个整数向量：

![在此处输入图像描述](../Images/5c484ef4e20d2ce86da4626b8afac45e.png)

![在此处输入图像描述](../Images/75b102d7bbfd7efe3f9cab1f9f009572.png)

我想定义一个函数，允许我在两个向量之间交换一系列元素，将两个序列的起始索引和长度作为参数传递。

例如：![在此处输入图像描述](../Images/1642130b4d0acd388767d3f96d51f211.png)其中![在此处输入图像描述](../Images/1beea330e96853517215a1f5633d6e23.png)和![在此处输入图像描述](../Images/6f7f61d27133edd55851469dc8547457.png)是向量，作为参数传递的数字表示序列的起始索引和长度。

在这种情况下，我应该得到 autput

v1 = 1,2, **13,14,15** ,5,6,7,8,9

v2 = 10,11,12, **3,4** ,16,17,18

我作为示例定义的函数的签名不是约束，如果您认为有更好的方法是可以的

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-19T13:49:55.550

似乎所有常规的 STL 算法都达不到您想要做的事情：

`std::swap_ranges`几乎就在那里，但它要求你交换同样长的范围 `std::rotate`也不错，但它要求一个范围的终点等于第二个范围的起点。

```
// pseudo-splice on vector
v1.insert(v1.begin() + 2 + 2, v2.begin() + 3, v2.begin() + 3 + 3);
v2.erase(v2.begin() + 3, v2.begin() + 3 + 3);

// pseudo-splice on vector
v2.insert(v2.begin() + 3, v1.begin() + 2, v1.begin() + 2 + 2);
v1.erase(v1.begin() + 2, v1.begin() + 2 + 2); 
```

您当然可以轻松地将其抽象为一个函数模板，该模板为您的两个范围采用任意迭代器边界。

**根据大卫的评论进行**编辑，您可以进行一些优化以避免不必要的调整大小****

 **```
// compute smallest range here, in this case it's the v1 part
std::swap_ranges(v1.begin() + 2, v1.begin() + 2 + 2, v2.begin() + 3);

// now handle the remaining part of the longest range, in this case it's element v2 + 3 + 2
std::insert(v1.begin() + 2 + 2, v2.begin() + 3 + 2);
std::erase(v2.begin() + 3 + 2); 
```

**更新**`std::list`：如果你从那以后使用它会更容易`splice`（我重新排列`insert`/`erase`那里的部分以模仿下面的代码）

```
v1.splice(v1.begin() + 2 + 2, v2, v2.begin() + 3, v2.begin() + 3 + 3);
v2.splice(v2.begin() + 3, v1, v1.begin() + 2, v1.begin() + 2 + 2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T13:52:26.610

我认为这不应该带来任何困难，除了如果 Length1 ！= Length2 则必须重新分配向量这一事实。

```
 swap_elements(v1, start1, length1, v2, start2, length2){
      if(length1 != length2){
        //alloc mem for both of the arrays
        //copy the unmodified portions of the original arrays into the new arrays
      }

      //swap the elements
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-19T13:53:49.183

使用插入和擦除执行它的运行时间比下面的代码更差，因为每次插入和擦除都被称为向量的其他元素必须相应地在内存中移动，并分配新的内存块，将向量元素移动到新的内存如有必要，阻止。为了避免调整大小和内存问题，最好在一开始就创建两个新向量。

```
swap_elements(vector<int> &v1, int s1, int l1, vector<int> &v2, int s2, int l2){
    vector<int> nv1(v1.begin(),v1.begin()+s1);
    vector<int> nv2(v2.begin(),v2.begin()+s2);
    for(int i=0;i<l2;i++)
      nv1.push_back(v2[s2+i]);
    for(int i=0;i<l1;i++)
      nv2.push_back(v1[s1+i]);
    for(int i=s1+l1+1;i<v1.size();i++)
      nv1.push_back(v1[i]);
    for(int i=s2+l2+1;i<v2.size();i++)
      nv2.push_back(v2[i]);
    v1.clear();
    v2.clear();
    v1=nv1;
    v2=nv2;
} 
```**

# rest - 如何在不修改数据库状态的情况下在我的 WS 上使用放心进行集成测试？

> ID：12026927
> 
> 赞同：0
> 
> 时间：2012-08-19T13:41:09.783
> 
> 标签：rest, spring-mvc, integration-testing, rest-assured

我目前正在使用 Spring MVC 开发 REST Web 服务。

我正在努力寻找在我的 WS 上进行集成测试的最佳方法。

第一种解决方案：使用放心

*   优点：流利的api，非常容易使用它的酷DSL
*   缺点：当我在我的 WS 上执行 POST 或 PUT 请求时，我的数据库状态被修改，并且下一个测试被破坏。

第二种解决方案：对控制器进行单元测试并在服务级别单独执行集成测试

*   优点：我可以控制我的数据库的状态，使用 Spring Test Framework 并在每次测试后执行回滚
*   缺点：我不再执行端到端集成测试。

问题：如何在不修改数据库状态的情况下使用 rest-assured 进行集成测试？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T15:39:46.553

为什么不在每次测试之前删除放心的双打和重定向并为测试重新设置它们？

```
 RestClient.delete "#{RestAssured::Server.address}/redirects/all"
    RestClient.delete "#{RestAssured::Server.address}/doubles/all" 
```

或者，您可以对 GET 和 POST/PUT 调用使用不同的双精度来确保放心，并在这些调用之间使用重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-01T16:45:58.543

为了在 REST Spring MVC Web 服务上执行集成测试，SpringSource 团队提供了一个名为 spring-test-mvc 的新库，现在它已集成到 spring-test 中。

[http://blog.springsource.org/2012/11/12/spring-framework-3-2-rc1-spring-mvc-test-framework/](http://blog.springsource.org/2012/11/12/spring-framework-3-2-rc1-spring-mvc-test-framework/)

对于我的特殊目的，它比 Rest-Assured 更适合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T21:00:27.093

我不确定，正如您所说，您的要求是否有意义。

RestAssured 只是一个支持您进行测试的框架。您还可以编写单元测试，相当于 PUT 和 DELETE（基本上是内部实现），然后修改数据库状态。

或者您只能使用 RestAssured 发出 HEAD 和 GET 请求，而不能由此修改数据库状态。

如果您遗漏任何更新，这两个选项都只会测试部分代码路径，因此您的问题与选择 RestAssured 或手写单元测试是正交的。

当然，你可以模拟你的后端，但要么模拟是微不足道的，而且你没有获得任何洞察力。或者它们很复杂，您将需要单独的测试以确保模拟对象与您认为它们正在做的事情一致。

# mysql - 返回的codeigniter排序查询结果

> ID：12026929
> 
> 赞同：0
> 
> 时间：2012-08-19T13:41:33.097
> 
> 标签：mysql, codeigniter, sorting

我正在寻找对控制器中的查询结果进行排序，“在”它从模型返回之后，这是我正在尝试的：

```
$query = $this->user->get_all_users();
foreach($query as $user){
    // dynamically according to my projects' logic 
    // assigns a grade to  each user
    $user->grade = assign_a_grade_to_user() 
} 
```

我想做的是，`$query`应该根据学生的成绩对结果进行排序，然后将排序后的 $query 传递给我的视图进行打印

有什么建议或想法吗？

**注意：**如果我们使用其他临时变量或数据结构也没有问题，例如我们也可以将排序结果存储在其他变量中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T13:45:30.203

这应该这样做：

```
 function cmp( $a, $b )
    { 
      if(  $a->grade==  $b->grade){ return 0 ; } 
      return ($a->grade< $b->grade) ? -1 : 1;
    } 

    $sortedArray=usort($query ,'cmp'); 
```

所以你的代码应该是这样的：

```
$query = $this->user->get_all_users();
foreach($query as $user){
    // assigns a grade to  each user
    $user->grade = assign_a_grade_to_user() 
}

 $sortedArray=usort($query ,'cmp');
$data['users']=$query;
$this->load->view('home',$data); 
```

# mysql - 在 Win7 上使用 XAMPP 的 Apache、MySQL 和 FTP“检测到错误的路径”

> ID：12026931
> 
> 赞同：6
> 
> 时间：2012-08-19T13:41:46.090
> 
> 标签：mysql, apache, ftp, xampp

尝试在 Win7 上访问 XAMPP 时遇到以下问题。它们被配置为在加载操作系统时自动启动。以下消息是我看到的

> 6:25:17 AM [apache] Apache 服务检测到错误
> 的路径 6:25:17 AM [apache] 首先手动卸载服务
> 6:25:17 AM [mysql] MySQL 服务检测到错误的路径
> 6:25:17 AM [mysql] 首先手动卸载服务
> 6:25:17 AM [filezilla] FileZilla Service Detected With wrong Path
> 6:25:17 AM [filezilla] 首先手动卸载服务

Apache错误日志如下：

> [Sun Aug 19 06:24:16.719046 2012] [ssl:warn] [pid 1516:tid 384] AH01873：初始化：未配置会话缓存 [提示：SSLSessionCache]
> [Sun Aug 19 06:24:20.493262 2012] [mpm_winnt :notice] [pid 1516:tid 384] AH00455: Apache/2.4.2 (Win32) OpenSSL/1.0.1c PHP/5.4.4 已配置——恢复正常操作
> [Sun Aug 19 06:24:20.494262 2012] [mpm_winnt:通知] [pid 1516:tid 384] AH00456：服务器构建：2012 年 5 月 13 日 14:10:15
> [Sun Aug 19 06:24:20.494262 2012] [core:notice] [pid 1516:tid 384] AH00094：命令行： 'c:\xampp\apache\bin\httpd.exe -d C:/xampp/apache'
> [Sun Aug 19 06:24:20.496262 2012] [mpm_winnt:notice] [pid 1516:tid 384] AH00418: Parent: Created子进程 324
> [Sun Aug 19 06:24:22.116354 2012] [ssl:warn] [pid 324:tid 288] AH01873：初始化：未配置会话缓存 [提示：SSLSessionCache]
> [Sun Aug 19 06:24:22.174358 2012] [mpm_winnt :notice] [pid 324:tid 288] AH00354: Child: 启动 150 个工作线程。

和 MySQL 错误日志

> 120819 6:24:18 [注意] 插件 'FEDERATED' 已禁用。
> 120819 6:24:19 InnoDB：InnoDB 内存堆已禁用
> 120819 6:24:19 InnoDB：互斥锁和 rw_locks 使用 Windows 互锁函数
> 120819 6:24:19 InnoDB：压缩表使用 zlib 1.2.3
> 120819 6:24:19 InnoDB：初始化缓冲池，大小 = 16.0M
> 120819 6:24:19 InnoDB：缓冲池初始化完成
> 120819 6:24:19 InnoDB：支持的最高文件格式是梭子鱼。
> 120819 6:24:21 InnoDB：等待后台线程启动
> 120819 6:24:22 InnoDB：1.1.8 已启动；日志序列号 4011253
> 120819 6:24:22 [注意] 服务器主机名（绑定地址）：'0.0.0.0'; 端口：3306
> 120819 6:24:22 [注] - “0.0.0.0”解析为“0.0.0.0”；
> 120819 6:24:22 [注意] 在 IP 上创建的服务器套接字：'0.0.0.0'。
> 120819 6:24:27 [Note] 事件调度程序：加载 0 个事件
> 120819 6:24:27 [Note] c:\xampp\mysql\bin\mysqld.exe：准备连接。
> 版本：'5.5.25a' 套接字：'' 端口：3306 MySQL 社区服务器（GPL）

顺便说一句，编辑在这里有点困难，必须在每一行都做 <br />

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-17T08:44:46.633

该错误消息表明您安装了 MySQL Windows 服务，该服务不属于您正在使用的当前 XAMPP（它通过名称检测服务，然后验证服务路径）。您表示您卸载了以前的外部 MySQL 安装。如果这是您在系统上知道的唯一其他安装，则在卸载时它可能没有自动从 Windows 服务中删除该服务。

如果是这种情况，您可以执行以下操作：

1.  打开命令提示符（开始 > 运行 > cmd）以管理员身份运行
2.  键入以下内容：

    ```
    Code: Select all
    sc delete mysql 
    ```

    并点击返回。（注意：这需要管理员权限。）

如果第二步成功完成，您应该能够重新打开控制面板并查看它的内容。如果一切顺利，您可以通过单击控制面板中的红色“X”来为 XAMPP MySQL 安装 MySQL 窗口服务，如果一切顺利，该面板应该位于 MySQL 旁边。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-23T07:27:34.443

只需取消选中并选中模块服务列中的按钮。它将自动删除旧服务并使用新路径启动新服务。当您直接删除 xampp 文件夹而不停止服务时会发生这种情况。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-07-26T19:43:30.837

这个答案旨在补充来自 Sarang 的答案。我只是想澄清一下，因为这对我来说并不明显，可以同时运行一个现有的 MySQL 安装和一个绑定到 XAMPP 的安装。以下是与 Sarang 的回答相同的方法，但希望提供更多有用指导的详细信息：

1.  以管理员身份运行 XAMPP 控制面板
2.  点击 MySQL/Config 并在两个地方将端口更改为 3307
3.  停止现有安装的 MySQL 服务
4.  以管理员身份运行 cmd.exe。键入“C:\Program Files\MySQL\MySQL Server 5.5\bin\mysqladmin”-u root -p 关闭。这将停止对现有 MySQL 安装的服务
5.  返回 XAMPP 控制面板，单击 MySQL 旁边的绿色复选标记：这将删除现有 MySQL 安装的服务
6.  单击 XAMPP 控制面板/配置并进行如下配置

![在此处输入图像描述](../Images/27980cae74143d64f34204520dbd6511.png)

6.  单击服务和端口设置并将 MySQL 的端口更改为 3307（我不确定这是否真的有必要）
7.  退出 XAMPP 以管理员身份再次运行。这将启动 Apache 和 MySql 服务
8.  以管理员身份运行 cmd.exe。输入“C:\Program Files\MySQL\MySQL Server 5.1\bin\mysqld”——安装。这将为现有的 MySQL 安装重新安装服务
9.  打开窗口服务。为现有的 MySQL 安装启动服务

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-27T13:32:45.740

我能够通过以管理员身份运行~~来~~解决这个问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-06-10T07:54:28.730

这是因为您已经在 xampp apache 之外单独安装了 apache .....不用担心.....尝试以下步骤将解决您的问题

打开 cmd > 以管理员身份运行 键入以下命令

```
httpd -k shutdown
httpd -k stop
httpd -k uninstall 
```

或打开powershell>以管理员身份运行输入以下命令

```
.\httpd -k shutdown
.\httpd -k stop
.\httpd -k uninstall 
```

或者

```
win + R
type services.msc
then find Apache24 or httpd
now open cmd > run as administrator
type sc delete "<your services name from the list for apache>" 
```

感谢来源和贡献者:)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-19T19:18:34.467

试试看这篇文章，它非常相似，它帮助我解决了我的问题（删除以前安装的 apache 和 mysql）

[Windows 上的 XAMPP - Apache 未启动](https://stackoverflow.com/questions/11794829/xampp-on-windows-apache-not-starting)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-02-02T19:36:31.227

转到**命令提示符**并以**管理员身份打开它**

*只需键入*

```
sc delete MySQL 
```

*接着*

```
sc delete Apache2.4 
```

关闭 XAMPP 并再次打开它。

# file - 1次鼠标点击的批处理文件

> ID：12026932
> 
> 赞同：0
> 
> 时间：2012-08-19T13:42:00.730
> 
> 标签：file, batch-file, timer, click

您好只是想知道他们是否有可能让批处理文件有指定时间的用户输入？例如，我想输入 26 分钟的时间，之后批处理文件将像倒数计时器一样，当它达到 0 时，它会用鼠标单击桌面上的图标吗？或者鼠标指针指向哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T23:14:56.040

试试[Autohotkey](http://www.autohotkey.com/)或 AutoIT，用这个很容易做这些事情......或者你可以得到一个自动点击器......

例子

```
#Persistent
Pause
SetTimer, MouseClicklabel , 1560000 ; 1000 = 1 second, meaning 1560000 = 26 Minutes
Pause::Pause
MouseClicklabel:
Click
Return 
```

切换键是暂停

# ios - 秒到 - 分钟 - 小时 - 毫秒

> ID：12026939
> 
> 赞同：0
> 
> 时间：2012-08-19T13:44:17.847
> 
> 标签：ios, nstimer

我正在使用 NSTimer，代码如下：

```
- (IBAction)start:(id)sender {

    MainInt = 0;

    timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(countup) userInfo:nil repeats:YES];

} 
```

我怎样才能显示毫秒和分钟呢？

没有找到任何简单但有效的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T13:50:51.340

对于毫秒使用：

```
timer = [NSTimer scheduledTimerWithTimeInterval:0.001 target:self selector:@selector(countup)userInfo:nil repeats:YES]; 
```

分钟使用：

```
timer = [NSTimer scheduledTimerWithTimeInterval:60.0 target:self selector:@selector(countup)userInfo:nil repeats:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T13:48:32.387

设置更短的间隔，例如 0.1f timer = [NSTimer scheduledTimerWithTimeInterval:0.1f`target:self selector:@selector(countup)userInfo:nil repeats:YES];` 并用于`NSDateFormatter`显示计数器。`NSDateFormatter`可以在这里找到一个示例： timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self selector:@selector(countup)userInfo:nil repeats:YES];

这里很好地解释了 NSDateFormatter 的工作原理：[如何使用 NSDateFormatter 处理不同的日期时间格式](https://stackoverflow.com/questions/2035201/iphone-nsdateformatter)

您的计时器应该更新一个浮点变量，它存储毫秒。

样本：

```
 NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
    [formatter setDateFormat:@"mm:ss:SSS"];
    NSTimeInterval interval = [startDate timeIntervalSinceNow]*-1;
    NSString *clock = [formatter stringFromDate:[NSDate dateWithTimeInterval:interval sinceDate:startDate]]; 
```

但是你应该去Roy Sharon 回答。

# matlab - 如何从 n 维数组中修剪前导和尾随 NaN 值？

> ID：12026940
> 
> 赞同：3
> 
> 时间：2012-08-19T13:44:21.893
> 
> 标签：matlab, multidimensional-array, trim, nan

这在两个维度上很容易，例如：

```
>> A = NaN(5,4)
>> A(2:4,2:3) = [1 2; 3 4; 5 6]
>> A(2,2) = NaN                
>> A(4,3) = NaN 

A =

   NaN   NaN   NaN   NaN
   NaN   NaN     2   NaN
   NaN     3     4   NaN
   NaN     5   NaN   NaN
   NaN   NaN   NaN   NaN

>> A(~all(isnan(A),2),~all(isnan(A),1))

ans =

   NaN     2
     3     4
     5   NaN 
```

请注意，保留不全是 NaN 的行和列中的 NaN 值。

如何将其扩展到多个维度？例如，如果 A 具有三个维度：

```
>> A = NaN(5,4,3)           
>> A(2:4,2:3,2) = [1 2; 3 4; 5 6]
>> A(2,2,2) = NaN                
>> A(4,3,2) = NaN                

A(:,:,1) =

   NaN   NaN   NaN   NaN
   NaN   NaN   NaN   NaN
   NaN   NaN   NaN   NaN
   NaN   NaN   NaN   NaN
   NaN   NaN   NaN   NaN

A(:,:,2) =

   NaN   NaN   NaN   NaN
   NaN   NaN     2   NaN
   NaN     3     4   NaN
   NaN     5   NaN   NaN
   NaN   NaN   NaN   NaN

A(:,:,3) =

   NaN   NaN   NaN   NaN
   NaN   NaN   NaN   NaN
   NaN   NaN   NaN   NaN
   NaN   NaN   NaN   NaN
   NaN   NaN   NaN   NaN 
```

那我怎么得到

```
ans =

   NaN     2
     3     4
     5   NaN 
```

我想在四个维度上执行此操作，并且矩阵比此处的示例矩阵 A 大得多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T13:59:24.393

试试这个：

**2 维**

```
A(~all(isnan(A),2),~all(isnan(A),1)) 
```

**3 个维度**

```
A(~all(all(isnan(A),2),3),...
  ~all(all(isnan(A),1),3),...
  ~all(all(isnan(A),1),2)) 
```

**4 个维度**

```
A(~all(all(all(isnan(A),2),3),4),...
  ~all(all(all(isnan(A),1),3),4),...
  ~all(all(all(isnan(A),1),2),4),...
  ~all(all(all(isnan(A),1),2),3)) 
```

基本上，规则适用于 N 维：

*   在所有 N 维度上，您都执行 isnan() 事情。

*   然后用 all() 函数将其包裹 N-1 次，

*   并且第 i 个维度的每个 all() 函数的第二个参数应该是数字 1 到 N 的任意顺序，但不包括 i。

* * *

由于 Theodros Zelleke 想看看谁的方法更快（很好的说法是他认为他的方法如此之快），这里有一个基准。矩阵 A 定义为：

```
A = NaN*ones(100,400,3,3);
A(2:4,2:3,2,2) = [1 2; 3 4; 5 6];
A(2,2,2,2) = NaN;A(4,3,2,2) = NaN;
A(5:80,4:200,2,2)=ones(76,197); 
```

他的测试定义为：

```
tic;
for i=1:100
[i,j,k,z] = ind2sub(size(A),find(~isnan(A)));
l = min([i j k z]);
u = max([i j k z]);
B=A(l(1):u(1),l(2):u(2),l(3):u(3),l(4):u(4));
end
toc 
```

结果：

```
Elapsed time is 0.533932 seconds.
Elapsed time is 0.519216 seconds.
Elapsed time is 0.575037 seconds.
Elapsed time is 0.525000 seconds. 
```

我的测试定义为：

```
tic;
for i=1:100
isnanA=isnan(A);
ai34=all(all(isnanA,3),4);
ai12=all(all(isnanA,1),2);
B=A(~all(ai34,2),~all(ai34,1),~all(ai12,4),~all(ai12,3));
end
toc 
```

结果：

```
Elapsed time is 0.224869 seconds.
Elapsed time is 0.225132 seconds.
Elapsed time is 0.246762 seconds.
Elapsed time is 0.236989 seconds. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T20:45:36.567

`A`我根据OP发布的输入解决问题：

```
>> [i,j,k] = ind2sub(size(A),find(~isnan(A)));
>> l = min([i j k]);
>> u = max([i j k]);
>> B=A(l(1):u(1),l(2):u(2),l(3):u(3))
B =
   NaN     2
     3     4
     5   NaN
>> size(B)
ans =
     3     2 
```

既然您说您想在更大的矩阵上执行此操作，我不确定@ronalchn 解决方案的性能 - 这就是所有的`all`调用。但我不知道这在多大程度上很重要 - 也许有人可以发表评论......

# cocoa-touch - 将 NSString 发送到 PHP 脚本

> ID：12026944
> 
> 赞同：-1
> 
> 时间：2012-08-19T13:44:47.193
> 
> 标签：cocoa-touch

如何`NSString`从 iPhone 发送一个远程 php 脚本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T13:49:05.130

```
NSString *urlStr = @"http://host.com/script.php?text=This+is+some+text";
NSURL *url = [NSURL URLWithString:urlStr];
NSString *response = [NSString stringWithContentsOfURL:url];

NSLog(@"The server responded: %@", response); 
```

# php - 如何达到更深的多维数组索引？

> ID：12026948
> 
> 赞同：0
> 
> 时间：2012-08-19T13:45:22.820
> 
> 标签：php, arrays

代码：

```
$a = array();
$a[] = 'a';
$a[] = 'b';
$a[] = 'c';
$a[] = array('e', 'f', array('g', '3'), 'c');
$a[] = 'd'; 
```

这工作正常：

```
return $a[3][2][1]; 
```

它给出“3”。但是，如果我需要以编程方式执行此操作怎么办？搜索还是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T13:49:24.377

您可以使用[array_walk_recursive](http://www.php.net/manual/en/function.array-walk-recursive.php)遍历数组的每个元素，包括数组元素，但您最好使用 OOP 方法并制作项目的对象（并可能在其中隐藏一个数组），这将使其*更加*直观。

array_walk_recursive 示例：

```
<?php
$sweet = array('a' => 'apple', 'b' => 'banana');
$fruits = array('sweet' => $sweet, 'sour' => 'lemon');

function test_print($item, $key)
{
    echo "$key holds $item\n";
}

array_walk_recursive($fruits, 'test_print');
?> 
```

输出：

```
a holds apple
b holds banana
sour holds lemon 
```

一个类的例子如下：

```
class mySubArray
{
    public $element1='e';
    public $element2='f';
    public $element3=array();
    public $element4='c';
}

class mySomething
{
    public $var1='a';
    public $var2='b';
    public $var3='c';
    public $var4=array();
    public $var5='d';

    public function __construct()
    {
        $this->var4= new mySubArray();
        $this->var4->element3[0]='g';
        $this->var4->element3[0]='3';
    }
}

$myObject = new mySomething(); 
```

然后您可以按如下方式访问属性：

```
echo $myObject->var3; // Output: c
echo $myObject->var4->element2; // output: f 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T14:05:51.737

```
Using these 2 functions will search multidimensional arrays and return ALL matching paths (items) NOT just a single item.

if(!function_exists('array_search_recursive')){
    function array_search_recursive($needle, $haystack, $key_lookin=""){
    $path = NULL;
    if (!empty($key_lookin) && array_key_exists($key_lookin, $haystack) && $needle === $haystack[$key_lookin]) {
    $path[] = $key_lookin;
    } else {
    foreach($haystack as $key => $val) {
    if (is_scalar($val) && $val === $needle && empty($key_lookin)) {
    $path[] = $key;
    break;
    } elseif (is_array($val) && $path = array_search_recursive($needle, $val, $key_lookin)) {
    array_unshift($path, $key);
    break;
    }
    }
    }
    return $path;
    }
    }

    // Recursive backtracking function for multidimensional array search
    if(!function_exists('search_r')){
    function search_r($value, $array){
    $results = array();

    if(is_array($array)){
    $path = array_search_recursive($value, $array);
    if (is_array($path) && count($path) > 0){
    $results[] = $path;
    unset($array[$path[0]]);
    $results = array_merge($results, search_r($value, $array));
    }else{

    }
    }

    return $results;
    }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T14:00:30.463

```
/**
     * Searches haystack for needle and 
     * returns an array of the key path if 
     * it is found in the (multidimensional) 
     * array, FALSE otherwise.
     *
     * @mixed array_searchRecursive ( mixed needle, 
     * array haystack [, bool strict[, array path]] )
     */

function array_searchRecursive( $needle, $haystack, $strict=false, $path=array() )
{
    if( !is_array($haystack) ) {
        return false;
    }

    foreach( $haystack as $key =&gt; $val ) {
        if( is_array($val) &amp;&amp; $subPath = array_searchRecursive($needle, $val, $strict, $path) ) {
            $path = array_merge($path, array($key), $subPath);
            return $path;
        } elseif( (!$strict &amp;&amp; $val == $needle) || ($strict &amp;&amp; $val === $needle) ) {
            $path[] = $key;
            return $path;
        }
    }
    return false;
} 
```

# delphi - 在 Delphi 控制台应用程序中使用 VCL TTimer

> ID：12026951
> 
> 赞同：13
> 
> 时间：2012-08-19T13:45:52.820
> 
> 标签：delphi, timer, event-handling, console

正如问题主题所说。我在 Delphi 中有一个控制台应用程序，其中包含一个`TTimer`变量。我想做的事情是为事件分配一个事件处理程序`TTimer.OnTimer`。我对 Delphi 完全陌生，我曾经使用 C#，将事件处理程序添加到事件中是完全不同的。我发现人们不会简单地将过程作为处理程序分配给事件，您必须创建一个带有将作为处理程序的方法的虚拟类，然后将此方法分配给事件。这是我目前拥有的代码：

```
program TimerTest;

{$APPTYPE CONSOLE}

uses
  SysUtils,
  extctrls;

type
  TEventHandlers = class
    procedure OnTimerTick(Sender : TObject);
  end;

var
  Timer : TTimer;
  EventHandlers : TEventHandlers;

procedure TEventHandlers.OnTimerTick(Sender : TObject);
begin
  writeln('Hello from TimerTick event');
end;

var
  dummy:string;
begin
  EventHandlers := TEventHandlers.Create();
  Timer := TTimer.Create(nil);
  Timer.Enabled := false;
  Timer.Interval := 1000;
  Timer.OnTimer := EventHandlers.OnTimerTick;
  Timer.Enabled := true;
  readln(dummy);
end. 
```

这对我来说似乎是正确的，但由于某种原因它不起作用。

**编辑**
看起来该`TTimer`组件将无法工作，因为控制台应用程序没有消息循环。有没有办法在我的应用程序中创建一个计时器？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-19T13:53:08.843

您的代码不起作用，因为`TTimer`组件内部使用`WM_TIMER`消息处理并且控制台应用程序没有消息循环。为了使您的代码正常工作，您应该自己创建一个消息泵循环：

```
program TimerTest;

{$APPTYPE CONSOLE}

uses
  SysUtils, Windows,
  extctrls;

type
  TEventHandlers = class
    procedure OnTimerTick(Sender : TObject);
  end;

var
  Timer : TTimer;
  EventHandlers : TEventHandlers;

procedure TEventHandlers.OnTimerTick(Sender : TObject);
begin
  writeln('Hello from TimerTick event');
end;

procedure MsgPump;
var
  Unicode: Boolean;
  Msg: TMsg;

begin
  while GetMessage(Msg, 0, 0, 0) do begin
    Unicode := (Msg.hwnd = 0) or IsWindowUnicode(Msg.hwnd);
    TranslateMessage(Msg);
    if Unicode then
      DispatchMessageW(Msg)
    else
      DispatchMessageA(Msg);
  end;
end;

begin
  EventHandlers := TEventHandlers.Create();
  Timer := TTimer.Create(nil);
  Timer.Enabled := false;
  Timer.Interval := 1000;
  Timer.OnTimer := EventHandlers.OnTimerTick;
  Timer.Enabled := true;
  MsgPump;
end. 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-08-19T16:11:38.420

正如其他人所提到的，控制台应用程序没有消息泵。

这是一个`TConsoleTimer`模仿类的线程`TTimer`类。主要区别在于事件中的代码是在`TConsoleTimer`线程中执行的。

**更新**

在这篇文章的末尾是一种在主线程中调用此事件的方法。

```
unit ConsoleTimer;

interface

uses
  Windows, Classes, SyncObjs, Diagnostics;

type
  TConsoleTimer = Class(TThread)
  private
    FCancelFlag: TSimpleEvent;
    FTimerEnabledFlag: TSimpleEvent;
    FTimerProc: TNotifyEvent; // method to call
    FInterval: integer;
    procedure SetEnabled(doEnable: boolean);
    function GetEnabled: boolean;
    procedure SetInterval(interval: integer);
  protected
    procedure Execute; override;
  public
    Constructor Create;
    Destructor Destroy; override;
    property Enabled : boolean read GetEnabled write SetEnabled;
    property Interval: integer read FInterval write SetInterval;
    // Note: OnTimerEvent is executed in TConsoleTimer thread
    property OnTimerEvent: TNotifyEvent read FTimerProc write FTimerProc;
  end;

implementation

constructor TConsoleTimer.Create;
begin
  inherited Create(false);
  FTimerEnabledFlag := TSimpleEvent.Create;
  FCancelFlag := TSimpleEvent.Create;
  FTimerProc := nil;
  FInterval := 1000;
  Self.FreeOnTerminate := false; // Main thread controls for thread destruction
end;

destructor TConsoleTimer.Destroy; // Call TConsoleTimer.Free to cancel the thread
begin
  Terminate; 
  FTimerEnabledFlag.ResetEvent; // Stop timer event
  FCancelFlag.SetEvent; // Set cancel flag
  Waitfor; // Synchronize
  FCancelFlag.Free;
  FTimerEnabledFlag.Free;
  inherited;
end;

procedure TConsoleTimer.SetEnabled(doEnable: boolean);
begin
  if doEnable then
    FTimerEnabledFlag.SetEvent
  else
    FTimerEnabledFlag.ResetEvent;
end;

procedure TConsoleTimer.SetInterval(interval: integer);
begin
  FInterval := interval;
end;

procedure TConsoleTimer.Execute;
var
  waitList: array [0 .. 1] of THandle;
  waitInterval,lastProcTime: Int64;
  sw: TStopWatch;
begin
  sw.Create;
  waitList[0] := FTimerEnabledFlag.Handle;
  waitList[1] := FCancelFlag.Handle;
  lastProcTime := 0;
  while not Terminated do
  begin
    if (WaitForMultipleObjects(2, @waitList[0], false, INFINITE) <>
      WAIT_OBJECT_0) then
      break; // Terminate thread when FCancelFlag is signaled
    if Assigned(FTimerProc) then
    begin
      waitInterval := FInterval - lastProcTime;
      if (waitInterval < 0) then
        waitInterval := 0;
      if WaitForSingleObject(FCancelFlag.Handle,waitInterval) <> WAIT_TIMEOUT then
        break;

      if WaitForSingleObject(FTimerEnabledFlag.Handle, 0) = WAIT_OBJECT_0 then
      begin
        sw.Start;
        FTimerProc(Self);
        sw.Stop;
        // Interval adjusted for FTimerProc execution time
        lastProcTime := sw.ElapsedMilliSeconds;
      end;
    end;
  end;
end;

function TConsoleTimer.GetEnabled: boolean;
begin
  Result := (FTimerEnabledFlag.Waitfor(0) = wrSignaled);
end;

end. 
```

和一个测试：

```
program TestConsoleTimer;

{$APPTYPE CONSOLE}

{$R *.res}

uses
  System.SysUtils,ConsoleTimer;

type
  TMyTest = class
    procedure MyTimerProc(Sender: TObject);
  end;

procedure TMyTest.MyTimerProc(Sender: TObject);
begin
  // Code executed in TConsoleTimer thread !
  WriteLn('Timer event');
end;

var
  MyTest: TMyTest;
  MyTimer: TConsoleTimer;
begin
  MyTest := TMyTest.Create;
  try
    MyTimer := TConsoleTimer.Create;
    MyTimer.Interval := 1000;
    MyTimer.OnTimerEvent := MyTest.MyTimerProc;
    WriteLn('Press [Enter] key to end.');
    MyTimer.Enabled := true;
    ReadLn;
    MyTimer.Free;
  finally
    MyTest.Free;
    WriteLn('End.');
  end;
end. 
```

* * *

如上所述，如何使事件在主线程中执行？

阅读[Delphi 7：在控制台应用程序中处理事件 (TidIRC)](https://stackoverflow.com/a/11366186/576719)给出了答案。

在中添加一个方法`TConsoleTimer`：

```
procedure TConsoleTimer.SwapToMainThread;
begin
  FTimerProc(Self);
end; 
```

并将方法中的调用更改`Execute`为：

```
Synchronize(SwapToMainThread); 
```

要抽取同步调用，请使用`CheckSynchronize()`Classes 单元中的函数：

```
while not KeyPressed do CheckSynchronize(); // Pump the synchronize queue 
```

注意：控制台`KeyPressed`功能可以在这里找到：[How i can implement a IsKeyPressed function in a delphi console application?](https://stackoverflow.com/a/5845312/576719) .

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-19T14:40:18.023

控制台应用程序没有消息泵，但有线程。如果您创建一个执行工作的线程并在工作完成后等待下一秒，您应该得到您想要的结果。阅读有关 TThread 如何创建专用线程的文档。但是，从线程中获取数据并从线程中获取数据并不那么简单。这就是为什么有许多“原始”TThread 的替代品可以帮助解决这个问题，比如 OmniThreadLibrary。

# firefox - 使用 xdotool 自动刷新网页 - 窗口焦点后不发送密钥

> ID：12026953
> 
> 赞同：6
> 
> 时间：2012-08-19T13:46:15.923
> 
> 标签：firefox, ubuntu, automation, page-refresh, browser-refresh

**鉴于：**

我在我的 Ubuntu 计算机上打开了带有*[Firefox Page Title]页面的 Firefox。*

**这是我的命令：**

```
xdotool search "[Firefox Page Title]" windowactivate --sync key --clearmodifiers ctrl+r 
```

**文档：**

带有文档/示例的 xdotool 网站在[这里](http://www.semicomplete.com/projects/xdotool/)。

直接来自 xdotool 网站的示例：

```
# As of version 2.20100623, you can do this simpler version of above:
xdotool search "Mozilla Firefox" windowactivate --sync key --clearmodifiers ctrl+l 
```

**笔记：**

我正在使用 xdotool 版本 2.20110530.1。

该命令正确地将我的屏幕聚焦到我选择的任何窗口标题，但它不会将 ctrl+r 键发送到窗口，因为网站不会刷新。我没有收到来自命令的错误消息。（*Firefox 中的刷新快捷键是 ctrl+r*）

**通缉行为：**

该命令有望（当它工作时）应用于我的服务器计算机上 24/7 开放的 Web 服务器统计页面，我希望它自动刷新页面，这样我就可以在没有我的情况下查看我的网站的新流量做任何事。

**编辑：**我愿意使用其他可以提供此功能的应用程序，如果您知道其他简单/相似的东西，请提供它作为答案！如果我不能让这个工作，我将默认为下一个最好的事情。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-03-23T16:49:51.543

我试图将击键发送到应用程序，并且我还得出结论，xdotool 不能按描述的那样工作。我最终使用[xvkbd](http://t-sato.in.coocan.jp/xvkbd/)来做同样的事情。

对于您的示例，以下命令刷新 Firefox 中的页面：

```
xvkbd -window Firefox -text "\Cr" 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-20T13:27:09.797

在尝试了几种不同的方法让 xdotool 正常工作后，**我倾向于认为 xdotool 本身就是问题所在**。这是我尝试过的，没有奏效。

*   从终端运行命令（和变体 - 删除/添加参数）。
*   从 SH 脚本运行命令（和变体 - 删除/添加参数）。
*   在 F5 和 ctrl+r 键之间切换，因为它们都应该刷新 Firefox 页面。
*   尝试其他参数，例如：
    *   --window 设置要发送密钥的窗口。
    *   --delay 在发送键之前添加延迟，在窗口聚焦之后。
    *   在窗口聚焦之后，在发送密钥之前添加睡眠。

我还在脚本中尝试了这些命令，正如 xdotool 的首页所推荐的那样，尽管它声明这是“旧”版本，因为它被分成多个命令。“新”版本是我之前尝试执行的版本，是一个命令（见问题）。

```
WID=`xdotool search "Firefox Page Title"`
xdotool windowactivate --sync $WID
xdotool key --clearmodifiers ctrl+r 
```

**上述所有尝试始终正确聚焦到我想要的窗口，但无论是 F5 还是 ctrl+r，它都不会发送密钥。**

**但是，以下工作正常：**

```
xdotool selectwindow key ctrl+r 
```

或者

```
xdotool selectwindow key F5 
```

该`selectwindow`命令在执行时会将光标变为矩形选择工具，此时您可以选择要聚焦的窗口，在这种情况下，可以选择将 ctrl+r 或 F5 键发送到哪个窗口。不幸的是，这不是我想要的，因为它需要用户输入才能正常工作。

**最终解决方案：**

我的解决方案（因为我试图使用 xdotool 不断刷新网页）是使用*[ReloadEvery](https://addons.mozilla.org/en-US/firefox/addon/reloadevery/)* Firefox 插件，它会在您选择的任何时间间隔内刷新您设置的任何页面。它旨在成为[Opera](http://www.opera.com/)浏览器内置自动页面刷新功能的翻版，到目前为止，它运行良好。

对于那些使用 Chrome 并正在寻找类似解决方案的人来说，还有很多附加组件可供您使用。[https://chrome.google.com/webstore/search/auto%20refresh](https://chrome.google.com/webstore/search/auto%20refresh)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-12-07T21:31:03.787

```
xdotool search --onlyvisible --classname Navigator windowactivate --sync key F5 
```

运行拱 linux

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-10-29T08:44:42.763

`xdotool`似乎不起作用的事实可能与[检测和丢弃合成事件的应用程序](http://www.semicomplete.com/projects/xdotool/xdotool.xhtml#sendevent_notes)有关：

> 将击键发送到特定窗口使用不同的 API，而不是简单地键入活动窗口。
> 
> [...]
> 
> 许多程序观察到这个标志并拒绝这些事件。

考虑到这一点，我能够使其与下面的一系列命令一起工作。这会重新加载 Chromium 和 Firefox。

```
cwid=$(xdotool getwindowfocus) # Save the current window
twid=$(xdotool search --name somename)
xdotool windowactivate $twid
sleep 0.1 # The key event might be sent before the window has been fully activated
xdotool key --window $twid F5
xdotool windowactivate $cwid # Done, now go back to where we were 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-23T06:31:31.840

我有键绑定 win + shift + s 来获取窗口 id 使用

```
xdotool getactivewindow getwindowgeometry 
```

并 win + s 刷新

```
xdotool key --window savedWindowID ctrl+r 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-11-12T15:42:55.333

以下 xdotool 命令非常适合我（切换到第一个找到的 Firefox 窗口，刷新当前选项卡）：

```
xdotool search "Navigator" windowactivate key 'ctrl+r' 
```

在 xdotool 3.20140217.1 上运行 Ubuntu 14.04.1

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-02-03T08:26:14.293

对我来说，以下工作：

```
xdotool search --onlyvisible --class Firefox key F5 
```

也

```
{ 
   xdotool search --onlyvisible --class Firefox windowfocus
   sleep 0.1
   xdotool key ctrl+r
} 
```

但

```
xdotool search --onlyvisible --class Firefox key ctrl+r 
```

和

```
xdotool search --onlyvisible --class Firefox windowfocus key ctrl+r 
```

不工作。

因此，使用带修饰符的组合键似乎需要一点延迟，至少在 Firefox 中是这样（但是，我可以将 ctrl-keys 发送到 Emacs 而不会出现此类问题）。

# php - 具有不同分机的 Codeigniter 多个文件

> ID：12026955
> 
> 赞同：0
> 
> 时间：2012-08-19T13:46:35.723
> 
> 标签：php, codeigniter, upload

`CI_UPLOAD`我正在使用库在 Codeigniter 中上传屏幕截图和文件。现在截图上传好了，之后当我上传文件时它显示错误。我在谷歌搜索了很多来解决这个问题，但没有得到解决方案。当我`$config['allowed_types']=TRUE`在文件中工作时，但我只想要**mp3 / 3gp / mp4 / avi / sis / sisx / jar**文件

```
$field1 = 'ss';
$config['upload_path'] = IMAGE_UPLOAD_PATH;
$config['allowed_types'] = 'gif|jpg|png|jpeg|pjpeg';
$ext = $this->get_ext($_FILES[$field1]['name']);
$config['file_name'] = date("U")."-screenshot.$ext";;
$this->upload->initialize($config);
if ( ! $this->upload->do_upload($field1)) {
    $error = array('error' => $this->upload->display_errors());
} else {
    $img_data = array('upload_data' => $this->upload->data());
    $data['ss'] = DOMAIN.IMAGE_UPLOAD_PATH.'/'.$img_data['upload_data']['file_name'];
}
///iits working file
//// below code not working
$field2 = 'file';
$config1['upload_path'] = FILE_UPLOAD_PATH;
// i try it with 'mp3|jar' etc
$config1['allowed_types'] = $_FILES[$field2]['type']; 
$ext = $this->get_ext($_FILES[$field2]['name']);
$config1['file_name'] = date("U")."-".$title.".".$ext."";
$config1['max_size'] = 400000;
$this->upload->initialize($config1);
if (!$this->upload->do_upload($field2)) {
    $error = array_merge(array(@$error),array('error' => @$this->upload->display_errors()));
} else {
    $file_data = array('upload_data' => $this->upload->data());
    $data['size'] = $file_data['upload_data']['file_size'];
    $data['file_link'] = DOMAIN.FILE_UPLOAD_PATH.'/'.$file_data['upload_data']['file_name'];
} 
```

显示错误：

```
The filetype you are attempting to upload is not allowed 
```

现在我厌倦了搜索和解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T14:24:59.807

您是否尝试过包含/搜索 config/mimes.php

```
'jar' => 'application/java-archive' 
```

# actionscript-3 - Flex DropDownList 数据到 xml

> ID：12026959
> 
> 赞同：0
> 
> 时间：2012-08-19T13:47:11.123
> 
> 标签：actionscript-3, apache-flex, flex4, flex4.5

我是 Flex 的新手，忙于使用自定义表单将表单数据保存到 xml。我创建了表格：

形式：

```
<s:Panel width="875" height="677" horizontalCenter="0" title="Add New Client to Database"
             verticalCenter="0">
        <s:Label x="17" y="23" text="Title:"/>
        <s:DropDownList  x="17" y="43" requireSelection="true">
            <s:dataProvider>
                <s:ArrayList id="clientTitle" source="[Mr, Mnr, Dr]" />
            </s:dataProvider>
        </s:DropDownList>
        <s:Label x="209" y="23" text="Gender:"/>
        <s:DropDownList id="clientGender" x="209" y="43" requireSelection="true">
            <s:dataProvider>
                <s:ArrayList source="[Male, Female]" />
            </s:dataProvider>
        </s:DropDownList>
        <s:Label x="17" y="84" text="Full Names:"/>
        <s:TextInput id="clientNames" x="18" y="104" width="350"/>
        <s:Label x="18" y="142" text="Surname:"/>
        <s:TextInput id="clientSurname" x="18" y="162" width="350"/>
        <s:Label x="18" y="202" text="Age:"/>
        <s:TextInput id="clientAge" x="18" y="221" width="350"/>
        <s:Label x="18" y="261" text="Address:"/>
        <s:TextInput id="clientAddress" x="17" y="281" width="350"/>
        <s:Label x="17" y="322" text="City:"/>
        <s:TextInput id="clientCity" x="17" y="342" width="350"/>
        <s:Label x="17" y="382" text="Country:"/>
        <s:TextInput id="clientCountry" x="17" y="402" width="350"/>
        <s:Label x="18" y="443" text="Tel:"/>
        <s:TextInput id="clientTel" x="17" y="463" width="350"/>
        <s:Label x="17" y="503" text="Fax:"/>
        <s:TextInput id="clientFax" x="17" y="522" width="350"/>
        <s:Label x="17" y="560" text="Mobile:"/>
        <s:TextInput id="clientMobile" x="17" y="580" width="350"/>
        <s:Label x="492" y="23" text="Email:"/>
        <s:TextInput id="clientEmail" x="492" y="43" width="350"/>
        <s:Label x="492" y="84" text="Extras:"/>
        <s:CheckBox id="clientCode8" x="527" y="104" label="License Code 8"/>
        <s:CheckBox id="clientCode10" x="527" y="130" label="License Code 10"/>
        <s:CheckBox id="clientCode14" x="527" y="156" label="License Code 14"/>
        <s:CheckBox id="clientSingle" x="684" y="104" label="Single"/>
        <s:CheckBox id="clientMarried" x="684" y="130" label="Maried"/>
        <s:CheckBox id="clientDevorced" x="684" y="156" label="Devorced"/>
        <s:DropDownList id="clientEducation" x="492" y="222" width="350" requireSelection="true">
            <s:dataProvider>
                <s:ArrayList source="[Not Finished School, Matric, Diploma, N3, N4, N5, N6, Degree]" />
            </s:dataProvider>
        </s:DropDownList>

        <s:Label x="492" y="202" text="Education Level:"/>

        <s:DropDownList id="clientIndustry" x="492" y="282" width="350" requireSelection="true">
            <s:dataProvider>
                <s:ArrayList source="[Not Finished School, Matric, Diploma, N3, N4, N5, N6, Degree]" />
            </s:dataProvider>
        </s:DropDownList>

        <s:Label x="492" y="261" text="Industry:"/>
        <s:DropDownList id="clientQualification" x="492" y="342" width="350" requireSelection="true">
            <s:dataProvider>
                <s:ArrayList source="[Not Qualified, Fitter, Boilmaker]" />
            </s:dataProvider>
        </s:DropDownList>
        <s:Label x="492" y="322" text="Qualification:"/>
        <s:DropDownList id="clientSalary" x="492" y="402" width="350" requireSelection="true">
            <s:dataProvider>
                <s:ArrayList source="[0 - 1000, 1000 - 2000, 2000 - 3000, 3000 - 4000, 4000 - 5000, 5000 - 6000, 7000 - 8000, 8000 - 9000, 9000 - 10 000]" />
            </s:dataProvider>
        </s:DropDownList>
        <s:Label x="492" y="382" text="Salary:"/>
        <s:Label x="492" y="443" text="Current Employed:"/>
        <s:CheckBox id="clientEmployed" x="527" y="467" label="Is Employed"/>
        <s:CheckBox id="clientNotEmployed" x="684" y="467" label="Not Employed"/>
        <s:Button x="585" y="523" label="Upload CV to Database"/>
        <s:Button x="607" y="580" label="Save New Client" buttonMode="true" click="saveRecruit(event)" useHandCursor="true"/>
    </s:Panel> 
```

这是我要保存到 xml 的脚本：

```
import mx.controls.Alert;
        protected function saveRecruit(event:MouseEvent):void
        {
            var file:File = File.desktopDirectory;
            file = file.resolvePath("recruit.xml");
            var myXML:XML =<recruit>
                            <title>{clientTitle.toString()}</title>
                            <gender>{clientGender.toString()}</gender>
                            <names>{clientNames.text}</names>
                            <surname>{clientSurname.text }</surname>
                            <age>{clientAge.text}</age>
                            <address>{clientAddress.text}</address>
                            <city>{clientCity.text}</city>
                            <country>{clientCountry.text}</country>
                            <tel>{clientTel.text}</tel>
                            <fax>{clientFax.text }</fax>
                            <mobile>{clientMobile.text}</mobile>
                            <email>{clientEmail.text}</email>
                            <extras>{clientCode8.toString()}</extras>
                            <education>{clientEducation.toString()}</education>
                            <industry>{clientIndustry.toString()}</industry>
                            <qualification>{clientQualification.toString()}</qualification>
                            <salary>{clientSalary.toString()}</salary>
                            <employed>{clientEmployed.toString()}</employed>
                          </recruit>;
            var fs:FileStream = new FileStream();
            fs.open(file, FileMode.APPEND);
            fs.writeUTFBytes(myXML);
            fs.close();
            Alert.show("Thank You! You have now been entered.","Thank You!");
        } 
```

我无法将数据保存到 XML，有什么想法吗？

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T21:00:03.183

您只需使用该`selectedItem`属性：

```
var myXML:XML = 
    <recruit>
        <title>clientTitleInput.selectedItem</title>
        <gender>clientGenderInput.selectedItem</gender>
        ...
    </recruit>; 
```

请注意，`clientTitleInput`and`clientGenderInput`是 DropDownLists 的 ID，而不是它们的 dataProviders 的 ID。

# matlab - 符号matlab矩阵到乳胶

> ID：12026962
> 
> 赞同：1
> 
> 时间：2012-08-19T13:47:53.020
> 
> 标签：matlab, latex, indices

考虑符号 matlab 表达式

`e = (a_1_1 + a_2_2)*(b_1_1 + b_2_2)`

使用`latex(e)`这个产生

`\left({{a_{1}}}_{1} + {{a_{2}}}_{2}\right)\, \left({{b_{1}}}_{1} + {{b_{2}}}_{2}\right)`

是否可以[以某种方式]使用逗号作为索引之间的分隔符，即得到

`\left(a_{1,1} + a_{2,2} \right)\,\left(b_{1,1} + b_{2,2}\right)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T14:46:29.673

我会对一种简单的方法感兴趣。一个丑陋的方法是：

```
eqn = latex(e);
eqn1 = regexprep(eqn,'{{','');
eqn2 = regexprep(eqn1,'}}}_{',','); 
```

# highcharts - HighCharts：在图表点击上保持工具提示（图表，不是系列）

> ID：12026963
> 
> 赞同：0
> 
> 时间：2012-08-19T13:48:04.053
> 
> 标签：highcharts, highstock

我正在使用以下代码，因此如果有人单击图表中的一根烛台，工具提示实际上会保留在页面上：

```
events: {
    click: function(event) {
        if (cloneToolTip)
        {
            chart.container.firstChild.removeChild(cloneToolTip);
        }
        cloneToolTip = event.currentTarget.chart.tooltip.label.element.cloneNode(true);
       chart.container.firstChild.appendChild(cloneToolTip); 
```

我想将其从系列移至图表，以便他们可以单击页面上的任何位置并保留工具提示。但是，如果他们不点击烛台，则 event.currentTarget.chart 不存在。我浏览了结果，找不到相应的工具提示。有人可以为我解释一下吗？非常感激！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T14:37:22.300

您可以使用`this`而不是`event.currentTarget.chart`作为上下文是图表本身。因此`this.tooltip`应该为您提供您正在寻找的工具提示。

# reference - 保留外键约束的 DB2 备份和恢复数据库表

> ID：12026966
> 
> 赞同：0
> 
> 时间：2012-08-19T13:48:27.077
> 
> 标签：reference, foreign-keys, db2, backup, restore

我目前在我的开发机器上为 db2 测试备份和恢复数据库表时遇到问题。从来没有完全成功。虽然我能够在删除并重新创建表后恢复所有数据，但我无法重置外键约束，因为我收到 SQL 错误，抱怨键不匹配。这是我的确切步骤，我确定不完全是正确的方法，但它最终确实恢复了 5423 行数据：

过程

1.  导出到 /export/home/dale/comments.ixf 的 ixf 消息 /export/home/dale/msg.txt select * from .comments

    注意：步骤 1 将 5423 行数据导出到某个位置

2.  删除表 .comments

3.  从 ixf create 的 /export/home/dale/comments.ixf 导入到 .comments

    注意：此处的第 3 步创建了表但不插入任何数据行

4.  将客户端从 /export/home/dale/comments.ixf 的由 identityoverride 修改的 ixf 加载到 .comments

    注意：直到这一步，我可以在重新创建的 db 表中插入 5423 行数据

5.  更改表 .comments 添加 FOREIGN KEY (comments_id) REFERENCES .news (article_key)

    注意：此处更改表失败，因为 db2 抱怨某些 comments_id 与 article_key 不匹配

有人可以在这里帮助我解决我的问题吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-21T18:20:04.910

该错误意味着您 IMPORT 到 Comments 表中的某些行引用了 News 表中不存在的行。

您可能没有正确形成约束。列名“comment_id”听起来像是 Comments 表的主键。您需要与 News 表的主键匹配的外键。它也可能被称为“article_key”或“article_id”。

```
 ALTER TABLE Comments
      ADD FOREIGN KEY( article_key)
        REFERENCES News( article_key); 
```

如果“comment_id”确实不是“Comments”表的主键，那么问题出在没有同时备份和恢复News和Comments表。

您可以将 News 表与 Comments 表一起导出和导入，或者删除引用缺少的 News 行的 Comments，如下所示

```
 DELETE FROM Comments
      WHERE comments_id NOT IN (
        SELECT article_key
          FROM News
      ) 
```

在执行此操作之前，您可能想尝试列出将被上述查询删除的评论

```
 SELECT * 
      FROM Comments
      WHERE comments_id NOT IN (
        SELECT article_key
          FROM News
      ) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T06:35:16.780

我找到了解决问题的方法以及上面的评论，

1.  user980717 解决了我将错误的列设置为外键的第一个问题
2.  对于我的第二个问题，即“SQL0668N Operation not allowed for reason code “1” on table “tablename”。SQLSTATE=57016”，我需要运行以下命令“set integrity for niwps.comments immediate checked”以确保所有数据都满足表中定义的约束。感谢所有努力帮助我解决问题的人。干杯

# c - 从命名管道获取客户端用户令牌

> ID：12026971
> 
> 赞同：0
> 
> 时间：2012-08-19T13:49:13.363
> 
> 标签：c, security, winapi, pipe, uac

如何从服务器端获取命名管道客户端的用户令牌。我找到了 ImpersonateNamedPipeClient ，但我只想从它的令牌中查询一些信息，例如 sessionId。（我无权访问客户端代码）提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T16:29:04.687

您可以使用`OpenThreadToken`after`ImpersonateNamedPipeClient`检查客户帐户权限，by`GetTokenInformation`或 by `AccessCheck`。

# php - 如何迭代 mysqli_fetch_array() 的结果？

> ID：12026979
> 
> 赞同：1
> 
> 时间：2012-08-19T13:50:00.250
> 
> 标签：php, mysqli

在下面的代码中，结果包含几个产品，每个产品都有几个列：

```
$db = connect_db();
$sql = "SELECT * FROM Products";
$result = $db->query($sql);
$ary = $result->fetch_array(MYSQLI_ASSOC);
foreach($ary as $key => $element){
  echo "key is $key, element is $element \n";
} 
```

但输出仅迭代单个产品的每一列：

```
key is id, element is 1
key is productCode, element is S10_1678
key is productName, element is 1969 Harley Davidson Ultimate Chopper
key is productLineId, element is 5
key is productScale, element is 1:10
key is productVendor, element is Min Lin Diecast
key is productDescription, element is This replica features working kickstand, front suspension, gear-shift lever, footbrake lever, drive chain, wheels and steering. All parts are particularly delicate due to their precise scale and require special care and attention.
key is quantityInStock, element is 7933
key is buyPrice, element is 48.81
key is MSRP, element is 95.7 
```

如何获得`$array[0]['MSRP']`评估的二维数组`95.7`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T13:55:56.107

`$ary = $result->fetch_array(MYSQLI_ASSOC)`一次只能获取一条记录，这是您案例中的第一条记录，您需要使用`while`

```
while($ary = $result->fetch_array(MYSQLI_ASSOC)) //fetching one record at a time until end of record
{

    foreach($ary as $key => $element){
      echo "key is $key, element is $element \n";
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-19T13:56:14.480

我相信这会奏效：

```
while ($ary = $result->fetch_array(MYSQL_ASSOC){
  foreach($ary as $key => $element){
    echo "key is $key, element is $element \n";
  }
} 
```

这意味着当有更多记录时，它会继续将它们放入数组中并打印它们……这是基于旧的 mysql_fetch_assoc() 和 mysql_fetch_array()。

祝你好运。

如果你想实现你想要的，你只需要执行以下操作：

```
 while ($ary = $result->fetch_array(MYSQL_ASSOC){
      foreach($ary){
        $array[] = $ary;
      }
    } 
```

现在`$array`拥有整个结果集，因此`$array[0]['MSRP']`- 将返回您想要的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T13:58:43.130

您需要迭代 mysql_fetch 命令，而不是该命令的结果。

例如：

```
$db = connect_db();
$sql = "SELECT * FROM Products";
$result = $db->query($sql);

while($entry = mysql_fetch_assoc($result))
{
  // $entry is an array you with the data of this DB-entry, eg
  echo $entry['MSRP'];
} 
```

# javascript - 无限滚动功能仅在首页

> ID：12026980
> 
> 赞同：1
> 
> 时间：2012-08-19T13:50:05.630
> 
> 标签：javascript, jquery, tumblr, infinite-scroll

我在 tumblr 博客中使用了无限滚动插件，只要用户在首页，一切正常，例如：“{someblog}.tumblr.com”。

从“{someblog}.tumblr.com/page/2”等开始，插件似乎根本没有加载（它没有隐藏导航元素）。初始化这是我用来调用它的代码：

```
$('#container').infinitescroll({
loading: {
            finished: undefined,
            finishedMsg: "Finished",
            img: "preloader.gif",
            msg: null,
            msgText: "Loading...",
            selector: null,
            speed: 'fast',
            start: undefined
        },
         state: {
            isDuringAjax: false,
            isInvalidPage: false,
            isDestroyed: false,
            isDone: false, // For when it goes all the way through the archive.
            isPaused: false,
            currPage: 1
         },
        callback: undefined,
        debug: false,
        behavior: undefined,
        binder: $(window), // used to cache the selector
        nextSelector: "#next a",
        navSelector: ".navigation",
        contentSelector: "#container", // rename to pageFragment
        itemSelector: "div.post",
        animate: false,
        pathParse: undefined,
        dataType: 'html',
        appendCallback: true,
        bufferPx: 400
    },
... 
```

**编辑：**我启用了调试信息，我得到了以下信息：

> （{0：“抱歉，我们无法解析您的下一篇（上一篇）网址。验证您的 css 选择器指向正确的 A 标记。如果您仍然收到此错误：大喊大叫，并在无限时寻求帮助-scroll.com."})
> 
> ({0:"determinePath", 1:"/page/4"})
> 
> ({0:"绑定", 1:"绑定"}

似乎它确实找到了下一页的地址-“/page/4”（因为我在第3页）。但由于某种原因它不能“解析”它？

该插件是否可能只能在第一页上运行，其中下一页的链接包含“2”？如果是这样，我该如何覆盖它？

提前非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T10:37:03.887

感谢@graygilmore，我想通了。这是需要添加到代码中的行：

```
pathParse: function() {
    return ['http://{Name}.tumblr.com/page/', '']
}, 
```

请注意，这`{Name}`是一个 Tumblr 变量，不需要更改 - Tumblr 会自动替换它。

此外 - 此行应添加到`state: {...}`块中：

```
currPage: {CurrentPage} 
```

（在我上面的问题中的示例中，我只是将其设置为“1”）。

`{CurrentPage}`也是一个 Tumblr 变量，因此对于正在查看的每个页面，它都会自动替换为当前页码。

现在 Infinite-Scroll 可以在博客的每个页面上正确加载，这在想要创建“加载更多帖子”按钮时特别有用，它可以让用户在常规（分页）导航和无限滚动之间进行选择。

# python - 重命名目录中的文件

> ID：12026983
> 
> 赞同：0
> 
> 时间：2012-08-19T13:50:21.387
> 
> 标签：python

我在一个目录中有 400 个文件（带有`.png`扩展名）。它们以名称开头`005.png`并上升到`395.png`。

我想使用以下方法重命名它们`os.rename`：

```
os.rename(006.png,005.png) 
```

换句话说，我想将所有数字向下移动，将文件重命名`005.png`为`004.png`并重命名`395.png`为`394.png`，依此类推。

我不想手动执行此操作，因为它会花费太长时间：

```
os.rename(005.png,004.png)
os.rename(006.png,005.png)
... 
```

我怎么能简单地做到这一点？我正在使用 s60 第二版 FP3。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-19T14:00:34.537

您可以使用一个简单的循环：

```
for i in xrange(4, 396):
    os.rename(str(i).zfill(3) + ".png", str(i-1).zfill(3) + ".png")) 
```

就是这样:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-19T14:13:59.607

循环确实是最简单的。作为 的替代方案`str(i).zfill(3) + ".png"`，您可以使用

```
template = "{0:03d}.png"
for i in range(4, 396):
    os.rename(template.format(i), template.format(i-1)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-19T14:29:38.180

```
import os
path  = r"C:\your_dir"#i've added r for skipping slash , case you are in windows
os.chdir(path)#well here were the problem , before edit you were in different directory and you want  edit file which is in another directory , so you have to change your directory to the same path you wanted to change some of it's file 
files = os.listdir(path)
for file in files:
    name,ext = file.split('.')
    edited_name=str(int(name)-1)
    os.rename(file,edited_name+'.'+ext) 
```

希望这就是你要找的

# php - 在php中调整大小后显示图像错误

> ID：12026988
> 
> 赞同：1
> 
> 时间：2012-08-19T13:50:44.803
> 
> 标签：php, mysql, image, resize, blob

我的图像在调整大小后没有显示。

```
require('connect.php');

if (isset($_FILES['image']) && $_FILES['image']['size'] > 0) { 

  // Temporary file name stored on the server
  $tmpName  = $_FILES['image']['tmp_name'];  
  $imagename = $_FILES["image"]["name"];

          // Get new dimensions
  list($width, $height) = getimagesize($tmpName);
  echo "orginal width".$width."<br/>";
  echo "orginal height".$height."<br/>";

  $new_width= $width * 0.5;
  $new_height = $height * 0.5;

  echo "new width".$new_width."<br/>";
  echo "new height".$new_height."<br/>"; //Its working fine till here.
  $image_p = imagecreatetruecolor($new_width, $new_height);
  $image = imagecreatefromjpeg($tmpName);
  imagecopyresampled($image_p, $image, 0, 0, 0, 0, $new_width, $new_height, $width, $height);
  echo "My image"."<br>";
  echo '<img src="data:image/png|image/jpeg|image/gif;base64,' . base64_encode( $image_p ) . '" style="max-width:400px; max-height:300px;"/>'; 
  /* This line is not able to display the image. 
     Also tried imagejpeg($image_p, null, 100);. Not working , but anyway i need to
     display image alongwith other content so i have used echo. Not sure which 
     variable i should work with to display the image and how do i do it.*/
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T14:03:57.200

在我看来，您缺少一步，将图像资源编码为 jpeg 图像（例如......）。

您可以将结果从类似文件输出[`imagejpeg`](http://php.net/manual/en/function.imagejpeg.php)到文件并提供文件，或者您可以使用输出缓冲捕获其输出并像现在一样提供它。