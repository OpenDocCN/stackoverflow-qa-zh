# StackOverflow 问答 10285000-10285999

# c++ - 如何编写一个非常简单的 Visual Studio 调试器可视化工具？

> ID：10285004
> 
> 赞同：4
> 
> 时间：2012-04-23T17:08:31.250
> 
> 标签：c++, visual-studio, debugging, debuggervisualizer

我正在尝试为字符串类型编写基于“autoexp.dat”的可视化工具。我已经缩减了尝试为包含以空字符结尾的字符串字段的非常简单的测试类型编写可视化工具的雄心：

```
namespace thizz { namespace izz {
        class MyType {
            const char* _ptr;
        public:
            MyType(const char* ptr) : _ptr(ptr) {}
        };
    }
} 
```

这是我对可视化器的尝试，但它对 Visual Studio (2010) 如何显示这种类型的实例没有影响：

```
thizz::izz::MyType
{
 preview ([$e._ptr,s])
} 
```

**（位于C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\Packages\Debugger\autoexp.dat**中 [Visualizers] 部分的顶部）。

观察这种类型的一个实例：

```
thizz::izz::MyType t("testing testing"); 
```

只是显示

```
t | {_ptr=0x0f56a6fc "testing testing" } | thizz::izz::MyType 
```

在监视窗口中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:54:18.370

要获得更多功能的查看器，请尝试更改为使用它：

```
thizz::izz::MyType {
preview ( #( [$e._ptr,s] ) )
stringview ( #( [$e._ptr,sb] ) )
} 
```

这也将给出放大镜图标，如果您有更长的字符串，它将打开一个更大的文本视图窗口。它还将为您提供呈现为 HTML 或 XML 的选项。

请注意，除了对空格敏感的文件格式外，我还发现您不能在字符串中使用冒号，否则会产生解析错误。

调试器可视化器非常强大，尽管语法可能非常令人困惑。作为一般建议，我建议首先在本`[AutoExpand]`节中创建一些条目以总结您最感兴趣的数据类型，然后如果您有自定义容器，然后复制和调整示例`vector`，`list`等，这将为您带来最大的回报为您的时间投资。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T10:49:47.247

我无法给出为什么我在 autoexp.dat 中的原始“代码”不起作用的明确原因，但我发现删除所有空格后相同的代码起作用。

然后我尝试重新添加空格，并发现在第一行保留初始大括号对于保持定义正常工作是必要的。

# iphone - 使用 AVMutableComposition 合并两个 m4v 电影文件 - 视频不会合并

> ID：10285007
> 
> 赞同：2
> 
> 时间：2012-04-23T17:08:35.460
> 
> 标签：iphone, objective-c, xcode, video, avmutablecomposition

我正在使用以下代码尝试合并存储在文档文件夹中的两个 m4v 文件：

```
CMTime insertionPoint = kCMTimeZero;
NSError * error = nil;

AVMutableComposition *composition = [AVMutableComposition composition];

AVURLAsset* asset = [AVURLAsset URLAssetWithURL: [assetURLArray objectForKey:kIntroVideo] options:nil];

if (![composition insertTimeRange:CMTimeRangeMake(kCMTimeZero, asset.duration) 
                          ofAsset:asset 
                           atTime:insertionPoint 
                            error:&error]) 
{
    NSLog(@"error: %@",error);
}

insertionPoint = CMTimeAdd(insertionPoint, asset.duration);

AVURLAsset* asset2 = [AVURLAsset URLAssetWithURL: [assetURLArray objectForKey:kMainVideo] options:nil];

if (![composition insertTimeRange:CMTimeRangeMake(kCMTimeZero, asset2.duration) 
                          ofAsset:asset2 
                           atTime:insertionPoint 
                            error:&error]) 
{
    NSLog(@"error: %@",error);
}

AVAssetExportSession *exportSession = [[AVAssetExportSession alloc] initWithAsset:composition presetName:AVAssetExportPresetHighestQuality];

NSString *exportVideoPath = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/FinishedVideo.m4v"];

NSURL *exportURL = [NSURL fileURLWithPath:exportVideoPath];
exportSession.outputURL = exportURL;
exportSession.outputFileType = AVFileTypeQuickTimeMovie;
[exportSession exportAsynchronouslyWithCompletionHandler:^{
    switch (exportSession.status) {
        case AVAssetExportSessionStatusFailed:{
            NSLog (@"FAIL");
            break;
        }
        case AVAssetExportSessionStatusCompleted: {
            NSLog (@"SUCCESS");
}
};
 }]; 
} 
```

问题是这两个视频无法正确合并。总合并影片的持续时间是正确的，但是视频永远不会转换到第二部电影，并在其持续时间内继续显示第一部电影的最后一帧。奇怪的是，我可以听到在后台播放的第二个视频的音频。

有谁知道出了什么问题？

编辑 - 奇怪的是，如果我合并两个长度完全相同的剪辑，它就可以工作。

编辑 - 已尝试将文件扩展名更改为 .mov 有同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-03T14:41:30.203

您尚未将组合设置为 exportSession。

行后：

`AVAssetExportSession *exportSession = [[AVAssetExportSession alloc] initWithAsset:composition presetName:AVAssetExportPresetHighestQuality];`

添加这一行

`exportSession.videoComposition = composition;`

这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-25T18:10:55.837

好的 - 所以我最终通过使用单独的 AVMutableComposition 轨道然后为音频和视频设置一个可变组合来完成这项工作。

# ruby-on-rails - Rails设计omniauth：无法在用户会话中保留facebook数据

> ID：10285008
> 
> 赞同：1
> 
> 时间：2012-04-23T17:08:47.600
> 
> 标签：ruby-on-rails, ruby, devise, omniauth

我在我的 rails 应用程序中使用 devise omniauth，这里是 User 类

```
class User < ActiveRecord::Base
  devise :database_authenticatable, :registerable,
         :recoverable, :rememberable, :trackable, :validatable, :omniauthable

  attr_accessible :email, :password, :password_confirmation, :remember_me, :encrypted_password, :fb_id

  def set_facebook_info(info)
    @facebook_info = info
  end

  def get_facebook_info
    @facebook_info
  end

  def self.find_for_facebook_oauth(access_token, signed_in_resource=nil)
    data = access_token.extra.raw_info
    if user = User.find_by_email(data.email)
      if not user.fb_id
        user.fb_id = access_token.uid
        user.save
      end
      user.set_facebook_info "whatever" <-- I tried here

      user
    else # Create a user with a stub password.
      user = User.create(:email => data.email, :password => Devise.friendly_token[0,20], :fb_id => access_token.uid)
      user
    end
  end

  def self.new_with_session(params, session)
    super.tap do |user|
          user.set_facebook_info "whatever" # <-- I Tried here too 
      if data = session["devise.facebook_data"] && session["devise.facebook_data"]["extra"]["user_hash"]
        user.email = data["email"]
      end
    end
  end
end 
```

我想使用 set 和 get 方法来保存一些 facebook 用户信息。但是当我在视图中使用 current_user 时，它没有给我在我的 User 类中设置的值。就像在 application.html.erb 中一样：

```
<span><%= current_user.get_facebook_info %></span> 
```

返回一个空值

有人知道吗？这应该是一个常见的情况。一般来说，我们如何通过设计将一些未连接到数据库的属性分配给 current_user ？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T02:26:20.637

您的 @facebook_info 属性仅存储在内存中，不会持久化到数据库中。因此，在下一页加载时，Devise 将再次从数据库中加载您的模型，这就是缺少信息的原因。

如果要保留 Facebook 信息，则需要将其保存到数据库中。Rails 有一些很好的方法可以将哈希直接存储在文本列中：

```
class User < ActiveRecord::Base
  serialize :preferences
end

user = User.create(:preferences => { "background" => "black", "display" => large })
User.find(user.id).preferences # => { "background" => "black", "display" => large } 
```

来源：[http ://api.rubyonrails.org/classes/ActiveRecord/Base.html](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)

# ruby-on-rails-3 - Rails：如何安全地关联现有关联？

> ID：10285010
> 
> 赞同：1
> 
> 时间：2012-04-23T17:08:53.900
> 
> 标签：ruby-on-rails-3, carrierwave

我正在设计一个有很多用户的网站，每个用户都有很多帖子，每个帖子都有很多照片。因为我希望用户在创建新帖子时可以预览上传的照片，所以我在[这里](https://stackoverflow.com/questions/2232008/rails-paperclip-previews)找到了答案，建议使用子表单上传照片。

我使用carrierwaves 来处理照片上传，并使用jquery-file-upload 来处理用户界面。这些型号是：

```
class User < ActiveRecord::Base
    has_many :posts, dependent: :destroy
end

class Post < ActiveRecord::Base
    attr_accessible :title, :description, :photo_ids
    belongs_to :user
    has_many :photos, :dependent => :destroy
end

class Photo < ActiveRecord::Base
    mount_uploader :image, ImageUploader
    attr_accessible :image
    belongs_to :post
end 
```

在新的帖子视图中，我在普通帖子表单上方放置了一个 jquery-file-upload UI，然后：

1.  当用户选择一张照片时，它将通过 jquery-file-upload api 上传到 PhotosController。在这一步，这张照片的 post_id 为零。

2.  照片上传完成后，我使用 javascript 添加一个隐藏的输入表单，如下所示：

    input type="hidden" id="collection_image_ids" name="collection[collection_image_ids][]" value=#{照片的id}

3.  用户可以多次重复第 1 步和第 2 步，然后提交帖子。

4.  一切都很好，但是....

我认为允许为 photo_ids 批量分配不是一个好主意，因为有人可以使用此请求将其他用户的照片分配给他的帖子。（在编辑视图中）参考答案建议使用一些随机访问密钥来提高安全性，但是当有人访问其他用户的帖子时，他仍然可以获得那些照片的随机访问密钥，对吗？

所以目前实施并不安全，对吧？

谁能给我一些建议或处理这个问题的正确方法是什么？

# java - 在猜谜游戏类中找不到错误

> ID：10285011
> 
> 赞同：0
> 
> 时间：2012-04-23T17:08:55.003
> 
> 标签：java, class

好的，这是猜谜游戏完整代码的一部分。

```
public static void Game(){              //Second page of game with option of continue playing when guessed close enough to answer.
    Scanner scan = new Scanner(System.in);

    GuessingGame testgame=new GuessingGame();

    testgame.Generator();
    int num = testgame.GetGenNum();
    //Produces a random number between 1 and 100 inclusive of 1 and 100

    System.out.println("Guess the target integer which is between 1 and 100 inclusive");

    int guess=scan.nextInt();

    int difference=(guess-num);

    while(guess!=num){
        int yesCounter=0;

        System.out.println("Guess again " +num+" "+difference);
        guess=scan.nextInt();
        difference=(guess-num);

        ///something wrong here, shouldnt repeat if difference too big 
        if(difference<=5||difference>=-5){  //something wrong with the condition, it says its close enough even tho it isnt.    
        while(yesCounter<1){
            System.out.println("Close enough, do you want to keep Guessing? Y/N ");
            yesCounter++;

            String play = scan.nextLine();
            //play=play1;
            while(!(play.equalsIgnoreCase("y")))
            {

                if(play.equalsIgnoreCase("n")){
                    System.exit(1);
                }

                else{
                    if((play.equalsIgnoreCase("y"))){
                        invalid();
                        guess=scan.nextInt();
                    }
                    else{
                        Game();             ///TAKE note as it might restart the game with new random integer
                    }
                }

            }
        }

    }   

    } 
```

输出是：

…………………………………………………………………………………………………………

玩？是/否

是的

猜测 1 到 100 之间的目标整数

50

再猜一次 44 6

44

够近了，你要继续猜吗？是/否

猜测 1 到 100 之间的目标整数

…………………………………………………………………………………………

问题是，当用户猜测一个数字时，条件是如果猜到的数字与生成的数字之间的差异小于或等于5，告诉用户它足够接近，并询问用户是否要继续猜测，但条件不是完成但仍在运行，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:18:50.833

```
while(!(play.equalsIgnoreCase("y")))
        {

            if(play.equalsIgnoreCase("n")){
                System.exit(1);
            }

            else{
                if((play.equalsIgnoreCase("y"))){
                    invalid();
                    guess=scan.nextInt();
 .... 
```

这是不对的，`if((play.equalsIgnoreCase("y")))`永远不可能是真的，因为它所在的循环，如果它是真的，就不能明确地进入。这就是您的问题所在，它总是会重新启动游戏，因为它会在 else 分支中调用 Game()。简而言之，这就是你要做的：

```
boolean _true = true;

while(! _true) {

    if(_true) {
        //impossible
    }
    else {
        Game(); //ALWAYS
    }
} 
```

既然你用作业标记了你的问题，我不会给出完整的更正，但现在你知道哪里出了问题，你应该能够弄清楚你需要改变什么才能进步:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-23T17:14:37.707

您混合了*or*和*and*（注意：您使用的条件`(difference<=5||difference>=-5)`始终是`true`.）。您可以使用以下任何一种

```
if (difference<=5 && difference>=-5) { ... }    # difference is 5 or less 
```

或者

```
if (difference<=-5 || difference>=5) { ... }    # difference is 5 or more 
```

如果您改用以下内容，则可读性更好[`Math.abs(...)`](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#abs%28int%29)：

```
if (Math.abs(difference)<=5) { ... }    # difference is 5 or less 
```

和

```
if (Math.abs(difference)>=5) { ... }    # difference is 5 or more 
```

分别

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-23T17:15:12.747

`if(difference<=5||difference>=-5)`这表示差异是小于 5 还是大于 -5。所有数字都小于 5 或​​大于 -5，所以这**总是**正确的。

我假设你想要的是类似`if(Math.abs(difference)<=5)`. 这将告诉您差异变量的绝对值是否小于或等于 5。

# java - iReport - 在第二页结束的第一页的行

> ID：10285014
> 
> 赞同：3
> 
> 时间：2012-04-23T17:08:58.793
> 
> 标签：java, excel, jasper-reports, ireport

我正在 iReport 3.7.2 中向 Excel 报告。在 iReport 的预览中，它看起来很正常。当我从 Excel 打印报告时，第一页的行在页眉带之前的第二页开头结束。

这些行来自数据库。我究竟做错了什么？

感谢大家的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T16:27:17.380

我找到了问题的解决方案。

当我使用 JExcelAPIExporter 类而不是 JRXlsExporter 时，表单已正确生成。

# c# - 如何声明全局变量？

> ID：10285021
> 
> 赞同：-2
> 
> 时间：2012-04-23T17:09:27.520
> 
> 标签：c#

我对变量声明中的内存管理有疑问。

在我的班级中，我有大约 20 种方法，我在整个班级中使用了大约 50 个变量。

我在类开始时全局声明了所有变量。

这是正确的做法吗？或者哪个更好......使用结构或其他任何东西？？？

下面显示一个基本示例，我需要使用优化我的内存。

```
 class Program
    {
        static  int a, b, c, d;           //----> Here am declaring , i need any other way
        static void Main(string[] args)
        {
            a = 10;
            b = 20;
            c = 30;
            d = 40;

            int result = add(a, b, c, d);
            Console.WriteLine(result);
            Console.ReadLine();
        }
        public static int add(int w, int x, int y, int z)
        {
            return w + x + y + z;
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T17:18:30.013

您的类级变量仅在单个方法中使用，因此仅在该方法的范围内声明它们：

```
static void Main(string[] args)
{
    var a = 10;
    var b = 20;
    var c = 30;
    var d = 40;

    int result = add(a, b, c, d);
    Console.WriteLine(result);
    Console.ReadLine();
} 
```

作为一个经验法则，让你的变量尽可能地接近它们的用途。任何时候必须扩大范围，退后一步考虑结构。不要只是盲目地将变量向上移动。

您是否有理由尝试优化代码的资源消耗？很有可能，特别是在这种简单的情况下，编译器已经做得很好了。除非您看到实际问题，否则不要过早优化。这通常会导致无法管理的代码。

另外，这是一个旁注，因为我知道这是一个人为的例子......有意义的变量*名*非常重要。有意义的名称还可以帮助您理解和识别所需的变量范围。如果调用了一个变量，`a`那么这不会为您提供任何有关其含义的上下文。但是，如果名称告诉您它的含义，那么您可以更容易地想象代码中的哪些上下文实际上负责该值，从而更好地定义范围。

# cakephp - Cake PHP 1.2 对应用程序的管理修订。前缀/管理员路由？

> ID：10285026
> 
> 赞同：1
> 
> 时间：2012-04-23T17:10:01.363
> 
> 标签：cakephp, admin, cakephp-1.2

目前，Auth 组件已用于锁定未登录的任何人对应用程序的访问。但是 users_controller 的添加操作已通过路由提供，以便他们可以“注册”。（**重点是任何人都可以注册以访问应用程序的功能，但我需要实现一个唯一的管理员用户**）

```
Router::connect('/register', array('controller' => 'users', 'action' => 'add')); 
```

因此，在views/pages/home.ctp 上放置了一个“注册”链接以及一个登录表单：

```
<p>
     Only takes about 1 minute to <?php echo $html->link('register', '/register'); ?> and its free.
   </p>

   <div id="login">

    <h2>Login</h2>

   <?php
    if  ($session->check('Message.auth')) $session->flash('auth');
    echo $form->create('User', array('action' => 'login'));
    echo $form->input('username', array('value' => 'billy'));
    echo $form->input('password', array('value' => 'billy'));
    echo $form->end('Login');
   ?>

   </div> 
```

**视图/元素/header.ctp：**

```
 <?php if($html->loggedIn()): ?>
        <ul class="right">
          <li><?php echo $html->link('Log Out', '/users/logout'); ?></li>
              </ul>
    </div>
        <?php endif; ?>
    <!-- end nav --> 
```

我的大问题是我需要找到一种简单的方法，最好没有 ACL 将 users_controller 的编辑操作和删除操作分开，这样只有管理员才能编辑和删除用户。

我的 users 表的数据库结构需要一个唯一的用户名（VARCHAR）和一个唯一的 ID（INT）

有没有什么简单的方法可以让我在登录表单上进行检查，如果输入的用户名字符串是“admin”或者“id”的值是否等于 1，那么只允许这个唯一的“admin”用户访问用户控制器的编辑和删除操作？我想可能会涉及到一些路由。

还是在核心中激活 cake_admin 用户是一个可行的选择？

我可以根据要求提供更多我的代码。请记住我正在使用 1.2 版

**users_controller.php：**

```
function edit($id = null) 
    {
    if(!$this->Session->read('Auth.User.admin') == 1) {
       // Not an admin user, go back where we came from
       $this->redirect($this->referer());
    }
    $this->idEmpty($id, 'index');

        if (!empty($this->data)) 
        {
            if ($this->User->save($this->data)) 
            {
        $this->flashSuccess('The User has been saved', 'index');
            } 
            else 
            {
        $this->flashWarning('The User could not be saved. Please, try again.');
            }
        }
        if (empty($this->data)) 
        {
            $this->data = $this->User->read(null, $id);
        }

    }

    function delete($id = null) 
    {
 if(!$this->Session->read('Auth.User.admin') == 1) {
       // Not an admin user, go back where we came from
       $this->redirect($this->referer());
    }
           $this->idEmpty($id, 'index');

        if ($this->User->del($id)) 
        {
      $this->flashSuccess('User Deleted', 'index');
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T19:23:23.277

请注意，我只会在较小/私人应用程序中推荐以下解决方案。较大的应用程序/企业应用程序应该真正在 ACL 上运行。

话虽如此，您可以做的是使用管理员路由和小的数据库调整。

1.  `Routing.prefix`通过取消注释中的行来启用管理路由前缀`app/config/core.php`
2.  `BOOLEAN`调整您的用户表以保存一个名为`admin`（默认值为 0）的附加类型字段。
3.  将`admin`管理员用户的字段值设置为 1。

然后像这样创建您的编辑/删除功能：

```
function admin_edit($id = null) {
    if(!$this->Session->read('Auth.User.admin') == 1) {
       // Not an admin user, go back where we came from
       $this->redirect($this->referer());
    }

    // Rest of your logic goes here
} 
```

# asp.net-mvc - 存储用户定义的配置设置以供其他操作使用

> ID：10285028
> 
> 赞同：-1
> 
> 时间：2012-04-23T17:10:08.973
> 
> 标签：asp.net-mvc

在我当前的网络应用程序中，我希望允许用户修改一些自然语言解析设置的设置。

但是，我对如何传递这些设置感到困惑——用户将从主页转到设置页面，并在提交表单时将用户带回主页，在那里他们可以愉快地搜索。

相关代码为：

```
 public ActionResult Settings(Configuration configuration)
   {
        TempData["configStructure"] = configurationStructure;
        return RedirectToAction("ConfigSet", "Home", configuration);
   } 
```

在家庭控制器中：

```
public ActionResult ConfigSet(Configuration configuration)
{            
    return View("Index");
} 
```

我正在生成一个部分视图：

```
public PartialViewResult Search(string q)
{
    List<Stuff> results = this.Search(q);
    return PartialView("SearchResults", results);
} 
```

部分视图呈现如下：

```
@model MyApp.MySettings.ConfigurationApi

@if (Model == null)
{
    using (Ajax.BeginForm("Search", "Home", new AjaxOptions
    {
        HttpMethod = "GET",
        InsertionMode = InsertionMode.Replace,
        UpdateTargetId = "searchResults",
    }))
    {
        <input type="text" name="q" />
        <input type="submit" value="Search" />
    }
}
else
{
    using (Ajax.BeginForm("Search", "Home", new { configuration = Model }, new AjaxOptions
    {
        HttpMethod = "GET",
        InsertionMode = InsertionMode.Replace,
        UpdateTargetId = "searchResults",
     }))
    {
        <input type="hidden" name="configuration" />
        <input type="text" name="searchString" />
        <input type="submit" value="Search" />
    }
} 
```

基本上，我对如何将这些值从设置页面传递到主页并将设置绑定到该用户感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T04:32:15.000

如果您的用户通过了身份验证，并且如果您希望您的用户在下次访问您的网站时拥有这些设置，您应该考虑使用 Asp.Net Membership Profiles。您还可以选择将设置存储在数据库中。

您可以选择将对象存储在 Session 变量中，但这会让一些人生气。

在将用户重定向到 Home.Index 之前，您还可以选择将设置存储在 ViewBag 中。您可以通过`ViewBag.Settings = configuration`在返回视图之前进行设置来做到这一点。然后您可以`@ViewBag.Settings`从您的视图中访问设置。请注意，此方法是有损的……例如，转到其他页面，您已经丢失了设置。

对于未经身份验证的用户，会话可能是要走的路。

# c++ - C++ - 导致错误的向量

> ID：10285029
> 
> 赞同：0
> 
> 时间：2012-04-23T17:10:15.903
> 
> 标签：c++, vector

下面的类吐出大约 20 个错误，但如果我注释掉矢量项目符号，它似乎一切都很好。我错过了一些明显的错误吗？

```
#include <vector>
#include "SDL.h"
#include "Bullet.h"

#ifndef GAMEDATA_H
#define GAMEDATA_H

class GameData
{
public:
    GameData();
    ~GameData();
    GameData(const GameData& data);
    GameData& operator=(const GameData* rhs);

    vector<Bullet> bullets;

    SDL_Surface* shipimage;
    SDL_Surface* bulletimage;
};

#endif 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T17:11:28.513

`vector`在命名空间内`std`。将您`bullets`的声明修改为：

```
std::vector<Bullet> bullets; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T17:11:40.317

是在`vector`中声明的`namespace std`。将类型更改为`std::vector`，一切都会好的。

在您的源文件中，如果您`std`过度使用成员，您可能会发现声明以下内容很有用：

```
using namespace std; 
```

在任何其他代码行之前。这将允许您在没有限定符的情况下访问`std`成员。`std::`这正是您`std::`在大多数示例中看不到的原因——他们声明了这个指令。

# android - Setting TextView contents from HTML cuts off part of the text

> ID：10285036
> 
> 赞同：0
> 
> 时间：2012-04-23T17:10:41.080
> 
> 标签：android, textview

I'm filling the contents of a `TextView` from an HTML source using `Html.fromHtml` method, but the text appears to be italic for some reason and the first few letters are clipped. I tried `.clearComposingText()` and that didn't help.

Any idea why?

Here's the bastard:

```
 <RelativeLayout android:layout_width="match_parent" android:layout_height="120dip" android:duplicateParentState="false">
        <ScrollView android:layout_width="match_parent" android:layout_height="120dip" android:layout_alignParentLeft="true" android:layout_alignParentTop="true">
            <TextView android:id="@+id/textDetailsScrollable" android:textStyle="normal" android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_marginTop="4dip" android:paddingRight="10dip" />
        </ScrollView>
        <ProgressBar android:layout_height="15dip" android:id="@+id/loadingExtendedData" android:layout_width="15dip" android:indeterminateOnly="true" android:layout_centerInParent="true" />
    </RelativeLayout> 
```

(It's not the `ScrollView`, I tried removing it and it didn't work, neither did padding on any of the elements).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:38:13.083

学到了艰难的方法：**永远不要在 ANDROID 中使用斜体文本**。如果您想去除 HTML 标记，请使用`String.replaceAll("<(.|\n)*?>", "")`.

# c - 如何确定两个相似函数的效率更高

> ID：10285037
> 
> 赞同：0
> 
> 时间：2012-04-23T17:10:43.987
> 
> 标签：c, visual-studio-2008, winapi, visual-c++

我有两个执行相同功能的功能，但以不同的方式实现。我想使用两者中高效的一个。

我可以在文件中编写`Timestamp`进入函数之前和退出函数之后的内容。但我想知道是否有更好的方法来解决上述问题。

我看到了`profilers`，`VerySleepy, Visual Studios 2008 C++ Profiler`但是他们生成的信息是什么时候调用了哪个函数。（也许我在使用它们时出错了）。还想知道是否存在类似`Valgrind`Linux 上的 Visual C++ 的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:16:30.470

如果你真的只想比较这两者，那么就做这`Timestamp`件事，但每个函数调用 100 万次，然后比较聚合时间。

```
start timer
for i = 1 to 1m, call function
stop timer 
```

这种方法假定函数的执行时间不依赖于它被调用的次数，即第一次调用它所花费的时间与任何后续调用的时间一样长。

如果您需要更详细的分析信息，有[很多选择](https://stackoverflow.com/questions/292457/profiler-for-visual-studio-2008-c)。

# objective-c - 应用程序在重新启动时行为不正确

> ID：10285045
> 
> 赞同：0
> 
> 时间：2012-04-23T17:11:22.653
> 
> 标签：objective-c, ios, relaunch

因此，我正在编写的应用程序允许用户从他们的相机胶卷上传照片，并显示在 UIImageView 中。我有一个“保存”按钮，可以在按下时保存图像。我还有一个“编辑”按钮，当点击它时，它允许用户点击照片，它将被删除。这就是我遇到问题的地方。

在测试运行时，我添加了三个图像，点击保存按钮，然后删除它们，它们完美删除。我可以完全关闭并重新启动应用程序，图像不再存在。但是，如果我添加三张图片，点击保存按钮，然后关闭并重新启动应用程序，然后尝试删除照片，它根本不起作用。图像从屏幕上消失，但在重新启动时再次加载。很奇怪。我对Objective-C完全陌生，我很惊讶我竟然做到了这一点，所以我在弄清楚如何从数组中删除它时遇到了问题。

我有`NSLog(@"User Clicked Yes. Deleting index %d of %d", alertView.tag, [array count]);`ym 代码，当我在关闭应用程序之前删除它时，它显示数组计数中有对象。当我再次从 Xcode 运行它并尝试删除已保存的图片时，它表明数组计数 = 0。重新启动时对象不在数组中。所以，问题是数组中的对象没有被正确保存。我不知道为什么不，我以为我正确地保存了它们。这就是我将它们添加到数组中的方式：

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingImage:(UIImage *)img editingInfo:(NSDictionary *)editInfo {
    if (imageView.image == nil) {
        imageView.image = img;

        [self.array addObject:imageView];

        [picker dismissModalViewControllerAnimated:YES];
        [self.popover dismissPopoverAnimated:YES];

        return;

    }

    if (imageView2.image == nil) {
        imageView2.image = img;
        NSLog(@"The image is a %@", imageView);
        [self.array addObject:imageView2];

        [picker dismissModalViewControllerAnimated:YES];
        [self.popover dismissPopoverAnimated:YES];

        return;
    }
   ...
     ...
-(IBAction)saveButtonPressed:(id)sender {
    NSString *docsDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask,YES) objectAtIndex:0];

    NSLog(@"Image view array before saving = %@", self.array);

    for (UIImageView *imageViewToSave in self.array) {

        NSInteger tag = imageViewToSave.tag;
        UIImage *image = imageViewToSave.image;
        NSString *imageName = [NSString stringWithFormat:@"Image%i.png",tag];

        NSString *imagePath = [docsDir stringByAppendingPathComponent:imageName];

        NSLog(@"Saving %@ to %@", image, imagePath);

        [UIImagePNGRepresentation(image) writeToFile:imagePath atomically:NO];
    }
    NSLog(@"Save Button Pressed");
} 
```

我认为这会保存放入数组中的对象，但显然不是。我不知道该怎么做。

仅供参考，我将我的 .h 和 .m 文件扔到了 wiki 中。这是我的整个 .h 文件：github.com/Joey502/Test-Thing/wiki/.h-Class-File 这是我的整个 .m 文件：github.com/Joey502/Test-Thing/wiki/.m-类文件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:51:15.537

问题出在您的`viewDidLoad`方法中，您已经初始化`self.array`，但是在将图像加载到您`UIImageView`的 s 时，您忘记将它们添加到数组中，这就是删除功能不起作用的原因。您的删除函数正在尝试从空数组中删除一个对象。

在您的`if`语句中，您需要添加`UIImageView`to `self.array`（注意：您需要更改`self.array`为 a`NSMutableArray`才能使此特定方法起作用）

```
if (!imageView.image) {
    imageView.image = loadedImage;
    [self.array addObject:imageView];
} 
else if (!imageView2.image) {
    imageView2.image = loadedImage;
    [self.array addObject:imageView2];
} 
```

等等。

# android - showDialog deprecated. What's the alternative?

> ID：10285047
> 
> 赞同：100
> 
> 时间：2012-04-23T17:11:35.820
> 
> 标签：android, dialog

Is there something else that should be called?

```
showDialog(TIME_DIALOG_ID); 
```

It's in [this tutorial](http://developer.android.com/resources/tutorials/views/hello-timepicker.html) but says *deprecated* in Eclipse.

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-12-21T12:34:15.007

来自[http://developer.android.com/reference/android/app/Activity.html](http://developer.android.com/reference/android/app/Activity.html)

> public final void showDialog (int id) 在 API 级别 1 中添加
> 
> 此方法在 API 级别 13 中已弃用。请改用带有 FragmentManager 的新 DialogFragment 类；这也可以通过 Android 兼容包在旧平台上使用。
> 
> 不带任何参数的简单版 showDialog(int, Bundle)。只需使用空参数调用 showDialog(int, Bundle)。

**为什么**

*   显示对话框窗口的片段，浮动在其活动窗口的顶部。该片段包含一个 Dialog 对象，它会根据片段的状态适当地显示该对象。对话框的控制（决定何时显示、隐藏、关闭它）应该通过这里的 API 来完成，而不是直接调用对话框。
*   这是一个很好的讨论 [Android DialogFragment vs Dialog](https://stackoverflow.com/questions/7977392/android-dialogfragment-vs-dialog)
*   另一个很好的讨论 [DialogFragment 优于 AlertDialog](https://stackoverflow.com/questions/13765127/dialogfragment-advantages-over-alertdialog)

**怎么解决？**

*   [http://android-developers.blogspot.in/2012/05/using-dialogfragments.html](http://android-developers.blogspot.in/2012/05/using-dialogfragments.html)

**更多的**

*   [http://developer.android.com/guide/topics/fundamentals/fragments.html](http://developer.android.com/guide/topics/fundamentals/fragments.html)
*   [http://developer.android.com/training/basics/fragments/index.html](http://developer.android.com/training/basics/fragments/index.html)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-23T17:13:00.877

From [`Activity#showDialog(int)`](http://developer.android.com/reference/android/app/Activity.html#showDialog%28int%29):

> **This method is deprecated.**
> Use the new [`DialogFragment`](http://developer.android.com/reference/android/app/DialogFragment.html) class with [`FragmentManager`](http://developer.android.com/reference/android/app/FragmentManager.html) instead; this is also available on older platforms through the Android compatibility package.

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-07-16T15:17:37.960

要显示对话框，可以使用以下代码。这是为了显示一个带有多个复选框的简单 AlertDialog 框：

```
AlertDialog.Builder alertDialog= new AlertDialog.Builder(MainActivity.this); .
            alertDialog.setTitle("this is a dialog box ");
            alertDialog.setPositiveButton("ok", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub
                    Toast.makeText(getBaseContext(),"ok ive wrote this 'ok' here" ,Toast.LENGTH_SHORT).show();

                }
            });
            alertDialog.setNegativeButton("cancel", new DialogInterface.OnClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which) {
                    // TODO Auto-generated method stub
                        Toast.makeText(getBaseContext(), "cancel ' comment same as ok'", Toast.LENGTH_SHORT).show();

                }
            });
            alertDialog.setMultiChoiceItems(items, checkedItems, new DialogInterface.OnMultiChoiceClickListener() {

                @Override
                public void onClick(DialogInterface dialog, int which, boolean isChecked) {
                    // TODO Auto-generated method stub
                    Toast.makeText(getBaseContext(), items[which] +(isChecked?"clicked'again i've wrrten this click'":"unchecked"),Toast.LENGTH_SHORT).show();

                }
            });
            alertDialog.show(); 
```

## 标题

而如果您使用 showDialog 函数根据传递的参数显示不同的对话框或任何内容，您可以创建一个 self 函数并可以在该`onClickListener()`函数下调用它。就像是：

```
 public CharSequence[] items={"google","Apple","Kaye"};
public boolean[] checkedItems=new boolean[items.length];
Button bt;
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    bt=(Button) findViewById(R.id.bt);
    bt.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            display(0);             
        }       
    });
} 
```

并在函数定义中添加上面给出的对话框代码。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-07-27T04:03:36.790

这段代码对我有用。易于修复，但可能不是首选方式。

```
public void onClick (View v) {
    createdDialog(0).show(); // Instead of showDialog(0);
}

protected Dialog createdDialog(int id) {
    // Your code
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-04-01T12:37:18.430

```
package com.keshav.datePicker_With_Hide_Future_Past_Date;

import android.app.DatePickerDialog;
import android.os.Bundle;
import android.support.v7.app.AppCompatActivity;
import android.view.View;
import android.widget.DatePicker;
import android.widget.EditText;

import java.util.Calendar;

public class MainActivity extends AppCompatActivity {

    EditText ed_date;
    int year;
    int month;
    int day;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        ed_date=(EditText) findViewById(R.id.et_date);

        ed_date.setOnClickListener(new View.OnClickListener()
        {
            @Override
            public void onClick(View v)
            {
                Calendar mcurrentDate=Calendar.getInstance();
                year=mcurrentDate.get(Calendar.YEAR);
                month=mcurrentDate.get(Calendar.MONTH);
                day=mcurrentDate.get(Calendar.DAY_OF_MONTH);

                final DatePickerDialog   mDatePicker =new DatePickerDialog(MainActivity.this, new DatePickerDialog.OnDateSetListener()
                {
                    @Override
                    public void onDateSet(DatePicker datepicker, int selectedyear, int selectedmonth, int selectedday)
                    {
                              ed_date.setText(new StringBuilder().append(year).append("-").append(month+1).append("-").append(day));
                            int month_k=selectedmonth+1;

                    }
                },year, month, day);
                mDatePicker.setTitle("Please select date");
                // TODO Hide Future Date Here
                mDatePicker.getDatePicker().setMaxDate(System.currentTimeMillis());

                // TODO Hide Past Date Here
                //  mDatePicker.getDatePicker().setMinDate(System.currentTimeMillis());
                mDatePicker.show();
            }
        });
    }
}

// Its Working 
```

# javascript - Google 自定义搜索 iFrame 中的样式内容？

> ID：10285060
> 
> 赞同：0
> 
> 时间：2012-04-23T17:12:50.237
> 
> 标签：javascript, iframe, google-custom-search

我正在尝试设置特定 div (#cse-hosted) 的样式，它是 Google CSE iFrame 正文中的第一个 div。我知道您可以使用以下内容通过 JavaScript 变量设置 iFrame 的宽度：

```
var googleSearchFrameWidth = 'xxx'; 
```

但是有什么类似的东西可以让我进入 iFrame 并设置 div 的样式吗？

我一直在网上搜索，但没有找到任何解决方案，所以有可能没有办法做我希望的事情，但是......

无论如何，我很抱歉这么突然，但如果可能的话，我宁愿不放弃任何其他内容......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:15:13.650

您不能设置不在当前页面上的内容（没有 javacsript），也不能使用 javascript 跨域。除非您可以访问 iframe 的代码，否则您将无能为力。

# android - 保存游戏状态 Android

> ID：10285064
> 
> 赞同：3
> 
> 时间：2012-04-23T17:13:01.437
> 
> 标签：android, save, state

我不确定我应该如何保存我正在开发的游戏的游戏状态。我应该保存一个包含所有游戏信息的实例/对象吗？如果是，如何？或者我应该将所有相关信息保存在 .txt 文件中，并在需要时保存/加载信息？

你是怎么做到的？你如何看待我的建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T17:21:04.087

除非您将其序列化并将其保存到某个文本/二进制/数据库文件中，否则您无法保存实例/对象。因此，您的两个选项是相同的。

您需要保存的是重建游戏状态所需的所有信息。您可能可以从这里获得一些信息。

如果您只有一小部分固定变量来定义您的游戏状态，请使用 SharedPreferences。

如果您想保留多个状态和/或保存更复杂，请使用一些文本 (xml, json, ...)/binary/database/.. 表示并存储它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:17:37.610

我可以建议使用 Parse。

[https://parse.com/docs/android_guide#objects](https://parse.com/docs/android_guide#objects)

```
The ParseObject

Storing data on Parse is built around the ParseObject. Each ParseObject contains key-value pairs of JSON-compatible data. This data is schemaless, which means that you don't need to specify ahead of time what keys exist on each ParseObject. You simply set whatever key-value pairs you want, and our backend will store it.

For example, let's say you're tracking high scores for a game. A single ParseObject could contain:

score: 1337, playerName: "Sean Plott", cheatMode: false
Keys must be alphanumeric strings. Values can be strings, numbers, booleans, or even arrays and objects - anything that can be JSON-encoded.

Each ParseObject has a class name that you can use to distinguish different sorts of data. For example, we could call the high score object a GameScore. We recommend that you NameYourClassesLikeThis and nameYourKeysLikeThis, just to keep your code looking pretty.

Saving Objects

Let's say you want to save the GameScore described above to the server. The interface is similar to a Map, plus the save method:

ParseObject gameScore = new ParseObject("GameScore");
gameScore.put("score", 1337);
gameScore.put("playerName", "Sean Plott");
gameScore.put("cheatMode", false);
try {
    gameScore.save();
} catch (ParseException e) {
    // e.getMessage() will have information on the error.
}
After this code runs, you will probably be wondering if anything really happened. To make sure the data was saved, you can look at the Data Browser in your app on Parse. You should see something like this:

objectId: "xWMyZ4YEGZ", score: 1337, playerName: "Sean Plott", cheatMode: false,
createdAt:"2011-06-10T18:33:42Z", updatedAt:"2011-06-10T18:33:42Z"
There are two things to note here. You didn't have to configure or set up a new Class called GameScore before running this code. Your Parse app lazily creates this Class for you when it first encounters it.

There are also a few fields you don't need to specify that are provided as a convenience. objectId is a unique identifier for each saved object. createdAt and updatedAt represent the time that each object was created and last modified on the server. Each of these fields is filled in by the server, so they don't exist on a ParseObject until a save operation has completed.

Retrieving Objects

Saving data to the cloud is fun, but it's even more fun to get that data out again. If you have the objectId, you can retrieve the whole ParseObject using a ParseQuery:

ParseQuery query = new ParseQuery("GameScore");
ParseObject gameScore;
try {
    gameScore = query.get("xWMyZ4YEGZ");
} catch (ParseException e) {
    // e.getMessage() will have information on the error.
}
To get the values out of the ParseObject, there's a getX method for each data type:

int score = gameScore.getInt("score");
String playerName = gameScore.getString("playerName");
boolean cheatMode = gameScore.getBoolean("cheatMode");
If you don't know what type of data you're getting out, you can call get(key), but then you probably have to cast it right away anyways. In most situations you should use the typed accessors like getString.

The three special values have their own accessors:

String objectId = gameScore.getObjectId();
Date updatedAt = gameScore.getUpdatedAt();
Date createdAt = gameScore.getCreatedAt();
If you need to refresh an object you already have with the latest data that is on the server, you can call the refresh method like so:

myObject.refresh(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T17:30:41.647

您可以使用 SQLite 数据库来保存游戏中的重要变量。如果游戏从一个类开始，您可以为该类提供两个构造函数，一个从一开始就实例化普通游戏，另一个从游戏中接受所有变量并从保存点创建游戏对象。

这将允许您保存多个游戏（通过将 id 与任何数据一起保存）并且如果您更新游戏（假设您不更改数据库），游戏保存将不会丢失。

快速搜索“构造函数重载”以了解更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-03T03:06:21.920

如果您的游戏不是数据密集型的，并且如果序列化和保存到共享首选项就足够了，您可以查看我编写的库的 GNStateManager 组件，以便轻松存储和检索标记为@GNState 注释的活动的必填字段。使用起来非常简单。也可以保存其他单例类对象状态。有关设置和使用信息，请参见此处：[https ://github.com/noxiouswinter/gnlib_android/wiki/gnstatemanager](https://github.com/noxiouswinter/gnlib_android/wiki/gnstatemanager)

# concurrency - Erlang 中的稀疏世界结构

> ID：10285065
> 
> 赞同：6
> 
> 时间：2012-04-23T17:13:05.780
> 
> 标签：concurrency, erlang

我正在考虑如何将“蚂蚁农场模拟器”从 Erlang 移植到 Erlang。这是基本的纲要：

1) 定义一个 100x100 的“插槽”世界

2）蚂蚁占用一个槽

3) 蚁群占据位置 50,50

4）食物在地图周围随机放置

5）蚂蚁一次移动一个空间寻找食物并将其带回殖民地

6) 一次只能在一个槽中放置一个对象。

这个问题的目标是尽可能保持系统并发。在 Clojure 中，上述问题通过拥有一个代理线程池来解决，每个代理为单个蚂蚁运行 AI。然后这些蚂蚁通过事务更新全局状态。

这是我一直在思考的全球状态。我们如何去构建“游戏世界”？

我的第一个想法是为每个蚂蚁创建一个 Erlang 进程，然后为地图中的每个插槽创建一个进程。要移动，蚂蚁会执行以下操作：

1）蚂蚁告诉它当前的位置“我想向北移动”

2) 插槽向北调用插槽并说“请更新您的内容以现在包含蚂蚁“pid””

3）如果北槽已经有一只蚂蚁，它会发送一个“拒绝”响应，该响应会向下渗透到包含蚂蚁的槽（然后是蚂蚁）。如果更新有效，那么“授权”会沿着链向下发送，并且蚂蚁会更新其内部状态。

我唯一不喜欢这种方法的是，在移动过程中，蚂蚁、它的槽和目标槽都被“锁定”，直到整个事务完成。然后，这会为死锁打开自己的大门。也就是说，两只蚂蚁可能同时试图交换位置，每个位置都在等待另一个位置。

任何人都可以提出更好的解决方案吗？

- -编辑 - -

让我逐步解决死锁问题：

1) Ant 1 请求 slot A “向北传输”到 slot 2 2) Ant 2 请求 slot B “向南传输”到 slot 1 3) Slot 1 向 slot 2 发送传输请求并等待回复 4) Slot 2向 slot 1 发送传输请求并等待回复

从代码的角度来看，这将很容易实现，但也会出现死锁，因为每个插槽只监听来自另一个插槽的回复。我想“正确的方法”可能是在转移过程中自动拒绝所有转移请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T23:24:43.667

让你的蚂蚁向它要移动的位置投掷，请求允许移动。蚂蚁然后等待一个演员响应，告诉它移动是否成功。如果移动成功，蚂蚁会更新自己的状态以指示他在新槽中。如果失败，他将再次执行他的搜索逻辑。如果你最终让 A 和 B 试图交换插槽，你不会陷入僵局，但他们都会认为他们必须寻找其他选择。

如果您的网格被大量占用，您可能希望插槽执行轮询逻辑，将权限分发给相邻的蚂蚁，告诉他们如果他们的逻辑将他们引导到那里，他们可能会进入。（想象一个上面有 50x50-2 蚂蚁的网格，你就会明白为什么这是一个很好的逻辑改变。）

**永远不要**使用电话，除非你绝对、肯定、毫无疑问地没有电话就无法生存。然后，如果同一类型的进程有机会相互调用，或者可以相互调用的类型，则非常努力地摆脱它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T18:55:29.300

我假设当它无法向北移动时，它会尝试不同的方向？那么僵局在哪里呢？

如果该领域非常拥挤，我可以想象饥饿，但不是僵局。

# android - 如何使用 android.intent.category 过滤猴子要测试的特定活动？

> ID：10285067
> 
> 赞同：13
> 
> 时间：2012-04-23T17:13:09.413
> 
> 标签：android, android-intent, monkey, android-monkey

我正在尝试使用**猴子练习**工具对我的 android 应用程序进行压力测试。

默认情况下，该工具将执行具有类别`Intent.CATEGORY_LAUNCHER`或 `Intent.CATEGORY_MONKEY`根据[文档的活动。](http://developer.android.com/guide/developing/tools/monkey.html)

```
package="my.android" 

    <activity android:name=".activities.MyApp">
        <intent-filter>
            <action android:name="android.intent.action.MAIN"/>
            <category android:name="android.intent.category.LAUNCHER"/>
        </intent-filter>
    </activity>        
    <activity android:name=".activities.MyScreen">
        <intent-filter>
            <category android:name="android.intent.category.MONKEY"/>
        </intent-filter>
    </activity>
    <activity android:name=".activities.MySettings"/> 
```

**我不希望 MySettings**被 Monkey 测试。

在我的真实情况下，这是因为该活动会注销。因此，注销后无法重新登录以继续测试其余屏幕，这就是测试的全部想法。

```
./adb shell monkey -p my.android -v 500
:Monkey: seed=0 count=500
:AllowPackage: my.android
:IncludeCategory: android.intent.category.LAUNCHER
:IncludeCategory: android.intent.category.MONKEY
..
    // Allowing start of Intent { cmp=my.android/.activities.MySettings} in package my.android
.. 
```

它应该*拒绝*而不是允许我猜。知道如何避免猴子参加我不想参加的活动吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-20T21:04:31.497

我处理此问题的方法是将以下内容添加到您不希望猴子测试的活动的 onCreate(...) 中：

`if (ActivityManager.isUserAMonkey()) { finish(); }`

这样，如果活动正在被猴子测试，活动就会立即退出。

# php - php: what symbols such as <, > etc should be replaced to display a string on the html page the same way as it was typed

> ID：10285068
> 
> 赞同：0
> 
> 时间：2012-04-23T17:13:12.763
> 
> 标签：php, html, string

A user types any text in the textarea on html page. The string is sent to the server using AJAX and returned back to `<span id="userstring"></span>`. Whatever was typed in the textarea, it is displayed in the span. Everything works fine, but... When a user enters tags with a text, for example **<b>hello</b>**, it displays the bold word hello instead of **<b>hello</b>**.

So, the goal is to make THE MINIMUM CHANGES of the typed string, so it is displayed in span EXACTLY the same way as it was typed.

I decided the problem are < and > symbols, so my plan is replace them with `&lt;` and `&gt;`. In the span area will looks the same way as it was typed. Also, I should care of & symbol so when user types `'&gt;'` it looks `&gt;`, that's why & should be replaced with `&amp;`. Is there anything else I should take care of? I don't insert a string into the mysql db, so I don't take any precautions of ' etc. But, I work with that string so I want to keep minimum changes of the string. Replacing &, < and > only are OK. Did I forget something?

Thank you.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T17:14:28.743

Use [`htmlspecialchars()`](http://php.net/manual/en/function.htmlspecialchars.php)

```
<php
$string = '<b>bold text</b>';
echo htmlspecialchars($string, ENT_HTML5, "UTF-8"); 
?> 
```

If you omit `ENT_HTML5`, it will default to `ENT_HTML401 | ENT_COMPAT`. In the above code, `ENT_COMPAT` is overridden so the quote character (`"`) will not be escaped anymore.

# spring - Whats the key value in the Cache populated via @Cachable

> ID：10285069
> 
> 赞同：0
> 
> 时间：2012-04-23T17:13:21.660
> 
> 标签：spring, caching, ehcache

I have a cache thats populated via @Cacheable as follows

```
 @Cacheable(value = "accountGroupCache")
public List<Acc> getAccInfo(int groupId, String user) 
```

I would like to know what will be the key value pair for this cache? I am using ehcahe to do the caching.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T19:47:38.747

密钥将基于您`getAccInfo()`方法的参数。该值`List<Acc>`将由您的方法返回。

根据[文档](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/cache.html#cache-annotations-cacheable-default-key)：

> 28.3.1.1 默认密钥生成
> 
> 由于缓存本质上是键值存储，因此缓存方法的每次调用都需要转换为适合缓存访问的键。开箱即用，缓存抽象使用基于以下算法的简单 KeyGenerator：
> 
> *   如果没有给出参数，则返回 0。
> *   如果只给出一个参数，则返回该实例。
> *   如果给出了多个参数，则返回从所有参数的哈希计算的键。

查看[DefaultKeyGenerator](http://www.jarvana.com/jarvana/view/org/springframework/spring-context/3.1.0.RELEASE/spring-context-3.1.0.RELEASE-sources.jar!/org/springframework/cache/interceptor/DefaultKeyGenerator.java?format=ok)的源代码，这是它计算“从所有参数的哈希计算的键”的方式：

```
 int hashCode = 17;
    for (Object object : params) {
        hashCode = 31 * hashCode + 
                          (object == null ? NULL_PARAM_KEY : object.hashCode());
    } 
```

# java - Java to WSDL datatypes

> ID：10285075
> 
> 赞同：1
> 
> 时间：2012-04-23T17:14:05.463
> 
> 标签：java, axis2

I'm doing some tests with Axis2 java2wsdl tool, creating little simple web services.

The first I created has a simple add method with two floats as input. The java2wsdl command created the WSDL document with no problem. Next I created another service with a method that returns a String array but I had problems with the WSDL datatypes that the tool generated:

java2wsdl generates :

```
`<xs:element minOccurs="0" name="return" nillable="true" type="xs:anyType"`/> 
```

And with soapUI client I got the error: "Can't serialize type"

I modified it "by hand" to:

```
<xs:element maxOccurs="unbounded" name="return" type="xs:string"/> 
```

And it worked.

The java source code is:

```
package Base;

public interface Base
{
 public String[] getNames();    
} 
```

So, I don't understand why the tool did that mapping (String[] to xs:anyType)

Is there a special way that the java code must be written so java2esdl from axis2 creates the correct datatypes?

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:35:40.393

如果您将类型指定为 xs:anyType，那么您需要使用 xs:type 属性在输入消息中提供确切的 XSD 类型，否则无法识别传入消息的类型。这可能对您有所帮助[http://ssagara.blogspot.com/2011/07/how-to-get-best-use-of-axis2-object.html](http://ssagara.blogspot.com/2011/07/how-to-get-best-use-of-axis2-object.html)

# php - 使用 MySQL 定位和插入精确字段

> ID：10285076
> 
> 赞同：0
> 
> 时间：2012-04-23T17:14:18.240
> 
> 标签：php, mysql, insert

尝试将值插入特定字段。目前正在尝试这样的 MySQL 查询；

```
INSERT INTO tablename  (*column-name-col2+*)
VALUES 500
WHERE (idcolumn) = X 
```

有人建议吗？

当前表格布局：

```
IDCol  |  username1  |  username2 |  username3  | etc

1

2

3

4 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:21:11.987

您需要使用`UPDATE`添加到表中已创建的行中，所以我认为您的代码应该是

```
UPDATE tablename SET columnName='500' WHERE IDCol='X' 
```

# html - Sencha touch 2 中的面板覆盖

> ID：10285085
> 
> 赞同：1
> 
> 时间：2012-04-23T17:14:54.577
> 
> 标签：html, facebook, twitter, panel, sencha-touch-2

我一直在使用 sencha touch 2 开发应用程序。
我在顶部有一个工具栏，其中包含一个按钮。
当我单击此按钮时，我将有一个面板覆盖。在这个面板中，我想要两个项目：

```
 var shareButton = {
                    xtype : 'button',
                    ui: 'action',
                    width:'36px',
                    height:'36px',  
                    handler : function(){ 
                    var panel=Ext.create('Ext.Panel',{
            right: 0,
            top: 20,
            modal: true,
            hideOnMaskTap: true,
            hidden: true,   
            width: 260,
            height:'70%' ,
        styleHtmlContent: true,
            scrollable: true,

items: [
{html:'<a href="https://twitter.com/share" class="twitter-share-button" data-url="https://www.google.com" data-lang="en">Tweet</a></body>',},
{html:'<div ><class="fb-like" data-href="http://test.com" data-send="false" data-layout="button_count" data-width="4" data-show-faces="false"></div>'}]});
    Ext.Viewport.add(panel);
    panel.show();}}; 
```

但这不起作用。
事实上，我希望第一个引导我到 twitter 分享 URL (www.google.com)。
第二个到 facebook 分享“test.com”。

不幸的是，面板中没有显示任何内容。
谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T14:09:48.040

由于在页面加载后调用了叠加层，因此应该再次呈现 facebook 和 twitter 按钮

这是显示叠加层后应添加的代码

```
FB.XFBML.parse();//facebook
$.ajax({ url: 'http://platform.twitter.com/widgets.js', dataType: 'script', cache:true}); //twitter 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T17:31:19.903

这对我有用。唯一的问题是 Facebook 的like 按钮没有大小，所以你看不到它。

确保您的浮动面板不可滚动。如果它是可滚动的，给它一个固定的宽度和高度。

**更新**

这是 Sencha Fiddle 的一个例子：[http ://www.senchafiddle.com/#jgXtj](http://www.senchafiddle.com/#jgXtj)

确保将面板添加到`Ext.Viewport`.

# state - 虚拟物理实验室和状态机

> ID：10285095
> 
> 赞同：0
> 
> 时间：2012-04-23T17:16:16.040
> 
> 标签：state, simulator, state-machine

我想实现一些虚拟物理实验室（模拟器）。例如，导体的串联和并联连接（安培数和电压的测量）。

但主要限制是我应该使用有限状态机来实现（我将使用状态模式）。有人知道在这种情况下如何使用“有限状态机”或在物理实验室中提供状态机的其他应用吗？如果有很多州，我会很高兴:-)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T18:06:48.607

试试 JFLAP [http://www.jflap.org/](http://www.jflap.org/)

非常用户友好和简单。它可以让您模拟 FSM，以及您在正式计算机科学中遇到的几乎所有其他事情。但它并没有真正适用于物理学等。

# c# - 嵌套 ListView ItemDataBound

> ID：10285104
> 
> 赞同：0
> 
> 时间：2012-04-23T17:16:34.887
> 
> 标签：c#, asp.net

尝试为每篇文章渲染带有图片的文章。我试图在 SQL Server 08 中使用 2 个嵌套的 ListView 和 2 个查询，我从我的 2 个 objectdatasources 中获得了 2 个方法...

我的 ListViews 看起来像这样：[http](http://pastebin.com/Lf1Evd1d) ://pastebin.com/Lf1Evd1d 我的代码隐藏是这样的：[http ://pastebin.com/0YebPk15](http://pastebin.com/0YebPk15)

问题是我不太确定如何编写 ItemDataBound。我试图让它使用与数据库中的每张图片连接的 NyhetID 进行渲染。我认为它在数据绑定点是错误的。只是得到一个错误，说我的方法是非通用的并且 ID 有问题......

如果有人对如何为每篇文章渲染带有图片的文章有其他建议，请分享:)

问候 /哈里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:42:08.823

我对您的问题感到困惑，但是`ItemDataBound`对于嵌套控件，该事件的工作方式不应有任何不同。

```
<asp:ListView ID="innerList" runat="server" OnItemDataBound="innerList_ItemDataBound" ...> 
```

在代码隐藏中：

```
protected void innerList_ItemDataBound(object sender, ListViewItemEventArgs e)
{

} 
```

# exe - .lib 文件和反编译

> ID：10285107
> 
> 赞同：0
> 
> 时间：2012-04-23T17:16:42.940
> 
> 标签：exe, decompiling, disassembly, user32

我有一个 .exe，它是从 .for (fortran) 和 .c 源文件的组合编译而来的。

由于图形服务器出现错误，它无法在 Win98 之后的任何设备上运行：

“Ox7e4467a9 的用户 32.dll 中的访问冲突错误”</p>

除非有其他方法可以解决上述错误（？），否则我假设我必须使用更现代的图形服务器从源代码重新编译 .exe。我有所有的文件来做这个吧一个.lib 文件！

是否可以从我拥有的当前 .exe 中提取有关丢失的 lib 文件的任何信息？

可以反汇编.exe，但我不认为我从中获得多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:50:51.307

您可能无法从可执行文件中“剪切” lib 文件。即使您可以以某种方式从中获取代码，标准编译器和链接器也不知道如何链接它，因为它没有所需的链接信息（它们不包含在结果二进制文件中）。

但是，如果您的问题是您的程序可以在 Win98 上运行，但不能在基于 NT 的系统（XP、Vista、Win7）上运行，我认为更容易找出导致程序崩溃的不兼容问题。您提到*访问冲突*发生在 user32.dll 中。在调试器中启动程序，查看崩溃发生的函数。确保您已加载 PDB 符号（以便您可以看到内部非公共函数的名称）。追踪调用了哪个 Win32 API 以及它的参数是什么。试着弄清楚，不能访问的内存应该是什么。

同样，如果没有任何其他信息，也无法帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:23:56.520

一旦集成到图像文件（您的 exe）中，静态绑定到应用程序（由链接器完成）的库（您的 .lib）就无法与您自己的代码分离、区分，因此无法检索通过反编译exe从lib中获取代码。

# php - 通过 curl 和 PHP 提交 JavaScript 点击

> ID：10285113
> 
> 赞同：2
> 
> 时间：2012-04-23T17:17:17.773
> 
> 标签：php, javascript, ajax, curl

我试图在主页上汇总网络，有一些选项按钮，然后是接受按钮和重置按钮，在选择适当的选项后按下接受按钮，显示新内容，

我的问题是，如何通过 curl 发送请求，当我检查 ACCEPT 按钮时，会启动一个 JavaScript 函数，例如

> JavaScript:someFunction();

有人可以指导我该怎么做吗？我怎样才能通过 curl 和 php 做到这一点？或者我应该为此学习一些新技术，我的猜测是，接受按钮正在发送一个 AJAX CALL，

请指导我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:55:45.020

您需要使用 cURL 调用该 ajax url，并设置这些所需的变量以及单击该按钮后设置的正确值。您可以查看 cURL 表单帖子。

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T17:20:43.547

您是否想简单地单击按钮并提交表单？如果是这种情况，您可以使用纯 javascript 做到这一点：

```
document.getElementById('acceptButtonId').click(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T17:59:36.097

单击按钮后，您可以将数据发布到同一页面中。然后使用您发布的变量，您使用 cURL。

# xml - MSMQ 兼容性

> ID：10285116
> 
> 赞同：0
> 
> 时间：2012-04-23T17:17:27.587
> 
> 标签：xml, msmq, compatibility

我想知道一个 VB6 应用程序（使用 MSMQ 版本 1）是否可以使用 C# 应用程序在接收端读取包含 XML（Microsoft 版本 2.0）的消息（使用来自 .NET 4.0 的 MSMQ 版本 5.0/XML） )

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T22:04:46.723

MSMQ 的版本在这里无关紧要，因为所有版本都是兼容的。不过，有一些[小问题](http://blogs.msdn.com/b/johnbreakwell/archive/2007/06/29/the-message-format-has-changed-in-msmq-4-0-so-re-test-all-your-applications.aspx)。此外，您可能会发现测试中的版本之间存在一些不一致，但如果您这样做了，我会感到惊讶。

# java - view.layout() 方法后如何更新视图位置？

> ID：10285118
> 
> 赞同：0
> 
> 时间：2012-04-23T17:17:36.993
> 
> 标签：java, android, layout, view

我正在尝试设置位置以在活动开始时查看。

我发现我的大部分问题是关于在 onCreate 方法中获取布局坐标，所以我将它写在 onWindowFocusChanged 中，坐标不是 0，所以我现在可以使用 layout() 方法设置视图的位置。

我做到了，但视图没有更新它的位置。顺便说一句，在我的日志视图中有新的位置。

我认为有一种方法应该更新视图，请给我一个提示。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:40:27.700

您可以通过使用`getLayoutParams()`和更改边距来获取布局参数，然后再次设置布局参数。

1.  `RelativeLayout.LayoutParams param = View.getLayoutParams();`

2.  根据您的新位置在您的参数中设置边距。

3.  `View.setLayoutParams(param)`.

如果它不能解决您的问题，请回复我，以便我可以尝试其他方法

# c# - 即使 ws 被模拟，如何让用户调用 Web 服务？

> ID：10285121
> 
> 赞同：0
> 
> 时间：2012-04-23T17:17:39.780
> 
> 标签：c#, .net, web-services, impersonation

我有一个应用程序，它基本上是一个 Web 服务，它连接到一个 sql db，它在 Web 配置的模拟标记中具有特定的用户凭据。

**我想知道的是是否可以获取调用此 Web 服务的用户名。**

我的网络配置如下所示：

```
<identity impersonate="true" userName="db_user" password="db_pass" /> 
```

我使用以下凭据发出 http 请求：

```
request.Credentials = new NetworkCredential("request_user", "request_pass"); 
```

在网络服务的网络方法中，我尝试使用以下代码行来获取请求用户，但它们都返回相同的用户，即模拟用户-(

```
System.Security.Principal.WindowsIdentity.GetCurrent().Name //returns db_user
System.Environment.UserName //returns db_user
HttpContext.Current.User.Identity.Name //returns db_user 
```

我说清楚了吗？希望有人可以帮助我，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:44:16.577

将用户名传递给 web 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T22:16:28.977

我所做的是在 IIS 中创建一个新的应用程序池，并使其以访问数据库所需的用户身份运行，然后只模拟 Web 服务。

# ruby-on-rails - 路由错误：未初始化的常量

> ID：10285124
> 
> 赞同：14
> 
> 时间：2012-04-23T17:17:57.367
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routes

我正在尝试为移动 API 设置路由，它应该有一个版本化的 api-path。我已经可以让移动 Auth 工作了，它在**/controllers/api/v1/mobile/**中的一个单独的控制器*AuthController*中实现。

 **使用示例：

```
myapp.com/api/v1/mobile/auth 
```

但是现在我想将我现有的资源控制器注册到这个路径模式作为额外的 api 路由。具体：这将是位于**/controllers/tracker/tasks_controller.rb的***TasksController*。所以我在路由定义中添加了一条*移动路由：*

 ***```
# routes.rb
namespace :tracker, path: 'timetracking' do
  resources :tasks, 'jobs'
end

namespace :api do
  namespace :v1 do
    namespace :mobile do
      resources :auth, :only => [:create, :destroy]

      namespace :tracker do    #added mobile route
        resource :tasks, controller: 'tracker/tasks', as: :mobile_tasks
      end
    end
  end
end 
```

但是当我调用**myapp.com/api/v1/mobile/tracker/tasks**时，它会导致错误消息：

```
Routing Error
uninitialized constant Api::V1::Mobile::Tracker 
```

我特别为这条路线添加了别名**：mobile_tasks**，以避免与上面的原始任务路线发生任何冲突。任何想法，如何为这条路线正确设置控制器？

**更新#1**

将此路由定义为范围而不是命名空间也不起作用。

```
scope "/api/v1/mobile/tracker" do
    resources :tasks, controller: 'tracker/tasks', as: :mobile_tasks
end 
```

但这一次，它甚至没有解析路由路径本身。

```
Routing Error
No route matches [GET] "/api/v1/mobile/tracker/tasks" 
```

我认为这可能是一个问题，我的附加 mobile-api 路由试图指向一个完全不同的 namespace *tracker*。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-23T19:30:07.887

根据[http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing](http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing)你应该使用范围而不是命名空间。

如果你想路由`/admin/posts`到`PostsController`（没有`Admin:: module prefix`），你可以使用：

```
scope "/admin" do
  resources :posts, :comments
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-03-07T10:37:54.217

添加此答案以明确命名空间和范围。

使用命名空间时，它会在指定资源的 URL 路径前添加前缀，并尝试将控制器定位到与命名空间相同的模块下。

```
# config/routes.rb
namespace :admin do
  resources :posts, only: [:index]
end

# rake routes
Prefix Verb URI    Pattern                   Controller#Action
admin_posts GET    /admin/posts(.:format)    admin/posts#index 
```

当我们添加范围时，它只会映射给定范围模式的控制器操作。无需在任何模块下定义控制器。

```
# config/routes.rb
scope :admin do
  resources :posts, only: [:index]
end

# rake routes
Prefix Verb URI    Pattern                   Controller#Action
admin_posts GET    /admin/posts(.:format)    posts#index 
```

请注意，控制器只是没有任何模块命名空间的发布控制器。

如果我们`path`向范围添加一个选项，它将映射到具有指定路径选项的控制器，如下所示

```
# config/routes.rb
scope module: 'admin', path: 'admin' do
  resources :posts, only: [:index]
end

# rake routes
Prefix Verb URI    Pattern                   Controller#Action
admin_posts GET    /admin/posts(.:format)    admin/posts#index 
```

请注意，控制器现在位于管理模块下。

现在，如果我们想更改路径方法的名称来识别资源，我们可以`as`在范围中添加选项。

```
# config/routes.rb
namespace module: 'admin', path: 'admin', as: 'root' do
  resources :posts, only: [:index]
end

# rake routes
Prefix Verb URI    Pattern                  Controller#Action
root_posts GET    /admin/posts(.:format)    admin/posts#index 
```

您可以看到前缀动词的变化。

希望它可以帮助别人。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-23T11:33:22.837

迟到的答案，但仍然可能会有所帮助：

```
scope '/v1' do  
  resources :articles, module: 'v1'
end 
```

控制器

```
# app/controller/v1/articles_controller.rb
class V1::ArticlesController < ApplicationController

end 
```

现在您应该可以访问此网址：

[http://localhost:3000/v1/articles](http://localhost:3000/v1/articles)*****

# deployment - Maven2：在反应堆构建期间更改执行

> ID：10285129
> 
> 赞同：0
> 
> 时间：2012-04-23T17:18:13.057
> 
> 标签：deployment, module, maven-2

我有一个在 maven2 上运行的多模块项目（5 个模块），我想做以下事情：

1.  在 3 个模块中运行 MVN clean deploy

2.  在 2 个模块中运行 MVN 清洁测试。

有没有办法通过一次 Maven 执行来完成这个？

目标是避免部署任何其他项目不需要的模块，从而加快构建速度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:50:45.447

您可以使用配置文件控制哪些项目将跳过部署或测试构建生命周期阶段，并在单个项目的这些配置文件中设置 Maven[部署](http://maven.apache.org/plugins/maven-deploy-plugin/deploy-mojo.html#skip)和[肯定](http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html#skip)插件中的跳过属性。

但是，部署阶段是构建生命周期中的最新阶段，因此您必须使用[Maven Invoker Plugin](http://maven.apache.org/plugins/maven-invoker-plugin/run-mojo.html)之类的东西来生成另一个 Maven 进程。

# qt - 在父 QWidget 区域之外显示子 QWidget

> ID：10285132
> 
> 赞同：2
> 
> 时间：2012-04-23T17:18:29.503
> 
> 标签：qt, visibility, crop, qwidget

为了完成建议，我将 QListWidget 作为 QPlainTextEdit 中的孩子。

建议列表显示在光标下，当行快满时，列表小部件的一部分被文本编辑的边框裁剪。是否有可能强制子小部件显示在父小部件区域之外？

我的一个想法是使文本和列表编辑元素成为“兄弟姐妹”，即将它们添加到同一个父级。但这需要我的事件处理机制（因为我认为这两个元素之间的父子关系）。

我认为必须有一种方法可以实现这一点，因为我研究[了 Katepart 组件](http://kate-editor.org/about-katepart/)并且有 KateCompletionWidget（显示建议）是 KateView 的直接子级，当我运行它（例如 Kate 文本编辑器）时，列表显示在文本编辑边框上.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:38:53.483

不幸的是，孩子无法在父母的 QWidget 矩形之外进行绘画。您的兄弟方法是解决此问题的流行方法。另一种方法是让子级通知父级它想要绘制的内容，但这可能更高级一些，因为您必须重新实现绘制事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:11:04.343

今天我找到了一种可能可行的方法——它基于`setWindowFlags(Qt::ToolTip)`QListWidget 元素的方法。但是，定位和事件处理有一些细微的变化。

# css - CSS 的 background-size:cover 背后的数学原理是什么

> ID：10285134
> 
> 赞同：28
> 
> 时间：2012-04-23T17:18:34.137
> 
> 标签：css, gd

我正在创建一个“图像生成器”，用户可以在其中上传图像并添加文本和/或在其上绘图。输出的图像是固定尺寸（698x450）。

在客户端，当用户上传他们的图像时，它被设置为 698x450 的 div 的背景，背景大小为：cover。这使它很好地填充了该区域。

最终的组合图像由 PHP 使用 GD 函数生成。我的问题是，如何让图像在 PHP 中像在 CSS 中一样缩放。我希望 PHP 脚本的结果看起来与上面的 CSS 中设置的图像相同。有谁知道使用 background-size:cover 的浏览器如何计算如何适当地缩放图像？我想把它翻译成PHP。

谢谢

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-04-23T17:45:15.750

这是封面计算背后的逻辑。

您有四个基本值：

```
imgWidth // your original img width
imgHeight

containerWidth // your container  width (here 698px)
containerHeight 
```

从这些值得出两个比率：

```
imgRatio = (imgHeight / imgWidth)       // original img ratio
containerRatio = (containerHeight / containerWidth)     // container ratio 
```

您想找到两个新值：

```
finalWidth // the scaled img width
finalHeight 
```

所以 ：

```
if (containerRatio > imgRatio) 
{
    finalHeight = containerHeight
    finalWidth = (containerHeight / imgRatio)
} 
else 
{
    finalWidth = containerWidth 
    finalHeight = (containerWidth / imgRatio)
} 
```

...你有一个背景尺寸：封面。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-08-24T19:31:36.317

我知道这是一个非常古老的问题，但我写的答案实际上更干净，通过使用图像之间的比率而不是每个图像本身的比率使用 max 和 mins：

```
var originalRatios = {
  width: containerWidth / imageNaturalWidth,
  height: containerHeight / imageNaturalHeight
};

// formula for cover:
var coverRatio = Math.max(originalRatios.width, originalRatios.height); 

// result:
var newImageWidth = imageNaturalWidth * coverRatio;
var newImageHeight = imageNaturalHeight * coverRatio; 
```

我喜欢这种方法，因为它非常*系统*——也许用词不当——。我的意思是你可以摆脱这些`if`陈述，让它以一种更“数学公式”的方式工作（输入=输出，如果这有意义的话）：

```
var ratios = {
  cover: function(wRatio, hRatio) {
    return Math.max(wRatio, hRatio);
  },

  contain: function(wRatio, hRatio) {
    return Math.min(wRatio, hRatio);
  },

  // original size
  "auto": function() {
    return 1;
  },

  // stretch
  "100% 100%": function(wRatio, hRatio) {
    return { width:wRatio, height:hRatio };
  }
};

function getImageSize(options) {
  if(!ratios[options.size]) {
    throw new Error(options.size + " not found in ratios");
  }

  var r = ratios[options.size](
    options.container.width / options.image.width,
    options.container.height / options.image.height
  );

  return {
    width: options.image.width * (r.width || r),
    height: options.image.height * (r.height || r)
  };
} 
```

### 用法

```
const { width, height } = getImageSize({
  container: {width: 100, height: 100},
  image: {width: 200, height: 50},
  size: 'cover' // 'contain' | 'auto' | '100% 100%'
}); 
```

### 操场

如果您想了解我对*系统的含义，我在*`jsbin` [这里](https://jsbin.com/vecuho/3/edit?js,console)创建了一个（它还有一种我认为在此答案中不需要的方法，但对于通常以外的其他方法非常有用）。*`scale`*

 ** * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-24T12:10:59.877

感谢 mdi 为我指明了正确的方向，但这似乎不太正确。这是对我有用的解决方案：

```
 $imgRatio = $imageHeight / $imageWidth;
    $canvasRatio = $canvasHeight / $canvasWidth;

    if ($canvasRatio > $imgRatio) {
        $finalHeight = $canvasHeight;
        $scale = $finalHeight / $imageHeight;
        $finalWidth = round($imageWidth * $scale , 0);
    } else {
        $finalWidth = $canvasWidth;
        $scale = $finalWidth / $imageWidth;
        $finalHeight = round($imageHeight * $scale , 0);
    } 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-23T17:42:54.067

使用时`background-size: cover`，将其缩放到覆盖整个背景的最小尺寸。

因此，在它比它高的地方更薄，缩放它直到它的宽度与该区域相同。在它比它薄的地方高，缩放它直到它的高度与该区域相同。

当它大于要覆盖的区域时，将其缩小直到适合（如果溢出的高度较少，则缩放到相同的高度，如果溢出的宽度较少，则缩放到相同的宽度）。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-03-16T18:02:25.280

在长时间搜索如何在 div 上缩放和定位背景图像以匹配 html 背景图像同时还支持浏览器调整大小和 div 的临时定位的方法后，我偶然发现了这个 QA，我想出了这个。

[![定位为匹配 html 背景的 div 的背景图像](../Images/ece9b47a197cb85743554056597652b9.png)](https://i.stack.imgur.com/PC8EE.png)

```
:root {
  /* background image size (source) */

  --bgw: 1920;
  --bgh: 1080;

  /* projected background image size and position */

  --bgscale: max(calc(100vh / var(--bgh)), calc(100vw / var(--bgw)));

  --pbgw: calc(var(--bgw) * var(--bgscale)); /* projected width */
  --pbgh: calc(var(--bgh) * var(--bgscale)); /* projected height */

  --bgLeftOverflow: calc((var(--pbgw) - 100vw) / 2); 
  --bgTopOverflow: calc((var(--pbgh) - 100vh) / 2);
} 
```

JS等价物

```
window.onresize = () => {
  const vw100 = window.innerWidth
  const vh100 = window.innerHeight

  /* background image size (source) */

  const bgw = 1920
  const bgh = 1080

  /* projected background image size and position */

  const bgscale = Math.max(vh100 / bgh, vw100 / bgw)

  const projectedWidth  = bgw * bgscale | 0
  const projectedHeight = bgh * bgscale | 0

  const leftOverflow = (projectedWidth  - vw100) / 2 | 0
  const topOverflow  = (projectedHeight - vh100) / 2 | 0

  console.log(bgscale.toFixed(2), projectedWidth, projectedHeight, leftOverflow, topOverflow)
} 
```

尝试使用此代码段调整窗口大小以查看结果。
最好在*全页*视图中查看。提示：打开控制台。

```
window.onresize = () => {
  const vw100 = window.innerWidth
  const vh100 = window.innerHeight
  const bgw = 1920
  const bgh = 1080

  const bgscale = Math.max(vh100 / bgh, vw100 / bgw)

  const projectedWidth = bgw * bgscale | 0
  const projectedHeight = bgh * bgscale | 0

  const leftOverflow = (projectedWidth - vw100) / 2 | 0
  const topOverflow = (projectedHeight - vh100) / 2 | 0

  console.log(bgscale.toFixed(2), projectedWidth, projectedHeight, leftOverflow, topOverflow)
}
```

```
:root {
  /* background image size */
  --bgurl: url('https://i.stack.imgur.com/3iy4y.jpg');
  --bgw: 1000;
  --bgh: 600;

  --bgscale: max(calc(100vh / var(--bgh)), calc(100vw / var(--bgw)));

  --pbgw: calc(var(--bgw) * var(--bgscale));
  --pbgh: calc(var(--bgh) * var(--bgscale));

  --bgLeftOverflow: calc((var(--pbgw) - 100vw) / 2);
  --bgTopOverflow: calc((var(--pbgh) - 100vh) / 2);
}

html {
  background: #000 var(--bgurl) no-repeat center center fixed;
  background-size: cover;
  overflow: hidden;
}

#panel {
  --x: 100px;
  --y: 100px;
  --w: 200px;
  --h: 150px;

  position: absolute;
  left: var( --x);
  top: var( --y);
  width: var(--w);
  height: var(--h);

  background-image: var(--bgurl);
  background-repeat: no-repeat;
  background-position: calc(0px - var(--bgLeftOverflow) - var(--x)) calc(0px - var(--bgTopOverflow) - var(--y));
  background-size: calc(var( --bgscale) * var(--bgw));
  filter: invert(1);
}
```

```
<div id="panel"></div>
```*

# c# - 将预定列表中的随机值分配给 Autopoco 中的种子对象

> ID：10285135
> 
> 赞同：0
> 
> 时间：2012-04-23T17:18:44.980
> 
> 标签：c#, .net, autopoco

我正在使用 Autopoco 为项目生成测试/种子数据。

每个会议对象都会在一年的时间跨度内分配一个随机日期（DefaultRandomDateSource），我还希望从预定义的列表（MeetingTitleSource）中为会议对象分配一个随机标题。

我遇到的问题是会议标题没有按随机时间顺序应用。即：前两周都是“绩效会议”，接下来的两周都是“设计会议”等等。我希望会议标题完全随机分配。

任何人都可以帮忙吗？

这是我创建种子数据的代码

```
//Configure the default properties
        var meetings = AutoPocoContainer.Configure(x =>
        {
            x.Conventions(c => { c.UseDefaultConventions(); });
            x.Include<Meeting>()

                .Setup(c => c.StartDate).Use<DefaultRandomDateSource>
                (DateTime.Parse("21/Mar/2013"),
                 DateTime.Parse("21/Mar/2012"))
                .Setup(c => c.EndDate).Use<MeetingEndDateSource>(0, 8)
                .Setup(c => c.Title).Use<MeetingTitleSource>()

        });

        _meetings = meetings.CreateSession().List<Meeting>(MeetingRecords).Get(); 
```

这是默认日期源

```
 public class DefaultRandomDateSource : DatasourceBase<DateTime>
{
    private DateTime _MaxDate { get; set; }
    private DateTime _MinDate { get; set; }
    private Random _random = new Random(1337);

    public DefaultRandomDateSource(DateTime MaxDate, DateTime MinDate)
    {
        _MaxDate = MaxDate;
        _MinDate = MinDate;
    }

    public override DateTime Next(IGenerationContext context)
    {
        var tspan = _MaxDate - _MinDate;

        var rndSpan = new TimeSpan(0, _random.Next(0, (int)tspan.TotalMinutes), 0);

        return _MinDate + rndSpan;
    }
} 
```

这是 MeetingTitle 源

```
 public class MeetingTitleSource : DatasourceBase<string>
{
    private Random mRandom = new Random(1337);

    public override string Next(IGenerationContext context)
    {

        return MeetingNames[mRandom.Next(0, MeetingNames.Length)];
    }

    private static string[] MeetingNames = new String[]{
        "Design meeting",   
        "Strategy Meeting", 
        "Performance review",   
        "Appraisal",
        "Disciplinary",
        "Project review",
        "Client Meetings",
        "Budget Meeting",
        "Financial Update",
        "CompStat",
        "Project Update"                     
    };
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:45:26.123

您使用的是相同的种子，因此每次都会生成相同的值序列。

系统时钟的纳秒值通常用作种子，您可能想尝试一下。

# asp.net - IE6 及以上版本禁用按钮的前景色

> ID：10285137
> 
> 赞同：1
> 
> 时间：2012-04-23T17:19:01.270
> 
> 标签：asp.net, html, css

如何在 IE6 及更高版本的禁用模式下更改 asp 按钮的前景色

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:43:21.607

**[参考](http://www.456bereastreet.com/lab/styling-form-controls-revisited/disabled/)**

## CSS

```
[disabled]#DisabledButton
{
    color: #933;
    background-color: #ffc;
} 
```

* * *

## 标记

```
<asp:Button ID="DisabledButton" runat="server" Text="Hello Guest" 
                                                      Enabled="false" /> 
```

# android - 在 Android 中使用三星中的特殊代码访问菜单

> ID：10285144
> 
> 赞同：1
> 
> 时间：2012-04-23T17:19:35.057
> 
> 标签：android

*如果您使用三星，您可以使用##* 197328640##*代码*访问特殊菜单。此代码提供了有关电话的一些信息。我需要这些信息中的一些网络参数。例如，sim id、gsm 运营商信息、带宽等。这对于三星或三星的某些型号（三星 Galaxy s i9000 或 sII 等）是特殊的

您可以无权限访问此菜单。我的意思是，您不需要成为 root 用户。它被称为“服务模式”这里也是这个菜单的图片

![在此处输入图像描述](../Images/e79329bea4ad2e139c4fe41dc9fb99d9.png)

有没有办法以编程方式访问此菜单..？因为我真的需要这些信息来做一个项目。也许我需要一些来自三星的特殊 api 或什么......？

# c++ - 如何在类声明之外定义嵌套在模板类中的模板类的方法的特化？

> ID：10285145
> 
> 赞同：2
> 
> 时间：2012-04-23T17:19:37.103
> 
> 标签：c++, templates, template-specialization

以下给了我几个编译错误：

```
error C2995: 'void A<T>::B<Q>::func(void)' : function template has already been defined
error C3855: 'A<T>::B<Q>': template parameter 'Q' is incompatible with the declaration 
```

如果没有类声明中的定义，我怎么能做到这一点？

```
template<typename T>
struct A
{
    template<typename Q>
    struct B
    {
        void func();
    };
};

template<typename T>
template<typename Q>
void A<T>::B<Q>::func()
{
}

template<typename T>
template<>
void A<T>::B<int>::func()
{
} 
```

## 编辑：

根据 14.7.3 §16，如果嵌套的类模板不是特化的，则它不能被特化。但是，这让我想知道为什么嵌套类专业化在外部类声明中完全定义时会起作用，如下所示：

```
template<typename T>
struct A
{
    template<typename Q>
    struct B
    {
        void func(){}
    };

    template<>
    struct B<int>
    {
        void func(){}
    };  
}; 
```

也许这只是 VS2010 允许我做一些我不应该做的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T18:51:22.833

问题在于您需要能够在使用类（或结构）时声明模板化类型。

因此，如果您有一个模板化的嵌套类，则需要在类本身中设置其类型，因为您无法从“外部”执行此操作。
例如：

```
template<typename T>
struct A
{
    template<typename Q>
    struct B
    {
        void func(){}
    };
}; 
```

现在，假设你想声明一个类型`A<int>`为`B<int>`... 你会怎么做？

```
A<int>::B<int> a; //this syntactically would mean a is of type B<int>
A<int,int> a; //this would mean A is a templated class with 2 templated types 
```

所以，你不能真正`B`在声明中访问。
因此，`B`的类型必须在 A 类中设置。

**[嵌套类模板](http://msdn.microsoft.com/en-us/library/71dw8xzh%28v=vs.80%29.aspx)**

# c++ - 我对 c++ 中的 fgets 有疑问

> ID：10285148
> 
> 赞同：2
> 
> 时间：2012-04-23T17:20:00.840
> 
> 标签：c++, file, fgets

我做一个小练习来读取一个包含一个长字符串的文件并将其加载到一个字符串数组中。到目前为止，我有：

```
char* data[11];
char buf[15];
int i = 0;

FILE* indata; 
indata = fopen( "somefile.txt", "r" );
while( i < 11)
{
    fgets(buf, 16, indata);
    data[i] =  buf;
    i++;
}

fclose( indata ); 
```

somefile.txt: “啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊”

ETC..

这读入 15 个字符，将该字符串添加到数组并获取下一个 15。问题是数组总是等于最后一个字符串，所以如果最后一个字符串是“ccccv”整个数组，data[0] = “ccccv” , data[1] = "ccccv", data[2] = "ccccv" 等等。

有谁知道为什么会发生这种情况以及是否有更好的方法来做到这一点？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:26:16.577

中的每个指针都`data`将指向同一个内存区域，即`buf`. 您需要使用`strcpy`+ `malloc`。

也好像你有一个“轻微的”缓冲区溢出。`buf`大小为 15，您正在阅读 16 个字符。

# memory-leaks - 来自 CTFramesetterCreateWithAttributedString 的 CoreText 内存泄漏

> ID：10285149
> 
> 赞同：1
> 
> 时间：2012-04-23T17:20:03.187
> 
> 标签：memory-leaks, core-text

我遇到了一个有问题的泄漏 - 感谢 Instruments - 似乎来自 CTFrameSetterCreateWithAttributedString。调用堆栈如下。

```
1 CoreText -[_CTNativeGlyphStorage prepareWithCapacity:preallocated:]
2 CoreText -[_CTNativeGlyphStorage initWithCount:]
3 CoreText +[_CTNativeGlyphStorage newWithCount:]
4 CoreText TTypesetterAttrString::Initialize(__CFAttributedString const*)
5 CoreText TTypesetterAttrString::TTypesetterAttrString(__CFAttributedString const*)
6 CoreText TFramesetterAttrString::TFramesetterAttrString(__CFAttributedString const*)
7 CoreText CTFramesetterCreateWithAttributedString 
```

生成此调用堆栈的代码是：

```
CFAttributedStringRef attrRef = (CFAttributedStringRef)self.attributedString;
CTFramesetterRef framesetter = CTFramesetterCreateWithAttributedString(attrRef);
CFRelease(attrRef);
...
CFRelease(framesetter); 
```

self.attributedString 在其他地方发布。我觉得我正确地发布了其他所有内容......鉴于这一切，泄漏可能来自哪里？这对我的目的来说相当重要——每次 6-10 MB。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T11:06:00.220

事实证明，通过不将 ivar 用于 CFMutableArrayRef，这个问题得到了实质性的解决。我们使用的是 CoreText 的 Akosma Obj-C 包装器，并且在 AKOMultiColumnTextView 类中有一个 CFMutableArrayRef _frames ivar - 由于某种原因 - 即使在 CFRelease 调用之后它仍然存在。没有 _frames ivar 有点贵，但显着提高了内存使用率。感谢 Neevek 的贡献。

# c# - WCF CustomBinding 客户端使用的 JAVA Web 服务 - 响应时出现 SAML 证书错误 - 找不到证书？

> ID：10285152
> 
> 赞同：0
> 
> 时间：2012-04-23T17:20:13.180
> 
> 标签：c#, java, wcf, web-services, x509certificate

从基于 JAVA 的服务（使用我正在测试的 SOAP UI 设置的测试工具）的响应中获取以下异常。

在客户端，我使用 WCF 服务和 CustomBinding 使用以下配置。我在服务客户端上实现 IClientMessageInspector 和 IEndpointBehavior 只是为了在退出时编辑 SOAP 标头。这被服务器接受并且正在发送正确的响应。WCF 服务似乎无法处理它

我无权访问该服务的源代码，只有 SoapUI 中的测试工具

```
//Load the certificate from a file
        X509Certificate2 certificate =
            new X509Certificate2(@"D:\certs.pfx",
                                 "password");

        //Specify the address to be used for the client.
        EndpointAddress address = new EndpointAddress("https://servername:8089/site/ws");

        BasicHttpBinding bTHttpBinding = new BasicHttpBinding(BasicHttpSecurityMode.TransportWithMessageCredential);                        

        BindingElementCollection bec = bTHttpBinding.CreateBindingElements();
        TransportSecurityBindingElement tsp = bec.Find<TransportSecurityBindingElement>();                        
        HttpsTransportBindingElement httpsBinding = bec.Find<HttpsTransportBindingElement>();            
        TextMessageEncodingBindingElement encoding = bec.Find<TextMessageEncodingBindingElement>();            
        httpsBinding.RequireClientCertificate = true;

        CustomBinding binding = new CustomBinding(tsp, encoding, httpsBinding);                  
        binding.CloseTimeout = TimeSpan.FromMinutes(15);
        binding.OpenTimeout = TimeSpan.FromMinutes(15);
        binding.ReceiveTimeout = TimeSpan.FromMinutes(15);
        binding.SendTimeout = TimeSpan.FromMinutes(15);

        // Create the message inspector
        Saml20Extension extentionBehaviour = new Saml20Extension();

        ClientService.enquiryRequestClient client = new enquiryRequestClient(binding, address); 
```

回复异常：

```
Cannot resolve KeyInfo for unwrapping key: KeyInfo 'SecurityKeyIdentifier
(
IsReadOnly = False,
Count = 1,
Clause[0] = X509IssuerSerialKeyIdentifierClause(Issuer = 'CN=test_facility', Serial =        '12342342423')
)
', available tokens 'SecurityTokenResolver
(
TokenCount = 0,
)
'. 
```

我探索过的大道：

*   证书的序列号格式为 8F 23 0c 81 而消息响应格式为 12342342423 - 也许它在商店中找不到证书？它是使用问题名称和序列号还是分别尝试两者以尝试找到匹配项？

*   app.config 中的协商服务凭据属性 - 我似乎无法为代码中的 CustomBinding 设置将其设置为关闭 - 有人知道该怎么做吗？

我真的被这件事难住了，想着回到原点，从头开始做整件事。

使用以下代码在客户端忽略 SSL 证书错误

```
ServicePointManager
.ServerCertificateValidationCallback += 
(sender, cert, chain, sslPolicyErrors) => true; 
```

**SOAP 响应（加密）**

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xenc="http://www.w3.org/2001/04/xmlenc#">
  <SOAP-ENV:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
        <wsse:Security SOAP-ENV:mustUnderstand="1" xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
          <xenc:EncryptedKey Id="EncKeyId-882E1CD1112C4D3FD61335190122478230">
            <xenc:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#rsa-1_5"/>
            <ds:KeyInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
          <wsse:SecurityTokenReference>
            <ds:X509Data>
              <ds:X509IssuerSerial>
                <ds:X509IssuerName>CN=test_vendor</ds:X509IssuerName>
                <ds:X509SerialNumber>1328712805</ds:X509SerialNumber>
              </ds:X509IssuerSerial>
            </ds:X509Data>
          </wsse:SecurityTokenReference>
        </ds:KeyInfo>
        <xenc:CipherData>
          <xenc:CipherValue>Fp63Batmb8JJL/+6l9atqi4hrWCshmhcOlqRFtblVkNIcJH1f1YV4Koh23uZ5OB2nPuq4px16LUQVTv5ZbSnYQfuO9MklSofFX/B1944bd7VBIcy+WyfYOoVSy7kKy80DY8wzUBNtOC0tWwM2vVPuIYRs16ijuF23KtBx1T89Kc=</xenc:CipherValue>
        </xenc:CipherData>
        <xenc:ReferenceList>
          <xenc:DataReference URI="#EncDataId-138"/>
        </xenc:ReferenceList>
      </xenc:EncryptedKey>
      <wsse:BinarySecurityToken EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" wsu:Id="CertId-882E1CD1112C4D3FD61335190122465226" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">MIIBpzCCARCgAwIBAgIETzKMfzANBgkqhkiG9w0BAQUFADAYMRYwFAYDVQQDDA10ZXN0X2ZhY2lsaXR5MB4XDTEyMDIwODE0NTM1MVoXDTE3MDIwODE0NTM1MVowGDEWMBQGA1UEAwwNdGVzdF9mYWNpbGl0eTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAvzdwlxcpwRKGzLvpqYoS4NEbhbx/jV6Z6kyXgJ0IWLZAW20oWmxPwumsqkKr6bWX2NWbGrka6w1e9+iZFBKiBq5zzxJKusCJQtPjuYwjaTGjVTFnixHp9sKnjIEprKyarceG00WzCVdtuI1NpNp8dgemzA6FFt1ESwwELq+rKvECAwEAATANBgkqhkiG9w0BAQUFAAOBgQAokX6HZhhEj7Bfo0Z8ZeoZeYFB8pHrN5A6927cJx17EXWVv0Mwn/+fDgTAhtsN9DB68CFNejox8mM0+KewjsgT4z80YxMHGlpM13z4c8+iMiQcJ7cISScTBaTONOtDqK1WNtci8biNjnLn7+4Z4fw17jlttN0dPHC3fvGywh6TkQ==</wsse:BinarySecurityToken>
      <ds:Signature Id="Signature-136" xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
        <ds:SignedInfo>
          <ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
          <ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
          <ds:Reference URI="#id-137">
            <ds:Transforms>
              <ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
            </ds:Transforms>
            <ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
            <ds:DigestValue>fWmhVWpkcFWreSSpA4DaLWBc6kE=</ds:DigestValue>
          </ds:Reference>
        </ds:SignedInfo>
        <ds:SignatureValue>GmPo9AIJLCrmR7+FIlsYnSCJPZIw5ls3kdSG4/Zv9AwL0eono9XV6cdmXfoHEmhyd3zaF583g14aAtGpJbErKZZ96nNKnjiB0gchghZY7gBDabv94aUJw2q7BehADvFatdgYab/cOp9ONT6yOl4nZ1gzDaAxVh7NvMLoH1EYmiY=</ds:SignatureValue>
        <ds:KeyInfo Id="KeyId-882E1CD1112C4D3FD61335190122465227">
          <wsse:SecurityTokenReference wsu:Id="STRId-882E1CD1112C4D3FD61335190122465228" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
            <wsse:Reference URI="#CertId-882E1CD1112C4D3FD61335190122465226" ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3"/>
          </wsse:SecurityTokenReference>
        </ds:KeyInfo>
      </ds:Signature>
    </wsse:Security>
    <saml:Assertion ID="_54d0c8395de26c3e44730df2c9e8d3e9" IssueInstant="2012-02-17T10:40:36.806Z" Version="2.0" xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion">
      <saml:Issuer>CN=test_facility</saml:Issuer>
      <Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
        <SignedInfo>
          <CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
          <SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"/>
          <Reference URI="#_54d0c8395de26c3e44730df2c9e8d3e9">
            <Transforms>
              <Transform Algorithm="http://www.w3.org/2000/09/xmldsig#enveloped-signature"/>
              <Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"/>
            </Transforms>
            <DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"/>
            <DigestValue>/nNfJuKr83umcry7vguJkSWyfKs=</DigestValue>
          </Reference>
        </SignedInfo>
        <SignatureValue>pVBcgvqr1Ndms5sZXV5cupiC3ADd7kycuEaETuCLzpcJLmGaTsP5NkfCfyIuvYBZe3MjfnOQ81AquFYljw5SPYd8nItqss/9zOzJeZ0aL/bJxfovNBb4cv92nghncXA2MGTWWdH63+FkajlE7x/U81QkCdVBXJRVVXNsR0dMxAY=</SignatureValue>
        <KeyInfo>
          <X509Data>
            <X509Certificate>
              MIIBpzCCARCgAwIBAgIETzKMfzANBgkqhkiG9w0BAQUFADAYMRYwFAYDVQQDDA10ZXN0X2ZhY2ls
              aXR5MB4XDTEyMDIwODE0NTM1MVoXDTE3MDIwODE0NTM1MVowGDEWMBQGA1UEAwwNdGVzdF9mYWNp
              bGl0eTCBnzANBgkqhkiG9w0BAQEFAAOBjQAwgYkCgYEAvzdwlxcpwRKGzLvpqYoS4NEbhbx/jV6Z
              6kyXgJ0IWLZAW20oWmxPwumsqkKr6bWX2NWbGrka6w1e9+iZFBKiBq5zzxJKusCJQtPjuYwjaTGj
              VTFnixHp9sKnjIEprKyarceG00WzCVdtuI1NpNp8dgemzA6FFt1ESwwELq+rKvECAwEAATANBgkq
              hkiG9w0BAQUFAAOBgQAokX6HZhhEj7Bfo0Z8ZeoZeYFB8pHrN5A6927cJx17EXWVv0Mwn/+fDgTA
              htsN9DB68CFNejox8mM0+KewjsgT4z80YxMHGlpM13z4c8+iMiQcJ7cISScTBaTONOtDqK1WNtci
              8biNjnLn7+4Z4fw17jlttN0dPHC3fvGywh6TkQ==
            </X509Certificate>
          </X509Data>
        </KeyInfo>
      </Signature>
      <saml:Subject>
        <saml:NameID Format="urn:oasis:names:tc:SAML:1.1:nameid-format:emailAddress">joe.bloggs@facility.ie</saml:NameID>
      </saml:Subject>
      <saml:Conditions NotBefore="2012-02-17T10:40:21.806Z" NotOnOrAfter="2012-02-17T10:41:06.806Z"/>
    </saml:Assertion>
    <wsa:Action SOAP-ENV:mustUnderstand="1">http://www.xxx.xx/xxxxxxxx/xxxxxxx</wsa:Action>
    <wsa:MessageID SOAP-ENV:mustUnderstand="1">uuid:7700f066-e7d7-4b1e-ab23-11171d9201bd</wsa:MessageID>
  </SOAP-ENV:Header>
  <SOAP-ENV:Body wsu:Id="id-137" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
    <xenc:EncryptedData Id="EncDataId-138" Type="http://www.w3.org/2001/04/xmlenc#Content">
      <xenc:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#tripledes-cbc"/>
      <ds:KeyInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
        <wsse:SecurityTokenReference xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
          <wsse:Reference URI="#EncKeyId-882E1CD1112C4D3FD61335190122478230"/>
        </wsse:SecurityTokenReference>
      </ds:KeyInfo>
      <xenc:CipherData>
        <xenc:CipherValue>
          ue42jSONk/kqp2MtxZbyn95RGTrwKd1jd61vo2O/IegbMZhIvWexQBnKthau0YE5Zwk/oKuJcOMM
          FkK8I165NXhxHjQAKs08USF3U1nwB4ApkPIroNcEWRqKJ1gK7lNrS4OeTVyK1HUWsTRRYHp4UUgb
          CJhOLa+ug74Fm5vj9/zL6Oqezr3TL9Oi5WdU9cweGmOfJ++zcqmcjTyewirVqT4VKZoGCvpRgGVR
          I/7St77lG/2yYMjCboejJbT8Ip2XiLL6ItMA/p+iyePMg4JyvR8v8/0fxF2rkLe2vamEEAab0+l1
          f9pANCCjvCj7giSUhIeLT0QVVa65Y9GzHOMTBxdQAMp6zlSWlpq7EaM1xQNq5cjKENQ3f6gKKBFu
          tZxBqDnRl9+XrD0DcBsVAyqv5d1uLSWIi2Mm9DiF23efGuCYAR2EGu1g81rRdU5Tk4KUMa4QUla5
          p+8jtGmtl2ktMr+3/8lwRqgMzqBKTiMFhHQhHQZe5FnKT/7JvycAKmx4LADOo1i2emc8s7NtsZlO
          OQqRovS2VP1A4uUYMFgAIsT2rLauVxKCZFDjFxLKKhyJLdmSzOophaL9Vr+FAzC7rA0t6J8prNdu
          mnwoYK9Hqly1RR7N9wgTN3TX2FHSlGgHcoJHZB2wBEoFHevQ+N9WNvcaE2w7Z02QdNRUBQBwn/2g
          pLDXf+8+2hNdMMe0xclmvfH1CSaHLuH1HPWJPMsNzNzAC4fFIkqy2XEUcMlQY+AT+fa+r/kqQHog
          L+B39IJtp7BZ811cwNZlbuw3LpE1IntArWjtxyvahJIeEsiKW9UGUIbLiNxtevpsKTlqV+kiY3qn
          acNRQYDQZuNZUka1jyN2pel6/3cdAlHF86bXO0dDX4jL3FXqp5QsoZcMnFu/wsD0dxg4BblsrxbA
          Cn4+LxXFzKR6sHbQXqUm7ROhvkIJRNPe1Bw49LARnTkdG8tMgQ9dYtMAvvZk8OPZnIaTyjwQu7DE
          MARmOKt7Bj/YvTHCH91hc2BzYBEn5vJPcmL705B6Vc0Zn2O+jB+MK87gR7Z4iSNJgvanEZ4897pZ
          YN5WYpf800y2GUYn2y46pwFF
        </xenc:CipherValue>
      </xenc:CipherData>
    </xenc:EncryptedData>
  </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:55:15.923

请公布完整的肥皂信封。

我猜想 WCF 消息安全尝试解析响应。问题是我不确定你是否想要它——据我所知，你有自己的机制来解析 saml。

在这种情况下，您不需要 TransportSecurityBindingElement，https 就足够了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T20:39:12.870

您使用的是哪种证书？自签？它是否部署在 wcf 主机操作系统上的受信任 CA 存储库中？

# jquery - jQuery UI 对话框没有在 IE9 中设置“left”属性

> ID：10285153
> 
> 赞同：0
> 
> 时间：2012-04-23T17:20:17.047
> 
> 标签：jquery, css, jquery-ui, internet-explorer-9

出于某种原因，当我尝试在 IE9 中使用 jQuery 对话框时，它不会对其应用任何`left`属性，将其保留为 0，这使得对话框一直保持在左侧。它适用于所有其他浏览器，包括 IE 7 和 8。

这是初始化和打开对话框的代码：

```
jQuery('#form-holder').dialog({
        autoOpen: false, modal: true, closeOnEscape: true, width: 680, closeText: '', close: closeDialog
    });

jQuery('#form-holder').dialog('open'); 
```

我尝试应用以下代码来手动设置该属性，但它也不起作用：

```
var ua = jQuery.browser;
if (ua.msie && ua.version.slice(0, 3) == "9.0") {
jQuery('div.ui-dialog').css('left', '294px');
} 
```

打开对话框后生成的 HTML：

```
<div tabIndex="-1" class="ui-dialog ui-widget ui-widget-content ui-corner-all ui-draggable ui-resizable" role="dialog" aria-labelledby="ui-dialog-title-form-holder" style="left: 0px; top: 384px; width: 680px; height: auto; display: block; position: absolute; z-index: 1002; outline-width: 0px; outline-style: none; outline-color: invert;"> 
```

jQuery UI 和 IE9 是否存在已知的兼容性问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:30:17.573

试试这个，不需要使用`px`，jQuery 会处理的；

```
if (jQuery.browser.msie && jQuery.browser.version == '9.0') {
      $('div.ui-dialog').css('left', '294');
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T18:20:22.843

开仓后设置仓位：

```
$("#form-holder").dialog( "option", "position", [294,384] ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-11T00:26:01.443

尝试删除传递给 jquery css 函数中顶部参数的值中的引号：

```
if (ua.msie && ua.version.slice(0, 3) == "9.0") {
jQuery('div.ui-dialog').css('left', 294);
} 
```

希望能帮助到你！

# knockout.js - 有没有办法避免敲击时的提交绑定在按下回车键时发送表单？

> ID：10285154
> 
> 赞同：6
> 
> 时间：2012-04-23T17:20:23.740
> 
> 标签：knockout.js

根据文档 (knockoutjs.com/documentation/submit-binding.html)，knockoutjs 的提交绑定的优势在于它捕获了提交表单的替代方式，例如在输入文本框时按下回车键。我的表单上有一个网格，一些用户正在尝试使用 enter 键从一个字段转到下一个字段。发生这种情况时有没有办法避免提交表单？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T18:34:52.777

一种选择是`keypress`在表单上添加一个处理程序，以吸收输入键。它看起来像：

```
<form data-bind="event: { keypress: absorbEnter }, submit: test">
    <div data-bind="absorbEnter: true">
    <input data-bind="value: name">
    <input type="submit" value="Go" />
    </div>
</form> 
```

​ js：

```
var viewModel = {
    name: ko.observable("test"),
    absorbEnter: function(data, event) {
       return event.keyCode !== 13;  
    },
    test: function() {
        console.log("submitting", arguments);        
    }
};
ko.applyBindings(viewModel); 
```

示例：http: [//jsfiddle.net/rniemeyer/FvZXj/2/](http://jsfiddle.net/rniemeyer/FvZXj/2/)

# coffeescript - 为什么我的咖啡脚本方法必须属于该类？

> ID：10285155
> 
> 赞同：0
> 
> 时间：2012-04-23T17:20:26.253
> 
> 标签：coffeescript

我来自使用基于类的 OO 系统的 C#/Java 背景，但我还没有获得 JavaScript/CoffeeScript 原型 OO 系统。我在下面编写了一个 CoffeeScript 类，它允许我根据系统端的偏好显示联系人的姓名。我只能通过使该`joinNonEmpty(stringList, joinText)`方法属于原型并以我在 Java/C# 领域中调用静态方法的方式调用它来使该类工作。

1.  有没有办法可以使用这个方法调用`this.joinNonEmpty(...)`？
2.  你能解释一下为什么我可以`firstLastRender, lastFirstRender and firstOrNickThenLast`用这个来引用构造函数中的方法吗？`joinNonEmpty`但是在调用助手时这些方法不起作用？
3.  这与我如何通过首选项映射找到适当的方法有关吗？

```
prefs = displayNameFormat: "FirstOrNickThenLast"

class DisplayNameRenderer

    constructor: ->
        @prefToRenderMap =
            FirstLast: this.firstLastRender
            LastFirst: this.lastFirstRender
            FirstOrNickThenLast: this.firstOrNickThenLast

    # Why does this method have to be static (a class method)?
    @joinNonEmpty: (stringList, joinText) ->
        nonEmptyStrings = []
        for s in stringList
            nonEmptyStrings.push(s) if s isnt null and s isnt ""
        nonEmptyStrings.join(joinText)

    firstLastRender: (contact) ->
        # TypeError: Object expected.
        joinNonEmpty([contact.firstName, contact.lastName], ' ')

    lastFirstRender: (contact) ->
        # TypeError: Object doesn't support this method or property
        this.joinNonEmpty([contact.lastName, contact.firstName], ', ')

    firstOrNickThenLast: (contact) ->
        # Works correctly.
        DisplayNameRenderer.joinNonEmpty([(if contact.nickname isnt null and contact.nickname isnt "" then contact.nickname else contact.firstName), contact.lastName], ' ')

    render: (contact) ->
        @prefToRenderMap[prefs.displayNameFormat](contact)

contact = firstName: "Jonathan", nickname: "Jonny", lastName: "Appleseed"

dnr = new DisplayNameRenderer()

 # => "Jonny Appleseed"
console.log dnr.render(contact) 
```

感谢您花时间回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T18:56:54.637

`this`(AKA `@`) 在调用函数时确定（例外情况如下）。所以当你这样做时：

```
@prefToRenderMap =
    FirstLast: this.firstLastRender
    LastFirst: this.lastFirstRender
    FirstOrNickThenLast: this.firstOrNickThenLast 
```

您正在`@prefToRenderMap`实例变量中存储对三个函数的未绑定引用，并且`@prefToRenderMap`它本身就是一个对象。然后，您尝试`DisplayNameRenderer`像这样调用实例中的方法：

```
@prefToRenderMap[prefs.displayNameFormat](contact) 
```

一切都崩溃了，因为在错误的上下文中调用了这些方法，而`@`不是他们期望的那样。如果`prefs`是，`'FirstOrNickThenLast'`那么您实际上是在执行此操作：

```
@prefToRenderMap.FirstOrNickThenLast(contact) 
```

和`@`(AKA `this`) 将`@prefToRenderMap`在`firstOrNickThenLast`方法内。但是，当然，`@prefToRenderMap`没有您尝试调用的任何方法，因此您会遇到各种错误。

一种解决方案是使用[粗箭头 ( `=>`)](http://coffeescript.org/#fat_arrow)来定义方法：

> 粗箭头`=>`既可用于定义函数，也可用于将其绑定到 的当前值`this`，就在现场。

所以你可以有这样的事情：

```
joinNonEmpty: (stringList, joinText) ->
    #...

firstLastRender: (contact) =>
    @joinNonEmpty([contact.firstName, contact.lastName], ' ') 
```

一切都会好起来的。这是一个精简的演示，它也会向您展示您的`this`问题：

> [http://jsfiddle.net/ambiguous/RAPJw/1/](http://jsfiddle.net/ambiguous/RAPJw/1/)

您还可以通过按名称引用方法来避免此问题。给定字符串中的方法名称`m = 'some_method'`，您可以在 JavaScript 和 CoffeeScript 中像这样调用该方法`o[m]()`，结果将与您所说的相同`o.some_method()`。更好的结构看起来更像这样：

```
class DisplayNameRenderer
    constructor: ->
        @prefToRenderMap =
            FirstOrNickThenLast: 'firstOrNickThenLast'

    joinNonEmpty: (stringList, joinText) ->
        #...

    firstOrNickThenLast: (contact) ->
        @joinNonEmpty([(if contact.nickname isnt null and contact.nickname isnt "" then contact.nickname else contact.firstName), contact.lastName], ' ')

    render: (contact) ->
        @[@prefToRenderMap['FirstOrNickThenLast']](contact) 
```

注意结构的变化`@prefToRenderMap`以及它在`render`. 以及这种方法的演示：http: [//jsfiddle.net/ambiguous/DFYwu/](http://jsfiddle.net/ambiguous/DFYwu/)

* * *

`ClassName.class_method()`顺便说一句，您可以使用[`constructor`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/constructor)属性代替，而不是在实例方法中说`@constructor.class_method()`：此外，您通常在 CoffeeScript 中使用`@method()`or`@property`而不是`this.method()`and 。`this.property`

# java - 获取一个名称直到运行时才知道的属性

> ID：10285157
> 
> 赞同：-2
> 
> 时间：2012-04-23T17:20:37.250
> 
> 标签：java

我有一个小小的疑问。无论如何要在运行时获取对象吗？

像这样：我有一个类说 Employee 并具有以下属性名称，地址，id

现在我有一个 Employee 对象，但我必须根据特定条件获得其中一个属性。

所以它可能是运行时的 emp.getName() 或 emp.getID() 。

我如何实现这一目标？

问候， 阿米特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:44:13.347

如果您的对象符合用于 getter/setter 命名的 JavaBeans 约定，则来自 apache 的 beanutils 库的[PropertyUtils.getProperty](http://commons.apache.org/beanutils/v1.8.1/apidocs/org/apache/commons/beanutils/PropertyUtils.html#getProperty%28java.lang.Object,%20java.lang.String%29)看起来可以很好地完成这项工作，如[本问题](https://stackoverflow.com/questions/1604141/key-value-coding-for-java)所述。

例如，您可以执行类似的操作

```
String field = "name.lastname"; // or could be read dynamically from user input
Object value = PropertyUtils.getProperty(emp, field); 
```

处理您的嵌套属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:24:13.010

尝试

```
String str = (condition) ? emp.getName() : emp.getID(); 
```

或者

```
final String str;
switch(userSelectedField) {
   case "lastname": str = emp.getName().getLastName(); break;
   case "zipcode": str = emp.getCountry().getState().getZipCode(); break;
   default: /* report an error */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T17:42:12.970

如果有数百个属性（正如您在评论中提到的），那么一种选择是将它们全部存储在`Map<String, SomeType>`. 访问非常简单，为密钥传递一个字符串（或枚举）。主要缺点是它们的值都是 SomeType（实际上可能是 String），您可能真的希望它们中的一些是整数、日期等。在这种情况下，有几个选项：

1.  调用者必须知道类型和解析。例如，地图将日期存储为字符串“01/23/1967”，调用者知道 KEY_BIRTHDAY 应该转换为日期，但您有调用者用来将其转换为日期的实用程序代码。

2.  或者 Map 知道类型，可能通过另一个`Map<String, Class>`具有每个值的类，然后 Map 进行转换。

# multithreading - TPL 和 async/await 之间的区别（线程处理）

> ID：10285159
> 
> 赞同：73
> 
> 时间：2012-04-23T17:20:37.523
> 
> 标签：multithreading, task-parallel-library, async-await, c#-5.0

在线程创建方面 试图理解 TPL & `async`/之间的区别。`await`

我相信 TPL ( `TaskFactory.StartNew`) 的工作方式类似于`ThreadPool.QueueUserWorkItem`它在线程池中的线程上排队工作。当然，除非您使用`TaskCreationOptions.LongRunning`which 创建一个新线程。

我认为`async`/`await`本质上会类似地工作：

TPL：

```
Factory.StartNew( () => DoSomeAsyncWork() )
.ContinueWith( 
    (antecedent) => {
        DoSomeWorkAfter(); 
    },TaskScheduler.FromCurrentSynchronizationContext()); 
```

`Async`/ `Await`:

```
await DoSomeAsyncWork();  
DoSomeWorkAfter(); 
```

将是相同的。从我一直在阅读的内容来看，似乎`async`/`await`只有“有时”会创建一个新线程。那么它什么时候创建一个新线程，什么时候不创建一个新线程呢？如果您正在处理 IO 完成端口，我可以看到它不必创建新线程，否则我认为它必须这样做。我想我对`FromCurrentSynchronizationContext`always的理解也有点模糊。我一直认为它本质上是 UI 线程。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-04-23T18:56:51.603

> 我相信 TPL (TaskFactory.Startnew) 的工作方式与 ThreadPool.QueueUserWorkItem 类似，因为它将线程池中线程上的工作排队。

[差不多](https://blog.stephencleary.com/2010/08/various-implementations-of-asynchronous.html)。

> 从我一直在阅读的内容来看，似乎 async/await 仅“有时”会创建一个新线程。

实际上，它永远不会。如果你想要多线程，你必须自己实现它。有一种新`Task.Run`方法只是 的简写`Task.Factory.StartNew`，它可能是在线程池上启动任务的最常用方法。

> 如果您正在处理 IO 完成端口，我可以看到它不必创建一个新线程，但否则我认为它必须这样做。

答对了。所以像这样的方法`Stream.ReadAsync`实际上会`Task`在 IOCP 周围创建一个包装器（如果`Stream`有 IOCP）。

您还可以创建一些非 I/O、非 CPU 的“任务”。一个简单的例子是`Task.Delay`，它返回一个在一段时间后完成的任务。

`async`/很酷的一点`await`是，您可以将一些工作排​​队到线程池（例如，`Task.Run`），执行一些 I/O 绑定操作（例如，`Stream.ReadAsync`），并执行一些其他操作（例如，`Task.Delay`）......而且它们是所有任务！它们可以等待或组合使用，例如`Task.WhenAll`.

`Task`可以编辑任何返回的方法`await`- 它不必是`async`方法。因此`Task.Delay`，I/O 绑定操作仅用于`TaskCompletionSource`创建和完成任务——线程池上唯一要做的事情是事件发生时的实际任务完成（超时、I/O 完成等）。

> 我想我对 FromCurrentSynchronizationContext 的理解也总是有点模糊。我一直认为它本质上是 UI 线程。

我写[了一篇](http://msdn.microsoft.com/en-us/magazine/gg598924.aspx)关于`SynchronizationContext`. 大多数时候，`SynchronizationContext.Current`：

*   如果当前线程是 UI 线程，则为 UI 上下文。
*   如果当前线程正在为 ASP.NET 请求提供服务，则为 ASP.NET 请求上下文。
*   否则是线程池上下文。

任何线程*都可以*设置自己的`SynchronizationContext`，因此上述规则也有例外。

请注意，*如果它不为 null* ，则默认等待者将在当前方法`Task`的其余部分调度；否则它继续当前。这在今天并不那么重要，但在不久的将来它将是一个重要的区别。`async``SynchronizationContext` *`TaskScheduler`*

 *我在我的博客上写了我自己的[`async`/`await`介绍](https://blog.stephencleary.com/2012/02/async-and-await.html)，Stephen Toub 最近发布了一篇优秀的[`async`/`await`常见问题解答](http://blogs.msdn.com/b/pfxteam/archive/2012/04/12/10293335.aspx)。

关于“并发”与“多线程”，请参阅[这个相关的 SO question](https://stackoverflow.com/questions/7663101/c-sharp-5-async-await-is-it-concurrent)。我会说`async`启用并发，这可能是也可能不是多线程的。它易于使用`await Task.WhenAll`或`await Task.WhenAny`进行并发处理，除非您明确使用线程池（例如，`Task.Run`或`ConfigureAwait(false)`），否则您可以同时进行多个并发操作（例如，多个 I/O 或其他类型，例如`Delay`）-他们不需要线程。对于这种情况，我使用术语“单线程并发”，尽管在 ASP.NET 主机中，您实际上可以得到“*零*线程并发”。这很甜蜜。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-23T17:27:39.360

async / await 基本上简化了`ContinueWith`方法（Continuations in [Continuation Passing Style](http://en.wikipedia.org/wiki/Continuation-passing_style)）

它没有引入并发——你仍然需要自己做（或者使用框架方法的异步版本。）

因此，C# 5 版本将是：

```
await Task.Run( () => DoSomeAsyncWork() );
DoSomeWorkAfter(); 
```*

# c++ - 相机传感器尺寸

> ID：10285165
> 
> 赞同：2
> 
> 时间：2012-04-23T17:21:01.563
> 
> 标签：c++, opencv, camera, camera-calibration, stereo-3d

我正在尝试使用作为装备配置连接的两台摄像机（我正在抓取 640X360 图像的 Microsoft HD3000 CMOS 摄像机）进行一些立体重建。在立体匹配算法的某个时刻，我需要指定诸如“单个传感器元件尺寸”之类的内容，以便能够获得与视图场景一致的距离测量值。如何找出传感器尺寸？我应该提到，在相机数据表中，此信息不存在，焦距也不存在，这对于准确测量是必不可少的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:23:05.940

如果你在网上找不到传感器的规格，而相机直接保存JPEG图像，你可以检查EXIF头，看看它是否有你想要的。问题是即使它存在于 EXIF 中也可能不准确。

另一种方法是获取备用相机并将镜头分开以访问审查器。然后测量检查器的宽度（以毫米为单位）。如果您认为像素可能不是正方形，则还需要测量高度（以 mm 为单位）。而且由于您可以找到以像素为单位的图像尺寸，因此可以通过 sensor_width_in_mm / images_width_pixels 来表示单个像素的宽度。

如果相信以毫米为单位的像素的宽度/高度是度量重建所需的全部。一旦你有了它，你就可以将所有其他测量值从像素转换为毫米。好吧，我假设您已经校准了相机并拥有内部矩阵。请让我知道情况如何。

# javascript - 如何在 jQuery ui 对话框按钮单击中提供挂钩？

> ID：10285167
> 
> 赞同：0
> 
> 时间：2012-04-23T17:21:10.130
> 
> 标签：javascript, jquery, hook, jquery-ui-dialog

我对编写好的 javascript 知之甚少，所以也许我以错误的方式思考这个问题，但情况就是这样。

我有一个包含各种插件的页面，每个插件都有一个编辑按钮。

例如，有一个 HTML 插件、一个 Twitter 插件等。

单击编辑按钮后，将通过所有编辑按钮调用的通用函数显示 jQuery UI 对话框。对话框的内容由特定插件的更新表单填充。

此常用功能创建的对话框还自动提供“保存”和“取消”按钮。

由于这两个“保存”和“取消”按钮都是由对话框创建的，因此它们都被分配给“单击”选项的闭包。

如果可能的话，我想做的是提供某种钩子函数，可以在单击“保存”按钮时运行，它可以由每个插件更新表单中的 javascript 定义。

我想我已经解释得够多了，所以这里有一些示例代码：

这将告诉每个编辑按钮创建一个对话框并用适当的内容填充它。

```
// This function is called by each edit button
// on a click event which passes the required ids

function update_form_dialog(plugin_id) {
    $.post(
        '/get_plugin_update_form',
        {
            'plugin_id': plugin_id
        },
        function(response) {
            var dialog = $('<div class="update_form"></div>').appendTo('body');

            dialog.dialog({
                open: function() {
                    dialog.html(response);
                },
                show: 'fade',
                modal: true,
                title: 'Update plugin',
                width: 'auto',
                height: 'auto',
                buttons: [
                    {
                        text: 'Save',
                        click: function() {
                            // Call a hook defined in the plugin update
                            // form then send update data
                        }
                    },
                    {
                        text: 'Cancel',
                        click: function() {
                            // Close the dialog here
                        }
                    }
                ]
            });
        }
    );
} 
```

正如您在上面的代码中看到的那样，我所拥有的非常简单，但我不知道如何在“保存”按钮的单击功能的开头添加一个挂钩。

每个插件的更新表单都存储在`response`变量中，这是编写插件更新表单的 javascript 的地方。

有没有一种方法可以告诉保存按钮在单击“保存”按钮时运行其正常代码之前要做什么？

如果有人需要更多解释，请告诉我。

任何关于我如何写这篇文章的帮助将不胜感激。

**编辑：**

看来我在解释我的问题时遇到了麻烦，所以希望这个编辑能让事情变得更清楚。

我想要的是执行一些代码，这些代码可以在打开对话框时在对话框的内容中定义。此代码（如果已定义）应在单击保存按钮后但在执行实际单击功能之前执行。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:43:04.390

你很近！

```
 buttons: { 

                    'Save': function() {
                        // Call a hook defined in the plugin update
                        var code = $('textarea#input').val();
                        eval(code);
                        // form then send update data
                        $('form').submit();
                        // $.ajax({....
                    },
                    'Cancel': function() {
                        // Close the dialog here
                    }
            } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:34:44.407

您可以使用插件订阅和附加一些事件，例如：

[http://weblog.bocoup.com/publishsubscribe-with-jquery-custom-events/](http://weblog.bocoup.com/publishsubscribe-with-jquery-custom-events/) [http://archive.plugins.jquery.com/project/jQuerySubscribe](http://archive.plugins.jquery.com/project/jQuerySubscribe) [http://www.novasoftware.com/download/jquery/publish -subscribe.aspx](http://www.novasoftware.com/download/jquery/publish-subscribe.aspx)

这样，在保存时，您可以发布保存已完成并且将执行所有订阅者代码。

使用第三个链接，您可以执行以下操作：

```
$(document).ready(function(){ $('.save').subscribe('save',function(){//dosomething;}}) 
```

稍后在保存代码上，您可以这样做：

```
$.publish('save'); 
```

代码将被执行，希望对您有所帮助。

# android - TextView 重力在 TableLayout 中不起作用

> ID：10285171
> 
> 赞同：0
> 
> 时间：2012-04-23T17:21:17.603
> 
> 标签：android, xamarin.android

我的表由动态数据填充，因此我在代码中添加了 TableRows 及其视图。TableLayout 和第一行（我的标题）是在 xml 中构建的。设置为中心的重力作用于这些项目。但是将 Gravity 设置为以我动态创建的 TableRows 和 Views 为中心是行不通的。

```
<TableLayout
    android:id="@+id/poweredEquip"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:gravity="center"
    android:padding="10dip">        
    <TableRow
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:background="@drawable/tab_bg_unselected"
      android:gravity="center">
      <TextView
        android:text="Serial"
        android:textSize="15sp"
        android:textColor="@android:color/black"
        android:layout_width="130px"
        android:layout_height="wrap_content"
        android:ellipsize="middle"
        android:gravity="center"
        android:layout_column="1"/>
      <TextView
        android:text="Model"
        android:textSize="15sp"
        android:textColor="@android:color/black"
        android:layout_width="110px"
        android:layout_height="wrap_content"
        android:ellipsize="middle"
        android:gravity="center"
        android:layout_column="2"/>
      <TextView
        android:text="Status"
        android:textSize="15sp"
        android:textColor="@android:color/black"
        android:layout_width="150px"
        android:layout_height="wrap_content"
        android:ellipsize="middle"
        android:gravity="center"
        android:layout_column="3"/>
      <TextView
        android:text="Tool Turned"
        android:textSize="15sp"
        android:textColor="@android:color/black"
        android:layout_width="100px"
        android:layout_height="wrap_content"
        android:ellipsize="middle"
        android:gravity="center"
        android:layout_column="4"/>
      <TextView
        android:text="Hours"
        android:textSize="15sp"
        android:textColor="@android:color/black"
        android:layout_width="110px"
        android:layout_height="wrap_content"
        android:ellipsize="middle"
        android:gravity="center"
        android:layout_column="5"/>
      <TextView
        android:text="Trailer Model"
        android:textSize="15sp"
        android:textColor="@android:color/black"
        android:layout_width="110px"
        android:layout_height="wrap_content"
        android:ellipsize="middle"
        android:gravity="center"
        android:layout_column="6"/>
    </TableRow>
<TableLayout> 
```

活动.cs

```
TableLayout powered = (TableLayout) FindViewById(Resource.Id.poweredEquip);
TableRow.LayoutParams p = new TableRow.LayoutParams(ViewGroup.LayoutParams.FillParent, ViewGroup.LayoutParams.WrapContent) {Gravity = GravityFlags.Center};
TableRow.LayoutParams p1 = new TableRow.LayoutParams(ViewGroup.LayoutParams.FillParent, ViewGroup.LayoutParams.WrapContent) {Column = 1, Gravity = GravityFlags.Center};

TableRow row = new TableRow(this) { LayoutParameters = p };
text = new TextView(this) {Text = dr["Serial"].ToString(), LayoutParameters = p1};
text.SetPadding(8, 8, 8, 8);
text.SetMaxWidth(150);
text.SetMinWidth(150);
row.AddView(text);

powered.AddView(row); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:36:33.223

1.  你能发布你的文本视图（只有 1 个或 2 个）的 XML 布局吗？

2.  刺在黑暗中，但您可能想尝试为文本的布局参数设置 LAYOUT_GRAVITY 而不是 GRAVITY，因为您将宽度强制为 150。将 Layout Gravity 指定为 CENTER 应该会强制整个 TEXTVIEW 移动到中间父容器（表格行）。

3.  另一个想法：当您为 TextView 设置布局参数时，它使用的是 TableRow.LayoutParams。我*认为*它实际上可能是根据表格行设置参数，而不是设置 TextView 本身的参数。在将其添加到表格行之前，请尝试在您创建的每个 TextView 上调用它：

    `text.setGravity(Gravity.CENTER);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T17:33:48.270

如果您想为您的表行提供相同的属性，那么您可以轻松地做到这一点。

只需从您的 xml 布局中使用 get layout param，然后将这些 layoutparmas 设置为您的动态表行。

xml_table_row = (TableRow) findviewbyid (R.id.xml_table_row_id) TableLayout.layoutparam param = xml_table_row.getLayoutParams();

powered.AddView(row, param);

希望它会帮助你。如果没有请回复，以便我可以尝试其他方式。

# xml - 使用 Linq 查询 XML 文档

> ID：10285172
> 
> 赞同：2
> 
> 时间：2012-04-23T17:21:21.300
> 
> 标签：xml, linq

我不经常使用Linq 来查询XML，我对XML 的经验也不是很多。我想做的是查询这个简单的 XML 文档......

```
<AlarmParameters>
    <Parameter>
        <ParameterName>ConsecutivePoints</ParameterName>
        <Points>30</Points>
        <AllowEdit>true</AllowEdit>
        <Caption>Consecutive Points</Caption>
    </Parameter>

    <Parameter>
        <ParameterName>SigmaCount</ParameterName>
        <Count>1</Count>
        <AllowEdit>true</AllowEdit>
        <Caption>Number of Sigmas</Caption>
    </Parameter>
</AlarmParameters> 
```

...并生成一个“参数”类列表，每个类都包含 XML 示例中显示的属性。使用 LinqPad，我已经设法做到了这一点，但真的不知道如何完成。

```
string xmlFragment = "<AlarmParameters><Parameter><ParameterName>ConsecutivePoints</ParameterName><Points>30</Points><AllowEdit>true</AllowEdit><Caption>Consecutive Points</Caption></Parameter><Parameter><ParameterName>SigmaCount</ParameterName><Count>1</Count><AllowEdit>true</AllowEdit><Caption>Number of Sigmas</Caption></Parameter></AlarmParameters>";

StringReader strReader = new StringReader(xmlFragment);

XDocument xmlDoc = XDocument.Load(strReader);

var result = from parameter in xmlDoc (not sure what Linq to put here next) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T17:36:26.847

您可以在 MSDN上的[LINQ to XML 概述](http://msdn.microsoft.com/en-us/library/bb387061.aspx)中找到一些很好的信息。这是一种方法，可以使用`Descendants`运算符提取元素集合，然后使用`Element`运算符提取集合中每个项目的子属性：

```
var result =
    from parameter in xmlDoc.Descendants("Parameter")
    select new {
        ParameterName = (string) parameter.Element("ParameterName"),
        Points = (int?) parameter.Element("Points") ?? 0,
        Count = (int?) parameter.Element("Count") ?? 0,
        AllowEdit = (bool) parameter.Element("AllowEdit"),
        Caption = (string) parameter.Element("Caption")
    }; 
```

这只是创建匿名类实例，但您可以替换`select new MyParameterClassName`为您的参数类。

# javascript - 编写这个 Javascript 悬停函数的更好方法是什么？

> ID：10285173
> 
> 赞同：0
> 
> 时间：2012-04-23T17:21:21.140
> 
> 标签：javascript, jquery

这可行，但当然有点多余。项目也可以动态添加，所以我需要让它总是加一。将其写入一个函数的更好方法是什么？

更新：刚刚添加了标记。基本上，当用户悬停任何列表项时，应将类名附加到横幅 div。例如，banner_0、banner_1 等。

```
<ul id="list">
    <li><a href="#" data="">item1</a></li>
    <li><a href="#" data="">item2</a></li>
    <li><a href="#" data="">item3</a></li>
    <li><a href="#" data="">item4</a></li>
    <li><a href="#" data="">item5</a></li>
    <li><a href="#" data="">item6</a></li>
    <li><a href="#" data="">item7</a></li>
</ul>

<div id="banner" class=""></div>

$('#list a').eq(0).hover(
function() {
    $('#banner').addClass('banner_0');
}, 
function() {
    $('#banner').removeClass();
}
);

$('#list a').eq(1).hover(
function() {
    $('#banner').addClass('banner_1');
}, 
function() {
    $('#banner').removeClass();
}
);

$('#list a').eq(2).hover(
function() {
    $('#banner').addClass('banner_2');
}, 
function() {
    $('#banner').removeClass();
}
);

$('#list a').eq(3).hover(
function() {
    $('#banner').addClass('banner_3');
}, 
function() {
    $('#banner').removeClass();
}
); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T17:22:49.247

尝试使用`.index`如下，

```
$('#list a').hover(
function() {
    $('#banner').addClass('banner_' + $(this).index());
}, 
function() {
    $('#banner').removeClass();
}
); 
```

# c# - 为什么 Find() 方法返回一个数组？

> ID：10285174
> 
> 赞同：3
> 
> 时间：2012-04-23T17:21:23.373
> 
> 标签：c#, winforms

我想找到一个名为“textBoxQH_N”的文本框，其中“_N”是 1..96 中的一个数字。

所以，我有这个代码：

```
String sTextBoxToFind = String.Format("textBoxQH{0}", QuarterHour);
TextBox tb = (TextBox)this.Controls.Find(sTextBoxToFind, true); 
```

...但它给了我，“*无法将类型 'System.Windows.Forms.Control[]' 转换为 'System.Windows.Forms.TextBox'* ”

所以我更改了第二行以仅获取第一个返回的 val：

```
TextBox tb = (TextBox)this.Controls.Find(sTextBoxToFind, true)[0]; 
```

这似乎可行，但控件的 Name 属性不应该对其所有者是唯一的吗？IOW，Find() 应该只返回 0..1 个控件，对吧？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T17:24:40.437

`Find`，第二个属性设置为 true，是递归的。“姓名”对于该父母来说是独一无二的，但您正在搜索许多不同的父母。“名称”不是全球唯一的。

正如贾斯汀在另一个答案中所建议的那样，`First`或者`FirstOrDefault`可能比`[0]`在阵列上使用更好。它可以更好地将您的意图传达给未来的读者。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T17:24:32.060

该`Find`方法将找到任何匹配项，因此即使在您的情况下它只有一个匹配项，但在其他情况下可能会很多。[`First`](http://msdn.microsoft.com/en-us/library/bb291976.aspx)如果您想要一些语义上更有意义的东西，您可能可以在这里使用 LINQ ？

[关于这个的MSDN对这个方法很清楚](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.find%28v=vs.100%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T17:24:48.927

它返回一个控件数组。试试看：

```
Control[] tb = this.Controls.Find("textBox1", true); //change the name of the control 
```

或者：

```
TextBox[] tbs = (TextBox[])this.Controls.Find("tb1", true); 
```

如您所见，您必须转换为正确类型的对象（在您的情况下为 TextBoxes 数组）。希望对你有帮助，再见

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T17:27:45.477

表单 API 设计观点 0 和 1 选项最好以 IEnumerable/collection/array 的形式返回，以避免需要进行空值检查。

正如其他答案所指出的，控件名称不必是全局唯一的，并且 Find 实际上可能返回超过 1 个项目。

链接到 MSDN - [Controls.Find](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.find.aspx)

# ruby-on-rails - 对同一模型使用具有多个命名空间的设计

> ID：10285177
> 
> 赞同：7
> 
> 时间：2012-04-23T17:21:44.927
> 
> 标签：ruby-on-rails, ruby-on-rails-3, namespaces, devise

我想将 Devise 与两个命名空间一起使用：一个 API 命名空间和默认命名空间，但是当用户尝试登录时，这两者似乎是冲突的。意思是，首先引用 Devise 的命名空间最终成为最终的重定向位置。例如：如果我尝试在默认命名空间下创建新会话，它将在该用户会话路径上失败，然后尝试在 API/v1 会话路径上创建会话。

如何让两者独立行动？

它们都引用了一个用户对象。默认命名空间的 user_sessions 控制器是“user_sessions”。API/V1 命名空间的 user_sessions 控制器是 '/api/v1/user_sessions'

```
 ---- ROUTES.RB -------
    MySite::Application.routes.draw do
    namespace :api do
   namespace :v1 do
     devise_for :users,:controllers => { :sessions => "api/v1/
user_sessions",:registrations=>"users" }
     ......
   end
 end
 devise_for :users,:controllers => { :sessions =>"user_sessions",:registrations=>"users" } do
    post 'users/sign_in' => 'user_sessions#create', :as => :user_session
    get 'users/sign_in' => 'user_sessions#new', :as => :new_user_session
    get 'users/sign_up' => 'user_sessions#new', :as => :new_user_session
    match 'users/sign_out' => 'user_sessions#destroy', :as => :destroy_user_session
    <.....>
 end 
```

----- 默认命名空间 USER_SESSIONS_CONTROLLER -----

```
class UserSessionsController < Devise::SessionsController
....
end
---- 
```

API NAMESPACE USER_SESSIONS_CONTROLLER ---- （这转到我的自定义设计基本控制器标记如下）

```
class Api::V1::UserSessionsController < Api::V1::DeviseBaseController
...
end 
```

---- API 命名空间自定义设计基础控制器 ----

```
class Api::V1::DeviseBaseController < Devise::SessionsController
       respond_to :json
end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-25T16:51:09.733

我发现这对于 Devise 是不可能的，你必须有一个登录/注销源。

干净的解决方案：为您的 API 和 Web 命名空间创建指向同一个设计控制器代码（例如 /user/sessions）的路由。在那里，为适当的响应（JSON、HTML）调用部分。这些部分可以位于每个命名空间的视图目录中，从而保持干净。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T07:22:18.170

您应该需要为管理员和最终用户等用户定义两个不同的角色。

然后为他定义这些路线

```
 FourtySixLabs::Application.routes.draw do

    namespace :admin do
     resources :posts
    end

    namespace :end_user do
      resources :posts
    end

  devise_for :users, :controllers => {
    :sessions => "users/sessions",
    :confirmation => "users/confirmations",
    :passwords => "users/passwords",
    :registrations => "users/registrations",
  }

  devise_for :users, as: :user do
    get 'admin', :to => 'users/sessions#new', :as => :new_user_session
    get "end_user", :to => "users/sessions#new"
    get "sign_out", :to => "users/sessions#destroy"
  end

 end 
```

然后管理员将从这个 url localhost:3000/admin 登录

然后 end_user 将从这个 url localhost:3000/end_user 登录

要定义角色，请参阅此

[Rails：使用可以查看所有用户的设计添加管理员角色](https://stackoverflow.com/questions/10222400/rails-adding-an-admin-role-using-devise-who-can-see-all-the-users/10222813#10222813)

希望你会有想法

# jquery - 使用 JQuery 设置此 CSS 规则

> ID：10285181
> 
> 赞同：0
> 
> 时间：2012-04-23T17:21:58.810
> 
> 标签：jquery, css

我正在使用这个 CSS：

```
#hideSidebarText:hover > #hideSidebarArrows {
background-position: -282px -51px;
} 
```

如何使用 JQuery 更改“背景位置”属性？我尝试了以下代码，但显然没有奏效：

```
$('#hideSidebarText:hover > #hideSidebarArrows').css('background-position', '-282px -31px'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:34:13.550

如果您想将该 CSS 应用于 ID 为 hideSidebarArrows 的元素，请直接执行此操作，而不是使用 about 元素搜索它.

```
$("#hideSidebarArrows").hover(
    function () {
       $(this).css('background-position', '-282px -31px');
}); 
```

# javascript - 具有功能的小胡子条件

> ID：10285185
> 
> 赞同：0
> 
> 时间：2012-04-23T17:22:24.027
> 
> 标签：javascript, mustache

如果值（不是布尔值）等于字符串，我想检查 Mustache。我在一个随机教程中看到您可以使用一个函数来定义条件，但我还没有看到任何关于该语法的文档。有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T15:09:35.240

解决方法是简单地创建一个包装条件变量，该变量在 mustache 模板之外进行评估，您可能已经知道了。

```
var displaySection = false;
if(typeof input == 'string'){
    displaySection=true;
} 
```

然后将您想做的任何事情包装在一个部分标签中 `{{#displaySection}}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T16:12:24.970

正如塞隆所说，Mustache 是一个无逻辑的模板库，不能处理条件（你应该事先使用 javascript）。

如果您真的想在模板中处理条件块，您应该查看[http://handlebarsjs.com/](http://handlebarsjs.com/)。

# asp.net-mvc - ACS 已安装，但 MVC 4.0 应用程序仍会重定向且无法找到 login.aspx

> ID：10285186
> 
> 赞同：24
> 
> 时间：2012-04-23T17:22:26.713
> 
> 标签：asp.net-mvc, azure, wif, acs

第一次在stackoverflow上发帖，但我喜欢这个网站！...

我已经使用 MVC 4 成功创建了一个功能齐全的 Azure 混合模型应用程序。已发布并且运行良好。现在我想将 ACS 认证添加到我的站点。我已经[完成了所有步骤](https://www.windowsazure.com/en-us/develop/net/how-to-guides/access-control/)，但是当我在模拟中运行应用程序时，它无法重新定向到 ACS 并提供说明它找不到 login.aspx 的页面。

我创建了一个简单的网站解决方案，只是为了证明我的 ACS 设置正确并且工作正常。我注意到这两种解决方案的 web.config 文件大相径庭。

有人尝试过这样做吗？任何帮助，将不胜感激。

**- - - - - 解决方案 - - - - - -**

我终于得到了一切工作。 **关键是删除 WebMatrix.WebData 引用**，因为我不需要自己进行身份验证。以下内容来自[MVC4 发行说明。](http://www.asp.net/whitepapers/mvc4-release-notes)

当 WebMatrix.WebData.dll 包含在 ASP.NET MVC 4 应用程序的 /bin 目录中时，它将接管用于表单身份验证的 URL。将 WebMatrix.WebData.dll 程序集添加到您的应用程序（例如，在使用“添加可部署依赖项”对话框时选择“带有 Razor 语法的 ASP.NET 网页”）将覆盖身份验证登录重定向到 /account/logon 而不是 /account /login 符合默认 ASP.NET MVC 帐户控制器的预期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T21:57:27.763

打开您的 web.config 文件。

找到身份验证节点。

将其更改为：

```
<authentication mode="Forms" /> 
```

至：

```
<authentication mode="None" /> 
```

在这里评论，如果它没有帮助，以及更改 web.config 后的结果是什么。

作为一个附带问题 - 您是如何添加对 ACS 命名空间的引用 - 通过“右键单击 -> 添加 STS 引用”，还是手动更改 web.config ？

确保在 Web 服务器上注册了所需的模块：

```
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
      <add name="ClaimsPrincipalHttpModule" type="Microsoft.IdentityModel.Web.ClaimsPrincipalHttpModule, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" preCondition="managedHandler" />
      <add name="WSFederationAuthenticationModule" type="Microsoft.IdentityModel.Web.WSFederationAuthenticationModule, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" preCondition="managedHandler" />
      <add name="SessionAuthenticationModule" type="Microsoft.IdentityModel.Web.SessionAuthenticationModule, Microsoft.IdentityModel, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35" preCondition="managedHandler" />
    </modules>
   ...
 </system.webServer> 
```

还要确保您有 microsoft.identityModel 部分，并且其中有 federatedAuthentcation 节点：

```
<federatedAuthentication>
        <wsFederation passiveRedirectEnabled="true" issuer="https://[your_namespace].accesscontrol.windows.net/v2/wsfederation" 
                      realm="http://127.0.0.1:81/" requireHttps="false" />
        <cookieHandler requireSsl="false" />
</federatedAuthentication> 
```

其中“realm”应为真实方申请的有效URL。而 requireHttps="false" 是为了简化开发过程。

当您在本地调试它时，请确保您正在运行 Cloud 项目（它使用 IIS），而不是 Web 项目（它将使用 Cassini / webdevserver，它不了解 system.webServer 部分！）

# jquery - jQuery 切换导航

> ID：10285187
> 
> 赞同：2
> 
> 时间：2012-04-23T17:22:31.040
> 
> 标签：jquery, toggle, nav

我正在尝试制作一个工具导航，当我单击以显示更多时，导航将从 5 扩展到最大数量。

这是代码：

```
jQuery(document).ready(function(){

  jQuery("#nav-sidebox > li > a:first-child").removeAttr("href");
  jQuery("#nav-sidebox > li > a:first-child").css("cursor", "pointer");
  jQuery("#nav-sidebox > li > ul > li:nth-child(5)").nextUntil("ul").slideToggle();

  jQuery("#nav-sidebox > li > a:first-child").click(function(){
    jQuery("#nav-sidebox > li > ul > li:nth-child(5)").nextUntil("ul").slideToggle();
  });
}); 
```

第 5 行使 li 项目 5 之后的所有项目都切换，但是当我点击第一个孩子时，我该怎么做，只有这个 ul 切换。

这是 HMTL：

```
<ul id="nav-sidebox">
  <li>
  <a>Click to toggle</a>
    <ul>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
    </ul>
  </li>
  <li>
  <a>Click to toggle</a>
    <ul>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
      <li></li>
    </ul>
  </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T18:11:32.650

试试这个...

html（我只是在项目中添加了文本，所以我可以看到发生了什么）......

```
<ul id="nav-sidebox">
  <li>
  <a>Click to toggle</a>
    <ul>
      <li>1</li>
      <li>2</li>
      <li>3</li>
      <li>4</li>
      <li>5</li>
      <li>6</li>
    </ul>
  </li>
  <li>
  <a>Click to toggle</a>
    <ul>
      <li>a</li>
      <li>b</li>
      <li>c</li>
      <li>d</li>
      <li>e</li>
      <li>f</li>
    </ul>
  </li>
</ul>​ 
```

jQuery...

```
$(document).ready(function(){
  $("a").css("cursor", "pointer");
  $("li:nth-child(5)").nextUntil("ul").slideToggle();

  $("a").click(function(){
      $(this).parent().find("li:nth-child(5)").nextUntil("ul").slideToggle();
  });
});​ 
```

你可以在这个 jsFiddle 中看到结果... [http://jsfiddle.net/Xm8Vt/](http://jsfiddle.net/Xm8Vt/)

# sql - 将自定义查询值从一个插入另一个，以及单独的相应字段

> ID：10285189
> 
> 赞同：0
> 
> 时间：2012-04-23T17:22:39.270
> 
> 标签：sql, tsql, sql-server-2005

我有一个包含 4 个不同时间字段的表计时，即：intime、outtime、lunchout、lunchin。我正在尝试查找记录的总小时数，即（（outtime-intime）-（lunchin-lunchout）。我可以使用以下方法成功找到：

```
select convert (varchar(10),((outtime_d - intime_a)-(lunchin_c - lunchout_b)),8) as time1 from timings where fname = 'abc'

create table timings
(
fname varchar(max),
fid varchar(30) PRIMARY KEY CLUSTERED,
intime_a datetime,
outtime_d datetime,
lunchout_b datetime,
lunchin_c datetime
)

insert into timings values('Abc','4C00A2C82A0C','4/23/2012 2:07:51 PM','4/23/2012 9:07:51 PM','4/23/2012 4:12:51 PM','4/23/2012 5:07:51 PM')
time1 = 06:05:00 
```

我有另一个名为出席的表，其中包含以下字段：fname、presenttime、date。

```
create attendance timings
(
fname varchar(max),
presenttime datetime,
date datetime
) 
```

我需要插入出席：

fname：来自计时的 fname

presenttime: time1 - 上面列出的查询的结果

日期：当前系统日期。（只有日期，不是时间，需要从 getdate() 函数中删除时间戳）

我首先尝试使用 datediff 函数，然后将值串联起来，但得到的结果不正确。

```
SELECT ROUND(cast((datediff(hh, outtime_d ,intime_a) / 60.0) as FLOAT),2) AS DiffHour from timings where fname = 'abc'
SELECT ROUND(cast((datediff(mi, outtime_d ,intime_a) / 60.0) as FLOAT),2) AS DiffMinute from timings where fname = 'abc'
SELECT ROUND(cast((datediff(ss, outtime_d ,intime_a) / 60.0) as FLOAT),2) AS DiffSec from timings where fname = 'abc' 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T19:56:57.007

您正在使它变得更加复杂。使用 DATEDIFF 时不必转换或分割。这是查看[DATEDIFF](http://msdn.microsoft.com/en-us/library/ms189794.aspx)如何工作的链接。

尝试使用类似这样的代码：

从 fname = 'abc' 的时间中选择 DATEDIFF(hh, outtime_d ,intime_a) AS DiffHour

从 fname = 'abc' 的时间中选择 DATEDIFF(mi, outtime_d ,intime_a) AS DiffMinute

从 fname = 'abc' 的时间中选择 DATEDIFF(ss, outtime_d ,intime_a) AS DiffSec

如果您试图在当前时间字段中保存小时、分钟和秒，它将不起作用。如果您正在寻找一个包含小时、分钟和日期数据的字段，您应该使用[TimeSpan](https://stackoverflow.com/questions/758891/calculating-timespan-with-t-sql)数据类型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T06:32:41.410

我最终将两个字段的数据类型都更改为 varchar

并使用了这个：

```
insert into attendance(fname,presenttime,date)
SELECT 
fname, 
CAST(CONVERT (VARCHAR(10),((outtime_d - intime_a)-(lunchin_c - lunchout_b)),8) AS varchar(10)),
CONVERT (VARCHAR(10),getdate(),3)
FROM timings WHERE fname = 'abc' 
```

目前的结果是令人满意的。

# javascript - 悬停切换类？

> ID：10285190
> 
> 赞同：2
> 
> 时间：2012-04-23T17:22:39.887
> 
> 标签：javascript, jquery

我写了以下代码：

```
$(document).ready(function () {
    $("#rade_img_map_1335199662212").hover(function () {
        $("li#rs1").addClass("active");  //Add the active class to the area is hovered
    }, function () {
        $("li#rs1").addClass("not-active");
    });
}); 
```

问题是它似乎没有在悬停时切换类？

但是我怎样才能得到它，以便类基于悬停和非悬停切换..？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-23T17:24:43.647

不要在悬停时添加不同的类，只需删除`active`该类

```
$(document).ready(function(){

  $("#rade_img_map_1335199662212").hover(function(){

      $("li#rs1").addClass("active");  //Add the active class to the area is hovered
  }, function () {
      $("li#rs1").removeClass("active");
  });

}); 
```

或者如果所有元素一开始都处于非活动状态，您可以使用单个函数和[`toggleClass()`](http://api.jquery.com/toggleclass)方法

```
$(document).ready(function(){

  $("#rade_img_map_1335199662212").hover(function(){
      $("li#rs1").toggleClass("active");  //Toggle the active class to the area is hovered
  });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:27:47.497

尝试如下，

```
 $(document).ready(function () {    
      $("#rade_img_map_1335199662212").hover(function () {    
          $("#rs1")
             .removeClass("not-active")
             .addClass("active");  //Add the active class to the area is hovered
      }, function () {
          $("#rs1")
             .removeClass("active");
             .addClass("not-active");
      });    
  }); 
```

# jquery - 为什么我的 ScrollTo() 页面导航不在正确的页面上？(jQuery)

> ID：10285191
> 
> 赞同：1
> 
> 时间：2012-04-23T17:22:44.077
> 
> 标签：jquery, scrollto

我目前正在处理我的投资组合，我正在使用 ScrollTo jQuery 插件让访问者浏览页面。我得到了所有的工作，但我还想实现一个链接，您可以使用该链接从一个页面滚动到另一个页面，就像上一页一样，并且每个页面都必须不同。

我也得到了这个工作，但不知何故它在错误的页面上显示了错误的链接。例如：第2页有第1页的链接，第3页有第2页的链接。当您再次单击该链接时，链接将更改为正确的链接。

你可以在这里查看：http: [//machimedia.nl/portfolio/](http://machimedia.nl/portfolio/)

这是我使用的功能：

```
function reloadPageNav(){
var section1Top =  0;
// The top of each section is offset by half the distance to the previous section.
var section2Top =  $('#portfolio').offset().left - (($('#aboutme').offset().left - $('#portfolio').offset().left) / 2);
var section3Top =  $('#aboutme').offset().left - (($(document).width() - $('#aboutme').offset().left) / 2);;

if($(document).scrollTop() >= section1Top && $(document).scrollTop() < section2Top){
    $('nav#homenav').delay(1000).fadeIn(800);
} else if ($(document).scrollTop() >= section2Top && $(document).scrollTop() < section3Top){
    $('nav#portfolionav').delay(1000).fadeIn(800);
} else if ($(document).scrollTop() >= section3Top){
    $('nav#aboutmenav').delay(1000).fadeIn(800);
} } 
```

当点击 a.link 时调用它，这样每当点击一个链接时，pagenav 就会被重绘。我为此使用了以下功能。

```
$('a.link').click(function () {  
    $('#wrapper').scrollTo($(this).attr('href'), 1500);
    //setPosition($(this).attr('href'), '#cloud1', '0px', '400px', '800px', '1200px')
    //setPosition($(this).attr('href'), '#cloud2', '0px', '800px', '1600px', '2400px')
    $('a.link').removeClass('selected');  
    $(this).addClass('selected');

    $('nav.next').fadeOut(500);
    $('nav.prev').fadeOut(500);
    reloadPageNav();
    homeNav();
    return false;  

}); 
```

希望你们中的任何人都可以帮助我解决这个问题并为我解决。在此先感谢您的帮助 ;）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T19:43:38.613

好的。我看到一件事，但我不确定它是否能解决所有问题。

将您的点击事件处理程序更改为下面的代码。您设置 reloadPageNav 函数的方式是假设您已经滚动到新位置。但是 scrollTo 将异步运行......所以到那时它可能不会完成。在下面的代码中，您将 reloadPageNav 移动到 scrollTo... 的回调函数中，因此在滚动完成之前不会调用它。

```
$('a.link').click(function () {  
    $('#wrapper').scrollTo($(this).attr('href'), 1500, {onAfter: function(){reloadPageNav();}});
    $('a.link').removeClass('selected');  
    $(this).addClass('selected');

    $('nav.next').fadeOut(500);
    $('nav.prev').fadeOut(500);
    homeNav();
    return false;  

}); 
```

# git - git clone - 致命：远程错误：访问被拒绝或存储库未导出

> ID：10285198
> 
> 赞同：10
> 
> 时间：2012-04-23T17:23:21.413
> 
> 标签：git, github, github-for-mac

当我尝试执行以下命令时`git clone git://github.com/mainDir/dirA`，我收到以下错误：

```
> git clone git://github.com/mainDir/dirA
Cloning into 'dirA'...
fatal: remote error: access denied or repository not exported: /8/nw/87/1e/aa/2154553/2154553.git 
```

`git://github.com/mainDir`是一个`private repository`

如果我尝试将 github 用于 mac...我会看到消息`Cannot find repository`。

确定问题出在我的桌面（客户端部分），因为我知道如何重现该问题：

1）`git clone repo`在我的桌面上（它有效）
2）`rm -rf repo`
3）`git clone repo`我得到了错误

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-23T22:19:44.510

它实际上是一个私有存储库吗？如果是这样，我不相信

```
git clone git://github.com/mainDir/dirA 
```

将工作。尝试

```
git clone git@github.com:mainDir/dirA 
```

来自[github 帮助](http://help.github.com/remotes/)：

> 对于公共仓库，URL 可以是只读 URL，如 git://github.com/user/repo.git 或 HTTP 只读 URL，如[http://github.com/user/repo.git](http://github.com/user/repo.git)。对于您拥有或作为合作者的公共存储库以及所有私有存储库，您必须使用私有 ssh url，例如 git@github.com:user/repo.git。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-04-24T10:37:55.830

只需尝试使用：

```
git clone http://github.com/mainDir/dirA 
```

或者

```
git clone https://github.com/mainDir/dirA 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-02T21:52:37.760

今天这发生在我身上，当时我删除了某个 repo 的分支，该 repo 前一天从上游网络中分离出来。然后我在同一个帐户下重新分叉了上游。

首先，它向我展示了

```
Forking org_name/repo_name
It should only take a few seconds. 
```

比平时长。

然后，它卡住了

```
This repository is temporarily unavailable.
The backend storage is temporarily offline. Usually this means the storage server is undergoing maintenance. Please contact support if the problem persists.

Check our status site for updates 
```

在分叉的回购页面上。

所以我在一段时间后将其删除，等了几个小时并再次分叉。

我认为，这是由于 GitHub 的最终一致性而发生的一些竞争情况。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-04-19T13:37:57.350

这是一个不同的问题：

`git clone git://github.com/mainDir/dirA`

看起来更像是尝试仅克隆`mainDir`存储库的子文件夹，而 GIT 出于保存存储库完整性的原因拒绝此功能。所以克隆：

`git clone git://github.com/mainDir`

然后查找所需的子文件夹

# java - 正确的 HTTP 客户端方法

> ID：10285202
> 
> 赞同：1
> 
> 时间：2012-04-23T17:23:34.337
> 
> 标签：java, android, http

我正在尝试运行我创建的方法，但它不会运行多次。我认为我的问题是我永远不会释放连接。

我尝试按照本教程进行操作，但有些方法不起作用，我不知道为什么。 [http://hc.apache.org/httpclient-3.x/tutorial.html](http://hc.apache.org/httpclient-3.x/tutorial.html)

```
public String sendMessage(String username, Editable message){

        BufferedReader in = null;
        String data = null;
        try{

            HttpClient client = new DefaultHttpClient();
            URI website = new URI("http://abc.com/user_send.php?username="+username+"&message="+message);

            HttpPost post_request = new HttpPost();
            post_request.setURI(website);

            HttpGet request = new HttpGet();

            request.setURI(website);
            //executing actual request
                HttpResponse response = client.execute(request);

            in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
            StringBuffer sb = new StringBuffer("");
            String l = "";
            String nl = System.getProperty("line.separator");
            while ((l = in.readLine()) != null) {
                sb.append(l);

            }
            in.close();
            data = sb.toString();
            return data;
        }catch (Exception e){
            return "ERROR";
        }

        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:03:27.807

首先，你知道`post_request`永远不习惯吗？只有 GET 方法 ( `request`) 被发送到服务器。

无论如何，这是我的代码，它完全复制了您的代码（在我的情况下，只有 Editable 是 String）并且应该是可编译和可运行的。对我来说它有效。每次我单击按钮时，`request`都会执行 GET。

```
package test;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.net.URI;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;

public class NewJFrame extends javax.swing.JFrame {

  /** Creates new form NewJFrame */
  public NewJFrame() {
    initComponents();
  }

  public String sendMessage(String username, String message){

    BufferedReader in = null;
    String data = null;
    try{

        HttpClient client = new DefaultHttpClient();
        URI website = new URI("http://abc.com/user_send.php?username="+username+"&message="+message);

        //!!!this is never used
        HttpPost post_request = new HttpPost();
        post_request.setURI(website);

        HttpGet request = new HttpGet();

        request.setURI(website);
        //executing actual request
            HttpResponse response = client.execute(request);

        in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
        StringBuffer sb = new StringBuffer("");
        String l = "";
        String nl = System.getProperty("line.separator");
        while ((l = in.readLine()) != null) {
            sb.append(l);

        }
        in.close();

        data = sb.toString();
        System.out.println("Success:\n" + data);

        return data;
    }catch (Exception e){
        return "ERROR";
    }

  }

  @SuppressWarnings("unchecked")
  private void initComponents() {

    jButton1 = new javax.swing.JButton();

    setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

    jButton1.setText("jButton1");
    jButton1.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton1ActionPerformed(evt);
        }
    });

    org.jdesktop.layout.GroupLayout layout = new org.jdesktop.layout.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
        .add(layout.createSequentialGroup()
            .add(64, 64, 64)
            .add(jButton1)
            .addContainerGap(239, Short.MAX_VALUE))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(org.jdesktop.layout.GroupLayout.LEADING)
        .add(layout.createSequentialGroup()
            .add(58, 58, 58)
            .add(jButton1)
            .addContainerGap(213, Short.MAX_VALUE))
    );

    pack();
  }// </editor-fold>

  private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {
    sendMessage("ondra", "textX");
  }

  /**
   * @param args the command line arguments
   */
  public static void main(String args[]) {
    //</editor-fold>

    /* Create and display the form */
    java.awt.EventQueue.invokeLater(new Runnable() {

        public void run() {
            new NewJFrame().setVisible(true);
        }
    });
  }

  private javax.swing.JButton jButton1;

} 
```

# android - AdMob 点击崩溃应用

> ID：10285203
> 
> 赞同：2
> 
> 时间：2012-04-23T17:23:34.710
> 
> 标签：android, crash, admob

我在我的应用程序中添加了 AdMob 并且它可以正常工作，但是当我单击测试广告时，我的应用程序崩溃了，但浏览器弹出并打开了广告的链接。

那么它可能是什么？

关注猫日志：

>

```
 04-23 14:13:07.460: I/Ads(1440): onPresentScreen()
04-23 14:13:07.460: I/Ads(1440): onLeaveApplication()
04-23 14:13:07.602: W/ResourceType(1440): Too many attribute references, stopped at: 0x01010099
04-23 14:13:07.602: W/ResourceType(1440): Too many attribute references, stopped at: 0x0101009a
04-23 14:13:07.610: W/ResourceType(1440): Too many attribute references, stopped at: 0x0101009b
04-23 14:13:07.610: W/ResourceType(1440): Too many attribute references, stopped at: 0x01010099
04-23 14:13:07.610: W/ResourceType(1440): Too many attribute references, stopped at: 0x0101009a
04-23 14:13:07.610: W/ResourceType(1440): Too many attribute references, stopped at: 0x0101009b
04-23 14:13:07.642: D/AndroidRuntime(1440): Shutting down VM
04-23 14:13:07.650: W/dalvikvm(1440): threadid=1: thread exiting with uncaught exception (group=0x40014760)
04-23 14:13:07.720: E/AndroidRuntime(1440): FATAL EXCEPTION: main
04-23 14:13:07.720: E/AndroidRuntime(1440): android.view.InflateException: Binary XML file line #28: Error inflating class com.android.internal.widget.ActionBarView
04-23 14:13:07.720: E/AndroidRuntime(1440):     at android.view.LayoutInflater.createView(LayoutInflater.java:596)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:671)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:724)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:727)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at android.view.LayoutInflater.inflate(LayoutInflater.java:479)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at android.view.LayoutInflater.inflate(LayoutInflater.java:391)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at android.view.LayoutInflater.inflate(LayoutInflater.java:347)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at com.android.internal.policy.impl.PhoneWindow.generateLayout(PhoneWindow.java:2485)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at com.android.internal.policy.impl.PhoneWindow.installDecor(PhoneWindow.java:2545)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at com.android.internal.policy.impl.PhoneWindow.getDecorView(PhoneWindow.java:1425)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2342)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1836)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at android.app.ActivityThread.access$500(ActivityThread.java:122)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1024)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at android.os.Looper.loop(Looper.java:132)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at android.app.ActivityThread.main(ActivityThread.java:4123)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at java.lang.reflect.Method.invokeNative(Native Method)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at java.lang.reflect.Method.invoke(Method.java:491)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at dalvik.system.NativeStart.main(Native Method)
04-23 14:13:07.720: E/AndroidRuntime(1440): Caused by: java.lang.reflect.InvocationTargetException
04-23 14:13:07.720: E/AndroidRuntime(1440):     at java.lang.reflect.Constructor.constructNative(Native Method)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at java.lang.reflect.Constructor.newInstance(Constructor.java:416)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at android.view.LayoutInflater.createView(LayoutInflater.java:576)
04-23 14:13:07.720: E/AndroidRuntime(1440):     ... 21 more
04-23 14:13:07.720: E/AndroidRuntime(1440): Caused by: android.view.InflateException: Binary XML file line #22: Error inflating class <unknown>
04-23 14:13:07.720: E/AndroidRuntime(1440):     at android.view.LayoutInflater.createView(LayoutInflater.java:596)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at android.view.LayoutInflater.onCreateView(LayoutInflater.java:644)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:669)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:724)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at android.view.LayoutInflater.inflate(LayoutInflater.java:479)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at android.view.LayoutInflater.inflate(LayoutInflater.java:391)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at android.view.LayoutInflater.inflate(LayoutInflater.java:347)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at com.android.internal.widget.ActionBarView.initTitle(ActionBarView.java:572)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at com.android.internal.widget.ActionBarView.setDisplayOptions(ActionBarView.java:401)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at com.android.internal.widget.ActionBarView.<init>(ActionBarView.java:202)
04-23 14:13:07.720: E/AndroidRuntime(1440):     ... 24 more
04-23 14:13:07.720: E/AndroidRuntime(1440): Caused by: java.lang.reflect.InvocationTargetException
04-23 14:13:07.720: E/AndroidRuntime(1440):     at java.lang.reflect.Constructor.constructNative(Native Method)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at java.lang.reflect.Constructor.newInstance(Constructor.java:416)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at android.view.LayoutInflater.createView(LayoutInflater.java:576)
04-23 14:13:07.720: E/AndroidRuntime(1440):     ... 34 more
04-23 14:13:07.720: E/AndroidRuntime(1440): Caused by: java.lang.UnsupportedOperationException: Can't convert to color: type=0x2
04-23 14:13:07.720: E/AndroidRuntime(1440):     at android.content.res.TypedArray.getColor(TypedArray.java:326)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at android.widget.TextView.<init>(TextView.java:422)
04-23 14:13:07.720: E/AndroidRuntime(1440):     at android.widget.TextView.<init>(TextView.java:364)
04-23 14:13:07.720: E/AndroidRuntime(1440):     ... 37 more
04-23 14:13:07.980: D/dalvikvm(1440): GC_CONCURRENT freed 353K, 6% free 7844K/8263K, paused 4ms+2ms
04-23 14:13:09.370: D/webviewglue(1440): nativeDestroy view: 0x203140 
```

* * *

这就是我放入 XML 文件的内容：

```
 <com.google.ads.AdView android:id="@+id/adView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        ads:adUnitId="XXXXXXX"
        ads:adSize="BANNER"
        ads:loadAdOnCreate="true"/>
 </LinearLayout> 
```

* * *

我正在使用 SDK 18，Android 版本是 3.2。

对于 AdMob SDK，它是 6.0。

有人知道吗？

谢谢。

* * *

```
 android.view.InflateException: Binary XML file line #30: Error inflating class com.android.internal.widget.ActionBarView
at android.view.LayoutInflater.createView(LayoutInflater.java:606)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
at com.android.internal.policy.impl.PhoneWindow.generateLayout(PhoneWindow.java:2707)
at com.android.internal.policy.impl.PhoneWindow.installDecor(PhoneWindow.java:2767)
at com.android.internal.policy.impl.PhoneWindow.getDecorView(PhoneWindow.java:1534)
at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2498)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1986)
at android.app.ActivityThread.access$600(ActivityThread.java:123)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:137)
at android.app.ActivityThread.main(ActivityThread.java:4424)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:511)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
at dalvik.system.NativeStart.main(Native Method)
Caused by: java.lang.reflect.InvocationTargetException
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
at android.view.LayoutInflater.createView(LayoutInflater.java:586)
... 21 more
Caused by: android.view.InflateException: Binary XML file line #36: Error inflating class <unknown>
at android.view.LayoutInflater.createView(LayoutInflater.java:606)
at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
at android.view.LayoutInflater.onCreateView(LayoutInflater.java:653)
at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:678)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:739)
at android.view.LayoutInflater.rInflate(LayoutInflater.java:742)
at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
at com.android.internal.widget.ActionBarView.initTitle(ActionBarView.java:726)
at com.android.internal.widget.ActionBarView.setDisplayOptions(ActionBarView.java:563)
at com.android.internal.widget.ActionBarView.<init>(ActionBarView.java:232)
... 24 more
Caused by: java.lang.reflect.InvocationTargetException
at java.lang.reflect.Constructor.constructNative(Native Method)
at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
at android.view.LayoutInflater.createView(LayoutInflater.java:586)
... 34 more
Caused by: java.lang.UnsupportedOperationException: Can't convert to color: type=0x2
at android.content.res.TypedArray.getColor(TypedArray.java:326)
at android.widget.TextView.<init>(TextView.java:503)
at android.widget.TextView.<init>(TextView.java:442)
... 37 more 
```

# c# - C# 的内联服务器代码在移动到 JavaScript .js 文件时无法工作

> ID：10285208
> 
> 赞同：1
> 
> 时间：2012-04-23T17:23:47.420
> 
> 标签：c#, javascript, file, inline

在我的 C# 代码后面的页面中，我有以下内容：

```
MembershipUser currentUser = Membership.GetUser(false);

HttpContext.Current.Session["UserGuidAsString"] = currentUser.ProviderUserKey.ToString(); 
```

在相应的 ASPX 页面的底部，我有以下代码：

```
</form>
<script type="text/javascript"> var userGuidAsString = '<%=Session["UserGuidAsString"]%>';
                                alert(userGuidAsString);
</script>
</body>
</html> 
```

它给出了正确的预期结果，这是我运行页面时带有用户 GUID 的警告框

我想将 JavaScript 代码移动到 .js 文件中，以便代码更加模块化和有条理。我创建了以下包含以下内容的 test.js javascript 文件：

```
var userGuidAsString = '<%=Session["UserGuidAsString"]%>';
alert(userGuidAsString); 
```

我还修改了 ASPX 页面，使其包含 test.js javascript 文件：

```
</form>
    <script src="/Scripts/test.js" type="text/javascript"></script>
    </script>
</body>
</html> 
```

它失败了，因为它只是给出了一个带有 '<%=Session["UserGuidAsString"]%>' 作为消息的警告框

我可以知道如何使在线服务器 C# 代码在 JavaScript .js 文件中工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T17:27:53.407

通过这个你访问的服务器变量

```
'<%=Session["UserGuidAsString"]%>' 
```

它不是Javascript的功能。

您也可以在没有 js 块的情况下编写此代码.. 它就像 ASP 代码.. 所以它只能在 .aspx 页面上工作，而不是在 javascript 中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:30:29.280

一个常见的解决方法是将 server 变量放在 html 隐藏元素中。例如：

```
<input type="hidden" id='guid' value='<%=Session["UserGuidAsString"]%>' /> 
```

然后你的javascript文件：

```
var guid = document.getElementById("guid").value; 
```

**或者**，您可以在您的 html 中定义一个 js 变量，并在您的 js 文件中引用它。只需确保在引用变量之前声明它。

```
<script type="text/javascript">
    var guid = '<%=Session["UserGuidAsString"]%>';
</script>
<script type="text/javascript" src="yourScript.js></script> 
```

然后在您的 js 文件中，您可以简单地使用该`guid`变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T17:31:17.907

为了在 .js 文件到达客户端之前在服务器上执行 C#，您必须在 IIS 中注册该页面扩展名，以便 asp_net .dll 处理 .js 文件。

在您的特定情况下（处理 GUID），您真的不想走这条路，因为 .js 文件缓存的性质，您将遇到很多问题，以确保它是每个都提供的新版本时间。

我建议重新创建一个非常简单（是的，模块化/可重用）的 JS 函数，该函数使用 AJAX 或等效方法调用例如 GetUserGuidAsString.aspx。

# java - Java Bean：如何 在 生成成Java代码

> ID：10285209
> 
> 赞同：2
> 
> 时间：2012-04-23T17:23:47.347
> 
> 标签：java, jsp, javabeans

例如，我有这个代码：

```
<jsp:useBean id="dog" class="Dog" scope="application">
     <jsp:setProperty name="dog" property="breed" value="House Dog !!!"/>
</jsp:useBean> 
```

我知道它是如何工作的。但是，有时，我会在其中更改一些代码，例如：“dog”到“newDog”，我会遇到错误或unguested-result（和我一起）。

请告诉我上面的代码是如何生成Java的。（也许只是一个主要想法）

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T23:02:10.943

JSP 最终生成为`.java`编译为 servlet 的类。检查服务器的工作文件夹。在 Tomcat 的情况下，将在 Tomcat 的文件夹中`/test.jsp`生成一个文件。`/org/apache/jsp/test_jsp.java``/work`

以下几行

```
<jsp:useBean id="dog" class="com.example.Dog" scope="application">
     <jsp:setProperty name="dog" property="breed" value="House Dog !!!"/>
</jsp:useBean> 
```

*（我所做的唯一更改是添加一个包；无包类是 Bad™）*

生成为

```
 com.example.Dog dog = null;
  synchronized (application) {
    dog = (com.example.Dog) _jspx_page_context.getAttribute("dog", javax.servlet.jsp.PageContext.APPLICATION_SCOPE);
    if (dog == null){
      dog = new com.example.Dog();
      _jspx_page_context.setAttribute("dog", dog, javax.servlet.jsp.PageContext.APPLICATION_SCOPE);
      out.write("\n");
      out.write("     ");
      org.apache.jasper.runtime.JspRuntimeLibrary.introspecthelper(_jspx_page_context.findAttribute("dog"), "breed", "House Dog !!!", null, null, false);
      out.write('\n');
    }
  } 
```

Tomcat 是开源的，根据其源代码，`JspRuntimeLibrary#introspecthelper()`委托给`internalIntrospecthelper()`它的方法最终会这样做：

```
Method method = null;
Class<?> type = null;
Class<?> propertyEditorClass = null;
try {
    java.beans.BeanInfo info
        = java.beans.Introspector.getBeanInfo(bean.getClass());
    if ( info != null ) {
        java.beans.PropertyDescriptor pd[]
            = info.getPropertyDescriptors();
        for (int i = 0 ; i < pd.length ; i++) {
            if ( pd[i].getName().equals(prop) ) {
                method = pd[i].getWriteMethod();
                type   = pd[i].getPropertyType();
                propertyEditorClass = pd[i].getPropertyEditorClass();
                break;
            }
        }
    }
    if ( method != null ) {
        if (type.isArray()) {
            if (request == null) {
                throw new JasperException(
                    Localizer.getMessage("jsp.error.beans.setproperty.noindexset"));
            }
            Class<?> t = type.getComponentType();
            String[] values = request.getParameterValues(param);
            //XXX Please check.
            if(values == null) return;
            if(t.equals(String.class)) {
                method.invoke(bean, new Object[] { values });
            } else {
                createTypedArray (prop, bean, method, values, t,
                                  propertyEditorClass); 
            }
        } else {
            if(value == null || (param != null && value.equals(""))) return;
            Object oval = convert(prop, value, type, propertyEditorClass);
            if ( oval != null )
                method.invoke(bean, new Object[] { oval });
        }
    }
} catch (Exception ex) {
    Throwable thr = ExceptionUtils.unwrapInvocationTargetException(ex);
    ExceptionUtils.handleThrowable(thr);
    throw new JasperException(ex);
} 
```

你看，它是[`java.beans.Introspector`](http://docs.oracle.com/javase/6/docs/api/java/beans/Introspector.html)用来获取 bean 信息和属性的[`BeanInfo#getPropertyDescriptors()`](http://docs.oracle.com/javase/6/docs/api/java/beans/BeanInfo.html#getPropertyDescriptors%28%29)。所需的`<jsp:setProperty>`方法由[`java.lang.reflect.Method`](http://docs.oracle.com/javase/6/docs/api/java/lang/reflect/Method.html)获得[`PropertyDescriptor#getWriteMethod()`](http://docs.oracle.com/javase/6/docs/api/java/beans/PropertyDescriptor.html#getWriteMethod%28%29)。最后，它使用[反射 API](http://docs.oracle.com/javase/tutorial/reflect/index.html)来调用该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T17:28:11.320

它是这样生成的：

```
Dog dog = new Dog();
dog.setBreed("House Dog !!!"); 
```

setProperty 中的 dog 是对 useBean 的 Class Dog 的引用。希望你明白这一点

# c# - 混淆使用来自另一个类的属性和实例

> ID：10285211
> 
> 赞同：0
> 
> 时间：2012-04-23T17:23:55.577
> 
> 标签：c#

我已经从另一个类实例化了一个对象，以便使用该类的属性。在按钮事件中一切正常，但是，在按钮事件之外，我收到一个错误，告诉我我的实例化对象被用作一种类型。如果我采用相同的代码并将其剪切并粘贴到按钮事件中，我不会收到错误消息。我不明白发生了什么以及为什么。对象被实例化，无论它是在按钮事件内部还是外部，那么为什么它不能在按钮事件之外工作呢？我需要在表单打开后立即从另一个表单中自动填充这两个标签字段，而不是在单击按钮时。

这是我的代码：

```
public partial class MeasurementsForm : Form
{
    private MeasurementsBOL busObject = new MeasurementsBOL();

    //autofill bodyfat and body weight from nutrition form when form opens
    busObject.BodyFatB4 = double.Parse(lblBodyFatB4FromNutrition.Text);
    busObject.BodyWeightB4 = double.Parse(lblWeightB4FromNutrition.Text);

    //default constructor
    public MeasurementsForm()
    {
        InitializeComponent();
        busObject.InitializeConnection();
    }        

    //event handler for B4 input data
    private void btnEnterMeasurementsB4_Click(object sender, EventArgs e)
    {

        //convert input data and assign to variables
        busObject.ChestMeasurementB4 = double.Parse(txtChestB4.Text);
        busObject.WaistMeasurementB4 = double.Parse(txtWaistB4.Text);
        busObject.HipsMeasurementB4 = double.Parse(txtHipsB4.Text);
        busObject.RightThighB4 = double.Parse(txtRightThighB4.Text);
        busObject.LeftThighB4 = double.Parse(txtLeftThighB4.Text);
        busObject.RightArmB4 = double.Parse(txtRightArmB4.Text);
        busObject.LeftArmB4 = double.Parse(txtLeftArmB4.Text);

        //call method to save input data
        busObject.SaveB4Data();

        //clear text boxes of data
        this.txtChestB4.Clear();
        this.txtWaistB4.Clear();
        this.txtHipsB4.Clear();
        this.txtRightThighB4.Clear();
        this.txtLeftThighB4.Clear();
        this.txtRightArmB4.Clear();
        this.txtLeftArmB4.Clear();

        //close form
        this.Close();
    } 
```

这是我在 MeasurementsBOL 类中的两个属性。虽然我没有展示，但是对象已经被实例化了：

```
//properties for variables
public double BodyFatB4 
{
    get { return bodyFatB4; }
    set { bodyFatB4 = nutritionObject.BodyFatStart;}
}

public double BodyWeightB4 
{ 
    get { return bodyWeightB4; }
    set { bodyWeightB4 = nutritionObject.BodyWeight; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T17:26:54.827

此代码不在任何方法、构造函数等中：

```
private MeasurementsBOL busObject = new MeasurementsBOL();

//autofill bodyfat and body weight from nutrition form when form opens
busObject.BodyFatB4 = double.Parse(lblBodyFatB4FromNutrition.Text);
busObject.BodyWeightB4 = double.Parse(lblWeightB4FromNutrition.Text); 
```

有一个变量声明很好，但你不能只添加这样的额外语句。幸运的是，您*可以*使用[对象初始化器](http://msdn.microsoft.com/en-us/library/bb397680.aspx)：

```
private MeasurementsBOL busObject = new MeasurementsBOL()
{
    BodyFatB4 = double.Parse(lblBodyFatB4FromNutrition.Text),
    BodyWeightB4 = double.Parse(lblWeightB4FromNutrition.Text)
}; 
```

基本上，一个类型只能包含字段声明、构造函数声明、属性声明、方法声明等成员。它不能只包含语句。

# r - 引导：统计错误（数据，原始，...）：未使用的参数（原始）

> ID：10285214
> 
> 赞同：10
> 
> 时间：2012-04-23T17:24:08.510
> 
> 标签：r

我有一个位置估计数据库，并且想要计算每月内核利用率分布。我可以使用 R 中的 adehabitat 包来做到这一点，但我想使用从数据库中抽取样本来估计这些值的 95% 置信区间。今天我一直在尝试启动包，但我对 R 还是很陌生，需要更多专家的帮助！我收到的主要错误消息是：

```
Error in statistic(data, original, ...) : unused argument(s) (original) 
```

这是我一直在使用的文件：

```
 head(all)
Num          Hourbin  COA_Lat   COA_Lon  POINT_X POINT_Y   month year    id
1 07/10/2010 15:00 48.56225 -53.89144 729339.9 5383461 October 2010 29912
2 07/10/2010 16:00 48.56254 -53.89121 729355.7 5383495 October 2010 29912
4 07/10/2010 18:00 48.56225 -53.89144 729339.7 5383461 October 2010 29912
5 07/10/2010 19:00 48.56225 -53.89144 729339.9 5383461 October 2010 29912
6 07/10/2010 20:00 48.56225 -53.89144 729339.8 5383461 October 2010 29912
7 07/10/2010 21:00 48.56225 -53.89144 729339.9 5383461 October 2010 29912 
```

第 5 列和第 6 列分别是 X 和 Y 位置。我将这个数据集分为不同月份（即获取名为“oct”、“nov”等的文件）。我尝试将 adehabitat 包中的 kernelUD 函数设置为可以调用以进行引导的函数，但到目前为止还没有运气。

```
kUDoct<-function(i) kernel.area(oct[,5:6],oct[,10],kern="bivnorm",unin=c("m"),unout=c("km2"))
bootoct<-boot(oct,kUDoct,R=1000)
Error in statistic(data, original, ...) : unused argument(s) (original) 
```

任何帮助将不胜感激！

米

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T17:41:54.177

好吧，您遇到*的一个*问题是您没有使用`boot`文档指导您使用的功能。从`?boot`我们看到，第二个论点`statistic`是：

> 一个函数，当应用于数据时返回一个包含感兴趣的统计数据的向量。当 sim = "parametric" 时，statistic 的第一个参数必须是数据。对于每个复制，将传递由 ran.gen 返回的模拟数据集。在所有其他情况下，statistic 必须至少有两个参数。传递的第一个参数将始终是原始数据。第二个将是定义引导样本的索引、频率或权重的向量。

请注意，这意味着您的函数应定义为*至少*采用两个参数。你只接受一个（然后完全忽略它，奇怪的是）。

这个想法是你传入你的原始数据和一个索引向量。然后，您通过使用这些指标对原始数据进行子集化来计算您感兴趣的统计数据，这将构成一个“引导样本”。

所以代替这个：

```
kUDoct<-function(i) kernel.area(oct[,5:6],oct[,10],kern="bivnorm",unin=c("m"),unout=c("km2"))
bootoct<-boot(oct,kUDoct,R=1000) 
```

你可能想做更多这样的事情：

```
kUDoct<-function(dat,ind) kernel.area(dat[ind,5:6],dat[ind,10],kern="bivnorm",unin=c("m"),unout=c("km2"))
bootoct<-boot(oct,kUDoct,R=1000) 
```

但我无法诊断您可能遇到的任何其他错误，因为您的示例并非完全可重现。

# javascript - 动态生成字段的jQuery增量和减量

> ID：10285218
> 
> 赞同：0
> 
> 时间：2012-04-23T17:24:16.013
> 
> 标签：javascript, jquery, jquery-mobile

我有简单的 [代码](http://jsfiddle.net/maksim/uSzr7/)来增加和减少字段。一切都很好，但我不知道我得到了多少字段（它由 mvc 生成） 我的问题是如何为页面上的每个字段智能绑定两个按钮？我尝试使用 `$(this.id+"x").val(currentVal - 1)`，但我认为这是错误的方式。

感谢您的任何建议

额外的：

1.  我不能使用 Jquery Mobile 范围输入。
2.  文本框“Text Pin #4”必须始终聚焦。
3.  所有按钮都必须可以点击移动设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:20:55.420

您可以选择与触发事件的元素相关的元素：

```
$(".bplus").click(function() {

    //find the input relative to this element
    $(this).closest('td').prev().children('input').val(function (i, oldValue) {

        //make sure the old value is being interpreted as an integer
        oldValue = parseInt(oldValue, 10);

        //if the old value is a valid integer below 999 then add one,
        //otherwise return 999
        return (oldValue != NaN && oldValue < 999) ? (oldValue + 1) : 999;
    });
});

$(".bminus").click(function() {

    //find the input relative to this element
    $(this).closest('td').next().children('input').val(function (i, oldValue) {

        //make sure the old value is being interpreted as an integer
        oldValue = parseInt(oldValue, 10);

        //if the old value is a valid integer above 0 then subtract one,
        //otherwise return 0
        return (oldValue != NaN && oldValue > 0) ? (oldValue - 1) : 0;
    });
}); 
```

这是一个演示：http: [//jsfiddle.net/uSzr7/16/](http://jsfiddle.net/uSzr7/16/)

这是给你的一些文档：

*   `.closest()`：[http ://api.jquery.com/closest](http://api.jquery.com/closest)
*   `.prev()`：[http ://api.jquery.com/prev](http://api.jquery.com/prev)
*   `.children()`：[http ://api.jquery.com/children](http://api.jquery.com/children)
*   `.val()`：[http](http://api.jquery.com/val) ://api.jquery.com/val （参见传递`.val()`函数的部分）

处理验证的另一种方法是始终添加或减去一个，然后将`change`事件处理程序添加到`input`检查以确保值有效的元素。这有助于使用本机表单控件，因为您使用的是`type="number"`输入标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T17:34:19.873

```
$(".bplus").click(function(){
    var txtField = $(this).parents('tr').find('input[type="number"]')
    var currentVal = parseInt(txt.val());
    if (currentVal < 999)
        txtField.val((currentVal || 0) + 1);
}); 
```

我说`(currentVal || 0)`，这意味着如果`currentVal==NaN`，它将被0替换

# android - 使用 SharedPreferences 在列表视图中存储复选框的状态

> ID：10285230
> 
> 赞同：2
> 
> 时间：2012-04-23T17:24:53.017
> 
> 标签：android, sharedpreferences

下次打开应用程序时，我将如何使用共享首选项来存储复选框的状态？我正在使用自定义适配器，所以我猜它必须放在里面，但我不太确定。

我的适配器：

```
public class MobileArrayAdapter extends ArrayAdapter<String> {
private final Context context;
private final String[] values;
private ArrayList<Boolean> itemChecked = new ArrayList<Boolean>();

    public MobileArrayAdapter(Context context, String[] values) {
        super(context, R.layout.list_adapter, values);
        this.context = context;
        this.values = values;

        for (int i = 0; i < this.getCount(); i++) {
            itemChecked.add(i, false);
        }
    }

    @Override
    public View getView(final int position, View convertView,
            ViewGroup parent) {
        View rowView = convertView;
        if (rowView == null) {
            LayoutInflater inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            rowView = inflater.inflate(R.layout.list_adapter,
                    parent, false);
        }
           // in your code you search for the CheckBox with the id checkBox1 2 times so I assumed that you are referring to the same view.
        CheckBox cBox = (CheckBox) rowView.findViewById(R.id.checkBox1);
        cBox.setTextColor(0xFFFFFFFF);
        cBox.setText(values[position]);       
        cBox.setOnCheckedChangeListener(new OnCheckedChangeListener() {

            public void onCheckedChanged(CompoundButton buttonView,
                    boolean isChecked) {
                if (isChecked) {
                    itemChecked.set(position, true);
                    // do some operations here
                } else {
                    itemChecked.set(position, false);
                    // do some operations here
                }
            }
        });
        cBox.setChecked(itemChecked.get(position));
        return rowView;
    }

} 
```

我的主要活动：

```
public class TheKevinAndEricaBoxActivity extends Activity {
/** Called when the activity is first created. */
private String[] myString;
private String list;
private String[] myString2;
private String list2;
private static final Random rgenerator = new Random();
private static final Random rgenerator2 = new Random();
MediaPlayer mp;
final Context mContext = this;
final Context context = this;
private Button button;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Resources res = getResources();
    addListenerOnButton();

    myString = res.getStringArray(R.array.myArray);

    list = myString[rgenerator.nextInt(myString.length)];

    myString2 = res.getStringArray(R.array.myArray2);

    list2 = myString2[rgenerator.nextInt(myString2.length)];
}

    public void addListenerOnButton() {

        final Context context2 = this;

        ImageButton ibg = (ImageButton) findViewById(R.id.buttongallery);

        ibg.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {

                Intent intent = new Intent(context2, App2Activity.class);
                startActivityForResult(intent, 0);   

            }

        });

    ImageButton ib = (ImageButton) findViewById(R.id.imagebutton1);
    ib.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View erica) {
            AlertDialog.Builder b = new AlertDialog.Builder(
                    TheKevinAndEricaBoxActivity.this);
            b.setMessage(myString[rgenerator.nextInt(myString.length)]);
            b.setTitle(R.string.title1);
            b.setIcon(R.drawable.menuiconerica);
            b.setPositiveButton("Back",
                    new DialogInterface.OnClickListener() {
                        @Override
                        public void onClick(DialogInterface dialog,
                                int which) {
                            dialog.cancel();
                        }
                    });
            Dialog d = b.create();
            d.show();
        }
    });

    ImageButton ib2 = (ImageButton) findViewById(R.id.imagebutton2);
    ib2.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View kevin) {
            AlertDialog.Builder b = new AlertDialog.Builder(
                    TheKevinAndEricaBoxActivity.this);
            b.setMessage(myString2[rgenerator2.nextInt(myString2.length)]);
            b.setTitle(R.string.title2);
            b.setIcon(R.drawable.menuiconkevin);
            b.setPositiveButton("Back",
                    new DialogInterface.OnClickListener() {
                        @Override
                        public void onClick(DialogInterface dialog,
                                int which) {
                            dialog.cancel();
                        }
                    });
            Dialog d = b.create();
            d.show();

        }
    });

    ImageButton Ib3 = (ImageButton) findViewById(R.id.imagebutton3);
    Ib3.setOnClickListener(new View.OnClickListener() {
        public void onClick(View lemonclick) {
            mp = MediaPlayer.create(getApplicationContext(),R.raw.lemonspeech);
            mp.start();

        }
    });
    button = (Button) findViewById(R.id.button01);

    // add button listener
    button.setOnClickListener(new OnClickListener() {

      public void onClick(View arg0) {

        // custom dialog
        final Dialog dialog = new Dialog(context);
        dialog.setContentView(R.layout.list);
        dialog.setTitle("The List");

        // set the custom dialog components - text, image and button
        //TextView text = (TextView) dialog.findViewById(R.id.TextView01);
        //text.setText("Did you not read the button? :P i'm not finshed on this yet XD");

        ListView listView = (ListView) findViewById(R.id.myList);
        String[] values = new String[] { "value1", "value2", };

        MobileArrayAdapter mAdapter = new MobileArrayAdapter(getBaseContext(), values);
        ListView mListView = (ListView) dialog.findViewById(R.id.myList);
        mListView.setAdapter(mAdapter);

        Button dialogButton = (Button) dialog.findViewById(R.id.Button01);
        // if button is clicked, close the custom dialog
        dialogButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                dialog.dismiss();
            }
        });

        dialog.show();
      }

    });
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T18:36:15.690

在`OnCLickListener`为你`Button`添加这个：

```
//...
// custom dialog
final Dialog dialog = new Dialog(context);
dialog.setContentView(R.layout.list);
dialog.setTitle("The List");

prefs = PreferenceManager.getDefaultSharedPreferences(this);
prefsEditor = prefs.edit();
String currentlyStored = prefs.getString("checked_list", null);
int[] savedStatus = null;
if (currentlyStored != null) {
    String[] tmp = currentlyStored.split(",");
    savedStatus = new int[tmp.length];
    for (int i = 0; i < tmp.length; i++) {
        savedStatus[i] = Integer.parseInt(tmp[i]);
    }
}
adapter = new MobileArrayAdapter(this, soundnames, savedStatus);
ListView mListView = (ListView) dialog.findViewById(R.id.myList);
mListView.setAdapter(mAdapter);
//... 
```

在哪里：

```
private SharedPreferences prefs;
private SharedPreferences.Editor prefsEditor;
private MobileArrayAdapter adapter; 
```

是您类中的字段`ListView`（该`adapter`字段将保存您在列表中设置的适配器对象）。

像这样修改自定义适配器的构造函数：

```
public MobileArrayAdapter(Context context, String[] values,
                int[] oldStatus) {
            super(context, R.layout.adapters_simpleplay_row, values);
            this.context = context;
            this.values = values;

            // make every CheckBox unchecked and then loop through oldStatus(if
            // not null)
            for (int i = 0; i < this.getCount(); i++) {
                itemChecked.add(i, false);
            }
            if (oldStatus != null) {
                for (int j = 0; j < oldStatus.length; j++) {
                    itemChecked.set(oldStatus[j], true);
                }
            }
        } 
```

还在您的自定义适配器中添加以下方法`MobileArrayAdapter`：

```
public ArrayList<Boolean> getCheckedStatus() {
            return itemChecked;
} 
```

最后在你的监听器中`dialogButton`添加这个：

```
dialogButton.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                            String toStore = "";
            ArrayList<Boolean> status = adapter.getCheckedStatus();
            for (int i = 0; i < status.size(); i++) {
                if (status.get(i)) {
                    toStore += i + ",";
                }
            }
            prefsEditor.putString("checked_list", toStore.equals("") ? null
                    : toStore.substring(0, toStore.length() - 1));
            prefsEditor.commit();
                dialog.dismiss();
            }
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:54:56.550

要保存选择，请创建一个方法 saveSelections 并在`onPause()`and中调用它`onDestroy()`，或者创建一个 Button 为您做同样的事情......编辑：

由于您使用的`ListView`是 MultipleChoice 我想您可以在 onCreate 中执行此操作...

```
listView = (ListView) findViewById(R.id.list);
        listView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE);
        listView.setAdapter(new ArrayAdapter<String>(this,
                android.R.layout.simple_list_item_multiple_choice,
                android.R.id.text1, names)); 
```

在 onCreate() 之外创建这三个方法

```
private void LoadSelections() {
        SharedPreferences sp = getPreferences(MODE_PRIVATE);
        if (sp.contains(LOAD_LIST)) {
            String savedItems = sp.getString(LOAD_LIST, "");
            this.selectedItems.addAll(Arrays.asList(savedItems.split(",")));
            int count = this.listView.getAdapter().getCount();
            for (int i = 0; i < count; i++) {
                String currentItem = (String) listView.getAdapter().getItem(i);
                if (this.selectedItems.contains(currentItem)) {
                    this.listView.setItemChecked(i, true);
                }

            }
        }
    }

    public void SaveSelections() {
        SharedPreferences sp = getPreferences(MODE_PRIVATE);
        SharedPreferences.Editor prefEditor = sp.edit();
        String savedItems = getSavedItems();
        prefEditor.putString(LOAD_LIST, savedItems);
        prefEditor.commit();
    }

    private String getSavedItems() {
        String savedItems = "";
        int count = listView.getAdapter().getCount();
        for (int i = 0; i < count; i++) {
            if (listView.isItemChecked(i)) {
                if (savedItems.length() > 0) {
                    savedItems += "," + listView.getItemAtPosition(i);
                } else {
                    savedItems += listView.getItemAtPosition(i);
                }
            }
        }
        return savedItems;
    } 
```

然后在 onPause() 中，执行以下操作：

```
@Override
protected void onPause() {
    SaveSelections();
    super.onPause();
} 
```

然后最后在 onCreate 调用这个..

```
LoadSelections(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T18:12:14.283

您可以创建一个 0 和 1 的字符串并使用共享首选项存储它。您正在使用的复选框数量（或视图数量）将是字符串的长度。你相应地保存它。

例如：

```
String s[]="0000000000";
for (i=0;i<s.length();i++)
if (checkboxAtLocation(i)==true)    //checkboxAtLocation() will return a boolean variable on basis of its checked or not
    s[i]=1; 
```

现在存储这个字符串。再次开始活动时，使用此字符串设置复选框。

据我所知，这实现起来有点复杂，但最有效的方式。我希望它能解决你的疑问。

# java - 主框架顶部的重叠面板

> ID：10285235
> 
> 赞同：0
> 
> 时间：2012-04-23T17:25:31.017
> 
> 标签：java, swing, desktop-application

我试图让 3 个不同的面板相互重叠。

简单描述：我有一张简单的地图，在这张地图上我需要一个指南针和一些文本字段。

解决此问题的最佳方法是什么？

在桌面上。

（爪哇）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T18:04:43.823

好问题，你确实可以。您需要使用[JLayeredPane](http://java.sun.com/javase/6/docs/api/javax/swing/JLayeredPane.html)。从外观上看，它的工作方式类似于普通窗格，只是您可以指定某些组件所在的*层。*

# jquery - jTemplates中的局部变量/for循环

> ID：10285236
> 
> 赞同：1
> 
> 时间：2012-04-23T17:25:32.253
> 
> 标签：jquery, jtemplates

是否可以在 jtemplate 中创建局部变量或 for 循环（而不是 foreach）？我想为 HTML 元素提供唯一的 id，并且需要一个计数器或其他东西。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T17:33:47.290

采用`$index`

```
$index - index of the element in the table
$iteration - ID of the iteration (the next number begins from 0)
$first - is this the first iteration?
$last - is this the last iteration?
$total - the total number of iterations 
```

前任

```
{#foreach $T.Rows as row}
  $T.row$index
{#/for} 
```

阅读[http://www.codeproject.com/Articles/45759/jQuery-jTemplates-Grid](http://www.codeproject.com/Articles/45759/jQuery-jTemplates-Grid)

# html - html元素类命名的css技巧

> ID：10285237
> 
> 赞同：0
> 
> 时间：2012-04-23T17:25:32.997
> 
> 标签：html, css

我正在尝试在线查找教程或一些建议，以便在一个或多个 css 文件中构造和命名我的类名，以避免挫败感，增强可读性和可重用性。周围有任何提示或教程吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T17:30:48.040

根据类的内容而不是应用的样式或其位置来命名您的类。例如`div.navigation`优于`div.leftSidebar`，优于`div.grayBox`。

如需更多信息和示例，请阅读[此](http://sixrevisions.com/css/css-tips/css-tip-2-structural-naming-convention-in-css/)内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:38:11.697

这并不难。常识会做。我的经验法则是，如果你想给某样东西赋予某种风格，只要想一想你想要这样做的原因，并将该原因用作类名。如果您因为重要而想加粗，请使用`class="important"`. 就那么简单。

# google-app-engine - 使用 Objectify 从数据存储中检索 - 错误：您是否忘记继承所需的模块

> ID：10285239
> 
> 赞同：0
> 
> 时间：2012-04-23T17:25:41.467
> 
> 标签：google-app-engine, gwt, gwt-rpc, gwt2, objectify

我正在使用 Objectify 从 GWT 中的数据存储区检索数据，但出现以下错误：

> [错误] com.logins.entity.experts 类型没有可用的源代码；你忘了继承一个必需的模块吗？

我有客户端->实体->服务器，我确实使用 RemoteServicePath 正确定义了 RPC。我在客户端初始化了 Rpc

> 最终 findexpertAsync finexp=(findexpertAsync)GWT.create(findexpert.class);

GWT 编译器在我调用的方法中抛出错误，

```
finexp.expert(expnam, new AsyncCallback<ArrayList<experts>>()

Note: 
```

1) findexpert 和 FindexpertAsync 是 RPC 接口，它具有从数据存储区检索数据的方法 2) com.logins.entity.experts:experts 是一个服务器类。

任何猜测我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:50:42.930

从客户端直接或间接引用的所有类都必须是客户端源路径的一部分。您不能从 GWT 访问仅限服务器的代码。在这种情况下，“专家”类需要成为 GWT 编译的客户端代码的一部分。

另外：您应该将 Java 类名大写。

# c# - Gtk# - 清除 ComboBoxEntry 上的 ActiveText 的正确方法？

> ID：10285241
> 
> 赞同：1
> 
> 时间：2012-04-23T17:25:46.850
> 
> 标签：c#, mono, gtk, gtk#

我正在学习 C#/Gtk#，通过加入并为我自己的个人享受/折磨而创建一个应用程序的怪物。我最近的困惑是如何从 ComboBoxEntry 中清除项目。我确实找到了一种方法，但对我来说似乎很笨拙。

这是我的测试应用程序，我使用文本创建 ComboBoxEntry，然后单击一个按钮将其清除：

![初始应用程序负载](../Images/28962d4165f668b188cffbb9559cc34b.png)

然后，当我单击按钮将其清除时，项目被删除，但“foo”仍保留为活动文本：

![清除了组合的应用程序，但仍然有那个讨厌的 foo 在那里](../Images/75d1bfe888a5bf208dee15f89e161d6a.png)

无论如何，我想出了一种使用以下代码清除它的方法。似乎应该有更好的方法来做到这一点，但我找不到，所以我来这里进行完整性检查：

```
using System;
using Gtk;

public partial class MainWindow: Gtk.Window
{   
    ListStore comboModel1 = new ListStore (typeof(string)); 

    public MainWindow (): base (Gtk.WindowType.Toplevel)
    {
        Build ();

        ComboBoxEntry1.Model = comboModel1; 
        comboModel1.AppendValues ("foo");

        // Set "foo" as selected item
        Gtk.TreeIter iter;
        ComboBoxEntry1.Model.IterNthChild (out iter, 0);
        ComboBoxEntry1.SetActiveIter (iter);
    }

    protected void Button1OnClicked (object sender, System.EventArgs e)
    {
        // Just doing this  .Clear () still leaves "foo" as the ActiveText
        comboModel1.Clear ();

        // My kludge to clear ActiveText
        comboModel1.AppendValues ("");

        Gtk.TreeIter iter;
        ComboBoxEntry1.Model.IterNthChild (out iter, 0);
        ComboBoxEntry1.SetActiveIter (iter);

        comboModel1.Clear ();
    }

    protected void OnDeleteEvent (object sender, DeleteEventArgs a)
    {
        Application.Quit ();
        a.RetVal = true;
    }
} 
```

谢谢！杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T12:41:18.253

我刚刚在 MacOs 10.7 上对其进行了测试，一个简单的 comboModel1.Clear() 就可以了。没有 ActiveText，而且 Combobox 事件不再可访问，因为 ListStore 中没有值。所以也许这是Windows上的一个错误。但我对此表示怀疑，并将在 Windows 上进行测试。作为提示，您可以使用 GetIterFirst，而不是使用 IterNthChild。

# android - openSSL 使用 Android 的 NDK 问题

> ID：10285242
> 
> 赞同：3
> 
> 时间：2012-04-23T17:25:48.383
> 
> 标签：android, android-ndk, openssl, android-ndk-r7

我有以下情况，我正在移植一个使用 OpenSSL 进行 AES 加密的应用程序，我已经编译了所有内容，但是链接器失败了。情况如下： 1\. 我写了一个简单的 JNI 包装器：

```
private native String cipherString(String plainData, int datasize, String password, int passSize);
private native String decipherString(String cipheredData, int datasize, String password, int passSize); 
```

接下来我有一个我调用的 c++ 文件，它具有适当的 JNI sintax，它将 jstring 转换为 char * 和所有其他需要的转换，并调用另一个 cpp 文件，该文件实际上导入 openssl 标头（存在和占）并调用 openssl 方法用于加密和解密。

因此，当我调用 ndk-build 时，它会构建所有拇指，因此编译器会正确编译它们。接下来我需要为 android 移植 openssl，我使用了这个[用于 Android 的 OpenSSL，](https://github.com/guardianproject/openssl-android "适用于 Android 的 OpenSSL") 它就像一个带有简单 ndk-build 的字符（当然在项目的根目录中）并构建 libssl.so 和 libcrypto.so

所以我需要将两者连接起来。我发现连接构建脚本是一个挑战，因此一个 ndk-build 编译并链接所有内容（如果有人有时间，我将不胜感激一个简单的示例项目）

所以我在 jni/includes/prebuilt 中复制了已编译的 libssl 和 libcrypto .so 文件，并希望将它们包含在项目中，以便链接器能够最终创建我将在最后使用的 lib。

我有以下 Android.mk 文件

```
LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
include $(LOCAL_PATH)/includes/build/common.mk
include $(LOCAL_PATH)/includes/build/common_includes.mk
APP_STL := gnustl_static

LOCAL_MODULE    := packer
LOCAL_SRC_FILES := modules/cipher/wrapper.cpp \
                    ... #rest of the cpp code

LOCAL_C_INCLUDES += $(LOCAL_PATH)/includes/openssl 
LOCAL_SHARED_LIBRARIES := $(LOCAL_PATH)/includes/precompiled/libssl.so \
            $(LOCAL_PATH)/includes/precompiled/libcrypto.so 
LOCAL_SHARED_MODULES := sslx cryptox
include $(BUILD_SHARED_LIBRARY)

LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE := sslx
LOCAL_SRC_FILES := $(LOCAL_PATH)/includes/precompiled/libssh.so
include $(PREBUILT_SHARED_LIBRARY)

LOCAL_PATH := $(call my-dir)
include $(CLEAR_VARS)
LOCAL_MODULE := cryptox
LOCAL_SRC_FILES := $(LOCAL_PATH)/includes/precompiled/libssh.so
include $(PREBUILT_SHARED_LIBRARY) 
```

当调用 ndk-build 时，我感到很失望

```
sslx: LOCAL_SRC_FILES points to a missing file. Check that /home/user/Development/Tools/sdk/android/ndk/build/core//home/user/Development/Tools/sdk/android/ndk/build/core/includes/precompiled/libssh.so exists  or that its path is correct. Aborting    .  Stop. 
```

正如您已经猜到的那样，路径是完全错误的，让我感到困惑的是 ${LOCAL_PATH} 为第一批包含返回正确的路径，而为 .so 文件返回完全错误的路径......任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T09:58:10.523

这是解决方案，更新到NDK8c

**零步**：下载并修复 Android NDK 我不知道如何，但 ndk 有一个非常有趣的缺陷，（在我看来）不允许你编译很多东西，所以为了能够编译 OpenSSL，你需要制作一个小修复，提取 ndk8c 保存工具的任何位置，然后编辑文件：android-ndk-r8c/build/gmsl/__gmsl 第 512 行：更改行

```
int_encode = $(__gmsl_tr1)$(wordlist 1,$1,$(__gmsl_input_int)) 
```

带线

```
int_encode = $(__gmsl_tr1)$(wordlist 1,$(words $1),$(__gmsl_input_int)) 
```

你很高兴去！

**第一步**：下载 OpenSSL 并为 Android 编译：要么编译[**此处**](https://github.com/guardianproject/openssl-android)找到的移植版本， 要么下载 OpenSSL 的官方 1.0.0c 版本，然后使用我为 Android 兼容版本链接的 github 中提供的手册为 android 编译它

所以下一步就是获取**libssl.so**和**libcrypto.so** 并将它们放在 NDK 文件夹中以便于访问，因此将它们从

```
openssl-folder/libs/armeabi/ 
```

到

```
android-ndk-r8c/platforms/android-8/arch-arm/usr/lib 
```

这样编译时，您可以使用简单的链接器开关包含库`-lssl -lcrypto`

**第二步：****[在这里](http://curl.haxx.se/download.html)**获取 Curl 的最新资源

在 Docs/INSTALL 中打开文件并按照制作独立工具链所需的步骤并将其放入所需的文件夹，然后是棘手的部分，即使我有独立编译的，我也需要有 android 的源代码才能继续配置openssl 你也可以从那里包含头文件，无论如何这是更复杂的版本，所以你选择你做什么，我没有选择逃避它们，所以你可以去[谷歌 AOSP 网站](http://source.android.com/source/initializing.html)并通过构建和初始化的步骤环境。

所以它会是这样的：

1.下载，

1.  转到源代码的根目录并运行：

    〜：构建/envsetup.sh；午餐 1；制作;

所以最后我们需要编译带有 SSL 支持的 curl，所以，

**第三步**

将 curl 提取到所需的文件夹（我特别希望禁用除 http/s 之外的所有内容，以使库尽可能小，这意味着大约 300k，如果您想要在您的库中使用更多协议，请删除 --disable-protocol 的所需的协议）运行以下命令：

```
make clean

export PATH=/opt/arm-linux-androideabi-4.4.3/bin:$PATH

export LDFLAGS="\
-lssl \
-lcrypto \
-L/home/user/Development/Tools/sdk/android/ndk/platforms/android-8/arch-arm/usr/lib"

export CFLAGS="\
-I/home/user/Development/AOSP/2.3.7/system/core/include \
-I/home/user/Development/Tools/sdk/android/ndk/platforms/android-8/arch-arm/usr/include"

./configure --host=arm-linux-androideabi \
--with-ssl=/home/user/Development/Projects/portingLibs/openssl-android-master \
--disable-ftp \
--disable-gopher \
--disable-file \
--disable-imap \
--disable-ldap \
--disable-ldaps \
--disable-pop3 \
--disable-proxy \
--disable-rtsp \
--disable-smtp \
--disable-telnet \
--disable-tftp \
--without-gnutls \
--without-libidn \
--without-librtmp \
--disable-dict

make

Note that in the block above, if you don't want to use the AOSP source, you could switch 

-I/home/user/Development/AOSP/2.3.7/system/core/include \

with the include folder for your ssl distribution. 
```

所以最后你有：静态：

```
curl-7.28.1/lib/.libs/libcurl.a 
```

并分享：

```
curl-7.28.1/lib/.libs/libcurl.so.5.3 
```

就是这样..取文件，然后编译:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:27:41.180

@Tancho

我对您提到的 __gmsl:512 行进行了更改。虽然它允许 OpenSSL 进行编译，但它也通过 $(BUILD_EXECUTABLE) 破坏了可执行文件的构建。在更改之前，我的简单 hello world 应用程序编译并运行，但在更改之后它编译但在我的 Nexus 上运行它会导致段错误。

恢复更改，一切都好起来了。我不知道如何解决这个问题，我真的不知道那条线做了什么，但这只是对任何做出改变的人的一个小警告。

# c# - 通过 DataAnnotations 在 MVC 应用程序中的字段上设置最大日期时间

> ID：10285243
> 
> 赞同：1
> 
> 时间：2012-04-23T17:25:50.103
> 
> 标签：c#, asp.net-mvc, datetime, model-view-controller, data-annotations

我需要找到将 DateTime 字段限制为今天日期的最佳方法。我需要确保用户不会选择未来的日期，并且我正在尝试找出在我的 C# MVC 应用程序中执行此操作的最佳方法。

我可以并且我将通过 Javascript 在客户端执行此操作。我想弄清楚的是在服务器端通过 DataAnnotations 实现它的最佳方法是什么？

是否有可用于指定最大 DateTime 的 DataAnnotations 属性？或者通过数据注释不是一个好方法，因为我的 MaxDate 每天都会更改为当前日期？

我应该只通过 C# 编程逻辑进行验证吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:40:22.427

我的一个应用程序中有类似的东西

```
 public sealed class DateEndAttribute : ValidationAttribute
{
    public string DateStartProperty { get; set; }
    public override bool IsValid(object value)
    {
        // Get Value of the Date property
        string dateString = HttpContext.Current.Request[YourDateProperty];
        DateTime dateNow = DateTime.Now
        DateTime dateProperty = DateTime.Parse(dateString);

        // 
        return dateProperty < dateNow;
    }
} 
```

# macos - 如何为 adobe AIR 应用程序创建本机 Mac 安装程序文件？

> ID：10285246
> 
> 赞同：0
> 
> 时间：2012-04-23T17:26:05.577
> 
> 标签：macos, air, installation, package

如何为 adobe AIR 应用程序创建本机 Mac 安装程序文件？我可以使用windows创建它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T18:36:03.663

[在 OS X 上，如果您导出带有强制运行时的发布版本](http://help.adobe.com/en_US/flashbuilder/using/WSe4e4b720da9dedb5-13a250c812e8e9b5533-7ff9.html)，Flash Builder 将创建一个 .app 文件。不过，它只能在 OS X 上运行。

从那里，您可以创建一个 .dmg 来进一步打包您的应用程序，如：[如何从 python 包创建 osx 应用程序/dmg？](https://stackoverflow.com/questions/116657/how-do-you-create-an-osx-application-dmg-from-a-python-package)

# iphone - 使用条件语句以编程方式切换 UIButton 文本

> ID：10285252
> 
> 赞同：1
> 
> 时间：2012-04-23T17:26:36.737
> 
> 标签：iphone, objective-c, ios

这是我的代码（它包含在按下按钮时调用的 IBAction 中）：

```
if (myButton.currentTitle == @"test") {

    [myButton setTitle:@"test2" forState:UIControlStateNormal];
}

if (myButton.currentTitle == @"test2") {

    [myButton setTitle:@"test" forState:UIControlStateNormal];
} 
```

我希望 UIButton 文本在按下时切换（如果 text = "test" 然后更改为 "test2" 并且按下时如果 text = "test2" 更改为 "test"）。

我确实有一个连接到 myButton 的 IBOutlet 和连接到 myButton 的 IBAction——所以我很确定我的连接没有问题。

出于某种原因，这不起作用，我确定我遗漏了一些非常简单的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:28:41.370

使用 isEqualToString: 而不是 ==

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T17:29:11.030

`if`这是因为您缺少在第一个成功时跳过第二个的控制语句。当你进入带有 的块时`"test"`，你将它切换到`"test2"`，然后第二个条件立即成功，然后你又`"test2"`变成了`"@test"`。

您可以使用 an来解决此问题，但您可以通过使用将当前状态映射到新状态的an 来完全`else`跳过。`if``NSArray`

```
// This should be made static, and initialized only once
NSDictionary *nextTitle = [NSDictionary dictionaryWithObjectsAndKeys:
    @"test", @"test2", @"test2", @"test", nil];

// This line does the toggling
[myButton setTitle:[nextTitle valueForKey:myButton.currentTitle] forState:UIControlStateNormal]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T17:30:08.927

```
if ([myButton.currentTitle isEqualToString:@"test"]) {

  [myButton setTitle:@"test2" forState:UIControlStateNormal];
 }

if ([myButton.currentTitle isEqualToString:@"test2"]) {

   [myButton setTitle:@"test" forState:UIControlStateNormal];
} 
```

希望对你有帮助...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T17:51:57.347

比较用户可见的字符串通常被认为是不好的做法（当您需要执行 i18n 时会变得乏味），特别是对于字符串文字，因为它容易出现拼写错误。

如果您只是要在两种状态之间*切换*，最简单的方法是使用该`UIControl.selected`属性（对应于`UIControlStateSelected`）：

```
// In init
[myButton setTitle:@"test" forState:UIControlStateNormal];
[myButton setTitle:@"test2" forState:UIControlStateSelected];
[myButton setTitle:@"test2" forState:UIControlStateSelected|UIControlStateHighlighted];

// Toggle
myButton.selected = !myButton.selected; 
```

当您决定切换按钮图像/背景/文本颜色时，它也会使代码更清晰。

请注意轻微的问题：如果您没有设置标题，`UIControlStateSelected|UIControlStateHighlighted`它将`UIControlStateNormal`在按钮被选中和突出显示（触摸）时使用标题。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-23T17:30:51.280

将字符串相互比较时，请尝试使用`if([str1 compare:str2] == NSOrderedSame)`

# hadoop - hadoop中的文件拆分/分区

> ID：10285254
> 
> 赞同：0
> 
> 时间：2012-04-23T17:26:41.750
> 
> 标签：hadoop, cloud, hadoop-streaming

在 hadoop 文件系统中，我有两个文件，分别是 X 和 Y。通常，hadoop 会生成大小为 64 MB 的文件 X 和 Y 块。是否可以强制 hadoop 划分两个文件，以便从 X 的 32 MB 和 Y 的 32 MB 创建一个 64 MB 的块。换句话说，是否可以覆盖文件分区的默认行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:53:08.453

文件分区是 FileInputFormat 的一个功能，因为它在逻辑上取决于文件格式。您可以使用任何其他格式创建自己的输入。所以每个文件 - 你可以做到。
在单个拆分中混合不同文件的两个部分听起来有问题 - 因为文件是处理的基本单元。
你为什么有这样的要求？我看到下面的要求。可以说，必须至少部分牺牲数据局部性——我们可以将 map local 运行到一个文件，但不能同时运行到两个文件。
我建议构建某种“文件对”文件，将其放入分布式缓存中，然后在映射函数中从 HDFS 加载第二个文件。

# asp.net-mvc-3 - HtmlTextWriter & MVC 3 Razor 输出

> ID：10285255
> 
> 赞同：1
> 
> 时间：2012-04-23T17:26:44.777
> 
> 标签：asp.net-mvc-3, razor, htmltextwriter

这可能是一个快速修复，但我正在写`HtmlTextWriter`我的`HtmlHelper`，无论我尝试什么，它都会对 HTML 进行编码，因此输出会显示标记。

帮手：

```
protected override void WriteHtml(System.Web.UI.HtmlTextWriter writer)
        {
            writer.WriteFullBeginTag("div");
            writer.WriteEndTag("div");

            base.WriteHtml(writer);
        } 
```

它将把它放到页面上：`<div></div>`

**编辑**

我在这样的视图中调用它：

```
@Html.SAIF().Toolbar().Items(items => {
    items.Add().Action("Action");
    ... ...
}) 
```

**编辑#2**

好的，让我们看看我是否可以更好地解释一下。

如果我使用 ViewContext.Writer 将我的助手写入流，当使用如下语法时：

`@Html.MyHelper`

它输出编码的 HTML（例如）`<div>Test Div</div>`= 不正确

如果我使用这样的语法：

`@{Html.MyHelper.Render();}`

它正确呈现，这意味着它实际上将 div 插入到 DOM 中，而不是将其显示为字符串。

说得通？

# php - JavaScript 弹出窗口打开外部页面

> ID：10285257
> 
> 赞同：1
> 
> 时间：2012-04-23T17:27:13.237
> 
> 标签：php, javascript, jquery, html, jquery-plugins

我正在努力实现一个功能来打开一个带有外部链接的新窗口。我正在创建动态内容，并想编写一个函数，用给定的链接打开一个弹出/弹出窗口。请帮忙。我喜欢 jquery 对话框和 lightwindo 等。但是我无法实现其中的任何一个，任何帮助都将是 gerat，我对这个假设的小问题感到困惑和沮丧。. . 到目前为止，没有任何选项对他们有用。这里是我如何显示我的结果的代码，以及我认为我必须如何调用该函数来打开一个新窗口。所以这里的第二个功能是我需要一些帮助的功能，打开一个显示信息的漂亮弹出窗口..

```
// --------------------- display the course results -> structuring the returned array, to output all information into a table ----------------------
function displayCourses()
{

    var str = ' <table border="0" width="530">' +
                '<tr>' +
                    '<td width="150">Title / course code</td>' +
                    '<td>INFO</td>' +
                '</tr>';

    if(curCourseList == null)
    {
        str = str + '<tr><td colspan="2"><div id="msgDips"></div></td></tr>';
    }
    else
    {
        for (var i = 0; i < curCourseList.length; i++)
        {
            str = str + '<tr><td valign="top" width="150"><a style="cursor:pointer;" onclick="showCourse(\''+curCourseList[i][0]+'\')" >' + curCourseList[i][0] + ' <br /> </a>' + curCourseList[i][1] +'<br>'+ curCourseList[i][3] +'<br /><br />'+ curCourseList[i][4] +'</td><td>' + curCourseList[i][2] +'</td></tr>';
        }
    }

    str = str + '</table>';

    document.getElementById("courseContainer").innerHTML = str;
    if(curCourseList == null)
    {
        getLangToken('99');
    }

}    
function showCourse(code)
{
    //alert(1)
    $.ajax({
        async:false,
        type: "POST",
        url: 'formPostsUser.php?reqtype=getCourse',
        data:'coursecode='+ code,
        success: function(data) 
        {
            newwindow=window.open(url,'name','height=200,width=150');
    if (window.focus) {newwindow.focus()}
    return false;
        }
    });
} 
```

认真地，任何帮助都将得到极大的赞赏。我在这么深的狗屎atm

**编辑 - - - - - - - -**

这是我想替换的 window.open 位以打开一个漂亮的弹出窗口，而不是新的浏览器窗口或页面

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T19:04:45.973

我不知道您为什么说对话框不起作用，或者特别是如果 jQuery UI 对话框不适合您，但以防万一：

```
$(function() {
    $("<div id='helpDialog' style='display:none' />").appendTo(document);
    $("#helpDialog").dialog({
        autoOpen: false
    });
    $("#helpDialog").dialog('option', 'buttons', {
        "Close": function() {
            $(this).dialog("close");
        }
    })
});

function helpPopUp(page, height, width) {
    $("#helpDialog").dialog('option', 'height', height);
    $("#helpDialog").dialog('option', 'width', width);
    $('#helpDialog').load(page);
    $('#helpDialog').dialog("open");
}
helpPopUp('#helpDialog', 'Help/Summary.html', 550, 750); 
```

您当然可以将 IF 修改`.load(page)`为自定义 IF 需要在您的 url 中引用该页面。

这是上面的一个简单示例，带有一个轻微的 mod 来加载您的表格而不是页面：http: [//jsfiddle.net/MarkSchultheiss/ABqrD/1/](http://jsfiddle.net/MarkSchultheiss/ABqrD/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T17:32:33.393

如果您通过用户交互以外的任何方式触发窗口打开，则很可能会被阻止。您是否查看过与此相关的通知？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T18:00:53.097

如果您不想使用真正的弹出窗口，您可以尝试`<div>`在页面上方创建一个“悬停”，例如

```
.hoverwindow {
     position:absolute; 
     width: ...px; 
     height:...px; 
     margin:auto;
     z-index:10; /*ensure that it's displayed on top*/
} 
```

您可以通过对您的功能进行小的修改来做到这一点：

```
function showCourse(code)
{

$.ajax({
    async:false,
    type: "POST",
    url: 'formPostsUser.php?reqtype=getCourse',
    data:'coursecode='+ code,
    success: function(data) 
    {
        var newwindow = $('<div class="hoverwindow" />');
        newwindow.html(data).appendTo('body');
    }
});
} 
```

虽然坦率地说，这几乎是“弹出窗口”插件所做的，但如果您搜索它，所有这些都应该在网上很容易获得。因此，为什么我没有费心去实际尝试和测试这段代码——它只是为了让你知道你能做什么。

# c++ - 导致段错误的独立列表之间的插入/擦除语句的顺序

> ID：10285261
> 
> 赞同：0
> 
> 时间：2012-04-23T17:27:22.973
> 
> 标签：c++, list, insert, erase

我正在实现的有点复杂，所以我已经剥离了代码并制作了最简单的示例来复制问题：

我有列表 A 和 B，在某些时候我需要将 1 个元素从列表 A 移动到列表 B。这个对象记住它在当前列表上的位置（迭代器）。它适用于 1 个列表、插入和擦除。然而，当在列表 A 的迭代周期内更改列表 B 时，我发现执行插入和擦除指令的顺序决定了我是否遇到段错误。这是代码：

```
typedef struct AO_ {
    int id; 
    list<AO_*>::iterator thispos;
} AnObject;

class MyList {
    public:

    list<AnObject*> ll;
    int sizell;

    MyList(){ sizell=0; }

    void insert(AnObject* AnObjecti){
        AnObjecti->thispos= ll.insert(ll.end(),AnObjecti);
        sizell++;
    }

    list<AnObject*>::iterator remove(AnObject* AnObjecti){
        return ll.erase(AnObjecti->thispos);
    }   

    void print(){
        cout << "contents:";
        list<AnObject*>::iterator itAux;
        for (itAux=ll.begin(); itAux!=ll.end(); itAux++)
        cout << " " << (*itAux)->id;
        cout << endl;               
    }           
};

int main(int argc, char *argv[]){

    MyList* listA= new MyList();
    MyList* listB= new MyList();
    AnObject* objAux= new AnObject(); 

    for(int i=0; i<10; i++){
        objAux= new AnObject(); 
        objAux->id= i; 
        listA->insert(objAux);
    }

    cout << "list A:" << endl; listA->print();

    list<AnObject*>::iterator it= listA->ll.begin();
    while(it!=listA->ll.end()){
        objAux= (*it);
        if(objAux->id==2){
            //listB->insert(objAux); //***THIS CAN GO HERE (seg fault on next cycle)
            it= listA->remove(objAux);      
            listB->insert(objAux); //***OR THIS CAN GO HERE (all ok)
        }
        else
            ++it;
    }

    cout << "list A:"; listA->print();
    cout << "list B:"; listB->print();
} 
```

和输出：

```
list A:
contents: 0 1 2 3 4 5 6 7 8 9
list A:contents: 0 1 3 4 5 6 7 8 9
list B:contents: 2 
```

如果交换带有***标记的指令，我会遇到 seg 错误。 有人知道为什么吗？

在此先感谢何塞

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:35:09.047

调用`listB->insert`修改`objAux->thispos`以引用新列表。然后，对的调用`listA->remove`将尝试在对 的调用中使用该迭代器`list::erase`。从错误的容器传递迭代器以`erase`给出未定义的行为。

# iphone - 跨segue序列化线程到tableView

> ID：10285264
> 
> 赞同：0
> 
> 时间：2012-04-23T17:27:37.273
> 
> 标签：iphone, multithreading, ipad, ios5, segue

我有一个 tableviewcontroller，它的 tableviewcells 直接连接到另一个 tableviewcontroller。segue 是从 tableViewCell 原型创建到情节提要中的“子”tableview。我在父表视图中使用prepareForSegue，如下所示。当如下线程化时，在执行新的子表视图的方法（例如 cellForRowAtIndexPath、numberOfRowsInSection、viewDidLoad）*后*，将“放回”主线程中的代码（因为它与 UI 相关）被执行。结果是子tableView 没有建立（例如numberRows=0）。

我通过在新视图的设置器（setPhotoList、setPhotoListTitle）中执行 taleView reloadData 来“修复”这个问题。有没有更好的方法来同步/序列化跨 segue 的主线程？我的修复似乎有点低效，因为子表视图被绘制但如果两个设置器（在这种情况下）都重新加载，则必须重新加载一次甚至两次。谢谢。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{

UITableViewCell *cell = sender;
UIActivityIndicatorView *spinner = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle: UIActivityIndicatorViewStyleWhiteLarge];

dispatch_queue_t downloadQueue = dispatch_queue_create("flickr downloader", NULL);
dispatch_async(downloadQueue, ^{

    NSIndexPath *indexPath = [self.tableView indexPathForCell:sender];        
    NSDictionary *place = [self.places objectAtIndex:indexPath.row];
    NSArray *photosHere = [FlickrFetcher photosInPlace:place maxResults:MAX_NUM_PHOTOS];
    NSString *placeAll = [place objectForKey:FLICKR_PLACE_NAME];
    NSArray *placeComponents = [placeAll componentsSeparatedByString:@","];

    dispatch_async(dispatch_get_main_queue(), ^{

        if ([segue.identifier isEqualToString:@"Show Photos At Place"]) {
            [segue.destinationViewController setPhotoList:photosHere];
            [segue.destinationViewController setPhotoListTitle:[placeComponents objectAtIndex:0]];
        }         

    });
});
dispatch_release(downloadQueue); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:54:28.313

怎么样...

1.  在子视图控制器的设置器中，设置一个标志。它指示子视图控制器是否应该重新加载数据。
2.  在子视图控制器的`viewWillAppear`or中，根据标志`viewDidAppear`使用 重新加载数据。`downloadQueue`

# c++ - DOS.h 中的 C/C++ REGS 联合不再可用。有什么选择吗？

> ID：10285266
> 
> 赞同：3
> 
> 时间：2012-04-23T17:27:38.837
> 
> 标签：c++

我不得不使用大约二十年前写的一个非常古老的图书馆。我几乎可以完全编译它，除了一个使用 REGS 联合的部分。从我所做的谷歌搜索中，REGS 是 DOS.h 文件中中断处理的一部分。好吧，看看现代版本的 DOS.h，看不到任何 REGS 定义。

Internet 上的一些帖子说它是 Borland 或 Turbo 编译器所独有的，但这段代码是为在许多不同的编译器下工作而编写的。

有什么想法我应该做什么？一个旧的 DOS.h 文件是否可以工作？

使用：Visual Studio 2010，从命令行编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:31:50.570

创建`REGS`工会是你的问题中最少的。在保护模式操作系统下，应用程序不能简单地随时调用中断。如果他们尝试，他们将被系统阻止。

更好的方法是寻找使用 Windows API 来完成它的方法。

**编辑**

以上评论假设您正在进行现代 Windows 开发，我猜这是一个假设。除了你正在使用的工具，你真的没有说你正在开发的应用程序的类型（命令行、窗口、32 位、64 位等），除了没有说任何关于你试图完成的任务。

如果您正在为 16 位 DOS 开发，那么您仍然可以进行中断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T17:33:36.377

几乎您唯一能做的就是弄清楚他们在*使用*REGS 做什么，并（尽可能接近）在更高级别上做同样的事情。在大多数情况下，REGS 用于调用 DOS 函数，其中大多数具有可以在 Windows 下作为普通函数调用的等效函数。其他人则使用 BIOS 功能，这些功能（再次）大多具有完成相同功能的功能。

然而，在不知道 REGS 正在完成什么的情况下，不可能猜测替代品将会/将会是什么。

# php - 使用适用于任何变量的通用函数检查 php 变量

> ID：10285268
> 
> 赞同：0
> 
> 时间：2012-04-23T17:27:40.157
> 
> 标签：php

我正在尝试制作一个 PHP 函数，它包含一个变量，该变量将检查变量值并在它与另一个变量匹配时更改它。我确定我做错了，但是...

这是我到目前为止所拥有的：

```
<?php 

function Clear_Value(){

    $val='NONE';

    if(this== $val){ this=='';}

    };

$one    = 'One';
$two    = 'Two';
$three  = 'NONE';
$four   = 'Four';

Clear_Value($one);
Clear_Value($two);
Clear_Value($three);
Clear_Value($four);

echo $one.'<br>';
echo $two.'<br>';
echo $three.'<br>';
echo $four.'<br>';

?> 
```

我要的输出是：

```
One
Two

Four 
```

我希望这很清楚。我仍在学习 php 中的函数，所以任何指针都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T17:32:00.567

您需要通过引用传递参数：

```
function Clear_Value(&$arg){

    if ($arg == 'NONE') $arg = '';
} 
```

这样，函数可以修改变量的内容。

现场示例：http: [//ideone.com/igHc5](http://ideone.com/igHc5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:37:41.597

你的常数*this*代表什么？

您必须在函数中创建一些输入变量并使用*&*前缀（指内存中的变量）

```
function Clear_Value(&$var){

 $val='NONE';

 if($var == $val) 
  $var = '';

}; 
```

还有一件事，如果你想改变一个变量的值，你只用一个“=”。我建议您在 php.net 上查看语法基础知识

> *对不起我的英语不好*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T17:44:07.230

我不确定你在这里期望什么。

但是当你执行这个程序时，它会显示未定义的变量错误。

试试我的示例更改代码：-

```
 <?php 

   function Clear_Value($sam){

   $val='NONE';

   if($sam== $val){ $sam=='';}
   echo $sam.'<br>';

   };

   $one    = 'One';
   $two    = 'Two';
   $three  = 'NONE';
   $four   = 'Four';

   Clear_Value($one);
   Clear_Value($two);
   Clear_Value($three);
   Clear_Value($four);
   /*
   echo $one.'<br>';
   echo $two.'<br>';
   echo $three.'<br>';
   echo $four.'<br>';
   */
   ?> 
```

# node.js - 对于一个简单的 URL，Web 浏览器如何发生多个请求？

> ID：10285273
> 
> 赞同：2
> 
> 时间：2012-04-23T17:28:01.627
> 
> 标签：node.js, google-chrome, webserver

在尝试从 node.js 应用程序提供页面时，我遇到了这个问题。如何通过用户的简单请求从服务器提供多个文件？

例如：

1.  用户在地址栏中输入 www.google.co.in
2.  *浏览器向该 url 发出请求，它应该以响应结束。*但是发生的事情是，很少有更多的请求像链一样从该页面发送到服务器。

我现在在想的是，我的网络浏览器（chrome）如何发送这些额外的请求......或者是谁在提示 chrome 这样做？当然，我怎样才能为我的 node.js 应用程序做同样的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:31:02.617

一旦 chrome 从网站取回 html，它将尝试获取页面上提到的所有资源（图像、javascript 文件、样式表），以及 favicon.ico 这就是我认为您所看到的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T19:09:31.787

您可以使用[ajax](http://en.wikipedia.org/wiki/Ajax_%28programming%29)从客户端（浏览器）发送任意数量的请求。[这是一个使用jQuery.get](http://api.jquery.com/jQuery.get/)的基本示例，它是 ajax 调用的抽象：

```
$.get(
    "http://site.com",
    function(data) { alert(data); }
); 
```

# .htaccess - CodeIgniter - htaccess - 重定向

> ID：10285278
> 
> 赞同：1
> 
> 时间：2012-04-23T17:28:14.583
> 
> 标签：.htaccess, codeigniter, internationalization

我目前正在使用“Code Igniter”和“i18n Multi-language Library Helper”。我的网站是双语的。

我想做的简单任务是强制重定向此路径：

domain.com/inscription

至

domain.com/fr/inscription

我试图用 CI Route Engine 来做，但它不能正常工作，因为路由引擎将重定向到当前语言（例如 domain.com/en/inscription ），这不应该工作。只有 domain.com/fr/inscription 应该可以工作。

我相信最好的方法是使用 htaccess 文件，但我无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:56:27.197

如果您使用的是 Codeigniter 2.x，请尝试使用此库

[http://codeigniter.com/wiki/CodeIgniter_2.1_internationalization_i18n](http://codeigniter.com/wiki/CodeIgniter_2.1_internationalization_i18n)

阅读有关如何设置库的指南，您可以在 MY_Lang.php 文件数组中看到这样的内容。数组中的第一种语言是默认语言。因此它会自动将您重定向到默认语言

```
 // languages
private $languages = array(
    'en' => 'english',
    'de' => 'german',
    'fr' => 'french',
    'nl' => 'dutch'
); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T18:00:11.653

这是重定向的代码

```
# This allows you to redirect index.html to a specific subfolder 
Redirect /inscription http://domain.com/fr/inscription 
```

#注释行下的行是您需要粘贴的代码

# html - 整个宽度上的条形

> ID：10285279
> 
> 赞同：0
> 
> 时间：2012-04-23T17:28:18.207
> 
> 标签：html, css

请查看我正在处理的网站：LINK OFFLINE

我尝试将白条放置在页面的整个宽度上。这在他垂直居中之前效果很好。

有人能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:31:28.180

#outer div 已经是绝对的，#container 应该有一个相对位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T17:31:35.437

只需添加`width:100%`到`#container`元素。

或者，您可以设置`position:relative`以`#container`实现相同的效果（正如[@mamadrood](https://stackoverflow.com/a/10285325/128165)正确注意到的那样）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T17:33:16.440

问题是当您将元素居中时，它被设置为`position: absolute;`. 绝对定位的元素占据了它们子元素的尺寸，所以如果你不喜欢这样，你必须指定一个宽度。

```
#container {
    width: 100%;
} 
```

或者

```
#container {
    left: 0; right: 0;
} 
```

会为你工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T17:31:55.173

删除`position: absolute`你的容器元素，你应该很好。

# jquery - 使用jquery检查多个复选框选择

> ID：10285280
> 
> 赞同：5
> 
> 时间：2012-04-23T17:28:32.987
> 
> 标签：jquery, checkbox, selection

我正在尝试找到获取选中复选框的最简单方法。

这是我的脚本：

```
$(document).ready(function() {
    $("input[name='chkTextEffects']").change(function() {
        if ($("#cbSolid").is(':checked') == true) {
            alert('Solid');
        } else if ($("#cbOutline").is(':checked') == true) {
           alert('Outline');
        } else if ($("#cbSolid", "#cbOutline").is(':checked') == true) {
            alert('SolidOutline');
        } else if ($("#cbSolid", "#cbOutline").is(':checked') == false) {
            alert('No Effects'); 
        }
    });
});​ 
```

HTML：

```
 <input type="checkbox" name="chkTextEffects" id="cbSolid" value="Solid" />Solid
   <input type="checkbox" name="chkTextEffects" id="cbOutline" value="Outline" />Outline
   <input id="TextEffectsSelection" type="hidden" /> 
```

我不确定这条线`if ($("#cbSolid", "#cbOutline").is(':checked') == true)`或者我应该使用`bind`它来实现它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T17:35:09.483

这是我创建的一个示例，它展示了我认为您正在尝试实现的目标：

```
$('#getCheckboxesButton').live('click', function(event) {
    var checkboxValues = [];
    $('input[type="checkbox"]:checked').each(function(index, elem) {
        checkboxValues.push($(elem).val());
    });
    alert(checkboxValues.join(', '));
}); 
```

[http://jsfiddle.net/qdvng/](http://jsfiddle.net/qdvng/)

让我知道这是否有帮助。它基本上使用 ':checked' jQuery 选择器来检索已选中的复选框，然后遍历它们的值并将其打印出来。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T17:31:40.600

您可以像这样使用[:checked](http://api.jquery.com/checked-selector/)选择器来获取具有指定名称的所有选中复选框：

```
$("input[name='chkTextEffects']:checked") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T17:37:02.867

查询

```
$('input:checkbox:(:checked)').each( function() {
// your code here
}) 
```

[http://api.jquery.com/checkbox-selector/](http://api.jquery.com/checkbox-selector/)

[http://www.wiseguysonly.com/2010/01/15/select-and-unselect-all-checkboxes-with-jquery/](http://www.wiseguysonly.com/2010/01/15/select-and-unselect-all-checkboxes-with-jquery/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T17:31:39.570

为什么不这样做：

```
$("#checkboxId").attr("checked") == "checked"; 
```

# jquery - 在滚动时更改 background-position-x

> ID：10285283
> 
> 赞同：1
> 
> 时间：2012-04-23T17:29:06.397
> 
> 标签：jquery, html, css, animation

我正在使用 Ian Lunn 的 Parallax 教程[http://www.ianlunn.co.uk/demos/recreate-nikebetterworld-parallax/](http://www.ianlunn.co.uk/demos/recreate-nikebetterworld-parallax/)。我想以此为基础，不仅可以更改背景的 y 位置，还可以更改滚动时的 x 位置。这基本上会增加水平移动和垂直移动，以便一些对象在两个方向上移动。

举一个我想做的例子[http://www.nikebetterworld.com/product](http://www.nikebetterworld.com/product)。第三个场景，汽车进来的地方是我想要实现的运动。

他的原始代码是：

```
//function that is called for every pixel the user scrolls. Determines the position of the background
/*arguments: 
    x = horizontal position of background
    y = vertical position of the background
    windowHeight = height of the viewport
    pos = position of the scrollbar
    adjuster = adjust the position of the background
    inertia = how fast the background moves in relation to scrolling
    backgroundPosition-y = original background position vertical
*/
function newPos(x, windowHeight, pos, adjuster, inertia){
    return x + "% " + (-((windowHeight + pos) - adjuster) * inertia)  + "px";
}

//function to be called whenever the window is scrolled or resized
function Move(){ 
    var pos = $window.scrollTop(); //position of the scrollbar

    //if the first section is in view...
    if($firstBG.hasClass("inview")){
        //call the newPos function and change the background position
        $firstBG.css({'backgroundPosition': newPos(20, windowHeight, pos, 300, 0.1)}); 
        sun_1.css({'backgroundPosition': newPos(10, windowHeight, pos, 4000, .1)});
        deer.css({'backgroundPosition': newPos(40, windowHeight, pos, 500, .1)});
    } 
```

我敢肯定这是非常非常错误的做法，但这是我尝试过的。

```
sun_1.css({'backgroundPosition': newPos(10, windowHeight, pos, 4000, .1)}, {'background-position-x': '0% ' + parseInt(-xx/ 10) + 'px'}); 
```

有没有办法将它添加到“newPos”函数中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:17:02.950

实际上，我想出了一些可行的方法。

```
sun_1.css({'backgroundPosition': newPos((3+pos/50), windowHeight, pos, 4000, .2)}); 
```

也许不是最好的解决方案，但它似乎工作正常。第一个数字定义起始位置（在本例中为 3%），第二个数字获取窗口相对于滚动的位置，第三个数字确定移动速度。

要更改沿 x 的移动方向，请将“50”更改为负数。

# android - 检测小部件旋转

> ID：10285288
> 
> 赞同：1
> 
> 时间：2012-04-23T17:29:19.847
> 
> 标签：android, widget, rotation

我已经开发和 android 小部件，但我需要检测旋转。我用谷歌搜索但没有找到解决方案。当我旋转模拟器时，它使用合适的布局（在布局土地下）但不加载数据。当我单击小部件上的任何按钮时，它会加载数据。

谢谢。

不允许使用此代码。

```
 @Override 
public void onEnabled(Context context) { 
    super.onEnabled(context); 
    this.registerReceiver(this, new 
```

IntentFilter(Intent.ACTION_CONFIGURATION_CHANGED)); }

# java - JSF：如何初始化使用 @managedProperty 传递给我的 managedBean 的 bean？

> ID：10285289
> 
> 赞同：0
> 
> 时间：2012-04-23T17:29:20.090
> 
> 标签：java, jsf

在我的`managedBean`, `fileUpload`: 正在调用其他`beans`使用`@ManagedProperty`，如代码中所示，现在在我的课堂上我有类似`rtParser.getQuote()`但它抛出的东西`NullPointerException`，我的问题是：

> 如何在此类中初始化 rtParser？

```
@ManagedProperty(value = "#{rtParser}")
private PositionParserRT rtParser;

public PositionParserRT getRtParser()
{
    return rtParser;
}

public void setrtParser(PositionParserRT rtParser)
{
    this.rtParser = rtParser;
} 
```

**更新**

我在[这里](https://stackoverflow.com/q/10283262/164299)遇到类似的问题，非常感谢任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:38:46.280

您使用的方式也`@ManagedProperty`期望`PositionParserRT`a `@ManagedBean`。所以把这个注释放在类上。

```
@ManagedBean
@SomeScoped // TODO: Choose the suitable scope.
public class PositionParserRT {
    // ...
} 
```

但是，如果该类一开始就不是 JSF 托管 bean（即它与 JSF 视图/模型无关），那么您可能正在寻找错误方向的解决方案。如果它是一个业务服务，宁愿把它变成一个`@Stateless`EJB 并注入它`@EJB`。

```
@Stateless
public class PositionParserRT {
    // ...
} 
```

和

```
@EJB
private PositionParserRT rtParser; 
```

# regex - Powershell - 不匹配

> ID：10285290
> 
> 赞同：7
> 
> 时间：2012-04-23T17:29:25.170
> 
> 标签：regex, powershell

我想从文件中选择与特定模式不匹配的所有行；我知道我必须使用 select-string 的 -notMatch 选项，但我就是不知道怎么做。（我正在寻找类似 GREP 的 -v 函数的东西）任何示例都会很有用。提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-02T12:38:09.560

我想你还是想`match`而不是`notmatch`。要排除函数返回类型或注释，您需要“否定断言背后的看法”。也许这会满足您的要求？

```
$f = 'my_function'
select-string test.txt -Pattern "(?<!(void|double|char|int)\s+|//.*)\b$f\b" 
```

该`(?<!...)`部分说如果在源文本中此时找到“...”，则不匹配。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-09-24T18:49:53.543

你不能使用以下

```
-notmatch "(?<!(void|double|char|int)\s+|//.*)\b$f\b" 
```

# sql - SQL Server 如何知道锁定视图对象？

> ID：10285292
> 
> 赞同：13
> 
> 时间：2012-04-23T17:29:33.813
> 
> 标签：sql, sql-server, sql-server-2008, view, database-locking

在 SQL Server 2008 中，我`V`对表有一个视图`A`，`B`看起来大致像

```
create view V as
    select * from A
    union all
    select * from B 
```

读取 from`V`会导致查询**在基表上获取意向共享锁**，但也会**在视图对象**本身上获取意向共享锁。

很清楚为什么我们需要表上的 IS 锁，我们可以看到视图上的 IS 锁可以防止对视图下的表进行并发修改。没关系。

查询计划没有提及视图。它已完全编译出来，在这种情况下，生成的计划是两个基表中行的简单串联。实际上，查询计划 XML 中唯一提到视图的是语句文本。

如果您`U`在表上添加第二个视图，则读取 from`V`不会导致任何锁定`U`。这排除了引擎只对所有视图进行 IS 锁定`A`和`B`。

数据库引擎如何知道要锁定视图？

*   语句文本是否再次解析？
*   查询计划器和底层执行之间是否有其他信息渠道来传递这些信息？

* * *

有关详细信息，请参阅[相应的问题`dba.stackexchange`](https://dba.stackexchange.com/questions/16999/how-does-sql-server-know-to-lock-view-objects)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-25T15:01:35.227

复制[我在 dba.stackexchange 上的回答](https://dba.stackexchange.com/questions/16999/how-does-sql-server-know-to-lock-view-objects)：

来自 Conor Cunningham，任何与引擎或优化器相关的东西的最终来源：

> 我们在编译期间跟踪事物以在运行时检查。为此，我们不会在执行时解析事物。
> 
> 注意：我们从一个版本到另一个版本所做的内部工作并不能得到保证。这低于官方支持的表面积。

我的信念是执行计划的二进制版本（不是通过 XML 可读和公开给我们的，它只是二进制版本的一个子集）必须包含一些指向原始查询中引用的视图的指针文本（上面提到过）。它显然不是每次都解析查询文本。Conor 暗示了上述内容，但注意不要透露有关其存储位置或方式的任何细节，因为这可能会因版本而异，甚至随着服务包或累积更新而变化。他可能也不想鼓励任何侦探工作。:-)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T19:24:24.333

如果[`sys.dm_exec_query_optimizer_info`](http://technet.microsoft.com/en-us/library/ms175002.aspx)查看返回 SQL Server 查询优化器详细信息的视图，则返回的详细信息之一是以下字段：

> **视图引用**- 在查询中引用视图的次数。

似乎某个视图被引用的次数在*某处*被跟踪，可能是执行计划的一部分……我的假设是，即使视图被扩展，执行计划仍然包含在查询，并`IS`针对这些引用的视图发出适当的锁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T17:42:57.760

默认情况下，视图会像宏一样展开到引用它们的查询中。

这可以被关闭，或者如果它们被物化，等等，但类似宏的内联扩展是常态。这意味着锁定等的行为就像您执行了以下操作一样......

```
SELECT
  *
FROM
  blah
INNER JOIN
(
  yourViewCode
)
  AS aView
    ON aView.id = blh.id 
```

# ios - 不使用 API 获取 Facebook 上的好友列表 - Objective-c

> ID：10285295
> 
> 赞同：0
> 
> 时间：2012-04-23T17:29:41.693
> 
> 标签：ios, objective-c, facebook, facebook-graph-api

我想在 Facebook 上获取未使用应用程序的朋友列表。我知道这是可能的，因为它是在 Hackbook 中完成的。然而，在对 Facebook 开发人员文档和 Hackbook 的代码进行了令人难以置信的研究之后，我无法找到任何特定的方法继续前进。任何提示或帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T18:25:05.930

使用您的用户的访问`/me/friends?fields=installed`令牌进行访问。他们的任何也使用您的应用程序的朋友都会在响应中包含“已安装：真实”条目

# unity-container - 让 EnterpriseLibrary 使用通过 UnityBootstrapper 创建的 UnityContainer

> ID：10285298
> 
> 赞同：0
> 
> 时间：2012-04-23T17:29:55.390
> 
> 标签：unity-container, enterprise-library

我的应用程序子类 UnityBootstrapper 创建默认的 UnityContainer。

我们还使用 EnterpriseLibrary 以及强制它使用我们在引导程序中创建的统一容器而不是创建它自己的容器。

这是可接受的做法吗？我们的理由是，我们希望能够访问通过注入类创建的缓存（我们有多个），而无需直接引用企业库。

我已经看到了与使用 UnityContainerConfigurator 和 AddNewExtension() 以及仅设置 EnterpriseLibraryContainer.Current 不同的东西。我很难理解其中的区别以及正确的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T05:56:04.300

我认为使用显式实例化的容器是完全可以接受的。企业库旨在允许您切换和使用其他依赖注入框架而不是 Unity，或者您可以 BYOC（带上您自己的 [Unity] 容器）。

基本上，您只需要创建 Enterprise Library 扩展并将其添加到容器中，然后将容器设置为 Enterprise Library 将使用的服务定位器。

在此示例中，我有一个 app.config，其中配置了一个名为“我的缓存管理器”的 CacheManager：

```
EnterpriseLibraryCoreExtension coreExtension = 
    new EnterpriseLibraryCoreExtension();

container.AddExtension(coreExtension);

IServiceLocator locator = new UnityServiceLocator(container);
EnterpriseLibraryContainer.Current = locator;

var cacheManager1 = container.Resolve<CacheManager>("My Cache Manager");

var cacheManager2 = EnterpriseLibraryContainer.Current
                        .GetInstance<CacheManager>("My Cache Manager");

Debug.Assert(ReferenceEquals(cacheManager1, cacheManager2)); 
```

# ruby-on-rails - 在黄瓜中钩住整个功能后

> ID：10285299
> 
> 赞同：5
> 
> 时间：2012-04-23T17:30:02.043
> 
> 标签：ruby-on-rails, cucumber

在黄瓜中，我想在一个功能中的所有场景都运行后运行一个步骤，我可以为整个功能设置一个后挂钩吗，我目前每个场景都有一个后挂钩。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-11T16:53:38.120

我知道它已经很长时间了，但是我很久没有成为这里的用户但是，有一个这样使用的退出钩子：

```
at_exit do
  # Add code here
end 
```

这应该放在您的 env.rb 文件或 features/support 目录中

这是[一个很棒的链接](https://github.com/cucumber/cucumber/wiki/Hooks)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T19:01:38.330

您可以使用自定义格式化程序，并使用 after_feature 方法。

（我曾经有一个包含更多信息的链接，但@katta 只是指出它不再可用）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-31T15:47:09.653

这是一种解决方法，但您可以在设置/拆卸功能的开始和结束时设置场景。场景按照指定的顺序运行，只要您在顶部有设置场景，在底部有拆解，那么它就可以正常工作。

我还将场景命名为“场景：功能设置”和“场景：功能拆卸”，以便在将结果输出到格式化程序时更加明显。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-24T14:05:20.313

当然，只需标记您的功能。

```
After('@mytag') do
  #Do your magic here
end 
```

该文档可能会有所帮助：[http ://cukes.info/cucumber/api/ruby/latest/Cucumber/RbSupport/RbDsl.html#AfterStep-instance_method](http://cukes.info/cucumber/api/ruby/latest/Cucumber/RbSupport/RbDsl.html#AfterStep-instance_method)

# javascript - 如何获取 Codemirror textarea 的值

> ID：10285301
> 
> 赞同：79
> 
> 时间：2012-04-23T17:30:10.403
> 
> 标签：javascript, codemirror

我正在使用 Codemirror 的 textarea 插件，但我无法检索 textarea 的值。

代码：

```
var editor = CodeMirror.fromTextArea(document.getElementById("code"), {
    lineNumbers: true,
    matchBrackets: true,
    mode: "text/x-csrc"
  });

function showCode()
{
    var text = editor.mirror.getCode();
    alert(text);
} 
```

它显示错误：

```
editor.getCode() is not a function. 
```

* * *

## 回答 #1

> 赞同：104
> 
> 时间：2012-04-23T18:07:24.887

尝试使用`getValue()`而不是`getCode()`.

将可选参数传入 getValue(separator) 以指定用于分隔行的字符串（默认为`\n`）。

* * *

## 回答 #2

> 赞同：43
> 
> 时间：2013-11-28T13:54:11.943

这对我来说很好。

```
editor.getValue() 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2017-05-12T13:43:01.280

**使用 your_editor_instance.getValue();**

它将正常工作，因为`getCode()`在 CodeMirror 中没有以名称命名的函数。

用于设定值`your_editor_instance.setValue();`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-03-20T17:55:04.487

我知道你正在使用`textarea`，但我希望这段代码对其他人有用！我有这个问题，但有`article`标签，这是我用 jquery 获取所有代码的解决方案：

```
res_array = []
$.each($('article.code-draft span[role="presentation"]'), function(){
    res_array.push($(this).text())
});
console.log(res_array.join('\n')) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-01-28T12:54:01.997

**版本：5**

根据[文档](https://codemirror.net/doc/manual.html#api)，您现在需要这样做：

`doc.getValue(?separator: string) → string`

所以在这个例子中：

`editor.getDoc().getValue("\n")`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-04-01T14:03:24.777

这适用于您尝试捕获 CodeMirror 文本区域中返回的文本的 C++ Selenium 实例：

```
var myText = this.WebDriver.ExecuteJavaScript<string>("return $editor[0].getValue()"); 
```

`[0]`表单中代码镜像文本区域的索引在哪里。

# sql - SQL 只显示 6 个最大值

> ID：10285302
> 
> 赞同：0
> 
> 时间：2012-04-23T17:30:13.160
> 
> 标签：sql, db2

我有这样的声明：

```
Select p_name, p_size 
from Part 
ORDER by p_size 
```

所以，现在我只想显示 6 个最大值。如何使用 IBM DB2 做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T17:31:52.077

```
Select p_name, p_size 
from Part 
ORDER by p_size
FETCH FIRST 6 ROWS ONLY 
```

[http://en.wikipedia.org/wiki/Select_(SQL)#FETCH_FIRST_clause](http://en.wikipedia.org/wiki/Select_(SQL)#FETCH_FIRST_clause)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T17:33:12.543

谷歌说：

```
Select p_name, p_size 
from Part 
ORDER by p_size 
fetch first 6 rows only 
```

顺便说一句，我从未使用过 DB2。

# c - 为什么打印输入缓冲区会导致意外输出？

> ID：10285307
> 
> 赞同：0
> 
> 时间：2012-04-23T17:30:39.780
> 
> 标签：c

在下面的代码中，只要在数组“pass”和“repass”中输入相同的字符串，“repass”中的字符串就会加倍。例如，如果 "pass" 和 "repass" 中的输入字符串是 aaaaaaaa，那么 "repass" 中的字符串变成 aaaaaaaaaaaaaaaaa，因为它`strcmp()`给出了否定的答案。

有人可以帮忙解释一下这背后的原因吗？

```
#include<stdio.h>
#include<conio.h>
#include<string.h>

void main()  
{  
    char user_name[20],pass[8],repass[8];  
    int i=0,c=0,tr=1;//tr for no of try(should less than 3 )  
    clrscr();  
    puts("enter user name");  
    gets(user_name);  
    printf("\n\n\n\n");  

    for(tr=1;tr<=3;tr++)  
    {  
        puts("\n\nenter password");  

        while(i<8)  
        {  
            pass[i] = getch();  
            putchar('*');  
            i++;  
        }  

        printf("\n\n\n\nplease reenter the password\n\n");  
        i=0;  

        while(i<8)  
        {  
            repass[i]=getch();  
            putchar('*');  
            i++;  
        }  

        c=strcmp(pass, repass);  
        printf("c=%d", c);  

        if(strcmp(pass,repass)==0)  
            c=0;  
        else  
            c++;  

        if(c==0)  
        {  
            printf("\n\n\t****\vsuccessful login*********** ");  
            break;  
        }  
        else  
            printf("\n\nsorry password did not match");  
    }  

    if(tr>3)  
        puts("\n\nlogin failed");  
    //printf("%s        %s",pass,repass);  
    getch();  
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:34:39.930

您不是 0 终止您的字符串，因此在它们上使用“字符串”函数（使用“%s”、strcmp 等打印）是非法的。

在这种特殊情况下，由于堆栈布局、方式和彼此相邻，它看起来像是`repass`“加倍” 。`pass``repass`

* * *

侧节点，使用[`fgets`而不是`gets`](http://c-faq.com/stdio/getsvsfgets.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:37:43.423

这里有一些问题。

1.  不要使用获取。获取是不安全的。摆脱使用它的习惯。请改用 scanf。
2.  你不是空终止你的字符串。字符串`'\0'`最后需要 a 来表示它们已经完成。
3.  请更好地格式化您的代码。如果你这样做，它将帮助你遵循逻辑。

# c# - MultiScaleImage 在标题窗格顶部呈现

> ID：10285317
> 
> 赞同：1
> 
> 时间：2012-04-23T17:31:13.913
> 
> 标签：c#, silverlight, windows-phone-7, xaml, multiscaleimage

我的程序在 wp7.5 的 ScrollViewer 中使用 MultiScaleImage 以及其他内容。我遇到的问题是当我尝试滚动时，图像呈现在标题窗格的顶部而不是“在”它的“下方”，而所有其他内容都呈现在标题窗格下（被标题窗格切断，正确的行为)

有谁知道这是一个已知问题，还是我做错了什么？

在xml中：

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
    <ScrollViewer>
        <StackPanel>
            <Button>LOL</Button>
            <Grid x:Name="RootGrid" Width="420" Height="374">
                <MultiScaleImage x:Name="MSI"></MultiScaleImage>
            </Grid>
            <Button>LOL</Button>
            <Button>LOL</Button>
            <Button>LOL</Button>
            <Button>LOL</Button>
            <Button>LOL</Button>
            <Button>LOL</Button>
            <Button>LOL</Button>
        </StackPanel>
    </ScrollViewer>
</Grid> 
```

后面的代码：

```
public partial class MainPage : PhoneApplicationPage
{
    public MainPage()
    {
        InitializeComponent();
        this.Loaded += new System.Windows.RoutedEventHandler(MainPage_Loaded);
    }

    void MainPage_Loaded(object sender, System.Windows.RoutedEventArgs e)
    {
        this.MSI.Source = new TileSource();
    }
}

public class TileSource : MultiScaleTileSource
{
    public TileSource() :
        base(256, 256, 256, 256, 0)
    {
    }

    protected override void GetTileLayers(int tileLevel, int tilePositionX, int tilePositionY, System.Collections.Generic.IList<object> tileImageLayerSources)
    {
        tileImageLayerSources.Add(new System.Uri(@"someurl"));
    }
} 
```

将其他所有内容的 Z 顺序设置为非常高的值以及纯色背景似乎可行，但这在我当前的项目中是不可行的，因为我们使用的是带有图像作为背景的视图，具有纯色标题窗格将掩盖背景。

谢谢你的帮助！

# svn - svndumpfilter2 解决 svnadmin: Can't write to stream: Broken pipe 问题

> ID：10285328
> 
> 赞同：0
> 
> 时间：2012-04-23T17:31:36.953
> 
> 标签：svn

我最近将我的“dir1”从“myrepo1/trunk/dir1”移动到“myrepo1/archives/dir1”。现在我想把它单独移到一个新的仓库中。所以我做了以下事情：

```
svnadmin dump myrepo1 | svndumpfilter include --drop-empty-revs --renumber-revs archives/dir1  > dumpfile 
```

但我收到以下错误：

```
svndumpfilter: Invalid copy source path '/trunk/dataManagement'
svnadmin: Can't write to stream: Broken pipe 
```

我在互联网上读到了这个并想使用 svndumpfilter2 （比如在[http://blog.janjonas.net/2010-02-16/svndumpfilter-svndumpfilter2-extract-svn-paths-to-separated-repository](http://blog.janjonas.net/2010-02-16/svndumpfilter-svndumpfilter2-extract-svn-paths-to-separated-repository)）但我明白了

```
-bash: ./svndumpfilter2: No such file or directory
svnadmin: Can't write to stream: Broken pipe 
```

我想知道如何使用这个 svndumpfilter2 来解决这个问题。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T20:23:29.450

1.  `./svndumpfilter2`如果当前目录中存在 svndumpfilter2 则有效。svndumpfilter2 是您必须先下载的第 3 方工具。然后将点替换为下载目录。
2.  消息“svnadmin: Can't write to stream: Broken pipe”是先前错误的结果。`svnadmin`继续将其输出馈送到管道中，但管道的另一端（第一个示例中的 svndumpfilter 或第二个示例中不存在的 svndumpfilter2）已终止，而无需等待流结束。只是忽略该消息。

# jquery - Issue Implementing jQuery Nivo Slider

> ID：10285332
> 
> 赞同：0
> 
> 时间：2012-04-23T17:31:41.403
> 
> 标签：jquery

I was able to implement the jQuery Nivo Slider in my JSFiddle: [http://jsfiddle.net/NinjaSk8ter/gXwuc/](http://jsfiddle.net/NinjaSk8ter/gXwuc/)

However I'm having a problem getting this to function in my Page. If someone is able to see the problem within my JavaScript I would greatly appreciate it.

I think that the issue is because I am already calling the jQuery Ready function for a different Script.

I had added `('#slider').nivoSlider();` within it's own ready function which does not work:

```
$(function () {
    $('#slider').nivoSlider();
}); 
```

Here is the Development Site: [http://www.northernvirginiapaintingcontractor.com/](http://www.northernvirginiapaintingcontractor.com/)

There are 2 jQuery Document Ready Functions:

```
<script type="text/javascript">
$(function () {
    $('.box').hover(function () {
        $(this).stop().animate({
            "opacity": .5
        }, 50)
    }, function () {
        $(this).stop().animate({
            "opacity": 1
        }, 50)
    });
});

$(function () {
    $('#slider').nivoSlider();
});

</script> 
```

Here is the markup:

```
<div id="top-feature">
    <div id="wrapper">
        <a href="http://dev7studios.com" id="dev7link" title="Go to dev7studios"></a>
        <div class="slider-wrapper theme-default">
            <div class="ribbon"></div>
            <div id="slider" class="nivoSlider">
                <img src="http://i.imgur.com/DMWEZ.jpg" alt="" />
                <a href="http://dev7studios.com">
                    <img src="http://i.imgur.com/GnASW.jpg" alt="" title="caption" />
                </a>
                <img src="http://i.imgur.com/5y96P.jpg" alt="" data-transition="slideInLeft" />
                <img src="http://i.imgur.com/9eg2i.jpg" alt="" title="#htmlcaption" />
            </div>
            <div id="htmlcaption" class="nivo-html-caption">
                <strong>This</strong> example <em>HTML</em> caption<a href="#">a link</a>.
            </div>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T19:39:53.680

For some reason this works in the Page, and I am not completely clear why:

```
jQuery(function ($) {
    $('#slider').nivoSlider();
}); 
```

# php - 将 MySQL 数据库转移到新服务器

> ID：10285334
> 
> 赞同：2
> 
> 时间：2012-04-23T17:31:51.607
> 
> 标签：php, mysql

我正在尝试将数据从我的旧 MySql 服务器传输到我的新服务器，我曾尝试使用 SQL Dumper，但我一直在获取`Error 500`表是一团糟，一半是 MyISAM，另一半是 InnoDB，服务器正处于最后阶段说实话。

我正在考虑使用`iframes`并`GET`请求传输数据（下面的示例）。如果有人有更好的想法，将不胜感激。

我要转移的表有 3600 万条记录，我已经对其进行了测试，粗略计算，转移所有记录需要几个月的时间。我知道下面的方法可能是最低效的方法，但我想不出任何其他方法。

```
 $result = mysql_query("SELECT * FROM nu_list $limit");
        while($row = mysql_fetch_array( $result )) {

    print "<iframe src="http://mynewsite.com/add.php?row1=$row[1]&row2=$row[2]&row3=$row[3]" 
frameborder="0" scrolling="no" WIDTH="1" HEIGHT="1">\n";  } 

        $nxt = $_GET["pageno"] + 1;

        if($nxt < $lastpage) {
        print "<BODY>
        <script type=\"text/javascript\">
        <!--
        window.location = \"/ripw3.php?pageno=$nxt&lastpage=$lastpage\"
        //-->
        </script>
        </BODY>
        </HTML>\n"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:44:08.487

如果您可以访问服务器并且可以对其进行 shell，则应该使用 mysql dump 转储数据库的副本。然后将该 sql 文件传输到新服务器并导入。

这个站点提供了一个可靠的[mysql dump 导入/导出教程](http://www.mydigitallife.info/how-to-backup-and-restore-export-and-import-mysql-databases-tutorial/)。

如果你一心想用 php 完成这项工作，那么有些人已经编写了脚本来[用 php 备份 mysql](http://davidwalsh.name/backup-mysql-database-php)。其基本思想是显示所有表，遍历它们并描述每个表以构建创建表语句，然后以小块选择每个表中的数据并手动构建插入语句。与垃圾场相比，这是一个可怕的痛苦。

如果您在共享主机上，您可能无法使用 mysql dump，这可能会解释您的错误 500。如果您在共享主机上，您可能可以从控制面板下载数据库的副本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:38:22.113

您可以使用[MySQL Workbench](http://www.mysql.com/products/workbench/)完成数据库的完整导出，并`pt-show-grants`从[Percona Tookit](http://www.percona.com/software/percona-toolkit/)导出用户和权限。

# objective-c - 我应该在添加目标之前删除目标吗

> ID：10285339
> 
> 赞同：7
> 
> 时间：2012-04-23T17:32:22.660
> 
> 标签：objective-c, ios5

[UIControl - 改变分配的选择器：addTarget & removeTarget](https://stackoverflow.com/questions/1978751/uicontrol-changing-assigned-selectors-addtarget-removetarget)

**声明您应该在更改**为另一个目标之前删除目标。但是，如果我在*cellForRowAtIndexPath*中设置目标怎么办？即使目标没有改变，我是否应该在再次添加之前删除目标？如果我不删除它，它会调用该方法两次还是会覆盖它？

```
[cell.cellSwitch removeTarget:self action:@selector(notifySwitchChanged:) forControlEvents:UIControlEventValueChanged];
[cell.cellSwitch addTarget:self action:@selector(notifySwitchChanged:) forControlEvents:UIControlEventValueChanged]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-04T02:21:00.510

我没有添加/删除目标，而是发现如果我已经继承了`UITableViewCell`，我将添加一个新委托并将委托设置为视图控制器。这样，在委托上调用的任何方法都可以传入整个单元格，因此我可以通过调用`UITableView`'s`indexPathForCell`方法来获取单元格的索引路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-30T12:25:45.580

根据我的经验，它只会被调用一次。

但是IMO，**最好** `removeTarget`总是使用，因为将来可以更改代码。有一天，您可能需要添加多个目标和选择器。

成为安全、可扩展和可维护的代码。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = // code with reuse identifier ...
    if(cell == nil)
    {
        // making view for cell ....
    }

    // myAction will be called ONLY ONCE after many times of scrolling
    [cell.myButton addTarget:self action:@selector(myAction:) forControlEvents:UIControlEventTouchUpInside]; 

    return cell;
} 
```

# tomcat - Apache Tomcat 6 服务意外终止。已完成 1 次

> ID：10285343
> 
> 赞同：0
> 
> 时间：2012-04-23T17:32:41.617
> 
> 标签：tomcat

Solr（Java 搜索应用程序）未返回结果。令我惊讶的是，我的 Windows 上没有运行 Tomcat 6.x（64 位）。日志中绝对没有错误，没有崩溃转储。我重新启动它，现在一切似乎都很好。

转到 Windows 事件查看器并导出以下与 Tomcat 相关的信息：

```
Level   Date and Time   Source  Event ID    Task Category
Information  04/23/2012 8:51:58 AM  Service Control Manager 7036    None    The Apache Tomcat 6 service entered the running state.
Error        04/23/2012 4:17:12 AM  Service Control Manager 7034    None    The Apache Tomcat 6 service terminated unexpectedly.  It has done this 2 time(s).
Information  04/16/2012 3:13:15 PM  Service Control Manager 7036    None    The Apache Tomcat 6 service entered the running state.
Error        04/16/2012 1:12:47 PM  Service Control Manager 7034    None    The Apache Tomcat 6 service terminated unexpectedly.  It has done this 1 time(s).
Information  04/07/2012 10:02:25 PM Service Control Manager 7036    None    The Apache Tomcat 6 service entered the running state. 
```

这对我来说是个谜，因为我在 Tomcat 日志中没有任何错误。我应该如何继续调试这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:53:09.070

问题出在 Java 7 上。有很多问题，恢复到 Java 6 已经解决了所有问题。[http://searchhub.org/2011/07/28/dont-use-java-7-for-anything/](http://searchhub.org/2011/07/28/dont-use-java-7-for-anything/)（但是现在看来问题已经解决了，Solr 可以在 Java 7 上正常工作）[http://www .h-online.com/open/news/item/Apache-Solr-and-Lucene-now-Java-7-compatible-1525295.html]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T17:38:37.093

当我将您的错误消息粘贴到搜索中时，Google 发现了这一点：

[http://mail-archives.apache.org/mod_mbox/tomcat-users/200808.mbox/%3C4896F52A.9050202@ice-sa.com%3E](http://mail-archives.apache.org/mod_mbox/tomcat-users/200808.mbox/%3C4896F52A.9050202@ice-sa.com%3E)

你并不孤单。也许这会有所帮助。如果是这样，请在将来尝试该技巧。

# logging - Eclipse 插件.log 错误级别配置选项

> ID：10285346
> 
> 赞同：2
> 
> 时间：2012-04-23T17:33:11.883
> 
> 标签：logging, eclipse-plugin

我维护了一个为 Eclipse 3.2 编写的 Eclipse 插件。该插件使用`org.eclipse.core.runtime.Status`类将信息、警告和错误写入 Eclipse .log 文件

当我从开发 Eclipse 中运行 Eclipse 插件时，使用 Eclipse Application 的运行配置，插件工作正常。信息、警告和错误将写入 Eclipse .log 文件。

当我打包 Eclipse 插件并将其安装在另一个 Eclipse 中时，信息消息不会写入 .log 文件。写入警告和错误。

我假设在打包 Eclipse 插件时缺少 Eclipse 运行配置中的一些错误级别日志记录配置设置。我查看了 Eclipse 帮助并进行了一些 Google 搜索，但没有找到答案。

打包 Eclipse 插件时是否可以设置 Eclipse 中的错误级别日志记录配置设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-01T10:30:19.453

不幸的是，我手边没有 3.2 系统，因此答案可能不正确......

但是...对于 3.7.2（5 年后！），Eclipse 日志系统通过 OSGi 日志进行门控，因此以这种方式配置。编写器`.log`是`EclipseLogWriter`使用许多 Java 属性配置的。看到`EclipseLogWriter.readLogProperties()`这个答案 [https://stackoverflow.com/a/7550991/796559](https://stackoverflow.com/a/7550991/796559)

# ruby - Ruby BCrypt 返回数字

> ID：10285350
> 
> 赞同：0
> 
> 时间：2012-04-23T17:33:20.467
> 
> 标签：ruby, encryption, bcrypt

我在我的 RoR 中使用 BCrypt，我得到的是数字而不是我习惯的十六进制表示。这里是刑法。

```
username = params[:username]
password = params[:password]

encrypted_password = BCrypt::Password.create(password)
encrypted_password = encrypted_password.hash 
```

encrypted_pa​​ssword 变量显示为 4245597694343378249 之类的数字。我使用 BCrypt for Java，我期待像 $2asfa$asdfasfsafsad 这样的数字。我想知道是否有人知道我做错了什么。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T17:52:56.690

作为数字序列出现的密码变量是因为您将 .hash 应用于加密密码。因此，您正在调用 String#hash 方法，该方法仅根据长度和内容为您提供哈希值。

如果您想查看您期望的 bcrypt 输出，只需执行以下操作：

```
username = params[:username]
password = params[:password]

encrypted_password = BCrypt::Password.create(password)
puts encrypted_password 
```

干杯，肖恩

# jquery - 如何将样式表仅应用于我的 jquery datepicker 小部件？

> ID：10285351
> 
> 赞同：1
> 
> 时间：2012-04-23T17:33:21.350
> 
> 标签：jquery, jquery-ui

我的主页由选项卡式小部件控制，并且我有一个专门为此设计的样式表。然而，我最近才意识到我的应用程序中也需要一个日期选择器。我已将`jquery-ui-style.cs`样式表添加到我的项目中。问题是我只希望这个样式表影响我的日期选择器而不是我的选项卡。

有没有办法将此样式表仅应用于我的日期选择器，无论是在页面最初加载时还是在文本框被关注时？

它可能不需要，但这是我的日期选择器 jquery：

```
$(function () {
    $("#txtViewWeeksData").datepicker({
        changeMonth: true,
        changeYear: true,
        showOtherMonths: true,
        selectOtherMonths: true
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T18:17:05.440

可悲的是，没有“简单”的方法。

但我在这里做了一个例子：http: [//jsfiddle.net/ggwGs/9/](http://jsfiddle.net/ggwGs/9/)

在下载页面（http://jqueryui.com/download）上，您可以在“主题”下选择“高级”。您可以在其中创建自定义“CSS Scope”，输入特殊主题名称，例如“.customTheme”，然后按 donnload。

**如果您创建了自定义主题，则在“下载主题**”下执行完全相同的操作。

现在我们需要在活动时将 CSS 范围类添加到 Datepicker，并在不活动时删除。

所以我们这样做：

```
$("#txtViewWeeksData").datepicker({
    changeMonth: true,
    changeYear: true,
    showOtherMonths: true,
    selectOtherMonths: true,
    beforeShow: function(input, inst) {$(inst.dpDiv).addClass('customTheme');},
    onClose: function(dateText, inst) {$(inst.dpDiv).removeClass('customTheme');}
}); 
```

基本上我们在显示添加范围之前告诉它，在它关闭之后再次删除它。

# wpf - 标题内容的条件格式

> ID：10285355
> 
> 赞同：0
> 
> 时间：2012-04-23T17:33:44.820
> 
> 标签：wpf, silverlight, xaml

我有一些标题的以下模板：

```
<telerik:RadExpander.Header>
    <StackPanel Orientation="Horizontal" DataContext="{Binding CurrentItem, ElementName=activityProductGrid}">
        <TextBlock Text="{Binding Strings[Product], Source={StaticResource LanguageResources}, StringFormat='{}{0}: '}" />
        <TextBlock Text="{Binding Product.Name}" FontWeight="Bold" />
        <TextBlock Text="{Binding Strings[GroupName], Source={StaticResource LanguageResources}, StringFormat=', {0}: '}" />
        <TextBlock Text="{Binding GroupName}" />
        <TextBlock Text="{Binding Strings[UnitPrice], Source={StaticResource LanguageResources}, StringFormat=', {0}: '}" />
        <TextBlock Text="{Binding UnitPrice}" />
    </StackPanel>
</telerik:RadExpander.Header> 
```

如何对标头进行条件格式化，例如，如果 Product == null，那么标头不应显示任何内容？

**编辑：**这个有效。

```
<StackPanel Orientation="Horizontal" DataContext="{Binding CurrentItem, ElementName=activityProductGrid}">
    <i:Interaction.Triggers>
        <ie:DataTrigger Binding="{Binding}" Value="{x:Null}">
            <ie:ChangePropertyAction TargetObject="{RelativeSource={RelativeSource AncestorType=StackPanel}}" PropertyName="Visibility">
                <ie:ChangePropertyAction.Value>
                    <Visibility>Collapsed</Visibility>
                </ie:ChangePropertyAction.Value>
            </ie:ChangePropertyAction>
        </ie:DataTrigger>
    </i:Interaction.Triggers>

    <-- from this point the came code as above -->
</StackPanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:38:05.260

特别是对于 null，您可以为替换值指定绑定参数，或者在绑定错误的情况下显示一个：

```
<TextBlock 
  Text="{Binding Product.Name, TargetNullValue=(empty), FallbackValue=(error)}"/> 
```

（取自[WPF 绑定备忘](http://www.nbdtech.com/Free/WpfBinding.pdf)单）

编辑：我注意到您不仅希望特定绑定具有不同的值，而且不希望显示整个控件。为此，您可以使用样式和触发器，将 a 绑定`DataTrigger`到您的`Product`属性，并设置`Visibility`它是否为空。

```
<telerik:RadExpander.Header>
    <StackPanel>
            <StackPanel.Style>
              <Style TargetType="StackPanel">
                <Style.Triggers>
                  <DataTrigger Binding="{Binding Product}" Value="{x:Null}">
                    <Setter Property="Visibility" Value="Collapsed"/>
                  </DataTrigger>
                </Style.Triggers>
              </Style>
            </StackPanel.Style>
        </StackPanel>
</telerik:RadExpander.Header> 
```

# android - 颜色代码中的 %23 未解码

> ID：10285361
> 
> 赞同：1
> 
> 时间：2012-04-23T17:34:05.080
> 
> 标签：android

我正在使用`loadData()`. 根据文档，我`#s`将标记中的 html 编码为`%23`，例如`<div style="color:%23ffffff">`.

但是，没有设置颜色。我没有使用命名颜色的选项，例如白色，因为标记是由其他人生成的，他们需要精确控制颜色。

我也尝试过`loadDataWithBaseURL()`，它表现出相同的行为。

# python - 使用 mod_wsgi 在 Apache 上运行最简单的 Flask 应用程序的一些问题

> ID：10285362
> 
> 赞同：2
> 
> 时间：2012-04-23T17:34:06.640
> 
> 标签：python, apache, wsgi, flask

我正在尝试运行一个使用 Flask 微框架开发的非常简单的 Python Web 应用程序。我在使用 Ubuntu 10.04 LTS 的 VPS 上。我已按照[此说明](http://library.linode.com/web-servers/apache/mod-wsgi/ubuntu-10.04-lucid)获得令人欣慰的“Hello world！”，这是一次成功的体验。但是现在，我正在设置一个稍微复杂的配置，但我无法让它正常工作。

我的应用程序的 Apache 虚拟主机配置是：

```
<VirtualHost *:80>
    ServerAdmin    user@example.org
    ServerName    domain.com
    ServerAlias    www.domain.com

    DocumentRoot    /srv/www/domain.com/public_html/

    LogLevel    info    # I've put this for debugging purposes.
    ErrorLog    /srv/www/domain.com/logs/error.log
    CustomLog    /srv/www/domain.com/logs/access.log combined

    WSGIDaemonProcess   username   user=username    group=username   threads=5   processes=5
    WSGIScriptAlias /myapplication/     /srv/www/domain.com/myapplication/myapplication.wsgi

    <Directory /srv/www/domain.com/myapplication/myapplication>
        WSGIProcessGroup    username
        WSGIApplicationGroup %{GLOBAL}
        Order deny,allow
        Allow from all
    </Directory>

    Alias /css    /srv/www/domain.com/public_html/css
    Alias /js    /srv/www/domain.com/public_html/js
    Alias /images    /srv/www/domain.com/public_html/images
</VirtualHost> 
```

我的 WSGI 配置文件是：

```
# -*- coding: utf-8 -*-
from myapplication import app as application 
```

上面的配置有问题吗？

最后，Apache 给了我一个 500 错误页面。所以我检查了日志：

```
[info] mod_wsgi (pid=3132, process='', application='domain.com|/myapplication/'): Loading WSGI script '/srv/www/domain.com/myapplication/myapplication.wsgi'.
[error] mod_wsgi (pid=3132): Target WSGI script '/srv/www/domain.com/myapplication/myapplication.wsgi' cannot be loaded as Python module.
[error] mod_wsgi (pid=3132): Exception occurred processing WSGI script '/srv/www/domain.com/myapplication/myapplication.wsgi'.
[error] Traceback (most recent call last):
[error] File "/srv/www/domain.com/myapplication/myapplication.wsgi", line 3, in <module>
[error] from myapplication import app as application
[error] ImportError: No module named myapplication 
```

树形结构如下所示：

```
/myapplication
    myapplication.wsgi
    myapplication (python package) 
```

显然，Python`myapplication`在`sys.path`. 但我已经检查了打印件，它就在那里。我知道这个问题可能很容易解决，但我有点困惑。我怎样才能找到正确的方向来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-24T15:03:53.497

@larsks 向我指出了一个暂时但有效的解决方案。现在，`myapplication.wsgi`看起来像：

```
import os
import sys

sys.path.append('/srv/www/domain.com/myapplication/')
os.environ['PYTHON_EGG_CACHE'] = '/srv/www/domain.com/myapplication/.python-egg'

from myapplication import app as application 
```

谢谢！

# python - 如何使用 Python Tornado 构建线程安全的请求处理程序

> ID：10285364
> 
> 赞同：2
> 
> 时间：2012-04-23T17:34:09.327
> 
> 标签：python, tornado

Tornado 是否对单个 RequestHandler 同时处理多少个请求做出任何保证？我正在考虑像这样管理会话数据：

```
class MyHandler(tornado.web.RequestHandler):
  def prepare(self):
    self.session = load_session_from_memcached

  def get(self):
    # work with self.session

  def on_finish(self):
    save_session_to_memcached(self.session) 
```

但这只有在`self.session`in与in`get()`相同时才有效。只有当单个 RequestHandler 最多同时处理一个请求时，这才是正确的。这是龙卷风的工作原理吗？`self.session``prepare()`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-24T02:35:03.973

`RequestHandler`s 根据请求实例化。单个请求处理程序实例将在其生命周期中服务一个且仅一个请求

* * *

编辑：

这是确认我上述声明的文档部分的链接： [http ://www.tornadoweb.org/documentation/overview.html#overriding-requesthandler-methods](http://www.tornadoweb.org/documentation/overview.html#overriding-requesthandler-methods)

参见第 1 项：在每个请求上创建一个新的 RequestHandler 对象

# hex - 来自 uicolor 的十六进制颜色

> ID：10285365
> 
> 赞同：13
> 
> 时间：2012-04-23T17:34:09.480
> 
> 标签：hex, uicolor

我在将 uicolor 转换为十六进制颜色时遇到问题，这是我发现的

```
CGColorRef colorref = [[Colorview_ backgroundColor] CGColor];

int numComponents = CGColorGetNumberOfComponents(colorref);

if (numComponents == 4) {
    const CGFloat *components = CGColorGetComponents(colorref);

    int hexValue = 0xFF0000*components[0] + 0xFF00*components[1] + 0xFF*components[2];

    NSString *hexString = [NSString stringWithFormat:@"#%d", hexValue];
} 
```

这段代码给了我#5576149（例如）hexString，我们你看到有7位数字而不是6位，它不是十六进制颜色，任何帮助将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-30T07:17:11.453

上面的 sylphos 答案不适用于 darkGrayColor。

这效果更好（取自[http://softteco.blogspot.jp/2011/06/extract-hex-rgb-color-from-uicolor.html](http://softteco.blogspot.jp/2011/06/extract-hex-rgb-color-from-uicolor.html)）：

```
- (NSString *) hexFromUIColor:(UIColor *)color {
    if (CGColorGetNumberOfComponents(color.CGColor) < 4) {
        const CGFloat *components = CGColorGetComponents(color.CGColor);
        color = [UIColor colorWithRed:components[0] green:components[0] blue:components[0] alpha:components[1]];
    }
    if (CGColorSpaceGetModel(CGColorGetColorSpace(color.CGColor)) != kCGColorSpaceModelRGB) {
        return [NSString stringWithFormat:@"#FFFFFF"];
    }
    return [NSString stringWithFormat:@"#%02X%02X%02X", (int)((CGColorGetComponents(color.CGColor))[0]*255.0), (int)((CGColorGetComponents(color.CGColor))[1]*255.0), (int)((CGColorGetComponents(color.CGColor))[2]*255.0)];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T17:39:20.097

```
NSString *hexString = [NSString stringWithFormat:@"#%d", hexValue]; 
```

您正在使用 %d 将其格式化为数字

您想使用 %x 或 %X 将其格式化为十六进制 - 也许作为字符串 %s 我没有检查函数正在做什么以及`int hexValue`正在保存什么

> d 或 i 有符号十进制整数 392
> 
> x 无符号十六进制整数 7fa
> 
> X 无符号十六进制整数（大写字母） 7FA

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-31T18:16:01.717

我昨天尝试过，因为我必须从 uicolor 获取十六进制颜色并使其在 javascript 中也可以工作，但是当组件为 0 时这不起作用，因为它得到 0 而不是 00。所以纯青色会为 RGB 0 255 255，此代码将返回 #0ffff 而不是 #00ffff。

我用你的代码制作了这段代码，它正在我的应用程序上运行：

```
-(NSString*)colorToHex:(UIColor*)color{

    CGColorRef colorref = [color CGColor];

    const CGFloat *components = CGColorGetComponents(colorref);

    NSString *hexString = @"#";
    int hexValue = 0;

    for (int i=0; i<3; i++) {
        if (components[i] == 0) {
            hexString = [NSString stringWithFormat:@"%@00", hexString];
        }else{
            hexValue = 0xFF*components[i];
            hexString = [NSString stringWithFormat:@"%@%x", hexString, hexValue];
        }
    }

    return hexString;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-08-14T21:15:13.910

这是它的一个版本，但被格式化为 C 函数：

```
static inline NSString *hexFromUIColor(UIColor * _color) {
    if (CGColorGetNumberOfComponents(_color.CGColor) < 4) {
        const CGFloat *components = CGColorGetComponents(_color.CGColor);
        _color = [UIColor colorWithRed:components[0] green:components[0] blue:components[0] alpha:components[1]];
    }
    if (CGColorSpaceGetModel(CGColorGetColorSpace(_color.CGColor)) != kCGColorSpaceModelRGB) {
        return [NSString stringWithFormat:@"#FFFFFF"];
    }
    return [NSString stringWithFormat:@"#%02X%02X%02X", (int)((CGColorGetComponents(_color.CGColor))[0]*255.0), (int)((CGColorGetComponents(_color.CGColor))[1]*255.0), (int)((CGColorGetComponents(_color.CGColor))[2]*255.0)];
} 
```

# css - CSS3下拉菜单可以淡入淡出吗？

> ID：10285375
> 
> 赞同：4
> 
> 时间：2012-04-23T17:34:49.213
> 
> 标签：css

我用 CSS3 实现了一个下拉菜单，当父级`li`悬停时，它会很好地淡入下拉菜单。但是下拉菜单不会淡出，这就是原因。由于您无法转换显示属性，因此淡入淡出是通过转换不透明度来完成的。由于只是转换了不透明度，因此您需要将子移开`ul`- 否则将在悬停时出现不可见的子菜单。

我创建了一个 JS Fiddle 来演示这一点 - 如果没有`left:1000px;`规则`ul#mainNav li ul`，它会很好地淡出。但是您可以将鼠标悬停在不可见的菜单上。- [http://jsfiddle.net/YZvdm/](http://jsfiddle.net/YZvdm/)

那么我该如何让它淡出而不让它不小心悬停呢？`height:0;`也将消除淡出，所以这不是一个选择。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-02-17T17:19:16.473

完成这项工作的关键是在可见性上使用`visibility:hidden`而不是`display:none`使用 a `transition-delay`，直到之后`opacity`变为 0。

```
.nav li ul {
  visibility: hidden;
  opacity: 0;
  -prefixes-transition-property: opacity, visibility;
  -prefixes-transition-duration: .4s, 0s;
  -prefixes-transition-delay: 0s, .4s;
}

.nav li:hover ul {
  visibility: visible;
  opacity: 1;
  -prefixes-transition-delay: 0s, 0s;
} 
```

小提琴：http: [//jsfiddle.net/YZvdm/29/](http://jsfiddle.net/YZvdm/29/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-01T17:33:40.977

事实证明，对于我来说，简单地实现 jQuery 淡入和淡出是一个更好的解决方案，如下所示：

```
$(function() {

    $('#topNav ul').find('ul').show().hide();
    $('#topNav > ul > li').hover(function() {
        $(this).children('ul').stop().fadeIn(300);
    }, function() {
        $(this).children('ul').stop().fadeOut('fast');
    });

} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-07T19:03:05.480

这是一个带有淡入淡出的全 CSS 下拉菜单的 Github。它应该能够做所有你可以用 Javascript 做的事情。

[http://github.com/jmeas/CSS3-Dropdown-With-Fade](http://github.com/jmeas/CSS3-Dropdown-With-Fade)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T17:48:14.837

我实际上并没有对此进行测试，但是您应该能够通过定义自己的特殊“延迟”动画并将其应用于子菜单来解决它。

```
#mainNav > li > ul {  
    -moz-animation-duration: 3s;  
    -moz-animation-name: delaySlide;     
}  

@-moz-keyframes delaySlide {  
    from {  
      height: auto;  
    }  

    95% {  
       height: auto;
    }  
    to {  
      height: 0;  
    }     
} 
```

这样做，并正确计时，应该使菜单的高度动画在淡出*之后*发生。

示例代码从[https://developer.mozilla.org/en/CSS/CSS_animations#Defining_the_animation_sequence_using_keyframes](https://developer.mozilla.org/en/CSS/CSS_animations#Defining_the_animation_sequence_using_keyframes)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-30T07:01:20.987

我在 Codepen 上创建了一个演示，它适用于 Firefox 或其他：

[http://codepen.io/hayatbiralem/pen/Gdfie](http://codepen.io/hayatbiralem/pen/Gdfie)

希望这可以帮助。

![截屏](../Images/beb25f87269c9951c8fb36cc679afad4.png)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-08T17:47:39.687

我参加这个聚会迟到了，但这是我最终面临类似前景的结果：

小提琴： [https ://jsbin.com/bibokaqumi/1/edit?html,css,output](https://jsbin.com/bibokaqumi/1/edit?html,css,output)

标记：

```
<nav>
  <ul>
    <li>Link One</li>
    <li class="sub">Link Two
      <ul>
        <li>Sub-Link One</li>
        <li>Sub-Link Two</li>
      </ul>
    </li>
    <li>Link Three</li>
  </ul>
</nav> 
```

CSS3：

```
nav li {
    list-style: none;
}

nav > ul > li {
    height: 100px;
    padding-right: 50px;
    float: left;
}

    nav > ul > li.sub {
        position: relative;
    }

        nav > ul > li.sub ul {
            position: absolute;
            top: 20px;
            width: 200px;
            visibility: hidden;
        }

        nav > ul > li.sub ul {
            opacity: 0;
            transition-property: opacity;
            transition-duration: 0.3s;
        }

        nav > ul > li.sub:hover ul {
            opacity: 1;
            transition-delay: 0.1s;
            visibility: visible;
        } 
```

# php - 带有 IF 语句路径错误的简单 XML 加载文件

> ID：10285378
> 
> 赞同：0
> 
> 时间：2012-04-23T17:35:05.553
> 
> 标签：php, simplexml

我有一个名为`list.xml`我网站根目录的 XML 文件。我想通过`simplexml_load_file()`我网站的每个页面加载它。

我在模板文件中尝试了以下代码：

```
if ($level == 1) {
    $xml = simplexml_load_file('list.xml');
} else {
    $xml = simplexml_load_file('../list.xml');
} 
```

变量 $level = 1 在根级别的页面上设置。在其余的页面上，都是一层深度，$level 没有设置，相对路径'../list.xml' 应该用于这些页面。

当我访问根级页面时，该站点正确加载，但一级深度的页面返回错误：

PHP 警告：simplexml_load_file()：I/O 警告：未能加载外部实体“list.xml”

我已经确保相对路径是正确的。我尝试了上述代码的其他组合，但我不知道出了什么问题。它起作用的唯一方法是在每个网页中手动设置路径。但是那样的话，维护起来会很困难。

谢谢你的帮助！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:37:15.627

而不是尝试根据输入文件自定义脚本，您可以编写一行，无论您的脚本在 Web 树中的哪个位置都可以工作：

```
$xml = simplexml_load_file($_SERVER['DOCUMENT_ROOT'] . '/list.xml'); 
```

# c - 我正在做一个项目，我是关于使用 XOR 进行密码分析的新手。我如何使用密码分析来获取明文？

> ID：10285384
> 
> 赞同：1
> 
> 时间：2012-04-23T17:35:32.240
> 
> 标签：c, encryption, cryptography, xor, brute-force

这对某些人来说可能真的很容易。我不太明白如何使用密码分析和蛮力破解 XOR 加密文件。我有一个 PDF 文件，该文件使用一个程序对 8 个字节乘以 8 个字节进行异或加密。程序代码是

```
int main(int argc, char** argv) {

if (argc!=3) {
  printf("command (for example) : ./enc1 file_to_encrypt key_in_hex\n");
  return 1;
}

// get the key
unsigned long long key=strtoull(argv[2], NULL, 16);

// open the file
char* file=argv[1];
int fdp=open(file, O_RDONLY);
if (fdp<0) {
   printf("cannot open the file %s\n", file);
   return 1;
} 

 // open the file to save the encryption
 char enc[strlen(file)+10];
 strncpy(enc, file, strlen(file));
 strncpy(enc+strlen(file), ".enc1\0", 5);
 enc[strlen(file)+5]='\0';
 int fdc=open(enc, O_CREAT|O_WRONLY, S_IRUSR|S_IWUSR);

 if (fdc<0) {
    printf("cannot save the encrypted file %s\n", enc);
    return 1;
}

  // encryption
  unsigned long long buf;
  unsigned long long k;
  int len;
  k=key;
  while ((len=read(fdp, (char*)&buf, 8))>0) {
  buf^=k;
  k*=key;
   write(fdc, (char*)&buf, len);
 }

 close(fdp);
 close(fdc);
 return 0;
} 
```

我知道 PDF 文件的标题是

%PDF-1.0 %PDF-1.1

如何使用该信息获取明文？我对标题进行异或吗？非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:39:04.880

XOR 很容易可逆。假设 m 是您的原始文件，而 e 是它的加密版本。然后

```
e[0] = k[0] ^ m[0]
e[1] = k[1] ^ m[1]
e[2] = k[2] ^ m[2]
e[3] = k[3] ^ m[3] 
```

但是异或是可逆的，所以你可以通过知道 e 和 m 的一部分来找到 k：

```
k[0] = e[0] ^ m[0]
k[1] = e[1] ^ m[1]
k[2] = e[2] ^ m[2]
k[3] = e[3] ^ m[3] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T18:57:40.723

OP 没有接受答案，而且似乎仍有问题，所以这是我的答案，来自 user1202136 和 OmnipotentEntity。

要确定密钥，将加密文件的前 8 个字符与您期望的标题字符串逐个字符进行异或运算，例如 %PDF-1.4。结果是一个长度相同的字符串，您可以将其复制到一个`unsigned long long`键中（也占用 8 个字节。）您的程序需要一个十六进制键值，因为`strtoull`给定的基本参数为 16。因此使用说明`%llx`符来格式化结果, 否则它将是十进制并且将不起作用。

```
void find_key(const char *filename, const char *m)
{
    // open the encrypted file
    FILE *fp = fopen(filename, "r");
    if (!fp)
        return;

    // read encrypted header
    char e[8];
    for (int i = 0; i < 8; i++)
        e[i] = fgetc(fp);
    fclose(fp);

    // xor with known header
    char k[8];
    for (int j = 0; j < 8; j++)
        k[j] = e[j] ^ m[j];

    // copy into 8 byte value, and output in base-16
    unsigned long long newkey;
    memcpy(&newkey, &k, 8);
    printf("Testing for %s gives key %llx\n", m, newkey);
} 
```

由于您不确定标头版本，请使用不同的选项运行几次。如果加密文件是这些 .pdf 版本之一，那么您将拥有一个用于解密它的密钥。

```
int main(int argc, char *argv[])
{
    if (argc != 2)
        return 1;
    find_key(argv[1], "%PDF-1.0");
    find_key(argv[1], "%PDF-1.1");
    find_key(argv[1], "%PDF-1.2");
    find_key(argv[1], "%PDF-1.3");
    find_key(argv[1], "%PDF-1.4");
    return 0;
} 
```

您的程序用于加密和解密。这是因为上面回答的 XOR 的可逆性质。将加密的文件名和生成的密钥作为参数传递。

在这个测试示例中，我首先使用您的程序使用给定密钥加密 .pdf，然后使用上述方法再次找到该密钥，然后使用您的程序使用最佳密钥结果对其进行解密。

```
$ ./enc1 test.pdf 1234ABCD
$ ./find-key test.pdf.enc1 
Testing for %PDF-1.0 gives key 30000001234abcd
Testing for %PDF-1.1 gives key 20000001234abcd
Testing for %PDF-1.2 gives key 10000001234abcd
Testing for %PDF-1.3 gives key 1234abcd
Testing for %PDF-1.4 gives key 70000001234abcd
$ ./enc1 test.pdf.enc1 1234abcd 
```

希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T17:43:35.590

要添加到 user1202136 的答案，

如果你有两个用相同密钥编码的不同消息，你可以检索密钥的第一个`n`字符（以及两个消息）（`n`较短消息的长度在哪里）（这就是 WEP 破解的工作原理，孩子们。）（以下不是代码，而是数学。）

```
eA[0] = k[0] ^ mA[0]
eB[0] = k[0] ^ mB[0]
eA[0] ^ eB[0] = k[0] ^ k[0] ^ mA[0] ^ mB[0]
eA[0] ^ eB[0] = mA[0] ^ mB[0]
eA[0] ^ eB[0] ^ mA[0] = mB[0]
mB[0] ^ eB[0] = k[0] 
```

# python - 使用 webassets 混合 css 和 less

> ID：10285386
> 
> 赞同：2
> 
> 时间：2012-04-23T17:35:38.250
> 
> 标签：python, django

是否可以混合文件类型并使用单个包添加过滤器，例如

```
css = Bundle(
    'css/reset.css',
    'css/style.css',
    'css/fancybox.css',
    'css/custom.less',
    output='gen/packed.css',
    filters=['less']
) 
```

我希望所有的 css 和 less 输出到同一个文件，即`gen/packed.css`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-28T08:49:49.623

您需要像这样设置捆绑包：

```
css = Bundle(
  'css/reset.css',
  'css/style.css',
  'css/fancybox.css',        
  Bundle('css/*.less', filters='less', debug=False)
  output='gen/packed.css'
) 
```

[http://elsdoerfer.name/docs/webassets/css_compilers.html](http://elsdoerfer.name/docs/webassets/css_compilers.html)

# powershell - Powershell 和 HP 标准 TCP/IP 打印机端口

> ID：10285391
> 
> 赞同：3
> 
> 时间：2012-04-23T17:35:56.947
> 
> 标签：powershell, printing, port, wmi

我遇到的问题是我们的一个打印服务器有一堆使用“HP 标准 TCP/IP 端口”而不是“标准 TCP/IP 端口”的 HP 打印机。问题是，没有与 HP 类型 tcp/ip 端口接口的 WMI 类。

有谁知道这样做的方法？

我的一部分想知道这两个端口之间有什么区别，以及为所有这些 HP 打印机创建新的标准端口是否会更好。如果有人对此有任何想法，我也想听听他们的意见。我不想破坏任何东西！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T14:31:19.870

MS 知识库中有[一篇文章解释了如何将 HP“标准”TCP/IP 端口转换为“常规”端口。](http://support.microsoft.com/kb/2411921)然后你回到 WMI。

# javascript - 有什么方法可以在我的 javascript 中引入延迟吗？

> ID：10285392
> 
> 赞同：2
> 
> 时间：2012-04-23T17:36:03.243
> 
> 标签：javascript, jquery

我的代码中有以下功能。这是一个简化版本：

```
$.ajax({
  url: $form.attr('action'),
  dataType: 'json',
  type: 'POST',
  data: $form.serializeArray(),
  success: function (json, textStatus, XMLHttpRequest) {
    // delay here
    alert("hello");
  } 
```

有什么方法可以引入延迟。例如，上述代码延迟 5 秒？

请注意，我需要将此处的 // 延迟一词替换为可能会产生延迟的内容。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T17:36:48.700

您可以使用`setTimeout()`匿名函数：

```
setTimeout(function() { /* your code here */ }, 5000); 
```

这将在 5 秒延迟后运行该函数内的代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T17:37:41.243

你当然可以。

```
 $.ajax({
            url: $form.attr('action'),
            dataType: 'json',
            type: 'POST',
            data: $form.serializeArray(),
            success: function (json, textStatus, XMLHttpRequest) {
                  // delay here
                  setTimeout(function() { alert("hello"); }, 5000);
            }); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T17:38:56.393

您将使用`setTimeout()`，这就是您将其引入您自己的代码的方式：

```
$.ajax({
  url: $form.attr('action'),
  dataType: 'json',
  type: 'POST',
  data: $form.serializeArray(),
  success: function (json, textStatus, XMLHttpRequest) {
    // save 'this' pointer in case you need it in the setTimeout() function
    // because it will be set to something different in the setTimeout() callback
    var self = this;
    setTimeout(function() {
        // execute whatever code you want here with a 5 second delay
        alert("hello");
    }, 5000) ;
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T17:37:53.530

您可以使用该[`setTimeout`](https://developer.mozilla.org/en/DOM/window.setTimeout)方法

如果您想延迟警报，请使用

```
success: function (json, textStatus, XMLHttpRequest) {
                  // delay here
                  setTimeout(function(){alert("hello");}, 5000); // 5000 is in milliseconds
            } 
```

# android - Android 字符串数组转数组

> ID：10285393
> 
> 赞同：14
> 
> 时间：2012-04-23T17:36:14.643
> 
> 标签：android, arrays

这次我想从 strings.xml 中获取一个数组列表元素并将其转换为一个数组（String[]、List 或以后可用于读取元素或总大小的任何内容）。我正在尝试，`List<String> MathFormulas = Arrays.asList(getResources().getStringArray(R.id.StringArray));`但应用程序崩溃了，所以这一定是错误的做法。一些帮助？谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-23T17:40:38.983

您可以将其转换为字符串 arrar，如下所示：

```
String[] cmd = getResources().getStringArray(R.array.StringArray); 
```

或者

```
List<String> MathFormulas = Arrays.asList(getResources().getStringArray(R.array.StringArray)); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-23T17:40:55.127

我看到您使用的标识符 R. **id** .StringArray 应该以 R. **array**开头。其余的代码对我来说看起来不错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T17:41:33.127

尝试使用 R.array.StringArray 而不是 R.id.StringArray。

# logging - 通过 SQL Server Reporting Services 查看的日志记录数据

> ID：10285399
> 
> 赞同：0
> 
> 时间：2012-04-23T17:36:43.927
> 
> 标签：logging, reporting-services

我们希望记录用户通过报告服务看到的数据。

有没有办法自动保存用户生成的所有报告的副本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T15:49:59.650

是的，报告快照。

可以通过在每次报告运行时创建快照来创建报告的历史版本。

# python - 这种处理 Django 多个设置文件的方法是否合理？

> ID：10285406
> 
> 赞同：5
> 
> 时间：2012-04-23T17:37:12.117
> 
> 标签：python, django

# 问题

我对以下多个 Django settings.py 文件的处理是否合理（透明、安全等）？

## 我的方法

我有一个`settings.py`和一个`settings_local.py`。`settings.py`受版本控制，而 a`settings_local.py`不受版本控制。最后，如果可用，`settings.py`它会尝试导入。`settings_local.py`

我对这种方法的理论是，我可以保留我的默认/安全设置，`settings.py`然后简单地推送到生产环境进行部署。在部署时，`settings_local.py`将不存在，并且不使用其仅限本地的设置。但是，当`settings_local.py`存在本地工作并使用其仅本地设置时。

### 设置.py

```
DEBUG = False
MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
)
# other settings...

try:
    from settings_local import *
except ImportError:
   pass 
```

### settings_local.py

```
from settings import *

DEBUG = True
MIDDLEWARE_CLASSES += (
    'debug_toolbar.middleware.DebugToolbarMiddleware',
)
# other settings... 
```

我对这种方法的担忧是它们都导入了另一个。我认为这不符合循环导入的条件，但可以作为在不同情况下考虑合并这些文件的指标。

`settings_local.py`导入的原因`settings.py`是我可以添加到已经定义的变量，同时遵守 DRY 原则，例如添加一个新条目`MIDDLEWARE_CLASSES`而不完全重新定义它。

谢谢！

* * *

# 解决方案

最终，我放弃了上述方法。尝试解决这个问题对我来说是一个有趣且内容丰富的过程，但是，我的合并方法有太多缺点。

对于将来发现此问题的人们，最合适的方法可能是[该主题的 wiki 页面](https://code.djangoproject.com/wiki/SplitSettings)中概述的解决方案之一，正如 @DrTyrsa 和 @Mark Lavin 所指出的那样，谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T20:35:32.043

虽然这是一种常见的方法，但它不是一个好方法。我过去曾使用过这种类型的配置，但后来放弃了它。当您有多个开发人员一起工作或部署到多个环境（即登台和生产）时，问题就出现了。您可以选择

1.  `settings.py`进行生产设置。然后每个开发人员必须覆盖设置来设置他们的本地环境（数据库设置`DEBUG=True`、添加`debug_toolbar`等）。由于这不在源代码控制中，因此它是重复的工作，并导致“它在我的机器上工作”之类的问题。
2.  `settings.py`进行开发设置。现在，您拥有了一些有意义的生产配置，`local_settings.py`它们**不在源代码控制**中。这使部署变得混乱。显然，您不想将敏感信息放在源代码管理中。

添加临时环境只会使情况变得更糟。我更喜欢SplitSettings wiki 中描述的[环境简单包组织。](https://code.djangoproject.com/wiki/SplitSettings#SimplePackageOrganizationforEnvironments)

# file - 什么是 .S 文件？

> ID：10285410
> 
> 赞同：98
> 
> 时间：2012-04-23T17:37:35.720
> 
> 标签：file, assembly, file-extension

我已经`.S`在各种项目中看到过文件，例如 Linux 内核、FreeBSD 内核或其他一些项目中的文件。这些文件有什么作用，为什么我们不能有`.c`文件呢？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-04-23T17:40:45.113

`.S`文件是用汇编编写的源代码文件。汇编是一种极低级的编程形式。这些文件包含按顺序发送到处理器的汇编指令，并且通常基于选定的体系结构进行编译。此类文件的示例经常出现在特定架构的 linux 内核中，例如 x86、sparc、ARM 等。

有关汇编语言的更多信息：

*   [X86 汇编/GAS 语法](https://en.wikibooks.org/wiki/X86_Assembly/GAS_Syntax)
*   [x86 指令列表](https://en.wikipedia.org/wiki/X86_instruction_listings)
*   [TLDP Linux 汇编方法](http://www.tldp.org/HOWTO/Assembly-HOWTO/)
*   Linux 内核中的示例：[arch/x86/net/bpf_jit.S](https://github.com/torvalds/linux/blob/177366bf7ceb35860281a6ebe824e42bf96fd95d/arch/x86/net/bpf_jit.S)

* * *

## 回答 #2

> 赞同：70
> 
> 时间：2018-06-30T00:18:46.577

那`.S`就是汇编语言。通常那是

没有人提到的是**为什么大写S？**

*   `.S`（大写的 S）代表仍必须通过预处理器的*汇编代码。*这意味着它可以具有`#include`和`#define`其他宏。它也可以看作是扩展`.sx`

*   `.s`(lower s) 是可以编译成对象的纯汇编代码。

为什么不使用`.c`？好吧，作为一个操作系统，不可能用*C*编写所有内容。实际上，这将是理想的，并且 C 语言本身具有与帮助创建操作系统和减少编写代码所需的汇编量相关的背景历史。但是许多低级操作过于依赖机器。

[这是一个用于 linux 引导的内存复制例程的](https://github.com/torvalds/linux/blob/master/arch/x86/boot/copy.S)一个很好的例子，它使用

`#include <linux/linkage.h>`

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-01-04T23:20:55.337

*.S 文件是汇编文件。

> 为什么是 .S 和为什么不是 .c 文件？

这是因为机器相关的东西/像设置缓存和内存这样的早期初始化只能通过汇编级指令来完成，比如 I/O 指令。

内核没有 libc 库来处理各种资源的初始设置。甚至在应用程序执行期间的任何时候，硬件资源都会依次调用系统调用，这些调用调用以汇编语言编码的 I/O 例程。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-04-23T17:40:08.233

`.S`扩展名表示[汇编语言](http://my.safaribooksonline.com/book/operating-systems-and-server-administration/linux/0130879401/assembly-language/ch04lev1sec8)文件。

> 为什么我们不能有 .C 文件呢？

因为原始源代码——无论是人工输入的还是编译器生成的——是汇编，而不是 C。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-04-23T17:40:03.023

它们是[汇编代码](http://en.wikipedia.org/wiki/Assembly_language)文件：

> 汇编语言是用于计算机、微处理器、微控制器和其他可编程设备的低级编程语言，其中每个语句对应于单个机器语言指令。与大多数高级编程语言相比，汇编语言特定于特定的计算机体系结构，后者可能更具可移植性。

因此这些文件与 C 代码文件不同。

请注意，[C 文件可以内联汇编指令](http://www.ibiblio.org/gferg/ldp/GCC-Inline-Assembly-HOWTO.html)。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-01-12T18:06:49.193

.S 文件是汇编语言文件。它们是机器代码的一种形式。它处于较低的编程水平。所有机器相关的代码都是用汇编语言编写的。不同的处理器的汇编语言是不同的。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-08-22T18:27:26.797

.S 文件是用汇编语言编写的代码，即低级编程。在linux内核源码中，.S一般是linux内核启动时内核运行的启动文件（如：-head.S）。我们将其写在 .S 而不是 .C 中，因为此时我们还没有准备好运行 .C 编译的 .O 文件。我们需要使用与架构相关的寄存器并启动内核。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-04-17T17:59:10.147

为了完整起见：还有另一个“.s”文件，不是汇编，而是用于对微控制器进行编程的“SREC”二进制文件（以 ASCII 编码）。

[https://en.wikipedia.org/wiki/SREC_(file_format)](https://en.wikipedia.org/wiki/SREC_(file_format))

打开这样的文件后，您会看到如下所示的文本行：

```
S315000000500C9413110C94D510189518950C949710B0
S31500000060189518950C941010189518950C946A10FC
S31500000070189518950C9403131895189518951895B6
S315000000800C940B1218951895189518950C944912FE
S315000000900C943D101895189518951895189518955F 
```

# hibernate - NHibernate 在标准上展平属性

> ID：10285416
> 
> 赞同：0
> 
> 时间：2012-04-23T17:38:04.060
> 
> 标签：hibernate, nhibernate, fluent-nhibernate, criteria

我有以下实体：

```
Patient: PatientId, Name, //etc ...

Doctor: DoctorId, Name, //etc...

MedicalConsultation: MedicalConsultationId, Patient, Doctor //(Patient is of type Patient and Doctor is of type Doctor). 
```

和相应的表，其中 MedicalConsultations 表具有 DoctorId 和 PatientId 作为外键。

在 NHibernate 中，我需要执行以下操作：

```
restrictions.Add(NHibernate.Criterion.Expression.Like("Doctor.Name", "%" + PartOfDoctorName + "%")); 
```

其中的限制是持有不同限制的 IList。

当我运行此代码时，它返回 MedicalConsultation 没有 Doctor.Name 属性。

我需要以某种方式展平属性：Doctor -> Doctor.Name 并将这样的 ICriterion 添加到我的限制列表中。

谢谢， 塔玛什

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T10:47:00.900

我用第二个别名列表解决了这个问题

```
HashSet<string> aliases = new HashSet<string>();

restrictions.Add(Expression.Like("Doctor.Name", PartOfDoctorName, Matchmode.EveryWhere));
aliases.Add(Doctor);

...

foreach(string alias in aliases)
    criteria.CreateAlias(alias, alias);

// add restrictions 
```

# java - Java/Android：将 xml 转换为可循环对象的最简单方法？（地图？）

> ID：10285418
> 
> 赞同：0
> 
> 时间：2012-04-23T17:38:07.230
> 
> 标签：java, android, xml, dictionary

我有一个包含具有以下结构的 XML 内容的字符串。我的问题是，我如何轻松地将其转换为某种对象，然后遍历其中的所有项目？

是否有任何易于使用的库可以做到这一点？如果是这样，例子会很棒。我最近开始从事 Java 开发，但我仍在学习。

我刚刚阅读了有关 XStream ( [http://x-stream.github.io/tutorial.html](http://x-stream.github.io/tutorial.html) ) 的信息，它看起来很有希望。我只是不知道如何正确应用它。

```
<requests>
    <0>
        <id>1</id>
        <key>sms_number</key>
        <value>0709601159</value>
    </0>
    <1>
        <id>1</id>
        <key>sms_text</key>
        <value>This is a text message, blablabla.</value>
    </1>
</requests> 
```

非常感谢任何建议、想法或示例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:47:31.130

创建一个定义对象是什么的类：

```
public class Term implements Serializable {

private static final long serialVersionUID = 1L;
private String word;
private String abbr1;
private String abbr2;
private String definition;
private String formula;

public String getWord() {
    return word;
}
public void setWord(String word) {
    this.word = word;
}
public String getAbbr1() {
    return abbr1;
}
public void setAbbr1(String abbr1) {
    this.abbr1 = abbr1;
}
public String getAbbr2() {
    return abbr2;
}
public void setAbbr2(String abbr2) {
    this.abbr2 = abbr2;
}
public String getDefinition() {
    return definition;
}
public void setDefinition(String definition) {
    this.definition = definition;
}
public String getFormula() {
    return formula;
}
public void setFormula(String formula) {
    this.formula = formula;
} 
```

}

然后使用 XML 解析器解析您的 XML：

```
public ArrayList<Term> getTerms(){
    ArrayList<Term> termsList = new ArrayList<Term>();

    //create array lists for the four attributes of each term
    ArrayList<String> word = new ArrayList<String>();
    ArrayList<String> abbr1 = new ArrayList<String>();
    ArrayList<String> abbr2 = new ArrayList<String>();
    ArrayList<String> definition = new ArrayList<String>();
    ArrayList<String> formula = new ArrayList<String>();

    //Strings for each of the attributes
    String currentWord = null;
    String currentAbbr1 = null;
    String currentAbbr2 = null;
    String currentDefinition = null;
    String currentFormula = null;

    //try to parse the XML into the four array lists
    try{

        //get the xml document and put it into a reader
        XmlPullParser parser = getResources().getXml(R.xml.terminology);

        //set the eventType and the boolean to test if finished.
        int eventType = parser.getEventType();
        boolean done = false;

        /*
         * while statement that will read through the xml document and includes
         * a switch case block that will go through the tags and put the attributes
         * into the appropriate array lists
         */
        while (eventType !=XmlPullParser.END_DOCUMENT && !done){
            String name = null;
            switch (eventType){
            case XmlPullParser.START_DOCUMENT:
                break;
            case XmlPullParser.START_TAG:
                name = parser.getName();
                if (name.equalsIgnoreCase("terminology")){

                }else if (word != null && abbr1 != null && abbr2 != null && definition != null && formula != null){
                    if (name.equalsIgnoreCase("term")){

                    }else if (name.equalsIgnoreCase("word")){
                        currentWord = new String(parser.getAttributeValue(0));
                    }else if (name.equalsIgnoreCase("abbr1")){
                        currentAbbr1 = new String(parser.getAttributeValue(0));
                    }else if (name.equalsIgnoreCase("abbr2")){
                        currentAbbr2 = new String(parser.getAttributeValue(0));
                    }else if (name.equalsIgnoreCase("definition")){
                        currentDefinition = new String(parser.getAttributeValue(0));
                    }else if (name.equalsIgnoreCase("formula")){
                        currentFormula = new String(parser.getAttributeValue(0));
                    }
                }
                break;
            case XmlPullParser.END_TAG:
                name = parser.getName();
                if (name.equalsIgnoreCase("formula") && currentFormula != null){
                    formula.add(currentFormula);
                }else if (name.equalsIgnoreCase("definition") && currentDefinition != null){
                    definition.add(currentDefinition);
                }else if (name.equalsIgnoreCase("abbr2") && currentAbbr2 != null){
                    abbr2.add(currentAbbr2);
                }else if (name.equalsIgnoreCase("abbr1") && currentAbbr1 != null){
                    abbr1.add(currentAbbr1);
                }else if (name.equalsIgnoreCase("word") && currentWord != null){
                    word.add(currentWord);
                }else if (name.equalsIgnoreCase("term")){
                }else if (name.equalsIgnoreCase("terminology")){
                    done = true;
                }
                break;  
            }
            eventType = parser.next();
        }

    }
    catch (FileNotFoundException e){

    }
    catch (IOException e){

    }
    catch (Exception e){

    }

    for (int i=0; i < word.size(); i++){
        Term term = new Term();
        term.setWord(word.get(i));
        term.setAbbr1(abbr1.get(i));
        term.setAbbr2(abbr2.get(i));
        term.setDefinition(definition.get(i));
        term.setFormula(formula.get(i));
        termsList.add(term);

    }

    return termsList;
} 
```

这对我来说太棒了。这是很多代码，但它实际上也很快。我注意到没有滞后时间，我的 XML 中有近 30 个“术语”，每个都有 5 个属性。只需将您的 XML 存储在 res/xml 下（您可能必须创建 XML 文件夹）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T17:49:46.330

不是一个完整的答案，但您也可以考虑使用简单：[http ://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php#deserialize](http://simple.sourceforge.net/download/stream/doc/tutorial/tutorial.php#deserialize)

它有一套相当全面的教程，如果我没记错的话，它很小，所以它不应该给你的应用程序增加太多的大小。

与大多数这些 XML 解析库一样，您需要创建某种类型的数据对象来保存反序列化的数据，并且您需要在该类中添加一些标签以让反序列化器知道您要从中捕获哪些数据XML 文件及其存储位置。

# java - Java GSSAPI：比较两个 GSSCredential 实例

> ID：10285421
> 
> 赞同：1
> 
> 时间：2012-04-23T17:38:16.033
> 
> 标签：java, kerberos, spnego, gssapi

我的代码目前可以很好地为我的网站用户执行 SPNEGO (Kerberos) 身份验证。我有一个特殊的缓存机制来加速一些基于用户身份确认的决策。对于普通密码身份验证，这很简单——将“当前”用户+密码组合与“旧”组合进行比较——如果没有变化，仍然可以缓存决策。否则，他们需要重新评估。

我正在尝试为 Kerberos 做同样的事情。我已经让它大部分工作了，但我很困惑为什么`GSSCredential.equals()`不能工作。特别是，我在验证每个请求后获得的 GSSCredential 实例是“相同的”，因为它们是针对同一个用户、相同的服务，甚至是在相同的情况下获得的（我认为）。如果我做 a`toString()`并且比较输出它们是相同的（是的，我知道这无关紧要，但这仍然很好地表明它们可能应该相等）。

但是，`GSSCredential_1.equals(GSSCredential_2)`在请求之间总是返回 false。这可能是因为每个都是使用不同的 SPNEGO 票证获得的（根据 Kerberos，这是必要的，以避免重播场景），但这些票证仍然属于同一个主体，并且“针对”同一个服务主体。

我需要做出的代码决策最好这样表述：

这些新凭证是否代表与以前使用的相同的安全主体？到期、目的有效性和其他问题单独评估，然后再评估。

比较他们的名字“有效”，但我希望有一些更强大的东西。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T10:54:43.070

根据 GSSCredentials.equals 方法的 javadocs

> 测试此 GSSCredential 是否断言与提供的对象相同的实体。这两个凭证必须通过相同的机制获取，并且必须引用相同的主体。

使用 equals 方法就足够了。然而，查看实现显示了奇怪行为背后的原因：

```
public boolean equals(Object another) {

    if (destroyed) {
        throw new IllegalStateException("This credential is " +
                                    "no longer valid");
    }

    if (this == another) {
        return true;
    }

    if (!(another instanceof GSSCredentialImpl)) {
        return false;
    }

    // NOTE: The specification does not define the criteria to compare
    // credentials.
    /*
     * XXX
     * The RFC says: "Tests if this GSSCredential refers to the same
     * entity as the supplied object.  The two credentials must be
     * acquired over the same mechanisms and must refer to the same
     * principal.  Returns "true" if the two GSSCredentials refer to
     * the same entity; "false" otherwise."
     *
     * Well, when do two credentials refer to the same principal? Do
     * they need to have one GSSName in common for the different
     * GSSName's that the credential elements return? Or do all
     * GSSName's have to be in common when the names are exported with
     * their respective mechanisms for the credential elements?
     */
    return false;
} 
```

这清楚地表明，只有在提供完全相同的对象实例时才会返回 true。所以我想你需要比较两者`GSSName`和`Oid`（机制）。

# mysql - MySQL，不会调用过程

> ID：10285424
> 
> 赞同：0
> 
> 时间：2012-04-23T17:38:19.980
> 
> 标签：mysql

我正在尝试编写一个程序来找到一类舰艇的火力。（火力是火炮数量*排量的立方）

关系：

```
Classes(class, type, country, numGuns, bore, displacement) 
```

到目前为止我尝试过的...

```
mysql> CREATE PROCEDURE firePower(in className VARCHAR(50), out p int)
-> begin
-> set p = (SELECT numGuns * displacement * displacement * displacement FROM classes
WHERE class = className);
-> end
-> //
Query OK, 0 rows affected (0.35 sec)

mysql> CALL firePower(Iowa, @p)//
ERROR 1054 (42S22): Unknown column 'Iowa' in 'field list'
mysql> SELECT * FROM classes//
+----------------+------+---------+---------+------+--------------+
| class          | type | country | numGuns | bore | displacement |
+----------------+------+---------+---------+------+--------------+
| Bismarck       | bb   | Germany |       8 |   16 |        42000 |
| Iowa           | bb   | USA     |       9 |   16 |        46000 |
| Kongo          | bc   | Japan   |       8 |   14 |        32000 |
| North Carolina | bb   | USA     |       9 |   16 |        37000 |
| Renown         | bc   | Britain |       6 |   15 |        32000 |
| Revenge        | bb   | Britain |       8 |   15 |        29000 |
| Tennessee      | bb   | USA     |      12 |   14 |        32000 |
| Yamato         | bb   | Japan   |       9 |   18 |        65000 |
+----------------+------+---------+---------+------+--------------+
8 rows in set (0.00 sec)

mysql> CALL firePower(Bismarck, @p)//
ERROR 1054 (42S22): Unknown column 'Bismarck' in 'field list'
mysql> 
```

我的问题是我现在似乎无法调用我的程序......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:49:03.383

由于您没有`Bismarck`在调用中引用，因此该过程将其解释为列名。在其周围添加单引号将与实际字符串匹配。

```
mysql> CALL firePower('Bismarck', @p)//
Query OK, 0 rows affected, 1 warning (0.00 sec) 
```

# java - 这个不同步的对象池实现好/安全吗？

> ID：10285426
> 
> 赞同：1
> 
> 时间：2012-04-23T17:38:31.460
> 
> 标签：java, synchronization, lock-free, pooling

这个对象池会导致多线程的可见性问题吗？我特别想知道这种执行顺序：

*   线程 A - 获得对象（）
*   线程 A - 修改对象（假设为 visibleState = 42）
*   线程 A - releaseObject()
*   线程B-obtainObject()（获取A刚刚释放的对象）
*   线程 A - 做一些不相关的事情或死亡
*   线程 B - 修改对象（假设为 visibleState = 1）
*   线程 B - 打印对象 visibleState
*   线程 B - releaseObject()

在B 修改状态本身*之后*，来自线程 A 的修改是否可能对线程 B 可见？（我知道它在实践中不会发生，但我无法弄清楚 JLS/Javadoc 是否以及如何保证这一点）。

这是代码，精简后仅显示要领。我省略了泛化和创建对象的工厂。

```
import java.util.concurrent.atomic.AtomicInteger;
import java.util.concurrent.atomic.AtomicReference;

public class ObjectPool {

/** Maximum number of objects to be kept in pool */
int maxPoolSize = 10;

/** First object in pool (LIFO queue) */
final AtomicReference<PoolableObject> firstObject = new AtomicReference<PoolableObject>();

/** How many objects are currently in the pool */
final AtomicInteger poolSize = new AtomicInteger();

/** Gets an object from the pool. If no object is available
 * from the pool, a new object is created and returned */
public PoolableObject obtainObject() {
    while (true) {
        PoolableObject object = firstObject.get();
        if (object == null)
            break;
        if (firstObject.compareAndSet(object, object.next)) {
            poolSize.decrementAndGet();
            return object;
        }
    }
    // no more objects in pool, create a new object
    return new PoolableObject();
}

/** Returns an object to the pool. */
public void releaseObject(final PoolableObject object) {
    while (true) {
        if (poolSize.get() >= maxPoolSize)
            break;
        final PoolableObject first = firstObject.get();
        object.next = first;
        if (firstObject.compareAndSet(first, object)) {
            poolSize.incrementAndGet();
            break;
        }
    }
}

} 
```

池管理的对象应该继承自这个类：

```
public class PoolableObject {

/** Links objects in pool in single linked list. */
PoolableObject next;

public int visibleState;

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:57:08.420

就可见性而言，具有与[变量](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/package-summary.html#package_description)[`AtomicReference`相同的内存屏障属性。`volatile`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/atomic/package-summary.html#package_description)

在这些属性中，线程在写入 volatile 变量之前的所有操作*“发生在”*写入之前。或者，换句话说，如果源代码显示在 volatile 写入之前发生的操作，则 JITC 无法重新排序该操作以在 volatile 写入之后发生。因此，问题中引用的场景不会有问题；在释放之前对对象所做的更改将对随后捕获该对象的其他线程可见。

但是，我并没有完全遵循这个池的工作方式，并且可能存在其他问题。特别是，我不相信 和 之间缺乏原子性`firstObject`是`poolSize`安全的。线程肯定可以看到这些变量处于不一致的状态，因为它们不是`synchronized`；我不知道这是否重要。

# database - 数据库创建上的 Flex 移动忙指示器

> ID：10285430
> 
> 赞同：0
> 
> 时间：2012-04-23T17:38:53.737
> 
> 标签：database, apache-flex, mobile, create-table, busyindicator

我对 flex 很陌生，不知道发生了什么，哈哈。我想从 xml 文件创建一个大型数据库，但是在将记录插入数据库时​​，应用程序会冻结，直到一切都完成。我有一个创建数据库的 AS3 文件和实际视图中的繁忙指示器，其中按下按钮创建数据库。当我这样做时，代码运行时不显示忙碌指示符。

我在想也许繁忙的指示器应该在实际的 AS3 文件中，但我不知道该怎么做。任何人都可以帮助指出正确的方向吗？谢谢你。

```
enter code here
<fx:Script>
<![CDATA[
import skins.BusyPopUpSkin;
import spark.components.SkinnablePopUpContainer;
private var mPopUp:SkinnablePopUpContainer;
import model.DBcreateDAO;

protected function button1_clickHandler(event:MouseEvent):void
{
    // if busy, return
    if (mPopUp)
        return;

    createPopUp();
    startOperation();
}

private function createPopUp():void
{
    // create the SkinnablePopUpContainer
    mPopUp = new SkinnablePopUpContainer();
    // set the styles
    mPopUp.setStyle("skinClass", BusyPopUpSkin);
    mPopUp.setStyle("backgroundColor", 0x000000);
    mPopUp.setStyle("backgroundAlpha", 0.3);

    layoutPopUp();

    // call PopUpManger to open and add
    mPopUp.open(this);

    positionPopUp();
}

private function layoutPopUp():void
{
    // match the popups width, height to the View
    mPopUp.width = width;
    mPopUp.height = height;
}

private function positionPopUp():void
{
    // use the View x, y coords
    var point:Point = new Point(x, y);
    // convert the View x,y to global so this can be laid out in nested Views
    point = parent.localToGlobal(point);
    // set the popup's global x,y coords
    mPopUp.x = point.x;
    mPopUp.y = point.y;
}

private function startOperation():void
{
    trace("The busy indicator should be running while the database is being created.");

    load(); //function for the actionscript file to make database 
}

private function endOperation():void
{
    mPopUp.close();
    mPopUp = null;
}

private function load():void {
            data = srv.create(); //where my function is to create my database in DBcreateDAO.as

    }

    ]]>
</fx:Script> 
```

----添加了我如何创建我的数据库----

```
enter code hereprivate var _sqlConnection:SQLConnection;

    public function get sqlConnection():SQLConnection
    {
        if (_sqlConnection)
            return _sqlConnection;
        openDatabase(File.documentsDirectory.resolvePath("SongListA.db"));
        return _sqlConnection;

    }

    public function loadDB():Song {
            var sql:String = "SELECT id, number, title, artist, item, product FROM song";
        var stmt:SQLStatement = new SQLStatement();
        stmt.sqlConnection = sqlConnection;
        stmt.text = sql;
        stmt.execute();
        var result:Array = stmt.getResult().data;
        if (result && result.length == 1)
            return processRow(result[0]);
        else
            return null;
    }

    public function create(song:Song):void
    {   
        trace(song.title);      
        var sql:String = 
            "INSERT INTO song (id, number, title, artist, item, product) " +
            "VALUES (?,?,?,?,?,?)";
        var stmt:SQLStatement = new SQLStatement();
        stmt.sqlConnection = sqlConnection;
        stmt.text = sql;
        stmt.parameters[0] = song.id;
        stmt.parameters[1] = song.number;
        stmt.parameters[2] = song.title;
        stmt.parameters[3] = song.artist;
        stmt.parameters[4] = song.item;
        stmt.parameters[5] = song.product;
        stmt.execute();
        song.loaded = true;
    }

    protected function processRow(o:Object):Song
    {

        var song:Song = new Song();
        song.id = o.id;
        song.number = o.number == null ? "" : o.number;
        song.title = o.title == null ? "" : o.title;
        song.artist = o.artist == null ? "" : o.artist;
        song.item = o.item == null ? "" : o.item;
        song.product = o.product == null ? "" : o.product;

        song.loaded = true;
        return song;
    }

    public function openDatabase(file:File):void
    {
        var newDB:Boolean = true;
        if (file.exists)
            newDB = false;

        _sqlConnection = new SQLConnection();
        _sqlConnection.open(file);

        if (newDB)
        {
            startOperation();
            createDatabase();
            populateDatabase();

        }
    }

    protected function createDatabase():void
    {
        trace("Creating the database");
        var sql:String = 
            "CREATE TABLE IF NOT EXISTS song ( "+
            "id INTEGER PRIMARY KEY AUTOINCREMENT, " +
            "number TEXT, " +
            "title VTEXT, " +
            "artist TEXT, " +
            "item TEXT, " + 
            "product TEXT) ";
        var stmt:SQLStatement = new SQLStatement();
        stmt.sqlConnection = sqlConnection;
        stmt.text = sql;
        stmt.execute();         
    }

    protected function populateDatabase(event:Event):void
    {
        this.addElement(busyIndicator);
        var file:File = File.applicationDirectory.resolvePath("SongListFile.xml");
        var stream:FileStream = new FileStream();
        stream.open(file, FileMode.READ);
        var xml:XML = XML(stream.readUTFBytes(stream.bytesAvailable));

        stream.close();
        for each (var emp:XML in xml.song)
        {
            var song:Song = new Song();
            song.id = emp.id;
            song.number = emp.number;
            song.title = emp.title;
            song.artist = emp.artist;
            song.item = emp.item;
            song.product = emp.product;
            create(song);
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T20:33:34.540

AS3 目前是单线程的（在即将发布的版本中正在进行多线程工作）。这意味着，当您的代码正在处理数据和更新数据库时，不会运行其他代码，包括更新繁忙指示器的视觉效果的代码。

在没有看到与 db 相关的代码（我假设它是 SQLite）的情况下给出建议有点困难，但是，规避这个问题的一种方法是在异步模式下处理你的数据库。

我不知道您是如何处理插入的，但是在 SQLite 中，您可以通过手动控制事务何时开始和结束来大大加快它们的速度。否则，它将默认为每次插入一个事务（这将非常慢并且会使您的显示冻结更长时间）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T03:10:26.930

正如@Eduardo 所暗示的那样，确保为 SQLite 调用 openAsynch(...) 方法，并且通常在大型集插入/创建期间将所有这些都包装在 begin()/commit() 事务中。否则，如果您执行每个 sqlstatement，您最终会将所有内容作为单个事务处理，这是挂起线程的绞索。

# html - 带有项目符号的 CSS（不透明度和框问题）

> ID：10285433
> 
> 赞同：0
> 
> 时间：2012-04-23T17:38:57.937
> 
> 标签：html, css, opacity

我的问题与无序列表的文本有关。

我有一个背景图像，并且希望在项目符号和文本周围的白框上具有大约 60% 的不透明度。我最初把它放在外面`<li>`，看起来验证器不喜欢这样。

另一个问题是文本低于 60% 的不透明度，所以颜色都不会真正流行。由于不透明，它们被洗掉了。

**HTML：**

```
<ul>
    <li><div class="faded slim">&nbsp;</div></li>
    <li><div class="faded"><a href="snowplowing.html">Snow Removal</a></div></li>
    <li><div class="faded"><a href="landscape.html">Landscape Construction</a></div></li>
    <li><div class="faded"><a href="parking.html">Parking Lot Maintenance</a></div></li>
    <li><div class="faded slim">&nbsp;</div></li>
</ul> 
```

**CSS：**

```
.faded {
    opacity: 0.4;
    height: 19px;
    width: 175px;
    filter:alpha(opacity=40);
    background-color: #ffffff;
}

.slim {
    height: 13px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:52:21.623

您必须将背景不透明度分配给 ul 而不是 li

[这](http://jsfiddle.net/mjz2Z/)是示例

**HTML**

```
<div id="a">
    <ul class="faded">
        <li><div ><a href="snowplowing.html">Snow Removal</a></div></li>
        <li><div><a href="landscape.html">Landscape Construction</a></div></li>
        <li><div><a href="parking.html">Parking Lot Maintenance</a></div></li>
    </ul>
</div> 
```

**CSS**

```
.faded {
    width: 175px;
    background-color: rgba(255,255,255,0.4);
    padding: 13px 0;
}
#a {
    background-color:rgb(0,0,0);
    padding:10px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T17:44:33.410

*   给你`ul`的类`faded`而不是所有的`li`元素。
*   在 上使用一些填充，`ul`这样您就可以摆脱`.slim`列表项。
*   并使用`rgba`背景颜色而不是不透明度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T08:47:59.740

嗨，您可以首先使用两种方法，即您可以赋予`li class`和定义属性`list-style: none;`

像这样

**CSS**

```
.buletnone{
list-style:none !important;
} 
```

**HTML**

```
<ul>
                    <li class="buletnone"><div class="faded slim">&nbsp;</div></li>
                    <li><div class="faded"><a href="snowplowing.html">Snow Removal</a></div></li>
                    <li><div class="faded"><a href="landscape.html">Landscape Construction</a></div></li>
                    <li><div class="faded"><a href="parking.html">Parking Lot Maintenance</a></div></li>
                    <li class="buletnone"><div class="faded slim">&nbsp;</div></li>
                </ul> 
```

现场演示[http://jsfiddle.net/rohitazad/tWRdM/30/](http://jsfiddle.net/rohitazad/tWRdM/30/)

## ------------------------------------------

## -------------------------------------------

其次是在你的css中定义第一个和最后一个孩子，像这样

```
#mainTitle table tr td ul li:first-child, #mainTitle table tr td ul li:last-child{
list-style:none;
} 
```

现场演示[http://jsfiddle.net/rohitazad/tWRdM/31/](http://jsfiddle.net/rohitazad/tWRdM/31/)

# c - 静态多维数组的 typedef 是什么？

> ID：10285438
> 
> 赞同：0
> 
> 时间：2012-04-23T17:39:41.640
> 
> 标签：c, arrays, typedef

我有一个静态的 int 3D 数组。我可以这样声明：

```
int my_array[X_MAX][Y_MAX][Z_MAX]; 
```

但是，这种类型在我的程序中用于不同的目的，我想创建 typedef 来区分用法并使我的程序更易于阅读。

问题是......我不知道如何创建这些类型定义。`typedef int[X_MAX][Y_MAX][Z_MAX] my_typedef;`是我的第一个也是唯一的猜测。它不编译。你知道是否有办法做我想做的事吗？（我的意思是，没有动态分配的数组）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T17:40:13.350

```
typedef int my_typedef[X_MAX][Y_MAX][Z_MAX]; 
```

# jquery - jQuery Mobile - 自动打开对话框

> ID：10285441
> 
> 赞同：1
> 
> 时间：2012-04-23T17:39:55.410
> 
> 标签：jquery, jquery-mobile

这应该是一个简单的问题，但似乎发生了一些奇怪的事情。我正在使用 Django，并希望在任何页面视图上打开一个带有当前消息的 jQuery 移动对话框。关闭对话框后，窗口应返回即将查看的页面。所以真正的问题是如何在页面加载时打开一个对话框，然后显示页面。

这（它的任何许多变化）都不起作用：

```
{% if messages %}
<section class="dialog" id="messagesDialog" data-role="dialog" data-theme="a">
<header class="okay" data-role="header"><h1>This is a title</h1></header>
<div data-role="content">
    <ul>
        {% for message in messages %}
        <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
        {% endfor %}
    </ul>
</div> {# content #}
</section>

<script type="text/javascript">
$(document).one('pageinit', function(event) {
    $.mobile.changePage("#messagesDialog", 'pop', true, true);
});
</script>
{% endif %} 
```

但这确实：

```
{% if messages %}
<section class="dialog" id="messagesDialog" data-role="dialog" data-theme="a">
<header class="okay" data-role="header"><h1>This is a title</h1></header>
<div data-role="content">
    <ul>
        {% for message in messages %}
        <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
        {% endfor %}
    </ul>
</div> {# content #}
</section>

<script type="text/javascript">
$(document).one('pageinit', function(event) {
    $.mobile.changePage("WhatHeck?!?!"); // This will return a 500 error from the server
    $.mobile.changePage("#messagesDialog", 'pop', true, true);
});
</script>
{% endif %} 
```

那么，这是一个已知问题，还是我缺少的东西？我可以让页面弹出对话框然后在关闭它后显示正确页面的唯一方法是`$.mobile.changePage()`在更改到对话框之前调用导致错误。

===添加===

没有错误，没有对话框，正确的页面：

```
$("section@[data-role=page]").one('pagechange', function(event) {
    //$.mobile.changePage("WhatHeck?!?!");
    $.mobile.changePage("#messagesDialog",{
        transition : 'pop',
        reverse    : false,
        changeHash : true
    });
}); 
```

没有错误，打开对话框，错误页面：

```
$(document).one('pagechange', function(event) {
    //$.mobile.changePage("WhatHeck?!?!");
    $.mobile.changePage("#messagesDialog",{
        transition : 'pop',
        reverse    : false,
        changeHash : true
    });
}); 
```

服务器请求 /WhatHeck 时出现 500 错误？！？！（预期），打开对话框，正确的页面：

```
$(document).one('pagechange', function(event) {
    $.mobile.changePage("WhatHeck?!?!");
    $.mobile.changePage("#messagesDialog",{
        transition : 'pop',
        reverse    : false,
        changeHash : true
    });
}); 
```

没有错误，打开对话框，错误页面：

```
$(document).one('pagechange', function(event) {
    $.mobile.changePage($("section@[data-role=page]"));
    $.mobile.changePage("#messagesDialog",{
        transition : 'pop',
        reverse    : false,
        changeHash : true
    });
}); 
```

错误：“未捕获的 TypeError：无法调用未定义的方法 '_trigger'”，没有对话框，页面正确：

```
$(document).one('pagechange', function(event) {
    $.mobile.changePage($("section@[data-role=page]",{
        changeHash : true
    }));

    $.mobile.changePage("#messagesDialog",{
        transition : 'pop',
        reverse    : false,
        changeHash : true
    });
}); 
```

没有错误，打开对话框，错误页面：

```
$(document).one('pagechange', function(event) {
    $.mobile.changePage("#Home");
    $.mobile.changePage("#messagesDialog",{
        transition : 'pop',
        reverse    : false,
        changeHash : true
    });
}); 
```

确实有效！

```
$(document).one('pagechange', function(event) {
    $.mobile.changePage("#Home", {
        allowSamePageTransition : true
    });

    $.mobile.changePage("#messagesDialog",{
        transition : 'pop',
        reverse    : false,
        changeHash : true
    });
}); 
```

也适用（适用于任何页面）：

```
$(document).one('pagechange', function(event) {
    $.mobile.changePage($("section@[data-role=page]"), {
        allowSamePageTransition : true
    });

    $.mobile.changePage("#messagesDialog",{
        transition : 'pop',
        reverse    : false,
        changeHash : true
    });
}); 
```

所以我的问题的解决方法，就是这个问题的答案：当错误页面加载失败时jquery mobile状态发生了什么？

所以看起来，当从 pagechange 事件处理程序内部调用 changePage 时，历史记录尚未更新。对我来说仍然没有意义，我需要强制它重新加载当前页面，然后打开对话框。这至少是一个更好的解决方案，而不是期望服务器出错。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:14:13.473

It looks like you are using syntax for an old version of jQuery Mobile (which is why you're getting an error). If you are using jQuery Mobile later than `1.0a4.1` then you should take a look at this page: [http://jquerymobile.com/demos/1.1.0/docs/api/methods.html](http://jquerymobile.com/demos/1.1.0/docs/api/methods.html)

Using the syntax of the documentation link above, here is what your code should look like:

```
$(document).one('pageinit', function(event) {
    $.mobile.changePage($("#messagesDialog"), {
        transition : 'pop',
        reverse    : true,
        changeHash : true
    });
}); 
```

If you are using jQuery Mobile `1.0a4.1` then upgrade, it's a year old at this point and isn't particularly stable or feature rich (compared to the latest 1.1.0 build).

# ruby-on-rails - Rails通过sql转义冒号字符查找

> ID：10285442
> 
> 赞同：0
> 
> 时间：2012-04-23T17:39:55.067
> 
> 标签：ruby-on-rails

我正在尝试在一个模型上运行一个 SQL 查询，该模型的值包含一个冒号“：”。

就像是：

```
Model.find_by_sql([SELECT * FROM table WHERE field1 = ? AND field2 ='some:value'], params) 
```

这会导致以下错误：

> ActiveRecord::PreparedStatementInvalid

任何人都知道如何正确地将值文本中的冒号“：”转义到上面的 field2？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T18:10:13.937

使用where，它会使代码更短：

```
Model.where("field1 = ? AND field2 ='some:value']", params) 
```

具体例子：

```
1.9.3-head :024 > Tag.where('created_at <= ? and name = "some:value"', Time.now)
  Tag Load (1.6ms)  SELECT "tags".* FROM "tags" WHERE (created_at <= '2012-04-23 18:06:54.967319' and name = "some:value")
 => [#<Tag id: 2419, name: "some:value", created_at: "2012-04-23 18:06:35", updated_at: "2012-04-23 18:06:35">] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:41:47.233

`gsub!(':','\\:\\')`价值应该工作。

# jquery - 为什么 jquery clone 克隆父级而不克隆其子级？

> ID：10285443
> 
> 赞同：5
> 
> 时间：2012-04-23T17:39:56.267
> 
> 标签：jquery, clone

我有一个父 div 和它的孩子是这样的：

```
<div id="padre" class="demo">
 <ul id="sortable1" class="droptrue ui-sortable">
  <li id="app1" class="ui-state-default toolTip">
   <div id="00" class="AppPadre"></div> 
```

因此，当我用下一行克隆我的父 div 时：

```
var $copia = $('#padre>*').clone(); 
```

我打印我的克隆变量，它只显示：

```
<div id="padre" class="demo">
 <ul id="sortable1" class="droptrue ui-sortable"> 
```

有谁知道为什么它只复制第一 2 级？提前致谢。就在复制之后，我用 $('#padre>*').remove(); 删除“padre”的所有子元素；它确实删除了所有子元素，但是当我进行附加时，它只附加了“padre”的第一个子元素。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T17:46:01.467

您没有正确关闭标签：

```
<div id="padre" class="demo">

     <ul id="sortable1" class="droptrue ui-sortable">
        <li id="app1" class="ui-state-default toolTip"><li>
     </ul>

    <div id="00" class="AppPadre"></div>

</div> 
```

[http://jsfiddle.net/E8uJm/](http://jsfiddle.net/E8uJm/)

* * *

编辑：尝试以下操作：

```
$('#padre').children().clone();
$("#clone").append($copia);
$('#padre').remove(); 
```

[http://jsfiddle.net/E8uJm/2/](http://jsfiddle.net/E8uJm/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:45:52.840

尝试这个：

```
var $copia = $('#padre>*').clone(true, true); 
```

# php - 如何扩展 CodeIgniter 缓存适配器？

> ID：10285445
> 
> 赞同：1
> 
> 时间：2012-04-23T17:40:07.273
> 
> 标签：php, codeigniter, caching, extend

如何扩展 CodeIgniter 缓存适配器？我试过：

```
MY_Cache_file extends CI_Cache_file{
   ...
}

MY_Cache_apc extends CI_Cache_apc{
   ...
} 
```

但似乎不起作用......有可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T17:32:34.730

据我所知，这是不可能的。它仍然是一个应该实现的功能： [https ://github.com/EllisLab/CodeIgniter/issues/179](https://github.com/EllisLab/CodeIgniter/issues/179)

# mysql - 加入 3 张桌子所需的线索

> ID：10285447
> 
> 赞同：1
> 
> 时间：2012-04-23T17:40:09.637
> 
> 标签：mysql, join

这似乎应该很容易，但我还没有设法创建正确的查询或找到等效的情况。假设我有 3 个要加入的表：`Artist`、`Album`和`Track`。（实际上我没有这些表，但我正在使用的表具有等效关系。）

每个`artist`可以有很多`album`s，每个`album`可以有很多`track`s。

该`artist`表已编入索引`artist_id`并包含有关艺术家的信息（`name`、`address`、`phone number`等）。

该`album`表在`artist_id`和上编制索引`album_id`。它包含专辑名称和其他信息（`recording date`、`location`等）。

该`track`表在`artist_id`、`album_id`和上编制索引`track_nbr`。它包含轨道的名称、长度等。

我想要做的是创建一个看起来像这样的报告：

```
Artist|Album|Track#|Track Name
The Wizard of Frobozz|Zork I|01|The White House
The Wizard of Frobozz|Zork I|02|Eaten by a Grue
The Wizard of Frobozz|Zork I|03|Take the Sword
The Wizard of Frobozz|Zork I|04|Don't Forget the Lantern
The Wizard of Frobozz|Zork II|01|Waiting for the Volcano Gnome
The Wizard of Frobozz|Zork II|02|On the Left Bank of Zork
The Wizard of Frobozz|Zork II|03|In the Oddly Angled Room 
```

我可以加入`artist`和`album`表以获取所有表，`albums`但是当我添加表时，每个组合`track`只能得到一个。`track``album``artist`

这似乎应该工作，但没有：

```
select a.name, l.album, t.track_nbr, t.track_name
from track t, album l, artist a 
where t.artist_id = l.artist_id
and l.artist_id = a.artist_id
and t.album_id = a.album_id
order by a.name, l.album, t.track_nbr; 
```

我的猜测是我需要显式声明一个连接并可能添加括号来对连接进行分组，但我无法找到我可以完全理解的文档来执行此操作。

所以……救命？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:45:43.813

```
 SELECT a.name, l.album, t.track_nbr, t.track_name
 FROM artist a
 LEFT JOIN album l ON a.artist_id = l.artist_id
 LEFT JOIN track t ON t.album_id = a.album_id
 ORDER BY a.name, l.album, t.track_nbr; 
```

**数据库设计相关问题**：你为什么要`artist_id`在`track`表中？`artist_id`已通过`album`该轨道所属的定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:57:39.980

这不应该：

```
and t.album_id = a.album_id 
```

居然是这个？

```
and t.album_id = l.album_id 
```

另外，我相信第三个 WHERE 子句比您实际需要的要多。我认为这可以解决问题：

```
select a.name, l.album, t.track_nbr, t.track_name
from track t, album l, artist a 
where t.album_id = l.album_id
and l.artist_id = a.artist_id
order by a.name, l.album, t.track_nbr; 
```

当您说专辑表在album_id 和artist_id 上建立索引时，您到底是什么意思？您是否包含`artist_id`在`album`表的主键中？这是多余的，因为您已经在`album_id`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T17:49:10.730

```
select a.name,
    l.album,
    t.track_nbr,
    t.track_name
from track t
inner join album l on t.album_id = l.album_id
inner join artist a on l.artist_id = a.artist_id
order by a.name,
    l.album,
    t.track_nbr; 
```

# haskell - 在 Haskell 中处理全局标志的正确方法

> ID：10285454
> 
> 赞同：14
> 
> 时间：2012-04-23T17:40:26.080
> 
> 标签：haskell, command-line-arguments

我经常需要使在许多地方使用的核心功能以某种方式可配置 - 即，它可以使用算法 A 或算法 B，具体取决于命令行开关；或者如果以某种方式设置了“调试”标志，则让它将额外的详细信息打印到标准输出。

我应该如何实现这样的全局标志？

我看到了 4 个选项，它们都不是很好。

1.  从函数中读取命令行参数 - 不好，因为这需要 IO monad 并且核心计算函数都是纯的，我不想在那里获取 IO；

2.  将参数从 main/IO 一直传递到需要更改行为的“叶”函数 - 完全无法使用，因为这意味着更改不同模块中的十几个不相关的函数来传递此参数，我想尝试这样多次配置选项，无需每次更改包装代码；

3.  用于`unsafePerformIO`获取真正的全局变量 - 对于这样一个简单的问题，感觉很丑陋和矫枉过正；

4.  在函数的中间有两个选项的代码并将其中一个注释掉。或者具有函数 do_stuff_A 和 do_stuff_B，并根据全局函数的内容更改调用其中的哪一个`needDebugInfo=True`。这就是我现在正在为`debuginfo`.

我不需要也不想要全局可变状态——我想要一个简单的全局标志，它在运行时不可变，但可以在程序启动时以某种方式设置。有什么选择吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-23T17:50:10.450

这些天来，我更喜欢使用[monad`Reader`来](http://hackage.haskell.org/packages/archive/mtl/1.1.0.2/doc/html/Control-Monad-Reader-Class.html)构建应用程序的只读状态。该环境在启动时被初始化，然后在整个程序的顶层可用。

一个例子[是 xmonad](http://xmonad.org/xmonad-docs/xmonad/src/XMonad-Core.html#X)：

```
newtype X a = X (ReaderT XConf (StateT XState IO) a)
    deriving (Functor, Monad, MonadIO, MonadReader XConf) 
```

程序的顶层部分运行在`X`而不是`IO`; 其中`XConf`是由命令行标志（和环境变量）初始化的数据结构。

`XConf`然后可以将状态作为纯数据传递给需要它的函数。通过 newtype 派生，您还可以重用所有 MonadReader 代码来访问状态。

这种方法保留了 2\. 的语义纯度，但编写的代码更少，就像 monad 一样。

我认为这是执行只读配置状态的“真正”Haskell 方式。

--

当然，用于初始化全局状态的方法`unsafePerformIO`也可以工作，但最终会咬你一口（例如，当你让你的程序并发或并行时）。它们还有[有趣的初始化语义](http://www.haskell.org/haskellwiki/Top_level_mutable_state)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-23T17:50:13.653

您可以使用`Reader`monad 获得与到处传递参数相同的效果。与普通函数式代码相比，Applicative 样式可以使开销相当低，但仍然很尴尬。这是配置问题最常见的解决方案，但我觉得它不是非常令人满意；实际上，明确地传递参数通常不那么难看。

另一种选择是[反射](http://hackage.haskell.org/package/reflection)包，它允许您通过类型类上下文传递像这样的常见配置数据，这意味着您的任何代码都不必更改以检测附加值，只需更改类型即可。基本上，您为程序中的每个输入/结果类型添加一个新的类型参数，以便在某个配置的上下文中运行的所有内容都具有与该配置对应的类型。该类型可防止您意外使用多个配置混合值，并允许您在运行时访问相关配置。

这避免了以应用风格编写所有内容的开销，同时仍然是安全的，并允许您混合多种配置。它比听起来简单得多。这是[一个例子](http://hpaste.org/66715)。

（完全披露：我研究过反射包。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-03T06:30:56.737

我们新的[HFlags](http://hackage.haskell.org/package/hflags)库正是为此而生的。

如果您想查看与您的示例类似的示例用法，请查看以下内容：

[https://github.com/errge/hflags/blob/master/examples/ImportExample.hs](https://github.com/errge/hflags/blob/master/examples/ImportExample.hs)

[https://github.com/errge/hflags/blob/master/examples/X/B.hs](https://github.com/errge/hflags/blob/master/examples/X/B.hs)

[https://github.com/errge/hflags/blob/master/examples/X/Y_Y/A.hs](https://github.com/errge/hflags/blob/master/examples/X/Y_Y/A.hs)

模块之间不需要任何参数传递，您可以使用简单的语法定义新标志。它在内部使用 unsafePerformIO，但我们认为它以安全的方式执行此操作，您不必担心这一点。

有一篇关于这些东西的博客文章：http: [//blog.risko.hu/2012/04/ann-hflags-0.html](http://blog.risko.hu/2012/04/ann-hflags-0.html)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-05T01:03:45.543

另一种选择是[GHC 隐式参数](http://www.haskell.org/ghc/docs/latest/html/users_guide/other-type-extensions.html#implicit-parameters)。这些为您的选项 (2) 提供了一个不那么痛苦的版本：中间类型签名被感染，但您不必更改任何中间代码。

这是一个例子：

```
{-# LANGUAGE ImplicitParams #-}
import System.Environment (getArgs)    

-- Put the flags in a record so you can add new flags later
-- without affecting existing type signatures.
data Flags = Flags { flag :: Bool }

-- Leaf functions that read the flags need the implicit argument
-- constraint '(?flags::Flags)'.  This is reasonable.
leafFunction :: (?flags::Flags) => String
leafFunction = if flag ?flags then "do_stuff_A" else "do_stuff_B"

-- Implicit argument constraints are propagated to callers, so
-- intermediate functions also need the implicit argument
-- constraint.  This is annoying.
intermediateFunction :: (?flags::Flags) => String
intermediateFunction = "We are going to " ++ leafFunction

-- Implicit arguments can be bound at the top level, say after
-- parsing command line arguments or a configuration file.
main :: IO ()
main = do
  -- Read the flag value from the command line.
  commandLineFlag <- (read . head) `fmap` getArgs
  -- Bind the implicit argument.
  let ?flags = Flags { flag = commandLineFlag }
  -- Subsequent code has access to the bound implicit.
  print intermediateFunction 
```

如果你用参数运行这个程序，`True`它会打印`We are going to do_stuff_A`; 带有参数`False`它会打印`We are going to do_stuff_B`.

我认为这种方法类似于[另一个答案中提到的反射包](https://stackoverflow.com/a/10285603/470844)，并且我认为[接受的答案中提到的 HFlags](https://stackoverflow.com/a/10426255/470844)可能是一个更好的选择，但为了完整起见，我添加了这个答案。

# c - 在c中从文件写入和读取到结构或相反

> ID：10285456
> 
> 赞同：1
> 
> 时间：2012-04-23T17:40:28.020
> 
> 标签：c, file-io, linked-list

好吧...我是c新手。我有个问题。我有2个结构。1 是节点列表，它是链表，1 是链接到节点的结构数组。这就是我声明它的方式。

```
 typedef struct mhs mhs;
    typedef struct kelas kelas;

struct mhs
{
    char nama[31];
    char nim[16];
    int angkatan;
    float ipk;
};

struct kelas
{
    char kls[13];
    int jml;
    mhs siswa[40];
    kelas *next;
}; 
```

kelas=node 和 mhs=array of struct 我想创建一个基于节点的文件。因此，如果我有 3 个节点，那么我将编写 3 个不同的文件，其中包含 mhs，我还想让 node->kls 作为名称文件。那可能吗？如果是，我该怎么做？感谢您的提前。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T20:41:05.707

就像是

```
#include <stdio.h>

int printNodesToFile(kelas* node) {
    char filename[100] = {0};

    int idx;
    for(idx = 1; node = node->next, idx++; node != NULL) {
        snprintf(filename, sizeof(filename), "kelas.%d.txt", idx);
        FILE* outFile = fopen(filename, "w");
        if(outFile == NULL) return 1;
        //do stuff
        fclose(outFile);
    }
    return 0;
} 
```

# jquery - 将新图像添加到 Fotorama 幻灯片

> ID：10285457
> 
> 赞同：1
> 
> 时间：2012-04-23T17:40:29.387
> 
> 标签：jquery, ajax, jquery-plugins, slider, fotorama

我正在寻找一个很好的带有缩略图预览的 jQuery 图像滑块，用于我正在开发的 Web 应用程序。我遇到了 Fotorama.js，它似乎具有我想要的大部分功能，但是在初始化滑块后，我在文档中没有看到有关通过 AJAX 添加更多图像的任何内容。有没有人有使用 Fotorama 的经验？这支持吗？如果没有，你能推荐另一个轻量级的带有缩略图并且可以使用 AJAX 的 jQuery 滑块吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T10:53:55.953

我正在使用 Photorama 并通过 HTML 手动添加图像。易于安装，许多其他人由于某种原因无法正常工作。弄清楚如何添加字幕......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-21T15:41:04.810

假设您要添加更多图像到

```
<div id="my-fotorama">....</div> 
```

通过 AJAX

您可以通过以下方式为此 div 初始化 Photorama

`<script> $(function() { $('#my-fotorama').fotorama(); }); </script>`

# php - Facebook Graph API 获取相册封面

> ID：10285462
> 
> 赞同：1
> 
> 时间：2012-04-23T17:40:45.620
> 
> 标签：php, facebook, facebook-graph-api

我正在尝试使用以下方法获取专辑封面照片：

```
$facebook->api("/{ALBUM_ID}/picture", "get"); 
```

但是，如果我使用上面的代码，我将一无所获，如果我尝试将它与 Facebook 上的 Open Graph API 资源管理器一起使用，它就会与加载图形一起坐在那里。

如果我从浏览器访问它，我会得到一个返回图像。

上面的调用不返回图像 URL 吗？如果没有，它会返回什么以及如何使用它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T17:49:49.597

API 中没有`/{album_id}/picture`为专辑列出字段，但它的工作方式似乎与对用户、页面等的工作方式相同。

请注意，API 中`/{object ID}/picture`记录和支持的大多数地方，它都会返回一个 HTTP 301 重定向到照片，适合直接嵌入到`<img src=''/>`标签中，因此它在大多数代码或 Graph API Explorer 中不起作用。

对于相册，这确实有效，但可能不是您想要的，因为您需要将访问令牌嵌入`img`标签中使用的 URL 中

对于这种情况（和其他类似情况），您可以请求`/{album_id}?fields=picture`并取回封面照片的 URL，而不是重定向到它

# python - 服务器可以发现我正在使用 python 脚本访问它吗？如果是这样，如何隐藏它？

> ID：10285465
> 
> 赞同：0
> 
> 时间：2012-04-23T17:41:02.770
> 
> 标签：python, urllib2

我正在尝试使用 urllib2 库阅读网站。这是我的脚本：

```
import urllib2

# Get a file-like object for the Python Web site's home page.

def wikitranslate(word):
    translation = ''
    pageURL = ''
    opener = urllib2.build_opener()
    f = opener.open("http://fr.wikipedia.org/w/api.php?action=opensearch&search=" + re.sub(' ', '%20', word.rstrip()))
    # Read from the object, storing the page's contents in 's'.
    s = f.read() 
```

我想知道服务器如何接收这些请求，以及它是否可以识别出它是由 python 脚本而不是通过浏览器访问的事实。

如果是这样，有没有办法隐藏它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:44:36.003

url 请求标头中的 User-Agent 字段向 Web 服务器描述了您用于访问该站点的浏览器和系统，因此隐藏或将自己标识为 python 脚本请求的最佳方法是更改​​该字段。

```
request = urllib2.Request(url,None)
request.add_header('User-Agent','Python Script') # Or 'Not a python script' 
```

默认情况下，此字段在使用时留空`urllib2`

所以如果你想隐瞒你的经纪人干脆不要申报，或者你可以强行声明它是骗人的

```
request.add_header('User-Agent','None of your business.') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:45:18.217

当然它是可以检测到的，但通常不是直接检测到的。例如，它可以查看用户代理的行为（例如，每小时访问同一个文件）或尝试加载 iframe+img+javascript 以检查您是否真的是网络浏览器。它可能会显示一个验证码，您必须在继续之前完成该验证码，并且有许多不同的技术可以防止外部脚本访问。

但是，如果您查看一个请求，则很难检测到它是发出请求的脚本。事实上，完全模仿浏览器是可能的。只是不是它背后的用户。

然而，更大的问题是你正在尝试做的事情是否正确。有些网站不希望脚本访问它们是有原因的。

# html - 将子元素绑定到父元素

> ID：10285466
> 
> 赞同：1
> 
> 时间：2012-04-23T17:41:02.757
> 
> 标签：html, css, printing

我正在为 HTML5 画布对象编写一个简单的导出函数。我创建了包含实际绘图的 id='infovis-canvaswidget'。子元素是该图形的所有标签。我可以使用以下方法获取 canvas 元素：

```
var ele  = document.getElementById("infovis-canvas");
var dataUrl = ele.toDataURL("image/png");
window.open(dataUrl, "toDataURL() image", "width=500, height=500"); 
```

但是，这不会输出标签元素。请查看随附的屏幕截图以了解 DOM 组织。有什么方法可以将子元素绑定到“infovis-canvaswidget”，这样它们也会被导出？![截屏](../Images/fec27dc78474e59fa794cff31446e880.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T18:24:08.583

我很抱歉这么说，因为看起来您已经为此付出了相当多的努力，但是您根本无法获取纯 DOM 元素的图像数据，无论如何也不能直接获取。

但这并不意味着你没有选择。据我所知，您有两种选择，尽管两者都涉及将标签放到画布上，因此它们实际上只是具有相同目标的两种方法。

您的第一个选择是更改项目的功能——可能从根本上改变这可能会很痛苦——这样你的标签就会直接呈现在画布上。这样，当您从画布中获取图像数据时，您的标签就已经存在了。

您的第二个选择是以某种方式将您的 DOM 元素转换为对象以在您想要获取图像数据时在画布上绘制。[html2canvas 项目](http://html2canvas.hertzen.com/)是您可能想要查看的东西，因为它实现了这种技术并且可以帮助您。

祝你好运！

# wcf - 公开为 REST 和 SOAP 服务的 WCF 服务的异常处理

> ID：10285468
> 
> 赞同：0
> 
> 时间：2012-04-23T17:41:23.380
> 
> 标签：wcf, rest, soap

有没有一种从作为 RESTful 服务和 SOAP 服务公开的 WCF 服务抛出异常的好方法？从我目前收集到的信息来看，SOAP 服务应该抛出 FaultExceptions，而 RESTful 服务应该抛出 WebProtocolException，以便在客户端轻松获取错误详细信息。就我而言，相同的服务通过 2 个端点公开 - RESTful 和 SOAP。我应该使用什么样的异常处理机制，以便可以轻松地将错误详细信息传递给 RESTful 客户端和 SOAP 客户端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T08:55:29.407

SOAP 和 REST 是公开服务功能的两种不同机制，并且在 SOAP 和 REST 中公开异常的方式也不同，因为您已正确详细说明。

REST 或 REST over HTTP 是一种架构模式，它包含 HTTP 作为协议。您的应用程序中的异常应该被翻译成 HTTP 错误代码，例如 40x、50x 等。例如

*   400 请求问题
*   401 未经授权的访问
*   500 表示在执行您的请求期间发生的错误。

错误的详细信息可以与响应正文中的错误代码一起返回。

使用 RESTful 端点的客户端应该预期 HTTP 错误代码并应该处理它们。

# c++ - std::cout 是否完全在堆栈上运行？

> ID：10285471
> 
> 赞同：7
> 
> 时间：2012-04-23T17:41:31.567
> 
> 标签：c++, heap-memory, cout, stack-memory

在 C++ 中，当我这样使用时`std::cout`：

```
std::cout << "myString" << std::endl; 
```

std::cout会在**堆上分配什么吗？**或者 std::cout 会做**堆栈**上的所有事情（意味着 std::cout 及其底层函数不会做任何事情`new/malloc/etc...`）？

我想知道大量使用 std::cout 是否会导致一些堆碎片

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T17:44:58.917

在这个特定示例中，您的代码不会导致堆上的任何直接分配。但是，任何方法的实现都可以使用堆来完成部分工作。只要方法实现在其自身之后正确清理，这完全没问题。

此逻辑适用于诸如`operator<<(std::ostream&, T)`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T17:52:15.327

这完全取决于基本 C++ 库的某种实现

# regex - 使用正则表达式解析嵌套匹配

> ID：10285473
> 
> 赞同：0
> 
> 时间：2012-04-23T17:41:33.940
> 
> 标签：regex, recursion, lexer

我想使用[正则表达式](http://regexpal.com/)在字符串内部查找适合起始和结束分隔符的最小序列（考虑转义字符）。例如，如果我有以下字符串，我希望找到最低匹配项`[ two ]`，`[ four \[ five \] ]`同时忽略它们包含在`[ one ... three ... six]`.

```
zero [ one [ two ] three [ four \[ five \] ] six ] seven 
```

到目前为止，我有以下正则表达式，它使用否定的后视来检查并且没有完全缓存`]`第二场比赛中的最后一个。

```
(\[)(?:(?!(?:[^\\])\1|\]).)*] 
```

我的目标是拥有一个简单的解析器，可以用来处理简单的嵌套命令块。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:01:24.117

以下作品：

```
\[(?:\\[\[\]]|[^\[\]])*] 
```

看到它工作：[http ://www.rubular.com/r/cAajtm2wxw](http://www.rubular.com/r/cAajtm2wxw)

解释：

```
\[                # opening bracket
(?:               # start of non-capturing group (repeat zero or more times)
   \\[\[\]]         # backslash followed by [ or ]
   |                # OR
   [^\[\]]          # any character except [ or ]
)*                # end of non-capturing group
]                 # closing bracket 
```

请注意，这不是很安全，因为在像`[ one \\[ two ] three ]`反斜杠这样的字符串中被转义了，所以在 之前的反斜杠`[`不应该转义它。

要解决此问题，您可以使用以下内容：

```
\[(?:(?<!\\)(?:\\\\)*\\[\[\]]|[^\[\]])*] 
```

这会将原始正则表达式中的单个转义反斜杠更改`\\`为以下正则表达式，该正则表达式检查奇数个反斜杠：

```
(?<!\\)           # fail if previous character is a backslash
(?:\\\\)*         # some even number of backslashes
\\                # one more backslash to make it odd 
```

[http://www.rubular.com/r/BhQzLQpyB9](http://www.rubular.com/r/BhQzLQpyB9)

# blackberry - 黑莓 - 使用 EDGE 网络的 HttpConnection

> ID：10285477
> 
> 赞同：-1
> 
> 时间：2012-04-23T17:41:47.700
> 
> 标签：blackberry, httpconnection, cellular-network

我想为黑莓应用程序做一个 httpconnection。我使用像这样的网址

`http://ip:port/prueba.php;deviceside=true`

如果我想通过wifi在设备中使用它，我添加interface=wifi。

但我不知道为什么它不通过 EDGE 连接。我还能做些什么吗？我听说你已经签署了你的申请，但我不明白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T05:59:09.873

使用：";deviceside=true;ConnectionUID="+ srTCP.getUid()

```
 private ServiceRecord srTCP;
 private void init() 
    {

        ServiceBook sb = ServiceBook.getSB();
        ServiceRecord[] records = sb.getRecords();

        for (int i = 0; i < records.length; i++)
        {
            ServiceRecord myRecord = records[i];
            String cid, uid;

            if (myRecord.isValid() && !myRecord.isDisabled()) 
            {
                cid = myRecord.getCid().toLowerCase();
                uid = myRecord.getUid().toLowerCase();
                if (cid.indexOf(WPTCP_STR) != -1 && uid.indexOf(WIFI_STR) == -1 && uid.indexOf(MMS_STR) == -1) 
                {
                    String httpProxyAddress = getDataString(myRecord, BYTE_PROXY_ADDRESS);
                    if ((httpProxyAddress == null) || StringUtils.isBlank(httpProxyAddress.trim())) 
                    {
                        srTCP = myRecord;
                    } 
                }
            }
      }
  } 
```

# ruby-on-rails - 使用 Rails 和 Devise 实现可验证的令牌

> ID：10285484
> 
> 赞同：3
> 
> 时间：2012-04-23T17:42:46.497
> 
> 标签：ruby-on-rails, authentication, devise, token

我将构建一个使用 AJAX 将资源作为 json 加载而不重新加载页面的应用程序，它需要身份验证。

我已经在使用 Devise 处理注册，但是对于每个 ajax 调用，服务器必须确保用户经过身份验证，因此我将使用 Devise 提供的可验证令牌。

现在，在我读过的教程中，作者建议创建一个“令牌”控制器，在用户提供电子邮件和密码后，令牌被创建或销毁，但由于不会有 apis，当用户登录正常方式？（并在用户注销时销毁它？）

你怎么看？有什么建议/例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T08:13:02.503

这是一个示例[http://matteomelani.wordpress.com/2011/10/17/authentication-for-mobile-devices/](http://matteomelani.wordpress.com/2011/10/17/authentication-for-mobile-devices/)

# vb.net - DataGridView多行选择，具体列数据获取

> ID：10285488
> 
> 赞同：1
> 
> 时间：2012-04-23T17:42:58.723
> 
> 标签：vb.net, datagridview

所以我有一个 datagridview 正在填充来自数据库的数据。此时，用户可能会或可能不会选择（通过鼠标单击/按键）datagridview 中的一个或多个行。

我需要（在选择时）创建一个新的数据集、数据表并使用来自所述 datagridview 的一些数据添加行。

例如，如果一个表只有名称，例如

```
Joe
Sean
Larry
Chris 
```

在用户单击时，将选择拖到 Sean 和 Larry 上以将这些名称添加到新数据集，以便我可以将其传递给另一个方法以进行进一步处理。

这就是我所在的地方。

```
 'Get index of current row
    Dim currentMouseRow As New Integer
    currentMouseRow = dataGridView_UnAssodevices.HitTest(e.X, e.Y).RowIndex

    'grab cell data of selected rows
    Dim ds As New DataSet
    Dim dt As New DataTable
    For Each row As DataGridViewRow In dataGridView_UnAssodevices.SelectedRows
        Dim dr As New DataGridViewRow
        Dim data As New DataGridViewTextBoxCell
        data.Value = row.Cells(0).Value
        dr.Cells.Add(data)
        dt.Rows.Add(dr)
        MessageBox.Show(data.ToString)
    Next

    'Add contextmenu if right clicked
    If e.Button = MouseButtons.Right Then
        Dim m As New ContextMenu()
        If currentMouseRow >= 0 Then
            dataGridView_UnAssodevices.Rows(currentMouseRow).Selected = True
            m.MenuItems.Add(New MenuItem("View Full Device Info"))
            m.MenuItems.Add(New MenuItem("Associate Device(s)"))
        End If
        m.Show(dataGridView_UnAssodevices, New Point(e.X, e.Y))
    End If 
```

但是我不断收到此错误：

```
 Input array is longer than the number of columns in this table. 
```

看起来我要么缺少列声明，要么将表添加到集合中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:03:32.610

似乎您还没有为您的数据表创建数据列。我们试试看

```
'Get index of current row
Dim currentMouseRow As New Integer
currentMouseRow = dataGridView_UnAssodevices.HitTest(e.X, e.Y).RowIndex

'grab cell data of selected rows
Dim ds As New DataSet
Dim dt As New DataTable

'Create a Data Column for your DataTable; Or you can write a loop to create the datacolumn based on the cell in your DataGridViewRow
dt.Columns.add("Col1")

For Each row As DataGridViewRow In dataGridView_UnAssodevices.SelectedRows
    Dim dr As New DataGridViewRow
    Dim data As New DataGridViewTextBoxCell
    data.Value = row.Cells(0).Value
    dr.Cells.Add(data)
    dt.Rows.Add(dr)
    MessageBox.Show(data.ToString)
Next 
```

# iphone - 在 Xcode 4.3 中安装核心图后，iPhone 出现重复符号链接器错误

> ID：10285489
> 
> 赞同：1
> 
> 时间：2012-04-23T17:43:02.257
> 
> 标签：iphone, objective-c, xcode4, core-plot

我已添加`libCorePlot-CocoaTouch.a`到项目的框架中，并将标头搜索路径设置为与项目相关的指向 /framework 文件夹的点并且是递归的。

没有可见的错误。当我尝试构建时，我收到链接器错误：

ld：在 /Users/alexanderstone/Library/Developer/Xcode/DerivedData/PDFGenerationDemo-coyoeupshiotxfbalkrkcmhbkbb/Build/Products/Debug-iphoneos/libCorePlot-CocoaTouch.a(CPTPlot.o) 和 /Users/alexanderstone/Library 中重复符号 _OBJC_CLASS_$_CPTPlot /Developer/Xcode/DerivedData/PDFGenerationDemo-coyoeupshiotxfbalkrkcmhbkbb/Build/Products/Debug-iphoneos/libCorePlot-CocoaTouch.a(CPTPlot.o) 架构 armv7 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用)

**我究竟做错了什么？如何修复 coreplot 安装的重复符号错误？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:47:09.670

总体而言，核心情节让我非常大声地发誓。当我尝试在新项目中安装它时，或者当我尝试在项目中使用它时。

上述错误已通过重命名包含项目的静态库来解决

```
libCorePlot-CocoaTouch.a 
```

至

```
libCorePlotCocoaTouch.a 
```

是的，我花了将近 3 个小时来解决这个问题。

# c# - 如何重构嵌套使用中涉及的代码？

> ID：10285490
> 
> 赞同：9
> 
> 时间：2012-04-23T17:43:04.207
> 
> 标签：c#, refactoring, using-statement, code-duplication

我有一些重复很多的代码。问题来自我正在处理嵌套`IDisposable`类型的事实。今天我有一些看起来像：

```
public void UpdateFromXml(Guid innerId, XDocument someXml)
{
    using (var a = SomeFactory.GetA(_uri))
    using (var b = a.GetB(_id))
    using (var c = b.GetC(innerId))
    {
        var cWrapper = new SomeWrapper(c);
        cWrapper.Update(someXml);
    }
}

public bool GetSomeValueById(Guid innerId)
{
    using (var a = SomeFactory.GetA(_uri))
    using (var b = a.GetB(_id))
    using (var c = b.GetC(innerId))
    {
        return c.GetSomeValue();
    }
} 
```

对于这些方法中的每一个，整个嵌套`using`块都是相同的（显示了两个，但大约有十个）。唯一不同的是当你到达`using`块的内部时会发生什么。

我想的一种方法是按照以下方式做一些事情：

```
public void UpdateFromXml(Guid innerId, XDocument someXml)
{
    ActOnC(innerId, c =>
    { 
        var cWrapper = new SomeWrapper(c);
        cWrapper.Update(someXml);
    });
}

public bool GetSomeValueById(Guid innerId)
{
    var result = null;

    ActOnC(innerId, c => { result = c.GetSomeValue(); });

    return result;
}

private void ActOnC(Guid innerId, Action<TheCType> action)
{
    using (var a = SomeFactory.GetA(_uri))
    using (var b = a.GetB(_id))
    using (var c = b.GetC(innerId))
    {
        action(c);
    }        
} 
```

这行得通，只是解析（作为人类）有点笨拙。 *有没有人对如何减少`using`像这样的嵌套块周围的代码重复有任何其他建议？* 如果他们不是，`IDisposable`那么人们可能只是创建一种方法来返回`b.GetC(innerId)`...的结果，但这里不是这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:16:44.310

I like the answer provided by [BFree](https://stackoverflow.com/a/10285644/1159478) as a start, but I'd make a few modifications.

```
//Give it a better name; this isn't designed to be a general purpose class
public class MyCompositeDisposable : IDisposable 
{
    public MyCompositeDisposable (string uri, int id, int innerid)
    {
        A = SomeFactory.GetA(uri);
        B = A.GetB(id);
        C = B.GetC(innerId);
    }

    //You can make A & B private if appropriate; 
    //not sure if all three or just C should be exposed publicly.
    //Class names are made up; you'll need to fix.  
    //They should also probably be given more meaningful names.
    public ClassA A{get;private set;}
    public ClassB B{get;private set;}
    public ClassC C{get;private set;}

    public void Dispose()
    {
        A.Dispose();
        B.Dispose();
        C.Dispose();
    }
} 
```

After doing that you can do something like:

```
public bool GetSomeValueById(Guid innerId)
{
    using(MyCompositeDisposable d = new MyCompositeDisposable(_uri, _id, innerId))
    {
        return d.C.GetSomeValue();
    }
} 
```

Note that the MyCompositeDisposable will likely need to have try/finally blocks in the constructor and Dispose methods so that errors in creation/destruction properly ensure nothing ends up un-disposed.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T18:19:06.997

您总是可以创建一个更大的上下文来管理应该创建/处置哪些对象。然后编写一个方法来创建更大的上下文......

```
public class DisposeChain<T> : IDisposable where T : IDisposable
{
    public T Item { get; private set; }
    private IDisposable _innerChain;

    public DisposeChain(T theItem)
    {
        this.Item = theItem;
        _innerChain = null;
    }

    public DisposeChain(T theItem, IDisposable inner)
    {
        this.Item = theItem;
        _innerChain = inner;
    }

    public DisposeChain<U> Next<U>(Func<T, U> getNext) where U : IDisposable
    {
        try
        {
            U nextItem = getNext(this.Item);
            DisposeChain<U> result = new DisposeChain<U>(nextItem, this);
            return result;
        }
        catch  //an exception occurred - abort construction and dispose everything!
        {
            this.Dispose()
            throw;
        }
    }

    public void Dispose()
    {
        Item.Dispose();
        if (_innerChain != null)
        {
            _innerChain.Dispose();
        }
    }
} 
```

然后使用它：

```
 public DisposeChain<DataContext> GetCDisposeChain()
    {
        var a = new DisposeChain<XmlWriter>(XmlWriter.Create((Stream)null));
        var b = a.Next(aItem => new SqlConnection());
        var c = b.Next(bItem => new DataContext(""));

        return c;
    }

    public void Test()
    {
        using (var cDisposer = GetCDisposeChain())
        {
            var c = cDisposer.Item;
            //do stuff with c;
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T17:52:26.820

在 Rx 框架中有一个名为`CompositeDisposable` [http://msdn.microsoft.com/en-us/library/system.reactive.disposables.compositedisposable%28v=vs.103%29.aspx的类](http://msdn.microsoft.com/en-us/library/system.reactive.disposables.compositedisposable%28v=vs.103%29.aspx)

自己推出应该不会太难（尽管是非常精简的版本）：

```
public class CompositeDisposable : IDisposable
{
    private IDisposable[] _disposables;

    public CompositeDisposable(params IDisposable[] disposables)
    {
        _disposables = disposables;
    }

    public void Dispose()
    {
        if(_disposables == null)
        {
            return;
        }

        foreach(var disposable in _disposables)
        {
            disposable.Dispose();
        }
    }
} 
```

然后这看起来更干净一点：

```
public void UpdateFromXml(Guid innerId, XDocument someXml)
{
    var a = SomeFactory.GetA(_uri);
    var b = a.GetB(_id);
    var c = b.GetC(innerId);
    using(new CompositeDisposable(a,b,c))
    {
        var cWrapper = new SomeWrapper(c);
        cWrapper.Update(someXml);
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T17:45:47.913

如果您的`Dispoable`类型正确处理所有一次性成员，则只需要一个 using 语句。

例如，这个：

```
public bool GetSomeValueById(Guid innerId)
{
    using (var a = SomeFactory.GetA(_uri))
    using (var b = a.GetB(_id))
    using (var c = b.GetC(innerId))
    {
        return c.GetSomeValue();
    }
} 
```

如果 a 有类型的 b 和 c 的成员，并且 a 在其 dispose 方法中处理了 b 和 c，则可能变成这样：

```
public bool GetSomeValueById(Guid innerId)
{
    using (var a = SomeFactory.GetA(_uri))
    {
        return a.GetSomeValue();
    }
}

class A : IDisposable
{
  private a;
  private b;

  public A (B b, C c)
  {
     this.b = b; this.c = c;
  }

  public void Dispose()
  {
     Dispose(true);
  }

  protected void Dispose(bool disposing)
  {
     if (disposing)
     {
        b.Dispose();
        c.Dispose();
     }
  }
} 
```

但是，您必须修改您的工厂以将 b 和 c 注入 a。

# php - 在格式为 json 的字段中选择多个 id

> ID：10285493
> 
> 赞同：0
> 
> 时间：2012-04-23T17:43:12.317
> 
> 标签：php, mysql, sql, json, select

如何对格式为 JSON 的多个 ID 进行选择？

```
$query = 'SELECT * FROM articles as a WHERE "10" IN (a.catids)';

The value of a.catids in the db-field is {"0":"10","1":"12"}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:49:04.700

就像是：

```
$query = 'SELECT * FROM articles as a WHERE a.catids like '%:"10",%'; 
```

我包括了 : 和 ，所以你确定你选择的是值而不是索引

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:49:04.163

没有“正确”的方式来做到这一点。MySQL 不知道 JSON 是什么，即使您对 ID 进行文本搜索，您也会注意到它非常慢。

我建议规范化表格。更新您的脚本以简单地将其`catids`放在单独的表中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T17:49:41.827

我猜你正在寻找 LIKE。

```
SELECT * FROM articles as a WHERE a.catids LIKE '%10%' 
```

您还想查找 LIKE 的语法（因为您可以搜索 `%"_":"10"%' 并且只搜索第二部分甚至更复杂的内容。

不过，最好不要以这种方式存储您的 ID。

# c - GCC/MINGW C：在 main() 的入口处重新初始化全局变量

> ID：10285497
> 
> 赞同：2
> 
> 时间：2012-04-23T17:43:45.390
> 
> 标签：c, gcc, mingw, mingw32

我正在为使用全局变量的 C 代码创建一个测试环境。我使用该术语来指代在 C 外部函数中声明的任何变量（带有或不带有`static`限定符），以及带有`static`限定符的局部变量。一些全局变量未显式初始化（​​因此初始化为 0），其他全局变量初始化为常量值。

我想要一种将这些全局变量从我的代码重新初始化到它们进入时的状态的方法`main()`，以从测试代码的角度模拟重新运行。

到目前为止，我所做的实际上是终止正在测试的代码，并使用驱动程序调用立即重新运行它`system()`。这很笨拙而且有点慢（我猜是因为检测的可执行文件必须将上下文保存到磁盘/从磁盘恢复）。我正在寻找更好的方法。如果有一些运行时函数可以被调用并完成工作，我想知道！

我的环境是MinGW32，我想在Linux32/Linux64下保持与gcc的兼容。

检测代码作为源代码可供我使用（我不想修改甚至检查），并且仅限于 and 的标准 C99 库函数，`<string.h>`以及`<stdlib.h>`可用于托管实现的那些（`<float.h>`、`<iso646.h>`、`<limits.h>`、`<stdarg.h>`、`<stdbool.h>`、`<stddef.h>`和`<stdint.h>`）。

我自己的代码不使用全局变量。如果我的堆/分配变量在重新初始化后仍然存在（我可以将所需的所有内容保存在本地/堆栈/自动变量中），那会很好，但不是绝对必要的。我希望检测代码能够跟踪其所有堆变量（如果未能释放的堆变量导致堆耗尽，它甚至可以被视为一个特性）。

我隐约想到的一件事是在带有测试代码的 C 源文件的开头和结尾添加虚拟变量声明（很容易从包装器编译它），并祈祷该测试代码的所有全局变量都在内存中的连续块；这样我可以从虚拟变量的位置定位块，并随意恢复它。那能可靠地工作吗？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:08:44.637

您总是可以`fork`在您的开头使用生成一些进程`main`，这样每个进程都将拥有自己的全局变量副本。

除此之外，我认为没有一种解决方案可以确保从单个进程中重置所有全局变量。

# android - 我们可以在android中降低相机闪光灯的亮度吗？

> ID：10285498
> 
> 赞同：3
> 
> 时间：2012-04-23T17:43:59.400
> 
> 标签：android, camera, android-camera, flashlight

我想在我的 android 应用程序中更改相机闪光灯的亮度...可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-09T13:46:42.477

在某些设备上，是的。我看到一个应用程序可以设置LED闪光灯的低电平和高电平，但不知道它是如何工作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-09-19T12:37:59.083

Android 系统不为您提供此行为。

我相信此时您可以设法更改闪光级别亮度的唯一方法是使用制造商的自定义 SDK。某些制造商开放了执行 Google Android 系统未开箱即用的其他功能的能力。这是您通常会听到有人提到“它适用于某些设备”的时候。

例如，您可以在构建中包含三星移动 SDK，并在检测到三星设备时使用它们的功能。通过这种方式，您可以利用他们在三星设备上运行您的应用程序时启用的某些功能。他们的相机 API 功能可以在这里参考：[https ://developer.samsung.com/galaxy/camera](https://developer.samsung.com/galaxy/camera)

乍一看，我没有看到他们为改变三星设备的闪光灯亮度而引入的任何 API，这是不幸的，但其他制造商可能会以类似的方式为您提供这样做的方法。

我当时会想，Android 会有这种能力，但我不确定他们为什么现在没有将它添加到操作系统中，以便我们更好地控制闪存。

# android - Android：如何在单击时更改选项菜单的颜色

> ID：10285499
> 
> 赞同：0
> 
> 时间：2012-04-23T17:44:02.117
> 
> 标签：android

By default Android shows Orange color on Options Menu when an item is selected.

![在此处输入图像描述](../Images/b0a64543145d5f9096e472e16d0b0195.png)

如何在单击时将自己的颜色设置为 OptionsMenu？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:45:53.643

可以自定义 android 中的选项菜单以设置背景或更改文本外观。无法使用主题和样式更改菜单中的背景和文本颜色。android 源代码 (data\res\layout\icon_menu_item_layout.xml) 使用“com.android.internal.view.menu.IconMenuItem”类的自定义项来进行菜单布局。我们可以在上面的类中进行修改来自定义菜单。为了达到同样的效果，使用 LayoutInflater 工厂类并设置视图的背景和文本颜色。

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.my_menu, menu);
    getLayoutInflater().setFactory(new Factory() {
        @Override
        public View onCreateView(String name, Context context, AttributeSet attrs) {
            if (name .equalsIgnoreCase(“com.android.internal.view.menu.IconMenuItemView”)) {
                try{
                    LayoutInflater f = getLayoutInflater();
                    final View view = f.createView(name, null, attrs);
                    new Handler().post(new Runnable() {
                        public void run() {
                            // set the background drawable
                            view.setBackgroundColor(any color);

                        }
                    });
                    return view;
                } catch (InflateException e) {
                    } catch (ClassNotFoundException e) {}
            }
            return null;
        }
    });
    return super.onCreateOptionsMenu(menu);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T18:01:41.067

`selector.xml`在您的文件夹中创建一个名为 xml 的文件，`drawable`然后用它填充它..

`Button`基本上，您是在告诉 Android，当用户单击 a或将其聚焦等事件发生时，您想要做某事......

```
<?xml version="1.0" encoding="utf-8"?>
 <selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_focused="true" android:drawable="@color/blue" /> <!-- focused -->
    <item android:state_focused="true" android:state_pressed="true" android:drawable="@color/blue" /> <!-- focused and pressed-->
    <item android:state_pressed="true" android:drawable="@color/green" /> <!-- pressed -->
    <item android:drawable="@color/white" /> <!-- default -->
 </selector> 
```

然后将您在菜单中使用的项目的图标设置为此，例如

`android:icon = "@drawable/selector"`,

有关使用 StateListDrawable 的更多信息，请参阅[此](http://www.technotalkative.com/android-%E2%80%93-listview-%E2%80%93-2-custom-listview/)。

# android - 使用新的 .xml 文件通过套接字对象通过 tether 刷新 android/res/value/ .xml

> ID：10285504
> 
> 赞同：0
> 
> 时间：2012-04-23T17:44:12.487
> 
> 标签：android, sockets, resources, usb, android-gridview

两部分问题：

(1) 我有一些表示gridview 状态的数组（textArray、colorArray 等），我希望通过套接字连接连接到服务器、下载并用新的gridViewArrays.xml 替换旧的gridViewArrays.xml 来刷新它们通过某些函数调用位于 android/res/value/ 中。到目前为止，我只发现资源不能即时更新，但由于 xml 没有编译，只是在 apk 中解析和推送，我不明白为什么这是不可能的。我正处于这项工作的早期阶段，但我想确保在我走这条路之前这是可能的。

(2) 我还想要关于如何使用套接字类通过 USB 系绳（不能是无线的）通过 TCP 发送和接收信息到另一台服务器上的 C++ 应用程序的建议。对此有什么好的吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:47:46.293

文件夹下保存的资源`res/`是只读的，您不能更改它们。相反，您应该将更改后的 xml 文件保存到应用程序本地存储中。

关于第二个问题。有很多关于如何使用套接字的好教程，你只需要在谷歌上搜索它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T18:00:50.607

> 但是由于xml没有编译，只在apk中解析推上去

它们是经过编译的。XML 资源被优化为二进制形式。您可以解压缩一个 .apk（重命名为 .zip）并亲自查看。

@ (1)：在例如您的应用程序目录 ( `getFilesDir()`) 中创建一个文件并将更新的数据保存在其中。现在不是简单地从资源中加载值，而是检查该文件是否存在并从那里加载数据。

@ (2)：USB tethering 应由系统映射到正常的网络连接。任何 java 套接字教程都应该可以工作。

# java - 如何在 Spring 3 中通过 .getJSON 将对象从 View 传递到控制器

> ID：10285507
> 
> 赞同：0
> 
> 时间：2012-04-23T17:44:17.127
> 
> 标签：java, jquery, spring-mvc, getjson

我有这个豆子：

```
public class RespuestaForm {
    private List<RespuestaUsuario> respuesta;
    private List<Pregunta> pregunta;
    private Long pinId;

    public RespuestaForm() {
    }

    public RespuestaForm(List<Pregunta> pregunta, Long pinId) {
        this.pregunta = pregunta;
        this.pinId = pinId;
    }

    public List<RespuestaUsuario> getRespuesta() {
        return respuesta;
    }

    public void setRespuesta(List<RespuestaUsuario> respuesta) {
        this.respuesta = respuesta;
    }

    public List<Pregunta> getPregunta() {
        return pregunta;
    }

    public void setPregunta(List<Pregunta> pregunta) {
        this.pregunta = pregunta;
    }
    public Long getPinId() {
        return pinId;
    }

    public void setPinId(Long pinId) {
        this.pinId = pinId;
    }

} 
```

我想将 RespuestaForm 类型的对象从我的视图传递给控制器​​，所以这就是我在 jsp 中所做的：

```
function verificarRespuestasAjax(pregunta, pinId, respuesta, index, array){
    var respuestas ={ "pinId":pinId, 
                      "respuesta": [
                            {"pinId": pinId, "respuesta": "prueba", "preguntaId": pregunta},
                            {"pinId": 3, "respuesta": "Hola", "preguntaId": pregunta}                         
                    ]};

    $.getJSON("../usuarios/comparar_respuestas_JSON", {respuestas: respuestas}, function(verifRespuestas){
        if(verifRespuestas){
            ## etc...
    });
} 
```

这是控制器中的方法：

```
@RequestMapping(value="/usuarios/comparar_respuestas_JSON")
public @ResponseBody boolean compararRespuestas(@RequestBody RespuestaForm respuestas){
    try{
        //here I should get the object RespuestaForm
    }catch(Exception e){
        e.printStackTrace();
    }
    return false;
} 
```

但我无法获得对象 RespuestaForm。

我究竟做错了什么？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T18:08:00.927

如果你想使用@RequestBody，那么我认为json应该作为POST而不是GET发送。

这将触发 Spring 的 MappingJacksonHttpMessageConverter（假设您的类路径中有 Jackson）。我不记得您是否需要在 ObjectMapper 中设置 RespuestaForm 类。首先，您可以尝试不使用它，看看它是否有效。它不是，那么您可以尝试在其设置器上使用 @JsonProperty 注释您的 RespuestaForm 对象，以便映射器知道 Json 对象的哪个字段转到您的类上的哪个设置器方法。

# windows - 在 linux 上运行 windows nt 的 cmd 或 bat 文件

> ID：10285508
> 
> 赞同：4
> 
> 时间：2012-04-23T17:44:23.363
> 
> 标签：windows, bash, shell, cmd

如果我想在 Windows 上运行 bash 脚本，我可以安装 cygwin。但是，我想在 Linux 上运行 .bat 文件。linux下有这样的shell（cmd.exe的端口:)）吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T19:41:51.697

你不想在 linux 上运行 .bat 文件，如果你真的想这样做，你可以在 linux 上使用 WINE。CMD 语言没有很多编程结构，很少用于做任何复杂的事情，它们是非常特定于 windows 的，主要用于在 windows 上启动其他程序。

不过，有一种相对简单的方法可以将 bash 脚本包装在 .bat 中。

```
@setlocal
@cd C:\cygwin\bin
@start bash --login -i /home/your_id/yourscript
@endlocal 
```

# javascript - HashMap 对象传递给 JavaScript 函数

> ID：10285515
> 
> 赞同：0
> 
> 时间：2012-04-23T17:44:44.840
> 
> 标签：javascript, jsp, map, hashmap

我将 HashMap 对象传递给 JavaScript 函数。该映射是在 JSP 中使用 struts 提供的 <%> 标记创建的。我需要在 javascript 函数中迭代 HashMap key=value 对。我怎样才能做到这一点？提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:54:11.760

您应该使用 JSONObject 而不是 HashMap。您可以直接将 JSONObject 传递给 JavaScript，反之亦然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T17:49:09.023

你真的不能。您需要根据 Java 中的值创建一个 javascript 数组（或对象文字）`HashMap`。你可以使用 scriptlet 来做到这一点

```
var ary = [
// scriptlet here that writes out whatever you want...
]; 
```

您最好请求一个将 HashMap 内容作为 json 返回的 url。

# ruby-on-rails - Twitter gem：错误的URI？

> ID：10285517
> 
> 赞同：0
> 
> 时间：2012-04-23T17:44:52.897
> 
> 标签：ruby-on-rails, twitter-gem

我今天更新了我的 Twitter gem，但它`Twitter.user_timeline("some_user")`不再有效。

我得到：

`URI::InvalidURIError: bad URI(is not URI?): https://api.twitter.com/1/statuses/user_timeline.json?screen_name=dalailama`

但是当我将它插入我的浏览器时，它工作正常。

任何想法为什么会这样？它在生产和开发中都这样做。

# 解决了

看起来他们刚刚推出了一个新版本。再次更新了我的 gemfile，它可以工作了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T16:22:59.630

看起来他们刚刚推出了一个新版本。再次更新了我的 gemfile，它可以工作了。

# 编辑

显然是由这个错误引起的：[https ://github.com/sferik/twitter/issues/253](https://github.com/sferik/twitter/issues/253)

# wpf - 更新 List<> 的任何项目时如何更新视图模型属性？

> ID：10285520
> 
> 赞同：0
> 
> 时间：2012-04-23T17:44:59.340
> 
> 标签：wpf, binding, viewmodel

我有一个域模型 Viper。BindableObject 实现了所有的 INotifyPropertyChanged 接口。简化模型：

```
public class Viper : BindableObject
{
    public int CaseId { get; set; }
    public string SerialNumber { get; set; }

    private byte _status;
    public Byte Status
    {
        get { return _status; }
        set { SetField(ref _status, value, "Status"); }
    }

    private List<CasePersonnel> _personnel;
    public List<CasePersonnel> Personnel
    {
        get { return _personnel; }
        set { SetField(ref _personnel, value, "Personnel"); }
    }

    private List<CaseFluids> _caseFluidList;
    public List<CaseFluids> CaseFluidsList
    {
        get { return _caseFluidList; }
        set { SetField(ref _caseFluidList, value, "CaseFluidsList"); }
    }

    public List<Gauge> Gauges { get; set; }
} 
```

Gauges 是这种类型的列表：

```
public class Gauge : BindableObject
{
    public int GaugeId { get; set; }
    public int ChannelId { get; set; }
    public string Units { get; set; }
    public string Code { get; set; }

    private double? _value;
    public double? Value
    {
        get { return _value; }
        set { SetField(ref _value, value, "Value"); }
    }

    private bool? _showAlarm;
    public bool? ShowAlarm
    {
        get { return _showAlarm; }
        set { SetField(ref _showAlarm, value, "ShowAlarm"); }
    }

    public DateTime? TimeStamp { get; set; }
    public double? Minimum { get; set; }
    public double? Maximum { get; set; }
} 
```

我创建了一个引用 Viper 域模型并添加了 InAlarm 属性的视图模型：

```
public class ViperViewModel : BindableObject
{

    #region Constructors
    public ViperViewModel(Viper viper)
    {
        InstanceViper = viper;
    }
    #endregion

    public Viper InstanceViper { get; set; }

    private bool _inAlarm;
    public virtual bool InAlarm
    {
        get { return _inAlarm; }
        set { SetField(ref _inAlarm, value, "InAlarm"); }
    }
} 
```

我有一个想要绑定到 ViperViewModel 的 InAlarm 属性的用户控件边框（闪烁红色）。但是，如果任何 InstanceViper.Gauge 的 ShowAlarm 属性为真，我需要 ViperViewModel.InAlarm 属性为真。当应用程序从外部源接收数据时，该仪表属性会更新。当底层域模型的 gauge.ShowAlarm 属性之一设置为 true 时，我如何/应该更新 viewmodel 的 InAlarm 属性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T17:55:56.383

创建一个你`EventHandler<AlarmedEventArgs>` `event`在改变`Gauge`时加注的地方。`ShowAlarm`

`AlarmedEventArgs`使用属性创建一个`public bool?`。

订阅事件，触发`ViperViewModel`时应设置方法。`InAlarm`

# facebook - 如何清除 Facebook 的图片缓存

> ID：10285522
> 
> 赞同：28
> 
> 时间：2012-04-23T17:45:11.820
> 
> 标签：facebook, caching, facebook-graph-api

我有一个 Facebook 应用程序，它代表我的用户创建了几个墙帖。墙帖中的图片由 Facebook 的服务器缓存。我已经替换了我服务器上的原始图像，我想清除 Facebook 的图像缓存，以便所有其他墙贴都更新为新图像。

Facebook 缓存了什么： http://platform.ak.fbcdn.net/www/app_full_proxy.php?app=236915563048749&v=1&size=z&cksum=aebffc27f986977797a9903c2b6e08df&src= [http%3A%2F%2Fvcweb2.s3.amazonaws.com%2Fassets%2Fweb %2Fimages%2Ficon_square.png](http://platform.ak.fbcdn.net/www/app_full_proxy.php?app=236915563048749&v=1&size=z&cksum=aebffc27f986977797a9903c2b6e08df&src=http%3A%2F%2Fvcweb2.s3.amazonaws.com%2Fassets%2Fweb%2Fimages%2Ficon_square.png)

原始缓存 URL，现在更新为新图像。 [http://vcweb2.s3.amazonaws.com/assets/web/images/icon_square.png](http://vcweb2.s3.amazonaws.com/assets/web/images/icon_square.png)

这可能吗？谢谢！

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-04-23T22:46:13.940

“强制” facebook 清除特定 url 的缓存的方法是使用[Debugger 工具](http://developers.facebook.com/tools/debug)。

我尝试将调试器与图像的 url 一起使用，它显示的是新图像而不是旧图像，尽管在尝试缓存链接时，您发布的旧图像仍然出现。

我怀疑如果您尝试发布新帖子，将使用新图标而不是旧的缓存版本，但您发布的链接可能不会更改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-20T21:54:06.790

以我的经验，facebook 不会动态更新较旧的保存图像，尽管例如粉丝页面的数据将显示当前统计信息。我做了很多宣传，看到了旧版本的消息和帖子发出，而新的页面图像存在。但是，现在和六个月前的粉丝页面信息相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-21T15:22:15.133

## 没有在线调试器的解决方法

`?v=randomhash`您可以使用旧的缓存失效技巧强制重新获取。您唯一需要注意的是必须将 URL 参数添加到每个`og:`属性中。

如果您有此 URL: `example.com/items/3`，则需要执行以下操作：

*   分享为`example.com/items/3?v=g45f6d`
*   将共享图像链接为`<meta property="og:image" content="example.com/items/3/image?v=g45f6d" />`
*   更新网址：`<meta property="og:url" content="example.com/items/3?v=g45f6d" />`

注意：在这个例子`g45f6d`中是一个随机生成的哈希。

这样一来，它看起来与 facebook 是一个完全不同的页面，因此它会像第一次看到的那样抓取它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-15T05:22:21.767

例子：

```
http://www.example.com/pic001.jpg?fbrefresh=1201226471 
```

这就是你必须使用的代码。1201226471 是您用您的 Facebook URL 替换的内容。您必须在每一页上都这样做，这非常乏味。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-08-30T03:17:51.670

Facebook 提供了一个名为“共享调试器”的在线工具，可让您使用最新设置抓取链接。

只需在“调试”字段中粘贴您的链接，然后单击“调试”。魔术完成了！

[https://developers.facebook.com/tools/debug/sharing/?q=https%3A%2F%2Fwww.iuoe115.ca%2Fprime-minister-trudeau-addresses-iuoe-canadian-conference%2F](https://developers.facebook.com/tools/debug/sharing/?q=https%3A%2F%2Fwww.iuoe115.ca%2Fprime-minister-trudeau-addresses-iuoe-canadian-conference%2F) [1](https://developers.facebook.com/tools/debug/sharing/?q=https%3A%2F%2Fwww.iuoe115.ca%2Fprime-minister-trudeau-addresses-iuoe-canadian-conference%2F)

# c# - 获取元素页码

> ID：10285529
> 
> 赞同：4
> 
> 时间：2012-04-23T17:45:31.013
> 
> 标签：c#, linq, oracle, nhibernate, linq-to-nhibernate

我在一个表格中有 10,000 个项目，在客户端每页显示 20 个项目（项目可以额外过滤）

我需要在所有元素中找到项目。然后我需要获取页码，元素所在的位置并转到客户端上的该页面并选择它

我之前的问题是 [Get item index (rownum)](https://stackoverflow.com/questions/10226118/get-item-index-rownum)。

但我没有得到答案。

可能还有另一种方法可以在不获取所有表格数据的情况下找到项目所在的页码？

我正在使用 Linq to Nhibernate，数据库 - Oracle。

**编辑：**感谢回复，但这并不容易

例子：

在表分贝中，我有

```
 ID          NAME 
 1           Item1 
 2           
 3
 4
 5
 20
 31
 .....        ....
 5000 
```

在客户端，我过滤了数据

```
query = query.Where(...).Where(...).Where(...).OrderBy(...) 
```

并得到了结果

```
 ID                                         ROW_NUM_IN_QUERY
 4                                          1
 300                                        2
 2                                          3
 31                                         4
 .....        ....
 402                                        50
 800                                        51 
```

我无法链接到`ID`查询中的字段或其他字段，因为它们的顺序可能不同

我可以通过简单的 SQL 获得 rownum。但是 Linq to NHibernate 做不到。它没有像`IndexOf`或`RowNumber`没有从表中完全获取数据的功能。

这个变种：

```
var indexed = myDataSource.Select( (x,n) => new { Value = x, RowNumber = n } );

Not suported exception during execute query 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T17:55:25.147

首先，如果您不提供任何排序​​，那么索引的整个概念就毫无意义。其次，没有简单易行的方法来得到你想要的；它需要在一定程度上取决于特定的查询。

例如，如果您根据创建日期对数据进行排序，则可以执行以下操作：

```
var someItem = queryToFetchIndividualItem;

var indexOfItem = table.OrderBy(item => item.CreatedDate)
//any other filtering provided on your query goes here, i.e. other where statements
.Where(item => item.CreateDate < someItem.CreatedDate)
.Count() 
```

如果您正在对“标题”进行排序，那么您可以执行以下操作：

```
var indexOfItem = table.OrderBy(item => item.Title)
//any other filtering provided on your query goes here, i.e. other where statements
.Where(item => item.Title < someItem.Title)
.Count() 
```

我假设你看到了这里的模式。如果我们得到查询中感兴趣的项目之前的项目计数，我们就会得到索引。数据库可以优化查询，因为我们只对计数感兴趣。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T18:17:58.683

您可以使用 select 的索引重载（http://msdn.microsoft.com/en-us/library/bb534869.aspx）：

```
var indexed = myDataSource.Select( (x,n) => new { Value = x, RowNumber = n } ); 
```

这为您提供了包含行号的匿名类的枚举。从那里，您可以获得特定的记录：

```
var specificRecord = indexed.FirstOrDefault( x => x.Value.Key == "SomeKey" ); 
```

假设没有返回`null`（即找到您的密钥），您可以通过一些简单的数学运算获得它所在的页面：

```
var page = (int)Math.Floor( (double)specificRecord.RowNumber / pageSize ); 
```

**注意**：您必须测试此方法以查看它是否在数据库中得到处理，或者必须将您的一万条记录拉入内存；我只是在没有数据库的情况下对其进行了测试，因此它可能效率不高。如果这不起作用，那么我建议在您的数据库中创建一个返回行号和页码的存储过程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-14T15:13:00.750

我放弃了这个想法，因为我无法用 Nhibernate Linq 实现它。

但我使用更简单的变体。

我使用搜索作为**快速过滤器**- 在网格中显示所有找到的数据，而无需转到第一个找到元素的页面。

**感谢**所有回复和评论。

# json - 读取 400 错误 clojure 返回的 json

> ID：10285536
> 
> 赞同：0
> 
> 时间：2012-04-23T17:45:53.083
> 
> 标签：json, clojure, openurl, http-status-code-400

我有一个网络服务，可以在一些获取请求时回复，如下所示：http: [//developer.echonest.com/api/v4/artist/reviews](http://developer.echonest.com/api/v4/artist/reviews?api_key=N6E4NIOVYMTHNDM8J&id=ARH6W4X1187B99274F&format=json&results=1&start=2) ?api_key=N6E4NIOVYMTHNDM8J&id=ARH6W4X1187B99274F&format=json&results=1&start=2 如果参数在请求错误： http: [//developer.echonest.com/api/v4/artist/reviews](http://developer.echonest.com/api/v4/artist/reviews?api_key=N6E4NIOVYMTHNDM8J&id=ARH6W4X1187B99274F&format=json&results=1&start=WRONG-STRING) ?api_key=N6E4NIOVYMTHNDM8J&id=ARH6W4X1187B99274F&format=json&results=1&start=WRONG-STRING 服务器回复 400 和一些 json 解释出了什么问题.

现在在 clojure 中，我想阅读 json 以确切知道出了什么问题，我尝试使用 (clojure.java.io/reader wrong-url) 但它引发了异常

> 服务器返回 HTTP 响应代码：400 用于 URL：http:
> [//developer.echonest.com/api/v4/artist/reviews](http://developer.echonest.com/api/v4/artist/reviews)？api_key=N6E4NIOVYMTHNDM8J&id=ARH6W4X1187B99274F&format=json&results=1&start=e1 [抛出类 java.io.IOException]

我怎样才能读取json？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T21:15:17.337

有时我*真的*很想看看网络上发生了什么，在这种情况下，我启动了 [Wireshark](http://www.wireshark.org/)，一个网络数据包分析器。这是我在这种情况下使用它的方法（但它是一个强大而灵活的软件，你可以用它做很多漂亮的事情）：

1.  启动它
2.  选择捕获-> 选项 (Ctrl-K)
3.  选择要为其捕获流量的网络接口
4.  `host developer.echonest.com`作为捕获过滤器输入
5.  点击*开始捕获*按钮

然后在 echonest.com 上与您的服务进行交互 - 您将看到数据包进入 Wireshark 的窗口。完成后，返回 Wireshark 并点击 Capture->Stop (Ctrl-E)。

在数据包列表中，找到以`GET /api/v4/arist/`... 开头的数据包，右键单击并选择“Follow TCP Stream”——这将准确显示正在发送和接收的内容。

# css - 即使定义了高度，删除链接（href 标记）后图像也会变大

> ID：10285538
> 
> 赞同：0
> 
> 时间：2012-04-23T17:45:57.700
> 
> 标签：css, image, hyperlink, image-resizing

我之前有一些图像链接，其中所有图像都有一个定义的高度。删除链接（a href 标记）后，图像变大了。

见截图：http: [//i.stack.imgur.com/ePsxC.png](http://i.stack.imgur.com/ePsxC.png)

我希望它看起来像第一行，它们的大小都相同（与第二行相比，第二行的圆圈更大，因为我删除了链接），但我不希望圆圈链接到任何东西。我还定义了边距和边框，所以我认为这不是默认浏览器问题。它可能与我保存图像链接的嵌套 div 有关，但我不知道是什么。

非常感谢您提供的任何帮助。

如果有助于查看源代码，请访问以下网站：http: [//ink-12.web5test.terc.edu/aboutus/example.cfm](http://ink-12.web5test.terc.edu/aboutus/example.cfm)

相关CSS：

```
.text2col{
margin-left:12.5em;
border:0.1em solid black;
background-color:white;
padding:1em;
min-width:46em;
overflow:auto;
text-align:left;
max-height:31em;

}

.text2colin{
overflow:auto;
}

.teaminfo{
margin-left:5em;
margin-top:-0.25em;
}

#img{
text-align:center;
}

.imgteam{
margin:1em;
height:auto;
width:auto;
float:left;
text-align:center;
}

.imgteam a:hover img{
border:0.2em solid #cd05ff;
}

.imgteam img{
display:inline;
margin:0;
border:0.2em solid black;
width:9.5em;
height:9.5em;
-moz-border-radius:4.75em;
-webkit-border-radius:4.75em;
border-radius:4.75em;
}

.imgschool{
margin:1em;
height:auto;
width:auto;
float:left;
text-align:center;
}

.imgschool a:hover img{
border:0.2em solid #cd05ff;
}

.imgschool img{
display:inline;
margin:0;
border:0.2em solid black;
width:19em;
height:9.5em;
-moz-border-radius:2em;
-webkit-border-radius:2em;
border-radius:2em;
}

.teamcaption{
text-align:center;
font-weight:normal;
width:auto;
margin:0.2em;
}

.imgteamsmall img{
width:4em;
height:4em;
-moz-border-radius:1em;
-webkit-border-radius:1em;
border-radius:1em;
border:0.2em solid black;
float:left;
} 
```

相关html：

```
<div class="text2colin">

<div class="imgschool"><a target="blank" href="http://terc.edu"><img src="img/school.png" alt="picture of school"></a>
<div class="teamcaption"><p class="img"><strong>Name of school</strong><br />School system</p>
    </div>
</div>              

<div class="imgteam"><a href="#teacherinfo"><img src="img/school.png" alt="picture of teacher"></a>
<div class="teamcaption"><p class="img"><strong>Teacher's name</strong><br />Grade # Teacher</p>
    </div>
</div>

<div class="imgteam"><a href="teacherinfo"><img src="img/school.png" alt="picture of teacher"></a>
<div class="teamcaption"><p class="img"><strong>Teacher's name</strong><br />Grade # Teacher</p>
    </div>
</div>                

</div><!--end div class=text2colin-->

<div class="text2colin">

<h4>Section Header Two</h4>

</div><!--end div class=text2colin-->

<div class="text2colin">

<div class="imgschool"><a target="blank" href="http://terc.edu"><img src="img/school.png" alt="picture of school"></a>
<div class="teamcaption"><p class="img"><strong>Name of school</strong><br />School system</p>
    </div>
</div>

<div class="imgteam"><img src="img/school.png" alt="picture of teacher">
<div class="teamcaption"><p class="img"><strong>Teacher's name</strong><br />Grade # Teacher</p>
    </div>
</div>

<div class="imgteam"><img src="img/school.png" alt="picture of teacher">
<div class="teamcaption"><p class="img"><strong>Teacher's name</strong><br />Grade # Teacher</p>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:47:55.807

尝试使用 px 而不是 em。示例：`height: 100px`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:08:15.573

问题不在于您在此处发布的那段 CSS，而在于您的`fonts.css`样式表中

```
a:link {text-decoration:none; color:blue; font-size:0.9em} 
```

而且由于字体大小是继承的，所以里面的所有东西`a`都会有这个字体大小，而里面`9.5em`的字体和外面的就不`a`一样了！`9.5em`

# c# - Oracle 期望日期值采用什么格式，我怎样才能为 Oracle 提供它想要的？

> ID：10285542
> 
> 赞同：0
> 
> 时间：2012-04-23T17:46:09.980
> 
> 标签：c#, winforms, oracle, datetime, dotconnect

“AVAILABLEDATE”是 DATE 类型的列。

我可以通过 Toad 查询表格并获得结果。但是，在 (Winforms/C#/dotConnect) 代码中，它不起作用。

```
ocmd.Parameters.Add("AVAIL_DATE", getDateToQuery()); 
```

我很确定问题是我传递日期的方式：

```
private DateTime getDateToQuery() {
  DateTime candidateVal = dateTimePickerScheduleDate.Value;
  if (candidateVal.Equals(null)) {
    candidateVal = DateTime.Now;
  }
  return candidateVal;
} 
```

...但我不知道如何强制日期值采用 Oracle 将识别的格式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T17:57:38.657

尝试添加参数类型：

```
OracleParameter p1 = new OracleParameter("AVAIL_DATE", OracleDbType.Date);
p1.Value = getDateToQuery();
ocmd.Parameters.Add(p1); 
```

另外，请确保**按顺序**提供参数，我记得上次使用 Oracle 时，参数的名称被忽略了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T18:10:49.613

这可行，但我不确定这是最好的方法：

```
int iFromYear = dateTimePickerScheduleDate.Value.Year;
int iFromMonth = dateTimePickerScheduleDate.Value.Month;
int iFromDay = dateTimePickerScheduleDate.Value.Day;
. . .
ocmd.Parameters.Add("AVAIL_DATE", new DateTime(iFromYear, iFromMonth, iFromDay)); 
```

# c# - 如何从 aspx 网页访问文件，即 \\folder\\mydocument.doc

> ID：10285544
> 
> 赞同：0
> 
> 时间：2012-04-23T17:46:35.490
> 
> 标签：c#, asp.net

我需要通过将以下内容应用于资源管理器导航栏来访问 Word 文档

\文件夹\子文件夹\mydocument.doc

我不想阅读内容并加载 aspx 页面，只是访问该文件并让该人的 PC 使用 word 打开它。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:48:04.717

如果您想向用户提供他们可以通过本地文件系统访问的文件的链接，您可以在 URL 上使用“file://”前缀。

我只是在一个 HTML 文件中尝试过这个......

```
<a href="file://c:\temp\test.docx">Open File</a> 
```

...并在我的 PC 上的 IE 和 Chrome 中对其进行了测试，效果很好。

希望这就是你所追求的？！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T20:14:40.310

您可能需要[WebDAV](http://www.iis.net/download/webdav)

...

[如何配置 WebDAV](http://www.dotnetscraps.com/dotnetscraps/post/did-you-know-configure-webdav-in-iis-7-75.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T19:49:24.103

在您的页面中添加这样的超链接：

```
<asp:Hyperlink ID="hpMyLink" runat="server" /> 
```

在您的代码中，它所属的位置（Page_Load、Item_DataBound 等），您必须使用类似于以下内容的内容修复所需的 URL：

```
hpMyLink.NavigateUrl = string.Format("{0}/{1}", _YOURWEBSERVERROOT, relativeFilePath); 
```

**- 或者 -**

如果用户总是从您网站的同一个地方访问它，只需执行

```
hpMyLink.NavigateUrl = string.Format("/folder/subfolder/{1}", fileName); 
```

这将导致用户导航器上传文档。

**注意**：仅供参考，取决于您想要做什么以及哪个用户有权访问此文件，您必须考虑并非所有用户都有权打开 .doc 文件（MAC 用户、移动用户等）的事实。可能会考虑其他东西，例如 PDF。

# ios - 使用 AVQueuePlayer/AVPlayer 进行无缝播放 - 有可能吗？

> ID：10285545
> 
> 赞同：7
> 
> 时间：2012-04-23T17:46:36.580
> 
> 标签：ios, avplayer, avqueueplayer

我一直在玩弄 the`AVPlayer`及其子类`AVQueuePlayer`（和一系列`MPMediaItem`s），发现后者在无缝专辑中表现更好，但似乎都没有完全完成任务。

`AVPlayer`使用's`replaceCurrentItemWithPlayerItem`方法时，当前曲目和下一曲目之间有一个非常明显的停顿。但是使用`AVQueuePlayer`'`advanceToNextItem`方法，差距要窄得多。

唯一的选择是这两个类，因为我正在处理`AVPlayerItem`包含来自 iTunes 音乐库中项目的资产 URL 的 's。这就引出了一个问题，是否有可能使用 iOS SDK 实现无缝播放？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T18:15:16.203

您可以使用 AVAssetReader 或扩展音频文件服务 API 从音频文件中读取数据，然后将未压缩的音频数据以任何所需的间隙、无间隙、重叠甚至混合方式提供给音频单元混音器。正确使用所有这些 API 并非易事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-01T21:13:47.033

您是否尝试过使用[https://github.com/tumtumtum/StreamingKit](https://github.com/tumtumtum/StreamingKit)框架进行无缝播放？我试图自己研究这个话题。

# c# - AzMan C# 错误

> ID：10285547
> 
> 赞同：0
> 
> 时间：2012-04-23T17:46:41.730
> 
> 标签：c#, active-directory, azman

我正在尝试配置 AzMan，但我遇到了代码问题。你能解释一下我应该怎么做，因为我不明白这些问题：

![在此处输入图像描述](../Images/37635835538b57fa39164218723b846d.png) ![在此处输入图像描述](../Images/a7ae4b789c760d59ada383d2f5724bff.png)

带有正确配置的 xml 文件的 Active Directory。

![在此处输入图像描述](../Images/12159295727fd1ee4cf987994ffa6ef6.png)

工作正确

![在此处输入图像描述](../Images/34e0376d7dbcac43caf5f2c191f5e980.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:54:26.370

.NET 4.0 允许将主互操作程序集（或者更确切地说，您需要的部分）嵌入到您的程序集中，这样您就不需要将它们与您的应用程序一起部署。

无论出于何种原因，这个程序集都不能被嵌入——但这听起来对你来说不是问题。只需在 Visual Studio 2010 中打开程序集的“属性”选项卡并将“嵌入互操作类型”设置为“假”。

请参阅[http://blogs.msdn.com/b/mshneer/archive/2009/12/07/interop-type-xxx-cannot-be-embedded-use-the-applicable-interface-instead.aspx](http://blogs.msdn.com/b/mshneer/archive/2009/12/07/interop-type-xxx-cannot-be-embedded-use-the-applicable-interface-instead.aspx)

# c# - 打开保存的工作簿会导致当前工作簿引发异常

> ID：10285549
> 
> 赞同：6
> 
> 时间：2012-04-23T17:46:46.213
> 
> 标签：c#, excel, vsto

我正在尝试打开保存的 Excel 工作簿，同时保留对当前工作簿的引用。问题是，只要我打开保存的工作簿，原始工作簿就会在访问时引发异常。

这是一个代码片段来演示。我把它放在一个功能区按钮的事件处理程序中来测试它。

```
try
{
    string workbookPath = @"C:\Temp\Test.xlsx";
    Workbook current = Globals.ThisAddIn.Application.ActiveWorkbook;
    Workbook newWorkbook = Globals.ThisAddIn.Application.Workbooks.Open(workbookPath);

    current.Activate();                   // throws an exception
    Sheets sheets = current.Worksheets;   // throws an exception
    string name = current.Name;           // throws an exception
}
catch (Exception ex) {} 
```

`current`如果您调试并在,`sheets`和变量上放置手表，`name`您可以看到，一旦`newWorkbook`实例化，其他变量在访问时就会抛出异常。

抛出的异常是

```
System.Runtime.InteropServices.COMException was caught
  Message=Exception from HRESULT: 0x800401A8
  Source=WorkbookTest
  ErrorCode=-2147221080
  StackTrace:
       at Microsoft.Office.Interop.Excel._Workbook.Activate()
       at WorkbookTest.Ribbon1.button1_Click(Object sender, RibbonControlEventArgs e) in C:\Temp\WorkbookTest\WorkbookTest\Ribbon1.cs:line 25
  InnerException: 
```

最奇怪的是，**这只**发生在新的 Excel 实例上。如果我打开 Excel，关闭第一个工作簿并打开一个新工作簿，它工作得很好。只有当我有一个新打开的 Excel 实例时才会失败。我真的不明白为什么会这样。

有谁知道如何解决这一问题？我在这里做错了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-24T14:30:07.250

我认为这可能是正确的行为。

如果您要手动启动一个新的 Excel 会话（它会自动创建一个新的工作簿 [Book1]），然后在不对 Book1 执行任何操作的情况下打开现有工作簿，您会注意到 Book1 不再存在于 Excel 会话中。

我猜您正在通过 C# 加载项遇到相同的行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-02T04:33:54.613

这是“creamyegg”所描述的正确行为

如果不使用，Excel 将丢弃临时工作簿。要解决这个问题，您只需要在打开另一个之前使用该表。

找到一个空单元格并修改它！您的工作簿将保留，您可以继续您的业务。:)

# nhibernate - NHIbernate 只读属性 - 流畅的映射

> ID：10285550
> 
> 赞同：4
> 
> 时间：2012-04-23T17:46:49.957
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping, readonly

我有下一个实体：

```
public class Topic : EntityBase
{
    private readonly ICollection<Vote> _votes;

    public virtual string Title { get; protected set; }
    public virtual ICollection<Vote> Votes
    {
        get { return _votes; }
    }

    public virtual int VotedUpCount
    {
        get
        {
            return _votes.Count(v => v.VotedTo == VoteType.VoteUp);
        }
    }
} 
```

我需要映射我的`VotedUpCount`（因为我有一个来自 NH 的错误）。**但**我不需要这个属性作为我数据库中的列。

我尝试了这个并得到了一个错误`Invalid column name 'VotedUpCount'.`

```
public class TopicMap : ClassMap<Topic>
{
    public TopicMap()
    {
        Id(x => x.Id);
        Map(x => x.Title);
        Map(x => x.VotedUpCount).Access.ReadOnly();
        HasMany<Vote>(x => x.Votes)
            .Cascade.All();
    }
} 
```

有没有办法使用流畅的接口映射只读属性以使该实体工作？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-24T07:21:02.180

为什么要映射它？它只是一个执行一些代码（也可能是一种方法）的 .NET 属性，与数据库无关，根本不映射它。

如果您需要一个真正的 DB 属性（其中值来自 DB 列）映射为只读：

```
Map(x => x.PropertyName).Column("ColumnName").ReadOnly();
// Alternative (does exactly the same, but is more like the NHibernate mapping:
Map(x => x.PropertyName).Column("ColumnName").Not.Insert().Not.Update(); 
```

# java - java .properties 文件值中的换行符

> ID：10285551
> 
> 赞同：16
> 
> 时间：2012-04-23T17:46:53.030
> 
> 标签：java, properties

我真的需要使用原始 unicode 字符转义来将换行符嵌入到我的 .properties 文件中吗？

[文档中这个](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Properties.html#load%28java.io.InputStream%29)冗长的讨论很酷，但我不知何故错过了这一点。现在试图再次扫描这个批量，但也许有人知道？

谢谢，安东

* * *

**更新**

> 某些特殊字符，可以使用类似于字符和字符串文字的转义序列在键和元素中表示

我不太确定那些“*某些*特殊字符”可能是什么。来自 1.4 javadocs 的直接链接没有指向规范的正确部分。但是在查找[正确的段落](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.6)之后，这对我来说很清楚。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-23T17:48:57.040

> 我真的需要使用原始 unicode 字符转义来将换行符嵌入到我的 .properties 文件中吗？

没有。我希望`\r`or `\n`or`\r\n`工作得很好。您声称链接的文档没有抓住重点，但它似乎与我非常相关：

> 不在 Latin1 中的字符和某些特殊字符可以使用类似于字符和字符串文字的转义序列在键和元素中表示（参见 Java 语言规范的 §3.3 和 §3.10.6）。

[3.10.6 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.10.6)是你想要的，对吧？

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-23T17:54:59.123

重要的参考 1.4 API 文本行是：

> ASCII 字符`\`、制表符、换页符、换行符和回车符分别写为`\\`、`\t`、`\f`、`\n`和`\r`。

# jboss7.x - 如何获得 jboss7.1 arquillan 测试的工作示例？

> ID：10285552
> 
> 赞同：1
> 
> 时间：2012-04-23T17:46:56.813
> 
> 标签：jboss7.x, jboss-arquillian

两天以来，我正在尝试使用 jboss 7.1.1 运行“Arquillan”测试的示例，但它们总是有很多错误。没有什么能像我在互联网上找到的许多教程中看到的那样工作。请在哪里下载完整的工作示例，展示如何将 Arquillan Test 与 Jboss7.1.1 一起使用？感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T18:13:46.650

我希望你正在使用 Maven。要获得使用 JBoss-7.1.1-Final 进行 Arquillian 测试的工作示例，您可以使用以下原型创建一个新项目：（`org.jboss.spec.archetypes:jboss-javaee6-ear-webapp-archetype:7.1.1.Beta1`这是撰写本文时的最新版本）。测试位于 ejb 模块中。

然后按照以下说明进行操作`README.md`：

> 要在 JBoss AS 7 中运行测试，首先启动一个 JBoss AS 7 实例。然后，在激活以下配置文件的情况下运行测试目标：

```
mvn clean test -Parq-jbossas-remote 
```

有必要在以下设置`skip`为*false*`/pom.xml`：

```
<profiles>
  <profile>
     <id>default</id>
     <activation><activeByDefault>true</activeByDefault></activation>
     <build>
        <plugins>
           <plugin>
              <artifactId>maven-surefire-plugin</artifactId>
              <version>2.4.3</version>
              <configuration>
                 <skip>false</skip>
... 
```

# c# - 有一个“玩家”类，里面有一个虚拟类，由于虚拟类，无法保存新玩家

> ID：10285555
> 
> 赞同：1
> 
> 时间：2012-04-23T17:47:10.633
> 
> 标签：c#, entity-framework-4.1

我有三个班。在我的创建视图中，我有一个加载所有 FootballTeam 的下拉列表。但问题是当我发布到控制器时。因为 ModelState.IsValid 无效。我知道它与“公共虚拟 FootballTeam FootballTeam { get; set; }”有关，因为它在我添加它之前就起作用了:)

我唯一想做的就是将一名球员绑定到一支足球队。我可以将我的“公共虚拟 FootballTeam FootballTeam”更改为 int 而不是虚拟 FootballTeam，这应该可以工作。但我在这个[实体框架上一对多地](http://buildstarted.com/2010/08/27/entity-framework-with-many-to-many-one-to-many-and-one-to-one-relationships/)看到它是映射它的最佳方式，就像我对虚拟 FootballTeam 所做的那样。

```
 [HttpPost]
    public ActionResult CreatePlayer(PlayerViewModel playerViewModel)
    {
        var team = db.FootballTeam.Find(playerViewModel.Player.FootballTeam.Id);
        playerViewModel.Player.FootballTeam = team;

        if (ModelState.IsValid)
        {
            db.Player.Add(playerViewModel.Player);
            db.SaveChanges();
            return RedirectToAction("Teams");
        }
        return RedirectToAction("Teams");
    }

@model test.Models.PlayerViewModel

@Html.DropDownListFor(x => x.Player.FootballTeam.Id, Model.FootballTeams.Select(y => new SelectListItem
                                                                                        {
                                                                                            Text = y.Name,
                                                                                            Value = y.Id.ToString()
                                                                                        }))

    public class Player
{
    public int Id { get; set; }
    public int ImageId { get; set; }
    [Required(ErrorMessage = "Vänligen ange ett namn")]
    public string Name { get; set; }
    [Required(ErrorMessage = "Vänligen ange en possition")]
    public string Position { get; set; }
    [Required(ErrorMessage = "Vänligen ange födelseåret")]
    public string BirthYear { get; set; }
    [Required(ErrorMessage = "Vänligen ange en längd")]
    public string Length { get; set; }
    [Required(ErrorMessage = "Vänligen ange en vikt")]
    public string Weight { get; set; }
    [Required(ErrorMessage = "Vänligen ange moderklubben, alt ett '-'")]
    public string FirstClub { get; set; }
    public virtual FootballTeam FootballTeam { get; set; }
}

    public class FootballTeam
{
    public int Id { get; set; }
    [Required(ErrorMessage = "Vänligen ange ett namn")]
    public string Name { get; set; }
    public ICollection<Player> Players { get; set; }
    public ICollection<Coach> Coaches { get; set; }
    [Required(ErrorMessage = "Vänligen fyll i information om laget")]
    [DataType(DataType.MultilineText)]
    public string Information { get; set; }
}

    public class PlayerViewModel
{
    public Player Player { get; set; }
    public IEnumerable<Image> Image { get; set; }
    public IEnumerable<FootballTeam> FootballTeams { get; set; } 
} 
```

# javascript - JavaScript（或 jQuery）在提交之前在表单中进行数学运算

> ID：10285556
> 
> 赞同：2
> 
> 时间：2012-04-23T17:47:12.417
> 
> 标签：javascript, jquery, forms

我有一个费用报告类型的表格，其中包含要求里程的输入。当用户输入一个数字时，我希望有一个自动计算功能来显示他们将得到报销的金额。

例如，如果用户输入“65”，则输入框右侧将是“65 x $.555 = $36.08”。

JS 不是我的强项，但我知道我需要使用隐藏的 div 来显示 JS 生成的文本，以及一些代码来确保“总数”四舍五入到小数点后 2 位。有什么想法/建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T17:53:16.457

[例子](http://jsfiddle.net/c4xwP/)

```
$(function () {
    $('#amount').change(function () {
         var $this = $(this);

        $this.next('label').text((parseFloat($this.val()) * .555).toFixed(2))            
    });        
});​ 
```

jQuery 不是必需的，但很有帮助。

[**固定**](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Number/toFixed)方法

[**parseFloat**](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/parseFloat)方法

* * *

如果您需要进行四舍五入：

```
var rounded = Math.round(parseFloat($this.val()) * 100) / 100; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T17:51:41.000

在您的表单标签中，添加一个`onsubmit`调用数学函数的属性。例如 ：

```
<form action="movie.php" method="post" onsubmit="doTheMath()"> 
```

然后使用 Javascript 创建函数：

```
<script type="text/javascript">
function doTheMath() 
{
     // do something

     // submit the form
     return true;
}
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T18:07:38.423

你可以这样做：

HTML：

```
​&lt;form method="post">
<span>Type here:</span><input type="text" id="num"></input>
</form>

<span id="display_text"></span> 
```

JS：

```
num_field = document.getElementById("num");
num_field.onkeyup=function () {

    mult_field = 0.555;
    num_math = num_field.value * mult_field;
    num_string = num_field.value + "*" + mult_field + "=" + num_math;
    document.getElementById("display_text").innerHTML = num_string;
}​ 
```

这将进行数学运算并在您键入时显示它。

JS 小提琴：http: [//jsfiddle.net/s9jcC/](http://jsfiddle.net/s9jcC/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-24T04:54:41.420

使用纯 JavaScript

```
window.onload=function()
{
    var txt=document.getElementById('amount');
    var span=document.createElement('span');
    txt.parentNode.insertBefore(span, txt.nextSibling);
    txt.onkeyup=function()
    {
        span.innerHTML="";
        var val=txt.value;
        if(val.length > 0 && isNaN(val)) 
        {
            span.innerHTML=" Invalid number !";
            return false;
        }
        var result=val*0.555;
        if(parseFloat(result)>0) span.innerHTML=' $'+result.toFixed(2);
    }
} 
```

[**例子。**](http://jsfiddle.net/9VMZu/3/)

# actionscript-3 - 影片剪辑与数组中的元素发生冲突

> ID：10285563
> 
> 赞同：0
> 
> 时间：2012-04-23T17:47:41.320
> 
> 标签：actionscript-3, actionscript, physics, game-physics

我遇到了一个影片剪辑与 Actionscript 3 中数组中的元素发生冲突的问题。当我专门定义一个要与之发生冲突的影片剪辑时，它可以正常工作。但是，一旦我将代码放入 for 循环中，它就会停止工作。这就是我的意思：

此代码用于检测播放器是否与 2 个影片剪辑的顶部发生碰撞：http: [//pastebin.com/YkCzrykr](http://pastebin.com/YkCzrykr)

一旦我将碰撞代码转换为数组并检测玩家是否与内部的任何东西发生碰撞，它就会停止工作，如下代码所示：http: [//pastebin.com/WeffU8as](http://pastebin.com/WeffU8as)

应该发生的是玩家在平台上方（由 sldTerrain# 定义）生成并下降并停止。这在我使用粗略代码时有效，但在我将元素放入数组时无效。有谁能够帮助我？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:58:36.257

由于您正在循环遍历数组以检查所有内容，因此如果检测到命中并将 isGrounded 设置为 true，则循环将继续并可以找到未命中的对象并将 isGrounded 设置回 false。那是你的意图吗？如果不是，您应该在将 isGrouned 设置为 true 时跳出循环。

# java - 从 JSOUP 解析的 HTML 中删除转义文本

> ID：10285568
> 
> 赞同：4
> 
> 时间：2012-04-23T17:48:23.867
> 
> 标签：java, html, escaping, jsoup

我正在使用 JSOUP 解析 HTML，其中也包含一些元素。但是，当我打印生成的 doc.html() 时，而不是：

```
<script language="JavaScript"> <a href="http://www.company.com/index.htm" </a> </script> 
```

我正进入（状态 ：

```
<script language="JavaScript"> &lt;a href=&quot;http://www.company.com/index.htm&quot; &lt;/a&gt; </script> 
```

在代码中，我进行如下操作：

```
for (final Element src : doc.select("script")) { 
data = data.replace(someText,newText);
src.text(data); <==== I could find this method escapes the text } 
```

我正在使用 UTF-8 字符集。

如何直接获取未转义的文本？提前致谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T13:03:21.733

嘿，感谢您的所有帮助...我们使用以下方法解决了问题：

```
src.childNode(0).attr("data", data); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T18:06:34.797

改用该[`.html()`](http://jsoup.org/cookbook/modifying-data/set-html)方法

```
src.html(data) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T11:43:12.650

我遇到了同样的问题。来自 Apache Commons的[StringEscapeUtils](http://commons.apache.org/lang/api-release/org/apache/commons/lang3/StringEscapeUtils.html)似乎可以解决问题。

```
String html = StringEscapeUtils.unescapeHtml4(document.html()); 
```

IMO 这不是解决这个问题的最佳方法，但它对我有用。

# internet-explorer-7 - Nivo Slider 的绝对定位坚持浏览器窗口，而不是在 IE7 中随设计滚动

> ID：10285570
> 
> 赞同：0
> 
> 时间：2012-04-23T17:48:36.847
> 
> 标签：internet-explorer-7, positioning, absolute, nivo-slider

人们仍在使用 IE7，并指出我在主页上的 Nivo Slider 在 Internet Explorer 7 中垂直滚动时会粘在浏览器窗口上，并且不会停留在设计中。网上有很多解决类似问题的建议，但没有这个。有人可以看看[http://mileslostmilesgained.org](http://mileslostmilesgained.org)并提供帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T12:31:33.810

我看到了你的问题，一件小事你删除了身体标签中的高度：100%。

main.css（第 3 行）。

然后你就会得到答案。

# wso2 - WSO2 esb 性能

> ID：10285572
> 
> 赞同：0
> 
> 时间：2012-04-23T17:48:47.690
> 
> 标签：wso2, wso2esb

您好，我们已经在我们的 ubuntu 服务器上安装了 wso2 esb。它运行良好，但时不时会耗尽几乎所有的系统内存。我在服务器上运行 htop，它显示了几个 esb 实例。有没有人有同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-06T01:17:20.080

你能检查`ps -aux | grep wso2esb | grep java`并杀死所有不需要的实例吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T08:55:33.947

你能检查为什么有这么多实例吗？您是否启动了几个实例？否则，您可以杀死不需要的实例并重新启动 esb。ps -aux |grep wso2

# java - 比较两个整数的值

> ID：10285573
> 
> 赞同：0
> 
> 时间：2012-04-23T17:48:52.323
> 
> 标签：java, arrays, comparison, integer

我想比较两个整数类型数组的值。当我比较它们的确切值时，我得到了错误的答案，而当我将它们与 Arrays.equals 进行比较时，我得到了正确的答案：

```
 Integer a[]=new Integer[2];
    Integer b[]=new Integer[2];
    a[0]=138;
    a[1]=0;
    b[0]=138;
    b[1]=0;
    boolean c;
    c=a[0]==b[0];//c is false
    c=Integer.valueOf(a[0])==Integer.valueOf(b[0]);//c is false
    c=Arrays.equals(a, b);//c is true 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T17:52:47.913

您正在寻找[`intValue`](http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html#intValue%28%29)，而不是`Integer.valueOf`（尽管很容易看出您如何使他们感到困惑！）：

```
c = a[0].intValue() == b[0].intValue(); 
```

Java 具有原始类型（`int`、`byte`、`double`等）以及与它们相对应的引用类型（对象），用于您需要对象的情况。您的代码所做`a[0] = 138;`的是将原始值 138 自动装箱到`Integer`实例中。

`intValue`返回实例`int`包含的原语。用于获取实例（从 an或 a  - 在您的情况下，它将通过自动取消装箱您的参考来使用）。`Integer``Integer.valueOf``Integer``int``String``valueOf(int)``Integer`

你也可以这样做：

```
c = (int)a[0] == (int)b[0]; 
```

...这将触发自动拆箱。

[规范](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.7)中有关装箱（包括自动装箱和拆箱）的更多信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T17:52:12.200

您正在代码中进行隐式类型转换（自动装箱）。

该行：

```
a[0]=138; 
```

实际上翻译为：

```
a[0] = Integer.valueOf(138); 
```

创建一个整数的实例。问题是此方法缓存从 -128 到 127[的整数（整数缓存有多大？](https://stackoverflow.com/questions/15052216/how-large-is-the-integer-cache)）并为高于 127 的值创建新实例，因此 == 比较返回 false。

```
/**
 * Returns an {@code Integer} instance representing the specified
 * {@code int} value.  If a new {@code Integer} instance is not
 * required, this method should generally be used in preference to
 * the constructor {@link #Integer(int)}, as this method is likely
 * to yield significantly better space and time performance by
 * caching frequently requested values.
 *
 * This method will always cache values in the range -128 to 127,
 * inclusive, and may cache other values outside of this range.
 *
 * @param  i an {@code int} value.
 * @return an {@code Integer} instance representing {@code i}.
 * @since  1.5
 */
public static Integer valueOf(int i) {
    if (i >= IntegerCache.low && i <= IntegerCache.high)
        return IntegerCache.cache[i + (-IntegerCache.low)];
    return new Integer(i);
} 
```

注意 a[0] 的实际类型是整数，所以你可以写

```
c=a[0].equals(b[0]); 
```

这将返回true。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T17:53:34.837

由于数组，我认为内部值不会自动为您拆箱。如果你有一个`int[]`而不是一个，这可能会起作用`Integer[]`

# blackberry - 退出黑莓浏览器的代码

> ID：10285575
> 
> 赞同：0
> 
> 时间：2012-04-23T17:49:02.937
> 
> 标签：blackberry, browser

任何人都可以帮助我退出浏览器的代码吗？我知道如何调用浏览器：

```
String url = ("http://ww.google.com/");

         BrowserSession BS = Browser.getDefaultSession(); //A BrowserSession is created
                BS.displayPage(url); 
```

现在如何关闭浏览器？我一直在寻找任何地方，但找不到任何关闭浏览器的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T05:28:43.657

如果您在设备上按“END”键，浏览器将关闭。但是多任务功能正在进行中。所以按设备上的“ESCAPE”键。

或者

使用以下代码：

```
public boolean keyDown(int keycode, int time)
{
    switch(Keypad.key(keycode))
    {
        case Keypad.KEY_END:
            System.exit(0);
            break;
        case Keypad.KEY_ESCAPE:
            System.exit(0);
            break;
    }
    return super.keyDown(keycode, time);
} 
```

# java - 在 MVC 架构中公开 Java 组件（例如 JButton）的最佳方式是什么？

> ID：10285582
> 
> 赞同：3
> 
> 时间：2012-04-23T17:49:12.620
> 
> 标签：java, swing, model-view-controller, private, public

我目前正在用 Java 编写一个 Blackjack 应用程序，它需要用 MVC 架构编写。我的所有模型、视图和控制器都已完全编码，并且一切正常。但是，我想知道将侦听器附加到组件的最佳方式是什么（例如，JButton）。

我当前的设计将视图中需要侦听器的所有组件声明为 public final。然后它将视图传递给控制器​​。从那里，控制器可以完全控制访问组件并添加动作侦听器。代码示例：

```
public class View extends JFrame {
    public final JButton myBtn1 = new JButton("Button 1");
    public final JButton myBtn2 = new JButton("Button 2");

    public View() {
        //constructor code here....
    }
}

public class Controller {
    private Model myModel;
    private View myView;

    public Controller(Model m, View v) {
        myModel = m;
        myView = v;

        //now add listeners to components...

        myView.myBtn1.addActionListener(new MyActionListener1());
        myView.myBtn2.addActionListener(new MyActionListener2());
    }
} 
```

但是，我的一个朋友已经将他所有的 JButton 声明为私有范围，然后在视图中创建了公共方法以将动作侦听器添加到各自的组件中。对我来说，这似乎是浪费时间，只会添加不必要的代码。代码示例：

```
public class View extends JFrame {
    private JButton myBtn1 = new JButton("Button 1");
    private JButton myBtn2 = new JButton("Button 2");

    public View() {
        //constructor code here....
    }

    public void myBtn1AddActionListener(ActionListener a) {
        myBtn1.addActionListener(a);
    }

    public void myBtn2AddActionListener(ActionListener a) {
        myBtn2.addActionListener(a);
    }

    //etc etc...
}

public class Controller {
    private Model myModel;
    private View myView;

    public Controller(Model m, View v) {
        myModel = m;
        myView = v;

        //now add listeners to components...

        myView.myBtn1AddActionListener(new MyActionListener1());
        myView.myBtn2AddActionListener(new MyActionListener2());
    }
} 
```

那么，鉴于上述两种情况，哪种方法更好呢？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T18:16:02.180

> 我当前的设计将视图中需要侦听器的所有组件声明为 public final。然后它将视图传递给控制器​​。从那里，控制器可以完全控制访问组件并添加动作侦听器。代码示例：

不，不要不必要地公开字段——你不应该为了 MVC 而牺牲封装。出于上述原因，您不应该公开组件。而是提供控件可以调用的视图公共方法，或者通过模型的侦听器让视图更改状态。将控件传递给视图，将视图传递给控件，​​所有交互都应该通过公共方法，而不是通过暴露组件或字段。

我已经解决了这个问题的一种方法，我并不是说这是最好的或规范的方法是将 Control 的实例传递给 View 并为我的侦听器使用匿名内部类，并让这些类调用控制方法。例如，

```
// inside of view
exitButton.addActionListener(new ActionListener() {
   public void actionPerformed(ActionEvent evt) {
      if (control != null) {
         control.exitAction();
      }
   }
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T18:20:59.303

注意：这个答案是我个人的看法。我仍然需要找到关于编写 Swing UI 并将其与业务逻辑联系起来的“最佳/最推荐”方式的体面文献。但在我发现这一点之前，我会使用常识和个人经验。

我想说这两者都不是实现这一点的正确方法。在 MVC 中，视图只是您向用户提供视觉信息的部分。但是，`ActionListener`当您按下按钮时触发的代码是属于控制器的代码，因为它很可能是业务逻辑（*这是我根据您的代码片段做出的假设。如果您的按钮只是执行 UI 操作，例如启用另一个组件，动作监听器应该完全包含在视图中*）。

所以我会在控制器中公开这些方法，例如，如果你目前有一个`ActionListener`类似的

```
public void actionPerformed( ActionEvent e ){
  doSomeStuff( UI info, event info );
} 
```

`UI info`从视图获得的信息和从事件获得的信息在哪里`event info`，我将介绍控制器上的公共方法

```
public void doSomeStuff( UI info, event info ) 
```

并从视图中调用该方法。这有两个主要好处：

1.  只有从视图到控制器的依赖关系，而不是从控制器到视图的依赖关系。如果控制器包含业务逻辑，那么您不太可能希望重用该代码以获得更多 SwingUI。这里不需要依赖 Swing 类。一个例子可以是单元测试。如果您的控制器不依赖于 UI，您可以轻松地测试应用程序的控制器模型部分，并使用 API 遵循与通过 UI 调用这些调用时相同的代码路径。
2.  您可以完全调整您的 UI，并决定将按钮替换为另一个您无法附加的组件，`ActionListener`而无需重写您的控制器和视图。

*编辑*

虽然我认为我帖子的上述部分仍然有效，但我必须承认，在阅读了垃圾神回答中提到的[维基百科 MVC 页面](http://en.wikipedia.org/wiki/Model-view-controller)（他在其中一个评论中提到）之后，以上只是对 MVC 模式的一种解释和如何在 Swing 应用程序中实现这一点。

查看那个 Wiki 页面，它将 MVC 中的三个组件定义为（总结）：

*   *模型*：管理应用程序域的行为和数据
*   *View*：将模型渲染成适合交互的形式，通常是用户界面元素
*   *控制器*：接收用户输入并通过调用模型对象来发起响应

我的解释/意见/首选方式是拥有一个模型和一个控制器，如果需要多个视图（或例如在测试零视图中）。控制器不直接接收用户输入（这相当于让它在视图上注册侦听器），但提供 API 挂钩来传递用户输入。这提供了一种可以处理用户输入的“抽象控制器”，但视图仍然需要将真实的用户输入事件转换为控制器可以理解的事件/信息。所以这意味着我可以轻松地创建 MVC 的测试“视图”端以及真正的“视图”端，而无需更改控制器或模型中的任何内容。

另一种解释是在控制器和视图之间建立更紧密的耦合（它们真正相互依赖）。这也意味着如果您决定从 Swing UI 视图切换到命令行视图，您可能还必须更改控制器。这是更好/更糟......我认为这是个人品味的问题。

在我的原始答案中唯一不太好的是我将业务逻辑定位在控制器部分，而 Wiki 页面明确指出它位于模型中。我可能对一些简单的 Ruby on Rails 实验感到困惑，其中模型只不过是一个数据访问层。我的错 ...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T18:20:32.437

虽然我个人喜欢你的风格，但你会发现你朋友的风格（或类似的）更“标准的 Java-like”。因此，在一个典型的编程团队中，它会更容易接受。它还具有（可能的）优势（和可能的陷阱），即在某些用例中可以用不同的按钮替换按钮。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T18:13:05.383

如果您的问题与架构 API（目前不是真正的 API）有关，那么我认为这两种方式都不好，而且在您没有真正的经验和清楚理解它之前不要使用任何模式，因为结果会不好。

# sql - 当我不想使用聚合时，是否应该使用 Pivot 将 SQL Server 2008 行值转换为列名？

> ID：10285584
> 
> 赞同：4
> 
> 时间：2012-04-23T17:49:18.630
> 
> 标签：sql, sql-server, sql-server-2008, tsql, pivot-without-aggregate

我正在尝试将表格数据处理成更具视觉吸引力的输出格式。这可能是问题的一部分，因为我想要的可能是用于单独的报告软件。

我有一张看起来像这样的桌子

```
teacher    student
----------------------
teacher1   Bob
teacher1   Jim
teacher2   Sam
teacher3   Bill
teacher3   John
teacher3   Eric 
```

我想要一个看起来像这样的表：

```
teacher1    teacher2    teacher3
---------------------------------
Bob         Sam          Bill
Jim         null         John
null        null         Eric 
```

因此，我尝试将所有教师姓名填充到一个变量中，然后使用 a`Pivot`但由于我必须选择一个聚合，所以我只能像这样得到`Max`or`Min`学生：

```
DECLARE @teacherList AS VARCHAR(max)

SELECT @teacherList = Stuff((SELECT DISTINCT',[' + teacher + ']'
                              FROM myTable
                              FOR xml path('')), 1, 1, '')

DECLARE @dynamic_pivot_query AS VARCHAR(max)

SET @dynamic_pivot_query = 'select' + @teacherList + 
'from 
(
    SELECT [teacher],[student]
    FROM [dbo].[myTable]
) as S
Pivot
(
    MIN([student])
    FOR teacher IN (' + @teacherList + ')
) as P
'
EXEC(@dynamic_pivot_query) 
```

结果是：

```
teacher1    teacher2    teacher3
---------------------------------
Bob         Sam          Bill 
```

假设如下：

1.  # 教师及其姓名未知（变量）
2.  每位教师的学生人数是未知的，并且可能因每位教师而异

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:54:34.100

不。

SQL Server requires static typing. There is no way to create a dynamic number of columns or dynamic column types (except for sql_variant).

Therefore your dynamic SQL solution is the only possible choice.

Don't let min/max confuse you: There will always be exactly 0 or 1 item per aggregation. The syntax requires an aggregate for theoretical correctness, but if (teacher, student) is unique the aggregate is doing nothing. It does no harm and it does not alter the results.

The approach is right just the way it is. Actually, I am working on the same type of code right now in this minute (which is funny).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T18:27:56.537

You can use `row_number` to get the result you want.

```
SET @dynamic_pivot_query = 'select ' + @teacherList + 
'from 
(
    SELECT [teacher],[student], row_number() over(partition by teacher order by student) as rn
    FROM [dbo].[myTable]
) as S
Pivot
(
    MIN([student])
    FOR teacher IN (' + @teacherList + ')
) as P
' 
```

**Update:**
To remove the SQL Injection vulnerability you should use `quotename` to properly quote your field list.

```
SELECT @teacherList = Stuff((SELECT DISTINCT',' + quotename(teacher)
                              FROM myTable
                              FOR xml path('')), 1, 1, '') 
```

# c# - 给定actionName和controllerName后Ajax.BeginForm不输出表单动作

> ID：10285585
> 
> 赞同：2
> 
> 时间：2012-04-23T17:49:19.973
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

非常标准的代码

```
 using (Ajax.BeginForm("Search", "Subscriber", null, 
                        new AjaxOptions 
                                 { 
                                  OnBegin   = "ajaxBegin", 
                                  OnFailure = "ajaxFailure", 
                                  OnSuccess = "ajaxSuccess" 
                                 },
                                 new{id = "ajax1121"})
                       {
                       } 
```

它的输出`<form action="" ...>` 动作是空的！！我尝试通过删除 ajaxoptions 等来更改另一个重载的代码，没有用

最令人惊奇的是，相同的代码可以在另一个领域工作。我什至尝试将文件从该区域复制`_ViewStart.cshtml`到`Web.config`问题区域，但仍然无法正常工作。该区域有问题名称`Mail`

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T17:59:01.693

是的，没有客户端。而不是放入您的控制器名称，放入 Route 对象

```
using (Ajax.BeginForm("Search", new { Controller = "Subscriber", area = "area name here"}, null, new AjaxOptions { OnBegin = "ajaxBegin", OnFailure = "ajaxFailure", OnSuccess = "ajaxSuccess" },new{id = "ajax1121"}){
} 
```

# knockout.js - KnockoutJS - 行和列计算

> ID：10285588
> 
> 赞同：1
> 
> 时间：2012-04-23T17:49:30.190
> 
> 标签：knockout.js

这个问题来自我最初的第一个问题“[嵌套数据，加载儿童](https://stackoverflow.com/questions/10196593/knockoutjs-nested-data-loading-children)”。

我有一个表格，其中填充了来自 JSON 的数据，其中包含嵌套对象（请参阅颜色编码）。该表包含每个可编辑的对象一行。这称为“分配”行。

这些值由 JSON 对象填充（“Values”：{“n”：4、“n2”：2 等）。

首先，我想显示每个可编辑行的总数。随着行内的值更新，总更新。这背后的用例是我想将原始总数（Allocation.Total）与可观察到的总数进行比较，因此我可以更改控件单元格上的 css 类以指示数据是否已更改。

如下图所示；（黄色表示用户更改）

[http://i.stack.imgur.com/XQpLp.jpg](https://i.stack.imgur.com/XQpLp.jpg)

问题的第二部分是处理列总数。上面的问题让我有点头疼，但这个问题让我大吃一惊。因此，我将在那个问题上睡觉，然后在问题变得更清晰时更新问题。

使用简化的数据模型会产生一种复杂情况。通过说一切都是同一类型的对象，（船员）用于分配的词需要在节点有孩子时改变。如果节点有子“分配”应该称为指南。

[此处的简化代码示例...](http://jsfiddle.net/8k6pj/10/)

使用列部分更新... Allocated.Total 是分配的运行总计。这里的区别是这个总数是沿着表格的列计算的，而不是单行。这甚至可能吗？我的心开始有些融化了。

**更新 - 4 月 26 日**

对于列总计，尽管可以通过对 node1、node2、node3 进行硬编码来解决此问题。我曾希望避免这种情况，因为这些节点会根据用户/请求而变化（例如，它并不总是 node1、node2、node3）。我已经在 HTML 模板中解决了这个问题，因为可以在服务器端找到这些信息，从而使我能够交付具有正确绑定的页面。

我可以对 JavaScript 使用相同的方法，但是当我们从 API 加载数据时，必须可以动态获取此信息，然后 JavaScript 才能保持良好和干净。我一直在研究如何迭代（键、对）值，因此 node1、node2、node3 位可以变成动态的。然而，这是我陷入困境的地方。

第二部分，它变得非常复杂。总计是我所追求的一部分，但我还需要每个列的总计（星期一 - 早餐，星期一 - 午餐，星期一 - 晚餐）。这从最深的节点级联到最顶部。

救赎也是如此。所以一个人可以兑换一张票，这会一直反映到父节点。作为喜欢 XPaths 的人，这将是祖先或自我::Crew。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T16:58:51.737

好的。这是您的总计算量。

```
self.totalAllocation = ko.computed(function() {
            var values = self.Allocation.Values;
            return Number(values.node1()) + 
                   Number(values.node2()) + 
                   Number(values.node3());
}) 
```

注意节点周围的括号。这表明这些已更改为淘汰赛可观测值。在您当前的代码中，它们只是 json 值。Non-observables 可以绑定到/从敲除值/文本绑定，但是当它们的值发生变化时它们不会通知其他人。如果 totalAllocation 使用简单的 json 值，当它们通过值绑定发生更改时，它不会自动重新计算。

我更新了您的示例以使用映射插件。这将自动遍历您的所有属性并使它们成为可观察的。

分配标签是一个简单的标签。这可以通过计算和文本绑定来实现。

```
self.allocLabel = ko.computed(function() {
    return self.HasChildren() ? "Guide" : "Allocation";            
});

<th data-bind="text: allocLabel">Allocation</th> 
```

我对最后一部分并不完全清楚。似乎您希望 Allocated.Total 将其所有子分配相加。这包括兑换价值吗？它应该包括它自己的分配总数吗？无论答案是什么，方法都是再次使用计算的 observable。

就像是。

```
self.grandTotal = ko.computed(function() {
    var result = 0;              
    for (var i = 0; i < self.Crews().length; i += 1) {
        result += self.Crews()[i].totalAllocation();
    }   
    return result;
}); 
```

你可以看到我只是遍历了 Crews 数组并对每个孩子的 totalAllocation 求和。如果您更新行分配编号，则会更新行总计和列总计。

[http://jsfiddle.net/madcapnmckay/CGBZe/](http://jsfiddle.net/madcapnmckay/CGBZe/)

**编辑**

如评论中所述。动态总计不应成为问题（未经测试）。

```
self.totalAllocation = ko.computed(function() {
     var values = self.Allocation.Values;
     var total = 0;
     for (var prop in values) { 
         total += Number(ko.utils.unwrapObservable(values[prop]));
     }
     return total;
}) 
```

希望这可以帮助。

# android - 在 Android 中，如何启动设备默认幻灯片活动？

> ID：10285589
> 
> 赞同：0
> 
> 时间：2012-04-23T17:49:30.867
> 
> 标签：android

我的要求如下，

1.  使用相机活动在外部存储卡中捕获图像和疼痛。
2.  显示捕获的图像以幻灯片形式显示。

这里我使用默认设备相机意图捕获图像，并成功存储在 sd 卡中，路径为“sdcard/slideshow”。现在我以幻灯片格式显示捕获的图像。我搜索了如何将这些图像加载到默认（构建幻灯片中的设备）幻灯片我不会得到更好的结果。任何人都知道如何实现这一目标。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T19:40:08.280

Android 中没有“构建幻灯片中的设备”。欢迎大家找一些第三方的“幻灯片”应用，集成，推荐给用户。或者，欢迎您将自己的“幻灯片”功能构建到您的应用程序中。

# actionscript-3 - 如何以静默方式预加载有声音的影片剪辑？

> ID：10285594
> 
> 赞同：2
> 
> 时间：2012-04-23T17:49:46.457
> 
> 标签：actionscript-3, flash, audio, movieclip, moviecliploader

我正在用 AS3 编写一个程序，并希望预加载将来需要的影片剪辑。不幸的是，我遇到了一个问题：电影剪辑在加载后立即播放声音（在我将它们添加到舞台之前）。

加载后立即停止影片剪辑*几乎*可以解决问题，但有时我仍然听到剪辑的开始。显然剪辑不会等待完成的事件处理程序在开始之前完成......？

```
// example of stopping a clip after it is loaded
// sound may still be heard for a moment
var loader: Loader = new Loader();
loader.addEventListener(Event.COMPLETE, function(e : *) : void {
    (loader.contentLoaderInfo.content as MovieClip).stop();
});
loader.load("a_loud_movie_clip.swf"); 
```

我还考虑过在加载剪辑时将所有内容静音，但这对程序的其余部分在何时可以播放声音方面造成了相当严重的限制。

这个问题有标准解决方案吗？我觉得这应该是一个非常普遍的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T18:10:34.763

您是否因为 SWF 位于 Web 服务器上而预加载？如果是这样，一种选择是从服务器预加载字节，而不使用[URLLoader](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLLoader.html)实际解释它们。[稍后，当您需要显示 MovieClip 时，使用Loader.loadBytes](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Loader.html#loadBytes%28%29)将预加载的字节 (URLLoader.data) 注入 Loader以实际实例化 MovieClip（并开始播放、声音和所有内容）。在实例化时可能会有一个小的延迟，但它会比没有预加载器的情况要少得多。

**根据您关于 loader.content 类型的问题：**

```
package
{
  import flash.display.Sprite;
  import flash.display.Loader;
  import flash.display.Bitmap;
  import flash.display.MovieClip;
  import flash.events.Event;
  import flash.utils.ByteArray;
  import flash.utils.getQualifiedClassName;

  public class tst extends Sprite
  {
    [Embed(source="any_image.png", mimeType="application/octet-stream")]
      private var img_bytes:Class;

    [Embed(source="any_swf.swf", mimeType="application/octet-stream")]
      private var swf_bytes:Class;

    public function tst():void
    {
      var b1:ByteArray = new img_bytes();
      var l1:Loader = new Loader();
      l1.contentLoaderInfo.addEventListener(Event.COMPLETE, function():void {
        trace(getQualifiedClassName(l1.content));
        trace(l1.content is Bitmap);
      });
      l1.loadBytes(b1);

      var b2:ByteArray = new swf_bytes();
      var l2:Loader = new Loader();
      l2.contentLoaderInfo.addEventListener(Event.COMPLETE, function():void {
        trace(getQualifiedClassName(l2.content));
        trace(l2.content is MovieClip);
      });
      l2.loadBytes(b2);

    }
  }
} 
```

（注意：这只是演示性代码 - 不要使用这样的函数闭包添加事件侦听器，这会导致内存泄漏。我也跳过了 URLLoader 并简单地嵌入以获取我的字节，但它们也是相同的字节方式）。

输出是：

```
flash.display::Bitmap
true
test_fla::MainTimeline
true 
```

但是，Bitmap 和 MovieClip 不是 loader.content 的唯一选项 - 加载从代码编译的 SWF 可以从 Sprite 派生，并且可能显示完全限定的类名，尽管正如 www0z0k 指出的那样，它们都是从 DisplayObject 派生的。虽然我相信任何来自 Flash Professional 的 SWF 输出总是来自 MovieClip。

**根据您的说明，Loader 字节始终是 MovieClip**

事实证明你是对的 - 一个加载常规旧图像的加载器，contentLoaderInfo.bytes 属性包含生成的 SWF 的字节，该 SWF 是一个简单的 MovieClip 包装器，图像作为子级。谁会猜到？！

```
 var l3:Loader = new Loader();
  l3.contentLoaderInfo.addEventListener(Event.COMPLETE, function():void {
    trace("- l3:");
    trace(getQualifiedClassName(l3.content));
    trace(l3.content is Bitmap);

    // This ByteArray is a SWF!
    var b3:ByteArray = l3.contentLoaderInfo.bytes;

    var l4:Loader = new Loader();
    l4.contentLoaderInfo.addEventListener(Event.COMPLETE, function():void {
      trace("- l4:");
      trace(getQualifiedClassName(l4.content));
      trace(l4.content is Bitmap);
      trace(Object(l4.content).getChildAt(0) is Bitmap);
    });
    l4.loadBytes(b3);
    addChild(l4);

  });
  l3.load(new URLRequest("any_image.png")); 
```

输出是：

```
- l3:
flash.display::Bitmap
true
- l4:
flash.display::MovieClip
false
true 
```

# c - 如何存储生成的格式化 C 字符串

> ID：10285596
> 
> 赞同：5
> 
> 时间：2012-04-23T17:49:52.263
> 
> 标签：c

这是一个新手问题。要创建格式化的 C 字符串，我使用`printf`，例如：

```
int n = 10;
printf("My number is %i", 10); 
```

但是，怎么样：

```
int n = 10
char *msg = "My number is %i", 10;
printf(msg); 
```

如何将生成的格式化字符串存储在变量中？我想要“我的号码是 10”。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-23T18:09:33.313

你想使用[`snprintf()`](http://linux.die.net/man/3/snprintf)：

```
int n = 10;
char bla[32];   // Use an array which is large enough 
snprintf(bla, sizeof(bla), "My number is %i", n); 
```

不要使用；**_** `sprintf()`它类似于`snprintf`但不执行任何缓冲区大小检查，因此它被认为是一个安全漏洞 - 当然，您可能总是分配足够的内存，但您可能会在某些时候忘记它，从而打开一个巨大的安全漏洞。

如果您希望该函数为您分配内存，则可以[`asprintf()`](http://linux.die.net/man/3/asprintf)改用：

```
int n = 10;
char *bla;
asprintf(&bla, "My number is %i", n);
// do something with bla
free(bla); // release the memory allocated by asprintf. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T17:52:01.967

您正在寻找[sprintf()](http://linux.die.net/man/3/sprintf)。

```
int ret;
int n=10;
char msg[50];  /* allocate some space for string */

/* Creates string like printf, but stores in msg */
ret = sprintf(msg,"My number is %i",n); 
printf(msg); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T17:51:13.573

使用`sprintf`：

```
int n=10
char *msg ="My number is %i";
char bla[32];   // Use an array which is large enough 
sprintf(bla, msg, n); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T17:53:48.970

您需要使用类似 sprintf [http://www.rohitab.com/discuss/topic/11505-sprintf-tutorial-in-c/](http://www.rohitab.com/discuss/topic/11505-sprintf-tutorial-in-c/)

它基本上是这样使用的（记得先 malloc 的 msg 变量）

```
char* msg;
int ret = sprintf(msg,"My number is %i",10);
printf(msg); 
```

# c# - 我有这个错误 CS1001 (C#) 和 CS1026 ..但不知道如何解决它

> ID：10285597
> 
> 赞同：2
> 
> 时间：2012-04-23T17:49:57.570
> 
> 标签：c#, razor, webmatrix

我收到了这个错误：

```
Compiler Error Message: CS1001: Identifier expected 
```

从这组代码中：

```
var reqcategory=""; 
        foreach(Request["category"] as reqcategory)
        {
        var sql5 = "SELECT Type.PreReq1, Type.PreReq2, (CASE WHEN (Type.PreReq1 IS NOT NULL) AND (PermitApp1.RPClass IS NULL) AND (PermitApp1.RPCategory IS NULL) THEN 1 ELSE 0 END) AS missing1, (CASE WHEN (Type.PreReq2 IS NOT NULL) AND (PermitApp2.RPClass IS NULL) AND (PermitApp2.RPCategory IS NULL) THEN 1 ELSE 0 END) AS missing2 FROM Type LEFT JOIN PermitApp AS PermitApp1 ON (Type.PreReq1=PermitApp1.RPClass) OR (Type.PreReq1=PermitApp1.RPCategory) AND ( PermitApp1.CDSID = @0 ) AND (PermitApp1.MDecision='1') LEFT JOIN PermitApp AS PermitApp2 ON (Type.PreReq2=PermitApp2.RPClass) OR (Type.PreReq2=PermitApp2.RPCategory) AND ( PermitApp2.CDSID = @1 ) AND (PermitApp2.MDecision='1') WHERE Type.PType = @2";
        var result = db.QuerySingle(sql5, myCDSID, myCDSID, reqcategory);
        var miss1 = result.missing1;
        var miss2 = result.missing2;
        } 
```

错误恰好落在这条线上：

```
foreach(Request["category"] as reqcategory) 
```

正如编译器所强调的那样。

谁能告诉我我的错误是什么？我应该如何声明一个标识符？

无论如何，什么是标识符？我似乎无法理解[http://msdn.microsoft.com/en-us/library/b839hwk4(VS.80).aspx中的解释](http://msdn.microsoft.com/en-us/library/b839hwk4(VS.80).aspx)

如果它的 int 我会使用`int.parse`正确但如果它是字符串...我该怎么做？

谢谢，谢谢

顺便说一句，我正在使用 webmatrix ...

在我使用 JaredPar 的解决方案之后……下一个错误来了……

```
CS1026: ) expected 
```

在这部分：

```
if (miss1 == '1' or miss2 == '1'){
            ModelState.AddError("missing", "You have not met the Pre-Requisites for "+ cat +" yet.")
            } else if (miss1 == '0' and miss2 == '0'){

        Session["license"] = Request["licence"];
        Session["from"] = Request["from"];
        Session["to"] = Request["to"];
        Session["group"] = Request["group"];
        Session["class1"] = Request["class1"];
        Session["category1"] = Request["category1"];
        Session["class"] = Request["class"];
        Session["category"] = Request["category"];
        Response.Redirect("~/Questionnaire");
        } 
```

在这条线上：

```
if (miss1 == '1' or miss2 == '1'){ 
```

谢谢......我不明白为什么我需要一个'（'......因为我已经关闭了所有它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T17:52:22.003

问题是你有`foreach`向后循环的结构。在 C# 中，它是`identifire in collection`.

```
foreach(var reqcategory in Request["category"]) { 
  ...
} 
```

请注意，即使这还不够，因为`Request[...]`返回`object`不是 C# 中的有效集合类型。您需要指定基础集合的类型或使用`dynamic`. 最安全的选择是投到`IEnumerable`

```
foreach(object reqcategory in (IEnumerable)Request["category"]) { 
  ...
} 
```

# python - 带有空白区域的 Matplotlib 轮廓

> ID：10285598
> 
> 赞同：2
> 
> 时间：2012-04-23T17:50:02.390
> 
> 标签：python, matplotlib, contour

我有一组数据，其中包括 x 和 y 坐标以及每个坐标的计算值。网格是不规则的，所以现在我一直在创建一个散点图并将值分隔到 bin 中以显示为轮廓，如下面链接中的 img 所示。 [http://i.stack.imgur.com/m7XHm.png](http://i.stack.imgur.com/m7XHm.png)

我想通过使用meshgrid然后对计算值进行插值来使用matplotlib中的imshow/contour功能来改进这个方法。我可以让它正常工作，但我最终遇到的问题是它丢失了没有数据的图像区域（现实生活中的空白）并将它们连接起来，如下面链接中的图像所示，用于相同的数据。 [http://i.stack.imgur.com/ZCRog.png](http://i.stack.imgur.com/ZCRog.png)

我试图找到最好的方法来做到这一点，但我没有找到任何帮助。有人有建议吗？

我想我需要在 meshgrid 阶段修改方法，但我不确定。我的代码如下

```
 x=nodalData[:,1] #array of x values from input file
    y=nodalData[:,2] #array of y values from input file

    #define the linear grid
    xi, yi = np.linspace(x.min(), x.max(), 100), np.linspace(y.min(), y.max(), 100) 
    xi, yi = np.meshgrid(xi, yi)

    z=Rres #array calculated elsewhere corresponding to x,y pair

    #interpolate
    zi = scipy.interpolate.griddata((x, y), z, (xi, yi), method='cubic')
    #plot    
    plt.imshow(zi, vmin=z.min(), vmax=z.max(), origin='lower', extent=[x.min(), x.max(), y.min(), y.max()]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T18:04:22.340

这是一个奇怪的问题，因为插值的目的是为数据不足的区域找到合理的估计值。我建议要么接受新图具有插值，因此如果“无数据”区域不再存在，则可以。或者，您可以`data voids`在进行插值后将其放入，例如使用您的第一个图作为掩码。

# bash - 如何从浏览器运行 bash 脚本？

> ID：10285600
> 
> 赞同：2
> 
> 时间：2012-04-23T17:50:11.220
> 
> 标签：bash, browser

我使用的是mac，通常我只是浏览......但偶尔我必须定期做一些任务。

是的，我可以保存一个“xxx.command”脚本并双击运行它。

但只是好奇，是否可以在浏览器（例如 Google Chrome 或 safari）内的某个地方创建快捷方式，以便单击 - 它会运行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T18:26:44.607

我觉得我应该提交我过于复杂的设置解决方案。

让一个支持 php/python 的网络浏览器以您的用户身份运行（除非它是用户独立的，否则这会容易得多）。提供 php/python 文件，这些文件只会打开一个 shell 并执行该命令。然后将书签存储在浏览器栏中。

```
<?PHP
`./myscript.sh`;
?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T18:19:38.993

这可能对您有用：

```
In conkeror use M-! (alt-!) for Chrome and Safari google shell addons 
```

# javascript - javascript 花哨的弹出窗口外部页面

> ID：10285601
> 
> 赞同：0
> 
> 时间：2012-04-23T17:50:12.573
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, lightbox

我想实现一个功能来打开一个弹出窗口。在这种情况下，对话框和灯箱的实现让我失败了。我页面上的链接和内容是通过 JS 和 PHP 创建的。它创建一个包含结果的表格，每个结果都有一个链接来查看所有详细信息。我无法实现 Jquery 插件，非常感谢这方面的任何帮助。这是我想从中打开一个新的精美弹出窗口的功能->不是浏览器页面或选项卡！所以应该更换windo.open。任何想法 ？？

```
 function showCourse(code)
{
    //alert(1)
    $.ajax({
        async:false,
        type: "POST",
        url: 'formPostsUser.php?reqtype=getCourse',
        data:'coursecode='+ code,
        success: function(data) 
        {
            window.open (url,"mywindow","menubar=1,resizable=1,width=350,height=250");
        }
    }); 
```

}

感谢您的任何提示亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:56:10.110

您不能确保它不会在选项卡中打开，但大多数浏览器可以识别具有宽度和高度属性的弹出窗口。如果目标“mywindow”已经存在，window.open 应该可以工作。您是否尝试过定位 _blank？

[编辑] 灯箱效果并不难实现。在您的成功函数中，只需创建一个空的 div 作为您的灯箱。然后在 div 中添加接收到的数据并使用效果显示您的灯箱。

```
success: function(data)
{   
    $('body').add('div#lightbox')
             .append(data)
             .animate({width: "350px", height:"250px"}, 1500);
} 
```

只需默认隐藏灯箱 div，然后使用 animate 函数或 jQuery 具有的任何其他效果更改其样式。而且您还必须将 div 设置为位于您想要的位置（绝对/静态）。

# c# - 对访问数据进行排序（日期时间格式错误）

> ID：10285604
> 
> 赞同：3
> 
> 时间：2012-04-23T17:50:14.480
> 
> 标签：c#, ms-access

**问题：**

我表中的某些字段的日期格式错误，它们是使用 C# 中的 .ToString() 方法格式化的，但我打错字并输入如下：**MM/dd/yyyy hh:mm/ss tt**

现在，如果您仔细观察，您会看到 MM/dd/yyyy hh:mm ----> ' **/** ' <--- ss

这应该是一个' **：** '

然后我在我的 c# 代码中修复它，（意味着一些值被格式化：**MM/dd/yyyy hh:mm:ss tt**）

问题是，我正在尝试按日期顺序从表中选择值（我不能只按 'Datefieldnamehere' 排序），因为某些字段的格式错误，带有 '/'

* * *

**我试过的：**

现在，我想既然时间总是在同一个地方（这对我来说很重要），我可以只取时间中数字的子字符串并对其进行排序；首先是**上午**，然后是**下午**

我可以按 MID([ColumnName],11,2) , MID([ColumnName],14,2), MID([ColumnName],16,2) 排序，因为无论分隔符如何，每个日期始终采用 M/ 格式dd/yyyy hh/mm/ss tt

所以我尝试了：

* * *

```
(
SELECT SN, StatusCode, Time, Mid(Time,14,2) + ':'+ Mid(Time,17,2) AS TTI
FROM OrderStatus
WHERE StatusCode = 'Finished' and Left(Time,10) = '4/20/2012'
AND Time LIKE '*AM'
ORDER BY Val(Mid([Time],11,2)) DESC
)
UNION ALL (
SELECT SN, StatusCode, Time, Mid(Time,14,2) + ':'+ Mid(Time,17,2) AS TTI
FROM OrderStatus
WHERE StatusCode = 'Finished' and Left(Time,10) = '4/20/2012'
AND Time LIKE '*PM'
ORDER BY Val(Mid([Time],11,2)) DESC
); 
```

* * *

只是想看看这是否会按小时订购，但它没有给我这个： ![呃](../Images/53f24dce0ccf6a9f6eef673d09366a28.png)

正如你所看到的（在小时字段中）01 然后 02 然后又回到 01...？

无论如何，这里有一个类似的问题[我](https://stackoverflow.com/questions/9411827/ordering-a-union-query-in-ms-access-sql)已经悬赏，如果你回答这个问题或那个问题，你将获得赏金，这对于其他情况也很有用

**编辑：** 我真正想回答的问题如何按字符串的子字符串排序；抱歉，我可以发誓我已经更改了这个，说我想按任何字符串/日期/任何我想知道如何执行以下操作的单个数字排序：Order By Val(Mid(ColumnName,StartPos,结束位置））

**注意：** Order By 给出了完全错误的结果。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T18:12:58.847

我的直觉是创建一个函数并在 Access UPDATE 语句中运行一次，以转换存储的值以匹配所需的格式。

下面的快速和肮脏功能可处理单个和两位数月份。它需要 Access 2000 或更高版本。

```
? FixTimeData("4/20/2012 01:34/09 PM")
4/20/2012 01:34:09 PM
? FixTimeData("12/20/2012 01:34/09 PM")
12/20/2012 01:34:09 PM

Public Function FixTimeData(ByVal pIn As String) As String
    Dim astrPieces() As String
    Dim strOut As String
    astrPieces = Split(pIn, " ")
    strOut = astrPieces(0) & " " & _
        Replace(astrPieces(1), "/", ":") & " " & _
        astrPieces(2)
    FixTimeData = strOut
End Function 
```

然后是类似于此的 UPDATE 语句...

```
UPDATE OrderStatus
SET time_field = FixTimeData(time_field)
WHERE time_field Like "*/*/*/*"; 
```

如果您在 ADO 而不是 DAO 下运行该语句，请在 WHERE 子句中更改为 ANSI 通配符。

```
WHERE time_field Like "%/%/%/%"; 
```

或者，如果您希望相同的语句在 ADO 或 DAO 下工作，则将 ANSI 通配符与 Alike 一起使用。

```
WHERE time_field ALike "%/%/%/%"; 
```

我用作`time_field`您使用的字段名称，`Time`因为`Time`是保留字。如果您无法更改字段名称，请在查询中用方括号将其括起来。

**编辑**：我的目的是修复数据，以便您可以根据`Right(time_field, 11)`

**Edit2**：要根据“上”分钟数字进行排序，请查看是否可以基于此方法进行构建，该方法假定您已修复存储的日期/时间字符串：

```
? Left(Format(Minute("4/23/2012 04:02:40 PM"), "00"), 1)
0
? Left(Format(Minute("4/23/2012 04:12:40 PM"), "00"), 1)
1
? Left(Format(Minute("4/23/2012 04:22:40 PM"), "00"), 1)
2 
```

尽管该`Minute()`函数接受一个字符串，但我可能会`CDate()`在将字符串提供给`Minute()`.

所以......如果我没有完全误入歧途......在这样的查询中尝试这种方法：

```
SELECT
    Left(Format(Minute(CDate(time_field)), "00"), 1) AS upper_minute,
    OrderStatus. *
FROM OrderStatus
ORDER BY 1; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T18:11:37.970

将日期归档为真实日期字段而不是字符串。使用 2 次更新将所有值迁移到新字段 - 一个选择具有旧格式的所有行，另一个选择新格式。删除日期字符串列并享受正确键入的数据。

如果您真的想将其保留为字符串，请至少确保使用对排序/本地化安全的标准 ISO8601 格式（大约 YYYY-MM-DDTHH:MM.ssss）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T19:05:13.633

我没有要测试的表格，但是我想给出我的想法。
我将使用 Left、Mid 和 Right 函数以及 CDate 和 CInt 函数。
我将得到时间字段的最左边部分（16 个字节），为秒和 PM/AM 指示符添加一个“:00”。可以使用 CDate 将此字符串转换为日期。
然后我将获取秒部分并将它们转换为整数。
现在可以在不使用 UNION 的情况下对第一部分 (TTI) 和第二部分 (TTS) 进行排序。
但是有一个问题，有些日期包含只有 1 个字符的月份，（es：4 月 4 日 vs 12 月 12 日）幸运的是，我们可以使用 IIF 运算符为中、右和左选择正确的数字。

编辑：

```
SELECT 
SN, StatusCode, Time, 
IIF(Len(Time) = 22, Left(Time,16) + ':00' + Right(Time,2), Left(Time,15) + ':00' + Right(Time,2)) AS TTI, 
IIF(Len(Time) = 22, Mid(Time, 18,2), Mid(Time, 17,2)) as TTS
FROM OrderStatus 
WHERE StatusCode = 'Finished' and Left(Time,10) = '4/20/2012' 
ORDER BY CDate(IIf(Len([Time])=22,Left([Time],16)+ ':00 ' + Right([Time],2),Left([Time],15)+ ':00 ' + Right([Time],2))) DESC , 
         CInt(IIf(Len([Time])=22,CInt(Mid([Time],18,2)),CInt(Mid([Time],17,2)))) DESC; 
```

# php - hasMany 遇到问题并找到

> ID：10285605
> 
> 赞同：1
> 
> 时间：2012-04-23T17:50:16.413
> 
> 标签：php, cakephp, find

我正在使用 CakePHP 2.0 大约一个月，今天我发现 find() 上的 hasMany 关系存在一些问题。

模型 Usuario（用户）的关系如下：

```
$this->Usuario->bindModel(array(
'hasMany' => array(
    'CambioCorreo' => array(
        'className' => 'CambioCorreo',
        'foreignKey' => 'id_usuario',
    ),
    'Llave' => array(
        'className' => 'Llave',
        'foreignKey' => 'id_usuario',
    )))); 
```

但是当我尝试使用这个发现时：

```
$u = $this->Usuario->find('all',array('conditions' => array('Llave.llave' => $llave,'Llave.id_tipo_llave' => 3,'Llave.fecha_creacion = CambioCorreo.fecha'))); 
```

， 我懂了：

> 错误：SQLSTATE [42S22]：找不到列：1054 'where 子句'中的未知列'Llave.llave'

奇怪的是，在做 hasMany 关系之前，我做了一个 hasOne 作为一个错误，它工作得很好。但是现在，我将bindModel从“hasOne”改为“hasMany”，出现SQL列错误。

有谁知道我在哪里犯错？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T18:02:26.550

hasMany 关系不是在同一个 SQL 语句中左连接的，因此您不能在同一个语句中对它们使用条件。HABTM 也是如此。

但是，您可以向为 Usuario 搜索拉取的 hasMany 项目添加条件。

```
$this->Usuario->find('all', array(
  'contain' => array(
    'Llave' => array(
      'conditions' => array(
        'Llave.llave' => $llave
      )
     )
   )
)); 
```

这将找到所有 Usuario 记录并在其中引入所有 Llave 记录`llave => $llave`。

过程是这样的：Cake 创建一条 SQL 语句来查找所有 Usuario 记录，然后为每个 Usuario 记录单独的 SQL 语句以拉取它们各自的 Llave 记录，条件如上所述。然后它将它们连接到一个数组中。

要根据 Llave 的条件查找 Usuario 记录，您需要绑定一个 hasOne 关系以便您可以使用条件进行过滤，或者首先搜索 Llave 记录并包含它们的 Usuario 记录，例如：

```
$this->Usuario->Llave->find('all', array(
  'conditions' => array(
    'Llave.llave' => $llave
  ),
  'contain' => array(
    'Usuario'
  )
)); 
```

这将搜索 Llave 记录，然后加入各自的用户。但是，您最终可能会得到重复的 Usuario 记录，因为它们可以有多个 Llave。

# arrays - 如何观察 Ember.Array 中的嵌套属性

> ID：10285606
> 
> 赞同：3
> 
> 时间：2012-04-23T17:50:17.167
> 
> 标签：arrays, ember.js, observable

假设我有一个模型`Stock`，它有几个`StockPartition`（它的一个名为 的属性`partitions`，它的一个数组）。

该`Stock`模型有一个属性，该属性`usedAmount`应在所有`partition.amount`更改时更改，当然，在添加/删除分区时也会更新。

例子 ：

```
stock.get('usedAmount') -> 0
stock.get('partitions') -> [Class, Class, Class]
stock.get('partitions')[0].set('amount', 12)
stock.get('usedAmount') -> I want here to return 12
stock.get('partitions')[1].set('amount', 12)
stock.get('usedAmount') -> I want here 24 
```

怎么可能`Stock`观察到每一个`partitions.amount`？我可以编写一个`addPartition`如下所示的函数：

```
addPartition: function(partition) {
  partition.addObserver('amount', function() {
    this.get('owner').notifyPropertyChange('usedAmount');
  });
} 
```

但我希望有更好的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T18:23:10.490

我会使用强大的计算属性。您还可以使用 `Ember.Enumerable`'s 上提供的有用方法，请参阅[http://jsfiddle.net/pangratz666/BxyY4/](http://jsfiddle.net/pangratz666/BxyY4/)：

```
App.partitionsController = Ember.ArrayProxy.create({
    content: [],

    addPartition: function(amount) {
        this.pushObject(Ember.Object.create({
            amount: amount
        }));
    },

    usedAmount: function() {
        // reduce by adding all 'amount' values, start with initial value 0
        return this.reduce(function(previousValue, item) {
            return previousValue + item.get('amount');
        }, 0);
    }.property('@each.amount')
}); 
```

`reduce`文档中记录了这[一点](http://docs.emberjs.com/#doc=Ember.Enumerable&method=.reduce&src=false)。

# c# - 非阻塞 io 函数而不是 cin.get()

> ID：10285608
> 
> 赞同：3
> 
> 时间：2012-04-23T17:50:19.690
> 
> 标签：c#, c++, io, nonblocking

我有一个 c++ 控制台应用程序，它可以选择通过按任意键（通过使用 kbhit() 实现）来中断，在这种情况下，它会打印它所做的事情并退出（或者可以留下来完成工作（一些记录）并且仍然打印反馈）。我正在为该控制台应用程序制作 ac# gui 应用程序（我正在从 c# 表单调用 exe 文件），而不是按键盘上的任何键，我使用的是发送 Environment.NewLine （或“\n ") 到重定向的输入，在 c++ 应用程序中，我现在必须使用与 kbhit() 不同的东西才能使其工作。我尝试使用 cin.get()，例如：

```
if (kbhit() || (cin.get() > 0))  
    stop_recording=true; 
```

但是 cin.get() 是一个阻塞函数，如果我希望控制台应用程序运行到最后，它不会在不按停止按钮的情况下关闭。是否有任何类似于 cin.get() 的函数实际上没有阻塞，或者可能是从 c# 向我的控制台应用程序进程发送“任何密钥”的不同方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T13:03:40.137

使用`_getch()`insted of `cin.get()`。它是一个阻塞命令，但通过执行它只会`if ( _kbhit() )` 立即返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T15:54:06.260

您可以尝试将[Ctrl+C 发送到控制台进程](https://stackoverflow.com/questions/283128/how-do-i-send-ctrlc-to-a-process-in-c)以触发其中断行为。

如果需要继续，您可以检查命名同步对象 - 即在您的 UI 进程中创建名为 Mutex/Semaphore（具有随机名称）并将此名称传递给控制台进程。控制台进程将不时检查一次（而不是 kbhit）是否仍然可以获取 Mutex/Semaphore 并在不再可以时停止。

@Komyg 建议的另一个选项是专用一个线程来读取控制台并检查特定输入是否显示在那里。

如果您希望程序之间进行更多通信，请搜索 IPC“进程间通信”以查看更多方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T10:10:11.520

在这里找到了一个非常简单的答案： [Simple example of threading in C++](https://stackoverflow.com/questions/266168/simple-example-of-threading-in-c)。归功于 Edward Kmett。
我碰巧在 c++ 应用程序中使用了 boost 库，所以我也可以使用 boost 线程实现。这很简单，这就是我的线程函数的样子：

```
bool stopped=false;

void inputSent() //
{  
    if (kbhit() || (cin.get() > 0))  
        stopped=true;  

} 
```

后来在 main.cpp 中：

```
boost::thread stoppedThread = boost::thread(inputSent); 
```

之后我只检查是否停止==true，并且我没有使用stoppedThread.join（我不知道这是否是错误的，因为我不知道程序何时结束，如果我要离开僵尸线程后面...也许有人可以启发我）。

# wpf - IsDropDownOpen 在 WPF MVVM 中的 DataGrid DataTemplate ComboBox 中

> ID：10285609
> 
> 赞同：2
> 
> 时间：2012-04-23T17:50:22.920
> 
> 标签：wpf, xaml, mvvm, datagrid, combobox

我`DataGrid`在 DataTemplate 中有一个 ComboBox

```
<DataGridTemplateColumn Header="Stock Name" Width="290">
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding StockName}"/>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
    <DataGridTemplateColumn.CellEditingTemplate>
        <DataTemplate>
            <ComboBox Width="290" Name="cmbStock" ItemsSource="{Binding Path=Stocks}" FocusManager.FocusedElement="{Binding RelativeSource={RelativeSource Self}}" ></ComboBox>
        </DataTemplate>
    </DataGridTemplateColumn.CellEditingTemplate>
</DataGridTemplateColumn> 
```

当我使用 Tab 到达此 DataGridCell 时，我希望 ComboBox 为 DropDownOpen 这包括在我到达它时使 DataGrid Cell 处于编辑模式。

我正在使用 WPF MVVM

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T18:17:37.730

我认为您需要做的是强制数据网格进入“单击或选项卡”编辑模式。基本上，当单元格聚焦时，会强制网格将 CellTemplate 切换为 CellEditingTemplate。代码是：

```
BeginEdit(); //dataGrid.BeginEdit() 
```

现在，如何以及在何处连接它取决于您想要做多少工作。您可以扩展 DataGrid 类并引入 DependencyProperty "SingleClickEdit" 或任何您想调用的名称。然后当监视器/预览键按下并在选项卡上选择单元格并强制它处于编辑模式。或者，如果您只需要该列，您可以监控：

```
<TextBlock Text="{Binding StockName}" 
           GotFocus="OnGotFocus" 
           PreviewKeyDown="OnPreviewKeyDown"
  ....., or something like that 
```

然后在 .cs 代码中，例如在 OnGotFocus() 中，调用 datagrid.BeginEdit()。

**编辑：（**根据下面的评论/对话）

*   将 SelectionChanged 处理程序添加到您的数据网格
*   将 IsDropDownOpen = true 添加到您的组合框

    ```
    <DataGrid x:Name="dataGrid" 
           SelectionChanged="dataGrid_SelectionChanged"
           ....>

    <ComboBox Width="290" Name="cmbStock" ItemsSource="{Binding Path=Stocks}" 
          ...
          IsDropDownOpen="True"></ComboBox>
    </DataTemplate> 
    ```

*   在.cs

    ```
    private void dataGrid_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        dataGrid.BeginEdit();
    } 
    ```

应该这样做，在我的测试中工作:)，基本上你是在选择时强制数据网格进入编辑模式，在你的编辑模式下，你得到了已经打开的组合框

# mysql - 在 Netbeans 中连接到 Sourceforge.net MySQL 数据库

> ID：10285612
> 
> 赞同：1
> 
> 时间：2012-04-23T17:50:36.893
> 
> 标签：mysql, netbeans, sourceforge

我正在尝试连接我托管在 Netbeans 中 Sourceforge.net 上的 MySQL 数据库。但是数据库连接测试失败。我已经按照 Sourceforge.net MySQL 管理面板中的说明输入了数据库设置，但它不起作用。Sourceforge 中描述的设置如下：

![在此处输入图像描述](../Images/a7049fad5e78b151e65c95883f77d14f.png)

这是我在 Netbeans 中尝试过的：

![在此处输入图像描述](../Images/ca6be9e753ed1ad4d1a684567840be93.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T22:09:28.293

您必须授予自己访问权限，请阅读[此文档](http://sourceforge.net/apps/trac/sourceforge/wiki/Direct%20MySQL%20access%20over%20the%20Internet)：

> 一旦通过管理界面授予访问权限，您就可以使用为您的项目提供的 MySQL 服务器，使用为您的项目提供的数据库帐户之一进行连接。
> 
> 例如，在授权自己访问后，您可以按如下方式连接到数据库（替换文档中的 USERNAME 和 LETTER）：
> 
> mysql -u 用户名 -h mysql-LETTER.sourceforge.net -P 4040 -p

通过阅读文档的方式，目的不是让应用程序始终如一地访问，实际上提供的访问权限是临时的。

> 对 Project 数据库服务器的访问通常受到防火墙保护。为了通过 Internet 提供这种直接访问，我们暂时（每次 4 小时）在我们的防火墙上打开一个洞，以允许您访问项目数据库服务器的流量。

# html - Html CSS：并排有两个块元素

> ID：10285614
> 
> 赞同：-1
> 
> 时间：2012-04-23T17:50:39.860
> 
> 标签：html, css

我一直在尝试并排放置两个 div。

这是它的 jsFiddle：http: [//jsfiddle.net/M4t9k/19/](http://jsfiddle.net/M4t9k/19/)

我希望标题字段是左列，它总是有 1 行，但它的宽度可以改变，所以我不能将它设置为固定值。

然后，图标 div 包含一堆图标（数量不定）。

这个想法是图标 div 用作标题列旁边的列，图标永远不会位于标题下方。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:53:57.680

据我了解，这可能是你想要的

检查这个[http://jsfiddle.net/M4t9k/23/](http://jsfiddle.net/M4t9k/23/)

或者

这个[http://jsfiddle.net/M4t9k/30/](http://jsfiddle.net/M4t9k/30/)

# android - 使用 Android 连接到 GoogleCalendar

> ID：10285617
> 
> 赞同：0
> 
> 时间：2012-04-23T17:50:46.877
> 
> 标签：android, authentication, httprequest, oauth-2.0, google-calendar-api

我目前正在尝试将我的 android 应用程序与 GoogleCalendar 中的一些日历连接起来。

但我对如何验证呼叫完全感到困惑。我明白我必须用 OAuth2.0 来做这件事

但是没有我可以正确遵循/理解的明确示例或教程。我尝试按照此处描述的以下步骤进行操作：

[https://developers.google.com/google-apps/calendar/auth](https://developers.google.com/google-apps/calendar/auth)

但我一直对可能非常基础的东西感到困惑。

我的问题是这个。任何人都可以帮助我理解以下步骤并提供一些示例代码吗？

第 1 步：请求 OAuth2.0 令牌。

第 2 步：验证 OAuth2.0 令牌并检索 accessToken

第 3 步：使用 accessToken 并实际执行 HTTPRequest 调用，这给了我我想要的 JSON。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:00:47.543

你的问题是最新的还是你已经解决了你的问题？

编辑：

这里有一些基本信息如何实现 GoogleCalendar：

1.创建一个类来处理日历：

```
public class MyCalendar
{
  private static final String   AUTH_TOKEN_TYPE = "cl";
  public static final String KEY = "YOUR_API_KEY";  //You can find below Simple API Access at GoogleApiConsole
  final HttpTransport   transport = AndroidHttp.newCompatibleTransport();
  final JsonFactory factory = new GsonFactory();
  GoogleAccountManager accountManager;
  String name;
  String token;
  public com.google.api.services.calendar.Calendar mycalendar;

  private HttpRequestInitializer initializer = new HttpRequestInitializer() 
  {
     public void initialize(HttpRequest request) throws IOException
     {           
        request.getHeaders().setAuthorization(GoogleHeaders.getGoogleLoginValue(authToken));
     }
  };

  public MyCalendar()
  {
  }
} 
```

1.  创建一个日历对象（我在 MyCalendar 的构造函数中执行此操作

    ```
    mycalendar = com.google.api.services.calendar.Calendar.builder(transport,jsonFactory)
                  .setApplicationName("CHOOSE_A_APPNAME")                      
                  .setHttpRequestInitializer(initializer)
                  .setJsonHttpRequestInitializer(new GoogleKeyInitializer(KEY))
                  .build();
    accountManager = new GoogleAccountManager(TimetableApplication.getInstance().getActivity());
    findGoogleAcc(); 
    ```

如果您想访问您的日历，初始化程序的初始化方法 [;-)] 将在稍后调用。

2.搜索用户手机所指的GoogleAccount

```
void findGoogleAcc()
{
    Account account = accountManager.getAccountByName(name);
    if(account == null)
    {
        //Handle wrong name, or if user connect more than one accounts to phone
    }
    if(token != null)
    {
        //you already got your token for user's account and these method is not necessary
    }
    accountManager.getAccountManager().getAuthToken(account, AUTH_TOKEN_TYPE, true, new AccountManagerCallback<Bundle>() {

        public void run(AccountManagerFuture<Bundle> future)
        {
            try
            {
                Bundle bundle = future.getResult();
                if(bundle.containsKey(AccountManager.KEY_INTENT))
                {
                    // Allow app to connect to googleaccount
                    Intent intent = bundle.getParcelable(AccountManager.KEY_INTENT);
                    intent.setFlags(intent.getFlags() & ~ Intent.FLAG_ACTIVITY_NEW_TASK);
                    activity.startActivityForResult(intent, 0);
                }
                else
                    if(bundle.containsKey(AccountManager.KEY_AUTHTOKEN))
                    {
                        this.authToken = authToken;
                        gotSmthFromCalendar();
                    }
            }
            catch(Exception e)
            {
            }
        }
    }, null);
} 
```

3.在方法上使用您的日历：

```
 void gotSmthFromCalendar()
     {
         //Here u can do whatever u want.
     } 
```

我认为在 gotSmthFromCalendar() 上，您应该使用 AsyncTask 来请求数据。例如你可以这样做：

```
 List<CalendarListEntry> calendarList = mycalendar.calendarList().list().execute().getItems();
   for(CalendarListEntry calendarEntry : calendarList)
   {
        String summary = calendarEntry.getSummary();
        String id = calendarEntry.getId();
        Log.v("Calendar","Found a calendar with summary : " + summary + " an id: " + id);
   } 
```

希望这些基础知识可以帮助您使用 v3。如果你需要额外的帮助，每次都问我！！

小木

# java - Google App Engine 是否允许第三方网络服务访问？

> ID：10285618
> 
> 赞同：1
> 
> 时间：2012-04-23T17:50:47.213
> 
> 标签：java, web-services, google-app-engine

我正在尝试在 GAE 中编写一个使用一些 3rd 方 Web 服务的 Java 应用程序，但是当我从 WSDL 文件生成客户端时，我收到以下错误 -

Google App Engine 的 Java 运行时环境不支持 java.rmi.Remote

是否有解决方法，或者在 GAE 上根本不可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T18:11:45.993

GAE 框架不支持 jva.rmi.Remote

urlfetch 是执行此操作的标准库。

[https://developers.google.com/appengine/docs/java/urlfetch/](https://developers.google.com/appengine/docs/java/urlfetch/)

# monitoring - CPU-Z / HWMonitor 等程序如何监控？

> ID：10285619
> 
> 赞同：4
> 
> 时间：2012-04-23T17:51:04.010
> 
> 标签：monitoring, cpu

所以这一直是困扰我一段时间的事情。
CPU-Z 等程序如何实际监控电压和频率等内容？我绝不是一个非常有经验的程序员，但是看起来很复杂的事情总是让我感兴趣。

我使用过的东西，例如 WMI，似乎提供了快照，并且不准确。CPU 频率不变，电压四舍五入到两位数（例如，从 1.1 到 1.199 的任何值都变为 1.1）。

我希望已经编写了某种驱动程序来授予较低级别的访问权限，但谷歌搜索似乎没有透露这些程序是如何工作的。

如果有人能启发我，并可能给出一个代码示例（如果不是太难的话），我将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:53:24.557

这很可能是针对 BIOS 或芯片组的一些非常低级的编程。您可能必须在 Intels 或 AMDs 网站上查找文档才能执行类似操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-09T11:18:41.490

电压可以通过 RDMSR 指令读取（索引 0x198），详细信息可以查看 64-ia-32-architectures-software-developer-manual。您可能需要库 winring0，Visual Studio 不支持 RDMSR 指令。您可以google winring0 下载库。核心电压=EBX[bit0-bit15]*(float)1/(2^12)。我试过了，但还没有得到正确的频率。 [64-ia-32-architectures-software-developer-manual](http://www.intel.cn/content/dam/www/public/us/en/documents/manuals/64-ia-32-architectures-software-developer-manual-325462.pdf)

# html - IE CSS 问题，子菜单导航不出现

> ID：10285620
> 
> 赞同：-1
> 
> 时间：2012-04-23T17:51:07.503
> 
> 标签：html, css

我在 IE 中的下拉导航有问题。网页链接如下。子菜单在 IE 中根本不出现，但在浏览器的其余部分中它工作正常。

[http://www.careerheartedspirit.com](http://www.careerheartedspirit.com)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T18:00:46.023

我可以看到的主要问题是由将下面的代码放在您的`DOCTYPE`. 它会导致 IE 进入**怪癖**模式而不是**标准**模式。如果有什么东西，甚至是评论，`DOCTYPE`那么 Internet Explorer 将触发 quirks 模式：

```
<style>
    .log a:hover {
        color:#434343;
    }
</style> 
```

移动该`<head>`部分内的代码以阻止 IE 进入怪癖模式。

# maven - Maven 程序集插件无法执行

> ID：10285621
> 
> 赞同：0
> 
> 时间：2012-04-23T17:51:07.617
> 
> 标签：maven

我在尝试“mvn package”后收到此消息。检索 google 收藏 jar 似乎存在问题，但我不确定这是否是唯一的问题。

```
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-assembly-plugin:2.3:single (make-assembly) on project recommender:
  Execution make-assembly of goal org.apache.maven.plugins:maven-assembly-plugin:2.3:single failed:
  Plugin org.apache.maven.plugins:maven-assembly-plugin:2.3 or one of its dependencies could not be resolved:
  Failed to collect dependencies for org.apache.maven.plugins:maven-assembly-plugin:jar:2.3 ():
  Failed to read artifact descriptor for com.google.collections:google-collections:jar:1.0:
  Could not transfer artifact com.google.collections:google-collections:pom:1.0 from/to central (http://repo1.maven.org/maven2): 
  Specified destination directory cannot be created: /Users/danquach/.m2/repository/com/google/collections/google-collections/1.0 -> [Help 1] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:57:26.970

原来的错误应该是本地问题：

```
Specified destination directory cannot be created:
/Users/danquach/.m2/repository/com/google/collections/google-collections/1.0 
```

*   你的驱动器满了吗？
*   你有这个路径的写权限吗？

您可以尝试再次创建`/Users/danquach/.m2/repository/com/google/collections`并调用 maven。

# c# - 使用对象类型在模块之间传递信息

> ID：10285624
> 
> 赞同：1
> 
> 时间：2012-04-23T17:51:16.887
> 
> 标签：c#, design-patterns, modularity

我们有一个模块化的 MVVM 应用程序。其中一个界面如下所示

```
public interface ILogger
{

    void ReportError(ErrorType type);
} 
```

ErrorType 类型如下所示

```
class ErrorType
{
  string Message;
  string Title;
  object Owner;
} 
```

注意类型**object**。实现 ILogger 接口的模块只需从中调用 GetString()，因为它只需要调用模块的名称。对象的使用对我来说似乎是个问题。我们正在开发一个松散耦合的应用程序，我们让任何对象在模块之间传递？

与可能导致拼写错误的字符串相比，justified as object 的使用更加灵活并保证提供类型名称。除了调用 GetString() 之外，接口的实现者也没有做任何事情。

我请求一些建议。在我看来，对象的使用就像模块不知道如何在它们之间进行识别。**使用这样的对象**是好的设计吗？

我想更多的是

```
 class ErrorType
 {
      string Message;
      string Title;
      string ModuleName;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T18:01:23.320

如果您使用的只是对象的名称，那么我建议在创建 ErrorType 时只使用反射来传递它，而不是存储整个对象。您的开发人员必须确保不使用硬编码值，因为如果您担心拼写错误/可维护性，这是允许的。*

但是，如果您出于任何其他原因需要该对象，那么您应该保留它。否则，它只是不需要的开销。

不过，只是我的两分钱。

*[这是一个 SO 问题，显示如何获取当前方法](https://stackoverflow.com/questions/2652460/c-sharp-how-to-get-the-name-of-the-current-method-from-code)，这里是如何获取当前模块：

```
this.GetType().Module.Name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T18:02:21.170

因为`string ModuleName`这就是您现在所需要的，只需使用它即可。它将迫使您公开最少数量的信息，其他模块将无法作弊并尝试根据`Owner`对象类型做出任何决定。

在实际代码中使用属性（最好在 IErrorType 接口上只读），因此很容易更改实现，即根据传入的对象计算 ModuleName。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T18:13:07.777

如果您尝试捕获堆栈信息（如模块名称），您应该真正考虑使用 Log4Net 或 NLog - 无需重新发明轮子。

如果您的所有图层都在 .Net 中，我看不出使用 Object 类型会给您带来任何问题——它是其他所有内容的基类。问题是您将如何处理（或其他人将如何处理）这些信息？它只有 .ToString、.Equals 和其他几个方法。您是否有驱动日志设计的非功能性需求？如果（还）不需要“所有者”，请不要包含它。

传递或不传递对象不一定会影响耦合；相反，它是一件事对另一件事的了解*程度。*所以不要添加你不需要的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T20:06:23.140

> 实现 ILogger 接口的模块只需从中调用 GetString() ，因为它只需要调用模块的名称

（小注：正确的方法名称是`ToString()`）

那么，你有一个关于*需要什么的**隐式*接口。不妨让它*显式*，并强制模块实现它：`ILogger`

 **```
interface INamed {
  string Name { get; }
} 
```

然后（注意我如何重命名`ErrorType`为`Error`；其他名称`ErrorMessage`也可以）：

```
class Error {
  string Title;
  string Message;
  INamed NamedModule;
} 
```

但是当然，拥有这么简单的界面，只是为了获得一个名字，可能有点过头了。你可以`string`按照你的提议使用：

```
class Error {
  string Title;
  string Message;
  string ModuleName;
} 
```

无论哪种方式都比 using 更好`Object.ToString()`，后者过于隐含并且不会传达其意图或强制您的*模块*覆盖它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-24T09:42:19.307

当我们只需要模块名称时，模块名称就可以了，但事实并非如此，在另一种情况下，需要一个 url 作为标识符，而另一种情况是 url 和模块名称，那么我们在这里做什么呢？

我不确定它是否只是所有者或模块名称，但我确实很欣赏使用 object.tostring 的隐含性质。

虽然我有一个是实际使用所有者对象的接口来识别调用者，例如 IDocument，它将 URL 和 Text 作为可能的值，然后日志服务的客户端将检查所有者是否属于 IDocument 类型并能够用它做更多事情。

肯定需要添加有关调用类的更多信息，而不仅仅是模块名称，有时甚至不需要。

也许类继承可以提供帮助。

```
Class Message
{
   string Title {get; set;}
   string Message {get; set;}
}

Class ModuleMessage: Message
{
   string ModuleName  {get; set;}
}

Class URLMessage: Message
{
   string URL {get; set;}
}

Class DocumentMessage: URLMessage
{
   string Text  {get; set;}
} 
```

等等

尽管这里的危险是你会因创建越来越多的类而忘乎所以，没有人知道他们应该使用哪个类。**

# php - 需要将 MySQL SUM() 查询结果中的结果另存为 PHP 变量

> ID：10285629
> 
> 赞同：2
> 
> 时间：2012-04-23T17:51:37.927
> 
> 标签：php, mysql, sum, echo

我需要回显我的 MySQL 查询的结果，查询有效。只需将头脑空白到如何计算出如何回应它的结果。

```
 $con = mysql_connect(DB_HOST, DB_USER, DB_PASS);
 if (!$con)
   {
   die('Could not connect: ' . mysql_error());
   }

 mysql_select_db(DB_NAME, $con);

 $result = mysql_query("SELECT SUM($user_nameid) FROM profits");

 I KNOW SOMETHING GOES HERE BUT WHAT?! ANY HELP?

  mysql_close($con); 
```

在此先感谢，非常感谢所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:18:47.653

不确定您对查询的了解。SUM() 适用于您正在查询的表中的特定字段。你很可能想要

```
SELECT count(*) FROM profits WHERE usernamefield='$username_id'; 
```

注意变量周围的引号。如果该变量包含非纯数字的任何内容，则必须引用它。您还必须注意任何 SQL 注入问题：

```
$username_id = $_POST['username_id'];
$safe_id = mysql_real_escape_string($username_id);
$result = mysql_query("SELECT count(*) FROM profits WHERE usernamefield='$safe_id'") or die(mysql_error();
$row = mysql_fetch_array($result);
$count = $row[0]; 
```

事情应该是这样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:53:48.610

你可以使用[`mysql_result`](http://php.net/mysql_result)

```
$sum = mysql_result($result, 0); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T17:54:50.993

```
 $con = mysql_connect(DB_HOST, DB_USER, DB_PASS);
     if (!$con)
       {
       die('Could not connect: ' . mysql_error());
       }

     mysql_select_db(DB_NAME, $con);

     $result = mysql_query("SELECT SUM($user_nameid) FROM profits");

   $total = reset(mysql_fetch_assoc($result));

//comment this next line if you don't want to output to the browser
    echo $total; 

      mysql_close($con); 
```

# c++ - Visual Studio 2010 中的外部库

> ID：10285633
> 
> 赞同：1
> 
> 时间：2012-04-23T17:51:52.847
> 
> 标签：c++, visual-studio, linker, libraries

我希望在项目中使用一些外部库：libpng 和 libvorbis。现在，在 Linux 上，我可以愉快地构建这些，只需将配置文件添加到 scons 以允许额外的包含/lib 路径，如果您想在系统包含路径之外构建它们。

但是，MSVS 2010 似乎有点挑剔：

*   我可以将这些库的发布版本的路径添加到用户属性页面上的 VC++ 目录中，但这不适用于静态链接（因为需要调试版本才能链接到调试配置）。
*   我可以在项目中添加绝对路径，但这意味着该项目不可移植。
*   我可以添加libpng目录（例如），然后放入`Debug\libpng.lib`链接器输入，但找不到符号。据推测，由于`\`.

我当前的解决方案是将所有需要的库复制到当前项目的解决方案目录中；我什至可以在那里硬链接它们，但这似乎很愚蠢。

我可以做些什么来保持我的项目可移植性，并在*每个配置*中引用绝对包含/lib 路径？

（例如，能够故意将路径放在 .suo 或 .user 文件中会很棒。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:04:10.453

如果要添加库的相对路径，请在它们前面加上“.\”以从基础项目目录开始；

```
".\Lib\Debug\libpng.lib" 
```

或“..\”来引用父目录。

```
"..\Lib\Debug\libpng.lib" 
```

请注意，如果您的库位于父目录的父目录中，那么您可以将“..\”引用链接在一起：

```
"..\..\Lib\Debug\libpng.lib" 
```

# android - 如何：片段内的gridview？

> ID：10285634
> 
> 赞同：5
> 
> 时间：2012-04-23T17:51:54.743
> 
> 标签：android, gridview, fragment

我想创建一个像 android market 一样的 gridview，我想用来自互联网数据库的图像填充它。它需要与 androidv4.support 一起使用，因为我想运行 2.2 到 4.0。

有人说，在pre-4.0中是不可能创建gridview的，是真的吗？

但是，它仅在我使用 use 时才有效`setListAdapter()`，但每行仅显示一个图像，例如列表视图，当我更改`gridview.setAdapter()`为时，它不再起作用。

这是我的尝试：

这是 ListFragment 类：

```
 public static class ArrayListFragment extends ListFragment implements OnScrollListener{

        ImageAdapter adapter = new ImageAdapter();

        @Override
        public void onActivityCreated(Bundle savedInstanceState) {
            super.onActivityCreated(savedInstanceState);

                LayoutInflater gridInflater = (LayoutInflater) getActivity().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
                View v = gridInflater.inflate(R.layout.imagelist, null);
                GridView gridView = (GridView) v.findViewById(R.id.list);

            ImageDownloader.Mode mode = ImageDownloader.Mode.CORRECT;
//            ImageAdapter imageAdapter = new ImageAdapter();
            adapter.getImageDownloader().setMode(mode);
            setListAdapter(adapter); 
//            gridView.setAdapter(adapter);
            getListView().setOnScrollListener(this);

        } 
```

这是 ImageAdapter 类：

```
 public class ImageAdapter extends BaseAdapter {

            private Context mContext;

        private final ImageDownloader imageDownloader = new ImageDownloader();

            public static int count = 10;

private final String[] URLS = {
        "http://lh5.ggpht.com/_mrb7w4gF8Ds/TCpetKSqM1I/AAAAAAAAD2c/Qef6Gsqf12Y/s144-c/_DSC4374%20copy.jpg",
        "http://lh5.ggpht.com/_Z6tbBnE-swM/TB0CryLkiLI/AAAAAAAAVSo/n6B78hsDUz4/s144-c/_DSC3454.jpg",
        "http://lh3.ggpht.com/_GEnSvSHk4iE/TDSfmyCfn0I/AAAAAAAAF8Y/cqmhEoxbwys/s144-c/_MG_3675.jpg",
        "http://lh6.ggpht.com/_Nsxc889y6hY/TBp7jfx-cgI/AAAAAAAAHAg/Rr7jX44r2Gc/s144-c/IMGP9775a.jpg",
        "http://lh3.ggpht.com/_lLj6go_T1CQ/TCD8PW09KBI/AAAAAAAAQdc/AqmOJ7eg5ig/s144-c/Juvenile%20Gannet%20despute.jpg",
        };

            public int getCount() {
                return count;
            }

            public String getItem(int position) {
                return URLS[position];
            }

            public long getItemId(int position) {
                return URLS[position].hashCode();
            }
         public View getView(int position, View convertView, ViewGroup parent) {
                View v;

                if (convertView == null) {
                    v = LayoutInflater.from(mContext).inflate(R.layout.image_text_view,null);
                    v.setLayoutParams(new GridView.LayoutParams(200,200));

                    ImageView imageview = (ImageView)v.findViewById(R.id.image);
                    imageview.setScaleType(ImageView.ScaleType.CENTER_CROP);
                    imageview.setPadding(6, 6, 6, 6);
                    imageDownloader.download(URLS[position], imageview);
                }
             else {
                v = convertView;
            }

                return v;
            }

            public ImageDownloader getImageDownloader() {
                return imageDownloader;
            }
    } 
```

如果有人有样品，它会很有帮助。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T17:56:40.187

这应该可以正常工作，您不能在 a 中使用 gridView -如果您仍然要手动管理网格，请`ListFragment`使用普通旧的`Fragment`

此外，检查 convertView 是否为 null 的目的是进行视图回收 - 操作系统只声明足够的视图来填充屏幕而不是更多，所以如果你滚动，它可以重用视图，而不必膨胀一个新的视图。像这样更改您的 getView() 以利用：

```
public View getView(int position, View convertView, ViewGroup parent) {
  View v;

  if (convertView == null) {
    v = LayoutInflater.from(mContext).inflate(R.layout.image_text_view,null);
    v.setLayoutParams(new GridView.LayoutParams(200,200));
  }
  else {
    v = convertView;
  }

  ImageView imageview = (ImageView)v.findViewById(R.id.image);
  imageview.setScaleType(ImageView.ScaleType.CENTER_CROP);
  imageview.setPadding(6, 6, 6, 6);
  imageDownloader.download(URLS[position], imageview);

  return v;
} 
```

此外，getView 不是 BaseAdapter 的功能，请尝试切换到 ArrayAdapter。作为旁注，`@Override`当您认为您正在覆盖基函数时，请始终使用 - 这样，如果您犯了错误，编译器就会给您一个错误

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T05:26:36.637

在 a 中使用 a`GridView`与在 a 中`Fragment`使用它应该没有什么不同`Activity`。我在您的代码中看到的一个明显错误是您正在膨胀布局`onActivityCreated`，然后立即忽略它。相反，您应该在`onCreateView`其中方便地提供一个`LayoutInflater`供您使用的所有视图初始化。

至于它目前的行为，它为什么会如此行事是很有意义的。我相信如果程序员没有提供一个（你目前没有），它会`ListFragment`膨胀一个包含 a 的布局。`ListView`然后，`ImageAdapter`您正在设置的 s 用于将`View`s 提供给`ListView`.

因此，将所有代码移至其中`onActivityCreated`，`onCreateView`它应该可以工作。你根本不需要覆盖，除非你需要在附加到它时对它`onActivityCreated`做一些特殊的事情。`Activity``Fragment`

至于使用`GridView`4.0 之前的版本 -`GridView`自 API 级别 1 以来就已经存在，所以我敢打赌，将它用于所有 Android API 级别是可以的。

# selenium - Selenium RC 架构和 Selenium WebDriver 架构的区别

> ID：10285641
> 
> 赞同：3
> 
> 时间：2012-04-23T17:52:20.043
> 
> 标签：selenium, selenium-webdriver, architecture, selenium-rc

嗨，我想要 selenium RC 和 webDriver 架构之间的差异。我阅读了很多功能差异，但没有找到任何架构差异。

如果有人可以发送/发布真正适用的差异链接。

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T19:07:06.487

差异是相当大的。

Selenium RC 仅在其每个命令中使用 JavaScript。这意味着您编写的所有内容最终都会翻译成 Javascript 并在浏览器中运行。这种方法有几个优点和缺点 - 它应该在每个浏览器中以相同的方式工作，但仅限于[“同源策略”](http://en.wikipedia.org/wiki/Same_origin_policy)和 JavaScript 限制。

[http://seleniumhq.org/docs/05_selenium_rc.html#how-selenium-rc-works](http://seleniumhq.org/docs/05_selenium_rc.html#how-selenium-rc-works)

WebDriver 实际上使用每个浏览器自己的原生 API 来处理它们。这意味着它有时需要浏览器开发团队的直接帮助，有时在新的浏览器版本发布时失败，有时在不同浏览器上的行为略有不同（但是，在 IE 上，js 也不是最可靠的东西），但整体上更强大的工具。它应该更快，它应该允许更复杂的工作而没有任何 js 限制。

[http://seleniumhq.org/docs/03_webdriver.html#how-does-webdriver-drive-the-browser-compared-to-selenium-rc](http://seleniumhq.org/docs/03_webdriver.html#how-does-webdriver-drive-the-browser-compared-to-selenium-rc)

请注意，虽然 Selenium RC 已被正式弃用，但 WebDriver 现在正在快速开发中，但它仍然存在一些儿童疾病，并且还没有完全发挥作用。也就是说，使用 WebDriver，您可以做任何 Selenium RC 可以做的事情。有时更多。偶尔有一个小错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-04T07:29:16.080

虽然页面项目模型有很多优点，但其中一些值得一提的是：

1.  具有合理方法名称的简单明了的页面类。

2.  您实际上可以为您的方法提供自定义名称。像上面一样，所以你不需要记住任何事情。

3.  只需查看方法名称，您就可以全面了解该方法的功能。

4.  使测试更具可读性。与 selenium 的上述命令相比，您需要在测试脚本中添加所有命令。在页面对象模型中，您需要放置方法名称。您根据对应用程序的理解创建的方法，因此这些方法名称更具可读性和易于理解。

5.  Stay [DRY] 页面对象模型相信不要重复自己的原则。

6.  良好的测试支持，因为一切都存储在一个地方。

7.  轻松创建新测试。事实上，测试可以由不了解自动化工具特性的人创建。

因为我已经在我的项目中实际实现了它，所以肯定存在一些缺陷：

1.  所有定位器都应保存在页面类文件中。

2.  这种抽象导致页面类文件中的一些混乱。因此，您需要在页面对象模型之上实现诸如关键字驱动之类的东西，以充分发挥其优势。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-13T16:07:36.563

在这里你可以 Selenium Webdriver Architecture [http://qeworks.com/selenium-webdriver-architecture/](http://qeworks.com/selenium-webdriver-architecture/)

您还可以找到差异。[在http://qeworks.com/difference-between-selenium-rc-and-selenium-webdriver/](http://qeworks.com/difference-between-selenium-rc-and-selenium-webdriver/)下面的 RC 和 webdriver 之间

# php - php函数在while循环中

> ID：10285646
> 
> 赞同：0
> 
> 时间：2012-04-23T17:52:47.667
> 
> 标签：php, function, while-loop

我搜索了整个网络，或者我只是没有看到它。

我想做以下事情：

```
<?php

 function abc(){
   $sql = "SELECT * FROM table";
   $result = mysql_fetch_assoc($sql);
   $data = mysql_fetch_assoc($result);
}

?>

<? while(abc()) : ?>

   <?=article_title()?>
   <?=article_content()?>

<?=endwhile;?> 
```

有人可以给我一个方向和/或例子吗？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T17:54:11.197

PHP 没有生成器/迭代器函数，所以你不能这样做。

但是，您可以返回一个数组并遍历该数组：

```
function abc() {
    // ...
    $rows = array();
    while($row = mysql_fetch_assoc($result)) { $rows[] = $row; }
    return $rows;
}

foreach(abc() as $row) {
    // do something
} 
```

如果您调用的函数需要访问该行，请将其作为参数传递。使用全局变量会**非常糟糕/讨厌**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T17:58:41.793

你试过做这样的事情吗？

```
<?php
function getData(){
    //get the data from the database
    //return an array where each component is an element found
}

$elems = getData();
foreach($elems as $e){
    doSomethingWith($e);
} 
```

# sql - tSQLt 在尝试 FakeTable 同义词表时失败

> ID：10285651
> 
> 赞同：4
> 
> 时间：2012-04-23T17:52:58.067
> 
> 标签：sql, tsql, tsqlt

我正在使用 tSQLt（通过 Red Gate 的 SQL 测试版本 1.0.0.455）。tSQLt 安装在数据库 A 上。我正在尝试通过数据库 A 上的同义词对同一 SQL 服务器实例上的数据库 B 中的表执行 tSQLt.FakeTable。

代码：

> ALTER PROCEDURE [ErrorType109NonTankHasSizeOrVolume].[test AliasTest] AS
> 
> 开始执行tSQLt.FakeTable
> 'dbo.Bygning';
> 
> 插入 dbo.Bygning (ObjStatus) 值 (1);
> 
> 执行 tSQLt.AssertEquals 1, 1
> END;

数据库 A 中的同义词在哪里`dbo.Bygning`是指数据库 B 中的表，并且`ObjStatus`是数据库中的列`dbo.Bygning`

错误信息：

```
Transaction count after EXECUTE indicates a mismatching number of BEGIN and COMMIT statements. Previous count = 0, current count = 1.

Transaction count after EXECUTE indicates a mismatching number of BEGIN and COMMIT statements. Previous count = 0, current count = 1.

Transaction count after EXECUTE indicates a mismatching number of BEGIN and COMMIT statements. Previous count = 0, current count = 1.

[ErrorType109NonTankHasSizeOrVolume].[test AliasTest] failed: An invalid parameter or option was specified for procedure 'sp_addextendedproperty'.{sp_addextendedproperty,37} 
```

有没有办法 tSQLt.FakeTable 同义词表？

**澄清：** 运行测试时出现错误消息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T00:35:58.483

tSQLt 目前不支持伪造同义词。但是，我认为添加对此的支持可能很容易。我快速制作了以下修复程序的原型，希望它可以解决您的问题。你能试试并确认吗？如果它适合你，我会确保它进入下一个版本。

```
ALTER PROCEDURE tSQLt.Private_MarkFakeTable
  @SchemaName NVARCHAR(MAX),
  @TableName NVARCHAR(MAX),
  @NewNameOfOriginalTable NVARCHAR(4000)
AS
BEGIN
   DECLARE @UnquotedSchemaName NVARCHAR(MAX);SET @UnquotedSchemaName = OBJECT_SCHEMA_NAME(OBJECT_ID(@SchemaName+'.'+@TableName));
   DECLARE @UnquotedTableName NVARCHAR(MAX);SET @UnquotedTableName = OBJECT_NAME(OBJECT_ID(@SchemaName+'.'+@TableName));
   DECLARE @Level1Type NVARCHAR(MAX);

   SELECT @Level1Type = 
     CASE type
       WHEN 'SN' THEN 'SYNONYM'
       ELSE 'TABLE'
     END
   FROM sys.objects
   WHERE object_id = OBJECT_ID(@SchemaName+'.'+@TableName);

   EXEC sys.sp_addextendedproperty 
      @name = N'tSQLt.FakeTable_OrgTableName', 
      @value = @NewNameOfOriginalTable, 
      @level0type = N'SCHEMA', @level0name = @UnquotedSchemaName, 
      @level1type = N'TABLE',  @level1name = @UnquotedTableName;
END;
GO 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-01T20:32:53.487

我今天遇到了这个问题并设计了以下解决方案。

在组装部分：

```
CREATE TABLE #mock
(
    id_item VARCHAR(15),
    descr_1 VARCHAR(50)
)
INSERT INTO #mock
  ( id_item, descr_1 )
VALUES ('123456-01', 'Great description here'),
       ('123456-02', 'Blue, gnarly, cloud')
EXEC sp_rename 'syn_name', 'syn_name_orig'
CREATE SYNONYM syn_name FOR #mock 
```

然后在 act 部分的末尾进行清理：

```
DROP SYNONYM syn_name
EXEC sp_rename 'syn_name_orig', 'syn_name' 
```

它对我有用。尝试使用该同义词的并发进程可能会产生副作用，但我只在开发环境中运行我的测试，所以我并不担心。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-03T06:31:22.700

我使用的解决方法是将生产代码更改为使用视图，然后使用同义词。然后我可以使用 tSQLt.FakeTable 模拟视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-27T12:51:01.630

我也遇到过类似的问题。我有 2 个数据库，即 config 和 main db 我在 config db 中有一个表“tableA”。它的同义词是在主数据库中创建的，具有相同的名称，即 dbo.tableA。但是在嘲笑那个同义词时，它给了我同样的错误。所以这是我的解决方案，它对我有用。

首先，我从配置数据库创建了一个 tSQLt.FakeTable sp 的同义词到我的主数据库中，例如

```
CREATE SYNONYM tSQLt.tSqltFakeTable_config FOR [Config_db].tSQLt.faketable 
```

现在在测试用例中，我使用如下新的同义词**tSQLt.tSqltFakeTable_config**来伪造“tableA”的同义词

```
CREATE PROC [testclass].[test faking synonym which points to another db] 
AS
BEGIN
    --arrange
    exec [tSQLt].tSqltFakeTable_config 'dbo.tableA';

    --act

    --assert

END 
```

但我觉得如果你从 config db 卸载 tSQLt，只会有 1 个问题。您必须跟踪所有此类新同义词并先将其删除，然后您才能从 Config db 中卸载 tSQLt。欢迎提出建议。

# sql-server - 如何修复 SQL Server 2012 的 Visual Studio 错误“不支持此服务器版本...”

> ID：10285652
> 
> 赞同：11
> 
> 时间：2012-04-23T17:53:01.727
> 
> 标签：sql-server, visual-studio, visual-studio-2010, sql-server-2012, sql-server-2012-express

我最近在 Windows Server 2008 R2 机器上安装了 Visual Studio 2010 和 SQL Server 2012 -（包括所有更新/服务包）。

尝试从 Visual Studio 中处理 SQL Server 数据库时，VS 抛出以下错误：

> 不支持此服务器版本。仅支持高达 Microsoft SQL Server 2008 的服务器

我记得当我将 SQL Server 2008 实例更新为 SQL Server 2008 **R2**时，不久前（在另一台计算机上）遇到了同样的错误。当时的修复是安装（或重新安装）Visual Studio 2010 SP1。

现在我再次收到此错误（在新计算机上），我认为重新安装 VS SP1 是合理的，就像我不久前所做的那样。但是，这样做并没有解决问题。

似乎 Visual Studio 可能需要另一个更新来支持 SQL Server 2012 实例。

为清楚起见，以下是我为产生错误所做的步骤：（使用 VS 2010sp1 和 SQL2012）

1.  使用VS，创建一个Windows Forms应用程序
2.  右键单击项目并选择，添加 > 新项目
3.  选择“基于服务的数据库”
4.  取消退出“数据源配置向导”
5.  数据库将出现在解决方案资源管理器中的项目下。双击新数据库
6.  数据库将被添加到服务器资源管理器的数据连接列表中
7.  在服务器资源管理器中，打开数据库，右键单击表目录，然后选择“添加新表”
8.  抛出错误“不支持此服务器版本....”

截图不管它的价值.. ![在此处输入图像描述](../Images/5a3ffd4993990b026aa3481f82a7b47a.png) ![在此处输入图像描述](../Images/143dfc12527b08ad7f166cf11f61442b.png)

我的问题是，有解决办法吗？如果是这样，它是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T18:11:10.673

也许获得与 SQL Server 2012 一起使用的 SQL [Server Data Tools ？](http://msdn.microsoft.com/en-us/data/gg427686)[我相信Developer Training Kit](http://www.microsoft.com/download/en/details.aspx?id=27721)中有一些很好的教程和其他材料。我认为还没有任何技巧可以使旧版本的 Visual Studio / Data Dude 与 SQL Server 2012 兼容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T18:11:28.690

以下 MSDN 博客链接讨论了您在 Visual Studio 2010 中使用本地 SQL Server 数据库实例所面临的问题。

[**在 Visual Studio 2010 中使用 LocalDB**](http://blogs.msdn.com/b/sqlexpress/archive/2011/11/28/using-localdb-in-visual-studio-2010.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-31T18:52:45.917

我的问题是我无法让 VS2012 与 SQL Server 2012 一起正常工作。我先安装了后一个产品，但在安装 VS2012 并尝试打开现有项目后，我现有的数据文件无法正常工作。我知道该软件应该自动引导您通过向导来更新项目中的数据库，但这并没有发生，而且我找不到实现它的方法。我现在正要摆脱 SQL Server 2012 并回到 2008 年。我宁愿使用最新版本，但我不能再花时间在配置问题上。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-14T16:08:20.503

我也尝试重新安装 SSDT，但一直收到您提到 Jed 的相同错误，这似乎让我绕过了错误消息：

[http://forums.asp.net/t/1721552.aspx/1?Working+with+Denali+SQLEXPRESS+in+VS+11+Database+issue](http://forums.asp.net/t/1721552.aspx/1?Working+with+Denali+SQLEXPRESS+in+VS+11+Database+issue)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-28T12:08:15.677

如果您使用错误的提供程序，也可能发生此错误。最近遇到了“不支持此服务器版本....”错误，在将数据源配置的连接字符串中的提供程序从 sqlClient 数据提供程序更改为 SQL Server Native Client 11.0 后，问题得到了解决。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-23T03:32:08.493

对我来说，每当我尝试创建新数据库时都会出现错误。因此，在尝试所有建议的方法均未成功后，我通过单击“添加连接”并将我的服务器名称放在对话框中绕过了该错误。添加不存在的数据库名称后，它通知它找不到该数据库并询问是否创建它。瞧！已创建数据库（即使服务器版本据称不受支持）。

# sorting - PowerShell 的 Sort-Object cmdlet 更改未排序的 wrt 属性的顺序

> ID：10285657
> 
> 赞同：1
> 
> 时间：2012-04-23T17:53:15.410
> 
> 标签：sorting, powershell

我正在对一些 XML 进行排序，并希望根据特定的*非唯一*属性对元素进行排序，这允许我对类似元素进行分组。在这些组中，我需要保持原来的顺序。问题是，在排序时，这些组内的顺序会发生变化，而在重新排序时，顺序会再次发生变化。如果 XML 的内容没有改变（否则 SVN 差异很难看），我需要一种不会改变事物的排序。这是一个简化的示例：

```
$xml = [xml]@"
<root>
  <element name="a" number="1" />
  <element name="b" number="1" />
  <element name="c" number="1" />
  <element name="d" number="2" />
  <element name="e" number="2" />
  <element name="f" number="2" />
  <element name="g" number="3" />
  <element name="h" number="3" />
</root>
"@

Write-Host "`nFirst Sort produces this:"
$result1 = $xml.SelectNodes('//element') | Sort-Object -Property 'number'
Write-Host (($result1 | select -ExpandProperty 'number') + " <---Sorted on")
Write-Host (($result1 | select -ExpandProperty 'name') + " <---Order not maintained")

Write-Host "`nSorting the (already sorted) results of First Sort produces this:"
$result2 = $result1 | Sort-Object -Property 'number'
Write-Host (($result2 | select -ExpandProperty 'number') + " <---Sorted on")
Write-Host (($result2 | select -ExpandProperty 'name') + " <---Order changed again") 
```

这是输出：

```
First Sort produces this:
1 1 1 2 2 2 3 3  <---Sorted on
c b a f e d h g  <---Order not maintained

Sorting the (already sorted) results of First Sort produces this:
1 1 1 2 2 2 3 3  <---Sorted on
a b c d e f g h  <---Order changed again 
```

在此示例中，我需要在“数字组”中保留原始“名称”排序。

Can anyone think of an *easy* way to make this maintain the original order and come out the same when sorting multiple times?

I'm trying to avoid adding dummy attributes representing the original ordering. Maybe there is a different .NET sorting function that's more deterministic? I searched but nobody seemed to be concerned with ordering within equivalent groups.

Thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T20:38:35.227

If you don't have something that already represents the natural sort order, you can just add an index property with Add-Member:

```
$nodes = @($xml.SelectNodes('//element'))
for ($i=0; $i -lt $nodes.Count; $i++) 
{
    $nodes[$i] = $nodes[$i] | Add-Member -MemberType NoteProperty "Index" $i -PassThru
}

$result1 = $nodes | Sort-Object name, Index 
```

Then you are guaranteed to get the same ordering no matter how many times you re-sort.

Update: added syntax for PowerShell v2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T18:05:26.020

Sort with respect to both the properties:

```
$xml.SelectNodes('//element') | Sort-Object -Property number, name 
```

This produces this output:

```
name     number
----     ------
a        1
b        1
c        1
d        2
e        2
f        2
g        3
h        3 
```

# java - 用于多个参数的 Java varargs

> ID：10285672
> 
> 赞同：2
> 
> 时间：2012-04-23T17:53:58.487
> 
> 标签：java, optional-parameters

使用 Java varargs 作为可选参数是否被认为是一个很好的编程习惯？

甚至更多：如果我有一个接口，并且某些实现需要附加参数，而有些则不需要，是否可以在方法签名中为可选参数使用可变参数？

在 Java 中，可以使用以下成语：

```
public static void x(String ... strings) 
```

它得到一个字符串数组，可能是空的。你可以用

```
x() (empty array), x("1","2","3") etc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T18:01:58.977

当您不知道 api 的用户希望传递的“特定类型”的参数数量时，通常使用可变参数。我认为这没有任何问题，因为用户可以决定传递任意数量的参数或根本不传递任何参数。例如

```
public class NewClass {

    public void print(String... a) {
        System.out.println(a);
    }

    public static void main(String[] args) {
        new NewClass().print();
    }
} 
```

不要伤害。因为您知道可变参数中的类型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T18:33:12.317

我会**说不**。使用可变参数将允许为您的可选参数提供任意数量的参数。你将如何与实现你的接口或调用你的方法的人沟通只需要一个值？当提供多个值时，行为应该是什么？这些都是不必要的并发症。

如果您的方法需要 0 或 1 个值作为可选参数，那么您应该使用只允许提供 0 或 1 个值的语言结构。重载方法签名或允许可选参数为空会更合适。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T17:59:55.150

我认为使用可变参数来实现可选参数不是一个好主意。

```
Animal a = new Dog();
a.speak("bow"); 
```

您不知道查看上面示例中的参考资料应该应用哪些参数，因为如果从动物列表中提取动物，您可能不知道它是一只狗。

正如@Oli 所说，显式重载是一种很好的方法。

# tomcat - 独立用于集成 netbeans、tomcat 和 xampp 的系统

> ID：10285673
> 
> 赞同：0
> 
> 时间：2012-04-23T17:54:04.713
> 
> 标签：tomcat, netbeans, system, xampp

我的问题是我不知道如何为我在 netbeans 上的项目创建一个独立的项目。我的项目是一个销售系统，卖家在其中注册客户想要购买的商品，为此我在 xampp 上使用 netbeans、tomcat 和 mysql。我想知道是否有一个简单的程序来创建一个集成所有这些元素的独立程序，或者有没有办法在 netbeans 上做到这一点。任何线索、提示或建议将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T23:15:23.997

[您可以在此处](https://stackoverflow.com/questions/9735676/is-it-possible-to-do-an-embedded-java-servlet-code-like-using-libraries-jetty/9738966#9738966)找到嵌入 Tomcat 7 的示例。您不能真正将 Xampp 添加到 java 程序中，但看看[MySQL 连接器/MXJ](http://dev.mysql.com/downloads/connector/mxj/)就可以了。

最后创建一个启动类，首先运行 MySQL，然后运行 ​​Tomcat。

# php - Yii：HAS_MANY 搜索

> ID：10285681
> 
> 赞同：3
> 
> 时间：2012-04-23T17:54:35.027
> 
> 标签：php, sql, search, yii, has-many

我有以下表格：

```
user (id, cv_personal_data_id),
cv_personal_data (id, firstname, surname, gender, address, ...),
cv_laboral_exp (id, user_id, position, seniority,... ),
cv_study (id, user_id, name, institution, average, ...),
cv_language (id, user_id, language_name, writing_level, ...) 
```

在我的用户模型中，我定义了以下关系：

```
 public function relations()
{
    return array(
        'cvLaboralExps' => array(self::HAS_MANY, 'CvLaboralExp', 'user_id'),
        'cvLanguages' => array(self::HAS_MANY, 'CvLanguage', 'user_id'),
        'cvStudies' => array(self::HAS_MANY, 'CvStudy', 'user_id'),
        'cvPersonalData' => array(self::BELONGS_TO, 'CvPersonalData', 'cv_personal_data_id'),
} 
```

问题是：作为公司登录，我需要显示一个列出所有用户的 CGridView，并能够通过相关表的任何字段进行搜索，例如“位置”（来自 cv_laboral_exp）、“语言名称”（来自cv_languages）等等。我似乎找不到搜索来自 HAS_MANY 关系的字段的解决方案。我尝试在 User 类的 search() 方法中将“with”语句添加到 $criteria 中，以尝试搜索用户劳动体验的位置，但没有成功：

```
 $criteria->compare('cvLaboralExps.position',$this->cvLaboralExps,true);
                $criteria->with = array('cvLaboralExps'=>array('select'=>'cvLaboralExps.position','together'=>true)); 
```

如您所见，有很多关系构成了用户的简历。如果有人能帮我解决这个问题，我将不胜感激，即使这意味着更改数据库/模型结构。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T20:50:37.107

您实际上需要为相关模型声明一个成员变量，这里是*User*。您正在做的问题是 this(in `compare()`) : `$this->cvLaboralExps`，这`cvLaboralExps`只是类的关系，而不是可以存储值的变量，因此比较`$value`是空的。`$value`在[比较文档](http://www.yiiframework.com/doc/api/1.1/CDbCriteria#compare-detail)中检查这一行，解释第二个参数：

> 如果字符串或数组为空，则不会修改现有的搜索条件。

这可以通过为模型声明一个成员变量并修改`compare()`调用以使用新变量来避免。

```
...
class User extends CActiveRecord{
    // declare the variables that we need
    public $cvLaboralExpsLocal,$cvLanguages,$cvStudies;

    // now put these variables in rules array, so that massive assignment can be done, i.e. safe rule
    public function rules(){
         return array(
              // other rules ...
              array('attributesxyz, cvLaboralExpsLocal, cvLanguages, cvStudies', 'safe', 'on'=>'search')
         );
    }

    // other functions

    // the search can be kept just the way you have in the question but with the new variables
    public function search(){
          // other statements
          $criteria->compare('cvLaboralExps.position',$this->cvLaboralExpsLocal,true);
          $criteria->with = array('cvLaboralExps'=>array('select'=>'cvLaboralExps.position','together'=>true));
    }
} 
```

注意事项： 1\. 记得更改 _search.php 表单以接受新变量。
2\. 由于这是 has_many，因此您必须注意最终用户如何输入值。

# selenium-ide - 无法在 Selenium IDE 中选择下拉菜单

> ID：10285682
> 
> 赞同：2
> 
> 时间：2012-04-23T17:54:36.537
> 
> 标签：selenium-ide

我正在尝试自动选择 selenium ide 中的下拉菜单，但我无法让它工作。

基本上，我记录了对菜单项的单击，它显示了下拉菜单，但是每当我在其中一个选项上使用单击命令时，它都会关闭菜单而不选择新选项。我也尝试过 select 命令，但我不断收到“指定元素不是选择”

有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T22:02:33.013

与 HTML 选择元素交互时，Selenium 应该返回单个操作。

例如，如果我有以下选择元素

```
<select name="numbers">
   <option value="One">1</option>
   <option value="Two">2</option>
   <option value="Three">3</option>
</select> 
```

并选择“2”，selenium 应该返回单个动作。

```
 | Command       | Target       | Value     |
 | select        | name=numbers | label=Two | 
```

如果 IDE 没有记录事件，您可能会遇到另一个问题，例如元素被定义为隐藏。但是，如果没有其他细节，这真的很难说。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T19:49:23.650

右键单击页面并查看源代码。应列出下拉选项。还有目标名称。然后，您可以手动创建命令。不要做列表中的第一个项目。首先选择第三个并进行测试。

一旦你有一个工作剪切并将其粘贴到记事本中。从查看源代码中获取列表并复制替换值的行。在 Source 选项卡上复制并粘贴回 Selenium。

# c++ - 无法从 dll、vs2010、c++ 导出类

> ID：10285684
> 
> 赞同：2
> 
> 时间：2012-04-23T17:54:51.497
> 
> 标签：c++, visual-studio-2010, dll, export

我写了一个包含以下两个类的库。Visual Studio 的第一堂课没有问题，但第二堂课有错误。我不知道为什么。有什么想法吗？

头等舱：

```
class __declspec(dllexport) C_RGBImage: public C_Matrix<S_RGB>
{
public:
    C_RGBImage( S_Size<long> &A_rSize = S_Size<long>(0, 0)): C_Matrix(A_rSize){}

    bool  SaveBMP( std::wstring A_rFileName );
    bool  LoadBMP( std::wstring A_rFileName );

    bool  SaveJPEG( std::wstring A_rFileName, int A_iQuality = 85 );
    bool  LoadJPEG( std::wstring A_rFileName );
}; 
```

二等：

```
class __declspec(dllexport) C_RGBAImage: public C_Matrix<S_RGBA>
{
public:
    C_RGBAImage( S_Size<long> &A_rSize = S_Size<long>() ): C_Matrix(A_rSize){}

    bool SaveBMP( std::wstring &A_rFileName );
    bool LoadBMP( std::wstring &A_rFileName );

    bool LoadBMPFromResource( HINSTANCE A_hInstance, long A_lBitmapID );
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T19:47:06.353

我猜你用不同的参数调用 LoadBMPFromResource 。

# java - Servlet 中的线程安全和排队任务

> ID：10285688
> 
> 赞同：2
> 
> 时间：2012-04-23T17:55:02.617
> 
> 标签：java, jsp, servlets

我有几个问题。据我所知，对容器的每个请求都会变成`HttpServletRequest`. 更多请求-> 更多实例`HttpServletRequest`。然后，当请求对象调用名为“abc”的 servlet 时，会创建一个“abc”servlet 实例。假设同时有 3 个请求来到 'abc' servlet，那么
**(1)**我想知道，这是否意味着每个请求都会创建 3 个 'abc' servlet 实例？或者请求排队，直到对 servlet 的一个请求完成。

然后让我们说，3 请求“abc”servlet 执行一些数据库进程，这些进程可能同时是插入和*检索*。那么
**（2）**一个请求是否应该在队列中，直到其他请求的servelt完成任务（同步）或所有servlet作为多线程作为单独的任务（非同步）完成他们的数据库任务？
**(3)。**如果它们以不同步的方式工作，我们如何使这些任务同步（比如说，只有一个特定的任务——将一些东西保存到数据库）并排队？为此，最好是实现 servlet`SingleThreadModel`还是使用根据单例模式创建的类中的方法？那么它对容器的性能有何影响呢？

简而言之，我们如何为所有请求同步运行特定任务？

我也读过[这个](http://www.jguru.com/faq/view.jsp?EID=1015)。那篇文章谈到了 servlet。假设一个 servlet 的任务被移交给另一个类，那么我想知道在这个上使用单例模式怎么样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T18:01:21.483

一个容器可以创建一个 servlet 实例池（下面的 servlet 规范摘录解释了详细信息）。它可以对三个并发请求使用三个不同的实例，也可以对所有三个请求使用一个。因此，您的 servlet 需要是线程安全的，并且不应在其成员变量中包含状态。这`SingleThreadModel`标记接口将向容器发出信号，不要将同一 servlet 实例用于多个并发请求（从而使您的 servlet 线程安全），但它不会阻止容器创建多个实例并同时使用它们。说得通？如果您的操作需要同步，那么您在模型类中处理它，而不是在控制器中。所以基本上在别处同步（或排队）就是答案。让 servlet 接受命令并直接运行它，而无需在过程中花太多心思。

**更新**。对于您的情况，一个非常基本的显式操作同步示例（不是我喜欢它，只是为了说明这一点）是让一个单例服务处理您的操作，并将其 main`do()`方法声明为`synchronized`. 不过，理想情况下，您会将数据库并发委托给您的数据库和持久层（事务、乐观并发）。

**根据[servlets 规范](http://jcp.org/aboutJava/communityprocess/first/jsr053/servlet23_PFD.pdf)**更正**：**

 **```
In the default case of a servlet not implementing SingleThreadModel and not hosted in a
distributed environment, the servlet container must use only one instance of a servlet class
per servlet definition.
In the case of a servlet that implements the SingleThreadModel interface, the servlet
container may instantiate multiple instances of that servlet so that it can handle a heavy
request load while still serializing requests to a single instance. 
```

话虽如此，除非您使用该单线程模型标记，否则您将只有一个 servlet 实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T18:02:22.273

```
1) No, only instance of servlet exists per server
2) No, each request is separate thread 
```

您的服务器不应包含任何实例变量（或）静态变量，那么同步不会有任何问题，因为每个线程都有自己的局部变量副本和执行序列。

3）你可以通过在doGet()前面加上同步前缀来使servlet同步，doPost()方法是在同步块的帮助下进行的。但这是不好的做法。

请参阅此[SO Wiki 链接](https://stackoverflow.com/tags/servlets/info)以进行完整讨论。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T18:07:18.863

要同步特定任务，让我建议 2 种方法。

1.  使用 java`synchronized`块。您应该考虑什么对象适合锁定对象。
2.  使用数据库锁。如`select * from xxx for update`**

# asp.net-mvc-3 - Azure 上的空白页

> ID：10285690
> 
> 赞同：2
> 
> 时间：2012-04-23T17:55:16.647
> 
> 标签：asp.net-mvc-3, azure

我有一个在 Azure 中运行的应用程序（试用帐户）。到目前为止一切都很好，除了很长的部署时间（10-15 分钟）之外，一切都很好。

我最近进行了一次部署，发现了很多我无法追踪的奇怪错误。例如，如果我登录并因此创建了一个 cookie（我使用 FormsAuthentication），那么我从应用程序中得到的只是一个空白页面，就像绝对没有任何东西发送到浏览器一样。该应用程序在 ASP.NET Web 开发服务器、IIS Express 甚至 Azure 模拟器中都能正常工作！

可能是什么问题？搜索网络并没有太大帮助，只有几个不相关的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T17:55:23.600

我尝试登录该站点（如果我从评论中正确理解，则 url 是[versulo.com](http://www.versulo.com/)）并且我没有得到任何带有 404 状态代码的空白页面。

但是，我发现了另一个问题。您的网站似乎不恰当地实施了缓存。主页，您触发登录的页面，本质上是动态的，其中包含在页面首次加载后 5 分钟设置的 Expires 标头。这意味着自首次加载后 5 分钟内到该页面的每个调用或重定向都将从浏览器的缓存中提供。

因此，在我登录到您的应用程序后，我被重定向回主页，看起来我没有登录。如果我在浏览器上强制 F5 刷新，那么页面确实会显示我已登录。

如果我尝试再次登录而不是刷新（这是我在第一次试验中所做的，因为看起来登录在第一次时不起作用），我会收到一个错误页面，其中包含以下消息：

抱歉，服务器出现错误。500

该页面看起来像一个应用程序错误页面，即使它显示 500 数字，它实际上也是使用 HTTP 200 提供的。

因此，虽然我不能 100% 确定这是否也是您描述的问题的原因，但您应该从应用程序正在服务的动态页面中删除 Expires 标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T18:16:08.207

这可能是因为您将表单身份验证与多个实例组合在一起。您是否使用多个实例？如果是这样的话，你能不能：

*   尝试将其更改为 1 个实例。这能解决问题吗？
*   尝试对 web.config 进行以下更改（配置 machineKey）：http: [//msdn.microsoft.com/en-us/library/ff649308.aspx](http://msdn.microsoft.com/en-us/library/ff649308.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T07:09:55.397

> 一些局部视图根本不渲染；

你的意思是有些页面工作正常，但其他页面却不行？如果您能指出哪些有效哪些无效的模式会更好？现在，请确保所有引用的程序集（默认的 .NET 程序集和 Windows Azure 运行时除外）都将 Copy Local 设置为 true。例如，MVC 程序集被视为 .NET 的扩展，因此请将 Copy Local 设置为 true。此外，您还可以尝试使用 Fiddler 来监控请求，以查看服务器返回的内容。

最好的祝福，

明旭。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T08:18:28.297

你能提供一个应用程序的链接，或者一些源代码吗？

当您说“空白页”时，实际返回的是 404 / 500？

您是否检查过 IIS 日志，或在代码中添加了一些跟踪信息？

您是否尝试过使用它的 IP 地址而不是域名来访问该服务？

# java - 在 JNLP 文件中将当前目录指定为代码库

> ID：10285691
> 
> 赞同：1
> 
> 时间：2012-04-23T17:55:17.507
> 
> 标签：java, jnlp, java-web-start

我尝试启动的 Jar 文件与 JNLP 文件位于同一目录中。如何在我的`codebase`属性中指定它？

```
<jnlp codebase="file://" href="launch.jnlp" spec="1.0+"> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T09:42:17.220

`codebase`这是一个使用设置桌面图标和闪屏的示例 JNLP 。请参阅 Oracle 页面 Structure of the JNLP file，以及更早的文档：Java Network Launching Protocol and API Specification (JSR-56) 非常详尽。

```
<?xml version="1.0" encoding="utf-8"?>
<!-- JNLP File for YourWebstart -->
<jnlp
 spec="1.5+"
 codebase="http://YourWebsiteurl.com/YourWeblaunchPage"
 href=”Your.jnlp">
 <information>
   <title>YourPrograms</title>
   <vendor>YourCompany</vendor>
   <description>Your application</description>
   <description kind="short">Your weblaunch description</description>
   <icon href="YourdesktopIconLogo.png"/>
   <icon kind="splash" href="YourSplashScreenImage.png"/>
   <shortcut online="true">
     <desktop/>
   </shortcut>  
  </information>
  <security>
    <all-permissions/>
  </security>
  <resources>
    <j2se version="1.6+" 
    href="http://java.sun.com/products/autodl/j2se"/>    
    <jar href="YourApplication.jar"/>
  </resources>
  <application-desc main-class="YourMainClassLocation.YourMainClass">
   <argument>AnyArgumentsYouWantToPassIntoYourApplication</argument>
 </application-desc>
</jnlp> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-25T08:27:40.453

基于文件`codebase`在部署时将不起作用，并且在开发期间，可以在运行时覆盖基于 Web 的代码库。

要获取基于文件的 URL 进行测试，`File`请在感兴趣的目录中创建一个对象，JNLP 文件可能是最好的。检查`file.exists()`（检查我们的假设非常重要），然后调用`file.toURI().toURL()`以将其作为文件基础 URL 获取。

此外，请务必使用[JaNeLA](https://drive.google.com/drive/u/0/folders/0B5B9wDXIGw9lUnJaUjA2cmlVRE0)检查 JNLP 。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-08T03:03:43.327

当您使用 Web 服务器时，标记为正确的答案是正确的，但是如果您使用文件系统，则必须使用以下内容才能将当前目录用作代码库

```
<jnlp href="launch.jnlp" spec="1.0+"> 
```

这适用于 jdk 1.7.0_25

# java - 休眠查询如何以正确的格式获取数据

> ID：10285693
> 
> 赞同：1
> 
> 时间：2012-04-23T17:55:27.913
> 
> 标签：java, sql, hibernate

我有一个问题，我花了太长时间试图弄清楚。

我是休眠新手，我有看起来像的数据。

![在此处输入图像描述](../Images/528532165450f84c40b190f42845b52d.png)

我想写一个查询，返回这个数据看起来像这样。

![在此处输入图像描述](../Images/b5a995fa2f0c1d818f77c70382279c1e.png)

如果这可以只用一条 SQL 语句来完成，那将是理想的，因为我仍然非常不熟悉 hibernate 的一些更精细的特性。我已经尝试了很多事情，我认为我可以使用 Unions 来做到这一点，但不幸的是 hibernate 不支持 unions。

任何建议表示赞赏。如果该建议是一种更加面向休眠的方法，那么将不胜感激尽可能多的细节。

更新：//

从 ANGELO 的评论中，我能够使用以下方法来完成这项工作：

```
String newQuery = "";
List<?> list = null;
Query quer = null;
Session session = null;
session = HibernateUtilities.getSessionFactory().openSession();

newQuery = 
"SELECT DISTINCT o.APPLICATION,(SELECT DATA FROM " + dataTable +  " gsm WHERE gsm.APPLICATION = o.APPLICATION AND gsm.NETWORK_TYPE = 'GSM Usage') AS gsm, (SELECT DATA FROM " + dataTable +  " wifi WHERE wifi.APPLICATION = o.APPLICATION AND wifi.NETWORK_TYPE = 'Wi-Fi Usage') AS wifi, (SELECT DATA FROM " + dataTable +  " roam WHERE roam.APPLICATION = o.APPLICATION AND roam.NETWORK_TYPE = 'ROAMING Usage') AS roaming FROM " + dataTable +  " o";

quer = session.createQuery(newQuery);
list = quer.list();
session.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:02:47.557

您可以使用子选择（在 SQL 中，Marko 在评论中说它在 Hibernate 中不起作用。）

```
SELECT DISTINCT o.application, 
    (SELECT sum(DATA) FROM tbl gsm WHERE gsm.application = o.application AND gsm.network_type = 'GSM') AS gsm, 
    (SELECT sum(DATA) FROM tbl wifi WHERE wifi.application = o.application AND wifi.network_type = 'WIFI') AS wifi, 
    (SELECT sum(DATA) FROM tbl roam WHERE roam.application = o.application AND roam.network_type = 'ROAMING') AS roaming
FROM tbl o 
```

（请注意，我假设您的表被调用`tbl`）

# c++ - C++ 隐式转换运算符优先级

> ID：10285695
> 
> 赞同：10
> 
> 时间：2012-04-23T17:55:30.800
> 
> 标签：c++, casting, operator-precedence, conversion-operator

编辑：根据 Mike Seymour 的评论，我相应地替换`operator std::string () const;`并`operator char * () const;`更改了实现。这允许隐式转换，但由于某种原因，unsigned long int 运算符优先于 char * 运算符，这感觉不太对……另外，我不想在外部暴露像 char * 这样讨厌的 C 东西类，当我有 std::string 时。我有一种预感，我的 CustomizedInt 类需要从某些东西继承以支持我想要的功能。有人可以详细说明迈克的评论`std::basic_string`吗？我不确定我是否理解正确。

* * *

我有这段代码：

```
#include <string>
#include <sstream>
#include <iostream>

class CustomizedInt
{
private:
    int data;
public:
    CustomizedInt() : data(123)
    {
    }
    operator unsigned long int () const;
    operator std::string () const;
};

CustomizedInt::operator unsigned long int () const
{
    std::cout << "Called operator unsigned long int; ";
    unsigned long int output;
    output = (unsigned long int)data;
    return output;
}

CustomizedInt::operator std::string () const
{
    std::cout << "Called operator std::string; ";
    std::stringstream ss;
    ss << this->data;
    return ss.str();
}

int main()
{
    CustomizedInt x;
    std::cout << x << std::endl;
    return 0;
} 
```

打印“调用运算符 unsigned long int; 123”。我的问题是：

1.  删除运算符 unsigned long int 后，为什么需要将 x 显式转换为 std::string？为什么它不直接调用隐式转换运算符（std::string）？
2.  是否有任何文档解释允许哪些隐式转换以及它们的优先顺序？似乎如果我将运算符 unsigned int 与运算符 unsigned long int 一起添加到此类，我会收到有关 << 运算符歧义的编译器错误...
3.  另外，我知道定义这样的运算符可能是不好的做法，但我不确定我是否完全理解相关的警告。有人可以概述一下吗？只定义公共方法 ToUnsignedLongInt 和 ToString 会更好吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T18:20:00.180

> 删除运算符 unsigned long int 后，为什么需要将 x 显式转换为 std::string？为什么它不直接调用隐式转换运算符（std::string）？

for strings的版本`<<`是一个模板，由模板的参数参数化`std::basic_string`（`std::string`它本身就是该模板的特化）。它只能通过依赖于参数的查找来选择，并且只有当参数实际上是 的特化时才有效`std::basic_string`，而不是可以转换为的东西。

> 是否有任何文档解释允许哪些隐式转换以及它们的优先顺序？

规则非常复杂，您需要阅读 C++ 标准才能完整了解。简单的经验法则是隐式转换不能包含多个用户定义的转换，并且（正如您所发现的）隐式转换的结果不能用于通过依赖于参数的查找来选择模板特化。

> 我不确定我是否完全理解相关的警告。有人可以概述一下吗？

我也不完全理解它们。隐式转换、名称查找和模板专业化（可能还有我现在想不到的其他因素）之间的相互作用相当复杂，而且大多数人没有学习所有这些的意愿。在很多情况下不会发生隐式转换，而在其他情况下可能会在您不期望的情况下发生；就个人而言，我发现大多数时候避免隐式转换更容易。

> 只定义公共方法 ToUnsignedLongInt 和 ToString 会更好吗？

这可能是一个好主意，以避免不必要的转换。您可以通过保留它们并在必要时明确使用它们来解决您的问题：

```
std::cout << std::string(x) << std::endl; 
```

在 C++11 中，您可以声明它们`explicit`，以便它们只能以这种方式使用。在我看来，如果可以的话，那将是最好的选择；否则，我会按照您的建议使用显式转换函数。

顺便说一句，返回类型`main()`必须是`int`，而不是`void`。

# debugging - 我可以使用 Sublime Text 2 等文本编辑器调试 Grails 应用程序吗？

> ID：10285696
> 
> 赞同：4
> 
> 时间：2012-04-23T17:55:34.197
> 
> 标签：debugging, grails, groovy, sublimetext

我刚开始使用 Grails，我观看了很多视频，演示者使用命令行和 textmate 等文本编辑器演示了 Grails 2.X。

这是我的2个问题：

1.  它是推荐的工作流程还是最受欢迎的工作流程？还是大多数人使用 STS？

2.  我喜欢文本编辑器，我想知道是否可以使用 Sublime Text 2 调试 Grails 应用程序

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T18:57:21.970

`jdb`您可以使用 JDK 附带的基本调试器在 IDE 之外调试 grails 应用程序。您不会获得典型的 IDE 调试体验，而是更像`gdb`Unix 上的传统命令行调试器。

要开始使用，请使用`grails -debug`而不是`grails`. 你会看到的

```
Listening for transport dt_socket at address: 5005 
```

此时，运行`jdb`如下：

```
jdb -attach localhost:5005 
```

您应该会收到类似的提示`main[1]`。现在您可以设置断点和监视并启动您的应用程序。例如：

```
main[1] stop in mypackage.MyController.action()
Deferring breakpoint mypackage.MyController.action().
It will be set after the class is loaded.
main[1] run 
```

当断点被命中时，您可以使用 和 单步执行代码`step`，`next`然后使用 继续运行`cont`。

# android - 我无法接收我所有的 ACTION_MEDIA_BUTTON 广播

> ID：10285697
> 
> 赞同：0
> 
> 时间：2012-04-23T17:55:35.503
> 
> 标签：android, android-button

**我已经在android:name="android.intent.action.MEDIA_BUTTON"**的清单中注册了一个 BroadcastReceiver， 并且我已经使用**registerMediaButtonEventReceiver**方法向 AudioManager 注册了接收器。现在我的接收函数定义如下。

```
public void onReceive(final Context context, Intent intent) {
    Log.e(LOG_TAG, "Entering Receiver");
    KeyEvent event = (KeyEvent) intent.getParcelableExtra(Intent.EXTRA_KEY_EVENT);
    int action = event.getAction();
    if (action == KeyEvent.ACTION_DOWN) {
        Log.e(LOG_TAG, "Down");
    } else {
        Log.e(LOG_TAG, "Up");
    }
} 
```

此代码仅在记录媒体按钮向上和向下事件时打印。如果我单击得足够快，我将无法注册所有向上事件。你对什么是错的有任何想法吗？我的 LogCat 输出如下。请注意，可以通过按住按钮来重现此输出，尽管我没有这样做。

```
04-24 01:47:38.136: E/MicReceiver(3769): Entering Receiver
04-24 01:47:38.136: E/MicReceiver(3769): Down
04-24 01:47:38.187: E/MicReceiver(3769): Entering Receiver
04-24 01:47:38.187: E/MicReceiver(3769): Down
04-24 01:47:38.257: E/MicReceiver(3769): Entering Receiver
04-24 01:47:38.257: E/MicReceiver(3769): Down
04-24 01:47:38.281: E/MicReceiver(3769): Entering Receiver
04-24 01:47:38.281: E/MicReceiver(3769): Down
04-24 01:47:38.390: E/MicReceiver(3769): Entering Receiver
04-24 01:47:38.390: E/MicReceiver(3769): Down
04-24 01:47:38.402: E/MicReceiver(3769): Entering Receiver
04-24 01:47:38.402: E/MicReceiver(3769): Up 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T18:14:48.177

真正的问题是，您能否保证系统正在发送您认为丢失的事件（Logcat 等）？当广播被触发时，系统会评估它的目标并将其放入消息队列中以发送到接收器，因此创建的事件不太可能没有发送到您的接收器。

更有可能的情况是，由于您生成它们的频率，某些事件没有被发送。生成广播的框架的许多部分在系统稳定时发送事件，这意味着如果新事件在前一个广播发送之前进入，则可以取消挂起的广播，因为旧广播不再代表系统状态；屏幕开/关广播就是我知道的一个例子。

这意味着您可以保证您将收到代表该特定子系统当前（最新）状态的广播，即使您没有获得其间的每个中间事件。注意你的测试总是以“Up”消息结束。

高温高压

# java - Apple IAP - 如何验证收据？

> ID：10285698
> 
> 赞同：0
> 
> 时间：2012-04-23T17:55:35.913
> 
> 标签：java, ios, in-app-purchase, receipt

这是我用来验证 IAP 交易收据的代码。httpsURLConnection.getOutputStream() 抛出 SocketException：连接重置。缺少什么？

公共类 HttpsClient {

```
 public static void main(String[] args) {
        HttpURLConnection.setFollowRedirects(false);

        JSONObject jsonObject = new JSONObject();
        jsonObject
                .put("receipt-data",
                        "encodeReceipt");

        HttpURLConnection con = null;
        try {
            String url = "https://buy.itunes.apple.com/verifyReceipt";
            con = (HttpURLConnection) new URL(url).openConnection();

            HttpsURLConnection httpsURLConnection = (HttpsURLConnection) con;
            httpsURLConnection.setDoOutput(true);

            OutputStreamWriter wr = null;
            wr = new OutputStreamWriter(httpsURLConnection.getOutputStream());
            wr.write(jsonObject.toString());
            wr.flush();

            // Get the response
            httpsURLConnection.getInputStream();
            BufferedReader rd = new BufferedReader(new InputStreamReader(
                    httpsURLConnection.getInputStream()));
            String line;
            while ((line = rd.readLine()) != null) {
                System.out.print(line);
            }
            rd.close();

            System.out.println(httpsURLConnection);
        } catch (Exception e1) {
            e1.printStackTrace();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-24T16:15:14.517

公司防火墙问题。整理好了！

# php - CURL 错误：Recv 失败：对等点重置连接 - PHP Curl

> ID：10285700
> 
> 赞同：82
> 
> 时间：2012-04-23T17:55:42.013
> 
> 标签：php, curl, yii

我遇到了这个奇怪的错误，**CURL ERROR: Recv failure: Connection reset by peer**

这就是它的发生方式，如果我没有连接到服务器并且突然尝试通过 PHP 中的 CURL 连接到服务器，我会收到错误消息。当我再次运行 CURL 脚本时，错误消失，然后一直运行良好，如果我让远程服务器空闲大约 30 分钟或重新启动远程服务器并尝试再次连接，我再次收到错误。所以看起来连接是空闲的，然后服务器突然醒来，然后工作，然后再次休眠。

这就是我的 CURL 脚本的外观。

```
$url = Yii::app()->params['pdfUrl'];
            $body = 'title='.urlencode($title).'&client_url='.Yii::app()->params['pdfClientURL'].'&client_id='.Yii::app()->params['pdfClientID'].'&content='.urlencode(htmlentities($content));

            $c = curl_init ($url);
            $body = array(
                "client_url"=>Yii::app()->params['pdfClientURL'],
                "client_id"=>Yii::app()->params['pdfClientID'],
                "title"=>urlencode($title),
                "content"=>urlencode($content)

            );
            foreach($body as $key=>$value) { $body_str .= $key.'='.$value.'&'; }
                rtrim($body_str,'&');

            curl_setopt ($c, CURLOPT_POST, true);
            curl_setopt ($c, CURLOPT_POSTFIELDS, $body_str);
            curl_setopt ($c, CURLOPT_RETURNTRANSFER, true);
            curl_setopt ($c, CURLOPT_CONNECTTIMEOUT , 0);
            curl_setopt ($c, CURLOPT_TIMEOUT  , 20);

            $pdf = curl_exec ($c);
            $errorCode = curl_getinfo($c, CURLINFO_HTTP_CODE);
            $curlInfo = curl_getinfo($c);
            $curlError = curl_error($c);

            curl_close ($c); 
```

我完全没有想法和解决方案，请帮助，我将不胜感激！！！

如果我详细说明输出以查看使用时会发生什么

```
curl_setopt ($c, CURLOPT_VERBOSE, TRUE);
curl_setopt($c, CURLOPT_STDERR, $fp); 
```

我得到以下

```
* About to connect() to 196.41.139.168 port 80 (#0)
*   Trying 196.x.x.x... * connected
* Connected to 196.x.x.x (196.x.x.x) port 80 (#0)
> POST /serve/?r=pdf/generatePdf HTTP/1.1
Host: 196.x.x.x
Accept: */*
Content-Length: 7115
Content-Type: application/x-www-form-urlencoded
Expect: 100-continue

* Recv failure: Connection reset by peer
* Closing connection #0
012 20:23:49 GMT
< Server: Apache/2.2.15 (CentOS)
< X-Powered-By: PHP/5.3.3
< Connection: close
< Transfer-Encoding: chunked
< Content-Type: text/html; charset=UTF-8
< 
* Closing connection #0 
```

我在以下脚趾中添加了删除默认标题，但仍然没有运气：

```
curl_setopt ($c, CURLOPT_HTTPHEADER, array( 'Expect:' ) );

> Accept: */* Content-Length: 8414 Content-Type:
> application/x-www-form-urlencoded
> 
> * Recv failure: Connection reset by peer
> * Closing connection #0 r: Apache/2.2.15 (CentOS) < X-Powered-By: PHP/5.3.3 < Connection: close < Transfer-Encoding: chunked <
> Content-Type: text/html; charset=UTF-8 < 
> * Closing connection #0 
```

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-04-27T11:35:01.627

## 介绍

远程服务器向您发送了一个 RST 数据包，这表明连接立即断开，而不是通常的握手。

## 可能的原因

A. **TCP/IP**

这可能是您需要通过主机解决的 TCP/IP 问题或升级您的操作系统，大多数情况下，在远程服务器完成下载内容之前，连接已关闭，导致`Connection reset by peer`.....

B.**内核错误**

请注意，在 v2.6.17 之后，某些 Linux 内核上的 TCP 窗口缩放存在一些问题。有关详细信息，请参阅以下错误报告：

[https://bugs.launchpad.net/ubuntu/+source/linux-source-2.6.17/+bug/59331](https://bugs.launchpad.net/ubuntu/+source/linux-source-2.6.17/+bug/59331)

[https://bugs.launchpad.net/ubuntu/+source/linux-source-2.6.20/+bug/89160](https://bugs.launchpad.net/ubuntu/+source/linux-source-2.6.20/+bug/89160)

C. **PHP & CURL 错误**

您正在使用`PHP/5.3.3`的也有一些严重的错误......我建议您使用更新版本的`PHP`和`CURL`

[https://bugs.php.net/bug.php?id=52828](https://bugs.php.net/bug.php?id=52828)

[https://bugs.php.net/bug.php?id=52827](https://bugs.php.net/bug.php?id=52827)

[https://bugs.php.net/bug.php?id=52202](https://bugs.php.net/bug.php?id=52202)

[https://bugs.php.net/bug.php?id=50410](https://bugs.php.net/bug.php?id=50410)

D.**最大传输单元**

此错误的一个常见原因是通过网络连接传输的数据包的 MTU（最大传输单元）大小已从默认值 1500 字节更改。如果您已经配置了`VPN`这很可能必须在配置期间更改

D.**防火墙：iptables**

如果您不知道如何绕过这些人，他们可能会导致一些严重的问题.. 尝试访问您正在连接的服务器以检查以下内容

*   您可以访问该服务器上的端口 80

例子

```
 -A RH-Firewall-1-INPUT -m state --state NEW -m tcp -p tcp --dport 80 -j ACCEPT` 
```

*   以下是在最后一行而不是在任何其他 ACCEPT 之前

例子

```
 -A RH-Firewall-1-INPUT -j REJECT --reject-with icmp-host-prohibited 
```

*   检查所有 DROP、REJECT 并确保它们没有阻止您的连接

*   临时允许所有连接，看看它是否通过

## 实验

在不同的服务器或远程服务器上尝试（网上有很多免费的云托管）并测试相同的脚本。如果它有效，那么我的猜测是正确的......`You need to update your system`

## 其他代码相关

A. **SSL**

如果`Yii::app()->params['pdfUrl']`是一个`https`不包含正确 SSL 设置的 url，也会在旧版本的 curl 中导致此错误

解决方案：确保已安装并启用 OpenSSL，然后将其添加到您的代码中

```
curl_setopt($c, CURLOPT_SSL_VERIFYPEER, false);
curl_setopt($c, CURLOPT_SSL_VERIFYHOST, false); 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-04-30T18:00:54.270

通常，此错误表示已与服务器建立连接，但该连接已被远程服务器关闭。这可能是由于服务器速度慢、远程服务器出现问题、网络问题或（可能）由于数据发送到远程服务器时出现某种安全错误，但我发现这不太可能。

通常，网络错误会在一段时间内自行解决，但听起来您已经给了它一点时间。

cURL 有时会遇到 SSL 和 SSL 证书问题。我认为您的 Apache 和/或 PHP 是使用最新版本的 cURL 和 cURL SSL 库编译的，而且我认为您的 Web 服务器中没有安装 OpenSSL。

虽然我不能确定但是，我相信 cURL 在历史上一直使用 SSL 证书，而 Open SSL 没有。

无论如何，尝试在服务器上安装 Open SSL 并重试，这应该可以帮助您摆脱此错误。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-27T17:31:24.593

那么`Yii::app()->params['pdfUrl']`给出的 URL 是什么？您说它应该是 https，但是日志显示它正在端口 80 上连接......几乎没有服务器设置为接受 https 连接。cURL 足够聪明，可以知道 https 应该在端口 443 上......这表明您的 URL 中有一些奇怪的东西，例如：`https://196.41.139.168:80/serve/?r=pdf/generatePdf`

当另一端的 Apache 无法在该端口上与您进行 https 通信时，这将导致连接终止。

当您在两行之后设置为数组时，您意识到您的第一个`$body`定义被替换了吗？`$body`{可能只是你试图解决问题的产物}你也没有编码`client_url`and`client_id`值（前者很可能包含需要转义的字符！）哦，你在`$body_str`没有先初始化它的情况下追加。

从您的详细输出中，我们可以看到 cURL 正在添加一个`content-length`标题，但是......它是否正确？我可以在互联网上看到一些关于该数字错误的评论（尤其是旧版本）...如果该数字太小（例如），您将在发送所有数据之前获得连接重置。您可以手动插入标题：

```
curl_setopt ($c, CURLOPT_HTTPHEADER, 
   array("Content-Length: ". strlen($body_str))); 
```

哦，还有一个方便的函数[`http_build_query`](http://ca3.php.net/http_build_query) 可以为您将一组名称/值对转换为 URL 编码的字符串。

所有这些都汇总到最终代码中：

```
$post=http_build_query(array(
  "client_url"=>Yii::app()->params['pdfClientURL'],
  "client_id"=>Yii::app()->params['pdfClientID'],
  "title"=>$title,
  "content"=>$content));

//Open to URL
$c=curl_init(Yii::app()->params['pdfUrl']);
//Send post
curl_setopt ($c, CURLOPT_POST, true);
//Optional: [try with/without]
curl_setopt ($c, CURLOPT_HTTPHEADER, array("Content-Length: ".strlen($post))); 
curl_setopt ($c, CURLOPT_POSTFIELDS, $post);
curl_setopt ($c, CURLOPT_RETURNTRANSFER, true);
curl_setopt ($c, CURLOPT_CONNECTTIMEOUT , 0);
curl_setopt ($c, CURLOPT_TIMEOUT  , 20);
//Collect result
$pdf = curl_exec ($c);
$curlInfo = curl_getinfo($c);
curl_close($c); 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-03-19T19:44:18.987

我遇到了同样的错误，但方式不同。

当您使用特定 SSL 协议卷曲页面时。

```
curl --sslv3 https://example.com 
```

如果目标服务器不支持 --sslv3 则错误将是

> curl: (35) 对等方重置 TCP 连接

使用支持的协议，错误将消失。

```
curl --tlsv1.2 https://example.com 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-10-13T05:30:47.867

这是一个防火墙问题，如果您使用的是 VMware 应用程序，请确保防病毒软件上的防火墙已关闭或允许连接。

如果此服务器在安全网络上，请查看服务器的防火墙规则。

谢谢 Ganesh PNS

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-12-04T05:31:46.507

在与负载均衡器建立 websocket 连接时，我们遇到了同样的问题。问题出在 LB 中，接受端口 80 上的 http 连接并将请求转发到节点（端口 8080 上的 tomcat 应用程序）。我们已将其更改为接受端口 80 上的 tcp（http 已更改为“tcp”）连接。因此，第一个握手请求被转发到 Node，并且随机成功建立了一个 websocket 连接（据我所知，可能是错误）端口。

以下命令已用于测试 websocket 握手过程。

`curl -v -i -N -H "Connection: Upgrade" -H "Upgrade: websocket" -H "Host: localhost" -H "Origin: http://LB URL:80" http://LB URL`

*   将 URL 重建为：http:LB URL/
*   正在尝试 LB URL...
*   TCP_NODELAY 设置
*   连接到 LB URL (LB URL) 端口 80 (#0)

    > GET / HTTP/1.1 Host: localhost User-Agent: curl/7.60.0 Accept: */* Connection: Upgrade Upgrade: websocket Origin: [http://LB](http://LB) URL:80

*   接收失败：对等方重置连接
*   关闭连接 0 curl: (56) Recv failure: Connection reset by peer

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-04T20:59:09.253

就我而言，URL 有问题。我使用[了 https://example.com](https://example.com) - 但他们确保“www”。- 所以当我切换到[https://www.example.com](https://www.example.com)时一切正常。发送了正确的标头“主机：www.example.com”。

您可以尝试在 firefox brwoser 中发出请求，将其保留并复制为 cURL - 我是如何找到它的。

# bubble-sort - 冒泡排序：升序列表与降序列表

> ID：10285701
> 
> 赞同：-3
> 
> 时间：2012-04-23T17:55:44.440
> 
> 标签：bubble-sort, sorting

> L1 = [9, 8, 7, 6, 5, 4, 3, 2, 1]
> L2 = [8, 1, 3, 6, 9, 7, 4, 2, 5]

`L1`由于元素按非升序排列，会导致冒泡排序进行更多交换吗？我真的不明白是什么决定了bubblesort做更多/更少的交换。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:07:33.170

**是**的，L2 会让冒泡排序做更多的交换。冒泡排序被严重减慢`turtles`（即靠近列表末尾的小数字）。`Rabbits`（即，代码开头附近的大量数字）被快速交换并且无关紧要，而海龟在列表中缓慢地向前移动，每次迭代一次。

这就是为什么您几乎从不在任何繁重的排序代码中使用冒泡排序的原因。[介绍排序](http://en.wikipedia.org/wiki/Introsort)和[鸡尾酒排序](http://en.wikipedia.org/wiki/Cocktail_sort)是冒泡排序的更好变体。

我不明白你为什么在这里问这个问题，以及为什么你用/标记了这个问题`python`（尽管这*是*我首先看到这个问题的唯一原因）。

# swing - Java SE 二进制崩溃

> ID：10285717
> 
> 赞同：2
> 
> 时间：2012-04-23T17:57:09.993
> 
> 标签：swing, crash, java

我有一个 Java swing 应用程序，它订阅大量数据并以各种方式显示这些数据。在繁重的负载下，我发现 JRE 只是停止工作并显示消息“Java(TM) Platform SE 二进制文件已停止工作”。这显然会关闭我的应用程序，我需要重新启动它。我试图用谷歌搜索解决这个问题的方法，因为我的代码中没有堆栈跟踪或任何我可以使用的东西，但除了升级/重新安装 JRE 和运行病毒扫描之外，我发现的有用信息很少。我已经完成了这两项措施并重新启动了服务器，但问题仍然存在。我曾尝试使用 Java VisualVM 监控该过程（请参阅下面的转储），但我不是该工具的专家，可能不知道要寻找什么。我所做的观察是“崩溃”

该问题很容易重现，并在运行应用程序大约 10 分钟后发生。我不使用任何特定的 jvm 参数运行应用程序。Java 版本是 1.6.0_31（升级前是 _25），我在 Windows 7 64 位上运行。

在 VisualVM 的下图中，Java 二进制文件刚刚停止工作，这似乎与 GC 运行一致。 ![从 Java VisualVM 转储](../Images/ca94ccf013e427e3da74bb76aa9c7fdf.png)

非常感谢任何帮助或想法，以便我可以解决或解决问题。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T18:03:23.563

要检查的三件事：

1.  如果您在`finalize()`任何地方实现了该方法，请确保它不会直接或间接锁定任何对象；这可能会导致与 GC 相关的灾难性死锁。

2.  如果您有本机代码，如果代码没有正确使用全局引用，则可能会发生任何奇怪的事情，包括死锁和奇怪的内存损坏，这将再次与 GC 活动相关。

3.  最后，GC 可能只是“搅局”并暴露应用程序中原本存在的普通死锁；检查您的同步协议。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T18:00:15.593

垃圾收集会在发生时暂停 VM 的应用程序线程，这可能会在某处暴露竞争条件。

# c - 在 CUDA 中使用共享内存而不减少线程

> ID：10285718
> 
> 赞同：1
> 
> 时间：2012-04-23T17:57:17.297
> 
> 标签：c, cuda, shared-memory

查看 Mark Harris 的归约示例，我想看看是否可以让线程在没有归约操作的情况下存储中间值：

例如 CPU 代码：

```
for(int i = 0; i < ntr; i++)
{
    for(int j = 0; j < pos* posdir; j++)
    {
        val = x[i] * arr[j];
        if(val > 0.0)
        {
            out[xcount] = val*x[i];
            xcount += 1;
        }
    }
} 
```

等效的GPU代码：

```
const int threads = 64; 
num_blocks = ntr/threads;

__global__ void test_g(float *in1, float *in2, float *out1, int *ct, int posdir, int pos)
{
    int tid = threadIdx.x + blockIdx.x*blockDim.x;
    __shared__ float t1[threads];
    __shared__ float t2[threads];

    int gcount  = 0;

    for(int i = 0; i < posdir*pos; i += 32) {
        if (threadIdx.x < 32) {
            t1[threadIdx.x] = in2[i%posdir];
        }
       __syncthreads();

        for(int i = 0; i < 32; i++)
        {
            t2[i] = t1[i] * in1[tid];
                if(t2[i] > 0){
                    out1[gcount] = t2[i] * in1[tid];
                    gcount = gcount + 1;
                }
        }
    }        
    ct[0] = gcount;
} 
```

我在这里尝试做的是以下步骤：

(1)将in2的32个值存储在共享内存变量t1中，

(2)对于i和in1[tid]的每一个值，计算t2[i]，

(3)`if t2[i] > 0`对于 i 的特定组合，`t2[i]*in1[tid]`写入`out1[gcount]`

但是我的输出全错了。我什至无法计算 t2[i] 大于 0 的所有时间。

关于如何为每个 i 和 tid 保存 gcount 值的任何建议？在调试时，我发现对于块 (0,0,0) 和线程 (0,0,0)，我可以按顺序看到 t2 的值已更新。在 CUDA 内核将焦点切换到 block(0,0,0) 和 thread(32,0,0) 后，out1[0] 的值再次被重写。如何获取/存储每个线程的 out1 的值并将其写入输出？

到目前为止，我尝试了两种方法：（@paseolatis 在 NVIDIA 论坛上建议）

(1) 定义`offset=tid*32; and replace out1[gcount] with out1[offset+gcount]`，

(2) 定义

```
__device__ int totgcount=0; // this line before main()
atomicAdd(&totgcount,1);
out1[totgcount]=t2[i] * in1[tid];

int *h_xc = (int*) malloc(sizeof(int) * 1);
cudaMemcpyFromSymbol(h_xc, totgcount, sizeof(int)*1, cudaMemcpyDeviceToHost);
printf("GPU: xcount = %d\n", h_xc[0]); // Output looks like this: GPU: xcount = 1928669800 
```

有什么建议么？提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T20:40:07.390

好的，让我们将您对代码应该做什么的描述与您发布的内容进行比较（这有时称为[橡皮鸭调试](http://en.wikipedia.org/wiki/Rubber_duck_debugging)）。

1.  将 in2 的 32 个值存储在共享内存变量中`t1`

    您的内核包含以下内容：

    ```
    if (threadIdx.x < 32) {
        t1[threadIdx.x] = in2[i%posdir];
    } 
    ```

    这有效地将*相同的值*加载到的`in2`每个值中`t1`。我怀疑你想要更像这样的东西：

    ```
    if (threadIdx.x < 32) {
        t1[threadIdx.x] = in2[i+threadIdx.x];
    } 
    ```

2.  对于 i 和 的每个值`in1[tid]`，计算`t2[i]`，

    这部分没问题，但为什么`t2`在共享内存中需要呢？它只是内部迭代完成后可以丢弃的中间结果。你可以很容易地拥有类似的东西：

    ```
    float inval = in1[tid];
    .......
    for(int i = 0; i < 32; i++)
    {
         float result = t1[i] * inval;
         ...... 
    ```

3.  如果`t2[i] > 0`对于 i 的特定组合， `t2[i]*in1[tid]`请写入`out1[gcount]`

    这才是问题真正开始的地方。在这里你可以这样做：

    ```
     if(t2[i] > 0){
                out1[gcount] = t2[i] * in1[tid];
                gcount = gcount + 1;
            } 
    ```

    这是一场记忆竞赛。`gcount`是一个线程局部变量，因此每个线程将在不同的时间`out1[gcount]`用自己的值覆盖任何给定的值。为了让这段代码能像所写的那样正常工作，你必须拥有`gcount`一个全局内存变量并使用原子内存更新来确保每个线程在`gcount`每次输出值时都使用一个唯一的值。但是请注意，如果经常使用原子内存访问会非常昂贵（这就是为什么我在评论中询问每次内核启动有多少输出点）。

生成的内核可能如下所示：

```
__device__ int gcount; // must be set to zero before the kernel launch

__global__ void test_g(float *in1, float *in2, float *out1, int posdir, int pos)
{
    int tid = threadIdx.x + blockIdx.x*blockDim.x;
    __shared__ float t1[32];

    float ival = in1[tid];

    for(int i = 0; i < posdir*pos; i += 32) {
        if (threadIdx.x < 32) {
            t1[threadIdx.x] = in2[i+threadIdx.x];
        }
        __syncthreads();

        for(int j = 0; j < 32; j++)
        {
            float tval = t1[j] * ival;
            if(tval > 0){
                int idx = atomicAdd(&gcount, 1);
                out1[idx] = tval * ival
            }
        }
    }        
} 
```

免责声明：用浏览器编写，从未编译或测试过，使用风险自负.....

请注意，您的写入`ct`也是内存竞争，但现在 gcount 是一个全局值，您可以在内核之后读取该值，而无需`ct`.

* * *

`gcount`编辑：在运行内核之前，您似乎在归零方面遇到了一些问题。要做到这一点，您将需要使用类似`cudaMemcpyToSymbol`或可能`cudaGetSymbolAddress`和的东西`cudaMemset`。它可能看起来像：

```
const int zero = 0;
cudaMemcpyToSymbol("gcount", &zero, sizeof(int), 0, cudaMemcpyHostToDevice); 
```

同样，通常的免责声明：用浏览器编写，从未编译或测试过，使用风险自负.....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T20:14:01.007

做你正在做的事情的更好方法是给每个线程自己的输出，让它增加自己的输出`count`并输入值 - 这样，双 for 循环可以以任何顺序并行发生，这就是 GPU 所做的出色地。输出是错误的，因为线程共享 out1 数组，所以它们都会覆盖它。

您还应该将要复制到共享内存中的代码移动到单独的循环中，并在`__syncthreads()`后面加上。使用`__syncthreads()`循环外，您应该获得更好的性能 - 这意味着您的共享数组必须是 in2 的大小 - 如果这是一个问题，那么在这个答案的末尾有一个更好的方法来处理这个问题。

您还应该将`threadIdx.x < 32`支票移到外面。所以你的代码看起来像这样：

```
if (threadIdx.x < 32) {
    for(int i = threadIdx.x; i < posdir*pos; i+=32) {
        t1[i] = in2[i];
    }
}
__syncthreads();

for(int i = threadIdx.x; i < posdir*pos; i += 32) {
    for(int j = 0; j < 32; j++)
    {
         ...
    }
} 
```

然后将`__syncthreads()`、 的原子加法`gcount += count`和从本地输出数组复制到全局输出数组 - 这部分是顺序的，会损害性能。如果可以的话，我只需要一个指向每个本地数组的指针的全局列表，然后将它们放在 CPU 上。

另一个变化是 t2 不需要共享内存——它对你没有帮助。而你这样做的方式，它似乎只有在你使用单个块时才有效。要从大多数 NVIDIA GPU 中获得良好的性能，您应该将其划分为多个块。您可以根据您的共享内存限制对其进行调整。当然，你没有`__syncthreads()`块之间的块，所以每个块中的线程必须跨越整个范围内循环和外循环的分区。

# android - 自动弹出窗口检测到 Android 布局 XML，但未检测到任何成员

> ID：10285725
> 
> 赞同：0
> 
> 时间：2012-04-23T17:57:42.367
> 
> 标签：android, android-layout, android-activity, android-tabhost

我有一个直接来自教程的布局 XML 文件：

**布局/partnertrial_summary.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="5dp">
        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="5dp" />
    </LinearLayout>
</TabHost> 
```

在我的`Activity`课堂上，我尝试使用以下代码，但如果失败：

```
mTabHost = findViewById(R.layout.partnertrial_summary.tabhost); 
```

失败了。但是，它验证了`R.layout.partnertrial_summary`绿色中的部分，但是当我尝试自动弹出它的成员时，`partnertrial_summary`它什么也没产生。

我认为 XML 是有效的，因为它直接来自 Android，所以这是我做错的事情。请注意， my`Activity`不是 a `TabActivity`，但我认为可以使用常规的并添加 a `TabHost`，实现适当的侦听器。如果我的想法是错误的，请纠正我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T17:59:35.773

```
mTabHost = findViewById(R.layout.partnertrial_summary.tabhost); 
```

替换上面的如下

```
LayoutInflater inflater = (LayoutInflater)getApplicationContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);
View view = inflater.inflate(R.layout.partnertrial_summary,null);
 mTabHost = (TabHost)view.findViewById(R.id.tabhost); 
```

布局可以膨胀但无法使用 findViewById() 找到

# c# - asp.net多表更新语句

> ID：10285726
> 
> 赞同：0
> 
> 时间：2012-04-23T17:57:51.570
> 
> 标签：c#, asp.net, sql, sql-server-2008, tsql

我需要将此查询转换为更新语句。我将不得不更新字段中的值。除了更新声明之外，一切都已经到位。

这是查询的选择版本：

```
SELECT i.GoLiveDate, i.FirstBonusRun, i.TechFName, i.TechLName, i.TechEmail, i.TechPhone, i.WebISPFName, i.WebISPLName, 
              i.WebISPEmail, i.WebISPPhone, i.FullFillFName, i.FullFillLName, i.FullFillEmail, i.FullFillPhone, d.FName,
              d.LName, d.HomePhone, d.Email
              FROM NC_Information i
              INNER JOIN Distributor d
                ON d.DistID = i.ClientID
              WHERE clientID = @value 
```

是否可以从同一个查询中更新两个不同的表？

这是我到目前为止的代码：

```
public void Update (int ClientID)
{
    using ( var conn = new SqlConnection( GeneralFunctions.GetConnectionString() ) )
    using ( var cmd = conn.CreateCommand() )
    {
        conn.Open();
        cmd.CommandText =
        @"SELECT i.GoLiveDate, i.FirstBonusRun, i.TechFName, i.TechLName, i.TechEmail, i.TechPhone, i.WebISPFName, i.WebISPLName, 
          i.WebISPEmail, i.WebISPPhone, i.FullFillFName, i.FullFillLName, i.FullFillEmail, i.FullFillPhone, d.FName,
          d.LName, d.HomePhone, d.Email
          FROM NC_Information i
          INNER JOIN Distributor d
            ON d.DistID = i.ClientID
          WHERE clientID = @value";
        cmd.Parameters.AddWithValue( "@value", ClientID );
        cmd.ExecuteNonQuery();
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T18:04:02.527

您不能在一个语句中更新多个表，但您可以使用事务来确保更新相互依赖：

```
BEGIN TRANSACTION

UPDATE SomeTable
SET SomeColumn  = 'Foo' 
WHERE SomeID = 123   

UPDATE AnotherTable
SET AnotherColumn = 'Bar'
WHERE AnotherID = 456    

COMMIT 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T18:11:32.857

我认为，您不能直接对两个表进行更新。但是可以`Optimize`查询。

## 如何？

**[插入/更新/删除语句中的 OUTPUT 关键字](http://msdn.microsoft.com/en-us/library/ms177564.aspx)**

第一个`Update Statement's Select Data(filtered data)`可以使用下面提到的示例重用。

```
CREATE TABLE #table1
(
    id INT,
    employee VARCHAR(32)
)
go

INSERT INTO #table1 VALUES 
      (1, 'name1')
     ,(2, 'name2')
     ,(3, 'name3')
     ,(4, 'name4');
GO

DECLARE @GuestTable TABLE
(
    id INT,
    employee VARCHAR(32)
);

update #table1
Set id = 33
OUTPUT inserted.* INTO @GuestTable
Where id = 3 
```

> '@GuestTable' 表中的数据是过滤后的数据，可以重复使用。

```
select * from @GuestTable

drop table #table1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T18:17:52.640

或者，您可以创建一个包含两个数据表的数据集，并让[tableadaptermanager](http://msdn.microsoft.com/en-us/library/bb384426.aspx)管理更新。

# forms - 如何限制所选日期

> ID：10285727
> 
> 赞同：0
> 
> 时间：2012-04-23T17:58:06.127
> 
> 标签：forms, date, axapta, microsoft-dynamics, ax

如何在 AX 表单的 DateEdit 控件中禁用大于今天的日期？

可以使用日期扩展数据类型吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T07:15:52.480

无法在扩展数据类型级别上限制日期范围。

您必须验证输入的日期。

验证方法（首选方法优先）：

1.  `validateField`桌上
2.  `validateWrite`在桌子上（如果比较两个输入的日期）
3.  `validate`在表单域上
4.  `validate`关于表单控制

另请参阅[方法序列](http://msdn.microsoft.com/en-us/library/aa876155%28v=ax.10%29.aspx)。

# v8 - 限制 V8 上下文的内存

> ID：10285737
> 
> 赞同：3
> 
> 时间：2012-04-23T17:58:48.137
> 
> 标签：v8

我有一个脚本服务器，可以在我们的服务器上运行任意 java 脚本代码。在任何给定时间，都可以运行多个脚本，我想防止一个行为不端的脚本耗尽机器上的所有内存。我可以通过让每个脚本在自己的进程中运行并使用现成的监视工具来监视每个进程的内存使用情况，杀死并重新启动那些失控的进程来做到这一点。我不想这样做，因为我想避免每次这些脚本之一发疯时重新启动二进制文件的成本。v8 中有没有办法设置每个上下文/隔离内存限制，我可以用它来沙箱运行脚本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-14T01:53:34.550

单个进程可以运行多个隔离，如果您有 1 个隔离与 1 个上下文的比率，您可以轻松

1.  限制每个隔离的内存使用
2.  获取堆统计信息

请参阅此提交中的一些示例：

[https://github.com/discourse/mini_racer/commit/f7ec907547e9a6ea888b2587e4edee3766752dd3](https://github.com/discourse/mini_racer/commit/f7ec907547e9a6ea888b2587e4edee3766752dd3)

特别是你有：

```
v8::HeapStatistics stats;
isolate->GetHeapStatistics(&stats); 
```

还有一些花哨的功能，例如您可以使用的内存分配回调。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-09T15:40:26.540

现在应该很容易做到

*   `context.EstimatedSize()`获得上下文的估计大小
*   `isolate.TerminateExecution()`当上下文超出可接受的内存/cpu使用率/无论什么时候

为了在存在无限循环（或其他阻塞，如高 CPU 计算）时获得访问权限，我认为您可以使用`isolate.RequestInterrupt()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T16:38:28.293

这是不可能的。此进程的所有 JavaScript 上下文共享同一个对象堆。

WebKit/Chromium 在上下文 OOM 之后尝试了一些方法来禁用上下文。 [http://code.google.com/searchframe#OAMlx_jo-ck/src/third_party/WebKit/Source/WebCore/bindings/v8/V8Proxy.cpp&exact_package=chromium&q=V8Proxy&type=cs&l=361](http://code.google.com/searchframe#OAMlx_jo-ck/src/third_party/WebKit/Source/WebCore/bindings/v8/V8Proxy.cpp&exact_package=chromium&q=V8Proxy&type=cs&l=361)

资料来源：

*   [http://code.google.com/p/v8/source/browse/trunk/src/heap.h?r=11125&spec=svn11125#280](http://code.google.com/p/v8/source/browse/trunk/src/heap.h?r=11125&spec=svn11125#280)
*   [http://code.google.com/p/chromium/issues/detail?id=40521](http://code.google.com/p/chromium/issues/detail?id=40521)
*   [http://code.google.com/p/chromium/issues/detail?id=81227](http://code.google.com/p/chromium/issues/detail?id=81227)

# python - Python logging + webassets + cssutils：为 cssutils 设置日志级别

> ID：10285738
> 
> 赞同：0
> 
> 时间：2012-04-23T17:58:48.953
> 
> 标签：python, css, logging

我使用 jinja 和 webassets 进行资产管理以及 cssutils 来缩小和合并 css 文件。问题是当 cssutils 产生“致命错误”时，它会启动我使用 python 日志记录设置的电子邮件警报系统。问题是错误并不是真正致命的，解析器不知道该属性，但页面仍然可以正常呈现，并且 css 是有效的 css（它主要来自它所涉及的 twitter bootstrap）。如何设置 cssutils 以将其错误抑制到较低级别，这样我就不会收到 50 个错误警报，因为它不喜欢渐变语法。

```
[ERROR 2012-04-23 13:59:35,844] - MainProcess (13706) - (errorhandler:__handle:100) Property: Invalid value for "CSS Level 2.1" property: rgba(0,0,0,.75) [3518:3: background] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T23:35:44.440

将处理程序的级别设置为高于您要抑制的级别，或者`logging.Filter`在相关处理程序中添加一个并将其级别设置为高于您要抑制的级别。

# graph-theory - 中型图中的集团枚举

> ID：10285739
> 
> 赞同：2
> 
> 时间：2012-04-23T17:58:55.750
> 
> 标签：graph-theory

我有一个中等大小的图（570 个节点，6912​​7 条边，密度：gexf 格式的 0.42），我想枚举所有大小大于 N 的集团（比如 5）。最有效的方法是什么？我正在寻找任何流行语言或软件包的库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T01:24:01.277

您可以使用实现 Tomita 等人的[SNAP 网络分析库。](http://snap.stanford.edu/)2006 算法。所有其他理论上快速的算法已被证明比 Tomita 等人慢得多。在实践中，至少对于稀疏图（Eppstein et al. 2010）。

如果该算法对大图需要太多内存，您可以尝试 Eppstein 等人的线性空间算法。2010/2011 年。

*   富田，E。Tanaka, A. & Takahashi, H. 生成所有最大团和计算实验的最坏情况时间复杂度。理论计算机科学, 2006, 363, 28 - 42\. [DOI:10.1016/j.tcs.2006.06.015](http://dx.doi.org/10.1016/j.tcs.2006.06.015)

*   爱普斯坦，D。Löffler, M. & Strash, D. Cheong, O. 在接近最佳时间的稀疏图中列出所有最大团。ISAAC '10：过程。第 21 届算法与计算国际研讨会，Springer Berlin / Heidelberg，2010, 6506, 403-414。[DOI:10.1007/978-3-642-17517-6_36](http://dx.doi.org/10.1007/978-3-642-17517-6_36)

*   Eppstein, D. & Strash, D. 列出大型稀疏现实世界图中的所有最大派系。海'11：过程。第 10 届实验算法国际研讨会，Springer Berlin / Heidelberg，2011, 6630, 364-375。[DOI:10.1007/978-3-642-20662-7_31](http://dx.doi.org/10.1007/978-3-642-20662-7_31)

# android - 签署 Android 应用程序时如何解决无效的 SHA1 签名？

> ID：10285740
> 
> 赞同：4
> 
> 时间：2012-04-23T17:59:01.133
> 
> 标签：android

当我验证我的应用程序的签名时：

```
jarsigner -verify -verbose -certs testapp.apk 
```

它给了我错误：

`jarsigner: java.lang.SecurityException: invalid SHA1 signature file digest for res/drawable-xhdpi/breadcrumb_grey_white.png`

如何解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-28T08:46:22.550

确保在签名之前删除 apk 中的 META_INF 文件夹。此外，如果您使用的是 JDK 7，则在使用 jarsigner 签名时包含选项 -sigalg MD5withRSA 以及 Andrejs 提到的 -digestalg SHA1

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T19:18:12.407

**从[这里](https://stackoverflow.com/questions/8176166/invalid-sha1-signature-file-digest)撕下来。**

这是解决方案：

```
jarsigner -keystore mykeystore -digestalg SHA1 jarfile alias 
```

验证：

```
jarsigner -verify -verbose -certs jarfile 
```

# ruby-on-rails - RoR 双外键

> ID：10285745
> 
> 赞同：1
> 
> 时间：2012-04-23T17:59:23.277
> 
> 标签：ruby-on-rails

我有一个用户表和一个请求表。用户表包含员工和客户。我已将 user_id 和 employee_id 添加到请求表中。

我认为以下内容可以让我让两个外键都指向用户表：

```
belongs_to :user          # foreign_key "user_id"
belongs_to :employee, :class_name => "user", :foreign_key => "employee_id" #   foreign_key "employee_id" 
```

但是，我从这个表单行得到“未初始化的常量请求：：用户”：

```
 <%= f.association :employee, :label_method => :full_name, :label => 'Assigned To' %> 
```

我究竟做错了什么？谢谢 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T18:17:32.847

您是否尝试过使用`:class_name => "User"`而不是`:class_name => "user"`？

# python - 在python中将多个参数传递给类init的最佳方法是什么？

> ID：10285748
> 
> 赞同：0
> 
> 时间：2012-04-23T17:59:27.440
> 
> 标签：python

我正在 python 中创建一个可以接受多个参数的模块。将参数传递给方法定义的最佳方式是什么？

```
定义 abc(arg):
    ...

abc（{“主机”：“10.1.0.100”，“协议”：“http”}）

```

```
def abc（主机，协议）：
    ...

abc("10.1.0.100", "http")

```

```
def abc(**kwargs):
    ...

abc（主机=“10.1.0.100”，协议=“http”）

```

或者是其他东西？

# 编辑

实际上，我将拥有那些不需要它们的参数（用户名、密码、协议、主机、密码2）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T18:01:53.470

```
def abc(host, protocol):
    ...

abc("10.1.0.100", "http")
abc(host="10.1.0.100", protocol="http") 
```

如果您使用位置参数或关键字参数调用它，取决于参数的数量以及是否跳过任何​​参数。对于您的示例，我认为使用关键字 args 调用该函数没有多大用处。

* * *

现在其他解决方案不好的一些原因：

```
abc({"host" : "10.1.0.100", "protocol" : "http"}) 
```

这是在缺少真正关键字参数的语言（通常是 JavaScript）中常用的关键字参数的解决方法。在那些语言中它很好，但在 Python 中它是错误的，因为你绝对没有从中获得任何好处。如果您想从 dict 中使用 args 调用函数，`abc(**{...})`无论如何您都可以这样做。

```
def abc(**kwargs): 
```

人们期望该函数接受很多——甚至可能是任意的——参数。除此之外，他们看不到哪些参数是可能的/需要的，您必须自己编写代码来要求某些参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T18:03:13.377

如果所有参数都预先知道，请使用显式参数列表，可选择使用默认值，例如`def abc(arg1="hello", arg2="world",...)`. 这将使代码最易读。

调用函数时，可以使用`abd("hello", "world")`或`abc(arg1="hello", arg2="world")`。如果参数超过 4 或 5 个，我会使用较长的形式，这是个人喜好问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T18:10:22.233

这实际上取决于您的方法的上下文、设计和目的。

如果参数是定义的并且是强制性的，那么最好的选择是：

```
def abc(host, protocol):
    ...

abc('10.1.0.100', 'http') 
```

如果参数已定义但可选，则：

```
def abc(host=None, protocol=None): # I used None, but put a default value
    ... 
```

您可以通过位置参数将其称为`abc('10.1.0.100', 'http')`或以其名称命名`abc(protocol='http')`

如果您一开始不知道它将接收的参数是什么（例如在字符串格式中），那么最好的选择是使用`**kwargs`参数：

```
def abc(**kwargs):
    ... 
```

通过这种方式，您必须使用命名参数调用它。

# php - 即使提供了错误的用户名和密码，PHP 登录脚本也会重定向

> ID：10285749
> 
> 赞同：1
> 
> 时间：2012-04-23T17:59:31.687
> 
> 标签：php, sqlite, redirect, login

那是代码

```
<?php

//Start session
session_start();

//Then we retrieve the posted values for user and password.
$username = $_POST['username'];
$password = $_POST['password'];

//Users defined in a SQLite database
$db = new PDO("sqlite:/www/test.db");
$result = $db->query("SELECT COUNT(*) FROM users WHERE Username = '$username' AND Password = '$password'");

if ($result > 0)
{
  //If user and pass match any of the defined users
  $_SESSION['loggedin'] = true;
  // close the database connection
  unset($db);
  header("Location: index.php");
};

//If the session variable is not true, exit to exit page.
if(!$_SESSION['loggedin'])
{
  // close the database connection
  unset($db);
  header("Location: login.html");
  exit;
};

?> 
```

数据库架构：

> 用户名 TEXT NOT NULL PRIMARY KEY UNIQUE，密码 TEXT

唯一的行数 Username='admin' 和 Password='admin'

任何想法为什么脚本每次都会将我重定向到 index.php，即使用户名和密码不在数据库中？

提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T18:02:02.450

`$db->query`如果没有遇到错误，将返回一个资源。不是查询的结果。因此，由于您的查询执行得很好，您将获得一个始终 > 0 的资源句柄。这就是为什么似乎每个人都成功登录的原因。

您需要获取查询结果并检查 COUNT(*) 的值是否大于零（或等于 1）。

# ruby-on-rails - Rails ActiveRecord - 数组属性的唯一性和查找

> ID：10285750
> 
> 赞同：2
> 
> 时间：2012-04-23T17:59:34.703
> 
> 标签：ruby-on-rails, activerecord, serialization, associations

早上好，

我有一个 Rails 模型，我目前正在序列化一组信息。有两件事对我很重要：

1.  我希望能够确保这是唯一的（即不能有两个具有相同数组的模型）
2.  我希望能够在现有模型中搜索此哈希（在一种 find_or_create_by 方法中）。

该模型描述了一个“投资组合”——即一组股票或债券。该数组描述了投资组合中的证券以及权重。我还有第二个模型，它是一组投资组合（为了简单起见，我们称它为“Portcollection”）。一个馆藏有多个作品集，而一个作品集可以在多个馆藏中。换句话说：

```
class Portfolio
  serialize :weights
  has_and_belongs_to_many :portcollections

class Portcollection
  has_and_belongs_to_many :portfolios 
```

当我生成一个“portcollection”时，我需要构建一堆投资组合，我以编程方式进行（实现并不重要）。建立投资组合是一项昂贵的操作，所以我试图首先检查是否存在。我以为我可以通过 find_or_create_by 做到这一点，但运气不佳。这是我目前的解决方案：

```
Class Portcollection
  before_save :build_portfolios

  def build_portfolios
    ……
    proposed_weights = ……
    yml =proposed_weights.to_yaml
    if port = Portfolio.find_by_weights(yml)
      self.portfolios << port
    else
      self.portfolios << Portfolio.create!(:weights => proposed_weights)
    end
    ……..
end 
```

这确实有效，但速度很慢。我有一种感觉，这是因为当我尝试检查现有投资组合（这可能运行数百万次）时，我每次运行时都会将内容转换为 YAML，并且我正在搜索字符串，而不是整数。不过，我确实在此列上有一个索引。

有一个更好的方法吗？我的脑海里闪过几个念头：

*   计算“权重”数组的 MD5 哈希，并保存到数据库列。每次我想搜索一个数组时，我仍然需要计算这个哈希值，但我有一种直觉，这会让数据库更容易索引和搜索？
*   努力从 has_and_belongs_to_many 移动到 has_many => through，并将数组信息存储为数据库列。这样我就可以尝试整理出一个可以检查唯一性的数据库查询，而无需任何 YAML 或序列化……</li>

即类似的东西：

```
class Portfolio
  has_many :portcollections, :through => security_weights

class Portcollections
  has_many :portfolios, :through => security_weights

SECURITY_WEIGHTS
id     portfolio_id      portcollection_id     weight_of_GOOG  weight_of_APPLE ……
1           14                   15                   0.4           0.3 
```

如果它很重要，“权重”数组将如下所示：

```
[ [‘GOOG’, 0.4] , [‘AAPL’, 0.3] , [‘GE’, 0.3] ] 
```

任何帮助，将不胜感激。请记住，我是个业余爱好者——编程对我来说只是一种爱好！如果我正在做任何非常hacky或遗漏一些明显的事情，请原谅我......

谢谢！

**更新 1**

我已经对 Rails 3.2“存储”方法进行了一些研究，但这似乎也不是答案……它只是将对象存储为 JSON，这让我现在缺乏可搜索性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T13:13:43.857

我认为在它自己的列中存储一个单独的哈希是有效地做到这一点的唯一方法。您正在使用旨在不易搜索的序列化或键/值存储。

只要确保在散列它们之前考虑对值进行排序，否则你可能拥有相同的内容但不同的散列。

# c++ - ostream cout 和 char *

> ID：10285753
> 
> 赞同：0
> 
> 时间：2012-04-23T17:59:48.923
> 
> 标签：c++, char, ostream

我有一个这样的字符数组：

```
char arr[3]="hi";
cout << arr;// this will print out hi 
```

operator<< 也有一个重载版本，它接受一个 ostream 对象和 char *。所以`cout<<arr;`第一个 arr 将衰减为聊天 * 。然后 operator<<() 将打印出 char 指针指向的内容，直到找到空字符？

**`cin>>arr;`关于它如何与将数组作为第二个操作数的 operator>> 一起使用**的相同问题。****

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:03:25.770

你的`ostream`and `istream`do have`operator<<`并且`operator>>`重载了 a `char*`，并且数组衰减为指向第一个元素的指针。所以，是的，它按照你说的做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T18:02:51.623

和作品完全一样`cout`。

数组`arr`衰减为指针类型，并且存在作为参数的`istream`as well的重载版本。`char*`所以在腐烂后`arr`传递给`operator>>`as 。`char*`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T18:07:11.227

请参阅此处了解有关以下内容的详细信息`cout`：[标准输出流](http://www.cplusplus.com/reference/iostream/cout/)。在此页面中，请单击并查看显示“ [ostream::operator<<](http://www.cplusplus.com/ostream%3a%3aoperator%3C%3C) ”的链接，同样请参阅此处了解有关`cin`：[标准输入流](http://www.cplusplus.com/reference/iostream/cin/)的详细信息。虽然在这里，请点击并查看“[运营商（>>）](http://www.cplusplus.com/istream%3a%3aoperator%3E%3E) ”链接**

# mysql - MySQL 无法创建过程

> ID：10285754
> 
> 赞同：1
> 
> 时间：2012-04-23T17:59:49.267
> 
> 标签：mysql

我正在尝试创建一个程序（将新的类名、类型、国家、枪支数量、口径和排水量作为参数。将此信息添加到类中，并将具有类名的船添加到船舶中）

关系：

```
classes(class, type, country, numGuns, bore, displacement)
ships(name, class, launched)

mysql> CREATE PROCEDURE addClass(in VARCHAR(50) inClassName, in VARCHAR(5) inType, in
VARCHAR(50) inCountry, in INT inNumGuns, in INT inBore, in INT inDis)
-> begin
-> INSERT INTO classes VALUES(inClassName, inType, inCountry, inNumGuns, inBore, inDis);
-> INSERT INTO ships VALUES(inClassName, inClassName, NULL);
-> end
-> //
ERROR 1064 (42000): You have an error in your SQL syntax; check the manual that
corresponds to your MySQL server version for the right syntax to use near 'VARCHAR(50)
inClassName, in VARCHAR(50) inType, in VARCHAR(50) inCountry, in INT' at line 1 
```

我不确定这个错误的来源，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:02:57.800

输入变量名称位于它们的数据类型之前，而不是在您指定它们之后：

```
CREATE PROCEDURE addClass(
  in inClassName VARCHAR(50),
  in inType VARCHAR(5) , 
  in inCountry VARCHAR(50), 
  in inNumGuns INT,
  in inBore INT,
  in inDis INT
)
BEGIN
  INSERT INTO classes VALUES(inClassName, inType, inCountry, inNumGuns, inBore, inDis);
  INSERT INTO ships VALUES(inClassName, inClassName, NULL);
END 
```

[从`CREATE PROCEDURE`文档](http://dev.mysql.com/doc/refman/5.0/en/create-procedure.html)中，规范看起来像

```
proc_parameter:
    [ IN | OUT | INOUT ] param_name type 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T18:07:35.633

更正你的语法。这是一个例子：

```
delimiter //

CREATE PROCEDURE addClass(in inClassName VARCHAR(50),
in inType VARCHAR(5), in inCountry VARCHAR(50),
in inNumGuns INT, in inBore INT, in inDis INT)

begin

INSERT INTO classes VALUES(inClassName, inType, inCountry, inNumGuns, inBore, inDis);
INSERT INTO ships VALUES(inClassName, inClassName, NULL);

end//

delimiter ; 
```

# php - 用jquery处理隐藏字段并计算

> ID：10285757
> 
> 赞同：0
> 
> 时间：2012-04-23T18:00:10.930
> 
> 标签：php, jquery

我有一个 html 表，我已更新为使用复选框来删除多个文件：

```
<table>
    <thead>
    <tr>
        <th>Camera Name</th>
        <th>Date Created</th>
        <th>Video Size</th>
        <th>Video Length</th>
        <th>
            <button type="submit" class="deletebutton" name="delete_video" value="Delete" title="Delete the selected videos" onClick="return confirm('Are you sure you want to delete?')">Delete</button><br>
            <input type="checkbox" name="radioselectall" title="Select All" />
        </th>
    </tr>
    </thead>
    <tbody>

 <?php

for($i=0;$i<$num_videos;$i++)
{
       //do stuff
       //Note: I'm looping here to build the table from the server
?>              
        <tr >
            <td onclick="DoNav('<?php echo $url; ?>');">
                        <?php echo $result_videos[$i]["camera_name"]; ?> 
            </td>
            <td onclick="DoNav('<?php echo $url; ?>');">
                        <?php echo setlocalTime($result_videos[$i]["video_datetime"]); ?> 
            </td>
            <td onclick="DoNav('<?php echo $url; ?>');">
                        <?php echo ByteSize($result_videos[$i]["video_size"]); ?>
            </td>
            <td onclick="DoNav('<?php echo $url; ?>');">
                <?php echo strTime($result_videos[$i]["video_length"]); ?>
            </td>
            <td>
                <form name="myform" action="<?php echo htmlentities($_SERVER['REQUEST_URI']); ?>" method="POST">
                <input type="checkbox" name="radioselect" title="Mark this video for deletion"/>
                <input type="hidden" name="video_name" value="<?php echo $result_videos[$i]["video_name"]; ?>" />
                </form>
            </td>
        </tr> 
```

我首先创建了一些 jquery 代码以在表标题中创建一个全选/取消全选按钮，并且只是一个测试以显示我可以找到哪些框被选中。这一切都有效：

```
//selectall checkboxes - select all or deselect all if top checkbox is marked in table header
$("input[name='radioselectall']").change(function()
{
    if( $(this).is(':checked') )
    {
        $("input[type='checkbox']","td").attr('checked',true);
    } 
    else
    {
        $("input[type='checkbox']","td").attr('checked',false);
    }
});

//process checkboxes - which ones are on 
$(".deletebutton").click(function() {
    $("input[name='radioselect']:checked").each(function(i){
        alert(this.value);
    });
}); 
```

所以我被卡住的部分是我不知道从这里去哪里。我需要传递所有选定视频的所有 video_names（带有复选框）。 `video_name`是我表单中隐藏字段的一部分。So I need to pass that to my php function when the delete button is selected. 不太清楚如何解决这个问题。希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T18:22:17.977

简单的解决方案可能：

将您的复选框更改为值为 1，名称为 $result_videos[$i]["video_name"]; 在表格行中，使表格封装整个表格。

然后在提交时，您可以执行以下操作：

```
foreach ($_POST as $key => $value) {
    //Delete $key (the name) where $value == 1
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T19:11:23.593

如果您想在给定点通过 jQuery 访问隐藏字段，则您的方法很好，但是一旦您提交表单并丢失 DOM，PHP 处理页面将无法将选定的复选框与隐藏字段相关联，因为没有一致的命名方案。

一种方法是使用循环计数器为两者添加后缀，以便将它们配对：

```
<input type="checkbox" id="radioselect_<?= $i ?>" title="Mark this video for deletion" value="1" />
<input type="hidden" id="video_name_<?= $i ?>" value="<?php echo $result_videos[$i]["video_name"]; ?>" /> 
```

如果您想关联的不仅仅是这两个字段，这将是一件好事。否则，您可以按照 Ing 的建议将 video_name 用作复选框的值。

# sql - 使用 SQL 获取在“IN”中具有两个值的记录

> ID：10285761
> 
> 赞同：1
> 
> 时间：2012-04-23T18:00:42.577
> 
> 标签：sql, relational-division

我需要一条 SQL 语句来从数据库中提取那些同时具有附件标签的申请人。如果我想要具有 7 或 8 作为附件标签的申请人，但我需要同时具有这两个标签的申请人，那么下面的 q 语句可以正常工作。

```
select distinct(a.id) from applicant a
join applicantdeployment ad on a.id = ad.applicantid
join ApplicantAttachment at on a.id = at.applicantid
where a.applicanttype = 'TCN/LN' and ad.groundlocation in (4,8,14) and ad.deploymentstatus =1
and ad.trainingdeploymentstatus = 6 and at.tag in (7,8) 
```

例如，从下面的集合中，我只想显示 ids 7332,7451 和 7449。

ID 标签
7328 8
7328 8
7332 8
7332 7
7337 7
7449 8
7449 7
7451 8
7453 7
7451 7

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T18:05:27.583

你需要在下面做，而不是不同的：

```
GROUP BY a.id HAVING COUNT(a.id) = 2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T18:16:55.923

您可以加入 ApplicationAttachment 表两次以确保两个标签都存在。这样您就可以避免使用 DISTINCT 和 GROUP BY。

```
SELECT a.id
FROM applicant a
JOIN applicantdeployment ad ON a.id = ad.applicantid
JOIN ApplicantAttachment at7 ON a.id = at7.applicantid AND at7.tag = 7
JOIN ApplicantAttachment at8 ON a.id = at8.applicantid AND at8.tag = 8
WHERE a.applicanttype = 'TCN/LN' 
AND ad.groundlocation IN (4,8,14)
AND ad.deploymentstatus = 1
AND ad.trainingdeploymentstatus = 6 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T18:09:46.667

在您的示例数据中，不应该选择 7451 吗？您需要修改下面的代码以适合您的查询，但请尝试以下操作：

```
CREATE TABLE #Temp
(
    ID INT,
    Tag INT
)

INSERT INTO #Temp
(
    ID,
    Tag
)
SELECT 7328, 8 UNION
SELECT 7332, 8  UNION
SELECT 7332, 7  UNION
SELECT 7337, 7  UNION
SELECT 7449, 8  UNION
SELECT 7449, 7  UNION
SELECT 7451, 8  UNION
SELECT 7453, 7  UNION
SELECT 7451, 7

select distinct(ad.id) from #Temp ad
join #Temp at on ad.id = at.id
AND ad.Tag != at.Tag
where at.tag in (7,8)
AND ad.Tag IN (7, 8) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T19:00:40.857

如果将 IN 列表项放入名为#Tags 的表中，这将起作用，并且如果标签数量发生变化，则无需重写查询。

```
select distinct(#Temp.ID)
from #Temp
where not exists (
  select * from #Tags
  where not exists (
    select * from #Temp as TempCopy
    where TempCopy.Tag = #Tags.Tag
    and TempCopy.ID = #Temp.ID
  )
) 
```

在英语中，这会选择那些没有缺少任何必需标签的 ID。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T18:13:27.197

尝试：

```
select distinct(a.id)
from applicant a
join applicantdeployment ad on a.id = ad.applicantid
join (select applicantid from applicantattachment at1
join applicantattachment at2 on at1.applicantid=at.applicantid
where at1.tag=7 and at2.tag=8) at
on a.id = at.applicantid
where a.applicanttype = 'TCN/LN'
and ad.groundlocation in (4,8,14)
and ad.deploymentstatus =1
and ad.trainingdeploymentstatus = 6 
```

将申请人附件表加入到自身中以仅获取相关的申请人ID。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-04-23T18:06:43.337

```
select distinct(a.id) from applicant a
join applicantdeployment ad on a.id = ad.applicantid
join ApplicantAttachment at on a.id = at.applicantid
where a.applicanttype = 'TCN/LN' and ad.groundlocation in (4,8,14) and ad.deploymentstatus =1
and ad.trainingdeploymentstatus = 6 and at.tag in (7,8) and a.id IN (7332,7449); 
```

# perl - Coldfusion加密到perl crypt

> ID：10285763
> 
> 赞同：0
> 
> 时间：2012-04-23T18:00:48.690
> 
> 标签：perl, encryption, coldfusion, crypt

是否可以使用 ColdFusion 解密来复制 perl crypt 函数的输出？我不熟悉加密编程，但据我所知，除非另有说明，否则 crypt 使用 DES 算法。Coldfusion可以使用DES算法，但是我不知道要使用什么其他参数。

请允许我澄清一下我的情况。我正在使用供应商提供的用 perl 编写的应用程序。我的本地工具集主要是 ColdFusion。我想通过“丢失密码/重置密码”功能来增强供应商提供的登录功能。我不想更改我可以访问的供应商源代码，因为它会定期升级，我不想继续应用更改。出于多种原因，最好的解决方案是在 ColdFusion 中模拟 perl crypt() 函数输出，这样我就可以在供应商应用程序外部构建密码重置函数。诚然，这是一个尴尬和令人困惑的情况。

我不知道仿真方法是否可行；如果不是，那就回到绘图板上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T18:16:54.867

万一您不知道，perl 的 crypt() 函数（以及标准 C 库中的 crypt() 函数）是一种单向散列函数，通常用于存储密码。它**不是**加密功能，也没有已知的解密功能。

因此，您可能不是在寻找一个名为decrypt() 的函数。我没有使用 Coldfusion，所以我无法帮助您找到合适的功能。

# .net - 升级错误.net 1 winforms 应用程序

> ID：10285767
> 
> 赞同：0
> 
> 时间：2012-04-23T18:01:01.220
> 
> 标签：.net, winforms, upgrade

我有一个用 .NET 1.1 编写的 ld 应用程序，我尝试将其升级到 .NET 3.5。VsStudio 转换一切正常，升级后我可以毫无问题地运行应用程序。但是，由于字体是另一种字体，因此文本不适合控件。这就是我的麻烦开始的地方，因为一旦我改变任何东西，无论是控件的大小还是任何字体的大小，在构建之后设计师停止使用该表单，隐藏它并显示错误：

```
at System.ComponentModel.ReflectPropertyDescriptor.SetValue(Object component, Object     value)
at Microsoft.VisualStudio.Shell.Design.VsTargetFrameworkPropertyDescriptor.SetValue(Object component, Object value)
at System.ComponentModel.Design.Serialization.CodeDomSerializerBase.DeserializePropertyAssignStatement(IDesignerSerializationManager manager, CodeAssignStatement statement, CodePropertyReferenceExpression propertyReferenceEx, Boolean reportError)
at System.ComponentModel.Design.Serialization.CodeDomSerializerBase.DeserializeAssignStatement(IDesignerSerializationManager manager, CodeAssignStatement statement)
at System.ComponentModel.Design.Serialization.CodeDomSerializerBase.DeserializeStatement(IDesignerSerializationManager manager, CodeStatement statement) 
```

然后，当我尝试运行应用程序时，它根本不会加载这些表单，我只会收到错误消息。我对 .NET 不太满意，所以任何关于可能是什么错误的提示都会有所帮助，谢谢和问候！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T06:57:17.093

在框架 1.0 的 resx 文件中，空值是使用 <value/> 表示的，并且从 2.0 向前更改为 <value></value>。在将设计器从 < value /> 更改为 < value ></ value> 之前编辑 resx 并且它可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:21:28.850

当我在某些属性上设置“DesignerSerializationVisibility”属性时，它似乎起作用了。这可以防止设计器崩溃，我能够构建和运行我的应用程序

# javascript - 键入时文本框大小应增大

> ID：10285768
> 
> 赞同：4
> 
> 时间：2012-04-23T18:01:01.460
> 
> 标签：javascript, jquery, textbox

我正在寻找文本框中的效果。最初文本框的大小会很小，当输入时，文本框会变大。是否有任何 jquery 插件可用于此效果？如果不是，如何实现。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T18:05:26.247

```
$("#mytextbox").keyup(function() {
    $(this).attr("maxLength", $(this).attr("maxLength") + 1);
    $(this).attr("size", $(this).attr("size") + 1);
}); 
```

请注意，如果用户在文本框聚焦的情况下按下功能键，则无论如何大小都会增加。您应该监视文本框以了解其值的变化：

```
$("#mytextbox").keyup(function() {
    $(this).attr("size", $(this).val().length + 1);
}); 
```

请注意，第二种方法也支持复制/粘贴到输入字段中，而第一种方法不支持，尽管您必须确保用户有足够的空间来复制某些内容（现在，大小设置为 +当前值的 1，表示用户一次只能输入一个字符，然后大小增加）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T18:08:48.980

```
var $text = $('myselector')
$text.keyup(function() {
    $(this).attr({size : $(this).val().length});
}); 
```

这直接从文本框中输入的字符串长度中获取大小。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-23T18:21:48.087

看看这个 jquery 插件：

[http://www.unwrongest.com/projects/elastic/](http://www.unwrongest.com/projects/elastic/)

# cocos2d-iphone - Box2D 调试测试

> ID：10285770
> 
> 赞同：2
> 
> 时间：2012-04-23T18:01:05.227
> 
> 标签：cocos2d-iphone, box2d, box2d-iphone

我对 Box2d 有疑问。根据我在互联网上找到的教程，我在屏幕中央创建了一个旋转的对象（圆圈），以查看我是否正确设置了 Box2d。问题是创建了圆圈，但尽管我完全按照互联网上的教程进行操作，但我无法旋转。这是代码：

文件.h：

```
b2World * _world;  
GLESDebugDraw * _debugDraw; 
```

文件.mm：

```
-(void)setupWorld { 

    b2Vec2 gravity = b2Vec2(0.0f, 0.0f); 
    bool doSleep = false;
    _world = new b2World(gravity, doSleep);

}

-(void)setupDebugDraw { 

    _debugDraw = new GLESDebugDraw(PTM_RATIO*[[CCDirector sharedDirector] contentScaleFactor]); 
    _world->SetDebugDraw(_debugDraw); 
    _debugDraw->SetFlags(b2DebugDraw::e_shapeBit |b2DebugDraw::e_jointBit);

}

-(void)testBox2D { 

    CGSize winSize = [CCDirector sharedDirector].winSize;

    b2BodyDef bodyDef;

    bodyDef.type = b2_dynamicBody;
    bodyDef.position = b2Vec2(winSize.width/2/PTM_RATIO,winSize.height/2/PTM_RATIO); 

    b2Body *body = _world->CreateBody(&bodyDef);

    b2CircleShape circleShape; 

    circleShape.m_radius = 25.0/PTM_RATIO;

    b2FixtureDef fixtureDef; 

    fixtureDef.shape = &circleShape; 
    fixtureDef.density = 1.0; 

    body->CreateFixture(&fixtureDef);

    body->ApplyAngularImpulse(0.01); 

}

-(void)updateBox2D:(ccTime)dt {

_world->Step(dt, 1, 1); 

[self updateBox2D:dt];

}

-(void) draw {

glDisable(GL_TEXTURE_2D); glDisableClientState(GL_COLOR_ARRAY); glDisableClientState(GL_TEXTURE_COORD_ARRAY);

_world->DrawDebugData();

glEnable(GL_TEXTURE_2D); glEnableClientState(GL_COLOR_ARRAY); glEnableClientState(GL_TEXTURE_COORD_ARRAY);

}
￼ 
```

在初始化中：

```
[self setupWorld]; 

[self setupDebugDraw]; 

[self testBox2D]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T21:55:35.823

两个问题：

你在递归调用`updateBox2D`吗？这对我来说就像一个无限循环，我很惊讶它没有让你的应用程序崩溃。

相反，您应该在方法期间只调用一次世界步骤（或几次，具体取决于您设置时间步骤的`CCScene` `tick`方式）。

你的下一个问题是你对你的身体施加了一个小脉冲，但这只是一次脉冲......角脉冲仍然受到阻尼的影响，所以默认情况下身体不会无限旋转。为了保持身体旋转，您需要将角阻尼设置为零：

```
bodyDef.angularDamping = 0.0f; 
```

# objective-c - 如果（条件1 && 条件2 && 条件3 && 条件4 == 条件1）？Objective-C

> ID：10285772
> 
> 赞同：1
> 
> 时间：2012-04-23T18:01:13.590
> 
> 标签：objective-c, if-statement, parameters

我正在为 iPad 制作纸牌游戏（恐慌、神经崩溃、压力）。要赢，您需要拥有一整套 4 张匹配的卡片，我正在尝试获取一个 IF 语句，以确保所有 4 张卡片都相等。这是我当前的代码：

```
if ([cards objectAtIndex:4] && [cards objectAtIndex:5] && [cards objectAtIndex:6] && [cards objectAtIndex:7] == [cards objectAtIndex:5]) {
        //Deck one is good!
        NSLog(@"P1D1, all clear");
} 
```

Cards 是一个 NSMuatableArray。如果我有一个数据为 4:3:2:1 的 2x2 数组

我只需要匹配插槽 4 和 2 中的卡，上述语句即可返回 true。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:08:26.727

尝试：

```
if([[cards objectAtIndex:4] isEqual:[cards objectAtIndex:5]] && [[cards objectAtIndex:6] isEqual:[cards objectAtIndex:5]] && [[cards objectAtIndex:7] isEqual:[cards objectAtIndex:5]]){
  //Deck one is good!
  NSLog(@"P1D1, all clear");
} 
```

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T18:15:33.537

或者，您可以执行以下操作：

```
NSSet *distinctCardSet = [NSSet setWithArray:[cards subarrayWithRange:NSMakeRange(3, 4)]];
if (distinctCardSet.count == 1)
{
    //Deck one is good!
    NSLog(@"P1D1, all clear");
} 
```

# java - 排序图 > 按键 - ArrayList 是一组日期

> ID：10285777
> 
> 赞同：0
> 
> 时间：2012-04-23T18:01:32.387
> 
> 标签：java, collections, comparator, sortedmap

下面是比较器的代码，但是在 SortedMap.putAll() 之后，与源 Map 相比，SortedMap 的 Map Entries 数量较少。

有人可以帮忙吗？

```
Comparator<ArrayList> arrayListComparer = new Comparator<ArrayList>() {
                @Override
                public int compare(ArrayList arrA, ArrayList arrB) {
                    DateFormat formatter = new SimpleDateFormat("MMM-yyyy");
                    Date dateA = new Date();
                    Date dateB = new Date();
                    try {
                        dateA = formatter.parse(arrA.get(0).toString());
                        dateB = formatter.parse(arrB.get(0).toString());
                    } catch (ParseException ex) {
                        Logger.getLogger(ValueComparator.class.getName()).log(Level.SEVERE, null, ex);
                    }
                    if (dateA.before(dateB)) {
                        return 0;
                    } else if (dateA.after(dateB)) {
                        return 1;
                    } else {
                        return -1;
                    }
                }
            };
SortedMap sorted_map = new TreeMap(arrayListComparer);
sorted_map.putAll(map); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T18:06:29.863

如果您可以向我们展示您的地图示例会有所帮助，但无论如何我都会冒险回答。

可能导致这种情况的原因是您的 Map 中有条目，您的`compare`方法（在您的比较器中）返回 0，这意味着键是相等的。如果它们相等，则它是相同的键......并且您不能在 Map 中有重复的键。

你能看出问题吗？

我将举一个小例子：

```
public static void main(String[] args) {
    Map<Bla, String> map = new HashMap<Bla, String>();
    map.put(new Bla(1,1), "bla1");
    map.put(new Bla(1,2), "bla2");
    map.put(new Bla(1,3), "bla3");

    System.out.println(map.size());

    TreeMap<Bla, String> treeMap = new TreeMap<Bla,String>(new Comparator<Bla>() {
        @Override
        public int compare(Bla bla, Bla bla1) {
            return new Integer(bla.a).compareTo(bla1.a);
        }
    });

    treeMap.putAll(map);

    System.out.println(treeMap.size());

}

private static class Bla{

    private Bla(int a, int b) {
        this.a = a;
        this.b = b;
    }

    public int a;
    public int b;
} 
```

这将输出

3 1

因为我的比较器说所有三个键都是相同的（仅比较“a”值）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T18:10:29.903

当您使用`SortedMap`或仅当两个对象相等时才应返回 0 `SortedSet`。`Comparator`因为它按此标准处理密钥相等性。

请参阅自然排序：[http ://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html](http://docs.oracle.com/javase/6/docs/api/java/lang/Comparable.html)

> 例如，如果添加两个键 a 和 b 使得 (!a.equals(b) && a.compareTo(b) == 0) 到不使用显式比较器的排序集，则第二个添加操作返回 false （并且排序集的大小不会增加）因为从排序集的角度来看 a 和 b 是等价的。

# c# - ObservableCollection CollectionChanged 在 WPF MVVM 中没有帮助

> ID：10285778
> 
> 赞同：3
> 
> 时间：2012-04-23T18:01:36.513
> 
> 标签：c#, wpf, mvvm, viewmodel, observablecollection

我正在使用 DataGrid 并使用 ViewModel 中的 ObservableCollection 进行绑定

```
private ObservableCollection<StockItem> _stockList;
public ObservableCollection<StockItem> StockList
{
    get
    {
        return _stockList;
    }
    set
    {
        _stockList = value;
        OnPropertyChanged("StockList");                
    }
} 
```

StockItem 类包含其属性，即 DataGrid 中的列。DataGrid 中有一个名为 Amount 的列，其值随同一个数据网格的 Quantity*Price 列发生变化。

我在 ViewModel 中有一个名为 TotalAmount 的属性，该属性是在 ObservableCollection CollectionChanged 事件中计算的，例如

```
void OnStockListChanged(object sender, System.Collections.Specialized.NotifyCollectionChangedEventArgs e)
{
    this.TotalAmount = this.StockList.Sum(t => t.Amount);
} 
```

只有在将新行添加到包含某些数据的 DataGrid 时，才会在绑定到 TotalAmount 的 TextBox 中更新此值。我希望在数据网格中的金额列更改后立即更新 TotalAmount 的这个 TextBox。

我怎样才能做到这一点。

`StockItem Class`

```
public class StockItem : ObservableObject, ISequencedObject
{
    JIMSEntities dbContext = new JIMSEntities();
    public StockItem()
    {
        var qs = dbContext.Stocks.Select(s => s.StockName);
        _stocks = new CollectionView(qs.ToArray());
        _stocks.CurrentChanged += new EventHandler(Stocks_CurrentChanged);
    }
    void Stocks_CurrentChanged(object sender, EventArgs e)
    {
        if (_stocks.CurrentItem != null)
            StockName = _stocks.CurrentItem.ToString();
        var qs = (from p in dbContext.Stocks
                  where p.StockName.Contains(StockName)
                  select new { Unit = p.Unit, UnitPrice = p.UnitPrice }).SingleOrDefault();
        if (qs != null)
        {
            Unit = qs.Unit;
            UnitPrice = (decimal)qs.UnitPrice;
        }
    }

    private CollectionView _stocks;
    public CollectionView Stocks
    {
        get
        {
            return _stocks;
        }
        set
        {
            _stocks = value;
            OnPropertyChanged("Stocks");
        }
    }
    private int _sNo;
    public int SNo
    {
        get
        {
            return _sNo;
        }
        set
        {
            _sNo = value;
            OnPropertyChanged("SNo");

        }
    }
    private string _stockName;
    public string StockName
    {
        get
        {
            return _stockName;
        }
        set
        {
            _stockName = value;
            OnPropertyChanged("StockName");
        }
    }
    private decimal _unitPrice;
    public decimal UnitPrice
    {
        get
        {
            return _unitPrice;
        }
        set
        {
            _unitPrice = value;
            OnPropertyChanged("UnitPrice");
            OnPropertyChanged("Amount");
        }
    }
    private string _unit;
    public string Unit
    {
        get
        {
            return _unit;
        }
        set
        {
            _unit = value;
            OnPropertyChanged("Unit");
        }
    }

    private decimal _discount;
    public decimal Discount
    {
        get
        {
            return _discount;
        }
        set
        {
            _discount = value;
            OnPropertyChanged("Discount");
            OnPropertyChanged("Amount");
        }
    }
    private decimal _quantity;
    public decimal Quantity
    {
        get
        {
            return _quantity;

        }
        set
        {
            _quantity = value;
            OnPropertyChanged("Quantity");
            OnPropertyChanged("Amount");
        }
    }
    public decimal Amount
    {
        get
        {
            decimal total = Quantity * (UnitPrice - (UnitPrice * (Discount / 100)));
            return total;
        }
    }        

    public override string ToString()
    {
        return StockName;
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T18:18:46.390

所以，基本上，你所看到的是由于对`ObservableCollection`. OC 在其包含的对象发生更改时不会通知。它会在 IT 更改时发出通知（查看[INotifyCollectionChanged](http://msdn.microsoft.com/en-us/library/system.collections.specialized.inotifycollectionchanged.aspx)）——添加、删除项目等。

您要做的是`StockItem`在 OC 中包含的 a 更改时收到通知。你将不得不做几件事

1）确保`INotifyPropertyChanged`（你说你已经在做）在你的`StockItem`
2）自定义或找到一个实现`ObservableCollection`，它将在集合中包含的项目更改时通知（[这里是一个](http://www.sieena.com/blog/archive/2011/01/25/extending-observablecollection-lt-t-gt-to-notify-when-an-item-has-changed-.aspx)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T18:05:23.593

如果任何项目发生更改，您需要订阅`PropertyChanged`集合中的所有项目以重新计算值`Amount`，这有点混乱。某个地方的某个人可能为此编写了实用程序类...

# jquery - 如何使用 jquery 和 partials 在 Rails 中呈现集合

> ID：10285781
> 
> 赞同：1
> 
> 时间：2012-04-23T18:01:43.970
> 
> 标签：jquery, ruby-on-rails, collections, partial-views, render

我正在尝试在 Rails 3.1 上呈现一组评论，但网页上仅显示该集合的第一条评论（评论与想法相关联）。

首先，评论控制器：

```
def index
  @comments = Comment.find_by_thought_id(params[:thought_id])
  respond_to do |format|
    format.html
    format.js
  end
end 
```

然后，视图 index.js.erb

```
$("#thought_<%= params[:thought_id] %>").append("<%= escape_javascript(render'index') %>").effect("highlight", {}, 3000); 
```

我正在渲染索引，所以现在到 _index.html.erb

```
<div id="comments_<%= params[:thought_id] %>">
  <%= render @comments %>
</div> 
```

最后是 _comment.html.erb

```
<%= div_for comment do %>
  Posted <%=time_ago_in_words(comment.created_at)%> ago<br />
  <%= link_to 'Delete', comment_path(comment), :method => :delete, :class => "delete", :remote => true  %>
  <%= content_tag(:p, comment.description, :class => "comment-body") %>
<% end %> 
```

为什么 Rails 只给我一条评论？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:04:27.917

代替：

```
Comment.find_by_thought_id 
```

尝试：

```
Comment.find_all_by_thought_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T18:24:45.640

```
1.9.3-head :035 > Tag.find_by_name('ruby')
  Tag Load (0.3ms)  SELECT "tags".* FROM "tags" WHERE "tags"."name" = 'ruby' LIMIT 1
 => #<Tag id: 1231, name: "ruby", created_at: "2012-04-23 10:25:07", updated_at: "2012-04-23 10:25:07"> 
1.9.3-head :036 > Tag.where(:name => 'ruby')
  Tag Load (1.4ms)  SELECT "tags".* FROM "tags" WHERE "tags"."name" = 'ruby'
 => [#<Tag id: 1231, name: "ruby", created_at: "2012-04-23 10:25:07", updated_at: "2012-04-23 10:25:07">, #<Tag id: 2420, name: "ruby", created_at: "2012-04-23 18:21:35", updated_at: "2012-04-23 18:21:35">] 
```

当你做像**find_by_name**这样的动态查找器时，请注意这个**LIMIT 1**。

 **你最好使用**where**，它更快，因为它不是动态方法。**

# javascript - Javascript - Google 闭包注释 - 将类型设置为匿名函数

> ID：10285782
> 
> 赞同：0
> 
> 时间：2012-04-23T18:01:48.137
> 
> 标签：javascript, annotations, obfuscation, google-closure-compiler

我正在尝试正确注释我的 Javascript，以避免 Google Closure 弄乱我的变量。

我想知道是否可以强类型化匿名函数以确保函数的参数（在我的情况下是 externs）不被重命名。

这是一个插图

```
/** externs.js where I define my externs */
/** @interface a Json object returned by the server */
function MyServerResult() {}
/** @type {boolean} */
MyServerResult.prototype.error; 
```

并在另一个使用`externs.js`和`jquery.js`作为外部编译的文件中。

```
$.get("url.php", function(data) {alert(data.error;}, "json"); 
```

我试图确保匿名函数`function(data)`没有`@type {function(MyServerResult)}`被`error`重命名。

我可以直接这样做还是需要创建一个单独的函数（可能会被编译器内联......）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T16:44:41.933

我相信你应该能够做到：

```
/**
 * @param {MyServerResult} data
 */
var callback = function(data) {
  alert(data.error);
};
$.get("url.php", callback, "json"); 
```

# symfony - Symfony2 中 ObjectManager 和 EntityManager 的区别？

> ID：10285783
> 
> 赞同：69
> 
> 时间：2012-04-23T18:01:52.653
> 
> 标签：symfony, doctrine, doctrine-orm, symfony-forms

`Doctrine\Common\Persistence\ObjectManager`在自定义表单类型中使用它和`Doctrine\ORM\EntityManager`使用它有什么区别？

我可以同时使用`$this->em->getRepository()`和获取存储库`$this->om->getRepository()`。

```
class MyFormType extends \Symfony\Component\Form\AbstractType
{

    /**
     * @var Doctrine\ORM\EntityManager
     */
    protected $em;

    public function __construct(Doctrine\ORM\EntityManager $em)
    {
        $this->em = $em;
    }

 } 
```

代替：

```
class MyFormType extends \Symfony\Component\Form\AbstractType
{

    /**
     * @var Doctrine\Common\Persistence\ObjectManager
     */
    protected $om;

    public function __construct(Doctrine\Common\Persistence\ObjectManager $om)
    {
        $this->om = $om;
    }

 } 
```

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2012-04-23T18:13:16.717

`ObjectManager`是一个接口，`EntityManager`是它的 ORM 实现。这不是唯一的实现。例如，`DocumentManager`MongoDB ODM 也实现了它。`ObjectManager`仅提供其所有实现的公共子集。

如果您希望您的表单类型适用于任何`ObjectManager`实现，请使用它。这样，您可以从 ORM 切换到 ODM，并且您的类型仍然可以正常工作。但是，如果您需要仅`EntityManager`提供且不打算切换到 ODM 的特定内容，请改用它。

# c++ - 没有打印正确的元素

> ID：10285789
> 
> 赞同：0
> 
> 时间：2012-04-23T18:02:11.507
> 
> 标签：c++

我将一个对象传递给我的函数......并访问存储在对象的双精度数组中的每个元素......

我可以在监视窗口中看到元素在那里（60.5），它只是打印旧值（1006）。？？？

```
double MatrixClass::min(MatrixClass* matOb)
        {
            double tempNum = matOb->dataptr[0 * matOb->N + 0];//set the value of tempNum to the first element of the matrix object

            for(int i =0;i<((matOb->M) * (matOb->N));i++)
            {
                //double value = *matOb->dataptr + i;
                //cout << (*matOb->dataptr+i);
                if((*matOb->dataptr + i) < tempNum)
                {
                    tempNum = (*matOb->dataptr + i);
                }//end if
            }
            return tempNum;
        }//end min 
```

您可以在上面看到我的函数...即使打印值也会给出旧值（1006）..我可以肯定地看到值 60.5 在那里，它只是在我更改之前打印旧值！

# datatable - OpenFaces 数据表 dataTablePaginator 无法向后导航

> ID：10285790
> 
> 赞同：1
> 
> 时间：2012-04-23T18:02:13.230
> 
> 标签：datatable, openfaces

我有 ao:datatable 分页。这是代码：

```
enter code <o:dataTable id="table" value="#{Bean.vproduct}" var="product" pageSize="3">
  <f:facet name="header">
    <h:outputText value="Header" styleClass="title"/>
   </f:facet>   
  <o:column>
    <h:panelGrid columns="1">
      <h:outputText value="#{product.description}"/>
    </h:panelGrid>
  </o:column>
  <f:facet name="below">
   <h:panelGroup id="panelGroup">
    <o:dataTablePaginator id="paginator"/>
   </h:panelGroup>
 </f:facet> 
```

最多我有 2 页，而不是更多，从第 1 页导航到第 2 页有效，但是当我在第 2 页时，我无法导航回第一页。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T20:24:58.777

我已经解决了这个问题。它与部分状态保存有关：

[为从复合组件中调用的两个后续 AJAX 调用获取类 java.lang.ClassCastException](http://java.net/jira/browse/JAVASERVERFACES-1825)

[Jsf 错误：java.lang.ClassCastException](https://stackoverflow.com/questions/5694350/jsf-error-java-lang-classcastexception)

我已经把它放在了我的 web.xml 中，现在它可以工作了

```
<context-param>
<param-name>javax.faces.PARTIAL_STATE_SAVING</param-name>
<param-value>false</param-value>
</context-param> 
```

# android - Android sqlite where 子句

> ID：10285802
> 
> 赞同：0
> 
> 时间：2012-04-23T18:03:23.447
> 
> 标签：android, sqlite

如何使这条线工作？

```
return ourDatabase.rawQuery("SELECT * FROM GL_" + tablename + " WHERE " + KEY_GROUP_T + " = " + grp + " ORDER BY " + KEY_NAME_T + " COLLATE NOCASE", null); 
```

> 04-23 17:58:26.701：E/AndroidRuntime(9212)：原因：android.database.sqlite.SQLiteException：没有这样的列：Baked_Goods：，编译时：SELECT * FROM GL_table4 WHERE grlist_group = Baked_Goods ORDER BY grlist_name COLLATE NOCASE

这条线正在工作，但我想用 rawQuery 来做：

```
return ourDatabase.query("GL_" + tablename, columns, KEY_GROUP_T + "= ?" , new String[]{grp}, null, null, null); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T18:06:09.563

要完成这项工作，您必须在字符串周围加上单引号。例子：

```
return ourDatabase.rawQuery("SELECT * FROM GL_" + tablename + " WHERE " + KEY_GROUP_T + " = '" + grp + "' ORDER BY " + KEY_NAME_T + " COLLATE NOCASE", null); 
```

**添加**

Waqas 有一个好处，如果`grp`取自用户的输入，他正在防止[SQL 插入攻击](http://en.wikipedia.org/wiki/SQL_injection)。如果您总是定义`grp`，那么这不是关键，而是良好的做法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T18:14:56.370

改变这个：

```
return ourDatabase.rawQuery("SELECT * FROM GL_" + tablename + " WHERE " +
KEY_GROUP_T + " = " + grp + " ORDER BY " + KEY_NAME_T + " COLLATE NOCASE", null); 
```

对此：

```
return ourDatabase.rawQuery("SELECT * FROM GL_" + tablename + " WHERE " +
KEY_GROUP_T + " = ? ORDER BY " + KEY_NAME_T + " COLLATE NOCASE", new String[]{grp}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T18:19:38.180

尽管单引号方法是正确的，但您可以提高查询速度，并提高可读性，并且如果您这样做，您不会忘记单引号：

```
String [] selectionArgs = {String.valueOf(grp)};
ourDatabase.rawQuery("SELECT * FROM GL_" + tablename + " WHERE " + KEY_GROUP_T + " = ?" + " ORDER BY " + KEY_NAME_T + " COLLATE NOCASE", selectionArgs); 
```

# maven - maven 将另一个模块的程序集包含到 rpm 中

> ID：10285805
> 
> 赞同：1
> 
> 时间：2012-04-23T18:03:48.940
> 
> 标签：maven

我有一个多模块 maven 项目，以及许多构建标准 jar 文件的代码模块，我有一个模块使用 maven-assembly-plugin 将测试工具构建为 zip 文件，另一个模块使用构建应用程序 rpm rpm-maven-plugin。我想在 rpm 中包含测试工具 zip 文件。

目前我在 rpm 模块中执行以下操作：

```
<dependencies>
    <dependency>
        <groupId>${project.groupId}</groupId>
        <artifactId>appn</artifactId>
        <version>${project.version}</version>
    </dependency>
    <dependency>
        <groupId>${project.groupId}</groupId>
        <artifactId>test-harness</artifactId>
        <version>${project.version}</version>
    </dependency>
</dependencies>

<build>
    <plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>rpm-maven-plugin</artifactId>
    <configuration>
    :
    <mapping>
        <directory>/opt/app/installed/${rpmSoftwareName}-${project.version}/utils</directory>
        <username>${rpmUsername}</username>
        <groupname>${rpmGroupname}</groupname>
        <filemode>0755</filemode>
        <sources>
            <source>
                <location>${project.build.directory}/../../test-harness/target/test-harness-${project.version}-dist.zip</location>
            </source>
        </sources>
    </mapping>
    <mapping>
        <directory>/opt/app/installed/${rpmSoftwareName}-${project.version}/lib</directory>
        <username>${rpmUsername}</username>
        <groupname>${rpmGroupname}</groupname>
        <filemode>0755</filemode>
        <dependency />
    </mapping> 
```

我遇到的问题是 rpm 的 lib 目录包含测试工具及其传递依赖项。如果我从库映射中排除测试工具，我不会得到测试工具，但我确实得到了它的传递依赖。如果我将测试工具作为依赖项删除，那么我必须依赖父 pom 中的模块顺序来确保首先构建测试工具，这似乎有点弱，因为依赖相对路径来包含测试工具在映射中......必须有更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T05:32:55.740

最好的事情是首先不使用访问其他模块（../target/ 等）的相对路径。最好在 rpm 模块中使用依赖项。例如，使用适当的分类器将 zip 文件定义为依赖项。

```
<dependencies>
  <dependency>
     <groupId>project.com.domain</groupId>
     <artifactId>test-harness</artifactId>
     <version>${project.version}</version>
     <classifier>dist</classifier>
     <type>zip</type>
  </dependency>
</dependencies> 
```

在您应该简单地将依赖项添加到 rpm 配置之后，如下所示：

```
<mapping>
  <directory>/usr/local/lib</directory>
  <filemode>750</filemode>
  <username>dumper</username>
  <groupname>dumpgroup</groupname>
  <dependency>
    <includes>
      <include>...:test-harness:dist:zip:${project.version}</include>
      <include>...</include>
    </includes>
    <excludes>
      <exclude>...</exclude>
    </excludes>
  </dependency>
</mapping> 
```

我不能 100% 确定包含的确切顺序（artifactId:classifier:type:version？）。

# javascript - 骨干？可以.js吗？贫民窟DIY？我应该如何处理这些数据？

> ID：10285806
> 
> 赞同：0
> 
> 时间：2012-04-23T18:03:53.273
> 
> 标签：javascript, json, model-view-controller, node.js, backbone.js

我正在开发一个应用程序，让我们的安全调度员更新包含当前道路和校园状况的页面。后端是一个 nodejs/express 堆栈，数据是一个简单的 JSON 结构，看起来像这样：

```
{
    "campus": {"condition": "open", "status": "normal"},
    "roads": {"condition": "wet", "status": "alert"},
    "adjacentroads": {"condition": "not applicable", "status": "warning"},
    "transit": {"condition": "on schedule", "status": "normal"},
    "classes": {"condition": "on schedule", "status": "normal"},
    "exams": {"condition": "on schedule", "status": "normal"},

    "announcements" : "The campus is currently under attack by a herd of wild velociraptors. It is recommended that you do not come to campus at this time. Busses are delayed.",

    "sidebar": [
        "<p>Constant traffic updates can be heard on radio station AM1234\. Traffic updates also run every 10 minutes on AM5678 and AM901.</p>",
        "<p>This report is also available at <strong>555-555-1234</strong> and will be updated whenever conditions change.</p>"
    ],

    "links": [
        {
            "category": "Transportation Links",
            "links": [
                {
                    "url": "http://www.localtransit.whatever",
                    "text" : "Local Transit Agency"
                },
                {
                    "url": "http://m.localtransit.whatever",
                    "text" : "Local Transit Agency Mobile Site"
                }
            ]
        },
        {
            "category": "Weather Forecasts",
            "links": [
                {
                    "url": "http://weatheroffice.ec.gc.ca/canada_e.",
                    "text" : "Environment Canada"
                },
                {
                    "url": "http://www.theweathernetwork.com",
                    "text" : "The Weather Network"
                }
            ]
        },
        {
            "category": "Campus Notices &amp; Conditions",
            "links": [
                {
                    "url": "http://www.foo.bar/security",
                    "text" : "Security Alerts &amp; Traffic Notices"
                },
                {
                    "url": "http://foo.bar/athletics/whatever",
                    "text" : "Recreation &amp; Athletics Conditions"
                }
            ]
        },
        {
            "category": "Wildlife Links",
            "links": [
                {
                    "url": "http://velociraptors.info",
                    "text" : "Velociraptor Encounters"
                }
            ]
        }

    ],

    "lastupdated": 1333151930179   
} 
```

我想知道在客户端处理这些数据的最佳方式是什么（例如，在调度程序用来更新数据的页面上）。该页面混合了选择（校园、道路等条件）、TinyMCE 文本区域（公告和侧边栏）和文本输入（链接）。如有必要，我愿意更改此数据结构，但在我看来效果很好。我一直在研究 Backbone 和 Can.JS，但我不确定其中任何一个是否适合这个。

一些附加信息：

*   无需单独更新数据结构中的单个项目；我计划在保存后发布整个结构。那就是说...
*   实际上有两种不同的观点，一种是针对调度员的，另一种是针对他们的主管的。调度员只能通过下拉菜单更改校园、道路等条件，而且只能更改“条件”键；每个可能的条件都有一个分配给它的默认状态。主管可以覆盖默认状态，并可以访问公告、侧边栏和链接键。也许我确实需要重新考虑一下关于一次发布整个事情的前一点？
*   主管需要能够添加和删除链接，以及添加和删除整个链接类别。这意味着需要添加和删除 DOM 元素，这就是为什么我正在考虑使用 Backbone 或 Can.js 之类的东西，而不是仅仅编写一些 ghetto 解决方案来查看所有表单元素并构建适当的 JSON 以 POST 到服务器。

欢迎提出建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T14:36:55.190

CanJS 非常适用于嵌套数据。[can.Model](http://donejs.com/docs.html#!can.Model)继承[了 can.Observe](http://donejs.com/docs.html#!can.Observe)，它允许您监听对象结构的任何变化。

如果你包括[can.Observe.Delegate](http://donejs.com/docs.html#!can.Observe.delegate)你有更强大的事件机制（来自文档的例子）：

```
// create an observable
var observe = new can.Observe({
  name : {
    first : "Justin Meyer"
  }
})
  var handler;
//listen to changes on a property
observe.delegate("name.first","set", 
  handler = function(ev, newVal, oldVal, prop){

  this   //-> "Justin"
  ev.currentTarget //-> observe
  newVal //-> "Justin Meyer"
  oldVal //-> "Justin"
  prop   //-> "name.first"
});

// change the property
observe.attr('name.first',"Justin") 
```

# android - 从android执行Matlab函数

> ID：10285807
> 
> 赞同：1
> 
> 时间：2012-04-23T18:03:57.707
> 
> 标签：android, matlab

这是我必须达到的。我必须将参数从 android 程序传递到存储在另一台服务器上的 matlab 函数，并在 android 中取回结果。我对如何实现这一目标感到非常困惑。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T18:32:48.643

如果您要发送/接收的数据不是太繁琐，最简单的解决方案可能是套接字。[Java 套接字](http://docs.oracle.com/javase/tutorial/networking/sockets/)将能够连接到[matlab 套接字](http://docs.oracle.com/javase/tutorial/networking/sockets/)并与之传输数据。这要求您有一个不断运行的 matlab 程序来等待连接。

例如，如果您想发送序列化对象，那么我建议在服务器上编写 java 代码 - 我认为通过带有套接字的网络发送序列化对象并不难。然后，您的 java 代码将在本地[与 Matlab 交互。](http://www.cs.virginia.edu/~whitehouse/matlab/JavaMatlab.html)

我在这里写了一些示例套接字代码：[如何将图片从 android 设备传输到 Matlab，反之亦然](https://stackoverflow.com/questions/10071233/how-to-transfer-pictures-from-android-device-to-matlab-and-vice-versa/10071681#10071681)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T23:45:41.113

我认为[MATLAB Builder™ JA](http://www.mathworks.com/products/javabuilder/)可以为您提供帮助，但我认为转换后的代码需要一个 matlab 运行时编译器 [MCR]，我猜它很快就会用于 android

我最近也在尝试做一些类似你的想法的事情，但我放弃了它并开始用 JAVA 编码，现在我像使用 matlab 一样舒服：

我想这个链接可能会帮助你解决你的问题

[http://www.mathworks.se/matlabcentral/newsreader/view_thread/295313](http://www.mathworks.se/matlabcentral/newsreader/view_thread/295313)

# backbone.js - 骨干模型事件/触发器未触发

> ID：10285809
> 
> 赞同：0
> 
> 时间：2012-04-23T18:04:08.080
> 
> 标签：backbone.js, coffeescript, backbone-events

在几个教程中看到它后，我试图在我的视图中执行以下代码行

```
@model.on('change', @render, this) 
```

不幸的是，更改事件没有触发，因此我的视图没有重新渲染。

我尝试绑定到不同的事件并使用触发函数创建几个自定义事件，但模型上似乎没有任何触发。此外，控制台没有错误。更改事件在不同的集合上运行良好。我正在使用 Zepto 1.0、Backbone.js 0.9.2 和 Underscore.js 1.3.1

编辑：我正在尝试从路由器执行以下操作

```
 place: (id) ->
    @model = new GM.Models.Place({id: "#{id}"})
    @model.fetch
    view = new GM.Views.Place(model: @model)
    $('#container').html(view.render().el) 
```

我的模型是这样设置的：

```
class GM.Models.Place extends Backbone.Model
  urlRoot: '/mobile/place' 
```

我想知道是否有人以前遇到过类似的问题并有一个快速修复。如果没有，并且您需要更多代码来找到解释，请告诉我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T19:46:12.843

您实际上并没有在`@model.fetch`任何地方调用该方法。这：

```
@model.fetch 
```

不是方法调用，要调用方法需要加括号或参数：

```
@model.fetch()
# or
@model.fetch success: -> ...
# etc. 
```

否则，您只是`this.model.fetch;`在 JavaScript 中生成，并没有做任何有用的事情。

# python - 重新分配一个巨大的列表/数组会导致内存泄漏吗？

> ID：10285818
> 
> 赞同：1
> 
> 时间：2012-04-23T18:05:09.517
> 
> 标签：python, numpy

如果我创建了一个巨大的列表/数组，比如说

```
a=range(1000000000)
or
a=numpy.ones(100000000) 
```

然后我将 a 重新分配为：

```
a=1 
```

重新分配后，之前的巨大列表或数组是否会被自动删除，或者，如果它在循环中，是否存在潜在的内存消耗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T18:07:48.840

它会像往常一样进行垃圾收集，可能需要一点时间才能收获。但它不会内存泄漏（或者它不应该，如果它确实存在，那么应该报告 numpy 模块中的错误。）

# html - 将td一分为二

> ID：10285819
> 
> 赞同：12
> 
> 时间：2012-04-23T18:05:23.090
> 
> 标签：html, css, html-table

我正在尝试拆分 TD（表格单元格），使其看起来好像是两个单元格。问题是当单元格在高度中增长时，我无法让里面的两个 div 占据所有可用高度。由于这些单元格可以动态增长，我也无法设置固定高度（这可以解决问题）。

**这是我的代码：**

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
<!--[if IE]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<style>
  article, aside, figure, footer, header, hgroup, 
  menu, nav, section { display: block; }
  td { border: 1px solid black; width: 50px; text-align: center; margin:0; padding:0 }
  #span1 { background-color: #DDD; width: 25px; float: right; }
  #span2 { background-color: #EEE; width: 24px; float: left; }
  .t { border-top: 1px solid black; }
  .r { border-right: 1px solid black; height: 100%; }
</style>
</head>
<body>
  <table>
    <tbody>
      <tr>
        <td>1</td><td>2</td><td>3<div><div id="span1" class="t">1</div><div id="span2" class="t r">1</div></div></td><td>4</td>
      </tr>
      <tr>
        <td>1</td><td>2</td><td><div id="span1">3</div><div id="span2" class="r">3</div></td><td>4</td>
      </tr>
      <tr>
        <td>1</td><td>2 2 2 2 2 22 2 </td><td><div id="span1">3</div><div id="span2" class="r">3</div></td><td>4</td>
      </tr>
      <tr>
        <td>1</td><td>2</td><td><div id="span1">3</div><div id="span2" class="r">3</div></td><td>4</td>
      </tr>
      <tr>
        <td>1</td><td>2 2 2 2 2 2 2 2 </td><td><span style="line-height:2"><div id="span1">3</div><div id="span2" class="r">3</div></span></td><td>4</td>
      </tr>
    </tbody>
  </table>
</body>
</html> 
```

**这是它的外观：**

![当前表视图](../Images/9d33fea8611a065ca546f8b51210a71b.png)

我不想在第 3 列中看到那些空白。

任何想法如何解决这个问题？到目前为止，我一直在与 CSS 斗争一段时间，但没有运气......

谢谢！。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-23T19:24:01.327

你应该设置高度 td height=100%, .span1 set height=100% 然后试试这个你可以得到答案..

```
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
<!--[if IE]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<style>
  article, aside, figure, footer, header, hgroup, 
  menu, nav, section { display: block; }
  td { border: 1px solid black; width: 50px; text-align: center; margin:0; padding:0; height:100%; }
  #span1 { background-color: #DDD; width: 25px; float: right; height:100%; }
  #span2 { background-color: #EEE; width: 24px; float: left; }
  .t { border-top: 1px solid black; }
  .r { border-right: 1px solid black; height: 100%; }
</style>
</head>
<body>
  <table>
    <tbody>
      <tr>
        <td>1</td><td>2</td><td>3<div><div id="span1" class="t">1</div><div id="span2" class="t r">1</div></div></td><td>4</td>
      </tr>
      <tr>
        <td>1</td><td>2</td><td><div id="span1">3</div><div id="span2" class="r">3</div></td><td>4</td>
      </tr>
      <tr>
        <td>1</td><td>2 2 2 2 2 22 2 </td><td><div id="span1">3</div><div id="span2" class="r">3</div></td><td>4</td>
      </tr>
      <tr>
        <td>1</td><td>2</td><td><div id="span1">3</div><div id="span2" class="r">3</div></td><td>4</td>
      </tr>
      <tr>
        <td>1</td><td>2 2 2 2 2 2 2 2 </td><td><span style="line-height:2"><div id="span1">3</div><div id="span2" class="r">3</div></span></td><td>4</td>
      </tr>
    </tbody>
  </table>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T18:12:07.103

尝试设置

```
display:inline-block 
```

可能还需要也可能不需要添加高度 100%。

还有没有办法你可以简单地添加 2 个 td 而不是试图模仿 2？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T18:14:25.457

您可以在该表格单元格中放置一个表格，然后在该内部表格中您可以做任何您想做的事情，例如`td colspan="2"`顶行，td td 底行（这让我想起了表格布局的丑陋日子，但无论什么都适用你！）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-20T20:55:59.447

我也一直在寻找一种拆分 TD（表格数据单元）的方法。在阅读了很多帖子和几次失败的尝试之后，我终于破解了它。非常感谢所有之前发布的人，因为我能够将这些点联系起来，这要归功于您。

您需要记住两件事，影响标题行和结果数据行。我的意思是顶行[影响标题行]中使用'colspan'的单元格直接影响它们下方行中的单元格[结果数据行]。例如，如果我的结果行（第 2 行）必须包含拆分的 TD，那么它会受到上面在其 TD（第 1 行）中使用“colspan”的行的影响。但是，如果下一行（第 3 行）必须不受来自第 1 行的 'colspan' 的影响，则下一行（第 3 行）中的单元格必须与第 1 行中的单元格具有相同的 'colspan' 属性，这样可以防止它们不会被分裂，并使它们“跨越”常规间隙。

在图像 [单击链接查看图像] 中，我只有 2 列 [第 2 列和第 4 列] 在它们下方拆分 TD。在第一行中，我使用“colspan”来影响下面的行。但是，我不希望第 2 行和第 3 行分开，因此它们具有与第 1 行相同的“colspans”。我确实想拆分第 4 行和第 5 行中的单元格 [当然只在第 2 列和第 4 列中]，因此要做到这一点，它们不包含“colspan”属性，这使得它们受到它们上面的行的影响，这些行确实使用了 '科尔斯潘'。第 6 行不受前行中的“colspan”的影响，因为它包含与前 3 行相同的“colspan”属性。第 7 行和最后一行包含拆分 TD，因为它与第 4 行和第 5 行一样，不包含“colspan”。这听起来可能令人困惑，但是，如果您查看图像并尝试源代码，我想您会非常高兴。我希望这有帮助。

[https://www.flickr.com/photos/12121792@N02/sets/72157651047314439/](https://www.flickr.com/photos/12121792@N02/sets/72157651047314439/)

```
<table border="1px solid" cellspacing="5" bordercolor="#000000" width="959" cellpadding="5">
  <tr align="justify" valign="top">
    <td valign="middle" bgcolor="#FFFFFF" width="210"><h4 style="color:#000000" align="center">Nothing Special Here</h4></td>
    <td colspan="2" valign="middle" bgcolor="#6E7F8B"><h4 style="color:#FFFFFF" align="center">Colspan=&quot;2&quot;</h4></td>
    <td valign="middle" bgcolor="#6E7F8B" width="191"><h4 style="color:#FFFFFF" align="center">No Colspan Here</h4></td>
    <td colspan="2" valign="middle" bgcolor="#6E7F8B"><h4 style="color:#FFFFFF" align="center">Colspan=&quot;2&quot;</h4></td>
  </tr>
  <tr class="gray1" valign="top" align="justify">
    <td valign="middle"><p align="justify">Nothing Special Here</p></td>
    <td colspan="2" valign="middle"><p align="center">Colspan=&quot;2&quot;</p></td>
    <td width="191" valign="middle"><p align="center">No Colspan Here</p></td>
    <td colspan="2" valign="middle"><p align="center">Colspan=&quot;2&quot;</p></td>
  </tr>
  <tr class="gray1" valign="top" align="justify">
    <td valign="middle"><p align="justify">Nothing Special Here</p></td>
    <td colspan="2" valign="middle"><p align="center">Colspan=&quot;2&quot;</p></td>
    <td width="191" valign="middle"><p align="center">No Colspan Here</p></td>
    <td colspan="2" valign="middle"><p align="center">Colspan=&quot;2&quot;</p></td>
  </tr>
  <tr class="gray1" valign="top" align="justify">
    <td valign="middle"><p align="justify">Nothing Special Here</p></td>
    <td width="129" valign="middle"><p align="center">Nothing Special</p></td>
    <td width="120" valign="middle"><p align="center">Nothing Special</p></td>
    <td width="191" valign="middle"><p align="center">Nothing Special</p></td>
    <td width="99" valign="middle"><p align="center">Nothing Special</p></td>
    <td width="101" valign="middle"><p align="center">Nothing Special</p></td>
  </tr>
  <tr class="gray1" valign="top" align="justify">
    <td valign="middle"><p align="justify">Nothing Special Here</p></td>
    <td valign="middle"><p align="center">Nothing Special</p></td>
    <td valign="middle"><p align="center">Nothing Special</p></td>
    <td valign="middle"><p align="center">Nothing Special</p></td>
    <td valign="middle"><p align="center">Nothing Special</p></td>
    <td width="101" valign="middle"><p align="center">Nothing Special</p></td>
  </tr>  
  <tr class="gray1" valign="top" align="justify">
    <td valign="middle"><p align="justify">Nothing Special Here</p></td>
    <td colspan="2" valign="middle"><p align="center">Colspan=&quot;2&quot;</p></td>
    <td valign="middle"><p align="center">No Colspan Here</p></td>
    <td colspan="2" valign="middle"><p align="center">Colspan=&quot;2&quot;</p></td>
  </tr>  
  <tr class="gray1" valign="top" align="justify">
    <td valign="middle"><p align="justify">Nothing Special Here</p></td>
    <td valign="middle"><p align="center">Nothing Special</p></td>
    <td valign="middle"><p align="center">Nothing Special</p></td>
    <td valign="middle"><p align="center">Nothing Special</p></td>
    <td valign="middle"><p align="center">Nothing Special</p></td>
    <td valign="middle"><p align="center">Nothing Special</p></td>        
  </tr>  
</table> 
```

# jquery - JQuery 验证 - 突出显示和消息重构

> ID：10285825
> 
> 赞同：1
> 
> 时间：2012-04-23T18:05:32.243
> 
> 标签：jquery, refactoring, jquery-validate

我有以下代码工作，但是我觉得有一种更简洁的编写方式。

```
<script type="text/javascript">     
    $(document).ready(function () {        
        $("#formRequest").validate({
            highlight: function (element, errorClass) {
                $(element).addClass("rfvTB");
            },
            unhighlight: function (element, errorClass) {
                $(element).removeClass("rfvTB");
            } 
        });

        $.validator.messages.required = '  *';
    }); 
</script> 
```

验证消息似乎属于 validate 函数。有没有办法写这个清洁剂？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:13:57.477

如果您的 validate 对象中没有一堆语句，则没有一种很好的方法可以做到这一点：

您可以`messages`在 validate 中指定选项，然后为每个必需的元素添加一个`required: '*'`，如下所示：

```
$('#formRequest').validate({
   //your options
   messages: {
      formElementName1: {
         required: '*'
      },
      //repeat for each form element
   }
}); 
```

如果你有很多元素，这很乏味，我更喜欢你的方法。

# json - ASP.NET MVC 3 jqGrid：网格在浏览器中呈现 json 数据

> ID：10285826
> 
> 赞同：0
> 
> 时间：2012-04-23T18:05:33.530
> 
> 标签：json, asp.net-mvc-3, jqgrid

我在 ASP.net MVC 3 中渲染 jqGrid 时遇到问题。 ProductInfo 操作的职责是显示产品列表以及其他最新产品信息（**在 ProductInfo 视图中**）。当用户单击任何产品链接时，ProductModelList 操作会获取所选产品的所有模型列表并将其传递给写入所有 jqGrid 代码的**ProductModelList 视图。**但它在浏览器中呈现行 json 数据，如下所示

{"total":null,"page":null,"records":9,"rows":[{"id":4,"cell":["3","Hyundai Accent"]},{"id ":5,"cell":["3","现代 Santro"]},{"id":6,"cell":["3","现代圣达菲"]},{"id":7 ,"cell":["3","现代 i10"]},{"id":8,"cell":["3","现代 i20"]},{"id":9,"cell" :["3","现代途胜"]},{"id":10,"cell":["3","现代 Verna Fluidic"]},{"id":11,"cell":[" 3","现代 EON"]},{"id":12,"cell":["3","新现代奏鸣曲"]}]}

以下是控制器和视图：

```
public class Product : Controller
    {
        **//used to view product list**
        public ActionResult ProductInfo()
        {
            ViewBag.ModelNameList = ModelRepository.GetModelName();
            ViewBag.ModelVersionNameList = ModelVersionRepository.GetModelVersionName();
            return View(new NewCarSearchContainer());
        }
        **//used to view modellist using jgGrid**
        public JsonResult ProductModelList(int brandId, string sidx, string sord, int? page, int? rows)
        {

            var result = new
            {
                total = (ModelRepository.GetModelByBrandId(brandId).Count() + rows - 1) / rows,
                page = page,
                records = ModelRepository.GetModelByBrandId(brandId).Count(),
                rows = (from model in ModelRepository.GetModelByBrandId(brandId)
                       select new
                       {
                           id = model.ModelId,
                           cell = new string[] { model.BrandId.ToString(), model.ModelName }
                       }).ToList()
            };

            return Json(result, JsonRequestBehavior.AllowGet);

        }
}

ProductModelList View:
=====================

<table id="jqgProducts">
</table>
<div id="jqgpProducts">
</div>

<script type="text/javascript">

    $(document).ready(function () {
        $('#jqgProducts').jqGrid({
            //url from wich data should be requested
            url: '/Product/ProductModelList',
            //type of data
            datatype: 'json',
            //url access method type
            mtype: 'GET',
            //columns names
            colNames: ['id', 'ModelId', 'BrandName'],
            //columns model
            colModel: [
                            { name: 'id', index: 'id', width: 40, align: 'left' },
                            { name: 'ModelId', index: 'ModelId', width: 40, align: 'left' },
                            { name: 'BrandName', index: 'BrandName', width: 40, align: 'left' },
                          ],
            //pager for grid
            pager: $('#jqgpProducts'),
            //number of rows per page
            rowNum: 10,
            //initial sorting column
            sortname: 'ModelId',
            //initial sorting direction
            sortorder: 'asc',
            //we want to display total records count
            viewrecords: true,
            //grid height
            height: '100%'
        });
    });
</script> 
```

请指导我？

谢谢，

保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T18:30:29.753

来自`'id'`JSON 数据的将用于分配网格（元素）`id`行的属性。id在页面上**必须是唯一**的。您当前的所有数据都包含相同的 id (id=3)。`id``<tr>`

 **我建议您下载一些工作示例（请参阅[答案](https://stackoverflow.com/a/5501644/315935)或[这个](https://stackoverflow.com/a/9349688/315935)）并根据您的要求对其进行修改。**

# blackberry - 设置黑莓壁纸的存储路径是什么？

> ID：10285829
> 
> 赞同：0
> 
> 时间：2012-04-23T18:05:51.473
> 
> 标签：blackberry, java-me, wallpaper

我知道我必须使用以下代码： HomeScreen.setBackgroundImage(Sring uri) 从我的应用程序中的图像设置壁纸，但是我将为字符串 url 键入什么内容？我的应用程序中有图像，但到目前为止我还没有使用持久存储。所以问题 #2 是，我是否必须将图像持久化才能将其用作壁纸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T04:16:01.183

检查此链接[setBackgroundImage](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/blackberry/api/homescreen/HomeScreen.html#setBackgroundImage%28java.lang.String%29)，它描述了 URI 的典型格式。

> 设置主屏幕的背景图像。必须是驻留在闪存或 SD 卡中的图像文件。URI 的典型格式是“file:///store/home/user/pictures/file.jpg”。

# java - 如何通过图形记录

> ID：10285830
> 
> 赞同：0
> 
> 时间：2012-04-23T18:05:52.993
> 
> 标签：java

在网上看到了这个，这似乎是记录项目的好方法。有谁知道这是否是由工具生成的，如果是，是什么工具？

![在此处输入图像描述](../Images/f4a305002ccc1ca9eb2b5cfbae858483.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:17:41.757

我不知道它是如何生成的，但是如果您正在寻找一种以编程方式创建这些的工具，那么您可以使用[PlantUML](http://plantuml.sourceforge.net/index.html)。

我希望这在某种程度上有所帮助。

# haskell - 将 n 行读入 [String]

> ID：10285837
> 
> 赞同：11
> 
> 时间：2012-04-23T18:06:40.543
> 
> 标签：haskell

我正在尝试将内容`n`行读入字符串列表。我尝试了以下代码的几种变体，但没有任何效果。

```
main = do
  input <- getLine
  inputs <- mapM getLine [1..read input]
  print $ length input 
```

这会引发以下错误：

```
Couldn't match expected type `a0 -> IO b0'
                with actual type `IO String'
    In the first argument of `mapM', namely `getLine'
    In a stmt of a 'do' block: inputs <- mapM getLine [1 .. read input]
    In the expression:
      do { input <- getLine;
           inputs <- mapM getLine [1 .. read input];
           print $ length input } 
```

和

```
main = do
  input <- getLine
  let inputs = map getLine [1..read input]
  print $ length input 
```

投掷

```
 Couldn't match expected type `a0 -> b0'
                with actual type `IO String'
    In the first argument of `map', namely `getLine'
    In the expression: map getLine [1 .. read input]
    In an equation for `inputs': inputs = map getLine [1 .. read input] 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-04-23T18:22:02.093

使用[`replicateM`](https://hackage.haskell.org/package/base/docs/Control-Monad.html#v:replicateM)来自`Control.Monad`：

```
main = do
  input <- getLine
  inputs <- replicateM (read input) getLine
  print $ length inputs 
```

本着“授人以鱼/授人以渔”的精神：您可以通过搜索[Hoogle](http://www.haskell.org/hoogle/)自己找到此内容。

你有：

*   要执行的动作类型`IO String`
*   执行该操作的次数（类型`Int`）

你要：

*   类型的动作`IO [String]`

因此，您可以在[Hoogle 中搜索`(IO String) -> Int -> (IO [String])`](http://www.haskell.org/hoogle/?hoogle=%28IO+String%29+-%3E+Int+-%3E+%28IO+[String]%29). `replicateM`是第一个打击。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-25T16:16:55.433

执行此操作的另一种方法是使用纯复制和`sequence :: (Traversable t, Monad m) => t (m a) -> m (t a)` 工具。可以说，首先我们将要求计数，然后要求那么多整数在终端上打印它们的总和。

```
sumCountManyData :: IO ()
sumCountManyData = putStr "How many integers to sum..? "
                   >>  getLine
                   >>= sequence . flip replicate getLine . read
                   >>= print . sum . map read 
```

# jquery - jQuery->从其他属性获取 id

> ID：10285849
> 
> 赞同：0
> 
> 时间：2012-04-23T18:07:46.057
> 
> 标签：jquery

在下面的 HTML 中，我需要根据 p_code 属性检索 p_id 属性。例如：

如果我有“WH15”的 p_code，我需要返回“63”。

我将如何使用 jQuery 来做到这一点？

```
<div id="deslist_13" class="sch_accordion_item_content_active" style="display: block;">
    <div class="left_shadow"></div>
    <div p_code="BRE" id="pdiv_60" p_id="60" class="program odd">
      <input type="hidden" id="hidden_60" value="BRE">
      <input type="hidden" id="tabId_60" value="13">
      <div class="cb"></div><span>BRE</span>
    </div>
    <div p_code="WH13" id="pdiv_61" p_id="61" class="program">
      <input type="hidden" id="hidden_61" value="WH13">
      <input type="hidden" id="tabId_61" value="13">
      <div class="cb"></div><span>WH13</span>
    </div>
    <div p_code="WH14" id="pdiv_62" p_id="62" class="program odd">
      <input type="hidden" id="hidden_62" value="WH14">
      <input type="hidden" id="tabId_62" value="13">
      <div class="cb"></div><span>WH14</span>
    </div>
    <div p_code="WH15" id="pdiv_63" p_id="63" class="program">
      <input type="hidden" id="hidden_63" value="WH15">
      <input type="hidden" id="tabId_63" value="13">
      <div class="cb"></div><span>WH15</span>
    </div>
    <div p_code="BPA" id="pdiv_64" p_id="64" class="program odd">
      <input type="hidden" id="hidden_64" value="BPA">
      <input type="hidden" id="tabId_64" value="13">
      <div class="cb"></div><span>BPA</span>
    </div>
    <div p_code="BPR" id="pdiv_65" p_id="65" class="program">
      <input type="hidden" id="hidden_65" value="BPR">
      <input type="hidden" id="tabId_65" value="13">
      <div class="cb"></div><span>BPR</span>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T18:10:04.430

```
var p_id = $('div[p_code="WH15"]').attr('p_id'); 
```

演示：http: [//jsfiddle.net/mattball/9Htdq/](http://jsfiddle.net/mattball/9Htdq/)

* * *

**但是：**如果您可以更改标记，那么使用[HTML5`data-*`属性](http://html5doctor.com/html5-custom-data-attributes/)会好得多。它们被[HTML5 规范所允许](http://www.w3.org/TR/html5/global-attributes.html#embedding-custom-non-visible-data-with-the-data-attributes)，并[自动与`.data()`](http://api.jquery.com/data/#data-html5).

# .net - 使用 xsd.exe 从程序集中的类型生成 XSD，在属性上具有数据注释属性

> ID：10285852
> 
> 赞同：5
> 
> 时间：2012-04-23T18:07:56.273
> 
> 标签：.net, xsd, data-annotations, xsd.exe

我希望重用一些带有数据注释的视图模型类来生成 xsd 文件，以验证（和记录）来自 3rd 方系统的 xml 文件。Xsd.exe 可以很好地生成 .xsd 文件，但是像 [Required] 这样的数据注释属性不会反映在带有 f.ex 的 xsd 中。minOccurs=1。

我在这里有什么选择（如果有的话）？“最简单的”可能是使用反射创建我自己的 xsd 代。或者我可以在单独的 xsd 中创建额外的验证属性并在验证 xml 文件时使用两者吗？

还有其他想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-25T11:39:35.393

我不知道任何其他解决方案。

我确实使用反射编写了一个 XSD 生成器（在我的情况下能够包含注释）——这是一项相当多的工作，但绝对可行。

# nhibernate - 如何使用 Icriteria nhibernate 执行连接

> ID：10285856
> 
> 赞同：0
> 
> 时间：2012-04-23T18:08:16.307
> 
> 标签：nhibernate, icriteria

我正在使用 nhibernate 在 MVC3 中开发一个应用程序来触发数据库查询。

我有两个模型。爱好大师爱好详情

HobbyMaster 类包含：

```
HobbyId
and other details 
```

HobbyDetail 类包含：

```
HobbyDetaild
HobbyMasters hobbymaster
other detals 
```

现在我想使用 Icrteria 在两个表之间执行一个 jon：

```
ICriteria criteria = session.CreateCriteria<HobbyDetail>()
                    .CreateAlias("HobbyMasters", "HobbyMasters")
                    .Add(Restrictions.EqProperty("HobbyMasters.HobbyId", "HobbyDetail.hobbymaster.HobbyId")); 
```

还有这个：

```
 HobbyDetail = session.CreateCriteria(typeof(HobbyDetail))
               .CreateAlias("HobbyMasters", "HobbyMasters", NHibernate.SqlCommand.JoinType.InnerJoin)
              .Add(Restrictions.EqProperty("HobbyMasters.hobbymaster.HobbyId", "HobbyDetail.HobbyId")) 
```

但是我收到一条错误消息，说**无法解析 HobbyDetail 类的属性 HobbyMaster**

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T18:15:48.807

You can use QueryOver, it's a wrapper on ICriteria with Lambda Expressions:

```
session.QueryOver<HobbyDetail>()
  .Fetch(hobbyDetail => hobbyDetail.HobbyMasters).Eager
  .TransformUsing(Transformers.DistinctRootEntity)
  .List(); 
```

# java - Using semaphores to block a thread until all other threads have run a critical section a certain number of times

> ID：10285859
> 
> 赞同：3
> 
> 时间：2012-04-23T18:08:32.903
> 
> 标签：java, multithreading, semaphore

I'm writing a thread process using semaphores.

Given K, I want to be able to check if all previous threads have entered the critical section at least K-1 times. If not, the current thread would block until the previous threads have been able to do so.

Example: if you set K = 3, when the current thread wants to enter the critical section, it must check if all previous threads have entered the critical section K-1 (so twice in this case) times before it can enter the critical section

Does anyone know of a way in which I can implement this in Java? Thanks in advance.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T18:17:03.427

Make sure you are using Java 7 and use a [Phaser](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Phaser.html). The Phaser accomplishes this out of the box, where K-1 will be the phase.

Here is an example:

```
int waitForPhase = K-1;
ExecutorService e = Executors.newFixedThreadPool(n);
Phaser phaser = new Phaser(n);
for(int i=0; i< n ;i++){
   e.submit(new Runnable(){
       public void run(){
          for(j =0 ;j < waitForPhase ; j++){ 
              //do work
              phaser.arriveAndAwaitAdvance();
              // if you do not want all sub threads to wait for each
              // this can also be phaser.arrive() 
          }
       }
   });
}
phaser.awaitAdvance(waitForPhase); 
```

So when starting there will be `n` registered parties in the phaser. Each time one thread `arriveAndAwaitAdvance` it will wait until all threads reach that barrier. Once all threads reach that barrier the phase will increment. Once the phase reaches K-1 the invoking thread will break out.

After `phaser.awaitAdvance(waitForPhase);` your last statement is satisfied

> current thread would block until the previous threads have been able to do so

Edit:

`awaitAdvance(int phase)` will suspend the current thread until the Phaser's current phase is the phase passed in as the argument. Once all threads arrived and increments to the phase number passed in the current thread will be signaled to awake.

# arrays - Visual FoxPro 9 动态数组

> ID：10285860
> 
> 赞同：0
> 
> 时间：2012-04-23T18:08:38.660
> 
> 标签：arrays, dynamic, com, visual-foxpro

我试图通过 Visual FoxPro 9 从我的 ActiveX 组件中获取动态数组，但没有运气。**（编辑和工作示例）**

```
LOCAL objMain, objAdapt

#define CrLf CHR(13) + CHR(10)

stMsg = ""

objMain = CREATEOBJECT('nnetsdk.oMain')

objMain.UnlockComponent("xxx-xxxxx-xxxxx-xx")

objAdapt = CREATEOBJECT('nnetsdk.oNetworkAdapter')

objAdapt.GetNetworkAdapters && Collects Network Adapter information

vrAdapters = objAdapt.cName && cName holds collected Network Adapter names

FOR EACH vrAdapter IN vrAdapters
 stMsg = stMsg + vrAdapter + CrLf
ENDFOR

MESSAGEBOX(stMsg,64,"List Network Adapters")

RELEASE objAdapt
RELEASE objMain 
```

有人可以解释一下这段代码有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T19:09:24.240

我不知道您的“nnetcom.oMain”ActiveX 控件是什么，但您可以通过 VFP 直接获取

```
lcComputerName = "."
loWMIService = GETOBJECT("winmgmts:\\" + lcComputerName + "\root\cimv2")
loItems = loWMIService.ExecQuery("Select * from Win32_NetworkAdapter",,48)

FOR EACH loItem IN loItems
    lcMACAddress = loItem.MACAddress
    IF !ISNULL(lcMACAddress)
        */ then, you can look at the object properties, such as 
        lcDescription = loItem.Description
        lcMacAddress = loItem.MACAddress
        lcNetConnectionID = NVL( loItem.NetConnectionID, "" )
   ENDIF
ENDFOR 
```

For Each 循环循环通过 [Win32_NetworkAdapter] 类结构的类实例。您可以从该列表中获得几乎任何您想要的东西。 [1](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394217%28v=vs.85%29.aspx)

# javascript - Javascript将字符串返回到Html

> ID：10285862
> 
> 赞同：1
> 
> 时间：2012-04-23T18:08:39.463
> 
> 标签：javascript, html

初学者问题：我想将 window.location.hash 传递给我的表单操作参数。如何使用 javascript 调用来做到这一点？

我当前的非工作代码是：

```
<form method="POST"
    action="j_security_check"+window.location.hash> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T18:12:45.243

您的 javascript 需要基于某种事件。因此，您可能希望在按下提交按钮时这样做：

```
<form method="POST" action="">
<input type="submit" value="Submit" onclick="this.form.action = 'j_security_check'+window.location.hash" />

..... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T18:21:22.050

```
<form name="hello" method="POST" action="">
    Hello
</form>​

<script>
    document.forms.hello.action = 'j_security_check'+window.location.hash;
    alert(document.forms.hello.action);
</script> 
```

证明：http: [//jsfiddle.net/2QE6h/1](http://jsfiddle.net/2QE6h/1)

# c# - 从 Task.Continuewith 更新 UI 标签

> ID：10285863
> 
> 赞同：4
> 
> 时间：2012-04-23T18:08:42.040
> 
> 标签：c#, .net

我正在开发一个 Winform 应用程序。由**BackgroundWorker**线程`Method`启动。对不起。我之前没有提到这一点。

 **```
private void Method()
{
 tasks[i] = Task.Factory
           .StartNew(() => fileProcessor.ProcessEachMachine(mdetail))
           .ContinueWith(UpdateLabel, TaskContinuationOptions.OnlyOnRanToCompletion);
} 
```

我有一个长期运行的功能`ProcessEachMachine`。在延续函数`UpdateLabel`中，我想访问 UIlabel 并更新状态。

```
private void UpdateLabel()
{
   progressLbl.Text = "updated";
} 
```

但是标签没有更新。如何访问 UILabel 并更新它的文本。？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T18:15:26.120

You have to set the [TaskScheduler.FromCurrentSynchronizationContext](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.fromcurrentsynchronizationcontext.aspx) on ContinueWith or else it will not be run in the UI context. [Here is the MSDN on the override that you must use for this call to ContinueWith](http://msdn.microsoft.com/en-us/library/dd991174.aspx).

It should end up looking like this:

```
.ContinueWith(UpdateLabel, null, 
    TaskContinuationOptions.OnlyOnRanToCompletion,
    TaskScheduler.FromCurrentSynchronizationContext()); 
```

It may seem like nothing is happening, but the TPL is currently swallowing your cross thread exception. You should probably use the [UnobservedTaskException](http://msdn.microsoft.com/en-us/library/system.threading.tasks.taskscheduler.unobservedtaskexception.aspx) if you are not going to inspect each result or check for its exception. Otherwise, when garbage collection occurs, the exception will happen then...which could create hard to debug errors.

**UPDATE**

Based on your update about the main Task being setup and started by a Backgroundworker, my main question is why this could not use a Task to start? In fact, if there is not more in the `Method`, then this is really just double work and might confuse other developers. You are already started asynchronously, so why not just do your work within the backgroundworker and use an [OnComplete](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.onrunworkercompleted.aspx) method that will `UpdateLabel` (as background workers are already context aware).

The main problem is still the same though, so here are some other solutions if you feel you must use the TPL:

1.  You can `Invoke` back onto the main UI thread within the UpdateLabel method
2.  You can pass the current context into the backgroundworker and use that instead
3.  You can `Wait` for your original Task to return and then use the worker's oncomplete event to update the label.

Here is how I would do this (all pseudo code)

Background Worker Method:

```
Method() called because of Background worker

private void Method()
{
    fileProcessor.ProcessEachMachine(mdetail);
}

Wire up background worker's OnRunWorkerCompleted:

if(!e.Cancelled && !e.Error)
    UpdateLabel(); 
```

Task only method

```
Call Method() from the main thread and just let the TPL do its work :)

Task.Factory.StartNew(() => fileProcessor.ProcessEachMachine(mdetail))
       .ContinueWith((precedingTask)=>{if(!precedingTask.Error)UpdateLabel;}, 
           null, TaskContinuationOptions.OnlyOnRanToCompletion,
           TaskScheduler.FromCurrentSynchronizationContext()); 
```**

# osgi - Karaf 中的参考协议支持

> ID：10285882
> 
> 赞同：1
> 
> 时间：2012-04-23T18:09:49.983
> 
> 标签：osgi, apache-karaf

当我尝试`reference:file:/path/to.jar`在 Karaf 集成测试中用作捆绑 URL 时，出现“未知协议：引用”错误。Karaf 邮件列表中提到了一些`reference:`URL，但这对我来说并不清楚：

1.  他们应该默认工作吗？

2.  如果没有，我该如何启用它们？大概我需要一个合适的包来提供 URLHandlerService，但是哪一个呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-24T09:56:29.337

1.  Karaf 中的 URL 处理程序由[Pax-Url 项目](http://team.ops4j.org/wiki/display/paxurl)提供，我认为默认情况下不提供参考（主要用于测试支持）。

2.  [你可以在这里](http://search.maven.org/#search%7Cgav%7C1%7Cg%3a%22org.ops4j.pax.url%22%20AND%20a%3a%22pax-url-reference%22)通过 maven 找到 pax-url-reference

# c++ - 对象数组动态内存分配

> ID：10285884
> 
> 赞同：0
> 
> 时间：2012-04-23T18:10:03.920
> 
> 标签：c++, arrays, class, memory-management

我正在尝试将动态内存分配给对象数组，但我不断收到以下错误：

“错误：C2143：语法错误：缺少';' 在“*”之前”“错误：C2501：“Figura”：缺少存储类或类型说明符”

欢迎任何帮助。我正在使用 Visual Basic C++ 2006，但将切换到带有 Dosbox 的 Turbo C++ 3.0 以使 graphics.h 工作:(。

这是代码：

```
#include<iostream.h>

class Grup {
    private:
        int nr_elemente;
        Figura *figuri;
    public:
        Grup() {
            figuri = new Figura[nr_elemente];
        }
};

class Figura {

public:
    Figura();
    ~Figura();
    Figura(const Figura&);

    friend Figura operator+(const Figura& fig1, const Figura& fig2) {};
    friend Figura operator+(const Grup& gr1, const Grup& gr2) {}

    friend Figura operator*(const Figura& fig) {}
    friend Figura operator*(const Figura& fig) {}

};

Figura operator+(const Figura& fig, const Grup& gr) {
    return fig;
}

class Punct : Figura
{
public:
    int x, y;

    Punct(int x, int y) {
        Punct::x = x;
        Punct::y = y;
    }
};

class Segment : Figura
{
public:
    int x, y, poz;
};

class Dreptunghi : Figura
{
public:
    int x, y, poz;
};

void main(void) {

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T18:14:12.040

在这一行：

```
figuri = new Figura[nr_elemente]; 
```

编译器不知道类的`Figura`存在。因此，它会产生一个错误，因为“Figura”在那个时候是一个未知的标记。您应该使用前向声明：

```
class Figura; // forward-declare class Figura

class Grup {
/* ... */
};

class Figura {
/* ... */
}; 
```

问题是编译器不知道类的大小`Figura`，因此它不能分配这种类型的对象数组。因此，您可能需要使用指针或修改您的类设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T18:34:52.447

您的问题是您试图在一个文件中完成所有操作。`.hpp`如果您将类的声明和定义移动到单独的`.cpp`文件中，您将不会遇到此类问题。移动

```
// file grup.hpp

class Figura; // forward declaration

class Grup {
private:
    int nr_elemente;
    Figura *figuri;
public:
    Grup();
}; 
```

`grup.hpp`归档。然后实现文件中的构造`Grup`函数`group.cpp`：

```
// file grup.cpp
#include "grup.hpp"
#include "figura.hpp"

Grup::Grup()
{
    figuri = new Figura[nr_elemente];
} 
```

还将 Figura 类的定义和声明移动到相应`figura.hpp`的`figura.cpp`文件中。最好对您拥有的所有课程使用相同的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T19:00:30.453

您需要转发声明，已经提到过，但这还不够，您需要知道类的大小才能将其用作实现。所以...

```
class Figura;
class Grup{
  Figura * figuri;
  //.. other stuff, but ONLY declarations no implementations.
};

class Figura
{
  //Same as you already have...
}; 
```

在声明类之后，由于它们在同一个文件中，因此您需要在其他类已经实现（或声明）之后实现。

```
//Still same file but below the Figura class definition..
Grup::Grup() {
   //Now you can use Figura...
   figuri = new Figura[nr_elemente];
} 
```

@be 您在下面的评论中看到的问题与您的 fig 类的赋值运算符有关。

运算符看起来像这样... Fig& operator=(const Fig& );

但是在您的示例中，您正在分配一个指针 void func(const Fig * fig) { //... figcontainer[index] = fig; // 如果你做了 *fig; 你会没事的 //...
}

# javascript - Chrome 扩展将外部 javascript 添加到当前页面的 html

> ID：10285886
> 
> 赞同：26
> 
> 时间：2012-04-23T18:10:07.367
> 
> 标签：javascript, dom, google-chrome-extension, google-analytics, content-script

我正在通过我的 chrome 扩展在页面末尾添加一些外部 JavaScript。然后，外部 JavaScript 尝试将一些数据发送回服务器，但这并没有发生。

JavaScript 想要获取当前页面的 url 和引用者并将其发布回服务器。

谁能告诉我这里出了什么问题，如果不可能，我该如何将当前页面的数据发布回服务器。

清单.json

```
{
  "name": "Website Safety",
  "version": "1.0",
  "manifest_version": 2,
  "description": "The Website Safety Extension.",
  "browser_action": {
    "name": "View the website information for ",
    "default_icon": "icon.png",
    "default_popup": "popup.html"
  },
  "permissions": [
    "tabs", "http://*/*", "https://*/*"
  ],
  "background": {
  //  "scripts": ["refresh.js"]
    "page": "background.html"
  },
  "content_security_policy": "script-src 'self' https://ssl.google-analytics.com; object-src 'self'",
  //"background_page": "background.html"

  "content_scripts": [
    {
      "matches": ["<all_urls>"],
      "js": ["contentScript.js"]
    }
  ]
} 
```

现在 contentScript.js

```
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-31046309-1']);
_gaq.push(['_setAllowLinker', true]);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
//ga.src = 'https://ssl.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

var _Hasync= _Hasync|| [];
_Hasync.push(['Histats.start', '1,1342541,4,0,0,0,00000000']);
_Hasync.push(['Histats.fasi', '1']);
_Hasync.push(['Histats.track_hits', '']);
(function() {
var hs = document.createElement('script'); hs.type = 'text/javascript'; hs.async = true;
hs.src = ('http://s10.histats.com/js15_as.js');
(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(hs);
})(); 
```

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-04-29T09:19:00.130

内容脚本**不在**页面范围内运行（[另请参阅](https://stackoverflow.com/a/9916089/938089?chrome-extension-auto-run-a-function)），它们在您的扩展程序和网页之间的上下文中运行。

由于跟踪器属于“注入脚本”类型，因此它们完全在网页的上下文中运行。但是`_gaq`and`Hasync`变量没有。因此，跟踪脚本无法读取配置变量。

有两（三）种方法可以修复它。

1.  [使用此方法](https://stackoverflow.com/a/9517879/938089?building-a-chrome-extension-inject-code-in-a-page-using-a-content-script)注入您的代码（如问题中所述）。**不鼓励**将此方法用于您的目的，因为您的脚本会覆盖常用的全局变量。使用这种方法实现你的脚本会**破坏**许多网站上的跟踪——**不要使用它**。
2.  在内容脚本范围内完全运行代码：
    两个选项：
    1.  在扩展中包含外部文件
    2.  在扩展中包含外部文件，并实现自动更新功能。

## 方法一：完全本地复制

**`manifest.json`**（仅显示相关部分）：

```
{
  "name": "Website Safety",
  "version": "1.0",
  "manifest_version": 2,
  "description": "The Website Safety Extension.",
  "permissions": [
    "tabs", "http://*/*", "https://*/*"
  ],
  "content_scripts": [
    {
      "matches": ["<all_urls>"],
      "js": ["ga-config.js", "ga.js", "js15_as.js"]
    }
  ]
} 
```

在**`ga-config.js`**中，定义变量如下：

```
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-31046309-1']);
_gaq.push(['_setAllowLinker', true]);
_gaq.push(['_trackPageview']);

var _Hasync= _Hasync|| [];
_Hasync.push(['Histats.start', '1,1342541,4,0,0,0,00000000']);
_Hasync.push(['Histats.fasi', '1']);
_Hasync.push(['Histats.track_hits', '']); 
```

下载[https://ssl.google-analytics.com/ga.js](https://ssl.google-analytics.com/ga.js)，并将其另存为**`ga.js`**.
下载[http://s10.histats.com/js15_as.js](http://s10.histats.com/js15_as.js)，保存为**`js15_as.js`**.

## 方法 2：注入最新的 GA

如果您想拥有最新版本的 GA，则必须使用一种复杂的注入代码的方式，因为**无法从外部 URL 包含**内容脚本。

此答案的旧版本依赖于后台页面并[`chrome.tabs.executeScript`](https://developer.chrome.com/extensions/tabs.html#method-executeScript)为此目的，但自 Chrome 20 以来，出现了更好的方法：使用[`chrome.storage`](https://developer.chrome.com/extensions/storage.html)API 缓存 JavaScript 代码。为了保持代码更新，我将在存储中存储“最后更新”时间戳；您也可以改用[`chrome.alarms`](https://developer.chrome.com/extensions/alarms.html)API。

**注意：不要忘记在您的扩展程序中包含外部文件的本地副本，以防用户没有互联网连接等。** ^(如果没有互联网连接，Google Analytics 无论如何都无法工作。)

内容脚本，**`activate-ga.js`**.

```
var UPDATE_INTERVAL = 2 * 60 * 60 * 1000; // Update after 2 hour

// Retrieve GA from storage
chrome.storage.local.get({
    lastUpdated: 0,
    code: ''
}, function(items) {
    if (Date.now() - items.lastUpdated > UPDATE_INTERVAL) {
        // Get updated file, and if found, save it.
        get('https://ssl.google-analytics.com/ga.js', function(code) {
            if (!code) return;
            chrome.storage.local.set({lastUpdated: Date.now(), code: code});
        });
    }
    if (items.code) // Cached GA is available, use it
        execute(items.code);
    else // No cached version yet. Load from extension
        get(chrome.extension.getURL('ga.js'), execute);
});

// Typically run within a few milliseconds
function execute(code) {
    try { window.eval(code); } catch (e) { console.error(e); }
    // Run the rest of your code.
    // If your extension depends on GA, initialize it from here.
    // ...
}

function get(url, callback) {
    var x = new XMLHttpRequest();
    x.onload = x.onerror = function() { callback(x.responseText); };
    x.open('GET', url);
    x.send();
} 
```

最小清单文件：

```
{
  "name": "Website Safety",
  "version": "1.0",
  "manifest_version": 2,
  "permissions": [
    "tabs", "http://*/*", "https://*/*"
  ],
  "content_scripts": [
    {
      "matches": ["<all_urls>"],
      "js": ["activate-ga.js"]
    }
  ],
  "web_accessible_resources": ["ga.js"]
} 
```

相同的方法可用于其他跟踪器。最低权限要求：

*   **`https://ssl.google-analytics.com/ga.js`**，因此应该在权限部分添加。`https://*/*`或者`<all_urls>`也足够了。
*   *可选*：**`unlimitedStorage`**- 如果你想用`chrome.storage`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-05-28T10:18:37.007

**2015 更新**

新的*Universal Analytics*代码段绝对可以处理[多个跟踪器](https://developers.google.com/analytics/devguides/collection/analyticsjs/creating-trackers#working_with_multiple_trackers)，因此假设您给自己的名称取一个唯一的名称并[在页面上下文中运行](https://stackoverflow.com/questions/9515704/building-a-chrome-extension-inject-code-in-a-page-using-a-content-script/9517879#9517879)**所有**Analytics 代码，您应该可以开始了。

```
// add Universal Analytics to the page (could be made conditional)
runFunctionInPageContext(function () {
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o);
  a.async=1;a.src=g;document.documentElement.appendChild(a)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
});

// all Google Analytics calls should use our tracker name  
// and be run inside the page's context
runFunctionInPageContext(function () {
  ga('create', 'UA-12345-6', 'auto', {'name': 'myTracker'});
  ga('myTracker.send', 'pageview'); // note the prefix
});

// simple helper function
function runFunctionInPageContext(fn) {
  var script = document.createElement('script');
  script.textContent = '(' + fn.toString() + '());';
  document.documentElement.appendChild(script);
  document.documentElement.removeChild(script);
} 
```

*请注意，在分析代码段中需要稍作修改，`document.documentElement`而不是第一个`<script>`元素。这是因为 google 假设您在内联脚本块中添加分析，而在这里您从内容脚本添加它。*

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-05-18T04:46:33.760

我通读了这个帖子：[https](https://groups.google.com/a/chromium.org/forum/#!topic/chromium-extensions/yc-ouDqfMw0) ://groups.google.com/a/chromium.org/forum/#!topic/chromium-extensions/yc-ouDqfMw0发现有一个官方的 chrome 方法可以将分析脚本添加到页面，它不在官方文档中。

您可以参考此扩展程序以供参考：[https](https://github.com/GoogleChrome/chrome-app-samples/tree/master/samples/analytics) ://github.com/GoogleChrome/chrome-app-samples/tree/master/samples/analytics它使用此库：[https ://github.com/GoogleChrome/chrome-平台分析](https://github.com/GoogleChrome/chrome-platform-analytics)

基本上你在本地手动包含脚本：

```
 <script src="your_path/google-analytics-bundle.js"></script>
  <script src="main.js"></script> 
```

然后你调用一些库函数：

```
var service, tracker, out;

function initAnalyticsConfig(config) {
  document.getElementById('settings-loading').hidden = true;
  document.getElementById('settings-loaded').hidden = false;

  var checkbox = document.getElementById('analytics');
  checkbox.checked = config.isTrackingPermitted();
  checkbox.onchange = function() {
    config.setTrackingPermitted(checkbox.checked);
  };
} 
```

注意：显然，您*必须*具有选择退出功能[https://github.com/GoogleChrome/chrome-platform-analytics/wiki#add-privacy-support-aka-opt-out](https://github.com/GoogleChrome/chrome-platform-analytics/wiki#add-privacy-support-aka-opt-out)

```
function startApp() {
  // Initialize the Analytics service object with the name of your app.
  service = analytics.getService('ice_cream_app');
  service.getConfig().addCallback(initAnalyticsConfig);

  // Get a Tracker using your Google Analytics app Tracking ID.
  tracker = service.getTracker('UA-XXXXX-X');

  // Record an "appView" each time the user launches your app or goes to a new
  // screen within the app.
  tracker.sendAppView('MainView');
}

window.onload = startApp; 
```

# c++ - 如何在C++中将变量存储在字符串数组中

> ID：10285889
> 
> 赞同：0
> 
> 时间：2012-04-23T18:10:13.717
> 
> 标签：c++

我非常喜欢 C++，最近有一个家庭作业，我需要将 1000 个最常见的单词存储到一个字符串数组中。我想知道我该怎么做。到目前为止，这是我的示例代码，

```
if(infile.good() && outfile.good())
    {
        //save 1000 common words to a string 

        for (int i=0; i<1000; i++) 
        {
            totalWordsIn1000MostCommon++; 
            break; 
        }

        while (infile.good()) 
        {
            string commonWords[1000];
            infile >> commonWords;
        }
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T18:20:40.067

上面的`for`循环一开始什么都不做，只是在第一次迭代时中断。如果您阅读如何在 C++ 中使用循环会更好。还要看看 C++ 中变量的作用域。在您的情况下， commonWords 在`while`循环中声明，因此每次都会创建并在每次循环迭代后销毁。你想要的是这样的：

```
int i = 0;
std::string commonWords[1000];
while (i < 1000 && infile.good()) {
    infile >> commonWords[i];
    ++i;
} 
```

我把剩下的部分活给你完成你的作业。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T18:19:40.087

```
 #include <cstdio>
   #include <string>

   freopen(inputfileName,"r",stdin); 
   const int words = 1000;
   string myArr[words];
   for(int i=0;i<words;i++){
       string line;
       getline(cin,line);
       myArr[i] = line;      
   } 
```

# android - 使用 MediaPlayer 进行 Android Gingerbread 缓冲

> ID：10285891
> 
> 赞同：0
> 
> 时间：2012-04-23T18:10:13.903
> 
> 标签：android, streaming, android-mediaplayer, android-version

我尝试实现一个简单的媒体播放器来播放来自外部 URL 的音频流。我猜很简单。试图从 Androïd 开发站点[http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/media/MediaPlayerDemo_Audio.html实现这个示例](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/media/MediaPlayerDemo_Audio.html)

它适用于 2.1。然后，有了 2.2，它变得很奇怪。开始很好，但需要将近 10 秒才能停止。使用 2.3 并没有更好。这段时间可能需要一分钟才能开始播放，但会停止。

有谁知道为什么？我也确实尝试过使用listner 的prepareAsync 方式，但它从未被调用过。在这一点上，任何帮助将不胜感激。谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-25T05:42:32.440

注册setOnInfoListener()，控制开始缓冲、结束缓冲等。查看android文档[链接](http://developer.android.com/reference/android/media/MediaPlayer.html#setOnInfoListener%28android.media.MediaPlayer.OnInfoListener%29)

# xcode - Xcode'架构x86_64的未定义符号：'错误？

> ID：10285892
> 
> 赞同：0
> 
> 时间：2012-04-23T18:10:15.463
> 
> 标签：xcode

```
Error: " Undefined symbols for architecture x86_64:
      "f(int, int, int const (*) [8], int const (*) [8], int*, int*)", referenced from:
      _main in main.o "
      ld: symbol(s) not found for architecture x86_64
      clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

我尝试在 Visual Studio 2010 上运行完全相同的代码，并且成功了！知道为什么它在这里不起作用吗？我的 Mac 是 64 位的。谢谢！

这是给出错误的文件上的代码：

```
#include <iostream>
  using namespace std;
  int p,q;

  int f( int,  int,const int [][8],const int [][8], int [],int []); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-24T00:13:51.897

如果您没有提供 f(..) 函数的实现，就会发生这种情况。

在您的 main.cpp 文件中，只需实现该功能，例如：

```
int f( int,  int,const int [][8],const int [][8], int [],int [])
{
    // Do stuff... 
} 
```

# javascript - 延迟 dojo 小部件中的函数被调用，直到设置全局变量

> ID：10285896
> 
> 赞同：0
> 
> 时间：2012-04-23T18:10:36.483
> 
> 标签：javascript, dojo

我有一个从外部 js 文件呈现的自定义饼图。我使用 xhrget 来获取填充饼图所需的数据。我正在使用的 url 包含一个全局变量，但我的问题是脚本中的函数在设置全局变量之前被调用。

这是我的代码：

```
 var chart1 = new dojox.charting.Chart2D(this.id,{fill:"transparent"});

        chart1.setTheme(dojox.charting.themes.MiamiNice,{fill:"transparent"});

        chart1.addPlot("default", {
        type: "Pie",
        labels: false,
         labelStyle: "rows",
        precision: -10,
        fontColor: "black",
        labelOffset: -20,
        radius: 150
      });

      console.log(this.getURLFunction(this.id ));

        chart1.theme.plotarea.fill = undefined;
        this.xhrDeferred = dojo.xhrGet({
            url: this.getURLFunction(this.id)**,//"../traffic-analysis/get-ip-dist/format/json/ds/1/data/rate/tTime/1334787567/fTime/1334182767/time/604800/drilldown/true/displayedTime/enabled?dojo.preventCache=1334787568120",

            sync: true,
            handleAs: "json",
            preventCache: true,
           load: function(responseObj) {

            var seriesData=[1,2,3,4,5,6,7];
            chart1.addSeries("IP", dojo.map(responseObj.pieItems, function(p){
  return {
    y:    p[1], // value
    text: p[0],  // label
    tooltip:p[0] +": " + p[1]
  };
}));

      var anim_a = new dojox.charting.action2d.MoveSlice(chart1, "default");
      var anim_b = new dojox.charting.action2d.Highlight(chart1, "default");
      var anim_c = new dojox.charting.action2d.Tooltip(chart1, "default");
        chart1.render();

        var chartLegend = new dojox.charting.widget.Legend({
                chart: chart1,
                swatchSize: 12,
            },
            "chartLegend");

            },
            // error: function(error, args) { console.warn("error", error); }
            error: function(error, args) { 

                _this.xhrError = true;
                _this.chartStatusBar.innerHTML = chartErrorMsg(_this.id);
                console.log(error);
            }

        }); 
```

xhrget for url 下的 getURLFunction(this.id) 指的是 html 中的元素，该元素具有从 html 文件调用特定函数的 id。

该函数是 getURL_IpDist() ，它返回 xhrget 用于获取数据的 url，即 /traffic-analysis/get-ip-dist/format/json" + sc.toURL();

sc 是在我的函数尝试获取 url 之前需要设置的全局变量。这是在另一个外部 javascript 文件中设置的。有谁知道如何在设置变量之前延迟 dojo 或 javascript 的加载？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T18:19:50.677

据我了解，您发布的代码位于单独的 js 文件中，并且您使用`<script>`标签将其包含在内。

您是否尝试过将此代码包装在一个`ready`函数中？

```
require(["dojo/ready"], function(ready){
    ready(function(){

        // var chart1 = ...

    });
}); 
```

在浏览器解析整个 dom 之前，这样做不会执行代码。其中应该包括设置全局变量的其他代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T03:33:20.730

不要使用变量，而是使用函数。设置“全局变量”的组件实际上应该调用一个函数来设置相关的全局变量。

然后应用程序的其他部分可以使用 dojo.connect() 连接到该函数，因此无论何时调用它，dojo 都会调用连接到该函数的任何处理程序。例如：

```
global.setVar = function(value) {
  global.var = value;
}
...
dojo.connect(global, 'setVar', null, function() {
  alert("Global variable has been set to: "+global.var);
}); 
```

您可以使用 dojo 的订阅/发布工具来获得类似的功能，甚至可以使用您自己的 dojo.Deferred 实例。您采用哪种方法来同步通信取决于您的应用程序是如何设计的以及您的具体需求是什么。

# java - 单击注册后应用程序崩溃

> ID：10285900
> 
> 赞同：0
> 
> 时间：2012-04-23T18:11:05.497
> 
> 标签：java, android

痕迹：

```
04-23 18:21:28.380: D/dalvikvm(628): GC_FOR_ALLOC freed 48K, 4% free 6396K/6595K, paused 76ms
04-23 18:21:28.390: I/dalvikvm-heap(628): Grow heap (frag case) to 6.797MB for 513744-byte allocation
04-23 18:21:28.520: D/dalvikvm(628): GC_FOR_ALLOC freed 3K, 4% free 6894K/7111K, paused 81ms
04-23 18:21:28.660: D/dalvikvm(628): GC_CONCURRENT freed <1K, 4% free 6894K/7111K, paused 4ms+13ms
04-23 18:22:09.350: D/AndroidRuntime(628): Shutting down VM
04-23 18:22:09.350: W/dalvikvm(628): threadid=1: thread exiting with uncaught exception (group=0x40014760)
04-23 18:22:09.370: E/AndroidRuntime(628): FATAL EXCEPTION: main
04-23 18:22:09.370: E/AndroidRuntime(628): android.os.NetworkOnMainThreadException
04-23 18:22:09.370: E/AndroidRuntime(628):  at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1077)
04-23 18:22:09.370: E/AndroidRuntime(628):  at dalvik.system.BlockGuard$WrappedNetworkSystem.connect(BlockGuard.java:368)
04-23 18:22:09.370: E/AndroidRuntime(628):  at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:208)
04-23 18:22:09.370: E/AndroidRuntime(628):  at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:431)
04-23 18:22:09.370: E/AndroidRuntime(628):  at java.net.Socket.connect(Socket.java:901)
04-23 18:22:09.370: E/AndroidRuntime(628):  at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
04-23 18:22:09.370: E/AndroidRuntime(628):  at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:143)
04-23 18:22:09.370: E/AndroidRuntime(628):  at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
04-23 18:22:09.370: E/AndroidRuntime(628):  at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
04-23 18:22:09.370: E/AndroidRuntime(628):  at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
04-23 18:22:09.370: E/AndroidRuntime(628):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
04-23 18:22:09.370: E/AndroidRuntime(628):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
04-23 18:22:09.370: E/AndroidRuntime(628):  at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
04-23 18:22:09.370: E/AndroidRuntime(628):  at library.JSONParser.getJSONFromUrl(JSONParser.java:42)
04-23 18:22:09.370: E/AndroidRuntime(628):  at library.UserFunctions.registerUser(UserFunctions.java:61)
04-23 18:22:09.370: E/AndroidRuntime(628):  at com.example.AndroidLoginAndRegistration.RegisterActivity$1.onClick(RegisterActivity.java:55)
04-23 18:22:09.370: E/AndroidRuntime(628):  at android.view.View.performClick(View.java:3110)
04-23 18:22:09.370: E/AndroidRuntime(628):  at android.view.View$PerformClick.run(View.java:11934)
04-23 18:22:09.370: E/AndroidRuntime(628):  at android.os.Handler.handleCallback(Handler.java:587)
04-23 18:22:09.370: E/AndroidRuntime(628):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-23 18:22:09.370: E/AndroidRuntime(628):  at android.os.Looper.loop(Looper.java:132)
04-23 18:22:09.370: E/AndroidRuntime(628):  at android.app.ActivityThread.main(ActivityThread.java:4123)
04-23 18:22:09.370: E/AndroidRuntime(628):  at java.lang.reflect.Method.invokeNative(Native Method)
04-23 18:22:09.370: E/AndroidRuntime(628):  at java.lang.reflect.Method.invoke(Method.java:491)
04-23 18:22:09.370: E/AndroidRuntime(628):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:841)
04-23 18:22:09.370: E/AndroidRuntime(628):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:599)
04-23 18:22:09.370: E/AndroidRuntime(628):  at dalvik.system.NativeStart.main(Native Method)
04-23 18:22:12.530: I/Process(628): Sending signal. PID: 628 SIG: 9 
```

代码：

```
import java.util.ArrayList;
import java.util.List;

import org.apache.http.NameValuePair;
import org.apache.http.message.BasicNameValuePair;
import org.json.JSONObject;

import android.content.Context;

public class UserFunctions {

private JSONParser jsonParser;

// Testing in localhost using wamp or xampp
// use http://10.0.2.2/ to connect to your localhost ie http://localhost/
private static String loginURL = "http://10.0.2.2/android_login_api/";
private static String registerURL = "http://10.0.2.2/android_login_api/";

private static String login_tag = "login";
private static String register_tag = "register";

// constructor
public UserFunctions(){
    jsonParser = new JSONParser();
}

/**
 * function make Login Request
 * @param email
 * @param password
 * */
public JSONObject loginUser(String email, String password){
    // Building Parameters
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", login_tag));
    params.add(new BasicNameValuePair("email", email));
    params.add(new BasicNameValuePair("password", password));
    JSONObject json = jsonParser.getJSONFromUrl(loginURL, params);
    // return json
    // Log.e("JSON", json.toString());
    return json;
}

/**
 * function make Login Request
 * @param name
 * @param email
 * @param password
 * */
public JSONObject registerUser(String name, String email, String password){
    // Building Parameters
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", register_tag));
    params.add(new BasicNameValuePair("name", name));
    params.add(new BasicNameValuePair("email", email));
    params.add(new BasicNameValuePair("password", password));

    // getting JSON Object
    JSONObject json = jsonParser.getJSONFromUrl(registerURL, params);
    // return json
    return json;
}

/**
 * Function get Login status
 * */
public boolean isUserLoggedIn(Context context){
    DatabaseHandler db = new DatabaseHandler(context);
    int count = db.getRowCount();
    if(count > 0){
        // user logged in
        return true;
    }
    return false;
}

/**
 * Function to logout user
 * Reset Database
 * */
public boolean logoutUser(Context context){
    DatabaseHandler db = new DatabaseHandler(context);
    db.resetTables();
    return true;
} 
```

logcat 输出可以在顶部找到。下面是我的用户功能的代码，尽管我尽了最大努力，但它仍然不起作用。我曾尝试将 URL 更改为 localhost 等，但它没有将数据保存到 xampp，而是崩溃了。我在库位中有 JSONParse 和 DataBaseHandler，但我不知道问题出在哪里。甚至登录页面也只是崩溃而不是显示错误消息。我已确保所有必需的 php 文件都存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T18:44:13.767

[NetworkOnMainThreadException](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html "NetworkOnMainThreadException")

> 这仅针对面向 Honeycomb SDK 或更高版本的应用程序抛出。允许针对早期 SDK 版本的应用程序在其主事件循环线程上进行网络连接，但非常不鼓励这样做

Android 添加了一个[DownloadFilesTask](http://developer.android.com/reference/android/os/AsyncTask.html "下载文件任务")。您需要使用 DownloadFilesTask。

```
 private class LoginTask extends AsyncTask<String, Integer, Long> {
 private private static String loginURL = "http://10.0.2.2/android_login_api/"; //remove other one
 protected JSONObject doInBackground(String... params) {
     List<NameValuePair> params = new ArrayList<NameValuePair>();
     for(int i=0; i<params.length; i+=2){ //increment i by length of pair(2)
         params.add(new BasicNameValuePair(params[i], params[i+1])); 
     }
     return jsonParser.getJSONFromUrl(loginURL, params);
 }

 protected void onProgressUpdate(Integer... progress) {
     setProgressPercent(progress[0]);
 }

 protected void onPostExecute(Long result) {
     showDialog("Downloaded " + result + " bytes");
 } 
```

修改您的登录功能。由此

```
public JSONObject loginUser(String email, String password){
    // Building Parameters
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", login_tag));
    params.add(new BasicNameValuePair("email", email));
    params.add(new BasicNameValuePair("password", password));
    JSONObject json = jsonParser.getJSONFromUrl(loginURL, params);
    // return json
    // Log.e("JSON", json.toString());
    return json;
} 
```

对此

```
public JSONObject loginUser(String email, String password){
    // Building Parameters
    String[] params = {"tag", login_tag, "email", email, "password", password};
    JSONObject json = new LoginTask().execute(params);
    return json;
} 
```

这是一个小技巧，你时间紧迫。您必须为每个功能做类似的事情，并完成它自己的任务。如果字符串数组中的第一个参数是您想要执行的函数，则可以使其更加模块化。然后让下载任务使用一些分支来确定要传递给函数 getJSONFromUrl 的 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T19:34:31.863

您正在主线程上运行网络操作。至少在 ICS 中这是不允许的，你会得到那个例外。我在为 Android 2.3.3 开发应用程序时遇到了同样的问题，它很好，但在 4.0.3 上崩溃了。

我无法为您提供修改后的代码，因为您的方法必须进行一些重大更改。您必须在另一个线程上运行登录和注册功能，并且不知道如何调用它们。在它们中的每一个中创建一个线程很容易，但是从方法返回结果是不可能的。

正确的实现是在不同的线程上运行它们，并在获得结果时通知主线程。发送通知的一种方法是使用传递给新创建线程的处理程序。我在这里找到了一个例子：[http ://www.helloandroid.com/tutorials/progressbar-updating-using-message-handler](http://www.helloandroid.com/tutorials/progressbar-updating-using-message-handler)

# tomcat - 如何解决Tomcat上的持久性单元

> ID：10285903
> 
> 赞同：0
> 
> 时间：2012-04-23T18:11:13.567
> 
> 标签：tomcat, jpa, eclipselink, persistence-unit

我在 Glassfish 上设置了这个 Web 项目，但由于遇到了一些问题，我决定迁移到 Tomcat。

但是现在我的持久性类抛出以下错误

```
Caused by: javax.persistence.PersistenceException: No Persistence provider for EntityManager named JetCarBd 
```

我尝试将persistence.xml 放在不同的文件夹中，但没有奏效。

持久性.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence"     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"     xsi:schemaLocation="http://java.sun.com/xml/ns/persistence     http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
<persistence-unit name="JetCarBd" transaction-type="RESOURCE_LOCAL">
<provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
<class>br.com.jetcar.entity.Cliente</class>
<class>br.com.jetcar.entity.Endereco</class>
<class>br.com.jetcar.entity.Veiculo</class>
<class>br.com.jetcar.entity.Aluguel</class>
<class>br.com.jetcar.entity.Venda</class>
<class>br.com.jetcar.entity.Interesse</class>
<class>br.com.jetcar.entity.Funcionario</class>
<class>br.com.jetcar.entity.ItensAluguel</class>
<class>br.com.jetcar.entity.AcessorioAluguel</class>
<class>br.com.jetcar.entity.TestDrive</class>
<class>br.com.jetcar.entity.AcessorioVeiculo</class>
<class>br.com.jetcar.entity.Acessorio</class>
<class>br.com.jetcar.entity.Oficina</class>
<class>br.com.jetcar.entity.Manutencao</class>
<class>br.com.jetcar.entity.Reserva</class>
<exclude-unlisted-classes>false</exclude-unlisted-classes>
<properties>
  <property name="javax.persistence.jdbc.url"  value="jdbc:postgresql://localhost:5432/jetcar"/>
  <property name="javax.persistence.jdbc.password" value="postgres"/>
  <property name="javax.persistence.jdbc.driver" value="org.postgresql.Driver"/>
  <property name="javax.persistence.jdbc.user" value="postgres"/>
 </properties>
  </persistence-unit>
</persistence> 
```

ConnectionUtil.java

```
package br.com.jetcar.connection;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.Persistence;

/**
 * @author Jorge Oliveira
 */
public class ConnectUtil {

private  final EntityManagerFactory emf;

public ConnectUtil(){
    emf = Persistence.createEntityManagerFactory("JetCarBd");
}

public EntityManager getEntityManager() {
    return emf.createEntityManager();
}

} 
```

我的 persistence.xml 位于 src/META-INF 下

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:16:27.993

You can check for couple of things here:

1.  After you have deployed your application ensure that persistence.xml is available under

`WEB-INF/classes/META-IN`F folder

1.  Your provider (eclipse jpa) jars are in the classpath, for Eclipse Env in build path, and also check if that is available in the deployed application.

# asp.net - 从部署在 IIS 中的应用程序访问共享文件夹

> ID：10285904
> 
> 赞同：4
> 
> 时间：2012-04-23T18:11:18.450
> 
> 标签：asp.net, iis

当我尝试从本地网络中的共享文件夹访问文件时遇到问题。
当我在 Visual Studio 中运行应用程序时，它运行良好，我可以下载文件，但是当我将应用程序部署到 IIS 时，它根本不起作用。
我不明白为什么，因为我向所有用户授予完全权限，包括 NETWORK SERVICE 和 IIS_USR。
我目前正在使用我的计算机进行测试。它具有 Windows 7 并运行 IIS 7.5。我尝试访问的共享文件夹位于未安装 IIS 的 Windows Vista 安装中。

下载文件的代码是这样的：

```
protected void button_Click(object sender, EventArgs e)
{
    Response.Clear();
    Response.ContentType = "application/octet-stream";
    Response.AddHeader("Content-Disposition", "attachment; filename=S10.png");
    Response.WriteFile(@"\\192.168.1.82\Machine\file.png");
    Response.End();
} 
```

它给了我以下错误：

> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.UnauthorizedAccessException：Acesso negado ao caminho '\192.168.1.82\Machine\file.png'。
> 
> ASP.NET 无权访问请求的资源。考虑向 ASP.NET 请求标识授予对资源的访问权限。ASP.NET 有一个基本进程标识（通常是 IIS 5 上的 {MACHINE}\ASPNET 或 IIS 6 和 IIS 7 上的网络服务，以及 IIS 7.5 上配置的应用程序池标识），如果应用程序不是模拟的，则使用该标识。如果应用程序通过 模拟，则身份将是匿名用户（通常是 IUSR_MACHINENAME）或经过身份验证的请求用户。
> 
> 要授予 ASP.NET 对文件的访问权限，请在资源管理器中右键单击该文件，选择“属性”并选择“安全”选项卡。单击“添加”以添加相应的用户或组。突出显示 ASP.NET 帐户，然后选中所需访问权限的框。

请有人可以帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:39:12.853

您已授予文件系统的访问权限（对此完全控制是多余的，读取或修改应该没问题），但您可能会发现共享权限仍然默认为只读。您需要更改共享权限。

[阅读此内容以获取更多信息](http://helpdeskgeek.com/networking/configuring-ntfs-shared-permissions-on-windows-2003/)。

**编辑：**调试时它工作正常的原因是因为它使用的是您登录的帐户，而不是 VS 中的 aspnet 帐户。

创建一个新的应用程序池，在服务帐户下运行，该服务帐户是 IIS 服务器上 IIS_WPG 组的成员，并且对您要写回的共享具有权限（请记住将服务帐户设置为密码永不过期）。授予 IIS_WPG 组对网站目录的读取和执行、列出文件夹内容和读取权限。更改 Web 应用程序以在此新 Web 池中运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T03:43:26.367

解决方案1：

您可以定义域用户。让 IIS 服务器与该用户一起运行（通过池身份或“连接身份”）。授予此用户对共享文件夹的访问权限。

解决方案2：

将 IIS 服务器帐户添加到包含共享文件夹的服务器的用户组中，授予此用户对共享文件夹的访问权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-17T11:10:11.330

如果文件和机器文件夹在 C 盘中，那么您还需要授予包含此文件路径的根文件夹的权限，因为 C 盘通常是读/写保护的，因为它有系统文件。

例如，如果文件位于路径 C:\Machine\file.png 中。然后，您需要将相关权限添加到 IIS 用户组并将其授予机器文件夹，而不仅仅是文件，即 file.png。

# python - 在 Python 中为形状赋值

> ID：10285911
> 
> 赞同：1
> 
> 时间：2012-04-23T18:11:32.873
> 
> 标签：python, scipy, python-imaging-library

有没有办法，在图片中：

1.  检测形状（例如圆形）。
2.  将形状与其在图片上的位置（例如左、右、中心）相关联并分配一个值（真或假）。

我认为有一个使用 PIL 和 SciPy 的解决方案，但不知道从哪里开始。有小费吗？

感谢和抱歉英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:13:47.740

您可能想为此使用[OpenCV](http://opencv.willowgarage.com/wiki/)。

它的 Python 绑定[已经存在](http://code.google.com/p/pyopencv/)（虽然它们不是非常 Pythonic），因此进入它应该不会太难。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T18:23:38.220

我会推荐[SimpleCV](http://simplecv.org/doc/)。我最近发现了它。如何在 python 中处理 opencv 是非常简单的方法。他们也有[例子](http://examples.simplecv.org/en/latest/index.html)。还附有检测库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T23:11:08.930

我们试图在 SimpleCV 中让它变得非常简单。

```
import SimpleCV

img = SimpleCV.Image('foo.png')
blobs = img.findBlobs()
circles = blobs.filter([b.isCircle() for b in blobs]) 
```

现在 circles 只是一个列表，该列表中的每个对象都是一个特征，并且具有所有相关信息，例如 x、y、面积、颜色等。

# content-management-system - 构建公共在线教程的Wiki软件

> ID：10285919
> 
> 赞同：0
> 
> 时间：2012-04-23T18:12:24.653
> 
> 标签：content-management-system, wiki

我正在构建一个布局非常简单的在线教程：左侧是树形导航，右侧是内容。

最终，我希望允许每篇文章发表评论（如博客评论），并允许特权用户修改教程内容。也许如果该网站变得流行，我会添加其他语言的翻译。与其重新发明轮子，我认为使用 wiki 软件会更理想。我想要一些非常简单的东西，我可以完全控制 CSS 和标记。

有没有最适合这个的wiki引擎？我担心像 MediaWiki 这样的东西对于我的需求来说过于笼统或矫枉过正。对于这类事情，CMS 和博客软件似乎也有很大的重叠，我无法真正确定最适合什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T18:26:25.813

我会使用这样的 WordPress 插件：[http](http://wordpress.org/extend/plugins/wordpress-wiki-plugin/) : //wordpress.org/extend/plugins/wordpress-wiki-plugin/ 它比 mediawiki 简单。

# dependency-injection - 哪些编程语言需要依赖注入框架？

> ID：10285921
> 
> 赞同：1
> 
> 时间：2012-04-23T18:12:30.677
> 
> 标签：dependency-injection

根据设计，哪些编程语言需要依赖注入框架？我知道 Java 有，但 Common Lisp 或 Smalltalk 有吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:14:16.127

IMHO any language where two different components talks to each other ***CAN USE*** dependency injection.

# sql - SQl/DB2 - 仅显示存在 3 次或更多次的行

> ID：10285922
> 
> 赞同：1
> 
> 时间：2012-04-23T18:12:31.860
> 
> 标签：sql, db2

使用此语句，我得到以下结果：

```
SELECT Employee.Lastname, Employee.Firstnme, EMP_ACT.Projno
FROM Employee Join EMP_ACT 
On Employee.Empno = EMP_Act.Empno 
```

结果：

```
HAAS            CHRISTINE    AD3100
PULASKI         EVA          AD3110
JEFFERSON       JAMES        AD3111
JEFFERSON       JAMES        AD3111
JEFFERSON       JAMES        AD3111
JEFFERSON       JAMES        AD3111
JEFFERSON       JAMES        AD3111 
```

现在我只想显示存在 3 次或更多次的行。最后一列应显示 Projno 的数量。

例如：杰斐逊詹姆斯 5

我试过这样：

```
GROUP BY Projno HAVING COUNT(*) >= 3 
```

但我总是出错：/

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T18:15:05.920

您希望按 select 语句中使用的所有非聚合列进行分组。

```
SELECT Employee.Lastname, Employee.Firstnme, EMP_ACT.Projno, COUNT(*)
    FROM Employee 
        Join EMP_ACT 
            On Employee.Empno = EMP_Act.Empno
    GROUP BY Employee.Lastname, Employee.Firstnme, EMP_ACT.Projno
    HAVING COUNT(*) >= 3 
```

# c - 图片 16f84a 计时器/计数代码未按预期运行

> ID：10285924
> 
> 赞同：2
> 
> 时间：2012-04-23T18:12:42.360
> 
> 标签：c, microcontroller, pic

我基本上是在学习 pic16f84a 微控制器上的 pic 外部中断。基本上我想计算每次按下连接到引脚 B0（RB0/T0CKI）的按钮并显示七段显示器的结果。我正在使用 hitech c 编译器。

```
#include<htc.h>
__CONFIG(WDTE_OFF& PWRTE_OFF & CP_OFF);
char get7SegmentCode(char value)
{
    switch(value)
    {
        case 0b00000000:
            return (char)0b00111111 ; //0 code
        case 0b00000001:
            return (char)0b00110000 ; //1 code
        case 0b00000010:
            return (char)0b01011011  ; //2 code
        case 0b00000011:
            return (char)0b010011111 ; //3 code
        default:
            return (char)0b00000000 ; //all  code
    }
}
void main()
{
    //declare portb for output and porta upper 4 pins for output and lower 4 for input
    TRISA=0b00001111;
    TRISB=0b00000000;
    CLRWDT();//clear watchdog timer
    TMR0=0;
    OPTION_REG = 0b00111000;//RBPU:PORTB pull-ups are disabled,
    //INTEDG:Interrupt on falling edge of RB0/INT pin
    //T0CS:Transition on RA4/T0CKI pin
    //T0SE:Increment on high-to-low transition on RA4/T0CKI pin
    //PSA:Prescaler assigned to the WDT
    while(1)
    {
        char timerval= TMR0;//read tmr0 into variable
        char restrictedtimerval= timerval & 0x0f;//force upper 4bits to zero to restrict value to 0 - f
        PORTB= get7SegmentCode(restrictedtimerval);
    }
} 
```

不幸的是，当我在 proteus vsm 中模拟此代码时，无论我按下开关多少次，七段显示器都只会显示“0”。为什么会这样？PS：这是我的电路。 ![电路](../Images/0d69832d696b82c7299a0122ea6c961b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T19:37:51.387

Pin`RA4/T0CKI`是端口 A 的第五位，名为 RA4。所以你的启动代码必须是

```
TRISA=0b00011111; 
```

反而

```
TRISA=0b00001111; 
```

# applescript - 将文件路径信息剥离到 • 和 / 文本项分隔符

> ID：10285926
> 
> 赞同：0
> 
> 时间：2012-04-23T18:12:50.107
> 
> 标签：applescript

下面的脚本基本上是您选择一个包含 PDF 的文件夹，获取所选文件夹上的 PDF 文件数，将结果写入文本文件，在 Excel 中打开文本文件。脚本工作正常，但我得到了整个文件路径。

结果是：

```
/Volumes/PREPRESS/1_CATALOG/2_Press/PRINT_Catalog/2012/•CUSTO_4/BODY/:   65

/Volumes/PREPRESS/1_CATALOG/2_Press/PRINT_Catalog/2012/•CUSTO_4/BODY/:       RESENDS   0

/Volumes/PREPRESS/1_CATALOG/2_Press/PRINT_Catalog/2012/•CUSTO_4/COVERS/: 23

/Volumes/PREPRESS/1_CATALOG/2_Press/PRINT_Catalog/2012/•CUSTO_4/COVERS/:     RESENDS   6 
```

我想删除项目符号之前的所有内容 • 然后删除每个/a 列。像这样的东西：

```
CUSTO_4    BODY    65

CUSTO_4    BODY          RESENDS   0

CUSTO_4    COVERS  23

CUSTO_4    COVERS        RESENDS   6 
```

我试图掌握文本项分隔符的概念并使用偏移命令，但我不知道如何在脚本中实现它。

将 target_folder 设置为选择带有提示“选择仅包含 PDF 的目标文件夹以计算文件”的文件夹，允许进行多项选择，而不会将不可见的设置结果设置为“”

```
 repeat with i from 1 to (count target_folder)
        set thisFolder to (POSIX path of item i of target_folder)

    --Find & count all PDFs in folders selected that DON'T starts with letter R
    set fileCount to do shell script "find " & quoted form of thisFolder & " -type f  -name *.pdf -and -not -iname 'R[0-9-_]*.pdf' | wc -l"

    set results to (results & "" & thisFolder & ":" & fileCount & return)

    --Find & count all PDFs in folders selected that starts with letter R
    set fileCount to do shell script "find " & quoted form of thisFolder & " -type f -iname 'R[0-9-_]*.pdf' | wc -l"

    set results to (results & "" & thisFolder & ":" & tab & tab & "RESENDS" & fileCount & return)

    end repeat

--write results to a txt file

set theFilePath to (path to desktop folder as string) & "PDF File Count.txt"

set theFile to open for access file theFilePath with write permission

try

set eof of theFile to 0

write results to file theFilePath

close access theFile

on error

close access theFile

end try

--Will open the the PDF File Count.txt in Excel
tell application "Microsoft Excel"

activate

open text file filename "PDF File Count.txt"

end tell 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T22:13:47.327

AppleScript 的**文本项目分隔符**用于确定文本是如何拆分和/或重新组合的。当您获取字符串的文本项时，该字符串在每个分隔符处被分开，结果是一个片段列表。换一种方式，如果您将文本项列表强制转换为字符串，则这些片段将使用每个片段之间使用的分隔符重新组合。

对于您的示例，您可以使用以下内容（我添加了一些格式来获得您的结果）：

```
set theList to {¬
    "/Volumes/PREPRESS/1_CATALOG/2_Press/PRINT_Catalog/2012/•CUSTO_4/BODY/:   65", ¬
    "/Volumes/PREPRESS/1_CATALOG/2_Press/PRINT_Catalog/2012/•CUSTO_4/BODY/:       RESENDS   0", ¬
    "/Volumes/PREPRESS/1_CATALOG/2_Press/PRINT_Catalog/2012/•CUSTO_4/COVERS/: 23", ¬
    "/Volumes/PREPRESS/1_CATALOG/2_Press/PRINT_Catalog/2012/•CUSTO_4/COVERS/:     RESENDS   6"}

set finalResult to {} -- this will be the final result

set tempTID to AppleScript's text item delimiters -- stash the original delimiters
repeat with anItem in theList
    set AppleScript's text item delimiters to "•"
    set pieces to text items of anItem -- break apart at bullets
    log result

    set theFile to (rest of pieces) as text -- drop the first piece and reassemble
    set AppleScript's text item delimiters to "/"
    set pieces to text items of theFile -- now break apart at slashes
    log result

    set lastPiece to last item of pieces -- trim the last piece a bit
    set theCount to 0
    repeat while first character of lastPiece is in {space, ":"}
        set lastPiece to text 2 thru -1 of lastPiece -- trim it
        set theCount to theCount + 1 -- count up trimmed characters
    end repeat
    if theCount > 4 then set lastPiece to tab & tab & lastPiece -- add a little formatting...
    set last item of pieces to lastPiece -- put the trimmed piece back

    set text item delimiters to tab & tab
    set pieces to pieces as text -- put the pieces back together with tabs
    log result

    set end of finalResult to pieces -- store the reassembled text for later
end repeat
set AppleScript's text item delimiters to tempTID -- restore the original delimiters

choose from list finalResult with empty selection allowed -- show the results 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T19:11:04.567

您不必总是使用文本项分隔符来操作文本：

```
set xxx to "/Volumes/PREPRESS/1_CATALOG/2_Press/PRINT_Catalog/2012/•CUSTO_4/BODY/:   65

/Volumes/PREPRESS/1_CATALOG/2_Press/PRINT_Catalog/2012/•CUSTO_4/BODY/:       RESENDS   0

/Volumes/PREPRESS/1_CATALOG/2_Press/PRINT_Catalog/2012/•CUSTO_4/COVERS/: 23

/Volumes/PREPRESS/1_CATALOG/2_Press/PRINT_Catalog/2012/•CUSTO_4/COVERS/:     RESENDS   6"

set yyy to do shell script "echo " & quoted form of xxx & " | grep -o •.* | sed -e 's/•\\(.*\\):\\(.*\\)/\\1\\2/' -e 's/\\//        /'g" 
```

和另一种方法：

```
set xxx to "/Volumes/PREPRESS/1_CATALOG/2_Press/PRINT_Catalog/2012/•CUSTO_4/BODY/:   65

/Volumes/PREPRESS/1_CATALOG/2_Press/PRINT_Catalog/2012/•CUSTO_4/BODY/:       RESENDS   0

/Volumes/PREPRESS/1_CATALOG/2_Press/PRINT_Catalog/2012/•CUSTO_4/COVERS/: 23

/Volumes/PREPRESS/1_CATALOG/2_Press/PRINT_Catalog/2012/•CUSTO_4/COVERS/:     RESENDS   6"

-- break apart and capture original delimiters
set {Astid, AppleScript's text item delimiters} to {AppleScript's text item delimiters, "/Volumes/PREPRESS/1_CATALOG/2_Press/PRINT_Catalog/2012/•"}
set yyy to text items 2 thru -1 of xxx
--put together
set AppleScript's text item delimiters to {""}
set yyy to yyy as string

-- break apart
set AppleScript's text item delimiters to ":"
set yyy to text items of yyy
--put together
set AppleScript's text item delimiters to {""}
set yyy to yyy as string

-- break apart
set AppleScript's text item delimiters to "/"
set yyy to text items of yyy
--put together
set AppleScript's text item delimiters to tab
set yyy to yyy as string

-- reset original delimiters
set AppleScript's text item delimiters to Astid
return yyy 
```

# ms-word - HTML Tidy，清理 MS Word 标记

> ID：10285928
> 
> 赞同：2
> 
> 时间：2012-04-23T18:13:00.933
> 
> 标签：ms-word, markup, htmltidy

拥有 10 年的归档文章数据，其中大部分都充满了 MS Word save-as-html 标记，例如`<p class="MsoNormal">`

首先，html 是否可以完成剥离 MS Word 生成的标记的任务，还是我需要采取另一种方法？

其次，前几年的文章按月汇总在一起，并以文本存储类型存储在数据库中。我非常希望将这些分成单独的文章，这样我可以使网站更容易搜索（即当搜索词/短语匹配时不会显示整个月的新闻）。我必须使用的唯一明确的模式来隔离文章是文章标题（粗体，在 16-20 像素之间）和文章日期，通常是 10 像素；标题和日期都出现在文章正文之前。当我没有精确的标记来匹配时，有没有办法检测标记的`<h1>`-ness 或-ness？`<small>`

这可能几乎无法回答，但总的来说，您会采取什么方法来完成这项令人羡慕的任务？;-) 我在 Scala 的 JVM 上，但也可以在 LAMP 堆栈上进行清理工作。

想法赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:31:07.687

如果我是你，我会使用我最喜欢的用于 Perl 的[HTML::Parser工具包。](http://metacpan.org/pod/HTML%3a%3aParser)如果对于像你这样的复杂和模糊陈述的问题非常好。

# c++ - 扩展默认窗口标题栏

> ID：10285929
> 
> 赞同：0
> 
> 时间：2012-04-23T18:13:03.757
> 
> 标签：c++, .net, windows, winapi, titlebar

目前，我正在寻找一种通过附加按钮扩展系统中所有窗口的标题栏的方法，该按钮将运行任意操作。一个几乎可以满足我要求的应用程序是[http://www.xtrabuttons.com/](http://www.xtrabuttons.com/)。他们似乎在所有窗口中都挂上了他们的按钮，这正是我想要对我的自定义操作进行的操作。主要目标系统是 Windows 7 计算机。

是否有 C# 或其他 API 来实现这一点？

# javascript - game logic in js

> ID：10285931
> 
> 赞同：-1
> 
> 时间：2012-04-23T18:13:07.833
> 
> 标签：javascript, algorithm

i explain my probleme : i have a worm game like this ![enter image description here](../Images/016402925c4682417263b2bd9a59ae4c.png)

i have to go to the next level if i hit SUCCESSIVELY 10 worm
i have 3 points live, if i dont hit a worm live = live -1, 0 live : game over

in the 2nd level there 2 warms shown simultaneous, level 3 there are 3 shown ..

i cant find a solution to count the 10 successive hits.

can you tell me how to proceed? thank you.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T18:17:24.603

如果我弄错了，请原谅我，但你为什么不能用一个变量来跟踪它？

```
var lives = 3;
var streakcount = 0;
while(streakcount < 10 && lives > 0)
{
    do_level_logic();
    if(hit)
        streakcount++;
    else if(miss)
    {
        streakcount = 0;
        lives--;
    }
} 
```

你能详细说明一下你需要什么吗？

或者，也许您需要一个功能，让您有一定的时间限制来获得另一次命中，以继续连胜。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T18:18:41.803

```
define streak=0
on success_hit_event streak++
if streak==10 level_up
on miss_hit_event { streak=0; live-- } 
```

# mysql - MongoDB、Mysql 和关系

> ID：10285933
> 
> 赞同：1
> 
> 时间：2012-04-23T18:13:09.097
> 
> 标签：mysql, node.js, mongodb, relational-database

我正在创建一个在线聊天。

**上下文（如果需要）：**

到目前为止，我一直在使用 PHP/MySQL 和 AJAX 来完成这项工作，但这不是一个健康的解决方案，因为我坚持使用“拉式”类型的应用程序，担心可伸缩性。我阅读了有关“推送”方法替代方案的信息，看来我的选择是有限的并且排除了 PHP。如果 Websockets 集成在每个浏览器中，它可能是一个非常有趣的选项，但事实并非如此（似乎对于大多数实现它的人来说，它默认是禁用的）。长轮询也将是一个候选者，但它涉及其他问题，例如并发打开连接的数量也可能会杀死您的 Web 应用程序。

这就是为什么违背我的意愿，我认为我唯一可行的选择是使用服务器端 javascript（node.js + now.js 将是我的选择）。

这就是说，我可能也需要重新考虑数据库的使用。我需要保留每个用户的存储数据并将这些用户链接到他们提交的消息。如果是推送系统驱动的聊天引擎，那么 MySQL 是否仍然是一个有价值的选择？我阅读了有关 NoSQL 数据管理的内容，似乎 MongoDB 将成为 node.js 的一个很好的补充。

**我的两个问题：**

1.  如果是实时网络应用程序，我是否有理由更好地迁移到 NoSQL 系统（我需要从头开始学习）而不是 MySQL（我已经知道）？

2.  假设在 MySQL 中：

    *   我有一个名为 user (user_id_p, username) 的表
    *   我有一个名为messages（message_id，message，user_id_f）的表
    *   我想进行一次查询以获取与用户名“omgtheykilledkenny”相关的所有消息。

    很简单，但是我怎样才能用 MongoDB 及其集合理念来实现呢？

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T18:24:35.543

1.  使用 node.js/MongoDB 很酷，因为 Mongo 的文档结构已经是 JSONish，因此您不必将查询转换为 JSON。如果您已经了解 JavaScript，那么您将在学习 MongoDB 方面处于领先地位。Mongo 确实可以轻松地扩展写入和读取，速度非常棒，尽管我在单个系统上看到了一些与 Mongo 相当的 MySQL 基准测试——当你开始需要多个盒子时，它真的很出色。

2.  假设您有一个单独的消息集合，并且您已经知道您可以执行的用户 ID：`db.messages.find({user_id:ObjectId(...)});`

更新：如果您不知道用户 ID，那么您需要进行两次查询，是的（除非您按照另一个答案中的建议使用嵌入式数组——不过，对于这种用例，我建议您不要这样做，因为您最终会查询整个文档/消息列表，甚至只显示一个子集）。根据您的用例，显然，如果您有用户名，您也可以方便地使用用户 ID，以应对此类情况。如果是客户端输入给出的用户名不起作用。

更新 2：如果您有唯一的用户名，您可以将用户名设置为 users 集合的 _id 以避免此问题。大多数人可能会建议不要这样做，它有一些明显的缺点，例如更难更改用户名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T19:04:02.200

您无法在 MongoDB 中执行连接，因此您无法实现第二个要求。这样做的 Mongo 方法是将消息嵌套在用户集合中：

{用户名：'abc'，消息：[...]}

或者使用 refId，它是连接和嵌套文档之间的一种中途之家：

[http://uk3.php.net/manual/en/class.mongodbref.php](http://uk3.php.net/manual/en/class.mongodbref.php)

在从 MySQL 切换到 Mongo 方面，您不一定需要完全放弃 MySQL。在某些用例中，一个比另一个更合适。如果合适的话，您可以将两者用于系统的不同部分。就个人而言，我过去在很多事情上都使用过 MySQL，目前我正在将 MongoDB 用于一个大项目。我发现移动非常容易，因为它非常容易使用 MongoDB 驱动程序，而且 MongoDB 站点总体上非常适合文档。

您可以使用前端的 json_encode 和 json_decode 与 JSON 进行转换，并使用 MongoDB 的 PHP 驱动程序查询和插入/更新数组，因此它可以说比 MySQL 更直观和更易于使用。这只是习惯的问题。

# facebook - new RSS feeds user select to update facebook app (Jobopenings) application cause an error

> ID：10285934
> 
> 赞同：1
> 
> 时间：2012-04-23T18:13:15.790
> 
> 标签：facebook, rss

In our Facebook application “Job Openings” Facebook user who have installed the application or want to install the app have a capability update the jobs they have interest. Couple of days ago I have noticed the RSS feeds causes a Facebook error. Error is cause parsing the urls in the query string link example of RSS that get directed to facebook app is as follows. [http://apps.facebook.com/taleojobopenings/settings.php?action=addnewrss&rssurl=https%3A//luxotticaau.taleo.net/careersection/feed/joblist.rss%3Flang%3Den%26portal%3D101430233%26searchtype%3D2%26jobfield%3D2560752046&siteurl=http%3A//luxotticaau.taleo.net/careersection/group_ext/moresearch.ftl%3Flang%3Den%26jobfield%3D2560752046&name=Custom+Job+List+%2528Human+Resources+%2526+Communications%2529](http://apps.facebook.com/taleojobopenings/settings.php?action=addnewrss&rssurl=https%3A//luxotticaau.taleo.net/careersection/feed/joblist.rss%3Flang%3Den%26portal%3D101430233%26searchtype%3D2%26jobfield%3D2560752046&siteurl=http%3A//luxotticaau.taleo.net/careersection/group_ext/moresearch.ftl%3Flang%3Den%26jobfield%3D2560752046&name=Custom+Job+List+%2528Human+Resources+%2526+Communications%2529)

After some troubleshooting, I noticed that when urls have **“//**” in the query string cause an error. E.g. parameter in rssurl=https%3A//……………………</p>

I am desperate to as to how to resolve this issue. Any help would be greatly appreciated.

# android - ExpandableListView - Keep the title of the group visible until the group dissapear

> ID：10285940
> 
> 赞同：2
> 
> 时间：2012-04-23T18:13:32.210
> 
> 标签：android, expandablelistview

I've been searching a while, but i can't find any clue, so maybe someone can help me here.

I'm using ExpandableListView in android to show my info ordered in groups, and everything works great.., the problem is that is common that the group has more than 20 elements, so when I scroll down the list, the title of the group goes up further the screen, and of course, it dissapears. My client says that in iPhone, it is possible to keep the title of the group on the top of list until the last element of the group dissapear when the user scroll up the list, so he wants the same functionality in android. I'm trying to find something like that, but I can't find anything.

Does anybody knows it this behavior is possible to do in android.

Thanks a lot.

(And sorry about my English.. i need to improve it a lot ):(

# objective-c - Reeder Mac 应用程序在切换文件夹时如何为列表设置动画？

> ID：10285945
> 
> 赞同：2
> 
> 时间：2012-04-23T18:13:58.060
> 
> 标签：objective-c, cocoa, xcode4, core-animation, appkit

最初我的印象是它在插入/删除新行时使用表格行向上/向下滑动动画，但我怀疑它是否这样做，因为即使列表中有数千个项目，它也会如此流畅地执行此操作（否则将需要很多删除/插入工作的时间）。

我的假设是否正确，它只是在屏幕底部附加了一个新的新闻列表实例，缩小了上面的实例，而底部的实例扩展以填充空间？

更新：

请看我的意思这个视频：http: [//dl.dropbox.com/u/4960327/ReederAnim.mov](http://dl.dropbox.com/u/4960327/ReederAnim.mov)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-07T14:50:35.487

我无法确切告诉你 Silvio Rizzi 是如何做到这一点的，但正如你在回放中看到的那样，在显示的列表视图后面添加了一个列表视图，并且前面的列表视图淡出 (.alpha = 0.0;) 而后面的列表视图它扩展了每行的高度。

当你逐帧干燥它时，他的所作所为就很清楚了，它确实没有那么先进。但不得不承认，白色的“乳白色”磨光界面，看起来还是挺利落的。

此外，您可以看到，在制作动画时，背景列表视图仅呈现前 7 个条目（希望通过将视图高度除以显示的单元格的平均高度来计算），从而使列表视图可以快速加载。然后，一旦你开始滚动，他就可以加载一个扩展的单元格数组，或者在动画完成后在后台线程中加载。

# c# - IoC (Ninject) 和工厂

> ID：10285946
> 
> 赞同：24
> 
> 时间：2012-04-23T18:14:03.230
> 
> 标签：c#, .net, inversion-of-control, ninject, ioc-container

如果我有以下代码：

```
public class RobotNavigationService : IRobotNavigationService {
  public RobotNavigationService(IRobotFactory robotFactory) {
    //...
  }
}
public class RobotFactory : IRobotFactory {
  public IRobot Create(string nameOfRobot) {
    if (name == "Maximilian") {
      return new KillerRobot(); 
    } else {
      return new StandardRobot();
    }
  }
} 
```

我的问题是在这里进行控制反转的正确方法是什么？我不想将 KillerRobot 和 StandardRobot 混凝土添加到 Factory 类中，对吗？而且我不想通过 IoC.Get<> 将它们引入对吗？公元前那将是服务位置不是真正的 IoC 对吗？有没有更好的方法来解决**在运行时切换混凝土**的问题？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-23T18:32:25.177

对于您的示例，您拥有完美的工厂实现，我不会更改任何内容。

但是，我怀疑您的 KillerRobot 和 StandardRobot 类实际上有它们自己的依赖项。我同意您不想将 IoC 容器暴露给 RobotFactory。

一种选择是使用 ninject 工厂扩展：

[https://github.com/ninject/ninject.extensions.factory/wiki](https://github.com/ninject/ninject.extensions.factory/wiki)

它为您提供了两种注入工厂的方法 - 通过接口和注入返回 IRobot（或其他）的 Func。

基于接口的工厂创建示例：[https ://github.com/ninject/ninject.extensions.factory/wiki/Factory-interface](https://github.com/ninject/ninject.extensions.factory/wiki/Factory-interface)

基于 func 的示例：[https ://github.com/ninject/ninject.extensions.factory/wiki/Func](https://github.com/ninject/ninject.extensions.factory/wiki/Func)

如果您愿意，您也可以通过在 IoC 初始化代码中绑定一个 func 来实现。就像是：

```
var factoryMethod = new Func<string, IRobot>(nameOfRobot =>
                        {
                            if (nameOfRobot == "Maximilian")
                            {
                                return _ninjectKernel.Get<KillerRobot>();
                            }
                            else
                            {
                                return _ninjectKernel.Get<StandardRobot>();
                            }

                        });
_ninjectKernel.Bind<Func<string, IRobot>>().ToConstant(factoryMethod); 
```

您的导航服务可能如下所示：

```
 public class RobotNavigationService
    {
        public RobotNavigationService(Func<string, IRobot> robotFactory)
        {
            var killer = robotFactory("Maximilian");
            var standard = robotFactory("");
        }
    } 
```

当然，这种方法的问题在于您正在 IoC 初始化中编写工厂方法 - 也许不是最好的权衡......

工厂扩展试图通过为您提供几种基于约定的方法来解决这个问题 - 从而允许您通过添加上下文相关的依赖项来保留正常的 DI 链接。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-11-25T19:25:39.267

你应该这样做的方式：

```
kernel.Bind<IRobot>().To<KillingRobot>("maximilliam");
kernel.Bind<IRobot>().To<StandardRobot>("standard");
kernel.Bind<IRobotFactory>().ToFactory();

public interface IRobotFactory
{
    IRobot Create(string name);
} 
```

但是这种方式我认为你丢失了空名称，所以在调用时`IRobotFactory.Create`你必须确保通过参数发送正确的名称。

在接口绑定中使用`ToFactory()`时，它所做的只是使用 Castle（或动态代理）创建一个代理，该代理接收 IResolutionRoot 并调用 Get()。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-23T18:33:24.490

> ***我不想将 KillerRobot 和 StandardRobot 混凝土添加到 Factory 类中，对吗？***

我建议你可能会这样做。如果不实例化具体对象，工厂的目的是什么？我想我可以看到你来自哪里 - 如果`IRobot`描述了一份合同，注射容器不应该负责创建它吗？这不就是容器的用途吗？

也许。然而，返回负责`new`ing 对象的具体工厂似乎是 IoC 世界中非常标准的模式。我不认为有一个混凝土工厂做一些实际的工作是违反原则的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-16T21:16:50.163

我正在寻找一种方法来清理返回 C# 类以执行某些工作的大量 switch 语句（此处的代码异味）。

我不想将每个接口显式映射到 ninject 模块中的具体实现（本质上是冗长的 switch case 的模仿，但在 diff 文件中），所以我设置模块以自动绑定所有接口：

```
public class FactoryModule: NinjectModule
{
    public override void Load()
    {
        Kernel.Bind(x => x.FromThisAssembly()
                            .IncludingNonPublicTypes()
                            .SelectAllClasses()
                            .InNamespaceOf<FactoryModule>()
                            .BindAllInterfaces()
                            .Configure(b => b.InSingletonScope()));
    }
} 
```

然后创建工厂类，实现 StandardKernal，它将通过使用 IKernal 的单例实例获取指定的接口及其实现：

```
 public class CarFactoryKernel : StandardKernel, ICarFactoryKernel{
    public static readonly ICarFactoryKernel _instance = new CarFactoryKernel();

    public static ICarFactoryKernel Instance { get => _instance; }

    private CarFactoryKernel()
    {
        var carFactoryModeule = new List<INinjectModule> { new FactoryModule() };

        Load(carFactoryModeule);
    }

    public ICar GetCarFromFactory(string name)
    {
        var cars = this.GetAll<ICar>();
        foreach (var car in cars)
        {
            if (car.CarModel == name)
            {
                return car;
            }
        }

        return null;
    }
}

public interface ICarFactoryKernel : IKernel
{
    ICar GetCarFromFactory(string name);
} 
```

然后，您的 StandardKernel 实现可以通过您在装饰类的接口上选择的标识符访问任何接口。

例如：

```
 public interface ICar
{
    string CarModel { get; }
    string Drive { get; }
    string Reverse { get; }
}

public class Lamborghini : ICar
{
    private string _carmodel;
    public string CarModel { get => _carmodel; }
    public string Drive => "Drive the Lamborghini forward!";
    public string Reverse => "Drive the Lamborghini backward!";

    public Lamborghini()
    {
        _carmodel = "Lamborghini";
    }
} 
```

用法：

```
 [Test]
    public void TestDependencyInjection()
    {
        var ferrari = CarFactoryKernel.Instance.GetCarFromFactory("Ferrari");
        Assert.That(ferrari, Is.Not.Null);
        Assert.That(ferrari, Is.Not.Null.And.InstanceOf(typeof(Ferrari)));

        Assert.AreEqual("Drive the Ferrari forward!", ferrari.Drive);
        Assert.AreEqual("Drive the Ferrari backward!", ferrari.Reverse);

        var lambo = CarFactoryKernel.Instance.GetCarFromFactory("Lamborghini");
        Assert.That(lambo, Is.Not.Null);
        Assert.That(lambo, Is.Not.Null.And.InstanceOf(typeof(Lamborghini)));

        Assert.AreEqual("Drive the Lamborghini forward!", lambo.Drive);
        Assert.AreEqual("Drive the Lamborghini backward!", lambo.Reverse);
    } 
```

# jquery - Modify Devise alerts ( Rails 3)

> ID：10285948
> 
> 赞同：0
> 
> 时间：2012-04-23T18:14:03.927
> 
> 标签：jquery, css, ruby-on-rails-3, devise

I am using devise in my rails app which comes with its own alert/flash helpers. I have modified it so that it looks like this

```
<% flash.each do |key, value| %>
<%= content_tag(:div, value, :class => "flash #{key}") %>
<% end %> 
```

What i want to do is to be able to close this alert with a X in the top corner, rather than refresh the page to make it disappear. I have created an alert box with css/jquery and surrounded the relevant divs around the above code, however as its in the layouts/application file it is always visible when the page loads

Here is the CSS and Jquery if it helps

```
$(function() {
$('.close').click(function(){
    $('.myDiv').fadeOut("fast");
});

.close {
background:red;
font-weight:bold;
padding:5px;
cursor:pointer;
display:inline-block;
 }

.myDiv {
padding:10px;
background:#ccc;
width: 200px;
margin:0 auto;
height:50px;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:22:57.080

您可以将自定义 div 包装为仅在 flash 不为空时呈现：

```
<% if flash.present? -%>
  <div id='flash'>
  ...
  </div>
<% end -%> 
```

# api - Get user checkins from specific categories

> ID：10285954
> 
> 赞同：0
> 
> 时间：2012-04-23T18:14:26.907
> 
> 标签：api, foursquare

How can I get with foursquare API only user checkins from specific categories:

[http://aboutfoursquare.com/foursquare-categories/parks-outdoors/](http://aboutfoursquare.com/foursquare-categories/parks-outdoors/)

I only want users checkins on the beaches.

thx

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T19:20:05.713

首先，您只能访问对您的应用程序进行 OAuth 的人员的签入历史记录。您不能只查询foursquare 以获取最近的签到。

用户授权您的应用程序后，您可以查询**users/USER_ID/checkins**端点以获取他们的签入历史记录。然后，您可以翻阅此历史记录，查找您想要的类别的签到。

例如，您可以在此处查看签入对象的所有字段：

[https://developer.foursquare.com/docs/responses/checkin](https://developer.foursquare.com/docs/responses/checkin)

其中一个字段是“场地”对象，如下所示：

![场地紧凑](../Images/bc63dc625c407d5b1686b68badc08169.png)

如您所见，它有一个“类别”列表。因此，只需检查此列表以获取您想要的类别。希望有帮助

# java - faces-config 导致启动 Web 应用程序出现异常

> ID：10285958
> 
> 赞同：0
> 
> 时间：2012-04-23T18:14:49.757
> 
> 标签：java, jsf-2, tomcat6, faces-config

我目前正在开发一个 Web 应用程序。我在 tomcat 6 上使用 JSF 2。一切都很好，但现在我想浏览我的页面......（[我决定做一个无 XML 的 JSF 导航方法](http://cagataycivici.wordpress.com/2008/11/13/xml-less-jsf-navigations/)）。为此，我需要添加一个 faces-config.xml。我做到了，但是在添加 faces-config 之后，当我想打开我的页面时总是会出错。

```
 SCHWERWIEGEND: Servlet.service() for servlet Faces Servlet threw exception
    java.lang.StackOverflowError
        at javax.servlet.http.HttpServletRequestWrapper.getSession(HttpServletRequestWrapper.java:216)
... 
```

如果我删除 faces-config 一切都很好（但是我没有导航:(）。

这是我的 Maven 依赖项： com.sun.faces jsf-api 2.1.2 com.sun.faces jsf-impl 2.1.2 javax.servlet jstl 1.2 javax.servlet.jsp jsp-api 2.2 org.glassfish.web el-impl 2.2

这是我的 faces-config.xml

```
<?xml version="1.0" encoding="utf-8"?>
<faces-config version="1.2" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_1_2.xsd">

    <application>
        <navigation-handler>de.xxx.jsf.client.navigation.XXXNavigationHandler</navigation-handler>
    </application>
</faces-config> 
```

这是我的 web.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
    http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="WebApp_ID" version="2.5">

    <display-name>JavaServerFaces</display-name>

    <!-- Change to "Production" when you are ready to deploy -->
    <context-param>
        <param-name>javax.faces.PROJECT_STAGE</param-name>
        <param-value>Development</param-value>
    </context-param>
    <context-param>
        <param-name>com.sun.faces.injectionProvider</param-name>
        <param-value>de.xxx.jsf.client.guice.GuiceInjectionProvider</param-value>
    </context-param>

    <!-- Welcome page -->
    <welcome-file-list>
        <welcome-file>faces/hello.xhtml</welcome-file>
    </welcome-file-list>

    <!-- JSF mapping -->
    <servlet>
        <servlet-name>Faces Servlet</servlet-name>
        <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <!-- Map these files with JSF -->
    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>/faces/*</url-pattern>
    </servlet-mapping>

    <servlet-mapping>
        <servlet-name>Faces Servlet</servlet-name>
        <url-pattern>*.xhtml</url-pattern>
    </servlet-mapping>

</web-app> 
```

你们中有人知道为什么应用程序崩溃了吗？

提前谢谢！

TJ

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T18:17:12.907

您的 faces-config.xml 标头仍指向 1.2 DTD。这可能会导致不可预测的错误。我建议将其更新到 2.0 DTD 并尝试。

```
<?xml version='1.0' encoding='UTF-8'?>

<faces-config version="2.0"
   xmlns="http://java.sun.com/xml/ns/javaee"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xsi:schemaLocation="
      http://java.sun.com/xml/ns/javaee
      http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"> 
```

# xcode - Xcode 方案构建目标中的构建顺序

> ID：10285964
> 
> 赞同：9
> 
> 时间：2012-04-23T18:15:19.610
> 
> 标签：xcode, installation, dependencies, project

为了为我的程序构建安装程序，我添加了一个“安装程序”Xcode 项目/目标，它将所有需要的二进制文件复制到一个临时位置，然后运行必要的逻辑来构建包。

我遇到的问题是我想将此安装程序项目直接映射到其他几个项目，以便每次尝试构建安装程序项目时都构建它们（如果需要）。

我将所有目标添加到安装程序的构建目标列表（在模式中），它们的顺序如下：

```
Project A
Project B
Project C
Installer (self) 
```

但是，当我进行干净构建时，我会看到如下构建顺序（在构建日志中）：

```
Project C
Installer
Project A
Project B 
```

我需要强制执行特定的构建顺序，否则安装程序将无法使用这些文件。Xcode 允许您更改 UI 中这些项目的顺序，但该顺序似乎没有任何作用。有没有办法强制依赖的构建顺序？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-10-21T13:49:32.117

> Xcode 允许您更改 UI 中这些项目的顺序，但该顺序似乎没有任何作用。

就我而言，这是在方案“构建”选项卡中勾选“并行化构建”时发生的。

禁用该复选框后，Xcode 始终遵循我为目标选择的顺序。

想一想是有道理的：当启用“Parallelize Build”时，所有没有依赖约束的target都会被并行构建，这可能会导致它们的乱序完成。

另一方面，如果您希望严格遵循它们的*顺序，那么......这与**并行*构建完全相反，因此您应该禁用该选项。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T19:31:29.397

使目标 A、B 和 C 成为安装程序目标的依赖关系，这将确保 A、B 和 C 在安装程序之前构建。从项目导航器中选择您的项目文件以打开项目编辑器。从目标列表中选择安装程序目标。单击编辑器顶部的 Build Phases 按钮以显示目标的构建阶段。单击 Target Dependencies 构建阶段旁边的显示三角形。单击 + 按钮添加依赖项。

添加目标依赖项时，目标 A、B 和 C 将在安装程序之前构建。如果您需要按特定顺序构建 A、B 和 C，则必须添加更多目标依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-09-13T15:45:00.730

在 Xcode 13 中，现在强烈建议不要使用手动命令，并且会收到警告。

# python - Sort names in a list by order of importance

> ID：10285965
> 
> 赞同：0
> 
> 时间：2012-04-23T18:15:22.193
> 
> 标签：python, sorting

I have multiple list which is arranged by order of importance. I need to do sorting on this list. Important thing is that the last name in the list is important. If there is two similar name as the last name in the list then the last name should be printed first. Also I need to make sure that alphabets case do not change after sorting.

```
>>> mylist = ["Ramesh G","K V R Santhosh","Srikanth T G", "R V Laxaman","Ramesh Ghosh"]

>>> mylist.sort()

>>> for x in sorted(mylist):

...     print x

...

K V R Santhosh
R V Laxaman
Ramesh G
Ramesh Ghosh
Srikanth T G 
```

In the above sorting I am getting "Ramesh G" printed first, and my requirement is to print "Ramesh Ghosh" Before "Ramesh G" as below :

```
K V R Santhosh
R V Laxaman
Ramesh Ghosh
Ramesh G
Srikanth T G 
```

Thank you

* * *

I have manged to write the code to sort the name by last name but still not able to find out how to print the last name before any similar name in the list after sort.

```
#!/bin/python
# sort a list of names by last name

import operator

data = input ("Enter the list: ")

data_as_lists = [ line.split() for line in data ]

data_as_lists.sort(key=operator.itemgetter(-1))

for each_item in data_as_lists :
   print " ".join(each_item) 
```

This code prints the output as below :

```
python sort_name.py
Enter the list: ["Ramesh G","K V R Santhosh","Srikanth T G", "R V Laxaman","Ramesh Ghosh"]
Ramesh G
Srikanth T G
Ramesh Ghosh
R V Laxaman
K V R Santhosh 
```

The desired output which I want should be like this:

```
 python sort_name.py
    Enter the list: ["Ramesh G","K V R Santhosh","Srikanth T G", "R V Laxaman","Ramesh Ghosh"]
    Ramesh Ghosh
    Ramesh G
    Srikanth T G
    R V Laxaman
    K V R Santhosh 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T18:27:35.883

在 python 2.x 中，您可以将`cmp`参数传递给`list.sort`方法，您可以在其中实现任何自定义比较函数，例如

```
def mycmp(a, b):
    if a.startswith(b):
        return -1
    return cmp(a, b)

mylist = ["Ramesh G","K V R Santhosh","Srikanth T G", "R V Laxaman","Ramesh Ghosh"]
mylist.sort(cmp=mycmp)
print "\n".join(mylist) 
```

输出：

```
K V R Santhosh
R V Laxaman
Ramesh Ghosh
Ramesh G
Srikanth T G 
```

在 python 3.x`cmp`中参数已被删除，但您可以使用[`cmp_to_key`](http://docs.python.org/library/functools.html#functools.cmp_to_key)在 func 工具中定义

# git - Revert the use of filter-branch in Git

> ID：10285968
> 
> 赞同：0
> 
> 时间：2012-04-23T18:15:26.447
> 
> 标签：git, git-filter-branch

I used git filter-branch and screwed something up and accidentally rewrote sections of the history I didn't want to. I was trying to change one name and accidentally changed every single commit (instead of only ones with a specific name).

I know that 'git filter-branch' keeps a backup at refs/original, but I don't know how to revert the master branch to this old version. What's the git command to do this?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T18:18:05.607

如果您知道要恢复到的提交 ID，则可以使用

```
$ git checkout master
$ git reset --hard <commit id> 
```

# java - Calculate with Integers

> ID：10285973
> 
> 赞同：0
> 
> 时间：2012-04-23T18:16:00.660
> 
> 标签：java

So I got to a site where it says Integers don't allow Calculate with it, + - * / % ^ etc.

But I tried

```
Integer n=new Integer(8);
    n+=2;
    Integer m=new Integer(10);
    System.out.println(n+m); 
```

and it prints out 20\. So I am a little confused. I know this is a noob question but I really want to get this and I don't know what I am missing. So what does this actually mean "integers don't allow calculate with it"

Thanks.

EDIT: @people request :[Site providing accurate information?](http://mindprod.com/jgloss/intvsinteger.html)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T18:17:43.300

Java 1.5+ 自动*装箱*（和*取消装箱*）原始类型 - 这称为*自动装箱*。

*   [http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)

您遇到的站点可能在 1.5 之前讨论过 Java：

> 在 Java 版本 [1.4，已编辑] 之前的代码中，您必须进行大量手动繁琐的从原始 int 到 Integer Object 的来回转换，对于 byte/Byte、char/Character、short/Short、long/Long 也是如此，浮点数/浮点数和双/双。( [http://mindprod.com/jgloss/autoboxing.html](http://mindprod.com/jgloss/autoboxing.html) )

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T18:23:45.280

那个网站可能有点过时了...

如果您使用的是 1.4 之前的 Java 版本，那么该声明是正确的，因为您只能在原始类型（和字符串......这是另一个问题）上使用 + 运算符。

目前（阅读，Java 1.5 后），当您尝试将 + 应用于它时，JVM 会自动将该 Integer 对象转换为 int 。

请记住，如果您尝试将 + 运算符应用于指向 null 的 Integer 对象，您*将*收到一个 NullPointerException，这是由于对 null 对象应用取消装箱而导致的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-23T18:19:44.217

对这些变量使用 javascript 函数`parseInt`。

[docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html](http://docs.oracle.com/javase/1.5.0/docs/guide/language/autoboxing.html)

# c - Optimal string containing all strings from a given set as substrings

> ID：10285974
> 
> 赞同：4
> 
> 时间：2012-04-23T18:16:00.553
> 
> 标签：c, string, algorithm, optimization

I'm working with some code that needs a large (constant) bit array. Since it contains large constant spans (all 0's or all 1's) I've broken it into a two-level table that allows duplicate spans (constant or otherwise) to be elided, as in:

```
bitn = table2[table1[n/256]+n%256/8]&1<<n%8 
```

At this point, entries of `table1` are all multiples of 32 (256 bits), but I wonder if significant savings could be achieved by allowing the spans in `table2` to overlap. So my question is (stated in the abstract form):

Given N strings { S_n : n=1..N } each of length K, is there an efficient way to find the shortest length string S such that each S_n is a substring of S?

(Note that since I probably want to keep my bit arrays 8-bit aligned, my particular application of the problem will probably be dealing with strings of 8-bit bytes rather than strings of bits, but the problem makes sense on any sense of character - bit, byte, or whatever.)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T18:57:27.070

首先，这个问题可以表述为一个 TSP。我们有一组节点（每个字符串都是一个节点），我们需要找到访问所有节点的路径。字符串 x 和 y 之间的距离定义为 len(xy)+len(y) 其中 xy 是同时具有 x 和 y 且以 x 开头的最优字符串（例如 x=000111, y=011100, xy=0001100 , 距离(x,y) = 8-6=2)。

请注意，这也遵守三角不等式（distance(x,z) <= distance(x,y)+ distance(y,z) ）。距离是从 1 到 k 的整数。此外，距离是不对称的。

此版本的 TSP 称为 (1,B)-ATSP。有关此类问题的分析和近似解决方案，请参见[http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.20.3439](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.20.3439)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T20:36:21.433

关于具有大段常量的大型常量位数组，这里有另一种设计表格的方法供您考虑（我不知道您的确切需求，所以我不能说它是否有帮助）。

考虑类似[基数树](http://en.wikipedia.org/wiki/Radix_tree)的东西。为了便于解释，让我定义 get 函数：

```
#define TYP_CONST
#define TYP_ARRAY

struct node {
    unsigned min;
    unsigned max;
    int typ;
    union {
        char *bits;
        int constant;
    } d;
    struct node *left;
    struct node *right;
}

struct bit_array {
    unsigned length;
    struct node *root;
}

int get(struct bit_array *b, unsigned ix)
{
    struct node *n = b->root;
    if (ix >= b->length)
        return -1;
    while (n) {
        if (ix > n->max) {
            n = n->right;
            continue;
        } else if (ix < n->min) {
            n = n->left;
            continue;
        }
        if (n->typ == TYP_CONST)
            return n->d.constant;
        ix -= n->min;
        return !!(n->d.bits[ix/8] & (1 << ix%8));
    }
    return -1;
} 
```

用人类的话来说，你想在树中搜索你的比特。每个节点负责一定范围的位，并且您通过范围进行二进制搜索以找到您想要的范围。

找到范围后，有两个选项：常量或数组。如果常量，只需返回常量（为您节省大量内存）。如果是数组，则在位数组中进行数组查找。

您将有 O(log n) 查找时间而不是 O(1).... 尽管它仍然应该非常快。

这里的困难在于设置适当的数据结构很烦人并且容易出错。但是你说数组是恒定的，所以这可能不是问题。

# objective-c - UITableView's cells filled up with object properties...Dynamic or Static?

> ID：10285978
> 
> 赞同：0
> 
> 时间：2012-04-23T18:16:11.503
> 
> 标签：objective-c, xcode, uitableview

I'm pretty new to iOS Programming and I'm not too used with UITableView Cells.
I need to show some object properties in a table, in a "one property per cell" way.
If the data was stored in a NSArray, things would be much easier: I would use a "dynamic cell" layout and with the help of **tableView:cellForRowAtIndexPath:**'s indexPath variable, I'd fill the table easily.
But how to do the same when the data is "stored" in 20 properties of an object? Should I use the "static cell" layout maybe, and have a huge switch for addressing each of the 20 rows? Is there an easy and "cleaner" way to do this?

Thanks for your help!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T21:03:09.853

关键值编码拯救！创建一个属性名称数组，并用于`valueForKey:`获取属性值。

```
@implementation MyTableViewController {
    // The table view displays the properties of _theObject.
    NSObject *_theObject;

    // _propertyNames is the array of properties of _theObject that the table view shows.
    // I initialize it lazily.
    NSArray *_propertyNames;
}

- (NSArray *)propertyNames {
    if (!propertyNames) {
        propertyNames = [NSArray arrayWithObjects:
            @"firstName", @"lastName", @"phoneNumber", /* etc. */, nil];
    }
    return propertyNames;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [self propertyNames].count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"Cell"];
    }

    NSArray *propertyNames = [self _propertyNames];
    NSString *key = [propertyNames objectAtIndex:indexPath.row];
    cell.textLabel.text = [[_theObject valueForKey:key] description];
    return cell;
} 
```

# c# - What is causing a nullreference exception in this code?

> ID：10285981
> 
> 赞同：5
> 
> 时间：2012-04-23T18:16:30.937
> 
> 标签：c#, asp.net

I try to add a new "Order" to my Session. I begin create a session in my Global.aspx file under Session_Start:

```
Session.Add("Cart", new WebShopData.Order()); 
```

At my login page i make a new Session:

```
 Session["userID"] = "User";
        ((Order)Session["Cart"]).UserID = userID; 
```

Then at my shop page i want to add stuff to the session:

```
 if ((Order)Session["Cart"] != null)
((Order)Session["Cart"]).OrderRow.Add(new OrderRows({ArticleID = 2, Quantity = 1) }); 
```

At this last line i get att nullreference exception. Why could that be?

* * *

Here are my two classes:

```
 public class Order
   {
    public List<OrderRows> OrderRow { get; set; }
    public string Address { get; set; }
    public string City { get; set; }
    public string Zip { get; set; }
    public int UserID { get; set; }
   }

  public class OrderRows
  {
    public int ArticleID { get; set; }
    public int Quantity { get; set; }

    public override string ToString()
    {
            return string.Format("Artikel: {0}, Antal: {1}.\n", ArticleID, Quantity);
    }
  } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T18:23:13.790

您需要在使用 OrderRow 之前创建一个实例。我建议在构造函数中这样做......

将此添加到您的订单类

```
public class Order {
     ....other stuff...

    public Order() {
      OrderRow = new List<OrderRows>();
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T18:21:42.033

当您创建新订单时，提交的 OrderRow 为空。您必须在 Order 构造函数上初始化 Order 行。

# php - How to find "page" number for a comment in a paginated comment system?

> ID：10285983
> 
> 赞同：3
> 
> 时间：2012-04-23T18:16:53.880
> 
> 标签：php, mysql, pagination

I have a comment system with pagination, 10 per page. I want to make permalinks to the comments. I'd like to be able to have the script figure out what page the comment is on without having to specify the page number and without excessively large queries or processing. So, for example, a link to a comment on page 5 would open the browser on comment page 5 and #scrolled to the comment (as opposed to showing the comment on it's own page).

I had thought to use 2 mysql queries, one SELECT all CommentId and then php `array_search` to find the position in the result and from that I could calculate what page it would be on. A 2nd query would get the page of comments required. This seems quite inefficient though especially if there are a lot of comments Ids to pull.

Could anyone suggest a simpler or more efficient way?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T18:30:35.087

好吧，如果您知道每页的评论数并且没有改变，那么您应该能够从 MySQL 中计算。如果您的浏览器永久链接中包含comment_id，则类似于：

```
select
    count(*)
from
    comments c
where
    comment_id < $comment_id
and
    topic_id = $topic_id -- or whatever 
```

然后使用 PHP 中的这个数字，您将能够计算要在数据库中查找和显示的页面。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T18:31:15.720

这一切都可以用 SQL 很容易地完成，假设这`comment_id`是某种形式的自动递增数字，这应该返回确切的页面：

```
SELECT FLOOR(COUNT(*)/$comments_per_page) FROM COMMENTS 
   WHERE ENTRY_ID = $entry_id AND comment_id < $comment_id; 
```

当然，这是假设“平面评论”（没有父子关系）。显然，`$comments_per_page`是显示在每个页面上的评论数量（这可能只是一个常数），`$entry_id`指的是发表评论的博客/论坛帖子，并且`$comment_id`是您正在寻找的评论。

# css - 由于 CSS，JQuery 兄弟选择器没有附加类

> ID：10285985
> 
> 赞同：1
> 
> 时间：2012-04-23T18:16:55.563
> 
> 标签：css, jquery-selectors, toggleclass

我也有一个带有子菜单子导航的菜单，并且我正在尝试根据子`<ul>`容器的悬停将一个类附加到孩子的父级。

这就是我到目前为止所拥有的：http: [//jsfiddle.net/2KhnX/15/](http://jsfiddle.net/2KhnX/15/)

但如您所见，该类永远不会被附加。如果我从 HTML 中剥离大部分 CSS，但留下我想要附加的类，它工作正常 - [http://jsfiddle.net/2KhnX/21/](http://jsfiddle.net/2KhnX/21/)

这让我相信 CSS 正在冲突或破坏 JQuery 试图执行的事件。我的猜测是因为我使用了`parent > child`CSS 的规则，或者可能是因为`.sub-menu`初始属性为`display:none`. 我不确定，我只知道 CSS 搞砸了，或者我没有使用适当的选择器*，因为*CSS。

任何见解将不胜感激，因为我迷路了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T18:52:39.910

这是有问题的CSS：

```
ul.menu li a:link, ul.menu li a:visited {
        background: url('images/alink.jpg') top center repeat-x;
}
.parenthovered {
    /* stuff */
} 
```

那些第一个选择器比 .parenthovered 选择器具有更高的[特异性](http://www.w3.org/TR/CSS2/cascade.html#specificity)，因此具有优先权。您可以通过几种方式解决这个问题；一种方法是在第一组选择器上不那么具体，而在第二组选择器上更具体：

```
a:link, a:visited {
        background: url('images/alink.jpg') top center repeat-x;
}

.menu a.parenthovered {
    /* stuff */
} 
```

当然，您必须选择对页面其余部分有意义的选择器...

工作小提琴：http: [//jsfiddle.net/pabo/NR4yB/1/](http://jsfiddle.net/pabo/NR4yB/1/)

此外，删除此行也可以：

```
background: url('images/alink.jpg') top center repeat-x; 
```

# php - MongoDB：如何查询嵌套数组？

> ID：10285987
> 
> 赞同：2
> 
> 时间：2012-04-23T18:16:56.030
> 
> 标签：php, mongodb, mongodb-php, multidimensional-array

我正在尝试使用 MongoDB 在 PHP 中构建一个简单的博客系统，只是为了尝试一下 Mongo，但我在查询它时遇到了一些困难。

我已经生成了 2000 个随机帖子，其中每个 blogpost 文档如下所示：

```
{
   "_id": ObjectId("4f908868d3269edc1a00044c"),
   "author": {
     "name": "Christine Skinner",
     "email": "Phyllis_Kirkland@.info",
     "age": 54,
     "city": "London" 
  },
   "post": "sagittis. Nullam vitae diam. Proin dolor. Nulla semper tellus id nunc interdum feugiat. Sed nec metus facilisis lorem tristique aliquet. Phasellus fer [...]",
   "date": "Fri Nov 13 12: 11: 48 +0100 2009",
   "rating": 2,
   "comments": {
     "0": {
       "name": "Barrett Bailey",
       "email": "Velma_Morales@.org",
       "upVotes": 4,
       "downVotes": 76,
       "comment": "gravida. Aliquam tincidunt, nunc ac mattis ornare, lectus ante dictum mi, ac mattis velit justo nec ante. Maecenas mi felis, adipiscing fringilla, por [...]" 
    },
     "1": {
       "name": "Cheryl Fitzgerald",
       "email": "acqueline_Perkins@.org",
       "upVotes": 13,
       "downVotes": 76,
       "comment": "adipiscing. Mauris molestie pharetra nibh. Aliquam ornare, libero at auctor mauris id sapien. Cras dolor dolor, tempus non, lacinia at, iaculis quis, [...]" 
    },
     "2": {
       "name": "Carly Graham",
       "email": "Judah_Santana@.dk",
       "upVotes": 55,
       "downVotes": 75,
       "comment": "Nullam velit dui, semper et, lacinia vitae, massa lobortis ultrices. Vivamus rhoncus. Donec est. Nunc ullamcorper, velit in aliquet lobortis, nisi nib [...]" 
    } 
  },
   "tags": {
     "0": "World War II",
     "1": "world War I" 
  } 
} 
```

例如，当获取一位特定作者撰写的所有帖子或获取评分大于或等于 X 的帖子时，我几乎可以控制那些更有利的查询，但我的评论嵌套数组存在一些问题。

我不确定我是否做错了，但我如何首先显示所有带有评论的博客帖子？当我做一个简单的事情时，`$collection->find()`我使用 PHP 函数 iterator_to_array 将它全部放在一个数组中。然后我做了一个简单的 foreach() 来迭代每个值，但因为注释本身就是一个数组。我是否必须创建一个新的 foreach 才能获得评论，或者是否有更快、更智能的方法来做到这一点？

我遇到的另一个问题是，如果我想在查询中使用评论属性。如果我要删除评论，我需要写博客 _id 和评论作者（或评论编号），但评论的数量会有所不同，所以有时只有一条评论，有时最多有 10 条评论。

是否应该将评论放入不同的集合中，或者我可以让它给每个评论一个更唯一的 ID 而不仅仅是数组编号？以及如何使用评论中的属性进行查询，假设我想显示一篇博客文章，但在最高点赞数之后对评论进行排序？

我已经尝试过几个教程，但其中大多数都在处理非常静态的文档，所以这让我想到我可能做错了？

非常感谢任何帮助或建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T18:51:07.000

首先，如果您想获得包含所有评论的博客文章，您可以执行以下操作：

```
$collection->find(array('author.name'=>'Christine Skinner')); 
```

其次，是的，如果要显示所有评论，则需要另一个循环，因此：

```
foreach ($cursor as $post){
   foreach($post['comments'] as $num=>$comment){
      echo "Comment number "
           .$num
           ." was written by "
           .$comment['name']
           .": " 
           .$comment['comment'];
   }
} 
```

如果要更新文档的单个注释，可以这样做：

```
 $collection->update(
      array('_id'=>new MongoId($id)), 
      array('$set'=>array('comments.'.$num.'.comment'=>$newComment))
); 
```

您将无法在查询中对评论子文档进行排序，因此您需要在查询后在 PHP 中对返回的每个帖子进行排序。查看 PHP 手册中的 usort，它可能会满足您的需求：[http](http://www.php.net/manual/en/function.usort.php) ://www.php.net/manual/en/function.usort.php 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T18:48:04.220

根据您的文档，您实际上是将评论存储在子文档（对象）而不是数组中。所以基本上你的每条评论都有一个唯一的 id（在这种情况下是 0-2）。如果你想删除一个特定的评论，它就像控制台中的以下内容一样简单：

```
db.collection.update({"_id": ObjectId("4f908868d3269edc1a00044c")}, {$unset: {"comments.1": 1}}); 
```

或者在 PHP 中：

```
$collection->update(array("$unset" => array("comments.1" => 1))); 
```

至于迭代你的评论，你是对的。您基本上需要遍历返回文档的评论元素。

# database - 哪个 nosql 数据库将提供最佳结果

> ID：10285991
> 
> 赞同：0
> 
> 时间：2012-04-23T18:17:00.540
> 
> 标签：database

我们正在开发分析系统。每当任何用户在我们的网站上执行任何操作时，我们都会将其记录到我们的数据库中，但是数据非常庞大（每天大约 300 万行）以至于 rdms 不会给我们最好的结果。基于这些数据，我们正在查询我们的数据库以生成一些报告。因此我们正在寻找一个 NoSql 数据库。

一方面，我们必须优化我们的写操作，另一方面，我们也必须改进读查询。一件事是我们没有任何更新查询。

谁能根据我们的要求建议哪个 NoSql 数据库将为我们提供最佳结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T09:10:08.700

要了解 NoSQL 的概念，我建议阅读[Amazon 的 Dynamo 设计](http://www.allthingsdistributed.com/2007/10/amazons_dynamo.html)。链接的文档很大，但值得一读。

最受欢迎的之一是：

*   [MongoDB数据库](http://www.mongodb.org/)
*   [卡桑德拉](http://cassandra.apache.org/)
*   [伏地魔计划](http://project-voldemort.com/)

其余的可以在[这里](http://nosql-database.org/)找到。您的意见确实不足以说明什么最适合您的需求。

# c# - 协助设置客户端和服务器

> ID：10285993
> 
> 赞同：2
> 
> 时间：2012-04-23T18:17:04.000
> 
> 标签：c#, frameworks, client-server, communication, xml-rpc

可能是一个简单的问题，但无法在网上找到帮助。我用 c# 编写了一个检查程序应用程序，并尝试使用 xmlrpc.net 2.5 版建立连接，以便一个用户（客户端）可以输入另一台计算机（服务器）的 IP 地址并能够发送回消息并第四次更新董事会的变化。

这是我正在尝试做的一些伪代码，

```
public void startConnecting()
{
    //set up xml-rpc to connect to specified ip address

    //if successful start the game
    //start a receive message thread
    //sendMsg(name);

}
private void button1_Click(object sender, EventArgs e)
    //start the search for the ip address stored in textBox2
{
   name = textBox1.Text;
   startConnecting();
}
public void sendMsg(string s)
{
   while (true)
   //send msg
 } 
```