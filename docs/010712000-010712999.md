# StackOverflow 问答 10712000-10712999

# facebook - 将多个新闻/社交流合并为一个（FB、Twitter、Flickr、RSS）

> ID：10712000
> 
> 赞同：0
> 
> 时间：2012-05-23T00:38:15.223
> 
> 标签：facebook, service, twitter, rss, stream

我正在寻找一种服务，将来自网络的多个流整合到一个易于使用的 rss 提要或类似的东西中。我至少需要支持 facebook 和 twitter。理想情况下也适用于 flickr、其他 rss 提要等。

我找到了[http://feedstitch.com/](http://feedstitch.com/)但他们不支持 FB。

谢谢西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T08:55:56.770

将 Facebook 的 Wallflux 提要与 Yahoo Pipes 中的其他提要一起加入？

# python - 在 Python 中创建一个具有一定大小的空列表

> ID：10712002
> 
> 赞同：751
> 
> 时间：2012-05-23T00:38:24.613
> 
> 标签：python, list

我想创建一个可以容纳 10 个元素的空列表（或任何最好的方法）。

之后我想在该列表中分配值，例如这应该显示 0 到 9：

```
s1 = list();
for i in range(0,9):
   s1[i] = i

print s1 
```

但是当我运行这段代码时，它会产生一个错误，或者在另一种情况下它只是显示`[]`（空）。

有人可以解释为什么吗？

* * *

## 回答 #1

> 赞同：1151
> 
> 时间：2012-05-23T00:44:12.223

您不能分配给类似 的列表`lst[i] = something`，除非该列表已经至少使用`i+1`元素进行了初始化。您需要使用 append 将元素添加到列表的末尾。`lst.append(something)`.

（如果您使用字典，则可以使用赋值符号）。

创建一个空列表：

```
>>> l = [None] * 10
>>> l
[None, None, None, None, None, None, None, None, None, None] 
```

为上述列表的现有元素赋值：

```
>>> l[1] = 5
>>> l
[None, 5, None, None, None, None, None, None, None, None] 
```

请记住，类似的东西`l[15] = 5`仍然会失败，因为我们的列表只有 10 个元素。

range(x) 从 [0, 1, 2, ... x-1] 创建一个列表

```
# 2.X only. Use list(range(10)) in 3.X.
>>> l = range(10)
>>> l
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9] 
```

使用函数创建列表：

```
>>> def display():
...     s1 = []
...     for i in range(9): # This is just to tell you how to create a list.
...         s1.append(i)
...     return s1
... 
>>> print display()
[0, 1, 2, 3, 4, 5, 6, 7, 8] 
```

列表理解（使用方块，因为对于范围你不需要做所有这些，你可以 return `range(0,9)`）：

```
>>> def display():
...     return [x**2 for x in range(9)]
... 
>>> print display()
[0, 1, 4, 9, 16, 25, 36, 49, 64] 
```

* * *

## 回答 #2

> 赞同：183
> 
> 时间：2012-05-23T00:41:42.897

试试这个：

```
lst = [None] * 10 
```

上面将创建一个大小为 10 的列表，其中每个位置都初始化为`None`. 之后，您可以向其中添加元素：

```
lst = [None] * 10
for i in range(10):
    lst[i] = i 
```

诚然，这不是 Pythonic 做事的方式。最好这样做：

```
lst = []
for i in range(10):
    lst.append(i) 
```

或者*更简单*，在 Python 2.x 中，您可以这样做来初始化一个值从 0 到 9 的列表：

```
lst = range(10) 
```

在 Python 3.x 中：

```
lst = list(range(10)) 
```

* * *

## 回答 #3

> 赞同：127
> 
> 时间：2015-11-04T03:39:09.853

varunl 目前接受的答案

```
 >>> l = [None] * 10
 >>> l
 [None, None, None, None, None, None, None, None, None, None] 
```

适用于数字等非引用类型。不幸的是，如果您想创建一个列表列表，您将遇到引用错误。Python 2.7.6 中的示例：

```
>>> a = [[]]*10
>>> a
[[], [], [], [], [], [], [], [], [], []]
>>> a[0].append(0)
>>> a
[[0], [0], [0], [0], [0], [0], [0], [0], [0], [0]]
>>> 
```

如您所见，每个元素都指向同一个列表对象。为了解决这个问题，您可以创建一个方法，将每个位置初始化为不同的对象引用。

```
def init_list_of_objects(size):
    list_of_objects = list()
    for i in range(0,size):
        list_of_objects.append( list() ) #different object reference each time
    return list_of_objects

>>> a = init_list_of_objects(10)
>>> a
[[], [], [], [], [], [], [], [], [], []]
>>> a[0].append(0)
>>> a
[[0], [], [], [], [], [], [], [], [], []]
>>> 
```

可能有一种默认的内置 python 方式来执行此操作（而不是编写函数），但我不确定它是什么。很高兴得到纠正！

编辑：这是`[ [] for _ in range(10)]`

例子 ：

```
>>> [ [random.random() for _ in range(2) ] for _ in range(5)]
>>> [[0.7528051908943816, 0.4325669600055032], [0.510983236521753, 0.7789949902294716], [0.09475179523690558, 0.30216475640534635], [0.3996890132468158, 0.6374322093017013], [0.3374204010027543, 0.4514925173253973]] 
```

* * *

## 回答 #4

> 赞同：20
> 
> 时间：2016-02-15T22:38:27.640

有两种“快速”方法：

```
x = length_of_your_list
a = [None]*x
# or
a = [None for _ in xrange(x)] 
```

似乎`[None]*x`更快：

```
>>> from timeit import timeit
>>> timeit("[None]*100",number=10000)
0.023542165756225586
>>> timeit("[None for _ in xrange(100)]",number=10000)
0.07616496086120605 
```

但是如果你对一个范围（例如`[0,1,2,3,...,x-1]`）没问题，那么`range(x)`可能是最快的：

```
>>> timeit("range(100)",number=10000)
0.012513160705566406 
```

* * *

## 回答 #5

> 赞同：19
> 
> 时间：2012-05-23T00:40:21.493

您可以`.append(element)`到列表中，例如：`s1.append(i)`。您当前尝试做的是访问一个`s1[i]`不存在的元素 ( )。

* * *

## 回答 #6

> 赞同：18
> 
> 时间：2017-12-11T07:14:02.507

我很惊讶没有人建议这种简单的方法来创建空列表列表。这是一个旧线程，但只是为了完整性而添加它。这将创建一个包含 10 个空列表的列表

```
x = [[] for i in range(10)] 
```

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2020-06-11T16:14:32.310

接受的答案有一些问题。例如：

```
>>> a = [{}] * 3
>>> a
[{}, {}, {}]
>>> a[0]['hello'] = 5
>>> a
[{'hello': 5}, {'hello': 5}, {'hello': 5}]
>>> 
```

所以每个字典都引用同一个对象。如果您使用数组或对象进行初始化，同样如此。

你可以这样做：

```
>>> b = [{} for i in range(0, 3)]
>>> b
[{}, {}, {}]
>>> b[0]['hello'] = 6
>>> b
[{'hello': 6}, {}, {}]
>>> 
```

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2012-05-23T00:50:07.423

**（这是根据问题的原始版本编写的。）**

> 我想创建一个空列表（或任何最好的方法）可以容纳 10 个元素。

所有列表都可以包含任意数量的元素，仅受可用内存的限制。列表中唯一重要的“大小”是**当前**其中的元素数量。

> 但是当我运行它时，结果是 []

`print display s1`不是有效的语法；根据您对所见内容的描述，我假设您的意思是`display(s1)`然后`print s1`。要运行它，您必须事先定义一个全局`s1`变量以传递给函数。

调用`display`不会修改您传入的列表，如所写。您的代码说 "`s1`是传递给函数的任何东西的名称；好的，现在我们要做的第一件事就是完全忘记那个东西，并`s1`开始引用新创建的`list`. 现在我们将对其进行修改`list`”。这对您传入的值没有影响。

没有理由在这里传递一个值。（也没有真正的理由来创建一个函数，但这不是重点。）你想“创建”一些东西，所以这就是你的函数的输出。创建你描述的东西不需要任何信息，所以不要传递任何信息。要获取信息，`return`它。

这会给你类似的东西：

```
def display():
    s1 = list();
    for i in range(0, 9):
        s1[i] = i
    return s1 
```

您将注意到的下一个问题是您的列表实际上只有 9 个元素，因为函数跳过了终点`range`。（作为旁注，`[]`效果和 一样好`list()`，分号是不必要的，是变量的一个糟糕的名称，如果你从 开始`s1`，只需要一个参数。）所以你最终得到`range``0`

```
def create_list():
    result = list()
    for i in range(10):
        result[i] = i
    return result 
```

但是，这仍然没有达到目的。`range`不是某种神奇的关键字，它是语言的一部分`for`，`def`而是一个函数。猜猜那个函数返回什么？没错——这些整数的列表。所以整个函数折叠为

```
def create_list():
    return range(10) 
```

现在你明白为什么我们根本不需要自己编写函数了；`range`已经是我们正在寻找的功能。尽管再一次，没有必要或理由“预先确定”列表的大小。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2019-04-11T11:37:15.197

`n`使用嵌套列表推导式创建 2D 大小矩阵的一种简单方法：

```
m = [[None for _ in range(n)] for _ in range(n)] 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2018-10-22T08:40:57.820

我有点惊讶的是，创建初始化列表的最简单方法不在这些答案中。只需在函数中使用生成器`list`：

```
list(range(9)) 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-01-05T19:00:35.523

这是我在 python 中的 2D 列表代码，它会读取 no。输入中的行数：

```
empty = []
row = int(input())

for i in range(row):
    temp = list(map(int, input().split()))
    empty.append(temp)

for i in empty:
    for j in i:
        print(j, end=' ')
    print('') 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2022-01-05T15:56:44.790

另一种选择是将 numpy 用于固定大小的数组（指针）：

`> pip install numpy`

```
import numpy as np

a = np.empty(10, dtype=np.object)
a[1] = 2
a[5] = "john"
a[3] = [] 
```

如果你只想要数字，你可以使用 numpy：

```
a = np.arange(10) 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-02-05T05:48:00.630

从技术上讲不是列表，但在功能方面类似于列表，并且它是固定长度的

```
from collections import deque
my_deque_size_10 = deque(maxlen=10) 
```

如果它已满，即有 10 个项目，那么添加另一个项目会导致项目 @index 0 被丢弃。FIFO ..但您也可以向任一方向追加。用于说

*   统计数据的滚动平均值
*   通过它管道列表，也就是在列表上滑动一个窗口，直到您与另一个双端队列对象匹配。

如果您需要一个列表，那么当满时只需使用 list(deque object)

* * *

## 回答 #14

> 赞同：-1
> 
> 时间：2018-02-18T20:52:06.807

我在搜索类似问题时遇到了这个 SO question。我必须构建一个二维数组，然后用字典中的元素替换每个列表（在二维数组中）的一些元素。然后我遇到了[这个](https://stackoverflow.com/questions/37934507/how-to-change-element-in-2d-array-in-python)对我有帮助的 SO question，也许这会帮助其他初学者绕过。关键技巧是将 2D 数组初始化为 numpy 数组，然后使用`array[i,j]`而不是`array[i][j]`.

作为参考，这是我必须使用的一段代码：

```
nd_array = []
for i in range(30):
    nd_array.append(np.zeros(shape = (32,1)))
new_array = []
for i in range(len(lines)):
    new_array.append(nd_array)
new_array = np.asarray(new_array)
for i in range(len(lines)):
    splits = lines[i].split(' ')
    for j in range(len(splits)):
        #print(new_array[i][j])
        new_array[i,j] = final_embeddings[dictionary[str(splits[j])]-1].reshape(32,1) 
```

现在我知道我们可以使用列表推导，但为了简单起见，我使用了嵌套的 for 循环。希望这可以帮助其他遇到这篇文章的人。

* * *

## 回答 #15

> 赞同：-3
> 
> 时间：2018-01-02T13:05:00.717

```
s1 = []
for i in range(11):
   s1.append(i)

print s1 
```

要创建一个列表，只需使用这些括号：“[]”

要将某些内容添加到列表中，请使用 list.append()

* * *

## 回答 #16

> 赞同：-3
> 
> 时间：2018-07-22T03:43:38.770

使其作为函数更可重用。

```
def createEmptyList(length,fill=None):
    '''
    return a (empty) list of a given length
    Example:
        print createEmptyList(3,-1)
        >> [-1, -1, -1]
        print createEmptyList(4)
        >> [None, None, None, None]
    '''
    return [fill] * length 
```

* * *

## 回答 #17

> 赞同：-5
> 
> 时间：2018-05-28T20:26:17.410

此代码生成一个包含 10 个随机数的数组。

```
import random
numrand=[]
for i in range(0,10):
   a = random.randint(1,50)
   numrand.append(a)
   print(a,i)
print(numrand) 
```

# jquery - 验证用户名和电子邮件可用性字段的更好方法

> ID：10712004
> 
> 赞同：1
> 
> 时间：2012-05-23T00:38:33.663
> 
> 标签：jquery, oop, javascript-objects

我有一个非常好的 OOP JS 结构，但正在寻找一些帮助来验证用户名和电子邮件字段。我已经很好地工作了，但我认为用户名和电子邮件可以得到更好的验证。

我已经在一组字段（元素）上设置了一个委托，然后我对这些进行了验证。我对用户名和电子邮件字段的代码验证如下所示：

```
} else if( regExpTest === "AjaxCall") {

if(currentValue.length > 0){

    availability = ZEN.checkAvailability( $this ); //Check weather form input value is available in DB

    availability.success(function (data) {

        if(data == "1" && currentField == 'username'){

            $('#usernameErrorExists').fadeIn();
        }

        if(data == "0" && currentField == 'username'){

            $('#usernameErrorExists').fadeOut();

        }

        if(data == "1" && currentField == 'email'){

            $('#emailErrorExists').fadeIn();

        }

        if(data == "0" && currentField == 'email'){

            $('#emailErrorExists').fadeOut();

        }

    });

    isValid = true;

} 
```

}

ZEN.checkAvailability 函数如下所示：

```
ZEN.checkAvailability = function( input ) {

// get input name
var inputName = input.attr('name')

// get value
var inputValue = input.val();

return $.ajax({
    type: "POST",
    url: "/"+ inputName +"-check",
    data: inputName +'='+ inputValue,
    cache: false
});

}; 
```

我的问题是，有没有更好的方法来验证 AJAX 请求返回的响应？

谢谢罗伯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-05T17:40:00.423

通过在错误消息上将 jQuery 淡入淡出到更合适的时间来更好地工作。

感谢 Chao 的评论。

# php - 如何不使用 Doctrine 将对象保留在实体内？

> ID：10712010
> 
> 赞同：3
> 
> 时间：2012-05-23T00:39:03.397
> 
> 标签：php, mysql, doctrine-orm

我有以下使用 Doctrine 持久化的类，但我不希望插入`knowledgeArea`and`knowledgeLevel`属性，因为它们是对象，而不是属性。

我需要做什么才能不插入这些对象，而只插入引用它们的属性？

**注意**：我正在学习 Doctrine，我认为我做错了什么，但我不确定。我正在使用 MySQL。

```
class Knowledge {

    /** @Id @Column(name="id", type="bigint") @generatedValue(strategy="AUTO") **/    
    private $id;

    /** @Column(name="name", type="string") **/
    private $name;

    /** @Column(name="description", type="text") **/
    private $description;

    /** @Column(name="exibition_order", type="integer") **/
    private $exibitionOrder;

    /**         
    * @ManyToOne (targetEntity="KnowledgeArea", inversedBy="knowledges")
    * @JoinColumn(name="knowledge_area_id", referencedColumnName="id")
    **/
    private $knowledgeArea; #this is an object

    /** 
    * @ManyToOne (targetEntity="KnowledgeLevel", inversedBy="knowledges")
    * @JoinColumn(name="knowledge_level_id", referencedColumnName="id")    
    **/
    private $knowledgeLevel; #this is an object 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T01:24:30.940

所以看来你的问题是如何设置外键关系？典型的方法是使用引用。以 Symfony2 控制器为例，您将拥有：

```
$em = $this->getDoctrine()->getEntityManager();
$knowledge = new Knowledge();
$knowledge->setKnowledgearea($em->getReference('AcmeBundle:Knowledges', 3)); 
```

如果您使用其他框架，则需要学说 entitymanager 对象，但想法是相同的。

这[在此处记录。](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/advanced-configuration.html#reference-proxies)

# java - 如何从一个托管 bean 中获取一个值并在回发时使用它来设置另一个托管 bean 的属性

> ID：10712015
> 
> 赞同：1
> 
> 时间：2012-05-23T00:40:05.317
> 
> 标签：java, forms, jsf, postback, hidden

基本上我希望能够在页面加载时从一个托管 bean 中获取一个值，然后用该原始值回发到另一个 bean（表单中的其他值）......

这是我到目前为止所拥有的一部分（这都是一种形式并且有效......）

```
 <h:selectOneMenu id="categoryMenu" required="true"
                                         value="#{expense.categoryID}" label="Category" onchange="

                                                var value = myJQuery(this).val().toLowerCase();
                                                alert('You chose ' + value)">
                            <f:selectItem itemValue="0" itemLabel=""/>
                            <f:selectItem itemValue="1" itemLabel="Food"/>
                            <f:selectItem itemValue="2" itemLabel="Gas"/>
                            <f:selectItem itemValue="3" itemLabel="Clothing"/>
                            <f:selectItem itemValue="4" itemLabel="Recreation"/>
                            <f:selectItem itemValue="5" itemLabel="Other"/>

                        </h:selectOneMenu>
                        <h:message for="categoryMenu"/>
                        <h:outputLabel for="amount" value="Amount" styleClass="requiredLbl"/>
                        <h:inputText id="amount" value="#{expense.amount}" required="true" label="Amount"/>
                        <h:message for="amount"/>
                        <br/>
                        <p:commandButton id="btnSave" value="Save" action="#{expense.saveExpense}" ajax="false"/>
                    </h:panelGrid> 
```

但我也想在回邮中包含这个值（不一定是隐藏形式，但你明白我的意思）......

```
 <input type="hidden" value="#{loginController.userID}" id="hiddenCategory"/> 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T03:37:54.873

其中一种方法是将其作为请求参数传递。

```
<p:commandButton id="btnSave" value="Save" action="#{expense.saveExpense}" ajax="false">
    <f:param name="userID" value="#{loginController.userID}" />
</p:commandButton> 
```

如果`#{expense}`是请求范围，只需将其设置如下：

```
@ManagedProperty("#{param.userID}")
private Long userID; // +setter 
```

但是，您需要了解最终用户可以完全控制此值。如果这确实代表当前登录的用户，正如变量名称所暗示的那样，那么您不应该通过表单提交来传递它。

假设`#{loginController}`是一个会话范围的 bean，只需将它注入到`#{expense}`bean 中，如下所示：

```
@ManagedProperty("#{loginController}")
private LoginController loginController; // +setter 
```

或者

```
@ManagedProperty("#{loginController.userID}")
private Long userID; // +setter 
```

# oauth-2.0 - 使用更新的 gdata-java-client 和 Oauth2 的示例？

> ID：10712016
> 
> 赞同：4
> 
> 时间：2012-05-23T00:40:14.580
> 
> 标签：oauth-2.0, gdata-api, google-sheets

根据[http://code.google.com/p/gdata-java-client/source/detail?r=505，gdata-java-client](http://code.google.com/p/gdata-java-client/source/detail?r=505)库最近（2012 年 4 月）已更新为支持 OAuth2.0。我很想在网络应用程序中使用它来创建和修改谷歌电子表格。我希望我的网络应用程序的用户将他们的数据存储在他们自己的凭据下的谷歌电子表格中。

我是使用 google api 的新手，并且在尝试浏览示例时迷失了方向。它们似乎都指的是已弃用的身份验证方法（oauth1 或 authsub 或 clientlogin）。

有没有人看到任何关于如何将 gdata apis 与 Oauth2.0 一起使用来完成我正在谈论的事情的最新示例？首先十分感谢。对不起，如果问题太n00by。

# c# - 如何从 azure 表中获取连续的行集？

> ID：10712020
> 
> 赞同：2
> 
> 时间：2012-05-23T00:40:36.860
> 
> 标签：c#, azure, azure-storage, azure-table-storage

我的客户请求最多未知数量的项目，并要求我交付具有连续 ID 的批次（无碎片）。每个项目都有一个 id。我可以连续存储多个项目，但这个数字还不够，所以我还需要获取后续行。考虑到我会有并发呼叫，我如何使用 azure 表来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:02:34.470

根据我的理解，我建议您查看[http://msdn.microsoft.com/en-us/library/windowsazure/dd894038.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/dd894038.aspx)以获取有关针对表存储的批处理请求的更多信息。至于并发性，您可以利用 If-Match 标头。更新和删除操作都支持 If-Match。有关详细信息，请参阅[http://msdn.microsoft.com/en-us/library/windowsazure/dd179427](http://msdn.microsoft.com/en-us/library/windowsazure/dd179427)。如果这些都没有帮助，最好您能提供更多信息，我们将尽力为您提供进一步的建议。

此致，

明旭。

# asp.net - 在 edititemtemplate 中将数据源绑定到下拉列表会创建 Eval()、XPath() 和 Bind() 等数据绑定方法错误

> ID：10712029
> 
> 赞同：1
> 
> 时间：2012-05-23T00:41:37.670
> 
> 标签：asp.net, gridview, rowdatabound

我的 gridview 包含一个名为 SubPlot 的列。在编辑模式下，该列应该显示绑定到数据源的下拉列表。此数据源采用名为@100mPlotName 的参数。这是我点击“编辑”时遇到的错误

> Eval()、XPath() 和 Bind() 等数据绑定方法只能在数据绑定控件的上下文中使用。

ASP.NET：

```
<asp:TemplateField HeaderText="SubPlot" SortExpression="SubPlot">
    <EditItemTemplate>                            
        <asp:DropDownList ID="DropDownList1" runat="server" 
            DataSourceID="dsSubPlotNames" 
            DataTextField="SiteName" DataValueField="SiteID" 
            SelectedValue='<%# Bind("SiteID") %>'
        >
        </asp:DropDownList>
        <asp:SqlDataSource ID="dsSubPlotNames" runat="server" 
            ConnectionString="<%$ ConnectionStrings:WERCMTX %>" SelectCommand='exec [339_PPM].usp_SubPlotNames_Select null, @100mPlotName;'
            CancelSelectOnNullParameter="False">                                
            <SelectParameters name="100mPlotName" />
         </asp:SqlDataSource>
     </EditItemTemplate>
          <ItemTemplate>
              <asp:Label ID="Label3" runat="server" Text='<%# Bind("SubPlot") %>'></asp:Label>
     </ItemTemplate>                        
 </asp:TemplateField> 
```

后面的代码：

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
     if (e.Row.RowType == DataControlRowType.DataRow && (e.Row.RowState & DataControlRowState.Edit) == DataControlRowState.Edit)
     { 
         Label lbl100mPlot = (Label)e.Row.FindControl("lbl100mPlot");
         SqlDataSource dsPlotNames = (SqlDataSource)e.Row.FindControl("dsSubPlotNames");
         dsPlotNames.SelectParameters.Clear();
         dsPlotNames.SelectParameters.Add("100mPlotSiteID", null);
         dsPlotNames.SelectParameters.Add("100mPlotName", lbl100mPlot.Text);               
    }
} 
```

我觉得我在后面的代码中遗漏了一些东西。我的目标是在用户单击编辑时显示来自数据源的数据的下拉列表。谢谢你的帮助。

# google-app-engine - 应用程序在本地运行良好，但不会在 GAE 上启动

> ID：10712034
> 
> 赞同：2
> 
> 时间：2012-05-23T00:42:13.630
> 
> 标签：google-app-engine, gae-eclipse-plugin

我正在尝试在 GAE 上制作留言簿教程，但徒劳无功。它在 localhost 上完美运行，但无法在 GAE 上启动。我想知道我怎么找不到这么明显和简单的解决方案。无论如何，我使用 1.6.5 版本，这些是日志错误：

```
2012-05-22 16:28:36.724 /guestbook 500 183ms 0kb Mozilla/5.0 (Windows NT 6.1; WOW64; rv:13.0) Gecko/20100101 Firefox/13.0

109.226.55.233 - - [22/May/2012:16:28:36 -0700] "GET /guestbook HTTP/1.1" 500 0 "http://guestbooktestingtutorial.appspot.com/" "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:13.0) Gecko/20100101 Firefox/13.0" "guestbooktestingtutorial.appspot.com" ms=183 cpu_ms=397 api_cpu_ms=0 cpm_usd=0.011064 instance=00c61b117cdcbcf1fe4c8dc60eab0832828978

W 2012-05-22 16:28:36.721

Failed startup of context com.google.apphosting.utils.jetty.RuntimeAppEngineWebAppContext@161509b{/,/base/data/home/apps/s~guestbooktestingtutorial/1.359093852525748087}
org.mortbay.util.MultiException[java.lang.UnsupportedClassVersionError: guestbook/GuestbookServlet : Unsupported major.minor version 51.0, java.lang.UnsupportedClassVersionError: guestbook/SignGuestbookServlet : Unsupported major.minor version 51.0]
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:656)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.createHandler(AppVersionHandlerMap.java:202)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.getHandler(AppVersionHandlerMap.java:171)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:123)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:477)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:695)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679)
java.lang.UnsupportedClassVersionError: guestbook/GuestbookServlet : Unsupported major.minor version 51.0
    at com.google.appengine.runtime.Request.process-85e2c1c92188b0ad(Request.java)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
    at sun.reflect.GeneratedMethodAccessor5.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at org.mortbay.util.Loader.loadClass(Loader.java:91)
    at org.mortbay.util.Loader.loadClass(Loader.java:71)
    at org.mortbay.jetty.servlet.Holder.doStart(Holder.java:73)
    at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:242)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:695)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453)
    at java.lang.Thread.run(Thread.java:679)
java.lang.UnsupportedClassVersionError: guestbook/SignGuestbookServlet : Unsupported major.minor version 51.0
    at com.google.appengine.runtime.Request.process-85e2c1c92188b0ad(Request.java)
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
    at sun.reflect.GeneratedMethodAccessor5.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at org.mortbay.util.Loader.loadClass(Loader.java:91)
    at org.mortbay.util.Loader.loadClass(Loader.java:71)
    at org.mortbay.jetty.servlet.Holder.doStart(Holder.java:73)
    at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:242)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:695)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453)
    at java.lang.Thread.run(Thread.java:679) 
```

对于关键：

```
C 2012-05-22 16:28:36.722

Uncaught exception from servlet
javax.servlet.UnavailableException: Initialization failed.
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.createHandler(AppVersionHandlerMap.java:211)
    at com.google.apphosting.runtime.jetty.AppVersionHandlerMap.getHandler(AppVersionHandlerMap.java:171)
    at com.google.apphosting.runtime.jetty.JettyServletEngineAdapter.serviceRequest(JettyServletEngineAdapter.java:123)
    at com.google.apphosting.runtime.JavaRuntime$RequestRunnable.run(JavaRuntime.java:477)
    at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:449)
    at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:455)
    at com.google.tracing.TraceContext.runInContext(TraceContext.java:695)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:333)
    at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:325)
    at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:453)
    at com.google.apphosting.runtime.ThreadGroupPool$PoolEntry.run(ThreadGroupPool.java:251)
    at java.lang.Thread.run(Thread.java:679) 
```

您还可以解释如何调试此日志吗？从上到下？从下到上？有什么调试参考的建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T10:32:50.850

好的，终于明白了。正如我在 JDK 1.7 出现问题之前在 10 个问题中看到的那样。虽然我没有意识到如何正确地改变它。我尝试了 window->prefs->installed JREs 来选择/添加 jdk1.7/jre1.7/jre1.6... 但徒劳无功。即使你在这里激活jre1.6（最后在这里选择什么都没关系）你需要在其他地方选择活动的JDK。

底线：我将 'window->prefs->compiler' 编译器 (JDK) 兼容级别更改为 1.6 并且它有效！祝你们好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T01:20:04.120

我认为您正在寻找的错误是这个： `java.lang.UnsupportedClassVersionError: guestbook/GuestbookServlet : Unsupported major.minor version 51.0`

您在 Eclipse 中以 JDK 为目标，但该目标与 App Engine 上的目标不同。我建议取消针对 JDK 并尝试再次部署它。

# jquery - 使用 jQuery 循环对象

> ID：10712039
> 
> 赞同：2
> 
> 时间：2012-05-23T00:43:03.440
> 
> 标签：jquery, json, loops

我第一次接触 JSON，我在遍历对象时遇到了问题。

JSON 的格式如下：

```
{
    "response": {
        "2012-01-01": {
            "Available": 99,
            "Variations": [
                {
                    "ID": 43,
                    "InternalItemID": "Adult",
                    "Price": "49.00"
                }
            ]
        },
        "2012-01-02": {
            "Available": 99,
            "Variations": [
                {
                    "ID": 43,
                    "InternalItemID": "Adult",
                    "Price": "49.00"
                }
            ]
        }
   }
} 
```

我可以访问日期，但无法更深入。我需要所有的价值观：

```
$.getJSON(jsonurl, function(data){

            $.each(data.response, function(thisDate){
                alert(thisDate);
            });
        }); 
```

请有人指出我正确的方向

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T00:47:06.140

[`$.each`](http://www.jqapi.com/#p=jQuery.each)将每个键的值作为第二个参数传递给回调。

```
$.each(data.response, function(date, value) {
    // value.Available
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T00:51:01.213

```
$(function(){
    $.each(data.response, function(index,item){
            alert(item.Available);
            var child=item.Variations;
            alert(child[0].Price);
    });
}); 
```

工作示例[http://jsfiddle.net/d84nj/10/](http://jsfiddle.net/d84nj/10/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T00:48:12.457

当您需要该值时，您正在使用属性名称。

`jQuery.each( collection, callback(indexInArray, valueOfElement) )`

所以你可以看到日期的原因是它是属性名称。你要：

```
$.each(data.response, function(thisDate, valueOfElement){
    alert(thisDate, valueOfElement);
}); 
```

# html - 用于桌面网站的html5滑动独立页面过渡

> ID：10712046
> 
> 赞同：0
> 
> 时间：2012-05-23T00:44:41.397
> 
> 标签：html, transition, sliding

我正在尝试编写具有多个独立页面的网站，并且我想使用页面之间的幻灯片转换效果，因为它可以使用 jquery 移动框架完成，但不使用这个。我的目标是制作一个桌面网站，而不是一个移动应用程序。

流动性和执行速度是我的目标。我看到您可以使用 jQuery Easing 插件（版本 1.3），但我无法放置此代码以在独立页面之间实现流畅的过渡效果。

我打算用 TerrenceRyan.com 解决方案做这个过渡页面效果，但它不能正常工作。

我不想使用 jquery 锚点或隐藏的 div 进行导航，这些 div 放置在长长的一页中，但许多独立的页面会在点击滑动时到达。

为了给你一个我想要实现的例子，这里有一些链接：

[http://www.craigandkarl.com/](http://www.craigandkarl.com/) http://www.ultranoir.com/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:07:54.273

如果性能是关键并且您不想使用 jQuery，可以查看新的[greensock javascript 库](http://www.greensock.com/tag/javascript/)

他们有一个测试页面，显示它对其他类似库的性能非常好：

[速度测试页面](http://www.greensock.com/js/speed.html)

多年来我一直在使用他们的 AS2、AS3 引擎进行闪存，如果 JS 版本几乎一样好，那么我相信它会对你有用。

# javascript - 使一组图像在屏幕上移动然后离开窗口时从另一侧出现

> ID：10712047
> 
> 赞同：0
> 
> 时间：2012-05-23T00:44:42.087
> 
> 标签：javascript, jquery, image, animation, jquery-animate

我正在尝试`marquee tag`通过使用函数动画一组图像来实现在 jQuery 中`animate()`，使它们向右或向左移动。
但是，我无法弄清楚单个图像何时到达屏幕末尾，然后**单独**返回 到另一侧。
因为我听说每个浏览器的窗口大小都不是恒定的，那么有没有办法实现呢？
这是我到目前为止提出的（简单而基本）：

```
$(document).ready(function(){
    moveThumbs(500);
    function moveThumbs(speed){
        $('.thumbnails').animate({
            right:"+=150"
        }, speed);
        setTimeout(moveThumbs, speed);
    }

}); 
```

**注意**：我在 SO 中搜索了相关问题，但没有找到针对我的具体问题的确切信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T01:44:42.087

这是一个基本脚本，它在屏幕上移动图像，然后在另一侧恢复并适应窗口宽度。

你可以看到它在这里工作：http: [//jsfiddle.net/jfriend00/rnWa2/](http://jsfiddle.net/jfriend00/rnWa2/)

```
function startMoving(img) {
    var img$ = $(img);
    var imgWidth = img$.width();
    var screenWidth = $(window).width();
    var amount = screenWidth - (parseInt(img$.css("left"), 10) || 0);
    // if already past right edge, reset to 
    // just left of left edge
    if (amount <=0 ) {
        img$.css("left", -imgWidth);
        amount = screenWidth + imgWidth;
    }
    var moveRate = 300;   // pixels per second to move
    var time = amount * 1000 / moveRate;
    img$.stop(true)
        .animate({left: "+=" + amount}, time, "linear", function() {
            // when animation finishes, start over
            startMoving(this);
        })
}

$(document).ready(function() {
    // readjust if window changes size
    $(window).resize(function() {
        $(".mover").each(function() {
            startMoving(this);
        });
    });
}); 
```

​ ​</p>

# facebook-graph-api - Facebook Graph API - 为什么兴趣不匹配？

> ID：10712049
> 
> 赞同：0
> 
> 时间：2012-05-23T00:45:01.927
> 
> 标签：facebook-graph-api

所以，我对这个很困惑。如果可以的话请帮忙。

假设我从 Facebook Graph API 中提取以下用户：[https ://graph.facebook.com/zeeshan949/](https://graph.facebook.com/zeeshan949/)

我得到：

```
{
   "id": "657563147",
   "name": "Zeeshan Ahmad",
   "first_name": "Zeeshan",
   "last_name": "Ahmad",
   "link": "http://www.facebook.com/zeeshan949",
   "username": "zeeshan949",
   "gender": "male",
   "locale": "en_US"
} 
```

但是......如果我退出 Facebook 并转到他的个人资料[http://www.facebook.com/zeeshan949](http://www.facebook.com/zeeshan949)我会看到他所有的兴趣。即使我退出了。

我是否缺少 Graph API 的一些基本内容？是什么赋予了？如何访问所有其他数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T01:02:47.630

这是预期的行为，并非所有用户数据（甚至是公开的）都可以通过 API 获得，而无需通过授予访问特定信息的权限来获得用户（或有时是他的朋友）的批准。

[`user`](https://developers.facebook.com/docs/reference/api/user/)有关对象和文档，请参阅[`permissions`](https://developers.facebook.com/docs/authentication/permissions/)文档。

# jquery - jQuery - 选择动态创建的 div

> ID：10712051
> 
> 赞同：4
> 
> 时间：2012-05-23T00:45:24.843
> 
> 标签：jquery

我有一个快速的 jQuery 问题：

首先，我的 HTML：

```
<div id="taskinput">
    <form>
         <input id="taskinput-box" type="text"></input>
         <input type="submit"></input>
    </form>
</div><!-- end taskinput -->
<div id="taskoutput"></div><!-- end taskoutput --> 
```

我在创建新类 .task 时使用 .append 在用户的#taskoutput 中创建内容。

```
$("#taskinput").submit(function() {
    var tasktext = $('#taskinput-box').val()
    $('#taskoutput').append('<div class="task">'+tasktext+'</div>');
    $('#taskinput-box').val("");
    return false;
}); 
```

上面的代码工作正常；当我尝试选择创建的 div 时，问题就出现了。下面的代码不起作用：

```
$(".task").click(function() {
    $(this).slideUp();
}); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T00:48:08.290

您必须使用`delegate event`like `on`：

```
$('#taskoutput').on('click', '.task', function(){
    $(this).slideUp();    
}); 
```

@salek [**DEMO**](http://jsfiddle.net/2ZmF4/3/)但有`on`

阅读[`on`文档](http://api.jquery.com/on/)：

> 事件处理程序仅绑定到当前选定的元素；当您的代码调用 .on() 时，它们必须存在于页面上。为确保元素存在并且可以被选择，请在页面 HTML 标记中的元素的文档就绪处理程序内执行事件绑定。如果将新 HTML 注入页面，请在将新 HTML 放入页面后选择元素并附加事件处理程序。或者，使用委托事件来附加事件处理程序，如下所述。
> 
> **委托事件**的优点是它们可以处理来自以后添加到文档的后代元素的事件。通过选择在附加委托事件处理程序时保证存在的元素，您可以使用委托事件来避免频繁附加和删除事件处理程序的需要。例如，该元素可以是模型-视图-控制器设计中视图的容器元素，或者如果事件处理程序想要监视文档中的所有冒泡事件，则可以是文档。在加载任何其他 HTML 之前，文档元素在文档的头部是可用的，因此在此处附加事件是安全的，而无需等待文档准备好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T00:50:23.970

`$(".task").click(...`说“找到`.task`当前存在的所有元素，并将事件处理程序绑定到它们。如果稍后创建元素，如您的示例中那样，它们将不会绑定事件处理程序。

您需要将事件处理程序绑定到将始终存在的元素。由于祖先元素被通知其后代的事件，因此单击`.task`元素将始终触发. jQuery 的方法让你很简单：`click``#taskoutput`[`on`](http://api.jquery.com/on)

```
$('#taskoutput').on('click', '.task', function(){
    $(this).slideUp();    
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T00:47:47.213

使用 jquery`.on()`在运行时生成的 HTML 上绑定事件。像这样：

```
$("#taskoutput").on({
    click: function() { $(this).slideUp(); }
}, '.task'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T00:55:48.750

你需要使用的是 live('click', function() { ...

[我在http://jsfiddle.net/2ZmF4/](http://jsfiddle.net/2ZmF4/)为你创建了一个 jsfiddle

```
$(".task").die().live('click', function() {
    $(this).slideUp();
    return false;
});​ 
```

您将需要根据您的情况决定是否需要呼叫死亡...无论如何我都把它扔在那里...

# c# - SQL Server 和 .NET 内存约束、分配和垃圾回收

> ID：10712055
> 
> 赞同：1
> 
> 时间：2012-05-23T00:46:09.120
> 
> 标签：c#, asp.net, .net, sql-server, sql-server-2005

我正在运行 .NET 3.5 (C#) 和 SQL Server 2005（针对我们的客户）。我们运行的代码做了一些回归数学，有点复杂。当我在我们的网站上运行多个页面时出现以下错误：

```
.NET Framework execution was aborted by escalation policy because of out of memory. 
System.InvalidOperationException: There is already an open DataReader associated with this Command which must be closed first.
System.InvalidOperationException: 
```

我试图找出造成这种情况的根本原因：是数据库问题还是我的 C## 代码？还是在运行查询时与锁并发？还是别的什么？

代码在这里出错：

```
erver.ScriptTimeout = 300;
        string returnCode = string.Empty;
        using (SqlConnection connection = new SqlConnection(ConfigurationManager.ConnectionStrings["MainDll"].ToString())) {
            connection.Open();
            using (SqlCommand command = new SqlCommand(sql.ToString(), connection)) {
                command.CommandType = CommandType.Text;
                command.CommandTimeout = 300;
                returnCode = (string)command.ExecuteScalar();
                //Dispose();
            }
            //Dispose();
        } 
```

我们的承包商在 App_Code/sqlHelper.s 文件中编写了一堆代码来帮助处理 SQL 连接。其中一些是这样的：

```
public static SqlDataReader GetDataReader(string sql, string connectionString, int connectionTime) {
        lock (_lock) {
            SqlConnection connection = null;
            try {
                connection = GetConnection(connectionString);
                //connection.Open();
                using (SqlCommand cmd = new SqlCommand(sql, connection)) {
                    cmd.CommandTimeout = connectionTime;
                    WriteDebugInfo("GetDataReader", sql);
                    return cmd.ExecuteReader(CommandBehavior.CloseConnection);
                }
            }
            catch (Exception e) {
                if (connection != null)
                    connection.Dispose();
                throw new DataException(sql, connectionString, e);
            }

        }
    } 
```

是否应该在某处释放一些内存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T01:30:39.037

问题是，由于某种原因，您的 DataReader 没有被关闭。例外？用户不记得关闭 DataReader 的方法？

返回要在其主体外部使用的 DataReader 的函数将关闭它的责任留给外部代码，因此不能保证 Reader 将被关闭。如果您不关闭阅读器，则无法重用打开阅读器的连接。

**因此，从函数返回 DataReader 是一个非常糟糕的主意！**

[您可以在此处](https://stackoverflow.com/questions/10506919/closing-sqldatareaders-how-to-tell-if-they-are-closed/10507254#10507254)查看有关此主题的完整讨论。

查找此函数 ( `GetDataReader`) 的用法，并检查是否可以保证阅读器已关闭。而且，最重要的是，这段代码不可能在第一个关闭之前重新进入并使用同一个集合打开一个新的 DataReader。（不要被 CommandBehavior.CloseConnection 误导。这只在关闭 DataReader 时负责关闭连接......只有在您没有关闭它的情况下）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T05:20:28.450

这是因为您的数据阅读器已经填写完毕。在 finally 块中释放数据阅读器、命令、数据集、数据表并关闭连接总是更好的方法。利用 Dispose() 和 Close() 方法。

# php - 从表单添加 URL 到正则表达式

> ID：10712057
> 
> 赞同：0
> 
> 时间：2012-05-23T00:46:21.570
> 
> 标签：php, regex, forms

我有一个简单的（我的意思是简单的）正则表达式代码，它从雅虎中提取引号。

我想要的是能够有一个输入框，用用户输入的任何内容替换 url。因此，如果用户想查看 fb 的股票报价，用户将在表单字段中输入它并点击 go，然后要获取的 URL 将更改为用户输入。

只有 3 个用户使用该 url。

这是我的代码：

```
<?php
$content = file_get_contents('http://finance.yahoo.com/q?s=fb&ql=1');
$fb = file_get_contents('http://www.cbssports.com/mlb/teams/page/BOS/boston-red-sox');
$wod = file_get_contents('http://www.wordthink.com');
$ath = file_get_contents('http://finance.yahoo.com/q?s=ATHN');

preg_match('/<span id="yfs_l84_fb">(.*?)<\/span> <\/span>/i', $content, $match);
$price = $match[1];

preg_match('/<span id="yfs_l84_athn">(.*?)<\/span> <\/span>/i', $ath, $match);
$athp = $match[1];

preg_match('#<span id="yfs_l86_fb">(.*)</span></span></p></div>#', $content, $match);
$after = $match[1];

preg_match('/<table class="data" width="100%" >(.*?)<\/b><\/td><\/tr><\/table>/i', $fb,           $match);
$fbs = $match[1];

preg_match('/<b>(.*?)<\/b>/', $wod, $match);
$wod1 = $match[1];
preg_match('/<i>(.*?)<\/p>/', $wod, $match);
$wod2 = $match[1];

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:55:27.063

在此替换 url

```
file_get_contents('http://finance.yahoo.com/q?s=CHANGEGOESHERE&ql=1'); 
```

# titanium-modules - Titanium 的 ALAsset 模块在模拟器上工作但在设备上崩溃有任何提示吗？

> ID：10712061
> 
> 赞同：0
> 
> 时间：2012-05-23T00:47:06.890
> 
> 标签：titanium-modules

我分叉了这个很棒的 Titanium 模块来访问 ALAsset。 [https://github.com/amigoni/titanium-mobile-alasset-module](https://github.com/amigoni/titanium-mobile-alasset-module)

我正在尝试访问图片数据和信息。它似乎在模拟器中工作正常，但在设备上却不行。

这是我怀疑代码的地方

```
-(void)assetThumbnails:(id)args
{
ENSURE_UI_THREAD_1_ARG(args);
ENSURE_SINGLE_ARG(args,NSDictionary);

id onthumb       = [args objectForKey:@"thumbnailCallback"];
NSString *group = [args objectForKey:@"group"];
ENSURE_STRING_OR_NIL(group);
int page        = [TiUtils intValue:[args objectForKey:@"page"] def:1] - 1;
int perPage     = [TiUtils intValue:[args objectForKey:@"perPage"] def:25];

int fromIndex   = page * perPage;
int toIndex     = fromIndex + perPage;

NSUInteger groupTypes = ALAssetsGroupSavedPhotos;
if( group == nil ){
    group = @"savedPhotos";
}
if( [group isEqualToString:@"savedPhotos"] ){
    groupTypes  = ALAssetsGroupSavedPhotos;
} else if( [group isEqualToString:@"photoStream"] ){
    groupTypes  = ALAssetsGroupPhotoStream;
} else if( [group isEqualToString:@"faces"] ){
    groupTypes  = ALAssetsGroupFaces;
} else if( [group isEqualToString:@"all"] ){
    groupTypes  = ALAssetsGroupAll;
}
NSMutableArray *assets  = [[NSMutableArray alloc] init];
RELEASE_TO_NIL(thumbCallback);
thumbCallback  = [onthumb retain];
void (^assetGroupEnumerator) (ALAssetsGroup *, BOOL *) = ^(ALAssetsGroup *group, BOOL *stop){
    if(group != nil) {
        [group enumerateAssetsUsingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop) {
            if( result != nil )
            {
                if( (index >= fromIndex) && (index <= toIndex) ){
                    NSURL *url = [[result defaultRepresentation] url];
                    NSString *sUrl = [url absoluteString];
                    NSDictionary *metadata = result.defaultRepresentation.metadata; 
                        UIImage *thumbnail = [UIImage imageWithCGImage:[result thumbnail]];
                        NSDictionary *event = [NSDictionary 
                                               dictionaryWithObjectsAndKeys:
                                               [[[TiBlob alloc] initWithImage:thumbnail] autorelease],
                                               @"thumbnail",
                                               NUMINT(index),
                                               @"index",
                                               sUrl,
                                               @"url",
                                               metadata,
                                               @"metadata",
                                               nil];
                        [assets addObject:event];
                }
            } else {
                if (thumbCallback!=nil)
                {
                    NSDictionary *event = [NSDictionary dictionaryWithObjectsAndKeys:assets,@"assets", nil];
                    [self _fireEventToListener:@"onThumbnail" withObject:event listener:thumbCallback thisObject:nil];
                    [assets release];
                }
            }
        }];
    }
};

ALAssetsLibrary *library = [[ALAssetsLibrary alloc] init];

[library enumerateGroupsWithTypes:groupTypes
                       usingBlock:assetGroupEnumerator
                     failureBlock:^(NSError *error) {}];
[library release];
} 
```

有趣的是，在第 26 项之后，代码似乎崩溃了。正如您从上面的代码中看到的那样，它将是第二页的第一页。

我真的不太了解Objective C，正在寻求帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T05:19:53.813

也许 [发布资产] 会引发异常。我的情况就是这样。

在分配资产时， [[[NSMutableArray alloc] init] autorelease] 并删除该行；不会引发异常。

# php - PHP：从文件中的某个点读取

> ID：10712063
> 
> 赞同：5
> 
> 时间：2012-05-23T00:47:35.923
> 
> 标签：php, file, pagination, fseek

类似于：[如何在 PHP 中只读取文本文件的最后 5 行？](https://stackoverflow.com/questions/2961618/how-to-read-only-5-last-line-of-the-txt-file/10711998#10711998)

我有一个很大的日志文件，我希望能够从文件中的位置 X 显示 100 行。我需要使用`fseek`而不是`file()`因为日志文件太大。

我有一个类似的功能，但它只会从文件末尾读取。如何修改它以便也可以指定起始位置？我还需要从文件末尾开始。

```
function read_line($filename, $lines, $revers = false)
{
    $offset = -1;
    $i = 0;
    $fp = @fopen($filename, "r");
    while( $lines && fseek($fp, $offset, SEEK_END) >= 0 ) {
        $c = fgetc($fp);
        if($c == "\n" || $c == "\r"){
            $lines--;
            if($revers){
                $read[$i] = strrev($read[$i]);
                $i++;
            }
        }
        if($revers) $read[$i] .= $c;
        else $read .= $c;
        $offset--;
    }
    fclose ($fp);
    if($revers){
        if($read[$i] == "\n" || $read[$i] == "\r")
            array_pop($read);
        else $read[$i] = strrev($read[$i]);
        return implode('',$read);
    }
    return strrev(rtrim($read,"\n\r"));
} 
```

我要做的是创建一个基于 Web 的日志查看器，它将从文件末尾开始并显示 100 行，当按下“下一步”按钮时，将显示其前面的下 100 行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T02:30:37.323

如果您使用的是 Unix，则可以使用该`sed`工具。例如：从文件中获取第 10-20 行：

```
 sed -n 10,20p errors.log 
```

您可以在脚本中执行此操作：

```
<?php
$page  = 1;
$limit = 100;
$off   = ($page * $limit) - ($limit - 1);

exec("sed -n $off,".($limit+$off-1)."p errors.log", $out);
print_r($out); 
```

这些行以`$out`数组形式提供。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T02:36:55.073

这用于`fseek`从指定的偏移量开始读取文件的 100 行。如果偏移量大于日志中的行数，则读取前 100 行。

*在您的应用程序中，您可以通过prev*和*next*的查询字符串传递当前偏移量，并以此为基础设置下一个偏移量。您还可以存储和传递当前文件位置以提高效率。

```
<?php

$GLOBALS["interval"] = 100;

read_log();

function read_log()
{
   $fp = fopen("log", "r");
   $offset = determine_offset();
   $interval = $GLOBALS["interval"];
   if (seek_to_offset($fp, $offset) != -1)
   {
      show_next_button($offset, $interval);
   }
   $lines = array();
   for ($ii = 0; $ii < $interval; $ii++)
   {
      $lines[] = trim(fgets($fp));
   }
   echo "<pre>";
   print_r(array_reverse($lines));
}

// Get the offset from the query string or default to the interval
function determine_offset()
{
   $interval = $GLOBALS["interval"];
   if (isset($_GET["offset"]))
   {
      return intval($_GET["offset"]) + $interval;
   }
   return $interval;
}

function show_next_button($offset, $interval)
{
   $next_offset = $offset + $interval;
   echo "<a href=\"?offset=" . $offset . "\">Next</a>";
}

// Seek to the end of the file, then seek backward $offset lines
function seek_to_offset($fp, $offset)
{
   fseek($fp, 0, SEEK_END);
   for ($ii = 0; $ii < $offset; $ii++)
   {
      if (seek_to_previous_line($fp) == -1)
      {
         rewind($fp);
         return -1;
      }
   }
}

// Seek backward by char until line break
function seek_to_previous_line($fp)
{
   fseek($fp, -2, SEEK_CUR);
   while (fgetc($fp) != "\n")
   {
      if (fseek($fp, -2, SEEK_CUR) == -1)
      {
         return -1;
      }
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T01:04:55.583

我会这样做：

```
function readFileFunc($tempFile){
    if(@!file_exists($tempFile)){
        return FALSE;
    }else{
        return file($tempFile);
    }
}
$textArray = readFileFunc('./data/yourTextfile.txt');
$slicePos = count($textArray)-101;
if($slicePos < 0){
    $slicePos = 0;  
}
$last100 = array_slice($textArray, $slicePos);
$last100 = implode('<br />', $last100);
echo $last100; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T01:54:23.993

“位置 X”是以行还是字节来衡量的？如果是行，您可以轻松地使用 SplFileObject 查找到某一行，然后读取 100 行：

```
$file = new SplFileObject('log.txt');
$file->seek(199); // go to line 200

for($i = 0; $i < 100 and $file->valid(); $i++, $file->next())
{
    echo $file->current();
} 
```

如果位置 X 以字节为单位，将初始值更改`$offset = -1`为不同的值不是一件简单的事情吗？

# antlr - 如何在没有回溯的情况下同时进行函数调用和括号分组

> ID：10712068
> 
> 赞同：2
> 
> 时间：2012-05-23T00:48:00.380
> 
> 标签：antlr, antlr3

有没有办法指定允许以下语法的语法：

```
f(x)(g, (1-(-2))*3, 1+2*3)[0] 
```

它被转换为（在伪lisp中显示顺序）：

```
(index 
  ((f x)
    g 
    (* (- 1 -2) 3)
    (+ (* 2 3) 1)
  ) 
  0
) 
```

以及有限的运算符优先级等。

* * *

以下语法适用于 backtrack = true，但我想避免这种情况：

```
grammar T;

options {
 output=AST;
 backtrack=true;
 memoize=true;
}

tokens {
  CALL;
  INDEX;
  LOOKUP;
}

prog: (expr '\n')* ;

expr : boolExpr;

boolExpr
 : relExpr (boolop^ relExpr)?
 ;

relExpr
 : addExpr (relop^ addExpr)?
 | a=addExpr oa=relop b=addExpr ob=relop c=addExpr
   -> ^(LAND ^($oa $a $b) ^($ob $b $c))
 ;

addExpr
 : mulExpr (addop^ mulExpr)?
 ;

mulExpr
 : atomExpr (mulop^ atomExpr)?
 ;

atomExpr
 : INT
 | ID
 | OPAREN expr CPAREN -> expr
 | call
 ;

call
 : callable ( OPAREN (expr (COMMA expr)*)? CPAREN -> ^(CALL callable expr*)
            | OBRACK expr CBRACK -> ^(INDEX callable expr)
            | DOT ID -> ^(INDEX callable ID)
            )
 ;

fragment
callable
 : ID
 | OPAREN expr CPAREN
 ;

fragment
boolop
 : LAND | LOR
 ;

fragment
relop
 : (EQ|GT|LT|GTE|LTE)
 ;

fragment
addop
 : (PLUS|MINUS)
 ;

fragment
mulop
 : (TIMES|DIVIDE)
 ;

EQ : '==' ;
GT : '>' ;
LT : '<' ;
GTE : '>=' ;
LTE : '<=' ;

LAND : '&&' ;
LOR : '||' ;

PLUS : '+' ;
MINUS : '-' ;
TIMES : '*' ;
DIVIDE : '/' ;

ID : ('a'..'z')+ ;
INT : '0'..'9' ;

OPAREN : '(' ;
CPAREN : ')' ;
OBRACK : '[' ;
CBRACK : ']' ;
DOT : '.' ;

COMMA : ',' ; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T18:48:36.463

你的语法有几个问题：

## 1

只有词法分析器规则可以是`fragment`s，而不是解析器规则。一些 ANTLR 目标只是忽略解析器规则前面的片段关键字（如 Java 目标），但最好将它们从语法中删除：如果您决定为不同的目标语言创建解析器，您可能会遇到问题，因为它。

## 2

没有`backtrack=true`，您不能混合使用树重写运算符 (`^`和`!`)*和*重写规则 ( `->`)，因为您需要在内部创建一个备选方案，`relExpr`而不是现在拥有的两个备选方案（这是为了消除歧义）。

在您的情况下，您无法仅使用`^`（在单个替代方案中）创建所需的 AST，因此您需要这样做：

```
relExpr
 : (a=addExpr -> $a) ( (oa=relOp b=addExpr    -> ^($oa $a $b))
                         ( ob=relOp c=addExpr -> ^(LAND ^($oa $a $b) ^($ob $b $c))
                         )?
                     )?
 ; 
```

*（是的，我知道，它不是特别漂亮，但这不能帮助 AFAIK）*

`LAND`此外，如果它在`tokens { ... }`块中定义，您只能将令牌放入重写规则中：

```
tokens {
  // literal tokens
  LAND='&&';
  ...

  // imaginary tokens
  CALL;
  ...
} 
```

否则，如果令牌（和其他解析器规则）确实出现在解析器规则本身内，则只能在重写规则中使用它们。

## 3

您没有考虑语法中的一元减号，请按如下方式实现：

```
mulExpr
 : unaryExpr ((TIMES | DIVIDE)^ unaryExpr)*
 ;

unaryExpr
 : MINUS atomExpr -> ^(UNARY_MINUS atomExpr)
 | atomExpr
 ; 
```

* * *

现在，要创建不需要的语法，请从规则`backtrack=true`中删除`ID`and ：`'(' expr ')'``atomExpr`

```
atomExpr
 : INT
 | call
 ; 
```

并在您的规则中使所有传递的内容都是`callable`可选的：`call`

```
call
 : (callable -> callable) ( OPAREN params CPAREN -> ^(CALL $call params)
                          | OBRACK expr CBRACK   -> ^(INDEX $call expr)
                          | DOT ID               -> ^(INDEX $call ID)
                          )*
 ; 
```

这样，`ID`并且`'(' expr ')'`已经匹配`call`（并且没有歧义）。

* * *

考虑到上述所有注释，您可以得到以下语法：

```
grammar T;

options {
  output=AST;
}

tokens {
 // literal tokens
 EQ     = '==' ;
 GT     = '>' ;
 LT     = '<' ;
 GTE    = '>=' ;
 LTE    = '<=' ;
 LAND   = '&&' ;
 LOR    = '||' ;
 PLUS   = '+' ;
 MINUS  = '-' ;
 TIMES  = '*' ;
 DIVIDE = '/' ;
 OPAREN = '(' ;
 CPAREN = ')' ;
 OBRACK = '[' ;
 CBRACK = ']' ;
 DOT    = '.' ;
 COMMA  = ',' ;

 // imaginary tokens
 CALL;
 INDEX;
 LOOKUP;
 UNARY_MINUS;
 PARAMS;
}

prog
 : expr EOF -> expr
 ;

expr
 : boolExpr
 ;

boolExpr
 : relExpr ((LAND | LOR)^ relExpr)?
 ;

relExpr
 : (a=addExpr -> $a) ( (oa=relOp b=addExpr    -> ^($oa $a $b))
                         ( ob=relOp c=addExpr -> ^(LAND ^($oa $a $b) ^($ob $b $c))
                         )?
                     )?
 ;

addExpr
 : mulExpr ((PLUS | MINUS)^ mulExpr)*
 ;

mulExpr
 : unaryExpr ((TIMES | DIVIDE)^ unaryExpr)*
 ;

unaryExpr
 : MINUS atomExpr -> ^(UNARY_MINUS atomExpr)
 | atomExpr
 ;

atomExpr
 : INT
 | call
 ;

call
 : (callable -> callable) ( OPAREN params CPAREN -> ^(CALL $call params)
                          | OBRACK expr CBRACK   -> ^(INDEX $call expr)
                          | DOT ID               -> ^(INDEX $call ID)
                          )*
 ;

callable
 : ID
 | OPAREN expr CPAREN -> expr
 ;

params
 : (expr (COMMA expr)*)? -> ^(PARAMS expr*)
 ;

relOp
 : EQ | GT | LT | GTE | LTE
 ;

ID     : 'a'..'z'+ ;
INT    : '0'..'9'+ ;
SPACE  : (' ' | '\t') {skip();}; 
```

这会将输入解析`"a >= b < c"`为以下 AST：

![在此处输入图像描述](../Images/b09ffcc1083c624be44d19790f40ef0c.png)

输入`"f(x)(g, (1-(-2))*3, 1+2*3)[0]"`如下：

![在此处输入图像描述](../Images/1caaa2ef0ffe9d69fa015e7b8165b519.png)

# c++ - c ++查找没有FindWindow函数的进程句柄

> ID：10712072
> 
> 赞同：2
> 
> 时间：2012-05-23T00:48:19.820
> 
> 标签：c++, handle, findwindow

我试图找到进程句柄，

```
HWND handle = FindWindow(0 ,TEXT("window title")); 
```

我需要窗口标题
假设我有两个具有相同标题的进程，
所以我想做类似的东西：

```
for each p as process in process.getProcessByName("notepad")

if process.processname = "notepad" then

handle = p.handle

exit for

end if

next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T01:07:13.227

您必须自己枚举正在运行的进程以手动查找名称。您可以使用以下任一方法执行此操作：

1) `CreateToolhelp32Snapshot()`、`Process32First()`和`Process32Next()`。有关示例，请参见 MSDN：

[拍摄快照并查看流程](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686701.aspx)

2 ) `EnumProcesses()`、`OpenProcess()`和`EnumProcessModules()`。`GetModuleBaseName()`有关示例，请参见 MSDN：

[枚举所有进程](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682623.aspx)

3) 使用 WMI 枚举`Win32_Process`集合中的项目。

# ruby-on-rails - 在 Rails 引擎视图中缺少设计路线助手

> ID：10712074
> 
> 赞同：9
> 
> 时间：2012-05-23T00:48:47.733
> 
> 标签：ruby-on-rails, devise, rails-engines

我正在构建一个名为 Engrave 的 Rails 引擎。

我的引擎是这样安装的：

```
# Routes.rb of the host app
mount Engrave::Engine => "/engrave", :as => "engrave_engine" 
```

在这个引擎中，我有一个名为“PostsController”的控制器。当我导航到此控制器以查看这样的帖子时：`/engrave/posts/1`我收到此错误：

```
undefined local variable or method `new_user_session_path' 
```

引擎中的 PostsController 继承自引擎控制器，引擎控制器继承自应用程序控制器，如下所示：

```
module Engrave
  class PostsController < ApplicationController
  ...
end

class Engrave::ApplicationController < ApplicationController
end 
```

new_user_session_path 由 devise 定义，我的设置如下：

```
devise_for :users 
```

对 new_user_session_path 的调用位于**主机应用程序**`layouts/application.html.erb`的模板文件中

 **我无法弄清楚为什么这个路线助手在这种情况下不可用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-28T15:01:37.730

采用

main_app.new_user_session_path

那应该工作

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-11T21:02:06.033

我在主应用程序的 application_helper.rb 中成功执行了以下操作：

```
module ApplicationHelper
  # Can search for named routes directly in the main app, omitting
  # the "main_app." prefix
  def method_missing method, *args, &block
    if main_app_url_helper?(method)
      main_app.send(method, *args)
    else
      super
    end
  end

  def respond_to?(method)
    main_app_url_helper?(method) or super
  end

 private

  def main_app_url_helper?(method)
    (method.to_s.end_with?('_path') or method.to_s.end_with?('_url')) and
      main_app.respond_to?(method)
  end
end 
```

我已经在可安装的引擎中使用了它，因此您不必牺牲这些功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-23T03:17:40.703

根据[这个响应](https://stackoverflow.com/questions/6328203/rails-undefined-method-when-invoking-a-helper-method-from-layout-view#comment7401450_6328487)，我通过在控制器内部声明来包含在 application_helpers.rb 中找到的所有帮助程序`helper "manager/application"`（如果“manager”是可挂载引擎的当前命名空间。如果您从标准应用程序调用它，只需使用“application”）。**

# java - 解析数据时出错无法将字符串转换为 JSON-JSONException

> ID：10712077
> 
> 赞同：0
> 
> 时间：2012-05-23T00:49:21.987
> 
> 标签：java, php, android, mysql, json

我在解析从服务器获得的数据时遇到错误。我试图通过向外部数据库（MySQL）发送一些值来更新外部数据库。更新数据库后，我将尝试获取更新的值并对内部 SQLite 数据库执行更新。

我正在为这个问题发布相关代码。此外，我已经标记了我在 profile.java 类中遇到错误的地方，我正在尝试检索 JSON。

在注册用户后检索数据时，我没有收到与数据解析相关的错误。就这一次更新。

此外，外部数据库没有得到更新。

是的，在发布这个问题之前我已经做了足够的研究。我没有发现任何人或任何主题有同样的问题，这就是我发布这个问题的原因。

更新：我让它工作问题是我将标签设置为变量而不是 index.php 中的值。我在做 tag="$profile" 而不是 tag='profile'。目前我成功更新了一个专栏。一旦我成功更新所有专栏，我将再次更新这篇文章。谢谢大家的宝贵意见。

下面是profile.java的代码

```
public void onClick(View v) {
    switch (v.getId()) {
    case R.id.b_profileSave:
        String email = email_et.getText().toString();
        String name = username_tt.getText().toString();
        String fullname = fullname_et.getText().toString();
        String dob = dob_et.getText().toString();
        String phone = phone_et.getText().toString();
        String address = address_et.getText().toString();
        String city = city_et.getText().toString();
        String state = state_et.getText().toString();
        String country = country_et.getText().toString();
        String zipcode = zipcode_et.getText().toString();
        UserFunctions userFunction = new UserFunctions();
//IM GETTING ERROR AT THIS POINT
        JSONObject json = userFunction.updateProfile(email, fullname, dob,
                phone, address, city, state, country, zipcode);
        System.out.println(json);
                    ....} 
```

下面是我的 UserFunction 类的代码，该类具有 profile 方法，该方法负责从服务器发送数据和检索 JSON：

```
public JSONObject updateProfile(String email, String fullname, String dob,
        String phone, String address, String city, String state,
        String country, String zipcode) {
    List<NameValuePair> params = new ArrayList<NameValuePair>();
    params.add(new BasicNameValuePair("tag", profile_tag));
    params.add(new BasicNameValuePair("email", email));
    params.add(new BasicNameValuePair("full_name", fullname));
    params.add(new BasicNameValuePair("birth_date", dob));
    params.add(new BasicNameValuePair("phone", phone));
    params.add(new BasicNameValuePair("address", address));
    params.add(new BasicNameValuePair("city", city));
    params.add(new BasicNameValuePair("state", state));
    params.add(new BasicNameValuePair("country", country));
    params.add(new BasicNameValuePair("zip", zipcode));
    JSONObject json = jsonParser.getJSONFromUrl(profileURL, params);
    System.out.println(params);
    Log.e("JSON", json.toString());
    return json;
} 
```

下面是负责解析数据的 JSONParse.java 类的代码：

```
public class JSONParser {

static InputStream is = null;
static JSONObject jObj = null;
static String json = "";

// constructor
public JSONParser() {

}

public JSONObject getJSONFromUrl(String url, List<NameValuePair> params) {

    // Making HTTP request
    try {
        // defaultHttpClient
        DefaultHttpClient httpClient = new DefaultHttpClient();
        HttpPost httpPost = new HttpPost(url);
        httpPost.setEntity(new UrlEncodedFormEntity(params));
        HttpResponse httpResponse = httpClient.execute(httpPost);
        HttpEntity httpEntity = httpResponse.getEntity();
        is = httpEntity.getContent();

    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } catch (ClientProtocolException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    try {
        BufferedReader reader = new BufferedReader(new InputStreamReader(
                is, "iso-8859-1"), 8);
        StringBuilder sb = new StringBuilder();
        String line = null;
        while ((line = reader.readLine()) != null) {
            sb.append(line);
        }
        is.close();
        json = sb.toString();
        Log.e("JSON", json);
    } catch (Exception e) {
        Log.e("Buffer Error", "Error converting result " + e.toString());
    }

    // try parse the string to a JSON object
    try {
        jObj = new JSONObject(json);
    } catch (JSONException e) {
        Log.e("JSON Parser", "Error parsing data " + e.toString());
    }

    // return JSON String
    return jObj;

}
} 
```

下面是我的 index.php 的代码，其中 POST 和 GET 数据

```
else if ($tag == '$profile'){
    $email = $_POST['email'];
    $fullname = $_POST['full_name'];
    $dob = $_POST['birth_date'];
    $phone = $_POST['phone'];
    $address = $_POST['address'];
    $city = $_POST['city'];
    $state = $_POST['state'];
    $country = $_POST['country'];
    $zipcode = $_POST['zip'];
    $user = $db->profile($name, $fullname, $dob, $phone, $address, $city, $state, $country, $zipcode);
        if($user){
            $response["success"] = 1;
            $response["uid"] = $user["unique_id"];
            $response["user"]["name"] = $user["name"];
            $response["user"]["email"] = $user["email"];
            $response["user"]["created_at"] = $user["created_at"];
            $response["user"]["updated_at"] = $user["updated_at"];
            $response["user"]["full_name"] = $user["full_name"];
            $response["user"]["birth_date"] = $user["birth_date"];
            $response["user"]["phone"] = $user["phone"];
            $response["user"]["address"] = $user["address"];
            $response["user"]["city"] = $user["city"];
            $response["user"]["state"] = $user["state"];
            $response["user"]["country"] = $user["country"];
            $response["user"]["zip"] = $user["zip"];
        echo json_encode($response);
        }else{
            $response["error"] =1;
            $response["error_msg"] = "Error updating profile";
            echo json_encode($response);
            } 
            } else {
    echo "Invalid Request";
} 
```

下面是对数据库执行查询的 DB_Functions.php 代码：

```
public function profile($email, $fullname, $dob, $phone, $address, $city, $state, $country, $zipcode){
    $result = mysql_query("UPDATE users SET updated_at = NOW(), full_name = '$fullname', birth_date = '$dob', phone = '$phone', address = '$address', city = '$city', state = '$state', country = '$country', zip = '$zipcode' WHERE email = '$email'") or die(mysql_error());
    if($result){
        $r = mysql_query("SELECT * FROM users WHERE email = '$email'");
        return mysql_fetch_array($r); 
    }else{
        return false;}
} 
```

我的 logcat 输出：

```
05-23 03:01:03.938: E/JSON(393): Invalid Request
05-23 03:01:03.938: E/JSON Parser(393): Error parsing data org.json.JSONException: Value Invalid of type java.lang.String cannot be converted to JSONObject

E/JSON(393): 

{
    "uid": "4fb32016d06af1.89812745",
    "error": 0,
    "user": {
        "zip": null,
        "phone": null,
        "upda‌​ted_at": null,
        "birth_date": null,
        "address": null,
        "email": "vvp@gmail.com",
        "name": "vik‌​ing",
        "state": null,
        "created_at": "2012-05-15 20:33:42",
        "country": null,
        "city": null,
        "full_name": null
    },
    "success": 1,
    "tag": "login"‌​
} 
```

# c++ - 用非虚函数覆盖虚函数

> ID：10712079
> 
> 赞同：4
> 
> 时间：2012-05-23T00:49:32.613
> 
> 标签：c++

我有头文件“testcode.h”

```
#ifndef TESTCODE_H
#define TESTCODE_H

class A
{
public:
    A();
    ~A();
    virtual void Foo();

public:
    int mPublic;

protected:
    int mProtected;

private:
    int mPrivate;
};

class B : public A
{
public:
    B();
    ~B();
    void Foo();
};

#endif // TESTCODE_H 
```

和一个源文件

```
#include "TestCode.h"

int main(int argc, char* argv[])
{
    A* b = new B();
    b->Foo();

    b->mPublic = 0;
    b->mProtected = 0;
    b->mPrivate = 0;

    delete b;

    return 0;
} 
```

在这里，我想知道当我调用“b->Foo”时，调用的是 B 类的 Foo 函数而不是 A 类。但是，B 类的 Foo 函数没有声明为虚拟函数。谁能详细说明这个？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T00:55:04.483

`virtual`一旦一个函数在基类中被声明为虚函数，在派生类的函数中是否使用关键字就无关紧要了。它在派生类中始终是虚拟的（无论是否如此声明）。

从 C++11 标准 10.3.2 开始：

> 如果虚成员函数 vf 在类 Base 和 Derived 类中声明，直接或间接从 Base 派生，则具有相同名称、参数类型列表 (8.3.5)、cv-qualification 和声明了 Base::vf 的 refqualifier（或没有相同的），然后 Derived::vf 也是虚拟的（无论它是否如此声明）并且它覆盖 Base::vf。...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T00:55:14.433

`B::Foo`不需要声明为虚拟的——事实上`A::Foo`是虚拟的并且 B 从 A 派生意味着它是虚拟的（并且被覆盖）。查看有关虚拟功能的[msdn 文章了解更多信息。](http://msdn.microsoft.com/en-us/library/0y01k918%28v=vs.100%29.aspx)

# drupal - 如何让我的 Drupal 页面的打印版本显示在 Google 的搜索结果中？

> ID：10712087
> 
> 赞同：0
> 
> 时间：2012-05-23T00:50:30.787
> 
> 标签：drupal, seo, google-search

当我使用 Google 搜索我自己的 Drupal 站点时，我经常在结果中得到页面的打印版本，而不是非打印版本。

任何想法为什么会发生这种情况以及如何防止它？

例如，谷歌以下内容：仅版本 site:community.screen-scraper.com

至少结果的第一页包含指向页面打印版本的链接。URL 的显着特征是“导出”的存在。

*我确实启用了干净的 URL。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T00:57:57.037

将 rel=nofollow 添加到您的打印版本的链接中。您还应该考虑设置锥形 url，例如 [http://drupal.org/project/nodewords](http://drupal.org/project/nodewords)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T01:11:20.793

除了上述内容之外，您还可以向违规页面添加一个 noindex 元标记（通过将元标记注入“打印”页面的标题），并整理出您不希望使用 robots.txt 索引的页面文件。

尝试这些链接以获取更多信息：

（元标记）[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=79812](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=79812)

（机器人）[http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156449](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156449)

# php - Silverstripe Site Search for DataObjects as Pages - 第 2 部分教程

> ID：10712089
> 
> 赞同：0
> 
> 时间：2012-05-23T00:50:37.760
> 
> 标签：php, search, silverstripe

去年年底，我使用[DataObjects as Pages - Part 2](http://www.ssbits.com/tutorials/2010/dataobjects-as-pages-part-2-using-model-admin-and-url-segments-to-create-a-product-catalogue/) Silverstripe 制作了一个产品站点，该站点现已上线，我需要为该站点实现站点搜索功能。

我实现了一个像[Tutorial 4 - Site Search](http://doc.silverstripe.org/sapphire/en/tutorials/4-site-search)这样的搜索功能，但是这不适用于产品搜索，因为每个产品都是一个数据对象而不是一个页面。

谁能阐明我如何使网站搜索适用于产品？

我知道有一个[教程 3 DataObject as Pages](http://www.ssbits.com/tutorials/2012/dataobject-as-pages-the-module/)我试过了，但它弄乱了我所有现有的产品以及产品的一些额外的现有功能。有人建议[http://silverstripe.org/all-other-modules/show/6641?start=24](http://silverstripe.org/all-other-modules/show/6641?start=24) 但到目前为止没有成功。

任何有关如何为产品执行搜索功能的帮助表示赞赏。

谢谢。

这是我的`Product.php`代码

```
<?php

class Product extends DataObject
{
    static $db = array(
        'Title' => 'Varchar(255)',
        'Description' => 'HTMLText',
        'Price' => 'Decimal(6,2)',
        'URLSegment' => 'Varchar(255)'
    );

    //Set our defaults
    static $defaults = array(  
        'Title' => 'New Product',
        'URLSegment' => 'new-product'
    );

    static $has_one = array(
        'Image' => 'Image',
        'PDF' => 'File' 
    );

    //Relate to the category pages
    static $belongs_many_many = array(
        'Categories' => 'CategoryPage'
    );

    //Fields to show in ModelAdmin table
    static $summary_fields = array(
        'Title' => 'Title',
        'URLSegment' => 'URLSegment',
        'Price' => 'Price (&pound;)'
    ); 

    //Add an SQL index for the URLSegment
    static $indexes = array(
        "URLSegment" => true
    );  

    //Fields to search in ModelAdmin
    static $searchable_fields = array (
        'Title',
        'URLSegment',
        'Description',
        'Categories.ID' => array(
            'title' => 'Category'
        )
    );

    function getCMSFields()
    {

        $fields = parent::getCMSFields();

        //Main Tab
        $fields->addFieldToTab("Root.Main", new TextField('Title', 'Title'));   
        $fields->addFieldToTab("Root.Main", new TextField('URLSegment', 'URL Segment'));
        $fields->addFieldToTab("Root.Main", new NumericField('Price'));
        $fields->addFieldToTab("Root.Main", new HTMLEditorField('Description'));

        //added below for the ordering
        $Categories = DataObject::get('CategoryPage');
        $map = $Categories->map('ID', 'CheckboxSummary');
        asort($map);
        $fields->addFieldToTab("Root.Categories", new CheckboxsetField('Categories', 'Categories', $map));

        //Images
        $fields->addFieldToTab("Root.Images", new ImageField('Image', 'Image', Null, Null, Null, 'Uploads/category_banners'));

        $fields->addFieldToTab("Root.Files", new FileIFrameField('PDF'));

        return $fields;
    }

    //Set URLSegment to be unique on write
    function onBeforeWrite()
    {      
        // If there is no URLSegment set, generate one from Title
        if((!$this->URLSegment || $this->URLSegment == 'new-product') && $this->Title != 'New Product')
        {
            $this->URLSegment = SiteTree::generateURLSegment($this->Title);
        }
        else if($this->isChanged('URLSegment'))
        {
            // Make sure the URLSegment is valid for use in a URL
            $segment = preg_replace('/[^A-Za-z0-9]+/','-',$this->URLSegment);
            $segment = preg_replace('/-+/','-',$segment);

            // If after sanitising there is no URLSegment, give it a reasonable default
            if(!$segment) {
                $segment = "product-$this->ID";
            }

            $this->URLSegment = $segment;

        }

        // Ensure that this object has a non-conflicting URLSegment value.
        $count = 2;
        while($this->LookForExistingURLSegment($this->URLSegment))
        {

            $this->URLSegment = preg_replace('/-[0-9]+$/', null, $this->URLSegment) . '-' . $count;
            $count++;

        }

        parent::onBeforeWrite();

    }

    //Test whether the URLSegment exists already on another Product
    function LookForExistingURLSegment($URLSegment)
    {

        return (DataObject::get_one('Product', "URLSegment = '" . $URLSegment ."' AND ID != " . $this->ID));

    }

    //Generate the link for this product

    function Link()
    {
        //if we are on a category page return that
        if(Director::CurrentPage()->ClassName == 'CategoryPage')
        {
            $Category = Director::CurrentPage();
        }
        //Otherwise just grab the first category this product is in
        else
        {
            $Category = $this->Categories()->First();
        }  

        //Check we have a category then return the link
        if($Category)
        {
            return $Category->absoluteLink() . 'show/' . $this->URLSegment;      
        }

    }

    //Return the Title as a menu title
    public function MenuTitle()
    {
        return $this->Title;
    }

    function canView() {
        return true;
    }

    public function LinkingMode()   
    {
        //Check that we have a controller to work with and that it is a StaffPage
        if(Controller::CurrentPage() && Controller::CurrentPage()->ClassName == 'CategoryPage')
        {
            //check that the action is 'show' and that we have a StaffMember to work with
            if(Controller::CurrentPage()->getAction() == 'show' && $Product = Controller::CurrentPage()->getCurrentProduct())
            {
                //If the current StaffMember is the same as this return 'current' class
                return ($Product->ID == $this->ID) ? 'current' : 'link';
            }
        }
    }
} 
```

这是我的 CategoryPage.php

```
<?php

class CategoryPage extends Page
{

    static $has_one = array(
        'CategoryBanner' => 'Image',
        'Photo' => 'Image'  
    );

    static $many_many = array(     
        'Products' => 'Product'
    );

    static $allowed_children = array(
        'none' => 'none'
    );

    function getCMSFields()
    {
        $fields = parent::getCMSFields();       
        $fields->addFieldToTab("Root.Content.Images", new ImageField('Photo'));
        //Banner Images
        $fields->addFieldToTab("Root.Content.Banner", new ImageField('CategoryBanner', 'Banner', Null, Null, Null, 'Uploads/category_banners'));

        return $fields;
    }  

    //important for sidebar showing, this is sitetree stuff - relationship between categories and products 20012012
    public function onBeforeDelete()
    {
        $CurrentVal = $this->get_enforce_strict_hierarchy();
        $this->set_enforce_strict_hierarchy(false);

        parent::onBeforeDelete();

        $this->set_enforce_strict_hierarchy($CurrentVal);
    }  

    public function Children(){
        return $this->Products();
    }
    //added this on 03022011 for the parent page to show on Categories in admin
    function CheckboxSummary(){ 
        return $this->Parent()->Title . ' - ' . $this->Title;
    }
}

class CategoryPage_Controller extends Page_Controller
{

    static $allowed_actions = array(
        'show'
    );

    public function init()
    {
        parent::init();

        Requirements::css('themes/tutorial/css/products.css');

        //added this to make the gallery js work 10012012
        Requirements::set_write_js_to_body(false); 

        Requirements::javascript("mysite/javascript/jquery-1.4.2.min.js");                Requirements::javascript("mysite/javascript/jquery.cycle.lite.min.js");
        Requirements::javascript("mysite/javascript/toggle_menu.js");           
    }

    //Return the list of products for this category
    public function getProductsList()
    {
        return $this->Products(Null, 'Price ASC');
    }

    //Get's the current product from the URL, if any
    public function getCurrentProduct()
    {
        $Params = $this->getURLParams();
        $URLSegment = Convert::raw2sql($Params['ID']);

        if($URLSegment && $Product = DataObject::get_one('Product', "URLSegment = '" . $URLSegment . "'"))
        {      
            return $Product;
        }
    }

    //Shows the Product detail page
    function show()
    {
        //Get the Product
        if($Product = $this->getCurrentProduct())
        {
            $Data = array(
                'Product' => $Product,
                'MetaTitle' => $Product->Title
            );

            //return our $Data array to use, rendering with the ProductPage.ss template
            return $this->customise($Data)->renderWith(array('ProductPage', 'Page'));        
        }
        else //Product not found
        {
            return $this->httpError(404, 'Sorry that product could not be found');
        }
    }

    //Generate out custom breadcrumbs
    public function Breadcrumbs() {

        //Get the default breadcrumbs
        $Breadcrumbs = parent::Breadcrumbs();

        if($Product = $this->getCurrentProduct())
        {
            //Explode them into their individual parts
            $Parts = explode(SiteTree::$breadcrumbs_delimiter, $Breadcrumbs);

            //Count the parts
            $NumOfParts = count($Parts);

            //Change the last item to a link instead of just text
            $Parts[$NumOfParts-1] = ('<a href="' . $this->Link() . '">' . $Parts[$NumOfParts-1] . '</a>');

            //Add our extra piece on the end
            $Parts[$NumOfParts] = $Product->Title;

            //Return the imploded array
            $Breadcrumbs = implode(SiteTree::$breadcrumbs_delimiter, $Parts);          
        }

        return $Breadcrumbs;
    }           
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T02:36:15.300

如果您正在做任何严肃的搜索工作，那么内置的搜索功能（基于 MySQL MyISAM）并不理想。我建议使用 Solr 或 Sphinx，通过[https://github.com/silverstripe/silverstripe-sphinx](https://github.com/silverstripe/silverstripe-sphinx)或[https://github.com/nyeholt/silverstripe-solr](https://github.com/nyeholt/silverstripe-solr)集成到 SilverStripe 中（我将从第一个开始一）。这也将索引 DAO。

# asp.net - 自动创建帐户后 ASP.NET 重定向到登录...为什么？

> ID：10712091
> 
> 赞同：1
> 
> 时间：2012-05-23T00:50:46.463
> 
> 标签：asp.net, vb.net, authentication, login

我有一个带有 CreateUserWizard 控件的 create_account.aspx 页面。它的 LoginCreatedUser 属性设置为 true。

创建帐户并在 CreateUserWizard_CreatedUser 中进行一些进一步的连接后，我将执行以下操作：

```
Response.Redirect("~/dashboard/default.aspx") 
```

然后个人被重定向到 login.aspx 页面，就好像他们没有经过身份验证一样？为什么？

我怀疑这可能与 default.aspx 位于我有一个 web.config 文件的子目录中有关，

```
<configuration>
<system.web>
  <authorization>
    <deny users="?"/>
  </authorization>
</system.web>
</configuration> 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T03:48:20.160

您可能想尝试将 CreateUserWizard ContinueDestinationPageUrl 属性设置为所需的 URL，即。`ContinueDestinationPageUrl="~/dashboard/default.aspx"`. 也可以以编程方式完成。

# java - 从 Axis 迁移到 Axis2

> ID：10712099
> 
> 赞同：4
> 
> 时间：2012-05-23T00:51:43.847
> 
> 标签：java, web-services, wsdl, axis2, axis

我需要帮助将 Axis 项目迁移到 Axis2。

我正在处理一个较旧的 Axis 项目，其中一些 Java 类是使用较旧的 WSDL2Java 工具从 WSDL 生成的。现在的问题是，Java 认为这是一个错误，因为我有最新的 Axis2 版本 1.6。

我被告知使用 Axis2 中的 WSDL2Java 工具从 WSDL 文件重新生成 Java 类，但是，生成的类与旧的 WSDL2Java 完全不同。

我将如何解决这个问题？如果我用新的类替换旧的类，我觉得这个项目不会起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T02:18:17.470

Axis 2 是对框架的***重大***改写。升级没有真正的捷径，您需要处理它或保持在轴 1 上（正如某些人实际决定的那样）。[官方迁移指南](http://axis.apache.org/axis2/java/core/docs/migration.html)提供了一些有用的提示，但并未详细说明成功完成迁移所需了解的所有内容。

由于您将经历升级的痛苦，因此如果我不建议您看一下[Apache CXF](http://cxf.apache.org/) ，那将是我的失职。它是一个更现代的 Web 服务框架，支持 JAX-WS***和***JAX-RS。如果您首先进行合同开发，那么您的客户端将不必升级（只是服务器实现端）。

# javascript - jQuery .not() 没有从函数中过滤元素 - 想法？

> ID：10712103
> 
> 赞同：0
> 
> 时间：2012-05-23T00:52:42.190
> 
> 标签：javascript, jquery, wordpress

我正在尝试创建一个在 Ajax POST 成功后禁用投票按钮的功能。投票按钮在 POST 完成之前一直处于启用状态，然后使用“禁用”样式进行修复并且不可点击。我正在尝试使用 jQuery .not() 禁用从单击的按钮启动该功能（使用“禁用”类），但我运气不佳。[这是我的功能的一个小提琴，所以你可以看到我的问题，](http://jsfiddle.net/RSezp)我不确定我错过了什么，但我希望有人能帮我找到我的错误，这让我很沮丧:)

jQuery代码：

```
$("a.votebutton").not(".disabled").each(function(index) {
  var el = $(this);
  $(this).click(function() {
      el.addClass("active disabled").unbind("click");
      el.siblings().addClass("disabled");
  });
}); 
```

​</p>

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T01:05:51.043

问题是您的代码：

```
$("a.votebutton").not(".disabled") 
```

*选择在该代码行运行时*未禁用的所有链接，然后循环分配单击处理程序。这些点击处理程序仍然绑定到这些链接，即使它们后来碰巧被赋予“禁用”类 - 所以当您将“禁用”类添加到被点击元素的兄弟姐妹时，这些兄弟姐妹仍然有一个工作点击处理程序。如果您从应该修复它的兄弟姐妹中取消单击：

```
// change
el.siblings().addClass("disabled");
// to be
el.siblings().addClass("disabled").unbind("click"); 
```

请注意，您不需要`.each()`：

```
$("a.votebutton").not(".disabled").click(function() {
      $(this).addClass("active disabled").unbind("click")
             .siblings().addClass("disabled").unbind("click");
}); 
```

另一种方法是使用委托事件处理：

```
$("div.panel").on("click", "a.votebutton:not(.disabled)", function() {
   $(this).addClass("active disabled")
          .siblings().addClass("disabled");
}); 
```

这样，只有当它们冒泡到包含的 div（“div.panel”）时才会处理点击，此时只有当事件的源元素与作为`.on()`.

更新演示：http: [//jsfiddle.net/RSezp/2/](http://jsfiddle.net/RSezp/2/)

# .net - 如何在不关闭子窗体的情况下关闭主窗体？

> ID：10712105
> 
> 赞同：1
> 
> 时间：2012-05-23T00:53:02.313
> 
> 标签：.net, vb.net, winforms

我有两个名为：

```
Form1 & Form2 
```

在**Form1**中，我在按钮单击事件中有一个带有此代码的按钮：

```
Form2.Show()
Me.Dispose() 
```

当我单击此按钮时，它会同时关闭两个表单。

我只需要关闭Form1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T01:00:53.217

您的项目设置可能设置为在启动表单关闭时终止应用程序。将选项更改为“最后一个表单关闭”应该可以解决此问题。

“项目”菜单 -> 'YourApp' 属性... -> 应用程序选项卡

找到：“关机模式”

从“启动表单关闭时”更改->“最后一个表单关闭时”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T00:56:45.510

不要给`Dispose`自己打电话。`Me.Close()`在相同的上下文中尝试。

# java - SQL Where 子句的日期范围

> ID：10712106
> 
> 赞同：1
> 
> 时间：2012-05-23T00:53:03.170
> 
> 标签：java, mysql, jdbc

我正在使用 java、eclipse 和 JDBC。

我有 3 个表（`company`, `priceVolume`, `dividend`），其中`priceVolume`包含一个名为 transdate 的字符串（*股票值的日期分为几个不同的类别，即 openValue、CloseValue、averageValue...*）。在我所有的表格中，主键是`Ticker`（*公司的股票代码*）。

我还有一个名为 Industry 的公司属性，它告诉我股票来自哪个行业。

我有几天的时间，例如其中一个是 09.25.2012 到 02.28.2012，如果公司在选定的行业中，我想从 priceVolume 中获取值。

我有这个查询，我不知道如何用 WHERE 子句来给我这个跨度，只有这个跨度。如果类型是日期类型，我想我会知道如何表达它。然而，目前，作为一个字符串，我不知道。我也无法控制数据库，只是从中读取。

```
ResultSet rsTickers = stat.executeQuery("SELECT Ticker, OpenValue, CloseValue,
TransDate FROM company NATURAL JOIN pricevolume WHERE industry = " + GivenIndustry + "
GROUP BY ticker"); 
```

我目前设置了我的程序，以便它只为我提供与给定行业匹配的行业的所有行，我只是在我的程序中对它们进行排序（我丢弃了所有不在跨度中的行）。有效，但我觉得它真的无效。所以现在我想将我的查询限制为符合我标准的 transDates。

我只是想看看如何做得更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T00:59:53.853

您可以像这样投射`datetime`并检查

```
ResultSet rsTickers = stat.executeQuery("SELECT Ticker, OpenValue, CloseValue,
TransDate FROM company NATURAL JOIN pricevolume WHERE industry = " + GivenIndustry + "
AND CAST(transDates AS DATETIME) BETWEEN '2001-9-25' AND '2012-2-28' 
GROUP BY ticker"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T01:00:18.053

您想添加一个`BETWEEN`子句：

```
ResultSet rsTickers = stat.executeQuery("SELECT Ticker, OpenValue, CloseValue,
TransDate FROM company NATURAL JOIN pricevolume WHERE
transdate between ? and ? and 
industry = " + GivenIndustry + "
GROUP BY ticker"); 
```

# git - 将 git log --stat 与 --name-status 结合使用？

> ID：10712109
> 
> 赞同：9
> 
> 时间：2012-05-23T00:53:24.300
> 
> 标签：git

我`git log`设置了两个别名：一个显示`--name-status`：

```
...
| A   path/to/yourfile.c
| M   path/to/myfile.c
| M   path/to/my/otherfile.c
... 
```

还有一个要展示`--stat`：

```
...
|  path/to/yourfile.c          |    2 ++
|  path/to/myfile.c            |    2 +-
|  path/to/my/otherfile.c      |   27 +++++-----
... 
```

有没有可能将两者结合起来？

```
...
| A   path/to/yourfile.c          |    2 ++
| M   path/to/myfile.c            |    2 +-
| M   path/to/my/otherfile.c      |   27 +++++-----
... 
```

我喜欢这个`--stat`概述，但它并没有告诉我是添加还是删除了文件；只是它们以某种方式进行了修改。

（当两个命令行标志组合时，`--stat`将被忽略。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T05:18:05.533

我不知道组合`--stat`and的方法，但是除了 diffstat 之外`--name-status`，您还可以使用它来获取添加/删除/重命名/复制文件的列表。`git log --stat --summary`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T16:03:12.997

`git status`我对and有类似的想法`git diff --stat`。有人帮我想出了：

```
git status | sed -e "$(git diff --stat | sed -e 's#/#\\/#g' | awk '/\|/ {print "s/" $1 "/" $0 "/;"}')" 
```

我试图用你的 git log 命令替换它，但它们太长（由于它被分页）。如果您缩短日志`-n5`（仅显示最后 5 次提交），这是一个好的开始

```
git log --name-only -n5| sed -e "$(git log --stat -n5 | sed -e 's#/#\\/#g' | awk '/\|/ {print "s/" $1 "/" $0 "/;"}')" 
```

# html - 在 XML 中编码 HTML

> ID：10712111
> 
> 赞同：0
> 
> 时间：2012-05-23T00:54:00.677
> 
> 标签：html, xml, encoding

我有一个包含一些 HTML 的大 XML 文件

```
<Orchard>
  <Recipe>
    <Name>Generated by Orchard.ImportExport</Name>
    <Author>admin</Author>
  </Recipe>
  <Data>
    <BodyPart Text="<p>My HTML</p><p align ="center">blah blah</p>"/>
  </Data>
</Orchard> 
```

我想编码 HTML，但不编码 XML。我已经尝试过正则表达式，但无法提出解决方案。

有任何想法吗？

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T01:04:33.200

如果您想要一个简单的手工编码解决方案：

```
<Orchard>
  <Recipe>
    <Name>Generated by Orchard.ImportExport</Name>
    <Author>admin</Author>
  </Recipe>
  <Data>
    <BodyPart><Text><![CDATA[<p>My HTML</p><p align ="center">blah blah</p>]]></Text></BodyPart>
  </Data>
</Orchard> 
```

...但请记住，如果 HTML 中存在文本“]]>”，则需要对其进行转义。

如果您无法修改文件的结构，请使用 DOM 查找属性，并且您只需要转义与号（with `&amp;`）和封装引号（在您的情况下为双引号-- `&quot;`）。

您可能会指出您使用的服务器端语言以及是否可以更改 XML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T21:28:44.150

这是我的解决方案（不是我所知道的最好的方法，但它确实有效）：按照 Brett Zamir 的建议，我将 HTML 移到了 CDATA 中。然后我创建了一个小程序来解析 XML，找到所有 BodyPart 项目，并转义里面的 HTML。然后将转义的 HTML 移动到 Text 属性中，并删除内部文本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-20T08:50:28.237

您还可以将 BodyPartDriver 复制到您自己的项目中并覆盖 Import 和 Export 方法。这样你就可以加密/编码做任何你想做的事情。它将在从通常的 BodyPartDriver 导入/导出之后运行。

```
[UsedImplicitly]
public class BodyPartDriver : ContentPartDriver<BodyPart>
{
    protected override void Importing( BodyPart part, ImportContentContext context )
    {
       //Do your decoding here
        var importedText = context.Attribute( part.PartDefinition.Name, "Text" );
        if ( importedText != null )
        {
            part.Text = importedText;
        }
    }

    protected override void Exporting( BodyPart part, ExportContentContext context )
    {
        //Do your encoding here
        context.Element( part.PartDefinition.Name ).SetAttributeValue( "Text", part.Text );
    }
} 
```

# c# - 在 SelectionChanged 事件处理程序完成之前，不会显示 DataGridView 选择更改

> ID：10712112
> 
> 赞同：1
> 
> 时间：2012-05-23T00:54:02.207
> 
> 标签：c#, .net, winforms, datagridview

我正在捕获 DataGridView 控件的 SelectionChanged 事件，我的事件处理程序大约需要 1/2 秒来完成其任务（设置多个控件的值等）。用 UI 术语来说，这是永恒的。

问题是 DataGridView 的用户界面不会立即更新选择。我想要的是让用户在单击后立即看到 DataGridView 中的选择更改，***然后***完成冗长的工作。完成整个任务仍然需要 1/2 秒，并且在此期间 UI 不会响应，这没关系 - 至少用户会得到即时反馈。

您可以通过将以下代码插入新的 Form1 类来查看此行为：

```
 private System.Windows.Forms.DataGridView dataGridView1;

    public Form1()
    {
        InitializeComponent();
        dataGridView1 = new DataGridView();
        dataGridView1.Dock = DockStyle.Fill;
        dataGridView1.Columns.Add("Column0", "Column 0");
        dataGridView1.Rows.Add("Row 0");
        dataGridView1.Rows.Add("Row 1");
        dataGridView1.Rows.Add("Row 2");
        dataGridView1.Rows.Add("Row 3");
        dataGridView1.SelectionChanged += 
            new EventHandler(dataGridView1_SelectionChanged);
        this.Controls.Add(dataGridView1);
    }
    private void dataGridView1_SelectionChanged(object sender, EventArgs e)
    {
        if (this.Handle != null)
        {
            this.DoSomethingForAWhile();
            // Even BeginInvoke doesn't help
            //this.BeginInvoke((MethodInvoker)this.DoSomethingForAWhile);
        }
    }
    private void DoSomethingForAWhile()
    {
        // Do anything that causes a noticable delay

        DateTime t0 = DateTime.Now;
        while ((DateTime.Now - t0).TotalSeconds < 2)
        {
            // Do nothing
        }
    } 
```

我通常会使用 Control.BeginInvoke 以便在我的 1/2 秒任务开始之前处理绘制消息。这适用于 ListView 控件，但由于某种原因它不适用于 DataGridView。

我*可以在另一个线程上进行处理并使用 Invoke 来设置 UI 值，但这对于**应该*是一项简单任务的事情来说似乎很复杂。

肯定有更好的办法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T01:30:03.317

虽然我认为将长时间运行的任务放入 BackgroundWorker 并回调到 UI 以更新它是合适的，但您可以通过调用 DataGridView.Refresh() 和使用 BeginInvoke 来获得所需的行为；

```
private void dataGridView1_SelectionChanged(object sender, EventArgs e)
{
    dataGridView1.Refresh();
    if (this.Handle != null)
    {
        this.BeginInvoke((MethodInvoker)this.DoSomethingForAWhile);
    }
} 
```

这种方法会在您长时间运行的任务*之前*在 UI 线程上粘贴一条 Paint 消息，这会阻塞 UI 线程。那时，我不相信 DataGridView 尚未被指示自行绘制，因此您没有看到它更新。

# html - 如何在一个主干.js 模型中获取 cookie 值？

> ID：10712113
> 
> 赞同：3
> 
> 时间：2012-05-23T00:54:24.607
> 
> 标签：html, backbone.js

我在 HTML5 中有一个简单的 Backbone.js/Bootstrap 前端和一个 Node.js/Restify 后端。我在来自服务器的标头响应中设置 cookie，如下所示：

```
res.setHeader("Set-Cookie", ["token=ninja", "language=javascript"]); 
```

在客户端，我正在进行 REST 调用

```
var response = this.model.fetch().success(function(data){
           //success
           }).error(function(data){
           //error 
           }).complete(function(data){
            //complete
           }); 
```

回调模型中的解析方法。

如何读取模型中的 cookie 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T15:35:08.433

这是我想出来的。我的应用程序有两个组件 - 来自一个域的 HTML/js 与另一个域上的 REST 服务通信（因此是跨域的。）因为 cookie 是从 REST 设置的，所以它似乎无法跨域读取。因此，即使服务器正在发送 cookie，网页也不会存储它。一种替代方法是使用本地 cookie 或使用[http://backbonetutorials.com/cross-domain-sessions/](http://backbonetutorials.com/cross-domain-sessions/)说明的技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T01:11:22.647

包括[Cookie.js](http://code.google.com/p/cookie-js/)。

然后，您可以像这样引用单个 cookie：

```
var token = Cookie.get('token')

# token == 'ninja' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T01:19:46.477

假设您正在使用带有 Backbone 的 jQuery，您可以`parse`通过调用`getAllResponseHeaders`或在模型中定义函数来获取标头`getResponseHeader`：

```
var model = Backbone.Model.extend({

    // the rest of your model

    parse: function(resp, xhr) {
        var allHeaders = xhr. getAllResponseHeaders();
        var cookieHeader = xhr. getResponseHeader("Set-Cookie");

        // do something with the headers

        return resp;
    }
}); 
```

# wcf - TransportWithMessageCredential：Windows 凭据未传递给 WCF 服务

> ID：10712115
> 
> 赞同：0
> 
> 时间：2012-05-23T00:54:56.027
> 
> 标签：wcf, wcf-binding

我在我的 wcf 服务上设置 TransportWithMessageCredential 时遇到问题。

使用 wcf 配置编辑器，我在服务的 web.config 和我的可执行文件的 app.config 中将 Mode 设置为 TransportWithMessageCredential，将 transportClientCredentialType 设置为 Windows。我在 erver 上安装了一个自签名证书并配置了 IIS 以使用它。

当我运行我的测试应用程序时，我收到以下错误：System.InvalidOperationException：未提供用户名。在 ClientCredentials 中指定用户名。

似乎 Windows 凭据没有传递给 wcf 服务，当我检查 credentialCache.defaultCredentials 时，它们为空。关于为什么会这样以及如何解决它的任何线索和/或提示？提前致谢

活动目录域上的服务器 2003 / IIS 6.0。

服务的 web.config

```
<service name="Test.DiagnosticService">
    <endpoint binding="basicHttpBinding" bindingConfiguration="WindowsTransportCredentialBinding" name="ClientDiagnosticEndpoint" contract="Test.IDiagnostic" />
</service>

<basicHttpBinding>
    <binding name="WindowsTransportCredentialBinding" maxBufferSize="524288"
     maxReceivedMessageSize="524288">
        <readerQuotas maxDepth="128" maxStringContentLength="1048576" />
        <security mode="TransportWithMessageCredential">
            <transport clientCredentialType="Windows" proxyCredentialType="Windows" />
        </security>
    </binding> 
```

可执行文件的 app.config

```
<client>
<endpoint address="https://U-WM-3vIntegr8/test/Web/Services/Diagnostic.svc"
    binding="basicHttpBinding" bindingConfiguration="ClientHttpEndpoint"
    contract="Test.IDiagnostic" name="ClientDiagnosticEndpoint" />
</client>

<basicHttpBinding>
    <binding name="ClientHttpEndpoint" closeTimeout="00:01:00"
      openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:02:00"
      allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
      maxBufferSize="4194304" maxBufferPoolSize="524288" maxReceivedMessageSize="4194304"
      messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
      useDefaultWebProxy="true">
      <readerQuotas maxDepth="32" maxStringContentLength="1048576"
        maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <security mode="TransportWithMessageCredential">
        <transport clientCredentialType="Windows" proxyCredentialType="Windows"
          realm="" />
        <message clientCredentialType="UserName" algorithmSuite="Default" />
      </security>
    </binding>
</basicHttpBinding> 
```

...从客户端调用

```
public static IDiagnostic GetDiagnosticService()
{
    return new ChannelFactory<IDiagnostic>("ClientDiagnosticEndpoint").CreateChannel();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T09:23:06.150

您需要手动填写凭据，它们不会在此配置中自动传递。如果这就是您要查找的内容，则应在客户端和服务器上将 clientCredentialType 设置为“Windows”。现在您需要手动设置它：

```
proxy.ClientCredentials.Username.User = ""
proxy.ClientCredentials.Username.Password = "" 
```

# c++ - 如何计算文本文件中的字符数

> ID：10712117
> 
> 赞同：3
> 
> 时间：2012-05-23T00:55:07.897
> 
> 标签：c++, visual-c++

我试图用 C++ 计算文本文件中的字符，这是我到目前为止所拥有的，由于某种原因我得到了 4。即使你里面有 123456 个字符。如果我增加或减少我仍然得到4个字符，请提前帮助和感谢

```
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

const char FileName[] = "text.txt";

int main () 
{
string line;
ifstream inMyStream (FileName); 
int c;

if (inMyStream.is_open()) 
{

     while(  getline (inMyStream, line)){

             cout<<line<<endl;
              c++;
  }
    }
    inMyStream.close(); 

system("pause");
   return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T00:58:01.063

你在数线。
你应该数一下字符。将其更改为：

```
while( getline ( inMyStream, line ) )
{
    cout << line << endl;
    c += line.length();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T01:06:07.910

可能有数百种方法可以做到这一点。我认为最有效的是：

```
 inMyStream.seekg(0,std::ios_base::end);
    std::ios_base::streampos end_pos = inMyStream.tellg();

    return end_pos; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T01:30:55.603

首先，你必须初始化一个本地变量，这意味着： `int c = 0;` 而不是 `int c;`

我认为古老且易于理解的方法是使用`get()`函数直到结束字符`EOF`

```
 char current_char;
    if (inMyStream.is_open()) 
        {

            while(inMyStream.get(current_char)){

                if(current_char == EOF)
                {
                    break;
                }
                c++;
            }
        } 
```

然后`c`将是字符数

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-04T01:34:18.697

这就是我解决问题的方法：

```
#include <iostream>
#include <fstream>
#include <string>

using namespace std;

int main () 
{
string line;
int sum=0;
ifstream inData ;
inData.open("countletters.txt");

while(!inData.eof())
{
getline(inData,line);

    int numofChars= line.length();
    for (unsigned int n = 0; n<line.length();n++)
    { 
    if (line.at(n) == ' ')
    {
    numofChars--;
    }
    }
sum=numofChars+sum;
}
cout << "Number of characters: "<< sum << endl;
    return 0 ;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T01:00:43.200

只需使用良好的旧 C 文件指针：

```
int fileLen(std::string fileName)
{
    FILE *f = fopen(fileName.c_str(), "rb");

    if (f ==  NULL || ferror(f))
    {
        if (f)
            fclose(f);

        return -1;
    }

    fseek(f, 0, SEEK_END);
    int len = fell(f);

    fclose(f);

    return len;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-02T19:19:34.167

我发现了这个简单的方法，希望对你有帮助

```
while(1)
    {
        if(txtFile.peek() == -1)
            break;
        c = txtFile.get();
        if(c != txtFile.eof())
                    noOfChars++;
    } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-28T12:56:18.917

这肯定有效，它旨在逐个字符地阅读。

它可以很容易地放入一个类中，您可以为每个字符应用函数，因此您可以检查“\n”、“”等。只要在你的班级中有一些成员，他们可以保存在那里，所以你可能只返回 0 并使用方法来获得你想要的东西。

```
#include <iostream>
#include <fstream>
#include <string>

unsigned long int count(std::string string)
{
    char c;
    unsigned long int cc = 0;

    std::ifstream FILE;
    FILE.open(string);
    if (!FILE.fail())
    {
        while (1)
        {
            FILE.get(c);
            if (FILE.eof()) break;
            cc++; //or apply a function to work with this char..eg: analyze(c);
        }
        FILE.close();
    }
    else
    {
        std::cout << "Counter: Failed to open file: " << string << std::endl;
    }

    return cc;
};

int main()
{
    std::cout << count("C:/test/ovecky.txt") << std::endl;

    for (;;);

    return 0;
} 
```

# jquery - 悬停某些元素时禁用页面滚动

> ID：10712120
> 
> 赞同：-1
> 
> 时间：2012-05-23T00:55:18.493
> 
> 标签：jquery, scroll

当某些块悬停时，如何在不隐藏滚动条的情况下锁定窗口滚动。当鼠标离开该块时，解锁窗口滚动？

就像在右边的蓝色框中一样：http: [//html.kudrych.ru/mosnadzor/](http://html.kudrych.ru/mosnadzor/)

[https://stackoverflow.com/a/9989199/1411424](https://stackoverflow.com/a/9989199/1411424) - 它正在工作！特别感谢 Billiand！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T01:21:00.850

试试 jQuery 插件[jScrollPane](http://jscrollpane.kelvinluck.com/) - 它似乎可以正确处理所有滚动功能。它确实与您想要的不同，因为您必须单击，而不仅仅是悬停，才能取代主体滚动条，但您可以通过从 hover() 调用 focus() 和 blur() 来更改该行为：

```
$(".scroll-pane").hover(function() {
    this.focus();
}, function() {
    this.blur();
}); 
```

# javascript - jQuery无限滚动和砌体问题

> ID：10712122
> 
> 赞同：3
> 
> 时间：2012-05-23T00:55:23.640
> 
> 标签：javascript, jquery, tumblr, jquery-masonry, infinite-scroll

我正在尝试创建一个 tumblr 主题，并且正在使用 jquery 的砖石和无限滚动插件。砌体工作得很好。但是，我根本无法让无限滚动工作。这是我的 jQuery 代码：

```
<script type="text/javascript" src="../jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="../masonry.js"></script>
<script type="text/javascript" src="../jquery.infinitescroll.js"></script>
<script type="text/javascript">
$('document').ready(function(){
$('#content').imagesLoaded(function(){
$('#content').masonry({
itemSelector: '.post',
columnWidth: 260});
});
$('#content').infinitescroll({
    navSelector  : '#nav',
    nextSelector : '#nav a',
    itemSelector : '#content div.post',          
    },
    function( newElements ) {
    var $newElems = $( newElements );
    $('#content').masonry( 'appended', $newElems, function(){$newElems.fadeIn('slow');}   );
  });
});
</script> 
```

这是我的 HTML：

```
 <div id="content">
   {block:Posts}
   {block:Photo}
<div class="post">
<img src="{PhotoURL-250}" width="250" />
</div>
   {/block:Photo}
   {/block:Posts}
 {block:Pagination}
<div id="nav">{block:NextPage}<a href="{NextPage}"></a>{/block:NextPage}</div>
 {/block:Pagination} 
```

任何帮助是极大的赞赏。提前致谢。

*我还想指出，我故意缩短了 js 文件的 URL，只是为了使帖子看起来更好，在我的实际主题上，URL 是正确的。

这是我添加调试后控制台显示的内容（老实说，我真的不知道这意味着什么，但希望它有所帮助）

```
Testing console
["determinePath", 
Array[2]
0: "/page/"
1: ""
length: 2
__proto__: Array[0]
] jquery.infinitescroll.js:171
["Binding", "bind"] jquery.infinitescroll.js:171
["math:", 77, 644] jquery.infinitescroll.js:171
["heading into ajax", 
Array[2]
0: "/page/"
1: ""
length: 2
__proto__: Array[0]
] jquery.infinitescroll.js:171
["Using HTML via .load() method"] jquery.infinitescroll.js:171
["contentSelector", 
<div id=​"content" style=​"position:​ relative;​ height:​ 689px;​ " class=​"masonry">​…​&lt;/div>​
] jquery.infinitescroll.js:171
["math:", 292, 644] jquery.infinitescroll.js:171
["heading into ajax", 
Array[2]
] jquery.infinitescroll.js:171
["Using HTML via .load() method"] jquery.infinitescroll.js:171
["Error", "end"] jquery.infinitescroll.js:171
["Binding", "unbind"] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T02:25:56.653

一些浏览器因仅支持 window.console 的子集甚至根本不支持而臭名昭著。一些浏览器仅支持 console.info，而其他浏览器支持 info、debug、log、warn、error 和可能的其他。

**在 jquery.infinitescroll.js 文件的第 171 行或附近，您将找到以下代码：**

```
 // Console log wrapper
    _debug: function infscr_debug() {

        if (this.options && this.options.debug) {
            return window.console && console.log.call(console, arguments);
        }

    }, 
```

在 Internet Explorer 中，有时未定义控制台方法，除非启用了开发人员工具和/或脚本调试器功能；因此，在开发人员计算机上运行良好的 Web 应用程序在开发人员工具和/或脚本调试器被禁用的生产计算机上使用时可能会严重失败。

作为开发人员，您的第一直觉可能是从您的代码中删除控制台语句——或者您正在使用的任何库的代码中使用 console.log。更糟糕的是，您可能会避免使用控制台语句，而使用警报。

由于 console.log 语句对于故障排除和调试过程非常有价值，因此可以用来确保控制台语句不会干扰生产代码的一种技术是在所有网页上包含控制台对象的默认定义，其中出现此问题：

此 JavaScript 在包含在`<head>`您的页面部分中时，将定义 window.console 及其方法为空函数，如果它检测到它们尚未定义。

```
<script type="text/javascript"> 
// override loggers to avoid throwing errors
if(window.console == null || window.console == undefined || !window.console) {
           console = { log: function() {}, info: function() {}, warn: function() {}, error: function() {}, trace: function() {}, debug: function() {} };
           //var fbscript = document.createElement("script");
           //fbscript.src = "https://getfirebug.com/firebug-lite-beta.js";
           //fbscript.setAttribute("type","text/javascript");
           //document.getElementsByTagName("head")[0].appendChild(fbscript);
} else if(!console.debug) {
         console.debug = function(text) { if(console.log) console.log("D: "+text); };
}
</script> 
```

此外，如果 window.console 为 null 或未定义，则有 4 行注释的 JavaScript 将在您使用的任何浏览器中加载 Firebug Lite。

或者，您可以检查以确保您没有在 jQuery Infinite 滚动插件本身的选项部分中打开调试：

```
 debug        : true,                        
             // enable debug messaging ( to console.log ) 
```

Ideally, this would probably be a better solution, but I prefer the former since I know it helps me avoid the trap of not testing in browsers with no debuggers.

See the [jQuery Ininite Scroll documentation](http://www.infinite-scroll.com/infinite-scroll-jquery-plugin/), specifically, the options section, for more details.

# mysql - MySQL query to delete spam comments in ExpressionEngine 1.6.4

> ID：10712123
> 
> 赞同：1
> 
> 时间：2012-05-23T00:55:32.807
> 
> 标签：mysql, expressionengine

The title on the tin says it all: I need to delete 140,000 spam comments in an ExpressionEngine 1.6.4 site and need to do that via an MySQL query in phpmyadmin. These are the closed comments that appear in the CP main page under the link "Comments Awaiting Validation."

Looking at the database tables in phpmyadmin, comments are in the `exp_comments` table. The column called "status" has either a `o` or a `c`, meaning open - and a comment that I want to keep, while the `c` means a close and spam comment.

I inherited this site and have installed Akismet, but that of course won't delete the comments already there. There's no help in the EE forums with this.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T02:53:45.610

I would suggest a good way would be to delete the comments where there is a tag in the comment, as most comment spam contains links.

Something like:

```
DELETE FROM exp_comments WHERE status = 'c' AND text like '%<a%'; 
```

# dart - 如何无条件退出 Dart 应用程序？

> ID：10712129
> 
> 赞同：8
> 
> 时间：2012-05-23T00:56:21.733
> 
> 标签：dart

在服务器端 VM 应用程序中，有一些 Futures 可能会或可能不会返回。如何无条件退出应用程序？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-23T04:05:31.583

退出虚拟机：

```
import 'dart:io';

main() {
  exit(0); // or non-zero for some error code
} 
```

这是记录[在这里](http://api.dartlang.org/docs/bleeding_edge/dart_io.html#exit)。谢谢提问！

# ios - iOS：保存核心数据多个视图

> ID：10712138
> 
> 赞同：0
> 
> 时间：2012-05-23T00:57:58.350
> 
> 标签：ios, core-data

我是 iOS 开发的新手——我正在研究在不同视图之间传递数据......

假设我有一个包含十个问题的清单。每个问题将有一个不同的页面，其中包含一个转换，UI 将包含一个上一个/下一个按钮以及为每个问题收集的输入。

如何显示每个问题并以“步骤”收集数据，然后最终将所有内容保存为核心数据模型中的一个条目？

你能告诉我这是怎么做的吗？非常感激！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T01:28:14.203

正如 inafziger 提到的，最好在最后一次视图调用保存数据时使用单例，但不要在每个视图结束时使用，因为这样可以提高性能。听起来好像数据与您的整个应用程序相关。

如果是这样的话，我会把你的：

```
@property (nonatomic, retain) NSManagedObjectContext *managedObjectContext;
@property (nonatomic, retain) NSManagedObjectModel *managedObjectModel;
@property (nonatomic, retain) NSPersistentStoreCoordinator *persistentStoreCoordinator; 
```

在您的应用程序委托内部，您可以通过这种方式从任何地方访问它们，如果您需要从上一个问题中获取信息，您可以轻松地执行该操作。

我希望这有帮助

**编辑：（** 关于您的评论）

假设您对每个问题都有相同或相似的布局，您可以`ViewController`使用不同的参数推送相同的新实例，即

```
UIViewController* myNewVC = [UIViewController alloc] init];
[myNewVC setQuestion:self.question+1];
[[AppDelegate sharedDelegate].navigationController pushViewController:myNewVC animated:YES] 
```

或者与上面类似的东西，还要注意，UITableViewController 始终是 UIViewController，但 UIViewController 并不总是 UITableViewController。

`ViewController` 这样，您每次都可以显示一个新问题，并为每个问题重复使用完全相同的问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:56:56.750

我会将问题存储在具有属性问题编号的问题实体中的数据模型中。然后我会让我的视图控制器跟踪 ivar 中的当前问题编号。每次前进或后退时，您都可以增加或减少当前问题编号并从核心数据中获取问题。

我强烈建议避免将您的代码的不同部分耦合到您的应用程序委托。相反，Apple 鼓励您通过设置属性或使用委托模式将必要的数据结构从视图控制器传递到视图控制器。

# java - 如何在JAVA中从/到某个点扩大/缩小一个圆圈？

> ID：10712142
> 
> 赞同：0
> 
> 时间：2012-05-23T00:58:30.237
> 
> 标签：java, draw, actionlistener, geometry

我最初从一个圆圈开始，当按下开始按钮时，圆圈必须缩小到一个点，如果在此过程中按下停止按钮，它应该停止收缩过程。如果然后按下开始按钮，它必须继续收缩。

一旦它缩小到一个点，它必须变回一个圆圈，并且按钮在单击时必须做出类似的响应。

我不确定如何使用在 JAVA 中执行的操作来实现 Grow() 和 Shrink()。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T01:12:46.080

如果你在使用[Swing](http://docs.oracle.com/javase/tutorial/ui/overview/intro.html) in，你可以把你的圆圈画成一个盒子。这意味着您可以更改大小并将它们与中心的偏移量绘制在同一位置：

```
public Circle {

    private int x;
    private int y;
    private int size;

    public void paint(Graphics g) {
        g.drawOval(x + size/2, y + size/2, size, size);
    }

    public void grow(){
        size++;
    }

    public void shrink(){
        size--;
        size = Math.max(size,1);
    }

} 
```

# .net - LINQ to SQL 继承的优缺点

> ID：10712147
> 
> 赞同：0
> 
> 时间：2012-05-23T00:58:58.960
> 
> 标签：.net, database, linq-to-sql, inheritance

我正在设计一个基于 Linq2SQL 引擎的游戏。

其他对象之间的游戏有用户和 NPC（非游戏角色）。

用户和 NPC 的能力有些不同，但它们也有一些共同的属性，例如生命值或伤害量。

这些活动是通过类似的方法完成的`void AttackUser(User attacker, User target)`。

这里的问题是 NPC 也可以攻击用户和其他 NPC，而用户可以攻击 NPC，所以我将不得不编写很多额外的方法和重载（例如`void AttackNpc(User attacker, Npc npc)`.

我可以通过使用 Linq2SQL 的继承特性来简化这一切，使用 1 个通用表 Creatures 而不是分别使用用户和 NPC。这也将允许我拥有一种通用方法，`void Attack (Creature attacker, Creature target)`而不是多个版本。

另一方面，Linq2SQL 中的继承似乎大大增加了解决方案的整体复杂性。每次我决定对用户或 NPC 进行更改时，我都需要考虑继承问题。此外，通过 Linq2SQL 中的继承，我对用户和 NPC 的单独表没有那么清晰，因为所有内容都被转储到一个表中。最后，我担心这种组合的 Creatures 表的性能。

在这里决定是否应该使用继承变得很困难，因为如果我选择了一种次优的方法，那么将来切换到另一种方法将非常困难。

我想听听专家对此的意见。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:51:53.040

> 每次我决定对用户或 NPC 进行更改时，我都需要考虑继承问题。

是的，但是如果他们有很多共同点，那也很有帮助，因为您不需要进行两次更改。所以我没有使用继承，你需要考虑重复问题。

> 此外，通过 Linq2SQL 中的继承，我对用户和 NPC 的单独表没有那么清晰，因为所有内容都被转储到一个表中。

好吧，您正在使用 Linq2SQL 对您的数据库设计进行抽象，所以最终“谁在乎”。假设你有一个“类型”字段，`view`如果你真的需要它，你仍然可以创建一个用户和 NPC。

> 最后，我担心这种组合的 Creatures 表的性能。

假设您使用的是 sql server，只要您注意正确的索引，在遇到麻烦之前您将需要大量的生物

简而言之，我会去继承

# iphone - 试图写入 .plist 文件，但它不起作用

> ID：10712150
> 
> 赞同：1
> 
> 时间：2012-05-23T00:59:36.897
> 
> 标签：iphone, ios, plist

我正在尝试将一段非常简单的数据写入 .plist 文件，并且我已经检查了各种代码示例，但我正在努力让它工作。

首先，有创建文件本身并返回路径的方法：

```
-(NSString *)getFilePath{
    NSArray *thePath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    return [[thePath objectAtIndex:0] stringByAppendingPathComponent:@"events.plist"];
} 
```

然后这是我连接到按钮的操作。它现在只插入一行虚拟数据。或者至少，这就是我想要做的。

```
- (IBAction)saveData:(id)sender {
    NSArray *data = [[NSArray alloc] initWithObjects:@"E3 Expo", @"05-06-2012", nil];
   [data writeToFile:[self getFilePath] atomically:YES];
} 
```

但它不起作用。我通过 Xcode 中的 Organizer 检查了用户文档的目录，并且在“Documents”文件夹中没有创建任何内容。

任何帮助，将不胜感激。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T02:26:10.850

您必须将字典设置为根 plist 对象。

[编辑：如果您看不到文件，请使用`NSFileManager`]

```
NSError *error;
NSString *plistPath = [self getFilePath];

NSArray *data = [[NSArray alloc] initWithObjects:@"E3 Expo", @"05-06-2012", nil];
NSDictionary *plistDict = [NSDictionary dictionaryWithObject: data forKey: @"array"];
NSData *plistData = [NSPropertyListSerialization dataFromPropertyList:plistDict
                                                               format:NSPropertyListXMLFormat_v1_0
                                                     errorDescription:&error];
if(plistData) {
    //not necessary
    if ([[NSFileManager defaultManager] fileExistsAtPath: plistPath]) {
        [[NSFileManager defaultManager] removeItemAtPath: plistPath error: &error];
    }
    [[NSFileManager defaultManager] createFileAtPath: plistPath contents:plistData attributes: nil];
    //necessary
    [plistData writeToFile: plistPath atomically:YES];
}
else {
    NSLog(error);
    [error release];
}
//also release data, since you retained it (sorry, memory management OCD)
[data release]; 
```

[基于 Apple 文档 - 滚动到写出属性列表](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/PropertyLists/QuickStartPlist/QuickStartPlist.html#//apple_ref/doc/uid/10000048i-CH4-SW5)

# ruby - 安装 rvm 时出现 SSL 证书错误

> ID：10712151
> 
> 赞同：3
> 
> 时间：2012-05-23T00:59:37.040
> 
> 标签：ruby, command-line, rvm

您好我正在尝试将 RVM 安装到 Mac OsX v 10.4.11 上。

在终端中输入：

```
curl -L get.rvm.io | bash -s stable 
```

我收到这条消息：

```
% Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100   185  100   185    0     0    387      0 --:--:-- --:--:-- --:--:--     0
curl: (60) SSL certificate problem, verify that the CA cert is OK. Details:
error:14090086:SSL routines:SSL3_GET_SERVER_CERTIFICATE:certificate verify failed
More details here: http://curl.haxx.se/docs/sslcerts.html

curl performs SSL certificate verification by default, using a "bundle"
 of Certificate Authority (CA) public keys (CA certs). The default
 bundle is named curl-ca-bundle.crt; you can specify an alternate file
 using the --cacert option.
If this HTTPS server uses a certificate signed by a CA represented in
 the bundle, the certificate verification probably failed due to a
 problem with the certificate (it might be expired, or the name might
 not match the domain name in the URL).
If you'd like to turn off curl's verification of the certificate, use
 the -k (or --insecure) option. 
```

我在 StackOverflow 上发现了类似的问题，例如[Curl Certificate Error when Using RVM to install Ruby 1.9.2](https://stackoverflow.com/questions/6414232/curl-certificate-error-when-using-rvm-to-install-ruby-1-9-2)，但是 a）这是首先安装 RVM 的问题，而不是使用 RVM 安装新版本的 Ruby，更重要的是 b）类似问题的最佳答案表明这是在引用 RVM 的旧站点时生成的错误，即。rvm.beginrescueend.com。给出的解决方案是使用

```
curl -L get.rvm.io | bash -s stable 
```

这是我正在使用的，但对我来说，它正在生成此错误消息，因此我被卡住了。任何帮助将不胜感激，谢谢

菲利普

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-05T10:54:28.097

我在 Mac OS X Server 10.4.11 上成功安装了 RVM。

你需要：

*   **Xcode 2.5**，Tiger 的最新 Xcode
*   已安装、配置和更新**[MacPorts](https://trac.macports.org/wiki/InstallingMacPorts)**
*   **[gcc-4.2](http://r.research.att.com/tools/)** Apple build 5566，稍后说明...

* * *

# 卷曲

我们需要 curl 来使用更新的证书。下载最新的[证书包](http://curl.haxx.se/docs/caextract.html)，并配置 curl 以使用它。注意`cacert.pem`路径必须是绝对的。

```
mkdir ~/.certs
curl -o ~/.certs/cacert.pem http://curl.haxx.se/ca/cacert.pem
echo cacert = \"/Users/your-username/.certs/cacert.pem\" >> ~/.curlrc 
```

* * *

# 升级 bash

接下来，要正确执行 RVM 的安装脚本，我们必须升级 bash。我使用了最新版本，4.2 版。

```
mkdir ~/tmp
cd ~/tmp
curl -C - -O ftp://ftp.cwru.edu/pub/bash/bash-4.2.tar.gz # letter O, not a zero
tar zxf bash-4.2.tar.gz
cd bash-4.2
./configure && make && sudo make install
sudo bash -c "echo /usr/local/bin/bash >> /private/etc/shells"
chsh -s /usr/local/bin/bash
cd /bin
sudo mv bash bash-old
sudo ln -s /usr/local/bin/bash bash 
```

登录到一个新的 shell，你应该正在运行 bash 4.2。

```
bash --version
#=> GNU bash, version 4.2.0(1)-release (powerpc-apple-darwin8.11.1)
#=> ... 
```

* * *

# 升级库工具

使用 macports 升级 libtool 包。这一步是正确配置 yaml 所必需的。

确保 macports 是最新的并且可以使用。

```
sudo port install libtool 
```

这将花费大量时间，因为要编译许多依赖项。拿一个三明治。

* * *

# 安装 gcc-4.2

您的 rubies 将无法编译，因为它尝试使用 Xcode 2.5 不提供的 gcc-4.2。我们必须自己安装。从 AT&T Research 下载：

```
curl -C - -O http://r.research.att.com/tools/gcc-4.2-5566-darwin8-all.tar.gz 
```

Apple 相对于根目录`/`（

```
sudo tar fvxz gcc-4.2-5566-darwin8-all.tar.gz -C / 
```

完毕。

* * *

# 安装 RVM。

```
curl -L get.rvm.io | bash -s stable --ruby 
```

RVM 应该安装，yaml 和 ruby​​ 应该编译，你应该很高兴。

在安装 rails 和朋友时，文档转换为 UTF-8 给了我警告，我不太担心。安装的重要部件没有打嗝。

我在 Mac Server G4 (QS2002) DP 1.0 上运行 Mac OS X Server 10.4.11 Build 8S2169。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T01:16:07.757

对你有用`echo insecure >> ~/.curlrc`吗？我实际上不使用Mac。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T05:11:49.260

只需阅读消息，它会告诉您该怎么做。

David 的建议会起作用，但请记住，它会将您通过 curl 或 git 下载的所有内容带入不安全模式 - 不验证证书是否受信任。

作为提示，您可能会得到这个答案也很有帮助（比您得到的错误更多）：

*   [https://stackoverflow.com/a/7599151/497756](https://stackoverflow.com/a/7599151/497756)
*   [https://stackoverflow.com/a/7901540/497756](https://stackoverflow.com/a/7901540/497756)
*   [https://stackoverflow.com/a/6817139/497756](https://stackoverflow.com/a/6817139/497756)

# powershell - 如何从字符串运行程序？

> ID：10712154
> 
> 赞同：0
> 
> 时间：2012-05-23T00:59:54.993
> 
> 标签：powershell, windows-7, powershell-2.0

我在我想要运行的字符串中有应用程序的路径。例如：`[io.path]::Combine($path, $filename)`它被解释为`C:\foo\baa.exe`。我尝试过使用`&$path`运算符，但使用变量不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T01:03:28.860

我刚拥有`& $path`（注意空间）和`Invoke-Item $path`工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T08:45:50.593

就像是：

```
$path = "C:\Windows\System32\notepad.exe"
&$path 
```

应该管用。确保您正确设置路径。后面不需要空格`&`。

# ios - 企业应用程序能否检测到配置文件的存在？

> ID：10712155
> 
> 赞同：1
> 
> 时间：2012-05-23T01:00:12.780
> 
> 标签：ios, ios5

我正在 iOS 5 上开发一个企业 iPad 应用程序，它将在设备上存储敏感数据。我打算使用 iOS 数据保护来保护这些数据，并且需要强制密码复杂性，以便 DP 使用的加密密钥难以破解。我计划通过最终将通过 MDM 分发的配置文件来强制密码复杂性，但现在通过 iPhone 配置实用程序。

因此，目标是确保应用程序运行时存在此配置文件（因此配置了复杂的密码）。有没有办法将此企业应用程序与此配置文件“链接”？我还没有找到让应用程序询问 iOS 安装了哪些配置文件的方法（我也不认为应该有方法）。那么还有哪些其他选择可以实现这一目标呢？

# objective-c - 目录加载时间

> ID：10712157
> 
> 赞同：1
> 
> 时间：2012-05-23T01:00:21.860
> 
> 标签：objective-c, ios, image, directory

我的应用程序的功能之一是允许用户保存图像。这些图像稍后会在 UITableView 的详细视图和 UITableView 的单元格中呈现。但是，当返回到显示单元格的页面时，它需要很长时间才能加载。我相信这是因为图像被保存到文档目录中，并且每次加载页面时，它们都会从目录中重新加载。每次应用程序启动时，我是否应该将加载图像存储到内存中，或者我的理论是否可行。我还尝试使用以下代码压缩图像，但并没有提高性能。

```
 [[GTImageStore sharedStore] setImage:currentImage forKey:currentImageKey];

        NSString *jpgName = [[NSString alloc] initWithFormat:@"Documents/%@.jpg", currentImageKey];
        NSString *jpgPath = [NSHomeDirectory() stringByAppendingPathComponent:jpgName];

        float scale;
        if (currentImage.size.width < currentImage.size.height)
        {
            scale = 100/currentImage.size.width;
        }
        else if (currentImage.size.width > currentImage.size.height)
        {
            scale = 100/currentImage.size.height;
        }
        else
        {
            scale = 100/currentImage.size.width;
        }

        UIImage *image = [[UIImage alloc] initWithCGImage:currentImage.CGImage scale:scale orientation:[currentImage imageOrientation]];

        [UIImageJPEGRepresentation(image, 0.5) writeToFile:jpgPath atomically:YES]; 
```

非常感谢任何帮助！谢谢！

添加单元格的代码： - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath { UINib *giftCell = [UINib nibWithNibName:@"GiftCell" bundle:nil]; [tableView registerNib:giftCell forCellReuseIdentifier:@"UIGiftsTableCell"];

```
cell = [tableView dequeueReusableCellWithIdentifier:@"UIGiftsTableCell"];
if (!cell) {
    cell = [[GTGiftCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:@"UIGiftsTableCell"];
}

// Determine gift at index path
GTGift *gift = (GTGift *)[[[GTGiftStore sharedStore] allGifts] objectAtIndex:[indexPath row]];

[[cell textLabel] setText:[gift name]];
NSDateFormatter *formatter = [[NSDateFormatter alloc] init];
[formatter setDateStyle:NSDateFormatterLongStyle];
NSString *subText = [[NSString alloc] initWithFormat:@"Purchased on %@", [formatter stringFromDate:[gift datePurchased]]];
[[cell subTextLabel] setText:subText];

[[cell detailTopTextLabel] setText:[[gift givingTo] name]];
[[cell detailMiddleTextLabel] setText:[[gift reasonFor] name]];
[[cell detailBottomTextLabel] setText:[[gift boughtFrom] name]];

NSString *jpgName = [[NSString alloc] initWithFormat:@"Documents/%@.jpg", [gift imageKey]];
NSString *jpgPath = [NSHomeDirectory() stringByAppendingPathComponent:jpgName];
UIImage *imageToLoad = [[UIImage alloc] initWithContentsOfFile:jpgPath];
[[[cell image] layer] setBorderColor:[[UIColor lightGrayColor] CGColor]];
[[[cell image] layer] setBorderWidth:1];
[[cell image] setClipsToBounds:YES];
[[cell image] setContentMode:UIViewContentModeScaleAspectFill];
[[cell image] setImage:imageToLoad];

return cell; 
```

}

我使用带有名为 GTGiftCell 的 viewController 的 xib 文件创建了一个自定义单元格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T01:46:11.760

您可以采取两种方法

1.  如果您的应用程序需要在图像更改时加载图像，那么您继续按原样加载图像，但是如果图像需要更新和更改而无需用户刷新视图，您应该阅读苹果[并发编程指南以提高性能](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html)
2.  在应用程序加载时加载图像，但再次提高性能，请阅读[并发编程指南](http://developer.apple.com/library/ios/#documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html)

# asp.net - 如何为每个数据库行循环网格视图？

> ID：10712160
> 
> 赞同：0
> 
> 时间：2012-05-23T01:00:46.023
> 
> 标签：asp.net, gridview

我正在开发一个 asp.net 网络表单应用程序，它根据参数在单独的网格视图上显示一些信息。第二个网格视图取决于第一个网格视图中的值（Salida 和 Llegada，它们作为时间范围工作）。这仅在第一个 GV 上显示的数据只有一行时才有效。

这是它的工作原理：

![当前显示](../Images/1aa2f0a453fe69dfe8ed4a33da6e5a8f.png)

但是，有没有办法为存储在数据库中的每一行循环相同的网格视图？像这样的东西：

![所需的显示](../Images/50a0de362c95e4bd475b7397839ca000.png)

或者也许有一个我没有考虑过的更简单的选择。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:18:23.230

看起来有点笨拙，但最简单的选择可能是将 GV1 和 GV2 添加到中继器。中继器的每一行本质上都是 GV1 的数据源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-28T07:22:04.683

好的，它应该很简单，首先让你的 gridview1 分页只获取一条记录，然后在你填写你的 gridview1 之后，我假设你已经把一个 ID 作为 Datakeys 或者你使用过的任何方法，该行的索引应该为 0，因为它总是只查看一行。获取您的 id 并获取您的数据并将其绑定到第二个 gridview2。

在 Gridview1_Paging 事件之后，您再次绑定数据并使用上面相同的方法来获取下一条记录的数据。

# java - 在图形代码中处理除以零

> ID：10712163
> 
> 赞同：2
> 
> 时间：2012-05-23T01:01:04.383
> 
> 标签：java, math, image-processing, clojure, divide-by-zero

我正在编写一个用于程序图像生成（[Clisk](https://github.com/mikera/clisk)）的库，它允许用户定义自己的数学函数来生成图像。

他们显然可以定义一个函数，该函数可能导致某些像素被零除，例如（伪代码）

```
red = 1.0 / (xposition - 0.5) 
```

每当 xposition = 0.5（图像中间）时，这将导致除以零

理想情况下，我不希望图像生成崩溃......但同时我不想创建一个笨拙的黑客来忽略除以零，这会在以后引起问题。

什么是处理这些案件的良好、稳健、系统的方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T01:15:34.967

> 理想情况下，我不希望图像生成崩溃......但同时我不想创建一个笨拙的黑客来忽略除以零，这会在以后引起问题。

（我假设您的意思是该片段是一些用户提供的代码的示例......）

显然，如果用户提供的代码可能引发异常，那么您将无法阻止这种情况的发生。（并且在除法之前检查的建议显然与您无关。）

那么除了“崩溃”你*还能做什么呢？*生成空图像？忽略用户的功能？你会产生垃圾......这不是用户需要的。

您当然无法触及并修复他/她的 java 代码。（如果该片段是用某种自定义语言编写的代码，那么您也无法访问并更正它。您/您的库不知道用户提供的代码*应*该做什么......）

不。我认为*最好*的答案是将用户提供的代码中出现的任何意外（未经检查的）异常包装在您自己的异常中，清楚地告诉用户错误发生在他的代码中。然后由调用您的库代码的应用程序代码来处理异常还是“崩溃”。

* * *

如果您要求用户使用“良好、健壮、系统的方法”来编写他们的功能，我认为您是在找错树。这不是你真正关心的......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T15:49:34.007

您总是可以只提供一个参数*，询问*他们在除以零时要做什么。毕竟，这是他们的代码——他们应该知道什么最适合他们的情况。

那么问题就变成了，该参数的合理默认值是多少？我想说*“返回 0.0”*或*“抛出异常”*对于这个应用程序都是合理的。只要确保你记录它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T01:11:17.123

我真的不是图形程序员，但你可以

```
 private static final double MIN_X = 0.0000001

 red = 1.0 / Math.max(xpos - 0.5, MIN_X); 
```

显然，如果你允许负数，你可能不得不在那里删除一个绝对值

# tdd - 端到端测试整个系统的最佳实践

> ID：10712168
> 
> 赞同：4
> 
> 时间：2012-05-23T01:01:52.560
> 
> 标签：tdd, end-to-end

端到端测试意味着从外部边界运行应用程序以验证其行为。到目前为止，我只对单个可执行工件进行了书面测试。我应该如何测试由部署在不同主机上的多个工件组成的系统？

我看到了两种选择。

*   测试设置了整个系统，并从最外边缘进行了锻炼。
*   每个工件都经过独立的端到端测试，依靠测试内容来执行它们之间的协议。

是否有明确的理由只遵守其中之一，或者是首选其中之一，还是可以互换？如果可以互换，那么它们之间有哪些优缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T12:57:07.550

尽管我认为这取决于上下文，但我更喜欢第一种选择。以下是我的随机想法：

我希望我的测试尽可能紧密地映射到用例（BDD 风格）（声明我误用了用例这个术语）。这些用例可能跨越多个应用程序和子系统。

示例：*后台管理员可以从公共界面查看用户进行的交易。*

在这里，后台管理界面和公共界面是不同的应用程序，但它们包含在同一个用例中。

将这些想法映射到您在不同主机上部署子系统的问题，我想说这取决于从用户/参与者的角度来看它的使用方式。用例是否跨越多个子系统？

此外，系统部署在多个主机上这一事实可能对测试并不重要。您可以在测试中将进程间通信替换为方法调用，并在测试期间将整个系统置于同一进程中，从而降低复杂性。用仅验证进程间通信的测试来补充这一点。

**编辑：**

我意识到我忘了包括*为什么*我更喜欢测试整个系统。

您的资产是特征，即行为，而代码是负债。因此，您想测试行为，而不是代码（BDD 样式）。

如果您分别测试每个子系统，那么您是在测试代码，而不是功能。为什么？当您将系统划分为子系统时，您这样做是基于一些技术原因。当您了解更多时，您可能会发现所选接缝不是最佳的，并且希望将一些责任从一个子系统转移到另一个子系统。而且你必须同时修改测试和生产代码，让你没有安全网。这是测试实现细节的典型症状。

也就是说，这类测试太生硬，无法测试所有内容。因此，在必要时，您还需要对细节进行补充测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-26T14:27:29.047

*在任何情况下*，对每个工件进行端到端的单独测试都是非常可取的。这将确保每个工件都是健全的。

此外，您可能想要测试工件的组合。这将在工件之间的交互中发现问题。我不知道您的情况，但是拥有一个作为生产副本的测试环境很重要。在测试环境中测试系统是一个非常好的主意。您可能还想在生产环境中测试系统；这可能可行或不可行。例如，如果您的系统处理信用卡付款，您可能希望避免在生产系统上进行测试付款。

无论如何，单独测试每个系统比测试组合更重要。一旦你知道你的工件是孤立的，捕捉交互测试就会容易得多。如果您只有整个系统的端到端测试，那么当测试失败时，要理解错误在哪里要困难得多。

# asp.net-mvc - 在 ASP.NET MVC4 C# 中构建图表

> ID：10712174
> 
> 赞同：2
> 
> 时间：2012-05-23T01:03:18.627
> 
> 标签：asp.net-mvc, charts

我在数据库中有数据，并希望将它们显示在我网站上的图表中。我可能希望将来使此图表具有交互性，包括向下钻取等。

我仍处于构建它的早期阶段，目前正在试验，但是我找不到任何有用的资源来以编程方式构建图表。

目前，我有一个 ChartsController

```
public ActionResult GoldFixes()
    {
        Chart chart = new Chart(300, 400);
        chart.DataBindTable(db.Gfxs.Take(5));
        return View(chart);
    } 
```

但我不希望它返回视图，我想要一个图表 - 例如显示仪表板！

图表可以是图像，但绝对需要可访问。因此，对于交互性，我将不需要 FLASH 或任何东西。只是MVC4。

问题已解决 - 我正在使用 GOOGLE CHARTS！[https://google-developers.appspot.com/chart/interactive/docs/gallery/columnchart](https://google-developers.appspot.com/chart/interactive/docs/gallery/columnchart)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:14:34.013

[https://google-developers.appspot.com/chart/interactive/docs/gallery/columnchart](https://google-developers.appspot.com/chart/interactive/docs/gallery/columnchart)

# python - pyqt 打印预览 QTableView

> ID：10712176
> 
> 赞同：3
> 
> 时间：2012-05-23T01:03:41.953
> 
> 标签：python, printing, pyqt, qtableview, qpainter

我正在尝试将 QTableView 的内容打印到打印机。我实现了底部脚本，它运行成功，没有任何错误。但所有数据在 printPreview 中都是不寻常的。这是我的问题的[图片-](http://img4up.com/up2/75917679167425743216.png) [FOUNTAIN](http://www.qtcentre.org/threads/3796-QTableView-printing?highlight=Qprinter)

```
def printTable(self,printer,painter,area):
    model = self.model
    myTableView = self.view
    printer = painter 
    rows = model.rowCount();
    columns = model.columnCount();
    totalWidth = 0.0;
    totalPageHeight = 0.0;
    totalHeight = 0.0;
    for c in range(columns):
        totalWidth += myTableView.columnWidth(c)

    for p in range(45):
        totalPageHeight += myTableView.rowHeight(p);

    for r in range(rows):
        totalHeight += myTableView.rowHeight(r);

    xscale = area.width() / totalWidth;
    yscale = area.height() / totalHeight;
    pscale = area.height() / totalPageHeight;
    painter.scale(xscale, pscale);
    painter.translate(area.x() + xscale, area.y() + yscale);

    x=0
    #QStyleOptionViewItem option;

    for r in range(rows):
        ++x
        for c in range(columns):
            idx = model.index(r,c);
            option = myTableView.viewOptions();
            option.rect = myTableView.visualRect(idx);
            if r % 2 == 0:
                brush= QtGui.QBrush(QtGui.QColor(220, 220, 220), QtCore.Qt.SolidPattern);
                painter.fillRect(option.rect, brush);
            myTableView.itemDelegate().paint(painter, option, idx);

        if (x == 45):
            ok = printer.newPage();
            x=0;
            painter.translate(0, -1350);

####################### Now print Table ######################

printer = QtGui.QPrinter()
painter = QtGui.QPainter()
painter.begin(printer )
self.printTable(printer,painter, printer.pageRect()) 
```

如果您有任何可以帮助我的示例，请告诉我。太感谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:18:23.687

如果您使用的是 C++，我建议您使用专业的报告工具。可用的选项是[KDAB 报告工具](http://www.kdab.com/kdab-products/kd-reports/)和[Nocisoft NC 报告](http://www.nocisoft.com/ncreport.html)。AFAIK 没有可靠的 PyQt 报告库...

# php - PHP爆炸功能导致问题

> ID：10712185
> 
> 赞同：0
> 
> 时间：2012-05-23T01:05:49.937
> 
> 标签：php, mysql

我正在尝试为我的网站创建一个 twitter 风格的跟踪系统。当下面的脚本运行时，会在数据库中添加一个“数组”，而不仅仅是您要关注的人的用户 ID。不知道如何修复它。

```
<?
session_start();
# Connect to the mysql database
include_once "library/connect_to_mysql.php"; 

if(isSet($_POST['mem'])){

#filter everything but numbers for security
$mem1 = preg_replace('#[^0-9]#i', '', $_POST['mem']); 
$mem2 = $mem1;

#Decode the Session IDX variable and extract the user's ID from it
$decryptedID = base64_decode($_SESSION['idx']);
$id_array = explode("p3h9xfn8sq03hs2234", $decryptedID);
$my_id = $id_array[1];

$sql = mysql_query("SELECT following_array FROM Members WHERE id='$my_id' LIMIT 1"); 

while($row = mysql_fetch_array($sql)) { 
$following = $row["following_array"]; 
}

$followArry1 = explode(',', $following);

if (in_array($mem1, $followArry1)) {

exit(); 
}

if ($followArry1 != "") { 

$followArry2 = "$followArry1,$mem2"; 

} else { 

$followArry2 = "$mem2"; 
}

$UpdateArray = mysql_query("UPDATE Members SET following_array ='$followArry2' WHERE id='$my_id'") or die (mysql_error());

exit();

}else{

exit();
}

?> 
```

![爆炸（数组，2）](../Images/e4f9772642adf6600c0f816de981deaa.png)

任何帮助表示赞赏

```
/////// Updated Code ////////////////////

$followArry1 = explode(",", $following);

if (in_array($mem1, $followArry1)) { exit(); }

if ($followArry1 != "") { 

    $followArry1 = implode(',', $followArry1 + array($mem1)); 

} else { 

    $followArry1 = $mem1; 
}

$UpdateArray = mysql_query("UPDATE myMembers SET following_array ='$followArry1' WHERE id='$my_id'") or die (mysql_error()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T01:14:25.737

`$followArry1`是一个数组，转换为字符串显示“ `Array`”。

在此处查看证明（现场演示：http: [//ideone.com/tMndH](http://ideone.com/tMndH)）：

```
$followArry1 = array('a', 'b', 'c'); // just an array
$result = "$followArry1"; // it is now string containing "Array" 
```

尝试以下操作（示例：http: [//ideone.com/h5ilz](http://ideone.com/h5ilz)）：

```
$followArry1 = array('a', 'b', 'c');
$mem = 'd';
$followArry2 = implode(',', $followArry1 + array($mem)); 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-23T02:13:27.877

我还认为问题在于将 $mem 变量添加到 $followyArry1 数组。

试试这个代码...

```
if ($followArry1 != "") { 
    $followArry1[] = $mem1;
    $followArry1 = implode(',', $followArry1); 

} else { 

    $followArry1 = $mem1; 
} 
```

# android - 尽管有时在恢复应用程序时将项目添加到适配器，但 ListView 为空

> ID：10712190
> 
> 赞同：5
> 
> 时间：2012-05-23T01:06:16.927
> 
> 标签：android, android-listview, android-adapter, android-listfragment

我在市场上有一个应用程序有一个我似乎无法解决的错误。今天我把它追踪到了下面的方法。

```
public void updateDealList(ArrayList<Deal> deals) {
    // first call or showing bookmakrs (also gets called other times when adapter is null)
    if (dealListAdapter == null || showingBookmarks || !dealListAdapter.moreDealsToDownload()) { 
        dealListAdapter = new EndlessDealListAdapter(getActivity(),
                R.layout.deal_list_item, deals);
        setListAdapter(dealListAdapter);
        listView = getListView();
        if (getActivity().findViewById(R.id.right_fragment_container)!=null){ // if tablet
            listView.setChoiceMode(ListView.CHOICE_MODE_SINGLE);
            listView.setVerticalScrollbarPosition(View.SCROLLBAR_POSITION_LEFT);
        }
        showingBookmarks=false;
        Log.d("UPDATE_DEAL_LIST", "Notified list  created new" + dealListAdapter.getCount());
        return; //PROBLEM OCCURS WHEN APP COMES IN HERE AFTER RESUMING
    }
    dealListAdapter.getDealListAdapter().clear();
    for (Deal d: deals){
        dealListAdapter.getDealListAdapter().add(d);
        Log.d("UPDATE_DEAL_LIST", "added " + d.title);
    }
    dealListAdapter.notifyDataSetChanged();
    Log.d("UPDATE_DEAL_LIST", "Notified list " + dealListAdapter.getCount());
} 
```

此方法传递一个从 Internet 下拉的交易对象的数组列表。当应用程序第一次打开时，从互联网上提取数据并调用上述方法，该方法会创建一个为 ListFragment 设置的新适配器。当用户请求更多交易时，也会调用此方法。

我遇到的问题是列表有时认为它是空的，尽管适配器包含交易。当用户在设备内存不足时恢复应用程序时，这似乎会发生（我认为应用程序的一部分已从 ram 中删除）。调用此方法并且 dealListAdapter 为空，因此创建了一个新方法并添加了交易。尽管发生这种情况，列表仍然是空的，用户必须强制关闭应用程序才能让它再次工作。

下面的行显示了当方法被调用时它进入 if 并且 21 个交易被添加到适配器。不幸的是，该列表对用户来说是空的。

```
05-23 01:52:32.879: D/UPDATE_DEAL_LIST(3478): Notified list  created new21 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:05:22.553

一个想法（相当长的镜头:)

如果应用程序本身没有被杀死，只是 Activity，系统会尝试重新创建 Activity 的最后状态，调用 onRestoreInstanceState()。如果应用程序被杀死，则不会调用此方法 - 所以这是两者之间的最大区别之一。

ListActivity 覆盖 onRestoreInstanceState()。它确保列表在继续之前存在。如果列表不存在，它会从默认位置对其进行扩充。

如果您在 onResume() 中设置 contentView，请尝试将其移至 onCreate()，这可能会解决问题。

如果我看到活动的代码，我可以提供更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T18:28:36.763

您可以尝试以下一种或多种选择

*   尝试`setListShown(false)`在设置列表适配器之前调用。

*   否则，做
    `setListShown(false);`
    `setListAdapter(null);`

*   否则，做`requestLayout()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-29T12:09:59.220

我真的不知道这是否会有所帮助，但以下方法应该根据其子项调整您的列表大小。我不明白为什么有时 notifyDataSetChanged() 不起作用，列表根本没有改变，但是使用它解决了我的问题。

```
 public static class Utility {
    public static void setListViewHeightBasedOnChildren(ListView listView) {
        ListAdapter listAdapter = listView.getAdapter();
        if (listAdapter == null) {
            // pre-condition
            return;
        }

        int totalHeight = 0;
        int desiredWidth = MeasureSpec.makeMeasureSpec(listView.getWidth(), MeasureSpec.AT_MOST);
        for (int i = 0; i < listAdapter.getCount(); i++) {
            View listItem = listAdapter.getView(i, null, listView);
            listItem.measure(desiredWidth, MeasureSpec.UNSPECIFIED);
            totalHeight += listItem.getMeasuredHeight();
        }

        ViewGroup.LayoutParams params = listView.getLayoutParams();
        int newHeight = totalHeight + (listView.getDividerHeight() * (listAdapter.getCount() - 1));
        if (newHeight >= 100)
            params.height = newHeight;  
        else 
            params.height = 100;
        listView.setLayoutParams(params);
        listView.requestLayout();
    }
} 
```

希望能帮助到你！

# jquery - 如何改进我的 asp.net mvc 3 Web 应用程序的默认布局模板？

> ID：10712193
> 
> 赞同：0
> 
> 时间：2012-05-23T01:06:51.187
> 
> 标签：jquery, css, asp.net-mvc-3, razor

我需要在我的 asp.net mvc3 Web 应用程序的默认布局模板中改进以下内容。部分布局模板如下所示：-

```
<div id="logindisplay">
                @Html.Partial("_LogOnPartial")
            </div>
            <nav>
                <ul id="menu">
                    <li>@Html.ActionLink("Home", "Index", "Home")</li>
                    <li>@Html.ActionLink("Statistics", "Index", "Statistics")</li>
                    <li>@Html.ActionLink("About", "About", "Home")</li>
                </ul>
            </nav>
        </header>
        <section id="main">
            @RenderBody()
        </section> 
```

我想做的是：-

1.  我如何`<li>...</li>`更改 `<ul id="menu">.`. 这可以帮助用户识别当前正在查看的网页。
2.  我如何添加一个子菜单，当用户将鼠标移到特定`<li></li>.` BR上时该子菜单将自动显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T02:01:08.850

您应该使用不同的菜单，那里有很多！检查此[链接](http://www.tripwiremagazine.com/2012/03/jquery-menu-plugins.html)以查找一些`JQuery`菜单。

哦，顺便说一句，在您的第二个问题中，您需要的是一个名为`hover()`（[学习](http://api.jquery.com/hover/)如何使用它）的 JQuery 函数，但别担心，这也在这些菜单中实现，只需获取其中一个并根据您的需要进行调整。

希望它有点帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T09:42:51.920

[您可以使用MVCSiteMapProvider](https://github.com/maartenba/MvcSiteMapProvider)创建多级站点地图。这是一个很好的[教程](http://edspencer.me.uk/2011/09/20/mvc-sitemap-provider-tutorial-2-breadcrumbs/)，可以帮助您入门。它使用显示模板生成菜单，您可以轻松地对其进行样式设置和更改。

如果您更喜欢手动创建菜单并希望设置当前选定菜单项的样式，请按照本教程操作：[在 MVC3 中创建活动菜单项](http://derekreynolds.wordpress.com/2012/03/19/create-activecurrent-menu-item-in-mvc3/)

最后一件事是如何为您的菜单设置样式/动画。有大量可用的 jQuery 插件，例如[14 个易于实现的下拉菜单解决方案](http://webdesignledger.com/resources/14-easy-to-implement-drop-down-menu-solutions)。

我个人非常喜欢[Twitter Bootstrap](http://twitter.github.com/bootstrap/index.html)及其[组件](http://twitter.github.com/bootstrap/javascript.html#dropdowns)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T01:21:19.477

```
<ul id="menu">
  <li class="current">Home</li>
<ul>

<style>
  .current{background:#000;}
</style> 
```

对于下拉菜单，请访问此处：[http](http://www.cssnewbie.com/easy-css-dropdown-menus/) ://www.cssnewbie.com/easy-css-dropdown-menus/ 。

# java - 如何使用 Android 接收特定无线电频率

> ID：10712199
> 
> 赞同：3
> 
> 时间：2012-05-23T01:08:03.290
> 
> 标签：java, c, mobile, android-ndk, telecommunication

是否可以编写一个 Android 应用程序以在 120-130 MHz 范围内的频率上接收（不担心传输）的 Android 操作系统手机上使用？我看到了一个带有 Arduino 板的选项，还看到了一些关于使用 NDK 的信息。我是否必须使用像 C 这样的语言来进行较低级别的硬件编程才能与 Android 移动应用程序的 Java 部分集成？我宁愿只在大多数智能手机上使用板载硬件，特别是摩托罗拉 Droid Bionic。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T15:43:41.443

谢谢！我刚刚完成了更多的挖掘。大多数手机上的接收器，包括 Droid 3 和 Droid Bionic 的接收频率都不高于 108 MHz。最后，我还对软件定义的无线电交易进行了 wiki-ing。非常酷的东西有望最终出现在我们的手机技术中。我在 phandroid.com/2011/09/12/... 获得了 FM 调谐器。显然，这和你能得到的一样好：P（你不能选择在安卓手机上接收特定的无线电频率）

# reporting-services - 根据行组计算行数

> ID：10712200
> 
> 赞同：0
> 
> 时间：2012-05-23T01:08:04.963
> 
> 标签：reporting-services, ssrs-2008

我正在 SSRS 2008R2 中创建报告。报告如下所示：

```
 NSN         Learner          Employer      Completed Date
 Qualification 1      123356       Tom             Employer 1     12/2/2012
                      213134       Jerry           Employer 2     25/2/2010
                      545456       Harry           Employer 3     04/2/2011
 Qualification 2      565557       Pete            Employer 1     17/12/2001
                      154646       Susie           Employer 5     12/13/2005 
```

我想计算一个资格中的记录总数，并在每个资格之后将其作为一行放在表中。表按资格字段分组。报告应如下所示：

```
 NSN         Learner          Employer      Completed Date
 Qualification 1      123356       Tom             Employer 1     12/2/2012
                      213134       Jerry           Employer 2     25/2/2010
                      545456       Harry           Employer 3     04/2/2011
                                                   **Total             3**
 Qualification 2      565557       Pete            Employer 1     17/12/2001
                      154646       Susie           Employer 5     12/13/2005
                                                    **Total             2** 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:53:15.043

您可以在组后添加总计并使用表达式`CountDistinct(Completed_Date)`来获得所需的值

# haskell - Haskell curl在状态401上缺少内容

> ID：10712201
> 
> 赞同：3
> 
> 时间：2012-05-23T01:08:35.177
> 
> 标签：haskell, libcurl, http-status-code-401

`curl`我在最新版本 1.3.7 中的 haskell 库有一些问题。

Haskell 中的一些例子：

```
module CurlTest where

import Network.Curl

url = "http://www.example.com/private/"
opts = [CurlFollowLocation True]

main = withCurlDo $ do
    curlGet url opts
    return () 
```

我用 ghci 运行这个片段，但没有得到任何输出。在状态码为 200 的公共网站上，我得到了页面内容。正如预期的那样，即使在`curl`401 个站点上，我也可以从命令行获得页面内容。

我错过了 haskell `curl`-call 的选项，还是一个错误？如果它是一个错误，haskell 中是否有解决方法或一些`curl`-alternatives？

问候

# ssrs-2008 - SQL Server 2008 SSRS 主页错误

> ID：10712203
> 
> 赞同：0
> 
> 时间：2012-05-23T01:08:44.573
> 
> 标签：ssrs-2008, reporting-services

我使用报表向导在 BI 中创建了一个基本报表并尝试发布它。

这是我得到的错误 -

> 错误 1 ​​授予用户 'xx-PC\xx' 的权限不足以执行此操作。0 0

在 URL ../Reports/Pages/Folder.aspx 我收到此错误

> 用户 'xx-PC\xx' 没有所需的权限。验证是否已授予足够的权限并且已解决 Windows 用户帐户控制 (UAC) 限制。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T09:10:47.193

对于这个问题，您需要将您的帐户添加到 ReportServer 目录中。请按照以下步骤解决此问题 -

*   转到报表服务器 url (localhost/Reports)
*   单击“**文件夹设置**”按钮
*   点击“**新角色分配**”
*   添加您的“**组或用户名**”（ID 为例如 ZA\sg677888 的域名）并选中所有复选框
*   点击确定

希望这对你有帮助！！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:30:28.267

仅使用 NETBIOS 名称浏览服务器时，我收到这些错误消息。使用完全限定的域名，例如 myreportingserver.mycompany.com

# php - 在搜索结果中获取粗体关键字

> ID：10712204
> 
> 赞同：1
> 
> 时间：2012-05-23T01:08:45.007
> 
> 标签：php

任何人都可以帮助我，我正在尝试为我的案例找到一种正确的方法，以便在搜索结果中以粗体显示关键字，例如，当用户在我需要的搜索列表中搜索关键字“年份”时

2012**年**新年

**2052**年****

 ****新年**好

 **这是我的搜索功能

```
$where = '';
$whereParams = array();
  if(!empty($this->query) && !$this->queue) {
  $this->logQuery();
  $where .= (empty($where) ? ' WHERE' : ' AND') . ' MATCH(d.title) AGAINST(:query)';
  $whereParams['query'] = $this->query;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T01:10:00.467

```
 $bold_keyword = str_replace($keyword, '<b>'.$keyword.'</b>', $text_with_keyword); 
```****

# javascript - 浏览器缓存与我的 javascript 冲突以将值添加到列表框

> ID：10712210
> 
> 赞同：0
> 
> 时间：2012-05-23T01:10:20.343
> 
> 标签：javascript, sql-server, caching, asp-classic, listbox

我制作了一个 javascript 来制作列表框的值列表。这些值来自`SQL Server`. 当我对数据库上的值进行一些更改时，我的列表框中的值不会更新。似乎浏览器缓存了值什么的，因为当我清除浏览器上的缓存时，列表框中的值会更新。

这是我的javascript（authapp.js）：

```
$(document).ready(function(){
  $(window).load(function(){                           
    var loads = '<table>'+
                '<tr>'+
                '<td align="center" class="label">'+
                '<img src="../../../Images/loading.gif" alt="Please wait..."
                  align="middle" style="width:30px;height:30px;">'+
                '</td>'+
                '</tr>'+
                '<tr>'+
                '<td align="center" class="label">'+
                '<font color="#FFFFFF" face="Arial, Helvetica, sans-serif">Loading...</font>'+
                '</td>'+
                '</tr>'+
                '</table>';

    //load selected customer
    $.ajax({
        type: "GET",
        url: "master/authtpl/queries/get_sel_cust.asp",
        data: "cunit="+$('#cunit').val()+"&ccduser="+$('#ccduser').val(),
        beforeSend: function(){
                $('#load_sel').block({ 
                message: loads, 
                css: { border: 'none',
                       top: '10%',
                       width: '10%',
                       backgroundColor: '#606060', 
                       opacity: '0.3'
                      } 
                });
             },
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function(response) {
          $('#load_sel').unblock();
          if(response==undefined){
              alert('List q of Selected Customer is not available!');
          } else {
              $('#selSelected').empty();
              var cust = (typeof response.cust) == 'string' ? eval('(' + response.cust + ')') : response.cust;
              // get data from json
              var count = 0,strs = '';
              lent = cust.length;
                do {
                  strs += '<option value="'+cust[count].ckode+'|'+cust[count].cgrup+'|'+cust[count].cnama+'">'+cust[count].ckode+' - '+cust[count].cnama;
                  count++;
                } while (count < lent);
                $('#selSelected').append(strs);
          }
        }
      });   
    });
}); 
```

这是我获取该值的查询（get_sel_cust.asp）：

```
<!-- #INCLUDE file = "../../../include/createconnection.asp" -->

<%
    dwdb = Application("DWDB")

    ccdappl = Application("CCDAPPL")
    ckdunitkey = trim(Request.QueryString("cunit"))
    ccduser = trim(Request.QueryString("ccduser"))

    sql = "select distinct ckdrelasi,ckdgruprelasi,vnamarelasi  "&_
          "from " & dwdb & ".dwaustasia.dbo.ms_webuser_apprtpl "&_
          "where ckdunitkey='"&ckdunitkey&"' and ccduser='"&ccduser&"' and ccdappl='"&ccdappl&"' "&_
          "order by ckdrelasi"
    objCommand.commandText = sql
    'response.write sql
    set aloc = objCommand.execute
    if NOT aloc.BOF then
        aloc.moveFirst
        json = "{ ""cust"" : [ "
        body_json = ""
        temp = ""
        WHILE NOT aloc.EOF
            temp =  "{"&_
                            """ckode"":"""&aloc("ckdrelasi")&""","&_
                            """cgrup"":"""&aloc("ckdgruprelasi")&""","&_                            
                            """cnama"":"""&aloc("vnamarelasi")&""""&_
                    "},"
            body_json = body_json&temp
            aloc.moveNext
        WEND
        body_json = mid(body_json,1,len(body_json)-1)
        json2 = "   ] } "   
        hasil = json&body_json&json2
        response.write hasil
    end if  

    set objCommand = nothing
    response.end
%> 
```

这是列表框形式（default.asp）：

```
<SELECT name="selSelected" id="selSelected" MULTIPLE SIZE="10" class="label" style="width:250px;">

                    </SELECT> 
```

我不知道问题出在哪里。你能告诉我我的编码有没有错误？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T01:23:26.293

尝试在 jQuery 中禁用 AJAX 缓存：

```
$.ajaxSetup ({
    // Disable caching of AJAX responses
    cache: false
}); 
```

有很多地方可能会发生缓存 - 但从客户端开始并向后工作会更容易。

# eclipse - 如何从 Eclipse 中的 Java 类跳转到 Spring 上下文 XML 文件

> ID：10712212
> 
> 赞同：2
> 
> 时间：2012-05-23T01:10:47.763
> 
> 标签：eclipse, spring, spring-tool-suite, sts-springsourcetoolsuite, spring-ide

我很好地阅读了[如何从 Eclipse 中的 Java 类中找到 Spring XML 定义](https://stackoverflow.com/questions/6309733/how-to-find-spring-xml-definition-from-java-class-in-eclipse)的问题，但它似乎没有回答我的类似问题。

我想从编辑器中的 Java 类跳转到 spring 上下文 xml 文件。

如果我在编辑器中突出显示类声明，通过按快捷键或单击某个图标，它应该打开具有 bean 初始化定义的相应 spring 上下文 xml 并跳转到初始化 bean 的行“< bean id=.. .>”。如果我在编辑器中突出显示了一个 set 方法，它会执行类似的操作，但会跳转到设置属性的位置“<property name=method_name...>”

我正在为 Web Developers Indigo SR2 使用 Eclipse Java EE IDE。我已经安装了 Spring IDE Developers 和 SpringSource。我在项目中添加了 Spring 性质，在项目属性 Spring Beans Support Config Files 中添加了上下文 xml，并且可以看到上下文文件和 java 类的文件图标装饰器上的“S”，但我找不到跳转的方法从 Java 类到 spring 上下文 xml。

我的同事正在使用 IntelliJ，他们可以在类声明旁边的编辑器中看到一个 bean 图标。我希望在 Eclipse 上看到类似的东西。理想情况下，不仅是类级别，还包括设置方法。

任何建议将不胜感激！

谢谢格里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-07-15T19:09:01.417

所需的操作由 Spring Tools (Spring Tool Suite) 提供，它可以以通常的方式安装，即作为 Feature 或通过 Eclipse Marketplace。

*   您当前的项目需要“春季项目性质”
*   此外，您的构建必须包含“spring project builder”
*   并且，在您的项目配置项目>属性，“Spring”选项卡中，您需要定义所有 Spring XML 文件。

在 Eclipse Mars 中，所有这些都将在导入 Maven 项目并使用 M2E 插件时自动设置。此外，“Spring”选项卡中还有一个设置，允许自动检测您的 Spring XML 文件。无论如何，spring 项目配置需要在项目的增量构建期间解析和评估这些 XML 文件。到目前为止，先决条件。

实际的功能叫做“ **open spring bean** ”

默认情况下，此操作没有键绑定，所以要么

*   按名称调用它：按 ctl-3 并开始输入名称“open spring bean”
*   设置自定义键绑定：再次按 ctrl-shift-L 和 ctrl-shift-L，以获取键绑定编辑器。使用搜索找到“open spring bean”功能，确保选择“in windows”作为范围并添加您喜欢的键绑定（我使用了 ctrl-y，在使用时用左手输入很好鼠标用右手）。

此功能将为您提供一个 Eclipse 典型的快速悬停和搜索框，您可以在其中开始输入。如果光标位于 bean 实现 Java 类的类名上，则视图将被填充，您只需按 Enter。

* * *

`<Rant>` *这是一个如此重要和基本的特征。为什么 Spring 和 Eclipse 的人无法以一种容易发现的方式设置和记录非常基础的内容，这超出了我的理解。难怪每个白痴都认为 IntelliJ 非常优越，但事实并非如此。实际上，两者都处于平等地位，并且到处都有自己的长处和短处。* `</Rant>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T05:43:20.170

我不知道 SpringSource 之类的是否有任何特定的键，但是可以使用旧的 Ctrl-shift-R (Navigate -> Open Resource) 来搜索和打开工作区中的非 Java 文件（如 .xmls和 .properties），对于类，您可以使用 Ctrl-shift-T（导航 -> 打开类型）。当搜索窗口打开时，只需开始输入文件名或类名（您也可以使用 * 和 ? 等通配符）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-04T09:33:45.083

`Alt+Shift+B`如果您使用的是 Spring Tools Suite，请使用。

# sql-server - 数据库设计链表与排序依据

> ID：10712213
> 
> 赞同：2
> 
> 时间：2012-05-23T01:11:06.703
> 
> 标签：sql-server, database, database-schema

我有一张需要按顺序保存一些用户操作的表。我可以通过使用类似于链表的自引用表来保存它，或者根本不使用自引用，而只使用时间戳来保持序列。此表引用了其他表，例如与操作关联的用户和文件。这些操作将需要支持 CRUD。操作频率按以下顺序排列：检索 > 插入 > 更新 > 删除

您的设计偏好是什么，为什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T01:32:41.393

我会避免像瘟疫那样的“链表”。他们唯一擅长的就是检索“下一个”项目。问题是每一个额外的“跳跃”都需要一个连接，所以如果你想对其进行参数化（例如，提供一个检索`N`给定项目之后的项目的函数），那么你需要（1）机器生成的连接之一（2）多项选择 (3) 不太可能被您的 ORM 移植和/或支持的 SQL。

这与使树在 sql 中臭名昭著的问题相同。它是通过递归连接“修复”的，但就是上面的（3）（也许我是过时的，有人会说这些现在得到了很好的支持——如果是这样，我想我会学习......）。

# javascript - 从 img 标签中删除 onclick 事件

> ID：10712219
> 
> 赞同：21
> 
> 时间：2012-05-23T01:11:53.350
> 
> 标签：javascript

这是我的代码：

```
<div id="cmdt_1_1d" class="dt_state1" onclick="sel_test(this.id)">
<img id="cmdt_1_1i" onclick="dropit('cmdt_1_1');" src="/site/hitechpackaging/images/items/bags_menu.jpg ">
<span class="dt_link">
<a href="javascript://">BAGS</a>
</span>
</div> 
```

不幸的是我不能修改这个文件，有没有办法使用javascript来禁用img标签的onclick。

我正在使用这个脚本，但它禁用了所有图像的 onclick 事件。但我只想要这个组件

```
var anchorElements = document.getElementsByTagName('img');
// for (var i in anchorElements)
 //   anchorElements[i].onclick = function() {
       // alert(this.id);
 //       return false;
 //   } 
```

任何想法将不胜感激。

编辑：有没有办法阻止函数 dropit 执行，是否可以使用 javascript。在页面加载等

另一种选择是我可以使用javascript重命名img文件吗？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2012-05-23T01:20:14.753

```
document.getElementById('cmdt_1_1i').removeAttribute("onclick"); 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-23T01:16:18.290

```
var eles = document.getElementById('cmdt_1_1d').getElementsByTagName('img');
for (var i=0; i < eles.length; i++)
   eles[i].onclick = function() {
     return false;
   } 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-23T01:56:47.727

很多答案，但最简单的是：

```
document.getElementById('cmdt_1_1i').onclick = ''; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T01:17:42.797

尝试这样的事情：

```
var badImage = document.getElementById("cmdt_1_1i");
badImage.onclick = null;
badImage.addEventlistener("click",function(e){
    e.preventDefault();
    e.stopPropagation();
    return null;
},true); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-30T16:08:43.153

如果您以后需要恢复 onclick 属性，可以在覆盖之前将其保存在字段中：

```
document.getElementById(id).saved=document.getElementById(id).onclick;
document.getElementById(id).onclick = ''; 
```

以便以后您可以恢复它：

```
document.getElementById(id).onclick=document.getElementById(id).saved; 
```

这在原始 onclick 属性包含一些动态计算值的情况下尤其有用。

# android - 用于 android 的 loopj 中的 Cookie

> ID：10712221
> 
> 赞同：2
> 
> 时间：2012-05-23T01:12:05.707
> 
> 标签：android, cookies

如何使用 loopj 获取 cookie？我知道如何设置它，但我无法得到它。[http://loopj.com/android-async-http/](http://loopj.com/android-async-http/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T08:20:20.900

假设您正在创建和使用自己的`PersistentCookieStore`实例，如下所示：

```
CookieStore cookieStore = new PersistentCookieStore(this)
httpClient.setCookieStore(cookieStore); 
```

然后您可以简单地使用`cookieStore`您在上面创建的实例。

否则，使用[来自 github 的最新 android-async-http](https://github.com/loopj/android-async-http)，您可以执行以下操作：

```
HttpContext httpContext = httpClient.getHttpContext();
CookieStore cookieStore = (CookieStore) httpContext.getAttribute(ClientContext.COOKIE_STORE); 
```

拥有`cookieStore`实例后，您可以[按照文档](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/CookieStore.html)访问 cookie。

# javascript - 如何在动画完成之前停止按下导航按钮？

> ID：10712222
> 
> 赞同：2
> 
> 时间：2012-05-23T01:12:06.597
> 
> 标签：javascript, jquery, animation, navigation

我是个白痴，所以就这样吧……

问题：我正在使用幻灯片式导航系统来浏览产品。一切都很好，直到在动画完成之前多次单击下一个/上一个箭头。多次单击它会导致事物完全出错，并将 div 发送到不可逆转的水平螺旋中穿过地狱。我想知道是否有办法阻止用户多次单击下一个/上一个箭头，这样幻灯片导航就不会消失。

编码：

```
 var SlideWidth = 305;
    var SlideSpeed = 1000;

    $(document).ready(function () {
        // set the prev and next buttons display
        SetNavigationDisplay();
    });

    function CurrentMargin() {
        // get current margin of slider
        var currentMargin = $("#slider-wrapper").css("margin-left");

        // first page load, margin will be auto, we need to change this to 0
        if (currentMargin == "auto") {
            currentMargin = 0;
        }

        // return the current margin to the function as an integer
        return parseInt(currentMargin);
    }

    function SetNavigationDisplay() {
        // get current margin
        var currentMargin = CurrentMargin();

        // if current margin is at 0, then we are at the beginning, hide previous
        if (currentMargin == 0) {
            $("#PreviousButton").hide();
        }
        else {
            $("#PreviousButton").show();
        }

        // get wrapper width
        var wrapperWidth = $("#slider-wrapper").width();

        // turn current margin into postive number and calculate if we are at last slide, if so, hide next button
        if ((currentMargin * -1) == (wrapperWidth - SlideWidth)) {
            $("#NextButton").hide();
        }
        else {
            $("#NextButton").show();
        }
    }

    function NextSlide() {
        // get the current margin and subtract the slide width
        var newMargin = CurrentMargin() - SlideWidth;

        // slide the wrapper to the left to show the next panel at the set speed. Then set the nav display on completion of animation.
        $("#slider-wrapper").animate({ marginLeft: newMargin }, SlideSpeed, 'easeInOutElastic', function () { SetNavigationDisplay() });

}

    function PreviousSlide() {
        // get the current margin and subtract the slide width
        var newMargin = CurrentMargin() + SlideWidth;

        // slide the wrapper to the right to show the previous panel at the set speed. Then set the nav display on completion of animation.
        $("#slider-wrapper").animate({ marginLeft: newMargin }, SlideSpeed, 'easeOutElastic', function () { SetNavigationDisplay() });
    } 
```

和导航按钮：

```
<a href="javascript:void(0)" onclick="PreviousSlide()" id="PreviousButton" style="padding-right:40px;"><img src="IMGS/arrow2.png"></a><a href="javascript:void(0)" onclick="NextSlide()" id="NextButton" style="padding-right:40px;"><img src="IMGS/arrow.png"></a> 
```

任何帮助=来自我的性崇拜。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T01:21:59.633

在动画开始时和动画结束回调函数中设置一个名为`animating`您设置的标志。然后只需测试标志的状态以确定您是否触发下一个/上一个逻辑。`true``false`

```
var animating = false;

// ...SNIP...

    function NextSlide() {
        if (!animating) { 
            animating = true;

            // get the current margin and subtract the slide width
            var newMargin = CurrentMargin() - SlideWidth;

            // slide the wrapper to the left to show the next panel at the set speed. Then set the nav display on completion of animation.
            $("#slider-wrapper").animate({ marginLeft: newMargin }, SlideSpeed, 'easeInOutElastic', function () { animating = false; SetNavigationDisplay() });
        }
    }

    function PreviousSlide() {
        if (!animating) { 
            animating = true;

            // get the current margin and subtract the slide width
            var newMargin = CurrentMargin() + SlideWidth;

            // slide the wrapper to the right to show the previous panel at the set speed. Then set the nav display on completion of animation.
            $("#slider-wrapper").animate({ marginLeft: newMargin }, SlideSpeed, 'easeOutElastic', function () { animating = false; SetNavigationDisplay() });
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T01:27:50.943

有一个变量定义为`var animationFinished = "no";`，一旦完成，让它成为`animationFinished = yes;`。然后有条件的说法`if (animationFinished == "yes")`一旦点击过程完成。

最好将其设为布尔变量，以便它是`bool animationFinished = false;`或`true`

或者正确的方法是。

```
$("#PreviousButton").click({ 
    $("#PreviousButton").fadeOut(300);
    $("#slider-wrapper").animate({ 
         marginLeft: newMargin }, SlideSpeed, 'easeInOutElastic', 
    ), 5000, function() {
        // Animation complete.
        SetNavigationDisplay();
        $("#PreviousButton").fadeIn(300);
        };
}); 
```

一个更好的方法是使用`.addClass`and`.removeClass`函数，并为此设置条件。

jQuery 我认为没有检查每个动画是否已完成的功能。您只需要使用`.animate`函数具有的回调，即后续`function(){ }`大括号中的内容。

# asp.net-web-api - 实现 ASP.NET WebAPI 版本控制的最佳方式是什么？

> ID：10712225
> 
> 赞同：4
> 
> 时间：2012-05-23T01:12:42.827
> 
> 标签：asp.net-web-api

版本 WebAPI 的最佳方法是什么？

我正在从头开始构建一个 API，我想确保它在未来能够优雅地进行版本化。我正在设想类似 mysite.com/api/v2/...

我看到的一种方法是为每个 API 版本创建一个单独的项目（网络应用程序）。但也许有更好的方法来做到这一点？

谢谢你的想法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T08:24:20.480

Including version number in the URL is the standard approach as I explained in this post (I do not repeat the content): [Implementing versioning a RESTful API with WCF or ASP.Net Web Api](https://stackoverflow.com/questions/10592078/implementing-versioning-a-restful-api-with-wcf-or-asp-net-web-api/10599004#comment13910301_10599004)

You do not need to create a completely new project although you can. The problem that you will be facing with a single project is that there will be collision of names:

> /api/v1.0/Car/123

and

> /api/v2.0/Car/123

both will point to `CarController` while you can have only one of those. The solution would be to implement your own `IHttpControllerSelector` and register with the DependencyResolver. This implementation will look at the version number and perhaps find the type based on the namespace.

* * *

# UPDATE

I do not intend to start a REST controversy here. But as @DarrelMiller points out, here is an older discussion on the same subject **discouraging** my suggested approach:

[How to version REST URIs](https://stackoverflow.com/questions/972226/how-to-version-rest-uris/975394#975394)

I *personally* think URL versioning is the way to go.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-01T14:46:21.813

您将需要创建自己的`IHttpControllerSelector`. 最好的方法是将此实现基于 Microsoft 的`IHttpControllerSelector`. 然后，您可以决定是`IHttpControllerSelector`要按 URL 还是按内容类型进行版本控制。

最基本的实现直接实现`IHttpControllerSelector`并且只是实现该`SelectController`方法，但出于性能原因，最好围绕它实现一些缓存。

为了找到控制器，您`IHttpControllerTypeResolver`可以简单地使用可以使用的实例`HttpConfiguration.Services`。

我用过这样的东西：http: [//damsteen.nl/blog/implementing-versioning-in-asp.net-web-api](http://damsteen.nl/blog/implementing-versioning-in-asp.net-web-api)。还要在 Github 上放一些代码：[https](https://github.com/Sebazzz/SDammann.WebApi.Versioning) ://github.com/Sebazzz/SDammann.WebApi.Versioning 。

# ruby-on-rails - 让 Legacy Rails 站点启动并运行，但存在依赖问题

> ID：10712226
> 
> 赞同：1
> 
> 时间：2012-05-23T01:12:43.850
> 
> 标签：ruby-on-rails, ruby, rubygems, ruby-on-rails-2

我刚刚从客户那里继承了一个 Rails 站点，并试图在我的计算机上启动并运行它。不断遇到有关依赖项和 ruby​​ 版本的错误。有没有正确的方法来解决这个问题，还是只是继续摆弄宝石的版本，直到一切都很好

这是我在站点根目录中名为 GEM_LIST 的文件中拥有的宝石列表：

```
actionmailer (2.2.2)
actionpack (2.2.2)
activemodel (3.0.9)
activerecord (2.2.2)
activeresource (2.2.2)
activesupport (3.0.9, 2.2.2)
arel (2.0.10)
builder (2.1.2)
capistrano (2.8.0)
chronic (0.6.2)
composite_primary_keys (2.2.2)
diff-lcs (1.1.2)
highline (1.6.2)
hominid (3.0.2)
i18n (0.5.0)
mysql (2.8.1)
net-scp (1.0.4)
net-sftp (2.0.5)
net-ssh (2.1.4)
net-ssh-gateway (1.1.0)
rack (1.3.2)
rails (2.2.2)
rake (0.8.7)
rspec (1.3.2)
rspec-core (2.6.4)
rspec-expectations (2.6.0)
rspec-mocks (2.6.0)
rspec-rails (1.3.2)
tzinfo (0.3.29)
will_paginate (2.3.16) 
```

我尝试单独安装每个并尝试运行 ruby​​ 脚本/服务器并收到此错误

```
/home/#####/.rvm/gems/ruby-1.8.7-p358/gems/rails-2.2.2/lib/rails/gem_dependency.rb:224:in `specification': undefined method `version_requirements=' for #<Gem::Dependency:0x7f4a3f884308> (NoMethodError) 
```

运行 ruby​​ 1.8.7 Gem 版本 1.3.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:41:50.993

我使用 gem -v1.3.5 和 rails 2.2.2 没有问题。降级到该版本应该可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T01:35:26.553

您的 Rails 版本与该版本的 ruby​​gems 不兼容。尝试旧版本的 ruby​​gems，例如 1.3.1。

# html - 悬停在最上面的div的背景？

> ID：10712228
> 
> 赞同：2
> 
> 时间：2012-05-23T01:13:06.027
> 
> 标签：html, css

看一眼：

[http://jsfiddle.net/PPsHd/](http://jsfiddle.net/PPsHd/)

正如预期的那样，悬停在中心 div 上会触发所有 div 的悬停事件。有没有办法只改变悬停鼠标下第一个 div 的背景？也就是说，悬停在中心 div 上只会改变中心 div 的颜色？

编辑：对于用户添加的任意数量的嵌套 div，这需要成为可能，我可以在 javascript 中做到这一点，但更喜欢 CSS 解决方案。

我已经在使用：

```
(function(){
    var highlightedDiv;
    $(document.body).on('mouseover','div',function(e){
        if(highlightedDiv){
            highlightedDiv.style.backgroundColor='';
        }
        (highlightedDiv=this).style.backgroundColor = 'lightGray';
        e.stopPropagation();
    });
}
)() 
```

​</p>

​</p>

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T01:32:45.040

你对事件冒泡犯规了——我看不出你怎么能在 CSS 中做到这一点——

如果你乐于使用一点 jQuery - 你可以这样做：

```
$("DIV").bind("hover",function(event){
    $(".Hover").removeClass("Hover");
    $(this).addClass("Hover");     
    event.stopPropagation();
 }); 
```

CSS：

```
div{
    padding-top:50px;
    margin:auto;
    border:1px solid lightGray;
    background:gray;
}
.Hover{
    background:lightGray;
} 
```

诀窍是阻止事件冒泡到其他 div - 你[可以看到它在行动](http://jsfiddle.net/QNBEe/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T01:38:41.777

你不能嵌套div。如果将它们相互叠加并设置 z-index，则可以使用 css 实现此效果。

[http://jsfiddle.net/t9znR/](http://jsfiddle.net/t9znR/)

# c++ - 是否有 C++ 命令的搜索引擎？

> ID：10712231
> 
> 赞同：3
> 
> 时间：2012-05-23T01:13:31.883
> 
> 标签：c++

自过去 3 年以来，我一直在从事 C++ 和 R 编程。

我想知道是否有 C++ 命令的搜索引擎，我可以在其中找到有关该命令的所有详细信息。

这是我正在寻找的示例：这是 R 命令的搜索引擎： [http ://www.rseek.org/](http://www.rseek.org/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T01:16:43.663

谷歌工作得很好。

如果您只想要 C++ 命中，请使用`site:`限制，如[“site:cppreference.com emplace_back”](https://www.google.com/webhp?q=site%3acppreference.com+emplace_back)

也许[“site:cppreference.com pow”](https://www.google.com/webhp?q=site%3acppreference.com+pow)是一个更好的例子，因为`pow`它本身通常会产生许多不相关的点击。

当然，关键字搜索也可以，试试[“site:cppreference.com 自然对数”](https://www.google.com/webhp?q=site%3acppreference.com+natural+logarithm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T01:17:19.213

我经常使用这个：[http](http://www.cplusplus.com/) ://www.cplusplus.com/ 。它有一个搜索框。

# filter - 如何编写一个根据主题过滤测试问题的桌面应用程序

> ID：10712233
> 
> 赞同：0
> 
> 时间：2012-05-23T01:13:55.747
> 
> 标签：filter, desktop

哪种编程语言/方法最适合编写过滤问题类型并显示要查看的问题列表的桌面应用程序。

例如，如果我有一个混合代数、几何和微积分问题存储在应用程序中，我应该能够只选择代数问题来查看和打印。

我对 python/django 有一点经验，但我以前从未制作过桌面应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T01:52:00.943

你有很多选择。在继续之前，您需要做出几个**设计决策**。需要考虑的事情是：

1.  您对哪些技术感到满意？
2.  您想在项目中投入多少时间/精力？
3.  你愿意花钱买工具吗？
4.  等等。

话虽这么说，这个答案的其余部分是给你一些**考虑的选择**：

1.  您将需要一个可以为您过滤问题的数据结构。根据您的描述，我首先想到的是使用数据库，但是我不确定您是否熟悉数据库，在这种情况下，您必须创建一些允许您进行过滤的类/结构你自己。数据库的一些选项包括 SQL Express、Oracle、MySQL、DB2 等等。
2.  要考虑的另一件事是您提到了几种不同类型的数学问题。您需要考虑如何显示问题。Mathematica 可以很好地格式化数学问题，但是如果你想走这条路，你要么必须找到一个工具，让你可以像 Mathematica 这样的语法来显示数学问题，要么导出问题/屏幕截图并拥有那些作为你程序的一部分。
3.  另一种选择是尝试找到一种具有某种 TeX 或 LaTeX 插件的语言（例如，您可以在此处查看 wikipedia 如何允许使用漂亮的数学格式： [http://en.wikipedia.org/wiki/Help：显示_a_formula](http://en.wikipedia.org/wiki/Help:Displaying_a_formula)

这听起来像是一个很好的宠物项目，可以用来学习不同的技术。如果这是意图，那就太好了。如果没有，那么您可能需要进行一些谷歌搜索，看看其他人是否已经创建了您要查找的内容。

# cocoa - 将控件添加到 NSTextView 并将它们绑定到（范围的）字符

> ID：10712234
> 
> 赞同：1
> 
> 时间：2012-05-23T01:13:56.190
> 
> 标签：cocoa, nstextview

编辑代码时，Xcode 能够显示文本控件，例如可以显示上下文菜单的下拉按钮。我见过其他处理具有类似功能的文本的 OS X 应用程序。请参阅随附的示例。

![在此处输入图像描述](../Images/16e938938066e3502b0aec0cbd962021.png)

我认为这种效果是使用`NSTextAttachmentCell`- 尽管我不确定这是否是实现它的正确方法。

对于我自己的应用程序，我也想使用这种技术。

我有以下问题：

*   `NSTextAttachmentCell`实现这种功能的正确方法是什么？如果不是，那会是什么？

*   如何将与上述示例中的控件相比较的控件附加到特定范围的文本，以使其在其中的位置`NSTextView`是动态的并遵循布局操作？

我发现[这](http://cocoadev.com/wiki/ControlsMixedWithTextHowTo)给出了一些提示，但不包括特定文本范围的附件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-27T07:56:41.617

虽然`NSTextAttachmentCell`会起作用，但它有一个缺点：单元格将成为文本中的一个字形，这不是我想要的。它扭曲了文本的布局，是可选择的等等。我希望将单元格绘制在文本上，就像 Xcode 中的行为一样。

挑战在于找到一种方法，将鼠标移动事件中的点转换为`NSTextView`.

经过一番挖掘后，我在 Apple 的演示应用程序中发现了一个名为[LayoutManagerDemo](http://developer.apple.com/library/mac/#samplecode/LayoutManagerDemo/Introduction/Intro.html#//apple_ref/doc/uid/DTS10000394-Intro-DontLinkElementID_2)的小宝石。该演示展示了一个自定义子类，`NSTextView`能够在鼠标悬停在其视图上时突出显示单个字符、单词和行。从那里开始，很容易在所需的按钮处淡入淡出，`NSPoint`然后显示带有一些选项的弹出菜单。

# iphone - IOS视图变换修改框架？

> ID：10712235
> 
> 赞同：6
> 
> 时间：2012-05-23T01:14:01.837
> 
> 标签：iphone, objective-c, ios5

我有一个视图，我在 drawRect 中做一些特定的绘图。这些绘图是动态的，并且基于视图的宽度和高度。然后，包含它的视图对其应用旋转变换。然而，这种转换似乎调整了我的视图框架的值，这会影响我在 drawRect 中的绘图。

NSLog(@"之前:%f,%f,%f,%f",button.frame.origin.x,button.frame.origin.y,button.frame.size.width,button.frame.size.height );

```
 CGAffineTransform currentTransform = button.transform;
    CGAffineTransform transformRotate = CGAffineTransformMakeRotation(degreesToRadians);
    button.transform = transformRotate;

    NSLog(@"after:%f,%f,%f,%f",button.frame.origin.x,button.frame.origin.y,button.frame.size.width,button.frame.size.height); 
```

这是输出：

之前：50.000000,100.000000,150.000000,50.000000 之后：65.849365,47.548096,118.301262,154.903809

这是正确的行为还是我错误地应用了转换？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-23T01:19:41.803

请参阅[UIView 的 frame 属性](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)的参考文档；

* * *

***框架***

> 框架矩形，描述视图在其父视图坐标系中的位置和大小。

```
@property(nonatomic) CGRect frame 
```

**警告**

> 如果变换属性不是恒等变换，则此属性的值未定义，因此应被忽略。

* * *

尽管有这个警告，事情还是按预期工作。一旦应用了转换（其他身份），框架通常会生成原始视图的投影矩形。但是话又说回来，如果您真的想了解应用了转换的框架并使用[CGRectApplyAffineTransform](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGAffineTransform/Reference/reference.html)正确获取它，则不应忽略该警告。

# version-control - (Mercurial/tortoisehg) 丢失的提交 - 如何排除故障

> ID：10712236
> 
> 赞同：1
> 
> 时间：2012-05-23T01:14:04.257
> 
> 标签：version-control, mercurial, dvcs, tortoisehg

我的一位同事今天早上正在处理一个 VS 项目，他声称该项目位于我们中央存储库的文件夹克隆中。他构建了一个应用程序的发布版本，该版本仍然存在，上面有正确的日期/时间戳。

然后他说他在这段时间内提交了几次，但在某个时候，他尝试从中央存储库中拉下更改并将它们与他的更改合并。他真的不记得自己采取了哪些步骤，但最终的结果是，他对源头所做的所有更改都丢失了。现在，我正在尝试帮助他看看我们是否可以恢复这些更改。

他在提交更改（几次提交）后告诉我，他进入 tortoisehg 工作台，拉动，看到中央存储库中有很多更改。他决定“与本地合并”或“更新”到下拉的提示 - 他不记得是哪个。我向他展示了这两个对话框，并问他是否放弃了更改、搁置或其他任何事情。他不记得了，真的，但他确实记得他必须退出，因为乌龟不喜欢他正在做的事情。最终，他似乎确实能够更新到存储库提示。

我在想，除非他实际删除了他正在工作的文件夹，然后得到最新的，否则他声称所做的那些提交会被记录在某个地方吗？人们在拉取远程仓库时会犯哪些常见错误？是否有任何日志文件或历史记录我可以检查以查看我是否可以挽救或至少告诉他在哪里工作？

任何解决此问题的提示将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T15:54:02.407

首先**在某处备份树，**包括 .hg 及其下的所有内容。然后...

```
hg heads 
```

...看看他是否只是忘记了他的提交。如果它在那里，那只是更新回它并进行适当合并的情况。

```
hg log -u 'His Username' 
```

...查看提交是否在存储库中的任何位置。如果他们在那里，您可以从他们那里继续工作。

```
hg shelve --list 
```

...看看他是否设法将东西搁置在某个地方

看一看`.hg/strip-backups`，看看他是否设法以某种方式剥离了他的更改。任何其他破坏性的东西也应该留下备份`.hg`。

这应该是一个好的开始。如果这些都没有提供任何线索，那么其他人可能会提出一些建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T06:54:50.060

我不知道 TortoiseHG，但通常第一件事是检查`hg out`。

# css - 居中 div 和浮动右 div

> ID：10712238
> 
> 赞同：0
> 
> 时间：2012-05-23T01:14:14.607
> 
> 标签：css, layout, centering

我有一个 DIV，即使调整浏览器的大小，我也希望它始终保持在屏幕的中心。还有一个浮动的右 DIV，它不应该与中心 DIV 重叠。

Chrome 会导致很多问题，要么中心在左侧离开屏幕，要么右侧浮动 DIV 与中心 DIV 重叠。

**CSS**

```
.center {
    border-style: solid;
    border-width: 1px;
    background-color: #808080;
    width: 650px;
    height: 200px;
    margin: auto;   
}
.right {
    border-style: solid;
    border-width: 1px;
    background-color: #808080;  
    width: 200px;
    height: 200px;  
    float: right;   
}
body {
    border-style: dashed;
    border-width: 1px;
} 
```

**HTML**

```
<div class="right">right</div>
<div class="center">center</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T02:45:59.123

只要内容从不重叠，这对我有用：

```
.right {
 float: right;
 min-width: 0;   
 border: 1px solid blue;
 box-sizing: border-box; 
}

.center {
    width: 50%;
    margin: 0 auto;
    border: 1px solid green;
} 
```

如果这是问题所在，我认为您必须探索内容字体大小随着页面缩小而缩小的选项，我认为这仅适用于 js 可靠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T02:31:39.193

我发现只有 1 个问题，它与`div`中心重叠`div`，[这](http://jsfiddle.net/wLGj7/3/)是一个可能的解决方案，你只需要添加`position: relative;`到中心的类`div`

**CSS**

```
.center
{
    border-style: solid;
    border-width: 1px;
    background-color: #808080;
    width: 650px;
    height: 200px;
    margin: 0 auto;
    display: block;
    position: relative;
}
.right
{
    border-style: solid;
    border-width: 1px;
    background-color: #808080;
    width: 200px;
    height: 200px;
    float: right;
    display: block;
}
body
{
    border-style: dashed;
    border-width: 1px;
}​ 
```

希望能帮助到你！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T01:35:15.443

```
 .center
    {
        border-style: solid;
        border-width: 1px;
        background-color: #808080;
        width: 50%;
        height: 200px;
        margin:0 auto;

    }

    .right
    {
        border-style: solid;
        border-width: 1px;
        background-color: #808080;

        width: 25%;
        height: 200px;

        float: right;

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T04:37:15.327

尝试这个

```
<div class="center">center</div>
<div class="right">right</div>

.center {
    border-style: solid;
    border-width: 1px;
    background-color: #808080;
    width: 650px;
    height: 200px;
    margin: auto;   
    display:block;

}
.right {
    border-style: solid;
    border-width: 1px;
    background-color: #0f0;  
    width: 200px;
    height: 200px;  
    float: right;  
    margin-top:10px;    
    display:block;
}
body {
    border-style: dashed;
    border-width: 1px;
} 
```

# google-app-engine - Google App Engine / Java中的多个文件上传在开发机器中有效，但在部署时无效

> ID：10712240
> 
> 赞同：1
> 
> 时间：2012-05-23T01:14:42.033
> 
> 标签：google-app-engine, blobstore

这是我的 servlet 的一部分：

```
public void doPost(HttpServletRequest req, HttpServletResponse res)
    throws ServletException, IOException {

    @SuppressWarnings("deprecation")
    Map<String, BlobKey> blobs = blobstoreService.getUploadedBlobs(req);

    UserService userService = UserServiceFactory.getUserService();
    User user = userService.getCurrentUser();

    ServletFileUpload upload = new ServletFileUpload();
    FileItemIterator iterator;

    try {
        iterator = upload.getItemIterator(req);
        Picture pic = null;
        PictureAccess access = null;
        while(iterator.hasNext()){
            FileItemStream item = iterator.next(); 

            pic = new Picture( blobs.get(item.getFieldName()).getKeyString() );

            access = new PictureAccess();
            access.addPictures(pic, user.getEmail() );
        }

    } catch (FileUploadException e) {
        e.printStackTrace();
    }

    res.sendRedirect("/user/picture/upload.jsp");
} 
```

在我的客户端，我使用 JavaScript 来更改文件的名称：

```
<script type="text/javascript">

    function uploadFile() {
        if (window.File && window.FileList) {
            var fd = new FormData();
            var files = document.getElementById('fileToUpload').files;
            for ( var i = 0; i < files.length; i++) {
                fd.append("file" + i, files[i]);
            }
            var xhr = new XMLHttpRequest();
            xhr.open("POST", document.getElementById('uploadForm').action);
            xhr.send(fd);

            alert('already saved');
            document.getElementById('uploadForm').value = '';

        } else {
            document.getElementById('uploadForm').submit(); //no html5
        }
    }

</script> 
```

在我的 html/jsp 中：

```
<form id="uploadForm" enctype="multipart/form-data" method="post" action="<%= blobstoreService.createUploadUrl("/user/uploadPics") %>">
     <input type="file" name="fileToUpload" id="fileToUpload" multiple="multiple" size="5"/>
     <input type="button" onclick="uploadFile();" value="Upload" />
</form> 
```

上面的代码在开发机器上工作，但在部署时不工作。可能的错误和解决问题的方法是什么？如何在 appengine 中查看错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T04:30:35.657

不推荐使用的方法`getUploadedBlobs(..)` [不支持`multiple='true'`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/blobstore/BlobstoreService#getUploadedBlobs%28HttpServletRequest%29)。尝试[`getUploads(..)`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/blobstore/BlobstoreService#getUploads%28HttpServletRequest%29)改用。

# java - 单元测试 Blobstore API

> ID：10712241
> 
> 赞同：0
> 
> 时间：2012-05-23T01:14:56.717
> 
> 标签：java, google-app-engine

我正在尝试对一些使用 Blobstore API 的代码进行单元测试，但是我正在获取`NullPointerException`此代码：

```
@ContextConfiguration(locations = { "classpath:service/client-config.xml" })
    @RunWith(SpringJUnit4ClassRunner.class)
    public class BlobstoreDaoTest {
        private final LocalServiceTestHelper helper =
                new LocalServiceTestHelper(new LocalDatastoreServiceTestConfig());
        private final LocalBlobstoreServiceTestConfig  config = 
                new LocalBlobstoreServiceTestConfig();

        @Autowired
        private BlobstoreDao dao;

        @Before
        public void setUp() {
            config.setUp();
            helper.setUp();
        }

        @After
        public void tearDown() {
            helper.tearDown();
            config.tearDown();
        }

        @Test
        public void doTest() {
         // Code omitted
        }
    } 
```

**错误：**

```
java.lang.NullPointerException
    at com.google.appengine.tools.development.testing.LocalBlobstoreServiceTestConfig.setUp(LocalBlobstoreServiceTestConfig.java:52) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T12:26:58.717

你可能想要的是这些方面的东西：

```
public class BlobstoreDaoTest {
    private LocalServiceTestHelper helper =
            new LocalServiceTestHelper(
              new LocalDatastoreServiceTestConfig(),
              new LocalBlobstoreServiceTestConfig()
            );

    @Before
    public void setUp() {
        helper.setUp();
    }

    @After
    public void tearDown() {
        helper.tearDown();
    }
... 
```

# c# - 无法检测板上绘制的块数 *XNA*

> ID：10712242
> 
> 赞同：0
> 
> 时间：2012-05-23T01:15:05.090
> 
> 标签：c#, xna

我有这段代码可以在 Qbert 板上绘制框，我将如何弄清楚如何检测踩到了哪些色块？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Audio;
using Microsoft.Xna.Framework.Content;
using Microsoft.Xna.Framework.GamerServices;
using Microsoft.Xna.Framework.Graphics;
using Microsoft.Xna.Framework.Input;
using Microsoft.Xna.Framework.Media;

namespace QBert
{
    public class Map
    {
        public int[,] board;
        public Color[] blockColors = new Color[] { Color.Blue, Color.Green }; //this makes it so it takes one time to step  to get to green
        Texture2D block;

        public Map(Texture2D block)   //draws the map of the blocks
        {
            this.block = block;

            board = new int[8, 7] 
            {
                { 0, 0, 0, 1, 0, 0, 0 },
                { 0, 0, 1, 1, 0, 0, 0 },
                { 0, 0, 1, 1, 1, 0, 0 },
                { 0, 1, 1, 1, 1, 0, 0 },
                { 0, 1, 1, 1, 1, 1, 0 },
                { 1, 1, 1, 1, 1, 1, 0 },
                { 1, 1, 1, 1, 1, 1, 1 },
                { -1, -1, -1, -1, -1, -1, -1 },

            }
            ;
        }

        public Vector2 GetSquareCoords(int x, int y) //cordinates of the block
        {
            int ofs = block.Width / 2;
            ofs *= y % 2;

            return new Vector2(x * block.Width + ofs, y * 96); // 96  
        }

        public Vector2 GetSquareCenter(int x, int y)  //method for to jump on the middle of a block
        {
            Vector2 coords = GetSquareCoords(x, y);

            return new Vector2(coords.X + block.Width / 2, coords.Y + 32); //32
        }

        public Vector2 GetNextSquare(bool down, bool left, Vector2 position)  //this is how you jump to a next square
        {
            // If on even row, right is directly below and left is below and to the left
            // If on odd row, left is directly below and right is below and to the right
            int next_x = 0, next_y = 0;
            int x = (int)position.X;
            int y = (int)position.Y;

            if (down)
            {
                next_y = y + 1;
                if (left)
                {
                    next_x = x - 1;  // -1
                }
                else
                {
                    next_x = x;
                }

            }
            else
            {
                next_y = y - 1;

            }

            if (y % 2 == 0)
            {

                if (left)
                    next_x = x - 1;
                else
                    next_x = x;

            }
            else
            {
                if (left)
                    next_x = x;
                else
                    next_x = x + 1;  //+1 

            }

            if (next_x < 0)
            {
                next_x += 1;

            }
            if (next_x > 6)
            {
                next_x -= 1;

            }
            if (next_y < 0)
            {
                next_y += 1;

            }
            if (next_y > 7)
            {
                next_y -= 1;

            }

            if (board[next_y, next_x] == 0)
            {
                return new Vector2(x, y);
            }
            else
            {
                return new Vector2(next_x, next_y);
            }

        }

        public void Draw(SpriteBatch spriteBatch) //draws the blocks and colors of the block
        {
            int drawXOffset = 30;
            int drawYOffset = 60;

            for (int x = 0; x < 7; x++)
                for (int y = 0; y < 7; y++)
                {
                    Vector2 coord = GetSquareCoords(x, y);
                    if (board[y, x] > 0)
                        spriteBatch.Draw(block, new Rectangle(drawXOffset + (int)coord.X, drawYOffset + (int)coord.Y, block.Width, block.Height), blockColors[board[y, x] - 1]);

                }
        }
    }
    } 
```

我试图让代码检测绘制的块数，以便我知道它们何时都是某种颜色。

我需要让它变成某种颜色的方块才能结束游戏。

现在，我将它从蓝色块颜色开始，然后变为绿色块，我将如何让它检测到如果所有绿色块都被踩到了游戏结束？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T01:27:32.000

在你的`Update`方法中，你会想要这样的东西：

```
bool finished = true;
for (int x = 0; x < 7; x++)
{
    for (int y = 0; y < 7; y++)
    {
        if (board != 0 && board != 2) // 2 is green
        {
            finished = true;
            break;
        }
    }
    if (finished)
        break;
}
if (finished)
{
    // Move to next level
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T01:36:26.213

我认为这样的事情是你想要的

```
public Vector2 GetNextSquare(bool down, bool left, Vector2 position)  
{
    int x = (int)position.X;
    int y = (int)position.Y;

//...other code

   if (blockColors[board[next_y, next_x]] == Color.Green)
   {
      //End
   }
   else if (board[next_y, next_x] == 0)
   {
        return new Vector2(x, y);
   }
   else
   {
        return new Vector2(next_x, next_y);
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T01:22:03.130

通常你有某种数据代表你的游戏领域，而渲染代码只是渲染领域的视觉表示。您的游戏代码仅适用于内部字段表示（即在您的情况下，具有“颜色”属性的立方体对象集）。

您绝对可以检查屏幕上的颜色，但这需要更多的努力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T08:08:02.160

**@Jaview“你是什么意思，你能告诉我一个我如何检查的例子吗？”**

这是一个如何在 XNA 中获取像素的示例：

```
ResolveTexture2D backBufferData;

backBufferData = new ResolveTexture2D(
    graphics.GraphicsDevice,
    graphics.GraphicsDevice.PresentationParameters.BackBufferWidth,
    graphics.GraphicsDevice.PresentationParameters.BackBufferHeight,
    1,
    graphics.GraphicsDevice.PresentationParameters.BackBufferFormat
);

Rectangle sourceRectangle = new Rectangle(Mouse.GetState().X, Mouse.GetState().Y, 1, 1);

Color[] retrievedColor = new Color[1];
graphics.GraphicsDevice.ResolveBackBuffer(backBufferData);

backBufferData.GetData<Color>(
    0,
    sourceRectangle,
    retrievedColor,
    0,
1);

selectedColor = retrievedColor[0]; 
```

# c# - 什么 ORM 可以处理递归

> ID：10712245
> 
> 赞同：1
> 
> 时间：2012-05-23T01:15:34.957
> 
> 标签：c#, sql, sql-server, orm

我正在使用 C# ASP.NET，并且需要在整个应用程序中使用递归。我目前正在使用 Linq to Entities 并在网上进行了广泛搜索，但找不到执行递归查询的优雅方式。我不知道递归会进行多少级。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T01:25:02.510

我有一个类似的问题要解决，最后我编写了一个辅助函数，它递归了我的数据源并返回了一个 IEnumerable，其中所有项目都按顺序排列。然而，就我而言，数据源是线性的。如果您的结构更像树形结构，并且必须分层显示，那么这将无法正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T06:13:50.743

我不知道您有什么确切的问题，也不知道其他 ORM 在做什么。

我认为 NHibernate 应该直接解决大部分问题。

*   使用延迟加载：孩子被延迟加载。您不需要递归查询之类的东西，这在 SQL 中是不可能的。
*   带有延迟加载的导航可以双向工作。因此，您可以使用简单的查询从数据库中获取节点并导航到其父节点。
*   在许多情况下，为递归图添加一些额外的冗余是有意义的。例如对根节点的引用，它允许查询至少有一个节点与标准匹配的树。或节点的深度（它到根的距离）。或者子节点的数量等等。无论您需要什么查询。

# php - 测试 CodeIgniter 会话变量的正确方法是什么？

> ID：10712250
> 
> 赞同：3
> 
> 时间：2012-05-23T01:16:09.213
> 
> 标签：php, codeigniter, session, variables, isset

采取以下代码片段。测试以确保会话变量不为空的最佳方法是什么？

```
<?php if ($this->session->userdata('userID')) {
   $loggedIn = 1;
}
else {
   $loggedIn = 0;
} ?> 
```

如果稍后在我的脚本中，我调用以下内容，第一个打印正确，但第二个我收到*消息：未定义变量：loggedIn*

```
<?php echo $this->session->userdata('userID'));
      echo $loggedIn; ?> 
```

我试过使用`!empty`and `isset`，但都没有成功。我还尝试使用 向后执行 if/then 语句`if (!($this->session->userdata('userID'))`，但没有骰子。有什么想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T01:33:02.637

请尝试执行以下操作：

```
<?php 
$loggedIn = 0;
if ($this->session->userdata('userID') !== FALSE) {
   $loggedIn = 1;
}
?> 
```

如果错误继续存在，您将需要发布更多代码，以防您在另一个范围内调用该变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T01:34:04.713

如果您的目标是查看是否`'userID'`设置了会话变量，那么以下应该可以工作：

```
$this->session->userdata('userID') !== false 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T09:25:27.297

为什么不在会话中创建一个名为 is_logged_in 的布尔字段，然后检查如下：

```
if(false !== $this->session->userdata('is_logged_in')) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-11T16:21:42.070

```
if($this->session->userdata('is_logged_in')) {
    //then condition
} 
```

这是正确的测试方法！

# html-email - 需要等价于左对齐 在 html 电子邮件中

> ID：10712251
> 
> 赞同：1
> 
> 时间：2012-05-23T01:16:09.277
> 
> 标签：html-email

HTML电子邮件新手在这里。无法**相信**在这个舞台上一件简单的事情会变得多么困难......

我需要一条左对齐、1 像素高、350 像素宽的彩色线条，我可以将它放在 HTML 电子邮件中的文本行之间。

类似`<hr align="left" style="height: 1px; width: 350px; color: #ff0000;" />`但当然不适用于各种版本的 Outlook（我需要支持 2003+）和 Entourage（我需要支持 2004+）。（当然，其他客户并没有给我同样的悲伤。）

Actual `<hr>`s 在 Entourage 中显然是不可调整的，所以我尝试了各种方法，包括`<p>`带有背景颜色的 1px high s。我尝试的一切都会在某个地方中断。

任何人都有一种防弹的方法来制作这条简单的线条而无需借助图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T14:58:27.570

没有办法不为此使用图像。

您需要做的是添加间隔图像和背景颜色。

我不确定你的电子邮件是如何布置的，但如果这是给我的，我会做这样的事情：

[http://jsfiddle.net/ZsCwX/](http://jsfiddle.net/ZsCwX/)

```
<table cellpadding="0" cellspacing="0" width="600">
  <tr>
    <td height="1px" width="350px" style="background-color:#F00;"><img src="image/spacer.gif" alt="" width="350" height="1" style="display:block" border="0" /></td>
    <td height="1px" width="250px"><img src="image/spacer.gif" alt="" width="250" height="1" style="display:block" border="0" /></td>
  </tr>
</table>​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-01-05T20:23:38.657

尝试这个：

```
<tr>
        <td style="padding-top:30px;padding-bottom:30px;">
            <table border="0" cellpadding="0" cellspacing="0" width="350">
                <tbody>
                    <td align="left" bgcolor="#ff0000" style="font-size: 1px; line-height:1px; color:#ff0000">&zwnj;</td>
                </tbody>
            </table>
        </td>
</tr>
```

# objective-c - Objective C IOS - 基于滑块值的特定字符串

> ID：10712254
> 
> 赞同：3
> 
> 时间：2012-05-23T01:16:21.393
> 
> 标签：objective-c, ios, string, int

所以我在我的视图中有这个滑块，最大值为 13，最小值为 1。根据您移动滑块的方式，数字会发生变化，并且可以显示在显示滑块当前数字的标签上。

我希望能够将滑块中的 int 更改为字符串；因此，如果滑块的进度是 13，我希望标签读取“A+”，12 带有“A”，11 带有“A-”等等。

因为我有多个滑块，所以不必制作 13 个“if”语句，有没有办法制作一种方法来检查滑块的进度，然后将数字转换为所需的字母等级？

这是我其中一个滑块的代码

```
-(IBAction)sliderChanged:(id)sender{
    UISlider *slider = (UISlider *)sender;
    int progress = (int)roundf(slider.value);
    c1Grade.text = [NSString stringWithFormat:@"%d",progress];
}
// c1Grade is the label next to the slider showing the progress 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T01:20:11.630

创建一个字符串数组，并将描述放在描述所代表的索引处：`@"A+"`将在索引 13 处，`"A"`在索引 12 处，依此类推。

```
NSArray *gradeDescriptions = [NSArray arrayWithObjects: @"", @"F", @"D-", @"D", @"D+", @"C-", @"C", @"C+", @"B-", @"B", @"B+", @"A-", @"A", @"A+", nil];
NSString *descr = [gradeDescriptions objectAt:sliderPosition]; 
```

由于`gradeDescriptions`数组永远不会改变，您可以将其初始化一次，然后存储在静态变量或 ivar 中。

# ruby-on-rails - 在 Rails 中使用 mobylette 处理 :js 格式

> ID：10712256
> 
> 赞同：0
> 
> 时间：2012-05-23T01:16:40.927
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在使用`mobylette`gem 来管理`:mobile`格式视图。似乎工作正常，除了这个：

我有一个呈现 javascript 文件 ( `/app/views/photos/index.js.erb`) 的控制器。

```
class Photos < ApplicationController
  respond_to :js
  def index 
    ...
  end
end 
```

如果我从桌面访问`/photos`或`/photos.js`似乎工作正常（我看到 .js 输出）但如果我从移动设备访问我收到以下错误

```
Template is Missing
Missing template photos/index, application/index with locale {:locale => [:en], :formats => [:mobile], :handlers => [:erg,:coffee,:haml]}. Searched in: *"/Users/user/site/app/views" * "/Users/user/.rvm/gems/ruby-1.9.2-p290/gems/devise-1.5.2/app/views" * "/Users/user/site/app/views" 
```

我有以下代码`application_controller.rb`

```
before_filter :set_request_format, :set_format_fallbacks

def set_request_format
  if is_mobile_request? && request.format.to_s == "text/html"
      request.format = :mobile
  elsif is_mobile_request? && request.format.to_s == "text/javascript"
      request.format = :mobilejs
  end
end

def set_format_fallbacks
  if request.format == :mobile
    self.formats = [:mobile, :html]
  elsif request.format == :mobilejs
    self.formats = [:mobilejs, :js]
  end
end 
```

而这在`/config/initializers/mime_types.rb`

```
Mime::Type.register_alias "text/html", :mobile
Mime::Type.register_alias "text/javascript", :mobilejs 
```

由于某种原因，`[:mobile]`格式仍然在它应该呈现的时候被呈现`:js`（因为`:mobilesjs`不存在）。

知道如何让它工作吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T16:01:20.587

也许不是最漂亮的解决方案，但我也没有找到支持 mobylette 的方法来做到这一点。我使用了类似的方式，但无法在您的 before_filter 中使用 'request.format'，我不得不使用 'request.filtered_pa​​rameters["format"]' 代替。还在寻找漂亮的版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-02T09:03:05.770

```
index.js.erb 
```

它变为

```
index.erb 
```

# jquery - 在按钮上单击选择 prev() div

> ID：10712260
> 
> 赞同：0
> 
> 时间：2012-05-23T01:17:07.997
> 
> 标签：jquery

有人可以告诉我以下功能有什么问题吗？我正在尝试通过单击#up 按钮来更改 prev() div 的 css。（我知道这是菜鸟的东西）谢谢

```
$.fn.expand = function() {
        $('#up').click(function() {
         $("#frame.#two").previousSibling().css("height" , "80%");
        }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T01:19:47.177

一方面，你有一个语法错误，它应该是：

```
$.fn.expand = function() {
        $('#up').click(function() {
         $("#frame.#two").previousSibling().css("height" , "80%");
        });
} 
```

假设您已经`previousSibling()`在代码中的某个地方定义了。

# c# - WebKit.NET C#：CSS 渐变（径向）

> ID：10712267
> 
> 赞同：0
> 
> 时间：2012-05-23T01:18:39.557
> 
> 标签：c#, html, css, gradient, webkit.net

我正在使用 WebKit.Net webBrowser 组件在 C# 中开发一个 win 表单来创建 HTML5 网页。我怎么可能设计这样它使用 WebKit.Net 创建径向渐变？我尝试了类似以下的方法，但只有 -webkit-gradient 有效。

```
background: rgb(249,225,225); /* Old browsers */
background: -moz-radial-gradient(center, ellipse cover,  rgba(249,225,225,1) 0%, rgba(248,197,197,1) 38%, rgba(243,130,130,1) 87%, rgba(251,32,32,1) 100%); /* FF3.6+ */
background: -webkit-gradient(radial, center center, 0px, center center, 100%, color-stop(0%,rgba(249,225,225,1)), color-stop(38%,rgba(248,197,197,1)), color-stop(87%,rgba(243,130,130,1)), color-stop(100%,rgba(251,32,32,1))); /* Chrome,Safari4+ */
background: -webkit-radial-gradient(center, ellipse cover,  rgba(249,225,225,1) 0%,rgba(248,197,197,1) 38%,rgba(243,130,130,1) 87%,rgba(251,32,32,1) 100%); /* Chrome10+,Safari5.1+ */ 
```

我想知道 WebKit.Net 可以使用除 -webkit-gradient 之外的任何其他语法吗？因为我试图得到一个椭圆形而不是圆形。

是新来的人，如果有人能解决这个问题，不胜感激:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T03:11:49.030

我研究了一段时间，得到了 .NET 的解决方案 :) 它实际上可以在[Open Webkit Sharp](http://code.google.com/p/open-webkit-sharp/)中轻松完成:) 它支持 HTML5 和 CSS3 的最新功能。

# objective-c - 物体接触其他物体

> ID：10712271
> 
> 赞同：1
> 
> 时间：2012-05-23T01:18:54.220
> 
> 标签：objective-c, xcode, object, draggable

如果有人能告诉我如何判断两个对象是否被触摸（一个图像或一个按钮），我真的很高兴

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T01:22:43.103

如果您从不旋转对象，则可以使用 CoreGraphics 函数。

```
BOOL objectsTouch = CGRectIntersectsRect(object1.frame, object2.frame); 
```

这当然要求两个对象在同一个超级视图中。否则，您必须使用 NSView 的功能来转换框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T01:34:28.963

经典的方法是计算一个包含每个对象的最小圆，然后计算圆心之间的距离（勾股定理），看看它是否小于 R(object1 circle) + R(object2 circle)。如果小于，那么您必须使用位映射或其他一些方案来弄脏并弄脏，但如果大于，那么您可以假设对象不接触。

# java - 如何在运行时加载接口的实现并调用所述类的方法？

> ID：10712277
> 
> 赞同：1
> 
> 时间：2012-05-23T01:19:33.843
> 
> 标签：java, class, interface, casting, runtime

尝试使用 extcos 在运行时动态链接我的接口实现，以便用户可以创建自己的类、编译它并使用我的程序。我在提取课程时遇到问题。使用这样的类让我头疼，但看起来 extcos 完成了大部分工作。

当我的程序进入主程序时，我尝试加载类。这是我在那里的atm：

```
 final Set<Class<? extends IAlgorithm>> classes = new HashSet<Class<? extends IAlgorithm>>();

    ComponentScanner scanner = new ComponentScanner();
    scanner.getClasses(new ComponentQuery() {
        @Override
        protected void query() {
            select().
            from("logic").
            andStore(thoseImplementing(IAlgorithm.class).into(classes)).
            returning(none());
        }
    }); 
```

如何让实例在 IAlgorithm 的实现中调用我的方法？

[http://sourceforge.net/projects/extcos/](http://sourceforge.net/projects/extcos/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T04:28:17.280

我不知道 extcos，但它看起来确实`classes`包含`java.lang.Class<?>`您加载的类的对象。您应该能够创建这些类的实例

```
IAlgorithm ia = classes.iterator().next().newInstance(); 
```

对于无参数构造函数的情况；或者如果您需要调用非默认构造函数：

```
Class<? extends IAlgorithm> cls = classes.iterator().next();
Constructor<? extends IAlgorithm> c = cls.getConstructor(...);
IAlgorithm ia = c.newInstance(...); 
```

其中`...`分别表示上述第一种和第二种用法中的构造函数参数类型和值。

# php - 使用 JS 滑块显示来自电子商店 API 的产品的嵌入式小部件

> ID：10712287
> 
> 赞同：2
> 
> 时间：2012-05-23T01:20:54.517
> 
> 标签：php, javascript, widget

我需要开发一个嵌入式小部件，它必须看起来像这样：

```
 <div id="my_widget" data-api_key="xxx" data-shop_id="xxx"></div>
    <script type="text/javascript" src="my_widget.js"></script> 
```

API 请求必须在 PHP 中实现。我必须按 id 显示该商店的另外三种已售产品`data-shop_id`。

我对 PHP 编码没问题，我的问题是如何实现 my_widget.js 以及如何将它与 jQuery 滑块集成。以及如何在 PHP 中使用 data-api_key 和 data-shop_id 标签？

使用纯 JavaScript 可以`<iframe>`还是更好？

抱歉，如果听起来有点混乱，我仍然想知道该怎么做。如果您知道一些关于如何使用 PHP + JavaScript 实现小部件的教程，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:09:43.960

我认为最简单的方法是使用 iframe。

尽管您可以使用 jQuery 发布 data-shop_id，然后以 JSON 格式接收结果并进行处理。

jQuery 访问数据属性 - $(this).data("shop_id")

# wpf - 在组合框的选择更改事件上填充文本框中的值？

> ID：10712289
> 
> 赞同：0
> 
> 时间：2012-05-23T01:21:02.113
> 
> 标签：wpf, vb.net-2010

我有一个 wpf 应用程序，它有组合框和多个文本框。

在窗口加载事件中，组合框填充了员工 ID。当我选择任何 ID 时，下面的文本框应显示所选“ID”的名称、城市、邮编和国家/地区。我确实编写了以下代码来填写文本框中的值。Private Sub dataview1(ByVal GUID As String) 试试

```
 Dim viewDs As New DataSet()
        Dim Query As String
        Query = "Select * from tblEmployeeInfo Where ID = '" & GUID.Trim & "'"
        viewDs = GetData(Query, True)

        Dim dv As DataView = New DataView(viewDs.Tables(0))
        Dim Notify As String = String.Empty
        If dv.Count > 0 Then

            If Not IsDBNull(dv(0)("ID")) Then
                txtGUID.Text = dv(0)("ID")
            Else
                txtGUID.Text = String.Empty
            End If

           If Not IsDBNull(dv(0)("StreetName"))     Then
                txtStName.Text = dv(0)("StreetName")
            Else
                txtStName.Text = String.Empty
            End If
        End If
    Catch ex As Exception
        MsgBox("No Values Found")
    End Try
End Sub 
```

并在组合框的选择更改事件上调用上述函数，如下所示：

```
Private Sub ID CB_SelectionChanged(sender As System.Object, e As System.Windows.Controls.SelectionChangedEventArgs) Handles IDCB.SelectionChanged
    StreetCB.IsEnabled = False
   DataView1(IDCB.SelectedItem) 
```

虽然它命中了 ViewMode 函数，但它从未在我的文本框中填充任何值。

我错过了什么吗？

有什么办法可以实现吗？

任何帮助都感激不尽。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T01:23:06.153

> 虽然它命中了 ViewMode 函数，但它从未在我的文本框中填充任何值。

在调试器中逐步执行此操作。如果您的查询没有返回任何结果，这可能会发生，我怀疑这是本例中的问题。

# erlang - 使用 jdk javac & jar、cygwin make、install、gcc 和 ld 在 cygwin 中从源代码构建 Erlang OTP R15B

> ID：10712290
> 
> 赞同：0
> 
> 时间：2012-05-23T01:21:12.720
> 
> 标签：erlang, makefile, cygwin, ld

有谁知道如何在 cygwin 中构建 Erlang？

我在我的 cygwin 安装中下载了 Erlang OTP R15B 源代码。
压缩并解压源文件。
然后我做了一个`./configure --prefix=/usr`然后`make install`

我下面所有步骤的屏幕截图。

```
# wget the Erlang source (for UNIX systems)
wget "http://www.erlang.org/download/otp_src_R15B.tar.gz" -O "$HOME/erlang/otp_src_R15B.tar.gz"

# tar -zxvf the tarball
tar -zxvf "$HOME/erlang/otp_src_R15B.tar.gz"

# Go to the location of the code
pushd "$HOME/erlang/otp_src_R15B"

# Create perl5 symlink for perl
ln -s /usr/bin/perl.exe perl5.exe

# Configure the build
./configure --prefix=/usr
    ...
    *********************************************************************
    **********************  APPLICATIONS INFORMATION  *******************
    *********************************************************************

    wx             : wxWidgets not found, wx will NOT be usable

    *********************************************************************
    *********************************************************************
    **********************  DOCUMENTATION INFORMATION  ******************
    *********************************************************************

    documentation  :
                     fop is missing.
                     Using fakefop to generate placeholder PDF files.

    ********************************************************************* 
```

通过使用以下脚本，我能够解决 javac 路径问题`/usr/bin/javac.exe`

```
$ cat /usr/bin/javac.exe
#!/bin/bash
#
# A wrapper for calling javac from Cygwin.
# Tries to convert any arguments that are Unix-style paths into
# Windows-style paths.  This includes any arguments to classpath or
# sourcepath or any arguments that begin with / .
#

ME="`basename $0`"
JAVAC_EXEC="$JAVA_HOME/bin/javac"
ARGS=""

while [ -n "$1" ]; do
   arg="$1"
   shift
   case "$arg" in
      -cp | -classpath)
         arg="$arg' '`cygpath -p -w "$1"`"
         shift
         ;;
      -sourcepath)
         arg="$arg' '`cygpath -p -w "$1"`"
         shift
         ;;
      /*)
         arg="`cygpath -p -w "$arg"`"
         ;;
   esac
   ARGS="$ARGS '$arg'"
done

eval "set -- $ARGS"
#echo "$JAVAC_EXEC" "$@"
exec "$JAVAC_EXEC" "$@" 
```

还添加`/usr/bin/jar.exe`如下：

```
$ cat /usr/bin/jar.exe
#!/bin/bash
#
# A wrapper for calling javac from Cygwin.
# Tries to convert any arguments that are Unix-style paths into
# Windows-style paths.  This includes any arguments to classpath or
# sourcepath or any arguments that begin with / .
#

ME="`basename $0`"
JAR_EXEC="$JAVA_HOME/bin/jar"
ARGS=""

while [ -n "$1" ]; do
   arg="$1"
   shift
   case "$arg" in
      -cp | -classpath)
         arg="$arg' '`cygpath -p -w "$1"`"
         shift
         ;;
      -sourcepath)
         arg="$arg' '`cygpath -p -w "$1"`"
         shift
         ;;
      /*)
         arg="`cygpath -p -w "$arg"`"
         ;;
   esac
   ARGS="$ARGS '$arg'"
done

eval "set -- $ARGS"
#echo "$JAR_EXEC" "$@"
exec "$JAR_EXEC" "$@" 
```

此外，`otp.mk`将文件设置 CLASSPATH 修改为预期的 Windows 路径，如下所示：

```
Line
172     .java.class:
173         CLASSPATH=`cygpath -wp $(CLASSPATH)` $(JAVA) $(JAVA_OPTIONS) $<
174     
175     
176     $(JAVA_DEST_ROOT)$(JAVA_CLASS_SUBDIR)%.class: %.java
177         CLASSPATH=`cygpath -wp $(CLASSPATH)` $(JAVA) $(JAVA_OPTIONS) -d $(JAVA_DEST_ROOT) $< 
```

我终于准备好安装了

```
# Make 
make install

...
make[6]: Entering directory `/home/Dragos/erlang/otp_src_R15B/lib/runtime_tools/c_src'
ld -shared -o ../priv/lib/i686-pc-cygwin/trace_ip_drv.so ../priv/obj/i686-pc-cygwin/trace_ip_drv.o -lc -lutil -ldl -lm
../priv/obj/i686-pc-cygwin/trace_ip_drv.o: In function `my_alloc_binary':
/home/Dragos/erlang/otp_src_R15B/lib/runtime_tools/c_src/trace_ip_drv.c:606: undefined reference to `driver_alloc_binary'
/home/Dragos/erlang/otp_src_R15B/lib/runtime_tools/c_src/trace_ip_drv.c:608: undefined reference to `__getreent'
../priv/obj/i686-pc-cygwin/trace_ip_drv.o: In function `write_until_done':
/home/Dragos/erlang/otp_src_R15B/lib/runtime_tools/c_src/trace_ip_drv.c:632: undefined reference to `__getreent'
../priv/obj/i686-pc-cygwin/trace_ip_drv.o: In function `my_alloc':
/home/Dragos/erlang/otp_src_R15B/lib/runtime_tools/c_src/trace_ip_drv.c:591: undefined reference to `driver_alloc'
/home/Dragos/erlang/otp_src_R15B/lib/runtime_tools/c_src/trace_ip_drv.c:593: undefined reference to `__getreent'
../priv/obj/i686-pc-cygwin/trace_ip_drv.o: In function `my_driver_select':
/home/Dragos/erlang/otp_src_R15B/lib/runtime_tools/c_src/trace_ip_drv.c:916: undefined reference to `driver_select'
../priv/obj/i686-pc-cygwin/trace_ip_drv.o: In function `clean_que':
/home/Dragos/erlang/otp_src_R15B/lib/runtime_tools/c_src/trace_ip_drv.c:736: undefined reference to `driver_free'
/home/Dragos/erlang/otp_src_R15B/lib/runtime_tools/c_src/trace_ip_drv.c:744: undefined reference to `driver_free'
../priv/obj/i686-pc-cygwin/trace_ip_drv.o: In function `close_unlink_port':
/home/Dragos/erlang/otp_src_R15B/lib/runtime_tools/c_src/trace_ip_drv.c:820: undefined reference to `driver_free'
/home/Dragos/erlang/otp_src_R15B/lib/runtime_tools/c_src/trace_ip_drv.c:820: undefined reference to `driver_free'
../priv/obj/i686-pc-cygwin/trace_ip_drv.o: In function `trace_ip_ready_output':
/home/Dragos/erlang/otp_src_R15B/lib/runtime_tools/c_src/trace_ip_drv.c:523: undefined reference to `driver_free'
../priv/obj/i686-pc-cygwin/trace_ip_drv.o: In function `trace_ip_start':
/home/Dragos/erlang/otp_src_R15B/lib/runtime_tools/c_src/trace_ip_drv.c:371: undefined reference to `set_port_control_flags'
/usr/lib/libc.a(t-d000779.o):fake:(.text+0x2): undefined reference to `_imp__close'
/usr/lib/libc.a(t-d000994.o):fake:(.text+0x2): undefined reference to `_imp__fprintf'
/usr/lib/libc.a(t-d000913.o):fake:(.text+0x2): undefined reference to `_imp__exit'
/usr/lib/libc.a(t-d001041.o):fake:(.text+0x2): undefined reference to `_imp__fwrite'
/usr/lib/libc.a(t-d001602.o):fake:(.text+0x2): undefined reference to `_imp__send'
/usr/lib/libc.a(t-d000032.o):fake:(.text+0x2): undefined reference to `_imp____errno'
/usr/lib/libc.a(t-d000934.o):fake:(.text+0x2): undefined reference to `_imp___fcntl64'
/usr/lib/libc.a(t-d001300.o):fake:(.text+0x2): undefined reference to `_imp__memcpy'
/usr/lib/libc.a(t-d000669.o):fake:(.text+0x2): undefined reference to `_imp__accept'
/usr/lib/libc.a(t-d001513.o):fake:(.text+0x2): undefined reference to `_imp__read'
/usr/lib/libc.a(t-d001304.o):fake:(.text+0x2): undefined reference to `_imp__memset'
/usr/lib/libc.a(t-d001706.o):fake:(.text+0x2): undefined reference to `_imp__sscanf'
/usr/lib/libc.a(t-d001690.o):fake:(.text+0x2): undefined reference to `_imp__socket'
/usr/lib/libc.a(t-d001636.o):fake:(.text+0x2): undefined reference to `_imp__setsockopt'
/usr/lib/libc.a(t-d000723.o):fake:(.text+0x2): undefined reference to `_imp__bind'
/usr/lib/libc.a(t-d001119.o):fake:(.text+0x2): undefined reference to `_imp__getsockname'
/usr/lib/libc.a(t-d001239.o):fake:(.text+0x2): undefined reference to `_imp__listen'
i686-pc-cygwin/Makefile:100: recipe for target `../priv/lib/i686-pc-cygwin/trace_ip_drv.so' failed
make[6]: *** [../priv/lib/i686-pc-cygwin/trace_ip_drv.so] Error 1
make[6]: Leaving directory `/home/Dragos/erlang/otp_src_R15B/lib/runtime_tools/c_src'
/home/Dragos/erlang/otp_src_R15B/make/run_make.mk:38: recipe for target `release_spec' failed
make[5]: *** [release_spec] Error 2
make[5]: Leaving directory `/home/Dragos/erlang/otp_src_R15B/lib/runtime_tools/c_src'
/home/Dragos/erlang/otp_src_R15B/make/otp_release_targets.mk:119: recipe for target `release' failed
make[4]: *** [release] Error 2
make[4]: Leaving directory `/home/Dragos/erlang/otp_src_R15B/lib/runtime_tools/c_src'
/home/Dragos/erlang/otp_src_R15B/make/run_make.mk:38: recipe for target `release' failed
make[3]: *** [release] Error 2
make[3]: Leaving directory `/home/Dragos/erlang/otp_src_R15B/lib/runtime_tools/c_src'
/home/Dragos/erlang/otp_src_R15B/make/otp_subdir.mk:28: recipe for target `release' failed
make[2]: *** [release] Error 2
make[2]: Leaving directory `/home/Dragos/erlang/otp_src_R15B/lib/runtime_tools'
/home/Dragos/erlang/otp_src_R15B/make/otp_subdir.mk:28: recipe for target `release' failed
make[1]: *** [release] Error 2
make[1]: Leaving directory `/home/Dragos/erlang/otp_src_R15B/lib'
Makefile:899: recipe for target `install.libs' failed
make: *** [install.libs] Error 2 
```

有谁知道如何通过这一步？
提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T08:22:09.517

我认为你错了。如果你阅读得更好，你应该看到这一行： `javac: directory not found: /home/Dragos/erlang/otp_src_R15B/lib/jinterface/priv/`

据我所知，以下错误消息只是存在，因为编译堆栈的展开。

该目录是否真的存在？请提供更多信息！

# doxygen - 多个变量的相同注释

> ID：10712295
> 
> 赞同：2
> 
> 时间：2012-05-23T01:21:47.137
> 
> 标签：doxygen, doxywizard

我和这个人有同样的问题：

[doxygen 一次注释多个变量](https://stackoverflow.com/questions/5777982/doxygen-comment-multiple-variables-at-once)

我已经在线程中尝试了建议的解决方案，并且像 OP 一样，我无法让 doxygen 对多个变量具有相同的注释。有人可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T07:49:46.977

多变量的分组在 doxygen 手册的[分组](http://www.star.bnl.gov/public/comp/sofi/doxygen/grouping.html)部分有详细讨论。从手册中，您将使用以下内容：

```
//@{
/** Same documentation for both members. Details */
void func1InGroup1();
void func2InGroup1();
//@} 
```

如果您在使用它时遇到问题，您应该发布一些代码并向我们展示您尝试过的内容以及您得到的输出。否则你的问题很难回答。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-06-07T13:08:21.767

不要忘记在“专家”选项卡中设置选项“DISTRIBUTE_GROUP_DOC”。他们组的所有成员都将收到相同的评论。

# python - Python中的参数传递

> ID：10712303
> 
> 赞同：1
> 
> 时间：2012-05-23T01:22:24.697
> 
> 标签：python

我不太明白变量“current_label”是怎么回事，对我来说，它似乎是在函数“ts_r”的封闭代码中定义的，这会使它从“ts_r”内部可见？但是当我运行下面的代码时，它抱怨在分配之前引用了局部变量'current_label'......请注意，它不会*抱怨*'visited'或'f'，并且如果我初始化'current_label它也不会抱怨' 与 [len(g)]。

```
def topological_sort(g):

    visited = zeros((len(g)), dtype='int32')
    f = zeros((len(g)), dtype='int32')
    current_label = len(g) # [] so it is seen inside ts_r

    def ts_r(n):
        for nn in [v for v in g[n] if not visited[v]]:
            visited[nn] = 1
            ts_r(nn)
        f[n] = current_label
        current_label -= 1

    for i in range(len(g)):
        if not visited[i]: 
            ts_r(i)

    return f 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T01:26:12.797

万一你改变了`visited`可变`f` **变量**。如果`current_label`您尝试将值重新分配给全局变量而不说明它是全局的。

从外部范围更改变量不需要将它们声明为全局变量，但是将值重新分配给全局变量需要声明它是全局变量 - 否则它被视为局部变量（如果在赋值之前引用，则会出现此类错误）。

让我们看一下代码：

```
1\.    def ts_r(n):
2\.        for nn in [v for v in g[n] if not visited[v]]:
3\.            visited[nn] = 1
4\.            ts_r(nn)
5\.        f[n] = current_label
6\.        current_label -= 1 
```

在行`5`中，您将全局变量值分配给`f[n]`，但稍后，`6`您尝试为该全局变量分配值。您没有告诉 Python 它是全局的，因此它假定它是本地的。但是如果它是本地的，你就不能更早地分配它。

你有两个选择：

1.  （可能不是您要找的那个）将其用作本地：

    ```
    def ts_r(n):
        current_label = len(g)  # initialize local variable
        for nn in [v for v in g[n] if not visited[v]]:
            visited[nn] = 1
            ts_r(nn)
        f[n] = current_label
        current_label -= 1 
    ```

2.  告诉 Python 它是全局变量，并且您想更改全局变量的值：

    ```
    def ts_r(n):
        global current_label  # current_label is now global
        for nn in [v for v in g[n] if not visited[v]]:
            visited[nn] = 1
            ts_r(nn)
        f[n] = current_label
        current_label -= 1 
    ```

**编辑**：

更新您的问题后，我看到了嵌套函数，而不是在全局范围内定义的函数。因此，解决方案`global`不起作用。

在 Python 3.x 中你有`nonlocal`关键字，但在 Python 2.x 的情况下你需要找到 walkaround。同样，您至少有两种可能性：

1.  使用包含您要更改的不可变的可变变量（例如，其中包含一个整数的列表）。然后，当您仅引用（并更改）列表的第一个元素时。尝试一下。

2.  另一种解决方案是为包装函数添加一个属性（函数也是可变的，因此可以更改它，但不会污染全局命名空间）。示例在这里：http: [//ideone.com/7jGvM](http://ideone.com/7jGvM)。在您的情况下，它可能如下所示：

    ```
    def topological_sort(g):

        visited = zeros((len(g)), dtype='int32')
        f = zeros((len(g)), dtype='int32')
        topological_sort.current_label = len(g) # [] so it is seen inside ts_r

        def ts_r(n):
            for nn in [v for v in g[n] if not visited[v]]:
                visited[nn] = 1
                ts_r(nn)
            f[n] = topological_sort.current_label
            topological_sort.current_label -= 1

        for i in range(len(g)):
            if not visited[i]: 
                ts_r(i)

        return f 
    ```

# c# - 如何使用即席 sql 查询进行延迟加载：SQL 过滤

> ID：10712306
> 
> 赞同：1
> 
> 时间：2012-05-23T01:22:46.373
> 
> 标签：c#, sql, sql-server

只是想知道是否可以在没有 linq 或 ORM 的情况下进行延迟加载。我需要做一些不适合 ORM 的查询。我还需要在方法之间传递查询。此外，我找不到任何微型工具来实现这一点。有没有办法做到这一点？

```
var q = "Select Name from Test1" 
```

现在我们必须添加一个 OR 或 AND 或 IN 或其他东西

这个查询将被传递给不同的方法进行过滤。有没有办法使用微型 ORM 或 AD Hoc SQL 查询来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-09T11:35:24.333

您可以直接使用数据读取器，也可以通过一个懒惰地评估它的类来完成。请参阅[http://msdn.microsoft.com/en-us/library/haa3afyz(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/haa3afyz(v=vs.100).aspx)

所以作为一个粗略的例子，你可能会做这样的事情

```
public class LazyReader {
    SqlDataReader m_reader;
    SqlCommand m_command;
    SqlConnection m_connection;
    public LazyReader(SqlConnection connection, String sql)
    {
        m_command = new SqlCommand(sql, connection);
        m_connection = connection;
    }

    public IEnumerable<Object[]> read()
    {
        using (m_connection) {
            m_connection.Open();
            m_reader = command.ExecuteReader();
            while (m_reader.HasRows)
            {
                while (m_reader.Read())
                {
                    Object[] values = new Object[m_reader.FieldCount];
                    m_reader.GetValues(values);
                    yield return values;
                }
                m_reader.NextResult();
            }
            m_reader.Close();
        }
    }
} 
```

您可能需要对示例进行一些摆弄，但想法是使用 DataReader 并逐个读取行，并通过 IEnumerable 将结果与 yield return 一起传递，这将导致惰性求值。然后，您可以传递 IEnumerable 并随意阅读。请注意确保您阅读一致，否则 SQLConnection 将在 30 秒后终止而没有任何活动。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-23T01:27:12.523

为什么不直接使用`Func`or`Action`并让它定义您的查询，所以当您将它传递给下一个函数时，它可以在需要时执行。

它的功能就像延迟加载一样。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-07-11T08:52:21.070

您可以使用

> 懒人<T>

为了这。正如 James 所建议的，它依赖于 Func，但也支持缓存和线程安全。

[http://msdn.microsoft.com/en-us/magazine/ff898407.aspx](http://msdn.microsoft.com/en-us/magazine/ff898407.aspx)

编辑：由于您现在正在寻找 ORM 的其他功能，例如过滤和排序，但是可以灵活地编写原始 sql，我建议您查看诸如 Entity Framework 或 Nhibernate 之类的 ORM 并使用它们的一些原始 sql 功能在适当的地方喜欢

session.CreateSQLQuery(sql);

ORM 还允许您在动态添加 where 过滤器时进行更强的键入以消除错误。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-12T16:02:57.750

这`Lazy<T>`门课听起来像你要找的。正如 Kaido 和 James 建议的那样，您需要定义一个执行实际加载的方法，然后将其传递给延迟加载（实际上是已初始化）对象的 ctor。

前任：

```
public class SomeClass
{
     Lazy<List<string>> myLazy = new Lazy<List<string>>(LoadData);
     private List<string> LoadData()
     {
        //open connection, execute your query, read/project data into a List, etc

        return new List<string> { "Hello", "My", "Name", "Is", "Earl" };
     }
} 
```

该类的`Lazy<T>`行为与您可能期望的完全一样 - 它推迟了包含对象的初始化，直到通过`Value`属性引用它。有关详细信息，请参阅[MDSN 参考](http://msdn.microsoft.com/en-us/library/dd642331.aspx "MSDN 文档")

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-13T02:27:16.157

您可能需要在设计中考虑[存储库模式](http://msdn.microsoft.com/en-us/library/ff649690.aspx)。存储库决定如何向客户端类提供东西。它是如何完成的对消费者来说并不重要，它可以在需要的地方传递或注入。

还要考虑对象缓存，例如[Redis](http://redis.io/)或[Memcached](http://memcached.org/)。如果您需要非顺序地“延迟加载”对象，这些特别有用。可以进行复杂的 SQL 查询以仅返回主键而不是几十个大数据字段。存储查询的所有键，然后按需创建业务对象。

如果您的实现超出了您的要求，Repository 可以在不影响使用它的类的情况下轻松改进。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-24T10:07:10.727

一种方法是将查询表示为某种内存中的对象，您可以进一步向其中添加表达式。例如，使用一些组成的对象层次结构：

```
var q = Table("Test1").Select("Name"); 
```

您可以通过添加过滤器来进一步细化：

```
q = q.Where("ID= 1"); 
```

但这当然意味着您正在重新发明[`IQueryable`](http://msdn.microsoft.com/en-us/library/system.linq.iqueryable.aspx). 你最好只接受 LINQ 并选择一个提供程序（LINQ2SQL 或 LINQ2EF 等）。

另一种方法是保留字符串即席表示：

```
var q = "Select Name from Test1"; 
```

但是你如何添加过滤器？您必须解析字符串并插入 WHERE 子句。这远非微不足道。您很快就会实现一个成熟的 SQL 解析器（[lex](http://en.wikipedia.org/wiki/Lex_%28software%29) + [yacc](http://en.wikipedia.org/wiki/Yacc)或[bison](http://en.wikipedia.org/wiki/GNU_bison) + [flex](http://en.wikipedia.org/wiki/Flex_lexical_analyser)）和一个抽象语法树，然后将其序列化为一个新的 SQL 字符串。一旦你开始考虑连接（支持起来相当简单）、子查询（讨厌）、递归表表达式（哎哟），事情就会变得越来越复杂。只需浏览这个站点，看看可以得到多么复杂的 SQL 查询，并想象为*它*实现一个解析。

我见过的许多项目都试图将查询表示为某种中间形式，例如。一个结构（字段列表、表名、WHERE 条件列表、ORDER BY 子句列表等），然后在这些列表表示中添加新条目（在 WHERE 列表中添加新条目以添加新过滤器）。但是，回想起来，这些表示与 LINQ 提供的相比显得苍白无力。我承认，LINQ 是一个全有或全无的产品，您要么[承诺](http://en.wikipedia.org/wiki/The_Chicken_and_the_Pig)要么不承诺。但试图重新发明它只会揭示问题的复杂性。今天我将从另一端解决问题：从 LINQ 开始并尽量避免它，不要让它成长为无法控制的查询生成工具的可怕怪物，其中项目的每一层都添加了一些过滤器到`IQueryable`然后用优化器甚至无法解开的东西轰炸服务器。

PS。[为什么我写 AREL](http://magicscalingsprinkles.wordpress.com/2010/01/28/why-i-wrote-arel/)是对整个问题的好读物。

# java - 合并网格 opengl 和 libgdx

> ID：10712307
> 
> 赞同：1
> 
> 时间：2012-05-23T01:22:47.730
> 
> 标签：java, opengl, libgdx

我正在使用以下代码合并多个网格：

```
import java.util.ArrayList;
import java.util.Arrays;

import org.obsgolem.crystalia.gfx.Renderer;

import com.badlogic.gdx.graphics.Mesh;
import com.badlogic.gdx.graphics.VertexAttribute;
import com.badlogic.gdx.graphics.VertexAttributes.Usage;
import com.badlogic.gdx.math.Vector3;
import com.badlogic.gdx.utils.Array;
import java.util.*;

public class MeshBatch
{

    private final static VertexAttribute[] attributeConfig = new VertexAttribute[]{
        new VertexAttribute(Usage.Position, 3, "a_position"),
        new VertexAttribute(Usage.ColorPacked, 4, "a_color"),
        new VertexAttribute(Usage.Normal, 3, "a_normal")};
    private final static int VERTEX_SIZE = 3 + 1 + 3;

    private Mesh m;
    private List<Float> vertices = new ArrayList<Float>();
    private List<Short> indices = new ArrayList<Short>();

    public void addMesh(float[] vert, short[] ind)
    {
        int offset = (vertices.size() / VERTEX_SIZE);

        //You have to throw an exception when you get over the limit of short indices
        if (offset + vert.length / VERTEX_SIZE > Short.MAX_VALUE) {
            throw new RuntimeException("blablabla");
        }

        for (short i : addOffset(ind, offset)) {
            indices.add(i);
        }

        for (float v : vert) {
            vertices.add(v);
        }
    }

    public short[] addOffset(short[] ind, int offset)
    {
        short[] indarr = new short[ind.length];
        for (int i = 0; i < ind.length; ++i) {
            //Do you really need this check? You are the only one using this code
            //so make sure that you never provide a null value. If you really want to have a chekc throw an exception instead
            short value = ind[i];//ind[i] == null ? 0 : ind[i];
            indarr[i] = (short) (value + offset);
        }
        return indarr;
    }

    public void end()
    {
        m = new Mesh(false, vertices.size(), indices.size(), attributeConfig);
        m.setVertices(Renderer.makeFloatArray(vertices));
        m.setIndices(Renderer.makeShortArray(indices));
    }

    public void render()
    {
        Renderer.getInstance().render(m);
    }
} 
```

然而，当我使用这个类进行绘制时，我会得到奇怪的光照效果。使用此网格，所有其他对象的光都更亮，而使用此网格渲染的对象具有看起来平坦的照明。使用正常方式（每个对象的单独网格）我得到了很好的平滑光照。下面是我截的两张截图：

使用合并网格：
![合并网格照明](../Images/13ed8505b554749e5da23da0efc2a906.png)

没有合并网格：
![没有合并网格的平滑每像素照明](../Images/8ad2c6f46afe9f97048c6be9b9ca5f35.png)

是什么导致了这个问题，它如何影响另一个网格的照明？我的顶点以正确的格式发送（3 个浮点用于顶点，1 个用于颜色，3 个用于法线）。我的指数也在工作。仅当实际渲染网格时才会出现该问题。没有它，照明工作完美。我认为这个问题与法线有关，但我无法弄清楚那个问题可能是什么。

**编辑：**我想我已经解决了这个问题。当我将瓷砖从使用单独的网格切换到网格时，照明会自行修复。这怎么可能发生？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-09T01:48:35.937

这似乎很适合这个问题的提问[者](https://stackoverflow.com/a/20937752/1895303)：

```
public static Mesh mergeMeshes(AbstractList<Mesh> meshes, AbstractList<Matrix4> transformations)
{
    if(meshes.size() == 0) return null;

    int vertexArrayTotalSize = 0;
    int indexArrayTotalSize = 0;

    VertexAttributes va = meshes.get(0).getVertexAttributes();
    int vaA[] = new int [va.size()];
    for(int i=0; i<va.size(); i++)
    {
        vaA[i] = va.get(i).usage;
    }

    for(int i=0; i<meshes.size(); i++)
    {
        Mesh mesh = meshes.get(i);
        if(mesh.getVertexAttributes().size() != va.size()) 
        {
            meshes.set(i, copyMesh(mesh, true, false, vaA));
        }

        vertexArrayTotalSize += mesh.getNumVertices() * mesh.getVertexSize() / 4;
        indexArrayTotalSize += mesh.getNumIndices();
    }

    final float vertices[] = new float[vertexArrayTotalSize];
    final short indices[] = new short[indexArrayTotalSize];

    int indexOffset = 0;
    int vertexOffset = 0;
    int vertexSizeOffset = 0;
    int vertexSize = 0;

    for(int i=0; i<meshes.size(); i++)
    {
        Mesh mesh = meshes.get(i);

        int numIndices = mesh.getNumIndices();
        int numVertices = mesh.getNumVertices();
        vertexSize = mesh.getVertexSize() / 4;
        int baseSize = numVertices * vertexSize;
        VertexAttribute posAttr = mesh.getVertexAttribute(Usage.Position);
        int offset = posAttr.offset / 4;
        int numComponents = posAttr.numComponents;

        { //uzupelnianie tablicy indeksow
            mesh.getIndices(indices, indexOffset);
            for(int c = indexOffset; c < (indexOffset + numIndices); c++)
            {
                indices[c] += vertexOffset;
            }
            indexOffset += numIndices;
        }

        mesh.getVertices(0, baseSize, vertices, vertexSizeOffset);
        Mesh.transform(transformations.get(i), vertices, vertexSize, offset, numComponents, vertexOffset, numVertices);
        vertexOffset += numVertices;
        vertexSizeOffset += baseSize;
    }

    Mesh result = new Mesh(true, vertexOffset, indices.length, meshes.get(0).getVertexAttributes());
    result.setVertices(vertices);
    result.setIndices(indices);
    return result;
} 

    public static Mesh copyMesh(Mesh meshToCopy, boolean isStatic, boolean removeDuplicates, final int[] usage) {
    // TODO move this to a copy constructor?
    // TODO duplicate the buffers without double copying the data if possible.
    // TODO perhaps move this code to JNI if it turns out being too slow.
    final int vertexSize = meshToCopy.getVertexSize() / 4;
    int numVertices = meshToCopy.getNumVertices();
    float[] vertices = new float[numVertices * vertexSize];
    meshToCopy.getVertices(0, vertices.length, vertices);
    short[] checks = null;
    VertexAttribute[] attrs = null;
    int newVertexSize = 0;
    if (usage != null) {
        int size = 0;
        int as = 0;
        for (int i = 0; i < usage.length; i++)
            if (meshToCopy.getVertexAttribute(usage[i]) != null) {
                size += meshToCopy.getVertexAttribute(usage[i]).numComponents;
                as++;
            }
        if (size > 0) {
            attrs = new VertexAttribute[as];
            checks = new short[size];
            int idx = -1;
            int ai = -1;
            for (int i = 0; i < usage.length; i++) {
                VertexAttribute a = meshToCopy.getVertexAttribute(usage[i]);
                if (a == null)
                    continue;
                for (int j = 0; j < a.numComponents; j++)
                    checks[++idx] = (short)(a.offset/4 + j);
                attrs[++ai] = new VertexAttribute(a.usage, a.numComponents, a.alias);
                newVertexSize += a.numComponents;
            }
        }
    }
    if (checks == null) {
        checks = new short[vertexSize];
        for (short i = 0; i < vertexSize; i++)
            checks[i] = i;
        newVertexSize = vertexSize;
    }

    int numIndices = meshToCopy.getNumIndices();
    short[] indices = null; 
    if (numIndices > 0) {
        indices = new short[numIndices];
        meshToCopy.getIndices(indices);
        if (removeDuplicates || newVertexSize != vertexSize) {
            float[] tmp = new float[vertices.length];
            int size = 0;
            for (int i = 0; i < numIndices; i++) {
                final int idx1 = indices[i] * vertexSize;
                short newIndex = -1;
                if (removeDuplicates) {
                    for (short j = 0; j < size && newIndex < 0; j++) {
                        final int idx2 = j*newVertexSize;
                        boolean found = true;
                        for (int k = 0; k < checks.length && found; k++) {
                            if (tmp[idx2+k] != vertices[idx1+checks[k]])
                                found = false;
                        }
                        if (found)
                            newIndex = j;
                    }
                }
                if (newIndex > 0)
                    indices[i] = newIndex;
                else {
                    final int idx = size * newVertexSize;
                    for (int j = 0; j < checks.length; j++)
                        tmp[idx+j] = vertices[idx1+checks[j]];
                    indices[i] = (short)size;
                    size++;
                }
            }
            vertices = tmp;
            numVertices = size;
        }
    }

    Mesh result;
    if (attrs == null)
        result = new Mesh(isStatic, numVertices, indices == null ? 0 : indices.length, meshToCopy.getVertexAttributes());
    else
        result = new Mesh(isStatic, numVertices, indices == null ? 0 : indices.length, attrs);
    result.setVertices(vertices, 0, numVertices * newVertexSize);
    result.setIndices(indices);
    return result;
} 
```

# google-app-engine - java GAE 的 Titan Stats

> ID：10712312
> 
> 赞同：2
> 
> 时间：2012-05-23T01:23:14.797
> 
> 标签：google-app-engine

有没有类似 Titan 的支持 Java 的应用程序

用于监控服务器端统计信息？

[http://code.google.com/p/titan-files/wiki/GettingStarted](http://code.google.com/p/titan-files/wiki/GettingStarted)

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-08T20:19:29.137

试试[appstats](https://developers.google.com/appengine/docs/java/tools/appstats)。也[可用于 Python](https://developers.google.com/appengine/docs/python/tools/appstats)。另一个对 appstats 有用的资源是Guido Van Rossum 在 Google I/O 2010 上[录制的演示文稿。](http://www.youtube.com/watch?v=bvp7CuBWVgA)

# ruby-on-rails - 如何在本地机器上设置克隆的 Rails 项目？

> ID：10712313
> 
> 赞同：4
> 
> 时间：2012-05-23T01:23:20.240
> 
> 标签：ruby-on-rails, git

当您克隆一个 Rails 项目并希望在您的计算机上启动并运行它时，您首先运行`bundle install`，但接下来您要做什么？具体来说，您如何设置数据库？我可以让它工作，`rake db:migrate`但这会改变`schema.rb`文件，我不想把它提交到我的 git 历史记录中。是否有一些 rake 任务可以执行此操作或以某种方式正确执行此操作？任何见解将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T01:44:40.293

`rake db:create && rake db:schema:load`

应该`config/database.yml`为当前环境创建指定的数据库，并创建指定的表/索引`db/schema.rb`。您可能还想`rake db:test:prepare`设置测试数据库。

# pdf-generation - 如何在 Rails 中创建代表一个数据表的多页 PDF（包括每个新页面上的列标题）？

> ID：10712315
> 
> 赞同：3
> 
> 时间：2012-05-23T01:24:16.857
> 
> 标签：pdf-generation, ruby-on-rails-3.2, prawn, pdfkit, wicked-pdf

如何在 Rails 中创建代表一个数据表的多页 PDF（包括每个新页面上的列标题）？我查看了许多带有 wicked-pdf、pdfkit 和 prawn 的示例，但没有看到任何专门解决溢出到后续页面以及需要在每个新页面中重复标题的内容。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T04:00:28.643

我使用 Prawn 生成我的 pdf，并且可以得到你想要的效果，如下所示：

```
def render_photo_table(pdf)
  ps = self.photos.map do |photo|
    [photo.filename, photo.image_height, photo.image_width]
  end
  ps.insert(0, ['Filename', 'Height', 'Width'])
  pdf.table(ps) do |table|
    table.header = true
  end
end 
```

这会在每一页的顶部产生一个标题（设置在数组位置 0 中）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T09:19:26.907

对此也有麻烦，但找到了一种相当简单的方法（经过很多头痛）来做到这一点。

在项目上方放置一个浮动的地标 div，这样您就可以获得起始坐标（我称之为 ID item_top）。

然后使用顶级数据 div 渲染页面，使用类“ `unbreakable`”。

还包括一个强制分页符的类：

```
.page-breaker {
  display: block;
  clear: both;
  page-break-after: always;
} 
```

然后渲染后

```
<script>
// Very top of items
var current_top = $('#item_top').offset().top;
// Check distance from top of page to bottom of item
// If greater than page size put page break and headers before
// Reset top of page to top of item.
$('.unbreakable_section').each(function(index) {
  var item_bottom = $(this).offset().top + $(this).outerHeight(true);
  if ((item_bottom - current_top) > 1250) {
    $(this).before("<div class='page-breaker'></div>");
    $(this).before("Headings Div here");
    current_top = $(this).offset().top - 48; // item - header height
  }
});

</script> 
```

如果空间超过页面高度，这将测量自上次分页后的垂直空间并开始一个新页面并在其上方放置一个标题。（1250 是近似值，对我来说已经足够接近了 - 我在页面上也有一个页脚，因此高度可能会因您的设置而异）。

在 100 页的文档上进行测试可以按预期工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T15:22:25.190

我们为此编写了内部 jquery 代码。

如果您有以下页面：

```
<div class="mypage">
  <div class="mypage_footer"></div>
</div> 
```

在外面你有：

```
<div class="mybox">
  <table><tbody><tr><td>omg</td></tr></tbody></table>
</div>
<div class="mybox">
  <table><tbody><tr><td>lol</td></tr></tbody></table>
</div> 
```

假设您有一个固定的页面高度（最好是 A4 大小），您可以使用 jquery 来：

*   通过从 mypage 的高度中减去页面子项的 $(element).height() 来计算 mypage 内的剩余空间
*   当有剩余空间时，从页面外部选择一个 mybox 并将其放在页面内
*   如果没有更多空间，请创建第一页的副本并重复。

# python - Pyplot - 更改 pyplot 中的 x 轴编号

> ID：10712323
> 
> 赞同：0
> 
> 时间：2012-05-23T01:25:26.200
> 
> 标签：python, matplotlib

我正在尝试显示力与时间的关系图，并且测量频率可能会发生变化。例如，80 个样本/秒、100 个/秒等。此频率作为“速率”加载。我可以将绘图安排为以任何速率除以秒，但我无法以秒为单位标记 x 轴，只能以样本为单位。我被阻止发布输出图像，但这个测试文件的速率为 80/秒，X 轴标记为 80、160、240、320 等。我怎样才能让它在几秒钟内标记，即 1 , 2, 3, 4 等等？

```
import numpy as np
import pylab as p
import matplotlib.pyplot as plt
from matplotlib.ticker import MultipleLocator, FormatStrFormatter

x = read_csv_file('test2.csv')
fnum = int(x[0][0])    # run number
rate = int(x[0][1])    # data rate
unit = int(x[0][2])    # 0 = metric
span_r = int(x[0][3])  # calibration setting
span_w = int(x[0][4])  # calibration setting

load = np.loadtxt(x[1], delimiter=',', unpack=True)

xfmt = "1/%d sec"      # x axis label

if unit:
  span_r = span_r*454
  yfmt = "Pounds Force"
else:
  span_r = span_r*9.81
  yfmt = "Newtons"

fig = plt.figure()
ax = fig.add_subplot(111)
majorLocator = MultipleLocator(rate)
majorFormatter = FormatStrFormatter('%d')
ax.xaxis.set_major_locator(majorLocator)
ax.xaxis.set_major_formatter(majorFormatter)
ax.plot(load * span_w / span_r)
plt.xlabel(xfmt % rate)
plt.ylabel(yfmt)
plt.grid(True)
plt.show() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T01:41:20.777

创建一个时间数组，并`plot()`使用 xaxis 数据和 yaxis 数据调用，例如`pl.plot(x, y)`：

```
import pylab as pl
import numpy as np

period = 0.01
data = np.random.rand(1230)
t = np.arange(0, len(data)*period, period)
pl.plot(t, data)
pl.show() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T01:48:00.943

请参阅[如何更改 pyplot 轴的增量](https://stackoverflow.com/questions/3013350/how-to-change-the-amount-of-increments-in-pyplot-axis)

跟随那个：

```
ax.set_xticks( np.arange(upper-x-bound) ) 
```

# performance - JavaMail SMTPTransport.isConnected() 对于 Exchange 服务器非常慢

> ID：10712324
> 
> 赞同：1
> 
> 时间：2012-05-23T01:25:29.163
> 
> 标签：performance, jakarta-mail

我有一个邮件守护程序，可以使用带有 SMTP 的 JavaMail (1.4.5) 发送电子邮件通知。建议使用实例方法`sendMessage()`而不是静态方法`Transport.send()`。所以我`isConnected()`在调用之前测试了连接`sendMessage()`。它可以在我的家庭计算机上与我的 ISP 的 SMTP 服务器正常工作。但是，当我在工作计算机上测试相同的代码时，速度要慢得多。（我的工作计算机比我的家用计算机快得多。）所以我认为唯一的区别是它与公司的 Exchange 服务器通信。有人遇到过类似的问题吗？

- 带 ISP 的家用电脑：`isConnected()`需要 10-100 毫秒

- 使用 Exchange 的工作计算机：`isConnected()`需要 5 秒。

-如果我使用静态`Transport.send()`发送消息（无需测试连接），在我的工作计算机上大约需要 300 毫秒。

这是示例代码：

```
public class TestMail {
    static Session session;
    static InternetAddress fromAddr;
    static InternetAddress[] toAddr;
    static int n = 1;

    public static void main(String[] args) throws MessagingException {
        String to = "yourname@gmail.com";   //System.getProperty("user.name") + "@aaaa.com"
        String from = "yourname@gmail.com"; //System.getProperty("user.name") + "@aaaa.com"

        Properties props = new Properties();
        props.put("mail.smtp.host", "mail.optonline.net");
        // props.put("mail.smtp.host", "mail.aaaa.com");

        session = Session.getInstance(props);
        fromAddr = new InternetAddress(from);
        toAddr = new InternetAddress[] { new InternetAddress(to) };

        Transport bus = session.getTransport("smtp");
        bus.connect();

        String body = "This is the body of the email.\n";

        for (int i = 1; i <= n; ++i) {

            Message msg = createMessage(i + "th email", body);

            long stime = System.currentTimeMillis();

            if (!bus.isConnected()) {
                System.out.println("Connecting ....");
                bus.connect();
            }
            long etime = System.currentTimeMillis();
            long isConnectedTime = etime - stime;

            stime = etime;
            bus.sendMessage(msg, toAddr);
            // Transport.send(msg);
            etime = System.currentTimeMillis();
            long sendTime = etime - stime;

            System.out.printf("IsConnected: %d,  Sending: %d\n", isConnectedTime, sendTime);
        }

        bus.close();
    }

    public static Message createMessage(String subject, String body)
            throws MessagingException {
        Message msg = new MimeMessage(session);
        msg.setFrom(fromAddr);
        msg.setRecipients(Message.RecipientType.TO, toAddr);
        msg.setSubject(subject);
        msg.setSentDate(new Date());
        msg.setText(body);
        msg.saveChanges();
        return msg;
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T05:36:46.133

当然，您可以在不先调用 isConnected 的情况下使用 sendMessage。我不知道为什么使用 Exchange 会慢得多。isConnected 方法只是向服务器发送一个 NOOP 命令以确保服务器仍然存在。服务器可能故意延迟其对 NOOP 命令的响应以防止滥用。

# uiviewcontroller - 目标c：从detailViewController调用masterViewController中的方法

> ID：10712332
> 
> 赞同：0
> 
> 时间：2012-05-23T01:26:40.760
> 
> 标签：uiviewcontroller, uisplitviewcontroller, master-detail, method-call, detailview

我正在使用 x-codes 主从模板。我在 detailView 中有一个按钮，它在 detailViewController 中也有它的动作。在此操作方法中，我需要调用 masterViewController 中的方法。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T01:37:26.380

您需要获取 masterViewController 的引用。使用委托模式。

用这种类型的函数初始化你的 detailViewController：

```
-(id)initWithDelegate:(id)deleg; 
```

与协议：

```
 -(id)initWithDelegate:(id<myProtocol>)deleg; 
```

并在你的 detailViewController 的 .h 中

```
id delegate; 
```

与协议：

```
id<myProtocol> delegate; 
```

然后在 .m 的详细信息中：

```
-(id)initWithDelegate:(id)deleg
{
    self = [super init];
    if(self)
    {
       delegate = deleg
    }
    return self;
} 
```

然后在你的函数中

```
 -(IBAction)actionOfmyButton
    {
        if(delegate != nil && [delegate respondToSelector:@selector(functionFoo:)])
        {
           [delegate functionFoo:myArgumentsIfnecessary];
        }
    } 
```

祝你好运^^！

# sql-server-2008-r2 - SQL Server 2008 R2 Management Studio TRANSFORM ROW-COL 不使用 PIVOT（聚合）可以完成吗？

> ID：10712334
> 
> 赞同：1
> 
> 时间：2012-05-23T01:26:52.457
> 
> 标签：sql-server-2008-r2, transform, rows

我不想创建聚合函数 ( `sum, count, max`)。`PIVOT`需要那个。

我的问题是，早在我出生之前的某个人可能将数据“读取”为两列，实际上应该是每列 1 个值的列数据，乘以“n”条记录。

他们的数据集：

```
(RECORDSET, NAME, VALUE)
(1, FIELD1, char1-1)
(1, FIELD2, char2-1)
(1, FIELD3, int3-1)
(1, FIELD4, char4-1)
(…)
(…)
(…)
(1, FIELD26, float26-1)
(2, FIELD1, char1-2)
(2, FIELD2, char2-2)
(2, FIELD3, int3-2)
(2, FIELD4, char4-2)
(…)
(…)
(…)
(2, FIELD26, float26-2)
(3, FIELD1, char1-3)
(3, FIELD2, char2-3)
(3, FIELD3, int3-3)
(3, FIELD4, char4-3)
(…)
(…)
(…)
(3, FIELD26, float26-3) 
```

我需要每组 26 条记录是这样的：

```
FIELD1......FIELD2......FIELD3......FIELD4.............FIELD 26
char1-1.....char2-1.....int3-1......char4-1............float26-1
char1-2.....char2-2.....int3-2......char4-2............float26-2
char1-3.....char2-3.....int3-3......char4-3............float26-3 
```

等等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:15:29.677

我会使用[支点](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.90%29.aspx?ppud=4)，所以我包括了支点版本和其他一些选项。

具有枢轴和聚合的版本。[SE-数据](https://data.stackexchange.com/stackoverflow/query/70965)

```
select P.FIELD1, P.FIELD2, P.FIELD3, P.FIELD4
from YourTable T
pivot (min(T.VALUE) for T.NAME in (FIELD1, FIELD2, FIELD3, FIELD4)) P 
```

没有枢轴但仍使用聚合的版本。[SE-数据](https://data.stackexchange.com/stackoverflow/query/70967)

```
select min(case when T.NAME = 'FIELD1' then T.VALUE end) as FIELD1,
       min(case when T.NAME = 'FIELD2' then T.VALUE end) as FIELD2,
       min(case when T.NAME = 'FIELD3' then T.VALUE end) as FIELD3,
       min(case when T.NAME = 'FIELD4' then T.VALUE end) as FIELD4
from (select RECORDSET, NAME, VALUE from YourTable) T
group by T.RECORDSET 
```

没有枢轴，也没有聚合。[SE-数据](https://data.stackexchange.com/stackoverflow/query/70968)

```
select T.R.value('(VALUE[@Name = "FIELD1"])[1]', 'varchar(10)') as FIELD1,
       T.R.value('(VALUE[@Name = "FIELD2"])[1]', 'varchar(10)') as FIELD2,
       T.R.value('(VALUE[@Name = "FIELD3"])[1]', 'varchar(10)') as FIELD3,
       T.R.value('(VALUE[@Name = "FIELD4"])[1]', 'varchar(10)') as FIELD4
from
    (
      select (select T1.NAME as "@Name",
                     T1.VALUE as "*"
              from @T T1
              where T1.RECORDSET = T.RECORDSET
              for xml path('VALUE'), root('RECORDSET'), type)
      from YourTable T
      group by T.RECORDSET
      for xml path(''), type
    ) X(XML)
  cross apply X.XML.nodes('RECORDSET') as T(R) 
```

另一个无枢轴无聚合版本。[SE-数据](https://data.stackexchange.com/stackoverflow/query/70969)

```
select (select T2.VALUE
        from YourTable T2
        where T.RECORDSET = T2.RECORDSET and
              T2.NAME = 'FIELD1') as FIELD1,
       (select T2.VALUE
        from YourTable T2
        where T.RECORDSET = T2.RECORDSET and
              T2.NAME = 'FIELD2') as FIELD2,
       (select T2.VALUE
        from YourTable T2
        where T.RECORDSET = T2.RECORDSET and
             T2.NAME = 'FIELD3') as FIELD3,
       (select T2.VALUE
        from YourTable T2
        where T.RECORDSET = T2.RECORDSET and
             T2.NAME = 'FIELD4') as FIELD4
from YourTable T
group by T.RECORDSET 
```

# jquery-ui - jquery iu disableSelection() 和 enableSelection()

> ID：10712336
> 
> 赞同：1
> 
> 时间：2012-05-23T01:27:05.987
> 
> 标签：jquery-ui

我有一个名为 desktop 的 div，我在此上禁用了Selection()。在这个 div 中，我创建了 Dialogs 作为用户输入表单。问题是当我禁用选择时，表单上的输入元素有问题。我尝试为输入元素启用选择（），但它不起作用。有什么想法、建议吗？

先感谢您！！！

**编辑** 我进一步删除了桌面上的对话框，使输入元素起作用。现在的问题是从对话框标签内部开始拖动被选中。我可以忍受，但我想要一个很好的解决方案！

![在此处输入图像描述](../Images/cb6bcd28536cd9ce11a439e62228920d.png)

# android - android小部件手动刷新

> ID：10712338
> 
> 赞同：0
> 
> 时间：2012-05-23T01:27:18.590
> 
> 标签：android, widget

我写了一个小部件，它会根据我的配置每两个小时自动更新一次内容。但是如何通过按小部件中的按钮手动刷新它。谢谢你的评论。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T13:53:13.753

你必须在`layout_wid.xml`文件中放一个按钮。

在`onUpdate()`你必须找到你的按钮的ID。并放置点击事件来刷新你的小部件

```
Intent imageview2Intent= new Intent(context, WatchWidget.class);
PendingIntent pendingIntent= PendingIntent.getBroadcast(context,0, imageview2Intent,0);         
remoteViews.setOnClickPendingIntent(R.id.widget_textview, pendingIntent); 
```

你试试这个方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T01:49:31.510

您需要在控件上调用 invalidate()。请参阅[本页上的绘图。](http://developer.android.com/reference/android/view/View.html)

```
class myActivity extends Activity{
    MyButton myButton = null;
...
onCreate(){
    myButton = findViewById(...); 
...
myMethodWhereIWantToRefreshMyButton(){
    myButton.invalidate(); 
```

# django - 如何判断父类的 Queryset 给出的 Django 对象是否实际上是子类中具有相关数据的对象？

> ID：10712342
> 
> 赞同：0
> 
> 时间：2012-05-23T01:28:25.920
> 
> 标签：django, django-models, python-2.7, django-queryset, django-orm

**我的问题：**在 Model 类的`save()`、`clean()`和 one-off 方法中，对子模型的父级进行了引用。这些引用在子代模型中失败，因为需要引用父代的父代。检查`[object].[child-class name as attribute]`失败，因为所有对象都具有此属性，但尝试在子类表中没有相关对象的对象上访问它会导致异常。

给定以下模型：

```
...
from django_extensions.db.fields import UUIDField

class Event(models.Model):
    uuid = UUIDField()
    ...

class TicketedEvent(Event):
    ...

    def save():
        # Do work with the parent's data
        ... self.event.uuid ...
        # TicketedConcert objects use this save() as well
        # but need to refer to self.ticketedevent.event.uuid

class TicketedConcert(TicketedEvent):
    ... 
```

在查看结果时，`TicketedEvent.objects.all()`我看到了所有 TicketedEvent 和 TicketedConcert 对象，而查看结果中`TicketedConcert.objects.all()`只显示了 TicketedConcert 对象。

我的意图是检测给定对象`TicketedEvent.objects.all()`是否实际上是 TicketedConcert 对象，而不需要将我所有的工作都包含在`try:/except:`.

我希望只有实际上*是* 对象的对象才会具有包含模型相关数据`TicketedConcert`的属性（由 给出`.select_related()`）。当试图基于子类属性的存在（如真/假）时，这给了我以下错误：`.ticketedconcert``TicketedConcert``.exclude()`

```
>>> TicketedEvent.objects.select_related().exclude(ticketedconcert=True)
Traceback (most recent call last):
  File "<console>", line 1, in <module>
  File "/Users/Bryson/.virtualenvs/spyon/lib/python2.7/site-packages/django/db/models/query.py", line 557, in exclude
    return self._filter_or_exclude(True, *args, **kwargs)
  File "/Users/Bryson/.virtualenvs/spyon/lib/python2.7/site-packages/django/db/models/query.py", line 566, in _filter_or_exclude
    clone.query.add_q(~Q(*args, **kwargs))
  File "/Users/Bryson/.virtualenvs/spyon/lib/python2.7/site-packages/django/db/models/sql/query.py", line 1191, in add_q
    self.add_q(child, used_aliases, force_having=force_having)
  File "/Users/Bryson/.virtualenvs/spyon/lib/python2.7/site-packages/django/db/models/sql/query.py", line 1194, in add_q
    can_reuse=used_aliases, force_having=force_having)
  File "/Users/Bryson/.virtualenvs/spyon/lib/python2.7/site-packages/django/db/models/sql/query.py", line 1072, in add_filter
    can_reuse)
  File "/Users/Bryson/.virtualenvs/spyon/lib/python2.7/site-packages/django/db/models/sql/query.py", line 1521, in split_exclude
    if active_positions[-1] > 1:
IndexError: list index out of range
>>> 
```

此外，我尝试`.exclude()`基于存在/空值如下：

```
>>> TicketedEvent.objects.select_related().exclude(ticketedconcert__isnull=True)
[<TicketedEvent: Event Name>, <TicketedEvent: Event Name>] 
```

实际上，两个返回的事件都是一个`TicketedConcert`. 检查子类是否存在作为属性的 null 仅返回实际具有子类对象的对象。显然，**父模型返回的每个对象都将子类作为属性，但在非子类对象上访问它会失败。**我对此的预期结果是，只有实际具有关联子类对象的对象才会具有该属性。

这是我的问题。当被父类访问时，我如何才能真正判断一个对象是否实际上在该属性中具有数据（因此实际上是一个子类）？

我最初的尝试如下：

```
if hasattr(self, ticketedconcert):
    # do a different set of work on this data, it's a concert
else:
    # do normal, non-concert work upon this data 
```

这继续给我错误，因为*每个对象都具有该属性，*无论其使用能力如何。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:18:38.513

```
Event.objects.exclude(
    id__in=TicketedConcert.objects.values_list('id', flat=True)
) 
```

“我的目​​的是防止 TicketedConcert 子类对象包含在父类的结果中。”

```
TicketedEvent.objects.exclude(
    id__in=TicketedConcert.objects.values_list('id', flat=True)
) 
```

我不确定这是否是使用实例的最佳解决方案。例如：

```
if tevent.id in TicketedConcert.objects.values_list('id', flat=True):
    # the event is a concert
else:
    # the event is not a TicketedConcert 
```

但是，它会起作用并且不会太糟糕（也许）。

# java - 如何为 Mac/Windows 捆绑 Java 应用程序？

> ID：10712343
> 
> 赞同：23
> 
> 时间：2012-05-23T01:28:57.397
> 
> 标签：java, windows, macos, installation, software-distribution

我有一个 Java .jar 应用程序，我想将它分发给我在 Mac 或 Windows 上的客户。我想使用一个工具来获取我的 jar 文件并将其分别包装在 Mac 和 Windows 的 .dmg 和 .exe 包装器中，在运行时执行此操作：

1.  检查是否安装了 JRE；如果没有，它会从 Oracle 安装 JRE6。否则，它将安装的 JRE 更新到最新的 1.6.x 版本。
2.  在开始菜单（在 Windows 中）或 Applications 文件夹（在 MacOSX 中）中创建一个指向我包装的应用程序的快捷链接，并让我的应用程序使用上述 JRE 运行
3.  支持 Windows 的简单“卸载应用程序”。对于 Mac，只需将 .app 拖到废纸篓即可删除。

可选功能：

1.  支持独立于平台的应用程序图标
2.  支持自动更新jar
3.  运行我的 .jar 时支持 JRE 的参数
4.  Linux 支持（.deb 或 .rpm）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T02:07:14.043

查看适用于 Mac的[*Package Maker和适用于 Windows 的*](http://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/PackageMakerUserGuide/Introduction/Introduction.html)[*Advanced Installer*](http://www.advancedinstaller.com/)。

我已经将它们用于您列出的几乎所有要求。

我没有将它们用于自动更新，但您可能必须将该逻辑构建到您的应用程序中。

不过，不要指望他们会为您完成所有工作。

预计会花费大量时间为每个平台构建安装程序。

我敢肯定 Windows 和 Linux 有很多选择。 *Advanced Installer*恰好是我唯一使用过的。

我相信*Package Maker*是 Mac 的标准。它非常棒且易于使用。

祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-26T02:38:38.850

For deploying on Windows, I like using [Launch4j](http://launch4j.sourceforge.net/) for wrapping my application jar and creating a native Windows executable that can detect and use an already installed JRE, or allows you to bundle your own. It's fast, lightweight and easily scripted with Ant (or Maven) as part of your build process.

Combined with this, I typically use [NSIS](http://nsis.sourceforge.net/Main_Page) for creating an installer that puts in shortcuts, and allows install/uninstall/repair from Control Panel. With a bit of work, this can also be scripted via Ant, and can also be built from a Linux platform.

These solutions obviously won't work for Mac deployment, but I suspect you'll have to use different tools for the different platforms if you want the best experience for the end users.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-26T05:35:57.850

I have researched this for a while so that I can install the application in Linux and Windows. The best alternatives I found were -

*   [Izpack](http://izpack.org/)

You can find information how to use it native in this [blogpost](http://www.javalobby.org/articles/izpack/). But installing it in Linux got me to use a .sh script. As for mac my knowledge is limited. Hope this helps.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T04:43:18.260

Note that if you develop your application as a netbeans platform application, then netbeans will produce cross platform installers for you (including for mac).

The fact that its a netbeans application has little impact on the look and feel of the app, you can still make it behave pretty much the same as any stand alone swing app.

This has the following advantages, which i think makes it a compelling option: - cross platform - its free - does not require a JDK to be installed prior to running the installer - integrates a software update process

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-27T13:32:56.253

There are already some good answers, but I guess [JavaWebStart](http://www.java.com/en/download/faq/java_webstart.xml) needs to be mentioned. Of course, it is only suitable for web deploment, but after installation Your application may also run offline.

The features (auto update, JVM version check, Desktop icon) are available.

Things to consider:

*   Your application needs to be singed to have access rights like a "normal" application.
*   afaik You cannot ship Your application on any other way than per web download.

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-04-16T13:09:38.537

**Java Runtime Environment (JRE)** is gone since JDK 11\.

[JDK 11 Release Notes](https://www.oracle.com/technetwork/java/javase/11-relnote-issues-5012449.html) states -

> In this release, the JRE or Server JRE is no longer offered. Only the JDK is offered. Users can use jlink to create smaller custom runtimes.

[u/0x256 on Reddit has a great comment](https://www.reddit.com/r/java/comments/9ualdq/why_did_java_11_jre_not_install_with_jdk_and/e92yy7c) regarding this issue:

> There is no separate JRE anymore, only the JDK which includes all JRE parts (e.g. the java binary). **Also, do not use OracleJDK unless you intend to pay them money. OpenJDK is the new default.**

You can use [jlink](https://docs.oracle.com/javase/10/deploy/self-contained-application-packaging.htm#JSDPG587) (which comes with the JDK) to distribute Java Apps. It will build a dedicated JRE for you. You do not need to have java installed on client machines.

An [oracle blog article](https://blogs.oracle.com/java-platform-group/faster-and-easier-use-and-redistribution-of-java-se) mentioned that -

> Using the ‘jlink’ tool introduced with JDK 9 will make it even easier for application developers to package and deploy dedicated runtimes rather than relying on a pre-installed system JRE.

# wget - 镜像http网站，不包括某些文件

> ID：10712344
> 
> 赞同：9
> 
> 时间：2012-05-23T01:29:12.173
> 
> 标签：wget

我想将一个简单的受密码保护的门户网站镜像到我想保持镜像和最新的一些数据。本质上，这个网站只是一个目录列表，其中的数据组织到文件夹中，我并不真正关心保留 html 文件和其他格式元素。但是有一些巨大的文件类型太大而无法下载，所以我想忽略这些。

使用该`wget -m -R/--reject`标志几乎可以满足我的要求，除了下载所有文件，然后如果它们与 -R 标志匹配，那么它们就会被删除。

这是我的使用方式`wget`：

```
wget --http-user userName --http-password password -R index.html,*tiff,*bam,*bai -m http://web.server.org/ 
```

它产生这样的输出，确认排除的文件 (index.html) (a) 被下载，然后 (b) 被删除：

> ...
> --2012-05-23 09:38:38-- [http://web.server.org/folder/](http://web.server.org/folder/)
> 重用与 web.server.org:80 的现有连接。
> 已发送 HTTP 请求，等待响应... 401 需要授权
> 重用与 web.server.org:80 的现有连接。
> HTTP 请求已发送，等待响应... 200 OK
> 长度：2677 (2.6K) [text/html]
> 保存到：`web.server.org/folder/index.html' 100%[======== ==================================================== ==================================================== ==========>] 2,677 --.-K/s in 0s
> 
> 缺少上次修改的标头——时间戳已关闭。
> 2012-05-23 09:38:39 (328 MB/s) - 保存了“web.server.org/folder/index.html” [2677/2677]
> 
> 删除 web.server.org/folder/index.html，因为它应该被拒绝。
> 
> ...

有没有办法强制 wget 在下载文件之前拒绝该文件？
有没有我应该考虑的替代方案？

另外，尽管提供了用户名和密码，为什么`401 Authorization Required`每个下载的文件都会出错。这就像`wget`在尝试用户名/密码之前每次都尝试未经身份验证的连接。

谢谢，马克

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-28T00:37:17.210

Pavuk ( [http://www.pavuk.org](http://www.pavuk.org) ) 看起来像是一个很有前途的替代方案，它允许您镜像网站，不包括基于 url 模式和文件扩展名的文件......但是 pavuk 0.9.35 seg-faults/dies 在长期转移的中间，似乎没有积极开发（此版本于 2008 年 11 月构建）。

仅供参考，这是我使用它的方式：
`pavuk -mode mirror -force_reget -preserve_time -progress -Robots -auth_scheme 3 -auth_name x -auth_passwd x -dsfx 'html,bam,bai,tiff,jpg' -dont_leave_site -remove_old -cdir /path/to/root -subdir /path/to/root -skip_url_pattern ’*icons*’ -skip_url_pattern '*styles*' -skip_url_pattern '*images*' -skip_url_pattern '*bam*' -skip_url_pattern '*solidstats*' http://web.server.org/folder 2>&1 | tee pavuk-`日期`.log`

最后，`wget --exclude-directories`成功了：

```
wget --mirror --continue --progress=dot:mega --no-parent \
--no-host-directories --cut-dirs=1 \
--http-user x --http-password x \
--exclude-directories='folder/*/folder_containing_large_data*' --reject "index.html*" \
--directory-prefix /path/to/local/mirror
http://my.server.org/folder 
```

由于`--exclude-directories`通配符不跨越“/”，因此您需要非常具体地形成查询以避免下载整个文件夹。

标记

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-06-01T15:23:49.787

`Parameter --reject 'pattern'`实际上对我**有用 wget 1.14**。

例如：

```
wget --reject rpm http://somerpmmirror.org/site/ 
```

根本没有下载所有`*.rpm`文件，只有索引。

> **警告：**如果文件模式与位于工作目录中的文件匹配，则 bash 可能会无意中扩展文件模式。请使用引号来避免这种情况：

```
touch blahblah.rpm
# working
wget -R '*.rpm' ....
# working
wget -R "*.rpm" ....
# not working
wget -R *.rpm .... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T01:42:25.507

wget 不可能：http: [//linuxgazette.net/160/misc/lg/how_to_make_wget_exclude_a_particular_link_when_mirroring.html](http://linuxgazette.net/160/misc/lg/how_to_make_wget_exclude_a_particular_link_when_mirroring.html)

好吧，不过，我不确定是否有新版本。

关于 401 代码，不保留任何状态（cookie 不用于 HTTP 身份验证），因此每次请求都必须发送用户名和密码。wget 尝试没有用户的请求并在诉诸它之前先通过。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-20T16:02:34.467

wget -X directory_to_exclude[,other_directory_to_exclude] -r [ftp://URL_ftp_server](ftp://URL_ftp_server)

```
服务器
    |-日志
    |-等
    |-缓存
    |-public_html
      |-图片
      |-videos（想排除）
      |-文件
      |-audio（想排除）

```

wget -X /public_html/videos,/public_html/audio ftp:SERVER/public_html/*

# ruby-on-rails - Heroku 错误 - 出现弃用错误，应用程序停止工作。

> ID：10712348
> 
> 赞同：0
> 
> 时间：2012-05-23T01:29:45.540
> 
> 标签：ruby-on-rails, heroku, gemfile

我推送了我的最新代码，然后我的 heroku 应用程序停止工作。我检查了日志并收到一条错误消息。是否有我应该移除的特定宝石？这是数据库错误吗？

```
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-05-23T00:08:04+00:00 app[web.1]: DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
2012-05-23T00:08:11+00:00 app[web.1]: /app/app/controllers/admin/users_controller.rb:1:in `<top (required)>': superclass mismatch for class UsersController (TypeError) 
```

我运行了 heroku run rake db:migrate 以防万一出现问题并得到类似的警告：

```
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
DEPRECATION WARNING: You have Rails 2.3-style plugins in vendor/plugins! Support for these plugins will be removed in Rails 4.0\. Move them out and bundle them in your Gemfile, or fold them in to your app as lib/myplugin/* and config/initializers/myplugin.rb. See the release notes for more on this: http://weblog.rubyonrails.org/2012/1/4/rails-3-2-0-rc2-has-been-released. (called from <top (required)> at /app/config/environment.rb:5)
/app/app/controllers/admin/users_controller.rb:1:in `<top (required)>': superclass mismatch for class UsersController (TypeError)
    from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
    from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
    from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
    from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:359:in `require_or_load'
    from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:313:in `depend_on'
    from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:225:in `require_dependency'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/engine.rb:439:in `block (2 levels) in eager_load!'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/engine.rb:438:in `each'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/engine.rb:438:in `block in eager_load!'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/engine.rb:436:in `each'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/engine.rb:436:in `eager_load!'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/application/finisher.rb:53:in `block in <module:Finisher>'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `instance_exec'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:30:in `run'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:55:in `block in run_initializers'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `each'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/initializable.rb:54:in `run_initializers'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/application.rb:136:in `initialize!'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /app/config/environment.rb:5:in `<top (required)>'
    from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
    from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `block in require'
    from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in `require'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/application.rb:103:in `require_environment!'
    from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.3/lib/rails/commands.rb:40:in `<top (required)>'
    from script/rails:6:in `require'
    from script/rails:6:in `<main>' 
```

这是我的 Gemfile：

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'
gem 'bootstrap-sass', '2.0.0'
gem 'omniauth'
gem 'omniauth-facebook'
gem 'omniauth-twitter'
gem 'omniauth-oauth'
gem 'devise'
gem 'cancan'
gem 'paperclip'
gem 'canard'
gem 'activeadmin'
gem 'acts_as_tree'
gem 'formtastic'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

group :development, :test do
gem 'sqlite3'
gem 'nifty-generators'
end

group :production do
  gem 'pg'
  gem 'thin'
end

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer', :platform => :ruby

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug19', :require => 'ruby-debug' 
```

是否有我应该移除的特定宝石？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T03:18:51.880

这里发生了两件事：弃用警告和错误。错误是

```
/app/app/controllers/admin/users_controller.rb:1:in `<top (required)>': superclass mismatch for class UsersController (TypeError) 
```

`superclass mismatch for class UsersController`这通常意味着您使用的名称已被使用。我的第一个猜测是您的管理文件夹和根控制器文件夹中有一个 UsersController，但这只是一个猜测。无论哪种方式，您在调用超类时都会在某处出错。

弃用警告不应该引起任何问题，只是警告为将来的 Rails 版本更改该代码。

# mysql - MySQL sub-SELECT 从同一张表

> ID：10712349
> 
> 赞同：4
> 
> 时间：2012-05-23T01:29:49.037
> 
> 标签：mysql

出于这个问题的目的，这被过度简化了，但假设我有一个`INVENTORY`包含以下列的表：`SKU`, `DATE`, `QUANTITY`。我想选择`QUANTITY`前一天的所有列小于`QUANTITY`任何一天的列。如何在同一张表上编写`SELECT`带有子查询的查询`SELECT`？

或者，如果有人知道如何称呼这种查询，那么我可以自己做更多的研究，这会很有帮助。（即，这是一个递归查询吗？）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T01:52:51.270

我认为这对您来说是一个好的开始（如果我正确理解您的架构）。
在英语中，这将选择昨天数量少于同一 SKU 前几天最低数量的所有 SKU。

```
SELECT 
    SKU, 
    Quantity

FROM 
    INVENTORY inv

WHERE
    inv.DATE = GETDATE() - 1
    AND inv.QUANTITY < (SELECT MIN(prev_inv.QUANTITY) 
                        FROM INVENTORY prev_inv
                        WHERE 
                            prev_inv.DATE < GETDATE() - 1 
                            AND prev_inv.SKU = inv.SKU
                       ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T02:05:41.687

你可以将一个表加入到它的自身中来做这种事情。确切的语法可能不适合日期数学，如果您每天有多个记录，您可能想要进行一些 GROUPing，但我希望您明白这一点。

```
SELECT i1.*
FROM INVENTORY AS i1
JOIN INVENTORY AS i2 ON i2.DATE = i1.DATE + 1
WHERE i1.QUANTITY > i2.QUANTITY 
```

# php - PHP会话cookie未保存在android上

> ID：10712350
> 
> 赞同：0
> 
> 时间：2012-05-23T01:30:01.227
> 
> 标签：php, session, session-cookies

我编写了一个使用 php 会话的 php Web 应用程序。当我在 Android 手机上尝试时，发现浏览器没有保留会话 cookie。我把它归结为这个超短的测试脚本：

```
<?php
session_start();
var_dump($_COOKIE);
?> 
```

我在另一个浏览器中看到的预期行为是：在第一次调用时，我们看到：

```
array(0) { } 
```

在第二次和随后的调用中，我们看到如下内容：

```
array(1) { ["PHPSESSID"]=> string(32) "8f08c514a5c15c36309e9a435ebcc8ec" } 
```

然而，在 Android 手机上，`$_COOKIE`数组保持为空，我总是得到第一个响应 ( `array(0) { }`)。

我检查了设置并启用了 cookie。其他需要登录的网站（不是我写的）也可以正常工作。我还尝试清除所有 cookie 和缓存以防万一，但它没有改变任何东西。

**编辑：**为了澄清， session_start() 应该设置会话cookie，它实际上可以在台式电脑上使用Firefox。我还查看了 http 标头并发现

```
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Set-Cookie: PHPSESSID=a270cbe1b57ba089c1eedacd8344e871; path=/ 
```

所以cookie肯定会被设置。当然，除非 PHP 在为 Android 浏览器提供服务时做一些不同的事情。

这是一个已知问题还是我遗漏了一些明显的问题？有没有解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-06T22:32:19.197

我意识到这是一个老问题，但我刚遇到同样的问题，在 StackOverflow 或 Google 上都找不到答案，所以我想我会分享我的解决方案。

如果您不使用子域，某些浏览器（主要是移动设备）会插入“www”。例如，如果您的站点是 example.com，浏览器会将其更改为 www.example.com。

如果您的会话是在 example.com 上设置的，那么会话 cookie 也是如此设置的，并且不会在 www.example.com 上被识别。我知道解决此问题的最简单方法是将以下行添加到您的 .htaccess 文件中：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www\.(.+)
RewriteCond %{HTTPS}s/%1 ^(on(s)|offs)/(.+)
RewriteRule ^ http%2://%3%{REQUEST_URI} [L,R=301] 
```

希望这会帮助遇到同样问题的人:-)

# keyboard - 使用 AppleScript 发送数字键的向下/向上事件

> ID：10712353
> 
> 赞同：3
> 
> 时间：2012-05-23T01:30:06.337
> 
> 标签：keyboard, applescript

我需要使用 AppleScript 向应用程序发送数字键的**按键按下/按键向上事件**。但是，命令：

```
key down "6"
delay 1
key up "6" 
```

发送击键，就好像它们来自数字键盘一样。我需要将它们解释为来自键盘顶部的数字行。

我也尝试过使用`(ASCII character 54)`而不是文字，但没有成功。

*注意我需要发送 key down ——发送`keystroke`或`key code`不会发送。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T12:00:23.940

尝试发送*虚拟键代码*`key down`而不是击键文字，即

 *```
key down (key code <int>) 
```

其中`int`之一在哪里

```
1 → 18
2 → 19
3 → 20
4 → 21
5 → 23
6 → 22
7 → 26
8 → 28
9 → 25
0 → 29 
```

你会发现所有声明的虚拟键码

```
/System/Library/Frameworks/Carbon.framework/Versions/A/Frameworks/HIToolbox.framework/Versions/A/Headers/Events.h 
```

但是，如果您不想将十六进制转换为整数，那么查找它们的最简单方法可能是使用许多技巧的[关键代码，](http://manytricks.com/keycodes/)[正如](https://stackoverflow.com/posts/10718489/edit)[dj bazzie wazzie](https://stackoverflow.com/users/1075643/dj-bazzie-wazzie)所建议的那样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T10:54:01.300

使用需要键码或击键的系统事件时，上下键将不起作用。击键将执行它的值，而键码需要键号。从应用商店下载应用“钥匙代码”以确定正确的钥匙代码（它是免费的）。

```
--activate the application (and it's first responder) first
tell application "System Events"
    keystroke "1" --value "1"
    key code 18 --1 from upper num keys
    key code 83 --1 from num pad
end tell 
```*

# nhibernate - nhibernate返回结果大小导致性能差异为什么？

> ID：10712355
> 
> 赞同：-1
> 
> 时间：2012-05-23T01:30:53.857
> 
> 标签：nhibernate, pagination, performance

```
int pageSize = 36;
int pageIndex=1; 

IMultiQuery multiQuery = _session.CreateMultiQuery();
            multiQuery
                .Add(session.CreateQuery("select * from Smart_Products where " + where + " order by " + orderBy)
                    .SetFirstResult((pageIndex - 1) * pageSize)
                    .SetMaxResults(pageSize))
                .Add(session.CreateQuery("select count(*) c from Smart_Products where " + where))
                .SetInt32("BrandId", brandId)
                .SetInt32("Flag", flag)
                .SetInt32("Status", 1);
            if (categoryId > 0)
            {
                multiQuery.SetInt32("CategoryId", categoryId);
            }
            IList results = multiQuery.List();
            foreach (var o in (IList)results[0])
                products.Add((ProductInfo)o);
            long count = (long)((IList)results[1])[0]; 
```

对大数据（例如，所有行数为 1000000 行）进行分页时，相同的查询可以快速获得结果，但小数据（例如，所有行数为 5 行）速度较慢。

但是我使用 sql profiler 来跟踪查询，并复制查询在 msms 中执行它非常快地使用 50ms 获取数据，但是当小数据花费 10s 甚至超时时使用 nhibernate 列出数据，我尝试了一些发布的方法该站点，清除缓存和使用无状态会话都没有得到消息。任何人都知道如何改进它。非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T06:06:57.570

首先，您对 SQL 注入持开放态度，在构建 SQL 语句时，您永远不应该真正使用字符串连接。这将来会回来咬你。请抽出时间查看这篇文章[SQL Injection](http://en.wikipedia.org/wiki/SQL_injection)并改用参数化查询。

现在对于您的问题，需要考虑一些事情：-

1.  每个测试的 where 子句是否相同？
2.  索引是问题的原因吗？
3.  您是否查看过 SSMS 中的查询计划以了解发生了什么？
4.  当您第二次运行相同的 SQL 两次时，它会缓存在 SQL Server 上，这就是为什么您第二次会看到更快的时间。

作为脚注，它不是**NHibernate**导致问题，**而是**SQL Server 和您正在运行的查询。我建议你先看看这个。

# mysql - MYSQL AND OR 在多对多表上

> ID：10712358
> 
> 赞同：1
> 
> 时间：2012-05-23T01:31:16.197
> 
> 标签：mysql, sql

有点令人费解的问题，但基本上我有一个多对多表`word_relationships`：

```
+-----+--------+--------+
|  ID | WORD_A | WORD_B |
+-----+--------+--------+
|  1  |  784   |  893   |
+-----+--------+--------+
|  2  |  930   |  839   |
+-----+--------+--------+
|  3  |  093   |  647   |
+-----+--------+--------+ 
```

它是一个列表`word a`和`word b`关系。我需要查询 word_a 和 word_b 之间的关系是否存在。如果单词可以是单词 A 或单词 b，那么正确的语法是什么？

在我的脑海里

```
w1 = 784
w2 = 893
"SELECT ID FROM word_relationships WHERE WORD_A = w1 OR WORD_B = w1 AND WORD_A = w2 OR WORD_B = w2"; 
```

这似乎不起作用，因为我得到了任何匹配的结果。任何熟悉这种情况并知道正确语法的人？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T01:38:29.690

我认为您可以在 where 子句中加上括号来正确组合 OR。

```
SELECT ID 
FROM word_relationships 
WHERE (WORD_A = w1 OR WORD_B = w1) 
AND (WORD_A = w2 OR WORD_B = w2) 
```

不过，我不完全确定我是否理解您的查询意图。希望有帮助。

顺便说一句，您获得所有结果的原因是因为[SQL 运算符的优先顺序。](http://dev.mysql.com/doc/refman/5.0/en/operator-precedence.html)

由于 AND 在 OR 之前被评估，这意味着默认情况下该子句按如下方式分组：

```
WHERE WORD_A = w1 
OR (WORD_B = w1 AND WORD_A = w2) 
OR WORD_B = w2 
```

这将返回比您预期的要多得多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T01:38:09.277

这应该有效：

```
SELECT 
  id 
FROM 
  word_relationships
WHERE 
 (Word_A = w1 AND Word_B = w2)
OR 
 (Word_A = w2 AND Word_B = w1) 
```

# hibernate - 无法在 GWT + Hibernate + MySQL 项目中配置 MySQL 数据源

> ID：10712365
> 
> 赞同：4
> 
> 时间：2012-05-23T01:32:45.680
> 
> 标签：hibernate, gwt

我正在尝试将 JSP / Hibernate 项目迁移到 GWT / Hibernate。简而言之，问题似乎是来自 jetty-env.xml 的 MysqlConnectionPoolDataSource 类显然没有被实例化，导致来自 web.xml 的资源引用失败。

我们的 Hibernate 设置在非 GWT 项目中运行良好。我正在使用 Eclipse Indigo、Google Suite 插件 2.5、Google GWT Designer 2.4.2。

以下是我采取的步骤以及我认为重要的文件摘录。（提前道歉 - 这有点冗长，但想确保我的问题是完整和清晰的。）

我的 war/WEB-INF/classes/hibernate.cfg.xml 包括：

```
<property name="hibernate.connection.datasource">
    java:comp/env/jdbc/nndb
</property> 
```

web.xml 包括：

```
<resource-ref>
    <description>NN Database Connection Pooling</description>
    <res-ref-name>jdbc/nndb</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
    <res-sharing-scope>Shareable</res-sharing-scope>
</resource-ref> 
```

[我还按照此处](http://webtide.intalio.com/2011/08/gwt-and-jndi/)所述创建了 CustomJettyLauncher并添加了 Eclipse 运行配置以使用它（运行配置参数 -server com....CustomJettyLauncher）这导致：

jetty-6.1.x [WARN] NN 数据库连接池中的配置问题 jdbc/nndbjavax.sql.DataSourceContainerShareable java.lang.IllegalStateException：没有绑定名称 javax.sql.DataSource/default

大概在这一点上，我需要在 jetty-env.xml 中定义资源的条目：

```
<?xml version="1.0"?> <!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//DTD Configure//EN" "http://jetty.mortbay.org/configure.dtd">
<Configure class="org.mortbay.jetty.webapp.WebAppContext">
    <New id="nndb" class="org.mortbay.jetty.plus.naming.Resource">
        <Arg>jdbc/nndb</Arg>
        <Arg> 
            <New class="com.mysql.jdbc.jdbc2.optional.MysqlConnectionPoolDataSource">
               <Set name="Url">jdbc:mysql://dbserver/dbname</Set>
               <Set name="User">dbuser</Set>
               <Set name="Password">dbpasswd</Set>
            </New>
        </Arg>
   </New>
</Configure> 
```

但是上面的错误（Nothing to bind for name javax.sql.DataSource/default）仍然存在。有趣的是，如果我故意在 jetty-env.xml 中篡改数据源类名（例如 NOSUCH.com.mysql.jdbc.jdbc2.optional.MysqlConnectionPoolDataSource），则没有任何问题，因此它甚至可能不会尝试实例化该类。（WebAppContext 和 Resource 的类似“跟踪器”错误确实会产生抱怨，因此只有 ConnectionPoolDataSource 没有尝试实例化。）

哇！

有谁知道出了什么问题？任何建议将不胜感激。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T20:54:49.437

在玩过您的项目代码后，我不得不完全改变我的答案。这是一个新的：

> 您碰巧从早期版本的 GWT 中获取了 Jetty Launcher 代码（我相信）。一旦我用我`CustomJettyLauncher`拥有的版本替换了您的版本（根据相同的建议进行了修改，但在 GWT 2.4 代码库的版本之上），所有这些都结合在一起了。`java:comp/env`初始上下文、等的正确初始化

如果您将其添加`java:comp/env`到名称中，您实际上也可以使您的版本与 6.1.11 一起使用，`jetty-env.xml`但我认为走这条路没有意义。我无法使其与 6.1.26 一起使用，这并不重要，因为**使用正确的 Jetty Launcher 代码库使其可以与任一版本一起使用**。

这是有效的启动器代码（包和类名就是您拥有它的方式，因此它是“插入式”替代品）：[https ://gist.github.com/2854726](https://gist.github.com/2854726)

* * *

为以后可能偶然发现这篇文章的人留下痕迹。通过启动具有日志级别的 GWT，您可以让 Jetty`DEBUG`在 GWT 托管（开发）模式下显示其日志。`SPAM`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-30T22:04:31.033

在我们在评论中进行对话之后，我决定继续在本地构建一个简单的“hello world”，看看我是否可以重现这个问题。我不得不经历一些箍，但不是你描述的那个。**我现在想知道您的类路径中是否有任何冲突版本的码头库**。例如，请看[这里的这个问题](https://stackoverflow.com/questions/10800922/jetty-env-xml-with-datasource-leads-to-failing-webappcontext-on-mvn-jettyrun)。为了以防万一，我不得不处理与 GWT 托管模式、类加载和 Hibernate 相关的其他一些问题（[这里](https://stackoverflow.com/questions/8149401/hibernate-classcastexception-in-gwt-hosted-mode-only)，[更多](https://hibernate.onjira.com/browse/HHH-7084)，[更多](https://stackoverflow.com/questions/8891467/exception-in-gwt-dev-mode-spring-3-1-hibernate-4-0-1)）。**现在一切都清楚了，我的简单示例正在运行**。

回到你的情况。查看修补过的 Jetty 启动器，我发现 GWT 对 Jetty 的日志记录子系统做了什么。看看`JettyTreeLogger`内部类。它将所有`INFO`及以下发送到`SPAM`. 除非您使用日志级别运行 GWT 应用程序，否则您`SPAM`不会看到诊断案例所需的“宝贵”Jetty 输出。因此**，在运行配置（GWT 选项卡）中打开垃圾邮件日志级别，或者进一步修补已经修补的启动器，以免吞下 Jetty 日志消息**。

按照步骤设置我自己的 Jetty Launcher 并使用日志级别 SPAM 运行 GWT，我可以在控制台中看到以下内容：

```
...
Created java:comp/env for webapp /
Finding global env entries
...
parse: file:/.../JettyHibernateExample/war/WEB-INF/jetty-env.xml
...
loaded class com.mysql.jdbc.jdbc2.optional.MysqlDataSource from ContextLoader@null
XML new class com.mysql.jdbc.jdbc2.optional.MysqlConnectionPoolDataSource
...
XML new class org.mortbay.jetty.plus.naming.Resource
...
Looking up name="jdbc"
Looking up binding for jdbc for context=env
...
Subcontext jdbc created
Adding binding with key=nndb obj=Reference Class Name: com.mysql.jdbc.jdbc2.optional.MysqlConnectionPoolDataSource 
```

它成功解析出配置并正确绑定创建的对象。在日志中进一步：

```
May 30, 2012 5:27:33 PM org.hibernate.cfg.Configuration configure
INFO: HHH000043: Configuring from resource: /hibernate.cfg.xml
...
DEBUG org.hibernate.cfg.Configuration -
hibernate.connection.datasource=java:comp/env/jdbc/nndb
...
DEBUG org.hibernate.internal.SessionImpl - Opened session at timestamp
DEBUG org.hibernate.internal.SessionImpl - Disconnecting session
DEBUG o.h.e.j.i.LogicalConnectionImpl - Releasing JDBC connection 
```

A`SessionFactory`已成功实例化、`Session`打开并随后断开连接。我没有进一步测试它，假设从这里开始一切都会好起来的。

这是我的依赖项列表`WEB-INF/lib`：

```
antlr-2.7.7.jar
dom4j-1.6.1.jar
gwt-servlet.jar
hibernate-commons-annotations-4.0.1.Final.jar
hibernate-core-4.1.3.Final.jar
hibernate-jpa-2.0-api-1.0.1.Final.jar
hibernate-validator-4.1.0.Final.jar
javassist-3.15.0-GA.jar
jboss-logging-3.1.0.GA.jar
jboss-transaction-api_1.1_spec-1.0.0.Final.jar
jetty-naming-6.1.11.jar
jetty-plus-6.1.11.jar
logback-classic-1.0.1.jar
logback-core-1.0.1.jar
mysql-connector-java-5.1.20-bin.jar
report
slf4j-api-1.6.4.jar
validation-api-1.0.0.GA.jar 
```

我希望在打开日志的情况下，您最终会看到有什么阻碍。如果您需要进一步的帮助，请随时在某个地方分享它以供我们查看。

**更新**现在要检查您的日志文件，我将开始提出更多建议。我注意到的第一件事是您`web.xml`似乎没有遵循元素的 DTD 顺序。你`resource-ref`应该追求`servlet`,`servlet-mapping`和`welcome-file-list`. 不过这似乎无关紧要。

你能告诉我你说的到底是什么意思吗

> @ 不同版本：项目类路径：WEB-INF/lib 中的 6.1.26 但 6.1.11

我想确保类路径不是问题，并且我们在运行时没有多个码头 JAR 冲突。请分享您的`.classpath`项目文件以及`WEB-INF/lib`.

**更新 2**我发现您的日志文件中的事件顺序与我的不同。我会切入正题。

在码头 6.1.11 中：

```
public void configureWebApp() throws Exception
{
    //create a java:comp/env
    createEnvContext();

    //add java:comp/env entries for any globally defined EnvEntries
    bindGlobalEnvEntries();

    //set up java:comp/env as the Context in which to bind directly
    //the entries in jetty-env.xml
    NamingEntry.setScope(NamingEntry.SCOPE_LOCAL);

    //check to see if an explicit file has been set, if not,
    //look in WEB-INF/jetty-env.xml
    ....
} 
```

在 Jetty 6.1.26 中：

```
public void configureWebApp() throws Exception
{
    //check to see if an explicit file has been set, if not,
    //look in WEB-INF/jetty-env.xml
    ...
} 
```

并将创建上下文移至：

```
public void configureDefaults() throws Exception
{        
    //create a java:comp/env
    createEnvContext();
} 
```

它没有设置`SCOPE_LOCAL`。没有`SCOPE_LOCAL`根上下文是不`java:comp/env`应该的。运行 6.1.26 (`plus`和`naming`) 我现在可以看到“有问题的”：

```
Looking up binding for __ for context=null 
```

尽管如此，它仍然可以正常工作。现在，“范围”逻辑必须存在于其他地方，只要您拥有 6.1.26（并且早期版本中没有任何冲突的类），它应该可以正常工作。你在哪里：

```
Looking up name="__/jdbc/nndb"
Looking up binding for __ for context=null
InitialContextFactory.getInitialContext()
Created initial context delegate for local namespace:org.mortbay.naming.local.localContextRoot@237c8a9c
InitialContextFactory.getInitialContext()
Created initial context delegate for local namespace:org.mortbay.naming.local.localContextRoot@457019f7
Looking up name="Server@1c9e8392/__/javax.sql.DataSource/default" 
```

我有：

```
 Looking up name="__/jdbc/nndb"
   Looking up binding for __ for context=null
   Looking up name="jdbc/nndb"
   Looking up binding for jdbc for context=__
   Looking up name="nndb"
   Looking up binding for nndb for context=jdbc
   InitialContextFactory.getInitialContext()
   Created initial context delegate for local namespace:org.mortbay.naming.local.localContextRoot@1830f66
   >>> new root context requested 
   Looking up name="comp/env"
   Looking up binding for comp for context=null
   Using classloader of current org.mortbay.jetty.handler.ContextHandler
   Looking up name="env"
   Looking up binding for env for context=comp
   Binding java:comp/env/jdbc/nndb to jdbc/nndb 
```

也就是说，**理顺您的类路径并确保您*正在*运行 6.1.11 或 6.1.26 而不是两者的混合**。它应该这样做。还有一件事情。确保您没有将任何自定义 JNDI 东西（如对象工厂）与`WEB-INF/classes`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T06:59:56.977

我将向您展示在许多项目中适用于我们的配置。

1.) 使用 gwt-dev 依赖创建 XJettyLauncher：

```
package ru.minogin;

import java.io.File;

import org.mortbay.jetty.webapp.WebAppContext;

import com.google.gwt.core.ext.TreeLogger;

public class XJettyLauncher extends com.google.gwt.dev.shell.jetty.JettyLauncher {
    @SuppressWarnings("unchecked")
    @Override
    protected WebAppContext createWebAppContext(TreeLogger logger, File appRootDir) {
        WebAppContext context = new WebAppContext(appRootDir.getAbsolutePath(), "/");
        context.getInitParams().put("org.mortbay.jetty.servlet.Default.useFileMappedBuffer", "false");
        return context;
    }
} 
```

把它包装成罐子。

2.) 创建用户库 Jetty 并在其中包含：**XJettyLauncher、jetty-naming-6.1.21.jar、jetty-plus-6.1.21.jar**（或您的 Jetty 版本）。将此库添加到项目中。

3.) src/main/webapp/WEB-INF/jetty-web.xml：

```
 <?xml version="1.0"?>
    <!DOCTYPE Configure PUBLIC "-//Mort Bay Consulting//DTD Configure//EN" "http://jetty.mortbay.org/configure.dtd">

<Configure class="org.mortbay.jetty.webapp.WebAppContext">
    <New id="DB" class="org.mortbay.jetty.plus.naming.Resource">
        <Arg>java:comp/env/jdbc/DS</Arg>
        <Arg>
            <New class="com.mysql.jdbc.jdbc2.optional.MysqlConnectionPoolDataSource">
                <Set name="Url">jdbc:mysql://localhost:3306/database?autoReconnect=true&amp;zeroDateTimeBehavior=convertToNull&amp;characterEncoding=utf8
                </Set>
                <Set name="User">user</Set>
                <Set name="Password">passwd</Set>
            </New>
        </Arg>
    </New>
</Configure> 
```

4.) pom.xml：

```
<dependency>
  <groupId>mysql</groupId>
  <artifactId>mysql-connector-java</artifactId>
  <version>5.1.19</version>
  <scope>runtime</scope>
</dependency> 
```

5.) 运行配置：

-remoteUI "${gwt_remote_ui_server_port}:${unique_id}" -logLevel INFO -port auto -war D:\var\ws\PROJECT\src\main\webapp -codeServerPort 9997 -server ru.minogin.XJettyLauncher ru.project.App

# prolog - 错误：pro-log中的单变量[x]。如何解决？

> ID：10712367
> 
> 赞同：0
> 
> 时间：2012-05-23T01:33:30.813
> 
> 标签：prolog, river-crossing-puzzle

它是传教士-食人族程序，在 legal(3,x).legal(0,x) 行发现错误。

```
%        : mandc(state(3,3,left), [state(3,3,left)], Path)?
mandc(state(0, 0, right), _, []).
mandc(CurrentState, Visited, [Move | RestOfMoves]) :-
newstate(CurrentState, NextState),
not(member(NextState, Visited)),
make_move(CurrentState, NextState, Move),
mandc(NextState, [NextState | Visited], RestOfMoves).
% make_move(State1, State2, Move) builds the move(-,-,-) that gets you
% from State1 to State2.
make_move(state(M1, C1, left), state(M2, C2, right), move(M, C, right)) :-
        M is M1 - M2,
        C is C1 - C2.
make_move(state(M1, C1, right), state(M2, C2, left), move(M, C, left)) :-        M is M2 - M1,
        C is C2 - C1.
% carry(X,Y) is true if the boat can carry X missionaries and Y cannibals.
carry(2, 0).
carry(1, 0).
carry(1, 1).
carry(0, 1).
carry(0, 2).
% legal(X, Y) is true if it is safe for the missionaries to have X
% missionaries and Y cannibals together on a river bank (left or right).
legal(X, X).
**legal(3,X).
legal(0,X).**
% newstate(State1, State2)
newstate(state(M1, C1, left), state(M2, C2, right)) :-
carry(M, C),
        M =< M1,
        C =< C1,
        M2 is M1 - M,
        C2 is C1 - C,
legal(M2, C2).
newstate(state(M1, C1, right), state(M2, C2, left)) :-
carry(M, C),
        M2 is M1 + M,
        C2 is C1 + C,
        M2 =< 3,
        C2 =< 3,
legal(M2, C2). 
```

任何人都可以说解决它吗？如果你有其他传教士计划 - 食人族然后给我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T01:37:46.377

问题是所讨论的两个事实每个都只有一个变量 X 的外观（因此，它们是“单例”）。如果您不需要表示两个（或更多）事物需要匹配，而只是表示它可以是任何东西，请使用下划线。虽然这不应该是一个错误，而是一个警告。

# vb.net - 显示图表控件 Xaxis 中的所有值

> ID：10712371
> 
> 赞同：9
> 
> 时间：2012-05-23T01:34:03.193
> 
> 标签：vb.net, mschart

我有一堆产品的图表，总共 35 个。他们放大了 X 轴。该图表绘制得很好，但只有 5 个产品名称显示，我需要它们全部显示。我已将 MinorTickMark 启用为 true，因此所有刻度线都显示，但我如何让它们各自的标签可见？

我无法发布图片，所以这里是 aspx 标记和背后的代码。.aspx 标记；

```
<asp:Chart ID="MonthinYearchart" Width="350px" Height="420px" runat="server">
            <Series> 
            <asp:Series  ChartType="Bar"  ChartArea="MainChartArea" Name="PnL"> 

            </asp:Series> 
            </Series> 
            <ChartAreas> 
                 <asp:ChartArea Name="MainChartArea"> 
                 </asp:ChartArea> 
            </ChartAreas> 
        </asp:Chart> 
```

这是将示例数据放入图表中的代码。

```
Private Sub AllCommodforMonthChart()
    Dim cht As Chart = MonthinYearchart
    'create the arraylist of data
    'this is hardcoded to get chart to work, you will have to
    'set up the code to retrieve it from database
    Dim list As List(Of String) = GetList("Futures Data")
    Const val As Integer = 65

    'create all the data points
    For i As Integer = 0 To list.Count - 1
        cht.Series("PnL").Points.AddXY(list(i), val * i)
    Next
    cht.Series("PnL").ChartType = SeriesChartType.Bar
    cht.ChartAreas("MainChartArea").AxisX.MinorTickMark.Enabled = True

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-27T00:04:35.287

图表控件非常有限，如果你想自定义它，你最好创建自己的图表，通过生成图像：

[见链接](https://stackoverflow.com/questions/22436112/chart-control-change-axis-color/22436720#22436720)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-04T09:54:44.250

答案在于 Axis LabelStyles。下面的代码将格式化轴（X 或 Y），以便显示所有次要刻度线，间隔为 1，并且每个刻度线的所有标签都将显示。

```
 cht.ChartAreas("MainChartArea").AxisX.MinorTickMark.Enabled = True
cht.ChartAreas("MainChartArea").AxisX.Interval = 1
cht.ChartAreas("MainChartArea").AxisX.IsLabelAutoFit = True
'cht.ChartAreas("MainChartArea").AxisX.LabelStyle.IsStaggered = True
cht.ChartAreas("MainChartArea").AxisX.LabelAutoFitStyle =  LabelAutoFitStyles.DecreaseFont 
```

注意：如果您希望标签交错，请取消注释倒数第二行

# haskell - 从 QuickCheck1 转换为 QuickCheck2 的“食谱”？

> ID：10712373
> 
> 赞同：16
> 
> 时间：2012-05-23T01:34:21.633
> 
> 标签：haskell, quickcheck

是否有可用于从 QuickCheck1 转换为 QuickCheck2 的食谱？

作为一些示例，`defaultConfig`([替换为`Args`](https://stackoverflow.com/questions/8116262/how-to-get-haskell-quickcheck-2-4-to-increase-tests)) 和`trivial`被删除和[`CoArbitrary`](http://hackage.haskell.org/packages/archive/QuickCheck/2.4.2/doc/html/Test-QuickCheck.html#g:7)引入。

我确实阅读了[QuickCheck 2 (with single answer ...) 中的新增功能](https://stackoverflow.com/questions/1933283/whats-new-in-quickcheck-2)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-20T04:57:11.367

我不知道有任何这样的文件——真可惜！

然而，至少有一个部分更改列表发布到邮件列表：http: [//osdir.com/ml/lang.haskell.general/2006-11/msg00060.html](http://osdir.com/ml/lang.haskell.general/2006-11/msg00060.html)

那里给出的清单包括：

*   缩小失败的测试用例。
*   支持测试一元代码。
*   优雅地处理异常。
*   coarbitrary 已移至单独的类，以便更轻松地编写 Arbitrary 的简单实例。
*   用于更改测试数据生成的类型级修饰符（例如 NonNegative）。
*   魔术功能表打印。
*   属性失败时用户定义的操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-17T18:47:45.820

QuickCheck2 的作者似乎没有提供发行说明，这些说明通常用于回答像您这样的问题。假设（哦，我们知道这意味着什么！）作者更新了 API 文档，您可以将其与您拥有的版本进行比较，差异将为您提供您的食谱。作为最后的手段，您可以比较源代码，但这可能会显示出比您关心的更多的差异。

# ios - Xcode - 游戏中心 - 接受多人邀请未处理

> ID：10712377
> 
> 赞同：0
> 
> 时间：2012-05-23T01:34:43.900
> 
> 标签：ios, xcode, game-center, multiplayer, invitation

我目前正在开发 Game Center Multiplayer，但遇到了一些障碍。目前我下面的代码将验证他的用户显示媒人视图并开始一场比赛就好了。但是，当我尝试邀请朋友参加比赛时，当我接受时，要求进行比赛的警报视图会显示它会将我带到配对视图控制器并说它正在等待我另一台设备上的其他玩家它也说它正在等待让其他玩家回应。最终过了一段时间，它说邀请被取消了。我没有使用模拟器，我有 2 台设备，它们都有单独的游戏中心配置文件。一个是IOS 4.2，另一个是IOS 4.3。我不知道可能出了什么问题。我所有的多人游戏代码都在下面。此外，对于向任一设备发送数据，我很想知道一个好的网站来了解更多信息。我很高兴看到你们能想出什么。谢谢

视图控制器.h

```
 #import <Foundation/Foundation.h>
 #import <GameKit/GameKit.h>

@protocol GCHelperDelegate 
- (void)matchStarted;
- (void)matchEnded;
- (void)match:(GKMatch *)match didReceiveData:(NSData *)data fromPlayer:(NSString *)playerID;
- (void)inviteReceived;
@end

@interface ViewController : UIViewController <GKMatchmakerViewControllerDelegate, GKMatchDelegate, GCHelperDelegate, GameCenterManagerDelegate> {
 BOOL gameCenterAvailable;
BOOL userAuthenticated;

UIViewController *presentingViewController;
GKMatch *match;
BOOL matchStarted;
id <GCHelperDelegate> delegate;
NSMutableDictionary *playersDict;
GKInvite *pendingInvite;
NSArray *pendingPlayersToInvite;

}

@property (assign, readonly) BOOL gameCenterAvailable;
@property (retain) GKMatch *match;
@property (assign) id <GCHelperDelegate> delegate;
@property (retain) NSMutableDictionary *playersDict;
@property (retain) GKInvite *pendingInvite;
@property (retain) NSArray *pendingPlayersToInvite;

- (void)authenticateLocalUser;
- (void)findMatchWithMinPlayers:(int)minPlayers maxPlayers:(int)maxPlayers viewController:(UIViewController *)viewController delegate:(id<GCHelperDelegate>)theDelegate;

@end 
```

和视图控制器.m

```
 //ViewController.m Multyplayer

#pragma mark Initialization

- (BOOL)isGameCenterAvailable {
// check for presence of GKLocalPlayer API
Class gcClass = (NSClassFromString(@"GKLocalPlayer"));

// check if the device is running iOS 4.1 or later
NSString *reqSysVer = @"4.1";
NSString *currSysVer = [[UIDevice currentDevice] systemVersion];
BOOL osVersionSupported = ([currSysVer compare:reqSysVer 
                                       options:NSNumericSearch] != NSOrderedAscending);

return (gcClass && osVersionSupported);
}

- (id)init {
if ((self = [super init])) {
    gameCenterAvailable = [self isGameCenterAvailable];
    if (gameCenterAvailable) {
        NSNotificationCenter *nc = 
        [NSNotificationCenter defaultCenter];
        [nc addObserver:self 
               selector:@selector(authenticationChanged) 
                   name:GKPlayerAuthenticationDidChangeNotificationName 
                 object:nil];
    }
}
return self;
}

#pragma mark Internal functions

- (void)authenticationChanged {    

if ([GKLocalPlayer localPlayer].isAuthenticated && !userAuthenticated) {
    NSLog(@"Authentication changed: player authenticated.");
    userAuthenticated = TRUE;  

    [GKMatchmaker sharedMatchmaker].inviteHandler = ^(GKInvite *acceptedInvite, NSArray *playersToInvite) {

        NSLog(@"Received invite");
        self.pendingInvite = acceptedInvite;
        self.pendingPlayersToInvite = playersToInvite;
        [delegate inviteReceived];

    };

} else if (![GKLocalPlayer localPlayer].isAuthenticated && userAuthenticated) {
    NSLog(@"Authentication changed: player not authenticated");
    userAuthenticated = FALSE;
}

    }

- (void)lookupPlayers {

NSLog(@"Looking up %d players...", match.playerIDs.count);
[GKPlayer loadPlayersForIdentifiers:match.playerIDs withCompletionHandler:^(NSArray *players, NSError *error) {

    if (error != nil) {
        NSLog(@"Error retrieving player info: %@", error.localizedDescription);
        matchStarted = NO;
        [delegate matchEnded];
    } else {

        // Populate players dict
        self.playersDict = [NSMutableDictionary dictionaryWithCapacity:players.count];
        for (GKPlayer *player in players) {
            NSLog(@"Found player: %@", player.alias);
            [playersDict setObject:player forKey:player.playerID];
        }

        // Notify delegate match can begin
        matchStarted = YES;
        [delegate matchStarted];

    }
}];

}

#pragma mark User functions

- (void)authenticateLocalUser { 

if (!gameCenterAvailable) return;

NSLog(@"Authenticating local user...");
if ([GKLocalPlayer localPlayer].authenticated == NO) {     
    [[GKLocalPlayer localPlayer] authenticateWithCompletionHandler:nil];        
} else {
    NSLog(@"Already authenticated!");
}
}

- (void)findMatchWithMinPlayers:(int)minPlayers maxPlayers:(int)maxPlayers viewController:(UIViewController *)viewController delegate:(id<GCHelperDelegate>)theDelegate {

if (!gameCenterAvailable) return;

matchStarted = NO;
self.match = nil;
self.presentingViewController = viewController;
delegate = theDelegate;

if (pendingInvite != nil) {

    GKMatchmakerViewController *mmvc = [[[GKMatchmakerViewController alloc] initWithInvite:pendingInvite] autorelease];
    mmvc.matchmakerDelegate = self;
    [self presentModalViewController:mmvc animated:YES];

    self.pendingInvite = nil;
    self.pendingPlayersToInvite = nil;

} else {

    GKMatchRequest *request = [[[GKMatchRequest alloc] init] autorelease]; 
    request.minPlayers = minPlayers;     
    request.maxPlayers = maxPlayers;
    request.playersToInvite = pendingPlayersToInvite;

    GKMatchmakerViewController *mmvc = [[[GKMatchmakerViewController alloc] initWithMatchRequest:request] autorelease];    
    mmvc.matchmakerDelegate = self;

    [self presentModalViewController:mmvc animated:YES];

    self.pendingInvite = nil;
    self.pendingPlayersToInvite = nil;

}
}           

#pragma mark GKMatchmakerViewControllerDelegate

// The user has cancelled matchmaking
- (void)matchmakerViewControllerWasCancelled:(GKMatchmakerViewController *)viewController {
[self dismissModalViewControllerAnimated:YES];
}

// Matchmaking has failed with an error
- (void)matchmakerViewController:(GKMatchmakerViewController *)viewController didFailWithError:(NSError *)error {
[self dismissModalViewControllerAnimated:YES];
NSLog(@"Error finding match: %@", error.localizedDescription);    
}

// A peer-to-peer match has been found, the game should start
- (void)matchmakerViewController:(GKMatchmakerViewController *)viewController didFindMatch:(GKMatch *)theMatch {
[self dismissModalViewControllerAnimated:YES];
self.match = theMatch;
match.delegate = self;
if (!matchStarted && match.expectedPlayerCount == 0) {
    NSLog(@"Ready to start match!");
    [self lookupPlayers];
}
}

#pragma mark GKMatchDelegate

// The match received data sent from the player.
- (void)match:(GKMatch *)theMatch didReceiveData:(NSData *)data fromPlayer:(NSString *)playerID {

if (match != theMatch) return;

[delegate match:theMatch didReceiveData:data fromPlayer:playerID];
}

// The player state changed (eg. connected or disconnected)
- (void)match:(GKMatch *)theMatch player:(NSString *)playerID didChangeState:(GKPlayerConnectionState)state {

if (match != theMatch) return;

switch (state) {
    case GKPlayerStateConnected: 
        // handle a new player connection.
        NSLog(@"Player connected!");

        if (!matchStarted && theMatch.expectedPlayerCount == 0) {
            NSLog(@"Ready to start match!");
            [self lookupPlayers];
        }

        break; 
    case GKPlayerStateDisconnected:
        // a player just disconnected. 
        NSLog(@"Player disconnected!");
        matchStarted = NO;
        [delegate matchEnded];
        break;
}                 

}

// The match was unable to connect with the player due to an error.
- (void)match:(GKMatch *)theMatch connectionWithPlayerFailed:(NSString *)playerID withError:(NSError *)error {

if (match != theMatch) return;

NSLog(@"Failed to connect to player with error: %@", error.localizedDescription);
matchStarted = NO;
[delegate matchEnded];
}

// The match was unable to be established with any players due to an error.
- (void)match:(GKMatch *)theMatch didFailWithError:(NSError *)error {

if (match != theMatch) return;

NSLog(@"Match failed with error: %@", error.localizedDescription);
matchStarted = NO;
[delegate matchEnded];
}
-(IBAction)findMatch{
   // if (![GameCenterManager isGameCenterAvailable]) return;

matchStarted = NO;
self.match = nil;

GKMatchRequest *request = [[[GKMatchRequest alloc] init] autorelease]; 
request.minPlayers = 2;     
request.maxPlayers = 2;

GKMatchmakerViewController *mmvc = 
[[[GKMatchmakerViewController alloc] initWithMatchRequest:request] autorelease];    
mmvc.matchmakerDelegate = self;

[self presentModalViewController:mmvc animated:YES];
}

#pragma mark - View lifecycle

- (void)viewDidLoad{

self.currentLeaderBoard = kLeaderboardID;

if ([GameCenterManager isGameCenterAvailable]) {

    self.gameCenterManager = [[[GameCenterManager alloc] init] autorelease];
    [self.gameCenterManager setDelegate:self];
    [self.gameCenterManager authenticateLocalUser];

    [GKMatchmaker sharedMatchmaker].inviteHandler = ^(GKInvite *acceptedInvite, NSArray *playersToInvite) {
        // Insert application-specific code here to clean up any games in progress.
        if (acceptedInvite)
        {
            GKMatchmakerViewController *mmvc = [[[GKMatchmakerViewController alloc] initWithInvite:acceptedInvite] autorelease];
            mmvc.matchmakerDelegate = self;
            [self presentModalViewController:mmvc animated:YES];

        }
        else if (playersToInvite)
        {
            GKMatchRequest *request = [[[GKMatchRequest alloc] init] autorelease];
            request.minPlayers = 2;
            request.maxPlayers = 2;
            request.playersToInvite = playersToInvite;

            GKMatchmakerViewController *mmvc = [[[GKMatchmakerViewController alloc] initWithMatchRequest:request] autorelease];
            mmvc.matchmakerDelegate = self;
            [self presentModalViewController:mmvc animated:YES];
        }
    };

}else {

    UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Game Center Disabled"message:@"For Game Center make sure you have an account and you have a proper device connection."delegate:self cancelButtonTitle:@"Ok"otherButtonTitles:nil];
    [alert show];

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T04:20:34.620

当您接受邀请时，NSLog：收到的邀请是否会打印在控制台中？

[delegate inviteAccepted] 方法应该处理玩家接受邀请时发生的事情。有时这会变得非常乏味，因为您不知道当前正在显示什么视图。你应该以某种方式找到它，推动观点。然后从该视图中，应用程序应该呈现 matchMaker viewController。我的邀请块如下所示：

```
 [GKMatchmaker sharedMatchmaker].inviteHandler = ^(GKInvite *acceptedInvite, NSArray *playersToInvite){

        NSLog(@"Invite");

        if([AppDelegate mainMenuController].presentedViewController!=nil) {
            [[AppDelegate mainMenuController] dismissViewControllerAnimated:NO completion:^{

            }];
        }

        self.pendingInvite = acceptedInvite;
        self.pendingPlayersToInvite = playersToInvite;

        [[AppDelegate mainMenuController] presentViewController:[AppDelegate mainMenuController].multiGameMenu animated:NO completion:^{

            [[AppDelegate mainMenuController].multiGameMenu duel:nil];
        }];

    }; 
```

其中 multiGameMenu 只是一个菜单，而 Duel 方法只是创建一个游戏实例并调用 findMatchWithMaxPlayers:int MinPlayers: int 方法。让我知道事情的后续！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T06:32:31.583

尝试使用：

```
- (void)matchmakerViewController:(GKMatchmakerViewController *) viewController 
    didReceiveAcceptFromHostedPlayer:(NSString *)playerID
{
    [viewController setHostedPlayer:playerID connected:YES];
} 
```

我希望它有帮助！

# python - Django Admin 动态字段值

> ID：10712378
> 
> 赞同：1
> 
> 时间：2012-05-23T01:34:45.463
> 
> 标签：python, ajax, django, django-forms, django-admin

这就是我想要做的。我有一个捐赠表格，一旦用户在表格中填写了他们的邮政编码，就会触发一个 ajax 调用来查找该邮政编码的可用取件路线/日期。在 admin 中，有一个名为“Missed”的字段。如果募捐不成功，呼叫中心会将遗漏字段设为“是”。

我的问题是，在该字段设置为遗漏后，如何显示该邮编的可用取货日期列表，以便重新安排捐赠时间？

我假设我必须为我的应用程序自定义管理员 change_form.html？有什么建议么？

### 更新

这是我到目前为止没有成功的尝试。我决定提出自己的观点和单独的表格来处理这个问题。请参阅下面的评论以查看我尝试过的内容。这是代码...

```
def reschedule_donor(request, id):
c ={}
donor = Donor.objects.get(donor_id=id)
zip = donor.zip

two_days_from_today = date.today() + relativedelta(days = +2)
results = PickupSchedule.objects.filter(zip=zip,date__gt = two_days_from_today)     

form = DonateForm(instance=donor)

form['pickup_date'].choices = results

c['results'] = results
c['donor'] = donor
c['form'] = form
return render_to_response('reschedule_donor.html',c, context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:23:53.290

是的，您必须覆盖`change_form.html`. 您可以创建自定义视图并使用 ajax 加载数据。或者您可以覆盖`change_view()`并将数据传递给`extra_context`.

# c++ - 对运算符<<的未定义引用

> ID：10712380
> 
> 赞同：11
> 
> 时间：2012-05-23T01:34:48.643
> 
> 标签：c++, operators, operator-overloading

我有一个带有私人朋友操作员<<

它的声明是：

```
std::ostream& operator<<(std::ostream& out, const Position& position); 
```

在cpp文件中它的定义是：

```
std::ostream& operator<<(std::ostream& out, const Position& position)
{
  out << position.getXPoint() << "," << position.getYPoint();
  return out;
} 
```

它正在编译然后链接到使用它的主函数，但是当我使用它时，我得到一个未定义的引用......

但是，当我将定义添加到主 cpp 文件的顶部并删除朋友声明时，它工作正常......

这是我在主要功能中使用它的方式

```
std::cout << node->getPosition() << std::endl; 
```

不多不少...

这是链接器错误

> /home/luke/Desktop/pathfinder/parse_world.cpp:34: 未定义对 `pathfinder::operator<<(std::ostream&, pathfinder::Position const&)' 的引用

这是类标题...

```
#ifndef PATHFINDER_H
#define PATHFINDER_H
#include <ostream>
#include <istream>
#include <list>
#include <vector>
#include <stdexcept>
#include <cstring>
namespace pathfinder
{
class Node;
typedef unsigned int GCost;
typedef std::vector<std::vector<Node*> > World;
typedef std::vector<Node*> WorldRow;
class Position
{
public:
    typedef unsigned int point_type;
private:
    point_type* xPoint_;
    point_type* yPoint_;
    friend std::ostream& operator<<(std::ostream& out, const Position& position);
public:
    Position(const point_type& xPoint = 0, const point_type& yPoint = 0);
    Position(const Position& position);
    Position(Position&& position);
    ~Position();

    Position& operator=(const Position& position);
    Position& operator=(Position&& position);

    point_type getXPoint() const;
    point_type getYPoint() const;

    void setXPoint(const point_type& xPoint);
    void setYPoint(const point_type& yPoint);
};
class Node
{
private:
    bool* isPassable_;
    bool* isStartingNode_;
    bool* isTargetNode_;
    Position* position_;
    GCost* additionalGCost_;
    Node* parent_;
public:
    Node(const bool& isPassable = true, const bool& isStartingNode = false, const bool& isTargetNode = false, const Position& position = Position(0,0), const GCost& additionalGCost = 0, Node* parent = nullptr);
    Node(const Node& node);
    Node(Node&& node);
    ~Node();

    Node& operator=(const Node& node);
    Node& operator=(Node&& node);

    bool isPassable() const;
    bool isStartingNode() const;
    bool isTargetNode() const;
    Position getPosition() const;
    GCost getAdditionalGCost() const;
    Node* getParent() const;

    void setAsPassable(const bool& isPassable);
    void setAsStartingNode(const bool& isStartingNode);
    void setAsTargetNode(const bool& isTargetNode);
    void setPosition(const Position& position);
    void setAdditionalGCost(const GCost& additionalGCost);
    void setParent(Node* parent);
};
class WorldHelper
{
public:
    static World fromStream(std::istream& input);
    static void syncPositions(World& world);
    static void uninitializeWorld(World& world);
    static Node* findStartingNode(const World& world);
    static Node* findTargetNode(const World& world);
};
class Pathfinder
{
public:
    virtual std::list<Node*> operator()(World& world) const = 0;
};
};
#endif //PATHFINDER_H 
```

现在删除朋友声明后，我收到如下错误消息：

> 无法将 'std::ostream {aka std::basic_ostream}' 左值绑定到 'std::basic_ostream&&'</p>

它与 std::cout 语句发生在同一行...

那么，有什么交易...

提前致谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-23T02:13:44.740

我的猜测是，从描述中你声明了两个`operator<<`，但只定义了一个。例如：

```
namespace A {
   struct B {
      friend std::ostream& operator<<( std::ostream&, B const & ); // [1]
   };
}
std::ostream& operator<<( std::ostream& o, A::B const & ) {        // [2]
   return o;
} 
```

第 [1] 行声明了一个`A::operator<<`可以通过 ADL 在 type 上找到的函数`B`，但 [2] 声明并定义了`::operator<<`。当编译器看到代码时：

```
A::B b;
std::cout << b; 
```

它使用 ADL 并找到`A::operator<<`（来自朋友声明）并使用它，但该函数未定义。如果您删除该`friend`声明，则在全局命名空间中有一个已`operator<<`声明和定义的实例，可以通过常规查找找到。

另请注意，如果您的程序中有 using 指令，这可能更难发现，因为 [2] 中的定义可能没有明确`A`命名参数的命名空间。这也说明您可以*定义*该类型的其余成员：

```
// cpp [assume that the definition of B contained a member f
using namespace A;
void B::f() {
} 
```

的定义`B::f`（在代码中）驻留在全局命名空间中，但由于 using 指令，`B`将在`A`命名空间中找到，类型说明符将等同于`A::B`使定义等同于`void ::A::B::f() {}`after resolve的定义`B`。免费功能**不会**发生这种情况。

我建议您避免使用指令，因为它们允许像这样的细微错误。另请注意，您实际上可以在命名空间中显式*定义*运算符（但您还需要在命名空间中*声明*它：

```
namespace A {
   struct B  { friend std::ostream& operator<<( std::ostream&, B const & ); };
   std::ostream& operator<<( std::ostream&, B const & );
}
std::ostream& A::operator<<( std::ostream& o, B const & ) {
   return o;
} 
```

这个技巧（通过完全限定在其自然命名空间之外定义自由函数）有时用于避免函数的定义隐式声明它，这很容易出现这种类型的错误。例如，如果您在正确的命名空间中定义了运算符，但签名略有不同：

```
namespace A {
   struct B  {
      friend std::ostream& operator<<( std::ostream&, B const & ); // [1]
   };
   std::ostream& operator<<( std::ostream&, B & ) {                // [3]
      return o;
   }
} 
```

[3] 中的定义也是一个声明，但它声明的函数与 [1] 中声明的函数不同，您最终可能会摸不着头脑，问为什么链接器没有找到 [1]。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-13T23:58:34.113

大卫对这个问题给出了很好的回答。在这里，我只是提供一个示例，以便于理解。

在我的头文件中：

```
namespace BamTools {
class SomeBamClass {
.....
public:
    friend std::ostream& operator<<(std::ostream& ous, const SomeBamClass& ba);
    .....
}
} 
```

在 cpp 文件中：

```
using namespace BamTools; // this work for Class member function but not friends
using namespace std;

........
std::ostream& operator<<(std::ostream &ous, const SomeBamClass &ba) {
  // actual implementation
  return ous;
} 
```

当您尝试从您自己的应用程序链接到此库时，上面将为您提供对 operator<<(.., const SomeBamClass&) 的未定义引用，因为它是命名空间之外的运算符的声明和实现。

```
undefined reference to `BamTools::operator<<(std::ostream&, BamTools::SomeBamClass const&)' 
```

唯一对我有用的是将命名空间封闭添加到实现文件中的朋友函数：

```
namespace BamTools {
std::ostream& operator<<(std::ostream &ous, const SomeBamClass &ba) {
...
   return ous;
}
} 
```

使用 ... BamTools::operator<<(..., const BamTools::SomeBamClass&) 将导致我的 g++ 5.4.0 出现编译器错误。

# xml - XSTREAM 中的步骤

> ID：10712382
> 
> 赞同：0
> 
> 时间：2012-05-23T01:34:57.007
> 
> 标签：xml, xstream

我想将 XML 文件读入 Java 对象。XStream 可以做到这一点吗？我的文件没有 XML 架构。谁能建议我任何替代方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T16:25:37.603

是的，简而言之，XStream 可以做到这一点，但不像 xml in, object out 那样简单。您必须构造与 xml 的节点/属性相对应的对象。

XStream 网站上的快速教程在[这里](http://xstream.codehaus.org/tutorial.html)。

# php - 对于这个建筑估算器项目，我应该考虑哪些设计模式？

> ID：10712383
> 
> 赞同：0
> 
> 时间：2012-05-23T01:35:00.797
> 
> 标签：php, codeigniter, design-patterns

我应该首先说我是一个爱好程序员。当我从行医中休息时，我会（主要是）练习 PHP，并随着时间的推移尝试建立我的知识，同时希望在此过程中为人们解决一些问题。

最近，我一直在为我家的家装业务申请。该项目建立在 codeigniter 和 mongodb 之上，虽然它有效，但我知道它并不漂亮。我花了一些时间阅读有关设计模式的内容，并且很难确定哪个适合该项目的“估算器”部分。

以下是它的工作原理：

用户输入特定于确定价格的方法的一系列测量值。有时，这些测量值特定于一种产品类型 - 例如，排水沟。其他时候，测量与正在完成的工作比产品更密切相关 - 例如，用乙烯基和铝覆盖外部拱腹。

这就是说，每种特定的估计方法都需要不同*类型*的测量。继续上面的两个例子......

要估计排水沟，我们必须知道类型（小、大、屏幕）和线性英尺。重要的是要知道每种类型都有自己的价格。

要估计拱腹，我们必须只知道线性英尺。

估计方程相当简单 - 数量 x 价格 = 估计 - 但数量可以是件数、英尺数或平方英尺数。

我想知道我是否让这变得比它需要的更复杂，但我想把我的技能提升到一个新的水平，学习设计好的、面向对象的代码。该项目的下一步是进行这些测量并制定工作所需的材料清单 - 由于可用的产品数量众多，这项工作要复杂得多。

我应该考虑哪些设计模式？到目前为止，我主要看的是`Abstract Factory`. 应该`Builder`在我的名单上吗？还有什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T01:51:59.257

你能不能只创建一个“Estimator”接口，让它需要一个名为 Estimate() 的方法，然后用一组类扩展该接口，每个类都完成不同的估计。它们都有一个构造函数，它接受输入参数（估计所需的所有信息），它们都会隐含估计函数，该函数将输出总成本。

现在我知道你理解了这个模式，因为你列出了与它非常相似的模式。我只是想向你展示我是如何编写代码的，这样你就可以看到它是如何工作的。有时即使这听起来是个坏主意，但事实证明它工作得非常好，你只是无法想象它。

就像是：

```
interface Estimator
{
    public function Estimate ();
    public function BuildInfo ();
}

class Estimate_gutter implements Estimator
{
    private $totalLength, $gutterType;
    function __construct ($totalLength, $gutterType)
    {
        $this->totalLength = $totalLength;
        $this->gutterType = $gutterType;
    }

    function Estimate ()
    {
        return $this->totalLength * .45; // 45 cents a foot, consider a binary math library here though
    }

    function BuildInfo ()
    {
        return "Gutter Type: {$this->gutterType}, Length: {$this->totalLength}"; //to keep different classes from having to output different values, thus breaking the idea of abstraction we are trying to achieve; we'll just output a string that will be printed to the job list.
    }
}
class Estimate_sidewall implements Estimator
{
    private $width, $height, $type;
    function __construct ($drywallType, $width, $height)
    {
        $this->width = $width;
        $this->height = $height;
        $this->type = $drywallType;
    }

    function Estimate ()
    {
        return $this->width * $this->height * 1.12; // 1.12 a square foot, again consider a binary math library
    }

    function BuildInfo ()
    {
        return "SideWall type '{$this->type}' {$this->width}ft x {$this->height}ft = ". ($this->width * $this->height) ."sqft.";
    }
}

$gutter = new Estimate_gutter(100, "Type to gutter"); //pass this to the view

$gutter->Estimate(); //this would be run in the view, or be assigned in the controller to a variable for the view.  This must exist, because it is implementing the Estimator class.  The reason for this is so that you don't need to know what class type it is in the view, you just need to call the same function, no matter what.

/*
    This would print out all the information needed to retrieve
    the needed product.  It is important this function always returns
    the *exact* same data type every time for every class, otherwise
    the abstraction will break. (because if you output an array for one,
    and a string for another, how do you know when to deal with an array,
    and when to deal with a string? You'd need to know what type of estimate
    you're making, and you're attempting to eliminate needing to know that
    using this design pattern).
*/
echo $gutter->BuildInfo (); 
```

虽然我很想看到这个问题的其他模式和解决方案，但它并不是独一无二的，但一个好的解决方案可能很难制定。

# c# - XSD 到数据集（这也是 xsd？）

> ID：10712389
> 
> 赞同：1
> 
> 时间：2012-05-23T01:35:33.993
> 
> 标签：c#, xml, crystal-reports, xsd, dataset

我有点困惑，我有一个 XSD，它说明了我已经生成和填充的 XML 的结构，现在我必须在 PDF 中显示它的信息。

我在考虑水晶报告，但如果它是最好的解决方案，我不会，但是，我已经读过我可以从我的 XSD 创建一个水晶报告，但是我必须实例化 XSD 来填充它，但是我有 XSD不是数据集，它是 XML 模式，所以我不知道该怎么做，我在这里很迷茫。

这是我得到的XSD方案（是政府的公开文件）： http: [//www.sat.gob.mx/sitio_internet/cfd/3/cfdv32.xsd](http://www.sat.gob.mx/sitio_internet/cfd/3/cfdv32.xsd)

这是我用它生成的示例 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<cfdi:Comprobante xmlns:cfdi="http://www.sat.gob.mx/cfd/3" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.sat.gob.mx/cfd/3 http://www.sat.gob.mx/sitio_internet/cfd/3/cfdv32.xsd" version="3.2" fecha="2012-05-22T17:47:38" sello="G3xkr9rKA8ix0ub8XJTNqb0TRR14Sxs4Uj7oDfPj8oCM4HzoMTF7pWcpfx5VCzp9rT+CW6IstoiYLaUNiBtDwCS8oHrYuVawPh+tn+GQpSNi+plafJjcOq8U8wl0nk1hKnqhJWenklCRgxNOFvVeYIMLe0MycUU/2Q7g0mgJOhw=" formaDePago="Pago en una sola exhibicion" noCertificado="30001000000100000800" certificado="MIIE/TCCA+WgAwIBAgIUMzAwMDEwMDAwMDAxMDAwMDA4MDAwDQYJKoZIhvcNAQEFBQAwggFvMRgwFgYDVQQDDA9BLkMuIGRlIHBydWViYXMxLzAtBgNVBAoMJlNlcnZpY2lvIGRlIEFkbWluaXN0cmFjacOzbiBUcmlidXRhcmlhMTgwNgYDVQQLDC9BZG1pbmlzdHJhY2nDs24gZGUgU2VndXJpZGFkIGRlIGxhIEluZm9ybWFjacOzbjEpMCcGCSqGSIb3DQEJARYaYXNpc25ldEBwcnVlYmFzLnNhdC5nb2IubXgxJjAkBgNVBAkMHUF2LiBIaWRhbGdvIDc3LCBDb2wuIEd1ZXJyZXJvMQ4wDAYDVQQRDAUwNjMwMDELMAkGA1UEBhMCTVgxGTAXBgNVBAgMEERpc3RyaXRvIEZlZGVyYWwxEjAQBgNVBAcMCUNveW9hY8OhbjEVMBMGA1UELRMMU0FUOTcwNzAxTk4zMTIwMAYJKoZIhvcNAQkCDCNSZXNwb25zYWJsZTogSMOpY3RvciBPcm5lbGFzIEFyY2lnYTAeFw0xMDA3MzAxNjU4NDBaFw0xMjA3MjkxNjU4NDBaMIGWMRIwEAYDVQQDDAlNYXRyaXogU0ExEjAQBgNVBCkMCU1hdHJpeiBTQTESMBAGA1UECgwJTWF0cml6IFNBMSUwIwYDVQQtExxBQUEwMTAxMDFBQUEgLyBBQUFBMDEwMTAxQUFBMR4wHAYDVQQFExUgLyBBQUFBMDEwMTAxSERGUlhYMDExETAPBgNVBAsMCFVuaWRhZCAxMIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQDD0ltQNthUNUfzq0t1GpIyapjzOn1W5fGM5G/pQyMluCzP9YlVAgBjGgzwYp9Z0J9gadg3y2ZrYDwvv8b72goyRnhnv3bkjVRKlus6LDc00K7Jl23UYzNGlXn5+i0HxxuWonc2GYKFGsN4rFWKVy3Fnpv8Z2D7dNqsVyT5HapEqwIDAQABo4HqMIHnMAwGA1UdEwEB/wQCMAAwCwYDVR0PBAQDAgbAMB0GA1UdDgQWBBSYodSwRczzj5H7mcO3+mAyXz+y0DAuBgNVHR8EJzAlMCOgIaAfhh1odHRwOi8vcGtpLnNhdC5nb2IubXgvc2F0LmNybDAzBggrBgEFBQcBAQQnMCUwIwYIKwYBBQUHMAGGF2h0dHA6Ly9vY3NwLnNhdC5nb2IubXgvMB8GA1UdIwQYMBaAFOtZfQQimlONnnEaoFiWKfU54KDFMBAGA1UdIAQJMAcwBQYDKgMEMBMGA1UdJQQMMAoGCCsGAQUFBwMCMA0GCSqGSIb3DQEBBQUAA4IBAQArHQEorApwqumSn5EqDOAjbezi8fLco1cYES/PD+LQRM1Vb1g7VLE3hR4S5NNBv0bMwwWAr0WfL9lRRj0PMKLorO8y4TJjRU8MiYXfzSuKYL5Z16kW8zlVHw7CtmjhfjoIMwjQo3prifWxFv7VpfIBstKKShU0qB6KzUUNwg2Ola4t4gg2JJcBmyIAIInHSGoeinR2V1tQ10aRqJdXkGin4WZ75yMbQH4L0NfotqY6bpF2CqIY3aogQyJGhUJji4gYnS2DvHcyoICwgawshjSaX8Y0Xlwnuh6EusqhqlhTgwPNAPrKIXCmOWtqjlDhho/lhkHJMzuTn8AoVapbBUnj" subTotal="105.5678" total="1000" tipoDeComprobante="ingreso" metodoDePago="Efectivo" LugarExpedicion="Madereria Central">
  <cfdi:Emisor rfc="PEPJ8001019Q8" nombre="Mader">
    <cfdi:DomicilioFiscal calle="Calle1" noExterior="12" colonia="Industrial" localidad="Mexico" referencia="aqui" municipio="df" estado="df" pais="mexico" codigoPostal="07300" />
    <cfdi:RegimenFiscal Regimen="Persona Moral" />
  </cfdi:Emisor>
  <cfdi:Receptor rfc="DUK" nombre="Elevadores">
    <cfdi:Domicilio calle="8" noExterior="8" noInterior="0" colonia="9" localidad="9" referencia="9" municipio="9" estado="9" pais="9" codigoPostal="9" />
  </cfdi:Receptor>
  <cfdi:Conceptos>
    <cfdi:Concepto cantidad="1" unidad="metros" noIdentificacion="A1121212" descripcion="Ayacahuitle Primera" valorUnitario="500" importe="500" />
    <cfdi:Concepto cantidad="2" unidad="metros" noIdentificacion="A21128142" descripcion="Ayacahuitle Sec" valorUnitario="600" importe="1200" />
    <cfdi:Concepto cantidad="3" unidad="metros" noIdentificacion="A31281" descripcion="Ayacahuitle Ter" valorUnitario="700" importe="2100" />
  </cfdi:Conceptos>
  <cfdi:Impuestos>
    <cfdi:Retenciones>
      <cfdi:Retencion impuesto="IVA" importe="100" />
    </cfdi:Retenciones>
  </cfdi:Impuestos>
  <cfdi:Complemento>
    <tfd:TimbreFiscalDigital xmlns:tfd="http://www.sat.gob.mx/TimbreFiscalDigital" xsi:schemaLocation="http://www.sat.gob.mx/TimbreFiscalDigital http://www.sat.gob.mx/sitio_internet/TimbreFiscalDigital/TimbreFiscalDigital.xsd" selloCFD="G3xkr9rKA8ix0ub8XJTNqb0TRR14Sxs4Uj7oDfPj8oCM4HzoMTF7pWcpfx5VCzp9rT+CW6IstoiYLaUNiBtDwCS8oHrYuVawPh+tn+GQpSNi+plafJjcOq8U8wl0nk1hKnqhJWenklCRgxNOFvVeYIMLe0MycUU/2Q7g0mgJOhw=" FechaTimbrado="2012-05-22T17:47:42" UUID="221BA53A-827A-4474-B9F9-3542ECDEB979" noCertificadoSAT="30001000000100000801" version="1.0" selloSAT="ZnKdULidoo95wXOmk1cPM/ZB5Fh8PvsbkRD+zgTA21yIBqjFopt4UGL6sA0DqeWJdzI1Q92lxm6FwrlK+GxFHM7fvKeStE5elEsCW4GyVQG7gvXXxTKiM0xxPzTkxh6OQLeqDMgzodM0my/M8KJx/JiT8JeEVu4wZF1cyc1w13k=" />
  </cfdi:Complemento>
</cfdi:Comprobante> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T04:15:35.697

考虑到您使用的标签，我将尝试回答您的问题……以及一些猜测。

既然您提到了 C# 和 Crystal Reports……Vis​​ual Studio 附带了免费版的 Crystal Reports。它可以满足您的需求，而且是免费的：有一个图形设计器来构建输出布局；如果您的用户需要在导出或打印之前查看结果，您可以嵌入一个免费的查看器，如果您需要以编程方式生成它，还有一个 API。

您对 XSD 和 Dataset 的困惑可能来自于不了解 Crystal Reports 如何获取其数据。在搜索“水晶报告推送方法”时尝试[此链接或任何其他链接。](http://www.beansoftware.com/ASP.NET-Tutorials/Using-Crystal-Reports.aspx)

简而言之，使用 push 方法，在 Visual Studio 中的设计时，您使用 Dataset 作为 Crystal Report 的数据源，以便您可以拖放到源和格式化报表内容。在运行时，您使用报表数据填充数据集，然后将其设置为报表的数据源。由于您可以从 XML 填充数据集，因此您现在有了一个解决方案。

要将您发布的 XSD 转换为 Visual Studio 将其识别为“数据集”XSD 的 XSD，请尝试此操作并检查生成的输出以了解两者之间的区别：

```
XmlReaderSettings settings = new XmlReaderSettings();
settings.ProhibitDtd = false;
using (XmlReader reader = XmlReader.Create(@"D:\temp 1\sitio_internet\cfd\3\cfdv32.xsd", settings))
{
    DataSet dataSet = new DataSet();            
    dataSet.ReadXmlSchema(reader);  
    dataSet.WriteXmlSchema(@"D:\temp 1\sitio_internet\cfd\3\cfdv32-DS.xsd");
} 
```

作为学习工具，将两个 XSD 添加到 Visual Studio 项目中；对于每个 XSD，右键单击并调用***View Designer***命令。您将看到一个 XSD 编辑器；另一方面，数据集图......

这应该处理 XSD 到数据集的事情。

@paquetp 没有告诉你的是，即使你（真的）很幸运能够在 .NET 上获得对 XSL-FO 的廉价支持（因为你提到了 C#），你仍然需要一些东西轻松编辑您的样式表；大多数人为此更喜欢所见即所得的编辑器，这是另一件很难找到便宜的东西。

因此，我认为鉴于您发布的 XSD，它允许从中创建数据集，水晶报表的方法可以使用一些不错的、用户友好的功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T02:25:35.390

您正在寻找的技术是[XSL-FO](http://www.w3schools.com/xslfo/)

# python - 将 Sublime Text 2 包定向到正确的 python 安装

> ID：10712390
> 
> 赞同：13
> 
> 时间：2012-05-23T01:35:36.037
> 
> 标签：python, macos, sublimetext2, environment-variables, sublimetext

我只想将 Sublime Text 2 包 ( **SublimeREPL** ) 引导到*正确*的python 安装——目前，它选择了错误的。

Mac 用户对这里的故事很熟悉。Mac OS 包含一个 python 安装，它用于需要 python 的各种操作系统内容。像许多其他人一样，我不喜欢使用这个系统 python（它位于 /System/Library/...），因为它通常已经过时，当然更新它不是一个好主意——它是一个工作 python Mac OS 使用的安装，以及更新导致依赖于该安装的操作系统任务中断的风险。

但这是 SublimeREPL 包选择的版本：

```
Python 2.7.1 (r271:86832, Jun 25 2011, 05:09:01) 
[GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> 
```

我用于开发的版本（安装在 /Library/Frameworks/ 并符号链接到 /usr/local/bin）是：

```
@ > python
Python 2.7.3 (v2.7.3:70274d53c1dd, Apr  9 2012, 20:52:43) 
[GCC 4.2.1 (Apple Inc. build 5666) (dot 3)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> 
```

Sublime 2 Text 在其他地方选择了正确的版本，*除非*使用 SublimeREPL 包，因此该包中的一个配置文件中必须有一个设置，可以让我将 SublimeREPL 引导到正确的 python。

但我找不到它。

似乎我已经用尽了所有可能的选项，通过我的 /Sublime Text 2/Packages/ 目录查看必须位于以下任一位置：

```
SublimeREPL/

    SublimeREPL (OSX).sublime-settings
    SublimeREPL.sublime-settings 
```

*或者*

```
User/

    SublimeREPL.sublime-settings 
```

事实上，我在上面的*三个*JSON 文件中分别添加了以下内容，但没有任何效果：

```
{
    "default_extend_env": {"PATH": "/Library/Frameworks/Python.framework/Versions/2.7/bin:/usr/local/bin/python2.7:{PATH}"}
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-23T02:19:37.547

如果你想使用`repl_open`你可以编辑`cmd`配置中的参数。我正在使用 Ubuntu，它位于：

`/home/stav/.config/sublime-text-2/Packages/SublimeREPL/config/Python/Main.sublime-menu`

```
{"command": "repl_open",
"caption": "Python",
"id": "repl_python",
"mnemonic": "p",
"args": {
  "type": "subprocess",
  "encoding": "utf8",
  "cmd": ["/usr/local/bin/python", "-i", "-u"],
  "cwd": "$file_path",
  "syntax": "Packages/Python/Python.tmLanguage",
  "external_id": "python"
  }
}, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T12:49:33.627

@Steven Almeroth 解决方案对我不起作用。

而是更改了以下目录中的参数：`packages/Python/Python.sublime-build`

那里提供了以下代码。只需将 cmd 更改为您的 brew 所在的目录即可。

```
{
"cmd": ["/Library/Frameworks/Python.framework/Versions/2.7/bin/python", "-u", "$file"],
"file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
"selector": "source.python"
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-14T23:05:34.623

根据我的经验，修复专门为 Sublime Text 2 进程修补环境变量的版本更容易

我发现的唯一直接而愚蠢的解决方案 - 破解 Sublime Text 2 的环境变量。这可以通过在文件夹中创建具有任何名称的 .py 文件来完成：

```
~/Library/Application Support/Sublime Text 2/Packages/User/ 
```

只需在此处添加您需要的路径，所有插件都将使用这些设置。在 Rob Dodson 的博文中查看更多信息：`http://robdodson.me/blog/2012/05/14/hacking-the-path-variable-in-sublime-text/`

示例.py：

```
import os

LOCAL = '/usr/local/bin:/usr/local/sbin:'

# Sublime's default path is
# /usr/bin:/bin:/usr/sbin:/sbin
os.environ['PATH'] += ':'
os.environ['PATH'] += LOCAL

print 'PATH = ' + os.environ['PATH'] 
```

# android - 在 Android 中找不到文件 context.getDir("data", ...)

> ID：10712398
> 
> 赞同：0
> 
> 时间：2012-05-23T01:37:16.537
> 
> 标签：android, file, directory

我有一个数据库位于

`ctx.getApplicationContext().getDir("data", 0) + "/" + "db.db4o";`

如何使用文件管理器或 USB 浏览此文件？我好像找不到:<

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T01:44:43.897

使用文件管理器或 USB 浏览，这是什么意思？只有在根设备或模拟器上，您才能通过文件管理器访问数据目录。

您的应用程序特定文件不直接存储在数据目录中，而是

数据/数据/your_package_name

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T02:11:04.383

您可以在您的 android 项目中创建一个“资产”文件夹并将其放在那里。在此之前，您可以尝试以下操作：

```
InputStream is = getAssets().open("db.db4o"); 
```

如有必要，转换“是”。

问候

# actionscript-3 - 更改 Spark DataGrid 单元格上的选定文本颜色

> ID：10712402
> 
> 赞同：-1
> 
> 时间：2012-05-23T01:38:02.137
> 
> 标签：actionscript-3, apache-flex, flash-builder, mxml

有谁知道在 Spark DataGrid 中的选定文本上应用样式的方法？

我认为最好的方法是使用带有 textarea 的 itemrenderer，但之后，我不知道该怎么做。

如果选择了单元格，我的目标不是更改颜色标签。事实上，在我的梦想中，项目是可编辑的，您可以只选择单元格内的一些单词并将特定样式应用于选定的文本部分（通过单击一个按钮，一个用于粗体，一个用于斜体......）。比，文本可以像 html 文本一样存储在数据库中。

我想像 RichTextEditor 一样使用单元格 itemrenderer，但没有 ControlBar。就我而言，我希望在 datadgrid 之外只有一个控制栏。

我会很高兴，如果你能帮助我。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T02:44:00.530

Spark 的最佳方法通常是皮肤。

通过属性进行基本控制，例如更改所选颜色：

![细胞](../Images/b8054ad54247200c0d6e10dd0679a273.png)

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009"
               xmlns:s="library://ns.adobe.com/flex/spark">

    <s:DataGrid selectionColor="0xff0000">
        <s:dataProvider>
            <s:ArrayList>
                <fx:String>a</fx:String>
                <fx:String>b</fx:String>
                <fx:String>c</fx:String>
            </s:ArrayList>
        </s:dataProvider>
    </s:DataGrid>

</s:Application> 
```

要为 GridColumn 实现项目渲染器，请使用`States`定义选定状态的显示方式

![细胞渲染器](../Images/02d2dbe4c22621fd4f87cf45ce30c28d.png)

**GridColumnItemRenderer**

```
<?xml version="1.0" encoding="utf-8"?>
<s:GridItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009"
                    xmlns:s="library://ns.adobe.com/flex/spark"
                    xmlns:mx="library://ns.adobe.com/flex/mx"
                    clipAndEnableScrolling="true">

    <s:states>
        <s:State name="normal" />
        <s:State name="selected" />
    </s:states>

    <fx:Script>
        <![CDATA[
            override public function prepare(hasBeenRecycled:Boolean):void
            {
                lblData.text = data[column.dataField]
            }
        ]]>
    </fx:Script>

    <s:Label id="lblData"
             color.selected="0x00ff00"
             top="9"
             left="7" />

</s:GridItemRenderer> 
```

**数据网格**

上面的项目渲染器是从 Spark GridColumn 指定的，如下所示：

```
<s:DataGrid>
    <s:columns>
        <s:ArrayList>
            <s:GridColumn itemRenderer="GridColumnItemRenderer" />
        </s:ArrayList>
    </s:columns>
</s:DataGrid> 
```

# vb.net - 保存和加载数据的简单方法 Visual Basic

> ID：10712407
> 
> 赞同：11
> 
> 时间：2012-05-23T01:38:21.467
> 
> 标签：vb.net, save, load

我想知道通过 vb 中的不同形式保存和加载数据的最简单方法是什么。我只想保存用户保存的 3 个 textbox.text 并能够将其加载到不同的表单上。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-23T02:02:58.740

如果是用户设置，您可以使用内置的[My.Settings](http://msdn.microsoft.com/en-US/library/saa62613.aspx)对象来保存和加载。

从上面的链接：

> My.Settings 对象提供对应用程序设置的访问，并允许您动态存储和检索应用程序的属性设置和其他信息。

您可以在项目属性的设置部分中创建设置：

![](../Images/d1b6b4e90cf0bb935553c350bdcedb75.png)

您可以像这样访问它。

```
dim MyTemp as String = My.Settings.MySetting 
```

并像这样保存

```
My.Settings.MySetting = "StringValue"
My.Settings.Save() 
```

这将保存在您的配置文件中，如下所示：

```
<userSettings>
    <WindowsApplication11.My.MySettings>
        <setting name="MySetting" serializeAs="String">
            <value>TempValue</value>
        </setting>
    </WindowsApplication11.My.MySettings>
</userSettings> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T01:52:12.880

最简单的选择是将它们保存到一个简单的分隔文本文件中。例如，这会将值保存在管道分隔的文件中：

```
File.WriteAllText("C:\Data.txt", String.Join("|", new String() {TextBox1.Text, TextBox2.Text, TextBox3.Text})) 
```

这将读取它：

```
Dim values() as String = File.ReadAllText("C:\Data.txt").Split("|"c)
TextBox1.Text = values(0)
TextBox2.Text = values(1)
TextBox3.Text = values(2) 
```

但是，保存到根目录中的文件并不聪明。最安全的做法是将其存储在独立存储中的文件中。此外，将其存储在 XML 中会更好。这可以通过序列化轻松完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-01T17:59:15.920

[来自 Microsoft 的解决方案的完整描述。](https://docs.microsoft.com/en-us/dotnet/visual-basic/developing-apps/programming/app-settings/how-to-persist-user-settings)

至少在过去的 25 年里，微软的一件好事就是出色的文档*。*即使与 Stackoverflow（软件圣地）相比，MSDN 的质量也相当

# scala - 集群 Akka/Scala 演员

> ID：10712414
> 
> 赞同：2
> 
> 时间：2012-05-23T01:40:17.750
> 
> 标签：scala, cluster-computing, actor, akka

有人可以向我指出正确的内容，以了解如何在多台机器上分发 Akka scala 演员。我知道在 Akka 的最新版本中有位置透明性。但是，如何部署它们并调用它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T07:29:24.503

这一切都记录在这里：[http ://doc.akka.io/docs/akka/2.0.1/](http://doc.akka.io/docs/akka/2.0.1/)

当您根据文档配置系统时，您只需在每台服务器上启动应用程序，它就应该可以工作。

```
akka {
  remote {
    transport = "akka.remote.netty.NettyRemoteTransport"
    netty {
      hostname = "127.0.0.1"
      port = 2552
    }
  }
  actor {
    provider = "akka.remote.RemoteActorRefProvider"
    deployment {
      /sampleActor {
        remote = "akka://sampleActorSystem@127.0.0.1:2553"
      }
    }
  }
} 
```

这些是启用远程处理的基本设置（取自文档）。这告诉 Akka 通过主机 x 端口 y 上的 NettyRemoteTransport 使用远程处理，并且 /sampleActor 在同一台机器上的远程系统上运行，但端口不同。

# jquery - 用于复杂计算的jquery计算插件

> ID：10712420
> 
> 赞同：1
> 
> 时间：2012-05-23T01:41:55.957
> 
> 标签：jquery, forms, jquery-calculation

在过去一周左右的时间里，我第一次尝试从头开始编写应用程序，我从你们中的许多人那里得到了很多帮助。衷心感谢您的代码猴子！

我需要在我的梦幻足球计分应用程序中添加积分计算功能。下面是结果页面，其中包含计算功能的下拉菜单（但没有实际的计算功能）：

![在此处输入图像描述](../Images/f2ac24c526ab065385224f5a0cd73fa5.png)

用户将能够选择每个统计数据（或统计数据的增量）的价值，然后单击“获取分数”按钮，总分将显示在 TFP 列（棕褐色列）中。

因此，使用屏幕截图中显示的设置，公式将是：

```
1(Pass_Yds / 20) + (4 * Pass_TD) + 1(Rush_Yds / 10) + (6 * Rush_TD) + (0 * Int) = TFP 
```

我查看了 jQuery 计算器插件，我认为这是我需要使用的插件，但我不知道如何进行上面显示的复杂（至少对我而言）计算类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T01:42:45.360

我有同样的问题，我的客户要求我构建一些复杂的计算表格，所以我决定编写自己的插件，你可以在这里找到[https://github.com/ikhsan017/calx](https://github.com/ikhsan017/calx)

只需要将计算公式写入data-formula属性，并为每个变量赋值$char

```
1(Pass_Yds / 20) + (4 * Pass_TD) + 1(Rush_Yds / 10) + (6 * Rush_TD) + (0 * Int) 
```

假设您拥有所有具有关联 id 的输入元素

```
<form id="test">
    Pass Yds : <input id="Pass_Yds" /><br />
    Pass TD : <input id="Pass_TD" /><br />
    Rush Yds : <input id="Rush_Yds" /><br />
    Rush  TD : <input id="Rush_TD" /><br />
    Int : <input id="Int" /><br />
    <!--- skip -->
    Result : <input id="TFP" data-formula="1*($Pass_Yds / 20) + (4 * $Pass_TD) + 1*($Rush_Yds / 10) + (6 * $Rush_TD) + (0 * $Int)" />
</form> 
```

希望这个插件有用:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T02:53:57.543

取决于具体的html。我不确定您如何使用点/码的东西，但以下内容可以帮助您入门：

```
$('#btnUpdate').click(function() {  // get this all after user clicks button

var ptspassyrds = parseInt($('#ptspassyrds').val());
var ptspassyrdsamt = parseInt($('#ptspassydsamt').val());

$('#stats tr').each(function() {
  var passyds = parseInt($('td:eq(2)',this).text());
  var paddtds = parseInt($('td:eq(3)',this).text());
  var interceptions = parseInt($('td:eq(4)',this).text());
  // etc
  var tfp = (ptspassyrds / ptspassyrdsamt) + (4*passtds); //etc depending on exactly what you need to do
  $('td:eq(8)').text(tfp);
});

}); 
```

# c++ - putc 实现为 Macro ic C++？

> ID：10712423
> 
> 赞同：1
> 
> 时间：2012-05-23T01:42:18.767
> 
> 标签：c++, macros

我知道[C 中 putc() 的宏实现](https://stackoverflow.com/questions/9713944/macro-implementation-of-putc-in-c)，但在 C++ 中是否相同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T01:50:10.213

这将取决于您对`cstdio`. 在大多数情况下，这实际上只是一个包装器，在命名空间`stdio.h`内声明包装器，并且和编译器共享相同的函数标准库。例如，VS2010 使用for ，其中既可以作为宏*也*可以作为函数实现，具体取决于环境和其他编译时定义。`std``C``C++``C``stdio.h``C++``putc`

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T02:32:21.463

哪个版本的 C++？C++83（1983）？C++98（1998）？C++11（2011）？

C++98 和 C++11 规范依赖于 C 库函数的 ISO C 规范，并且不对它们施加额外的实现约束，除了一些琐碎的约束，比如将 stdio.h 重命名为 cstdio.h 并允许在没有点-h 后缀。

[请参阅：C++98 规范](http://www-d0.fnal.gov/~dladams/cxx_standard.pdf)

[请参阅：C++11 规范](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2012/n3337.pdf)

如果您对特定的编译器感兴趣，请查看 cstdio.h。

但是，如果我们深入研究一下 ISO C 标准：“ISO/IEC 9899:1990”（C89/C90），我们发现它无法在网络上免费查看（甚至最终草案都没有）标准），所以转到 C99（不是 ISO C），你会发现......

...C99（不是“ISO C”）说 putc() 可以实现为宏，

[参见：C99 规范](http://www.open-std.org/JTC1/SC22/wg14/www/docs/n1124.pdf)

因此，如果您真的在使用 Obj-C++（使用 C99）进行开发，那么 C99 是要考虑的相关规范，*而不是*ISO C（C90）。此外，由于 C99 让编译器编写者决定是否将 putc() 设为宏，因此您应该将其视为一种开放的可能性，并决定您是否真的关心正在过时的 C90 (ISO C) 规范（现在甚至 C11 (2011) 都出局了。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T01:45:14.270

是的。`<stdio.h>`在我知道的所有实现中，C 和 C++ 都使用了相同的方案。*

# ios - xcode 从服务器 api 获取链接 json 格式

> ID：10712428
> 
> 赞同：0
> 
> 时间：2012-05-23T01:43:01.480
> 
> 标签：ios, xcode, json

我尝试将数据分离到：</p>

```
NSLog(@"shelf_id=%@", shelf_id);
NSLog(@"http_url=%@", http_url);
NSLog(@"shelf_date=%@", shelf_date); 
```

我得到服务器的 start_date 和 end_date，然后服务器给我 json 格式

这是我的代码：

```
+ (NSString* ) loadCoverPage {
    NSString *urlStr = [NSString stringWithFormat:@"http://apps.play.com/iphone/porfile/get_pic_list.jsp?start_date=%@& end_date=%@", [CalTools getValueforKey:@"SelectYMD" DefValue:@""], [CalTools getValueforKey:@"SelectYMD" DefValue:@""]];

    NSLog(@"loadpicbg url=%@", urlStr);
    HttpTools *httpTools = [[HttpTools alloc] init];
    NSString *returnstr = [httpTools simpleGet:urlStr];
    NSLog(@"returnstr = %@", returnstr);        
} 
```

这是我来自服务器 api 的链接 json 格式：

```
[{"size":1},{"shelf_id":"1","http_url":"http://down.play.com/shelf/pic/jpg/640x960/64.jpg","shelf_date":"20120601"}]; 
```

# jquery - 如何在 OnComplete ajax 中访问 JSON 响应键/值

> ID：10712429
> 
> 赞同：1
> 
> 时间：2012-05-23T01:43:08.190
> 
> 标签：jquery, ajax, json, asp.net-mvc-3

我有一个返回这个的动作：

```
return Json(new { success = true, aaa = "bbb"  }, "text/html"); 
```

如何`aaa`在我的 onComplete 函数中访问？

```
 onComplete: function (file, response)
    {
        alert(response['aaa']); //undefined
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T01:53:48.260

我不熟悉`onComplete`jQuery。您使用的是哪种 Ajax 方法？您可以尝试`console.dir(reponse)`代替您的警报，以查看`response`参数中的确切内容。

该[`$.ajax()`方法](http://api.jquery.com/jQuery.ajax/)允许您提供一个`complete`处理程序（没有“on”），或者实际处理我将使用`success`处理程序的响应：

```
$.ajax("yourURLhere", {
       success : function(data, textStatus, jqXHR) {
           alert(data['aaa']);
       },
       complete : function(jqXHR, textStatus) {
           // do something - note that the parameters don't include "data"
           // like the success callback, and "complete" is called after
           // the "success" or "error" callback
       }
}); 
```

# excel - vba - 从不同的用户发送电子邮件

> ID：10712432
> 
> 赞同：0
> 
> 时间：2012-05-23T01:43:40.840
> 
> 标签：excel, vba, outlook

我的客户想将 excel/vba 分发给他的客户，vba 会自动发送电子邮件。

也许发件人应该是其他帐户，而不是使用 vba 的人的 Outlook 帐户，因为电子邮件中可能包含一些私人内容。真的有可能吗？

另一件事是自动执行此类任务时臭名昭著的弹出警告。我听说 Application.SendKeys 在计算机锁定时并不总是有效。

CDO 是如何完成这项任务的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T03:53:15.990

在您最初的问题上，您可以使用`MailItem.SentOnBehalfOfName`Outlook

在安全警告上，Outlook 的标准两种解决方案是：
1) 使用[Clickyes](http://www.contextmagic.com/express-clickyes/)
2) 安装[Outlook Redemption](http://dimastr.com/redemption/home.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T03:11:52.110

您不必使用 Outlook 发送电子邮件。如您所问，CDO 无需使用 Outlook 即可工作。

这里有一些代码可以帮助您入门。

```
Public Sub SendEmail(Subject As String, Body As String, ToPerson as String)

Dim iCfg As Object
Dim iMsg As Object

Set iCfg = CreateObject("CDO.Configuration")
Set iMsg = CreateObject("CDO.Message")

With iCfg.Fields
   .Item("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2
   .Item("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 465
   .Item("http://schemas.microsoft.com/cdo/configuration/smtpserver") = "smtp.gmail.com"
   .Item("http://schemas.microsoft.com/cdo/configuration/smtpauthenticate") = 1
   .Item("http://schemas.microsoft.com/cdo/configuration/sendusername") = "email-account"
   .Item("http://schemas.microsoft.com/cdo/configuration/sendpassword") = "password"
   .Item("http://schemas.microsoft.com/cdo/configuration/sendemailaddress") = "account@domain.com"
   .Item("http://schemas.microsoft.com/cdo/configuration/smtpusessl") = True
   .Update
End With

With iMsg
   .Configuration = iCfg
   .Subject = Subject
   .TextBody = Body
   .To = ToPerson
   .Send
End With

Set iMsg = Nothing
Set iCfg = Nothing

End Sub 
```

# jquery - 用于触摸屏设备的最佳 jQuery Swipe 滑动

> ID：10712436
> 
> 赞同：0
> 
> 时间：2012-05-23T01:44:22.277
> 
> 标签：jquery, ios, ipad, tablet, swipe

我一直在网上和这个板上寻找一个非常好的 jQuery 版本的 Swipe to Horizo​​ntal scroll 就像苹果在他们的网站上一样，[http://www.apple.com/ipad/ios](http://www.apple.com/ipad/ios)

如果您在 iPad 上查看该网站（我认为其他触摸设备也可以正常工作），他们的滑动库效果很好（在苹果网站上世界上最大的移动应用程序集合部分）

到目前为止，我所看到的所有地方似乎都不支持具有如此流畅性的画廊，任何人都可以建议一个 jQuery 插件或代码吗？自从他们将网站的那部分离线后，我一直很难找到一个 jQuery 插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T01:49:25.297

我用过的最好的一个： [http ://www.photoswipe.com/](http://www.photoswipe.com/)

编辑：你可以在这个网站上测试它：http: [//islastudio.com/mobile/photos](http://islastudio.com/mobile/photos)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-12T10:04:24.140

[http://www.woothemes.com/flexslider/](http://www.woothemes.com/flexslider/)

Flexslider 是一个很棒的、完全响应的 jQuery 滑块工具包。特点包括：

*   硬件加速触摸滑动支持
*   简单的语义标记
*   支持所有主流浏览器
*   水平/垂直滑动和淡入淡出动画
*   多滑块支持、回调 API 等
*   自定义导航选项
*   兼容最新版本的jQuery

有了它，您可以重新创建 Apple 的 iPad 页面等等。而且设置起来相当简单。

# css - 960.gs 网格，网格溢出

> ID：10712437
> 
> 赞同：0
> 
> 时间：2012-05-23T01:44:39.063
> 
> 标签：css, 960.gs

有人可以看看这个并帮助我理解我需要做什么才能让标题与网格对齐，如图所示。

它变成了 div 密集型，因为我尝试了很多不同的方法来让标签正确放置。我知道我可能不需要这么多的 div，但我现在看不到树木的木材......

[http://www.virtualharrogate.co.uk/tabs](http://www.virtualharrogate.co.uk/tabs)

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T10:17:16.233

使用 a`container_16`或`container_12`您的最大宽度为 960 像素。您的网格是 6，它们都设置为`grid_2`. 那是 6x140px = 1000px，比你的全局包装器还要多。

您必须选择具有更少`grid_2`或相同的数字，但为`grid_1`。

# android - Android - 当当前应用程序在前台时，防止其他应用程序读取 NFC

> ID：10712441
> 
> 赞同：0
> 
> 时间：2012-05-23T01:44:44.223
> 
> 标签：android, nfc

我创建了一个 NFC 应用程序。我对其进行了设计，因此只有它的一项活动可以处理 NFC 标签。当另一个活动处于活动状态（同一个应用程序）并扫描标签时，另一个应用程序会窃取焦点并将我的应用程序发送到后台。当我的应用在前台运行时，如何防止所有其他 NFC 应用窃取焦点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T02:42:47.020

你真的不能。您唯一的选择是让您的所有活动都使用[前台调度](http://developer.android.com/guide/topics/nfc/advanced-nfc.html#foreground-dispatch)，以确保您的应用程序处理可见的标签。您可能可以使用基本活动来共享代码。

# python - Python MySQL 数据字符串处理

> ID：10712442
> 
> 赞同：-1
> 
> 时间：2012-05-23T01:44:56.673
> 
> 标签：python, mysql

这涉及从数据库访问数据，并在 python 中处理数据。数据库名称为inb104，包含两个表car_details和cars_for_sale

到目前为止，这是我的代码

```
def top_N_models(carbrand, num_of_highest):
    connection = MySQLdb.connect(host='localhost', user='root', \
                                     passwd='root', db='inb104')
    cursor = connection.cursor()
    sql = str("SELECT model, COUNT(model) AS Count FROM \
              cars_for_sale WHERE make='"+carbrand+"' GROUP BY \
              model ORDER BY count DESC, model LIMIT "+str(num_of_highest))
    cursor.execute(sql)
    rows = cursor.fetchall()
    try:
            test = rows[0][0]
    except:
            print "No such make of car!"
    for row in rows:
            print str(row[0]), str(row[1])
    cursor.close()
    connection.close() 
```

现在，当这段代码通过一系列测试用例运行时，结果如下。在失败的测试用例中，它期望什么都不返回，而不是“没有这样的汽车！”

```
Trying:
top_N_models('BMW', 6)
Expecting:
3 152
X5 72
5 39
1 19
7 9
M3 9
ok
Trying:
top_N_models('TOYOTA', 10)
Expecting:
COROLLA 275
LANDCRUISER 193
RAV4 189
HILUX 179
CAMRY 137
ECHO 69
KLUGER 61
YARIS 56
AURION 22
TARAGO 22
ok
Trying:
top_N_models('HOLDEN', 1)
Expecting:
COMMODORE 426
ok
Trying:
top_N_models('EDSEL', 10)
Expecting:
No such make of car!
ok
Trying:
top_N_models('TOYOTA', 0)
Expecting nothing
**********************************************************************
File "__main__", line 34, in __main__
Failed example:
top_N_models('TOYOTA', 0)
Expected nothing
Got:
No such make of car!
Trying:
top_N_models('MINI', 1)
Expecting:
COOPER 34
ok
Trying:
top_N_models('HSV', 10)
Expecting:
CLUBSPORT 21
COUPE 5
MALOO 5
AVALANCHE 2
GTS 2
GRANGE 1
ok
1 items had no tests:
__main__.top_N_models
**********************************************************************
1 items had failures:
1 of   7 in __main__
7 tests in 2 items.
6 passed and 1 failed.
***Test Failed*** 1 failures. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T03:50:55.223

`rows`将是一个空列表，因为您的 SQL 语句具有`LIMIT 0`.

因此，`rows[0]`返回一个`IndexError`，触发`except`.

# asp.net - 将日期时间插入数据库

> ID：10712443
> 
> 赞同：0
> 
> 时间：2012-05-23T01:45:04.350
> 
> 标签：asp.net, sql, datetime

我的 SQL 数据库中有一个 DateTime 字段，我想将时间写入该字段，但我该怎么做呢？

我想将其作为时间戳进行，因此当用户单击“添加”按钮时，它会将数据添加到其他字段，并将时间戳添加到 DateTime 字段中，但我不断收到以下错误

> 从字符串转换日期和/或时间时转换失败。

这是我在 CS 文件中的当前代码

```
insertSQL = "INSERT INTO Posts (TopicID, PostBody, PostDate, UserID)"
        + "VALUES ('" + topic + "', '" + newPostText + "', '" + DateTime.Now.ToString() + "', '" + User_ID + "')"; 
```

请注意，我希望尽可能多地显示时间信息。例如 2012 年 5 月 23 日上午 10:58:00

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T01:53:45.623

您的实现很容易出现`SQL Injection`. 要解决此问题以及您的 DateTime 问题，请使用参数 - [http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)

像这样的东西：

```
string commandText = "INSERT INTO Posts (TopicID, PostBody, PostDate, UserID)"
    + "VALUES (@Topic, @NewPostText, @PostDate, @UserID)";

using (SqlConnection connection = new SqlConnection(connectionString))
{
    SqlCommand command = new SqlCommand(commandText, connection);
    command.Parameters.AddWithValue("@Topic", "My Topic");
    command.Parameters.AddWithValue("@NewPostText", "Post text goes here");
    command.Parameters.AddWithValue("@PostDate", dateObject);
    command.Parameters.AddWithValue("@UserID", "UserA");

    try
    {
        connection.Open();
        Int32 rowsAffected = command.ExecuteNonQuery();
    }
    catch (Exception)
    {
        // Handle Errors    
    }
} 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-05-23T01:52:57.753

你要 strtotime() 吗？

```
<?php
$d = date('y-m-d');
echo date('d M Y',strtotime( $d ));
echo "<br>";
echo date('Y-m-d H:i:s'); ?> 
```

唉，是我的错，是php的~

# php - 在 Wamp 上更改 PHP 版本？尝试加载 Zendguard 或 Ioncube

> ID：10712449
> 
> 赞同：0
> 
> 时间：2012-05-23T01:45:40.103
> 
> 标签：php, version, wamp, wampserver, ioncube

我已经尝试了几个小时来解决这个问题，我最近购买了 IP.Nexus，它是 Invision Power Board 论坛软件的附加组件（它是论坛的商店）。我可以下载两个版本，Zendguard 锁定和 Ioncube 锁定。我都试过了，我尝试下载两个加载器的正确版本。我几乎不知道 ioncube 不能在 64 位计算机上工作，不久之后发现 Zendguard 不能在启用线程安全的 PHP 服务器上工作！

问题是，如何更改 wamp 上的 PHP 版本？我知道他们有降级或升级的附加组件，但我相信所有这些都启用了线程安全。我想继续使用 wamp，因为我不知道如何使用不同的网络服务器。非常感谢！

# jquery - 使用 jQuery 将内容从一个文本字段复制到另一个文本字段

> ID：10712454
> 
> 赞同：0
> 
> 时间：2012-05-23T01:45:53.603
> 
> 标签：jquery, html, forms, copy

尝试将一些用户输入从一个 HTML 复制`input`到另一个，我的控制台显示错误：`Uncaught TypeError: Object #<HTMLInputElement> has no method 'val'`

不知道问题是什么..我认为文本输入*确实*有价值？谢谢你的帮助！

HTML：

```
<input id="a" class="answer" type="text">
<input id="af" type="text" name="a">

$('.answer').bind('keypress', function(){
    var name  = $(this).attr('id'),
        feild = $('#' + name + 'f')[0];

    feild.val($(this).val());
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T01:49:26.190

**编辑：**正如@zerkms 指出的那样，无论如何都不需要[0]，但是由于有时将数组索引与选择器一起使用很有用，所以我将把它留在这里，以便您了解错误。

改变：

```
field.val($(this).val()); 
```

到

```
$(field).val($(this).val()); 
```

说明：`$('#' + name + 'f')`获取与选择器匹配的 HTML 元素数组。因为你把`[0]`它放在数组中的第一个 HTML 元素。由于`field`是 HTML 元素而不是 jQuery 对象，因此您需要将其转换为 jQuery 对象，`$(field)`以便在其上使用 jQuery 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T04:41:37.337

**第一件事**——需要添加几个额外的点才能真正完成这里的解决方案：

*   onkeypress 事件应该只在*字符*键按下和释放（或重复保持）时触发。

*   onkeydown/onkeyup 事件应该为任何被按下/释放的键触发。

[参考](http://www.w3.org/TR/DOM-Level-3-Events/#events-keyboard-event-order)

因此，您确实应该在 keyup 上复制输入文本，因为您想要包括删除操作、粘贴事件等。即使使用 @zerkms/@waitinfratrain 修复，您也只能将信息添加到第二个框。

**第二件事**——这种方法有效，但它没有我在实际站点中看到的那种活泼，我想看看我能不能得到它，所以就这样吧。

Onkeyup/down 事件没有字符信息（或不应该），因此您不能真正使用它们来帮助加快进程。

我摆弄了（呵呵）一段时间，我想出的响应时间明显更快，尽管它*确实*增加了一个依赖项—— [jcaret](http://code.google.com/p/jcaret/downloads/list)。

我不认为有任何重大错误，但 YMMV。[浏览器](http://www.quirksmode.org/dom/events/keys.html)对按键事件的支持也非常不完整，但希望*jQuery*可以为您处理（我只在 Chrome 中测试过）。

```
$('.answer').bind('keyup', function(e){
    $('#' + $(this).attr('id') + 'f').val($(this).val());
});

$('.answer').keypress(function(e){
    var newChar = String.fromCharCode(event.which);
    var oldVal = $(this).val();
    var cursorPos = $(this).caret().start;

    var newVal = oldVal.slice(0, cursorPos) + newChar + oldVal.slice(cursorPos);

    $('#' + $(this).attr('id') + 'f').val(newVal);
}); 
```

[jsfiddle](http://jsfiddle.net/HuepG/8/)

希望这可以帮助！​</p>

# .net - .net 网页中的简单身份验证

> ID：10712461
> 
> 赞同：0
> 
> 时间：2012-05-23T01:46:17.887
> 
> 标签：.net, authentication, razor, webmatrix

我正在尝试通过 WebSecurity 类进行身份验证。

我有一个表单，当用户提交时，这被称为：

```
@{
    if(IsPost) {
        var username = Request["username"];
        var password = Request["password"];

        WebSecurity.CreateAccount(username, password, false);

        WebSecurity.Login(username, password);

        Response.Redirect("Default.cshtml");
    }

} 
```

我已经打电话了：

```
WebSecurity.InitializeDatabaseConnection("Veidibok", "UserProfile", "UserId", "Email", true); 
```

在我的 _appStart.cshtml 文件中。

我从电话中得到这个错误`CreateAccount()`：

> [MembershipCreateUserException：提供程序遇到未知错误。]
> WebMatrix.WebData.SimpleMembershipProvider.CreateAccount(String userName, String password, Boolean requireConfirmationToken) +1312
> WebMatrix.WebData.WebSecurity.CreateAccount(String userName, String password, Boolean requireConfirmationToken) +31
> ASP ._Page_Authentication_Register_cshtml.Execute() 在 c:\Users\Notandi\Documents\My Web Sites\VeidiBok\Authentication\Register.cshtml:6
> System.Web.WebPages.WebPageBase.ExecutePageHierarchy() +207
> System.Web.WebPages.WebPage.ExecutePageHierarchy(IEnumerable`1 executors) +68 System.Web.WebPages.WebPage.ExecutePageHierarchy() +156 System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage) + 76
> System.Web.WebPages.WebPageHttpHandler.ProcessRequestInternal（HttpContextBase httpContext）+119

所以有人有什么想法吗？我对此很陌生，只是尝试了 WebMatrix 和 .cshtml

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-03T06:09:32.463

好的，在今天的大部分时间里，这个问题让我很头疼。我最终不得不查看 Codeplex 上的源代码以更好地了解正在发生的事情（[http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/ae31d2579b9a#src%2fWebMatrix.WebData%2fSimpleMembershipProvider.cs](http://aspnetwebstack.codeplex.com/SourceControl/changeset/view/ae31d2579b9a#src/WebMatrix.WebData/SimpleMembershipProvider.cs)）

似乎`CreateAccount`主要在成员资格表中创建帐户信息，但在此之前，该方法将检查在 Initialize 语句中指定的用户配置文件表中是否存在具有相同用户名的用户`WebSecurity.InitializeDatabaseConnection`

您可以在`CreateUser`调用方法之前调用`CreateAccount`或调用便捷方法`CreateUserAndAccount`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T09:02:29.880

解决方案：

您已在数据库工作流程中创建数据库 Veidibok.sdf

然后

在 Demo 根文件夹中创建 web.config 文件并在 connectionString 区域添加以下代码

```
<connectionStrings>
        <add name="Veidibok" connectionString="Data Source=|DataDirectory|\Veidibok.sdf;" />
    </connectionStrings> 
```

# php - 无法连接：无法通过套接字'/var/lib/mysql/mysql.sock'连接到本地MySQL服务器（2）

> ID：10712462
> 
> 赞同：2
> 
> 时间：2012-05-23T01:46:19.000
> 
> 标签：php, mysql, centos

当我通过 php 脚本连接我的数据库时，它显示

```
Could not connect: Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2) 
```

用户名和密码是正确的。

的东西`my.cnf`

```
[client]
#password       = your_password
port            = 3306
socket          = /data/mysql/mysql.sock

# Here follows entries for some specific programs

# The MySQL server
[mysqld]
port            = 3306
socket          = /data/mysql/mysql.sock
skip-external-locking 
```

ps：我把它改成`socket = /var/lib/mysql/mysql.sock` php脚本仍然说“/var/lib/mysql/mysql.sock”？。然后运行

```
 mysqladmin -u root -p status 
```

表明

```
mysqladmin: connect to server at 'localhost' failed
error: 'Can't connect to local MySQL server through socket '/var/lib/mysql/mysql.sock' (2)'
Check that mysqld is running and that the socket: '/var/lib/mysql/mysql.sock' exists!

service mysqld restart

mysqld: unrecognized service 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T02:05:18.637

问：您的 my.conf 是否仍然显示“/var/lib/mysql/mysql.sock”？

问：目录“/var/lib/mysql”是否存在？

问：你的 mysql 用户（或者更好的 mysql 组）是否有 writer 权限？

如果是这样，请尝试重新启动mysql，看看会发生什么。

附录：

要尝试的另一件事是*创建*一个 mysql.sock 并显式*授予*它权限：

```
cd /var/lib
mkdir mysql
touch mysql/mysql.sock
chown -R mysql:mysql mysql 
```

# ruby - 如何将哈希转换为一个或多个数组？

> ID：10712464
> 
> 赞同：1
> 
> 时间：2012-05-23T01:46:32.480
> 
> 标签：ruby, multidimensional-array

我不知道如何将哈希转换为多维数组。阅读 Excel 电子表格后，我从 roo 生成了以下哈希：

```
{[1, 1]=>"string-1", [1, 2]=>"string-2", [1, 3]=>"string-3", [1, 4]=>"string-4", 
[1, 5]=>"string-5", [1, 6]=>"string-6", [1, 7]=>"string-7", [2, 1]=>"string-1", 
[2, 2]=>"string-2", [2, 3]=>numeric-1, [2, 4]=>numeric-2, [2, 5]=>"string-3", 
[2, 6]=>"string-4", [2, 7]=>numeric-3, [3, 1]=>"string-1", [3, 2]=>"string-2", 
[3, 3]=>numeric-1, [3, 4]=>numeric-2, [3, 5]=>"string-3", [3, 6]=>"string-4", 
[3, 7]=>numeric-3, ... etc} 
```

我需要将其转换为：

```
[["string-1", "string-2", "string-3", "string-4", "string-5", "string-6", "string-7"], 
["string-1", "string-2", numeric-1, numeric-2, "string-3", "string-4", numeric-3], 
["string-1", "string-2", numeric-1, numeric-2, "string-3", "string-4", numeric-3],
... etc] 
```

我尝试了以下方法，但它只是将所有内容复制到一个数组中，而不是嵌入数组：

```
2.upto(input.last_row).each do |row|
  ((input.first_column)..(input.last_column)).map{ |col| 
    $rows << input.cell(row, col) if col != 5 and col <= 10}.join(" ")
end 
```

我已经搜索了几个小时的答案，但找不到解决方案。

以下最终成为我可行的解决方案：

```
((xlsx.first_row)..(xlsx.last_row)).each do |row|
  ((xlsx.first_column)..(xlsx.last_column)).each do |col|
    $tmp_row << xlsx.cell(row, col) if col != 5 and col <= 10
  end
remove_newlines_from_strings($tmp_row)
$rows_sheet_0 << $tmp_row
$tmp_row = []
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T02:18:24.553

```
h = {[1, 1]=>"string-1",[1, 2]=>"string-2",[1, 3]=>"string-3",[1, 4]=>"string-4",
[1,5]=>"string-5",[1, 6]=>"string-6",[1, 7]=>"string-7",[2, 1]=>"string-1",
[2, 2]=>"string-2",[2, 3]=>"numeric-1",[2, 4]=>"numeric-2",[2, 5]=>"string-3",
[2, 6]=>"string-4",[2, 7]=>"numeric-3",[3, 1]=>"string-1",[3, 2]=>"string-2",
[3, 3]=>"numeric-1",[3, 4]=>"numeric-2",[3, 5]=>"string-3",[3, 6]=>"string-4",
[3, 7]=>"numeric-3"}

h.each_with_object(Hash.new([])){ |m,res| res[m.first.first] += [m.last] }.values

#=>[["string-1","string-2","string-3","string-4","string-5","string-6","string-7"],
#=> ["string-1","string-2","numeric-1","numeric-2","string-3","string-4","numeric-3"],
#=> ["string-1","string-2","numeric-1","numeric-2","string-3","string-4","numeric-3"]] 
```

感谢**mu is too short**的提示，我可以稍微重写一下：

```
h.each_with_object(Hash.new{|h,k|h[k]=[]}) do |m,res| 
  res[m.first.first] << m.last 
end.values 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T02:11:04.793

如果您使用的是 1.9+，那么您可以通过以下方式利用有序哈希：

```
a_of_as = spreadsheet.group_by { |k, v| k.first }.map { |k, v| v.map(&:last) } 
```

如果您不确定哈希是否会以正确的顺序构建，那么您可以像这样强制“按坐标排序”：

```
a_of_as = spreadsheet.sort_by  { |k, v| k }
                     .group_by { |k, v| k.first }
                     .map      { |k, v| v.map(&:last) } 
```

我假设网格中没有任何间隙，但在处理电子表格时这似乎是一个安全的假设。

例如（为了紧凑而重新格式化）：

```
>> pp spreadsheet
{[1, 1]=>"string-1", [1, 2]=>"string-2", [1, 3]=>"string-3",  [1, 4]=>"string-4",  [1, 5]=>"string-5", [1, 6]=>"string-6", [1, 7]=>"string-7",
 [2, 1]=>"string-1", [2, 2]=>"string-2", [2, 3]=>"numeric-1", [2, 4]=>"numeric-2", [2, 5]=>"string-3", [2, 6]=>"string-4", [2, 7]=>"numeric-3",
 [3, 1]=>"string-1", [3, 2]=>"string-2", [3, 3]=>"numeric-1", [3, 4]=>"numeric-2", [3, 5]=>"string-3", [3, 6]=>"string-4", [3, 7]=>"numeric-3"}

>> pp spreadsheet.group_by { |k, v| k.first }.map { |k, v| v.map(&:last) }
[["string-1", "string-2", "string-3",  "string-4",  "string-5", "string-6", "string-7"],
 ["string-1", "string-2", "numeric-1", "numeric-2", "string-3", "string-4", "numeric-3"],
 ["string-1", "string-2", "numeric-1", "numeric-2", "string-3", "string-4", "numeric-3"]]

>> spreadsheet2 = Hash[spreadsheet.sort { |(ka,va),(kb,vb)| kb <=> ka }]
>> pp spreadsheet2
{[3, 7]=>"numeric-3", [3, 6]=>"string-4", [3, 5]=>"string-3", [3, 4]=>"numeric-2", [3, 3]=>"numeric-1", [3, 2]=>"string-2", [3, 1]=>"string-1", 
 [2, 7]=>"numeric-3", [2, 6]=>"string-4", [2, 5]=>"string-3", [2, 4]=>"numeric-2", [2, 3]=>"numeric-1", [2, 2]=>"string-2", [2, 1]=>"string-1",
 [1, 7]=>"string-7",  [1, 6]=>"string-6", [1, 5]=>"string-5", [1, 4]=>"string-4",  [1, 3]=>"string-3",  [1, 2]=>"string-2",  [1, 1]=>"string-1"}

>> pp spreadsheet2.sort_by { |k,v| k }.group_by { |k, v| k.first }.map { |k, v| v.map(&:last) }
[["string-1", "string-2", "string-3",  "string-4",  "string-5", "string-6", "string-7"],
 ["string-1", "string-2", "numeric-1", "numeric-2", "string-3", "string-4", "numeric-3"],
 ["string-1", "string-2", "numeric-1", "numeric-2", "string-3", "string-4", "numeric-3"]] 
```

# ruby-on-rails-3 - 如何在 Twitter Bootstrap 中制作下拉选择表单

> ID：10712466
> 
> 赞同：6
> 
> 时间：2012-05-23T01:46:42.147
> 
> 标签：ruby-on-rails-3, twitter-bootstrap

他们为常规输入文本表单提供了示例标记：

```
<form class="form-horizontal">
  <fieldset>
    <legend>Legend text</legend>
    <div class="control-group">
      <label class="control-label" for="input01">Text input</label>
      <div class="controls">
        <input type="text" class="input-xlarge" id="input01">
        <p class="help-block">Supporting help text</p>
      </div>
    </div>
  </fieldset>
</form> 
```

但我怎么能得到类似的东西

![在此处输入图像描述](../Images/5b2fccda14bac8552e6bccecef3880f6.png)

对标记如何查找选择列表有点困惑。谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-23T02:00:23.653

### 引导程序 2.3.2：

```
<form class="form-horizontal">
    <fieldset>          
        <div class="control-group">
            <label class="control-label">Select:</label>
            <div class="controls">
                <select>
                    <option value="1">Option 1</option>
                    <option value="2">Option 2</option>
                    <option value="3">Option 3</option>
                </select>
            </div>
        </div>
    </fieldset>
</form> 
```

### 引导程序 3.x：

```
<form role="form" class="form-horizontal">
    <fieldset>
      <div class="form-group">
        <label class="col-sm-2 control-label">Select:</label>
        <div class="col-sm-3">
            <select class="form-control">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
            </select>
        </div>
      </div>
    </fieldset>
</form> 
```

`col-sm-2`并`col-sm-3`为您定义宽度可以相应地更改。查看 Bootstrap 站点上的 Grid 系统以了解不同的变化。

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-30T09:04:13.013

Lodder 的答案对于 Bootstrap 2.x 是正确的，但它不适用于 Bootstrap 3。这将适用于 Bootstrap 3：

```
<form class="form-horizontal">
    <fieldset>          
        <div class="form-group">
            <label class="control-label col-lg-2">Select:</label>
            <div class="col-lg-3">
                <select class="form-control">
                    <option value="1">Option 1</option>
                    <option value="2">Option 2</option>
                    <option value="3">Option 3</option>
                </select>
            </div>
        </div>
    </fieldset>
</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-28T23:12:55.540

并且毫无价值地工作 - Bootstrap 3。

```
<form class="form-horizontal">
    <fieldset>          
        <div class="form-group">
            <label class="control-label col-lg-2">Select:</label>
            <div class="col-lg-3">
                <select class="form-control">
                    <option>Option 1</option>
                    <option>Option 2</option>
                    <option>Option 3</option>
                </select>
            </div>
        </div>
    </fieldset>
</form> 
```

# ruby-on-rails - rake 测试：功能不工作 - 错误 MassAssignmentSecurity：错误

> ID：10712470
> 
> 赞同：1
> 
> 时间：2012-05-23T01:47:37.763
> 
> 标签：ruby-on-rails, unit-testing

我正在关注第 4 版 Agile Web Dev with Rails。在第 9 章第 112 页。我正在尝试运行 rake test:functional。我想我遵循了他们的每一段代码，但这给了我一个质量分配错误。当我运行服务器时，它给了我这个错误

ActiveModel::MassAssignmentSecurity::LineItemsController#create 中的错误

无法批量分配受保护的属性：产品

这就是 LineItemsController 创建函数的样子

```
 def create
    @cart = current_cart
    product = Product.find(params[:product_id])
    @line_item = @cart.line_items.build(product: product)

    respond_to do |format|
      if @line_item.save
        format.html { redirect_to @line_item.cart,
          notice: 'Line item was successfully created.' }
        format.json { render json: @line_item,
          status: :created, location: @line_item }
      else
        format.html { render action: "new" }
        format.json { render json: @line_item.errors,
          status: :unprocessable_entity }
      end
    end
  end 
```

这是文件夹 test/functional/ 中 line_items_controller_test.rb 中的创建测试

```
 test "should create line_item" do
    assert_difference('LineItem.count') do
      post :create, product_id: products(:ruby).id
    end

    assert_redirected_to cart_path(assigns(:line_item).cart)
  end 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T02:48:58.083

这是由于 Github 惨败导致的新版本 Rails 的最新更改：[https ://github.com/rails/rails/commit/b83965785db1eec019edf1fc272b1aa393e6dc57](https://github.com/rails/rails/commit/b83965785db1eec019edf1fc272b1aa393e6dc57)

要解决此问题，您可以执行以下两项操作之一：

1）更改此设置（在您的 config/application.rb 文件中）`false`以允许在站点范围内进行大规模分配

```
config.active_record.whitelist_attributes = false 
```

2）通过在模型中的某处添加此行，将您将要更改的所有属性列入白名单：

```
attr_accessible :product 
```

第一种是旧的默认方式，而且更容易。第二个对于生产应用程序更安全。

# c# - C#：自定义控件每隔一次单击调用单击处理程序（winform，而不是 ASP）

> ID：10712478
> 
> 赞同：2
> 
> 时间：2012-05-23T01:48:50.070
> 
> 标签：c#, winforms, controls, mouseevent

我用 C# 编写了一个自定义控件（从 Forms.Control 继承），它似乎工作正常，但如果你按下按钮的速度足够快，就会出现问题：只有每一次其他点击才会调用 click 事件处理程序。如果您不快速按下它（少于每秒一次），则不会发生这种情况。无论您单击按钮多快，mouseUp 和 mouseDown 处理程序都会被调用。

罐装的winform按钮当然不会发生。

我无法使用固定按钮，因为我正在为 .net 紧凑框架编写应用程序，因此我需要一个自定义控件以使 UI 更美观。另外，我在 .net 框架的完整版上测试了我的代码，但我仍然遇到同样的问题。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T01:56:26.933

如果您的点击速度足够快，那么您就进入了[`DoubleClick`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.mousedoubleclick.aspx)领域。

根据上面的 MSDN 页面，事件的顺序是：

当发生此类用户操作时，控件会引发以下一系列事件：

1.  鼠标按下事件。
2.  点击事件。
3.  鼠标点击事件。
4.  MouseUp 事件。
5.  鼠标按下事件。
6.  双击事件。
7.  鼠标双击事件。
8.  MouseUp 事件

如果您注意到每个事件只有一个`Click`事件`DoubleClick`

* * *

如需禁用它的方法，请尝试查看此 MSDN Page 讨论[ControlStyles](http://msdn.microsoft.com/en-us/library/system.windows.forms.controlstyles.aspx)。

从上面的链接：

> **StandardClick** -- 如果为 true，则控件实现标准 Click 行为。
> **StandardDoubleClick** -- 如果为 true，则控件实现标准 DoubleClick 行为。如果 StandardClick 位未设置为 true，则忽略此样式。

所以在你的控件构造函数或加载事件中试试这个：

```
this.SetStyle(ControlStyles.StandardClick, true );
this.SetStyle(ControlStyles.StandardDoubleClick, false); 
```

由于`SetStyle`它似乎不在 Compact Framework 中，您可以添加一个 DoublClick 事件并让它像这样以编程方式触发 Click 事件。

```
YourClickEvent(sender, new MouseEventArgs(System.Windows.Forms.MouseButtons.Left,1,0,0,0)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T01:58:40.313

当您足够快地单击控件时，它会调用双击而不是单击。因此，您应该在 click 函数中执行以下操作：

```
{
    control.Enabled = false; 
    ......
    control.Enabled = true;
} 
```

# android - android小部件通过按下小部件中的按钮来运行功能

> ID：10712479
> 
> 赞同：0
> 
> 时间：2012-05-23T01:49:17.853
> 
> 标签：android, widget

我想在我的小部件中添加一个按钮，以便它可以通过按下一个按钮来运行一个功能（更改 APN 并在小部件中显示更改的消息）。实际上，自从我在活动中进行了测试以来，该功能就可以使用。有人知道怎么做吗？谢谢！

问候， 陈比尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T02:20:22.820

嗯，有几种方法。

例如，您可以在注册的 AppWidgetProvider 中进行类似的操作：

```
public static String ACTION_WIDGET_RECEIVER = "Action!";

@Override
    public void onUpdate(Context context, AppWidgetManager appWidgetManager,
            int[] appWidgetIds) {
        RemoteViews remoteViews = new RemoteViews(context.getPackageName(),
                R.layout.widget_layout);

        Intent active = new Intent(context, ThisClass.class);
        active.setAction(ACTION_WIDGET_RECEIVER);

        PendingIntent actionPendingIntent = PendingIntent.getBroadcast(context,
                0, active, 0);

        remoteViews.setOnClickPendingIntent(R.id.button, actionPendingIntent);

        appWidgetManager.updateAppWidget(appWidgetIds, remoteViews);
    }

    @Override
    public void onReceive(Context context, Intent intent) {
        final String action = intent.getAction();
        if (AppWidgetManager.ACTION_APPWIDGET_DELETED.equals(action)) {
            final int appWidgetId = intent.getExtras().getInt(
                    AppWidgetManager.EXTRA_APPWIDGET_ID,
                    AppWidgetManager.INVALID_APPWIDGET_ID);
            if (appWidgetId != AppWidgetManager.INVALID_APPWIDGET_ID) {
                this.onDeleted(context, new int[] { appWidgetId });
            }
        } else {
            if (intent.getAction().equals(ACTION_WIDGET_RECEIVER)) {
                doYourStuff();
            super.onReceive(context, intent);
        }
    } 
```

# db2 - 在更新语句中调用 FUNCTION

> ID：10712486
> 
> 赞同：0
> 
> 时间：2012-05-23T01:50:13.083
> 
> 标签：db2

我想加密表中的一个字段。我有这样做的功能

```
CREATE FUNCTION baz.encrypt 
(
        p BIGINT
)
RETURNS CHAR(16)
.... 
```

现在我想更新所有要加密的行

```
UPDATE FOO SET BAR =  baz.encrypt(BAR) 
```

不工作，要么

```
UPDATE FOO f SET BAR =  SELECT baz.encrypt(BAR) FROM FOO where pk = f.pk 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T04:29:04.457

刚刚解决了。问题是我的函数需要一个 BIGINT 但是我的列中有 alpha 字符。所以 CAST 不起作用

# mysql - 尝试在 MySQL 选择查询中解决日期条件

> ID：10712489
> 
> 赞同：0
> 
> 时间：2012-05-23T01:50:28.930
> 
> 标签：mysql, sql, date

我正在尝试列出仍然可以选择运送的即将交付的货物。这些交付中的每一个都需要一定的交货时间 - 因此，如果您在前一天下午 5 点下订单，期望明天交货是不现实的。

交货表定义了一个“leadTime”，它是一个整数天，还有一个“nextDate”，它包含一个“YYYY-MM-DD”格式的日期字段。我需要过滤掉“nextDate”至少一天之后的行 - 或者更确切地说，如果在上午 10 点之前，则在一天之后，如果在上午 10 点之后，则在两天之后。

```
SELECT d.* FROM delivery d
WHERE d.nextDate >= DATE_ADD( CURRENT_DATE, INTERVAL d.leadTime DAY )
ORDER BY d.nextDate ASC, d.id ASC 
```

例如，（假设提前期为*一天*）。如果是周三上午 9 点，我可以看到*周四以来的*所有记录。但是，如果是周三上午 11 点，我只能*从周五开始*看到（因为是上午 10 点之后，没有足够的时间准备）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T01:54:40.380

`DATE(NOW() + INTERVAL 14 HOUR)`代替or使用`CURRENT_DATE`，将整个事物组合在一起：

```
SELECT   *
FROM     delivery
WHERE    nextDate >= DATE(NOW() + INTERVAL 14 HOUR + INTERVAL leadTime DAY)
ORDER BY nextDate ASC, id ASC 
```

# iphone - 点击 UIwebView 并且不要关闭键盘

> ID：10712490
> 
> 赞同：0
> 
> 时间：2012-05-23T01:50:30.057
> 
> 标签：iphone, uiwebview, keyboard

当我点击 UIWebView 时，键盘会消失，这不是我想要的，我希望键盘保留在那里，有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T02:18:05.740

如果您希望在删除文本视图时键盘消失，请确保`resignFirstResponder`在删除/释放文本视图之前调用您的文本视图。

如果您在文本视图可见时触摸 UIWebView，则*焦点*会从文本视图更改为 Web 视图并且键盘会关闭，因为操作系统认为从该点发生的任何触摸都是针对 Web 视图的。如果您触摸文本视图（也就是说，如果它仍然可见），焦点会变回文本视图并且键盘应该重新出现。

如果这些答案对您没有帮助，请澄清您的问题。

# ruby-on-rails-3 - 在 Rails 中提供静态目录

> ID：10712493
> 
> 赞同：4
> 
> 时间：2012-05-23T01:50:34.860
> 
> 标签：ruby-on-rails-3, heroku, static-content

我有一个简单的 Rails 应用程序部署到 Heroku，我试图`index.html`从文件夹中提供一个静态目录（包含一个 ），`public/demos`但遇到了一个奇怪的问题。我已经`config.serve_static_assets = true`在生产中启用，如果我去`mysite.com/demos/folder/`，我可以正常访问静态页面。但是，如果我转到`mysite.com/demos/folder`（缺少尾部斜杠），则索引页面会加载但无法加载位于同一目录中的一堆链接的 css/js 内容。有没有办法解决这个问题或更好的方法？我不确定使用 Rails 提供静态内容的最佳方法是什么，但这感觉像是一个糟糕的解决方案。

# algorithm - DAG 中的最长路径

> ID：10712495
> 
> 赞同：14
> 
> 时间：2012-05-23T01:50:51.707
> 
> 标签：algorithm, graph, directed-acyclic-graphs

为了找到 DAG 中的最长路径，我知道 2 种算法：算法 1：进行拓扑排序 + 对排序结果使用动态编程〜或〜算法 2：使用 DFS 枚举 DAG 中的所有路径，并记录最长。似乎用 DFS 枚举所有路径比算法 1 具有更好的复杂性。这是真的吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-23T02:14:03.533

您的第二个选项不正确：DFS 不会探索所有可能的路径，除非您的图形是树或森林，并且您从根开始。我知道的第二种算法是对权重求反并找到最短路径，但它比您列为 #1的[顶级排序 + DP 算法要慢一些。](https://en.wikipedia.org/w/index.php?title=Longest_path_problem&oldid=525448430#Algorithms_for_acyclic_graphs)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T03:39:49.413

使用 "DFS" 枚举 DAG 中的所有路径：

```
import numpy as np

def enumerate_dag(g):

    def enumerate_r(n, paths, visited, a_path = []):
        a_path += [n]
        visited[n] = 1
        if not g[n]:
            paths += [list(a_path)]
        else:
            for nn in g[n]:
                enumerate_r(nn, paths, visited, list(a_path))

    paths, N = [], len(g)
    visited = np.zeros((N), dtype='int32')

    for root in range(N):
        if visited[root]: continue
        enumerate_r(root, paths, visited, [])

    return paths 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T12:29:22.057

不需要 DFS。算法：采用 DAG G。每条弧包含一个变量 E

```
for each node with no predecessor :
    for each of his leaving arcs, E=1.
for each node whose predecessors have all been visited :
    for each of his leaving arcs, E=max(E(entering arcs))+1. 
```

max_path 是处理完所有节点后边缘内的最高 E。

# jsf - JSF 页面没有正确设置对象属性

> ID：10712497
> 
> 赞同：2
> 
> 时间：2012-05-23T01:51:33.113
> 
> 标签：jsf, cdi

来自 JSF 初学者的简单问题：

我有非常简单的 JSF 表单：

```
<h:form>
<p>#{messages.loginTextfieldUsername}</p>
<h:inputText value="#{userServiceImpl.user.name}" />

<p>#{messages.loginTextfieldPassword}</p>
<h:inputSecret value="#{userServiceImpl.user.password}" />

<h:commandButton value="#{messages.loginButtonLogin}" action="#{userServiceImpl.authenticateUser}" />
</h:form> 
```

userServiceImpl 类是：

```
@Named
@RequestScoped
public class UserServiceImpl implements UserService {

private UserSession userSession;
private User user;

@Inject
public UserServiceImpl(UserSession userSession) {
    this.userSession = userSession;
}

@PostConstruct
public void prepareService() {
    user = new User();
}

@Override
public View authenticateUser() {
    userSession.setLoggedUser(user);
    return View.MAIN;
}

public User getUser() {
    return user;
}

public void setUser(User user) {
    this.user = user;
} 
```

}

我的目标很简单：当用户点击登录按钮时，我想对用户进行身份验证。

问题是：当调用authenticate 方法时，User 属性为null。我调试了应用程序并调用了 getUser 方法并且正确设置了值，但是在调用 authenticateUser 之前的某个时间点（我还没有找到 [尚未]）用户属性设置为 null ...

我知道这是一个非常基本的问题......但是你能指出我的错误在哪里吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T16:09:20.620

根据您[之前的问题](https://stackoverflow.com/questions/10677926/how-to-declare-many-jsf-managed-beans-at-once)，您似乎出于某种原因尝试`<managed-bean-scope>`了`none`in 。`faces-config.xml`问题症状在使用时完全匹配`@ManagedBean @NoneScoped`。您似乎已经在完全解释这个问题`faces-config.xml`的`none`范围内配置了这个 bean。使用范围，每次在 EL 中评估时都会`none`创建一个全新的 bean 实例。`#{userServiceImpl}`因此，您的表单提交有效地创建了 3 个 bean：一个设置了用户名，另一个设置了用户密码，另一个设置了操作。

您需要**从**`faces-config.xml`. 当您打算使用`@Inject`（或`@ManagedBean`）时，您不应该使用它。`faces-config.xml`当注释不可用时，配置 bean的方式是旧 JSF 1.x 时代的遗留物。从 JSF 2.x 开始，它只会*覆盖*任何 bean 管理注释。

# php - 如何使 HTML5 与 DOMDocument 一起工作？

> ID：10712503
> 
> 赞同：22
> 
> 时间：2012-05-23T01:52:34.587
> 
> 标签：php, html, domdocument

我正在尝试使用 DOMDocument 解析 HTML 代码，对其进行更改之类的操作，然后将其组装回我发送到输出的字符串。

但是有一些关于解析的问题，这意味着我发送给 DOMDocument 的内容并不总是以相同的形式返回:)

这是一个列表：

1.  使用[->loadHTML](http://php.net/manual/en/domdocument.loadhtml.php)：

    *   无论`preserveWhitespace`和`formatOutput`设置如何格式化我的文档（在预格式化文本上丢失空格）
    *   当我有 html5 标签时给我错误`<header>`，`<footer>`等等。但它们可以被抑制，所以我可以忍受这个。
    *   产生不一致的标记 - 例如，如果我添加一个`<link ... />`元素（带有自关闭标签），在解析/保存 HTML 之后，输出将是`<link .. >`
2.  使用[->loadXML](http://php.net/manual/en/domdocument.loadhtml.php)：

    *   `>`对 from`<style>`或`<script>`tags之类的实体进行编码：`body > div`变为`body &gt; div`
    *   所有标签都以相同的方式关闭，例如`<meta ... />`变为`<meta...></meta>`; 但这可以用正则表达式修复。

我没有尝试 HTML5lib，但出于性能原因，我更喜欢 DOMDocument 而不是自定义解析器

* * *

# 更新：

因此，就像提到的 Honeymonster 一样，使用 CDATA 解决了 loadXML 的主要问题。

有没有什么办法可以防止除了某个集合之外的所有空 HTML 标签的自动关闭，而不使用正则表达式？

现在我有：

```
$html = $dom->saveXML($node);

$html = preg_replace_callback('#<(\w+)([^>]*)\s*/>#s', function($matches){

       // ignore only these tags
       $xhtml_tags = array('br', 'hr', 'input', 'frame', 'img', 'area', 'link', 'col', 'base', 'basefont', 'param' ,'meta');

       // if a element that is not in the above list is empty,
       // it should close like   `<element></element>` (for eg. empty `<title>`)
       return in_array($matches[1], $xhtml_tags) ? "<{$matches[1]}{$matches[2]} />" : "<{$matches[1]}{$matches[2]}></{$matches[1]}>";
}, $html); 
```

哪个有效，但它也会在 CDATA 内容中进行替换，这是我不想要的......

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-23T04:57:38.407

使用[html5lib](http://code.google.com/p/html5lib/)。它可以解析 html5 并生成 DOMDocument。例子：

```
require_once '/path/to/HTML5/Parser.php';
$dom = HTML5_Parser::parse('<html><body>...'); 
```

[文档](http://code.google.com/p/html5lib/source/browse/php/README)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-04-26T12:41:03.580

如果你想支持 HTML5，就不要碰 DOMDocument。

目前最好的选择似乎是[https://github.com/Masterminds/html5-php](https://github.com/Masterminds/html5-php)

以前最好的选择是[https://github.com/html5lib/html5lib-php](https://github.com/html5lib/html5lib-php)但正如描述所说，它“当前未维护”。这是自 2011 年 10 月以来的状态，所以我不再屏住呼吸了。

我没有`html5-php`在生产中使用过，所以我无法提供任何关于它的真实世界经验。我`html5lib-php`在生产中使用过，我会说它可以正确解析格式正确的文档，但它有一些简单的语法错误和意外错误。另一方面，它似乎正确地实现了采用代理算法和其他一些奇怪的极端情况。如果`html5lib-php`仍然保持，我仍然更喜欢它。但是，就目前的情况而言，我更喜欢使用`html5-php`并可能帮助修复那里的剩余错误。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-05-28T19:04:36.733

不幸的是，或者可能幸运的是，domdocument 旨在不尝试保留原始文档的格式。这是为了通过保持所有元素相同的样式来使解析器的内部状态更易于管理。Afaik 大多数解析器将在内存中创建树表示，并且在用户请求之前不用担心文本格式。这就是为什么您的自我封闭标签与单独的结束标签一起输出的原因。好消息是这无关紧要。

至于样式标签和脚本标签被`<>`转换为`&lt;&gt;`，您可以通过使用推荐的 cdata 标签包围相关元素的内容来避免转换：

```
<style>
  /*<![CDATA[*/
    body > div {
      width: 50%;
    }
  /*]]>*/
</style> 
```

围绕 cdata 声明的注释`/* */`是为了允许不了解 cdata 部分的损坏客户端，而是将声明视为 CSS 代码。如果您仅在内部使用该文档，那么您可以省略`/* */`注释包围并仅使用 cdata 声明。如果您操作文档然后将其发送到浏览器而不检查以确保`/* */`保留评论，您可能会遇到上述损坏的客户端的问题；我不确定 domdocument 是否会保留这些。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-01-07T18:03:58.437

我尝试了 html5lib 和 html5php，但都没有使用我提供的 HTML。能够解析 HTML 的替代方法是：[https ://github.com/ivopetkov/html5-dom-document-php](https://github.com/ivopetkov/html5-dom-document-php)

主类扩展了 PHP 的原生 DomDocument。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-12-10T10:35:16.267

10 年过去了，但 PHP DOMDocument 上的问题仍然存在，我找到了两种解决问题的方法。

## 解决方案 1

作为选项添加`LIBXML_NOERROR`到 loadHTML 方法，如下所示：

```
<?php

$dom = new DOMDocument();

$dom->loadHTML('<header data-attribute="foo">bar<', LIBXML_NOERROR);

echo $dom->saveHTML();
// outputs the html with valid closing tag without any error
?> 
```

## 解决方案 2

`libxml_use_internal_errors(true)`在加载 HTML 之前添加

```
<?php

$dom = new DOMDocument();

libxml_use_internal_errors(true);

$dom->loadHTML('<header data-attribute="foo">bar<');

echo $dom->saveHTML();
// outputs the html with valid closing tag without any error
?> 
```

* * *

## 回答 #6

> 赞同：-7
> 
> 时间：2015-08-26T00:48:37.070

初始化 domDocument 时，请执行以下操作：

```
$dom = new DOMDocument(5, 'UTF-8'); 
```

# php - 为什么我不能将我的 pdf 块放入 mysql 数据库？

> ID：10712507
> 
> 赞同：0
> 
> 时间：2012-05-23T01:53:03.297
> 
> 标签：php, mysql, pdf, upload

所以，这是我试图用来将一个大的 pdf 文件分解成块并将其存储在我的数据库中的代码。是否有任何原因无法正常工作。我整天都在努力解决这个问题，并且绕了一大圈。将不胜感激任何帮助！谢谢！

```
<?
$username="something";
$password="something";
$database="something";

mysql_connect(localhost,$username,$password);
@mysql_select_db($database) or die("Unable to select database");

$STARTFILE = 1;
$ONFILE = "file" . $STARTFILE;

while (isset($HTTP_POST_FILES["$ONFILE"])) {

// Try!
$SrcPathFile = $HTTP_POST_FILES["$ONFILE"]["tmp_name"];
$SrcFileType = $HTTP_POST_FILES["$ONFILE"]["type"];
$DstFileName = $HTTP_POST_FILES["$ONFILE"]["name"];

clearstatcache();
$time = filemtime($SrcPathFile);
$storedate = date("Y-m-d H:i:s", $time);

// File Processing
if (file_exists($SrcPathFile)) {

// Insert into file table
$SQL  = "insert into tbldocuments(Type,Description,Size,DateTime) values ('";
$SQL .= $SrcFileType . "', '" . $DstFileName . "', " . filesize($SrcPathFile);
$SQL .= ", '" . $storedate . "')";

if (!$RES = mysql_query($SQL, $linkid)) {
  die("Failure on insert to file table!");
}

$fileid = mysql_insert_id($linkid);

// Insert into the filedata table
$fp = fopen($SrcPathFile, "rb");
while (!feof($fp)) {

  // Make the data mysql insert safe
  $binarydata = addslashes(fread($fp, 65535));

  $SQL = "insert into tblDocumentChunks (documentId,chunkData) values (";
  $SQL .= $fileid . ", '" . $binarydata . "')";

  if (!mysql_query($SQL, $linkid)) {
    die("Failure to insert binary inode data row!");
  }
}

fclose($fp);
}

$STARTFILE ++;
$ONFILE = "file" . $STARTFILE;
}

echo "Upload Complete";
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T02:01:36.463

首先，`$HTTP_POST_FILES`已经被弃用了一段时间。改为使用`$_FILES`。

其次，您声明了一个变量`$ONFILE`，但您没有在数组中引用它。

尝试删除引号（`$ONFILE`而不是`"$ONFILE"`）

# html - html/css 表在 IE 中被破坏

> ID：10712508
> 
> 赞同：0
> 
> 时间：2012-05-23T01:53:03.880
> 
> 标签：html, css, internet-explorer, html-table

这是我正在处理的网站，其他所有浏览器都可以正确显示表格，但像往常一样，当涉及到 IE（特别是 9）时，它会中断。

[http://lumpiahouserestaurant.com/menu/](http://lumpiahouserestaurant.com/menu/)

我已经解决了这些`<thead>`问题，因为 IE 没有很好地解释 display:inline-block。我找不到类似的问题`<tbody>`。

表格的主要目标是让`<tr>`浮动左侧和`<td>`有显示块，以便它们向下显示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T02:05:55.200

表格并非旨在以这种垂直方式编写。虽然以这种方式玩弄浏览器可能是一个有趣的实验，但这听起来像是在生产站点中令人头疼的秘诀。

如果您坚持以这种方式对表格进行编码（我猜您想这样做是因为在 HTML 中阅读更直观），您可以

1.  制作一个有 7 列和 1 行的外部表 - 每天一个。在每一列中创建一个包含`n`行和 1 列的表来保存每天的数据。这是假设表格行不应该对齐，如您的示例所示。
2.  从左到右而不是从上到下整理表格，然后[使用 javascript 转置表格。](http://assaneonline.blogspot.com/2011/02/looking-for-simpler-way-to-transpose.html)

# c# - C# 中是否有一种简洁的方式（基于逻辑）分配一个或另一个引用？

> ID：10712511
> 
> 赞同：1
> 
> 时间：2012-05-23T01:53:17.980
> 
> 标签：c#, reference

[[对不起这个笨拙的标题——我想不出最好的方式来表达我想做的事情。]]

我觉得有点傻 - 我刚刚在我的以下代码中发现了一个错误：

```
private static XmlSchemaSet internalSchema = null;
private static XmlSchemaSet externalSchema = null;
private static XmlSchemaSet GetSchema(SchemaType schemaType)
{
    // Lazy evaluation of schema objects - only create internal
    // and external schema once
    XmlSchemaSet schema =
        schemaType == SchemaType.Internal ? internalSchema : externalSchema;
    if (schema == null)
    {
        schema = new XmlSchemaSet();
        schema.Add("", CreateXmlSchemaFile(schemaType));
    }
    return schema;
} 
```

代码的目的是分配静态成员`internalSchema`，并且`externalSchema`仅在首次请求它们时分配一次。

当然，我尝试的简洁代码存在一个明显的错误 -`schema`本地引用指向或正在指向（最初）的*对象*，但是一旦我调用，它只会重新分配*本地*引用，而不是静态成员。`internalSchema``externalSchema``null``new`

 *有没有一种简单的方法可以实现我想要做的事情？我想我可以创建另一个使用`XmlSchemaSet`via`ref`关键字的方法，但是为此创建另一个方法似乎很愚蠢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T02:01:07.727

[懒惰](http://msdn.microsoft.com/en-us/library/dd642331.aspx)的课程是您正在寻找的。

大概用法：

```
private static Lazy<XmlSchemaSet> internalSchema = new Lazy<XmlSchemaSet>(
  () => {
   schema = new XmlSchemaSet();
   schema.Add("", CreateXmlSchemaFile(SchemaType.Internal));
   return schema;
  }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T02:06:09.347

不，没有简单的方法可以按照您要求的方式将“对引用类型的引用”分配给局部变量；对方法使用`ref`参数是实现它的唯一直接方法。

如果您使用的是.NET 4.0，您可以使用`Lazy<>`该类以您想要的方式进行延迟初始化，这（IMO）可以通过从常见情况访问代码中删除一次性初始化代码来使您的代码更易于阅读，例如：

```
private static Lazy<XmlSchemaSet> internalSchema = new Lazy<XmlSchemaSet>(() => CreateSchema(SchemaType.Internal));
private static Lazy<XmlSchemaSet> externalSchema = new Lazy<XmlSchemaSet>(() => CreateSchema(SchemaType.External));

private static XmlSchemaSet CreateSchema(SchemaType schemaType)
{
    var schema = new XmlSchemaSet();
    schema.Add("", CreateXmlSchemaFile(schemaType));
    return schema;
}

private static XmlSchemaSet GetSchema(SchemaType schemaType)
{
    return schemaType == SchemaType.Internal 
      ? internalSchema.Value 
      : externalSchema.Value;
} 
```

否则，我建议您不要尝试太花哨，而只需编写代码来完全按照您的意愿行事。“正确”代码在 100% 的情况下胜过“简洁”代码：

```
if (schemaType == SchemaType.Internal)
{ 
    if (internalSchema == null)
    {
        internalSchema = new XmlSchemaSet();
        internalSchema.Add("", CreateXmlSchemaFile(schemaType));
    }
    return internalSchema;
}
else
{
    if (externalSchema == null)
    {
        externalSchema = new XmlSchemaSet();
        externalSchema.Add("", CreateXmlSchemaFile(schemaType));
    }
    return externalSchema;
} 
```*

# java - 将行附加到电子表格而不加载整个文件

> ID：10712515
> 
> 赞同：1
> 
> 时间：2012-05-23T01:53:59.167
> 
> 标签：java, file-io, spreadsheet, xls, outputstream

我一直在使用 apache POI 库来创建 XLS 文件，但发现它既受限于遵循[Microsoft Excel 规范](http://office.microsoft.com/en-us/excel-help/excel-specifications-and-limits-HP010342495.aspx?CTT=1)的事实，也在于它要求你将整个工作簿加载到内存中，如果你想追加到它。

是否有任何其他库或技术（除了手动编码 XLS XML 本身）允许您逐行流式传输 XLS 文档的内容，而不需要比加载到内存中的完整工作簿更多？

# javascript - jQuery：在特定窗口大小中添加或删除函数

> ID：10712516
> 
> 赞同：1
> 
> 时间：2012-05-23T01:54:19.040
> 
> 标签：javascript, jquery, tinyscrollbar

我对 jQuery/JS 非常陌生，并且在特定窗口大小中添加或删除功能几乎没有问题。如果您可以查看我的代码并进行更正，我将不胜感激。

详细地说，我使用了 tinyscrollbar 插件，我只希望它出现在特定的窗口大小中（假设窗口宽度超过 650 像素）。

这是我的代码：

```
<!--****preload latest jQuery and tinyscrollbar plugin, then...****-->

<script type="text/javascript">

function newsScroll() {
    $("#newsScroll").tinyscrollbar();
};

/*
if windows width is less than 650px, remove newsScroll function and
switch DIV ID to "spNewsScroll" and vice versa.
*/
function scrollOnOff(width) {
    width = parseInt(width);
    if (width < 650) {
        $(window).unbind(newsScroll);
        $("#newsScroll").attr('id','spNewsScroll');
    } else {
        $(window).bind(newsScroll);
        $("#spNewsScroll").attr('id','newsScroll');
    }
};

$(function() {
    //get window size as of now.
    scrollOnOff($(this).width());
    $(window).resize(function() {
        scrollOnOff($(this).width());
    });       
});

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T02:15:10.577

试试这个，经过测试和工作:-)

**现场演示：http:** [//jsfiddle.net/oscarj24/fUsnj/21/](http://jsfiddle.net/oscarj24/fUsnj/21/)

```
function scrollOnOff(width) {
    width = parseInt(width);
    if(width < 650){
        $(window).trigger('newsScroll');
        $('#newsScroll').attr('id','spNewsScroll');
    } else {
        $('.scrollbar').hide();
        $('#spNewsScroll').attr('id','newsScroll');
    }
};

$(function() {

    $(window).bind('newsScroll', function(e) {
        $('.scrollbar').show();
        $('#newsScroll').tinyscrollbar();
    });

    var screenWidth = $(this).width();
    scrollOnOff(screenWidth);

    $(window).on("resize", function(event){
        var w = $(this).width();
        scrollOnOff(w);                
    });

}); 
```

​</p>

# android - Android : 将生成的二维码图像保存到 SD 卡

> ID：10712520
> 
> 赞同：1
> 
> 时间：2012-05-23T01:54:41.817
> 
> 标签：android

> **可能重复：**
> [Android：位图保存到位置](https://stackoverflow.com/questions/649154/android-bitmap-save-to-location)

我已成功创建 QR 码生成器应用程序，但无法将生成的图像保存到外部存储。我尝试了各种做法，但都没有这样做。以下是生成的图像显示在屏幕上的类，然后我必须使用一个名为保存按钮的按钮来存储图像，但我无法完成。有人可以帮我解决这个问题。将非常感谢您为帮助我所做的努力。干杯

```
 public class QRDisplay extends Activity {
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.qr_view);

    String url = getIntent().getStringExtra("IMAGE_URL");

    ImageView imageView = (ImageView)findViewById(R.id.qr_image);
    try {
        URL imageURL = new URL(url);
        Bitmap qrBitmap = BitmapFactory.decodeStream(imageURL.openStream());
        imageView.setImageBitmap(qrBitmap);
    } catch (Exception e) {
        Log.d("QRDisplay", e.getMessage());
    }

Button saveButton= (Button)findViewById(R.id.saveButton);
saveButton.setOnClickListener(new OnClickListener() {
    @Override
    public void onClick(View v) {
    ?????????????????   
    }
});

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T04:18:53.163

嘿 abhijeet 使用它绝对可以解决您的问题

```
String Filepath = Environment.getExternalStorageDirectory().toString();
OutputStream Out = null;
File file = new File(path, "yourimagename"+".jpg");
Out = new FileOutputStream(file);

getImageBitmap(myurl).compress(Bitmap.CompressFormat.JPEG, 85, fOut);
Out.flush();
Out.close();

MediaStore.Images.Media.insertImage(getContentResolver(),file.getAbsolutePath(),file.getName(),file.getName()); 
```

还将这些代码放入您的 maifest 文件中以添加权限-

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/> 
```

# jsp - 在 jsp 页面中显示 jfreechart

> ID：10712521
> 
> 赞同：0
> 
> 时间：2012-05-23T01:54:52.753
> 
> 标签：jsp, jfreechart

我想`jfreechart`在 jsp 页面中显示图表。我编写的代码如下 -

```
...
<%
ChartCreator chart = new ChartCreator();
chart.createCategoryChart();
%>
<img src = "chart.jpg"/> 
```

该`createCategoryChart()`方法创建所需的jpg。它存储在 eclipse 文件夹中（我没有在我的文件名中放置任何路径）。

我无法在 jsp 页面中查看图表，但文件已创建。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T05:22:00.290

我建议使用 Servlet 创建图表。

JSP 主要用于表示（视图）。

创建一个 servlet，它创建图表并将其作为响应发回。

```
import javax.imageio.ImageIO;

protected void doGet(HttpServletRequest request, HttpServletResponse response)
    throws ServletException, IOException {
        OutputStream out = response.getOutputStream(); /* Get the output stream from the response object */
        response.setContentType("image/png"); /* Set the HTTP Response Type */
        ChartCreator chart = new ChartCreator(); // Create chart
        chart.createCategoryChart(); 
        ChartUtilities.writeChartAsPNG(out, chart, 400, 300);/* Write the data to the output stream */
    } 
```

从 JSP 调用 Servlet。

`<img src="/drawChartServlet?type=myDesiredChart&width=..and other processed parameters" ..`>

# javascript - 如何将地图设置为另一个 div 中的 div？

> ID：10712523
> 
> 赞同：5
> 
> 时间：2012-05-23T01:55:49.100
> 
> 标签：javascript, google-maps-api-3

我是 javascript 的新手，在将谷歌地图设置为另一个 div 元素中的 div 元素时，我需要您的帮助。如果 div 元素未嵌套，则代码如下：

```
function initialize() {

var myOptions = {
    center: new google.maps.LatLng(-34.397, 150.644),
    zoom: 8,
    mapTypeId: google.maps.MapTypeId.ROADMAP
};

var map = new google.maps.Map(document.getElementById("map_canvas"),
        myOptions); 
```

但是，如果我有嵌套的 div，它就不起作用：

```
<body onload="initialize()">
<div id="main">
    <div id="map_canvas" style="width:100%; height:100%"></div>
</div>
</body> 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T02:02:41.750

经过一番测试，我得出结论，您还需要为您的`id="main"`div设置一个高度

`style="width:100%; height:100%"`

因为它是地图的容器，没有定义的高度，什么都不会出现。就像拉下窗帘，地图不会自己推下去。

我假设你也有类似的东西，因为地图没有嵌套，但我会再次提到它：

```
<style type="text/css">
  html, body {height:100%}
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T02:34:41.470

谷歌地图的画布需要一个静态的高度和宽度。如果父 div 没有静态大小，则不应使用 % 作为高度和宽度。谷歌地图也有一个错误，它无法在隐藏的 div 中加载。（如果这样做，你需要有一些技巧）

# javascript - 在javascript onclick函数能够完成之前链接重定向页面

> ID：10712528
> 
> 赞同：9
> 
> 时间：2012-05-23T01:58:18.833
> 
> 标签：javascript, function, onclick, href

我有一个加载页面并在点击时调用 javascript 函数的链接。问题是 javascript 函数在页面重定向之前无法完成。有什么办法可以保证吗？

您会注意到`alert()`javascript 函数中有一个注释掉了，如果我取消注释它，该函数就能够完成。但是，我显然不希望实际发生警报弹出窗口。

链接在这里 ：

```
<a href="p.php?p=$randString&s=$postCat" onclick="setYSession();"> 
```

这是无法及时完成的​​javascript函数：

```
function setYSession() {
    var YposValue = window.pageYOffset;
    $.get('yPosSession.php?yValue=' + YposValue);
    //alert(YposValue);
    return false;
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-23T02:04:41.703

尝试更改`onclick`以返回函数的结果：

```
echo "<a href='p.php?p=$randString&s=$postCat' onclick='return setYSession();'>"; 
```

或显式返回 false：

```
echo "<a href='p.php?p=$randString&s=$postCat' onclick='setYSession();return false'>"; 
```

鉴于您的函数返回`false`，任何一种方式都将停止默认事件行为，即，它将完全停止链接导航。然后在您的函数中，您可以添加代码以在 Ajax 完成后进行导航：

```
function setYSession() {    
    var YposValue = window.pageYOffset;
    $.get('yPosSession.php?yValue=' + YposValue, function() {
       window.location.href = 'p.php?p=$randString&s=$postCat';
    });

    return false;    
} 
```

理想情况下，特别是因为您似乎在使用 jQuery `$.get()`，我会删除内联 onclick 并执行以下操作：

```
echo "<a href='p.php?p=$randString&s=$postCat' id='myLink'>";

$("#myLink").click(function() {
    var YposValue = window.pageYOffset,
        myHref = this.href;
    $.get('yPosSession.php?yValue=' + YposValue, function() {
       window.location.href = myHref;
    });

    return false;
}); 
```

# android - 在按钮后面放置进度条

> ID：10712536
> 
> 赞同：1
> 
> 时间：2012-05-23T02:01:29.300
> 
> 标签：android, layout, button, progress-bar, android-relativelayout

我有一个`Button`在 a 中定义`RelativeLayout`如下：

```
<Button
        android:id="@+id/search_button"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@id/current_location"
        android:layout_marginLeft="5dp"
        android:layout_marginRight="5dp"
        android:paddingBottom="30dp"
        android:paddingTop="30dp"
        android:text="@string/search" /> 
```

我想在Button后面添加一个ProgressBar，它与Button占据完全相同的空间，这样当按钮被禁用（半透明）时，你可以看到它后面的进度条。我该怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-05T06:44:49.660

为此，我必须先定义按钮`main.xml`，然后是进度条，如下所示：

```
<Button
    android:id="@+id/search_button"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/current_location"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="5dp"
    android:paddingBottom="30dp"
    android:paddingTop="30dp"
    android:text="@string/search" />

<ProgressBar
    android:id="@+id/cooldown_bar"
    style="@android:style/Widget.ProgressBar.Horizontal"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_alignBottom="@id/search_button"
    android:layout_below="@id/current_location"
    android:layout_marginBottom="6dp"
    android:layout_marginLeft="9dp"
    android:layout_marginRight="9dp"
    android:layout_marginTop="1dp"
    android:indeterminate="false"
    android:progressDrawable="@drawable/progress_bar" /> 
```

然后，一旦我初始化了所有的 GUI 组件，我必须将按钮带回到进度条的前面：

```
searchButton.bringToFront(); 
```

## 最终结果

启用时的按钮：

![启用时的按钮](../Images/5fb0d721493bf2463296cca95806888e.png)

使用进度条禁用时的按钮：

![使用进度条禁用时的按钮](../Images/14c2cecadb0cae086f535023769e8865.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T02:44:28.853

将其放在 xml 中相对布局内的按钮之前：

```
 <ProgressBar
    android:id="@+id/descriptive_name"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:layout_below="@id/current_location"
    android:layout_marginLeft="5dp"
    android:layout_marginRight="5dp"
    android:paddingBottom="30dp"
    android:paddingTop="30dp"
     /> 
```

通过使用所有相同的layotu和padding属性，我们可以确保视图将在同一个位置并且大小大致相同（由于wrap_content，高度可能不同）我想如果你把进度条放在布局文件的第一位然后该按钮应出现在顶部。

但是您也可以执行您想要的任何策略，`view.setVisibility(visibility-ness)`只要确保每当您使一个可见时就使另一个不可见。

这样，以防万一我对它们在文件中的位置（我可能是，我刚才没有验证）默认情况下它们如何堆叠以及如果你不想移动进度条的情况有误在文件中的按钮下方，您仍然可以从用户的角度实现相同的目标。

# c - 如何使用 MonoDevelop 进行 C 编码？

> ID：10712546
> 
> 赞同：1
> 
> 时间：2012-05-23T02:03:06.930
> 
> 标签：c, ide, monodevelop

如何在 Windows 上添加对 C 编码的支持？我已经下载了 MonoDevelop 的最新版本，但`file > new solution`我只看到：`C#`、、`IL`和`VB.NET`编程语言，我也找不到它`Tools > Add-in > Gallery > language bindings`。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T21:21:17.757

据我了解，Windows 版本不支持 C。查看[功能列表](http://monodevelop.com/Documentation/Feature_List)

# javascript - 使用表单验证 - 多个错误显示

> ID：10712547
> 
> 赞同：1
> 
> 时间：2012-05-23T02:03:26.853
> 
> 标签：javascript

我是 Javascript 的新手，正在尝试为登录表单实现 fomr 验证，该表单由名字、姓氏和年龄组成。

实际验证工作正常，但当验证都不满足时，它会继续打印两个错误。我想知道是否可以一次只打印一个错误，而不是两个。

```
function Validation() {
// Basic form validation for the login form (ensures first name is entered ensures age      is of required number [5-100])

// Declare the textfields as three seperate variables x, y, z
var x = document.forms["loginform"]["age"].value;
var y = document.forms["loginform"]["firstname"].value;
var z = document.forms["loginform"]["surname"].value;
// Call an error if an input has no entered value (empty)
if (x == null || x == "" || y == null || y == "" || z == null || z == "")
{
    alert("Please enter all required information!");
}
// Call an error if x (age) contains a non-numeral character or if the number is less than 5/more than 100
if (x < 5 || x > 100 || !x.match(/^\d+$/))
{
    alert("Age must be between 5-100 and only contain numerical value(s).");
}
} 
```

任何帮助表示赞赏，在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T02:08:06.260

根据我的评论：

添加其他：`else if (x < 5 || x > 100 || !x.match(/^\d+$/))`

# linux - GNUWin32 和 cygwin 的区别

> ID：10712550
> 
> 赞同：28
> 
> 时间：2012-05-23T02:03:50.143
> 
> 标签：linux, cygwin, msysgit, msys, gnuwin32

我似乎无法理解两者之间的区别。

似乎一个 ( `GNUWin32`) 是窗口顶部的一层 (like `MSYS`) 而
另一个 (cygwin) 是别的东西 (?)

这意味着什么？我什么时候会使用其中一个？他们都适合同一件事吗？

我想主要将它用于 git，但想保持我的选择开放，以便学习和做所有事情 *nixy。

还有其他工具吗？会`msysgit`更适合这个吗？
是否有任何资源可以详尽地了解所有这些 *nix 平台的差异？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-23T03:16:56.903

[Cygwin](https://www.cygwin.com/)是一个库，它致力于使 UNIX 程序能够在 Windows 系统上编译和运行，而只需最少的修改或无需修改，以及使用该库编译的一整套打包的 UNIX 工具和应用程序。它几乎是一个完整的 Windows 包装器。它包括一个 X 服务器和大量可以在 Linux 发行版中找到的程序。它非常适合想要在 Windows 中学习或使用 UNIX 命令行的人。

[MSYS主要是使用](http://www.mingw.org/wiki/msys)[MinGW](http://www.mingw.org/)编译器在 Windows 系统上构建 GNU 样式包（带有`configure`等）所必需的 UNIX 工具的一个端口。它使用修改后的 Cygwin 库的变体以牺牲一些兼容性来提高效率，并且对 Windows 更友好。

[GnuWin32](http://gnuwin32.sourceforge.net/)只是将一些 GNU 工具移植到 Windows 上。与 MSYS 一样，它使用`msvcrt.dll`, 以及一个附加库来提供一些 UNIX 兼容性功能。它的主要目的似乎是允许 Windows 程序和批处理文件直接使用某些 GNU 程序和库。

在大多数情况下，它们都在 Windows 上提供 UNIX 程序，但有许多细微的差别，包括：

*   意图。Cygwin 适用于希望在其 Windows 操作系统上使用 UNIX 的人。MSYS 适用于想要使用 GNU/UNIX 构建工具构建 Windows 程序的人。GnuWin32 是单个 GNU 程序和库到 Windows 的端口。
*   文本文件，尤其是行尾。Cygwin 允许您使用 CR/LF 或 LF。MSYS 期望 LF 行结束。GnuWin32 程序需要 CR/LF 行结尾。
*   提供的程序。特别是，Cygwin 有更多的包，而 GnuWin32 不提供任何 shell。

至于 git，它在 Cygwin 中可用——这个版本可以在 Windows 目录中使用（可在 下访问`/cygdrive`）。此外，如前所述，还有[msysgit](https://github.com/msysgit/msysgit)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-11-18T10:23:28.133

迈克尔·斯莱德是正确的。我想谈谈典型的使用环境。

出于实际原因，我使用 gnuwin 作为仅与 POSIX 环境远程相关的东西的轻量级后端，而 cygwin 更像是一个成熟的 POSIX，甚至是一个非常 gunixish 的环境。

此外，在安装大量工具时 gnuwin 往往会变得臃肿，因为可执行文件通常使用静态链接库。另一方面，Cygwin 提供了大量的动态库和相当小的可执行文件。因此，如果您只需要几个可执行文件，那么 gnuwin 需要的资源更少。如果你需要一个复杂的环境，那么 cygwin 会更有效率。

gnuwin 也经常有点过时，提供的软件很少，没有包/更新管理器。这是一个基本的shell环境。没有 ssh，没有 gcc，vim，没有 perl，没有 sql - 你可以从其他来源获得这些，但它们如何合作很难预测。Cygwin 修复了上述所有问题。

换句话说，gnuwin 非常适合偶尔安装，只需将 du、find 和 sort 放入您的 $PATH 中。做一些真正的 POSIX 工作使用 cygwin。

我曾经有第二个 Linux 工作站，然后在我的 Windows 系统旁边运行了一个 Linux VM。Cygwin 使它们过时了。与专用计算机或虚拟机相比，它可以处理大量事情，同时节省大量资源。

# git - Git：将符号链接提交到文件夹

> ID：10712552
> 
> 赞同：6
> 
> 时间：2012-05-23T02:04:01.030
> 
> 标签：git

向索引添加指向目录的符号链接时，我收到以下错误消息：

```
fatal: pathspec 'XXX' did not match any files 
```

该文件在那里，它确实是一个符号链接，甚至实际上是存储库内的一个目录。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T02:04:01.157

至少在我的机器（Mac OS 10.7）上，解决方案是让符号链接实际上指向一些真实的内容。换句话说，在存储库中设置符号链接的方式是“损坏”（这是故意的：在构建过程中，该符号链接最终会在最终产品中激活）。所以我创建了一个符号链接所期望的目录，能够在没有错误的情况下提交，然后可以删除该目录。

# git - gitignore 目录下所有扩展名文件

> ID：10712555
> 
> 赞同：258
> 
> 时间：2012-05-23T02:04:12.140
> 
> 标签：git, gitignore

有没有办法忽略目录中某个类型的所有文件？

`**`显然对 git 毫无意义，所以这不起作用：

```
/public/static/**/*.js 
```

这个想法是匹配任意嵌套文件夹。

* * *

## 回答 #1

> 赞同：261
> 
> 时间：2014-01-15T20:23:48.827

根据[文档](http://git-scm.com/docs/gitignore#_pattern_format)，该语法似乎`**`受自`git`版本支持。`1.8.2.1`

> `**`与完整路径名匹配的模式中的两个连续星号 (" ") 可能具有特殊含义：
> 
> *   前导“ `**`”后跟斜杠表示在所有目录中都匹配。例如，“ ”在任何地方`**/foo`匹配文件或目录“ `foo`”，与模式“ `foo`”相同。" `**/foo/bar`" 匹配文件或目录 " `bar`" 直接在目录 " `foo`" 下的任何地方。
>     
>     
> *   尾随的 " `/**`" 匹配里面的所有内容。例如，“ `abc/**`”匹配目录“ `abc`”内的所有文件，相对于`.gitignore`文件的位置，具有无限深度。
>     
>     
> *   斜杠后跟两个连续的星号，然后斜杠匹配零个或多个目录。例如，“ `a/**/b`”匹配“ `a/b`”、“ `a/x/b`”、“ `a/x/y/b`”等。
>     
>     
> *   其他连续的星号被认为是无效的。

* * *

## 回答 #2

> 赞同：153
> 
> 时间：2012-05-23T02:27:46.497

从未尝试过，但`git help ignore`建议如果你放一个`.gitignore`with `*.js`in `/public/static`，它会做你想做的事。

注意：请务必在下面查看 Joeys 的回答：如果您想忽略特定子目录中的文件，那么本地 .gitignore 是正确的解决方案（本地性很好）。但是，如果您需要将相同的模式应用于整个 repo，那么 ** 解决方案会更好。

* * *

## 回答 #3

> 赞同：81
> 
> 时间：2012-05-23T05:59:44.250

更新：看看[@Joey 的回答](https://stackoverflow.com/a/21147445/1164143)：Git 现在支持`**`模式中的语法。两种方法都应该可以正常工作。

* * *

gitignore [(5) 手册页](http://linux.die.net/man/5/gitignore)指出：

> 从与路径相同的目录或任何父目录中的 .gitignore 文件读取的模式，较高级别文件（直到工作树的顶层）中的模式被低级别文件中的模式覆盖到目录包含文件。

这意味着`.gitignore`您的仓库的任何给定目录中的文件中的模式都会影响**该目录**和**所有子目录**。

您提供的模式

```
/public/static/**/*.js 
```

不太正确，首先是因为（正如您正确指出的）`**`Git 不使用该语法。此外，该模式的前导`/`锚定到路径名的开头。（因此，`/public/static/*.js`将匹配`/public/static/foo.js`但**不** `/public/static/foo/bar.js`匹配。）~~删除前导`/`也不起作用，匹配路径如`public/static/foo.js`和`foo/public/static/bar.js`。~~编辑：仅仅删除前导斜杠也不起作用——因为该模式仍然包含一个斜杠，它被 Git 视为一个普通的、非递归的 shell glob（感谢[@Joey Hoer](https://stackoverflow.com/users/1282361/joey-hoer)指出这一点）。

正如@ptyx 建议的那样，您需要做的是创建文件`<repo>/public/static/.gitignore`并仅包含以下模式：

```
*.js 
```

没有前导`/`，因此它将匹配路径的任何部分，并且该模式只会应用于`/public/static`目录及其子目录中的文件。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2020-08-23T22:08:32.123

我尝试`.gitignore`在我的 vscode 中打开文件，`windows 10`. 在那里你可以看到，一些以前添加的忽略文件（如果有的话）。

要创建一个新规则以忽略具有`(.js)`扩展名的文件，请附加文件的扩展名，如下所示：

```
*.js 
```

这将忽略存储库`.js`中的所有文件。`git`

要从特定目录中排除某些类型的文件，您可以添加以下内容：

```
**/foo/*.js 
```

这将忽略仅 /foo/ 目录中的所有 .js 文件。

详细学习可以访问：[about git-ignore](https://www.atlassian.com/git/tutorials/saving-changes/gitignore)

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-05-30T00:38:31.407

要忽略未跟踪的文件，只需转到 .git/info/exclude。排除是具有忽略扩展名或文件列表的文件。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2018-06-28T11:46:27.770

我相信最简单的解决方案是使用`find`. 我不喜欢`.gitignore`在子目录中有多个闲逛，我更喜欢管理一个独特的顶级`.gitignore`. 为此，您只需将找到的文件附加到您的`.gitignore`. 假设那`/public/static/`是你的项目/git home，我会使用类似的东西：

```
find . -type f -name *.js | cut -c 3- >> .gitignore 
```

我发现删除`./`开头的 git 通常需要了解哪些文件要避免。因此`cut -c 3-`.

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-08-19T09:23:50.857

除了其他答案之外，几乎没有其他提示（如果您很幸运并且问题是由于其他原因引起的，这可能会起作用）：

1.  确保你忽略代码中大于 100mb 的文件
2.  只需重新启动 git 工作流程。删除本地 .git 文件夹并再次 git init 并重试推送到 github。

# android - MonoTouch+MonoDroid：带图像的常用业务对象

> ID：10712556
> 
> 赞同：1
> 
> 时间：2012-05-23T02:04:16.527
> 
> 标签：android, ios, mono, xamarin.ios, xamarin.android

我正在构建一个项目，该项目同时拥有`Android`和`iOS`客户`MonoTouch`和`MonoDroid`。公共业务层项目包含公共领域实体。

其中一个需要存储图像、名称和年龄。图像未下载。

是否可以创建一个通用对象来保存 PNG 或 JPG 的实际数据，但它在某种程度上都适用于`iOS`和`Android`？

```
///Simplified customer
class Customer {
   public Image???;
   public string Name;
   public Int Age;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T05:50:23.770

选项：

1.  将图像表示为 byte[] 或 MemoryStream/Stream
2.  使用本机平台特定代码需要部分类并链接 Customer.cs 中的公共类 - 通过项目链接我将此方法称为 split-n-link 或 link-n-split

    公共部分类客户{公共字符串名称；公共国际年龄；}

单点触控项目中单点触控的增量类

```
public partial class Customer {
    public UIImage;
} 
```

m4a 项目中用于 android 的单声道的 delta 类

```
public partial class Customer {
    public ImageView;
} 
```

因此，每个项目将包含 Customer.cs 一个原始/源代码和其他链接，如果处理 Windows Phone，则取决于偏好或共同特征分母（目前它具有最小的功能集 - 更好的是限制性更强） . 除了 main/original/source Customer.cs 文件之外，还有 2 个（如果是 WP，则为 3 个）具有平台特定内容的增量。请记住，部分类是“附加的”，这意味着您可以在不同的 cs 文件中添加属性并应用它们，因此在这个 delta 类中，可以添加特定于平台的属性，并在需要时启用诸如绑定 iOS 广告/或 Android 之类的东西。从 Holisticware 经验（Visual Studio 为中心 80%+，Mac 上 20% 或更少）源项目是 Mono for Android，但它可能是反向的......

使用 link-n-spilt 基本上以 POCO + delta 结尾，并且此 POCO 可用于定位桌面平台（WF、WPF），其中一切都更容易：调试、单元测试等。

并且每个项目都使用该平台的配置进行编译/构建的优势 - 所以来自 Xamarin 的 ig 家伙想出了一些其他的好主意来构建大小优化，这不应该影响项目 - 重新编译并开始！

HTH 梅尔

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T06:54:08.743

我通过使用接口或抽象基类以及在运行时注入的具体实现来进行这种类型的共享。

例如，我可能会放置一些接口，例如：

```
 public interface IImage
 {
      int Height { get; }
      int Width { get; }
 }

 public interface IImageTools
 {
      IImage Load(string assetPath);
      void SaveToJPEG(IImage image, string savePath, int quality);
      IImage DuplicateAndResize(IImage original, int newHeight, int newWidth);
 } 
```

然后，我的业务模型将有一些方法来获取对 IImageTools 的引用 - 例如，它可能被注入到构造函数中，或者它可能从某个容器中可用（例如 IoC 单例）

这允许我在运行时为 Droid、Touch、WP7、WinRT 或 NUnit 注入单独的本机实现。

在 UI 项目中，当您实际上需要在 UI 上显示图像时，我通常会将 IImage 转换为本机实现，例如 TouchImage - 然后它将包含一个获取底层 UIImage 的方法

* * *

例如，不是您的图像要求，但这是我为相机捕获操作的图像所做的：[https ://github.com/slodge/MvvmCross/tree/vnext/Cirrious/Plugins/PictureChooser](https://github.com/slodge/MvvmCross/tree/vnext/Cirrious/Plugins/PictureChooser)

# linux - 用 $ 计算退出代码？在壳里

> ID：10712564
> 
> 赞同：2
> 
> 时间：2012-05-23T02:05:57.443
> 
> 标签：linux, shell

你们能帮忙给出用于生成$的算法吗？从程序中的退出代码在shell中？例如，

```
 $? is 1 for exit(1);
  $? is 255 for exit(-1); 
```

所以我可以从 $?

```
 $? is 1 => exit code is 1
  $? is 255 => exit code is -1 
```

对于一些特别的东西，

```
 $? is 0 for exit(256);
  $? is 1 for exit(257); 
```

任何人都可以在shell中给出用于生成$的算法吗？退出代码，这样我就可以**通过观察 $ 知道退出代码？**执行命令后。

非常感谢。

编辑：为了回答下面的问题，我添加了这个例子。

```
----a.c----
1 #include <stdlib.h>
2 int main()
3 {
4   exit(-1);
5 }
ning@m:~/work/02_test/ctest> gcc a.c
ning@m:~/work/02_test/ctest> ./a.out 
ning@m:~/work/02_test/ctest> echo $?
255
ning@m:~/work/02_test/ctest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T02:13:48.050

使用 bash，$? 是最后一个命令的退出代码。运行一个 shell 脚本。

```
#!/bin/bash
exit 113 
```

然后`echo $?`显示 113。有关详细信息，请参阅[http://tldp.org/LDP/abs/html/exit-status.html](http://tldp.org/LDP/abs/html/exit-status.html)

对于 BASH，有一些[常见的退出代码](http://www.linuxtopia.org/online_books/advanced_bash_scripting_guide/exitcodes.html)。

返回值只是一个 8bit Int。退出代码 255 表示超出范围，因此为 -1。您看到 256->0 和 257->1 的原因是它正在环绕。基本上退出值取模 256。

所有这一切都适用于 Bash 或 C

# javascript - 使用 openlayers 和谷歌地图，鼠标光标和地图上的点不是内联的

> ID：10712571
> 
> 赞同：1
> 
> 时间：2012-05-23T02:06:51.703
> 
> 标签：javascript, maps, openlayers, wms

我正在尝试实现示例[http://openlayers.org/dev/examples/drag-feature.html](http://openlayers.org/dev/examples/drag-feature.html)。

当我用谷歌地图实现这个时，我有一个奇怪的错误：鼠标指针和地图上的点不在同一个地方。

现在，如果我更改以粗体显示的行： map.addLayers([gmap,vectors]); 到 map.addLayers([wms,vectors]); 一切正常。（换句话说，我不使用谷歌地图）。

有人可以告诉我发生了什么吗？

提前致谢。

这是我的页面和代码：

```
 var map;
   var vectors;
   function initialize() {
       // Create the map object
       map = new OpenLayers.Map('map');
        //Create a Google layer
       var gmap = new OpenLayers.Layer.Google(
           "Google Streets", // the default
           {numZoomLevels: 20}
       );
      // if i use this instead of gmap then everything works.
       var wms = new OpenLayers.Layer.WMS( "OpenLayers WMS",
                "http://vmap0.tiles.osgeo.org/wms/vmap0?", {layers: 'basic'});
       var renderer=OpenLayers.Util.getParameters(window.location.href).renderer;
       renderer=(renderer) ? [renderer] : OpenLayers.Layer.Vector.prototype.renderers;

       vectors= new OpenLayers.Layer.Vector("Vector Layer",{
           renderers:renderer
       });

       map.addLayers([gmap,vectors]);

       map.addControl(new OpenLayers.Control.LayerSwitcher());
       map.addControl(new OpenLayers.Control.MousePosition());

       var control=new OpenLayers.Control.DrawFeature(vectors,OpenLayers.Handler.Path);
       map.addControl(control);
       control.activate();
       // Zoom to Vancouver, BC
       map.setCenter(new OpenLayers.LonLat(-123.12, 49.28), 13);         
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:48:24.657

我不太确定你的意思。一切对我来说都很好。请参阅我的[示例](http://gis-lab.info/share/DR/sandbox/drag.html)与您的代码。

# enums - Svcutil.exe - 来自 wsdl 的枚举未在 c-sharp 客户端中正确创建

> ID：10712574
> 
> 赞同：0
> 
> 时间：2012-05-23T02:07:04.603
> 
> 标签：enums, svcutil.exe

我有一个客户端提供的包含枚举的 wsdl 文件：

```
<xsd:simpleType name="OurEnum">
<xsd:annotation>
  <xsd:appinfo>
    <i:Base i:namespace="http://x.com/y/structures/2.0" i:name="Object"/>
  </xsd:appinfo>
</xsd:annotation>
<xsd:restriction base="xsd:token">
  <xsd:enumeration value="0"/>
  <xsd:enumeration value="1"/>
  <xsd:enumeration value="2"/>
  <xsd:enumeration value="3"/>
  <xsd:enumeration value="10"/>
</xsd:restriction> 
```

使用 Svcutil 创建 WCF 客户端，枚举的代码如下所示：

```
/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Xml", "4.0.30319.233")]
[System.SerializableAttribute()]
[System.Xml.Serialization.XmlTypeAttribute(Namespace = "http://x.com/y/z/2.0")]
public enum OurEnum
{

    /// <remarks/>
    [System.Xml.Serialization.XmlEnumAttribute("0")]
    Item0,

    /// <remarks/>
    [System.Xml.Serialization.XmlEnumAttribute("1")]
    Item1,

    /// <remarks/>
    [System.Xml.Serialization.XmlEnumAttribute("10")]
    Item10,

    /// <remarks/>
    [System.Xml.Serialization.XmlEnumAttribute("2")]
    Item2,

    /// <remarks/>
    [System.Xml.Serialization.XmlEnumAttribute("3")]
    Item3,

 } 
```

将枚举值创建为 Item0、Item1、Item10 非常烦人。应该如何使用 Svcutil 以便生成的代码如下所示：

```
/// <remarks/>
[System.CodeDom.Compiler.GeneratedCodeAttribute("System.Xml", "4.0.30319.233")]
[System.SerializableAttribute()]
[System.Xml.Serialization.XmlTypeAttribute(Namespace = "http://x.com/y/z/2.0")]
public enum OurEnum
{

    /// <remarks/>
    [System.Xml.Serialization.XmlEnumAttribute("0")]
    0,

    /// <remarks/>
    [System.Xml.Serialization.XmlEnumAttribute("1")]
    1,

    /// <remarks/>
    [System.Xml.Serialization.XmlEnumAttribute("10")]
    10,

    /// <remarks/>
    [System.Xml.Serialization.XmlEnumAttribute("2")]
    2,

    /// <remarks/>
    [System.Xml.Serialization.XmlEnumAttribute("3")]
    3,
 } 
```

我已经尝试对 Svcutil 使用以下序列化选项：

"/serializer:Auto" "/serializer:DataContractSerializer (失败严重)" "/serializer:XmlSerializer" "/importXmlTypes"

但结果保持不变。

我还尝试使用 Xsd.exe 从 wsdl 中引用的 xsd 创建 c-sharp 代码文件，但结果仍然相同。

有没有其他免费工具可以做到预期？

非常感谢任何见解！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T21:44:52.217

我已经解决了我的问题。这个想法是从[这里](https://stackoverflow.com/questions/3047125/retrieve-enum-value-based-on-xmlenumattribute-name-value/10728254#10728254)获得的，并表示应有的感谢和问候。

实际的问题是当给定值为 10 时如何获取 Item10。从上面链接中引用的解决方案中得到启发，我想出了以下方法，当传递 XmlEnumAttribute 中包含的值时，将返回枚举值：

```
private static T GetEnumValueFromXmlAttrName<T>(string attribVal)
    {
        T val = default(T);

        if (typeof(T).BaseType.FullName.Equals("System.Enum"))
        {
            FieldInfo[] fields = typeof(T).GetFields();

            foreach (FieldInfo field in fields)
            {
                object[] attribs = field.GetCustomAttributes(typeof(XmlEnumAttribute), false);

                foreach (object attr in attribs)
                {
                    if ((attr as XmlEnumAttribute).Name.Equals(attribVal))
                    {
                        val = (T)field.GetValue(null);
                        return val;
                    }
                }
            }
        }
        else
            throw new Exception("The supplied type is not an Enum.");

        return val;
    } 
```

希望这可以帮助！

# java - 使用 Object[] 方法返回数组

> ID：10712575
> 
> 赞同：0
> 
> 时间：2012-05-23T02:07:10.080
> 
> 标签：java, jcombobox

我有一个方法应该用从我的数据库中收集的数据填充 JComboBox，但我见过的能够从数据库中获取信息的唯一方法是在一个数组中。在完全编译我的程序之前，我需要将数组转换为 object[]。有没有办法真正做到这一点？或者这将是一个漫长的过程？我的代码如下。

```
public Object[] getId() {
  Connection con;
  Statement stmt;
  ResultSet rs;

  //Object[] returnId;
  Array returnId;
  try {
    Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
    con = DriverManager.getConnection("jdbc:odbc:collegesys","root","0blivi0n");

    stmt = con.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_READ_ONLY);
    rs = stmt.executeQuery("SELECT `id` FROM main");

    while(rs.next()) {
      returnId = rs.getArray("id");
    }

    con.close();
  } catch(Exception e) {
    e.printStackTrace();
  }
  return returnId.toObject();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T02:09:09.397

~~试试这个：~~

 ~~```
return (Object[]) returnId.getArray(); 
```~~  ~~我收集到您想`"id"`从 table 的所有行中收集列的值`main`。您的代码不会这样做，因为它是有组织的。试试这个：

```
public Object[] getId() {
  Connection con;
  Statement stmt;
  ResultSet rs;

  //Object[] returnId;
  ArrayList<Object> returnId = new ArrayList<Object>();
  try {
    Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
    con = DriverManager.getConnection("jdbc:odbc:collegesys","root","0blivi0n");

    stmt = con.createStatement(ResultSet.TYPE_SCROLL_SENSITIVE,ResultSet.CONCUR_READ_ONLY);
    rs = stmt.executeQuery("SELECT `id` FROM main");

    while(rs.next()) {
      returnId.add(rs.getObject("id"));
    }

    con.close();
  } catch(Exception e) {
    e.printStackTrace();
  }
  return returnId.toArray(new Object[returnId.size()]);
} 
```

当然，如果您对 column 中的数据类型有更好的了解`id`，您可以更具体地了解返回类型以及获取值的方式（例如，`String[]`and`rs.getString("id")`或`Integer[]`and `rs.getInt("id")`）。~~

# php - 考虑 PHP 中的日期计算持续时间

> ID：10712577
> 
> 赞同：3
> 
> 时间：2012-05-23T02:07:21.060
> 
> 标签：php

考虑到 PHP 中的日期戳，我如何计算持续时间？我在日期之间使用的日期格式是“Ymd H:i:s”，

我的工作代码只能计算时间之间的持续时间而不考虑日期。

下面是我的代码：

```
$assigned_time = "2012-05-21 22:02:00";
$completed_time= "2012-05-22 05:02:00";   

function hmsDiff ($assigned_time, $completed_time) {
    $assigned_seconds = hmsToSeconds($assigned_time);
    $completed_seconds = hmsToSeconds($completed_time);

    $remaining_seconds = $assigned_seconds - $completed_seconds;

    return secondsToHMS($remaining_seconds);
}
function hmsToSeconds ($hms) {
    $total_seconds = 0;
    list($hours, $minutes, $seconds) = explode(":", $hms);
    $total_seconds += $hours * 60 * 60;
    $total_seconds += $minutes * 60;
    $total_seconds += $seconds;

    return $total_seconds;
}

 function secondsToHMS ($seconds) {
    $minutes = (int)($seconds / 60); 
    $seconds = $seconds % 60;
    $hours = (int)($minutes / 60); 
    $minutes = $minutes % 60;

    return  sprintf("%02d", abs($hours)) . ":" . 
        sprintf("%02d", abs($minutes)) . ":" . 
        sprintf("%02d", abs($seconds));

 } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T02:23:03.067

DateTime 有一个“diff”方法，它返回一个 Interval 对象。间隔对象有一个[“格式”方法，允许您自定义输出](http://php.net/dateinterval.format)。

```
#!/usr/bin/env php
<?php

$assigned_time = "2012-05-21 22:02:00";
$completed_time= "2012-05-22 05:02:00";   

$d1 = new DateTime($assigned_time);
$d2 = new DateTime($completed_time);
$interval = $d2->diff($d1);

echo $interval->format('%d days, %H hours, %I minutes, %S seconds'); 
```

**注意**：如果您没有使用 5.3.0+，这里有一个很好的答案：[https](https://stackoverflow.com/a/676828/128346) ://stackoverflow.com/a/676828/128346 。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T02:14:39.483

不完全知道你想要什么，比如：

```
// prevents php error
date_default_timezone_set ( 'US/Eastern' );
// convert to time in seconds
$assigned_seconds = strtotime ( $assigned_time );
$completed_seconds = strtotime ( $completed_time );

$duration = $completed_seconds - $assigned_seconds;

// j gives days
$time = date ( 'j g:i:s', $duration ); 
```

# java - Java - 传递接口类型的ArrayList

> ID：10712580
> 
> 赞同：18
> 
> 时间：2012-05-23T02:07:46.100
> 
> 标签：java, interface, arraylist

我有一个可损坏的接口，如下所示

```
public interface Damageable {
    public void handleCollision(float impulse);
} 
```

实现此接口的类 BaseObject

```
public class BaseObject implements Damageable 
```

现在在第三类中，我有一个 BaseObject 类型的 ArrayList

```
public class ObjectManager {    
    public ArrayList<BaseObject> bodies; 
```

我想要做的是将 ArrayList 主体传递给另一个接受 ArrayList 的类的方法

```
public CollisionManager( ArrayList<Damageable> _bodies) {
        bodies = _bodies;
} 
```

Java 不允许我在 body 类型为 ArrayList 且 BaseObject 实现 Damageable 的情况下执行 new CollisionManager(bodies)

我试过铸造。说不能从 `ArrayList<BaseObject>`ArrayList 转换为 ArrayList 也尝试过使用`Class<? extends Damageable>`，但后来我无法调用接口 Damageable 中声明的方法。如何传递 ArrayList？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-05-23T02:15:15.020

你必须明确你的泛型。因此，您必须通知编译器您的泛型类型不必*是*`Damagable`本身，而是可以*扩展* `Damagable`：

```
public CollisionManager(ArrayList<? extends Damagable> bodies) { 
```

* * *

顺便说一句，请注意我将您的变量更改为`bodies`而不是`_bodies`. 下划线不是标准 Java 编码约定的一部分。

* * *

^(根据OP的评论进行编辑)

假设您有一个*名为*`Damagable`. 告诉编译器`<? extends Damagable>`说它不必是`Damagable`. 类型*extend*没关系。*_* 否则，编译器假定您有一个***完全正确***的. *`Damagable``Damagable`*

 **当您将其视为接口时，它没有多大意义`Damagable`，因为您不会有`Damagable`. 但它们的工作方式基本相同。

您必须记住，您使用的是 Java*类型*，而不是类。Java 的类型语法和结构不如它的类结构健壮。没有关于`implements`类型的概念。

* * *

^(最后一轮编辑)

最后，我应该注意，通常最好为方法/构造函数参数和方法返回类型使用接口。这允许您和使用您的方法的人使用您喜欢的任何实现，并允许您随意更改您的实现。

因此，通过这些修订，您将拥有：

```
public CollisionManager(List<? extends Damagable> bodies) { 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T02:12:56.003

试试`ArrayList<? extends Damageable > _bodies`。

这表示您想要一个 ArrayList 包含一个`Class`可以扩展的（很好的实现）`Damageable`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T02:20:35.110

其他人无疑会从 Java 语法的角度指出技术解决方案。

我只想提一些您可能应该考虑的设计问题：

*   你的 BaseObject 实现了 Damageable。这意味着所有 BaseObject 都是可损坏的。那么为什么不做一个`CollisionManager(ArrayList<BaseObject>)`呢？除非您打算在其他地方使用 Damageable（即有些东西是 Damageable 但不是 BaseObjects），否则这似乎是一种不必要的抽象。
*   通常对于游戏/模拟中的碰撞检测，您可能希望使用空间数据结构进行碰撞检测（例如八叉树、四叉树或 AABB 树）而不是 ArrayList。在 ArrayList 中搜索冲突是一个 O(n^2) 算法。如果您有很多活动对象，这将成为一个大问题。
*   可损坏似乎是一个坏名字，因为该功能与碰撞检测而不是损坏有关 - Collidable 不是更好吗？**

# php - 变量变量，我的数组的关键

> ID：10712589
> 
> 赞同：2
> 
> 时间：2012-05-23T02:10:04.540
> 
> 标签：php, arrays, variable-variables

我在[这里](http://php.net/manual/en/language.variables.variable.php)找到了一个示例，它显示了这样的示例：

```
<?php 
for ($i = 1; $i <= 5; $i++) {
  ${a.$i} = "value";
}    

echo "$a1, $a2, $a3, $a4, $a5";
//Output is value, value, value, value, value
?> 
```

是否可以修改它以像这样工作：

```
for($x=1; $x<11; $x++)
{
    ${title.$x} = $row['${title.$x}'];
    ${brief.$x} = $row['${brief.$x}'];
    ${cost.$x} = $row['${cost.$x}'];

    echo "<tr>
               <td>${title.$x}</td>
          </tr>
          <tr>
               <td>${brief.$x}</td>
          </tr>
         ";
 } 
```

$row 数组来自 mysql 查询。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T02:15:40.947

```
for($x=1; $x<11; $x++)
{
    ${'title'.$x} = $row['title'.$x]; // will be like: $title1 = $row['title1']; (if you mean that)
    ${'brief'.$x} = $row['brief'.$x];
    ${'cost'.$x} = $row['cost'.$x];

    echo "<tr>
               <td>${'title'.$x}</td>
          </tr>
          <tr>
               <td>${'brief'.$x}</td>
          </tr>
         ";
 } 
```

如果您的变量名与 中的键名相同，则`$row`可以使用`extract($row)`来获取所需的所有变量。

但在你的情况下，我认为`$row`直接使用数组并不是坏主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T02:15:51.950

只要您可以将所有内容转换`$row`为变量，最简单的方法是使用 PHP 的[extract()](http://php.net/manual/en/function.extract.php)（将数组转换为变量），只需编写`extract($row);`

# python - 在非反应器线程中扭曲传输。写入

> ID：10712590
> 
> 赞同：4
> 
> 时间：2012-05-23T02:10:34.077
> 
> 标签：python, twisted, pyqt4, reactor

我正在设计一个 gui 应用程序作为我有 3 个类的服务器的客户端

一个用于扭曲协议的类，另一个用于工厂，第三个用于自身的 pyqt 线程。我如何从 pyqt 线程发送数据，例如，如果单击按钮，我如何使用当前的扭曲连接发送命令，这是我的代码的副本

```
from OpenSSL import SSL;import sys
from twisted.internet.protocol import ClientFactory
from twisted.internet import ssl, protocol
from PyQt4 import QtCore, QtGui
from gui import Ui_clientgui

class clientgui(QtGui.QMainWindow):
    def __init__(self, parent=None):
        QtGui.QWidget.__init__(self, parent)
        self.ui = Ui_clientgui()
        self.ui.setupUi(self)

    def closeEvent(self, e):
        try:reactor.callFromThread(reactor.stop)
        except:pass

class Client(protocol.Protocol):
    def connectionMade(self):
        global server_options
        server_options['connection'] = True

    def send(self,data):
        self.transport.write(data)

    def connectionLost(self, reason):
        server_options['connection'] = False

    def dataReceived(self, line):
        print "receive:", line

class ClientFactory(ClientFactory):
    protocol = Client
    def clientConnectionFailed(self, connector, reason):
        print 'connection failed'
        try:reactor.stop()
        except:pass

if __name__ == '__main__':
    app = QtGui.QApplication([])
    import qt4reactor
    qt4reactor.install()
    from twisted.internet import reactor
    factory = ClientFactory()
    reactor.connectSSL('localhost', 8080, factory, ssl.ClientContextFactory())
    application = clientgui(reactor)
    application.show()
    reactor.runReturn()
    sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T16:45:42.377

如果您使用[qt4reactor](https://launchpad.net/qt4reactor)，则根本不需要处理多个线程；Twisted 将运行在 QT 线程中，它们可以自由地接触彼此的数据结构。

但是，如果您想使用线程执行此操作，则您的示例已经包含解决方案：`reactor.callFromThread`. （我建议这样做`callFromThread(client.send)`而不是`callFromThread(transport.write)`因为它`Client`是 a `Protocol`，因此更多地存在于 Twisted 的宇宙中而不是 Qt 的宇宙中。

# ruby-on-rails - Ruby on Rails：nil:NilClass 的未定义方法“注释”

> ID：10712591
> 
> 赞同：1
> 
> 时间：2012-05-23T02:10:40.123
> 
> 标签：ruby-on-rails

我正在与用户一起开发一个应用程序，他们每个人的页面上都显示了一组微博。我正在尝试为这些微博添加评论。每次访问 localhost:3000/users/(user_id_#)

我收到此错误：nil:NilClass 的未定义方法“注释”

仅当用户要显示微博时才会出现此错误。否则它只会显示他们的空白页。错误来自此视图 app/views/users/show.html.erb 此视图呈现此部分，错误发生在第 13 行。

```
<li>
  <span class="content"><%= micropost.content %></span>
  <span class="timestamp">
    Posted <%= time_ago_in_words(micropost.created_at) %> ago.
  </span>
  <% if current_user?(micropost.user) %>
    <%= link_to "delete", micropost, method:  :delete,
                                     confirm: "You sure?",
                                     title:   micropost.content %>
  <% end %>

  <h2>Comments</h2>
  <% micropost.comments.each do |comment| %>
    <p>
      <b>Commenter:</b>
      <%= comment.commenter %>
    </p>

    <p>
      <b>Comment:</b>
      <%= comment.body %>
    </p>
  <% end %>

  <h3>Add a comment:</h3>
  <%= form_for([micropost, micropost.comments.build]) do |f| %>
    <div class="field">
      <%= f.label :commenter %><br />
      <%= f.text_field :commenter %>
    </div>
    <div class="field">
      <%= f.label :body %><br />
      <%= f.text_area :body %>
    </div>
    <div class="actions">
      <%= f.submit %>
    </div>
  <% end %>
</li> 
```

这是我的comment.rb 文件

```
class Comment < ActiveRecord::Base
  belongs_to :micropost
  attr_accessible :body, :user_id

end 
```

和我的 micropost.rb 文件

```
class Micropost < ActiveRecord::Base
  attr_accessible :content
  belongs_to :user
  has_many :comments

  validates :content, presence: true, length: { maximum: 140 }
  validates :user_id, presence: true
end 
```

和我的comments_controller.rb

```
class CommentsController < ApplicationController
  def create
    @micropost = Micropost.find(params[:micropost_id])
    @comment = @micropost.comments.create(params[:comment])
    redirect_to micropost_path(@micropost)
  end

end 
```

最后是我的 microposts_controller.rb

```
class MicropostsController < ApplicationController
  before_filter :signed_in_user
  before_filter :correct_user,   only: :destroy

  def create
    @micropost = current_user.microposts.build(params[:micropost])
    if @micropost.save
      flash[:success] = "Micropost created!"
      redirect_to root_path
    else
      @feed_items = []
      render 'static_pages/home'
    end
  end

  def new
    @micropost = Micropost.new(params[:micropost])
  end

  def show

    @micropost = Micropost.find(params[:id])

  end

  def destroy
    @micropost.destroy
    redirect_back_or root_path
  end

  private

    def correct_user
      @micropost = current_user.microposts.find_by_id(params[:id])
      redirect_to root_path if @micropost.nil?
    end
end

    class CommentsController < ApplicationController
      def create
        @micropost = Micropost.find(params[:micropost_id])
        @comment = @micropost.comments.create(params[:comment])
        redirect_to micropost_path(@micropost)
      end

    end 
```

这里也是 users_controller.rb

```
class UsersController < ApplicationController
  before_filter :signed_in_user, 
                only: [:index, :edit, :update, :destroy, :following, :followers]
  before_filter :correct_user,   only: [:edit, :update]
  before_filter :admin_user,     only: :destroy

  def index
    @users = User.paginate(page: params[:page])
  end

  def show
    @user = User.find(params[:id])
    @micropost = @user.microposts.first
    @comment = Comment.new
  end

  def new
    @user = User.new
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      flash[:success] = "Welcome to the Sample App!"
      redirect_to @user
    else
      render 'new'
    end
  end

  def edit
  end

  def update
    if @user.update_attributes(params[:user])
      flash[:success] = "Profile updated"
      sign_in @user
      redirect_to @user
    else
      render 'edit'
    end
  end

  def destroy
    User.find(params[:id]).destroy
    flash[:success] = "User destroyed."
    redirect_to users_path
  end

  def following
    @title = "Following"
    @user = User.find(params[:id])
    @users = @user.followed_users.paginate(page: params[:page])
    render 'show_follow'
  end

  def followers
    @title = "Followers"
    @user = User.find(params[:id])
    @users = @user.followers.paginate(page: params[:page])
    render 'show_follow'
  end

  private

    def correct_user
      @user = User.find(params[:id])
      redirect_to(root_path) unless current_user?(@user)
    end

    def admin_user
      redirect_to(root_path) unless current_user.admin?
    end
end 
```

从错误看来，@micropost 没有在 def show 下的 microposts_controller.rb 文件中初始化。但我认为是？我究竟做错了什么？谢谢

这里也是 app/views/users/show.html.erb

```
<% provide(:title, @user.name) %>
<div class="row">
  <aside class="span4">
    <section>
      <h1>
        <%= gravatar_for @user %>
        <%= @user.name %>
      </h1>
    </section>
  </aside>
  <div class="span8">
    <%= render 'follow_form' if signed_in? %>
    <% if @user.microposts.any? %>
      <h3>Microposts (<%= @user.microposts.count %>)</h3>
      <ol class="microposts">
        <%= render @microposts %>
      </ol>
      <%= will_paginate @microposts %>
    <% end %>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T02:36:29.020

我怀疑错误出在您的部分：

```
<% @micropost.comments.each do |comment| %> 
```

我假设您正在迭代*@microposts*并将每个微帖子作为*micropost*传递给您的部分。在上面的行中，当您应该使用本地*micropost时，您正在使用实例变量**@micropost*。

 *更新：还有这里：

```
<%= form_for([@micropost, @micropost.comments.build]) do |f| %> – 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T03:04:08.180

你能试着把它`@microposts = @user.microposts.paginate(page: params[:page])`改成这个`@micropost = @user.microposts.first`，看看它是否有效？我认为由于部分是在用户的上下文中呈现的#show 为什么@micropost 为零。

这不是答案，我只是想发表评论，但我没有足够的声望点。*

# python - 聊天应用程序 - Python - 在 10 个房间中附加文件和 < 150 个用户

> ID：10712595
> 
> 赞同：0
> 
> 时间：2012-05-23T02:11:07.720
> 
> 标签：python, xmpp, chat, web2py

我完全不知道应该使用什么堆栈并在这里寻求一些指导。

我为自己设定的要求很简单：
1.) 我知道 python（更具体地说是 web2py），因此有点偏颇。但灵活。对于 Python，我是 1 到 10 的 6 级。Javascript是我的强项。我对 Java 和 PHP 很满意。
2.) 聊天的用户少于 150 个，但最多可能有 10 个房间。因此最多 1500 个用户。
3.) `Users should be able to attach files (text images/etc) - This is a must have.`
4.) 应保存聊天内容。但不一定是数据库。文件系统也很好。

我已经阅读了以下技术，但我不确定哪一个可以做到以上并且学习曲线最少：
a.) Jabber/XMPP
b.) WebSockets
c.) html5 服务器发送事件
d.) 轮询？

任何指针？

编辑：这将在网络内使用，它不会在网络上（至少现在）。

# python - python中列表的索引

> ID：10712596
> 
> 赞同：1
> 
> 时间：2012-05-23T02:11:15.660
> 
> 标签：python

我有这个代码

```
def display(s1,s2):
    l1 = list(s1)
    l2 = list(s2)
    l3 = [None]*10
    for i in range(10):
        for j in range(10):
            if i==l2[j]:
                l3[j] = l1[i]
    return l3

print display('3941068257', '1234567890') 
```

示例：list1 的位置 0 中的 3；0 在 list2 的第 9 位 => 我们将在名为 l3 的新列表的第 9 位显示 3 等等....

所以程序应该像那样显示 9410682573 但它仍然显示 None none ......

我的编译器没有调试器，所以我不知道如何找到。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T02:13:18.813

您正在将字符串（的一个字符元素`l2`）与整数进行比较。它总是失败。

这是因为发生了以下情况：

```
l2 = ['3','9','4','1','0','6','8','2','5','7']  # when you do "l2 = list(s2)"
for i in [0,1,2,3,4,5,6,7,8,9]:  # when you do "for i in raange(10)" 
```

类型不匹配。

而是这样做：

```
def display(s1,s2):
    l1 = list(s1)
    l2 = list(s2)
    l3 = [None]*10
    for i in range(10):
        for j in range(10):
            if str(i) == l2[j]:  # <-- change is here
                l3[j] = l1[i]
    return l3

print display('3941068257', '1234567890') 
```

# c# - 当我尝试编译时，Visual Studio 解决方案冻结

> ID：10712599
> 
> 赞同：1
> 
> 时间：2012-05-23T02:11:39.483
> 
> 标签：c#, visual-studio-2010, ide

我什至不知道如何调试这个问题。我有一个包含四个项目的解决方案，但它突然停止正常运行。

当我打开解决方案并单击任何内容时，它会冻结并显示**“Visual Studio 正忙于等待内部操作完成”**。当我尝试构建项目时，它会给出相同的消息，尽管它从未真正打开过文件或构建 - 我必须结束该过程才能逃脱。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T02:23:50.040

要解决此问题，您可以在安全模式下启动 Visual Studio，方法是运行：devenv.exe /SafeMode。它仅加载默认设置和服务。如果它有效，那么罪魁祸首就是扩展程序或第三方包之类的东西。

您还可以使用日志记录启动 Visual Studio：

[http://msdn.microsoft.com/en-us/library/ms241272.aspx](http://msdn.microsoft.com/en-us/library/ms241272.aspx)

有关您可以使用的其他命令行开关的列表，例如 /ResetSettings，您可以点击以下链接：

[http://msdn.microsoft.com/en-us/library/xee0c8y7(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/xee0c8y7(v=vs.100).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T02:22:03.440

也许您应该安装[Visual Studio 2010 诊断扩展](http://visualstudiogallery.msdn.microsoft.com/e8649e35-26b1-4e73-b427-c2886a0705f4)，尝试捕获一些可以发送到 MS 进行分析的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-08-11T08:57:05.720

对我有用的是打开 VS，打开一个工作项目，然后打开遇到问题的项目。之后一切正常。

# mongodb - Mongodump 和 mongorestore；未找到字段

> ID：10712600
> 
> 赞同：7
> 
> 时间：2012-05-23T02:11:48.080
> 
> 标签：mongodb, database

我正在尝试从另一台服务器转储数据库（这工作正常），然后在新服务器上恢复它（这不能正常工作）。

我首先运行：

```
mongodump --host -d 
```

这将创建一个`dump/db`包含所有 bson 文档的文件夹。

然后在转储文件夹中，我正在运行：

```
mongorestore -d dbname db 
```

这有效并遍历文件，但我得到这个错误`dbname.system.users`

```
Wed May 23 02:08:05 { key: { _id: 1 }, ns: "dbname.system.users", name: "_id_" }
Error creating index dbname.system.usersassertion: 13111 field not found, expected type 16 
```

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-10T08:35:20.220

如果它真的不同版本，请使用`--noIndexRestore`选项。并在此之后创建所有索引。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-23T14:50:49.140

源和目标是否有可能是不同的版本？

在任何情况下，要解决此问题，请使用 -c 标志将集合单独恢复到目标数据库，然后再构建索引。系统集合是用于索引的集合，因此重新创建相当容易 - 在其他所有内容恢复后最后尝试，如果仍然失败，您始终可以重新创建相关索引。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-05-24T14:09:56.097

这个问题也可能是由旧版本的 Mongo 中的这个错误引起的（在我的例子中是 2.0.8）：

[https://jira.mongodb.org/browse/SERVER-7181](https://jira.mongodb.org/browse/SERVER-7181)

基本上，`13111 field not found, expected type 16`当它实际上应该提示您输入身份验证详细信息时，您会收到错误。

以及我如何修复它的示例：

```
root@precise64:/# mongorestore /backups/demand/ondemand.05-24-2013T114223/
connected to: 127.0.0.1
[REDACTED]
Fri May 24 11:48:15      going into namespace [test.system.indexes]
Fri May 24 11:48:15 { key: { _id: 1 }, ns: "test.system.users", name: "_id_" }
Error creating index test.system.usersassertion: 13111 field not found, expected type 16
# Error when not giving username and password

root@precise64:/# mongorestore -u fakeuser -p fakepassword /backups/demand/ondemand.05-24-2013T114223/
connected to: 127.0.0.1
[REDACTED]
Fri May 24 11:57:11 /backups/demand/ondemand.05-24-2013T114223/test/system.users.bson
Fri May 24 11:57:11      going into namespace [test.system.users]
1 objects found
# Works fine when giving username and password! :) 
```

希望对前面2个回复没有解决问题的人有所帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-28T22:32:39.450

如果您尝试 mongorestore 到 MongoDB 2.6+ 并且您尝试恢复的转储包含`system.users`除 admin 之外的任何数据库中的表，也会发生这种情况。在 MongoDB 2.2 和 2.4 中，`system.users`集合可以出现在任何数据库中。与 MongoDB 2.6 关联的身份验证模式迁移将所有用户移动到`system.users`admin 数据库中的表中，但留下`system.users`了其他数据库中的表（MongoDB 2.6 只是忽略了这些）。在导入 MongoDB 2.6 时，这似乎会导致此断言。

# node.js - RFC3986 之前的 URL 的 Node.js URL 编码（使用 + 与 %20）

> ID：10712602
> 
> 赞同：1
> 
> 时间：2012-05-23T02:12:04.133
> 
> 标签：node.js, query-string, urlencode, url-encoding

在 Node.js 中，我使用[`querystring.stringify()`](http://nodejs.org/docs/v0.4.1/api/querystring.html#querystring.stringify)将对象编码为查询字符串以在 URL 中使用。有空格的值被编码为`%20`.

我正在使用一个特别挑剔的 Web 服务，它只接受编码为 的空格，就像在[RFC3986](http://www.faqs.org/rfcs/rfc3986.html)`+`之前通常所做的那样。

**有没有办法为查询字符串设置一个选项，以便将空格编码为`+`？**

目前我只是在做一个`.replace()`替换所有实例的`%20`with `+`，但如果有一个选项我可以提前设置，这有点乏味。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-17T19:28:37.570

[https://github.com/kvz/phpjs](https://github.com/kvz/phpjs)是一个node.js 包，提供了所有的php 功能。在撰写本文时，http_build_query 实现仅支持 urlencode（查询字符串包含 + 而不是空格），但希望很快将包含 enc_type 参数 / rawurlencode（空格的 %20）。

请参阅[http://php.net/http_build_query](http://php.net/http_build_query)。

无论哪种方式，RFC1738（+'s）都将是默认的 enc_type，因此您可以立即将其用于您的目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T14:19:41.847

我想不出任何库默认会这样做，不幸的是，我会说你的实现可能是更有效的方法，因为任何其他选项可能会做你已经在做的事情，或者会使用较慢的非编译纯 JavaScript 代码。

要求 Web 服务提供商遵循 RFC 怎么样？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-09-30T13:16:20.033

如果有人仍然面临这个问题，“qs”npm 包具有将空格编码为 + 的功能

```
qs.stringify({ a: 'b c' }, { format : 'RFC1738' }) 
```

# java - java从类返回字符串（linkedhashmap）

> ID：10712603
> 
> 赞同：-1
> 
> 时间：2012-05-23T02:12:16.333
> 
> 标签：java, string, map, return

不确定标题是否有意义，但我试图从接收linkedhashmap的类返回成功消息，但是当我尝试编译文件时，eclipse给了我错误，提供

`Remove arguments to match 'logFile()'`

`Create constructor 'logFile(Map<String, String>)'`

如何设置它来发送`Map`和接收一个`String`？谢谢艺术

根据下面的@Jeff Storey 更正了代码，并针对 Eclipse 进行了错误抑制

调用类

```
 eventLog.put(stringA,stringB);
 logFile logStuff = new logFile();
 successRtn = logFile.Process(eventLog); 
   // Do Stuff with SuccessRtn 
```

日志文件类

```
 public class  logFile {
    static String Success = "Fail";

  public static String Process(Map<String, String> eventlog){
    // Do Stuff 
    Success = "Yeh!"
    return Success;
   }

  public static void main(String[] args){
  @SuppressWarnings("static-access")
  String result = new logFile().Procces(eventLog);
  System.out.println("result = " + result);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T02:23:20.913

*main*方法是一种特殊的方法，它的签名必须在`public static void main(String[] args)`用作应用程序的入口点时。创建执行实际工作的第二种方法，如下所示：

```
public class LogFile {

     public String process(Map<String,String> eventLog) {
        // do stuff
        return success;
     }

     public void main(String[] args) {
         // eventLog will probably be read from a filepath passed into the args
        String result = new LogFile().process(eventLog);
        System.out.println("result = " + result);
     }
} 
```

请注意，您的许多命名约定也是非标准的。类应以大写字母开头，变量应以小写字母开头。

# meteor - 无法读取 null 的属性“_liveui”

> ID：10712607
> 
> 赞同：3
> 
> 时间：2012-05-23T02:13:02.510
> 
> 标签：meteor

我收到客户端错误（console.log 错误），但我的应用程序有效（我可以添加用户）

错误如下： Uncaught TypeError: Cannot read property '_liveui' of null

该项目在我的仓库中： [https ://github.com/thiagofm/statusfyit](https://github.com/thiagofm/statusfyit)

怎么了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:51:34.987

自从提出这个问题以来，Meteor 已经更新了它的 API，所以原始代码不再直接运行。

使用 jQuery.html 插入渲染模板的结果不是正常的方法。最好使用把手模板包含功能。

例如，替换：

```
$().ready(function(){
  hello = Meteor.ui.render(function(){
    return Template.hello();
  });
  $('body').html(hello);
}); 
```

和：

```
<body>
  {{> hello}}
</body> 
```

要根据应用程序的状态呈现不同的内容，请使用“会话”对象来条件化包含。例如：

```
<template name="foo">
  {{#if showNewUserDialog}}
    {{> newUserDialog}}
  {{else}}
    other stuff
  {{/if}}
</template>

<template name="newUserDialog">
  some stuff
</template> 
```

和

```
Template.foo.showNewUserDialog = function () {
  return Session.get('showNewUserDialog');
};
Template.other.events({
  'click #new_user': function () {
     Session.set('showNewUserDialog', true);
  }
}); 
```

# java - 为什么servlet中的response.sendRedirect()在收到JQuery的post请求后不起作用？

> ID：10712612
> 
> 赞同：5
> 
> 时间：2012-05-23T02:13:36.910
> 
> 标签：java, jquery, html, servlets, redirect

在 blog-edit.html 中，使用 JQuery 将 post 请求发送到服务器端（java servlet）。

```
$("#btn").click(function() {
                    $.post("/blog/handler",{"content":$('#textarea').val()},
                    function(data){
                        alert("Data Loaded: " + data);
                        if(data.toString().length>1){
                            alert("Saved!")
                        }else{
                            alert("Failed!")
                        }
                    }) 
```

在服务器端：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
            String content = request.getParameter("content");
            System.out.println(content);

            response.sendRedirect("/blog/list");
            return;
    } 
```

我看到的是服务器端正在打印来自 html 的内容，并且弹出警报窗口说“已保存！”。但是重定向功能不起作用

搜索后我别无选择，只能使用 jquery 重定向：

```
if(data.toString().length>1){
                            alert("Saved!")
                            window.location.replace("/blog/list")
                        } 
```

它有效，但这不是我想要的

请帮忙

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T02:21:49.883

在使用 ajax 时。您不能执行服务器端重定向。

但是，在这种情况下，有更好的方法可以在客户端上重定向。

[看这里](https://stackoverflow.com/questions/199099/how-to-manage-a-redirect-request-after-a-jquery-ajax-call)

# android - 将初始音量设置为电话铃声音量

> ID：10712615
> 
> 赞同：2
> 
> 时间：2012-05-23T02:13:57.813
> 
> 标签：android

我试图做到这一点，所以当用户打开应用程序时，它会将音乐的音量设置为他们的手机铃声音量。到目前为止，这是我的代码，但我不确定 setVolume(float, float) 上的参数是什么。android文档没有很好地解释它。我的代码在这里做错了什么？

```
 AudioManager audio = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
  int currentVolume = audio.getStreamVolume(AudioManager.STREAM_RING);

   mPlayer = MediaPlayer.create(this, R.raw.song);
   mPlayer.setOnErrorListener(this);

   if(mPlayer!= null)
    {         
    mPlayer.setLooping(true);
    mPlayer.setVolume(currentVolume,1);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T02:22:48.557

看起来[audio.setStreamVolume](http://developer.android.com/reference/android/media/AudioManager.html#setStreamVolume%28int,%20int,%20int%29)是您想要的，但传入 STREAM_MUSIC 而不是 STREAM_RING。

注意：音乐音量和铃声音量可能有不同的最大值，因此您需要将它们标准化。为此使用 getStreamMaxVolume。

我以前没有这样做过，也没有编译过，但是代码应该是这样的

```
AudioManager audio = (AudioManager) getSystemService(Context.AUDIO_SERVICE);

// Get the current ringer volume as a percentage of the max ringer volume.
int currentVolume = audio.getStreamVolume(AudioManager.STREAM_RING);
int maxRingerVolume = audio.getStreamMaxVolume(AudioManager.STREAM_RING);
double proportion = currentVolume/(double)maxRingerVolume;

// Calculate a desired music volume as that same percentage of the max music volume.
int maxMusicVolume = audio.getStreamMaxVolume(AudioManager.STREAM_MUSIC);
int desiredMusicVolume = (int)(proportion * maxMusicVolume);

// Set the music stream volume.
audio.setStreamVolume(AudioManager.STREAM_MUSIC, desiredMusicVolume, 0 /*flags*/); 
```

# file - 如何在 Lua 中获取文件大小和删除文件？

> ID：10712622
> 
> 赞同：16
> 
> 时间：2012-05-23T02:14:59.647
> 
> 标签：file, lua, size, coronasdk

我在使用 Lua 获取文件大小时遇到​​问题。我正在创建一个函数方法，如果文件的文件大小为`743 bytes`，则该文件将被删除。

这是我的代码：

```
local getDLFile = function(fileToDL)
            local path = system.pathForFile(fileToDL, system.DocumentsDirectory )
            local myFile = io.open( path, "w+b" ) 
            http.request{ 
                url = "http://www.testfile.com/"..fileToDL, 
                sink = ltn12.sink.file(myFile),
            }

            -- i don't know what is the syntax
            if myFile.size == 743 bytes then
                 myFile.delete
            end             

end 
```

任何人都可以帮助我处理我的情况吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-05-23T03:07:44.557

大小由 给出`myFile:seek("end")`。

要删除文件，请使用`os.remove(path)`. 但先关闭文件。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-05-23T03:34:46.277

最近在 Corona 中添加了 Lua 文件系统支持！您可以使用获取文件大小

```
local lfs = require "lfs"
local size = lfs.attributes (path, "size") 
```

你可以在这里阅读 [http://keplerproject.github.com/luafilesystem/manual.html#reference](http://keplerproject.github.com/luafilesystem/manual.html#reference)

删除文件使用

```
os.remove(path) 
```

# jakarta-ee - JavaEE 容器中的异步任务

> ID：10712627
> 
> 赞同：2
> 
> 时间：2012-05-23T02:15:46.813
> 
> 标签：jakarta-ee, ejb

我刚刚听说在 JavaEE 容器中生成自己的线程是一种不好的做法。自从几个月前开始学习 JavaEE 6 开发以来，我一直在这样做。我一直在做的是：

1.)从 Web 应用程序主入口点（实现 ServletContextListener 的对象），

2.）我创建了几个线程来在 contextInitialized 方法中为 Web 应用程序后端运行一些异步后台任务。

3.)我在 contextDestroyed 方法中清理资源。

有没有更好的方法来做到这一点？如何在不产生线程的情况下创建异步后台任务？不使用线程的原因是什么？

我正在使用 EJB 3.0 和 JavaEE6

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T03:21:22.070

手动生成线程确实是一种不好的做法，因为您希望 Java 容器在应用程序代码之外为您管理线程池。JavaEE 6 专门为此目的有一个名为 @Asynchronous 的注解，Oracle 有一个[官方教程](http://docs.oracle.com/javaee/6/tutorial/doc/gkkqg.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-06T22:10:56.213

在 EJB3.1 之前，解决方法是创建 JMS 和 MDB 在 EJB 容器中执行异步作业，比较繁重，并且依赖于消息代理。@Asynchronous 提供了一种更简单的方法来处理异步作业。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-02T10:05:08.060

在 Java EE 7 中查看新的 Concurrency Utils API 规范。

# c - C中的多线程

> ID：10712633
> 
> 赞同：2
> 
> 时间：2012-05-23T02:16:55.813
> 
> 标签：c, multithreading, pthreads

我正在尝试为以下内容编写代码，但徒劳无功。有人可以帮忙吗？

创建一个不断循环的线程，提示用户输入一个整数。第二个线程休眠十秒，然后显示：迄今为止输入的最大值；. 然后它重新进入睡眠状态并重复。

我非常困惑和卡住。有人可以帮忙吗

这是到目前为止的代码

```
pthread_create(&thread1, NULL, &inputfunction, NULL);
        pthread_create(&thread2,NULL, &inputfunction, NULL);
        pthread_join(thread1,NULL);
       // pthread_join(thread2,NULL);
//        pthread_mutex_init(&array_lock, NULL);
        return 0;
}

void *inputfunction()
{
        //int *values= ptr_value;
        int i;
        int arr[5];
        printf("Input values:");
        for (i=0;i<5;i++)
        scanf("%d",&arr[i]);
        sleep(10);

        int max=0;
        for (i=0;i<5;i++)
                {
                        if (arr[i]>max)
                                max=arr[i];
                }
        printf("max=",max);

        return NULL;

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T03:08:19.613

由于这似乎是家庭作业，因此我不会为您编写任何代码，但稍微分析一下可能会帮助您更好地理解这里的问题。

**分解需求以及如何分析它？**

您需要两个单独的线程，一个负责从用户接收变量并***存储***它，另一个线程每 10 秒唤醒一次并***读取***当前输入的值。
除了需要 2 个线程这一显而易见的事实之外，请注意对***存储***和***读取***的强调，这意味着需要从两个不同的线程访问同一个变量，这告诉您它应该是一个全局变量。

**您当前的代码有什么问题？**
你有两个线程没问题，但是你也需要两个不同的线程函数，因为你需要在两个线程中做不同的活动。所以你不能`inputfunction()`为两个线程重用相同的函数。您将需要两个不同的功能，并且我们已经在 Q 的第一部分中详细介绍了每个功能应该做什么。
提示：查看您的环境（Windows/Linux 等）的文档以了解计时器并将您自己的函数注册为回调函数，这实际上可以完全简化生成单独线程的需求。

此外，您需要在两个线程之间访问相同的全局变量，这意味着两个线程可以相互**[竞争](https://stackoverflow.com/questions/34510/what-is-a-race-condition)**以访问共享变量，因此您需要某种**[同步机制](http://en.wikipedia.org/wiki/Synchronization_%28computer_science%29)**来避免这种情况。

上面的分析应该让您开始编程，尝试这样做，如果您遇到任何问题，请随时在此处提出问题，其中包含您尝试过的具体细节以及您面临的确切问题。

一切顺利 ：）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T03:12:31.950

您只编写了一个函数来模糊线程一和线程二之间的界限。

*   它只循环 5 次*（说明中没有要求！）*
*   它读取输入（线程一的一部分）
*   它睡觉（线程二的一部分）
*   它维护一个由 5 个整数组成的数组*（指令中没有要求！）*

如果您只是按照说明进行操作，您将走得更远：

**创建一个不断循环的线程，提示用户输入一个整数。**

```
/* global */  int g_i;

void Thread_One_Main(void)
{
    g_i = 0;
    while( g_i != -1)
    {
        scanf("%d", &g_i);
    }
} 
```

**第二个线程休眠十秒，然后显示到目前为止输入的最大值。
然后它重新进入睡眠状态并重复。**

```
void Thread_Two_Main(void)
{
    int max = 0;
    while(g_i != -1)
    {
        sleep(10);
        if (g_i > max)
        {
            max = g_i;
            printf("New max value: %d\n", max);
        }
    }
} 
```

PS 我决定使用 -1 作为停止值，因为您没有提及程序何时或如何结束。

现在，您可以编写一个`main()`来启动这两个线程吗？

您可以在两个线程之间进行同步，以便它们不会同时从 g_i 读取和写入吗？

# c# - Treeview空白显示C#

> ID：10712636
> 
> 赞同：2
> 
> 时间：2012-05-23T02:17:44.267
> 
> 标签：c#, .net, visual-studio-2010, treeview, nodes

我正在尝试使用填充了我创建的类的实例的数组来填充 Treeview。没有错误，但视图中不显示任何内容。这是我用来填充树的代码。它以构造函数的形式放置。

```
 for (int index = 0; index < jobArray.Length - 1; index++)
        {
            TreeNode newNode = new TreeNode();
            newNode.Text = jobArray[index].name;
            newNode.Tag = jobArray[index].trusses;
            treeView1.Nodes.Add(newNode);

        } 
```

有什么建议么？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T02:41:21.043

如果您更改循环中的条件（-1），它应该可以正常工作：

```
for (int index = 0; index < jobArray.Length; index++)
        {
            TreeNode newNode = new TreeNode();
            newNode.Text = jobArray[index].name;
            newNode.Tag = jobArray[index].trusses;
            treeView1.Nodes.Add(newNode);

        } 
```

# c# - ASP.NET 中的 SqlDataReader 释放和关闭

> ID：10712644
> 
> 赞同：1
> 
> 时间：2012-05-23T02:18:47.717
> 
> 标签：c#, asp.net, .net, sql-server, sqldatareader

以下代码是否正确清理了所有 SqlDataReaders：

```
using (IDataReader reader = SqlHelper.GetDataReader(sql.ToString())) {
    if (reader.Read()) {
        result = reader.IsDBNull(0) ? string.Empty : reader[0].ToString();
    }
} 
```

我的代码中有一些并发/解除分配问题并试图解决它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T02:25:07.903

`Dispose()``IDataReader`一旦`using`语句结束超出范围，将自动调用。还要确保阅读器是使用创建的，`CommandBehavior.CloseConnection`以便阅读器在处理连接后将处理连接。

但我没有看到任何其他涉及连接的代码。如果您使用的是经典`SqlHelper`课程，那可能是问题的根源......

# clojure - Clojure：生成所有键盘可输入字符

> ID：10712645
> 
> 赞同：2
> 
> 时间：2012-05-23T02:18:54.020
> 
> 标签：clojure

## 语境

我想生成可以通过以下方式生成的所有字符：

*   打开记事本
*   按键盘上的一个键
*   按住 shift + 按键盘上的单个键

## 我目前拥有的：

```
(concat (range (int \a) (int \z))
  (range (int \A) (int \Z))
  (range (int \0) (int \9))) 
```

然后手动添加更多字符，例如 ~!@#$%^&*()_+{}|:"<>?,./;'[]\

## 问题

有没有更优雅的方式来做到这一点？

## 编辑

是的，我指的是美国 Qwerty 键盘。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T03:04:20.410

如果您查看[美国 ASCII 图表](http://www.asciitable.com/)，您想要的所有字符似乎都在其中`(range 33 127)`。因此，获取所有这些字符的序列的最简单方法是将该范围转换为字符。

```
(map char (range 33 127)) 
```

但是，如果您尝试验证字符串是否仅包含这些字符，请使用如下函数：

```
(defn valid-char? [c]
  (let [i (int c)] 
    (and (> i 32) (< i 127)))) 
```

然后你可以用它`every?`来验证一个字符串：

```
user=> (every? valid-char? "hello world")
true
user=> (every? valid-char? "héllo world")
false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T03:01:48.540

使用以下地图形式将生成您想要的字符。

```
(map #(str (char %)) (range 32 127)) 
```

# mysql - 具有多个连接的最大 n-per-group

> ID：10712646
> 
> 赞同：0
> 
> 时间：2012-05-23T02:18:58.857
> 
> 标签：mysql, sql-order-by, inner-join, greatest-n-per-group

晚上，

我正在尝试获取MySQL 中每组限制为*n的行的输出。*我可以让它在没有连接的情况下工作，但有了它我只是害羞。我在这里粘贴了相关表格的转储：

[http://pastebin.com/6F0v1jhZ](http://pastebin.com/6F0v1jhZ)

我正在使用的查询是：

```
SELECT
   title, catRef, RowNum, pCat, tog
FROM
(
    SELECT
        title, catRef,
        @num := IF(@prevCat=catRef,@num+1,1) AS RowNum,
        @prevCat AS tog,
        @prevCat := catRef AS pCat
    FROM (select @prevCat:=null) AS initvars
    CROSS JOIN 
    (
        SELECT p.title, oi.catRef
        FROM resources p
        INNER JOIN placesRel v ON (p.resId = v.refId)
        INNER JOIN catRel oi ON (p.resId = oi.refId)
        WHERE p.status = 'live' AND v.type = 'res' AND oi.type = 'res'
    ) AS T
) AS U
WHERE RowNum <= 5
ORDER BY catRef 
```

我只是无法让行数增加。或任何其他解决方案将不胜感激。

我正在寻找这样的结果：

```
title        catRef        RowNum
Title1       1             1
Title2       1             2
Title3       1             3
Title4       2             1
Title5       2             2
Title6       3             1 
```

目前，RowNum 列始终为 1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:06:48.580

这有效：

```
SET @num := 1, @prevCat := 0;
SELECT title, start, end, type, description, linkOut, outType, catRef, row_number
FROM (
SELECT title, start, end, type, description, linkOut, outType, catRef,
@num := if(@prevCat = catRef, @num + 1, 1) as row_number,
@prevCat AS tog,
@prevCat := catRef AS dummy
FROM (
    SELECT title, start, end, resources.type, description, linkOut, outType, catRef
    FROM resources LEFT JOIN placesRel ON placesRel.refId = resId LEFT JOIN catRel ON catRel.refId = resId
    WHERE status = 'live' AND placesRel.type = 'res' AND catRel.type = 'res'
    ORDER BY catRef
) AS w
) AS x WHERE x.row_number <= 4; 
```

您需要将连接的查询放在子查询中，并按要分组的列对其进行排序。使用它的父查询来添加行号。然后，顶级查询将它们粘合在一起。

如果您不将连接的查询放在它自己的子查询中，结果将不会按您希望的顺序排列，而是按照它们在数据库中的顺序出现。这意味着数据没有分组，因此行号不会应用于有序行。

# php - drupal 或 joomla 是否允许将 node.js 和 socket.io 与 php 结合使用？

> ID：10712648
> 
> 赞同：2
> 
> 时间：2012-05-23T02:19:20.587
> 
> 标签：php, drupal, node.js, joomla, socket.io

我正在研究开发一个必须使用套接字进行实时更新的网站。我理解 wordpress 很难合并 node.js 和 socket.io，我想知道 drupal 是否就是这种情况。**具体来说，我可以将 node.js 和 socket.io 与 php 合并吗？我需要采取哪些具体步骤？**感谢您的帮助，当然，如果您给我一个好的答案，我会给您打分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T16:06:35.373

目前有连接到 Drupal、Joomla 和 WordPress 的 Node.js 模块。我为 Joomla 写了一个：[https](https://github.com/jlleblanc/nodejs-joomla) ://github.com/jlleblanc/nodejs-joomla你可以通过 NPM 找到所有这些。首先，您将下载其中一个模块，然后您还将下载 Socket.io 模块。然后，您将编写将 CMS 连接到 Socket.io 的服务器端代码。最后，您将编写客户端代码来与在 Node.js 中运行的套接字通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T02:24:15.360

您可以将其分开，并且由于您希望与 node.js 进行一些客户端-服务器通信，因此您可以在 Drupal 之外拥有它（这是最简单和最干净的方式）。

**您使用的 CMS（无论是 Drupal 还是 Wordpress）不会限制您的 JavaScript 使用 socket.io 和 node.js**来进行您希望在 CMS 服务器端代码之外进行的调用。你可以例如。读取 Drupal/Wordpress 所做的相同数据库，但使用 Node.js 并将结果直接返回到客户端 JavaScript 脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T06:47:50.713

您可以将 Socket.IO 与您喜欢的任何技术集成，但您需要将它们视为需要通信的 2 个独立部分。

我看到了 Socket.IO 与外部服务（Drupal、Joomla、Wordpress 等）通信的 2 个解决方案：

1) 为您的 Socket.IO 应用程序制作一个 REST API（例如，使用 Express 作为 API 层，然后使用 EventEmitter 将消息传递给 Socket.IO）。

2）我认为更好的解决方案是使用像 Redis、RabbitMQ 或 ZeroMQ 这样的消息队列。Drupal 网站会通过通道向 Socket.IO 发送消息，然后 Socket.IO 会将该消息发送给客户端。

如果您正在创建一个还需要身份验证的系统，我建议您不要让您的用户直接使用 Socket.IO 发送消息，而是对您的主服务器进行 Ajax 调用（例如 Drupal）。这样您就可以更轻松地检查用户的身份。（这种情况适合需要身份验证的基于聊天的系统）

虽然本视频教程适用于带有 Faye 的 EventMachine，但同样的逻辑也适用于您的应用程序：[http ://railscasts.com/episodes/260-messaging-with-faye](http://railscasts.com/episodes/260-messaging-with-faye)

# emacs - emacs tramp 如何避免 bash_profile

> ID：10712654
> 
> 赞同：3
> 
> 时间：2012-05-23T02:20:16.127
> 
> 标签：emacs, tramp

每次我访问远程机器中的文件系统并执行命令（例如`grep`）时，带有该命令结果的 emacs 缓冲区也包含我的详细`.bash_profile`输出。

我怎么能禁用这种行为？也就是说，如何使远程命令只加载`.bashrc`？（在流浪汉中，我的远程方法是 ssh）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-06T19:06:13.393

我建议将输出文本的 .bash_profile 中的所有内容移到文件末尾，并将以下内容放在这些命令之前：

```
If [ "$TERM" == "dumb" ]; then
     return
fi 
```

那应该这样做。重读[http://www.gnu.org/software/tramp/#Remote-shell-setup](http://www.gnu.org/software/tramp/#Remote-shell-setup)以获取更多信息。

# c# - 使用异步委托/lambda 进行投影

> ID：10712655
> 
> 赞同：1
> 
> 时间：2012-05-23T02:20:17.920
> 
> 标签：c#, async-ctp, async-await, c#-5.0

以下代码不会针对 Visual Studio 2010 中的 Async CTP 进行编译：

```
Enumerable.Range(1, 5).Select(async x =>
{
    await TaskEx.Delay(100);
    return 5;
}); 
```

编译错误如下：

```
Test.cs(40,13): error CS1928: 'System.Collections.Generic.IEnumerable<int>' does not contain a definition for 'Select' and the best extension method overload 'System.Linq.Enumerable.Select<TSource,TResult>(System.Collections.Generic.IEnumerable<TSource>, System.Func<TSource,TResult>)' has some invalid arguments
Test.cs(40,49): error CS1503: Argument 2: cannot convert from 'lambda expression' to 'System.Func<int,int>' 
```

但是，根据我的阅读，这里应该发生以下情况：

*   `IEnumerable<TResult> Select<TSource, TResult>(this IEnumerable<TSource> source, Func<TSource, TResult> selector)`应该使用过载。
*   照`.Range(1, 5)`原样`IEnumerable<int>`，`TSource`是`int`
*   使 lambda 异步，采用`int`并返回 an`int`应该产生 a `Task<int>`，这是`TResult`应该的。

**我在这里没有看到语法问题。问题是什么？**

请注意，我还不能使用 VS11，因为我的主应用程序需要 Azure 工具。

**编辑：**这适用`msbuild`于命令行，但不适用于 VS2010。即使我的目标是 .NET 4.0，在命令行似乎也使用了 VS11 编译器，而 VS2010 使用它自己的进程内编译器。有谁知道如何换掉 VS2010 使用的编译器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T03:02:39.537

在我的 LINQPad 中工作（机器上安装了 VS11 Beta）

![在此处输入图像描述](../Images/c4cb5ece7e6e3a1b97f68207929eb5b1.png)

# c++ - 用于蒙特卡罗模拟的 C++ 类设计

> ID：10712659
> 
> 赞同：0
> 
> 时间：2012-05-23T02:20:43.690
> 
> 标签：c++, class, montecarlo

我正在尝试构建一个 Monte Carlo 对象类，并且想知道设计相关类的最佳方法。

对象的结构（称为实体）包含名称、描述**和分布类型**，可以是几种不同的类型，例如。正态、固定整数、三角形等。分布类是（或可能是）特定分布的超类，例如。普通的。

所以我有

```
class Entity {
public:
  string name;
  Distribution* dsn; // superclass. Can this be done?
}

class Distribution {
   public:
   string Type;
   double Sample(void)=0; // To be implemented in subclasses, same function sig.
} 
```

那么实际分布的一个例子可能是

```
class NormalDistribution : public Distribution {
    public:
    setMean(double mean);
    setStdDeb(double stddev);
    double Sample(void);
} 
```

FixedDistribtion 也将是 Distribution 的子类，并实现不同的方法，例如。setWeights、setValues 以及 Sample 当然。

我希望写这样的代码

```
Entity* salesVolume = new Entity();
salesVolume->setDistribution(NORM);
salesVolume->dsn->setMean(3000.0:
salesVolume->dsn->setStdDev(500.0);

Entity* unitCost = new Entity();
unitCost->dsn->setWeights( .. vector of weights);
unitCost->dsn->setValues( .. vector of values) ; 
```

然后

```
loop
   sv = salesVolume->sample();
   uc = unitCost->sample();
endloop 
```

我想做的是在实体中定义一个分布（超类），然后使用它的子类方法，这些方法取决于分布类型，例如。设置平均值。实体中的分发对象将在运行时确定，例如。if (distnType == NORM) dsn = new NormalDistribution; if (distnType == FIXED) dsn = new FixedDistribution;

这在 C++ 中是可能的，还是完全失去了多态的概念？我无法将 dsn 变量定义为超类，然后在运行时缩小到实际分布。一种（更简单）的方法是定义没有分发的实体，并自行使用分发，而不附加到实体。

多谢你们

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T03:33:17.340

我想你想这样做：

```
Entity* salesVolume = new Entity;
{
  NormalDistribution *dsn = new NormalDistribution;
  dsn->setMean(3000.0);
  dsn->setStdDev(500.0);
  salesVolume->setDistribution(dsn);
}

Entity* unitCost = new Entity;
{
  FixedDistribution *dsn = new FixedDistribution;
  dsn->setWeights( .. vector of weights);
  dsn->setValues( .. vector of values) ;
  unitCost->setDistribution(dsn);
} 
```

还有其他可能性，但我认为这最能代表您的原始设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:13:29.733

根据 pg1989 和 Robert Cooper 的回答发布自己的解决方案。

要定义不同类型的分发，将使用模板。访问者模式可用于解决需要主类的不同实现的问题。

# spring - 保存后休眠不会持久化数据

> ID：10712665
> 
> 赞同：6
> 
> 时间：2012-05-23T02:22:12.367
> 
> 标签：spring, hibernate, save, flush, persist

有人可以解释为什么在此示例中“lastAccessed”日期没有保存到数据库中，以及如何将其保存到数据库中？我的理解是 do 对象是 save() 调用之后的附加对象，因此所有修改都应该自动保留。

注意：“myDate”已正确保留，因此所有其他 spring 配置似乎都是正确的。

```
@Transactional(readOnly = false)
public DateObject getOrCreateDateObject(Date myDate) {
    DateObject do = null;

    do = getCurrentDateObject();  // For my tests, this has been returning null

    if (do == null) {
        // create a new object
        do = new DateObject();
        do.setDate(myDate);
        sessionFactory.getCurrentSession().save(do);
    }

    // This does not persist to the database
    do.setLastAccessed(new Date());

    return do;
} 
```

在 save() 调用之后，我还尝试了以下一些组合（以及更多组合）。这些都不起作用：

```
sessionFactory.getCurrentSession().merge(do);  // tried before and after do.setDate(d2)

sessionFactory.getCurrentSession().update(do);

sessionFactory.getCurrentSession().saveOrUpdate(do);

sessionFactory.getCurrentSession().flush();

DateObject doCopy = (DateObject)sessionFactory.getCurrentSession().load(DateObject.class, do.getId());
sessionFactory.getCurrentSession().merge(doCopy);
doCopy.setLastAccessed(new Date()); 
```

我希望这是一个我没有看到的简单答案。感谢您的帮助！

编辑 #1 05/22/2012

根据要求，这里是该实体的映射，在 src/main/resources/META-INF/dateobject.hbm.xml 中指定。我可以看到列是在 mysql 客户端中使用“SELECT * FROM dateObjects”在数据库中创建的。MY_DATE 已正确填充，但 LAST_ACCESSED 设置为 NULL。

```
<class name="com.example.entity.DateObject" table="dateObjects">
    <id name="id" column="DATE_OBJECT_ID">
        <generator class="identity" />
    </id>
    <property name="date" type="date" column="MY_DATE" />
    <property name="lastAccessed" type="date" column="LAST_ACCESSED" />
</class> 
```

编辑 #2 2012 年 5 月 24 日

[我在https://github.com/eschmidt/dateobject](https://github.com/eschmidt/dateobject)有一个有效的 SSCCE 。有趣的是，web 客户端（调用 localhost:8080/view/test）显示 lastAccessed 设置正确，但是当我使用 MySQL 客户端检查数据库时，它显示 lastAccessed 为 NULL。有了这套完整的代码，任何人都可以看到为什么即使方法标记为@Transactional，数据库也不会更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T02:51:36.843

如果您绝对确定在运行该代码后`do.date`存储在数据库中而`do.lastAccessed`不是存储在数据库中，那么您的连接和事务显然设置正确。我的第一个猜测是不正确的映射，因为这是最简单的解决方案。你不会碰巧有一个`@Transient`on the field、getter 或 setter `lastAccessed`，对吗？（当然，假设您使用注释来映射您的域对象。）

如果您可以提供[SSCCE](http://sscce.org/)，我敢打赌我或其他人可以给您一个明确的答案。

**更新：**很难将一个完整的应用程序缩减为展示问题的最小代码。结果是，您很可能会找到答案。[我在 github](https://github.com/zzantozz/testbed)中有很多示例项目，如果您只需要朝着正确的方向轻推一些，它们可能会帮助您指导。[basic-springmvc](https://github.com/zzantozz/testbed/tree/master/basic-springmvc)可能最接近您正在做的事情，但它使用注释而不是 xml 进行映射。它也是一个 Spring MVC 项目。在主类中手动启动 Spring 上下文比担心整个 servlet 容器和 Spring MVC 希望您拥有的多个上下文要简单得多。[例如， spring-method-caching](https://github.com/zzantozz/testbed/tree/master/spring-method-caching)有一个这样做的例子。

至于您发布的映射，它看起来不错，尽管我已经很久没有接触 XML 映射了。您使用的是字段访问还是属性访问？这可能对事情有影响。此外， SessionFactory 中是否有任何自定义[侦听](http://docs.jboss.org/hibernate/orm/3.6/javadocs/org/hibernate/event/EventListeners.html)器或[拦截器可能与您的对象一起玩弄？](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html/events.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T12:49:42.583

您将 IDENTITY 生成用于标识符生成策略，因此此处的 save() 调用立即转换为插入。您是否看到在那之后执行了任何 INSERT/UPDATE/DELETE SQL？如果不是，则很可能会话没有被刷新。冲洗可能发生在许多地方，如果您不熟悉，请阅读有关冲洗的文档。

# xcode - setStringValue 和指针

> ID：10712667
> 
> 赞同：0
> 
> 时间：2012-05-23T02:22:37.967
> 
> 标签：xcode, cocoa, nstextfield

我对 setStringValue: 有一个独特的情况，希望有人能解决这个问题：

使用以下理论示例（不是文字）代码：

```
NSString *myVar;

[myOutlet setStringValue:myVar]; 
```

似乎对于任何字符串值，例如：

```
myVar = @"hello"; 
```

一个指针被传递给 myOutlet 并且 NSTextField 指向与 myVar 相同的内存位置，本质上使它们相同。在本质上：

```
myVar == [myOutlet stringValue]; 
```

返回真。

然而

在这个情况下：

```
myVar = @""; 
```

似乎它没有传递指针，而是 NSTextField 正在创建它自己的独立内存位置来存储它的空字符串，本质上是：

```
myVar == [myOutlet stringValue]; 
```

返回假。

谁能确认这是否属实，如果是，请解释原因？我相信这是我正在处理的一段代码中遇到的一个非常复杂问题的根源，我正试图围绕问题的根源展开思考。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T02:28:38.043

基本上，第一种情况解决的可能性很大。这些指针绝对不能保证相等，如果需要比较字符串，请`-isEqualToString:`始终使用。

您遇到的可能是某种优化，以避免存储`@"hello"`不止一次。我们无法知道这种情况何时会发生或不会发生，并且它可能会在未来发生变化，或因设备而异。

# c# - 如何优雅地抛出新异常

> ID：10712670
> 
> 赞同：0
> 
> 时间：2012-05-23T02:22:48.713
> 
> 标签：c#

如何优雅地抛出异常？

```
public void Test() 
{
 if (error != 0) {
  string msg = "Error";
  throw new Exception(msg);
 }

  // Other function
  ...
} 
```

我也改变了`throw new Exception(msg);`与记录器

```
public void Test()
{
 if (error != 0) {
  string msg = "Error";
  //throw new Exception(msg);
  logger.Error(msg);
 }

  // Other function
  ...
} 
```

发生错误时是否应该使用 Exit 函数退出该函数？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T02:26:53.640

您想在抛出异常之前记录。

您还想抛出一个继承自 System.Exception 的异常类型，以便消费者可以捕获特定类型。

抛出异常将退出函数（如果有的话，实际上会先处理一个 finally 块）所以你只需要抛出。

此外，如果您在错误条件下捕获不同的异常，您可以记录，然后简单地调用 throw；抛出原始异常而不是丢弃堆栈。如果您想在这种情况下抛出自己的异常类型，可以将原始异常包含为内部异常

```
catch (Exception e)
{
    // log exception details
    throw;
} 
```

或者 ...

```
catch (Exception e)
{
    // log exception details
    throw new MyCustomException("message", e);   // inherits from Exception
} 
```

最后一个（如果适用）的好处是，如果对特殊处理感兴趣，消费者可以捕获 MyCustomException。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T02:28:36.637

如果您愿意，例外的目的是“不优雅”。不要调用 Exit，除非它确实是致命的并且您不希望程序继续运行。客户端代码应该捕获异常，并评估是否退出。

此外，如果您想记录错误，请在`throw`.

附言。不要在关键字之后命名你的函数....

# javascript - 制作一个 chrome 扩展来替换某些页面上的 div

> ID：10712672
> 
> 赞同：0
> 
> 时间：2012-05-23T02:23:04.940
> 
> 标签：javascript, html, google-chrome, google-chrome-extension

我的妻子扮演 Neopets 并且不断地编辑她的个人资料页面的 html。我想为 chrome 做一个扩展，它只是用高级文本编辑器替换 textarea。我想要正确方向的任何链接。这对我来说将是一个学习项目。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T19:38:37.457

您可以使用[内容脚本](http://code.google.com/chrome/extensions/content_scripts.html)，它会在页面加载时自动注入一些代码。

# uinavigationbar - iOS UIAutomation - 读取navigationBar的标题

> ID：10712673
> 
> 赞同：2
> 
> 时间：2012-05-23T02:23:13.177
> 
> 标签：uinavigationbar, ios-ui-automation, uiactivityviewcontroller

如何使用 UIAutomation javascript 检查应用程序中导航栏标题的值？我尝试过各种各样的事情，比如

> target.frontMostApp().navigationBar().title
> 
> target.frontMostApp().navigationBar().name
> 
> target.frontMostApp().navigationBar().value

还有一些其他的，它们都不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T02:29:11.550

事实证明，它适用于：

> target.frontMostApp().navigationBar().name()

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-17T05:53:33.613

您可以使用以下脚本访问它：

```
target.frontMostApp().mainWindow().navigationBar().staticTexts()[0].value() 
```

# ruby - 展平嵌套的 json 对象

> ID：10712679
> 
> 赞同：6
> 
> 时间：2012-05-23T02:24:17.793
> 
> 标签：ruby, arrays, json, hash

我正在寻找一种将“json”散列展平为展平散列但将路径信息保留在展平键中的方法。例如：

```
h = {"a" => "foo", "b" => [{"c" => "bar", "d" => ["baz"]}]} 
```

flatten(h) 应该返回：

```
{"a" => "foo", "b_0_c" => "bar", "b_0_d_0" => "baz"} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-23T07:23:06.880

这应该可以解决您的问题：

```
h = {'a' => 'foo', 'b' => [{'c' => 'bar', 'd' => ['baz']}]}

module Enumerable
  def flatten_with_path(parent_prefix = nil)
    res = {}

    self.each_with_index do |elem, i|
      if elem.is_a?(Array)
        k, v = elem
      else
        k, v = i, elem
      end

      key = parent_prefix ? "#{parent_prefix}.#{k}" : k # assign key name for result hash

      if v.is_a? Enumerable
        res.merge!(v.flatten_with_path(key)) # recursive call to flatten child elements
      else
        res[key] = v
      end
    end

    res
  end
end

puts h.flatten_with_path.inspect 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-09T16:05:22.670

我有一个类似的问题，并在此处提出了 在 Ruby中使用可能的解决方案[从分层 JSON 中生成扁平化 JSON（非规范化）的最佳方法](https://stackoverflow.com/questions/27851283/best-way-to-produce-a-flattened-json-denormalize-out-of-hierarchical-json-in-r/27864426#27864426)

我的解决方案是最佳解决方案还是有更好的方法？

# ruby-on-rails - 12296#0: *4 --passenger 运行但页面不显示 -- Rails 示例示例应用程序

> ID：10712680
> 
> 赞同：2
> 
> 时间：2012-05-23T02:24:47.123
> 
> 标签：ruby-on-rails, apache, passenger

为什么 apache 文件是唯一出现的东西。为什么没有出现乘客页面？

是什么让它指向公共/公共？我确实删除了 index.html 文件，因为我有一个 static_pages 控制器

```
12296#0: *4 "/var/www/sample_app/releases/20120522195731/public/public/index.html" is not found 
(2: No such file or directory), client: 127.0.0.1, server: 
```

这是我转到 url 时出现的内容

```
Index of /
[ICO]   Name    Last modified   Size    Description
[TXT]   404.html    22-May-2012 19:57   728      
[TXT]   422.html    22-May-2012 19:57   711      
[TXT]   500.html    22-May-2012 19:57   643      
[IMG]   favicon.ico 22-May-2012 19:57   0    
[ ] passenger.3000.log  22-May-2012 21:35   488      
[ ] passenger.3000.pid.lock 22-May-2012 21:36   0    
[TXT]   robots.txt  22-May-2012 19:57   204 
```

Apache/2.2.20 (Ubuntu) 服务器位于 server.silvernightfall.com 端口 80

我编辑了 apache2.conf

```
LoadModule passenger_module /home/ubuntu/.rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12  
/ext/apache2/mod_passenger.so
PassengerRoot /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.12
PassengerRuby /usr/local/rvm/wrappers/ruby-1.9.3-p194/ruby 
```

我编辑了 apache2/sites-available/server

```
<VirtualHost *:80>
ServerAdmin victoria@jbyte.com
ServerName server.silvernightfall.com
# ServerAlias
DocumentRoot /var/www/sample_app/current/public
ErrorLog /var/www/sample_app/error.log
RailsEnv production
<Directory "/var/www/sample_app/current/public">
Options Indexes FollowSymLinks MultiViews
Order allow,deny
Allow from all
</Directory>
</VirtualHost> 
```

静态页面控制器

```
class StaticPagesController < ApplicationController

  def home
  end

  def help
  end

  def about
  end

  def contact
  end
end 
```

还有一个路由页面

```
SampleApp::Application.routes.draw do

root :to => 'static_pages#home'

 match '/signup',           to: 'users#new'

 match '/help',         to: 'static_pages#help'
 match '/about',        to: 'static_pages#about'
 match '/contact',          to: 'static_pages#contact'

end 
```

我认为可能会搞砸的唯一另一件事是 deploy.rb

```
 # The name of your app
            set :application, "sample_app"

            # The directory on the EC2 node that will be deployed to
            set :deploy_to, "/var/www/#{application}"

            set :keep_releases, 3

            # deploy with git
            set :scm, :git
            set :repository,  "git@github.com:SilverNightFall/sample_app.git"
            set :git_shallow_clone, 1
            set :branch, "master"
            set :use_sudo, true

            # gets ssh info
            set :user, "ubuntu"
            ssh_options[:keys] = ["/Users/Victoria/Documents/ServerKeys/key.pem"]
            ssh_options[:forward_agent] = true
            default_run_options[:pty] = true

            # The address of the remote host on EC2 (the Public DNS address)
            set :location, "server.silvernightfall.com"

            # setup some Capistrano roles
            role :app, location
            role :web, location
            role :db,  location, :primary => true

            after 'deploy:update_code', 'deploy:symlink_db'

            namespace :deploy do

              desc "Restart Application"
              task :restart, :roles => :app do
                   run "touch #{deploy_to}/#{shared_dir}/tmp/restart.txt"
              end

              desc "Symlinks the database.yml"
              task :symlink_db, :roles => :app do
              run "ln -nfs #{deploy_to}/shared/config/database.yml    
                              #{release_path}/config/database.yml"
              end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T23:32:55.787

事实证明我必须卸载并重新安装Passenger。好像安装了两次。

# css - CSS3 淡入底部

> ID：10712681
> 
> 赞同：1
> 
> 时间：2012-05-23T02:24:50.303
> 
> 标签：css, background, background-image, linear-gradients

我一直在寻找高低，但我还没有找到使用 a将标签底部淡化为白色的**CSS3**方法。`linear-gradient``<section>`

如果我不清楚，让我用一个例子来说明这一点。如果我有一个`<section>`包含大量文本的标签，我希望文本在指定高度被切断。为了显示还有更多的文本要阅读，容器将显示一个白色渐变，部分覆盖最后一行左右，以表明还有更多的文本要阅读。

我知道这可以用 PNG 或 GIF 来完成，但我不知道如何用 CSS3 来做到这一点。有人可以提供一个例子吗？

感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T02:27:15.983

你可以用一个额外的元素和一些 JavaScript 来做到这一点。像这样：

```
#some-section {
    position: relative;
}

#some-section .after {
    background-image: -webkit-linear-gradient(rgba(255, 255, 255, 0), white);
    background-image:    -moz-linear-gradient(rgba(255, 255, 255, 0), white);
    background-image:     -ms-linear-gradient(rgba(255, 255, 255, 0), white);
    background-image:      -o-linear-gradient(rgba(255, 255, 255, 0), white);
    background-image:         linear-gradient(rgba(255, 255, 255, 0), white);
    bottom: 0;
    left: 0;
    height: 20px; /* Whatever suits you */
    position: absolute;
    right: 0;
} 
```

和 JavaScript：

```
var section = document.getElementById('some-section');
var after = document.createElement('div');
after.className = 'after';

section.appendChild(after);

section.addEventListener('scroll', function() {
    after.style.bottom = -section.scrollTop + 'px';
}, false);​ 
```

[这是一个工作演示。](http://jsfiddle.net/minitech/VHw5E/)

# c# - 有没有办法轻松获取 C# 模型的 JavaScript 表示？

> ID：10712682
> 
> 赞同：0
> 
> 时间：2012-05-23T02:24:54.580
> 
> 标签：c#, javascript

我有一个 ASP.NET MVC 应用程序，我在其中为我的数据声明了一些 C# 模型。但是，我也在客户端处理数据，如果我能以某种方式获得 C# 类的 JavaScript 表示，那就太好了，这样我就不必在 JavaScript 中重新声明相同的数据结构。理想情况下，在我的客户端代码中，我会引用一个带有类名的脚本作为查询字符串参数，它会返回定义所需 C# 类的构造函数的 JS 代码。例如

```
<script src="/model/get?type=Myapp.User"></script> 
```

当然，这一切都会在运行时在反射的帮助下发生。

是否有任何现有的解决方案可以做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T02:31:31.787

您可以使用内置的[JsonResult](http://msdn.microsoft.com/en-us/library/system.web.mvc.jsonresult.aspx)类将对象实例返回为 JSON，但对于类型信息，您需要自己构建一些东西（同样可能返回为 JSON）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T02:33:24.277

```
Json.Encode(MyObject) 
```

或者获取 newtonsofts json 库（更好），它有很多选项，包括类型信息，这对于继承很有用。

但是....任何循环引用都是问题。通常，最好使用视图所需的最小对象结构制作匿名对象，然后对其进行编码。

# android - Android 上带有 PhoneGap 的 AAC

> ID：10712685
> 
> 赞同：5
> 
> 时间：2012-05-23T02:25:14.470
> 
> 标签：android, cordova, audio-streaming, phonegap-plugins, aac

是否有任何现有的插件可以在 Android 上使用 PhoneGap 播放 AAC？代码应该保持不变，因为它是 PhoneGap 的主要目标。但就目前而言，我了解到似乎没有本地方式来播放此 AAC 提要。

我用一些谷歌搜索找到了一些东西，但结果并不是我想要的。

# jquery - 脚本标签在 jquery 加载时未激活

> ID：10712686
> 
> 赞同：0
> 
> 时间：2012-05-23T02:25:24.093
> 
> 标签：jquery, tags, load

我的问题是，当我使用 jquery 将页面加载到 div 中时，脚本标签不会按照我希望的方式激活（尽管它们确实会根据我的判断激活）。

我见过几种不同的方法（例如 $.getScript();）来加载脚本。但是，无论我尝试什么，我都无法使效果与我实际将代码放在那里而不是加载它的方式相同。

因此，我想我的问题是我应该如何设置一些东西以使其具有与实际存在的代码相同的效果（如以通常的相同顺序激活）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T02:31:43.327

如果您询问如何将新元素插入到 div 中以响应诸如 之类的事件`click`，您应该在主标题脚本中使用以下内容：

```
$(document).on('click', "#mynewdiv", function() {----}); 
```

一旦在文档中创建了具有该 id 的 div，这将针对该 div，该文档在页面加载时已经存在。

如果您有一个已经存在的包装器元素，并且您想要定位特定于该元素的所有插入元素，您可以更精确地使用：

```
 $("#wrapper").on('click', "*", function() {----}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T02:41:15.017

我怀疑你会喜欢我的回答，因为它是邪恶的！但这是我知道的唯一方法。

您的脚本标签未激活的原因是没有将其附加到的事件。因此脚本无法自行激活。因此，这是使它们运行的​​最简单方法：

```
//find script tage in page html (your ajax call will return html, represented here as 'newPage'
var scriptAsStr = newPage.split('<script>')[1].split('</script>')[0];
// run that script with eval
eval(scriptAsStr); 
```

# javascript - 函数调用的意外标识符

> ID：10712692
> 
> 赞同：1
> 
> 时间：2012-05-23T02:26:20.320
> 
> 标签：javascript

我有一个简单的 onclick 功能，它调用了一个函数，但我得到了一个意外的标识符，但我没有看到错误在哪里，它实际上并没有给我错误，直到我点击了令人困惑的链接。

这是脚本：

```
function discard_item(id,name){
 alert('test');
 return false;
} 

function load(){
   name = 'test';
   id = 1;
   output = [];

   output.push('[<a href="#" onclick="return discard_item("'+id+'","'+name+'")">Discard</a>]');

   document.getElementById('main').innerHTML = (output.join(''));

}

load(); 
```

当我点击链接调用discard_item时，我得到：意外的令牌}

不过，似乎在我的脚本中看不到错误？ [http://jsfiddle.net/Lu2HK/6/](http://jsfiddle.net/Lu2HK/6/)

希望你能帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T02:35:20.597

### [试试这个：](http://jsfiddle.net/Lu2HK/13/)

更改`"`为转义`'`s：

```
output.push('[<a href="#" onclick="return discard_item(\''+id+'\',\''+name+'\')">Discard</a>]'); 
```

# c# - 对象引用未设置为带有字符串数组的对象消息的实例

> ID：10712695
> 
> 赞同：0
> 
> 时间：2012-05-23T02:26:43.097
> 
> 标签：c#, asp.net

我有以下代码：

```
protected void btnSave_Click(object sender, EventArgs e)
{
    StarBusModel.BookingDetail1 objBooking = new StarBusModel.BookingDetail1();
    objBooking.TourID = tourID;
    objBooking.Name = txtName.Text;
    objBooking.Phone = txtPhone.Text;
    objBooking.Amount = Convert.ToDecimal(Request.Form[txtAmount.ClientID]);

    string []  seats = Request.Form[txtSeatNo.ClientID].Split(new char[] {','});
    for (int i = 0; i < seats.Length; i++)
            objBooking.SeatDetails.Add(new StarBusModel.SeatDetail1() {SeatID = Convert.ToInt32(seats[i])});
    objEntities.BookingDetail1.AddObject(objBooking);        
    objEntities.SaveChanges();
    BindSeats();
} 
```

我得到错误

`System.NullReferenceException: Object reference not set to an instance of an object.`

在以下代码中：

```
string []  seats = Request.Form[txtSeatNo.ClientID].Split(new char[] {','}); 
```

请告知我哪里错了。我搜索了各种答案，但无法确定我错在哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T02:35:09.177

`Request.Form[txtSeatNo.ClientID]`显然是空的。通常，如果未定义给定键， `NameValueCollection`(like ) 将返回空字符串。`Request.Form`

你应该做一个检查：

```
string seatString = Request.Form[txtSeatNo.ClientID];
string [] seats = String.IsNullOrEmpty(seatString) ? new char[]{} :
     seatString.Split(new char[] {','}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:05:20.190

NullReferenceException 是一个非常令人头疼的异常。即使您可以通过查看堆栈跟踪知道发生异常的行。但它也可能包括不止一种可能性。

你的案例就是一个例子。

```
string []  seats = Request.Form[txtSeatNo.ClientID].Split(new char[] {','}); 
```

实际上在这一行中，有 2 个地方会导致 null 异常。他们是：

1.  txtSeatNo.ClientID
2.  Request.Form[txtSeatNo.ClientID]

通常第二个是最可能的。

所以最好多行编写代码，并在使用前检查值。我认为 Jacob Abrahams 举了一个很好的例子。

# python - 寻找更好的 python Google Calendar API 示例

> ID：10712697
> 
> 赞同：11
> 
> 时间：2012-05-23T02:26:46.887
> 
> 标签：python, google-api

我正在尝试编写一个可以将事件添加到谷歌日历的应用程序。
有一个非常简洁的网站可以让您使用 API。 [http://code.google.com/apis/explorer/#_s=calendar&_v=v3&_m=events.insert](http://code.google.com/apis/explorer/#_s=calendar&_v=v3&_m=events.insert)

使用该站点，我能够使用以下内容构建日历事件。我很难将它翻译成python。假设我已经通过 oauth 进行了身份验证，我该如何使用 python 代码执行此操作？看来我必须构建一个 json 字符串并以某种方式将其转换为 http 请求。我不知道该怎么做。

谁能提供一个如何使用 Python API 完成相同任务的示例？

非常感谢！

```
POST
https://www.googleapis.com/calendar/v3/calendars/my_calendar_id_string/events?pp=1&key={YOUR_API_KEY}

Content-Type:  application/json
Authorization:  Bearer ya29.ANOTHERBIGSLONGTRINGHEREFfxCTiKMIR_bDui
X-JavaScript-User-Agent:  Google APIs Explorer

{
"start": {
"dateTime": "2012-05-24T14:00:00-06:00"
},
"end": {
"dateTime": "2012-05-24T18:00:00-06:00"
},
"description": "My Description"
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2020-01-20T13:06:47.193

只是一个自插头：

有适用于 Python 的[Google Calendar Simple API](https://github.com/kuzmoyev/google-calendar-simple-api) (gcsa)（由我开发（*upd: 和其他贡献者*））。它更简单，更 Pythonic，面向对象。它为您处理凭据、JSON 格式、日期时间/时区、重复周期等。这是[文档](https://google-calendar-simple-api.readthedocs.io/en/latest/?badge=latest)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T13:03:12.687

检查所有 Python 示例的文档，例如这里显示如何创建事件：[https ://developers.google.com/google-apps/calendar/v3/reference/events/insert](https://developers.google.com/google-apps/calendar/v3/reference/events/insert)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-29T09:55:57.487

看到[这篇](https://karenapp.io/articles/how-to-automate-google-calendar-with-python-using-the-calendar-api/)带有大量截图的文章。

此外，[这个 GitHub 存储库](https://github.com/karenapp/google-calendar-python-api)有大量示例。

# iphone - 如何指定日期到字符串的转换格式

> ID：10712703
> 
> 赞同：0
> 
> 时间：2012-05-23T02:27:48.790
> 
> 标签：iphone, ios, date, uidatepicker

我正在创建一个应用程序，其中当前日期需要显示在标签中并每天自动更新。我看过一些教程，他们都展示了如何在 YYYY:DD:MM hh:mm 中获取日期，我想知道如何将这种格式更改为 DD/MMM/YYYY。

任何示例代码或教程链接将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T02:33:22.107

像这样的东西：

```
NSDate          *today     = [NSDate date];
NSDateFormatter *formatter = [[NSDateformatter alloc] init];

[formatter setDateFormat:@"dd/MMM/yyyy"];
[myLabel   setText:[formatter stringFromDate:today]]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T02:33:02.873

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat: @"dd/MM/yyyy"];

NSString *dateString = [dateFormatter stringFromDate: dayDate];

//display dateString in label

[dateFormatter release]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T02:34:17.133

您需要使用 NSDateFormatter。有关特定格式，请查看 [https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html)

```
NSDateFormatter *format = [[NSDateFormatter alloc] init];
[format setDateFormat:@"dd/MMM/yyyy"];

NSDate *now = [[NSDate alloc] init];

NSString *dateString = [format stringFromDate:now]; 
```

# java - 在 Main 函数中，在 try 块引发异常后，如何让它继续执行下一个 try 块

> ID：10712708
> 
> 赞同：0
> 
> 时间：2012-05-23T02:28:27.167
> 
> 标签：java

在 Main 函数中，在 try_block 引发异常后，该函数应该被中断。我的问题是如何让它继续执行到下一个 try_block。下面我举个例子：

```
public static void main(String [] s){
    ABC aBC = new ABC();
    try {
        aBC.execute();
    } catch (Exception e) {
        _log.error(ErrorCodeEnum.ERROR,
                "XXXXXXX!!! in " + new Date(),e);
    }
    BCD bCD = new BCD();
    try {
        bCD.execute();
    } catch (Exception e) {
        _log.error(ErrorCodeEnum.ERROR,
                "YYYYYYYYYYY!!! in " + new Date(),e);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T02:52:24.260

可以肯定的是，您可以将要执行的语句包装在一个`finally`块中，如下所示：

```
ABC aBC = new ABC();

try
{
    aBC.execute();
}
catch (Exception e)
{
    _log.error(ErrorCodeEnum.ERROR, "XXXXXXX!!! in " + new Date(), e);
}
finally
{
    BCD bCD = new BCD();

    try
    {
        bCD.execute();
    }
    catch (Exception e)
    {
        _log.error(ErrorCodeEnum.ERROR, "YYYYYYYYYYY!!! in " + new Date(), e);
    }
} 
```

`finally`无论外部块中是否发生异常，块中的语句都将被执行`try`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T02:34:40.690

代码应该按原样工作 - 即如果第一个块抛出并捕获异常，则第二个块仍应执行。

但是，您可能想要考虑捕捉`Throwable`而不是`Exception`真的想捕捉所有东西。特别是[java.lang.Error](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Error.html)不是 Exception 的子类，而是 Throwable 的子类。

# php - Wordpress 类别页面循环不显示图像和标题

> ID：10712719
> 
> 赞同：0
> 
> 时间：2012-05-23T02:31:06.027
> 
> 标签：php, wordpress

我是第一次来电的长期听众。

我正在研究一个 wordpress 主题，但我的类别页面上的一个循环遇到了问题。我在类别页面上有 2 个循环，我遇到问题的第一个循环是假设显示用户正在查看的任何类别的最新帖子，而 2 循环显示其余帖子的网格。除了第一个循环没有为帖子提取标题或特色图片外，这两个循环都有效。这是代码-

```
 <?php global $post; $cat_posts = get_posts('numberposts=1&category='.$catID);
foreach($cat_posts as $post) : ?>

<div class="featuredimagec"> <?php global $post; if(has_post_thumbnail()) {
the_post_thumbnail(); }?>
<p> <a href="<?php the_permalink() ?>"><?php the_post_thumbnail('large'); ?></a></p>   </div><div class="featuredcontenttex">
<?php $postTitle = get_the_title(); if($title != $postTitle) :?>
<h1><a href="<?php the_permalink(); ?>"><?php the_title(); ?>
</a></h1><?php the_excerpt(); ?>
</div>

</div>
<?php endif ;?>
<?php endforeach; ?>
<?php wp_reset_query(); ?> 
```

任何帮助，将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T02:45:51.030

改变：

```
foreach($cat_posts as $post) : ?> 
```

到：

```
foreach($cat_posts as $post) : setup_postdata($post); ?> 
```

# mysql - 将外部网站上的内容与 mySQL 数据库中的条目配对

> ID：10712724
> 
> 赞同：6
> 
> 时间：2012-05-23T02:32:15.137
> 
> 标签：mysql, html-parsing

**tl; dr：我正在寻找一种方法来查找我们数据库中缺少信息的条目，从网站获取该信息并将其添加到数据库条目中。**

* * *

我们有一个媒体管理程序，它使用一个 mySQL 表来存储信息。当员工下载媒体（视频文件、图像、音频文件）并将其导入媒体管理器时，他们*假设*还复制媒体描述（来自源网站）并将其添加到媒体管理器中的描述中。然而，这还没有为**数千个**文件完成。

文件名（例如**file123** .mov）是唯一的，可以通过转到源网站上的 URL 访问该文件的详细信息页面：

> website.com/content/file123 **_**

我们要从该页面中抓取的信息具有始终相同的元素 ID。

**在我看来，这个过程是：**

> 1.  连接数据库并**加载表**
> 2.  **过滤器**：`"format"`是`"Still Image (JPEG)"`
> 3.  **过滤器**：`"description"`是`"NULL"`
> 4.  获得第一个结果
> 5.  `"FILENAME"`无需扩展即可获取）
> 6.  **加载网址**：website.com/content/`FILENAME`
> 7.  复制元素的内容`"description"`（在网站上）
> 8.  将内容粘贴到`"description"`（SQL 条目）
> 9.  **获得第二个结果**
> 10.  **冲洗并重复直到达到最后一个结果**

**我的问题是：**

1.  是否有软件可以执行这样的任务，还是需要编写脚本？
2.  如果编写脚本，最好的脚本类型是什么（例如，我可以使用 AppleScript 实现这一点，还是需要用 java 或 php 等编写）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:27:26.233

1.  > 是否有软件可以执行这样的任务，还是需要编写脚本？

    我不知道有什么东西可以开箱即用（即使有，所需的配置也不会比滚动您自己的解决方案所涉及的脚本少得多）。

2.  > 如果编写脚本，最好的脚本类型是什么（例如，我可以使用 AppleScript 实现这一点，还是需要用 java 或 php 等编写）

    AppleScript 无法连接到数据库，因此您肯定需要添加其他内容。如果要在 Java 和 PHP 之间进行选择（并且您对两者都同样熟悉），我肯定会为此目的推荐 PHP，因为涉及的代码会少得多。

    你的 PHP 脚本看起来像这样：

    ```
    $BASEURL  = 'http://website.com/content/';

    // connect to the database
    $dbh = new PDO($DSN, $USERNAME, $PASSWORD);

    // query for files without descriptions
    $qry = $dbh->query("
      SELECT FILENAME FROM mytable
      WHERE  format = 'Still Image (JPEG)' AND description IS NULL
    ");

    // prepare an update statement
    $update = $dbh->prepare('
      UPDATE mytable SET description = :d WHERE FILENAME = :f
    ');

    $update->bindParam(':d', $DESCRIPTION);
    $update->bindParam(':f', $FILENAME);

    // loop over the files
    while ($FILENAME = $qry->fetchColumn()) {
      // construct URL
      $i = strrpos($FILENAME, '.');
      $url = $BASEURL . (($i === false) ? $FILENAME : substr($FILENAME, 0, $i));

      // fetch the document
      $doc = new DOMDocument();
      $doc->loadHTMLFile($url);

      // get the description
      $DESCRIPTION = $doc->getElementsById('description')->nodeValue;

      // update the database
      $update->execute();
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T03:11:14.790

PHP 是一个很好的**爬虫**。我在这里创建了一个包含 PHP 的 cURL 端口的类：

[http://semlabs.co.uk/journal/object-oriented-curl-class-with-multi-threading](http://semlabs.co.uk/journal/object-oriented-curl-class-with-multi-threading)

您可能需要使用一些选项：

[http://www.php.net/manual/en/function.curl-setopt.php](http://www.php.net/manual/en/function.curl-setopt.php)

为了抓取 HTML，我通常使用正则表达式，但这是我创建的一个类，它应该能够毫无问题地查询 HTML：

[http://pastebin.com/Jm9jKjAU](http://pastebin.com/Jm9jKjAU)

用途是：

```
$h = new HTMLQuery();
$h->load( $string_containing_html );
$h->getElements( 'p', 'id' ); // Returns all p tags with an id attribute 
```

抓取的最佳选择是 XPath，但它不能处理脏 HTML。您可以使用它来执行以下操作：

//div[@class = 'itm']/p[last() and text() = 'Hello World'] <- 选择具有 innerHTML 'Hello World' 的 div 元素中的最后一个 p

您可以在 PHP 中将其与 DOM 类（内置）一起使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-31T00:34:11.760

我也不知道有任何现有的软件包可以满足您的所有需求。但是，Python 可以连接到您的数据库、轻松地发出 Web 请求并处理脏 html。假设您已经安装了 Python，您将需要三个包：

*   [MySQLdb](http://sourceforge.net/projects/mysql-python/ "MySQL数据库")用于连接数据库。
*   [轻松发出 http web请求](http://docs.python-requests.org/en/latest/index.html "要求")的请求。
*   [BeautifulSoup](http://www.crummy.com/software/BeautifulSoup/ "美丽汤")用于强大的 html 解析。

您可以使用 pip 命令或 Windows 安装程序安装这些软件包。每个站点上都有相应的说明。整个过程不会超过10分钟。

```
import MySQLdb as db
import os.path
import requests
from bs4 import BeautifulSoup

# Connect to the database. Fill in these fields as necessary.

con = db.connect(host='hostname', user='username', passwd='password',
                 db='dbname')

# Create and execute our SELECT sql statement.

select = con.cursor()
select.execute('SELECT filename FROM table_name \
                WHERE format = ? AND description = NULL',
               ('Still Image (JPEG)',))

while True:
    # Fetch a row from the result of the SELECT statement.

    row = select.fetchone()
    if row is None: break

    # Use Python's built-in os.path.splitext to split the extension
    # and get the url_name.

    filename = row[0]
    url_name = os.path.splitext(filename)[0]
    url = 'http://www.website.com/content/' + url_name

    # Make the web request. You may want to rate-limit your requests
    # so that the website doesn't get angry. You can slow down the
    # rate by inserting a pause with:
    #               
    # import time   # You can put this at the top with other imports
    # time.sleep(1) # This will wait 1 second.

    response = requests.get(url)
    if response.status_code != 200:

        # Don't worry about skipped urls. Just re-run this script
        # on spurious or network-related errors.

        print 'Error accessing:', url, 'SKIPPING'
        continue

    # Parse the result. BeautifulSoup does a great job handling
    # mal-formed input.

    soup = BeautifulSoup(response.content)
    description = soup.find('div', {'id': 'description'}).contents

    # And finally, update the database with another query.

    update = db.cursor()
    update.execute('UPDATE table_name SET description = ? \
                    WHERE filename = ?',
                   (description, filename)) 
```

我会警告说，我已经努力使该代码“看起来正确”，但我还没有实际测试过它。您需要填写私人详细信息。

# c# - 创建表达式 > 使用反射

> ID：10712726
> 
> 赞同：29
> 
> 时间：2012-05-23T02:32:22.953
> 
> 标签：c#, reflection, lambda, moq, expression

我使用 Moq 创建数据集的模拟。

我创建了一个小助手类，它允许我拥有一个内存存储而不是一个使单元测试变得轻而易举的数据库。这样我就可以从我的模拟数据集中添加和删除项目，这允许我测试我的插入和删除服务调用。

在模拟的设置过程中，我有一条如下所示的线

```
this.Setup(i => i.AcademicCycles).Returns(mockStore.GetList<AcademicCycle>()); 
```

我的模拟有很多属性，所以我想使用反射来执行这个设置步骤。我已经设法`Returns`通过反射完成了该过程的一部分，但我被困在 lambda 方法上`Setup`。

`Setup`需要一个

`Expression<Func<GoalsModelUnitOfWork, IQueryable<AcademicCycle>>>`对应于`i => i.AcademicCycles`

我想动态创建它。使用反射我有以下内容：

物业名称：“AcademicCycles”

类型`IQueryable<AcademicCycle>`

类型`AcademicCycle`

我也有`i`lambda 语句中的实例，它是`GoalsModelUnitOfWork`

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-23T08:16:09.227

动态创建表达式的代码如下：

```
ParameterExpression parameter = Expression.Parameter(typeof (GoalsModelUnitOfWork), "i");
MemberExpression property = Expression.Property(parameter, "AcademicCycles");

var queryableType = typeof (IQueryable<>).MakeGenericType(typeof (AcademicCycle));
var delegateType = typeof (Func<,>).MakeGenericType(typeof (GoalsModelUnitOfWork), queryableType);

var yourExpression = Expression.Lambda(delegateType, property, parameter); 
```

结果将具有所需的类型，但问题是 is 的返回类型，`Expression.Lambda()`并且`LambdaExpression`您无法执行类型转换`Expression<Func<...>>`以将其作为参数传递给 setup 函数，因为您不知道`Func`. 所以你也必须`Setup`通过反射来调用该方法：

```
this.GetType().GetMethod("Setup", yourExpression.GetType()).Invoke(this, yourExpression); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T09:15:16.027

我决定试一试，最终得到了这段糟糕透顶的代码。

我不是反思专家，这只是第一次尝试让某些东西发挥作用。我会对人们拥有的其他方法非常感兴趣，或者是否有任何 relfection 包装库可以使它变得更好。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Linq.Expressions;
using System.Reflection;
using Moq;
using Xunit;

namespace MyExample
{
    public class Tests
    {
        [Fact]
        public void Test()
        {
            Dictionary<Type, object> data = new Dictionary<Type, object>
            {
                { typeof(IQueryable<Cycle>), new List<Cycle> { new Cycle { Name = "Test" } }.AsQueryable() },
                { typeof(IQueryable<Rider>), new List<Rider> { new Rider { Name = "1"}, new Rider { Name = "2" } }.AsQueryable() }
            };

            var mock = new Mock<IDataContext>();
            var setup = mock.GetType().GetMethods().Single(d => d.Name == "Setup" && d.ContainsGenericParameters);
            var param = Expression.Parameter(typeof(IDataContext), "i");
            foreach (var property in typeof(IDataContext).GetProperties(BindingFlags.Public | BindingFlags.Instance))
            {
                // Build lambda
                var ex = Expression.Lambda(Expression.MakeMemberAccess(param, property), param);

                // Get generic version of the Setup method
                var typedSetup = setup.MakeGenericMethod(property.PropertyType);

                // Run the Setup method
                var returnedSetup = typedSetup.Invoke(mock, new[] { ex });

                // Get generic version of IReturns interface
                var iReturns = typedSetup.ReturnType.GetInterfaces().Single(d => d.Name.StartsWith("IReturns`"));

                // Get the generic Returns method
                var returns = iReturns.GetMethod("Returns", new Type[] { property.PropertyType });

                // Run the returns method passing in our data
                returns.Invoke(returnedSetup, new[] { data[property.PropertyType] });
            }

            Assert.Equal(1, mock.Object.Cycles.Count());
        }
    }

    public class Cycle
    {
        public string Name { get; set; }
    }

    public class Rider
    {
        public string Name { get; set; }
    }

    public interface IDataContext
    {
        IQueryable<Cycle> Cycles { get; set; }

        IQueryable<Rider> Riders { get; set; }
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T17:49:50.277

这个方法应该构造 lambda 表达式。由于您通过反射调用 Setup 方法，因此不需要强类型的 lambda 表达式；当您调用时，您将把它作为对象数组的一部分传递`Invoke`：

```
 public LambdaExpression PropertyGetLambda(string parameterName, Type parameterType, string propertyName, Type propertyType)
    {
        var parameter = Expression.Parameter(parameterType, parameterName);
        var memberExpression = Expression.Property(parameter, propertyName);
        var lambdaExpression = Expression.Lambda(memberExpression, parameter);
        return lambdaExpression;
    } 
```

我认为您实际上并不需要参数名称。如果我是对的，你可以简化一点：

```
 public LambdaExpression PropertyGetLambda(Type parameterType, string propertyName, Type propertyType)
    {
        var parameter = Expression.Parameter(parameterType);
        var memberExpression = Expression.Property(parameter, propertyName);
        var lambdaExpression = Expression.Lambda(memberExpression, parameter);
        return lambdaExpression;
    } 
```

# jquery - 使用 JQuery 从 XML 导出文本和创建按钮

> ID：10712730
> 
> 赞同：0
> 
> 时间：2012-05-23T02:33:32.657
> 
> 标签：jquery, xml, import

我正在从 xml 工作表中导入多个文本，并使用 Jquery 在现有的 html 页面和 div 中动态创建可点击按钮。

文本和可点击按钮似乎导入正常，按钮对鼠标悬停、可点击性等做出反应——所有功能似乎都在那里——但我在 .html 页面中的 .click 函数中的脚本不起作用。

作为故障排除，我将 html 复制并直接从实时页面（使用相同方法从 xml 导入后）粘贴到同一个 html 页面中，并且该按钮可以正常工作 - 正如您所期望的那样。这与 xml 导入一起工作或不工作的方式有什么奇怪的吗？

这是从 xml 表代码块导入的完整 JQuery：

```
$(function(){    
        $('#hideText').click(function() {  
        $("#readingText").fadeOut(100);
        $("#viewText").fadeIn();
        $("#hideText").fadeOut();
        var qnum = 1;           

        $("#questions").empty();
            $.ajax({
                type: "GET",
            url: "mc1.xml",
            dataType: "xml",
            success: function(xml) {
                var quiz = "quiz"+qnum ++;
                $(xml).find(quiz).each(function(){
                var id = $(this).attr('id');
                var questionNo = $(this).find('questionNo').text();
                var q1 = $(this).find('q1').text();
                var A = $(this).find('A').text();

                $('<div class="items" id="link_'+id+'"> 
 </div>').html( '<p style="color:green">'+questionNo+  '</p>' + '<p style="color:red">'
 +q1+ '</p>' + '</p>').appendTo('#questions');
$(this).find('choice').each(function(){
var A = $(this).find('A').text();
var B = $(this).find('B').text();
var C = $(this).find('C').text();
var D = $(this).find('D').text();
var E = $(this).find('E').text();
 $('<div id = "AA" class="1" ></div>').html('<p class="tab2"> <a href="#" 
     class="q_but">A</a> '+A+' <br><br> ').appendTo('#link_'+id);
 $('<div id = "BB" class="2"></div>').html('<p class="tab2"> <a href="#"    
 class="q_but">B</a> '+B+' <br><br>').appendTo('#link_'+id);
 $('<div id = "CC" class="3"></div>').html('<p class="tab2"> <a href="#" 
 class="q_but">C</a> '+C+' <br><br>').appendTo('#link_'+id);
 $('<div id = "DD" class="4"></div>').html('<p class="tab2"> <a href="#" 
 class="q_but">D</a> '+D+' <br><br>').appendTo('#link_'+id);
 $('<div id = "EE" class="5"></div>').html('<p class="tab2"> <a href="#" 
 class="q_but">E</a> '+E+' <br><br>').appendTo('#link_'+id);
$("#questions").fadeIn(2000);           

                    });
                });
            }
        })
    });
}); 
```

这是一个测试点击功能，用于测试导入的按钮是否正常工作

```
$(function(){    
        $('#AA').click(function() {  
        $("#questions").fadeOut();
        });
    }) 
```

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T02:48:18.600

我认为当数据加载到 DOM 中并且您无法使用简单的单击访问“AA”时，问题就出现了。

试试这个，`on()`相当于弃用`live()`

```
$(function(){    
   $('#AA').on('click', function(){  
      $("#questions").fadeOut();
   });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:53:30.720

抱歉，我的修改没有获得批准！哈哈。所以可行的方法`.on()`是将事件处理程序附加到父元素，并等待事件从被单击的元素中冒泡。`.live()`是它的前身，并且通过将事件附加到`body`元素来工作 - 这意味着在事件实际得到处理之前会有大量的冒泡。

基本上，我们在做同样的事情，只是我们添加了一个额外的参数，它是稍后要添加的元素的类名（或任何 CSS 选择器）！

```
$(function(){    
   $('#link_1').on('click', '.q_but', function(){ 
      $("#questions").fadeOut();
   });
}); 
```

添加它`#AA`不起作用，因为它也是在`document ready`事件之后添加的 - 所以现在我输入`#link_1`- 你需要为每个 ID 更改它 - 虽然，如果这样做会更好（并且你的代码会更整洁）所有的`#link_x`元素都有一个类！

（手指交叉这次它有效！）

=)

# php - 设置 cakephp 后终端中没有新行

> ID：10712733
> 
> 赞同：0
> 
> 时间：2012-05-23T02:33:59.110
> 
> 标签：php, macos, cakephp, terminal

我试图设置 vi .profile 以在 cakephp 中烘焙，但现在当我打开终端（mac OSX）时出现以下错误

```
PHP Warning:  PHP Startup: Unable to load dynamic library '/Applications/XAMPP/xamppfiles/lib/php/php-5.3.1/extensions/no-debug-non-zts-20090626/php_gd2.dll' - dlopen(/Applications/XAMPP/xamppfiles/lib/php/php-5.3.1/extensions/no-debug-non-zts-20090626/php_gd2.dll, 9): image not found in Unknown on line 0 
```

我无法在终端中输入任何命令，然后按回车键只会放下该行。终端的“标题”是 PHP 5.3.1，所以我不确定它是否以某种方式离开了标准用户模式（不管它叫什么）。我重新启动了计算机，终端打开时显示相同的消息。

我可以在菜单中输入某种命令来恢复吗？有人可以帮我让终端恢复“正常”吗？

编辑 - 我去 shell->new 命令并输入 su root; 登录。但是，当我打开一个新的终端窗口时，我仍然得到相同的 php 错误，并且我无法弄清楚如何在终端打开时正常登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T03:15:17.117

在`~/.profile`OSX 上默认为空（至少在我的机器上）。因此，只需将所有内容注释掉或删除您为 cakePHP 添加的部分，就可以清除那些弄乱新 shell 的部分。

# backbone.js - Backbone > 多个路由器和 History.start

> ID：10712734
> 
> 赞同：3
> 
> 时间：2012-05-23T02:34:15.160
> 
> 标签：backbone.js

我想让多个路由器生活在一个页面上以实现模块化。`$(document).ready()`我在不同的 js 文件中初始化路由器。当我只有一个可以正常工作的路由器时，因为我可以`History.start()`在初始化路由器后立即调用，但现在我有多个可以从不同文件初始化的路由器，我不确定何时调用`History.start()`.

例如：

```
<script src="router1.js" type="text/javascript"></script>
<script src="router2.js" type="text/javascript"></script> 
```

在 router1.js 中：

```
$(document).ready(function(){
  new Core.Routers.Router1()
}); 
```

路由器2也是如此。

最好的解决方案是在页面末尾添加一个新`$(document).ready()`的调用吗？`History.start()`我不认为文档就绪调用是阻塞的，所以这不会引入一个竞争条件，即所有路由器在`History.start()`被调用时可能还没有被初始化。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T02:57:51.990

你只需要`Backbone.history.start()`在你的应用程序中调用一次，调用它的唯一标准是至少一个路由器必须已经实例化。

因此，您可以轻松地做到这一点：

```
 $(function(){
  new MyRouter();
  Backbone.history.start();
});

$(function(){
  new AnotherRouter();
});

$(function(){
  new AndMoreRouters();
}); 
```

我定期对路由器做类似的事情，并且我经常在页面加载很久并且用户与页面交互之后启动新路由器。

不过，FWIW，您可能对我在我的 Backbone.Marionette 插件中拥有的初始化程序的想法感兴趣，并作为这篇博客文章的一部分进行了记录：http: [//lostechies.com/derickbailey/2011/12/16/composite-javascript-带有骨干和骨干木偶的应用程序/](http://lostechies.com/derickbailey/2011/12/16/composite-javascript-applications-with-backbone-and-backbone-marionette/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T03:17:36.970

您还可以检查`Backbone.History.started`...

```
 var Router = Backbone.Router.extend({
        routes: {
            '': 'load'
        },
        initialize: function () {

        },
        load: function () {

        }
    });

    $(function () {
        new Router();
        if (!Backbone.History.started) {
            Backbone.history.start();
        }
    }); 
```

它是最近在拉取请求中添加的。

一定要看看 Derick 的 Marionette 插件，它非常棒。

# asp.net-mvc-3 - Umbraco 5：网站搜索

> ID：10712736
> 
> 赞同：3
> 
> 时间：2012-05-23T02:34:22.523
> 
> 标签：asp.net-mvc-3, search, razor, umbraco, umbraco5

是否有一种可行的方法来搜索 Umbraco 5 网站？我已经阅读了很多关于 XLST 搜索的内容，但没有使用 MVC3。似乎 Examine 也出现了一些问题，因为即使是后台也丢失了 v4 中存在的搜索框。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T07:11:21.503

如您所知，Umbraco V5 即将退役；您可以尝试 4.x 并使用使用 umbraco 节点工厂执行搜索逻辑的用户控件执行上述操作。

希望你能得到我的意见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T09:32:26.343

我创建了一个非常基本的搜索，它可能不是最好的方法，但它提供了我需要的结果。

```
var results = Hive.QueryContent().OfRevisionType(FixedStatusTypes.Published).ToList().Where(c => c.AllAncestorIds().Any() && c.Name.ToLowerInvariant().Contains(query.ToLowerInvariant()) && c.Attribute<bool>("excludeFromSearch") == false).ToList(); 
```

`OfRevisionType(FixedStatusTypes.Published)`返回已发布的页面 `c.AllAncestorIds().Any()`停止返回已删除的项目

# android - 图像尺寸加倍

> ID：10712737
> 
> 赞同：1
> 
> 时间：2012-05-23T02:34:25.190
> 
> 标签：android, image, bitmap, drawable

这可能是一个快速的答案，但我一定不知道要搜索什么，因为我找不到任何人在谈论它！我的 drawables 文件夹中有一些 88x88 像素的 png 文件。我运行我的应用程序并打印出图像大小的日志，并声称它们是 176x176。是什么赋予了？是在我的图像进入 apk 之前扩展了我的图像，还是我的手机真的只有它声称的分辨率的一半？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T02:41:23.573

`BitmapFactory.decodeResource`根据设备的 DPI缩放`Drawable`文件夹中的图像（它为高分辨率屏幕生成更高分辨率的图像）。

如果您不希望图像在解码时缩放，请将其放在文件夹中`Drawable-nodpi`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T02:41:56.367

从[本](http://developer.android.com/guide/practices/screens_support.html)指南：

“默认情况下，Android 会缩放您的位图可绘制对象（.png、.jpg 和 .gif 文件）和九补丁可绘制对象（.9.png 文件），以便它们在每个设备上以适当的物理尺寸呈现。例如，如果您的应用程序仅为基线、中等屏幕密度 (mdpi) 提供位图可绘制对象，然后系统在高密度屏幕上放大它们，在低密度屏幕上缩小它们。这种缩放可能会导致在位图。为确保您的位图看起来最好，您应该包括针对不同屏幕密度的不同分辨率的替代版本。

所以是的，您的屏幕可能是密度为 2 的 xhdpi，因此未指定的可绘制文件夹中的图像大小为 x2。

# sql - 在 SQL 中创建表

> ID：10712740
> 
> 赞同：1
> 
> 时间：2012-05-23T02:34:46.120
> 
> 标签：sql

我不确定为什么这种语法不起作用。我想创建一个合并两个现有表的新表。

```
CREATE TABLE blah(
SELECT T1.Q1, T1.Q2, T1.Q3, T1.ID, T1.QOL, T2.ID, T2.L1, T2.L2
FROM T1, T2
WHERE T1.ID = T2.ID) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T06:51:50.653

是的，整个查询是正确的，只是缺少 AS。

```
CREATE TABLE blah AS (
SELECT T1.Q1, T1.Q2, T1.Q3, T1.ID, T1.QOL, T2.ID, T2.L1, T2.L2
FROM T1, T2
WHERE T1.ID = T2.ID); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T02:39:05.893

看起来你在这里失踪了，试试

```
CREATE TABLE blah as (
SELECT T1.BUSINESSNAME, T1.STREETADDRESS, T1.CITYNAME, T1.ID, T1.QOL, T2.ID, T2.L1, T2.L2
FROM T1, T2
WHERE T1.ID = T2.ID) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T02:47:14.973

```
SELECT T1.Q1, T1.Q2, T1.Q3, T1.ID, T1.QOL, T2.ID, T2.L1, T2.L2
INTO blah
FROM T1, T2
WHERE T1.ID = T2.ID 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T02:50:00.890

列 ID 的名称被指定了两次：在 T1.ID 和 T2.ID 中。至少在 postgres 中这是不被接受的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T06:58:43.667

您可以使用以下代码创建表

```
SELECT *
INTO #MyNewTable
FROM SourceTale 
```

# vb.net - 将变量从子级传递给父级，就像函数 VB.NET

> ID：10712741
> 
> 赞同：0
> 
> 时间：2012-05-23T02:34:57.053
> 
> 标签：vb.net, forms, vba, parent

我创建了 2 个表单（父表单和子表单），我想将唯一的文本框值存储到父表单的变量中。

也像这样：

家长代码：

```
dim passed_value = new childform()
passed_value.show() 
```

关闭时：

使用子表单文本框值刷新 pass_value 变量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T04:43:45.073

您可以执行以下操作来完成任务：

*   `String`在子窗体中声明一个变量。

```
 Public value As String 
```

*   `ShowDialog()`在主窗体中使用以显示子窗体。

```
 Dim frm As New Form2
    frm.ShowDialog() 
```

*   [`value`根据您的需要在表格中设置]

```
 value = "New Value" 
```

*   现在`value`从子窗体中获取变量并根据它设置文本框文本。

```
 TextBox1.Text = frm.value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T13:58:19.960

我会把它变成一个属性并给它必要的访问权限，在我看来是`ReadOnly`.

```
Private _myValue As DataType

Public ReadOnly Property MyValue() As DataType
Get
    Return _myValue
End Get 
```

您可以这样访问它：`myForm.MyValue`.

# java - Twitter4j，“查询中指定的字词过多”

> ID：10712742
> 
> 赞同：1
> 
> 时间：2012-05-23T02:34:57.173
> 
> 标签：java, android, twitter4j

我使用以下方法获取所有关注已验证用户的用户的屏幕名称。

```
private void getFollowing() {   
     Twitter t = new TwitterFactory().getInstance();
     t.setOAuthConsumer(OAUTH.CONSUMER_KEY, OAUTH.CONSUMER_SECRET);
     aToken = getToken();
     t.setOAuthAccessToken(aToken);
     try {
        long[] friendsID = t.getFriendsIDs(userID, -1).getIDs();
        ResponseList<User> userName = t.lookupUsers(friendsID);
        int count = 0;
        for (User u : userName) {
            count++;
            Log.d("USERNAME : "+ Integer.toString(count), u.getScreenName());
        }
     } catch (TwitterException e) {
        e.printStackTrace();
    }
} 
```

`t.lookupUsers(friendsID)`导致以下错误。

`W/System.err(16076): {"errors":[{"code":18,"message":"Too many terms specified in query"}]}`

据我了解，该`lookupUsers()`方法一次将返回最多 100 个用户的信息。我提供的不止这些。这可能是为什么？如果是这样，我如何限制原始请求并遍历剩余用户以获取他们的所有屏幕名称？

如果我对为什么会收到错误有误，我还做错了什么？

**回答**

```
 private void getFollowing() {   
         Twitter t = new TwitterFactory().getInstance();
         t.setOAuthConsumer(OAUTH.CONSUMER_KEY, OAUTH.CONSUMER_SECRET);
         aToken = getToken();
         t.setOAuthAccessToken(aToken);
         ArrayList<String> names = new ArrayList<String>();
         try {
            int start = 0;
            int finish = 100;
            ArrayList<Long> IDS = new ArrayList<Long>();
            long[] friendsID =  t.getFriendsIDs(userID, -1).getIDs();
            boolean check = true;
            while (check) {
                for (int i=start;i<finish;i++) {
//get first 100     
                    IDS.add(friendsID[i]);
//if at the end, stop
                    if (friendsID.length-1 == i) {
                        check = false;
                        break;                      
                    }
                }
//set values for next 100
                start = start+100;
                finish = finish+100;
                long[] ids = Longs.toArray(IDS);
                ResponseList<User> userName = t.lookupUsers(ids);
//clear so long[] holds max 100 at any given time
                IDS.clear();
                for (User u : userName) {
                    names.add(u.getScreenName());
                }
            }
            String[] screenNames = (String[]) names.toArray(new String[names.size()]);

            ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_dropdown_item_1line, screenNames);
            mPreview.setAdapter(adapter);
         } catch (TwitterException e) {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T21:02:10.920

```
private void getFollowing() {   
     Twitter t = new TwitterFactory().getInstance();
     t.setOAuthConsumer(OAUTH.CONSUMER_KEY, OAUTH.CONSUMER_SECRET);
     aToken = getToken();
     t.setOAuthAccessToken(aToken);
     ArrayList<String> names = new ArrayList<String>();
     try {
        int start = 0;
        int finish = 100;
        ArrayList<Long> IDS = new ArrayList<Long>();
        long[] friendsID =  t.getFriendsIDs(userID, -1).getIDs();
        boolean check = true;
        while (check) {
            for (int i=start;i<finish;i++) {
                //get first 100     
                IDS.add(friendsID[i]);
                //if at the end, stop
                if (friendsID.length-1 == i) {
                    check = false;
                    break;                      
                }
            }
            //set values for next 100
            start = start+100;
            finish = finish+100;
            long[] ids = Longs.toArray(IDS);
            ResponseList<User> userName = t.lookupUsers(ids);
            //clear so long[] holds max 100 at any given time
            IDS.clear();
            for (User u : userName) {
                names.add(u.getScreenName());
            }
        }
        String[] screenNames = (String[]) names.toArray(new String[names.size()]);

        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_dropdown_item_1line, screenNames);
        mPreview.setAdapter(adapter);
     } catch (TwitterException e) {
        e.printStackTrace();
    }
} 
```

# c# - 同步 Web 浏览器到字符串导航

> ID：10712744
> 
> 赞同：0
> 
> 时间：2012-05-23T02:35:04.967
> 
> 标签：c#, wpf, browser

使用 WPF Web 浏览器控件同步导航到字符串的最佳方法是什么？

我知道 WebBrowser.NavigateToString(string) 确实显示了一个字符串，但它是异步完成的——不是同步的。最重要的是，WebBrowser.NavigateToString 始终在 WebBrowser.Document 区域中返回 null 正文，而 WebBrowser.Navigate 实际上在文档中返回正文。

在 WinForms 中我可以这样做： WebBrowser.Document.Write(html); 但在 WPF 中，我想不出一个好方法来做到这一点。我有一个导航到字符串并返回值的函数，所以我不想使用 WebBrowser.Navigated 事件...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T14:16:49.390

您需要先使用 HttpWebRequest 检索正文，然后根据需要对其进行处理，然后再将其显示在 WebBrowser 中

# jquery - 如果大于某个数字，则将索引值重置为 self

> ID：10712747
> 
> 赞同：0
> 
> 时间：2012-05-23T02:35:29.660
> 
> 标签：jquery, arrays, html, indexing, html5-video

我一直在努力处理数组及其增量，但我认为我有一个解决方案。也许。问题是当视频在数组中结束时，它会为我使用的播放视频功能增加一个增量。这不是问题，除非您单击视频时它会不断增加。

我意识到我应该能够在我点击时将索引值重置为视频的索引值，无论它是什么，也不管我点击了多少次。然后，当视频结束时，繁荣，增量为`$("#myVid").index()`+1。

我只需要知道如何写这个。我试过只`index= $("#myVid").index()`在onclick下，但这不起作用。我也尝试将它包装在一个 if 函数中（这看起来有点矫枉过正），就像这样：

```
if (index >= $("#myVid").index()) {
    index= $("#myVid").index()
} 
```

那么，如何将索引值设置为正在播放的视频的值？而且， no`index = $(this).index();`​​不起作用，因为它所做的只是在`click`'s 函数的开头重述当前索引值。

如有任何意见，我将不胜感激~

编辑：每个请求，完整的功能和 html...

所以，html是

```
 <div id="wrapper"><div id="MyT"></div>
    <div class="buttons">
        <div id="content">
          <div class="control">
          <div class="progress"><span class="timeBar"></span></div></div>
            <div class="slider"></div>
            <ul class='thumbs'>
                <li rel='1'><div style="top:0px;"><img src="graphics/filler.png" alt="" width="280" height="128" /></div></li>
                <li rel='2'><div style="top:128px;"><img src="graphics/filler2.png" alt="" width="280" height="128" /></div></li>
                <li rel='3'><div style="top:256px;"><img src="graphics/filler.png" alt="" width="280" height="128" /></div></li>
                <li rel='4'><div style="top:384px;"><img src="graphics/filler2.png" alt="" width="280" height="128" /></div></li>
                <li rel='5'><div style="top:512px;"><img src="graphics/filler.png" alt="" width="280" height="128" /></div></li>
                <li rel='6'><div style="top:640px;"><img src="graphics/filler2.png" alt="" width="280" height="128" /></div></li>
            </ul>
       </div>
    </div>
<div id="bigPic">
 <video id="myVid" alt="" class="normal" type="m4v" showlogo="false" height="768" width="1024"/>
</div> 
```

然后是
点击的相关完整功能

```
$('li', '.thumbs').on('touchstart click', function() {
    index = $(this).index();
    var myVideo = document.getElementById('myVid');
        myVideo.src = videos[index];
        myVideo.load();
        myVideo.play();
        if (index >= $("#myVid").index()) {
            index= $("#myVid").index()
                } 
```

然后接下来的戏

```
 $("#myVid").bind("ended", function() {
            $("#bigPic").removeClass("move");
            $("#MyT").fadeIn(250);
            function playArray(ele, array) {
                if (index   >= array.length) {
                    index = 1;
                }
                if ($("#myVid").index() < index+1) {
                    index++;    
                }

                ele.src = array[index];
                ele.load();
                ele.play();
            }
            playArray(document.getElementById("myVid"), videos);
        });
    }); 
```

编辑：好的，这里有一个[jsfiddle](http://jsfiddle.net/nata2ha/Tr7K9/)，具有所有功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T03:55:21.993

这并不是一个完整的解决方案，因为我不太了解您对问题的解释，但是...

您使用 jQuery[`.index()`方法](http://api.jquery.com/index/)`$("#myVid").index()`不是找出当前视频索引的合适方法，因为它总是只返回“myVid”元素相对于其兄弟元素的索引（永远不会改变）。您`.index()`在“li”单击处理程序中正确使用了，因为（据我所知）您实际上希望在这种情况下相对于兄弟姐妹的索引来告诉您单击了哪个。

我认为如果你整理你的代码会对你有很大帮助。不要重复设置视频源并加载和播放它的代码 - 将这些内容移动到单个函数中，然后从需要它的不同位置调用该函数：

```
var videos = [ /* your array of videos, you don't
                  show how this is defined */ ],
    currentVideo;

function playVideo(videoNumToPlay) {
   var myVideo = document.getElementById('myVid');
   myVideo.src = videos[videoNumToPlay];
   myVideo.load();
   myVideo.play();
   currentVideo = videoNumToPlay;
}

$('li', '.thumbs').on('touchstart click', function() {
    playVideo( $(this).index() );
});

$("#myVid").bind("ended", function() {
   $("#bigPic").removeClass("move");
   $("#MyT").fadeIn(250);       
   playVideo( (currentVideo + 1) % videos.length );
}); 
```

我看不出上面会出现什么问题，因为现在开始播放视频的代码中唯一的位置是在新`playVideo()`函数中，并且该函数采用`videoNumToPlay`要播放的视频的参数并将该数字保存在`currentVideo`so 中我们可以使用“结束”处理程序`currentVideo`来找出高一的索引（根据需要环绕到数组的开头）。

如果您还需要设置一些类来突出显示与当前播放的视频相对应的 li 或者我会使用该`playVideo()`功能执行的操作。（您显然还有其他代码没有显示，但我无法准确猜出您在其他代码中所做的事情。）

# mongodb - MongoDB - 我如何找到另一个集合中的文档未引用的所有文档

> ID：10712751
> 
> 赞同：19
> 
> 时间：2012-05-23T02:36:40.113
> 
> 标签：mongodb

所以这里是问题：

我在集合 A 中有文档，当它首次创建时，它没有被任何其他文档引用。在某个时候，集合 B 中的一个文档将被创建，它将引用集合 A 中文档的 ObjectId。

什么是查找集合 A 中未由集合 B 中的 I 文档引用的所有文档的最佳方法？

我了解 MongoDB 不支持连接，但我想知道除了从集合 B 获取所有引用的 ObjectId 并在集合 A 中查找不在该列表中的文档之外，是否有解决此问题的方法，因为此解决方案可能不会规模化。

我可以将集合 A 中的文档嵌入到集合 B 中的文档中，然后将其从集合 A 中删除吗？这是最好的解决方案吗？

感谢您的帮助和评论。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2016-09-18T09:01:09.440

在 MongoDB 3.2 中，添加[`$lookup`](https://docs.mongodb.com/manual/reference/operator/aggregation/lookup/)运算符使这成为可能：

```
db.a.aggregate(
[
    {
        $lookup: {
            from: "b", <-- secondary collection name containing references to _id of 'a'
            localField: "_id",  <-- the _id field of the 'a' collection
            foreignField: "a_id", <-- the referencing field of the 'b' collection
            as: "references"
        }
    },
    {
        $match: {
            references: []
        }
    }
]); 
```

上面的查询将返回 collection`a`中没有在 collection 中引用的所有文档`b`。

不过要小心。性能可能会成为大型集合的问题。

* * *

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-23T04:30:07.420

很多选择：

1）将B文档的id添加到A文档中的一个数组中（反向引用）。现在您可以查找在该数组中没有任何元素的 A 文档。问题：如果您有很多交叉引用，数组可能会变得太大而无法满足文档大小。

2) 添加一个集合 C 来跟踪 A 和 B 之间的引用。表现得像一个连接表。

3）在“引用”中有一个简单的标志。当您添加 B 时，将它引用的所有 A 标记为“已引用”。当您删除 B 时，请扫描 B 以查找它所引用的所有 A，并取消标记任何不再具有引用的 A。问题：可能会不同步。

4) 在 B 上使用 map reduce 来创建一个集合，其中包含任何 B 引用的所有 A 的 id。使用该集合标记所有被引用的 A（在首先取消所有标记之后）。可以使用它定期修复 (3)。

5) 将两种文档类型放在同一个集合中，并使用 map reduce 发出 _id 和一个标志来表示“在 A 中”或“被 B 引用”。在减少步骤中，查找具有“在 A 中”但不是“被 B 引用”的任何组。

...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T03:51:46.993

由于没有连接，唯一的选择是您提到的一次：要么使用嵌入式文档，要么让自己使用两部分查询。

这取决于您的实现，但将文档类型 B 添加到 A 中的相应文档听起来是最好的选择。这样，您可以使用简单的查询（[$exists 运算符](http://www.mongodb.org/display/DOCS/Advanced+Queries#AdvancedQueries-%24exists)）检索没有 B 的 A ...

```
A.find( { B: { $exists: false } }) 
```

# visual-studio - 无法使用代理存根 dll 创建 com 对象

> ID：10712752
> 
> 赞同：1
> 
> 时间：2012-05-23T02:36:46.527
> 
> 标签：visual-studio, com, atl

使用 Visual c++ 6.0，我创建了一个基于 ATL 的 .EXE 服务器。（VC6 因为我正在处理遗留代码，.exe 服务器因为我需要在进程外上下文中测试操作，目前 .exe 服务器本质上是无操作的）

我已经构建并注册了相应的代理存根 DLL。

我有一个客户端应用程序

1.  IUnknown 的 CoCreateInstance 在服务器对象中调用 FinalConstruct 并成功（因此服务器被正确调用）
2.  返回的IUnknown接口的OleRun成功
3.  我的服务器对象的 IUnknown 指针上的 QueryInterface 失败，IMarshall 接口的错误代码为 0x8000402（不支持此类接口）

这些步骤是从 (comip.h::CreateInstance) 复制的

问题似乎是没有调用proxystub dll（它没有出现在IDE的模块列表中，也没有出现在调试窗口的加载模块列表中）

[我的班级和界面的 OleCom 对象查看器可以在这里看到](https://skydrive.live.com/redir?resid=AE43106917EBD9E1!191&authkey=!AIOWeS5P3o2mlpw)https://skydrive.live.com/redir?resid=AE43106917EBD9E1!191&authkey=!AIOWeS5P3o2mlpw

8891..ca4d 是我的对象的类接口 ID

A298...420c 是我的服务器对象的接口 ID（基于 IDispatch）

TIA 提供任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T00:07:03.953

您的问题可能是实现 IRunnableObject 接口的组件未在运行对象表中注册自身。这意味着 CoCreateInstance 本身会成功，但是，当它调用对象时，RPC 代码将无法找到它。

此 MSDN 页面指示： http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms694517 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms694517(v=vs.85).aspx)

```
 Notes to Implementers
    The object should register in the running object table if it has a 
    moniker assigned. The object should not hold any strong locks on itself; 
    instead, it should remain in the unstable, unlocked state. The object 
    should be locked when the first external connection is made to the object. 
```

我有点担心你为什么还要使用 IMarshall 界面。通常不需要编写自定义编组代码，因此您不需要使用此接口。

只要您不引用自定义接口，就会使用 ole32.dll 或 oleauto32.dll 中的默认编组器。这很可能是您看不到代理正在加载的原因。

```
 In the case of most COM interfaces, the proxies and stubs for standard 
    marshaling are in-process component objects which are loaded from a 
    systemwide DLL provided by COM in Ole32.dll. 
```

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms692621(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms692621(v=vs.85).aspx)

# visual-studio-2010 - Visual Studio 每次都构建

> ID：10712757
> 
> 赞同：3
> 
> 时间：2012-05-23T02:37:59.467
> 
> 标签：visual-studio-2010

我正在运行 VS2010，正常调试，突然我注意到我的代码更改没有效果。此外，即使我只是输入一些随机的废话并点击“播放”，它仍然可以构建。我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T02:45:04.710

我会在*工具 --> 选项 --> 项目和解决方案 --> 构建和运行部分*检查您的设置，确保选择**保存所有更改**并且未选择**启动旧版本**。

![在此处输入图像描述](../Images/3a336983a9786b9920a84096cc1f6d2f.png)

# c# - Visual Studio：类文件名更改的时间和原因将自动更新对该类的引用

> ID：10712763
> 
> 赞同：2
> 
> 时间：2012-05-23T02:39:47.740
> 
> 标签：c#, visual-studio-2010

有时，当我使用 Visual Studio 并更改包含代码元素（即类、接口）的文件的名称时，我会收到一个非常有用的提示，该提示提供自动更新该代码元素的所有引用/使用到新文件姓名。

而其他时候我没有。

在所有情况下，我指的是代码元素文件名与代码元素类型名称匹配的时间。

为什么有时会发生有时不会？

我认为这与预定义链接或 VS 实时解决依赖关系的能力有关。

然而，我已经玩过这个，虽然在所有情况下 VS 都可以使用上下文菜单选项帮助找到代码元素的所有依赖项/使用/到代码元素，但如果我更改文件名，它并不总是提供提示。那么秘诀是什么？

![有用的选项](../Images/3e93f3e7f05aa424b09567b5902dd659.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T05:11:34.097

它以这种方式工作（至少根据我的经验）：

仅当文件包含与文件相同的一个类时，才会激活重构。即，如果文件中有更多类，或者即使有枚举或结构，它也不起作用。

# facebook - 无法提交 Open Graph 操作？

> ID：10712769
> 
> 赞同：1
> 
> 时间：2012-05-23T02:40:51.497
> 
> 标签：facebook, facebook-opengraph

我正在尝试提交开放图形操作。

以下是我提交给 FB 的文字：

1.  点击此链接： [http://www.myatricleurllink/](http://www.myatricleurllink/) 文章页面顶部有“on/off”开关。此开关控制应用程序中的所有读取操作。当用户进入文章页面时，开关最初是关闭的。当用户将开关切换到“on”时，文章将被发布。

2.  使用 FB 凭据生成操作：
    dummy@gmail.com/dummy

3.  文章发表时，会在两个地方出现“从您的阅读中删除”链接：

    1.  在文章部分。
    2.  就在 facebook 评论社交插件上方。

    当用户点击“从您的阅读中删除”链接时，已发布的文章将从用户的最近活动部分中删除。

但是每次我遇到提交操作的问题时。

以下是脸书的回复：

根据您提供的使用说明，我们无法测试此操作。请提供完整的复制说明和指向我们可以触发操作的特定 URL 的链接。您还应该测试您的操作，以确保您可以成功地将操作发布回 Auth Dialog Preview User's Timeline。完成这些更改后，重新提交您的操作。请在下面进行更改并重新提交以供审核。

有人可以告诉我，我哪里错了，我需要做什么来批准 facbook 行动。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T08:39:16.483

您应该在 Facebook 应用设置页面的“角色”部分使用“测试用户”功能，而不是向 Facebook 提供虚假 Facebook 帐户。“测试用户”功能将允许某人通过链接而不是输入电子邮件/密码登录测试帐户。拥有虚假 Facebook 帐户也违反 Facebook 平台政策。

此外，您是否测试过 OpenGraph 操作是否可以与您提供的测试用户一起使用？只有在您的应用设置的“角色”页面上列出的管理员/开发人员/测试人员才能在操作获得批准之前触发操作。

个人资料链接指向某人可以轻松测试的文章。这将使 Facebook 更容易测试操作。

通过包含上述信息，我能够在不到 2 天的时间内获得批准。

# objective-c - CTFontRef 和 UIFont 的区别

> ID：10712770
> 
> 赞同：2
> 
> 时间：2012-05-23T02:41:00.390
> 
> 标签：objective-c, ios, uifont, ctfontref

所以我花了几个小时把头撞在墙上，因为我的 CoreText 项目不能正常工作。我发现了这个问题，这很奇怪。我希望这里有人可以帮助我理解为什么相同大小的相同字体的字体特征在 CTFontRef 和 UIFont 之间是不同的。

为了测试，我使用了以下四行：

```
UIFont* tFont=[UIFont fontWithName:@"Helvetica" size:20];
CTFontRef fontRef=CTFontCreateWithName((CFStringRef)@"Helvetica", 20.0f, NULL);
NSLog(@"UIFont: ascent:%f descent:%f leading:%f",_font.ascender,_font.descender,_font.leading);
NSLog(@"CTFontRef: ascent:%f descent:%f leading:%f",CTFontGetAscent(fontRef),CTFontGetDescent(fontRef),CTFontGetLeading(fontRef)); 
```

并收到此输出：

```
UIFont: ascent:18.400391 descent:-4.599609 leading:24.000000
CTFontRef: ascent:15.400391 descent:4.599609 leading:0.000000 
```

什么？？？

# python - 分离具有相同潜在起始字符的 RegEx 模式匹配

> ID：10712776
> 
> 赞同：2
> 
> 时间：2012-05-23T02:41:34.440
> 
> 标签：python, regex

我希望有一个正则表达式，它在一系列可能的字符范围内连续匹配几个相同的字符，但不将这些模式匹配作为一个模式返回。如何实现？

为了澄清：

我想要一个以 [ac] 开头的模式，并且不贪婪地返回任意数量的相同字符，但不返回范围内的其他字符。在序列“aafaabbybcccc”中，它会找到以下模式：

（'aa'，'aa'，'bb'，'b'，'cccc'）

但会排除以下内容：

('f', 'aabb', 'y', 'bcccc')

我不想使用多个 RegEx 模式搜索，因为我找到模式的顺序将决定另一个函数的输出。这个问题是出于自学（python）的目的，而不是家庭作业。（我也未满 15 岁，但我会在可能的时候回来投票。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T03:02:09.913

好问题。使用正则表达式，如：

```
(?P<L>[a-c])(?P=L)+ 
```

这更健壮 - 您不仅限于 ac，如果您愿意，可以将其替换为 az。它首先将 ac 中的任何字符定义为`L`，然后查看该字符是否再次出现一次或多次。您想`re.findall()`使用此正则表达式运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T03:07:58.540

您可以使用反向引用`\1 - \9`来捕获先前匹配的第 1 到第 9 组。

```
/([a-c])(\1+)/

[a-c]: Matches one of the character.
\1+  : Matches subsequent one or more previously matched character. 
```

珀尔：

```
perl -e '@m = "ccccbbb" =~ /([a-c])(\1+)/; print $m[0], $m[1]'

cccc 
```

Python：

```
>>> import re
>>> [m.group(0) for m in re.finditer(r"([a-c])\1+", 'aafaabbybcccc')]
['aa', 'aa', 'bb', 'cccc'] 
```

# linq - Linq to Sql Concat 问题

> ID：10712781
> 
> 赞同：0
> 
> 时间：2012-05-23T02:42:46.020
> 
> 标签：linq, entity-framework, linq-to-sql, concat

所以我有这个功能：

公共静态 BaseList GetVersesByChapterVerseRanges（字符串翻译，BaseList 标准列表）{ BaseList returnValue = new BaseList();;

```
 if(criteriaList.Count() > 0)
    {

        List<VerseMaster.BusinessLayer.Vers> queryList = new List<Vers>();

        int bookId = criteriaList[0].Book.BookId;
        int StartChapter = criteriaList[0].StartChapter;
        int EndChapter = criteriaList[0].EndChapter;
        int StartVerse = criteriaList[0].StartChapterStartVerse;
        int EndVerse = criteriaList[0].EndChapterEndVerse;
        var searchQuery = (from v in VerseMaster.BusinessLayer.Controller.Controller.VerseMasterEntities.Verses where v.Translation.ToLower().StartsWith(translation.ToLower()) && v.BookId == bookId && v.ChapterNumber >= StartChapter && v.ChapterNumber <= EndChapter && (v.ChapterNumber == StartChapter ? (v.VerseNumber >= StartVerse) : true) && (v.ChapterNumber == EndChapter ? (v.VerseNumber <= EndVerse) : true) orderby v.ChapterNumber, v.VerseNumber ascending select v);

        for(int i = 1; i < criteriaList.Count(); i++)
        {
            bookId = criteriaList[i].Book.BookId;
            StartChapter = criteriaList[i].StartChapter;
            EndChapter = criteriaList[i].EndChapter;
            StartVerse = criteriaList[i].StartChapterStartVerse;
            EndVerse = criteriaList[i].EndChapterEndVerse;
            VerseMaster.BusinessLayer.DataObjects.Helper.VerseSearchCriteria criteria = criteriaList[i];
            searchQuery = (System.Linq.IOrderedQueryable<VerseMaster.BusinessLayer.Vers>)searchQuery.Concat(from v in VerseMaster.BusinessLayer.Controller.Controller.VerseMasterEntities.Verses where v.Translation.ToLower().StartsWith(translation.ToLower()) && v.BookId == bookId && v.ChapterNumber >= StartChapter && v.ChapterNumber <= EndChapter && (v.ChapterNumber == StartChapter ? (v.VerseNumber >= StartVerse) : true) && (v.ChapterNumber == EndChapter ? (v.VerseNumber <= EndVerse) : true) orderby v.ChapterNumber, v.VerseNumber ascending select v);

        }

        string traceString = ((System.Data.Objects.ObjectQuery)searchQuery).ToTraceString();

        foreach (var entVerse in searchQuery)
        {
            VerseMaster.BusinessLayer.DataObjects.IVerse verse = new VerseMaster.BusinessLayer.DataObjects.Verse();
            LoadVerseFromEntityVerse(ref verse, entVerse);

            Console.Write(String.Format("Chapter={0} Verse={1} Text={2}\n", entVerse.ChapterNumber, entVerse.VerseNumber, entVerse.Verse));
            //returnValue.Add((VerseMaster.BusinessLayer.DataObjects.Verse)verse);
        }
    }

    return returnValue;
} 
```

因此，出于某种原因，由于错误，我不得不将进入 linq 查询的每个参数转换为标准整数，不确定它是否相关。所以生成的sql是：

```
 SELECT 
[UnionAll2].[C1] AS [C1], 
[UnionAll2].[C2] AS [C2], 
[UnionAll2].[C3] AS [C3], 
[UnionAll2].[C4] AS [C4], 
[UnionAll2].[C5] AS [C5], 
[UnionAll2].[C6] AS [C6]
FROM  (SELECT 
    [UnionAll1].[VerseId] AS [C1], 
    [UnionAll1].[ChapterNumber] AS [C2], 
    [UnionAll1].[VerseNumber] AS [C3], 
    [UnionAll1].[Verse] AS [C4], 
    [UnionAll1].[Translation] AS [C5], 
    [UnionAll1].[BookId] AS [C6]
    FROM  (SELECT 
        [Extent1].[VerseId] AS [VerseId], 
        [Extent1].[ChapterNumber] AS [ChapterNumber], 
        [Extent1].[VerseNumber] AS [VerseNumber], 
        [Extent1].[Verse] AS [Verse], 
        [Extent1].[Translation] AS [Translation], 
        [Extent1].[BookId] AS [BookId]
        FROM [dbo].[Verses] AS [Extent1]
        WHERE (( CAST(CHARINDEX(LOWER(@p__linq__0), LOWER([Extent1].[Translation])) AS int)) = 1) AND ([Extent1].[BookId] = @p__linq__1) AND ([Extent1].[ChapterNumber] >= @p__linq__2) AND ([Extent1].[ChapterNumber] <= @p__linq__3) AND ((CASE WHEN ([Extent1].[ChapterNumber] = @p__linq__4) THEN CASE WHEN ([Extent1].[VerseNumber] >= @p__linq__5) THEN cast(1 as bit) WHEN ( NOT ([Extent1].[VerseNumber] >= @p__linq__5)) THEN cast(0 as bit) END ELSE cast(1 as bit) END) = 1) AND ((CASE WHEN ([Extent1].[ChapterNumber] = @p__linq__6) THEN CASE WHEN ([Extent1].[VerseNumber] <= @p__linq__7) THEN cast(1 as bit) WHEN ( NOT ([Extent1].[VerseNumber] <= @p__linq__7)) THEN cast(0 as bit) END ELSE cast(1 as bit) END) = 1)
    UNION ALL
        SELECT 
        [Extent2].[VerseId] AS [VerseId], 
        [Extent2].[ChapterNumber] AS [ChapterNumber], 
        [Extent2].[VerseNumber] AS [VerseNumber], 
        [Extent2].[Verse] AS [Verse], 
        [Extent2].[Translation] AS [Translation], 
        [Extent2].[BookId] AS [BookId]
        FROM [dbo].[Verses] AS [Extent2]
        WHERE (( CAST(CHARINDEX(LOWER(@p__linq__8), LOWER([Extent2].[Translation])) AS int)) = 1) AND ([Extent2].[BookId] = @p__linq__9) AND ([Extent2].[ChapterNumber] >= @p__linq__10) AND ([Extent2].[ChapterNumber] <= @p__linq__11) AND ((CASE WHEN ([Extent2].[ChapterNumber] = @p__linq__12) THEN CASE WHEN ([Extent2].[VerseNumber] >= @p__linq__13) THEN cast(1 as bit) WHEN ( NOT ([Extent2].[VerseNumber] >= @p__linq__13)) THEN cast(0 as bit) END ELSE cast(1 as bit) END) = 1) AND ((CASE WHEN ([Extent2].[ChapterNumber] = @p__linq__14) THEN CASE WHEN ([Extent2].[VerseNumber] <= @p__linq__15) THEN cast(1 as bit) WHEN ( NOT ([Extent2].[VerseNumber] <= @p__linq__15)) THEN cast(0 as bit) END ELSE cast(1 as bit) END) = 1)) AS [UnionAll1]
UNION ALL
    SELECT 
    [Extent3].[VerseId] AS [VerseId], 
    [Extent3].[ChapterNumber] AS [ChapterNumber], 
    [Extent3].[VerseNumber] AS [VerseNumber], 
    [Extent3].[Verse] AS [Verse], 
    [Extent3].[Translation] AS [Translation], 
    [Extent3].[BookId] AS [BookId]
    FROM [dbo].[Verses] AS [Extent3]
    WHERE (( CAST(CHARINDEX(LOWER(@p__linq__16), LOWER([Extent3].[Translation])) AS int)) = 1) AND ([Extent3].[BookId] = @p__linq__17) AND ([Extent3].[ChapterNumber] >= @p__linq__18) AND ([Extent3].[ChapterNumber] <= @p__linq__19) AND ((CASE WHEN ([Extent3].[ChapterNumber] = @p__linq__20) THEN CASE WHEN ([Extent3].[VerseNumber] >= @p__linq__21) THEN cast(1 as bit) WHEN ( NOT ([Extent3].[VerseNumber] >= @p__linq__21)) THEN cast(0 as bit) END ELSE cast(1 as bit) END) = 1) AND ((CASE WHEN ([Extent3].[ChapterNumber] = @p__linq__22) THEN CASE WHEN ([Extent3].[VerseNumber] <= @p__linq__23) THEN cast(1 as bit) WHEN ( NOT ([Extent3].[VerseNumber] <= @p__linq__23)) THEN cast(0 as bit) END ELSE cast(1 as bit) END) = 1)) AS [UnionAll2] 
```

所以问题是，由于某种原因，它处理我给它的每个参数就好像我发送了 3 组相同的参数并连接起来，所以它返回相同的一组经文 3 次。我不确定为什么要这样做，因为我不是 linq 或实体框架的专家，有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T13:13:45.913

这是[修改后的闭包](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)问题的一个非常棘手的例子。在`for`循环中，您生成一个使用变量`bookId`等的查询部分。在执行查询时，它使用这些变量当时具有的值，这些*值*是循环最后一次迭代之后的值。（棘手的部分是通常会捕获循环变量，但这里是关于在循环范围之外声明的变量）。

如果您在 for 循环中声明变量，情况会有所不同，因为每个查询部分都会捕获自己的变量实例（称为闭包）。

好消息：你可以这样做，同时清理你的代码！

```
if(criteriaList.Count() > 0)
{
    IQueryable<Verse> baseQuery = null;
    for(int i = 0; i < criteriaList.Count(); i++) // starting i = 0 now !
    {
        int bookId = criteriaList[0].Book.BookId;
        int StartChapter = criteriaList[0].StartChapter;
        int EndChapter = criteriaList[0].EndChapter;
        int StartVerse = criteriaList[0].StartChapterStartVerse;
        int EndVerse = criteriaList[0].EndChapterEndVerse;
        searchQuery = (IOrderedQueryable<Vers>)searchQuery.Concat(
            from v in Controller.Controller.VerseMasterEntities.Verses 
            where v.Translation.ToLower().StartsWith(translation.ToLower()) 
                && v.BookId == bookId 
                && v.ChapterNumber >= StartChapter 
                && v.ChapterNumber <= EndChapter 
                && (v.ChapterNumber == StartChapter ? (v.VerseNumber >= StartVerse) : true) 
                && (v.ChapterNumber == EndChapter ? (v.VerseNumber <= EndVerse) : true) 
            select v);

        if (i == 0)
            baseQuery = searchQuery;
        else
            baseQuery = baseQuery.Concat(searchQuery);
    }
    ... 
```

（稍后再订购）

# python - scipy.optimize.fmin_bfgs 单个函数计算 f 和 fprime

> ID：10712789
> 
> 赞同：5
> 
> 时间：2012-05-23T02:44:23.930
> 
> 标签：python, optimization, scipy, gradient

我正在使用`scipy.optimize.fmin_bfgs(f, init_theta, fprime)`to minimize `f`，它有梯度`fprime`。我在一个函数中计算`f`和`fprime`，因为大部分计算是相同的，所以不需要做两次。

有什么方法可以调用`fmin_bfgs()`指定一个同时返回`f`和的函数`fprime`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T03:50:08.110

如果您想节省计算时间而不是仅仅结合计算`f`和`f'`代码方便，似乎您需要一个额外的函数包装器来缓存值，因为`fmin_bfgs`似乎不允许您传递这样的函数（与其他一些优化功能不同）。

这是一种方法，将最近评估的 10 个点保存在一个小缓存中。（我不确定对这个函数的调用是否需要是线程安全的：可能不需要，但如果是这样，你可能需要在这里添加一些锁定，我猜。）

```
def func_wrapper(f, cache_size=10):
    evals = {}
    last_points = collections.deque()

    def get(pt, which):
        s = pt.tostring() # get binary string of numpy array, to make it hashable
        if s not in evals:
            evals[s] = f(pt)
            last_points.append(s)
            if len(last_points) >= cache_size:
                del evals[last_points.popleft()]
        return evals[s][which]

    return functools.partial(get, which=0), functools.partial(get, which=1) 
```

如果我们这样做

```
>>> def f(x):
...    print "evaluating", x
...    return (x-3)**2, 2*(x-3)

>>> f_, fprime = func_wrapper(f)

>>> optimize.fmin_bfgs(f_, 1000, fprime)
evaluating [ 994.93480441]
evaluating [ 974.67402207]
evaluating [ 893.63089268]
evaluating [ 665.93446894]
evaluating [ 126.99931561]
evaluating [ 3.]
Optimization terminated successfully.
         Current function value: 0.000000
         Iterations: 4
         Function evaluations: 7
         Gradient evaluations: 7
array([ 3.]) 
```

我们可以看到我们没有重复任何评估。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T03:36:07.370

假设你有一个 Python 函数`f(x)`，它同时返回函数值和梯度：

```
In [20]: def f(x):
   ....:     return (x-3)**2, 2*(x-3) 
```

然后像这样单独传递输出：

```
In [21]: optimize.fmin_bfgs(lambda x: f(x)[0], 1000, lambda x: f(x)[1])
Optimization terminated successfully.
         Current function value: 0.000000
         Iterations: 4
         Function evaluations: 7
         Gradient evaluations: 7
Out[21]: array([ 3.]) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-06T05:19:30.743

似乎没有办法直接做到这一点。但`scipy.optimize.minimize`确实让你这样做。您可以为 fprime 传递值 True 而不是函数。这表示 f 返回函数值和梯度的元组。您可以使用 method='BFGS' 调用`minimize`以获得您想要的效果。

看看[源代码是很有启发性的`minimize`](https://github.com/scipy/scipy/blob/v0.19.0/scipy/optimize/_minimize.py#L411)。it 和 fmin_bfgs 最终都会调用 _minimize_bfgs，它将 f 和 fprime 作为单独的函数参数。当 fprime 为布尔值时，`minimize`巧妙地将 fprime 构造为一个对象，该对象记住 f 返回的最后一个值，并缓存梯度信息。

# c# - 在 ASP.NET MVC 中查询字符串到 C# 对象

> ID：10712795
> 
> 赞同：1
> 
> 时间：2012-05-23T02:45:37.457
> 
> 标签：c#, asp.net-mvc, wcf

我有一个非常笼统的问题。

使用 ASP.NET MVC 进行开发时。它提供了一种利用 C# 与客户端对象（如查询字符串）进行交互的好方法。

我想知道 ASP.NET MVC 框架如何将 GET 请求中发送的查询字符串或 POST 请求中的表单数据转换为强类型 C# 类？是否有任何特定的 HttpHandler 或 HttpModules ？或者他们是否使用任何预定义的动作过滤器？

我想在基于 WCF 的 RESTFull 服务中实现类似的功能。我相信我需要为此目的使用拦截器。

请提供一些建议。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T03:34:43.630

您指的是[ASP.NET MVC 模型绑定。](http://msdn.microsoft.com/en-us/library/dd410405.aspx) 这实际上是框架的一个完全独立的部分，而不是`ActionFilters`HttpModules。它通过检查“值提供者”（请求中的信息源，如表单数据、查询字符串甚至路由）来工作，并尝试按名称将它们与控制器操作中复杂类型的属性相匹配。

正如 Kenneth 提到的，您可以查看[CodePlex](http://aspnet.codeplex.com/)上的源代码，但如果您希望使用 RESTful 架构模式编写服务，您可以开始使用 MVC4 beta 中的[Web API](http://www.asp.net/web-api)功能，它还支持模型绑定（因此您不会必须重新发明它！）

还值得一提的是，Web API 是为 WCF 开发的，但现在是[ASP.NET MVC](http://wcf.codeplex.com/wikipage?title=WCF%20Web%20API%20is%20now%20ASP.NET%20Web%20API)的一部分，这是有道理的，因为 ASP.NET MVC 和 Web API 一样，都是主要围绕 HTTP 构建的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T20:11:32.127

我对 wcf 可扩展性模型不太熟悉，但在 mvc3 方面，所有源代码都在那里。您可以确切地看到模型绑定是如何实现的。只需下载源代码，它的内容相当丰富。

[http://aspnet.codeplex.com/releases/view/58781](http://aspnet.codeplex.com/releases/view/58781)

# ruby - ruby base64编码png无法在android浏览器中显示

> ID：10712799
> 
> 赞同：2
> 
> 时间：2012-05-23T02:46:36.767
> 
> 标签：ruby, png, base64

当我使用ruby将png编码为base4时，它无法在android移动浏览器中显示。如下所示：

```
File.open(real_path, "rb") {|io| io.read} 
```

我使用 Base64:encode64 方法，也不起作用.....

我发现编码的字符串以“YII==”结尾，但其他工作框架对 png 进行编码以“g==”结尾。这是解决这个问题的线索吗？

谁能给我一种编码在android浏览器上工作的png的方法？

# xcode - 如何让 Xcode 编译我的代码而不是构建 AST？

> ID：10712800
> 
> 赞同：1
> 
> 时间：2012-05-23T02:46:44.417
> 
> 标签：xcode, clang

我刚刚将一个框架项目从 Xcode 3 转换为 Xcode 4。多年来，我一直在 Xcode 和 Project Builder 的每个版本下构建这个项目。

出于某种原因，Xcode 4 在我的所有类上运行 Build AST 而不是 Compile，后者实际上并没有构建框架可执行文件。在深入研究时，我发现这会将 -fsyntax-only 标志传递给 clang，它告诉它在为每个类生成一个抽象语法树后停止。我有另一个在 Xcode 4 中构建良好的框架，我比较了构建设置，但没有发现任何看起来会导致这种情况的东西。

有谁知道是什么让 Xcode 想要执行 Build AST 操作而不是 Compile？更重要的是，如何关闭这种行为？

感谢您的任何想法...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:00:08.480

好的，我发现在我的情况下，我的项目中有一个用于“*.i”文件的自定义构建规则。clang 构建过程显然会生成 .i 文件（以及其他几个文件）作为中间产品，因此该规则会干扰并阻止它完成构建的所有阶段。删除自定义构建规则允许一切正常构建。

# opengl-es-2.0 - vbos 着色器从 OGLES 1.0 升级到 2.0

> ID：10712803
> 
> 赞同：1
> 
> 时间：2012-05-23T02:47:02.603
> 
> 标签：opengl-es-2.0, shader, vbo

我花了大约一周的时间学习和使用 OGLES 1.0。我意识到我需要将 2.0 用于一些我觉得很有吸引力的功能。几天来，我一直致力于从 1.0 转换为 2.0。我终于达到了没有错误（我可以找到）并进行屏幕渲染的地步。我所看到的只是清晰的颜色。我已经尝试改变一些事情并阅读很多内容以找出我的问题，但我找不到答案:(所以我在这里问你为什么我看到的只是clearcolor。假设我的解析器是正确的（它正在工作1.0 完美无瑕）我的 BufferObjects/arrays/indices 是正确的（它们是 1.0）我的问题出在我发布的代码中。拜托，非常感谢我需要开始寻找的任何方向。提前致谢。

（请原谅未使用的变量和方法等）渲染器

```
public class TestRenderer implements Renderer {
private static final String TAG = TestRenderer.class.getSimpleName();
Cube tester;
Parser parser;
Context context;

private int mProgram;
private int muMVPMatrixHandle;
private float[] mMVPMatrix = new float[16];
private float[] mMMatrix = new float[16];
private float[] mVMatrix = new float[16];
private float[] mProjMatrix = new float[16];
private String vertexShaderCode = "attribute vec4 a_Position; "
        + "attribute vec3 a_Normal; " + "attribute vec2 a_Textcoords; "
        + "varying vec2 v_Textcoords;" + "uniform mat4 uMVPMatrix;  "

        + "attribute vec4 vPosition;  " + "void main(){ "
        + "v_Textcoords = a_Textcoords;"
        + " gl_Position = uMVPMatrix * vPosition; " +

        "}  ";

private String fragmentShaderCode = "precision mediump float; "
        + "varying vec2 v_Textcoords;" + "uniform sampler2D u_Texture; "
        + "void main(){ "
        + " gl_FragColor = texture2D(u_Texture, v_Textcoords); " + "} ";

TestRenderer(Context context) {
    this.context = context;
    parser = new Parser(context);
    parser.parse("Turret2.obj");
    tester = new Cube(parser.v, parser.f, parser.vt, parser.vtPointer,
            parser.vn, parser.vnPointer, 1);
}

public static void checkGLError(String msg) {
    int e = GLES20.glGetError();
    if (e != GLES20.GL_NO_ERROR) {
        Log.d(TAG, "GLES20 ERROR: " + msg + " " + e);
        Log.d(TAG, errString(e));
    }
}

public static String errString(int ec) {
    switch (ec) {
    case GLES20.GL_NO_ERROR:
        return "No error has been recorded.";
    case GLES20.GL_INVALID_ENUM:
        return "An unacceptable value is specified for an enumerated argument.";
    case GLES20.GL_INVALID_VALUE:
        return "A numeric argument is out of range.";
    case GLES20.GL_INVALID_OPERATION:
        return "The specified operation is not allowed in the current state.";
    case GLES20.GL_INVALID_FRAMEBUFFER_OPERATION:
        return "The command is trying to render to or read from the framebuffer"
                + " while the currently bound framebuffer is not framebuffer complete (i.e."
                + " the return value from glCheckFramebufferStatus is not"
                + " GL_FRAMEBUFFER_COMPLETE).";
    case GLES20.GL_OUT_OF_MEMORY:
        return "There is not enough memory left to execute the command."
                + " The state of the GL is undefined, except for the state"
                + " of the error flags, after this error is recorded.";
    default:
        return "UNKNOW ERROR";
    }
}

public void onDrawFrame(GL10 unused) {
    // TODO Auto-generated method stub
    GLES20.glClear(GLES20.GL_COLOR_BUFFER_BIT | GLES20.GL_DEPTH_BUFFER_BIT);

    Matrix.multiplyMM(mMVPMatrix, 0, mProjMatrix, 0, mVMatrix, 0);
    GLES20.glUniformMatrix4fv(muMVPMatrixHandle, 1, false, mMVPMatrix, 0);
    tester.draw(mProgram);
    checkGLError("onDrawFrame 0");

}

public void onSurfaceChanged(GL10 unused, int width, int height) {
    GLES20.glViewport(0, 0, width, height);

    float ratio = (float) width / height;

    Matrix.frustumM(mProjMatrix, 0, -ratio, ratio, -1, 1, .001f, 100);
    muMVPMatrixHandle = GLES20.glGetUniformLocation(mProgram, "uMVPMatrix");
    Matrix.setLookAtM(mVMatrix, 0, 0, 0, 0, 0f, 0f, 0f, 0f, 1.0f, 0.0f);

}

public void onSurfaceCreated(GL10 unused, EGLConfig config) {
    GLES20.glClearColor(0.5f, 0.5f, 0.5f, 1.0f);

    mProgram = GLES20.glCreateProgram();
    checkGLError("onSurfaceCreated 3");

    int vertexShader = loadShader(GLES20.GL_VERTEX_SHADER, vertexShaderCode);
    checkGLError("onSurfaceCreated 1");

    int fragmentShader = loadShader(GLES20.GL_FRAGMENT_SHADER,
            fragmentShaderCode);

    GLES20.glAttachShader(mProgram, vertexShader); // add the vertex shader
                                                    // to program

    checkGLError("onSurfaceCreated 5");

    GLES20.glAttachShader(mProgram, fragmentShader); // add the fragment
                                                        // shader to program
    checkGLError("onSurfaceCreated 2");

    GLES20.glLinkProgram(mProgram);
    checkGLError("onSurfaceCreated 7");
    Log.d(TAG,
            "link program true/false 1 = "
                    + GLES20.glGetProgramInfoLog(mProgram));

    GLES20.glUseProgram(mProgram);
    checkGLError("onDrawFrame 2");
    checkGLError("onSurfaceCreated 8");
    Bitmap bmp = BitmapFactory.decodeResource(context.getResources(),
            R.drawable.turretbottom);
    tester.loadTextures(context, bmp);
}

private int loadShader(int type, String shaderCode) {

    int shader = GLES20.glCreateShader(type);
    GLES20.glShaderSource(shader, shaderCode);
    GLES20.glCompileShader(shader);

    Log.d(TAG, "Shader info log = " + GLES20.glGetShaderInfoLog(shader));

    return shader;
} 
```

}

```
public void draw(int program) {

    GLES20.glGenBuffers(4, vboIds, 0);

    GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, vboIds[0]);
    GLES20.glBufferData(GLES20.GL_ARRAY_BUFFER, verts.length, vertBuff,
            GLES20.GL_STATIC_DRAW);

    GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, vboIds[1]);
    GLES20.glBufferData(GLES20.GL_ARRAY_BUFFER, textVerts.length, textBuff,
            GLES20.GL_STATIC_DRAW);

    GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, vboIds[2]);
    GLES20.glBufferData(GLES20.GL_ARRAY_BUFFER, normPoints.length,
            normBuff, GLES20.GL_STATIC_DRAW);

    GLES20.glBindBuffer(GLES20.GL_ELEMENT_ARRAY_BUFFER, vboIds[3]);
    GLES20.glBufferData(GLES20.GL_ELEMENT_ARRAY_BUFFER, 2 * indexa.length,
            faceBuff, GLES20.GL_STATIC_DRAW);

    GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, vboIds[0]);
    GLES20.glEnableVertexAttribArray(0);

    GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, vboIds[1]);
    GLES20.glEnableVertexAttribArray(1);

    GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, vboIds[2]);
    GLES20.glEnableVertexAttribArray(2);

    GLES20.glVertexAttribPointer(0, 3, GLES20.GL_FLOAT, false, 0, 0);

    GLES20.glVertexAttribPointer(1, 2, GLES20.GL_FLOAT, false, 0, 0);

    GLES20.glVertexAttribPointer(2, 3, GLES20.GL_FLOAT, false, 0, 0);

    GLES20.glBindAttribLocation(program, 0, "a_Position");
    GLES20.glBindAttribLocation(program, 1, "a_Textcoords");
    GLES20.glBindAttribLocation(program, 2, "a_Normal");

    GLES20.glDrawElements(GLES20.GL_TRIANGLES, indexa.length,
            GLES20.GL_UNSIGNED_SHORT, 0);
    GLES20.glDeleteBuffers(4, vboIds, 0);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T07:39:19.737

你一次咬了很多，如果你什么地方都没有（没有纹理，没有颜色，只有一个三角形），我可能会从更简单的东西开始，当你开始工作时从那里开始。

也就是说，我确实看到了一个错误，因为 glBindAttribLocation 仅在下一次调用 glLinkProgram*后生效，因此您对 glBindAttribLocation 的调用没有做任何事情（您需要在链接着色器之前绑定位置）。*

此外，当您编译/链接着色器时，您应该使用 glGetShaderiv(GL_COMPILE_STATUS)/glGetProgramiv(GL_LINK_STATUS) 检查结果。这比打印信息日志更好地检查成功/失败。

# android - 谷歌 api 安卓

> ID：10712808
> 
> 赞同：0
> 
> 时间：2012-05-23T02:48:28.593
> 
> 标签：android

我去以法语显示天气信息，但我不能，此代码可与此 baseURL [http://www.google.com/ig/api?weather=city,state](http://www.google.com/ig/api?weather=city,state)一起使用，但是当更改为法语时，这不起作用并且破例！！

```
public class WeatherXMLParsing extends GDActivity{
static final String baseURL="http://www.google.com/ig/api?weather=city,state&hl=fr";    
EditText city,state;
TextView tv1,tv2,tv3,tv4,tv5;
ImageView iv;
String c,s;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setActionBarContentView(R.layout.weather_layout_base);

    tv1=(TextView) findViewById(R.id.weath_info);
    tv2=(TextView) findViewById(R.id.weath_temp_x);
    tv3=(TextView) findViewById(R.id.weath_wind_x);
    tv4=(TextView) findViewById(R.id.weath_humidity_x);
    tv5=(TextView) findViewById(R.id.weath_condition_x);
    iv=(ImageView) findViewById(R.id.weath_img);

    DataBind();
}

public void DataBind() {

    StringBuilder URL=new StringBuilder(baseURL);
    String FullURL=URL.toString();
    try {

        URL Website = new URL(FullURL);
        SAXParserFactory spf=SAXParserFactory.newInstance(); 
        SAXParser sp=spf.newSAXParser();
        XMLReader xr=sp.getXMLReader();
        HandlingXMLStuff doingWork=new HandlingXMLStuff();
        xr.setContentHandler(doingWork);
        xr.parse(new InputSource(Website.openStream()));

        String information=doingWork.getInformation();
        String temp=doingWork.getTempInformation();
        String wind=doingWork.getWindInformation();
        String humudity=doingWork.getHumudityInformation();
        String condition=doingWork.getConditionInformation();

        Log.d("weath_info", information);
        Log.d("weath_info", temp);
        Log.d("weath_temp", wind);
        Log.d("weath_wind", humudity);
        Log.d("weath_humud", condition);

        tv1.setText(information);
        tv2.setText(temp+"°C");
        tv3.setText(wind);
        tv4.setText(humudity);
        tv5.setText(condition);

                    if(condition.equals("Cloudy"))
                    {
                        iv.setImageResource(R.drawable.cloudy);
                    }
                    else if(condition.equals("Partly Cloudy"))
                    {
                        iv.setImageResource(R.drawable.partly_cloudy);
                    }
                    else if(condition.equals("Rainy"))
                    {
                        iv.setImageResource(R.drawable.rainy);
                    }
                    else if(condition.equals("Clear"))
                    {
                        iv.setImageResource(R.drawable.sunny);
                    }
                    else{
                        iv.setImageResource(R.drawable.mostly_sunny);
                    } 
    } catch (Exception e) {
tv1.setText("Erreur internet");
tv2.setVisibility(View.INVISIBLE);
tv3.setVisibility(View.INVISIBLE);

    }
}
}

public class HandlingXMLStuff extends DefaultHandler {
XMLDataCollected info=new XMLDataCollected();
public String getTempInformation(){

    return info.tempToString();
}
public String getConditionInformation(){

    return info.conditionToString();
}
public String getWindInformation(){

    return info.windToString();
}
public String getHumudityInformation(){

    return info.humudityToString();
}
public String getInformation(){

    return info.informationToString();
}

@Override
public void startElement(String uri, String localName, String qName,Attributes attributes) throws SAXException {

    if (localName.equals("city"))
    {
        String city=attributes.getValue("data");    
        info.setCity(city);
    }

    else if (localName.equals("temp_c"))
    {
        String t=attributes.getValue("data");
        int temp=Integer.parseInt(t);
        info.setTemp(temp);
    }

    else if (localName.equals("humidity"))
    {
        String humidity=attributes.getValue("data");
        info.setHumidity(humidity);
    }

    else if (localName.equals("wind_condition"))
    {
        String wind=attributes.getValue("data");
        info.setWind(wind);
    }

    else if (localName.equals("forecast_date"))
    {
        String date=attributes.getValue("data");
        info.setDate(date);
    }
    else if (localName.equals("condition"))
    {
        String condition=attributes.getValue("data");
        info.setCondition(condition);
    }
}

}

public class XMLDataCollected {

String city=null,humidity=null,wind=null,date=null,condition=null;
int temp=0;

public void setCity(String c)
{
    city=c; }
public void setCondition(String cnd)
{
    condition=cnd;  }
public void setTemp(int t)
{
    temp=t; }
public void setHumidity(String h)
{
    humidity=h; }
public void setWind(String w)
{
    wind=w; }
public void setDate(String d)
{
    date=d; }
public String cityToString()
{
    return city;    
}

public String conditionToString()
{
    return condition;   
}
public String informationToString()
{
    return "Weather in "+city+" for "+date; 
}
public String tempToString()
{
    return temp+""; 
}
public String humudityToString()
{
    return humidity;    
}
public String windToString()
{
    return wind;    
}
} 
```

这是堆栈跟踪：

```
05-23 03:20:04.376: W/System.err(6355): java.net.UnknownHostException: Host is unresolved: www.google.com:80
05-23 03:20:04.386: W/System.err(6355):     at java.net.Socket.connect(Socket.java:1037)
05-23 03:20:04.396: W/System.err(6355):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.<init>(HttpConnection.java:62)
05-23 03:20:04.396: W/System.err(6355):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionManager$ConnectionPool.getHttpConnection(HttpConnectionManager.java:145)
05-23 03:20:04.406: W/System.err(6355):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionManager.getConnection(HttpConnectionManager.java:67)
05-23 03:20:04.406: W/System.err(6355):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnection.getHTTPConnection(HttpURLConnection.java:821)
05-23 03:20:04.416: W/System.err(6355):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnection.connect(HttpURLConnection.java:807)
05-23 03:20:04.416: W/System.err(6355):     at org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnection.getInputStream(HttpURLConnection.java:1051)
05-23 03:20:04.416: W/System.err(6355):     at java.net.URL.openStream(URL.java:653)
05-23 03:20:04.436: W/System.err(6355):     at com.pfe.meteo.WeatherXMLParsing.DataBind(WeatherXMLParsing.java:55)
05-23 03:20:04.446: W/System.err(6355):     at com.pfe.meteo.WeatherXMLParsing.onCreate(WeatherXMLParsing.java:40)
05-23 03:20:04.446: W/System.err(6355):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
05-23 03:20:04.456: W/System.err(6355):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2459)
05-23 03:20:04.456: W/System.err(6355):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2512)
05-23 03:20:04.466: W/System.err(6355):     at android.app.ActivityThread.access$2200(ActivityThread.java:119)
05-23 03:20:04.466: W/System.err(6355):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1863)
05-23 03:20:04.466: W/System.err(6355):     at android.os.Handler.dispatchMessage(Handler.java:99)
05-23 03:20:04.476: W/System.err(6355):     at android.os.Looper.loop(Looper.java:123)
05-23 03:20:04.476: W/System.err(6355):     at android.app.ActivityThread.main(ActivityThread.java:4363)
05-23 03:20:04.488: W/System.err(6355):     at java.lang.reflect.Method.invokeNative(Native Method)
05-23 03:20:04.488: W/System.err(6355):     at java.lang.reflect.Method.invoke(Method.java:521)
05-23 03:20:04.488: W/System.err(6355):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
05-23 03:20:04.496: W/System.err(6355):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
05-23 03:20:04.496: W/System.err(6355):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T13:34:20.380

检查您的互联网连接和 DNS 服务器 - 看起来有问题

# python - 如何使用 python 3.x distutils 要求和安装软件包？

> ID：10712809
> 
> 赞同：5
> 
> 时间：2012-05-23T02:48:30.060
> 
> 标签：python, python-3.x, distutils

我有一个使用`dateutil`包索引的程序。我想让 setup.py 检查它的存在，`easy_install`如果它不存在则尝试使用它。

[for 的文档`distutils`](http://docs.python.org/py3k/distutils/setupscript.html#relationships-between-distributions-and-packages)似乎表明这可以使用`requires`关键字 in来完成`setup()`，但是当我尝试时，它会安装在系统上而`dateutil`不会发出警告或安装所需的软件包。

我在谷歌上唯一能找到的是[这篇关于同样问题的博客文章](http://blog.doughellmann.com/2007/11/requiring-packages-with-distutils.html)，也没有任何答案。

我用`distutils`错了吗？我是否需要子类`distutils.command.install`化并自己进行检查/安装？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T04:04:27.310

自动下载依赖项是[setuptools](http://pypi.python.org/pypi/setuptools)引入的一项功能，它是第三方插件`distutils`，特别是[`install_requires`](https://pythonhosted.org/setuptools/setuptools.html#new-and-changed-setup-keywords)它添加的参数。有关详细信息，请参阅[setuptools 文档](https://pythonhosted.org/setuptools/setuptools.html#declaring-dependencies)。

另一种选择是将[`requirements.txt`](https://pip.pypa.io/en/latest/user_guide.html#requirements-files)文件与[pip](https://pip.pypa.io/en/latest/index.html)一起使用，而不是`easy_install`用作包安装程序。 `pip`现在已成为推荐的安装程序；有关更多信息，请参阅[Python 打包用户指南](https://packaging.python.org/en/latest/index.html)。

更新 [2015-01]：此答案的先前版本指的`distribute`是`setuptools`. 此后，该`distribute`分叉已合并回一个较新的活动`setuptools`项目中。 `distribute`现在已经死了，不应该再使用了。 现在非常积极地维护并支持 Python 3 `setuptools`。`pip`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-19T15:27:24.027

来自 distutils 的 setup 函数中的参数`install_requires`对我很有效，只有当我创建 sdist 分配时，例如：`python setup.py sdist`

# android - Actionbarsherlok 清单文件错误

> ID：10712810
> 
> 赞同：0
> 
> 时间：2012-05-23T02:48:44.587
> 
> 标签：android, actionbarsherlock

我已经在我的机器上安装了 Android V4.0 和 V3.2 SDK，当我尝试在我的 eclips 中创建一个项目时，它说找不到清单文件。清单文件根本没有生成。正常的android项目正在正确创建但是如果我通过指向ABS lib创建一个项目，它会失败..

我已经尝试了几乎所有可能的步骤，例如将编译器版本设置为 1.6、重新启动等……我确定我有最新的 ADT……

请帮助我，导致问题的原因是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T03:18:19.310

尝试从 git 获取：[https ://github.com/JakeWharton/ActionBarSherlock](https://github.com/JakeWharton/ActionBarSherlock)

文件 > 导入 > 来自 git 的项目 > 克隆 > URI：[https](https://github.com/JakeWharton/ActionBarSherlock.git) ://github.com/JakeWharton/ActionBarSherlock.git > 下一步 > 完成

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T03:31:25.513

您可能给 eclipse 提供了不正确的项目源文件夹。查看本[**教程**](http://youtu.be/4GJ6yY1lNNY)以正确安装 ActionBarSherlock

# android - 如何在无头 linux 中更新 Android 平台工具？

> ID：10712812
> 
> 赞同：6
> 
> 时间：2012-05-23T02:49:13.497
> 
> 标签：android

我们有一些没有安装 X-Window 的 CI 主机，我知道如何使用 android update 命令更新 SDK，但是如何使用此命令更新平台工具？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-23T03:13:14.977

您可以使用以下命令：

```
$ android list sdk
$ android update sdk --no-ui --filter 1,platform-tools 
```

第一个命令列出了仍然要安装的可用包（按编号索引），例如：

```
Packages available for installation or update: 9
   1- Android SDK Tools, revision 19
   2- Android SDK Platform-tools, revision 11
   ... 
```

根据该列表，您可以发出第二个命令来安装您要安装的软件包。

该`--filter`选项将更新限制为您要安装的软件包。您以逗号分隔的格式指定这些包。此外，您可以通过第一个命令生成的列表中提供的索引号过滤它们。

# android - 是否可以（或可取）将 Activity 用作 ActionBar 导航选项卡或下拉导航的切换组件

> ID：10712813
> 
> 赞同：0
> 
> 时间：2012-05-23T02:49:20.110
> 
> 标签：android

我有 2 个活动。一个是显示折线图，另一个是显示饼图。我想将两者都嵌入到一个启动的活动中。允许用户单击，在折线图和饼图之间切换。

我意识到 ActionBar 的导航选项卡或下拉导航是帮助我实现此目的的最佳选择。

从 Android API 演示和从[http://developer.android.com/guide/topics/ui/actionbar.html](http://developer.android.com/guide/topics/ui/actionbar.html)找到的指南，我意识到所有切换组件都实现为`Fragment`，而不是`Activity`

1.  这是否意味着我需要将之前的 2 个活动移植到 2 个片段中，以便将它们嵌入到 ActionBar 的选项卡导航视图/下拉导航视图中？
2.  有没有其他方法可以在不移植的情况下进行？但是，这是可取的，因为我没有找到使用 Activity 的官方示例。
3.  在 API 演示中，我意识到大多数 Fragment 都是按照以下模式实现的。

* * *

```
public class FragmentStack extends Activity {
    ...
    public static class CountingFragment extends Fragment {
        // CountingFragment never access any members in FragmentStack
    }
} 
```

有什么理由这样做吗？为什么他们没有`CountingFragment`一个单独的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T03:36:17.363

如果要嵌入单个活动，首选方法是使用片段。您可能还可以使用自定义视图，但 Fragments 具有明确定义的生命周期并为您处理很多事情。因此，将功能提取到片段中，并将活动仅作为外壳，嵌入片段（如果您的新设计仍然需要它）可能是一个好主意。您可以以任何您喜欢的方式在片段之间切换：使用按钮、下拉菜单或任何其他适合您应用的 UI；您不一定必须使用操作栏。至于3.在单独的文件中定义片段没有错。Activity 和 Fragment 在示例中位于同一文件中，主要是为了更容易遵循示例。

# php - PHP基于特定数组键合并数组

> ID：10712814
> 
> 赞同：2
> 
> 时间：2012-05-23T02:49:28.157
> 
> 标签：php, arrays

我有 2 个数组，我想根据数组 1 中的键值进行合并。在下面的示例中，我希望根据 games_list 中的键 (id) 将 game_modes 放入 games_list。

数组 1 从一张满是游戏的桌子上拉出来：

```
$games_list = array(
  0 => array(
    'id' => 23,
    'name' => 'Call of Duty: Modern Warfare 3'
    ),
  2 => array(
    'id' => 1,
    'name' => 'Call of Duty: Black Ops'
    )
  ); 
```

从充满游戏模式的表格中提取的数组 2：

```
$game_modes = array(
  0 => array(
    'id' => 1,
    'game_id' => 1,
    'description' => 'Capture the Flag'
    ),
  1 => array(
    'id' => 2,
    'game_id' => 1,
    'description => 'Domination'
    ),

  2 => array(
    'id' => 3,
    'game_id' => 23,
    'description' => 'Kill Confirmed'
    )
  ); 
```

我希望结果是：

```
$games_list = array(
  0 => array(
    'id' => 23,
    'name' => 'Call of Duty: Modern Warfare 3'
    'modes' => array(
        array(
          'id' => 3,
          'game_id' => 23,
          'description' => 'Kill Confirmed'
          )
        )
    ),
  2 => array(
    'id' => 1,
    'name' => 'Call of Duty: Black Ops'
    'modes'=> array(
      0 => array(
        'id' => 1,
        'game_id' => 1,
        'description' => 'Capture the Flag'
        ),
      1 => array(
        'id' => 2,
        'game_id' => 1,
        'description => 'Domination'
        )
      )
    )
  ); 
```

附加信息，我正在开发的网站目前在其数据库中有 71 款游戏，每款游戏都可以有任意数量的游戏模式。

现在，我可以轻松地做一堆 for 循环并一起避免这个问题。截至目前，我没有将大量游戏模式输入数据库，但我一直在不断添加更多。随着时间的推移，一直以指数方式执行更多循环最终会使页面加载速度变得缓慢。

我花时间将这些数据放入内存缓存中，以使将来的调用更快，避免循环。

我对 array_map 从来都不是很好，因为我不太了解它是如何工作的，或者它是否是正确的路线。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T03:03:58.697

您不认为查询级别的解决方案会更好吗？漫长的方式是：

```
// array:  $game_modes;
// array:  $game_lists;

foreach ($game_modes as $gm=>$modes){
   if (isset($modes['game_id'])){
      foreach ($game_lists as $gl=>$lists){
         if ($lists['id'] == $modes['game_id']){
            $game_lists[$gl]['modes'][] = $modes;
            //break;
         }
      }
   }
} 
```

输出类别：摘要

```
$query = 'SELECT 
                g.id, g.name_name,
                group_concat(gm.description) as descriptions
          FROM games as g
          LEFT JOIN games_modes as gm
               ON g.id = gm.game_id
          GROUP BY g.id'; 
```

结果：

```
 id |  name                     |  descriptions
------------------------------------------------------------
  1  |  Call of Duty: Black Ops  |  Capture the Flag, Domination 
```

输出类别：详细

```
$query = 'SELECT 
                g.id, g.name_name,
                gm.id, gm.description
          FROM games as g
          LEFT JOIN games_modes as gm
               ON g.id = gm.game_id
          ORDER BY g.id'; 
```

结果：

```
 id |  name                     |  id   |  description
----- --------------------------- ------- ------------------
  1  |  Call of Duty: Black Ops  |   1   |  Capture the Flag
  1  |  Call of Duty: Black Ops  |   2   |  Domination 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T03:20:26.020

试试这个来减少循环

```
$cachearray = array();
foreach ($game_modes as $gm=>$modes){
  if(array_key_exists($modes['game_id'],$cachearray))
  {
     $cachearray[$modes['game_id']]['modes'][] = $modes;
  }
  else         
     foreach ($games_list as $gl=>$lists){
        if ($lists['id'] == $modes['game_id']){
           $games_list[$gl]['modes'][] = $modes;
           $cachearray[$lists['id']] = &$games_list[$gl];
           break;
        }
     }
}

print_r($games_list); 
```

如果你有这样的`$games_list`数组会更容易

```
$games_list = array(
   23 => array(
     'id' => 23,
     'name' => 'Call of Duty: Modern Warfare 3'
   ),
   1 => array(
     'id' => 1,
     'name' => 'Call of Duty: Black Ops'
   )
); 
```

并且通过使用查询将更强大

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T03:23:57.767

如果你想用户数组映射，这个代码应该是可能的：

```
$ids = array_map(function($game) { return $game['id']; }, $games_list);
$id_mapping = array_flip($ids);    

foreach($game_modes as $mode) {
    if (array_key_exists($mode['game_id'], $id_mapping)) {
        $games_list[$id_mapping[$mode['game_id']]]['modes'][] = $mode;
    }
} 
```

但我不知道这是否比两个 for 循环快。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T03:58:49.787

试试这个：

```
$mode_map = array();
foreach($game_modes as $mode)
{
    $game_id = $mode['game_id'];
    if(!isset($mode_map[$game_id]))
    {
        $mode_map[$game_id] = array();
    }

    $mode_map[$game_id][] = $mode;
}

foreach($games_list as &$game)
{
    $game_id = $game['id'];
    if(isset($mode_map[$game_id]))
    {
        $game['modes'] = $mode_map[$game_id];
    }
}

print_r($games_list); 
```

结果：

```
Array
(
    [0] => Array
        (
            [id] => 23
            [name] => Call of Duty: Modern Warfare 3
            [modes] => Array
                (
                    [0] => Array
                        (
                            [id] => 3
                            [game_id] => 23
                            [description] => Kill Confirmed
                        )

                )

        )

    [2] => Array
        (
            [id] => 1
            [name] => Call of Duty: Black Ops
            [modes] => Array
                (
                    [0] => Array
                        (
                            [id] => 1
                            [game_id] => 1
                            [description] => Capture the Flag
                        )

                    [1] => Array
                        (
                            [id] => 2
                            [game_id] => 1
                            [description] => Domination
                        )

                )

        )

) 
```

# c# - 如何在 ASP.NET MVC 中指定文件路径

> ID：10712815
> 
> 赞同：0
> 
> 时间：2012-05-23T02:49:36.787
> 
> 标签：c#, asp.net-mvc-3, file-io

我想指定文件的虚拟路径，但我不能这样做。

这是我的代码：

```
int Course_Id = 1;
int PortfolioID=1;
int ChandidateID=1;

string filepath = Server.MapPath("~/ePortfolio/PortFolioContent/" + Course_Id + "/Assignments/Exhb_" + item.PortfolioID + "_" + item.ChandidateID + ".jpg");

if(System.IO.File.Exists((filepath)))
{                            
    ViewBag.Thumbnail = filepath;
} 
```

当我使用 Server.MapPath 时，它正在从其他路径获取数据：
我的原始路径是：
E:\HOBBYHOMES(E-PORTFOLIO)\HobbyHomesWebApp\ePortfolio\PortFolioContent\1\Assignments
但它采用的是这条路径
E:\HOBBYHOMES( E-PORTFOLIO)\HobbyHomesWebApp\ActivityPostin\Images\ePortfolio\PortFolioContent\1\Assignments\Exhb_1_1.jpg
我不明白为什么这样工作。请帮帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T03:08:18.727

尝试`string filepath = Server.MapPath("~/... ...jpg");`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T05:22:17.883

您可以使用 @Url.Content("~/Content/Images/YourImageName.png")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T06:09:35.477

尝试做这样的事情：

```
Path.Combine(Server.MapPath("~/"),("ePortfolio\\PortFolioContent\\" + Course_Id + "\\Assignments\\Exhb_" + item.PortfolioID + "_" + item.ChandidateID + ".jpg")); 
```

从理论上讲，它会导致您之前失败的相同答案。在实践中，它可能会产生完全不同的答案。

这里还有一个最近的问题（我目前找不到），它强调有时 Server.MapPath("~/..etc..") 在重写的请求路径上行为不端。您是否正在重写试图形成此路径的请求？

# sql - Rails 3.2 ActiveRecord SQL 语法错误

> ID：10712817
> 
> 赞同：2
> 
> 时间：2012-05-23T02:49:43.467
> 
> 标签：sql, ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我刚刚为 ajax 调用编写了控制器，如下所示：

```
def create 
    @like = Like.new(params[:like])
    post = params[:like][:post_id]
    uid = params[:like][:ip_address]
    @extant = Like.find(:last, :conditions => ["post_id ? AND ip_address = ?", post, uid])
    last_like_time = @extant.created_at unless @extant.blank?
    curr_time = Time.now

    if ((@extant && curr_time - last_like_time >= 24.hours) || @extant.blank?)
      respond_to do |format|
        if @like.save
          format.js
          format.html { redirect_to :back }
        else
          format.html { redirect_to posts_path }
          format.json { render :json => @like.errors, :status => @unprocessable_entity }
        end
    end

    else
      render :js => "alert('You already liked this.');"
    end

end 
```

这是视图erb。

```
<%= form_for(@like, :remote => true) do |f| %>
<%= f.hidden_field "post_id", :value => @post.id %>
<%= f.hidden_field "ip_address", :value => request.remote_ip %>
<%= submit_tag "Like" %>
<% end %> 
```

它执行如下 SQL 命令：

```
SELECT  "likes".* FROM "likes"  WHERE (post_id '1' AND ip_address = '127.0.0.1') ORDER BY "likes"."id" DESC LIMIT 1 
```

它会导致 SQL 语法错误。我认为我的 ruby​​ 语法是错误的，那么我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T02:52:26.377

从此更改您的 ruby​​ 代码：

```
"post_id ? AND ip_address = ?" 
```

至

```
"post_id = ? AND ip_address = ?" 
```

# jquery - jquery ajax响应，遍历xml构建嵌套菜单树

> ID：10712820
> 
> 赞同：0
> 
> 时间：2012-05-23T02:50:23.910
> 
> 标签：jquery, xml, ajax, filter, traversal

我想弄清楚这一点，我正在尝试构建一个具有多级的简单菜单树

```
RootFolder
- First Sub Folder
-- First Sub Sub Folder
--- First Sub Sub Sub Folder
--- First Sub Sub Sub Sub Folder
- Second Sub Folder
- Second Sub Sub Folder 
```

我的 XML 非常简单（不是正确的值）

```
<OrgFolderDetails>
    <FolderName>Main Folder</FolderName>
    <TheChildren>
        <OrgFolderDetails>
            <FolderName>First Sub Folder</FolderName>
            <TheChildren>
                <OrgFolderDetails>
                    <FolderName>First Sub Sub Folder</FolderName>
                    <TheChildren>
                        <OrgFolderDetails>
                            <FolderName>First Sub Siub Sub Folder</FolderName>
                            <TheChildren>
                                <OrgFolderDetails>
                                    <FolderName>First Sub Sub Sub Sub Folder</FolderName>
                                    <TheChildren/>
                                </OrgFolderDetails>
                            </TheChildren>
                        </OrgFolderDetails>
                    </TheChildren>
                </OrgFolderDetails>
            </TheChildren>
        </OrgFolderDetails>
        <OrgFolderDetails>
            <FolderName>Second Sub Folder</FolderName>
            <TheChildren>
                <OrgFolderDetails>
                    <FolderName>Second Sub Sub Folder</FolderName>
                    <TheChildren/>
                </OrgFolderDetails>
            </TheChildren>
        </OrgFolderDetails>
    </TheChildren>
</OrgFolderDetails> 
```

我使用了 jQuery 的 .filter() 和。find() each() 没有任何成功，它没有给我漂亮的破折号来指示我在哪个级别，它只是吐出文件夹名称。

我的代码遍历

```
 $(data).find("FolderName").each(function(){
             var folderName = $(this).text();

            $("#folderLevels").append(folderName+"<br/>");
         }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T03:21:46.690

好的，据我了解，我们需要构建一个菜单，前面有一定数量的破折号，具体取决于孩子的水平。幸运的是，jQuery 让这变得很容易。

```
$(data).find("FolderName").each(function(){ 
    var levels = $(this).parents("OrgFolderDetails").size();
    var text = $(this).text();
    var html = "";

    for(var j=0; j < levels; j++){
        html += "-";    
    }
    html += " "+text+"</br>"; //add in that space after the dashes, and the <br>

    $("#folderLevels").append(html);
}); 
```

希望有帮助。主要的助手是`parents()`方法。 [http://api.jquery.com/parents](http://api.jquery.com/parents)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T03:22:14.923

我想你会想要为此使用递归函数。

```
var s = getNestedString($(data), 0);

function getNestedString(d, level) {
    // get the name of current node
    var s = d.children("FolderName").text() + "<br/>";

    // prepend with dashes for inner levels
    for (var i=0 ; i<level ; i++) {
        s = "-" + s;
    }

    // get children and call this function recursively (incrementing level)
    var ch = d.children("TheChildren").children("OrgFolderDetails");
    for (var i=0 ; i < ch.length ; i++) {
        s = s + getNestedString(ch[i], level+1);
    }

    // return string for current and nested nodes
    return s;
} 
```

# asp.net-mvc - 在 ASP.NET MVC 中使用 JSON 数据

> ID：10712821
> 
> 赞同：0
> 
> 时间：2012-05-23T02:50:32.370
> 
> 标签：asp.net-mvc, json, jquery-mobile

我以前没有这样做过，所以需要一些线索。我有一个 ASP.NET MVC4（测试版）项目 - 移动项目 - 设置。我得到了一组 REST API 来使用。我该怎么做？API 以 JSON 格式返回数据。你有任何例子，最佳实践......？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T06:05:45.037

您可以使用该`$.ajax`方法向服务器上的 Web Api 控制器发送 AJAX 请求：

```
$.ajax({
    url: 'api/values/123',
    type: 'GET',
    success: function(data) {
        // if the controller returned JSON data, the data argument
        // will represent a javascript object that you could directly
        // access its properties 
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T02:53:22.733

类的使用`DownloadString`方法`WebClient`。这将为您提供 RESTURL 返回的字符串输出。您可以将其转换为 Json 并迭代结果

```
string address="http://yourrestdomain/customer/234";
WebClient client = new WebClient ();
string reply = client.DownloadString (address); 
```

# xslt - 基于子值构建表

> ID：10712831
> 
> 赞同：0
> 
> 时间：2012-05-23T02:52:02.170
> 
> 标签：xslt, parent, negative-lookahead

您好我正在尝试根据以下输入的样本返回一个表：

```
<Table TableLevel="1" TableNumber="1" TableTitle="">
  <TableRow TableRowLevel="1" RowTitle="" TableRowNumber="1" class="Even">
    <TableHeader width="33" class="tableheadercell">
      <Paragraph>Account Name</Paragraph>
    </TableHeader>
    <TableHeader width="10" class="tableheadercell">
      <Paragraph>Type</Paragraph>
    </TableHeader>
    <TableHeader width="57" class="tableheadercell">
      <Paragraph>Additional Information</Paragraph>
    </TableHeader>
  </TableRow>
  <TableRow TableRowLevel="1" RowTitle="" TableRowNumber="2" class="OddLegacy">
    <TableCell>
      <Paragraph>ANONYMOUS LOGON</Paragraph>
    </TableCell>
    <TableCell>
      <Paragraph>Group</Paragraph>
    </TableCell>
    <TableCell>
      <UnorderedList UnorderedListLevel="1" class="compactList" UnorderedListNumber="1">
        <ListItem>comment: ANONYMOUS LOGON</ListItem>
        <ListItem>group-id: 7</ListItem>
      </UnorderedList>
    </TableCell>
  </TableRow>
  <TableRow TableRowLevel="1" RowTitle="" TableRowNumber="3" class="Even">
    <TableCell>
      <Paragraph>Administrators</Paragraph>
    </TableCell>
    <TableCell>
      <Paragraph>Group</Paragraph>
    </TableCell>
    <TableCell>
      <UnorderedList UnorderedListLevel="1" class="compactList" UnorderedListNumber="1">
        <ListItem>group-id: 544</ListItem>
      </UnorderedList>
    </TableCell>
  </TableRow>
</Table> 
```

然后是我的 XSLT：

```
<xsl:variable name="whiteuserxml">
    <item>ANONYMOUS LOGON</item>
</xsl:variable>
<xsl:for-each select="Table">
    <table>
    <xsl:for-each select="TableRow[not(TableCell/Paragraph = $whiteuserxml/item)]">
        <xsl:choose>
        <xsl:when test="count(TableCell) = 0"/>
        <xsl:otherwise>
            <tr>
            <xsl:for-each select="TableHeader">
                <td><b><xsl:apply-templates select="*"/></b></td>
            </xsl:for-each>
            <xsl:for-each select="TableCell">
                        <td><xsl:apply-templates select="*"/></td>
            </xsl:for-each>
               </tr>
        </xsl:otherwise>
        </xsl:choose>
    </xsl:for-each>
    </table>
</xsl:for-each> 
```

期望的输出：

```
<table>
    <tr>
        <td>Administrators</td><td>Group</td><td>the other stufflist</td>
    </tr>
</table> 
```

我遇到的问题是，如果表为空，我无法阻止创建表，当我确定它是否包含合法行时，为时已晚，无法重新添加表名

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T06:08:52.540

您可以在表格级别上移动该选择并检查它是否包含单元格

```
<xsl:when test="count(TableRow/TableCell) = 0"/> 
```

评论：好的，有了“白名单”条件，仍然在提升条件

```
<xsl:for-each select="Table[count(TableRow[not(TableCell/Paragraph = $whiteuserxml/item)]/TableCell)=0]">...
</xsl:when> 
```

您将不得不在内部循环中再次过滤。

关键是，您可以使用 xslt/xpath 构建在数据树中向前（或其他方向）的复杂条件。您不限于当前节点和属性

# git - Ubuntu 12.04 上的 Git 克隆 XAMPP

> ID：10712832
> 
> 赞同：0
> 
> 时间：2012-05-23T02:52:06.007
> 
> 标签：git, ubuntu, xampp

我正在尝试通过 Ubuntu 12.04 - [https://github.com/mozilla/butter](https://github.com/mozilla/butter)安装黄油。

我可以通过 github 上的说明获取所有文件，这些文件复制到我的 /home/butter 目录。我使用 XAMPP 进行本地开发。如何修改 git 以下载和配置存储库以从 /opt/lampp/htdocs/xampp/ 运行？

如您所知，我是 git 新手，但通过研究（还）找不到我的答案。我试过这个 - [git clone localhost？](https://stackoverflow.com/questions/7888379/git-clone-localhost)但是当我执行以下操作时，Ubuntu 说该目录不存在： $ cd /opt/lampp/htdocs/xampp/ $ git clone /opt/lampp/htdocs/xampp/

非常感谢您提供的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T05:15:02.167

git clone 是一个命令，它告诉将远程存储库克隆到您调用该命令的当前目录中的文件夹中。（除非您指定不同的名称，否则文件夹名称与 repo 的名称相同）

你需要做的是，

转到您的 xampp htdocs 目录（我认为这是您需要的，而不是将其放在 xampp 目录中）

```
cd /opt/lampp/htdocs/ 
```

然后克隆，

```
git clone https://github.com/mozilla/butter 
```

在此之后，您可以将浏览器导航到 hxxp://127.0.0.1/butter 并做您想做的事情。（用't'替换'x'）

# sql-server-2008 - 如何将数据透视表保存为永久表

> ID：10712834
> 
> 赞同：1
> 
> 时间：2012-05-23T02:52:18.670
> 
> 标签：sql-server-2008

我在 MS Sql Server 2008 中创建了一个数据透视表。如何将生成的数据透视表保存到永久表中？

```
SELECT *
FROM (SELECT yr as [year], lname as [player], avg_rating as Rating
  FROM pool_ratings_yr1) as s
PIVOT
  (SUM(Rating) FOR [player] in (greenleaf, maturo, allen, caras, concannon, taberski, mosconi, weston, seaback, deoro, blankenship, ralph, keough, kreuter, layton, hueston, rudolph, lauri) ) AS pool_pivot 
```

谢谢，威尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T02:56:36.773

使用[`SELECT INTO`](http://msdn.microsoft.com/en-us/library/ms188029%28SQL.100%29.aspx)：

```
SELECT *
INTO dbo.Permanent_Table_1
FROM 
(
  SELECT yr as [year], lname as [player], avg_rating as Rating
  FROM dbo.pool_ratings_yr1
) as s
PIVOT
(
   SUM(Rating) FOR [player] in (greenleaf, maturo, allen, caras, 
      concannon, taberski, mosconi, weston, seaback, deoro, blankenship, 
      ralph, keough, kreuter, layton, hueston, rudolph, lauri) 
) AS pool_pivot; 
```

# css - 样式化表格布局固定和固定宽度的列+ colspan

> ID：10712839
> 
> 赞同：9
> 
> 时间：2012-05-23T02:52:48.123
> 
> 标签：css, html-table

我有以下布局。

```
<style>
   table { width: 200px; white-space: nowrap; table-layout: fixed; }
   .a { width:10px; overflow: hidden; text-overflow: ellipsis }
   .b { width:190px; overflow: hidden; text-overflow: ellipsis }
</style>

<table border="1" style="">
    <tr>         
        <td colspan="2">Some content header goes in here</td>
    </tr>
    <tr>
        <td class="a">This cells has more content</td>
        <td class="b">Less content here</td>
    </tr>
</table> 
```

我正在尝试设置固定的表格布局并在每列上具有固定的宽度，但是，由于我`colspan`在固定列之上，所以我无法设置宽度。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-23T03:18:40.417

[`col`](https://developer.mozilla.org/en/HTML/Element/col)您可以在开始标签之后添加几个`<table>`标签并设置它们的宽度：

```
<style>
   table { width: 200px; white-space: nowrap; table-layout: fixed; }
   .a { overflow: hidden; text-overflow: ellipsis }
   .b { overflow: hidden; text-overflow: ellipsis }
   .cola { width: 10px; }
   .colb { width: 190px; }
</style>

<table border="1" style="">
    <col class="cola" />
    <col class="colb" />
    <tr>         
        <td colspan="2">Some content header goes in here</td>
    </tr>
    <tr>
        <td class="a">This cells has more content</td>
        <td class="b">Less content here</td>
    </tr>
</table> 
```

# php - 以标题行为键的 CSV 到 Json

> ID：10712840
> 
> 赞同：3
> 
> 时间：2012-05-23T02:52:53.557
> 
> 标签：php, json

我想将 CSV 转换为 Json，使用标题行作为键，每一行作为对象。我该怎么做呢？

----------------------------------CSV--------------- ------------------

```
 InvKey,DocNum,CardCode
 11704,1611704,BENV1072
 11703,1611703,BENV1073 
```

---------------------------------PHP---------------- ------------------

```
 if (($handle = fopen('upload/BEN-new.csv'. '', "r")) !== FALSE) {
       while (($row_array = fgetcsv($handle, 1024, ","))) {
            while ($val != '') {
                foreach ($row_array as $key => $val) {
                        $row_array[] = $val;
                        }
                }
            $complete[] = $row_array;   
            }
            fclose($handle);
        }
        echo json_encode($complete); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-23T03:04:18.693

只需单独阅读第一行并将其合并到每一行中：

```
if (($handle = fopen('upload/BEN-new.csv', 'r')) === false) {
    die('Error opening file');
}

$headers = fgetcsv($handle, 1024, ',');
$complete = array();

while ($row = fgetcsv($handle, 1024, ',')) {
    $complete[] = array_combine($headers, $row);
}

fclose($handle);

echo json_encode($complete); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-04T21:33:43.467

我发现自己每隔几个月就会将 csv 字符串转换为数组或对象。

我创建了一个类，因为我很懒，不喜欢复制/粘贴代码。

此类将 csv 字符串转换为自定义类对象：

[将csv字符串转换为PHP中的数组或对象](https://github.com/projectivemotion/csv-to-objects)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-23T00:06:34.237

对于那些想要详细说明的人+一些空间来进一步解析任何行/列而无需额外的循环：

```
function csv_to_json_byheader($filename){
    $json = array();
    if (($handle = fopen($filename, "r")) !== FALSE) {
        $rownum = 0;
        $header = array();
        while (($row = fgetcsv($handle, 1024, ",")) !== FALSE) {
            if ($rownum === 0) {
                for($i=0; $i < count($row); $i++){
// maybe you want to strip special characters or merge duplicate columns here?
                    $header[$i] = trim($row[$i]);
                }
            } else {
                if (count($row) === count($header)) {
                    $rowJson = array();                     
                    foreach($header as $i=>$head) {
                // maybe handle special row/cell parsing here, per column header
                        $rowJson[$head] = $row[$i];                     
                    }
                    array_push($json, $rowJson);
                }
            }
            $rownum++;
        }
        fclose($handle);
    }
    return $json;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-23T06:15:26.590

```
$feed="https://gist.githubusercontent.com/devfaysal/9143ca22afcbf252d521f5bf2bdc6194/raw/ec46f6c2017325345e7df2483d8829231049bce8/data.csv";
//Read the csv and return as array
$data = array_map('str_getcsv', file($feed));
//Get the first raw as the key
$keys = array_shift($data);  
//Add label to each value
$newArray = array_map(function($values) use ($keys){
    return array_combine($keys, $values);
}, $data);
// Print it out as JSON
header('Content-Type: application/json');
echo json_encode($newArray); 
```

主要要点： [https ://gist.github.com/devfaysal/9143ca22afcbf252d521f5bf2bdc6194](https://gist.github.com/devfaysal/9143ca22afcbf252d521f5bf2bdc6194)

# php - PHP脚本在每个字符之间添加一个空格

> ID：10712841
> 
> 赞同：1
> 
> 时间：2012-05-23T02:53:17.420
> 
> 标签：php, text, whitespace

我写的脚本有点问题。

它基本上以每种可能的顺序组合了文本的排列。

出于某种原因，它在每个字符之间添加了一个空格 - 任何人都可以找出原因吗？

提前致谢。

```
<?php  

if(isset($_POST['submit'])) 
{ 

 //pull in the perms
$perms = "{#A#B#C|#A#B#D|#A#B#E|#A#B#F|#A#C#D|#A#C#E|#A#C#F|#A#D#E|#A#D#F|#A#E#F|#B#C#D|#B#C#E|#B#C#F|#B#D#E|#B#D#F|#B#E#F|#C#D#E|#C#D#F|#C#E#F|#D#E#F}";

//open the box's
$box1= fopen("box1.txt","r");
$box2= fopen("box2.txt","r");
$box3= fopen("box3.txt","r");
$box4= fopen("box4.txt","r");
$box5= fopen("box5.txt","r");
$box6= fopen("box6.txt","r");

//this is the output
$tulis = fopen("output.txt","w+");

//read the box's
$box1 = fread($box1, filesize("box1.txt"));
$box2 = fread($box2, filesize("box2.txt"));
$box3 = fread($box3, filesize("box3.txt"));
$box4 = fread($box4, filesize("box4.txt"));
$box5 = fread($box5, filesize("box5.txt"));
$box6 = fread($box6, filesize("box6.txt"));

$perms = str_replace("#A","$box1",$perms);
$perms = str_replace("#B","$box2",$perms);
$perms = str_replace("#C","$box3",$perms);
$perms = str_replace("#D","$box4",$perms);
$perms = str_replace("#E","$box5",$perms);
$perms = str_replace("#F","$box6",$perms);

echo $text;

fwrite($tulis,$perms);

//close them properly
$box1= fopen("box1.txt","r");
$box2= fopen("box2.txt","r");
$box3= fopen("box3.txt","r");
$box4= fopen("box4.txt","r");
$box5= fopen("box5.txt","r");
$box6= fopen("box6.txt","r");

fclose($box1);
fclose($box2);
fclose($box3);
fclose($box4);
fclose($box5);
fclose($box6);

fclose($tulis);

} 

//this means that if the submit button hasn't been pressed, print the form! 
else 
{ 
    print ' 
<form action="'.$_SERVER['PHP_SELF'].'" method="POST"> 

<input type="submit" name="submit"></input> 
</form> 
'; 
} 

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T03:30:03.287

除非我弄错了并且我错过了您要执行的操作，否则此脚本的执行方式与您编写的非常相似，只是没有`str_replace`，并且它会自动为您提供的文件数创建排列（至少 3 个才能工作）适当地） ：

```
$files = array(
   "box1.txt",
   "box2.txt",
   "box3.txt",
   "box4.txt",
   "box5.txt",
   "box6.txt"
);
$contents = array();

foreach ($files as $index => $filename) {
   $contents[$index] = trim(file_get_contents($filename), " \n\r");
}

$perms = array();
$len = count($contents);
for ($i=0; $i<$len-2; $i++) {
   for ($j=$i+1; $j<$len-1; $j++) {
      for ($k=$j+1; $k<$len; $k++) {
          $perms[] = $contents[$i] . $contents[$j] . $contents[$k];
      }
   }
}

$text = '{' . implode('|', $perms) . '}';

file_put_contents('output.txt', $text); 
```

请注意，此版本不使用从文件`fopen`中`trim`读取的文本来删除内容中的任何空格（CR 和 CL 字符）。

****编辑****

这是我制作的实际测试程序：

```
header('Content-type: text/plain; charset=utf-8');

$contents = array(
   'A', 'B', 'C', 'D', 'E', 'F'
);

// fixed embedded loops method
$perms = array();
$len = count($contents);
for ($i=0; $i<$len-2; $i++) {
   for ($j=$i+1; $j<$len-1; $j++) {
      for ($k=$j+1; $k<$len; $k++) {
          $perms[] = $contents[$i] . $contents[$j] . $contents[$k];
      }
   }
}

$text = '{' . implode('|', $perms) . '}';

echo $text . "\n";

// Recursive method
function permutationRecursive( & $perms, $maxDepth, $contents = array(), $values = array(), $startIndex = 0) {
   for ($i=$startIndex, $count=count($contents)-($maxDepth-1); $i<$count; $i++) {
      array_push($values, $contents[$i]);
      if ($maxDepth > 1) {
         permutationRecursive( $perms, $maxDepth - 1, $contents, $values, $i + 1);
      } else {
         $perms[] = implode($values);
      }
      array_pop($values);
   }
}

$perms = array();
permutationRecursive($perms, 3, $contents);
$text = '{' . implode('|', $perms) . '}';

echo $text . "\n";; 
```

这个脚本的输出是

```
{ABC|ABD|ABE|ABF|ACD|ACE|ACF|ADE|ADF|AEF|BCD|BCE|BCF|BDE|BDF|BEF|CDE|CDF|CEF|DEF}
{ABC|ABD|ABE|ABF|ACD|ACE|ACF|ADE|ADF|AEF|BCD|BCE|BCF|BDE|BDF|BEF|CDE|CDF|CEF|DEF} 
```

# python - python中的调和均值

> ID：10712842
> 
> 赞同：18
> 
> 时间：2012-05-23T02:53:18.183
> 
> 标签：python, math, statistics, scipy, mean

Python ( ) 中的 Harmonic Mean 函数`scipy.stats.hmean`要求输入为正数。

例如：

```
from scipy import stats
print stats.hmean([ -50.2 , 100.5 ]) 
```

结果是：

```
ValueError: Harmonic mean only defined if all elements greater than zero 
```

我在数学上不明白为什么会这样，除了你最终会被零除的罕见情况。不是检查除以零，而是`hmean()`在输入任何正数时抛出错误，无论是否可以找到调和平均值。

我在数学上遗漏了什么吗？或者这真的是一个限制`SciPy`吗？

你将如何找到一组在 python 中可能是正数或负数的数字的调和平均值？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-05-23T03:06:42.797

调和平均值仅针对正实数集定义。如果您尝试对带有负数的集合进行计算，即使您没有按 0 命中 div，也会得到各种奇怪且无用的结果。例如，将公式应用于集合 (3, -3, 4) 给出了一个平均值12！

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-23T03:00:46.170

您可以只使用谐波平均值定义方程：

```
len(a) / np.sum(1.0/a) 
```

但是，维基百科说调和平均值是为正实数定义的：

[http://en.wikipedia.org/wiki/Harmonic_mean](http://en.wikipedia.org/wiki/Harmonic_mean)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-05-11T08:24:46.887

如果您使用 Python >= 3.6，则有一个统计库：

[https://docs.python.org/3/library/statistics.html](https://docs.python.org/3/library/statistics.html)

你可以像这样使用它的平均方法。假设您有一个要查找均值的数字列表：

```
list = [11, 13, 12, 15, 17]
import statistics as s
s.harmonic_mean(list) 
```

它也有其他方法，如标准差、方差、众数、均值、中位数等，这些方法也很有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-23T03:20:14.770

调和平均值的数学定义本身并不禁止应用于负数（尽管您可能不想计算 +1 和 -1 的调和平均值），但是，它旨在计算比率等量的平均值，以便对每个数据点给予相等的权重，而在算术方法或类似方法中，极端数据点的比率会获得很高的权重，因此是不受欢迎的。

因此，您可以尝试像@HYRY 建议的那样自行对定义进行硬编码，或者可能在错误的上下文中应用了调和平均值。

# php - php 有时只显示代码

> ID：10712845
> 
> 赞同：0
> 
> 时间：2012-05-23T02:53:37.880
> 
> 标签：php

我正在学习 PHP（所以我是菜鸟）。我正在使用 XAMPP、Apache 在 PC（Windows 7）上工作。

我有两个文件 exampleform.html：

```
<html>
<body>

<form action="welcome.php" method="post">
Name: <input type="text" name="fname" />
Age: <input type="text" name="age" />
<input type="submit" />
</form>

</body>
</html> 
```

和欢迎.php：

```
<html>
<body>

Welcome <?php echo $_POST["fname"]; ?>!<br />
You are <?php echo $_POST["age"]; ?> years old.

</body>
</html> 
```

我创建了这两个文件并且运行良好。周一我遇到了一个问题，即单击按钮峰会查询时，它会显示代码而不是结果。我搜索了几个论坛，发现我需要将以下行添加到 httpd.conf (xampp/apache/conf/)：

AddType application/x-httpd-php-source .phps

AddType 应用程序/x-httpd-php .php .php5 .php4 .php3 .phtml .php

然后它起作用了。今天，当我再次尝试时，它再次向我显示了代码。请帮忙。不可能这么复杂！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T03:03:56.137

我不了解 XAMPP，但它似乎会在您重新启动服务器时覆盖配置文件（即重新启动 Windows）。

尝试安装[WAMP](http://www.wampserver.com/en/)，它最初是为 Windows 制作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T03:02:17.650

您对 httpd.conf 的更改是否被反转？如果是这样，请尝试将它们放回去并重新启动您的 apache。如果没有，请检查您的 httpd.conf 文件，确保已加载 php5 模块，您应该寻找类似于以下的一行：

LoadModule php5_module libexec/apache2/libphp5.so

# ios - 删除应用内购买测试用户帐户中的购买

> ID：10712849
> 
> 赞同：12
> 
> 时间：2012-05-23T02:53:54.207
> 
> 标签：ios, cocoa-touch

我有一个测试用户帐户，可以很好地测试应用程序购买。

我想从这个帐户中“删除”一次购买，所以我可以多次测试购买。现在，如果我尝试购买，逻辑上说测试用户已经购买了相关产品。

我可以从测试用户帐户中删除购买，以便我可以多次测试相同的购买。我不想每次我想测试购买时都必须创建一个新的测试用户。

编辑：每次我尝试购买时，我都会收到一个对话框，上面写着“你已经购买了这个。点击 OK 再次免费下载”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T04:09:32.693

如果你真的想测试它干净，你将不得不创建另一个测试用户。但是，我认为没有必要这样做。重新下载应用内购买是一个几乎相同的代码流。实际的购买和验证逻辑不是您的应用程序的一部分，并且用户多次购买东西不是应该发生的事情（除非您指定它是那种消耗品）。如果它适用于重新下载，则可以安全地假设它适用于初始购买。

您无权访问此数据。如果 Apple 公开了一种重置购买的方法，他们将面临安全风险，因为我认为他们的沙箱服务器代码实际上与他们的生产代码相同（否则沙箱将毫无意义）。因为数据在 Apple 的服务器上，与 iTunes 帐户相关联，所以它可以跨越多个设备。

另一种想法是从 iTunes Connect 中删除应用内购买，然后创建一个新的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T05:29:14.233

如果您的应用内购买类型是**消耗品**，那么您只需重新安装您的应用即可。如果您的应用内购买是**不可消费的**，那么您将需要创建额外的测试用户。

# wpf - 按钮单击时的 WPF 动画问题

> ID：10712852
> 
> 赞同：1
> 
> 时间：2012-05-23T02:54:26.267
> 
> 标签：wpf, animation, button

在触发按钮的单击事件之前，我想显示一些按钮的动画。我正在使用以下 XAML 来实现这一点，但似乎`Button.IsPressed`在单击事件后触发了触发器。

如何设置触发器，使其在点击事件之前首先显示动画？

```
<Button x:Name="button" 
        Width="131" 
        Height="37" 
        Content="Button" 
        Margin="0,0,0,22" 
        Click="button_Click">
    <Button.Style>
        <Style TargetType="{x:Type Button}">
            <Style.Triggers>
                <Trigger Property="Button.IsPressed"  Value="True">
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation Storyboard.TargetProperty="Width"
                                                 From="130" 
                                                 To="0" 
                                                 Duration="0:0:2"/>
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Button.Style>
</Button> 
```

**编辑：**我试过这个但同样的事情。

```
<EventTrigger RoutedEvent="PreviewMouseLeftButtonDown">
    <BeginStoryboard>
        <Storyboard>
            <DoubleAnimation Storyboard.TargetProperty="Width" 
                             From="130" 
                             To="0" 
                             Duration="0:0:2"/>
        </Storyboard>
    </BeginStoryboard>
</EventTrigger> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T04:20:27.333

您没有提及您希望动画何时开始，但您可以尝试使用[PreviewMouseLeftButtonDown](http://msdn.microsoft.com/en-us/library/system.windows.uielement.previewmouseleftbuttondown.aspx)

# asp.net - 如何在asp.net中单击按钮重新加载中继器

> ID：10712854
> 
> 赞同：1
> 
> 时间：2012-05-23T02:54:33.927
> 
> 标签：asp.net, data-binding, repeater

我的页面上有一个转发器，在页面加载时被填充

```
 con.Open();
        SqlDataReader postView = cmd.ExecuteReader();
        topicView.DataSource = postView;
        topicView.DataBind(); 
```

然后我有一个部分可以添加帖子。我想要它做的是当用户按下添加时，它会重新加载页面并显示更新的转发器。但是它没有这样做

每个人都说只是重新加载数据绑定，除了由于原始数据绑定在页面加载中而不起作用，并且新的数据绑定在受保护的无效按钮单击中。

谁能告诉我该怎么做，还是我只需要在按钮点击代码中放置所有连接、数据源和数据绑定信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T03:01:04.843

您可以创建一个可以在每次按钮单击事件触发时调用的函数

```
 Private void BindRepeater()
 {
     con.Open();
    SqlDataReader postView = cmd.ExecuteReader();
    topicView.DataSource = postView;
    topicView.DataBind();
  }

  Protected Button_Click(object as sender , EventArgs e)
 {
   //call the function to populate the repeater with the updated records
   this.BindRepeater();

  } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T03:06:12.237

你可以像这样解决它。创建一个方法

```
private void Bind()
{
        con.Open();
        SqlDataReader postView = cmd.ExecuteReader();
        topicView.DataSource = postView;
        topicView.DataBind();
} 
```

现在您可以在需要重新加载中继器的页面上的任何位置使用它。

# sass - 未设置罗盘单文本阴影（）

> ID：10712856
> 
> 赞同：4
> 
> 时间：2012-05-23T02:54:53.863
> 
> 标签：sass, compass-sass

有没有办法取消或删除指南针功能的[文本阴影效果？](http://compass-style.org/reference/compass/css3/text-shadow/)

例如，我想为所有标题元素全局设置文本阴影，然后在某些情况下消除它。

```
h2 { @include single-text-shadow($blue, 1px, 1px, 0); } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-23T06:33:35.547

与 CSS 一样，只需声明`none`：

```
.specific h2 { @include single-text-shadow(none); } 
```

# amazon-emr - 如何加速亚马逊 EMR 引导程序？

> ID：10712857
> 
> 赞同：10
> 
> 时间：2012-05-23T02:55:06.890
> 
> 标签：amazon-emr

我正在使用 amazon EMR 进行一些密集的计算，但是，开始计算大约需要 7 分钟，有没有一些聪明的方法可以让我的计算立即开始？计算是从面向用户的网站开始的 python 流，所以我真的无法承受长时间的启动。

我可能只是错过了亚马逊 AWS 的海洋选项。我只想简单地启动作业（这就是我使用的 EMR）、可扩展性，并且只为我使用的东西付费（并且启动时间没有用处）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2015-05-15T21:47:24.857

我知道这是一个老问题，但有一些见解我会添加到下一个找到这个线程的搜索者，希望能加快 Amazon EMR 上的引导时间。

有一段时间我想知道为什么我的集群需要这么长时间才能启动，通常大约 15 分钟。对于通常在 1 小时内完成的工作，这需要相当大的时间。有时它会将工作推到 1 小时之后，但我认为值得庆幸的是 AWS 不会对完整的引导时间收费。

最近几天我注意到我的启动时间得到了改善。您会看到现货市场在 4 月和 5 月的第一周变得非常不稳定。通常情况下，我会完全使用 Spot 实例启动我的集群，因为可以选择失败，并且在我的案例中，成本节省证明了该技术的合理性。然而，等了 14 小时集群启动后，我不得不切换到 OnDemand，我只有这么多的耐心，一夜之间通常超过它。OnDemand 集群在大约 5 分钟后启动。现在已经切换回现场，因为疯狂似乎已经减弱，我又回到了 15 分钟的集群。

因此，如果您在核心或主节点上使用 Spot 实例，预计启动时间会更长。我将尝试在核心中使用一小部分 OnDemand，并增加大量的现货实例，看看它是否有助于启动并更好地应对现货市场的波动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-05T15:51:09.533

这很正常，您对此无能为力。我正在启动 100 多个节点集群，我发现它们需要 15 分钟以上才能开始处理。考虑到后台正在进行的大量工作，我很乐意让他们有 15 分钟左右的时间来配置集群并读取可能需要的任何数据。我害怕野兽的本性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-05T22:38:46.447

您的数据源托管在哪里？

如果在 S3 上（可能），如果您有许多小文件，则每个连接（每个文件）的延迟都会花费时间。

如果这是唯一的原因，那么您的 7 分钟启动时间将转换为从 S3 时间读取约 5 分钟 => S3 上约 1GB 输入文件

# ms-access - 在access 2007的子窗体中的命令按钮中动态激活“OnClick”功能

> ID：10712858
> 
> 赞同：0
> 
> 时间：2012-05-23T02:55:26.890
> 
> 标签：ms-access, vba, ms-access-2007

我创建了一个包含 3 个子表单的表单，以显示用户的详细信息和用户拥有的库存。该表单使用户能够更新显示的详细信息。因此，每个子表单都有一个“保存”和“撤消”按钮。我正在尝试在父表单上创建一个“全部清除”按钮，该按钮撤消所有 3 个子表单中的所有更改。

我真的不想重新输入 3 个“撤消”按钮中使用的相同代码，那么有没有办法利用 3 个按钮的 Onclick 功能？

我首先使用一个子表单尝试了以下操作：

```
Private Sub ClearAllParentForm_Click()
    Me.Subform1.Form.clearButton_Click
End Sub 
```

但是，表单会调用子表单的 beforeupdate 事件（提示用户保存更新记录的消息框）。我还尝试将代码更改为 Me.Subform1.Form.Undo ，这会产生相同的问题。有什么地方我做错了还是我的概念错了？

抱歉，最近才开始使用 Microsoft Access 2007，所以对一些东西很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T14:07:30.370

您需要三个与按钮的单击事件分开的子例程。让每个按钮调用它们各自的子例程或函数。然后一个按钮可以调用所有三个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T14:30:12.320

@JeffO 是对的，但我想我会在更多指导下扩展他所说的内容。

如果您在工作表模块中有以下内容：

```
Private Sub ClearButton_Click()
    'ClearButton code here.
End Sub 
```

您需要将 ClearButton 代码移动到通用模块中的 Sub 中。因此，在一个新模块中，您需要以下内容：

```
Sub clearbtn()
    'ClearButton code here.
End Sub 
```

现在，回到 Worksheet 模块，您可以在单击按钮时用一行调用此代码：

```
Private Sub ClearButton_Click()
    Call clearbtn
End Sub 
```

对事件触发器进行这些更改将允许您在代码的其他地方使用它们。这里隐含的教训是，您不能从 VBA 的其他地方调用事件触发器子程序，但可以从事件触发器内调用其他子程序。

# xcode - 存档的 NSData、isEqualToData: 和空字符串

> ID：10712859
> 
> 赞同：0
> 
> 时间：2012-05-23T02:55:51.523
> 
> 标签：xcode, cocoa, nsstring, nsdata, nstextfield

我有一个自定义对象，其中包含几个 NSString 对象、一些整数和一些布尔值。我正在使用 NSKeyedArchiver 将对象的副本存档到 NSData 对象中。

然后，用户对连接到 IB 接口的对象变量进行更改。

进行更改后，对象的新版本将归档到第二个 NSData 对象中。

这两个对象使用比较

```
[myNSData1 isEqualToData: myNSData2]; 
```

在大多数情况下，它工作得很好，但有一个非常令人不安的情况：

假设对象有一个变量初始化如下：

```
NSString *myString = @""; 
```

在对象被归档到 myNSData1 之后，我们调用了以下代码：

```
myString = [myNSTextField stringValue]; 
```

将 myString 记录到控制台显示 myString 的值仍然是

```
@"" 
```

因此没有改变价值。

我们现在将对象归档到 myNSData2 中。

然而，在执行上面的比较语句后，它现在返回 FALSE。*仅*当使用 stringValue 将 @"" 的原始分配替换为包含在文本字段中的 @"" 时，它才返回 FALSE 。

为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T03:30:37.500

看看这些字符串的类型（`NSLog([myString className])`应该可以），因为`NSString`它是一个[类簇](https://developer.apple.com/library/mac/#documentation/General/Conceptual/DevPedia-CocoaCore/ClassCluster.html)。我猜你会发现，其中一个字符串是 an `NSCFString`，另一个是`NSCFConstantString`. 归档器对类型信息进行编码，因此如果类型不同，则它们`NSData`也会不同。

我不会依赖于`NSData`相同的对象。如果你想比较这两者，你最好取消归档并使用`isEqual:`. 这样，您就可以完全控制。

# c# - SqlDataReader 的释放

> ID：10712860
> 
> 赞同：-2
> 
> 时间：2012-05-23T02:55:52.893
> 
> 标签：c#, asp.net, .net, sql-server-2005, sqldatareader

我有一个承包商，当我们执行 sql 查询时，他到处写这样的代码：

```
sql.Append(string.Format("SELECT TableId FROM ps_SavedTables WHERE guid = '{0}'", guid));

        using (IDataReader reader = SqlHelper.GetDataReader(sql.ToString())) {
            if (reader.Read()) {
                result = reader.IsDBNull(0) ? string.Empty : reader[0].ToString();
            }
            //CDW added to close SqlDataReader
            reader.Close();
        } 
```

GetDataReader 类位于 App_Code 帮助文件中，声明如下：

```
 public static SqlDataReader GetDataReader(string sql) {
        return GetDataReader(sql, DefaultConnectionString);
    }

    public static SqlDataReader GetDataReader(string sql, int connectionTime) {
        return GetDataReader(sql, DefaultConnectionString, connectionTime);
    }

    /// <summary>
    /// Executes DB command ExecutedReader and returns the DataReader
    /// </summary>
    /// <param name="sql">SQL statement(s) to be used with DB command</param>
    /// <param name="connectionString">Database connection string</param>
    /// <returns>DataReader containing results of supplied SQL statement(s)</returns>
    public static SqlDataReader GetDataReader(string sql, string connectionString) {
        lock (_lock) {
            SqlConnection connection = null;
            try {
                connection = GetConnection(connectionString);
                //connection.Open();
                using (SqlCommand cmd = new SqlCommand(sql, connection)) {
                    WriteDebugInfo("GetDataReader", sql);
                    return cmd.ExecuteReader(CommandBehavior.CloseConnection);
                }
            }
            catch (Exception e) {
                if (connection != null)
                    connection.Dispose();
                throw new DataException(sql, connectionString, e);
            }

        }
    } 
```

然后我在本地运行我的代码（它为统计执行了大量的 SQL）并在两个不同的浏览器中运行相同类型的东西，1 个浏览器总是在这里崩溃：

```
Server.ScriptTimeout = 300;
        string returnCode = string.Empty;
        using (SqlConnection connection = new SqlConnection(ConfigurationManager.ConnectionStrings["MainDll"].ToString())) {
            connection.Open();
            using (SqlCommand command = new SqlCommand(sql.ToString(), connection)) {
                command.CommandType = CommandType.Text;
                command.CommandTimeout = 300;
                returnCode = (string)command.ExecuteScalar();
                Dispose();
            }
            Dispose();
        } 
```

堆栈是这样的：

```
.NET Framework execution was aborted by escalation policy because of out of memory. 
System.InvalidOperationException: There is already an open DataReader associated with this Command which must be closed first.
System.InvalidOperationException: 
  at System.Data.SqlClient.SqlInternalConnectionSmi.ValidateConnectionForExecute(SqlCommand command)
  at System.Data.SqlClient.SqlConnection.ValidateConnectionForExecute(String method, SqlCommand command)
  at System.Data.SqlClient.SqlCommand.ValidateCommand(String method, Boolean async)
  at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)
  at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
  at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
  at System.Data.SqlClient.SqlCommand.ExecuteReader()
  at PowerStatRegression.share.JbLog.SendResultSet(String str, SqlConnection conn)
  at StoredProcedures.SavePowerStatErrors(ApplicationContext app, SqlString strUID, Int32 seqId, List`1 errors, Int32 errorType)
  at StoredProcedures.CreatePowerStatCorr(SqlString strUID, Int32 seqId, Int32 flagProgress)
  at StoredProcedures.SpCreatePowerStatCorr(SqlString strUID, Int32 seqId, Int32 flagProgress)

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Data.SqlClient.SqlException: .NET Framework execution was aborted by escalation policy because of out of memory. 
System.InvalidOperationException: There is already an open DataReader associated with this Command which must be closed first.
System.InvalidOperationException: 
  at System.Data.SqlClient.SqlInternalConnectionSmi.ValidateConnectionForExecute(SqlCommand command)
  at System.Data.SqlClient.SqlConnection.ValidateConnectionForExecute(String method, SqlCommand command)
  at System.Data.SqlClient.SqlCommand.ValidateCommand(String method, Boolean async)
  at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)
  at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
  at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
  at System.Data.SqlClient.SqlCommand.ExecuteReader()
  at PowerStatRegression.share.JbLog.SendResultSet(String str, SqlConnection conn)
  at StoredProcedures.SavePowerStatErrors(ApplicationContext app, SqlString strUID, Int32 seqId, List`1 errors, Int32 errorType)
  at StoredProcedures.CreatePowerStatCorr(SqlString strUID, Int32 seqId, Int32 flagProgress)
  at StoredProcedures.SpCreatePowerStatCorr(SqlString strUID, Int32 seqId, Int32 flagProgress)

Source Error: 

Line 705:                    command.CommandType = CommandType.Text;
Line 706:                    command.CommandTimeout = 300;
Line 707:                    returnCode = (string)command.ExecuteScalar();
Line 708:                    //Dispose();
Line 709:                }

Source File: c:\PowerStats\datalab\powerstats\output.aspx.cs    Line: 707 

Stack Trace: 

    [SqlException (0x80131904): .NET Framework execution was aborted by escalation policy because of out of memory. 
System.InvalidOperationException: There is already an open DataReader associated with this Command which must be closed first.
System.InvalidOperationException: 
   at System.Data.SqlClient.SqlInternalConnectionSmi.ValidateConnectionForExecute(SqlCommand command)
   at System.Data.SqlClient.SqlConnection.ValidateConnectionForExecute(String method, SqlCommand command)
   at System.Data.SqlClient.SqlCommand.ValidateCommand(String method, Boolean async)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result)
   at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
   at System.Data.SqlClient.SqlCommand.ExecuteReader()
   at PowerStatRegression.share.JbLog.SendResultSet(String str, SqlConnection conn)
   at StoredProcedures.SavePowerStatErrors(ApplicationContext app, SqlString strUID, Int32 seqId, List`1 errors, Int32 errorType)
   at StoredProcedures.CreatePowerStatCorr(SqlString strUID, Int32 seqId, Int32 flagProgress)
   at StoredProcedures.SpCreatePowerStatCorr(SqlString strUID, Int32 seqId, Int32 flagProgress)
]
   System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection) +1950522
   System.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection) +4856715
   System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj) +194
   System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) +1121
   System.Data.SqlClient.SqlDataReader.ConsumeMetaData() +33
   System.Data.SqlClient.SqlDataReader.get_MetaData() +83
   System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString) +293
   System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async) +954
   System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result) +162
   System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method) +32
   System.Data.SqlClient.SqlCommand.ExecuteScalar() +139
   Output.RunTable(String outputType, String _outputDataType) in c:\PowerStats\datalab\powerstats\output.aspx.cs:707
   Output.ProcessPage() in c:\PowerStats\datalab\powerstats\output.aspx.cs:652
   Output.Page_Load(Object sender, EventArgs e) in c:\PowerStats\datalab\powerstats\output.aspx.cs:644
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +14
   System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) +35
   System.Web.UI.Control.OnLoad(EventArgs e) +99
   System.Web.UI.Control.LoadRecursive() +50
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +627

--------------------------------------------------------------------------------
Version Information: Microsoft .NET Framework Version:2.0.50727.5456; ASP.NET Version:2.0.50727.5456 
```

为什么 SqlDataReader 没有被正确释放？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T03:15:01.687

“锁定”语句是否意味着您正在多个线程中使用这些东西？
甚至不要尝试在线程之间共享 ADO .NET 对象——它们不是线程安全的……似乎不止一个线程同时创建读取器实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:24:52.263

I think the lock is at the wrong level... The lock needs to be at the reader level. The open reader is being used after the lock is released.

# git - 如何通过 plink 获得对 github 的读写访问权限？

> ID：10712861
> 
> 赞同：1
> 
> 时间：2012-05-23T02:55:58.650
> 
> 标签：git, ssh, github, putty, plink

SSH 访问`github`在中国已被阻止，我按照[本教程](https://gist.github.com/423642)设置了一个 ssh 隧道：

```
$ plink -N myuser@myhomessh.com -pw mypassword -L 9418:github.com:9418
$ git clone git://localhost/someuser/someproject.git 
```

我无法`github`通过`Git Read-Only`url 推送代码。
所以我试试这个：

```
$ git clone git@localhost:someuser/someproject.git
Cloning into 'someproject'...
git@localhost's password: 
```

这里不对劲。我已经添加`~/.ssh/id_rsa.pub`到`github`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T10:41:13.980

使用您的 SSH 隧道，您正在创建一个到端口 9418 的隧道。运行简单的 git 服务器，它只允许未经身份验证的只读访问。你不能推到那里。请注意，在您的第一个示例中，您使用了`git://`协议，这表明它连接到端口 9418 并使用该协议。

在您的第二个示例中，您尝试通过 SSH 使用 git，这会在端口 22 上创建连接。您可以使用类似这样的东西来创建 SSH 隧道（假设您已经有一个本地运行的 SSH 服务器已经在本地侦听端口 22 )

```
plink -N myuser@myhomessh.com -pw mypassword -L 2222:github.com:22
git clone ssh://git@localhost:2222/someuser/someproject.git 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:10:53.183

好吧，该`git clone git@localhost:someuser/someproject.git`命令尝试`localhost`使用 SSH（在端口 22 上）连接到您。我不知道为什么它要求提供凭据（好像有什么东西在这个端口上监听）。

在我看来，克服这种脑死限制的唯一明智方法是在某个 IP 子网中设置一个[SSH 跳转](http://www.google.com/search?q=ssh+jumphost)主机，该子网没有阻止访问（即中国境外）。

也可能有其他（姑息性）解决方案：

*   如果您需要托管自己的代码，请不要使用 github，因为其他 Git 托管服务提供商可能无法访问它们。
*   如果您需要推送到您不拥有的项目，您可能会采用次优的代码贡献方式：将补丁系列或`git bundle`“d 变更集”邮寄给维护者或愿意赞助您的代码的其他人。

**更新：**好吧，我重新阅读了您的答案，看来您确实在 localhost 上运行了某种 SSH 服务器。*因此，澄清一下：在与github 的 SSH 服务器*而不是本地 SSH 服务器通信时，您的客户端使用在 github 进行身份验证的 SSH 密钥。我的意思是，要使用协议从 github 克隆 repo，`git://`您​​根本不需要设置任何类型的隧道。而要通过 SSH 访问 github，您总是必须通过 SSH 连接*到 github*，而 SSH 会被阻止。如果 github 有另一个端口（不是 22）来接受 SSH 连接，那就太好了。但我不知道他们是否有类似的东西可用。

# android - 我可以像wireshark一样收听Android中的HTTP内容吗

> ID：10712869
> 
> 赞同：1
> 
> 时间：2012-05-23T02:57:43.700
> 
> 标签：android, http, wireshark

我的工作要求是在 Android 上收听 http 堆栈中的内容，就像 wireshark 一样。所以我搜索了关于这个的相关内容，但是什么都没有，所以真的可以听内容，如果可以，如何？谢谢

# mysql - 清理 MySQL 表的表单数据

> ID：10712876
> 
> 赞同：1
> 
> 时间：2012-05-23T02:59:56.713
> 
> 标签：mysql, forms

如果我正在清理从表单进入 mysql 表的代码，这会起到作用吗？应该/将要输入的数据将是学校科目和教授的名字/姓氏......关于如何做到这一点的任何其他建议？

```
/*
Sanitize() function removes any potential threat from the
data submitted. Prevents email injections or any other hacker attempts.
if $remove_nl is true, newline chracters are removed from the input.
*/
function Sanitize($str,$remove_nl=true)
{
    $str = $this->StripSlashes($str);

    if($remove_nl)
    {
        $injections = array('/(\n+)/i',
            '/(\r+)/i',
            '/(\t+)/i',
            '/(%0A+)/i',
            '/(%0D+)/i',
            '/(%08+)/i',
            '/(%09+)/i'
            );
        $str = preg_replace($injections,'',$str);
    }

    return $str;
}    
function StripSlashes($str)
{
    if(get_magic_quotes_gpc())
    {
        $str = stripslashes($str);
    }
    return $str;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T02:57:25.190

感谢大家花时间提供帮助。我使用了 preg_replace 函数，该函数将字符限制为我希望人们使用的字符：`preg_replace("~" . "[^a-zA-Z0-9\-\_\.\ ]" . "~iU", "", $string)`. 我也使用过`mysql_real_escape_string`，所以我在发送到数据库之前做了两个级别的过滤。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T03:13:19.337

我推荐 PHP 的[PDO 类](http://php.net/manual/en/book.pdo.php)。你会做这样的事情：

```
try
{
  $sql ='INSERT INTO whatever(a,b,c) VALUES(:a,:b:c);
  //or if you prefer...
  $sql ='INSERT INTO whatever(a,b,c) VALUES(?,?,?);
  $stmt = db::db()->prepare($sql);
  $stmt->execute(array(123,234,345));
}
catch(PDOException $e){library::sql_error($e,$sql);} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T04:14:24.497

尝试这个 ：

```
 function sanatize($value) {

            $value = preg_replace("~" . "[^a-zA-Z0-9\-\_\.]" . "~iU", "", $value);
            return $value;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-23T03:00:55.170

为什么不使用[`mysql_real_escape_string()`](http://us3.php.net/manual/en/function.mysql-real-escape-string.php)which 转义所有可能导致问题的潜在字符？除了内置之外，它还调用 MySQL 自己的`mysql_real_escape_string`，因此您知道您将始终了解您安装的数据库需要转义的内容。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-23T03:17:20.200

最好的选择是使用 PDO 的 bindValue 方法：

[http://www.php.net/manual/en/pdostatement.bindvalue.php](http://www.php.net/manual/en/pdostatement.bindvalue.php)

这解决了你所有的逃避。

对于表单，您还可以查看以下内容：

[http://semlabs.co.uk/docs/xfl/xfl-elements/sanitise](http://semlabs.co.uk/docs/xfl/xfl-elements/sanitise)

它是一组 PHP 类，可以更轻松地处理表单，尽管需要一段时间才能让你头脑清醒。

# ruby-on-rails - 如何遍历 has_many 集合并使用另一个模型设置 HABTM

> ID：10712878
> 
> 赞同：1
> 
> 时间：2012-05-23T03:00:27.763
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jointable

我有很多 LineItems 的订单。LineItems has_many 潜在客户。在用户购买线索之前，线索不会与用户关联。该关联是通过 HABTM 关系和连接表 LeadsUsers 建立的。

用户购买潜在客户后，我需要设置关联。我有一个具有正确 HABTM 代码设置的 LeadsUsers 模型。在我的订单模型中，我有以下内容：

```
has_many :line_items
after_save :assign_lead_to_user

def assign_lead_to_user
   self.line_items.each do 
     leads_users = LeadsUsers.create :user_id => :user_id, :lead_id => line_item.lead.id
     leads_users.save
   end   
  end 
```

此方法失败：未定义的局部变量或方法“line_item”。我知道这意味着它不知道我指的是什么 line_item ......有什么想法吗？最终我希望能够引用 User.leads.all。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T14:56:38.847

看了一眼，需要提供一个块变量：

```
self.line_items.each do |line_item| 
```

# jquery - 如果视频正在播放，按钮点击视频没有任何反应

> ID：10712880
> 
> 赞同：0
> 
> 时间：2012-05-23T03:00:40.007
> 
> 标签：jquery, html, binding, callback, html5-video

我怎样才能做到这一点，如果我有一个与视频分开的按钮，并且您单击它，如果视频没有播放，它会正常播放，但如果是，那么它什么也不会发生？

我猜它会像

```
$('theButtonToClick').bind('click', function() {
//stuff happens to play it
myVideo.bind("playing", function() {
    $('theButtonToClick').bind('click', return, false);
});
}); 
```

我实际上将视频设置为 myVideo，所以当你调用它时它知道你的意思，并且[这里](http://dev.w3.org/html5/spec/single-page.html#mediaevents)的回调适用于`bind`事件......

我有什么遗漏吗？

编辑：哦，天哪，我忘了，该按钮是列表中一组按钮的一部分......

**编辑**对不起，我觉得这不是很清楚。我想在播放相应视频时禁用列表元素中的按钮...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T07:00:02.500

你可以这样做：

```
play.addEventListener('click',playControl,false);
function playControl() {
  if (video.paused == false) {
    video.pause();
  } else {
    video.play();
  }
} 
```

# php - 如何检测浏览器？

> ID：10712883
> 
> 赞同：-5
> 
> 时间：2012-05-23T03:01:02.193
> 
> 标签：php, javascript

> **可能重复：**
> [如何使用 PHP 或 JavaScript 检测浏览器？](https://stackoverflow.com/questions/1895727/how-can-i-detect-the-browser-with-php-or-javascript)

我需要在不同的浏览器（Internet Explorer、Firefox、Chrome、Safari 和 Opera）中显示不同的信息。所以我需要一种方法来检测用户的浏览器。就我而言，最好的方法是什么？

我可以使用 PHP 或 Javascript，但我想避免使用像 jQuery 这样的外部库。

谢谢 ：）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-23T03:03:58.697

*浏览器检测*是一种非常不可靠的做法，应该避免。话虽如此，您通常是通过在 JavaScript 中*嗅探* `navigator.userAgent`或检查 userAgent （或[`get_browser()`](http://php.net/manual/en/function.get-browser.php)）来开始的，因为它遇到了对您服务器的请求。

但是，不要这样做 - 请（对于小马）。请改用特征检测。[Modernizr](http://modernizr.com)之类的工具使您可以非常轻松地仅在受支持时才提供内容，并围绕浏览器之间的差异进行编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T03:26:23.133

您可以使用以下内容：

*php*

```
$agent = $_SERVER["HTTP_USER_AGENT"];
if (preg_match("/MSIE/i",$agent)) { echo "its ie!"; } 
```

*javascript*

```
navigator.appName
navigator.appVersion 
```

你可以结合/交叉检查并开始用你找到的所有东西制作一个大的 if/else 块。

也在[这里](http://php.net/manual/en/function.get-browser.php)检查， 但我同意，这不是 100% 可靠的

# python - 使用 csv.writer 避免在字符串数据行周围加上引号

> ID：10712886
> 
> 赞同：0
> 
> 时间：2012-05-23T03:01:09.553
> 
> 标签：python, string, csv

我正在尝试使用 csv.writer 将一行字符串（它是标题行）写入 csv 文件，如下所示：

```
mbfile=open(pathtodata + "mbsensors.csv", "ab")
writer=csv.writer(mbfile)

writer.writerow(["ESReadings"])

i=1
tempstring='DateTime'

while i<=numsensors:
    tempstring=tempstring+','+ "%02d"%i +'.Cooked'
    i=i+1

print tempstring
writer.writerow([tempstring])
mbfile.close 
```

（我不知道为什么第一行缩进了 - 在我的代码中不是这样）。

在 Linux 中使用 Python 2.7.3。

writer.writerow(["ESReadings"]) 写得很好，没有双引号。

print tempstring 按预期显示在屏幕上。

writer.writerow([tempstring]) 写得很好，除了它周围有双引号。

我正在将此数据导入 Windows 程序，但它不喜欢引号，我该如何避免它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T03:37:19.203

csv 编写器认为您正在尝试编写单个条目，这就是它在整个字符串周围加上引号的原因。您应该将该行作为字符串列表（或其他一些可迭代的）传递，并让作者插入逗号。像这样的东西：

```
tempstring=['DateTime']
while i<=numsensors:
 tempstring.append("%02d"%i +'.Cooked')
 i=i+1
 print tempstring
 writer.writerow(tempstring) 
```

# ajax - jQuery mobile + spring 控制器动态列表视图

> ID：10712889
> 
> 赞同：0
> 
> 时间：2012-05-23T03:01:53.733
> 
> 标签：ajax, spring-mvc, jquery-mobile

我正在使用 jquery listview 来显示课程名称列表。数据需要从控制器中获取。当我运行它时，页面中没有任何显示。

这是我的html

```
 <div id="courseName">
    <ul data-role="listview" data-inset="true" >
    </ul>
  </div> 
```

这是我的脚本

```
$('#registeredClasses').live('pageshow', function(){
    $.ajax({
     url: '${pageContext.request.contextPath}/getRegisteredClassesData.html',
     dataType: 'json',

        success: function(json_results){
        listItems = $('#courseName').find('ul');
        $.each(json_results.rows, function(key) {
           html = '<li <h3><a href="index1.html?id=' + [json_results.rows[key].courseId] +'"rel="external">'+json_results.rows[key].courseName+'</h3>';
          html += '<p><br> Course name: '+json_results.rows[key].courseName+'</p></a></li>';

        listItems.append(html);
        });
          $('#courseName ul').listview('refresh');
 $.mobile.pageLoading(true);     
    }
});
}); 
```

这就是它从控制器调用的地方

```
@RequestMapping(value = "getRegisteredClassesData.html", method = RequestMethod.POST)
public @ResponseBody CustomPagedResultResponse getRegisteredClassesData(
        HttpServletRequest request,HttpSession session) {
    CustomPagedResultResponse paging = new CustomPagedResultResponse();

    log.debug("getRegisteredClassesData.html:");  
    log.debug("rows:"+request.getParameter("rows"));
    log.debug("courseId:"+session.getAttribute("courseId")); 
    log.debug("page:"+request.getParameter("page"));
    log.debug("sidx:"+request.getParameter("sidx"));
    log.debug("sord:"+request.getParameter("sord"));
    //String loginId = (request.getSession().getAttribute("loginId")).toString();
    //String page =(request.getSession().getAttribute("page")).toString(); 
    //String row = (request.getSession().getAttribute("row")).toString();

    String page = request.getParameter("page");
    int pageSize = new Integer(request.getParameter("rows")).intValue();
    StringBuffer condition = new StringBuffer();
    if (request.getParameter("sidx") != null && !request.getParameter("sidx").equals("")) {
        condition.append(request.getParameter("sidx"));
        condition.append(" ");
    }
    if (request.getParameter("sord") != null && !request.getParameter("sord").equals("")) {
        condition.append(request.getParameter("sord"));
    }
    log.debug("condition: " + condition.toString());
    log.debug("page:"+page);
    log.debug("row:"+pageSize);

    String courseType = "%";

    UserProfile userProfile = (UserProfile)session.getAttribute("userProfile");

    //////////////////////////////////////////////////////
    // Retrieve  Total Record first
    ///////////////////////////////////////////////////////
    RegisteredClassesSearch search = new RegisteredClassesSearch();
    search.setLanguage("ENU");
    search.setLoginRowId(userProfile.getContactRowId());
    search.setRegNo(null);
    search.setAction("1");
    search.setCourseType(courseType);
    search.setPage(null);
    search.setPageSize(null);
    search.setOrderBy(null);

    Integer recordCount = registeredClassesService.getTotalAccounts(search);
    log.debug("*****Training Controller Total record:"+recordCount);
    System.out.println("*****Training Controller Total record:"+recordCount);

    //////////////////////////////////////////////////////
    // Retrieve  Total Record first
    ///////////////////////////////////////////////////////
    if(recordCount>0){

        System.out.println("******** Login Id:"+userProfile.getContactRowId());
        System.out.println("******** Course Type:"+courseType);
        System.out.println("******** Page Size:"+pageSize);
        System.out.println("******** Page:"+page);
        System.out.println("******** Order By:"+condition);

        List<RegisteredClassesTest> registeredClassesView = registeredClassesService.getAccounts(search);

        paging.setRows(registeredClassesView);
    }else{
        paging.setRows(null);
    }

    paging.setRecords(String.valueOf(recordCount));
    paging.setPage(page);
    int total = recordCount % pageSize == 0 ? recordCount / pageSize : recordCount / pageSize + 1;
    paging.setTotal(String.valueOf(total));

    return paging;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T03:11:56.463

```
 try this one, 
```

你应该关闭`<li>`标签，你确定数据来自服务器吗？

```
html = '<li > <h3><a href="index1.html?id=' + [json_results.rows[key].courseId] +'"rel="external">'+json_results.rows[key].courseName+'</h3>';
      html += '<p><br> Course name: '+json_results.rows[key].courseName+'</p></a></li>';

    listItems.append($(html)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T07:42:22.517

使用 json_results.d 而不是 json_results.row。

```
 $.each(json_results.d, function(index, item) { 

html = '<li > <h3><a href="index1.html?id=' + item.courseId+'"rel="external">'+ item.courseName+'</h3>';
  html += '<p><br> Course name: '+item.courseName+'</p></a></li>'; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T01:29:24.703

谢谢，我已经成功了..这是我的脚本。对于数据，我先对其进行硬编码..

```
$('#registeredClasses').live('pageshow', function(){
    var rowInput = "1";
    var pageInput = "1";

    $.ajax({
     url: '${pageContext.request.contextPath}/getRegisteredClassesDetails.html',
     data: ( {rows : rowInput , page : pageInput}),
     type: 'POST',

    success: function(json_results){
        $('#list').append('<ul data-role="listview" data-inset="true"</ul>');
        listItems = $('#list').find('ul');
        $.each(json_results.rows, function(key) {
          html = '<li <h3><a href="${pageContext.request.contextPath}/getRegisteredClassesDetails.html?id=' + [json_results.rows[key].courseId] 
                +'"rel="external">'+json_results.rows[key].courseName+'</h3>';
        listItems.append(html);
        });

    $('#list ul').listview();
    $.mobile.pageLoading(true);      
    }
});
}); 
```

# java - 带有标题的 Android 多行 ListView

> ID：10712891
> 
> 赞同：2
> 
> 时间：2012-05-23T03:01:58.790
> 
> 标签：java, android, android-listview

我需要`ListView`在 Android 中创建一个具有标题并且是多行的。我用它来显示作业标题和它下面的截止日期。作业在两个标题下排序：“即将到来的作业”和“过去的作业”（当然，基于日期）。

我的标题工作正常，作业标题显示正确，但我不知道如何将第二行合并到列表中。

这是我的代码：

ListCourseAssignments.java

```
@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    final SeparatedListAdapter adapter;
    setContentView(R.layout.courseassignmentslistview);
    adapter = new SeparatedListAdapter(getContext());
    ArrayAdapter<String> upcomingList = new ArrayAdapter<String>(getContext(), R.layout.list_item, Homework.getUpcomingDates()); // Homework.getUpcomingDates() Returns string array
    ArrayAdapter<String> pastList = new ArrayAdapter<String>(getContext(), R.layout.list_item, Homework.getPastDates()); // Homework.getPastDates() Returns string array

    adapter.addSection("Upcoming Assignments", upcomingList); 
    adapter.addSection("Past Assignments", pastList);

    ListView lv = (ListView) findViewById(android.R.id.list);
    lv.setAdapter(adapter);

    lv.setOnItemClickListener(new OnItemClickListener(){
        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position, long duration){
            String item = (String) adapter.getItem(position);
            Toast.makeText(getApplicationContext(), item, Toast.LENGTH_SHORT).show();
        }
    });
} 
```

分离列表适配器.java

```
public class SeparatedListAdapter extends BaseAdapter {
public final Map<String, Adapter> sections = new LinkedHashMap<String, Adapter>();
public final ArrayAdapter<String> headers;

public SeparatedListAdapter(Context context) {
    headers = new ArrayAdapter<String>(context, R.layout.courseassignmentslistview_header);
}

public void addSection(String section, Adapter adapter) {
    this.headers.add(section);
    this.sections.put(section, adapter);
}

public Object getItem(int position) {
    for (Object section : this.sections.keySet()) {
        Adapter adapter = sections.get(section);
        int size = adapter.getCount() + 1;

        if (position == 0) return section;
        if (position < size) return adapter.getItem(position - 1);

        position -= size;
    }
    return null;
}

public int getCount() {
    int total = 0;
    for (Adapter adapter : this.sections.values()) total += adapter.getCount() + 1;
    return total;
}

@Override
public int getViewTypeCount() {
    int total = 1;
    for (Adapter adapter : this.sections.values()) total += adapter.getViewTypeCount();
    return total;
}

@Override
public int getItemViewType(int position) {
    int type = 1;
    for (Object section : this.sections.keySet()) {
        Adapter adapter = sections.get(section);
        int size = adapter.getCount() + 1;

        if (position == 0) return 0;
        if (position < size) return type + adapter.getItemViewType(position - 1);

        position -= size;
        type += adapter.getViewTypeCount();
    }
    return -1;
}

public boolean areAllItemsSelectable() {
    return false;
}

@Override
public boolean isEnabled(int position) {
    return (getItemViewType(position) != 0);
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    int sectionnum = 0;
    for (Object section : this.sections.keySet()) {
        Adapter adapter = sections.get(section);
        int size = adapter.getCount() + 1;

        if (position == 0) return headers.getView(sectionnum, convertView, parent);
        if (position < size) return adapter.getView(position - 1, convertView, parent);

        position -= size;
        sectionnum++;
    }
    return null;
}

@Override
public long getItemId(int position) {
    return position;
}
} 
```

courseassignmentslistview_header.xml

```
<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/list_header_title"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:paddingTop="2dip"
    android:paddingBottom="2dip"
    android:paddingLeft="5dip"
    style="?android:attr/listSeparatorTextViewStyle" /> 
```

courseassignmentslistview.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <ListView
        android:id="@+android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />
</LinearLayout> 
```

列表项.xml

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:padding="10dp"
    android:textSize="16sp" >
</TextView> 
```

[这是它当前外观的屏幕截图。](http://postimage.org/image/3qb6384yl/)

编辑：我知道如何使用多行创建一个列表，但我只是不知道如何将它与带有标题的列表（例如这个）放在一起......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T04:25:54.867

我不知道如何用你目前拥有的东西来做，但你可以用 CommonWare 的 MergeAdapter 来做。

引用自述文件：

```
MergeAdapter accepts a mix of Adapters and Views and presents them as one contiguous 
whole to whatever ListView it is poured into. This is good for cases where you have
multiple data sources, or if you have a handful of ordinary Views to mix in with lists 
of data, or the like. 
```

你可以在[这里](https://github.com/commonsguy/cwac-merge)得到它。

[我在这里](https://stackoverflow.com/questions/10535097/android-multiple-list-views-that-dont-scroll-independently/10535980#10535980)写了一个使用它的简要概述

使用 MergeAdapter，您可以通过为它们提供视图来使用它来制作节标题，然后设置适配器以创建所需的两行格式。

# java - 静态字段的范围是什么？

> ID：10712897
> 
> 赞同：4
> 
> 时间：2012-05-23T03:03:45.263
> 
> 标签：java, apache-servicemix

我在静态领域遇到问题。我认为根本原因必须是静态字段的范围。

该项目基于 Apache servicemix，由多个子项目组成。

在子项目'A'中，我在'Registration'类中定义了一个静态列表字段'reg'和一些静态方法来操作'add'和'getAll'等字段。部署子项目 A 后，项目“A”的名称将添加到静态列表中以进行注册。

问题是当涉及到子项目“B”时，当部署子项目“B”时，我希望将其名称添加到完全相同的静态列表中以进行注册。但是当我调用静态方法getAll或添加'Registration'时，似乎子projectB中的'reg'与子projectA中的'reg'完全不同。所以注册功能不起作用。

所以我想问一个基本问题，静态字段的范围是什么？它在JVM或其他一些东西中有效吗？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-23T03:18:40.687

静态的范围是全局的 - 在其拥有的类加载器内。JVM 可以创建多个类加载器并在每个新的类加载器中加载您的类的单独实例。

静态不是每个 JVM 的全局变量，它们是每个类加载器的全局变量。如果具有静态字段的类在不同的类加载器中加载，则其静态成员在不同的类加载器中将不可见。

项目A和项目B是如何部署的？他们在同一个类加载器中吗？

我不熟悉 servicemix，但我想它在单独的类加载器中部署单独的应用程序，就像 Java EE 应用程序将在不同的类加载器中部署同一应用程序的不同版本一样，因此您可以同时运行应用程序 1.0 和应用程序 1.1-侧，它们不会相互影响。

这是设计使然。

如果是这种情况，您需要一些独立的东西来维护共享状态。（例如数据库）

# c# - 如何在字符串中找到所有可能的子字符串？

> ID：10712903
> 
> 赞同：11
> 
> 时间：2012-05-23T03:04:11.533
> 
> 标签：c#, .net, string, linq

我想做的是获取一个字符串并返回所有可能大于长度 2 的子字符串。所以使用`welcome`示例：

```
we
el
lc
co
me
wel
elc
lco
com
ome
welc
elco
lcom
come
and so on..... 
```

我能想到的唯一方法是这样的（完全未经测试）：

```
for (int i = 0; i < word.Length; i++) //i is starting position
{
   for (int j = 2; j + i < word.Length; j++) //j is number of characters to get
   {
       wordList.Add(word.SubString(i, j));
   }
} 
```

但我想知道是否有更好的方法来做到这一点（可能使用 LINQ）我不知道？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-23T04:22:48.643

这是一个简单易读的方法吗？

```
var text = "welcome";

var query =
    from i in Enumerable.Range(0, text.Length)
    from j in Enumerable.Range(0, text.Length - i + 1)
    where j >= 2
    select text.Substring(i, j); 
```

它产生：

```
we 
wel 
welc 
welco 
welcom 
welcome 
el 
elc 
elco 
elcom 
elcome 
lc 
lco 
lcom 
lcome 
co 
com 
come 
om 
ome 
me 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T03:20:02.897

这个 LINQ 解决方案应该可以工作：

```
var str = "welcome";
var items = Enumerable
    .Range(0, str.Length)
    .SelectMany(i => Enumerable.Range(2, str.Length-i-1).Select(j => str.Substring(i, j)))
    .Distinct()
    .OrderBy(s => s.Length);
foreach (var s in items) {
    Console.WriteLine(s);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-04-30T20:13:38.400

代码如下：

```
 internal static List<string> GetAllSubstring(String mainString)
    {
        try
        {
            var stringList = new List<string>();
            if(!string.IsNullOrEmpty(mainString))
            {
                for (int i = 0; i < mainString.Length; i++) //i is starting position
                {
                    for (int j = 2; j + i < mainString.Length; j++) //j is number of characters to get
                    {
                        if(!stringList.Contains(mainString.Substring(i, j)))
                        {
                            stringList.Add(mainString.Substring(i, j));
                        }
                    }
                }

            }

            return stringList;
        }
        catch(Exception ex)
        {

        }

        return null;
    } 
```

# javascript - window.close() 在 iOS 上不起作用

> ID：10712906
> 
> 赞同：16
> 
> 时间：2012-05-23T03:05:00.770
> 
> 标签：javascript, ios, iphone, ipad, chrome-ios

我用 window.open() 打开一个新窗口，将用户重定向到 oauth 登录页面。但是，在成功登录后，当用户被重定向回我的应用程序时，带有 window.open 调用的前一个窗口不会在 ios 中自行关闭。

在 iPad 上它会关闭错误的窗口，而在 iPhone 上它根本不会关闭窗口。该代码在 Android 和桌面版本的 Chrome 和 Firefox 上运行良好。

经过大量的扎根，我找到了一个解决方法（发布在下面）。如果有人有更好的想法或根本原因，请在此处发布。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-23T03:07:18.663

经过一番搜索，我发现这条推文发布了一个解决方法 - [https://twitter.com/#!/gryzzly/statuses/177061204114685952](https://twitter.com/#!/gryzzly/statuses/177061204114685952) by @gryzzly

全文复制到这里

> 在 window.open() 或 target="_blank" 之后，window.close() 在 iOS 上不起作用？做 setTimeout(window.close, timeout); 其中超时> 300。

这与`.focus()`在关闭新窗口之前删除我专注于父窗口的 a 一起完全解决了我的问题。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-26T02:41:06.413

这就是我最终开始工作的内容......
永远无法让 window.close 函数工作；即使在如上图的 setTimeout 中

我在以下设备上进行了测试：
    Windows XP：Chrome20、Firefox12、IE8
    Android 姜饼：Android 浏览器
    Android Ice Cream：Android 浏览器、Firefox
    Ipad：默认浏览器（我假设它是 safari）
    Iphone 3gs 和 4s：默认

* * *

```
<SCRIPT LANGUAGE=\"JavaScript\">
    function refresh() {
        var sURL = unescape("http://(some web page)/");
        window.location.replace(sURL);
    }
    function closeWindow() {
        var isiPad = navigator.userAgent.match(/iPad/i) != null;
        var isiPhone = navigator.userAgent.match(/iPhone/i) != null;
        if (isiPad || isiPhone) {
           setTimeout( \"refresh()\", 300 );
        } else {
           window.close();
        }
    }
</SCRIPT> 
```

*......和html代码......*

```
<p><input class="bigbutton" type="button" name="cancel" id="cancel" value="Cancel" onClick="closeWindow()"></p> 
```

* * *

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-04-16T12:36:16.397

ios 12、13 正常

```
<p>If the page stops. Please press the button below to continue.</p>
<input id="button" name="button" type="submit" value="Close">

<script>
  var ua = window.navigator.userAgent;

  if (ua.indexOf('iPhone ') > 0) {  
    document.querySelector('#button').addEventListener('click', function (event) {
      event.preventDefault();
      window.close();
    }, false);

    document.querySelector('#button').click();
  } else {
    window.close();
  }
</script> 
```

# css - 现实世界中的 LESS CSS，具有跨上下文和依赖管理用例

> ID：10712907
> 
> 赞同：0
> 
> 时间：2012-05-23T03:05:14.920
> 
> 标签：css, less

我为我的 Java EE 项目开发了 LESS，几乎一切都很好，但是我面临着跨上下文问题。

我在 core.war 中定义了一些 LESS 文件作为在其他 webapps 中重用的库，例如我`@width: 500px;`在这个库中声明的。然后，这些变量将被另一个应用程序（例如 myapp.war）使用。

例如，通过导入带有路径的库，我只有一个解决方案

```
@import "../../../core/resources/less/core.less"; 
```

但是，我认为这不是一个好方法。您是否遇到过这个问题，您是如何解决的？

# javascript - 页眉或页脚中的谷歌分析？

> ID：10712908
> 
> 赞同：53
> 
> 时间：2012-05-23T03:05:24.747
> 
> 标签：javascript, html, google-analytics, webpage

我的问题是，您是否将 Google Analytics Javascript 代码放在页眉或页面的最底部（之前`</body>`）。我听说人们说最好将 Google Analytics Javascript 代码放在 html 的最后。其他人说最好放在标题中。有最佳实践吗？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-05-23T03:06:13.203

把它放在你的标题中。它是异步的，因此它不会阻止您的页面加载，并且通过将其放置在您的标题中，您将更有可能获得准确的统计信息。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-05-23T03:14:05.530

这就是谷歌[所说](http://support.google.com/googleanalytics/bin/answer.py?hl=en&answer=174090)的：

> 找到代码片段后，将其复制并粘贴到您的网页中，就在结束`</head>`标记之前`*`。如果您的网站使用模板生成页面，请在包含该部分的文件中的结束标记之前输入模板。为了在所有浏览器中获得最佳性能，我们建议您通过以下方式之一在您的站点中放置其他脚本：
> 
> 1.  `<head>`在HTML 部分中的跟踪代码段之前
> 2.  在跟踪代码段和所有页面内容之后（例如在 HTML 正文的底部）

这里是*：

> *异步代码片段的主要优点之一是您可以将其放置在 HTML 文档的顶部。这增加了在用户离开页面之前发送跟踪信标的可能性。习惯上将 JavaScript 代码放在该部分中，我们建议将代码段放在该部分的底部以获得最佳性能。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-05-23T03:13:06.397

区别很简单，答案取决于您的需求 假设有人错误地点击了您的网站并很快关闭它。

如果脚本在顶部，则您有访客，如果脚本在底部，则您没有访客。

我在底部使用它，因为对我来说，如果有人不看我的网站，就不是访问者。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-06-20T16:28:13.863

根据谷歌分析

> 在哪里放置跟踪代码

跟踪代码旨在在页面内容加载完成后从您的页面读取数据。出于这个原因，该片段应该位于您网页的结束标记之前。加载页面内容后，跟踪代码在执行时会按照文档对象模型 (DOM) 读取页面内容。所有与跟踪相关的信息随后用于建立页面信息、设置/更新 cookie 并将 GIF 请求发送到 Google Analytics 服务器。

通过将脚本放在页面正文的末尾，您可以确保跟踪代码作为 DOM 的最后一个元素执行。如果给定的页面加载由于某种原因被中断，则该页面视图的 GIF 请求可能不会被执行。但是，如果您将跟踪代码放在页面顶部，则任何加载中断都可能导致报告不完整或不准确，因为跟踪代码依赖于其报告的页面数据。

此外，页面底部的跟踪代码调用的物理位置比使用 onLoad() 函数调用跟踪代码更有效。如果您使用 onLoad() 执行跟踪代码，则执行依赖于浏览器的事件模型而不是 DOM。在这种情况下，如果远程图像无法加载到页面上，onLoad() 将不会被调用，而页面的 DOM 仍然可以完全加载。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-03-10T05:17:15.127

对于最佳实践，您必须了解新的异步代码，它可以清除大部分早期的页面加载和性能问题。
虽然 Google 官方建议将其放置在`<head>`标签关闭之前，但也有少数例外值得注意。

1.  用于在 head 标签合理且完美运行之前将代码用于通用代码放置。
2.  但是如果有事件追踪或者电商转化追踪，并且涉及到自定义代码，那么建议放在`</body>`tag之前，效果会更好。

**注意：** Search Console 的点击次数和真实用户仍然存在 10-20% 的差异，但 Google Adwords 的定期集成显示出 100% 的准确度和精确度，因此如果您将 Google Adwords 用于您的网站，请尝试将它们全部集成。
另请阅读[Google Analytics 页眉或页脚](http://www.tutorialmines.net/where-to-put-google-analytics-code-header-or-footer/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-07-15T14:11:09.103

随着时间的推移，事情发生了变化。在我的 GA 帐户上，就像 2016 年一样，当我收到他们说的代码时：

> 这是该媒体资源的 Universal Analytics 跟踪代码。要为该媒体资源获得 Universal Analytics 的所有优势，请将此代码复制并粘贴到您要跟踪的每个网页中。
> 
> 通用代码
> 
> 使用上面的代码创建一个名为“analyticstracking.php”的文件，并将该文件包含在每个 PHP 模板页面上。***在开始 <body> 标记之后立即将以***下行添加到每个模板页面：

```
<?php include_once("analyticstracking.php") ?> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-23T03:07:35.010

我会说最好把它放在页脚 - 因为最好让下注者获得整个页面并有机会看到所有内容。消除了在该人错误地选择了您的网站时获得误报的一些可能性。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-05-23T03:08:23.000

我会将它放在`</body>`标签上方的页脚中，这样一旦加载跟踪代码，整个页面就会加载，以便分析跟踪代码进行跟踪。

# google-app-engine - 会话不工作 - GAE/J

> ID：10712910
> 
> 赞同：1
> 
> 时间：2012-05-23T03:05:48.083
> 
> 标签：google-app-engine, session

我对 GAE/J 开发和尝试使用 GAE Seesion 相当陌生。不知何故，当我尝试检索存储在会话中的值时，它只返回 null。这就是我所拥有的。

我有 loginservlet，我在其中将 String 变量设置为会话。

```
HttpSession hs=req.getSession(true);
if(hs.isNew()){
hs.setAttribute("logininfo", "mylogininfo");
} 
```

然后我尝试在 JSP 页面中检索此信息，如下所示 -

```
<%
HttpSession hs = request.getSession(false);
String logininfo = (String) hs.getAttribute("logininfo");
%> 
```

我总是将“logininfo”字符串设为空 - 不知道为什么。

我在 appengine-web.xml 中启用了会话

```
<sessions-enabled>true</sessions-enabled> 
```

以上只是我尝试运行的一个试用示例，我真的想将 'accessToken' 从 servlet 传递到 JSP 页面以进行 facebook 登录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T04:45:37.670

我不知道您的页面以什么顺序被调用，但最可能的罪魁祸首是`isNew()`方法的使用。

当服务器向用户浏览器发送 cookie 时，会话建立。这发生在任何页面的第一次请求，授权或非授权。

因此，[`isNew()`](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpSession.html#isNew%28%29)仅在对您的任何页面的第一次请求时才成立，而用户尚未收到任何 cookie。在任何连续的请求中（甚至几天后，取决于`Cookie Expiration:`GAE 管理员中的设置），它将是错误的。

# intellij-idea - 如何在 IntelliJ（或 .jar 等）中浏览 .zip 文件

> ID：10712921
> 
> 赞同：63
> 
> 时间：2012-05-23T03:07:03.827
> 
> 标签：intellij-idea, zip

我希望能够在 IntelliJ 中“打开”（无需解压缩）.zip 文件或 .jar 文件，就像您在 Eclipse 中通过单击曲折所做的一样。如何使用 IntelliJ 执行此操作？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-05-23T06:12:34.270

在您的项目结构中可见且无法扩展的 Jar 文件尚未作为库“添加”。右键单击jar文件并选择`Add as Library...`

另请参阅[配置模块依赖项和库](http://www.jetbrains.com/idea/webhelp/configuring-module-dependencies-and-libraries.html)。

并且：[将 lib/*.jar 添加到 IntelliJ IDEA 项目的正确方法](https://stackoverflow.com/questions/1051640/correct-way-to-add-lib-jar-to-an-intellij-idea-project)

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2017-11-16T15:51:09.983

现在有一个**Intellij 插件**可以解决这个问题：

[https://plugins.jetbrains.com/plugin/9491-archive-browser](https://plugins.jetbrains.com/plugin/9491-archive-browser)

更新：它现在也适用于**嵌套档案**。（测试 2019.1）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-05-19T14:24:17.483

虽然[Christopher Peisert 的答案](https://stackoverflow.com/a/10714424/4430939)适用于未嵌套的档案（如果您有一个包含 WAR 的 EAR，那么您就不走运了），但对于大多数档案类型（JAR 除外）来说，您必须将文件添加为库或来自**Settings的****Project Structure**区域的依赖项。

 **如果您希望存档成为嵌套存档的默认操作和工作，请投票支持此[YouTrack 问题 126376](https://youtrack.jetbrains.com/issue/IDEA-126376)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-02-23T13:27:44.203

我创建了一个新的 Intellij 插件来实现它。它支持基本档案和 tar.gz 扩展，关键特性是嵌套档案支持。它已上传到[Jetbrain 存储库](https://plugins.jetbrains.com/plugin/11940-file-expander)。您可以从插件市场安装它。有关更多信息，请参阅插件 github 页面 [File Expander](https://github.com/Camork/file-expander-plugin)。**

# asp.net - 如何检查 Gridview 列中的空列

> ID：10712927
> 
> 赞同：0
> 
> 时间：2012-05-23T03:08:03.843
> 
> 标签：asp.net, sql-server-2008, gridview

我在 asp.net 3.5 网页中有一个 GridView 控件，以下代码在 RowDataBound 事件中执行，它会更改背景颜色和字体颜色，一旦列中的值：RegWaitTime 和 TotalWegTime 大于 30，

该值来自 sql server 中的两个计算列，它返回从其他两列减去的结果，这里的问题是，如果这些列中的值为 NULL，我将在更改颜色的代码上得到错误，，对不起我的英语，如果您需要我澄清我的要求，请告诉我，

提前致谢

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
     {

        // Change Wait Time Cell Rows  CHECK THE LOGIC HERE

        if (e.Row.RowType == DataControlRowType.DataRow)
         {
             // This line will get the reference to the underlying row
             DataRowView _row = (DataRowView)e.Row.DataItem;
             if (_row != null)
             {
                 // get the field value which you want to compare and
                 // convert to the corresponding data type
                 // i assume the fieldName is of int type
                 int _field = Convert.ToInt32(_row.Row["RegWaitTime"]);
                 if (_field > 30)
                 {
                     e.Row.Cells[9].BackColor = System.Drawing.Color.Red;
                     e.Row.Cells[9].Style.Add("color", "white");

                 }
                 else
                     e.Row.Cells[9].BackColor = System.Drawing.Color.Green;
                     e.Row.Cells[9].Style.Add("color", "white");
             }

         }

        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            // This line will get the reference to the underlying row
            DataRowView _row2 = (DataRowView)e.Row.DataItem;

            if (_row2 != null)
            {
                // get the field value which you want to compare and
                // convert to the corresponding data type
                // i assume the fieldName is of int type
                int _field = Convert.ToInt32(_row2.Row["TotalRegTime"]);
                if (_field > 30)
                {
                    e.Row.Cells[10].BackColor = System.Drawing.Color.Red;
                    e.Row.Cells[10].Style.Add("color", "white");

                }
                else
                    e.Row.Cells[10].BackColor = System.Drawing.Color.Green;
                    e.Row.Cells[10].Style.Add("color", "white");
            }
        }

     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T03:17:13.010

您需要将转换代码更改为：

```
int field=0;

if(int.TryParse(_row.Row["RegWaitTime"],out field))
{
    if(field>30)
    {
    }
} 
```

你需要这个的原因是 if `_row.Row["RegWaitTime"]`is `NULL`，你会得到的实际值是抛出一个因为对象不能从 DBNull 转换为其他类型`DBNull.Value`而窒息。`Convert.ToInt32``InvalidCastException`

另一种选择是：

```
 if (!DBNull.Value.Equals(_row.Row["RegWaitTime"]))
 {
    //then do the conversion as you are doing now. 
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T03:22:28.170

检查数据库 NULL，如下所示：

```
if(_row.Row["RegWaitTime"] != DBNull.Value)
{
    //change colour
{
else
{
    //do what you need to do when you get a NULL value
} 
```

# python - 如何修复 django 中的 GET 参数错误？

> ID：10712928
> 
> 赞同：1
> 
> 时间：2012-05-23T03:08:09.540
> 
> 标签：python, django, templates, view, get

用户通过复选框选择一个插槽，还应该输入一个用户名，如下面的模板所示：

```
<form action="/clubs/{{ club.id }}/vote/" method="post">
{% csrf_token %}
{% for slot in tom_open_slots %}
    <input type="checkbox" name="slot" id="slot{{ forloop.counter }}" value="{{ slot.id }}" />
    <label for="slot{{ forloop.counter }}">{{ slot.slot }} on Court {{slot.court}}</label><br />
{% endfor %}    
<input type="text" name="username" />
<input type="submit" value="Reserve" /> 
```

然后我想显示在复选框中输入的用户名和时间。我通过下面的视图和模板执行此操作：

```
def vote(request, club_id):
    if 'username' in request.GET and request.GET['username'] and 'slot' in request.GET and request.GET['slot']:
        username = request.GET['username']
        slot = request.GET['slot']
        return render_to_response('reserve/templates/vote.html',{'username':username, 'slot':slot})
    else:
        return HttpResponse('Please enter a username and select a time.')

{{slot}}
{{username}} 
```

但是，当我转到 vote.html 时，我总是会收到错误消息（请输入用户名并选择时间）。没有获取 2 个 GET 参数的视图中有什么不正确的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T03:17:44.393

您在表单中使用`POST`请求：

```
<form action="/clubs/{{ club.id }}/vote/" method="post"> 
```

但在视图中，您正在检查`GET`来自`GET`请求的对象：

```
request.GET 
```

将您的表单方法更改为`method="get"`以解决问题。

编辑：在此处阅读有关`GET`vs`POST`请求的更多信息：[您何时使用 POST 以及何时使用 GET？](https://stackoverflow.com/questions/46585/when-do-you-use-post-and-when-do-you-use-get)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T03:20:47.433

在 Django 中，HttpRequest 对象具有三个字典，它们为您提供请求参数：

*   `request.GET`为您提供查询字符串参数，

*   `request.POST`为您提供发布数据，以及

*   `request.REQUEST`给你两个。

在您的情况下，由于表单正在使用该`POST`方法，因此您应该使用`request.POST`or `request.REQUEST`。

仅供参考：[https ://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.GET](https://docs.djangoproject.com/en/dev/ref/request-response/#django.http.HttpRequest.GET)

# c# - 如何正确包装字典 并公开一个枚举器？

> ID：10712933
> 
> 赞同：4
> 
> 时间：2012-05-23T03:08:24.780
> 
> 标签：c#, inheritance, dictionary, ienumerable, encapsulation

我在我的对象中封装了一个字典。如何公开 IEnumerable>？

前

```
class HashRunningTotalDB : Dictionary<int, SummaryEntity>
{
         /... 
} 

// WORKS!
static void Main ()
{
       HashRunningTotalDB  tempDB = new HashRunningTotalDB();
       //todo: load temp DB

       foreach(var item in tempDB)
       {
           Console.Writeline(item.Key + " " + item.Value.SomeProperty);
       }
} 
```

**后**

```
class HashRunningTotalDB : IEnumerable
{
    Dictionary<int, SummaryEntity> thisHashRunningTotalDB = new Dictionary<int, SummaryEntity>();

      //QUESTION:  HOW DO I IMPLEMENT THE GENERIC ENUMERATOR HERE?
    // The following doesn't behave the same as the previous implementation
     IEnumerator IEnumerable.GetEnumerator()
    {
        return thisHashRunningTotalDB.GetEnumerator();
    }

    // The following doesn't compile
     Dictionary<int, SummaryEntity>.Enumerator IEnumerable<Dictionary<int, SummaryEntity>>.GetEnumerator()
    {
        return thisHashRunningTotalDB.GetEnumerator();
    }
} 

static void Main ()
{
       HashRunningTotalDB  tempDB = new HashRunningTotalDB();
       //todo: load temp DB

       // NOT WORKING
       foreach(var item in tempDB)
       {
           Console.Writeline(item.Key + " " + item.Value.SomeProperty);
       }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-23T03:19:01.163

实施`IEnumerable<KeyValuePair<int, SummaryEntity>>`

```
class HashRunningTotalDB : IEnumerable<KeyValuePair<int, SummaryEntity>>
{
   Dictionary<int, SummaryEntity> thisHashRunningTotalDB =
      new Dictionary<int, SummaryEntity>();

   public IEnumerator<KeyValuePair<int, SummaryEntity>> GetEnumerator()
   {
      return thisHashRunningTotalDB.GetEnumerator();
   }

   IEnumerator IEnumerable.GetEnumerator()
   {
      return GetEnumerator();
   }
}

static void Main()
{
   HashRunningTotalDB tempDB = new HashRunningTotalDB();

   // should work now
   foreach(KeyValuePair<int, SummaryEntity> item in tempDB)
   {
       Console.Writeline(item.Key + " " + item.Value.SomeProperty);
   }
} 
```

# java - 使用与时间对应的 Csv 文件获取奇怪的输出

> ID：10712936
> 
> 赞同：1
> 
> 时间：2012-05-23T03:09:41.310
> 
> 标签：java, csv

当我扫描 csv 文件时，我得到了奇怪的输出，将其拆分为 "," ，对于每一行的长度，我将 i + ":" 的第 i 个元素附加到 printwriter。我的原始输入看起来像这样。

8.035156 7.619141 7.105469

7.234375 7.8125 8.244141

6.615234 8.224609 6.361328

它们确实由“，”分隔。

输出应该是这样的

1:8.035156,2:7.619141,3:7.105469,4:7.072266

再次，它应该用“，”分隔。

但是输出看起来像这样，当我点击它给我时间的选择时甚至更奇怪。

```
01:08.0 02:07.6 03:07.1 04:07.1 05:07.4 06:07.2 07:07.6 08:07.1 09:07.1 10:07.2 
12:04:06 AM 
```

只有当我`,`在 append 语句的末尾添加字符时，才会出现错误的输出。

```
public class GeneCsv
{
    public static void main(String[] args) throws IOException
    {
        File file = new File("file.csv");
        FileWriter writer = new FileWriter("/Users/home/fileExpression.csv");
        PrintWriter pw = new PrintWriter(writer);
        Scanner in = new Scanner(file);
        boolean firstLine = true;
        String[] temp = null;
        while (in.hasNextLine())
        {
            if (firstLine == true)
            {
                pw.println(in.nextLine());
                firstLine = false;
                continue;
            }
            else
            {
                String line = in.nextLine();
                temp = line.split(",");
                for (int i = 0; i < temp.length; i++)
                {
                    pw.append(i + ":" + temp[i] + ",");
                }
                pw.append("\n");
            }
        }

        pw.flush();
        pw.close();
        writer.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T04:02:54.603

您的代码没有任何问题。问题是 Excel 将您的输出解释为一系列时间值。因此，第一列中的值`1:8.035156`被读取为 1 分钟 8.035156 秒。如果您查看实际的数据输出，您会发现它与所需的格式相匹配。

要让 Excel 将值视为文本，您需要将它们格式化为

```
="1:8.035156",="2:7.619141",="3:7.105469",="4:7.072266", 
```

在 CSV 文件中。前导`=`和周围的引号可以解决问题。

另请参阅[阻止 Excel 自动将某些文本值转换为日期](https://stackoverflow.com/questions/165042)

# c# - SqlDataReader 和并发/释放问题

> ID：10712937
> 
> 赞同：0
> 
> 时间：2012-05-23T03:09:47.553
> 
> 标签：c#, asp.net, .net, sql-server-2005, sqldatareader

运行以下代码给我一个错误：

由于内存不足，.NET Framework 执行被升级策略中止。System.InvalidOperationException：已经有一个打开的 DataReader 与此命令关联，必须先关闭。

我到处都有以下代码来运行我的sql：

```
sql.Append(string.Format("SELECT TableId FROM ps_SavedTables WHERE guid = '{0}'", guid));

    using (IDataReader reader = SqlHelper.GetDataReader(sql.ToString())) {
        if (reader.Read()) {
            result = reader.IsDBNull(0) ? string.Empty : reader[0].ToString();
        }
        //CDW added to close SqlDataReader
        reader.Close();
    } 
```

GetDataReader 由以下定义：

```
public static SqlDataReader GetDataReader(string sql, string connectionString) {
    lock (_lock) {
        SqlConnection connection = null;
        try {
            connection = GetConnection(connectionString);
            //connection.Open();
            using (SqlCommand cmd = new SqlCommand(sql, connection)) {
                WriteDebugInfo("GetDataReader", sql);
                return cmd.ExecuteReader(CommandBehavior.CloseConnection);
            }
        }
        catch (Exception e) {
            if (connection != null)
                connection.Dispose();
            throw new DataException(sql, connectionString, e);
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T08:29:40.060

锁需要在阅读器级别...多个线程正在打开阅读器

# jquery - 如何在 Rails 中获取 JSON ajax 请求的数据？

> ID：10712939
> 
> 赞同：0
> 
> 时间：2012-05-23T03:10:06.030
> 
> 标签：jquery, ajax, ruby-on-rails-3

我正在尝试向我的 Rails 3 应用程序发出一个简单的 PUT JSON 请求：

```
$.ajax({type: 'PUT', url: '/controlpanel/custom_forms/1', data: { hello: 'world' }, contentType: 'json'}) 
```

不知何故，数据没有收到，`params`只包含id。这是在服务器端：

```
Started PUT "/controlpanel/custom_forms/1" for 127.0.0.1 at 2012-05-22 23:05:25 -0400
Processing by Controlpanel::CustomFormsController#update as */*
  Parameters: {"id"=>"1"} 
```

我期待`Parameters`成为`{"id"=>"1", "hello"=>"world"}`

该请求在 Chrome 中看起来不错：

**请求标头**

```
PUT /controlpanel/custom_forms/1 HTTP/1.1
Host: localhost:3000
Connection: keep-alive
Content-Length: 11
Origin: localhost:3000
X-CSRF-Token: HgGPJmgf0iXlsHtmZrifqFoww/rlzq+hAKb63HbAl8g=
X-Requested-With: XMLHttpRequest
User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_6_8) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.46 Safari/536.5
Content-Type: json
Accept: */*
Referer: http://localhost:3000/controlpanel/custom_forms/1/edit?feature_id=1
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-US,en;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3
Cookie: user_credentials=whatever 
```

**请求有效载荷**

```
hello=world 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-23T03:26:08.640

我犯了两个错误。首先，`contentType`必须设置为`application/json`，而不仅仅是`json`。其次，`data`必须手动序列化`JSON.stringify({...})`.

# clojure - 多行 Clojure 文档字符串

> ID：10712945
> 
> 赞同：27
> 
> 时间：2012-05-23T03:11:35.150
> 
> 标签：clojure, documentation, docstring

我注意到在大多数情况下，Clojure 多行文档字符串似乎是手动格式化的，包括 clojure.core 中的那些。[来自https://github.com/clojure/clojure/blob/master/src/clj/clojure/core.clj](https://github.com/clojure/clojure/blob/master/src/clj/clojure/core.clj)的示例：

```
(defn flatten
  "Takes any nested combination of sequential things (lists, vectors,
  etc.) and returns their contents as a single, flat sequence.
  (flatten nil) returns an empty sequence."
  {:added "1.2"
   :static true}
  [x]
  (filter (complement sequential?)
          (rest (tree-seq sequential? seq x)))) 
```

这似乎很奇怪，因为这意味着不同的文档字符串将具有不同的换行长度等，需要手动维护。

有没有更好的方法来格式化多行文档字符串？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-23T05:04:14.850

> 有没有更好的方法来格式化多行文档字符串？

我的建议是在您的文档字符串中使用[Markdown](http://en.wikipedia.org/wiki/Markdown)格式。以下是一些原因：

*   它是 github 在 README 和项目 wiki 中使用的内容（许多 Clo​​jure 用户使用并熟悉 github）。

*   [从您在各种 Clojure 项目中](https://github.com/clojure/clojure/tree/master/doc/clojure/pprint)[发现](https://github.com/clojure/core.memoize/tree/master/docs/release-notes)[的](https://github.com/clojure/core.unify/tree/master/docs/release-notes)[.md 文件](https://github.com/clojure/core.match)的[数量](https://github.com/technomancy/leiningen/tree/master/doc) 来看，它似乎是 Clojure 用户首选的标记格式。

*   流行的[Marginalia](https://github.com/fogus/marginalia) doc 工具呈现 markdown 格式的文档字符串和注释（我的理解是[Autodoc](http://tomfaulhaber.github.com/autodoc/)（用于在 clojure.org 生成文档的工具）最终也会在文档字符串中呈现 markdown）。

*   它看起来像纯文本一样好，易于键入，不需要任何特殊的编辑器支持，并且标记最少且易于记忆。

此外，您可能已经熟悉它，因为[Stackoverflow 将它](https://stackoverflow.com/editing-help)用于问题/答案/评论（reddit 和各种博客评论系统等网站也使用 Markdown）。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-23T16:03:24.103

如果您使用的是 Emacs，请从 technomancy 的 Github 中获取`clojure-mode.el`，[它](https://github.com/technomancy/clojure-mode/blob/master/clojure-mode.el)与 ELPA 中的不同（我不知道为什么，两者都声称是 1.11.5 版本，也许有人可以对此发表评论？）但包括`clojure-fill-docstring`将格式化文档字符串带有漂亮的缩进和换行，默认绑定到`C-c M-q`.

它将采取这个：

```
(defn flatten
  "Takes any nested combination of sequential things (lists, vectors, etc.) and returns their contents as a single, flat sequence. (flatten nil) returns an empty sequence."
  {:added "1.2"
   :static true}
  [x]
  (filter (complement sequential?)
          (rest (tree-seq sequential? seq x)))) 
```

并将其变成这样：

```
(defn flatten
  "Takes any nested combination of sequential things (lists, vectors,
  etc.) and returns their contents as a single, flat sequence.
  (flatten nil) returns an empty sequence."
  {:added "1.2"
   :static true}
  [x]
  (filter (complement sequential?)
          (rest (tree-seq sequential? seq x)))) 
```

在你`C-c M-q`在文档字符串中处理你的观点之后。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-04T19:24:33.793

我同意@uvtc 的观点，即降价是一个不错的选择。作为附录，我想指出，生成您自己的 Markdown 文档查看功能以在 REPL 中使用是微不足道的。下面的代码假设你的类路径上有 markdown-clj 包（例如，通过 dev 依赖项），并且在 OSX 中使用 REPL：

```
(ns docs
  (:require [clojure.java.shell :as s]
            [markdown.core :as md]))

(defmacro opendoc [name]
   `(do
        (md/md-to-html (java.io.StringReader. (:doc (meta (var ~name)))) "/tmp/doc.html")
        (s/sh "open" "/tmp/doc.html")
    )
  ) 
```

您可能想查看 clojure.repl/doc 的源代码来处理特殊情况（例如，这个假设您将传递一个正确的 var 符号）。让文件名反映“缓存”的命名空间/函数名也可能很好，而不是仅仅为每个请求重用相同的文件名......但为了说明目的，我保持简单。

OSX`open`命令只是要求操作系统通过检测文件的类型来打开文件。因此：

```
REPL=> (docs/opendoc my.ns/f) 
```

将导致您的默认浏览器打开函数文档字符串的 HTML 化版本。

另一个警告：如果你缩进你的多行字符串（编辑通常这样做），那么你的 MD 可能会以怪异的方式结束（例如，项目符号列表可能会以你不想要的方式嵌套）。解决此问题的一种方法是将其修剪掉。例如：

```
(defn boo
  "
  # Title
  My thing

  * Item one
  * Item two
  "
  [args] ...) 
```

然后修改opendoc函数首先应用左修剪：

```
(defn ltrim [str] (clojure.string/replace str #"(?m)^ {0,3}" ""))

(defmacro opendoc [name]
  `(do
    (md/md-to-html (java.io.StringReader. (ltrim (:doc (meta (var ~name))))) "/tmp/doc.html")
    (s/sh "open" "/tmp/doc.html")
   )
  ) 
```

# android - Admob 广告在模拟器中显示，但 Admob 帐户中没有状态

> ID：10712946
> 
> 赞同：4
> 
> 时间：2012-05-23T03:11:44.183
> 
> 标签：android, admob

应用程序配置了 Admob 代码，应用程序在模拟器中显示广告，但 Admob 帐户中没有绿色状态，状态仍为红色。已经在应用程序中使用 Admob 代码配置了一天，但状态没有变化。在站点 url 中，包名以这种格式给出，market://details?id=package name

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T04:43:03.980

App 需要发布到市场上，当手机收到广告时，admob 会识别，并将状态变为绿色。模拟器中的广告不会激活状态，因为它是测试设备，可能已在 xml 文件中列出。您不应该点击您自己应用程序中的广告，这就是为什么测试设备和/或您自己的手机应该列在 xml 文件中的原因，以便 Admob 忽略这些设备上的广告。

# iphone - 如何将字符串添加到第二行？

> ID：10712947
> 
> 赞同：0
> 
> 时间：2012-05-23T03:11:50.097
> 
> 标签：iphone, objective-c, cocoa-touch, ios4

我想将字符串附加到标签。

str1 = 你好；

Str2 = 嗨；

我可以附加两个字符串，但它显示像“Hello Hi”，我想要新行中的第二个字符串

你好

你好

请任何人建议我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T03:17:26.957

您必须使用转义序列。“\n”。

```
NSString *str1 = @"Hello";
NSString *str2 = @"Hi";
NSString *finalString = [NSString stringWithFormat:@"%@\n%@", str1, str2]; 
```

finalString 包含您想要的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T03:16:55.440

Objective-C 中的换行符是`\n`

# javascript - 为什么 knockoutjs 没有正确绑定？

> ID：10712951
> 
> 赞同：1
> 
> 时间：2012-05-23T03:12:25.883
> 
> 标签：javascript, knockout.js

为什么[这段代码](http://jsfiddle.net/6SuQJ/7/)在 3 秒后没有改变？我究竟做错了什么？

```
<div data-bind="visible: isBusy()">
is busy
</div>

<div data-bind="visible: !isBusy()">
is not busy
</div>

var viewModel;
function AppViewModel() {
    var self = this;
    self.isBusy = ko.observable(true);
}

function isNotBusyAnymore() {
    viewModel.isBusy = ko.observable(true);
}

viewModel = new AppViewModel();
ko.applyBindings(viewModel);
setTimeout(isNotBusyAnymore, 3000); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T03:18:19.077

因为你一直在制作一个新的 observable ......而且你的函数总是将它设置为“true”

```
function isNotBusyAnymore() {
    viewModel.isBusy(false);
} 
```

# logging - 构建日志如何传输到 TFS？

> ID：10712958
> 
> 赞同：0
> 
> 时间：2012-05-23T03:13:44.930
> 
> 标签：logging, tfs, build

构建日志如何传输到 TFS？是通过网络服务还是其他方式？

另外，转移的频率如何？都是一个批量吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T15:04:53.250

我目前没有办法进行测试，但有根据的猜测说它是即时的，并且通过 App Tier 的网络服务。Visual Studio 还能如何在构建运行时为您提供详细的构建反馈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T15:07:47.047

TFS2010 中的构建是工作流。我相信每时每刻的信息都是通过 Windows Workflow Foundation 中内置的 Workflow Tracking 机制发送到 TFS 的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-19T22:32:03.230

您可以通过 VS2010 或 VS2012 访问构建日志，如果您想查看它，只需查询您感兴趣的构建。如果您想以编程方式访问构建日志，整个构建日志可以在**Tfs_YourTeamProjectCollection**数据库中找到**Tbl_BuildInformation**。Tbl_BuildInformation**表**包含自引用条目以保存构建日志层次结构，并且所有构建信息都保存在 XML 中。

如果您有兴趣沿着这条路线走下去，我会在我的[***博客***](http://paulselles.wordpress.com/2013/11/15/tfs-build-log-querying-build-log-data/)中详细介绍。在这里发帖有点多。

# android - 为什么在 Android 中使用 HandlerThread

> ID：10712959
> 
> 赞同：19
> 
> 时间：2012-05-23T03:13:50.797
> 
> 标签：android, android-handler, android-handlerthread

在 android 中，Handler 可用于发布/处理消息，如果我不使用 HandlerThread（将其 Looper 传递给 Handler），这是否意味着在这种情况下 Handler 使用 MainThread（UI Thread）的 Looper？

如果 Handler 使用 MainThread 的 Looper 会得到什么结果？可能导致 mainThread 阻塞？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-10-12T23:36:52.057

如果您想一次执行一项后台任务，并且希望这些任务按执行顺序运行，则可以使用 HandlerThread。

比如你要一个一个地做几个网络后台操作。

是的，HandlerThread 有它自己的循环器，并且可以创建处理程序并将其发布（因此它不会阻塞主线程）。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-09-17T07:48:49.430

像这样使用 HandlerThread 的正常方法：

```
HandlerThread thread = new HandlerThread("A Handler Thread");
thread.start();
Handler handler = new Handler(thread.getLooper()){
    @Override
    public void handleMessage(Message msg) 
    {
    //....
    }
}; 
```

因为HandlerThread可以为Handler创建一个Looper，是一种方便的方式。

当您创建一个新的处理程序时，它会绑定到创建它的线程的线程/消息队列 - 请参阅官方文档...

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-02-11T18:12:58.077

> 如果我不使用 HandlerThread （将其 Looper 传递给 Handler），这是否意味着在这种情况下 Handler 使用 MainThread (UI Thread) 的 Looper ？

[查看Handler](https://developer.android.com/reference/android/os/Handler.html)的文档

```
Handler () 
```

> 默认构造函数将此处理程序与当前线程的 Looper 相关联。

如果你当前的线程是 MainThread，它使用 MainThread(UI Thread) Looper。

要将 Handler 显式关联到您的 MainThread（UI 线程），请编写以下代码。

```
Handler  mHandler = new Handler(Looper.getMainLooper(); 
```

如果你写如下，它使用[HandlerThread](https://developer.android.com/reference/android/os/HandlerThread.html) Looper。

```
HandlerThread handlerThread = new HandlerThread("HandlerThread");
handlerThread.start();
Handler requestHandler = new Handler(handlerThread.getLooper()); 
```

如果`Runnable`任务中有任何网络 IO 操作，则不能使用 Main thread looper。在这种情况下，发布执行网络 IO 操作`HandlerThread`的任务很方便。`Runnable`

你可以找到示例代码@How [do I fix android.os.NetworkOnMainThreadException?](https://stackoverflow.com/questions/6343166/how-do-i-fix-android-os-networkonmainthreadexception/43813062#43813062)

> 如果 Handler 使用 MainThread 的 Looper 会得到什么结果？可能导致 mainThread 阻塞？

如果您向 MainThread Looper 发送许多事件，它们将在 MainThread（UI 线程）本身上执行。如果提交的任务需要更多时间执行，则 MainThread 将被阻塞。

查看下面的帖子了解[Looper](https://developer.android.com/reference/android/os/Looper.html)的内部结构：

[Looper 的目的是什么以及如何使用它？](https://stackoverflow.com/questions/7597742/what-is-the-purpose-of-looper-and-how-to-use-it/45976517#45976517)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-05-23T03:21:48.560

正如[医生](http://developer.android.com/reference/android/os/HandlerThread.html)所说：

> 用于启动具有弯针的新线程的便捷类。
> 然后可以使用 looper 来创建处理程序类。
> 请注意，仍然必须调用 start()。

`HanderThread`类继承自Thread类，封装了Looper对象，这样我们就不用关心Looper打开和释放的细节了。就像在普通线程的情况下，我们需要使用`Looper.prepare()`并将`Looper.loop()`其转换为`LooperThread`.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-11-26T19:45:41.947

每个人似乎都解释了它的作用以及它是如何使用的，但是忘记解释这个线程需要在开发人员使用后进行清理，否则它会泄漏。使用后您必须致电

```
thread.quit() 
```

退出而不处理队列中的消息或

```
thread.quitSafely(); 
```

处理当前在队列中的消息。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-06-07T14:13:06.903

当您想要执行大量后台任务时，HandlerThread 很有用，因为它有自己的循环器。通常，如果您向 Handler 发布消息，它会使用 MainThread 的 looper。这意味着任务在 UI 线程上执行。但是在 HandlerThread 的情况下，这些任务是在工作线程上执行的。[你可以在这里](https://medium.com/@swechhaprakash/understanding-handlerthreads-on-android-b7b842ab5cc4#.xeqevo33o)找到更详细的解释

# jquery - 使用 jQuery 追加然后删除元素

> ID：10712963
> 
> 赞同：2
> 
> 时间：2012-05-23T03:14:34.053
> 
> 标签：jquery

尝试在 mouseenter 上附加一个元素，然后在 mouseleave 上删除相同的元素。

```
$(#foo).mouseenter(function (){
    $(this).append(#bar);
});
$(#foo).mouseleave(function (){
    $(this).remove(#bar);
}); 
```

不行，是我做错了吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-23T03:17:00.430

不引用字符串文字似乎是最明显的事情。你有没有尝试过：

```
$("#foo").mouseenter(function (){
    $(this).append("#bar");
});
$("#foo").mouseleave(function (){
    $(this).remove("#bar");
}); 
```

jQuery 的元素选择器函数（即`$()`）需要一个包含 CSS 样式选择器的字符串，例如`".someClass"`or`"#someId"`或`"div span.label"`。传递那些不带引号的东西是语法错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-23T03:19:16.817

```
​$("#foo").on("mouseenter mouseleave", function(e){
    e.type === "mouseenter"
        ? $("#bar").appendTo(this)
        : $("#bar", this).remove() ;
});​ 
```

提琴手：http: [//jsfiddle.net/AzEnm/1/](http://jsfiddle.net/AzEnm/1/)

# dynamic - 两个libjpeg库冲突怎么办

> ID：10712964
> 
> 赞同：3
> 
> 时间：2012-05-23T03:14:48.410
> 
> 标签：dynamic, libjpeg

我向其他人提供了一个依赖于 libjpeg8 的动态库 A。但是，当其他人将我的 lib 链接到他们恰好依赖于 libjpeg6 的应用程序时，会有一些冲突导致崩溃。

困境是他们不会将libjpeg6替换为更高版本，我必须使用libjpeg8中的新功能，如何在单个进程中解决这个问题？</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-04T21:58:49.390

为了避免符号冲突，我看到了 2 个选项：

*   静态链接 libjpeg，
*   在 libjpeg 中注入一个命名空间（因为 configure 没有提出这样的选项，这将是一个沉重的补丁）。

# sql - 在 SQL 表条目中使用通配符

> ID：10712968
> 
> 赞同：4
> 
> 时间：2012-05-23T03:15:21.700
> 
> 标签：sql, sql-server-2008, visual-studio-2008, wildcard

我一直在寻找这样的解决方案，但到目前为止没有积极的结果......我的**表**由条目**数据**组成，比如

1.  1234
2.  3241
3.  8424
4.  8_24
5.  9_13
6.  8_2_
7.  8_25

其中 '_' 是可以从 0 到 9 的通配符。我想找到一种方法来检索这些数据，例如：SELECT * from table WHERE data LIKE '8424'，查询应该返回 8424 和 8_24。

先感谢您！

PS。重点是，像‘8_24’这样的**数据**可以理解为‘8024’或者‘8124’或者‘8224’等，第6行也是如此。因此，如果我的查询是 SELECT * from table WHERE data LIKE '8424'，它应该返回第 4 行和第 6 行。如果我使用 SELECT * from table WHERE data LIKE '8_2_'，将包括第 7 行，这不是我想要的。

最后， **我找到了解决方案。非常简单，使用：SELECT * FROM table WHERE '8424' LIKE data 谢谢大家的回答！**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T03:29:36.690

```
select * from table where data like '8[4_]24' 
```

请参阅[LIKE](https://stackoverflow.com/questions/10712968/use-wildcard-in-sql-table-entry/10713072#10713072)文档中的“模式”部分。您可以使用`[]`来指定一个范围或一组字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T03:33:48.603

Select * from table where data =substr('8424',0,instr(data,' *'))|| substr('8424',instr(数据,'* '),长度(数据));

这将确保单个通配符条目

其他尝试

Select * from table where replace(data,'_','%') like '8424';

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-23T03:23:45.760

```
SELECT * FROM table WHERE data LIKE '8%24' 
```

不过，这也会引入像'834434224'这样的东西......

```
SELECT * FROM table WHERE data LIKE '8_24' 
```

这使用单个字符通配符 (_) 并且可以工作。

[LIKE 命令](http://msdn.microsoft.com/en-us/library/ms179859.aspx)

# php - PHP：使用while循环读取mysql后如何将数据转移到另一个页面

> ID：10712969
> 
> 赞同：1
> 
> 时间：2012-05-23T03:15:50.827
> 
> 标签：php, html, while-loop

我手上有一个小小的难题。这是这种情况。在网页上，我使用 php while 循环将数据从数据库读取到页面中。效果很好，但是单击时我需要这些项目中的每一个，然后转到另一个包含更多信息的网页。这个“更多信息”只是我​​将在数据库的另一列中拥有的数据，所以它没什么大不了的。所以我的困境是我怎么知道点击了哪个项目。有没有办法跟踪点击了哪个唯一索引？（请记住，我可能会在页面上列出数千个项目）。

这是我的while循环代码

```
while($row = mysql_fetch_array($result)){
 echo '<div class="thumb">';
 echo '<a href="template.php"><img src='.$row['dresses_pic'].'/></a>';
 echo '<p>'.$row['price_'].'</p>';
 echo '</div>';
} 
```

我曾尝试将 SESSION 放在 while 循环中，但下一页总是将最后一个列表读取为项目。
有没有更好的方法来实现我想要做的事情？
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T03:17:58.220

只需将项目的 ID 附加到您的链接，然后您可以从下一页将其作为`$_GET`变量获取：

```
while($row = mysql_fetch_array($result)){
 echo '<div class="thumb">';
 echo '<a href="template.php?id='.$row['id'].'"><img src='.$row['dresses_pic'].'/></a>';
 echo '<p>'.$row['price_'].'</p>';
 echo '</div>';
} 
```

**模板.php**

```
$id = (int) $_GET['id']; // Use this to get the item from the DB 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-23T03:17:32.823

尝试传入行项目的 ID，然后在新页面上检索该 ID 的数据。

```
 echo '<a href="template.php?id='.$row['id'].'"><img src='.$row['dresses_pic'].'/></a>'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T03:18:44.007

将记录的id传到下一页（使用url参数最简单，`?id=xxx`），查询db使用id（你可以通过`$_GET['id']`）获取信息。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T03:19:38.493

使用查询字符串将项目 ID 传递到您的 template.php 页面。

```
while($row = mysql_fetch_array($result)){
 echo '<div class="thumb">';
 echo '<a href="template.php?id='.$row['item_id'].'"><img src='.$row['dresses_pic'].'/></a>';
 echo '<p>'.$row['price_'].'</p>';
 echo '</div>';
} 
```

请参阅上面的更改线...

# android - 在android中解析本地XML文件中的HTML文本

> ID：10712971
> 
> 赞同：3
> 
> 时间：2012-05-23T03:16:08.063
> 
> 标签：android, html, xml

我正在尝试在 android 应用程序中解析本地 xml 文件，但有些代码是以 HTML 格式存储在 xml 标记中的 CDATA 部分中。我怎样才能得到解析的数据呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T06:31:19.037

我找到了将 CDATA 部分字符串传递给 textview 的解决方案

```
textView.setText((Html.fromHtml(string),TextView.BufferType.SPANNABLE); 
```

# c - -fno-stack-protector 有什么用？

> ID：10712972
> 
> 赞同：34
> 
> 时间：2012-05-23T03:16:26.803
> 
> 标签：c, buffer, stack-overflow, protection, callstack

我用 C 编写了一个应用程序，我试图了解`-fno-stack-protector`编译时命令的目的是什么。对于我的特定应用程序，是否使用此命令在防止缓冲区溢出方面没有区别。

我在网上读到`-fstack-protector`and`-fno-stack-protector`命令分别启用和禁用堆栈粉碎保护器，但是如果我自己编译应用程序，如何事先启用保护器？该命令的使用是否可能取决于应用程序运行的系统？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-23T03:23:40.713

在标准/库存 GCC 中，堆栈保护器默认关闭。但是，一些 Linux 发行版已对 GCC 进行了修补以默认将其打开。在我看来，这是相当有害的，因为它破坏了编译任何未链接到标准用户空间库的内容的能力，除非 Makefile 专门禁用堆栈保护器。它甚至会破坏 Linux 内核构建，只是带有此 hack 的发行版向 GCC 添加了额外的 hack，以检测内核正在构建并禁用它。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-05-23T03:26:08.823

如果您使用 编译`-fstack-protector`，那么在代码设置检查然后实际检查您是否已覆盖堆栈时，堆栈上将分配更多空间，并且在进入和返回函数时会产生更多开销功能。

它将对您的应用程序产生影响。如果启用，它将快速阻止堆栈溢出攻击。只有当您的代码中没有函数调用时，它才会使您的程序不受影响（并且由于您通常编写`main()`, 并且这是一个由启动代码调用的函数，它会对您的程序产生影响）。但是，堆栈溢出攻击并不是唯一可以使用的攻击，因此它不是万能的。但它是有用的保护，成本有限。

保护不依赖于系统本身；这取决于您使用的编译器的版本，仅此而已。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T03:29:57.500

堆栈保护器是由编译器生成并*放入*您的程序的代码。它不是您的程序调用的外部程序或系统调用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T06:23:23.907

匹配默认编译器设置的选项可能有用的时间包括：

*   当您使用的构建系统可能具有您想要调整的复杂配置时。它可以让您轻松地传递附加选项，而不是弄清楚它可能会选择在迷宫中的哪个位置使用`fstack-protector`（例如），这些选项只会被添加到选项列表的末尾。如果 GCC 在这组选项中都看到`fstack-protector`和`fno-stack-protector`，则命令行中的最后一个是生效的。

*   另一次这种事情可能很方便（然而，这似乎不适用于`-fstack-protector`）是当您有一个选项可以打开一堆“子选项”时。例如，设置 -O2 会打开一系列`-fxxx`优化选项，您可能希望`-O2`大部分使用但不希望 GCC 的严格别名优化。因此，您可以指定`-fno-strict-aliasing`将该特定选项设置回其默认设置。（注：这个案例真的和上面的案例是等价的）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-06T03:46:40.160

*您可能*要关闭此功能的三个原因，

*   您正在构建一个共享库，这可能很重要，其他函数对堆栈进行假设。
*   你关心性能。
*   您想构建易受攻击的软件。这种情况经常发生在 Capture The Flag (CTF) 之类的情况下，例如，如果您想构建 Protostar 来展示一个您也不会容易受到攻击的漏洞利用。

# sql - SQL 查询帮助 - 我认为是嵌套的

> ID：10712975
> 
> 赞同：0
> 
> 时间：2012-05-23T03:16:56.310
> 
> 标签：sql, nested

我正在编写一个 SQL 语句，它需要：

1.  找有一定数量的工作
2.  将该工作与另一张桌子相匹配
3.  显示结果

这是我目前拥有的。

```
select * from PreviousJobs pj, Jobs j where jobId = '273121' 
AND where (pj.sOtherRef = j.sOtherRef) = True 
```

嗯嗯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T03:18:57.160

您不需要 =True 或第二个 where。

只是

```
select * from PreviousJobs pj, Jobs j where jobId = '273121' 
AND pj.sOtherRef = j.sOtherRef 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-23T03:42:17.380

不需要嵌套；这是一个简单的 JOIN 是必需的，最好使用显式连接表示法编写：

```
SELECT cj.*, pj.* 
  FROM PreviousJobs AS pj
  JOIN Jobs         AS cj ON pj.sOtherRef = cj.sOtherRef
 WHERE cj.jobId = '273121' 
```

您不需要语句中的第二个 WHERE（这是一个语法错误；您应该向我们提供您的 DBMS 给您的错误消息）。您无需将比较与 TRUE 进行比较。

FROM 子句中以逗号分隔的表名列表在 SQL-86 和 SQL-89 中是必需的，但自从 SQL-92 支持被添加到 DBMS 后就不再需要了。您应该了解它，以便如果您阅读旧 SQL，您就会知道它的含义。但是你应该计划只使用新的 JOIN 符号，除非工作场所标准有压倒性的（和不明智的）使用旧符号的压力。

根据您使用的 DBMS，您可能会发现表别名中的 AS 是不允许的 (Oracle)，即使标准说没问题。这种差异就是为什么在问题中包含有关您的 DBMS 的信息是一个好主意的原因。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-23T06:44:35.953

1.  寻找具有特定编号的工作： where jobId = '273121'
2.  将该作业与另一个表匹配：pj.sOtherRef = j.sOtherRef 上的内部联接
3.  显示结果：select * from PreviousJobs pj

查询将是..

```
select *
  from PreviousJobs pj inner join Jobs j ON pj.sOtherRef = j.sOtherRef
 where j.jobId = '273121' 
```

# ruby-on-rails - 带有相关 habtm 的 Rails

> ID：10712988
> 
> 赞同：1
> 
> 时间：2012-05-23T03:18:01.927
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个轨道设置，如：

```
class Person
  has_and_belongs_to_many :sports
  ...
end

class Checkin
  belongs_to :person
  ...
end

class Sport
  attr_accessible :name
  has_and_belongs_to_many :people
  ...
end 
```

`name`我想获取某一天的所有人员签到，但仅限于他们拥有带有“棒球”的 HABTM 记录的地方。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-23T03:46:10.920

这样的事情有用吗？（可能需要更改属性名称）

```
Sport.where(:name => "Baseball").people.checkins 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-23T08:15:30.500

除了在 checkins 表中只有 person_id，您还可以拥有 sport_id。我想这是你的要求，对吧？签到基本上是“人”为“运动”所做的事情。

关系可能如下所示：

```
class Person
  has_and_belongs_to_many :sports
  ...
end

class Checkin
  belongs_to :person
  belongs_to :sport
  ...
end

class Sport
  attr_accessible :name
  has_and_belongs_to_many :people
  ...
end 
```

现在，获得一项运动的签到将非常简单。您可以执行以下操作：

Checkin.where(sport_id: 1, person_id: 2)

如果您没有获得 ID，您可以进行连接并在 1 个查询中获取结果。

# c++ - 为 Mac 构建闹钟应用程序

> ID：10712989
> 
> 赞同：1
> 
> 时间：2012-05-23T03:18:08.547
> 
> 标签：c++, macos

我想知道是否有人能指出我为 OS X 编写闹钟应用程序的正确方向。我一直在寻找教程，但似乎找不到任何与 OS X 相似的东西。我现在有应用程序，但他们只是没有t 似乎看起来正确或工作正确，所以我想我会让一个人看到，因为我一直想学习 C++。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-23T03:21:08.283

无法保证代码质量，但经过一番搜索，我在 Github [https://github.com/dev2dev/Alarm-Clock上找到了这个项目](https://github.com/dev2dev/Alarm-Clock)

注意：Mac 编程是在 Obj-C 中完成的，虽然您可以编写 C，但通常不需要它。这里有几个关于 obj-c 和 c++ 的链接

*   [http://philjordan.eu/article/strategies-for-using-c++-in-objective-c-projects](http://philjordan.eu/article/strategies-for-using-c++-in-objective-c-projects)
*   [http://www.mactech.com/articles/mactech/Vol.13/13.03/CandObjectiveCCompared/index.html](http://www.mactech.com/articles/mactech/Vol.13/13.03/CandObjectiveCCompared/index.html)

关于这个主题还有很多。但应该给你一些从哪里开始。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-23T03:24:29.263

如果您可以使用 bash 而不是 C++，这里有一个脚本，您可以将其用作

`wake 100 Wake now &`

并在给定的秒数后显示消息。

```
#!/bin/sh

sleep $1
shift

osascript <<EOF
tell application "Finder"
    activate
    beep
    display alert "$*"
end tell

return
EOF 
```

# javascript - 了解 JavaScript OOP

> ID：10712992
> 
> 赞同：2
> 
> 时间：2012-05-23T03:18:38.887
> 
> 标签：javascript, oop

好的，这真的是我第一次用 javaScript 上我的第一堂课，我已经学习了好几个月使用 JQuery，所以我教它并不难。在这段代码中，我会问很多问题..

好的，这是我的第一个 javascript 类的代码

```
window.myclass = function(){
    this.n1 = 0;
    this.n2 = 0;
    this.ans = 0;
    this.hehe = 0;

    this.defaultNumbersAdd = function(){

       this.hehe =setInterval(function(){
          //just an example of inert function...
          //the truth is i can't grab the this.n1 and this.n2...
          this.ans = this.n1 + this.n2;
       },100);
       clearTimeout(this.hehe);
    };

    this.returnAns = function(){
       return this.ans;
    };

    this.getAnswer = function(){
        this.defaultNumbersAdd(); //i want to reuse this function but I can't access it
        return this.returnAns(); //and also this one
    };

    this.modifynumbers = function(n1,n2){
        this.n1 = n1;
        this.n2 = n2;
    };
};

var myclassins = new window.myclass();
alert(myclassins.getAnswer); 
```

现在我的问题是

1）如何获取要在我的函数中使用的类变量（this.vars）

2）我如何在另一个函数中使用其他函数

注意：对不起，如果我的解释有点模糊......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-23T03:34:44.207

直接位于 window.myclass 对象内部的`this`指针指向该对象本身，您使用它来定义该对象的本质属性，例如 n1 和 n2。

但是，在对象中定义的函数中，`this`指针指向的是函数，而不是对象。***然而，在 setTimeouts 和 setIntervals 中，“this”关键字指的是窗口对象或全局范围。（例如，请参阅底部的更新。）

因此，您可以使用用于实例化类的全局范围内的变量名称直接访问属性，

```
 this.returnAns = function(){
       return myclassins.ans;
    }; 
```

但是，上述方法将您的类与实例化时赋予对象的名称相关联，并且仅对单个对象有用。

更好的解决方案是在对象中定义一个变量并使用它引用“this”指针：

```
window.myclass = function(){
    this.n1 = 0;
    this.n2 = 0;
    this.ans = 0;
    this.hehe = 0;
    var _self = this;   // reference to "this"

    this.defaultNumbersAdd = function(){

       myclass.hehe =setInterval(function(){
          //just an example of inert function...
              //the truth is i can't grab the this.n1 and this.n2...
          _self.ans = _self.n1 + _self.n2;
          console.log(_self.ans);
       },100);
       clearTimeout(_self.hehe);
    };

    this.returnAns = function(){
       return _self.ans;
    };

    this.getAnswer = function(){
        this.defaultNumbersAdd(); //i want to reuse this function but I can't access it
        return _self.returnAns(); //and also this one
    };

    this.modifynumbers = function(n1,n2){
        _self.n1 = n1;
        _self.n2 = n2;
    };
}; 
```

最后，另一种技术是使用闭包定义函数，将“this”指针传递给返回另一个函数的函数，如下所示：

```
 this.modifynumbers = (function(__this) {
        return function(n1,n2){
            __this.n1 = n1;
            __this.n2 = n2;
        }
    })(this); 
```

当然，最简单的方法是使用`var self`; 然而，在 JavaScript 中有几种不同的方式来完成一项任务，这些技术在不同的场景中可以证明是很方便的。

## **更新：**

@apsillers 指出，当在 setTimeout 和 setInterval 函数调用的回调中引用时，“this”关键字指向窗口对象。这是一个例子：

```
// top level scope
var global = "globalvalue";

window.demo = function() {
    this.somevar = "somevalue";        

    this.someFunct = function() {
        console.info("somevar = " + this.somevar);  // prints "somevalue"
        console.info("global = " + this.global);   // prints undefined! this points to "demo"!

        setTimeout( function() {
            console.info("timeout - somevar = " + this.somevar);  // undefined! references the "window" context
            console.info("timeout - global = " + this.global);   // prints "globalvalue"
        },1000);
    };
};
var dem = new demo();

dem.somevar;   // accessible from outside the object. prints "somevalue"
dem.someFunct(); 
```

**someFunct() 的输出：**

```
# inside method of object
somevar = somevalue
global = undefined

# inside timeout
timeout - somevar = undefined
timeout - global = globalvalue 
```

如您所见，在 setTimeout 内部，“this”明确指向窗口或全局范围！（注意：您实际上可以获取那个小代码片段并在您的 Chrome 或 Firebug 调试器中运行它。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-23T03:33:06.903

您可以使用[本文](http://addyosmani.com/resources/essentialjsdesignpatterns/book/)中描述的模块模式。使用它的好处是您可以拥有私有变量，并且只公开那些您想公开的变量。

```
var Myclass = (function(){

    var

    // Private
    n1 = 0,
    n2 = 0,
    ans = 0,
    hehe = 0,

    defaultNumbersAdd = function(){
       hehe = setInterval(function(){
          this.ans = this.n1 + this.n2;
       },100);
       clearTimeout(hehe);
    },

    returnAns = function(){
       return ans;
    },

    getAnswer = function(){
        this.defaultNumbersAdd();
        return returnAns()    
    },

    modifynumbers = function(n1 ,n2){
        n1 = n1;
        n2 = n2;
    };

    // Public
    return {
      defaultNumbersAdd: defaultNumbersAdd,
      getAnswer: getAnswer,
      modifynumbers: modifynumbers
    };
}());

// Then you can use the object as it already exists
myclass.method(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-23T03:36:21.523

我认为您对“this”关键字感到困惑。

'this' 指的是当前对象上下文。使用 setInterval 可以将函数传递到另一个上下文中，这`this`意味着其他内容。因此，您可以分配`this`给传递当前正在引用的对象的变量，也可以在内部`defaultNumbers.add`将属性分配给 var：

```
this.defaultNumbersAdd = function(){
   var ans = this.ans,
   n1 = this.n1,
   n2 = this.n2;

   this.hehe =setInterval(function(){
      //just an example of inert function...
      //the truth is i can't grab the this.n1 and this.n2...
      ans = n1 + n2;
   },100);
   clearTimeout(this.hehe);
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-23T03:25:17.890

我通常为此声明一个新变量：

```
window.myclass = function(){
....
....

var self = this
....
....
} 
```

现在你可以打电话给自己了。..... 无论你想要什么

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-23T03:28:15.220

**第 1 点**：如果您想要一个对象的所有成员变量，请使用`for(.. in ..)`：

```
// output all keys and values
for(key in myclassins) {
    console.log(key, myclassins[key]);
} 
```

请注意，函数是 JavaScript 中的一等变量，因此如果您只想枚举 的非函数成员变量`myclassins`，请执行以下操作：

```
// output all keys and values that are not functions
for(key in myclassins) {
    if(!myclassins[key] instanceof Function) {
        console.log(key, myclassins[key]);
    }
} 
```

**第 2 点**：在 JavaScript 中，`this`变量称为函数的*上下文*。上下文可能会改变——`setInterval`例如，当您调用 时，它会导致匿名函数使用上下文`this == window`而不是当前对象的上下文运行。如果要引用当前对象的上下文，请将其存储在构造函数开头的另一个变量中，例如`var self = this;`，然后在要引用该对象时`self`在匿名函数中引用。`setInterval`

这是因为 JavaScript 支持*闭包*，这意味着当您定义一个函数时，该新函数可以访问当前存在于当前作用域中的所有变量，包括 (在这种情况下) `self`。

**备注**：

*   JavaScript 是[基于原型的，而不是基于类的](https://developer.mozilla.org/en/Core_JavaScript_1.5_Guide/Details_of_the_Object_Model#Class-Based_vs._Prototype-Based_Languages)。这可能是一个难以理解的区别，并且与您的确切代码没有任何关系。但是，如果您说“JavaScript 类”，您可能会发现有人纠正您。

*   传统的将类型名称首字母大写 CamelCase，例如，instance`fooBar`是类型`FullTimeEmployee`（不是`fullTimeEmployee`或`fulltimeemployee`）。