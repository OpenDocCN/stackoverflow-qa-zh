# StackOverflow 问答 11807000-11807999

# python - 如何腌制写在函数内部的类的实例？

> ID：11807004
> 
> 赞同：5
> 
> 时间：2012-08-04T08:09:01.023
> 
> 标签：python, pickle

假设我在模块中有这个片段

```
def func(params):
   class MyClass(object):
       pass 
```

如何腌制 MyClass 类的实例？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T09:21:46.813

你不能，因为可挑选对象的类定义必须驻留在导入模块的范围内。只需将您的课程放在模块范围内，您就可以开始了。

也就是说，在 Python 中，通过对机器内部（在本例中为 sys.modules ）进行一些黑客攻击，几乎无法实现，但我不建议这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T16:15:32.470

您可以通过将类定义作为字符串包含在为实例腌制的数据中并在取消腌制`exec()`时通过添加`__reduce__()`将类定义传递给可调用对象的方法来解决腌制要求，即类定义是可导入的。这是一个简单的例子来说明我的意思：

```
from textwrap import dedent

# Scaffolding
definition = dedent('''
    class MyClass(object):
        def __init__(self, attribute):
            self.attribute = attribute
        def __repr__(self):
            return '{}({!r})'.format(self.__class__.__name__, self.attribute)
        def __reduce__(self):
            return instantiator, (definition, self.attribute)
''')

def instantiator(class_def, init_arg):
    """ Create class and return an instance of it. """
    exec(class_def)
    TheClass = locals()['MyClass']
    return TheClass(init_arg)

# Sample usage
import pickle
from io import BytesIO

stream = BytesIO()  # use a memory-backed file for testing

obj = instantiator(definition, 'Foo')  # create instance of class from definition
print('obj: {}'.format(obj))
pickle.dump(obj, stream)

stream.seek(0) # rewind

obj2 = pickle.load(stream)
print('obj2: {}'.format(obj2)) 
```

输出：

```
obj: MyClass('Foo')
obj2: MyClass('Foo') 
```

显然，在每个腌制的类实例中包含类定义字符串是低效的，因此冗余可能使其不切实际，具体取决于所涉及的类实例的数量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-13T16:20:39.703

这有点难做，因为 Pickle 默认情况下对用户定义类中的对象所做的方式是创建该类的新实例 - 使用对象的`__class__.__name__`属性在对象的原始模块中检索其类型。这意味着：pickling 和 unpickling 仅适用于（默认情况下）在它们定义的模块中具有明确定义名称的类。

当在函数内部定义一个类时，通常不会有一个模块级（即全局）变量来保存在函数内部创建的每个类的名称。

pickle 和 npickle 的行为可以通过类上的`__getstate__`和`__setstate__` 方法进行自定义-检查[`docs`](http://docs.python.org/library/pickle.html)-但即使是它们，为动态类正确执行它也可能很棘手，但我设法为另一个 SO 问题创建了它的工作实现--在这里查看我的答案： [Pickle a dynamic parameterized sub-class](https://stackoverflow.com/questions/4647566/pickle-a-dynamically-parameterized-sub-class)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-04T11:44:50.677

`MyClass`定义是函数的局部变量`func`。您不能直接创建它的实例，但您可以将其功能映射到新类，然后使用新类，因为它是原始类。这是一个例子：

```
def func(params):
    class MyClass(object):
        some_param = 100
        def __init__(self, *args):
            print "args:", args
        def blabla(self):
            self.x = 123
            print self.some_param
        def getme(self):
            print self.x 
```

`func.func_code`是`func`函数的代码，`func.func_code.co_consts[2]`包含`MyClass`定义的字节码：

```
In : func.func_code.co_consts
Out: 
(None,
 'MyClass',
 <code object MyClass at 0x164dcb0, file "<ipython-input-35-f53bebe124be>", line 2>) 
```

所以我们需要`MyClass`函数的字节码：

```
In : eval(func.func_code.co_consts[2])
Out: 
{'blabla': <function blabla at 0x24689b0>,
 '__module__': '__main__',
 'getme': <function getme at 0x2468938>,
 'some_param': 100,
 '__init__': <function __init__ at 0x219e398>} 
```

最后我们用元类创建一个新类，将 MyClass 函数分配给新类：

```
def map_functions(name, bases, dict):
    dict.update(eval(func.func_code.co_consts[2]))
    return type(name, bases, dict)

class NewMyClass(object):
    __metaclass__ = map_functions

n = NewMyClass(1, 2, 3, 4, 5)
>> args: (1, 2, 3, 4, 5)

n.blabla()
>> 100

n.getme()
>> 123 
```

# android - android canvas - 我如何在圆圈中制作分区

> ID：11807005
> 
> 赞同：0
> 
> 时间：2012-08-04T08:09:04.920
> 
> 标签：android, canvas

我有一个与在 android 上画布有关的问题。我画了一个环形圈（像一个时钟），但不能在圈子里做分区。有谁知道这是怎么可能的，在制作分区后，我可以在每个分区内制作更多分区并使其链接到弹出图像吗？

谢谢。

# oop - 就面向对象编程而言，哪种方法更好？

> ID：11807007
> 
> 赞同：0
> 
> 时间：2012-08-04T08:09:13.697
> 
> 标签：oop

超类 -> 车辆 | 子类 -> 汽车和自行车

如果 Car 类需要一个 startCar() 方法（在调用时会输出一个值“BRUMM”的字符串），甚至 Bike 类也需要一个类似的方法 startBike()（在调用时会输出一个值“TRUMM”的字符串）最好以这种方式进行，或者在超类 Vehicle 中有一个 startVehicle() 方法，该方法针对各个子类的不同输出进行不同的编码：汽车和自行车？

编辑：自行车是指摩托车

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T08:17:20.227

首先，不是分别使用 startCar() 和 startBike() [和 startVehicle()]，该函数可以 [并且应该] 只称为“start()”（例如 Car.start()、Bike.start()、Vehicle .start())，因为每个函数都有相同的意图，并且旨在提供相同类型的输出。

现在，如果您的大多数/所有子类都将实现启动函数，那么我建议在超类中创建 start() 函数，然后在子类中覆盖它。

此外，如果 Car.start() 和 Bike.start() 共享很多（但不是全部）相同的功能（例如，它们都启动某种引擎），那么将相似的代码放入 Vehicle.start() . 然后，当您编写 Car.start() 和 Bike.start() 来覆盖 Vehicle.start() 时，相应的函数应在运行其特定于类的代码之前调用 Vehicle.start() 方法。

PS 绝对不要*编写*超类的 start() 函数来根据类的实际类型输出不同的值；基本上，超类不必知道子类……否则，有什么意义？:)

# c# - 发布的 jquery mobile 列表视图

> ID：11807008
> 
> 赞同：0
> 
> 时间：2012-08-04T08:09:22.713
> 
> 标签：c#, model-view-controller, jquery-mobile

给定一个 jquery 移动项目列表。

```
<ul data-role=listview" data-inset="true">
  <li><a href="/dostuff?item=1">One</a></li>
  <li><a href="/dostuff?item=2">One</a></li>
  <li><a href="/dostuff?item=3">One</a></li>
</ul> 
```

是否有执行以下操作的最佳实践方法：

*   将每个项目发布到服务器。我有一个只接受帖子的 MVC 方法。我宁愿不使用“获取”。我希望每个项目都发布到服务器。*   一旦发布成功，每个项目都必须从列表中删除。

    jquery mobile 做了很多开箱即用的 ajax 工作。实现这一目标的最佳方法是什么。如果有更好的方法，我不想写大量的 jquery 来做到这一点。

    我可以在每个 li 项目上设置 data-role="button" ，但希望样式保持不变。似乎没有等效的 data-role="submit" 虽然这可能是完美的。

    谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T11:00:05.607

将列表项作为

```
<li style="padding: 0" class="ui-btn-up-a">
    @using (Html.BeginForm("Action", "Controller", FormMethod.Post, new { data_ajax = "false", @class = listButton" }))
    {
        @Html.AntiForgeryToken()
        <input type="submit" value="Post me" />
    }
</li> 
```

并添加 CSS

```
.listButton .ui-btn {
    margin: 0;
    -webkit-box-shadow: none;
    -moz-box-shadow: none;
    box-shadow: none;
    -webkit-border-radius: 0;
    -moz-border-radius: 0;
    border-radius: 0;
    border: 0;
    text-align: left;
}

.listButton .ui-btn-inner {
    padding: 0.4em 15px;
    font-size: 16px;
} 
```

# java - 使用servlet开发代理服务器

> ID：11807012
> 
> 赞同：0
> 
> 时间：2012-08-04T08:09:52.720
> 
> 标签：java, servlets, proxy

我正在使用 servlet 来构建代理服务。我解析一些超链接，如

```
a href="http://www.google.com" 
```

至

```
a href="proxyserver?url=http://www.google.com" 
```

form, frame, iframe 也是我解析的。所以所有的请求都将通过我的代理服务器。但是现在我发现了一些问题。

例如：像“form”标签..

javascript 将处理表单的操作。它改变了行动。太可怕了。

我能怎么做？有没有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T08:19:36.687

像这样重写页面真的很难。去过那里......从来没有真正成功过。

我认为您最好编写一个（受信任的）浏览器插件，通过拦截和重写传出的 HTTP 请求来进行代理。（而且我什至不确定这是可能的......）

# eclipse - eclipse中的Open Resource窗口显示pyc文件

> ID：11807016
> 
> 赞同：17
> 
> 时间：2012-08-04T08:11:09.883
> 
> 标签：eclipse, pydev

在 Eclipse 中，通过键入文件名打开文件的打开资源窗口（热键为 Cmd+Shift+R）似乎显示 *.pyc 文件，尽管导航器视图正确隐藏了它们。

无论如何设置它以忽略 PYC 文件？

我查看了以下链接，看来 pydev 可能需要 src 主 eclipse 文件夹下的文件夹。我没有那个结构，但是整个项目已在 Pydev 中标记为“源”文件夹-项目属性下的 PYTHONPATH。

[http://sourceforge.net/projects/pydev/forums/forum/293649/topic/2183420](http://sourceforge.net/projects/pydev/forums/forum/293649/topic/2183420) [http://pydev.org/manual_101_project_conf2.html](http://pydev.org/manual_101_project_conf2.html)

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-18T16:47:37.777

我找到了解决方案！

项目文件夹上的 CMD+i（或“右键单击”-> 属性），然后：

在“资源”->“资源过滤器”下：

*   点击“添加”
*   选择“全部排除”
*   选择“文件和文件夹”
*   检查“所有孩子（递归）”
*   在底部的文本字段中输入***.pyc**
*   好的
*   好的

\o/

# javascript - 在 HTML DOM 中传入 JSON 对象

> ID：11807017
> 
> 赞同：0
> 
> 时间：2012-08-04T08:11:10.003
> 
> 标签：javascript, jquery, json

我正在尝试一个名为 Highcharts 的图表包（你们中的一些人可能熟悉它，但不管问题与 Highcharts 本身无关）。我想做的是让我的 PHP 生成的 HTML 将 JSON 对象嵌入到 DOM 中，然后由静态 jQuery 监听函数获取。这是它的样子：

```
 // Static JS file that get's loaded with every page load and 
 // and listens for a class with ".highchart_config".
 // When it finds a config class it then looks in the attribute "data-chart"
 // for the JSON configuration object
 jQuery.noConflict();
 jQuery(function($) {
   $(document).ready(function() {
    $(".highchart_config").each(function(index) {
        var config_obj = $(this).attr('data-chart');
        chart = new Highcharts.Chart( config_obj );
    });
   });
 }); 
```

然后HTML如下：

```
 <div class="highchart_config" data-chart='         {chart: {"renderTo":"chart2","defaultSeriesType":"column"},title: {"text":"Monkies are Happy Animals"},xAxis:{"categories":["Apples","Oranges","Pears","Grapes","Bananas"],"min":null,"title":""},yAxis: {"min":0,"title":{"text":"Total fruit consumption"}},legend: {"align":"center","x":0,"verticalAlign":"bottom","y":0,"floating":false,"backgroundColor":null,"borderColor":"#CCC","borderWidth":1,"shadow":false,"reversed":true},tooltip: { formatter: function() { return this.series.name + ":" + this.y + " "}},plotOptions: {"column":{"stacking":"normal","dataLabels":{"enabled":false}}},series: [{"name":"Running","data":[5,3,4,7,2]},{"name":"Cycling","data":[2,2,3,2,1]},{"name":"Lifting","data":[3,4,4,2,5]}]}'></div> 
```

使用调试器，我可以通过在 Highcharts 对象实例化发生的行上放置一个断点来看到这个工作。当断点被命中时，我打印出“chart_obj”的值：

> ```
>  {chart: {"renderTo":"chart2","defaultSeriesType":"column"},title: {"text":"Monkies are Happy Animals"},xAxis:{"categories":["Apples","Oranges","Pears","Grapes","Bananas"],"min":null,"title":""},yAxis: {"min":0,"title":{"text":"Total fruit consumption"}},legend: {"align":"center","x":0,"verticalAlign":"bottom","y":0,"floating":false,"backgroundColor":null,"borderColor":"#CCC","borderWidth":1,"shadow":false,"reversed":true},tooltip: { formatter: function() { return this.series.name + ":" + this.y + " "}},plotOptions: {"column":{"stacking":"normal","dataLabels":{"enabled":false}}},series: [{"name":"Running","data":[5,3,4,7,2]},{"name":"Cycling","data":[2,2,3,2,1]},{"name":"Lifting","data":[3,4,4,2,5]}]} 
> ```

这对我来说看起来“正确”，但它不起作用。相反，对象的实例化失败，因为 config_obj 格式不正确。为了确保我没有犯一些愚蠢的语法错误，我将值剪切并粘贴到 config_obj 中，并将其放入一个如下所示的静态 JS 文件中：

```
 $(function () {
    var chart;
    $(document).ready(function() {
        chart = new Highcharts.Chart({
            chart: {"renderTo":"chart2","defaultSeriesType":"column"},title: {"text":"Monkies are Happy Animals"},xAxis: {"categories":["Apples","Oranges","Pears","Grapes","Bananas"],"min":null,"title":""},yAxis: {"min":0,"title":{"text":"Total fruit consumption"}},legend: {"align":"center","x":0,"verticalAlign":"bottom","y":0,"floating":false,"backgroundColor":null,"borderColor":"#CCC","borderWidth":1,"shadow":false,"reversed":true},tooltip: { formatter: function() { return this.series.name + ":" + this.y + " "}},plotOptions: {"column":{"stacking":"normal","dataLabels":{"enabled":false}}},series: [{"name":"Running","data":[5,3,4,7,2]},{"name":"Cycling","data":[2,2,3,2,1]},{"name":"Lifting","data":[3,4,4,2,5]}]
        });
    });
}); 
```

这种“硬编码”方法有效，但实例化调用应该具有完全相同的配置对象传入。我现在不知道如何继续。我一直在阅读有关此主题的 stackoverflow 上的其他帖子，但找不到任何东西可以帮助我解决我的具体问题。非常感谢任何和所有帮助。

更新：我没有尝试过......使用 data() 和 attr() 方法都无济于事，无论是否调用 JSON.parse(config_obj)。看来问题与 config_obj 被视为字符串有关，因此在调试器中，我决定将变量“test”分配给 config_obj 的剪切和粘贴的字符串结果，不带外部引号。它工作得很好，所以它显然是一个结构良好的 JSON 字符串，但将它转换为字符串仍然让我望而却步。下面是我的调试会话的图像，其中显示了三件事：

1.  首先，在我的 config_obj 字符串上使用 JSON.parse() 函数时出现错误（无论我使用 data() 还是 attr() 从 DOM 检索 config_obj 都是如此）
2.  如果我只是将文本剪切并粘贴到名为“test”的测试变量中，它将被识别为有效的 JS 对象
3.  如果我在测试对象上使用 JSON.stringify() 方法，它会转换回与我的 config_obj 变量相同的字符串版本......不同之处在于对象中的第一级属性在它们周围有引号. 这可能暗示出了什么问题，但我仍然没有破解这个坚果......任何帮助将不胜感激。

![分配给变量然后字符串化](../Images/d92c3577ccbce2185f1ad1e5a050eaba.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T08:20:19.243

当您获得属性值时 - 使用`.attr()`- 您被返回的是一个字符串。您需要解析该字符串以将其转换为实际对象，因此将以下行更改为：

```
chart = new Highcharts.Chart( JSON.parse(config_obj) ); 
```

重要的是`JSON.parse()`功能。

另外，请注意，如果您使用的是`data-*`属性，最好使用该`.data()`函数，因此您可以将另一行更改为：

```
var config_obj = $(this).data('chart'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T18:18:44.293

正如您可能在我对问题的“更新”中看到的那样，我发现 JSON 对象的字符串版本在我的原始对象和我通过将相同的字符串剪切并粘贴到一个对象中然后运行创建的对象之间存在差异JSON.stringify() 就可以了。

这种变体——包括对象名称周围的双引号标记——似乎对其正常工作很重要。如果您使用 jQuery 的 .data() 方法以这种方式传递它，它会自动将其转换为 JSON 对象，并且无需直接调用 JSON.parse()。

我仍然觉得奇怪的是，使用 JSON 的 parse() 方法将字符串转换为对象的标准比 JS 本身更严格，如果有人对此有任何理论，我会很感兴趣。无论哪种情况，都想感谢@Anthony、@DCoder 和其他所有提供帮助的人。

这是有效的 DOM 条目：

```
<div class="highchart_config" data-chart='{"chart":{"renderTo":"chart2","defaultSeriesType":"column"},"title":{"text":"Monkies are Happy Animals"},"xAxis":{"categories":["Apples","Oranges","Pears","Grapes","Bananas"],"min":null,"title":""},"yAxis":{"min":0,"title":{"text":"Total fruit consumption"}},"legend":{"align":"center","x":0,"verticalAlign":"bottom","y":0,"floating":false,"backgroundColor":null,"borderColor":"#CCC","borderWidth":1,"shadow":false,"reversed":true},"tooltip":{},"plotOptions":{"column":{"stacking":"normal","dataLabels":{"enabled":false}}},"series":[{"name":"Running","data":[5,3,4,7,2]},{"name":"Cycling","data":[2,2,3,2,1]},{"name":"Lifting","data":[3,4,4,2,5]}]}'></div> 
```

将这个 DOM 条目作为输入的 JS 是：

```
jQuery.noConflict();
jQuery(function($) {
  $(document).ready(function() {
    $(".highchart_config").each(function(index) {
        var config_obj = $(this).data('chart');
        chart = new Highcharts.Chart( config_obj );
    });
  });
}); 
```

# java - 由于致命错误 {EXCEPTION_UNCAUGHT_CXX_EXCEPTION }，我的 java 应用程序突然退出

> ID：11807018
> 
> 赞同：5
> 
> 时间：2012-08-04T08:11:25.887
> 
> 标签：java, mysql

我开发了一个 GUI Java 应用程序。它具有用于用户身份验证的登录页面。它使用mysql作为后端。我已经使用 Jar2Exe 1.0 (Regexlab.com) 将我的应用程序打包到 32 位 windows .exe 文件中。

不是问题是当我运行应用程序时：

*   数据库连接正常；
*   登录窗口正常。

当我单击提交按钮登录应用程序时，大多数情况下，它可以工作并且应用程序继续工作。但有时，应用程序退出时没有任何消息并生成错误日志，其内容如下：

```
----------------------------------------------------------
#
# A fatal error has been detected by the Java Runtime Environment:
#
#  EXCEPTION_UNCAUGHT_CXX_EXCEPTION (0xe06d7363) at pc=0x766fb9bc, pid=8808, tid=7540
#
# JRE version: 6.0_29-b11
# Java VM: Java HotSpot(TM) Client VM (20.4-b02 mixed mode, sharing windows-x86 )
# Problematic frame:
# C  [KERNELBASE.dll+0xb9bc]
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
#

---------------  T H R E A D  ---------------

Current thread (0x0a186000):  JavaThread "SwingWorker-pool-1-thread-10" daemon [_thread_in_native, id=7540, stack(0x0e390000,0x0e490000)]

siginfo: ExceptionCode=0xe06d7363, ExceptionInformation=0x19930520 0x0e48f41c 0x0042e2c0 

Registers:
EAX=0x0e48f344, EBX=0x00000000, ECX=0x00000003, EDX=0x00000000
ESP=0x0e48f344, EBP=0x0e48f394, ESI=0x00429508, EDI=0x0e48f3d4
EIP=0x766fb9bc, EFLAGS=0x00000216

Top of Stack: (sp=0x0e48f344)
0x0e48f344:   e06d7363 00000001 00000000 766fb9bc
0x0e48f354:   00000003 19930520 0e48f41c 0042e2c0
0x0e48f364:   00000008 00000000 0e48f420 00000000
0x0e48f374:   00000000 00000008 0e48f408 00000000
0x0e48f384:   00401dc2 00000000 02448e48 00000000
0x0e48f394:   0e48f3d4 0040df08 e06d7363 00000001
0x0e48f3a4:   00000003 0e48f3c8 02448e60 02448e30
0x0e48f3b4:   e06d7363 00000001 00000000 00000000 

Instructions: (pc=0x766fb9bc)
0x766fb99c:   02 50 ff 75 14 8d 45 c4 50 e8 58 ad 02 00 83 c4
0x766fb9ac:   0c eb 03 89 45 c0 8d 45 b0 50 ff 15 5c 11 6f 76
0x766fb9bc:   c9 c2 10 00 cc cc cc cc cc 8b ff 55 8b ec 56 8b
0x766fb9cc:   75 08 83 fe f4 72 18 83 fe f6 77 13 8d 45 08 50 

Register to memory mapping:

EAX=0x0e48f344 is pointing into the stack for thread: 0x0a186000
EBX=0x00000000 is an unknown value
ECX=0x00000003 is an unknown value
EDX=0x00000000 is an unknown value
ESP=0x0e48f344 is pointing into the stack for thread: 0x0a186000
EBP=0x0e48f394 is pointing into the stack for thread: 0x0a186000
ESI=0x00429508 is an unknown value
EDI=0x0e48f3d4 is pointing into the stack for thread: 0x0a186000

Stack: [0x0e390000,0x0e490000],  sp=0x0e48f344,  free space=1020k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
C  [KERNELBASE.dll+0xb9bc]  RaiseException+0x58
C  [panda.exe+0xdf08]  Java_com_regexlab_j2e_Jar2ExeClassLoader_findResources+0xb528

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
j  com.regexlab.j2e.Jar2ExeClassLoader.findClass(Ljava/lang/String;)Ljava/lang/Class;+0
J  java.lang.ClassLoader.loadClass(Ljava/lang/String;Z)Ljava/lang/Class;
J  java.lang.ClassLoader.loadClass(Ljava/lang/String;)Ljava/lang/Class;
v  ~StubRoutines::call_stub
j  com.panda.HomePageUI$124.doInBackground()Ljava/lang/Object;+26
j  javax.swing.SwingWorker$1.call()Ljava/lang/Object;+14
j  java.util.concurrent.FutureTask$Sync.innerRun()V+30
j  java.util.concurrent.FutureTask.run()V+4
j  javax.swing.SwingWorker.run()V+4
j  java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Ljava/lang/Runnable;)V+59
j  java.util.concurrent.ThreadPoolExecutor$Worker.run()V+28
j  java.lang.Thread.run()V+11
v  ~StubRoutines::call_stub

---------------  P R O C E S S  ---------------

Java Threads: ( => current thread )
  0x0a62b000 JavaThread "Thread-12" daemon [_thread_blocked, id=8328, stack(0x0f460000,0x0f560000)]
  0x0a62ac00 JavaThread "pool-2-thread-1" [_thread_in_Java, id=6056, stack(0x0bdc0000,0x0bec0000)]
  0x0a62a400 JavaThread "Thread-11" daemon [_thread_blocked, id=4872, stack(0x0bc80000,0x0bd80000)]
  0x0a62a000 JavaThread "Thread-10" daemon [_thread_blocked, id=2980, stack(0x0bb40000,0x0bc40000)]
=>0x0a186000 JavaThread "SwingWorker-pool-1-thread-10" daemon [_thread_in_native, id=7540, stack(0x0e390000,0x0e490000)]
  0x0a185800 JavaThread "SwingWorker-pool-1-thread-9" daemon [_thread_blocked, id=3852, stack(0x0e250000,0x0e350000)]
  0x0a185400 JavaThread "SwingWorker-pool-1-thread-8" daemon [_thread_blocked, id=5452, stack(0x0e110000,0x0e210000)]
  0x0a184c00 JavaThread "SwingWorker-pool-1-thread-7" daemon [_thread_blocked, id=8800, stack(0x0dfd0000,0x0e0d0000)]
  0x0a184800 JavaThread "SwingWorker-pool-1-thread-6" daemon [_thread_in_native, id=8740, stack(0x0de90000,0x0df90000)]
  0x0a184000 JavaThread "SwingWorker-pool-1-thread-5" daemon [_thread_blocked, id=4856, stack(0x0dd50000,0x0de50000)]
  0x0a183c00 JavaThread "SwingWorker-pool-1-thread-4" daemon [_thread_blocked, id=644, stack(0x0dc10000,0x0dd10000)]
  0x0a183400 JavaThread "SwingWorker-pool-1-thread-3" daemon [_thread_blocked, id=516, stack(0x0dad0000,0x0dbd0000)]
  0x0a182c00 JavaThread "Image Fetcher 1" daemon [_thread_blocked, id=2772, stack(0x0d990000,0x0da90000)]
  0x0a182800 JavaThread "KeyTipManager processing thread" daemon [_thread_blocked, id=7440, stack(0x0d750000,0x0d850000)]
  0x0a182000 JavaThread "SwingWorker-pool-1-thread-2" daemon [_thread_blocked, id=5576, stack(0x0d500000,0x0d600000)]
  0x0a181c00 JavaThread "SyntheticaAnimation 70" daemon [_thread_blocked, id=5660, stack(0x0d400000,0x0d500000)]
  0x0a181400 JavaThread "SyntheticaAnimation 60" daemon [_thread_blocked, id=9112, stack(0x0d200000,0x0d300000)]
  0x0a181000 JavaThread "Image Fetcher 0" daemon [_thread_in_native, id=8860, stack(0x067e0000,0x068e0000)]
  0x0a180800 JavaThread "StreamConnector 1: driver_launched_mysqld_1 std err" daemon [_thread_in_native, id=6052, stack(0x09da0000,0x09ea0000)]
  0x0a180000 JavaThread "StreamConnector 0: driver_launched_mysqld_1 std out" daemon [_thread_in_native, id=3264, stack(0x09c60000,0x09d60000)]
  0x0a17fc00 JavaThread "driver_launched_mysqld_1" daemon [_thread_in_native, id=2516, stack(0x09b20000,0x09c20000)]
  0x0a11b000 JavaThread "SyntheticaAnimation 50" daemon [_thread_blocked, id=4088, stack(0x0b570000,0x0b670000)]
  0x0023e000 JavaThread "DestroyJavaVM" [_thread_blocked, id=9132, stack(0x00090000,0x00190000)]
  0x0a11b800 JavaThread "SwingWorker-pool-1-thread-1" daemon [_thread_blocked, id=7784, stack(0x0b430000,0x0b530000)]
  0x0a11e800 JavaThread "D3D Screen Updater" daemon [_thread_blocked, id=3808, stack(0x0aef0000,0x0aff0000)]
  0x0a110800 JavaThread "TimerQueue" daemon [_thread_blocked, id=3828, stack(0x0abf0000,0x0acf0000)]
  0x0a0ac800 JavaThread "SyntheticaCleanerThread" daemon [_thread_blocked, id=8832, stack(0x0aaf0000,0x0abf0000)]
  0x0a05e000 JavaThread "Thread-2" daemon [_thread_blocked, id=8556, stack(0x0a7f0000,0x0a8f0000)]
  0x05b5bc00 JavaThread "AWT-EventQueue-0" [_thread_blocked, id=8968, stack(0x09ef0000,0x09ff0000)]
  0x059c7800 JavaThread "AWT-Windows" daemon [_thread_in_native, id=9056, stack(0x066a0000,0x067a0000)]
  0x059c7000 JavaThread "AWT-Shutdown" [_thread_blocked, id=8364, stack(0x06560000,0x06660000)]
  0x059c4c00 JavaThread "Java2D Disposer" daemon [_thread_blocked, id=6100, stack(0x06460000,0x06560000)]
  0x02b11800 JavaThread "Low Memory Detector" daemon [_thread_blocked, id=7964, stack(0x053a0000,0x054a0000)]
  0x02afc000 JavaThread "C1 CompilerThread0" daemon [_thread_blocked, id=3420, stack(0x05260000,0x05360000)]
  0x02af9000 JavaThread "Attach Listener" daemon [_thread_blocked, id=8732, stack(0x05120000,0x05220000)]
  0x02af5800 JavaThread "Signal Dispatcher" daemon [_thread_blocked, id=8380, stack(0x04fe0000,0x050e0000)]
  0x02aef400 JavaThread "Finalizer" daemon [_thread_blocked, id=8804, stack(0x04ea0000,0x04fa0000)]
  0x02aedc00 JavaThread "Reference Handler" daemon [_thread_blocked, id=8420, stack(0x04d60000,0x04e60000)]

Other Threads:
  0x02ab1c00 VMThread [stack: 0x04c20000,0x04d20000] [id=7960]
  0x02b25c00 WatcherThread [stack: 0x054e0000,0x055e0000] [id=9100]

VM state:not at safepoint (normal execution)

VM Mutex/Monitor currently owned by a thread: None

Heap
 def new generation   total 78656K, used 59862K [0x24580000, 0x29ad0000, 0x29ad0000)
  eden space 69952K,  73% used [0x24580000, 0x27775a10, 0x289d0000)
  from space 8704K, 100% used [0x289d0000, 0x29250000, 0x29250000)
  to   space 8704K,   0% used [0x29250000, 0x29250000, 0x29ad0000)
 tenured generation   total 174784K, used 25650K [0x29ad0000, 0x34580000, 0x34580000)
   the space 174784K,  14% used [0x29ad0000, 0x2b3dc920, 0x2b3dca00, 0x34580000)
 compacting perm gen  total 12288K, used 11118K [0x34580000, 0x35180000, 0x38580000)
   the space 12288K,  90% used [0x34580000, 0x3505b908, 0x3505ba00, 0x35180000)
    ro space 10240K,  51% used [0x38580000, 0x38aad0b8, 0x38aad200, 0x38f80000)
    rw space 12288K,  54% used [0x38f80000, 0x39619570, 0x39619600, 0x39b80000)

Code Cache  [0x02b70000, 0x02e78000, 0x04b70000)
....
//---------------------------------------------------------- 
```

我已经用谷歌搜索过了。我发现有些人有同样的 EXCEPTION_UNCAUGHT_CXX_EXCEPTION 问题。他们中的一些人解决了更改线程堆栈大小的问题。我这样做了，但我仍然有问题。

如果有人可以帮助我，我会很高兴，谢谢。

注意：Panda.exe 是应用程序的名称。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T10:01:21.973

您的计算机上安装了 Panda Antivirus 吗？日志说问题出在 JVM 之外，在本机代码中，并且引用了一个名为“Panda.exe”的进程。

这只是一个猜测，但可能是您的防病毒软件与您的应用程序冲突。您能否在没有防病毒软件的计算机上测试您的应用程序（例如，相同的 Windows 安装作为虚拟机运行）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-05T07:43:00.263

查看错误日志的一部分，然后向后工作：

```
1\. C  [KERNELBASE.dll+0xb9bc]  RaiseException+0x58
2\. C  [panda.exe+0xdf08]  Java_com_regexlab_j2e_Jar2ExeClassLoader_findResources+0xb528
3\. Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
4\. j  com.regexlab.j2e.Jar2ExeClassLoader.findClass(Ljava/lang/String;)Ljava/lang/Class;+0
5\. J  java.lang.ClassLoader.loadClass(Ljava/lang/String;Z)Ljava/lang/Class;
6\. J  java.lang.ClassLoader.loadClass(Ljava/lang/String;)Ljava/lang/Class;
7\. v  ~StubRoutines::call_stub
8\. j  com.panda.HomePageUI$124.doInBackground()Ljava/lang/Object;+26
9\. j  javax.swing.SwingWorker$1.call()Ljava/lang/Object;+14 
```

*   第 8 行：当这种情况发生时，您显然在您的代码中。
*   第 7-4 行：您已进入 Regexlab.com 的代码；在他们的类加载器中
*   Lines 2-1: Regexlab's made a native call. You're outside of the normal JVM code-base, and in native code written by a 3rd party when the exception is raised. The problem is in Regexlab code, and out of your hands.

Not much you can do with this other than to report it to Regexlab and obtain a patch.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-22T19:31:07.177

Give proper permissions to native library that is being used by JVM

# asp.net - 在asp.net中模拟请求？

> ID：11807019
> 
> 赞同：1
> 
> 时间：2012-08-04T08:11:27.353
> 
> 标签：asp.net, http, jquery, cookies

我有一个发送到 Facebook 服务器的 Jquery Ajax 请求。(jsonP)

但是，我对当前的响应不满意，我想在响应返回到 ajax 调用*之前“编辑”响应。*

为了做到这一点，我正在考虑`proxy`通过 ashx 构建一个。（它将执行请求，当响应返回时 - 他将对其进行编辑，并将返回到 ajax 调用）。

```
jQuery ajax ---> myHandler.ashx ----> Facebook +--->
                                                    |
                                                    |
jQuery ajax <---- myHandler.ashx(+edit) <-----------+ 
```

问题是 Facebook 需要它的 cookie，而恕我直言，只有 facebook 可以访问它的 cookie。

ashx 处理程序有什么方法可以将 cookie 连同他的请求一起传输（就像 jQuery ajax 一样）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T08:39:04.557

从技术上讲，您可以模拟 cookie 感知用户代理并将它们中继给用户。

**请求 1：**

*   浏览器将第一个请求发送到您的 ashx 处理程序。
*   您的处理程序将其中继到 facebook 服务器。
*   FB 以内容 + 设置 cookie 标头响应（**facebook.com**上的**fb-cookie=xxx**）
***   您的处理程序编辑内容并返回带有某种前缀的 set-cookie 标头（**your-fb-cookie=xxx** on **yoursite.com**）**

 ****要求 2：**

*   下次浏览器向您的 ashx 处理程序发送请求时，您将收到“ **your-fb-cookie=xxx** ”（在**yoursite.com**上定义）
*   **您的处理程序使用 cookie“ fb-cookie=xxx** ”将请求中继到 FB
*   ...

**但是，**请注意，facebook（或任何其他服务）可能（并且应该）使用某种反洪水检测。它可能会阻止您的服务器的 IP 地址，因为它会收到大量来自它的请求。这甚至可能违反 FB 许可条款。**

# php - 计算给定日期之间的价格

> ID：11807024
> 
> 赞同：1
> 
> 时间：2012-08-04T08:12:41.493
> 
> 标签：php, mysql

```
Hotel_id Room_id Room_type 开始日期 结束日期 价格
-------------------------------------------------- --------------
   13 2 标准 2012-08-01 2012-08-15 7000
   13 2 标准 2012-08-16 2012-08-31 7500
   13 2 标准 2012-09-01 2012-09-30 6000
   13 3 豪华 2012-08-01 2012-08-15 9000
   13 3 豪华 2012-08-16 2012-08-31 10000
   13 3 豪华 2012-09-01 2012-09-30 9500

```

嗨，这是我的表的结构和数据。

我需要为酒店预订创建一个 mysql 查询，该查询将匹配数据库用户输入的数据：

1.  他们想要入住和退房的日期
2.  房型

例如：

如果用户根据这些日期（2012 年 8 月 30 日至 2012 年 9 月 4 日）选择带豪华客房的酒店，则总费用将为 8 月 30 日和 31 日的 (10000*2) + 1 日和 2 日的 (9500*3) 9 月 3 日（不包括第 4 个结账日），即总价为 20000+28500=48500

因此查询应根据 Hotel_id、Room_id、Start_date、End_date 和 Price 过滤总价

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T18:34:47.320

使用此解决方案：

```
SELECT     SUM(
               CASE WHEN a.Start_date = b.min_sd AND a.Start_date <> b.max_sd THEN
                        (DATEDIFF(a.End_date, '2012-08-30')+1) * a.Price
                    WHEN a.Start_date = b.max_sd AND a.Start_date <> b.min_sd THEN
                        DATEDIFF('2012-09-04', a.Start_date) * a.Price
                    WHEN (a.Start_date,a.Start_date) IN ((b.min_sd,b.max_sd)) THEN
                        (DATEDIFF('2012-09-04', '2012-08-30')+1) * a.Price
                    WHEN a.Start_date NOT IN (b.min_sd, b.max_sd)             THEN
                        (DATEDIFF(a.End_date, a.Start_date)+1) * a.Price
               END 
           ) AS totalprice
FROM       rooms a
CROSS JOIN (
           SELECT MIN(Start_date) AS min_sd,
                  MAX(Start_date) AS max_sd
           FROM   rooms
           WHERE  Room_type   = 'luxury'     AND
                  End_date   >= '2012-08-30' AND
                  Start_date <= '2012-09-04'
           ) b
WHERE      a.Room_type   = 'luxury'     AND
           a.End_date   >= '2012-08-30' AND
           a.Start_date <= '2012-09-04' 
```

分别用您输入的开始日期和结束日期替换出现的`2012-08-30`和。`2012-09-04`

这将考虑到开始日期和结束日期在同一个月以及跨越多个月。

* * *

[*SQLFiddle 演示*](http://www.sqlfiddle.com/#!2/26012/17/2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T12:28:39.670

您可以使用 MySQL 的[`BETWEEN ... AND ...`](http://dev.mysql.com/doc/en/comparison-operators.html#operator_between) 运算符来查找所需预订的日期范围（请记住从给定的结帐日期休息一天，就像您说的那样，没有住宿），然后按房间对结果进行分组并取 [`SUM()`](http://dev.mysql.com/doc/en/group-by-functions.html#function_sum)价格乘以夜数（可以使用 MySQL 的[`LEAST()`](http://dev.mysql.com/doc/en/comparison-operators.html#function_least)和 [`GREATEST()`](http://dev.mysql.com/doc/en/comparison-operators.html#function_greatest)函数计算）：

```
SELECT   Room_id,
         SUM(Price * (1 + DATEDIFF(
              LEAST(End_date,   '2012-09-04' - INTERVAL 1 DAY),
           GREATEST(Start_date, '2012-08-30')
         ))) AS Total
FROM     mytable
WHERE    Room_type = 'luxury' AND (
              '2012-09-04' - INTERVAL 1 DAY
                           BETWEEN Start_date AND End_date
           OR '2012-08-30' BETWEEN Start_date AND End_date
         )
GROUP BY Room_id 
```

在[sqlfidde](http://sqlfiddle.com/#!2/6bde3/1/0)上查看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T09:05:53.590

试试这个：

```
set @Hotel_id :=13;
set @Room_id :=3;
set @Start_date :='2012-08-30'  ;
set @End_date :='2012-09-04';

 select sum(b.TotalPrice-b.deductions) as total_cost from
( select a.Price,a.StartDate,a.EndDate,price*(DATEDIFF(a.EndDate,a.StartDate)+1) as TotalPrice  
 ,case when a.EndDate=@End_date then a.Price else 0 end as deductions
 from
(select price,case when @Start_date>=Start_date then  @Start_date else Start_date end as StartDate
,case when @End_date<=End_date then  @End_date else End_date end as EndDate
 from h_booking h1 
where  Hotel_id=@Hotel_id
and Room_id=@Room_id
and (@Start_date between Start_date and End_date or @End_date between Start_date and End_date ))a )b 
```

# api - 用于主题化的可用 octopress 变量概述？

> ID：11807025
> 
> 赞同：1
> 
> 时间：2012-08-04T08:13:05.530
> 
> 标签：api, jekyll, liquid, octopress

我想为 Octopress 创建自己的设计。直到现在我才弄清楚 Jekyll 和 Liquid 是如何工作的，我想我已经准备好开始了。在查看经典主题时，我可以看到无处不在的变量`paginator.posts`，我想知道是否有所有可用变量的概述。但我找不到一个。你能给我任何资源吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T03:28:41.373

Octopress 基于 jekyll [，](https://github.com/mojombo/jekyll/)因此您可以参考Jekyll Wiki 上的[Template Data条目。](https://github.com/mojombo/jekyll/wiki/Template-Data)

# opencv - 评估兴趣点检测器时要考虑的标准

> ID：11807028
> 
> 赞同：2
> 
> 时间：2012-08-04T08:13:28.847
> 
> 标签：opencv, computer-vision, sift, object-recognition

我想评估不同的兴趣点检测器，如 FAST、MSER、DOH 和 DOG，以检测特定类型物体的图像。

作为第一个标准，我提出了在某些条件下（如照明或规模）的可重复性。我认为看看一个点周围的哪种区域有利于选择作为兴趣点也很有趣。

对于这种评估，还有哪些需要考虑的标准？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T03:56:52.987

您可能希望查看这两篇论文以获得全面的评估：

*   [局部描述符的性能评估](http://hal.inria.fr/inria-00548529/en)
*   [仿射区域检测器的比较](http://hal.inria.fr/inria-00548528/en)

# android - 更改 ListItem onItemClick 的值

> ID：11807029
> 
> 赞同：-1
> 
> 时间：2012-08-04T08:13:47.600
> 
> 标签：android, listview, listitem, onitemclicklistener

单击该 listItem 时，我想更改 listItem 的值。我提供了下面的代码。

```
public class MyListDialogExampleActivity extends Activity implements OnItemClickListener {

ListView myListView;
String itemString = null;   
String [] listViewArray = new String[] {"ABC", "DEF", "GHI", "JKL"};
MyArrayAdapter listAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    myListView = (ListView) findViewById (R.id.myListView);
    listAdapter = new MyArrayAdapter(this, R.layout.list_row, R.id.list_tv, listViewArray);

    myListView.setAdapter(listAdapter);
    myListView.setOnItemClickListener(this);

}
@Override
public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
    // TODO Auto-generated method stub
    Log.d("onItemClick", arg2+"");
    String str = showListDialog();

    // i want to change the selected list item with String str

}

public String showListDialog () {
    final CharSequence[] items = {"1", "2", "3", "4"};

    AlertDialog.Builder builder = new AlertDialog.Builder(this);
    builder.setTitle("Pick a number");
    builder.setItems(items, new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int item) {
            itemString = items[item].toString();
        }
    });
    AlertDialog alert = builder.create();
    alert.show();
    return itemString;

}    
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T08:22:55.657

您不能在运行时更改数组

所以你必须使用列表（http://developer.android.com/reference/java/util/List.html）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T08:28:08.523

您需要使用[onItemClick](http://developer.android.com/reference/android/widget/AdapterView.OnItemClickListener.html#onItemClick%28android.widget.AdapterView%3C?%3E,%20android.view.View,%20int,%20long%29)上发送给您的参数，以便您获取您使用的数组中的第 i 个元素，更改其值，最后通过[notifyDatasetChanged](http://developer.android.com/reference/android/widget/BaseAdapter.html#notifyDataSetChanged%28%29)通知适配器数据已更改.

# qt - 当图像内容随 QDeclarativeImageProvider 更改时，图像元素不会更新

> ID：11807031
> 
> 赞同：4
> 
> 时间：2012-08-04T08:14:02.677
> 
> 标签：qt, qml, qt-quick

我有一个这样的列表视图元素：

```
ListView {
    id: view
    width: 200; height: 250
    model:myModel;
    delegate:
        Text{
            text:  bareJid + ' '+status;
            Image{
                source:image;
            }
        }
} 
```

在委托 Image 元素中，从[QDeclarativeImageProvider](http://doc.qt.nokia.com/4.7/qdeclarativeimageprovider.html)获取其图像。但是当图像的内容发生变化时 myModel 不会更新。当图像的内容发生变化时，我怎么能注意到它重新加载图像。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T02:02:28.977

除非更改源，否则 Image 项将不会尝试重新获取图像。通常，这是通过在图像名称的末尾附加一个可以递增的 id 并在模型和提供程序中处理它来实现的。您还应该设置`cache: false`，因为没有必要缓存正在更改的图像。

另一种可能性可能是`cache: false`先将图像角色设置和更改为“”，然后再返回实际名称，记住每次更改后发出 dataChanged。请注意，图像之前不能使用 cache: true 加载，否则无论如何都将使用缓存版本（这在 QtQuick 2.0 中已修复）。

# android - 使用 ADB 从 PC 在 sdcard 上安装 apk 进行测试并截屏

> ID：11807033
> 
> 赞同：0
> 
> 时间：2012-08-04T08:14:14.470
> 
> 标签：android, adb, monkeyrunner

我第一次使用 ADB 或 android 调试桥。

问题是我已经编写了一个代码，可以直接从设备上的市场下载 APK。现在我想运行 ADB 来安装下载的 apk 并截图。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T08:20:42.223

以编程方式安装 apk 文件。

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setDataAndType(Uri.fromFile(new File(Environment.getExternalStorageDirectory()  + "/barcode.apk")), "application/vnd.android.package-archive");
startActivity(intent); 
```

**首先以编程方式将 apk 文件复制到 sd 卡，然后执行上述步骤 **

**或者**

将android apk安装到模拟器的分步方法：

```
1) Install Android SDK
2) Start the emulator by going to $SDK_root/emulator.exe
3) Go to command prompt and go to the directory $SDK_root/platform-tools 
4) Type in the command adb install
5) Now ur app is up and running on the emulator 
```

查看[此链接](http://www.addictivetips.com/mobile/how-to-take-screenshots-of-android-device/)以通过 ADB 捕获屏幕截图。

# python - 如何生成一组四个特定字符？

> ID：11807034
> 
> 赞同：2
> 
> 时间：2012-08-04T08:14:14.890
> 
> 标签：python, string, character, generator

编码新手，享受冒险游戏的乐趣。我希望角色能够逃离怪物，这样做，游戏将生成一个随机角色，该角色必须是以下四个角色之一：

新西威尔士州

我在这样做时遇到了麻烦，目前我有

```
import random
import string

x=random.randint(4,13)
a=string.ascii_letters[x]
print(a) 
```

这里的问题是我对.randint 的理解。它在给定的 2 个变量之间生成任意数字。我需要一个函数（我似乎找不到）来生成我选择的特定随机数。我需要的随机数是 4、13、18 和 22。这些对应于字母范围内的 ENSW。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T08:15:25.413

只需使用`random.choice('NSEW')`.

# ruby-on-rails - 为每个产品创建贝叶斯平均值

> ID：11807035
> 
> 赞同：0
> 
> 时间：2012-08-04T08:14:32.660
> 
> 标签：ruby-on-rails, ruby

我想使用以下公式根据他们的分数（0-100）和投票数来计算我的每个产品的贝叶斯分数：

> ( (avg_num_votes * avg_rating) + (this_num_votes * this_rating) ) / (avg_num_votes + this_num_votes)

每个产品都有_many评论，每条评论都有一个0-100的“分数”。

从数据库中提取产品列表时，计算要在视图中的表中列出的贝叶斯分数的最佳方法是什么？

编辑：我正在寻找类似的东西：

```
Product.each do |product|
  @product_bayesian = ((Review.count * Review.average(:score)) + (product.reviews.count + product.reviews.average(:score))/(Review.count+product.reviews.count)
end 
```

但是，以最有效的方式完成，可能通过控制器中的连接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T01:01:58.063

这是我的解决方案：

```
 def overall
    @products = Product.all
    @overall_count = Review.count
    @overall_average = Review.average(:score)
    @unranked = {}

    @products.each do |product| 
      @review_score_raw = product.reviews.average(:score) 
      @review_score = @review_score_raw.to_int if @review_score_raw 
      @review_count = product.reviews.count

      if product.reviews.count == 0 
        @bayesian = 0
      else 
          @bayesian = (((@overall_count * @overall_average) + (@review_count * @review_score_raw))/(@overall_count + @review_count)) 
      end 

      @unranked[product] = @bayesian
    end

    @ranked = @unranked.sort_by {|key, value| value}.reverse.each_with_index.to_a
end 
```

# android - 无法在 Eclipse 的 SQLite 管理器插件中打开数据库文件？

> ID：11807036
> 
> 赞同：2
> 
> 时间：2012-08-04T08:14:33.230
> 
> 标签：android, sqlite

我下载了jar文件并将其放在`/plugins`目录中。按照要求重新启动 Eclipse 以加载新插件。打开文件资源管理器并导航到 /package.name/databases/file.db 但无法在插件中打开它。它似乎无法点击。在这里做什么？检查屏幕截图。![在此处输入图像描述](../Images/8ddd3704e1a3c8dacb7f0dc54c849091.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-28T10:19:30.400

从模拟器卸载应用程序。然后在代码中，当您创建数据库时，将其命名为扩展名。例如，如果您的数据库名称是 MyDB，则将其写为**MyDB.db** 这将启用 eclipse 上 sqlite 管理器上的打开文件图标。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-01T10:22:24.423

从您的屏幕截图中可以清楚地看出您的数据库当前没有扩展名。因此它不允许打开数据库文件，但如果你可以在这里看到![在此处输入图像描述](../Images/8248a6c8ebd9fc4c233ac3d2ebbdf499.png)

**您可以使用“ -** ”选项从此处删除数据库，同时删除数据库和 .journal 文件。

在您创建 ordersManager 数据库的地方添加 .db 扩展名并再次运行应用程序。（请记住创建数据库）

当您再次来到 DDMS 查看您的数据库并单击 ordersManager.db 文件时，我圈出的图标将变为启用，然后单击它，您将能够读取数据。

您也可以从设备中提取数据库并使用[SQLLiteBrowser 之类的东西](http://sourceforge.net/projects/sqlitebrowser/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-25T13:28:25.983

这里有几个有用的链接：

1)[链接 1](https://stackoverflow.com/questions/5762389/how-to-view-data-saved-in-android-databasesqlite)

2)[链接 2](http://www.coderzheaven.com/2011/04/18/sqlitemanager-plugin-for-eclipse/)

您正在做的错误是您没有在您的数据库名称中提及“.db”扩展名。删除您以前的数据库并使用 .db 扩展名命名一个新数据库，即“Sample.db”尝试一下，希望它能解决您的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-12T14:25:37.230

尝试这个..

1.  **在此处**下载**[Android Sqlite 管理器](http://www.coderzheaven.com/android1/com.questoid.sqlitemanager_1.0.0.jar)。**

***   将它添加到你的**eclipse > dropins**目录。

    *   **重新启动**Eclipse 并转到 DDMS。

    *   在 DDMS 透视图中选择**.db文件**

    *   **单击**Sqlite Manger 图标。** 

 **现在您可以打开**.db**文件了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T13:11:47.963

[尝试从http://sqlitemanager.en.softonic.com/](http://sqlitemanager.en.softonic.com/)下载 SQLite3 管理器。并安装它。然后将您的数据库（即 file.db ）从 DDMS 拉到现在的位置，并尝试使用 Sqlite3 管理器打开它。

您将能够看到您的数据库内容。

我想这就是你想要的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-04T08:32:27.443

您必须像在屏幕截图中那样标记数据库，然后您必须单击顶部的数据库图标

最好将插件放在 dropin 文件夹中，因为您没有通过 url 加载它**

# ruby-on-rails - 从rails admin中的外键中选择不起作用

> ID：11807039
> 
> 赞同：1
> 
> 时间：2012-08-04T08:14:54.217
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rails-admin

以下是我的模型：

```
class Poll < ActiveRecord::Base
  attr_accessible :published, :title

  validates :published, :presence => true
  validates :title, :presence => true,
                    :length => { :minimum => 10 }

  has_many :choice, :dependent => :destroy
end

class Choice < ActiveRecord::Base
  belongs_to :poll
  attr_accessible :choice_text, :votes

  validates :choice_text, :presence => true

end 
```

然后我尝试安装[rails admin](https://github.com/sferik/rails_admin/)。我能够在管理员中创建选择和民意调查，但我无法将选择与民意调查相关联，反之亦然。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-11T18:45:36.337

首先在**has_many**中的类名应该是复数：

```
has_many :choices 
```

您应该为要编辑此关联的模型添加**attr_accessible poll_id**或**choice_ids 。**或者只是删除所有**attr_accessible**进行第一次尝试。

```
class Poll < ActiveRecord::Base
  attr_accessible :published, :title, choice_ids

  validates :published, :presence => true
  validates :title, :presence => true, :length => { :minimum => 10 }

  has_many :choices, :dependent => :destroy
end

class Choice < ActiveRecord::Base
  belongs_to :poll
  attr_accessible :choice_text, :votes, :poll_id

  validates :choice_text, :presence => true

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-08T03:16:51.790

`attr_accessible`Rails 4中没有。请`accepts_nested_attributes_for`改用。更多信息： [https ://github.com/sferik/rails_admin/wiki/Belongs-to-association](https://github.com/sferik/rails_admin/wiki/Belongs-to-association)

# java - Eclipse Android 开发工具 (ADT) 调试模式中的 Drop to Frame 支持

> ID：11807041
> 
> 赞同：1
> 
> 时间：2012-08-04T08:15:05.777
> 
> 标签：java, android, eclipse, debugging, adt

> **可能重复：**
> [不能丢帧？](https://stackoverflow.com/questions/10611019/cannot-drop-to-frame)

在 Eclipse Android Development Tools (ADT) 调试模式下，“Drop to Frame”被禁用。

有人设法让它在调试模式下工作吗？

“Drop to Frame”在调试代码时非常有用。

# html - 向左浮动两个元素？

> ID：11807042
> 
> 赞同：4
> 
> 时间：2012-08-04T08:15:07.740
> 
> 标签：html, css, css-float

我想我需要更多关于浮动概念的帮助。这次我的问题围绕着向左浮动两个或更多元素。这究竟是如何工作的？我知道浮动将元素的子元素从页面上抬起并将它们一直移动到左侧。所有其他元素都通过环绕来响应......但是浮动两个元素的概念如何适用于此？

这是我的理解：假设我有两个 DIV，a 和 b。将a 向左浮动，b 的内容将环绕它... 但是如果我将b 向左浮动... 内容如何响应a？

**编辑：**这是我正在搞砸的东西，看看我是否能理解这个概念。

![在此处输入图像描述](../Images/8a559549cb086ce5b1c74140592b3262.png)

第一个 DIV 有一个向左浮动的内联样式...但是看看没有内联样式边距的第二个 DIV 是如何古怪的？...当 DIV 向左浮动时，它不会显示这个古怪的边距还。

**编辑：**我知道内联样式很糟糕......我只是在这里用它们来展示一个例子。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T08:17:56.800

这是一系列非常全面的教程：[Floatutorial](http://css.maxdesign.com.au/floatutorial/)。通过遵循教程，可以非常清楚浮动的工作原理。

回答您的具体问题：当您有两个带有 的元素时`float:left`，周围的内容将包裹第二个元素，如果还有空间，则包裹第一个元素。

示例：http: [//jsfiddle.net/ak736](http://jsfiddle.net/ak736)

# android - 触摸屏上的操纵杆算法

> ID：11807047
> 
> 赞同：5
> 
> 时间：2012-08-04T08:15:48.603
> 
> 标签：android, iphone, touch, joystick

我想像这张图片一样在可触摸的屏幕上模拟一个模拟操纵杆。

## ![最终幻想 3 安卓版](../Images/0caf0153ae46747f613658a284693769.png)

当摇杆区域的中心设置为（cx, cy）时，我应该如何从触摸位置（tx，ty）计算X方向比率和Y方向比率（-1.0～1.0）？

![地点图片](../Images/359ebc962454b440f34799abdcd23046.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T08:29:57.540

x 方向比为 (tx-cx)/r，其中 r 是圆的半径大小。类似地，y方向比为(ty-cy)/r。

我假设 x 轴在图片右侧的方向上是右手笛卡尔坐标。否则，您可能需要乘以 (-1) 来调整方向。

# php - PHP：获取与特定值匹配的数组的键

> ID：11807049
> 
> 赞同：0
> 
> 时间：2012-08-04T08:15:54.250
> 
> 标签：php, arrays, function, key

这是我设置数组的方式：

```
 $Post_Cat_Array = array();
 while($row = mysql_fetch_array( $result )) {
 $Post_Cat_Array[$row['type_id']] = $row['type_name'];} 
```

在这个函数中，我需要获取`type_id`特定`type_name`（值）的（键）

```
function NameToID($input){
echo array_search($input, $Post_Cat_Array); 
} 
```

我这样调用函数：

```
NameToID($_POST['type']); 
```

但它不起作用。它不回声任何东西。我确信`$_POST['type']`包含正确的值。

注意：值`$_POST['type']`是阿拉伯语。与数组的所有值相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T08:25:27.743

这似乎`$Post_Cat_Array`超出了范围。修改你的功能：

```
function NameToID($input, $arr){
  echo array_search($input, $arr); 
} 
```

接着：

```
NameToID($_POST['type'], $Post_Cat_Array); 
```

从[PHP 变量范围](http://php.net/manual/en/language.variables.scope.php)：

> 此脚本不会产生任何输出，因为 echo 语句引用 (...) 变量的本地版本，并且尚未在此范围内为其分配值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T08:38:24.003

那是因为您的函数不知道您的数组变量。您可以使用以下任一方法来实现

```
<?php
$Post_Cat_Array=array();
$Post_Cat_Array["key1"]="value1";
$Post_Cat_Array["key2"]="value2";
$Post_Cat_Array["key3"]="value3";
$Post_Cat_Array["key4"]="value4";

echo NameToID("value4");
echo "<br>";
echo NameToID2("value4",$Post_Cat_Array);

function NameToID($input){ 
    global $Post_Cat_Array;
    echo array_search($input, $Post_Cat_Array);  
} 
function NameToID2($input,$values){ 
    echo array_search($input, $values);  
} 
?> 
```

# java - java循环的一个简单程序问题

> ID：11807052
> 
> 赞同：0
> 
> 时间：2012-08-04T08:16:43.020
> 
> 标签：java, loops

我对我的代码有一个简单的问题。我对java很陌生，并试图自学，但我现在有点陷入循环。对我来说，这似乎应该有效。问题是要求一些学生，然后让用户输入每个学生的姓名和分数。然后它应该显示得分最高的学生和第二高的学生。出于某种原因，我的代码只显示了我为第一高分和第二高分输入的名字和分数。我可能犯了一些大错误，但也许有人可以指出我正确的方向？对不起，如果这看起来像一个巨大的混乱。:(

```
public class Chapter4_9 {

  public static void main(String[] args) {

    //scanner for input
    Scanner input = new Scanner(System.in);

    //ask user for number of students
    System.out.print("Enter the number of students: ");
    int numberStudents = input.nextInt();

    //declare variables
    double highestScore = 0;
    double tempScore = 0;
    double secondHighestScore = 0;
    String firstStudent = "";
    String tempStudent = "";
    String secondStudent = "";

    for (int i = 0; numberStudents != i; ++i) {
        System.out.print("Enter the students name followed by his score: ");
        String studentName = input.next();
        double studentScore = input.nextDouble();

        if (i == 0){
            firstStudent = studentName;
            highestScore = studentScore;
        }

        else if (studentScore > highestScore) {
            tempStudent = firstStudent;
            studentName = firstStudent;
            secondStudent = tempStudent;
            tempScore = highestScore;
            studentScore = highestScore;
            secondHighestScore = tempScore;
        }

    }   
    System.out.println("The highest scoring student is " + firstStudent + " with a " + highestScore);
    System.out.println("The second highest scoring student is " + secondStudent + " with a " + secondHighestScore);

}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T08:24:36.980

这个块似乎有点混乱：

```
else if (studentScore > highestScore) {
    tempStudent = firstStudent;
    studentName = firstStudent;
    secondStudent = tempStudent;
    tempScore = highestScore;
    studentScore = highestScore;
    secondHighestScore = tempScore;
} 
```

这个块的预期结果是什么？为什么你要覆盖 and 的值`studentName`，`studentScore`当它们不再被读取时（在你从用户那里读取新值之前）？

大概*目的*是用最高分数/名称替换第二个分数/名称，然后用当前输入替换最高分数-但这根本不是代码的作用。这会做到：

```
secondStudent = firstStudent;
secondScore = highestScore;
firstStudent = studentName;
highestScore = studentScore; 
```

根本不需要临时变量。

然而，仅仅这样的改变是不够的。您*还*需要考虑新分数不高于当前*最高*分但高于当前*第二*高分的情况。我会让你弄清楚这需要什么......

顺便说一句，如果您为“名称/分数”组合引入了一个单独的类，您的代码可能会更简单，例如`Student`. 那么你就没有并行变量了——你只需要担心`topStudent`, `secondStudent`, 。`currentStudent`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T08:24:21.430

当您发现更高的分数时，您的代码是错误的。

```
secondStudent = fistStudent; // what used to be high score is now 2nd
firstStudent = studentName;
// score adjustment left for you to do ;) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T08:27:18.553

代码中有一个错误，而且您并没有涵盖所有内容。

在 for 循环中，您必须拥有这些：

```
else if (studentScore > highestScore) {
        secondStudent = firstStudent;
        firstStudent = studentName;
        secondHighestScore = highestScore;
        highestScore = studentScore;
    }
else if (studentScore < highestScore && studentScore > secondHighestScore) {
        secondStudent = studentName;
        secondHighestScore = studentScore;
    } 
```

完毕。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T08:36:13.460

你的逻辑不正确。你没有处理所有方面。如果您检查您的代码，它只会正确处理第一个输入，这完全取决于您如何提供输入。你的逻辑需要改进。没有必要有这么多的临时变量。

您最好在调试模式下运行您的应用程序并进入它，这样您就知道哪里出了问题。

# apache-flex - 错误：无法解析组件实现

> ID：11807055
> 
> 赞同：2
> 
> 时间：2012-08-04T08:16:58.633
> 
> 标签：apache-flex, module, flex4

我有一个模块似乎可以与其中的 spark 组件一起正常工作，但是当我尝试加载自己的模块时，它给了我这个错误。

```
Error: Could not resolve <views:DisplayList> to a component implementation. 
```

这是代码：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Module xmlns:fx="http://ns.adobe.com/mxml/2009" 
          xmlns:s="library://ns.adobe.com/flex/spark" 
          xmlns:mx="library://ns.adobe.com/flex/mx" 
          xmlns:views="views.*"

          width="400" height="300" 

          >

    <views:DisplayList width="100%" height="100%"/>
</s:Module> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-04T15:40:15.197

打开使用 Flex SDK 4.x 创建但已更新到 4.6.0 的项目后，我遇到了同样的问题。我尝试了上述4个步骤，但无济于事。然后，我尝试将 Project->Properties->Flex Compiler 中的 Flex SDK 从“使用默认 SDK（当前为“4.6.0”）更改回“使用特定 SDK：Flex 3.6”（这是我的唯一一个SDK 列表）。当然，显示相同的错误。然后我将其设置为“使用特定的 SDK：Flex 4.6.0”，所有错误都消失了！

我可能可以将其设置为“4.6.0”，而不必先将其设置为“3.6”，但我想准确报告我所做的事情。我相信，在我的 Flex 更新后，关于“专门”设置它而不是选中“默认”按钮，Flex 可以将其内部引用更新为正确的 SDK。我希望这可以节省一些时间和麻烦。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T08:48:02.767

我做了四件事

*   项目 > 清洁
*   关闭其他项目
*   重新启动 Flash Builder
*   打开了一个库的项目属性，该库具有类似命名的类（不同的包，相同的类名）并且未选中包含类。

其中一个修复了它。我认为项目>清洁。如果它再次发生，我会完善这个答案。

**更新**：运行项目>清理>清理所有项目工作（而只选择清理当前项目没有）。

# javascript - HTML 文本混淆器

> ID：11807056
> 
> 赞同：0
> 
> 时间：2012-08-04T08:17:06.563
> 
> 标签：javascript, html, ruby-on-rails, ruby

在我看来，我有一些我想混淆的领域。它们是简单的文本（例如价格）。我正在寻找一个允许我混淆 HTML 文本的 Ruby（或 Rails）库。

例如：

```
<%= obfuscate("4.99") %> 
```

并生成一些 javascript（或难以理解的 HTML），例如[http://hivelogic.com/enkoder/](http://hivelogic.com/enkoder/)

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T08:47:45.197

```
string.each_codepoint.map {|x| "&#x#{x.to_s 16};" }.join 
```

此代码带有 JPEG，以使其更加客户安全。

![安全 JPEG](../Images/7349f0b4a8b647504427c00ec913c44a.png)

# php - 防止带有 url 输入的重复条目

> ID：11807059
> 
> 赞同：-5
> 
> 时间：2012-08-04T08:17:32.260
> 
> 标签：php, url, duplicates

我有一个输入 url 的表单

动态地，用户可以输入

```
www.stack.com  or
www.stack.com/overflow  or
http://www.stack.com  or
http://www.stack.com/overflow 
```

如何防止将重复条目插入到我的数据库中？

我试过这些

```
$url = (input url)

$search = str_replace("http://www.", "", $url);
$search = str_replace("http://", "", $url);
$search = str_replace("www.", "", $url);
$search = str_replace("/", "", $url); 
```

在最后一次 $search 中，我想删除“/”之后的所有以下字符，包括“/”接下来是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T09:23:53.093

您可以使用 PHP 的[`parse_url()`](http://php.net/parse_url)方法为您完成所有工作：

```
$url = ((strpos($url, 'http://') !== 0) && (strpos($url, 'https://') !== 0)) ? 'http://'.$url : $url;
$parsed = parse_url($url);
$host = $parsed['host']; 
```

第一行将验证方案是否`http://`存在`https://`于给定的 URL 中。如果没有，它将在前面添加一个默认值`http://`。如果没有给定的方案，`parse_url()`会将整个 URL 放入`path`索引中。有了它，它将正确解析主机。

或者，由于您只需要域名，您可以将`PHP_URL_HOST`标志添加到方法调用中：

```
$url = ((strpos($url, 'http://') !== 0) && (strpos($url, 'https://') !== 0)) ? 'http://'.$url : $url;
$host = parse_url($url, PHP_URL_HOST); // this will return just the host-portion. 
```

通常，您会希望保留给定 URL 的子域名，因为子域可能会有很大差异（甚至是完全不同的网站）。但是，在 的情况下`www.`，通常情况并非如此。鉴于上述关于如何获取当前域的陈述之一，您可以`www.`使用以下命令删除：

```
$host = str_replace('www.', '', $host); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T09:39:25.003

newfurniturey 的回答似乎是一个很好的解决方案。在调用 parse_url 之前，您可以检查 url 中是否缺少 http://，如果是，那么您可以在字符串前面加上 http:// 并且 parse_url 应该按预期工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T05:18:48.707

对于一些会坚持同样的问题并放弃这里的人，这里是完整的代码

```
if((strpos($url, 'http://')  !== false) || (strpos($url, 'https://')  !== false)) 
{   $host = parse_url($url, PHP_URL_HOST); 
    if (strpos($url, 'www.') !== false)
        $host = str_replace('www.', '', $host);
    if (strpos($host, '/') !== false)
    {   $str = explode("/", $host);
        $host = $str[0];
    }
}

else if (strpos($url, 'www.') !== false)
{   $host = str_replace('www.', '', $url);
    if (strpos($host, '/') !== false)
    {   $str = explode("/", $host);
        $host = $str[0];
    }

}
else if (strpos($url, '/') !== false)
    {   $str = explode("/", $url);
        $host = $str[0];
    }

else $host = $url; 
```

# eclipse - Flash Builder / Eclipse 未启动

> ID：11807062
> 
> 赞同：0
> 
> 时间：2012-08-04T08:18:08.833
> 
> 标签：eclipse, apache-flex, flash-builder

它卡在启动画面上（或停靠图标有 3 或 4 条垂直线）。它没有过去，也没有错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T08:22:24.590

做了一些搜索，发现从工作区目录中删除 /.metadata/.plugins/org.eclipse.core.resources/.snap 文件解决了这个问题。

# css - 类下的 CSS id

> ID：11807063
> 
> 赞同：0
> 
> 时间：2012-08-04T08:18:45.580
> 
> 标签：css, styling

我想为菜单制作最简单的 CSS。有一个外部 div 和一个内部锚点。如果外部的类与内部的 id 相同，那将是活动样式。示例代码：

```
<div class='<?php echo $_GET['menu']; ?>'>
     <a href="index.php?menu=menu1" id='menu1'>Menu 1</a>
     <a href="index.php?menu=menu2" id='menu2'>Menu 2</a>
     <a href="index.php?menu=menu3" id='menu3'>Menu 3</a>
     <a href="index.php?menu=menu4" id='menu4'>Menu 4</a>
     <a href="index.php?menu=menu5" id='menu5'>Menu 5</a>
</div> 
```

而且我不想写很多CSS，比如：

```
.menu1 #menu1, .menu2 #menu2, .menu3 ....
{ /*active stlye*/} 
```

所以我想要以下内容：如果类名与它下的 id 相同，它将处于活动状态。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T08:28:06.053

你不能用 CSS 做到这一点；也许您可以改用 PHP 来完成一些接近的事情：

```
<?php for($i=1;$i<=5;$i++){ ?>
<a href="index.php?menu=menu<?php echo $i;?>" <?php if($_GET['menu'] == 'menu'.$i) echo 'class="selected"'; ?>>Menu <?php echo $i;?></a>
<?php } ?> 
```

和 CSS ：

```
 .selected{
/*active style*/
        } 
```

**编辑：**使用 PHP 的解决方案比基于 JS 的解决方案更好，因为：每个人都会看到 .selected 类，即使是为其他人停用了 JS 的人，菜单也不会闪烁。老实说，看到通过 JS 更改的菜单 CSS 是非常烦人的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T08:21:56.593

那是不可能的。CSS 不是一种编程语言，您必须完全指定每个[选择器](http://www.w3.org/TR/selectors/)。

但是由于您已经使用 PHP，如果您将类应用于您的锚标记之一会容易得多：

```
<div class='<?php echo $_GET['menu']; ?>'>
     <a href="index.php?menu=menu1" <?php echo $a_class[1]; ?> id='menu1'>Menu 1</a>
     <a href="index.php?menu=menu2" <?php echo $a_class[2]; ?> id='menu2'>Menu 2</a>
     <a href="index.php?menu=menu3" <?php echo $a_class[3]; ?> id='menu3'>Menu 3</a>
     <a href="index.php?menu=menu4" <?php echo $a_class[4]; ?> id='menu4'>Menu 4</a>
     <a href="index.php?menu=menu5" <?php echo $a_class[5]; ?> id='menu5'>Menu 5</a>
</div> 
```

您必须指定一堆选择器或将代码添加到您的 PHP 脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T08:27:02.797

假设我让你很好。那么答案可能是：

```
<div id="menu">
<?php
    for($i = 0; $i < 5; $i++) {
        if(isset($_GET['menu']) && $i == $_GET['menu'])
            echo "  <a href=\"index.php?menu=$i\" id=\"menu$i\" class=\"menu_active\">Menu $i</a>";
        else
            echo "  <a href=\"index.php?menu=$i\" id=\"menu$i\">Menu $i</a>";
    }
?>
</div> 
```

在你的 CSS

```
#menu a {
    /* Whatever you want for your normal links */
}

#menu .menu_active {
    /* Whatever you want for your active link */
} 
```

就是这样！

# c++ - 网络上的二进制编码

> ID：11807064
> 
> 赞同：-1
> 
> 时间：2012-08-04T08:19:02.720
> 
> 标签：c++, binary, ascii

我想知道是否所有形式的数据（文本和图像）都被翻译成 ASCII？

如果是这样，是否有任何库可以帮助我将二进制随机字符串或其他形式的数据（例如图像）解释为简单的英文单词？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T09:04:07.837

答案是否定的，并非所有形式的数据（文本和图像）都被翻译成 ASCII（可打印字符）。

有时二进制数据直接在 TCP 流和 UDP 数据报中发送（我假设这是我们正在谈论的抽象级别）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T08:27:07.353

您可以使用 base64 编码/解码 [http://www.base64decode.org/](http://www.base64decode.org/)

这取决于您使用的语言有很多开源： [链接](https://www.google.com.vn/webhp?sourceid=chrome-instant&ie=UTF-8&ion=1#hl=vi&sclient=psy-ab&q=base64+decode+library&oq=base64+decode+library&gs_l=serp.3..0i30j0i5i30l3.3036.4853.0.5059.10.9.1.0.0.0.514.1766.0j6j4-1j1.8.0...0.0...1c.14NIfrt-7cw&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=b2a3c4fc3ca0133a&biw=1366&bih=667&ion=1)

# objective-c - 在 GMGridView 中点击单元格时崩溃

> ID：11807066
> 
> 赞同：1
> 
> 时间：2012-08-04T08:19:45.047
> 
> 标签：objective-c, ios, xcode, gmgridview

我正在尝试使用该`GMGridView`库，一切正常，但是当我在一个单元格中点击时，应用程序在库的方法中崩溃并出现此错误：`[UILongPressGestureRecognizer hasRecognizedValidGesture]:`无法识别的选择器发送到实例...我试图添加“-ObjC -all_load " 其他链接器标志部分，但这给了我另一个库 ( `MWPhotoBrowser`) 的错误。有人解决了这个问题吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T08:21:45.000

您应该指定链接器标志：

```
-ObjC -all_load 
```

（[来源](https://github.com/gmoledina/GMGridView/issues/88)）。

如果您使用的是 Xcode 4.2 和 LLVM 3.0，`-ObjC`则只需。

有关为什么这是必要的解释，请查看[此 SO thread](https://stackoverflow.com/questions/2567498/objective-c-categories-in-static-library)。

[在此处查找](http://developer.apple.com/library/mac/#qa/qa1490/_index.html)在 Xcode 3 中设置链接器标志的步骤。在 Xcode 4 中，您必须选择目标，然后在右窗格中选择 Build Settings 选项卡。

# excel - 如何在10x10矩阵vba excel中找到每列的最小值

> ID：11807071
> 
> 赞同：0
> 
> 时间：2012-08-04T08:20:35.437
> 
> 标签：excel, vba

我需要一些帮助来找到我的 10x10 矩阵的每一列中的最小值。我的矩阵没有显示在电子表格中，所以我不能使用 worksheetfunction.min(cells(1,j),cells(10,j)) 例如。

另外，我想将包含最小值的单元格旁边的单元格替换为空白。

谢谢您的帮助

干杯

`for j=1 to n worst=application.worksheetfunction.min(c(1,j),c(2,j),c(3,j),c(4,j),c(5,j),c(6,j),c(7,j),c(8,j),c(9,j),c(10,j)) next j`

此代码运行良好，但如果我想更改矩阵的维度，它会导致问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T11:18:14.943

`UBound(c, 2)`将为您提供数组中的列数。

所以你的代码看起来像这样（根据[Doc Brown](https://stackoverflow.com/a/11807177/190829)的回答构建）：

```
For j = LBound(c, 2) To UBound(c, 2) ' columns
  worst = c(1, j)
  For i = LBound(c) To UBound(c) ' rows
    If c(i, j) < worst Then
      worst = c(i, j)
    End If
  Next i
  ' do something with 'worst' here
Next j 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T08:41:17.337

示例 VBA 代码（未经测试，只是在我的脑海中）：

```
for j=1 to n
 worst=c(1,j) 
 for i = 2 to 10  ' replace 10 by any other value you like
     if c(i,j)< worst then worst=c(i,j)
 next i
next j 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-05T19:16:31.797

以下是一些实际的时间安排，以便您了解为什么“避免循环”并不总是您正在寻找的胜利：

```
Sub Tester()
    Const NUM_REPS As Long = 10000
    Dim arr(1 To 10, 1 To 10)
    Dim r As Integer, c As Integer, t, l As Long, v, worst

    For r = 1 To 10
        For c = 1 To 10
            arr(r, c) = Rnd() * 10
        Next c
    Next r

    'worst (~5-6 sec)
    t = Timer
    For l = 1 To NUM_REPS
        worst = arr(1, 1)
        For c = 1 To 10
            v = Application.Min(Application.Index(arr, 0, c))
            If v < worst Then worst = v
        Next c
    Next l
    Debug.Print worst, Timer - t

    'better (0.4sec)
    t = Timer
    For l = 1 To NUM_REPS
        worst = Application.Min(arr)
    Next l
    Debug.Print worst, Timer - t

    '###best### (~0.05 sec)
    t = Timer
    worst = arr(1, 1)
    For l = 1 To NUM_REPS
        For r = 1 To 10
            For c = 1 To 10
                v = arr(r, c)
                If v < worst Then worst = v
            Next c
        Next r
    Next l
    Debug.Print worst, Timer - t

End Sub 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T17:53:35.810

**第一个答案**

这是我的第一个答案。我没有仔细阅读你的问题，也没有注意到你想要每列的最小值。我留下了这个答案，因为它可能仍然有价值。

一些工作表函数适用于数组。试试下面的代码。

最初，Test2 中的最小值是 1，而例程在两个不同的位置发现了该值。我从数组中删除了 1 并在最后添加了 51。然后该例程找到了 2。

我没有为这个程序计时，但如果它不比 VBA 快，我会感到惊讶。

```
Option Explicit
Sub Try()

  Dim InxT11 As Long
  Dim InxT12 As Long
  Dim InxT2 As Long

  Dim Test1(1 To 10, 1 To 5) As Long
  Dim Test2() As Variant

  Test2 = Array(5, 20, 27, 30, 45, 50, 4, 15, 32, 33, 47, 49, 3, 11, 12, _
                21, 34, 40, 2, 10, 13, 18, 19, 24, 25, 26, 36, 42, 43, 44, _
                6, 7, 17, 31, 39, 41, 8, 9, 14, 16, 22, 23, 28, 29, 35, 37, _
                38, 46, 48, 51)

  InxT2 = LBound(Test2)
  For InxT11 = LBound(Test1, 1) To UBound(Test1, 1)
    For InxT12 = LBound(Test1, 2) To UBound(Test1, 2)
      Test1(InxT11, InxT12) = Test2(InxT2)
      InxT2 = InxT2 + 1
    Next
  Next

  Debug.Print WorksheetFunction.Min(Test1)

End Sub 
```

**第二个答案**

对于这个答案，我使用了参差不齐或参差不齐的数组。对于参差不齐的数组，每行可以有不同数量的列。我所有的行都是相同的长度，但它们可能是不同的长度，而代码没有显着变化。

我已经定义`Test`为一个固定大小的变体数组。它也可以很容易地成为动态的。

变体或变体数组的元素可以是数组。我已将每个元素设置`Test`为一个五元素数组。

循环将每行的最小值显示为字符串：5 4 3 2 13 26 6 8 22 37。

您要求每列的最小值，但我想不出一种方法（除了 VBA 循环）可以实现这一点。如果您喜欢这种方法，则必须将列设为第一个维度，将行设为第二个维度。

注意：访问不规则数组元素的语法是不同的。这是：

```
Debug.Print Test(InxD1)(InxD2) 
```

希望这可以帮助。

```
Option Explicit
Sub Try2()

  Dim InxT As Long

  Dim Test(1 To 10) As Variant

  Test(1) = Array(5, 20, 27, 30, 45)
  Test(2) = Array(50, 4, 15, 32, 33)
  Test(3) = Array(47, 49, 3, 11, 12)
  Test(4) = Array(21, 34, 40, 2, 10)
  Test(5) = Array(13, 18, 19, 24, 25)
  Test(6) = Array(26, 36, 42, 43, 44)
  Test(7) = Array(6, 7, 17, 31, 39)
  Test(8) = Array(41, 8, 9, 14, 16)
  Test(9) = Array(22, 23, 28, 29, 35)
  Test(10) = Array(37, 38, 46, 48, 51)

  For InxT = LBound(Test) To UBound(Test)
    Debug.Print WorksheetFunction.Min(Test(InxT)) & " ";
  Next
  Debug.Print

  Debug.Print Test(1)(2)

End Sub 
```

# python - 金字塔复选框

> ID：11807073
> 
> 赞同：6
> 
> 时间：2012-08-04T08:20:49.260
> 
> 标签：python, checkbox, pyramid

我只是 python 和金字塔的新手，我正在努力解决如何处理 Pyramid 中包含多个复选框的表单的结果。

这是我的表格的摘录：

```
<p tal:repeat="category categories">
    <input type="checkbox" name="selectedcategories" value="${category.id}"> ${category.name}<br/>
</p> 
```

以下是我目前尝试迭代和处理结果的方式：

```
selectedcategories=request.params['selectedcategories']    
for categoryid in selectedcategories:
        category = DBSession.query(Category).filter_by(id=categoryid).one()
        article.categories.append(category) 
```

正如您可能已经猜到的那样，无论我在表单上选择了多少个复选框，我最多只能识别一个复选框。Django 可以选择将结果作为列表返回，但我似乎无法弄清楚如何使用 Pyramid 做到这一点。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T08:32:19.207

`request.params`是一个[multidict](http://docs.pylonsproject.org/projects/pyramid/en/latest/narr/webob.html#multidict-narr)。要检索多个值，可以调用它的[getall()](http://docs.pylonsproject.org/projects/pyramid/en/latest/api/interfaces.html#pyramid.interfaces.IMultiDict.getall)方法：

```
selectedcategories = request.params.getall("selectedcategories") 
```

# java - 这段涉及 xor 的代码实际上是如何工作的？

> ID：11807075
> 
> 赞同：2
> 
> 时间：2012-08-04T08:20:56.887
> 
> 标签：java, algorithm, bit-manipulation, bitwise-operators

我有一个代表 2 个数字的 XOR 的变量。例如：`int xor = 7 ^ 2;`
我正在研究根据注释找到 XOR 中设置的最右边位的代码：

`int rightBitSet = xor & ~(xor - 1);`

我无法理解这段代码究竟是如何工作的。我的意思是，在这种情况下，`7^2`它确实会设置`rightBitSet`为`0001`（二进制），即 1。（确实是最右边的位）
但是如果`xor`是，`7^3`那么将`rightBitSet`设​​置为`0100`ie `4`，这也是与`xor`（并且不是最右边的位）相同的值放）。
代码的逻辑是在组成的数字之间找到一个代表不同位的数字，`xor`尽管注释表明它找到了最正确的位集，但在我看来，代码找到了一个具有 1 个不同位的位模式在任何地方。
我对么？我也不确定代码是如何工作的。似乎数字`X`和数字之间存在某种关系`X-1`在它的二进制表示？
这是什么关系？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T08:39:52.833

二进制数减 1 的效果是将其中最低有效的 1 替换为 0，并将所有低有效位设置为 1。例如：

```
5 - 1 = 101 - 1 = 100 = 4
4 - 1 = 100 - 1 = 011 = 3
6 - 1 = 110 - 1 = 101 = 5 
```

所以在评估`x & ~(x - 1)`: above`x`的最低有效 1 时，`~(x - 1)`具有与 相同的设置位`~x`，因此 above`x`的最低有效 1`x & ~(x-1)`没有 1 位。根据定义，`x`在其最低有效 1 处有 1 位，正如我们在上面看到的那样，也会有`~(x - 1)`，但`~(x - 1)`在该点以下会有 0。因此，`x & ~(x - 1)`将只有一个 1 位，至少是 的最低有效位`x`。

# iphone - 以编程方式将视频从 iphone 流式传输到服务器

> ID：11807076
> 
> 赞同：1
> 
> 时间：2012-08-04T08:21:01.600
> 
> 标签：iphone, objective-c, ios, streaming, mpmovieplayercontroller

我需要实现 iphone 视频流到服务器。我用谷歌搜索了很多，但我发现只从服务器接收视频流。它是使用 UIWebView 或 MPMoviewPlayer 制作的。但是如何将捕获的媒体实时流式传输到服务器？怎么做到呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T08:43:15.677

查看此 Apple 示例代码。这是使用 AVFoundation。

[缝合流播放器](https://developer.apple.com/library/archive/samplecode/StitchedStreamPlayer/Introduction/Intro.html)

# android - StringBuilder 中的奇怪 ANR

> ID：11807084
> 
> 赞同：-1
> 
> 时间：2012-08-04T08:22:12.037
> 
> 标签：android, string, android-anr-dialog

来自 Android 开发者控制台的 ANR 堆栈：

```
DALVIK THREADS:
(mutexes: tll=0 tsl=0 tscl=0 ghl=0 hwl=0 hwll=0)
"main" prio=5 tid=1 SUSPENDED
  | group="main" sCount=1 dsCount=0 obj=0x40022198 self=0xcec8
  | sysTid=15809 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=-1345006496
  | schedstat=( 105169616659 16803131154 25724 )
  at java.lang.String._getChars(String.java:~1041)
  at java.lang.AbstractStringBuilder.<init>(AbstractStringBuilder.java:89)
  at java.lang.StringBuilder.<init>(StringBuilder.java:96)
  at org.nkuznetsov.onlineradio.FavoriteList.save(FavoriteList.java:37)
  at org.nkuznetsov.onlineradio.FavoriteList.add(FavoriteList.java:60)
  at org.nkuznetsov.onlineradio.RadioActivity$OnFavoriteChangeListener.onCheckedChanged(RadioActivity.java:289)
  at android.widget.CompoundButton.setChecked(CompoundButton.java:124)
  at android.widget.CompoundButton.toggle(CompoundButton.java:86)
  at android.widget.CompoundButton.performClick(CompoundButton.java:98)
  at android.view.View$PerformClick.run(View.java:9080)
  at android.os.Handler.handleCallback(Handler.java:587)
  at android.os.Handler.dispatchMessage(Handler.java:92)
  at android.os.Looper.loop(Looper.java:130)
  at android.app.ActivityThread.main(ActivityThread.java:3687)
  at java.lang.reflect.Method.invokeNative(Native Method)
  at java.lang.reflect.Method.invoke(Method.java:507)
  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
  at dalvik.system.NativeStart.main(Native Method)

"Binder Thread #3" prio=5 tid=9 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x40526f60 self=0x194808
  | sysTid=15817 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=1788936
  | schedstat=( 2014164 15899659 17 )
  at dalvik.system.NativeStart.run(Native Method)

"AsyncTask #1" prio=5 tid=8 WAIT
  | group="main" sCount=1 dsCount=0 obj=0x40524388 self=0x19d380
  | sysTid=15816 nice=10 sched=0/0 cgrp=[fopen-error:2] handle=1693616
  | schedstat=( 1090911877 313018788 393 )
  at java.lang.Object.wait(Native Method)
  - waiting on <0x40524560> (a java.lang.VMThread)
  at java.lang.Thread.parkFor(Thread.java:1424)
  at java.lang.LangAccessImpl.parkFor(LangAccessImpl.java:48)
  at sun.misc.Unsafe.park(Unsafe.java:337)
  at java.util.concurrent.locks.LockSupport.park(LockSupport.java:157)
  at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2016)
  at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:411)
  at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1021)
  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1081)
  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
  at java.lang.Thread.run(Thread.java:1019)

"Binder Thread #2" prio=5 tid=7 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x405150e0 self=0x15eed8
  | sysTid=15815 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=1413168
  | schedstat=( 2929685 26489259 22 )
  at dalvik.system.NativeStart.run(Native Method)

"Binder Thread #1" prio=5 tid=6 NATIVE
  | group="main" sCount=1 dsCount=0 obj=0x40514aa8 self=0x16bad8
  | sysTid=15814 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=1159936
  | schedstat=( 5920410 23956299 25 )
  at dalvik.system.NativeStart.run(Native Method)

"Compiler" daemon prio=5 tid=5 VMWAIT
  | group="system" sCount=1 dsCount=0 obj=0x405110a0 self=0x16b9a0
  | sysTid=15813 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=1239400
  | schedstat=( 207977297 25329589 821 )
  at dalvik.system.NativeStart.run(Native Method)

"Signal Catcher" daemon prio=5 tid=4 RUNNABLE
  | group="system" sCount=0 dsCount=0 obj=0x40510fe0 self=0x12e7a8
  | sysTid=15812 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=1238888
  | schedstat=( 5798340 8666992 14 )
  at dalvik.system.NativeStart.run(Native Method)

"GC" daemon prio=5 tid=3 VMWAIT
  | group="system" sCount=1 dsCount=0 obj=0x40510f38 self=0x178360
  | sysTid=15811 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=1413104
  | schedstat=( 139343257 133178717 75 )
  at dalvik.system.NativeStart.run(Native Method)

"HeapWorker" daemon prio=5 tid=2 SUSPENDED
  | group="system" sCount=1 dsCount=0 obj=0x40510e80 self=0x178228
  | sysTid=15810 nice=0 sched=0/0 cgrp=[fopen-error:2] handle=1160864
  | schedstat=( 612121568 1730712888 15455 )
  at dalvik.system.NativeStart.run(Native Method) 
```

据我了解，org.nkuznetsov.onlineradio.FavoriteList.save(FavoriteList.java:37) 方法的主线程中存在问题。

在 FavoriteList.save() 中，我只是从字符串集合中连接字符串并将 ti 写入共享首选项。

FavoriteList 类的来源在这里：[https ://code.google.com/p/android-online-radio/source/browse/trunk/src/org/nkuznetsov/onlineradio/FavoriteList.java](https://code.google.com/p/android-online-radio/source/browse/trunk/src/org/nkuznetsov/onlineradio/FavoriteList.java)

为什么 ANR 会出现一段时间？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T09:46:48.780

如果它给你一个 ANR 并且它是你不等待在另一个线程上完成的方法：

```
 private static void save(final Vector<String> favorites)
    {

         new Thread()
            public void run(){
              String tmpFav = new String();

              if (favorites.size() > 0)
              {
                    tmpFav = String.valueOf(favorites.get(0));

                    for (int i = 1; i < favorites.size(); i++)
                    {
                            tmpFav += FAVORITES_SEPARATOR;
                            tmpFav += favorites.get(i);
                    }
              }

              SharedPreferences.Editor editor = preferences.edit();

              if (tmpFav.equals(new String())) editor.remove(FAVORITES_KEY);
              else editor.putString(FAVORITES_KEY, tmpFav);

              editor.commit();
           }
        }.start();
    } 
```

当您下次访问其他方法时，您只需要记住保存可能尚未完成。

如果它是字符串向量，则无需询问字符串值：

```
 tmpFav = favorites.get(0); 
```

同样检查字符串是否为空也更清楚，如下所示：

```
 if ("".equals(tmpFav)) editor.remove(FAVORITES_KEY) 
```

我也会使用 StringBuilder 而不是串联。

```
 StringBuilder b = new StringBuilder();
    b.append(FAVOURITES_SEPARATOR);
    b.append(favorites.get(i);
    String tmpFav = b.toString(); 
```

如果你选择线程选项要小心，你可能想看看[Java 同步方法](http://docs.oracle.com/javase/tutorial/essential/concurrency/syncmeth.html)

# asp.net - 回发在 Windows 7 的 Safari 中不起作用

> ID：11807086
> 
> 赞同：1
> 
> 时间：2012-08-04T08:22:18.413
> 
> 标签：asp.net, windows-7, safari, postback, viewstate

我们的 QA 团队报告说，我们的一个应用程序在 Windows 7 的 Safari 中无法运行。在检查问题后，我们发现任何回发事件都无法运行。经过一些尝试，我们发现 Page.IsPostback() 报告错误，并认为这是页面的首次加载，并且回发不包括 ViewState。

我们尝试了许多解决方案，包括
[Windows 7 上 Safari 中的 ViewState 的 ASP.Net 回发问题](http://www.ablemods.com/Blog/post/2012/07/20/ASPNet-postback-problem-with-ViewState-in-Safari-on-Windows-7.aspx)
[Viewstate invalid when using Safari](https://stackoverflow.com/questions/1189/viewstate-invalid-when-using-safari)
[ViewState Chunking in ASP.NET 2.0 (maxPageStateFieldLength)](http://weblogs.asp.net/lduveau/archive/2007/04/17/viewstate-chunking-in-asp-net-2-0-maxpagestatefieldlength.aspx)

但所有这些都没有让 Safari 正常工作。

这个应用程序没有什么特别之处。普通页面使用一个非常普通的母版页。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T17:57:39.313

如果启用了协商提供程序，则 Safari 在 IIS 下使用 Windows 身份验证时会出现问题，因此 AJAX POST 无法正常工作。

**如何解决？**
在 IIS 中，转到您网站的身份验证设置。右键单击 Windows 身份验证，选择提供程序并删除协商，留下 NTLM，这会使一切正常。

**[参考]**
[AJAX POST Request Only Works Once in Safari 5](https://stackoverflow.com/questions/7613196/ajax-post-request-only-works-once-in-safari-5)
[Negotiate Mechanism](http://en.wikipedia.org/wiki/SPNEGO)维基百科文章显示在 Safari 中没有实现

# css - 如果浏览器支持 CSS3 媒体查询和 CSS3 渐变，我如何通过 JavaScript 检测？

> ID：11807088
> 
> 赞同：2
> 
> 时间：2012-08-04T08:22:29.323
> 
> 标签：css, media-queries, gradient

如果浏览器支持 CSS3 媒体查询，我如何通过 JavaScript 检测？

如果浏览器支持 CSS3 渐变，我如何通过 JavaScript 检测？

谢谢你。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-06-19T23:34:11.423

破解打开的[Modernizr](http://modernizr.com/)（可以测试媒体查询），我们看到它使用了`window.matchMedia`（[MDN 页面](https://developer.mozilla.org/en-US/docs/Web/API/window.matchMedia)）功能。我们可以在普通的旧版 JS 中检查这个函数是否存在（Modernizr*真的*很棒，但有时你只想要一块砖，而不是房子）：

```
function mediaQueriesSupported()
{
    if(typeof window.matchMedia != "undefined" || typeof window.msMatchMedia != "undefined")
    {
        // alert("media queries are supported!");
        return true;
    }else{
        // alert("no media query support :(");
        return false;
    }
} 
```

或者更优雅：

```
function mediaQueriesSupported()
{
    return (typeof window.matchMedia != "undefined" || typeof window.msMatchMedia != "undefined");
} 
```

[JSFiddle](http://jsfiddle.net/PzegV/10/)

我在以下支持媒体查询的浏览器中进行了测试，均正确返回 true：

*   Safari 移动版
*   铬 26

我在以下不支持媒体查询的浏览器中进行了测试，都正确返回了 false：

*   即 7

至于梯度支持检测，[这里](https://stackoverflow.com/questions/10853507/simple-css-gradient-detection)和[这里](https://stackoverflow.com/questions/2253519/can-you-test-for-browser-support-for-moz-linear-gradient)有一些很好的答案。实际上，您只是在设置属性，然后在事后对其进行测试。浏览器会丢弃垃圾或不受支持的 CSS 属性。

**编辑：**

Niet 在[这里](https://stackoverflow.com/questions/13665697/i-need-an-easy-way-to-detect-css3-media-query-support-using-jquery/17203032#17203032)对这个问题有一个很好的答案，类似于我对梯度检测的建议。它不是纯 Javascript（它需要非常少量的 CSS），但它绝对是一种万无一失的方法。

# java - 使用 IntelliJ IDEA 运行 JUnit 测试 - “java.security.AccessControlException”

> ID：11807091
> 
> 赞同：5
> 
> 时间：2012-08-04T08:23:02.770
> 
> 标签：java, unit-testing, junit, intellij-idea

我正在尝试使用 IntelliJ Idea 11.1 运行 JUnit 测试。但是测试给出了不同的 AccessControlExceptions。其中之一如下。但是这些测试在 Eclipse 中运行没有问题。

```
Exception in thread "main" java.security.AccessControlException: access denied (java.lang.RuntimePermission setIO)
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:374)
    at java.security.AccessController.checkPermission(AccessController.java:546)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
    at java.lang.System.checkIO(System.java:225)
    at java.lang.System.setOut(System.java:147)
    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:202)
    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:63)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

我是否需要为 IDEA 测试运行器设置某种特殊权限？如果有怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-07-21T13:40:18.980

我自己也遇到了这个问题，为了至少让事情运行起来，我复制了`java.policy`文件`<jdk>/jre/lib/security`并在默认情况下添加了以下权限，`grant`以使测试在 IntelliJ IDEA 2016.2 下运行：

```
 // To get tests working under IntelliJ 2016.2
    permission java.util.PropertyPermission "idea.launcher.bin.path", "read";
    permission java.lang.RuntimePermission "loadLibrary.C:\\Program Files (x86)\\JetBrains\\IntelliJ IDEA 2016.2\\bin\\breakgen64.dll";
    permission java.util.PropertyPermission "idea.launcher.port", "read";
    permission java.lang.reflect.ReflectPermission "suppressAccessChecks";
    permission java.util.PropertyPermission "idea.is.junit5", "read";
    permission java.net.SocketPermission "127.0.0.1:*", "connect,resolve";
    permission java.util.PropertyPermission "user.home", "read";
    permission java.io.FilePermission "C:\\Users\\Mark\\junit.properties", "read";
    permission java.lang.RuntimePermission "setIO";
    permission java.io.FilePermission "C:\\Users\\Mark\\AppData\\Local\\Temp\\*", "read";
    permission java.lang.RuntimePermission "accessDeclaredMembers"; 
```

您将需要更改一些路径以满足您的特定用户需求。通过这些更改，我还没有完全完成：我似乎仍然缺少一些特定于我自己的代码的权限（特别是：从我自己的代码中读取一些属性文件）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-03-29T08:58:57.877

创建一个包含内容的文件 C:\utils\grant_all.policy

```
// Grant everyone all permissions:
grant {
 permission java.security.AllPermission;
}; 
```

并[在 IntelliJ 中添加调试配置](https://i.stack.imgur.com/8MIBk.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-23T15:12:51.080

由于我并不热衷于授予 JVM 上的所有权限，因此我更新了 Mark Rotteveel 解决方案以允许在 IntelliJ 中进行调试。它只需要 3 个额外的权限：

```
permission java.util.PropertyPermission "idea.launcher.bin.path", "read";
    permission java.lang.RuntimePermission "loadLibrary.C:\\Program Files\\JetBrains\\IntelliJ IDEA Community Edition 2019.2\\bin\\breakgen64.dll";
    permission java.util.PropertyPermission "idea.launcher.port", "read";
    permission java.lang.reflect.ReflectPermission "suppressAccessChecks";
    permission java.util.PropertyPermission "idea.is.junit5", "read";
    permission java.net.SocketPermission "127.0.0.1:*", "connect,resolve";
    permission java.util.PropertyPermission "user.home", "read";
    permission java.io.FilePermission "C:\\Users\\David\\junit.properties", "read";
    permission java.lang.RuntimePermission "setIO";
    permission java.io.FilePermission "C:\\Users\\David\\AppData\\Local\\Temp\\*", "read";
    permission java.lang.RuntimePermission "accessDeclaredMembers";

    // Additional properties needed to allow debugging in IntelliJ
    permission java.io.FilePermission "C:\\Program Files\\JetBrains\\IntelliJ IDEA Community Edition 2019.2\\bin\\breakgen64.dll", "read";
    permission java.util.PropertyPermission "intellij.debug.agent", "read";
    permission java.util.PropertyPermission "intellij.debug.agent", "write"; 
```

# javascript - javascript中的typeof（）函数错误

> ID：11807092
> 
> 赞同：0
> 
> 时间：2012-08-04T08:23:11.530
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [JavaScript 中是否有（内置）方法来检查字符串是否为有效数字？](https://stackoverflow.com/questions/175739/is-there-a-built-in-way-in-javascript-to-check-if-a-string-is-a-valid-number)

我在 HTML 中有一个输入搜索栏

```
<form class="form-inline" action="javascript:displayResult()">          
    <input id="searchKey" >
    <button onclick="result()" type="button" class="btn btn-warning btn ">
          Go
    </button>                   
</form> 
```

这是Javascript函数

```
function result() {     
    search($('#searchKey').val());    

    if(typeof(searchKey)=="number") { // checking if this is a number
       someFunction();
    }
}; 
```

问题是，对于搜索栏中的每个条目，我都将值作为字符串获取，即使它在搜索栏中是“hello”或 9789。我曾经`alert(typeof(searchKey));`验证过，它总是将类型返回为字符串

我试图在搜索栏中区分数字和字符串，我确信有更好的方法可以做到这一点，但我不确定为什么这不起作用

我不能使用 parseInt() 因为我需要动态区分文本和数字

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T08:26:59.910

a 的值`<input type="text">`始终是一个字符串。但是，您可以使用 将其解析为数字`parseInt`。它将导致`NaN`如果不能从字符串中解析出数字。不要忘记你必须使用[`isNaN`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/isNaN)它，因为`myNumber === NaN`它不是一个有效的操作。

更好的是，使用`isNaN(+searchKey)`，因为一元操作数将调用`ToNumber`。但是，这将忽略空格。

> ### 9.3.1 ToNumber 应用于字符串类型
> 
> 应用于字符串的 ToNumber 将以下语法应用于输入字符串。如果语法不能将 String 解释为 StringNumericLiteral 的扩展，则 ToNumber 的结果为 NaN。
> 
> [有关实际规则，请参见[http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf ]](http://www.ecma-international.org/publications/files/ECMA-ST/Ecma-262.pdf)

* * *

> ### 11.4.6 一元+运算符
> 
> 一元 + 运算符将其操作数转换为 Number 类型。产生式 UnaryExpression : + UnaryExpression 的评估如下：
> 
> 1.  令 expr 为计算 UnaryExpression 的结果。
> 2.  返回 ToNumber(GetValue(expr))。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T08:27:41.533

文本输入字段始终包含一个`string`值。尝试`if (!isNaN(searchKey))`测试数值。或者，您可以使用正则表达式：`/^\d+$/.test(searchKey)`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-04T08:27:41.517

利用

```
if(!isNaN(searchKey)) 
```

代替

```
if(typeof(searchKey)=="number") 
```

# java - 我已包含提交按钮，但信息发送到另一个页面而不考虑提交按钮

> ID：11807104
> 
> 赞同：0
> 
> 时间：2012-08-04T08:26:27.900
> 
> 标签：java, jsp, servlets

在我的项目[http://pastebin.com/3LBRZBQe](http://pastebin.com/3LBRZBQe)中，我使用了一个提交按钮，当我单击它时应该可以工作，但没有任何单击打开下一页.....我的数据库中有 30 个条目，我必须显示在一个网页，首先应显示前 10 个条目，然后单击下一步按钮后应显示另外 10 个条目，依此类推......但是当我运行程序时，显示最后 10 个条目......我想使用 requestDispatcher 方法，以便信息应该发送到另一个 jsp 页面....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T08:47:48.787

您可以使用 add`parameters`来定义请求记录数的范围，并在下一页获取这些`parameters`

喜欢：

```
 /next?start=1&end=10 
```

在下一页：

```
request.getParameter("start");
request.getParameter("end"); 
```

和同样的进一步......

# debian - 上传 ssh/ftp 中的木马测试

> ID：11807105
> 
> 赞同：1
> 
> 时间：2012-08-04T08:26:30.817
> 
> 标签：debian, trojan

我们昨天在我们的 debian lenny 服务器上上传了一个木马。修复几个站点 + 本地 PC 花费了 6 个小时。在本地电脑的 1 台上，我发现防火墙被设置为禁用。这台电脑也感染了这个木马：JS/BlacoleRef.W 为什么这台电脑有一个到我们服务器的ftp帐户？每天将运输跟踪上传到服务器 + 每周上传新的时事通讯。

问题：服务器上是否有现有的解决方案来测试所有 ftp/ssh 上传。这应该对我们很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T10:18:42.413

显然，首先要做的是保持**所有**机器的清洁，甚至是客户端。

### FTP

这取决于您使用的守护程序。通常不会对上传的内容进行服务器端扫描，但[proftpd](http://www.proftpd.org/)具有模块化架构，您可以编写 mod_content_checker 来检查上传并拒绝不符合您的策略的文件。

您也可以使用`clamv`.

### SSH / rsync

您可以对扫描文件的脚本使用[强制命令。](http://www.eng.cam.ac.uk/help/jpmg/ssh/authorized_keys_howto.html)

但要保持**所有**机器清洁。

# wpf - Outlook 加载项 + WPF

> ID：11807106
> 
> 赞同：3
> 
> 时间：2012-08-04T08:26:36.407
> 
> 标签：wpf, wpf-controls, outlook-addin

有谁知道如何在 Outlook 加载项中使用 WPF，我已经阅读了一些博客文章，我意识到可以在 Outlook 加载项项目中添加 WPF 控件。我只想在 Outlook 加载项中托管一个完整的 WPF 应用程序。很简单，当单击 Outlook 功能区按钮时，它应该打开一个 WPF 应用程序，而不是 Windows 窗体中托管的 WPF 控制器，可以这样做吗？

编辑答案：

要在 Outlook 加载项项目中使用 WPF，首先将 WCF 用户控制器添加到项目中，并将 .XAML 文件和 .CS 文件中的“用户控制器”更改为“窗口”。然后你就完成了，你可以用 WCF 做任何你想做的事情。改变这个>>

```
<UserControl x:Class="AccessCachedContactsTest.UserControl2"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
<Grid>

</Grid>
</UserControl> 
```

到这里>>

```
<Window x:Class="AccessCachedContactsTest.UserControl2"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="300" d:DesignWidth="300">
<Grid>

</Grid>
</Window> 
```

并将 .xaml.cs 文件的根类更改为“Window”。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T07:59:06.530

要在 Outlook 加载项项目中使用 WPF，首先将 WPF 用户控件添加到项目中，并将 .XAML 文件和 .CS 文件中的“用户控件”更改为“窗口”。然后你就完成了，你可以用 WPF 做任何你想做的事情。改变这个>>

```
<UserControl x:Class="AccessCachedContactsTest.UserControl2"
     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
     xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
     xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
     mc:Ignorable="d" 
     d:DesignHeight="300" d:DesignWidth="300">
     <Grid>

    </Grid>
</UserControl> 
```

到这里>>

```
<Window x:Class="AccessCachedContactsTest.UserControl2"
     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
     xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
     xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
     mc:Ignorable="d" 
     d:DesignHeight="300" d:DesignWidth="300">
<Grid>

</Grid>
</Window> 
```

并将 .xaml.cs 文件的根类更改为“Window”。

# php - PHP 将 KB MB GB TB 等转换为字节

> ID：11807115
> 
> 赞同：12
> 
> 时间：2012-08-04T08:27:42.497
> 
> 标签：php, byte, type-conversion

我在问如何转换 KB MB GB TB & co。成字节。
例如：

```
byteconvert("10KB") // => 10240
byteconvert("10.5KB") // => 10752
byteconvert("1GB") // => 1073741824
byteconvert("1TB") // => 1099511627776 
```

等等...

编辑：哇。4年前我问过这个问题。这种事情真的会告诉你随着时间的推移你有多大的进步！

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-08-04T08:41:24.293

这是实现此目的的功能：

```
function convertToBytes(string $from): ?int {
    $units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB'];
    $number = substr($from, 0, -2);
    $suffix = strtoupper(substr($from,-2));

    //B or no suffix
    if(is_numeric(substr($suffix, 0, 1))) {
        return preg_replace('/[^\d]/', '', $from);
    }

    $exponent = array_flip($units)[$suffix] ?? null;
    if($exponent === null) {
        return null;
    }

    return $number * (1024 ** $exponent);
}

$testCases = ["13", "13B", "13KB", "10.5KB", "123Mi"];
var_dump(array_map('convertToBytes', $testCases)); 
```

输出：

> 数组(5) { [0]=> int(13) [1]=> int(13) [2]=> int(13312) [3]=> int(10752) [4]=> NULL } int( 1)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-06-28T12:03:27.867

```
function toByteSize($p_sFormatted) {
    $aUnits = array('B'=>0, 'KB'=>1, 'MB'=>2, 'GB'=>3, 'TB'=>4, 'PB'=>5, 'EB'=>6, 'ZB'=>7, 'YB'=>8);
    $sUnit = strtoupper(trim(substr($p_sFormatted, -2)));
    if (intval($sUnit) !== 0) {
        $sUnit = 'B';
    }
    if (!in_array($sUnit, array_keys($aUnits))) {
        return false;
    }
    $iUnits = trim(substr($p_sFormatted, 0, strlen($p_sFormatted) - 2));
    if (!intval($iUnits) == $iUnits) {
        return false;
    }
    return $iUnits * pow(1024, $aUnits[$sUnit]);
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-07-10T12:26:16.527

到目前为止，这是我想出的，我认为这是一个更优雅的解决方案：

```
/**
 * Converts a human readable file size value to a number of bytes that it
 * represents. Supports the following modifiers: K, M, G and T.
 * Invalid input is returned unchanged.
 *
 * Example:
 * <code>
 * $config->human2byte(10);          // 10
 * $config->human2byte('10b');       // 10
 * $config->human2byte('10k');       // 10240
 * $config->human2byte('10K');       // 10240
 * $config->human2byte('10kb');      // 10240
 * $config->human2byte('10Kb');      // 10240
 * // and even
 * $config->human2byte('   10 KB '); // 10240
 * </code>
 *
 * @param number|string $value
 * @return number
 */
public function human2byte($value) {
  return preg_replace_callback('/^\s*(\d+)\s*(?:([kmgt]?)b?)?\s*$/i', function ($m) {
    switch (strtolower($m[2])) {
      case 't': $m[1] *= 1024;
      case 'g': $m[1] *= 1024;
      case 'm': $m[1] *= 1024;
      case 'k': $m[1] *= 1024;
    }
    return $m[1];
  }, $value);
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-01-15T02:59:13.993

我使用一个函数来确定在一些 cron 脚本中为 PHP 设置的内存限制，如下所示：

```
$memoryInBytes = function ($value) {
    $unit = strtolower(substr($value, -1, 1));
    return (int) $value * pow(1024, array_search($unit, array(1 =>'k','m','g')));
} 
```

一种类似的方法可以更好地使用浮点数并接受两个字母的缩写，例如：

```
function byteconvert($value) {
    preg_match('/(.+)(.{2})$/', $value, $matches);
    list($_,$value,$unit) = $matches;
    return (int) ($value * pow(1024, array_search(strtolower($unit), array(1 => 'kb','mb','gb','tb'))));
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-05T01:59:35.150

```
<?php
function byteconvert($input)
{
    preg_match('/(\d+)(\w+)/', $input, $matches);
    $type = strtolower($matches[2]);
    switch ($type) {
    case "b":
        $output = $matches[1];
        break;
    case "kb":
        $output = $matches[1]*1024;
        break;
    case "mb":
        $output = $matches[1]*1024*1024;
        break;
    case "gb":
        $output = $matches[1]*1024*1024*1024;
        break;
    case "tb":
        $output = $matches[1]*1024*1024*1024;
        break;
    }
    return $output;
}
$foo = "10mb";
echo "$foo = ".byteconvert($foo)." byte";
?> 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-05-28T13:44:34.660

想要类似的东西并且由于各种原因不太喜欢这里发布的其他解决方案，我决定编写自己的函数：

```
function ConvertUserStrToBytes($str)
{
    $str = trim($str);
    $num = (double)$str;
    if (strtoupper(substr($str, -1)) == "B")  $str = substr($str, 0, -1);
    switch (strtoupper(substr($str, -1)))
    {
        case "P":  $num *= 1024;
        case "T":  $num *= 1024;
        case "G":  $num *= 1024;
        case "M":  $num *= 1024;
        case "K":  $num *= 1024;
    }

    return $num;
} 
```

它采用了 Al Jey（空白处理）和 John V（switch-case）在此提出的一些想法，但没有正则表达式，不调用 pow()，让 switch-case 在没有中断时执行其操作，并且可以处理一些奇怪的用户输入（例如，“123 wonderful KB”的结果为 125952）。我确信有一个更优化的解决方案，它涉及更少的指令，但代码会不那么干净/可读。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-01-14T20:39:19.737

基于[https://stackoverflow.com/a/17364338/1041470](https://stackoverflow.com/a/17364338/1041470)

改进：

*   修复了字节后缀长度的错误，
*   允许使用双（浮点）值，但只能使用整数，
*   包含单位的还原数组，
*   重命名变量，
*   添加了评论。

```
/**
 * Converts human readable file size into bytes.
 *
 * Note: This is 1024 based version which assumes that a 1 KB has 1024 bytes.
 * Based on https://stackoverflow.com/a/17364338/1041470
 *
 * @param string $from
 *   Required. Human readable size (file, memory or traffic).
 *   For example: '5Gb', '533Mb' and etc.
 *   Allowed integer and float values. Eg., 10.64GB.
 *
 * @return int
 *   Returns given size in bytes.
 */
function cm_common_convert_to_bytes(string $from): ?int {
  static $units = ['B', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];
  $from = trim(check_plain($from));
  // Get suffix.
  $suffix = strtoupper(trim(substr($from, -2)));
  // Check one char suffix 'B'.
  if (intval($suffix) !== 0) {
    $suffix = 'B';
  }
  if (!in_array($suffix, $units)) {
    return FALSE;
  }
  $number = trim(substr($from, 0, strlen($from) - strlen($suffix)));
  if (!is_numeric($number)) {
    // Allow only float and integer. Strings produces '0' which is not corect.
    return FALSE;
  }
  return (int) ($number * pow(1024, array_flip($units)[$suffix]));
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-10-25T01:56:10.687

我只是在寻找这个函数，并接受了挑战，试图改进它并将它变成两行:) 使用与 Eugene 类似的正则表达式来验证/提取值，但避免使用 switch 语句。可以接受长 '10MB'、'10mb' 和短 '10M'、'10m' 值、十进制值并始终返回整数。无效的字符串返回 0

```
function to_bytes( $str )
{
    if( ! preg_match('/^([\d.]+)([BKMGTPE]?)(B)?$/i', trim($str), $m) ) return 0;
    return (int) floor($m[1] * ( $m[2] ? (1024**strpos('BKMGTPE', strtoupper($m[2]))) : 1 ));
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-12-12T19:34:54.900

我知道这是一个相对古老的话题，但是当我需要这种东西时，我有时不得不使用这个功能；如果功能不起作用，您可以原谅，我在手机上写了这个：

```
function intobytes($bytes, $stamp = 'b') {
    $indx = array_search($stamp, array('b', 'kb', 'mb', 'gb', 'tb', 'pb', 'yb'));
    if ($indx > 0) {
        return $bytes * pow(1024, $indx);
    }
    return $bytes;
} 
```

和紧凑

```
function intobytes($bytes, $stamp='b') {$indx=array_search($stamp,array('b','kb','mb','gb','tb','pb','yb'));if($indx > 0){return $bytes * pow(1024,$indx);} return $bytes;} 
```

小心！

布罗德85 ;)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-01-20T08:35:31.103

另一种解决方案（IEC）：

```
<?php

class Filesize
{
    const UNIT_PREFIXES_POWERS = [
        'B' => 0,
        ''  => 0,
        'K' => 1,
        'k' => 1,
        'M' => 2,
        'G' => 3,
        'T' => 4,
        'P' => 5,
        'E' => 6,
        'Z' => 7,
        'Y' => 8,
    ];

    public static function humanize($size, int $precision = 2, bool $useBinaryPrefix = false)
    {
        $base = $useBinaryPrefix ? 1024 : 1000;
        $limit = array_values(self::UNIT_PREFIXES_POWERS)[count(self::UNIT_PREFIXES_POWERS) - 1];
        $power = ($_ = floor(log($size, $base))) > $limit ? $limit : $_;
        $prefix = array_flip(self::UNIT_PREFIXES_POWERS)[$power];
        $multiple = ($useBinaryPrefix ? strtoupper($prefix) . 'iB' : $prefix . 'B');
        return round($size / pow($base, $power), $precision) . $multiple;
    }

    // ...
} 
```

资源：

[https://github.com/mingalevme/utils/blob/master/src/Filesize.php](https://github.com/mingalevme/utils/blob/master/src/Filesize.php) [https://github.com/mingalevme/utils/blob/master/tests/FilesizeTest.php](https://github.com/mingalevme/utils/blob/master/tests/FilesizeTest.php)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-02-20T14:11:20.727

根据标准，这是一个更干净的版本（使用上面的答案）：

```
/**
 * Format kb, mb, gb, tb to bytes
 *
 * @param integer $size
 * @return integer
 */
function formatToBytes ($size)
{
    $aUnits = array('bytes' => 0, 'KB' => 1, 'MB' => 2, 'GB' => 3, 'TB' => 4);
    $sUnit = strtoupper(trim(substr($size, -2)));
    if (intval($sUnit) !== 0) {
        $sUnit = 'bytes';
    }
    if (!in_array($sUnit, array_keys($aUnits))) {
        return false;
    }
    $iUnits = trim(substr($size, 0, strlen($size) - 2));
    if (!intval($iUnits) == $iUnits) {
        return false;
    }
    return $iUnits * pow(1024, $aUnits[$sUnit]);
} 
```

# algorithm - 建立基于技能的团队

> ID：11807119
> 
> 赞同：1
> 
> 时间：2012-08-04T08:28:33.903
> 
> 标签：algorithm, selection, matching

我正在尝试实现一个团队选择算法 - 假设我们有 n 个人，每个人都有根据他们的表现排序的技能：P1 {ruby，python，java} 意味着他比 java 更精通 ruby​​，类似的 P2.. 等等。我的项目 Proj1 需要人们具备一些技能 {比如 ruby​​、python 等}、Proj2 等。我如何在项目之间分配人员以实现公平分配（假设一个人只能从事一个项目）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T09:10:02.013

这里可以应用[线性规划。](http://en.wikipedia.org/wiki/Linear_programming)您需要根据可以最大化或最小化的目标来定义公平分配。然后根据项目添加约束。您可以使用任何 LP 求解器来解决这个问题，例如[lpsolve](http://lpsolve.sourceforge.net/5.5/)。从维基百科引用 LP 的历史

> Dantzig 最初的示例是找到 70 人对 70 个工作的最佳分配。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T09:34:27.253

这是我的建议，其中包含我的假设的问题定义空白。这类似于 Ankush 的回答中的线性规划方法

您为程序员拥有的每项技能分配权重：

```
P1{java,ruby,python} -- P1{1, 0.5, 0.25}
P2{ruby,python} -- P2{1, 0.5}
P3{python,ruby,java} -- P3{1, 0.5, 0.25} 
```

现在您的项目要求是：

项目{java,python}

因此，您将每个程序员的权重乘以 1（需要技能）或 0（不需要技能）：

```
P1_suitability = 1*1 + 0.5*0 + 0.25*1 = 1.25
P2_suitability = 1*0 + 0.5*1 = 1
P3_suitability = 1*1 + 0.5*0 + 0.25*1 = 1.25 
```

您为项目选择 P1 和 P3

另一个项目需要：

项目{ruby,python}

计算适用性：

```
P1_suitability = 1*0 + 0.5*1 + 0.25*1 = 0.75
P2_suitability = 1*1 + 0.5*1 = 1.5
P3_suitability = 1*1 + 0.5*1 + 0.25*0 = 1.5 
```

您为其他项目征集 P2 和 P3

同样，这是非常投机的解决方案，因为问题定义不完整。无论如何，这不是一个糟糕的练习..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T16:23:18.277

Here is another linear programming approach, based on the theory that nobody notices if you finish early, but you're in big trouble if you finish late.

For each project, estimate the number of standard programmer hours of each skill required.

For each programmer and each skill, estimate how long (because of their particular skill level) they have to work to produce one standard programmer-hour's worth.

You then need to solve a linear program where most of the unknowns are of the form Pijk, where Pijk is the number of elapsed hours programmer i spends working on skill j of project k.

You immediately have the constraint that SUM_j,k Pijk <= Qi, where Qi is the total amount of time programmer i has to spare, on all projects.

The total amount of work done on skill j of project k is SUM_i Pijk*Eij, where Eij depends on how good programmer i is at skill j. The amount of slack for a particular activity, given the Pijk, is Sjk = SUM_i Pijk * Eij - Wjk, where Wjk is the total amount of work to do for that skill and project. If the minimum amount of slack on any skill of any project is S, then we have the constraint that S <= Sjk.

Because missing deadlines is expensive, I claim that a good objective function is to maximise S, the minimum amount of slack on any skill of any project. All this is given as a set of linear inequalities, so you should be able to find the Pijk that lead to a maximum possible S as a linear programming problem.

# iphone - 如何构建 ilibjingle

> ID：11807120
> 
> 赞同：0
> 
> 时间：2012-08-04T08:28:39.793
> 
> 标签：iphone, objective-c, ios, libjingle

我从谷歌代码下载 ilibjinge 并尝试构建它，但失败了，谁告诉我如何构建它？或者给我发送一个已经成功构建的 ilibjingle 项目，这样我就可以知道我的项目出了什么问题。非常感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T08:40:48.703

查看以下网站：

[http://shawnpark.tistory.com/183](http://shawnpark.tistory.com/183)

[http://code.google.com/p/libjingle/issues/detail?id=111](http://code.google.com/p/libjingle/issues/detail?id=111)

# sql - 无法弄清楚这个错误？

> ID：11807124
> 
> 赞同：0
> 
> 时间：2012-08-04T08:29:28.287
> 
> 标签：sql, oracle

代码 ：

```
SELECT * FROM Grade   
WHERE grade = ‘MG’ ‘1-9’  
SELECT * StaffNo, Name, DOB, ReportsTo,  
FROM Staff  
ORDER BY DOB DESC; 
```

我不断得到

> ORA-00911: 无效字符

这是代码的问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T17:29:34.767

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T08:32:22.650

这就是问题所在，可能有两个原因：

```
WHERE grade = ‘MG’ ‘1-9’ 
```

您*实际上*是否在查询中包含了大引号？如果是这样，那可能就是 Oracle 抱怨无效字符的原因。

但是，目前还不清楚您要匹配的确切内容。你想要任何以 MG 开头，然后是 1 到 9 之间的字符吗？如果是这样，您可以使用：

```
WHERE grade BETWEEN 'MG1' AND 'MG9' 
```

如果这*不是*您的意思，您需要更仔细地解释您正在尝试做的事情 - 并理解如果*人类*无法理解您的意图，SQL 解析器就更不可能......

# .htaccess - 如何将“-”替换为“_”并从地址栏中删除 index.php

> ID：11807126
> 
> 赞同：0
> 
> 时间：2012-08-04T08:29:57.767
> 
> 标签：.htaccess

我在codeigniter中开发了我的网站。我有几件事要在 .htaccess 文件中完成。

*   `index.php`对于除, `img`,以外的任何页面/资源`js`，`css`我希望它`index.php`在 url 中的实际资源之前添加。

*   我有很多静态页面，其中包含 unsercore “_”，例如，`contact_us.php`等`our_services.php`。我希望当用户提供 url 时，`www.mywebsite.com/our-services` 它应该打开原始页面，即`www.mywebsite.com/our_services`. 不同页面有 1,2 到 7 个下划线，例如，`mywebsite.com/speech_writing_services`

这是我到目前为止可以建立的 .htaccess 文件：

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteCond %{REQUEST_URI} !^(/index\.php|/img|/js|/StyleAdmin|/images|/StyleAdmin/images|/css|/robots\.txt|/favicon\.ico)
RewriteRule ^(.*)$ /index.php/$1 [L]

RewriteRule ^([^-]*)-([^-]*)$ http://www.mywebsite.com/$1_$2 [R=301,L]
RewriteRule ^([^-]*)-([^-]*)-([^-]*)$ http://www.mywebsite.com/$1_$2_$3 [R=301,L]
RewriteRule ^([^-]*)-([^-]*)-([^-]*)-([^-]*)$ http://www.mywebsite.com/$1_$2_$3_$4 [R=301,L]
RewriteRule ^([^-]*)-([^-]*)-([^-]*)-([^-]*)-([^-]*)$ http://www.mywebsite.com/$1_$2_$3_$4_$5 [R=301,L]
RewriteRule ^([^-]*)-([^-]*)-([^-]*)-([^-]*)-([^-]*)-([^-]*)$ http://www.mywebsite.com/$1_$2_$3_$4_$5_$6 [R=301,L] 
```

这里的问题是，当我提供像`www.mywebsite.com/contact_us`它一样工作的 url 并在地址栏中显示相同的 url 时。但是当我给出这个 url`www.mywebsite.com/contact-us`时，它确实显示了页面，但是浏览器地址栏中显示的 url 变成了`www.mywebsite.com/index.php/contact_us`，而我希望它像删除后`www.mywebsite.com/contact_us`一样。`index.php`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T11:27:07.170

您需要在重定向后进行路由。

```
RewriteEngine on

RewriteRule ^([^-]*)-([^-]*)$ http://www.mywebsite.com/$1_$2 [R=301,L]
RewriteRule ^([^-]*)-([^-]*)-([^-]*)$ http://www.mywebsite.com/$1_$2_$3 [R=301,L]
RewriteRule ^([^-]*)-([^-]*)-([^-]*)-([^-]*)$ http://www.mywebsite.com/$1_$2_$3_$4 [R=301,L]
RewriteRule ^([^-]*)-([^-]*)-([^-]*)-([^-]*)-([^-]*)$ http://www.mywebsite.com/$1_$2_$3_$4_$5 [R=301,L]
RewriteRule ^([^-]*)-([^-]*)-([^-]*)-([^-]*)-([^-]*)-([^-]*)$ http://www.mywebsite.com/$1_$2_$3_$4_$5_$6 [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^(/index\.php|/img|/js|/StyleAdmin|/images|/StyleAdmin/images|/css|/robots\.txt|/favicon\.ico)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

# emacs - Emacs：嵌套超过了“max-lisp-eval-depth”

> ID：11807128
> 
> 赞同：13
> 
> 时间：2012-08-04T08:30:07.740
> 
> 标签：emacs

有时我会收到“嵌套超过 `max-lisp-eval-depth'”错误。

*   这是什么意思？
*   当我得到一个时，除了“killall emacs”之外，我还能做些什么吗？

### 编辑：

如果您评估以下内容，您可能会收到错误：

```
(defun func ()
  (func))
(func) 
```

但是，在这种情况下，emacs 仍然响应。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-06T02:05:13.753

一个直接的补救措施可以是简单地增加最大值。它的默认值为 500，但您可以像这样将其设置为 10000：

```
(setq max-lisp-eval-depth 10000) 
```

但这通常不是一个好主意，因为您遇到*嵌套超过“max-lisp-eval-depth”*错误的事实首先表明您的代码的某些部分占用了太多的堆栈空间。但至少暂时增加最大值可以帮助您分析问题，而不会一遍又一遍地收到相同的错误消息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-04T09:17:24.660

基本上，这意味着一些 Lisp 代码使用的堆栈比 Emacs 编译允许的要多。

实际上，这是 Lisp 代码中存在错误的标志。即使算法和输入数据是“正确的”，正确编写的代码也应避免深度嵌套；但更常见的是，由于未处理的极端情况或意外输入而发生这种情况。

如果你幸运的话，重复的 control-G 按键可以让你在不杀死 Emacs 的情况下摆脱困境。

如果您正在开发 Emacs Lisp 代码，您可能需要人为地调整值，`max-lisp-eval-depth`以帮助找到您的代码可能需要强化或修复错误的地方。当然，`debug-on-error`设置为`t`应该有助于向您显示堆栈的回溯。

# rss - dnn 6.0 - 无法在模块上显示 rss 图标

> ID：11807129
> 
> 赞同：0
> 
> 时间：2012-08-04T08:30:09.660
> 
> 标签：rss, dotnetnuke

我正在运行 dnn 06.01.04 (127) 社区版，无法在链接模块或公告模块上显示 rss 图标。我已经在每个模块的设置中检查了允许联合并显示容器检查。如果我使用管理菜单并手动单击联合，则会创建 xml 文件，并显示 rss 提要并能够订阅。但是，RSS 图标不会显示在站点上的任何模块上。我正在使用 DarkKnight - 2-Column-Right-Mega-Menu 皮肤和 DarkKnight - PageTitle_Blue 容器。如何让 rss 图标显示在链接和公告模块上？感谢大家的任何反馈！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T11:46:02.893

显然这是 dnn 6.x 中的一个已知错误 - 我没有运行最新的 dnn 6.x 版本，所以它可能已在最新的 6.x 版本中修复。根据我的研究，虽然它还没有修复。请参阅[此链接](http://www.ifinity.com.au/Products/Support_Forums/forumid/10/postid/7175/scope/posts)和[此](http://www.ifinity.com.au/Products/Support_Forums/forumid/10/postid/7175/scope/posts)链接。这里有一个[hack](http://www.dnncreative.com/Forum/tabid/88/aft/30528/%5bLink%5d)可以让你绕过这个 bug。

更新 - 我刚刚升级到 2012 年 8 月发布的最新 dnn 版本 06.02.02，这尚未修复，仍然是一个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T21:46:40.207

你确定你发现了一个错误，或者你正在使用一个不包含 RSS 图标选项的容器？我不相信 DNN6 中的容器实际上为图标提供了位置，您需要自己添加它。

# php - 使用 preg_match_all 重复出现

> ID：11807131
> 
> 赞同：0
> 
> 时间：2012-08-04T08:30:49.827
> 
> 标签：php, loops, preg-match, repeat

我需要使用`preg_match_all`在给定文本中重复出现。例如。

*输入*：“Lorem Ipsum 只是印刷和排版行业的**[repeat]**虚拟**[/repeat]**文本。”

*输出*：“Lorem Ipsum 只是印刷和排版行业的**虚拟**文本。”

示例已经尝试过，但我的限制无济于事。
我很感谢谁能帮助我，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T08:33:40.357

只需使用 preg_replace ：

```
$output = preg_replace ("#\[repeat\](.+)\[/repeat\]#isU", "$1$1", $input); 
```

你就完成了。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T08:41:22.560

您还需要替换出现的 [repeat]。

基于@Jerska 的回答：

```
$output = preg_replace ("#(\[repeat\])(.+)(\[/repeat\])#isU", '$2$2', $input); 
```

# java - 带有“自定义”键的 MapReduce

> ID：11807134
> 
> 赞同：1
> 
> 时间：2012-08-04T08:31:34.853
> 
> 标签：java, hadoop, mapreduce, equals, gridgain

我有以下问题：我有很多键值对形式的数据。关键是一些 id 和值 - 一些文本。我的目标是将这些对象分组到文本片段以某种方式“相似”的集群中。所以它看起来像是 MapReduce 的一项任务，如果将我的文本片段作为键，并将 id 作为值。但是这样的键不是 MapReduce 使用的传统方式，而且由于我并不真正了解 MapReduce 框架的内部实现，我不确定这种方式是否有效。所以我的详细想法是：1.在Java（Hadoop，GridGain）中使用一些MapReduce 2.为我的文本片段创建特殊类（比如TextKey）3.覆盖类的equals（），在这里打包文本比较逻辑（比如列文斯坦距离比较，或其他）4。

MapReduce 可以这样工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T13:06:54.853

在 GridGain 中，这可以通过将文本键存储在分区数据网格中来轻松解决。GridGain Data Grid 将根据键在集群中自动分区您的数据集，因此只要您的相似文本片段正确实现标准 java hashCode() 和 equals()，就可以了。

您还可以在 GridGain 中发送基于亲和力的 MapReduce 任务，以确保您的作业最终与数据位于同一节点上，以避免在您需要对数据运行某些计算时出现冗余数据移动。这可以通过执行 GridProjection.affinityRun(...) 方法来实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T11:03:41.133

1.  在 map 阶段之后，它的输出使用 Partitioner 进行分区（默认为 HashPartitioner，但您可以提供自己的 Parititioner）。您的 TextKey 应该实现 LSH hashCode，以便类似的 Text 值可能会进入同一个分区。

2.  如果键是字符串/文本对象，则默认排序器将起作用，但我认为在您描述的情况下这不会影响您的结果。

3.  问题出在 Grouper 上，它将分区中的每个组传递给单个 reduce 调用。默认情况下，此分组器会遍历此时排序的分区，并形成具有相等值的组。在您的情况下，您应该确保分组不是通过相等而是通过相似来完成的。因此，如果 LSH 哈希码相同，您的 TextKey 也应该实现该`compareTo()`方法并注意返回 0。

总之，您可以使用默认数据路径（即默认 Partitioner、Sorter、Grouper），但您的 TextKey（应该实现 WritableComparable）应该在`hashCode()`and`compareTo()`方法中发挥作用

# java - 简单的 while 循环等待并且永远不会在 Xubuntu 12.04 上的 Java 1.6 中启动

> ID：11807135
> 
> 赞同：0
> 
> 时间：2012-08-04T08:31:39.047
> 
> 标签：java, loops, ubuntu, while-loop

我有一个非常简单的 Java 代码：

```
public class Main {

    public static void main(String[] args) {

        int c = 0;

        while (c < 10);
        {
            System.out.println(c);
            c++;
        }

        System.out.println("exit");
    }

} 
```

问题是，while 循环没有启动，程序只是在第 7 行（在 while 循环的开头）一直等待。

我在 Windows 上使用`Oracle Java JDK 1.6u33`此`Xubuntu 12.04.`代码完美运行。有人可以告诉我，我该怎么做才能在 Ubuntu 上正确运行此代码？

我做了什么（和线程转储）：

```
gopher@orion:~/Projects/test/src$ javac Main.java
gopher@orion:~/Projects/test/src$ jar cvfm test.jar manifest.txt Main.class
added manifest
adding: Main.class(in = 489) (out= 338)(deflated 30%)
gopher@orion:~/Projects/test/src$ java -jar test.jar
^\2012-08-04 10:26:23
Full thread dump Java HotSpot(TM) 64-Bit Server VM (20.8-b03 mixed mode):

"Low Memory Detector" daemon prio=10 tid=0x00007fbf080b4800 nid=0xa26 runnable [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"C2 CompilerThread1" daemon prio=10 tid=0x00007fbf080b2800 nid=0xa25 waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"C2 CompilerThread0" daemon prio=10 tid=0x00007fbf080af800 nid=0xa24 waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"Signal Dispatcher" daemon prio=10 tid=0x00007fbf080ad800 nid=0xa23 waiting on condition [0x0000000000000000]
   java.lang.Thread.State: RUNNABLE

"Finalizer" daemon prio=10 tid=0x00007fbf08091000 nid=0xa22 in Object.wait() [0x00007fbf0d1f3000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000000f5b61300> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:118)
    - locked <0x00000000f5b61300> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:134)
    at java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)

"Reference Handler" daemon prio=10 tid=0x00007fbf0808f000 nid=0xa21 in Object.wait() [0x00007fbf0d2f4000]
   java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x00000000f5b611d8> (a java.lang.ref.Reference$Lock)
    at java.lang.Object.wait(Object.java:485)
    at java.lang.ref.Reference$ReferenceHandler.run(Reference.java:116)
    - locked <0x00000000f5b611d8> (a java.lang.ref.Reference$Lock)

"main" prio=10 tid=0x00007fbf08007800 nid=0xa1d runnable [0x00007fbf0eb4b000]
   java.lang.Thread.State: RUNNABLE
    at Main.main(Main.java:8)

"VM Thread" prio=10 tid=0x00007fbf08088800 nid=0xa20 runnable 

"GC task thread#0 (ParallelGC)" prio=10 tid=0x00007fbf0801a800 nid=0xa1e runnable 

"GC task thread#1 (ParallelGC)" prio=10 tid=0x00007fbf0801c000 nid=0xa1f runnable 

"VM Periodic Task Thread" prio=10 tid=0x00007fbf080bf000 nid=0xa27 waiting on condition 

JNI global references: 887

Heap
 PSYoungGen      total 9216K, used 317K [0x00000000f5b60000, 0x00000000f65a0000, 0x0000000100000000)
  eden space 7936K, 4% used [0x00000000f5b60000,0x00000000f5baf628,0x00000000f6320000)
  from space 1280K, 0% used [0x00000000f6460000,0x00000000f6460000,0x00000000f65a0000)
  to   space 1280K, 0% used [0x00000000f6320000,0x00000000f6320000,0x00000000f6460000)
 PSOldGen        total 21056K, used 0K [0x00000000e1200000, 0x00000000e2690000, 0x00000000f5b60000)
  object space 21056K, 0% used [0x00000000e1200000,0x00000000e1200000,0x00000000e2690000)
 PSPermGen       total 21248K, used 2774K [0x00000000dc000000, 0x00000000dd4c0000, 0x00000000e1200000)
  object space 21248K, 13% used [0x00000000dc000000,0x00000000dc2b5bb8,0x00000000dd4c0000) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T08:34:14.553

你有一个`;`在一段时间结束时，删除它，它会工作

```
while (c < 10); 
```

以上将执行单行 while() 并且因为`c`从不增加它是一个无限循环。把它改成

```
while (c < 10) // no ; at the end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T08:35:26.630

消除 ; 从while循环。如下

```
while (c < 10) 
```

# macos - 在 IB Xcode 4.4 中无限制地调整窗口大小

> ID：11807136
> 
> 赞同：0
> 
> 时间：2012-08-04T08:31:39.677
> 
> 标签：macos, interface-builder, xcode4.4

在 IB 中布局时`NSPanel`，我通常会打开一个大窗口空间，添加和布局内容元素，然后调整窗口大小以适应。

在 Xcode 4.4 中，我添加的项目似乎总是有与之相关的空间限制，并在我调整封闭元素的大小时调整大小，我似乎无法关闭此行为。

我尝试将约束设置为“小于或等于”，但没有效果。这太烦人了，就好像我需要从外向内构建我的 UI，这太疯狂了。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-01T17:27:50.280

您需要禁用 xib 属性中的自动布局复选框...

我有同样的问题，但在谷歌上找到了这个：http: [//gentlebytes.com/2011/09/auto-layout-in-lion/](http://gentlebytes.com/2011/09/auto-layout-in-lion/)

# java - 在 db 中存储“hashcode like”以描述布尔类字段以提高性能并缩短命名查询

> ID：11807139
> 
> 赞同：0
> 
> 时间：2012-08-04T08:32:21.603
> 
> 标签：java, math, jpa

这个问题的背景如下：

[可扩展类的哈希码（面向未来）](https://stackoverflow.com/questions/11801733/hash-code-for-expandable-class-future-proof)

但是，我应该提一下为什么我想知道这一点。

我有一个具有许多角色（布尔字段）的类。我不想进行命名查询（JPA）之类的

```
@NamedQuery(name= "searchUserWithRoles", query="SELECT u FROM User u WHERE u.role.admin = :admin AND u.role.printer = :printer AND ... .. . .+ 20 more booleans...) 
```

我的想法是为 Role 类中的所有字段创建一个哈希码（或类似的），从而将命名查询减少为：

```
@NamedQuery(name= "searchUserWithRoles", query="SELECT u FROM User u WHERE u.role.hashcode = :hashcode) 
```

我认为（但我不确定）这会提高性能，但也会使我的查询非常短（我的用户类中有一个更像“角色”的字段）。

此外，当我使用更多角色字段更新 Role 类时，我不需要更新命名查询。

这就是第一个问题的背景。

新问题是：是否有某种方法可以在 Role 类中生成一个“hashcode like”字段，该字段是对所有真实字段的描述（即使 Role 类更新了更多字段）？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T08:37:54.117

听起来您不需要“哈希码”-您只需要一个位掩码。只要您有 32 个或更少的字段，就可以将其存储在 32 位整数中。如果您有 64 个或更少的字段，则可以将其存储在 64 位整数中。

然后每个字段将有一个专用位 - 因此管理员可以是位 0（值 1），打印机可以是位 1（值 2），然后下一个字段将是位 2（值 4）等等。只需将这些值相加（实际上是按位或）。

然后查询任何特定组合，您只需在数据和仅设置相关位的“掩码”之间使用按位与。因此，如果您想查找每个没有打印机权限的管理员，您需要检查`value & 3 == 1`.

请注意，所有这些都可能会干扰数据库想要执行的任何索引，*并且*数据库可能会以这种方式进行优化。您是否有任何证据表明将它们存储为单独的字段 - 使您的表示更接近您的逻辑数据结构 - 实际上会导致问题？

# c# - 反射获取方法中的变量

> ID：11807142
> 
> 赞同：6
> 
> 时间：2012-08-04T08:33:30.720
> 
> 标签：c#, reflection

如何获取 Method 中使用的变量，然后将它们的值写在 Console 上？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T08:39:07.423

你不能。反射不会扩展到*读取*方法变量的值。它只处理变量的*声明*元数据。即便如此，编译器可能已经删除了你认为你声明的变量。反射允许完全访问*字段*（实例/静态类型变量），但不允许访问方法变量。

您可以使用一些技巧，例如 lambda 表达式，但这**会改变它们的形式**（从方法变量到实例字段）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T09:18:55.087

我认为这是可能的，但是如果您挖掘 IL 代码并查看 Method.Body。您可以了解使用的临时局部变量。

但是很难区分临时变量和变量，因为所有语法糖都消失了

更新：在搜索这个问题时发现它。不确定它是否有效。

```
System.Diagnostics.StackFrame stackFrame = new System.Diagnostics.StackFrame();
 System.Reflection.MethodBase methodBase = stackFrame.GetMethod();

 methodBase.GetParameters(); //Array of System.Reflection.ParameterInfo[]
 methodBase.GetMethodBody().LocalVariables; //List of Local variables declared in the body 
```

# java - QueueAsLinkedList 实现

> ID：11807146
> 
> 赞同：0
> 
> 时间：2012-08-04T08:34:53.197
> 
> 标签：java, linked-list, queue, variable-assignment

这是我在数据结构中实现 QueueAsArray 的分配程序。我希望有人指导我解决这个问题，因为我在 Java 编程方面没有很强的背景。

我希望有人指导我如何在我的主程序中编译和使用此代码。

```
public class QueueAsLinkedList extends AbstractContainer implements Queue
{
    protected LinkedList list;

    public QueueAsLinkedList ()
    { list = new LinkedList (); }

    public void purge ()
    {
    list.purge ();
    count = 0;
    }

    public Object getHead ()
    {
    if (count == 0)
        throw new ContainerEmptyException ();
    return list.getFirst ();
    }

    public void enqueue (Object object)
    {
    list.append (object);
    ++count;
    }

    public Object dequeue ()
    {
    if (count == 0)
        throw new ContainerEmptyException ();
    Object result = list.getFirst ();
    list.extract (result);
    --count;
    return result;
    }

    public Enumeration getEnumeration()
    {
        return new Enumeration()
        {
            protected LinkedList.Element position = list.getHead();

            public boolean hasMoreElements()
            {
                return position != null;
            }

            public Object nextElement()
            {
                if (position == null)
                    throw new NoSuchElementException();
                Object result = position.getDatum();
                position = position.getNext();
                return result;
            }
        };
    }

    protected int compareTo (Comparable object)
    {
        AbstractContainer arg = (AbstractContainer) object;

        long diff = (long) getCount() - (long) arg.getCount();
        if (diff < 0)
            return -1;
        else if (diff > 0)
            return +1;
        else
            return 0;
    }

    public boolean equals(Object object) {
        LinkedList list_object = (LinkedList)object;
        if(list_object.length != this.length) {
            return false;
        }
        Element ptr = this.head;
        Element list_object_ptr = list_object.head;
        for(int i = 0; i < this.length; i++) {          
            if(list_object_ptr.getDatum () != ptr.getDatum ()) {
                return false;
            }
            ptr = ptr.getNext ();
            list_object_ptr = list_object_ptr.getNext ();
        }
        return true;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T08:40:20.280

我对您的建议是阅读现有的 LinkedList 库源代码，您可以轻松找到它们。我建议您也阅读 ArrayList 的源代码，因为您将包装一个数组。最后看看 ArrayBlockingQueue 因为这是一个包装数组的队列。最后一个类最接近您想要的，但也是最复杂的，因为它是并发且线程安全的。

当你开始编写一个类时，我建议你从一些非常简单的东西开始，然后编译它。使用 IDE，它将显示代码是否会在您键入代码时编译并提出更正建议。

然后我会写一个非常简单的单元测试来测试你非常简单的代码。你可以用一种方法做到这一点。（有些人建议先写测试用例，但我觉得这很难，除非你以前写过这种类，在这种情况下你并不是真的先写单元测试，只是第一次为那个代码库写）

然后添加第二种或第三种方法并对其进行测试。

当它执行您不理解的操作时，请使用您的调试器单步执行代码以查看每一行的功能。

* * *

我会使用诸如 Netbeans、Eclipse 或 IntelliJ CE 之类的 IDE。我更喜欢 IntelliJ，但 Netbeans 可能是初学者的最佳选择。

*   下载 IDE。
*   开始一个新项目。
*   创建一个类并将代码复制并粘贴到该类中。
*   创建另一个使用该类的类。这是你的课。

顺便说一句，你是写这门课还是给你的，因为它有很多不寻常的编码选择。

* * *

代码注释

*   它是一个 Queue，它包装了一个实现 Queue 的类，因此委派看起来很自然，但它似乎并没有这样做，这表明它不是标准的 LinkedList 和 Queue，这是令人困惑的`LinkedList`。`Queue`
*   它使用`count`未定义的字段而不是 LinkedList.size()。
*   dequeue 在一次效率更高时访问 LinkedList 两次（就像标准库一样）
*   当 Iterator 自 Java 1.2 (1998) 起成为标准时，它支持 Enumeration 而不是 Iterator
*   当 equals 为 false 时 compareTo 为 0，这是一个错误。
*   它不支持内置的泛型。
*   compareTo 仅检查长度，因此带有“A”的队列和带有“Z”的队列是 compareTo == 0
*   等于用途`this.head`，`this.length`哪些不是字段。

# html - 如何将链接定位在宽度和高度的中心？

> ID：11807147
> 
> 赞同：0
> 
> 时间：2012-08-04T08:35:17.847
> 
> 标签：html, css

我做了这个：[jsfiddle Demo](http://jsfiddle.net/centerwow/p9S5W/25/show)

我有这条线：

`<div id="footer"> <h1><a class="link" href="http://www.centerwow.com">mysite</a></h1> </div>`

​ 如何将链接**mysite**居中在`div footer`中心。宽度和高度应该在 about(menu) 下面。我尝试将位置设置为绝对和相对，并以某种方式破坏了其他东西。谢谢你的帮助。

我的代码：

```
body {
    background: #CC3366 url(images/temp.png) center 130px no-repeat ;
    overflow:hidden;
    font-family: Arial;
    font-size: 30px;
    line-height: 32px;
    }
#container { 
    width: 1000px;
    overflow: hidden;
    position: relative;
    height: 450px;
    margin: 0 auto;
 }

#all_pages {
    position: absolute;
    left: 0;
    top: 0;
    width: 3000px;
    }
.page {
    width: 1000px;
    height: 400px;
    float: left;
    text-align: center;
    margin-top: 50px;
    }    
.page img {
    margin-top: 50px;
    }
#menu {
    background: #000;
    }
#menu ul { 
    list-style: none;
    width: 457px;
    height: 35px;
    margin:auto;
    }
#menu ul li {
    float: left;
    color: #888;
    width: 150px;
    line-height: 35px;
    text-align: center;
    cursor: pointer;
    }
.active {
    color: #fff !important;
    }
h1 a {
    color: #000000;
    text-decoration: none;

}
#footer a{
    position:absolute;
    bottom:80px;
    margin: 0 auto;
}
#footer{
    position:relative;
    background: #CC3366;
    width:100%;
    height:1000px;

}​

<h1><a class="link" style="position:absolute; left:30px; top:30px;" href="http://www.centerwow.com">portfolio</a></h1>
<div id="container">

    <div id="all_pages">

        <div class="page">
            <h1>Home Page</h1>
            <img src="images/home.png" width="300">
        </div> <!-- page1 -->
        <div class="page">
            <h1>About Us Page</h1>
            <img src="images/about.png" width="300">
        </div> <!-- page2 --> 
        <div class="page">
            <h1>Contact Us Page</h1>
            <img src="images/contact.png" width="300">
        </div> <!-- page2 --> 

    </div> <!-- #all_pages -->

</div> <!-- #container -->

<div id="menu">
<ul>
    <li id="1" class="link CC3366 active">Home</li>
    <li id="2" class="link 33FF66">About</li>
    <li id="3" class="link FFFF33">Contact Us</li>
</ul>
</div> <!-- #menu -->
<div id="footer">
    <h1><a class="link" href="http://www.centerwow.com">mysite</a></h1>
</div>
​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T08:48:04.497

您正在寻找像[这样的小提琴吗？](http://jsfiddle.net/BZybV/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T08:53:56.820

尝试这个：

```
position :relative 
top:50% ;
Left:50%; 
```

工作与否？

# c# - 我在哪里可以知道 Windows 8 Metro 背景刷的键？

> ID：11807151
> 
> 赞同：2
> 
> 时间：2012-08-04T08:35:54.683
> 
> 标签：c#, windows-8, windows-runtime, background-color

这是一个小问题，但它对我的应用程序的视觉外观很重要。

当我在我的 PC 操作系统上安装 Windows 8 DevPreview 时，建议我选择 Metro UI 的配色方案。我更喜欢青色。它类似于下一个： ![在此处输入图像描述](../Images/e98caf1b124ce56849b8069ed3c89840.png)

所以我有这个用于背景和设置背景的配色方案。现在我想为我的应用程序实现自定义设置。类似下一个：

![在此处输入图像描述](../Images/4ee5bc3ec9c865c73d48eafb932b3fe5.png)

但为了获得良好的用户体验，我希望将我的设置保持与系统相同的颜色。在当前时刻，我设置了背景手册。但这不是一个解决方案，因为用户可以更喜欢另一种配色方案。我已经检查了 StandardStyles 和主要的通用 XAML 文件。但看起来我错过了它。如果有人对此提供帮助，我将很高兴。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T23:18:32.230

该值在当前 SDK 中不可用。尽管初始设置弹出窗格与系统颜色匹配，但您会注意到任何*自定义*设置窗格通常为白色或与应用程序匹配的颜色。

看看必应天气应用程序，你就会明白我的意思。所有应用程序*自定义*设置都有蓝色背景（尽管我个人有一个青色主题）。

另外，不要对“权限”设置感到困惑。该对话框也由操作系统提供。

# iphone - GSEventLockDevice 无法正确锁定手机

> ID：11807154
> 
> 赞同：1
> 
> 时间：2012-08-04T08:36:24.007
> 
> 标签：iphone, ios

我通过调用方法锁定了`GSEventLockDevice()`iPhone `GraphicsServices.framework`。它在 iPhone 上工作正常，但锁定手机后背光不会关闭。它保持亮起并显示解锁屏幕。

锁定后如何使屏幕立即关闭？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-17T07:34:01.757

你为什么做这个。苹果从不接受这种私有框架任务。它必须是越狱应用程序。GraphicsServices.framework 不处理背光和屏幕开启和关闭状态。它只处理 GSEvents 和其他图形的东西。我认为你不能那样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-06T06:51:57.127

如果您正在为越狱手机开发，您可以使用`GSEventSetBacklightLevel(0);`调暗亮度级别。

# c++ - 运行 Opencv 示例代码时出错

> ID：11807165
> 
> 赞同：1
> 
> 时间：2012-08-04T08:39:12.047
> 
> 标签：c++, visual-studio-2010, opencv

我开始在我的新笔记本电脑上使用 OpenCV，但有一些错误。我遵循了 doc 目录中 OpenCV 教程中提到的所有步骤。但是示例代码不起作用。这是错误：

```
">c:\users\ankit\documents\visual studio 2010\projects\test\test\test.cpp(7):
 fatal error C1083: Cannot open include file: 'opencv2/imgproc/imgproc.hpp':
 No such file or directory
1>
1>Build FAILED." 
```

我正在使用 Win7 64 位机器。我已经在属性页中包含了其他目录和库。它仍然给我这个错误。帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T08:43:24.830

您显然输入了错误的包含目录。导航到包含目录并确保它包含 file `opencv2/imgproc/imgproc.hpp`。

**更新：** [这是错误文档](http://msdn.microsoft.com/en-us/library/et4zwx34%28v=vs.80%29.aspx)。查看所有原因。

**更新#2：**

[关于你的新问题。](http://msoos.wordpress.com/2010/09/11/0xc000007b-error-solution/)

# php - SoapClient 解析响应

> ID：11807167
> 
> 赞同：1
> 
> 时间：2012-08-04T08:39:30.530
> 
> 标签：php, xml, soap, response

我需要解析该响应来自：

```
$client->__getLastResponse();

uuid:9e0096e0-de0f-11e1-8035-e656d1754971

http://schemas.xmlsoap.org/ws/2004/08/addressing/role/anonymous 0 ContentType text/xml 1 
Result 200 2 XMLDocumentOut <?xml version="1.0" encoding="utf-8" ?> 
<DtsAgencyLoginResponse xmlns="DTS" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="DTS file:///R:/xsd/DtsAgencyLoginMessage_01.xsd">
<SessionInfo><SessionID>178827</SessionID><Profile>A</Profile><Language>ENG</Language>
<Version>1</Version>
</SessionInfo><AdvisoryInfo/></DtsAgencyLoginResponse> 
```

我如何解析它以获取 SessionID ？谢谢！

编辑：

方法的结果`$client->method($parameter)`是：

```
stdClass Object ( [result] => [ttOut] => stdClass Object ( [ttOutRow] => Array ( [0] => stdClass Object ( [ParPos] => 0 [ParNam] => ContentType [ParVal] => text/xml ) [1] => stdClass Object ( [ParPos] => 1 [ParNam] => Result [ParVal] => 200 ) [2] => stdClass Object ( [ParPos] => 2 [ParNam] => XMLDocumentOut [ParVal] => 178880AENG1 ) ) ) [opcErrorMessage] => ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T08:47:41.860

当通过 PHP5 SOAPClient 调用 SOAP 方法时，您总是会得到响应。也就是说，可能不需要调用 __getLastResponse() 来检索 SessionID 值。看看以下内容：

```
$response = $client->myMethod();
$sessionID = $response->SessionInfo->SessionID; 
```

还有[http://www.php.net/manual/en/soapclient.soapcall.php](http://www.php.net/manual/en/soapclient.soapcall.php)

# javascript - 反正有没有提高鼠标移动的分辨率？

> ID：11807171
> 
> 赞同：0
> 
> 时间：2012-08-04T08:40:14.363
> 
> 标签：javascript, canvas, drawing, mouse

我目前正在使用 canvas.onmousemove 来跟踪绘图应用程序的鼠标位置，并且分辨率（尤其是在快速移动时）会导致一些问题。有什么方法可以更频繁地更新鼠标位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T12:35:23.927

用线连接点 - 这是大多数（如果不是全部）其他绘画程序这样做的方式。

# objective-c - 使用 IOS facebook 库处理 OAuthException

> ID：11807173
> 
> 赞同：2
> 
> 时间：2012-08-04T08:40:47.500
> 
> 标签：objective-c, ios, facebook, facebook-graph-api

使用 ios fb 库时，我从 facebook 收到以下响应。

```
{"error":{"message":"Error validating access token: The session was invalidated explicitly using an API call.","type":"OAuthException","code":190,"error_subcode":466}} 
```

我正在使用下面的代码来提出这个请求：

```
facebook = [[Facebook alloc] initWithAppId:@"xxxxxx" andDelegate:self];

NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
if ([defaults objectForKey:@"FBAccessTokenKey"] && [defaults objectForKey:@"FBExpirationDateKey"]) {
    NSLog(@"FB: taking saved token");
    facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
    facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];
}

if (![facebook isSessionValid]) {
    [facebook authorize:nil];
} else {
    NSLog(@"FB: session already valid");
}

[facebook requestWithGraphPath:@"me" andDelegate:self]; 
```

在下面您可以看到一些日志记录，其中一些来自我实现的 fb 回调：

```
FB: taking saved token
FB: session already valid
FB: didLoadRawResponse
FB: didFailWithError 
```

我之前已经通过应用程序仪表板撤销了应用程序的访问权限，所以我期待 isSessionValid 调用返回 false。然而，它没有并且仍然相信会话是有效的。我一定是误解了这里“会话”的含义。

我也尝试过调用**`extendAccessTokenIfNeeded`**新的令牌系统来玩得开心，但是这没有取得任何成果。

所以我觉得这是第 22 条情况，facebook 告诉我令牌很好，但是进行图形调用失败。我是否需要以某种方式处理令牌无效错误代码的世界并**再次****调用`authorize`**？

试图找出使用 facebook “文档” 让我有点发疯。

**其他人如何处理这个问题？**

**编辑1：**

我现在收到以下错误，并且无法获得上一个错误，这可能是由于打开了“remove offline_access”迁移。
但是，基本上问题是相同的。

```
FB: {"error":{"message":"Error validating access token: User xxxxx has not authorized application xxxxxx.","type":"OAuthException","code":190,"error_subcode":458}} 
```

# git - GitHub for Mac 每次启动都会弹出“enter your password for the ssh key id_rsa”

> ID：11807175
> 
> 赞同：11
> 
> 时间：2012-08-04T08:41:09.667
> 
> 标签：git, github, ssh, github-for-mac

这个对话框似乎显示了两到三遍。如果我取消它，它就会消失，我仍然可以提交更改。

如何防止它每次都弹出，如果我必须重新输入密码并单击“记住钥匙串”（我以前做过，但会再试一次），我在哪里可以找到我的密码？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-01-10T19:30:29.080

在最新版本的 macOS - 10.12.2/Sierra - 这是一个简单的修复。只需编辑您的 ~/.ssh/config 并启用 UseKeychain 选项：

```
Host *
UseKeychain yes 
```

保存并解决。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-04T09:10:53.473

如果您的 ssh 密钥已使用密码保护，那么您需要先运行 ssh-agent，以避免为每个连接输入所述密码。

请参阅[GitHub 文章“使用 SSH 密钥密码”](https://help.github.com/articles/working-with-ssh-key-passphrases#platform-windows)。

```
Initializing new SSH agent...
# succeeded
# Enter passphrase for /c/Users/you/.ssh/id_rsa:
# Identity added: /c/Users/you/.ssh/id_rsa (/c/Users/you/.ssh/id_rsa)
# Welcome to Git (version 1.6.0.2-preview20080923)
# 
# Run 'git help git' to display the help index.
# Run 'git help ' to display help for specific commands. 
```

如果您没有密码，最好重新创建一组新的公共/私有 ssh 密钥（如果需要，使用新密码保护），然后在您的 GitHub 帐户上发布该新公钥。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-20T14:57:32.360

Ricardo 的解决方案适用于 macOS Sierra v. 10.12.2。第一次运行该`ssh-agent`过程时，我仍然需要输入密码，但之后不再需要。如果您在终端而不是 GUI 中执行此操作，请确保重新启动会话或使用`. ~/.ssh/config`

# ios - 从不同的视图更改 UITabBarItem 的标签

> ID：11807183
> 
> 赞同：0
> 
> 时间：2012-08-04T08:42:00.787
> 
> 标签：ios, xcode, delegates, uitextfield, uitabbaritem

**这主要是一个代表团问题**，因为我还在学习并且不明白。我不知道**如何创建我需要的委托**。

我有**一个带有 2 个视图的选项卡式视图控制器，**我们称它们为**view 1**和**view 2**。然后我有**一个设置视图，它不是选项卡式导航的一部分，视图 1 和 2 都可以访问**。

如何`UITabBarItem`使用文本字段从设置视图更改 a 的标签。您可以`UITabBarItem`通过**setTitle**更改 a ，但**我不知道如何设置委托。**

为了让您了解，View 1 和 View 2 实际上是 Player 1 和 Player 2。我想让用户可以通过设置屏幕将 PLayer 1 和 PLayer 2 标签更改为其实际名称。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T23:25:29.550

在设置视图控制器（以模态方式显示）中添加以下代码，并在您需要更改其中一个 tabbaritems 的文本字段时调用它。

```
UITabBarController  *tabBarController =(UITabBarController *)[self presentingViewController];
NSArray *tabBarItems =[tabBarController.tabBar items];
UITabBarItem *barItem1=[tabBarItems objectAtIndex:0 ]; // or 1
barItem1.title=@"NewName"; 
```

# matlab - 训练中的简单线性神经网络权重与训练结果不兼容

> ID：11807184
> 
> 赞同：0
> 
> 时间：2012-08-04T08:42:00.937
> 
> 标签：matlab, neural-network

我从训练中获得的权重，当直接在输入中暗示时，会返回不同的结果！我将在一个非常简单的例子中展示它，假设我们在训练后有一个输入向量`x= 0:0.01:1;` 和目标向量`t=x^2`（我知道最好使用非线性网络），2 层，线性网络，每层有一个神经元，我们得到：

`sim(net,0.95) = 0.7850`（训练中的一些错误 - 没关系，应该是）权重来自`net.IW,net.LW,net.b:`

IW =

```
0.4547 
```

长宽 =

```
2.1993 
```

b =

```
0.3328   -1.0620 
```

如果我使用权重： Out = purelin(purelin(0.95*IW+b(1))*LW+b(2)) = 0.6200！，我得到了与模拟结果不同的结果！怎么会这样？怎么了？

编码：

```
%Main_TestWeights
close all
clear all
clc

t1 = 0:0.01:1;
x = t1.^2;

hiddenSizes = 1;
net = feedforwardnet(hiddenSizes);

[Xs,Xi,Ai,Ts,EWs,shift] = preparets(net,con2seq(t1),con2seq(x));
net.layers{1,1}.transferFcn = 'purelin';
[net,tr,Y,E,Pf,Af] = train(net,Xs,Ts,Xi,Ai);
view(net);

IW = cat(2,net.IW{1});
LW = cat(2,net.LW{2,1});
b = cat(2,[net.b{1,1},net.b{2,1}]);

%Result from Sim
t2=0.95;
Yk = sim(net,t2)

%Result from Weights
 x1 = IW*t2'+b(1)
 x1out = purelin(x1)
 x2 = purelin(x1out*(LW)+b(2)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T23:04:11.453

神经网络工具箱将输入和输出重新调整到 [-1,1] 范围。因此，您必须重新缩放和取消缩放它，以便您的模拟输出与 sim() 的输出相同：

```
 %Result from Weights
 x1 = 2*t2 - 1; # rescale 
 x1 = IW*x1+b(1);
 x1out = purelin(x1);
 x2 = purelin(x1out*(LW)+b(2));
 x2 = (x2+1)/2 # unscale 
```

然后

```
>> x2 == Yk

ans =

     1 
```

# javascript - 图像和 js 没有从 apache tomcat 显示

> ID：11807190
> 
> 赞同：0
> 
> 时间：2012-08-04T08:42:44.643
> 
> 标签：javascript, jquery, firefox, tomcat

我面临着奇怪的问题。我已经在 Apache Tomcat 目录中部署了图像和 js 文件，但它没有显示在页面上，并且出现了警告：

> 资源解释为图像，但使用 MIME 类型 text/html 传输：“http://localhost:8084/webApp/img/access.jpg”。

早些时候它工作正常，但现在 jquery 也无法正常工作，并且出现以下错误：

> 未捕获的 ReferenceError：未定义 jQuery

早些时候，此错误消息出现在 Firefox 中，但 Chrome 运行正常。但现在它也在 Chrome 中显示错误。

我也尝试过使用绝对路径但没有成功。

```
<script src="/webApp/jquery-1.7.2.min.js"></script>
<img src="http://localhost:8084/webApp/img/access.jpg"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-06-11T08:09:37.463

如果您使用的是 tomcat，您应该在 $CATALINA_HOME/webapps/ROOT 文件夹中找到资源。从那里，您可能可以访问这些文件。您可以从终端检查访问权限。如果您使用 unix / linux，请定位到该文件夹​​：

```
cd $CATALINA_HOME/webapps/ROOT 
```

并执行命令：

```
ls -la 
```

这意味着每个人都可以访问它，因此应该对通过浏览器访问服务器的每个人都可用

```
drwxr-x**r-x@** 22 user  staff    704 11 jun 01:25 . 
```

您也可以尝试更改权限，但您的服务器将不确定：

```
sudo chmod a+rx webApp/img/access.jpg 
```

或者通过cd进入webApp文件夹并执行

```
sudo chmod -R a+rx . 
```

取决于您的偏好（最后一个意味着授予对 webApp 文件夹上所有资源的权限，这意味着授予对服务器中所有项目的访问权限，非常不确定......）。希望它可以帮助某人。

# java - 从地图中删除项目

> ID：11807191
> 
> 赞同：1
> 
> 时间：2012-08-04T08:43:04.667
> 
> 标签：java

我在 Java 中创建了一个地图，例如`private Map<Integer, List<entity>> m`，如何删除列表中的项目？

我在 Map to 中运行循环`m.get(key).size()`并在条件为真时删除：
`if (m.get(key).get(i).getID() = xxx);`removed 子句`m.get(key).remove(i).`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-21T07:11:20.900

我会检查地图条目并使用该[`removeIf`](https://docs.oracle.com/javase/8/docs/api/java/util/Collection.html#removeIf-java.util.function.Predicate-)方法从每个列表中删除相关元素：

```
m.values().forEeach(v -> v.removeIf(i -> i.getId() == 123));
// Just an example, of course ------------------------^ 
```

# javascript - JavaScript 即时搜索 Div 隐藏与淡入淡出效果

> ID：11807194
> 
> 赞同：0
> 
> 时间：2012-08-04T08:43:20.750
> 
> 标签：javascript, html, ajax, search

我已经使用 javascript 实现了即时搜索，除了在某一时刻之外，我都能让它工作。

我已经在即时搜索中实施了以下操作，并且工作正常。

1.  结果来自“搜索结果”div。
2.  单击文档结果消失的任何位置时。
3.  当悬停在输入字段上或单击输入字段时，结果重新出现。
4.  在文档单击后重新出现结果时添加了褪色效果。

这 1\. 实施不正常。

在文档单击后添加了对结果消失的淡入淡出效果。它是第一次工作，当单击文档时结果消失并具有淡化效果，但在鼠标悬停或单击输入字段结果重新出现后，单击文档结果不会消失并且没有效果。

这些是我的 Javascript 代码。

```
<script type="text/javascript">
    function showResult(str)
    {
        if (str.length==0)
        {
            document.getElementById("search-result").innerHTML="";
            document.getElementById("search-result").style.border="0px";
            return;
        }
        if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp=new XMLHttpRequest();
        }
        else
        {// code for IE6, IE5
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.onreadystatechange=function()
        {
            if (xmlhttp.readyState==4 && xmlhttp.status==200)
            {
                document.getElementById("search-result").innerHTML=xmlhttp.responseText;
                document.getElementById("search-result").style.border="1px solid #A5ACB2";
                document.getElementById("search-result").autocomplete="off";
                document.getElementById("search-result").style.display="block";
                var fired = false;

                document.onclick = function(){
                    close_box();
                    if(!fired){
                        document.getElementById("search-input").onmouseenter = function(){
                        show_box_fadeIn()
                        delete this.onmouseenter;};
            };
        }
        document.getElementById("search-input").onmouseleave = function(){
            var fired = true;
            if(fired){
                document.getElementById("search-input").onmouseenter = function(){
                show_box()};
        };
    }

    document.getElementById("search-input").onclick = function(e){
        if(!e) {
            e = window.event;
        }
        if(e.stopPropagation && e.preventDefault) {
            e.stopPropagation();
            e.preventDefault();
        } else {
            e.cancelBubble = true;
            e.returnValue = false;
        }show_box(); return true;
    };

    //////////EVENTS AFTER DOCUMENT ONCLICK//////////
    var fired = false;
    var closeBox = false;
    document.onclick = function(){
        if(!closeBox){
            close_box_fadeOut();
        }
        if(!fired){
            document.getElementById("search-input").onmouseenter = function(){
                show_box_fadeIn()
                delete this.onmouseenter;};
            };
        }
        document.getElementById("search-input").onmouseleave = function()
        {
            var fired = true;
            if(fired){
                document.getElementById("search-input").onmouseenter = function(){show_box()};
            };
        }
        }
        }
       xmlhttp.open("GET","instant-search.php?keyword="+str,true);
       xmlhttp.send();
       } 

    //////////FUNCTIONS//////////
    function show_box(){
        document.getElementById("search-result").style.display="block";

    }
    function show_box_fadeIn(){
        setOpacity( 0 );
        document.getElementById("search-result").style.display="block";
        fadeIn()
    }
    function close_box(){
        document.getElementById("search-result").style.display="none";
    }
    function close_box_fadeOut(){
        if(closeBox){
            document.onclick = function(){close_box();}
            return;
        }
        closeBox = true;    
        setOpacity( 100 );
        document.getElementById("search-result").style.display="block";
        fadeOut();
        setTimeout(close_box, 800);
    }
    function setOpacity( value ) {
        document.getElementById("search-result").style.opacity = value / 10;
        document.getElementById("search-result").style.filter = 'alpha(opacity=' + value * 10 + ')';
    }
    function fadeIn() {
        for( var i = 0 ; i <= 100 ; i++ )
        setTimeout( 'setOpacity(' + (i / 10) + ')' , 10 * i );
    }
    function fadeOut() {
        for( var i = 0 ; i <= 100 ; i++ ) 
        setTimeout( 'setOpacity(' + (10 - i / 10) + ')' , 8 * i );
    }
</script> 
```

html代码。

```
<input name="keyword" type="text" size="50" id="search-input" value = 'Search'; onkeydown="showResult(this.value)" /></br></br> 
```

请提出任何可能的方法来做到这一点，我希望有人可以帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T11:48:15.770

终于明白了，希望这对其他人也有帮助。

```
 function showResult(str)
{
 if (str.length==0)
 {
    document.getElementById("search-result").innerHTML="";
    document.getElementById("search-result").style.border="0px";
    return;
 }
 if (window.XMLHttpRequest)
 {// code for IE7+, Firefox, Chrome, Opera, Safari
    xmlhttp=new XMLHttpRequest();
 }
 else
 {// code for IE6, IE5
    xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
 }
    xmlhttp.onreadystatechange=function()
 {
 if (xmlhttp.readyState==4 && xmlhttp.status==200)
  {
    document.getElementById("search-result").innerHTML=xmlhttp.responseText;
    document.getElementById("search-result").style.border="1px solid #A5ACB2";
    document.getElementById("search-result").autocomplete="off";
    document.getElementById("search-result").style.display="block";
    var fired  = false;
    var closeBox = false;
    document.onclick = function()
     {
        if(closeBox){
        return;
        }else{close_box_fadeOut();closeBox = true;}
        if(!fired)
        {
    document.getElementById("search-input").onmouseenter = function(){
        show_box_fadeIn();  delete this.onmouseenter;};
        };
     }
    document.getElementById("search-input").onmouseleave = function()
     {
        var fired = true;
        if(fired){
              document.getElementById("search-input").onmouseenter = function(){show_box()};
                 };closeBox = false;
      }
    document.getElementById("search-input").onclick = function(e)
     {
        if(!e) {
        e = window.event;
        }

        if(e.stopPropagation && e.preventDefault) {
        e.stopPropagation();
        e.preventDefault();
        } else {
        e.cancelBubble = true;
        e.returnValue = false;
        }show_box(); return true;
     }
  }
}
xmlhttp.open("GET","instant-search.php?keyword="+str,true);
xmlhttp.send();
}
function show_box(){
    document.getElementById("search-result").style.display="block";
}
function show_box_fadeIn(){
    setOpacity( 0 );
    document.getElementById("search-result").style.display="block";
    fadeIn()
}
function close_box(){
    document.getElementById("search-result").style.display="none";
}
function close_box_fadeOut(){
    setOpacity( 100 );
    document.getElementById("search-result").style.display="block";
    fadeOut();
    setTimeout(close_box, 400);
}
function setOpacity( value ) {
 document.getElementById("search-result").style.opacity = value / 10;
 document.getElementById("search-result").style.filter = 'alpha(opacity=' + value * 10 + ')';
}
function fadeIn() {
 for( var i = 10 ; i <= 100 ; i++ )
   setTimeout( 'setOpacity(' + (i / 5) + ')' , 5 * i );
}
function fadeOut() {
 for( var i = 10 ; i <= 100 ; i++ ) 
   setTimeout( 'setOpacity(' + (6 - i / 6) + ')' , 6 * i );
} 
```

# javascript - 一个 javascript 函数导致来自不同函数的“意外标识符”错误

> ID：11807198
> 
> 赞同：0
> 
> 时间：2012-08-04T08:43:30.497
> 
> 标签：javascript, jquery, debugging

我在链接的`onClick`属性中调用以下函数。页面上有两个这样的链接。当我单击其中一个链接时。一切正常。当我单击另一个链接时，我从**另一个**函数收到“意外标识符错误”。

根据 Chrome 的控制台。错误是“未捕获的语法错误：意外的标识符”。它源于**我没有点击的功能，**在下面代码中的注释指示的行。

为什么会这样？

```
<a href="#" onClick="
    FB.ui({
            method: 'send',
            link: 'http://www.mydomain.com',
            show_error: true,
            display: 'popup',
        },

        function (response) {

            //ERROR IS HERE

            console.log( 'After FB.ui()' );                 
            jQuery.post(
                '<?php echo admin_url( 'admin-ajax.php' ); ?>',
                {
                    action : 'fb_invite_milestone',
                    postID : MyAjax.postID
                }
            );
        }     
    );
">LINK</a> 
```

**更新：** 已解决！...但我很尴尬地说为什么。阅读下面的答案，看看我有多愚蠢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T10:10:34.123

Oh no!! TOTALLY STUPID MISTAKE: The PHP block inside the callback function was breaking the js syntax because in one instance the function was already inside `<?php ?>` and in the other it was not. I missed it because the syntax highlighting was confused by the fact that it was inside a string.

# jquery - jquery ui dialog does not close?

> ID：11807200
> 
> 赞同：0
> 
> 时间：2012-08-04T08:44:27.690
> 
> 标签：jquery, asp.net-mvc-3, jquery-ui-dialog

I cant get my dialog to close, what am I doing wrong here? I am trying to integrate this script in my asp.net mvc 3 app?

```
<p id="dialog_link" style="cursor: pointer;">
    Open Dialog
</p>
<div id="Dialog" title="Dialog title!" style="display: none;">
    @*  @{Html.RenderAction("Categories");}*@
    @{Html.RenderAction("About");}
</div>
<link href="../../Content/jquery.ui.all.css" rel="stylesheet" type="text/css" />
<script src="../../Scripts/jquery-1.5.1.js" type="text/javascript"></script>
<script src="../../Scripts/jquery-ui-1.8.11.min.js" type="text/javascript">
</script>
<script type language="javascript">

    $(function () {
        var execute = function () {
            //alert('This is Ok button');
        };
        var cancel = function() {
            //alert('This is Cancel button');
            $("#Dialog").dialog('close');
        };
        var dialogOpts = {
            buttons: {
                "Ok": execute,
                "Cancel": cancel
            }
        };
        $("#Dialog").dialog(dialogOpts);
    });

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T09:03:43.860

Try this: [http://jsfiddle.net/FgRqx/](http://jsfiddle.net/FgRqx/)

```
<script type="text/javascript">

    $(function () {
        $('#dialog_link').click(function(e){
            e.preventDefault();

            $("#Dialog").dialog({
                buttons:    {
                    'OK': function(){
                        console.log('OK clicked!');
                    },
                    'Close': function(){
                        $(this).dialog('close');
                    }
                }
            });
        });
    });

</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T09:04:04.353

check this fiddle

[http://jsfiddle.net/piyushsardana47/26hzZ/](http://jsfiddle.net/piyushsardana47/26hzZ/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T09:07:38.473

**Working demo** [http://jsfiddle.net/BWXNe/](http://jsfiddle.net/BWXNe/)

something like this man! Hope it fits your cause!

**scripts**

```
 <script type='text/javascript' src='http://code.jquery.com/jquery-1.5.js'></script>
  <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.js"></script>

      <link rel="stylesheet" type="text/css" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.7.0/themes/blitzer/jquery-ui.css"> 
```

**code**

```
$(document).ready(function() {
    $('#dialog_link').click(function(){
                $( "#Dialog" ).dialog( "open" );    
    });

    $( "#Dialog" ).dialog({
            modal: true,
            autoOpen: false,
            height: 255,
            width: 300,
            buttons: {
                "Retrieve": function() {

                },
                Cancel: function() {
                    $( this ).dialog( "close" );
                }
            },
    });

});

​ 
```

# email - 验证收件人已阅读邮件并验证收件人电子邮件 ip

> ID：11807204
> 
> 赞同：0
> 
> 时间：2012-08-04T08:45:12.887
> 
> 标签：email, smtp

我正在开发允许发件人发送邮件的 C# 项目，并且：

*   验证收件人是否已阅读电子邮件？
*   验证收件人的电子邮件是否位于收件箱或垃圾邮件中...
*   验证收件人的电子邮件 ip
*   验证收件人单击发件人电子邮件上的链接

我不知道如何开始处理这些问题:(

感谢并感谢您的帮助！！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T08:49:58.077

简短的回答：

*   如果不在接收方一侧部署代码/软件，您就无法可靠地/根本无法执行 1、2 和 3。
*   你可以用链接重定向做 4。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-04T09:05:04.017

基于您无权访问收件人的计算机，以下是 patrix 简短答案的长答案版本：

> **验证收件人是否已阅读电子邮件？**

不幸的是，电子邮件从未被设计为让您知道何时收到电子邮件，并且很少（当然也没有我所知道的标准邮件客户端）会报告邮件是否正确接收*，更不用说打开了。*但是，有时*您可以通过嵌入 HTML 图像标记来跟踪电子邮件[，并跟踪从服务器下载该图像的时间](https://stackoverflow.com/questions/5448381/tracking-email-with-php-and-image)。有很多警告，例如它仅适用于 HTML 电子邮件，并且仅在启用图像的情况下，但这是跟踪电子邮件打开的唯一“可靠”方法之一，也是邮件列表提供商（谁需要考虑很多这些东西）

[* 许多客户实施了一种称为“已读回执”（技术上是消息处置通知或 MDN）的功能，但我相信很少有人使用过，它会发送一封电子邮件*以响应*阅读电子邮件。电子邮件可以通过设置适当的标题来请求已读回执，但收件人可以选择回复。]

> **验证收件人的电子邮件是否位于收件箱或垃圾邮件中...**

几乎不可能；首先，“垃圾邮件”文件夹的概念并非普遍存在于所有邮件客户端，也从未成为任何电子邮件规范的一部分[据我所知]。在第二种情况下，正如我所提到的，很少（如果有的话）电子邮件客户端报告电子邮件的状态，更不用说它被放入的文件夹了。

> **验证收件人的电子邮件 ip**

同样，不可靠，但是如果您按照我在第 1 点中提到的那样实施基于图像的跟踪，您将在这方面取得一些进展

> **验证收件人单击发件人电子邮件上的链接**

这称为“点击跟踪”。这可以相当“容易”地完成。您不是直接提供指向某个位置的链接，而是首先链接到跟踪 URL。例如，您应该链接到[http://mydomain.com/TRACKINGID](http://mydomain.com/TRACKINGID)而不是链接到[http://www.example.com](http://www.example.com) ，然后它会重定向到[http://www.example.com](http://www.example.com) *。然后，在服务器端，您可以在访问[http://mydomain.com/TRACKINGID](http://mydomain.com/TRACKINGID)时登录。然后，您可以将唯一的跟踪 ID 放入每个收件人的每封电子邮件中，例如，收件人 A 收到一个指向[http://mydomain.com/TRACKIDA](http://mydomain.com/TRACKIDA)的链接，而收件人 B 收到一个指向[http://mydomain.com/TRACKIDB的链接](http://mydomain.com/TRACKIDB). /TRACKIDA 和 /TRACKIDB 都重定向到 example.com，但是，假设您正在记录 HTTP 请求，您可以看到谁访问了他们的链接、他们从哪里访问、他们何时访问该链接以及他们访问了多少次。

这是所有邮件列表提供商跟踪点击率的方式，以及您大致需要做的事情

[* 请注意，您显然需要相关软件来执行此操作，例如使用“简单”的 PHP 页面，或使用 Apache mod_rewrite - 真的可以让您的船漂浮]

# java - 在 valueOf() 和 newInstance() 之间选择的标准是什么？

> ID：11807206
> 
> 赞同：5
> 
> 时间：2012-08-04T08:45:55.307
> 
> 标签：java, factory-method, coding-style

假设我有一个类 ObjectInfo，其中包含对象名称和对象类型作为字符串。（我只是为了提出问题而做一些事情。）

```
class ObjectInfo {
    String objectName;

    String objectType;

    private ObjectInfo(String objectName, String objectType) {
          this.objectName = objectName;
          this.objectType = objectType;
    }
} 
```

如果我想提供一个静态工厂方法来创建此类的实例，以下两种方法中哪一种更好？为什么？

```
public static ObjectInfo newInstance(String objectName, String objectType) {
    return new ObjectInfo(objectName, objectType)    
}

public static ObjectInfo valueOf(String objectName, String objectType) {
    return new ObjectInfo(objectName, objectType)    
} 
```

基本上，我想问的是我们什么时候应该使用 valueOf() 和什么时候 newInstance() ？程序员社区之间有什么约定吗？

-Ankit

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T08:52:26.220

没有官方标准，但这是我的看法，

`valueOf`或`acquire`暗示您将获得任何包含相同信息的实例。

`newInstance`或`create`暗示您每次都会得到不同的实例。

`get`意味着如果它存在或`null`不存在，您将获得一个实例。

在你的情况下`newInstance`还是`create`合适的。

参考

```
Integer.valueOf(1) == Integer.valueOf(1) // you get the same object
Integer.valueOf(-200) != Integer.valueOf(-200) // you get a different object. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T08:53:36.063

通常，在 java 中，当需要一些其他类型数据的字符串表示时调用 String.valueOf()。在原始包装器（Integer、Double）的情况下，valueOf() 接受一个字符串（“12”）并创建该包装器的一个实例。

在您的情况下，您尝试使用多个参数创建一个新对象。那是一种工厂方法。称它为 newInstance 更有意义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T09:06:22.280

当您说 new Instance 在这种情况下有意义时，您回答了自己的问题`And If I want to provide a static factory method to creating instances of this class` （即使 valueOf 和 new 都这样做）。对我来说 valueOf （顾名思义）当您想从现有对象（不一定是整个对象状态）中检索一些有意义的状态信息时是有意义的，其中`new`创建全新的实例也是如此。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T09:06:55.837

```
 public static ObjectInfo newObjectInfo(String objectName, String objectType) 
```

对于静态工厂方法，我会使用上述命名约定。如果方法消费者想要使用静态导入，这很有用：

```
import static foo.ObjectInfo.newObjectInfo;
//....
ObjectInfo info = newObjectInfo(foo, bar); 
```

[您可以在 Guava API](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Maps.html)中看到这种模式。

# grails - Grails 自动编译不在开发环境中

> ID：11807207
> 
> 赞同：3
> 
> 时间：2012-08-04T08:45:58.133
> 
> 标签：grails, auto-compile

我在称为“本地”的环境中运行 Grails 2.1，因为“开发”是为暂存系统保留的。但我想必须像在开发模式下那样自动编译，即如果我正在更改控制器，则更改将在一个不重新运行“run-app”的情况下编译。参数 grails.gsp.enable.reload=true 不起作用。

任何提示都非常感谢。提前致谢

雷托

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T10:23:24.173

尝试启动

```
grails local -reloading run-app 
```

# php - MySQL 条目按错误顺序按日期排序

> ID：11807208
> 
> 赞同：0
> 
> 时间：2012-08-04T08:46:05.340
> 
> 标签：php, mysql, date, sql-order-by

通过 PHP使用 MySQL`SELECT`查询，我想按日期排序我的条目。我正在使用的查询是：

```
$query = "SELECT title, file, oblong_pic, square_pic,
DATE_FORMAT(date, '%W %d %M %Y') AS date
FROM dyhamb ORDER BY date DESC"; 
```

我有四个条目的日期：24/7/2012、1/7/2012、5/6/2012 和 10/4/2012，并希望它们按该顺序显示，但它们显示为：24/7/ 2012 年、2010 年 10 月 4 日、2012 年 5 月 6 日和 2012 年 1 月 7 日。

我只能认为我以某种方式错误地设置了我的查询，但我看不出我哪里出错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T08:51:42.770

DATE_FORMAT 中的 %W 是工作日名称，因此排序从该名称开始

如果你想使用日期别名，你应该将你的 sql 查询重写为：

```
$query = "SELECT title, file, oblong_pic, square_pic, date AS sort_date,
DATE_FORMAT(date, '%W %d %M %Y') AS date
FROM dyhamb ORDER BY sort_date DESC"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T08:55:20.940

您已定义与现有列同名的列别名。因此，排序基于 DATE_FORMAT 函数，而不是日期实际值。

作为一个好的做法，我建议从 mysql 查询中删除 DATE_FORMAT 函数，并将这部分留给您的 php 脚本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T08:50:49.657

`DATE_FORMAT`返回字符串，因此您将其作为字符串排序，您正在使用其中`%W`，因此您首先按工作日名称排序。如果您想按日期订购，请执行以下操作：

```
SELECT title, file, oblong_pic, square_pic, date
FROM dyhamb 
ORDER BY date DESC 
```

如果您真的想选择格式化日期然后添加`DATE_FORMAT(date, '%W %d %M %Y') as formatted_date`到选定的列，请注意列别名不是`date`but `formatted_date`。

# sparql - 如何使用 Sparql 查询从 wordnet 中查找 Hypernym 关系？

> ID：11807209
> 
> 赞同：1
> 
> 时间：2012-08-04T08:46:22.530
> 
> 标签：sparql, wordnet

如何使用 Sparql 查询从 wordnet 中查找 Hypernym 关系？
我可以很容易地找到下位词关系，但我无法找到上位词关系。

以下是下义词关系的示例。

```
"SELECT ?hypo "
+ "WHERE {"
                    + "  wn20instances:synset-tank-noun-1 wn20schema:hyponymOf*  ?hypo . " 
                    + "}"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T15:26:56.930

简单地扭转关系对你有用吗？

反转属性的意义：

```
{ wn20instances:synset-tank-noun-1 (^wn20schema:hyponymOf)* ?hyper  . } 
```

或（颠倒主语/宾语）

```
{ ?hyper wn20schema:hyponymOf* wn20instances:synset-tank-noun-1 . } 
```

# java - 使用 jbutton 突出显示 JList

> ID：11807210
> 
> 赞同：0
> 
> 时间：2012-08-04T08:46:27.337
> 
> 标签：java, swing, highlight, jlist

我使用基于 Swing 的简单 GUI 用 Ja​​va 编写了一个小注释器，但我遇到了一个让我感到害怕的问题。问题是：我有一个 jlist 和两个修改此类 jlist 的 jbutton，这两个按钮具有相同的侦听器，但它们的工作方式不同。它应该像这样工作：一旦您在 jlist 中选择了一行，您可以将其标记为 ON TOPIC 或 OFF TOPIC（使用两个按钮），该行更改颜色，然后选择下一行但是；即使选择在右行（下一个），它也会为关闭主题按钮突出显示下一个，为什么？

这是代码：

```
public class TweetsAnnotator {

static Boolean[] annotations = null;
@SuppressWarnings("rawtypes")
static JList jl;
static JButton offbutton = new JButton("OFF Topic");
static JButton onbutton = new JButton("ON Topic");
static String file = "inception_TweetList";

public TweetsAnnotator() {
}

/**
 * @param args
 * @throws IOException 
 * @throws FileNotFoundException 
 * @throws ClassNotFoundException 
 */
@SuppressWarnings({ "unchecked", "rawtypes" })
public static void main(String[] args) throws FileNotFoundException, IOException, ClassNotFoundException {

    // Read Tweets from file
    ObjectInputStream load = new ObjectInputStream(new FileInputStream(file));
    ArrayList<String> list = (ArrayList<String>) load.readObject();
    load.close();
    System.out.println(list.size() + " Tweets read from: " + file);

    // Check and read annotations
    File fileannot = new File(file + "Annotations");
    if (fileannot.exists()) {
        System.out.println("esiste, leggo");
        ObjectInputStream loadannot = new ObjectInputStream(new FileInputStream(file + "Annotations"));
        annotations = (Boolean[]) loadannot.readObject();
        loadannot.close();
    } else {
        System.out.println("non esiste, creo poi leggo");
        ObjectOutputStream save = new ObjectOutputStream(new FileOutputStream(file + "Annotations"));
        Boolean[] creatannotations = new Boolean[list.size()];
        for (int i=0; i<list.size(); i++) {
            creatannotations[i] = (Boolean) null;
        }
        save.writeObject(creatannotations);
        save.close();
        ObjectInputStream loadannot = new ObjectInputStream(new FileInputStream(file + "Annotations"));
        annotations = (Boolean[]) loadannot.readObject();
        loadannot.close();
    }
    System.out.println(annotations.length + " Annotations loaded");     

    // Buttons
    offbutton.setActionCommand("off");
    offbutton.addActionListener(new ButtonListener());
    offbutton.setEnabled(false);
    onbutton.setActionCommand("on");
    onbutton.addActionListener(new ButtonListener());
    onbutton.setEnabled(false);

    // ButtonPanel
    JPanel buttonPane = new JPanel();
    buttonPane.setLayout(new BoxLayout(buttonPane, BoxLayout.X_AXIS));
    buttonPane.add(onbutton);
    buttonPane.add(offbutton);

    // JList
    jl = new JList((Object[])list.toArray());
    jl.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
    jl.setLayoutOrientation(JList.VERTICAL);
    jl.setVisibleRowCount(-1);
    jl.setCellRenderer(new MyCellRenderer());
    ListSelectionListener listSelectionListener = new ListSelectionListener() {

        public void valueChanged(ListSelectionEvent e) {
            if (e.getValueIsAdjusting() == false) {
                if (jl.getSelectedIndex() == -1) {
                    //No selection, disable buttons.
                    onbutton.setEnabled(false);
                    offbutton.setEnabled(false);
                } else {
                    //Selection, enable buttons.
                    onbutton.setEnabled(true);
                    offbutton.setEnabled(true);
                }
            }
        }
    };
    jl.addListSelectionListener(listSelectionListener);

    // JScrollPane
    JScrollPane listScroller = new JScrollPane(jl);

    // JFrame
    JFrame frame = new JFrame(file);
    frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
    frame.setExtendedState(frame.getExtendedState()|JFrame.MAXIMIZED_BOTH);
    frame.addWindowListener(new WindowCloseHandler());

    // Add and show
    frame.getContentPane().add(listScroller, BorderLayout.CENTER);
    frame.getContentPane().add(buttonPane, BorderLayout.PAGE_END);
    frame.pack();
    frame.setVisible(true);

}

private static class MyCellRenderer extends DefaultListCellRenderer {   

    private static final long serialVersionUID = 1L;

    @SuppressWarnings("rawtypes")
    public Component getListCellRendererComponent( JList list, Object value, int index, boolean isSelected, boolean cellHasFocus ) {   
        Component c = super.getListCellRendererComponent( list, value, index, isSelected, cellHasFocus );   
        if ( annotations[index] == null ) {   
            c.setBackground( Color.white );   
        }   
        else if (annotations[index] == true) {   
            c.setBackground( Color.green );   
        } else {
            c.setBackground( Color.red);
        }
        return c;   
    } 
}

private static class ButtonListener implements ActionListener {

    public void actionPerformed(ActionEvent e) {
        int ind = jl.getSelectedIndex() +1;
        if (e.getActionCommand().equals("on")) {
            System.out.println("ON");
            annotations[jl.getSelectedIndex()] = true;
        }
        if (e.getActionCommand().equals("off")) {
            System.out.println("OFF");
            annotations[jl.getSelectedIndex()] = false;

        }
        jl.clearSelection();
        jl.setSelectedIndex(ind);
    }
}

private static class WindowCloseHandler extends WindowAdapter {

    public void windowClosing(WindowEvent evt) {
        ObjectOutputStream save = null;
        try {
            save = new ObjectOutputStream(new FileOutputStream(file + "Annotations"));
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        try {
            save.writeObject(annotations);
        } catch (IOException e) {
            e.printStackTrace();
        }
        try {
            save.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
        System.out.println("Saved.");
    }
}
} 
```

即使 jl.requestFocus(); 工作正常，我尝试了另一件事让它工作：我交换了这两行

```
buttonPane.add(onbutton);
buttonPane.add(offbutton); 
```

但为什么？对不起，如果我再问一次，但这真的很奇怪，不是吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T08:55:51.510

在你的单元格渲染中，试试这个

```
if (annotations[index] == null) {
    //c.setBackground(Color.white);
} else if (annotations[index] == true) {
    c.setBackground(Color.green);
} else {
    c.setBackground(Color.red);
} 
```

对于“小”扩展的东西，您也可以尝试

```
private static class MyCellRenderer extends DefaultListCellRenderer {

    private static final long serialVersionUID = 1L;

    private static final Border SELECTION_BORDER = new LineBorder(UIManager.getColor("List.selectionBackground"));
    private static final Border EMPTY_BORDER = new EmptyBorder(1, 1, 1, 1);

    @SuppressWarnings("rawtypes")
    public Component getListCellRendererComponent(JList list, Object value, int index, boolean isSelected, boolean cellHasFocus) {
        Component c = super.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);
        setBorder(EMPTY_BORDER);
        if (annotations[index] == null) {

            if (isSelected) {

                setBorder(SELECTION_BORDER);

            }

            c.setBackground(Color.white);
        } else if (annotations[index] == true) {
            c.setBackground(Color.green);
        } else {
            c.setBackground(Color.red);
        }
        return c;
    }
} 
```

基本上，您所做的是更改选择突出显示颜色，隐藏选择。至于为什么您确实得到了一个“似乎”突出显示所选行的油漆工件，对我来说仍然是一个谜：P

**更新了知道为什么**

您有时得到的绘制工件是`hasFocus`单元格渲染器参数的结果，绘制了一个焦点矩形。

现在，如果您想保留现有的单元格渲染器，请在 ActionEvent 中尝试此操作

```
 //jl.clearSelection();
 jl.setSelectedIndex(ind);
 jl.requestFocus(); 
```

据我所知，重绘管理器似乎有点奇怪。如果我将现有代码添加`jl.repaint()`到您的现有代码中（在`setSelectedIndex`调用下），我可以让它永远不会绘制焦点矩形：P

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T09:24:10.447

没有解决您的问题，没有解决某些问题，永远不要运行您的代码，只需将其拆分为逻辑块，添加最低要求的规则，抱歉最多 5 分钟

```
import java.awt.*;
import java.awt.event.*;
import java.io.*;
import java.util.ArrayList;
import javax.swing.*;
import javax.swing.event.*;

public class TweetsAnnotator {

    private Boolean[] annotations = null;
    private JList jl;
    private JButton offbutton = new JButton("OFF Topic");
    private JButton onbutton = new JButton("ON Topic");
    private String file = "inception_TweetList";
    private ArrayList<String> list;
    private ObjectInputStream load;
    private ObjectInputStream loadannot;
    private ObjectOutputStream save;

    public TweetsAnnotator() {// Read Tweets from file
        loadDatas();
        offbutton.setActionCommand("off"); // Buttons
        offbutton.addActionListener(new ButtonListener());
        offbutton.setEnabled(false);
        onbutton.setActionCommand("on");
        onbutton.addActionListener(new ButtonListener());
        onbutton.setEnabled(false);
        JPanel buttonPane = new JPanel(); // ButtonPanel
        buttonPane.setLayout(new BoxLayout(buttonPane, BoxLayout.X_AXIS));
        buttonPane.add(onbutton);
        buttonPane.add(offbutton);
        jl = new JList(list.toArray()); // JList
        jl.setSelectionMode(ListSelectionModel.SINGLE_SELECTION);
        jl.setLayoutOrientation(JList.VERTICAL);
        jl.setVisibleRowCount(-1);
        jl.setCellRenderer(new MyCellRenderer());
        ListSelectionListener listSelectionListener = new ListSelectionListener() {

            @Override
            public void valueChanged(ListSelectionEvent e) {
                if (e.getValueIsAdjusting() == false) {
                    if (jl.getSelectedIndex() == -1) {
                        onbutton.setEnabled(false); //No selection, disable buttons.
                        offbutton.setEnabled(false);
                    } else {
                        onbutton.setEnabled(true); //Selection, enable buttons.
                        offbutton.setEnabled(true);
                    }
                }
            }
        };
        jl.addListSelectionListener(listSelectionListener);
        JScrollPane listScroller = new JScrollPane(jl); // JScrollPane
        JFrame frame = new JFrame(file); // JFrame
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.setExtendedState(frame.getExtendedState() | JFrame.MAXIMIZED_BOTH);
        frame.addWindowListener(new WindowCloseHandler());
        frame.add(listScroller, BorderLayout.CENTER); // Add and show
        frame.add(buttonPane, BorderLayout.PAGE_END);
        frame.pack();
        frame.setVisible(true);
    }

    private void loadDatas() {
        try {
            load = new ObjectInputStream(new FileInputStream(file));
            list = (ArrayList<String>) load.readObject();
            System.out.println(list.size() + " Tweets read from: " + file);
            File fileannot = new File(file + "Annotations"); // Check and read annotations
            if (fileannot.exists()) {
                System.out.println("esiste, leggo");
                loadannot = new ObjectInputStream(new FileInputStream(file + "Annotations"));
                annotations = (Boolean[]) loadannot.readObject();
                loadannot.close();
            } else {
                System.out.println("non esiste, creo poi leggo");
                save = new ObjectOutputStream(new FileOutputStream(file + "Annotations"));
                Boolean[] creatannotations = new Boolean[list.size()];
                for (int i = 0; i < list.size(); i++) {
                    creatannotations[i] = (Boolean) null;
                }
                save.writeObject(creatannotations);
                loadannot = new ObjectInputStream(new FileInputStream(file + "Annotations"));
                annotations = (Boolean[]) loadannot.readObject();
            }
            System.out.println(annotations.length + " Annotations loaded");
        } catch (IOException ex) {
            ex.printStackTrace();
            System.out.println(" Something wrong happened");
        } catch (ClassNotFoundException ex) {
            ex.printStackTrace();
            System.out.println(" Something wrong happened");
        } finally {
            if (load != null) {
                try {
                    load.close();
                } catch (IOException ex) {
                }
            }
            if (save != null) {
                try {
                    save.close();
                } catch (IOException ex) {
                }
            }
            if (loadannot != null) {
                try {
                    loadannot.close();
                } catch (IOException ex) {
                }
            }
        }
        System.out.println("Load block ended");
    }

    private class MyCellRenderer extends DefaultListCellRenderer {

        private static final long serialVersionUID = 1L;

        @Override
        public Component getListCellRendererComponent(JList list, Object value, int index, boolean isSelected, boolean cellHasFocus) {
            Component c = super.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);
            if (annotations[index] == null) {
                c.setBackground(Color.white);
            } else if (annotations[index] == true) {
                c.setBackground(Color.green);
            } else {
                c.setBackground(Color.red);
            }
            return c;
        }
    }

    private class ButtonListener implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent e) {
            int ind = jl.getSelectedIndex() + 1;
            if (e.getActionCommand().equals("on")) {
                System.out.println("ON");
                annotations[jl.getSelectedIndex()] = true;
            }
            if (e.getActionCommand().equals("off")) {
                System.out.println("OFF");
                annotations[jl.getSelectedIndex()] = false;
            }
            jl.clearSelection();
            jl.setSelectedIndex(ind);
        }
    }

    private class WindowCloseHandler extends WindowAdapter {

        @Override
        public void windowClosing(WindowEvent evt) {
            ObjectOutputStream save = null;
            try {
                save = new ObjectOutputStream(new FileOutputStream(file + "Annotations"));
            } catch (FileNotFoundException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            }
            try {
                save.writeObject(annotations);
            } catch (IOException e) {
                e.printStackTrace();
            }
            try {
                save.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
            System.out.println("Saved.");
        }
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                TweetsAnnotator tweetsAnnotator = new TweetsAnnotator();
            }
        });
    }
} 
```

# asp.net-mvc-3 - EF Code First 和 ASP.NET 成员资格提供程序

> ID：11807223
> 
> 赞同：2
> 
> 时间：2012-08-04T08:48:15.950
> 
> 标签：asp.net-mvc-3, entity-framework, ef-code-first, asp.net-roles

我正在使用 MVC 3 构建一个 Web 应用程序。它具有不同角色和权限的用户。我正在使用 EF Code First 方法来创建数据库。我的用户模型类是：

```
public class Users
    {
        public int UserID { get; set; }

        public Name Name { get; set; }

        public Address Address { get; set; }

        public Contact Contact { get; set; }

    }

    public class Name
    {
        [Required, MaxLength(50), Display(Name = "First Name"), Column("FirstName")]
        public string FirstName { get; set; }

        [MaxLength(50), Display(Name = "Middle Name"), Column("MiddleName")]
        public string MiddleName { get; set; }

        [Required, MaxLength(50), Display(Name = "Last Name"), Column("LastName")]
        public string LastName { get; set; }
    }

    public class Address
    {
        [Required, MaxLength(50), Display(Name = "Street"), Column("Street")]
        public string Street { get; set; }

        [Required, MaxLength(50), Display(Name = "City"), Column("City")]
        public string City { get; set; }

        [Required, MaxLength(50), Display(Name = "Country"), Column("Country")]
        public string Country { get; set; }

        [Required, MaxLength(5), Display(Name = "Postal Code"), Column("PostalCode")]
        public string PostalCode { get; set; }
    }

    public class Contact
    {
        [Required, MaxLength(50), Display(Name = "Email"), Column("Email")]
        public string Email { get; set; }

        [Required, MaxLength(50), Display(Name = "Phone"), Column("Phone")]
        public string Phone { get; set; }

        [Required, MaxLength(50), Display(Name = "Fax"), Column("Fax")]
        public string Fax { get; set; }
    } 
```

但是对于角色和身份验证，我想使用默认`aspnetdb.mdf`的`App_Data`文件夹。如何将我的`Users`表与默认`Users`表链接`aspnetdb.mdf`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T09:02:22.980

由于您似乎正在创建一个新站点和数据库，因此我不会这样做，除非您出于任何原因必须这样做。

我会使用 UserProfile 为用户存储附加信息，例如地址、电话、传真等，查看[Membership User Profile API](http://msdn.microsoft.com/en-us/library/2y3fs9xs%28v=vs.100%29.aspx)以添加自定义属性。

[这篇文章](http://odetocode.com/articles/440.aspx)也可能会有所帮助，它有点旧，但如果需要它应该可以帮助你。

# android - 与上面的 EditText 相比，EditText 宽度更长

> ID：11807225
> 
> 赞同：1
> 
> 时间：2012-08-04T08:49:15.043
> 
> 标签：android

我有一个包含一个 AutoCompleteTextView 和一个 EditText 的活动。通过 xml 文件禁用了 edittext，但与未禁用的 AutoCompleteTextView 相比，宽度更长。为什么？以及我怎样才能让它具有相同的大小。这是第二个编辑文本的 xml 代码。请帮助。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:padding="10dip"
android:gravity="right"> 

<TextView
    android:id="@+id/cusNameTV"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/customerName"
    android:textColor="#FFFFFF" 
    android:layout_gravity="right"
    />

<AutoCompleteTextView
    android:id="@+id/cusName_CB"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/>

<TextView
    android:id="@+id/cusaddrTV"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content" 
    android:text="@string/cusaddress"
    android:textColor="#FFFFFF"
    android:layout_marginBottom="5dip"
    android:layout_marginTop="5dip" 
    android:layout_gravity="right"/>

<EditText
    android:id="@+id/editText_cusAddress"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@android:color/darker_gray"
    android:clickable="false"
    android:cursorVisible="false"
    android:focusable="false"
    android:focusableInTouchMode="false"
    android:inputType="none"
    android:state_enabled="false"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T10:03:42.643

根据您的 XML，`EditText`背景是灰色的，没有边框。但是`AutoCompleteTextView`没有背景颜色。所以你有边界线`AutoCompleteTextView`。这让你看起来`AutoCompleteTextView`比`EditText`.

我已经为这两个视图提供了背景颜色，现在看起来一样了。

边界线只会让你感到困惑。

比较如下：

你的 XML 布局是![在此处输入图像描述](../Images/9da45d0bce1f3f8bf4ad330cb6360be3.png)

编辑后的布局是![在此处输入图像描述](../Images/18701060726f9ba629ee59bcbc4a46ec.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T09:00:39.773

```
 <RelativeLayout 
       xmlns:android="http://schemas.android.com/apk/res/android"
       android:id="@+id/main"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent">

    <TextView
         android:id="@+id/host_label"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_below="@+id/home"
         android:paddingTop="0dp"
         android:paddingLeft="15dp"
         android:textSize="25sp"
         android:textColor="#a5d4e2"
        android:text="host"
         android:textStyle="normal"
        />
  <TextView
     android:id="@+id/port_label"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:layout_below="@+id/home"
     android:layout_toRightOf="@+id/host_input"
     android:paddingTop="0dp"
     android:textSize="25sp"
     android:textColor="#a5d4e2"
     android:text="port"
     android:textStyle="normal"  />

    <EditText 
          android:id="@+id/host_input" 
          android:inputType="textEmailAddress"
         android:layout_width="172dp" 
         android:layout_height="wrap_content" 
         android:background="@android:drawable/editbox_background"
         android:layout_below="@id/host_label"
         android:layout_marginTop="4dp" 
         android:layout_marginLeft="15dp" 
         android:layout_marginRight="15dp"  />

      <EditText 
        android:id="@+id/port_input" 
        android:inputType="number"
        android:layout_width="100dp" 
        android:layout_height="wrap_content" 
        android:background="@android:drawable/editbox_background"
        android:layout_below="@id/host_label"
        android:layout_toRightOf="@id/host_input"
        android:layout_marginTop="4dp"/>

    <TextView
        android:id="@+id/username_label"
        android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_below="@+id/host_input"
       android:paddingTop="15dp"
       android:paddingLeft="15dp"
       android:textSize="25sp"
        android:textColor="#a5d4e2"
       android:text="username"
       android:textStyle="normal"/>

        <EditText 
            android:id="@+id/username_input" 
           android:inputType="textEmailAddress"
           android:layout_width="fill_parent" 
           android:layout_height="wrap_content" 
           android:background="@android:drawable/editbox_background"
           android:layout_below="@id/username_label"
           android:layout_marginTop="4dp" 
           android:layout_marginLeft="15dp" 
          android:layout_marginRight="15dp" 
   /> 
```

# mysql - 右连接与左连接

> ID：11807226
> 
> 赞同：2
> 
> 时间：2012-08-04T08:49:17.960
> 
> 标签：mysql, sql, join, left-join, one-to-many

在这种情况下，左连接与右连接相同吗？

```
mysql> 
mysql> 
mysql> use usenet;show tables;describe ARTICLE;describe NEWSGROUP;
Database changed
+------------------+
| Tables_in_usenet |
+------------------+
| ARTICLE          |
| NEWSGROUP        |
+------------------+
2 rows in set (0.00 sec)

+---------------+------------+------+-----+---------+----------------+
| Field         | Type       | Null | Key | Default | Extra          |
+---------------+------------+------+-----+---------+----------------+
| ID            | bigint(20) | NO   | PRI | NULL    | auto_increment |
| MESSAGENUMBER | int(11)    | YES  |     | NULL    |                |
| NEWSGROUP_ID  | bigint(20) | YES  | MUL | NULL    |                |
+---------------+------------+------+-----+---------+----------------+
3 rows in set (0.01 sec)

+-----------+--------------+------+-----+---------+----------------+
| Field     | Type         | Null | Key | Default | Extra          |
+-----------+--------------+------+-----+---------+----------------+
| ID        | bigint(20)   | NO   | PRI | NULL    | auto_increment |
| NEWSGROUP | varchar(255) | YES  |     | NULL    |                |
+-----------+--------------+------+-----+---------+----------------+
2 rows in set (0.00 sec)

mysql> 
mysql> select * from ARTICLE right join NEWSGROUP on ARTICLE.NEWSGROUP_ID=NEWSGROUP.ID;
+------+---------------+--------------+----+-------------------------------+
| ID   | MESSAGENUMBER | NEWSGROUP_ID | ID | NEWSGROUP                     |
+------+---------------+--------------+----+-------------------------------+
|    1 |             4 |            1 |  1 | gwene.com.androidcentral      |
|    2 |             5 |            1 |  1 | gwene.com.androidcentral      |
|    3 |             6 |            1 |  1 | gwene.com.androidcentral      |
|    4 |             7 |            1 |  1 | gwene.com.androidcentral      |
|    5 |             8 |            1 |  1 | gwene.com.androidcentral      |
|    6 |             9 |            1 |  1 | gwene.com.androidcentral      |
|    7 |            10 |            1 |  1 | gwene.com.androidcentral      |
|    8 |            11 |            1 |  1 | gwene.com.androidcentral      |
|    9 |             4 |            2 |  2 | gwene.com.blogspot.emacsworld |
|   10 |             4 |            3 |  3 | gwene.com.blogspot.googlecode |
|   11 |             5 |            3 |  3 | gwene.com.blogspot.googlecode |
|   12 |             6 |            3 |  3 | gwene.com.blogspot.googlecode |
|   13 |             7 |            3 |  3 | gwene.com.blogspot.googlecode |
|   14 |             8 |            3 |  3 | gwene.com.blogspot.googlecode |
|   15 |             9 |            3 |  3 | gwene.com.blogspot.googlecode |
|   16 |            10 |            3 |  3 | gwene.com.blogspot.googlecode |
|   17 |            11 |            3 |  3 | gwene.com.blogspot.googlecode |
|   18 |             4 |            4 |  4 | gwene.com.economist           |
|   19 |             5 |            4 |  4 | gwene.com.economist           |
|   20 |             6 |            4 |  4 | gwene.com.economist           |
|   21 |             7 |            4 |  4 | gwene.com.economist           |
|   22 |             8 |            4 |  4 | gwene.com.economist           |
|   23 |             9 |            4 |  4 | gwene.com.economist           |
|   24 |            10 |            4 |  4 | gwene.com.economist           |
|   25 |            11 |            4 |  4 | gwene.com.economist           |
+------+---------------+--------------+----+-------------------------------+
25 rows in set (0.00 sec)

mysql> 
mysql> select * from ARTICLE left join NEWSGROUP on ARTICLE.NEWSGROUP_ID=NEWSGROUP.ID;
+----+---------------+--------------+------+-------------------------------+
| ID | MESSAGENUMBER | NEWSGROUP_ID | ID   | NEWSGROUP                     |
+----+---------------+--------------+------+-------------------------------+
|  1 |             4 |            1 |    1 | gwene.com.androidcentral      |
|  2 |             5 |            1 |    1 | gwene.com.androidcentral      |
|  3 |             6 |            1 |    1 | gwene.com.androidcentral      |
|  4 |             7 |            1 |    1 | gwene.com.androidcentral      |
|  5 |             8 |            1 |    1 | gwene.com.androidcentral      |
|  6 |             9 |            1 |    1 | gwene.com.androidcentral      |
|  7 |            10 |            1 |    1 | gwene.com.androidcentral      |
|  8 |            11 |            1 |    1 | gwene.com.androidcentral      |
|  9 |             4 |            2 |    2 | gwene.com.blogspot.emacsworld |
| 10 |             4 |            3 |    3 | gwene.com.blogspot.googlecode |
| 11 |             5 |            3 |    3 | gwene.com.blogspot.googlecode |
| 12 |             6 |            3 |    3 | gwene.com.blogspot.googlecode |
| 13 |             7 |            3 |    3 | gwene.com.blogspot.googlecode |
| 14 |             8 |            3 |    3 | gwene.com.blogspot.googlecode |
| 15 |             9 |            3 |    3 | gwene.com.blogspot.googlecode |
| 16 |            10 |            3 |    3 | gwene.com.blogspot.googlecode |
| 17 |            11 |            3 |    3 | gwene.com.blogspot.googlecode |
| 18 |             4 |            4 |    4 | gwene.com.economist           |
| 19 |             5 |            4 |    4 | gwene.com.economist           |
| 20 |             6 |            4 |    4 | gwene.com.economist           |
| 21 |             7 |            4 |    4 | gwene.com.economist           |
| 22 |             8 |            4 |    4 | gwene.com.economist           |
| 23 |             9 |            4 |    4 | gwene.com.economist           |
| 24 |            10 |            4 |    4 | gwene.com.economist           |
| 25 |            11 |            4 |    4 | gwene.com.economist           |
+----+---------------+--------------+------+-------------------------------+
25 rows in set (0.00 sec)

mysql> 
mysql> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T09:09:45.427

不是真的，因为 RIGHT JOIN 和 LEFT JOIN 是对称的。那是：

```
A LEFT JOIN B = B RIGHT JOIN A 
```

RIGHT JOIN 只是语法糖。优化器可以将右连接重写为左连接：

```
mysql> explain extended select * from t right join t t2 using (c1)\G
*************************** 1\. row ***************************
           id: 1
  select_type: SIMPLE
        table: t2
         type: index
possible_keys: NULL
          key: c2
      key_len: 5
          ref: NULL
         rows: 4201
     filtered: 100.00
        Extra: Using index
*************************** 2\. row ***************************
           id: 1
  select_type: SIMPLE
        table: t
         type: eq_ref
possible_keys: PRIMARY
          key: PRIMARY
      key_len: 4
          ref: test.t2.c1
         rows: 1
     filtered: 100.00
        Extra: 
2 rows in set, 1 warning (0.00 sec) 
```

注意优化器重写中的 LEFT JOIN（交换了表）：

```
mysql> show warnings\G
*************************** 1\. row ***************************
  Level: Note
   Code: 1003
Message: select `test`.`t2`.`c1` AS `c1`,`test`.`t2`.`c2` AS `c2`,`test`.`t`.`c2` AS
`c2` from `test`.`t` `t2` left join `test`.`t` on((`test`.`t`.`c1` = `test`.`t2`.`c1`))  where 1
1 row in set (0.00 sec) 
```

注意 (A RIGHT JOIN B != A LEFT JOIN B) 除非 (A INNER JOIN B = A LEFT JOIN B)。这是因为 A RIGHT JOIN B 与 A LEFT JOIN B 不对称（它与 B LEFT JOIN A 对称）。

在您的情况下， A RIGHT JOIN B 将与 A LEFT JOIN B 相同，除非您要连接的列中有 NULL 值。如果有 NULL 值，则 A LEFT JOIN B 将与 A RIGHT JOIN B 不同。如果您添加新文章而不添加相关新闻组（反之亦然），那么结果也会发生变化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-20T07:06:44.113

Codeproject 有这张图片，它解释了 SQL 连接的简单基础知识，取自： http: [//www.codeproject.com/KB/database/Visual_SQL_Joins.aspx](http://www.codeproject.com/KB/database/Visual_SQL_Joins.aspx) SQL 连接解释 ![在此处输入图像描述](../Images/6f56cecb47db8ac90a7e15fe66a79de8.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T09:01:59.610

使用您当前的数据，是的，它们是相同的。但是，由于 NEWSGROUP_ID 可以为空，因此它们可能会随着数据的变化而不同。

就我个人而言，如果可能的话，我总是使用 LEFT JOIN（从主表到子表），事实上，在超过 6 年的 SQL 开发中，我只需要使用几次 RIGHT JOIN！

# javascript - 单页应用的 Javascript 依赖管理

> ID：11807229
> 
> 赞同：1
> 
> 时间：2012-08-04T08:49:50.317
> 
> 标签：javascript

我的库中有 100 个模块。我有 5 个不同的网站。现在任何网站都可以使用任意数量的模块。我只想要每个网站一个 javascript。

----------这就是我所做的--------

假设，第一个网站有 2 个模块，现在这两个模块可能依赖于其他模块。因此，假设在手动解决依赖关系之后，我需要为第一个网站提供总共 11 个模块。所以我将这 11 个模块的 JavaScript 文件组合起来并缩小它。

我不想要任何从服务器异步加载这些 JavaScript 文件的解决方案。我想要一些 java/python 等实用程序来扫描所有模块并解决依赖关系并将其合并并缩小到单个文件中。

问题 -

有多少解决方案提供这样的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T08:56:29.777

[Require JS](http://requirejs.org/)可能在标准设置中异步加载，但它也有一个优化器，可以缩小模块并将它们放在一个文件中

# javascript - 如何从数组动态创建 javascript 变量？

> ID：11807231
> 
> 赞同：8
> 
> 时间：2012-08-04T08:50:02.233
> 
> 标签：javascript, arrays, variables, dynamic

假设我有一个变量的名称数组：

```
var varNames = new Array("name1","name2","name3"); 
```

我如何创建`var name1`，`var name2`并`var name3`通过`varNames`数组循环？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-04T08:52:55.007

这将创建全局变量（在全局命名空间中，即`window`）。

```
var varNames = ["name1","name2","name3"];
for (var i=0;i<varNames.length;i+=1){
  window[varNames[i]] = 0;
}
name1; //=> 0 
```

由于使用全局变量被认为是不好的做法，因此您可以在 custum 对象中创建变量：

```
var myVariables = {}
   ,varNames = ["name1","name2","name3"];
for (var i=0;i<varNames.length;i+=1){
  myVariables[varNames[i]] = 0;
}
myVariables.name1; //=> 0 
```

**[ES20xx]**

```
const myVariables = ['name1', 'name2', 'name3']
  .reduce( (a, v, i) => ({...a, [v]: i + 1 }), {});

console.log(JSON.stringify(myVariables, null, 2));
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T08:53:36.693

您可以按如下方式进行。我添加了警报以证明您可以为这些变量设置值。

```
var varNames = new Array("name1","name2","name3");
for(var i = 0; i < varNames.length; i++) {
    window[varNames[i]] = i;
}
alert("name1: " + name1);
alert("name2: " + name2);
alert("name3: " + name3); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T08:55:13.357

您的问题的直接答案是 - 您可以使用`eval`：

```
var varNames = new Array("name1","name2","name3");

for (var i=0; i<varNames.length; i++) {
    var varName = varNames[i];
    eval("var "+varName); // would be "var name1"
} 
```

请注意，尽管这被认为是不好的做法，通常没有理由在这种情况下使用 eval。另请注意，使用以下样式创建数组更为常见：

```
var varNames = ["name1", "name2", "name3"]; 
```

# java - 对象突变的默认哈希码是否更改

> ID：11807233
> 
> 赞同：1
> 
> 时间：2012-08-04T08:50:15.387
> 
> 标签：java, hashmap, hashcode

我知道 hashmap 键应该是不可变的对象，或者至少有一个一致的哈希码来正确地从 Map/Set 中检索它的值。但是，如果我使用变异对象作为键而不覆盖哈希码或等于，那么它的哈希码是否会与它的生命周期一致。我已经尝试用它来检索变异对象的哈希码，并发现它始终是一致的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T09:05:46.280

国家[合同`hashcode`](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29)：

> 每当在 Java 应用程序执行期间对同一个对象多次调用它时，hashCode 方法必须始终返回相同的整数，**前提是没有修改对象上的 equals 比较中使用的信息**。

所以如果你改变你的对象，不能保证哈希码不会改变。碰巧一些 JDK 实现可能会使用某种内部地址[，但它们不是必须的，](https://stackoverflow.com/a/10917772/829571)所以你不应该依赖它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T09:06:54.463

在最新版本的 HotSpot JVM 中，对象的默认哈希码不会随时间改变。事实上，哈希码是从初始分配地址派生的，并在对象被垃圾收集器移动时输入到对象头（参见[JVM 白皮书](http://java.sun.com/products/hotspot/docs/whitepaper/Java_HotSpot_WP_Final_4_30_01.html#pgfId=1082734)）中，之后不会更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T08:58:44.650

是的，如果您不覆盖 hashCode 方法，它将保持不变。默认的 hashCode 是对象在内存中的原始位置。此内存位置通过以下方法检索：

[`System.identityHashCode(Object)`](http://docs.oracle.com/javase/7/docs/api/java/lang/System.html#identityHashCode%28java.lang.Object%29)

在 StackOverflow 上查看这个线程：

[JVM 如何确保 System.identityHashCode() 永远不会改变？](https://stackoverflow.com/questions/1063068/how-does-the-jvm-ensure-that-system-identityhashcode-will-never-change)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T09:00:48.893

默认的 Java 实现`hashcode`是基于指向对象的指针，所以当实例变量改变时它不应该改变。

编辑

但 Martijn 打败了我。

# javascript - Object.create 和原型

> ID：11807240
> 
> 赞同：3
> 
> 时间：2012-08-04T08:51:20.360
> 
> 标签：javascript, prototype, object-create

当我使用 object.create 像这样创建一个新对象时，

```
o = {x:1,y:2};
p = Object.create(o); 
```

我的印象是 o 成为 p 的原型并继承了它的所有方法。

那为什么，当我尝试

```
print(p.prototype); 
```

输出未定义？o 定义明确！！

谢谢你

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-04T09:03:37.067

[只有**函数**有`prototype`属性*^([ES5])*](http://es5.github.com/#x15.3.5.2)。

`p``o`通过内部属性进行引用`[[Prototype]]`，在某些浏览器中可以使用[`__proto__` *^([MDN])*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/proto)访问，但现在已弃用。

您可以使用[`Object.getPrototypeOf` *^([MDN])*](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/GetPrototypeOf)获取对对象原型的引用：

```
Object.getPrototypeOf(p) === o // true 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T08:55:04.847

试试这个，`o`变成原型的`p`意思`o`就是`p`'s 的构造函数的原型。

```
console.log(p.constructor.prototype); 
```

* * *

```
var o = {x:1,y:2};
var p = Object.create(o); 
```

您可以在上图中如下所示：

```
var o = {x:1,y:2};
function constructor_of_p(){};
constructor_of_p.prototype = o;
var p = new constructor_of_p(); 
```

# java - 协助退货方法

> ID：11807241
> 
> 赞同：1
> 
> 时间：2012-08-04T08:51:28.927
> 
> 标签：java

我需要一种如下所示的方法的帮助，我需要返回带一位小数的半径，感谢所有帮助，我应该使用小数格式来这样做。

```
public double beraknaOmkrets()
{
    DecimalFormat f = new DecimalFormat("##.0");

    double omkrets = 0;
    omkrets = radie*2*3.14;
    return f.format(omkrets).toString;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T08:52:47.273

1.  `toString()`您忘记了方法调用末尾的括号。
2.  您的方法签名是`double`，但您尝试返回一个 `String`. 将返回类型更改为`String`.

顺便说一句，您可以将 2 个 omkrets 初始化行合并为一个，如果您在下一行更改其值，则无需将其初始化为 0：`double omkrets = radie*2*3.14;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T09:04:05.340

**1.**你需要`DecimalFormat`

```
public double beraknaOmkrets()
{

    DecimalFormat f = new DecimalFormat("##.0");

    double omkrets = 0;
    omkrets = f.format(radie*2*3.14);
    return omkrets;

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T08:54:22.727

```
public string beraknaOmkrets()
{
    DecimalFormat f = new DecimalFormat("##.0");    
    return f.format(radie*2*3.14).toString();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T08:55:55.620

该方法的返回类型是双精度，并且您返回一个字符串（因为您的调用`.toString();`。您可以将其更改为：

```
public double beraknaOmkrets()
{
  double omkrets = 0;
  omkrets = radie*2*3.14;
  return omkrets;

} 
```

然后有一个字符串方法，如：

```
public String beraknaOmkretsFormatted(double omkrets)
{
      DecimalFormat f = new DecimalFormat("##.0");
      return f.format(omkrets).toString();
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-04T08:56:27.273

双精度和浮点数是数字。它们不携带格式。

```
4.100 = 4.100000 
```

要格式化浮点数或双精度数，您必须为其创建一个字符串。正如您所做的那样，但您的方法在签名中返回 double 。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-04T08:59:07.053

返回字符串时，方法的返回类型为 double。将方法的返回类型更改为 String ，也无需将其初始化为 0 ，因为在该范围内，您将在下一行更改值。

# php - 如何将下拉选择更改为使用 mysql 数据库的预先输入？

> ID：11807250
> 
> 赞同：0
> 
> 时间：2012-08-04T08:52:51.273
> 
> 标签：php, mysql, typeahead

我想将此代码（下拉选择课程）更改为预先输入，所以我只需要输入几个单词，然后它会提示。

```
<TD width="112"><INPUT type="checkbox" name="chk[]"/></TD>
        <TD width="472">
            <SELECT name="course[]">
                <?php
                  $sql = "select * from tt_course";
                  $result = mysql_query($sql);
                  while($rs = mysql_fetch_assoc($result))
                    {
                        $select="";
                        echo "<option value=\"".$rs['course_id']."\" ".$select.">".$rs['course_name']."</option>";
                    }
                  ?>
            </SELECT>
        </TD> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T09:26:58.863

看看[http://jqueryui.com/demos/autocomplete/](http://jqueryui.com/demos/autocomplete/) 它的设置简单易行，可以达到目的。您可以创建一个值数组并将其提供给 Autocomplete，或者您可以让它调用您的 php 页面并解析返回的 JSON 数据。

正如所承诺的，这里有一个示例代码可以帮助您进行操作。请注意，此代码使用本地 javascript 变量为自动完成框准备建议。您可以轻松地更新它以从您的 php 页面中查找 JSON 数据，我可以轻松地让您做到这一点，但目的是帮助您学习，所以我认为这样对您来说会更好，这样您就可以看到它是如何工作的，并且然后根据您的需要进行相应更新。在这里，您可以简单地复制粘贴此代码并查看它运行

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/black-tie/jquery-ui.css" type="text/css" />
    <script src='http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js'></script>
    <script src='http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.2/jquery-ui.min.js'></script>
    <script>
    $(document).ready(function() {
        $( "#AC" ).autocomplete({
            source: programmingLang
        });
    });
    var programmingLang = ["ActionScript","AppleScript","Asp","BASIC","C","C++",
    "Clojure","COBOL","ColdFusion","Erlang","Fortran","Groovy","Haskell",
    "Java","JavaScript","Lisp","Perl","PHP","Python","Ruby","Scala","Scheme"];
    </script>
</head>
<body>
    <input type=text name="AC" id="AC">
</body>
</html> 
```

# php - PHP 测验总是显示相同的结果

> ID：11807252
> 
> 赞同：0
> 
> 时间：2012-08-04T08:52:56.460
> 
> 标签：php

所以我在我的页面上有一个测验，告诉用户他们可能需要什么。它通过 PHP 和 jQuery Ajax 提供支持。jQuery 部分工作正常，它在同一页面上显示测验结果而无需刷新页面，但 php 脚本无法正常工作。

这是它应该做的：

> 检查表格的结果，并在分数中添加或删除一个数字。

这是代码：

```
<?php
    $score = 0;
    if ($_POST['muuttuminen'] == 'Kylla'){
    $score - 5;}
    if ($_POST['muuttuminen'] == 'Ei'){
    $score + 1;}
    if ($_POST['possiblecontent'] == 'Kuvagallerian'){
    $score + 1;}
    if ($_POST['possiblecontent'] == 'Pieni verkkokauppa'){
    $score + 1;}
    if ($_POST['possiblecontent'] == 'Isompi verkkokauppa'){
    $score - 1;}
    if ($_POST['possiblecontent'] == 'Jotain muuta'){
    $score + 1;}
    if ($_POST['ulkoasu'] == 'Massasta erottuvan, uniikin ulkoasun'){
    $score + 1;}
    if ($_POST['ulkoasu'] == 'Jotain muuta'){
    $score + 0;}

    if ($score >= 3){
        echo '<p>Sivusi eiv&auml;t ilmeisesti muutu usein, joten ne voidaan toteuttaa ilman julkaisuj&auml;rjestelm&auml;&auml;, ja ne latautuvat nopeammin kuin julkaisuj&auml;rjestelm&auml;ll&auml; toteutetut sivut.</p>';
        }
    if ($score <= 3){

    echo '<p>N&auml;ytt&auml;&auml; silt&auml; ett&auml; sinun pit&auml;&auml; voida p&auml;ivitt&auml;&auml; sivustoasi itse, eli suosittelemme kotisivuja julkaisuj&auml;rjestelm&auml;&auml;n rakennettuna.</p>';
        }

    ?> 
```

我在这里可能做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T08:56:07.303

您再也不会设置`$score`（它将始终为 0）。`$score + 1`不修改。*_* `$score`使用`$score += 1`或`$score = $score + 1`。

# python - python中文本分析器代码的时间复杂度

> ID：11807260
> 
> 赞同：2
> 
> 时间：2012-08-04T08:54:27.743
> 
> 标签：python, algorithm, time-complexity

```
letterList = ["a", 0, "b", 0, "c", 0, "d", 0, "e", 0, "f", 0, "g", 0, "h", 0, "i", 0,  "j", 0, "k", 0, "l", 0, "m", 0, "n", 0, "o", 0, "p", 0, "q", 0, "r", 0, "s", 0, "t", 0, "u", 0, "v", 0, "w", 0, "x", 0, "y", 0, "z", 0]
letterCount = 0
wordList = [None]
wordCount = 0
Count = 0
wordIndex = [0]
itext = cleaner(raw_input("enter itext please")).split()
print itext
for iword in itext:
    if iword in wordList:
        Count += 1
        for word in wordList:
            if iword == word:
                wordList[wordList.index(word)+1][0] += 1
                wordList[wordList.index(word)+1] += [wordCount]
            else:
                pass
    elif iword not in wordList:
        wordList += [iword]
        wordList += [[1, itext.index(iword)]]
    else:
        pass
    wordCount += 1
print wordList 
```

代码看起来很乱，因为我是 python 和编程的初学者。

谁能帮我处理代码的时间复杂性？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T09:27:19.283

除了格式不同之外，后面的所有内容`print itext`都可以替换为：

```
print collections.Counter(itext) 
```

这具有复杂性 O(n)。

如果没有 Counter，您可以使用 dict 而不是列表来更好地表达您的算法来存储字数：

```
word_counter = {}
for word in itext:
    if word in word_counter:
        word_counter[word] += 1
    else:
        word_counter[word] = 1 
```

dict 非常适合存储某事物（此处为单词）和其他事物（此处为计数）之间的关联。与字典相比，交替的单词和计数对列表有很多缺点，但杀手是在列表中找到一个单词是 O(N) 而不是 O(1)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T09:12:22.973

第二个循环没用。`iword`你只需要in的索引`wordlist`。

```
for iword in itext:
    if iword in wordList:
        i = wordList.index(iword)
        wordList[i+1][0] += 1
        wordList[i+1].append(wordCount)
        Count +=1
    else:
        wordList.append(iword)
        wordList.append([1, itext.index(iword)])
    wordCount += 1
print wordList 
```

这会产生与您的代码相同的输出，但老实说，我还不清楚它是否真的是您所期望的......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T09:45:50.327

假设使用循环计数来计算复杂性。

首先，我们需要找到最坏的情况。第一次循环的复杂度为 1，第二次循环的最大复杂度为 3。在第三次中，如果第二次循环的复杂度为 3，那么第三次循环的最大复杂度也为 3，总复杂度为 7。如果你给第二个复杂度 1，你可以给第三个最大复杂度 5，但这仍然给你 7 的总复杂度。然而，在这一点上它变得很奇怪。第四次的最大复杂度是如果您的复杂度为 1、1、5 和 5，总共 12。5 有 1、1、1、7 和 7 = 17。6 有 1、1 , 1, 7, 7, and 7 = 24\. 1, 1, 1, 1, 9, 9, 9 = 31\. 1, 1, 1, 1, 9, 9, 9, 9 = 40\. 寻找一般最差案例场景真的有点难，但我想说最坏的情况是当字符串的前半部分（无论你使用一半的地板还是天花板都无关紧要）由新单词组成，而字符串的其余部分由最后添加的新词。“红绿蓝黄黄黄黄”是 7 个单词的最坏情况示例。把它换成数学术语看起来有点像这样：

```
O(ceiling(n/2) + floor(n/2)*(ceiling(n/2)*2+1)) 
```

或者，python 计算给定列表大小的复杂性：

```
from __future__ import division
import math
def complexity(n):
    return math.ceil(n/2) + math.floor(n/2)*(math.ceil(n/2)*2+1) 
```

也就是说，您的算法是可怕的，您真的应该用其他答案给出的算法之一替换它。

# ruby-on-rails - 将逗号分隔的属性另存为新记录

> ID：11807267
> 
> 赞同：0
> 
> 时间：2012-08-04T08:55:29.037
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我的 rails 应用程序中有 3 个模型：产品、类别和类别产品（产品和类别之间的连接）。在我的产品表单中，我接受类别的嵌套属性。用户可以输入以逗号分隔的多个类别。如何正确地将每个类别保存为我的类别表中的记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T09:04:34.263

这个 railscast 显示了一个精确的解决方案。[在这里](http://railscasts.com/episodes/167-more-on-virtual-attributes)。

# javascript - 没有插件的 Apache Cordova (PhoneGap) 2.0 中的 Google adMob

> ID：11807272
> 
> 赞同：3
> 
> 时间：2012-08-04T08:55:55.197
> 
> 标签：javascript, cordova, ads, cordova-2.0.0

我是一名移动应用程序开发人员，使用**Cordova**框架。我想在没有插件的情况下将**Google adMob**集成到我的项目中。我想使用一个简单的 Javascript 代码，因为我将更好地控制在任何操作系统中如何以及何时在屏幕上显示广告横幅：WP7、Android、iOS...

我找到了一篇旧文章（2011 年 6 月），它展示了如何做到这一点。它使用[这个 javascript 文件](http://mmv.admob.com/static/iphone/iadmob.js)，但它不起作用。我正在尝试这段代码：

```
<script type="text/javascript">
var admob_vars = {
  pubid: 'a1501b#######150', // publisher id
  bgcolor: 'FFFFFF', // background color (hex)
  text: '000000', // font-color (hex)
  test: true // test mode, set to false to receive live ads
};
</script>
<script type="text/javascript" src="http://mmv.admob.com/static/iphone/iadmob.js">
</script> 
<div style="position:absolute; z-index:999999; left:1px; top:100px; width:100%; height:100px; background-color:#e0e0e0; color:Blue;">
  [Google Ads div]
  <div id="admob_ad"></div>
</div>
<script>
    _admob.fetchAd(document.getElementById('admob_ad'));
</script> 
```

或者，我想找一家允许在我的应用移动项目中使用 Javascript 文件的移动广告代理。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T20:46:15.220

好吧，我试图使用相同的 javascript 代码。但似乎谷歌已经撤回了对[这里提到的这种方法的支持](http://support.google.com/admob/bin/answer.py?hl=en&answer=1704625)

以下是该页面的摘录：

> 请注意，我们将于 2012 年 5 月 1 日关闭 AdMob Smartphone Web，并将其与主要的 Google AdSense 内容广告产品合并。

[该](http://therockncoder.blogspot.in/2012/08/jquery-mobile-and-adsense.html)站点将有助于在 Cordova 中集成 adsense。但它有它的局限性。**将关闭 Jquery mobile 的 ajax 转换以使 AdSense 正常工作！**

所以我会坚持使用 Admob SDK，直到出现更好的解决方案。

希望能帮助到你。

### 编辑：

今天我遇到了支持通过 javascript 获取广告的[InMobi 广告网络。](http://www.inmobi.com)JS 代码在[这里](http://www.inmobi.com/developer/platforms/mobile-web/#clientjava)。而 InMobi 与 Admob 的官方比较在[这里](http://www.inmobi.com/inmobiblog/2011/01/24/the-inmobi-network-versus-the-google-admob-network-see-how-we-stack-up/)。到目前为止，我还没有遇到过 InMobi 网络提供的任何广告中介支持。但我想我会试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T22:28:39.540

我写了一篇博文，解释了如何将 AdMob 集成到 Cordova 应用程序中：[AdMob 和 Cordova](http://therockncoder.blogspot.in/2012/05/cordova-phonegap-and-admob-together-ios.html)。

# android - 在 RelativeLayout 中动态创建一个 ImageViews 矩阵

> ID：11807274
> 
> 赞同：0
> 
> 时间：2012-08-04T08:56:01.463
> 
> 标签：android, android-relativelayout, android-imageview

我在创建图像矩阵时遇到问题`RelativeLayout`。我设法只创建了一行，其他行根本没有显示。

```
int index=1;
    for(int i=0;i<Globals.NUM_ROWS;i++){
        for(int j=0;j<Globals.NUM_COLS;j++)
        {
            ImageView iv = new ImageView(this);
            iv.setImageResource(R.drawable.obs_block);
            iv.setId(index);
            RelativeLayout.LayoutParams lp = new RelativeLayout.LayoutParams(
                RelativeLayout.LayoutParams.WRAP_CONTENT,
                RelativeLayout.LayoutParams.WRAP_CONTENT);

            if(i!=0 && i%Globals.NUM_COLS==0){
                lp.addRule(RelativeLayout.BELOW,index-Globals.NUM_COLS);
            }else{
                lp.addRule(RelativeLayout.RIGHT_OF, index-1);
            }

            gameLayout.addView(iv, lp);
            index++;
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T10:11:02.227

您没有`Relative.LayoutParams`正确构建。看看这是否有帮助：

```
 int index = 1;
        for (int i = 0; i < Globals.NUM_ROWS; i++) {
            for (int j = 0; j < Globals.NUM_COLS; j++) {
                ImageView img = new ImageView(this);
                img.setId(index);
                img.setImageResource(R.drawable.ic_launcher);
                RelativeLayout.LayoutParams rlp = new RelativeLayout.LayoutParams(
                        RelativeLayout.LayoutParams.WRAP_CONTENT,
                        RelativeLayout.LayoutParams.WRAP_CONTENT);
                if (j == 0) {
                    rlp.addRule(RelativeLayout.ALIGN_PARENT_LEFT,
                            RelativeLayout.TRUE);
                } else {
                    rlp.addRule(RelativeLayout.RIGHT_OF, index - 1);
                }
                if (i == 0) {
                    rlp.addRule(RelativeLayout.ALIGN_PARENT_TOP,
                            RelativeLayout.TRUE);
                } else {
                    rlp.addRule(RelativeLayout.BELOW, index - Globals.NUM_COLS);
                }
                img.setLayoutParams(rlp);
                rl.addView(img);
                index++;
            }
        } 
```

# android - 删除按时间排序的条目的 SQL 查询

> ID：11807276
> 
> 赞同：0
> 
> 时间：2012-08-04T08:56:16.133
> 
> 标签：android, sql, sqlite, android-contentprovider

我有一个有列的表

> _id = 主键自动增量
> 
> 标题 = 字符串
> 
> 时间戳=长

我的表中有 35 个条目。我的表在任何给定时间只能包含 25 个条目。所以这意味着从我的桌子上敲掉 10 个额外的条目。

此外，35 个条目应首先按时间戳排序，最后 10 个条目应删除，以便我只有 25 个最近的条目。

可以请一些人帮助我进行删除查询，该查询首先按时间戳对条目进行排序并仅保留 25 个条目，删除其余条目。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T09:03:55.463

```
 DELETE FROM MYTABLE WHERE _id NOT IN 
   (SELECT _id from MYTABLE ORDER BY timestamp DESC LIMIT 25) 
```

保留最新的 25 个条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T09:07:11.723

听起来您需要 SQL 中的 FIFO 队列。仅存储最近的 25 个（或任何其他数量的）项目的表。

如果是这样，那么这是一个解决方案：

[http://www.xaprb.com/blog/2007/01/11/how-to-implement-a-queue-in-sql/](http://www.xaprb.com/blog/2007/01/11/how-to-implement-a-queue-in-sql/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T09:31:29.187

替代 radashk 方法：您可以在每次插入新记录时删除一个（最旧的）记录，可以在插入时在 DB 表触发器中完成：
`DELETE FROM MYTABLE WHERE timestamp = MIN(timestamp);`
此语句可以包含在记录计数检查或其他内容中以确保您维护您的最低记录数。

# css - 如何在CSS中使div背景颜色透明

> ID：11807286
> 
> 赞同：210
> 
> 时间：2012-08-04T08:57:45.093
> 
> 标签：css, html, background-color, transparent

我没有使用 CSS3。所以我不能使用`opacity`or`filter`属性。如果不使用这些属性，我怎样才能使`background-color`a 透明`div`？它应该是此[链接](http://www.w3schools.com/css/tryit.asp?filename=trycss_transparency)中的文本框示例。这里的文本框背景颜色是透明的。我想做同样的事情，但不使用上述属性。

* * *

## 回答 #1

> 赞同：386
> 
> 时间：2012-08-04T08:59:48.603

问题`opacity`在于它也会影响内容，而您通常不希望这种情况发生。

如果你只是想让你的元素是透明的，它真的很简单：

```
background-color: transparent; 
```

但如果你希望它是彩色的，你可以使用：

```
background-color: rgba(255, 0, 0, 0.4); 
```

或者定义一个背景图片（`1px`by `1px`）用右边保存`alpha`。
（为此，请使用`Gimp`，`Paint.Net`或任何其他允许您执行此操作的图像软件。
只需创建一个新图像，删除背景并在其中放置半透明颜色，然后将其保存为 png。）

正如[René](https://stackoverflow.com/users/449444/rene-geuze)所说，最好的办法是将两者混合，如果浏览器不支持 alpha ，则将`rgba`第一个和`1px`by `1px`image 作为后备：

```
background: url('img/red_transparent_background.png');
background: rgba(255, 0, 0, 0.4); 
```

**另请参阅**：[http](http://www.w3schools.com/cssref/css_colors_legal.asp) ://www.w3schools.com/cssref/css_colors_legal.asp 。

**演示**：[我的 JSFiddle](http://jsfiddle.net/APSnL/68/)

* * *

## 回答 #2

> 赞同：144
> 
> 时间：2012-08-04T09:03:22.777

不透明度为您提供半透明或透明度。[请参阅此处的 Fiddle](http://jsfiddle.net/Rt9BJ/1/)示例。

```
-ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=50)";       /* IE 8 */
filter: alpha(opacity=50);  /* IE 5-7 */
-moz-opacity: 0.5;          /* Netscape */
-khtml-opacity: 0.5;        /* Safari 1.x */
opacity: 0.5;               /* Good browsers */ 
```

注意：[这些不是 CSS3 属性](http://www.w3schools.com/css/css_image_transparency.asp)

请参阅[http://css-tricks.com/snippets/css/cross-browser-opacity/](http://css-tricks.com/snippets/css/cross-browser-opacity/)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-12-26T06:12:52.500

**透明**是**背景颜色的默认值**

[http://www.w3schools.com/cssref/pr_background-color.asp](http://www.w3schools.com/cssref/pr_background-color.asp)

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2018-01-31T16:56:02.757

来自[https://developer.mozilla.org/en-US/docs/Web/CSS/background-color](https://developer.mozilla.org/en-US/docs/Web/CSS/background-color)

设置背景颜色：

```
/* Hexadecimal value with color and 100% transparency*/
background-color: #11ffee00;  /* Fully transparent */

/* Special keyword values */
background-color: transparent;

/* HSL value with color and 100% transparency*/
background-color: hsla(50, 33%, 25%, 1.00);  /* 100% transparent */

/* RGB value with color and 100% transparency*/
background-color: rgba(117, 190, 218, 1.0);  /* 100% transparent */ 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-09-28T01:34:08.100

讨论可能有点晚了，但不可避免地有人会像我一样偶然发现这篇文章。我找到了我正在寻找的答案，并认为我会发表自己的看法。下面的 JSfiddle 包括如何对 .PNG 进行透明分层。Jerska 提到了 div 的 CSS 的透明度属性是解决方案：http: [//jsfiddle.net/jyef3fqr/](http://jsfiddle.net/jyef3fqr/)

HTML：

```
 <button id="toggle-box">toggle</button>
   <div id="box" style="display:none;" ><img src="x"></div>
   <button id="toggle-box2">toggle</button>
   <div id="box2" style="display:none;"><img src="xx"></div>
   <button id="toggle-box3">toggle</button>
   <div id="box3" style="display:none;" ><img src="xxx"></div> 
```

CSS：

```
#box {
background-color: #ffffff;
height:400px;
width: 1200px;
position: absolute;
top:30px;
z-index:1;
}
#box2 {
background-color: #ffffff;
height:400px;
width: 1200px;
position: absolute;
top:30px;
z-index:2;
background-color : transparent;
      }
      #box3 {
background-color: #ffffff;
height:400px;
width: 1200px;
position: absolute;
top:30px;
z-index:2;
background-color : transparent;
      }
 body {background-color:#c0c0c0; } 
```

JS：

```
$('#toggle-box').click().toggle(function() {
$('#box').animate({ width: 'show' });
}, function() {
$('#box').animate({ width: 'hide' });
});

$('#toggle-box2').click().toggle(function() {
$('#box2').animate({ width: 'show' });
}, function() {
$('#box2').animate({ width: 'hide' });
});
$('#toggle-box3').click().toggle(function() {
$('#box3').animate({ width: 'show' });
 }, function() {
$('#box3').animate({ width: 'hide' });
}); 
```

我最初的灵感是：http: [//jsfiddle.net/5g1zwLe3/](http://jsfiddle.net/5g1zwLe3/) 我还使用paint.net 创建透明PNG，或者更确切地说是带有透明BG 的PNG。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-12T06:35:21.717

```
 /*Fully Opaque*/
    .class-name {
      opacity:1.0;
    }

    /*Translucent*/
    .class-name {
      opacity:0.5;
    }

    /*Transparent*/
    .class-name {
      opacity:0;
    }

    /*or you can use a transparent rgba value like this*/
    .class-name{
      background-color: rgba(255, 242, 0, 0.7);
      }

    /*Note - Opacity value can be anything between 0 to 1;
    Eg(0.1,0.8)etc */ 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-07-26T21:41:15.270

使用类似的东西

```
<div style='background-color: rgba(0, 0, 0, 0.4);'> 
```

这将所述 div 的背景颜色设置为黑色，但也是 40% 透明。这不会改变 div 透明度的文本或内容。

# uitableview - iOS 两个 UITableViews on storyboard 怎么处理

> ID：11807289
> 
> 赞同：2
> 
> 时间：2012-08-04T08:58:18.353
> 
> 标签：uitableview, xcode4.2, storyboard, ios5

在我的 iPad 应用故事板设计中，添加了两个表格视图。

一个表格视图用于**显示文件夹名称**，另一个表格视图用于**显示文件名**。选择文件夹表格视图单元格时，所选文件夹内的文件需要显示在另一个表格视图（文件表格视图）中。

**我的问题是**

我很困惑

*   如何为每个表视图添加委托和数据源`ViewController`？或者是否可以在 ViewController 以外的自定义类中为每个表视图添加数据源和委托？

**和**

*   如何处理单元格的选择？

请帮忙 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-05T10:26:33.003

首先：为什么不直接在占据整个屏幕的推送视图控制器上显示文件？对我来说似乎更直观。

如果你想用两个 tableViews 来做，并假设它们使用动态单元格：
**1，**在**你的视图控制器的 .h 文件中**

像这样指定两个 tableView 属性：

```
@property (weak, nonatomic) IBOutlet UITableView *foldersTableView;
@property (weak, nonatomic) IBOutlet UITableView *filesTableView; 
```

实现 UITableVIew 的两个委托协议

```
@interface ViewController : UIViewController <UITableViewDataSource, UITableViewDelegate> 
```

**2，**将两个 UITableViews 添加到您的 ViewController 上，然后...

*   ...将您的奥特莱斯链接到两个表格视图
*   ...在属性检查器上，将文件夹表视图的标记设置为 1，将文件表视图的标记设置为 2
*   ...选择每个 UITableViews，转到 Connections Inspector 并将它们的两个委托方法（委托和数据源）链接到您的 ViewController（对于它们两者）

**3，**在你的 ViewController 的 .m 文件中实现 UITableView 的三个数据源方法，如下所示：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    if (tableView.tag == 1) {
       return theNumberOfSectionsYouWantForTheFolderTableView;
    } else {
       return theNumberOfSectionsYouWantForTheFilesTableView;
    }
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    if (tableView.tag == 1) {
       return [foldersArray count];
    } else {
       return [filesArray count];
    }
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
        if (tableView.tag == 1) {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...
    return cell;

} else {
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...

    return cell;
}
} 
```

**4、**实施选择：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (tableView.tag == 1) {
        //fill filesArray with the objects you want to display in the filesTableView...
        [filesTableView reloaddata];
    } else {
        //do something with the selected file
    }
} 
```

希望我得到了正确的一切。`@synthesize`如果您使用的是 XCode 4.4 之前的版本，请不要忘记.m 文件中的属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T19:26:54.070

如果您使用多个表，请不要忘记酌情隐藏：

```
- (void)viewWillAppear:(BOOL)animated
{
    [self.table2 setHidden:YES];
    [self.table1 setHidden:NO];
    // Probably reverse these in didSelectRow
} 
```

# c# - 更新母版页中的面板和子页中的 asp 文件上传

> ID：11807292
> 
> 赞同：2
> 
> 时间：2012-08-04T08:59:00.007
> 
> 标签：c#, asp.net, html, ajax

我遇到了一个问题，目前我在我的母版页中有一个更新面板，在我的一个子页面中我有一个 asp 文件上传控件。

我在主页面中的更新面板[年龄：

```
 <form id="form1" runat="server">
      <asp:ScriptManager ID="ScriptManager1" runat="server">
     </asp:ScriptManager>

     <asp:updateprogress associatedupdatepanelid="UpdatePanel1"
        id="updateProgress" runat="server">
         <progresstemplate>
            <div id="processMessage" style=" background-image:url('../../Styles/ajax-loader3.gif'); width:100px; height:100px; background-repeat:no-repeat; background-position:center;">

               </div>
        </progresstemplate>
    </asp:updateprogress> 

    <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
     <ContentTemplate>
..
    </ContentTemplate>
 </asp:UpdatePanel>
</form> 
```

我的孩子页面需要文件上传：

```
<div id="Annoucments" class="ContentDIV">
            <h2 class="Tabheader">Annoucments</h2>
            <p class="tabdescription">Here you will be able to upload announcements and pictures to be displayed in the login page, below is the current announcement click on update to save the changes that you have made.</p>

            <table width = "100%">

            <tr>
            <td class="Tablabel">Annoucment title:</td> <td class="tableInput" align="left"><asp:TextBox ID="Announcement_TB" runat="server" CssClass="textboxTabs"></asp:TextBox></td>
            <td class="Tablabel">Picture/Poster:</td> <td class="tableInput" align="left"><asp:FileUpload ID="Announcement_PIC" runat="server"  CssClass="textboxTabsFiles"/></td>
            </tr>

            <tr>
            <td class="Tablabel">Description:</td> <td class="tableInput" align="left"><asp:TextBox ID="Announcement_Desc" CssClass="textboxTabs" runat="server" Rows="3" TextMode="MultiLine"></asp:TextBox></td>
            </tr>

            <tr><td colspan="4" style="height:10px" id ="BLANK">
                <asp:Label ID="Label1" runat="server" Text="Label"></asp:Label>
                </td></tr>

            <tr>
            <td colspan="2" align="right"><input type="button" id="Announcement_Update" runat="server" value="Update" class="TabButton" onserverclick="ANNOUNCEMENT_UPDATE_Click" style=" font-size:smaller"/></td><td colspan="2">&nbsp;&nbsp;<input type="button" ID="ANNOUNCEMENT_Cancel" runat="server" value="Cancel" class="TabButton" style=" font-size:smaller"/></td>  
            </tr>

            </table>

        </div> 
```

*当我单击按钮 Announcement_Update 后端代码将被触发以获取我的文件名时，返回的文件名将始终为“”在调试时发现。*

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-04T13:22:06.790

将此代码放在子页面中，以通过 PostBackTrigger 进行文件上传。

```
protected void Page_Load(object sender, EventArgs e)
{
    UpdatePanel updatePanel = Page.Master.FindControl("UpdatePanel1") as UpdatePanel;
    UpdatePanelControlTrigger trigger  = new PostBackTrigger();
    trigger.ControlID = Announcement_Update.UniqueID;
    updatePanel.Triggers.Add(trigger);
} 
```

享受编码:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T09:11:55.227

你不能`filename`进去`UpdatePanel`

`UpdatePanel`从您的代码中删除它或使用[Asynchronous File Uploader](http://www.codeproject.com/Articles/319877/Asynchronous-File-Upload)，

或者，您可以使用[Ajax 文件上传技术](http://www.ajaxf1.com/tutorial/ajax-file-upload-tutorial.html)，但这有点棘手。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T09:41:57.020

Asp UpdatePanel 在回发问题的更新面板中不起作用。您可以使用与上传器相关的按钮添加触发器，例如

```
 <asp:UpdatePanel ID="UpdatePanel1" runat="server" UpdateMode="Conditional">
                <ContentTemplate>
                    <asp:Button ID="Button1" runat="server" Text="Click" />
                </ContentTemplate>
                <Triggers>
                    <asp:PostBackTrigger ControlID="Button1" />
                </Triggers>
            </asp:UpdatePanel> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T18:28:42.163

如果您添加触发器，它对我有用，但还要确保编辑表单标签以包括：

```
<form runat="server" enctype="multipart/form-data"> 
```

# iphone - 如何以 1% 的粒度在 iOS 上获取实时电池电量

> ID：11807295
> 
> 赞同：15
> 
> 时间：2012-08-04T09:00:24.810
> 
> 标签：iphone, cocoa-touch, battery, batterylevel

我正在使用此功能来获取设备的当前电池电量：

```
[[UIDevice currentDevice] setBatteryMonitoringEnabled:YES];
UIDevice *myDevice = [UIDevice currentDevice];

[myDevice setBatteryMonitoringEnabled:YES];
double batLeft = (float)[myDevice batteryLevel]; 
NSLog(@"%f",batLeft); 
```

但结果有 5% 的粒度。示例：当手机电池电量为 88% 时，它仅记录 0.85 的值。`batteryLevel`仅以 0.05 的增量返回值。例如：0.85、0.9、0.95，并且从不返回 0.82 或 0.83 之类的值。

是否有任何解决方案可以获得更高精度的百分比？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-05-22T15:04:39.357

至少有四种不同的方式来读取电池电量，所有四种方式都可能返回不同的值。

这是这些值随时间变化的图表。

这些值是用这个 iOS 项目记录的：[https ://github.com/nst/BatteryChart](https://github.com/nst/BatteryChart)

请查看代码以供参考。

![iPhone 5 电池](../Images/0d85f01f4d7ac136859e40f451745eb9.png)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-04T09:17:36.800

查看此站点： [以编程方式读取电池电量](http://blog.coriolis.ch/2009/02/14/reading-the-battery-level-programmatically/)

但是，小心使用。此处使用的所有 API 在 iPhone 上均未记录，如果您将此应用程序提交到 App Store，可能会导致拒绝。虽然电池充电状态不准确，但我建议使用 UIDevice 电池监控方法。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-22T12:55:23.753

```
UIDevice *myDevice = [UIDevice currentDevice];    
[myDevice setBatteryMonitoringEnabled:YES];

double batLeft = (float)[myDevice batteryLevel] * 100;
NSLog(@"%.f", batLeft);    

NSString * levelLabel = [NSString stringWithFormat:@"%.f%%", batLeft];    
lblLevel.text = levelLabel; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-02-21T14:28:23.777

**获取电池电量的**Swift版本：****

 **```
UIDevice.current.isBatteryMonitoringEnabled = true
let batteryLevel = UIDevice.current.batteryLevel 
```

`batteryLevel`返回 0,39；对我来说是 0,40 个值。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-20T05:51:28.583

上面的答案非常好，但它们都在 Obj-C 中，我已经将这些与其他示例一起用于在 上执行相同的任务`MonoTouch`，所以我将我的代码放在这里以防万一有人需要它：

```
try
{
    UIDevice.CurrentDevice.BatteryMonitoringEnabled = true;
    _Battery.Level = (int)(UIDevice.CurrentDevice.BatteryLevel * IOSBatteryLevelScalingFactor);
    _Battery.State = UIDevice.CurrentDevice.BatteryState;
}
catch (Exception e)
{
    ExceptionHandler.HandleException(e, "BatteryState.Update");
    throw new BatteryUpdateException();
}
finally
{
    UIDevice.CurrentDevice.BatteryMonitoringEnabled = false;
} 
```

我的博客上也有一篇完整的帖子，在[这里提供所有详细信息](http://www.hasaltaiar.com.au/reading-battery-level-and-status-in-ios-using-monotouch/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-04-21T04:46:22.543

你可以在这里找到完美的答案

Xcode：11.4 斯威夫特：5.2

[点击这里](https://stackoverflow.com/a/27475577/5043390)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-03-05T06:40:56.593

如果您使用的是 swift 5.1 或更高版本，此代码肯定适合您。

第 1 步：- 要开始，首先启用当前设备的 isBatteryMonitoringEnabled 属性，如下所示：-

```
UIDevice.current.isBatteryMonitoringEnabled = true 
```

第 2 步：- 您现在可以读取当前电池电量

```
let level = UIDevice.current.batteryLevel
print(level) 
```**

# rich-snippets - Rich Snippet 的 itemtype 产品，现在是否可以使用它并将其应用于分类广告网站

> ID：11807303
> 
> 赞同：1
> 
> 时间：2012-08-04T09:01:18.823
> 
> 标签：rich-snippets

我刚刚阅读了有关 Google 的 Rich Snippet 的信息，并计划将其应用到分类广告网站上。

如果我在分类广告网站中使用它是否很好且有效？

我之所以问这个问题是因为，我从进一步的阅读中了解到，它只对可以从发布它的网站购买的产品以及“产品”项目类型（itemtype =“http:// schema.org/Product") 不应是产品列表，可以通过线下联系和付款卖家或从网站外购买。在我的分类广告网站上，如果买家想购买该商品，他会联系卖家，他们会同意见面。或者当无法见面时，卖家在收到买家的价格金额后将物品发送给买家。我收到了另一个询问，我们可以将此代码段应用并使用到类似于 eBay 的网站吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T08:09:10.480

对于 Google Rich Snippets，对分类广告建模的最佳方法是使用 GoodRelations 词汇表，[http](http://purl.org/goodrelations/) : //purl.org/goodrelations/ 采用 RDFa 语法，但没有提供产品的明确详细信息。

只需使用`gr:Offering`如下所示的类：

```
 <div xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
     xmlns="http://www.w3.org/1999/xhtml"
     xmlns:foaf="http://xmlns.com/foaf/0.1/"
     xmlns:gr="http://purl.org/goodrelations/v1#"
     xmlns:xsd="http://www.w3.org/2001/XMLSchema#"
     xml:lang="en" >
<!-- The Classified Ad content -->
  <div about="#offering" typeof="gr:Offering">
    <div rev="gr:offers" resource="#user1234"></div>
    <strong property="gr:name" >Classified ad - headline (e.g. the text in bold)</strong>
    <div property="gr:description">Here comes the full text of the classified ad .... 
     blablabla</div>
<!-- if you have an image, use this pattern --> 
    <img rel="foaf:depiction" src="http://www.heppnetz.de/rdfa4google/image.jpg" />
<!-- if you know the type of business function (Sell, LeaseOut, Dispose, ProvideService, 
     attach it like this -->
    <div rel="gr:hasBusinessFunction" 
         resource="http://purl.org/goodrelations/v1#Sell"></div>
<!-- if you can provide the price in a structured form, use this pattern 
     (needed for Rich Snippets) -->
    <div rel="gr:hasPriceSpecification">
      <div typeof="gr:UnitPriceSpecification">
        <div property="gr:hasCurrency" content="USD" datatype="xsd:string"></div>
        <div property="gr:hasCurrencyValue" content="89" datatype="xsd:float"></div>
      </div>
    </div>
<!-- provide the URI of a deep link to the page -->
    <div rel="foaf:page" resource="http://www.heppnetz.de/rdfa4google/tc16.html"></div>
  </div> 
```

这在 Google Rich Snippets Testing Tool 中得到验证，您可以[在此处](http://www.google.com/webmasters/tools/richsnippets?url=http://www.heppnetz.de/rdfa4google/tc16.html&view=)看到。

为了您的方便，我刚刚在 GoodRelations Cookbook 中创建了一个相应的食谱：

*   [http://wiki.goodrelations-vocabulary.org/Cookbook/Classifieds](http://wiki.goodrelations-vocabulary.org/Cookbook/Classifieds)

希望有帮助！

# python - Python 没有按预期处理 char 字符串

> ID：11807304
> 
> 赞同：0
> 
> 时间：2012-08-04T09:01:41.580
> 
> 标签：python, for-loop, binaryfiles

我正在处理一个长字符字符串（值为 0..255 的元素），直接从文件中读取。我需要将字符串分成 8 个字节的块。我希望这能奏效：

```
rawindex = file.read()
for chunk in rawindex[::8]:
    print sys.stderr, len(chunk) 
```

...但是 len() 总是返回 1。我做错了什么？

更多信息：* 这不是家庭作业 * 我可以使用 range(,,8)，但我真的很想知道为什么上面的示例不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T09:08:13.353

数组索引中的“step”参数只迭代每个第 8 个元素，而不是一次迭代 8 个元素。您的代码应如下所示：

```
step = 8
rawindex = file.read()
for index in range(0, len(rawindex), step):
    print sys.stderr, len(rawindex[index:index+step]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T09:19:58.307

您可以自己读取正确大小的块。

```
read_chunk = lambda: my_file.read(8)
for chunk in iter(read_chunk, ''):
    print len(chunk) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T09:29:53.977

```
rawindex = file.read() # this line will return the file read output as a string. For example rawindex = abc efgh ijk
rawindex[::8] # will returns all the eight charactors from the above string. so the result will be 'ah' 
```

所以有效地 for 循环将`for chunk in 'ah':` 在第一个循环块中是 a。len('a') 将是 1。所以 len(chunk) 总是会返回 1。

我认为您应该使用范围而不是 rowindex[::8]。

# jquery - 我们如何将选定的 div id 与 cookie 进行比较

> ID：11807307
> 
> 赞同：0
> 
> 时间：2012-08-04T09:03:00.033
> 
> 标签：jquery, html, css

我有一个折叠菜单。因为我使用 cookie 来存储它的值，首先我使用了 Class，但它不能正常工作，所以我将它与 id 一起使用。

在这个当我得到 Id 时，它会显示它的下一个 div 可见。

这是我的[小提琴](http://jsfiddle.net/wasimkazi/yb586/8/)

```
$(document).ready(function() {

function getCookie(c_name) {
    var i, x, y, ARRcookies = document.cookie.split(";");
    for (i = 0; i < ARRcookies.length; i++) {
        x = ARRcookies[i].substr(0, ARRcookies[i].indexOf("="));
        y = ARRcookies[i].substr(ARRcookies[i].indexOf("=") + 1);
        x = x.replace(/^\s+|\s+$/g, "");
        if (x == c_name) {
            return unescape(y);
        }
    }
}

function setCookie(c_name, value, exdays) {
    var exdate = new Date();
    exdate.setDate(exdate.getDate() + exdays);
    var c_value = escape(value) + ((exdays === null) ? "" : "; expires=" + exdate.toUTCString());
    document.cookie = c_name + "=" + c_value;
}

var widget2 = $(".widget2");
var box2 = $(".box2");
if (getCookie('box2cooki')) {
   // alert(getCookie('box2cooki'));
    var id = getCookie('box2cooki');
    id = $(".box2").attr('id');
     alert(id);
    //alert(Element);
    //alert(box2ID);
    //$(".box2").next(".widget2").slideDown(200);
   }
else {
    alert("hiiiiiii");
}

widget2.hide();
box2.click(function() {
    $(this).next(widget2).slideToggle(200);
    var box2ID = $(this).attr('id');
    setCookie('box2cooki', box2ID);
    //alert(box2ID);
    });
    $(".inner").hide();
    $(".box").click(function() {
        $(this).next(".inner").slideToggle(200);
    });

    //alert(box2ID);
});
<div class="box2" id="1"><h3>Basketball</h3></div>
<div class="widget2" style="display: block; ">
<div class="widget"><div class="box"><h3>Australia</h3></div>
<div class="inner" style="display: block; ">
<ul class="leagues">
<li class="even"><a href="#" class="league-145">Australian NBL</a></li>
</ul><div class="clear-both"></div>
</div>
  </div>
</div><div class="box2" id="2"><h3>Tennis</h3></div>
<div class="widget2" style="display: block; "><div class="widget"><div class="box">   <h3>Australia</h3></div>
<div class="inner" style="display: block; ">
<ul class="leagues">
<li class="even"><a href="#" class="league-145">Australian Open</a></li>
</ul>
<div class="clear-both"></div>
</div></div>
</div> 
```

​ ​</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T10:19:57.257

# jquery - 用于 android html5 数据库的 jquery 中的 OR 语句

> ID：11807311
> 
> 赞同：-3
> 
> 时间：2012-08-04T09:03:28.693
> 
> 标签：jquery, sqlite, jquery-mobile

下面是我可以从数据库中搜索的代码，但我希望它使用 OR 语句而不是 AND 语句进行搜索。

```
var sea=$("#search").val();
var sear=$.trim(sea);
var test = sear.split(" ");
var arrDistinct = new Array(); 
$(document).ready(function() { 
    $(test).each(function(index, item) { 
        if ($.inArray(item, arrDistinct) == -1) 
        arrDistinct.push(item); 
    }); //end each
    $(arrDistinct).each(function(index, item) { 

        //database
        var db = openDatabase("Database", "1.0", "Inventory", 200000);
        db.transaction(function (tx) {
            tx.executeSql("SELECT * FROM DEMO WHERE (D_Indications LIKE ?);", ["%"+item+"%"],

                for (i = 0; i < len; i++) {
                    $('#output2').append('<tr><td>'+ results.rows.item(i).Cat_name +'</td><td>'+ results.rows.item(i).Drug_Caty +'</td><td>'+ results.rows.item(i).G_Name +'</td><td>'+ results.rows.item(i).B_Name +'</td><td>'+ results.rows.item(i).D_Indications +'</td></tr>').trigger('create');

                }//end for

                });//end function

            });//end db transaction

        }); //end each function

});//document ready 
```

当用户输入“Hello World”时，我希望它使用“%Hello%”或“%World%”搜索数据库我怎样才能用 jquery 做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T09:13:36.923

如果您想了解 sqlite OR 语句[Python，请参阅这篇文章：sqlite OR 语句](https://stackoverflow.com/questions/4221956/python-sqlite-or-statement)

# jquery - 根据单击的内容动态调整简单模式的大小

> ID：11807316
> 
> 赞同：1
> 
> 时间：2012-08-04T09:03:46.387
> 
> 标签：jquery, simplemodal

我对 jQuery/JavaScript 相当陌生，所以我遇到了一些问题，希望你能指出我正确的轨道。

在我的项目中，我有一排图像，显示图像的预览。一种图片库。

我希望能够单击较小的图像，然后获得简单的模态来显示全尺寸图像，动态调整大小和动画。

我可以用 Ajax 来刷新简单的模式吗？我仍在学习如何将 Ajax 与 jQuery 一起使用，并且似乎有很多方法可以做到这一点。

这是我所拥有的：

jQuery：

```
$('.col1').find('img.overlay').click(function() {

                $('#imgpreview').modal({overlayClose:true});

                var img = $(this).parent().find('img.shared').attr('src');
                var imgW = $(this).parent().find('img.shared').attr('width');
                var imgH = $(this).parent().find('img.shared').attr('height');

                $('#imgpreview').css('width', imgW);
                $('#imgpreview').css('height', imgH);                   
                $('#imgpreview').find('img').attr('src', img);

            });

    }); 
```

HTML：

```
 <div id="imgpreview"><img src=""></div>
                        <div class="col1 bg"><img class="overlay" src="img/overlay.gif" width="104" height="104"><img class="shared" width="104" height="104" src="img/uploaded/img1.jpg"></div>
                        <div class="col1 bg"><img class="overlay" src="img/overlay.gif" width="104" height="104"><img class="shared" width="104" height="104" src="img/uploaded/img2.jpg"></div>
                        <div class="col1 bg"><img class="overlay" src="img/overlay.gif" width="104" height="104"><img class="shared" width="104" height="104" src="img/uploaded/img3.jpg"></div>
                        <div class="col1 bg"><img class="overlay" src="img/overlay.gif" width="104" height="104"><img class="shared" width="104" height="104" src="img/uploaded/img4.png"></div>
                        <div class="col1 bg"><img class="overlay" src="img/overlay.gif" width="104" height="104"><img class="shared" width="104" height="104" src="img/uploaded/img5.jpg"></div>
                        <div class="col1 bg nmr"><img class="overlay" src="img/overlay.gif" width="104" height="104"><img class="shared" width="104" src="img/uploaded/img6.jpg"></div> 
```

我可以在简单模态中显示图像，但图像不在图像的尺寸内，所以我可以给它一个边框和样式，也意味着它不在中间。

另一种选择是为每个图像创建一个简单的模式对话框，并使用 PHP 回显 jQuery，因为图像将在数据库中。但是会有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T09:53:53.563

我对那个模态插件一无所知。根据我的经验，jQuery 插件几乎不值得费心去弄清楚。话虽如此，你可以试试这个......

```
<head>
    $(document).ready( function() {
        $('.overlay).click( function() {
            $('#bigPic).append('<img id="myPic" src="my dynamic source.gif"/>');
        });//end click
    });//end ready
</head>

<body>
    <div id="previews">

        //Your posted html here
    </div>
    <div id="bigPic">

    </div>
</body> 
```

然后 CSS 会有类似：img #myPic{ height: 100%; 宽度：100%；}

看起来你对你的问题有点困惑。在您的情况下，它是 $("img.overlay") 您可以通过调整

```
<div id="bigPic"> 
```

以满足您的需求。

# extjs - 在 extjs 中上传文件

> ID：11807320
> 
> 赞同：2
> 
> 时间：2012-08-04T09:04:03.447
> 
> 标签：extjs, file-upload

我必须使用浏览对话框上传文件。请帮帮我.. 那么在 handler() 中必须写什么？

```
Ext.create('Ext.ux.tab.Toolbar', {
width: 120,
id:'document-inner-right-tabs',
items: [{                                   
   id:'resumeUpButton',
   tooltip:'Upload',
   disabled:true,
   handler:function(){}                         
}]
}); 
```

有人帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T18:23:47.993

只需使用文档`fileuploadfield`中描述的对象[**即可。**](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.form.field.File)它由一个字段和一个按钮组成，当单击该按钮时，它将打开一个文件浏览窗口以允许选择。

如果需要，还有一个隐藏字段的配置，因此它只是一个按钮，然后您可以将文件位置保存在变量或其他东西中。

# ruby-on-rails - capistrano 部署期间延迟作业失败

> ID：11807324
> 
> 赞同：1
> 
> 时间：2012-08-04T09:04:17.130
> 
> 标签：ruby-on-rails, capistrano, delayed-job, activeadmin, thinking-sphinx

我正在使用 ActiveAdmin，capistrano 进行部署，thinkng_sphinx 进行搜索，delayed_job 在添加新记录后自动为 ts 运行 reindex。

我的 deploy.rb 的一部分

```
before 'deploy:update_code', 'thinking_sphinx:stop'
after 'deploy:update',  'thinking_sphinx:index', 'thinking_sphinx:start'

after 'deploy:finalize_update', 'sphinx:symlink_indexes', "delayed_job:stop", "delayed_job:start" 
```

问题是在部署期间运行此命令时

```
 executing "RAILS_ENV=production /.../current/script/delayed_job stop" 
```

我有

```
/.../shared/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:503:in `load_missing_constant'
Expected /.../releases/20120804075838/app/admin/users.rb to define Users (LoadError)
from /.../shared/bundle/ruby/1.9.1/gems/activesupport-3.2.6/lib/active_support/dependencies.rb:192:in `block in const_missing' 
```

...

这是 app/admin/users.rb

```
ActiveAdmin.register ::User do
  index do   
    column :name
column "E-mail", :email
 end
end 
```

我试图将 app/admin/users.rb 重命名为 app/admin/user.rb - 没有

但是如果我只从服务器命令行运行：

```
RAILS_ENV=production script/delayed_job stop 
```

一切正常

从我的 Gemfile

```
gem 'delayed_job'
gem 'delayed_job_active_record'
gem 'daemons'
gem 'thinking-sphinx'
gem 'ts-delayed-delta', :require => 'thinking_sphinx/deltas/delayed_delta' 
```

Thinking-sphinx (2.0.12) ts-delayed-delta (1.1.2) delayed_job (3.0.3) delayed_job_active_record (0.3.2) activeadmin (0.4.4)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T12:15:55.953

在你的 deploy.rb 中试试这个。

```
require "delayed/recipes" 
```

延迟食谱使用 rails_env 变量

```
set :rails_env,   "production"

# Delayed Job  
after "deploy:stop",    "delayed_job:stop"  
after "deploy:start",   "delayed_job:start"  
after "deploy:restart", "delayed_job:restart" 
after "deploy:update_code", "delayed_job:restart"

namespace :delayed_job do

desc "Stop the delayed_job process"
task :stop, :roles => :app do
  run "cd #{current_path}; script/delayed_job -e #{rails_env} stop"
end

desc "Start the delayed_job process"
task :start, :roles => :app do
  run "cd #{current_path}; script/delayed_job -e #{rails_env} start"
end

desc "Restart the delayed_job process"
task :restart, :roles => :app do
  run "cd #{current_path}; script/delayed_job -e #{rails_env} restart"
end
end 
```

# java - postgresql - 在java项目中定义串行数据类型

> ID：11807326
> 
> 赞同：5
> 
> 时间：2012-08-04T09:04:27.410
> 
> 标签：java, hibernate, postgresql, playframework, playframework-2.0

我用玩！框架 2.0 和 postgresql。
在我的数据库中有用户表，每个用户当然都有一个唯一的 ID。
所以我把它定义为`serial`.

`serial`
我的问题是：如何在我的 java 项目中 表示它的数据类型的字段。

ps 我懂玩！框架使用 Hibernate 注解

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T11:49:16.533

从[PostgreSQL 文档](http://www.postgresql.org/docs/8.1/static/datatype.html#DATATYPE-SERIAL)中，该`SERIAL`类型等同于带有序列的“整数”，因此：

```
CREATE TABLE tablename (
    colname SERIAL
); 
```

相当于指定：

```
CREATE SEQUENCE tablename_colname_seq;
CREATE TABLE tablename (
    colname integer DEFAULT nextval('tablename_colname_seq') NOT NULL
); 
```

类型上的`@Id`JPA 注释`Long`将提供一个序列（相当于`AUTO_INCREMENT`MySQL 中的）。

所以，在你的课上，只需使用：

```
@Id
public Long id; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T09:50:55.050

好的。我刚刚添加了注释`@Id`

# mercurial - 使用 mercurial 组织大型项目

> ID：11807329
> 
> 赞同：1
> 
> 时间：2012-08-04T09:05:07.787
> 
> 标签：mercurial

假设我们有以下（Visual Studio）项目（简化）：

*   *基础库 1*
*   *基础库 2*
*   *product-1*：取决于*base-lib-1*
*   *product-2*：取决于*base-lib-1*和*base-lib-2*
*   *product-3*：取决于*base-lib-1*和*base-lib-2*并用作*product-2中的组件*
*   *产品 4*：像*产品 3*

我想知道在一个或多个 Mercurial 存储库中组织这个项目结构的好方法是什么。我们目前使用 Subversion 并将依赖库作为外部库。

现在一种方法是将除*product-1*之外的所有内容放在一个存储库中，因为所有这些产品总是作为一个包一起发布。我会对这个解决方案感到最舒服，因为那时我会很确定如何处理存储库。但是如何在不复制*base-lib-1 的情况下将**product-1*适合该方案？

 *作为替代方案，我考虑过使用像这样组织的子存储库：

*   *产品包-A*
    *   *基础库 1*
    *   *产品-1*
*   *产品包-B*
    *   *基础库 1*
    *   *基础库 2*
    *   *产品-2*
    *   *产品-3*
    *   *产品-4*

这种方法的问题是我从来没有使用过 subrepos，所以我不确定这个解决方案会出现什么陷阱。

例如，子存储库的行为是否像 SVN 外部一样，因为您可以决定是始终使用每个子存储库的最新版本还是固定版本？

如果您同时在*base-lib-1*和*product-2*中进行更改，子存储库的行为如何？Mercurial 是在同一步骤中处理的，还是您必须手动提交/推送和拉取/更新所有内容？在这种情况下，*base-lib-1*的子存储库在*product-package-A*中的行为如何？

如果我想开发一个需要更改多个子存储库的新功能分支，那么在这种情况下分支如何工作？我必须手动分支和合并每个存储库还是由 Mercurial 处理？

使用 subrepos 组织大型项目还有其他陷阱吗？在 Mercurial 中处理具有许多依赖项的大型项目的首选方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:55:51.690

您的问题与此处经常被问到的问题几乎完美重复，但我在快速搜索中找不到很好的参考，因此您可以：**使用 subrepos**

一次回答一个子问题：

> 例如，子存储库的行为是否像 SVN 外部一样，因为您可以决定是始终使用每个子存储库的最新版本还是固定版本？

子存储库与特定版本挂钩，父项目指定哪个版本。

> 如果您同时在 base-lib-1 和 product-2 中进行更改，子存储库的行为如何？Mercurial 是在同一步骤中处理的，还是您必须手动提交/推送和拉取/更新所有内容？在这种情况下，base-lib-1 的子存储库在 product-package-A 中的行为如何？

`hg commit`逗号？nd 有一个`--subrepos`选项，因此您可以选择递归提交或不提交（参见 参考资料`ui.commitsubrepos`）`man hgrc`。Push 总是推送 subrepo 更改。

> 如果我想开发一个需要更改多个子存储库的新功能分支，那么在这种情况下分支如何工作？我必须手动分支和合并每个存储库还是由 Mercurial 处理？

是的，您将在每个 repo 中手动分支和合并。

> 使用 subrepos 组织大型项目还有其他陷阱吗？在 Mercurial 中处理具有许多依赖项的大型项目的首选方法是什么？

只需先做一个测试场景并练习。另外，确保人们有新的客户。这些东西直到 2.1.x 才真正在 UI 方面得到完善*

# opengl - 关于分配openGL 3D纹理大小为1G的问题

> ID：11807344
> 
> 赞同：1
> 
> 时间：2012-08-04T09:07:27.177
> 
> 标签：opengl, textures, large-data-volumes, volume-rendering

我正在做一些关于体积渲染的工作。我想分配一个 1024x1024x1024 uchar 的 3D 亮度纹理。不幸的是，它总是失败。

*通过在glTexImage3D(...)*之后添加*glGetError(* ) ，我得到错误代码**1285**，这意味着“内存不足”。

 ***但是，我的卡是 NV quadro 4800，其内存大小为 1536MB，大于上面的纹理大小（1GB）。该卡的驱动程序版本为 296.88。glew的版本是最新的1.8版本。

我关于分配纹理的代码如下所示：

```
glBindTexture(GL_TEXTURE_3D, texVoxels);
glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_3D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexImage3D(GL_TEXTURE_3D, 0, GL_LUMINANCE, volumeSize.x, volumeSize.y, volumeSize.z, 0, GL_LUMINANCE, GL_UNSIGNED_BYTE, voxels);

int err = glGetError();
printf("%d\n", err); 
```

PS。通过使用 *glGetIntegerv(GL_MAX_3D_TEXTURE_SIZE, dim)*，它返回**2048**，这意味着我的硬件应该能够分配 1024 立方 uchar 纹理。

聚苯乙烯。顺便说一句，我也使用 CUDA 做了一些工作。当我在 CUDA 中分配 2048 立方 uchar 纹理时没有问题。

这个openGL 3D纹理有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T07:27:00.880

感谢所有回答我问题的朋友。我最终找到了我的错。

**我以前在win32**模式下编译代码。当我转向使用**x64**模式编译和运行时，它最终 WORKS ！而且无论 GL_LUMINANCE 还是 GL_LUMINANCE8，它都有效。

设备似乎无法处理大于 600MB（或多或少）的视频内存。

这是我找到的最后一个链接，它解释了我遇到的同样的问题。 [http://www.opengl.org/discussion_boards/showthread.php/177442-Out-of-memory-problem?highlight=memory](http://www.opengl.org/discussion_boards/showthread.php/177442-Out-of-memory-problem?highlight=memory)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T09:13:34.553

> 这个openGL 3D纹理有什么问题？

您超出了内存限制。

仅仅因为您的 GPU 内存为 1.5GB 并不意味着您可以将 1GB 块分配为单个纹理。无论您的卡有多少 GPU 内存，您的 OpenGL 实现都有权以内存为由拒绝这样做。

如果它想拒绝这个，你也无能为力。

你能做的最好的就是尝试给你的图像一个合适的像素大小。也就是说，使用`GL_LUMINANCE8`而不是 unsized `GL_LUMINANCE`。或者更好的是，使用`GL_R8`. 不能保证其中任何一个都会起作用。***

# java - 如何以编程方式使 Android 应用程序崩溃？

> ID：11807354
> 
> 赞同：47
> 
> 时间：2012-08-04T09:10:17.843
> 
> 标签：java, android, eclipse

我想测试崩溃报告，[`acra`](http://code.google.com/p/acra)但第一步是我需要使用代码模拟 Android 中的致命崩溃。

任何想法？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2012-08-04T09:11:25.447

```
Just execute this code: divide by zero 
```

更新：也可以试试这个创建方法，

```
public void stackOverflow() {
        this.stackOverflow();

    } 
```

并在某处调用它/按钮单击

或者简单地抛出一个未捕获的异常

```
throw new RuntimeException("This is a crash"); 
```

答对了！

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-08-04T09:15:50.993

1.  访问未定义的视图。
2.  无需检查即可访问空列表的第一个元素。
3.  除以零。
4.  将设备扔出窗外。
5.  将设备浸入水中。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-08-04T09:12:26.257

> 不要在 Android Manifest 中声明活动。

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2012-08-04T09:16:49.527

您可以尝试空指针异常。

```
Integer i = null; 
```

然后调用对象上的任何方法。

```
i.byteValue(); 
```

在尚未初始化的对象上调用方法将使应用程序崩溃。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2015-01-23T16:04:14.673

只需在 main.xml 中创建一个按钮，如下所示：

```
 <Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:onClick="crash"
    android:text="Crash me" /> 
```

然后运行您的应用程序并单击崩溃

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-08-04T09:22:34.607

一个非常简单的方法......并且**理解它为什么会发生非常重要。**

尝试在方法之前**初始化一个变量**，然后使用它来调用方法或变量或尝试将其注册到某个侦听器。`onCreate()``setContentView()`

**例如：**

```
Button b;

public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        b = (Button)findViewById(R.id.butt);
        b.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

        }
    });
        setContentView(R.layout.main);

    } 
```

这崩溃了，因为**在** `setContentView()` **main.xml 布局中的所有组件/视图都没有得到它们的 id 之前。**

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2014-04-24T15:55:26.390

我知道的最简单的：抛出null。

您不能抛出 null，因此会引发 NullPointerException。

```
throw null; 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-05-19T10:38:43.163

除了@vinnet-shukla 答案：

> “或者只是抛出一个未捕获的异常”

**抛出未捕获的异常来导致崩溃是个坏主意**，因为异常可能会被堆栈中更高的位置捕获 - 特别是当他不知道我们现在在哪里时:)

**更优雅的方法是使用 ERROR**

Error 是 Throwable 的子类，表示合理的应用程序不应尝试捕获的严重问题。大多数此类错误是异常情况。ThreadDeath 错误虽然是“正常”情况，但也是 Error 的子类，因为大多数应用程序不应该尝试捕获它。

所以我们可以创建自己的 Error 子类并使用它：

```
/*
 * usage:
 * 
 *   CrashError.doCrash(); 
 *
 */
public class CrashError extends Error {

    public CrashError() { 
        this("simulated crash");
    }

    public CrashError(String msg) {
        super(msg);
    }

    public static void doCrash() {
        throw new CrashError();
    }

} 
```

**但如果我们谈论其他可能性，我们也可以抛出检查异常:)**

**这也将是一个教训，我们如何使用 sun.misc.Unsafe 以外的其他方式重新抛出检查的异常:)，尤其是当该类在 VM 实现中不可用时**

```
@SuppressWarnings("unchecked")
public static <E extends Throwable> void throwAnyT(Throwable e) throws E {
    throw (E) e;
}

public static void throwUnchecked(Throwable e) {
    throwAny(e);
    // should never get there.
    throw new InternalError();
}

public static void crash() {
    throwUnchecked(new java.io.IOException("simulated crash"));
} 
```

除了@audric 答案：

> “你不能扔空”

**是的，您可以:) 这正是您在示例中所做的**，是的，如果 catch 块不使用 Throwable，它可能无法检测到 - NPX 永远不会被抛出，并且当代码仍将执行时会有正常流程，是的，我'll已经看到了这一点，我自己经历了:)在android dalvik上

那么..呢？也许它可以满足您的需求？

java特定的（也在android中）：

```
- Runtime.getRuntime().exit(int);
- System.exit(int);
- Runtime.getRuntime().halt(int); 
```

安卓具体：

```
- android.os.Process.killProcess(int);
- android.os.Process.killProcessQuiet(int);
- android.os.Process.sendSignal(int,int);
- android.system.Os.kill(int); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-03-25T11:15:11.513

您可能会因简单的空点异常而崩溃。

```
 throw new NullPointerException(); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-01-10T08:47:19.260

对于科特林：

```
val test = ("0")
println(test[1]) 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2020-11-10T10:48:29.550

如果您使用的是 firebase crashlytics，那么有一种非常简单的方法可以做到这一点。在他们的文件中也提到过。

```
val crashlytics = FirebaseCrashlytics.getInstance()
crashlytics.log("my message") 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2021-05-05T11:17:20.080

您可以使用这行代码简单地使应用程序崩溃。

```
throw new RuntimeException("Test Crash"); // Force a crash 
```

您可以传递消息，在本例中为“Test Crash”，以后可以参考。

**领先一步，** 确保您的应用程序的所有类文件都没有实现 UncaughtExceptionHandler 接口，如下所示，

```
public class MyApplication extends Application implements Thread.UncaughtExceptionHandler{ 
```

否则，上述异常或任何与此相关的异常将被该类捕获/使用，从而不会导致应用程序崩溃。但是，您可以在下面的 uncaughtException(Thread t, Throwable e) 方法中获取该异常并采取所需的操作。在您的情况下，您将使用他们支持的 SDK 方法将其报告给 Acra。

```
@Override
public void uncaughtException(Thread t, Throwable e) {
    Log.e("MyApplication", "Error", e);
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-10-22T13:39:01.423

像这样延迟一段时间后强制崩溃，

```
new android.os.Handler().postDelayed(
              new Runnable() {
                  public void run() {
                      Log.i("tag", "This'll run 10 seconds later");
                      throw new RuntimeException("This is a crash");
                  }
              },
              10000); 
```

[参考 1](https://stackoverflow.com/a/11807360/3411787)和[参考 2](https://stackoverflow.com/a/18381353/3411787)

* * *

## 回答 #14

> 赞同：-3
> 
> 时间：2015-01-06T11:44:12.423

使用以下代码：

```
String xyz=null;
system.out.println(xyz); 
```

# javascript - 伪元素和旋转列表

> ID：11807359
> 
> 赞同：0
> 
> 时间：2012-08-04T09:11:10.837
> 
> 标签：javascript, jquery, html-table, pseudo-element

我参考了我之前关于 JQuery Rotating List 的问题。你可以在这里查看帖子。

[jQuery 循环列表](https://stackoverflow.com/questions/10957478/jquery-rotating-list)

我之前的帖子是让我的表格列表中的元素水平移动。`td:first-child`将它作为选择器应用并引用到我的 jQuery 脚本中，它可以工作。

但现在我正试图让我的桌子垂直移动。我尝试将它引用到 tr:first-child 但脚本似乎不起作用。

如果我将我的 (tr) 更改为 (td)，表格将被搞砸，因为没有 (tr) 来分隔列表中的不同项目。我想知道有没有办法解决它。

否则，另一种选择是使用`<li>`这将需要我更改大量代码。

任何可以在这里提供一些建议的人将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T09:19:48.883

您的意思是垂直移动表格的行，就像在[这个 jsfiddle](http://jsfiddle.net/KooiInc/x8dgy/)中一样？或者您想移动单个表格单元格？

# java - 如何正确获取变量的先前值？

> ID：11807361
> 
> 赞同：0
> 
> 时间：2012-08-04T09:11:43.247
> 
> 标签：java, calendar

我想获取变量（gmtHourPrev）的先前值，所以我执行以下操作。出于测试目的更改时间后，我看到 gmtHourPrev 的值始终等于 gmtHour 并且无法获取它的先前值。我在这里做错了什么？谢谢

```
private int gmtHour;
private int gmtHourPrev;

public int getHour() {
    return gmtHour;
}    
public void setGmtHour(int gHour) {
    this.gmtHourPrev = this.gmtHour;
    this.gmtHour = gHour;
}    
public int getGmtHourPrev() {
    return gmtHourPrev;
}

public String getGmtHourInfo() {
    gmtHour = Calendar.HOUR;
    setGmtHour(gmtHour);
    if (isOK() == true) {
       return gmtHour;
    }
    else {
       return getGmtHourPrev();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T09:16:31.623

看这个：

```
gmtHour = Calendar.HOUR;
setGmtHour(gmtHour); 
```

除了`Calendar.HOUR` *可能*不是您认为的那样（这是一个常数）这一事实之外，您实际上是两次设置变量。上面的代码等价于：

```
gmtHour = Calendar.HOUR;
gmtHourPrev = gmtHour;
gmtHour = gmtHour; 
```

这相当于：

```
gmtHour = Calendar.HOUR;
gmtHourPrev = Calendar.HOUR; 
```

您只需要设置一次，例如*只需*调用

```
setGmtHour(Calendar.HOUR); 
```

尽管如此，这个值几乎肯定不是你想要的......

你可能想要：

```
setGmtHour(calendar.get(Calendar.HOUR)); 
```

对于某些实例`Calendar`。

哦，尝试`int`从声明为返回的方法返回一个`String`也不是一个好主意......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T09:16:26.237

`Calendar.HOUR`是一个静态 final int（一个常量），它只是引用 Calendar 对象中的一个字段。它的用途是在`get()`调用 Calendar 实例时传递给该方法，以检索 Calendar 表示的小时值。

除此之外，这两行：

```
gmtHour = Calendar.HOUR;
setGmtHour(gmtHour); 
```

本质上意味着`gmtHour`并且`gmtHourPrev`将始终相等，因为您设置`gmtHour`等于该值，然后调用`setGmtHour()`which 设置`gmtHourPrev`为 的值`gmtHour`，然后设置`gmtHour`为传递的值（的当前值`gmtHour`）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T09:18:51.013

它工作正常；我添加了一些测试代码；你自己看：

```
public class Main {
    private int gmtHour;
    private int gmtHourPrev
    public int getHour() {
        return gmtHour;
    }    
    public void setGmtHour(int gHour) {
        this.gmtHourPrev = this.gmtHour;
        this.gmtHour = gHour;
    }    
    public int getGmtHourPrev() {
        return gmtHourPrev;
    }
    public static void main(String[] args) {
        Main main = new Main();
        main.setGmtHour(5);
        System.out.println("hour set to 5");
        System.out.println("getGmtHourPrev(): " + main.getGmtHourPrev());
        System.out.println("getHour(): " + main.getHour());
        main.setGmtHour(6);
        System.out.println("hour set to 6");
        System.out.println("getGmtHourPrev(): " + main.getGmtHourPrev());
        System.out.println("getHour(): " + main.getHour());
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T09:27:28.340

那么你使用一个值来分配，`gmtHour`所以你总是会得到一个值。

```
public String getGmtHourInfo() {
    gmtHour = Calendar.HOUR;
    setGmtHour(gmtHour);
    ....
} 
```

如果您像这样使用它，您的代码将起作用：

```
 setGmtHour(Calender.HOUR+1);
    setGmtHour(Calendre.HOUR);
    .... 
```

然后打印您会看到差异的值。

# c# - 在 C# 中临时更改按钮单击时的按钮颜色

> ID：11807365
> 
> 赞同：0
> 
> 时间：2012-08-04T09:12:12.660
> 
> 标签：c#, button, lambda, serial-port, background-color

这是**Win形式**

单击按钮时，我想暂时更改按钮的颜色，只说 1 秒钟，然后按钮颜色应该恢复到以前的颜色。我为此使用了 lambda 表达式和计时器。

```
 private void btn_Read_Click(object sender, EventArgs e)
    {
            System.Windows.Forms.Timer t1 = new System.Windows.Forms.Timer();
            t1.Interval = 1000;
            t1.Tick += (src, ee) => 
            {
                btn_Read.BackColor = Color.Transparent; t1.Stop();
            };
            t1.Start();
            btn_Read.BackColor = Color.YellowGreen;
            lvwMessages.Items.Clear();
            string strcommand = "AT+CMGL=\"ALL\"";
            objShortMessageCollection = ReadSMS(strcommand); // Line wher I am reading messages from the port
            foreach (ShortMessage msg in objShortMessageCollection)
            {
                ListViewItem item = new ListViewItem(new string[] { msg.Sender, msg.Message, msg.Sent, msg.Index });
                item.Tag = msg;
                lvwMessages.Items.Insert(0, item);
            }
            if (lvwMessages.Items.Count == 0)
            {
                status_other.Visible = true;
                status_other.Text = "No messages";
                lbl_total.Text = "Total: 0";
                System.Windows.Forms.Timer timer1 = new System.Windows.Forms.Timer();
                timer1.Interval = 2000;
                timer1.Tick += (source, ex) => { status_other.Visible = false; timer1.Stop(); };
                timer1.Start();
            }
            else
            {
                status_other.Visible = false;
                chk_selectmsg.Visible = true;
                btn_delete.Visible = true;
                lbl_total.Text = "Total: " + lvwMessages.Items.Count.ToString(); ;
            }
        } 
```

稍后在此代码中，我正在从串行端口读取数据，显示它等。问题是当我单击按钮时按钮颜色不会改变。这需要一些时间，并且不会给我想要的感觉。有时甚至不改变颜色。可能是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T10:21:02.887

一个简单的解决方案是使用**鼠标悬停**事件和**鼠标离开**事件

以这种方式使用它：

```
 private void btn_Read_MouseHover(object sender, EventArgs e)
    {
        btn_Read.BackColor = Color.AliceBlue;
    }

    private void btn_Read_MouseLeave(object sender, EventArgs e)
    {
        btn_Read.BackColor = Color.AntiqueWhite;
    } 
```

这不需要对您的代码进行任何更改，并且肯定会为您提供功能。看看有没有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T10:07:22.477

您应该避免在 UI 线程上使用工作密集型代码

要获得所需的效果，请将 UI 的代码与执行工作的代码分开......

单击按钮时，更改其外观并启动一些完成工作的后台任务（线程池、后台工作人员等）

请注意，您只能从创建控件的线程与控件交互，因此要显示数据或与 UI 交互，您必须调用 UI 线程（请参阅[Control.Invoke(...)](http://msdn.microsoft.com/en-us/library/a1hetckb.aspx)）

如果您有很多这样的 UI 重置内容，您应该考虑在表单上设置一个计时器，以每隔 200 毫秒检查一次是否有需要重置/完成的内容

您可以使用带有元组 (Datetime,delegate) 的排序列表，一旦时间到了，这些元组就会被执行和删除......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T09:59:39.503

在线程中编写其余代码并触发该线程。这将使您的 UI 响应并为您提供所需的按钮输出。或者使用 btnedit。在更改颜色以强制按钮重绘自身后[刷新（）](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.refresh.aspx)

# jquery - 制作可调整大小的 Flash 播放器

> ID：11807369
> 
> 赞同：0
> 
> 时间：2012-08-04T09:13:06.507
> 
> 标签：jquery, flash

有一次我在看一个 Flash 视频，它的尺寸非常小，所以我检查了元素并更改了尺寸。

这给了我一个想法，即制作一个带有 jquery 滑块的 Flash 播放器，该滑块可以调整播放器的大小。

Web 编程中是否有任何东西能够像检查元素那样实时编辑代码？我想制作这个可重新调整大小的 Flash 播放器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T10:12:32.257

您可以非常愉快地使用 JavaScript 来更改嵌入标签的尺寸，或者使用带有and方法`<object>`的 jQuery ，或者在 JavaScript 中使用 原生的.`height()``width()``window.getComputedStyle([element]).getPropertyValue('height')`

您的视频是否会成功缩放到其大小`<object>`可能取决于您如何编码 SWF。例如，[这里的 JSFiddle](http://jsfiddle.net/H5yJA/)似乎使用 JWPlayer 可以毫无问题地扩展。

# ios - UIScrollView 中的 CGLayer 崩溃

> ID：11807371
> 
> 赞同：0
> 
> 时间：2012-08-04T09:13:30.663
> 
> 标签：ios, performance, scroll, draw, layer

我有一个继承自 UIScrollView 的类。drawRect 函数使用 CGLayer 来缓存绘图以实现更快的滚动。不幸的是，每次我尝试滚动视图时代码都会崩溃。

只要在 iOS 模拟器中单击并拖动，它就会崩溃并出现以下错误：

> 2012-08-04 19:11:09.687 scrolllayertest[3197:c07]-[__NSCFType animationKeys]：无法识别的选择器发送到实例 0x682aa20 2012-08-04 19:11:09.689 scrolllayertest[3197:c07] *** 由于未捕获而终止应用程序exception 'NSInvalidArgumentException', reason: '-[__NSCFType animationKeys]: unrecognized selector sent to instance 0x682aa20' *** First throw call stack: (0x14b2022 0xeb2cd6 0x14b3cbd 0x1418ed0 0x1418cb2 0x4ca94 0x492a5 0x49459 0x5e157 0x49765 0x1449f1a 0x1415635 0x1415026 0x4966b 0x49765 0x1449f1a 0x1415635 0x1415026 0x4966b 0x43dbd 0x15ca0 0x139cef5 0x1486195 0x13eaff2 0x13e98da 0x13e8d84 0x13e8c9b 0x139b7d8 0x139b88a 0x15626 0x21ed 0x2155 0x1) 终止调用抛出异常

我无法弄清楚问题所在。我将代码粘贴在下面。这也在 iPad 模拟器上的 iOS 5.1 中。我还没有在设备上测试它。

层测试.h

```
#import <UIKit/UIKit.h>

@interface LayerTest : UIScrollView

@end 
```

层测试.m

```
#import "LayerTest.h"

@interface LayerTest ()
@property (nonatomic,assign) CGLayerRef layer;
@end

@implementation LayerTest
@synthesize layer;

- (void)setLayer:(CGLayerRef)aLayer {
    if (layer)
        CGLayerRelease(layer);
    layer = aLayer;
}

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
    }
    return self;
}

- (void)dealloc {
    self.layer = nil;
}

- (void)awakeFromNib {
    CGSize sz = self.bounds.size;
    sz.width *= 2;
    self.contentSize = sz;
    self.layer = nil;
}

- (void)setContentOffset:(CGPoint)contentOffset {
    [super setContentOffset:contentOffset];
    [self setNeedsDisplay];
}

- (void)drawRect:(CGRect)rect
{
    CGContextRef context = UIGraphicsGetCurrentContext();

    if (self.layer == nil) {
        self.layer = CGLayerCreateWithContext(context, self.contentSize, NULL);
        CGContextRef contextLayer = CGLayerGetContext(self.layer);
        CGRect contentRect = CGRectMake(0, 0, self.contentSize.width, self.contentSize.height);
        CGContextSetFillColorWithColor(contextLayer, [[UIColor blackColor] CGColor]);
        CGContextFillRect(contextLayer, contentRect);
        CGContextSetFillColorWithColor(contextLayer, [[UIColor yellowColor] CGColor]);
        CGContextFillEllipseInRect(contextLayer, contentRect);
    }
    if (self.layer)
        CGContextDrawLayerAtPoint(context, CGPointZero, self.layer);
}

@end 
```

有关如何修复的任何建议？

# php - 在 PHP 页面中覆盖 CSS 样式

> ID：11807375
> 
> 赞同：1
> 
> 时间：2012-08-04T09:13:47.437
> 
> 标签：php, css, module, stylesheet, whmcs

我目前正在为我们的计费软件编写一个插件模块，当您使用任何元素时，这些模块会自动继承模板的 CSS。例如，我为我的表格使用“datatable”元素，它根据用户当前使用的模板继承 CSS 样式。

我想隐藏“数据表”元素具有的内边框，并且我正在使用标签将我的所有 CSS 放入模块代码中。我不太确定如何做到这一点，但这是计费软件模板 style.css 文件中 CSS 的样子。

```
table.form {
    border: 1px solid #B8CBE7;
    background-color: #fff;
    padding: 0px;
}
table.form td.fieldlabel {
    text-align: right;
    font-weight: bold;
    padding: 5px;
    background-color: #E4ECF8;
}
table.form td.fieldarea {
    text-align: left;
    padding: 5px;
    border-bottom: 1px dashed #ccc;
}
.tablebg {
    background-color: #e9e9e9;
}
table.datatable {
    padding: 0;
    margin: 0;
}
table.datatable th {
    background-color: #f3f3f3;
    font-weight: bold;
    text-align: center;
}
table.datatable td {
    background-color: #fff;
    text-align: center;
}
table.datatable tr.rowhighlight td {
    background-color: #EFF2F9;
}
table.datatable tr:hover td {
    background-color: #EFF2F9;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T09:22:45.403

您可以再次定义相同的数据表**类**并将其边框设置为 0。您只需要确保这个新的 css 定义在实际定义之后

```
table.datatable { 
border: 0px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T09:32:20.177

尝试在 CSS 样式表中附加这一行：

`.datatable{ border: 0 !important; }`

# entity-framework - 无法让 CodeFirst 工作 (EF 4.3) (使用 EF 4.2 Code First 演练): InvalidOperationException: Entity not mapped

> ID：11807376
> 
> 赞同：1
> 
> 时间：2012-08-04T09:13:57.253
> 
> 标签：entity-framework, ef-code-first, mapping, invalidoperationexception, walkthrough

我正在使用 CodeFirst 试验 EntityFramework 4.3。我已经使用 EF 4.0 ModelFirst 和 DatabaseFirst 大约两年了，并且希望将 CodeFirst 集成到现有的 CRM 数据库项目中。（...但在没有现有数据库的情况下尝试过！）

我正在使用 VS 2010、VB.Net 和 SQLEXPRESS Server 2008 进行开发。

所以我开始使用 msdn-Examples 的一个新项目：“EF 4.2 Code First Walkthrough”（ [http://blogs.msdn.com/b/adonet/archive/2011/09/28/ef-4-2-code -first-walkthrough.aspx](http://blogs.msdn.com/b/adonet/archive/2011/09/28/ef-4-2-code-first-walkthrough.aspx) )

以及来自“实体框架的生产力改进”（[http://blogs.msdn.com/b/vbteam/archive/2010/06/21/productivity-improvements-for-the-entity-framework. aspx](http://blogs.msdn.com/b/vbteam/archive/2010/06/21/productivity-improvements-for-the-entity-framework.aspx) )

我引用：“这是您为使该程序运行而编写的 100% 的代码。不需要单独的模型定义、XML 元数据、配置文件或其他任何东西。”

好吧，这似乎不适用于我的系统。我使用 NuGet 数据包管理器安装了 EntityFramework 4.3，并且引用正确。

我第一次尝试没有 App.Config - 适应。我得到了`InvalidOperationException`......未映射：

> “'CodeFirstSample.MyDataAccessDemo.Program + Product' 类型未映射。”

我为我的 SQL Server 连接向 app.config 添加了一个数据库连接字符串，创建了一个数据库“产品”并再次尝试。同样的错误...

我做错了什么？

我用谷歌搜索了很多，但找不到任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T04:52:59.817

您必须将 Blog 和 Post 类带出 Main 类。

请看这篇文章： [http ://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/84dd6851-9ee5-48a2-950b-de90cdb30cb0/](http://social.msdn.microsoft.com/Forums/en-US/adodotnetentityframework/thread/84dd6851-9ee5-48a2-950b-de90cdb30cb0/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T20:18:50.397

我想您对 Database 初始化和 Connection string 有一些问题。

您有必要在项目的起点定义数据库初始化策略，一个示例可能是：

```
 Database.SetInitializer(
    new DropCreateDatabaseIfModelChanges<YourContext>()); 
```

我确实建议尝试一些[Julie Lerman 的源代码示例](http://learnentityframework.com/LearnEntityFramework/downloads/#cfed)，我向您保证它 100% 与 sql server 2008 express 和 visual studio 2008 一起工作，而无需触及任何代码行，只需按 F5 即可。

# java - 评级为行业标准的 Java 开发人员

> ID：11807380
> 
> 赞同：0
> 
> 时间：2012-08-04T09:15:30.383
> 
> 标签：java, spring

有没有办法根据行业标准对 Java 开发人员进行评分。例如：

1 级 2 级 3 级

因此，在每个级别中，Java 开发人员都必须满足某些要求。

我实际上的意思是有某种系统或者我们可以根据行业标准对 Java 开发人员进行评级的东西吗？因此，Java 开发人员满足某些条件才能达到 3 级。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T09:17:56.347

> 是否有某种系统或某种东西我们可以根据行业标准对 Java 开发人员进行评级？

并不真地。Java 生态系统非常复杂，你可以让一个拥有 20 年经验的开发人员在不同的项目中几乎没有所需的技能。

Java 开发经验、技能和兴趣非常多样化。即使是您可能认为特定的常用术语也具有非常广泛的含义。

*你能写一个低延迟的系统吗？*

如果您有低延迟开发经验，这可能意味着

*   您在支持低延迟系统的系统上工作。
*   您在一个系统上工作，所有低延迟的东西都不是由核心开发人员提供的。
*   您编写了核心低延迟代码，但它是由您之前的人编写的。
*   您设计并编码了核心低延迟系统。

你会认为最后一个答案就足够了，除了这里有下一个问题。

低延迟有多低？1s、100ms、10ms、1ms、100us

如果您使用的是 100 毫秒系统，但您需要一个 100 微秒的系统（即 1000 倍的差异），那根本就不一样。

好吧，假设我们需要一个 1 毫秒的系统，而您在一个 1 毫秒的系统上工作，下一个问题是质量和规模。平均为 1 毫秒或 99% 平铺或 99.99% 平铺。你编写这样一个程序的方式是完全不同的。例如无锁、超低 GC、堆外内存、多线程、高效缓存，可能 JNI 到内核绕过网络设备。

如果花 1 毫秒做的不是很多，或者花 1 毫秒从网络获取数据以使用 GPU 并写入磁盘，则向交换发送响应，这又是不同的。

当专业领域的简单问题有复杂的答案时，很难在所有 Java 中提出标准级别。

* * *

一个不同的问题是；招聘人员在对个人进行评分时使用什么。最常见的衡量标准是在 XXXX 的工作年限。它粗糙而简单，但它是一个很好的第一步。

# c# - 如何在 Windows phone 7 中显示 flickr 1,060,834 图像

> ID：11807382
> 
> 赞同：0
> 
> 时间：2012-08-04T09:15:44.970
> 
> 标签：c#, windows-phone-7, windows-phone-7.1, flickr

基本上我正在**Windows phone 7 mango、C# 中开发一个应用程序，**它将显示来自 flickr 自然照片流的 1,060,834 张图像，

我使用了闪烁 api

[http://api.flickr.com/services/rest/?method=flickr.photosets.getPhotos&extras=url_o&photoset_id=](http://api.flickr.com/services/rest/?method=flickr.photosets.getPhotos&extras=url_o&photoset_id=) **[无法找到照片集 id]** + "&nojsoncallback=1&format=json&api_key=[mykey]&sort=date-posted- desc&extras=url_m&per_page=100000000000000";

并解析 json 数据，

但问题是这个服务只返回 500 张图片，当我到达第 500 张图片时，我想再加载 500 张图片，

我使用的照片流是：[http ://www.flickr.com/groups/naturegroup](http://www.flickr.com/groups/naturegroup)

我也找不到photoset id

所以我的问题是：

```
- How could i get all images from flickr photostream 
- How could i know photostream photoset id ? 
```

（[这是](http://www.flickr.com/groups/naturegroup)我指的照片流）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T09:32:53.063

使用[FlickrNet API 库](http://flickrnet.codeplex.com/)。它还支持 Windows Phone 7。

有一个使用此库[检索](http://flickrnet.codeplex.com/wikipage?title=ExampleGettingMoreThanOnePage&referringTitle=Examples)项目页面上的后续页面的示例，以及许多其他[示例](http://flickrnet.codeplex.com/wikipage?title=Examples&referringTitle=Home)。

还有一篇关于 CodeProject 的文章：[一个简单的 ASP.NET Flickr 应用程序](http://www.codeproject.com/Articles/127155/A-Simple-ASP-NET-Flickr-Application)。

# javascript - 从字符串中删除部分 html 标签

> ID：11807384
> 
> 赞同：0
> 
> 时间：2012-08-04T09:16:11.433
> 
> 标签：javascript, jquery, regex

我正在经历从网站提取的内容中删除 html 标签的方法。

它可能包含完整的 html 标签等实例`<a href="\testlink"> tst</a>`

`<div class="testClass"` 或像or之类的损坏的`class="testClass">`，我想出了一种删除完整标签的方法，可以使用javascript或jquery（正则表达式方式）删除部分标签吗？

我用来删除完整标签的代码是`replace(/<(?:.|\n)*?>/gm, '')`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T09:44:07.690

即使使用高级语言，使用正则表达式也很难做到这一点。但是您可以将 html 注入到当前 DOM 中，或者例如在隐藏的 iframe 中。然后你构建一个“节点遍历器”沿着 DOM 树向下收集 HTML 节点的“内部文本”。只要 DOM 代表它们，您就可以使用本机 DOM-Parser 获得所需的内容。

我这样做过一次，它的工作原理是这样的：

```
var nodes = document.getElementsByTagName('BODY');
function nodeWalker(node) {
 if(!node.hasChildNodes()) {
  return;
 }

 for(var i=0; i<node.childNodes.length; i++) {
  // filter by node type == 3 equals TEXT_NODE
  if((node.childNodes[i].nodeType == 3) && node.childNodes[i].nodeValue.length > 0) {               
   // extract content in node.childNodes[i].nodeValue
  }
  // type == 1 equals ELEMENT_NODE
  else if(node.childNodes[ i ].nodeType == 1) {
   nodeWalker(node.childNodes[i]);
  }
 }
} 
```

有关所有可能的节点类型，请参见[http://www.w3schools.com/dom/dom_nodetype.asp ！](http://www.w3schools.com/dom/dom_nodetype.asp)

另一种方法是使用 AJAX 和服务器端 DOM-Parser。

# sql - PostgreSQL 中的 GROUP BY 和 COUNT

> ID：11807386
> 
> 赞同：46
> 
> 时间：2012-08-04T09:16:15.503
> 
> 标签：sql, postgresql, count, distinct, aggregate-functions

查询：

```
SELECT COUNT(*) as count_all, 
       posts.id as post_id 
FROM posts 
  INNER JOIN votes ON votes.post_id = posts.id 
GROUP BY posts.id; 
```

`n`在 Postgresql中返回记录：

```
 count_all | post_id
-----------+---------
 1         | 6
 3         | 4
 3         | 5
 3         | 1
 1         | 9
 1         | 10
(6 rows) 
```

我只想检索返回的记录数：`6`。

我使用子查询来实现我想要的，但这似乎不是最佳的：

```
SELECT COUNT(*) FROM (
    SELECT COUNT(*) as count_all, posts.id as post_id 
    FROM posts 
    INNER JOIN votes ON votes.post_id = posts.id 
    GROUP BY posts.id
) as x; 
```

我如何在 PostgreSQL 中获得此上下文中的记录数？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-08-04T09:25:52.873

我想你只需要`COUNT(DISTINCT post_id) FROM votes`.

[请参阅http://www.postgresql.org/docs/current/static/sql-expressions.html](http://www.postgresql.org/docs/current/static/sql-expressions.html)中的“4.2.7\. 聚合表达式”部分。

编辑：根据欧文的评论纠正了我的粗心错误。

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-08-04T14:45:02.723

还有[**`EXISTS`**](https://www.postgresql.org/docs/current/functions-subquery.html)：

```
SELECT count(*) AS post_ct
FROM   posts p
WHERE  EXISTS (SELECT FROM votes v WHERE v.post_id = p.id); 
```

在 Postgres 中，在*n*侧有多个条目，就像您可能拥有的那样，它通常*比*[`count(DISTINCT post_id)`](https://www.postgresql.org/docs/current/sql-expressions.html#SYNTAX-AGGREGATES)：

```
SELECT count(DISTINCT p.id) AS post_ct
FROM   posts p
JOIN   votes v ON v.post_id = p.id; 
```

中每个帖子的行数越多`votes`，性能差异就越大。用 测试[`EXPLAIN ANALYZE`](https://www.postgresql.org/docs/current/sql-explain.html)。

`count(DISTINCT post_id)`必须读取*所有*行，对它们进行排序或散列，然后只考虑每个相同集合的第一行。`EXISTS`只会扫描`votes`（或者，最好是 上的索引`post_id`），直到找到第一个匹配项。

**如果**保证每个`post_id`in`votes`都存在于表中`posts`（通过外键约束强制执行参照完整性），则此**短形式**等效于较长形式：

```
SELECT count(DISTINCT post_id) AS post_ct
FROM   votes; 
```

实际上可能比每个帖子*没有或很少条目*`EXISTS`的查询更快。

 *您的查询也以更简单的形式工作：

```
SELECT count(*) AS post_ct
FROM  (
    SELECT FROM posts 
    JOIN   votes ON votes.post_id = posts.id 
    GROUP  BY posts.id
    ) sub; 
```

## 基准

为了验证我的说法，我在资源有限的测试服务器上运行了一个基准测试。全部在一个单独的架构中：

### 测试设置

伪造典型的帖子/投票情况：

```
CREATE SCHEMA y;
SET search_path = y;

CREATE TABLE posts (
  id   int PRIMARY KEY
, post text
);

INSERT INTO posts
SELECT g, repeat(chr(g%100 + 32), (random()* 500)::int)  -- random text
FROM   generate_series(1,10000) g;

DELETE FROM posts WHERE random() > 0.9;  -- create ~ 10 % dead tuples

CREATE TABLE votes (
  vote_id serial PRIMARY KEY
, post_id int REFERENCES posts(id)
, up_down bool
);

INSERT INTO votes (post_id, up_down)
SELECT g.* 
FROM  (
   SELECT ((random()* 21)^3)::int + 1111 AS post_id  -- uneven distribution
        , random()::int::bool AS up_down
   FROM   generate_series(1,70000)
   ) g
JOIN   posts p ON p.id = g.post_id; 
```

以下所有查询都返回相同的结果（9107 个帖子中有 8093 个有投票）。
我用`EXPLAIN ANALYZE`ant 进行了 4 次测试，在**Postgres 9.1.4**上用三个查询中的每一个进行了 5 次测试，并附加了生成的**总运行时间**。

1.  照原样。

2.  后 ..

    ```
    ANALYZE posts;
    ANALYZE votes; 
    ```

3.  后 ..

    ```
    CREATE INDEX foo on votes(post_id); 
    ```

4.  后 ..

    ```
    VACUUM FULL ANALYZE posts;
    CLUSTER votes using foo; 
    ```

### `count(*) ... WHERE EXISTS`

1.  253 毫秒
2.  220 毫秒
3.  **85 毫秒** ——**获胜者**（对帖子进行序列扫描，对投票进行索引扫描，嵌套循环）
4.  85 毫秒

### `count(DISTINCT x)`- 带连接的长表格

1.  354 毫秒
2.  358 毫秒
3.  373 毫秒——（对帖子进行索引扫描，对投票进行索引扫描，合并连接）
4.  330 毫秒

### `count(DISTINCT x)`- 没有连接的简短形式

1.  164 毫秒
2.  164 毫秒
3.  164 毫秒——（总是 seq 扫描）
4.  142 毫秒

**有问题的原始查询**的最佳时间：

*   353 毫秒

对于**简化版**：

*   348 毫秒

**@wildplasser 的 CTE 查询**使用与长表单相同的计划（对帖子的索引扫描、对投票的索引扫描、合并连接）加上一点 CTE 的开销。最好的时间：

*   366 毫秒

[即将推出的 PostgreSQL 9.2 中的仅索引扫描](https://wiki.postgresql.org/wiki/What%27s_new_in_PostgreSQL_9.2#Index-only_scans)可以改进每个查询的结果，尤其是对于`EXISTS`.

Postgres 9.5 相关的更详细的基准测试（实际上是检索不同的行，而不仅仅是计数）：

*   [在每个 GROUP BY 组中选择第一行？](https://stackoverflow.com/questions/3800551/select-first-row-in-each-group-by-group/34715134#34715134)

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2016-12-15T07:48:12.067

使用`OVER()`和`LIMIT 1`：

```
SELECT COUNT(1) OVER()
FROM posts 
   INNER JOIN votes ON votes.post_id = posts.id 
GROUP BY posts.id
LIMIT 1; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-04T15:13:51.867

```
WITH uniq AS (
        SELECT DISTINCT posts.id as post_id
        FROM posts
        JOIN votes ON votes.post_id = posts.id
        -- GROUP BY not needed anymore
        -- GROUP BY posts.id
        )
SELECT COUNT(*)
FROM uniq; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-11-03T18:07:25.690

对于追随者，我喜欢 OP 的内部查询方法：

```
SELECT COUNT(*) FROM (
    SELECT COUNT(*) as count_all, posts.id as post_id 
    FROM posts 
    INNER JOIN votes ON votes.post_id = posts.id 
    GROUP BY posts.id
) as x; 
```

从那时起，您也可以在那里使用 HAVING：

```
SELECT COUNT(*) FROM (
    SELECT COUNT(*) as count_all, posts.id as post_id 
    FROM posts 
    INNER JOIN votes ON votes.post_id = posts.id 
    GROUP BY posts.id HAVING count(*) > 1
) as x; 
```

或等效的 CTE

```
with posts_coalesced as (
     SELECT COUNT(*) as count_all, posts.id as post_id 
        FROM posts 
        INNER JOIN votes ON votes.post_id = posts.id 
        GROUP BY posts.id )

select count(*) from posts_coalesced; 
```*

# jakarta-ee - 为什么@SessionsScoped EJB 会在所有用户之间共享？

> ID：11807392
> 
> 赞同：3
> 
> 时间：2012-08-04T09:16:54.283
> 
> 标签：jakarta-ee, return, java-ee-6, cdi

我确定我在这里遗漏了一些东西..但是我有一个会话范围的 EJB：

```
@javax.inject.Named
@javax.ejb.Stateful
@javax.enterprise.context.SessionScoped
public class Authenticator implements Serializable
{
... 
```

我希望每个 HTTP 会话都会看到这个 EJB 的不同实例？

但是，当从多个浏览器（包括在不同的机器上）访问 JSF 页面时，输出

```
#{authenticator.hashCode()} 
```

所有这些都是相同的（当然还有类的成员属性）。为什么会这样？（我已经尝试删除 @Stateful 注释，但同样适用）。

我正在使用 JBoss AS 7.1.0。

编辑：我发现在 Authenticator 上创建一个方法：

```
public void getHashCode()
{
   return hashCode();
} 
```

并在 EL 中将其引用为

```
#{authenticator.hashCode()} 
```

表明我实际上正在访问 bean 的不同实例；但这是为什么呢？我不明白为什么这两个 EL 表达式的结果会不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:35:47.193

您看到的行为与未经身份验证的 HTTP 会话一致，因此我假设您没有设置身份验证。因此，如果您将以下内容添加到您的代码中

```
@Resource
private EJBContext ctx;

public Principal getPrincipal() {
    return this.ctx.getCallerPrincipal();
} 
```

并在您的测试页面中添加

```
<h:outputText value="#{test.principal}" />
<h:outputText value="#{test.hashCode()}" /> 
```

您将始终看到相同的输出。对于 EJB 容器，由于在本地调用中客户端实际上是 servlet 容器，您将始终看到相同的输出`ANONYMOUS{your hash code here}`。每个未经身份验证的 http 会话都算作一个`ANONIMOUS`EJB 会话，因为客户端始终相同 - 您的 servlet 容器。

尝试设置某种身份验证，您会看到您期望的行为，至少我在 Glassfish3+ 环境中是这样。

# java - 添加到 WEB-INF/lib 的 jar 在我尝试导入它们时无法被识别：说该包不存在

> ID：11807395
> 
> 赞同：2
> 
> 时间：2012-08-04T09:17:24.617
> 
> 标签：java, jakarta-ee, apache-commons, apache-commons-fileupload

我已经基于google appengine添加`org.apache.commons.fileupload`并`org.apache.commons.io`打包到我的项目目录中。`WEB-INF/lib`但是当我尝试在 servlet 文件中导入时，编译器/IDE 会给出一个错误，即这个包不存在。这是为什么 ？

添加的*jar*文件：

![在此处输入图像描述](../Images/51fd297fad70036e1c0760f8e68041b7.png)

我收到此错误的原因是什么？我应该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T09:22:56.847

您可能还必须将它们添加到项目的类路径中。

对于日食：

右键单击jar，选择构建路径并将其添加到构建路径，然后重试。

对于网豆：

在项目属性窗口中单击左侧面板中的库。在右侧面板中将其添加到编译类路径

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T11:21:33.677

一般解决方案，每当你得到包不存在时，就会有两件事，1-它根本不存在 2）它存在但仍然抛出错误。解决方案是将 jar 添加到类路径 [以便您的应用在编译、执行期间找到它）

我建议你试试 Maven 。Maven 是一种很好的方式，您可以通过它系统地组织它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T09:23:45.647

如果 IDE 出现问题，则更新 IDE 项目类路径中的 jar :)

# machine-learning - 文档分类的质心算法，阈值检测

> ID：11807404
> 
> 赞同：0
> 
> 时间：2012-08-04T09:19:03.380
> 
> 标签：machine-learning, data-mining, classification, document-classification, centroid

我有一组与特定域相关的文档，并根据该集合训练了质心分类器。我想要做的是，我将为分类器提供来自不同领域的文档，并希望确定它们与受过训练的领域的相关程度。我可以为此使用余弦相似度来获得一个数值，但我的问题是确定阈值的最佳方法是什么？

为此，我可以从不同的域下载多个文档并检查它们的相似度分数以确定阈值。但这是要走的路吗，在统计上听起来不错吗？其他方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T21:54:26.130

实际上，稀疏向量中的质心还有另一个问题。问题是它们通常比原始数据稀疏得多。例如，这增加了计算成本。它可以产生本身实际上是*非典型*的向量，因为它们具有不同的稀疏模式。这种效果类似于使用离散数据的算术平均值：假设汽车的平均门数为 3.4；但显然不存在实际上有 3.4 个门的汽车。**所以特别是，不会有汽车到质心的欧几里得距离小于 0.4！**- 那么质心到底有多“中心”呢？

*有时*使用中心点代替质心会有所帮助，因为它们实际上是数据集的正确对象。

确保控制对数据的此类影响！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T11:38:42.440

一个简单的尝试方法是使用各种机器学习算法 - 特别是基于树的算法 - 与质心的距离。

正如另一个答案（@Anony-Mousse）中提到的，这不一定会为您提供好的或可用的答案，但它可能会。在此过程中使用 ML 框架，例如 WEKA，也将帮助您以更严格的方式估计您的准确性。

以下是使用[WEKA](http://www.cs.waikato.ac.nz/ml/weka/)的步骤：

*   通过找到代表每个班级的大量文档来生成一个训练集（为了获得有效的估计，我建议每个班级至少有几十个）

*   计算从每个文档到每个质心的距离。

*   为每个此类文档生成一个特征向量，由该文档到质心的距离组成。您可以使用单个特征 - 到最近质心的距离；或使用所有距离，如果您想尝试更精细的阈值方案。例如，如果您选择使用单个特征的更简单方法，则表示距离最近的质心为 0.2 的文档的向量属于 A 类将是：“0.2,A”

*   将此集合保存为 ARFF 或 CSV 格式，加载到 WEKA，然后尝试分类，例如使用 J48 树。

*   结果将为您提供总体准确度估计、详细的混淆矩阵，当然还有特定模型（例如树），您可以使用它对其他文档进行分类。

*   这些结果可用于迭代地改进模型和阈值，方法是为有问题的类收集额外的训练文档，方法是重新创建质心或重新训练阈值分类器。

# backbone.js - Backbone - 如何在主视图元素的 div 内显示集合，如何构建页面？

> ID：11807406
> 
> 赞同：0
> 
> 时间：2012-08-04T09:19:11.273
> 
> 标签：backbone.js

我想设计一个简单的页面。抽认卡列表。

在此，我在左侧有一个类别列表，在右侧有一个用于所选类别的抽认卡。上面我有两种形式：添加类别和添加抽认卡。

问题是我有主视图#flashcards，其中我拥有一切。

(1) 如何在一些div里面显示抽认卡集合。(2) 也许我不应该在一个“主视图”中拥有所有内容？您将如何构建这样的屏幕以使所有屏幕都能协同工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T10:13:23.317

正如您所说，仅在一个视图中包含所有逻辑并不是实现页面的正确方法。

通常，当您使用 Backbone 进行设计并开始创建所有需要的元素时，您最终会得到比预期更多的类。

在您的示例中，我将建议：

*   **卡片** 型号
*   **Cards** Collection 存储页面中的所有卡片
*   **CardView** 页面中每张卡片的一个视图。它将`render`卡并将通过其卡监听用户事件，例如`click`，`remove`等等。
*   **CardsView** 引用卡片的Collection，由Collection中`render`的每个元素负责一个CardView。还将监听集合中的更改以查看它是否必须渲染新卡。
*   **CategorySearchView** 监听类别搜索表单中的事件，根据*类别查询*获取新卡片。或者向 Cards 集合发送指令以将属性更改为模型，以便可以显示或隐藏它们。
*   **CategoryCreateView** 监听卡片创建表单中的事件，创建新的 Card 模型将它们发送到服务器并将它们添加到 Cards 集合中。
*   **AppView** 一个主视图来统治它们

# ios - 分组的 UITableView 粘性页眉/页脚部分

> ID：11807412
> 
> 赞同：2
> 
> 时间：2012-08-04T09:20:13.757
> 
> 标签：ios, header, uitableview

是否可以`UITableView`为分组的页眉/页脚部分设置粘性页眉/页脚部分？

如果没有，是否有其他方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T14:16:06.083

这是开箱即用的。

您必须通过继承 UIViewController 来创建自己的 UITableViewController。

这个[答案](https://stackoverflow.com/a/12571975/672989)提供了一些关于粘性页脚的建议。对于粘性页眉和页脚，您需要：

1.  让你的类继承自 UIViewController（而不是 UITableViewController）
2.  让你的班级实现 UITableViewDelegate 和 UITableViewDataSource 协议
3.  在您的类中实现 UITableViewDelegate 和 UITableViewDataSource 方法（例如 cellForRowAtIndexPath:、didSelectRowAtIndexPath: 等）
4.  在 IB 中，将 UITableView 作为子视图添加到视图控制器的视图中
5.  调整和移动 UITableView 的框架以在底部和顶部留出空间用于页眉和页脚
6.  将刚刚添加的表视图的委托和数据源属性设置为视图控制器类
7.  将 2 个子视图添加到您的视图控制器的视图中，一个用于您的页眉，一个用于您的页脚。

现在页脚和页眉视图不是 UITableView 的一部分并且不会滚动。

# c - 如何以编程方式创建新组？

> ID：11807421
> 
> 赞同：1
> 
> 时间：2012-08-04T09:21:36.277
> 
> 标签：c, windows

我想在 Windows 中创建一个组，我找到了下一个参考，但我不知道我是否走在正确的道路上：

[http://msdn.microsoft.com/en-us/library/aa374177.aspx](http://msdn.microsoft.com/en-us/library/aa374177.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T10:27:07.040

不，正确的方法是使用[Net* 函数族](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370675%28v=vs.85%29.aspx)。
在您的情况下，要创建新的 Windows 用户组，您必须使用[NetGroupAdd](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370424%28v=vs.85%29.aspx)函数。

# c# - 如何读取 XML 来创建 resx 文件

> ID：11807423
> 
> 赞同：5
> 
> 时间：2012-08-04T09:21:52.413
> 
> 标签：c#, .net, xml, resx

我有一个 XML 文件

```
<? xml version="1.0" encoding="utf-8"?>
<resources>
    <string name="Foo">Bar</string>
    <string name="Foo1">Bar1</string>

    // More string Tags here

</resources> 
```

我试过

```
XMLTextReader reader = new XmlTextReader("FooBar.xml");

ResXResourceWriter writer = new ResXResourceWriter("FooBar.resx");

while(reader.Read())
{
    if(reader.NodeType == XmlNodeType.Element && reader["name"] != null)
       writer.AddResource("What_should_I_write_here", "What_should_I_write_here");
} 
```

如何读取这个 xml 以便我可以创建一个 resx 文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T10:23:44.617

我终于做到了

```
XMLTextReader reader = new XmlTextReader("FooBar.xml");

ResXResourceWriter writer = new ResXResourceWriter("FooBar.resx");

while(reader.Read())
{
    if(reader.NodeType == XmlNodeType.Element && reader.Name == "string")
       writer.AddResource(reader.GetAttribute("name"), reader.ReadString());
}

writer.Generate();
writer.Close(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T09:24:26.430

像这样的东西：

```
 var xmlReader = new XmlTextReader("c:\\temporary\\cars.xml");

        while (xmlReader.Read())
        {
            switch(xmlReader.NodeType)
            {
                case XmlNodeType.XmlDeclaration:
                case XmlNodeType.Element:
                case XmlNodeType.Comment:
                    sb.AppendFormat("{0}: {1}={2}", xmlReader.NodeType, xmlReader.Name, xmlReader.Value);
                    sb.AppendLine();
                    break;
                case XmlNodeType.Text:
                    sb.AppendFormat("   - Value: {0}", xmlReader.Value);
                    sb.AppendLine();
                    break;
            }

            if(xmlReader.HasAttributes)
            {
                while(xmlReader.MoveToNextAttribute())
                {
                    sb.AppendFormat("   - Attribute: {0}={1}", xmlReader.Name, xmlReader.Value);
                    sb.AppendLine();
                }
            }
        } 
```

# asp.net-mvc-3 - 上传的图片未显示在文件夹中

> ID：11807426
> 
> 赞同：2
> 
> 时间：2012-08-04T09:22:20.277
> 
> 标签：asp.net-mvc-3, file-upload, razor

我正在创建一个 MVC3 Razor 应用程序。我使用了文件上传。我需要保存并显示图像。上传的图像不会显示在 Visual Studio 的文件夹中，但是当我从 Windows 打开相同的文件夹时，会显示图像。之后上传工作。

我的控制器：

```
public ActionResult Save(HttpPostedFileBase attachments)
{
    var fileName = Path.GetFileName(attachments.FileName);
    var physicalPath = Path.Combine(Server.MapPath("~/App_Data"), fileName);
    attachments.SaveAs(physicalPath);
    string fnn = fileName;
    ViewBag.fnn = fnn;
    return Content("");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T09:40:04.960

正如我在评论中所说，Visual Studio 内文件夹中显示的项目是用于您的解决方案的项目。

当您的应用程序在线部署并运行时，它与 VS 没有任何关系。VS 甚至不会运行。

看起来您正在正确上传文件，并且其行为与应有的完全一样。如果要添加上传到 VS 的文件，只需右键单击文件夹，然后选择`Add`然后`Existing Item`选择文件。如果您不需要上传它即可将其添加到您的解决方案中，您可以将其添加到文件夹中以开始使用。

如果您想在您的站点中显示图像，您可以执行以下操作：

```
<img src="@ViewBag.fnn" alt="Uploaded Image" /> 
```

请记住，`ViewBag.fnn`必须具有文件的路径，而不仅仅是文件名。并且`alt=`只是图像的描述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-07T16:09:02.583

兄弟，无论如何，这些图像不会显示在目标文件夹中，但是当您使用另一个类调用它们时，例如，`Delete()`等，它就会出现在文件夹中。别担心，去艾哈迈德`Update()``Search()`

# ruby-on-rails - 带有 :inverse_of 选项的 has_many 行为不可靠

> ID：11807431
> 
> 赞同：1
> 
> 时间：2012-08-04T09:22:54.420
> 
> 标签：ruby-on-rails, activerecord

以[rails 文档](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#label-Bi-directional+associations)为例：

```
class Dungeon < ActiveRecord::Base
  has_many :traps, :inverse_of => :dungeon
  has_one :evil_wizard, :inverse_of => :dungeon
end

class Trap < ActiveRecord::Base
  belongs_to :dungeon, :inverse_of => :traps
end

class EvilWizard < ActiveRecord::Base
  belongs_to :dungeon, :inverse_of => :evil_wizard
end

Dungeon.create!.traps.create!
d = Dungeon.first
t = d.traps.first
d.level == t.dungeon.level # => true
d.level = 10 
```

以下表达式返回 false，尽管它预期返回 true（至少对于 Rails 3.1）：

```
d.level == t.dungeon.level # => false 
```

有什么问题`:inverse_of`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T09:22:54.420

我不确定这是否是一个错误，但是当您使用关联之类的关联时，`inverse_of`它不起作用：

```
d.traps.where('1=1')[0].dungeon.object_id != d.object_id
d.traps.first.dungeon.object_id != d.object_id 
```

虽然当你像数组一样使用它时，它的`inverse_of`行为正确：

```
d.traps.map { |t| t.dungeon.object_id } == [d.object_id]
d.traps[0].dungeon.object_id == d.object_id 
```

创建对象时它可以正常工作：

```
d.traps.build.dungeon.object_id == object_id 
```

它不适用于带有 has_many 的belong_to（并且它在文档中的某处指定）：

```
t.dungeon.tasks[0].object_id != t.object_id 
```

所以为了避免意外`inverse_of`

1.  使用`[0]`代替`first`
2.  不要实现依赖它的逻辑（其他人可能会替换你`select(&:some_predicate?)`的`some_scope`，你的代码将不再有效）
3.  不要在关联的另一端使用`inverse_of`for `belongs_to`with`has_many`

# error-handling - 处理日期的错误处理

> ID：11807434
> 
> 赞同：1
> 
> 时间：2012-08-04T09:23:09.033
> 
> 标签：error-handling, vb6

该代码从服务器下载 CSV 文件，然后进行清理，并将必要的数据输出到另一个 CSV 文件。

我的问题是，周日和节假日服务器上没有创建文件。因此，当在 From 和 To 日期之间遇到这样的日期时，程序将停止继续前进。如何避免这种情况？

如果上一个日期没有文件，我希望程序转到下一个日期。

```
Private Declare Function URLDownloadToFile Lib "urlmon" _
Alias "URLDownloadToFileA" _
(ByVal pCaller As Long, _
ByVal szURL As String, _
ByVal szFileName As String, _
ByVal dwReserved As Long, _
ByVal lpfnCB As Long) As Long

Private Declare Function DeleteUrlCacheEntry Lib "Wininet.dll" _
Alias "DeleteUrlCacheEntryA" _
(ByVal lpszUrlName As String) As Long

Private Const ERROR_SUCCESS As Long = 0
Private Const BINDF_GETNEWESTVERSION As Long = &H10
Private Const INTERNET_FLAG_RELOAD As Long = &H80000000

Private Sub Command1_Click()
On Error GoTo Err
Const q As String = "-"
Dim tmp As String, fName As String, Pos As Long, fPath As String
Dim first As Date, last As Date, spath As String, d As Date
Dim sLineIn As String
Dim sLineOut As String
Dim sCols() As String
Dim sSymbol As String
Dim sName As String
Dim sDate As String
Dim sOpen As String
Dim sHigh As String
Dim sLow As String
Dim sClose As String
Dim sVolume As String
Dim sOpenIntrest As String
Dim sLastSymbol As String
Dim nCounter As String

cap = Me.Caption
If Dir(App.Path & "\NCDEX\", vbDirectory) = "" Then
MkDir App.Path & "\NCDEX\"
End If
spath = App.Path & "\NCDEX\" ' folder to save files : note trailing \
first = MonthView1
last = MonthView2
strURL = "http://www.ncdex.com/Downloads/Bhavcopy_Summary_File/Export_csv/"
For d = first To last
sSourceURL = strURL & Format(d, "MM") & q & Format(d, "dd") & q & Format(d, "yyyy") & ".csv"
Debug.Print sSourceURL
fName = Format(d, "dd-mm-yyyy") & ".csv"
Debug.Print fName
slocalfile = spath & fName
Me.Caption = "Downloading " & fName
Call DeleteUrlCacheEntry(sSourceURL)
URLDownloadToFile 0&, sSourceURL, slocalfile, BINDF_GETNEWESTVERSION, 0&

'  sLastSymbol = "zzz"  'Set to something Symbol cannot possibly be initially.
nCounter = 0
Open App.Path & "\temp.csv" For Output As #2
Open App.Path & "\NCDEX\" & fName For Input As #1
Do While Not EOF(1)
Line Input #1, sLineIn
sLineIn = Replace(sLineIn, Chr(39), vbNullString)
      sLineIn = Replace(sLineIn, Chr(34), vbNullString)
      sLineIn = Replace(sLineIn, " ", vbNullString)
      sCols = Split(sLineIn, ",")
      sSymbol = sCols(0)
      sDate = sCols(15)
      sOpen = sCols(6)
      sHigh = sCols(7)
      sLow = sCols(8)
      sClose = sCols(9)
      sVolume = sCols(10)
      sOpenIntrest = sCols(14)

      If sSymbol = sLastSymbol Then
        nCounter = nCounter + 1
      Else
        nCounter = 1
      End If
      sLastSymbol = sSymbol

      Debug.Print sLineIn
      If sCols(10) <> "0" Then
  ' Only write lines that do not have "0" in Cols(12)

      sLineOut = sSymbol & "_" & nCounter & "," & sDate & "," & sOpen & "," & sHigh & "," & sLow & "," & sClose & "," & sVolume & "," & sOpenIntrest
      Print #2, sLineOut
      End If
    Loop
  Close #1
  Close #2

  ' Delete file 1 and rename file 2 as the original file 1 name.
  ' // Delete the original file
    Kill slocalfile
  ' // Rename the temp file to the original name
    Name App.Path & "\temp.csv" As slocalfile

Next
Me.Caption = cap
'YOU CAN TAKE THIS BELOW OUT IF U DONT WANT IT
MsgBox "Saved to " & spath, vbInformation + vbOKOnly, "Success!"
Exit Sub
Err:     MsgBox "Error", vbCritical + vbOKOnly, "Market Was Closed"
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T11:48:58.140

您没有查看 URLDownloadToFile() 的返回值。如果文件已开始下载，则返回 S_OK (=0)。如果“指定的资源或回调接口无效。” 然后它返回 INET_E_DOWNLOAD_FAILURE。

所以你应该这样做：

```
If URLDownloadToFile(0&, sSourceURL, slocalfile, BINDF_GETNEWESTVERSION, 0&) = S_OK Then

    '  sLastSymbol = "zzz"  'Set to something Symbol cannot possibly be initially.
    nCounter = 0
    Open App.Path & "\temp.csv" For Output As #2
    Open App.Path & "\NCDEX\" & fName For Input As #1
    Do While Not EOF(1)
        Line Input #1, sLineIn
        sLineIn = Replace(sLineIn, Chr(39), vbNullString)
        sLineIn = Replace(sLineIn, Chr(34), vbNullString)
        sLineIn = Replace(sLineIn, " ", vbNullString)
        sCols = Split(sLineIn, ",")
        sSymbol = sCols(0)
        sDate = sCols(15)
        sOpen = sCols(6)
        sHigh = sCols(7)
        sLow = sCols(8)
        sClose = sCols(9)
        sVolume = sCols(10)
        sOpenIntrest = sCols(14)

        If sSymbol = sLastSymbol Then
            nCounter = nCounter + 1
        Else
            nCounter = 1
        End If

        sLastSymbol = sSymbol

        Debug.Print sLineIn
        If sCols(10) <> "0" Then
            ' Only write lines that do not have "0" in Cols(12)
            sLineOut = sSymbol & "_" & nCounter & "," & sDate & "," & sOpen & "," & sHigh & "," & sLow & "," & sClose & "," & sVolume & "," & sOpenIntrest
            Print #2, sLineOut
        End If
    Loop
    Close #1
    Close #2

    ' Delete file 1 and rename file 2 as the original file 1 name.
    ' // Delete the original file
    Kill slocalfile
    ' // Rename the temp file to the original name
    Name App.Path & "\temp.csv" As slocalfile
End If 
```

我还应该提到，查看文档，似乎暗示此函数在文件开始下载时返回。可能是您的文件太小，以至于在函数返回之前已经下载了整个文件。但是，如果您的文件变得足够大，它可能在您自己的代码执行时仍在下载，这意味着文件访问会失败，或者更糟的是，会损坏您的数据。

查看 MSDN 文档中的备注部分。

# orchardcms - 果园：放置内容类型

> ID：11807435
> 
> 赞同：1
> 
> 时间：2012-08-04T09:23:15.573
> 
> 标签：orchardcms

使用 Orchard 1.5，TheThemeMachine
我在 Dashboard 中创建了一个 ContentType（称为 TestTeaser），它在“内容”部分很好地呈现。
但我希望它出现在另一个主题（themeMachine）中指定的主题中，例如“BeforeContent”。

我将此添加到 ThemeMachine 的placement.info 中：

```
<Match Path="~/testteaser">
     <Place Parts_Title="BeforeContent:1"/>
</Match> 
```

我可以看到，它匹配，因为现在标题没有显示在“内容”中（作为其余的 Teaser-Type），但也没有显示在其他地方。

我认为在 1.5 中这应该是可能的。（阅读 bLeroy 某处的帖子）

我该怎么做？？？

谢谢莱因哈德

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T11:57:10.927

Afaik，为了将部件推送到全局区域，您需要在区域名称中添加“/”前缀（因此区域名称应该是`/BeforeContent`）。这是为了区分全局区域和本地区域。

# magento - Magento中产品价格为零时隐藏付款方式信息

> ID：11807437
> 
> 赞同：4
> 
> 时间：2012-08-04T09:23:20.780
> 
> 标签：magento, checkout

在我的 magento 中，有零价格的产品。

结帐时我想隐藏产品`Payment method Information`。

这是结帐步骤的屏幕截图：

![在此处输入图像描述](../Images/3197157891ff29f9cfc600295c53447e.png)

当产品价格为0时，第四步需要隐藏。

我怎样才能做到这一点？

在正常情况下，这意味着如果产品的价格值大于零，则显示所有 1 到 5 步。

但我需要的是，如果产品价格为零，则不显示第四步。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-05-28T08:37:56.580

在管理面板中，

系统 -> 配置 -> 销售 -> 付款方式

启用零小计结帐方法。

它会自动处理它。

但如果你想完全跳过这一步

另外检查 onepage 控制器中的小计，如果它为零，只需更改下一步标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T21:02:34.657

我做过一次，但已经忘记了，

**第 1 步：**首先从管理面板获取配置的统一费率和付款方式 Paypal。

**第 2 步：** app/code/core/mage/checkout/block/onepage.php

更改 $stepCodes 与

```
$stepCodes = array('billing', 'shipping', 'shipping_method', 'review'); 
```

**第三步：** app/code/core/mage/checkout/controller/Onepagecontrollers.php

更改 saveShippingMethod 函数

**第 4 步：** opcheckout.js

[这是来自this](http://www.magentocommerce.com/boards/viewthread/76049/)和 [this](http://www.magentocommerce.com/boards/viewthread/76049/)的有用链接

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T08:42:45.537

试试他们在[这个](http://www.magentocommerce.com/boards/viewthread/76049/)链接中所说的话。

他们所做的是自动跳过步骤。但是，如果你想跳过一个步骤，它需要有一个默认值。

我没有尝试完全按照您的需要做，但我想您可能需要修改**opcheckout.js**并检查您的价格是否为 0。如果价格为 0，那么您将自动分配一个您将忽略的付款方式和跳到下一步。

我想我会尝试这样的事情......

# php - php shell exec在使用wkhtmltopdf时挂起

> ID：11807438
> 
> 赞同：4
> 
> 时间：2012-08-04T09:23:22.443
> 
> 标签：php, wkhtmltopdf, shell-exec

我正在尝试使用 PHP 从 HTML 生成 PDF。我正在运行 Mac OS X 作为我的开发环境，尽管我希望此代码在生产 linux 服务器上运行。

到目前为止，我得到了：

```
$url = escapeshellarg("http://www.google.com/");
$output = shell_exec("/usr/local/Cellar/wkhtmltopdf/0.11.0_rc1/bin/wkhtmltopdf " . $url . " /tmp/tmp_pdf.pdf 2>&1");
echo "<pre>$output</pre>"; 
```

此代码确实在 /tmp/tmp_pdf.pdf 中生成 PDF。问题是它永远不会

```
echo "<pre>$output</pre>"; 
```

浏览器只是挂着说等待服务器....

几乎就像 shell_exec 命令永远不会完成一样。我注意到当我从终端运行 wkhtmltopdf 时，它不会退出到命令行。我得到：

```
Loading page (1/2)
Printing pages (2/2)                                               
Done 
```

然后它也坐在那里，类似于 php 脚本。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:14:51.053

问题出在[rexmac](https://stackoverflow.com/users/624093/rexmac)指出的版本上。使用 wkhtmltopdf 的静态二进制文件解决了 OP 的问题。

# mysql - 查询最大连接

> ID：11807439
> 
> 赞同：0
> 
> 时间：2012-08-04T09:23:23.733
> 
> 标签：mysql, sql, join, syntax

我如何获得[最大值](http://dev.mysql.com/doc/refman/5.0/en/example-maximum-column.html) `MESSAGENUMBER`？

```
mysql> 
mysql> describe ARTICLE;describeNEWSGROUP;
+---------------+------------+------+-----+---------+----------------+
| Field         | Type       | Null | Key | Default | Extra          |
+---------------+------------+------+-----+---------+----------------+
| ID            | bigint(20) | NO   | PRI | NULL    | auto_increment |
| MESSAGENUMBER | int(11)    | YES  |     | NULL    |                |
| NEWSGROUP_ID  | bigint(20) | YES  | MUL | NULL    |                |
+---------------+------------+------+-----+---------+----------------+
3 rows in set (0.00 sec)

+-----------+--------------+------+-----+---------+----------------+
| Field     | Type         | Null | Key | Default | Extra          |
+-----------+--------------+------+-----+---------+----------------+
| ID        | bigint(20)   | NO   | PRI | NULL    | auto_increment |
| NEWSGROUP | varchar(255) | YES  |     | NULL    |                |
+-----------+--------------+------+-----+---------+----------------+
2 rows in set (0.00 sec)

mysql> 
mysql> select * from ARTICLE left join NEWSGROUP on ARTICLE.NEWSGROUP_ID=NEWSGROUP.ID where NEWSGROUP.newsgroup = "gwene.com.economist";
+----+---------------+--------------+------+---------------------+
| ID | MESSAGENUMBER | NEWSGROUP_ID | ID   | NEWSGROUP           |
+----+---------------+--------------+------+---------------------+
| 18 |             4 |            4 |    4 | gwene.com.economist |
| 19 |             5 |            4 |    4 | gwene.com.economist |
| 20 |             6 |            4 |    4 | gwene.com.economist |
| 21 |             7 |            4 |    4 | gwene.com.economist |
| 22 |             8 |            4 |    4 | gwene.com.economist |
| 23 |             9 |            4 |    4 | gwene.com.economist |
| 24 |            10 |            4 |    4 | gwene.com.economist |
| 25 |            11 |            4 |    4 | gwene.com.economist |
+----+---------------+--------------+------+---------------------+
8 rows in set (0.00 sec)

mysql> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T09:25:29.043

```
select * from ARTICLE left join NEWSGROUP 
on ARTICLE.NEWSGROUP_ID=NEWSGROUP.ID 
where NEWSGROUP.newsgroup = "gwene.com.economist" 
ORDER BY MESSAGENUMBER DESC LIMIT 1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T09:31:45.910

```
SELECT MAX(MESSAGENUMBER)
FROM ARTICLE left join NEWSGROUP on ARTICLE.NEWSGROUP_ID=NEWSGROUP.ID 
WHERE NEWSGROUP.newsgroup = "gwene.com.economist" 
```

# asp.net-mvc-3 - 从另一帧刷新一帧

> ID：11807440
> 
> 赞同：0
> 
> 时间：2012-08-04T09:23:27.320
> 
> 标签：asp.net-mvc-3, visual-studio-2010

我正在使用 asp.net mvc3.visual studio2010。

我的应用程序中有三个框架。当我单击不同窗格中的按钮时，我想刷新另一个窗格。

为此，我`frameset`在我的应用程序中使用。我用过

```
<frameset cols="25%,*,25%"> 
    <frame name ="f1" src="../SearchCriteria/Index"/> 
    <frame name="f2" src="../SearchResults/Index" /> 
    <frame name="f3" src="../SearchProfile/Index" />
</frameset> 
```

当我调试应用程序时，我的输出中显示空白页面。你能告诉我哪里做错了吗？

我的视图路径是：
View->SearchCriteria->Index.cshtml View->SearchResults ->Index.cshtml View->SearchProfile ->Index.cshtml

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T15:55:08.447

由于它是一个 ASP.NET MVC 应用程序，因此您的项目中应该已经有[jQuery](http://jquery.com/)库。为什么不使用一些 jQuery 很酷的特性并为用户提供美妙的用户体验呢？

使用 DIV，而不是 FrameSet。将 jQuery 库包含到此页面（或布局页面，以便它在使用该布局模板的所有页面中可用）

```
<div id="divNavigation">
  <ul>
     <li>@Url.ActionLink("About","About","Home",null, new { @class="lnk"})</li>
     <li>@Url.ActionLink("Contact","Contact","Home",null, new { @class="lnk"})</li>
     <li>@Url.ActionLink("Jobs","Jobs","Home",null, new { @class="lnk"})</li>
  </ul>
</div>
<div id="content">

</div>
<script type="text/javascript">
  $(function(){
     $(".lnk").click(function(e){
       e.preventDefault();
       $("#content").load($(this).attr("href"));
     });
  });
</script> 
```

上面代码的作用是，每当用户点击一个带有 css 类 lnk 的锚标签时，它会使用 jQuery`load`函数以异步方式加载链接的 HREF 页面的内容。所以没有页面刷新/重新加载，用户会看到。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T15:34:53.870

将框架更改为具有 ID 的 div，在框架 1 上有一个带 ID 的按钮，将单击事件附加到将获取数据并填充 div 2 的 html 的按钮，这就是它的完成方式。你会发现现在开发人员会走简单的路线，少写代码，多做事。如果您的框架解决方案是可能的（我相信它是），我相信大多数开发人员都会大吃一惊，然后去 OMG WTF 为什么他只是做 XXXX 并使这些东西易于维护:-)

我不想推动任何特定的框架，但如果您对 JSON 或 XML 不满意，您可以直接使用 javascript 完成所有这些并返回 html 内容。

# android - Android 操作栏图标包中的大图标在哪里？

> ID：11807445
> 
> 赞同：6
> 
> 时间：2012-08-04T09:23:57.440
> 
> 标签：android

[您可以通过以下](http://developer.android.com/design/downloads/index.html)网址从 Google 下载一组操作栏图标：

包括三种不同的图标大小，xhdpi (64x64)、mdpi (32x32) 和 hdpi (48x48)，但没有 ldpi 图标。不应该有还是我不理解某些东西？

当您使用 Android Asset studio 并为操作栏创建图标时，它会创建所有四种尺寸，那么，提供了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T09:34:52.267

截至 8 月，1具有密度的[设备不到 2% 。](http://developer.android.com/about/dashboards/index.html#Screens)`ldpi`我认为浪费时间创建`ldpi`资源没有多大意义，因为这些设备的数量会随着时间的推移而减少。

# php - 在 1 个 mysql 查询中仅显示未分类的项目

> ID：11807447
> 
> 赞同：0
> 
> 时间：2012-08-04T09:24:02.983
> 
> 标签：php, mysql

我想知道是否可以在下面转换此代码，以便它只需要 1 个查询而不是分配更多查询？项目表充满了超过 1 万个项目，而下面的方式，只需要很长时间，有没有更快的方法来显示未分类的项目？

```
$CD1=mysql_query("select * FROM items");    
while($C1=mysql_fetch_array($CD1)){
    $sql=mysql_query("select * from category where sub='$C1[sub]'");
    if(mysql_num_rows($sql) == 0)
        echo "$C1[id]->$C1[sub]<br>";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T09:36:57.747

您应该使用外连接和 where 子句来过滤没有类别的项目

```
SELECT i.* FROM items i LEFT OUTER JOIN category c ON i.sub = c.id WHERE c.id IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T09:39:50.687

在一个表中查找在另一个表中没有对应行的行的一种常见方法是使用左连接：

```
select id, sub
from items i
     left join category c on i.sub = c.sub
where c.sub is null 
```

请注意，除了测试代码之外，您应该避免`select *`使用任何其他内容。

# ruby-on-rails-3 - 无法保存嵌套的 belongs_to 关联记录

> ID：11807451
> 
> 赞同：0
> 
> 时间：2012-08-04T09:24:52.090
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1, associations, nested-forms

我有一个典型的模型控制器关系，有很多嵌套形式。

以下是详细信息：-

文章.rb :-

```
belongs_to :author
accepts_nested_attributes_for :author 
```

作者.rb :-

```
attr_accessible :first_name, :last_name
has_many :articles 
```

项目.rb

```
has_many :work_pairs
  has_many :source_articles, :through => :work_pairs

accepts_nested_attributes_for :work_pairs
  accepts_nested_attributes_for :source_articles 
```

项目/new.html.slim

```
= semantic_form_for @project, :html => { :id => 'project_form' } do |form|
  = form.inputs do
    = form.input :user_id, :as => :hidden, :value => current_user.id

    = form.semantic_fields_for :source_articles do |article|
      = article.input :name_article, :label => "Name of the Article"

      = article.semantic_fields_for :author do |author|
        = author.input :first_name
        = author.input :last_name 
```

项目控制器.rb

```
def new
    return unless require_login
    new! do
      @title = t('projects.new.title')
      @project.rewards.build
      @project.work_pairs.build
      @project.source_articles.build
      @project.source_articles.first.build_author
      @project.source_articles.first.build_publisher
    end
  end 
```

但是，当我的作者记录没有保存在数据库中时，它也不会显示任何错误。

当我尝试通过这样做从控制台访问作者时：-

```
p = Project.first
p.source_articles.first.author 
```

我得到 nil 作为输出，有人可以告诉我是什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-05T16:28:49.200

您可以通过以下方式检查错误

```
p.errors.messages 
```

我敢打赌，有一个没有通过的验证。

# jquery - 悬停表格行时显示相应的内容面板

> ID：11807452
> 
> 赞同：0
> 
> 时间：2012-08-04T09:24:53.957
> 
> 标签：jquery

悬停表格行时，我需要显示 2 组内容。悬停前的状态在两个目标区域[1](https://i.stack.imgur.com/OfyE6.png)说明和 [2] 操作中显示通用信息。当用户悬停表格行时，解释和操作内容将替换为与悬停行相关的相关内容。通过说明，这就是我想要实现的目标：

![在此处输入图像描述](../Images/c15265e01f60edfb3811fe7cd91ea2df.png)

感谢您的任何指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T09:34:27.663

这可以使用工具提示的 qTip (2) Jquery 插件来实现：http: [//craigsworks.com/projects/qtip2/](http://craigsworks.com/projects/qtip2/)

您可以激活多个工具提示，一个用于行，一个用于单元格。

```
// Create our first tooltip
$('.selector').qtip({
    content: 'I\'m just one of many tooltips that will render on this element...',
    position: {
        my: 'top left', at: 'bottom right'
    }
})

// Remove the previous tooltips data
.removeData('qtip')

// Create our second tooltip
.qtip({
    content: 'I\'m just one of many tooltips that will render on this element...',
    style: {
        classes: 'ui-tooltip-blue'
    }
}); 
```

资料来源：http: [//craigsworks.com/projects/qtip2/tutorials/advanced/#multi](http://craigsworks.com/projects/qtip2/tutorials/advanced/#multi)

我上面给你的只是一个例子。您需要使用 qTip2 来获得想要的效果。

# vim - 每当 vimrc 被获取时，vim 会自动突出显示“test”

> ID：11807454
> 
> 赞同：0
> 
> 时间：2012-08-04T09:25:03.570
> 
> 标签：vim

每当我在编辑我的`.vimrc`( `:so $MYVIMRC`) 后重新加载 vim 时，这个词`test`总是突出显示。我在 my 中进行了搜索，但里面甚至没有`.vimrc`“ ”这个词。`test`

为什么会这样？我在 Windows BTW 上，我的插件是`pathogen`, `supertab`, `zencoding`,`nerdtree`和`surround`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T20:09:55.203

我认为您`test`的搜索寄存器 ( `@/`) 中有`.viminfo`默认存储在会话之间，而`set hlsearch`您的`.vimrc`. 您可以使用命令检查搜索寄存器的内容

```
echo @/ 
```

一旦我遇到同样的问题，但我现在无法在 Linux 上重现它，所以它可能是固定的或特定于 Windows 的。虽然我的`.vimrc`:

```
if @/ == ''
    set hlsearch
endif 
```

我可以`'hlsearch'`保持禁用状态，因为我有一个映射来切换它（现在我想知道我是否需要这条线......）。这可能不是您的情况，因此另一种变体是禁用搜索突出显示

```
set hlsearch
nohlsearch 
```

或者只是清空搜索寄存器

```
set hlsearch
let @/='' 
```

# c# - 使用 imagemagick.net 裁剪图像

> ID：11807456
> 
> 赞同：0
> 
> 时间：2012-08-04T09:25:27.253
> 
> 标签：c#, imagemagick

我正在寻找使用 imagemagick.net 的示例，但没有找到。我已经下载了 imagemagick.net 并将**ImageMagickNET.dll**作为我的项目参考。我想在单击转换时自动裁剪。我尝试过的代码如下。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using ImageMagickNET;
namespace ImageMagickTest_A
{
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void BtnConvert_Click(object sender, EventArgs e)
    {
          MagickNet.Magick.Init();
          MagicNet.Image img = new MagicNet.Image("file.jpg");
          img.Resize(System.Drawing.Size(100,100));
          img.Write("newFile.png");
          MagickNet.Magick.Term();

    }
}
} 
```

但我收到此错误“'ImageMagickNET.MagickNet'不包含'Magick'的定义”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T11:13:21.300

在这里你使用了 ImageMagickNET 的 resize 方法，所以请参考下面的链接.. 可能你能找到对你有帮助的东西

[如何在 .net 中使用 imagemagick.net？](https://stackoverflow.com/questions/2996973/how-to-use-imagemagick-net-in-net-please-for-examples)

或者

```
using System;
using M = MagickNet;
using System.Drawing;

namespace ConsoleApplication1
{
  class Program
  {
      static void Main(string[] args)
      {
        M.Magick.Init();
        M.Image img = new M.Image("file.jpg");
        img.Resize(new Size(100, 100));
        img.Write("newFile.png");
        MagickNet.Magick.Term();
      }
  }
} 
```

# delphi - 我可以使用 .Create(Nil) 而不是 .Create(Application)

> ID：11807458
> 
> 赞同：7
> 
> 时间：2012-08-04T09:25:34.480
> 
> 标签：delphi, delphi-xe2, tcomponent

我有一个具有 TComponent 变量的单元，我在单元初始化时创建此组件，如下所示：

```
var
  XComp: TComponent;
.
.
.
.

initialization
begin
  XCom := TComponent.Create(Application);
end; 
```

在我关闭 Delphi 时安装该单元后，它给我一个访问冲突错误消息 (EAccessViolation)

但是当我将我的创建者更改为如下

```
initialization
begin
  XCom := TComponent.Create(nil);
end; 
```

一切顺利...我想知道区别？什么是更好的？

注意：错误仅在关闭 delphi 时出现（意味着在设计时）。

谢谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-04T11:15:14.090

当你使用

```
XCom := TComponent.Create(Application); 
```

您让应用程序成为 XCom 的所有者。当应用程序终止时，它将负责销毁 XCom，因为它是所有者。

当你这样做

```
XCom := TComponent.Create(nil); 
```

没有人是 XCom 的所有者，您必须在应用程序终止时自行释放它。

您可能遇到了异常，因为您手动释放了 XCom，然后应用程序也尝试释放 XCom。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-05T10:05:27.973

基本上两者都是允许的，即使你有这样的代码也不应该产生 AV：

```
MyComp := TMyComp.Create(Application);
try
  {...}
finally
  MyComp.Free;
end; 
```

这是因为正确编码的组件在被销毁时会从其所有者的组件列表中删除。

我认为这里的问题可能是该组件已经被应用程序对象释放，后来一些代码尝试访问它。也许您的代码中有一个 finalize 部分，是吗？或者你可能有混合的对象和接口，引用计数让你受益。

要调试您的问题，您可以通过将包的“主机应用程序”设置为 Delphi (C:\Program Files\\BDS\\Bin\bds.exe) 在调试器中运行 IDE。并在组件的析构函数中设置断点。这样你就会知道它在哪里被释放以及 AV 发生在哪里。

# c++ - 如何在 C++ 中直播网络摄像头服务器？

> ID：11807463
> 
> 赞同：0
> 
> 时间：2012-08-04T09:26:45.323
> 
> 标签：c++, webcam

我正在做一个个人项目，我想学习如何创建一个直播网络摄像头服务器。我试图上传文件并将它们发布到我的服务器，但延迟结果太大而无法直播。有人有一些 C++ 网络摄像头服务器的源代码示例吗？或任何有用的指示？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T09:43:24.387

[顾名思义， RTSP](http://en.wikipedia.org/wiki/Real_Time_Streaming_Protocol)应该更适合现实生活中的流媒体应用程序。为了减少延迟，您可以使用比特率和丢帧。虽然有专有的 pvServer，它能够进行 HTTP 流式传输。

# jquery - jQuery加法运算

> ID：11807465
> 
> 赞同：3
> 
> 时间：2012-08-04T09:26:52.123
> 
> 标签：jquery, addition

嗨，我写了一个 jquery 脚本。我是 jquery 的菜鸟。我想增加购物车数量+1。但是这个脚本没有添加 +1 它连接 1。我该怎么办？

```
<script type="text/javascript">
     $('#shopping-cart-button').click(function(){
          var cart_count = $('#cart_count').text();
          cart_count = cart_count + 1;
          $('#cart_count').text(cart_count);
          });
</script> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-04T09:28:11.450

`.text()`返回字符串，所以你必须使用**[`parseInt(value, radix)`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/parseInt)**将字符串转换为数字。

```
$('#shopping-cart-button').click(function(){
    var basket_count = $('#basket_count').text();
    basket_count = parseInt(basket_count, 10) + 1;
    $('#basket_count').text(basket_count);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T06:44:08.480

在输入类型文本的情况下尝试这样的事情

```
$('YOUR_ID_HERE').val($('YOUR_ID_HERE').val() + 'SOME OTHER VALUE'); 
```

# google-webfonts - 如何使用 Google Webfonts API 按类别对字体进行排序？

> ID：11807467
> 
> 赞同：2
> 
> 时间：2012-08-04T09:27:08.830
> 
> 标签：google-webfonts

我希望能够识别特定类别（sans、sans-serif）中的所有字体，这可以通过 Google 的网络字体查看器实现，但似乎无法通过 API 工作。

[https://developers.google.com/webfonts/docs/developer_api#Details](https://developers.google.com/webfonts/docs/developer_api#Details)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T10:06:00.903

**简短的回答**：从[这个要点中得到它](https://gist.github.com/4086108)

**更长的答案**：这是一个执行此操作的小型 scala 程序。您需要从[http://code.google.com/p/googlefontdirectory](http://code.google.com/p/googlefontdirectory)签出 googlefontdirectory 项目才能使用它并`basePath`在下面的程序中更改：

```
import com.google.gson.GsonBuilder
import org.apache.commons.io.IOUtils
import java.io.FileInputStream
import collection.mutable
import collection.JavaConverters._

object Webfonts {
  private val basePath = new java.io.File("/path/to/googlefontdirectory")

  def main(args: Array[String]) {
    val fontDetailsList = mutable.ListBuffer.empty[FontDetails]
    val categoryMap = mutable.Map.empty[String, java.util.List[String]]

    val gson = new GsonBuilder().setPrettyPrinting().create()
    for (font <- FontsList.fonts ) {
      fontDetailsList += gson.fromJson(IOUtils.toString(new FileInputStream(new java.io.File(basePath, font))), classOf[FontDetails])
    }

    fontDetailsList.filter(_.subsets.contains("latin")).foreach((font) => {
      val a = categoryMap.getOrElseUpdate(font.category, new java.util.ArrayList[String]())
      a.add(font.name)
    })

    val json = gson.toJson(categoryMap.asJava)
    println(json)
  }

  case class FontDetails(name: String, license: String, category: String, size: Int, subsets: Array[String]) {
    override def toString = category + " : " + name
  }

}

object FontsList {
  val fonts = Array(
    "./apache/aclonica/METADATA.json",
    "./apache/calligraffitti/METADATA.json",
    "./apache/cherrycreamsoda/METADATA.json",
    "./ufl/ubuntucondensed/METADATA.json",
    "./ufl/ubuntumono/METADATA.json"

  )
} 
```

[您可以在https://gist.github.com/4085914](https://gist.github.com/4085914)获得完整的 FontsList

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T20:30:55.410

我认为 API 不支持这一点。如果您检查从 API 返回的 JSON 文件，它不会显示此信息。Google Web Font 小组也提出了类似的问题，但没有答案。

[https://groups.google.com/forum/?fromgroups=#!topic/googlefontdirectory-discuss/U2cROKUjRqM](https://groups.google.com/forum/?fromgroups=#!topic/googlefontdirectory-discuss/U2cROKUjRqM)

# php - 使用 php readfile 下载 Flash 视频

> ID：11807468
> 
> 赞同：0
> 
> 时间：2012-08-04T09:27:09.207
> 
> 标签：php, flash, readfile

我正在尝试使用 PHP 的 readfile() 函数将 flv 视频下载到 Flash 播放器，使用它我可以隐藏文件的位置。我尝试了这些代码，但 jw 播放器不起作用，文件可以单独下载，但它不适用于播放器。

```
<?php

$file = '/vid/myvideo.flv';
header('Content-Description: File Transfer');
header('Content-Type: video/x-flv');
header("Cache-Control: no-cache");
header('Content-Disposition: attachment; filename=myvideo.flv' );
header("Pragma: no-cache");
header('Content-length: '.filesize($file));

flush();
@readfile($file) or die("File not found.");
?> 
```

当我传输 .swf 文件时，它可以工作，但文件的路径是可见的。

是否可以使用 readfile() 函数将 flv 文件下载到 Flash 播放器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T17:13:50.823

尝试使用**fread**而不是使用**readfile**。这就是我目前正在做的方式。它可以在我的系统上使用 jwplayer。我用 [这个链接](http://www.therealtimeweb.com/index.cfm/2005/11/2/Streaming-flv-video-via-PHP-take-two)作为参考。 这是一些示例代码：

```
`//create the header
header("Content-Type: video/x-flv");
header('Content-Length: ' . filesize($file));
//open the file
$fh = fopen($file, "rb");
ob_end_clean();
//start sending the file
while (!feof($fh)) {
    print(fread($fh, 8192));
}
//the file has been completely sent. close the file.
fclose($fh);

?>` 
```

 **然后当你创建你的 jwplayer 时，这里是代码。

```
$(document).ready(function(){
     jwplayer("mediaplayer").setup({
          flashplayer: "player.swf", 
          file: "/getFlv.php", //for this example, getFlv.php is located at www.domain.com/getFlv.php
          provider:'http'
     });
 }); 
```**

# django - Django：避免将通用 url 参数传递给每个视图

> ID：11807474
> 
> 赞同：2
> 
> 时间：2012-08-04T09:27:51.247
> 
> 标签：django, google-app-engine, namespaces, datastore, urlconf

> **可能重复：**
> [Django：如何访问中间件类中的 URL 正则表达式参数？](https://stackoverflow.com/questions/11775441/django-how-to-access-url-regex-parameters-inside-a-middleware-class)

我在谷歌应用引擎中使用 django。我的应用程序中的每个 url 都有一个公司代码，格式如下：

[http://localhost:8080/[公司]/blah/blah](http://localhost:8080/[company]/blah/blah)

我想要做的是预处理 url 并获取 [company]，将 appengine 数据存储命名空间设置为公司代码。这可以通过使用命名的 url 模式来完成，该模式会将公司代码作为 kwargs 参数传递给每个视图函数。这似乎太多了，不能在一开始就设置一个命名空间。此外，在我的任何观点中，我都不需要这家公司的参数。

是否可以从 url 参数设置命名空间，但避免将公司参数传递给我项目的每个视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T12:34:41.837

您实际上不需要在视图函数定义中包含 kwarg，因此您可以忽略它。

```
url(r'^(?P<company>[-\w]+)/$','app.views.foo_view', name="foo_view"), 
```

和

```
def foo_view(request):
    pass 
```

或者使用 kwargs 之外的[`process_request`](https://docs.djangoproject.com/en/dev/topics/http/middleware/?from=olddocs/#process-view)中间件和`pop`公司，这样它就不会传递给任何视图。

# html - iframe 上的 allowtransparency 属性中的验证错误

> ID：11807476
> 
> 赞同：2
> 
> 时间：2012-08-04T09:28:23.150
> 
> 标签：html, css, iframe, transparency

我正在为我的网站使用 facebook。所以我使用`allowTransparency='true'`了，但在验证的情况下，它显示的错误如下：

> iframe 元素上的 allowtransparency 属性已过时。改用 CSS。

如何解决这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T09:48:08.123

# javascript - 单引号的javascript验证

> ID：11807478
> 
> 赞同：0
> 
> 时间：2012-08-04T09:28:37.583
> 
> 标签：javascript

我的注册表中有一个密码字段。以下是javascript验证的代码。

```
if(document.getElementById('txtPassword').value == '' || document.getElementById('txtPassword').value == 'Password' ){
            alert("Please enter Password");
            document.getElementById('txtPassword').focus();
            return false;
        }

      else if (document.getElementById('txtPassword').value.length < 8)
       {
               alert('Please ensure your password has at least eight characters, a mix of upper and lowercase and at least one number');
               return false;
       }

      else if ( (! document.getElementById('txtPassword').value.match(/[a-z]/) ) || (! document.getElementById('txtPassword').value.match(/[A-Z]/) ) ) {
               alert('Please ensure your password has at least eight characters, a mix of upper and lowercase and at least one number');
               return false;
       }

      else if (!document.getElementById('txtPassword').value.match(/\d+/)) {
               alert('Please ensure your password has at least eight characters, a mix of upper and lowercase and at least one number');
               return false;
       }

        else if (document.getElementById('txtPassword').length < 8)
       {
               alert('Please ensure your password has at least eight characters, a mix of upper and lowercase and at least one number');
               return false;
       } 
```

我需要检查单引号。如果用户在密码字段中输入单引号并点击输入，则会弹出错误“避免在此字段中使用单引号”。

怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T09:30:25.227

```
else if (document.getElementById('txtPassword').value.indexOf("'") != -1) {
    alert("Avoid single quotes in this field");
    return false;
} 
```

这是一个简单的测试用例。如果你制作一个 html 页面，把它放在 head 标签中，在浏览器中打开它，你会看到它可以工作：

```
var value1 = "abc'def";
var value2 = "abcdef";
if(value1.indexOf("'") != -1)
    alert(value1 + " contains a '");
else
    alert(value1 + " does not contain a '");
if(value2.indexOf("'") != -1)
    alert(value2 + " contains a '");
else
    alert(value2 + " does not contain a '"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T09:42:50.310

使用此正则表达式进行密码检查

```
^(?=.*\d)(?=.*[a-zA-Z]).{8,} 
```

目前你正在做很多验证检查，以避免那些只使用上面的正则表达式。

```
if (! /^(?=.*\d)(?=.*[a-zA-Z]).{8,}/.test(txtPass)) {
    flag = false;
}
else if(txtPass.indexOf("'") != -1) {
    flag = false;
}

if (!flag)
    alert("Please ensure your password has at least eight characters, a mix of upper and lowercase and at least one number"); 
```

参考**[现场演示](http://jsfiddle.net/SivaCharan/FayfQ/1/)**

# java - servlet 对 jsp 页面的响应

> ID：11807479
> 
> 赞同：-1
> 
> 时间：2012-08-04T09:28:52.543
> 
> 标签：java, javascript, ajax, jsp, servlets

假设 servlet text.java 将 html 内容返回到 jsp 页面 index.jsp。

在`index.jsp`

```
<button onclick="location.href='text'">CLICK</button> 
```

在`text.java`

```
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    PrintWriter out = response.getWriter();
    try {
     out.println("<b>HELLO</b>");
    } finally { 
        out.close();
    }
} 
```

现在我们说servlet响应web浏览器的请求，那么在点击按钮后为什么在url而不是jsp页面中有servlet的名称并且控制没有返回到jsp页面。

这只能用 ajax (formelement.innerHTML= ob.responseText()) 吗？//其中 var ob = new XMLHttpRequest();

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T09:37:16.527

你可以这样进行...

```
protected void processRequest(HttpServletRequest request, HttpServletResponse response)
  throws ServletException, IOException {
    response.setContentType("text/html;charset=UTF-8");
    String str = "<b>heloo</b>";
    request.setAttribute("result", str);
    request.getRequestDispatcher("/index.jsp").forward(request, response);
} 
```

在 jsp 中只需通过以下方式获得结果：

```
request.getAttribute("result"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T09:44:20.713

JSP 是作为模板编写的 servlet。Servlet 是服务器端的，通常不会相互调用。这是您的网页（无论它是否通过 jsp 生成），它公开了指向**URL 的链接，而不是 java 文件**。单击该链接时，您的浏览器会向您的服务器发送一个请求以获取该链接的 URL。因此，在您的服务器上，此 URL（由您定义）必须映射到`Servlet`将处理请求并产生响应的类。`web.xml`在您的 WAR 文件中配置此 URL 到 servlet 的映射。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T09:33:09.563

你应该看到如何在 web.xml 中映射 servlet，搜索基本的 servlet 教程。

您不能提供像 text.java 这样的链接并期望它会触发 text.java servlet。您需要将 url 映射到 servlet 类

# c - 命名和未命名信号量的使用

> ID：11807481
> 
> 赞同：2
> 
> 时间：2012-08-04T09:29:21.100
> 
> 标签：c, linux, posix, shared-memory, semaphore

我在[这篇文章](https://stackoverflow.com/questions/11788605/named-and-unnamed-posix-semaphores)中阅读了有关命名和未命名信号量的文章，其中指出命名信号量用于 2 个不相关的进程，未命名信号量用于 2 个相关进程。

如果我的程序适用于相关和不相关的进程，我可以为这两种情况使用命名信号量吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T09:53:22.117

是的，您可以，命名信号量*始终*有效。

如帖子中所述，您链接了一个未命名的信号量更容易处理（因为操作系统确实会自动处理很多东西），但需要在相关进程之间建立一些共享结构。

# javascript - 在jquery中增加5位数字

> ID：11807483
> 
> 赞同：2
> 
> 时间：2012-08-04T09:29:35.273
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何在 JavaScript 中输出带前导零的整数](https://stackoverflow.com/questions/2998784/how-to-output-integers-with-leading-zeros-in-javascript)

我有一个函数增量，它在鼠标单击时将值增加 1。但我希望它在鼠标单击时从 00001 增加到 00002，在每次鼠标单击时增加 00003 等等。

```
<script type="text/javascript">
$(document).ready(function(){
    var count = 00001;
    $('#increment').click(function (e) {
        e.preventDefault();
        count++;
        $('p').text(count);
    });
});
</script>

<p>00001</p>
<input type="button" value="Increment" id="increment"/> 
```

请帮帮我，

谢谢，

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T09:38:25.357

```
var count = 0,
    pad = '00000';
$('#increment').click(function(e) {
    e.preventDefault();
    count++;
    var ctxt = '' + count;
    $('p').text(pad.substr(0, pad.length - ctxt.length) + ctxt);
});​ 
```

**[演示](http://jsfiddle.net/a8yHN/2/)**

# javascript - jQuery 事件修剪对我不起作用

> ID：11807487
> 
> 赞同：0
> 
> 时间：2012-08-04T09:30:00.123
> 
> 标签：javascript, jquery

我正在尝试修剪和缩短一些 HTML。我使用这段代码：

```
$(window).bind("load", function() {
    $.trim('a').substring(0, 10).split(" ").slice(0, - 1).join(" ") + "...";
});​ 
```

它不起作用。我尝试了很多东西，但似乎无法让它发挥作用......看看这个例子：[JsFiddle](http://jsfiddle.net/ysFNK/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T09:40:38.893

首先——jquery trim 接受字符串而不是过滤器。

[jQuery修剪](http://api.jquery.com/jQuery.trim/)

这是一个工作小提琴。您只需要遍历每个锚标记即可修剪所有锚

[http://jsfiddle.net/ysFNK/7/](http://jsfiddle.net/ysFNK/7/)

与锚点循环：

[http://jsfiddle.net/ysFNK/11/](http://jsfiddle.net/ysFNK/11/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T09:43:55.353

我认为您的意思[是](http://jsfiddle.net/KooiInc/LWuLs/)：

```
$('a').each(function(i,el) {
   el = $(el);
   old = $.trim(el.html());
   el.html( old.substring(0, 10).split(" ").slice(0, -1).join(" ") + "..." );
});​ 
```

或者：

```
$('a').html(
     function(){
         return $.trim($(this).html())
                .substring(0, 10)
                .split(" ").slice(0, -1)
                .join(" ") + "...";}
); 
```

# jquery - JQM Datebox 从 durationbox 中删除小时和秒

> ID：11807488
> 
> 赞同：3
> 
> 时间：2012-08-04T09:30:04.367
> 
> 标签：jquery, jquery-mobile, datebox

我已经很好地浏览了他们的文档，但是有谁知道是否可以从持续时间框的弹出窗口中删除“天”和“秒”选项？

这是我所拥有的：

```
<label for="time">Duration (mins)</label>
<input name="duration" id="duration" type="date" data-role="datebox" data-options='{"mode": "durationbox", "overrideDurationFormat": "%DM"}'> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T00:46:18.293

是的，像：

```
"overrideDurationOrder":["h","i"] 
```

我相信

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T18:02:53.803

你可以试试这个：

```
<input name="mydate" id="mydate" type="date" data-role="datebox" data-options='{"mode": "durationbox", "durationOrder": ["d", "h"]}'> 
```

# entity-relationship - 实体关系图中的sql联结表如何显示

> ID：11807489
> 
> 赞同：1
> 
> 时间：2012-08-04T09:30:05.557
> 
> 标签：entity-relationship, erd, entity-relationship-model

实体关系假设：

1.  N 个测试计划有 M 个测试步骤。
2.  1 测试计划有 N 个截图

因此，我有一张`TestplanTeststep`桌子和一张`Screenshot`与桌子相关的`TestplanTeststep`桌子。

**问题**：但是我如何用 ERD 来表达这一点？

当我回顾第 2 点时。）那么 a`Testplan`有 N是不正确的`Screenshots`，因为 a`Testplan`不能有`Screenshots`。实际上`TestplanTeststep`有 N `Screenshots`，但公平的 ERD 是概念模型而不是物理模型（sql 表）。

**再次提问**：如何用 ERD 表示 a`Screenshot`属于 a`TestplanTeststep`但不属于 a `Testplan`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-27T13:47:43.500

您所有的关系都是一对多的（即 1 个测试计划有 0-n 个测试步骤，1 个测试步骤有 0-n 个屏幕截图）。您的图表应如下所示：

![在此处输入图像描述](../Images/e182401677b63d05ede0c8a025c2f4e8.png)

# php - 如果玩家数组为空，则回显“No Players Online”

> ID：11807495
> 
> 赞同：2
> 
> 时间：2012-08-04T09:31:05.163
> 
> 标签：php, list

我想要它，以便如果数组中有玩家，它将与图片一起返回。到目前为止有效。不行的是，当数组中没有玩家时，它会返回一张空白图片，并且不会 echo `"No Players Online"`。

```
$query = (Minequery::query("67.202.102.224"));
$plist = $query['playerList'];
foreach($plist as $k => $v)
    // print_r(Minequery::query_json("67.202.102.224"));
    if (defined($plist)){
        echo'<img src="http://minotar.net/avatar/'.$v.'" title="'.$v.'" height="50"     width="50">  '; 
    } else {
        echo 'No Players Online';
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T09:40:05.823

你有点把你的车放在你的马前面：

```
$query = (Minequery::query("67.202.102.224"));
$plist = $query['playerList'];
foreach($plist as $k => $v)
    //print_r(Minequery::query_json("67.202.102.224"));
    if (defined($plist)){
        echo'<img src="http://minotar.net/avatar/'.$v.'" title="'.$v.'" height="50"            width="50">  ';  
    }
    else {
        echo 'No Players Online';
    } 
```

在您开始尝试遍历它之后，您正在检查数组是否有内容。试试这个：

```
$query = (Minequery::query("67.202.102.224"));
$plist = $query['playerList'];
if (!empty($plist)) {
    foreach($plist as $k => $v) {
        echo '<img src="http://minotar.net/avatar/'.$v.'" title="'.$v.'" height="50" width="50">  ';  
    }
}
else {
    echo 'No Players Online';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T09:36:03.993

一个空数组（例如`array()`）等于`false`，这意味着使用简单的 if 子句可以处理：

```
if ($plist) {
    echo '<img src="http://minotar.net/avatar/'.$v.'" title="'.$v.'" height="50" width="50"> ';  
} else {
    echo 'No Players Online ';
} 
```

但是，您需要在循环之前检查它：

```
if (!$plist) {
    echo 'No Players Online';
} else {
    foreach($plist as $k => $v) {
        echo '<img src="http://minotar.net/avatar/'.$v.'" title="'.$v.'" height="50" width="50">';
    }
} 
```

> **注意：**您需要最新版本的[minequery-php](https://github.com/vexsoftware/minequery-php)才能正常工作。有一个错误已修复。现在。

如果您在 HTML 中使用它，请注意`$v`应该正确编码 - 而不是它包含 HTML，然后您的预期 HTML 会被破坏。见[`htmlspecialchars`](http://de.php.net/htmlspecialchars)。

与您使用它的 URL 类似，如果您没有正确地对其进行 URL 编码，则该 URL 可能会损坏。见[`urlencode`](http://de.php.net/urlencode)。

# magento - 我的 Magento 模板有什么奇怪的地方吗？

> ID：11807496
> 
> 赞同：0
> 
> 时间：2012-08-04T09:31:18.360
> 
> 标签：magento, translation

h1 html代码的客户登录页面是

```
<h1 class="translate-inline" 
translate="[{shown:'Create an Account',translated:'Create an  Account',original:'Create an Account',location:'Heading level 1',scope:'Mage_Customer'}]">
Create an Account
</h1> 
```

并且有

```
<span class="translate-inline-title translate-inline" 
translate="[{shown:'Create New Customer Account',translated:'Create New Customer Account',original:'Create New Customer Account',location:'Page title',scope:'Mage_Customer'}]">
TITLE
</span> 
```

在`body`html代码下。

我发现所有这些都会有那些无用的代码，如果它是由`echo $this->__()`. 如何删除无用的代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T10:22:55.830

看起来 Magento`inline translations`已启用。您可以在管理员下禁用它`System > Configuration > Developer > Translate Inline > Enabled for frontend`

# git - git中的标签与分支

> ID：11807501
> 
> 赞同：9
> 
> 时间：2012-08-04T09:32:46.277
> 
> 标签：git, deployment, tags, branch, capistrano

我们有一个在生产和登台服务器上运行的大型 Rails 项目。每次我们部署到登台或生产时创建标签是个好主意吗（这会在 capistrano 中自动发生）。还是更好地创建名为“devlopment”和“staging”的分支（master 将包含生产状态）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-04T10:47:31.523

git 中的标签非常长寿：当您从远程存储库中获取时，它们会自动传播，如果您想清理它们，您必须在每个副本中手动执行此操作。因此，我宁愿使用分支（可能还有它们的 reflogs）来标记自动部署，否则我可能很快就会陷入大量标签中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T20:42:32.850

我们标记我们的每个部署（在我们的部署脚本中自动）以便在需要时快速恢复，但它们也可以作为部署历史派上用场。例如：

```
deployment_stag_20120804
deployment_stag_20120823
deployment_prod_20120715
deployment_prod_20120724 
```

如果你想避免大量的标签，你可以让你的脚本只保留最后 N 次部署的标签。

例如，如果您的部署方法是合并到生产分支中，那么分支会更有意义，此时 git 挂钩可能会触发对产品服务器的拉取。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T21:03:06.407

您可以使用分支进行开发、登台和生产，同时使用标签来识别生产版本。我喜欢[`git flow`](http://nvie.com/posts/a-successful-git-branching-model/)处理这些分支的方式，使您能够使用更多分支来开发新功能。作为开发人员，您永远不必将代码提交到 master 分支，并且合并到 master 中也很少见。

# php - PHP 同时文件访问

> ID：11807502
> 
> 赞同：2
> 
> 时间：2012-08-04T09:32:50.387
> 
> 标签：php, file-access

好的，好的..所以现在我吓坏了。

index1.php

```
<?
function write_file($filepath,$filecontent) {
    $openedfile = fopen($filepath,"w+"); //replace with $openedfile = fopen($filepath,"a"); just in case
    flock($openedfile, LOCK_EX);
//add here fclose($openedfile); to work
//add here $openedfile = fopen($filepath,"w+"); to work
    fwrite($openedfile,$filecontent);
    flock($openedfile, LOCK_UN);
    fclose($openedfile);
}
function read_file($filepath) {
    $openedfile = fopen($filepath,"r+");
    flock($openedfile, LOCK_SH);
    sleep(10);
    $filecontent = file_get_contents($filepath);
    flock($openedfile, LOCK_UN);
    fclose($openedfile);
    return $filecontent;
}
write_file("Readme.txt","test 1");
$f1 = read_file("Readme.txt");
echo $f1;
?> 
```

index2.php

```
<?
function write_file($filepath,$filecontent) {
    $openedfile = fopen($filepath,"w+"); //replace with $openedfile = fopen($filepath,"a"); to work
    flock($openedfile, LOCK_EX);
//add here fclose($openedfile); to work
//add here $openedfile = fopen($filepath,"w+"); to work
    fwrite($openedfile,$filecontent);
    flock($openedfile, LOCK_UN);
    fclose($openedfile);
}
function read_file($filepath) {
    $openedfile = fopen($filepath,"r+");
    flock($openedfile, LOCK_SH);
    $filecontent = file_get_contents($filepath);
    flock($openedfile, LOCK_UN);
    fclose($openedfile);
    return $filecontent;
}
write_file("Readme.txt","test 2");
$f1 = read_file("Readme.txt");
echo $f1;
?> 
```

我运行 index1.php，然后在 2 秒后运行 index2.php。Index2.php 按预期等待 index1.php，但 index1.php 在 10 秒后没有显示任何内容，而 index2.php 显示“测试 2”。到底是怎么回事？

编辑：我想通了：D。我变了

```
$openedfile = fopen($filepath,"w+"); 
```

至

```
$openedfile = fopen($filepath,"a"); 
```

在第二个 php 中，它不再在 index2.php 执行时擦除 readme.txt。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T09:39:01.387

这与您打开文件写入文件时您的 readme.txt 在很短的时间内实际上是空的这一事实有关吗？我认为PHP取出了整个文本，然后用整个文本+添加替换它。当 index1.php 要读取文件时， index2.php 可能刚刚清除了它？顺便说一下，您可以在 apache 日志中检查这一点。

编辑：此外，在解锁文件后，index2.php 立即控制它，用 TEST 2 覆盖 TEST 1。

# ajax - 谷歌地图 api 3 ajax 调用

> ID：11807507
> 
> 赞同：3
> 
> 时间：2012-08-04T09:33:35.380
> 
> 标签：ajax, codeigniter, google-maps, jquery, google-maps-api-3

我正在使用谷歌地图 API 3 和谷歌地理编码器。问题是它没有正确加载地图我通过 ajax 带来数据并调用一个函数`showAddress(elemId, address)` where elementId 是 div id 将在其中呈现地图。这是谷歌地图的代码

```
var geocoder;
var map;

    // run every mouse over
function init_gmap(elemId) {
    var mapOptions = {
        zoom: 6
    };
    map = new google.maps.Map(document.getElementById(elemId),
        mapOptions)
}

    // find the address
function showAddress(elemId, address) {
        // todo: some caching?
        init_gmap(elemId); // need to call this every time cause we're showing a new map

        if (geocoder) 
        {
            geocoder.geocode( { 'address': address}, function(results, status) {
                if (status == google.maps.GeocoderStatus.OK) 
                {
                    map.setCenter(results[0].geometry.location);
                    var marker = new google.maps.Marker({
                        map: map, 
                        position: results[0].geometry.location
                    });

                    var infowindow = new google.maps.InfoWindow({
                    map: map,
                    position: results[0].geometry.location,
                    content: address
                    });

                    google.maps.event.trigger(map, 'resize')

                } 
                else 
                {

                    alert("Geocode was not successful for the following reason: " + status);
                }
            });
        }
} 
```

有什么建议吗？

谢谢你。

更新代码：

```
<script type="text/javascript">
//<![CDATA[

var geocoder;
var map;
var lat;
var lng;
var marker;

    // run every mouse over
function init_gmap(elemId,address) {
    geocoder = new google.maps.Geocoder();
    geocoder.geocode( { 'address': address}, function(results, status){
//        console.log(results[0].geometry.location.YA);
        lat = results[0].geometry.location.Ya;
        lng = results[0].geometry.location.Za;
            var mapOptions = {
                zoom: 15,
                center:  new google.maps.LatLng(lat, lng),
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            map = new google.maps.Map(document.getElementById(elemId),
                mapOptions)
    });

}

    // find the address
function showAddress(elemId, address) {
        // todo: some caching?
        init_gmap(elemId,address); // need to call this every time cause we're showing a new map
        marker = "marker_"+elemId;
        marker = new google.maps.Marker({
            map: map, 
            position:  new google.maps.LatLng(lat, lng)
        });

        var infowindow = new google.maps.InfoWindow({
        map: map,
        position:  new google.maps.LatLng(lat, lng),
        content: address
        });

}
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T09:57:10.303

为了初始化地图，您需要将 center 和 mapTypeId 添加到 mapOptions（所有这些都是必需的，如[**文档**](https://developers.google.com/maps/documentation/javascript/reference#MapOptions)中所述）。例如：

```
 var mapOptions = {
        center:  new google.maps.LatLng(40.178873, -96.767578),
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        zoom: 6
} 
```

# ios - 如何在两个对象之间连续移动精灵

> ID：11807509
> 
> 赞同：0
> 
> 时间：2012-08-04T09:33:50.293
> 
> 标签：ios, cocos2d-iphone, boolean, box2d-iphone

我有 3 个精灵 A、B 和 C。

A和C是对象...

B 是敌人的精灵......所以设计如下。我需要 B 在 A 和 C 之间不断移动。

**A** ---------- **B** ---------- **C**

我在 Update 方法中使用以下方法。这样每个帧都会调用这些方法。

```
ABcollision
{
if(Aistouched == YES)
{
Bvelocity.x = 5;  /// moves my sprite B right side
}
}

CBcollision
{
if(Cistouched == YES)
{
Bvelocity.x = -5; /// moves my sprite B right side
}
} 
```

我更新速度的更新方法：

```
 b2Vec2 dins = dinobody->GetLinearVelocity();
   dinobody->SetLinearVelocity(Bvelocity); 
```

上面的代码使我的精灵 B 只左右移动一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T12:51:06.253

我相信它只工作一次的问题是因为你从来没有根据我的判断重置你的 BOOL。`Aistouched`和`Cistouched`。尝试`Aistouched = FALSE`在设置之后立即添加`Bvelocity.x = 5;`C 和相同。

# c++ - 非 Qt 基类

> ID：11807510
> 
> 赞同：47
> 
> 时间：2012-08-04T09:34:01.107
> 
> 标签：c++, oop, qt

我在 Visual Studio 中使用 Qt（我是新手）4.8.2，并且我创建了一个名为“Contact”的基类。**我不希望这个类是 Qt-exclusive**，所以我的意图是创建另一个类“QContact”，它将继承“Contact”和 QObject 并处理所有与 Qt 相关的业务，例如 Q_OBJECT 宏等。

不幸的是，当我继承时，构建失败了，说：

```
moc_QContact.cpp(53): error C2039: 'staticMetaObject' : is not a member of 'Contact'
moc_QContact.cpp(75): error C2039: 'qt_metacast' : is not a member of 'Contact'
moc_QContact.cpp(80): error C2039: 'qt_metacall' : is not a member of 'Contact' 
```

我在网上做了一些研究，发现你不能从非 Qt 类派生 Qt 类。所以要修复它，“Contact”可以继承“QObject”（我试过了，它有效）。但这样做会使其专属于 Qt，这是我的问题。

所以我要问的是：如何为 Qt 类创建非 Qt 基类？

谢谢你。

* * *

## 回答 #1

> 赞同：100
> 
> 时间：2012-08-04T09:37:29.653

您可以`QObject`从其他非派生类派生您的类，但[`QObject`必须是](http://qt-project.org/doc/qt-4.8/moc.html#multiple-inheritance-requires-qobject-to-be-first)基类列表中的第一个基类。

所以这是错误的：

```
class QContact: public Contact, public QObject {}; 
```

你需要把它写成

```
class QContact: public QObject, public Contact {}; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2018-01-15T23:30:59.210

从[An Introduction To Design Patterns in C++](https://rads.stackoverflow.com/amzn/click/com/0132826453) with Qt Chapter 8.4:

为了帮助确保 moc 处理项目中的每个 QObject 派生类，以下是一些编写指南：C++ 代码和 qmake 项目文件：

• 每个类定义都应该放在自己的.h 文件中。

• 它的实现应该放在相应的.cpp 文件中。

• 头文件应该被“包装”（例如，使用#ifndef）以避免多重包含。• 每个.cpp 文件都应列在项目文件的SOURCES 变量中；否则它不会被编译。

• 每个头文件都应列在 .pro 文件的 HEADERS 变量中。没有这个， moc 将不会预处理文件。

• Q_OBJECT 宏必须出现在每个QObject 派生头文件的类定义中，以便moc 知道为它生成代码。

# c# - 无法在添加 ASP.NET 文件夹中按 App_Data

> ID：11807511
> 
> 赞同：0
> 
> 时间：2012-08-04T09:34:13.187
> 
> 标签：c#, asp.net-mvc

我正在使用 VS 中的 MVC 项目。

我注意到关于这个问题的旧话题，但没有得到任何好的答案。我该怎么办？有些人正在讨论创建一个新文件夹 App_Code 但有些人说我绝对不应该这样做？（而且我还没有弄清楚如何做到这一点......）

帮助将不胜感激。

# eclipse - Eclipse FTP 与本地文件同步 - 最简单的方法是什么？

> ID：11807515
> 
> 赞同：0
> 
> 时间：2012-08-04T09:34:37.440
> 
> 标签：eclipse, ftp, sync, local-files

我在设置 Eclipse 以处理我的 FTP 服务器上的文件时遇到了麻烦。例如，RSE 插件不适用于 Java 7（有一个关于它的错误报告），所以我不得不切换回 Java6，但 Eclipse 仍然经常崩溃，因为我一直按 ctrl+s（保存）。它有点冻结上传文件。这是非常非常不方便的。

我现在想要的是一种将所有数据本地存储在我的机器上并与 FTP 服务器同步的解决方案。我看到了像 Aptana 这样的插件，但显然也有很多关于它的警告。我想要一种简单的方法来定义 FTP 服务器和应该存储项目的本地路径，仅此而已。遗憾的是，我找不到任何如此简单的教程。

**基本上我需要一个 eclipse 插件来替换像[WebDrive](http://www.southrivertech.com/products/webdrive/index.html)这样的程序。**

很感谢任何形式的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T03:30:55.290

我不确定，可以尝试作为替代[http://www.eclipse.org/subversive/](http://www.eclipse.org/subversive/)

# jquery - jQuery向上滚动

> ID：11807516
> 
> 赞同：0
> 
> 时间：2012-08-04T09:34:41.307
> 
> 标签：jquery, hover, jquery-hover, mousehover, onhover

我正在编辑我的 Jquery Scroll Up 脚本，它运行良好，但是当我尝试在悬停时更改图像时发现了错误，这是我的博客

和我的滚动脚本的这个有问题的部分

```
 controlHTML: '<img src="http://2.bp.blogspot.com/-onAd5CVV5QM/UBzbWeBr88I/AAAAAAAAACI/TPBsgVOiEzg/s1600/arrowhover.png" style="width: 55px; height: 54px; " />', 
```

我想改变这个形象

**http://2.bp.blogspot.com/-onAd5CVV5QM/UBzbWeBr88I/AAAAAAAAACI/TPBsgVOiEzg/s1600/arrowhover.png**

有了这张图片

**http://2.bp.blogspot.com/-onAd5CVV5QM/UBzbWeBr88I/AAAAAAAAACI/TPBsgVOiEzg/s1600/arrow.png**

仅在悬停时，

**注意：** 好吧，我知道如何在 HTML 和 Jquery 中更改鼠标悬停时的图像，但在这种情况下这不起作用，我认为由于在 Script 标签中控制 HTML，你知道如何修复它？？？或者如果你有任何其他更好的脚本可以在 Jquery 中向上滚动？如果你有请给我... :)

我正在使用此脚本在悬停时更改图像，它可以工作但在这里不起作用！

```
<img src="http://3.bp.blogspot.com/-Ab63W-gTgs8/UBzbU0TauoI/AAAAAAAAACA/TCVHz200nU4/s1600/arrowhover.png" onmouseover="this.src='http://2.bp.blogspot.com/-onAd5CVV5QM/UBzbWeBr88I/AAAAAAAAACI/TPBsgVOiEzg/s1600/arrow.png'" onmouseout="this.src='http://3.bp.blogspot.com/-Ab63W-gTgs8/UBzbU0TauoI/AAAAAAAAACA/TCVHz200nU4/s1600/arrowhover.png'" style="width: 55px; height: 54px; " /> 
```

这是我的整个 Scroll Up 脚本，如果你想查看它..

```
<script type="text/javascript" >
var scrolltotop={ 
    //startline: Integer. Number of pixels from top of doc scrollbar is scrolled before showing control 
    //scrollto: Keyword (Integer, or "Scroll_to_Element_ID"). How far to scroll document up when control is clicked on (0=top). 
    setting: {startline:100, scrollto: 0, scrollduration:1000, fadeduration:[500, 100]},
    controlHTML: '<img src="http://2.bp.blogspot.com/-onAd5CVV5QM/UBzbWeBr88I/AAAAAAAAACI/TPBsgVOiEzg/s1600/arrowhover.png" style="width: 55px; height: 54px; " />', //HTML for control, which is auto wrapped in DIV w/ ID="topcontrol" 
    controlattrs: {offsetx:50, offsety:50}, //offset of control relative to right/ bottom of window corner 
    anchorkeyword: '#top', //Enter href value of HTML anchors on the page that should also act as "Scroll Up" links
    state: {isvisible:false, shouldvisible:false},
    scrollup:function(){ 
        if (!this.cssfixedsupport) //if control is positioned using JavaScript 
            this.$control.css({opacity:0}) //hide control immediately after clicking it 
        var dest=isNaN(this.setting.scrollto)? this.setting.scrollto : parseInt(this.setting.scrollto) 
        if (typeof dest=="string" && jQuery('#'+dest).length==1) //check element set by string exists 
            dest=jQuery('#'+dest).offset().top 
        else 
            dest=0 
        this.$body.animate({scrollTop: dest}, this.setting.scrollduration); 
    },
    keepfixed:function(){ 
        var $window=jQuery(window) 
        var controlx=$window.scrollLeft() + $window.width() - this.$control.width() - this.controlattrs.offsetx 
        var controly=$window.scrollTop() + $window.height() - this.$control.height() - this.controlattrs.offsety 
        this.$control.css({left:controlx+'px', top:controly+'px'}) 
    },
    togglecontrol:function(){ 
        var scrolltop=jQuery(window).scrollTop() 
        if (!this.cssfixedsupport) 
            this.keepfixed() 
        this.state.shouldvisible=(scrolltop>=this.setting.startline)? true : false 
        if (this.state.shouldvisible && !this.state.isvisible){ 
            this.$control.stop().animate({opacity:1}, this.setting.fadeduration[0]) 
            this.state.isvisible=true 
        } 
        else if (this.state.shouldvisible==false && this.state.isvisible){ 
            this.$control.stop().animate({opacity:0}, this.setting.fadeduration[1]) 
            this.state.isvisible=false 
        } 
    }, 

    init:function(){ 
        jQuery(document).ready(function($){ 
            var mainobj=scrolltotop 
            var iebrws=document.all 
            mainobj.cssfixedsupport=!iebrws || iebrws && document.compatMode=="CSS1Compat" && window.XMLHttpRequest //not IE or IE7+ browsers in standards mode 
            mainobj.$body=(window.opera)? (document.compatMode=="CSS1Compat"? $('html') : $('body')) : $('html,body') 
            mainobj.$control=$('<div id="topcontrol">'+mainobj.controlHTML+'</div>') 
                .css({position:mainobj.cssfixedsupport? 'fixed' : 'absolute', bottom:mainobj.controlattrs.offsety, right:mainobj.controlattrs.offsetx, opacity:0, cursor:'pointer'}) 
                .attr({title:'Scroll Back to Top'}) 
                .click(function(){mainobj.scrollup(); return false}) 
                .appendTo('body') 
            if (document.all && !window.XMLHttpRequest && mainobj.$control.text()!='') //loose check for IE6 and below, plus whether control contains any text 
                mainobj.$control.css({width:mainobj.$control.width()}) //IE6- seems to require an explicit width on a DIV containing text 
            mainobj.togglecontrol() 
            $('a[href="' + mainobj.anchorkeyword +'"]').click(function(){ 
                mainobj.scrollup() 
                return false 
            }) 
            $(window).bind('scroll resize', function(e){ 
                mainobj.togglecontrol() 
            }) 
        }) 
    } 
}
scrolltotop.init()
</script> 
```

# asp.net-mvc - 如何覆盖部分类中的属性？

> ID：11807517
> 
> 赞同：0
> 
> 时间：2012-08-04T09:34:47.407
> 
> 标签：asp.net-mvc, model-view-controller, entity-framework-4, entity

我正在开发一个 MVC 应用程序，我在开发它时使用了 EF 4.0。我已经从模型中创建了类。现在，我想为 MVC 制作的每个类添加更多类。

前任。在下面的代码中，我得到了类位置。**现在，我想再创建一个类（部分类）如何覆盖部分类中的属性？**

怎么做 ？

```
namespace Entities
{
   public partial class Location
   {               
       public int Id { get; set; }

       public string Name { get; set; }
       public string Remark { get; set; }      
       public string State { get; set; }       
       public string Region { get; set; }
       public string PinCode { get; set; }

       public virtual ICollection<Comment> Comments { get; set; }
   }    
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-04T10:04:49.820

您可以在具有接口的部分类中进行属性装饰

如果您生成了以下类（通过任何自定义工具）

```
public partial class Location
{
    public int Id { get; set; }
    public string Name { get; set; }
    public string Remark { get; set; }
    public string State { get; set; }
    public string Region { get; set; }
    public string PinCode { get; set; }
    public virtual ICollection<Comment> Comments { get; set; }
} 
```

您可以通过创建一个新接口和一个新的分部类，如下所示为生成的类中的属性添加注释（无需修改生成的文件）

```
 public interface ILocation
    {
        [StringLength(50, ErrorMessage = "Region can accept maximum 50 characters.")]
        string Region { get; set; }
    }

    public partial class Location :ILocation
    {
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T10:21:59.640

如果您只需要验证，则可以使用所谓的元数据类型。

详细教程在[这里](http://msdn.microsoft.com/en-us/library/ee256141.aspx)。

# c++ - 实现拉链功能

> ID：11807523
> 
> 赞同：4
> 
> 时间：2012-08-04T09:36:18.533
> 
> 标签：c++, variadic-templates

这是我的代码（我什至不确定它是否正确）：

```
template<typename... list> struct typeList;

template<typename, typename> struct zipper;
template<typename...L, typename...R> struct zipper<typeList<L...>, typeList<R...>>
{
    typedef std::tuple<std::pair<L,R>...> tuplez;
    static_assert(sizeof...(L)==sizeof...(R), "Mismatch number of Args...");

    static void print()
    {
    std::cout<<"The types are: "<<std::endl;
    for(int i=0; i<std::tuple_size<tuplez>::value ; ++i)
    std::cout<< "first : "<< typeid(typename std::tuple_element<i, tuplez>::type::first_type).name()<<
        "second : "<<typeid(typename std::tuple_element<i, tuplez>::type::second_type).name() <<std::endl;
    }
}; 
```

首先，我很惊讶我的 zipper 实现怎么这么小（我肯定是有什么问题）。如果我的实现是错误的，请让我知道为什么它是错误的，而不是给我解决方案。

此外，如果我运行此代码（`zipper<typeList<int,double>, typeList<char,int>>::print();`），我会得到大量错误：（ `the value of 'i' is not usable in a constant expression`来自我的 gcc 4.7.1）

这是完整的错误列表（来自 ideone）和完整的代码：http: [//ideone.com/67nxM](http://ideone.com/67nxM)

PS：请编辑合适的问题标题，我想不出更合理的问题。

### 编辑：感谢@KerrekSB 和@Ugo 的建议，这里是解决方案：

```
template<typename... list> struct typeList;

template<int n, typename T> struct printer
{
    static void print (){
        std::cout<< "first : "<< typeid(typename std::tuple_element<n, T>::type::first_type).name()<<
        "second : "<<typeid(typename std::tuple_element<n, T>::type::second_type).name() <<std::endl;
        printer<n-1,T>::print();
    }
};

template<typename, typename> struct zipper;
template<typename...L, typename...R> struct zipper<typeList<L...>, typeList<R...>>
{
    typedef std::tuple<std::pair<L,R>...> tuplez;

    static void print(){
    printer<std::tuple_size<tuplez>::value-1, tuplez>::print();
    }
};

template<typename T> struct printer<0,T>
{
    static void print (){
        std::cout<< "first : "<< typeid(typename std::tuple_element<0, T>::type::first_type).name()<<
        "second : "<<typeid(typename std::tuple_element<0, T>::type::second_type).name() <<std::endl;
    }
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T09:39:25.400

模板非类型参数必须是常量表达式。
`i`这是一个运行时变量，您不能将其用作模板参数。

# php - 在 localhost、Wordpress 和自定义字段上重写 img src url

> ID：11807524
> 
> 赞同：2
> 
> 时间：2012-08-04T09:36:42.503
> 
> 标签：php, html, wordpress, url, image

我正在尝试通过自定义字段加载图像，而不是使用特色图像。

我的自定义字段如下

```
name:  image-small
value: /images/thumbs/small/example.jpg 
```

PHP

```
<img src='<?php echo get_post_meta($post->ID, 'image-small', true); ?>'> 
```

然而，而不是将 img src 写为

```
http://localhost/project.co.uk/images/thumbs/small/example.jpg 
```

它显示

```
http://localhost/images/thumbs/small/example.jpg 
```

有没有办法编写 htaccess 以便它重新路由 url，或者我是否必须将其硬编码到 HTML 中，直到我上线，然后用上面的代码替换代码？还是有更简单的方法来做到这一点？

我已经找到

*   [wordpress（3.3.1）自定义字段中图像文件的相对路径？](https://stackoverflow.com/questions/9601637/relative-paths-to-image-file-in-wordpress-3-3-1-custom-fields)

但它并没有帮助我解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T03:02:35.050

您的问题是该字段中的 URL 以“/”开头，这意味着“回到域的根目录”。由于就您的浏览器而言，域是“localhost”，因此您将获得“http://localhost/images/...”分辨率。

请注意，执行此解释的是您的浏览器，而不是 PHP 代码。

您需要做的是在 src="" 属性的开头回显您要放在 URL 上的基数，以便从“http://”开始输出完整的 URL。查看您的示例，这可能是[home_url()](http://codex.wordpress.org/Function_Reference/home_url)或[site_url()](http://codex.wordpress.org/Function_Reference/site_url)

也就是说，您的代码将变为：`<img src='<?php echo home_url() . get_post_meta($post->ID, 'image-small', true); ?>'>`

# osx-mountain-lion - Moutain Lion 上的 ParseKit 编译错误

> ID：11807531
> 
> 赞同：0
> 
> 时间：2012-08-04T09:38:25.103
> 
> 标签：osx-mountain-lion, parsekit

我下载了 ParseKit rev 90？从网站。试图编译Demo App。首先，我收到错误消息说“没有可用的基本 SDK”。在我看来，Mountain Lion 上可能没有 SDK10.5。我更改了 Base SDK 10.7（这是我能找到的最古老的版本）然后，我遇到了很多错误。它们看起来都像

在 PKCharacterAssembly.m 中

```
- (NSString *)description {
............
 [s appendFormat:@"%C", [obj integerValue]]; 
```

**格式化指定类型“无符号短”，但参数的类型为“NSInteger”（又名“长”）**

根据 Xcode 的建议，我更改了 %C->%ld 等等。最后，我可以启动演示应用程序。问题是它会永远解析语法。有没有办法避免这些错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:14:45.427

[ParseKit](http://parsekit.com)的开发者在这里。

我已经更新了项目以在 ML 下干净地构建。使用 Google 代码中的主干头：

[http://code.google.com/p/parsekit/](http://code.google.com/p/parsekit/)

# android - 如何知道哪个应用程序在后台运行

> ID：11807532
> 
> 赞同：0
> 
> 时间：2012-08-04T09:38:45.787
> 
> 标签：android

感谢之前的回复，

是否有可能知道哪些是在后台进程中运行的应用程序。我的查询是获取在后台运行的应用程序列表。我搜索了一段时间，但仍然没有得到任何适当的解决方案。请指导我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T10:11:49.210

您可以获得使用此类代码运行的服务列表：

```
private boolean isMyServiceRunning(Context context)
{
    ActivityManager manager = (ActivityManager) context.getSystemService(Service.ACTIVITY_SERVICE);
    for (RunningServiceInfo service : manager.getRunningServices(Integer.MAX_VALUE))
    {           
        if (service.service.getClassName().equals("myPackage.MySuperApplication"))
        {               
            return true;
        }
    }
    return false;
} 
```

有一大堆服务。您可以检查的类型，如果要查找特定的类型，请使用其完全限定名称。

# javascript - 防止间隔在多次点击时排队

> ID：11807534
> 
> 赞同：0
> 
> 时间：2012-08-04T09:39:04.890
> 
> 标签：javascript, jquery

我已经使用 setInterval 函数创建了简单的脚本，它在**第一次**单击按钮时工作正常，但是如果我单击按钮几次，我的时间间隔就会**排队**！我曾尝试使用Jquery 的**一个**函数来解决这个问题，但后来我无法再次设置我的 Intereval。
有没有办法防止这种情况？谢谢！！
[小提琴示例](http://jsfiddle.net/K7pEG/)
我的代码：

```
 var changeClass=function(){

   if($('ul li.active').length==0){
   $('ul li:first').addClass('active');
   }
    else if($('.active').next().length==0){
       $('.active').removeClass('active');
       $('ul li:first').addClass('active');
    }
      else{
      $('.active').removeClass('active').next('li').addClass('active')
      }

 } 

$(document).ready(function() {
 var intervalID;
    $(".button").click(function(){
    intervalID=setInterval(changeClass,1000);
    });

      $(".clear").click(function(){
      clearInterval(intervalID);
      });

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T09:56:46.183

那么你到底想做什么？如果您希望在已设置间隔时忽略开始按钮，请编写您的点击处理程序，如下所示：

```
$(".button").click(function() {
    if(!intervalID) {
        intervalID = setInterval(changeClass,1000);
    }
}); 
```

如果您希望开始按钮*重新启动*间隔，那么您可以在每次单击开始按钮时单击清除按钮，如下所示：

```
$(".button").click(function(){
    // Perform a click on the clear button
    $(".clear").click();

    intervalID = setInterval(changeClass,1000);
});

$(".clear").click(function(){
    clearInterval(intervalID);
}); 
```

# jquery - asp.net mvc 4 - 如何在同一视图中制作标题和行记录。提交前添加删除编辑记录

> ID：11807535
> 
> 赞同：1
> 
> 时间：2012-08-04T09:39:05.007
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, asp.net-mvc-4

我是 asp.net mvc 4 的新手。

我有 2 个表格，标题和行表。标题表存储一个问题，行表存储答案。在此调查应用程序中，用户将输入问题，然后输入答案。用户可以添加多个答案，并且在提交之前他可以删除其中的一些。

最好的方法是什么，jquery，javascripts ......

我找不到最好的方法。

我的观点如下...

```
<div id="mysurvey">
    <div id="myquestion">
       -- in this section , there will be an image, and a text area
    </div>
    <div id="answers">
       <div id="answer1">
       -- in this section , there will be an image, and a text area
       </div>
       <div id="answer2">
       -- in this section , there will be an image, and a text area
       </div>
       <div id="answer3">
       -- in this section , there will be an image, and a text area
       </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T09:45:17.720

看看[Knock Out MVC 库](http://knockoutmvc.com/)。[这个例子](http://knockoutmvc.com/ContactsEditor)几乎就是你想要做的。还有很多其他有据可查的在线示例和教程。

# javascript - 基本二维人形火柴人的逆运动学原理

> ID：11807538
> 
> 赞同：3
> 
> 时间：2012-08-04T09:39:30.153
> 
> 标签：javascript, math, animation, game-physics, inverse-kinematics

作为业余爱好，我做一些动画极客，主要是在 Javascript（基于 DOM 和画布）中，以及在 C# 和其他技术方面做过一些事情。然而，其中大部分都是基于精灵、边界框、简单的像素移动等——现在我对使用矢量图形和实现一个由物理力驱动的具有逼真的移动关节的角色感兴趣。我想在画布元素或 SVG 中进行一些操作。

这里有很多与逆运动学有关的问题，但大多数问题都比较低级，并且需要先了解矢量、力和工程术语。我真正欣赏的是一些关于如何使具有髋关节、膝关节、踝关节等的基本火柴人能够半真实地移动的基本原则的一些指示。

我经常使用 Knockout.js，并且一直想知道是否可以通过 Knockout 的计算函数来实现每个关节的定位，例如膝关节的位置是根据髋关节和踝关节的位置以及作用于它们的力来计算的. 但我很难找到一个起点：我一直在我的房子周围慢动作走，就像一个疯子试图隔离人体的哪些部位实际上首先移动，以及每个部位如何对身体的运动做出反应其他。是否有一种通用的方法来说明人形图形在游戏和动画中的运动方式？

请记住，我习惯于使用像素坐标而不是矢量和力，我是否天真地试图孤立地解决这个问题？我会发现我还需要立即了解重心、动量和所有其他知识吗？

任何帮助表示赞赏，包括新手教程的链接！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-05-14T07:21:24.437

将近 3 年过去了，我可以为自己的问题提供各种各样的答案。我发现了 JavaScript 库 Physics.js 和 p2.js，并深入研究了它们的演示和源代码，以尝试学习“物理思维方式”。简而言之，仍然作为物理新手说话 - 您通常不会明确移动对象，而是建模一个简化的物理世界，其中物体具有基本的物理属性，例如质量，它们服从与其他物体的约束，并对作用在它们上的力，例如重力或明确的方向力，例如脚踢球时。这使它们达到速度和角速度。该库根据物体所包含的形状处理物体的质心分辨率（例如，复杂的多边形加上矩形加上圆形可能形成单个物理物体）。发挥作用的各种力和约束将处于各种冲突中，图书馆负责解决在物理世界的给定“时间步长”之后应在何处以及如何定位所有内容的工作。这是通过各种“求解器函数”实现来完成的，这些实现在计算允许所需的精度时执行尽可能多的迭代。

Both of those libraries separate their physics modeling core from the visual rendering aspect, and allow for different rendering implementations. When I started using p2.js I saw that it was using Pixi.js for rendering in its demos so I ended up building my own simple JavaScript framework which built upon that integration: [https://github.com/TomWHall/p2Pixi](https://github.com/TomWHall/p2Pixi) I haven't constructed a walking humanoid as such, but I have created a "circus unicycle" demo with a humanoid figure which for simplicity is constrained to its unicycle: [http://booleanoperations.com/experiments/p2/unicycle/](http://booleanoperations.com/experiments/p2/unicycle/) When the rider is moved left and right (arrow keys or mouse click on either side of the canvas) negative or positive speed is applied to a motorized revolute constraint between the wheel and the shaft, and correctional forces are also applied to various parts of the unicycle and the rider to simulate some form of balancing. Rotational constraints are in place to fix the rider's feet to the pedals of the unicycle and his leg segments together, with rotational limits for the joints. Gravity keeps pulling the wheel down onto the ground, and the movement of the wheel causes the attached leg segments to move with it. This is obviously the reverse of how a unicycle and its rider work together - in reality, the leg segments move as a result of piston-like action of the tendons upon bones, and that leads ultimately to the rotation of the wheel. But that was an unnecessarily complex model of my circus world :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-05-05T20:36:52.400

如果您正在做一种更实用的游戏，通常您不会使用动态引擎编写角色平衡中心之类的代码。这将是极其困难的，特别是如果您要结合柔软的身体和肌肉动力学，并且可能会将机器的大部分资源用于平衡两足动物，例如

相反，游戏通常主要采用硬编码类型的角色动画，当角色行走、奔跑、跳跃等时，艺术家为骨架提供图形和动画帧。角色的平衡感和运动感是由一个精心制作的艺术家的触觉，而不是大量物理计算的结果。

骨架基本上是一个简单的变形器。它像磁铁一样工作，通过软变形影响周围的顶点/像素。确定骨骼对其周围角色的影响区域的过程称为蒙皮。没有什么非常现实的：它看起来很现实，而不是表现得现实。它类似于 3D 网格：一个空心表面。它不是在原子和分子水平上建模事物：它看起来很逼真，而不是现实。

前向运动学然后旋转这些骨骼，使部分角色跟随。反向运动学是一种以 IK 链上具有 IK 目标/效应器的方式操纵这些骨骼的方法。通常你把角色摆成一个僵硬的人体模型——如果你想让一个人体模型伸手去拿东西，你必须分别旋转他的肩膀、肘部和手腕。IK 让您可以将整个手臂变成一条链，只需指定手腕的位置，让解算器自动旋转肘部和肩部。这使您可以摆出更像人类的姿势，我可以抓住某人的手腕并拉扯它，然后他们的手臂的其余部分也随之而来。

以艺术家驱动的传统方法作为坚实的基础，当一个角色抓住一根动态绳索时，它的运动不是固定的，例如，需要紧紧抓住。那是艺术家动画停止并开始计算角色动作的时候。

在这种情况下，您将使用角色抓住绳索的手作为 IK 目标，以使他的整个身体跟随，并在每个关节/骨骼上相应地设置旋转约束，以防止他向后弯曲手臂并折断它或像驱魔人一样旋转他的头 180 度。一个不受约束的 IK 解算器可能会做这些事情，因此旋转约束会阻止解算器做人体无法做的事情，而您的高级游戏逻辑只是专注于使用 IK 移动角色的手（以绳子为父级）求解器使身体跟随。

例如，当角色被霰弹枪击中时会应用类似的情况，并且您需要他使用布娃娃物理学在空中飞行——同样的想法。

尝试让角色完全由反向运动学目标和物理控制的游戏是非常不寻常的。我见过一些愚蠢的尝试，比如一个有趣的游戏，你的角色是个酒鬼，你的全部目标只是试图让他走回家，而不是摔倒而死。

因此，除非您的全部目标和抱负是尝试模拟像人体这样复杂的事物的动态，否则我建议从传统的艺术家驱动方法开始，并谨慎地在角色上使用这些动态。这也是 3D 包的做法，其中大部分角色由艺术家设定关键帧，但有时某些部分可能部分由动态计算，如头发的移动。

也许您可以逐步提高计算的自动化程度，而让艺术家的手动操作越来越少。但是，我不会从尝试将其全部自动化的方法开始，尤其是除非您精通动力学和逆运动学概念。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T15:55:37.333

> 请记住，我习惯于使用像素坐标而不是矢量和力，我是否天真地试图孤立地解决这个问题？我会发现我还需要立即了解重心、动量和所有其他知识吗？

简而言之，是的。我并不是要气馁，但是如果您至少不了解 IK 背后的一些数学知识，那么即使是相应库的 API 也会让您感到困惑。如果你先做一些学习，你会减少挫折感。到那时，您应该对模型的结束位置和模型的渲染开始位置有一定的了解。

# jquery - 使用 JQuery 自动完成？

> ID：11807539
> 
> 赞同：-1
> 
> 时间：2012-08-04T09:39:31.183
> 
> 标签：jquery, jquery-ui

我正在寻找一个支持标签（如 stackoverflow 的）和图片（如 facebook 的搜索）的自动完成 jQuery 插件。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T09:45:03.057

jQuery UI 具有易于使用的[自动完成功能。](http://jqueryui.com/demos/autocomplete/)

您将一组可能的值（来自服务器端或客户端）传递给它，然后自动完成从那里获取它。

[这](http://jqueryui.com/demos/autocomplete/#custom-data)是一个示例，可能有助于向您展示如何使用自定义数据。

**摘自 jQuery UI**

```
 $(function() {
        var availableTags = [
            "ActionScript", "AppleScript",
            "Asp", "BASIC",
            "C", "C++",
            "Clojure", "COBOL",
            "ColdFusion", "Erlang",
            "Fortran", "Groovy",
            "Haskell", "Java",
            "JavaScript", "Lisp",
            "Perl", "PHP",
            "Python", "Ruby",
            "Scala", "Scheme"
        ];
        $( "#tags" ).autocomplete({
            source: availableTags
        });
    }); 
```

和html：

```
<div class="ui-widget">
    <label for="tags">Tags: </label>
    <input id="tags">
</div> 
```

# android - xml文件中视图的“类”属性

> ID：11807540
> 
> 赞同：1
> 
> 时间：2012-08-04T09:39:38.083
> 
> 标签：android

我想知道是否有类似于`class`HTML 中的属性的属性？

我想更改此类中包含的所有视图的一些属性（尺寸和边距）。因此，同时为所有人更改相同的属性，而不是通过使用`findViewById`或其他方法单独浏览每个视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T09:52:14.723

您可以使用与 css 类非常相似的[样式资源文件。](http://developer.android.com/guide/topics/resources/style-resource.html)

# arrays - 转换 ColdFusion 结构 - 分配自定义键

> ID：11807542
> 
> 赞同：1
> 
> 时间：2012-08-04T09:39:52.883
> 
> 标签：arrays, struct, coldfusion, openbd

我是 CFML 语言的新手，我对 ColdFusion 中的结构和数组有疑问。请注意，我使用的是 openBD CFML 服务器。

*我有以下对象（结构）：*

```
{
   "docs":{
      "23_id":{
         "content":[
            "I am"
         ]
      },
      "1_id":{
         "content":[
            "the most"
         ]
      },
      "7_id":{
         "content":[
            "crap coder"
         ]
      },
      "39_id":{
         "content":[
            "in the whole universe!"
         ]
      }
   }
} 
```

***问题：**我可以将上述对象修改为（如果可能，还保留订单）：*

```
{
    "docs": [
        {
            "id": "23_id",
            "lola": "I am"
        },
        {
            "id": "1_id",
            "lola": "the most"
        },
        {
            "id": "7_id",
            "lola": "crap coder"
        },
        {
            "id": "39_id",
            "lola": "in the whole universe!"
        }
    ]
} 
```

请注意，我需要分配自定义键（**id**并分配**“lola”**而不是*“content”*）。为了完成上述任务，是否有任何学习指针？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-01-15T22:57:29.760

很简单，创建一个新数组，循环你的结构，然后像这样追加数组：

```
<cfset str = {
   "docs":{
      "23_id":{
         "content":[
            "I am"
         ]
      },
      "1_id":{
         "content":[
            "the most"
         ]
      },
      "7_id":{
         "content":[
            "crap coder"
         ]
      },
      "39_id":{
         "content":[
            "in the whole universe!"
         ]
      }
   }
}>

<cfset docs = { docs: []}>

<cfloop collection="#str.docs#" item="itm">
    <cfset arrayAppend( docs.docs, {id: itm, lola: str.docs[itm].content[1]} )>
</cfloop>

<cfdump var="#serializeJson(docs)#"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T09:53:59.977

你的意思是你想把结构变成一个数组吗？如果是这样，那么是的，你可以这样做。但是，结构没有固有的顺序，因此您不能保留顺序。您的结果可能以相同的顺序出现，但没有特别的原因。

基本上你想创建一个新的空数组：[]。然后遍历文档中的键（使用 cfloop collection="..."）。对于每个键，将一个结构附加到您的数组，因此您的结果是一个结构数组。然后将其插入原始变量中。没有变量名就不能具体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T17:05:58.360

你绝对可以在上面的代码中做你说你想做的事情。您最终将得到一个名为 doc 的数组，其中每个索引将包含一个带有 in ID 键和一个 LOLA 键的结构。如果这是您想要的，那么您上面的代码将起作用。

我会说您的数据构造看起来可能会受益于其他东西 - 可能是查询对象。但可能 xml 或 json 也是一个不错的选择。它看起来有点折磨:)

# c# - 验证 WCF 和 WebService 方法参数值的最佳方式

> ID：11807546
> 
> 赞同：5
> 
> 时间：2012-08-04T09:40:09.033
> 
> 标签：c#, wcf, web-services, validation, postsharp

我将编写一个验证组件以在不同的项目中使用它。我并不真正熟悉 Enterprise Library [VAB](http://msdn.microsoft.com/en-us/library/dd140088.aspx)、[Fluent](http://fluentvalidation.codeplex.com/)、[CuttingEdge.Conditions](http://conditions.codeplex.com/)等许多其他验证框架，但是我没有时间与所有这些框架一起工作，看看哪个更适合我的目的。

我希望这个组件为我提供 2 个不同的功能：

**首先**，我想要一些验证器，如 EmailValidator、StringLengthValidator、MyCustomValidator 等，我可以在代码中随时使用它们，如下所示：

```
public class EmailValidator : RegexValidator // or StringValidator or whatever!
{
    public EmailValidator() : base("emailRegexHere")
    {
    }
public bool override DoValidate(string value)
    {
        return base.DoValidate(value);
    }
}
...

public void MyMethod(string email)
{
    EmailValidator validator = new EmailValidator();
    if(!validator.Validate(email))
        throw new NotValidatedException("email is invalid.");
    ...
} 
```

**其次**，我需要通过将诸如 DataAnnotations 之类的东西应用于我想要的任何方法参数来验证参数，而无需任何额外的编码。我知道的一种可能的方法是使用[PostSharp](http://www.sharpcrafters.com/)编写 Aspects在方法开始的地方注入代码（OnMethodEntry）。我已经用 Postsharp 完成了 Logging，效果很好。

微软还引入了 IParameterInspector 来[在 WCF 中执行输入验证，](http://msdn.microsoft.com/en-us/library/ff647875.aspx)它提供了两种方法 BeforCall 和 AfterCall，但我认为它只适用于 WCF。

最后，我需要在我的 WCF 或 WebService 中进行验证，如下所示：

```
[System.Web.Script.Services.ScriptService]
public class MyServiceClass : System.Web.Services.WebService
{
    [Aspects.Validate]
    [WebMethod(EnableSession = true)]
    public string SubmitComment([Validation.Required]string content,[Validation.Guid] string userId,[Validation.Required] [Validation.Name]string name, [Validation.Email]string email, string ipAddress)
    {
        ...
    }
} 
```

**注意**：这只是演示我需要的行为的示例代码，非常感谢任何其他建议。将 Validation.* 注释更改为像 ValidateParam(typeof(EmailValidator)) 这样的注释也是一个好主意吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T14:40:36.503

是的，我只想看看 PostSharp。`OnMethodBoundaryAspect`或检查方法的`MethodInterceptionAspect`参数（用于说明如何验证的属性）和参数（您要验证的值）。

由于您以前使用`OnMethodBoundaryAspect`过，请查看[MethodExecutionArgs](http://doc.sharpcrafters.com/postsharp-2.1/##PostSharp-2.1.chm/html/AllMembers_T_PostSharp_Aspects_MethodExecutionArgs.htm)的文档。您可以使用`args.Method`（返回 a `MethodBase`，在 System.Reflection 中）获取方法信息。调用`GetParameters()`它，它返回一个数组`ParameterInfo`。在每个`ParameterInfo`对象上，您可以通过属性获取有关属性的信息`Attributes`。

一旦你知道了属性，你就知道要使用哪些验证方法（或者如果你正在创建自己的属性，验证方法可以在这些属性类本身中）。然后你只需要使用`args.Arguments`来获取参数的值。

这是一些（伪）代码：

```
public interface IValidator
{
    void Validate(object value);
}
public class ValidationEmailAttribute : Attribute, IValidator
{
    public Validate(string emailAddress)
    {
        // throw exception or whatever if invalid
    }
}

public class ValidateParametersAspect : OnMethodBoundaryAspect
{
    public override OnEntry(args)
    {
        foreach(i = 0 to args.Method.GetParameters().Count)
        {
            var parameter = args.Method.GetParameters()[i];
            var argument = args.Argument[i]; // get the corresponding argument value
            foreach(attribute in parameter.Attributes)
            {
                var attributeInstance = Activator.CreateType(attribute.Type);
                var validator = (IValidator)attributeInstance;
                validator.Validate(argument);
            }
        }
     }
}

public class MyClass
{
    [ValidateParametersAspect]
    public void SaveEmail([ValidationEmail] string email)
    {
        // ...
    }
} 
```

这不是真正的代码：你必须自己解决的细节。

我喜欢将验证代码放入属性本身的想法，因为您无需更改方面即可添加其他验证类型。

# android - 使用数据库检查用户名密码时出现空指针异常

> ID：11807547
> 
> 赞同：0
> 
> 时间：2012-08-04T09:40:15.620
> 
> 标签：android, sqlite

我是 android 新手，正在设计一个包含登录活动的应用程序。我尝试了很多，但是在使用 sqlite 数据库检查用户名和密码字段时得到了 java.lang.nullPointerException。这是代码。

```
public int validateLogin(String s1, String p1) throws SQLException {
    // TODO Auto-generated method stub
    try
    {
        int i = 0;
        Cursor c = null;
        c = db.rawQuery("select * from login where user =" + "\""+ s1.trim() + "\""+" and password="+ "\""+ p1.trim() + "\"", null);
        c.moveToFirst();
        i = c.getCount(); 
        c.close(); 
        return i;
    }
    catch(Exception e)
    {
        e.printStackTrace();
    }
    return 0;

} 
```

* * *

```
public class UserPass extends Activity implements OnClickListener {

    EditText name;
    EditText password;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.login);
        EditText name=(EditText)findViewById(R.id.edit1);
        EditText password=(EditText)findViewById(R.id.edit2);
        Button logit=(Button)findViewById(R.id.loginb);
        Button registerit=(Button)findViewById(R.id.registerb);
        TextView textt=(TextView)findViewById(R.id.txt);
        logit.setOnClickListener(this);
        registerit.setOnClickListener(this);

       // final String s2="user";
       // final String p2="pass";

    }

    public void onClick(View v) {
        // TODO Auto-generated method stub

        switch(v.getId()){

        case R.id.loginb:
            //boolean valid=false;
            //try{
            String s1=name.getText().toString();
            String p1=password.getText().toString();
            DBAdapter checkdb=new DBAdapter(UserPass.this);
            checkdb.open();
           // checkdb.check(s1, p1);
            checkdb.validateLogin(s1, p1);
            if(true){
                Toast.makeText(UserPass.this, "logged in",Toast.LENGTH_LONG).show();
            }
            else{
                Toast.makeText(UserPass.this, "",Toast.LENGTH_LONG).show();
            }
            checkdb.close();
            /**}catch(Exception e){
                valid=false;
                String error=e.toString();
                Toast.makeText(UserPass.this, error,Toast.LENGTH_LONG).show();
            }finally{
                if(){
                    Toast.makeText(UserPass.this, "logged in",Toast.LENGTH_LONG).show();
                }
            }
            break;*/
        case R.id.registerb:
             Intent ireg=new Intent(UserPass.this, register.class);
             startActivity(ireg);
            break;
        }

    }
} 
```

这是 m 在 log-cat 中出现的错误

```
08-04 18:30:48.524: W/KeyCharacterMap(481): No keyboard for id 0
08-04 18:30:48.524: W/KeyCharacterMap(481): Using default keymap: /system/usr/keychars/qwerty.kcm.bin
08-04 18:30:57.694: W/dalvikvm(481): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
08-04 18:30:57.714: E/AndroidRuntime(481): FATAL EXCEPTION: main
08-04 18:30:57.714: E/AndroidRuntime(481): java.lang.NullPointerException
08-04 18:30:57.714: E/AndroidRuntime(481):  at com.inovawe.userpass.UserPass.onClick(UserPass.java:49)
08-04 18:30:57.714: E/AndroidRuntime(481):  at android.view.View.performClick(View.java:2408)
08-04 18:30:57.714: E/AndroidRuntime(481):  at android.view.View.onKeyUp(View.java:4121)
08-04 18:30:57.714: E/AndroidRuntime(481):  at android.widget.TextView.onKeyUp(TextView.java:4431)
08-04 18:30:57.714: E/AndroidRuntime(481):  at android.view.KeyEvent.dispatch(KeyEvent.java:1061)
08-04 18:30:57.714: E/AndroidRuntime(481):  at android.view.View.dispatchKeyEvent(View.java:3740)
08-04 18:30:57.714: E/AndroidRuntime(481):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:788)
08-04 18:30:57.714: E/AndroidRuntime(481):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:788)
08-04 18:30:57.714: E/AndroidRuntime(481):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:788)
08-04 18:30:57.714: E/AndroidRuntime(481):  at android.view.ViewGroup.dispatchKeyEvent(ViewGroup.java:788)
08-04 18:30:57.714: E/AndroidRuntime(481):  at com.android.internal.policy.impl.PhoneWindow$DecorView.superDispatchKeyEvent(PhoneWindow.java:1667)
08-04 18:30:57.714: E/AndroidRuntime(481):  at com.android.internal.policy.impl.PhoneWindow.superDispatchKeyEvent(PhoneWindow.java:1102)
08-04 18:30:57.714: E/AndroidRuntime(481):  at android.app.Activity.dispatchKeyEvent(Activity.java:2063)
08-04 18:30:57.714: E/AndroidRuntime(481):  at com.android.internal.policy.impl.PhoneWindow$DecorView.dispatchKeyEvent(PhoneWindow.java:1643)
08-04 18:30:57.714: E/AndroidRuntime(481):  at android.view.ViewRoot.deliverKeyEventToViewHierarchy(ViewRoot.java:2471)
08-04 18:30:57.714: E/AndroidRuntime(481):  at android.view.ViewRoot.handleFinishedEvent(ViewRoot.java:2441)
08-04 18:30:57.714: E/AndroidRuntime(481):  at android.view.ViewRoot.handleMessage(ViewRoot.java:1735)
08-04 18:30:57.714: E/AndroidRuntime(481):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-04 18:30:57.714: E/AndroidRuntime(481):  at android.os.Looper.loop(Looper.java:123)
08-04 18:30:57.714: E/AndroidRuntime(481):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-04 18:30:57.714: E/AndroidRuntime(481):  at java.lang.reflect.Method.invokeNative(Native Method)
08-04 18:30:57.714: E/AndroidRuntime(481):  at java.lang.reflect.Method.invoke(Method.java:521)
08-04 18:30:57.714: E/AndroidRuntime(481):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-04 18:30:57.714: E/AndroidRuntime(481):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-04 18:30:57.714: E/AndroidRuntime(481):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T09:49:23.580

我认为您的**光标**仍然为空，因为使用 = 运算符与字符串比较。

尝试以下操作：

```
c = db.rawQuery("select * from login where user LIKE " + "\""+ s1.trim() + "\""+" and password LIKE "+ "\""+ p1.trim() + "\"", null);
                                                ^^^^                                           ^^^^
                                                ^^^^                                           ^^^^ 
```

还要**确认，** * 对 SQLite 有效吗？

# javascript - 无法获取共享点文本框的控件 ID

> ID：11807551
> 
> 赞同：0
> 
> 时间：2012-08-04T09:41:01.550
> 
> 标签：javascript, jquery, asp.net, .net, sharepoint

我正在尝试获取我的网格的控件 ID ...实际上它如下所示：

```
#ctl00_PlaceHolderMain_SPWebPartManager_g_6db898dd_6dee_4b80_913f_b8e92148008e_ctl00_gdvOption 
```

但是当我正在编写一个通用代码时，我不能在代码中硬编码以上值

所以我试图在下面做：

```
var test1 = '<%= gdvOption1.UniqueID %>'; 
```

或者

```
var test2 = '<%= #gdvOption1.ClientID %>'; 
```

他们都没有给出价值。

test1 和 test2 的值正是我所写的 '<%= #gdvOption1.UniqueID %>';

和'<%= gdvOption1.ClientID %>'；..分别 ...

请帮我 ...

提前谢谢了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T07:47:51.357

这对我来说 100% 有效：

```
 var test2 = document.getElementById("<%=gdvOption1.ClientID %>"); 
```

# android - 转到主屏幕而不是以前的活动

> ID：11807554
> 
> 赞同：12
> 
> 时间：2012-08-04T09:42:07.460
> 
> 标签：android, android-activity

我知道这个问题以前被问过很多次，但是任何解决方案都不起作用，我的情况有点不同。

我有一个`Activity`可以从许多不同的活动中调用的。但我希望当用户按下后退按钮时，应用程序应该进入主屏幕，而不是之前的活动。

一种使用方法，`StartActivityFromResult()`但我必须在每个调用活动中使用它。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-04T09:59:10.253

`onBackPressed()`您可以按如下方式覆盖方法。它应该工作。

```
public void onBackPressed() {
    Intent startMain = new Intent(Intent.ACTION_MAIN);
    startMain.addCategory(Intent.CATEGORY_HOME);
    startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    startActivity(startMain);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-15T10:36:31.127

如果您不想在按下后退按钮的位置支持您的活动，则添加到这个问题，然后`finish()`在代码下方。

```
public void onBackPressed() {
     Intent mainActivity = new Intent(Intent.ACTION_MAIN);
     mainActivity.addCategory(Intent.CATEGORY_HOME);
     mainActivity.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
     startActivity(mainActivity);
     finish();
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-04T10:10:42.147

您也可以简单地调用`finish()`活动上的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-04-11T10:01:55.527

只需返回主页活动即可添加此代码

```
@Override
public void onBackPressed()
{

    Intent intent=new Intent(currentactivity.this,Mainactivity.class);
    startActivity(intent);
    finish();

}// on back Pressed first add activity where you stand and add activity where you go 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-04T09:49:38.693

只需将 Intent 直接发送回家即可。这可以通过设置该意图的操作和类别来完成。

有关详细信息，请查看 Intent 上的文档。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-05-04T07:13:34.070

如果您有一个 Activity A 并制作 3 个片段，例如 B、C 和**Home_Fragment** ，这很简单。现在，如果您在片段 B 或 C 中并按下返回按钮，您希望每次都在**Home_Fragment上移动。**
然后你必须重写`onBackPressed()`Activity A 中的方法，并且当你跳转到任何片段时，然后给出一个特定的**TAG 或 name**，你就会在 Activity A 中识别那个片段。

我举的例子你很容易理解：

***从活动 A 转移到片段 C***

```
if (savedInstanceState == null) {
    getSupportFragmentManager().beginTransaction()
                .add(R.id.container, new C_fragment(),"xyz").commit();
} 
```

或者，如果您从片段 B 移动到片段 C，并且在后按时，您想进入片段 D，请执行以下操作：

```
btn.setOnClickListener(new View.OnClickListener() {

    @Override
    public void onClick(View view) {
        getActivity().getSupportFragmentManager().beginTransaction()
                    .add(R.id.container, new C_frament(), "xyz").commit();
        ((ActionBarActivity) getActivity()).getSupportActionBar().setTitle("Fragment C");
    }
}); 
```

现在您只需**覆盖主要活动中的 onBackPressed()**方法，如下所示：

```
@Override
public void onBackPressed() {
    FragmentManager fragmentManager =getSupportFragmentManager();

    if (((C_fragment) getSupportFragmentManager().findFragmentByTag("xyz")) != null 
            && ((C_fragment) getSupportFragmentManager().findFragmentByTag("xyz")).isVisible()) {

        Fragment fragment = new Home_Fragment();
        fragmentManager.beginTransaction()
                .replace(R.id.container, fragment)
                .commit();
        getSupportActionBar().setTitle("Home fragment ");

    } else {
        super.onBackPressed();
    }
} 
```

* * *

## 回答 #7

> 赞同：-3
> 
> 时间：2012-08-04T09:57:06.760

```
 Button btn = (Button) findViewById(R.id.button2);
         btn.setOnClickListener(new OnClickListener() {
                public void onClick(View v) 
                {
          Intent i = new Intent(AccountActivity.this, HomeActivity.class);
                    startActivity(i);
                }
            }); 
```

# php - 是否可以在 Windows XP 中获取由 exec() 启动的进程的 PID？

> ID：11807556
> 
> 赞同：2
> 
> 时间：2012-08-04T09:43:06.353
> 
> 标签：php, windows, exec

我正在使用该`exec()`函数来执行相同的外部程序，并且在某些情况下我想停止其中一个程序。但是下面的命令：

```
taskkill /IM program.exe 
```

会被全部`program.exe`杀死。所以我认为最好的方法是通过它的 PID 杀死程序进程。

所以，我想办法是每次执行程序时获取PID，然后将其杀死。

我在 Windows XP 上使用 PHP 5.3。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T23:47:48.087

Windows 上的 exec 挂起，直到子进程结束。你需要一个孩子的PID，所以我想你想要一个孩子。

试试这个代码，它对我有用。它 nohups notepad.exe 并显示其 PID

```
 $command = 'notepad.exe';
$WshShell = new COM("WScript.Shell");
$oExec = $WshShell->exec("notepad.exe");
print_r ( $oExec->ProcessID ) 
```

注意 $WshShell->exec 而不是 $WshShell->run 正如一些谷歌搜索资源所声称的那样。

可以帮助别人

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T09:59:08.057

PID 应作为`$output`数组的第一个元素返回。

```
exec($command, $output);
$pid = (int)$output[0]; 
```

# python - 无法在python中访问不同的文本文件

> ID：11807559
> 
> 赞同：-2
> 
> 时间：2012-08-04T09:43:46.003
> 
> 标签：python, file-io, file-handling

```
def input_files(file):
    s=0
    #word=raw_input('enter the word you want to search\n')
    file=file.readlines()
    for lines in file:
        if word in lines:
            s+=lines.count(word)
    print s
word=raw_input('enter the word you want to search\n')
file =open("2.txt")
file2=open("3.txt")
input_files(file)
input_files(file2) 
```

这是我正在做的代码，现在我得到了我想要的结果，但现在我想让我的代码成熟。我不想一次又一次地调用方法来读取文本文件，例如，如果我有数据集的 39 个文本文件，所以我必须调用函数 39 TIMES 这已经足够了，所以如果有人知道我不必一次又一次调用该方法的方式，它只会自动获取文本文件并显示它们的输出和根据哪个文件有更多单词的结果对它们进行排名。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T09:51:55.317

你可以用一个循环来做到这一点：

导入系统

```
def input_files(fd, word):
    """return the occurences of `word` in a file"""
    s = 0
    for lines in fd:
        if word in lines:
            s += lines.count(word)
    return s

if __name__ == '__main__':
    word = raw_input('Enter the word you want to search: ')
    total = 0

    for filename in sys.argv[1:]:
        try:
            print("Searching for %s in %s..." % (word, filename))
            with open(filename, "r") as fd:
                found = input_files(fd, word)
                total += found
                print("\t... found %i occurence(s)\n" % found)
        except IOError:
            print("\t... cannot open %s !" % filename)

    print("\nTotal: %i occurences" % total) 
```

它将处理作为参数传递给脚本的所有文件...

* * *

### 说明：

`sys.argv`*是包含通过*命令行传递给脚本的参数的变量。

例如，如果您执行命令`python my_script.py foo bar`，`sys.argv`变量 in`my_script.py`将包含`["my_script.py", "foo", "bar"]`.

如您所见， 的第一个元素`sys.argv`是脚本本身的名称，因此我们必须跳过它（`sys.argv[1:]`意思是“*从索引 1 开始的**所有项目”`sys.argv`*，项目 0 被跳过）。

所以在上面的脚本中，所有作为参数传递给脚本的文件都会被处理。当然，如果其中一个文件不存在，它就会失败。

来源

*   [系统.argv](http://docs.python.org/library/sys.html?highlight=sys.argv#sys.argv)
*   [序列类型](http://docs.python.org/library/stdtypes.html#typesseq)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T10:45:49.093

您的代码略有错误，因为它将子单词视为单词的出现。例如 "This is a bad test".count('a') 将给出 2 而不是 1。

正确的分词有点棘手，但这里有一个简单的开始，在标点符号或空格处分词。

```
def input_files(f, word):
    print sum(re.split('[ .,;:"]').count(word) for line in f) 
```

一个不错的选择是使用正则表达式来查找单词的出现（尽管我认为这会使事情变得更加困难）。

此代码对您的版本有一些其他改进：如果您使用文件对象作为迭代器，则无需执行显式操作即可获得行`readlines()`（这避免了将整个文件读入 RAM 并将其表示为列表），并且当您说`if word in line: s += line.count(word)`你实际上比你写东西要慢，`s += line.count(word)`因为它需要对线路进行 2 次扫描，而不仅仅是一次。

我还将您正在扫描的单词传递给函数，因为它使代码更加明显（您甚至可以为此版本编写单元测试）。

要继续...而不是将字数打印出来，您可能想要返回它（因为您想找到字数最多的文件）。然后，您可以计算每个文件中给定单词的出现次数，并对它们进行排序。

这是一个解决方案，它使用命令行参数并且没有任何错误检查。用法：[程序] word file1 file2...

```
import sys

def words_in_file(filename, word):
    with open(filename, 'r') as f:
        return sum(re.split('[ .,;:"]', line).count(word) for line in f)

def files_by_wordcount(filenames, word):
    counts = [(words_in_file(filename, word), filename) for filename in filenames]
    return sorted(counts, reverse=True)

if __name__ == '__main__':
    for count, filename in files_by_wordcount(sys.argv[2:], sys.argv[1]):
        print filename, count 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-16T20:11:14.603

您需要阅读 sys.argv 的文档，`http://docs.python.org/library/sys.html`它可以帮助您理解这个库，并且通过这个库，您可以访问目录中的不同文本文件。`sys.argv[1:]`[1:] 是参数，最好不要从零开始。`http://www.ibiblio.org/g2swap/byteofpython/read/sys-module.html`这更清晰，更好，并且还专注于您的编码

# javascript - 从 Django 获取 javascript 函数中地图坐标的最快方法

> ID：11807565
> 
> 赞同：2
> 
> 时间：2012-08-04T09:44:41.153
> 
> 标签：javascript, python, django

所以...我在需要坐标将标记设置到不同位置的项目中使用了地图。我有很多选项可以获取坐标。

1.  将坐标存储在数据库中并使用 django 视图获取坐标并将其转发到使用 ajax 响应的 javascript 函数。

2.  将其存储到 python 列表或字典中，并在需要时将数据发送到该 javascript 函数。

3.  在 HTML 标记属性中硬编码坐标并通过 javascript 获取它们，然后设置标记。

4.  在 django 视图中使用文件并通过文件 I/O 获取数据并将其转发给 javascript 函数。

我想知道这些技术中的哪一种对大约 50 组坐标有效，如果我的组增加到大约 1000，哪一种会更充分？

如果您有更好的方法来做到这一点...请分享..谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T11:18:41.170

我认为最好的方法是将这些数据存储在数据库中，原因如下：

1.  您将能够对这些数据执行一些查询，例如“给我视口中的所有点”或“给我所有距离其他点 5 公里的点”——即使您现在不需要它也可能是将来非常有用，特别是如果您考虑拥有大约 1000 点
2.  有很好的工具可以在数据库中保存坐标，与 Django 集成得很好——你一定要检查 postgis 和 geodjango
3.  您正在使用 Django，因此您可能在数据库中还有一些其他数据，并且很高兴将所有内容都放在一个地方
4.  除非您希望在地图上显示的某种静态数据不太可能发生变化，否则将其保存在数据库之外的任何地方都是不合适的。

如果由于某种原因您不想使用任何数据库（即使您始终可以使用 sqlite 将此数据存储在文件中），您也可以尝试将其存储在一些 python 对象中，然后将它们发送到 js（所以第二个选项） ，我认为第三个是最糟糕的——你无法在 javascript 之外对这些数据进行任何操作，这将很难读取或调试（例如语法错误）。

Hth

# javascript - slideToggle 将 div 向上移动到内容上方

> ID：11807568
> 
> 赞同：0
> 
> 时间：2012-08-04T09:45:37.457
> 
> 标签：javascript, jquery, css

如上所示[jsfiddle](http://jsfiddle.net/AMhsb/1/)，单击顶部，它会切换`<div>`下面。

我试图做的是：单击“顶部”/黑框时，该 div 和下面的 div 应该出现并覆盖在文本上。

如同`#ppForm` `<div>`推动`#we` `<div>`垂直向上打开一样。

当`#ppForm`它打开时，它应该垂直向上推动 div ......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T10:11:09.980

尝试

```
$('#we').click(function () {
   $("#ppForm").css('position','absolute').slideToggle("slow");
}); 
```

或者你的意思是[这样的](http://jsfiddle.net/KooiInc/JMrRh/)？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T10:39:23.733

修改了这两个元素的样式，现在[它似乎可以根据需要工作](http://jsfiddle.net/AMhsb/4/)：

```
.wrapper {
    position:relative;
}

#ppForm {
    position:absolute;
    bottom:120%; /* instead of top:0; */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T10:04:16.640

我认为你需要这样：

保持你的`<div id="ppForm"></div>`追求`<div id="we">`并尝试

# asp.net-mvc-3 - 从存储在数据库 asp.net mvc 3 中的位置显示图像

> ID：11807569
> 
> 赞同：1
> 
> 时间：2012-08-04T09:45:49.510
> 
> 标签：asp.net-mvc-3, image, razor

我有完整的图像位置存储在`Database`。图像存储在该特定位置。我想在视图中显示图像。这该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T10:03:23.540

由于路径不在站点内，您需要在控制器中执行此操作：

```
public ActionResult Image(int id)
{
    string imagePath = // get the image path by the id

    return File(imagePath, "image/jpg");
} 
```

所以我们有一个控制器，它将从数据库中获取图像路径，并返回文件。现在这将返回文件，但如果你想在视图中显示它，你可以这样做：

```
<img src="@Url.Action("Image", "ImageController", new { id = idOfImageInDB })" alt="Image Description" /> 
```

所以现在发生的是当视图加载时，它调用 Image 动作`ImageController`并传递它`idOfImageInDB`（你想要的图像的数据库键）并显示图像。

请注意，您需要`ImageController`是其中的控制器的名称`Image ActionResult`，并且`idOfImageInDB`是`int`用于查找图像的控制器的名称。

# .net - 列表如何 内部映射？

> ID：11807571
> 
> 赞同：5
> 
> 时间：2012-08-04T09:45:52.623
> 
> 标签：.net, arrays, list, generics, clr

它是在内部被视为数组还是被 CLR 视为完全不同的类型？

我正在尝试将整数值实现到列表中。

```
List<int> lst = new List<int>();
lst.Add(3);
lst.Add(4); 
```

对比

我创建了一个整数数组

```
int[] arr = new int[2];
arr[0] = 3;
arr[1] = 4; 
```

数组返回更好的时间跨度结果。那么为什么人们更喜欢 List<>。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T09:50:00.487

`List<>`是一种数据结构的实现，它负责按需分配内存；它允许在任何索引处插入和删除等。因此它比简单的数组方便得多。

在幕后，当前的`List<>`实现使用数组进行存储，并且执行类似数组的操作时的开销很小。增加的便利通常值得一点（如果有的话）性能差异。添加项目通常更快，因为列表分配内存块并且不需要在每次添加时进行新的分配和复制（与纯数组相比，其中`Length`总是绑定到内存中的大小）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T09:54:02.113

一个普通的随机访问列表通常有一个内部数组。.NET`List<T>`实现就是这样做的。其他实现，例如`LinkedList<T>`使用带有引用而不是数组的元素链。更奇特的列表可能会在内部使用树进行排序。

内部数组 in`List<T>`初始化为较短的长度（我相信为 4），如果您尝试在数组的最大边界之外添加，它会被扩展。由于这可能很耗时（需要复制数组），因此数组的大小会增加一倍，即当您添加第 5 个元素时，内部数组的大小会调整为 8，依此类推。

# ruby-on-rails - 使用贝叶斯平均的奇数结果

> ID：11807572
> 
> 赞同：0
> 
> 时间：2012-08-04T09:46:02.833
> 
> 标签：ruby-on-rails, ruby, math, bayesian

我正在使用以下代码为我的产品评论得出贝叶斯平均值：

```
@bayesian = (((Review.count * Review.average(:score)) + (style.reviews.count +style.reviews.average(:score)))/(Review.count+style.reviews.count)).to_int 
```

根据这个讨论（向下滚动三分之一）：

[http://blog.linkibol.com/2010/05/07/how-to-build-a-popularity-algorithm-you-can-be-proud-of/](http://blog.linkibol.com/2010/05/07/how-to-build-a-popularity-algorithm-you-can-be-proud-of/)

现在奇怪的是，这些是我在页面上看到的结果：

![在此处输入图像描述](../Images/713549f0004f11f73f42898a45373953.png)

显然，按照文章的逻辑，我应该看到一个有 4 票且平均得分为 59% 的产品，其贝叶斯算法比获得 1 票且平均得分为 50% 的产品更高。

我在这里的实现有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T22:46:33.927

对不起大家，最后答案很简单。我应该写：

```
@bayesian = (((Review.count * Review.average(:score)) + (style.reviews.count *style.reviews.average(:score)))/(Review.count+style.reviews.count)).to_int 
```

只需将 + 更改为 * 即可：

```
style.reviews.count * style.reviews.average(:score) 
```

# javascript - D3 - 使用字符串作为轴刻度

> ID：11807574
> 
> 赞同：0
> 
> 时间：2012-08-04T09:46:33.963
> 
> 标签：javascript, d3.js

嗨有以下域`array=["Col 1", "2012", "total"]`，我以这种方式创建比例

```
x = d3.scale.ordinal()
        .domain(array)
        .rangeRoundBands([0,width], .1); 
```

我这样称呼轴：

```
 d3.svg.axis()
        .scale(x); 
```

不幸的是，这会产生不稳定的行为和重绘时的数据交换，如下所示：http: [//jsbin.com/ibewux/9/edit](http://jsbin.com/ibewux/9/edit)

获得稳定行为的唯一方法是为域设置数值，即 array=[0, 1, 2, 3, ...]

如何显示这种格式的刻度 ["Col 1", "2012", "total",..., "any string"] 而不是数字的刻度（即 [0,1,2,...N] ) 并避免重绘时数据图表交换（显然每次都在不同的随机刻度上）？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T20:39:29.543

[轴](https://github.com/mbostock/d3/wiki/SVG-Axes)刻度是域[值的](https://github.com/mbostock/d3/wiki/Ordinal-Scales#wiki-ordinal_domain)[序数刻度](https://github.com/mbostock/d3/wiki/Ordinal-Scales)已经是这种情况。如此处所示：

*   [http://bl.ocks.org/3259783](http://bl.ocks.org/3259783)

在这里将[axis.tickValues](https://github.com/mbostock/d3/wiki/SVG-Axes#wiki-tickValues)设置为比例域是多余的。

# java - 无法从小程序调用 servlet

> ID：11807575
> 
> 赞同：-1
> 
> 时间：2012-08-04T09:46:37.940
> 
> 标签：java, servlets, applet

我创建的小程序在小程序查看器中运行时会将图像文件发送到 servlet。但是当我在浏览器中运行它时，它无法将文件发送到 servlet。

我正在使用 Apache HTTPClient 进行文件上传。我的 servlet 在 servlet 包中的一个测试项目中。那么引用它是否正确`"http://localhost:8080//test//testServlet"`。

为了在网页中使用它，我构建了小程序项目并将 jar 文件粘贴到与我的 jsp 文件相同的位置。我的小程序代码

```
 package testing;

 import java.io.BufferedReader;
 import java.io.File;
 import java.io.IOException;
 import java.io.InputStream;
 import java.io.InputStreamReader;
 import java.io.UnsupportedEncodingException;
 import javax.swing.JFileChooser;
import javax.swing.JOptionPane;
import javax.swing.table.DefaultTableModel;
import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.methods.HttpRequestBase;
import org.apache.http.entity.mime.MultipartEntity;
import org.apache.http.entity.mime.content.FileBody;
import org.apache.http.entity.mime.content.StringBody;
import org.apache.http.impl.client.DefaultHttpClient;

  /**
   *
  * @author Computer
 */

 public class Upload extends javax.swing.JApplet  {

/** Initializes the applet Upload **/

@Override
public void init() {
    try {
        java.awt.EventQueue.invokeAndWait(new Runnable() {
            @Override
            public void run() {
                setSize(300,135);
                initComponents();

            }
        });
    } catch (Exception ex) {
        ex.printStackTrace();
    }
}

/** This method is called from within the init() method to
 * initialize the form.
 * WARNING: Do NOT modify this code. The content of this method is
 * always regenerated by the Form Editor.
 */
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">                          
private void initComponents() {

    chooser = new javax.swing.JFileChooser();
    jPanel1 = new javax.swing.JPanel();
    jScrollPane1 = new javax.swing.JScrollPane();
    table = new javax.swing.JTable();
    Upload = new javax.swing.JButton();

    jPanel1.setBackground(new java.awt.Color(255, 255, 255));

    table.setModel(new javax.swing.table.DefaultTableModel(
        new Object [][] {

        },
        new String [] {
            "Title 1"
        }
    ));
    jScrollPane1.setViewportView(table);

    javax.swing.GroupLayout jPanel1Layout = new javax.swing.GroupLayout(jPanel1);
    jPanel1.setLayout(jPanel1Layout);
    jPanel1Layout.setHorizontalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 300, javax.swing.GroupLayout.PREFERRED_SIZE)
    );
    jPanel1Layout.setVerticalGroup(
        jPanel1Layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addComponent(jScrollPane1, javax.swing.GroupLayout.PREFERRED_SIZE, 90, javax.swing.GroupLayout.PREFERRED_SIZE)
    );

    Upload.setText("Upload");
    Upload.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            UploadActionPerformed(evt);
        }
    });

    javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
    getContentPane().setLayout(layout);
    layout.setHorizontalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addComponent(jPanel1, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE)
        .addGroup(javax.swing.GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
            .addContainerGap()
            .addComponent(Upload))
    );
    layout.setVerticalGroup(
        layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
        .addGroup(layout.createSequentialGroup()
            .addComponent(jPanel1, javax.swing.GroupLayout.PREFERRED_SIZE, javax.swing.GroupLayout.DEFAULT_SIZE, javax.swing.GroupLayout.PREFERRED_SIZE)
            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.UNRELATED)
            .addComponent(Upload)
            .addContainerGap(javax.swing.GroupLayout.DEFAULT_SIZE, Short.MAX_VALUE))
    );
}// </editor-fold>                        

 private static String executeRequest(HttpRequestBase requestBase){
    String responseString = "" ;

    InputStream responseStream = null ;
    HttpClient client = new DefaultHttpClient () ;
    try{
        HttpResponse response = client.execute(requestBase) ;
        if (response != null){
            HttpEntity responseEntity = response.getEntity() ;

            if (responseEntity != null){
                responseStream = responseEntity.getContent() ;
                if (responseStream != null){
                    BufferedReader br = new BufferedReader (new InputStreamReader (responseStream)) ;
                    String responseLine = br.readLine() ;
                    String tempResponseString = "" ;
                    while (responseLine != null){
                        tempResponseString = tempResponseString + responseLine + System.getProperty("line.separator") ;
                        responseLine = br.readLine() ;
                    }
                    br.close() ;
                    if (tempResponseString.length() > 0){
                        responseString = tempResponseString ;
                    }
                }
            }
        }
    } catch (UnsupportedEncodingException e) {
        e.printStackTrace();
    } //catch (ClientProtocolException e) {
      //  e.printStackTrace();
    //}
 catch (IllegalStateException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }finally{
        if (responseStream != null){
            try {
                responseStream.close() ;
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }
    client.getConnectionManager().shutdown() ;

    return responseString ;
}

  public void executeMultiPartRequest(String urlString, File file) {
    HttpClient client = new DefaultHttpClient();
    HttpPost postRequest = new HttpPost (urlString) ;
    try{

        MultipartEntity multiPartEntity = new MultipartEntity () ;

        FileBody fileBody = new FileBody(file, "application/octect-stream") ;
        multiPartEntity.addPart("attachment", fileBody) ;

        postRequest.setEntity(multiPartEntity) ;

        HttpResponse response = client.execute(postRequest);
    }
    catch (Exception ex){
        ex.printStackTrace() ;
    }

    //return executeRequest (postRequest) ;
}

private void UploadActionPerformed(java.awt.event.ActionEvent evt) {                                       

    DefaultTableModel model = (DefaultTableModel) table.getModel();
    int value = chooser.showOpenDialog(this);
    chooser.setFileSelectionMode(JFileChooser.FILES_ONLY);

    if(value == JFileChooser.APPROVE_OPTION)
    {
       System.out.println("Check");
                    File file = chooser.getSelectedFile();
                    String name = file.getName().toLowerCase();
                    if(name.endsWith(".jpg")||name.endsWith(".bmp")||name.endsWith(".png"))
                    {
                        String showpathName = chooser.getSelectedFile().getName();
                        String absolutePathName = file.getAbsolutePath();
                        System.out.println("Absolute path is "+absolutePathName);

                        /***Send For Uploading*****/

                         executeMultiPartRequest("http://localhost:8080//test//testServlet", file) ;
                        // System.out.println("Response : "+response);

                        /***************************/
                        model.addRow(new Object[]{showpathName});

                    }
                    else
                    {
                        JOptionPane.showMessageDialog(this,"Incorrect File Format");
                    }
    }

}                                      

// Variables declaration - do not modify                     
private javax.swing.JButton Upload;
private javax.swing.JFileChooser chooser;
private javax.swing.JPanel jPanel1;
private javax.swing.JScrollPane jScrollPane1;
private javax.swing.JTable table;
// End of variables declaration

 /***************************************************************/
 /************Servlet code***************************************/
package servlet;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileOutputStr
import java.io.IOException;
import java.io.OutputStream;
import java.io.PrintWriter;
import java.util.List;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;
import org.apache.commons.fileupload.FileItem;
import org.apache.commons.fileupload.FileUploadException;
import org.apache.commons.fileupload.disk.DiskFileItemFactory;
import org.apache.commons.fileupload.servlet.ServletFileUpload;
import org.apache.commons.io.FilenameUtils;

 /**
  *
 * @author Computer
 */

 public class testServlet extends HttpServlet {

/** 
 * Processes requests for both HTTP <code>GET</code> and <code>POST</code> methods.
 * @param request servlet request
 * @param response servlet response
 * @throws ServletException if a servlet-specific error occurs
 * @throws IOException if an I/O error occurs
 */
  protected void processRequest(HttpServletRequest request, HttpServletResponse    response)
        throws ServletException, IOException, FileUploadException {
    response.setContentType("text/html;charset=UTF-8");
 //   PrintWriter out = response.getWriter();
    try {
        /* TODO output your page here
        out.println("<html>");
        out.println("<head>");
        out.println("<title>Servlet testServlet</title>");  
        out.println("</head>");
        out.println("<body>");
        out.println("<h1>Servlet testServlet at " + request.getContextPath () + "</h1>");
        out.println("</body>");
        out.println("</html>");
         */
        List<FileItem> items = new ServletFileUpload(new DiskFileItemFactory()).parseRequest(request);
        for (FileItem item : items)
        {
            String filename = FilenameUtils.getName(item.getName());
            System.out.println("Filename "+filename);
           FileInputStream fis = (FileInputStream) item.getInputStream();
           int len = (int) item.getSize();
           System.out.println("inputStream"+fis.available());

           OutputStream out = new FileOutputStream(new        File("C:\\Users\\Computer\\Desktop\\client\\imagenew1.jpg"));

            int read = 0;
            byte[] bytes = new byte[1024];

            while ((read = fis.read(bytes)) != -1) {
    out.write(bytes, 0, read);
}

fis.close();
out.flush();
out.close();

System.out.println("New file created!");

        }
    } finally {            

    }
}

// <editor-fold defaultstate="collapsed" desc="HttpServlet methods. Click on the + sign    on the left to edit the code.">
/** 
 * Handles the HTTP <code>GET</code> method.
 * @param request servlet request
 * @param response servlet response
 * @throws ServletException if a servlet-specific error occurs
 * @throws IOException if an I/O error occurs
 */
@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    try {
        processRequest(request, response);
    } catch (FileUploadException ex) {
        Logger.getLogger(testServlet.class.getName()).log(Level.SEVERE, null, ex);
    }
}

/** 
 * Handles the HTTP <code>POST</code> method.
 * @param request servlet request
 * @param response servlet response
 * @throws ServletException if a servlet-specific error occurs
 * @throws IOException if an I/O error occurs
 */
@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    try {
        processRequest(request, response);
    } catch (FileUploadException ex) {
        Logger.getLogger(testServlet.class.getName()).log(Level.SEVERE, null, ex);
    }
}

/** 
 * Returns a short description of the servlet.
 * @return a String containing servlet description
 */
@Override
public String getServletInfo() {
    return "Short description";
}// </editor-fold> 
```

}

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T10:28:42.850

您的小程序需要指向服务器的真实 IP/DNS 而不是本地主机，因为小程序在客户端运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T09:56:15.080

示例代码是：

```
public Vector PopDat() {
    Vector vf = new Vector();
    try {
        URL studentDBservlet = new URL(
                "http://jahanzeb:8080/servlet/QuerySer?Qname="
                        + ap.getParameter("Per"));
        URLConnection servletConnection = studentDBservlet.openConnection();
        BufferedReader inFromServlet = new BufferedReader(
                new InputStreamReader(servletConnection.getInputStream()));
        String str;
        while (null != ((str = inFromServlet.readLine()))) {
            vf.add(str);
            System.out.println(str);
        }

    } catch (Exception e) {
        System.out.println(e.toString());
    }

    return vf;
} 
```

# asp.net - 在长时间操作期间从 ASP.NET 服务器通知客户端

> ID：11807580
> 
> 赞同：0
> 
> 时间：2012-08-04T09:47:33.023
> 
> 标签：asp.net, ajax, web-services, comet

我正在设计一个系统，要求如下：我必须通过 AJAX 向 asp.net 发送一个大文件（10mb +）。文件将在服务器中排序，这需要时间。我必须准确地通知客户排序的状态。假设我正在从文件中排序 100 组数据。在这种情况下，我必须在每组排序完成后通知客户。我该怎么做？任何与实施链接的建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:43:04.757

如果这是一个专业的解决方案，您应该尝试[PokeIn](http://pokeinc.om)。它单独针对每个客户（这在您的情况下非常重要 - 特别是出于安全原因）

它可以帮助您从客户端访问 .NET 方法并为每个客户端调用它们（安全）..

此外......它允许您从反向 ajax 和[websocket](http://www.pokein.com/Help/WebSocketFeature.aspx)中受益，而无需任何服务器端边界。PokeIn websocket 功能不需要 .NET 4.5 或 Server 8 等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T20:04:53.893

您可以考虑使用 SignalR 在 NuGet 上完成此操作 [http://nuget.org/packages/SignalR](http://nuget.org/packages/SignalR)及其在 git hub 上的项目页面[https://github.com/SignalR/SignalR](https://github.com/SignalR/SignalR)。您应该能够在 google 上找到各种教程。

# c# - 如何在 c# windows 应用程序中安装时保存用户名和密码？

> ID：11807581
> 
> 赞同：1
> 
> 时间：2012-08-04T09:47:50.840
> 
> 标签：c#, installation, settings

我正在开发这个 C# Windows 应用程序（.Net 3.5，VS 2008），我必须为其创建一个 exe 文件，到目前为止没有问题，该应用程序使用 betfair 交换 API，首先需要“登录”才能获得任何其他服务的会话令牌，

所以我的团队负责人希望我以这样的方式部署应用程序——

> 1.  应用程序应在安装时向客户端询问用户名和密码
> 2.  如果用户输入用户名和密码，应用程序每次都直接启动，并使用提供的用户名和密码自动登录到 Web 服务。
> 3.  如果用户在安装时没有输入 USER/Pass，则安装后应用程序每次启动时都必须要求输入用户名密码。

所以我的主要查询是：如何在安装时获取和存储用户名/密码

我试图在 app.config 中编写它，但它以某种方式与我的网络服务设置混淆了：/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T09:56:47.180

我认为你可以用稍微不同的方法来做到这一点：

*   创建一个安装程序来安装你的程序
*   在安装结束时，使用切换凭据 ( `/credentials`)启动您的程序
*   此命令行开关将允许用户输入和保存身份验证凭据

您可以将凭据保存在当前用户的[设置](http://msdn.microsoft.com/en-us/library/0zszyc6e)app.config 文件中......当然，您必须开发链接到`/credentials`选项的所有逻辑（表单，ecc）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T09:57:01.303

只是有几点需要注意。

首先，app.config 文件通常不被视为安全媒体，因此您不应该在其中存储用户名/密码（尤其是在它们未加密的情况下）

在 Windows 应用程序中存储这些详细信息的常见位置是在注册表内（可以授予权限以降低安全风险）。

所有密码都应以加密格式存储。不幸的是，考虑到这需要与外部系统相比，这种加密需要是可逆的。

# c# - 如何在运行时生成的选项卡中添加控件

> ID：11807585
> 
> 赞同：0
> 
> 时间：2012-08-04T09:48:45.770
> 
> 标签：c#, winforms

我正在使用选项卡控件，并在其中插入了一个列表视图。现在我想在运行我的程序时生成选项卡，每个选项卡都应该包含这个列表视图。

我试过这样：

```
public void FillTabControls(TabControl tb, string sSQL, string sTable, string sFirstItem)
{
    long totalRow = 0;
    //Set the Data Adapter
    OleDbDataAdapter da = new OleDbDataAdapter(sSQL, CN);
    DataSet ds = new DataSet();
    da.Fill(ds, sTable);

    totalRow = ds.Tables[sTable].Rows.Count - 1;

    tb.TabPages.Clear();
    if (sFirstItem != "") tb.TabPages.Add(new TabPage(sFirstItem));
    for (int i = 0; i <= totalRow; i++) 
        tb.TabPages.Add(new TabPage("" + ds.Tables[sTable].Rows[i].ItemArray.GetValue(0).ToString()));
    if (tb.TabPages.Count > 0) 
        tb.SelectedIndex = 0;
} 
```

但我没有这样做的想法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T10:06:32.570

```
 private IEnumerable<TabPage> GetTabPages(string sSQL, string sTable, string sFirstItem)
    {
        // generate your tabs here
    }

    private void Init(TabControl tb, string sSQL, string sTable, string sFirstItem)
    {
        tb.SuspendLayout();

        foreach (TabPage tabPage in GetTabPages(sSQL, sTable, sFirstItem))
        {
            tb.Controls.Add(tabPage);
        }

        tb.ResumeLayout();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T10:00:04.857

我认为标签页正在添加。但我看不到您在哪里添加列表视图。我猜是因为你无法在视觉上识别它。

还设置在 for 循环中添加的标签页的大小或停靠

# java - MongoDB 关系

> ID：11807586
> 
> 赞同：2
> 
> 时间：2012-08-04T09:48:51.430
> 
> 标签：java, spring, mongodb

有没有办法通过代码对 Spring 说我在 MongoDB 中有一个表/集合，例如 Person。你怎么说它与另一个表有一对多的关系。这在 MongoDB 中是否可以通过 Spring 实现？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-05T22:54:53.043

It is possible for MongoDB to have 'relationships' with other databases and collections, these are called Manual References and DBRefs. Look in the documentation [for database references](http://docs.mongodb.org/manual/applications/database-references/). You should however be wary using these, as they will almost always perform poorly in comparison to using a single collection. Either your application or the driver is going to need to query twice for the data - once in the original collection and once in the other collection to resolve the reference.

It is a common mistake for those coming from a relational model to try and emulate joins in MongoDB with the use of DBRefs. In the example you give, a one-to-many relationship is likely better modelled in a single collection with embedding, like the following:

```
{
    "_id" : ObjectId(),
    "Name" : "Bob",
    "Cars" : {
        "CarName1" : "FirstCar",
        "CarName2" : "SecondCar"
    }
} 
```

You can check out the docs on [Schema Design](http://www.mongodb.org/display/DOCS/Schema+Design) for more information

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-06T17:15:40.377

MongoDb 不对多个集合之间的关系提供任何支持。它与数据库的sql方法不同。No-sql 支持由模式设计本身维护的逻辑关系。它的基本目标是减少对部分文档的依赖并加快流程。对于演示示例，您可以访问[mongodb-useful-basics](http://www.tinytute.com/mongodb-useful-basics/)

# android - 在 sqlite 中搜索，基于 String 获取描述

> ID：11807587
> 
> 赞同：1
> 
> 时间：2012-08-04T09:48:59.890
> 
> 标签：android, sqlite, search

我想在我的数据库中使用搜索。所以我使用了几个代码来标记它们。我使用 2 行，一个用于名称，另一个用于名称描述。（类似于字典）。现在这是我的[代码](http://www.giantflyingsaucer.com/blog/?p=1342)，这是我的搜索[助手。](https://stackoverflow.com/questions/8763463/how-to-search-in-sqlite-database-by-using-string-variable-not-integer)带有`new`注释的行，我将它们手动添加到代码中。

```
public class SQLiteCountryAssistant extends SQLiteOpenHelper
{
private static final String DB_NAME = "usingsqlite.db";
private static final int DB_VERSION_NUMBER = 1;
private static final String DB_TABLE_NAME = "countries";
private static final String DB_COLUMN_1_NAME = "country_name";
private static final String DB_COLUMN_2_DESCRIPTION = "country_description"; //new

private static final String DB_CREATE_SCRIPT = "create table " + DB_TABLE_NAME +
                        " (_id integer primary key autoincrement, " +
                        "country_name text not null);)";

private SQLiteDatabase sqliteDBInstance = null;

public SQLiteCountryAssistant(Context context)
{
    super(context, DB_NAME, null, DB_VERSION_NUMBER);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
{
    // TODO: Implement onUpgrade
}

@Override
public void onCreate(SQLiteDatabase sqliteDBInstance)
{
    Log.i("onCreate", "Creating the database...");
    sqliteDBInstance.execSQL(DB_CREATE_SCRIPT);
}

public void openDB() throws SQLException
{
    Log.i("openDB", "Checking sqliteDBInstance...");
    if(this.sqliteDBInstance == null)
    {
        Log.i("openDB", "Creating sqliteDBInstance...");
        this.sqliteDBInstance = this.getWritableDatabase();
    }
}

public void closeDB()
{
    if(this.sqliteDBInstance != null)
    {
        if(this.sqliteDBInstance.isOpen())
            this.sqliteDBInstance.close();
    }
}

public long insertCountry(String countryName, String Discription) //new
{
    ContentValues contentValues = new ContentValues();
    contentValues.put(DB_COLUMN_1_NAME, countryName);
    contentValues.put(DB_COLUMN_2_DESCRIPTION, Discription); //new
    Log.i(this.toString() + " - insertCountry", "Inserting: " + countryName);
    Log.i(this.toString() + " - insertDescription", "Inserting: " + Discription); //new
    return this.sqliteDBInstance.insert(DB_TABLE_NAME, null, contentValues);
}

public boolean removeCountry(String countryName)
{
    int result = this.sqliteDBInstance.delete(DB_TABLE_NAME, "country_name='" 
            + countryName + "'", null);

    if(result > 0)
        return true;
    else
        return false;
}

public long updateCountry(String oldCountryName, String newCountryName, String Description)
{ //new
    ContentValues contentValues = new ContentValues();
    contentValues.put(DB_COLUMN_1_NAME, newCountryName);
    contentValues.put(DB_COLUMN_2_DESCRIPTION, Description); //new
    return this.sqliteDBInstance.update(DB_TABLE_NAME, contentValues, "country_name='" 
            + oldCountryName + "'", null);
}

public String[] getAllCountries()
{
    Cursor cursor = this.sqliteDBInstance.query(DB_TABLE_NAME, 
            new String[] {DB_COLUMN_1_NAME}, null, null, null, null, null);

    if(cursor.getCount() >0)
    {
        String[] str = new String[cursor.getCount()];
        int i = 0;

        while (cursor.moveToNext())
        {
             str[i] = cursor.getString(cursor.getColumnIndex(DB_COLUMN_1_NAME));
             i++;
         }
        return str;
    }
    else
    {
        return new String[] {};
    }
}

public String[] getAllDescriptions()
{
    Cursor cursor = this.sqliteDBInstance.query(DB_TABLE_NAME, 
            new String[] {DB_COLUMN_2_DESCRIPTION}, null, null, null, null, null);

    if(cursor.getCount() > 0)
    {
        String[] str = new String[cursor.getCount()];
        int i = 0;

        while (cursor.moveToNext())
        {
             str[i] = cursor.getString(cursor.getColumnIndex(DB_COLUMN_2_DESCRIPTION));
             i++;
         }
        return str;
    }
    else
    {
        return new String[] {};
    }
}

/*** new ***/
public String getDescription(String username) {
    Cursor cursor = this.sqliteDBInstance.query(DB_TABLE_NAME, 
            new String[] {DB_COLUMN_2_DESCRIPTION}, null, null, null, null, null);

    if ((cursor.getCount() == 0) || !cursor.moveToFirst()) {
        return null;
    }

    String DES = new String(); 
    DES = cursor.getString(cursor.getColumnIndex(DB_COLUMN_2_DESCRIPTION));
    return DES;
}  
} 
```

在最后一个函数中`/*** new ***/`，我使用搜索代码。我想我的问题一定出在这里...

```
public class UsingSQLite extends Activity
{
private SQLiteCountryAssistant sqlliteCountryAssistant;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final AutoCompleteTextView textView = (AutoCompleteTextView) 
        findViewById(R.id.autocompleteCountry);

    sqlliteCountryAssistant = new SQLiteCountryAssistant(UsingSQLite.this);
    sqlliteCountryAssistant.openDB();

    // Insert a few countries that begin with "C"
    sqlliteCountryAssistant.insertCountry("Cambodia", "good country");
    sqlliteCountryAssistant.insertCountry("Cameroon", "where is it??");
    sqlliteCountryAssistant.insertCountry("Canada", "i like it :D");
    sqlliteCountryAssistant.insertCountry("Cape Verde", "!!!!!");
    sqlliteCountryAssistant.insertCountry("Cayman Islands", "it must be an island");
    sqlliteCountryAssistant.insertCountry("Chad", "what is that?");
    sqlliteCountryAssistant.insertCountry("Chile", "really, i don't know it!");
    sqlliteCountryAssistant.insertCountry("China", "TOO much big...");

    //sqlliteCountryAssistant.removeCountry("Chad");
    //sqlliteCountryAssistant.updateCountry("Canada", "Costa Rica");

    String[] countries = sqlliteCountryAssistant.getAllCountries();

    // Print out the values to the log
    for(int i = 0; i < countries.length; i++)
    {
        Log.i(this.toString(), countries[i]);
    }

    ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.list_item, 
            countries);

    textView.setAdapter(adapter);
    textView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,
                long rowId) {
            String selection = (String) parent.getItemAtPosition(position);
            TextView tv1 = (TextView) findViewById(R.id.textView1);
            tv1.setText("Description : " + sqlliteCountryAssistant.getDescription(selection));
        }
    });

}

public void onDestroy()
{
    super.onDestroy();
    sqlliteCountryAssistant.close();
}
} 
```

这是我的代码。我输入我的单词，单词出现然后我触摸它。在这个位置上，我必须看到描述。但我得到错误。这是我的原木猫。

```
08-04 14:14:26.713: D/dalvikvm(25317): GC_EXTERNAL_ALLOC freed 56K, 52% free 2741K/5639K,      external 264K/519K, paused 79ms
08-04 14:14:28.715: I/Database(25317): sqlite returned: error code = 1, msg = no such column: country_description
08-04 14:14:28.715: D/AndroidRuntime(25317): Shutting down VM
08-04 14:14:28.715: W/dalvikvm(25317): threadid=1: thread exiting with uncaught exception (group=0x401ec560)
08-04 14:14:28.735: E/AndroidRuntime(25317): FATAL EXCEPTION: main
08-04 14:14:28.735: E/AndroidRuntime(25317): android.database.sqlite.SQLiteException: no such column: country_description: , while compiling: SELECT country_description FROM countries
08-04 14:14:28.735: E/AndroidRuntime(25317):    at android.database.sqlite.SQLiteCompiledSql.native_compile(Native Method)
08-04 14:14:28.735: E/AndroidRuntime(25317):    at android.database.sqlite.SQLiteCompiledSql.compile(SQLiteCompiledSql.java:92)
08-04 14:14:28.735: E/AndroidRuntime(25317):    at android.database.sqlite.SQLiteCompiledSql.<init>(SQLiteCompiledSql.java:65)
08-04 14:14:28.735: E/AndroidRuntime(25317):    at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:83)
08-04 14:14:28.735: E/AndroidRuntime(25317):    at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:49)
08-04 14:14:28.735: E/AndroidRuntime(25317):    at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:42)
08-04 14:14:28.735: E/AndroidRuntime(25317):    at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1356)
08-04 14:14:28.735: E/AndroidRuntime(25317):    at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1235)
08-04 14:14:28.735: E/AndroidRuntime(25317):    at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1189)
08-04 14:14:28.735: E/AndroidRuntime(25317):    at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1271)
08-04 14:14:28.735: E/AndroidRuntime(25317):    at com.usingsqlite.SQLiteCountryAssistant.getDescription(SQLiteCountryAssistant.java:140)
08-04 14:14:28.735: E/AndroidRuntime(25317):    at com.usingsqlite.UsingSQLite$1.onItemClick(UsingSQLite.java:61)
08-04 14:14:28.735: E/AndroidRuntime(25317):    at android.widget.AutoCompleteTextView.performCompletion(AutoCompleteTextView.java:952)
08-04 14:14:28.735: E/AndroidRuntime(25317):    at android.widget.AutoCompleteTextView.access$1400(AutoCompleteTextView.java:92)
08-04 14:14:28.735: E/AndroidRuntime(25317):    at android.widget.AutoCompleteTextView$DropDownItemClickListener.onItemClick(AutoCompleteTextView.java:1489)
08-04 14:14:28.735: E/AndroidRuntime(25317):    at android.widget.AdapterView.performItemClick(AdapterView.java:284)
08-04 14:14:28.735: E/AndroidRuntime(25317):    at android.widget.ListView.performItemClick(ListView.java:3513)
08-04 14:14:28.735: E/AndroidRuntime(25317):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:1849)
08-04 14:14:28.735: E/AndroidRuntime(25317):    at android.os.Handler.handleCallback(Handler.java:587)
08-04 14:14:28.735: E/AndroidRuntime(25317):    at android.os.Handler.dispatchMessage(Handler.java:92)
08-04 14:14:28.735: E/AndroidRuntime(25317):    at android.os.Looper.loop(Looper.java:130)
08-04 14:14:28.735: E/AndroidRuntime(25317):    at android.app.ActivityThread.main(ActivityThread.java:3835)
08-04 14:14:28.735: E/AndroidRuntime(25317):    at java.lang.reflect.Method.invokeNative(Native Method)
08-04 14:14:28.735: E/AndroidRuntime(25317):    at java.lang.reflect.Method.invoke(Method.java:507)
08-04 14:14:28.735: E/AndroidRuntime(25317):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
08-04 14:14:28.735: E/AndroidRuntime(25317):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
08-04 14:14:28.735: E/AndroidRuntime(25317):    at dalvik.system.NativeStart.main(Native Method)
08-04 14:14:30.957: I/Process(25317): Sending signal. PID: 25317 SIG: 9 
```

我希望有一个人可以帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T10:23:18.557

**[1]**首先从你的 AVD 中删除创建的数据库

**或者**如果您已将其安装在真实设备上，则从设备上**卸载它**

因为已经在那里创建的表没有列 DB_COLUMN_2_DESCRIPTION("country_description")

**[2] 更新您的 DB_CREATE_SCRIPT 如下**

```
private static final String DB_CREATE_SCRIPT = "CREATE TABLE " + DB_TABLE_NAME
     + " (_id INTEGER PRIMARY KEY AUTOINCREMENT, "
     + DB_COLUMN_1_NAME + " TEXT, "
     + DB_COLUMN_2_DESCRIPTION + " TEXT);"; 
```

**然后从启动活动**安装并运行整个应用程序

 *** * *

**编辑** 你的bean-class可以是一个java文件国家.java::

```
public Countries {
    String name, desc;

    public Countries(String name, String desc) {
         this.name = name;
         this.desc = desc;
    }
} 
```

当您从数据库表中填充名称和描述的游标读取数据时。

然后从那里填满你的

```
ArrayList<Countries> countriesList = new ArrayList<Countries>(); 
```

使用游标的迭代器。

当你想制作搜索数据时，然后从这个填充的**国家**列表中搜索它。**

# iphone - 检测全局 UIWindow 对象上的触摸事件

> ID：11807588
> 
> 赞同：0
> 
> 时间：2012-08-04T09:49:15.520
> 
> 标签：iphone, objective-c, ios, touch, uiwindow

我`UIWindow`为我的应用程序创建了一个全局对象，例如

```
#define APP_DELEGATE_WINDOW ((UIWindow*)((AppDelegate*)[[UIApplication sharedApplication] delegate])).window 
```

现在`UIViewController`，我正在向`APP_DELEGATE_WINDOW`.

我想要这样的功能，当我触摸添加到 上的透明背景时`APP_DELEGATE_WINDOW`，我想关闭子视图。

如何检测 touch on `APP_DELEGATE_WINDOW`，以便在该 Touch 事件中，我可以关闭视图及其子视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T09:56:00.383

> 现在在一个 UIViewController 中，我正在向 APP_DELEGATE_WINDOW 添加一个具有透明背景的子视图。

您可以将 a 添加`UITapGestureRecognizer`到具有透明背景的子视图中。然后在手势识别器的处理程序中，您将删除视图控制器及其视图。

# jquery - CSS 无处继承透明

> ID：11807592
> 
> 赞同：0
> 
> 时间：2012-08-04T09:49:24.797
> 
> 标签：jquery, css, background-image, transparent

基本上这个CSS规则：

```
background:url('../img/logo-small.png'); 
```

在任何浏览器上，转换为：

```
background: url("../img/logo-small.png") repeat scroll 0% 0% transparent; 
```

我没有任何具有透明规则的容器，但显然这会阻止显示背景。奇怪的是，它`background-color`可以代替。

如果有任何用处，适用于 CSS 类的内容是使用 jQuery 动态创建的。

有没有办法覆盖这个`transparent`参数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T09:53:56.203

在这种情况下`transparent`是指元素的背景颜色，默认是透明的。您可以通过显式设置颜色来覆盖它，例如：

`background:url('../img/logo-small.png') #FFFFFF;`

# node.js - socket.io-client 无法获取授权失败原因

> ID：11807599
> 
> 赞同：4
> 
> 时间：2012-08-04T09:50:28.337
> 
> 标签：node.js, socket.io

*   socket.io@0.9.9
*   socket.io-client@0.9.9
*   快递@3.0.0rc1

**服务器代码：**

```
//run with node-dev server.js
var remoteServer = io.of('/remote');
remoteServer.authorization(function(handshakeData, callback){
  return callback('unknown clientType', false);
} 
```

**服务器日志：**

```
You can visit your app with http://localhost:3000
   info  - handshake authorized l4FzYiWpHo2d8VeoB3Zo
   warn  - handshake error unknown clientType for /remote 
```

**客户端代码：**

```
//run with node-dev client.js
var io = require('socket.io/node_modules/socket.io-client');
var client = io.connect('http://localhost:3000/remote');
client.on('connect_failed', function(reason){
  console.log('connect_failed:', reason);
});

//will call this because it's Namespace authorization
client.on('error', function(reason){
  console.log('error:', reason);
}); 
```

**客户端日志：**

```
//error reason miss.
E:\Workspace\TZ\SmartDoor\client>node-dev client.js
error: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-11T16:41:01.080

`authorization`Socket.IO 中的**中间件**是基于 HTTP 标头数据处理握手过程的中间件，在 WebSockets 的情况下，该数据与第一个 HTTP Switch Protocols 标头一起发送。

此数据包含正常的标头内容以及 cookie，有时用于恢复会话。
虽然`authorization`中间件发生在实际的 WebSockets 握手过程完成之前，而且这个中间件不应该用于应用程序逻辑授权，而只能用于网络和 http 的东西（如用于恢复会话的 cookie、禁止 IP 等）。

所以我建议不要将此中间件用于应用程序逻辑，因为它实际上也是特定于协议的（Socket.IO 使用许多协议和通信层，如 WebSockets、XHR 长轮询、AJAX 等）。但是在成功建立连接后执行您的身份验证逻辑。

# python - 将 Python 字典/列表插入 SQL 数据库的最有效方法是什么？

> ID：11807601
> 
> 赞同：10
> 
> 时间：2012-08-04T09:50:53.533
> 
> 标签：python, sql, json, dictionary, insert

想象一下，您有一个包含大量项目的键值 Python 字典（或列表）。假设您正在读取一个更大的 JSON 文件，并且希望将其内容存储到 MySQL 表中，其中键作为列名，值作为值本身。

JSON 示例：

```
"display_location": {
    "city":"Bratislava",
    "state_name":"Slovakia",
    "country_iso3166":"SK",
    "latitude":"48.20000076",
    "longitude":"17.20000076",
} 
```

那么像这样手动编写 SQL 插入是非常低效的：

```
INSERT INTO TABLE (city, state_name, country_iso3166, latitude, longitude) VALUES('%s','%s','%s','%s','%s')
% (Bratislava, Slovakia, SK, 48.20000076, 17.20000076); 
```

（嗯，有五个值是可以的，但想象一下，例如有五百个。）

是否有任何用于有效和短字符串 SQL 插入的 Python 类/方法？我写了这段代码：

```
for key,value in list.iteritems():
  value_type = type(value)
    if value_type is unicode:
      vars_to_sql.append(value.encode('ascii', 'ignore'))
      keys_to_sql.append(key.encode('ascii', 'ignore'))
    else:
      vars_to_sql.append(value)
      keys_to_sql.append(key)

keys_to_sql = ', '.join(keys_to_sql) 
```

之后插入看起来更简单：

```
INSERT INTO conditions_bratislava(%s) VALUES %r" % (keys_to_sql,  tuple(vars_to_sql),) 
```

可能有数千个值，您仍然可以使用这个插入语句。

*请注意将解码 Unicode 字符串的条件，因此每个值之前不会有“u”字母。*

那么，是否有任何更有效和准备好的类或方法如何使用短 INSERT 字符串以相同的简单方法插入许多值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T10:43:23.253

如果您的数据是这样的结构，它将更适合面向文档的数据库（Mongo/Couch 等...）

你可以摆脱这样的事情......我认为使用`repr`有点太聪明了......

```
insert_sql = 'INSERT INTO conditions_bratislava(%s) values(%s)'
cols = ', '.join(somedict)
vals = ', '.join('?' * len(somedict)) # or whatever qparam is required
to_execute = insert_sql % (cols, vals)
some_cursor.execute(to_execute, somedict.values()) 
```

附带说明：

```
value_type = type(value)
if value_type is unicode: 
```

应该写成：

```
if isinstance(value, unicode): 
```

# jquery - 如果浏览器不支持 css3，如何提供不同的样式表？

> ID：11807604
> 
> 赞同：1
> 
> 时间：2012-08-04T09:51:37.260
> 
> 标签：jquery, css

我在我的网站上添加了许多带有 css3 的关键帧动画。可以说我正在从左到右为 div 设置动画。最初，这个 div 的位置是 -50px，我动画到 0px，但如果浏览器不支持 css3，用户将看到 -50px 的 div，这很糟糕。

我该怎么做：

如果支持 css3 { css1.css 否则 { css2.css } }

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T10:03:58.410

不需要 2 个不同的 css 文件。您可以使用带有 css 的[modernizr来检查浏览器是否支持 css3 动画并决定测试。](http://modernizr.com)

如果不支持动画，您只需要重新定位 div 即可。

将modernizr添加到页面

将 class="no-js" 添加到 html 标记

如果浏览器不支持 css 动画，那么“no-cssanimations”将被添加到类中

然后您可以为不支持的浏览器添加自定义规则

```
.no-cssanimations #yourDiv
{
   top:0px;
} 
```

检查这个使用相同技术的[讨论](https://stackoverflow.com/questions/6087337/using-modernizr-with-css-classes-that-use-more-than-one-css3-style)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T10:03:30.693

我想这对你有用..

你可以在javascript中做到这一点。 [资源](http://net.tutsplus.com/tutorials/html-css-techniques/quick-tip-detect-css-support-in-browsers-with-javascript/#)

```
var supports = (function() {  
   var div = document.createElement('div'),  
      vendors = 'Khtml Ms O Moz Webkit'.split(' '),  
      len = vendors.length;  

   return function(prop) {  
      if ( prop in div.style ) return true;  

      prop = prop.replace(/^[a-z]/, function(val) {  
         return val.toUpperCase();  
      });  

      while(len--) {  
         if ( vendors[len] + prop in div.style ) {  
            // browser supports box-shadow. Do what you need.  
            // Or use a bang (!) to test if the browser doesn't.  
            return true;  
         }   
      }  
      return false;  
   };  
})();  

if ( supports('textShadow') ) { 
  $('#support').html("Your browser supports textShadow property");  
} 
```

这是工作小提琴：

[http://jsfiddle.net/MehjK/](http://jsfiddle.net/MehjK/)

# java - 从线程中的不同类运行 GUI

> ID：11807607
> 
> 赞同：2
> 
> 时间：2012-08-04T09:52:18.760
> 
> 标签：java, multithreading, swing, user-interface

我创建了一个 GUI 类和一个演示类。演示类正在调用 GUI。我想在不同的线程中运行 GUI。

**图形界面类**

```
public class UserGui extends JFrame {
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                UserGui frame = new UserGui();
                frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}
 } 
```

**演示类：**

```
public class NNDemo {

    public static void main(String[] args) {
        UserGui gui = new UserGui();
        gui.setVisible(true);

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T10:05:21.933

```
public class UserGui extends JFrame {
    public UserGui() {}

    public void showGui() {
        setVisible(true);
    }
}

public class Demo {
    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
             public void run() {
                  final UserGui GUI = new UserGui();
                  GUI.showGui();
             }

        });
    } 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T12:34:05.797

**1.** `Event Dispatcher Thread`（EDT）负责贵。

**2.** `main()` GUI 应用程序中的方法**寿命不长**，在 Event Dispatcher Thread 中调度 GUI 的构建后退出。所以现在它的 EDT 负责处理 GUI。

这就是我喜欢做上面的例子的方式：

```
public class UserGui extends JFrame {

    public UserGui() {

      // You can set the size here, initialize the state and handlers.
    }

}

public class Demo {

    public static void main(String[] args) {

        EventQueue.invokeLater(new Runnable() {
             public void run() {

              new UserGui().setVisible(true);

             }

        });
    } 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T12:42:51.377

以下是 Net beans 自动生成的代码，用于在单独的线程中运行框架

```
 public static void main(String[] args){

    /*
     * Create and display the form
     */
    java.awt.EventQueue.invokeLater(new Runnable() {

        public void run() {
            new BoardPlay().setVisible(true);
        }
    });
   } 
```

# java - Android 从另一个类更改 TextView 文本

> ID：11807609
> 
> 赞同：3
> 
> 时间：2012-08-04T09:52:58.950
> 
> 标签：java, android, android-activity

我有一个`TextView`in `MainActivity`，我想`TextView`在另一个类中更改文本。

我怎样才能从另一个班级`TextView`进入？`MainActivity`

我尝试了以下

TextView textView = (TextView) findViewById(R.id.myTextView);

textView.setText("文本");

但是应用程序在调用时崩溃`setText()`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-04T10:03:03.313

你必须使用**runOnUiThread(new Runnable()...**

请参阅以下内容：

```
import android.content.Context;

private class AnotherClass {
        protected MainActivity context;

        public AnotherClass(Context context){
            this.context = (MainActivity) context;
        }

        public void updateTV(final String str1){
            context.runOnUiThread(new Runnable() {
                @Override
                public void run() {
                    context.textView.setText(str1);    
                }
            });
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T09:58:23.297

如果您想更新 TextView 的文本，一种可能的方法是在您的类共享的公共数据模型中编辑文本。如果`onResume`稍后从活动中调用它，它可以从模型中读取新值并更新 TextView。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T09:57:16.123

我建议使用处理程序来更新该活动的内容。这只是一种方法，有多种方法可以做到这一点。

句柄的全部目的是让一些后台进程/线程将信息传递到 UI 线程。

# regex - 正则表达式从 javascript-like-array-string 中提取多个值

> ID：11807611
> 
> 赞同：-1
> 
> 时间：2012-08-04T09:53:22.237
> 
> 标签：regex

我有以下字符串

```
(...)

api_images = ['/files/a.jpg','/files/avd.jpg','/files/5.jpg'];
api_titles = 3;
api_descriptions = 42; 
```

我需要一个正则表达式来从大括号中提取值，`[]`如下所示：

*   `/files/a.jpg`
*   `/files/avd.jpg`
*   `/files/5.jpg`

字符串很长，并且可以包含很少的数组，因此正则表达式必须匹配单词`api_images`，并在大括号之间查找。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T10:17:48.297

由于 PCRE 不支持[可变长度后视](http://www.regular-expressions.info/lookaround.html)，我认为您应该分两遍执行此操作；首先找到这些“数组”，然后提取字符串。

找到数组并不难（这是原始的正则表达式，根据需要转义）：

```
\[(?:[^\]\['"]+|'[^']*'|"[^"]*")*\] 
```

这将为您提供匹配的数组，如下所示：

```
['/files/a.jpg','/files/avd.jpg','/files/5.jpg'] 
```

然后可以使用 JSON 解析器很好地解析它，或者使用另一个正则表达式来查找/提取字符串：

```
(?<=')[^']+(?=')|(?<=")[^"]+(?=") 
```

这将为您提供字符串值。注意：这些正则表达式不考虑字符串中的转义（例如`'that\'s a problem'`不会被正确解析）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T10:22:27.610

如果您想从多行文本中获取以开头的行`api_images`并忽略所有其他行，则可以使用它。

**流动：**

1.  获取从开始`api_images`到行尾的所有行。
2.  删除不需要的字符。
3.  在 处拆分字符串`,`。
4.  根据需要处理。

**代码：**

```
<?php
$str = "api_images = ['/files/a.jpg','/files/b.jpg','/files/c.jpg'];
    api_titles = 3;
    api_descriptions = 42;
    api_images = ['/files/1.jpg','/files/2.jpg','/files/3.jpg'];
    api_titles = 3;
    api_descriptions = 42;";

//Find all the lines starting with "api_images"
preg_match_all("/(api_images.*)/", $str, $matches);
$api_images = $matches[0];

$count_api_images = count($api_images);
for($i=0;$i<$count_api_images;$i++){
    $api_images[$i] = str_replace("api_images = [", "", $api_images[$i]);
    $api_images[$i] = str_replace("'", "", $api_images[$i]);
    $api_images[$i] = str_replace("]", "", $api_images[$i]);
    $api_images[$i] = str_replace(";", "", $api_images[$i]);
    $api_images[$i] = explode(",", $api_images[$i]);
}

echo "<pre>";
print_r($api_images);
echo "</pre>"; 
```

?>

每个字符串 ie等都可以通过`/files/a.jpg`,等访问。`/files/avd.jpg` `/files/5.jpg``$api_images[0][0]``$api_images[0][1]``$api_images[0][2]`

[现场演示](http://codepad.viper-7.com/cs0cae)

# sharepoint - 应用程序因错误而终止。无法加载文件或程序集“Microsoft.SharePoint.Client, Version=14.0.0.0,

> ID：11807616
> 
> 赞同：0
> 
> 时间：2012-08-04T09:54:08.897
> 
> 标签：sharepoint, dynamics-crm, dynamics-crm-2011, sharepoint-clientobject

在 MSCRM2011 IFD 环境中出现此错误，但在内部没有此问题。

我检查了 CRM 服务器和客户端机器的 GAC，“Microsoft.SharePoint.Client.dll”在那里。我不明白应用程序在哪里搜索“Microsoft.SharePoint.Client”

> 应用程序因错误而终止。无法加载文件或程序集“Microsoft.SharePoint.Client, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c”或其依赖项之一。系统找不到指定的文件。应用程序因错误而终止。应用程序因错误而终止。无法加载文件或程序集 'Microsoft.SharePoint.Client, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c' 或它的依赖项之一。系统找不到指定的文件。应用程序因错误而终止。无法加载文件或程序集“Microsoft.SharePoint.Client, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c”或其依赖项之一。系统找不到指定的文件。应用程序因错误而终止。应用程序因错误而终止。无法加载文件或程序集“Microsoft.SharePoint.Client, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c”或其依赖项之一。系统找不到指定的文件。应用程序因错误而终止。应用程序因错误而终止。无法加载文件或程序集 'Microsoft.SharePoint.Client, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c' 或它的依赖项之一。系统找不到指定的文件。应用程序因错误而终止。无法加载文件或程序集“Microsoft.SharePoint.Client, Version=14.0.0.0, Culture=neutral, PublicKeyToken=71e9bce111e9429c”或其依赖项之一。系统找不到指定的文件。应用程序因错误而终止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T14:17:58.627

我对你的第一行有点困惑。据我了解，IFD 环境基本上是本地安装，但设置为通过 Web 访问。

什么应用程序在这里失败了？客户关系管理流程或定制的东西？

无论如何，这里有一些建议：

1.  重置 crm Web 服务器 (iisreset) - 如果进程同步运行（以确保它获取最新的 .dll）
2.  重置 crm 异步服务 - 如果进程异步运行（以确保它获取最新的 .dll）
3.  14.0.0.0 是正确的版本吗？与您的工作安装进行比较
4.  您的部署是否溢出到多台服务器上？例如，单独的应用程序和平台服务器，在这种情况下，请确保 .dll 在所有服务器的 gac 中。

# android - 使用远程数据库

> ID：11807621
> 
> 赞同：0
> 
> 时间：2012-08-04T09:55:00.863
> 
> 标签：android, database

我正在构建一个免费的应用程序，将附近医院的地址存储在数据库中。用户也可以添加医院。由于这是一个免费应用程序，我无法投资服务器空间。

我已经知道如何将您的预填充数据库与您的应用程序打包在一起。但是，我正在考虑创建一个数据库文件并将其上传到 Dropbox。然后我打开它的连接并检索或添加记录。

如果可能的话，我应该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T12:09:54.153

我的想法是创建一个 Web 服务，然后您可以在应用程序中查询该服务。该服务将托管在“云”中（有多个免费托管商，例如 Google App Engine）。

通过这种方式，您可以在真实数据库中管理数据、从应用程序中查询数据、创建同步功能（下载部分数据并使其离线可用）等等。

# c# - c# 中有关单选按钮和 xml 的可能菜鸟问题

> ID：11807622
> 
> 赞同：0
> 
> 时间：2012-08-04T09:55:10.540
> 
> 标签：c#

您好，我目前正在自学 C#，并且遇到了一些困难。

编辑：我正在使用 Windows 窗体应用程序。

我目前正在开发的程序可以打开现有`.XML`文件进行编辑或创建新文件。我要做的是允许用户单击左侧的单选按钮，这将自动填充右侧的代码行，最终将能够导出这些代码行。

**问题是如何将一段代码绑定到单选按钮，以便在选择单选按钮时将代码添加到右侧的 Richtextbox1 中？**

例如，我连续有三个单选按钮，例如`-all - none -one`. 当全部被选中时，它将从第 17 行开始编写我链接到单选按钮的代码，无论它有多长，当我选择无时，它将从这些行中删除该代码（主要用于用户开始使用按钮播放的情况）。

提前感谢您提供的任何帮助，我也很抱歉，因为我觉得这可能是一个简单的问题，我可能只是没有正确地措辞我的搜索。到目前为止，我在谷歌的帮助下完成了大部分程序，但这让我很难过。再次感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T10:14:01.230

我会将 CheckBoxes 的 IsChecked 属性绑定到视图模型中的枚举属性。如果您的 enum 属性发生更改，您可以编辑富文本框的源属性并为其调用 PropertyChanged。

```
 private RadioButtonEnum _radioButtonEnum
    public RadioButtonEnum RadioButtonEnum
    {
        get { return _radioButtonEnum; }
        set
        {
            _radioButtonEnum = value;
            OnPropertyChanged("RadioButtonEnum");
            RefreshText();
        }
    }

    private void RefreshText()
    {
        switch (RadioButtonEnum)
        {
            case None:
                //Do your changes to your TextProperty
                break;
            case All:
                //Do your changes to your TextProperty
                break;
            case One:
                //Do your changes to your TextProperty
        }
        OnPropertyChanged("YourTextProperty");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T10:14:05.563

假设您在面板中有单选按钮并且行为正常，当您单击其他更改时，您可以双击每个按钮，它将生成一个`CheckChanged`事件。这将在此单选按钮更改时调用（我认为已选中。）

有关更多信息，请在 Visual Studio 的设计视图中单击单选按钮。现在查看属性窗口，单击闪电，这将显示所有可以触发的事件。在您的情况下，您应该使用`CheckedChanged.`

# php - 如何解析soap php的xml响应

> ID：11807625
> 
> 赞同：-5
> 
> 时间：2012-08-04T09:55:52.820
> 
> 标签：php, soap, response

我需要解析soapserver的这个响应：

```
<?xml version="1.0" encoding="UTF-8"?><SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:wsa="http://schemas.xmlsoap.org/ws/2004/08/addressing">
 <SOAP-ENV:Header>
  <wsa:MessageID SOAP-ENV:mustUnderstand="0">uuid:5f7271f0-de19-11e1-8035-e656d1754971</wsa:MessageID>
  <wsa:To SOAP-ENV:mustUnderstand="0">http://schemas.xmlsoap.org/ws/2004/08/addressing/role/anonymous</wsa:To>
 </SOAP-ENV:Header>
 <SOAP-ENV:Body>
  <ns1:wssigatewayResponse xmlns:ns1="urn:it-progress-operate:ws_operate">
   <ns1:result xsi:nil="true"/>
   <ttOut xmlns="urn:it-progress-operate:ws_operate">
    <ttOutRow xmlns="urn:it-progress-operate:ws_operate">
     <ParPos xmlns="urn:it-progress-operate:ws_operate">0</ParPos>
     <ParNam xmlns="urn:it-progress-operate:ws_operate">ContentType</ParNam>
     <ParVal xmlns="urn:it-progress-operate:ws_operate">text/xml</ParVal>
    </ttOutRow>
    <ttOutRow xmlns="urn:it-progress-operate:ws_operate">
     <ParPos xmlns="urn:it-progress-operate:ws_operate">1</ParPos>
     <ParNam xmlns="urn:it-progress-operate:ws_operate">Result</ParNam>
     <ParVal xmlns="urn:it-progress-operate:ws_operate">200</ParVal>
    </ttOutRow>
    <ttOutRow xmlns="urn:it-progress-operate:ws_operate">
     <ParPos xmlns="urn:it-progress-operate:ws_operate">2</ParPos>
     <ParNam xmlns="urn:it-progress-operate:ws_operate">XMLDocumentOut</ParNam>
     <ParVal xmlns="urn:it-progress-operate:ws_operate">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
&lt;DtsAgencyLoginResponse xmlns=&quot;DTS&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;DTS file:///R:/xsd/DtsAgencyLoginMessage_01.xsd&quot;&gt;&lt;SessionInfo&gt;&lt;SessionID&gt;178918&lt;/SessionID&gt;&lt;Profile&gt;A&lt;/Profile&gt;&lt;Language&gt;ENG&lt;/Language&gt;&lt;Version&gt;1&lt;/Version&gt;&lt;/SessionInfo&gt;&lt;AdvisoryInfo/&gt;&lt;/DtsAgencyLoginResponse&gt;</ParVal>
    </ttOutRow>
   </ttOut>
   <ns1:opcErrorMessage/>
  </ns1:wssigatewayResponse>
 </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

如何在最后一个 ttOutRow 中从 ParVal 获取 SessionID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T10:16:22.827

将 SOAP 响应加载到`DOMDocument`对象中：

```
$soapDoc = new DOMDocument();
$soapDoc->loadXML($soapResponse); 
```

`DOMXPath`为该文档准备一个对象：

```
$xpath = new DOMXPath($soapDoc); 
```

为命名空间注册一个前缀`urn:it-progress-operate:ws_operate`：

```
$xpath->registerNamespace('operate', 'urn:it-progress-operate:ws_operate'); 
```

检索有效负载节点：

```
$path = "//operate:ttOutRow[operate:ParNam='XMLDocumentOut']/operate:ParVal";
$result = $xpath->query($path); 
```

保存有效负载 XML：

```
$payloadXML = $result->item(0)->nodeValue; 
```

现在您已经拥有了有效负载 XML 字符串，请再次执行该过程：

*   将其加载到 DOMDocument
*   准备一个 DOMXpath 对象
*   注册`DTS`命名空间
*   使用 XPath 检索值

最好将整个过程包装到一个函数中，以便您可以重复使用它。

# php - 如何将字符串添加到 MYSQL 数据库，并使用 php 删除字符串的最后一个字符？

> ID：11807626
> 
> 赞同：3
> 
> 时间：2012-08-04T09:55:53.983
> 
> 标签：php, mysql, string

我想*将*字符串添加`,'2')`到数据库中的一行。数据库中的当前字符串如下所示：`('1','42','2122','3')` 如果我要正常添加它，结果将是：`('1','42','2122','3'),'2')`。如何删除已经在数据库中的字符串的最后一个字符，所以它最终会像这样：`('1','42','2122','3','2')` 我尝试使用`concat`and (sub) `str_replace`，但这并没有给我想要的结果。

这是否可能仅使用 SQL，而无需先获取记录并更新它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T10:25:19.620

嗯，可以使用mysql的**replace功能**

此功能与编辑器中的“查找-替换”对话框非常相似。这将用 'String_Expression' 中的 'REPLACE_String' 替换所有出现的 'FIND_String'

**示例**-`Select REPLACE ('Vipin', 'i', 'X')`
**输出**- VXpXn
**语法：** `Replace ( 'String_Expression', 'FIND_String', 'REPLACE_String' )`

文档：[http ://www.electrictoolbox.com/mysql-select-replace/](http://www.electrictoolbox.com/mysql-select-replace/)

在您的情况下，如果您只有一个*右括号*，那么您可以使用以下查询来更新您的表格。

**PHP 代码**

```
$newString = ",'2')";

$sql = "UPDATE <tableName> SET <fieldName> = replace(<fieldName>, ')', ". $newString .")"; 
```

请记住，这将替换 to 的每个实例，`')'`因此`$newString`该解决方案仅在最后只有一个右括号时才有效。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-04T10:00:26.633

```
$result = rtrim($string, ')'); 
```

[http://php.net/manual/pl/function.rtrim.php](http://php.net/manual/pl/function.rtrim.php)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-04T10:01:50.393

```
$rest = substr("abcdef", 0, -1);  // returns "abcde" 
```

然后使用“。” 添加其余部分。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-04T10:09:39.823

如果我没有误会你...

```
$str = "('1','42','2122','3'),'2')";

$new_str = str_replace( ')' , '' , $str) . ')';

// $new_str -- ('1','42','2122','3','2') 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-04T10:17:56.537

```
$oldtuple = "('1','42','2122','3')";
$newvalue = ",'2')";
$newtuple = substr($oldtuple, 0, strlen($oldtuple)-1).$newvalue; 
```

现在，如果您键入
`echo $newtuple;`
，您应该会看到以下输出：
`('1','42','2122','3','2')`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-04T10:03:10.033

我不知道 MySQL 是否也可以做到这一点，但在 PHP 中我会做这样的事情“：

```
$string = //get your string from database
$stringtoadd = ",'2')";

$string = substr_replace($string ,"",-1);
    $newstring = $string.$stringtoadd;
//put $newstring in database 
```

substr_replace 将用“”（无）替换最后一个字符。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-04T10:34:59.953

那是你的查询

`UPDATE TABLE_NAME set FIELD_NAME = REPLACE(FIELD_NAME, ')', ',YOUR_NUMBER_HERE)')`

# ios - 从不同的视图更改标签

> ID：11807632
> 
> 赞同：3
> 
> 时间：2012-08-04T09:56:49.537
> 
> 标签：ios, uiviewcontroller, delegates, uitextfield, uilabel

这主要是一个代表团问题，因为我还在学习并且不明白。我不知道如何去创建我需要的委托。

我知道有人问过类似的问题，但解决方案对我没有帮助。如何使用视图 2 中的 UITextField 的内容切换视图 1 上的标签文本？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T11:03:46.867

在此代码段中，ChildViewController 是您的 View2，ParentViewController 是您的 View1。

在您的 ChildViewController.h 文件中：

```
@protocol ChildViewControllerDelegate <NSObject>
- (void)parentMethodThatChildCanCall:(NSString *)string;  //pass back the string value from your textfield
@end

@interface ChildViewController : UIViewController 
{
    @property (weak, nonatomic) IBOutlet UITextField *myTextField;
}
@property (assign) id <ChildViewControllerDelegate> delegate; 
```

在您的 ChildViewController.m 文件中：

```
@implementation ChildViewController
@synthesize delegate;

// Some where in your ChildViewController.m file
// to call parent method:
//  [self.delegate parentMethodThatChildCanCall:myTextField.text]; 
```

在 ParentViewController.h 文件中：

```
@interface parentViewController <ChildViewControllerDelegate>
{
    @property (strong, nonatomic) IBOutlet UILabel *myLabel;
} 
```

在 ParentViewController.m 文件中：

```
//after create instant of your ChildViewController

childViewController.delegate = self;

- (void) parentMethodThatChildCanCall:(NSString *)string
{
  // assign your passed back textfield value to your label here
    myLabel.text = string;
} 
```

# ios - iOS：带有PDF下载的应用程序，建议使用哪种方法？（ftp，休息，肥皂，..）

> ID：11807638
> 
> 赞同：0
> 
> 时间：2012-08-04T09:57:23.780
> 
> 标签：ios, rest, pdf, ftp, download

我已经完成了我的 iPad 应用程序，只需要实现 PDF 下载服务。所以当我想用我的应用程序连续下载 100 个 PDF 时，你会建议哪种方法？

实际上我会想到 FTP，但这似乎不再安全了。另一方面，像 REST 这样的服务似乎并不是为发送如此大的数据而设计的（尤其是因为它是无状态的等等）。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T10:02:36.717

安全超文本传输​​协议 (HTTPS) 是一种广泛使用的通信协议，用于通过计算机网络进行安全通信，尤其是在 Internet 上的广泛部署。从技术上讲，它本身并不是一个协议。相反，它是在 SSL/TLS 协议之上简单地分层超文本传输​​协议 (HTTP) 的结果，从而将 SSL/TLS 的安全功能添加到标准 HTTP 通信中。

# macos - 为 WebView 使用 Subclassed NSWindow

> ID：11807639
> 
> 赞同：0
> 
> 时间：2012-08-04T09:57:40.997
> 
> 标签：macos, webview, nswindow

我相信我可以使用我自己的自定义 NSWindow（即我自己的 NSWindow 子类）来实现我所需要的。[禁用 WebKit WebView 的](https://stackoverflow.com/questions/1878281/disable-a-webkit-webview)答案告诉我我的 NSWindow 子类，但对 Cocoa 来说还很新，如何让 WebView 使用我的 NSWindow 子类。WebViews(s) 是从我的 .xib 创建的。我创建了一个自定义 WebView 子类（用于其他东西），但 WebView 去创建它自己的视图/框架/窗口等，我看不出如何让它使用我的 myNSWindow（我会使用更好的名称！）。

（基本上我正在寻找拦截事件，忽略一些，将其他传递给标准方法并将一些复制到其他视图 - 不像听起来那么混乱）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T05:29:14.290

我不明白你的说法，“WebView 去创建它自己的视图/框架/窗口”。WebView 不会创建窗口——您将 Web 视图添加到 IB 中的窗口。如果您有 NSWindow 的子类，则可以将 IB 中的该窗口的类更改为该类。如果您在代码中创建自定义窗口，您可以使用 setHostWindow: 方法将其设置为 Web 视图的窗口。

# c# - 获取 Telerik RadGrid 的行

> ID：11807646
> 
> 赞同：15
> 
> 时间：2012-08-04T09:59:05.993
> 
> 标签：c#, asp.net, telerik, radgrid

我正在研究 RadGrid，我想访问它的行，但它似乎没有`.Rows`属性。

这是我到目前为止所尝试的：

![在此处输入图像描述](../Images/7e16d14b1c04da6579c63ded1ff9e2b2.png)

如何访问`rgCustomers`'s Rows 集合？我想为每一行添加一个按钮。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-04T18:45:26.590

根据[Telerik 的文档](http://www.telerik.com/help/aspnet-ajax/grid-data-items.html)，

“网格中的每个动态行表示来自指定数据源的记录。动态行由 GridDataItem 类（GridItem 的后代）表示。

每个 GridTableView 都有一组 GridDataItem 类型的行（Items 集合）。”

所以你要使用网格的Items集合，它是GridDataItems的集合。

```
protected void btnLoad_Click(object sender, EventArgs e)
{
  rgCustomers.DataSource = odsCustomers;
  rgCustomers.DataBind();
  foreach (GridDataItem row in rgCustomers.Items)
  {
  }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T10:11:47.170

我假设它是 WPF/Silverlight RadGrid？

如果您想访问数据绑定网格中的行控件（不是行数据） - 您必须使用 RadGrid 的 ItemContainerGenerator 属性。例如：

```
rgCustomers.ItemContainerGenerator.ContainerFromIndex(0); 
```

或者

```
rgCustomers.ItemContainerGenerator.ContainerFromItem(odsCustomers[0]); 
```

将返回第一行控件（如果我没记错的话，类型为 RadGridViewRow）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-08T07:47:57.033

### - 如果你想在每一行添加一个按钮：

*GridTemplateColumn*或*GridButtonColumn*可以解决问题。

### - 如果要访问当前行：

1.  使用按钮的 OnClick 事件处理程序。

    ```
    <telerik:RadButton ID="BTN_DEMO" runat="server" HeaderText="N°1 DEMO BTN"
    Text='<%#"Click Me iM N°"+((IhateEvalDataSource) Container.DataItem).Stuff_ID %>' 
    OnClick="BTN_DEMO_Click"></telerik:RadButton> 
    ```

2.  使用 (sender as RadButton).NamingContainer 获取对 GridDataItem 的引用。

    ```
    protected void BTN_BL_Click(object sender, EventArgs e)
    {
        GridDataItem G = ((RadButton)sender).NamingContainer as GridDataItem;
    } 
    ```

3.  使用[GetDataKeyValue() 方法](http://docs.telerik.com/devtools/aspnet-ajax/controls/grid/rows/accessing-cells-and-rows#accessing-raw-field-data-and-key-values)提取记录 ID：

    ```
    DEMO_INT = (int)G.GetDataKeyValue("mySweetInt"); 
    DEMO_STRING = (string)G.GetDataKeyValue("MyString"); 
    ```

# python - 在 python 中使用 BernoulliNB（朴素贝叶斯分类器）scikit-learn 的简单示例 - 无法解释分类

> ID：11807649
> 
> 赞同：11
> 
> 时间：2012-08-04T09:59:16.663
> 
> 标签：python, machine-learning, artificial-intelligence, scikit-learn

使用 scikit-learn 0.10

为什么以下琐碎的代码片段：

```
from sklearn.naive_bayes import *

import sklearn
from sklearn.naive_bayes import *

print sklearn.__version__

X = np.array([ [1, 1, 1, 1, 1], 
               [0, 0, 0, 0, 0] ])
print "X: ", X
Y = np.array([ 1, 2 ])
print "Y: ", Y

clf = BernoulliNB()
clf.fit(X, Y)
print "Prediction:", clf.predict( [0, 0, 0, 0, 0] ) 
```

打印出“1”的答案？在 [0,0,0,0,0] => 2 上训练模型后，我期待“2”作为答案。

为什么用

```
Y = np.array([ 3, 2 ]) 
```

给出不同的“2”类作为答案（正确的）？这不就是一个阶级标签吗？

有人可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-05T11:49:14.040

默认情况下，alpha，平滑参数为 1。正如 msw 所说，您的训练集非常小。由于平滑，没有留下任何信息。如果将 alpha 设置为非常小的值，您应该会看到预期的结果。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-04T12:30:54.210

您的训练集太小，如下所示

```
clf.predict_proba(X) 
```

产生

```
array([[ 0.5,  0.5],
       [ 0.5,  0.5]]) 
```

这表明分类器将所有分类视为等概率的。[与BernoulliNB](http://scikit-learn.org/stable/modules/generated/sklearn.naive_bayes.BernoulliNB.html#sklearn.naive_bayes.BernoulliNB)文档中显示的示例进行比较，结果如下`predict_proba()`：

```
array([[ 2.71828146,  1.00000008,  1.00000004,  1.00000002,  1\.        ],
       [ 1.00000006,  2.7182802 ,  1.00000004,  1.00000042,  1.00000007],
       [ 1.00000003,  1.00000005,  2.71828149,  1\.        ,  1.00000003],
       [ 1.00000371,  1.00000794,  1.00000008,  2.71824811,  1.00000068],
       [ 1.00000007,  1.0000028 ,  1.00000149,  2.71822455,  1.00001671],
       [ 1\.        ,  1.00000007,  1.00000003,  1.00000027,  2.71828083]]) 
```

我在其中应用`numpy.exp()`了结果以使它们更具可读性。显然，概率甚至不接近相等，实际上对训练集进行了很好的分类。

# mysql - MySQL 与 Group By 的一对多连接仅返回一个观察值

> ID：11807650
> 
> 赞同：14
> 
> 时间：2012-08-04T09:59:26.090
> 
> 标签：mysql, join

我有一个评论表和一个标签表。对于每条评论，可能有多个标签，也可能没有。我想加入这两者，这样我就可以获得每个评论的标签列表。

评论表：

```
+---------+----------+---+
|CommentID|   Title  | ..|
+---------+----------+---+
|   1     |   animals|   |
|   2     |   plants |   |
+---------+----------+---+ 
```

标签表：

```
+---------+----------+---+
|  TagID  |CommentID | ..|
+---------+----------+---+
|    5    |     1    |   |
|    6    |     1    |   |
|    7    |     3    |   |
+---------+----------+---+ 
```

因此，查询应该返回标签，(5,6) 用于评论 ID == 1 和空数组用于评论 ID == 2

这就是我所拥有的 - 它只选择最后一个 ID 而不是倍数：

```
SELECT c.CommentID, c.Title,  t.TagID  FROM Comment as c
        LEFT OUTER JOIN Tag as t ON c.CommentID = t.CommentID
        GROUP BY t.TagID 
```

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-08-04T10:44:07.457

您可以使用[`GROUP_CONCAT`](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)将多行中的数据转换为单个分隔字符串：

```
SELECT    a.CommentID, 
          a.Title,
          GROUP_CONCAT(b.TagID ORDER BY b.TagID) AS tags
FROM      CommentTable a
LEFT JOIN TagTable b ON a.CommentID = b.CommentID
GROUP BY  a.CommentID,
          a.Title 
```

在这种情况下，如果评论没有相应的标签，则该字段将为 NULL。

* * *

[*SQLFiddle 演示*](http://www.sqlfiddle.com/#!9/45f0e/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T10:03:05.367

试试这个：

```
SELECT c.CommentID, c.Title,  t.TagID  FROM Comment as c
        LEFT OUTER JOIN Tag as t ON c.CommentID = t.CommentID 
```

edit1：如果您只想根据评论每组返回一行

```
SELECT c.CommentID, c.Title,MAX(t.TagID )
FROM Comment as c
left OUTER JOIN TagTable as t ON c.CommentID = t.CommentID
GROUP BY  c.CommentID, c.Title 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-04T10:03:58.273

对于这种情况，您不需要 group by：

```
SELECT c.CommentID, c.Title,  t.TagID  FROM Comment as c
LEFT OUTER JOIN Tag as t ON c.CommentID = t.CommentID 
```

# .htaccess - Yii 如何获得干净漂亮的 URL

> ID：11807652
> 
> 赞同：4
> 
> 时间：2012-08-04T09:59:51.907
> 
> 标签：.htaccess, url-rewriting, yii, yii-extensions

我是 Yii 框架的新手。我在配置文件中取消了 url 管理器的注释，并得到了一个这样的 url 方案：

```
http://localhost/mysite/index.php/displayAll 
```

我不想要 url 中的 index.php。所以我想要一个这样的网址

```
http://localhost/mysite/displayAll 
```

要做到这一点，我该怎么做。我确实玩过 url 管理器和一些 htaccess，但没有任何进展。

请帮忙

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-04T12:33:06.680

在你的 .htaccess 你应该有这个：

```
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . index.php 
```

然后你必须将 urlManager 组件添加到你的主配置文件中：

```
array(
    ......
    'components'=>array(
        ......
        'urlManager'=>array(
            'urlFormat'=>'path',
            'showScriptName'=>false,
            'rules'=>array(
                'pattern1'=>'route1',
                'pattern2'=>'route2',
                'pattern3'=>'route3',
            ),
        ),
    ),
); 
```

注意**'showScriptName'=>false**，这将从生成的 URL 中隐藏 'index.php'。

要查找有关 Yii 的 URL 管理器的所有信息，请查看 Yii 文档中的这个主题： [http ://www.yiiframework.com/doc/guide/1.1/en/topics.url](http://www.yiiframework.com/doc/guide/1.1/en/topics.url)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T11:42:35.797

尝试：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^/?mysite/(.*)$ /mysite/index.php/$1 [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-20T12:09:41.530

在 httpd.conf 中寻找，

```
 LoadModule rewrite_module modules/mod_rewrite.so 
```

（如果尚未删除，请从行首删除 #。）

```
 OR 
     In wamp click on wampserver-> Apache -> Apache Modules and enable rewrite_module. 
```

在 index.php 所在的目录中创建 .htaccess，然后粘贴以下代码：

```
IndexIgnore */*
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule . index.php 
```

并在 protected/config/main.php

```
 'urlManager' => array(
    'urlFormat' => 'path',
    'showScriptName' => false,
    'rules' => array(
       '<controller:\w+>/<id:\d+>' => '<controller>/view',
       '<controller:\w+>/<action:\w+>/<id:\d+>' => '<controller>/<action>',
       '<controller:\w+>/<action:\w+>' => '<controller>/<action>',
     ),
 ), 
```

如果仍然没有得到干净的 url，请转到虚拟主机配置文件“httpd-vhosts”以防你正在使用它，然后粘贴到你的配置中，

```
 <Directory "C:/wamp/www">
    AllowOverride All 
 </Directory> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-17T17:32:43.413

在 IIS 7、IIS 7.5、IIS 8、IIS 8.5、IIS 10 上

1.  确保您已安装**URL 重写模块**。可以在这里找到：[http ://www.iis.net/downloads/microsoft/url-rewrite](http://www.iis.net/downloads/microsoft/url-rewrite)

2.  从**config/main.php**或**config/web.php中删除注释**

    ```
     'urlManager' => [
        'enablePrettyUrl' => true,
        'showScriptName' => false,
        'rules' => [
        ],
    ], 
    ```

3.  **在web目录basic/web/ web.config**新建文件并添加**system.webServer**

    ```
    <directoryBrowse enabled="false" />

    <rewrite>
        <rules>
        <rule name="Hide Yii Index" stopProcessing="true">
            <match url="." ignoreCase="false" />
            <conditions>
            <add input="{REQUEST_FILENAME}" matchType="IsFile" ignoreCase="false" negate="true" />
            <add input="{REQUEST_FILENAME}" matchType="IsDirectory" ignoreCase="false" negate="true" />
            </conditions>
                <action type="Rewrite" url="index.php" appendQueryString="true" />
        </rule> 
        </rules>
    </rewrite> 
    ```

示例结果：[http://localhost/basic/web/site/contact](http://localhost/basic/web/site/contact)

# winforms - telerik listcontrol 仅显示部分项目图像

> ID：11807653
> 
> 赞同：0
> 
> 时间：2012-08-04T09:59:53.483
> 
> 标签：winforms, telerik, listcontrol

我正在使用以下代码填充列表控件（Telerik for WinForms）：

```
public static List<RadListDataItem> GetItems()
        {
            List<RadListDataItem> items = new List<RadListDataItem>();

            for (int i = 1; i <= 10; i++)
            {
                RadListDataItem toadd = new RadListDataItem();
                toadd.TextImageRelation = System.Windows.Forms.TextImageRelation.ImageBeforeText;
                toadd.Text = "sssssssssss";
                //toadd.Image.
                string imagename = "MyProject.SuIcons.d" + i + ".JPG";
                toadd.Image = new Bitmap(Assembly.GetExecutingAssembly().
                    GetManifestResourceStream(imagename));
                items.Add(toadd);
            }
            return items;

        } 
```

但是，每个项目图像的顶部只显示在列表控件中，我的意思是我看不到与列表中的项目关联的整个图像。

你能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T19:37:26.803

您可以调整 radListView 的项目大小。您可以在设计器视图中更改一个属性 ItemSize。或者，如果您想以编程方式执行此操作，则可以执行以下操作。

```
radListView1.ItemSize = new System.Drawing.Size(200, 400); 
```

第一个参数是宽度，第二个参数是高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T05:55:08.990

您应该将控件的**AutoSizeItems**属性设置为*true*，以允许可视项目根据其内容自行调整大小：

```
radListControl1.AutoSizeItems = true; 
```

# android - Android中的分页

> ID：11807655
> 
> 赞同：1
> 
> 时间：2012-08-04T10:00:06.930
> 
> 标签：android, listview, pagination

我是

*   编写应用程序来参加测验。
*   从 json 中获取问题。
*   能够使用扩展 BaseAdapter 的自定义适配器填充问题以及选项。

**问题**

随着列表越来越大，很难回答。我想要的是每个问题都以一种布局显示。当用户单击下一步时，它应该加载下一个问题。

QuizView.java

```
List<Quiz> quizList = new ArrayList<Quiz>();

    String json = "[{\"question\": \"What?\", \"option1\": \"alpha\" , \"option2\": \"beta\" , \"option3\": \"gamma\" , \"option4\": \"alpha\"},{\"question\": \"What?\", \"option1\": \"alpha\" , \"option2\": \"beta\" , \"option3\": \"gamma\" , \"option4\": \"alpha\"}]";

    Gson gson = new Gson();
    JsonParser parser = new JsonParser();
    JsonArray array = parser.parse(json).getAsJsonArray();

    for(JsonElement obj : array) {
    Quiz quiz = gson.fromJson(obj,Quiz.class);
    String question = quiz.getQuestion();
    System.out.println("Question: "+question);
    quizList.add(quiz); 
```

测验.java

```
public class Quiz {

    public String question;

    public String option1;
    public String option2;
    public String option3;
    public String option4;

    public void setQuestion(String question) {
        this.question = question;
    }

    public String getQuestion() {
        return question;
    }

    public void setOption1(String option1) {
        this.option1 = option1;
    }

    public String getOption1() {
        return option1;
    }

    public void setOption2(String option2) {
        this.option2 = option2;
    }

    public String getOption2() {
        return option2;
    }

    public void setOption3(String option3) {
        this.option3 = option3;
    }

    public String getOption3() {
        return option3;
    }

    public void setOption4(String option4) {
        this.option4 = option4;
    }

    public String getOption4() {
        return option4;
    }
} 
```

# iphone - 用 Objective-C 编程 Stephen Kochan。第 21 章，练习 21.2

> ID：11807656
> 
> 赞同：1
> 
> 时间：2012-08-04T10:00:09.473
> 
> 标签：iphone, objective-c, ios, xcode, ios-simulator

***你好！***

我在 21.2 练习中遇到了麻烦。在那个练习中，我构建了分数计算器。我有 9 个按钮和数学动作。当我在 iOS 模拟器上按任何数字（1、2、3 或任何其他数字）时，它会生成一个错误：

```
 2012-08-05 15:09:05.026 Fraction_Calculator[834:f803] -[ViewController digit5]: unrecognized selector sent to instance 0x6843e00
2012-08-05 15:09:05.029 Fraction_Calculator[834:f803] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[ViewController digit5]: unrecognized selector sent to instance 0x6843e00'
*** First throw call stack:
(0x14b5022 0xeb5cd6 0x14b6cbd 0x141bed0 0x141bcb2 0x14b6e99 0x1b14e 0x1b0e6 0xc1ade 0xc1fa7 0xc1266 0x403c0 0x405e6 0x26dc4 0x1a634 0x139fef5 0x1489195 0x13edff2 0x13ec8da 0x13ebd84 0x13ebc9b 0x139e7d8 0x139e88a 0x18626 0x28ad 0x2815)
terminate called throwing an exception 
```

*这意味着：* “**无法识别的选择器发送到实例 0x6843e00** ”和“ **'-[ViewController digit5]: 无法识别的选择器发送到实例 0x6843e00'** ”。

*这是我的那个程序的代码：*

**视图控制器.h**

**代码：Objective-C**

```
#import <UIKit/UIKit.h>
#import "Calculator.h"

@interface ViewController : UIViewController

@property (strong, nonatomic) IBOutlet UILabel *display;

-(void) processDigit: (int) digit;
-(void) processOp: (char) theOp;
-(void) storeFracPart;

-(IBAction) clickDigit: (UIButton *) sender;

-(IBAction) clickPlus;
-(IBAction) clickMinus;
-(IBAction) clickMultiply;
-(IBAction) clickDivide;

-(IBAction) clickOver;
-(IBAction) clickEquals;
-(IBAction) clickClear;

@end 
```

**视图控制器.m**

**代码：Objective-C**

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController
{
    char                op;
    int                 currentNumber;
    BOOL                firstOperand, isNumerator;
    Calculator          *myCalculator;
    NSMutableString     *displayString;
}

@synthesize display;

-(void) processDigit:(int)digit
{
    currentNumber=currentNumber*10+digit;

    [displayString appendString:[NSString stringWithFormat:@"%i", digit]];
    display.text=displayString;
}

-(IBAction) clickDigit:(UIButton *)sender
{
    int digit=sender.tag;

    [self processDigit: digit];
}

-(void) processOp: (char) theOp
{
    NSString *opStr;

    op=theOp;

    switch(theOp)
    {
            case '+':
                opStr=@"+";
                break;
            case '-':
                opStr=@"-";
                break;
            case '*':
                opStr=@"*";
                break;
            case '/':
                opStr=@"/";
                break;
    }

    [self storeFracPart];
    firstOperand=NO;
    isNumerator=YES;

    [displayString appendString: opStr];
    display.text=displayString;
}

-(void) storeFracPart
{
    if(firstOperand)
    {
       if(isNumerator)
       {
           myCalculator.operand1.numerator=currentNumber;
           myCalculator.operand1.denominator=1;
       }
        else
            myCalculator.operand1.denominator=currentNumber;
    }
    else if (isNumerator)
    {
        myCalculator.operand2.numerator=currentNumber;
        myCalculator.operand2.denominator=1;
    }
    else
    {
        myCalculator.operand2.denominator=currentNumber;
        firstOperand=YES;
    }
currentNumber=0;
}

-(IBAction) clickOver
{
    [self storeFracPart];
    isNumerator=NO;
    [displayString appendString: @"/"];
    display.text=displayString;
}

-(IBAction) clickPlus
{
    [self processOp: '+'];
}

-(IBAction) clickMinus
{
    [self processOp: '-'];
}

-(IBAction) clickMultiply
{
    [self processOp: '*'];
}

-(IBAction) clickDivide
{
    [self processOp: '/'];
}

-(IBAction) clickEquals
{
    if (firstOperand==NO)
    {
        [self storeFracPart];
        [myCalculator performOperation: op];

        [displayString appendString: @"="];
        [displayString appendString: [myCalculator.accumulator convertToString]];
        display.text=displayString;

        currentNumber=0;
        isNumerator=YES;
        firstOperand=YES;
        [displayString setString: @""];        
    }
}

-(IBAction) clickClear
{
    isNumerator=YES;
    firstOperand=YES;
    currentNumber=0;
    [myCalculator clear];

    [displayString setString:@""];
    display.text=displayString;
}

- (void)viewDidLoad
{
    //[super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.

    firstOperand=YES;
    isNumerator=YES;
    displayString=[NSMutableString stringWithCapacity:40];
    myCalculator=[[Calculator alloc]init];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

@end 
```

**非常感谢！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T10:50:15.193

如果您没有为每个按钮设置标签值，则可能会发生这种情况。例如，对于按钮 4，标签应为 4，依此类推：

![在此处输入图像描述](../Images/2e9c33da633385254801864d76174f6c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T10:54:19.493

检查数字按钮标签属性（界面生成器中的 UIButton 设置）。看起来它们的值都是**0**。只需为按钮设置标签（例如，标签=3 用于数字 3 的按钮）。

# r - 重新缩放等高线图和地图数据

> ID：11807663
> 
> 赞同：0
> 
> 时间：2012-08-04T10:01:35.983
> 
> 标签：r

我正在尝试将图像叠加到世界地图上。这是可能的代码

```
 require(reshape)
   require(mapdata)
   df <- read.table('year.dat',head=F)
   names(df) <- c("value", "x", "y", "t")
   dfc <- cast(df[ ,-4], x ~ y)
   filled.contour(as.matrix(dfc),color.palette = colorRampPalette(c("lightblue",       "blue","violet", "black")),
   xlab = "Longitude (°)", ylab = "Latitude (°)",
   xlim = c(0, 360), ylim = c(-90, 90), 
   nlevels = 25,
   plot.axes = {axis(1); axis(2);           
   map('world2Hires', 
   xlim = c(0, 360), 
   ylim = c(-90, 90), 
   add = T, col = "darkgrey")}
   ) 
```

文件“year.dat”中包含的数据格式为

```
 0.35217720               1         201           1
 0.26413283               1         209           1
 1.1665874                1         210           1
 ...
 0.30815500               2         194           1
 0.15407741               2         196           1
 0.15407741               2         197           1
 0.33016610               2         205           1
 ... 
```

其中第一列是标量值，第二列是经度索引，第三列是纬度索引，第四列是时间索引。即行

```
 0.35217720               1         1           1 
```

意味着在时间 1，在坐标 -90° N，0° E 中，我们的值是 0.35217720。整个格子包含 480x241 个点。问题如下，如果我尝试在 R 中执行前面的代码，世界地图和条形图例会被淹没但没有颜色叠加。如果我评论该行

```
#xlim = c(0, 360), ylim = c(-90, 90), 
```

然后绘制颜色良好的图像，但不存在世界地图。所以我在 xlim 和 ylim 中尝试了不同的限制，实际上问题在于输入矩阵的比例。即R将两个轴的输入范围从0到1，而实际上它们从0到360和0到180。我可以通过哪种方式告诉R，x轴的输入比例从0到360，从0到180 y轴？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T08:08:49.893

解决方案是：

```
require(reshape) 
require(mapdata)
require(mapproj)
df <- read.table('year.dat',head=F)
names(df) <- c("value", "x", "y", "t")
dfc <- cast(df[ ,-4], x ~ y)
mm<-as.matrix(dfc,ncol=480,nrow=241)
#pdf('mappamondo.pdf')
 filled.contour(x=seq(0,360,length.out=480),y=seq(-90,90,length.out=241),mm,color.palette = colorRampPalette(c("lightblue", "blue","violet", "black")),
xlab = "Longitude (°)", ylab = "Latitude (°)",
plot.axes = {axis(1); axis(2);          
map('world2Hires',
xlim = c(0, 360), 
ylim = c(-90, 90), 
add = T, col = "black")}
)

#dev.off() 
```

# eclipse - Eclipse Juno 更新后无法创建新项目

> ID：11807665
> 
> 赞同：5
> 
> 时间：2012-08-04T10:02:01.317
> 
> 标签：eclipse, eclipse-cdt, eclipse-juno

我使用的是 Ubuntu 12.04，为了安装 Eclipse Juno，我从官方网站下载了它（我不使用 apt-get 也不使用软件中心）

从帮助 > 检查更新菜单更新后，我的 Eclipse 无法创建新项目。当我将鼠标悬停在文件 > 新建时，没有任何菜单可供选择（如通常的 Java 项目、C++ 项目等），只有这样一个不可选择的文本：

> <没有适用项目>

有谁知道这是什么原因？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-12T21:50:32.303

上面nitind的回答帮助解决了我的问题。我在 Windows 上使用 eclipse java ide juno，但在 File -> New 或 Window -> Show View 下看不到任何项目。我注意到 eclipse 默认使用 Java-EE 透视图。按照 nitind 的建议，我将其更改为 Java 透视图，现在可以看到所有菜单项。谢谢你！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-17T19:17:29.803

当我第一次启动该程序时，我遇到了同样的错误，但我查看了它，我看到工作区已经有 .cpp 并在其中编译了我之前用不同程序编译的文件。为了修复错误，我只是将工作区更改为默认值，它工作正常。

我在 java 1.6.0_27 中使用 eclipse CDT Kepler。然后我用 java 1.7.0_25 和 eclipse Juno 尝试了它，这个方法解决了任何这些实例中的错误。

尝试使用默认工作区，它应该可以工作。

问候，尼基塔

# database - 布告栏数据库设计

> ID：11807666
> 
> 赞同：0
> 
> 时间：2012-08-04T10:02:32.367
> 
> 标签：database, database-design

假设我需要为公告牌网站设计一个数据库。
类似stackoverflow的东西，这意味着有一个主题和一系列帖子
**，但是没有线程帖子（不是基于树的设计）**

我想到了两个主要选择：

1.  主题表和帖子表。帖子有“topic_id”字段
2.  没有主题表。只有一个大的 Post 表。

你认为更可取的选择是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T10:49:48.530

好吧，stackoverflow 是一个基于标签的设计，一个帖子可能有多个主题/标签。

因此，要在关系式设计中捕捉到这一点，您将拥有三个表：

1.  POST（post_id、作者等）
2.  主题（topic_id、名称等）
3.  POSTTOPIC (post_id, topic_id)

POSTTOPIC 的原因是因为一个帖子可能有多个标签。使用#3，可以很容易地为帖子分配/取消分配标签或查找具有特定主题的帖子。POST 中的任何一个列都无法容纳。

# ios - ShareKit 是否适用于 iPhone OS 3.0？

> ID：11807678
> 
> 赞同：0
> 
> 时间：2012-08-04T10:03:32.357
> 
> 标签：ios, sharekit

如果我只是将部署目标设置为 OS 3.0，Sharekit 是否仍可在设备上运行？它在模拟器中似乎工作正常，但我没有 OS 3.0 设备来进一步测试它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T10:15:25.520

在下载 ShareKit 并打开项目后，我似乎在 ShareKits 文档的任何地方都找不到明确说明，它的部署目标似乎设置为 iOS 3.2。

尽管这并不是 ShareKit 在 3.2 以下无法工作的“肯定”指标，但它似乎表明您可能确实在 iOS 3.0 上遇到了兼容性问题。

# c - 构建 C 库时遇到问题（使用 makefile）

> ID：11807680
> 
> 赞同：0
> 
> 时间：2012-08-04T10:03:46.140
> 
> 标签：c, java-native-interface, makefile, ld

我正在做一个需要连接到 AR.Drone 2.0 的项目。我在 Java 中有一个功能性 GUI，但要控制无人机，我必须使用它的 SDK，它是一个 C 库。我编写了通过 JNI 组合 Java 和 C 的必要函数，但由于我对随 SDK 提供的示例进行了修改，它不再构建。它被认为是使用运行 make 命令的 makefile（我也尝试过更改但没有成功）构建的。问题是我对 C 和 makefile 非常陌生，我在网上搜索了很多但没有找到任何解决方案。所以这是图书馆的样子：

```
.: Folder root
|
+ src: Sources
|
+ ARDroneLib: The AR.Drone Library
| |
| + Soft: Containing the "interesting" part of the whole lib
| | |
| | + More subdirs... (Build: contains a makefile, Common: c and h files, Lib: stuff)
| |
| + Many other subdirectories (FFMPEG, ITTIAM, VLIB, VP_SDK)
|
+ DroneControl: My own code
     |
     + Source:The source files
     | |
     | + Navdata: Code to retrieve the navigation data
     | | |
     | | + navdata.c
     | | + navdata.h
     | |
     | + Video: Code to retrieve the drone's video stream
     | | |
     | | + video_stage.c
     | | + video_stage.h
     | |
     | + ardrone_testing_tool.c: Main file, containing the main function, etc.
     | + ardrone_testing_tool.h: Its header
     | + dronecontrol_ARDrone: My own file, containing JNI methods (also has an init() function which calls main() in ardrone_testing_tool.c)
     | + dronecontrol_ARDrone: Its header
     | + vars.h:     Some shared variables
     |
     + Build:Contains the makefile
         |
         + makefile: The makefile 
```

这是 ./src/DroneControl/Build/ 中的生成文件：

```
SDK_PATH:=$(shell pwd)/../../ARDroneLib
PC_TARGET=yes
USE_LINUX=yes
ifdef MYKONOS
include $(ARDRONE_CUSTOM_CONFIG)
include $(ARDRONE_BUILD_CONFIG)
else
include $(SDK_PATH)/Soft/Build/custom.makefile
include $(SDK_PATH)/Soft/Build/config.makefile
endif
ifeq "$(RELEASE_BUILD)" "yes"
ARDRONE_TARGET_DIR=$(shell pwd)/../../../
else
ARDRONE_TARGET_DIR=$(shell pwd)/../../../Debug
endif
TARGET=linux_sdk_demo
SRC_DIR:=$(shell pwd)/../Sources
# Define application source files
GENERIC_BINARIES_SOURCE_DIR:=$(SRC_DIR)
GENERIC_BINARIES_COMMON_SOURCE_FILES+= \
Navdata/navdata.c \
Video/video_stage.c
GENERIC_INCLUDES+=     \
$(SRC_DIR) \
$(LIB_DIR) \
$(SDK_PATH)/Soft/Common \
$(SDK_PATH)/Soft/Lib
GENERIC_TARGET_BINARIES_PREFIX=
GENERIC_TARGET_BINARIES_DIR=$(ARDRONE_TARGET_DIR)
GENERIC_BINARIES_SOURCE_ENTRYPOINTS+= \
ardrone_testing_tool.c
GENERIC_INCLUDES:=$(addprefix -I,$(GENERIC_INCLUDES))
GENERIC_LIB_PATHS=-L$(GENERIC_TARGET_BINARIES_DIR)
GENERIC_LIBS=-lpc_ardrone -lgtk-x11-2.0 -lrt
SDK_FLAGS+="USE_APP=yes"
SDK_FLAGS+="APP_ID=linux_sdk_demo"
export GENERIC_CFLAGS
export GENERIC_LIBS
export GENERIC_LIB_PATHS
export GENERIC_INCLUDES
export GENERIC_BINARIES_SOURCE_DIR
export GENERIC_BINARIES_COMMON_SOURCE_FILES
export GENERIC_TARGET_BINARIES_PREFIX
export GENERIC_TARGET_BINARIES_DIR
export GENERIC_BINARIES_SOURCE_ENTRYPOINTS
export GENERIC_LIBRARY_SOURCE_DIR=$(GENERIC_BINARIES_SOURCE_DIR)

.PHONY: $(TARGET) build_libs
all: build_libs $(TARGET)
$(TARGET):
@$(MAKE) -C $(SDK_PATH)/VP_SDK/Build $(TMP_SDK_FLAGS) $(SDK_FLAGS) $(MAKECMDGOALS) USE_LINUX=yes
mv $(ARDRONE_TARGET_DIR)/ardrone_testing_tool $(TARGET)
mv $(TARGET) $(ARDRONE_TARGET_DIR)/
$(MAKECMDGOALS): build_libs
@$(MAKE) -C $(SDK_PATH)/VP_SDK/Build $(TMP_SDK_FLAGS) $(SDK_FLAGS) $(MAKECMDGOALS) USE_LINUX=yes
build_libs:
@$(MAKE) -C $(SDK_PATH)/Soft/Build $(TMP_SDK_FLAGS) $(SDK_FLAGS) $(MAKECMDGOALS) USE_LINUX=yes 
```

但是当我尝试做这个时，make命令给了我以下错误：

```
Libs already extracted
Building target static
/bin/sh: 1: ./autoConf.bash: Permission denied
make[2]: *** [build] Error 126
Checking required Ubuntu packages ...
ok.
Building ARDroneTool/Lib
Building ARDroneTool/Lib
ld ardrone_testing_tool
/usr/bin/ld: cannot find -lswscale
/usr/bin/ld: cannot find -lavformat
/usr/bin/ld: cannot find -lavcodec
/usr/bin/ld: cannot find -lavutil
collect2: ld returned 1 exit status
make[3]: *** [/home/user/workspace/AutoFlight/lib/native/DroneControl/src/DroneControl/Build/../../..//ardrone_testing_tool] Error 1
make[2]: *** [all] Error 2
make[1]: *** [build_app] Error 2
make: *** [linux_sdk_demo] Error 2 
```

我无法弄清楚 -lwscale、-lavformat 等是什么。我也尝试过将 make 命令设置为 su （主要是因为“权限被拒绝”错误），希望这是问这个问题的正确地方。那么有人对如何将其编译成动态链接库（.so 文件）有建议吗？任何帮助将不胜感激！

更新 1：权限被拒绝错误现已解决（感谢@eyalm）

更新 2：它现在可以工作了。我已经重写了makefile，但我不知道现在有什么不同可能会影响`ld`'s path。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T10:22:32.327

autoConf.bash 可能无法执行。使用 su 运行将无济于事。尝试：

```
# chmod a+x autoConf.bash 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T02:16:00.670

```
> /usr/bin/ld: cannot find -lswscale
> /usr/bin/ld: cannot find -lavformat
> /usr/bin/ld: cannot find -lavcodec
> /usr/bin/ld: cannot find -lavutil
> collect2: ld returned 1 exit status 
```

这些依赖项（即 、`libswscale`、`libavformat`和`libavcodec`）`libavutil`可能不存在于您的系统上，或者存在于不属于**ld**标准搜索路径的目录中。

如果依赖项不存在，那么您需要安装它们。在 Debian 衍生系统上，您可以使用**apt-file**命令来查找您需要安装的软件包。例如：

```
% apt-file -l find libswscale.a
libswscale-dev
% apt-file -l find libavutil.a
libavutil-dev
...etc... 
```

如果这些库已经存在于您的系统上，但位于非标准位置，则可以使用**ld**的`-L`选项将相关目录添加到其搜索路径中。例如：

```
% ld ..other-options... -L SEARCHDIR1 -L SEARCHDIR2 ... -lswscale -lavutil ...etc... 
```

请注意，选项`-L SEARCHDIR`需要出现*在*`-l LIB`选项之前。

# jquery - 准备就绪时显示 DOM

> ID：11807684
> 
> 赞同：2
> 
> 时间：2012-08-04T10:04:08.790
> 
> 标签：jquery

有没有一种简单的方法来隐藏网站的较大部分，显示 loader.gif 并用 jquery 很好地显示内容，直到整个 DOM 准备好？我该如何编码？Ofc 我不想使用 AJAX，只是 jquery。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T10:14:24.930

`visibility:hidden / visible`在 dom 准备好之前，在您不想显示的部分上使用。并且一旦 DOM 准备好 ( `$('document').ready();`) ，通过动画或任何您喜欢的方式使您的内容可见。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T10:31:06.373

您可以使用 jQuery document.ready 来完成，它只会在整个 DOM 加载后应用其功能/操作。

您可以通过将 body 设置为 来做到这一点`visibility:hidden`，然后使用 document.ready 函数添加一个类，这会将其更改为`visibility:visible`.

[jsFiddle](http://jsfiddle.net/wigster/vvYVK/) - 看看它是如何工作的。

（`"show"`如果您想测试它是否有效，请尝试将其更改为任何其他单词。）

不过，我个人不建议这样做，在慢速连接上，网站可能只是出现损坏，或者在加载 css 时可能会打开/关闭，然后是 jQuery。

如评论中所述，如果您需要以更简洁的方式加载内容，AJAX 通常是您的选择。

# c# - ExecuteScalar 返回值不合适

> ID：11807686
> 
> 赞同：0
> 
> 时间：2012-08-04T10:04:38.993
> 
> 标签：c#, enterprise-library

我使用 Enterprise Library，但遇到一个问题：

```
string sql = " 
               UPDATE StackOverflow SET UserName = @UserName
               WHERE Id = @Id 
             ";

DbCommand cmd = base.Database.GetSqlStringCommand(sql);

base.Database.AddInParameter(cmd, "Id", DbType.Int32, StackOverflow.Id);
base.Database.AddInParameter(cmd, "UserName", DbType.Int32, StackOverflow.UserName);

int val = Convert.ToInt32(base.Database.ExecuteScalar(cmd));

Convert.ToInt32(base.Database.ExecuteScalar(cmd)) //returns 0. 
```

我读过这篇文章[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)

文章说：
*如果插入新行，该函数返回新的标识列值，失败时返回 0。*

但我没有插入该表 - 我只想更新并返回更新的行 ID。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T10:11:51.477

您应该在您的情况下使用[ExecuteNonQuery](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery)。

[执行标量](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executescalar.aspx)

> *执行查询，并返回查询返回的结果集中第一行的第一列*

执行非查询

> *针对连接执行 Transact-SQL 语句并返回受影响的行数*

您的查询不返回任何内容，因此`ExecuteScalar`不是正确的方法。
如果您的查询已更新任何内容，另一边的 ExecuteNonQuery 将提供正确的信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-04T10:11:52.797

如果您将 SQL 语句修改为以下内容，我认为这会给您带来预期的结果：

```
string sql = " 
           UPDATE StackOverflow SET UserName = @UserName
           WHERE Id = @Id 

           RETURN @Id
         "; 
```

# unix - 如何在unix中从终端分离进程？

> ID：11807688
> 
> 赞同：6
> 
> 时间：2012-08-04T10:04:42.010
> 
> 标签：unix

当我在终端的后台启动一个进程时，如果终端关闭，我们将无法再与该进程交互。我不确定，但我认为进程也会被杀死。谁能告诉我如何将该进程从我的终端中分离出来。因此，即使我关闭终端，我也可以在新终端中与相同的进程进行交互？

我是 unix 新手，所以您的额外信息将对我有所帮助。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-05-22T07:06:57.563

您正在寻找的命令是不承认的。

```
disown <processid> 
```

这是尽可能接近 nohup 的方法。它将进程与当前登录分离并允许它继续运行。谢谢大卫科恩！

[http://www2.research.att.com/~gsf/man/man1/disown.html](http://www2.research.att.com/~gsf/man/man1/disown.html)

我刚刚找到了 reptyr，它可以让你重新处理一个不承认的进程。 [https://github.com/nelhage/reptyr](https://github.com/nelhage/reptyr)

它已经在 ubuntu 的软件包中了。

但是，如果您还没有开始这个过程并且您计划在未来这样做，那么要走的路就是[screen](https://www.gnu.org/software/screen/)和[tmux](https://github.com/tmux/tmux/wiki)。我更喜欢[屏幕](https://www.gnu.org/software/screen/)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-04T10:34:45.590

您也可以考虑该`screen`命令。它具有“恢复我的会话”功能。诚然，我从未使用过它，并且忘记了它。

将进程作为守护进程启动，或者`nohup`在重新捕获标准输出/标准输入方面可能无法完成您想要的一切。

网上有很多例子。在谷歌上尝试，“unix 屏幕命令”和“unix 屏幕教程”：

*   [http://www.thegeekstuff.com/2010/07/screen-command-examples/](http://www.thegeekstuff.com/2010/07/screen-command-examples/)
*   [GNU Screen：介绍和初学者教程](http://www.kuro5hin.org/story/2004/3/9/16838/14935)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-04T10:14:29.590

“UNIX恶魔化进程”的第一个谷歌结果：

有关简短概述，请参见 daemon(3) 联机帮助页。守护进程的主要内容是在不退出或阻止任何事情的情况下进入后台。一个进程可以做的事情的列表来实现这一点：

*   叉（）
*   设置ID（）
*   关闭/重定向 stdin/stdout/stderr 到 /dev/null，和/或忽略 SIGHUP/SIGPIPE。
*   chdir() 到 /。

如果作为 root 进程启动，您还想先做您需要成为 root 的事情，然后再删除权限。也就是说，使用 setuid()/setgid() 将有效用户更改为“daemon”用户或“nobody”。如果您无法删除所有权限并且有时需要 root 访问权限，请在不需要时使用 seteuid() 临时删除它。

如果您要分叉一个守护程序，那么还要设置子处理程序，如果调用 exec，请在您的孩子不需要的所有文件描述符上设置 close on exec 标志。

这是关于创建 Unix 守护进程的 HOWTO：http: [//www.netzmafia.de/skripten/unix/linux-daemon-howto.html](http://www.netzmafia.de/skripten/unix/linux-daemon-howto.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-22T17:06:39.937

“互动”可能意味着几件事。

从命令行启动的程序在终端结束时退出的原因是，shell 在退出时会向该进程发送 HUP 信号（`kill(1)`有关一些介绍，请参阅文档；顺便说一下，HUP 很短用于“挂断”，最初表示用户已挂断调制解调器/电话）。对 HUP 信号的默认响应是进程终止——即被调用的程序退出。

细节稍微复杂一些，但这是一般的直觉。

该`nohup`命令告诉外壳程序启动程序，并以*忽略*此 HUP 信号的方式执行此操作。也就是说，程序在调用终端退出后继续运行。

您仍然可以通过向它发送信号来与该程序进行交互（`kill(1)`再次查看），但这是一种非常有限的交互方式，并且取决于您的程序被编写为在接收到这些信号时执行明智的事情（信号`USR1`和`USR2`有用的事情可以捕获，如果你喜欢那种事情）。或者，您可以通过命名管道、信号量或其他进程间通信 (IPC) 进行交互。这很快就会变得很繁琐。

不过，我怀疑您所追求的是能够将终端重新连接到该进程。这是一个相当复杂的过程，并且应用程序喜欢`screen`在幕后做适当复杂的事情来实现这一点。

`nohup`事情是一种快速而肮脏的守护进程。该`daemon(3)`函数“正确”地执行守护进程，按照 YePhIcK 的回答中所述进行各种整理，以全面断开与调用它的进程/终端的链接。您可以使用与上述相同的 IPC 工具与该守护进程交互，但不能直接使用终端。

# mysql - 错误代码：1005 无法创建表

> ID：11807692
> 
> 赞同：0
> 
> 时间：2012-08-04T10:05:02.807
> 
> 标签：mysql

请参阅我的创建声明：

```
CREATE TABLE INTERNAL_MEDICINE_DETAIL(DIAGNOSE_ITEM VARCHAR(15) NOT NULL,
EXM_RESULT VARCHAR(50),
IDENTIFY_ID INT AUTO_INCREMENT PRIMARY KEY,
SUMMARY_ID INT NOT NULL,
FOREIGN KEY(SUMMARY_ID) REFERENCES INTERNAL_MEDICINE_SUMMARY(SUMMARY_ID),
FOREIGN KEY(DIAGNOSE_ITEM) REFERENCES INTERNAL_MEDICINE_ITEM_DEF(DIAGNOSE_ITEM)) 
```

引用的两个表创建成功：

```
CREATE TABLE INTERNAL_MEDICINE_ITEM_DEF(DIAGNOSE_ITEM VARCHAR(15) NOT NULL,
ITEM_DESCRIPTION VARCHAR(50) NOT NULL,
IDENTIFY_ID INT AUTO_INCREMENT PRIMARY KEY)

CREATE TABLE INTERNAL_MEDICINE_SUMMARY(SUMMARY_ID INT AUTO_INCREMENT PRIMARY KEY,
SUMMARY VARCHAR(1000),
R_IDENTIFYID INT NOT NULL,
FOREIGN KEY(R_IDENTIFYID) REFERENCES BASICINFO(IDENTIFY_ID)) 
```

我在 MySQL 网站上看到了错误代码 1005 的平均值，它说：无法创建表。如果错误消息涉及错误 150，则表创建失败，因为未正确形成外键约束。如果错误消息涉及错误 –1，则表创建可能失败，因为该表包含与内部 InnoDB 表的名称匹配的列名称。

我的错误目前是 150，但我找不到 INTERNAL_MEDICINE_DETAIL 表中定义的两个外键与 INTERNAL_MEDICINE_SUMMARY 和 INTERNAL_MEDICINE_ITEM_DEF 中定义的两个字段的区别。

所以，你能帮我告诉我原因吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T10:26:52.383

从 InnoDB[外键约束](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)文档：

> InnoDB 允许外键引用任何索引列或列组。但是，在引用的表中，必须有一个索引，其中引用的列按相同顺序列为第一列。

您需要在其第一列上创建一个`INTERNAL_MEDICINE_ITEM_DEF`索引`DIAGNOSE_ITEM`。（无需更改任何内容，`INTERNAL_MEDICINE_SUMMARY`因为引用的列是该表的主键。）

# android - 在xml文件中重命名ListView的问题

> ID：11807697
> 
> 赞同：0
> 
> 时间：2012-08-04T10:06:13.660
> 
> 标签：android

我在 android 中使用 ListView，我有一个扩展 ListActivity 的简单类。

每当我将 xml 文件中的 ListView 的名称更改为其他名称时，`android:list`我的程序就会崩溃。

这是我的 ListActivity 代码：

```
private NewExpenseScreenModel mDbAdabter;

    String[] items = { "Category", "Month", "Year"};
       /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.statistics);

        Spinner spinner = (Spinner) findViewById(R.id.spinner);

        ArrayAdapter adapter = new ArrayAdapter(
                this,
                android.R.layout.simple_spinner_item, 
                items);

        adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
        spinner.setAdapter(adapter);
        mDbAdabter = new NewExpenseScreenModel(this);

        populateFields();

    }

    private void populateFields() 
    {
        ArrayAdapter<String> adapter = new ArrayAdapter<String>(this, R.layout.spending_row, mDbAdabter.getAllCategories());
        setListAdapter(adapter);
    } 
```

这是我的 xml 文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
   android:orientation="vertical"
   android:padding="10dip"
   android:layout_width="fill_parent"
   android:layout_height="wrap_content">

    <Spinner
       android:id="@+id/spinner"
       android:layout_width="fill_parent"
       android:layout_height="wrap_content"
       android:prompt="@string/spinner_title"
   />
    <ListView android:id="@+id/android:list" android:layout_height="wrap_content"  android:layout_width="match_parent"></ListView>
</LinearLayout> 
```

知道发生了什么.. 我想稍后实现一个 onItemClickedListener 所以我希望能够通过 id 找到 ListView。我真的不明白为什么我不能只更改 id

附加信息：

我还有另一个类，它使用不同的 xml 文件，列表 id="android:list" 但我永远不需要按 id 找到该 listView，所以它不是问题。另一个类使用相同的 xml 文件来描述每一行的布局。

**更新：**

我设法通过使用`findViewById(android.R.id.list);`而不是访问ID，`findViewById(R.id.list);`但我仍然不明白为什么它不会让我重命名列表

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T00:47:55.790

列表视图 ID 应该是`@android:id/list`.

在定义新 id 时使用`+`in id。由于您使用的 ListView id 应该有`list`，并且`list`id 已经在内部定义，所以不需要添加`+`.

**已编辑**

当您从`ListActivity`. 请参阅@Mejonzhan 回答为什么会这样。

现在，如果您想要自己的 id 或想要拥有多个 List View，则不要扩展 ListActivity 而是扩展 Activity 并按如下方式处理 ListView：

更改 id 如下：

`<ListView android:id="@+id/myListView"`

在代码中，访问列表视图如下：

ListView myListView = (ListView) findViewById(R.id.myListView)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T10:14:29.647

试试这个`ArrayAdapter adapter = new ArrayAdapter(this, android.R.layout.simple_spinner_item_1, items);`，代替``ArrayAdapter adapter = new ArrayAdapter(this, android.R.layout.simple_spinner_item, items);``

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T00:46:36.450

[ListActivity](http://developer.android.com/reference/android/app/ListActivity.html)有一个默认布局，它由屏幕中央的单个全屏列表组成。但是，如果您愿意，您可以通过在 onCreate() 中使用 setContentView() 设置您自己的视图布局来自定义屏幕布局。**为此，您自己的视图必须包含一个 ID 为“@android:id/list”的 ListView 对象（如果它在代码中，则为列表）**

ListActivity 扩展Activity，可以搜索源码，找到ListActivity，找到函数：

```
public void onContentChanged() {
239        super.onContentChanged();
240        View emptyView = findViewById(com.android.internal.R.id.empty);
241        mList = (ListView)findViewById(com.android.internal.R.id.list);
242        if (mList == null) {
243            throw new RuntimeException(
244                    "Your content must have a ListView whose id attribute is " +
245                    "'android.R.id.list'");
246        }
247        if (emptyView != null) {
248            mList.setEmptyView(emptyView);
249        }
250        mList.setOnItemClickListener(mOnClickListener);
251        if (mFinishedStart) {
252            setListAdapter(mAdapter);
253        }
254        mHandler.post(mRequestFocus);
255        mFinishedStart = true;
256    } 
```

在第 241 行中 mList = (ListView)findViewById(com.android.internal.R.id.list); 所以你不能改变列表名称

# hibernate - 如何仅检索 JPQL 或 HQL 中实体的某些字段？JPQL 或 HQL 中的 ResultSet 等价物是什么？

> ID：11807698
> 
> 赞同：25
> 
> 时间：2012-08-04T10:06:26.813
> 
> 标签：hibernate, orm, hql, jpql

在 JPQL 中，我可以通过以下方式检索实体：

```
query = entityManager.createQuery("select c from Category c");
List<Category> categories = query.getResultList(); 
```

但是，如果我希望（仅）检索 Category 实体的 id 和 name 字段，我需要`ResultSet`对象之类的东西，通过它我可以说 :`rs.getString("name")`和`rs.getString("id")`. 如何做到这一点`JPQL`，而不检索整个实体？

基本上，对于如何从查询中检索信息，例如：`select c.id,c.name from Category c`？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-08-04T10:23:20.617

在 HQL 中，您可以使用 list() 函数获取包含结果行的 Object[] 数组列表：

```
Query query = session.createQuery("select c.id,c.name from Category c");
List<Object[]> rows = query.list(); 
```

在返回的数组中，第一个元素将是 id，第二个 - 名称。

```
for (Object[] row: rows) {
    System.out.println(" ------------------- ");
    System.out.println("id: " + row[0]);
    System.out.println("name: " + row[1]);
} 
```

如果你想使用 hibernate 的 Criteria API，你应该使用[Projections](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/querycriteria.html#querycriteria-projection)。

使用 JPA，它将以相同的方式工作：

```
List<Object[]> rows = entityManager.createQuery(queryString).getResultList(); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-04T18:20:04.977

不是`.list()`函数本身的使用导致结果为`List<Object[]>`. 它是`c.id, c.name`HQL 查询中字段 ( ) 的规范。如果您的查询是

```
 "select c from Category c" 
```

然后`query.list()`将返回一个`List<Category>`对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-09-23T15:32:48.343

也可以直接映射到类

```
public class UserData {

    private String name;
    private Date dob;
    private String password;
//setter
}

  public UserData getUserData() {
        String queryString = "select user.name as name, user.dob as dob, user.userses.password as password from UserProfile user where user.userEmailId='faiz.krm@gmail.com'";
        Query query = sessionFactory.getCurrentSession().createQuery(queryString);
        query.setResultTransformer(Transformers.aliasToBean(UserData.class));
        return query.uniqueResult();
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-31T11:37:15.470

**JPA 规范允许我们以面向对象的方式自定义结果。**

您可以在此[链接中找到更多信息](https://www.baeldung.com/jpa-queries-custom-result-with-aggregation-functions#solution_constructor)

还有一种更**优雅的** [方式](https://stackoverflow.com/a/40934100/9183844)

# python - Python，Sqlite没有将结果保存在文件中

> ID：11807700
> 
> 赞同：7
> 
> 时间：2012-08-04T10:06:37.107
> 
> 标签：python, database, sqlite

我在 Python 中有这段代码：

```
conn = sqlite3.connect("people.db")
cursor = conn.cursor()

sql = 'create table if not exists people (id integer, name VARCHAR(255))'
cursor.execute(sql)
conn.commit()

sql = 'insert into people VALUES (3, "test")'
cursor.execute(sql)
conn.commit()   

sql = 'insert into people VALUES (5, "test")'
cursor.execute(sql)
conn.commit()  

print 'Printing all inserted'
cursor.execute("select * from people")
for row in cursor.fetchall():
    print row

cursor.close()
conn.close() 
```

但似乎永远不会保存到数据库中，数据库上总是有相同的元素，就好像它没有保存任何东西一样。

另一方面，如果我尝试通过 sqlite 访问 db 文件，则会收到此错误：

```
Unable to open database "people.db": file is encrypted or is not a database 
```

`conn.commit`我发现了其他一些可以使用的答案，`conn.commit()`但没有改变结果。

任何的想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-04-17T08:07:53.373

答对了 ！人们！我有同样的问题。非常简单的原因之一。我正在使用 debian linux，错误是

> 无法打开数据库“people.db”：文件已加密或不是数据库

数据库文件与我的 python 脚本连接行位于同一目录中
`conn = sqlite3.connect('./testcases.db')`

我改变了这个

`conn = sqlite3.connect('testcases.db')`

！没有点和斜线。错误已修复。所有作品

如果有人认为它有用，欢迎您

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-04T10:11:31.397

这对我来说似乎没问题（每次运行时“在数据库中”都会增加）：

```
import random, sqlite3

conn = sqlite3.connect("people.db")
cursor = conn.cursor()

sql = 'create table if not exists people (id integer, name VARCHAR(255))'
cursor.execute(sql)

for x in xrange(5):
    cursor.execute('insert into people VALUES (?, "test")', (random.randint(1, 10000),))
conn.commit()

cursor.execute("select count(*) from people")
print "In database:", cursor.fetchone()[0] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T10:36:54.243

您可以使用 sqlite 管理员之类的工具打开数据库吗？这将证明 thedb 格式是可以的。如果我搜索该错误，则解决方案指向 sqlite 和使用的 db-driver 之间的版本问题。也许您可以检查您的版本，或者 AKX 可以发布工作组合。

问候，khz

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-05T13:58:53.340

您应该在进行更改后提交，即：

```
myDatabase.commit() 
```

# c# - 问题：通过图像处理程序从数据库中检索到的图像在 IE 中“将图片另存为”

> ID：11807703
> 
> 赞同：2
> 
> 时间：2012-08-04T10:06:52.087
> 
> 标签：c#, asp.net

我有一个包含 aspImage 控件的网页当我通过图像处理程序从数据库中检索图像时，我可以在 aspImage 控件中显示该图像！但 。. . 问题是当我右键单击图像并单击“将图片另存为”时，我收到此错误消息：正在保存或检索的文件类型已被阻止！我想知道这是 IE 问题还是我的代码有问题？！有什么帮助吗？！

这是我的图像处理程序代码：

```
 <%@ WebHandler Language="C#" Class="Handler" %>

using System;
using System.Configuration;
using System.Data.SqlClient;
using System.Web;

public class Handler : IHttpHandler, System.Web.SessionState.IRequiresSessionState 
{

    SqlConnection conn = new SqlConnection(ConfigurationManager.ConnectionStrings["DBConnectionString"].ConnectionString);
    public void ProcessRequest(HttpContext context)
    {
        string TableName=context.Session["TableToQuery"].ToString();
        string ID=context.Session["ID"].ToString();

        SqlCommand comm = new SqlCommand("SELECT * FROM "+ TableName +" WHERE ID=" + ID, conn);

        conn.Open();
        SqlDataReader dr = comm.ExecuteReader();
        dr.Read();
        context.Response.BinaryWrite((byte[])dr["Image"]);
        conn.Close();
    }

    public bool IsReusable
    {
        get
        {
            return false;
        }
    }

} 
```

这是我显示图像的数据列表：

```
<asp:DataList ID="DL" runat="server" Width="100%" Height="100%" RepeatColumns="1"
                            RepeatDirection="Vertical">
                            <ItemTemplate>
                                <table style="height: 100%; width: 100%">
                                    <tr style="width: 100%; height: 350px">
                                        <td valign="middle">
                                            <asp:Image ID="IMage" runat="server" ImageUrl='<%# "Handler.ashx?ID=" + Eval("ID") %>' />
                                        </td>
                                    </tr>
                                    <tr style="width: 100%; height: 250px">
                                        <td valign="top">
                                            <asp:TextBox ID="txtDecoded" runat="server" TextMode="MultiLine" Width="316px"
                                                Height="200px" Text='<%#Eval("DecodedString")%>'></asp:TextBox>
                                        </td>
                                    </tr>
                                </table>
                            </ItemTemplate>
                        </asp:DataList> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T11:00:07.660

您没有发送任何标头声明内容的 MIME 类型，只是一个`context.Response.BinaryWrite`

至少你应该在 BinaryWrite 之前添加这样的东西

```
context.Response.ContentType = "image/jpeg"; 
```

# iphone - 发布版本时阻止崩溃

> ID：11807705
> 
> 赞同：3
> 
> 时间：2012-08-04T10:07:09.530
> 
> 标签：iphone, objective-c, ios, xcode

我有一个问题我在 2 天内无法解决，它只发生在发布版本中，我在调试版本中运行它时没有任何问题。

但我认为这是因为一个没有被执行的块。我有这样的崩溃报告：

```
3   libdispatch.dylib               0x375d1c34 _dispatch_Block_copy + 8
4   libdispatch.dylib               0x375dc4ca dispatch_async$VARIANT$up + 6
5   Koldkrigsspionen                0x00020ef2 -[NOAudioManager audioPlayerDidFinishPlaying:successfully:] (NOAudioManager.m:807) 
```

audioPlayerDidFinishPlaying:successfully 的方法是这样的：

```
- (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag
{
    if (musicPlayerCompletionBlock)
        dispatch_async(dispatch_get_main_queue(), musicPlayerCompletionBlock);
} 
```

块设置如下：

```
- (void)setMusicCompletionBlock:(void (^)(void))theBlock 
{ 
    musicPlayerCompletionBlock = theBlock; 
} 
```

像这样在头文件中：

```
void (^musicPlayerCompletionBlock) (void); 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-04T12:26:32.497

您需要在您的设置器中复制该块。块从堆栈开始，在复制之前不会移动到堆中。

它在调试版本中“工作”，因为未启用优化器，因此编译器不会积极重用堆栈。即巧合。如果您要在块创建和调用之间添加一个或两个方法调用，它可能会开始崩溃。

我建议您摆脱 setter/getter 的自定义实现，`musicPlayerCompletionBlock`只声明一个属性：

```
typedef void(^MusicCompletionBlockType)(void);
.... 
@property(copy) MusicCompletionBlockType musicCompletionBlock; 
```

生成的 setter/getter 将负责复制块。`dealloc`如果不使用 ARC，您可以在 中发布它。

# java - 使用 Eclipse GAE 运行 PhantomJS

> ID：11807709
> 
> 赞同：0
> 
> 时间：2012-08-04T10:08:49.420
> 
> 标签：java, javascript, eclipse, google-app-engine, phantomjs

我在使用 Eclipse App Engine-JAVA 运行 PhantomJS 时遇到问题。由于我在环境变量中设置了 PhantomJS 的路径，因此它在命令提示符下运行良好。请帮我。

如何将 PhatomJS 放在我的类路径或 Eclipse 中的构建路径上，以便它在网络浏览器上可用，因为如果我在我的 HTML 中使用脚本，则会显示未定义变量幻影的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T09:00:42.403

您不能将 PhantomJS 与 Google App Engine 一起使用。
PhantomJS 是一个无头 WebKit（带有 JavaScript API），它是用 C++ 编写的。
GAE 只支持 Java（Java 字节码）、Python 和 GO。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-20T23:32:19.160

正如我在[另一个答案](https://stackoverflow.com/a/33837692/3618671)中所写：

> Google App Engine 支持多种语言运行时（Java、Python、PHP 和 Go），但您可以使用 Google App Engine 的[托管 VM](https://stackoverflow.com/a/33837692/3618671)功能在 Docker 容器（例如 PhantomJS）中运行任何东西，也可以使用[Google Compute Engine](https://cloud.google.com/compute/)以获得一个虚拟机，您还可以在其中安装任何您想要的任何语言的东西。
> 
> 作为参考，这里[有一个在托管 VM 上运行 Node.js 的教程，](https://cloud.google.com/nodejs/)以帮助指导您朝着正确的方向前进。

# android - 将数据插入数据库时 出错

> ID：11807710
> 
> 赞同：1
> 
> 时间：2012-08-04T10:09:06.050
> 
> 标签：android, sqlite

我有使用 EditText 获取数据并通过 DataBase Helper 将该数据插入数据库的表单活动。在我填写表格并按下按钮后，异常向我抛出一个错误并说：

> 08-04 13:03:11.527: E/Database(1311): android.database.sqlite.SQLiteException: 表数据没有名为Equity: 的列，编译时: INSERT INTO data(loans, castumers, stock, Equity, fixedAssets,债券，accumultedDepreciation，etCash，compNameAdd) VALUES(?, ?, ?, ?, ?, ?, ?, ?, ?);

我不明白为什么它说我没有权益栏，我有...

这是表单活动：

```
package com.nituach.nituach;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class AddNewBuisness extends Activity implements OnClickListener {
public static String companyName, cash, stock, ought, fixedAssets,
        accumulatedDepreciation, bonds, loans, equity;
TextView tvOt;
EditText cmIn, tvIn1, tvIn2, tvIn3, tvIn4, tvIn5, tvIn6, tvIn7, tvIn8;
Button btn;

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.add_new_buisness);
    cmIn = (EditText) findViewById(R.id.etCompanyName);
    tvIn1 = (EditText) findViewById(R.id.etCash);
    tvIn2 = (EditText) findViewById(R.id.etStock);
    tvIn3 = (EditText) findViewById(R.id.etOught);
    tvIn4 = (EditText) findViewById(R.id.etFixedAssets);
    tvIn5 = (EditText) findViewById(R.id.etAccumulatedDepreciation);
    tvIn6 = (EditText) findViewById(R.id.etBonds);
    tvIn7 = (EditText) findViewById(R.id.etLoans);
    tvIn8 = (EditText) findViewById(R.id.etEquity);

    btn = (Button) findViewById(R.id.button1);

    btn.setOnClickListener(AddNewBuisness.this);
}

public void onClick(View v) {
    if (tvIn1.getText().length() >= 1 && tvIn2.getText().length() >= 1
            && tvIn3.getText().length() >= 1
            && tvIn4.getText().length() >= 1
            && tvIn5.getText().length() >= 1
            && tvIn6.getText().length() >= 1
            && tvIn7.getText().length() >= 1
            && tvIn8.getText().length() >= 1) {

        // Integer.parseInt(tvIn3.getText().toString());
        companyName = cmIn.getText().toString();
        cash = tvIn1.getText().toString();
        stock = tvIn2.getText().toString();
        ought = tvIn3.getText().toString();
        fixedAssets = tvIn4.getText().toString();
        accumulatedDepreciation = tvIn5.getText().toString();
        bonds = tvIn6.getText().toString();
        loans = tvIn7.getText().toString();
        equity = tvIn8.getText().toString();

        String cm = companyName;
        String ch = cash;
        String sk = stock;
        String ot = ought;
        String fs = fixedAssets;
        String an = accumulatedDepreciation;
        String bs = bonds;
        String ls = loans;
        String ey = equity;

        DataBase entry = new DataBase(AddNewBuisness.this);
        entry.open();
        entry.createEntry(cm, ch, sk, ot, fs, an, bs, ls, ey);
        entry.close();

        Intent myIntent = new Intent(AddNewBuisness.this,
                NituachActivity.class);
        AddNewBuisness.this.startActivity(myIntent);
    } else {
        // AlertDialog.Builder builder = new
        // AlertDialog.Builder(AddNewBuisness.this);
        // builder.setMessage("dsfkjhlkdfg");

        Intent myIntent = new Intent(AddNewBuisness.this,   
NituachActivity.class);
        AddNewBuisness.this.startActivity(myIntent);
    }

}

} 
```

这是数据库助手：

```
package com.nituach.nituach;

import android.content.ContentValues;
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteException;
import android.database.sqlite.SQLiteOpenHelper;

public class DataBase {

    public static final String RAW_ID = "_id";
    public static final String RAW_COMPNAMEADD = "compNameAdd";
    public static final String RAW_CASH = "etCash";
    public static final String RAW_CUSTOMERS = "castumers";
    public static final String RAW_STOCK = "stock";
    public static final String RAW_FIXED_ASSETS = "fixedAssets";
    public static final String RAW_ACCUMULTED_DEPRECIATION = "accumultedDepreciation";
    public static final String RAW_BONDS = "bonds";
    public static final String RAW_LOANS = "loans";
    public static final String RAW_EQUITY = "equity";

    public static final String RAW_COMPNAME_ID = "_id";
    public static final String RAW_COMPNAME = "compName";

    private static final String DATABASE_NAME = "ProsseDatBase";
    static final String DATABASE_TABLE = "data";
    static final String DATABASE_TABLE_SETTINGS = "compNameConnector";

    private static final int DATABASE_VERSION = 1;

    private ProsseDatBase thdb;
    private static Context tcontext;
    private SQLiteDatabase tdb;

    private static class ProsseDatBase extends SQLiteOpenHelper {

        public ProsseDatBase(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
        }

        @Override
        public void onCreate(SQLiteDatabase db) {
            String pdb = "CREATE TABLE  " + DATABASE_TABLE + " ( " + RAW_ID
                    + " INTEGER PRIMARY KEY AUTOINCREMENT, " +   
RAW_COMPNAMEADD
                    + "TEXT, " + RAW_CASH + " TEXT, " + RAW_CUSTOMERS
                    + " TEXT, " + RAW_STOCK + " TEXT, " + RAW_FIXED_ASSETS
                    + " TEXT, " + RAW_ACCUMULTED_DEPRECIATION + " TEXT, "
                    + RAW_BONDS + " TEXT, " + RAW_LOANS + " TEXT" + 
RAW_EQUITY
                    + " TEXT );";
            db.execSQL(pdb);

            String cndb = "CREATE TABLE  " + DATABASE_TABLE_SETTINGS + " ( "
                    + RAW_COMPNAME_ID + " INTEGER PRIMARY KEY 
AUTOINCREMENT, "
                    + RAW_COMPNAME + " TEXT );";
            db.execSQL(cndb);

        }

        @Override
        public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
            db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE_SETTINGS);
            onCreate(db);
        }
    }

    public DataBase(Context c) {
        tcontext = c;
    }

    public DataBase open() throws SQLiteException {
        thdb = new ProsseDatBase(tcontext);
        tdb = thdb.getWritableDatabase();
        return this;
    }

    public SQLiteDatabase getDatabase() {
        return tdb;
    }

    public void close() {
        tdb.close();
    }

    public long createEntry(String cm, String ch, String sk, String ot,
            String fs, String an, String bs, String ls, String ey) {
        ContentValues cv = new ContentValues();
        cv.put(RAW_COMPNAMEADD, cm);
        cv.put(RAW_CASH, ch);
        cv.put(RAW_CUSTOMERS, ot);
        cv.put(RAW_STOCK, sk);
        cv.put(RAW_FIXED_ASSETS, fs);
        cv.put(RAW_ACCUMULTED_DEPRECIATION, an);
        cv.put(RAW_BONDS, bs);
        cv.put(RAW_LOANS, ls);
        cv.put(RAW_EQUITY, ey);

        return tdb.insert(DATABASE_TABLE, null, cv);
    }

} 
```

# java - 如何复制文件并将完整路径粘贴到 JTextField

> ID：11807711
> 
> 赞同：4
> 
> 时间：2012-08-04T10:09:20.463
> 
> 标签：java, swing, jtextfield, java-7, absolute-path

是否可以在 Java 中从操作系统复制文件并将其粘贴`JTextField`到复制文件的完整路径中？

例如，我的桌面上有文件“text.txt”。

所以我复制它`RightClick -> Copy`

在`JFrame`我的 Java 应用程序中，我专注于一个`JTextField`并使用`CTRL+V` 粘贴。然后应用程序应将复制文件的完整路径粘贴到`JTextField`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-04T10:16:32.680

您可以使用 Java 的剪贴板类。这是一个例子

```
Clipboard sysClip = Toolkit.getDefaultToolkit().getSystemClipboard();
 List<File> filesList= (List<File>)sysClip.getData(DataFlavor.javaFileListFlavor);
          if(filesList!= null){
    Iterator<File> it = filesList.iterator();
    while(it.hasNext()){
        System.out.println(it.next().getAbsolutePath());
    }
} 
```

# vim - 一条语句中有多个 :g 和 :v 命令

> ID：11807713
> 
> 赞同：15
> 
> 时间：2012-08-04T10:09:53.830
> 
> 标签：vim

我有这个文件

```
foo
foo bar
foo bar baz
bar baz
foo baz
baz bar
bar
baz
foo 42
foo bar 42 baz
baz 42 
```

我想要

1.  选择包含`foo`和不包含的行`bar`
2.  删除包含`foo`和不包含的行`bar`

我在某处（找不到链接）读到我必须为此使用 :exec `|`。

我尝试了以下方法，但它不起作用

```
:exec "g/foo" # works
:exec "g/foo" | exec "g/bar" -- first returns lines with foo, then with bar
:exec "g/foo" | :g/bar -- same as above 
```

当然，如果我不能选择一条线，我就不能`normal dd`在上面执行。

有任何想法吗？

### 编辑

赏金注意事项：

我正在寻找一种使用正确 :g 和 :v 命令且不使用正则表达式黑客的解决方案，因为条件可能不一样（我可以有 2 个包含，3 个排除）。

另请注意，最后两个不起作用的示例，它们仅用于删除行，但是当我在不删除的情况下运行它们（即查看所选行）时它们返回不正确的信息，并且它们的行为如上所述。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-04T11:08:56.387

我不是 vim 向导，但是如果您只想“删除包含 foo 且不包含 bar 的行”，那么应该这样做（我尝试了您的示例文件）：

```
:v /bar/s/.*foo.*// 
```

编辑：实际上这留下了空行。您可能希望在第二个搜索模式中添加一个可选的换行符。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-07T22:02:11.967

这对你来说可能仍然是 hackish，但你可以编写一些 vimscript 来为此创建一个函数和专门的命令。例如：

```
command! -nargs=* -range=% G <line1>,<line2>call MultiG(<f-args>)
fun! MultiG(...) range
   let pattern = ""
   let command = ""
   for i in a:000
      if i[0] == "-"
         let pattern .= "\\(.*\\<".strpart(i,1)."\\>\\)\\@!"
      elseif i[0] == "+"
         let pattern .= "\\(.*\\<".strpart(i,1)."\\>\\)\\@="
      else
         let command = i
      endif
   endfor
   exe a:firstline.",".a:lastline."g/".pattern."/".command
endfun 
```

这将创建一个命令，允许您自动执行“regex hack”。这样你可以做

```
:G +foo -bar 
```

获取所有带有 foo 而不是 bar 的行。如果参数不以`+`or开头，`-`则将其视为添加到命令末尾的`:g`命令。所以你也可以做

```
:G d +foo -bar 
```

删除行，甚至

```
:G norm\ foXp +two\ foos -bar 
```

如果你逃离你的空间。它还需要一个范围，例如`:1,3G +etc`，您可以在搜索词中使用正则表达式，但您必须转义您的空格。希望这可以帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-04T10:56:32.727

这是正则表达式变得有点麻烦的地方。您需要使用零宽度匹配`\(search_string\)\@=`。如果要以任何顺序匹配项目列表，`search_string`则应以 开头`.*`（因此匹配每次都从行首开始）。要匹配非出现，请`\@!`改用。

我认为这些命令应该做你想做的（为了清楚起见，我使用`#`它作为分隔符，而不是通常的`/`）：

1.  选择包含 foo 和 bar 的行：

    `:g#\(.*foo\)\@=\(.*bar\)\@=`

2.  选择包含 foo、bar 和 baz 的行

    `:g#\(.*foo\)\@=\(.*bar\)\@=\(.*baz\)\@=`

3.  选择包含 foo 且不包含 bar 的行

    `:g#\(.*foo\)\@=\(.*bar\)\@!`

4.  删除包含 foo 和 bar 的行

    `:g#\(.*foo\)\@=\(.*bar\)\@=#d`

5.  删除包含 foo 且不包含 bar 的行

    `:g#\(.*foo\)\@=\(.*bar\)\@!#d`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-07T21:04:30.717

除非您愿意使用一些正则表达式，否则您将无法满足您的要求，因为表达式是驱动力[`:global`](http://vimdoc.sourceforge.net/htmldoc/repeat.html#:g)，而相反[`:vglobal`](http://vimdoc.sourceforge.net/htmldoc/repeat.html#:v)。

这不是黑客攻击，而是命令**应该如何工作**：它们需要一个表达式才能使用。如果您不愿意使用正则表达式，恐怕您将无法实现。

如果您不愿意使用任何正则表达式，答案将在此处终止。

* * *

假设我们是思想开放的好人，我们需要一个正则表达式，当一行包含`foo` **而不是** `bar`时为真。

[炖牛肉王子的](https://stackoverflow.com/users/575497/prince-goulash)[第 5](https://stackoverflow.com/a/11808077/520162)条建议是相当有的，但如果出现在 之后就不起作用了。`foo``bar`

这个表达式完成了这项工作（即打印所有行）：

```
:g/^\(.*\<bar\>\)\@!\(.*\<foo\>\)\@=/ 
```

如果要删除它们，请添加`d`elete 命令：

```
:g/^\(.*\<bar\>\)\@!\(.*\<foo\>\)\@=/d 
```

描述：

*   [`^`](http://vimdoc.sourceforge.net/htmldoc/pattern.html#/%5E)从**行首开始**
*   `\(.*\<bar\>\)`词条*_*
*   [`\@!`](http://vimdoc.sourceforge.net/htmldoc/pattern.html#//@!)绝不能出现
*   `\(.*\<foo\>\)\@=`但是单词*foo*必须出现在该行的任何位置

这两种模式也可以互换：

```
:g/^\(.*\<foo\>\)\@=\(.*\<bar\>\)\@!/ 
```

产生相同的结果。

使用以下输入进行测试：

```
01      foo
02      foo bar
03      foo bar baz
04      bar baz
05      foo baz
06      baz bar
07      bar
08      baz
09      foo 42
10      foo bar 42 baz
11      42 foo baz
12      42 foo bar
13      42 bar foo
14      baz 42
15      baz foo
16      bar foo 
```

* * *

**关于多个包含/排除：**

每个*排除*都由模式组成

```
\(.*\<what_to_exclude\>\)\@! 
```

每个*包括*由模式组成

```
\(.*\<what_to_include\>\)\@= 
```

打印所有包含`foo`但不包含`bar`nor的行`baz`：

```
g/^\(.*\<bar\>\)\@!\(.*\<baz\>\)\@!\(.*\<foo\>\)\@=/ 
```

打印所有包含`foo`and`42`但不包含`bar`nor的行`baz`：

```
g/^\(.*\<bar\>\)\@!\(.*\<baz\>\)\@!\(.*\<foo\>\)\@=\(.*\<42\>\)\@=/ 
```

包含和排除的顺序并不重要，您甚至可以混合使用它们：

```
g/^\(.*\<bar\>\)\@!\(.*\<42\>\)\@=\(.*\<baz\>\)\@!\(.*\<foo\>\)\@=/ 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-04T15:35:32.810

有人可能会认为这样的组合`:g/foo/v/bar/d`会起作用，但不幸的是，这是不可能的，您将不得不重复使用建议的解决方法之一。

如帮助中所述，该命令在幕后分`:global`两个阶段工作，

*   首先标记要操作的线路，
*   然后对它们执行操作。

出于兴趣，我查看了 Vim 源代码中的相关部分：在**ex_cmds.c**中`ex_global()`，您会发现全局标志`global_busy`可防止命令在繁忙时重复执行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-13T22:43:04.870

好的，这是一个实际模拟递归使用全局命令的方法。它允许您组合任意数量的`:g`命令，至少在理论上是这样。但我警告你，它不漂亮！

## 原始问题的解决方案

我使用 Unix 程序*nl*（请耐心等待！）插入行号，但您也可以使用[纯 Vim](http://vim.wikia.com/wiki/Insert_line_numbers#Using_Vim)来插入行号。

```
:%!nl -b a
:exec 'norm! qaq'|exec '.,$g/foo/d A'|exec 'norm! G"apddqaq'|exec '.,$v/bar/d'|%sort|%s/\v^\s*\d+\s* 
```

完毕！让我们看看解释和一般解决方案。

## 一般解决方案

这是我选择的方法：

*   引入明确的行号
*   将文件末尾作为暂存空间，反复操作
*   对文件进行排序，去掉行号

使用文件末尾作为暂存空间（`:g/foo/m$`和类似的空间）是一个非常著名的技巧（您可以在著名的[答案一](https://stackoverflow.com/a/1220118/329063)中找到它）。另请注意，`:g`保留行的相对顺序 - 这是至关重要的。开始了：

**准备工作：**数行，清除“累加器”寄存器*一个*。

```
:%!nl
qaq 
```

**迭代位：**

1.  `:execute`全局命令，通过将匹配行附加到累加器寄存器中来收集匹配行`:d A`。
2.  将收集到的行粘贴到文件末尾
3.  重复范围`.,$`（暂存空间，或者在我们的例子中，“匹配”空间）

这是一个扩展示例：删除包含“foo”、不包含“bar”、包含“42”的行（仅用于演示）。

```
:exec '.,$g/foo/d A' | exec 'norm! G"apddqaq' | exec '.,$v/bar/d A' | exec 'norm! G"apddqaq' | exec '.,$g/42/d A' | exec 'norm! G"apddqaq'
 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
 (this is the repeating bit) 
```

当迭代位结束时，`.,$`为方便起见，这些行包含匹配项。您可以删除它们 ( `dVG`) 或其他任何内容。

**清理：**排序，删除行号。

```
:%sort
:%s/\v^\s*\d+\s* 
```

* * *

我相信其他人可以改进解决方案的细节，但是如果您绝对需要将多个`:g`s 和`:v`s 合并为一个，这似乎是最有希望的解决方案。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-19T16:00:45.187

我意识到您明确表示您需要使用`:g`and的解决方案`:v`，但我坚信这是您真正应该使用外部工具的完美示例。

```
:%!awk '\!/foo/ || /bar/' 
```

没有必要重新发明轮子。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-14T08:38:31.333

内置解决方案看起来非常复杂。一种简单的方法是使用 LogiPat 插件：

文档：[http ://www.drchip.org/astronaut/vim/doc/LogiPat.txt.html](http://www.drchip.org/astronaut/vim/doc/LogiPat.txt.html)

插件：[http ://www.drchip.org/astronaut/vim/index.html#LOGIPAT](http://www.drchip.org/astronaut/vim/index.html#LOGIPAT)

有了这个，您可以轻松地搜索模式。例如，要搜索包含 foo 而不是 bar 的行，请使用：

```
:LogiPat "foo"&!("bar") 
```

这将突出显示与逻辑模式匹配的所有行（如果您已设置 hls）。这样你就可以交叉检查你是否得到了正确的行，然后用'n'遍历，如果你愿意，用'dd'删除。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-08T15:48:27.873

你想用消极的眼光看待未来。本文或多或少地提供了您尝试实现的具体示例。 [http://www.littletechtips.com/2009/09/vim-negative-match-using-negative-look.html](http://www.littletechtips.com/2009/09/vim-negative-match-using-negative-look.html)

我将其更改为 :g/foo(.*bar)\@!/d

如果您认为这是 regex hack，请告诉我们。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-13T18:55:03.860

我会把我的帽子扔进擂台。由于 vim 的文档明确指出递归全局命令是无效的，并且正则表达式解决方案会很快变得很麻烦，我认为这是自定义函数和命令的工作。我已经创建了`:G`命令。

用法如下，由 .`:G`包围的模式`/`。任何不应匹配的模式都以 . 为前缀`!`。

```
:G /foo/ !/bar/ d 
```

这将删除所有匹配`/foo/`和不匹配的行`/bar/`

```
:G /42 baz/ !/bar/ norm A$ 
```

这会将 a 添加`$`到所有匹配`/42 baz/`且不匹配的行`/bar/`

```
:G /foo/ !/bar/ !/baz/ d 
```

这将删除所有匹配`/foo/`和不匹配`/bar/`和不匹配的行`/baz/`

该`:G`命令的脚本如下：

```
function! s:ManyGlobal(args) range
  let lnums = {}
  let patterns = []
  let cmd = ''
  let threshold = 0
  let regex = '\m^\s*\(!\|v\)\=/.\{-}\%(\\\)\@<!/\s\+'

  let args = a:args
  while args =~ regex
    let pat = matchstr(args, regex)
    let pat = substitute(pat, '\m^\s*\ze/', '', '')
    call add(patterns, pat)
    let args = substitute(args, regex, '', '')
  endwhile

  if args =~ '\s*'
    let cmd = 'nu'
  else
    let cmd = args
  endif

  for p in patterns
    if p =~ '^(!\|v)'
      let op = '-'
    else
      let op = '+'
      let threshold += 1
    endif
    let marker = "let l:lnums[line('.')] = get(l:lnums, line('.'), 0)" . op . "1"
    exe a:firstline . "," . a:lastline . "g" . substitute(p, '^(!\|v)', '', '') . marker
  endfor

  let patterns = []
  for k in keys(lnums)
    if threshold == lnums[k]
      call add(patterns, '\%' . k . 'l')
    endif
  endfor

  exe a:firstline . "," . a:lastline . "g/\m" . join(patterns, '\|') . "/ " . cmd
endfunction

command! -nargs=+ -range=% G <line1>,<line2>call <SID>ManyGlobal(<q-args>) 
```

该函数基本上解析出参数，然后用每个给定的模式分别标记所有匹配的行。然后在标记了适当次数的每一行上执行给定的命令。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-03-18T06:43:36.337

> 选择包含 foo 且不包含 bar 的行
> 
> 删除包含 foo 且不包含 bar 的行

这可以通过组合`global`和`substitute`命令来完成：

```
:v/bar/s/.*foo.*//g 
```

# android - 支持低至 android api 8 的值动画

> ID：11807717
> 
> 赞同：2
> 
> 时间：2012-08-04T10:10:59.747
> 
> 标签：android, animation

我有一个 RelativeView，我想在其中设置它的高度，但是当我需要支持到 api 8（android 2.2）时，我不知道该怎么做。

你对如何做到这一点有什么建议吗？

BR FireFly3000

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T10:18:35.940

你应该试试这个库：[https ://github.com/JakeWharton/NineOldAndroids](https://github.com/JakeWharton/NineOldAndroids)

这样就可以了；-)

# haskell - 启动在 haskell 平台包 2012.2.0.0 中提供的winghci 时出错

> ID：11807720
> 
> 赞同：2
> 
> 时间：2012-08-04T10:11:21.477
> 
> 标签：haskell, winghci

每次我双击winghci.exe 时都会`CreateGHCiProcess failed with failed with error 2`弹出一条错误消息。我假设安装没有成功完成设置环境变量，因为 cmd`C:\>ghci`最终也没有找到命令。任何人都可以帮助发布安装期间可能发生的更改或任何解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T08:50:12.867

要完成不完整的答案：将您的 haskell 平台文件夹中的 bin 目录的路径（例如 C:\Programs\Haskell Platform\2012.2.0.0\bin）添加到您的 PATH 中。这应该就是全部了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T05:54:38.017

问题已关闭。解决方案是通过重新安装或手动设置 $PATH$

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-01T15:58:39.993

我认为在处理 Windows 时应该是 %PATH% 。

`path = c:\programs\Haskell Platform\2012.2.0.0\bin;%path%`以你为例。

您还可以创建一个快捷方式并将“开始于：”条目指向您安装 bin 目录的位置。

对我来说，我将它安装在“c:\users[ME]\my documents\dev\Haskell Playform\2013.2.0.0\bin”下

启动良好。

# python - 列表python的产品

> ID：11807722
> 
> 赞同：5
> 
> 时间：2012-08-04T10:11:35.267
> 
> 标签：python, python-3.x, product

> **可能重复：**
> [返回列表的产品](https://stackoverflow.com/questions/2104782/returning-the-product-of-a-list)

除了这种方式之外，还有其他方法可以获取列表的产品：

```
def prod(L):
 p=1
 for i in L:
   p= i * p
 return p 
```

这段代码是正确的，但我需要找到另一种方法来做到这一点。而且我真的找不到。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-04T10:16:36.783

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-04T10:17:46.943

```
>>> reduce(lambda x, y: x * y, [1, 2, 3], 1)
6
>>> reduce(lambda x, y: x * y, [], 1)
1 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-04T10:29:59.763

If you're allowed to use `numpy`:

```
import numpy as np
product = np.product([1, 2, 3]) # returns 1.0 if empty list 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-04T10:23:53.323

```
def prod(array):
    if len(array)==0: return 1
    else: return array[0]*prod(array[1:]) 
```

# php - 如何获取网站的必应搜索 API 和 AppID

> ID：11807736
> 
> 赞同：10
> 
> 时间：2012-08-04T10:13:26.347
> 
> 标签：php, bing-api, app-id

我已经创建了我想在其中使用**必应搜索 API**的网站。为此它需要**AppID**，但我没有得到 AppID。我试图通过创建**windows live ID**在（azure market place）上创建一个 AppId 。我创建了客户端 ID 并注册了应用程序。谁能建议我如何获取必应搜索 API 的 AppID？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-04T10:31:10.453

要使用新的[必应搜索 API](https://datamarket.azure.com/dataset/bing/searchweb)，您需要使用您的帐户密钥进行身份验证。AppID 是即将被弃用的[Bing Search API 2.0](http://msdn.microsoft.com/en-us/library/dd900818.aspx)旧的身份验证方法。[您可以在您的帐户信息](https://datamarket.azure.com/account)页面上找到您的帐户密钥。

[您可以在这个问题](https://stackoverflow.com/questions/10844463/bing-search-api-and-azure/10844666#10844666)中看到实现当前 Bing 搜索 API 的示例。

# hibernate - JPA/JPQL：SELECT 子句中不允许使用 AS 标识符

> ID：11807738
> 
> 赞同：2
> 
> 时间：2012-08-04T10:13:51.873
> 
> 标签：hibernate, select, jpa, jpql

我有一个非常复杂的 JPQL 查询形式

```
 SELECT NEW com.domain.project.view.StandingsStatLine(
      ro.id                                                                                                 AS rid
    , cl.name                                                                                               AS team
    , te.ordinalNbr + 1                                                                                     AS nr
    , pa.wasWithdrawn                                                                                       AS wd

    , SUM(CASE WHEN paf.wasWithdrawn = FALSE AND paa.wasWithdrawn = FALSE AND scf.finalScore IS NOT NULL THEN 1 ELSE 0 END)                                           AS g
    , SUM(CASE WHEN paf.wasWithdrawn = FALSE AND paa.wasWithdrawn = FALSE AND scf.finalScore > sca.finalScore THEN 1 ELSE 0 END)                                      AS w
    , SUM(CASE WHEN paf.wasWithdrawn = FALSE AND paa.wasWithdrawn = FALSE AND scf.finalScore < sca.finalScore THEN 1 ELSE 0 END)                                      AS l
    , SUM(CASE WHEN paf.wasWithdrawn = FALSE AND paa.wasWithdrawn = FALSE AND scf.finalScore = 20 AND sca.finalScore =  0 THEN 1 ELSE 0 END)                          AS wbr
    , SUM(CASE WHEN paf.wasWithdrawn = FALSE AND paa.wasWithdrawn = FALSE AND scf.finalScore =  0 AND sca.finalScore = 20 THEN 1 ELSE 0 END)                          AS lbr
    , SUM(CASE WHEN paf.wasWithdrawn = FALSE AND paa.wasWithdrawn = FALSE AND scf.finalScore =  0 AND sca.finalScore =  0 THEN 1 ELSE 0 END)                          AS blbr

    , SUM(CASE WHEN paf.wasWithdrawn = FALSE AND paa.wasWithdrawn = FALSE AND scf.finalScore > sca.finalScore THEN 1 ELSE 0 END)
      + SUM(CASE WHEN paf.wasWithdrawn = FALSE AND paa.wasWithdrawn = FALSE AND scf.finalScore IS NOT NULL THEN 1 ELSE 0 END)
      - SUM(CASE WHEN paf.wasWithdrawn = FALSE AND paa.wasWithdrawn = FALSE AND scf.finalScore = 0 AND sca.finalScore = 20 THEN 1 ELSE 0 END)                         AS rp
    , CASE WHEN (  SUM(CASE WHEN paf.wasWithdrawn = FALSE AND paa.wasWithdrawn = FALSE AND scf.finalScore > sca.finalScore THEN 1 ELSE 0 END)
                 + SUM(CASE WHEN paf.wasWithdrawn = FALSE AND paa.wasWithdrawn = FALSE AND scf.finalScore IS NOT NULL THEN 1 ELSE 0 END)
                 - SUM(CASE WHEN paf.wasWithdrawn = FALSE AND paa.wasWithdrawn = FALSE AND scf.finalScore = 0 AND sca.finalScore = 20 THEN 1 ELSE 0 END)
                 - SUM(CASE WHEN paf.wasWithdrawn = FALSE AND paa.wasWithdrawn = FALSE AND scf.finalScore IS NOT NULL THEN 1 ELSE 0 END))
                   / SUM(CASE WHEN paf.wasWithdrawn = FALSE AND paa.wasWithdrawn = FALSE AND scf.finalScore IS NOT NULL THEN 1.0 ELSE 0.0 END) >= 0.0
           THEN ((  SUM(CASE WHEN paf.wasWithdrawn = FALSE AND paa.wasWithdrawn = FALSE AND scf.finalScore > sca.finalScore THEN 1 ELSE 0 END)
                 + SUM(CASE WHEN paf.wasWithdrawn = FALSE AND paa.wasWithdrawn = FALSE AND scf.finalScore IS NOT NULL THEN 1 ELSE 0 END)
                 - SUM(CASE WHEN paf.wasWithdrawn = FALSE AND paa.wasWithdrawn = FALSE AND scf.finalScore = 0 AND sca.finalScore = 20 THEN 1 ELSE 0 END)
                 - SUM(CASE WHEN paf.wasWithdrawn = FALSE AND paa.wasWithdrawn = FALSE AND scf.finalScore IS NOT NULL THEN 1 ELSE 0 END))
                   / SUM(CASE WHEN paf.wasWithdrawn = FALSE AND paa.wasWithdrawn = FALSE AND scf.finalScore IS NOT NULL THEN 1.0 ELSE 0.0 END))
           ELSE 0.0 END                                                                                                                                               AS nrp
    , CASE WHEN SUM(CASE WHEN paf.wasWithdrawn = FALSE AND paa.wasWithdrawn = FALSE AND scf.finalScore IS NOT NULL THEN 1 ELSE 0 END) > 0
           THEN  (SUM(CASE WHEN paf.wasWithdrawn = FALSE AND paa.wasWithdrawn = FALSE AND scf.finalScore > sca.finalScore THEN 1.0 ELSE 0.0 END)
                / SUM(CASE WHEN paf.wasWithdrawn = FALSE AND paa.wasWithdrawn = FALSE AND scf.finalScore IS NOT NULL THEN 1 ELSE 0 END))
           ELSE NULL END                                                                                                                                              AS wperc

    , SUM(CASE WHEN paf.wasWithdrawn = FALSE AND paa.wasWithdrawn = FALSE AND scf.finalScore IS NOT NULL THEN scf.finalScore ELSE 0 END)                              AS ptsf
    , SUM(CASE WHEN paf.wasWithdrawn = FALSE AND paa.wasWithdrawn = FALSE AND sca.finalScore IS NOT NULL THEN sca.finalScore ELSE 0 END)                              AS ptsa

    , MAX(CASE WHEN paf.wasWithdrawn = FALSE AND paa.wasWithdrawn = FALSE AND scf.finalScore NOT IN (0, 20) THEN scf.finalScore ELSE NULL END)                        AS hi
    , MAX(CASE WHEN paf.wasWithdrawn = FALSE AND paa.wasWithdrawn = FALSE AND scf.finalScore NOT IN (0, 20) THEN scf.game.id ELSE NULL END)                           AS higid
    , MIN(CASE WHEN paf.wasWithdrawn = FALSE AND paa.wasWithdrawn = FALSE AND scf.finalScore NOT IN (0, 20) THEN scf.finalScore ELSE NULL END)                        AS lo
    , MIN(CASE WHEN paf.wasWithdrawn = FALSE AND paa.wasWithdrawn = FALSE AND scf.finalScore NOT IN (0, 20) THEN scf.game.id ELSE NULL END)                           AS logid
    )
  FROM Club cl
    JOIN cl.teams te
    JOIN te.rosters ro
    JOIN ro.season se
    JOIN ro.participations pa
    JOIN pa.group gr
    JOIN gr.round rd
    JOIN rd.subCompetition sc
    JOIN sc.competition cn
    JOIN gr.games ga
    JOIN ga.scores scf
    JOIN ga.scores sca
    JOIN scf.roster rof
    JOIN sca.roster roa
    JOIN rof.participations paf
    JOIN roa.participations paa
  WHERE ...
  GROUP BY ...
  ORDER BY pa.wasWithdrawn, nrp DESC, w DESC, lbr, g DESC, cl.shorthand 
```

使用 Hibernate 4.x 运行它没有问题，但是 Eclipse Dali 几乎在构造函数表达式的每一行都显示 JPQL 错误。删除`... AS <identifier>`摆脱这些错误。

我在这里查看了 JPQL BNF [http://en.wikibooks.org/wiki/Java_Persistence/JPQL_BNF](http://en.wikibooks.org/wiki/Java_Persistence/JPQL_BNF)`AS` ，但在 SELECT 子句层次结构中找不到。

**问：**

这是特定于 Hibernate 的语法吗？

为什么 JPQL 不支持这个？

有时表达式会变得非常复杂，我想通过`AS`子句记录表达式的实际含义，特别是考虑到 JPQL 没有注释功能。这是 JPQL 恕我直言的一个真正缺陷。

此外，Hibernate 允许我在子句中引用这些`AS`es `ORDER BY`，这允许我重用上面的复杂语句。

也许我的表达可以缩短，但在其他情况/项目中复杂性仍然很高。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T17:02:20.137

找到了。

根据[http://en.wikibooks.org/wiki/Java_Persistence/JPQL_BNF#New_in_JPA_2.0](http://en.wikibooks.org/wiki/Java_Persistence/JPQL_BNF#New_in_JPA_2.0)上的 JPQL BNF， JPA 2.0 应该支持。请注意，倒数第二个示例。

这几乎回答了为什么 Eclipse Dali 显示 JPQL 验证错误的原始问题。好像是大理的问题。

# ember.js - 从“编辑”导航回“显示”后，Url 包含“未定义”而不是 id

> ID：11807742
> 
> 赞同：3
> 
> 时间：2012-08-04T10:14:10.680
> 
> 标签：ember.js, ember-old-router

我阅读了[Ember 应用程序结构](http://emberjs.com/guides/outlets)指南，现在我尝试使用 ember.js 创建一个简单的单页应用程序。

我的主页显示了一个包含 Post 对象列表的侧边栏。当我单击一个列表项时，在侧边栏的右侧我会显示所选项目的只读版本。这个版本有一个“编辑”按钮，可以编辑项目。编辑版本有一个“取消”链接，可以切换回只读版本。

我得到了这一切，但是，当导航回只读版本时，地址栏中的 url 没有正确更新。导航回我的只读版本时，我希望 url 从 'example.com/#posts/123/edit' 更改为 'example.com/#posts/123'，但我得到的是 ''example.com/ #posts/未定义'。

我试图在“取消”事件中调用 transitionTo 时提供上下文，但这不起作用。

如何在保持 url 指向正确的帖子 (example.com/#posts/123) 的同时导航回我的只读状态？

我的大部分代码与 ember 指南中的示例相同，我的路由器和“编辑”相关代码如下所示：

```
App.EditPostView = Em.View.extend({
  templateName: 'edit_post'
});

App.Post = DS.Model.extend({
  title: DS.attr('string'),
  body: DS.attr('string'),
  published: DS.attr('boolean')
});

App.Router = Em.Router.extend({
  enableLogging: true,
  location: 'hash',
  root: Em.Route.extend({
    index: Em.Route.extend({
      route: '/',
      redirectsTo: 'posts.index'
    })
  }),
  posts: Em.Route.extend({
  route: '/posts',  # example.com/#posts
  showPost: Em.Route.transitionTo('posts.show'),
  editPost: Em.Route.transitionTo('posts.edit'),
  index: Em.Route.extend({
    route: '/',
    connectOutlets: function(router) {
    router.get('applicationController').connectOutlet('posts', App.Post.find());
    }
  }),
  show: Em.Route.extend({
    route: '/:post_id', # example.com/#posts/123
    connectOutlets: function(router, post) {
    router.get('postsController').connectOutlet('post', post);
    }
  }),
  edit: Em.Route.extend({
    route: '/:post_id/edit', # example.com/#posts/123/edit
    connectOutlets: function(router, post) {
    router.get('postsController').connectOutlet({
      viewClass: App.EditPostView,
      controller: router.get('postController'),
      context: post
    });
    },
  }),
  cancel: function(router, event) {
    router.transitionTo('show'); # Expect this to use 'example.com/#posts/123' but instead it shows 'example.com/#posts/undefined'
  }
  })
});

# edit_post.handlebars:
  <form {{action save on="submit"}}>
  ...
  {{view Em.TextField valueBinding="title"}}
  {{view Em.TextArea valueBinding="body"}}
  ...
  <a {{action cancel}} class="btn">Cancel</a>
  </form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T19:51:11.357

您缺少`transitionTo`通话中的上下文。你应该有类似的东西：

```
showPost: function (router, event) {
  var post = event.context;
  Em.Route.transitionTo('posts.show', post);
},

editPost: function (router, event) {
  var post = event.context;
  Em.Route.transitionTo('posts.edit', post);
}, 
```

# wolfram-mathematica - CA 随机 3 色

> ID：11807744
> 
> 赞同：3
> 
> 时间：2012-08-04T10:14:21.520
> 
> 标签：wolfram-mathematica, cellular-automata

是否存在随机的元胞自动机规则（如规则 30）并具有 3 种颜色？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T06:40:08.930

这是一个研究问题——您必须对您发现的元胞自动机 (CA) 规则进行统计测试，以证明它是随机的。如果您想做这样的研究项目，请查看 [**Wolfram 科学暑期学校**](http://www.wolframscience.com/summerschool/)。

现在让我们看看哪些信息和工具可以帮助您入门。

首先，我会阅读“新型科学”（NKS）一书中的[**第 6 章：从随机性开始 - 第 5 节：第 3 类系统中的随机性以及周边章节，以便更好地理解该主题。**](http://www.wolframscience.com/nksonline/section-6.5)

我还会在 The Wolfram Demonstrations Project 中查看[**许多探索 3 色规则的免费应用程序。**](http://demonstrations.wolfram.com/search.html?query=three%20color%20cellular%20automata)

接下来，您可以从[**第 64 页**](http://www.wolframscience.com/nksonline/page-64#previous)找到的优秀候选人开始。按照该链接并阅读有关具有接缝随机行为的 3 色 CA 的图像说明。在线图书是免费的（您可能需要注册一次）。我还建议阅读第 62 - 70 页来解释这些图像。

另请[**参阅 Stephen Wolfram 的“元胞自动机的随机序列生成”**](http://www.stephenwolfram.com/publications/articles/ca/86-random/)。

如果您没有 Mathematica，那么 Wolfram|Alpha 可以提供大量有价值的信息。以下是 NKS 书中对 CA 的查询：[**规则 177**](http://www.wolframalpha.com/input/?i=k-3%20r-1%20totalistic%20rule%20177)、[**规则 912**](http://www.wolframalpha.com/input/?i=k-3%20r-1%20totalistic%20rule%20912)和[**规则 2040**](http://www.wolframalpha.com/input/?i=k-3%20r-1%20totalistic%20rule%202040)。不是 Wolfram|Alpha 给你的方式，例如，[**差异模式**](http://www.wolframscience.com/nksonline/page-949e-text)图像 - 高度发散（快速传播）意味着混乱和随机性：

[![在此处输入图像描述](../Images/468c694bc578dc06c8627e1140b1391c.png)](http://www.wolframalpha.com/input/?i=k-3%20r-1%20totalistic%20rule%202040)

如果您有[**Mathematica**](http://www.wolfram.com/mathematica/) - 很容易进化 CA（并进一步测试它们的随机属性，例如使用[**卡方检验**](http://mathworld.wolfram.com/Chi-SquaredTest.html)）。这就是您如何从 NKS 书中的图片中设置 3 个颜色范围 1 个总体 CA（您可以使用[**假设检验**](http://reference.wolfram.com/mathematica/guide/HypothesisTests.html)进一步挖掘）：

```
ArrayPlot[CellularAutomaton[{#, {3, 1}}, {{1}, 0}, 50], Mesh -> True, 
    PixelConstrained -> 7, ColorRules -> {0 -> White, 1 -> Red}, 
    Epilog -> Text[Style["Rule " <> ToString@#, Red, Bold, 25], {50, 340}]] & /@ 
{177, 912, 2040} // Column 
```

![在此处输入图像描述](../Images/b371d1953c585adc60cff68c475db6cf.png)

# c# - 会话变量未正确处理

> ID：11807748
> 
> 赞同：0
> 
> 时间：2012-08-04T10:14:45.970
> 
> 标签：c#, asp.net

我在 aspx 页面上有一个 AspxGriview，带有`id="grdManageFilterRoom"`. 我通过从数据库中获取一些数据来绑定这个网格。如果变量发生任何变化，`Session["grdManageFilterRoom"]`它会自动反映在`Session["tmpGrdManageFilterRoom"]`变量中，我不知道为什么会发生这种情况，我想避免这种行为。任何建议将不胜感激。

```
 Session["grdManageFilterRoom"] = NameIdPairs<Int32>.GetRooms(companyCode, companyPersonID);          
   grdManageFilterRoom.DataSource = Session["grdManageFilterRoom"];
   Session["tmpGrdManageFilterRoom"] = Session["grdManageFilterRoom"]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T10:19:04.460

这：

```
Session["tmpGrdManageFilterRoom"] = Session["grdManageFilterRoom"]; 
```

使两个会话变量都指向同一个对象（我猜该`GetRooms`方法返回引用类型），基本上无论您使用的是`Session["tmpGrdManageFilterRoom"]`还是`Session["grdManageFilterRoom"]`（因为它是同一个对象）。

如果想防止这种情况，那么您需要克隆这些对象。

# php - 在不安装 Zend 优化器的情况下运行 php 文件

> ID：11807749
> 
> 赞同：2
> 
> 时间：2012-08-04T10:15:00.477
> 
> 标签：php, javascript, zend-framework, localhost, zend-optimizer

我正在尝试在 localhost 上运行 php 文件，这些 php 文件是用 zend 编码的，我实际上不确定它为什么以及它有什么用途。我收到消息说要运行文件，您应该下载 Zend 优化器。

我的问题是我可以使用安装 Zend 优化器运行 php 文件吗？如果是，如何？，我需要对我的 php 文件进行哪些更改。或者我应该删除脚本目录中的一些模块/

谢谢迈克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T19:58:22.580

我的知识库中有一些关于 Zend Guard 的文档（请参阅底部的链接），但这里是关于您的问题的快速独家新闻。

没有解码器就无法运行代码，但解码器通常是免费的，并且安装说明随解码器一起提供。但是，php 文件的提供者可能已经包含了许可证密钥，因为他们希望您支付许可证费用。如果您没有许可证密钥，您将无法运行编码文件。您不能对文件进行任何更改，因为编码文件的完整性在运行时得到验证。您不必对现有的 php 文件进行任何更改，除非它们是使用另一个提供程序编码的。您可以并排运行编​​码和纯 php 文件。

如果您的 php 文件已使用 Zend Guard 编码，您将需要 Zend 的解码器。对于 PHP 到 5.2.x 版本，您将需要“Zend Optimizer”，对于 5.3.x，您需要“Zend Guard Loader”。Zend 可以免费使用这两种解码器，并且您只需在服务器上拥有一个模块文件，并将路径包含在您的 php 配置文件（通常是 php.ini）中。

对源文件进行编码通常是为了保护代码的知识产权，即任何人都不能只是复制/粘贴（窃取）其中的一部分。在许多情况下，这些应用程序也会出售并且需要许可证密钥。在这种情况下，php 文件中的某处是隐藏的许可证密钥和实际运行应用程序所需的正确密钥。由于代码基本上是预编译的，因此可能还会提高性能。

[Zend Guard/优化器](http://www.adrianworlddesign.com/Knowledge-Base/Web-Hosting/Zend-Guard)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T21:30:24.070

是的你可以。但是有一些条件。如果 PHP < 5.3 那么你需要 zend guard 来解码和 zend 优化器来编码。如果 PHP >= 5.3 那么你需要 zend guard 来解码和 zend guard loader 来编码。只有zend优化器是免费的，您可以在zend正式网站下载所有这些。有 2 个版本可供下载。一个 zip 版本和一个独立安装版本。

小心

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-04T10:17:23.447

如果您有 PHP 文件的源代码格式，那么您只能在没有 Zend Optimizer 的情况下运行它们。源表单是对软件进行更改的首选表单。

联系您从中获取这些编码文件的人，并询问这些文件的源格式。然后使用这些代替，您不需要使用 Zend Optimizer。

# sql - Oracle 10g 的 Sql 查询中需要说明

> ID：11807750
> 
> 赞同：0
> 
> 时间：2012-08-04T10:15:19.210
> 
> 标签：sql, group-by

我有一个名为 sites 的表，其中有多个同名记录。例如：

```
 Owner Name                      Owner Address    
            A                           XYZ
            A                           ABC
            B                           QWE
            B                           JKL
            C                           ZXC            
            B                           BNM 
```

我的 sql 查询应该返回

```
A1           XYZ
A2           ABC
B1           QWE
B2           JKL 
B3           BNM
C            ZXC 
```

有人可以给我写这样一个查询的指针吗？我在对具有相同所有者名称的记录进行分组时遇到问题，然后每次都为不同的所有者名称应用序列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T10:43:28.560

试试这个：如果您使用的是 SQL Server 2005 或更高版本

```
 ;with cte as (select *,ROW_NUMBER() over(partition by Owner_Name 
    order by Owner_Address desc) as row_num  from sites),
cte1 as(select Owner_Name
    from cte 
    group by Owner_Name
    having COUNT(*)>1)
    select case when C.Owner_Name in (select Owner_Name from cte1) 
       then Owner_Name+CAST(row_num as varchar(10)) 
       else Owner_Name end as Owner_Name,Owner_Address 
       from cte C
       order by Owner_Name 
```

**结果集**

![在此处输入图像描述](../Images/b4e6e58402b38779b541997f7f6de395.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T10:34:33.493

```
SELECT OwnerName + Convert(NVARCHAR(10), ROW_NUMBER() OVER (PARTITION BY OwnerName ORDER BY OwnerName)),
       OwnerAddress
FROM   dbo.OwnerTable 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T10:27:51.553

您没有提到您正在使用什么数据库系统（**SQL** = 结构化查询语言 - 这是一种查询语言 - 不是数据库系统....） - 但如果您使用的是 SQL Server 2005 或更新版本或任何其他 RDBMS支持 CTE（公用表表达式）和`ROW_NUMBER`函数，您可以使用：

```
;WITH data AS 
(
    SELECT OwnerName, OwnerAddress,
        RN = ROW_NUMBER() OVER(PARTITION BY OwnerName ORDER BY OwnerAddress)
    FROM dbo.YourTable
)
SELECT
    OwnerName + CAST(RN AS CHAR(1)), OwnerAddress
FROM Data 
```

作为输出返回：

![在此处输入图像描述](../Images/999f126ffb5bd14e5f8bb58f25570e0a.png)

# drupal - 使用 FTP 下载源代码后在本地主机上安装 Drupal 站点

> ID：11807752
> 
> 赞同：1
> 
> 时间：2012-08-04T10:15:43.897
> 
> 标签：drupal, drupal-6, drupal-modules

我一直在研究 Drupal 站点，并且非常了解如何在本地主机上安装 Drupal。但是，当我将现有源代码从主站点下载到我的系统（使用 FTP）时，尽管更改了 settings.php 文件中的数据库 url，但我无法安装该站点。

此外，当我运行 localhost/site/install 时，我能够完成安装，但是当我查看现有站点 ( localhost/site ) 时，我看不到任何内容。

我正在使用 Ubuntu 12.04 和 Druapl 6.x。

任何形式的帮助将不胜感激。

**更新：**解决了上述问题。感谢罗伯瑟南德斯。但是我下载的站点没有按应有的方式安装。sites/all 中的所有模块和主题都可用，但是没有按应有的方式进行配置。

**更新 2：**我就上述问题提出了一个新问题。请点击[链接](https://stackoverflow.com/questions/11818982/drupal-site-download-not-able-to-install-site-as-is)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T14:17:32.130

听起来像死亡的白屏。要找出问题的根源，请将以下三行添加到 index.php 文件的顶部（例如，从第 2 行开始）以强制将错误回显到屏幕：

```
error_reporting(E_ALL);
ini_set('display_errors', TRUE);
ini_set('display_startup_errors', TRUE); 
```

我正在四处走动，并打赌这是三件事之一：

1.  您的资源（内存、执行时间等）太少。
2.  您缺少 mod_rewrite 或另一个重要的 Drupal 依赖模块。
3.  您的远程服务器上的权限错误。如果您没有运行 SuExec，则这些文件可能需要归 www-data:www-data 所有。如果您是，它们将归您的 ftp/shell 用户所有。

仅供参考 - 要查看远程服务器上安装了哪些模块，请在新的 php 页面上执行 phpinfo()。您可以将以下内容复制到 phpinfo.php 并将其上传到您的网络服务器。

```
<?php
phpinfo();
?> 
```

# c# - 如何在 XNA 中制作 2d 照明系统？

> ID：11807754
> 
> 赞同：0
> 
> 时间：2012-08-04T10:16:20.457
> 
> 标签：c#, xna, hlsl, lighting

我花了一天时间熟悉 HlSL，以便为我的 2D xna 游戏中的照明系统编写着色器。

但是，我现在感到迷茫，因为我不知道如何编写着色器。我看过一些教程，但它们要么是在处理 3D 的东西，要么是在做太复杂的事情，或者只是难以理解/学习。

我只想要一个照明系统，它可以让光线与我想要的物体发生碰撞并投射阴影。

我该怎么做呢？

# iphone - 如何使用 IBAction 方法调用加速器方法？

> ID：11807760
> 
> 赞同：0
> 
> 时间：2012-08-04T10:17:02.250
> 
> 标签：iphone, objective-c, ios, accelerometer

我想添加一个启动按钮来启动加速度计，如何设置 IBAction 来做到这一点，在我使用的代码中：

```
-(void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration
{
    x.text = [NSString stringWithFormat:@"X is: %f", acceleration.x];
    y.text = [NSString stringWithFormat:@"Y is: %f", acceleration.y];
    z.text = [NSString stringWithFormat:@"Z is: %f", acceleration.z];
NSLog (@"Y = @%f", y.text);
}

-(IBAction)startPedometerPressed {
    [startButton accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration];

} 
```

由于未声明的标识符“加速度计”，这将返回错误。

我确定我调用该方法的方式有问题，但不确定是什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T10:33:42.893

您必须在 IBAction 函数中编写加速度计初始化代码。从 ViewDidLoad 中删除它。现在加速度计在按下按钮后工作。

```
-(IBAction)startPedometerPressed 
{
     [[UIAccelerometer sharedAccelerometer] setUpdateInterval:(1.0 / kAccelerometerFrequency)];
     [[UIAccelerometer sharedAccelerometer] setDelegate:self];
} 
```

希望这可以帮助。

# linq-to-entities - Linq to Entities 查询 - 查找具有相同字段值的所有记录

> ID：11807761
> 
> 赞同：0
> 
> 时间：2012-08-04T10:17:12.300
> 
> 标签：linq-to-entities

我正在使用以下 Linq to Entities Query，在唯一字段上查询一次，然后在单独的（外键）属性上查找所有匹配的记录：

```
public IEnumerable<User> getUsersInSameCentreAs(String userName)
{
    int? studyCentreId = (from u in _db.Users
                         where u.UserName == userName
                         select u.StudyCentreID).FirstOrDefault();
    return (from u in _db.Users
            where u.StudyCentreID == studyCentreId
            select u).ToList();
    } 
```

必须有一个干净/单一的查询，它只会查询一次数据库以获得相同的结果，但我对实体的 linq 知识让我失望 - 任何人都可以看到更好的解决方案。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T18:14:45.733

子查询将解决这个问题：

```
return (from u in _db.Users
        where u.StudyCentreID == (from u2 in _db.Users
                     where u2.UserName == userName
                     select u2.StudyCentreID).FirstOrDefault();
        select u).ToList(); 
```

# xml - XSLT - 剪切和粘贴

> ID：11807763
> 
> 赞同：4
> 
> 时间：2012-08-04T10:17:28.847
> 
> 标签：xml, xslt, xpath

如何在 xslt 中进行剪切和粘贴？假设我的xml是这样的，

```
 <root>
    <header>
      some nodes
    </header>
    <body>
    <p>
      some text
    <link>1</link>
      <note xml:id="c5-note-0001" numbered="no">text</note>
    </p>
    <p>
      some text
      <link>2</link>
      <figure>
        <note xml:id="c5-note-0003">text</note>
      </figure>
      <note xml:id="c5-note-0002">text</note>
    </p>
    <tabular>
      <note xml:id="c5-note-0004" numbered="no">text</note>
    </tabular>
    <p>
      some text
      <link>3</link>
      <notegroup>
        <note xml:id="c5-note-0006">text</note>
      </notegroup>
      <note xml:id="c5-note-0005">text</note>
    </p>
    <p>
      some text
      <link>4</link>
      <note xml:id="c5-note-0007">text</note>
    </p>
    </body>
  </root> 
```

我的预期输出是，

```
 <root>
    <header>
      some nodes
    </header>
    <body>
      <p>
        some text
        <link>1</link>
        <note xml:id="c5-note-0001" numbered="no">text</note>
      </p>
      <p>
        some text
        <link>2</link>
        <figure>
            <note xml:id="c5-note-0003">text</note>
        </figure>
        <notenum>1</notenum>
      </p>
      <tabular>
        <note xml:id="c5-note-0004" numbered="no">text</note>
      </tabular>
      <p>
        some text
        <link>3</link>
        <notegroup>
          <note xml:id="c5-note-0006">text</note>
        </notegroup>
        <notenum>2</notenum>
      </p>
      <p>
        some text
        <link>4</link>
        <notenum>3</notenum>
      </p>
      <newnote>
        <note xml:id="c5-note-0002">text</note>
        <note xml:id="c5-note-0005">text</note>
        <note xml:id="c5-note-0007">text</note>
      </newnote>
    </body>
  </root> 
```

我需要`newnote`在body标签结束之前创建一个新节点并将节点剪切并粘贴到该`note`节点中，并且需要生成一个`notenum`节点而不是那个节点`note`。

我只需要在`p`节点内执行此操作。如果`note`低于`tabular`，`figure`则`notegroup`无需执行任何操作。

如果`note`包含类似`numbered="no"`then 的属性，则无需执行任何操作。

我正在使用以下 xslt（只是为了显示我正在使用的模板匹配），

```
 <?xml version="1.0" encoding="utf-8"?>
   <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
      xmlns:msxsl="urn:schemas-microsoft-com:xslt" exclude-result-prefixes="msxsl"
  >
      <xsl:output method="xml" indent="yes"/>

      <xsl:template match="@* | node()">
          <xsl:copy>
              <xsl:apply-templates select="@* | node()"/>
          </xsl:copy>
      </xsl:template>
    <xsl:template match ="figure">
      some operation
    </xsl:template>
    <xsl:template match ="tabular">
      some operation
    </xsl:template>
    <xsl:template match ="notegroup">
      some operation
    </xsl:template>
  </xsl:stylesheet> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T10:55:04.333

*一般来说，在 XSLT 中将“剪切和粘贴”想象成实际的样子是有益的，即“复制和粘贴并删除原始文件”。*

> 我需要在正文标签结束之前创建一个新节点 newnote 并将注释节点剪切并粘贴到该节点中

您要做的是调整`<body>`元素，使其在其（可能以其他方式修改的）原始内容之后包含一个新`<newnote>`元素。`<body>`因此，为元素添加一个新模板：

```
<xsl:template match="body">
</xsl:template> 
```

如前所述，您希望基本上接管原始内容。由于原始内容可能仍被其他模板处理，我们将`<xsl:apply-tepmlates>`在这里使用：

```
<xsl:template match="body">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
</xsl:template> 
```

在原始内容之后，您要插入新元素：

```
<xsl:template match="body">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
    <newNote>
    </newNote>
</xsl:template> 
```

最后，在这个元素中，您需要所有描述的元素的副本`<note>`，这可以通过`<xsl:for-each>`循环来实现：

```
<xsl:template match="body">
    <xsl:copy>
        <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
    <newnote>
        <xsl:for-each select="p/note[not(@numbered = 'no')]">
            <xsl:copy-of select="."/>
        </xsl:for-each>
    </newnote>
</xsl:template> 
```

> 并且需要生成一个notenum节点而不是那个note。

这可以通过替换相应`<note>`元素的模板来完成：

```
<xsl:template match="p/note[not(@numbered = 'no')]">
    <notenum><xsl:value-of select="count(preceding::note[parent::p][not(@numbered = 'no')]) + 1"/></notenum>
</xsl:template> 
```

而是插入新`<notenum>`元素并使用`<xsl:value-of>`命令输出计算值。该值是`<note>`与您的限制相匹配的前面元素的数量加一。

# objective-c - Objective-C 中 Bing 搜索的 Windows Azure 身份验证

> ID：11807765
> 
> 赞同：1
> 
> 时间：2012-08-04T10:17:45.267
> 
> 标签：objective-c, api, authentication, encode, bing

在 12 年 8 月 1 日 Bing 将他们的搜索 api 修改为 Azure，如何在 Objective-C 中进行身份验证以使用 Azure 中的新 bing 搜索 api？

我最好的猜测是从迁移 word 文档中提供的 PHP 示例中学习！！[http://go.microsoft.com/fwlink/?LinkID=248077](http://go.microsoft.com/fwlink/?LinkID=248077)（天哪，你不能设置一个网页吗！）或者这个 Java 问题 - [Bing Search API Azure Marketplace Authentication in Java](https://stackoverflow.com/questions/11136936/bing-search-api-azure-marketplace-authentication-in-java)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T14:57:38.597

我正在使用 ASIHTTPRequest 通过以下代码进行身份验证。

```
NSString *queryString = [NSString stringWithFormat:@"'%@'", queryString];
queryString = [queryString urlEncodeUsingEncoding:NSUTF8StringEncoding]; //You'll have to implement url encoding method, preferably in a string category file

NSString *urlString = [NSString stringWithFormat:@"https://api.datamarket.azure.com/Data.ashx/Bing/Search/v1/Image?Query=%@&Market='en-US'&$top=50&$format=json", queryString];

ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:urlString] ];
[request setAuthenticationScheme:(NSString *)kCFHTTPAuthenticationSchemeBasic];
[request setUsername:@"YOUR_KEY_HERE"];
[request setPassword:@"YOUR_KEY_HERE"];
[request setDelegate:self];
[request startAsynchronous]; 
```

请注意，不需要 appID。只是将您的密钥作为用户名和密码传递。它正在成功获取数据。

但是，不能真正将数据转换为 NSString。尝试了每种编码，但无法从数据中获取字符串。最初的谷歌搜索说它是 UTF-8 编码的。但没有成功。

要使上述代码正常工作，您必须添加 ASIHTTP 框架。

另一件事是，我的猜测是使用这种格式的 base64 编码字符串 your_key:yourkey 也应该适用于基本身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-08T23:15:20.780

我只使用 NSUrlConnection 就能让它工作。你必须先base64encode

```
NSString *keyString = [NSString stringWithFormat:@"%@:%@", BING_SEARCH_API_KEY, BING_SEARCH_API_KEY];
NSData *plainTextData = [keyString dataUsingEncoding:NSUTF8StringEncoding];
NSString *base64String = [plainTextData base64EncodedString]; 
```

设置您的请求

```
NSMutableURLRequest *req = [[NSMutableURLRequest alloc] init];
[req setURL:[NSURL URLWithString:searchUrl]];
NSString *authValue = [NSString stringWithFormat:@"Basic %@", base64String];
[req setValue:authValue forHTTPHeaderField:@"Authorization"]; 
```

提出请求

```
NSError *error = [[NSError alloc] init];
NSHTTPURLResponse *response = nil;
NSData *data = [NSURLConnection sendSynchronousRequest:req returningResponse:&response error:&error]; 
```

查看有关如何形成searchUrl的文档，然后根据您在$format=中指定的格式处理数据（我使用的是json，所以我的看起来像）：

```
NSDictionary *json = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:&error]; 
```

我省略了错误处理，不要忘记通过检查响应和错误来添加它。

# c# - 从 Page 访问 MainWindow 的内容

> ID：11807773
> 
> 赞同：0
> 
> 时间：2012-08-04T10:18:28.543
> 
> 标签：c#, wpf, ribbon

我用 MS 功能区菜单构建了一个 WPF 应用程序。在主功能区窗口上，我定义了一个显示不同页面的框架。到目前为止一切正常。当我尝试在嵌入页面中获取或设置任何值时，我会使用以下命令：

例如，当我单击 MainWindow 中的 RibbonButton 时，在列表视图中移动光标。

```
((Page_Rules)MainFrame.Content).lvwTemplates.Items.MoveCurrentToLast(); 
```

现在我尝试反之亦然，从页面类访问 MainWindow 中的某些内容：

```
((MainWindow)Content).RibbonWindow.Group_References.IsEnabled = false; 
```

但是，这是行不通的。我收到以下异常

> 无法将“System.Windows.Controls.Grid”类型的对象转换为“MyApplication.MainWindow”类型

我想知道如何从我的任何嵌入式页面访问 MainWindow 中的任何控件

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T11:57:31.293

您可以使用 VisualTreeHelper.GetParent 来获取 MainWindow 类型的页面的 Visual Parent。
但请注意，使用正确的绑定，您不必直接访问控件。对于您的光标示例，您可以有一个 ListViewIndex 整数属性，该属性当然应该在更改时引发 PropertyChanged，并且当您单击 RibbonButton 时，您只需要更新 ListViewIndex。（在这种情况下，您可能还需要一个只读属性来给出列表中的项目数）。在包含 listView 的页面中，将 SelectedIndex 绑定到 ListViewIndex，您不必使用代码访问控件。

# java - 我不能在 Java 中使用数学方法

> ID：11807779
> 
> 赞同：2
> 
> 时间：2012-08-04T10:18:55.833
> 
> 标签：java, android, math

我需要在我的 Android 游戏中使用“hypot”方法，但是 eclipse 说没有这样的方法。这是我的代码：

```
import java.lang.Math;//in the top of my file
float distance = hypot(xdif, ydif);//somewhere in the code 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-04T10:22:13.353

首先，您根本不需要导入类型`java.lang`。已经有暗示`import java.lang.*;`了。但是导入一个类型*只会*通过它的简单名称使该类型可用。这并不意味着您可以在不指定类型的情况下引用方法。你有三个选择：

*   为您想要的每个功能使用静态导入：

    ```
    import static java.lang.Math.hypot;
    // etc 
    ```

*   使用通配符静态导入：

    ```
    import static java.lang.Math.*; 
    ```

*   显式引用静态方法：

    ```
    // See note below
    float distance = Math.hypot(xdif, ydif); 
    ```

另请注意，`hypot`返回`double`，而不是`float`- 所以您要么需要转换，要么制作`distance`：`double`

```
// Either this...
double distance = hypot(xdif, ydif);

// Or this...
float distance = (float) hypot(xdif, ydif); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T10:21:15.817

```
double distance = Math.hypot(xdif, ydif); 
```

或者

```
import static java.lang.Math.hypot; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T10:22:31.393

要在没有它们所在类的情况下使用静态方法，您必须静态导入它。将您的代码更改为：

```
import static java.lang.Math.*;
float distance = hypot(xdif, ydif);//somewhere in the code 
```

或这个：

```
import java.lang.Math;
float distance = Math.hypot(xdif, ydif);//somewhere in the code 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T10:39:18.487

**1.**首先java.lang.*已经包含，所以你不需要导入它。

**2.**要访问 Math 类中的方法，您可以执行以下操作...

**-**使用类名和点运算符访问**静态方法。**

`Math.abs(-10);`

**-**直接访问**静态方法，然后你需要导入如下。**

`import static java.lang.Math.abs;`

`abs(-10);`

# ios - iOS - 显示我的游戏应用程序的播放按钮

> ID：11807780
> 
> 赞同：0
> 
> 时间：2012-08-04T10:18:58.843
> 
> 标签：ios, airplay, mpvolumeview

我正在为孩子们创建 iPhone 应用程序，他们可以玩字母和数字。
我想提供airplay选项，这样在更大的屏幕上玩会更有趣。

我正在使用以下代码来显示播放按钮：

```
MPVolumeView *volumeView = [[MPVolumeView alloc] initWithFrame:CGRectMake(0, 0, 105, 40)];
[bottomPanel addSubview:volumeView]; 
```

我可以看到音量视图，但看不到播放按钮。有人可以帮我如何显示我的应用程序的播放按钮吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T13:48:50.447

如果在设备上运行并且在本地网络上使用 AirPlay 设备，您的代码片段应显示 AirPlay 按钮。

它在一个空的测试应用程序中对我有用。当我关闭 Wi-Fi（因此没有 AirPlay 设备）时，按钮消失了。

至于与外部屏幕的交互，请查看 2011 年 WWDC 的课程[以及 iOS 应用程序中](https://developer.apple.com/videos/wwdc/2011/?id=406)`UIScreen`的AirPlay 和 External Displays会话。但是，正如@Till 所提到的，您的用户可能必须从多任务栏中的 UI 启用屏幕镜像。

# wpf - 处理静态资源 ViewModel

> ID：11807782
> 
> 赞同：1
> 
> 时间：2012-08-04T10:19:13.120
> 
> 标签：wpf, mvvm, mvvm-light

我有一个简单的 ViewModel

```
 public class TestViewModel : ViewModelBase, IDisposable
    {

    public TestViewModel()
    {
        Messenger.Default.Register<string>(this, MessageHandling);
    }

    public void MessageHandling(string message)
    {
        System.Windows.MessageBox.Show(message);
    }
    public override void Cleanup()
    {
        Messenger.Default.Unregister(this);
        base.Cleanup();
    }
    } 
```

我像这样在我的 XAML 中使用它：

```
 <Window.Resources>
    <ResourceDictionary>
        <vm:TestViewModel x:Key="ViewModel"></vm:TestViewModel>
    </ResourceDictionary>
   </Window.Resources>
   <Grid DataContext="{Binding Source={StaticResource ViewModel}}">
   </Grid> 
```

任何人都可以帮助我们处理这个 ViewModel，通过处理我的意思是我应该订阅哪个事件来调用 VM 方法清理？因为如果我不进行清理，ViewModel 将保留在内存中并仍然处理消息。我希望我解释得当:)

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T10:26:25.020

首先，它取决于您何时要处理它。你没有说清楚。我首先以为您的意思是“当应用程序关闭时”，然后我会使用[退出](http://msdn.microsoft.com/en-us/library/system.windows.application.exit.aspx)事件。但我被你的说法激怒了

> 因为如果我不进行清理，ViewModel 将保留在内存中并仍然处理消息。我希望我解释得当

只有当您想要处理但您的应用程序仍需要运行时才会发生这种情况。如果您的应用程序关闭，则内存中没有任何内容，也不再处理任何消息。但不依赖它仍然是一个好习惯。

因此，如果您的意思是“当应用程序关闭时”，这就是您的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T11:26:39.913

有一个解释为什么即使您执行取消注册，Messenger 仍然会引起强引用，以及解决方法。

*   [http://mvvmlight.codeplex.com/discussions/235068](http://mvvmlight.codeplex.com/discussions/235068)

当 Unloaded 发生时，您的 FrameworkElement（“View”）可以在 ViewModel 中调用 Cleanup：

*   [在 MVVM Light 中注册 ViewModel 之外的消息？](https://stackoverflow.com/questions/7695045/registering-for-messages-outside-of-a-viewmodel-in-mvvm-light)

*   [何时在 MVVM Light 中处理 ViewModel](https://stackoverflow.com/questions/7036873/when-to-dispose-viewmodel-in-mvvm-light)

*   [http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.unloaded.aspx](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.unloaded.aspx)

# php - 俄罗斯网站的编码错误

> ID：11807783
> 
> 赞同：1
> 
> 时间：2012-08-04T10:19:20.953
> 
> 标签：php, image, character, cyrillic

我有一个在 MYSQL 数据库中存储数据的俄罗斯网站。我的数据库中有正确的俄语字符，它们在我的页面上也都很好，我的意思是当我查看页面的源代码时一切正常，但是名称包含俄语字符的图像不会显示在我的页面上，而是链接到图像正确：背景图像：url（../../images/content_image/ОНас_menu.png）；

但是当我按下此链接时，出现此错误：在此服务器上找不到请求的 URL“/images/content_image/%D0%9E%D0%9D%D0%B0%D1%81_menu.png”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T10:26:41.187

我相信[urlencode()](http://php.net/manual/en/function.urlencode.php)和[urldecode()](http://www.php.net/manual/en/function.urldecode.php)

是你的答案..

并且由于您没有发布任何代码，因此很难确定您需要在哪里实现它们。

# c - 在构建依赖项之前在 makefile 中回显

> ID：11807788
> 
> 赞同：4
> 
> 时间：2012-08-04T10:20:10.030
> 
> 标签：c, makefile

在我的 makefile 中，我想在构建目标的依赖项之前打印一条流程消息（类似于“Build $(PROJ_NAME) project...”）。例如，我的目标如下所示：

```
$(PROJ_NAME): $(OBJS)
    echo "Build $(PROJ_NAME) project..."
    $(LD) $(LDFLAGS) --gc-sections "-T$(MISC_DIR)/$(PROJ_NAME).ld" ... 
```

在 $(OBJS) 中构建依赖项后，执行此目标会打印我的构建消息。在创建目标之前是否有可能打印一条消息？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T10:27:04.497

您可以在目标文件之前添加另一个依赖项，该依赖项总是被创建的。像这样的东西：

```
$(PROJ_NAME): pre_build $(OBJS)
    $(LD) $(LDFLAGS) --gc-sections "-T$(MISC_DIR)/$(PROJ_NAME).ld" ...

.PHONY: pre_build
pre_build:
    @echo "Build $(PROJ_NAME) project..." 
```

这个`pre_build`目标将（在大多数正常情况下）总是在`$(OBJS)`.

# c# - 无法导入 WSDL 服务“targetNamespace 'urn:webservice' not found'

> ID：11807791
> 
> 赞同：2
> 
> 时间：2012-08-04T10:20:28.463
> 
> 标签：c#, php, visual-studio-2010, web-services, wsdl

过去几个小时，我一直在努力将 WSDL Web 服务导入 Visual Studio 2010。慢慢地，我一直在努力解决我的 WSDL，解决其他问题，直到遇到这个问题：

```
Warning 1   Custom tool warning: Cannot import wsdl:portType
Detail: An exception was thrown while running a WSDL import extension: 
System.ServiceModel.Description.XmlSerializerMessageContractImporter
Error: Schema with target namespace 'urn:WebService' could not be found.
XPath to Error Source:
//wsdl:definitions[@targetNamespace='urn:WebService']/wsdl:portType[@name='DataPort']   
C:\* blablabla *\WeGotchaService\Reference.svcmap   1   1   Gotcha! 
```

我已经尝试了谷歌可以为我提供的每一件小事，包括：

1.  禁用“在引用的程序集中重用类型”
2.  将集合类型设置为 system.collections.generic.list
3.  来回更改很大一部分属性。
4.  从其他人那里复制一个 WSDL 文件，只是为了看看它是否可以工作（它没有）

这是我的 .wsdl 文件：

```
<?xml version="1.0"?>
<definitions 
  name="WebService"
  targetNamespace="urn:WebService" 
  xmlns:tns="urn:WebService"  
  xmlns:xsd="http://www.w3.org/2001/XMLSchema" 
  xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" 
  xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" 
  xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" 
  xmlns="http://schemas.xmlsoap.org/wsdl/">

  <types>
     <xsd:schema xmlns="http://www.w3.org/2001/XMLSchema" targetNamespace="GetData">
      <xsd:element name="getCustomerID" type="xsd:int" />
      <xsd:element name="DataResponse" type="xsd:string" />
     </xsd:schema>
  </types>

  <message name="doGetCustomerID">
    <part name="ID" type="tns:getCustomerID" />
  </message>

  <message name="doDataResponse">
    <part name="return" type="tns:DataResponse" />
  </message>

  <portType name="DataPort">
    <operation name="getData">
      <input message="tns:doGetCustomerID" />
      <output message="tns:doDataResponse" />
    </operation>
  </portType>

  <binding name="DataBinding" type="tns:DataPort">
    <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http" />
    <operation name="getData">
      <soap:operation soapAction="urn:getDataAction" />
      <input>
        <soap:body use="encoded" namespace="urn:GetData"     encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" />
      </input>
      <output>
        <soap:body use="encoded" namespace="urn:GetData" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" />
      </output>
    </operation>
  </binding>

  <service name="WeGotchaService">
     <port name="DataPort" binding="tns:DataBinding">
       <soap:address location="http://localhost/weGotcha/servicehandler.php" />
     </port>
  </service>

</definitions> 
```

服务处理器.php

```
<?php
if(!extension_loaded("soap"))
{
  dl("php_soap.dll");
}

ini_set("soap.wsdl_cache_enabled", "0");
$server = new SoapServer("getPersonen.wsdl");

function getData($persoon_id)
{
    mysql_connect("localhost", "root", "");
    mysql_select_db('gotcha_dbtemplate');
    $sql = "SELECT * FROM lessen";
$sql = mysql_query($sql);
while($row = mysql_fetch_array($sql))
{
  $result[] = $row;
}
mysql_close();

  return $result;
}

$server->addFunction("getData");
$server->handle();
?> 
```

我不知道如何解决这个问题。还有一些其他错误，但这些是由于导入 portType 时遇到问题（绑定导入错误，因为 portType 不正常，端口错误，因为依赖于绑定）

我希望有人知道问题是什么，我不知道:(谢谢。

**更新：**我的 test.php 工作正常，它确实从 getData 方法输出结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-05T17:40:31.217

我已经改变了很多，我不记得了，现在它可以工作了：

```
<?xml version="1.0"?>
<definitions xmlns:tns="http://localhost/weGotcha/servicehandler/wsdl_service.wsdl"     xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:soapenc="http://schemas.xmlsoap.org/soap/encoding/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns="http://schemas.xmlsoap.org/wsdl/" name="WebService" targetNamespace="http://localhost/weGotcha/servicehandler/wsdl_service.wsdl">
<types>
    <xs:schema elementFormDefault="qualified" targetNamespace="http://localhost/weGotcha/servicehandler/wsdl_service.wsdl" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:tns="http://localhost/weGotcha/servicehandler/wsdl_service.wsdl">
        <xsd:element name="getCustomerID" type="xsd:int"/>
        <xs:complexType name="Persoon">
            <xs:sequence>
                <xs:element name="ID" type="xsd:int"/>
                <xs:element name="Voornaam" type="xsd:string"/>
                <xs:element name="Achternaam" type="xsd:string"/>
                <xs:element name="Adres" type="xsd:string"/>
                <xs:element name="Postcode" type="xsd:string"/>
                <xs:element name="Woonplaats" type="xsd:string"/>
                <xs:element name="Email_adres" type="xsd:string"/>
                <xs:element name="Telefoonnummer" type="xsd:string"/>
                <xs:element name="CBR_Kandidaatnummer" type="xsd:string"/>
                <xs:element name="Rijbewijs" type="xsd:int"/>
                <xs:element name="Laatste_keer_bewerkt" type="xsd:dateTime"/>
            </xs:sequence>
        </xs:complexType>
        <xs:complexType name="PersoonList">
            <xs:complexContent>
                <xs:restriction base="soapenc:Array">
                    <xs:sequence>
                        <xs:element name="Persoon" type="tns:Persoon" maxOccurs="unbounded"/>
                    </xs:sequence>
                </xs:restriction>
            </xs:complexContent>
        </xs:complexType>
    </xs:schema>
</types>
<message name="doGetCustomerID">
    <part name="CustomerID" type="xsd:int"/>
</message>
<message name="doGetPersoonDataResponse">
    <part name="return" type="tns:PersoonList"/>
</message>
<portType name="DataPort">
    <operation name="getPersoonData">
        <input message="tns:doGetCustomerID"/>
        <output message="tns:doGetPersoonDataResponse"/>
    </operation>
</portType>
<binding name="DataBinding" type="tns:DataPort">
    <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
    <operation name="getPersoonData">
        <soap:operation soapAction="urn:getDataAction"/>
        <input>
            <soap:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="urn:GetData"/>
        </input>
        <output>
            <soap:body use="encoded" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" namespace="urn:GetData"/>
        </output>
    </operation>
</binding>
<service name="WeGotchaService">
    <port name="DataPort" binding="tns:DataBinding">
        <soap:address location="http://localhost/weGotcha/servicehandler/servicehandler.php"/>
    </port>
</service> 
```

# android - 如何在 EditText 的 GroupView 上设置 setOnClickListener

> ID：11807792
> 
> 赞同：1
> 
> 时间：2012-08-04T10:20:31.903
> 
> 标签：android, android-layout, android-intent, android-widget

我想将包含在 LinearLayout 中的 EditText 数组插入到 ViewGroup 中，以便能够为所有 EditText 设置相同的 setonclicklistener。我该如何进行？

这是我尝试的代码：

```
public class Main extends Activity implements  OnClickListener {

ViewGroup group;;
View v1;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

group = (ViewGroup)findViewById(R.id.xsubLayout);
for (int i = 0, count = group.getChildCount(); i < count; ++i) {
v1 = group.getChildAt(i);
if (v1 instanceof EditText) {
((EditText)v1).setOnClickListener(this);
}
} 
```

和 OnClick 方法：

```
@Override
public void onClick(View v) {

if(v == v1 ){
InputMethodManager imm = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
imm.hideSoftInputFromWindow(v1.getWindowToken(), 0);

enableKeyboard();
}

} 
```

但这种方式行不通。在实践中继续看到 Android 键盘而不是我的自定义键盘

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T10:25:16.670

您必须为您的班级实施 onClickListener()。比如像这样。

```
 public class Main extends Activity implements  OnClickListener {

     EditText etText;

     @Override
     public void onCreate(Bundle savedInstanceState) {
     super.onCreate(savedInstanceState);
     setContentView(R.layout.main);

     etText = (EditText)findViewById(R.id.yourEditTextId);
     btnRemove.setOnClickListener(this)
    }

public void onClick(View view) {
    // TODO Auto-generated method stub
   // Here you can perform same task for all the EditText.

}
  }
 } 
```

# android - 调用 requestFocus 时 Behavior 的 Gallery 崩溃

> ID：11807793
> 
> 赞同：1
> 
> 时间：2012-08-04T10:20:47.940
> 
> 标签：android, crash, request, android-gallery

根据画廊的位置，一个或另一个编辑文本将获得焦点。虽然我可以做到，但行为的画廊崩溃：当画廊运行一个位置并将焦点设置在编辑文本上时，画廊的速度崩溃。似乎 Gallery 太慢了，无法按时收到请求。

我没有找到任何关于它的重要信息。

```
galleryView.setOnItemSelectedListener(new AdapterView.OnItemSelectedListener() {
    public void onItemSelected(
            @SuppressWarnings("rawtypes") AdapterView adapterView,
            View view, int pos, long l) {

        if (pos == 0) {
            pie_foto_1.post(new Runnable() {
                public void run() {
                    pie_foto_1.requestFocus();
                }
            });
        }

        if (pos == 1) {
            pie_foto_2.post(new Runnable() {
                public void run() {
                    pie_foto_2.requestFocus();
                }
            });
        }

        if (pos == 2) {

            pie_foto_3.post(new Runnable() {
                public void run() {
                    pie_foto_3.requestFocus();
                }
            });

            pie_foto_1.setVisibility(View.INVISIBLE);
            pie_foto_2.setVisibility(View.INVISIBLE);
            pie_foto_3.setVisibility(View.VISIBLE);

        }
    }

    public void onNothingSelected(
            @SuppressWarnings("rawtypes") AdapterView adapterView
    ) {
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T00:58:15.007

画廊需要更多的时间来获得它的新位置。所以我在 Gallery 改变位置之前放了一个延迟，以获得一个很好的过渡。

```
 else if (pos == 1)
                                {
                                    Runnable mMyRunnable = new Runnable() {
                                        public void run() {
                                            pie_foto_1.post(new Runnable() {
                                                public void run() {
                                                    pie_foto_2.requestFocus();
                                                    // headline.clearFocus();

                                                }
                                            });
                                        }
                                    };

                                    Handler myHandler = new Handler();
                                    myHandler.postDelayed(mMyRunnable, 100);
                                } 
```

# d - Dlist：在 foreach 循环中使用 stableLinearRemove

> ID：11807794
> 
> 赞同：0
> 
> 时间：2012-08-04T10:20:51.033
> 
> 标签：d

我编写了以下代码，但它没有给出正确的结果（例如，如果您输入 [-1,-1]，它会返回 [-1,-1,-1]。

```
import std.stdio, std.range, std.container, std.algorithm;

DList!T strandSort(T)(DList!T list) {
    static DList!T merge(DList!T left, DList!T right) {
        DList!T res;
        while (!left.empty && !right.empty) {
            if (left.front <= right.front) {
                res.insertBack(left.front);
                left.removeFront();
            } else {
                res.insertBack(right.front);
                right.removeFront();
            }
        }
        res.insertBack(left[]);
        res.insertBack(right[]);
        return res;
    }

    DList!T result, sorted;

    while (!list.empty) {
        sorted.clear();
        sorted.insertBack(list.front);
        list.removeFront();
        foreach (item; list) {
            if (sorted.back <= item) {
                sorted.insertBack(item);
                list.stableLinearRemove(list[].find(item).take(1)));
            }
        }
        result = merge(sorted, result);
    }

    return result;
}

void main() {
    auto lst = DList!int([-1,-1]);
    foreach (e; strandSort(lst))
        writef("%d ", e);
} 
```

有时，stableLinearRemove 不会从列表中删除该项目。问题是，这是我的代码中的错误，还是 Phobos 中的错误？

另见[Rosettacode.org上的讨论](http://rosettacode.org/wiki/Talk%3aSorting_algorithms/Strand_sort)

**编辑**：我怀疑它是由 removeFront 引起的。当删除第一个节点时，它不会将第二个节点的 prev 节点指针设置为 null。当被linearRemove从列表中移除的项目恰好是第一个节点时，它不会被移除。删除功能检查“之前”和“之后”节点，“之前”仍然设置。如果我这样写，它确实有效：

```
if (sorted.back <= item) {
    sorted.insertBack(item);
    if (list.front == item)
        list.removeFront();
    else 
        list.stableLinearRemove(list[].find(item).take(1)));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-26T04:03:37.930

你是对的，这绝对是 removeFront 中的一个错误。

尽管我可能会指出，即使它应该是有效的，通过 foreach 删除迭代元素也不会有效。你需要一个范围的句柄。考虑：

```
auto rng = list[];
while(!rng.empty) {
    auto item = rng.front;
    if(sorted.back <= item) {
        sorted.insertBack(item);
        auto rng2 = rng.save();
        rng.popFront();
        list.stableLinearRemove(rng2.take(1)); // O(1) removal!
    }else{
        rng.popFront();
    }
} 
```

呃，好吧。鉴于该错误，以上可能不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T16:02:50.587

我认为这不是 Phobos 中的错误，而是一个陷阱。如果它可能是列表中的第一个元素，则不应依赖 linearRemove 来删除它。首先检查并使用 removeFront。也更有效率。

在上述情况下，更好的解决方案是复制列表：

```
DList!T result, sorted, leftover;

while (!list.empty) {
    leftover.clear();
    sorted.clear();
    sorted.insertBack(list.front);
    list.removeFront();
    foreach (item; list) {
        if (sorted.back <= item)
            sorted.insertBack(item);
        else
            leftover.insertBack(item);
    }
    result = merge(sorted, result);
    list = leftover;
} 
```

# php - 每 4 个字符后添加空格

> ID：11807796
> 
> 赞同：70
> 
> 时间：2012-08-04T10:21:08.393
> 
> 标签：php

我想在每个第 4 个字符之后在某些输出中添加一个空格，直到字符串结尾。我试过了：

```
$str = $rows['value'];
<? echo substr($str, 0, 4) . ' ' . substr($str, 4); ?> 
```

这让我在前 4 个字符之后有了空格。

我怎样才能让它在每 4 次之后显示？

* * *

## 回答 #1

> 赞同：103
> 
> 时间：2012-08-04T10:25:42.830

您可以使用[`chunk_split` *^([文档])*](http://php.net/manual/en/function.chunk-split.php)：

```
$str = chunk_split($rows['value'], 4, ' '); 
```

[**演示**](http://ideone.com/WoGKa)

如果字符串的长度是四的倍数，但您不想要尾随空格，则可以将结果传递给[`trim`](http://php.net/manual/en/function.trim.php).

* * *

## 回答 #2

> 赞同：62
> 
> 时间：2014-07-01T18:17:39.937

Wordwrap 完全符合您的要求：

```
echo wordwrap('12345678' , 4 , ' ' , true ) 
```

将输出：1234 5678

如果你想在每第二个数字后面加一个连字符，把“4”换成“2”，把空格换成连字符：

```
echo wordwrap('1234567890' , 2 , '-' , true ) 
```

将输出：12-34-56-78-90

[参考 - 自动换行](http://php.net/manual/en/function.wordwrap.php)

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-04T10:23:59.420

你见过这个叫做 wordwrap 的函数吗？ [http://us2.php.net/manual/en/function.wordwrap.php](http://us2.php.net/manual/en/function.wordwrap.php)

这是一个解决方案。像这样开箱即用。

```
<?php
$text = "Thiswordissoverylong.";
$newtext = wordwrap($text, 4, "\n", true);
echo "$newtext\n";
?> 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2018-05-15T05:26:02.990

这是长度不是 4 的倍数（在我的情况下为 5）的字符串示例。

```
function space($str, $step, $reverse = false) {

    if ($reverse)
        return strrev(chunk_split(strrev($str), $step, ' '));

    return chunk_split($str, $step, ' ');
} 
```

利用 ：

```
echo space("0000000152748541695882", 5); 
```

> 结果：00000 00152 74854 16958 82

反向模式使用（“BVR 代码”用于瑞士计费）：

```
echo space("1400360152748541695882", 5, true); 
```

> 结果：14 00360 15274 85416 95882

**编辑** *2021-02-09*

对于 EAN13 条形码格式也很有用：

```
space("7640187670868", 6, true); 
```

> 结果：7 640187 670868

简短的语法版本：

```
function space($s=false,$t=0,$r=false){return(!$s)?false:(($r)?trim(strrev(chunk_split(strrev($s),$t,' '))):trim(chunk_split($s,$t,' ')));} 
```

希望它可以帮助你们中的一些人。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-04T10:39:23.770

单线：

```
$yourstring = "1234567890";
echo implode(" ", str_split($yourstring, 4))." "; 
```

这应该给你作为输出：
1234 5678 90

就是这样：D

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-08-04T10:26:14.383

途中将拆分为 4 个字符的块，然后将它们再次连接在一起，每个部分之间有一个空格。

如果最后一个块正好有 4 个字符，从技术上讲这会错过在最后插入一个字符，因此我们需要手动添加一个（[Demo](http://codepad.org/PJ3LWKb0)）：

```
$chunk_length = 4;
$chunks = str_split($str, $chunk_length);
$last = end($chunks);
if (strlen($last) === $chunk_length) {
    $chunks[] = '';
}
$str_with_spaces = implode(' ', $chunks); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-04T10:28:05.953

该功能`wordwrap()`基本上是相同的，但是这也应该起作用。

```
$newstr = '';
$len = strlen($str); 
for($i = 0; $i < $len; $i++) {
    $newstr.= $str[$i];
    if (($i+1) % 4 == 0) {
        $newstr.= ' ';
    }
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-04T10:25:45.913

PHP3 兼容：

尝试这个：

```
$strLen = strlen( $str );
for($i = 0; $i < $strLen; $i += 4){
  echo substr($str, $i, 4) . ' ';
} 
unset( $strLen ); 
```

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2015-06-15T19:15:14.043

```
StringBuilder str = new StringBuilder("ABCDEFGHIJKLMNOP");
int idx = str.length() - 4;
while (idx > 0){
  str.insert(idx, " ");
  idx = idx - 4;
}
return str.toString(); 
```

说明，此代码将从右到左添加空格：

```
 str = "ABCDEFGH" int idx = total length - 4; //8-4=4
    while (4>0){
        str.insert(idx, " "); //this will insert space at 4th position
        idx = idx - 4; // then decrement 4-4=0 and run loop again
    } 
```

最终输出将是：

```
ABCD EFGH 
```

# android - 从不同的活动访问服务/线程

> ID：11807800
> 
> 赞同：1
> 
> 时间：2012-08-04T10:21:34.207
> 
> 标签：android

我正在编写一个蓝牙远程控制应用程序来控制我的蓝牙机器人，但我很难理解 Android 应用程序的工作流程。我知道我想要什么，但这并不容易。其他反应并不令人满意。

这是我想要的粗略应用程序布局：

![在此处输入图像描述](../Images/890320363e8c159196405c560e94fb85.png)

如果您对如何做这件事有更好的想法，我很乐意考虑。

主要是我的问题是从主活动的连接方法和控制活动访问连接线程/服务（无论名称是什么），我如何传递引用？我知道在应用程序的子活动中主要活动可能会消失，所以我可能不得不通过引用传递`getExtra()`，但它只需要一个`String`变量......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T11:00:43.303

您可能要考虑的一种方法是使用[绑定服务。](http://developer.android.com/guide/components/bound-services.html)这可以返回一个**IBinder**接口，允许访问服务的公共方法。您可以使您的任何活动绑定到服务，从而向/从服务传递/检索数据。

如果您需要服务立即与活动通信（例如丢失连接），则服务可以使用**sendBroadcast**通知已注册**BroadcastReceiver**的活动以侦听广播中发送的意图。

# jquery - jQuery oembed api 关键问题

> ID：11807803
> 
> 赞同：0
> 
> 时间：2012-08-04T10:21:54.460
> 
> 标签：jquery, embed

首先真的很抱歉，如果它是一个愚蠢的问题。

我从这里下载了 jquery oembed [http://code.google.com/p/jquery-oembed/](http://code.google.com/p/jquery-oembed/)

我用了很多次都没有问题，直到今天。

我收到了一个以前从未出现过的错误。consolde说加载资源失败：服务器响应状态为403（禁止）（链接）

我去看看有什么问题，将给定的链接从控制台复制到浏览器，我收到了这条消息

```
Embedly has blocked your client ip. Sign up for an API key at http://embed.ly 
```

我以前从未经历过这种情况，并且多次使用该插件。我从未在 embedly 上注册过，也从未收到此错误消息

有人可以告诉为什么现在是这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T12:49:20.297

是的，因为嵌入是 trouh embed.ly 使用海星 oembed 相同的唯一区别（如果我没记错的话）它没有嵌入 trouh embed.ly。

[https://github.com/starfishmod/jquery-oembed-all](https://github.com/starfishmod/jquery-oembed-all)

PS对不起，如果我记错了，我用了很长时间

编辑

哦，对不起，我忘了他们改变了，打开插件。找到这条线`defaultOEmbedProvider: "embed.ly",`，它必须在第 59 行或附近，并将其更改为`defaultOEmbedProvider: "none"`这将使其在本机工作

# c++ - std::getline 在遇到 eof 时抛出

> ID：11807804
> 
> 赞同：12
> 
> 时间：2012-08-04T10:21:58.593
> 
> 标签：c++, fstream, eof, getline

`std::getline`当它得到一个`eof`. 这就是我正在做的事情。

```
std::ifstream stream;
stream.exceptions(std::ifstream::failbit|std::ifstream::badbit);
try{
  stream.open(_file.c_str(), std::ios_base::in);
}catch(std::ifstream::failure e){
  std::cout << "Failed to open file " << _file.c_str() << " for reading" << std::endl;
}
while(!stream.eof()){
  std::string buffer = "";
  std::getline(stream, buffer);
  //process buffer
  //I do also need to maintain state while parsing
} 
```

在上面的代码`getline`中抛出异常，因为它得到`eof` 如何处理这种情况？

## 编辑

```
std::string buffer = "";
while(std::getline(stream, buffer)){
    //also causes getline to hit eof and throw
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-04T11:05:44.860

您在代码的最开头激活流的异常处理：

```
stream.exceptions(std::ifstream::failbit|std::ifstream::badbit); 
```

现在，如果浮点值、整数或字符串等格式化数据的提取失败，它将设置失败位：

```
eofbit 表示输入操作已到达结束
          输入序列；
failbit 指示输入操作未能读取预期的
          字符，或者输出操作未能生成
          想要的字符。
```

虽然`getline(stream,buffer)`确实会设置`eofbit`它是否到达文件末尾，但它也会设置故障位，因为无法提取所需的字符（一行）。

在循环周围包装另一个 try-catch-block 或禁用故障位异常。

### 例子：

```
#include <iostream>
#include <fstream>

int main(){
  std::ifstream stream("so.cc");
  stream.exceptions(std::ifstream::failbit|std::ifstream::badbit);
  std::string str;

  try{
    while(std::getline(stream, str));
  }catch(std::ifstream::failure e){
    std::cerr << "Exception happened: " << e.what() << "\n"
      << "Error bits are: "
      << "\nfailbit: " << stream.fail() 
      << "\neofbit: " << stream.eof()
      << "\nbadbit: " << stream.bad() << std::endl;    
  }
  return 0;
} 
```

结果：

```
发生异常：basic_ios::clear
错误位是：
故障位：1
eofbit: 1
坏比特：0
```

请注意，两者**都已** 设置。`eofbit``failbit`

也可以看看：

*   [`std::ios_base::iostate`](http://en.cppreference.com/w/cpp/io/ios_base/iostate)
*   第 27.5.3.1.5 节中的表 124（见上文）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-03-26T13:30:44.003

正如您所说，当流当前位于文件末尾的空白行时调用 getline 将同时设置 eofbit （因为它到达文件末尾）和 failbit （因为无法提取任何内容，甚至行分隔符） .

因此，如果您已将流设置为在设置失败位时引发异常，则在读取该空白行时会引发异常。

为了防止这种情况，您可以在调用 getline 之前查看流中的下一个字符：

```
std::string buffer = "";
while(stream.peek() != EOF && std::getline(stream, buffer)){
    //do something with the buffer
} 
```

# java - 有没有办法安全地将线程作为参数传递？

> ID：11807810
> 
> 赞同：0
> 
> 时间：2012-08-04T10:22:43.597
> 
> 标签：java, android, multithreading, thread-safety

我有一个android游戏的开始。它有一个`GameLoop`（线程）类来跟踪 fps 值和一个`GameView`（表面视图），它使一个`GameLoop`对象实例化并设置它运行等等。现在我有一个单独的`FpsText`对象，它知道如何将自己绘制到屏幕上，但要更新我需要做类似的事情`fpsText.setText(gameloop.getFps());`

如果我在`GameView`课堂上这样做，这不是问题，但我想尝试拥有一个`FpsText`可以自行更新的对象。我对线程没有任何其他经验，我认为它可能会适得其反，但我仍然尝试将`fpsText` 引用`gameloop`作为参数传递。不出所料，我每次运行应用程序时都会得到不同的不需要的结果，所以我想知道您认为处理这种情况的最佳方法是什么？

作为`fpsText`在`GameView`i 中更新的替代方法，总是可以将 gameloop 类中的 fps 值公开，但我知道这是不好的做法！听起来都不是好的解决方案，也许有更好的方法？

作为参考，这是我的游戏循环，RedOrav 建议的第二个更改已实现：

```
package biz.hireholly.engine;

import android.graphics.Canvas;
import android.util.Log;
import android.view.SurfaceHolder;
import biz.hireholly.gameplay.FpsText;

import java.util.ArrayList;

/**
 * The GameLoop is a thread that will ensure updating and drawing is done at set intervals.
 * The thread will sleep when it has updated/rendered quicker than needed to reach the desired fps.
 * The loop is designed to skip drawing if the update/draw cycle is taking to long, up to a MAX_FRAME_SKIPS.
 * The Canvas object is created and managed to some extent in the game loop,
 * this is so that we can prevent multiple objects trying to draw to it simultaneously.
 * Note that the gameloop has a reference to the gameview and vice versa.
 */

public class GameLoop extends Thread {

    private static final String TAG = GameLoop.class.getSimpleName();
    //desired frames per second
    private final static int MAX_FPS = 30;
    //maximum number of drawn frames to be skipped if drawing took too long last cycle
    private final static int MAX_FRAME_SKIPS = 5;
    //ideal time taken to update & draw
    private final static int CYCLE_PERIOD = 1000 / MAX_FPS;

    private SurfaceHolder surfaceHolder;
    //the gameview actually handles inputs and draws to the surface
    private GameView gameview;

    private boolean running;
    private long beginTime = 0; // time when cycle began
    private long timeDifference = 0; // time it took for the cycle to execute
    private int sleepTime = 0; // milliseconds to sleep (<0 if drawing behind schedule) 
    private int framesSkipped = 0; // number of render frames skipped

    private double lastFps = 0; //The last FPS tracked, the number displayed onscreen
    private ArrayList<Double> fpsStore = new ArrayList<Double>(); //For the previous fps values
    private long lastTimeFpsCalculated = System.currentTimeMillis(); //used in trackFps
    FpsText fpsText;

    public GameLoop(SurfaceHolder surfaceHolder, GameView gameview, FpsText fpsText) {
        super();
        this.surfaceHolder = surfaceHolder;
        this.gameview = gameview;
        this.fpsText = fpsText;
    }

    public void setRunning(boolean running) {
        this.running = running;     
    }
    @Override
    public void run(){

        Canvas c;

        while (running) {
            c = null;
            //try locking canvas, so only we can edit pixels on surface
            try{
                c = this.surfaceHolder.lockCanvas();
                //sync so nothing else can modify while were using it
                synchronized (surfaceHolder){ 

                    beginTime = System.currentTimeMillis();
                    framesSkipped = 0; //reset frame skips

                    this.gameview.update();
                    this.gameview.draw(c);

                    //calculate how long cycle took
                    timeDifference = System.currentTimeMillis() - beginTime;
                    //good time to trackFps?
                    trackFps();

                    //calculate potential sleep time
                    sleepTime = (int)(CYCLE_PERIOD - timeDifference);

                    //sleep for remaining cycle
                    if (sleepTime >0){
                        try{
                            Thread.sleep(sleepTime); //saves battery! :)
                        } catch (InterruptedException e){}
                    }
                    //if sleepTime negative then we're running behind
                    while (sleepTime < 0 && framesSkipped < MAX_FRAME_SKIPS){
                        //update without rendering to catch up
                        this.gameview.update();
                        //skip as many frame renders as needed to get back into
                        //positive sleepTime and continue as normal
                        sleepTime += CYCLE_PERIOD;
                        framesSkipped++;
                    }

                }

            } finally{
                //finally executes regardless of exception, 
                //so surface is not left in an inconsistent state
                if (c != null){
                    surfaceHolder.unlockCanvasAndPost(c);
                }
            }
        }

    }

    /* Calculates the average fps every second */
    private void trackFps(){
        synchronized(fpsStore){
            long currentTime = System.currentTimeMillis();

            if(timeDifference != 0){
                fpsStore.add((double)(1000 / timeDifference));
            }
            //If a second has past since last time average was calculated,
            // it's time to calculate a new average fps to display
            if ((currentTime - 1000) > lastTimeFpsCalculated){

                for (Double fps : fpsStore){
                lastFps += fps;
                }

                lastFps /= fpsStore.size();

                synchronized(fpsText){ //update the Drawable FpsText object
                fpsText.setText(String.valueOf((int)lastFps));
                }

                lastTimeFpsCalculated = System.currentTimeMillis();

                //Log.d("trackFPS()", " fpsStore.size() = "+fpsStore.size()+"\t"+fpsStore.toString());
                fpsStore.clear();

            }
        }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T11:20:19.637

你不想要的结果是什么？公开你的 fps 变量和设置 getfps() 就获取你的 fps 值而言是完全相同的事情，并且在你的 GameView 中修改 fps 值永远不会有任何意义。

我怀疑您在 GameLoop 中所做的是在几秒钟之间修改您的 fps 变量，即获取您的 GameView 可能也在读取的中间值。我建议仅每秒修改一次 fps，并在两者之间保留时间变量以进行计算。假设你一开始有 0 fps。GameLoop 进行计算，一旦过了一秒，您就已经收集了它处理的帧数和时间（1 秒）。在那之前，无论 GameLoop 在做什么，GameView 始终读取 0。在那一秒之后，假设你完成了 60 fps，fps 变量被修改，并且直到下一秒都保持不变。因此，在接下来的一秒中，即使 GameView 对您的变量进行了更多的读取，它也总是会得到 60。

```
// Inside GameLoop

private int fps; // Variable you're going to read
private int frameCount; // Keeps track or frames processed
private long lastUpdated;

while(running) {

   if(System.currentTimeMillis() - lastUpdated > 1000) { // 1 second elapsed
      fps = frameCount;
      frameCount = 0;
   }
   frameCount++;
}

public int getFps() {
   return fps;
} 
```

另一种方法是将 fpsText 的引用传递给 GameLoop，它只会在每一秒过去后修改它。这样，您的渲染线程只需要担心渲染，而您的 GameLoop 只需担心每秒帧数。但是请记住，您可能会遇到竞争条件（在 GameLoop 中的 setText() 就在您的渲染方法中间），您不必担心其他方式。渲染和修改时将 fpsText 对象括在同步括号中应该可以解决问题。

让我们知道这是否有帮助！

# web-services - Glassfish Web 服务监控

> ID：11807813
> 
> 赞同：0
> 
> 时间：2012-08-04T10:23:09.763
> 
> 标签：web-services, glassfish, tcpmon

我正在尝试监视我在 Java 中开发并部署在 Glassfish 上的 Web 服务的请求/响应信封。我有一个简单的示例 java 客户端，它使用 wsimport 从 wsdl 生成的绑定。

我尝试了各种工具/实用程序来监控交换（WireShark、TCPMon 和 TCPMonitor for Eclipse），但每个都显示完全相同的东西……调用 glassfish 来检索 wsdl，仅此而已！我知道我的请求正在通过，因为数据库正在更新。但是，我看不到导致这种情况的实际请求/响应信封。

我觉得我在这里缺少一些基本的东西。请求/响应是否使用不同的端口？wsdl 说该服务在 8080 上，这是我正在监视的同一个端口。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-15T11:27:45.150

你有两个选择：

*   在 Wireshark 过滤器中仅指定 IP 地址，不指定端口，您应该会看到所有流量

*   在您的客户端中添加这部分代码，它将捕获 SOAP 信封：

代码：

```
SOAPMessage msg = ((SOAPMessageContext) context).getMessage ();
SOAPPart sp = msg.getSOAPPart ();
SOAPEnvelope env = sp.getEnvelope (); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-15T10:09:24.307

我有一个类似的问题，唯一的区别是 WS 部署在 jboss_4.2.3 中。我设法使用wireshark解决了这个问题。您可以在[此处](https://stackoverflow.com/questions/14850672/capture-soap-requests-responses-on-specific-host-windows-server/14891518#14891518)找到有关解决方案的更多信息。

关于你的其余问题：

*   通常调用来自 8080，但响应返回到不同的端口（每次另一个端口）。

# android - Android - 将文本视图定位在中心

> ID：11807818
> 
> 赞同：1
> 
> 时间：2012-08-04T10:23:52.003
> 
> 标签：android, xml, android-layout

我是android编程的新手。我正在制作一个应用程序，在这个应用程序中，我想要屏幕中央的文本和按钮。

但我不知道该怎么做。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T10:28:52.887

试试这个布局

```
<LinearLayout android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    android:gravity="center">
    <TextView android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        andriod:text="Test"/>
    <Button android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        andriod:text="Button"/>
</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T10:28:59.537

是的，如果您的父布局是 **相对布局**，您可以这样做。

例子是：

```
<RelativeLayout
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<Button
android:id="@+id/mBtn"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:text="I am a Button!"
android:layout_centerInParent="true" />

 <TextView
 android:id="@+id/mTxt"
 android:layout_width="wrap_content"
 android:layout_height="wrap_content"
 android:layout_centerHorizontal="true"
 android:text"Some Text"
 android:layout_above="@+id/mBtn" />

</RelativeLayout> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T10:29:19.683

试试这个方法

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

  Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:text="Button" />

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/button1"
    android:layout_alignLeft="@+id/button1"
    android:layout_marginBottom="17dp"
    android:text="TextView" />
</RelativeLayout> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-04T10:29:28.787

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:layout_gravity="center" >

<Button
   android:id="@+id/button"
   android:layout_width="wrap_content"
   android:layout_height="fill_parent"
   android:text="This is button"
   android:layout_centerInParent="true" />

  <TextView
      android:id="@+id/textview"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
      android:layout_centerHorizontal="true"
      android:text="Text data dayay"
      android:layout_above="@+id/button" />

</RelativeLayout> 
```

# javascript - 如何在每个对象的末尾插入带有变量和值的新对象

> ID：11807823
> 
> 赞同：0
> 
> 时间：2012-08-04T10:24:21.927
> 
> 标签：javascript, arrays

```
 [{ date="4/7/2012",  username="dealcloud",  user_id=304378189},
             { date="4/7/2012",  username="rizwanharun",  user_id=18932327
            },{ date="4/7/2012",  username="aimtoendhunger",  user_id=
            122384145},{ date="4/7/2012",  username="Sindy882",  user_id=
            705160297}}] 
```

如何在每个对象的末尾插入具有变量和值的新对象。例如，我想在每个对象中放置日期、用户名、用户 ID、位置等位置

为帮助欢呼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T10:28:47.913

注意：您的 json 语法错误。

你可以做这样的事情

```
var jsonObj = [{ "date":"4/7/2012",  "username":"dealcloud",  "user_id":304378189},
             { "date":"4/7/2012",  "username":"rizwanharun",  "user_id":18932327
            },{ "date":"4/7/2012",  "username":"aimtoendhunger",  "user_id":
            122384145},{ "date":"4/7/2012",  "username":"Sindy882",  "user_id":
            705160297}}];
for(var i = 0; i < jsonObj.length;i++) {
    jsonObj[i].location = "New location";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T10:29:51.897

请记住，对象没有顺序。

```
var ary = [{}, {}, {}];

for (i in ary) {
  ary[i]['new_key'] = 'new val';
} 
```

# php - ajax 输出没有样式

> ID：11807824
> 
> 赞同：0
> 
> 时间：2012-08-04T10:24:24.733
> 
> 标签：php, jquery, css, ajax

我有一个包含搜索表单的索引文件。搜索的结果是一个表格。我在 index.php 中的原始表使用数据表，样式和功能都很完美。这是我的 index.php 文件的一部分，它显示了从 searchDate.php 文件的结果中获取的结果： From: To:

```
 <select name="dateOption" id="dateOption">
                <option value="order"> Order </option>
                <option value="inventory"> Inventory </option>
                <option value="po"> PO# </option>
            </select>
            <input type="text" name="searchinput" id="searchinput" />
            <input type="button" value="SUBMIT" onclick="getDate();" />
        </form> 
```

这是 getDate() 函数：

```
function getDate() {
                $.post('searchDate.php' , {   dateKey: $("#searchinput").val(), 
                                              selected: $("#dateOption").val(),
                                              from: $("#date").val(),
                                              to: $("#date2").val()
                                              },
                    function(output) {
                        $('#mainTable').empty();
                        $('#orderSearch').empty();
                        $('#newOrder').empty();
                        $(".line").hide();
                        $("#loadNewInvoice").hide();
                        $('#searchResult').append(output);
                        $('#searchResult').css('display','block');
                        $('#searchResult').show("blind");

                });
            } 
```

结果是一个与我原来的工作表具有相同 id 和 class 的表。但是，结果没有功能，也没有风格。先感谢您。编辑：这是css和我的数据表配置以防万一：

```
table.display {
margin: 0 auto;
clear: both;
width: 100%;

}

table.display thead th {
padding: 3px 18px 3px 10px;
border-bottom: 1px solid black;
font-weight: bold;
cursor: pointer;
* cursor: hand;

}

table.display tfoot th {
padding: 3px 18px 3px 10px;
border-top: 1px solid black;
font-weight: bold;
}

table.display tr.heading2 td {
border-bottom: 1px solid #aaa;
}

table.display td {
padding: 3px 10px;
}

table.display td.center {
text-align: center;
 } 
```

数据表：

```
$(document).ready( function () {
var oTable = $('#theTable').dataTable({
"bPaginate": true,
"bScrollCollapse": true,
"iDisplayLength": 15,
"oLanguage": {
        "sSearch": "Search all columns:"
    },
"aoColumnDefs": [
  { "asSorting": [ "desc" ], "aTargets": [ 0 ] }
    ]

} ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T11:22:24.827

前段时间我也遇到过同样的问题。Jquery 要求您的所有 id 在页面中都是唯一的。如果不遵守这条规则，它根本就行不通！

因此，如果您更改表的 id，您的代码应该可以按预期工作。

# jquery - jQuery：使用动画将文本向右滑动，但按 div 的百分比

> ID：11807825
> 
> 赞同：2
> 
> 时间：2012-08-04T10:24:32.940
> 
> 标签：jquery, html, jquery-animate, percentage

我是 jQuery 新手，我正在尝试创建最基本的动画示例。目的是，如果有意义的话，使用包含文本的 div 的百分比来考虑不同的屏幕尺寸？

这是我开始使用的 jQuery：

```
$(document).ready(function() {
    $('#exampleDiv').animate({'marginLeft': '+=125px'}, 2000);
}); 
```

哪个有效，但不考虑不同的屏幕尺寸。所以我想根据百分比来切换它。

我试过了：但是这些对我`{padding-left:58%}`也`{left:58%}`不起作用，因为我希望它基于一个包含在其中的 div，如果这有意义的话？所以我想学习如何将动画值基于 div 容器的百分比。以及如何基于此设置字体大小。

```
<div id="container" width="300px" height="300px">
   <div id="exampleDiv">Text to slide in</div>
</div> 
```

因此，我再次学习这一点，如果有更好的方法，我欢迎并感谢所有建议、示例等。

一如既往的感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T10:40:05.677

jQUery 对 CSS 属性进行动画处理，因此只要您设置正确的 CSS 值，动画百分比就不是问题。

[**示范**](http://jsfiddle.net/xTs6u/1/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T10:50:05.477

正如 Adeneo 提到的，您可以将 % 用于 CSS 属性，我以非常相似的方式完成了它。

[jsfiddle](http://jsfiddle.net/wigster/pZuVb/)

这将获取 的宽度`#container`，将其存储在变量中，然后使用以下内容计算百分比：`.width() / 100 * 50;`，更改`* 50`为您希望百分比为的任何数字。

这具有附加功能，可以参考它以获取您可能还想要设置样式的其他元素。

# c++ - C++，如果新文件出现问题，使用 g++ 编译可以正常工作

> ID：11807826
> 
> 赞同：0
> 
> 时间：2012-08-04T10:24:58.920
> 
> 标签：c++

我得到这个问题是在我在后台运行 countryServer 然后我杀死它之后。我尝试重新编译一个新版本，这就是我得到的

```
root@ubuntu:/home/baoky/shell_assignment/shell_assn2# g++ -o countryServer CountryServer.cpp
root@ubuntu:/home/baoky/shell_assignment/shell_assn2# ./countryServer &
[1] 3097
root@ubuntu:/home/baoky/shell_assignment/shell_assn2# 
Running server program 'css' ...... 

Country Directory server started

root@ubuntu:/home/baoky/shell_assignment/shell_assn2# ps
  PID TTY          TIME CMD
 2993 pts/3    00:00:00 su
 3001 pts/3    00:00:00 bash
 3097 pts/3    00:00:00 countryServer
 3098 pts/3    00:00:00 ps
root@ubuntu:/home/baoky/shell_assignment/shell_assn2# kill 3097
[1]+  Terminated              ./countryServer
root@ubuntu:/home/baoky/shell_assignment/shell_assn2# g++ -o countryServer CountryServer.cpp
/usr/bin/ld: cannot open output file countryServer: No such device or address
collect2: ld returned 1 exit status

root@ubuntu:/home/baoky/shell_assignment/shell_assn2# ls -l
total 60
-rw-r--r-- 1 baoky baoky 19545 Aug  2 10:33 Countries.txt
-rwxr-xr-x 1 root  root  14756 Aug  4 03:17 countryClient
-rw-r--r-- 1 baoky baoky  3514 Aug  4 03:19 CountryClient.cpp
-rw-r--r-- 1 baoky baoky  4740 Aug  4  2012 CountryData.c
-rw-r--r-- 1 baoky baoky  2022 Aug  2 10:33 CountryData.h
srwxr-xr-x 1 root  root      0 Aug  4 03:29 countryServer
-rw-r--r-- 1 baoky baoky  7762 Aug  4 03:18 CountryServer.cpp 
```

我收到一个错误，返回这个 /usr/bin/ld: cannot open output file countryServer: No such device or address collect2: ld returned 1 exit status

如果我做 rm -rf countryServer 我可以修复它

但是我该如何修复它以便它可以覆盖旧的 countryServer （在我杀死它的进程并重新编译它之后）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T10:33:40.680

您的`countryServer`程序似乎正在创建一个`countryServer`在当前目录中调用的套接字文件，并在此过程中覆盖自身。

在编译您的代码之前删除该套接字文件，或者更好：更改您的代码，使其不会覆盖自己的可执行文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T10:26:45.330

* *c* *ountryServer.cpp 和 * *C* *ountryServer.cpp 是 Linux/Unix 系统上的不同文件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T10:26:59.190

文件路径在 linux 中区分大小写。

countryServer.cpp 和 CountryServer.cpp 不是同一个路径。

# qdialog - 将鼠标事件刷新到禁用的小部件

> ID：11807830
> 
> 赞同：2
> 
> 时间：2012-08-04T10:25:20.807
> 
> 标签：qdialog, qt4.6, qevent

我有一个带有几个按钮的对话框。当我禁用对话框并单击子按钮时，什么也没有发生。但是一旦我再次启用对话框，按钮的鼠标事件就会被处理。

**禁用对话框是否只是延迟处理其子小部件的任何鼠标事件，直到再次启用？**

我尝试在禁用对话框时为子小部件安装事件过滤器，然后在再次启用时删除事件过滤器。但它提供了相同的行为。一旦启用对话框，即删除子小部件的事件过滤器，就会处理鼠标事件（禁用时）。

有人可以帮忙这里有什么问题吗？

```
void MyDialog::changeEvent(QEvent *e)
{
    if(e->type() == QEvent::EnabledChange)
    {
        if(isEnabled())
        {
            qDebug("Filters removed!\n");
            ui->pbtnOption1->removeEventFilter(this);
            ui->pbtnOption2->removeEventFilter(this);
            ui->pbtnOption3->removeEventFilter(this);
        }
        else
        {
            qDebug("Filters installed\n");
            ui->pbtnOption1->installEventFilter(this);
            ui->pbtnOption2->installEventFilter(this);
            ui->pbtnOption3->installEventFilter(this);
        }
    }
}

bool MyDialog::eventFilter(QObject *obj, QEvent *e)
{
    if(obj == ui->pbtnOption1 || obj == ui->pbtnOption2 || obj == ui->pbtnOption3)
    {
        if(e->type() == QEvent::MouseButtonPress)
        {
            qDebug("MousePress Event!\n");
            return true;
        }
        else
            return false;
    }
    return QDialog::eventFilter(obj, e);
} 
```

# linker-errors - LNK 1106：无效文件或磁盘已满：无法查找 0x4361bd8c

> ID：11807834
> 
> 赞同：0
> 
> 时间：2012-08-04T10:25:38.567
> 
> 标签：linker-errors, seek

我们有一个非常古老的 VC++ 应用程序，它实际上是使用 VC++2.2 构建的。我们已经安装了 VC++4.2 Developer Studio IDE。我正在尝试构建项目并收到以下错误。

```
libct.lib : fatal error LNK1106: invalid file or disk full: cannot seek to 0x4361bd8c 
```

我们实际上是使用 Sybase Gateway 从这个应用程序连接到大型机，其中包含 libct.lib 和 libcs​​.lib。这些是从我们的项目中引用的。当我尝试构建项目时，出现上述链接器错误。

我不知道用于编译的 IDE 版本是否导致了这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T02:21:40.053

实际上是安装的sybase版本有问题。我的机器安装了 sybase Open Clien 12.5.1，它与 C/C++ 编译器版本 6.0 及更高版本兼容。因此使用 VS2008 转换了项目并清除了错误。

谢谢和问候，
Karthik Sivakumar

# sql - 无法创建表oracle？

> ID：11807835
> 
> 赞同：0
> 
> 时间：2012-08-04T10:25:39.420
> 
> 标签：sql, oracle

我无法在 oracle 中创建此表并不断收到错误 ORA-00942：表或视图不存在任何帮助，非常感谢！

```
CREATE TABLE Occupancy 
(
  PatientNo          CHAR(6),
  WardNo             CHAR(6),
  BedNo              NUMBER(2),
  StartOfOccupancy   DATE,
  EndOfOccupancy     DATE,
  CostsIncurred      NUMBER(6,2),
  PRIMARY KEY (Patientno,WardNo,BedNo,StartOfOccupancy),
  FOREIGN KEY (Patientno) REFERENCES Patient (PatientNo),
  FOREIGN KEY (WardNo,BedNo) REFERENCES Bed (WardNo,BedNo)
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T17:07:31.790

在您尝试创建 Table 的架构中（或没有公共同义词）中不存在`Patient`这些表。如果它们确实存在于不同的模式中，请使用create语句，或者为两个表和. 如果您有权引用这些表，则应创建新表，否则需要将架构授予为`Bed``Occupancy``SCHEMA_NAME.Patient``SCHEMA_NAME.Bed``Patient``Bed``REFERENCES`

```
GRANT REFERENCES (PatientNo)
ON SCHEMA_NAME.Patient
TO YOUR_SCHEMA; 
```

和

```
GRANT REFERENCES (WardNo,BedNo)
ON SCHEMA_NAME.Bed
TO YOUR_SCHEMA; 
```

# c - 什么是alloc.h？

> ID：11807837
> 
> 赞同：9
> 
> 时间：2012-08-04T10:25:43.070
> 
> 标签：c, header-files

什么是`alloc.h`？像[这样](https://stackoverflow.com/q/7006256/1526667)的一些问题，[其中](https://stackoverflow.com/q/4395415/1526667)包括`alloc.h`。

但是，[当我试图包含它时，gcc 给出了](http://ideone.com/o35Hr)错误`error: alloc.h: No such file or directory`

是否曾经存在过这样的文件，或者这些问题只是错误地包含了它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-04T10:46:56.093

它用于动态内存分配，但它不是 ANSI C 标准库。如果您使用 gcc，则使用 stdlib 进行动态内存分配：

```
#include <stdlib.h> 
```

有关更多信息，请查看[此处](http://en.wikibooks.org/wiki/C_Programming/Platform_Reference/alloc.h)。

如果您仔细阅读所链接的问题，实际上问题正是试图使用包含该标头的 gcc 进行编译。所以不要使用它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-04T10:29:46.320

它是一个头文件，声明了内存管理函数，如`malloc`, `free`, `realloc`.

该头文件已被弃用。

供 C 使用

```
#include <stdlib.h> 
```

对于 C++ 使用

```
#include <memory> 
```

# mysql - 从两个相似的列中选择公共值

> ID：11807843
> 
> 赞同：1
> 
> 时间：2012-08-04T10:26:33.083
> 
> 标签：mysql, sql, select

我有一个表 ，`matches`其中包含体育赛事数据，其中包括`home_pom`（比赛的主场球员）和`away_pom`。我需要调用一个查询来查找这两个字段中的前 5 个值（即从第 x 赛季中获得最多比赛奖励的 5 个人），并能够输出出现次数和球员姓名.

我不知道从哪里开始使用 SELECT 函数。

匹配表包含一个`league_id`对应于单独`leagues`表的字段，该表在页面前面调用了 $league_id。目前没有单独的`players`表格 - 我认为这可能是多余的，因为这几乎是我认为唯一相关的事情。

IE

```
match_id | homepom | awaypom | league_id  
1        | Joe A   | Jane B  |  2  
2        | Joe F   | Jane G  |  2  
3        | Jane B  | Joe F   |  2 
```

列出 Joe F 和 Jane B 有 2 个 pom 奖项，而 Jane G 和 Joe A 有一个。

```
$host="cust-mysql-123-05"; // Host name 
$username="unsn_637140_0003"; // Mysql username 
$password="mypw"; // Mysql password 
$db_name="nsnetballcouk_637140_db3"; // Database name

// Connect to server and select database.
mysql_connect("$host", "$username", "$password")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");

$areatoleaguepom=$_GET['area'];
$seasontoleaguepom=$_GET['season'];
$divisiontoleaguepom=$_GET['division'];
$leaguepom_query=("SELECT league_id FROM leagues WHERE area_id='$areatoleaguepom' AND      season_id='$seasontoleaguepom' AND division_id='$divisiontoleaguepom'");
$leaguepom_result=mysql_query($leaguepom_query);
$leaguepom_row=mysql_fetch_array($leaguepom_result);
$leaguepom_id=$leaguepom_row['league_id'];

$toppom_query=(
"SELECT
player,
COUNT(player) as count
FROM (SELECT homepom AS player
FROM matches
WHERE league_id='$leaguepom_id'
UNION ALL
SELECT awaypom AS player
FROM matches
WHERE league_id='$leaguepom_id'
) as players
GROUP BY player
ORDER BY count DESC 
LIMIT 5
");

$toppom_result=mysql_query($toppom_query);
while ($toppom_row=mysql_fetch_array($toppom_result));

echo $toppom_row['player'] . " " . $toppom_row['count'] . "<br>"; 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T10:36:58.330

[`GREATEST(home_pom, away_pom)`](http://dev.mysql.com/doc/refman/5.6/en/comparison-operators.html#function_greatest)将返回`home_pom`和的最大值`away_pom`。所以，这样的事情：

```
select * from your_table
where season = x
order by greatest(home_pom, away_pom)
desc limit 5 
```

*   `where`条款记录赛季的所有球员记录`x`；
*   `order by .. desc`按您想要的对所有玩家记录进行排序；
*   `limit 5`将获得前 5 名球员。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T10:41:57.503

这可能有点过于复杂，但无论如何......

```
SELECT
    player,
    COUNT(player) as count
FROM (
    SELECT homepom AS player
    FROM matches
    WHERE homepom IS NOT NULL AND homepom != '' AND league_id = xxx AND other_things
    UNION ALL
    SELECT awaypom AS player
    FROM matches
    WHERE awaypom IS NOT NULL AND awaypom != '' AND league_id = xxx AND other_things
) as players
GROUP BY player
ORDER BY count DESC 
LIMIT 5 
```

您将 home_pom 和 away_pom 合并在一列中，然后进行分组以计算谁拥有最多。

编辑：删除了玩家表...

# javascript - 将 URL 参数插入 Javascript 代码

> ID：11807849
> 
> 赞同：0
> 
> 时间：2012-08-04T10:27:02.887
> 
> 标签：javascript, url-parameters

我正在使用 Virtual Website Optimizer 进行一些转化和收入跟踪。为了跟踪收入，他们会指示您在感谢页面上添加一段 Javascript 代码，以确定实际获得的收入。

```
<script type="text/javascript">
var _vis_opt_revenue = 0;
//zero should be replaced by the actual revenue figure
</script> 
```

我正在使用 Wufoo 表单并制作它，以便我可以添加一个 URL 参数来总计他们的订单，例如，如果他们的订单总额为 280 美元，他们将被发送到：

```
http://mysite.com/thank-you?total=280 
```

我想知道：如何将 URL 参数插入到 Visual Website Optimizer 的 Javascript 跟踪代码中？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T10:29:56.420

从[这里获取的功能](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript)

添加这个

```
function getParameterByName(name)
{
  name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
  var regexS = "[\\?&]" + name + "=([^&#]*)";
  var regex = new RegExp(regexS);
  var results = regex.exec(window.location.search);
  if(results == null)
    return "";
  else
    return decodeURIComponent(results[1].replace(/\+/g, " "));
} 
```

然后改变

```
var _vis_opt_revenue = 0; 
```

至

```
var _vis_opt_revenue = getParameterByName("total"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T10:30:16.373

尝试这个

```
var _vis_opt_revenue = 
         '$' + window.location.pathname.split('?')[1].split('=')[1]; 
```

# joomla - 带有类别的人员帖子的 Joomla 扩展

> ID：11807852
> 
> 赞同：0
> 
> 时间：2012-08-04T10:27:24.213
> 
> 标签：joomla

是否有任何类型的扩展程序可以让人们通过类别发布他们想要的内容。所以他们需要注册并登录，然后创建一个新帖子，然后选择该帖子将显示给其他人的相关类别。
我可能需要按地理定位限制显示帖子，例如，帖子仅出现在美国或英国。
我是一名 PHP 开发人员。我可以实现这个系统，但我想知道它是否已经存在一些像 Joomla 这样的 CMS 来做我需要的事情，以节省时间。如果允许的话，我也可以开发这样的 Joomla 模块。由于我对 Joomla 没有太多经验，因此需要推动这些要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T10:50:36.543

我建议您使用内置的 joomla 的文章部分。我认为 joomla 包中可用的东西将适合您的类别、发布和登录以及注册要求。

对于地理定位限制，我认为您的 php 知识足以更改或修改 joomla 中的少数代码部分。我认为这种方式可以帮助您节省一些时间。我以前做过这些。它们对我来说效果很好。希望这对您有所帮助。

# iphone - 从 iPhone 中的不同视频网站下载视频

> ID：11807854
> 
> 赞同：1
> 
> 时间：2012-08-04T10:27:56.427
> 
> 标签：iphone, objective-c, xcode, video, download

在我的应用程序中，用户可以从不同的视频网站下载和播放视频，如 bofunk.com、dailymotion.com、youtube.com、metacafe.com、stupid videos.com 等。从不同网站下载视频背后的想法是什么。我实现了一种方法，适用于某些站点。即通过从 html 字符串生成可下载的 url。但是同样的方法不适用于其他站点。任何人都可以指导我吗？提前谢谢。这是我尝试过的正在为 bofunk.com 工作

```
`-(BOOL)searchForVideoInBOFUNKHTML:(NSString*)htmlString;
{
    NSString *strHTML=[NSString stringWithFormat:@"%@",htmlString];       
    NSString *newString; 

    if ([htmlString rangeOfString:@"id=\"vidplaya\""].location == NSNotFound) 
    {
        return  false;
    }   
    else
    {
        htmlString = [strHTML substringFromIndex:[htmlString rangeOfString:@"id=\"vidplaya\""].location];

        htmlString=  [htmlString stringByReplacingOccurrencesOfString:[htmlString substringFromIndex:100]
                                                        withString:@""];

            newString =[htmlString stringByReplacingOccurrencesOfString:[htmlString substringFromIndex:[htmlString rangeOfString:@"quality"].location] withString:@""];
        NSLog(@"%@",newString);

            newString = [[[newString substringFromIndex:[newString rangeOfString:@"/"].location] substringFromIndex:3] stringByReplacingOccurrencesOfString:@"\"" withString:@""];
         NSLog(@"%@",newString);

            newString = [newString stringByReplacingOccurrencesOfString:@" " withString:@""];
         NSLog(@"%@",newString);

            embededURL = [[NSString alloc] initWithFormat:@"http://media.bofunk.com/media/flvs/%@.flv",newString]; 

        NSLog(@"%@",embededURL);
            return true;

    }
    return  false;

} 
```

`但不适用于dailymotion.com之类的网站。这是与这些网站上的任何加密有关的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T12:08:30.863

Dailymotion[为 iOS 提供了一个 API](http://www.dailymotion.com/doc/api/getting-started.html#getting-started-embed-video-ios)。所以你可以使用它。但不要指望它可以与其他服务一起使用。您将不得不一一实现它们。其中一些可能无法与外部软件一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-05T05:37:37.003

这是关于如何从 YouTube 下载 MP4 数据的讨论。

有**示例项目**和**很好**的下载方式。这可能会对您有所帮助。

[在应用程序中将 Youtube 视频保存到 iPhone](https://stackoverflow.com/questions/5087249/save-youtube-video-to-iphone-in-the-app)

# c# - 显示启动画面时 UI 线程被阻止

> ID：11807857
> 
> 赞同：3
> 
> 时间：2012-08-04T10:28:09.760
> 
> 标签：c#, database, winforms, thread-safety

> **可能重复：**
> [C# 闪屏问题](https://stackoverflow.com/questions/392864/c-sharp-splash-screen-problem)

我是 c# 的新手，我正在处理软件启动时运行的启动画面。我在启动画面类中有一个检查数据库的函数。我正在使用线程来调用函数

```
 sc = new splashScreen();

        checkDLLThread = new Thread(new ThreadStart(sc.checkDLLS).BeginInvoke);
        checkDLLThread.Start();

        while (checkDLLThread.IsAlive)
        {
            Thread.Sleep(200);
        } 
```

问题是 UI 被阻塞，直到线程处于活动状态。最后它给了我数据库连接状态消息。这是我的代码。我使用了 checkDLLThread.join() 但它也不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T10:42:36.487

解锁 UI 线程需要从事件处理程序返回。除了这样做，别无选择。这是一些伪代码：

```
OnStartup:
 Start new Thread
 Disable UI
 Show Splash Sceen
 Return!

Thread:
 Check Database
 if (not ok)
  Show Message box
  Exit Application
 else
  Enable UI
  Remove Splash Screen 
```

诀窍是让线程显示消息，一旦完成就显示一个。不要等待线程，让线程自己做。

您的线程可能需要使用 Invoke 函数来访问 UI。您可能不想阅读这方面的内容，因为如果您想在后台线程上进行异步工作，就无法绕过它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T13:18:31.250

以下代码在您的应用程序（在我下面的示例中称为 MainForm()）加载或初始化时在单独的线程上启动“启动屏幕”。首先在您的“main()”方法中（在您的 program.cs 文件中，除非您已重命名它）您应该显示您的启动画面。这将是您希望在启动时向用户显示的 WinForm 或 WPF 表单。这是从 main() 启动的，如下所示：

```
[STAThread]
static void Main()
{
    // Splash screen, which is terminated in MainForm.       
    SplashForm.ShowSplash();

    Application.EnableVisualStyles();
    Application.SetCompatibleTextRenderingDefault(false);

    // Run UserCost.
    Application.Run(new MainForm());
} 
```

在您的 SplashScreen 代码中，您需要以下内容：

```
public partial class SplashForm : Form
{

    // Thredding.
    private static Thread _splashThread;
    private static SplashForm _splashForm;    

    public SplashForm()
    {
        InitializeComponent();
    }

    // Show the Splash Screen (Loading...)      
    public static void ShowSplash()    
    {        
        if (_splashThread == null)        
        {            
            // show the form in a new thread            
            _splashThread = new Thread(new ThreadStart(DoShowSplash));            
            _splashThread.IsBackground = true;            
            _splashThread.Start();        
        }    
    }    

    // Called by the thread    
    private static void DoShowSplash()    
    {        
        if (_splashForm == null)            
            _splashForm = new SplashForm();        
        // create a new message pump on this thread (started from ShowSplash)        
        Application.Run(_splashForm);
    }    

    // Close the splash (Loading...) screen    
    public static void CloseSplash()    
    {        
        // Need to call on the thread that launched this splash        
        if (_splashForm.InvokeRequired)            
            _splashForm.Invoke(new MethodInvoker(CloseSplash));        
        else            
            Application.ExitThread();    
    }

} 
```

这会在单独的后台线程上启动启动表单，从而允许您同时继续渲染主应用程序。要显示有关加载的消息，您必须从主 UI 线程中提取信息，或者以纯粹的审美性质工作。要在应用程序初始化后完成并关闭启动画面，请将以下内容放在默认构造函数中（如果需要，可以重载构造函数）：

```
 public MainForm()
    {
        // ready to go, now initialise main and close the splashForm. 
        InitializeComponent();
        SplashForm.CloseSplash();
    } 
```

上面的代码应该相对容易理解。

我希望这有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-04T14:14:41.930

你的方法很好，但你应该同时运行两者。一个好的使用`static fields`可以轻松完成这项工作。代替：

```
 while (checkDLLThread.IsAlive)
    {
        Thread.Sleep(200);
    } 
```

你应该：

*   显示飞溅`Form`
*   设置表单在开始时隐藏，即设置`Opacity`为`0`
*   *当您的表单完全初始化时*，稳定地检查变量`SplashForm`
**   设置`Opacity`回`1`线程完成时。即变量变化*

 ****`i.e.:`***

```
public Form1(){
     InitializeComponent();
     Opacity = 0;
     while(sc.IsComplete){}
     Opacity = 1;
} 
```

在你的内部`SplashForm`，你应该有类似的*东西*：

```
internal static bool IsComplete;

internal static void CheckDLLS()
{
    //after doing some stuff
    IsComplete = true;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-04T10:33:11.953

闪屏只是在您的应用程序加载时“逗乐”用户的图像。使用 app_load 方法在启动时执行代码：

像这样：（在 app.xaml 和 app.xaml.cs 中）

```
 <Application /some references to stuff/ Startup="Application_Startup" >

    private void Application_Startup(object sender, StartupEventArgs e)
    {
        // your startupcode
    } 
```

另外，如果您不想打扰 UI ，我认为[BackGroundworker类更适合这样的事情。](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)*

# django - 骨干美味：超过最大调用堆栈大小

> ID：11807858
> 
> 赞同：0
> 
> 时间：2012-08-04T10:28:37.387
> 
> 标签：django, backbone.js, tastypie

我正在尝试将 Backbone 与 Django 一起使用。

我首先从 todomvc 中获取了 Backbone 的本地工作示例： [https ://github.com/addyosmani/todomvc/tree/master/architecture-examples/backbone](https://github.com/addyosmani/todomvc/tree/master/architecture-examples/backbone)

然后我想使用服务器而不是本地存储。所以我为 REST API 选择了 django-tastypie。我在浏览器中使用 REST 客户端（邮递员）测试了 REST API，它可以正常工作。

然后我想让它与 todomvc 示例一起使用。我设置了一些东西来使用服务器而不是本地存储。我得到了大家推荐的小型转换层主干-tastypie.js。（https://github.com/PaulUithol/backbone-tastypie/blob/master/backbone_tastypie/static/js/backbone-tastypie.js）

但是，当我使用主干-tastypie.js 层时，当我在我的集​​合上使用 fetch 方法时，我得到**RangeError: Maximum call stack size exceeded 。**

任何想法？

有关错误的更多详细信息：

```
a = window.App
a.Todos.fetch()
RangeError: Maximum call stack size exceeded
arguments: Array[0]
length: 0
__proto__: Array[0]
concat: function concat() { [native code] }
constructor: function Array() { [native code] }
every: function every() { [native code] }
filter: function filter() { [native code] }
forEach: function forEach() { [native code] }
indexOf: function indexOf() { [native code] }
join: function join() { [native code] }
lastIndexOf: function lastIndexOf() { [native code] }
length: 0
map: function map() { [native code] }
pop: function pop() { [native code] }
push: function push() { [native code] }
reduce: function reduce() { [native code] }
reduceRight: function reduceRight() { [native code] }
reverse: function reverse() { [native code] }
shift: function shift() { [native code] }
slice: function slice() { [native code] }
some: function some() { [native code] }
sort: function sort() { [native code] }
splice: function splice() { [native code] }
toLocaleString: function toLocaleString() { [native code] }
toString: function toString() { [native code] }
unshift: function unshift() { [native code] }
__proto__: Object
get message: function () { [native code] }
arguments: null
caller: null
length: 0
name: ""
prototype: Object
__proto__: function Empty() {}
set message: function () { [native code] }
arguments: null
caller: null
length: 1
name: ""
prototype: Object
__proto__: function Empty() {}
stack: undefined
type: "stack_overflow"
__proto__: Error
arguments: undefined
constructor: function RangeError() { [native code] }
name: "RangeError"
stack: undefined
type: undefined
__proto__: SetUpError.d 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T08:12:31.860

在您的资源中，您是否有类似的内容：

```
class MyResource1(ModelResource):
    attr1 = fields.ForeignKey('app.api.MyResource2', 'attr1', full=True)

    class Meta:
        queryset = bla bla
        .
        .
        .

 class MyResource2(ModelResource):
       attr2 = fields.ForeignKey('app.api.MyResource1', 'attr2', full=True)

    class Meta:
        queryset = bla bla
        .
        .
        . 
```

# rss - 发布 RSS 提要的问题

> ID：11807866
> 
> 赞同：0
> 
> 时间：2012-08-04T10:29:26.670
> 
> 标签：rss, umbraco

我在从我的 Umbraco 站点发布 RSS 提要时遇到问题。我找到[了这个](http://umbraco.com/help-and-support/video-tutorials/umbraco-fundamentals/more-xslt/setting-up-an-rss-feed)Umbraco.TV 视频并尝试按照那里的说明使用 XSLT 选择器选择给定类型的所有节点，如下所示：

```
umbraco.library.GetXmlAll()/node [@nodeTypeAlias='Alias]/node 
```

正如[这里](http://forum.umbraco.org/yaf_postst8561_How-to-select-all-nodes-with-particular-document-type-problem-solved-thx.aspx)所建议的那样，但这没有用。显然[架构已经改变](http://our.umbraco.org/wiki/reference/xslt/45-xml-schema/no-more-@nodetypealias)或什么。当这不起作用时，我寻找一个插件来做这种事情，并惊讶地发现只有 2 个插件，它们都几乎没有文档，而且似乎都不起作用（[第一个插件](http://www.eyecatch.no/projects/umbraco-rss-feed-generator/)，[第二个插件](http://our.umbraco.org/projects/website-utilities/rss-suit)）。

因此，一劳永逸地，我想有一个明确的答案——如何在 Umbraco 中发布 RSS 提要？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T23:35:09.973

这是我们用于新闻项目 RSS 的 XSLT（新闻项目位于新闻页面下）。让我知道这是否有帮助。我也有博客的版本。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet
  version="1.0"
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  xmlns:rssdatehelper="urn:rssdatehelper"
  xmlns:dc="http://purl.org/dc/elements/1.1/"
  xmlns:content="http://purl.org/rss/1.0/modules/content/"
  xmlns:msxml="urn:schemas-microsoft-com:xslt" 
  xmlns:umbraco.library="urn:umbraco.library" xmlns:Exslt.ExsltCommon="urn:Exslt.ExsltCommon" xmlns:Exslt.ExsltDatesAndTimes="urn:Exslt.ExsltDatesAndTimes" xmlns:Exslt.ExsltMath="urn:Exslt.ExsltMath" xmlns:Exslt.ExsltRegularExpressions="urn:Exslt.ExsltRegularExpressions" xmlns:Exslt.ExsltStrings="urn:Exslt.ExsltStrings" xmlns:Exslt.ExsltSets="urn:Exslt.ExsltSets" 
  exclude-result-prefixes="msxml umbraco.library Exslt.ExsltCommon Exslt.ExsltDatesAndTimes Exslt.ExsltMath Exslt.ExsltRegularExpressions Exslt.ExsltStrings Exslt.ExsltSets ">

  <xsl:output method="xml" omit-xml-declaration="yes"/>

  <xsl:param name="currentPage"/>

  <!-- Update these variables to modify the feed -->
  <xsl:variable name="RSSNoItems" select="/macro/RSSNoItems"/>
  <xsl:variable name="RSSTitle" select="/macro/RSSTitle"/>
  <xsl:variable name="SiteURL" select="concat('http://',umbraco.library:RequestServerVariables('HTTP_HOST'))"/>
  <xsl:variable name="RSSDescription" select="/macro/RSSDescription"/>
  <xsl:variable name="source" select="/macro/source"/>

  <!-- This gets all news and events and orders by updateDate to use for the pubDate in RSS feed -->
  <xsl:variable name="pubDate">
    <xsl:for-each select="umbraco.library:GetXmlNodeById($source)/* [@isDoc and string(umbracoNaviHide) != '1']">
      <xsl:sort select="./newsDate" order="descending" />
      <xsl:if test="position() = 1">
        <xsl:value-of select="./newsDate" />
      </xsl:if>
    </xsl:for-each>
  </xsl:variable>

  <xsl:template match="/">
    <!-- change the mimetype for the current page to xml -->
    <xsl:value-of select="umbraco.library:ChangeContentType('text/xml')"/>

    <xsl:text disable-output-escaping="yes">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</xsl:text>
    <rss version="2.0"
    xmlns:content="http://purl.org/rss/1.0/modules/content/"
    xmlns:wfw="http://wellformedweb.org/CommentAPI/"
    xmlns:dc="http://purl.org/dc/elements/1.1/"
>

      <channel>
        <title>
          <xsl:value-of select="$RSSTitle"/>
        </title>
        <link>
          <xsl:value-of select="$SiteURL"/>
        </link>
        <pubDate>
          <xsl:value-of select="$pubDate"/>
        </pubDate>
        <generator>umbraco v4</generator>
        <description>
          <xsl:value-of select="$RSSDescription"/>
        </description>
        <language>en</language>

  <xsl:for-each select="umbraco.library:GetXmlNodeById($source)/* [@isDoc and string(umbracoNaviHide) != '1']"> 
  <xsl:sort select="./newsDate" order="descending" />
      <xsl:if test="position() &lt;= $RSSNoItems"> 
    <xsl:call-template name="RSSitem">
                    <xsl:with-param name="node" select="current()"/>
                </xsl:call-template> 
      </xsl:if> 
  </xsl:for-each> 
      </channel>
    </rss>

  </xsl:template>

  <xsl:template match="node">
    <xsl:if test="position() &lt;= $RSSNoItems">
      <item>
        <title>
          <xsl:value-of select="@nodeName"/>
        </title>
        <link>
          <xsl:value-of select="$SiteURL"/>
          <xsl:value-of select="umbraco.library:NiceUrl(@id)"/>
        </link>
        <pubDate>
          <xsl:value-of select="umbraco.library:FormatDateTime(./newsDate,'r')" />
        </pubDate>
        <guid>
          <xsl:value-of select="$SiteURL"/>
          <xsl:value-of select="umbraco.library:NiceUrl(@id)"/>
        </guid>
        <content:encoded>
          <xsl:value-of select="concat('&lt;![CDATA[ ', ./bodyText,']]&gt;')" disable-output-escaping="yes"/>
        </content:encoded>
      </item>
    </xsl:if>
  </xsl:template>

    <xsl:template name="RSSitem">
        <xsl:param name="node"/>
        <item>
            <title>
                <xsl:value-of select="$node/@nodeName"/>
            </title>
            <link>
                <xsl:value-of select="$SiteURL"/><xsl:value-of select="umbraco.library:NiceUrl($node/@id)"/>
            </link>
            <pubDate>
                <xsl:value-of select="umbraco.library:FormatDateTime(./newsDate,'r')"/>
            </pubDate>
            <dc:creator><xsl:value-of select="@writerName"/></dc:creator>
            <xsl:for-each select="umbraco.library:Split($node/categories, ',')/value">
                <xsl:sort data-type="text" order="ascending"/>
                <category>
                    <xsl:value-of select="current()"/>
                </category>               
            </xsl:for-each>
            <guid>
                <xsl:value-of select="$SiteURL"/><xsl:value-of select="umbraco.library:NiceUrl($node/@id)"/>
            </guid>
            <description>
                <xsl:value-of select="concat('&lt;![CDATA[ ', $node/summary,']]&gt;')" disable-output-escaping="yes"/>
            </description>
            <content:encoded>
                <xsl:value-of select="concat('&lt;![CDATA[ ', $node/bodyText,']]&gt;')" disable-output-escaping="yes"/>
            </content:encoded>
        </item>       
    </xsl:template> 

</xsl:stylesheet> 
```

# encryption - 如何破解 WinRar 中使用的 AES-128 加密？

> ID：11807869
> 
> 赞同：9
> 
> 时间：2012-08-04T10:29:44.423
> 
> 标签：encryption, winrar

我正在尝试使用下面解释的一些方法来破解 winrar 的密码。

因为 rar 使用 AES-128 加密，暴力和字典攻击是无用的，因为它们需要数年时间。
但是，如果我们将受密码保护的 rar 文件转换为 EXE 格式的 SFX 存档（我更喜欢 winconsole，因为 GUI 占用大量内存），我很确定它将不受 winrar 的保护。
即使这样，rar 也会将加密密钥写入该 exe 文件。

那么，如果我们可以使用 exe 调试器或反汇编程序，我们就不能敲出包含密码的密钥吗？
我使用 w32dasm、olly dbg & pe explorer 来修改这些 exe 文件。
我能找到的只有“提取，CRC失败，加密”之类的字符串和其他一些东西。我使用了几个 sfx 存档作为测试文件（使用不同的密码）并通过反汇编进行了尝试。这些十六进制键看起来非常相似！

那么我需要更好的反汇编器或调试器吗？或者，有人告诉我，如果这种方法没用，为什么？

另一个问题.. 下图是否有任何指向 winrar 加密的链接？如果是，请解释如何..这将非常有帮助。 ![在此处输入图像描述](../Images/bdd22f1b25d2a6de7d138ddaa9e8b093.png)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-04T11:07:36.243

当您创建受密码保护的 SFX 时，它不会存储密码。它要求你。

您不能只是将受密码保护的内容“转换”为不受保护的内容。如果这是可能的，加密方案将完全没有价值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T04:06:00.320

我认为问题在于尝试将文件更改为 SFX 对解密文件已经加密的内容没有任何作用，因此它不起作用。数据已经加密。除非数据未加密，否则无论您对文件做了什么，都必须经过解密过程才能获取数据。不？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-03T04:45:06.863

与 RAR 文件相比，攻击 SFX 文件并不容易。RAR 存档由您的压缩和（可选）加密数据组成。SFX 文件和 RAR 一样，是一个压缩和加密数据的包，但它还包含一个微型形式的 WinRAR，可以在用户输入密码后解密打包的数据。

SFX 文件需要您的密码才能解密您的数据；当您输入错误的密码时，并不是因为它根据文件中嵌入的密码测试了您的密码。这意味着当它尝试使用提供的密码解密数据时，出现了问题。这一切都归功于[对称密钥密码术](http://en.wikipedia.org/wiki/Symmetric-key_algorithm)的魔力：**密文**（打包在 RAR/SFX 存档中）使用您输入的**密码**进行 AES 解密，然后将结果（**明文**）导出到您选择的任何位置。

总之，尝试破解 SFX 文件的运气与破解 RAR 存档的运气相同。

# ios - 使用 Core Graphic iPhone 的透明 (alpha) 渐变

> ID：11807876
> 
> 赞同：26
> 
> 时间：2012-08-04T10:30:11.987
> 
> 标签：ios, core-graphics, gradient, alpha

任何人都知道如何以编程方式在具有核心图形的图像上创建透明渐变（alpha 渐变）？我需要它来显示图像并保存它。

我想获得的一个例子： ![在此处输入图像描述](../Images/a18a1725425d55f0a2d447f436acb079.png)

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-09-21T18:55:30.630

您可以使用 QuartzCore 将遮罩（具有渐变透明度）应用到 UIImageView：

```
UIImageView *myImageView = ["the image view"];
CAGradientLayer *l = [CAGradientLayer layer];
l.frame = myImageView.bounds;
 l.colors = [NSArray arrayWithObjects:(id)[[UIColor colorWithRed:0 green:0 blue:0 alpha:0] CGColor], (id)[[UIColor colorWithRed:0 green:0 blue:0 alpha:1] CGColor], nil];

l.startPoint = CGPointMake(0.0, 0.0f);
l.endPoint = CGPointMake(1.0f, 1.0f);

//you can change the direction, obviously, this would be top to bottom fade
myImageView.layer.mask = l; 
```

要保存它，您可以在 Stack Overflow 上轻松找到答案，只需搜索如何将画布的内容保存到 UIImage。

或@Zazu 要求的 Swift 版本：

```
// Whatever you image view is, obviously not hardcoded like this
let imageView = UIImageView.init(image: UIImage(named: "Image"))
imageView.frame = CGRectMake(0, 0, 320, 480)
self.view.addSubview(imageView)
// Create the gradient layer
let gradientLayer = CAGradientLayer.init()
gradientLayer.frame = imageView.bounds
gradientLayer.colors = [
    UIColor.init(colorLiteralRed: 0, green: 0, blue: 0, alpha: 0).CGColor,
    UIColor.init(colorLiteralRed: 0, green: 0, blue: 0, alpha: 1).CGColor]
// Whatever direction you want the fade. You can use gradientLayer.locations
// to provide an array of points, with matching colors for each point, 
// which lets you do other than just a uniform gradient.
gradientLayer.startPoint = CGPointMake(1.0, 0.0);
gradientLayer.endPoint = CGPointMake(0.0, 0.0);
// Use the gradient layer as the mask
imageView.layer.mask = gradientLayer; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-03-15T14:01:52.473

Swift 3 - 这对我有用。我只需要 20% 的底部图像是透明的渐变。

```
 // Create the gradient layer
    let gradientLayer = CAGradientLayer()
    gradientLayer.frame = imageView.bounds

    gradientLayer.colors = [
        UIColor.white.withAlphaComponent(1).cgColor,
        UIColor.white.withAlphaComponent(0).cgColor]
    // Whatever direction you want the fade. You can use gradientLayer.locations
    // to provide an array of points, with matching colors for each point,
    // which lets you do other than just a uniform gradient.
    gradientLayer.startPoint = CGPoint(x: 0.0, y: 0.80)
    gradientLayer.endPoint = CGPoint(x: 0.0, y: 1.0)
    // Use the gradient layer as the mask
    imageView.layer.mask = gradientLayer 
```

## [![在此处输入图像描述](../Images/eb82784396dee9a117cc6e67cb97009f.png)](https://i.stack.imgur.com/vLz7a.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-04T10:59:10.217

我不知道渐变的核心图形解决方案，但是如果您可以在 photoshop 中制作一个从右侧开始为白色并在左侧淡入为 alpha 的图像，您可以将其覆盖在内容图像的顶部

覆盖图像你会做类似的事情

```
+ (UIImage*) addFadeOutToImage:(UIImage*)sourceImage
{
   UIGraphicsBeginImageContext(sourceImage.size);

   [sourceImage drawAtPoint:CGPointZero];

   UIImage* fadeAlphaImage = [UIImage imageNamed:@"fadedAlphaImage.png"];

   CGPoint fadeOutStartPoint = CGPointMake(sourceImage.size.width - fadeAlphaImage.size.width, 0);
   //assumes the fade image is the same height as the source
   [fadeAlphaImage drawAtPoint:fadeOutStartPoint];

   UIImage* fadeOutImage = UIGraphicsGetImageFromCurrentImageContext();
   UIGraphicsEndImageContext();

   return fadeOutImage;
} 
```

这段代码改编自[这个问题](https://stackoverflow.com/questions/679245/create-a-uiimage-from-two-other-uiimages-on-the-iphone)

或@Zazu 要求的 Swift 版本：

```
// Whatever you image view is, obviously not hardcoded like this
let imageView = UIImageView.init(image: UIImage(named: "Image"))
imageView.frame = CGRectMake(0, 0, 320, 480)
self.view.addSubview(imageView)
// Create the gradient layer
let gradientLayer = CAGradientLayer.init()
gradientLayer.frame = imageView.bounds
gradientLayer.colors = [
    UIColor.init(colorLiteralRed: 0, green: 0, blue: 0, alpha: 0).CGColor,
    UIColor.init(colorLiteralRed: 0, green: 0, blue: 0, alpha: 1).CGColor]
// Whatever direction you want the fade. You can use gradientLayer.locations
// to provide an array of points, with matching colors for each point, 
// which lets you do other than just a uniform gradient.
gradientLayer.startPoint = CGPointMake(1.0, 0.0);
gradientLayer.endPoint = CGPointMake(0.0, 0.0);
// Use the gradient layer as the mask
imageView.layer.mask = gradientLayer; 
```

# actionscript-3 - ActionScript 3.0 If Else MouseOver

> ID：11807882
> 
> 赞同：0
> 
> 时间：2012-08-04T10:31:15.823
> 
> 标签：actionscript-3, flash

我想这样编码：

```
If(MouseOver){
stop();
} 
```

因为我有一个被蒙版的旋转地球，所以我不能把它做成电影剪辑，今天是我第一次制作flash和编码actionscript3.0。所以我什至不知道实例名称在哪里。如果可能的话，我希望我的旋转地球被拖放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T11:14:23.280

假设你需要一个例子

*   鼠标悬停时停止旋转。
*   鼠标移出时开始旋转。
*   可以拖动和放下。

这是片段：

```
import flash.events.Event;

stop();

var globe:Sprite = new Sprite();

var isMouseOver:Boolean = false;

globe.graphics.beginFill(0,1);
globe.graphics.drawRect(-50,-50,100,100);
globe.graphics.endFill();

globe.addEventListener(MouseEvent.MOUSE_DOWN, function(e) { globe.startDrag();});
globe.addEventListener(MouseEvent.MOUSE_UP ,  function(e) { globe.stopDrag(); });
globe.addEventListener(MouseEvent.MOUSE_OVER, function(e) { isMouseOver = true; });
globe.addEventListener(MouseEvent.MOUSE_OUT , function(e) { isMouseOver = false; });

globe.addEventListener(Event.ENTER_FRAME, function(e) {globe.rotation += isMouseOver? 0 : 1;});

addChild(globe); 
```

# javascript - XMLHttpRequest 与 IE8 一起使用，但不适用于谷歌浏览器

> ID：11807883
> 
> 赞同：0
> 
> 时间：2012-08-04T10:31:21.357
> 
> 标签：javascript, internet-explorer, google-chrome

以下代码适用于 IE8，但不适用于 google chrome。我需要在代码中添加/修改以使其也可以与 chrome 一起使用。我听说过[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)和[http://en.wikipedia.org/wiki/Cross-origin_resource_sharing](http://en.wikipedia.org/wiki/Cross-origin_resource_sharing)。

```
function clickMe()
{

    var xmlHttp = null;
   var Url = "http://www.w3schools.com/ajax/gethint.asp?q=u";
    //var Url = "file:///D:/Durgesh/test.html";
    xmlHttp = new XMLHttpRequest();    
    xmlHttp.onreadystatechange = function()
    {

        if ( xmlHttp.readyState == 4 )
        {
                alert("status Code: " + xmlHttp.status);
            if ( xmlHttp.responseText == "Not found" )
            {
                alert("Not Found");
            }
            else
            {
                alert(xmlHttp.responseText);
            }
        }
    }
    xmlHttp.open( "GET", Url, true );
    xmlHttp.setRequestHeader('Access-Control-Allow-Origin', '*'); 
    xmlHttp.send( null );

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T10:52:19.163

Access-Control-Allow-Origin 必须是服务器端。;)

# seo - 谷歌语言和网站语言依赖

> ID：11807885
> 
> 赞同：0
> 
> 时间：2012-08-04T10:32:01.640
> 
> 标签：seo

我有一个语言网站，比如英语和德语。sitename.com/ - 用于英语 sitename.com/de/ - 用于德语

目前使用 Google.com 的英语用户，他们输入公司名称并在结果中看到我的网站，其中包含指向 sitename.com/ 的链接并有英文描述 - 这很好。

现在，通过 google.de 搜索的德语用户，他们输入公司名称，但又一次......他们在结果中看到我的网站指向 sitename.com/ 并且有英文描述 - 不好。我如何使它指向 sitename.com/de/ 并用德语进行描述？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T22:29:19.163

谷歌最强的地理定位信号是顶级域。不幸的是，在您的情况下，您有一个通用顶级域，但是您可以做两件事来在 google.de 上对您网站的德语部分进行排名：

1.  **在 Google Webmaster Tools 中为 /de/ 子文件夹设置地理目标**。这是一个两步过程：首先您在 Google 网站管理员工具中验证您的主 .com 域，然后您可以将 yourdomain.com/de/ 验证为另一个网站并在*站点配置*>*设置*>*地理目标下设置一个地理目标*。[查看有关地理定位的更多信息](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=62399)
2.  **从德语网站获取指向您网站的德语部分的链接**。如何获得此类链接很大程度上取决于您的网站主题，因此我无法给您具体建议。

# symfony - 如何从 Symfony2 请求对象中删除单个参数

> ID：11807888
> 
> 赞同：6
> 
> 时间：2012-08-04T10:32:36.093
> 
> 标签：symfony

我有以下请求对象，并希望在绑定到表单之前从控制器中删除“email_suffix”。这可能吗？

```
public 'request' => 
    object(Symfony\Component\HttpFoundation\ParameterBag)[8]
      protected 'parameters' => 
        array
          'registration' => 
            array
              'email' => string 's' (length=1)
              'email_suffix' => string 'y.com' (length=5)
              'password' => string '1234' (length=4)
              '_token' => string '967d99ba9f955aa67eb9eb004bd331151d816d06' (length=40)
          'product_id' => string '2' (length=1)
          'product_description' => string '12 month membership' (length=19)
          'product_price' => string '6.99' (length=4) 
```

我试过了 `$request->request->remove("registration[email_suffix]");`

我可以做 $request->request->remove("registration") - 这行得通。

现在，我正在这样做：

```
$requestReg = $request->request->get('registration');
$requestReg['email'] = $requestReg['email'].'@'.$requestReg['email_suffix'];
unset($requestReg['email_suffix']);
$request->request->set('registration',$requestReg); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2014-12-12T13:51:30.823

可以从 symfony2 的请求对象中添加和删除参数。您必须查看[ParameterBag Component](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php)，有这样的方法称为`remove($key)`，这就是您所需要的。

因此，如果您从控制器对象调用它，您的请求的解决方案将是这样的：

```
$this->get('request')->query->remove('email_suffix'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T12:48:53.773

我不确定，如果你的电话`$request->request`是错字。

您应该使用`$request->attributes`which 代表`ParameterBag`类。

如果您将通过[ParameterBag](https://github.com/symfony/symfony/blob/master/src/Symfony/Component/HttpFoundation/ParameterBag.php)中的方法，您会发现无法取消设置数组内的变量。

# c# - VS .Net 中存储的 dll 库在哪里？

> ID：11807889
> 
> 赞同：1
> 
> 时间：2012-08-04T10:32:39.893
> 
> 标签：c#, dll, shared-libraries

我想知道 dll 文件在 Visual Studio 中的存储位置，以及在以下情况下将它们保存在那里或在其他地方合并的最佳方法是否是：

1) 我的解决方案包括 ac# 库项目，同一解决方案中的其他项目引用该项目。我的理解是库项目将dll存储在自己的目录/bin文件夹中。那么我是否需要通过指向该外部文件夹中的 dll 来建立对该库的引用？问题是这个 dll 应该稍后与引用 dll 文件的项目一起提供。引用 dll 文件的项目是否会在自己的项目 /bin 文件夹中创建 dll 的副本，或者它是如何工作的？

2) 我应该将外部库复制到我喜欢以编译方式发布的项目引用的位置吗？是否应该将 dll 复制并引用到使用此类外部库的每个项目的 bin 文件夹中？

我对如何进行练习感到有些困惑，并且在此处的其他帖子中找不到直接的答案。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T10:43:54.677

如果您可以为您引用的 dll 设置两个解决方案，另一个为您的项目设置两个解决方案

1.  创建一个依赖文件夹，您将在其中设置所有需要的 dll 二进制文件
2.  在所有将创建要引用的 dll 的项目上设置此依赖项文件夹的路径
3.  在您的解决方案上设置构建顺序以首先构建您的 dll，然后在构建引用您的 dll 的项目之后

部署它时，请确保创建依赖项文件夹

供您参考，您的应用程序首先在 GAC 文件夹 (windows\assembly) 上查看，然后在当前路径上查看，然后在使用 PATH 环境变量之后。

# asp.net - 如果 Web 应用程序发生任何错误，如何发送错误信息邮件

> ID：11807891
> 
> 赞同：1
> 
> 时间：2012-08-04T10:33:06.743
> 
> 标签：asp.net, .net, c#-4.0

这里的场景是我有很多`.aspx pages`如果任何页面出现错误，它将重定向到错误页面

`Web.config`：

```
<customErrors mode="On" defaultRedirect="customErrorPage.aspx">
       <error statusCode="404" redirect="Error404.aspx" />
</customErrors> 
```

如果我收到 404 错误，它将重定向到`Error404.aspx`工作正常。

但是，如果他们有任何其他错误*（禁止、连接丢失、服务不可用等），*那么我想重定向到`customErrorPage.apsx`.

我想在显示自定义错误页面时发送一封包含错误信息（错误页面名称、错误状态代码）的电子邮件，几分钟后它将自动将用户重定向到`login.aspx`.

我试过（不工作）

```
void Application_Error(object sender, EventArgs e) 
{ 
        ex = (HttpException)Server.GetLastError();
        int errorcode = ex.GetHttpCode();
  //    Response.Redirect("Errorpage.aspx?id='" + errorcode + "'&msg='" + message + "'");
} 
```

我的自定义错误页面

```
protected void Page_Load(object sender, EventArgs e)
{
         getUrl = HttpContext.Current.Request.Url.ToString();
        // string error=  HttpContext.Current.Error.ToString();
        //   HtmlMeta meta = new HtmlMeta();
       //   HtmlHead head = (HtmlHead)Page.Header;
        // meta.HttpEquiv = "refresh";
        //   meta.Content = "10;   url=Login.aspx";
        //  head.Controls.Add(meta);
}

protected void Page_UnLoad(object sender, EventArgs e)
{
       //send mail function
       Email.Send("abc@asa.com", "Error Log", "custom error", true);
} 
```

也让我知道他们是否有其他好的方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-29T10:24:56.920

这是我如何解决的：

**Globasl.asax：**

```
 void Application_Error(object sender, EventArgs e) 
    {
        Exception objErr = Server.GetLastError().GetBaseException();
        string err = "<br><b>Error in: </b>" + Request.Url.ToString() +
            "<br><b>Error Message: </b>" + objErr.Message.ToString() +
            "<br><b>Stack Trace:</b><br>" + objErr.StackTrace.ToString();
       //Email sending method
       Email.Send("example@gmail.com", "Error", err, true);
    } 
```

**网络配置：**

```
<customErrors mode="Off" defaultRedirect="Customerrorpage.aspx">
      <error statusCode="404" redirect="Error404.aspx" />
</customErrors> 
```

**Customerrorpage.aspx ：（** *在几秒钟内自动重定向到登录页面）*

```
protected void Page_Load(object sender, EventArgs e)
    {
        Response.AppendHeader("Refresh", "4; url=Login.aspx");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T10:46:57.780

我建议为此使用[ELMAH](http://code.google.com/p/elmah/) - 它是专门为记录未处理的异常而构建的（并且可以发出信号以捕获其他异常）。

对于不同的配置，有几个不同的 nuGet 包，包括通过电子邮件发送异常详细信息。

它捕获大量数据并以非常易读的方式对其进行格式化。

# android - 偶尔“转换为 Dalvik 格式失败，错误 1”

> ID：11807893
> 
> 赞同：2
> 
> 时间：2012-08-04T10:33:11.250
> 
> 标签：android, eclipse, adt

SO上有一些类似的问题，但不是我的情况，因为它只是**偶尔发生**

当我使用 Eclipse 导出一个`signed`包时，在输入所有密码并传递到最终屏幕进行选择`Finish`后，它会说

```
Occasionally “Conversion to Dalvik format failed with error 1” 
```

这只发生在大约 50% 的时间里，不需要修复任何东西，只需重试即可。

以前有人经历过吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-30T16:00:58.590

我尝试了所有方法，但唯一对我有用的解决方案是完全删除 bin 文件夹，清理项目并导出签名的 apk。但不幸的是，我必须一次又一次地这样做......但它仍然有效。

# embedded - 将 q 寄存器中的 128 位数据转换（求和）为 16 位数据的高效算法

> ID：11807894
> 
> 赞同：2
> 
> 时间：2012-08-04T10:33:20.570
> 
> 标签：embedded, arm, neon, intrinsics, cortex-a8

我在 q-register 中有 128 位数据。我想对这个 q 寄存器中的单个 16 位块求和，最终得到一个 16 位的最终总和（任何超过 16 位的进位都应该被添加到这个 16 位 num 的 LSB 中）。

我想要实现的是：

VADD.U16（一些 16 位变量）{q0[0] q0[1] q0[2] ......... q0[7]}

但使用内在函数，

如果有人能给我一个算法，我将不胜感激。

我尝试使用成对加法，但我最终得到了一个相当笨拙的解决方案..

下面是它的外观：

int convert128to16(uint16x8_t data128){

```
 uint16_t data16 = 0;
    uint16x4_t ddata;
    print16(data128);

    uint32x4_t data = vpaddlq_u16(data128);
    print32(data);

    uint16x4_t data_hi = vget_high_u16(data);
    print16x4(data_hi);

    uint16x4_t data_low = vget_low_u16(data);
    print16x4(data_low);

    ddata = vpadd_u16( data_hi, data_low);
    print16x4(ddata); 
```

}

它仍然不完整且有点笨拙。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T12:31:40.213

您可以使用水平添加指令：

这是一个片段：

```
 uint16x8_t input = /* load your data128 here */

  uint64x2_t temp   = vpaddlq_u32 (vpaddlq_u16 (input)); 

  uint64x1_t result = vadd_u64 (vget_high_u64 (temp), 
                                vget_low_u64  (temp));

  // result now contains the sum of all 16 bit unsigned words
  // stored in data128\. 

  // to add the values that overflow from 16 bit just do another 16 bit
  // horizontal addition and return the lowest 16 bit as the final result:

 uint16x4_t w = vpadd_u16 (
     vreinterpret_u16_u64 (result),                              
     vreinterpret_u16_u64 (result));

 uint16_t wrappedResult = vget_lane_u16 (w, 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T12:21:33.820

如果您的目标是对 16 位块（模 16 位）求和，则可以使用以下片段：

```
uin16_t convert128to16(uint16x8_t data128){

  data128 += (data128 >> 64);

  data128 += (data128 >> 32);

  data128 += (data128 >> 16);

  return data128 & 0xffff;

} 
```

# html - CSS - 如何制作 当用户更改浏览器大小时并排不换行？

> ID：11807899
> 
> 赞同：1
> 
> 时间：2012-08-04T10:33:38.860
> 
> 标签：html, css

CSS - 当用户更改浏览器大小时如何使并排不换行？ [http://jsfiddle.net/QWSHw/](http://jsfiddle.net/QWSHw/)

```
<div class="a">
<div class="gridrow">
    <div class="griditem">a
    </div>
    <div class="griditem">b
    </div>
</div> 
```

```
 .a{
background: black;
position: absolute;
top:10px;
width:100%;
}
.gridrow{
background: gray;
width:100%;
}
.griditem{
background: blue;
float:left;
width:300px;
height:300px;
}​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T10:40:17.457

既然你在使用`float: left`，你唯一能做的就是`min-width`为`.gridrow`

```
.gridrow{
    background: gray;
    width:100%;
    min-width: 600px;
} 
```

当然，这会强制设置最小屏幕尺寸`600px`，如果用户将浏览器窗口的大小调整为小于 ，`600px`则将显示水平滚动条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T10:42:34.067

`min-width:`在包含的 Div 上设置 a 。这将阻止它的大小减小到您的内容环绕的程度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T10:45:57.357

我不确定你到底想要完成什么，但我猜你是在谈论响应式或自适应设计。

您需要将宽度值设置为“%”而不是“px”，这将导致浏览器计算每个视口更改的宽度并进行相应调整

我建议您使用 css 框架：

[推特引导](http://twitter.github.com/bootstrap/)

[基础3](http://foundation.zurb.com/)

# user-permissions - 团队基础用户权限

> ID：11807902
> 
> 赞同：0
> 
> 时间：2012-08-04T10:33:44.717
> 
> 标签：user-permissions

我们正在使用 C# 开发一个项目，5 个开发人员，我们正在使用团队基础在开发人员之间共享代码。每个开发人员只能签入和编辑他的部分，并且允许他查看其他开发人员的部分。

我们暂时在群组中添加新成员。

我想给他的权限是： - 除了他的部分之外，不能查看任何源代码 - 编辑和签​​入/签出他的代码。

我们不希望他查看我们的任何代码，但他会使用我们的一些方法，我们只希望他查看这些类。但是我们希望它们消失的其他类。

这个怎么做？

我正在使用 tfs 2010

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T04:06:18.607

您需要成为项目管理员才能添加 TFS 组和更新权限/安全性。

`Team Explorer`> 右键单击​​团队项目 > `Team Project Settings`> `New`> 添加组名称，例如承包商 > `Ok`> 双击组名称 > 添加承包商 >`Ok`

然后右键单击源代码管理中的各个文件夹/文件 > `Properties`> `Security`> `Add TFS Group`> 选择您的新组 > 为该文件夹/文件选择该组的权限。

`Read`您可以通过选中权限`Deny`复选框来阻止承包商访问代码。

# javascript - 如何使用 jQuery 或 JavaScript 使鼠标滚轮不起作用？

> ID：11807906
> 
> 赞同：0
> 
> 时间：2012-08-04T10:34:26.260
> 
> 标签：javascript, jquery, html

如何阻止用户使用鼠标滚轮滚动 HTML 页面？

通常我们使用鼠标滚轮滚动页面。即使用户触发鼠标滚轮，我也会保持页面静止。我该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T10:46:24.113

```
window.onmousewheel=function(){return false} 
```

[http://jsfiddle.net/vBCbP/](http://jsfiddle.net/vBCbP/)

# ruby - 在 Sinatra 中使用自定义类

> ID：11807914
> 
> 赞同：0
> 
> 时间：2012-08-04T10:35:30.580
> 
> 标签：ruby, sinatra

我正在开发一个 Sinatra 应用程序。为了简化结构以获得更容易的未来支持，我添加了一些自定义类，它们位于单独的文件中。我想要做的是让他们使用现有的助手和 sinatra 自己的功能（模型、会话等），而无需重复代码。

例如，我有一个助手**to_html**（文本），我想在 sinatra 路由和我自己的类中使用它，这些类也将在路由中使用。

我的 sinatra 应用程序以*经典*风格编写（如果您的建议很重要）。

可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T03:52:22.473

假设您在项目的根目录中有一个 helpers 目录，您可以在用于运行服务器的应用程序文件中执行类似的操作。

```
%w(helpers).each { |p| Dir[File.join(File.dirname(__FILE__), p, "*.rb")].each { |file| require file } } 
```

您需要在此下方包含您的路线才能使其正常工作。为了使这更加干净，您还可以拥有一个 routes/controllers 目录。只需将“路由”添加到该数组，如下所示：

```
%w(helpers routes).each { |p| Dir[File.join(File.dirname(__FILE__), p, "*.rb")].each { |file| require file } } 
```

这将需要你所有的助手然后你的路线。

# php - 启用了 full_special_chars 的 php 提供了错误的 $_GET 数组

> ID：11807915
> 
> 赞同：0
> 
> 时间：2012-08-04T10:35:36.240
> 
> 标签：php, filter, get

我有以下问题：

这些设置在 php.ini

```
filter.default = full_special_chars
filter.default_flags = 0 
```

如果从服务器请求如下 url：

```
http://server/action?param1=a&param2=b 
```

$_GET 将包含一个键“amp;param2”。

我怎样才能避免这种情况？（然后禁用上面的设置:)）

php 版本：带有 Suhosin-Patch (cli) 的 PHP 5.3.10（构建时间：2012 年 2 月 20 日 22:55:53）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T10:46:28.527

使用`html_entity_decode()`. 参考[这个！！](http://www.php.net/manual/en/function.html-entity-decode.php)

```
$a=htmlentities($_GET['url']); //$a=amp;blah

$b=html_entity_decode($a); //$b=&blah 
```

# assembly - 错误：`t1(,%di,2)' 不是有效的基/索引表达式

> ID：11807917
> 
> 赞同：0
> 
> 时间：2012-08-04T10:35:54.853
> 
> 标签：assembly, x86

下面是一个示例程序，我将其用作索引寻址模式的示例

```
.section .data
t1:
.int 1,3
.section  .text
.globl _start
_start:
mov $0, %di
mov t1(,%di,2), %bx
mov $1,%di
mov t1(,%di,2), %cx
add %cx,%bx
movl $1,%eax
int $0x80 
```

当我组装上面的代码时，我得到以下错误，

```
$ as indexed-add.s -o indexed-add.o
indexed-add.s: Assembler messages:
indexed-add.s:9: Error: `t1(,%di,2)' is not a valid base/index expression
indexed-add.s:11: Error: `t1(,%di,2)' is not a valid base/index expression 
```

我出错的任何想法

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T10:47:19.877

您要求汇编此指令（英特尔语法）：

```
mov bx, [t1 + di * 2] 
```

您不能像那样缩放 16 位寄存器（`di`在这种情况下）。只有 32 位寄存器可以像这条指令一样缩放：

```
mov bx, [t1 + edi * 2] 
```

有关有效的操作数编码，请参阅 Intel 或 AMD 的官方 CPU 文档。

# android - Android Libgdx SoundPool 内存错误

> ID：11807920
> 
> 赞同：1
> 
> 时间：2012-08-04T10:35:57.523
> 
> 标签：android, memory, libgdx, soundpool

在我的游戏中，在 libgdx 中完成，我有 4 种声音。其中三个低于 1 秒，第四个是 3 秒长的循环播放。在游戏开始时，所有声音都可以正确播放，但在尝试播放第 4 个声音之后会导致错误，没有播放声音：

```
E/AudioFlinger(   67): not enough memory for AudioTrack size=525780
D/MemoryDealer(   67):   AudioTrack (0x51e58, size=1048576)
D/MemoryDealer(   67):     0: 00051e70 | 0x00000000 | 0x00003480 | A
D/MemoryDealer(   67):     1: 0001b720 | 0x00003480 | 0x00003480 | A
D/MemoryDealer(   67):     2: 0001ad18 | 0x00006900 | 0x00003480 | A
D/MemoryDealer(   67):     3: 0001e4c0 | 0x00009D80 | 0x00003480 | A
D/MemoryDealer(   67):     4: 0001b678 | 0x0000D200 | 0x00003480 | A
D/MemoryDealer(   67):     5: 0001b350 | 0x00010680 | 0x00003480 | A
D/MemoryDealer(   67):     6: 00051f00 | 0x00013B00 | 0x000805E0 | A
D/MemoryDealer(   67):     7: 0001af00 | 0x000940E0 | 0x00003480 | A
D/MemoryDealer(   67):     8: 0001b140 | 0x00097560 | 0x00003480 | A
D/MemoryDealer(   67):     9: 0001f800 | 0x0009A9E0 | 0x00003480 | A
D/MemoryDealer(   67):    10: 0001ba40 | 0x0009DE60 | 0x00006900 | F
D/MemoryDealer(   67):    11: 00051ce0 | 0x000A4760 | 0x00003480 | A
D/MemoryDealer(   67):    12: 0001bac8 | 0x000A7BE0 | 0x00058420 | F
D/MemoryDealer(   67):   size allocated: 660192 (644 KB) 
```

过了一会儿，声音又回来了。Libgdx 使用 Android SoundPool 来实现这种效果。我曾尝试从 DDMS 强制 GC，虽然 gc 已执行，但没有播放声音。

[Libgdx Android 声音实现](http://code.google.com/p/libgdx/source/browse/trunk/backends/gdx-backend-android/src/com/badlogic/gdx/backends/android/AndroidSound.java)

# android - Flurry 将粉碎我的应用程序

> ID：11807921
> 
> 赞同：3
> 
> 时间：2012-08-04T10:36:24.437
> 
> 标签：android

我刚刚下载了适用于 Android 的 Flurry（移动分析），但是当我使用它时 - 我的应用程序就崩溃了。

错误：

```
08-04 13:10:34.945: I/dalvikvm(1313): Could not find method  com.flurry.android.FlurryAgent.logEvent, referenced from method myAppMethod
08-04 13:10:34.945: W/dalvikvm(1313): VFY: unable to resolve static method 359: Lcom/flurry/android/FlurryAgent;.logEvent (Ljava/lang/String;)V
08-04 13:10:34.945: D/dalvikvm(1313): VFY: replacing opcode 0x71 at 0x0013 
```

对于我使用的每种 Flurry 方法，我都会得到其中的几个。

我做了什么：下载最新的 3.0.1 SDK jar。将其添加到“外部 jars”下的构建路径中。使用 import com.flurry.android.FlurryAgent；在相关类中。在我的代码的相关位置添加了相关的 Flurry 方法调用（即`FlurryAgent.logEvent()`）。

我在设计时（在 Eclipse 中）没​​有错误，只有在运行时，应用程序会立即崩溃。我可以在我的 Android 项目的“引用库”下看到附加的 jar 和其中包含的类/方法。

我必须提到 jar 不在项目的文件夹中，但我真的不相信这是问题所在：-/

关于我做错了什么有什么想法吗？

非常感谢，D。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T11:15:31.700

检查项目属性 Java 构建路径，然后检查订单和导出选项卡，确保选择 FlurryAgent.jar。

# ruby - 如何彻底去除红宝石？

> ID：11807923
> 
> 赞同：4
> 
> 时间：2012-08-04T10:36:34.017
> 
> 标签：ruby, linux, rvm

我安装了多个版本的 Ruby，这会导致一些问题。如何完全删除它（所有版本）？我使用 Linux（Fedora）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-04T11:23:42.053

用于`rvm implode`摆脱 RVM 安装`yum`的 Rubies 并用于卸载分发包（如果有）。

来自 RVM 文档：

> implode - 删除它管理的所有 ruby​​ 安装，在 ~/.rvm 中的所有内容

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-04T11:45:45.870

如建议的那样，您可以使用`rvm implode`which removes ruby​​，

还可以找到红宝石：

```
whereis ruby 
```

然后删除它们中的每一个，例如：

```
rm -f /usr/local/bin/ruby 
```

然后检查`.installed.list`构建目录中的文件以检查已安装文件的列表。您还可以删除并确认删除了 ruby​​ 文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-05T04:29:22.180

这是一个技巧，但应该可以在不删除 RVM 的情况下卸载所有红宝石：

```
rvm uninstall --gems $(rvm list strings | tr "\n" ',')
rvm cleanup all 
```

# jquery - 尝试使用 jQuery 更新脚本标签中的函数

> ID：11807931
> 
> 赞同：0
> 
> 时间：2012-08-04T10:37:45.213
> 
> 标签：jquery, function, runtime, updating, script-tag

我正在创建一个调试器实用程序来帮助我进行调试，而无需遵循繁琐的重新部署过程并一直到页面进行测试。所以我创建了以下由各种按钮调用的函数。

```
 function updateTestCode()
    {
        $("script[for='testing']").html('');
        alert('Adding function ' + $('#_testArea').val());
        $("script[for='testing']").append($('#_testArea').val());

    }

function checkCode()
{
    alert('Calling Function ');
    try{
        validateFields();
    }catch(err)
    {
        form.showDebugMsg("Error When Running Script " + err);
    }
}

function generateScriptCode()
{
    $('#_testArea').val($("script[for='testing']").html());
} 
```

现在我想做的就是允许我更新下面函数的值并使用它而无需重新部署。

```
<script type="text/javascript" for='testing'>
function validateFields()
{
    alert('Hello World');

}</script> 
```

现在的问题是 Firefox 能够更新代码（IE 抛出错误）并检索它。但是当我尝试单击并执行脚本时，它仍然显示旧函数的结果。

任何想法我可能做错了什么？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T11:30:49.887

发生这种情况是因为您使用了相同的脚本标签并更改了内部文本。您必须添加一个新的脚本标签。

```
scriptContent = "... function ...";

// delete old tag
$("#testScript").remove();

// add a new one
$("<script id='testScript'/>").text(scriptContent).appendTo("head"); 
```

此外，您不能像在函数上那样使用`append()`向元素添加文本。`updateTestCode()`你必须使用`text()`.

```
// use text(), not append()
$("script[for='testing']").text($('#_testArea').val()); 
```

这是一个工作示例：http: [//jsfiddle.net/MtY3h/](http://jsfiddle.net/MtY3h/)

# python - 如何在 Perl 和 Python 中模拟命令提示符

> ID：11807932
> 
> 赞同：1
> 
> 时间：2012-08-04T10:37:59.757
> 
> 标签：python, perl, subprocess, wget, command-prompt

我通常使用 WGET 从某个网页下载一两个图像，我在命令提示符下执行以下操作：`wget 'webpage-url' -P 'directory to where I wanna save it'`. 现在如何在 Perl 和 Python 中自动化它？那是什么命令可以让我模拟，就好像我在命令提示符处输入命令一样？在 Python 中有很多类似的模块，比如子进程、操作系统等，我很困惑。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-04T11:15:46.650

在 Perl 中，最简单的方法是使用`LWP::Simple`：

```
use LWP::Simple qw(getstore);
getstore('www.example.com', '/path/to/saved/file.ext'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-04T10:45:22.827

```
import subprocess
subprocess.call(["wget", "www.example.com", "-P", "/dir/to/save"]) 
```

如果要读取 URL 并处理响应：

```
import urllib2
response = urllib2.urlopen('http://example.com/')
html = response.read() 
```

如何从 html 中提取图像，您可以[在此处](https://stackoverflow.com/questions/257409/download-image-file-from-the-html-page-source-using-python)阅读SO

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-04T12:17:41.393

在 Perl 中，您也可以使用`qx(yourcommandhere)`. 这是程序的外部调用。

所以，在你的例子中：`qx(wget 'webpage-url' -P '/home/myWebPages/')`。这对你来说已经足够了。

但是，正如**s0me0ne**所说，使用`LWP::Simple`更好。

如果文件中有 url 列表，则可以使用以下代码：

```
my $fh; # filehandler

open $fh, "<", "fileWithUrls.txt" or die "can't find file with urls!";

my @urls = <$fh>; # read all urls, one in each raw of file

my $wget = '/path/to/wget.exe';    

for my $url(@urls) {
    qx($wget $url '/home/myWebPages/');
} 
```

# ios - zxing专注于iOS

> ID：11807935
> 
> 赞同：1
> 
> 时间：2012-08-04T10:38:57.910
> 
> 标签：ios, zxing

我可能在这里遗漏了一些东西，但似乎 zxing 不支持自动对焦。在此处和 Google 上进行了一些搜索后，我没有找到任何可以提供任何见解的东西。

例如，在我的 iPhone 4 上使用样例 ScanTest 应用程序时，许多 QR 码是模糊且难以识别的。

所以，更具体一点：zxing 是否支持 iPhone 上的自动对焦，如果支持，你如何实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T15:48:34.573

嗯......我相信，除非被告知要这样做，否则相机会在非固定焦点的硬件上自行自动对焦。我认为可以做一个点击聚焦的事情，但 zxing 没有这样做。

# ios - 每台设备上接受的 AppStore 应用程序崩溃

> ID：11807936
> 
> 赞同：1
> 
> 时间：2012-08-04T10:39:04.227
> 
> 标签：ios, crash, app-store, crash-reports

今天早上刚刚发布了一个应用程序，我在所有可能的设备和模拟器上进行了测试，但是当我从商店下载它时，应用程序在启动时崩溃了。我在很多设备和iOS版本上测试过，但结果是一样的：

```
Incident Identifier: B34024C9-9F00-4E57-B3AB-068CFFC55119
CrashReporter Key:   81ac2324b459bfeeb1a13c007d9d04e59e6efaf2
Hardware Model:      iPhone4,1
Process:         iMatematica [9546]
Path:            /var/mobile/Applications/CFFA51F9-52F9-4555-8C5B-1B2DDF5E2D5B/iMatematica.app/iMatematica
Identifier:      iMatematica
Version:         ??? (???)
Code Type:       ARM (Native)
Parent Process:  launchd [1]

Date/Time:       2012-08-04 07:24:08.703 +0200
OS Version:      iPhone OS 5.1.1 (9B206)
Report Version:  104

Exception Type:  EXC_CRASH (SIGABRT)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   libsystem_kernel.dylib          0x35eb532c __pthread_kill + 8
1   libsystem_c.dylib               0x32a01208 pthread_kill + 48
2   libsystem_c.dylib               0x329fa298 abort + 88
3   iMatematica                     0x0007eee0 0x1000 + 515808
4   CoreFoundation                  0x355ff950 __handleUncaughtException + 68
5   libobjc.A.dylib                 0x379a633e _objc_terminate + 122
6   libc++abi.dylib                 0x359b53be _ZL19safe_handler_callerPFvvE + 70
7   libc++abi.dylib                 0x359b544a std::terminate() + 14
8   libc++abi.dylib                 0x359b681e __cxa_rethrow + 82
9   libobjc.A.dylib                 0x379a62a2 objc_exception_rethrow + 6
10  CoreFoundation                  0x35555506 CFRunLoopRunSpecific + 398
11  CoreFoundation                  0x35555366 CFRunLoopRunInMode + 98
12  UIKit                           0x33064864 -[UIApplication _run] + 544
13  UIKit                           0x33061cce UIApplicationMain + 1074
14  iMatematica                     0x00009a88 main (main.m:18)
15  iMatematica                     0x000039b0 0x1000 + 10672

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x35ea53a8 kevent + 24
1   libdispatch.dylib               0x3448ff04 _dispatch_mgr_invoke + 708
2   libdispatch.dylib               0x3448fc22 _dispatch_mgr_thread + 30

Thread 2:
0   libsystem_kernel.dylib          0x35eb5cd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x329bcf36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x329bccc8 start_wqthread + 0

Thread 3:
0   libsystem_kernel.dylib          0x35eb5cd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x329bcf36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x329bccc8 start_wqthread + 0

Thread 4 name:  WebThread
Thread 4:
0   libsystem_kernel.dylib          0x35ea5004 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x35ea51fa mach_msg + 50
2   CoreFoundation                  0x355d33ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x355d2124 __CFRunLoopRun + 876
4   CoreFoundation                  0x3555549e CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x35555366 CFRunLoopRunInMode + 98
6   WebCore                         0x31454c9c _ZL12RunWebThreadPv + 396
7   libsystem_c.dylib               0x329c272e _pthread_start + 314
8   libsystem_c.dylib               0x329c25e8 thread_start + 0

Thread 5 name:  com.apple.NSURLConnectionLoader
Thread 5:
0   libsystem_kernel.dylib          0x35ea5004 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x35ea51fa mach_msg + 50
2   CoreFoundation                  0x355d33ec __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x355d2124 __CFRunLoopRun + 876
4   CoreFoundation                  0x3555549e CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x35555366 CFRunLoopRunInMode + 98
6   Foundation                      0x3508ebb2 +[NSURLConnection(Loader) _resourceLoadLoop:] + 302
7   Foundation                      0x3508ea7a -[NSThread main] + 66
8   Foundation                      0x3512258a __NSThread__main__ + 1042
9   libsystem_c.dylib               0x329c272e _pthread_start + 314
10  libsystem_c.dylib               0x329c25e8 thread_start + 0

Thread 6:
0   libsystem_kernel.dylib          0x35eb5cd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x329bcf36 _pthread_wqthread + 610
2   libsystem_c.dylib               0x329bccc8 start_wqthread + 0

Thread 0 crashed with ARM Thread State:
    r0: 0x00000000    r1: 0x00000000      r2: 0x00000001      r3: 0x00000000
    r4: 0x00000006    r5: 0x3ec0cd98      r6: 0x00000002      r7: 0x2fdff9c0
    r8: 0x3f02bce0    r9: 0x00000000     r10: 0x0021f0a0     r11: 0x33410c0d
    ip: 0x00000148    sp: 0x2fdff9b4      lr: 0x32a0120f      pc: 0x35eb532c
  cpsr: 0x00000010 
```

问题只发生在我身上或与上个月相同：那是签署应用程序的苹果服务器的问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-04T12:40:00.893

我解决了问题：将语言从意大利语（我的母语）更改为英语，应用程序正常工作。这解释了为什么 AppReview 团队没有注意到崩溃，并且是由于 xib 文件中缺少本地化：“无法加载 NIB 包：'NSBundle (loaded)' with name 'MasterViewController'”

# python - Django - 视图没有返回 HttpResponse 对象

> ID：11807937
> 
> 赞同：0
> 
> 时间：2012-08-04T10:39:06.233
> 
> 标签：python, django

我正面临这个异常错误，我对此感到困惑，因为这种方法在类似的系统中工作，感谢任何帮助或指示。非常感谢！

异常值：视图 Project.qna.views.add_vote 未返回 HttpResponse 对象。

```
def add_vote(request):

if request.method == "POST":
    q_id = request.POST['vote_form_q_id']
    a_id = request.POST['vote_form_a_id']
    vote_value = request.POST['vote_form_value']

    ok = False
    vote_num = None
    name = None

    if q_id:
        try:
            question = Question.objects.get(id=q_id)
            question.num_vote += int(vote_value)
            question.save()
            vote_num = question.num_vote
            name = 'Question_'+str(q_id)
            ok = True

        except Question.DoesNotExist:
            pass
    elif a_id:
        try:
            answer = Answer.objects.get(id=a_id)
            answer.num_vote += int(vote_value)
            answer.save()
            vote_num = answer.num_vote
            name = 'Answer_'+str(a_id)
            ok = True
        except Answer.DoesNotExist:
            pass

    if ok and request.is_ajax:
        result = simplejson.dumps({
            "vote_num": vote_num,
        }, cls=LazyEncoder)
        response = HttpResponse(result, mimetype='application/javascript')

        response.set_cookie(name, datetime.now)
    return response 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T10:45:04.940

请修正你的缩进，而且你似乎有很多可以简化的解决方法。

每个 django 视图都应该返回一个 HttpResponse 对象，您似乎有很多地方不是这种情况。为了缩小您的问题范围，将每个更改`pass`为一个`print`语句，以查看您的代码实际失败的位置。如果您可以展示您的 POST 数据，那将非常有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T13:25:49.213

这是未经测试的，但它是一个更清洁、更健壮的设计，我相信它符合您的逻辑，并强调了返回 an`HttpResponse`是必要的点：

```
def add_vote(request):
    if not (request.method == 'POST' and request.is_ajax):
        return # Some suitable response here
    try:
        vote_value = int(request.POST.get('vote_form_value',''))
    except ValueError as e:
        pass # Some suitable response here

    def saveobj(model, key, val): # helper function to reduce code repetition
        item = model.objects.get(id=key)
        item.num_vote += val
        item.save()
        return item.num_vote, '%s_%s' % (model.__class__.__name__, key)

    for model, key in [(Question, 'vote_form_q_id'), (Answer, 'vote_form_a_id')]):
        try:
            new_vote_value, name = saveobj(model, request.POST[key], vote_value)
            break
        except (KeyError, ObjectDoesNotExist) as e:
            continue # or error out
    else:
        pass # neither question or answer found - so suitable response here

    # return ajax response here.... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T10:45:23.083

好吧，如果不看到您对视图提出了什么样的请求，就很难判断。但是你是在发送 POST 请求吗？因为您不以任何方式处理 GET 请求。缩进也是错误的。但这可能只是剪切和粘贴出错了。

# javascript - jQuery：在整个文档上触发按键功能，但不在输入和文本区域内？

> ID：11807944
> 
> 赞同：48
> 
> 时间：2012-08-04T10:39:33.853
> 
> 标签：javascript, jquery, keypress

我有这个……</p>

```
$(document).keypress(function(e) {
        if ( e.keyCode === 119 ) // w
            doSomething();
    }); 
```

在我的文档上按“w”时，`doSomething()`函数会触发。`input`当我当前在字段中输入（焦点）时，如何防止它触发`textarea`？

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-08-04T10:41:10.250

您必须在事件之后过滤掉元素，而不是在选择器中，像这样

```
$(document).on('keypress', function(e) {
    var tag = e.target.tagName.toLowerCase();
    if ( e.which === 119 && tag != 'input' && tag != 'textarea') 
        doSomething();
}); 
```

这将检查 的标记名`event.target`，即事件源自的元素，并且仅在事件不是源自输入或文本区域时触发该函数。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-04T11:10:54.353

如果您的事件处理程序绑定到`document`，则该事件已经在 input 元素上引发并冒泡到 html 元素，因此您必须在处理程序本身的代码中处理排除。另一种方法是专门为输入元素绑定第二个处理程序，以防止事件冒泡，但这可能不是正确的方法。

[**代码演示**](http://jsfiddle.net/qESht/2/)

```
$(function() {
    $(document).keypress(function(e) {
        if ($(e.target).is('input, textarea')) {
            return;   
        }
        if (e.which === 119) doSomething();
    });
});​ 
```

ps 您可以查看[jQuery 事件对象文档](http://api.jquery.com/category/events/event-object/)以了解它公开了哪些属性。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-04T11:26:33.697

在 jQuery 中，`e.which`是规范化的属性，而不是`e.keyCode`.

要检查您是否不在输入中，您可以检查`document.activeElement`：

```
$(document).keypress(function(e) {
    if (e.which === 119 && !$(document.activeElement).is(":input,[contenteditable]")) {
        doSomething();
    }
}); 
```

演示。[http://jsfiddle.net/pxCS2/1/](http://jsfiddle.net/pxCS2/1/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-14T13:04:49.840

最简单和完美的解决方案是：

```
$(document).keypress(function(e) {
    if (e.which == 119 && !$(':focus').length) {
        doSomething();
    }
}); 
```

# linux - 如何在 linux 中获取连接到 Internet 的程序列表？

> ID：11807945
> 
> 赞同：0
> 
> 时间：2012-08-04T10:39:36.833
> 
> 标签：linux, process, internet-connection

在 linux 中，如何获取当前从 Internet 连接（并正在接收数据）的程序列表？

iftop 之类的命令很好，但不会显示基于进程的统计信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T10:42:10.497

`netstat`将向您显示所有已建立的连接。使用`-p`它来显示与每个相关的过程。但是，它不会向您显示有关他们收到的数据量的任何信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-04T11:11:06.963

您可以使用 lsof 实用程序列出有关进程打开的文件的信息

```
lsof -i 
```

将仅显示使用过的互联网资源

# java - java - odbc - 插入语法错误

> ID：11807950
> 
> 赞同：0
> 
> 时间：2012-08-04T10:39:51.767
> 
> 标签：java

我正在尝试通过 java 通过 odbc 驱动程序更新访问数据库。

表名是form1

执行此命令时出现语法错误：

```
updates="INSERT INTO form1 
(entrydate,name,gender,month,date,phno,emailid,facebookid,address,semester,
bloodgroup,slno,college,department,liveprojects,trainings); 

values("+abc+",'"+t3.getText()+"','"+t4.getText()+"',"+def+","+def1+","+zzz+",'"
      +t8.getText()+"','"+t9.getText()+"','"+t10.getText()+"',"+aaaa+",'"
      +t12.getText()+"',"+xyz+",'"+t13.getText()+"','"+dd+"','sa','da')"; 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T10:43:55.237

您的陈述有两个问题 - 一个真实的和一个潜在的问题：

*   real：关键字前的分号`values`需要去掉
*   潜在性：语句需要转换为与参数一起使用，否则任何字符串参数的正文中的单引号都会导致语法错误。

以下是如何切换到参数化准备好的语句：

```
String updates="INSERT INTO form1 (entrydate,name,gender,month,date,phno,emailid,facebookid,address,semester,bloodgroup,slno,college,department,liveprojects,trainings) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?,?)";
PreparedStatement psUpd = con.prepareStatement(updates);
psUpd.setInt(1, abc);
psUpd.setString(2, t3.getText());
psUpd.setString(3, t4.getText());
psUpd.setInt(4, def);
psUpd.setInt(5, def1); // The types of parameters need to match the type of setXYZ
... // Continue for the remaining parameters, then call
psUpd.executeUpdate(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T11:27:33.587

第一个问题：

```
updates="INSERT INTO form1 
(entrydate,name,gender,month,date,phno,emailid,facebookid,address,semester,
bloodgroup,slno,college,department,liveprojects,trainings); 
```

**你用 ; 分隔字段和值 但它将是空白的 **

其次最好使用prepareStatement

```
String sql ="INSERT INTO TableName  
(entrydate,name,gender,month,date,phno,emailid,facebookid,address,semester,
bloodgroup,slno,college,department,liveprojects,trainings) values(?,?,?,?,?,?,?,?,?,?,?,?,?,?); 

    PreparedStatement ps = con.prepareStatement(sql );    
     int index = 1;
    ps.setInt(index++, abc);
    ps.setString(index++, t3.getText());
    ps.setString(index++, t4.getText());
    ps.setInt(index++, def);
    ps.setInt(index++, def1); // The types of parameters need to match the type of setXYZ
    ... // Continue for the remaining parameters, then call
    ps.executeUpdate(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T10:43:42.510

尝试删除`;`之前的`values`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T10:47:04.410

**1.**

直接使用`INSERT INTO form1 values(value1,value2......);` **。**

**2.**如果您想坚持自己的格式...然后**进行以下更改。**

**-**删除`;` **之前** `values.`

**-**要插入**逗号**，**最好使用** `","` **而不是** `','`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-04T10:55:22.707

列名后的分号 (;) 是罪魁祸首。您正在通过这样做来终止声明。只需删除 ; . 您的代码将起作用。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-04T11:45:12.267

尝试这个.....

```
updates="INSERT INTO form1(entrydate,name,gender,month,date,phno,emailid,facebookid,address,semester,bloodgroup,slno,college,department,liveprojects,trainings) 
values( '"+abc+"','"+t3.getText()+"','"+t4.getText()+"','"+def+"','"+def1+"','"+zzz+"','" +t8.getText()+"','"+t9.getText()+"','"+t10.getText()+"','"+aaaa+"','"
  +t12.getText()+"','"+xyz+"','"+t13.getText()+"','"+dd+"','sa','da')"; 
```

# python - Django模型字段在遍历xml标签时递归地放入数据

> ID：11807955
> 
> 赞同：0
> 
> 时间：2012-08-04T10:40:40.243
> 
> 标签：python, django, django-models, xml-parsing, elementtree

这是我的模型课

```
#!/usr/bin/python

from django.db import models

class olWS(models.Model):
    country=models.CharField(max_length=4)
    comment=models.TextField() 
```

这就是我尝试在模型字段中递归地输入值的方式，同时从 django shell 迭代 xml 数据。

```
>>> from ol.models import olWS
>>> import xml.etree.cElementTree as ET
>>> tree=ET.ElementTree(file='data1')
>>> ws=olWS()
>>> for el in tree.iter():
...     if el.tag=='cusotm_var4':
...         ws.country=el.text
...     if el.tag=='comments':
...         ws.comment=el.text
...
>>> ws.save()
>>> ws.id
1
>>> ws.country
'US'
>>> ws.comment
'where are my cds i ordered' 
```

我得到的只是模型中输入的一行。如何在模型字段中获取 xml 数据中迭代的所有值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T12:01:32.253

您需要在循环中创建并保存您的实例；您只是在示例中的循环中分配值。

```
for el in tree.iter():
    ws = olWS()
    ws.country = el.text if el.tag == 'custom_var4' else ''
    ws.comment = el.text if el.tag == 'comments' else ''
    ws.save() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T10:48:36.753

您需要为每一行做一个模型实例，但由于元素似乎不是对象节点的子节点而是平面列表，您可以将两个值保存到 dict 中，然后在两者都设置后保存模型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T11:02:05.440

假设您在 XML 中固定了 order of`'custom_var_4'`和`'comments'`elements 并且两者都存在，您可以将代码改进为：

```
>>> for el in tree.iter():
...     if el.tag=='cusotm_var4':
...         ws.country=el.text
...     if el.tag=='comments':
...         ws.comment=el.text
...         ws.save() 
```

注意：`ws.save()`在第二个如果。

免责声明：您需要注意像只有一个元素存在等异常。

# sql - SQL Server 2008 错误 4145

> ID：11807965
> 
> 赞同：1
> 
> 时间：2012-08-04T10:42:18.217
> 
> 标签：sql, database, sql-server-2008, syntax

我在 SQL 中使用了以下代码

```
SELECT 
        Stu_info.Id_num, 
        Stu_info.Stu_name, 
        Development_fee.Dvf, 
        Tuition_fee.Acy, 
        Tuition_fee.Tui_fee, 
        Registration_fee.Reg_fee, 
        Form_fill_up_fee.Acy, 
        Form_fill_up_fee.FFF, 
        Examination_fee.E_typ, 
        Examination_fee.Exm_fee, 
        monthly_instal.Instm, 
        monthly_instal.Paid     

FROM 
        [SUIMT].[dbo].[Stu_info], 
        [SUIMT].[dbo].[Development_fee], 
        [SUIMT].[dbo].[Tuition_fee], 
        [SUIMT].[dbo].[Registration_fee], 
        [SUIMT].[dbo].[Form_fill_up_fee], 
        [SUIMT].[dbo].[Examination_fee], 
        [SUIMT].[dbo].[monthly_instal]
WHERE 
        Development_fee.Id_num, 
        Tuition_fee.Id_num, 
        Registration_fee.Id_num, 
        Form_fill_up_fee.Id_num, 
        Examination_fee.Id_num, 
        monthly_instal.Id_num   = Stu_info.Id_num 
```

但它显示错误说

```
"Msg 4145, Level 15, State 1, Line 3
An expression of non-boolean type specified in a context where a
condition is expected, near ','". 
```

你能帮我解决这个问题吗？我将不胜感激提供一个例子，这样我就可以更容易地理解它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T10:45:08.873

该`WHERE`条款的目的是什么？你是这个意思吗？

```
WHERE
      Stu_info.Id_num = Development_fee.Id_num
  AND Stu_info.Id_num = Tuition_fee.Id_num
  AND Stu_info.Id_num = Registration_fee.Id_num
  AND Stu_info.Id_num = Form_fill_up_fee.Id_num
  AND Stu_info.Id_num = Examination_fee.Id_num
  AND Stu_info.Id_num = monthly_instal.Id_num 
```

此外，using`FROM tableA, TableB, TableC`是一种非常古老的表示法。 `ANSI-92`标准用途`JOIN`...

```
SELECT
  Stu_info.Id_num, Stu_info.Stu_name, Development_fee.Dvf, Tuition_fee.Acy, Tuition_fee.Tui_fee, Registration_fee.Reg_fee, Form_fill_up_fee.Acy, Form_fill_up_fee.FFF, Examination_fee.E_typ, Examination_fee.Exm_fee, monthly_instal.Instm, monthly_instal.Paid     
FROM
  [SUIMT].[dbo].[Stu_info]
INNER JOIN
  [SUIMT].[dbo].[Development_fee]
    ON Stu_info.Id_num = Development_fee.Id_num
INNER JOIN
  [SUIMT].[dbo].[Tuition_fee]
    ON Stu_info.Id_num = Tuition_fee.Id_num
INNER JOIN
  [SUIMT].[dbo].[Registration_fee]
    ON Stu_info.Id_num = Registration_fee.Id_num
INNER JOIN
  [SUIMT].[dbo].[Form_fill_up_fee]
    ON Stu_info.Id_num = Form_fill_up_fee.Id_num
INNER JOIN
  [SUIMT].[dbo].[Examination_fee]
    ON Stu_info.Id_num = Examination_fee.Id_num
INNER JOIN
  [SUIMT].[dbo].[monthly_instal]
    ON Stu_info.Id_num = monthly_instal.Id_num 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-04T10:54:59.423

您应该使用**正确的 ANSI SQL-92 JOIN 语法**（`INNER JOIN, LEFT OUTER JOIN`等）和表别名，以使您的查询更易于理解和阅读 - 例如：

```
SELECT 
    stu.Id_num, stu.Stu_name, 
    df.Dvf, 
    tf.Acy, tf.Tui_fee, 
    rf.Reg_fee, 
    ffuf.Acy, ffuf.FFF, 
    ef.E_typ, ef.Exm_fee, 
    mi.Instm, mi.Paid     
FROM 
    [SUIMT].[dbo].[Stu_info] stu
INNER JOIN 
    [SUIMT].[dbo].[Development_fee] df ON df.Id_num = stu.id_num
INNER JOIN 
    [SUIMT].[dbo].[Tuition_fee] tf ON tf.Id_num = stu.id_num
INNER JOIN 
    [SUIMT].[dbo].[Registration_fee] rf ON rf.Id_num = stu.id_num
INNER JOIN  
    [SUIMT].[dbo].[Form_fill_up_fee] ffuf ON ffuf.Id_num = stu.id_num
INNER JOIN 
    [SUIMT].[dbo].[Examination_fee] ef ON ef.Id_num = stu.id_num
INNER JOIN  
    [SUIMT].[dbo].[monthly_instal] mi ON mi.Id_Num = stu.Id_num 
```

这样，您甚至根本不需要丑陋的`WHERE`条款......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T10:45:21.943

`AND`用or分隔你的子句`OR`，而不是逗号

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T10:49:32.377

```
SELECT Stu_info.Id_num, Stu_info.Stu_name, Development_fee.Dvf, Tuition_fee.Acy, Tuition_fee.Tui_fee, Registration_fee.Reg_fee, Form_fill_up_fee.Acy, Form_fill_up_fee.FFF, Examination_fee.E_typ, Examination_fee.Exm_fee, monthly_instal.Instm, monthly_instal.Paid     
FROM [SUIMT].[dbo].[Stu_info], 
    [SUIMT].[dbo].[Development_fee], 
    [SUIMT].[dbo].[Tuition_fee], 
    [SUIMT].[dbo].[Registration_fee], 
    [SUIMT].[dbo].[Form_fill_up_fee], 
    [SUIMT].[dbo].[Examination_fee], 
    [SUIMT].[dbo].[monthly_instal]
WHERE Development_fee.Id_num=Tuition_fee.Id_num and 
      Registration_fee.Id_num=Form_fill_up_fee.Id_num and 
      Examination_fee.Id_num=monthly_instal.Id_num  and
      monthly_instal.Id_num=Stu_info.Id_num 
```

# c++ - 如何将 oracle oci 库添加到 C++ eclipse

> ID：11807970
> 
> 赞同：0
> 
> 时间：2012-08-04T10:42:39.470
> 
> 标签：c++, eclipse, oracle

我正在用 C++ 为 Oracle 编写一个方法。我使用 OCI 库和 Eclipse 作为我的 IDE。代码已完全编译，但出现此运行时错误：

```
"error while loading shared libraries: libocci.so.11.1: cannot open shared object file: No such file or directory " 
```

我通过属性 > c/c++ 通用/路径和符号 > 库包含了 occi 和 clntsh 和 nnz11

我不知道如何解决这个错误，请帮助谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-06T13:13:33.603

IDE不会像libocci.so.11.1那样你必须转换成像libocci.so

ln -s libocci.so.11.1

那么它将被重命名为 libocci.so

然后编译代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-05T10:52:05.107

哇 。最后我做到了，通过一个变量并将其放入 .bashrc

1- 导出 LD_LIBRARY_PATH=/opt/oracle/instantclient “库的路径”，然后 2- root@user:~# vi .bashrc “确保您在 root 中” 3- LD_LIBRARY_PATH=/opt/oracle/instantclient/ “将这两行添加到文件中“导出 LD_LIBRARY_PATH

:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T11:31:56.140

Your compiler finds the libraries because your project probably specifies where to look for libs (-L flag on the linker command line). But the runtime linker needs to find the libs as well.

I assume you're running it on linux. You have 2 options:

1.  A temporary solution is to define in your environment LD_LIBRARY_PATH=`full path to dir where libocci.so* is installed`. I'm not very familiar with eclipse, but there's likely a setting to change the runtime environment. You could also set LD_LIBRARY_PATH and then run ecplise in that env.

    $ export LD_LIBRARY_PATH=...

    $ command to run eclipse

2.  A permanent solution is to add the full path to the dir. where the libs are to the file /etc/ld.so.conf, or better: create a file /etc/ld.so.conf.d/oracle and put the path in that file, nothing else. Then, as root, run ldconfig.

# c# - ImageMagick.net 问题

> ID：11807971
> 
> 赞同：0
> 
> 时间：2012-08-04T10:43:01.840
> 
> 标签：c#, imagemagick

我正在使用 ImageMagick.net，并且我已将**ImageMagickNET.dl**引用添加到我的项目中。这是我正在使用的代码。

```
MagickNet.Magick.Init();
MagicNet.Image img = new MagicNet.Image("file.jpg");
img.Resize(System.Drawing.Size(100,100));
img.Write("newFile.png");
MagickNet.Magick.Term(); 
```

但我收到此错误“'ImageMagickNET.MagickNet'不包含'Magick'的定义”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T11:15:47.003

哎呀，试试这个我测试它的工作原理：

```
 using System;
using M = MagickNet;
using System.Drawing;

namespace ConsoleApplication1
{
    class Program
    {
        static void Main(string[] args)
        {
            M.Magick.Init();
            M.Image img = new M.Image("file.jpg");
            img.Resize(new Size(100, 100));
            img.Write("newFile.png");
            MagickNet.Magick.Term();
        }
    }
} 
```

# php - ffmpeg php 编码跟踪编码失败

> ID：11807974
> 
> 赞同：-1
> 
> 时间：2012-08-04T10:43:40.227
> 
> 标签：php, ffmpeg

我正在从 php 的**exec执行 ffmpeg**

```
function convertToMP4($sourceFile,$outputfile)
{
    $Command="ffmpeg -i ".$sourceFile.".".$outputfile." 2>&1";
    exec($Command,$result,$status);
    return $result;

} 
```

我将整个命令的结果发送到数组

> $结果。

**我的问题是，我怎样才能准确地找出视频是否编码失败。**

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T10:48:08.870

根据[这个](http://php.net/manual/en/function.exec.php)$status 将包含进程的退出值，通常 0 表示成功，其余表示错误。

```
function convertToMP4($sourceFile,$outputfile)
{
    $Command="ffmpeg -i ".$sourceFile.".".$outputfile." 2>&1";
    exec($Command, $result, $status);

    if($status !== 0) {
        echo "Error!";
    } else {
        return $result;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T10:48:21.650

如果您不需要输出，请尝试使用[系统功能。](http://php.net/manual/en/function.system.php)使用第二个参数，您可以获得命令的返回值。在 unix 系统中，`0`返回值意味着成功和其他任何错误。

```
system('/bin/false', $ret);
var_dump($ret); 
```

exec 的第三个参数也可以达到同样的效果。

# matlab - 计算超几何函数

> ID：11807981
> 
> 赞同：2
> 
> 时间：2012-08-04T10:44:08.313
> 
> 标签：matlab, integral

我需要计算积分公式给出的两个变量的退化超几何函数：

![我的超几何函数](../Images/08871cd179a639321d51a27cac953ee7.png)

我使用 Matlab 进行数值积分：

```
l =  0.067;
h =  0.933;
n = 1.067;
o = 0.2942;
p = 0.633;
func_F=@(x)(x.^(l-1)).*((1-x).^(n-l-1)).*((1-x.*o).^(-h)).*exp(x.*p);
hyper= quadl(func_F,0,1,'AbsTol',1e-6); % i use 'AbsTol' to avoid warnings
disp(hyper); 
```

我得到的结果是 54.9085，我知道这个值是错误的！所以请帮助我计算上述积分的真值，奇点为 0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T15:35:44.703

我看不到您的代码中哪里有 Gamma 函数。您是否忘记了它们，或者您期望的价值是否已经弥补了它们的缺失？

另外，也许你可以说明为什么“这个值是错误的”。否则我们只是猜测。

编辑：还有一件事，根据[这个函数的 Matlab 帮助页面](http://www.mathworks.com/help/techdoc/ref/quadl.html)，使用它可能会更好`quadgk`。请参阅以下引用（靠近页面底部）：

> 如果奇异性不是太强，quadgk 函数将积分在有限端点处奇异的函数。例如，它将集成在端点 c 上运行的函数，如 log|xc| 或 |xc|p 表示 p >= -1/2。如果函数在 (a,b) 内的点处是奇异的，则将积分写为以奇异点为端点的子区间上的积分之和，用 quadgk 计算它们，然后将结果相加。

底线是端点附近的奇点（当你`x`接近 0 或 1 时）可能会导致一些问题。

# java - 如何在 JFreeChart 中添加水平滚动条？

> ID：11807984
> 
> 赞同：0
> 
> 时间：2012-08-04T10:44:43.817
> 
> 标签：java, swing, jfreechart, netbeans-7

我可以包含一个水平滚动条来查看以前的数据`JFreechart`吗？我正在使用折线图绘制动态图并一次在 x 轴上显示 10 个值，我想用水平滚动条查看图形。

如何设置滚动条的值以查看以前的数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T11:57:08.107

有几个选项可用：

*   将您添加`ChartPanel`到`JScrollPane`,

*   使用[这里](https://stackoverflow.com/a/5381430/230513)[`SlidingXYDataset`](https://sourceforge.net/tracker/index.php?func=detail&aid=2439953&group_id=15494&atid=315494)提到的

*   使用分页方法，如图[所示](https://stackoverflow.com/a/6849654/230513)。

*   附录：使用`SlidingCategoryDataset`with `ChartFactory.createLineChart()`。

# c# - 如何将数据集平均分为两部分？

> ID：11807985
> 
> 赞同：0
> 
> 时间：2012-08-04T10:44:57.950
> 
> 标签：c#, asp.net

我在 Asp.net 和 C# 上编程。

我有一个由数据库中的记录填充的数据集。在我的设计页面上，我有两个 Datagrid。

如何平均划分数据集中的记录，以便它们可以绑定到两个单独的数据网格？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-04T10:57:48.347

您可以在您的数据集上使用 DataView，然后在 dataview 上绑定您的 2 个 Datagrids 示例 [http://www.dotnetperls.com/dataview](http://www.dotnetperls.com/dataview)

例如，在 rows.count/2 和另一个上设置一个数据视图

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T11:43:31.353

这对我有用，

```
 var d=ds.Tables[0];// here ds is your dataset.
 int count=d.Rows.Count;
 var x=new DataTable();
 for(int i=0;i<=count;i++)
 {
   var dr=d.Rows[i];   
   x.Rows.Add(dr.ItemArray);
   d.Rows.RemoveAt(i); 
 } 
 var ret=new DataSet();
 ret.Tables.Add(x);
 ret.Tables.Add(d); 
```

所以现在你有包含两个相等数据表的数据集。

# php - Facebook，检查用户是否是粉丝并使用 PHP 登录

> ID：11807990
> 
> 赞同：1
> 
> 时间：2012-08-04T10:45:15.010
> 
> 标签：php, facebook, facebook-like

我已经在互联网和 SO 上搜索了一个多星期，但还没有找到任何东西，所以请允许我问一个问题，这个问题已经在 SO 上被问了很多时间，但似乎没有一个答案适用我。

我有一个网站和一个 Facebook 页面。在我的网站上，我有通常的 Facebook“喜欢我”框。因为我想在我的粉丝访问网站时向他们展示一些额外的内容 - 并鼓励非粉丝成为粉丝 - 我想知道是否有可能通过 PHP 来：
1\. 了解用户是否是粉丝
2\. 了解用户是否登录 Facebook

我想做的是向 Facebook 发送 PHP 请求并收到以下三个答案之一：“是粉丝”、“不是粉丝”、“未登录/不是 Facebook 用户”。

在第一种情况下，我会显示仅限粉丝的内容，在第二种情况下，我会尝试鼓励用户成为粉丝，而在第三种情况下，我不会做任何事情，因为我不确定用户是 Facebook用户。

请注意：
1\. 我不需要任何进一步的识别信息
2\. 这里没有涉及应用程序，因为用户是我的页面的粉丝，但如果有必要我可以建立一个

SO上的一些答案似乎指向本教程，但由于我的页面不是应用程序，我不能真正使用这个解决方案：http:
[//www.masteringapi.com/tutorials/facebook-api-check-if-a-user -是 Facebook 页面的粉丝/20/](http://www.masteringapi.com/tutorials/facebook-api-check-if-a-user-is-fan-of-a-facebook-page/20/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T11:05:44.503

不幸的是，在您让用户安装您的 Facebook 应用程序之前，Facebook 的 API 不会告诉您用户是否登录或是否是您页面的粉丝（对于喜欢的用户，您也需要`user_likes`许可）。

唯一的例外是当您运行页面选项卡时。当 facebook 通过 嵌入你的内容时`<iframe>`，它附带的`signed_request`POST 参数会告诉你用户是否是粉丝。您可以在此处阅读有关已[签名请求的信息。](http://developers.facebook.com/docs/authentication/signed_request/).

# c# - 错误说明无法将 'char' 转换为 'string'

> ID：11807994
> 
> 赞同：-1
> 
> 时间：2012-08-04T10:45:22.630
> 
> 标签：c#

```
const char * path=@"C:\Documents and Settings\QI_3664\Desktop\senthur.prt"; 
```

这是给问题的线。

起初它报告缺少转义序列，后来当我添加`@`符号时它开始报告'char'不能转换为'string'

请有人帮我解决这个问题。提前致谢。

同一行在 c++ 中运行良好。我在 Visual Studio 2005 中编译了这两个程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-04T10:46:56.990

在 C# 中，您应该使用`string`（在这种情况下）：

```
const string path = @"C:\Documents and Settings\QI_3664\Desktop\senthur.prt"; 
```

请注意，C# 以有限的方式支持指针，它们需要`unsafe`上下文。你可以阅读更多[@MSDN：不安全的代码和指针](http://msdn.microsoft.com/en-us/library/t2yzs44b.aspx)。您也可能会发现这很有用：@ [MSDN：C++ 和 C# 之间的比较](http://msdn.microsoft.com/en-us/library/yyaad03b%28v=vs.71%29.aspx)。

# java - java中的模拟/数字数据使用

> ID：11807997
> 
> 赞同：0
> 
> 时间：2012-08-04T10:45:50.203
> 
> 标签：java, proximity

java中有没有办法从一个接近传感器获取输入，它发出模拟/数字数据并将其显示在屏幕上。

如果它确实需要模拟/数字输入，那么如何同步一个硬件设备，如接近传感器和 java.lang.

只是在这个阶段进行研究。

如果有一种方法可以让 java 使用这种不寻常的设备并在我们的应用程序中使用这种数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-04T10:48:49.750

Java 可以使用操作系统可用的任何东西。如果您有一个操作系统驱动程序使您的设备看起来像一个文件系统或串行设备，您可以从 Java 访问它。即真正的问题是在您的设备、您的机器和您的操作系统之间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T10:48:52.747

COM 端口读取示例取自： [http ://www.java-samples.com/showtutorial.php?tutorialid=11](http://www.java-samples.com/showtutorial.php?tutorialid=11)

```
import java.io.*;
import java.util.*;
import javax.comm.*;

....
....
...

SerialPort serialPort;
...
...
try {
        serialPort = (SerialPort) portId.open("SimpleReadApp", 2000);
    } catch (PortInUseException e) {System.out.println(e);} 
```

# java - 我应该在 Eclipse 中关闭“自动构建”吗

> ID：11807998
> 
> 赞同：1
> 
> 时间：2012-08-04T10:45:51.527
> 
> 标签：java, eclipse

即使我禁用了“自动构建”，实时语法检查仍然有效，所以“自动构建”似乎没用？

我应该把它关掉吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-04T10:49:50.587

自动构建可以帮助您了解是否有任何编译错误。保持自动构建始终是一个好习惯，以确保您不签入任何导致编译问题的代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T10:51:18.827

语法检查与构建不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T15:10:47.120

你真的想在小改动后运行程序时等待编译周期吗？“自动构建”在后台进行此编译，因此在启动应用程序时可以节省您宝贵的时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-04T23:47:12.733

如果您使用 maven 并且在 mvn build 和 autobuild 开启期间编辑了一些类，它可能会中断构建并使其处于意外状态（不必以错误结束）。但我仍然打开它，只是在构建 mvn 时不更改代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-05T20:45:29.657

这是一个“很高兴拥有”的功能，因为它可以让您实时编译错误。人们也讨厌它，因为他们抱怨在输入大量代码时会分散他们的注意力，并且在输入到一半时屏幕上会出现一堆红线。

但是这个不错的功能是以你的 CPU 为代价的。如果我在较慢的机器上或者如果我正在运行其他 CPU 密集型进程，那么我会关闭自动构建功能。那时你必须手动点击快捷键来构建你的代码。老实说，你只是习惯了点击快捷方式，甚至没有考虑过一段时间。