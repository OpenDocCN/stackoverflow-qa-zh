# StackOverflow 问答 10332000-10332999

# c# - 如何访问asp对象

> ID：10332002
> 
> 赞同：1
> 
> 时间：2012-04-26T10:56:35.757
> 
> 标签：c#, asp.net, sharepoint-2010, tags

我想知道是否有办法在后面的代码中访问 asp 对象，但不使用对象本身？

假设我有一个asp页面，其中有这个标签：

```
<asp:TextBox ID="test" runat="server"></asp:TextBox> 
```

在我后面的代码中，我可以使用：this.test 访问这个对象。但我想以其他方式访问它。就像是 ：

```
 this.Objects["test"] 
```

因为我正在解析一个包含所有 asp 对象的 xml 文档，然后我想对其进行一些处理（将 Visible 设置为 true ...）

你有什么主意吗 ？

谢谢

找到了答案。我正在使用 SharePoint，所以我必须设置上下文。我做不到

```
this.FindControls 
```

所以我补充说：

```
Control context = this.Page.Master.FindControl("PlaceHolderMain"); 
```

我使用：

```
context.FindControl(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:01:40.020

你可以使用：

```
this.Controls["control"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T11:00:33.373

当您处理服务器端控件时，您可以使用 Page.FindControl(controlName) 访问它们：

```
this.Page.FindControl("txtPageSam").Visible = false; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T11:09:12.297

```
 ((TextBox) this.FindControl("test")).Visible = true; 
```

# android - 安卓内部

> ID：10332005
> 
> 赞同：3
> 
> 时间：2012-04-26T10:56:49.123
> 
> 标签：android

我的项目只需要一点帮助。谁能告诉android在启动时如何加载设备上的所有应用程序。它在哪里读取 apk 的检索有关应用程序的信息，例如图标、名称并最终显示在设备上。

我经历了 packagemanager->applicationpackagemanager->Ipackagemanager.aidl->packagemanagerservice->settings.java 但我无法弄清楚android如何从apk中提取信息以及它如何在启动时加载。

如果有人可以提供帮助，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T11:24:29.090

不知道这到底发生在哪里，但 AFAIK：

在启动期间：Android 会通过`/data/apps/*.apk`，提取/读取`AndroidManifest.xml`并保存一些信息（例如`/data/system/packages.list`和`packages.xml`）

Package( `.apk`)解析应该由[PackageParser.java来完成](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.0.3_r1/android/content/pm/PackageParser.java#PackageParser)

当您打开应用程序抽屉并缓存在内存中时，可能会从其中一个列表中读取应用程序列表。图标是按需提取并缓存的。您在 Launcher 中看到的图标/应用程序存储在其他位置。

# java - 使用公钥进行 RSA 解密

> ID：10332022
> 
> 赞同：4
> 
> 时间：2012-04-26T10:57:33.957
> 
> 标签：java, php, android, rsa, public-key

我的 Android 项目中有一些解密问题。

我得到一个用私钥签名的字符串，我必须用公钥验证（解密）它。我想得到与使用 PHP 函数完全相同的结果 - openssl_public_decrypt ( [http://php.net/manual/pl/function.openssl-public-decrypt.php](http://php.net/manual/pl/function.openssl-public-decrypt.php) )

我必须在我的 Java 项目中这样做，所以我可以使用 Java 库（例如 BouncyCastle 或其他东西，有什么建议吗？）

任何想法如何解决这个问题？

好的，这是我的代码。我得到这样的公钥

```
PEMReader reader = new PEMReader(new InputStreamReader(ctx
                .getAssets().open("pubkey.pem")));
        Object obj;
        while ((obj = reader.readObject()) != null) {
             if (obj instanceof RSAPublicKey) {
                pubKey = (RSAPublicKey) obj;
                return pubKey;
            }
        } 
```

而且我总是毫无问题地获得公钥。

```
Cipher c = Cipher.getInstance("RSA/NONE/NoPadding", "SC");
c.init(Cipher.DECRYPT_MODE, pubKey);
byte[] result = c.doFinal(data_to_decrypt.getBytes()); 
```

结果（将字节转换为字符串后）我得到`022c06571c6a263b389fcd93159cb311abb880bddf51b7c916dd1ae...`

php 函数返回的位置 `sd8dsa348acvcx87|00454|OK|15000|CDE`，这是正确的输出。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T11:40:40.323

Java 有 Java Cryptography Extension Framework，它就是为这些事情而设计的。

BouncyCastle 是这个框架的密码学提供者。这意味着，它为您的 Java Cryptography Extension 提供了加密算法的实现。

你会在包中找到这方面的基本类`java.security`和`javax.crypto`

要使用公钥解密您的消息，您可以尝试以下操作：

```
// Use RSA/NONE/NoPadding as algorithm and BouncyCastle as crypto provider
Cipher asymmetricCipher = Cipher.getInstance("RSA/NONE/NoPadding", "BC");

// asume, that publicKeyBytes contains a byte array representing
// your public key
X509EncodedKeySpec publicKeySpec = new X509EncodedKeySpec(publicKeyBytes);

KeyFactory keyFactory;
keyFactory = KeyFactory.getInstance(publicKeySpec.getFormat());
Key key = keyFactory.generatePublic(publicKeySpec);

// initialize your cipher
asymmetricCipher.init(Cipher.DECRYPT_MODE, key);
// asuming, cipherText is a byte array containing your encrypted message
byte[] plainText = asymmetricCipher.doFinal(cipherText); 
```

请注意，这个示例**非常**基础，缺少几个 try catch 块。此外，您不应该使用没有填充的非对称密码，因为这会使您容易受到重放攻击。您可能还会遇到密钥长度问题。在某些 Java 包中，允许的最大密钥长度受到限制。这可以通过使用无限强度策略文件来解决。

我希望这可以帮助您开始使用 Java 密码学。

# mysql - MySQL 查询速度连接

> ID：10332025
> 
> 赞同：1
> 
> 时间：2012-04-26T10:57:41.370
> 
> 标签：mysql, performance, join

是否有任何方法可以优化以下查询以提高速度？执行大约需要 6 秒。每个表只包含大约 1000 条记录，所以它不是很大。

```
SELECT c. * , q.qualification_name, CONCAT( u.firstname, ' ', u.lastname ) AS name, v.venue_name, v.address_town
FROM p_courses c
LEFT JOIN p_qualifications q ON c.qualification_name = q.ref
LEFT JOIN p_users u ON c.instructor_number = u.instructor_number
LEFT JOIN p_venues v ON c.venue_token = v.token
WHERE (
c.status = 'completed'
OR c.status = 'confirmed'
) 
```

上面的查询工作并按要求检索所有数据，只要我添加多个左连接，它就需要很长时间。

谢谢。

已编辑。

在查询前面添加 EXPLAIN 会返回此...

```
id  select_type table   type    possible_keys   key   key_len   ref     rows    Extra
1   SIMPLE      c       ALL     NULL            NULL  NULL      NULL    1288    Using where
1   SIMPLE      q       ALL     NULL            NULL  NULL      NULL    21   
1   SIMPLE      u       ALL     NULL            NULL  NULL      NULL    518  
1   SIMPLE      v       ALL     NULL            NULL  NULL      NULL    669 
```

对不起，但我不太确定如何解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:00:16.780

1.  `EXPLAIN`通过在您的查询前面放置来检​​查有什么问题。
2.  设置您的索引，以便您的连接和您的位置可以使用它们。
3.  `EXPLAIN`再次检查你
4.  起泡，冲洗，重复。

提示：您可能需要以下索引：

```
c.qualification_name 
q.ref
c.instructor_number 
u.instructor_number
c.venue_token 
v.token
c.status 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:08:15.357

从您发布的解释来看，查询似乎没有使用索引。确保 q.ref、u.instructor_number 和 v.token 被索引

# facebook - Facebook 页面选项卡应用仅向管理员显示

> ID：10332033
> 
> 赞同：0
> 
> 时间：2012-04-26T10:57:58.743
> 
> 标签：facebook

我的 Facebook 页面标签应用程序出现问题。它仅显示为选项卡和管理员页面。它为管理员完美显示，但不会被列为普通用户的选项卡。

我希望可能会有一个明显的解决方案，有人可以猜到 - 我已经尝试了很多东西。

我意识到没有那么多信息可以继续，但我想如果其他人遇到这个问题，我还是会尝试一下。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:02:17.517

[请在http://developers.facebook.com](http://developers.facebook.com)中检查您的应用设置和

检查应用程序属性：

沙盒模式：禁用使其启用。

# objective-c - 多点触控导致方法触发两次

> ID：10332037
> 
> 赞同：0
> 
> 时间：2012-04-26T10:58:06.340
> 
> 标签：objective-c, ios, multi-touch, touchesbegan

我正在开发一款将 ipad 屏幕分为下半部分和上半部分的小游戏。每个玩家都有自己的部分可以玩（一个手指游戏）。我必须在视图上启用多点触控，因为当两个玩家同时点击屏幕时，只有一个玩家的方法会被执行或根本不执行。

然而，当 2 个玩家执行完全相同的动作时，这会导致方法触发两次的奇怪行为。这就是它现在的工作方式：它检查玩家是否触摸了视图中的对象。如果有，就会触发一个方法。如果玩家没有触摸对象而是视图本身，则会触发另一个方法。它检查视图是否在上半部分或下半部分被触摸，以区分玩家一或玩家二的触摸。

我一直在考虑一个解决方案，但我不确定什么是解决这个问题的好方法。也许我应该为每个玩家分开视图（透明），以便我可以更轻松地区分触摸？这是我的 touchesBegan 方法。

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{

    NSMutableSet *touchedCirclesPlayerOne = [NSMutableSet set];
    NSMutableSet *touchedCirclesPlayerTwo = [NSMutableSet set];

    for (UITouch *touch in touches) {
        CGPoint touchLocation = [touch locationInView:self.view];
        for (Circle *circle in playerOneCircles) {
            if ([circle.layer.presentationLayer hitTest:touchLocation]) {
                [touchedCirclesPlayerOne addObject:circle];

            } 
        }

    for (UITouch *touch in touches) {
        CGPoint touchLocation = [touch locationInView:self.view];
        for (Circle *circle in playerTwoCircles) {
            if ([circle.layer.presentationLayer hitTest:touchLocation]) {
                [touchedCirclesPlayerTwo addObject:circle];

                } 
            }
    }

    if (touchedCirclesPlayerOne.count) {

        NSLog(@"test");

        for (Circle *circle in touchedCirclesPlayerOne) {

            [circle playerTap:nil];

        }

    } else if (touchedCirclesPlayerTwo.count) {

        NSLog(@"test2");

        for (Circle *circle in touchedCirclesPlayerTwo) {

            [circle SecondPlayerTap:nil];

        }

    } else {

        for (UITouch *touch in touches) {
            CGPoint touchLocation = [touch locationInView:self.view];

            if (CGRectContainsPoint(CGRectMake(0, self.view.frame.size.height/2, self.view.frame.size.width, self.view.frame.size.height/2), touchLocation)) {

            NSLog(@"wrong player 1");
            [[NSNotificationCenter defaultCenter] postNotificationName:@"wrong player 1" object:self];

            }  else {

                NSLog(@"wrong player 2");
                [[NSNotificationCenter defaultCenter] postNotificationName:@"wrong player 2" object:self];
            }

        }

    }

}

} 
```

这是一个小示意图。这一切都有效，除非两个玩家做同样的事情。它为每个玩家触发两次相同的动作。

![示意图](../Images/5f951c765536797cc221b3eb0e577490.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:38:13.180

该代码看起来很熟悉:-)。然而，你所拥有的东西做了很多额外的工作。此外，如果有两次点击，它将始终执行玩家 1 的点击，而不是玩家 2 的点击。

你真的想强制每个玩家区域点击一次吗？请注意，此代码不会阻止这种情况。您可以在前一次触球后开始另一次触球，这不会在集合中。但是，您可以通过查看对象来查看所有当前触摸，而不管它们的状态如何。查询 allTouches，它将为您提供屏幕上的所有当前触摸。

考虑以下变化...

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    // Since this rect object is always needed, you probably want to
    // make it once, and keep it as private variables.  If your area is
    // not really divided completely in half, you will want two separate
    // rects, each defining the area for each player.
    CGRect player1Area = CGRectMake(0, self.view.frame.size.height/2, self.view.frame.size.width, self.view.frame.size.height/2);

    // For performance sake, we will loop through the touches a single time
    // and process each tap in that loop.  Use these flags to later determine
    // what to do if the player tapped some place other than on a circle.
    BOOL player1Tapped = NO;
    BOOL player2Tapped = NO;
    BOOL player1TappedCircle = NO;
    BOOL player2TappedCircle = NO;

    for (UITouch *touch in touches) {
        CGPoint touchLocation = [touch locationInView:self.view];
        if (CGRectContainsPoint(player1Area, touchLocation)) {
            // This touch is in player 1's area
            // Small additional code to restrict player to a single tap.
            player1Tapped = YES;
            for (Circle *circle in playerOneCircles) {
                // I guess you are using a CAShapeLayer, and looking at the
                // position during animation?
                if ([circle.layer.presentationLayer hitTest:touchLocation]) {
                    player1TappedCircle = YES;
                    [circle playerTap:nil];
                }
            }
        } else {
            // This touch is not for player 1, so must be for player 2...
            player2Tapped = YES;
            for (Circle *circle in playerTwoCircles) {
                if ([circle.layer.presentationLayer hitTest:touchLocation]) {
                    player2TappedCircle = YES;
                    [circle secondPlayerTap:nil];
                }
            }
        }
    }

    // All touches have now been handled.  We can do stuff based on whether any player
    // has tapped any area, or circles, or whatever.
    if (player1Tapped && !player1TappedCircle) {
        // Player 1 tapped, but did not tap on a circle.
    }
    if (player2Tapped && !player2TappedCircle) {
        // Player 2 tapped, but did not tap on a circle.
    }    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:26:17.860

我会把它分成两个视图。然后，我会为每个视图附加一个手势识别器。

```
UITapGestureRecognizer *tapRecog1 = [[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap1:)] autorelease]; 

[self.view1 addGestureRecognizer:self.tapRecog1]; 

UITapGestureRecognizer *tapRecog2 = [[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(handleTap2:)] autorelease]; 

[self.view2 addGestureRecognizer:self.tapRecog2]; 
```

然后，我将实现动作方法。

```
- (void)handleTap1:(UITapGestureRecognizer *)tap;
{
    CGPoint point = [tap locationInView:self.view1];

    // do stuff
}

- (void)handleTap2:(UITapGestureRecognizer *)tap;
{
    CGPoint point = [tap locationInView:self.view2];

    // do stuff
} 
```

# android - 如何自定义 SlidingDrawer 锁定在屏幕中间？

> ID：10332039
> 
> 赞同：0
> 
> 时间：2012-04-26T10:58:12.647
> 
> 标签：android, slidingdrawer

任何人有一个示例项目或任何想法来制作一个能够锁定在屏幕中间，覆盖整个屏幕，当然隐藏在底部的定制滑动抽屉？

第二个，第三个没什么大不了的。但是第一个，我认为需要一些解决方法。有什么解决办法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T03:41:33.200

使用此属性：`android:topOffset`. 该属性表示抽屉展开时与顶部的偏移量。然后唯一担心的是如何获得屏幕的高度。

# iphone - iOS5.1设置UIToolbar背景图片

> ID：10332040
> 
> 赞同：2
> 
> 时间：2012-04-26T10:58:15.100
> 
> 标签：iphone, background-image, uitoolbar, ios5.1

我使用以下代码将图像“Sample”设置为 UIToolbar 的背景颜色

```
self.toolbar.layer.contents = (id)[UIImage imageNamed:@"Sample.png"].CGImage; 
```

但是上面的似乎不适用于iOS5.1并且出现了UIToolbar的默认背景颜色。我对 iOS4 中的这条线没有任何问题。

我错过了什么吗？请告诉我原因..

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-07T04:38:42.013

从应用程序委托（与上面的解决方案不同）工作并且在头文件中也标有 UI_APPEARANCE_SELECTOR 的正确方法是：

```
[[UIToolbar appearance] setBackgroundImage:bgImage forToolbarPosition:UIToolbarPositionAny barMetrics:UIBarMetricsDefault];
[[UIToolbar appearance] setBackgroundImage:bgImage forToolbarPosition:UIToolbarPositionAny barMetrics:UIBarMetricsLandscapePhone]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T11:21:11.283

![在此处输入图像描述](../Images/225810674a4da5019064a2d79812a20f.png)

```
// Create resizable images
UIImage *gradientImage44 = [[UIImage imageNamed:@"imageName.png"] 
                            resizableImageWithCapInsets:UIEdgeInsetsMake(0, 0, 0, 0)];
// Set the background image for *all* UINavigationBars
[[UIToolbar appearance] setBackgroundImage:gradientImage44 
                                   forBarMetrics:UIBarMetricsDefault]; 
```

最好使用 iOS 5 引入的外观 API。希望这会对您有所帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T11:18:07.427

[setBackgroundImage:forToolbarPosition:barMetrics：](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIToolbar_Class/Reference/Reference.html#//apple_ref/occ/instm/UIToolbar/setBackgroundImage%3aforToolbarPosition%3abarMetrics%3a)这用于设置图像以用于给定位置和给定指标的背景。，

在你的情况下

```
// Set the background image for PortraitMode
[self.toolbar setBackgroundImage:[UIImage imageNamed:@"Sample.png"] 
                                   forBarMetrics:UIBarMetricsDefault];
// and For LandscapeMode
[self.toolbar setBackgroundImage:[UIImage imageNamed:@"Sample.png"] 
                                   forBarMetrics:UIBarMetricsLandscapePhone]; 
```

# spring - 希望下载链接上的弹出窗口...提示保存、打开、取消

> ID：10332043
> 
> 赞同：1
> 
> 时间：2012-04-26T10:58:44.150
> 
> 标签：spring, jsp, spring-mvc, file-upload

在我的 jsp 页面中，我提供了一个链接来查看/下载扫描的文档。

单击该链接后，我可以正确查看文档，但我希望 jsp 在打开该文档之前提示**打开、保存或取消**选项。

我是否必须对响应对象进行一些更改，还是由于浏览器设置而发生..？？

谢谢.....！！！

我已经这样编写了我的控制器类：

```
public void fileUploadOption(HttpServletRequest request,HttpServletResponse response) {

        try {
              // get your file as InputStream
              InputStream is = new FileInputStream(new File(\\..file..\\));

              IOUtils.copy(is, response.getOutputStream());

              response.flushBuffer();

            } catch (IOException ex) {

              throw new RuntimeException("IOError writing file to output stream");
            }

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T13:52:25.777

您需要将`Content-Disposition`标题设置为`attachment`. 这将强制出现*另存为*对话框。

在将任何字节写入响应正文*之前*添加此行：

```
String filename = file.getName();
response.setHeader("Content-Disposition", "attachment;filename=\"" + filename + "\""); 
```

* * *

顺便说一句，“上传”在这种情况下是错误的术语。我会将该方法重命名为`fileSendOption`or`sendFile`或其他东西。

# java - 为什么我的 BigInteger.add() 得到 NullPointerException？

> ID：10332049
> 
> 赞同：0
> 
> 时间：2012-04-26T10:59:02.297
> 
> 标签：java, nullpointerexception, biginteger, pascals-triangle

我正在尝试将 Pascal Triangle 打印到一百行，但 Java 的 int 似乎返回负值。我正在尝试使用 BigInteger，但每当我添加两个数字时，我都会得到 NullPointerException！我想我初始化了它们。这是我的代码：

```
 import java.math.BigInteger;
    public class Pascal {
    public static void main(String[] args) { 
        BigInteger[][] p = new BigInteger[100][];

        p[0] = new BigInteger[3];
        p[0][1] = BigInteger.ONE;
        for (int i = 1; i <= N; i++) {
            p[i] = new BigInteger[i + 3];
            for(int j = 0; j < p[i].length; j++){
                p[i][j] = new BigInteger("0");
            }
            for (int j = 1; j < p[i].length - 1; j++)
                p[i][j] = p[i-1][j-1].add(p[i-1][j]); //NPE!

        }
        for (int i = 0; i <= N; i++) {
            for (int j = 1; j < p[i].length - 1; j++) {
                System.out.print(p[i][j] + " ");
            }
            System.out.println();
        }
    }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T11:01:37.287

考虑第一次迭代：

```
 for (int j = 1; j < p[i].length - 1; j++)
            p[i][j] = p[i-1][j-1].add(p[i-1][j]); //NPE! 
```

据我所知， `p[i-1][j-1]`dereferences`p[0][0]`尚未初始化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:02:48.183

这些行涉及：

```
 p[0][1] = BigInteger.ONE;
    for (int i = 1; i <= N; i++) 
```

您正在初始化`[0][1]`但不是，`[0][0]`并且您在索引处开始循环（数组索引为 0）。`1``0`

考虑什么应该进入位置`[0][0]`以及数组循环应该如何相应地开始。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T11:38:57.473

声明引用名称和类型是不够的；您必须为要指向的引用分配内存。

这是一个经典的数组。我看到很多人像这样声明一个数组，想知道为什么当他们尝试使用它时会得到 NullPointerException：

```
int numValues = 10;
Integer [] values = new Integer[numValues];  // All ten of these references initially point to null
// You have to point them to something
for (int i = 0; i < numValues; ++i) {
    values[i] = new Integer(i);
} 
```

# javascript - $.functionName(); 是什么？在javascript中是什么意思？

> ID：10332051
> 
> 赞同：4
> 
> 时间：2012-04-26T10:59:12.210
> 
> 标签：javascript, jquery

我不熟悉这种语法。`$.`函数调用之前是什么意思？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T11:02:24.890

`$`只是某个对象的名称。如果您使用这些库之一，它可以是 jQuery 或 Prototype。

所以`$.functionName()`简单地代表调用名为`functionName`对象的函数`$`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T11:02:49.223

在这里，$ 符号可以替换为“jQuery”关键字。

```
$.functionName(); 
```

是相同的

```
jQuery.functionName(); 
```

如果您使用的是 jQuery 框架。如果使用其他东西，它可能会像在 jQuery 中一样引用基础对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T11:02:32.803

美元符号函数或多或少实际上已成为 document.getElementById() 的快捷方式。

[http://osric.com/chris/accidental-developer/2008/04/the-javascript-dollar-sign-function/](http://osric.com/chris/accidental-developer/2008/04/the-javascript-dollar-sign-function/) 检查这个

并且被 Jquery、Mootools 或任何其他 javascript 框架使用。即使你可以做一个

这是一个小例子

```
function $(obj) {
    return document.getElementById(obj);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T11:03:23.517

$ - 只是一个对象名称，因为 $ 是 JavaScript 标识符中的有效符号。这不是一些特殊的语法，只是从对象中定期检索“functionName”属性并调用它。一些库（例如 jQuery）将它们的主要对象别名为这个短名称，以使调用占用更少的空间。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-26T11:00:27.777

这是[JQuery](http://jquery.com/)对象或[Prototype](http://www.prototypejs.org/)或[MooTools](http://mootools.net/)的别名。你也可以看到_。-[下划线](http://documentcloud.github.com/underscore/)。

# android - 将 Pixel 值转换为 dp 值

> ID：10332059
> 
> 赞同：1
> 
> 时间：2012-04-26T10:59:42.767
> 
> 标签：android

我可以使用`getWindowManager().getDefaultDisplay()`. 现在我想知道如何`dp`从我得到的像素值中获取价值。例如，假设我使用以下代码获得了屏幕的宽度：

```
Display display = getWindowManager().getDefaultDisplay();
int width = display.getWidth(); 
```

现在`width`我得到的是像素，我如何将其转换为`dp`.

请帮我解决这个问题。我在 android 文档中看到过，但不知道如何实现它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:09:09.657

如果要将 dp 值转换为像素，可以使用以下公式：

```
DisplayMetrics metrics = getWindowManager().getDefaultDisplay().getMetrics(metrics);
float logicalDensity = metrics.density;
int px = (int) (dp * logicalDensity + 0.5); 
```

*要从像素中获取 dp，请将密度除以像素值而不是相乘。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-12T11:34:47.300

`dimens.xml`例如：在您的`res/values`文件夹中新建：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <dimen name="dim_5dp">5dp</dimen>
</resources> 
```

然后在您的活动中：

```
int pixels = getResources().getDimensionPixelSize(R.dimen.dim_5dp); 
```

好处是[getDimensionPixelSize()](http://developer.android.com/reference/android/content/res/Resources.html#getDimensionPixelSize%28int%29)处理零大小，在这种情况下它返回至少 1 个像素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T11:12:50.697

您需要使用屏幕的像素密度在实际像素和 dp 之间进行转换。这在[此处的 Android 开发人员门户/指南](http://developer.android.com/guide/practices/screens_support.html#dips-pels)中进行了描述。看一看

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-02T06:54:20.703

最短的方法是使用 TypedValue。

```
 public static float pxToDp(Context context, float pixel) {
            return TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_PX, pixel, context.getResources().getDisplayMetrics());
  } 
```

# javascript - 是否可以从 google Plus Badge（添加到圈子）中获得回调？

> ID：10332061
> 
> 赞同：1
> 
> 时间：2012-04-26T10:59:54.790
> 
> 标签：javascript, google-plus, google-plus-one

[我刚刚在此页面上](https://developers.google.com/+/plugins/badge/personal-config)添加了一个添加到圈子徽章。所以现在我只想检测用户是否将我添加到他们的圈子中。

那么是否有可能从这个徽章中获得一个关于用户操作的回调，就像我们可以从谷歌获得一个回调加一个按钮一样。

如果回调不存在，那么他们有什么好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T16:24:33.500

徽章此时没有任何回调。如果它们存在，它们将记录在[此页面上](https://developers.google.com/+/plugins/badge/)。

出于隐私原因，徽章旨在使添加您自己的回调变得非常困难或不可能。

# php - 从最高到最低开始选择选项

> ID：10332063
> 
> 赞同：0
> 
> 时间：2012-04-26T10:59:59.767
> 
> 标签：php

我将如何从 50 开始选择？

```
$i_season=1; $i_season<=50; $i_season++ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T11:07:15.967

试试这个

```
<?php 

    for($i_season=50; $i_season>=1; $i_season--)
    {
        // to write your code
        echo $i_season;
    }
?> 
```

或者也试试下面的代码

```
<?php 

    $i_season=50;
    while($i_season!= 0)
    {
        // to write your code
        echo $i_season;
        $i_season--;
    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T11:01:20.603

```
$i_season=50; $i_season>=1; $i_season-- 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T11:11:57.527

你也可以用另一种方式（慢）

```
<?php 
$seasons = range(50,1);

foreach ($seasons as $season) {
    echo $season."<br/>";
}
?> 
```

# c# - CurrentCulture.DateTimeFormat.LongTimePattern 只读

> ID：10332064
> 
> 赞同：1
> 
> 时间：2012-04-26T11:00:01.127
> 
> 标签：c#, datetime, time, format, readonly

我正在尝试使用以下代码设置 CurrentCulture 的 LongTimePattern 属性：

```
System.Threading.Thread.CurrentThread.CurrentCulture.DateTimeFormat.LongTimePattern = "HH:mm:ss"; 
```

我得到 InvalidOperationException: Instance is read-only。

知道如何更改它吗？我想强制`LongTimePattern`显示任何文化的 24 小时格式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T11:50:05.030

如果您更改 System.Threading.Thread.CurrentThread.CurrentCulture 那么它将自动更新 LongTimePattern。

您不能对当前分配的文化信息进行任何更新，但可以创建一个新信息并将其分配给当前文化。

```
System.Globalization.CultureInfo c = new System.Globalization.CultureInfo("es-ES");
c.DateTimeFormat.LongTimePattern = "h-mm-ss";
Thread.CurrentThread.CurrentCulture = c; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T02:03:20.123

如果您只想更改一个或两个值并保持其余值不变，则可以使用 Clone 获取当前文化的可写副本，例如：

```
CultureInfo i;
i = (CultureInfo)Thread.CurrentThread.CurrentCulture.Clone();
i.DateTimeFormat.LongTimePattern = "HH:mm:ss";
i.DateTimeFormat.ShortTimePattern = "HH:mm";
Thread.CurrentThread.CurrentCulture = i;
i = (CultureInfo)Thread.CurrentThread.CurrentUICulture.Clone();
i.DateTimeFormat.LongTimePattern = "HH:mm:ss";
i.DateTimeFormat.ShortTimePattern = "HH:mm";
Thread.CurrentThread.CurrentUICulture = i; 
```

这似乎比必须使用文化字符串来获取起始文化更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T11:29:42.760

我不确定您是否可以更改文化，允许您这样做会破坏首先拥有文化的目的-它们应该以该文化使用的普遍接受的格式显示日期和时间。

如果您希望显示不同的格式，则始终可以使用自定义日期/时间格式化程序。

请参阅[http://msdn.microsoft.com/en-us/library/az4se3k1.aspx](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)了解所有可用的预设格式，以及如何显示您自己的格式的详细信息。

# objective-c - 如何将图片上传到 google+ 墙？

> ID：10332065
> 
> 赞同：1
> 
> 时间：2012-04-26T11:00:07.947
> 
> 标签：objective-c, ios, google-plus

我必须将照片上传到 Google+ 墙上，但我不明白如何创建此上传。

我应该使用什么？Google+ API（[http://google-api-objectivec-client.googlecode.com/svn/trunk/google-api-objectivec-client-read-only](http://google-api-objectivec-client.googlecode.com/svn/trunk/google-api-objectivec-client-read-only)）（项目PlusSample）

或者我应该创建自己的 HTTP Post 请求？

我需要将照片和文字上传到 google+ 墙。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T16:31:26.940

REST API 是只读的，因此您无法使用它插入任何图像。

不过，您确实有几个替代选择。Google+ 上的照片由 Picasa 提供支持。您可以使用[Picasa 网络相册 API](https://developers.google.com/picasa-web/)与用户照片选项卡中的图像进行交互。但是，这不允许您插入到流中。

另一种选择是使用[+1 按钮](https://developers.google.com/+/plugins/+1button/)或[分享链接](https://developers.google.com/+/plugins/share/)分享它。如果您的图像已经具有 Web 表示，例如在图像库中，您可以在以该 URL 为目标的 Web 视图中呈现它们。然后，您的用户可以使用该插件将 Google+ 上的内容分享到他们的信息流中。

# jquery - 如果值为 false（在任何 ajax 调用之前），则停止 ajax 调用

> ID：10332071
> 
> 赞同：1
> 
> 时间：2012-04-26T11:00:31.573
> 
> 标签：jquery, ajax, asp.net-mvc-3

我正在开发一个 asp.net mvc3 应用程序。

我有这个 Jquery 函数

```
 function CheckSession() {
        $.ajax({
            type: 'POST',
            url: '@Url.Action("CheckSession", "Home")',
            success: function (isAvailable) {
                return isAvailable;
            },
            complete: function (owner) {

            },
            error: function (owner) {
                alert('Error Getting session');
                return false;
            }

        });
    } 
```

基本上这个会话所做的是调用一个动作，`HomeController`该动作将返回真或假。

我想要做的是，在应用程序中的每个 ajax 调用之前，我想首先使用这个函数。如果它返回`true`我们继续调用，否则我们不做任何事情。

有没有办法做到这一点而**不必遍历所有代码并在每次 ajax 调用之前调用它**

我知道这可以通过在每个 ajax 之前调用它并测试返回来完成，但是我有大量的 ajax 调用。

我正在寻找的是在进行任何 ajax 调用之前触发的事件处理程序

像这样的东西：

```
$(ajax).beforeCall(function (event) {
    if (CheckSession()){
        event.ProceedWithCall;
    }
    else {
         //Stop the call;
         return false;
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T11:09:26.737

您可以像这样使用`ajaxSetup`和设置`beforeSend`函数：

```
$.ajaxSetup({
  beforeSend: function(){
            return !CheckSession();
      }
}); 
```

`beforeSend` [文档](http://api.jquery.com/jQuery.ajax/)：

> 一个预请求回调函数，可用于在发送之前修改 jqXHR（在 jQuery 1.4.x 中为 XMLHTTPRequest）对象。使用它来设置自定义标题等。jqXHR 和设置映射作为参数传递。这是一个 Ajax 事件。*** 在 beforeSend 函数中返回 false 将取消请求。**

`ajaxSetup` [文档](http://api.jquery.com/jQuery.ajaxSetup/)：

> 说明：为未来的 Ajax 请求设置默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T11:03:14.357

使用 beforeSend(jqXHR, settings) 回调：

> 一个预请求回调函数，可用于在发送之前修改 jqXHR（在 jQuery 1.4.x 中为 XMLHTTPRequest）对象。使用它来设置自定义标题等。jqXHR 和设置映射作为参数传递。这是一个 Ajax 事件。在 beforeSend 函数中返回 false 将取消请求。

有关更多信息，请参阅[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T11:17:05.247

就个人而言，我可能会这样做，以便调用会话检查逻辑的是您的 ASP.NET 端点，而不是客户端 Javascript。

想一想：您触发了一个 AJAX 调用，该调用会启动 .NET 代码来检查会话，返回一个布尔值，然后触发另一个 AJAX 调用 if `true`. 为什么不直接触发**真正的**AJAX 调用（即 AJAX 调用 2），并让 ASP.NET 端点处理您使用 AJAX 调用 1 调用的任何内容？

您将通过这种方式节省 HTTP 请求往返行程，考虑到您已经获得了`tons of AJAX calls`.

只是我的两分钱。尽管如此，我会选择上面@gdoron的回答。

# c# - Asp.net 在配置文件属性中插入数据

> ID：10332074
> 
> 赞同：1
> 
> 时间：2012-04-26T11:00:34.017
> 
> 标签：c#, asp.net-mvc

> **可能重复：**
> [ASP.NET 成员资格 (MVC) 中的强类型配置文件值](https://stackoverflow.com/questions/7603527/strong-typed-profile-values-in-asp-net-membership-mvc)

目前我正在使用它在配置文件中插入数据，`profile.SetPropertyValue("prop", data);`但我想知道有什么方法可以使用类似的东西`profile.prop = data;`而不是`profile.SetPropertyValue("prop", data);`在配置文件中插入数据，并在下拉列表中获取`配置文件属性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:11:49.630

如果我理解得很好，您可以通过创建继承的配置文件（来自 ProfileBase）来做到这一点

不确定这是否仍然是“最新的”，但似乎在这里得到了很好的解释：

[http://odetocode.com/articles/440.aspx](http://odetocode.com/articles/440.aspx)

# java - 将插件间谍插件安装到自定义 rcp 应用程序中

> ID：10332079
> 
> 赞同：4
> 
> 时间：2012-04-26T11:01:13.067
> 
> 标签：java, eclipse, eclipse-plugin, eclipse-rcp, eclipse-pde

插件 spy 自 3.4 起包含在 Eclipse 中。我想知道是否有单独的插件分发，所以它可以用来安装到自定义 rcp 应用程序中。就我而言，如果需要此信息，那就是jubula。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T14:02:29.507

使用 Plug-in Registry 视图，您可以看到间谍是在`org.eclipse.pde.runtime`. 只需将其包含在您的应用程序中即可。唯一的强制依赖是 for `org.eclipse.core.runtime`,`org.eclipse.ui`和`org.eclipse.ui.forms`- 其余的都是可选的...

# ios - 从 CocoaAsyncSocket 开始

> ID：10332084
> 
> 赞同：1
> 
> 时间：2012-04-26T11:01:27.000
> 
> 标签：ios, xcode, tcp, cocoaasyncsocket

我一直在寻找通过 TCP 将文件（iphone 上录制的小声音）发送到服务器以及从服务器发送到其他设备的方法。似乎最简单的方法是使用 CocoaAsyncSocket 项目。（是真的吗？）

然而，虽然我可以找到许多关于如何使用它的示例，但我找不到关于如何安装它的单一解释。

我对 iOS 和 Xcode 还比较陌生，而且很迷茫。有人可以向我解释如何获得图书馆吗？（我知道如何在我的项目中添加一个库，但是我只通过 gitHub 找到了 .m 文件的下载）

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T11:49:34.123

这个库带有一个头文件（AsyncSocket.h 或 GCDAsyncSocket.h）和一个实现文件（AsyncSocket.m 或 GCDAsyncSocket.m）。您只需在项目中复制 .h 和 .m 即可。并使用#import 语句在您的类中包含 AsyncSocket 或 GCDAsyncSocket 类以使用它。您下载的库不是静态库或框架编译格式。如果您浏览同一作者的示例，您将看到它是如何完成的。

# image - 从 URL 保存的图像部分是灰色的

> ID：10332085
> 
> 赞同：0
> 
> 时间：2012-04-26T11:01:35.020
> 
> 标签：image, url, inputstream, fileoutputstream

我正在编写一个程序来保存来自 Internet 的图像，但有些图像最终变成了部分灰色。或者它只是真的是灰色的图标，因为如果我打开图像它根本不是灰色的。

这是我用来保存图像的方法：

```
public static void saveImage(String imageUrl, String destinationFile) throws IOException{
    URL url = new URL(imageUrl);
    InputStream is = url.openStream();
    OutputStream os = new FileOutputStream(destinationFile);

    byte[] b = new byte[2048];
    int length;

    while ((length = is.read(b)) != -1) {
        os.write(b, 0, length);
    }

    is.close();
    os.close();
} 
```

我认为问题在于我在图像完全写入之前关闭了流。有什么办法可以检查它是否完成或什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:05:39.360

当您在 Windows 资源管理器中打开文件夹并在代码写入图像的同时刷新时，会发生此行为。Windows 将尝试创建缩略图。在文件的第一部分，所有的“headerinfo”都被存储了，所以windows会知道图像有多大等等。因为并非所有数据都存在，所以该部分的缩略图将变为灰色。

# javascript - 优化javascript中复数的复数幂的计算以提高准确性

> ID：10332090
> 
> 赞同：0
> 
> 时间：2012-04-26T11:01:47.623
> 
> 标签：javascript, math, optimization

我有这段代码可以计算复数的复幂：

```
var ss = a.re*a.re + a.im*a.im;
var arg1 = math.arg(a);
var mag = Math.pow(ss,b.re/2) * Math.exp(-b.im*arg1);
var arg = b.re*arg1 + (b.im * Math.log(ss))/2;
return math.complex(mag*Math.cos(arg), mag*Math.sin(arg)); 
```

（复数看起来像 {re: 1, im: 1}，math.arg 只给出 Math.atan2(n.im.n.re)。math.complex 是复数的构造函数）

它并不是特别复杂，而且我并不精通效率/准确性分析。

我想得到更好的结果，特别是复数的整数幂，因为这可以通过二项式展开更准确地完成。在我开始自己制作之前，有没有人已经用**javascript编写过类似的东西？**我不太担心速度，更担心准确性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:08:35.230

如果您只关心整数幂，最准确的方法是将它们相乘：

```
var Re = 0, Im = 1;
var newRe = 1, newIm = 0;
var retRe = 1, retIm = 0;
for(var i = 0; i < n; i++)
{
    newRe = retRe * Re - retIm * Im;
    newIm = retRe * Im + retIm * Re;
    retRe = newRe;
    retIm = newIm;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:14:01.630

因此，您的代码将复数转换为极坐标形式，然后应用基本指数规则。

您声称您更喜欢 (a+bi)^n = [anth degree polynomial expansion]

你说你担心准确性。

我能想到的不准确的三个来源

*   javascript numbers：如果您使用的是 javascript，那么担心准确性是很危险的。整数实际上是浮点数，因此如果您使用非常大的数字，则整数可能会出现精度错误。被警告。
*   数学函数：Math.pow 和 Math.atan2 计算结果的准确度。如果需要，您可以对此进行研究。
*   舍入误差：如果您执行大量操作以扩展与域/原像相关的操作范围/图像，则可能会加剧舍入误差。

还有一个低效率的来源需要关注：用多项式展开计算 z^n 将花费 O(n) 时间和 O(n) 空间，这绝对是可怕的。

您可以通过分解指数使其花费 O(log(n)) 时间和 O(1) 或 O(log(n)) 空间（与之前的 O(1) 时间和空间相比，仍然很糟糕） n 转换成它的二进制表示。

最后，您仍在计算浮点表示。当您可以（基本上）执行一个操作时，没有理由执行一长串操作来计算它；除非该操作非常不准确，否则您应该期望您执行的操作越少，您的错误就越少。

对准确性产生更深远影响的是您期望使用的数字的分布（非常小，非常大，两者等）和表示的选择（例如，如果您选择以极坐标或笛卡尔形式自然地表示它们）。例如，如果您计划进行大量的加减运算，您可能会得到更少的舍入误差和更快的笛卡尔运算速度。如果您计划进行大量的乘法、除法和取幂运算，或者在指数尺度上工作，您可能会获得更少的舍入误差和更快的极坐标。

# vb.net - 设置选定的选项卡而不触发 selectedIndexChanged 事件

> ID：10332091
> 
> 赞同：0
> 
> 时间：2012-04-26T11:01:54.553
> 
> 标签：vb.net, visual-studio-2008, tabcontrol

有没有办法在不触发 selectedIndexchanged 事件的情况下设置 tabControl 的选定选项卡？

例如这里选择 myTabPage2 时触发事件，因为 myTabPage1 是默认值：

```
Private Sub setupTabControl
    If blnHasAccount=true then
       MyTabControl.selectedTab=myTabPage1
    else
       MyTabControl.selectedTab=myTabPage2
    End if
End sub

Private Sub MyTabControl_SelectedIndexChanged(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyTabControl.SelectedIndexChanged
    'Do stuff (but only when user has actually changed the tab themselves)
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:12:20.150

当您设置新标签页时，您可以删除事件处理程序

```
Try
    RemoveHandler MyTabControl.SelectedIndexChanged, AddressOf Me.MyTabControl_SelectedIndexChanged
    .. do your works to change page here
    .. and then reconnect
Finally
    AddHandler MyTabControl.SelectedIndexChanged, AddressOf Me.MyTabControl_SelectedIndexChanged
End Try 
```

将所有内容包含在 Try finally 中以从异常中正确恢复非常重要

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2016-08-21T20:19:41.243

可以伪造并检查 ComboBox.Enabled 作为在 SelectedIndexChanged 事件中使用的标志，同时进行更改，然后在完成后设置回 true。但是，此类事件仍会触发（应该吗？），但至少您可以确保全局“组合框”变量的状态。

# security - Unicode 输入危险

> ID：10332094
> 
> 赞同：1
> 
> 时间：2012-04-26T11:02:16.963
> 
> 标签：security, gwt, unicode, input

用户输入的 unicode 是否存在任何真正的危险，而不是由用户代理/浏览器等处理？

显然，从服务器到客户端，存在真正的欺骗威胁，但我试图弄清楚在处理 unicode 输入时我应该注意哪些具体的“攻击”（如果有的话）或不满。

这个问题与语言无关，但我提出这个问题时考虑到对 GWT 应用程序的安全影响。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T11:20:35.120

任何用户输入的最大危险是在具有“特殊字符”的上下文中使用该输入。即，天真地将其连接到 SQL 查询中或将其输出到 HTML 中。如果您的应用程序的部分行为是由字符串（如 SQL 查询或 HTML 页面）控制的，并且用户可以控制这些字符串并可以注入自己的命令，那将是危险的。

不过，在这方面，Unicode 与其他编码相比并没有什么特别之处。您的环境中的特殊字符定义明确，您需要做的就是转义、过滤或清理任何用户输入，以便将这些特殊字符呈现为非特殊字符。对于任何其他编码，您也需要这样做。您需要注意您的转义/过滤/清理功能知道正确的编码，以便他们可以正常工作。

除此之外，Unicode 编码的文本只是文本。当您对其中包含的任何特殊字符进行中性处理并正确处理编码时，仅文本就没有危险。除了您的用户 sbuıɥʇ pɹıǝʍ buıʇıɹʍ 或出于某些特定目的利用相似字符之外，但这不再是普遍的危险。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T11:16:43.390

我可以想到用户控制的 unicode 字符串的几个问题：

1.  有多种方法可以在 unicode 中表示等效字符串。例如`ä`，可以表示为单个代码点，或者`a`后面跟一个组合`¨`. Unicode 规范化有助于解决大多数这些问题。
2.  有些字符允许奇怪的插入符号移动。我听说过一个聊天，您可以将自己的消息放在其他人的消息之上。这让他们因为说不恰当的话而被禁止，因为管理员没有意识到谁实际发送了所述消息。
3.  有相似的字符。例如，有一些俄语或希腊语字符在光学上与它们的 ASCII 等效字符没有区别。字符串应该唯一标识某些东西是非常有问题的。例如用户名或域。类似于经典的`l`vs`I`问题，除了更糟。
4.  使用 UTF-8 和 UTF-16，在代码点中间拆分字符串可能会导致一些问题。
5.  对字符串的某些操作可能会意外更改其长度。例如，将字符串大写可能会使其更长。

可能还有更多问题，我当然不是 unicode 专家

# c++ - 可执行文件将在无限情况下运行多长时间（任何时间限制）

> ID：10332095
> 
> 赞同：1
> 
> 时间：2012-04-26T11:02:16.660
> 
> 标签：c++, c, executable, exe

一个小小的疑问，我有一个无限循环运行的应用程序（exe），它执行多长时间。我的意思是，如果我的系统处于开启状态，它会执行多年。或者应用程序运行是否有任何时间限制。

（如果这不是这个问题的正确位置，请指出正确的参考）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T11:05:30.383

如果您的应用程序在无限循环中运行，即

```
while(1)
{
  //...
} 
```

**如果遇到错误并且您的代码没有正确处理**它，它将停止，否则它应该无限期地运行。

如果有与操作系统相关的信号来终止进程，它将终止。这可能来自用户手动尝试终止进程，也可能是由于系统内存不足而发生的。这些类型的操作系统信号通常是您无法控制的。但是，您可以实现一种方法来检测您的进程是否已终止（可能通过使用子进程），如果进程意外终止，它将重新启动/恢复进程。

如果您将进程添加到操作系统的启动脚本中，那么即使发生电源故障或可能导致重新启动的其他类型的事件，您也会受到保护。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T11:06:32.693

> 如果我的系统开启，它会执行多年吗

这取决于操作系统。可以配置 Unix 系统（使用`ulimit -t`），以便进程在消耗一定量的 CPU 时间后自动终止。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T11:04:38.307

只要计算机能够运行它，一个永远不会到达终点的程序将一直运行。

但是，如果您的程序可能导致堆栈溢出或其他一些崩溃

例如（将永远运行的程序）

```
int main(){
    while(true){
        int i = 0;
    }
} 
```

例如（崩溃的程序，相当肯定这实际上会崩溃）

```
int main(){
    while(true){
        int *i = new int;
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-26T11:05:56.127

它理论上可以永远执行。但是大多数复杂的程序并不是完全节省内存的。它可能会及时消耗越来越多的内存，并可能达到进程内存限制。

在 x86 Windows 系统上，[进程限制](https://stackoverflow.com/questions/10332095/how-long-an-executable-will-run-in-infinite-caseany-timing-limit)通常为 2GB

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-26T11:08:49.647

简单的答案是，它可能不会像您预期的那样永远运行。

您的操作系统（尤其是旧版本的 Windows）可能需要重新启动 - 示例：Windows 95 和 Windows 98（现已修补）中存在一个著名的错误，导致这些系统在正常运行 49.7 天后停止运行（[阅读此处](http://sites.google.com/site/edmarkovich2/whywindows95andwindows98wouldcrashafter49.7daysofuptime)）。我希望最新版本的 Windows 没有这种问题。

它还取决于您的操作系统的调度程序。大多数时候可能会有高优先级的任务运行。我听说过一些较旧的 Unix 系统，其中低优先级的任务需要多年才能获得运行的机会！. 无论如何，我们不会在桌面操作系统中遇到这种极端情况。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-26T11:09:51.993

来自维基百科的一个例子：

> 2005 年，Novell 报告了一台服务器的正常运行时间为 6 年。[2][3]。虽然这听起来可能不寻常，但当服务器在工业环境下维护并托管关键应用程序时，这实际上很常见，想想银行系统。

并且总是至少有一个进程会一直运行。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-04-26T11:10:38.187

我会简单地指向[维基百科](http://en.wikipedia.org/wiki/Uptime)：

> 2005 年，Novell 报告了一台具有 6 年正常运行时间的服务器。

在为服务器编写软件的业务中，进程仅在维护操作时停止。他们**预计**将永远运行。但在实践中，我们分配负载，使维护频率远高于每 6 年一次，但几个月并不罕见。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-04-26T11:04:18.563

它将一直执行，直到您重新启动或以其他方式终止该进程。

如果它真的是一个无限循环，你会很生气，很快就会杀死它，因为其他应用程序会在盒子上遭受 CPU 饥饿的困扰。如果你是多核的，这不会破坏交易，但看到其他所有东西都变慢仍然会让人恼火。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-04-26T11:05:33.193

这将是一个永恒的计划。重新启动或系统挂起将终止该进程

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-04-26T11:05:56.480

只要给定所有必需的资源，无限循环就会运行。

# powershell - 远程机器的powershell enable-psremoting

> ID：10332097
> 
> 赞同：0
> 
> 时间：2012-04-26T11:02:18.877
> 
> 标签：powershell

在我从另一台机器获得管理员访问权限的机器上启用 Ps-Remoting 会引发此错误 `Access is denied. + CategoryInfo : InvalidOperation: (:) [Set-WSManQuickConfig], In validOperationException + FullyQualifiedErrorId : WsManError,Microsoft.WSMan.Management.SetWSManQu ickConfigCommand`

在远程机器中启用 ps-remoting 的任何替代方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-18T17:32:47.833

这是我解决此问题的故障排除指南，其中包括：

*   您的机器是否连接到域或工作组？
*   您是否以本地管理员身份登录？
*   PowerShell 是作为“管理员”启动的吗？
*   你的密码是空的吗？
*   您是否尝试连接到 SharePoint 场？
*   您的服务器是否由托管公司托管/管理？
*   你在使用 VirtualBox 吗？
*   您正在运行 Windows XP 吗？
*   您是否在语言未设置为英语的计算机上运行该命令？

[https://serverfault.com/questions/337905/enabling-powershell-remoting-access-is-denied](https://serverfault.com/questions/337905/enabling-powershell-remoting-access-is-denied/568228#568228)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T20:12:53.007

在一个域中，我对[PsExec很幸运](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)

```
.\psexec \\servername -s -d powershell "Enable-PSRemoting -Force" 
```

-s 在系统帐户中运行远程进程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T13:46:31.170

在运行 powershell 脚本的远程计算机上安排作业。在脚本中，使用强制开关运行 Enable-PSRemoting cmdlet。该过程必须被提升。

# cucumber - 如何在不等待对方处理的情况下同时单击两个按钮？

> ID：10332107
> 
> 赞同：0
> 
> 时间：2012-04-26T11:02:48.793
> 
> 标签：cucumber, watir-webdriver

我有一个带有两个按钮的表单

[加入购物篮 1]

&

[加入购物篮 2]

我想同时单击两者，看看它们是否被添加到购物篮中。

每个按钮大约需要 1/10 秒来处理

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:07:34.823

我想你可以为此使用ajax。请参阅[http://www.w3schools.com/ajax/default.asp](http://www.w3schools.com/ajax/default.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T20:55:44.597

我可以想到两种可能的方法，但这只是理论

1）尝试在他们两个上使用click_no_wait，当你这样做时它不会等待刷新，并且点击的分离会非常接近我期望的。

1b）如果单击不等待不起作用，请查看触发“onclick”事件是否有效

2）了解ruby中的线程，创建两个线程并以某种方式协调它们以同时单击按钮。

我不知道普通用户如何使用鼠标来执行此操作，也许连接速度非常慢，这可能是可能的。

# android - 如何使用 ksoap2 将对象作为参数从 android 传递到 Web 服务

> ID：10332112
> 
> 赞同：0
> 
> 时间：2012-04-26T11:03:06.430
> 
> 标签：android, ksoap2, webservice-client, android-ksoap2

我正在尝试将对象作为参数发送到 java 上的 Web 服务。它总是抛出一个运行时异常，不能序列化什么是最好的方法来做到这一点提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T11:41:05.033

看看这个[Complex Objects with Ksoap2](http://seesharpgears.blogspot.com.es/2010/10/ksoap-android-web-service-tutorial-with.html) 本质上，你唯一要做的就是实现`KvmSerializable`接口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T11:12:09.267

就像谷歌代码中的 Ksoap2 页面一样，[CodingTipsAndTricks](http://code.google.com/p/ksoap2-android/wiki/CodingTipsAndTricks#Adding_an_array_of_complex_objects_to_the_request)部分：要获取此 xml：

```
<users>
  <user>
     <name>Jonh</name>
     <age>12</age>
  </user>
  <user>
     <name>Marie</name>
     <age>27</age>
  </user>
</users> 
```

你会这样做：

```
SoapObject users = new SoapObject(NAMESPACE, "users");
SoapObject john = new SoapObject(NAMESPACE, "user");
john.addProperty("name", "john");
john.addProperty("age", 12);
SoapObject marie = new SoapObject(NAMESPACE, "user");
john.addProperty("name", "marie");
john.addProperty("age", 27);
users.addSoapObject(john);
users.addSoapObject(marie); 
```

# c# - 如何使用 OpenPop 将附件保存到我的 C# 电子邮件应用程序中的文档

> ID：10332114
> 
> 赞同：-4
> 
> 时间：2012-04-26T11:03:10.570
> 
> 标签：c#, email, attachment, openpop

我卡住了！！！我需要知道如何将附件保存到文档中，有人可以为我提供一个代码片段或其他有用的东西吗，我一直在寻找几天:(

我正在使用名为 OpenPop 的第三方 dll。阅读电子邮件使用 2 种形式，一种用于显示电子邮件列表，另一种用于查看其中的内容。

这工作正常。

`Pop3Client pop3Client = (Pop3Client)Session["Pop3Client"]; // Creating new PopClient int messageNumber = int.Parse(Request.QueryString["MessageNumber"]); Message message = pop3Client.GetMessage(messageNumber); MessagePart messagePart = message.MessagePart.MessageParts[1]; lblFrom.Text = message.Headers.From.Address; // Writeing message. lblSubject.Text = message.Headers.Subject; lblBody.Text = messagePart.BodyEncoding.GetString(messagePart.Body);`

代码的第二部分显示附件的内容，但这仅在它是文本文件时才有用。我需要能够保存附件。我在这里的代码的底部也写了我的邮件正文，所以如果我收到附件，我无法查看我的邮件正文。

`if (messagePart.IsAttachment == true) { foreach (MessagePart attachment in message.FindAllAttachments()) { if (attachment.FileName.Equals("blabla.pdf")) { // Save the raw bytes to a file File.WriteAllBytes(attachment.FileName, attachment.Body); //overwrites MessagePart.Body with attachment } } }`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T11:07:14.767

尝试这个 ：）

获取附件的文件路径，即变量 'filePath' emailChangeRequest 是电子邮件的名称

```
MailAttachment oAttch = new MailAttachment(filePath.ToString(), MailEncoding.Base64);
emailChangeRequest.Attachments.Add(oAttch); 
```

希望这可以帮助

# android - 如何使用新的 apk 升级 prevoius apk 而不会丢失来自未知资源 apk 的 android 中以前的数据

> ID：10332116
> 
> 赞同：7
> 
> 时间：2012-04-26T11:03:19.503
> 
> 标签：android, apk

如何使用新的 apk 在不丢失真实设备中以前的 apk 数据的情况下升级 android 应用程序？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T11:09:18.940

AndroidManifest.xml 中有一个[versionCode](http://developer.android.com/guide/topics/manifest/manifest-element.html#vcode)元素。这是一个整数，每个新版本都应该增加它的值。所以这个整数的值越高，你的应用程序的版本就越新。因此，要使用 apk 更新您的应用程序，您应该将此数字增加 1 并重新编译您的应用程序并使用生成的 apk 像往常一样安装您的应用程序。数据将自动保存。这就是[hockeyapp](http://www.hockeyapp.net/)为 beta 测试人员更新应用程序的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T11:07:15.753

这是默认行为。如果需要删除数据，则需要实现特殊逻辑。只需重新安装apk。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T11:07:33.000

尝试查看您的数据是否存储在您的 SD 卡中，然后将包含的文件夹复制到您的计算机上。但我猜如果您的数据存储在您的 SD 卡上，新的 apk 会在重新创建所有内容并删除所有内容之前尝试读取它。如果您的数据存储在其他地方，只需备份这些数据。

我认为更新 apk 不会破坏您的数据。唯一知道何时有风险的事情是：在您的计算机上备份。希望它会有所帮助。

# php - 是什么导致 memcached 错误 10（“服务器错误”）？

> ID：10332121
> 
> 赞同：2
> 
> 时间：2012-04-26T11:03:47.077
> 
> 标签：php, memcached, libmemcached

使用 PHP，我在 memcached 中保留一个数组，作为以下过程的一部分：

1.  从 memcached 中获取数组
2.  对数组中的第一项执行操作
3.  根据操作结果更新数组
4.  在 memcached 中设置数组

该数组包含作为字符串的 URL。

对于大数组大小，memcached 集操作失败。最近，它因包含 78175 个 URL 的数组而失败。

我从 memcached 得到的错误有点笼统：

```
Result code: 10
Result message: SERVER ERROR 
```

[libmemcached 文档](http://docs.libmemcached.org/client_errors/MEMCACHED_SERVER_ERROR.html)对于这个特定错误几乎没有用处。

我使用的代码非常简单：

```
public function save() {
    $this->memcached->set($this->key, $this->items);       
}    

protected function load() {
    $this->items = $this->memcached->get($this->key);        
    if (!$this->items) {
        $this->items = array();
    }
} 
```

libmemcached 文档对此错误几乎没有直接帮助，而且错误本身含糊不清是可以理解的。

memcached 错误 10 的原因可能是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-21T00:20:21.823

就我而言，我相信这是因为数据超过了内存缓存对象的全局最大值 (1MB)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-26T12:12:20.320

```
Error is Memcached::OPT_BUFFER_WRITES - 10

$this->_Memcache =& new Memcached();
$this->_Memcache->setOption(Memcached::OPT_SERIALIZER, Memcached::SERIALIZER_PHP);
$this->_Memcache->setOption(Memcached::OPT_NO_BLOCK, true);
$this->_Memcache->setOption(Memcached::OPT_TCP_NODELAY, true);
$this->_Memcache->setOption(Memcached::OPT_BUFFER_WRITES, true);
$this->_Memcache->setOption(Memcached::OPT_SERVER_FAILURE_LIMIT,3);
$this->_Memcache->setOption(Memcached::OPT_HASH,Memcached::HASH_CRC); 
```

# java - 如何在switch中使用null

> ID：10332132
> 
> 赞同：253
> 
> 时间：2012-04-26T11:04:27.080
> 
> 标签：java, switch-statement

```
Integer i = ...

switch (i) {
    case null:
        doSomething0();
        break;    
} 
```

在上面的代码中，我不能在 switch case 语句中使用 null。我怎样才能做到这一点？我不能使用`default`，因为那时我想做其他事情。

* * *

## 回答 #1

> 赞同：334
> 
> 时间：2012-04-26T11:07:11.290

`switch`这对于 Java 中的语句是不可能的。`null`之前检查`switch`：

```
if (i == null) {
    doSomething0();
} else {
    switch (i) {
    case 1:
        // ...
        break;
    }
} 
```

您不能在`switch`语句^*中使用任意对象。编译器不抱怨`switch (i)`where `i`is an`Integer`的原因是 Java 自动拆箱`Integer`到`int`. 正如 assylias 已经说过的，拆箱会抛出`NullPointerException`when `i`is `null`。

^*从 Java 7 开始，您可以使用`String`in`switch`语句。

[Oracle Docs - Switch](https://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)中有关`switch`（包括带有空变量的示例）的更多信息

* * *

## 回答 #2

> 赞同：125
> 
> 时间：2015-06-02T16:04:20.823

```
switch ((i != null) ? i : DEFAULT_VALUE) {
        //...
} 
```

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2012-04-26T11:06:20.543

`switch(i)`如果 i 是`null`，将抛出 NullPointerException ，因为它会尝试将其拆箱`Integer`为`int`. 所以`case null`，这恰好是非法的，无论如何都不会达到。

`switch`您需要在语句之前检查 i 是否为空。

* * *

## 回答 #4

> 赞同：25
> 
> 时间：2012-04-26T11:14:48.647

Java docs clearly stated that:

The prohibition against using null as a switch label prevents one from writing code that can never be executed. If the switch expression is of a reference type, such as a boxed primitive type or an enum, a run-time error will occur if the expression evaluates to null at run-time.

You must have to verify for null before Swithch statement execution.

```
if (i == null) 
```

See [The Switch Statement](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)

```
case null: // will never be executed, therefore disallowed. 
```

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2015-10-02T21:48:45.973

鉴于：

```
public enum PersonType {
    COOL_GUY(1),
    JERK(2);

    private final int typeId;
    private PersonType(int typeId) {
        this.typeId = typeId;
    }

    public final int getTypeId() {
        return typeId;
    }

    public static PersonType findByTypeId(int typeId) {
        for (PersonType type : values()) {
            if (type.typeId == typeId) {
                return type;
            }
        }
        return null;
    }
} 
```

对我来说，这通常与数据库中的查找表一致（仅适用于很少更新的表）。

但是，当我尝试`findByTypeId`在 switch 语句中使用时（很可能来自用户输入）......

```
int userInput = 3;
PersonType personType = PersonType.findByTypeId(userInput);
switch(personType) {
case COOL_GUY:
    // Do things only a cool guy would do.
    break;
case JERK:
    // Push back. Don't enable him.
    break;
default:
    // I don't know or care what to do with this mess.
} 
```

...正如其他人所说，这会导致 NPE @ `switch(personType) {`。我开始实施的一种解决方法（即“解决方案”）是添加一个`UNKNOWN(-1)`类型。

```
public enum PersonType {
    UNKNOWN(-1),
    COOL_GUY(1),
    JERK(2);
    ...
    public static PersonType findByTypeId(int id) {
        ...
        return UNKNOWN;
    }
} 
```

现在，您不必在重要的地方进行空值检查，您可以选择或不处理`UNKNOWN`类型。（注意：`-1`在业务场景中不太可能是标识符，但显然选择对您的用例有意义的东西）。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2012-04-26T11:07:02.430

你必须做一个

```
if (i == null) {
   doSomething0();
} else {
   switch (i) {
   }
} 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-05-26T12:13:12.767

一些库试图提供内置 java`switch`语句的替代方案。[Vavr](http://www.vavr.io)就是其中之一，他们将其推广到模式匹配。

这是[他们文档](http://www.vavr.io/vavr-docs/#_pattern_matching)中的一个示例：

```
String s = Match(i).of(
    Case($(1), "one"),
    Case($(2), "two"),
    Case($(), "?")
); 
```

您可以使用任何谓词，但它们提供了许多开箱即用的谓词，并且`$(null)`完全合法。我发现这是一个比替代方案更优雅的解决方案，但这需要 java8 和对 vavr 库的依赖...

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-05-06T12:00:24.823

你也可以使用`String.valueOf((Object) nullableString)` 喜欢

```
switch (String.valueOf((Object) nullableString)) {
case "someCase"
    //...
    break;
...
case "null": // or default:
    //...
        break;
} 
```

> 查看有趣的 SO Q/A：[*为什么 String.valueOf(null) 会抛出 NullPointerException*](https://stackoverflow.com/questions/3131865/why-does-string-valueofnull-throw-a-nullpointerexception?utm_medium=organic&utm_source=google_rich_qa&utm_campaign=google_rich_qa#answer-3131884)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-12-10T09:59:39.717

基于@tetsuo 的回答，使用 java 8 ：

```
Integer i = ...

switch (Optional.ofNullable(i).orElse(DEFAULT_VALUE)) {
    case DEFAULT_VALUE:
        doDefault();
        break;    
} 
```

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2017-11-30T10:58:12.407

```
switch (String.valueOf(value)){
    case "null":
    default: 
} 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2012-04-26T11:06:03.323

你不能。您可以在 switch 中使用原语（int、char、short、byte）和字符串（仅限 java 7 中的字符串）。原语不能为空。切换前
检查单独的条件。`i`

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-05-18T04:35:23.753

我今天刚刚了解到，您不必仅仅因为 if 正在检查 null 就添加另一层缩进/大括号。您可以执行以下任一操作：

```
if (i == null) {
    // ...
} else switch (i) {
    case 1:
        // ...
        break;
    default:
        // ...
} 
```

或者

```
if (i != null) switch (i) {
    case 1:
        // ...
        break;
    default:
        // ...
} else {
    // ...
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-06-18T10:24:57.217

只需考虑 SWITCH 的工作方式，

*   在原语的情况下，我们知道它可能会因 NPE 自动装箱而失败
*   但是对于**String**或**enum**，它可能正在调用 equals 方法，这显然需要一个 LHS 值，在该值上调用 equals 。因此，鉴于不能对 null 调用任何方法，*switch*无法处理 null。

# php - mail() 值未发送

> ID：10332134
> 
> 赞同：-2
> 
> 时间：2012-04-26T11:04:37.823
> 
> 标签：php

这是一个小问题，我相信答案很简单，但也许我看不到树木的木材：

我有一个显示数据的表格；用户被要求编辑数据，进而更新数据库并发送包含更新数据的电子邮件。电子邮件到达，但虽然显示标题但未显示数据。

我究竟做错了什么？

电子邮件中显示的文本：

姓名：
电子邮件：
电话：

php代码：

```
$email_to = 'someone@here.com';
$name=$row['name'];
$email=$row['email'];
$phone=$row['mobtel'];
$email_subject = 'Feedback from website';
$headers = 'From: someone@there.com\r\n';

someone$message='Name:  ' .$name. "\r\n". 'Email:  ' .$email. "\r\n". 'Phone:  ' .$phone;

$sent = mail($email_to, $email_subject, $message, $headers);

 if($sent) 
 {print "Your mail was sent successfully"; }
 else 
 {print "We encountered an error sending your mail"; } 
```

这是前面的 php 代码：

```
mysql_connect($dbhost, $dbuser, $dbpass) or die(mysql_error());
    mysql_select_db($dbname) or die("Unable to connect: " . mysql_error());

    if (isset($_GET['view']))
    {
    $user = sanitizeString($_GET['view']);

    $data = "SELECT * FROM names WHERE id='$user'";
    $result=mysql_query($data) or die(mysql_error());

    while($row=mysql_fetch_array($result)){ 
```

?>

```
 <caption>Personal Record</caption>

<tr>
<th>ID</th>
    <td><?php
        echo $row['id'];
     ?></td>
</tr>

<tr>
<th>Name</th>
    <td><?php
        echo $row['name'];
     ?></td>
</tr>

<tr>
<th>E-Mail</th>
    <td><?php
        echo $row['email'];
     ?></td>
</tr>

<tr>
<th>Main Telephone</th>
    <td><?php
        echo $row['maintel'];
     ?></td>
</tr>

<tr>
<th>Mobile Telephone</th>
    <td><?php
        echo $row['mobtel'];
     ?></td>
</tr>

<tr>
<th>Organisation</th>
    <td><?php
        echo $row['organisation'];
     ?></td>
</tr>

<tr>
<th>Group Leader</th>
    <td><?php
        echo $row['group_leader'];
     ?></td>
</tr>

<tr>
<th>Supervisor</th>
    <td><?php
        echo $row['supervisor'];
     ?></td>
</tr>

<tr>
<th>Volunteer</th>
    <td><?php
        echo $row['volunteer'];
     ?></td>
</tr>

<tr>
<th>Assessor</th>
    <td><?php
        echo $row['assessor'];

        }
        }
     ?></td>
</tr>

</table>

    <br />
    <form method="post" action="update.php">
        <input name="Submit1" type="submit" value="Edit" style="width: 67px" /></form>

    <p>&nbsp;</p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:07:19.537

`someone$message`应该是`$message`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T11:06:15.083

您忘记在发送的内容中添加某人$消息；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T11:12:03.387

首先将其更改`someone$message`为`$message`然后执行代码。原因可能是您的数组`$row`似乎没有任何价值。或检查`$row[]`使用`print_r($row)`；:-)

# javascript - 使用具有 F11 键盘键功能的 JS 的按钮

> ID：10332138
> 
> 赞同：0
> 
> 时间：2012-04-26T11:05:05.753
> 
> 标签：javascript, html

我想制作一个按钮，如果按下它就像按下键盘上的 F11 键一样。对于按钮 html 会是这样的（我认为）

```
<button type="button" onclick="some function">FullScreen</button> 
```

现在我不知道那个 onclick 中会出现什么功能，因为我没有 JS。如果在按下按钮时文本“FULLSCREEN”更改为“NORMAL WINDOW”，另一件事会很好，这样用户就可以意识到他们必须再次按下同一个按钮才能退出全屏，就像每次单击时切换文本从“FULLSCREEN”变为“NORMAL WINDOW”，然后如果再次按下则变为“FULLSCREEN”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:43:48.980

```
function ToggleFullScreen() {
  // UniversalXPConnect privilege is required in Firefox
  try {
    if (window.netscape && netscape.security) { // Firefox
      netscape.security.PrivilegeManager.enablePrivilege("UniversalXPConnect");
    }
  } catch (e) {
    alert("UniversalXPConnect privilege is required for this operation!");
    return;
  }

  if ('fullScreen' in window) {
    window.fullScreen = !window.fullScreen;
  } else {
    alert("Your browser does not support this example!");
  }
}
```

```
<body>
  Press this button,
  <button onclick="ToggleFullScreen ();">Change full screen mode!</button>
  or press F11 to toggle between normal and full screen mode.
</body>
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-03-10T07:58:32.953

**.jsp 页面**

```
<img alt="" src="../static/images/Full_Screen.png" height="30" width="30" title="Full screen" id="fullscreen" name="fullscreen"/>
<img alt="" src="../static/images/Exit_full_screen.png" height="30" width="30" title=" Exit Full screen" id="exitFullscreen" name="exitFullscreen"/> 
```

**.js**

```
var full=0;
$(function() {
    $('#exitFullscreen').hide();//hide exit fullscreen image on page load

    $('#exitFullscreen').click(function() {
        exitFullscreen();//function to exit from full screen

    });

    $('#fullscreen').click(function() {
        fullscreen();//function to get  full screen
    });
});

//if user click f11 instead button we have to toggle ....
    $(document).keyup(function(e){
       if(e.which==122){
           e.preventDefault();//kill anything that browser may have assigned to it by default
           if(full==1){
              exitFullscreen();
            }
          else {
              fullscreen();
          }
       }
});

function fullscreen() {

    var docElm = document.documentElement;

    if (docElm.requestFullscreen) {
        docElm.requestFullscreen();

    } else if (docElm.mozRequestFullScreen) {
        docElm.mozRequestFullScreen();
    } else if (docElm.webkitRequestFullScreen) {
        docElm.webkitRequestFullScreen();
    }

    $('#exitFullscreen').show();
    $('#fullscreen').hide();
    full=1;

}

function exitFullscreen() {
    if (document.cancelFullScreen) {
        document.cancelFullScreen();}
        else if (document.mozCancelFullScreen) {
        document.mozCancelFullScreen();
        }
        else if (document.webkitCancelFullScreen) {
        document.webkitCancelFullScreen();
        }
        else if (document.msExitFullscreen) {
        document.msExitFullscreen();
        } 
    $('#exitFullscreen').hide();
    $('#fullscreen').show();
    full=0;
}

//worked on moxz 
```

# apache-flex - 如何在flex中设置折线图的y轴最小值

> ID：10332139
> 
> 赞同：0
> 
> 时间：2012-04-26T11:05:09.420
> 
> 标签：apache-flex, flex4

我创建了一个图表，我想显示一些巨大的数字，比如 5000,4800……但是 y 轴的最小值为 0，线条看起来太平滑了。我想要[3000,6000]中的y值范围，那我该怎么办？有什么属性吗？而且，我可以设置 y 轴的长度吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:44:35.127

尝试使用以下代码： -

```
<mx:LineChart id="lineChart"
                      showDataTips="true"
                      dataProvider="{YourDataProvider}"
                      width="100%"
                      height="100%">
            <mx:verticalAxis>
                <mx:LinearAxis id="ca" 
                               title="XMLList attribute"
                               minimum="3000"
                               maximum="6000"/>
            </mx:verticalAxis>

        </mx:LineChart> 
```

希望这会有所帮助......

# android - 是否有另一种方法可以在 AndroidManifest.xml 中声明新活动？

> ID：10332149
> 
> 赞同：0
> 
> 时间：2012-04-26T11:05:55.527
> 
> 标签：android

通常我会在 AndroidManifest.xml 中声明一个新活动，如下所示：假设我的新活动是 Tutorial.java。

```
<activity android:name=".Tutorial"></activity> 
```

但是我找到了一个例子，开发者没有像上面那样声明新的活动。代码列表如下：

**AndroidManifest.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
 <manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.dezine.thebasics"
  android:versionCode="1"
  android:versionName="1.0">
<uses-sdk android:minSdkVersion="8" />

<application android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name=".myMain"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <activity android:name=".myMenu"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="com.dezine.thebasics.CLEARSCREEN" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity>

</application>
</manifest> 
```

**我的菜单.java**

```
package com.dezine.thebasics;
import android.app.Activity;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;

public class myMenu extends Activity{

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    final MediaPlayer mpButtonClick = MediaPlayer.create(this, R.raw.click);

    Button bTutorial1 = (Button) findViewById(R.id.button1);
    bTutorial1.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            startActivity(new Intent("com.dezine.thebasics.TUTORIAL"));
            mpButtonClick.start();
        }
    });
    }
} 
```

上面的代码在开始时工作正常（意味着我没有更改 AndroidManifest.xml 中的任何内容）但是在我修改 Manifest.xml 中的某些内容后它会出现错误。例如。我更改了 SDK 版本。

```
E/AndroidRuntime(5236): android.content.ActivityNotFoundException: No Activity found to handle Intent { act=com.dezine.thebasics.TUTORIAL } 
```

请告诉我它是如何工作的。谢谢你。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-26T11:15:02.213

**TUTORIAL**和**Tutorial**之间是有区别的

 **让我给你更多的细节。

您已经编写了以下代码来启动活动：

```
 startActivity(new Intent("com.dezine.thebasics.TUTORIAL")); 
```

但是您在 AndroidManifest.xml 中将活动定义为：

```
<activity android:name=".Tutorial"></activity> 
```

这就是为什么你会得到这个例外。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-26T11:29:49.713

没有定义用于处理“com.dezine.thebasics.TUTORIAL”操作的活动。不过，有一个用于处理“com.dezine.thebasics.CLEARSCREEN”的活动。你确定你没有使用错误的动作名称。您可能缺少清单中的活动定义，或者您在代码中使用了错误的操作名称。尝试更改

```
startActivity(new Intent("com.dezine.thebasics.TUTORIAL")); 
```

到

```
startActivity(new Intent("com.dezine.thebasics.CLEARSCREEN")); 
```**

# entity-framework - 使用 Repository/UoW/DI 抽象 EntityFramework.dll 引用

> ID：10332152
> 
> 赞同：2
> 
> 时间：2012-04-26T11:05:56.870
> 
> 标签：entity-framework, dependency-injection, repository, repository-pattern, unit-of-work

当使用 EF（5.0 Beta Code First）作为我的 ORM/DAL 时，我一直在研究新项目的最佳实践。关键考虑因素是可测试性、松散耦合设计和跨存储库的工作单元/事务支持。

我知道在 EF DbContext 中是 UoW 而 DbSet 是存储库，并且在服务层中，您可以跨由 DbContexts SaveChanges() 方法协调的多个存储库进行更改。这是我的示例配置：

```
public interface IMyContext
{
    IDbSet<Foo> Foos{ get; }

    IDbSet<Bar> Bars { get; }

    int SaveChanges();

    void Dispose();
}

public class EFMyContext : DbContext, IMyContext
{
    private IDbSet<Foo> _foos;
    private IDbSet<Bar> _bars;

    public EFMyContext()
        : base("name=MyConnectionString")
    {
        Database.SetInitializer<EFMyContext>(null);
    }

    public IDbSet<Foo> Foos
    {
        get
        {
            if (_foos == null)
            {
                _foos = this.Set<Foo>();
            }

            return _foos;
        }
    }

    public IDbSet<Bar> Bars
    {
        get
        {
            if (_bars == null)
            {
                _bars = this.Set<Bar>();
            }

            return _bars;
        }
    }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Configurations.Add(new FooConfiguration());
        modelBuilder.Configurations.Add(new BarConfiguration());

        base.OnModelCreating(modelBuilder);
    } 
```

到目前为止一切都很好。如果我想使用这是像这样的上层

```
public class MyService : IMyService
{
    private IMyContext _context;

    public MyService(IMyContext context)
    {
        _context = context;
    }

    public void DoSomethingWithMyContext()
    {
        // fancy implementation code
    }
} 
```

在这里我遇到了问题，因为我直接依赖于 EntityFramework.dll，因为 MyContext 公开了 IDBSet 类型的属性。这似乎不对，与[这个](https://stackoverflow.com/questions/7651237/entity-framework-code-first-wrapper-or-repository)问题非常相似。

所以我的问题是，如何抽象出对 EF 的直接依赖？我考虑过引入我自己的存储库和工作单元来传递实时上下文，但这将如何影响更改跟踪和所有其他简洁的 EF 功能？

我正在研究的另一件事是管理上下文生命周期的 IoC 机制。那时我可以取消 UoW 吗？

抱歉含糊不清，我正处于研究饱和点，需要一个明确的起点才能开始实施。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:43:20.437

问自己一个问题：*我的架构应该解决什么问题？*除非您能提供无懈可击的答案，否则为什么从您的服务程序集中引用 EntityFramework.dll 是错误的，您就是在浪费时间。

引用EntityFramework.dll其实并没有错。为什么应该这样？您的服务不会公开与 EF 相关的任何内容，因此它是完全可模拟的。如果您还想对服务代码进行单元测试，则必须确保您的服务以抽象方式与 EF 一起运行。在这种情况下，存储库可能是一种可行的方法，但它将是重型专业存储库 - 而不是通常提出[的通用废话。](https://stackoverflow.com/questions/5625746/generic-repository-with-ef-4-1-what-is-the-point/5626884#5626884)存储库将隐藏与 EF 相关的所有内容，您的服务将不知道您的应用程序中存在任何类似 EF 的内容。它还回答了您关于 EF 功能的问题 - 如果您想让它可测试，您的服务必须完全独立于这些功能。例如，您不应该让您的服务代码依赖于 LINQ-to-Entities 或延迟加载。它只是导致[测试中的麻烦](https://stackoverflow.com/questions/6904139/fake-dbcontext-of-entity-framework-4-1-to-test/6904479#6904479)。

即使您实现了存储库，如果它们与您的服务在同一个程序集中并且该程序集引用 EntityFramework.dll，那么仍然没有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:51:15.240

在**服务层**中，您实际上并不需要使用`IQueryable<T>`.

因为这样您将与支持**LINQ的****ORM**紧密耦合。所有**LINQ**查询都应该封装在具体的**DAL**中。

 ******更好的是，您可以在**服务层中定义与****DAL**无关的存储库：

 **```
public interface IRepository<T>
{
    T GetById(int id);
    IEnumerable<T> GetAll();

    // Filter is some DTO that will be mapped to 
    // concrete LINQ query inside your DAL
    IEnumerable<T> GetFiltered(Filter<T> filter);

    void Add(T item);
    void Update(T item);
    void Remove(T item);
} 
```

**更新：**如果您喜欢 LINQ，您可以为 ObjectContext 和 ObjectSet 定义自己的接口：

```
public interface IObjectContext : IUnitOfWork
{
    IObjectSet<T> Set<T>() where T : class;
}

public interface IObjectSet<T> : IObjectQuery<T>
    where T : class
{
    void Remove(T entity);
    void Add(T entity);
}

public interface IObjectQuery<out T> : IQueryable<T>, IQueryableWrapper
     where T : class
{
    IObjectQuery<T> Include(string path);
} 
```

然后您可以为 EF 编写适配器。您还应该将查询转换层添加到您的适配器，因为 EF 无法理解表达式树中的接口。这是 QueryTranslator 的示例：[https ://stackoverflow.com/a/1846030/1275399](https://stackoverflow.com/a/1846030/1275399)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-01T11:03:39.910

您很可能没有 IMyContext 上的 DbSet 属性，而仅在实现上拥有 dbset。IMyContext 应该只用于了解保存上下文（并将其处理掉），仅此而已。因此，在存储库中，您可以拥有一个知道如何与 sql 对话的策略，比如使用 ef 并让它处理其中的 dbsets 部分。仅当您确实计划退出 EF 并在将来用其他东西替换它时，您才需要这样做。

[您可以在此处](http://www.rahulpnath.com/blog/using-repository-pattern-for-abstracting-data-access-from-a-cache-and-data-store/)找到有关此方法的更多详细信息********

# android - 如何在android中将textview右对齐？

> ID：10332153
> 
> 赞同：0
> 
> 时间：2012-04-26T11:06:00.160
> 
> 标签：android, android-layout

我**在表格中显示日期和板球得分**。但是我的问题是当我显示 No **1,2,3,....最多 9 时它工作正常...但是当我显示 10 时，下一个日期列中的日期由于两位数而向右移动一个位置10号。**如何解决这个问题？

![在此处输入图像描述](../Images/87afb55118cef68f813056836accd30e.png)

任何帮助将不胜感激......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:14:40.727

对齐可以用`android:gravity="right"`

另一种选择可能是，检查您的数字是否小于 10 并在前面加上一个零数字

# json - 我可以序列化字典吗 使用 DataContract 序列化程序？

> ID：10332158
> 
> 赞同：9
> 
> 时间：2012-04-26T11:06:23.327
> 
> 标签：json, wcf, serialization, datacontractserializer

我计划构建一个返回序列化为 JSON 的通用字典对象的 WCFservice。不幸的是，序列化失败了，因为对象可能总是不同的。KnownTypes 无能为力，因为属性类型是 Dictionary，我不能说 KnownType，因为类可能总是不同的。

如果可以序列化“未知类型”，有什么想法吗？

我不介意为我的每个类指定 DataContract/DataMember，但是（至少对于原型版本）我不希望每个响应都有强类型。Javascript 客户端根本不在乎。

匿名课程怎么样？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T01:02:43.163

**注意：**我在回答的开头已经详细介绍了 JavaScriptSerializer，如果您只是想了解原始问题中提到的已知类型问题的解决方案，请跳到答案的末尾。

**表现**

根据我运行的[基准测试](http://theburningmonk.com/benchmarks/)，JavaScriptSerializer 比其他替代方案慢得多，并且与 DataContractSerializer 相比，序列化/反序列化对象所需的时间是 DataContractSerializer 的 2 倍。

**不需要已知类型**

也就是说，JavascriptSerializer 更灵活，因为它不需要您提前指定“已知类型”，并且至少在字典的情况下，序列化的 JSON 更清晰（请参见[此处](http://theburningmonk.com/2011/05/json-serialization-datacontractjsonserializer-vs-javascriptserializer/)的示例）。

围绕已知类型的灵活性的另一面是它无法将相同的 JSON 字符串反序列化回原始类型。例如，假设我有一个简单的`Person`类：

```
public class Person
{
    public string Name { get; set; }

    public int Age { get; set; }
} 
```

如果我在序列化之前创建一个类的实例`Dictinoary<string, object>`并向其添加一个实例：`Person`

```
var dictionary = new Dictionary<string, object>();
dictionary.Add("me", new Person { Name = "Yan", Age = 30 });
var serializer = new new JavaScriptSerializer();
var json = serializer .Serialize(dictionary); 
```

我将得到以下 JSON `{"me":{"Name":"Yan","Age":30}}`，它非常干净但没有任何类型信息。因此，假设您有两个具有相同成员定义的类，或者如果`Person`是子类而不引入任何其他成员：

```
public class Employee : Person
{
} 
```

那么序列化程序根本无法保证可以将 JSON`{"Name":"Yan","Age":30}`反序列化为正确的类型。

如果您`{"me":{"Name":"Yan","Age":30}}`使用 JavaScriptSerializer 进行反序列化，则在字典中您会得到与“me”关联的值不是一个实例，`Person`而是`Dictionary<string, object>`一个简单的属性包。

如果你想取回一个`Person`实例，你可以（虽然你很可能永远不会想要！）`Dictionary<string, object>`使用`ConvertToType`辅助方法来转换它：

```
var clone = serializer.Deserialize<Dictionary<string, object>>(json);
var personClone = serializer.ConverToType<Person>(clone["me"]); 
```

另一方面，如果您不需要担心将这些 JSON 反序列化为正确的类型，并且 JSON 序列化不是性能瓶颈（分析您的代码并找出在序列化上花费了多少 CPU 时间（如果您还没有这样做的话）已经）然后我会说只使用 JavaScriptSerializer。

**注入已知类型**

如果，归根结底，您仍然需要使用 DataContractSerializer 并需要注入那些 KnownTypes，您可以尝试以下两件事。

1) 将已知类型的数组传递给 DataContractSerializer[构造函数](http://msdn.microsoft.com/en-us/library/bb908209.aspx)。

2) 将[DataContractResolver](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.datacontractresolver.aspx)的子类（具有定位您感兴趣的类型的方法）传递给 DataContractSerializer[构造函数](http://msdn.microsoft.com/en-us/library/bb908209.aspx)

您可以创建一个“已知类型注册表”来跟踪可以添加到字典中的类型，如果您控制需要注入 DataContractSerializer 的所有类型，您可以尝试最简单的方法：

1.  使用静态方法创建一个`KnownTypeRegister`类以将类型添加到已知类型列表中：

    ```
    公共静态类 KnownTypeRegister
    {
        私有静态只读 ConcurrentBag _knownTypes = new ConcurrentBag();
        公共静态无效添加（类型类型）
        {
            _knownTypes.Add(type);
        }
        公共静态 IEnumerable Get()
        {
            返回 _knownTypes.ToArray();
        }
    }
    ```

2.  添加一个使用寄存器注册类型的静态构造函数：

    ```
    [数据合约]
    公共类人
    {
        静态人（）
        {
            KnownTypeRegister.Add(typeof(Person));
        }
        [数据成员]
        公共字符串名称 { 获取；放; }
        [数据成员]
        公共 int 年龄 { 得到；放; }
    }
    ```

3.  构造序列化器时从寄存器中获取已知类型的数组：

`var serializer = new DataContractSerializer(typeof(Dictionary<string, object>), KnownTypeRegister.Get());`

更多动态/更好的选项是可能的，但它们也更难以实现，如果您想阅读更多关于动态已知类型解析的信息，请查看 Juval Lowy 的 MSDN 文章关于该主题的[此处](http://msdn.microsoft.com/en-us/magazine/gg598929.aspx)。此外，Carlos Figueira 的[这篇博文还详细介绍了更高级的技术，例如动态生成类型，非常值得一读！](http://blogs.msdn.com/b/carlosfigueira/archive/2011/09/21/wcf-extensibility-data-contract-resolver.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:21:11.913

**免责声明**我不建议您`object`在 WCF 端点上公开；尽管这看起来“灵活”，但这不是一个好主意，因为您没有指定您的服务将提供哪种信息。

*现在寻求答案*

如果您的 WCF 调用正在被 ajax 调用消耗，并且正如您所说，`Javascript client just doesn't care.`那么为什么不让您的 WCF 调用简单地返回一个字符串呢？然后你的 WCF 调用的内部可以`Dictionary<string, object>`使用 JavaScriptSerializer序列化

```
public string MyServiceMethod()
{
    var hash = new Dictionary<string, object>();
    hash.Add("key1", "val1");
    hash.Add("key2", new { Field1 = "field1", Field2 = 42});
    var serialized = new JavaScriptSerializer().Serialize(hash);
    return serialized;
} 
```

**免责声明**2 这是达到目的的一种手段（因为您提出了这个问题） - 对于生产质量应用程序，我将有一个定义明确的接口，因此很清楚所请求的内容并通过网络发送回。

# r - R：类元数据位置

> ID：10332161
> 
> 赞同：1
> 
> 时间：2012-04-26T11:06:37.507
> 
> 标签：r, s4

我有一个与在 R 中创建 S4 类有关的问题。根据手册，“setClass”函数有一个命名属性“where”，它定义了创建的类的元数据应该存储在哪里。

但是，如果我执行以下操作

```
> en <- new.env(parent=emptyenv())
> setClass("A", representation(x="numeric"), where=en)
[1] "A"
Warning message:
In getPackageName(where) :
     Created a package name, "2012-04-26 12:56:39", when none found 
```

我可以删除 en 使用

```
> rm(en) 
```

并且我仍然能够使用该课程，例如

```
> new("A", x=1)
An object of class "A"
Slot "x":
[1] 1 
```

这是为什么？

提前致谢，

斯文

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:01:22.237

方法包将类定义缓存在 中`methods:::.classTable`，可能是出于效率（类查找）的原因。`removeClass("A", where=en)`将删除缓存的版本和定义（尽管会产生虚假警告）。

# php - 拉随机开关盒

> ID：10332166
> 
> 赞同：-1
> 
> 时间：2012-04-26T11:07:06.390
> 
> 标签：php, switch-statement

我有一个开关功能，我希望能够从以下位置随机提取案例：

```
<?php
    function peopleGet($name) {
        switch ($name) { 

            case 'gloria': 
            echo 'gloria';
            break;

            case 'benjamin': 
            echo 'benjamin';
            break;

            case 'callum': 
            echo 'callum';
            break;
        }
    }
?> 
```

我仍然需要能够提取特定变量：

```
<?php peopleGet('gloria'); ?> 
```

但是，是否可以使用相同的功能来提取随机（不重复）案例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T11:32:39.390

答案是**否定**的（实际上你不应该），因为 switch case 语句是一个**控制结构**而不是数据结构，你最好有一个值数组，而且你可以返回多个值而不是重新调整单个值

就像是：

```
<?php 
function peopleGet($name=null){
    $people = array('gloria'=>array('name'=>'Gloria',
                                    'age'=>'29',
                                    'location'=>'usa'),
                  'benjamin'=>array('name'=>'Benjamin',
                                    'age'=>'39',
                                    'location'=>'uk'),
                    'callum'=>array('name'=>'Callum',
                                    'age'=>'19',
                                    'location'=>'uk'));

    if($name==null){
        $keys = array_keys($people);
        shuffle($keys);
        return $people[$keys[mt_rand(0,count($people)-1)]];
    }else{
        return $names[$name];
    }                         
}
print_r(peopleGet());//random
print_r(peopleGet('gloria'));//gloria's array
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T11:29:30.943

这是你想要达到的目标吗？

```
$peopleArray=Array('gloria'   => 'gloria',
                   'benjamin' => 'benjamin',
                   'callum'   => 'callum'); 
```

通过以下方式获得独特的价值：`$myPerson=$peopleArray['gloria'];`

通过以下方式获取随机值：`$myPerson=$peopleArray[array_rand($peopleArray)];`

注意：[array_rand manual](http://hu2.php.net/manual/en/function.array-rand.php) — 从数组中选择一个或多个随机条目

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T11:17:12.157

Are you referring to the `default:` clause that catches cases that haven't beeen defined?

```
switch ($name) { 
    // Gloria
    case 'gloria': 
    echo 'gloria';
    break;

    // Benjamin
    case 'benjamin': 
    echo 'benjamin';
    break;

    // Callum
    case 'callum': 
    echo 'callum';
    break;

    default:
    echo $name; // or whatever that needs to happen if it is an undefined case
    break;
} 
```

# objective-c - 将新视图推送到导航控制器时，NavigationItem titleView 被清除

> ID：10332168
> 
> 赞同：0
> 
> 时间：2012-04-26T11:07:13.330
> 
> 标签：objective-c, uinavigationcontroller, uiimageview, uinavigationitem

为什么`titleview`每次我通过导航控制器将新视图推送到视图堆栈时都会清除导航项。为什么会这样？在我的第一个视图控制器中，我手动设置了`UIImageView`a 。`titleview`但是当视图改变时，titleview 被清除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:13:07.760

对于每个单独的视图控制器，您应该添加标题视图。这就像一个导航控制器。你可以在顶部添加一个图像视图。左角有一些按钮。单击该按钮时执行此操作。

[self.navigationController popViewControllerAnimated:YES];

它会弹出你的视图控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:21:24.103

我不知道您使用的是哪个代码？？，

我已经尝试过这段代码的工作，

```
UIImage *Myimage = [UIImage imageNamed:@"titleBar.png"];
self.navigationItem.titleView = [[UIImageView alloc] initWithImage:Myimage]; 
```

# c - 解析网络和解析文件之间有什么区别吗？

> ID：10332172
> 
> 赞同：1
> 
> 时间：2012-04-26T11:07:16.277
> 
> 标签：c, networking, network-programming, redis, protocols

我正在编写一个工具来转储 redis 的 rdb 数据文件。我发送一个“同步”命令保存为从属。然后将 rdb 解析为键、值。但是，当直接从网络读取时，我无法解析 rdb。当我将网络数据写入文件并解析文件时，它运行良好。我不知道为什么。代码解析网络，文件完全相同。解析网络和解析文件之间有什么区别吗？

谢谢 ！

--update--------------------------------
问题解决：
是我的错，我不熟悉网络编程。我以错误的方式使用了读取系统调用。
例如：
我想从网络读取 SIZE 字节，我写道：
`nread = read(fd,buf,SIZE)`
我假设 nread 等于 SIZE 。这适用于大多数时间读取文件，但在大多数时间读取网络流时不起作用。所以我在 redis replication.c 中使用了syncRead。
谢谢大家帮我解决问题！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T11:58:21.890

解析网络流和解析文件没有区别。具体来说，在解析redis转储文件的情况下，永远不需要向前或向后搜索。您事先知道必须读取的确切字节数，因此您可以分配适量的内存。

通过同步命令作为从服务器连接的一个问题 - Redis 服务器不会关闭连接。一旦 rdb 文件被传输，它就开始通过常规的 redis 协议发送增量命令。如果您无法检测到此转换，则会出现解析错误。

如果您仍然无法解析网络流，也许您应该提供一些代码，或者粘贴一些异常/堆栈跟踪。

话虽如此，我认为最好将转储文件写入磁盘，然后进行解析。这就是redis slave现在的运作方式。

在旁边 ：

我是[redis-rdb-tools](https://github.com/sripathikrishnan/redis-rdb-tools)的作者，它是一个基于 python 的 redis 转储文件解析器。我已经记录了[转储文件的格式](https://github.com/sripathikrishnan/redis-rdb-tools/wiki/Redis-RDB-Dump-File-Format)，并且有一个关于如何以不同语言创建解析器的[常见问题解答条目。](https://github.com/sripathikrishnan/redis-rdb-tools/wiki/FAQs)您可能会发现这些链接很有用。

# windows - 有没有办法在 NPLogonNotify 中检测远程桌面会话事件

> ID：10332177
> 
> 赞同：1
> 
> 时间：2012-04-26T11:07:35.857
> 
> 标签：windows, login, remote-desktop, winlogon, terminal-services

与现有会话的远程桌面连接会触发网络提供商中的 NPLogonNotify。但是有没有办法我可以确定它是登录事件还是连接到现有会话的事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T03:30:16.460

[LsaGetLogonSessionData](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378290%28v=vs.85%29.aspx)从登录会话 ID 返回终端服务会话 ID。因此，您可以尝试使用 WTSConnectState调用[WTSQuerySessionInformation 。](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383838%28v=vs.85%29.aspx)运气好的话，结果将区分您关注的两种情况。

如果没有，并且如果您在从 NPLogonSession 返回之前不需要知道答案，您可以使用[WTSRegisterSessionNotification 观察](http://msdn.microsoft.com/en-us/library/windows/desktop/aa383841%28v=vs.85%29.aspx)与调用 NPLogonSession 相关的终端服务会话会发生什么。

我相信如果用户连接到现有会话，来自 NPLogonNotify 的终端服务会话将返回空闲或侦听状态。此外，调用 NPLogonNotify 中的登录会话将被关闭。[您可以通过调用LsaEnumerateLogonSessions](http://msdn.microsoft.com/en-us/library/windows/desktop/aa378275%28v=vs.85%29.aspx)来枚举登录会话。

如果用户收到一个新会话，我相信来自 NPLogonNotify 的调用中的相同终端服务会话将被使用，因此它将进入活动状态。通常还会启动一个或多个进程，这些进程与调用 NPLogonNotify 的登录会话 ID 相关联。[您可以通过将GetTokenInformation](http://msdn.microsoft.com/en-us/library/windows/desktop/aa446671%28v=vs.85%29.aspx)与 TokenStatistics 查询类一起使用来确定与进程关联的登录会话，如MSDN 词汇表中的[“登录标识符”下所述。](https://msdn.microsoft.com/en-us/library/windows/desktop/ms721592(v=vs.85).aspx#_security_logon_identifier_gly)

还有一个需要注意的复杂情况：如果用户是管理员，并且启用了 UAC，将会有两个调用 NPLogonNotify，一个与受限用户令牌相关联，另一个与提升的用户令牌相关联。这对于本地和远程登录都是如此。

# iphone - 如何从 iPhone 上的录音中获取线性 PCM？

> ID：10332179
> 
> 赞同：1
> 
> 时间：2012-04-26T11:07:54.687
> 
> 标签：iphone, ios, avfoundation, pcm, audioqueueservices

我想做一些像 iPhone 上的扬声器验证（作为课程项目）。我想知道如何从扬声器中获得线性 PCM。我阅读了有关队列服务的文档，似乎它记录了声音然后将其存储到文件中。有没有办法直接从中获得线性PCM？文档中提到了一些关于缓冲区的内容，但我不太明白。也许这是这样做的关键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T04:49:36.930

Audio Queue Services is for doing this. Just type in the code you need in the call back function. [http://developer.apple.com/library/ios/#documentation/MusicAudio/Conceptual/AudioQueueProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40005343](http://developer.apple.com/library/ios/#documentation/MusicAudio/Conceptual/AudioQueueProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40005343)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:27:17.500

```
 AVAudioRecorder *audioRecorder = [[AVAudioRecorder alloc]
                     initWithURL:soundFileURL
                     settings:recordSettings
                     error:&error];
        audioRecorder.delegate = self;
        audioRecorder.meteringEnabled = YES; 
```

然后使用 NSTimer 开始录制，例如在单击录制按钮时调用计时器

```
 -(IBAction)record:(id)sender{
       NSTimer *recordTimer = [NSTimer scheduledTimerWithTimeInterval:.01 target:self 
       selector:@selector(recordTimerAction:) userInfo:nil repeats:YES];     
    }

    -(void)recordTimerAction:(id)sender {

            [audioRecorder updateMeters];
            const double ALPHA = 0.05;
            double peakPowerForChannel = pow(10, (0.05 * [audioRecorder peakPowerForChannel:0]));
            lowPassResults = ALPHA * peakPowerForChannel + (1.0 - ALPHA) * lowPassResults;
            NSLog(@"The Amplitude of the recording Sound is %f",lowPassResults);
            NSLog(@"The Normal Linear PCM Value is %f",[audioRecorder peakPowerForChannel:0]);
    } 
```

// 委托方法

```
 -(void)audioRecorderDidFinishRecording: (AVAudioRecorder *)recorder successfully:(BOOL)flag{

        [recordTimer invalidate];

    } 
```

# security - 是否可以使用 OAuth 2.0 保护 WebSocket API？

> ID：10332182
> 
> 赞同：23
> 
> 时间：2012-04-26T11:08:01.930
> 
> 标签：security, oauth, websocket, oauth-2.0, oauth-provider

我正在实施一个 OAuth 提供程序来保护不同的基于 Web 的 API。最让我头疼的是通过 OAuth 保护 WebSockets。

它可以在浏览器中设置的客户端中完全安全地完成吗？

与带有服务器的 Web 应用程序相比，如果它位于浏览器中，有哪些风险？

我想使用 2-legged OAuth 来限制与 websocket 的连接，因此只有注册的客户端才能获取到 API 的 WebSocket 连接而不会被拒绝。由于 WebSocket 连接始终（！）在客户端（来自浏览器）上建立，是否可以保护 accessToken 不被盗和滥用？
此时，唯一从 Web 应用程序客户端应用程序设置基于浏览器的客户端的是 URL。

如果基于浏览器的应用程序不安全，我可以忍受，但我想确保至少基于 Web 的应用程序具有访问 websocket 的安全方式。

但那时我问自己是否需要 accessToken，因为我可以只使用 origin-URI 作为唯一的安全机制。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-27T08:31:11.670

是的，您可以使用 OAuth 保护您的 WebSocket 连接。[Kaazing WebSocket 网关](https://kaazing.com/products/websocket-gateway/editions/)具有优雅的架构，可使用多种方法（基于令牌、基于 HTTP 或基于 cookie）进行身份验证和授权。

此外，它以一种在 Web 上安全的方式完成，您可能正在与不受信任的客户端打交道。（或者至少，您应该始终假设您正在与不受信任的客户打交道。）

当客户端尝试 WebSocket 连接时，网关会接收请求。如果特定服务（即 URL）已被配置为受保护，则客户端将受到挑战。

收到挑战后，客户端需要提供一个令牌（假设在这种情况下已配置）。如果客户端已经拥有令牌——因为他们之前已经登录到其他系统或网页——那就太好了。如果没有，那么它必须获得一个。这完全取决于您选择的安全性。在这种情况下，它会联系 OAuth 令牌提供者以获取令牌。这可能意味着用户必须提供凭据。

一旦客户端拥有一个令牌，它就会将其发送到网关作为对质询的响应。网关支持标准 JAAS 架构，因此您可以插入登录模块来执行必要的身份验证。在这种情况下，它可以将令牌发送给令牌提供者以确定它是否是有效令牌。

如果是，则 WebSocket 连接已打开并可以继续。如果不是，则拒绝请求并关闭连接。

这有利于保护您的后端应用程序——只有有效用户才能通过网关。此外，由于 Kaazing WebSocket 网关可以存在于 DMZ 中，未经身份验证的用户甚至永远不会进入主防火墙内的可信网络。他们在外面很快就失败了。

这种架构非常强大，因为无论您选择什么安全框架，Kaazing 的网关都会插入其中，而不是将其自己的安全机制强加给您。此外，在 OAUth 或 OAuth2 的情况下，它不需要理解或解码令牌。令牌提供者是唯一需要了解它的人。但是，如果您的令牌提供者想要指定会话的持续时间，则可以将其与令牌一起包含在内，网关将接受它。

> 如果基于浏览器的应用程序不安全，我可以忍受，但我想确保至少基于 Web 的应用程序具有访问 websocket 的安全方式。

通过正确的架构和实现，可以使基于 Web 和基于浏览器的应用程序变得安全。在 Kaazing，我们始终假设您在 Web 上与不受信任的客户打交道，并相应地构建我们的架构。

以下是文档中包含高级描述的几个部分：

*   [身份验证期间会发生什么](http://kaazing.com/doc/5.0/security/u_authentication_gateway_client_interactions/)
*   [身份验证和授权如何与网关一起使用](http://kaazing.com/doc/5.0/security/u_auth_how_it_works_with_the_gateway/)

问候，Robin 产品经理，Kaazing

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-27T21:27:01.097

凭据授予仅与分发访问令牌之前执行的身份验证一样安全。这超出了他们所说的规范。因此，这取决于您决定在发放令牌以响应凭证授予之前放置的任何身份验证机制。

现在，假设您已经设置了一种很好的安全方式来获取您的凭据授权，或者通过常规 OAuth2 请求将访问令牌获取到您的浏览器中。

根据 OAuth2 规范，您可以自由地以任意数量的方式对部分进行 MAC 消化、加密部分或保护该令牌中的数据。浏览器中访问令牌的安全性取决于它包含的信息 - 人们通常将其设计为包含最少的信息（用户 ID、到期时间、版本、摘要）并使其可由您的服务器自我验证（因此是摘要） . 令牌的内容实际上是任意的。一些系统甚至提供访问“代码”作为令牌的代理。

现在让我们假设您有一个受保护的“安全格式”访问令牌，但有时间限制。让我们考虑一个真实的例子：Facebook 和他们的 OAuth2 实现。无论是完整的访问令牌还是用于服务器端凭证检索的访问代码（每个都有时间限制），您都可以使用 Kaazing 网关从浏览器发送令牌（或代码）以保护对 WebSocket 的访问。

我从使用 Kaazing 的网关中获得的一件事是 OAUth2 确实不保护任何东西 - 您可以随意分发任意形式的访问令牌。确保您的凭证身份验证方案、access_token 格式和 access_token 生命周期都是好的策略决策是一个好主意 - 这样您就可以获得安全性。

Kaazing 网关将允许您将任意令牌发送到网关并使用您编写的用于验证它们的 JAAS 登录模块来验证它们。政权的安全取决于您和政策决定。

问候，

史蒂文·阿特金森

网关服务器开发人员，Kaazing

# android - 如何将超过 1 个值放入列表中？

> ID：10332185
> 
> 赞同：0
> 
> 时间：2012-04-26T11:08:14.083
> 
> 标签：android, list

这是我的 Java 列表。

```
private void filldata() {
    ListView lv = (ListView) findViewById(android.R.id.list);

    String[] from = new String[] { comment, commentdate, commentposter };
    int[] to = new int[] { R.id.text_comment, R.id.text_commentdate,
            R.id.text_commentposter };
    List<HashMap<String, String>> fillMaps = new ArrayList<HashMap<String, String>>();
    for (int i = 0; i < 5; i++) {
        HashMap<String, String> map = new HashMap<String, String>();
        map.put(comment, "testing 1");
        map.put(commentdate, "testing 2");
        map.put(commentposter, "testing 3");
        fillMaps.add(map);
    }
    SimpleAdapter adapter = new SimpleAdapter(this, fillMaps,
            R.layout.newscommentlist, from, to);
    lv.setAdapter(adapter);
} 
```

给我的输出是

测试 3

测试 3

测试 3

但我想要的是

测试 1

测试 2

测试 3

如何达到我的期望？

更新：

这是 newscommentlist.xml

```
?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
android:background="#ffffff" >

<TextView
    android:id="@+id/text_commentdate"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginRight="10px"
    android:layout_marginTop="10px"
    android:gravity="right"
    android:textColor="#ff0000"
    android:textSize="20px" />

<TextView
    android:id="@+id/text_comment"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10px"
    android:layout_marginRight="10px"
    android:layout_marginTop="10px"
    android:gravity="fill_horizontal"
    android:textColor="#000000"
    android:textSize="30px" />

<TextView
    android:id="@+id/text_commentposter"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_marginLeft="10px"
    android:layout_marginRight="10px"
    android:layout_marginTop="10px"
    android:gravity="right"
    android:textColor="#000000"
    android:textSize="35px" /> 
```

这是 newscomments.xml

```
<ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="10px" >
    </ListView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:17:55.867

```
private void filldata() {
    ListView lv = (ListView) findViewById(android.R.id.list);

    String[] from = new String[] { "comment", "commentdate", "commentposter" };
    int[] to = new int[] { R.id.text_comment, R.id.text_commentdate,
            R.id.text_commentposter };
    List<HashMap<String, String>> fillMaps = new ArrayList<HashMap<String, String>>();
    for (int i = 0; i < 5; i++) {
        HashMap<String, String> map = new HashMap<String, String>();
        map.put("comment", "testing 1");
        map.put("commentdate", "testing 2");
        map.put("commentposter", "testing 3");
        fillMaps.add(map);
    }
    SimpleAdapter adapter = new SimpleAdapter(this, fillMaps,
            R.layout.newscommentlist, from, to);
    lv.setAdapter(adapter);
} 
```

# jsp - 通过JSP write 将html代码写入JSP

> ID：10332199
> 
> 赞同：0
> 
> 时间：2012-04-26T11:09:21.163
> 
> 标签：jsp

您好我正在动态生成 html 代码并尝试将该代码写入 jsp 代码。但我无法写出来。尽管如果我将其放入双引号中，它会编写相同的代码，但会将其作为参数传递给 jspwriter。例子 ：

```
pageContext.getOut().print(sbCutDetails.toString()); 
```

这是行不通的

```
pageContext.getOut().print("<td  width ="368.24646" id='0'  title="INSERT MACRO SLICE_0" bgcolor="WHITE" onclick="javascript:showMacro('null','111.0','22','0','111.0','0.0','0')">&nbsp;</td><td  width ="331.75354" id='1'  title="ADD MACRO TO BOTTOM_0" bgcolor="WHITE" onclick="javascript:showMacro('Edit Cut','100.0','12','1','100.0','111.0','0')">&nbsp;</td>"); 
```

这是工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:17:17.443

If sbCutDetails is a StringBuilder and you did append the same text to it, it should produce the same output.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:43:43.737

你可以通过使用检查`<%jsp:usebean ... %>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T11:14:34.133

我认为你需要使用 jsp scrip-let 来动态绑定“<% ... %>”和简单的 HTML 标签。

# css - CSS元素在Safari中低于预期位置

> ID：10332202
> 
> 赞同：0
> 
> 时间：2012-04-26T11:09:35.807
> 
> 标签：css, css-float, safari

我有一个问题，我有一个颜色块，我使用它就像一个按钮，它在 Firefox 和 IE 中很好地放置，但由于某种原因，在 Safari 中位于我希望它所在的位置下方（见图）。

![在此处输入图像描述](../Images/9316ab9e5e252a58400026356776aff3.png)

任何关于我做错了什么的指针都将不胜感激，因为我已经摆弄了一段时间并且似乎无法让它工作（？）

（我认为）相关的 CSS 是：

```
//the element that represents the button that is floating
//too low in safari:

#addplacebtn {
 text-align: center;
 margin-top: 0em;
 margin-bottom: 0em;
 display: inline-block;
 width: 35px;
 float: right;
 background-color: #226083;

}

//the element that is containing the problematic element

#edit-addplacebtn {
 height: 45px;
 width: 35px;
 top: 5px;

}

//the element containing the above element

.tbrow {
 height: 35px;
 width: 285px;
 margin-bottom: 5px;
 margin-top: 5px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:17:34.463

首先，您可以尝试将位置设置为绝对。这将确保它坚持一个位置。

```
position:absolute; 
```

第二而不是边距，您应该尝试左和上。因为所有浏览器的边距都不相同。

```
left: 400px;
top: 350px; 
```

在尽可能多的浏览器中获取元素应该存在的位置是很多尝试和诅咒，它只是:)

我希望这有帮助！！:)

附言。（抱歉英语不好，希望你能理解我xD）

# gtk - 如何在 Windows 7 上编译 GTK 波形查看器？

> ID：10332205
> 
> 赞同：1
> 
> 时间：2012-04-26T11:09:47.943
> 
> 标签：gtk, cygwin, mingw, vhdl, ghdl

为了在 Windows 7 上安装和编译 GTK wave viewer 3.3.35，我从[http://www.cygwin.com/](http://www.cygwin.com/)下载了 Cygwin并安装了它。我还安装了 MinGW 并将其 make 应用程序与 Cygwin 链接，以便在 Windows 上编译软件，如 GTK wave viewer 3.3.35 指南中所述。

我可以通过 Cygwin**配置**GTK 波形查看器，但下一步是**制作**，这在我的情况下没有发生。它说“缺少分隔符，停止”我真的不知道如何摆脱这个错误。请帮忙..

为了您的信息，我需要 Gtk 波形查看器来运行 GHW 格式文件（在 GHDL 上编译和运行 VHDL 文件后生成）以**观察 VHDL 代码的 Vhdl 模拟波形**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T15:20:06.263

Cygwin 能够为我构建和运行 gtkwave。在 setup.exe 中选择的包的确切排列经过了几次迭代，我选择了以下内容：

`automake, gperf, gtk+, python-gtk2.0, tcl, tcl-tk, xeyes, xz, zlib-devel, libgtk2.0_0, pkg-config`

安装完成后启动：`Start`--> `Cygwin-X`-->`XWin Server`启动 X 服务器。然后

```
$ wget http://gtkwave.sourceforge.net/gtkwave-3.3.45.tar.gz
$ tar -xzf gtkwave-3.3.45.tar.gz
$ cd gtkwave-3.3.45
$ ./configure
$ make
$ make install 
```

要验证安装，在 cygin 窗口中找到的 gtkwave 二进制文件应该匹配

```
$ which gtkwave
/usr/local/bin/gtkwave 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:57:27.870

“缺少分隔符，停止”错误通常意味着生成的 makefile 不是 cygwin-happy/兼容的。既然您已经安装了 minGW，您是否尝试通过 minGW 而不是 Cygwin 进行编译？配置脚本中是否有一个参数可用于为平台/操作系统 cygwin 配置 GTKwave，从而生成正确的 cygwin makefile？运行“configure --help”以查看哪些选项可用于配置，以及是否有为 cygwin 配置软件包的选项？

# c# - 我应该在多个上下文中使用 ViewModel/模型吗？

> ID：10332209
> 
> 赞同：2
> 
> 时间：2012-04-26T11:09:55.233
> 
> 标签：c#, wpf, mvvm

我有一个名为`CompanyListViewModel`. 它代表我的应用程序中的公司列表。它有一个类型`ObservableCollection<CompanyViewModel>`为 ListView 的属性。

`CompanyListViewModel`有一个命令叫做`OpenCommand`. 此命令在新窗口中打开选定的公司进行编辑。

调用的函数`OpenCommand`如下所示：

```
public void Open()
{
    Company selectedCompany = SelectedCompanyViewModel.Model
    CompanyViewModel elm = new CompanyViewModel(selectedCompany);
    openHandler(elm); // opens a new window with the given vm.
} 
```

所以这个函数：

*   获取当前选中的`CompanyViewModel`
*   检索基础模型。
*   实例化一个共享现有视图模型模型的新视图模型。
*   打开此视图模型。

这个对吗？我有两种选择：

*   使用现有视图模型打开一个新窗口
*   从数据库中获取一个新模型，将它放在一个新的视图模型中，然后打开一个窗口。

我应该使用哪种方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:15:53.323

That depends on the functionality your application should have. When changes made to the model have to be present in all where other places the model is used, using the same model seems to be the correct way.

When you want all places the view model is used to immediately show any changes made to the model even if they aren't confirmed by the user you should share your view model.

Opening the new window with a completely different model is an alternative when you want no logical connection between the both instances. Then you have to rely on your business logic that the first model gets replaced when the second one was changed and saved back into database.

# java - java中如何将String的多个子字符串替换为多个值？

> ID：10332218
> 
> 赞同：2
> 
> 时间：2012-04-26T11:11:05.500
> 
> 标签：java, string, replace, find, substring

我有一个很长的字符串，它是动态的。无论在哪里找到 % XXX %，我都必须获取 XXX 值并将其替换为其他值。会有多个 %XXX %。如何获得 % % 内的值？

例如。

```
"POLICY_NO = %POLNO%  and b.ACTION_TIME = (select max(ACTION_TIME) from POLICY_DETAILS where POLICY_NO = %POLICYID%)" 
```

如何读取 2 之间的每个值`%`？而且我必须将 POLNO 与一些会话变量（例如，POLNO=1234567，POLICYID=3）进行比较，如果匹配，那么我必须替换会话变量值。那么查询应该变成

“POLICY_NO = 1234567 和 b.ACTION_TIME =（从 POLICY_DETAILS 中选择最大值（ACTION_TIME），其中 POLICY_NO = 3）”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T12:25:06.217

仅考虑字符串中的替换：

*   如果您不知道应该替换哪些变量或其值，您可以这样做：

    ```
    // Map simulate your session variables.
    Map<String, String> variables = new HashMap<String, String>();
    variables.put("POLNO", "V1");
    variables.put("POLICYID", "V2");

    String input =
    /**/"POLICY_NO = %POLNO% and A.POLICY_DETAILS_ID = " +
    /**/"b.POLICY_DETAILS_ID and b.ACTION_TIME = " +
    /**/"(select max(ACTION_TIME) from POLICY_DETAILS " +
    /**/"where POLICY_NO = %POLICYID%)";

    StringBuilder output = new StringBuilder(input);

    int offset = 0;

    Matcher matcher = Pattern.compile("(%)([^%]*)(%)").matcher(input);
    while (matcher.find()) {
        // Get only second group (variable name), ignoring % symbols
        String variable = matcher.group(2);
        String value = variables.get(variable);

        // Calculate the offset.
        // The previous replaces can change the string length
        int start = matcher.start() + offset;
        int end = matcher.end() + offset;

        // Replace %XXX% by its value
        output.replace(start, end, value);

        offset -= variable.length() + 2 - value.length();
    } 
    ```

*   否则，您可以链接乘法调用：

    ```
    String.replace("%XXX%", "VALUE") 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T11:17:38.147

好吧，您可以使用`Pattern`and`Matcher`来获取两个百分比字符 (%) 之间的所有字符串。为此，请尝试以下表达式：`%([^%]*)%`

您仍然需要评估您找到的字符串。

或者，如果您知道这里可能发生什么（或应该支持什么），只需使用`someString.replace("%POLNO%", "somevalue")`.

但是，如果这是针对 SQL 的，您可能需要查看准备好的语句（带有[一些扩展](https://stackoverflow.com/questions/2309970/named-parameters-in-jdbc)）或一些 OR 映射器。在这种情况下，您基本上拥有的是命名参数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-26T11:13:56.010

查看`String.format()`类方法方法，但如果是用于 SQL，则应考虑使用`PreparedStatement`标准 Java 类。

这是 String.format 的示例

```
String formatted = String.format("%d is a number and %s is another string", 20, "Test");
System.out.println(formatted); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-26T12:03:28.703

我同意你应该使用它`PreparedStatement`来防止 SQL 注入。

但是，如果您决定在 String 中进行替换，则`appendReplacement`可以正常工作：

```
final String in = "POLICY_NO = %POLNO% and A.POLICY_DETAILS_ID = b.POLICY_DETAILS_ID and b.ACTION_TIME = (select max(ACTION_TIME) from POLICY_DETAILS where POLICY_NO = %POLICYID%)";

// initialize map
final Map<String, String> map = new HashMap<String, String>();
map.put( "POLNO", "1234567" );
map.put( "POLICYID", "3" );

final Pattern pattern = Pattern.compile( "%.*?%" );
final Matcher matcher = pattern.matcher( in );
final StringBuffer sb = new StringBuffer();
while ( matcher.find() ) {
    final String found = matcher.group();
    final String withoutPercents = found.substring( 1, found.length() - 1 );
    matcher.appendReplacement( sb, map.get( withoutPercents ) );
    // instead of map.get(), there could be session.getAttribute( withoutPercents  )
}
matcher.appendTail( sb );
System.out.println( sb.toString() ); 
```

**UPD**：根据下面的评论

# mysql - 高性能计数表的最佳引擎

> ID：10332227
> 
> 赞同：1
> 
> 时间：2012-04-26T11:11:47.123
> 
> 标签：mysql, database-optimization, database-engine

我有一个`counts`表，其中包含类似于（大约 14 个计数列）的列：

```
user_id
friends_count
photo_count
video_count
blogs_count 
```

每当用户添加照片或朋友时，此表就会更新。

我将使用 InnoDB 引擎，因为最好有行锁定，但与此同时，该表上的读取次数也很多。对于每个用户，当他们看到其他用户的个人资料时，甚至用户侧菜单都包含所有这些计数。

哪个引擎最适合**大多数**这样的写入和读取？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:29:43.413

我查看了不同的文章，尤其是这三个链接

[http://www.oracle.com/partners/en/knowledge-zone/mysql-5-5-innodb-myisam-522945.pdf](http://www.oracle.com/partners/en/knowledge-zone/mysql-5-5-innodb-myisam-522945.pdf)

[我应该为我的 MySQL 数据库使用 MyISAM 还是 InnoDB 表？](https://stackoverflow.com/questions/7492771/should-i-use-myisam-or-innodb-tables-for-my-mysql-database)

[http://www.quora.com/Which-MySQL-Storage-engines-are-used-by-Facebook](http://www.quora.com/Which-MySQL-Storage-engines-are-used-by-Facebook)

并得出结论最好继续使用 InnoDB 。

对此的任何评论也表示赞赏

谢谢并恭祝安康

基兰

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-05T12:05:33.513

**通用 MySql/MariaDB 引擎**

1.  在大多数情况下，XtraDB 是最佳选择。它是 InnoDB 的性能增强分支，并且是 MariaDB 的默认引擎，直到 MariaDB 10.1。

2.  InnoDB 是一个很好的通用事务存储引擎。它是默认的 MySQL 存储引擎和默认的 MariaDB 10.2 存储引擎，但在早期版本中，XtraDB 是 InnoDB 的性能增强分支，通常是首选。

3.  Aria 是 MariaDB 对 MyISAM 的更现代改进，占用空间小，允许在系统之间轻松复制。

4.  MyISAM 占用空间小，允许在系统之间轻松复制。MyISAM 是 MySQL 最古老的存储引擎。除了遗留用途外，通常没有什么理由使用它。Aria 是 MariaDB 更现代的改进。

> 信息来源：[MariaDB 引擎](https://mariadb.com/kb/en/mariadb/choosing-the-right-storage-engine/ "玛丽亚数据库")

# c# - 一个多形式的程序共享一个班级是可能的吗？

> ID：10332230
> 
> 赞同：0
> 
> 时间：2012-04-26T11:11:52.757
> 
> 标签：c#, visual-studio

如何让我的 sphereGUI.cs 使用 MyMath.cs？

这是写在 sphereGUI.cs 表单上的代码行`if (TriMath.IsNumeric(textBox1.Text) == true)` 以下是错误消息： 错误 The name 'TriMath' does not exist in the current context C:\Workspace\Cisc-2330-Labs\Lab6\Lab6\sphereGUI.cs 24 11 实验室6

![探险家](../Images/d982add646fd8a7655488d1b06c601ca.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:14:52.387

Make sure they are in same `Namespace`

For Form1.cs it should be

```
namespace Lab6
{
    class Form1:Form
    {
        //....
    }
} 
```

For MyMath.cs

```
namespace Lab6
{
    class MyMath
    {
        //....
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:16:35.737

Hey just check out this statement,

```
if (TriMath.IsNumeric(textBox1.Text) == true 
```

Your class Name is `MyMath` according to snap and you are using `TriMath`?

1.  Make sure the namespace is correct

2.  Make Sure that the references required is added in the header section (like using...)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T11:31:06.453

确保包含一个从其命名空间中获取类的 using 语句。

# wolfram-mathematica - 使用 Mathematica 求解低音扩散模型的微分方程

> ID：10332232
> 
> 赞同：0
> 
> 时间：2012-04-26T11:11:56.670
> 
> 标签：wolfram-mathematica, differential-equations

[http://www.bassbasement.org/F/N/FMB/Pubs/Bass%201969%20New%20Prod%20Growth%20Model.pdf](http://www.bassbasement.org/F/N/FMB/Pubs/Bass%201969%20New%20Prod%20Growth%20Model.pdf) 关于低音扩散模型，可以参考上面给出的链接。它用于预测新产品的采用。

使用下面的方法和 F(0)=0 的条件，我想得到 F(t) 和 F'(t)

```
 DSolve[{F′(t)=p+(q−p)∗F(t)−q∗(F[t])^2 }, F,t] 
```

有什么建议么？请在此处发布您的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T12:57:10.893

```
k = DSolve[{f'[t] == p + (q - p) f[t] - q f[t]^2,  f[0] == 0}, f, t] 
```

请...尝试阅读手册！

**编辑**

也许绘制它需要一些专业知识：

```
g[x_?NumericQ] := (f /. k[[1]] /. {p -> 1/3, q -> 2/3})[x]
Plot[{g[t], g'[t]}, {t, 0, 8}, PlotRange -> Full] 
```

![在此处输入图像描述](../Images/efa9cd1b80ce5b6b4bc0b122566bca3b.png)

# c# - Facebook Graph API 发布到墙上

> ID：10332241
> 
> 赞同：0
> 
> 时间：2012-04-26T11:12:41.940
> 
> 标签：c#, asp.net, facebook, facebook-graph-api

我正在尝试使用这种方法将照片发布到 Facebook 墙上。

```
/// <param name="method">Http Method</param>
/// <param name="url">Full url to the web resource</param>
/// <param name="postData">Data to post in querystring format</param>
/// <returns>The web server response.</returns>

public string WebRequest(Method method, string url, string postData)
{
    HttpWebRequest webRequest = null;
    StreamWriter requestWriter = null;
    string responseData = "";
    webRequest = System.Net.WebRequest.Create(url) as HttpWebRequest;
    webRequest.Method = method.ToString();
    webRequest.ServicePoint.Expect100Continue = false;
    webRequest.UserAgent = "[]";
    webRequest.Timeout = 20000;

    if (method == Method.POST)
    {
        webRequest.ContentType = "application/x-www-form-urlencoded";

        requestWriter = new StreamWriter(webRequest.GetRequestStream());
        try
        {
            requestWriter.Write(postData);
        }
        catch
        {
            throw;
        }
        finally
        {
            requestWriter.Close();
            requestWriter = null;
        }
    }
    responseData = WebResponseGet(webRequest);
    webRequest = null;
    return responseData;
} 
```

我遇到的问题是postData。我无法让它工作，我不确定那个字符串会是什么样子？谁能举个例子？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-11T13:36:12.773

您需要发布到[https://graph.facebook.com/me/feed?access_token=YOUR_ACCESS_TOKEN](https://graph.facebook.com/me/feed?access_token=YOUR_ACCESS_TOKEN)，发布的数据应如下所示

> message=这是一条测试消息

（您应该使用[Uri.EscapeDataString](http://msdn.microsoft.com/en-us/library/system.uri.escapedatastring.aspx)转义消息中的特殊字符，但不要转义 '='）

您还可以指定其他属性（如[文档](https://developers.facebook.com/docs/graph-api/reference/v2.0/user/feed#publish)中所定义），例如：

> message={此处转义消息}&link={此处转义链接}&caption={此处转义标题文本}&title={此处转义标题文本}&description={此处转义描述文本}&picture={此处转义图片网址}

（当然没有花括号。）这将在您的帖子中嵌入一个链接，该链接具有您选择的标题、标题、描述和缩略图。

我们看不到您的`WebResponseGet`方法，但您应该检查发布不成功时 responseData 包含的内容。或者，在您的 WebResponseGet 中查找 HTTP 状态代码和 WebExceptions。有助于读取返回的数据；facebook 以 JSON 格式返回错误，如下所示（示例）：

> {"error":{"message":"缺少消息或附件。","type":"FacebookApiException","code":100,"error_subcode":1349125}}

请注意，发布需要`publish_actions`您的应用程序的权限（您需要在请求访问令牌时将其添加到范围内，如果在您请求令牌时它不在范围内，则需要一个新令牌）。

# .net - 如何合并两个数据集，包含相同的记录，每个记录都有不同的变化

> ID：10332245
> 
> 赞同：0
> 
> 时间：2012-04-26T11:12:51.683
> 
> 标签：.net, merge, dataset

我有 DS A 和 B。DS A 在表 A 中有记录 1，在第 1 列有更改。DS B 在表 A 中有相同的记录 1，但在第 2 列和第 3 列有更改。

如果我做 A.Merge(B, true); -> 我放弃了在第 2 列和第 3 列中所做的更改，但保留了 DS A 中的更改，反之亦然。

有没有办法进行合并以保持两个更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:22:35.140

恐怕您必须自己实施此合并（或找到已实施此操作的人）。

dotnet-dataset 每行有两个版本：原始版本和修改版本。您可以遍历每一列并将原始值与修改后的值进行比较并做出相应的反应。

# asp.net-mvc - asp.net webgrid 标头格式和分页问题

> ID：10332250
> 
> 赞同：0
> 
> 时间：2012-04-26T11:13:12.353
> 
> 标签：asp.net-mvc, asp.net-mvc-3, webgrid

我正在使用带有 asp.net MVC 3 的 aspx 视图引擎。我有一个 WebGrid 控件，可以正确显示我选择的记录和通过所选记录的页面。单击字段标题也会对数据进行排序。

问题：

1.  如果在第二页上并且我单击任何可排序字段，则网格在排序后重新加载回第一页。我想在仍然进行排序的同时将其保留在第二页上。
2.  在下面代码中的“级别”字段之一旁边，我想显示一个图像，鼠标悬停时将显示一个静态 DIV 层，其行为类似于描述该字段的工具提示。

似乎没有任何内置属性可以做这两件事。有解决办法吗？这是我的代码：

```
var grid = new WebGrid(source: Model.EmployeeList, columnNames: new[] { "Name", "Level", "Department"});

grid.GetHtml(tableStyle: "table-EmpStyle", headerStyle: "tr-header", rowStyle: "webGrid-Row", alternatingRowStyle: "webGrid-alt-Row", previousText: "Previous",nextText: "Next", numericLinksCount: 0, 
     columns: grid.Columns(
     grid.Column("Name", header: "Full Name"),
     grid.Column( "Level", header: "Level"   ),
     grid.Column("Department", header: "Department") )) 
```

谢谢你的时间...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:24:34.093

您还需要将`ajaxUpdateContainerId`参数设置为 webgrid 所在容器的名称。例如：

```
<div id="updateWebGrid">
    @grid.GetHtml(tableStyle: "table-EmpStyle", headerStyle: "tr-header", rowStyle: "webGrid-Row", alternatingRowStyle: "webGrid-alt-Row", previousText: "Previous",nextText: "Next", numericLinksCount: 0,  ajaxUpdateContainerId: "updateWebGrid"
     columns: grid.Columns( 
         grid.Column("Name", header: "Full Name"), 
         grid.Column( "Level", header: "Level"   ), 
         grid.Column("Department", header: "Department") )) 
</div> 
```

对于第二个问题，您需要使用列的 Format 属性来注入一些类

例如：

```
@helper CreateImage(string m)
{
    <div>@m <img src="#" class="someImage"/></div>
}

@grid.GetHtml(columns: new WebGridColumn[]
{
    new WebGridColumn() {ColumnName = "TestTypeId", Header = "Test Type"},
    new WebGridColumn() {ColumnName = "Name", Header = "Name", Format = m => CreateImage(m.Name)}
}) 
```

一旦你声明了这部分，当你将鼠标悬停在带有 class 的 img 标签上时，你应该使用 jQuery 来显示你的 div `someImage`。

```
$(document).ready(function() {
    $(".someImage").mouseover(function() {
        $("yourDivId_Or_Class_for_Tooltip").show();
    });

    $(".someImage").mouseout(function() {
        $("yourDivId_Or_Class_for_Tooltip").show();
    });
}); 
```

就是这样。我没有检查这段代码的每一段，但这是你应该遵循的逻辑。我写了一篇关于 WebGrid 的博客文章，因此您可以查看该文章以供进一步参考：[http ://apparch.wordpress.com/2012/01/04/webgrid-in-mvc3/](http://apparch.wordpress.com/2012/01/04/webgrid-in-mvc3/)

# sql-server - 尝试更改 SQL Server IP 设置。配置管理器告诉我“指定的文件是只读的”

> ID：10332251
> 
> 赞同：14
> 
> 时间：2012-04-26T11:13:12.427
> 
> 标签：sql-server, windows, ip-address

我刚刚在我的 Windows 7 机器上安装了 SQL Server Express 2012。当我进入配置管理器时，它允许我启用/禁用 TCP/IP 协议，但是当我尝试更改任何 IP 设置时，按“确定”或“应用”时，它会显示一个对话框，上面写着：

> 指定的文件是只读的。[0x80071779]

**更新：**问题似乎自行解决。墨菲定律的反面是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-07-04T19:44:55.893

我在 W7 x64 Pro 上安装 sql 2012 Developer 时遇到同样的问题。

我通过手动修改注册表数据库解决了这个巨大的问题：

```
[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Microsoft SQL Server\MSSQL11.SQL2012\MSSQLServer\SuperSocketNetLib\Tcp] 
```

# c++ - SQLite：在 WAL 模式下持久化文件句柄

> ID：10332253
> 
> 赞同：2
> 
> 时间：2012-04-26T11:13:22.073
> 
> 标签：c++, multithreading, sqlite

我有一个 C++ 程序，其中有多个线程写入单个数据库的 SQLite 表（启用 WAL 模式）。每个线程创建一个 SQLite 句柄，执行 sqlite3_open()，写入表（事务中有写入），然后执行 sqlite3_close()，然后删除 SQLite 句柄。然后线程死亡。

即使所有线程都死了，SQLite 句柄仍然是打开的。为什么 SQLite 句柄没有关闭？我在这里想念什么？

我的 C++ 程序在 CentOS 5.5 上运行。

[编辑] 这是我使用的示例程序`pthread`

```
void threadFunction(void* pArg) {
    sqlite3 *handle;
    sqlite3_open("a.cm", &handle);    
    printf("Worker thread - Opened \n");
    sleep(10);    
    int r = sqlite3_close(handle);
    printf("Ret: %d\n", r);
    printf("Worker thread - Closed \n");
}

int main() {
    int i(0);
    pthread_t thread1, thread2;
    printf("Creating a worker thread\n");
    printf("SQLite libversion: %s\n", sqlite3_libversion());
    sqlite3 *handle;
    sqlite3_open("a.cm", &handle);    
    sqlite3_exec(handle, "pragma journal_mode = WAL", NULL, NULL, NULL);    
    printf("Main thread - Opened \n");

    pthread_create(&thread1, NULL, threadFunction, NULL);
    pthread_create(&thread2, NULL, threadFunction, NULL);

    pthread_join( thread1, NULL);
    pthread_join( thread2, NULL);
    sleep(200);
    sqlite3_close(handle);
    printf("Main thread - close \n");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T04:54:12.557

联系了 SQLite 团队：这是他们的回复-

当您关闭一个连接（在`WAL`模式下）时，SQLite 会检查进程中的任何其他连接是否持有正在关闭的数据库文件的 POSIX 锁。如果是这样，它会推迟关闭文件句柄，直到另一个连接放弃其 POSIX 锁（如果打开同一个文件的另一个连接，文件描述符将被重用，否则它只是等待直到可以安全关闭） .

结论是：因此，在从 main() 函数关闭连接之前，从其他线程打开的句柄不会关闭！

# macos - Mac OS X 的 Autohotkey 替代品？

> ID：10332254
> 
> 赞同：20
> 
> 时间：2012-04-26T11:13:24.870
> 
> 标签：macos, scripting, autohotkey

以前有人问过这个问题，但没有答案。我也遇到了谷歌的砖墙。程序可以是免费的，也可以是付费的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T11:18:37.127

你想做什么？

[IronAHK](http://www.ironahk.net/)应该在 Mac 上工作 - 我不是 Mac 用户，所以我没有尝试过，但这是我尝试让 AutoHotkey 脚本工作的首选。

[AlternativeTo.net](http://alternativeto.net/)列出了一些[Mac OS](http://alternativeto.net/software/autohotkey/?platform=mac)的 AutoHotkey 替代品。最好的结果是[Project SIKULI](http://sikuli.org/)，它在功能方面看起来与 AHK 非常相似，但使用不同的脚本语言。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-06T03:04:38.647

[Keymando](http://keymando.com/) - 19 美元，30 天免费试用。使用 Ruby 作为其脚本语言。

IronAHK 将运行 AHK 脚本，但它的 GUI 需要 X11.app。我不相信它可以自动化常规的 Mac 应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-15T13:02:25.103

Quicksilver 可以作为 autohotkey 某些功能的部分解决方案：它具有[快捷键/触发器](http://leafraker.com/2007/09/17/how-to-create-a-quicksilver-trigger/)定义功能。对于文本扩展，mas os内置了[文本扩展](http://lifehacker.com/5931337/do-yourself-a-favor-set-up-mountain-lions-built-in-text-expansion-with-these-shortcuts)。

另一方面，applescript/automator 是一些自动化任务的 mac os 原生解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-03T23:59:06.370

我目前使用[KeyRemap4MacBook](https://pqrs.org/macosx/keyremap4macbook/)，它非常适合键映射，包括键的和弦。虽然它没有脚本语言。[Keyboard Maestro](http://www.keyboardmaestro.com/main/)似乎是一个流行的选项，带有一些脚本支持（虽然我自己没有尝试过）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-02T07:00:33.493

看看[巴特勒](http://manytricks.com/butler/)。免费试用，购买20美元。

我还没有找到像 AHK 这样的 Mac 开源工具。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-05-08T19:21:41.280

没有人提到[Quicksilver](http://qsapp.com/index.php) - 具有大量可扩展插件的免费实用程序。

# ruby-on-rails - Google Calendar API v3 - 更新事件

> ID：10332255
> 
> 赞同：7
> 
> 时间：2012-04-26T11:13:25.087
> 
> 标签：ruby-on-rails, ruby, google-calendar-api

我正在使用 google-api-ruby-client 来处理 Google Calendar API v3。

我面临的唯一问题是两次更新事件。

之前已在此处讨论过（[Google Calendar api v3 re-update issue](https://stackoverflow.com/questions/8574088/google-calendar-api-v3-re-update-issue)），但没有 ruby​​ 客户端，也没有答案。

当我添加一个新事件时，我会得到一个 ID 和一个 ETAG。我使用 ID 更新事件并获得新的 ETAG。现在，如果我尝试第二次更新，它不会更新并发送 400 错误消息“无效值”。

我必须在第二次更新时发送最新的 ETAG，但我不确定在使用 google-api-ruby-client 时如何发送。

这是代码：

```
 event = {
      'summary' => "Summary",
      'location' => "Location",
      'description' => "Description",
      'start' => {
      'dateTime' => @entry.from_date
     },
      'end' => {
        'dateTime' => @entry.to_date
      }
    }

    result = client.execute(:api_method => service.events.update,
                    :parameters => {'calendarId' => @entry.calendar.gid, 'eventId'=>@entry.gid},
                    :body => JSON.dump(event),
                    :headers => {'Content-Type' => 'application/json'}) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-15T04:07:18.240

文档对此非常粗略，但似乎`sequence`每次进行更新时都必须增加属性。这是一种修订控制机制。

[http://www.kanzaki.com/docs/ical/sequence.html](http://www.kanzaki.com/docs/ical/sequence.html)

# css - Wordpress 导航栏不可见

> ID：10332257
> 
> 赞同：0
> 
> 时间：2012-04-26T11:13:35.153
> 
> 标签：css, wordpress

在网站上

导航栏不可见

任何 CSS 问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:44:41.600

看看`wp-content/themes/immotech/style.css`第 184 行：

```
#top #nav ul {
  display: none; 
```

而且您的网站上有很多错误：

```
GET http://it.mediameans.de/themes/default/default.css 404 (Not Found) http://it.mediameans.de/:14
GET http://it.mediameans.de/nivo-slider.css 404 (Not Found) http://it.mediameans.de/:14
GET http://it.mediameans.de/js/cufon.js 404 (Not Found) http://it.mediameans.de/:14
GET http://it.mediameans.de/js/quicksand.font.js 404 (Not Found) http://it.mediameans.de/:14
GET http://it.mediameans.de/js/jquery.js 404 (Not Found) http://it.mediameans.de/:14
GET http://it.mediameans.de/js/custom.js 404 (Not Found) http://it.mediameans.de/:14
GET http://it.mediameans.de/scripts/jquery-1.7.1.min.js 404 (Not Found) http://it.mediameans.de/:14
GET http://it.mediameans.de/jquery.nivo.slider.pack.js 404 (Not Found) http://it.mediameans.de/:14
Uncaught TypeError: Property '$' of object [object Window] is not a function http://it.mediameans.de/:217
GET http://it.mediameans.de/wp-content/themes/immotech/images/skin2/border_vertical.png 404 (Not Found) http://it.mediameans.de/:105 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T11:57:51.007

打开位于主题文件夹中的 header.php 文件

位于此部分..

```
<link rel="stylesheet" href="themes/default/default.css" type="text/css" media="screen" />
<link rel="stylesheet" href="nivo-slider.css" type="text/css" media="screen" />
<script type='text/javascript' src='js/jquery.js'></script>
<script type='text/javascript' src='js/cufon.js'></script>
<script type='text/javascript' src='js/quicksand.font.js'></script>
<script type='text/javascript' src='js/custom.js'></script> 
```

将其更改为

```
// if you want to use the default stylesheet, copy the file default.css from the default theme folder and paste it into your theme folder,
<link rel="stylesheet" href="<?php bloginfo('template_directory');?>/default.css" type="text/css" media="screen" />
<link rel="stylesheet" href="<?php bloginfo('template_directory');?>/nivo-slider.css" type="text/css" media="screen" />
<script type='text/javascript' src='<?php bloginfo('template_directory');?>/js/jquery.js'></script>
<script type='text/javascript' src='<?php bloginfo('template_directory');?>/js/cufon.js'></script>
<script type='text/javascript' src='<?php bloginfo('template_directory');?>/js/quicksand.font.js'></script>
<script type='text/javascript' src='<?php bloginfo('template_directory');?>/js/custom.js'></script> 
```

**确保**文件位于应加载的主题文件夹中的正确文件夹中...

阅读文档[http://codex.wordpress.org/Theme_Development](http://codex.wordpress.org/Theme_Development)

米

# php - 使用 onclick 调用 php（更快的加载时间）

> ID：10332262
> 
> 赞同：-1
> 
> 时间：2012-04-26T11:13:56.200
> 
> 标签：php, javascript, jquery, tabs

我正在建立一个 Magento 平台网上商店。

我在模板中调用了一个内容块：

```
<a href="#tab">TAB BUTTON</a>
<div id="tab"><?php echo $this->getChildHtml('CONTENT'); ?></div> 
```

只有 getchildhtml 的内容太大，无法一次加载。单击按钮后是否可以加载php echo？

Display-none 仍然会预加载内容，但我正在寻找加载 getchildhtml 的 php 内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:20:02.637

你可以，但你需要使用 AJAX 并有一个服务器端脚本来提供内容

```
 <a href="#tab" id="button">TAB BUTTON</a>
  <div id="tab"></div>

$(function() {
  $('#button').on('click', function() {
    $('#tab').load('_URL_TO_PHP_THAT_ECHO_CONTENT_');
  });
}); 
```

# ruby - ruby on rails 应用程序和 google 应用程序脚本

> ID：10332264
> 
> 赞同：0
> 
> 时间：2012-04-26T11:13:58.103
> 
> 标签：ruby, ruby-on-rails-3.1, google-apps-script

我有一个在 ruby​​ on rails 和 mysql 数据库上运行的应用程序。我需要生成几个报告。目前我正在生成 csv 文件，但我的想法是与谷歌文档集成，一旦用户自动打开一个特定的文档，它就必须与我的 rails 应用程序同步并从数据库中获取数据并显示在谷歌文档中。

我需要一点提醒。我已经浏览了文档，但无法弄清楚这样做的方式。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:51:38.890

查看[to_google_spreadsheets](https://github.com/firmafon/to_google_spreadsheet) gem。它有据可查，并且似乎具有您正在寻找的所有功能。

干杯，肖恩

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T13:56:22.893

你需要在你的 gdoc 中写一个 onOpen。从那里调用 urlfetch 到您的应用程序。

# html - iPad Safari 上的 HTML 页面更大的字体大小

> ID：10332265
> 
> 赞同：0
> 
> 时间：2012-04-26T11:13:59.077
> 
> 标签：html, css, ipad, fonts, font-size

我想知道为什么我在 iPad 上的 Safari 上的字体比 Mac 上的任何浏览器都大，甚至是 Safari。以及如何解决！

这是一个 Wordpress 论坛，随附的屏幕截图显示 1 个帖子。看看日期：“2012 年 4 月 18 日”。第二张截图（iPad）比第一张大。这是为什么？这里没有播放 CSS - 都被注释掉了。

苹果浏览器： ![苹果浏览器](../Images/e963a3907a620b29711b2c7f64a024ee.png)

Safari iPad： ![Safari iPad](../Images/ab14b55163226688791bf22b2973dcc9.png)

仅供参考，我没有使用任何特殊的 iPad 元标记，JS 也被禁用。

该部分的 HTML 如下：

```
<div class="post-7 post type-post status-publish format-standard hentry category-two tag-tag1 tag-tag2 tag-tag3" id="post-7">
        <h2 class="entry-title"><a rel="bookmark" title="Permalink to Pellentesque elementum nulla mattis elit ullamcorper nec viverra felis mattis" href="http://foscavir.local.etalented.co.uk/blogs/pellentesque-elementum-nulla-mattis-elit-ullamcorper-nec-viverra-felis-mattis/">Pellentesque elementum nulla mattis elit ullamcorper nec viverra felis mattis</a></h2>

        <div class="entry-meta">
            April 18, 2012          </div><!-- .entry-meta -->
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:21:58.350

您可以尝试的第一件事是：[-webkit-text-size-adjust](http://css-infos.net/property/-webkit-text-size-adjust)

**编辑：**将其设置为评论中建议的 100%。

# c++ - MFC 中的 CEdit 和 GetwindowText

> ID：10332266
> 
> 赞同：2
> 
> 时间：2012-04-26T11:13:59.490
> 
> 标签：c++, visual-studio, mfc

我在对话框中添加了一个简单的 Cedit 控件并有一个`OnEnChangeEdit`回调。我正在尝试检索在框中键入的文本，但只能获取在下面对 printf 的调用中键入的内容的第一个字符：

```
void MFCDlg::OnEnChangeEdit() { 
  CString s; 
  m_platformSliceOverrideEditBox.GetWindowText(s); 
  _cprintf("%s", s.GetString());
} 
```

如果有帮助，我将使用 Unicode 字符集进行编译。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:20:43.487

`_cprintf`需要 ansi 字符串。如果您使用的是 unicode，那么它将在第一个字符处停止，因为第二个字节将为空。

改用`_tcprintf`它将在您构建为 unicode 时期望宽字符串。

# batch-file - 如何从批处理文件中确定分支名称

> ID：10332269
> 
> 赞同：2
> 
> 时间：2012-04-26T11:14:08.070
> 
> 标签：batch-file, tfs, branch, tf-cli

我从 TFS 获取了最新信息。我的本地路径是：

`C:\tfs\Project\Branch1\Config\Deployment\CopyInstallers.bat`

TFS 路径是：

`$\Project\Branch1\Config\Deployment\CopyInstallers.bat`

`CopyInstallers.bat`从服务器上不同位置的分支获取最新的安装程序文件夹并将它们压缩并将其放在服务器上的共享位置。

我有另一个名为的分支`Branch2`，它的 TFS 路径是

```
$\Project\Branch2\Config\Deployment\CopyInstallers.bat 
```

我正在尝试使用`TF.exe`or获取分支名称`TFPT.exe`，这样我就不应该在`CopyInstaller.bat`文件中对分支名称进行硬编码以获取最新的安装程序文件夹。

或者有没有其他方法可以让我知道批处理文件中的分支名称/路径？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:45:54.140

使用 TF.EXE 信息命令。

1.  从 DOS Shell 转到工作区中分支所在的目录 (C:\tfs\Project\Branch1\Config\Deployment)
2.  使用命令：`TF.EXE info .`
3.  解析“服务器路径：”行上的结果。

**编辑：** 使用 Visual Studio 2010 将`info`命令替换`properties`为

**编辑 2**

好的：我为您制作了一个控制台应用程序，在[此处获取 zip 文件](http://loicbaumann.fr/wp-content/uploads/2012/04/GetBranchFromPath.zip)，还有源代码和构建 exe。

告诉我这是不是你所期望的

# python - python virtualenv：为什么我仍然可以在干净/新的 virtualenv 中导入旧模块

> ID：10332270
> 
> 赞同：4
> 
> 时间：2012-04-26T11:14:14.783
> 
> 标签：python, virtualenv

我正在开始一个新的 Python 项目，我想与**virtualenv**一起工作以有一个干净的开始。不过，在设置好之后，我仍然可以为新的 virtualenv 导入尚未安装的旧模块 - 为什么？

我创建了一个：

```
virtualenv ~/virtualenvs/mynewproject --no-site-packages 
```

现在我激活`source bin/activate`

现在，当我启动一个 python 解释器（只需键入`python`）时，我认为它将在我的 virtualenv 中使用 python 解释器，并且我的 pythonpath 将被设置为我的virutalenv 的 python 的站点包路径（/virtualenvs/mynewporject/lib /python2.7/site-packages），仅此而已。

但是，当我查看 sys.path 时，所有旧的、系统范围的包都可用，我可以很好地导入它们——这是我不想要的。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T15:44:53.113

检查您的`PYTHONPATH`环境变量，它可能指向您拥有旧版本软件包的位置。此变量始终位于您的第一位，`sys.path`因此请确保您清除它或将其更改为指向您激活的 virtualenv。

# c++ - C++中的快速排序

> ID：10332271
> 
> 赞同：1
> 
> 时间：2012-04-26T11:14:17.103
> 
> 标签：c++, quicksort

我试图让快速排序工作以按字母顺序对 7000 个字符串的数组进行排序，但我得到的只是一个空白输出文件。它适用于我的冒泡排序方法，但不适用于此方法。我确定这是一个明显的错误，但我无法确定它。

```
void ArrayStorage::quicksort(int first, int last, string list[])
{
        int middle, p, index;
    string temp, partition;
    if (first < last)
    {  
            middle = int(first + last)/2;
            temp = list[middle];
            list[middle] = list[first];
            list[first] = temp;
            partition = list[first];
            p = first;
            for (index = first + 1; index <= last; index++)
            {
                    if(list[index] < partition)
                    {
                            p = p + 1;
                            temp = list[index];
                            list[index] = list[p];
                            list[p] = temp;
                    }  
            }  
            temp = list[first];
            list[first] = list[p];
            list[p] = temp;
            quicksort(first, p - 1, list);
            quicksort(p + 1, last, list);
    }
} 
```

我这样调用方法：

```
 quicksort(0,GetSize() -1,namesArray); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T11:17:12.577

How about using the built in quicksort?:

std::sort(&namesArray[0], &namesArray[GetSize()]);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T11:49:39.000

好吧，快速排序的每个循环中的原则是使 temp 变量的位置小于它的所有元素都放在 temp 的左侧，而更大的元素放在右侧。所以这必须是一个循环包含向右迭代来搜索是否有任何大于 temp 的数字，反之亦然。如果有，则将当前内容放到另一侧，然后从另一侧迭代，直到列表的整体迭代。在循环之后，所有小于 temp 的元素都应该在左边，而更大的元素在右边。

```
temp = list[first];
int f = first, l = last;
while (f < l)
{
    while ((f <= l) && (list[l] < temp)) l--;
    if (f <= l)
    {
        list[f] = list[l];
        f++;
    }
    while ((f <= l) && (list[f] > temp)) f++;
    if (f <= l)
    {
        list[l] = list[f];
        l--;
    }
} 
```

这段代码应该可以工作。（我在这台计算机上没有编译器）如果可以，请尝试递归调用函数本身。

另外还有一个忠告。正如许多人推荐的那样，尝试自己调试和解决问题。

希望能帮助到你

# html - #CSS Wrapper 无法识别内容

> ID：10332275
> 
> 赞同：0
> 
> 时间：2012-04-26T11:14:34.567
> 
> 标签：html, css, height, wrapper

自上周以来，我在缺席大约 2 年后再次尝试建立一个网站。一切都很顺利，直到我注意到当我最小化浏览器时，内容并没有留在包装器中。我一直在这个网站和谷歌上寻找解决方案，但我似乎找不到合适的解决方案。大多数解决方案都提到了#float 和溢出的问题，但我不使用浮点（希望这不是问题），我一直在玩溢出，但我无法让它工作。

您可以在下面找到我使用的 CSS 和 HTML 代码。

的HTML：

```
 <div id="wrapper">

        <div id="content">

            <div id="header">

                <div id="logo">
                <img src="style/images/logo.gif" width="184" height="73" alt="logo" />
                </div>

                <div id="menu">
        <ul id="navlist">
                      <li id="active"><a href="#" id="current">1</a></li>
                      <li>2</li>
                      <li>3</li>
                      <li>4</li>
                      <li>5</li>
                    </ul>
                </div>

            </div>

            <div id="main">

                Title

                subtitle

            </div>

            <div id="footer">

                <div id="left_banner">

                </div>

                <div id="right_banner">

                </div>

            </div>

        </div>

    </div> 
```

和 CSS

```
html, body, ul, li {
    margin:0px;
    padding:0px;
    height:100%;
}

#wrapper {
    text-align: center;
background:url(images/bg.gif);
    background-repeat:repeat;
    height:100%;
    width: 100%;
    overflow:auto;
} 

#content {
    background-color: #fff;
    margin: 0px auto;
    width: 780px; 
    height: 100%;
    border-left:#fd5d78 4px solid;
    border-right:#fd5d78 4px solid;
}

#header {
    position:relative;
    height:120px;
}

#logo {
    position:absolute;
    right:43px;
    top:37px;
}

#menu {
    position:absolute;
    bottom:0px;
    left:58px;
}

#main {
    position:relative;
    left:25px;
    top:35px;
    width:730px;
    height:320px;
}

#footer {
    position:relative;
    width:730px;
    left:25px;
    top:70px;
    background-color:#0F0;
    clear:both;
}

#left_banner {
    position:absolute;
    left:0px;
    width:349px;
    height:134px;
    border:#fd5d78 2px solid;
    background-color:#FFF;
}

#right_banner {
    position:absolute;
    right:0px;
    width:349px;
    height:134px;
    border:#fd5d78 2px solid;
    background-color:#FFF;
} 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:27:53.037

尝试添加`display:block;`到#wrapper

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:06:07.963

[jsfiddle](http://jsfiddle.net/ryanwfiorini/LC7TP/)

我知道你说过你不使用浮点数，但这里有一个使用它们的解决方案。您遇到的最大问题之一是您将两个页脚横幅设置为绝对位置，这会抛出父 div 上的 100% 高度。使用 floats 和 overflow:hidden 您可以将这些 div 带回 100% 计算中。

我必须对您的 css 进行许多更改，因此以我在 jsfiddle 中的内容作为您的起点。

# android - Concurrency issues in Android SQLite

> ID：10332282
> 
> 赞同：1
> 
> 时间：2012-04-26T11:14:47.693
> 
> 标签：android, sqlite, concurrency, locking, android-asynctask

I am having issues when I am running an AsyncTask that performs a long delete action on the local SQLite database. If the user rotates the screen, then the Activity is recreated and a new connection to the database is created, while the AsyncTask is running.

I know that SQLite supports multiple reading and one writing at a time, and this will be the case, so **I do not understand why it crashes when opening the database as readable while deleting is done...**

The failure is the next:

```
04-26 12:54:21.839: I/Database(3925): sqlite returned: error code = 5, msg = database is locked
04-26 12:54:21.839: E/Database(3925): SELECT locale FROM android_metadata failed
04-26 12:54:21.839: E/Database(3925): Failed to setLocale() when constructing, closing the database
04-26 12:54:21.839: E/Database(3925): android.database.sqlite.SQLiteException: database is locked
04-26 12:54:21.839: E/Database(3925):   at android.database.sqlite.SQLiteDatabase.native_setLocale(Native Method)
04-26 12:54:21.839: E/Database(3925):   at android.database.sqlite.SQLiteDatabase.setLocale(SQLiteDatabase.java:1967)
04-26 12:54:21.839: E/Database(3925):   at android.database.sqlite.SQLiteDatabase.<init>(SQLiteDatabase.java:1835)
04-26 12:54:21.839: E/Database(3925):   at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:820)
04-26 12:54:21.839: E/Database(3925):   at android.database.sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java:197)
04-26 12:54:21.839: E/Database(3925):   at com.caumons.trainingdininghall.persistence.DatabaseManager.openReadableDatabaseWithForeignKeySupport(DatabaseManager.java:172)
04-26 12:54:21.839: E/Database(3925):   at com.caumons.trainingdininghall.persistence.DatabaseManager.openReadableDatabaseWithForeignKeySupport(DatabaseManager.java:180)
04-26 12:54:21.839: E/Database(3925):   at com.caumons.trainingdininghall.persistence.DatabaseManager.openReadableDatabaseWithForeignKeySupport(DatabaseManager.java:180)
04-26 12:54:21.839: E/Database(3925):   at com.caumons.trainingdininghall.persistence.DatabaseManager.openReadableDatabaseWithForeignKeySupport(DatabaseManager.java:180)
04-26 12:54:21.839: E/Database(3925):   at com.caumons.trainingdininghall.persistence.DatabaseManager.openReadableDatabaseWithForeignKeySupport(DatabaseManager.java:180)
04-26 12:54:21.839: E/Database(3925):   at com.caumons.trainingdininghall.persistence.DatabaseManager.openReadableDatabaseWithForeignKeySupport(DatabaseManager.java:180)
04-26 12:54:21.839: E/Database(3925):   at com.caumons.trainingdininghall.persistence.DatabaseManager.openReadableDatabaseWithForeignKeySupport(DatabaseManager.java:180)
04-26 12:54:21.839: E/Database(3925):   at com.caumons.trainingdininghall.persistence.DatabaseManager.openReadableDatabaseWithForeignKeySupport(DatabaseManager.java:180)
04-26 12:54:21.839: E/Database(3925):   at com.caumons.trainingdininghall.persistence.DatabaseManager.openReadableDatabaseWithForeignKeySupport(DatabaseManager.java:180)
04-26 12:54:21.839: E/Database(3925):   at com.caumons.trainingdininghall.persistence.DatabaseManager.openReadableDatabaseWithForeignKeySupport(DatabaseManager.java:180)
04-26 12:54:21.839: E/Database(3925):   at com.caumons.trainingdininghall.persistence.DatabaseManager.open(DatabaseManager.java:157)
04-26 12:54:21.839: E/Database(3925):   at com.caumons.trainingdininghall.persistence.DatabaseManager.<init>(DatabaseManager.java:147)
04-26 12:54:21.839: E/Database(3925):   at com.caumons.trainingdininghall.openerp.models.ConnectionProfile$ConnectionProfileManager.<init>(ConnectionProfile.java:138)
04-26 12:54:21.839: E/Database(3925):   at com.caumons.trainingdininghall.activities.SelectConnectionProfile.fillData(SelectConnectionProfile.java:71)
04-26 12:54:21.839: E/Database(3925):   at com.caumons.trainingdininghall.activities.SelectConnectionProfile.onResume(SelectConnectionProfile.java:66)
04-26 12:54:21.839: E/Database(3925):   at android.app.Instrumentation.callActivityOnResume(Instrumentation.java:1149)
04-26 12:54:21.839: E/Database(3925):   at android.app.Activity.performResume(Activity.java:3833)
04-26 12:54:21.839: E/Database(3925):   at android.app.ActivityThread.performResumeActivity(ActivityThread.java:2085)
04-26 12:54:21.839: E/Database(3925):   at android.app.ActivityThread.handleResumeActivity(ActivityThread.java:2110)
04-26 12:54:21.839: E/Database(3925):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1643)
04-26 12:54:21.839: E/Database(3925):   at android.app.ActivityThread.handleRelaunchActivity(ActivityThread.java:2796)
04-26 12:54:21.839: E/Database(3925):   at android.app.ActivityThread.access$1600(ActivityThread.java:117)
04-26 12:54:21.839: E/Database(3925):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:932)
04-26 12:54:21.839: E/Database(3925):   at android.os.Handler.dispatchMessage(Handler.java:99)
04-26 12:54:21.839: E/Database(3925):   at android.os.Looper.loop(Looper.java:123)
04-26 12:54:21.839: E/Database(3925):   at android.app.ActivityThread.main(ActivityThread.java:3647)
04-26 12:54:21.839: E/Database(3925):   at java.lang.reflect.Method.invokeNative(Native Method)
04-26 12:54:21.839: E/Database(3925):   at java.lang.reflect.Method.invoke(Method.java:507)
04-26 12:54:21.839: E/Database(3925):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-26 12:54:21.839: E/Database(3925):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-26 12:54:21.839: E/Database(3925):   at dalvik.system.NativeStart.main(Native Method) 
```

I coded the following workaround, but I think this is not very polite:

```
private void openReadableDatabaseWithForeignKeySupport() {
    try {
        mDatabase = mDatabaseHelper.getReadableDatabase();
        mDatabase.execSQL("PRAGMA foreign_keys = ON");
    } catch (SQLiteException e) {
        /*
         * If there is an exception because the database is locked,
         * we will retry until it is free and can be opened.
         * */
        Log.d(getClass().getName(), e.toString());
        openReadableDatabaseWithForeignKeySupport(); // Recursive call
    }
} 
```

The most curious is that what seems to fail is the `setLocale()` method called automatically by Android, but the [docs](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#setLocale%28java.util.Locale%29) says that:

> setLocale() Sets the locale for this database. Does nothing if this database has the NO_LOCALIZED_COLLATORS flag set or was opened read only.

Any help will be much appreciated! :)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:18:22.460

像这样定期打开和关闭数据库并不是一个好主意。在应用程序启动时打开它一次，并在应用程序的整个生命周期内重复使用此连接。你甚至不需要费心去关闭它。SQLite 自己管理并发，所以你也不必担心多线程。

这将使您的所有“数据库已锁定”错误消失，并使您的代码更整洁、更简单。

# c# - Loading images from different directories to scroll panel

> ID：10332287
> 
> 赞同：0
> 
> 时间：2012-04-26T11:14:56.703
> 
> 标签：c#, visual-studio-2010

I'm implementing an application that :

*   loads images from "My Picture" folder to a panel automatically when the form is loaded. (You can find the code [here](http://www.dreamincode.net/forums/topic/149251-create-image-scroller-for-windows-application/))

*   There's another function in my program which is: Open folder, that enables the user to open a folder to load its images to the same panel too.

My question is: When ever I choose to open a new folder, the images of this folder appears **under** the images of "My Picture" folder, I know what is the problem but I don't know how to solve it.

The code for loading the images automatically from "My Picture" contains a variable called Position that defines the position of the current PictureBox control and it's initial value is 0.

```
//2 variables, one for the Y position of the current PictureBox control
            //and one for help count the number of images in the directory
            int position = 0;
            int count = 0; 
```

the code for Open Folder is the same code I used in loading the images from My Pictures, and position initial value is 0 too! thats why the new loaded images appears under the old ones.

```
private void openFolderToolStripMenuItem_Click(object sender, EventArgs e)
        {
            toolStripStatusLabel1.Text = "Getting files.....";

            int position = 0;
            int count = 0; 
```

how can I fix this problem? I thought of saving the position of latest created PictureBox and use it then as initial value in `private void openFolderToolStripMenuItem_Click`

Thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:46:15.550

尝试这样做

```
 int position = 0;
        int count = 0;
        private void openFolderToolStripMenuItem_Click(object sender, EventArgs e)
        {
            toolStripStatusLabel1.Text = "Getting files.....";
            //your work
        } 
```

所以当你再次调用这个位置时，位置不会是'0'\

**编辑** 我读了那个链接

```
PictureBox pb = new PictureBox(); 
```

您创建动态的控件，删除旧图像执行此操作

```
private void openFolderToolStripMenuItem_Click(object sender, EventArgs e)
        {
        foreach (Control ctrl in this.Controls)
        {
            if (ctrl is PictureBox)
                this.Controls.Remove(ctrl);
        }
        //Your code 
```

# report - Openerp 的 rml 报告

> ID：10332293
> 
> 赞同：1
> 
> 时间：2012-04-26T11:15:12.373
> 
> 标签：report, openerp, rml

在我的采购订单报告模板中，我有一个显示采购订单行详细信息的表格。这是我在采购订单中添加的产品。但是当添加至少 20 种产品时，模板中的产品刚刚覆盖在我购买的页脚订单模板。我使用标签来打破页面，但没有工作。

```
<condPageBreak height="600"/> 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T11:31:38.347

通过改变框架的高度，问题得到解决。我原来的框架ID定义如下：

```
<frame id="first" x1="34.0" y1="28.0" width="530" height="786"/> 
```

我将上面的内容更改为以下内容：

```
<frame id="first" x1="18.0" y1="42.0" width="535" height="600"/> 
```

# azure - Azure CloubdBlob's Properties.Length returns 0

> ID：10332295
> 
> 赞同：6
> 
> 时间：2012-04-26T11:15:29.810
> 
> 标签：azure, azure-storage, azure-table-storage

The following code returns blob file size of 0:

```
public long GetFileSize(string fileUrl)
{
    var blob = GetBlobContainer().GetBlobReference(fileUrl);
    return blob == null ? 0 : blob.Properties.Length;
} 
```

, its almost as it does not find the blob. But of I delete the blob I see that it gets deleted. This works when deleting:

```
void DeleteFileFromBlob(string fileUrl, bool deleteSnapshots)
{
    var blob = GetBlobContainer().GetBlobReference(fileUrl);
    if (deleteSnapshots)
    {
        var options = new BlobRequestOptions { DeleteSnapshotsOption = DeleteSnapshotsOption.IncludeSnapshots };
        blob.DeleteIfExists(options);
    }
    else blob.DeleteIfExists();
} 
```

Its basically the same code as the one above, so it seems that the blob is found.

If I iterate through the blobs I get the correct blob file size, like I do when I calculate the total amount of stored bytes i my storage:

```
public long GetStorageUsageByteSize()
{
    var blobClient = GetBlobClient();
    return (from container in blobClient.ListContainers()
                      select
                      (from CloudBlob blob in
                           container.ListBlobs(new BlobRequestOptions { UseFlatBlobListing = true })
                       select blob.Properties.Length
                      ).Sum()
                     ).Sum();            
} 
```

So, I cant figure out why the CloubdBlob::Properties.Length returns 0 when I use GetBlobReference with a url.

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-26T11:41:51.933

看起来您缺少对 FetchAttributes 方法的调用，该方法加载 blob 的元数据：

```
blob.FetchAttributes(); 
```

参考：[https ://azure.microsoft.com/en-us/documentation/articles/storage-properties-metadata/](https://azure.microsoft.com/en-us/documentation/articles/storage-properties-metadata/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-04T01:24:35.407

从服务器获取 Ref 应该可以解决问题！

```
await blobContainer.GetBlobReferenceFromServerAsync(blobPath); 
```

# winforms - 获取 WinForms 应用以应用另一个类库中存在的用户控件中的本地化集

> ID：10332297
> 
> 赞同：2
> 
> 时间：2012-04-26T11:15:41.057
> 
> 标签：winforms, localization, .net-2.0, globalization, resx

我有一个 Windows 窗体应用程序项目，它引用了一个包含用户控件的类库。

类库的开发人员以与我相同的方式设置本地化（从用户控件语言属性中选择一种文化，然后修改控件的相关文本属性，例如 Label.Text）。

当 PC 文化发生变化时，我的 Windows 窗体应用程序按预期工作 - 文本语言与 PC 文化相关。然而，所有的类库用户控件本地化都没有应用——语言总是英语。

如何让此类库中的用户控件与我的 Windows 窗体应用程序项目中的行为相匹配？

注意：我希望答案非常简单，并且我不必在用户控件初始化/加载事件中手动设置用户控件中的文本（来自 resx 文件）。

另外 - 类库项目是一组 DLL，它们不包含在我的项目的解决方案中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T14:08:44.667

确保您的附属组件位于正确的位置。这些文件应该像这样组织：

```
MyAssembly.dll
en-US/
    MyAssembly.resources.dll
zh-CN/
    MyAssembly.resources.dll 
```

[什么是卫星组件？](https://stackoverflow.com/questions/1941700/)对此进行了很好的总结。

# android - How to change language setting of the whole system in android without Intent?

> ID：10332300
> 
> 赞同：4
> 
> 时间：2012-04-26T11:16:22.630
> 
> 标签：android

I'm trying to change the language of **the whole system of Android Phone** on my application, cause our goal is to customized a Settings application.

I've tried this, but didn't work:

```
Configuration conf = Resources.getSystem().getConfiguration();

conf.locale = toSet;  //toSet is a Locale which I want to set to the system

conf.setToDefaults(); 
```

the other try didn't work either:

```
Locale.setDefault(toSet) 
```

There are ways to change the language of application, but not systems.

Is there any ways that I can reach the goal? Will getting the root permissions works for me? Or is there any ways to modify the UI interface of the Intent-Activity?

I've found that, in the source code, `"platform/packages/apps/Settings/src/com/android/settings/LocalePicker.java", "com.android.internal.app.LocalePicker" might help, and in the "platform/frameworks/base/core/java/com/android/internal/app",` there is a function which named "updateLocale", I guess it might help, but the class such as "IActivityManager" cause compile error in the Eclipse.

Does anyone have any ideas? Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:08:24.860

尝试这个

```
String languageToLoad = "zh";  
Locale locale = new Locale(languageToLoad);  
Locale.setDefault(locale);  
Configuration config = new Configuration();  
config.locale = locale;  
getBaseContext().getResources().updateConfiguration(config, null); 
```

安卓清单：

添加`android:configChanges="locale"`

# sql - double inner join in access db

> ID：10332303
> 
> 赞同：5
> 
> 时间：2012-04-26T11:16:33.480
> 
> 标签：sql, database, ms-access

I need to get some data from two tables, 1 people, 2 tasks, The following query in SQL works, and Access does not work

```
 SELECT     Task_Id,
            e2.emploeey_name AS W_FROM,
            e1.emploeey_name AS W_TO,
            t.Task_Details
 FROM       tasks AS T
 INNER JOIN Employees AS e1 ON e1.Emploeey_id = T.Task_To
 INNER JOIN Employees AS e2 ON e2.Emploeey_id = T.write_From 
```

I tried many ways, and I searched in Google and I did not find an answer If anyone has a solution I would appreciate it very

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-26T12:00:31.327

你试过用括号吗？MS Access 需要（即喜欢）围绕多个 JOINS 的括号：

```
 SELECT     Task_Id,
            e2.emploeey_name AS W_FROM,
            e1.emploeey_name AS W_TO,
            t.Task_Details
 FROM       
 (
      tasks AS T
      INNER JOIN Employees AS e1 
           ON e1.Emploeey_id = T.Task_To
 )
 INNER JOIN Employees AS e2 
      ON e2.Emploeey_id = T.write_From 
```

# uiviewcontroller - uiviewcontroller black

> ID：10332305
> 
> 赞同：4
> 
> 时间：2012-04-26T11:16:41.667
> 
> 标签：uiviewcontroller, storyboard, pushviewcontroller

I've just created a storyboard with few table controllers and one view controller. Everything works fine until my app push the view controller: it's shown completely black. I can add map view, image view or whatever, or even nothing (a complete empty view controller), but it's always shown black.

I push it using the the navigation [self.navigationController pushViewController] code line.

This is not happening with table controllers, just with view controllers.

Any suggestion?

I'm using Xcode 4.3.2 4E2002.

Thanks in advance,

Samuel

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T11:37:13.817

您是否正确定义了故事板？如果您未能正确初始化情节提要并从情节提要中实例化控制器，则可能会发生此行为。IE，你需要创建一个 UIStoryboard 对象并且需要通过调用来实例化你的控制器 `[storyboardObject instantiateViewControllerWithIdentifier: @"controllerName"];`......在这里查看线程：http: [//mobile.tutsplus.com/tutorials/iphone/ios-5-sdk-storyboards](http://mobile.tutsplus.com/tutorials/iphone/ios-5-sdk-storyboards)

# clojure - 带有生成的 uberjar 的 clojure-noir 项目 - NoClassDefFoundError

> ID：10332310
> 
> 赞同：2
> 
> 时间：2012-04-26T11:16:58.767
> 
> 标签：clojure, leiningen, noir

按照[http://www.webnoir.org/](http://www.webnoir.org/)说明创建一个新项目 - 我运行了 lein uberwar - 这会生成一个（可执行的）jar - 但是它无法找到清单中提到的主类 - 没有类找到文件。

该应用程序使用“lein run”运行。

uberjar 是否意味着能够以这种方式运行（我希望它会启动一个嵌入式码头？）

仅供参考[，使用 lein uberjar 生成的 Jar 在 NoClassDefFoundError 上失败](https://stackoverflow.com/questions/4354293/jar-produced-with-lein-uberjar-fails-on-noclassdeffounderror)是类似的 - 但已过时（这是修复了特定错误的 leiningen 的较新版本）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T17:24:58.743

诀窍是将 gen-class 添加到 server.clj

`(ns myproject.server ... (:gen-class))`

例如：我刚刚使用 lein uberjar 进行了部署，我有以下内容：

在我的 project.clj 中：

```
:main myproject.server 
```

在我的 server.clj 中：

```
(ns myproject.server
  (:require [noir.server :as server]
    [myproject.views.common]
    [myproject.views.index])
  (:gen-class))

(server/load-views "src/myproject/views/")

(defn -main [& m]
  (let [mode (keyword (or (first m) :dev))
        port (Integer. (get (System/getenv) "PORT" "8080"))]
    (server/start port {:mode mode
                        :ns 'myproject}))) 
```

*   需要顶部的视图
*   类
*   加载视图

现在它适用于 java -jar myproject-standalone.jar。

# zend-framework - 如何在控制器中检索表单 ID

> ID：10332312
> 
> 赞同：0
> 
> 时间：2012-04-26T11:17:11.923
> 
> 标签：zend-framework, zend-form

我在一页中有很多表单，
我的问题是如何检索发送的表单的 ID

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:28:13.590

b.b3rn4rd 是对提​​交字符串的正确测试（确保所有提交按钮都显示不同的内容）。

```
if ($this->getRequest()->getPost('submit') == 'Something Unique') {
// do some stuff
} 
```

# sql-server-2008 - Linked Server permission DBA SQl server 2008

> ID：10332315
> 
> 赞同：1
> 
> 时间：2012-04-26T11:17:12.757
> 
> 标签：sql-server-2008, linked-server

I want to assign such rights to a remote user so he can create a new linked server and can change only those linked servers that are created by him. How can I accomplish this? I have read about granting these permissions

GRANT alter any login TO [abc]

GRANT CONTROL SERVER TO [abc]

GRANT ALTER ANY LINKED SERVER TO [abc]*

But with these permission, still this user can not create a new linked server through management studio. But he can create a new linked server with sp_addlinkedserver. How can I solve that? Moreover this user can alter any linked server that is not desired. So how can he only alter those linked server that are created by him.

I do not want to give him Sysadmin rights. This user is owning only few databases on servers. And other databases are from some other vendors.

Any help would be appreciated!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:28:00.073

如果你可以限制你需要他运行的功能；您可以覆盖这些过程并使用[Execute As](http://msdn.microsoft.com/en-us/library/ms191296.aspx)来限制他可以运行的功能。如果您将特定的链接服务器限制为由他创建的服务器，那么在您的 sp_addlinkedserver 版本中添加一个记录所创建内容的表，然后在以后的过程中将其用作权限检查。

# java - 测试夹具不会初始化数组

> ID：10332317
> 
> 赞同：0
> 
> 时间：2012-04-26T11:17:23.650
> 
> 标签：java

我正在尝试测试我的旅程类方法，但是，任何使用 jArray 字段的方法都会给出空指针异常，因为实际上尚未创建 arraylist。我的印象是我的测试夹具可以解决这个问题，但问题仍然存在，感谢任何帮助。

```
private buscard.Journey tj1;
    private buscard.Journey tj2;

    /**
     * Default constructor for test class JourneyTest
     */
    public JourneyTest()
    {
       tj1 = new buscard.Journey(20120101, 120000, "74", 1);
        tj2 = new buscard.Journey(20120102, 120000, "74", 1);
        ArrayList<Journey> jArray = new ArrayList<Journey>();
        jArray.add(tj1); 
    }

    /**
     * Sets up the test fixture.
     *
     * Called before every test case method.
     */
    protected void setUp()
    {
        tj1 = new buscard.Journey(20120101, 120000, "74", 1);
        tj2 = new buscard.Journey(20120102, 120000, "74", 1);
        ArrayList<Journey> jArray = new ArrayList<Journey>();
        jArray.add(tj1);
    }
    public void testGetDate()
    {
        Journey testJ1 = new Journey(20120101, 12.00, "74", 1); 
        assertEquals(20120101, testJ1.getDate());
    }
    public void testGetTime(){
        Journey testJ1 = new Journey(20120101, 12.00, "74", 1);
        assertEquals(12.0, testJ1.getTime());
    }
    public void testGetBusNumber(){
        Journey testJ1 = new Journey(20120101, 12.00, "74", 1);
        assertEquals("74", testJ1.getBusNumber());

    }
    public void testConstructor(){
       Journey testJ1 = new Journey(20120101, 12.00, "74", 1);
       assertEquals("74", testJ1.getBusNumber());
       assertEquals(12.0, testJ1.getTime());
       assertEquals(20120101, testJ1.getDate());
    }  

}
package buscard; 
import java.util.ArrayList;
/**
 * Write a description of class journey here.
 * 
 * @author (your name) 
 * @version (a version number or a date)
 */
class Journey
{
    public int date;
    public double time;
    public String busNumber;
    public int journeyType;
    public static double dayCharge = 0;
    public static final double maxDayCharge = 3.50;
    public static double weekCharge = 0;
    public static final double maxWeekCharge = 15;
    public static double monthCharge = 0;
    public static final double maxMonthCharge = 48;
    private int journeyNumber;
    private static int numberOfJourneys = 0;
    public double costOfJourney; 
    public static ArrayList<Journey> jArray;

    public Journey(int date, double time, String busNumber, int journeyType)
    {
        this.date = date;
        this.time = time;
        this.busNumber = busNumber;
        this.journeyType = journeyType;      
        journeyNumber = ++numberOfJourneys;

    }

    static
    {
      ArrayList<Journey> jArray = new ArrayList<Journey>();               
    }

    public int getDate(){
        return date;
    }  

    public double getTime(){
        return time;
    }

    public String getBusNumber(){
        return busNumber;
    }

    public double getCostOfJourney(){
        return costOfJourney;
    }

    public int getJourneyType(){
        return journeyType;
    }
    public boolean isInSequence(int date, double time){
        Journey prevJourney = jArray.get(jArray.size()-1);
        return((prevJourney.getDate() < date)||(prevJourney.getDate() == date && prevJourney.time < time));                       
    }           

    public static double returnLeast(){
        double d = maxDayCharge - dayCharge;
        double m = maxMonthCharge - monthCharge;
        double w = maxWeekCharge - weekCharge; 
        double least = 0;
        if (d <= w && d <= m)
        {
             least = d;
        }
        else if(w <= d && w <= m)
        {
             least = w;
        }
        else if(m <= d && m <= w)
        {
             least = m;
        }

        return least;
    }

        public double journeyCost(Journey reqJourney){                   
        if (journeyType == 1){                                 
            if (dayCharge <= 2.50 && weekCharge <= 14 && monthCharge <= 47)
            {
                costOfJourney = 1;
            }
            else 
            {
                costOfJourney = returnLeast();
            }

        }
        else if (journeyType == 2)
        {
            if (dayCharge <= 1.80 && weekCharge <= 13.30 && monthCharge <= 46.30)
            {
                costOfJourney = 1.70;
            }
            else 
            {
                costOfJourney = returnLeast();
            }
        }
        else if (journeyType == 3)
        {
            if (dayCharge <= 1.60 && weekCharge <= 13.10 && monthCharge <= 46.10)
            {
                costOfJourney = 1.90;
            }
            else 
            {
                costOfJourney = returnLeast();
            }

        }          
        return costOfJourney;    
    }

    public static void updateCurrentCharges(int date){
        int newDayOfYear = DateFunctions.getYearDay(date);
        int newWeekOfYear = DateFunctions.getYearWeek(date);
        int newMonthOfYear = DateFunctions.getYearMonth(date);

        if (newDayOfYear > WmBusPass.dayOfYear)
        {
            WmBusPass.dayOfYear = newDayOfYear;
            dayCharge = 0;
        }
        if (newWeekOfYear > WmBusPass.weekOfYear)
        {
            WmBusPass.weekOfYear = newWeekOfYear;
            weekCharge = 0;
        }
        if (newMonthOfYear > WmBusPass.monthOfYear)
        {
            WmBusPass.monthOfYear = newMonthOfYear;
            monthCharge = 0;
        }
    } 

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T11:20:15.257

`jArray`是`Journey`类的静态字段。你应该更换

```
 ArrayList<Journey> jArray = new ArrayList<Journey>(); 
```

和

```
 buscard.Journey.jArray = new ArrayList<Journey>(); 
```

# android - 当 ListView 膨胀到 onCreateInputView() 时，ListView OnItemClickListener 不工作

> ID：10332318
> 
> 赞同：1
> 
> 时间：2012-04-26T11:17:24.027
> 
> 标签：android

我正在开发键盘。当我在 onCreateInputView() 中为 ListView 充气并将相同的 View（或父 View）返回给它时。我已经为 ListView 实现了 setOnItemClickListener 我没有得到回调。

可能是什么问题？android 框架不适用于键盘的列表视图（**InputMethodService**）？

FY 参考我附上代码请看一下。

注意：我能够得到它的 ontouchlistner。

包 com.listkeyboard;

```
import java.util.ArrayList;

import android.content.Context;
import android.content.res.Configuration;
import android.inputmethodservice.InputMethodService;
import android.view.LayoutInflater;
import android.view.View;
import android.view.inputmethod.EditorInfo;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.LinearLayout;
import android.widget.ListAdapter;
import android.widget.ListView;
import android.widget.SimpleAdapter;
import android.widget.Toast;

public class ListKeyBoardIME extends InputMethodService {

    private LinearLayout mainLayout;

    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        // TODO Auto-generated method stub
        super.onConfigurationChanged(newConfig);
    }

    @Override
    public void onCreate() {
        // TODO Auto-generated method stub
        super.onCreate();
        System.out.println("onCreate");
    }

    @Override
    public View onCreateCandidatesView() {
        // TODO Auto-generated method stub
        System.out.println("onCreateCandidatesView");
        return super.onCreateCandidatesView();
    }

    @Override
    public void onDestroy() {
        // TODO Auto-generated method stub
        super.onDestroy();
        System.out.println("onDestroy");
    }

    @Override
    public void onFinishInput() {
        // TODO Auto-generated method stub
        super.onFinishInput();
        System.out.println("onFinishInput");
    }

    @Override
    public void onFinishInputView(boolean finishingInput) {
        // TODO Auto-generated method stub
        super.onFinishInputView(finishingInput);
        System.out.println("onFinishInputView");
    }

    @Override
    public View onCreateInputView() {
        // TODO Auto-generated method stub

        System.out.println(" onCreateInputView");
        LayoutInflater layoutInflater = (LayoutInflater) ListKeyBoardIME.this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
         View mMainKeyboardLayout = layoutInflater.inflate(R.layout.keyboard_list_view, null);

         mainLayout = (LinearLayout)mMainKeyboardLayout.findViewById(R.id.main_layout);

        ListView listView = (ListView)mainLayout.findViewById(R.id.list);

        ArrayList<Character> alphabets = new ArrayList<Character>();
        for (char ch = 'a'; ch  <= 'z'; ch++) {
            alphabets.add(ch);
            if (ch == 'n') {
                break;
            }
        }

        ArrayAdapter<Character> adapter = new ArrayAdapter<Character>(ListKeyBoardIME.this, android.R.layout.simple_list_item_1,alphabets);

        listView.setAdapter(adapter);

        listView.setItemsCanFocus(false);

        listView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                Toast.makeText(getApplicationContext(), "on itemclicked clicked" , Toast.LENGTH_SHORT).show();

            }

        });

        setInputView(mainLayout);

        return mainLayout;
    }

    @Override
    public void onStartCandidatesView(EditorInfo info, boolean restarting) {
        // TODO Auto-generated method stub
        super.onStartCandidatesView(info, restarting);
        System.out.println("onStartCandidatesView ");
    }

    @Override
    public void onStartInput(EditorInfo attribute, boolean restarting) {
        // TODO Auto-generated method stub
        super.onStartInput(attribute, restarting);
        System.out.println("onStartInput ");
    }

    @Override
    public void onStartInputView(EditorInfo info, boolean restarting) {
        // TODO Auto-generated method stub
        super.onStartInputView(info, restarting);
        System.out.println("onStartInputView");
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-01-11T10:37:47.713

我也面临同样的问题，经过大量搜索，当没有答案对我有用时，我在我的列表适配器中实现了下面的代码，它对我有用。如果有人找到其他更好的答案，请告诉我们。

```
 view.setOnClickListener(new View.OnClickListener() {
            @Override
            public void onClick(View v) {

            }
        }); 
```

# google-docs-api - google docs java api V3.0 稳定吗？

> ID：10332319
> 
> 赞同：-1
> 
> 时间：2012-04-26T11:17:32.900
> 
> 标签：google-docs-api, google-drive-api

我下载了 gdata 1.47 并尝试了演示，它无法正常工作，甚至无法将文件上传到 google doc。也无法识别 HTML 文件中的 base64 图像内容。有人可以看看这些问题吗？或者为我提供一个使用 V3.0 java api 的工作代码示例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T04:45:03.690

以下是一些示例：

[http://code.google.com/p/gdata-java-client/source/browse/#svn%2Ftrunk%2Fjava%2Fsample%2Fdocs](http://code.google.com/p/gdata-java-client/source/browse/#svn/trunk/java/sample/docs)

# android - Android GPS 应用无法在模拟器上运行

> ID：10332328
> 
> 赞同：6
> 
> 时间：2012-04-26T11:18:01.430
> 
> 标签：android, android-emulator

我没有成功尝试让 GPS 位置在 Android 下为我的应用程序工作。我想知道我可能做错了什么。到目前为止，我已经尝试了以下方法：

*   [通过 Android 应用即时获取 GPS 位置](https://stackoverflow.com/questions/6068614/get-gps-location-instantly-via-android-app)
*   [http://www.javacodegeeks.com/2010/09/android-location-based-services.html](http://www.javacodegeeks.com/2010/09/android-location-based-services.html)
*   [http://about-android.blogspot.de/2010/04/find-current-location-in-android-gps.html](http://about-android.blogspot.de/2010/04/find-current-location-in-android-gps.html)

以及许多其他人，但都是徒劳的。

考虑到上述所有解决方案都适用于某些人或其他人，我将使用这个来调试：

```
package my.namespace;

import android.app.Activity;
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.util.Log;
import android.widget.Toast;

public class HomeActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    LocationListener ll = new mylocationlistener();
    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, ll);
    }

    private class mylocationlistener implements LocationListener {
    public void onLocationChanged(Location location) {
        if (location != null) {
        Log.d("LOCATION CHANGED", location.getLatitude() + "");
        Log.d("LOCATION CHANGED", location.getLongitude() + "");
        Toast.makeText(HomeActivity.this,
            location.getLatitude() + "" + location.getLongitude(),
            Toast.LENGTH_LONG).show();
        }
    }
    public void onProviderDisabled(String provider) {
    }
    public void onProviderEnabled(String provider) {
    }
    public void onStatusChanged(String provider, int status, Bundle extras) {
    }
    }
} 
```

`@override`这3 种方法都有注释`onProviderDisabled`，`onProviderEnabled`并且`onStatusChanged`. 我不得不删除它们，因为 Eclipse 给出了一个错误，即这些方法没有覆盖超类。

我已在清单文件（`ACCESS_FINE_LOCATION`、、`ACCESS_MOCK_LOCATION`和）`ACCESS_COARSE_LOCATION`中添加了权限。`INTERNET`

有谁知道我可能做错了什么？

编辑：在模拟器上运行（Android 2.2 API 8）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T11:22:12.033

确保在测试应用时启用 GPS。如果同时使用 NETWORK_PROVIDER 和 GPS_PROVIDER 也会有所帮助。这样当 GPS 不可用时，您仍然可以使用 NETWORK_PROVIDER 获得位置。

更新：此外，如果您使用模拟器来测试您的应用程序，请确保您从命令行或使用 Eclipse 模拟 GPS 修复。这是有关如何执行此操作的 stackoverflow 问题的链接[How to emulate GPS location in the Android Emulator?](https://stackoverflow.com/questions/2279647/how-to-emulate-gps-location-in-the-android-emulator)

# sql - 如何在 SQL Server 2005 中实现复制表？

> ID：10332333
> 
> 赞同：1
> 
> 时间：2012-04-26T11:18:17.150
> 
> 标签：sql, sql-server-2005, replication

我有一张桌子作为*table1*和另一张桌子作为*table2*。现在*table1*和*table2*具有相同的结构。*table1*中的任何修改都应自动反映在*table2*中。

请给我一些解决方案..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:11:52.113

最简单的方法是使用一组 OnInsert、OnUpdate 和 OnDelete 触发器。但是，此数据是否是 Table1 的精确副本，只是为了以不同的名称访问？如果是这样，我建议您创建一个视图而不是复制数据。

# python - 带有 Webfaction 和 Django 的 Eclipse

> ID：10332337
> 
> 赞同：2
> 
> 时间：2012-04-26T11:18:26.053
> 
> 标签：python, eclipse, pydev, webfaction

这是我第一次购买主机，我选择了 Webfaction.com 来托管我的 Django 应用程序。到目前为止，我一直在使用 Eclipse 编写我的所有代码并管理我的 Django 应用程序，但我还没有准备好将 VIM 用作文本编辑器。现在我的问题是，如何在连接到我的 webfaction 帐户时使用 Eclipse 编写代码并管理我的所有文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T11:23:56.543

不要那样做。您的主机用于托管。您的个人机器用于开发。

在本地编辑和运行您的代码。准备好后，将其上传到 Webfaction。不要在您的服务器上编辑代码。

# java - javax.management.AttributeNotFoundException

> ID：10332342
> 
> 赞同：0
> 
> 时间：2012-04-26T11:19:07.370
> 
> 标签：java, jmx, apache-camel

我在骆驼2.9.0。我能够在 JConsole 中查看正在运行的进程的 MBean 数据（路由、处理器等）。

我需要在我们的用户界面中显示相同的内容。当我尝试获取属性值时，出现以下错误。

> 注意 - 属性“EndpointUri”正在获取正确的值。

问题在于“FirstExchangeCompletionTime”。所以我的结论是，旋转服务器连接可能没有任何问题。当我们在 Camel.1.6.4 时，属性“FirstExchangeCompletedTimestamp”的同一行代码过去可以正常工作。Camel 1.6.4 之后的 JMX 设置是否有任何变化？

我们在 JMX 设置中使用以下属性：

```
-Dorg.apache.camel.jmx.disabled=false
-Dorg.apache.camel.jmx.rmiConnector.registryPort=2001 
```

错误：

```
javax.management.AttributeNotFoundException: getAttribute failed: ModelMBeanAttributeInfo not found for FirstExchangeCompletionTime
>        at javax.management.modelmbean.RequiredModelMBean.getAttribute(RequiredModelMBean.java:1326)
>        at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getAttribute(DefaultMBeanServerInterceptor.java:666)
>        at com.sun.jmx.mbeanserver.JmxMBeanServer.getAttribute(JmxMBeanServer.java:638)
>        at javax.management.remote.rmi.RMIConnectionImpl.doOperation(RMIConnectionImpl.java:1404)
>        at javax.management.remote.rmi.RMIConnectionImpl.access$200(RMIConnectionImpl.java:72)
>        at javax.management.remote.rmi.RMIConnectionImpl$PrivilegedOperation.run(RMIConnectionImpl.java:1265)
>        at java.security.AccessController.doPrivileged(Native Method)
>        at javax.management.remote.rmi.RMIConnectionImpl.doPrivilegedOperation(RMIConnectionImpl.java:1367)
>        at javax.management.remote.rmi.RMIConnectionImpl.getAttribute(RMIConnectionImpl.java:600)
>        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
>        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
>        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
>        at java.lang.reflect.Method.invoke(Method.java:597)
>        at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:305)
>        at sun.rmi.transport.Transport$1.run(Transport.java:159)
>        at java.security.AccessController.doPrivileged(Native Method)
>        at sun.rmi.transport.Transport.serviceCall(Transport.java:155)
>        at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)
>        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)
>        at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)
>        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
>        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
>        at java.lang.Thread.run(Thread.java:662)
>        at sun.rmi.transport.StreamRemoteCall.exceptionReceivedFromServer(StreamRemoteCall.java:255)
>        at sun.rmi.transport.StreamRemoteCall.executeCall(StreamRemoteCall.java:233)
>        at sun.rmi.server.UnicastRef.invoke(UnicastRef.java:142)
>        at com.sun.jmx.remote.internal.PRef.invoke(Unknown Source)
>        at javax.management.remote.rmi.RMIConnectionImpl_Stub.getAttribute(Unknown Source)
>        at javax.management.remote.rmi.RMIConnector$RemoteMBeanServerConnection.getAttribute(RMIConnector.java:878) 
```

我们正在通过`MBeanServerConnection::getAttribute("X")`方法获取值。我浏览了骆驼源代码，这些属性是通过 `org.apache.camel.management.mbean.Statistic`.

我试过（非静态方式） -

```
MBeanServerConnection::getAttribute(qName, "org.apache.camel.firstExchangeCompletedTimestamp")
MBeanServerConnection::getAttribute(qName, "firstExchangeCompletedTimestamp") 
```

但似乎没有一个工作。请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T16:32:01.230

确保您正在检查正确的属性值，您的错误显示为“FirstExchangeCompletionTime”，但该属性称为“FirstExchangeCompletedTimestamp”

有关更多信息，请参阅此单元测试：

[https://svn.apache.org/repos/asf/camel/trunk/camel-core/src/test/java/org/apache/camel/management/JmxInstrumentationUsingDefaultsTest.java](https://svn.apache.org/repos/asf/camel/trunk/camel-core/src/test/java/org/apache/camel/management/JmxInstrumentationUsingDefaultsTest.java)

# mysql - MySQL预订网站：查询/数据库优化

> ID：10332345
> 
> 赞同：4
> 
> 时间：2012-04-26T11:19:09.947
> 
> 标签：mysql, sql, database, database-design

在我的大多数查询中，我的表现都非常糟糕。我已经阅读了很多关于 stackoverflow 的内容，但仍有一些问题，也许任何人都可以帮助或给我任何提示？

基本上，我正在一个预订网站上工作，其中包括以下表格：

**对象**

```
+----+---------+--------+---------+------------+-------------+----------+----------+-------------+------------+-------+-------------+------+-----------+----------+-----+-----+
| id | user_id | status | type_id | privacy_id | location_id | address1 | address2 | object_name | short_name | price | currency_id | size | no_people | min_stay | lat | lng |
+----+---------+--------+---------+------------+-------------+----------+----------+-------------+------------+-------+-------------+------+-----------+----------+-----+-----+ 
```

或在 MySQL 中：

```
CREATE TABLE IF NOT EXISTS `objects` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT 'object_id',
  `user_id` int(11) unsigned DEFAULT NULL,
  `status` tinyint(2) unsigned NOT NULL,
  `type_id` tinyint(3) unsigned DEFAULT NULL COMMENT 'type of object, from object_type id',
  `privacy_id` tinyint(11) unsigned NOT NULL COMMENT 'id from privacy',
  `location_id` int(11) unsigned DEFAULT NULL,
  `address1` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  `address2` varchar(50) COLLATE utf8_unicode_ci DEFAULT NULL,
  `object_name` varchar(35) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'given name by user',
  `short_name` varchar(12) COLLATE utf8_unicode_ci DEFAULT NULL COMMENT 'short name, selected by user',
  `price` int(6) unsigned DEFAULT NULL,
  `currency_id` tinyint(3) unsigned DEFAULT NULL,
  `size` int(4) unsigned DEFAULT NULL COMMENT 'size rounded and in m2',
  `no_people` tinyint(3) unsigned DEFAULT NULL COMMENT 'number of people',
  `min_stay` tinyint(2) unsigned DEFAULT NULL COMMENT '0=no min stay;else # nights',
  `lat` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `lng` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1451046 ; 
```

**预订**

```
+----+------------+-----------+-----------+---------+--------+
| id | by_user_id | object_id | from_date | to_date | status |
+----+------------+-----------+-----------+---------+--------+ 
```

或在 MySQL 中：

```
CREATE TABLE IF NOT EXISTS `reservations` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `by_user_id` int(11) NOT NULL COMMENT 'user_id of guest',
  `object_id` int(11) NOT NULL COMMENT 'id of object',
  `from_date` date NOT NULL COMMENT 'start date of reservation',
  `to_date` date NOT NULL COMMENT 'end date of reservation',
  `status` int(1) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=890729 ; 
```

有几个问题：

1 - 我没有设置任何额外的键（除了主键） - 我应该在哪里设置，我应该设置哪个键？

2 - 我读过有关 MyISAM 与 InnoDB 的文章，我的结论是 MyISAM 在只读方面更快，而 InnoDB 专为更频繁地更新或插入的表而设计。因此，当前对象使用 MyISAM 和保留 InnoDB。这是一个混合的好主意吗？有更好的选择吗？

3 - 我需要查询在特定时间段内（from_date 和 end_date 之间）可用的那些对象。我（除其他外）在stackoverflow上阅读了这篇文章：[MySQL选择日期不在日期之间的行](https://stackoverflow.com/questions/4165655/mysql-select-rows-where-date-not-between-date)

但是，当我使用建议的解决方案时，查询会在返回任何结果之前超时（所以它真的很慢）：

```
SELECT DISTINCT o.id FROM objects o LEFT JOIN reservations r ON(r.object_id=o.id) WHERE

COALESCE('2012-04-05' NOT BETWEEN r.from_date AND r.to_date, TRUE)
AND COALESCE('2012-04-08' NOT BETWEEN r.from_date AND r.to_date, TRUE)
AND o.location_id=201

LIMIT 20 
```

我究竟做错了什么？进行此类查询的最佳解决方案是什么？其他网站是如何做到的？我的数据库结构不是最适合这个还是只是查询？

我还有一些问题，但如果能得到任何帮助，我将不胜感激！非常感谢您的任何提示或建议！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T15:37:07.393

看来您正在寻找任何基于提供的开始/结束日期没有预订冲突的“对象”。执行 coalesce() 以始终包含那些从未在保留中找到的内容是一个不错的选择，但是，作为左连接，我会尝试在找到日期的位置左连接，并忽略找到的任何对象。就像是

```
SELECT DISTINCT 
      o.id 
   FROM 
      objects o 
         LEFT JOIN reservations r 
            ON o.id = r.object_id
           AND (  r.from_date between '2012-04-05' and '2012-04-08'
               OR r.to_date between '2012-04-05' and '2012-04-08' )
   WHERE
          o.location_id = 201
      AND r.object_id IS NULL
  LIMIT 20 
```

我将通过（object_id，from_date）和另一个（object_id，to_date）确保预订表上的索引。通过在范围之间显式使用 from_date（以及迄今为止），您正在专门寻找占用此时间段的预订。如果找到它们，则不允许，因此 WHERE 子句寻找“r.object_id IS NULL”（即：在您提供的日期范围内没有发现任何冲突）

从我之前的答案扩展，并通过在 (id, from date) 和 (id, to date) 上有两个不同的索引，您可能会通过分别加入每个索引的保留并在两个保留集中期望 NULL 来获得更好的性能......

```
SELECT DISTINCT 
      o.id 
   FROM 
      objects o 
         LEFT JOIN reservations r 
            ON o.id = r.object_id
           AND r.from_date between '2012-04-05' and '2012-04-08'
         LEFT JOIN reservations r2 
            ON o.id = r2.object_id
           AND r2.to_date between '2012-04-05' and '2012-04-08'
   WHERE
          o.location_id = 201
      AND r.object_id IS NULL
      AND r2.object_id IS NULL
  LIMIT 20 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T11:36:51.587

我不会混合 InnoDB 和 MyISAM 表，但我会将所有表定义为 InnoDB（用于外键支持）。通常，所有带有 _id 后缀的列都应该是引用适当表的外键（object_id => objects 等）。

您不必在外键上定义索引，因为它是自动定义的（自 MySQL 4.1.2 起），但您可以在 reservations.from_date 和 reservations.to_date 列上定义其他索引以便更快地进行比较。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-27T03:26:26.617

我知道这已经有一年了，但是如果您已经尝试过上述解决方案，那么逻辑并不完整。它错过了在查询开始之前和查询结束之后结束的预订。也`between`不能处理同时开始和结束的预订。

这对我来说效果更好：

```
SELECT venues.id
FROM venues LEFT JOIN reservations r
       ON venues.id = r.venue_id && (r.date_end >':start' and  r.date_start <':end')
WHERE r.venue_id IS NULL
ORDER BY venues.id 
```

# magento - Magento - 存储配置仅在保存后添加到数据库

> ID：10332348
> 
> 赞同：1
> 
> 时间：2012-04-26T11:19:22.913
> 
> 标签：magento

我注意到，在 Magento 中，core_config_data 表在安装后非常小，并且只有在保存系统配置的部分时才会随着时间的推移逐渐填充。例如，core_config_data 表中没有联系人设置的值 - 但我仍然可以执行 Mage::getStoreConfig('contacts/contacts/enabled') 并获得正确的值。

那么，这是否意味着 magento 只是读取配置 xml 直到保存值，然后保存到数据库然后从那里读取值？

如果是这种情况，那么肯定这是一个糟糕的设计模式，将这些值存储在两个地方？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T16:41:54.797

我认为这篇文章可能会有所帮助。

[Magento 配置：加载系统变量](http://alanstorm.com/magento_loading_config_variables)

# java - 再次启动线程

> ID：10332349
> 
> 赞同：0
> 
> 时间：2012-04-26T11:19:24.000
> 
> 标签：java, android

```
thread = new Thread()
        {
            @Override
            public void run() {
                while(!requestedToExit)
                {
                    SystemClock.sleep(3000);
                    Log.d("debug", "in");
                }
            }
        }; 
```

所以一个按钮有一个事件，每次我点击它都会启动线程（如果前一个线程不活动）。

所以我尝试使用 thread.start() 但它抛出线程已经启动。我尝试了.run()，没有任何反应，每次单击按钮时我也尝试过，并且可以再次运行它，创建一个新线程并启动它：什么都没有。

一些想法？

* * *

使用可运行：

```
 r= new Runnable(){

            public void run() {
                while(!requestedToExit)
                {
                    Log.d("debug", "in");
                    SystemClock.sleep(3000);

                }
            }
        }; 
```

然后我在我的听众中使用：

```
thread = new Thread(injection);
thread.start(); 
```

但我只是第一次看到调试，之后他再也没有进入过。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T11:21:55.743

从[JavaDoc](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Thread.html) -

> 多次启动一个线程是不合法的。特别是，线程一旦完成执行就可能不会重新启动。

相反，`java.lang.Runnable`在必要时使用并创建一个新线程来运行它。

你需要做的是：

```
Runnable r = new Runnable() {
    public void run() {
        ....
    }
}; 
```

然后，当您要启动它时：

```
Thread t = new Thread(r);
t.start(); 
```

您需要始终创建一个新线程来运行该可运行线程。

# java - Java 正则表达式问题

> ID：10332351
> 
> 赞同：2
> 
> 时间：2012-04-26T11:19:29.340
> 
> 标签：java, regex

我正在尝试匹配一个字符，例如 ' 如果它前面没有字符 \。

有效的`État de l\'impression`

无效的`État de l'impression`

有效的`Saisir l\'utilisateur et le domaine pour la connexion`

我相信我所追求的是某种断言，例如消极的回顾？

例如`(?<!\\)'`，当我在[RegexBuilder中进行测试时效果很好](http://renschler.net/RegexBuilder/)

但是问题是当我试图在 Java 中进行这项工作时

**代码**

```
String[] inputs = new String[] { "Recherche d'imprimantes en cours…", "Recherche  d\\'imprimantes en cours…" } ;

for(String input : inputs)
{
    Pattern p = Pattern.compile("(?<!\\\\)'");
    System.out.println(input);
    System.out.println(p.matcher(input).matches());
} 
```

**输出**

```
Recherche d'imprimantes en cours…
false
Recherche  d\'imprimantes en cours…
false 
```

哪个应该匹配`true`，`false`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T11:21:36.547

`p.matcher(input).matches()`验证整个输入。试试`p.matcher(input).find()`吧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T11:55:12.437

不要在循环中对同一模式使用 Pattern.compile() ——它违背了“编译”的目的。

```
String[] inputs = new String[] { 
    "Recherche d'imprimantes en cours…", 
    "Recherche  d\\'imprimantes en cours…" 
};
Pattern pat = Pattern.compile("(?<!\\\\)'");

for (String s : inputs) {
    Matcher mat = pat.matcher(s);
    while (mat.find()) {
        System.out.format("In \"%s\"\nFound: \"%s\" (%d, %d)\n",
            s, mat.group(), mat.start(), mat.end());
    }
} 
```

输出：

```
In "Recherche d'imprimantes en cours…"
Found: "'" (11, 12) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T11:21:43.017

正则表达式应该可以正常工作，但`Matcher#matches()`不能像您认为的那样工作。它只返回与*整个*字符串匹配的表达式的 true。

从 JavaDoc 开始`Matcher#matches()`：

> 尝试将整个区域与模式匹配。

# sql - 在 SQL Server 2008 中将表达式转换为数据类型 datetime 的算术溢出错误

> ID：10332352
> 
> 赞同：3
> 
> 时间：2012-04-26T11:19:37.390
> 
> 标签：sql, sql-server, sql-server-2008

我在 SQL 脚本下面执行，该脚本抛出错误**算术溢出错误将表达式转换为数据类型 datetime**

我已经在 SO 和 google 中搜索了这个错误，但我无法找出解决方案。

下面是我的 Longgggggggggg SQL 查询

```
DECLARE @TimeByDay DATETIME 
DECLARE @TimeByDay2 DATETIME

SET @TimeByDay = '1/1/2012'
SET @TimeByDay2 = '12/31/2014'

SELECT  p1.ProjectName ,
        p1.EnterpriseProjectTypeName ,
        p1.[Legacy System ID] ,
        p1.ProjectDescription ,
        p1.ProjectOwnerName ,
        p1.[Gate Approvers] ,
        p1.[Team Members] ,
        p1.[Project Sponsor] ,
        p1.[Idea Project Type] ,
        p1.[Compliance Project] ,
        p1.[Product Category] ,
        p1.[Relevant Functional Area] ,
        p1.Initiative ,
        p1.[OPEX Transformation] ,
        p1.[Commodity Type] ,
        p1.[LSS Training Project] ,
        p1.[Project Status Comments] ,
        p1.[Project Status] ,
        p1.Phase ,
        p1.[Innovation Matrix Class] ,
        p1.[Legacy Project Manager] ,
        p1.[AOP Line Number] ,
        p1.[AOP Project Name] ,
        p1.[Approval Level] ,
        p1.Assumptions ,
        p1.[Belt Name] ,
        p1.[Benefits Impact] ,
        p1.[Bus Impact or Bus Y] ,
        p1.[Business Sponsor] ,
        p1.[Code Name] ,
        p1.[Complexity Risk Level] ,
        p1.[Complexity Risk Score] ,
        p1.[Critical to Quality] ,
        p1.Deliverables ,
        p1.[Development Risk] ,
        p1.[Estimated Duration] ,
        p1.[Financial Uncertainty] ,
        p1.[Financial Rep] ,
        p1.[External Dependencies] ,
        p1.[Financial Risk Level] ,
        p1.[Financial Risk Score] ,
        p1.[Idea Functional Area] ,
        p1.[Idea Beneftting Location] ,
        p1.[Idea Reviewer Comments] ,
        p1.[Idea Comments] ,
        p1.[Idea Sector] ,
        p1.[Idea Submitters Email] ,
        p1.[Idea Submission Date] ,
        p1.[Idea Submitter Phone] ,
        p1.[Idea Reviewer Name] ,
        p1.[Idea Description_] ,
        p1.[Idea Est Revenue Benefit] ,
        p1.[Idea Name] ,
        p1.[Idea Product Category] ,
        p1.[Idea Est Savings Benefit] ,
        p1.[Idea Number] ,
        p1.[Idea Review Date] ,
        p1.[Idea Est Balance Sheet Benefit] ,
        p1.[Idea Est Investment] ,
        p1.[Idea Submitter Email] ,
        p1.[IR Project Type] ,
        p1.[Idea Sources] ,
        p1.[Idea Submitter] ,
        p1.[Implementation Risk] ,
        p1.[Technology Capabilities Risk] ,
        p1.[Market Uncertainty] ,
        p1.[Legal Regulatory Risk] ,
        p1.[Investment Risk] ,
        p1.Mentor ,
        p1.[Out of Scope] ,
        p1.[Project Scope] ,
        p1.[Project Start Date] ,
        p1.[Project Finish Date] ,
        p1.[Mandated by whom?] ,
        p1.[Reason for Action] ,
        p1.[Project Champion] ,
        p1.[Process Owner] ,
        p1.[Target State (Box 3 of A3)] ,
        p1.[Problem Statement] ,
        p1.[Project Interaction] ,
        p1.[Strategic Goal/Business Case] ,
        p1.[Sending Leader(s)] ,
        p1.[Receiving Leader(s)] ,
        p1.[Process Definition] ,
        p1.[Things That Can Be Improved] ,
        p1.[Idea Estimated Duration] ,
        p1.[ST IT Cost Center] ,
        p1.[Top Project] ,
        p1.[Reason For Action (Box 1 of A3)] ,
        p1.[Initial State] ,
        p1.[Impact of not meeting mandate] ,
        p1.[Primary Proponent Department] ,
        p1.[Project Financial Benefit Status] ,
        p1.[Project Resource Status] ,
        p1.[Project Schedule Status] ,
        p1.[Project Investment Status] ,
        p1.[Project Success Factors] ,
        p1.[Support Required] ,
        p1.[Project Milestones] ,
        p1.[Project Constraints] ,
        p1.[Other Funding Source] ,
        p1.[Project Cost Center] ,
        p1.[Initial State (Box 2 of A3)] ,
        p1.CostCenterName ,
        p1.CostCategoryName ,
        YEAR(p1.TimeByDay) AS Year ,
        MONTH(p1.TimeByDay) AS Month ,
        p1.Actuals ,
        p1.Budget ,
        p1.Forecast ,
        p1.PhaseName ,
        p1.ProjectUID ,
        CONVERT(VARCHAR(20), p1.ProjectCreatedDate, 101) AS ProjectCreatedDate ,
        CONVERT(VARCHAR(20), p1.ProjectModifiedDate, 101) AS ProjectModifiedDate
FROM    [IR.ST.EPM Custom Flds and Financial Data] p1
--WHERE   p1.TimeByDay >= CAST(@TimeByDay AS DATETIME)
--        AND p1.TimeByDay <= CAST(@TimeByDay2 AS DATETIME)
WHERE p1.timebyday >= @TimeByDay
        AND p1.timebyday <=@TimeByDay2
        AND p1.StageEntryDate IS NOT NULL
        AND p1.StageCompletionDate IS NOT NULL 
```

我不确定这里需要改变什么。

抱歉重复！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:29:26.480

这是脚本的开始，您将字符串分配给`DATETIMEs`. 这涉及*隐式*转换，就好像 RDBMS`CONVERT()`为您添加了一样。在你的情况下，它失败了。

请尝试使用更通用的日期时间格式...

```
SET @TimeByDay  = '20120101'
SET @TimeByDay2 = '20141231' 
```

# c++ - python代码到c++ lib或dll

> ID：10332362
> 
> 赞同：1
> 
> 时间：2012-04-26T11:20:22.933
> 
> 标签：c++, python, dll

我有一些我想从 C++ 中使用的 python 代码，我想在 lib 或 dll 中构建它？我该怎么做？代码有依赖关系：

```
import socket
import string
import struct
import sys 
```

也许PIL

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T12:59:49.267

# 您可以使用 cython 并编写[瘦包装器将其导出到 C](http://docs.cython.org/src/userguide/external_C_code.html#using-cython-declarations-from-c)

Cython 库`helloWorld.pyx`：

```
import sys
sys.path.append(".") #yourlib is in current folder
import yourlib #you can import any python module

cdef public void helloWorld():
    print "Hello World Cython!"
    yourlib.helloWorld("Python")

cdef public int my_sum(int x, int y):
    return x*x+y

from libcpp.string cimport string

cdef public string testString( string sx, string sy ):
    x = int(sx.c_str())
    y = int(sy.c_str())
    ret= "%d*%d+%d=%d"%(x,x,y,my_sum(x,y))
    cdef char* ret2= ret
    return string( ret2 ) 
```

用 cython 编译（创建`helloWorld.cpp`, `helloWorld.h`）：

```
 cython --cplus helloWorld.pyx 
```

你的代码`program.cpp`：

```
#include <string>
#include <iostream>
#include "Python.h"
#include "helloWorld.h" // it's cpp header so remove __PYX_EXTERN_C (bug)

int main(int argc, char *argv[]) {
    Py_Initialize(); //start python interpreter
    inithelloWorld(); //run module helloWorld
    helloWorld();
    std::cout << testString("6","6") << std::endl; #it's fast!
    Py_Finalize();
    return 0;
} 
```

编译并运行：

```
 g++ program.cpp helloWorld.cpp -I/usr/include/python2.7/ -lpython2.7
    ./a.out
    Hello World Cython!
    Hello World Python!
    6*6+6=42 
```

# 另一种方法是使用[boost::python](http://www.boost.org/doc/libs/1_49_0/libs/python/doc/tutorial/doc/html/python/embedding.html)

你的代码`program.cpp`：

```
#include <string>
#include <iostream>
#include <boost/python.hpp>

int main(int argc, char *argv[]) {
    Py_Initialize();
    boost::python::object sys = boost::python::import("sys");
    sys.attr("path").attr("append")(".");
    boost::python::object main_module = boost::python::import("yourlib");
    main_module.attr("helloWorld")("boost_python");
    boost::python::object ret= main_module.attr( "my_sum" )( 10, 10 );
    std::cout << boost::python::extract<char const*>(ret) << std::endl;
    Py_Finalize();
    return 0;
} 
```

编译并运行：

```
 g++ program.cpp -I/usr/include/python2.7/ -lpython2.7 -lpython_boost
    ./a.out
    Hello World boost_python!
    10*10+10=110 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T11:25:11.007

您可能想检查如何在另一个应用程序中嵌入 python ( [http://docs.python.org/extending/embedding.html](http://docs.python.org/extending/embedding.html) )。

# c# - 从图像中的每个像素获取色调

> ID：10332363
> 
> 赞同：0
> 
> 时间：2012-04-26T11:20:27.857
> 
> 标签：c#, image, image-processing, colors

我正在尝试获取图像每个像素的色调或“H”，然后更改具有特定色调的像素的颜色。我正在尝试更改色调 >= 210 和 <=260 的所有像素，这是蓝色的不同色调。

这是我的代码：

```
// 'i' is the image
// 'b' is the bitmap of the image
float y;
for (int a = 0; a < i.Height; a++) 
{ 
    for (int c = 0; c < i.Width; c++) 
    { 
        y = b.GetPixel(c, a).GetHue(); 
        if (y >= 210 && y <= 260) 
            { 
                b.SetPixel(c, a, Color.Black); 
            } 
    } 
} 
```

唯一的问题是它没有拾取任何蓝色，从 210 到 260。我很确定我这样做是正确的，但我一定不是，因为它不起作用。

如果您能解决这个问题，请在这里发帖，谢谢！

编辑：我在 SetPixel 上放了一个断点，它被调用了很多次，所以现在我将检查我是否正确保存了图片。

编辑2：我想通了！我没有保存图片。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:42:08.310

使用，[LockBits](http://msdn.microsoft.com/ru-ru/library/5ey6h79d.aspx)方法，Luke！

或者，我认为，最好使用图形上下文来完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T19:05:55.783

它对我有用。在下面的代码中，我有一个名为 imgViwer 的带有 PictureBox 的 Windows 窗体。然后单击一个按钮我执行代码：

```
private void HueFilter()
{
  float y;
  Bitmap i = (Bitmap)imgViwer.Image;

  for (int a = 0; a < i.Height; a++)
  {
      for (int c = 0; c < i.Width; c++)
      {                   
          y = i.GetPixel(c, a).GetHue();
          if (y >= 210 && y <= 260)
          {
              i.SetPixel(c, a, Color.Black);
          }
      }
  }

  imgViwer.Image = i;
} 
```

**在您的情况下，您有一个名为b**的输出图像，应将其分配回 PictureBox 以进行刷新。

# android - 用于显示联系人的自定义 ListView 需要更多时间来加载

> ID：10332366
> 
> 赞同：0
> 
> 时间：2012-04-26T11:20:41.093
> 
> 标签：android, android-contacts, custom-lists, custom-adapter, performance

在我的应用程序中，启动时我想显示所有带有搜索过滤器选项的联系人。我已经实现了这一点，但问题是 - 加载联系人时，需要更多时间。如何提高代码的效率？下面的代码片段显示了我如何检索联系人：

`public ContactList newContactList(Context ctx) {`

`ContactList contacts = new ContactList();`

`String id = "";`

`String sortOrder = ContactsContract.Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC";`

`try {`

```
 this.cur = this.cr.query(ContactsContract.Contacts.CONTENT_URI, null, null, null, sortOrder);       
    if (this.cur.getCount() > 0) {
        while (cur.moveToNext()) {
            Contact c = new Contact();
            id = cur.getString(cur.getColumnIndex(ContactsContract.Contacts._ID));
                if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
                c.setId(id);
                c.setDisplayName(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME)));
                c.setPhone(this.getPhoneNumbers(ctx, id));
                c.setEmail(this.getEmailAddresses(id));
                c.setNotes(this.getContactNotes(id));
                c.setAddresses(this.getContactAddresses(id));
                c.setImAddresses(this.getIM(id));
                c.setOrganization(this.getContactOrg(id));
                //c.setPicture(loadContactPhoto(cr, cur.getLong(cur.getColumnIndex(CommonDataKinds.Photo.CONTACT_ID))));
                contacts.addContact(c);
            }               
        }
    }
    }
    catch(Exception e)
    {
        throw new IllegalStateException(e);
    }
    finally
    {
        cur.close();            
    }

    return(contacts);
} 
```

ContactList 是一个返回所有联系人的 ArrayList 的类，我使用这个 ArrayList 将它设置为我的自定义适配器类。我想，因为通过游标迭代来获取数组列表需要很多时间。但是，我需要这个数组列表来根据搜索条件过滤联系人并显示自定义联系人列表。有什么方法可以提高代码的性能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:24:51.677

你为什么不使用 CursorAdapter ？ [http://developer.android.com/reference/android/widget/CursorAdapter.html](http://developer.android.com/reference/android/widget/CursorAdapter.html)

# android - 如何更改 TabHost 中的选项卡小部件大小

> ID：10332368
> 
> 赞同：0
> 
> 时间：2012-04-26T11:20:44.320
> 
> 标签：android, android-tabhost

在我的应用程序中，我在线性布局中使用 tabhost，tabhost 包含 4 个选项卡。tabwidget 的大小非常高，并且显示的标题非常小。任何人都可以帮助我如何减小tabwidget的大小。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T11:25:41.373

我会坚持`custom Tabs`使用[**setIndicator(View)**](http://developer.android.com/reference/android/widget/TabHost.TabSpec.html#setIndicator%28android.view.View%29)创建。因此，创建所需大小的 TextView 并将其设置为 TabWidget。[`Here`](http://joshclemm.com/blog/?p=136)是与示例相同的教程。

您可以使用充气 a`TextView`并将其设置为 TabWidget

```
View view = LayoutInflater.from(context).inflate(R.layout.your_custom_tab-layout,
                                                                           null);
TextView tv = (TextView) view.findViewById(R.id.my_text_view);
TabSpec setContent = mTabHost.newTabSpec(tag).setIndicator(tv).
                                                              setContent(intent);
mTabHost.addTab(setContent); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:42:29.387

我不清楚你到底想在这里做什么，但我会猜测一下。

如果您不希望图形占用空间（换句话说，只有文本），您可以设置小部件的高度和重力以有效地移除图形使用的空间，从而使图形更加紧凑标签标签（垂直）。

```
 <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="fill_parent"
        android:layout_height="30dp"
        android:gravity="bottom" /> 
```

# css - 如何 - 右边框的 CSS 背景

> ID：10332369
> 
> 赞同：0
> 
> 时间：2012-04-26T11:21:02.123
> 
> 标签：css, css-float

在下面的示例中，我在将图像设置为 #left 的右侧边框时遇到问题。目前出现了边框，但它在右侧大约 200 像素，而不是在右侧 500 像素。

请问有什么问题吗？

谢谢！

```
<html>
<STYLE type="text/css">

#wrapper, #left, #right, .sub_box
{ border: 1px solid black; }

.sub_box
{ float:left; }

#left
{ background: url("dots.gif") right repeat-y; }
</STYLE>

<div id="wrapper" style="width:882px">

<div id="left" style="width:500px;float:left">
    <div class="sub_box" style="width:200px">
    <p>sub box</p>
            </div>
    <div class="sub_box" style="width:200px">
            <p>sub box</p>        
            </div>
    <div class="sub_box" style="width:200px">
    <p>sub box</p>
            </div>
</div>

<div id="right" style="width:200px;float:right">    
    <p>Right column here</p>
    </div>

</div>   
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:23:51.613

试试这个...

```
background: url("dots.gif") 500px 0px repeat-y; 
```

或根据需要进行调整。

# c# - 在 WCF Json 序列化中包含类名称

> ID：10332375
> 
> 赞同：3
> 
> 时间：2012-04-26T11:21:27.743
> 
> 标签：c#, json, wcf, serialization

这一定是微不足道的，但我似乎无法完成它。给定以下数据合约类：

```
public class SampleItem
{
    public int Id { get; set; }
    public string StringValue { get; set; }
} 
```

当我的 WCF 服务反序列化为 JSON 时，提供以下输出：

```
[{"Id":1,"StringValue":"Hello"}] 
```

有没有办法也包括类名？IE：

```
"SampleItem": [{"Id":1,"StringValue":"Hello"}] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T12:12:57.207

你可以尝试这样的事情：

```
private dynamic AddClassName(SampleItem item)
{
      return new {SampleItem = item};
} 
```

和

```
var item = new SampleItem {Id = 1, StringValue = "Hello"};
dynamic itemClassName = AppendClassName(item);
string json = new JavaScriptSerializer().Serialize(itemClassName);
Debug.WriteLine(json); 
```

编辑 - 这适用于所有类型：

```
private static string GetJsonWrapper<T>(T item)
{
    string typeName = typeof(T).Name;
    string jsonOriginal = new JavaScriptSerializer().Serialize(item);
    return string.Format("{{\"{0}\":{1}}}", typeName, jsonOriginal);
} 
```

# c# - 类不能序列化

> ID：10332377
> 
> 赞同：-1
> 
> 时间：2012-04-26T11:21:36.290
> 
> 标签：c#, asp.net

```
[Serializable]
    public class KeyValue
    {
        public List<Dictionary<string, string>> pair { get; set; } 
    } 
```

当我将数据插入配置文件时，无法序列化键值对。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:32:56.370

该类`Dictionary`不是 XML 可序列化的，但如果你用谷歌搜索它，有很多变通方法。查看[此链接](http://weblogs.asp.net/pwelter34/archive/2006/05/03/444961.aspx)以获取示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:28:02.973

如果您通过 WCF 使用它，则必须阅读以下线程

[如何通过 WCF 序列化 Dictionary<string, string>？](https://stackoverflow.com/questions/1510185/how-to-serialize-dictionarystring-string-through-wcf)

# r - 在 ggplot2 中包装图例文本

> ID：10332387
> 
> 赞同：36
> 
> 时间：2012-04-26T11:22:23.097
> 
> 标签：r, ggplot2

在使用 ggplot2 生成图表时，我有一些很长的图例名称，我希望将它们包裹在两行上。例如：

```
a <- (1:10)
b <- c(1,1.5,2,4,5,5.3,7,9,9.5,9.8)
places = c("Birmingham","Chester-le-street","Cambridge", "Newcastle-upon-Tyne","Peterborough","Cambridge", "Newcastle-upon-Tyne","Peterborough","Liverpool","Stratford-upon-Avon")
df1 = data.frame(a,b,places)
library(ggplot2)
i = ggplot(df1, aes(x=a, y=b)) + geom_point(aes(colour = places), size=3) + opts(legend.position="bottom") 
```

当框设置为底部时，我将如何包装图例项 - 例如 2 或 3 行？此刻，传说中的七件物品紧挨着。我希望它们显示在两行中（比如顶行有四个城镇，第二行有三个城镇）。

提前谢谢了。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-26T14:13:41.923

好的，鉴于您的编辑，您可能想要这个：

```
library(scales)
i + guides(colour = guide_legend(nrow = 2)) 
```

但是您可能会发现您仍然希望使用文本环绕技术，以使其适合。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-04-26T11:42:13.383

从你的例子：

```
df1$places<-sub("-", "- \n ", df1$places)  

i = ggplot(df1, aes(x=a, y=b)) + geom_point(aes(colour = places), size=3) 
```

![在此处输入图像描述](../Images/7566eb65d2af28c6b0f87e6e6ded57cb.png)

注意： - 您可以使用 gsub 将所有“-”替换为“-\n”

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-06-30T12:28:24.093

我发现非常方便的另一种包装图例标签的方法如下（所有归功于[https://sites.google.com/site/simonthelwall/home/r/ggplot2#TOC-Wrapping-legend-labels](https://sites.google.com/site/simonthelwall/home/r/ggplot2#TOC-Wrapping-legend-labels)）：

```
a <- (1:10)
b <- c(1,1.5,2,4,5,5.3,7,9,9.5,9.8)
places = c("Birmingham","Chester-le-street","Cambridge", "Newcastle-upon-Tyne","Peterborough","Cambridge", "Newcastle-upon-Tyne","Peterborough","Liverpool","Stratford-upon-Avon")
df1 = data.frame(a,b,places)
library(ggplot2)
i = ggplot(df1, aes(x=a, y=b)) + geom_point(aes(colour = places), size=3) 

i + scale_colour_discrete(labels = function(x) str_wrap(x, width = 5)) 
```

[![在此处输入图像描述](../Images/b4366e3b7420c6a15943554b721033a1.png)](https://i.stack.imgur.com/vW6gu.png)

# android - 使用 android 调试：“等待调试器附加”

> ID：10332388
> 
> 赞同：1
> 
> 时间：2012-04-26T11:22:32.940
> 
> 标签：android, debugging

当我尝试使用 Eclipse 调试我的 android 应用程序时，模拟器启动并显示此消息：“Application openconnection is waiting for the debugger to attach”，我在控制台中收到此消息：

```
[2012-04-26 12:12:24 - openconection] ------------------------------
[2012-04-26 12:12:24 - openconection] Android Launch!
[2012-04-26 12:12:24 - openconection] adb is running normally.
[2012-04-26 12:12:24 - openconection] Performing   org.anddev.android.getdatafromtheweb.GetDataFromTheWeb activity launch
[2012-04-26 12:12:24 - openconection] Automatic Target Mode: Preferred AVD 'emul' is   not available. Launching new emulator.
[2012-04-26 12:12:24 - openconection] Launching a new emulator with Virtual Device 'emul'
[2012-04-26 12:12:33 - Emulator] emulator: WARNING: Unable to create sensors port: Unknown error
[2012-04-26 12:12:33 - openconection] New emulator found: emulator-5554
[2012-04-26 12:12:33 - openconection] Waiting for HOME ('android.process.acore') to be launched...
[2012-04-26 12:13:08 - openconection] HOME is up on device 'emulator-5554'
[2012-04-26 12:13:08 - openconection] Uploading openconection.apk onto device 'emulator-5554'
[2012-04-26 12:13:09 - openconection] Installing openconection.apk...
[2012-04-26 12:13:29 - openconection] Success!
[2012-04-26 12:13:29 - openconection] Starting activity  org.anddev.android.getdatafromtheweb.GetDataFromTheWeb on device emulator-5554
[2012-04-26 12:13:30 - openconection] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=org.anddev.android.getdatafromtheweb/.GetDataFromTheWeb }
[2012-04-26 12:13:31 - openconection] Attempting to connect debugger to 'org.anddev.android.getdatafromtheweb' on port 8656
[2012-04-26 12:13:51 - openconection] Launch error: Failed to connect to remote VM. Connection timed out. 
```

是端口的问题吗？我将此代码添加到我的清单文件中

```
 <uses-permission android:name="android.permission.SET_DEBUG_APP"></uses-permission> 
```

编辑：我有一个名为“emul”的默认模拟器我不知道为什么可以启动它（通过日志）

```
Automatic Target Mode: Preferred AVD 'emul' is   not available. Launching new emulator. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:57:35.603

关闭可能使用您的调试端口的其他应用程序。如果您使用 eclipse 和其他 SDK，您可能需要关闭其他 SDK。祝你好运。

# jquery - JCarousel 带有“圆形”包装和 live()/delegate() 功能在幻灯片上出价

> ID：10332393
> 
> 赞同：0
> 
> 时间：2012-04-26T11:22:41.270
> 
> 标签：jquery, jcarousel

我在 jcarousel 中阅读了很多关于“圆形”包装错误的信息，但没有找到这个特定的错误。我有带有“圆形”包装的 jcarousel，当用户将鼠标悬停在幻灯片上时，我想显示有关当前幻灯片的一些信息，并在鼠标离开幻灯片时隐藏此信息。为了实现这一点，我将此信息保存在`<li>`包裹在`<div class="description">`.

```
$('#carousel').jcarousel(
     auto: 3,
     wrap: 'circular',
     scroll:1,
     initCallback: mycarousel_initCallback,
     size:5
 }); 
```

并将事件（我也尝试过变体`live()`）绑定到`<li>`元素（当前和未来将在 jcarousel 以“循环”包装工作期间出现）：

```
$('#carousel').delegate(
                        'li',
                        'mouseover',
                        function (){
                            $(this).find('.description').slideDown();
                            return false;
                        }
                    );
                $('#carousel').delegate(
                        'li',
                        'mouseout',
                        function () {
                            $(this).find('.description').slideUp();
                            return false;
                        }
                    ); 
```

这很好用，但在某些时候（对我来说完全不确定，它可能是使用的第一秒，甚至可能是前/后用力敲击的几分钟）偶尔会停止出现幻灯片描述。我尝试对此进行调试，发现这个损坏的幻灯片上的事件会触发，带有描述的 dom 元素存在，但 slideDown()/slideUp() 根本没有任何作用。并且此幻灯片一直损坏，直到页面重新加载。

出于某种原因，我无法将 wrap 更改为 other，也无法将 jQuery 从 1.3（或 1.4，我实际上不记得）更改为更新的版本。有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T09:02:39.117

好吧，长话短说：这个问题与 jQuery 动画功能和 jCarousel 之间的交互有关。当幻灯片具有圆形包装时，它会在某个时候开始创建和删除代表幻灯片的新节点。并在动画未完成时删除节点“挂起”jquery 的 fx 队列。为了避免这个麻烦，我必须在删除幻灯片之前清除这个队列。看起来像 hack，但在我看来，没有什么比这更好的了。

# java - 玩！框架 1.2.4：是否可以知道待处理作业的参数（doJobWithResult）

> ID：10332394
> 
> 赞同：1
> 
> 时间：2012-04-26T11:22:43.927
> 
> 标签：java, asynchronous, playframework, playframework-1.x

我正在开发一个适用于一系列异步计算的应用程序。

继承人是如何工作的：

```
 List<F.Promise<PredictionCalculator>> promises = new ArrayList<F.Promise<PredictionCalculator>>();
    predictWithJobResult pj = new predictWithJobResult(parameter).now;
    promises.add(pj) 
```

我这样做了 n 次，在将作业添加到队列后，我执行以下代码：

```
promises.notifyAll(); 
```

所以工作开始运行，我的问题是，这项工作每 60 分钟运行一次。因此，如果已经有一个带有“x”参数的作业正在运行，它必须再次跳过将此作业添加到队列中。

所以我的问题是，我如何查询正在运行的作业及其参数？是否可以？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T14:11:49.720

为什么不构建一个正在运行的作业队列对象（Singleton），您可以在其中查询哪些作业在运行前检查队列中的参数，在运行时添加自己，并在完成时删除自己。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T07:06:45.960

没有简单的方法可以从 Promise 中获得工作。您可以做的是使用 Map,predictWithJobResult> 而不是列表来存储您的承诺并使用此地图从您的承诺中查找您的工作

# sencha-touch-2 - 嵌套列表未加载到 sencha

> ID：10332395
> 
> 赞同：0
> 
> 时间：2012-04-26T11:22:45.687
> 
> 标签：sencha-touch-2, nested-lists

我正在尝试将嵌套列表加载到我的 Sencha 应用程序中。问题是我不熟悉它，我不确定我使用的 json 文件是否正确。

```
[
    {
        "text":[

            {
                "text":"1.1.1",
                "leaf":true

            }],
        "text":[

            {
                "text":"1.1.1",
                "leaf":true

            }
        ]

    }
] 
```

这是我的商店代码

```
//Defining the store for the Nested List
Ext.define('InfoImage.store.nestedListStore', {
    extend: 'Ext.data.TreeStore',
    requires: 'InfoImage.model.nestedListModel',
    id:'nestedListStore',
    config:{

        //Calling the required model for the Work Item List
        model : 'InfoImage.model.nestedListModel',
        //Defining the proxy for the Work Item List to pull the data for the List
        proxy : {
            type : 'ajax',
            url : 'app/model/data/list.json',
            reader: {
                type: 'json',
                root: 'items'

            }
        },
        autoLoad: true

    }
}); 
```

我的主要代码是

```
Ext.define("InfoImage.view.nestedList", {
    extend:'Ext.NestedList',
    xtype:'nestedList',
    id:'nestedList',

    config:{
        fullscreen:'true',
        title:'Nested List',
        xtype:'nestedList',
        //displayField : 'text',
        html:'Nested List on its way!!!',
        store:'nestedListStore'
        //itemTpl:'{text}'
    }
}); 
```

显示的输出是 [object object]。我不知道缺少什么。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:03:20.890

首先，您的 Json 是一个有效的 json。[**始终通过在jsonlint.com**](http://jsonlint.com/)上粘贴 json 来检查有效的 json[](http://jsonlint.com/)

 **其次，我看到你已经注释掉了

```
displayField:'text' 
```

财产。如果您不向 提供`displayField`，`nestedlist`它就不会知道数据存储中的哪些项目要显示在列表中。

可能这就是为什么您`[object Object]`在列表中获得 o/p 的原因。

取消注释以上行并检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T04:08:39.093

您的 JSON 似乎无法使用，`Ext.NestedList`因为`text`它是您的模型的一个字段，不应在您的 JSON 文件中声明为 rootProperty。

首先，假设你有这个模型定义：

```
Ext.define('ListItem', {
    extend: 'Ext.data.Model',
    config: {
        fields: ['text']
    }
}); 
```

根据您的数据，您的 JSON 文件应如下所示：

```
items: [
{
    text: '1.1',
    items: [
    { text: '1.1.1', leaf: true },
    { text: '1.1.2', leaf: true }
    ]
    }
] 
```

您还必须将此配置添加到您的商店`defaultRootProperty: 'items'`**

# html - 如何将更新的数据获取到丝般光滑的选框 jquery 插件

> ID：10332396
> 
> 赞同：0
> 
> 时间：2012-04-26T11:22:49.287
> 
> 标签：html, json, jquery

我试图通过不时使用 ajax 将动态值更新到选取框。我为此 [http://remysharp.com/2008/09/10/the-silky-smooth-marquee/使用以下插件](http://remysharp.com/2008/09/10/the-silky-smooth-marquee/)

虽然数据实际上正在更新，但在滚动时不会更新到选取框中。如果我刷新浏览器它会得到更新的值，这意味着 ajax 更新工作正常。我在这里做错了什么？，我需要在不停止正在进行的数据滚动且不刷新浏览器的情况下获取更新。

```
$(document).ready(function() {
  $(".scroll").marquee();
  var i = setInterval(function (){
     $.ajax({
    type : "GET",
    url : 'http://Data.xhtml',
    dataType : "json",
    success: function(data) {

              var values = '';
              $.each(data, function(i, item) {
              values += '<span class=\'up\'>
                         <span class=\'quote\'>'+data[i].Data+'</span></span>';

              $(".scroll").marquee(values);
              });
        },
      return false;
}, 4000);
});
});

<div class="scroll">
   <span class="up">
        <span class="quote">default value</span>
   </span>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:28:31.187

```
$(document).ready(function(){
$(".scroll").marquee();
var refreshId = setInterval(function()
{
  $.ajax({
    type : "GET",
    url : 'http://Data.xhtml',
    dataType : "json",
    success: function(data) {
      data=eval(data);
      $.each(data.Data, function(i) { 
        $(".quote").append('<span class=\'up\'><span class=\'quote\'>'+data.Data[i]+'</span> </span>');
      });
    }
  });
}, 3000);
});
<div class="scroll">
  <span class="up">
  <span class="quote">default value</span>
  </span> 
```

# html - Chrome 和 Firefox 的元素位置不同

> ID：10332397
> 
> 赞同：0
> 
> 时间：2012-04-26T11:22:50.347
> 
> 标签：html, css, macos, cross-browser, positioning

这是我相信以前曾被问过的一个问题，但我还没有找到任何解决方案。

在 Firefox 和 Chrome（或 Safari 而不是 Chrome）中打开我的[jsfiddle 。](http://jsfiddle.net/EMQmR/12/)如果您仔细查看字母“y”，您会发现在 Firefox 中，与其他两个相比，字母和 section1-div 的下边框之间有一个或两个额外的像素。

我已在大多数元素上将填充和边距顶部/底部设置为 0px，以便将样式重置到一定程度。

为什么会这样，我应该采取什么措施来防止这种情况发生？

**更新**：使用 Chrome 17.0.963.56、FF 11 和 Mac。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:08:04.633

我不太确定为什么会出现这个问题。它不起作用。在我自己的代码中，我可以将其与填充相关联。Chrome/Safari 和 Firefox 处理填充的方式不同。通过向标准 css 添加 som 填充并对 Firefox 进行例外处理，我确实得到了预期的结果。这对 jsfiddle 示例没有帮助（实际上可能是示例中没有任何问题，可能是字体显示有点不同，看起来字母和边框之间的像素数不同...）。

```
#adminmenu a{
    padding-bottom: 2px;
}

@-moz-document url-prefix() {

    #adminmenu a{ padding-bottom: 0px; }

} 
```

# android - 动态地将文本视图添加到布局并进行相应调整

> ID：10332399
> 
> 赞同：1
> 
> 时间：2012-04-26T11:23:08.417
> 
> 标签：android, android-layout, textview, xamarin.android

我正在使用代码动态添加 TextViews。现在我正在使用具有水平方向的 LinearLayout，我认为当 textviews 不适合该行时会添加一个新行。我错了。

事情是我不知道会有多少行，因为它取决于用户输入。因此 GridView 感觉不对，因为我无法指定列数。而且我不知道每个 TextView 的每个大小，如果 TextView 很长并且我想要每行 3 个 TextView，这可能会使它看起来很糟糕。

我确信有一个简单的解决方案，我只想知道最好的一个。当我向其中添加 TextView 时应该使用哪种布局，以便在达到屏幕宽度时在第一个下方创建一个新行？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T12:08:44.640

看到这个：

```
package us.simpleit;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Button;
import android.widget.EditText;
import android.widget.LinearLayout;
import android.widget.TextView;

public class SimpleGUI extends Activity {
    TextView tv;
    EditText et;
    LinearLayout ll;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        //LinearLayout ll = new LinearLayout(this);
        ll = new LinearLayout(this);
        ll.setOrientation(android.widget.LinearLayout.VERTICAL);
        ll.setLayoutParams(new ViewGroup.LayoutParams(-1,-1));
        // ARGB: Opaque Red
        ll.setBackgroundColor(0x88ff0000);

        tv = new TextView(this);
        tv.setLayoutParams(new ViewGroup.LayoutParams(-1,-2));
        tv.setText("sample text goes here");
        // ARGB: Opaque Green
        tv.setBackgroundColor(0x5500ff00);
        ll.addView(tv);

        et = new EditText(this);
        et.setLayoutParams(new ViewGroup.LayoutParams(-1,-2));
        et.setText("edit me please");
        // ARGB: Solid Blue
        et.setBackgroundColor(0xff0000ff);
        ll.addView(et);

        Button btn = new Button(this);
        btn.setText("Go!");
        btn.setOnClickListener(new Button.OnClickListener() {
            public void onClick(View v) {
                tv.setText(et.getText().toString());
            }
        });

        ll.addView(btn);
        setContentView(ll);

        //setContentView(R.layout.main);
    }
} 
```

在这里，我采用了一个 TextView 和一个 EditText。取而代之的是，您可以采用两个 TextView 或您想要的任意数量的视图。

享受。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:28:44.360

您可以做的事情是使您的主要 LinearLayout 具有垂直方向和许多具有水平方向的 LinearLayout 子项当您要添加 TextView 时，请获取主布局的最后一个子项以了解该子项是否可以包含您新的 TextView。如果没有，则添加一个水平方向的新 LinearLayout

# netbeans-7 - 无法在 Netbeans 7.1.1+JDK8 (jdk-8-ea-bin-b35) 中编译 lambda

> ID：10332402
> 
> 赞同：2
> 
> 时间：2012-04-26T11:23:25.280
> 
> 标签：netbeans-7, java-8

> **可能重复：**
> [Lambda 表达式在 Java 8 中不起作用？](https://stackoverflow.com/questions/11176936/lambda-expressions-dont-work-in-java-8)

带有 lambda 的简单、无意义的应用程序：

> public static void main(String[] args) { FileFilter java = (File f) -> f.getName().endsWith(".java"); }

将其设置为使用 JDK 8。如果我不尝试使用 lambda，则编译/运行良好。

但是，如果我这样做，我会得到：

> 将 1 个源文件编译到 ...\JavaApplication1\build\classes ...JavaApplication1\src\javaapplication1\JavaApplication1.java:20：错误：-source 1.8 FileFilter java = (File f) -> f 中不支持 lambda 表达式.getName().endsWith(".java"); （使用 -source 8 或更高版本来启用 lambda 表达式）1 错误

似乎对它应该是源 8 还是源 1.8 感到困惑

* * *

现在可以在使用 lambda 特定版本时工作，例如以下运行良好：

```
import java.io.File;
import java.io.FileFilter;
import java.util.Arrays;

public class JavaApplication1 {

    public static void main(String[] args) {
        Arrays.asList(new File("c:/").listFiles((File f) -> f.getName().endsWith(".txt")))
        .forEach( file-> {System.out.println(file);});
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T15:03:24.047

为了编译 lambda 表达式，您需要从[http://jdk8.java.net/lambda/](http://jdk8.java.net/lambda/)下载 jdk 版本。您还会在包含 lambda 表达式的行上看到红色波浪线，但它会编译和运行得很好，所以请忽略它们 :)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-26T06:15:49.210

[下载 lambda 二进制文件](http://jdk8.java.net/lambda/)，然后用这个新的 jdk8 替换旧的 jdk8，它支持二进制文件。

然后它应该工作。

# windows-phone-7 - windows phone 7 xap 包装

> ID：10332406
> 
> 赞同：1
> 
> 时间：2012-04-26T11:23:48.380
> 
> 标签：windows-phone-7, xap

当我尝试更改磁贴通知时，我收到了这条消息，然后我删除了我写的内容，但仍然有相同的消息？以前有没有人收到此错误消息？谢谢

错误 1 ​​Xap 打包失败。项目元数据“%(FullPath)”无法应用于路径“res://StartMenu!AppIconGeneric.png”。不支持给定路径的格式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T10:03:51.667

我收到完全相同的错误消息，将图标/平铺文件更新为磁盘上真正存在的内容并没有立即帮助。

关闭并重新启动 Microsoft Visual Studio 2010 Express for Windows Phone 修复了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T14:29:43.790

当您的项目包含磁盘上不存在的资源时，会发生此错误，例如。当它在 Windows 资源管理器中被删除时。

# jquery - 防止 jQuery 对话框提交两次

> ID：10332411
> 
> 赞同：1
> 
> 时间：2012-04-26T11:23:58.373
> 
> 标签：jquery, double-submit-problem

我想防止用户两次提交对话框表单。

这是我的提交代码：

```
$('form', dialog).submit(function () {
    if (dialogSubmitted) { return false; }
    dialogSubmitted = true;
    ...
    ...
}); 
```

其中 dialogSubmitted 是一个变量，指示表单是否已提交。问题是它不起作用。当我打开对话框并按 Enter 两次（快速）时，表单被提交了两次。

任何想法？

谢谢。

* * *

**更新**

这是另一个尝试，当我快速按两次回车键时也失败了：

```
 $('form', dialog).one('submit', function (evt) {

        evt.preventDefault();

        $(this).on('submit', function (evt) {
            evt.preventDefault();
        });

        $.post($(this).attr('action'), $(this).serialize(), function (data, status) {
            $('#my-modal').modal('hide');
            ...
            ...
        }).error(function (error, status, a, b) {
            $('.modal-body p.body').html(error.responseText);
            writeError('msgError', pStopIndex.validationFailed);
        });

        // Unbind form submitting
        $('form', dialog).unbind();
        return false;
    }); 
```

如您所见，我做 ajax 发布（代替经典表单提交）。也许问题在那里？

以下是从 Google Chrome 中捕获的跟踪信息：

![在此处输入图像描述](../Images/136d294142be03821c240c345ff4e97c.png)

我们可以看到有2个帖子。仅当我快速按两次 Enter 键或快速单击两次提交按钮时才会发生。

任何想法？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T11:27:01.960

只用`one()`方法

参见小提琴示例：http: [//jsfiddle.net/MpBCL/](http://jsfiddle.net/MpBCL/)

```
$('form', dialog).one('submit', function (evt) {

    /* prevent default action */
    evt.preventDefault();

    ...
    /* code to be executed once */
    ...

    /**
     * disable default action (this handler will be attached after first 
     * submit event and it will prevent any further submit action
     */
    $(this).on('submit', function (evt) {
       evt.preventDefault();
    });

}); 
```

进一步参考：[http ://api.jquery.com/one/](http://api.jquery.com/one/)

> **描述：** *将处理程序附加到元素的事件。每个元素最多执行一次处理程序。*

# wpf - 将列表框保持在白色网格中

> ID：10332416
> 
> 赞同：0
> 
> 时间：2012-04-26T11:24:40.057
> 
> 标签：wpf, xaml, listbox, grid, focus

这里有一个非常简单的独立 XAML 文件：

```
<!-- MyListBox.xaml -->
<Page 
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainPage" Height="100" Width="525">
    <ListBox>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="42"></RowDefinition><!-- THE MAGIC LINE-->
            </Grid.RowDefinitions>
        </Grid>
    </ListBox>
</Page> 
```

如果您在 Internet Explorer 中打开它并单击`ListBox`，它会变为蓝色。但是，如果您从中删除`Height="42"`，`THE MAGIC LINE`则单击该框时该框仍为白色。我有两个问题：

1.  为什么存在或不存在`Height="42"`会有所不同？
2.  `THE MAGIC LINE`即使包含明确的高度声明，我也想让盒子永久变白。你怎么做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:42:52.473

蓝色是列表框的默认选择颜色。最简单的解决方法是设置以下

```
 <ListBox>
        <ListBox.Resources>
            <Style TargetType="{x:Type ListBox}">
                <Style.Resources>
                    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Transparent"/>
                </Style.Resources>
            </Style>
        </ListBox.Resources>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="42"></RowDefinition>
                <!-- THE MAGIC LINE-->
            </Grid.RowDefinitions>
        </Grid>
    </ListBox> 
```

编辑：您的标题与您的其他问题不同。如果您想要不同的东西，请发表评论

# wpf - 在资源字典中的样式中绑定 Setter 值

> ID：10332419
> 
> 赞同：2
> 
> 时间：2012-04-26T11:24:52.023
> 
> 标签：wpf, xaml, binding, microsoft-metro, resourcedictionary

我正在尝试创建一个使用皮肤/主题的应用程序（可以选择不同的颜色托盘）。

我定义了一个`SolidColorBrush`属性

```
public class ThemeManager
{
    public SolidColorBrush ForeBrush { get; set; }       

    public ThemeManager()
    {
        ForeBrush = new SolidColorBrush(Colors.Black);         
    }

    public void SetTheme()
    {        
        ForeBrush.Color = Colors.Red;
    }
} 
```

并将其绑定到 XAML

```
<TextBlock Foreground="{Binding ForeBrush,Source={StaticResource Theme}}" /> 
```

我在 App.xaml 中声明了 Theme 资源

```
<local:ThemeManager x:Key="Theme" /> 
```

问题是当我制作如下风格时：

```
<Style x:Key="TextBlockStyle1" TargetType="TextBlock">
     <Setter Property="Foreground" Value="{Binding ForeBrush,Source={StaticResource Theme}}" />
</Style> 
```

如果我将它放在 中，这可以工作`Page.Resources`，但如果我将它放在资源字典中（并将其添加到 App.xaml），则应用程序崩溃（App.gics 中的 Debugger.Break()）。这似乎只在使用 Setter 时发生。

我在这里做错了什么？

编辑：将样式放在资源字典文件中并在 app.xaml 中引用它

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T13:04:37.993

使用此代码，它可以在我的 PC 上运行（使用 .NET 4.0）

这是字典

```
<ResourceDictionary xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                xmlns:local="clr-namespace:Resources4">
<local:ThemeManager x:Key="Theme"></local:ThemeManager>
<Style TargetType="TextBlock">
    <Setter Property="Foreground" Value="{Binding ForeBrush,Source={StaticResource  Theme}}" />
</Style>
</ResourceDictionary> 
```

这是 XAML 中的参考

```
<Application.Resources>
    <ResourceDictionary>
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="Dictionary1.xaml"></ResourceDictionary>
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

如果你写

```
<Application.Resources>
    <ResourceDictionary>
        <local:ThemeManager x:Key="Theme" />
        <ResourceDictionary.MergedDictionaries>
            <ResourceDictionary Source="Dictionary1.xaml" />
        </ResourceDictionary.MergedDictionaries>
    </ResourceDictionary>
</Application.Resources> 
```

然后，由于合并资源字典的工作方式，您会收到错误消息。根据[MSDN](http://msdn.microsoft.com/en-us/library/aa350178.aspx)

> 合并字典中的资源在资源查找范围中占据一个位置，该位置位于它们合并到的主资源字典范围之后

这意味着在 Dictionary1.xaml 中看不到 App.XAML 中定义的资源

# apache - Apache Shiro 与 Java EE 原生 API

> ID：10332421
> 
> 赞同：10
> 
> 时间：2012-04-26T11:25:00.817
> 
> 标签：apache, jakarta-ee, shiro

**使用Apache Shiro**并保留**Java EE**的本地 API 用于安全性和会话管理有什么优势？

我发现所有安全角色和会话都可以在 Apache Shiro 中完成，但同样的事情也可以使用 Java EE 安全性来完成，而无需任何外部依赖 jar。

所以建议我一些去 Apache Shiro 的利弊。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-26T16:31:01.640

我当然是有偏见的（我是 Apache Shiro 项目的提交者），所以请随心所欲，但这是我的意见：

*   Java EE Security 不支持开箱即用的独立于容器的会话集群选项（Shiro 支持）。

*   Shiro 从一开始就被设计为在 POJO/依赖注入环境中工作。它使用接口驱动设计，并提供比传统 Java EE 安全环境更多的自定义钩子（例如，您如何显示当前有多少用户使用 Java EE 安全登录到您的站点？Shiro 可以帮助您显示这一点）。

*   Shiro 在任何应用程序环境中都是完全可移植的。如果您使用 Java EE 供应商特定的安全定制，那么这些定制将不可移植（例如，这个[StackOverflow 问题](https://stackoverflow.com/questions/3829221/add-jee-security-roles-dynamically-without-using-deployment-descriptor)表明切换到 JBoss 可能会解决用户的安全问题 - IMO 的一个令人不安的答案）。

*   与特定于服务器的定制一样，许多 Java EE 安全[教程](http://wiki.netbeans.org/SecureJavaEE6App)、[文章](http://publib.boulder.ibm.com/infocenter/rbdhelp/v7r5m0/topic/com.ibm.egl.pg.doc/topics/pegl_richui_security_jeeexample.html)和[博客文章](http://www.jairrillo.com/blog/2009/08/16/jee-security-how-to-setup-authentication-on-glassfish-and-netbeans/)向您展示了基于用户界面的配置，这些配置以不同的方式跨平台解决问题，并且如果您切换到重新学习可能会令人沮丧。此外，Java EE 配置通常需要 XML。我更喜欢可以在任何地方使用的单一的、非冗长的文本配置格式（shiro.ini 很好，但人们也可以使用 groovy、yaml 等配置 shiro）。

*   Shiro 旨在在*任何*应用程序环境中工作。Java EE 安全性设计得很好 - 仅适用于 Java EE。至少当您学习 Shiro 时，您可以在任何基于 JVM 的应用程序（Spring、Guice、Java EE、命令行等）中利用这些知识，而不仅仅是 Java EE 应用程序。

！

莱斯

# ios - iOS 应用程序不会死机，退出后写入控制台并播放声音

> ID：10332422
> 
> 赞同：2
> 
> 时间：2012-04-26T11:25:04.377
> 
> 标签：ios, cocos2d-iphone, core-audio, undefined-behavior

我的应用程序有某种僵尸问题。（不是 NSZombie 问题。就像是死而复生的问题。）

我首先注意到，在调试会话之后，当我去跑步时，我的 iPhone 上的音乐会每 7 分钟暂停一次，当我解锁设备时，应用程序名称会在状态栏中闪烁红色，就好像它刚刚坠毁。有时应用程序甚至会发出幻音，就像它仍在后台运行一样。

手动退出应用程序，继续。**即使该应用程序不再出现在我正在运行的应用程序列表中，**仍然会出现间歇性音频伪影。

 **当我重新插入时，每次应用程序僵尸化并重新启动时，它都会出现在控制台中。它看起来就像应用程序的正常启动！什么？什么可能触发我的应用程序自行重启？

安慰：

```
Apr 26 12:10:01 unknown Breakout[2658] <Warning>: cocos2d: cocos2d v1.1.0-beta2b
Apr 26 12:10:01 unknown Breakout[2658] <Warning>: cocos2d: Using Director Type:CCDirectorDisplayLink
Apr 26 12:10:01 unknown Breakout[2658] <Warning>: cocos2d: OS version: 5.1 (0x05010000)
Apr 26 12:10:01 unknown Breakout[2658] <Warning>: cocos2d: GL_VENDOR:   Imagination Technologies
Apr 26 12:10:01 unknown Breakout[2658] <Warning>: cocos2d: GL_RENDERER: PowerVR SGX 535
Apr 26 12:10:01 unknown Breakout[2658] <Warning>: cocos2d: GL_VERSION:  OpenGL ES-CM 1.1 IMGSGX535-63.24
Apr 26 12:10:01 unknown Breakout[2658] <Warning>: cocos2d: GL_MAX_TEXTURE_SIZE: 2048
Apr 26 12:10:01 unknown Breakout[2658] <Warning>: cocos2d: GL_MAX_MODELVIEW_STACK_DEPTH: 16
// etc //
Apr 26 12:10:01 unknown kernel[0] <Debug>: launchd[2658] Builtin profile: container (sandbox)
Apr 26 12:10:01 unknown kernel[0] <Debug>: launchd[2658] Container: /private/var/mobile/Applications/FFEB0A26-06D1-4C46-8AE5-C60582D09A1D [69] (sandbox)
Apr 26 12:10:01 unknown Breakout[2658] <Warning>: Audio session details
Apr 26 12:10:01 unknown Breakout[2658] <Warning>: Audio Input Available? YES 
Apr 26 12:10:01 unknown mediaserverd[32] <Warning>: 12:10:01.641 <SystemSoundServer> WARNING translating HAL error: 561214578 
Apr 26 12:10:01 unknown Breakout[2658] <Warning>: Max Possible Inputs 15151420 
Apr 26 12:10:01 unknown Breakout[2658] <Warning>: Outputs 2 
Apr 26 12:10:01 unknown Breakout[2658] <Warning>: Device sample rate 44100.000000 
Apr 26 12:10:01 unknown Breakout[2658] <Warning>: Hardware buffer size 0.023220 
// etc //
Apr 26 12:10:33 unknown SpringBoard[52] <Notice>: Posting 'com.apple.iokit.hid.displayStatus' notifyState=1
Apr 26 12:10:33 unknown UserEventAgent[12] <Warning>: DEBUG: Changing screen blanked state: 0
Apr 26 12:10:33 unknown SpringBoard[52] <Notice>: MultitouchHID: detection mode: 255->0 (deferring until bootloaded)
Apr 26 12:10:33 unknown SpringBoard[52] <Notice>: MultitouchHID: device bootloaded
Apr 26 12:10:33 unknown SpringBoard[52] <Notice>: MultitouchHID: detection mode: 0->0
Apr 26 12:10:34 unknown kernel[0] <Debug>: set_crc_notification_state 0
Apr 26 12:10:34 unknown ReportCrash[2659] <Notice>: Formulating crash report for process Breakout[2658]
> 
Apr 26 12:10:34 unknown SpringBoard[52] <Warning>: pid_suspend failed for [2658]: Unknown error: -1, Unknown error: -1
Apr 26 12:10:34 unknown SpringBoard[52] <Warning>: Could not set priority of [2658] to 4096, priority: No such process
Apr 26 12:10:34 unknown com.apple.launchd[1] <Warning>: (UIKitApplication:com.charliewilliams.Breakout[0xd5ad]) Job appears to have crashed: Trace/BPT trap: 5
Apr 26 12:10:34 unknown SpringBoard[52] <Warning>: Application 'Breakout' exited abnormally with signal 5: Trace/BPT trap: 5
Apr 26 12:10:35 unknown ReportCrash[2659] <Error>: libMobileGestalt computeUniqueDeviceID: total time for bb to return imei: 0
Apr 26 12:10:35 unknown ReportCrash[2659] <Notice>: Saved crashreport to /var/mobile/Library/Logs/CrashReporter/Breakout_2012-04-26-121033_Tortuga-Gigante.plist using uid: 0 gid: 0, synthetic_euid: 501 egid: 0 
```

**解决方案说明**：结果很简单 - 1\. 我正在关闭我的音频会话，`dealloc`但没有在`applicationDidEnterBackground`. 而且由于我使用`kaudiosessioncategory_playandrecord`它似乎告诉iOS如果它在后台崩溃时重新启动应用程序。

现在，为什么它在后台崩溃？……嗯，这是我的下一个任务。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T21:02:27.283

该应用程序可能设置了背景 voip 标志。如果是这样，如果应用程序异常退出（或设备重新启动时），操作系统将重新启动应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-27T01:34:57.843

你用的是什么音频框架？退出应用程序后继续音频处理时，iPod 应用程序、GarageBand 和其他音频应用程序在标题栏中呈现红色闪烁。我不认为 Cocos Denshion 不会发生这种情况，所以您必须为您的音频使用 Apple 框架？答案可能在于它的配置方式。Apple 允许自己的一些音频框架在后台继续运行，以便您可以自定义音乐播放，例如广播电台的应用程序等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T11:27:56.503

我们可能还需要代码片段，因为日志不会告诉我们执行了什么代码**

# java - 如何通过请求在 Spring MVC 中实例化 Class/Bean？

> ID：10332424
> 
> 赞同：2
> 
> 时间：2012-04-26T11:25:13.460
> 
> 标签：java, spring-mvc, inversion-of-control

首先，我对 Springframwork 很陌生。

假设我在 Spring-MVC 中有一个控制器：

```
@Controller
public class FooController {

    @Autowired
    private Foo foo;

    @Autowired
    private FooService fooService;

    @RequestMapping(value="/addfoo", method = RequestMethod.GET)
    public void addRequest(          
        @RequestParam(value="rq_param", required=true) String param){

        foo.setValue(param);    
        fooService.addFoo(foo);                     
    }
} 
```

我需要将 Foo 添加到数据库中。但在我需要设置一个值之前。当某个请求（来自其他地方）进来时，应该会发生这种情况。

这是我的服务：

```
@Service
public class FooServiceImpl implements FooService {

    @Autowired
    private FooDAO fooDAO;

    @Transactional
    public void addFoo(Foo foo) {
        fooDAO.addFoo(foo);
    }
} 
```

但这不起作用。我明白了

```
org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'fooController': Injection of autowired dependencies failed; 
```

我很确定由于我对 IoC 缺乏了解，我犯了一个基本错误......

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T11:30:40.350

我不认为你应该注入 Foo. 对我来说，它看起来像一个模型对象，而不是基于接口的服务或控制器。

当请求进来时，您应该使用 new 创建一个，不受 Spring 的控制。您希望将请求参数中的值绑定到新的 Foo 对象中并将其持久化。

Spring 项目中的每个对象都不需要在 bean 工厂的控制之下。

通常，您会看到对方法范围内的对象的 new 调用。它们通常是没有接口的 POJO 模型对象。你的案子对我来说似乎是其中之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T06:09:13.357

```
 <context:component-scan base-package="service,controllers,dao"></context:component-scan> 
```

edit it in your servlet.xml after dtd.

```
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
```

this one in your web.xml file.

for dao u should add an annotation @Repository

may be i am wrong.. but try this one..

# cakephp - Cake php中的多选列表框

> ID：10332425
> 
> 赞同：0
> 
> 时间：2012-04-26T11:25:16.847
> 
> 标签：cakephp

我是蛋糕 php 的新手。我必须在数据库中使用逗号分隔符输入多个城市 ID，例如 10、11、12，其中 10、11、12 是城市 ID

当我使用此代码时

```
 **<?php
          echo $form->input('city_id', array('options' => $city, 'class'=>'input_box2',
'empty' => 'Please select a city'), null, array('id' => 'city_id', 'label' => 'City'
          ));** 
```

我可以一次插入一个城市 id，但我需要用逗号分隔插入多个城市 id。我正在使用以下代码，但它不起作用。请帮助

```
 **<?php
        echo $form->input('city_id', array('options' => $city, 'type'=>'select','multiple'
=> 'true', 'empty' => 'Please select  city'), null, array('id' => 'city_id', 'label' => 'City'));** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:45:23.020

您需要修改控制器中的 POST 数据：

在 CakePHP 2.x 中

```
$city_ids = Set::extract('/YourModel/city_id', $this->request->data);        
$this->request->data['YourModel']['city_id'] = implode(",", $city_ids); 
```

在 CakePHP 1.x 中

```
$city_ids = Set::extract('/YourModel/city_id', $this->data);        
$this->data['YourModel']['city_id'] = implode(",", $city_ids); 
```

# permissions - Parallels plesk 权限通过 FTP 访问

> ID：10332430
> 
> 赞同：4
> 
> 时间：2012-04-26T11:25:36.337
> 
> 标签：permissions, centos, plesk, parallels, centos6

我们的服务器在 CentOS 6 下运行，并通过 Panel Plesk 10.4.4 进行处理。文件夹和文件的结构是使用 php 脚本创建的。然后，当通过 FTP 访问时，我们无法修改之前创建的这些文件夹内容。当通过 Apache Web 用户访问它时，无一例外，但不是通过 ftp。文件夹和文件分别拥有 755 和 644 权限。如何启用 ftp 访问？谢谢

编辑：问题是文件所有者和 ftp 不一样，但我不知道如何以及在哪里附加它。文件和文件夹所有者是 psacln (gid 502)，组是 apache (gid 503)。ftp用户不一样。

我们将登录 ftp 用户（也是系统用户）添加到文件和文件夹“psacln”的组所有者，使用`usermod -a -G psacln ftpusername`. 与 apache 组相同的过程，但问题仍然存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-02T05:38:47.303

这里的问题是您可能在 mod_php 模式下运行您的站点。在这种模式下，脚本在 Apache 权限下运行，因此创建的所有文件和目录都归 Apache 所有。这样，除非您设置 777 或 666 权限，否则您的 FTP 用户无法访问这些文件。

我认为你的选择可能是

1.  切换到 PHP 的 FastCGI 模式。根据您的 Plesk 帐户权限，您可以在 Plesk UI 中自行完成，也可以向托管服务提供商咨询。这样您的脚本将在用户权限（与 FTP 用户相同）下运行，并且通过 FTP 访问这些文件不会有任何问题。此外，此选项通常被认为更安全。

2.  使 PHP 脚本设置文件夹的 777 权限和文件的 666 权限。这意味着您允许所有人（所谓的“其他人”）修改它们。所以 FTP 用户也可以修改这些文件。虽然这听起来不安全，但实际上这些文件已经可以从该系统上的任何其他站点访问（如果它是共享托管服务器）。所以我认为它不会比目前的状态更不安全。

问候

# android - 是否可以在 1 个 android 中有 2 个项目？

> ID：10332431
> 
> 赞同：0
> 
> 时间：2012-04-26T11:25:40.723
> 
> 标签：android

我需要制作 2 个项目中的一个项目。我已将所有文件从 1 复制到其他，没有问题。但问题是生成 R 文件，因为有不同的包。

也许我可以知道如何使两个项目都有两个项目包。

如果关于我的问题，请纠正我，因为我不知道如何问这个问题。基本上我想把 2 合二为一。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:27:59.867

将您的一个项目转换为[Android 库](http://developer.android.com/guide/developing/projects/projects-eclipse.html)，并在您的第二个项目中使用该库将其合并为一个项目。

更多信息，请参考 android 的**井字游戏**示例项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:52:53.357

我不确定，也许你必须将两个项目的包名更改为同一个，然后清除你的项目，然后你会得到一个 R.java

有些事情你必须注意。两个“AndroidManifest.xml”文件中的包名也需要修改。您可能希望将两个“AndroidManifest.xml”文件合并为一个，并将其中一个活动作为 MAIN。

祝你好运。

# javascript - 将实际的浏览器窗口用于 Web 应用程序中的分离面板是否可行？

> ID：10332434
> 
> 赞同：1
> 
> 时间：2012-04-26T11:25:55.287
> 
> 标签：javascript, jquery, window, modal-dialog

我正在计划一个应用程序，我想知道是否可以将实际窗口 ( `window.open`) 用于弹出式面板，以替代使用使用绝对定位元素制作的“虚拟”类型的窗口。这将具有可从浏览器窗口分离的优点，以便用户可以利用多个监视器提供的额外屏幕空间。

但我不确定它的效果如何。几点：

*   是否可以将打开的窗口保留在主应用程序窗口的顶部，以便分离的面板不会消失在应用程序本身的后面
*   是否可以从同一个应用程序打开多个窗口，或者自动浏览器安全性可能会将您限制为一个？
*   与无数浏览器替代品的兼容性如何？

**总而言之，额外屏幕空间的优势是否会超过使用浏览器窗口的劣势？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:32:55.253

不要使用弹出窗口。他们通常会被阻止。给用户一个链接并要求他们（就像给出说明一样）右键单击并在新窗口中打开要比弹出一个弹出窗口并要求用户手动取消阻止要容易得多。（即使那是不好的做法。）

> 是否可以将打开的窗口保留在主应用程序窗口的顶部，以便分离的面板不会消失在应用程序本身后面可能不会

可能不是。

> 是否可以从同一个应用程序打开多个窗口，或者自动浏览器安全性可能会将您限制为一个？

`window.open('http://www.google.com', 'win1')`,`window.open('http://www.google.com', 'win2')`

> 与无数浏览器替代品的兼容性如何？

太糟糕了，尤其是使用弹出窗口拦截器，尽管如果您的用户只使用一个浏览器，它可能会起作用。

> 总而言之，额外屏幕空间的优势是否会超过使用浏览器窗口的劣势？

我不认为这是对上一个问题的总结。多显示器似乎是一个有用但很少见的用例。我不知道需要多个显示器的网站。如果您正在制作某种“监视器”（如安全监视器类型）或信息显示类型的软件，这可能是值得的，但其他网站只使用 1 个窗口，可以根据用户的需要大小.

也就是说，可以使用弹出窗口。例如，Gmail 使用它们来创建聊天窗口，您可以稍后“弹回”。然而，它不是必需的功能，而且不止一个功能很快就会变得笨拙。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T11:28:35.223

我强烈建议您避免使用 window.open，因为许多浏览器和插件会阻止它们。您需要的是对话框。有关 jQuery UI 的示例，请参见以下链接。

[http://jqueryui.com/demos/dialog/](http://jqueryui.com/demos/dialog/)

您可以在线找到许多其他解决方案，它们可以在没有其他库的情况下使用或与其他库一起使用。

您可以随心所欲地拥有任何东西，并且几乎可以在另一个窗口中做任何您想做的事情，其优点是可以更轻松地处理对话框和将使用弹出窗口的主页之间的通信。

# yii - 使用 YII CHtml::link 和 CHtml::image 而不是 HTML 的困惑

> ID：10332436
> 
> 赞同：4
> 
> 时间：2012-04-26T11:25:57.797
> 
> 标签：yii

我已经在 YII 中启动了一个应用程序，我想使用正确的 YII 标准，但对它的 CHTML 类的使用有点好奇。我认为使用`CHtml::link()`or`CHtml::image()`代替普通的 HTML 代码`<a></a>`会`<img src... />`花费更多时间在服务器端应用程序。我试图寻找使用它的一些理由，但没有成功找到任何关于我为什么要使用它以及它与传统 HTML 相比如何有益的资源。就像我可以使用所有这些方法在普通 HTML 代码中定义动作的路径一样，那么为什么要使用它

任何帮助或澄清参考将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T18:39:58.717

让我们谈谈 CHtml::link()。它的主要优点是您可以通过简单地将数组作为参数传递来指示控制器路由并发送一些获取变量。假设您想进入 LivingController 的 eat() 动作，变量“meal”，其值为“hamburgers”。它可以简单地这样做：

```
> CHtml::link(array('LivingController/eat', 'meal'=>'hamburgers')); 
```

如果你只想用这个来表达`<a></a>`，那么我不需要告诉你它会有多难。此外，我们应该记住，使用 CHtml::link() 生成的链接将始终有效，即使您更改了 url 格式。不会发生这种情况`<a></a>`：每次更改 url 格式时都必须重写 url。

CHtml::image() 的优点不太清楚，至少对我来说是这样。真诚地，我认为这只是一个封装问题。

# objective-c - 如何在 mac 上创建自定义文件格式？

> ID：10332437
> 
> 赞同：0
> 
> 时间：2012-04-26T11:26:00.667
> 
> 标签：objective-c, xcode, macos

我想创建一个包含目标 c 代码和图像数据的文件类型。但我希望它不能被文本编辑器读取。我如何最好地做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:43:35.403

假设您已经知道如何将代码和图像附加到文件中（但是，这应该是一项非常容易的任务），您只需要在存储之前加密数据。您可以使用[AES](https://github.com/nicerobot/objc/tree/master/NSData/NSData%2BAES/)加密轻松做到这一点。

# php - CActiveForm 中的 ajax 请求

> ID：10332441
> 
> 赞同：1
> 
> 时间：2012-04-26T11:26:19.403
> 
> 标签：php, jquery, ajax, yii

我正在 yii 框架中尝试基于 ajax 的表单提交这是我的视图代码

```
<div class="form">

<?php $form=$this->beginWidget('CActiveForm', array(
    'id'=>'users-form',
    'enableAjaxValidation'=>true,
    'clientOptions'=>array('validateOnSubmit'=>true, 'validateOnType'=>false),
)); ?>

    <p class="note">Fields with <span class="required">*</span> are required.</p>

    <?php echo $form->errorSummary($model); ?>

    <div class="row">
        <?php echo $form->labelEx($model,'user_username'); ?>
        <?php echo $form->textField($model,'user_username',array('size'=>45,'maxlength'=>45)); ?>
        <?php echo $form->error($model,'user_username'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'user_password'); ?>
        <?php echo $form->textField($model,'user_password',array('size'=>45,'maxlength'=>45)); ?>
        <?php echo $form->error($model,'user_password'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'user_role'); ?>
        <?php echo $form->dropDownList($model,'user_role', CHtml::listData($dropDownData, 'role_id', 'role_title')); ?>
        <?php echo $form->error($model,'user_role'); ?>
    </div>

    <div class="row">
        <?php echo $form->labelEx($model,'user_company_id'); ?>
        <?php echo $form->textField($model,'user_company_id'); ?>
        <?php echo $form->error($model,'user_company_id'); ?>
    </div>

    <div class="row buttons">
        <?php echo CHtml::ajaxSubmitButton('Create User', CHtml::normalizeUrl(array(''), 
            array(
                'beforeSend'=>'function() {
                                    $(".createUser").attr("disabled","disabled");
                                }',
                'success'=>'function(data) {
                                alert(data);
                                if( data == "sent" ) {
                                    $(".ajaxMessage").text("User has been successfully created");
                                } else {
                                    $(".ajaxMessage").text("Oops! It looks there is some error in your form");
                                }
                                $(".createUser").removeAttr("disabled");
                            }'
            ),
            array('class'=>'createUser')
        )); ?>
    </div>

<?php $this->endWidget(); ?>

</div><!-- form -->
<div class="ajaxMessage"></div> 
```

我想在变量中获取 ajax 响应。这是控制器代码

```
if(isset($_POST['Users']))
{
    if( Yii::app()->request->isAjaxRequest )
        echo 'ajax get';
    else
        echo 'ajax not get';
} 
```

在萤火虫中，我看到响应已正确生成，但未存储在我的变量中。视图代码是在此链接的帮助下创建的：
[http ://www.yiiframework.com/forum/index.php/topic/8219-solved-ajax-form-submission/](http://www.yiiframework.com/forum/index.php/topic/8219-solved-ajax-form-submission/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:59:14.650

javascript`data`将是您从控制器回显的任何内容。因此，如果您想`data=="sent"` 在 jquery 的`success`回调中进行检查，请`echo 'sent';`从操作中执行。

您已将 ajaxOptions 包含在 normalizeUrl 函数中，将其更改为：

```
<div class="row buttons">
    <?php echo CHtml::ajaxSubmitButton('Create User', CHtml::normalizeUrl(array('')), 
        array(
            'beforeSend'=>'function() {
                                $(".createUser").attr("disabled","disabled");
                            }',
            'success'=>'function(data) {
                            alert(data);
                            if( data == "sent" ) {
                                $(".ajaxMessage").text("User has been successfully created");
                            } else {
                                $(".ajaxMessage").text("Oops! It looks there is some error in your form");
                            }
                            $(".createUser").removeAttr("disabled");
                        }'
        ),
        array('class'=>'createUser')
    ); ?> 
```

# javascript - 添加到 div，但在第一个元素之后

> ID：10332442
> 
> 赞同：0
> 
> 时间：2012-04-26T11:26:21.257
> 
> 标签：javascript, jquery, html

我需要`.container`在`.controls`（按钮）之后添加（最新的）新部门。可能吗？

注意：添加将在按钮下方保留前置控件的新部门对我来说**不是**一个选项。HTML 必须是完整的。

小提琴：http: [//jsfiddle.net/MhRmy/](http://jsfiddle.net/MhRmy/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:29:21.000

一种选择：

```
$(document).ready(function(){
    $('.add').bind('click', function(){
        $('<div />',{class: 'new-control'})
            .insertAfter($('.container .controls'));
    });
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/MhRmy/1/)。

还有一个：

```
$(document).ready(function(){
    $('.add').bind('click', function(){
        $('<div />',{class: 'new-control'})
            .appendTo($('.container'));
    });
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/MhRmy/3/)。

参考：

*   [`appendTo()`](http://api.jquery.com/appendTo/).
*   [`insertAfter()`](http://api.jquery.com/insertAfter/).

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T11:29:46.410

使用 jQuery 的[`after()`](http://api.jquery.com/after/)方法将元素添加为给定元素的兄弟：

```
$(document).ready(function(){
  $('.add').bind('click', function(){
    $('.container .controls').after('<div class="new-control"></div>');
  });
});​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T11:29:51.213

[这是一个演示](http://jsfiddle.net/MhRmy/2/)

```
$(function(){
    $('.add').on('click', function(){
        $('.controls').after('<div class="new-control"></div>');
    });
});​ 
```

# c#-4.0 - 错误是“对象引用未设置为对象的实例”

> ID：10332443
> 
> 赞同：0
> 
> 时间：2012-04-26T11:26:21.320
> 
> 标签：c#-4.0, ms-access-2007

我有一个问题，当我运行我的代码时，会出现“对象引用未设置为对象的实例”的错误。

请就此向我提出建议。

*代码*

```
protected void btn_Save_Click(object sender, EventArgs e)
    {
        string str = ("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:/Users/Geeta/Desktop/eTimeTrackLite1.mdb;Persist Security Info=False;");
        OleDbConnection conn = new OleDbConnection(str);
        conn.Open();
        string query = "insert into Employees ([EmployeeName],EmployeeCode,DeviceCode,Company,Department,Designation,Grade,Team,Location,EmploymentType,Category,HolidayGroup,ShiftGroup,ShiftRoster,Dateofjoining,Dateofconfirmation,Status,DateofResigning,[Sex]) values ('" + txt_empname.Text + "','" + txt_code.Text + "', '" + txt_dcode.Text + "', '" + dp_company.SelectedItem.ToString() + "', '" + dp_department.SelectedItem.ToString() + "', '"+dp_designation.SelectedItem.ToString()+"', '"+dp_grade.SelectedItem.ToString()+"', '"+dp_team.SelectedItem.ToString()+"', '"+dp_location.SelectedItem.ToString()+"', '"+dp_emptype.SelectedItem.ToString()+"', '"+dp_category.SelectedItem.ToString()+"', '"+dp_holigroup.SelectedItem.ToString()+"', '"+dp_shiftgroup.SelectedItem.ToString()+"', '"+dp_shiftroster.SelectedItem.ToString()+"', '"+dp_day.SelectedItem.ToString()+"', '"+dp_month.SelectedItem.ToString()+"', '"+dp_year.SelectedItem.ToString()+"', '"+dp_cday.SelectedItem.ToString()+"', '"+dp_cmonth.SelectedItem.ToString()+"', '"+dp_cyear.SelectedItem.ToString()+"', '"+dp_status.SelectedItem.ToString()+"', '"+dp_rday.SelectedItem.ToString()+"', '"+dp_rmonth.SelectedItem.ToString()+"', '"+dp_ryear.SelectedItem.ToString()+"', '"+rdbtn_male.Checked.ToString()+"', '"+rdbtn_female.Checked.ToString()+"')";
        OleDbCommand cmd = new OleDbCommand(query, conn);
        cmd.ExecuteNonQuery();
        conn.Close();
        BindGridData();
    } 
```

“谢谢”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:32:51.400

为避免此类问题，请勿使用 ToString ，因为存在调用对象为空的风险，请改用 Convert.ToString() 。 [http://msdn.microsoft.com/en-us/library/system.convert.tostring.aspx](http://msdn.microsoft.com/en-us/library/system.convert.tostring.aspx)

# php - PHP格式化一个没有小数位的数字？

> ID：10332446
> 
> 赞同：9
> 
> 时间：2012-04-26T11:27:01.017
> 
> 标签：php, number-formatting

我有一个像这样的数字（作为字符串）：**1.00000**

我怎样才能重新格式化这些数字，使其看起来像**1**？

谢谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-26T11:27:50.567

采用[`number_format()`](http://us.php.net/manual/en/function.number-format.php)

```
echo number_format('1.000000'); // prints 1 
```

或使用[`intval()`](http://us.php.net/manual/en/function.intval.php)

```
echo intval('1.000000'); // prints 1 
```

或将其转换为整数

```
echo (int) '1.000000'; // prints 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-19T18:18:39.913

你可以使用 floor 方法让它保持浮动

```
floor(1.000000) 
```

# solr - 索尔。如何配置 DataImportHandler 以通过代理获取数据？

> ID：10332448
> 
> 赞同：0
> 
> 时间：2012-04-26T11:27:04.600
> 
> 标签：solr, proxy, dataimporthandler

我正在尝试使用 Dataimporthandler 从 XML 导入数据，但我得到一个“UnknownHostException”。我很确定这是因为我需要配置代理和凭据。

有人知道在哪里做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:50:33.420

我想你正在使用`URLDataSource`. 看起来它现在不支持代理，你只能配置几个超时。

您可以自己扩展它，添加对代理的支持，然后您甚至可以将其回馈给社区，打开[jira 问题](https://issues.apache.org/jira/browse/SOLR)并附加您自己的补丁。

# php - 将日期与 PHP 中的日期列表进行比较

> ID：10332449
> 
> 赞同：0
> 
> 时间：2012-04-26T11:27:07.140
> 
> 标签：php, magento

我有一个日期列表，例如：

```
2012-04-11
2012-04-29
2012-04-26
2012-04-23
2012-03-21
2012-07-23
2012-12-19 
```

我想将日期列表与今天的日期进行比较。从那我想要一个已经过去的日期列表。另外，我想要一个未来的日期列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:00:11.250

您可以使用[`strtotime()`](http://www.php.net/manual/en/function.strtotime.php)将日期转换为 UNIX 时间戳，然后执行简单的大于/小于测试。做这样的事情：

```
<?php
$past_dates = array();
$future_dates = array();
$dates = array('2012-04-11', '2012-04-29', '2012-04-26', '2012-04-23', '2012-03-21', '2012-07-23', '2012-12-19');
$today = date('Y-m-d');
foreach($dates as $value) {
  if(strtotime($value) < strtotime($today)) {
    $past_dates[] = $value;
  } else if(strtotime($value) > strtotime($today)) {
     $future_dates[] = $value;
  }
}
echo 'Past dates:';
echo '<pre>';
print_r($past_dates);
echo 'Future dates:';
echo '<pre>';
print_r($future_dates);
echo '</pre>';
echo 'Today is: ' . $today;
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:59:55.477

试试[http://www.php.net/manual/en/datetime.diff.php](http://www.php.net/manual/en/datetime.diff.php)

从手册：

面向对象风格

```
<?php
$datetime1 = new DateTime('2009-10-11');
$datetime2 = new DateTime('2009-10-13');
$interval = $datetime1->diff($datetime2);
echo $interval->format('%R%a days');
?> 
```

程序风格

```
<?php
$datetime1 = date_create('2009-10-11');
$datetime2 = date_create('2009-10-13');
$interval = date_diff($datetime1, $datetime2);
echo $interval->format('%R%a days');
?> 
```

上面的例子将输出：

```
+2 days 
```

也许你会发现有用。

> Example #2 DateTime 对象比较
> 
> ```
> Note:
> 
> As of PHP 5.2.2, DateTime objects can be compared using comparison operators. 
> ```

```
<?php
$date1 = new DateTime("now");
$date2 = new DateTime("tomorrow");

var_dump($date1 == $date2);
var_dump($date1 < $date2);
var_dump($date1 > $date2);
?> 
```

上面的示例将输出：

```
bool(false)
bool(true)
bool(false) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T11:53:50.953

```
$dateArray =   array('2012-04-11','2012-04-29','2012-04-26','2012-04-23','2012-03-21','2012-07-23','2012-12-19')
$pastDates = array();
$futureDates = array();

foreach ($dateArray as $date){
  $dateTime = strtotime($date);
  if (time() > $dateTime){
     $pastDates[] = $date;
  } else {
     $futureDates[] = $date;
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T11:32:05.363

使用 PHP 的`strtotime()`方法：

```
$date = "2012-04-29"; 
$todays_date = date("Y-m-d"); 
$today = strtotime($todays_date); 
$test_date = strtotime($date); 

if ($test_date > $today) { 
    // Some Code
} 
else { 
    // Some code
} 
```

# zend-framework - Zend 用盐注册表格

> ID：10332451
> 
> 赞同：0
> 
> 时间：2012-04-26T11:27:12.473
> 
> 标签：zend-framework, zend-form

我有一个简单的注册表单和使用 md5 加密和 salt 散列的密码，我收到一条错误消息，说“uni”字段不能为空，我假设这是因为我不确定如何添加将 $salt 放入表单中（它不是隐藏元素吗？就像 id 字段一样？）。我已经完成了以下模型：

```
public function addUser($first_name, $surname, $email, $username, $password, $salt, $age, $gender, $uni) {

    $salt=substr(md5(mt_rand()),0,20);
    $md5Password=md5($salt.$password);

    $data = array(
        'first_name' => $first_name,
        'surname' => $surname,
        'email' => $email,
        'username' => $username,
        'salt' => $salt,
        'password' => $md5Password,
        'age' => $age,
        'gender' => $gender,
        'uni' => $uni,
    );
    $this->insert($data);
} 
```

这是表格：

```
<?php

class Application_Form_Register extends Zend_Form
{

    public function init() {
        $this->setName('register');
        $id = new Zend_Form_Element_Hidden('id');
  $id->addFilter('Int');
        $first_name = new Zend_Form_Element_Text('first_name');
        $first_name->setLabel('Firstname:')
                ->setRequired(true)
                ->addFilter('StripTags')
                ->addFilter('StringTrim')
                ->addValidator('NotEmpty');
        $surname = new Zend_Form_Element_Text('surname');
        $surname->setLabel('Surname:')
                ->setRequired(true)
                ->addFilter('StripTags')
                ->addFilter('StringTrim')
                ->addValidator('NotEmpty');
    $email = new Zend_Form_Element_Text('email');
    $email->setLabel('Email:')
            ->setRequired(true)
            ->addFilter('StripTags')
            ->addFilter('StringTrim')
            ->addValidator('NotEmpty');
    $username = new Zend_Form_Element_Text('username');
    $username->setLabel('Username:')
            ->setRequired(true)
            ->addFilter('StripTags')
            ->addFilter('StringTrim')
            ->addValidator('NotEmpty');
    $password = new Zend_Form_Element_Password('password');
    $password->setLabel('Password:')
            ->setRequired(true)
            ->addFilter('StripTags')
            ->addFilter('StringTrim')
            ->addValidator('NotEmpty');
    $salt = new Zend_Form_Element_Hidden('salt');
    $age = new Zend_Form_Element_Text('age');
    $age->setLabel('Age:')
            ->setRequired(true)
            ->addFilter('StripTags')
            ->addFilter('StringTrim')
            ->addValidator('NotEmpty');
    $gender = new Zend_Form_Element_Text('gender');
    $gender->setLabel('Gender:')
            ->setRequired(true)
            ->addFilter('StripTags')
            ->addFilter('StringTrim')
            ->addValidator('NotEmpty');
    $uni = new Zend_Form_Element_Text('uni');
    $uni->setLabel('University:')
            ->setRequired(true)
            ->addFilter('StripTags')
            ->addFilter('StringTrim')
            ->addValidator('NotEmpty');
    $submit = new Zend_Form_Element_Submit('submit');
    $submit->setAttrib('id', 'submitbutton');
    $this->addElements(array($id, $first_name, $surname, $email, $username, $password, $salt, $age, $gender, $uni, $submit));
}
} 
```

谢谢

里克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:22:29.583

第一个“uni”是一个表单域。

```
$uni = new Zend_Form_Element_Text('uni');
    $uni->setLabel('University:')
            ->setRequired(true)
            ->addFilter('StripTags')
            ->addFilter('StringTrim')
            ->addValidator('NotEmpty'); 
```

当您将“null”值传递给已声明为“not null”的 db 表列时，会发生此错误。要解决此问题，请将“not null”值传递给“addUser()”方法，在方法 api 中为“uni”设置默认值，或允许 db 表“uni”列接受“null”值。

就个人而言，我通常将数组传递给这些方法，然后取出我想要的位。就像是：

```
public function addStation(array $data) {
        $data = array(
            'station' => $data['station'],
            'comment' => $data['comment']
        );

        $this->insert($data);
    } 
```

再次就个人而言，我根本不会将盐字段放入表单中，我会在模型中分配盐。毫无意义地向世界展示我的盐。

祝你好运。

# android - 播放默认声音

> ID：10332453
> 
> 赞同：1
> 
> 时间：2012-04-26T11:27:14.623
> 
> 标签：android

可以在不知道 Android 版本或声音路径的情况下播放键盘默认声音。

声音似乎会根据所使用的 Android 版本而变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T11:28:51.537

```
private void PlayKeyPress (Context c){
    AudioManager am=(AudioManager) c.getSystemService(Context.AUDIO_SERVICE);
    am.playSoundEffect(AudioManager.FX_KEYPRESS_STANDARD, (float) 0.5);
} 
```

# java - 用于存储原始整数的集合，允许更快的 contains() 和有序迭代

> ID：10332456
> 
> 赞同：3
> 
> 时间：2012-04-26T11:27:22.997
> 
> 标签：java, collections, guava, trove4j

我需要一个节省空间的集合来存储大量基元`int`（s）（大约 800,000 个整数），它允许快速操作`contains()`& 允许按定义的顺序进行迭代。

`contains()`检查列表中是否存在 int 的更快操作是主要优先事项，因为这种操作非常频繁。

* * *

我愿意使用广泛使用和流行的 3rd 方库，如 Trove、Guava 等。

我看过 Trove 的[TIntSet](http://trove4j.sourceforge.net/javadocs/index.html?gnu/trove/set/hash/TIntHashSet.html)，但我相信这不会让我定义迭代的顺序。

# 编辑：

集合的大小约为 800,000 个整数。集合中的值范围将从 0 到`Integer.Max_VALUE`. 迭代的顺序实际上应该基于我将值添加到集合的顺序，或者我可能只是提供一个有序的 int[] 并且它应该以相同的顺序进行迭代。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-27T11:55:35.087

作为数据结构，我会选择一个**long 数组**（我在逻辑上将其视为**两个 int**）。高 int 部分（位 63 - 32）表示您添加到集合中的**int 值。**低整数部分（位 31 - 0）表示迭代时**后继者的索引。**如果您有 800.000 个唯一整数，您需要创建一个大小为 800.000 的长数组。

现在您将数组组织为按您的值排序的**二叉平衡树**。左边是较小的值，右边是较高的值。您还需要两个跟踪值：一个 int 指向开始迭代的第一个索引，一个 int 指向最后插入的值的索引。

每当您添加一个新值时，重新组织您的二叉平衡树并从最后一个添加的值更新指向当前添加的值（作为索引）的指针。

将此值（数组和两个 int 值）包装为您选择的集合。

使用这种数据结构，您可以获得**O(log(n))**的搜索性能和两倍于值大小的内存使用量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T11:42:24.940

由于这个数据库很臭，但您需要更直接的方法，请使用 java.nio 的[内存映射](http://docs.oracle.com/javase/7/docs/api/java/nio/MappedByteBuffer.html)文件。尤其是 800_000 个整数的自定义排序不会这样做。包含可以通过内存中的 BitSet 来实现，与文件中的排序平行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T11:31:48.123

您可以使用 2`Sets`个基于散列（例如`TIntSet`）设置的一组进行快速`contains`操作。另一个是基于树结构设置的，例如`TreeSet`以特定顺序迭代。
当您需要添加 int 时，您同时更新两个集合。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T11:33:42.710

听起来`LinkedHashSet`可能就是您正在寻找的东西。在内部，它维护两个结构 - a`HashSet`和 a `LinkedList`，允许快速“包含（）”（来自前者）和定义的迭代顺序（来自后者）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-04-26T11:30:07.033

只需使用[`ArrayList<Integer>`](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html).

# erlang - simple_one_for_one 孩子无法启动

> ID：10332458
> 
> 赞同：0
> 
> 时间：2012-04-26T11:27:27.247
> 
> 标签：erlang, erlang-supervisor

我写了一些代码来测试 simple_one_for_one 主管，但它不能工作，代码是：

```
-module(test_simple_one_for_one).

-behaviour(supervisor).

%% API
-export([start_link/0, start_fun_test/0]).

%% Supervisor callbacks
-export([init/1]).

-define(SERVER, ?MODULE).

%%--------------------------------------------------------------------
start_link() ->
    {ok, Pid} = supervisor:start_link({local, ?SERVER}, ?MODULE, []).

start_fun_test() ->
    supervisor:start_child(test_simple_one_for_one, []).

init([]) ->
    RestartStrategy = simple_one_for_one,
    MaxRestarts = 1000,
    MaxSecondsBetweenRestarts = 3600,

    SupFlags = {RestartStrategy, MaxRestarts, MaxSecondsBetweenRestarts},

    Restart = permanent,
    Shutdown = 2000,
    Type = worker,

    AChild = {fun_test_sup, {fun_test, run, []},
          Restart, Shutdown, Type, [fun_test]},
    io:format("start supervisor------ ~n"),
    {ok, {SupFlags, [AChild]}}. 
```

当我跑

`test_simple_one_for_one:start_link().`

和

```
test_simple_one_for_one:start_fun_test(). 
```

在 erl shell 中，它给了我错误：

> test_simple_one_for_one:start_fun_test()。** 异常退出：{noproc,{gen_server,call, [test_simple_one_for_one,{start_child,[]},infinity]}} 在函数 gen_server:call/3 中（gen_server.erl，第 188 行）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T19:49:48.877

如果这是您为测试编写的所有代码，请注意，当您注册主管子时，您会提供一个 {M, F, A} 元组，它表示您启动子时调用的函数。

在你的情况下，我认为它不能简单地找到 fun_test:run/1 函数。

# html - SPAN 内的 H2 - 与浏览器兼容？

> ID：10332460
> 
> 赞同：2
> 
> 时间：2012-04-26T11:27:31.677
> 
> 标签：html, css

首先，我见过这个问题[IE Compatibility issue](https://stackoverflow.com/questions/6128624/ie-compatibility-issue-span-inside-h2)，但我有一个稍微不同的问题：

我有一个跨度，`display: block`我想在里面放一个 H2 标签。这在每个（主要）浏览器中看起来都不错吗？

前面提到的链接上的答案是制作 H2 `display:inline`，这是我不想要的，我也不想`span`用 a替换`div`，因为我必须更改很多 CSS。

PS。我不希望我的 HTML 进行验证（使用验证器），我只想让它工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T11:36:34.143

当您说**“我不希望我的 HTML 进行验证（使用验证器）时，我只想让它工作。”** 你犯了一个很大的错误。如果 HTML 未通过验证，则不知道会发生什么。标准的存在是有原因的。

用 div 替换 span，你不需要在 div 上显示块，因为它默认有这个。span 是内联级元素，而 H2 是块级元素。内联元素不能包含块级元素（直到 HTML5，您可以在锚点中包装块级元素）

这将验证，并将*工作*！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T12:02:52.963

它适用于当前的浏览器（包括旧版本），而且这种情况不太可能改变。像这样的错误很常见，以至于浏览器供应商改变他们的错误恢复机制毫无意义。HTML5 即将强制错误恢复规则。

另一方面，使用`span`with`display: block`而不是 using有什么意义`div`？并且 CSS 应该被编写成它不依赖于标记元素的特定选择，不同的选择可能是有意义的；例如，通常，`.foo`是比 . 更好的选择器`span.foo`。

对标记或样式表的任何大范围更改都具有导致问题的不可忽略的风险，即使更改是一项如此简单的改进。（例如，全局搜索和替换经常做太多事情，或者遗漏一些东西。）这可能是继续使用无效标记的原因，在实践中风险最小的情况下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T11:40:23.490

我们可以先解决IE二线问题

```
h2{}
h2 span{ float:right;} 
```

所有浏览器中的正确方法

```
<h2><span>sub content</span>  Heading</h2> 
```

错误的方式即浏览器

```
<h2>Heading<span>sub content</span></h2> 
```

# networking - 每个子网都需要一个接口路由器吗？

> ID：10332462
> 
> 赞同：2
> 
> 时间：2012-04-26T11:27:34.630
> 
> 标签：networking, routing, ip, subnet

我有做`subneting`数学的知识，但我混淆了用于将每个子网与其他子网分开的设备？谁将数据包路由到正确的子网目的地？如果是路由器，我们是否需要每个子网都有一个接口？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:33:53.867

路由器负责将数据包路由到正确的子网。您需要将每个子网分配给不同的接口，但这并不一定意味着物理接口。您也可以使用虚拟接口。

这是关于它们的 Cisco 链接：

> [http://www.cisco.com/en/US/docs/ios/12_4/interface/configuration/guide/inb_virt.html](http://www.cisco.com/en/US/docs/ios/12_4/interface/configuration/guide/inb_virt.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T02:10:05.153

如果您有多个内部子网，行业标准是创建子接口并封装为路由器和交换机之间的 DOT1Q 中继。

示例 R1

接口：

S0/0/0 - 用于 WAN Fa0/1 - 物理内部接口 Fa0/1.100 数据 VLAN（子接口） Fa0/1.200 语音 VLAN（子接口）

转变。上面将有 VLAN 100 和 200，并且中继端口将配置为封装 DOT1Q。有了这些命令。“交换机端口模式中继” “交换机端口中继封装 dot1q”

我确实这样做了数千次。不要在内部子网的单独路由器接口上浪费金钱。

希望这可以帮助。

# php - 随机函数：较高的值出现的频率低于较低的值

> ID：10332470
> 
> 赞同：6
> 
> 时间：2012-04-26T11:27:57.857
> 
> 标签：php, math, random

我有一个棘手的问题，我已经研究了几次但没有弄清楚。

一些背景故事：我正在制作一个基于文本的 RPG 游戏，玩家可以在其中与动物/怪物等战斗。它的工作方式与任何其他游戏一样，你每轮都会互相击中多个生命值。

问题：我正在使用 php 中的随机函数来生成命中的最终值，具体取决于级别、盔甲等。但我希望较高的值（如最大命中）出现的频率低于较低的值。

这是一个示例图：

![示例图](../Images/ab311e8865cbed29de553ebd81a498d8.png)

如何使用 PHP 和 rand 函数重现这样的内容？键入`rand(1,100)`每个数字时，被选中的机会均等。

我的想法是：做一个二阶（或二次函数）并使用随机数（x）进行计算。

这会像我想要的那样工作吗？

这个问题有点棘手，如果您想了解更多信息和细节，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:39:01.227

请看这篇美丽的文章： [http ://www.redblobgames.com/articles/probability/damage-rolls.html](http://www.redblobgames.com/articles/probability/damage-rolls.html)

有考虑掷骰子和结果百分比的交互式图表。这对您应该非常有用。

注意这种滚动随机数：

```
roll1 = rollDice(2,  12);
roll2 = rollDice(2,  12);
damage = min(roll1, roll2); 
```

这应该给你你想要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T11:47:26.410

好的，这是我的想法：

假设您有一组元素`(a,b,c,d)`，并且您不会随机选择其中一个。做 a`rand(1,4)`来获得随机元素索引，意味着所有元素都有平等的机会出现。(25%)

现在，假设我们采用这个数组 : `(a,b,c,d,d)`。

这里我们仍然有 4 个元素，但并不是每个元素都有相同的出现机会。

> *   a,b,c : 20%
> *   d : 40%

或者，让我们使用这个数组：

`(1,2,3,...,97,97,97,98,98,98,99,99,99,100,100,100,100)`

***提示：**这样您不仅会偏向随机数生成算法，而且实际上会设置每个（或一系列数字）出现的所需概率。*

* * *

所以，这就是我将如何去做：

如果您想要从 1 到 100 的数字（更高的数字出现得更频繁，请获取一个从 1 到 1000 的随机数并将其与更广泛的范围相关联。例如

```
rand = 800-1000 => rand/10 (80->100)
rand = 600-800  => rand/9 (66->88)
... 
```

或类似的东西。（你可以使用你想象的任何数学运算，模或其他......并使用你的算法）。我希望你明白我的想法。

祝你好运！:-)

# php - 什么是缓存标记？

> ID：10332475
> 
> 赞同：3
> 
> 时间：2012-04-26T11:28:09.607
> 
> 标签：php, performance, caching, kohana

Kohana 中有[Cache_Tagging](http://kohanaframework.org/3.2/guide/api/Cache_Tagging)但它没有解释它是什么。谁能告诉缓存标记应该做什么或者我们什么时候使用它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-26T11:39:43.357

某些缓存实现允许您向存储在缓存中的任何数据项添加一个或多个标签，然后查找或删除具有给定标签的所有项目。这对很多事情很有用，最重要的是批量更新（你将一堆相关的东西添加到缓存中，用版本字符串标记它，当你后来得知该版本的数据已经过时时，告诉缓存一次性全部丢弃）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T11:38:24.333

我的猜测是您可以将标签设置为缓存条目，然后按标签（s？）删除缓存条目。这样，您可以使用自己的规则非常有选择地清除部分缓存。

# php - 如何在 PHP 中限制每个用户的搜索次数

> ID：10332476
> 
> 赞同：2
> 
> 时间：2012-04-26T11:28:15.670
> 
> 标签：php, search

我正在尝试开发一个应用程序，来宾用户只能看到搜索结果 10 次，之后他应该被定向到付款页面。我可以在搜索结果页面上使用会话，但我怎样才能在上面设置一个计数器。任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T11:42:55.733

如果您应该对当前正在运行的会话设置搜索限制，那么您可以使用`$_SESSION['count']++`. 如果你应该设置每天的搜索限制而不是你可以使用`'UPDATE users SET search_count = search_count+1'`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-26T11:31:28.367

每次创建搜索请求时，您只需执行

```
$_SESSION['counter']++ 
```

尽管他可以通过删除 cookie 来摆脱限制。另一种方法是，将搜索请求的数量存储在包含 IP 地址的数据库表中，但这也可以绕过，尽管这样做需要更多的工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T11:31:40.903

这取决于您是否允许他在访问您的网站时再次搜索，或者即使在他一年后访问后也只允许他搜索 10 次。

对于临时基地，您可以使用 cookie（参见`setcookie`功能），但如果您想一劳永逸地限制他，则必须将该信息保存在数据库中。

您将编写如下代码：

```
<?php
  session_start();

  $_SESSION['counter'] += 1;
  // more logic/code 
```

现在您必须保存 的值`$_SESSION['counter']`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-26T11:32:28.063

如果您的用户只能在登录时搜索，那么我认为没有问题 - 您肯定有用户的 db 表，所以只需向其中添加另一列，例如“search_count”，并在每次用户尝试搜索时将其增加一。

例如：

```
UPDATE `users` SET search_count = search_count+1 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-26T11:32:36.483

您还可以在数据库的用户表中使用计数器，并在用户每次查找结果时调用一个函数，该函数将值加一，因此是一个简单的 UPDATE。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T12:14:53.240

我认为维护数据库会比维护 SESSION 好得多，因为可能是由于某些原因会话被删除或删除。

`users`例如`visit`，在表名中添加一个字段，`default value 0`并在每次访问搜索结果页面时更新此字段。

```
 "update usertablename set visitfield = visitfield + 1 where user_id = ".$current_user_id 
```

谢谢

# c# - 检查当前请求是否来自 httpmodule 中的 mvc 页面

> ID：10332480
> 
> 赞同：3
> 
> 时间：2012-04-26T11:28:43.390
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, httpmodule

作为 MVC 的新手，我有一个问题。在 http 模块中，如何查找当前请求是否来自 mvc 页面，即[http://www.website.com/user/edit](http://www.website.com/user/edit)

我可以检查当前上下文中的某些内容吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T12:43:20.200

您可以获得控制器和操作名称....

```
var request = httpContext.Request.RequestContext.RouteData.Values;
string ActionName = request["Action"].ToString();
string ControllerName = request["Controller"].ToString(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T15:21:32.963

您可以尝试使用 Referrer 属性

```
if(Request.UrlReferrer != null 
    && Request.UrlReferrer.PathAndQuery.StartsWith( "/User/Edit/" ))
{
    return View( "SomeOtherView" );
} 
```

# c# - CSV 文件通过 Linq 上课

> ID：10332482
> 
> 赞同：0
> 
> 时间：2012-04-26T11:28:44.867
> 
> 标签：c#, linq, csv

使用下面的代码，在 上`foreach`，我得到一个异常。

我在（第二行）放置断点`csv`，展开结果，我看到 2 个条目没问题。

当我在`csv`in上做同样的事情时`foreach`，我得到一个 excpetion：`can't read from closed text reader.`

任何的想法 ？

谢谢，

我的 CSV 文件：

```
A0;A1;A2;A3;A4
B0;B1;B2;B3;B4 
```

编码

```
var lines = File.ReadLines("filecsv").Select(a => a.Split(';'));
IEnumerable<IEnumerable<MyClass>> csv =
    from line in lines
    select (from piece in line
            select new MyClass
            {
                Field0 = piece[0].ToString(),
                Field1 = piece[1].ToString()
            }
    ).AsEnumerable<MyClass>();

foreach (MyClass myClass in csv)
    Console.WriteLine(myClass.Field0);
Console.ReadLine(); 
```

我的课 ：

```
public class MyClass 
{
    public string Field0 { get; set; }
    public string Field1 { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:45:16.003

也许像这样的东西，会给你你想要的东西：

```
var jobs = File.ReadLines("filecsv")
               .Select(line => line.Split(','))
               .Select(tokens => new MyClass { Field0 = tokens[0], Field1 = tokens[1] })
               .ToList(); 
```

您遇到的问题是您正在保存`Enumerable`延迟执行的 . 然后，您通过调试器查看它，该调试器循环遍历文件，完成所有工作并处理它。然后你尝试再做一次。

上面的代码实现了你当前想要的，更简洁，并强制转换为列表，这样惰性行为就消失了。

另请注意，我看不出您`from piece in line`目前如何正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:35:01.337

可能是因为 LINQ 不会直接读取所有项目，它只是在需要时创建它读取的连接。

您可以尝试投射：

```
var lines = File.ReadLines("filecsv").Select(a => a.Split(';')).ToArray(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T11:37:03.273

我怀疑这是`yield`关键字（在 中使用`Select()`）和内部文本阅读器（在 中`ReadLines`）的组合，而不是“同意”。

将行变量更改为`var lines = File.ReadLines("filecsv").Select(a => a.Split(';')).ToArray();`

那应该排序它。

# magento - 网站工作正常，没有任何错误

> ID：10332495
> 
> 赞同：0
> 
> 时间：2012-04-26T11:29:40.367
> 
> 标签：magento

我有一个 magento 网站（最新版本）。该站点运行良好，没有任何错误，但有时站点未加载并出现白屏。一段时间后，此问题会自动解决。谁能帮我。这是网站网址。 [http://egolfoutlet.ae](http://egolfoutlet.ae)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T01:02:38.463

空白白页通常表示发生了致命的 PHP 错误，并且 PHP 中的错误报告已关闭。检查您的 apache 错误日志（您将如何执行此操作以及日志文件位置取决于您的 Web 主机）。

Magento 还有它自己的错误报告系统，它向最终用户显示一个友好的页面，并将实际的 PHP 错误消息和堆栈跟踪放入`var/report`.

报告文件将有一个数字文件名，可以使用任何文本编辑器打开。

如果您没有看到任何错误报告，则值得确保您的 Web 服务器可以写入该`var/report`文件夹。

Magento 文档通常建议`var`文件夹及其中的所有内容具有 777 权限。

# javascript - Google 地图是否提供在地图上绘制多个多边形的功能？

> ID：10332501
> 
> 赞同：2
> 
> 时间：2012-04-26T11:29:49.930
> 
> 标签：javascript, google-maps, draw, polygon

使用 Google Maps JavaScript v3 API，是否可以在同一张地图上绘制多个单独的多边形？并包括一个在绘制每个形状后出现的消息框，并带有警告：“单击休息以绘制另一个”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T17:25:37.087

是的，您可以在地图上绘制多个多边形；查看[绘图库](https://developers.google.com/maps/documentation/javascript/overlays#drawing_tools)。如果您想在完成一个形状后显示一条消息，您将需要定义一个侦听器函数`DrawingManager`来侦听几个可能的完成事件通知之一：

```
google.maps.event.addListener(drawingMgr, 'overlaycomplete', function( event ){
    var shape = event.overlay;
    var path = shape.getPath();    //returns an MVCArray of LatLng instances
    for ( var i = 0; i < path.length; i++ ) {
        var lat = path.getAt(i).lat(); //Corrected as per MVCArray
        var lng = path.getAt(i).lng(); //Corrected as per MVCArray
        //do something with the data...
    }
    //put your message display code here
}); 
```

在函数回调中，您可以访问刚刚完成的形状。所以在上面的代码中，`event.overlay`会为你提供一个直接引用的形状。如果我们假设形状是 a `Polygon`，那么您将能够直接访问形状的成员，如上所示。完整的`Polygon`成员集记录[在这里](https://developers.google.com/maps/documentation/javascript/reference#Polygon)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T13:52:03.077

我把整个代码都为我工作：

```
enter code here
google.maps.event.addListener(drawingMgr, 'overlaycomplete', function( event ){
var shape = event.overlay;
var path = shape.getPath();    //returns an Array of LatLng
for ( var i = 0; i < path.length; i++ ) {
    var lat = path.getAt(i).lat();
    var lng = path.getAt(i).lng();
    //do something with the data...
}
//put your message display code here 
```

});

# c# - 中止 WebClient.DownloadFileAsync 操作

> ID：10332506
> 
> 赞同：4
> 
> 时间：2012-04-26T11:30:10.350
> 
> 标签：c#

安全取消 DownloadFileAsync 操作的最佳方法是什么？

我有一个线程（后台工作人员），它启动下载并管理它的其他方面，当我看到线程有时我结束在`CancellationPending == true.` 开始下载后，线程将坐下来旋转直到下载完成，或者线程被取消。

如果线程被取消，我想取消下载。这样做有标准的成语吗？我试过`CancelAsync`了，但我得到了一个 WebException （中止）。我不确定这是一种干净的取消方式。

谢谢。

编辑：第一个例外是对象在内部流（调用堆栈）上放置一个：

> System.dll!System.Net.Sockets.NetworkStream.EndRead(System.IAsyncResult asyncResult) System.dll!System.Net.PooledStream.EndRead(System.IAsyncResult asyncResult)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T11:59:20.287

我不确定为什么调用 CancelAsync 会出现异常。

在我们当前的项目中，我使用 WebClient 来处理并行下载，并且在调用 CancelAsync 时，该事件`DownloadFileCompleted`由 WebClient 引发，其中属性`Cancelled`为 true。我的事件处理程序如下所示：

```
private void OnDownloadFileCompleted(object sender, AsyncCompletedEventArgs e)
{
    if (e.Cancelled)
    {
        this.CleanUp(); // Method that disposes the client and unhooks events
        return;
    }

    if (e.Error != null) // We have an error! Retry a few times, then abort.
    {
        if (this.retryCount < RetryMaxCount)
        {
            this.retryCount++;
            this.CleanUp();
            this.Start();
        }

        // The re-tries have failed, abort download.
        this.CleanUp();
        this.errorMessage = "Downloading " + this.fileName + " failed.";
        this.RaisePropertyChanged("ErrorMessage");
        return;
     }

     this.message = "Downloading " + this.fileName + " complete!";
     this.RaisePropertyChanged("Message");

     this.progress = 0;

     this.CleanUp();
     this.RaisePropertyChanged("DownloadCompleted");
} 
```

取消方法很简单：

```
/// <summary>
/// If downloading, cancels a download in progress.
/// </summary>
public virtual void Cancel()
{
    if (this.client != null)
    {
        this.client.CancelAsync();
    }
} 
```

# iphone - numberofSectionInTablesView/NumberofRowsInsection

> ID：10332507
> 
> 赞同：0
> 
> 时间：2012-04-26T11:30:31.340
> 
> 标签：iphone, ios, xcode, uitableview

我无法返回 numberofSections/numberofRows。我有一本充满数据的字典

```
-(void)setUpContacts{
//set up the contacts
NSString *string = @"ABCDEFGHIJKLMNOPQRSTUVWXYZ";

letterArray = [[NSMutableDictionary alloc]init];

Contacts *contact = [[Contacts alloc]init];
contactNumbers = [contact phoneNumbers];

for (NSDictionary* info in contactNumbers) {
    firstLetter = [info objectForKey:@"lastName"];
    index = @"_";
    if([firstLetter length] > 0){
        firstLetter =[firstLetter substringToIndex:1];
        firstLetter= [firstLetter capitalizedString];
        NSRange range = [string rangeOfString:firstLetter];
        if(range.length >= 0){
            index= firstLetter;
        }
    }
    if(![letterArray objectForKey:index]){

        [letterArray setValue:[NSMutableArray array] forKey:index];
    }
    [[letterArray objectForKey:index] addObject:info];

}
NSLog(@"%@",letterArray);} 
```

它用这个 NSLogs

```
C =     (
            {
        firstName = Alex;
        kind = Mobile;
        lastName = Chang;
        name = "Alex Chang (Mobile)";
        number = "(555) 555-5555";
    },
            {
        firstName = YuYu;
        kind = Mobile;
        lastName = Chen;
        name = "YuYu Chen (Mobile)";
        number = "(408) 112-2334";
    },
            {
        firstName = Chris;
        kind = Mobile;
        lastName = Choi;
        name = "Chris Choi (Mobile)";
        number = "(999) 999-9999";
    },
            {
        firstName = Kevin;
        kind = Mobile;
        lastName = Chung;
        name = "Kevin Chung (Mobile)";
        number = "1 (231) 241-2312";
    }
);
H =     (
            {
        firstName = Danny;
        kind = Mobile;
        lastName = Huang;
        name = "Danny Huang (Mobile)";
        number = "(408) 599-9770";
    },
            {
        firstName = Ice;
        kind = Mobile;
        lastName = Huang;
        name = "Ice Huang (Mobile)";
        number = "(408) 444-4444";
    }
);
K =     (
            {
        firstName = Will;
        kind = Mobile;
        lastName = King;
        name = "Will King (Mobile)";
        number = "(415) 123-4567";
    }
);
L =     (
            {
        firstName = "";
        kind = iPhone;
        lastName = LastName;
        name = " LastName (iPhone)";
        number = "(408) 123-2555";
    },
            {
        firstName = david;
        kind = Mobile;
        lastName = lub;
        name = "david lub (Mobile)";
        number = "(666) 666-1111";
    }
); 
```

对于 -(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView; 方法我如何检索索引的节数；

对于 -(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section；方法，我如何检索该部分中的行数？

## 编辑

```
-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
NSArray *array = [letterArray mutableCopy];
return [[array objectAtIndex:section]count];} 
```

它给了我这个错误：-[__NSCFDictionary objectAtIndex:]: unrecognized selector sent to instance 0x8434cc0

先感谢您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:37:31.303

对于 -(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView 你应该这样做：

```
return [letterArray count]; 
```

对于 -(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section 你应该这样做：

```
NSArray *array = letterArray;
return [[array objectAtIndex:section] count]; 
```

**编辑** 试试这个：

```
-(NSArray *)getLetterArrayCount {
    NSMutableArray *countArray = [[NSMutableArray alloc] init];
    NSNumber *subCount;

    for (id key_main in letterArray) {
        subCount = 0;

        for (id key_sub in [letterArray objectForKey:key_main]) {
            subCount = [NSNumber numberWithInt:[subCount intValue] + 1];
        }

        [countArray addObject:subCount];
    }
    return countArray;
} 
```

您应该调用一次并将其保存到类变量中，然后像这样对部分调用它：

```
[countArray count]; 
```

对于这样的部分中的行：

```
[[countArray objectAtIndex:section] intValue]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T12:58:48.023

```
letterArray = [[NSMutableDictionary alloc]init];
indexArray = [[NSMutableArray alloc] init];

[letterArray setValue:[NSMutableArray array] forKey:index];
[indexArray addObject:index]; 
```

对于`-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView`：

```
return [letterArray count]; 
```

对于`-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section`：

返回 [[letterArray objectForKey:[indexArray objectAtIndex:section]] count];

我想这会对你有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T12:11:32.430

在你的问题中，字母数组是一个 NSDictionary。它不会向您显示 objectAtIndex 选项。尝试将 NSMutableDictionary 更改为 NSMutableArray。然后你会得到选择。

和

返回（字母数组。计数）

```
NSMutableArray * arr = [[NSMutableArray alloc]init];
for (NSArray *ar in letterarray){
            [arr addObject:ar];
} 
```

返回此 arr.count

我在学习。，。，。

# c# - 通过 FileSystemWatcher 测试引发的事件

> ID：10332511
> 
> 赞同：1
> 
> 时间：2012-04-26T11:30:42.737
> 
> 标签：c#, .net, events, filesystemwatcher

您好我目前正在尝试测试配置文件更改失败，

我使用以下代码来执行此操作...

```
string path = _pathInvalidFormat.Substring(0, _pathInvalidFormat.LastIndexOf('\\'));
System.IO.File.Copy("TestInvalidXmlConfigurationFile.xml", _pathInvalidFormat, true);
FileSystemWatcher fileSystemWatcher = new FileSystemWatcher(path);

//catch the invalid file getting deleted
fileSystemWatcher.Deleted += new FileSystemEventHandler(fileSystemWatcher_Deleted);

//catch the temporary config file getting renamed
fileSystemWatcher.Renamed += new RenamedEventHandler(fileSystemWatcher_Renamed);
fileSystemWatcher.EnableRaisingEvents = true;

CreateConfig(_pathInvalidFormat);
System.Threading.Thread.Sleep(5000);
Assert.That(_oldFileDeleted);
Assert.That(_newFileCreated);
ResetConfig(_pathInvalidFormat); 
```

但是我对 System.Threading.Thread.Sleep(5000); 的这种使用不满意。

我试过使用 fileSystemWatcher.WaitForChanged(WatcherChangeTypes.Deleted, 5000); 但似乎无法让它工作，因为它似乎总是达到超时。即使我可以看到 Deleted 事件已被击中，它仍然没有返回。

或者有没有更好的方法让系统等待异步事件被触发？

谢谢

基兰

-- 编辑：

我使用 createconfig(path) 使用以下方法创建系统配置文件

```
private void ReadConfiguration(string path)
{
    var configFileMap = new ExeConfigurationFileMap()
    {
        ExeConfigFilename = path,
    };

    // if we try to read bad formatted file let's
    // 1\. delete this file
    // 2\. call read configuration to form correct file
    try
    {
        Config = System.Configuration.ConfigurationManager
            .OpenMappedExeConfiguration(configFileMap, ConfigurationUserLevel.None);
    }
    catch (ConfigurationErrorsException)
    {
        // ok, there is bad format file, let delete it and create another one
        // TODO: check security rights?
        File.Delete(path);
        ReadConfiguration(path);
    }
} 
```

希望这可以让我了解我的测试到底想要达到什么目的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:37:23.370

将所有代码放在一个函数中，并与线程异步执行。

现在，当文件被删除、重命名和检查无效路径错误时，您可以使用线程的手动重置事件在睡眠后执行进一步的代码。

这样，代码执行将不会被阻塞。

[例如参考这个链接](http://msdn.microsoft.com/en-us/library/system.threading.autoresetevent.aspx)

# php - PHP/MySQL讲座分配

> ID：10332513
> 
> 赞同：0
> 
> 时间：2012-04-26T11:30:47.447
> 
> 标签：php, mysql

我正在使用 PHP、MySQL 开发一个用于教育机构的网站。

其中一个功能是在创建批次时分配讲座。为了将讲座分配到起始批次，系统将根据他们的可用性和资格提示可用的讲座。然后课程协调员将做出决定。

我的问题是如何在给定时间段的特定工作日检查讲座的可用性。（时间段不同而不是固定持续时间）

我打算将讲座时间表保存在一个表格中，其中显示了 Lecture_Id、Batch_Id、day、start_time、end_time、start_day、end_day。

然后在检查可用性时，我需要编写一个复杂的查询来检查可用的 Lecture_Id。我还想不通。

有没有其他聪明的方法来做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:51:41.113

您建议存储信息的方式是我想到的第一种方式 - 虽然复杂的查询并不是那么糟糕。

因此，如果我理解正确，您将讲座存储在另一个表中，与您的 Lecture_schedules 表具有一对多的关系？如果是这样，这将获得给定时间范围内的讲座详细信息。

像这样的东西：

```
SELECT * FROM lecture_schedules 
         INNER JOIN lectures USING(lecture_id) 
         WHERE start_day<=DAY(yourstarttime) AND end_day>=DAY(yourendtime) 
         AND start_time<=yourstarttime AND end_time>=yourendtime; 
```

请注意，您将需要编辑表名和列名以反映您的实际架构，并将 和 替换`yourstarttime`为`yourendtime`时间范围值。

希望这可以帮助

编辑：此查询对架构中这些列的列和数据类型做了几个假设 - 不要只是复制和粘贴并期望它第一次工作:)

# django - Django - 显示 ModelForm 外键字段

> ID：10332514
> 
> 赞同：5
> 
> 时间：2012-04-26T11:30:50.853
> 
> 标签：django, django-models, django-forms

## 型号和形式

```
class Book(models.Model):
  author = models.ForeignKey(User)
  name = models.CharField(max_length=50)

class BookForm(forms.ModelForm):
  class Meta:
    model = Book
    widgets = {
      'author': forms.HiddenInput(),
    } 
```

此书单不允许更改作者

## 模板

但我想显示他的名字

```
<form action="/books/edit" method="post">{% csrf_token %}
  {{ form.author.label }}: {{ form.author.select_related.first_name }}
  {{ form.as_p }}
</form> 
```

## 问题

当然`form.author.select_related.first_name`行不通

如何显示作者的名字？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-26T13:07:00.983

这应该有效：

```
<form action="/books/edit" method="post">{% csrf_token %}
  {{ form.author.label }}: {{ form.instance.author.first_name }}
  {{ form.as_p }}
</form> 
```

但是你不能用这个表单来创建书籍，只能用于更新，如果作者没有设置在实例上，这将不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:48:00.533

如何创建一个只读字段？

```
class BookForm(forms.ModelForm):
    def __init__(self, *args, **kwargs):
        super(BookForm, self).__init__(*args, **kwargs)
        instance = getattr(self, 'instance', None)
        if instance and instance.id:
            self.fields['author'].widget.attrs['readonly'] = True

    def clean_author(self):
        return self.instance.author

    class Meta:
        model = Book
        widgets = {
           'author': forms.TextInput(),
        } 
```

该`clean_author`方法可以防止恶意请求试图覆盖作者。

# javascript - 使用 jQuery 编写一个可排序的列表（只是基本功能，jQueryUI 对我来说太重了）

> ID：10332521
> 
> 赞同：0
> 
> 时间：2012-04-26T11:31:34.627
> 
> 标签：javascript, jquery, jquery-ui-sortable

我想使用 jQuery 编写一个可排序的列表。

我的想法如下：随着 li 元素随着鼠标移动，当 mouseup 事件发生时，占位符将动态放置在 li 元素所在的位置。

但我没有得到一件事：如何使其他 li 元素随着占位符的移动而适当地上下移动。我认为我不应该使用 CSS 'top' 属性来移动这些元素，因为这种方法实际上不会自动更改列表中每个元素的索引。有人可以给我一些想法吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:44:21.507

实际上 jQuery UI 允许你在你的脚本中选择你想要的部分。所以你可以只选择可排序的（它将具有其他三个依赖项，但没有什么特别大的）。只需转到 jQuery UI 主页并单击构建自定义下载。您可以通过这种方式获得一个非常轻量级的脚本（如果您在下载中选择可读代码，您可以进一步精简）。

它有助于您的代码跨浏览器兼容性，并且 jQuery UI 代码实际上是可读的，并且易于去除任何不必要的功能（您可能可以删除例如`scrollSensitivity`setter）。

# web-services - 从netbeans部署tomcat

> ID：10332525
> 
> 赞同：4
> 
> 时间：2012-04-26T11:31:42.120
> 
> 标签：web-services, netbeans, tomcat7, netbeans-7.1

我在 Netbeans 7.1.1 中编写了我的第一个服务，但无法在 Tomcat 7 服务器上部署它。

```
Tomcat server started.
In-place deployment at /home/likewise-open/PROMWAD/alexandr.kurkin/NetBeansProjects/HelloWs1/build/web
Deployment is in progress...
deploy?config=file%3A%2Ftmp%2Fcontext1698562612061154650.xml&war=file:/home/likewise-open/PROMWAD/alexandr.kurkin/NetBeansProjects/HelloWs1/build/web/
http://localhost:8080/manager/deploy?config=file%3A%2Ftmp%2Fcontext1698562612061154650.xml&war=file:/home/likewise-open/PROMWAD/alexandr.kurkin/NetBeansProjects/HelloWs1/build/web/
/home/likewise-open/PROMWAD/alexandr.kurkin/NetBeansProjects/HelloWs1/nbproject/build-impl.xml:729: The module has not been deployed.
See the server log for details.
BUILD FAILED (total time: 44 seconds) 
```

Tomcat的日志没有错误。

部署在 build-impl.xml 中的这一行停止

```
<target if="netbeans.home" name="-run-deploy-nb">
    <nbdeploy clientUrlPart="${client.urlPart}" debugmode="false" forceRedeploy="${forceRedeploy}"/>
</target> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T08:53:54.480

*Netbeans*可以与外部*Tomcat*一起使用。但有时当您更改 netbeans 版本或*tomcat*版本时，配置文件会损坏（`build-impl.xml`）。所以不要重新安装*Netbeans*最简单的方法是创建一个新的干净项目并复制/粘贴源代码。我多次遇到这种错误（每次更新后至少有一个项目......）所以我认为它会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-25T10:35:48.287

您需要确保在 tomcat/conf/server.xml 中的 URIEncoding 是正确的。
NetBeans把context.xml放在C:\Users\your-name\AppData\Local\Temp中，所以如果你的名字是中文或者...，tomcat可能找不到context.xml，无法部署你的web-app。

```
<Connector port="8080" protocol="HTTP/1.1"
               URIEncoding="utf-8"
               connectionTimeout="20000"
               redirectPort="8443" /> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-04-27T10:56:17.583

您将不得不重新安装**NetBeans**。安装时，NetBeans 将向您显示 Glassfish 和 Tomcat 作为服务器选项。您必须选择 Tomcat 作为服务器。希望这能解决您的问题。
请注意，在 NetBeans 中从外部添加服务器有时会导致问题。

# azure - ERROR_AZURE_DRIVE_DEV_PATH_NOT_SET 是什么意思？

> ID：10332529
> 
> 赞同：2
> 
> 时间：2012-04-26T11:31:46.140
> 
> 标签：azure

我正在尝试按照此处的说明附加云驱动器[http://msdn.microsoft.com/en-us/library/gg466226.aspx#bk_Storage](http://msdn.microsoft.com/en-us/library/gg466226.aspx#bk_Storage)但我收到错误 ERROR_AZURE_DRIVE_DEV_PATH_NOT_SET ？

这是什么意思？我已经检查了我的配置三倍，看起来还可以。

我正在尝试将云驱动器连接到 VM 角色上的 Windows 服务中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T15:16:07.220

我发现来自[http://msdn.microsoft.com/en-us/library/gg466226.aspx#bk_Install](http://msdn.microsoft.com/en-us/library/gg466226.aspx#bk_Install)的 FixMSI.js 脚本失败了。由于某种原因 $(BuiltOutputPath) 是空的。我是相对于 $(ProjectDir) 做的。

然后它因另一个错误而失败（并且更早）。CloudDriveException 0x80070103。搜索这个给了我这篇文章，它基本上告诉我手动编辑 wa 微型端口的驱动程序 inf 文件。[http://msdn.microsoft.com/en-us/library/windowsazure/hh708321.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/hh708321.aspx)。

现在它连接好了。现在奇怪的是，当 vm 启动时设备有警告（但仅在托管在 azure 时），我必须手动进入 azure 上的 vm 并更新驱动程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T07:24:09.750

尝试将 BuiltOutputPath 更改为 BuildOutputPath。根据理查德的说法，这是文件中的一个错误。有关详细信息，请参阅文档中的社区内容部分。

# javascript - 在画布中缩放矩形

> ID：10332530
> 
> 赞同：0
> 
> 时间：2012-04-26T11:31:47.970
> 
> 标签：javascript, canvas

任何人请帮助我，我要疯了！

我已加载图像并将其绘制到画布元素上。在图像中有一个矩形。这个矩形标有两个红点。我想要做的是缩放矩形以填充整个图像。如果你去 [http://jsfiddle.net/arpo/v2Yrv/](http://jsfiddle.net/arpo/v2Yrv/) 你会明白我的意思。拖动顶部的滑块以查看红点如何从原始位置移到角落。这正是我希望它的行为方式。但我不能让矩形以这种线性方式缩放。相反，它呈弓形。：/

缩放是在函数 scalePain 中进行的。

任何人？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T16:29:54.760

这是您计算偏移量的正确方法

```
offx = topx - tx - topx * scale;
offy = topy - ty - topy * scale; 
```

请看你[更新的小提琴](http://jsfiddle.net/v2Yrv/1/)

# java - 如果文本包含回车，则 TreeItem 文本将换行

> ID：10332542
> 
> 赞同：0
> 
> 时间：2012-04-26T11:33:04.037
> 
> 标签：java, eclipse-plugin, swt, eclipse-rcp, jface

如果文本包含任何回车符（例如“Hello\r\n Hi”），则在将此文本设置为 TreeItem 作为节点项时，仅显示回车符之前的文本（例如“Hello”）。如果文本包含任何特殊字符，我不确定树数据绑定是否有任何限制。

这是 TreeItem 在回车符后截断文本的预定义行为吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:57:21.503

看看这个[SWT 片段](http://www.eclipse.org/swt/snippets/)：[表格示例片段：在表格项中绘制多行文本](http://git.eclipse.org/c/platform/eclipse.platform.swt.git/plain/examples/org.eclipse.swt.snippets/src/org/eclipse/swt/snippets/Snippet231.java)。虽然它适用于表格，但同样适用于树木。

# linux - Linux su 密码

> ID：10332544
> 
> 赞同：0
> 
> 时间：2012-04-26T11:33:14.700
> 
> 标签：linux, passwords, su

我想用 su 在一个命令行中更改用户

```
echo password | su user 
```

但这不起作用。还有其他可能吗？最良好的祝愿

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T11:39:32.623

首先：问问自己是否真的有必要让脚本知道密码。`sudo`SE-Linux 通常会为您提供很多选项来避免输入密码。

这就是说，`su`打开它的控制终端来读取密码，而不是标准输入。您可以使用`sudo`选项`-S`从标准输入读取密码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T11:42:46.453

来自`sudo`的手册：

```
-S

The -S (stdin) option causes sudo to read the password from the standard input instead of the terminal device. The password must be followed by a newline character. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T11:36:41.540

做以下..

passwd root 它会要求您输入新密码输入它然后您以管理员身份登录并执行您想要的操作

# java - 在java中截断浮点数和双精度数

> ID：10332546
> 
> 赞同：13
> 
> 时间：2012-04-26T11:33:33.157
> 
> 标签：java, floating-point, double, truncate

我想在java中截断一个浮点数和一个双精度值。

以下是我的要求： 1\. 如果我有 12.49688f，它应该打印为 12.49 不四舍五入 2\. 如果它是双精度 12.456，它应该打印为 12.45 不四舍五入 3\. 无论如何，如果值像12.0，它应该只打印为 12。

条件3要始终牢记。它应该与截断逻辑同时发生。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-26T11:51:19.363

试试这个-

```
DecimalFormat df = new DecimalFormat("##.##");
df.setRoundingMode(RoundingMode.DOWN);
System.out.println(df.format(12.49688f));
System.out.println(df.format(12.456));
System.out.println(df.format(12.0)); 
```

在这里，我们使用十进制格式化程序进行格式化。roundmode 设置为 DOWN，因此它不会自动舍入小数位。

预期结果是：

```
12.49
12.45
12 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-11T13:34:26.027

我在使用 Android 时遇到了同样的问题，您可以改用：

```
DecimalFormat df = new DecimalFormat("##.##");
df.setRoundingMode(RoundingMode.DOWN); 
```

但是对于这个 API 级别 9 是必需的。

另一个快速的解决方案是：

```
double number = 12.43543542;
int aux = (int)(number*100);//1243
double result = aux/100d;//12.43 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-01T18:46:01.057

```
double d = <some-value>;
System.out.println(String.format("%.2f", d - 0.005); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-26T11:40:12.883

看看`DecimalFormat()`：

```
DecimalFormat df = new DecimalFormat("#.##");
DecimalFormatSymbols dfs = new DecimalFormatSymbols();
dfs.setDecimalSeparator(',');
df.setDecimalFormatSymbols(dfs); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-26T11:37:28.373

查看`java.math.BigDecimal.round(MathContext).`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T11:47:01.107

尝试使用[DecimalFormat](http://docs.oracle.com/javase/6/docs/api/java/text/DecimalFormat.html)并设置[RoundingMode](http://docs.oracle.com/javase/6/docs/api/java/math/RoundingMode.html)以匹配您的需要。

# android - 文本视图没有通过处理程序获得更新

> ID：10332547
> 
> 赞同：0
> 
> 时间：2012-04-26T11:33:34.823
> 
> 标签：android, eclipse, handler

实际上，我设计了一个带有处理程序的单独 Timer 类，用于在 textview 上显示分钟和秒。这很好用，因为我已经对其进行了调试，并且处理程序将重新处理句柄，但文本视图没有得到更新，请在这方面帮助我。我将下面的代码标记为 Timer Class。提前致谢。

```
public class Timer
{
    private int _interval;
    public int getInterval()
    {
        return _interval;
    }
    public void setInterval(int delay)
    {
        _interval = delay;
    }
    private Handler handler;
    private Runnable _tickHandler;
    private Runnable delegate;
    private boolean ticking;
    public boolean getIsTicking()
    {
        return ticking;
    }
    public Timer(int interval)
    {
        _interval = interval;
        handler = new Handler();
    }
    public Timer(int interval, Runnable onTickHandler)
    {
        _interval = interval;
        setOnTickHandler(onTickHandler);
        handler = new Handler();
    }
    public void start(int interval, Runnable onTickHandler)
    {
        if (ticking) return;
        _interval = interval;
        setOnTickHandler(onTickHandler);
        handler.postDelayed(delegate, _interval);
        ticking = true;
    }
    public void start()
    {
        if (ticking) return;
        handler.postDelayed(delegate, _interval);
        ticking = true;
    }
    public void stop()
    {
        handler.removeCallbacks(delegate);
        ticking = false;
    }
    public void setOnTickHandler(Runnable onTickHandler)
    {
        if (onTickHandler == null)        return;
        _tickHandler = onTickHandler;
        delegate = new Runnable()
        {
            public void run()
            {
                if (_tickHandler == null) return;
                _tickHandler.run();
                handler.postDelayed(delegate, _interval);
            }
        }
        ;
    }
} 
```

下面是我用于更新文本视图的代码

```
Timer tmr = new Timer(100,new Runnable()
{
    public void run()
    {
        long millis = System.currentTimeMillis() - mStartTime;
        int seconds = (int) (millis / 1000);
        int minutes = seconds / 60;
        seconds    = seconds % 60;
        lblDevOnOff.setText("");
        lblDevOnOff.setText(String.format("%d:%02d", minutes,seconds));
    }
}
);
tmr.start(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:38:11.570

将此代码放入

`handler`或`runOnUIThread()`类似的东西

```
runOnUIThread(new Runnable(){

public void run(){

lblDevOnOff.setText("");
lblDevOnOff.setText(String.format("%d:%02d", minutes,seconds));
}
}) 
```

你应该这样做，因为与 UI 相关的任何东西都应该只在 UI 线程上运行......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:45:12.770

是的，这是来自[Android 开发指南](http://developer.android.com/guide/topics/fundamentals/processes-and-threads.html)：

> 因此，Android 的单线程模型只有两条规则：
> 
> *   不要阻塞 UI 线程
> *   不要从 UI 线程外部访问 Android UI 工具包

# c# - 在 .Net 2.0 中使用 .Net 4.0 UserControl

> ID：10332550
> 
> 赞同：0
> 
> 时间：2012-04-26T11:33:45.510
> 
> 标签：c#, webusercontrol

我在 .Net 4.0 App 中创建了一个 UserControl，现在我需要在 .Net 2.0 环境中的另一个 App 中使用该 UserControl。是否可以在 .Net 2.0 App (VS 2005) 中使用我的 UserControl？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-26T11:37:43.747

![在此处输入图像描述](../Images/415f8e36ab6fb07f8cdc506bdf9b6df1.png)

不能简单地在旧环境中使用 .NET 4。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T11:36:32.040

不，但是反过来，.net2 -> .net4

如果您没有使用 .net2 以上的任何功能，您可以使用 net2.0 作为目标平台重新编译。

# android - 如何正确配置 Horizo ntalScrollView 和 Scrollview？

> ID：10332554
> 
> 赞同：2
> 
> 时间：2012-04-26T11:33:58.180
> 
> 标签：android, android-layout, android-widget

我将 EditText 的 TableRow 插入到 tablelayout 中，这个 tablelayout 插入到一个 Scrollview 中，这个 Scrollview 插入到一个 Horizo​​ntalScrollView 中。Horizo​​ntalScrollView 还包含背景图像。问题是我无法正确滚动并显示所有 EditText。你能帮助我吗？

```
FrameLayout frameLayout = new FrameLayout(this);
frameLayout.setLayoutParams(new FrameLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
HorizontalScrollView HSC = new HorizontalScrollView(this); 
HSC.setLayoutParams(new FrameLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, Gravity.CENTER));
HSC.setBackgroundResource(R.drawable.lavagna);
ScrollView VSC = new ScrollView(this);
VSC.setLayoutParams(new FrameLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
TableLayout tableLayout = new TableLayout(this);
tableLayout.setLayoutParams(new FrameLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT));
values = new EditText[r][c];
for (int i = 0; i < r; i++){           
tableRow = new TableRow(this); 
tableRow.setGravity(Gravity.CENTER);
for (int j = 0; j < c; j++){
values[i][j] = new EditText(this);
values[i][j].setInputType(InputType.TYPE_CLASS_NUMBER | InputType.TYPE_NUMBER_FLAG_SIGNED | InputType.TYPE_NUMBER_FLAG_DECIMAL);
values[i][j].setHint("r: " + (i) + " " + "c: " + (j));
values[i][j].setPadding(10, 10, 10, 10);
tableRow.addView(values[i][j]);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:04:55.997

1.  删除`Gravity.CENTER`参数，否则滚动条将从其内容的中心滚动到足够大的位置。它在那里，但你无法得到它。
2.  纠正各种`values`

代码：

```
FrameLayout frameLayout = new FrameLayout(this);
frameLayout.setLayoutParams(new FrameLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT));
HorizontalScrollView HSC = new HorizontalScrollView(this);
HSC.setLayoutParams(new FrameLayout.LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, Gravity.CENTER));
HSC.setBackgroundResource(R.drawable.lavagna);        
ScrollView VSC = new ScrollView(this);
VSC.setLayoutParams(new FrameLayout.LayoutParams(LayoutParams.WRAP_CONTENT,             LayoutParams.WRAP_CONTENT));
TableLayout tableLayout = new TableLayout(this);
tableLayout.setLayoutParams(new FrameLayout.LayoutParams(LayoutParams.WRAP_CONTENT,     LayoutParams.WRAP_CONTENT));  
// you may or may not change here and below 
// values = new EditText[15][15];
for (int i = 0; i < 15; i++){           
    TableRow tableRow = new TableRow(this); 
    tableRow.setGravity(Gravity.CENTER);
    for (int j = 0; j < 15; j++){
        EditText value = new EditText(this);
        value.setInputType(InputType.TYPE_CLASS_NUMBER |     InputType.TYPE_NUMBER_FLAG_SIGNED | InputType.TYPE_NUMBER_FLAG_DECIMAL);
        value.setHint("r: " + (i) + " " + "c: " + (j));
        value.setPadding(10, 10, 10, 10);
        tableRow.addView(value);
    }
    tableLayout.addView(tableRow);
}
VSC.addView(tableLayout);
HSC.addView(VSC);
frameLayout.addView(HSC);
// ... add frameLayout
// ...
} 
```

# c++ - 如何在类成员函数中打印调用者对象名称？

> ID：10332555
> 
> 赞同：-3
> 
> 时间：2012-04-26T11:33:59.480
> 
> 标签：c++

看例子

```
 class MyClass {
    public:
    void fn() {
            // Here  I want to print caller object name,( here it is  ***it1***)
        }
    };

    int main() {
        MyClass it1;
        it1.fn();
        return 0;
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:17:14.443

实例的变量名不可用主要有两个原因：

1.  与被调用函数无关，因此无法访问。过程编程的重点*不是*通过形式参数以外的任何方式访问调用上下文。
2.  变量名对最终程序没有影响。无论您调用变量 it1、foo 还是匿名对待它，都不应该也不重要。

或者，简而言之：如果`fn()`是 const，你可以用一个临时的来调用它：

```
MyClass().fn(); 
```

那你的答案是什么？MyClass 对象的数组是什么？变量名决定调用哪些函数，而不是这些函数如何工作。

# java - 使用 Java WorldWind，但想要一个替代方案

> ID：10332559
> 
> 赞同：0
> 
> 时间：2012-04-26T11:34:01.610
> 
> 标签：java, image, worldwind

所以，我意识到这可能不是正确的网站，但我认为在 WorldWind 论坛上提问是不礼貌的。如果它应该在其他地方，请告诉我。

无论如何...

我有这个 Java 应用程序，它当前使用 WorldWind 来显示地球并放置与项目位置相对应的位图。WorldWind 最初被选为谷歌产品的替代品，因为它具有“3D”效果。但是，需求发生了变化，不再需要 3D Globe。（此外，WorldWind 对这个项目来说有点沉重——我们发现如果可能的话，我们真的只想要一个 2 色版本。）

我对大家的问题是：

作为 WorldWind 的替代品，您有什么建议？我正在寻找可缩放的“平面”地图（甚至只是世界的图像......），并且可以在其上分层对象（并且这些对象可以随时间移动）。

我在地图/图像编程方面做得并不多，所以请在回复时考虑到这一点:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T21:42:03.217

你检查[过 GeoTools](http://www.geotools.org/)吗？我相信它应该能够胜任您尝试做的事情，尽管像 WorldWind 一样，实际*内容*是对颜色等事物的贡献。查看[快速入门](http://docs.geotools.org/latest/userguide/tutorial/quickstart/index.html)，其中甚至包括一些示例 shapefile 内容，并提供了一个在地图框中显示 shapefile 内容的应用程序示例。不过，您可能不得不让您的手有点脏才能使用地理参考位图...

编辑：我也在谷歌上找到了这个：[JXMapViewer](http://today.java.net/pub/a/today/2007/10/30/building-maps-into-swing-app-with-jxmapviewer.html)

（仅作记录，WorldWind 有一个“ [FlatMap](http://builds.worldwind.arc.nasa.gov/worldwind-releases/1.2/docs/api/gov/nasa/worldwind/globes/EarthFlat.html) ”选项）

# c - valgrind (memcheck) 工具未检测到内存泄漏

> ID：10332561
> 
> 赞同：2
> 
> 时间：2012-04-26T11:34:03.560
> 
> 标签：c, valgrind

我用以下 C 代码介绍了内存错误：

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char** argv){
int i;
int *a = (int *)malloc(sizeof(int) * 10);
if (!a) return -1; /*malloc failed*/
for (i = 0; i < 11; i++){
  a[i] = i;
}

for (i = 0; i < 11; i++){
printf("a[%d] = %d\n",i ,a[i] );
}
// free(a);
return 0;
} 
```

memcheck 检测到错误 Invalid read/write 和肯定丢失，这是正确的和预期的。

现在，我将同一段代码添加到我的应用程序的共享对象文件 (.so) 中。此应用程序作为服务运行，并且是一个守护进程。它永远不会退出。我将 valgrind 应用于我的应用程序并调用了修改后的 '.so' 。

Memcheck 检测到无效的读/写错误，但尽管所有这些错误都在一种方法中，但并没有绝对丢失。我可以在让 memcheck 检测内存泄漏（肯定丢失）错误方面获得一些帮助吗？

在此先感谢， PV

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T11:38:01.680

valgrind 怎么知道你丢失了分配的内存？它可以在程序结束时看到内存没有被释放，但这是它可以为你做的一切。如果程序永远不会退出，valgrind 认为您以后可能仍想释放它。

即使 valgrind 会检查所有变量并尝试检测没有​​人指向您分配的内存的开头：以某种修改形式存储地址是完全合法的；例如，到真正开始之后的字节（想想 Pascal 字符串）。所以 valgrind 无法检测你的代码是否仍然知道分配的内存。因此，即使这样，valgrind 也无法帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:12:19.163

要真正让 valgrind 检测到泄漏，您必须将另一个值影响到`a`.

尝试添加：

```
a = NULL; 
```

在你的 for() 循环之后。

现在 valgrind 应该抱怨了！
它不会告诉你你“不可挽回地失去了”你的记忆，除非你忘记**了**它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-26T11:56:21.513

我认为你的意思是

```
for (i = 0; i < 10; i++) 
```

然而，最好放置一个

```
#define N 10 
```

或者

```
const int N = 10; 
```

在代码的开头，然后使用符号`N`而不是`10`.

# firefox - 跨域 Websocket 连接导致 NS_ERROR_DOM_SECURITY_ERR

> ID：10332564
> 
> 赞同：5
> 
> 时间：2012-04-26T11:34:28.110
> 
> 标签：firefox, websocket

我正在尝试从 trial.domain.com 连接到 server.domain.com 上的 websocket

Firefox 中的 NS_ERROR_DOM_SECURITY_ERR：

```
"[Exception... "Security error" code: "1000" nsresult: "0x805303e8 (NS_ERROR_DOM_SECURITY_ERR)" location: "https://trial.domain.com/home Line: 454"]" 
```

当我尝试建立 WebSocket 连接时：

```
try {
  if (window['MozWebSocket'] !== undefined) {
    socket = new MozWebSocket('ws://server.domain.com/chat');
  } else {
    socket = new WebSocket('ws://server.domain.com/chat');
  }
  trails = 0;
} catch(err){
  trials++;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T15:37:38.507

这由正在应用安全策略的浏览器发生，该安全策略阻止使用对页面自身托管的外部域的任何访问。
这发生在您尝试从 SSL 区域获取重要连接到非 SSL 和另一个域（不知道同一个域是否会解决问题）的情况下 - 这就是您的情况。但是还有更多可能的情况。

这是浏览器相关的错误，是浏览器抛出这个错误，自己连接没有问题。

您必须将 WebSockets 服务器托管在与 http 服务器相同的域下。如果这是不可能的，您可以采取以下几种方法：

1.  如果软件是供内部使用的，并且可以在浏览器中进行设置以供使用，那么您可以禁用跨域安全策略：
    *   Firefox，在“about:config”下将 s“ecurity.fileuri.strict_origin _policy”设置为“false”。
    *   Chrome，使用标志“--allow-file-access-from-files”运行
2.  如果您有权访问域的 DNS 设置，则可以创建子转发器，看起来您正在连接到同一个域。在练习中不确定这个选项，但它看起来不错。

# javascript - 如何使用 node.js 获取系统统计信息

> ID：10332565
> 
> 赞同：8
> 
> 时间：2012-04-26T11:34:32.430
> 
> 标签：javascript, linux, bash, node.js

我有一个分布式服务器系统。

有很多服务器，通过 PubSub 进行协调。它们都连接到统计服务器。每分钟服务器将其统计信息发送到统计服务器（处理了多少请求，平均时间等）。

所以......在这个统计消息中包含系统状态会很好。我需要 CPU 负载（每个内核）和可用内存量。

我做了一个小变通方法，决定用“exec”调用一个 linux 命令，解析答案并形成一个 JSON 数据进行发送。

但是我怎样才能从命令行获取这些数据呢？

在 Mac OS XI 上，可以使用 geektool 脚本轻松获得我需要的一切，但在 linux (debian) 上它们不起作用。

例如：

```
top -l 1 | awk '/PhysMem/ {print "Used: " $8 " Free: " $10}' 
```

在 Mac OS X Lion 上，我得到：

```
Used: 3246M Free: 848M 
```

只是debian中的一个错误......

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T12:12:58.303

在 Linux 上，您可以使用 /proc。[在这里](http://linuxgazette.net/115/nirendra.html)查看一堆命令行示例来读取统计信息。

[使用fs.readFile()](http://nodejs.org/docs/latest/api/fs.html#fs_fs_readfile_filename_encoding_callback)直接从 Node 读取文件会更好

*更新*：还有可能更好的[OS API 。](http://nodejs.org/api/os.html)用法示例：[将 Node.js 中 os.cpus() 的输出转换为百分比](https://stackoverflow.com/questions/9565912/convert-the-output-of-os-cpus-in-node-js-to-percentage)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2018-04-18T21:02:38.420

恕我直言，最好的选择是使用[系统信息](https://github.com/sebhildebrandt/systeminformation)模块，

通过 Linux、macOS、部分 Windows 和 FreeBSD 支持，您可以在其中检索详细的硬件、系统和操作系统信息。

例如获取 CPU 信息：

```
const si = require('systeminformation');

// callback style
si.cpu(function(data) {
    console.log('CPU-Information:');
    console.log(data);
});

// promises style - new in version 3
si.cpu()
    .then(data => console.log(data))
    .catch(error => console.error(error));

// full async / await example (node >= 7.6)
async function cpu() {
    try {
        const data = await si.cpu();
        console.log(data)
    } catch (e) {
        console.log(e)
    }
} 
```

此示例将产生以下结果：

```
{ manufacturer: 'Intel®',
    brand: 'Core™ i5-3317U',
    vendor: 'GenuineIntel',
    family: '6',
    model: '58',
    stepping: '9',
    revision: '',
    voltage: '',
    speed: '1.70',
    speedmin: '0.80',
    speedmax: '2.60',
    cores: 4,
    cache: { l1d: 32768, l1i: 32768, l2: 262144, l3: 3145728 } }
CPU-Information:
{ manufacturer: 'Intel®',
    brand: 'Core™ i5-3317U',
    vendor: 'GenuineIntel',
    family: '6',
    model: '58',
    stepping: '9',
    revision: '',
    voltage: '',
    speed: '1.70',
    speedmin: '0.80',
    speedmax: '2.60',
    cores: 4,
    cache: { l1d: 32768, l1i: 32768, l2: 262144, l3: 3145728 } } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-07T11:19:01.300

您可以尝试[os-usage](https://github.com/ningt/os-usage)，它是`top`命令的包装器。

它提供诸如 cpu 使用情况和内存使用情况等统计信息。示例用法：

```
var usage = require('os-usage');

// create an instance of CpuMonitor
var cpuMonitor = new usage.CpuMonitor();

// watch cpu usage overview
cpuMonitor.on('cpuUsage', function(data) {
    console.log(data);

    // { user: '9.33', sys: '56.0', idle: '34.66' }
});

// watch processes that use most cpu percentage
cpuMonitor.on('topCpuProcs', function(data) {
    console.log(data);

    // [ { pid: '21749', cpu: '0.0', command: 'top' },
    //  { pid: '21748', cpu: '0.0', command: 'node' },
    //  { pid: '21747', cpu: '0.0', command: 'node' },
    //  { pid: '21710', cpu: '0.0', command: 'com.apple.iCloud' },
    //  { pid: '21670', cpu: '0.0', command: 'LookupViewServic' } ]
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-15T05:53:11.843

无耻插件 - [https://www.npmjs.com/package/microstats](https://www.npmjs.com/package/microstats)

也可以配置为在磁盘空间、cpu 或内存超过用户定义的阈值时提醒用户。适用于 linux、macOS 和 windows。

# c++ - wcslen 是 ISO/IEC 14882:2003 C++ 标准库的一部分吗？

> ID：10332566
> 
> 赞同：2
> 
> 时间：2012-04-26T11:34:32.477
> 
> 标签：c++, windows, linux, 64-bit, strlen

在 Windows 下将 C++ 程序从 32 位移植到 64 位时，我意识到不支持 _tcslen，而应该使用 strlen/wcslen（用于非 unicode/unicode）。我开始怀疑

1.  如果 wcslen 是 ISO/IEC 14882:2003 C++ 标准库的一部分。我看到 g++ 和 VC++ 都支持这个函数。同样在[公开组](http://pubs.opengroup.org)中，我发现了一个参考说明，`The functionality described on this reference page is aligned with the ISO C standard`但没有提及它是 C89 还是 c99。
2.  _tcslen 是否与 Win64 不兼容？甚至[MSDN Link](http://msdn.microsoft.com/en-us/library/78zh94ax%28v=vs.100%29.aspx)也没有暗示任何事情。
3.  对于 Unicode，是否可以不经意地使用 wcslen 而不是 _tcslen？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T11:41:05.663

1.  是的。21.4 节中的表 48 给出`wcslen`了在 中声明的函数之一`<cwchar>`。
2.  `_tcslen`在进行 x64 构建时也可用。
3.  只要`_UNICODE`被定义然后`_tcslen`扩展为`wcslen`。通过使用您获得的唯一好处`_tcslen`是，*理论上*您可以通过拨动开关来构建应用程序的 ANSI 版本；*实际上*，您不会从中获得任何好处（2012 年的 ANSI 构建简直是残暴的恕我直言），并且需要实际工作才能使您的构建双向工作。我不会推荐它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T11:45:39.990

其他人已经回答了您的第一个问题（答案是“是”），所以我将回答其他两个问题：

2) _tcslen 与 Win64 完美兼容。

3)如果您处理一些值字符串（例如or ）但您没有定义，那么使用`wcslen`而不是是错误的。如果未定义，则扩展为so is - 不能传递给. 所以编译器会出错。`_tcslen``TCHAR``LPTSTR``LPCTSTR``_UNICODE``_UNICODE``TCHAR``char``LPTSTR``char*``wcslen`

有关_tcslen 扩展到什么的讨论，请参阅[MSDN 页面上 strlen/wcslen/...的备注部分。](http://msdn.microsoft.com/en-us/library/78zh94ax%28v=vs.80%29.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T11:41:10.383

ISO/IEC 14882:2003(E), Ch. 21，表 48，p。412.`wcslen()`确实是标准的一部分，由 提出`#include <cwchar>`。

该标准没有提及`tcslen()`或`_tcslen()`。这些似乎是 Microsoft 扩展。如果它们与您的目标平台不兼容并且标准中未提及，则最好坚持使用`wcslen()`.

参考：以下划线开头的符号通常代表实现细节。通过`tcslen`以下划线开头，您的工具链的开发人员可能会警告您，这`_tcslen()`可能会在未来的版本中消失。看来这正是发生在你身上的事情。

当我没有好的选择时，我也会偶尔使用下划线的功能；但是每当我更改工具链时，我都必须更新我的代码。因此，通常情况下，标准是最好的。

祝你好运。

# actionscript-3 - 如何在 Air Action Script 应用程序和 Node.js 服务器之间进行通信

> ID：10332567
> 
> 赞同：1
> 
> 时间：2012-04-26T11:34:32.820
> 
> 标签：actionscript-3, node.js, air

有人可以建议 Air(Action script) App 和 node.js 服务器之间的通信方式吗？

例如

1.  使用 AMFPHP 在 PHP 和 Flash(Action Script) 应用程序之间进行通信

2.  适用于 Java+Adobe Flex 和 Adob​​e Integrated Runtime (AIR) 的 BlazeDS

请将您的建议、任何教程或 PoC 示例代码发送给我

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T11:56:19.923

这是我为博客编写的示例。我认为代码本身几乎可以解释自己。

* * *

客户端 AS3 代码：

```
var urlString:String = "http://localhost:1337/"; 

function Submit():void
{
    var requestVars:URLVariables = new URLVariables();
    requestVars.Username = "guest";

    var request:URLRequest = new URLRequest();
    request.url = urlString;
    request.method = URLRequestMethod.GET;
    request.data = requestVars;

    var loader:URLLoader = new URLLoader();
    loader.dataFormat = URLLoaderDataFormat.TEXT;
    loader.addEventListener(Event.COMPLETE, loaderCompleteHandler);

    try { loader.load(request); }

    catch (error:Error) { // Handle Immediate Errors }
}

function loaderCompleteHandler(e:Event):void
{
    trace(e.target.data); // Response Text
} 
```

关于代码片段的简要说明：

*   我们通过将 URLVariables 类实例化为 **requestVars**来填充请求数据。
*   **我们通过将 URLRequest 类实例化为request**来填充 url & 方法。
*   我们附加一个加载完成事件处理程序来处理响应。
*   结束捕获错误，我们调用 load 方法。
*   URL 设置为将托管 nodeJS 的 Localhost 端口 1337。

*   变量集是在服务器脚本中检查的测试字段 UserName。

* * *

服务器端 NodeJS 代码：

```
var http = require('http'), url = require('url');

http.createServer(function (req, res) {

  res.writeHead(200, {'Content-Type': 'text/plain'});

  var urlObj = url.parse(req.url, true);

  if(urlObj.query["Username"] == "guest") res.end("True");    

  else res.end("False");    

}).listen(1337, "127.0.0.1");

console.log('Server running at http://127.0.0.1:1337/'); 
```

关于代码片段的简要说明：

*   该代码在托管它的 localhost 服务器中的端口 1337 处进行侦听。
*   查询字符串被解包以获取 UserName 变量并进行测试。
*   服务器以**true**响应，因为该值等于**guest**。

# javascript - 添加一行时无法阻止表单提交

> ID：10332568
> 
> 赞同：2
> 
> 时间：2012-04-26T11:34:37.903
> 
> 标签：javascript, jquery, forms

我堆积如山。我的代码无法阻止提交的默认操作。在我添加`this.doSomething();`.

为什么会发生这种情况？我必须使用 preventDefault 吗？

工作代码：http: [//jsfiddle.net/WwW5R/](http://jsfiddle.net/WwW5R/)

HTML：

```
<div id="container">
    <form action="" method="post" id="input">
            <input type="submit">
    </form>
</div> 
```

JavaScript：

```
$(function() {
    var ReserveUI = function($el) {
        this.$form = {
            input: $el.find('#input')
        };
        this._eventify();
    };

    ReserveUI.prototype.doSomething = function() {
        return false;
    }

    ReserveUI.prototype._eventify = function() {
        this.$form.input.submit(function() {
            this.doSomething(); //if comment out this line, it works
            return false;
        });
    };
    var UI = new ReserveUI($("#container"));
}); 
```

谢谢阅读：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:43:05.973

这是范围不匹配。

```
this.$form.input.submit(function() { //here "this" is ReserveUI
    this.doSomething(); //here "this" is input button
    return false;
}); 
```

并且由于没有`doSomething()`on`input`按钮，因此脚本会中断，因此不再执行 to 的部分`return false`。

这是您可以解决此问题的一种方法

```
ReserveUI.prototype._eventify = function() {
    var $this = this; //create a reference to the object
    this.$form.input.submit(function() {
        $this.doSomething(); //Now call the object method
        return false;
    });
}; 
```

### [演示](http://jsfiddle.net/WwW5R/11/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T11:36:38.030

在您的`submit`回调函数中，`this`不再指代您的对象，而是指元素本身。

因此，它会导致异常，因为该元素没有`doSomething`属性，并且您的`return false`被跳过。

相反，写这个：

```
ReserveUI.prototype._eventify = function() {
    var self = this;
    this.$form.input.submit(function(e) {
        e.preventDefault(); // cancels event even if subsequent lines fail
        self.doSomething();
    });
}; 
```

请参阅[http://jsfiddle.net/xgGGx/1/](http://jsfiddle.net/xgGGx/1/)的工作示例，该示例表明这只是导致错误的范围问题。

这就是脚本调试工具的用途 - 报告的错误应该使故障相当明显......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T11:37:40.057

听起来您的`doSomething`代码中有错误（我认为这不仅仅是`return false`在您的程序中）。

为了确保事件不会继续，即使有错误，也不要返回 false 而是使用`e.preventDefault()`：

```
 this.$form.input.submit(function(e) {
        e.preventDefault();
        this.doSomething();
    }); 
```

# xslt - 使用 XPath 生成 XPath

> ID：10332569
> 
> 赞同：1
> 
> 时间：2012-04-26T11:34:44.677
> 
> 标签：xslt, xpath

我有两种不同类型的 XML 文档（一种是`a.xml`，另一种是`b.xml`）。Document `a.xml`，是我的主要源文档，我必须在其上运行查询。文档`b.xml`包含所有可能的信息以从中获取记录`a.xml`。

**文件：«a.xml»**

```
<rs>
    <r id="r1">
        <f0>typeA</f0>
        <f1>contains value1, value2 and value3</f1>
    </r>
    <r id="r2">
        <f0>typeB</f0>
        <f1>contains value4 and value7</f1>
    </r>
    <r id="r3">
        <f0>typeA</f0>
        <f1>contains value2 and value5</f1>
    </r>
    <r id="r4">
        <f0>typeC</f0>
        <f1>contains value1 and value6</f1>
    </r>
    <r id="r5">
        <f0>typeA</f0>
        <f1>contains value5</f1>
    </r>
    <r id="r6">
        <f0>typeC</f0>
        <f1>contains value1, value2 and value3</f1>
    </r>
</rs> 
```

* * *

**文件：«b.xml»**

```
<?xml version="1.0"?>
<qs>
    <q id="q1">
        <i0>typeA</i0>
        <i1>value1|value2|value3</i1>
        <i2>value18|value35</i2>
        <i3>value1|value7</i3>
    </q>
    <q id="q2">
        <i0>typeB</i0>
        <i1>value2|value7</i1>
        <i2>value9|value20</i2>
        <i3>value4</i3>
    </q>
</qs> 
```

* * *

现在我喜欢根据要存储在 Document 中`XPath selector strings`的值生成动态。它看起来像： `b.xml``c.xml`

**文档`c.xml`**

```
<xps>
    <xp id="q1">
        <t1>/rs/r[contains(f0,'typeA') 
                and contains(f1,'value1') 
                and contains(f1,'value2') 
                and contains(f1,'value3')]</t1>
        <t2>/rs/r[contains(f0,'typeA') 
                and contains(f1,'value18') 
                and contains(f1,'value35')]</t2>
        <t3>/rs/r[contains(f0,'typeA') 
                and contains(f1,'value1') 
                and contains(f1,'value7')]</t3>
    </xp>
    <xp id="q2">
        <t1>/rs/r[contains(f0,'typeB') 
                and contains(f1,'value2') 
                and contains(f1,'value7')]</t1>
        <t2>/rs/r[contains(f0,'typeA') 
                and contains(f1,'value9') 
                and contains(f1,'value20')]</t2>
        <t3>/rs/r[contains(f0,'typeA') 
                and contains(f1,'value4')]</t3>
    </xp>
</xps> 
```

* * *

如果有人在这里有任何想法，如何在 XSLT 1.0 版中完成这项工作。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T05:57:23.040

这是 XSLT 1.0 中的一个解决方案：

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output method="xml" encoding="utf-8" indent="yes"/>

    <xsl:template match="@*|text()" />

    <xsl:template match="/">
        <xps>
            <xsl:apply-templates/>
        </xps>
    </xsl:template>

    <xsl:template match="q">
        <xp id="{@id}">
            <xsl:apply-templates/>
        </xp>
    </xsl:template>

    <xsl:template match="*[starts-with(name(), 'i')][not(self::i0)]">
        <xsl:element name="t{substring-after(name(), 'i')}">
            <xsl:text>/rs/r[contains(f0, '</xsl:text>
            <xsl:value-of select="preceding-sibling::i0"/>
            <xsl:text>')</xsl:text>
            <xsl:call-template name="more-conditions">
                <xsl:with-param name="list" select="."/>
            </xsl:call-template>
            <xsl:text>]</xsl:text>
        </xsl:element>
    </xsl:template>

    <xsl:template name="more-conditions">
        <xsl:param name="list"/>
        <xsl:param name="delimiter" select="'|'"/>

        <xsl:choose>
            <xsl:when test="contains($list, $delimiter)">
                <xsl:call-template name="more-conditions">
                    <xsl:with-param name="list" select="substring-before($list, $delimiter)"/>
                </xsl:call-template>
                <xsl:call-template name="more-conditions">
                    <xsl:with-param name="list" select="substring-after($list, $delimiter)"/>
                </xsl:call-template>
            </xsl:when>
            <xsl:otherwise>
                <xsl:text> and contains(f1, '</xsl:text>
                <xsl:value-of select="$list"/>
                <xsl:text>')</xsl:text>
            </xsl:otherwise>
        </xsl:choose>
    </xsl:template>

</xsl:stylesheet> 
```

应用于您的输入文档，它会产生以下输出：

```
<xps>
    <xp id="q1">
        <t1>/rs/r[contains(f0, 'typeA') and contains(f1, 'value1') and contains(f1, 'value2') and contains(f1, 'value3')]</t1>
        <t2>/rs/r[contains(f0, 'typeA') and contains(f1, 'value18') and contains(f1, 'value35')]</t2>
        <t3>/rs/r[contains(f0, 'typeA') and contains(f1, 'value1') and contains(f1, 'value7')]</t3>
    </xp>
    <xp id="q2">
        <t1>/rs/r[contains(f0, 'typeB') and contains(f1, 'value2') and contains(f1, 'value7')]</t1>
        <t2>/rs/r[contains(f0, 'typeB') and contains(f1, 'value9') and contains(f1, 'value20')]</t2>
        <t3>/rs/r[contains(f0, 'typeB') and contains(f1, 'value4')]</t3>
    </xp>
</xps> 
```

我添加了一些空格。您可以根据需要修改转换，但这应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:58:23.343

在 xslt 版本 1 中，您不能将变量用作 xpath 选择器，但是您可能有其他方法可以完成此任务。如果您提供问题的想法而不是您的预期解决方案，人们可​​能会提供帮助:)

# android - Android 平板电脑上的 C/C++ 应用程序

> ID：10332578
> 
> 赞同：1
> 
> 时间：2012-04-26T11:35:37.087
> 
> 标签：android, c, adb, cross-compiling

我正在将一个程序从 Ubuntu 移植到 android。在尝试实际移植之前，我编写了一个简单的 helloworld.c 并使用 arm Linux 交叉编译器 (arm-linux-gnueabi-gcc) 对其进行编译。我成功编译它，并使用 adb push 命令将它推入我的平板电脑到 /data 目录。使用 adb shell，我可以朗姆酒并且效果很好。如何使用平板电脑中的其他应用程序显示我的 helloworld？我应该把它推到哪里让平板电脑将其视为一个应用程序并与其他应用程序一起显示？或者我应该使用另一个 adb 命令还是其他什么？谢谢你的帮助！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:39:22.397

下载 android [NDK](http://developer.android.com/sdk/ndk/index.html)并查看示例文件夹

# backbone.js - 在视图类中丢失主干这个上下文

> ID：10332579
> 
> 赞同：2
> 
> 时间：2012-04-26T11:35:40.260
> 
> 标签：backbone.js, scope, this

我`this`在渲染嵌套视图时遇到了上下文丢失的问题。这是我的代码：

```
Workflow.Views.Wall = Backbone.View.extend({
  tagName:    'div',
  id:         'wall',
  className:  'row-fluid span12',

  initialize: function() {
    _.bindAll(this, 'render');
    this.model.view = this;
  },

  render: function() {
    this.model.stages.each(this.renderStage);
    return this;
  },

  renderStage: function(model) {
    var stageView = new Workflow.Views.Stage({ model: model });
    //this is DOMWindow
    this.$el.append(stageView.el);
  }
}); 
```

所以一堵“墙”有很多“阶段”。在我的 renderStage 函数中，`this`是 DOMWindow。

有人看到我的错误吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T01:49:16.943

您需要将您的`renderStage`方法绑定到`Workflow.Views.Wall`视图...基本上这样您就有了正确的`this`上下文。

```
initialize: function() {
  _.bindAll(this, 'render', 'renderStage');
  this.model.view = this;
} 
```

或者，您可以只调用`_.bindAll`不带方法参数的方法，这将自动绑定`this`到*所有*方法：

```
_.bindAll(this); 
```

如需进一步阅读，请参阅[了解 Backbone 中的 bind 和 bindAll](http://blog.bigbinary.com/2011/08/18/understanding-bind-and-bindall-in-backbone.html)。另请参阅[_.bindAll](http://documentcloud.github.com/underscore/#bindAll)的文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T12:55:39.787

您的问题是您在我猜是 jQuery each() 函数中使用它。“this”指的是舞台，而不是视图。一个简单的解决方法是将此行添加到您的渲染方法的开头：

```
var that = this; 
```

然后在你的 each() 函数中使用“那个”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T21:51:36.217

如果 stage 是一个集合，或者更确切地说， each 方法来自下划线，则需要将上下文作为第二个参数传递：

```
this.model.stages.each(this.renderStage, this); 
```

# solr - 除了在 Solr Delta Imports 中修改数据库表之外，还有其他方法吗？

> ID：10332584
> 
> 赞同：1
> 
> 时间：2012-04-26T11:35:55.010
> 
> 标签：solr

我需要在 Solr 中进行增量导入，但不想更改底层数据库结构。

所以，我的问题是，Solr 是否有足够的智能来检测修改后的数据本身并重建而不是使用`delta-query`and来告诉它`delta-import-query`？( `cons. : Time consuming??`)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T18:07:53.577

是的 solr 具有此功能，只需在查询中使用 ${dataimporter.last_index_time} 变量，solr 只会更新最近修改的数据

# ruby - 文本变量的子字符串

> ID：10332586
> 
> 赞同：0
> 
> 时间：2012-04-26T11:35:59.263
> 
> 标签：ruby

我在变量中有一个字符串`text`。如果我这样做，`text[0 .. 29]`我会得到前 30 个字符。如果我想要我不知道长度的字符串的最后一部分怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T11:40:11.867

使用`test[-30..-1]`文档：[http ://www.ruby-doc.org/core-1.9.3/String.html#method-i-5B-5D](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-5B-5D)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T11:40:31.350

如果您有 activesupport/rails，您还可以将字符数传递给`last`.

```
text.last(30) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T11:45:13.790

使用负索引：

```
a = "qwertyuiop"
a[-3..-1]
"iop" 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T12:52:38.843

使用`test[30..-1]`，这对我来说比`test[-30,-1]`

# c# - ExecuteScalar 返回 null

> ID：10332598
> 
> 赞同：1
> 
> 时间：2012-04-26T11:36:45.427
> 
> 标签：c#, asp.net, sql, transactions

我有一个使用事务的 sql 查询，它使用 return 来指示失败或成功，如下所示：

```
BEGIN

    DECLARE @intErrorCode INT;
    DECLARE @emailAutoIncrement INT;

    BEGIN TRAN

    INSERT  INTO Accounts ( blabla, blabla2 )
    VALUES  ( somevalue, somevalue2 )

    Select @intErrorCode = @@ERROR
    if (@intErrorCode <> 0) GOTO PROBLEM

    COMMIT TRAN
    RETURN 1

    PROBLEM:
    if (@intErrorCode <> 0) Begin
    Rollback Tran
    RETURN 0
    END

END 
```

从代码中，我曾经`sqlCommand.ExecuteScalar()`认为这会给我 1 或 0，但这总是返回 false。另外，我遇​​到的另一个问题是，当 sql 中发生异常并且程序要返回 0 时，它实际上返回了异常。

所以它`RETURN 0`是无用的，因为它总是被异常覆盖？

要添加更多信息，sql 查询是一个存储过程，它的调用方式如下：

```
 myCommand.CommandText = "createAccount";
                myCommand.CommandType = CommandType.StoredProcedure;
                //Add parameters here
                using (myReader)
                {
                    var test = myCommand.ExecuteScalar();
                } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T11:53:03.267

尝试`SELECT`而不是`RETURN`

```
BEGIN

    DECLARE @intErrorCode INT;
    DECLARE @emailAutoIncrement INT;

    BEGIN TRAN

    INSERT  INTO Accounts ( blabla, blabla2 )
    VALUES  ( somevalue, somevalue2 )

    SET @intErrorCode = @@ERROR
    if (@intErrorCode <> 0) GOTO PROBLEM

    COMMIT TRAN
    SELECT 1

    PROBLEM:
    if (@intErrorCode <> 0) Begin
    Rollback Tran
    SELECT 0
    END

END 
```

我也变了

```
SELECT @intErrorCode = @@ERROR 
```

至

```
SET @intErrorCode = @@ERROR 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T11:53:00.987

尝试使用 Select 1 而不是 Return 1

对于 MSSQL 中的第二个问题，建议使用 try catch 块。

这是我用的，不知道是不是最佳实践，但它允许更多可能性，可以记录错误，自定义消息文本

```
BEGIN TRY...
END TRY
BEGIN CATCH
    declare @ErrorMessage nvarchar(4000),@ErrorSeverity int,@ErrorState int
    select @ErrorMessage = ERROR_MESSAGE(),@ErrorSeverity = ERROR_SEVERITY(),@ErrorState=ERROR_STATE()
    set @ErrorState=case when isnull(@ErrorState,0) <1 then 1 else @ErrorState end  
    raiserror (@ErrorMessage, @ErrorSeverity, @ErrorState);
END CATCH 
```

# java - 更改 GridLayout 的宽度

> ID：10332608
> 
> 赞同：8
> 
> 时间：2012-04-26T11:37:41.233
> 
> 标签：java, swing, layout, grid-layout

我为我的 JPanel 使用了 GridLayout 并且想知道是否可以更改列的宽度：

```
GridLayout grid = new GridLayout(5,2);
panel.setLayout(grid); 
```

有简单的方法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T11:42:28.940

检查 GridLayout api 以查看网格是否已制作，因此所有单元格的大小相同。如果您希望组件以它的首选大小显示，例如 (15,15)，请将其添加到 JPanel 并将 JPanel 添加到 GridLayout。JPanel 将扩展以填充网格单元并允许组件以它的首选大小显示。

对于不同大小的行，您将不得不尝试其他方法。嵌套布局将是一个很好的起点......

你总是可以使用可怕的 GridBagLayout。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T11:57:45.760

您可以为每列使用单独的网格布局。

```
GridLayout grid = new GridLayout(1,2); 
    GridLayout grid1 = new GridLayout(5,1);
        GridLayout grid2 = new GridLayout(5,1);

        grid.add(grid1);
        grid.add(grid2); 
```

您现在可以设置 grid1 one 和 grid2 的宽度。

# apache-flex - flex中与jsp中的destroy()类似的方法？

> ID：10332610
> 
> 赞同：0
> 
> 时间：2012-04-26T11:37:44.677
> 
> 标签：apache-flex, flex3

flex 3中是否有与jsp中的destroy()方法相同的东西？单击注销按钮后，我想破坏页面的初始化并在再次登录后重新初始化它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:07:59.793

我不知道您所说的“页面”是什么意思，但在 Flex 中，垃圾收集是自动的，您不需要显式调用它，您只需要确保对对象的所有引用都已删除并将其设置为 null。您当然可以为应用程序中的一次性元素实现自己的逻辑并在那里进行清理（在删除对象之前删除所有事件侦听器和其他引用）。

# oracle - 如何设计一个处理当前员工和预测员工的数据模型？

> ID：10332611
> 
> 赞同：1
> 
> 时间：2012-04-26T11:37:55.797
> 
> 标签：oracle, database-design

我们正在创建一个应用程序来管理员工。员工可以是当前员工或未来将加入的员工（预测）。

除了管理员工外，我们还必须每月管理预测。

假设今天是四月，

截至 4 月 26 日，当前员工人数为 100。

今天，我预计 8 月将有 10 人加入。20 将于 11 月加入。

当我说我预测时，我实际上会在系统中添加 10 和 20 名员工。我可能有也可能没有完整的信息。我什至可能没有名字，因为他们还没有被雇用。但我只是预测，8 月将有 10 名员工，11 月将有 20 名员工，与 4 月一样。

假设中间没有更多的离开者或加入者。到 8 月底，我的员工人数将达到 110 人，到 11 月底将达到 130 人。

所以，8 月的 110 和 11 月的 130 是我对 4 月份的预测。

现在，在 5 月，我知道 8 月加入的不是 10 名，只有 5 名加入，11 月加入的不是 20 名，而是 25 名，另外我们将在 12 月解雇 10 名现有员工。

因此，我的员工人数预计在 5 月份将是 8 月的 105 人、11 月的 130 人和 12 月的 120 人。

因此，我需要按月保存员工数据，即我在 4 月对未来每个月的预测，即从 5 月到 12 月。

再说一次，我对 8 月到 12 月的预测是什么。

等等。

我还需要记住，现有员工的数据可能每分钟都在不断变化。

他们的头衔可能会改变，地址可能会改变，部门等。

因此，如果员工 A 在 4 月在 D1 部门，在 4 月之后在 D2 部门。

当我提取 4 月的报告时，它应该显示我为 D1，当我提取 6 月的报告时，它应该显示我他的部门为 D2。

请帮忙。

* * *

[在上一个问题](https://stackoverflow.com/q/10331265/146325)中有一些额外的背景。

编辑 ：

请看下图。

我想知道每个后续月份中 3 月份（月份 = 3 月份）预测的员工人数，即月份 = 3 月份，3 月份的人数 = 400，4 月份的人数 = 405。

括号中的数字显示将在该月加入的新员工，例如 (+10) 和 (-5) 表示该月离职的员工。因此，如果 3 月份员工总数为 400 人，4 月份有 10 人加入，5 人离职，那么 4 月份的总人数将是 405 人。

![在此处输入图像描述](../Images/c3ff2d0ae5b65cc32ae8a0ed7b2f44cc.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T12:22:32.693

我可以看到您需要两个表的几个原因：

*   真实员工必须有姓名、部门等，而预测员工可能只有这些属性
*   会有只有真正的员工才能承担的职责，因此您希望能够单独引用它们

但同时您要确保两个表之间的 ID 没有冲突，因为（希望）预测员工将成为实际员工。

这样做的方法是实现一个超类型/子类型结构。因此，您有一个表 EMPLOYEES 保证单个主键，以及两个用于实际和预测员工的依赖表。类型列的使用至关重要，因为它确保给定的员工只出现在一个子表中。

```
create table employees
    ( emp_id number not null
      , emp_type varchar2(8) not null
      , constraint emp_pk primary key (emp_id)
      , constraint emp_uk unique (emp_id, emp_type)
      , constraint emp_type_ck check (emp_type in ('FORECAST', 'ACTUAL'));

create table actual_employees
    ( emp_id number not null
      , emp_type varchar2(8) not null
      , name varchar2(30) not null
      , deptno number(2,0) not null
      , sal number(7,2) not null
      , hiredate date not null
      , constraint actemp_pk primary key (emp_id)
      , constraint actemp_type_ck check (emp_type = 'ACTUAL')
      , constraint actemp_emp_fk foreign key (emp_id, emp_type)
                   references emp (emp_id, emp_type) 
                   deferrable initially deferred ;

create table forecast_employees
    ( emp_id number not null
      , emp_type varchar2(8) not null
      , name varchar2(30) 
      , deptno number(2,0) 
      , sal number(7,2) 
      , predicted_joining_date date
      , constraint foremp_pk primary key (emp_id)
      , constraint foremp_type_ck check (emp_type = 'FORECAST')
      , constraint foremp_emp_fk foreign key (emp_id, emp_type)
                   references emp (emp_id, emp_type) 
                   deferrable initially deferred ; 
```

所以键可能看起来有点奇怪。父表同时具有主键和复合唯一键。主键保证 EMP_ID 的单个实例。唯一键允许我们在引用 EMP_ID 和 EMP_TYPE 的子表上构建外键。结合对子 t 的检查约束这是因为它们引用父表上的唯一键而不是其主键。这种安排能够确保员工可以在 FORECAST_EMPLOYEES 或 ACTUAL_EMPLOYEES 中，但不能同时在两者中。

外键是可延迟的，以允许将预测员工转换为实际员工。这需要三个活动：

1.  从 FORECAST_EMPLOYEES 中删除记录
2.  将记录插入 ACTUAL_EMPLOYEES
3.  更改 EMPLOYEES 中的 EMP_TYPE（但*不是*EMP_ID）。

使用延迟约束同步操作 2 和 3 更容易。

另外，请注意引用 EMPLOYEES 的其他外键约束应该使用主键而不是唯一键。如果关系关心员工的类型，那么它可能应该链接到子表。

* * *

> “有点头疼”

欢迎来到数据建模的世界。这是一个很大的头痛。因为试图将混乱的现实融入一个干净的数据模型是很*困难*的：你需要明确的要求才能让它正确，并且了解最重要的事情，这样你才能做出明智的妥协。

我根据您的另一个问题提出了一种超类型/子类型方法，因为这似乎是处理两组数据的最佳方法：真实员工和名义员工。我认为这两个群体需要区别对待。例如，我会坚持认为经理是真正的雇员。这很容易通过针对 ACTUAL_EMPLOYEES 的完整性约束来实现，而使用包含两种类型员工的单个表则更难实现。

肯定有两个表意味着在同步它们的结构方面可能会产生更多的工作。所以呢？这在很大程度上是微不足道的，因为编写两个 ALTER TABLE 语句的工作量几乎不比一个多。此外，新列很可能仅适用于实际员工，对预测员工没有意义（例如 EARNED_COMMISSION、LAST_REVIEW_RATING）。鉴于此，拥有单独的表格会使数据模型更加准确。

正如 Ollie 所指出的，关于必须复制依赖表，这是一种误解。适用于所有员工的表，无论其实际情况如何，都应该引用 EMPLOYEES 表而不是其子表。

最后我不明白为什么用两张表比一张表更难维护历史数据。大多数日志代码应该完全从数据字典中生成。

* * *

> “如果我有 Employee 表和 Employee_forecast 表……”

共有*三个*表：

*   EMPLOYEES - 保证唯一 EMP_ID 的主表
*   ACTUAL_EMPLOYEES - 为贵公司工作的人员的子表
*   FORECAST_EMPLOYEES - 您希望招募到贵公司的人员的子表

> “......他们的产品或活动都将存储在一个产品/活动表中？”

请记住，我是根据您提供的少量细节对您的业务逻辑做出假设。

现在在我看来，尚未为贵公司工作的人不应该有任何相关活动。在这种情况下，您将拥有一个表 EMPLOYEE_ACTIVITIES，它是 ACTUAL_EMPLOYEES 的子表。

但也许你确实为不存在的人提供活动。所以这里有一个选择：一张还是两张？单表设计将 EMPLOYEE_TASKS 作为主 EMPLOYEES 表的子表。这两个表设计分别将 ACTUAL_EMPLOYEE_TASKS 和 FORECAST_EMPLOYEE_TASKS 作为 ACTUAL_EMPLOYEES 和 FORECAST_EMPLOYEES 表的子表。

哪种设计是正确的取决于您是否需要强制执行有关任务分配的规则。例如，您的公司可能有一条规则，规定只有真人才能雇用新员工。因此，拥有一个只允许将招聘任务分配给 ACTUAL_EMPLOYEES 的模型会很有用。

* * *

> “这个设计没有考虑月度预测”

好的，我已将日期列添加到两个表中。这将允许您运行所需的报告。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T12:25:43.113

我认为您的数据模型将取决于您需要报告的信息。例如，我倾向于拥有标准`EMPLOYEE`和`DEPARTMENT`表（如 Oracle 默认`SCOTT`模式）。

我还将有一个状态列，您可以在其中表示员工是当前员工或潜在员工，从而允许您报告当前雇用和预测雇用。您可以根据员工的状态等围绕需要哪些列添加功能约束/业务规则，因此当前员工将拥有全名、出生日期等，而潜在员工可能没有。

然后，我还将创建一个审计表来跟踪`EMPLOYEE`记录所经历的更改。这将允许您追溯查找他们的部门更改以及记录员工何时从潜在员工更改为当前员工等，以及对`EMPLOYEE`记录中其他数据的任何更改。
它还具有将所有数据保存在一个位置的优势。`EMPLOYEE`如果需要，您还可以考虑使用状态列对表进行分区。

这将使您受益于在您申请中的各个就业阶段的整个过程中只向每位员工颁发一个 ID。

状态栏的另一个好处是，您可以随后根据需要介绍员工可能经历的任何其他阶段。

**编辑：**

这也将确保如果您需要在将来添加列，如您所提到的，您只需要支持一个表结构。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T11:45:23.633

这是我会做的： Employee 和 Department 表是典型的，但 emp 表中没有 dept_id 有一个 emp_dept 表来表示员工和部门之间的多对多，并具有关系的生效日期或生效日期范围。对于perspective_employees，我推荐一个单独的表，其中包含日期，然后在您需要该信息时与员工表联合。

在这里很难得到真正的详细信息，但我希望你能理解我所说的基础知识。

问候，罗杰

# perl - 需要有关使用 Perl Curses::UI、TUI 等基于控制台的 UI 的更多信息

> ID：10332618
> 
> 赞同：0
> 
> 时间：2012-04-26T11:38:12.547
> 
> 标签：perl, templates, tui

我正在寻找开发基于控制台的 UI，我将 Perl Curses::UI、基于文本的 TUI 视为可能的选项。粗略地说，我需要管理员选择 [ from known options ] 并在此 UI 中输入 mkfs 和挂载选项，然后实际挂载 FS。

我正在寻找一个 UI - 这将更容易和流行的开发和测试 - 有一些 DTL 可用于从模板文件（XML/html 等）加载小部件

任何更多信息、指针和经验都会有所帮助。谢谢，-维克兰特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T10:22:16.247

您可能还想看看我的[`Tickit`](http://metacpan.org/module/Tickit)发行版。

与许多 GUI 系统一样，它基于高级小部件。

还有一些正在进行的工作，[`Tickit::Builder`](http://metacpan.org/module/Tickit%3a%3aBuilder)以便能够从描述文件中动态加载 UI 定义，可能存储在 XML/YAML/JSON/等中...

# ios - 我们可以为 iPad web App 添加两个 css 文件吗

> ID：10332622
> 
> 赞同：0
> 
> 时间：2012-04-26T11:38:27.367
> 
> 标签：ios, ipad, html

我有一个网络应用程序，我希望它应该实现两个 css 文件，如果它在浏览器上运行，那么它应该运行 css1，如果从 ipad 的主桌面脱机运行，那么它应该使用 css2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:50:49.707

我将我的答案削减为两个，第一部分将检测是否在 iPad 或 iPhone 上运行，第二部分将调用不同的 CSS 文件

第 1 部分 - 检测是否在 iOS 设备上运行

```
-(NSString *)isRunningOniOS
{
    NSString *yourDevice = nil;
    if (UI_USER_INTERFACE_IDIOM() == UIUserInterfaceIdiomPad) {
       yourDevice = @"iPad";
    } else {
       yourDevice = @"iPhone";
    }
    return yourDevice;
} 
```

您可以通过在类中的任何位置运行以下代码来测试它，例如：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    //
    NSLog(@"Your device = %@",[self isRunningOniOS]);
} 
```

第 2 部分 - 自定义 CSS

基于第 1 部分，我们现在可以这样做：

```
NSLog(@"Your device = %@",[self isRunningOniOS]);
    NSString *cssPath;
    if ([self isRunningOniOS]){
        cssPath = [[NSBundle mainBundle] pathForResource:@"iosCSSfile" ofType:@"css"];
    } else {
        cssPath = [[NSBundle mainBundle] pathForResource:@"browserCSSfile" ofType:@"css"];    
    }
    NSLog(@"CSS file= %@",cssPath); 
```

# c# - WCF 自定义编码器中 XMLWriter 生成的 XML 生成命名空间冲突

> ID：10332623
> 
> 赞同：1
> 
> 时间：2012-04-26T11:38:33.367
> 
> 标签：c#, xml, wcf, soap, xml-namespaces

我在我的 WCF 应用程序中使用自定义编码器来写出 SOAP 消息 XML。`textMessageEncoding`当我使用WCF 中内置的默认 XML时，这很好，但是当我使用自定义编码器时，我遇到了命名空间的问题 - 下面的**xmlns:a**标记（在元素和元素中）为两个不同的命名空间定义了两次，这解析时导致服务端出现问题

```
<s:Envelope xmlns:a="http://www.w3.org/2005/08/addressing" xmlns:u="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" xmlns:s="http://schemas.xmlsoap.org/soap/envelope/">
  <s:Header>
    <Action a:mustUnderstand="1" u:Id="_3" xmlns="http://www.w3.org/2005/08/addressing" **xmlns:a="http://schemas.xmlsoap.org/soap/envelope/"**></Action>
    <MessageID u:Id="_4" xmlns="http://www.w3.org/2005/08/addressing">
      <!--Omitted-->
    </MessageID>
    <ActivityId CorrelationId="1" xmlns="http://schemas.microsoft.com/2004/09/ServiceModel/Diagnostics">
      <!--Omitted-->
    </ActivityId> 
```

关于如何解决这个问题的任何想法？我`XmlWriter`在自定义编码器中使用 C# 来编写 XML，这似乎是导致问题的原因。

另外，我如何让上面`XmlWriter`的标签使用前缀，而不是为每个声明使用 xmlns -`<Action>``<a:Action>`

```
<Action a:mustUnderstand="1" u:Id="_3" xmlns="http://www.w3.org/2005/08/addressing" 
```

这是我的 XmlWriterSettings

```
XmlWriterSettings writerSettings = new XmlWriterSettings();
writerSettings.Encoding = Encoding.GetEncoding(factory.CharSet);
writerSettings.OmitXmlDeclaration = true;
writerSettings.NamespaceHandling = NamespaceHandling.OmitDuplicates; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T08:47:57.323

通过使用 a`XmlDictionaryWriter`而不是`XmlWriter`. 幸运的是，我使用的是 Utf-8 编码并且可以选择这样做

# linux - 获取 IPv6 配置状态

> ID：10332624
> 
> 赞同：0
> 
> 时间：2012-04-26T11:38:37.033
> 
> 标签：linux, networking, ipv6

我正在编写一些代码来返回我的 IPv6 配置的状态。是否有我可以调用的 linux 系统脚本（或 C/C++ 函数）来返回我的 IPv6 的状态。例如，自动、手动或 DHCPv6 之类的东西将是 3 种可能的状态。必须有一些标志来确定这一点。我一直在看

```
ip -f inet6 addr show eth0 scope global | grep inet6 
```

尽管范围表示动态，但这是可能响应更改 ipv6 conf 的标志而更改。它输出

```
inet6 <ipv6 addr> scope global deprecated dynamic 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:42:49.177

如果您的目标是确定接口是手动配置、使用自动配置还是使用 DHCP……您将无法从接口获取该信息。通常，接口不知道它是*如何*配置的；该信息被编码在系统的网络配置中。

例如，使用 DHCP 的系统从 DHCP 服务器获取租约，然后调用`ifconfig`或`ip`配置接口。这与手动配置接口没有*区别*。

在 RedHat-ish 系统下，您可以查看`/etc/sysconfig/network-scripts`该信息。`ifcfg-*`包含一系列定义配置的 shell 变量的文件。例如，`/etc/sysconfig/network-scripts/ifcfg-em1`在我的系统上包含：

```
IPV6INIT=yes
IPV6_AUTOCONF=yes 
```

在 Debian-ish 系统下，您可以在`/etc/network/interfaces`.

# dll - 如何让 Umbraco 5 忽略捆绑的（使用检查）Lucene.NET

> ID：10332625
> 
> 赞同：1
> 
> 时间：2012-04-26T11:38:38.590
> 
> 标签：dll, web-config, lucene.net, umbraco, umbraco5

我在 Umbraco 5 中使用了从未使用过的 Lucene.NET 版本，但我意识到它与 Umbraco 5 中包含的 Examine 捆绑的版本相冲突（请参阅[C#：Could not load types from assembly](https://stackoverflow.com/questions/10297961/c-could-not-load-types-from-assembly)）。

我不只是从 \App_Plugins 目录中删除 Examine 和过时的 Lucene.NET 库，**而是对快乐的共存感兴趣，Examine 使用我的新版本 Lucene.NET**。

我尝试将它添加到 web.config，但仍然使用过时的 Lucene.NET 库：

```
<dependentAssembly>
    <assemblyIdentity name="Lucene.Net" publicKeyToken="85089178b9ac3181" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-2.9.4.1" newVersion="2.9.4.1" />
</dependentAssembly> 
```

Lucene.NET 的新版本是 2.9.4.1。

删除旧捆绑的 Lucene.NET 库会导致错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-18T20:59:34.830

你让这个工作了吗？

我过去曾尝试升级[Examine](http://examine.codeplex.com/)并遇到相同的错误，导致我最终放弃并重新安装适当的默认 Umbraco。我相信您不能只升级库，因为它与 UmbracoExamine 紧密耦合以使其与 Umbraco 一起使用。如果你升级了检查 DLL，你会得到错误。

现在可以通过启用缓存并使用 umbraco.uQuery 命名空间来快速执行大部分搜索。我们实际上的目标是寻找其他搜索提供商，例如 Redis，为 Umbraco 制作一个快速、有效的搜索层。这种非关系型/NoSQL 数据库/键对值对于这样的搜索非常有效，并且很自然地完成了数据库索引器 Examine 必须通过代码执行的操作。Examine 无缘无故停止索引的情况并不少见。对于商业项目来说，这不是一个好的情况，所以我建议探索替代方案。

**摘要**：重新安装或自己烘焙

# c# - 在 UDP 服务器中接收数据包时连接重置

> ID：10332630
> 
> 赞同：6
> 
> 时间：2012-04-26T11:38:48.310
> 
> 标签：c#, .net, sockets, asynchronous

我正在开发一个每秒需要处理数千个 UDP 数据包的服务器应用程序（C#、.NET 4.0）。所以我决定`SocketAsyncEventArg`实现服务器。

我面临的问题是我的实现只收到一个数据包，然后我收到“ConnectionReset”错误（我从没想过我会收到这个错误，因为 UDP 是无连接的）。这是我的测试实现：

```
using System;
using System.Net;
using System.Net.Sockets;

static class Program
{
    static void Main(string[] args)
    {
        UdpEchoServer.Start();

        while (true)
        {
            Console.ReadLine();
            SendPacket();
        }
    }

    static void SendPacket()
    {
        Console.WriteLine("SendPacket");
        var c = new UdpClient();
        c.Send(new byte[5], 5, new IPEndPoint(IPAddress.Parse("127.0.0.1"), 445));
        c.Close();
    }
}

static class UdpEchoServer
{
    static Socket mSocket;
    static byte[] mBuffer;
    static SocketAsyncEventArgs mRxArgs, mTxArgs;
    static IPEndPoint mAnyEndPoint, mLocalEndPoint;

    public static void Start()
    {
        mAnyEndPoint = new IPEndPoint(IPAddress.Any, 0);
        mLocalEndPoint = new IPEndPoint(IPAddress.Any, 445);

        mBuffer = new byte[1024];

        mRxArgs = new SocketAsyncEventArgs();
        mTxArgs = new SocketAsyncEventArgs();

        mRxArgs.Completed += ReceiveComplete;
        mTxArgs.Completed += SendComplete;

        mSocket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);
        mSocket.Bind(mLocalEndPoint);
        ReceiveNext();
    }

    static void ReceiveNext()
    {
        Console.WriteLine("ReceiveNext");

        mRxArgs.RemoteEndPoint = mAnyEndPoint;
        mRxArgs.SetBuffer(mBuffer, 0, mBuffer.Length);

        if (!mSocket.ReceiveFromAsync(mRxArgs))
            Console.WriteLine("Error in ReceiveNext: " + mRxArgs.SocketError);
    }

    static void ReceiveComplete(object sender, SocketAsyncEventArgs e)
    {
        Console.WriteLine("Receive Complete: " + mRxArgs.SocketError);

        if (mRxArgs.SocketError != SocketError.Success)
            return;

        mTxArgs.SetBuffer(mBuffer, 0, mRxArgs.BytesTransferred);
        mTxArgs.RemoteEndPoint = mRxArgs.RemoteEndPoint;

        Console.WriteLine("Sending reply packet");

        if (!mSocket.SendToAsync(mTxArgs))
            Console.WriteLine("Error in ReceiveComplete: " + mRxArgs.SocketError);
    }

    static void SendComplete(object sender, SocketAsyncEventArgs e)
    {
        Console.WriteLine("Send Complete: " + mTxArgs.SocketError);

        if (mTxArgs.SocketError != SocketError.Success)
            return;

        ReceiveNext();
    }
} 
```

抱歉，代码很长，但它真的很简单。我等待一个数据包，回复远程端点，然后等待下一个。这是输出：

```
ReceiveNext

SendPacket
Receive Complete: Success
Sending reply packet
Send Complete: Success
ReceiveNext
Error in ReceiveNext: ConnectionReset 
```

请你能建议上面的代码片段有什么问题吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-26T16:49:48.943

这发生在 UDP 套接字上。您需要做的就是在绑定之前更改[套接字操作模式。](http://msdn.microsoft.com/en-us/library/ms145152.aspx)`Start`在您的方法中使用此代码。

```
mSocket = new Socket(AddressFamily.InterNetwork, SocketType.Dgram, ProtocolType.Udp);

const int SIO_UDP_CONNRESET = -1744830452;
byte[] inValue = new byte[] {0};
byte[] outValue = new byte[] {0};
mSocket.IOControl(SIO_UDP_CONNRESET, inValue, outValue);

mSocket.Bind(mLocalEndPoint); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T12:43:05.250

如果您删除或注释掉对 的调用，`Close`则`UdpClient`程序按预期工作。为什么会发生这种情况我不确定，但这可能与 Windows 环回网络有关。

# asp.net - 是否可以在同一个项目上运行 3.5 ASP.NET Web 表单和 MVC 3.0

> ID：10332631
> 
> 赞同：3
> 
> 时间：2012-04-26T11:38:51.010
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3

我们有一个 .net 3.5 webform 公司网站，并且正在升级到 MVC 4.0。由于这是大型网站，我们要一点一点地升级。

谁能建议是否有可能实现上述目标，即在一个 Web 项目中同时运行 ASP.NET WEbForm 和 MVC？还是有更好的方法来解决这个问题？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T12:22:09.573

您是否查看过 Scott Hanselman 的这篇[博文？](http://www.hanselman.com/blog/PlugInHybridsASPNETWebFormsAndASPMVCAndASPNETDynamicDataSideBySide.aspx)由于您正在谈论 .net 3.5 Web 表单和 MVC 4.0，您可能需要将应用程序池运行时设置为 4.0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:17:58.837

我没有任何实际经验可以分享，但我已经阅读（或被告知）这是可能的。使用的示例是像您这样的案例，即拥有大型代码库并希望逐步迁移到 MVC。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T12:24:48.257

可以在同一个项目中同时运行 MVC 和 Webforms。

# java - JBoss 6 中实例之间的共享属性文件

> ID：10332632
> 
> 赞同：1
> 
> 时间：2012-04-26T11:38:54.113
> 
> 标签：java, jakarta-ee, jboss, jboss6.x

我遇到过这个问题。我们在 JBoss 6.1 上部署了几个 Java EE 应用程序实例，我希望在这些实例之间共享属性文件。

当我将此文件放在`conf`当前运行实例中的文件夹下时，我可以通过加载它， `Thread.currentThread().getContextClassLoader().getResource(FILE).openStream()`但我无法让它从不同的文件夹运行（我尝试了所有，最小和标准）。我想有一个简单的解决方案，但我没有看到。

感谢您的任何建议。

PS我知道我可以用`JNDI`或环境变量做类似的事情，但我真的很想使用这种方法。文件也应该是只读的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:16:38.450

尝试为 conf dir 分配别名，然后在其余实例中，您可以通过`Thread.currentThread().getContextClassLoader().getResource(FILE).openStream()` FILE 中通过别名引用的位置加载它

# magento - 如何在magento adminhtml中编辑产品详细信息页面html

> ID：10332638
> 
> 赞同：2
> 
> 时间：2012-04-26T11:39:08.230
> 
> 标签：magento

我想解决一个问题：

如何在magento adminhtml中编辑产品详细信息页面html

我想在产品信息中插入产品 ID（不可编辑）值 --> 常规选项卡 --> 就在名称上方。

我已经搜索了我的 magento adminhtml 核心代码 phtml 并在 google 中进行了搜索，但没有找到如何在名称上方添加实体 ID。在这里搜索超过 15 个文件后，我很累。

如果有人帮助我，我会非常高兴，我会做这项工作。谢谢大家。 ![添加产品编号](../Images/50bcea0335ee8fac3af85642ef5b279b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T16:08:10.210

您可以通过编辑为后端打开模板路径提示：

```
app/code/core/Mage/Core/etc/system.xml 
```

近 483 行是模板路径提示的定义，设置如下：

```
<show_in_default>1</show_in_default> 
```

然后在后端打开提示并重新加载后端页面。

该文件是：

```
app/default/adminhtml/default/default/template/widget/form/renderer/fieldset.phtml 
```

如果你跟着兔子洞走，你最终会到达：

```
app/design/adminhtml/default/default/template/catalog/product/edit.phtml 
```

你可以在表单的顶部放一些东西，因为表单的其余部分是用 javascript 构建的，兔子洞还在继续。当然，您可能希望通过在模块中执行此操作以正确的方式执行此操作，但是为了快速和肮脏，就可以了。

# ios - iOS 测试成功，但未运行

> ID：10332639
> 
> 赞同：2
> 
> 时间：2012-04-26T11:39:13.253
> 
> 标签：ios, unit-testing, sentestingkit

我在测试目标中有几个 SenTestCase 子类（逻辑测试），测试方法中有 STFail 宏。当我第一次创建项目时（选中“包含单元测试”），我通过 Xcode 添加了测试目标。

当我运行我的测试时，我得到一个微调器，说它们正在运行，并且它们成功了，但它们显然没有运行（或者它们会失败）。

我的测试方案配置看起来不错，我的每个测试都显示在那里并被检查。

我的测试类的形式是`<CustomName>Tests`，每个测试方法的形式是：`- (void)test<MyTestName>`。我的所有课程都已添加到测试目标中。

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:34:15.210

就我而言，问题如下：

自从创建项目以来，我已经重命名了我的应用程序的主要目标。我不得不将它与测试目标相协调，但适当地更改“Bundle Loader”设置，用新目标名称替换旧目标名称。

有点随机，但确实存在。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:56:20.717

请在您的问题中提供更多信息。你不会给汽车修理店发短信说“我的车打不开，为什么打不开？”

您的测试可能无法运行的原因有很多。

您是使用 Xcode 助手（add-file-wizard）还是手动添加它们？在每种情况下，都有一些必须做的事情。

一个小清单...

类名必须以 Test 结尾。测试方法必须从测试开始。您是否将它们添加为应用程序或逻辑测试类型？- 它们是不同的。您是否将它们添加到测试目标？

（我删除了一个过时的 SO 链接的链接 - 我想我保存了错误的链接）

很高兴看到您解决了您的问题......以及提供完整上下文的另一个原因:-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-20T15:08:38.927

我遇到了同样的问题，但是在替换了所有出现的旧项目名称后它仍然没有工作。但是，重置 iOS 模拟器对我有用：

`"iOS Simulator" > "Reset Content and Settings..."`在 iOS 模拟器菜单中。

# javascript - Facebook OAuth 对话框弹出被阻止

> ID：10332642
> 
> 赞同：0
> 
> 时间：2012-04-26T11:39:19.403
> 
> 标签：javascript, facebook, oauth

所以这是我的另一个问题，已经给出了解决方案，但没有给出答案。

真的很简单。我想在页面上显示 OAuth 对话框。此页面既可以是 Facebook 选项卡，也可以是独立的。我寻找答案的大多数地方都说`FB.login()`必须调用该函数以响应用户操作，例如“单击按钮”等；否则，您可能会遇到浏览器阻止 OAuth 对话框弹出窗口的风险。这正是我正在做的。然而...

如果“单击”事件处理程序只是通过属性值或 AttachEvent 或您使用的任何内容（我使用 jQuery.bind()）附加到按钮/任何内容，则无法保证在单击 FB 时API是满载的，因为大家都推荐异步加载。这就是为什么在加载 API 的代码中，我触发了一个事件，在该事件的处理程序中，我实际上绑定了“按钮”“单击”处理程序。然后，当用户单击“按钮”时，自然会触发事件，执行处理程序，打开 OAuth 对话框......并阻止。请。任何人。我究竟做错了什么？请注意，我*正在*寻找解决方案。但是，我仍然需要通过对话框（而不是重定向）来执行此操作，并且我仍然需要异步加载 API。这是一些代码...

就在之前`</head>`：

```
window.fbAsyncInit = function () {
        FB.init({
            "status":true,
            "cookie":true,
            "xfbml":true,
            oauth:true,
            "appId":"12345678987654321"
        });
    FB.Canvas.setAutoGrow();
    jQuery(document).trigger("fb-ready");
};

(function (d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if(d.getElementById(id)) {return;}
    js = d.createElement(s)
    js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1&appId=398161863536524";
    fjs.parentNode.insertBefore(js, fjs);
}(document, "script", "facebook-jssdk")) 
```

紧随其后的`</div>`是要点击的：

```
jQuery(document).bind("fb-ready", function() {
    jQuery("#btn-do-that-stuff").bind("click", function() {
        if( !FB ) { return false; }
        FB.login();
    });
}); 
```

提前感谢大家，他们解释了这一点，同时也很有意义。再次感谢大家，谁可以告诉我如何解决这个问题，尊重上述标准。

# java - GAE:javax.sound.sampled.AudioInputStream 不受 Google App Engine 的 Java 运行时环境支持

> ID：10332647
> 
> 赞同：-1
> 
> 时间：2012-04-26T11:39:32.077
> 
> 标签：java, google-app-engine

我正在尝试使用 Google App Engine 中的以下代码在 Java 中运行声音文件：

```
 @UiHandler("btnRecite")
void btnRecite(ClickEvent event) throws Exception{
     URL soundFile =new URL( "http://everyayah.com/data/Ghamadi_40kbps/audhubillah.mp3");
      AudioInputStream ais = AudioSystem.getAudioInputStream(soundFile);
      AudioPlayer.player.start(ais);
} 
```

我得到了这个例外

```
 GAE:javax.sound.sampled.AudioInputStream is not supported by Google App Engine's Java runtime environment 
```

任何想法可能是什么原因

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T11:42:16.380

不想轻率，我想这是因为，如错误所述，AppEngine Java 环境不支持此功能。

在服务器上播放声音没有任何意义。你为什么想做这个？招待服务器托管人员？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:16:17.340

除了@Sam Holder 告诉你的以外，`main(..)`Web 应用程序中没有任何方法。它特定于控制台和桌面应用程序。

# ruby - 将 Ruby 字符串转换为具有默认值的整数

> ID：10332650
> 
> 赞同：6
> 
> 时间：2012-04-26T11:39:51.057
> 
> 标签：ruby, integer, type-conversion

是否有一个 Ruby 方法接受一个字符串和一个默认值，如果字符串表示整数，则将其转换为整数，否则返回默认值？

**更新** 我认为以下答案更可取：

```
class String
  def try_to_i(default = nil)
    /^\d+$/ === self ? to_i : default
  end
end 
```

以下是为什么您应该避免异常的证据：

```
> def time; t = Time.now; yield; Time.now - t end

> time { 1000000.times { |i| ('_' << i.to_s) =~ /\d+/ } }
=> 1.3491532 
> time { 1000000.times { |i| Integer.new('_' << i.to_s) rescue nil } }
=> 27.190596426 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T11:44:51.450

有`#to_i`和`Integer()`转换。第一个默认值为 0，第二个引发 ArgumentError。

```
class String
  def to_integer(default)
    Integer(self)
  rescue ArgumentError
    default
  end
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T11:44:08.900

您必须自己编写代码，可能使用正则表达式来检查字符串：

```
def try_to_i(str, default = nil)
  str =~ /^-?\d+$/ ? str.to_i : default
end 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-26T11:46:38.733

你可以这样做：

```
int_value = (stringVar.match(/^(\d+)$/) && $1.to_i) || default_value 
```

这将查看字符串是否完全由数字组成，如果是，则转换为 int，或返回您的默认值。

# mysql - 连接多个表？

> ID：10332651
> 
> 赞同：0
> 
> 时间：2012-04-26T11:39:52.473
> 
> 标签：mysql, join

受[这篇文章](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)的启发，我尝试从我们的数据库中优化成员列表的导出功能。

原始查询如下所示：

```
-- First query
SELECT
    *
FROM
    members_customer_id_0000000169
WHERE
    deleted = '0000-00-00 00:00:00'

-- Second query run for every result from first query
SELECT
    stores.external_store_id AS local_store_id
FROM
    regions,
    stores,
    stores_reference_members_customer_id_0000000169
WHERE
    regions.customer_id = 169
AND
    stores.region_id = regions.id
AND
    stores_reference_members_customer_id_0000000169.member_id =' . $result['id'] . '
AND
    stores_reference_members_customer_id_0000000169.store_id = stores.id 
```

第一个查询返回 180k 行，其性能不高，第二个查询获取所有 180k 次。

我尝试这样做：

```
SELECT
    members_customer_id_0000000169.*,
    stores.external_store_id AS local_store_id
FROM
    members_customer_id_0000000169
LEFT JOIN
    stores_reference_members_customer_id_0000000169
ON
    stores_reference_members_customer_id_0000000169.member_id = members_customer_id_0000000169.id
JOIN
    regions
JOIN
    stores
WHERE
    members_customer_id_0000000169.deleted = '0000-00-00 00:00:00'
AND
    regions.customer_id = 169
AND
    stores.region_id = regions.id
AND
    stores_reference_members_customer_id_0000000169.store_id = stores.id 
```

结果只有 140k 行。原因可能是我没有`local_store_id`按照我的意图获得成员。而且我不确定问题是什么。

由于有许多表和 WHERE 子句，我确信我在连接上做错了，但我只有在两个表之间进行 LEFT/RIGHT 连接的经验。

任何人都可以识别问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:47:49.797

每个 JOIN 操作都应该有一个对应的 ON 语句来告诉 SQL 如何合并新表中的记录。似乎您正在 WHERE 语句中执行某些逻辑，这可能会导致问题。

此外，就获取没有 local_store_id 的成员而言，这可能是因为您正在对商店进行内部联接，因此您的结果集仅包含根据您的联接逻辑在商店中具有相应行的成员。左外连接可能会为您提供所需的内容。

# c# - 如何以编程方式更改谷歌网站翻译器中的语言？

> ID：10332652
> 
> 赞同：2
> 
> 时间：2012-04-26T11:39:54.097
> 
> 标签：c#, javascript, html, translation, google-translate

我正在使用谷歌网站翻译脚本。它工作得很好。我想为国家添加标志并在单击其中一个标志时更改所选语言。我可以更改组合语言列表的选定值，但无法触发匿名页面事件处理程序以重新加载新选择的语言。如何做到这一点？谢谢

下面的两个代码块可以粘贴到任何 html 网站页面中进行测试。

工作谷歌脚本。

```
<div id="google_translate_element">
</div>
<script>
 function googleTranslateElementInit() {
    new google.translate.TranslateElement({
         pageLanguage: 'en',
         includedLanguages: 'zh-CN,nl,en,fr,de,ja,ko,es,th,cy',
         autoDisplay: false,
         layout: google.translate.TranslateElement.InlineLayout.HORIZONTAL
     }, 'google_translate_element');
 }
</script>
<script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script> 
```

我手动选择语言的附加代码。

```
<a href="Javascript:updateCombobox('fr')"  id="hlfrench"  onclick="" >French</a>

<script language="Javascript">
    function updateCombobox(newValue) {
        var lang_dropdown = document.getElementById(':0.targetLanguage').firstChild;
        lang_dropdown.value = newValue;
    }
</script> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-04T22:21:06.683

可以在这里找到解决方案：http: [//davidwalsh.name/google-translate-api](http://davidwalsh.name/google-translate-api)

基本上，您需要以当前语言、tolanguage 调用此传递，并在调用完成时进行回调，以便您可以更新所需的任何元素。

google.language.translate(translateDiv.get("html"),lang,toLang,callback);

# javascript - 从 JSON 对象中仅读取日期或仅一天时间

> ID：10332653
> 
> 赞同：-1
> 
> 时间：2012-04-26T11:39:58.393
> 
> 标签：javascript, sql, jsonp

我有一个 javascript 代码，它从我的服务器读取数据表作为 JSON 对象，显然我被困在读取 dateTime 对象（即我的数据库中的 dateTime 变量）；

当我阅读它时，输出为 dd/mm/yyyy AM 12:00:00；我想从中删除 AM 12:00:00 部分，我该怎么做？

同样在我的下一个要求中，我只想要一天时间，即保留 AM 12:00 部分并删除其他所有内容....请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:54:16.320

```
dt = "26/04/2012 AM 12:00;"
d= dt.replace(/ [AP]M \d\d:\d\d;/i,'')   // "26/04/2012"
t= dt.replace(/\d\d\/\d\d\/\d\d\d\d /i,'') // "AM 12:00;" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-27T09:14:28.713

我终于找到了答案，我只是使用了 substr ie (26/04/2012 AM 12:00).substr(0,10)///output:26/04/2012...这太愚蠢了...并且这种格式在 javascript 日期变量中被接受：D

# linq - LINQ：如何使嵌套的 select 语句有条件？

> ID：10332662
> 
> 赞同：1
> 
> 时间：2012-04-26T11:40:34.973
> 
> 标签：linq, select, include, where

我正在使用 EF 处理 ASP.NET 项目，但在查找正确查询时遇到了一些麻烦。我需要在没有延迟加载的情况下工作。

我有以下数据结构：模块包含页面。Page 包含 PageItem。PageItem 包含一个项目。一个项目可以包含其他项目。

首先忽略包含项目的项目的递归方面，我需要一个查询来将单个模块的结构提供给树视图。

我想要的是：

*   具有给定 ID 的模块
    *   包括所有页面
        *   包括所有 PageItem
            *   包括 ParentItem_ID == 0 的所有项目
                *   包括所有 ChildItems

我从这个开始：

```
return base._entities.Modules
            .Include(m => m.Paginas
                .Select(p => p.PaginaItems
                    .Select(pi => pi.Item)
                    .Select(i => i.ChildItems)))
            .Where(m => m.Module_ID == id)
            .FirstOrDefault(); 
```

此查询有效，但它忽略了项目层次结构并将所有项目显示为页面的直接子项。实际需要的是这样的：

```
return base._entities.Modules
           .Include(m => m.Paginas
               .Select(p => p.PaginaItems
                   .Select(pi => pi.Item)
                   .Where(i => i.I_ParentItem_ID == 0)
                   .Select(i => i.ChildItems)))
           .Where(m => m.Module_ID == id)
           .FirstOrDefault(); 
```

但它不起作用。

我是一个相对较新的 LINQ，任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T17:45:40.683

当您需要嵌套集合中的条件时，您应该使用[`join`](http://msdn.microsoft.com/en-us/library/bb311040.aspx)，例如：

```
(from mod in c.Modules
join pag in c.Paginas on mod.Module_Id equals pag.Module_Id
join pi in c.PaginaItems on pag.Pagina_Id equals pi.Pagina_Id
join item in c.Items.Where(i => i.I_ParentItem_ID == 0) on pi.PaginaItem_Id
    equals item.PaginaItem_Id
join ci in c.ChildItems on item.I_ParentItem_ID equals ci.I_ParentItem_ID
select mod).FirstOrDefault() 
```

我缩写`base._entities`为`c`（为了上下文）并对 Id 名称做了一些假设，并且可能忽略了奇怪的语法错误，但这应该是一个好的开始。

# c# - 在 C# 中用 javascript 覆盖菜单 css

> ID：10332665
> 
> 赞同：2
> 
> 时间：2012-04-26T11:40:42.193
> 
> 标签：c#, javascript, asp.net, css

我正在使用 C# 创建一个网站，供驾车者使用智能手机支付停车费。但是，我的菜单有一些问题。我希望菜单是白色的黑色文本，当前页面需要是蓝色的白色文本，但是当我尝试使用 css 这样做时，我得到了完全不同的东西：当前页面菜单项仍然是白色的黑色文本在它后面你会看到一点蓝色。有人知道我该如何解决这个问题吗？

我的菜单项在母版页中：

```
<div id="menu">
    <ul>
         <li id="accountmenu"><a href="PersoonlijkeGegevens.aspx">Mijn account</a></li>
         <li id="parkeermenu"><a href="Parkeer.aspx">Parkeer</a></li>
         <li id="saldomenu"><a href="SaldoGegevens.aspx">Mijn saldo</a></li>
    </ul>
</div> 
```

我在每个页面中添加带有 JavaScript 的当前页面类：

```
<script type="text/javascript">
    $(document).ready(function () {
        $("#saldomenu").addClass("currentpage");
    });
</script> 
```

最后我将 css 设置在母版页的 css 文件中

```
#menu ul li a:link, a:visited
{    
    background:#fff;
    display:inline-block;
    padding:5px 10px 6px;
    color:#000;
    font-size:16px;
    text-decoration:none;
    -moz-border-radius:6px;
    -webkit-border-radius:6px;
    -moz-box-shadow:0 1px 3px rgba(0,0,0,0.6);
    -webkit-box-shadow:0 1px 3px rgba(0,0,0,0.6);
    border-bottom:1px solid rgba(0,0,0,0.25);
    position:relative;
    cursor:pointer;
}

.currentpage
{
    background:#172c7d;
    color:#fff;    
} 
```

我真的不知道我在这里做错了什么，我一直在寻找 2 周的正确答案。可以请有人帮我解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T11:59:26.163

您需要使 currentpage 类更具体。您的 currentpage 类仅影响 li 元素而不影响链接。

```
#menu ul li.currentpage a:link, #menu ul li.currentpage a:visited
{
    background:#172c7d;
    color:#fff;    
} 
```

# python - 雪豹上的 SQLite 最大查询参数不同？

> ID：10332668
> 
> 赞同：5
> 
> 时间：2012-04-26T11:41:07.093
> 
> 标签：python, parameters, sqlite

这是一个小问题，但我有点难过。

sqlite 对查询参数的数量有 999 个硬限制。这是在不属于公共头文件的标头中设置的，运行时使您能够降低限制，但不超过硬限制。Snow Leopard（显然还有 Lion）上的 Python sqlite3 模块允许比这更多的参数，但是，我无法弄清楚这是怎么可能的。

我考虑了 Python 包装器自己进行参数替换并将完整语句传递给 sqlite3 的可能性；但据我从源代码中可以看出，这并没有发生。我还考虑了在 Snow Leopard 上实现 sqlite3 是从稍微不同的源代码编译而来的可能性；但事实证明，Apple 发布了其开源修改（请参阅[http://opensource.apple.com/source/SQLite/SQLite-74.11/](http://opensource.apple.com/source/SQLite/SQLite-74.11/)），并且其源中的参数限制与默认值相同。

如果有人知道这可能是如何发生的（我确信它正在发生；我已经创建了带有 2000 个参数的语句并且它们工作正常），请插话。不管它的价值是什么，我遇到了这个奇怪的事情，因为相同的由于参数限制，Windows 上的代码中断。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-12T15:47:43.387

在构建完整的 SQLite (C) 源代码时，预处理器定义

```
SQLITE_MAX_VARIABLE_NUMBER 
```

控制“语句变量”的最大数量，默认值为 999。

更多信息可以在这里找到：[https ://sqlite.org/limits.html](https://sqlite.org/limits.html)

我会假设 python 绑定使用更高数量的 SQLite 自定义构建。

* * *

（关于 999 个参数的强制性说明绰绰有余，而且您正在做一些奇怪的事情 - 或不寻常的事情。考虑发布您的用例，如果有关于合理数量的参数的建议。）

# python - 错误列表中的 Django UnicodeEncodeError

> ID：10332674
> 
> 赞同：0
> 
> 时间：2012-04-26T11:41:20.920
> 
> 标签：python, django, unicode

如果我的错误列表项之一是 unicode，我在渲染 Django 的 ErrorList 时遇到问题。当 Django 呈现我的错误列表时

```
{{ form.non_field_errors }} 
```

[它运行以下代码](https://github.com/django/django/blob/1.3.1/django/forms/util.py#L46)：

```
class ErrorList(list, StrAndUnicode):
    """
    A collection of errors that knows how to display itself in various formats.
    """
    def __unicode__(self):
        return self.as_ul()

    def as_ul(self):
        if not self: return u''
        return mark_safe(u'<ul class="errorlist">%s</ul>'
                % ''.join([u'<li>%s</li>' % conditional_escape(force_unicode(e)) for e in self])) 
```

然后在[`force_unicode`](https://github.com/django/django/blob/1.3.1/django/utils/encoding.py#L74)：

```
s = unicode(str(s), encoding, errors) 
```

然后翻译成[`lazy`](https://github.com/django/django/blob/1.3.1/django/utils/functional.py#L209)：

```
def __str_cast(self):
    return str(self.__func(*self.__args, **self.__kw)) 
```

问题是我的字符串包含 'å' 符号和`str(u'å')`raises `UnicodeEncodeError`。是否有充分的理由`force_unicode`不`lazy`使用`smart_str`？我必须自己做，并以`str`对象而不是 unicode 的形式提供错误消息才能使其工作。

所以我得到 TemplateSyntaxError *Caught UnicodeEncodeError while rendering: 'ascii' codec can't encode character u'\xe5' in position 17: ordinal not in range(128)*。这似乎说明渲染我的错误列表项（即`u'å'`）导致第一个 UnicodeEncodeError 具有 unicode 消息*'ascii' 编解码器无法编码字符 u'\xe5'*，然后是第二个 UnicodeEncodeError ，同时从第一个渲染消息。我弄错了吗？

Django 版本：1.3.1（但这似乎也发生在 1.4 中）

完整追溯：[https ://raw.github.com/gist/2499077/ba60cb752acdb429dd6c2814ffb24272037a367a/UnicodeEncodeError.txt](https://raw.github.com/gist/2499077/ba60cb752acdb429dd6c2814ffb24272037a367a/UnicodeEncodeError.txt)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:56:22.107

您可以`non_field_errors`使用包含标记或`{% include %}`. 它不是直接的解决方案，但它解决了问题并且更灵活。

# c++ - opencv匹配器错误分配+不正确的库依赖？

> ID：10332675
> 
> 赞同：1
> 
> 时间：2012-04-26T11:41:22.520
> 
> 标签：c++, visual-studio-2010, opencv

我一直在尝试使用蛮力匹配器在两个图像上匹配一些特征，这是完整的代码：

```
#include <opencv2/imgproc/imgproc.hpp>
#include <opencv2/core/core.hpp>
#include <opencv2/highgui/highgui.hpp>
#include <opencv2/features2d/features2d.hpp>
#include <opencv2/calib3d/calib3d.hpp>
#include <opencv2/objdetect/objdetect.hpp>
#include <vector>
#include<iostream>

int main()
{

    cv::Ptr<IplImage> img  = cvLoadImage("img.jpg",1);
    cv::Ptr<IplImage> img1 = cvLoadImage("img1.jpg",1);

    cv::Mat image(img,false);
    cv::Mat image1(img1,false);

    cv::resize(image,image,cv::Size(image.cols/5,image.rows/7));
    cv::resize(image1,image1,cv::Size(image1.cols/5,image1.rows/7));

    cv::waitKey(0);

    std::vector<cv::KeyPoint> keypoints;
    std::vector<cv::KeyPoint> keypoints1;

    cv::SurfFeatureDetector surf(20000);

    surf.detect(image,keypoints);
    surf.detect(image1,keypoints1);

    cv::drawKeypoints(image,keypoints,image,cv::Scalar(0,0,255),cv::DrawMatchesFlags::DRAW_RICH_KEYPOINTS);
    cv::drawKeypoints(image1,keypoints1,image1,cv::Scalar(0,0,255),cv::DrawMatchesFlags::DRAW_RICH_KEYPOINTS);

    cv::imshow("1",image);
    cv::imshow("2",image1);

    cv::waitKey(0);

    cv::SurfDescriptorExtractor surfDesc;

    cv::Mat descriptors;
    cv::Mat descriptors1;

    surfDesc.compute(image,keypoints,descriptors);
    surfDesc.compute(image1,keypoints1,descriptors1);

    std::cout<<sizeof(unsigned long);

    cv::BruteForceMatcher<cv::L2<float>>matcher;

    std::vector<cv::DMatch>matches;

     matcher.match( descriptors, descriptors1, matches );

     cv::Mat img_matches;
     drawMatches( image, keypoints, image1, keypoints1,matches, img_matches, cv::Scalar::all(-1), cv::Scalar::all(-1),std::vector<char>(), cv::DrawMatchesFlags::NOT_DRAW_SINGLE_POINTS );

     imshow( "Matches", img_matches );

    cv::waitKey(0);
    return 0;

} 
```

该程序在**matcher.match 处以**“bad alloc”通信中断，但问题是 **关键点**向量（可能），因为它表明它的大小为 0，容量为数百亿，这是 ridicoulus（因此是 bad alloc 问题）。函数 **drawKeypoints**运行良好，它在图像上绘制了一组合理的关键点，尽管有关键点矢量参数，但这些关键点看起来不错。我应该在链接器- **>其他依赖**项中添加它，我已经包含了没有“d”的库名称。所以例如我有 **opencv_highgui230**而不是**opencv_highgui230d**. 这是我无法更改的必需品，因为如果库名称添加了“d”，程序会在启动后立即退出，并显示“应用程序无法成功运行......”通信。我有 win 7 64，VS 2010，我正在调试模式下运行程序。我真的很感谢匹配器的一些帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T13:06:47.147

我做了一些调查工作，并在 Linux 和 Windows（使用 VS2008）上使用**OpenCV 2.3.1测试了您的代码。**两个系统都是 32 位的。

需要注意的一件重要事情是，您没有测试`cvLoadImage()`. 如果它无法找到图像，您稍后会遇到崩溃：

```
if (!img || !img1)
{
    // log error and quit
    return 1;
} 
```

**在 Windows 上，应用程序崩溃**。重要的是要说明我使用的是完全相同的代码以及完全相同的输入图像：

![在此处输入图像描述](../Images/a2fca58cf3f296bfe23623da478754f9.png) ![在此处输入图像描述](../Images/230fad45e0825abc291dc88f0b85a067.png)

使应用程序崩溃的指令是这个调用：

```
surf.detect(image,keypoints); 
```

错误说：

```
First-chance exception at 0x0038a473 in cv_test.exe: 0xC0000005: Access violation reading location 0x000000c8.
Unhandled exception at 0x0038a473 in cv_test.exe: 0xC0000005: Access violation reading location 0x000000c8. 
```

我将应用程序与：

```
opencv_core231.lib opencv_highgui231.lib opencv_flann231.lib opencv_imgproc231.lib  opencv_features2d231.lib 
```

**它适用于 Linux**，生成的图像是：

![在此处输入图像描述](../Images/ceb4ddb510080f0f8e231f5a668126bd.png)

我不知道还能告诉你什么。=/

# android - 带有 String 或 Stringbuilder 或 Stringbuffer 的 Android SAX XML 解析器

> ID：10332676
> 
> 赞同：0
> 
> 时间：2012-04-26T11:41:23.917
> 
> 标签：android, string, saxparser

我有一个正在解析的 xml，其中有一个包含很长文本的字段，但不知何故它被解析器删除了，是不是因为我只使用字符串来获取那些字符，如果我使用字符串缓冲区或构建器。我想要的是仅按标签提取值。

```
@Override
public void characters(char[] ch, int start, int length)
throws SAXException {

    if (elementOn) {
     // its not reading element value, though tag is read.
        elementValue = new String(ch, start, length);
        elementOn = false;
    }
} 
```

这是文本：

```
 <description>
   <![CDATA[
  Former CPI MLA Manish Kunjam, who returned on Thursday after, theis is a long long text very long that its being dropped.......so what can be done...................................................................................................
  ]]>
 </description> 
```

谢谢请指导我.....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T12:04:42.507

是的，使用 StringBuilder 因为可以分块读取文本，并且您可能正在读取像这样的第一行空代码。查看[文档](http://www.saxproject.org/apidoc/org/xml/sax/ContentHandler.html#characters%28char%5b%5d,%20int,%20int%29)

您可以在每次点击时重置 StringBuilder`startElement`

```
private final StringBuilder mStringBuilder = new StringBuilder();
private String elementValue = null;
private boolean elementOn = false;

public final void characters(char[] ch, int start, int length) throws SAXException {
     if (elementOn)
         mStringBuilder.append(ch, start, length);
}

public final void startElement(String uri, String localName, String qName, Attributes attributes)
        throws SAXException {
    mStringBuilder.setLength(0);
    if (someCondition) elementOn = true;
}

public void endElement(String uri, String localName, String qName) throws SAXException {
     elementValue = mStringBuilder.toString().trim();
     elementOn = false;
} 
```

解析器执行以下操作

```
 <description> -> startElement("description"), reset StringBuilder
   <![CDATA[    -> characters(""), appended to (empty) String 
  Former CPI..  -> characters("Former.."), appended 
  ]]>           -> characters(""), appended
 </description> -> endElement("description"), read text here
 <description> -> startElement("description"), reset StringBuilder all starts again 
```

# twitter - 与 Twitter 共享 URL

> ID：10332679
> 
> 赞同：0
> 
> 时间：2012-04-26T11:41:38.593
> 
> 标签：twitter

在与 Twitter 共享 URL 时，我遇到了一些问题。

我使用以下网址分享[http://google.com](http://google.com)

[https://twitter.com/share?text=hello&url=http://google.com](https://twitter.com/share?text=hello&url=http://google.com)

输出如下。 ![在此处输入图像描述](../Images/6edf7b6660451b14915ac25910f2b85e.png)

但是当我尝试 与以下 URL共享[http://google](http://google)

[https://twitter.com/share?text=hello&url=http://google](https://twitter.com/share?text=hello&url=http://google)

Twitter 无法正确显示共享 URL，如下所示。

![在此处输入图像描述](../Images/778b457ff1c53605dd465a98150290fe.png)

你有什么主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:44:05.410

你把这些弄混了，这是另一种正确的方法。

*   [https://twitter.com/share?&text=hello&url=http://google.com](https://twitter.com/share?&text=hello&url=http://google.com) -*会*工作。

*   [https://twitter.com/share?&text=hello&url=http://google](https://twitter.com/share?&text=hello&url=http://google) -*不起作用*。

至于您的编辑似乎已经改变了它们，答案是这样的。它不应该与您似乎认为“损坏”的那个一起工作，因为您没有为 URL 参数提供有效的 URL（具有特定[TLD](http://en.wikipedia.org/wiki/Top-level_domain)的 URL ）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T11:58:29.300

当您正在共享`http://google.com with url it was valid url format`但当您尝试共享`http://google twitter found a invalid url format`并且它不接受它时。如果您想分享[http://google](http://google)输入网址，请尝试

```
http://twitter.com/?status=hello http://google 
```

它会接受这一点。

谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T11:52:44.400

认为那里有一个错误，但假设 iusse 是“http://google”不起作用是问题吗？

如果这样那不是问题，我不会想象这会被当作一个 url，因为我不会把它归类为有效的，我敢肯定在某处提到了一种格式。Twitter 不能提供指向无效 URL 的链接，因为这将是不好的做法。

也是在查询字符串“？”之后的与号“&”。是多余的，你应该删除它

# ios - 该方法在调用时不运行某行

> ID：10332686
> 
> 赞同：0
> 
> 时间：2012-04-26T11:42:27.433
> 
> 标签：ios, xcode, tcpserver

//设置.m

```
void receiveData(CFSocketRef s, CFSocketCallBackType type, 
             CFDataRef address, const void *data, void *info)
{ 

gameboard *board = [[gameboard alloc] initWithNibName:nil bundle:nil];

NSString *buffer = [[NSString alloc] initWithData:(NSData *)data
encoding:NSUTF8StringEncoding];

NSLog(@"Buffer is %@", buffer);

[board activateButton:buffer]; 
```

//gameboard.m

```
-(void) activateButton:(NSString *)trigger;{

[self viewDidLoad];

NSLog(@"Received from setup: %@", trigger);
upDatePos = [trigger intValue];
NSLog(@"upDatePos is %d",upDatePos);
btnMyButton.enabled = YES;
[self drawPosition:upDatePos];
NSLog(@"End of activateButton");
}

-(void) p2drawPosition:(int)number;{

NSLog(@"Number in p2draw Position is %d",number);
xPos = [[P2XArraypos objectAtIndex:number]intValue];
yPos = [[P2YArraypos objectAtIndex:number]intValue];
NSLog(@"xPos is %f",xPos);
NSLog(@"yPos is %f",yPos);

image2.center= CGPointMake(xPos,yPos);

} 
```

当我运行它时。我的视图将设置 -> 游戏板。tcp 服务器将创建并运行循环以接收传入的数据，然后 .y 视图将在游戏板上停止并等待来自设置的数据（缓冲区）调用 activateButton。在调用 activateButton 之后，它也应该运行这些行

```
btnMyButton.enabled = YES;
image2.center= CGPointMake(xPos,yPos); 
```

但是我的按钮仍然禁用并且我的 image2 仍然没有更新位置我还使用 UIAlertView 进行测试，它在调用时仍然会弹出。

谁能告诉我发生了什么事？以及如何解决它

非常感谢。

# java - 在 Xcode 中像在 Eclipse 中一样“添加未实现的方法”

> ID：10332689
> 
> 赞同：27
> 
> 时间：2012-04-26T11:42:33.587
> 
> 标签：java, iphone, objective-c, xcode, eclipse

我正在寻找一种快捷方式或任何可能性来添加未实现的方法，就像我每次在 Eclipse 中使用它一样。

我的意思是，如果我在 .h 文件中声明一个方法，例如：

```
#pragma mark Getter
-(NSDate *)date;
-(unsigned int)number;
-(double)longerNumber; 
```

在这个声明之后，我可以进入我的实现 .m 文件，导入这个接口并按下一些组合或获得一个建议，我可以点击以自动实现这些方法。

有人知道这种可能性或其他快速工作流程吗？

提前感谢伊夫

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-26T12:02:22.620

我认为这在 xcode 中是不可能的。[您可以在此处](http://bugreport.apple.com/ "苹果的错误报告器")发布增强请求..

您只需键入“破折号”，然后键入“空格”，然后开始键入要覆盖的方法名称。现在按下 Esc，您将获得一个包含您键入的字符串的所有可能方法的列表。至少可以减少键入完整方法语法的痛苦。

![在此处输入图像描述](../Images/9c7a75e67ffb28d9968b152f3567600a.png)

[这个](http://forums.macrumors.com/showthread.php?p=6180803#post6180803)macrumours线程可能是一个很好的阅读..

# android - 需要在android中加密DB文件

> ID：10332690
> 
> 赞同：0
> 
> 时间：2012-04-26T11:42:34.487
> 
> 标签：android, database, encryption

有什么方法可以加密android中的db文件。我知道它可以加密存储在db中的数据，但我想要的是加密我的应用程序的整个db文件，并且应该可以解密db并从中获取数据来自 db 文件。是否有任何可能的方法来做到这一点？任何帮助都是可取的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T11:57:41.360

[http://sqlcipher.net/sqlcipher-for-android/](http://sqlcipher.net/sqlcipher-for-android/)

使用 AES-256 位加密。一步一步的教程很好。

# mysql - 在触发器 MySQL 中拒绝删除语句

> ID：10332692
> 
> 赞同：-1
> 
> 时间：2012-04-26T11:42:41.433
> 
> 标签：mysql

我有一个数据库，客户想要在其中运行`DELETE`语句。但在数据库方面，记录应该只是隐藏而不是删除。

我可以使用 a`BEFORE DELETE TRIGGER`将`visiblity`标志更改为`false`而不是删除记录吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-08T00:32:20.800

我认为在 MySQL 中做到这一点的唯一方法（正如 Alex Monthy 暗示的那样，这真的是这个逻辑所属的地方吗？）是使用删除*后*触发器重新插入`visibility`标志设置为 false 的记录：

```
CREATE TRIGGER foo AFTER DELETE ON my_table FOR EACH ROW
  INSERT INTO my_table (visibility,     colA,     colB,     colC)
                VALUES (     false, OLD.colA, OLD.colB, OLD.colC); 
```

您*可以*从前触发器中止删除操作（只需使触发器引发错误，例如调用不存在的过程），但这不会使您能够`visibility`根据需要更新标志。

# plugins - TYPO3 上传文件前端插件

> ID：10332696
> 
> 赞同：0
> 
> 时间：2012-04-26T11:42:47.763
> 
> 标签：plugins, upload, typo3, frontend

我正在尝试使用多张图片扩展 tt_address。但是如何构建上传表单并在 myext_pi1.php 中处理它？

**模板中的表格：**

```
<input type="file" id="image1" name="tx_myext_pi1[image1]" />
<input type="file" id="image2" name="tx_myext_pi1[image2]" /> 
```

**输出数组时piVars中没有图像**（但所有文本区域和文本输入都在那里......

```
print_r($this->piVars); 
```

**进行实际上传**如果...我可以访问 piVars 中的文件。那么如何将它们上传到 uploads/tx_myext/ ？我假设它正在使用这些函数或类似函数： http: [//api.typo3.org/typo3v4/master/html/classt3lib__ext_file_functions.html](http://api.typo3.org/typo3v4/master/html/classt3lib__ext_file_functions.html)

**更新**

正如好心指出的那样，我的文件不会进入 piVars 而是进入 _FILES。看着分机。feupload 我可以看到如何基于 _FILES 而不是 piVars 进行文件上传：

```
$ffunc = t3lib_div::makeInstance('t3lib_basicFileFunctions');
$path = $ffunc->getUniqueName($_FILES['image1']['name'], t3lib_div::getFileAbsFileName('uploads/pics/'));
t3lib_div::upload_copy_move($_FILES['image1']['tmp_name'], $path);
$file->setFile(basename($path)); 
```

这是有效的。如果这是最佳实践，我不知道。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T12:53:04.200

您必须将 enctype 添加到您的表单中。尝试调试 $_FILES 数组，以便您可以看到上传的文件

# java - 如何使用货币数据类型？

> ID：10332697
> 
> 赞同：0
> 
> 时间：2012-04-26T11:42:48.137
> 
> 标签：java

如果来自数据库的值是货币数据类型，如何将变量的值固定为小数点后两位。同样在数据库中，没有为货币数据类型定义精度和比例。

```
Ex. value from database is: 3.7700(of money datatype)

output needed: 3.77 
```

通过输出，我的意思是将值保存在变量中并打印出来。我也将其转换为双精度，然后将其解析为两位小数。但我的疑问是我们是否有任何其他方法可以直接处理货币数据类型而不进行类型转换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:49:15.497

如果数据库没有自己的精度，您可以使用自己的说明符，例如 use `System.out.println("%.2f",<money variable>);`。where`%.2f`用于将限制限制在 and 之后的 2 个位置`.`，`f`是浮点数据类型的说明符

来自[本网站][1]

[1]：[http](http://www.drdobbs.com/jvm/184405653) ://www.drdobbs.com/jvm/184405653 我引用以下段落：

```
`The toDouble() method converts a monetary value to a double floating-point value.
However, you should avoid using the converted value for computational purposes, owing
to the problems associated with the use of floating-point data types with 
monetary data.

You can also convert a monetary value to a long integer data type (having an implied
scaling factor of 2). In this case, an automatic round-off to the nearest whole cent is
performed.` 
```

因此，将您的货币变量转换为具有足够范围的任何类型，您可以使用转换后的值并将小数转换为 2 或您喜欢的任意位数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:47:45.997

请使用 java.util.formatter。您可以使用像“%10.2f”这样的格式化字符串

# objective-c - 地址簿崩溃不合逻辑

> ID：10332706
> 
> 赞同：0
> 
> 时间：2012-04-26T11:43:27.673
> 
> 标签：objective-c, crash, exc-bad-access, abaddressbook

我的一部分应用用户报告了崩溃。当我符号化他们的一个崩溃日志时，我发现有问题的代码是读取的标签。

以下是崩溃日志的输出：

```
Exception Type:  EXC_BAD_ACCESS (SIGSEGV)
Exception Codes: KERN_INVALID_ADDRESS at 0x00000000
Crashed Thread:  0
Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0 Crashed:
0   CoreFoundation                  0x33e5004e 0x33e4d000 + 12366
1   CoreFoundation                  0x33e58cfc 0x33e4d000 + 48380
2   Mail my meeting                 0x00002a9c -[Mail_my_meetingAppDelegate initPeople] Mail_my_meetingAppDelegate.m:136)
3   Mail my meeting                 0x0000287a -[Mail_my_meetingAppDelegate application:didFinishLaunchingWithOptions:] (Mail_my_meetingAppDelegate.m:74) 
```

这是代码，第 136 行是最后一行：

```
NSString* finalName=[NSString stringWithFormat:@"%@%@%@",firstName,middleName,lastName];
NSString *phoneNumber = nil;
ABMultiValueRef phoneNumbers1 = ABRecordCopyValue(person,kABPersonPhoneProperty);
if (ABMultiValueGetCount(phoneNumbers1) > 0) {
    CFIndex j;
    for (j=0; j < ABMultiValueGetCount(phoneNumbers1); j++) {
        CFStringRef label = ABMultiValueCopyLabelAtIndex(phoneNumbers1, j); 
```

我无法理解最后一行如何导致崩溃，因为我验证它小于计数，并且它从零开始。

这让我有点发疯，所以欢迎任何想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T10:27:12.603

我有类似的问题。

谁在调用崩溃方法？

检查正在调用的方法和崩溃的方法是否在同一个线程/队列中运行。或者至少所有与 AB 相关的方法都在同一个队列/线程中运行。

如果是，请检查当您创建所有 AB 变量的第一个实例时，它们是在同一个线程或队列中创建的。

基本上，您需要始终在同一个队列或线程中访问 AB 函数！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T07:48:02.187

它可能是损坏的通讯录，我有时会看到。

但在大多数情况下，这是由于在不同的队列或线程中访问 AB 数据库。

# xml - 如何在没有ajax调用的情况下用jquery解析xmlString？

> ID：10332709
> 
> 赞同：0
> 
> 时间：2012-04-26T11:43:41.717
> 
> 标签：xml, jquery, xml-parsing

我想用 jquery 解析 xmlString 但不使用 ajax 调用？

**xml字符串 =**

```
 <?xml version="1.0" encoding="UTF-8"?>
        <root>  
            <item id="4" parent_id="0" state="close">  
                <content><name>Charles Madigen</name></content>                
            </item>  
            <item id="192" parent_id="4" state="close">    
          <content><name>Ralph Brogan</name></content>  

            </item> 
         </root> 
```

我想解析上面的 xml 以获取 ID？
4 , 192 .... 如何用 jquery 解析 xmlString。

[使用 jquery+ajax 调用解析 XML](http://www.switchonthecode.com/tutorials/xml-parsing-with-jquery)

就我而言，我没有任何 xml 文件 ex。一个.xml

在某些操作中，我得到了要解析的 xmlString 以获取 ID

对此问题的任何帮助或指导将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:07:02.187

你应该尝试这样的事情：

```
var xmlString = '<xml><some myAttr="1">test</some></xml>';
var xmlDOM = $.parseXML(xmlString);
$(xmlDOM).find('some').attr('myAttr') // yields "1" 
```

换句话说，您可以将 XML 字符串视为通常的 DOM 结构，并使用任何 jQuery 选择器和方法。

至于您的示例，代码将如下所示：

```
var xmlDOM = $.parseXML(xmlString);
var items = $(xmlDOM).find('root item');
$.each (items, function(key, val){
    alert ($(val).attr('id'))
}) 
```

# c# - 如何从当前编辑行的某些单元格中删除值？

> ID：10332710
> 
> 赞同：0
> 
> 时间：2012-04-26T11:43:41.777
> 
> 标签：c#, asp.net, sql

```
I have a simple gridview:
A sql datasource to bind data from table data to gridview. 
```

在 gridview 行更新时，我想从当前编辑行的某些列中清除单元格值，因此这些值也应该从表数据中删除。我怎样才能做到这一点？

就像是：

```
SqlDataSource1.DeleteCommand = "Delete value from column1,column2 where rowid=@rowid"; //I need the right statment
SqlDataSource1.Delete(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T12:01:33.197

我认为这里有一些令人困惑的地方。如果要“删除” 2 列值，则可以简单地将它们设为 null ：

```
 UPDATE table
    SET column1 = null,
        column2 = null
  WHERE rowid = @rowid; 
```

或者只是删除整行

```
DELETE FROM table
WHERE rowid = @rowid; 
```

# django - 允许管理员用户选择模型

> ID：10332713
> 
> 赞同：0
> 
> 时间：2012-04-26T11:44:03.853
> 
> 标签：django, forms, django-admin

前阵子问了这个问题，努力让它变得可以理解，打算再试一次。

管理员用户正在管理员部分构建问卷。管理员用户创建一个问卷并向其中添加问题。（所以 Question 有 Questionaire 的 fk ）。

然后我有一个回答问题的模型。实际上，我有多个模型，响应模型的所有子类（可能是文本或数字响应，并且需要对它们进行不同的验证，TextResponse、NumberResponse 等）。

所以实际的网站是一个最终用户问卷。最终用户登录，选择一个问题并提供一个响应。响应字段因管理员为该问题选择的响应类型而异。

我如何在管理部分提供一个包含响应类型的下拉列表，允许管理员用户定义预期的响应类型？最好根据响应模型定义的类来创建。

# c# - 如何禁用 DataGridView CheckBox 列中的特定复选框单元格

> ID：10332715
> 
> 赞同：11
> 
> 时间：2012-04-26T11:44:08.027
> 
> 标签：c#, winforms, datagridview

我有一个带有 DataGridView 控件的 winForm。它包含 5 列，其中之一是 CheckBox 列。我想根据同一行另一列中的值启用/禁用该列的复选框单元格。

[我可以使用DisabledCheckBoxCell](http://www.google.co.in/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&sqi=2&ved=0CCcQFjAA&url=http://www.codeproject.com/Articles/31829/Disabled-Checkbox-Column-in-the-DataGridView&ei=djKZT5eLDIOurAe4poTJAQ&usg=AFQjCNFnPfSO8hWsGNiMsLO9DZSo28NFvg&sig2=w-EZ6lMy-L6STIiFYbJdMQ)禁用整个列

但它使整个列处于禁用状态。

这是 DataGridView 的片段，

来源专栏 | 目的地列
真 | 启用
true | 启用
假 | 禁用

有谁知道，如何在.Net中实现这一点。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-27T19:47:28.793

维杰，

DataGridViewCheckBoxColumn 没有名为 disabled 的属性，因此通过更改复选框的样式，您可以使其看起来好像已禁用。看下面的代码。

```
 private void dataGridView1_RowPostPaint(object sender, DataGridViewRowPostPaintEventArgs e)
    {
        if (e.RowIndex == 1)
        {
            DataGridViewCell cell=dataGridView1.Rows[e.RowIndex].Cells[0];
            DataGridViewCheckBoxCell chkCell = cell as DataGridViewCheckBoxCell;
            chkCell.Value = false;
            chkCell.FlatStyle = FlatStyle.Flat;
            chkCell.Style.ForeColor = Color.DarkGray;
            cell.ReadOnly = true;

        }

    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-04-15T19:43:41.480

我最终做了这样的事情来显示一个实际禁用的复选框：

```
using System.Windows.Forms.VisualStyles;

public partial class YourForm : Form
{

    private static readonly VisualStyleRenderer DisabledCheckBoxRenderer;

    static YourForm()
    {
        DisabledCheckBoxRenderer = new VisualStyleRenderer(VisualStyleElement.Button.CheckBox.UncheckedDisabled);
    }

    private void dataGridView_RowPostPaint(object sender, DataGridViewRowPostPaintEventArgs e)
    {
        if (e.RowIndex > -1)
        {
            int checkBoxColumnIndex = this.yourCheckBoxColumn.Index;
            var checkCell = (DataGridViewCheckBoxCell)this.dataGridView[checkBoxColumnIndex, e.RowIndex];
            var bounds = this.dataGridView.GetCellDisplayRectangle(checkBoxColumnIndex , e.RowIndex, false);

            // i was drawing a disabled checkbox if i had set the cell to read only
            if (checkCell.ReadOnly)
            {
                const int CheckBoxWidth = 16;
                const int CheckBoxHeight = 16;

                // not taking into consideration any cell style paddings
                bounds.X += (bounds.Width - CheckBoxWidth) / 2;
                bounds.Y += (bounds.Height - CheckBoxHeight) / 2;
                bounds.Width = CheckBoxWidth;
                bounds.Height = CheckBoxHeight;

                if (VisualStyleRenderer.IsSupported)
                {

                    // the typical way the checkbox will be drawn
                    DisabledCheckBoxRenderer.DrawBackground(e.Graphics, bounds);
                }
                else
                {

                    // this method is only drawn if the visual styles of the application
                    // are turned off (this is for full support)
                    ControlPaint.DrawCheckBox(e.Graphics, bounds, ButtonState.Inactive);
                }
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T11:50:02.580

尝试为您的 GridView 使用 RowDataBound 事件。您可以将 eventargs 转换为行，在该行上找到控件并将其禁用。此事件会为每一行 gridview 触发，即使是页眉和页脚，所以尽量不要捕获异常。这是一些可能对您有用的代码

```
protected void xxx_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if ((e.Row != null) && e.Row.RowType == DataControlRowType.DataRow) 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-03-19T09:15:00.407

```
 foreach (DataGridViewRow row in dataGridView1.Rows)
         {
             var cell = dataGridView1[cellindex, row.Index];
             if (cell.Value != null )
                 if((bool)cell.Value == true)
             {
               ....
             }
         } 
```

# filemaker - Filemaker Pro：根据选项卡为字段分配值

> ID：10332717
> 
> 赞同：0
> 
> 时间：2012-04-26T11:44:16.230
> 
> 标签：filemaker

这是关于我的项目（设计临床试验表格）的后续问题。我的第一个问题在这里：[Filemaker Pro：使用选项卡控件创建表格的多个条目](https://stackoverflow.com/questions/10225004/filemaker-pro-create-multiple-entries-of-a-table-with-tab-control)

为了简化，我创建了一个测试 FMP 文件。这是数据库的设计和布局。
[示例的数据库结构](http://img209.imageshack.us/img209/812/help2a.png)
[布局](http://imageshack.us/photo/my-images/137/help1i.png/)

对于每位患者，我在 Patient Table 中创建一条记录 - Patient_ID 是标识符。我将提供一些一般信息（这里我只使用了名称）。在另一个标有“Tableau_Data”的表上，我将存储一些数据 - Data_ID 是标识符。表 Patient”和“Tableau_Data”与 Patient_ID 链接。

数据将始终由相同的字段组成（在我的示例中：“Turlututu”） - 实际上超过 50 个参数。我们将收集 5 天的数据（所以我有 5 个标签）。感谢 Sam Barnum 的帮助，通过使用门户，我能够在每个选项卡中拥有不同的“Tableau_Data”记录。

但我想在“Tableau_Data”的每条记录中存储它来自的选项卡（字段“Jour”）。所以我想有一种方法可以根据选项卡自动设置“Jour”的值：一个脚本可能链接到门户或字段。但是如何？

理想情况下，我想隐藏“Jour”字段。

默认情况下，我可以做一个下拉列表，让用户设置这个变量的值。我宁愿那样。不符合人体工程学，并且可能在数据捕获过程中导致错误。

Sam Barnum 暗示也许我可以预先生成 Tableau_Data 的 5 条记录链接到我的 Patient_ID。因此，我会知道记录 1、6、11、16，... 用于 Jour=1，记录 2、7、12，... 用于 Jour=2，依此类推。但我什至不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-28T14:06:07.773

您的脚本和自动输入计算可以自动“知道”用户在哪个选项卡上。这是通过使用布局对象名称和函数 Get (ActiveLayoutObjectName) 来实现的。

在 FileMaker 中，每个布局或布局对象组都可以有一个“名称”。FileMaker 强制执行名称的唯一性，因此您不可能有 2 个同名对象。您可以通过“位置”选项卡上的检查器设置布局对象名称。它在顶部。

在您的情况下，您可以为每个选项卡命名。这是通过在布局模式下双击选项卡来完成的。当它被选中时，它周围有一个黑色边框。然后如上所述使用 Inspector 分配名称。

一旦您的每个选项卡都有一个唯一的名称。您可以使用 Get ( ActiveLayoutObjectName ) 来确定用户当前处于活动状态的选项卡。

根据您的情况，您可以使用脚本执行此操作。或者，让数据库中的字段将自动输入计算设置为“Get (ActiveLayoutObjectName)”可能会更容易，这样数据库将记录用户在创建记录时所在的选项卡。这是我相信你想要的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T14:35:20.950

如果您只有少量的 Jour 值（5，正如您所指出的），那么为 Jour 的每个值设置新关系可能是最容易的——每个选项卡一个。

对于您的 Patient_ID 表，您将为 Jour 的每个值添加一个新字段。每个字段都是一个计算字段，计算的值是 Jour 的特定值。例如，Patient_ID 表将具有以下值：

```
Patient_ID::Patient_ID
Patient_ID::Nom
Patient_ID::Jour1 (Calculation value set to 1)
Patient_ID::Jour2 (Calculation value set to 2)
  ...
Patient_ID::Jour5 (Calculation value set to 5) 
```

然后，您将设置 5 个新关系，将 Patient_ID 和每个 Jour 字段一次一个链接到 Tableau_Data 字段的新表出现次数（在本示例中标记为 Tableau_Data_Jour#:)

```
Jour1
Patient_ID::Patient_ID = Tableau_Data_Jour1::Patient_ID
Patient_ID::Jour1 = Tableau_Data_Jour1::Jour 
```

一路走来：

```
Jour5
Patient_ID::Patient_ID = Tableau_Data_Jour5::Patient_ID
Patient_ID::Jour5 = Tableau_Data_Jour5::Jour 
```

对于每个新关系，您都需要打开“允许通过此关系在此表中创建记录”。

然后，您将更改每个选项卡上的字段，以便 Jour 1 选项卡使用 Tableau_Data_Jour1 表中的字段，而 Jour 5 选项卡使用 Tableau_Data_Jour5 表中的字段。

**您还可以考虑：**

以上应该可以正常工作，但它很丑陋并且为您创造了很多工作。如果选项卡不是严格要求，我建议您改为执行以下操作：

1.  在 Patient 表上创建一个新的“JourCurrent”编号字段。
2.  创建与上述类似的关系，再次允许在 Tableau_Data_Jour 表上创建新记录：

    Patient_ID::Patient_ID = Tableau_Data_Jour::Patient_ID

    患者 ID::JourCurrent = Tableau_Data_Jour::Jour

3.  用 Jour 的所有值创建一个新的值列表

4.  将 JourCurrent 字段放在布局上，并将其设置为从值列表中获取值作为弹出菜单。
5.  让用户从弹出菜单中选择适合今天输入的 Jour，而不是使用选项卡。

这样做的好处是您只需要维护每个相关字段（Tableau_Data_Jour 字段）一次，并且您可以添加一个新字段一次，而不是每个选项卡一次。

# firebug - Firebug：是否有 Break On Next 键盘快捷键？

> ID：10332720
> 
> 赞同：14
> 
> 时间：2012-04-26T11:44:26.580
> 
> 标签：firebug, breakpoints

我已经开始使用 Firebug 中的 Break On Next 功能（在脚本和 HTML 选项卡中），它非常有用。[唯一的问题是当我单击按钮时，我需要像稳定的手游戏](http://p.lefux.com/61/20100804/A1855000BO/hand-buzz-wire-game-wand-1-Gallay.jpg)一样在页面上导航鼠标以到达正确的元素，因此正确的突变/脚本被触发。这很烦人，有时如果有整页事件或类似事件是不可能的。

真正有用的是键盘快捷键，因此鼠标可以位于相关元素的上方/旁边，然后执行 Break On Next，然后一旦移动鼠标，页面就会被冻结。

我查看了 Firebug 文档并进行了一些谷歌搜索，但无济于事。有谁知道这是否可能和/或即将到来？似乎是一个明显的功能，目前可能是一个疏忽（尽管 Firebug 是最好的工具之一...）。

我在 FF12 上运行 FireBug 1.9.1。

**更新：**由 Sebastian Zartner 提供，引入了快捷方式 ( `Ctrl`++ )，它将出现在 Firebug 1.10a8 中：[http](http://code.google.com/p/fbug/issues/detail?id=5044#c4)`Alt` ://code.google.com/p/fbug/issues/detail?id = 5044#c4`B`

此处代码：[https ://github.com/firebug/firebug/commit/9a0f74c622df7f5faccaa7c59b8c4ffa457e7d78](https://github.com/firebug/firebug/commit/9a0f74c622df7f5faccaa7c59b8c4ffa457e7d78)

请注意，必须集中 Firebug 才能使快捷方式起作用。Google 代码问题页面上还有其他关于如何进一步改进其行为的建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-12T09:48:32.153

现在有一个热键，在 1.10 测试版中发布。它是*CTRL+ALT+B*。请参阅[键盘和鼠标快捷键](https://getfirebug.com/wiki/index.php/Keyboard_and_Mouse_Shortcuts)

[您可以在他们的下载页面](https://getfirebug.com/downloads/)上下载 1.10 测试版。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T14:11:44.927

这实际上对我也非常有用，我也有同样的问题。但是据我所知，似乎没有：

[http://groups.google.com/group/firebug/browse_thread/thread/46730eb62ba22eef/971017e6df091386](http://groups.google.com/group/firebug/browse_thread/thread/46730eb62ba22eef/971017e6df091386)

也许我们应该写在线程中以引起对该功能的更多关注。

**编辑：** 实际上，为此打开了一个问题： [http ://code.google.com/p/fbug/issues/detail?id=5044](http://code.google.com/p/fbug/issues/detail?id=5044)

# build-automation - TFS Web 打包包结构

> ID：10332721
> 
> 赞同：1
> 
> 时间：2012-04-26T11:44:27.253
> 
> 标签：build-automation, setup-deployment

我在 TFS 2010 中的一个构建定义中发现了一个问题。这实际上并不是真正的问题，因为它仍然有效，但我想知道......为什么它仍然有效？

如果在 Visual Studio 中选择“编辑构建定义”并选择“进程”选项卡，则可以设置“Web 包”部分。如果您向集合中添加新成员，您可以在“包定义”部分下选择“包结构”。如果您在那里添加新成员，您可以选择项目文件夹的路径。

在当前的构建定义中，其中一些成员引用了 2 个 sprint 前的项目（！）。但为什么这行得通？该项目仍在编译，没有人注意到它......这个设置实际上是做什么的？

# javascript - Knockout JS 在加载时调用函数

> ID：10332723
> 
> 赞同：16
> 
> 时间：2012-04-26T11:44:30.000
> 
> 标签：javascript, function, viewmodel, knockout.js

我正在使用 Knockout.js 构建客户端视图模型。在我的视图模型中，我想公开一些可以绑定到页面中元素的函数（典型的 MVVM 模型）。我只希望调用这些函数以响应按钮的单击事件，但是在构造视图模型时调用它们......

我已经这样定义了我的模型：

```
<script type="text/javascript">
var ViewModel = function(initialData) {
    var self = this;

    self.id = initialData;
    self.isSubscribed = ko.observable(false);
    self.name = ko.observable();

    self.SubscribeToCategory = function () {
        $.ajax({
            url: '@Url.Action("Subscribe", "Category")',
            type: 'POST',
            data: {
                categoryId: self.id
            },
            success: function () {
                self.isSubscribed(true);
            },
            failure: function () {
                self.isSubscribed(false);
            }
        });

        alert('Subscribing...');
    };

    self.UnsubscribeFromCategory = function () {
        $.ajax({
            url: '@Url.Action("Unsubscribe", "Category")',
            type: 'POST',
            data: {
                categoryId: self.id
            },
            success: function () {
                self.isSubscribed(false);
            },
            failure: function () {
                self.isSubscribed(true);
            }

        }); 

        alert('Unsubscribing...');
    };

    self.LoadCategory = function () {
        $.ajax({
            url: '@Url.Action("GetCategory", "Category")',
            type: 'POST',
            async: true,
            data: {
                categoryId: self.id
            },
            dataType: 'json',
            success: function (data) {
                self.isSubscribed(data.IsSubscribed);
                self.name(data.Name);
            }
        });
    };

    self.LoadCategory();
};

$(document).ready(function () {
    var data = '@Model';
    var viewModel = new ViewModel(data);
    ko.applyBindings(viewModel);
}); 
```

然而，当我执行代码时，这两个警报会自动触发，但我并不希望它们如此。我正在使用 ASP MVC4，使用视图模型的 HTML 如下：

```
<p>
    ID: <span data-bind="text: id"></span>
</p>
<div id="subscribe" data-bind="visible: isSubscribed == false">
    <button data-bind="click: SubscribeToCategory()">Subscribe</button>
</div>
<div id="unsubscribe" data-bind="visible: isSubscribed == true">
    <button data-bind="click: UnsubscribeFromCategory()">Unsubscribe</button>
</div>
<div>
    Category Name: <span data-bind="text: name"></span>
    Is Subscribed: <span data-bind="text: isSubscribed"></span>
</div> 
```

我查看了在线教程和其他一些淘汰赛示例，以及我的代码中使用淘汰赛的其他地方，但我不明白为什么这两个函数（SubscribeToCategory 和 UnsubscribeFromCategory）在文档加载时触发。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-26T12:15:56.857

[jsfiddle](http://jsfiddle.net/ryanwfiorini/eDYgJ/)

我花了一秒钟，但最终是一个简单的修复。从您的 data-bind="click: SubscribeToCategory()" 中删除 () 并使您单击处理程序这个 data-bind="click: SubscribeToCategory" 和 data-bind="click: UnsubscribeFromCategory"

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-26T12:16:31.277

看来绑定中函数名中的括号`<button data-bind="click: SubscribeToCategory()">Subscribe</button>`是问题所在。

() 不应该在那里。所以它应该看起来像：

```
<button data-bind="click: SubscribeToCategory">Subscribe</button> 
```

# c++ - 如何在创建时自动注册一个类

> ID：10332725
> 
> 赞同：15
> 
> 时间：2012-04-26T11:44:40.507
> 
> 标签：c++, design-patterns, idioms

我想知道是否存在自动注册类类型的设计模式或习语。或者更简单，我可以通过简单地扩展基类来强制调用一个类的方法吗？

例如，假设我有一个基类`Animal`和扩展类`Tiger`，`Dog`并且我有一个帮助函数，它打印出所有扩展的类`Animal`。

所以我可以有类似的东西：

```
struct AnimalManager
{
   static std::vector<std::string> names;
   static void registerAnimal(std::string name) { 
            //if not already registered
            names.push_back(name); }
};

struct Animal
{
   virtual std::string name() = 0;
   void registerAnimal() { AnimalManager::registerAnimal(name()); }
};
struct Tiger : Animal
{
   virtual std::string name() { return "Tiger"; }
}; 
```

所以基本上我会这样做：

```
Tiger t;
t.registerAnimal(); 
```

这也可以用于`static`函数。是否有任何模式（如奇怪的递归模板）或类似的东西可以帮助我实现这一点而无需显式调用该`registerAnimal`方法。

我希望我`class Animal`的未来可以扩展，其他人可能会忘记打电话`register`，我正在寻找方法来防止这种情况，**除了记录这一点**（无论如何我都会这样做）。

PS这只是一个例子，我实际上并没有实现动物。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-26T12:41:35.813

您确实可以使用奇怪的递归模板习语来做到这一点。它不需要任何扩展编译器无法强制执行的类的人：

```
template<class T>
struct Animal
{
   Animal()
   { 
      reg;  //force specialization
   }
   virtual std::string name() = 0;
   static bool reg;
   static bool init() 
   { 
      T t; 
      AnimalManager::registerAnimal(t.name());
      return true;
   }
};

template<class T>
bool Animal<T>::reg = Animal<T>::init();

struct Tiger : Animal<Tiger>
{
   virtual std::string name() { return "Tiger"; }
}; 
```

`Animal`在此代码中，只有专门化它才能扩展。构造函数强制初始化`static`成员`reg`，然后调用 register 方法。

编辑：正如@David Hammen 在评论中指出的那样，您将无法拥有`Animal`对象集合。但是，这可以通过使用模板继承的非模板类并将其用作基类来轻松解决，并且仅使用模板进行扩展。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-26T12:31:11.890

如果你坚持每只动物都应该注册，为什么不直接做`name`一个构造函数的参数`Animal`。然后您可以将注册问题提交给`Animal`构造函数，并且每个派生都*必须*传递有效名称并注册：

```
struct Animal
{
   Animal(std::string name){ AnimalManager::registerAnimal(name);}
}

struct Tiger : Animal
{
   Tiger():Animal("Tiger"){}
}; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-26T12:35:56.130

这是一个典型的示例，您希望在构造对象时进行某种簿记。Scott Meyers “ [Effective C++](https://rads.stackoverflow.com/amzn/click/com/0321334876) ”中的第 9 条给出了一个例子。

基本上，您将所有簿记工作移至基类。派生类显式构造基类并传递基类构造所需的信息。例如：

```
struct Animal
{
  Animal(std::string animal_type)
  {
    AnimalManager::registerAnimal(animal_type);
  };
};

struct Dog : public Animal
{
  Dog() : Animal(animal_type()) {};

  private:      
    static std::string animal_type()
    {
      return "Dog";
    };
}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-26T12:29:52.303

通常我用宏来做到这一点。

单元测试框架经常使用注册测试的技术，例如[GoogleTest](http://code.google.com/p/googletest/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-26T14:21:06.227

@AMCoder：这不是你想要的答案。您想要的答案，*反射*（例如，`what_am_I()`）在 C++ 中并不存在。

C++ 通过 RTTI 具有相当有限的形式。在基类中使用 RTTI 来确定正在构造的对象的“真实”类型是行不通的。相反，调用`typeid(*this)`基类将为您`typeinfo`提供正在构造的类。

你可以让你的类`Animal`只有一个非默认的构造函数。这对于直接从 派生的类很有效`Animal`，但是从派生类派生的类呢？这种方法要么排除进一步的继承，要么要求类构建器创建多个构造函数，其中一个供派生类使用。

您可以使用 Luchian 的 CRTP 解决方案，但这也存在继承问题，并且它还使您无法拥有指向`Animal`对象的指针集合。将该非模板基类添加回组合中，这样您就可以拥有`Animal`s 的集合，并且您会再次遇到原始问题。您的文档将不得不说只使用模板来创建一个派生自`Animal`. 如果有人不这样做会怎样？

最简单的解决方案是您不喜欢的解决方案：要求派生自的类的每个构造函数都`Animal`必须调用`register_animal()`. 在您的文档中这样说。向您的代码的用户展示一些示例。在该示例代码前面添加注释，`// Every constructor must call register_animal().`使用您的代码的人无论如何都会使用剪切和粘贴，因此手头有一些可剪切和粘贴的解决方案。

担心如果人们不阅读您的文档会发生什么是过早优化的情况。`register_animal()`要求在其构造函数中调用每个类是一个简单的要求。每个人都可以理解它，每个人都可以轻松实现它。如果您的用户甚至无法遵循这个简单的说明，那么与注册失败相比，您给用户带来的麻烦要大得多。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-26T12:31:13.933

您可以在基类构造函数中调用一个方法，每次实例化派生类时都会调用该方法，如下所示：

```
class Animal {
public:
    Animal() {doStuff();}
} 
```

doStuff() 方法可以在基类中实现以进行静态操作，也可以是纯虚拟的并在派生类中实现。

**编辑**：正如评论中正确指出的那样，不能在 ctor 中调用虚拟方法。

请注意，基类构造函数将在派生构造函数之前调用，因此您也可以执行以下操作：

```
class Animal {
public:
    Animal(const std::string &name) {doStuff(name);}

private:
    Animal(); // Now nobody can call it, no need to implement
}

class Dog : public Animal {
    Dog() : Animal("Dog") {}
} 
```

希望有帮助

# c# - WCF 服务的消息模式密码

> ID：10332731
> 
> 赞同：0
> 
> 时间：2012-04-26T11:44:58.360
> 
> 标签：c#, asp.net, wcf

我正在尝试使 WCF 服务正常工作，因此它具有简单的消息用户名/密码访问权限。

每当我尝试使用当前设置访问服务时，它都会显示：

```
Metadata publishing for this service is currently disabled. 
```

我的 web.config

```
 <system.serviceModel>
    <bindings>
      <wsHttpBinding>
        <binding name="Binding1">
          <!-- UsernameToken over Transport Security -->
          <security mode="Message" >
            <message clientCredentialType="UserName"/>
          </security>
        </binding>
      </wsHttpBinding>

    </bindings>
    <services>
      <service name="MyService" behaviorConfiguration="ServiceBehavior">
        <endpoint address="http://localhost/Service.svc" binding="wsHttpBinding" contract="IService" bindingConfiguration="Binding1">
          <identity>
            <dns value="localhost"/>
          </identity>
        </endpoint>
        <endpoint address="mex" binding="mexHttpsBinding" contract="IMetadataExchange"/>
      </service>
    </services>
    <behaviors>
      <serviceBehaviors>
        <behavior  name="ServiceBehavior">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata  httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
          <serviceCredentials>

            <!-- Use our own custom validation -->
            <userNameAuthentication userNamePasswordValidationMode="Custom"
                                                customUserNamePasswordValidatorType="WebApplication5.MyValidator, WebApplication5"/>
          </serviceCredentials>

        </behavior>
      </serviceBehaviors>
    </behaviors>
  </system.serviceModel>
</configuration> 
```

我的 MyService.svc：

```
namespace WebApplication5
{
    // NOTE: You can use the "Rename" command on the "Refactor" menu to change the    
class name "MyService" in code, svc and config file together.
    public class MyService : IMyService
    {
        public string DoWork()
        {
            return "You Got It";
        }
    }
} 
```

我的 MyValidator.cs：

```
namespace WebApplication5
{
    class MyValidator : UserNamePasswordValidator
    {
        public override void Validate(string userName, string password)
        {
            if ((userName == "shiv123") && (password == "pass123"))
            {
            }
            else
            {
                throw new FaultException("Invalid credentials");
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:48:58.243

您在 XML 中的服务应该包含命名空间。

尝试：

```
<service name="WebApplication5.MyService" ... 
```

# background - 如何在IE9上更改弹出背景颜色

> ID：10332741
> 
> 赞同：3
> 
> 时间：2012-04-26T11:45:38.970
> 
> 标签：background, popup, internet-explorer-9

IE9 弹出窗口在显示 PNG 图像时具有黑色背景色。我找到了一种适用于 Firefox 10（及更高版本）的解决方法，它还可以在弹出窗口中显示带有深色背景的 PNG。这是代码，这不适用于 IE9：

```
function openLarge() {
    var image = $('main-image').href;
    NewWin = window.open(image,"LargeImage","resizable=yes,scrollbars=auto,status=no,width=710,height=510");
    NewWin.document.writeln("<body bgcolor='#fff'>");
    NewWin.document.writeln("<img src='" + image + "'>");
    NewWin.document.writeln("<\/body>");
    NewWin.document.close();
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T16:18:59.800

这里的问题在于开幕地址。如果您删除`image`参考，并打开一个空白文档，您将设置您的背景。

我怀疑这与第一次加载资源时的标题有关。对于图像，内容类型将设置为`image/jpeg`or 什么，但随后我们尝试将文档视为`text/html`.

```
function openLarge() {
    var image = $('main-image').href;
    NewWin = window.open('',"LargeImage","resizable=yes,scrollbars=auto,status=no,width=710,height=510");
    NewWin.document.writeln("<body bgcolor='#fff'>");
    NewWin.document.writeln("<img src='" + image + "'>");
    NewWin.document.writeln("<\/body>");
    NewWin.document.close();
} 
```

# java - Java2D 和 ThinClients - 性能问题

> ID：10332744
> 
> 赞同：1
> 
> 时间：2012-04-26T11:45:50.523
> 
> 标签：java, performance, java-2d, hp-ux, thin-client

我有一个 Swing 应用程序，它在 HPUX 刀片上运行（在其他环境中）并显示在 ThinClients 上。不幸的是，我们是在 Windows 机器上开发的。

使用 Blade/ThinClient 设置时，我们遇到了严重的性能问题，我认为这可能是由于远程渲染造成的。UI 几乎无法使用（在 Windows 中对点击做出反应的表格小于 50 毫秒，例如，在单元格周围绘制焦点边框，在 HPUX 中执行相同操作需要 750 - 1500 毫秒）。

有没有人有类似的经历和 - 更好的 - 一种补救方法？[在我看来，这篇文章](http://java.sun.com/products/java-media/2D/perf_graphics.html#21826)的性能问题可能来自使用 alpha 混合或抗锯齿。应用程序或其中一个库中的某些代码完全有可能使用其中之一或两者。有没有一种简单的方法可以完全禁止它？也许是一些晦涩的，很少提及的 JVM 标志？

* * *

概括：

*   Swing App 在 HPUX Blade 上运行
*   在 ThinClient 上显示（X 转发）
*   与 windows / linux 台式电脑相比，严重的性能问题
*   我该如何优化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T05:00:26.990

围绕协议正在积极开发以解决这个问题：远程显示图形界面。两大巨头是 VMware (PCoIP) 和 Citrix (HDX)，微软加入了竞争（RDP 和 RemoteFX）。仅此一点就应该表明解决好这不是一个微不足道的问题。

结合上述协议，有各种瘦客户端可以显着改善您的体验（“最佳”是一个涉及营销的激烈争论，所以我不会深入讨论）。

由于您在 HPUX 环境中运行应用程序，因此您可以尝试[RGS](http://en.wikipedia.org/wiki/Remote_Graphics_Software)，尽管我认为它不是免费的。

为了以低廉的价格缓解问题，请尝试利用现有的远程桌面应用程序（如 VNC），即使用 VNC 远程登录，然后在本地显示您的 Swing 应用程序，并让 VNC 处理图形的远程处理。

# ruby-on-rails - Shapado 中的 Questions#index 中的错误 NoMethodError (Ruby on Rails)

> ID：10332746
> 
> 赞同：1
> 
> 时间：2012-04-26T11:45:55.223
> 
> 标签：ruby-on-rails, shapado

我是Shapado的新手。我正在尝试在我的笔记本电脑（MAC OS）中安装 shapado，当我尝试访问[http://localhost.lan:3000](http://localhost.lan:3000)时出现以下错误：

```
NoMethodError in Questions#index

Showing /Users/sciruela/Documents/shapado/shapado/app/views/shared/_login_drop_down.html.haml where line #10 raised:

undefined method `[]' for nil:NilClass
Extracted source (around line #10):

7:         = link_to provider.titleize, '/users/auth/facebook', :class => 'auth-provider Facebook', :id => 'facebook'
8:     - else
9:       %li
10:         = link_to provider.titleize, multiauth_url(provider), :class => "auth-provider #{provider}", :id => dprovider
11: 
12:   -if current_group.allow_any_openid
13:     %li
Trace of template inclusion: app/views/shared/_login_menu.html.haml, app/views/shared/_topbar.html.haml, app/views/layouts/application.html.haml

Rails.root: /Users/sciruela/Documents/shapado/shapado

Application Trace | Framework Trace | Full Trace
app/views/shared/_login_drop_down.html.haml:10:in `block in _app_views_shared__login_drop_down_html_haml__1123238317393261506_2159776840'
app/views/shared/_login_drop_down.html.haml:2:in `each'
app/views/shared/_login_drop_down.html.haml:2:in `_app_views_shared__login_drop_down_html_haml__1123238317393261506_2159776840'
app/views/shared/_login_menu.html.haml:6:in `_app_views_shared__login_menu_html_haml___434956048083202339_2193663100'
app/helpers/application_helper.rb:36:in `multiauth_dropdown'
app/views/shared/_topbar.html.haml:21:in `_app_views_shared__topbar_html_haml___2782218627514502243_2204427320'
app/views/layouts/application.html.haml:10:in `block in _app_views_layouts_application_html_haml___4514694021451724572_2205033860'
app/helpers/layout_helper.rb:74:in `call'
app/helpers/layout_helper.rb:74:in `block in ie_tag'
app/helpers/layout_helper.rb:72:in `ie_tag'
app/helpers/layout_helper.rb:79:in `ie_html'
app/views/layouts/application.html.haml:2:in `_app_views_layouts_application_html_haml___4514694021451724572_2205033860'
app/controllers/application_controller.rb:122:in `block (2 levels) in find_questions'
app/controllers/application_controller.rb:121:in `find_questions'
app/controllers/questions_controller.rb:67:in `index'
lib/sso_strategy.rb:18:in `call!'
app/middlewares/dynamic_domain.rb:17:in `call'
Request 
```

我怎么能解决它？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T12:09:46.527

在 Rails 中，`[]`充当读取器和`[]=`设置器。看起来问题发生在第 10 行的`multiauth_url(provider)`.

在这种情况下，提供者似乎也是`nil`如此。我建议使用`pry`(a gem) 并`binding.pry`进一步调试。您可能会假设提供者始终存在，因此请验证该提供者不是`nil`第一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-27T04:32:32.173

did you follow shapado's Readme? seems like you did not this step [https://github.com/ricodigo/shapado/blob/master/README#L25](https://github.com/ricodigo/shapado/blob/master/README#L25)

# python - 在调用 logger.setLevel 时使用变量

> ID：10332748
> 
> 赞同：59
> 
> 时间：2012-04-26T11:45:57.310
> 
> 标签：python, logging

有谁知道是否有办法在 Python 的 Logging 模块的 setlevel() 函数中使用变量？

目前我正在使用这个：

```
Log = logging.getLogger('myLogger')
Log.setLevel(logging.DEBUG) 
```

但我想要这个：

```
Log = logging.getLogger('myLogger')
levels = {'CRITICAL' : logging.critical,
    'ERROR' : logging.error,
    'WARNING' : logging.warning,
    'INFO' : logging.info,
    'DEBUG' : logging.debug
}
level = levels['INFO']
Log.setLevel(level) 
```

但它似乎不起作用 - 它只是没有记录任何东西。

我这样做是为了可以从单个配置文件中的变量为一大堆脚本设置日志记录级别。

* * *

## 回答 #1

> 赞同：132
> 
> 时间：2013-03-12T17:31:04.297

您还应该能够做到这一点：

```
Log = logging.getLogger('myLogger')
level = logging.getLevelName('INFO')
Log.setLevel(level) 
```

该`logging.getLevelName(lvl)`功能双向工作。我使用它，它可以工作（不过你应该检查你的 python 实现）。

这样可以省去维护自己字典的麻烦，并减少拼写错误的可能性。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-08-20T09:34:14.307

我在使用 python 3 时遇到了问题，这对我有用： [https ://docs.python.org/3/howto/logging.html](https://docs.python.org/3/howto/logging.html)

```
# myapp.py
import logging
import mylib

def main():
    logging.basicConfig(filename='myapp.log', level=logging.INFO)
    logging.info('Started')
    mylib.do_something()
    logging.info('Finished')

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2019-03-26T09:37:05.957

`logging.setLevel()`需要一个 int*或*一个 str。

所以以下工作很好（至少在 Python 3.7 中）：

```
logger = logging.getLogger(__name__)
logger.setLevel("DEBUG") 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-10-31T04:23:00.370

`getattr`在`logging`模块上使用怎么样？

```
import logging
str_level = 'DEBUG'
level = getattr(logging, str_level)
logger = logging.getLogger("my_logger")
logger.setLevel(level)
print(logger.getEffectiveLevel()) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-10-09T18:29:27.080

我发现利用可选的环境变量非常方便和灵活：

```
class Foo():
    def __init__(self):
        self.logger = logging.getLogger(__name__)
        level = logging.getLevelName(os.environ.get('LOG_LEVEL', 'ERROR'))
        logging.basicConfig(level=level)

    def bar(self):
        self.logger.debug('Log something') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-09-23T19:27:17.647

我能够在下面得到这个工作。我在 Docker 中使用它时添加了一个环境变量部分，但您可以根据需要添加它。这样您就可以选择您需要的内容并重新运行您的脚本。

```
#Manual Testing Variables If Needed
#os.environ["LOG_LEVEL_SELECTOR"] = "DEBUG, INFO, or ERROR"

#Setting Log Level Test
logger = logging.getLogger('json')
logger.addHandler(json_handler_out)
logger_levels = {
    'ERROR' : logging.ERROR,
    'INFO' : logging.INFO,
    'DEBUG' : logging.DEBUG
}
logger_level_selector = os.environ["LOG_LEVEL_SELECTOR"]
logger.setLevel(logger_level_selector) 
```

# iphone - 如何在两部 iPhone 之间传输视频？

> ID：10332750
> 
> 赞同：1
> 
> 时间：2012-04-26T11:46:06.970
> 
> 标签：iphone, video, stream, p2p

我正在构建一个在两个 iPhone 客户端之间输入和输出视频的应用程序。iPhone 之间的握手是由服务器完成的，但服务器仅此而已——服务器不进行流式传输。流媒体直接在 iphone 1 <-> iphone 2 之间完成。

如何创建此流？如何创建连接？使用每个iphone的IP？正常的网址连接？

# c# - 退出应用程序时后台线程未关闭

> ID：10332752
> 
> 赞同：1
> 
> 时间：2012-04-26T11:46:15.753
> 
> 标签：c#, multithreading

我的应用程序中有一个奇怪的错误：我有一个后台线程和多个普通线程。当我关闭应用程序时，所有正常线程最终都会退出，而后台线程继续工作。

我检查了并行堆栈，后台线程仍然是唯一一个在工作的线程。

如何检查应用程序是否正在退出，以便从内部退出后台线程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:14:37.390

如果您的应用程序有对后台线程的引用，请在应用程序终止时调用`thread.Abort()`方法。

根据使用的框架，还有其他选项。例如在 WPF 中，后台线程可以处理`Application.Exit`事件：

```
new Thread(new ThreadStart(() =>
{
    var thread = Thread.CurrentThread;

    Dispatcher.Invoke((Action)delegate
    {
        Exit += (obj, args) => thread.Abort();
    });

    while (true) ; // background thread is always busy
})).Start(); 
```

# iphone - MapKit addAnnotations：不工作

> ID：10332754
> 
> 赞同：0
> 
> 时间：2012-04-26T11:46:27.807
> 
> 标签：iphone, ios, ipad, ios5, mapkit

我有代码：

```
if (self.annotations) [self.mapView addAnnotations:self.mapView.annotations];
NSLog(@"mapView: %@, anos:%@",self.mapView,self.mapView.annotations); 
```

我得到下一个输出表单日志：

```
2012-04-26 14:35:53.823 FlickrClient[46441:11603] mapView: <MKMapView: 0x79c8b50; frame = (0 0; 320 367); clipsToBounds = YES; autoresize = W+H; layer = <CALayer: 0x79c62b0>>, anos:(
) 
```

据我了解，注释未添加`mapView` 到此代码之前的 Also 中，我有下一个日志记录内容：

```
for (id i in self.annotations)
{
    NSLog(@"%@, %i",i,[i conformsToProtocol:@protocol(MKAnnotation)]);
} 
```

它给出了：

```
...
2012-04-26 14:35:53.766 FlickrClient[46441:11603] <TopPlaceAnnotation: 0x6d8a590>, 1
2012-04-26 14:35:53.767 FlickrClient[46441:11603] <TopPlaceAnnotation: 0x6d8a5a0>, 1
2012-04-26 14:35:53.767 FlickrClient[46441:11603] <TopPlaceAnnotation: 0x6d8a5b0>, 1
2012-04-26 14:35:53.819 FlickrClient[46441:11603] <TopPlaceAnnotation: 0x6d8a5c0>, 1
2012-04-26 14:35:53.819 FlickrClient[46441:11603] <TopPlaceAnnotation: 0x6d8a5d0>, 1
2012-04-26 14:35:53.819 FlickrClient[46441:11603] <TopPlaceAnnotation: 0x6d8a5e0>, 1
... 
```

所以`self.annotations`存在并且都符合`MKAnnotation`。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T11:59:02.247

我认为有一个小错误，

这一行：

```
if (self.annotations) [self.mapView addAnnotations:self.mapView.annotations]; 
```

应该：

```
if (self.annotations) [self.mapView addAnnotations:self.annotations]; 
```

# ios - 在 iOS 和 Cocoa Touch 上，touchesBegan 和 timerFired 是否存在竞争条件？

> ID：10332758
> 
> 赞同：1
> 
> 时间：2012-04-26T11:46:43.097
> 
> 标签：ios, cocoa-touch

比如说，如果`timerFired`(timer handler) 被之前的设置使用`NSTimer`or调用`CADisplayLink`，并且`touchesBegan`在用户触摸屏幕时也被调用，那么两个处理程序（定时器处理程序和触摸事件处理程序）内部的代码中是否会发生任何竞争条件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T20:05:41.560

如果一个计时器处理程序`touchesBegan`都在主线程上运行，那么它们中的代码就不能混合（它们在同一个线程上）。这是正常情况。

可能存在竞争条件，即计时器可能在 之前或之后运行`touchesBegan`，但如果它们在同一个线程上，则它们不能同时运行。如果您将计时器附加到另一个线程的运行循环（这是一件非常不寻常的事情），它们只会在不同的线程上。

# c# - 如何通过服务将存储库中的事件冒泡到 UI？

> ID：10332759
> 
> 赞同：1
> 
> 时间：2012-04-26T11:46:59.150
> 
> 标签：c#, events, repository, repository-pattern

我有一个使用报告事件的组件的存储库。

我想在前端显示报告的事件。

这是存储库：

```
public interface IXmlRepository
{
    //irrelevant stuff removed
    event EventHandler TraceEventHandler;
}

public class XmlPanelRepository : IXmlRepository
{
    public XmlPanelRepository()
    {
        public event EventHandler TraceEventHandler;

        var panelCom = new PanelCom(); // this is a COM object that connects to a device

        // when something happens in the COM object it reports it.
        panelCom.Trace += panelCom_Trace; 

    // I want to bubble the trace events up to my UI.
        TraceEventHandler += TraceEventHandler_Tracing;
    }

    private void TraceEventHandler_Tracing(object sender, EventArgs e)
    {
        // what do I do here?
    }

    void panelCom_Trace(string message)
    {
        if (TraceEventHandler!= null) TraceEventHandler.Invoke(this, new EventArgs());
    }
} 
```

我的 UI 使用 Service 与存储库交互。服务定义为：

```
public interface IXmlConfigurationService
{
    //irrelevant stuff removed

    event EventHandler TraceEventHandler;
}

public class XmlConfigurationService : IXmlConfigurationService
{
    public event EventHandler TraceEventHandler;

    public XmlConfigurationService(IXmlRepository configurationRepository)
    {
        _configurationRepository.TraceEventHandler += ConfigurationRepository_TraceEventHandler;
    }

    void ConfigurationRepository_TraceEventHandler(object sender, EventArgs e)
    {
        // this never gets hit.
        if (TraceEventHandler != null) TraceEventHandler.Invoke(sender, e);
    }
} 
```

如果我能做到这一点，我想我可以按照相同的步骤来让 UI 显示事件报告。

如何让服务报告存储库中发生的事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T11:56:14.463

如果我理解正确，您将需要完成您的活动。这类似于 Observable 实现了观察者模式中的所有监听观察者。但是对于这样写的事件：

```
public XmlPanelRepository()
    {
        public event EventHandler TraceEventHandler;

        var panelCom = new PanelCom(); // this is a COM object that connects to a device

        // when something happens in the COM object it reports it.
        panelCom.Trace += panelCom_Trace; 

    // I want to bubble the trace events up to my UI.
        TraceEventHandler += TraceEventHandler_Tracing;
    }

    private void TraceEventHandler_Tracing(object sender, EventArgs e)
    {
        if (TraceEventHandler != null)
        {
              TraceEventHandler(this, e);
        }

    } 
```

但是，也许您应该为该事件命名，而不是`TraceEventHandler`因为您现在正在公开一个事件（通常以过去时表示）。

还值得注意的是，您可以在冒泡时更改事件参数（如果您愿意）。 [EventHandler(TEventArgs)](http://msdn.microsoft.com/en-us/library/db0etb8x.aspx)可以帮助解决这个问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-26T12:10:07.577

您忘记使用代表...尝试这样的事情：

```
public interface IXmlRepository
{
   //irrelevant stuff removed
   event EventHandler TraceEventHandler;
}

public class XmlPanelRepository : IXmlRepository
{
    public delegate void EventHandler(string parameter1, string parameter2);

    public event EventHandler TraceEventHandler;

    public XmlPanelRepository()
    {
        var panelCom = new PanelCom(); // this is a COM object that connects to a device

        // when something happens in the COM object it reports it.
        panelCom.Trace += panelCom_Trace; 

    }

    void panelCom_Trace(string message)
    {
        if (EventHandler != null)
          EventHandler("Event was hit, here's the message:", message);
    }
}

public interface IXmlConfigurationService
{
    //irrelevant stuff removed
}

public class XmlConfigurationService : IXmlConfigurationService
{
    public XmlConfigurationService(IXmlRepository configurationRepository)
    {
        _configurationRepository.TraceEventHandler += ConfigurationRepository_EventHandler;
    }

    void ConfigurationRepository_EventHandler(string parameter1, string parameter2);)
    {
        // Do something with your parameters.
        Response.Write(parameter1 + parameter2);
    }
} 
```

# java - 单击按钮时使画布无效？

> ID：10332761
> 
> 赞同：0
> 
> 时间：2012-04-26T11:47:08.843
> 
> 标签：java, android, button, invalidation

当我单击一个按钮时，我试图使我的画布无效。我有一个带有按钮的布局，下面我有一个画布视图。当我点击一个按钮时，圆圈应该隐藏或显示。现在在代码中，我只能使我的画布失效一次。当我第一次按下按钮时，它起作用了。但是当我按第二次时它不起作用。示例：如果我按隐藏，则显示它有效。但是当我再次按下隐藏按钮时它不起作用。当我单击一个按钮时，我希望 CanvasView 每次都无效。不仅是第一次。

```
public class CanvasWithButtonsActivity extends Activity {
    boolean showCircle = true;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(layout());

        findViewById(R.id.buttonHide).setOnClickListener(
                new OnClickListener() {      
                public void onClick(View v) {
                    //HIDE
                    showCircle = false;
                    //How do i invalidate my canvas from here?
                    CanvasView cv = new CanvasView(getApplicationContext());
                        cv.invalidate();
                }  
        });

        findViewById(R.id.buttonShow).setOnClickListener(
                new OnClickListener() {      
                public void onClick(View v) {
                    //SHOW
                    showCircle = true;
                    //How do i invalidate my canvas from here?
                    CanvasView cv = new CanvasView(getApplicationContext());
                        cv.invalidate();
                }  
        });
    }

    public RelativeLayout layout(){
        RelativeLayout mainLayout = new RelativeLayout(this);
        mainLayout.setLayoutParams(new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.FILL_PARENT,
                LinearLayout.LayoutParams.FILL_PARENT, 1));
        mainLayout.setBackgroundColor(Color.WHITE);

        View buttonLayout = LayoutInflater.from(getBaseContext()).inflate(R.layout.main, null);
        buttonLayout.setLayoutParams(new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.FILL_PARENT,
                LinearLayout.LayoutParams.FILL_PARENT, 1));
        CanvasView cv = new CanvasView(getApplicationContext());
        mainLayout.addView(cv);
        mainLayout.addView(buttonLayout);

        return mainLayout;
    }

    private class CanvasView extends View{

        public CanvasView(Context context) {
            super(context);
            // TODO Auto-generated constructor stub
        }

        protected void onDraw(Canvas myCanvas){
            Paint myPaint = new Paint();
            myPaint.setColor(Color.BLUE);
            if(showCircle == true)
                myCanvas.drawCircle(myCanvas.getWidth()/2, 100, 20, myPaint);
        }
    }
} 
```

如果有人对此问题有解决方案，它将解决我的许多问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T12:03:26.427

您似乎正在按钮处理程序中创建一个新的画布视图实例

```
CanvasView cv = new CanvasView(getApplicationContext());
cv.invalidate(); 
```

您可能想保留对它的引用，不是吗？

编辑：在您的 layout() 方法中，您创建一个视图实例。这里的 cv 是对它的引用。对于您的方法来说，它是本地的：

```
CanvasView cv = new CanvasView(getApplicationContext());
mainLayout.addView(cv);
mainLayout.addView(buttonLayout); 
```

你想让它成为全球性的（即类字段）。基本上是一个 Java 实例变量（比如你的布尔“showCircle”标志）。您可以从您的侦听器代码中使用它，就像您更改布尔“showCircle”标志一样。

另外，我建议阅读有关使用 XML 创建布局和使用 findViewById 方法定位视图的更多信息。

EDIT2：如果您实例化变量，您的代码将如下所示。（我在记事本中输入的可能错误）：

```
public class CanvasWithButtonsActivity extends Activity {
    boolean showCircle = true;
    private CanvasView mCanvasView;
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(layout());

        findViewById(R.id.buttonHide).setOnClickListener(
                new OnClickListener() {      
                public void onClick(View v) {
                    //HIDE
                    showCircle = false;
                    //How do i invalidate my canvas from here?
                    if (mCanvasView != null) {
                        mCanvasView.invalidate();
                    }
                }  
        });

        findViewById(R.id.buttonShow).setOnClickListener(
                new OnClickListener() {      
                public void onClick(View v) {
                    //SHOW
                    showCircle = true;
                    //How do i invalidate my canvas from here?
                    if (mCanvasView != null) {
                        mCanvasView.invalidate();
                    }
                }  
        });
    }

    public RelativeLayout layout(){
        RelativeLayout mainLayout = new RelativeLayout(this);
        mainLayout.setLayoutParams(new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.FILL_PARENT,
                LinearLayout.LayoutParams.FILL_PARENT, 1));
        mainLayout.setBackgroundColor(Color.WHITE);

        View buttonLayout = LayoutInflater.from(getBaseContext()).inflate(R.layout.main, null);
        buttonLayout.setLayoutParams(new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.FILL_PARENT,
                LinearLayout.LayoutParams.FILL_PARENT, 1));
        mCanvasView = new CanvasView(getApplicationContext());
        mainLayout.addView(mCanvasView);
        mainLayout.addView(buttonLayout);

        return mainLayout;
    }

    private class CanvasView extends View{

        public CanvasView(Context context) {
            super(context);
            // TODO Auto-generated constructor stub
        }

        protected void onDraw(Canvas myCanvas){
            Paint myPaint = new Paint();
            myPaint.setColor(Color.BLUE);
            if(showCircle == true)
                myCanvas.drawCircle(myCanvas.getWidth()/2, 100, 20, myPaint);
        }
    }
} 
```

# haskell - 如何使用 Haskell monadic 函数遍历树的元素？

> ID：10332762
> 
> 赞同：1
> 
> 时间：2012-04-26T11:47:08.983
> 
> 标签：haskell, tree, monads

我已经定义了一个表示树的新数据类型。我还实现了一个`walk`遍历树的所有元素的函数，该函数的功能版本是正确的，但不是他的一元版本`walkM`。

```
module Hdot where
import qualified Data.ByteString.Char8 as B
import qualified Data.Map as Map

data RDoll a = Null | RDoll a [RDoll a] deriving (Show)    

test :: RDoll Int
test = RDoll 1 [RDoll 2 [Null], RDoll 3 [RDoll 4 [Null]]]

walk :: (a -> b) -> RDoll a -> [b]

walk f Null          = []
walk f (RDoll x rds) = ((f x): (concatMap (\x -> walk f x) rds))

walkM :: (Monad m) => (a -> m b) -> RDoll a -> m [b]
walkM f Null            = return []
walkM f (RDoll rd rdss) = do
  x <- f rd
  xs <- concatMap (walkM f) rdss
  return (x:xs) 
```

有类型错误

```
Couldn't match type `b' with `[b]'
... 
```

有人能帮帮我吗！

感谢您的回复。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T11:53:38.643

通常，您应该提供完整的错误消息，因为它具有有价值的上下文：

```
A.hs:19:26:
    Could not deduce (m ~ [])
    from the context (Monad m)
      bound by the type signature for
                 walkM :: Monad m => (a -> m b) -> RDoll a -> m [b]
      at A.hs:(16,1)-(20,15)
      `m' is a rigid type variable bound by
          the type signature for
            walkM :: Monad m => (a -> m b) -> RDoll a -> m [b]
          at A.hs:16:1
    Expected type: [b]
      Actual type: m b
    Expected type: a -> [b]
      Actual type: a -> m b
    In the first argument of `walkM', namely `f'
    In the first argument of `concatMap', namely `(walkM f)' 
```

`[b]`因此，值列表和操作列表之间存在一些混淆`m b`。

可疑代码是您使用 concatMap`walkM`递归运行。我认为您的意思是使用`concatMapM`（例如`mapM`和`concat`）：

```
walkM :: (Monad m) => (a -> m b) -> RDoll a -> m [b]
walkM f Null            = return []
walkM f (RDoll rd rdss) = do
  x  <- f rd
  xs <- mapM (walkM f) rdss
  return (x:concat xs) 
```

* * *

作为关于风格的说明，我会尝试写一些不同的东西。看看[基础库中的玫瑰树](http://hackage.haskell.org/packages/archive/containers/latest/doc/html/src/Data-Tree.html#Tree)。特别是不要定义`walk`and `walkM`，为 Functor、Monad 定义实例并重用现有的库函数。

# iphone - iOS 以编程方式创建的 UIButton 动作在第三个 UIView 之后停止工作

> ID：10332763
> 
> 赞同：2
> 
> 时间：2012-04-26T11:47:09.543
> 
> 标签：iphone, objective-c, ios, uiscrollview, uibutton

我创建了一个很酷的应用程序，它以编程方式创建了 50 多个，`UIButtons`包括一个动作选择器。动作（播放声音）从 3 日`UIView`起停止工作。

在`UIView`里面`UIScrollView`并且使用分页。

我使用 iOS 5，但我认为这不是问题。此外，声音在`UIScrollView`. 此外，如果我更改按钮的数量（或多或少），声音总是很有吸引力，直到我到达第 3 页：/

这里的代码：

```
- (void)setButtons
{
    int screenWidth = 320;
    int screenHeight = 410;

    int rows = krows;
    int cols = kcols;
    int marginLeft = kmarginLeft;
    int height = kheight;
    int buttonWidth = kbuttonWidth;
    int buttonHeight = kbuttonHeight;
    int delta = kdelta; // gap between buttons
    int startPosY = kstartPosY; 
    int startPosX = kstartPosX;
    int posY = startPosY;
    int posX = startPosX;
    int contentWidth = screenWidth;
    int intStart = 0;

    NSMutableDictionary *dict = [Persistence getDictFromParam:@"Bud"];
    NSArray *keys = [dict allKeys];

    // sort keys 
    NSArray *sortedKeys = [keys sortedArrayUsingSelector:@selector(caseInsensitiveCompare:)];

    int len = keys.count; //50;
    NSLog(@"len: %d", len);

    CGSize scrollViewContentSize = CGSizeMake(screenWidth, screenHeight);
    [scrollView setContentSize:scrollViewContentSize];

    for( int i = intStart; i < len; i++ ) {
        UIButton* aButton = [UIButton buttonWithType:UIButtonTypeCustom];
        [aButton addTarget:self action:@selector(sound1Action:) forControlEvents:UIControlEventTouchUpInside];

        NSString *key = [sortedKeys objectAtIndex:i];

        if (i > 0) {
            posY += delta + height;

            int mod = i % rows;
            if(mod == 0) {
                int mod2 = i % (rows*cols);
                if(mod2 == 0) {
                    posX += marginLeft;
                }
                posX += (marginLeft + buttonWidth);

                // extend pages
                if(posX > contentWidth) {
                    contentWidth += screenWidth;
                    CGSize scrollViewContentSize = CGSizeMake(contentWidth, screenHeight);
                    [scrollView setContentSize:scrollViewContentSize];
                }
                posY = startPosY;
            }
        }

        [aButton setFrame:CGRectMake(posX, posY, buttonWidth, buttonHeight)];
        NSString *title = [[NSString alloc] initWithFormat:@"%@", key];

        [aButton setBackgroundImage:[UIImage imageNamed:@"button_normal.png"] forState:UIControlStateNormal];
        [aButton setBackgroundImage:[UIImage imageNamed:@"button_pushed.png"] forState:UIControlStateHighlighted];
        [aButton setBackgroundImage:[UIImage imageNamed:@"button_pushed.png"] forState:UIControlStateSelected];
        [aButton setTitle:title forState:UIControlStateNormal];

        [aButton setTag:i];
        NSLog(@"%@: %d",title, aButton.tag);
        [contentView addSubview:aButton];
    }

    [scrollView setPagingEnabled:YES];
}

- (void)sound1Action:(id)sender {
    UIButton *button = (UIButton*)sender;
    int i = button.tag;
    BackgroundMusic *backgroundMusic = [BackgroundMusic sharedInstance];

    NSArray *sortedKeys = [self sortedDict];
    NSString *val = [[self getDict] objectForKey:[sortedKeys objectAtIndex:i]];
    NSLog(@"%@",val);

    NSURL *url = [[NSBundle mainBundle] URLForResource:val withExtension:nil];
    NSString *pathUrl = [url path];

    backgroundMusic.player=[[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:pathUrl] error:NULL]; 

    [backgroundMusic.player stop];
    [backgroundMusic.player play];

    [backgroundMusic player].volume = 0.5;
    backgroundMusic.player.numberOfLoops = 0; //-1; initite
} 
```

# database - 在一个表中维护 3 个小列还是 1 个大列更好？

> ID：10332764
> 
> 赞同：1
> 
> 时间：2012-04-26T11:47:24.397
> 
> 标签：database, oracle

三个小数列 [Number(1)] >>

```
OptionA | 0/1
OptionB | 0/1
OptionC | 0/1 
```

或更大的字符串列 [Varchar2(29)] >>

```
Options | OptionA=0/1|OptionB=0/1|OptionC=0/1 
```

我不确定数据库处理表的方式，但我认为将三列保持为 Number(1) 比将一列保持为 Varchar2(29) 更好！

-编辑-

让我再解释一下情况：

我正在开发一个通用框架，在该框架中跟踪所有传入/传出的请求/响应，这些交互可以引导到 DB/File/JMS；现在所有配置都从一个表中加载，该表有一列对应于输出类型，目前我使用“DB=1|FILE=1|JMS=0”作为该列的值，以便稍后如果任何人都想为他们的模块添加这个，他们可以很容易地理解发生了什么，在我的代码中，我编写了一个简单的逻辑，用“|”分割字符串 然后我使用独占或运算符使用开关盒在选择之间切换..

一切都已经完成，但我不喜欢一个大列优于三个小列的想法 + 它会删除我正在做的拆分字符串。

-编辑-

我终于明白了，可能存在我们必须添加更多选项的情况；在这种情况下，如果我们明智地添加数据列，它将导致修改表+更改实体+添加更多 if's n all；另一方面，我最终以简单的位逻辑从它中提取了一个枚举，以在选项之间切换；这样，我需要修改枚举并为新选项添加​​一个新的处理程序，然后我们就可以开始了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-27T05:25:34.317

使用单个列存储多条数据可能是您在数据库中可以做的最糟糕的事情。

违反第一范式至少有以下缺点：

1.  **更难查询。** `OptionA = 1 and OptionB = 1 and OptionC = 0`与`substr(options, 9, 1) = '1' and substr(options, 19, 1) = '1' and substr(options, 19, 1) = '0'`.
2.  **不太灵活。** 当您需要添加另一个选项时会发生什么？添加新列很容易。添加新格式可能会弄乱旧查询。例如，如果有人尝试使用`substr(options, -1, 1)`. （尽管这是使用第三个选项的一个很好的理由 - 一个单独的表格。）
3.  **没有类型安全。** 这可能是一个非常微妙和棘手的问题。假设您写`substr(options, 9, 1) = 1`而不是`substr(options, 9, 1) = '1'`. 如果有人把格式弄错了，一个值可能会毁掉很多查询。或者更糟糕的是，它只是间歇性地使少量查询崩溃，因为访问路径不断变化。（尽管您可以通过检查约束来防止这种情况。）
4.  **较慢的查询。** 通常，在表达式或条件中完成的工作量对于查询来说并不是很大的成本。但是添加许多不必要的字符串操作会有所作为。
5.  **少优化。** 只有 Oracle 能够理解您的数据，它才能构建高效的查询计划。例如，假设 OptionA 99.9% 的时间为“0”。当您进行过滤时`OptionA = 0`，Oracle 可以使用直方图对返回的行数做出非常准确的预测。但因为`substr(options, 9, 1) = '1'`你只会得到一个疯狂的猜测。如果您有使用此列的复杂查询，您可能会花费大量时间尝试“修复”基数估计。（虽然也许表达统计可以帮助解决这个问题？）

有时非规范化是个好主意。例如，如果您有 TB 的数据，并压缩表，则单个列可能占用更少的空间。（但如果你想节省空间，为什么不使用像“000”这样的格式呢？）。

如果确实有充分的理由，那么肯定需要记录在案。也许在专栏上添加评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T12:09:46.027

首先，如果我正确地阅读了您的问题，您希望每个选项都具有两个可能的值之一，对吗？

如果是这样，那么您可以：

*   每个选项都有一个单独的整数（或布尔）列
*   有一`options`列是 1 和 0 的字符串，每个选项一个数字，例如“001”
*   使用整数的“选项”列，并为每个选项使用一个位值，例如 optionA == options & 1、optionB == options & 2 等。
*   某些数据库具有您可以使用的位向量数据类型。对于 mysql 有`BIT`数据类型，它可以存储长达 64 位的位串。

对于这些中的每一个，都将在代码复杂性和效率之间进行权衡。问问自己，通过使用这些选项中的每一个，将节省多少机器的时间或存储空间？*您*将节省多少时间？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T12:32:30.267

在这种情况下，我会推荐 3 列方法，这不仅在提取数据方面使事情变得简单，而且您是否希望可以针对所有 3 列设置值，而不是仅限于一个 VarChar2 字段。如果您选择单列 VarChar2，那么使用 substr 命令或其他变体提取您需要的信息相当简单，虽然这对于 Oracle 数据库来说不是繁重的工作，但它确实在服务器上增加了额外的工作这是没有必要的。

# wpf - 触发多条件 DataTrigger 不起作用？

> ID：10332766
> 
> 赞同：1
> 
> 时间：2012-04-26T11:47:26.423
> 
> 标签：wpf, themes, datatrigger

我被困在某事上，希望得到一个简单的答案。首先，我有一个具有多重绑定触发器的主题。

```
<DataTrigger Value="True">
  <DataTrigger.Binding>
    <MultiBinding Converter="{StaticResource MyConverter}" >
      <Binding Path=".TemplatedParent" RelativeSource="{RelativeSource Self}" />
      <Binding Path="IsEnabled" RelativeSource="{RelativeSource Self}" />
    </MultiBinding>
  </DataTrigger.Binding>
  <Setter Property="Background" Value="{StaticResource NewBackgroundColor}" />
  <Setter Property="BorderBrush" Value="{StaticResource NewBorderBrushColor}" />
</DataTrigger> 
```

我的数据控件文本框、组合框实现了 INotifyPropertyChanged。

在处理过程中，在某些条件下，我想引发“IsEnabled”发生变化的事件，但实际上并没有改变它的值。因此，多重绑定永远不会被触发。由于转换器的第一个参数是控制对象本身，它永远不会“改变”，所以它只是作为转换器的参数来使用。

实际触发触发器的唯一方法是执行类似的操作

```
MyControl.IsEnabled = false;
MyControl.IsEnabled = true; 
```

还有其他方法可以强制触发多绑定数据触发器吗？

尝试详细说明我的问题。我对基本控件（文本框、组合框、按钮等）进行了子类化，以添加某些设置/功能等。为了它们的共性，它们都支持“IMyCommonInterface”接口。无需重新定义整个“主题”（例如，简单的文本框），我想像进行数据验证一样有条件地更改颜色，但不仅仅是这些示例属性的简单颜色更改。

由于基本文本框不知道“IMyCommonInterface”，也没有自定义属性，因此我创建了一个转换器类“MyConverter”，它将实际控件对象作为第一个参数。现在，在隐蔽器中，我可以做到

```
if( values[0] is IMyCommonInterface ) 
```

然后，我可以对界面进行类型转换并检查所有我想要的任何特殊条件，而不必显式创建say.. 十几个触发器，每个触发器基于 A+B 或 A+C 或 (A+B NOT C) OR D 等。

所以，我不想有一堆不同的主题、一堆触发器等等，只是一个可以使用的集中元素。我正在寻找其他替代方案，但如果我遇到一个实例，即仅抛出 PropertyChanged 事件也不会强制数据触发，我宁愿现在找出来，同时仍然试图理解 .网络有，你基本上可以指向几乎任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T21:56:09.200

这只是一个想法...

由于您已经对基本控件进行了子类化。为什么不添加另一个属性。您可以添加一个 bool DependencyProperty（我们称之为“IsTriggered”）以及切换该属性的方法

```
public void ReEvaluateTrigger()
{
    IsTriggered = !IsTriggered;
}

public static readonly DependencyProperty IsTriggeredProperty =
        DependencyProperty.Register("IsTriggered", typeof(bool), typeof(ButtonEx), new FrameworkPropertyMetadata(false));

public bool IsTriggered
{
    get { return (bool)GetValue(IsTriggeredProperty); }
    set { SetValue(IsTriggeredProperty, value); }
} 
```

然后在必要的时候，无论您的情况如何，您在代码中所要做的就是调用 myControl。

```
MyControl.ReEvaluateTrigger() 
```

这应该导致触发器重新评估：

```
 ...taken from your code with a change to binding to IsTriggered
 <Binding Path="IsTriggered" RelativeSource="{RelativeSource Self}" /> 
```

我把它放在我的快速测试中，只是为了看看 IsEnabled 是否会切换（我知道这很简单，但这只是一个快速测试）：

```
<Button Content="push to trigger enabled below" Click="Button_Click"/>
<Sample:ButtonEx x:Name="ButtonToBeTriggered"  IsEnabled="{Binding Path=IsTriggered, RelativeSource={RelativeSource Self}}"
            Content="ButtonToBeTriggered" Width="100" Height="50" Margin="50"/>

//where in code behind
private void Button_Click(object sender, RoutedEventArgs e)
    {
        ButtonToBeTriggered.ReEvaluateTrigger();
    } 
```

在测试中，我扩展了

公共类 ButtonEx : 按钮

我在那里创建了 ReEvaluateTrigger() 以及触发器......无论如何，只是一个想法！

# c - C 中 sizeof 运算符的行为

> ID：10332774
> 
> 赞同：6
> 
> 时间：2012-04-26T11:48:02.730
> 
> 标签：c, struct, sizeof

我的代码出现异常行为，如下所示

```
#include<stdio.h>
struct a
{
    int x;
    char y;
};
int main()
{   
   struct a str;
   str.x=2;
   str.y='s';
   printf("%d %d %d",sizeof(int),sizeof(char),sizeof(str));
   getch();
   return 0;
} 
```

对于这段代码，我得到了输出：

```
4 1 8 
```

据我所知，该结构包含一个大小为 4 的整数变量和一个大小为 1 的 char 变量，因此结构 a 的大小应该是 5。但是结构的大小怎么是 8。我正在使用 Visual C++ 编译器。为什么会有这种行为？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-26T11:53:36.447

它被称为[结构填充](http://clinuxpro.com/structure-padding)

在内存中以及在 RAM 和 CPU 之间移动数据时，具有以 4 字节字对齐开始的数据结构（在具有 4 字节总线和处理器的 CPU 上）要高效得多。

您通常可以使用编译器选项和/或编译指示将其关闭，这样做的细节将取决于您的特定编译器。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-26T11:50:52.903

编译器插入填充以进行优化和对齐。在这里，编译器在两个成员之间（或之后）插入 3 个虚拟字节。

`#pragma`您可以使用指令处理对齐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-15T10:58:53.900

主要是为了说明这种填充实际上是如何工作的，我对您的程序进行了一些修改。

```
#include<stdio.h>
struct a
{
  int x;
  char y;
  int z;
};
int main()
{   
   struct a str;
   str.x=2;
   str.y='s';
   str.z = 13;

   printf ( "sizeof(int) = %lu\n", sizeof(int));
   printf ( "sizeof(char) = %lu\n", sizeof(char));
   printf ( "sizeof(str) = %lu\n", sizeof(str));

   printf ( "address of str.x = %p\n", &str.x );
   printf ( "address of str.y = %p\n", &str.y );
   printf ( "address of str.z = %p\n", &str.z );

   return 0;
} 
```

请注意，我在结构中添加了第三个元素。当我运行这个程序时，我得到：

```
amrith@amrith-vbox:~/so$ ./padding 
sizeof(int) = 4
sizeof(char) = 1
sizeof(str) = 12
address of str.x = 0x7fffc962e070
address of str.y = 0x7fffc962e074
address of str.z = 0x7fffc962e078
amrith@amrith-vbox:~/so$ 
```

下面突出显示了说明填充的部分。

```
address of str.y = 0x7fffc962e074
address of str.z = 0x7fffc962e078 
```

虽然 y 只是一个字符，但请注意 z 是一个完整的 4 个字节。

# php - preg_replace 从替换子句中排除“.html”

> ID：10332776
> 
> 赞同：0
> 
> 时间：2012-04-26T11:48:07.387
> 
> 标签：php, preg-replace

我正在使用以下 preg_replace() 调用来用新结构替换链接：

```
preg_replace('/example.com\/sub-dir\/(.*)">/', 'newsite.co.uk/sub-dir/$1.html">', $links); 
```

它几乎可以工作，除了它没有将“.html”添加到替换的末尾，所以它最终会像“newsite.co.uk/sub-dir/page-identifier”而不是“newsite. co.uk/sub-dir/page-identifier.html”。

我确信我错过了一些简单的事情，但是谷歌搜索问题并没有得出任何有用的结果，所以我希望这里有人可以提供帮助！

提前致谢！

编辑：例如，这里是 $links 的链接端

```
<a href="http://example.com/sub-dir/the-identifier">Anchor</a> 
```

如果我将正则表达式更改为 (.*?) 则上述示例有效，但以下示例无效：

```
<a class="prodCatThumb" title="View product" href="http://example.com/sub-dir/product-identifier"> 
```

它最终成为

```
<a class="prodCatThumb.html" title="View product" href="http://example.com/sub-dir/product-identifier"> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:53:59.057

是的，它`.*`
只是`?`像这样添加：`.*?`

例子：

```
<?php
    $links = "example.com/sub-dir/myfile.php";
    $links = preg_replace('/example.com\/sub-dir\/(.*?)/', 'newsite.co.uk/sub-dir/$1.html', $links);
    echo $links;
?> 
```

**编辑：** @Ashley：当然，问号使正则表达式中的前面的标记是可选的。例如： colou?r 匹配颜色和颜色（来自[此链接](http://www.regular-expressions.info/optional.html)）。

但是，当您将它与 ? 这是未准备好的方法（这可能有助于解释：[带有 .* 的正则表达式？（点星号）匹配太多？](https://stackoverflow.com/questions/9689504/regular-expression-with-dot-star-questionmark-matches-too-much)或者这个：[http://www.phpro.org/tutorials/Introduction-to-PHP-Regex。 html](http://www.phpro.org/tutorials/Introduction-to-PHP-Regex.html) )

所以，回答你的qq：

```
<?php
    $links = '<a class="prodCatThumb" title="View product" href="example.com/sub-dir/product-identifier">';
    $links = preg_replace('/example.com\/sub-dir\/(.*?)"/', 'newsite.co.uk/sub-dir/$1.html"', $links);
    echo $links;
?> 
```

此链接的输出：
`<a class="prodCatThumb" title="View product" href="example.com/sub-dir/product-identifier">`
现在将是：
`<a class="prodCatThumb" title="View product" href="newsite.co.uk/sub-dir/product-identifier.html">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:54:12.203

我们需要查看内容`$links`以便更好地理解问题。

同时你可以试试：

```
preg_replace('#example\.com/sub-dir/([^"]*)">#', 
             'newsite.co.uk/sub-dir/$1.html">', $links); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T12:00:03.593

我刚刚使用[此测试页面](http://www.functions-online.com/preg_replace.html)来检查您的正则表达式，它与您提供的示例文本 ( `<a href="http://example.com/sub-dir/the-identifier">Anchor</a>`) 配合得很好。你确定没有其他东西给你造成问题吗？

测试站点返回以下内容：`<a href="http://newsite.co.uk/sub-dir/the-identifier.html">Anchor</a>`

# jquery-mobile - jQuery 移动复选框分组在 2 个垂直列中？

> ID：10332780
> 
> 赞同：5
> 
> 时间：2012-04-26T11:48:23.317
> 
> 标签：jquery-mobile

我需要将复选框组合在一起，但分为 2 列。在下图中，我创建了 2 个不同的字段集。我知道这不是很语义化，但它显示了我想要实现的布局。

![在此处输入图像描述](../Images/83ea67c078801dcfee98aba197975b3e.png)

有没有标准的 jQuery Mobile 方法来做到这一点？

我希望复选框看起来像是属于一个部分。我可以去掉绿色左上角、粉红色左下角和蓝色右下角的圆角。我需要为此使用标准 CSS 覆盖还是有更优雅的方法？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T12:41:12.367

我想你想看看：http `Layout Grids`: [//jquerymobile.com/test/docs/content/content-grids.html](http://jquerymobile.com/test/docs/content/content-grids.html)

```
<div class="ui-grid-a">
    <div class="ui-block-a">
             <label><input type="checkbox" name="checkbox-1" /> Any</label>
             <label><input type="checkbox" name="checkbox-1" /> Red </label>
        </div>
    <div class="ui-block-b">
             <label><input type="checkbox" name="checkbox-1" /> Green </label>
             <label><input type="checkbox" name="checkbox-1" /> Black </label>
        </div>
</div><!-- /grid-a --> 
```

**更新**

根据您的评论，不，您不能将两个单独的列组合为一个`fieldset`。

字段集`data-role="controlgroup"`上的删除边距和填充以提供分组效果，但最终得到的是这样的：http: [//jsfiddle.net/shanabus/qNYPh/1/](http://jsfiddle.net/shanabus/qNYPh/1/)

但是，如果您对一个父`fieldset`级和两个嵌套的、分组的字段集没问题……那么您最终可以得到这样的解决方案：http: [//jsfiddle.net/shanabus/hcyfK/1/](http://jsfiddle.net/shanabus/hcyfK/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-25T18:17:42.253

shanabus 用他的嵌套分组解决方案给出了一个很好的答案：http: [//jsfiddle.net/shanabus/hcyfK/1/](http://jsfiddle.net/shanabus/hcyfK/1/)

您可以通过将适当的 css 'border radius' 值设置/覆盖为零来更进一步，以消除您需要的任何角，以摆脱接触的圆角并获得更一致的外观。

根据示例：

```
<label for="radio-choice-1" style="border-top-right-radius: 0">Cat</label>
<label for="radio-choice-2" style="border-bottom-right-radius: 0">Dog</label>
<label for="radio-choice-3" style="border-top-left-radius: 0">Hamster</label>
<label for="radio-choice-4" style="border-bottom-left-radius: 0">Lizard</label> 
```

是的，我是个坏人，因为我没有将 html 和 css 分开，但这是一个例子。:-)

# android - 适用于 Android 画布的 Admob

> ID：10332781
> 
> 赞同：1
> 
> 时间：2012-04-26T11:48:37.673
> 
> 标签：android, project, admob, android-canvas

我有一个正在进行的项目，我想在 android 的画布上放置 Admob 广告。是否可以在 Android 的 Canvas 上放置 Admob 广告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:08:39.497

您可以将您的画布持有视图放置在 FrameLayout 和 admob AdView 中，例如

```
<FrameLayout>
    <CanvasView/>
    <AdView/>
</FrameLayout> 
```

此外，如果您的视图很复杂并且您不希望对性能产生重大影响，您可以将其绘制在单独的窗口层中。[在这里](https://stackoverflow.com/questions/9681436/xml-framelayout-has-lowered-my-opengl-surfaceview-framerate-fps/10294418#10294418)查看我的答案。

# java - 在android中旋转保存的位图

> ID：10332783
> 
> 赞同：7
> 
> 时间：2012-04-26T11:48:46.900
> 
> 标签：java, android, bitmap, android-image

我正在从处于横向模式的相机中保存图像。所以它会以横向模式保存，然后我在其上应用一个也处于横向模式的叠加层。我想旋转该图像然后保存。例如，如果我有这个

![在此处输入图像描述](../Images/0c1fa0eaa424236283cf07804f1d5cfd.png)

我想顺时针旋转一次 90 度，然后将其保存到 sdcard：

![在此处输入图像描述](../Images/5d60151a9a71078edd223e78da93676f.png)

这要如何实现？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-26T11:57:02.717

```
void rotate(float x)
    {
        Bitmap bitmapOrg = BitmapFactory.decodeResource(getResources(),R.drawable.tedd);

        int width = bitmapOrg.getWidth();

        int height = bitmapOrg.getHeight();

        int newWidth = 200;

        int newHeight  = 200;

        // calculate the scale - in this case = 0.4f

         float scaleWidth = ((float) newWidth) / width;

         float scaleHeight = ((float) newHeight) / height;

         Matrix matrix = new Matrix();

         matrix.postScale(scaleWidth, scaleHeight);
         matrix.postRotate(x);

         Bitmap resizedBitmap = Bitmap.createBitmap(bitmapOrg, 0, 0,width, height, matrix, true);

         iv.setScaleType(ScaleType.CENTER);
         iv.setImageBitmap(resizedBitmap);
    } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-01-05T18:46:17.500

检查这个

```
public static Bitmap rotateImage(Bitmap src, float degree) 
{
        // create new matrix
        Matrix matrix = new Matrix();
        // setup rotation degree
        matrix.postRotate(degree);
        Bitmap bmp = Bitmap.createBitmap(src, 0, 0, src.getWidth(), src.getHeight(), matrix, true);
        return bmp;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T11:58:24.057

您可以使用 Canvas API 来执行此操作。请注意，您需要切换宽度和高度。

```
 final int width = landscapeBitmap.getWidth();
    final int height = landscapeBitmap.getHeight();
    Bitmap portraitBitmap = Bitmap.createBitmap(height, width, Bitmap.Config.ARGB_8888);
    Canvas c = new Canvas(portraitBitmap);
    c.rotate(90, height/2, width/2);
    c.drawBitmap(landscapeBitmap, 0,0,null);
    portraitBitmap.compress(CompressFormat.JPEG, 100, stream); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-26T11:51:43.510

使用 Matrix.rotate(degrees) 并使用该旋转矩阵将位图绘制到它自己的画布上。我不知道您是否可能需要在绘制之前制作位图的副本。

使用 Bitmap.compress(...) 将您的位图压缩为输出流。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-30T12:37:59.140

Singhak 的解决方案效果很好。如果您需要适合结果位图的大小（可能是 ImageView），您可以按如下方式扩展该方法：

```
public static Bitmap rotateBitmapZoom(Bitmap bmOrg, float degree, float zoom){
    Matrix matrix = new Matrix();
    matrix.postRotate(degree);

    float newHeight = bmOrg.getHeight() * zoom;
    float newWidth  = bmOrg.getWidth() / 100 * (100.0f / bmOrg.getHeight() * newHeight);

    return Bitmap.createBitmap(bmOrg, 0, 0, (int)newWidth, (int)newHeight, matrix, true);
} 
```

# hibernate - 使用 Hibernate 搜索的高级搜索

> ID：10332784
> 
> 赞同：7
> 
> 时间：2012-04-26T11:48:50.553
> 
> 标签：hibernate, hibernate-search, advanced-search

在我的一个应用程序中，我要对多个字段/列执行搜索。它是一个高级搜索，用户可以使用 20 多个字段来搜索结果。例如，用户可以根据以下内容搜索预订

1.  预订编号
2.  乘客姓名
3.  乘客年龄
4.  从位置
5.  到位置
6.  预订状态
7.  航空公司名称

和13个这样的领域。

我想弄清楚是否

1.  Hibernate Search 可以而且应该在这里使用吗？如果是这样，怎么做？我无法找到使用 Hibernate Search 进行如此复杂搜索的示例。

2.  代替 Hibernate 搜索，我可以简单地使用 Hibernate，并且可能根据参数的数量设计一个多线程搜索。这是个好主意吗？

3.  是否可以在这里使用休眠过滤器？

有人可以提供输入或参考链接吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T08:21:56.740

我认为你的决定应该基于对容量的要求。普通的 Hibernate 查询可能足以在这些字段上进行搜索。

如果您想使用反向索引快速获取大量数据的搜索查询，Hibernate Search 将有所帮助。例如，您应该做的是以未来 5 年的预期容量加载数据库。如果您的普通 Hibernate 查询被认为是可以接受的，我认为您应该坚持使用普通的 Hibernate 查询。

您也可以在后期引入 Hibernate Search。

编辑：您可以选择不使用 Hibernte Search，转而使用 Apache Lucene。您可以生成自己的 Apache Lucene 索引。这样您就不必担心要查找记录的字段，因为您将完全控制标记化和索引过程的方式。如果选择这种方式，您可以将行名和列名存储为搜索结果的一部分。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T18:37:30.617

For these kinds of queries, I generally use a `Criteria` query with a form object. I then check for `null` in each passed form field, and if not `null`, then add another `Restriction` into the query, using that field. Using a `Criteria` query keeps the Java code very clean and eliminates messy string concatenation. An example for your case:

```
// Form object
public class bookingSearchForm {
    private String bookingId;
    public getBookingId()...
    public setBookingId()...
}

// Hibernate
Criteria criteria = getSession().createCriteria(Booking.class);
if(form.getBookingId() != null) {
    criteria.add(Restrictions.eq("bookingId", form.getBookingId()));
}
criteria.list(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-02T17:24:05.953

是的，Hibernate Search 在这种情况下会非常有用。您可以使用过滤器，但 Hibernate Search 也有过滤器。

# php - 趋势线未显示在我的图表中

> ID：10332785
> 
> 赞同：0
> 
> 时间：2012-04-26T11:48:52.253
> 
> 标签：php, fusioncharts, trendline

我正在为我的折线图使用趋势线。但它在我的浏览器中不可见。谁能告诉我原因。下面我给出代码：

```
<?php
include("Includes/FusionCharts.php");
include("Includes/DBconn.php");
include("Includes/FC_Colors.php");
?>
<html>
    <title> Blood Pressure</title>
    <head>
        <script language="javascript" src="FusionCharts/FusionChart.js"></script>

    </head>
    <body>
    <center>
        <?php

        //connect to the DB
        $link= connectToDB();

        $query =  "select * from patient_health order by ondate";

        $result=mysql_query($query)or die(mysql_error());
        //echo $result;
        $strXML = "<graph caption='Blood Pressure Reading' subCaption='Month wise' xaxisname='Current Month' yaxisname='Blood Pressure(Systolic/diastole)'  yAxisMaxValue='400'
    animation='1' rotatenames='1'>";
$categories = "<categories>";
$systolic = "<dataset seriesName='systole'>";
$diaolic = "<dataset seriesName='diastole'>";
while ($row = mysql_fetch_array($result)) {
    $categories .= "<category name='" . $row["ondate"] . "' />";
    $systolic .= "<set color='AFD8F8' value='" . $row["systole_reading"] . "'  hoverText='systolic' />";
    $diaolic .= "<set value='" . $row["diastole_reading"] . "' color='FEDCBC' hoverText='diastolic'/>";
}
$strXML .= $categories . "</categories>" . $systolic . "</dataset>" . $diaolic . "</dataset>" . "</graph>";
**$strXML .=" <trendlines>
    <line startValue='140' color='91C728' displayValue='Target' showOnTop='1'/>
  </trendlines>";**
//$strXML now has the complete XML required to render the multi-series chart.

//Create the chart - Pie 3D Chart with data from $strXML
   echo renderChartHTML("FusionCharts/FCF_MSLine.swf", "", $strXML, "BloodPressure", 850, 450,false);
   //echo renderChartHTML("FusionCharts/FCF_MSBar2D.swf", "", $strXML, "BloodPressure", 850, 450,false);

       ?>

    </center>

    </body>

</html> 
```

我是否正确放置了代码，或者我必须更改它。谁能给我解决方案

提前谢谢你拉姆塞

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:06:15.353

似乎在您的代码中，您在`<graph>`添加之前关闭了标签`<trendlines>`！

正确的代码是：

```
$strXML .= $categories . "</categories>" . $systolic . "</dataset>" . $diaolic . "</dataset>";

$strXML .=" <trendlines>
    <line startValue='140' color='91C728' displayValue='Target' showOnTop='1'/>
  </trendlines>" . "</graph>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T12:03:53.093

趋势线的代码应该在您关闭图形元素之前出现，即在 `</graph>`.

如下图所示：

```
}
**$strXML .=" <trendlines>
    <line startValue='140' color='91C728' displayValue='Target' showOnTop='1'/>
  </trendlines>";**
$strXML .= $categories . "</categories>" . $systolic . "</dataset>" . $diaolic . "</dataset>" . "</graph>"; 
```

这应该显示您的趋势线。

# ios - 在蒙版动画上保持取消蒙版图像

> ID：10332787
> 
> 赞同：0
> 
> 时间：2012-04-26T11:48:58.110
> 
> 标签：ios, core-animation

我正在尝试产生一种效果，起初整个屏幕都被遮住了。当球在屏幕上移动时，球会揭开它所在的区域，而它所在的区域仍然没有被遮盖。

我有以下代码：

```
CALayer * ball = [CALayer layer];
ball.bounds = CGRectMake(0, 0, 42, 42);
ball.position = [[[alphabet controls] objectAtIndex:0] CGPointValue];
ball.contents = (id)([UIImage imageNamed:@"done.png"].CGImage);
[self.layer addSublayer:ball];

[self.layer setMask:ball];

CAKeyframeAnimation *anim = [CAKeyframeAnimation animationWithKeyPath:@"position"];
anim.path = path;
anim.repeatCount = HUGE_VALF;
anim.duration = 8.0;
[ball addAnimation:anim forKey:@"race"]; 
```

这个动画掩盖了整个视图，只显示了球层后面的内容。我的问题是：我怎样才能不掩盖屏幕上显示的部分？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T02:56:55.610

嗯。

您想要的是包含球形状经过的所有像素的图像。

如果您使用基于帧的动画为球设置动画，您可以创建一个灰度（或 1 位）图像并将其安装为遮罩层的内容。然后，当您移动球时，您可以在每一帧中将其绘制到您的蒙版图像中。

我不确定如何使用 Core 动画获得相同的效果。

您可以将您的蒙版设置为 CAShapeLayer，创建一个描述球的整个路径的 CGPath，并将其设置为形状图层的路径。如果你的球是圆形的，你可以将形状层的线条粗细设置为你的球大小。那会奏效。但是，如果您的球是不规则的形状，那么这种方法将行不通。iOS 上的 Quartz 图形没有任何我知道的方法可以用任意形状的画笔描边路径。

# c++ - std::list 与 std::vector 迭代

> ID：10332789
> 
> 赞同：12
> 
> 时间：2012-04-26T11:49:00.620
> 
> 标签：c++, list, stl, vector, iteration

据说遍历向量（如读取它的所有元素）比遍历列表更快，因为优化了缓存。

网络上是否有任何资源可以量化它对性能的影响程度？

另外，使用自定义链表会更好，哪些元素将被预先分配，以便它们在内存中是连续的？

其背后的想法是我想以不会改变的特定顺序存储元素。我仍然需要能够在运行时在中间快速插入一些，但它们中的大多数仍然是连续的，因为顺序不会改变。

元素是连续的这一事实是否会对缓存产生影响，或者因为我仍然会调用`list_element->next`而不是`++list_element`它并没有改善任何东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T12:48:01.357

由于数据结构的紧凑表示而从缓存一致性中获得的效率可能相当显着。在与列表相比的向量的情况下，紧凑表示不仅可以更好地用于读取，甚至可以用于某些特定架构的高达 500K 元素数量级的元素的插入（向量中的移动），如 Bjarne 的本文图 3 所示斯特鲁普：

[http://www2.research.att.com/~bs/Computer-Jan12.pdf](http://www2.research.att.com/~bs/Computer-Jan12.pdf)

（发布者网站： http: [//www.computer.org/portal/web/csdl/doi/10.1109/MC.2011.353](http://www.computer.org/portal/web/csdl/doi/10.1109/MC.2011.353)）

我认为如果这对你的程序来说是一个关键因素，你应该在你的架构上对其进行分析。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T12:33:21.233

向量和列表之间的主要区别在于，向量中的元素是随后在预分配的缓冲区中构造的，而列表中的元素是一个接一个地构造的。因此，向量中的元素被授予占用连续内存空间，而列表元素（除非某些特定情况，例如以这种方式工作的自定义分配器）不被授予如此，并且可以在周围“稀疏”记忆。

现在，由于处理器在重新映射主存储器的整个页面的高速缓存（可以比主 RAM 快 1000 倍）上运行，如果元素是连续的，则它们很可能适合相同的内存页面，因此是迭代开始时在缓存中一起移动。在继续进行时，一切都发生在缓存中，无需进一步移动数据或进一步访问较慢的 RAM。

使用 list-s，由于元素到处都是稀疏的，“去下一个”意味着引用一个地址，它可能不在其前一个内存页面中，因此，缓存需要在每个迭代步骤中更新，访问每次迭代的 RAM 越慢。

性能差异很大程度上取决于处理器和用于主 RAM 和高速缓存的内存类型，以及`std::allocator`（最终`operator new`和`malloc`）的实现方式，因此无法给出一般数字。（注意：巨大的差异意味着 RAM 对缓存的不利影响，但也可能意味着在 list-s 上的错误实现）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T12:29:38.380

不确定我是否可以正确解释，但这是我的观点（我正在考虑下面翻译的机器指令：），

向量迭代器（连续内存）：当您增加向量迭代器时，迭代器值简单地添加对象的大小（在编译时已知）以指向下一个对象。在大多数 CPU 中，这最多是一到三个指令。

列表迭代器（链表[http://www.sgi.com/tech/stl/List.html](http://www.sgi.com/tech/stl/List.html)）：当你增加一个列表迭代器（指向的对象）时，前向链接的位置通过添加一些数字来定位指向对象的基址，然后作为迭代器的新值加载。有不止一个内存访问，并且比向量迭代操作慢。

# ipad - Ipad html5 加载多个音频文件

> ID：10332791
> 
> 赞同：0
> 
> 时间：2012-04-26T11:49:04.513
> 
> 标签：ipad, html, audio, preloader

我想预加载多个音频文件。为此，我尝试在 JavaScript 中创建多个音频元素。

```
function loadAudio(){
    audio1 = new Audio();
    audio1.addEventListener('canplaythrough', isLoaded, false);
    audio1.src = 'assets/audio/Maid with the Flaxen Hair.mp3';
    audio1.load();
}

function isLoaded(){
    audio1.removeEventListener('canplaythrough', isAppLoaded);
    alert('maid');

alert('start audio 2');
audio2 = new Audio();
audio2.addEventListener('canplaythrough', isLoaded2, false);
audio2.src = 'assets/audio/Kalimba.mp3';
audio2.load();
}

function isLoaded2(){
    alert('kalimba');
} 
```

我只收到第一个警报，第二个永远不会工作。

我发现我一次只能播放一种声音，但我也只能加载一种吗？对于我创建的每个新音频对象，脚本是否需要另一个用户输入？或者有没有人有另一种方法来创建音频预加载器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T08:00:43.407

这可能与 ios 设备上自动播放（以及据我所知自动加载）音频文件的限制有关（请参阅此处：[iOS 4 上 HTML5 音频的限制？](https://stackoverflow.com/questions/5054848/limitations-of-html5-audio-on-ios-4-playlisting-background-etc?lq=1)）。

简而言之：您不能以编程方式在 ios 设备上启动音频播放，这仅允许在事件处理程序中用于可信（=由用户发起）事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-05T12:58:46.437

你可以使用以下方式在 IOS 设备上播放多个音频

```
 $("#btn").on("click",function(){
                        alert("audio clicked");
                        var aud=new Audio();
                        aud.src="music.mp3";
                        aud.play();
                        var aud1=new Audio();
                        aud1.src="intro.mp3";
                        aud1.play();
                    }) 
```

上面的代码在设备上播放多个音频

# java - 线程在空 DataInputStream 的 readUTF 上冻结

> ID：10332792
> 
> 赞同：1
> 
> 时间：2012-04-26T11:49:05.810
> 
> 标签：java, multithreading, locking

只有一个线程正在创建。在某些情况下，它需要关闭。在这种情况下，可以通过检查来完成`isInterrupted()`。但是`in.readUTF()`如果有空的InputStream，它就会冻结。如何解决这个问题？

```
DataInputStream in;
....
public void stop() {
thread.interrupt();
}

public void run() {
     while(true) {
           String str = in.readUTF();  // locking here, when stream is empty
           S.o.p(str)
           if(isInterrupted) {
           return;
        }}
}

public void main(String args[]) {
      Thread thread = new Thread();       
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T12:02:47.563

您不能中断阻塞的 InputStream。（这是与 NIO 的区别之一）您可以在调用中断之前关闭流，这将触发 IOException。

```
public void stop() {
    in.close(); // or use something like IOUtils.closeQuietly(in);
    thread.interrupt();
} 
```

# java - 类型检查迭代器？

> ID：10332793
> 
> 赞同：2
> 
> 时间：2012-04-26T11:49:12.597
> 
> 标签：java, generics

我的项目中有以下代码行：

```
Iterator<Node> i = graph.nodes(); 
```

graph.nodes() 是 prefuse 中定义的方法。

现在我想向迭代器添加类型检查，但我该怎么做呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T11:52:41.783

如果你使用[Guava](http://code.google.com/p/guava-libraries/)，你可以做

```
Iterator<Node> iterator = Iterators.filter(theOriginalIterator, Node.class); 
```

返回的迭代器保证只继续与提供的类型相对应的元素。（顺便说一句，类似的方法也可用[`Iterable`](http://docs.oracle.com/javase/6/docs/api/java/lang/Iterable.html)）

看

*   [`Iterators.filter(iterator, class)`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Iterators.html#filter%28java.util.Iterator,%20java.lang.Class%29)
*   [`Iterables.filter(iterable, class)`](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/collect/Iterables.html#filter%28java.lang.Iterable,%20java.lang.Class%29)

# node.js - 不能在节点中说 Hello World

> ID：10332797
> 
> 赞同：0
> 
> 时间：2012-04-26T11:49:37.120
> 
> 标签：node.js, ubuntu

我正在尝试遵循以下教程 The [Node Beginner Book](http://www.nodebeginner.org/#structure)

我已经成功安装了节点和 mongodb，当我这样做时，`node -v`它给了我`v0.5.11-pre`，但是当我保存文件说并在终端`hello.js`中`Home/node/`写入`node hello.js`时，它给了我以下错误

```
ubuntu@ubuntu:~/Downloads$ node hello.js

node.js:201
        throw e; // process.nextTick error, or 'error' event on first tick
              ^ Error: Cannot find module '/home/ubuntu/Downloads/hello.js'
    at Function._resolveFilename (module.js:334:11)
    at Function._load (module.js:279:25)
    at Array.0 (module.js:470:10)
    at EventEmitter._tickCallback (node.js:192:40) 
```

请帮我找出我在这里做错了什么。我在虚拟机中使用 Ubuntu。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:54:25.120

你在错误的目录中。移动到`hello.js`带有的文件[`cd`](http://ss64.com/bash/cd.html)，如下所示：

```
cd $HOME/node
node hello.js 
```

# java - 使用套接字的客户端-服务器-客户端通信

> ID：10332799
> 
> 赞同：5
> 
> 时间：2012-04-26T11:49:48.813
> 
> 标签：java, sockets

我正在构建一个小型聊天应用程序，其中客户端 A 想要向客户端 C 发送一些东西，而服务器 B 介于两者之间。首先，这是解决问题的正确方法吗？我能够向服务器发送数据和从服务器接收数据，但仅限于客户端。例如，如果客户端 A 向服务器 B 发送数据，而客户端 C 向服务器 B 发送数据，那么我可以将数据发送回 A 和C 就像一个回声服务器。但我想要的是通过服务器 B 将来自客户端 A 的数据转发到客户端 C。

以下是服务器代码：

```
public class Server {
    public static void main(String[] args) {
        int port = 666; //random port number
        try {
            ServerSocket ss = new ServerSocket(port);
            System.out.println("Waiting for a client....");

            System.out.println("Got a client :) ... Finally, someone saw me through all the cover!");
            System.out.println();
            while(true) {
                Socket socket = ss.accept();

                SSocket sSocket = new SSocket(socket);
                Thread t = new Thread(sSocket);
                t.start();
                System.out.println("Socket Stack Size-----"+socketMap.size());
            }
        }
        catch (Exception e) { }
    }
}

class SSocket implements Runnable {
    private Socket socket;

    public SSocket(Socket socket) {
        this.socket = socket;
    }

    @Override
    public void run() {
        try {
            InputStream in = socket.getInputStream();
            OutputStream out = socket.getOutputStream();

            DataInputStream dIn = new DataInputStream(in);
            DataOutputStream dOut = new DataOutputStream(out);

            String line = null;
            while (true) {
                line = dIn.readUTF();
                System.out.println("Recievd the line----" + line);
                dOut.writeUTF(line + " Comming back from the server");
                dOut.flush();
                System.out.println("waiting for the next line....");    
            }
        }
        catch (Exception e) { }
    }
} 
```

客户端代码是：

```
public class Client {
    public static void main(String[] args) {
        int serverPort = 666;

        try {
            InetAddress inetAdd = InetAddress.getByName("127.0.0.1");
            Socket socket = new Socket(inetAdd, serverPort);

            InputStream in = socket.getInputStream();
            OutputStream out = socket.getOutputStream();

            DataInputStream dIn = new DataInputStream(in);
            DataOutputStream dOut = new DataOutputStream(out);

            BufferedReader keyboard = new BufferedReader(new InputStreamReader(System.in));

            System.out.println("Type in something and press enter. Will send it to the server and tell ya what it thinks.");
            System.out.println();

            String line = null;
            while (true) {
                line = keyboard.readLine();
                System.out.println("Wrinting Something on the server");
                dOut.writeUTF(line);
                dOut.flush();

                line = dIn.readUTF();
                System.out.println("Line Sent back by the server---" + line);
            }
        }
        catch (Exception e) { }
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T12:07:26.700

当您的客户端连接到服务器时，您的服务器会`Socket`为其创建一个，在这里`Socket socket = ss.accept();`，您的套接字变量将持有该客户端。

现在，如果您只是继续将您的客户端套接字添加到循环中，`arraylist`您`while`将拥有一个与您的服务器主动连接的客户端列表，例如：

接受后：

```
clients = new ArrayList<DataOutputStream>();
Socket socket = ss.accept();
os = new DataOutputStream(socket.getOutputStream());
clients.add(os); 
```

现在，当您在该数组列表中拥有所有客户端时`clients`，您可以遍历它，或者使用某些协议定义我应该在读取后发送数据的客户端。

```
Iterator<DataOutputStream> it = clients.iterator();
while ((message = reader.readLine()) != null) { //reading    
    while (it.hasNext()) {
        try {
            DataOutputStream oss = it.next();
            oss.write(message);//writing
            oss.flush();
        }
        catch (Exception e) { }
     }
 } 
```

这将遍历 arraylist 中所有可用的客户端，并将发送给所有客户端。您可以定义仅发送给某些人的方式。

例如：维护一个`ActiveClients` `arraylist`并与一些 GUI 交互可能是或可能，定义您要向所有客户端发送什么消息。然后将那些客户端 outputStreams 添加到`ActiveClients`

```
ActiveClients.add(clients.get(2)); 
```

或删除它们，如果你不想要它们。

```
ActiveClients.remove(clients.get(2)); 
```

现在只需循环通过它`arraylist`来发送如上所述的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T11:56:49.550

您可以为每个客户端创建消息队列：

1.  `Client C`客户端 A 向服务器 B发送带有地址的消息“Hi” 。
2.  服务器 B 接收到消息并将其添加到客户端 C 的消息队列中。
3.  与客户端 C 通信的服务器 B 中的线程检查消息队列，检索消息并将其发送给客户端 C。
4.  客户端 C 收到消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-11T22:44:45.217

如果我没记错的话，您一定是在接收来自 Server 或 SSocket 类的消息时遇到问题。您的代码发生的情况是，当您从客户端向服务器发送消息时，Server 类接收您的消息也会在客户端中给出消息的回显。但是，当您从服务器类发送消息时，您不会在客户端类中收到任何消息。

要使其正常工作，您必须按以下方式修改代码：

## SSocket 类

```
String line = null;
while (true) {
    line = dIn.readUTF();
    System.out.println("Recievd the line----" + line);
    dOut.writeUTF(line + " Comming back from the server");
    dOut.flush();
    System.out.println("waiting for the next line....");
} 
```

您应该添加这些行：

```
String Line2 = take.nextLine(); //The user types a message for the client
dOut.writeUTF(Line2 + " Comming back from the server"); //The message is sent to the client 
```

用这个替换`while`循环，它将正常工作。

```
while (true) {       
    line = dIn.readUTF(); //Takes the msg from the client
    System.out.println("Recievd the line----" + line); //Prints the taken message

    String Line2 = take.nextLine(); //The user types a message for the client
    dOut.writeUTF(Line2 + " Comming back from the server"); //The message is sent to the client
    dOut.flush();
    System.out.println("waiting for the next line....");
} 
```

# asp.net - 在 Visual Studio 中运行 WAP 时，如何用转换后的调试文件替换 web.config？

> ID：10332800
> 
> 赞同：4
> 
> 时间：2012-04-26T11:49:54.080
> 
> 标签：asp.net, visual-studio, web-config, visual-studio-debugging

在 Visual Studio 中运行时，我想用转换后的调试配置文件替换 web.config（我对将项目发布到某个输出目录不感兴趣）。我想将原始 web.config 保留在 TFS 中 Web 应用程序的根目录中，但在运行时（在 IIS 或 Cassini 上）我想使用转换后的调试版本。

到目前为止，我发现的最佳方法（在[使用 Visual Studio web.config 转换进行调试](https://stackoverflow.com/questions/3922291/use-visual-studio-web-config-transform-for-debugging) 和[ASP.NET Web 项目： web.debug.config & web.release.config](http://sedodream.com/2010/10/21/ASPNETWebProjectsWebdebugconfigWebreleaseconfig.aspx)）是使用 web.template.config 作为主文件, 和 web.config 作为派生的转换文件。我对此并不完全满意，因为开发人员习惯将 web.config 视为主文件。

我有一个想法，将转换后的文件输出到 ASP.Net 临时文件目录，ASP.NET 用于缓存文件。

ASP.NET 是否使用临时缓存文件夹中的 web.config 文件？ASP.NET 是否允许缓存目录中的 web.config 文件与原始文件夹中的 web.config 不同？

我发现了一些与 ASP.Net 临时文件目录相关的属性。CompilationSection 的MSBuild [tempDirectory 属性](http://msdn.microsoft.com/en-us/library/system.web.configuration.compilationsection.tempdirectory.aspx)可用于替换 ASP.Net 临时文件的根文件夹。 [ClientBuildManager.CodeGenDir](http://msdn.microsoft.com/en-us/library/system.web.compilation.clientbuildmanager.codegendir%28v=vs.100%29.aspx)属性允许访问当前缓存所在的特定文件夹。

但是我找不到如何从 MSBuild 访问文件夹的路径，它是否允许我将转换后的 web.config 输出到缓存文件夹。

任何建议/考虑将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:19:44.093

部署应用程序时使用配置文件的调试和发布模板。您可以使用发布选项将应用程序发布到计算机上的另一个虚拟目录以进行调试吗？然后，您将拥有转换后的配置文件。

# python - linux上的python：可以设置PYTHONPATH的所有可能位置是什么？

> ID：10332806
> 
> 赞同：2
> 
> 时间：2012-04-26T11:50:09.333
> 
> 标签：python, ubuntu, pythonpath

我想清理我的 PYTHONPATH。

我知道我将它附加在 /home/me/.profile 中，如下所示：

```
PYTHONPATH=/home/hoff/code/someproject/pythonmods:$PYTHONPATH
PYTHONPATH=/home/hoff/code/google_appengine/google/appengine/tools:$PYTHONPATH
export PYTHONPATH 
```

但是我必须在其他地方附加了 PYTHONPATH，当我进入 python 解释器并查看时`sys.path`，有各种各样的附加目录。

我可以在哪里指定它们，即可以附加 PYTHONPATH（在 linux/ubuntu 上）的所有可能位置是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T11:57:33.497

`sys.path`和`PYTHONPATH`不是一回事；前者包含后者。要找出 的值`PYTHONPATH`，请`echo $PYTHONPATH`在 shell 中执行。

这些文件`/usr/{local/,}lib/pythonX.Y/dist-packages/site.py`将更新，因此您可以导入使用和安装的`sys.path`软件包。卸载这些包会减少你的（虽然不是你的）。`apt-get``easy_install``pip``sys.path``PYTHONPATH`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T12:14:47.903

可以设置环境变量的任何地方。

进程继承其父级的环境，因此您可以在任何阶段对其进行修改，无论是 shell 配置文件、shell 命令行中、您调用的任何中间脚本、python 脚本（带有 sys.path）或它使用的任何库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T13:02:07.560

如前所述……它几乎可以设置在任何地方。我会看的几个地方（假设您的登录 shell 是典型的 bash ......）

```
.bashrc
/etc/profile
Anything in /etc/profile.d/  (typically loaded from /etc/profile)
~/.bash_profile
~/.bash_login 
```

从`man bash`

```
 When bash is invoked as an interactive login shell, or as
  a non-interactive shell with the --login option,  it  first
  reads  and  executes commands from the file /etc/profile, 
  if that file exists.  After reading that file, it looks for
  ~/.bash_profile, ~/.bash_login, and ~/.profile 
```

和

```
 When an interactive shell that is not a login shell is started,
   bash reads and executes commands from  ~/.bashrc,  if that
   file exists. 
```

# c# - 在 Autofac 中装饰现有的注册

> ID：10332808
> 
> 赞同：1
> 
> 时间：2012-04-26T11:50:23.073
> 
> 标签：c#, .net, autofac

我有以下接口及其实现：

```
public interface IService
{
}

public class Service1 : IService
{
}

public class DecoratedService
{
    public DecoratedService(IService inner)
    {
    }
} 
```

Service1 在我无法更改的代码中注册（未命名注册）：

```
builder.RegisterType<Service1>().As<IService>(); 
```

所以我需要用我自己的来装饰这个注册。我怎样才能在范围内以最小的性能影响来实现这一点

> 公共类 DataModule : Autofac.Module

班级？

如果我需要用命名的更改现有的 IService 注册也没关系（但我还没有找到方法）。我研究了stackoverflow中的所有相关问题，但没有一个给我解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-07T16:00:36.873

您应该能够替换`IService`模块中的现有注册并为其提供名称。

```
builder.RegisterType<Service1>().Named<IService>("implementor"); 
```

然后为命名服务注册一个装饰器。

```
builder.RegisterDecorator<IService>(s => new DecoratedService(s), "implementor"); 
```

Nick 有一篇博文，其中详细介绍了 Autofac 中的装饰器支持。

[http://nblumhardt.com/2011/01/decorator-support-in-autofac-2-4/](http://nblumhardt.com/2011/01/decorator-support-in-autofac-2-4/)

# c# - asp web api补丁实现

> ID：10332809
> 
> 赞同：17
> 
> 时间：2012-04-26T11:50:35.867
> 
> 标签：c#, asp.net, rest, model, asp.net-web-api

假设我有这个模型

```
public partial class Todo
{
    public int id { get; set; }
    public string content { get; set; }
    public bool done { get; set; }
} 
```

我将它作为 json 数据作为补丁请求发送到我的控制器。这只是切换复选框的动作。我认为我只想将其发送到我的服务器而不是整个模型是有道理的。

```
{ "id":1, "done" : true } 
```

为了正确处理这个简单的 json 补丁请求，我的 WebApi 控制器需要什么样的外观？我应该为此使用 web api，还是应该对 mvc 使用更多 rpc 风格的方法？

这似乎是一件非常基本的事情，但我似乎做错了！我想我可能需要在我的控制器方法中使用不同的参数，但我不确定。

感谢您的时间。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-26T12:36:32.543

将方法更改为 PATCH 不会以任何方式更改 Web API 行为。没有用于进行部分更新的内置机制。这么长时间没有 PATCH 方法的原因之一是没有普遍存在的媒体类型可以将补丁应用于资源。

其次，您要求 Web API 为您进行对象序列化，因此没有应用部分更新对象的概念。会有很多约定要达成一致，空值是什么意思，空值是什么意思，我怎么说“不要更新这个日期时间”。相关对象、子项呢？你如何导致子项目被删除？除非 CLR 团队实现某种类型的概念，该类型只包含来自另一个类型的成员的子集，否则部分更新和对象序列化不会很好地结合在一起。

Aliostad 提到了 UpdateModel，这在从 HTML 表单更新时是可能的，因为媒体类型`application/x-www-form-urlencoded`明确允许任意一组名称值对。没有进行“对象序列化”。它只是将表单中的名称与 Model 对象上的名称匹配。

对于我自己，我创建了一种新的媒体类型，用于进行部分更新，它的工作方式类似于表单，但更先进的是它可以处理分层数据并维护更新的顺序。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-18T10:21:05.497

您可以在 OData 预发布 Nuget 包中找到 PATCH 功能：[Microsoft.AspNet.WebApi.OData](https://nuget.org/packages/Microsoft.AspNet.WebApi.OData)。

[可以在有关ASP.NET Web API 中的 OData 支持](http://blogs.msdn.com/b/alexj/archive/2012/08/15/odata-support-in-asp-net-web-api.aspx)的博客文章的*部分更新（PATCH 请求）*部分中找到如何使用它来创建处理 PATCH 的操作的信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-26T12:28:59.737

ASP.NET Web API 似乎缺少`UpdateModel`,`TryUpdateModel`等。

在 ASP.NET MVC 中，您可以使用它们来达到预期的效果。我在 ASP.NET Web Stack 中创建了一个您可以投票的[工作项](http://aspnetwebstack.codeplex.com/workitem/102)，如果它获得足够的票数，它将被实施。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-07-31T07:56:53.377

我在我的项目中使用了[Microsoft.AspNet.WebApi.OData](https://www.nuget.org/packages/Microsoft.AspNet.WebApi.OData)，但在使用 JSON 时遇到了一些问题（在我的情况下使用数字）。此外，OData 包有一些依赖项，在我看来，这些依赖项对于单个功能来说太大了（约 7MB 与所有依赖项）。

所以我开发了一个简单的库来满足你的要求：[SimplePatch](https://github.com/OmarMuscatello/SimplePatch)。

**如何使用**

使用以下命令安装包：

```
Install-Package SimplePatch 
```

然后在你的控制器中：

```
[HttpPatch]
public IHttpActionResult PatchOne(Delta<Todo> todo)
{
    if (todo.TryGetPropertyValue(nameof(Todo.id), out int id)) {
        // Entity to update (from your datasource)
        var todoToPatch = Todos.FirstOrDefault(x => x.id == id);
        if (todoToPatch == null) return BadRequest("Todo not found");

        todo.Patch(todoToPatch);     

        // Now todoToPatch is updated with new values            
    } else {
        return BadRequest();
    }     

    return Ok();
} 
```

该库也支持大量补丁：

```
[HttpPatch]
public IHttpActionResult PatchMultiple(DeltaCollection<Todo> todos)
{
    foreach (var todo in todos)
    {
        if (todo.TryGetPropertyValue(nameof(Todo.id), out int id))
        {
            // Entity to update (from your datasource)
            var entityToPatch = Todos.FirstOrDefault(x => x.id == Convert.ToInt32(id));
            if (entityToPatch == null) return BadRequest("Todo not found (Id = " + id + ")");

            person.Patch(entityToPatch);
        }
        else
        {
            return BadRequest("Id property not found for a todo");
        }
    }

    return Ok();
} 
```

如果使用实体框架，则只需在调用`Patch`方法后添加两行代码：

```
entity.Patch(entityToPatch);

dbContext.Entry(entityToPatch).State = EntityState.Modified;
dbContext.SaveChanges(); 
```

`Patch`此外，您可以在调用该方法 时排除一些要更新的属性。**Global.asax 或 Startup.cs**

```
DeltaConfig.Init((cfg) =>
{
    cfg.ExcludeProperties<Todo>(x => x.id);
}); 
```

当您使用实体并且不想创建模型时，这很有用。

# java - 猜谜游戏java类的问题~

> ID：10332811
> 
> 赞同：0
> 
> 时间：2012-04-26T11:50:40.367
> 
> 标签：java

这是玩我制作的猜谜游戏的代码，但问题是我作为java初学者不擅长的几个问题需要一些指导。沿着代码有一些错误，我用侧面的箭头突出显示。

```
 import java.util.*;

public class GuessingGame
{

    private static Player house;
    private static Player player;

    private static int wins;
    private static int loses;
    private String name;
    int card1,card2;
    private int value;

    public void Player(String name){

        this.name=name;
        card1 = (Integer) null;
        card2 = (Integer) null;
    }

public void Card(int value){

     this.value = value;
    }

public int getValue(){
            return value;
        }

public void acceptDeal(Card card1, Card card2){
        Random r = new Random();
        int value = r.nextInt(13) + 1;
        card1 = new Card(value);            <<<<<<<<======= Error 1
        value = r.nextInt(13) + 1;
        card2 = new Card(value);            <<<<<<<<======= Error 2
    }

public static void init()
{

    house = new Player("House");                 <<<<<<<<======= Error 3
    player = new Player("Player");               <<<<<<<<======= Error 4
    wins = 0;
    loses = 0;

}

    public static void playGame() 
    {
       Scanner scan = new Scanner(System.in);

        char option, playAgain;
        int houseHandStrength, playerHandStrength;
        System.out.println("Welcome to our card guess 1.0 game!");
        System.out.println();

        do {
            // Deal cards to the house and player.
            house.acceptDeal(new Card(houseHandStrength), new Card(houseHandStrength));    <<<<<=== Error 5
            player.acceptDeal(new Card(playerHandStrength), new Card(playerHandStrength));  <<<<<=== Error 6    

            System.out.println(house);

            // Determine whether the player wants to play this hand.
            do {
                System.out.print("Deal cards? (Y/N) ");
                option = Character.toLowerCase(scan.next().charAt(0));
            }
            while (option != 'n' && option != 'y');

            if (option == 'y')
            {
                System.out.println(player);

                // Display hand strength of both players.
                houseHandStrength = house.getHandStrength();    <<<<<=== Error 7
                playerHandStrength = player.getHandStrength();  <<<<<=== Error 8
                System.out.println("The dealer's hand strength is: " + houseHandStrength);
                System.out.println("Your hand strength is: " + playerHandStrength);
                System.out.println();

                // If the player has a stronger hand.
                if (player.getHandStrength() > house.getHandStrength())
                {
                    System.out.println("** You won the hand! **");
                    wins++;
                }
                else {
                    System.out.println("The house wins this round!");
                    loses++;
                }
            }

            // Display the win/lose statistics.
            System.out.println("Current wins: " + wins);
            System.out.println("Current loses: " + loses);

            // Prompt whether the user wants to play again.
            do {
                System.out.print("Would you like to play again? (Y/N) ");
                playAgain = Character.toLowerCase(scan.next().charAt(0));
            }
            while (playAgain != 'n' && playAgain != 'y');           

            System.out.println();
            System.out.println("*******************************************************");
        }
        while (playAgain == 'y');

        System.out.println();
        System.out.println("Thank you for playing!");
    }

    public static void main(String[] args)
    {
        init();
        playGame();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:55:31.017

首先欢迎来到 StackOverflow。很高兴看到您找到并使用了 homework 标签。请记住，为了让人们能够帮助您，您需要提供更多信息。错误是什么意思，运行代码时会发生什么等

关于你得到的错误，看起来你还没有真正定义类`Card`，`Player`你的代码中有两个方法`GuessingGame.Card()`和`GuessingGame.Player()`你的`GuessingGame`类。将它们更改为内部（或外部）类，应该没问题；）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T11:55:48.300

也许您需要在顶部导入其他类？

问题似乎只存在于您自己的课程中，程序输出对错误有什么看法？

`public void Player(String name)`……和 `public void Card(int value)`……

应该上课吧？将它们声明为另一个文件中的类并将它们包含到主文件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T11:56:22.123

在您之前的[问题](https://stackoverflow.com/questions/10329526/game-class-has-nullpointerexception) `card1`中`card2`，类型为`Card`. 没错，现在你已经改变了这一点，现在它是错误的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T12:23:23.210

你似乎已经把你的代码打包了。您已经组合了 Player、Card 和 Game 类。我手边没有 Java 编译器，但您要做的是分解这三个模型。

错误 1-6 是在类甚至不存在时尝试实例化新对象的结果。错误 7-8 是由于尝试调用同一方法的结果。

```
import java.util.*;

class Player {
    int card1, card2;
    private String name;

    public void Player(String name){
        this.name=name;
        card1 = (Integer) null;
        card2 = (Integer) null;
    }

    public void acceptDeal(Card card1, Card card2){
        Random r = new Random();
        int value = r.nextInt(13) + 1;
        card1 = new Card(value);            <<<<<<<<======= Error 1
        value = r.nextInt(13) + 1;
        card2 = new Card(value);            <<<<<<<<======= Error 2
    }
}

class Card {
    private int value;

    public void Card(int value){
        this.value = value;
    }

    public int getValue(){
        return value;
    }
}

public class GuessingGame
{
    private static Player house;
    private static Player player;
    private static int wins;
    private static int loses;

    public static void init()
    {
        house = new Player("House");                 <<<<<<<<======= Error 3
        player = new Player("Player");               <<<<<<<<======= Error 4
        wins = 0;
        loses = 0;
    }

    public static void playGame() 
    {
        Scanner scan = new Scanner(System.in);

        char option, playAgain;
        int houseHandStrength, playerHandStrength;
        System.out.println("Welcome to our card guess 1.0 game!");
        System.out.println();

        do {
            // Deal cards to the house and player.
            house.acceptDeal(new Card(houseHandStrength), new Card(houseHandStrength));    <<<<<=== Error 5
            player.acceptDeal(new Card(playerHandStrength), new Card(playerHandStrength));  <<<<<=== Error 6    

            System.out.println(house);

            // Determine whether the player wants to play this hand.
            do {
                System.out.print("Deal cards? (Y/N) ");
                option = Character.toLowerCase(scan.next().charAt(0));
            }
            while (option != 'n' && option != 'y');

            if (option == 'y')
            {
                System.out.println(player);

                // Display hand strength of both players.
                houseHandStrength = house.getHandStrength();    <<<<<=== Error 7
                playerHandStrength = player.getHandStrength();  <<<<<=== Error 8
                System.out.println("The dealer's hand strength is: " + houseHandStrength);
                System.out.println("Your hand strength is: " + playerHandStrength);
                System.out.println();

                // If the player has a stronger hand.
                if (player.getHandStrength() > house.getHandStrength())
                {
                    System.out.println("** You won the hand! **");
                    wins++;
                }
                else {
                    System.out.println("The house wins this round!");
                    loses++;
                }
            }

            // Display the win/lose statistics.
            System.out.println("Current wins: " + wins);
            System.out.println("Current loses: " + loses);

            // Prompt whether the user wants to play again.
            do {
                System.out.print("Would you like to play again? (Y/N) ");
                playAgain = Character.toLowerCase(scan.next().charAt(0));
            }
            while (playAgain != 'n' && playAgain != 'y');           

            System.out.println();
            System.out.println("*******************************************************");
        }
        while (playAgain == 'y');

        System.out.println();
        System.out.println("Thank you for playing!");
    }

    public static void main(String[] args)
    {
        init();
        playGame();
    }
} 
```

# flash - 在 adobe flash 中使用动态文本旋转经典文本字段

> ID：10332814
> 
> 赞同：0
> 
> 时间：2012-04-26T11:50:56.887
> 
> 标签：flash, adobe, flash-cs5

我正在尝试为 Flash Player 9 提供对角方向的文本（这忽略了新的文本框架 TLF）。当我尝试旋转文本时，它不再显示（它变为隐藏），即使当我单击文本区域时，我可以确认文本已被旋转。

文本数据是在服务期间动态输入的，所以flash是一个模板。

我不太擅长动作脚本，但将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T18:28:10.693

您需要嵌入字体才能旋转文本字段。确保您的字体已嵌入。

有关字体嵌入的更多信息，请查看[此链接](http://www.adobe.com/devnet/flash/quickstart/embedding_fonts.html)。

# apache-poi - 去除 HSSF 单元格中的小数点

> ID：10332816
> 
> 赞同：-1
> 
> 时间：2012-04-26T11:51:05.180
> 
> 标签：apache-poi, poi-hssf

我正在从具有小数的 Excel 表中读取数据。

我想获得不带小数的结果。

我正在使用 `cell.getNumericCellValue ()`它给出小数 - 是否有一个删除小数的函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-26T11:58:01.717

将值转换为 int 怎么样？

```
(int)cell.getNumericCellValue() 
```

# wso2 - 如何构建 WSO2 身份服务器

> ID：10332817
> 
> 赞同：0
> 
> 时间：2012-04-26T11:51:14.587
> 
> 标签：wso2, wso2is

如何访问 svn 并从源代码构建身份服务器？

页面[http://docs.wso2.org/display/identity/Building+WSO2+Identity+Server+from+source](http://docs.wso2.org/display/identity/Building+WSO2+Identity+Server+from+source)也适用于 3.2.3？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-27T09:50:00.833

[根据 Source Distribution [1]](http://docs.wso2.org/display/identity/Installing+Identity+Server+on+Linux+from+Source+Distribution)指南在 Linux 上安装 Identity Server 。

当您提取 wso2is-3.2.3-src 发行版时，从根级别执行 mvn clean install 或者如果您只需要构建 3.2.3 版本，请进入 /wso2is-3.2.0-src/patch-releases/ 文件夹。在那里你会找到 3.2.1、3.2.2 和 3.2.3 的单独目录，要构建 3.2.3 版本，从 3.2.3 补丁版本 pom.xml 开始构建（mvn clean install from /wso2is-3.2.0-src /patch-releases/3.2.3/ 目录）。

请注意，3.2.0 分支需要使用 maven2 构建。

仅供参考：要构建当前的主干，请使用 maven3。

# javascript - 使用 Raphael 创建水平线性渐变

> ID：10332822
> 
> 赞同：1
> 
> 时间：2012-04-26T11:51:37.067
> 
> 标签：javascript, raphael, gradient

我是拉斐尔图书馆的新手（顺便说一句，到目前为止看起来很棒）

我想知道如何创建水平线性渐变。

到目前为止，这是我的测试代码，主要来自我一直在查看的示例：-

```
$(function () {
    var paper = Raphael(0, 0, $(window).width(), $(window).height());
    var path = paper.path("M800,100 L800,600 Q801,610 802,600 T803,600 L803,100 Q802,110 801,100 T800,100").attr({
        "fill": "90-#f00:5-#00f:100",
        "fill-opacity": 0.5
    });
    var pathArray = path.attr("path");
    handle = paper.circle(pathArray[0][1], 350, 5).attr({
        fill: "black",
        cursor: "pointer",
        "stroke-width": 1,
        stroke: "transparent"
    });
    var start = function () {
        this.cx = this.attr("cx"),
        this.cy = this.attr("cy");
    },
    move = function (dx, dy) {
        var X = this.cx + dx, Y = this.cy + dy;
        this.attr({ cx: X, cy: Y });
        pathArray[0][1] = pathArray[1][1] = pathArray[6][1] = X;
        path.attr({ path: pathArray });
    },
    up = function () {
        this.dx = this.dy = 0;
    };
    handle.drag(move, start, up);
}); 
```

我从 w3 网站上的 SVG 规范中看到，实际的 linearGradient 标记中有一个 x1,x2,y1,y2 属性（尽管我什至不确定它们是否处理方向？[http://www.w3.org/TR /SVG/pservers.html#LinearGradientElement](http://www.w3.org/TR/SVG/pservers.html#LinearGradientElement)）。

我只是没有使用足够多的 Raphael 知道如何在我的路径属性中设置它。

干杯，哇。

PS 编辑：添加以下帮助，但仅适用于 IE：-

```
$("linearGradient").attr("x1", "0");
$("linearGradient").attr("x2", "100%");
$("linearGradient").attr("y1", "0");
$("linearGradient").attr("y2", "0"); 
```

另一个编辑：有趣的是，以上仅适用于 IE，但以下适用于两者（即使 HTML 相同）：-

```
$("defs").children().attr("x1", "0");
$("defs").children().attr("x2", "100%");
$("defs").children().attr("y1", "0");
$("defs").children().attr("y2", "0"); 
```

出于某种原因，以下是 IE 中的 1 和 chrome 中的 0：-

```
$("lineargradient").length 
```

现在，虽然这可行，但肯定有更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T13:56:26.883

这是一个具有水平和垂直渐变的矩形示例。

```
paper.rect(100,100,200,200).attr({"fill":"0-#f00:5-#00f:100"});
paper.rect(300,300,200,200).attr({"fill":"90-#f00:5-#00f:100"}); 
```

填充中的第一个值是渐变的角度。您可以将其应用于您的路径。

# asp.net - 放大 itextsharp 后无法读取索引页面链接

> ID：10332823
> 
> 赞同：0
> 
> 时间：2012-04-26T11:51:38.030
> 
> 标签：asp.net, pdf, annotations, itextsharp

我有一个 PDF 文件，其中包含一个索引页面，其中包含带有目标页面的部分。

“book15.pdf”默认缩放百分比将为 68%，当我以编程方式将缩放百分比更改为 100% 时，原来的超链接丢失了？为什么？

这是我的示例代码。参考网址：[http ://wskidmore.com/2011/03/pdf-initial-view-settings-itextsharp/](http://wskidmore.com/2011/03/pdf-initial-view-settings-itextsharp/)

```
string FileName = AppDomain.CurrentDomain.BaseDirectory + "BooK15.pdf";
    Document doc = new Document();
    PdfReader reader = new PdfReader(FileName);
    using (MemoryStream memoryStream = new MemoryStream())
    {
        PdfWriter writer = PdfWriter.GetInstance(doc, memoryStream);
        doc.Open();
        PdfAction zoom = PdfAction.GotoLocalPage(1, new PdfDestination(PdfDestination.XYZ, -1, -1, (float)Int32.Parse("100") / 100), writer);
        writer.SetOpenAction(zoom);
        doc.AddDocListener(writer);
        PdfContentByte cb = writer.DirectContent;

        for (int p = 1; p <= reader.NumberOfPages; p++)
        {
            doc.SetPageSize(reader.GetPageSize(p));
            doc.NewPage();
            PdfImportedPage page = writer.GetImportedPage(reader, p);
            int rot = reader.GetPageRotation(p);
            if (rot == 90 || rot == 270)
                cb.AddTemplate(page, 0, -1.0F, 1.0F, 0, 0, reader.GetPageSizeWithRotation(p).Height);
            else
                cb.AddTemplate(page, 1.0F, 0, 0, 1.0F, 0, 0);
        }
        reader.Close();
        doc.Close();
        File.WriteAllBytes(AppDomain.CurrentDomain.BaseDirectory + "BooK151.pdf", memoryStream.ToArray());
    } 
```

当我使用以下代码阅读索引页页码链接时：

```
int _count= pdfReader.GetLinks(PageNo).Count;

PdfDictionary PageDictionary = pdfReader.GetPageN(PageNo);
PdfArray Annots = PageDictionary.GetAsArray(PdfName.ANNOTS); 
```

但这仅返回 0。有任何想法吗？这是我的屏幕截图...

带有可点击链接的原始 PDF ![带有可点击链接的原始 PDF](../Images/7811db198882bd566f9e670ab6bcfe55.png)

转换后链接丢失 ![转换后链接丢失](../Images/07cdd643d66a8f7cf065db36550d98b7.png)

# c# - 如何在实体框架查询中使用leftouter join

> ID：10332829
> 
> 赞同：0
> 
> 时间：2012-04-26T11:52:03.013
> 
> 标签：c#, entity-framework, linq-to-entities

![在此处输入图像描述](../Images/08f457e7ac9333e157a75f35ea57187c.png)如何在实体框架查询中使用leftouter join

我有两张桌子，一张是商品，另一张是库存我想获取所有商品，并从库存可用表中获取其数量，这取决于特定部门

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:54:43.653

例如 LINQ 查询

```
var query = (from p in dc.GetTable<Person>()
join pa in dc.GetTable<PersonAddress>() on p.Id equals pa.PersonId into tempAddresses
from addresses in tempAddresses.DefaultIfEmpty()
select new { p.FirstName, p.LastName, addresses.State }); 
```

SQL 翻译

```
SELECT [t0].[FirstName], [t0].[LastName], [t1].[State] AS [State]
 FROM [dbo].[Person] AS [t0]
 LEFT OUTER JOIN [dbo].[PersonAddress] AS [t1] ON [t0].[Id] = [t1].[PersonID] 
```

# objective-c - 从其他视图控制器获取事件

> ID：10332830
> 
> 赞同：0
> 
> 时间：2012-04-26T11:52:11.893
> 
> 标签：objective-c, uiviewcontroller, ibaction

我有两个 ViewController。第一个包含并显示一个带有值的数组。第二个是选择器视图（模态视图控制器），它允许选择要添加到数组上的列（使用“添加”按钮）。但是，我不知道当用户单击“添加”按钮刷新我的数组时如何检索事件，因为 IBaction 函数和数组不在同一个控制器中。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:15:30.380

您还可以在按下添加按钮时传递一个局部变量，然后在表格视图中重新加载数组。

我想你想要像在模拟器中添加联系人添加字段功能一样。

欢迎。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:16:07.963

我认为，您在第一个视图控制器中有一个数组，您想在按钮事件（IBAction）的第二个视图控制器中访问它：

在 secondviewcontroller 中使用数组作为参数创建方法，如下所示。

```
-(void)methodname:(nsmutablearray *)array; 
```

当您通过初始化导航到第二个视图控制器时，在第一个视图控制器中调用上述方法并在此方法中传递您的数组。

因此，在第二个视图控制器中，您将获得一个可以进一步使用的填充数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T12:11:14.973

协议对这种情况很有帮助。

协议只是方法声明的列表，与类定义无关。

协议在许多场景中都有用，常见的用法是定义要由其他类实现的方法。一个熟悉的例子是，当使用 tableview 时，您的类实现了 cellForRowAtIndexPath 方法，该方法要求将单元格内容插入到表格中—— cellForRowAtIndexPath 方法在 UITableViewDataSource 协议中定义。

[简单的objective-c协议示例](http://agilewarrior.wordpress.com/2012/03/19/simple-objective-c-protocol-example/)

# regex - 基于正则表达式匹配提取子字符串

> ID：10332832
> 
> 赞同：4
> 
> 时间：2012-04-26T11:52:18.663
> 
> 标签：regex, vb.net

快速正则表达式问题（我希望）。

我需要根据正则表达式从任何字符串中识别一个子字符串。

例如，采用以下字符串：

```
"Blogs, Joe (S0003-000292).html"
"bla bla bla S0003-000292 & so on"
"RE: S0003-000292" 
```

我需要提取“S0003-000292”部分（如果未找到则标记异常）。

至于我尝试过的，好吧，我写了一个粗略的模式来识别 S0000-000000：

```
^\(S[0-9]{4}-[0-9]{6}\)$ 
```

我已经尝试对其进行如下测试：

```
Dim regex As New Regex("Blogs, Joe (S0003-000292) Lorem Ipsum!")
Dim match As Match = regex.Match("^S[0-9]{4}-[0-9]{6}$")

If match.Success Then
    console.writeline "Found: " & match.Value
Else
    console.writeline "Not Found"
End If 
```

但是，这始终会导致 Not Found。

所以，真的有两个问题，我的模式有什么问题以及如何使用修改后的模式来提取子字符串？

（使用.net 2）

**编辑：** stema 为我指出了正确的方向（即删除 ^ 和 $） - 但是这并没有解决问题，我的主要问题是我在 RegEx 构造函数中定义了字符串而不是模式 - 交换了这些并它工作得很好（我责怪缺乏咖啡因）：

```
Dim regex As New Regex("S[0-9]{4}-[0-9]{6}")
Dim match As Match = regex.Match("Joe, Blogs (S0003-000292).html")

If match.Success = True Then
    console.writeline "Found: " & match.Value
Else
    console.writeline "Not Found"
End If 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T11:57:56.897

您有锚点可以防止您的模式匹配

```
^\(S[0-9]{4}-[0-9]{6}\)$
^                      ^ 
```

`^`匹配字符串的开头

`$`匹配字符串的结尾

并且由于您要匹配的部分之前和之后还有其他内容，因此您的模式将不匹配。只需删除那些锚，它应该没问题。

或者改用单词边界

```
\bS[0-9]{4}-[0-9]{6}\b 
```

`\b`如果您的模式前后有一个“非单词”字符（非字母或数字），则将匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:03:04.823

这是可以帮助您的代码注意：我用 c# 编写

```
Regex reg  = new Regex("(.)*S[0-9]{4}-[0-9]{6}(.)*");
string str = "Blogs, Joe (S0003-000292) Lorem Ipsum!";
Console.WriteLine(reg.IsMatch(str));
Console.ReadLine(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T12:10:23.110

```
Dim reg as new Regex("(.)*S[0-9]{4}-[0-9]{6}(.)*")
Dim str as new string("Blogs, Joe (S0003-000292) Lorem Ipsum!")
MessageBox.show(reg.IsMatch(str))

I am not sure about syntax but this may be a right conversion of my c# code. 
```

# android - Android：eclipse更新和方法找不到

> ID：10332837
> 
> 赞同：0
> 
> 时间：2012-04-26T11:52:51.113
> 
> 标签：android, eclipse

在 Eclipse 一个包含该方法的项目的最后更新之后

`VideoView resume()`

标记为错误，如果我搜索 eclipse 方法，我没有找到它，但会找到所有其他 ViewView 方法，例如 start() pause()。谢谢

编辑：相同的代码

```
@Override
    protected void onPause() {
        super.onPause();
        vv.pause();
        setCurrentPosition();
        Log.d("Media", "Pause");
    }

    @Override
    protected void onResume() {
        super.onResume();
        vv.resume();
        loading.setVisibility(View.VISIBLE);
        vv.setEnabled(false);
        makeInvisible();
        Log.d("Media", "Resume");
    } 
```

在方法 vv.pause() eclipse 上不报告错误，但对于代码 vv.resume() 是的！新版eclipse肯定有问题！

# google-app-engine - CRUD 写入特定应用程序需要超过 7600 req/min 免费帐户

> ID：10332845
> 
> 赞同：-6
> 
> 时间：2012-04-26T11:53:18.643
> 
> 标签：google-app-engine

我有一个应用程序在应用程序引擎上非常频繁地执行 CRUD（特定于写入）操作，有时它可能会超过 7600 req/min 的免费限制。有没有办法增加这个限制？

PS 我知道付费帐户会将其提高到 30000 req/min，但它不想使用它。

无论如何使用稀疏文件的概念并发送文件而不是使用4KB页面。因为对 CRUD 操作的响应只占用了某些字节，而所有其他字节都被浪费了。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T13:11:30.637

注意：很难给出一个通用的节省成本的建议——这完全取决于你的应用程序在做什么。以下是一些基本提示：

节省数据存储使用量 - 首先阅读[计费文档](https://developers.google.com/appengine/docs/billing)以了解成本结构。

1.  最重要的是：尽可能使用 memcache，尤其是对于复杂查询的缓存结果。

2.  如果可能，请使用`get()`而不是`query()`. 它们便宜一半。

3.  不要索引查询中未使用的属性。索引非常昂贵——它们在每个实体创建/更新/删除上都需要花费。

4.  重要提示：不要`offset`在查询中使用 - 这是对资源的巨大浪费。它实际上会读取所有实体`offset+limit`（并为此向您收费）然后只是将`limit`实体返回给应用程序：[https ://developers.google.com/appengine/docs/python/datastore/queryclass#Query_fetch](https://developers.google.com/appengine/docs/python/datastore/queryclass#Query_fetch)

Web 应用程序的一般建议 - 缓存、缓存、缓存：如果您的 HTTP GET 是幂等的（它们根据参数而变化，但不随时间变化），那么您可以设置缓存标头，以便请求将由 Google 缓存基础设施（即为所有 GAE 应用程序启用）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T14:46:58.030

仍然对您在做什么一无所知，但免费层的 Google App Engine 可能不适合您。

虽然我不知道任何 7600 req/min 限制，但每天有 50k 的数据存储写入操作限制和 50k 的数据存储读取操作限制。假设每个 HTTP 请求只进行一次写入操作，您的应用程序每天只能在免费层上运行 6.6 分钟。

我不知道你在说什么稀疏文件或 4k 页面，所以我对一个不清楚的问题投了反对票。

# jquery - 如何使用jquery解析多维json数组

> ID：10332846
> 
> 赞同：0
> 
> 时间：2012-04-26T11:53:18.963
> 
> 标签：jquery, html, json

我有以下 jquery 函数来解析 json 数组“projectDetail”，但是当我尝试从数组中打印 ApprovalDesc 的值时，它显示为未定义，请问我知道什么是正确的语法吗？

```
function show(projectDetail) {
          var  project = projectDetail;
            $.each(project, function (i, tweet) {
                $.each(tweet.ProjectUpdates, function (i, tweet1) {
                $.each(tweet1.ProjectApproval, function (i, tweet2) {
                alert(i + ': ' + tweet2.ApprovalDesc);
               var PStatus = tweet.ApprovalDesc;
            });
        });
        });
       } 
```

## json输出

```
{ "d" : {
      "ProjectUpdates" : { "ExceptionId" : 0,
          "ProjectApproval" : [ { "ApprovalDesc" : "ABCApproved",
                "CreatedBy" : null,
                "CreatedDate" : "/Date(-62135596800000)/", 
                "ModifiedDate" : "/Date(-62135596800000)/",
                "ApprovalDesc" : "welcome",
                "SortOrder" : 1
              } ],
          "ProjectStatusGallery" : [ { "CategoryId" : 0,
                "CreatedBy" : null,
                "CreatedDate" : "/Date(-62135596800000)/",              
                "ImageName" : "flower",
                "ImageUrl" : "D://Images",
                "ModifiedBy" : null,
                "ModifiedDate" : "/Date(-62135596800000)/",               
              },
              { "CategoryId" : 0,
                "CreatedBy" : null,
                "CreatedDate" : "/Date(-62135596800000)/",                
                "ImageName" : "flower2",
                "ImageUrl" : "D://Images",
                "ModifiedBy" : null,
                "ModifiedDate" : "/Date(-62135596800000)/"                
              }
            ]
        },
 "__type" : "sample"
    } } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T11:58:39.050

**欢迎**应该被引用为一个字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T11:57:30.733

您是否在 json 字符串上调用了 parseJSON 以将其放入对象中？然后它很容易访问，不需要循环。

[http://api.jquery.com/jQuery.parseJSON/](http://api.jquery.com/jQuery.parseJSON/)

```
var json = $.parseJSON(your_json_string);

console.log(json.__type.sample);
console.log(json.d.ProjectUpdates.ProjectStatusGallery.ImageName); 
```

# ruby-on-rails - 将 Model 数组转换为指定 Model.attribute 的数组

> ID：10332862
> 
> 赞同：0
> 
> 时间：2012-04-26T11:54:29.317
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

```
cars = Car.find(data).find_all{ |car| car.model == "Honda" } 
```

这将返回 Car 的列表——我想将此列表转换为仅包含 car.id 的列表。我将如何以类似 Ruby 的方式进行操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:57:10.720

你可以这样做：

```
car_ids = Car.find(data).find_all{ |car| car.model=="Honda" }.map{ |car| car.id } 
```

本质上，`array.map { |x| f(x) }`返回一个大小相同的新数组，其中包含以`f`相同顺序调用每个原始数组条目的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T11:58:19.453

只需调用：

```
cars = Car.find(data).find_all{ |car| car.model == "Honda" }.map{ |car| car.id } 
```

[http://corelib.rubyonrails.org/classes/Array.html#M000427](http://corelib.rubyonrails.org/classes/Array.html#M000427)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T12:21:13.163

我会这样做：

```
cars = Car.where(id: data, model: 'Honda').pluck(:id) 
```

假设这`data`是一个汽车 ID 的数组

# django - 如何自定义 django 表单标签

> ID：10332865
> 
> 赞同：6
> 
> 时间：2012-04-26T11:54:31.423
> 
> 标签：django, forms, label, customization

```
class permForm(forms.Form):
    def __init__(self, data=None, **kwargs):
        super(permForm, self).__init__(data, **kwargs)

        for item in list(AdminMenu.objects.filter(parent_id=0)):
            self.fields['menu_%d' % item.id] = forms.BooleanField(label=item.title)
            for childitem in list(AdminMenu.objects.filter(parent_id=item.id)):
                arr=[]
                arr.append(str(item.id))
                arr.append(str(childitem.id))
                self.fields['menu_%s' % '_'.join(arr)] = forms.BooleanField(label=childitem.title) 
```

这将返回

类别：复选框

添加类别：复选框

列表类别：复选框

食物：复选框

添加食品：复选框

列出食品：复选框

表格：复选框

添加表格：复选框

列出表格：复选框

用户：复选框

查看用户：复选框
我如何显示如下

**类别：**复选框

添加类别：复选框

列表类别：复选框

**食物**：复选框

添加食品：复选框

列出食品：复选框

**表格**：复选框

添加表格：复选框

列出表格：复选框

**用户**：复选框

查看用户：复选框

我想让父母类别标签加粗以将其与儿童区分开来。可能的？我不想使用硬编码形式

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-27T13:17:19.700

这是一个如何将一些 HTML 添加到表单标签的示例：

```
from django.template.defaultfilters import mark_safe

class MyForm(forms.Form):
    my_field = forms.CharField(
        max_length=100,
        label = mark_safe('<strong>My Bold Field Label</strong>')
    ) 
```

# c# - ScrollViewer 不滚动

> ID：10332867
> 
> 赞同：5
> 
> 时间：2012-04-26T11:54:44.050
> 
> 标签：c#, xaml, windows-8, microsoft-metro, windows-runtime

我想要一个包含 3 个组件的接口，一个接一个。第一个是 ListView，另外两个是 Grid。

由于组件会在右侧溢出，因此我想将它们放在 ScrollViewer 中。我没有成功。我试图做一个非常简单的例子来尝试，但即使这个例子也失败了。

```
 <ScrollViewer Grid.Column="1" Grid.Row="2" HorizontalAlignment="Left" VerticalAlignment="Top" Width="600" Height="400">
        <StackPanel Width="1200" Height="400" Orientation="Horizontal">
            <Border Background="AntiqueWhite" Width="400" Height="400" HorizontalAlignment="Left" VerticalAlignment="Top"  />
            <Border Background="Blue" Width="400" Height="400" HorizontalAlignment="Left" VerticalAlignment="Top" />
            <Border Background="LimeGreen" Width="400" Height="400" HorizontalAlignment="Left" VerticalAlignment="Top" />
        </StackPanel>
    </ScrollViewer> 
```

如您所见，ScrollViewer 位于网格内部。我错过了什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-26T12:12:48.820

尝试在滚动查看器上设置这些属性：-

```
 <ScrollViewer VerticalScrollBarVisibility="Visible" HorizontalScrollBarVisibility="Visible" ZoomMode="Disabled" Grid.Column="1" Grid.Row="2" HorizontalAlignment="Left" VerticalAlignment="Top" Width="600" Height="400">
    <StackPanel Width="1200" Height="400" Orientation="Horizontal">
        <Border Background="AntiqueWhite" Width="400" Height="400" HorizontalAlignment="Left" VerticalAlignment="Top"  />
        <Border Background="Blue" Width="400" Height="400" HorizontalAlignment="Left" VerticalAlignment="Top" />
        <Border Background="LimeGreen" Width="400" Height="400" HorizontalAlignment="Left" VerticalAlignment="Top" />
    </StackPanel>
</ScrollViewer> 
```

这通常对我有用！

# android - 从 android 应用程序打开本机浏览器

> ID：10332868
> 
> 赞同：8
> 
> 时间：2012-04-26T11:54:59.423
> 
> 标签：android, android-intent, browser, mobile-browser

我有一部安装了多个浏览器的安卓手机，我可能会也可能不会将浏览器设置为默认值。

所以，我的问题是..

1.  从我的应用程序中，如何强制仅在**NATIVE** android 浏览器中打开链接？
2.  有没有办法知道浏览器是否设置为默认？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-26T12:54:59.113

> 从我的应用程序中，如何强制仅在 NATIVE android 浏览器中打开链接？

```
Intent intent = new Intent();
ComponentName comp = new ComponentName("com.google.android.browser","com.google.android.browser.BrowserActivity");
intent.setComponent(comp);
intent.setAction("android.intent.action.VIEW");
intent.addCategory("android.intent.category.BROWSABLE");
Uri uri = Uri.parse(url);
intent.setData(uri);
try
{
    startActivity(intent);
 }
 catch (Exception e)
 {
   e.printStackTrace();
 } 
```

> 有没有办法知道浏览器是否设置为默认？

```
PackageManager packageManager = getPackageManager();

Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setData(Uri.parse("URL"));

List<ResolveInfo> list = packageManager.queryIntentActivities(intent, 0);

if (list.size() > 0) {
    for (ResolveInfo resolveInfo : list) {
       resolveInfo.isDefault();// will let u know if the app is set to default
    }

} else {
    //No apps available
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-22T05:26:44.920

您必须执行以下操作才能调用本机浏览器

```
 intent.setComponent(new    
  componentName("com.android.browser","com.android.browser.BrowserActivity")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T12:15:44.470

尝试这样的事情。

```
try {
      Intent i = new Intent();
      ComponentName comp = new ComponentName("com.google.android.browser","com.google.android.browser.BrowserActivity");
      i.setComponent(comp);
      i.setAction("android.intent.action.VIEW");
      i.addCategory("android.intent.category.BROWSABLE");
      ContentURI uri = new ContentURI(url);
      i.setData(uri);
      startActivityForResult(i, 2);
      } catch (URISyntaxException e) {
                       e.printStackTrace();
      } 
```

对于您的第二个问题，您可以使用`PackageManager`.

获取实例`PackageManager`

```
PackageManager packageManager = getPackageManager(); 
```

并查询它的特定动作、数据和类别`Intent`。

```
Intent intent = new Intent(Intent.ACTION_VIEW);
intent.setData(Uri.parse("URL"));

List<ResolveInfo> list = packageManager.queryIntentActivities(intent, 0);

    for (ResolveInfo resolveInfo : list) {

       if(resolveInfo.isDefault())
        {
        //default browser
         }
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T07:10:18.547

终于想通了。resolveActivity 与 PackageManager 实例上的 MATCH_DEFAULT_ONLY 标志一起使用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-06T07:30:10.610

当制造商的包名称不同时，可能会发生 ActivityNotFoundException。请参考这个答案，希望它会有所帮助。

[https://stackoverflow.com/a/14723703/1083128](https://stackoverflow.com/a/14723703/1083128)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-01T23:06:38.373

检查此代码：

```
private final static List<ComponentName> browserComponents  = new ArrayList<ComponentName>() {{
    add(new ComponentName("com.google.android.browser", "com.google.android.browser.BrowserActivity"));
    add(new ComponentName("com.android.browser", "com.android.browser.BrowserActivity"));
    add(new ComponentName("com.android.chrome", "com.google.android.apps.chrome.IntentDispatcher"));
}};

public static void openInNativeBrowser(Context context, String url) {
    if (context == null || TextUtils.isEmpty(url)) {
        return;
    }

    PackageManager pm = context.getPackageManager();
    Intent intent = new Intent();
    intent.setAction(Intent.ACTION_VIEW);
    intent.addCategory(Intent.CATEGORY_BROWSABLE);
    intent.setData(Uri.parse(url));

    for (ComponentName cn : browserComponents) {
        intent.setComponent(cn);
        ActivityInfo ai = intent.resolveActivityInfo(pm, 0);
        if (ai != null) {
            aLog.w(TAG, "browser:  " + ai);
            context.startActivity(intent);
            return;
        } else {
            aLog.w(TAG, "can't resolve activity for " + intent);
        }
    }

    // no native browser
    intent = new Intent(Intent.ACTION_VIEW);
    intent.setData(Uri.parse(url));
    List<ResolveInfo> list = pm.queryIntentActivities(intent, 0);
    if (list.size() > 0) {
        for (ResolveInfo ri : list) {
            aLog.w(TAG, ri + " : " + ri.isDefault);
        }
        context.startActivity(intent);
    } else {
        aLog.w(TAG, "no browser apps");
    }
} 
```

# javascript - 只有 PDF 文件通过 jQuery 打开空白页

> ID：10332879
> 
> 赞同：1
> 
> 时间：2012-04-26T11:56:02.980
> 
> 标签：javascript, jquery, pdf

我正在将此代码用于我的链接打开空白页面：

```
$("a[href^='http:']:not([href*='" + window.location.host + "'][target='_blank'])").live('click', function(){
  $(this).attr('target','_blank'); 
 }); 
```

此代码有效，但我只希望 pdf 文件打开空白页。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T11:58:38.253

这可以在 DOMReady（或添加链接的任何时候）立即执行，而不是在实际点击时执行：

```
$('a[href$=".pdf"]').attr('target', '_blank'); 
```

请注意，这会查找以 .`href`结尾的锚点`.pdf`。因此，这将不匹配`href="/test/my-document.pdf#some-hash"`，但话又说回来，您无法仅通过查看链接来知道如果您关注它，服务器将发送给您的响应的内容类型是什么。所以这可能和它一样好。

# android - 安装我的应用程序时未安装应用程序

> ID：10332881
> 
> 赞同：0
> 
> 时间：2012-04-26T11:56:13.123
> 
> 标签：android

我创建了我的应用程序，第一次在我的手机上尝试它工作正常，但后来我卸载它并再次安装它，它给了我这个错误 Application not installed here's my mainfest.xml .. 我认为它有一些东西与我的 mainfest 文件有关...我已阅读与我的问题相关的问题，但找不到任何重复的活动。

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.zegoggles.smssync"
    android:debuggable="true"
    android:description="@string/app_description"
    android:installLocation="auto"
    android:versionCode="1406"
    android:versionName="1.4.5" >

    <application
        android:name="App"
        android:backupAgent="PreferenceBackupAgent"
        android:description="@string/app_description"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name="SmsSync"
            android:label="@string/app_name"
            android:launchMode="singleInstance" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

            <!-- handle gmail oauth callbacks -->
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <action android:name="android.intent.action.EXTERNAL_APPLICATIONS_AVAILABLE" />

                <category android:name="android.intent.category.DEFAULT" />
                <category android:name="android.intent.category.BROWSABLE" />

                <data
                    android:host="gmail"
                    android:scheme="smssync" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.paypal.android.MEP.PayPalActivity"
            android:configChanges="keyboardHidden|orientation"
            android:theme="@android:style/Theme.Translucent.NoTitleBar" />

        <service
            android:name="SmsBackupService"
            android:exported="false" />
        <service
            android:name="SmsRestoreService"
            android:exported="false" />

        <receiver
            android:name="SmsBroadcastReceiver"
            android:enabled="true" >
            <intent-filter>
                <action android:name="android.provider.Telephony.SMS_RECEIVED" />
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
        </receiver>
        <receiver
            android:name="BackupBroadcastReceiver"
            android:enabled="true" >
            <intent-filter>
                <action android:name="com.zegoggles.smssync.BACKUP" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </receiver>

        <meta-data
            android:name="com.google.android.backup.api_key"
            android:value="AEdPqrEAAAAI15zt2oJAvxMu4s5SaHisDyYsduKd2jq_-XnAug" />
    </application>

    <uses-permission android:name="android.permission.READ_SMS" />
    <uses-permission android:name="android.permission.WRITE_SMS" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.READ_CONTACTS" />
    <uses-permission android:name="android.permission.WRITE_CONTACTS" />
    <uses-permission android:name="android.permission.RECEIVE_SMS" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
    <uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />
    <uses-permission android:name="android.permission.READ_CALENDAR" />
    <uses-permission android:name="android.permission.WRITE_CALENDAR" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.BACKUP" />

    <uses-feature
        android:name="android.hardware.telephony"
        android:required="true" />
    <uses-feature
        android:name="android.hardware.wifi"
        android:required="false" />

    <uses-sdk
        android:minSdkVersion="3"
        android:targetSdkVersion="14" />

    <supports-screens android:smallScreens="true" />

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:12:57.787

您是否尝试过此[问题](https://stackoverflow.com/questions/4226132/application-not-installed-error-on-android)中的建议？

我首先要尝试的是：从您的设备中手动卸载该应用程序，然后重新安装。也许它只是由于某种原因没有被删除。

# wcf - 将“application/x-www-form-urlencoded”发布到 WCF 时的流管理

> ID：10332891
> 
> 赞同：3
> 
> 时间：2012-04-26T11:56:25.883
> 
> 标签：wcf, post, stream, request, dispose

我使用 WCF[支持“application/x-www-form-urlencoded”发布数据的最佳方式中建议的方法将数据发布到 WCF？](https://stackoverflow.com/questions/604463/best-way-to-support-application-x-www-form-urlencoded-post-data-with-wcf)

我正在按照[http://blogs.southworks.net/erossetto/2007/09/03/raw-http-post-with-wcf/](http://blogs.southworks.net/erossetto/2007/09/03/raw-http-post-with-wcf/)中的示例进行操作，并且一切正常。但是，一个问题是请求中的流的管理。我创建了一个辅助方法，例如

```
 public static NameValueCollection ParsePOSTRequest(Stream input)
    {
        StreamReader sr = new StreamReader(input);
        string s = sr.ReadToEnd();
        sr.Dispose();

        return HttpUtility.ParseQueryString(s);
    } 
```

我在我所有的方法中都调用它，这样我就可以更容易地查找参数。现在我在尝试通过`WebOperationContext.Current`. 任何属性或方法都会抛出一个异常`The System.ServiceModel.Channels.MessageProperties object has been disposed.`，这显然是因为流读取器在执行我的业务逻辑之前就被释放了。

问题是“处理它是否正确？” 我应该直接关闭它吗？或者根本不用担心关闭？在我的方法完成后，框架是否仍然需要该流，或者这一切都由我来玩？

# c# - 用于加密文件容器的 DotNetZipLib 的商业替代品

> ID：10332892
> 
> 赞同：1
> 
> 时间：2012-04-26T11:56:28.433
> 
> 标签：c#, .net, file, encryption, containers

我不愿意为加密文件容器使用开源替代品。

对商业的有什么建议吗？

System.IO.Packaging.EncryptedPackageEnvelop 似乎需要付出太多努力才能实现，而且那里的示例似乎不支持太多的 ZIP 功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T14:05:05.187

[点网邮编](http://dotnetzip.codeplex.com/)

> 为存档内容的隐私创建 AES 加密的 zip 存档

也有[例子](http://dotnetzip.codeplex.com/wikipage?title=CS-Examples&referringTitle=Examples)。

[MS-PL](http://www.opensource.org/licenses/ms-pl)许可，而开源可用于封闭源代码产品，而无需发布源代码。

# css - type="button" 按钮不会显示

> ID：10332893
> 
> 赞同：0
> 
> 时间：2012-04-26T11:56:43.043
> 
> 标签：css, asp.net-mvc-3, stylesheet

我无法显示按钮。当我使用它时，模拟器上的背景是黄色的，甚至没有显示文本框或标签。我只有 type="submit" 的 tryide romive，然后当它应该是一个按钮时，它会在创建用户上显示一个文本框。我需要帮助伙计们。继承人的代码。

```
@using (Html.BeginForm("Create","Category",FormMethod.Post))
{
  <div data-role="fieldcontain">
   @Html.LabelFor(model => model.Name)
   @Html.EditorFor(model => model.Name)
   <div>
      @Html.ValidationMessageFor(m => m.Name)
   </div>
    </div>
    <div data-role="fieldcontain">
    @Html.LabelFor(model => model.Description)
    @Html.EditorFor(model => model.Description)          
    </div>           
    <div>
    <input type="submit" value="Create user" />// this is the problem
  </div>
} 
```

当我删除 type="submit" 所有显示但不是按钮时。但是当我有 type="submit" 时，洞模拟器是黄色的，没有任何显示。我什至也尝试过使用它只是 type="submit" 是问题所在。

这里是css和脚本

```
<link href="../../../Content/jquery.mobile-1.1.0.min.css" rel="stylesheet" type="text/css" />
<script src="../../../Scripts/jquery-1.5.1.min.js" type="text/javascript"></script>
<script src="../../../Scripts/jquery.mobile-1.1.0.min.js" type="text/javascript"></script> 
```

对不起我糟糕的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:31:19.763

如果它的**样式问题：** 使用 Firebug 并检查元素，您可以看到其完整的样式痕迹。这将帮助您找出 CSS 问题。

# regex - 正则表达式检查一组字符的不重复

> ID：10332894
> 
> 赞同：5
> 
> 时间：2012-04-26T11:56:43.870
> 
> 标签：regex, permutation, superset

假设我有一组字符`[ABC]`。我正在寻找一个正则表达式，它可以匹配除了空集之外的超集的任何排列，即

```
ABC ACB BAC BCA CAB CBA
AB BC AC CB CA BA
A B C 
```

正则表达式应该（显然）*不*匹配空字符串。

ps 表达相同目标的另一种方法是“最多匹配包含集合中每个字符的任何非空字符串一次”。

更新：集合`[ABC]`只是一个例子，真实的集合也可能更大。带着这个问题，我希望找到一个“通用”的解决方案，而不是针对`[ABC]`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-26T12:08:44.647

我相信这可以通过正则表达式来解决。使用这个正则表达式：

```
/^([ABC])(?!\1)([ABC])?(?!\1|\2)[ABC]?$/ 
```

如果您需要在线演示，请告诉我。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T20:34:40.080

感谢您的回答（尤其是 anubhava 和 codaddict 的），我能够找到这个解决方案，我认为它非常优雅，因为它只允许输入一次集合：

```
\b(([ABC])(?!.*\2))+\b 
```

`\b`需要匹配完整的单词；省略它们也会找到尊重所需属性的子词。要匹配一个完整的字符串，你显然会这样做：

```
^(([ABC])(?!.*\2))+$ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T12:02:15.537

这不是正则表达式擅长的。您可能只想创建一个排列列表，然后生成所有唯一的子字符串。

就像是：

```
def matches(s, characters):
    if len(s) != len(set(s)):
        return False # not unique sequence of characters
    return set(s).issubsetof(set(characters)) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T12:05:54.210

尝试：

```
([ABC]?)(?!.*\1)([ABC]?)(?!.*\2)[ABC]? 
```

它只是`[ABC]?`重复了 3 次，并添加了对不允许重复字符的否定前瞻断言的检查。

请注意，这仅在输入集都是唯一的情况下才有效。

[**看它工作**](http://www.rubular.com/r/Xe0mFFie4W)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-26T13:06:56.043

```
"A((B?C?)|(C?B?))|B((A?C?)|(C?A?))|C((A?B?)|(B?A?))" 
```

它是 A|B|C，它们中的每一个都可以跟一对可选值

```
 A(B?C?) matches A, AB,AC and ABC
 A(C?B?) matches A, AC,AB and ACB 
```

但不是 ACAC、AA 或 ACC。以 B 或 C 作为第一个字符的情况是等价的。

对于更长的字符串，这很快就会变得丑陋。更好的方法是（伪代码）：

```
 string.sort().matches ("^A?B?C?$") && string.length > 0 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-27T08:16:45.497

好的，我必须说我已经考虑了很多你的问题 - 因为你似乎想要一些真正通用和可定制的东西（支持尽可能多的元素等） - 这是我认为最优化的解决方案。

从数学的角度来看，您想要的是识别**一组元素的所有排列而不重复**。

* * *

### 步骤1 ：

找到集合的所有排列，**重复**（并将它们存储在一个数组中）

```
[ABC]([ABC]{1,2})? 
```

***旁注：**假设您有一个包含`n`元素的集合，您所要做的就是：*

`[elements]([elements]{1,n-1})?`

* * *

### 第2步 ：

过滤所有具有重复元素的排列

**PHP 中的示例代码：**

```
<?php

    function strToArray($str)
    {
        $i = 0;

        while (isset($str[$i]))
        {
            $result[$i] = $str[$i];
            $i++;
        }

        return $result;
    }

    function noDuplicates($str)
    {
        if (array_unique(strToArray($str))==strToArray($str)) return true;
        else return false;
    }

    $AAA = "AAA";
    $ABC = "ABC";

    if (noDuplicates($AAA)) echo "$AAA : ok"; else echo "$AAA : not ok\n";
    if (noDuplicates($ABC)) echo "$ABC : ok"; else echo "$ABC : not ok\n";

?> 
```

**输出 ：**

```
AAA : not ok
ABC : ok 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-26T12:23:32.470

这是我的版本：

```
\b(?=[ABC]{1,3})([ABC]{1})(?:(?!\1)([ABC]{1})(?:(?!\1)(?!\2)[ABC]{1})?)?\b 
```

逻辑：

*   `\b`: 寻找单词边界
*   `(?=[ABC]{1,3})`: 前瞻看看是否有一个长度 = 3 的字符串，其值只有 A、B、C
*   `([ABC]{1})`: 匹配第一个字符然后可选
*   `(?!\1)([ABC]{1})`：检查下一个字符是否与先前匹配的不同 - 如果不是，则匹配它并可选
*   `(?!\1)(?!\2)[ABC]{1}`: 检查下一个字符是否与之前匹配的字符 1 或 2 不同 - 如果不是，则匹配该字符

我针对这个输入进行了测试，所以它看起来很可靠：

AABCC BBCC AB BC AC CB CA BA ABC ABC ACB BAC BCA CAB CBA AAA ABB AAA BBC AA

* * *

**编辑：**

正如您提到的，字符集可以更大，我会按照您问题中的 PS 建议并按照以下方式执行此操作：

*   引入`chars`数组，它将保存允许集中的每个字符（将字符串拆分为字符）

*   得到一个数组`inputStrings`（在空格或其他任何需要的地方分割输入字符串）

*   对于 {`string`中的每个`inputStrings`

*   检查是否`string.length <= inputStrings.length`
*   尝试将列表中的每个字符与当前输入匹配，并保存在`matches`列表中找到的匹配数
*   检查`matches`列表是否包含任何条目，然后检查所有条目是否 == 1 或 0 }

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-26T11:57:44.440

**试试这个：（**更新）

```
A[BC](?![ABC])|B[AC](?![ABC])|C[AB](?![ABC])|[ABC](?![ABC])|(ABC|ACB|BAC|BCA|CAB|CBA)(?![ABC]) 
```

**演示：**

[http://regexr.com?30pa6](http://regexr.com?30pa6)

# c#-4.0 - 查询值和目标字段的数量不相同

> ID：10332899
> 
> 赞同：0
> 
> 时间：2012-04-26T11:56:57.833
> 
> 标签：c#-4.0, ms-access-2007

我有一个问题，当我运行我的代码时，会出现“*查询值和目标字段的数量不一样*”的错误。

请就此向我提出建议。

“*代码*”

```
 protected void btn_Save_Click(object sender, EventArgs e)
    {
        string str = ("Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:/Users/Geeta/Desktop/eTimeTrackLite1.mdb;Persist Security Info=False;");
        OleDbConnection conn = new OleDbConnection(str);
        conn.Open();
        string query = "insert into Employees (EmployeeName,EmployeeCode,DeviceCode,Company,Department,Designation,Grade,Team,Location,EmploymentType,Category,HolidayGroup,ShiftGroup,ShiftRoster,Dateofjoining,Dateofconfirmation,Status,DateofResigning,Sex) values ('" + txt_empname.Text + "','" + txt_code.Text + "', '" + txt_dcode.Text + "', '" + Convert.ToString(dp_company.SelectedItem)+ "', '" + Convert.ToString(dp_department.SelectedItem) + "', '"+Convert.ToString(dp_designation.SelectedItem)+"', '"+Convert.ToString(dp_grade.SelectedItem)+"', '"+Convert.ToString(dp_team.SelectedItem)+"', '"+Convert.ToString(dp_location.SelectedItem)+"', '"+Convert.ToString(dp_emptype.SelectedItem)+"', '"+Convert.ToString(dp_category.SelectedItem)+"', '"+Convert.ToString(dp_holigroup.SelectedItem)+"', '"+Convert.ToString(dp_shiftgroup.SelectedItem)+"', '"+Convert.ToString(dp_shiftroster.SelectedItem)+"', '"+Convert.ToString(dp_day.SelectedItem)+"', '"+Convert.ToString(dp_month.SelectedItem)+"', '"+Convert.ToString(dp_year.SelectedItem)+"', '"+Convert.ToString(dp_cday.SelectedItem)+"', '"+Convert.ToString(dp_cmonth.SelectedItem)+"', '"+Convert.ToString(dp_cyear.SelectedItem)+"', '"+Convert.ToString(dp_status.SelectedItem)+"', '"+Convert.ToString(dp_rday.SelectedItem)+"', '"+Convert.ToString(dp_rmonth.SelectedItem)+"', '"+Convert.ToString(dp_ryear.SelectedItem)+"', '"+Convert.ToString(rdbtn_male.Checked)+"', '"+Convert.ToString(rdbtn_female.Checked)+"')";
        OleDbCommand cmd = new OleDbCommand(query, conn);
        cmd.ExecuteNonQuery();
        conn.Close();
        BindGridData();
    } 
```

“谢谢”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:24:06.960

此查询的问题在于您告诉查询需要 19 个插入参数（员工姓名、员工代码、设备代码、公司、部门、职务、等级、团队、位置、就业类型、类别、假日组、轮班组、轮班名单、加入日期、确认日期、状态、辞职日期、性别）

但是您尝试插入的内容不止于此 (26) - 如果您计算尝试插入的值，您会发现它们不匹配。

因此，您可以删除查询后半部分中的额外值，或者添加额外的插入参数。例如，您似乎试图多次插入“年”、“月”和“日”的值，但您只有一个日期字段。您应该将它们连接在一起并转换为日期，以使插入正常工作。

# objective-c - 用于 iphone 的 WSDL 网络服务

> ID：10332905
> 
> 赞同：0
> 
> 时间：2012-04-26T11:57:17.223
> 
> 标签：objective-c, ios, web-services, wsdl, xcode4.3

我尝试为目标 c 开发 wsdl Web 服务，但我没有找到任何好的解决方案。任何人都可以帮助我提供如何将 wsdl 数据输入 iPhone 应用程序的示例应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:04:07.487

似乎有许多第三方项目用于从 WSDL 文件生成客户端代码。看看这个 SO 答案：[How to access SOAP services from iPhone](https://stackoverflow.com/q/204465/4608)

# c - 在运行时找出 libjpeg 版本（或其他防止中止的方法）？

> ID：10332908
> 
> 赞同：1
> 
> 时间：2012-04-26T11:57:33.027
> 
> 标签：c, libjpeg

我的应用程序使用 libjpeg 读取/写入 JPEG 图像。一切正常

最近我的应用程序在尝试编写 JPEG 图像时开始崩溃，并在调用 jpeg_create_compress() 时出现错误“错误的 JPEG 库版本：库为 80，调用者期望为 62”（因此崩溃似乎是 libjpeg 端的故意中止而不是段错误）

一些调查表明，确实我的应用程序是针对 libjpeg-62 头文件（安装在 /usr/local/include 中）编译的，然后使用来自 libjpeg-80 的 dylib（安装在 /usr/lib/i386-linux- gnu/).

删除 libjpeg-62 头文件并使用 libjpeg-80 头文件进行编译解决了该问题。

但是，即使某些最终用户安装的库版本与编译我的应用程序所针对的库版本不同，我也希望有一个解决方案可以让我防止此类崩溃。

1）如果我能以某种方式说服 libjpeg 即使出现致命错误也不要中止，那就太好了；例如：

```
jpeg_abort_on_error(0); 
```

2）或有一个非中止检查是否安装了正确的库：

```
if(!jpeg_check_libraryversion()) return; 
```

3）如果这不是开箱即用的，我可以手动检查编译时API版本（JPEG_LIB_VERSION）与运行时检测到的兼容版本。

不幸的是，我无法在 API 中找到任何可以让我使用其中任何一种方法的东西。

我只是盲人还是我需要完全不同的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T07:03:29.920

为 error_exit 设置错误处理程序可防止应用程序崩溃。

（我的问题是我为加载功能完成了此操作，而*不是*为保存功能完成了此操作，因此在保存过程中出现问题时它退出了）。像下面这样的东西做了诀窍：

```
struct my_error_mgr {
  struct jpeg_error_mgr pub;    // "public" fields
  jmp_buf setjmp_buffer;    // for return to caller
};
typedef struct my_error_mgr * my_error_ptr;

METHODDEF(void) my_error_exit (j_common_ptr cinfo) {
 my_error_ptr myerr = reinterpret_cast<my_error_ptr> (cinfo->err);
 /* Return control to the setjmp point */
 longjmp(myerr->setjmp_buffer, 1);
}

/* ... */

void jpeg_save(const char*filename, struct image*img) {
  /* ... */
  /* We set up the normal JPEG error routines, then override error_exit */
  my_error_mgr jerr;
  cinfo.err = jpeg_std_error(&jerr.pub);
  jerr.pub.error_exit = my_error_exit;

  /* Establish the setjmp return context for my_error_exit to use. */
  if ( setjmp(jerr.setjmp_buffer) ) {
    /* If we get here, the JPEG code has signaled an error.
     * We need to clean up the JPEG object, close the input file, and return. */
    jpeg_destroy_compress(&cinfo);
    if(outfile)fclose(outfile);
    return(false);
  }
  /* ... */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-01T12:48:32.340

```
#include "jpeglib.h"
#include <iostream>

// JPEG error handler
void JPEGVersionError(j_common_ptr cinfo)
   {
   int jpeg_version = cinfo->err->msg_parm.i[0];
   std::cout << "JPEG version: " << jpeg_version << std::endl;
   }

int main(int argc, char* argv[])
   {

    // Need to construct a decompress struct and give it an error handler
    // by passing an invalid version number we always trigger an error 
    // the error returns the linked version number as the first integer parameter
    jpeg_decompress_struct cinfo;
    jpeg_error_mgr error_mgr;
    error_mgr.error_exit = &JPEGVersionError;
    cinfo.err = &error_mgr;
    jpeg_CreateDecompress(&cinfo, -1 /*version*/, sizeof(cinfo)); // Pass -1 to always force an error

   } 
```

# javascript - 使用 cat 更改图片的左右键按下事件

> ID：10332911
> 
> 赞同：0
> 
> 时间：2012-04-26T11:57:35.447
> 
> 标签：javascript, jquery, html

简单地说，我有一个带有`data-next`, `data-prev`, `data-cat`attr 的 div。

这是到目前为止的js..

```
$(document).keydown(function(event) {

    var prev = $("#myDiv").attr('data-prev'),
        cat = $("#myDiv").attr('data-cat'),
        next = $("#myDiv").attr('data-next');

    switch (event.keyCode) {

        case 37:
            if (prev >= 1) {
                window.location = "http://site.com/picture/" + prev;
            }
            break;

        case 39:
            if (next > 1) {
                window.location = "http://site.com/picture/" + next;
            }
            break;
    }
});​ 
```

该代码有效，但仅适用于**左右****动作**。对于猫，我认为这样做，但我认为是错误的，有更好的方法来做到这一点！

```
$(document).keydown(function(event) {

    var prev = $("#myDiv").attr('data-prev'),
        cat = $("#myDiv").attr('data-cat'),
        next = $("#myDiv").attr('data-next');

    if (cat) {
        switch (event.keyCode) {

        case 37:
            if (prev >= 1) {
                window.location = "http://site.com/picture/" + prev;
            }
            break;
        case 39:
            if (next > 1) {
                window.location = "http://site.com/picture/" + next;
            }
            break;

        }
    }
    else {
        switch (event.keyCode) {
            // but i dont how to insert the cat var the link have to be cat/{n}/picture/{n}
        case 37:
            if (prev >= 1) {
                window.location = "http://site.com/picture/" + prev;
            }
            break;
        case 39:
            if (next > 1) {
                window.location = "http://site.com/picture/" + next;
            }
            break;

        }
    }
});​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T16:33:35.113

（评论中有很多解释）

所以，我想知道你为什么使用 window.location ：它对页面进行了无用的刷新。

我做了一个非常基本的小脚本，它改变了按键上的 img src。您可能需要对其进行调整（我使用了来自 placekitten.com 的猫），但我保留了您的图像编号。我试图让它简单易懂。

[http://jsfiddle.net/teVPD/11/](http://jsfiddle.net/teVPD/11/)

可以添加许多功能（动画、猫预加载），但这是增强汽车滑块的良好开端。

看看，如果你有任何问题，不要犹豫，问他们。

# android - 自定义 Android Spinner 不完全显示文本

> ID：10332913
> 
> 赞同：0
> 
> 时间：2012-04-26T11:57:37.397
> 
> 标签：android, spinner, android-arrayadapter

我创建了一个自定义`ArrayAdapter`来保存一个元组。我使用元组中的一项作为要显示在我放置在页面上的微调器上的文本。这是我的代码`ArrayAdapter`：

```
public class SpinAdapter extends ArrayAdapter<ObjectsForSpinner> {
    private ArrayList<ObjectsForSpinner> _values;
    public ObjectsForSpinner getItem(int position)
    {
        return _values.get(position);
    }
    @Override
    public View getView(int position, View convertView, ViewGroup parent) 
    {
         TextView label = new TextView(context);
         label.settextColor(Color.BLACK);
         label.setBackgroundColor(Color.TRANSPARENT);
         label.setLayoutParams(new ViewGroup.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT));
         label.setText(_values.get(position).getSpinnerStr());
         return label;
    }
} 
```

`_values.get(position).getSpinnerStr()`是我返回文本的地方。返回类型是`String`. 问题是文本没有完全显示。当我返回`Sales Department`时，它只显示`Sales`没有`Department`.
我什至尝试过`label.setEllipsize(TruncateAt.END);`，但还没有运气。有人请告诉我如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:02:50.390

我以前遇到过这个问题。问题是当大小小于整个字符串`TextView`时，Spinner 内部会完全忽略空格字符之后的部分。`TextView`您可以通过从您的中删除空格字符`String`并显示它来识别它。它将向您显示可能适合您的`TextView`. 但是当空间回来的那一刻，它们都消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:54:33.340

设置这样的东西：

```
label.setEllipsize(TruncateAt.END);
label.setSingleLine(true); 
```

# php - 这是 Doctrine 2.2 外键错误？

> ID：10332914
> 
> 赞同：0
> 
> 时间：2012-04-26T11:57:38.503
> 
> 标签：php, foreign-keys, doctrine-orm

我的代码：

```
 $item = new Entity\Item();

        $item->setAccountId($account["id"]);
        $item->setCategory((string)$data->category);
        $item->setRegion((string)$data->region);
        $item->setFlag(0);
        $item->setRank(0);
        $item->setPhone("");
        $item->setEmail("");
        $item->setURL((string)$data->url);
        $item->setTags($tags);

        //var_dump($item);
        //die();

        $this->em->persist($item);
        $this->em->flush();
        $this->em->clear(); 
```

注释关系：

```
/////////////////////////////////////////////////////////////////////////
// Relations                                                     //
/////////////////////////////////////////////////////////////////////////

/**
* @ManyToOne(targetEntity="Account", inversedBy="items")
* @JoinColumn(name="account_id", referencedColumnName="id")
*/
private $account;

/////////////////////////////////////////////////////////////////////////
// ForeingKey                                                           //
/////////////////////////////////////////////////////////////////////////

/**
 * @Column(type="integer")
 */
protected $account_id; 
```

如果我使用旧的学说（2.0）代码工作，如果我设置为 2.2 ，代码抛出这个异常：

> SQLSTATE [23000]：违反完整性约束：1048 列 'account_id' 不能为空

**在 2.2 中我需要使用 Parent 实体来插入一个 Child 实体吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T19:26:57.360

从 Doctrine2 的角度来看，您的对象应该形成一个对象图，其中外键没有位置。正因为如此，我觉得你真的很奇怪

*   有一个 attribute_id 属性，它是一个外键
*   说它在 2.0 中有效

我不确定它在 2.0 中的情况，但我不记得在属性中有相关对象的 ID。

因此，您应该删除 $account_id 属性，并使用 $item->setAccount($account)，其中 $account 是 Account 类的对象，以便 Doctrine 正确处理关系。

您也可以尝试让 Doctrine 使用以下命令为您生成实体骨架：

```
php doctrine.php orm:generate-entities /tmp/entites 
```

并检查 /tmp/entities 中生成的文件，你会看到应该是什么样子。

# php - Groovy 的 Power Asserts 是否有 PHP 等价物？

> ID：10332915
> 
> 赞同：0
> 
> 时间：2012-04-26T11:57:39.733
> 
> 标签：php, unit-testing, groovy, assert

[Groovy 的 Power Asserts](http://docs.codehaus.org/display/GROOVY/Groovy+1.7+release+notes#Groovy17releasenotes-PowerAsserts)是否有 PHP 等效项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:02:38.307

[`assert`](http://php.net/manual/en/function.assert.php)PHP 有一个与 Power Asserts 相去甚远的内置函数，但它就是你所得到的。对于更强大的东西，唯一的选择是使用诸如单元测试框架提供的断言，但这仍然不如 Power Asserts。

# php - 如果它在特定文件中调用，如何以不同的方式使函数行为？

> ID：10332925
> 
> 赞同：1
> 
> 时间：2012-04-26T11:58:16.570
> 
> 标签：php, function, autoload

> **可能重复：**
> [php：确定从哪里调用函数](https://stackoverflow.com/questions/2960805/php-determine-where-function-was-called-from)

我有一个`my_function($class)`可以被任何脚本调用的自动加载函数。它由 PHP 调用，`spl_autoload_call()`并且可以在任何地方发生。我如何编写脚本`my_function($class)`来检测它何时被特定的调用`$file`？

就像是：

```
$file = '/htdocs/project/whatever.php';
if ($caller_file == $file) {
    ... 
```

我如何找到`$caller_file`？我确实理解这个问题令人困惑，但我现在不能用更好的词来表达。因此，如果您有任何理解问题，请在评论中告诉我。

**编辑（上下文）**如果自动加载器将加载的文件与调用自动加载器的文件相同，我想让脚本加载不同的类的文件。

例如给：

```
namespace Something;
class Random extends Random {} 
```

不应该加载自己，而是我们有一个不同的文件：

```
namespace Something;
class Random { ... } 
```

换句话说：

如果我定义`MyName\Class`in`a/class.php`并且我想用`MyName\Class extends \MyName\Class`(inside `a/class.php`) 扩展自身但我希望自动加载器`\MyName\Class`在`b/class.php`被问到时查看 inside`a/class.php`怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:02:37.347

你试过 debug_backtrace() 吗？

# c# - 使用 RotateTransform 时出现无效的强制转换异常

> ID：10332926
> 
> 赞同：0
> 
> 时间：2012-04-26T11:58:17.043
> 
> 标签：c#, windows-phone-7, xaml

为什么下面的代码行会导致 {"InvalidCastException"}

```
((RotateTransform)image.RenderTransform).Angle = 90; 
```

该方法中的整个代码是

```
void loadImage()
        {
            // The image will be read from isolated storage into the following byte array

        byte[] data;

        // Read the entire image in one go into a byte array

        using (IsolatedStorageFile isf = IsolatedStorageFile.GetUserStoreForApplication())
        {

            // Open the file - error handling omitted for brevity

            // Note: If the image does not exist in isolated storage the following exception will be generated:

            // System.IO.IsolatedStorage.IsolatedStorageException was unhandled 

            // Message=Operation not permitted on IsolatedStorageFileStream 

            using (IsolatedStorageFileStream isfs = isf.OpenFile("0.jpg", FileMode.Open, FileAccess.Read))
            {

                // Allocate an array large enough for the entire file

                data = new byte[isfs.Length];

                // Read the entire file and then close it

                isfs.Read(data, 0, data.Length);

                isfs.Close();

            }
        }

        // Create memory stream and bitmap

        MemoryStream ms = new MemoryStream(data);

        BitmapImage bi = new BitmapImage();

        // Set bitmap source to memory stream

        bi.SetSource(ms);

        // Create an image UI element – Note: this could be declared in the XAML instead

        Image image = new Image();

        // Set size of image to bitmap size for this demonstration

        image.Height = bi.PixelHeight;

        image.Width = bi.PixelWidth;

        // Assign the bitmap image to the image’s source

        image.Source = bi;

        ((RotateTransform)image.RenderTransform).Angle += 90; 

        // Add the image to the grid in order to display the bit map

        ContentPanelx.Children.Add(image);

    } 
```

编辑

像这样更改了以下代码，它不会崩溃，但不会绘制图像。

```
 image.Height = bi.PixelHeight;

        image.Width = bi.PixelWidth;

        // Assign the bitmap image to the image’s source

        image.Source = bi;
        image.RenderTransform = new RotateTransform() { Angle = 90 };

        ContentPanelx.Children.Add(image); 
```

我缺少一个步骤吗？

非常感谢，-代码

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T12:02:44.807

您刚刚创建了一个图像对象。它的`RenderTransform`属性不引用`RotateTransform`实例。尝试：`image.RenderTransform = new RotateTransform(){Angle=90};`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:26:44.433

该[`RenderTransform`](http://msdn.microsoft.com/en-us/library/system.windows.uielement.rendertransform.aspx)属性的默认值为[`Transform.Identity`](http://msdn.microsoft.com/en-us/library/system.windows.media.transform.identity.aspx)。您必须先将其应用于`RotateTransform`您的`Image`，然后才能对其进行操作。

```
image.RenderTransform = new RotateTransform(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-26T12:08:15.090

在一个简单的答案级别上，看起来您实际上从未将 RenderTransform 分配为包含 RotateTransform - 所以演员失败也就不足为奇了。

作为更完整的答案：

*   如果您尝试从文件中旋转图像，那么最好使用[http://writeablebitmapex.codeplex.com/](http://writeablebitmapex.codeplex.com/)之类的库在代码中而不是在 UI 元素中为您执行此操作。
*   或者，如果您确实想对 UI 元素应用旋转，则可以使用如下代码：

`image.RenderTransform = new RotateTransform() {Angle = 45.0};`

# delphi - Delphi：Vcl 样式和拖放

> ID：10332931
> 
> 赞同：1
> 
> 时间：2012-04-26T11:58:37.113
> 
> 标签：delphi, drag-and-drop, delphi-xe2, vcl-styles

我是一名 Delphi 程序员，我有一个问题。我用 TStyleManager 创建了一个表单，并在我的应用程序上使用了皮肤。但我也想在我的应用程序中使用 Drag-n-Drop 文件。我怎么能意识到这一点？我尝试了很多方法，但是......我无法做到。希望得到您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-26T16:42:41.957

当您更改 vcl 样式时，表单的句柄会重新创建，因此如果您 `DragAcceptFiles`之前调用该函数来设置样式，则应用样式时使用的句柄将不一样。要解决这个问题，请以这种方式执行 DragAcceptFiles 函数。

```
 TStyleManager.SetStyle(StyleName);
 Application.ProcessMessages;//process the message queue;
 DragAcceptFiles( Handle, True ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:07:02.790

使用 shellApi 单元的方法`DragAcceptFiles`来实现你所需要的。它需要2个参数，第一个是应用程序的句柄，第二个是一个布尔值，用于指定是否开启-关闭拖动功能。打开使用类似的东西`DragAcceptFiles(Self.Handle,True);`

要响应文件的拖放，请使用

```
Procedure TForm1.RespondToMessage(var Msg : TMsg;var handled : Boolean) ;
const
   FileIndex : Cardinal = Cardinal(-1);   { return a count of dropped files }
   BuffLen   = 255;
 Var
    FileNum : Word;
   FName : String;
   BuffArr : Array[0..MAX_PATH-1] of Char;
 Begin
If Msg.message = WM_DROPFILES Then
 Begin

For FileNum := 0 To DragQueryFile(Msg.wParam,FileIndex,Nil,BuffLen)-1 Do   // first time , FileIndex is 0xFFFFFFFF , so
// the return is the number of files to be dragged
// Here the return in fileIndex is the no of files;
Begin
   DragQueryFile(Msg.wParam, FileNum , BuffArr , BuffLen);
   FName := StrPas(BuffArr);
   //AddButton(FName); -- do whatever operation you want with the fileName
End;
Try
  DragFinish(Msg.wParam);  // Free the memory given to drag operation
Except
End;  
Handled := True;
//AddScrollIfRequired;
End;
End; 
```

现在包括`Application.OnMessage := RespondToMessage`捕获拖放操作。希望有帮助

# c# - 使用 OLEDB 从数据中获取数学考试

> ID：10332935
> 
> 赞同：1
> 
> 时间：2012-04-26T11:58:47.363
> 
> 标签：c#, ms-access, oledb, windows-forms-designer, sqldatareader

我正在尝试制作考试表格。假设从我文件中的不同表格中提取问题，然后单击`Q1button`以检查答案并打印合适的消息。此外，假设向用户提出 8 个问题，并更新答案（如果答案正确）`counterCorrectAns`。通过单击`Q1button`它来更新特定表中随机问题的文本框。

```
private int randomQues=0,number=1,counterCorrectAns=0;
private string correctAns = "";

void SetQues1Box(int number)
{
    string whatTake="",fromWhere="",autoNum="";

    from.Text =""+ number;
    to.Text = "" + 8;
    string connectionString = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=C:\\Users\\hodaya\\Desktop\\Project.accdb";

    using (OleDbConnection connection = new OleDbConnection(connectionString))
    {
        switch (number)
        {
            case 1: whatTake = "misHQueA, mishAnsA"; fromWhere = "mishvaotA"; autoNum = "mishAnum"; break;
            case 2: whatTake = "misHQueB, mishAnsB"; fromWhere = "mishvaotB"; autoNum = "mishBnum"; break;

        }
        string sql = "SELECT " + whatTake + " FROM " + fromWhere + " WHERE " + autoNum + "=?";

        Random r = new Random();
        randomQues=r.Next(1, 25);
        using (OleDbCommand command = new OleDbCommand(sql, connection))
        {
            connection.Open();
            command.Parameters.AddWithValue(autoNum, randomQues);
            OleDbDataReader reader = command.ExecuteReader();
            reader.Read();
            q1Box.Text = reader.GetString(0);
            correctAns = ("" + reader.GetInt32(1));
            connection.Close();
    //**// }
        }
    }
}

private void Q1Button_Click(object sender, EventArgs e)
{
    string exp;

    if (number <= 8)
    {
        if (ans1Box.Text == correctAns)
        {
            counterCorrectAns++;
            exp = "correct answer";
        }
        else
            exp = "'wrong answer";
        MessageBox.Show(exp);
        number = number + 1;
        SetQues1Box(number);
    }
    else
    {
        if (counterCorrectAns >= 4)
            MessageBox.Show("your great");
        else
            MessageBox.Show("you are need more practice");
        this.Close();
    }

} 
```

我得到的错误：`COM object that has been separated from its underlying RCW cannot be used.`在其开头的 //**// 行中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:35:00.923

使用已经管理的`connection.close()`.

`connection.close()`在 MSDN 文档中，如果他们将代码包装在 using 指令中，他们不会放。

正在发生的事情是 using 试图关闭您已经关闭的连接。

但是，`reader`应该在 using 块结束之前关闭

# segmentation-fault - SIGSEGV 默认被屏蔽

> ID：10332936
> 
> 赞同：2
> 
> 时间：2012-04-26T11:58:51.093
> 
> 标签：segmentation-fault

我有一个应用程序：“app-ctrl” Process-id：1000

我想通过发送信号 SIGSEGV 来终止这个进程。（要求用于模拟目的）

[santosh@localhost ~]$ kill -11 1000

app-ctrl 第一次被杀死。现在，当它使用以下命令再次启动时：

[santosh@localhost ~]$ start app-ctrl

它得到新的进程 id 2000。

现在，如果我想用命令“kill -11 2000”杀死它。这没用。

所有其他信号的工作方式类似于 "kill -6 2000" 或 "kill -9 2000" 。通过调试，我发现 SIGSEGV 被阻止了。所以我在我们的主代码库中添加了以下 3 条语句：

```
sigemptyset (&x);

sigaddset(&x, SIGSEGV);

sigprocmask(SIG_UNBLOCK, &x, NULL); 
```

添加以上 3 行后，“kill -11”一直使用新的二进制文件。每次启动“app-ctrl”时，都会执行以上 3 条语句。

为什么 SIGSEGV 默认被阻止。有什么办法可以阻止 SIGSEGV 被阻止？

# javascript - Javascript 日期选择器日历

> ID：10332940
> 
> 赞同：0
> 
> 时间：2012-04-26T11:59:17.850
> 
> 标签：javascript, calendar, datepicker

我希望能够在用户输入之前在日期框中指定默认日期。

日历的 JavaScript 是：

```
/* ********************************************************************
 * Calendar Date Selector - v1.1
 *   Copyright (c) 2011 - GreyWyvern
 *
 *  - Licenced for free distribution under the BSDL
 *          http://www.opensource.org/licenses/bsd-license.php
 *
 * The Calendar Date Selector is the simplest date selection calendar
 * you will ever use! No need to insert any javascript into your HTML;
 * the script will automatically transform <input> elements with
 * attribute type="date" (HTML5) into calendar inputs, respecting both
 * min and max attributes as well. Your users then just click the input
 * to invoke the calendar input. Works in all major browsers.
 *
 * Customize the CSS, or date format used (see below), or not! This
 * script is completely ready to use as-is. Be sure to include the
 * calendar.css stylesheet in your HTML document as well.
 *
 */

(function calendarSelector() {
  var self = this;

  /* ******************************************************************
   * Select a Date Format
   *
   * The calendar script uses the same syntax as the PHP date()
   * function, however only the code characters listed below are
   * supported; mix and match them as you please with the following
   * caveat: The format you use MUST include one (and only one) value
   * from each of the Day, Month and Year lists or the calendar will
   * not function properly.
   *
   * Supported date format codes (see http://www.php.net/date): 
   *
   * Day: d, j
   * Month: m, n, F, M
   * Year: Y, y
   * Optional: D, l, S, w
   *
   * For the day name and month name codes, only the English language
   * representations are supported.
   *
   * Regardless of the date format you choose, the HTML5 date input
   * element only accepts source code values in the "Y-m-d" format, so
   * be sure to write them as such in your form HTML code.  This script
   * will rewrite the displayed value using the format given below,
   * which will also be the format sent to the server on submission.
   *
   * NOTE: If a user has javascript disabled, the value will default
   * to the Y-m-d format, so it's good practice to allow your server
   * side script to accept both.
   *
   * Example formats:
   *   - "Y-m-d"     => 2010-12-31 (script default)
   *   - "F jS, Y"   => December 31st, 2010
   *   - 'm/j/y"     => 12/31/10
   *   - 'Y-M-j"     => 2010-Dec-31
   *   - "D M j, Y"  => Fri Dec 31, 2010
   *
   */
  this.format = "D j M Y";

  this.weekStart = 0;  // 0 = Sunday, 1 = Monday

  /* ******************************************************************
   * Modified PHP date() implementation in Javascript
   *  by Carlos R. L. Rodrigues and co. - Much thanks!
   *    - http://phpjs.org/functions/date
   *
   */
  this.date = function(format, ts) {
    var jsd = (typeof ts === 'undefined') ? new Date() : (ts instanceof Date) ? new Date(ts) : new Date(ts * 1000);
    var fChr = /\\?([a-z])/gi, fChrCb = function (t, s) { return f[t] ? f[t]() : s; };
    var _pad = function (n, c) { return ((n = n + "").length < c) ? new Array((++c) - n.length).join("0") + n : n; };
    var txt_words = [
     "Sun", "Mon", "Tues", "Wednes", "Thurs", "Fri", "Satur",
     "January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"
    ], txt_ordin = {1: "st", 2: "nd", 3: "rd", 21: "st", 22: "nd", 23: "rd", 31: "st"};
    var f = { // Day
      d: function() { return _pad(f.j(), 2); },
      D: function() { return f.l().slice(0, 3); },
      j: function() { return jsd.getDate(); },
      l: function() { return txt_words[f.w()] + 'day'; },
      S: function() { return txt_ordin[f.j()] || 'th'; },
      w: function() { return jsd.getDay(); },
      // Month
      F: function() { return txt_words[6 + f.n()]; },
      m: function() { return _pad(f.n(), 2); },
      M: function() { return f.F().slice(0, 3); },
      n: function() { return jsd.getMonth() + 1; },
      // Year
      Y: function() { return jsd.getFullYear(); },
      y: function() { return (f.Y() + "").slice(-2); }
    };
    return format.replace(fChr, fChrCb);
  };

  // ***** Parse a date from a string *********************************
  this.parse = function(data, rtrn, format) {
    if (!data) return rtrn;
    if (!format) format = this.format; 
    var fChr = /\\?([a-z])/gi, fChrCb = function (t, s) { return f[t] ? f[t]() : s; }, ordr = [];
    var months = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
    var f = { // Day
      d: function() { ordr.push("d"); return "(\\d\\d)"; },
      D: function() { return "(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun)"; },
      j: function() { ordr.push("d"); return "(\\d\\d?)"; },
      l: function() { return "(?:Mon|Tues|Wednes|Thurs|Fri|Satur|Sun)day"; },
      S: function() { return "(?:st|nd|rd|th)"; },
      w: function() { return "\\d"; },
      // Month
      F: function() { ordr.push("M"); return "(January|February|March|April|May|June|July|August|September|October|November|December)"; },
      m: function() { ordr.push("m"); return "(\\d\\d)"; },
      M: function() { ordr.push("M"); return "(" + months.join("|") + ")"; },
      n: function() { ordr.push("m"); return "(\\d\\d?)"; },
      // Year
      Y: function() { ordr.push("y"); return "(\\d{4})"; },
      y: function() { ordr.push("y"); return "(\\d\\d)"; }
    };
    format = format.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
    var outp = data.match(new RegExp("^\\s*" + format.replace(fChr, fChrCb) + "\\s*$", ""));
    if (outp && ordr.length == 3) {
      for (var x = 0, val = []; x < ordr.length; x++) {
        switch (ordr[x]) {
          case "d": val[2] = parseInt(outp[x + 1], 10); break;
          case "m": val[1] = parseInt(outp[x + 1], 10) - 1; break;
          case "y": val[0] = parseInt(outp[x + 1], 10); break;
          case "M":
            for (var y = 0, o = outp[x + 1].slice(0, 3); y < months.length; y++)
              if (o == months[y]) val[1] = y;
        }
      } return new Date(val[0], val[1], val[2]);
    } else return rtrn;
  };

  // ***** Show the calendar ******************************************
  this.show = function(elem) {
    if (this.cal.parentNode == document.body && elem != this.elem) this.hide(false);
    if (this.cal.parentNode != document.body || elem != this.elem) {
      this.elem = elem;
      this.point = this.parse(elem.value, new Date());
      this.build();
      var cleft = ctop = 0, obj = elem;
      do { cleft += obj.offsetLeft; ctop += obj.offsetTop; } while (obj = obj.offsetParent);
      this.cal.style.left = cleft + "px";
      this.cal.style.top = (ctop + elem.offsetHeight) + "px";
      document.body.appendChild(this.cal);
      setTimeout(function() {
        _addListener(document.documentElement, 'click', self.listener = function() {
          self.hide(false);
        }, false);
      }, 0);
    } else this.hide(false);
  };

  // ***** Hide the calendar ******************************************
  this.hide = function(value) {
    if (typeof value == "string") this.elem.value = value;
    this.cal = document.body.removeChild(this.cal);
    _removeListener(document.documentElement, 'click', this.listener, false);
  };

  // ***** Build the body of the calendar *****************************
  this.build = function() {
    var mindt = (mindt = this.parse(this.elem.getAttribute('min'), false, "Y-m-d")) ? this.date("Ymd", mindt) : "";
    var maxdt = (maxdt = this.parse(this.elem.getAttribute('max'), false, "Y-m-d")) ? this.date("Ymd", maxdt) : "";
    var slctd = (slctd = this.parse(this.elem.value, false)) ? this.date("Ymd", slctd) : "";

    this.point.setDate(15);
    if (mindt) while (this.date("Ym", this.point) < mindt.substr(0, 6)) this.point.setMonth(this.point.getMonth() + 1);
    if (maxdt) while (this.date("Ym", this.point) > maxdt.substr(0, 6)) this.point.setMonth(this.point.getMonth() - 1);

    var day = new Date(this.point.getTime()), today = this.date("Ymd");
    day.setDate(1);
    day.setDate(1 - day.getDay() + this.weekStart);

    while (this.cal.tBody.firstChild) this.cal.tBody.removeChild(this.cal.tBody.firstChild);
    do {
      var tr = document.createElement('tr');
      for (var x = 0, ymd; x < 7; x++) {
        ymd = this.date("Ymd", day);
        var td = document.createElement('td');
            td.className = "";
            td.title = this.date("l", day);
            td.date = new Date(day.getTime());
          if ((!mindt || ymd >= mindt) && (!maxdt || ymd <= maxdt)) {
              td.className = "valid";
              td.onclick = function() { self.hide(self.date(self.format, this.date)); };
          } else td.className = "";
          if (ymd == slctd) td.className += " selected";
          if (day.getMonth() == this.point.getMonth()) {
            td.className += " month";
            if (ymd == today) td.className += " today";
            if (!day.getDay() || day.getDay() == 6) td.className += " weekend";
          } td.appendChild(document.createTextNode(day.getDate()));
          tr.appendChild(td);
        day.setDate(day.getDate() + 1);
      } this.cal.tBody.appendChild(tr);
    } while (day.getMonth() == this.point.getMonth());

    if (mindt) {
      mindt = (this.point.getFullYear() - mindt.substr(0, 4)) * 12 - parseInt(mindt.substr(4, 2), 10) + this.point.getMonth() + 1;
      this.cal.tHeads[0].className = (mindt < 1) ? "disabled" : "";
      this.cal.tHeads[1].getElementsByTagName('strong')[0].className = (mindt < 1) ? "disabled" : "";
    } this.cal.tHeads[1].getElementsByTagName('span')[0].firstChild.nodeValue = this.date("F, Y", point);
    if (maxdt) {
      maxdt = (this.point.getFullYear() - maxdt.substr(0, 4)) * 12 - parseInt(maxdt.substr(4, 2), 10) + this.point.getMonth() + 1;
      this.cal.tHeads[2].className = (maxdt > -1) ? "disabled" : "";
      this.cal.tHeads[1].getElementsByTagName('em')[0].className = (maxdt > -1) ? "disabled" : "";
    }
  };

  var _addListener = function(elem, type, listener, useCapture) {
    if (elem.addEventListener) {
      elem.addEventListener(type, listener, useCapture);
    } else if (elem.attachEvent) elem.attachEvent('on' + type, listener);
  };
  var _removeListener = function(elem, type, listener, useCapture) {
    if (elem.removeEventListener) {
      elem.removeEventListener(type, listener, useCapture);
    } else if (elem.detachEvent) elem.detachEvent('on' + type, listener);
  };

  var _isIE6 = /*@cc_on@if(@_jscript_version == 5.6)!@end@*/false;

  // Build the generic calendar container
  this.elem = false;
  this.cal = document.createElement('div');
  this.cal.id = "calendarSelector";
  var table = document.createElement('table');
      table.cellSpacing = 1;
    var thead = document.createElement('thead');
      var tr = document.createElement('tr');
        var td = document.createElement('td');
            td.appendChild(document.createTextNode((_isIE6) ? "<<" : "\u25C2\u25C2"));
            td.onclick = function() {
              if (this.className != "disabled") {
                self.point.setFullYear(self.point.getFullYear() - 1);
                self.build(); } };
          tr.appendChild(td);
        var th = document.createElement('th');
            th.colSpan = 5;
          var strong = document.createElement('strong');
              strong.appendChild(document.createTextNode((_isIE6) ? "<" : "\u25C2"));
              strong.onclick = function() {
                if (this.className != "disabled") {
                  self.point.setMonth(self.point.getMonth() - 1);
                  self.build(); } };
            th.appendChild(strong);
          var em = document.createElement('em');
              em.appendChild(document.createTextNode((_isIE6) ? ">" : "\u25B8"));
              em.onclick = function() {
                if (this.className != "disabled") {
                  self.point.setMonth(self.point.getMonth() + 1);
                  self.build(); } };
            th.appendChild(em);
          var span = document.createElement('span');
              span.appendChild(document.createTextNode("\u2014"));
            th.appendChild(span);
          tr.appendChild(th);
        var td = document.createElement('td');
            td.appendChild(document.createTextNode((_isIE6) ? ">>" : "\u25B8\u25B8"));
            td.onclick = function() {
              if (this.className != "disabled") {
                self.point.setFullYear(self.point.getFullYear() + 1);
                self.build(); } };
          tr.appendChild(td);
        thead.appendChild(tr);
      table.appendChild(thead);
    var tfoot = document.createElement("tfoot");
      var tr = document.createElement('tr');
        var td = document.createElement('td');
            td.colSpan = 2;
            td.appendChild(document.createTextNode('Today'));
            td.onclick = function() { self.hide(self.date(self.format)); };
          tr.appendChild(td);
        var td = document.createElement('td');
            td.colSpan = 3;
            td.appendChild(document.createTextNode('Cancel'));
            td.onclick = function() { self.hide(false); };
          tr.appendChild(td);
        var td = document.createElement('td');
            td.colSpan = 2;
            td.appendChild(document.createTextNode('Clear'));
            td.onclick = function() { self.hide(""); };
          tr.appendChild(td);
        tfoot.appendChild(tr);
      table.appendChild(tfoot);
      table.appendChild(this.cal.tBody = document.createElement('tbody'));
  this.cal.appendChild(table);
  this.cal.tHeads = thead.rows[0].cells;
  this.cal.onselectstart = function() { return false; };
  this.cal.unselectable = "on";
  this.cal.onclick = function(e) {
    e = e || event;
    if (e.stopPropagation) { e.stopPropagation(); } else e.cancelBubble = true;
  };
  if (window.opera) this.cal.onmousedown = function() { return false; };

  // ***** Apply listeners to applicable inputs
  _addListener(window, 'load', function() {
    for (var x = 0, inputs = document.getElementsByTagName('input'), val; x < inputs.length; x++) {
      if (inputs[x].getAttribute('type') == "date") {
        inputs[x].type = "text";
        inputs[x].readOnly = "readonly";
        inputs[x].onclick = function() { self.show(this); };

        if (val = this.parse(inputs[x].value, false, "Y-m-d")) {
          var mindt = this.parse(inputs[x].getAttribute('min'), false, "Y-m-d");
          var maxdt = this.parse(inputs[x].getAttribute('max'), false, "Y-m-d");
          if (mindt && val < mindt) val = mindt;
          if (maxdt && val > maxdt) val = maxdt;
          inputs[x].value = this.date(this.format, val);
        } else inputs[x].value = "";
      }
    }
  }, false);
})(); 
```

那么页面上的HTML行是：

```
<input name="FromDate" type="date" value="<?php echo 'startdate'; ?>" size="16"> 
```

但是脚本强制该值为空白。当页面打开时，“开始日期”会短暂闪烁，然后恢复为空白（当 JavaScript 完全加载时）。如果我注释掉脚本的行，“startdate”会出现在框中，没问题。

因此，JavaScript 中的某些内容似乎将输入字段的值减少为空白或 null。由于我根本不懂JavaScript，我希望有人能指导我到需要更改的行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T12:23:13.753

可以将php变量替换`startdate`成Ymd的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T13:27:28.630

我认为插件中有一个错误（否则它应该像@U和我提到的那样工作）。

但是由于您已经从 php 显示值，您可以简单地注释掉最后一行（其他部分）的第 5 行。

# jsp - 使用浏览选项将jsp文件保存在excel中

> ID：10332942
> 
> 赞同：0
> 
> 时间：2012-04-26T11:59:20.733
> 
> 标签：jsp

我想将jsp文件的输出保存在excel中。我尝试了以下代码：

```
<html>
<head>
<meta http-equiv="pragma" content="no-cache; charset=ISO-8859-1">
<title>Save File</title>
</head>
<body>
<%@ page import="org.apache.poi.hssf.usermodel.HSSFSheet"%>
<%@ page import="org.apache.poi.hssf.usermodel.HSSFWorkbook"%>
<%@ page import="org.apache.poi.hssf.usermodel.HSSFCell"%>
<%@ page import="org.apache.poi.hssf.usermodel.HSSFRow"%>
<%@ page import="org.apache.poi.hssf.usermodel.HSSFCellStyle"%>
<%@ page import="org.apache.poi.hssf.util.HSSFColor"%>
<%@ page import="java.io.* " %>
<%@page import="java.sql.* "%>
 <%
// String EX_DT=null;
 String filenm=request.getParameter("filenm");

 File file=new File("c:\\"+filenm+".xls");

 boolean exists = file.exists();

 if (exists)
 {
  out.println("File or Directory exist.PLZ enter another filename");
 }
 else
 {
 String s1=null;

   try
 {
     //  EX_DT=(String)session.getAttribute( "dte" );
     // out.println("Ex_Dt in try"+EX_DT);
   HSSFWorkbook hwb=new HSSFWorkbook();
   HSSFSheet sheet =  hwb.createSheet("new sheet");
   HSSFSheet sheet1 =  hwb.createSheet("new sheet1");
    HSSFRow rowhead=   sheet.createRow((short)0);
    //rowhead.createCell((short) 0).setCellValue("MKT");
   rowhead.createCell((short) 0).setCellValue("SECURITY");
   rowhead.createCell((short) 1).setCellValue("PREV_CL_PR");
   rowhead.createCell((short) 2).setCellValue("CLOSE_PRIC");
  rowhead.createCell((short) 3).setCellValue("NET_TRDQTY");
  rowhead.createCell((short) 4).setCellValue("NET_TRDVAL");

   Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
   String url = "jdbc:sqlserver://";
   Connection con = DriverManager.getConnection(url,"sa","SQL1423#3"); 
   Statement st=con.createStatement();
   ResultSet rs=st.executeQuery("Select * from TtOne ");
   int i=1;
   while(rs.next())
   {

   HSSFRow row=   sheet.createRow((short)i);
    //s1=rs.getString("EX_DT");
  //    out.println("s1"+s1);
  // if(s1.equals((String)session.getAttribute( "dte" )))
   //{

 //     out.println("EX_DT in if of while");

   row.createCell((short) 0).setCellValue(rs.getString("SECURITY"));
   row.createCell((short) 1).setCellValue(rs.getString("PREV_CL_PR"));
   row.createCell((short) 2).setCellValue(rs.getString("CLOSE_PRIC"));
   row.createCell((short) 3).setCellValue(rs.getString("NET_TRDQTY"));
   row.createCell((short) 4).setCellValue(rs.getString("NET_TRDVAL"));

   i++;
  // }
   }

   FileOutputStream fileOut =  new FileOutputStream(file);//file

   hwb.write(fileOut);

   fileOut.close();

   %><h1><b><i><% out.println("Your excel file has been generated!");%>

    </i></b></h1>

    <% 

 }

  catch ( Exception ex )
   {   
    System.out.println(ex);
    } 

 }

  %>
</body>
</html> 
```

但我希望用户指定路径，而不是硬编码路径。文件应保存在该位置。所以我想要一个对话框，其中浏览选项可用，选择路径并单击保存后，输出应存储在 excel 文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T14:16:58.047

假设您打算让用户下载此文件，则不应将该文件存储在 webserver 的本地磁盘文件系统中。相反，您应该将此文件发送到 HTTP 响应。

您首先需要将您的 JSP 转换为[servlet](https://stackoverflow.com/tags/servlets/info)，否则 excel 文件将被 JSP 自己的 HTML 和模板内容损坏，因为 JSP 本身是 HTTP 响应的一部分。

根据请求类型，将所有 Java（没有 HTML！没有`out.println()`语句！）代码放在 servlet 的`doGet()`or方法中。`doPost()`然后，您需要做的就是替换原始 Java 代码中的以下单行

```
hwb.write(fileOut); 
```

通过以下几行

```
response.setContentType("application/vnd.ms-excel");
response.setHeader("Content-Disposition", "attachment;filename=\"" + filenm + "\"");
hwb.write(response.getOutputStream()); 
```

第一个告诉浏览器它是什么类型的文件，以便它可以在必要时将默认应用程序 (MS Excel) 与它相关联。第二个告诉浏览器应该弹出一个“*另存为*”对话框。第三个告诉 POI 它应该将 Excel 文件写入 HTTP 响应。

不要忘记*删除*那些`new File()`废话。它只会将文件保存在运行网络服务器的机器上。您需要意识到，在实时生产环境中，网络服务器在物理上与网络浏览器不同的机器上运行。

在不相关的说明中，您的 JDBC 代码正在泄漏资源。您忘记`close()`了`Connection`,`Statement`和块`ResultSet`的`finally`。`try`这将导致数据库长期用完它们。相应地修复它。

# eclipse - 在 Eclipse 中通过 m2e 添加的依赖项的“找不到人工制品”错误

> ID：10332944
> 
> 赞同：0
> 
> 时间：2012-04-26T11:59:27.473
> 
> 标签：eclipse, maven, m2eclipse, m2e

我使用 m2e 的“添加依赖项”在 eclipse(indigo) 中的 Maven 项目上添加了“spring-mvc-webapp”的依赖项。我在对话框中搜索了 spring-mvc-webapp 并选择了它建议的“maven-archetype:1.0.0.CR2”。但是在构建它时出现以下错误：

> 无法在项目 Lab 上执行目标：无法解析项目 Lab:Lab:jar:0.0.1-SNAPSHOT 的依赖项：找不到工件 org.jboss.spring.archetypes:spring-mvc-webapp:maven-archetype:1.0。 0.CR2 在中央 (http://repo1.maven.org/maven2) -> [帮助 1]

1.  当对话框搜索 maven 存储库以建议 jar 时，为什么无法从同一个存储库下载？
2.  正如我所证实的，这个罐子在 Maven 中央仓库中。但为什么说“找不到工件”？

谁能告诉我可能出了什么问题？

# ruby-on-rails - 在控制器方法内的数据库中插入

> ID：10332945
> 
> 赞同：0
> 
> 时间：2012-04-26T11:59:35.587
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1

我想在控制器方法中的数据库中执行两个插入操作：

```
a = A.new(:dog_id => b.id, ...)
a.save
b = B.new(:cat_id => a.id , ... )
b.save 
```

既然我需要 b 中的 a id 和 a 中 b 的 id，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T12:49:05.993

首先设置具有正确关联的模型 A + B

```
Model Cat
  has_one :dog
  accepts_nested_attributes_for :dog

Model Dog
  has_one :cat
  accepts_nested_attributes_for :cat 
```

我将模型基于您提供的代码，其中 A 的每个实例只能有一个 B，反之亦然。您也可以使用belongs_to 代替[2006 年的旧解释](http://duanesbrain.blogspot.co.uk/2006/05/ruby-on-rails-hasone-versus-belongsto.html)

Accepts_nested_attributes_for 允许您在原始模型的参数中传递关联 模型[的](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)[属性](http://guides.rubyonrails.org/association_basics.html)

在控制器中构建模型的实例并设置它们的关联。

```
this_cat = Cat.new(cat_attributes{dog_attributes})

this_cat.save! 
```

很确定有几种方法可以做到这一点，但正如阿尔多所说，关于问题代码的更多细节将有助于清除一些关联 - 因为我可能对你希望它如何运作有错误的想法。

不使用 Accepts_nested_attributes_for 的另一种方法是构建 A 和 B 的每个实例，保存其中一个，进行关联，然后保存它们。

```
this_cat = Cat.new(cat_attributes)
this_dog = Dog.new(dog_attributes)
this_dog.save!    
this_cat.dog = this_dog
this_cat.save!
this_dog.save! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T12:27:30.587

甲、乙、丙？你想做什么？如果您有一个`Category`包含许多狗的`Dog`模型和一个属于某个类别的模型，则您只有类别，当您创建新狗时，您只需使用`dog.category = Category.find_by_name(category_name)`.

...但是我怀疑您在狗和类别之间存在某种多对多关系，在这种情况下，您需要另一个模型和数据库表...

**更新**：对我来说仍然没有任何意义，尝试提供更多细节......另一个想法是创建两个对象然后更新：

```
# Create the two objects
a = A.create
b = B.create
# Update a with the B id
a.dog = b
a.save
# Update b with the A id
b.cat = a
a.save 
```

但是同样，您应该真正更新您的答案以解释您要达到的目标

# c# - 如何结合语义缩放和列表框的捕捉视图

> ID：10332956
> 
> 赞同：1
> 
> 时间：2012-04-26T12:00:10.563
> 
> 标签：c#, windows-8, microsoft-metro

我有一个从 VS11 模板创建的分组项目页面。这个页面有一个用于普通视图的 GridView 和一个在页面被捕捉时显示的 ListView。我需要实现语义缩放并且仍然能够捕捉页面。

我尝试移动 GridView SemanticZoom.ZoomedInView 所以我有

```
 <ScrollViewer x:Name="itemListScrollViewer" ...
       <Listview ...
    </ScrollViewer>

    <SemanticZoom Grid.Row="1"  >
        <SemanticZoom.ZoomedInView>
            <GridView ...
        </SemanticZoom.ZoomedInView>
    </SemanticZoom> 
```

当页面没有被捕捉时，ListView 被隐藏，当页面被捕捉时，gridView 被隐藏。问题在于，在快照视图中，ListBox 不会滚动，也不会对项目点击做出反应。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-26T15:05:14.360

您是否希望快照视图也具有语义缩放？在这些情况下，我所做的是实现两种不同的 SemanticZoom，一种用于横向，一种用于捕捉，然后仅针对当前视觉状态显示正确的一种。所以起点是这样的：

```
<SemanticZoom x:Name="semanticZoom" Visibility="Visible">
    <SemanticZoom.ZoomedOutView>
        <GridView  ...
    </SemanticZoom.ZoomedOutView>

    <SemanticZoom.ZoomedInView>
        <GridView  ...
    </SemanticZoom.ZoomedInView>
</SemanticZoom>

<SemanticZoom x:Name="semanticZoomSnapped" Visibility="Collapsed">
    <SemanticZoom.ZoomedOutView>
        <ListView ...
    </SemanticZoom.ZoomedOutView>

    <SemanticZoom.ZoomedInView>
        <ListView ...
    </SemanticZoom.ZoomedInView>
</SemanticZoom> 
```

或者，如果您不需要在捕捉模式下进行语义缩放，只需尝试您当前的方法，但尝试隐藏 SemanticZoom 元素而不是其中的 GridView。当然要确保 ListView 的 isItemClickEnabled 设置为 true 等。

PS我想你说ListBox是指ListView？由于还存在一个名为 ListBox 的元素。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-28T10:16:22.940

我找到了一种非常奇怪的方法来解决这个问题。当我切换 SemanticZoom 的顺序时，一个 ScrollViewer 就像

```
<SemanticZoom Grid.Row="1"  >
    <SemanticZoom.ZoomedInView>
        <GridView ...
    </SemanticZoom.ZoomedInView>
</SemanticZoom>

<ScrollViewer x:Name="itemListScrollViewer" ...
   <Listview ...
</ScrollViewer> 
```

比一切正常。知道为什么吗？

# c# - Entity Framework 4.3.1 中奇怪的 ZeroOrOne 外键异常

> ID：10332961
> 
> 赞同：0
> 
> 时间：2012-04-26T12:00:27.853
> 
> 标签：c#, .net, sql-server, entity-framework, ef-code-first

我有一个基于 4.3.1 的代码优先 EF 模型。

在此模型中，两个表之间存在 ZeroOrOne 关系：Session 和 Event。一个 Event 可以只有一个 Session，但也有一些没有 Session 的事件（如一般启动事件）。许多事件可以共享理智的会话。

在我的实体类中，我可以看到这个 FK 关系被映射：

```
[assembly: EdmRelationshipAttribute("MyModel", "fk_event_session", "Session", System.Data.Metadata.Edm.RelationshipMultiplicity.ZeroOrOne, typeof(Data.Session), "Event", System.Data.Metadata.Edm.RelationshipMultiplicity.Many, typeof(Data.Event), true)] 
```

但是，当我尝试添加 SessionID 为 null 的新事件时，我的应用程序会在此关系上引发外键异常。这是一个 EF 错误还是我应该检查其他一些事情？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T12:52:46.880

我认为这不是 ZeroOrOne 关系，而是 ZeroToMany。yuo 可以帮助我们了解您的实体和流畅的映射（如果您有的话）

您可以通过使用流利的映射尝试这样的事情：

```
modelBuilder.Entity<Event>()
            .HasOptional(e => e.Session)
            .WithMany(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:10:47.713

我弄清楚了问题所在，模型中有问题导致无法生成属性。不知何故，“参考约束”是空的，所以我删除并读取了关联，现在它可以工作了。

# windows - VBScript - 获取主显示器分辨率

> ID：10332962
> 
> 赞同：3
> 
> 时间：2012-04-26T12:00:30.060
> 
> 标签：windows, vbscript, wmi, resolution

我需要使用 VBScript获取当前的**主显示分辨率。**主显示屏上有开始菜单。

我检查过：

*   Win32_VideoSettings 数组有 0 个元素

*   Win32_VideoConfiguration 数组有 0 个元素

*   Win32_VideoController 数组始终有 1 个元素 - 即使插入了第二个监视器

如何获得当前设置的**主**屏幕的分辨率？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-07T13:43:41.250

```
'Author: Demon
'Website: http://demon.tw
'Date: 2012/5/7
strComputer = "."
Set objWMIService = GetObject("winmgmts:\\" & strComputer & "\root\cimv2")
Set colItems = objWMIService.ExecQuery("Select * from Win32_DesktopMonitor",,48)

For Each objItem in colItems
    WScript.Echo "ScreenHeight: " & objItem.ScreenHeight
    WScript.Echo "ScreenWidth: " & objItem.ScreenWidth
Next 
```

# c++ - 真正的文件类型检测

> ID：10332964
> 
> 赞同：3
> 
> 时间：2012-04-26T12:00:42.717
> 
> 标签：c++, c, file-type

您好我想检测我的应用程序中的文件类型。libmagic 是一种选择。但我不打算进行字符串比较，例如

使用 libmagic 输出的 mp3 文件：ID3 版本 2.3.0 的音频文件，包含：MPEG ADTS，第三层，v1，128 kbps，44.1 kHz，JntStereo

是否还有其他用于真正文件类型检测的库？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T12:43:31.383

您可以尝试使用[文件签名表自己实现这一点](http://www.garykessler.net/library/file_sigs.html)

例子：

```
Hex Signature        File Extension           ASCII Signature, File Description

49 44 33                        MP3           ID3
                                              MPEG-1 Audio Layer 3 (MP3) audio file

43 44 30 30 31                  ISO           CD001
                                              ISO-9660 CD Disc Image
                                              This signature usually ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:23:02.893

您错误地认为文件类型集是可枚举的。这不是文件的工作方式。您关于 .mp3 文件（音频）的示例自然会导致视频。.AVI、.MKV、MPEG1、MPEG2 和 MPEG4 视频之间有什么关系？您无法在一个数字中捕获这些关系。

同样，CD .ISO 与 DVD .ISO 的文件类型相同吗？要么你分配你没有分配相同的数字。而我在上一句中特意写了“*你*”，因为答案取决于你是否*认为*它们相同。

# actionscript-3 - 列表中的 Flex 移动项目渲染器

> ID：10332965
> 
> 赞同：1
> 
> 时间：2012-04-26T12:00:46.833
> 
> 标签：actionscript-3, apache-flex, flex4, flex4.5, flex-mobile

我在 flex mobile List 组件中使用了一个项目渲染器，项目渲染器必须根据接收到的输入数据逐行显示不同的图像。我在项目渲染器的 creationComplete 中执行这些所有控件，以便如果它的“X”使图像的源成为这个等等。但是当我在创建列表后滚动它时，它会重置项目但以不同的顺序，所以如果“Item1”是在列表的第一行滚动后它会转到最后一行，最后一行排在第一位。

列出组件代码：

```
<s:List id="lst" dataProvider="{dp}" width="100%" height="100%" 
        itemRenderer="renderer.YataklarViewRenderer"
        contentBackgroundAlpha="0" borderColor="#FFFFFF" borderVisible="true" >

    <s:layout>
        <s:VerticalLayout 
            horizontalAlign="center" 
            paddingBottom="10"
            paddingTop="10"
            paddingLeft="10"
            paddingRight="10"
            />
    </s:layout>
</s:List> 
```

项目渲染器代码：

```
protected function yataklarItem_creationCompleteHandler(event:FlexEvent):void
            {
                trace("Creation complete: "+ data['servisAdi']);    

                var servisAdi:String = data['servisAdi'];

                //header text ekle
                this.addElement(header);
                header_text.text = servisAdi;

                var odalar:ArrayCollection = new ArrayCollection();

                odalar = data['odalar'];

                for(var i:int=0;i<odalar.length;i++){

                    var mainContent:VGroup = new VGroup();
                    //                  mainContent.paddingBottom
                    mainContent.percentWidth = 100;
                    mainContent.percentWidth = 100;
                    mainContent.horizontalAlign = "center";
                    mainContent.verticalAlign = "middle";

                    var hContent:HGroup = new HGroup();
                    hContent.percentWidth = 100;
                    hContent.verticalAlign = "middle";
                    hContent.horizontalAlign = "left";

                    var col1:HGroup = new HGroup();
                    col1.percentWidth = 10;
                    col1.verticalAlign = "middle";
                    col1.horizontalAlign = "center";

                    var col2:HGroup = new HGroup();
                    col2.percentWidth = 20;
                    col2.verticalAlign = "middle";
                    col2.horizontalAlign = "center";

                    var imgCol:Image = new Image();
                    var txtOdaAdi:Label = new Label();

                    var oda:Object = new Object();
                    oda = odalar.getItemAt(i);

                    var odaAdi:String = oda['odaAdi'];
                    var baskinCinsiyyet:String = oda['baskinCinsiyet'];

                    txtOdaAdi.text = odaAdi;
                    imgCol.source = "images/yataklar/baskin"+baskinCinsiyyet+".png";

                    col1.addElement(imgCol);
                    col2.addElement(txtOdaAdi);

                    var ytk:ArrayCollection = new ArrayCollection();
                    ytk = oda['yataklar'];

                    var yataklarCol:HGroup = new HGroup();
                    yataklarCol.percentWidth = 70;
                    yataklarCol.horizontalAlign = "left";
                    yataklarCol.verticalAlign = "center";

                    for( var j:int=0;j<ytk.length;j++){

                        var yatakG:VGroup = new VGroup();
                        yatakG.gap = 5;
                        yatakG.horizontalAlign = "center";
                        yatakG.verticalAlign = "middle";

                        var yatak:Object = new Object();
                        yatak = ytk.getItemAt(j);

                        var yatakNo:int = yatak['yatakNo'];
                        var durumu:String = yatak['durumu'];

                        //uzerine tiklandiginda
                        var vizitId:String = yatak['vizitId'];
                        var hastaId:String = yatak['hastaId'];
                        var adiSoyadi:String = yatak['adiSoyadi'];

                        var txtYatakNo:Label = new Label();
                        txtYatakNo.text = yatakNo.toString();

                        var imgYatakImg:Image = new Image();
                        imgYatakImg.source = "images/yataklar/yatak"+durumu+".png";

                        yatakG.addElement(imgYatakImg);
                        yatakG.addElement(txtYatakNo);

                        yataklarCol.addElement(yatakG);
                    }

                    hContent.addElement(col1);
                    hContent.addElement(col2);
                    hContent.addElement(yataklarCol);

                    mainContent.addElement(hContent);
                    mainContent.addElement(line);

                    this.addElement(mainContent);
                }

            }
<fx:Declarations>

        <s:Group id="header" width="100%" height="50">

            <s:Rect 
                width="100%" height="100%">
                <s:fill>
                    <s:LinearGradient rotation="90">
                        <s:GradientEntry color="0x314F83" />
                    </s:LinearGradient>
                </s:fill>
            </s:Rect>

            <s:VGroup id="vgt" paddingBottom="10" paddingTop="10" paddingLeft="10" paddingRight="10" gap="10" width="100%" 
                      verticalAlign="middle" horizontalAlign="left" height="100%">
                <s:Label id="header_text" color="#FFFFFF" verticalAlign="middle" height="100%"/> 
            </s:VGroup>

        </s:Group>

        <s:Line id="line" width="100%">
            <s:stroke>
                <s:SolidColorStroke color="0x5b5b5b" weight="2"/>
            </s:stroke>
        </s:Line>

    </fx:Declarations>

    <s:layout>
        <s:VerticalLayout verticalAlign="top" horizontalAlign="center" />       
    </s:layout> 
```

我认为我的代码中的一切都是正确的，但我必须添加一些额外的行。谁能帮我解决这条棘手的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:46:35.567

> 在项目渲染器的 creationComplete 中执行这些所有控件，以便如果它的“X”使图像源成为这个，等等。

那是个问题。Flex 列表仅渲染屏幕上显示的内容，它们不渲染屏幕外的内容。当您滚动渲染器被重新使用时，不会创建新的渲染器。将不会再次触发 creationComplete 事件来更新正在显示的数据的渲染。

重用渲染器的过程称为渲染器回收。要正确创建渲染器，您必须侦听 dataChange 事件以根据数据调整渲染器显示。

有些人喜欢覆盖 itemRenderer 中的 set data 方法并在那里进行更改。这也是一种同样可以接受的方法。

将 useVirtualLayout 设置为 false 的原因是因为它告诉列表单独渲染每个项目而不使用渲染器回收。由于移动设备的性能或内存使用原因，这不是最佳选择。

[请阅读有关在 itemRenderers 中使用 data 属性的文档](http://help.adobe.com/en_US/flex/using/WS77c1dbb1bd80d3836ecbb5ec129ec77b1e1-8000.html#WSdfd41de286dc919d-63248ba71211ccd7b7c-7fff)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:23:26.573

添加`<s:List useVirtualLayout="false">`解决了我的问题！

# django - django 身份验证始终没有，check_password 工作正常

> ID：10332966
> 
> 赞同：2
> 
> 时间：2012-04-26T12:00:55.210
> 
> 标签：django

将我的 django 安装从 1.2.3 升级到 1.4 后，我无法再使用该`authenticate()`方法。

但是，该`check_password()`功能工作正常，我可以在数据库的正确表中看到加密密码。

```
>>> from django.contrib.auth.models import User
>>> u = User(username='joe', password='password')
>>> u.set_password('password')
>>> u.save()
>>> from django.contrib.auth import authenticate
>>> user = authenticate(username='joe', password='password')
>>> user # this is None
>>> u.check_password('password')
>>> True
>>> u.check_password('passwordxxxx')
>>> False 
```

我的身份验证后端是正常的..在实验中我特别添加了：

```
AUTHENTICATION_BACKENDS = ('django.contrib.auth.backends.ModelBackend',) 
```

这是我相信的默认值。

我不知道如何才能看到问题出在哪里……有什么想法吗？

干杯

-一世

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-27T11:40:16.493

虚假的问题，上面的代码工作正常。

# soap - 在 WP 7 和 Android 的共享 Mono 库中使用 Soap

> ID：10332967
> 
> 赞同：2
> 
> 时间：2012-04-26T12:01:07.643
> 
> 标签：soap, mono, shared-libraries, windows-phone-7.1, xamarin.android

我目前正在开发一个基于 mono 的共享库，我想在其中放置尽可能多的应用程序业务逻辑。我使用[了这个有用的教程](http://www.gregshackles.com/2010/12/shared-libraries-for-windows-phone-7-monodroid-and-beyond/)。我设法将休息请求的整个逻辑放在这个共享库中，但现在我被肥皂困住了。

我使用`wsdl`mono 命令从我的 wsdl 生成客户端存根代码（如此处所述[http://www.mono-project.com/Web_Services](http://www.mono-project.com/Web_Services)）。当我将生成的类放到我的 C# 库（我的共享库的根项目）中时，会出现`System.Web.Services cannot`要找到引用的警告。所以我`System.Web.Services.dll`手动包含了。对于 Android 库项目，我添加了对`...\Reference Assemblies\Microsoft\Framework\MonoAndroid\v1.0\System.Web.Services.dll`. 它编译时没有警告。

但现在涉及到 Windows Phone 库项目。`System.Web.Services.dll`WP 7.5没有，对吧？我尝试使用 Mono-Touch dll，但它给了我很多编译错误。

有人知道我怎么能摆脱这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:58:40.243

实际上，我自己对生成的 WSDL 有一些问题。事实证明，在 Mono for Android 项目中通过 Visual Studio 的“创建 Web 引用”部分生成的类在连接到 WCF Web 服务时最终导致了一些大问题。不知道我在哪里遇到了这些信息，但这就是我最终要做的。

您需要做的是使用**SILVERLIGHT SVCUtil**手动创建服务引用。

在我的开发系统上，它位于此处：

`C:\Program Files (x86)\Microsoft SDKs\Silverlight\v3.0\Tools`

我用下面的命令行调用它：

`slsvcutil.exe http://localhost/<path to WCF service endpoint>/service.svc /directory:"<temp directory to store generated cs file>" /noConfig /namespace:"*,<Full namespace of the generated class>"`

这实际上会生成一个 CS 文件，该文件保存到上面 /directory 标记指定的路径中。将生成的 cs 文件复制到您的项目目录，然后将其包含在项目中。

我遇到的迫使我寻找另一个选项的问题是，我能够使用通过 Visual Studio 中的“添加 Web 引用”选项生成的 WSDL 正确提取数据，但是一旦我尝试传递数据将线路备份到 Web 服务，一切都崩溃了。使用 Silverlight Service Util 生成的服务参考实际上为异步操作正确生成了所有代码，并且在学习了如何正确管理这些异步操作之后，一切都像梦一样工作。

由于您正在使用 Silverlight 实用程序生成这个新的 WSDL，因此它应该可以在 Windows Phone 7 上正常工作。我相信所有这些引用的 DLL 是 System.ServiceModel dll。

我希望我能记得我在哪里看到这些信息，因为我想感谢原作者，但不幸的是，我不记得了。

希望能有所帮助！

柴坦亚·马尔维奇

# powershell - 排除列表中的结果（从 Get-QADComputer 返回）

> ID：10332968
> 
> 赞同：0
> 
> 时间：2012-04-26T12:01:16.023
> 
> 标签：powershell, foreach, quest

# 列出当前域中的所有活动机器帐户

```
$ComputerScan = @(Get-QADComputer -sizelimit $sizelimit -IncludedProperties LastLogonTimeStamp -WarningAction SilentlyContinue -Inactive:$false -OSName $computerFilter | where {$_.AccountIsDisabled -eq $false} )

# Create list of computers
ForEach ($Computer in $ComputerScan){

    $compObj = New-Object PsObject -Property @{
        Computer = $computer
        Credentials = $credentials
        Domain = $domain
      }
      $computers += $compObj
} 
```

`foreach`在此之后我正在做一个，`$computers`但我想要一个排除列表..最好像这样格式化

```
computer1
server4
computet4 
```

但是，怎么做？

来自挪威的问候！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:12:17.547

```
$ComputerScan = @('blah', 'bluh', 'blih', 'bloh')
$ExclusionList = @('blih', 'blah')

$ComputerScan | where { $ExclusionList -notcontains $_ } | Write-Host 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T13:43:54.573

对计算机查询的一些改进：

1.  LastLogonTimeStamp 默认返回，不需要包含
2.  -inactive 默认为$false，无需指定。
3.  不再使用 where-object，而是使用 ldap 过滤器来获取启用的计算机

    $computerScan = Get-QADComputer `-LdapFilter '(!(userAccountControl:1.2.840.113556.1.4.803:=2))'` -Sizelimit $sizelimit -WarningAction SilentlyContinue -OSName $computerFilter | Select-Object -ExpandProperty 名称

# c - 'list' 未声明（在此函数中首次使用）

> ID：10332970
> 
> 赞同：1
> 
> 时间：2012-04-26T12:01:27.743
> 
> 标签：c

我有以下代码。我收到错误消息`'list' undeclared (first use in this function)`。请帮我

```
#include <stdio.h>
#include <stdlib.h>
struct list{
int data;
struct list *next;
};
typedef struct list *head;

int main()
{
    struct list *start;
    int i;

    start = (list *) malloc(sizeof(struct list));
    printf("\nEnter the data : \n");
    scanf("%d", &i);
    start->data = i;
    start->next = NULL;
    while(list->next != NULL)
    {
        printf("%d ", list->data);
        list = list->next;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T12:05:48.907

您使用的是 type`list`而不是 variable name `start`。正确的代码：

```
while (start->next != NULL)
{
    start = start->next;
    // etc.
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-26T12:07:57.280

[不要强制转换返回类型`malloc`](https://stackoverflow.com/questions/605845/do-i-cast-the-result-of-malloc)- 它没有任何好处，在这种情况下你做错了！

```
start = (list *) malloc(sizeof(struct list)); 
```

应该

```
start = malloc(sizeof(struct list)); 
```

该类型`list *`不存在；你的意思是`struct list *`。

您可以通过编写使其更加安全

```
start = malloc(sizeof(*start)); 
```

这样，您会自动`malloc`为 的（指针）类型提供足够的字节`start`，这在您以后更改的类型时很有用`start`-`malloc`调用不会改变一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T12:09:18.933

这

```
start = (list *) malloc(sizeof(struct list)); 
```

包括不必要的类型转换。做就是了

```
start = malloc(sizeof(struct list)); 
```

但是，您的代码比这更麻烦。我可以通过问我自己的问题来最好地回答您的问题：在您的脑海中，是`list`类型还是对象？

如果您回答这个问题，就会怀疑您可以修复您的代码。祝你好运。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-26T12:10:00.463

```
#include <stdio.h>
#include <stdlib.h>
typedef struct list{
    int data;
    struct list *next;
} list;

typedef struct list *head;

int main()
{
    struct list *start;
    int i;

    start = (list *) malloc(sizeof(struct list));
    printf("\nEnter the data : \n");
    scanf("%d", &i);
    start->data = i;
    start->next = NULL;
    while(start->next != NULL)
    {
        start = start->next;
    }

    return 0;
} 
```

您可以定义类型（列表 *）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-26T12:23:01.050

您的变量被命名为« start »，您将其命名为« list »。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-26T12:08:23.130

```
start = (struct list *) malloc ... 
```

您在铸造中错过了**struct 。**正如 Anthales 指出的那样，这根本没有必要。

```
start = malloc ... 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-26T12:34:36.770

您遇到的一个问题是您在创建 typedef 后重新使用 struct 来声明您的 struct 指针，`struct list *start;`. 此外 struct 和 typedef 不能具有相同的名称。你得到这个：

```
cc  -Wall test.c -o test
test.c: In function ‘main’:
test.c:13: error: ‘list_t’ undeclared (first use in this function)
test.c:13: error: (Each undeclared identifier is reported only once
test.c:13: error: for each function it appears in.)
test.c:13: error: ‘start’ undeclared (first use in this function)
test.c:13: error: ‘cur’ undeclared (first use in this function)
test.c:13: warning: left-hand operand of comma expression has no effect
test.c:16: error: expected expression before ‘)’ token 
```

您可以选择在任何地方使用 struct list 并跳过使用 typedef 的制作。使用 typedef 可以简化代码的读取方式，如下所述：[http ://en.wikipedia.org/wiki/Struct_%28C_programming_language%29#typedef](http://en.wikipedia.org/wiki/Struct_%28C_programming_language%29#typedef)

我已经重写了你刚才的内容，以便我可以编译它并更好地理解它，这样我就可以将一些数据放入一个节点中。我记得当我学习 C 时，整个 struct typedef 概念需要一点时间才能深入了解。所以，不要放弃。

```
#include <stdio.h>
#include <stdlib.h>

struct list {
    int data;
    struct list *next;
};

typedef struct list list_t;

int main()
{
    list_t *start, *cur;
    int i;

    start = (list_t *) malloc(sizeof(list_t));

    if (NULL != start)
    {
        cur = start; /* Preserve list head, and assign to cur for list trarversal. */
        printf("\nEnter the data : ");
        scanf("%d", &i);
        cur->data = i;
        cur->next = NULL;
        cur = start;
        while(cur != NULL)
        {
            printf("%d ", cur->data);
            cur = cur->next;
        }
    }
    else
    {
        printf("Malloc failed. Program ending.");
    }

    return 0;
} 
```

# asp.net - Gridview - 摘要和百分比列

> ID：10332973
> 
> 赞同：0
> 
> 时间：2012-04-26T12:01:41.073
> 
> 标签：asp.net, sql-server-2005, gridview

我正在页面上创建一个简单的网格视图。数据来自一个 sql 过程。这是它现在的样子：

![在此处输入图像描述](../Images/bdef4a8ae114e9129179be2a5d696800.png)

我的第一个问题是如何计算“%”列的百分比。公式很简单：例如在选定的单元格中它应该是 15612/238171 * 100%

我正在计算每一行的摘要，如下所示：

```
<asp:TemplateField>
    <ItemTemplate>
        <asp:Label ID="sprawy" runat="server" Text='<%#Sprawy(Eval("sprawy"),1) %>' /> 
    </ItemTemplate>
    <FooterTemplate>
        <asp:Label ID="sumaSpraw" runat="server" Text='<%#GetSumaSpraw(1) %>' /> 
    </FooterTemplate>
</asp:TemplateField> 
```

这是我在gridview中的列代码

这是函数的代码：

```
 public Int32[] SumaSpraw = new Int32[4];

    public Int32 Sprawy(object arg1, int i)
    {
        var ilosc = arg1 != DBNull.Value ? Convert.ToInt32(arg1) : 0;
        SumaSpraw[i - 1] += ilosc;
        return ilosc;
    }

    public Int32 GetSumaSpraw(int i)
    {
        return SumaSpraw[i - 1];
    } 
```

我想知道如何根据一行和​​单元格值的摘要计算“%”单元格的值。

我的第二个问题：是否可以修改网格视图上的视图以显示组中的数据，如下所示：

![在此处输入图像描述](../Images/90df9aa8f6a87bcfe3861204651286c2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T06:09:13.930

我已经通过向 gridview、onRowDataBound 和 onDataBound 添​​加 2 个事件侦听器来完成第一部分。

这是我对这个方法的代码：

```
 protected void GridViewOnRowDataBound(object sender, GridViewRowEventArgs e)
    {
        int i=0;
        if (sender == GridView1)
            i = 0;
        else if (sender == GridView2)
            i = 1;

        if (e.Row.RowType == DataControlRowType.DataRow)
        {
            SumaSpraw[i] += Convert.ToInt32(((Label)e.Row.FindControl("sprawy")).Text);
            SumaAdresow[i] += Convert.ToInt32(((Label)e.Row.FindControl("adresy")).Text);
            SumaInPost[i] += Convert.ToInt32(((Label)e.Row.FindControl("inpost")).Text);
            SumaPoczta[i] += Convert.ToInt32(((Label)e.Row.FindControl("poczta")).Text);
        }
        if (e.Row.RowType == DataControlRowType.Footer)
        {
            ((Label)e.Row.FindControl("sumaSpraw")).Text = SumaSpraw[i].ToString("N0");
            ((Label)e.Row.FindControl("sumaAdresow")).Text = SumaAdresow[i].ToString("N0");
            ((Label)e.Row.FindControl("sumaInPost")).Text = SumaInPost[i].ToString("N0");
            ((Label)e.Row.FindControl("sumaPoczta")).Text = SumaPoczta[i].ToString("N0");
        }
    }

    protected void GridViewOnDataBound(object sender, EventArgs e)
    {
        int i = 0;
        if (sender == GridView1)
            i = 0;
        else if (sender == GridView2)
            i = 1;

        decimal percent = 0M;

        foreach (GridViewRow row in ((GridView)sender).Rows)
        {
            percent = (Convert.ToInt32(((Label)row.FindControl("adresy")).Text) / SumaAdresow[i]) * 100;
            ((Label)row.FindControl("procentAdresow")).Text = FormatPercent(Math.Round(percent, 2));

            percent = (Convert.ToInt32(((Label)row.FindControl("inpost")).Text) / SumaInPost[i]) * 100;
            ((Label)row.FindControl("procentInPost")).Text = FormatPercent(Math.Round(percent, 2));

            percent = (Convert.ToInt32(((Label)row.FindControl("poczta")).Text) / SumaPoczta[i]) * 100;
            ((Label)row.FindControl("procentPoczta")).Text = FormatPercent(Math.Round(percent, 2));
        }
    }

    protected string FormatPercent(decimal percent)
    {
        if (percent == decimal.Truncate(percent))
        {
            return percent.ToString("N0") + "%";
        }
        else if (percent * 10 == decimal.Truncate(percent * 10))
        {
            return percent.ToString("N1") + "%";
        }
        else if (percent*100 == decimal.Truncate(percent*100))
        {
            return percent.ToString("N2") + "%";
        }
        else
            return percent.ToString("N0") + "%";
    } 
```

第三种方法用于格式化输出。

但我仍然想知道第二部分 - 如何仅合并 2 行中的 2 个单元格（如在我的第二个屏幕中）。

* * *

我已经完成了造型部分。也许代码看起来并不那么棒，但它可以工作:)

```
 public static void GridViewRowMerger(GridView gridView, int collIndex)
    {
        for (int rowIndex = gridView.Rows.Count - 2; rowIndex >= 0; rowIndex--)
        {
            GridViewRow currentRow = gridView.Rows[rowIndex];
            GridViewRow previousRow = gridView.Rows[rowIndex + 1];

            if (currentRow.Cells[collIndex].Text != previousRow.Cells[collIndex].Text) continue;
            if (previousRow.Cells[collIndex].RowSpan < 2)
            {
                currentRow.Cells[collIndex].RowSpan = 2;
            }
            else
                currentRow.Cells[collIndex].RowSpan = previousRow.Cells[collIndex].RowSpan + 1;
            previousRow.Cells[collIndex].Visible = false;
        }
    }

    public static void GridViewRefreshStyle(GridView gridView, int collIndex)
    {
        int rows = 0;
        for (int rowIndex = 0; rowIndex < gridView.Rows.Count; rowIndex++)
        {
            if (gridView.Rows[rowIndex].Cells[collIndex].RowSpan > 1)
            {
                for (int i = 0; i < gridView.Rows[rowIndex].Cells[collIndex].RowSpan; i++)
                {
                    gridView.Rows[rowIndex + i].CssClass = rows%2 == 0
                                                               ? gridView.RowStyle.CssClass
                                                               : gridView.AlternatingRowStyle.CssClass;
                }
                rowIndex += gridView.Rows[rowIndex].Cells[collIndex].RowSpan - 1;
            }
            else
            {
                gridView.Rows[rowIndex].CssClass = rows%2 == 0
                                                       ? gridView.RowStyle.CssClass
                                                       : gridView.AlternatingRowStyle.CssClass;
            }
            rows++;
        }
    } 
```

因此，在绑定数据后执行 GridView 我只需调用这 2 个方法，如下所示：

```
GridView2.DataSource = dSet.Tables[1];
GridView2.DataBind();
GridViewRowMerger(GridView2, 0);
GridViewRefreshStyle(GridView2, 0); 
```

# iphone - 如何从 AppDelegate 检查哪个 UIViewController 处于活动状态（推送后）

> ID：10332976
> 
> 赞同：2
> 
> 时间：2012-04-26T12:02:06.370
> 
> 标签：iphone, objective-c

是否可以检查代码中哪个 UIViewController 场景处于活动状态？

我有一个推送通知进入应用程序，并且想要根据用户所处的视图做不同的事情，如下所示：

应用委托：

```
- (void)application:(UIApplication*)application didReceiveRemoteNotification:(NSDictionary*)userInfo
{
    if (tableViewController == active) 
       //get data from server
    else if (detailedViewController == active) 
        //Get Image from server
} 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T12:09:17.127

发布本地通知：

```
 [NSNotificationCenter defaultCenter] postNotificationName:@"foo" object:whatever]; 
```

并让所有适当的 viewControllers 监视它：

```
 [[NSNotificationCenter defaultCenter] addObserver:self 
                                         selector:@selector(handleFoo:) 
                                             name:@"foo" 
                                           object:nil]; 
```

viewControllers 将根据需要添加或删除观察者。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-26T12:10:10.710

```
if ( _viewController.isViewLoaded == YES)
{
    NSLog(@"Yes");

}
else
{
    NSLog(@"No");
} 
```

希望对你有帮助...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-26T12:19:52.193

好吧，我猜你使用了一些 contaneir 视图控制器。如果你使用的是 a`UITabBarController`你可以问自己：

```
@property(nonatomic, assign) UIViewController *selectedViewController 
```

或其：

```
@property(nonatomic) NSUInteger selectedIndex 
```

如果您使用的是`UINavigationController`：

```
@property(nonatomic, readonly, retain) UIViewController *visibleViewController 
```

如果您更喜欢对容器进行细粒度控制，您可以使您的 Appdelegate 符合相应的委托协议：`UITabbarControllerDelegate`和`UINavigationControllerDelegate`

# php - 将会话变量传递给登录重定向脚本

> ID：10332978
> 
> 赞同：0
> 
> 时间：2012-04-26T12:02:09.907
> 
> 标签：php, session, url, redirect, login

我正在尝试存储当前 URL 以用于登录重定向脚本。我在用：

```
$_SESSION['url'] = $_SERVER['REQUEST_URI']; 
```

在每个页面顶部的脚本中，我想要密码保护，如下所示：

```
<?php

//prevents caching
header("Expires: Sat, 01 Jan 2000 00:00:00 GMT");
header("Last-Modified: ".gmdate("D, d M Y H:i:s")." GMT");
header("Cache-Control: post-check=0, pre-check=0",false);
session_cache_limiter();
session_start();
$_SESSION['url'] = $_SERVER['REQUEST_URI'];

require('config.php');

require('functions.php'); 

//this is group name or username of the group or person that you wish to allow access to
// - please be advise that the Administrators Groups has access to all pages.
if (allow_access(Administrators) != "yes")
{ 
include ('no_access.html'); 
exit;
}
?> 
```

no_access.html 看起来像这样：

```
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
<title>NO ACCESS ALLOWED</title>
</head>

<body>

<b><font size="6">Access Denied!!!</font></b><p>Please login with proper 
credentials:</p>
<FORM METHOD="POST" ACTION="/login/redirect.php">
<P><font face="Verdana" size="2" color="#2852A8"><STRONG>Username:</STRONG><BR>
</font><font color="#2852A8" face="Verdana">
<INPUT TYPE="text" NAME="username" SIZE=25 MAXLENGTH=25></font></p>
<P><font face="Verdana" size="2" color="#2852A8"><STRONG>Password:</STRONG><BR>
</font><font color="#2852A8" face="Verdana">
<INPUT TYPE="password" NAME="password" SIZE=25 MAXLENGTH=25></font></p>
<P><font face="Verdana"><font color="#2852A8">
<input type="checkbox" name="remember" value="Yes"></font><font size="2" color="#2852A8">Remember 
me from this computer</font></font></p>
<P><font color="#2852A8">
<INPUT TYPE="submit" NAME="submit" VALUE="Login" style="font-family: Verdana"></font></P>
</FORM>
<p>&nbsp;</p>

</body>

</html> 
```

redirect.php 看起来像这样：

```
<?

//prevents caching
header("Expires: Sat, 01 Jan 2000 00:00:00 GMT");
header("Last-Modified: ".gmdate("D, d M Y H:i:s")." GMT");
header("Cache-Control: post-check=0, pre-check=0",false);
session_cache_limiter();

session_start();

die(print($_SESSION['url']));

if(isset($_SESSION['url'])) 
   $url = $_SESSION['url']; // holds url for last page visited.
else 
   $url = "/bob.php"; // default page for

//require the functions file
require ("config.php");
require ("functions.php");

//check to see if cookies are already set, remember me
if ((!$lr_user) || (!$lr_pass))
{

$username = $_POST[username];
$password = $_POST[password];

}else{

$username = $lr_user;
$password = $lr_pass;

}

//if username or password is blank, send to errorlogin.html
if ((!$username) || (!$password)) 
{

    header("Location:$base_dir/errorlogin.html");
    exit;
}

//sets cookies to remember this computer if the user asks to
if ($_POST[remember] == "Yes")
{
setcookie("lr_user", $username, $duration, "/", $domain);
setcookie("lr_pass", $password, $duration, "/", $domain);
}

if ($_POST[activate] == "Yes")
{
        //make the connection to the database
        $connection = @mysql_connect($server, $dbusername, $dbpassword) or die(mysql_error());
        $db = @mysql_select_db($db_name,$connection)or die(mysql_error());

        //build and issue the query
        $sql ="UPDATE $table_name SET verified = '1' WHERE username = '$_POST[username]'";
        $result = @mysql_query($sql,$connection) or die(mysql_error());
}

//sets session variables
sess_vars($base_dir, $server, $dbusername, $dbpassword, $db_name, $table_name, $username, $password);

//check to see if the user has to change their password
if ($_SESSION[pchange] == "1")
{
    $_SESSION[redirect] = "$base_dir/pass_change.html";
}

//check to see if the user has activated the account
if ($_SESSION[verified] == "0")
{
    $_SESSION[redirect] = "$base_dir/not_activated.html";
}

//make the connection to the database
$connection = @mysql_connect($server, $dbusername, $dbpassword) or die(mysql_error());
$db = @mysql_select_db($db_name,$connection)or die(mysql_error());

//build and issue the query
$sql ="SELECT * FROM banned";
$result = @mysql_query($sql,$connection) or die(mysql_error());

while ($sql = mysql_fetch_object($result)) 
    {
    $banned = $sql -> no_access;
    if ($username == $banned || $REMOTE_ADDR == $banned)
        {
            include ('banned.html');
            exit;
        }
    }

$last_log = last_login();

//updates table with last log as now
$sql = "UPDATE $table_name SET last_login = '$last_log' WHERE username = '$_SESSION[user_name]'";
$result = @mysql_query($sql,$connection) or die(mysql_error());

if (($_SESSION[redirect] != "$base_dir/errorlogin.html") && ($log_login == "1"))
{
    include('loglogin.php');
}

//redirects the user    
header("Location:$url");

?>

<head><title>Redirect</title></head> 
```

由于某种原因`$_SESSION['url']`没有传递给redirect.php。`die(print($_SESSION['url']));`什么都不返回。

有人可以帮助解决这个问题吗？

谢谢，

缺口

**我目前遇到的错误：**

注意：未定义索引：第 17 行 /home/nickputm/public_html/monthlymixup.com/login/redirect.php 中的 url

警告：未知：打开（/tmp/sess_831fff9f72fafb8ec8a677ef794a7824，O_RDWR）失败：第 0 行的未知设备（28）上没有剩余空间

警告：未知：无法写入会话数据（文件）。请在第 0 行的 Unknown 中验证 session.save_path 的当前设置是否正确 (/tmp)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T12:36:13.943

请尝试删除 php 开始标记之后的`<?`空行和 session_start() 之前的空行；在redirect.php

还要检查并删除 php close tag(?>) 之后的空格或空行。

尝试将 no_access.html 保存为 no_access.php

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T12:06:25.887

尝试`session_start`在设置标题之前放置。

# css - 里面 变化 宽度

> ID：10332995
> 
> 赞同：0
> 
> 时间：2012-04-26T12:03:07.277
> 
> 标签：css, html-lists

我有一个菜单`<ul>`。在其中一个`<li>`s 中，我还有另一个`<ul>`要添加深度级别，即子菜单。但是，当悬停`<li>`以使子菜单出现时，它的宽度会更改以匹配`<ul>`s。此外，子菜单会将内容区域拉下，这不是我想要的。

我希望`<li>`它在悬停时保持它的宽度，并且子菜单出现在内容区域的顶部。

这是 jsFiddle： http: [//jsfiddle.net/Cthulhu/RWjcA/](http://jsfiddle.net/Cthulhu/RWjcA/)（如果您将鼠标悬停在产品上，您会看到它发生。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-26T12:24:36.247

这是一个稍微清理过的版本，不需要 Javascript：http: [//jsfiddle.net/dZhQN/2/](http://jsfiddle.net/dZhQN/2/)

### HTML

```
<ul id="nav">
    <li><a>Home</a></li>
    <li><a>Whatever</a></li>
    <li>
        <a>Products</a>
        <ul>
            <li><a>What When How</a></li>
            <li><a>Who Why</a></li>
        </ul>
    </li>
    <li><a>Contacts</a></li>
</ul>

<div id="content"></div>
​ 
```

### CSS

```
#nav, #nav ul {
    list-style: none;
    text-transform: uppercase;
    text-align: center;
}

#nav li {
    display: inline-block;
    position: relative;
}

#nav li a {
    display: block;
    cursor: pointer;
    font-size: 12px;
    padding: 24px 20px 15px;
}
#nav > li > a:hover {
    color: #FFF;
    background: #4A6125;
}

#nav ul {
    background: #000;
    display: none;
    position: absolute;
    top: 100%;
    left: 50%;
    z-index: 999;
    width: 150px;
    margin-left: -75px;
}
#nav ul li a {
    color: #FFF;
    padding: 10px;
}
#nav ul li a:hover {
    text-decoration: underline;
}
#nav li:hover ul {
    display: block;            
}

#content {
    background: gold;
    height: 200px;
}
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T12:12:58.853

你可以简单地给那个 Div 一个固定的高度

```
#main_menu .menu {
list-style: none outside none;
text-align: center;
text-transform: uppercase;
height:60px;
} 
```

希望这会有所帮助...