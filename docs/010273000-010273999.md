# StackOverflow 问答 10273000-10273999

# java - 减少/缩小使用 JNA 的 Java 项目的 JAR 大小？

> ID：10273002
> 
> 赞同：1
> 
> 时间：2012-04-22T23:15:11.477
> 
> 标签：java, jna

我正在使用 JNA 隐藏一个特定的窗口，它工作正常，但我需要缩小我的整个项目。我想 JNA 中有很多我不需要的东西。有没有一种方法/工具可以在以下主要方法的情况下以编程方式删除所有从未调用过的东西？我的项目中有所有 JNA 类，而不仅仅是公共 jar 文件。

```
import com.sun.jna.Native;
import com.sun.jna.Pointer;
import com.sun.jna.platform.win32.WinDef.HWND;
import com.sun.jna.platform.win32.WinUser;
import com.sun.jna.platform.win32.WinUser.WNDENUMPROC;
import com.sun.jna.win32.StdCallLibrary;

public class HideHwnd {
   public interface User32 extends StdCallLibrary {
      User32 INSTANCE = (User32) Native.loadLibrary("user32", User32.class);
      boolean EnumWindows(WinUser.WNDENUMPROC lpEnumFunc, Pointer arg);
      int GetWindowTextA(HWND hWnd, byte[] lpString, int nMaxCount);
      boolean ShowWindow(HWND hWnd, int i);
   }

   public static void main(String[] args) {
      final User32 user32 = User32.INSTANCE;
      user32.EnumWindows(new WNDENUMPROC() {
         public boolean callback(HWND hWnd, Pointer arg1) {
            byte[] windowText = new byte[512];
            user32.GetWindowTextA(hWnd, windowText, 512);
            String wText = Native.toString(windowText);

            if (wText.isEmpty()) {
               return true;
            }
            if (wText.startsWith("window1")){
                if (user32.ShowWindow(hWnd, 1))
                    System.out.println(wText+" is hidden now!");
            }
            return true;
         }
      }, null);
   }
} 
```

在此先感谢，汤姆

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T23:19:53.413

我在[ProGuard](http://proguard.sourceforge.net/)方面取得了巨大成功，尽管我还没有在任何 JNA 项目中尝试过：

> ProGuard 是一个免费的 Java**类文件收缩器**、优化器、混淆器和预验证器。它**检测并删除未使用的类、字段、方法和属性**。它优化字节码并删除未使用的指令。它使用简短的无意义名称重命名剩余的类、字段和方法。最后，它会为 Java 6 或 Java Micro Edition 预先验证处理后的代码。

混淆可以完全禁用，ProGuard 将扫描类文件依赖关系并忽略未使用的类（可以指定“始终保留的类”）。ProGuard*也*可用于外部库，用于构建仅包含“必需类”的单个 JAR。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-24T18:35:18.160

You can also safely eliminate any native libjnidispatch.so/.dll within jna.jar for platforms you don't intend to support.

# objective-c - Objective-C 块中的静态变量？

> ID：10273006
> 
> 赞同：5
> 
> 时间：2012-04-22T23:15:50.033
> 
> 标签：objective-c, cocoa-touch, objective-c-blocks

我正在研究一些 CoreAnimation 的东西。带有几个视图控制器的导航控制器。并且视图控制器具有用于“小册子”的不同“页面”的 UISCrollViews。在每个页面上，当用户翻到该页面时，可能会触发一些动画。

我正在尝试这样的事情（用于一次性动画）。

```
void (^animationBlock)() =
  ^{
    static bool alreadyTriggered = NO;
    if(alreadyTriggered)
      return;

    [CATransaction begin];
    [CATransaction setCompletionBlock:
     ^{
       alreadyTriggered = YES;
     }];

    // Do me some animations...

    [CATransaction commit];
  };

  NSMutableDictionary* pageBlocks = [[NSMutableDictionary alloc] init];
  [pageBlocks setObject:[animationBlock copy] forKey:<animation's name>];
  [self.animationBlocks setObject:pageBlocks forKey:<some page number>];

  [pageBlocks release];
  [animationBlock release]; 
```

“动画名称”和“某些页码”是为了解释起见的占位符（它们是任意的 NSString 文字）。

触发这些动画的代码是：

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
  int pageNumber = floor(self.scrollView.contentOffset.x / self.scrollView.frame.size.width);
  NSMutableDictionary* pageBLocks = [self.animationBlocks objectForKey:[NSString stringWithFormat:@"page%i",pageNumber]];
  [CATransaction begin];
  for(id key in pageBLocks)
    ((void (^)())[pageBLocks objectForKey:key])();
  [CATransaction commit];
 } 
```

到目前为止一切顺利，只是如果我从导航控制器弹出小册子（又名在小册子上调用 dealloc）然后再次将其推入，静态布尔值仍然设置。

**我的想法：**

**- 我保留块吗？** 我不知道..我在将它（带有副本）添加到字典后调用release，并且小册子的dealloc方法调用字典上的release。

**- 我是否在某处保留另一个静态布尔副本？** 当我在方法范围内将块声明为静态时，分配了我的第一个布尔值。这完全取决于我没有研究过的 Objective-C 的激活记录方案。但是假设是这样，当在 popViewcOntroller 上释放对象时，该副本就消失了。当字典被杀死时，应该在将它添加到字典时从块上调用副本来释放它的另一个副本？

**我是否保留了整个小册子对象本身？**我没有完全从 Apple 文档中得到它，但他们说如果我通过引用访问实例变量，我会保留 self。我尝试从块内释放自我，一切都运行良好......？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T23:49:19.753

使块返回一个值，然后决定是否从字典中删除块。

```
// ...
    BOOL shouldRemove = block();

    if (shouldRemove) {
        [pageBlocks removeObjectForKey:key];
    }
// ... 
```

* * *

让我们测试一下静态变量

```
@interface TestClass : NSObject
@end

@implementation TestClass

- (void(^)(void))block;
{
    return [[^{

        static BOOL staticBOOL = NO;

        NSLog(@"%d", staticBOOL);

        staticBOOL = YES;

    } copy] autorelease];
}  

@end

int main(int argc, char *argv[]) {
    NSAutoreleasePool *p = [[NSAutoreleasePool alloc] init];

    TestClass *test1 = [[TestClass alloc] init];
    test1.block();
    test1.block();

    TestClass *test2 = [[TestClass alloc] init];
    test2.block();
    test2.block();

    [p release];
} 
```

这输出

```
#=> 2012-04-23 00:43:38.501 Untitled[8380:707] 0
#=> 2012-04-23 00:43:38.503 Untitled[8380:707] 1
#=> 2012-04-23 00:43:38.503 Untitled[8380:707] 1
#=> 2012-04-23 00:43:38.504 Untitled[8380:707] 1 
```

我们如何解决问题？一旦像这样执行，我可能会从字典中删除对象

```
- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView;
{
    NSInteger pageNumber = floor(self.scrollView.contentOffset.x / self.scrollView.frame.size.width);
    NSMutableDictionary *pageBlocks = [self.animationBlocks objectForKey:[NSString stringWithFormat:@"page%i", pageNumber]];

    [CATransaction begin];

    for (id key in [pageBlocks copy]) {
        void (^block)(void) = [pageBlocks objectForKey:key];
        if (block) {
            block();
        }
        [pageBlocks removeObjectForKey:key];
    }

    [CATransaction commit];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T00:40:00.757

你的评论

> 到目前为止一切顺利，只是如果我从导航控制器弹出小册子（又名在小册子上调用 dealloc）然后再次将其推入，静态布尔值仍然设置。

似乎暗示您希望`BOOL`在推送的视图控制器上有一个成员变量...如果这是正确的，您可以使用`objc_setAssociatedObject()`.

我可能会向 UIViewController 添加一个类别来实现这一点：

```
@interface UIViewController (OneShotAnimation)
@property ( nonatomic ) BOOL animationHasBeenPlayed ;
@end

@implementation UIViewController (OneShotAnimation)

-(void)setAnimationHasBeenPlayed:(BOOL)b
{
    objc_setAssociatedObject( self, @"animationHasBeenPlayed", [ NSNumber numberWithBool:b ], OBJC_ASSOCIATION_RETAIN_NONATOMIC ) ;
}

-(BOOL)animationHasBeenPlayed
{
    return [ objc_getAssociatedObject( self, @"animationHasBeenPlayed" ) boolValue ] ;
}

@end 
```

# c# - 将大端数组转换为 Int64

> ID：10273008
> 
> 赞同：0
> 
> 时间：2012-04-22T23:16:11.667
> 
> 标签：c#, .net, mono, bitconverter

我使用 System.IO.BinaryReader 从序列化文件中读取数据。该文件是大端。所以我从流中读取 Int64 (long) 的操作是从中读取 8 个字节。我需要做的是将这 8 个字节的大端转换为小端长表示。

我不能使用 System.BitConverter，因为它将使用 Mono 编译以在 Linux 上使用，可以在大端和 Visual Studio for Windows 上运行，它可以在小端上运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T23:26:32.540

您可以使用`System.Net.IPAddress.NetworkToHostOrder`或`System.Net.IPAddress.HostToNetworkOrder`

例如， `System.Net.IPAddress.HostToNetworkOrder(0x0123456789abcdefl)`将返回`efcdab8967452301`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T23:55:04.443

如果您最终还是要使用 Mono，则可以使用[DataConvert](http://www.mono-project.com/Mono_DataConvert)。

在 Windows 上也可以正常工作。我在我的一个项目中使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T00:34:59.043

John Skeet 的[miscutil](http://www.yoda.arachsys.com/csharp/miscutil/)库实现了 BigEndianBitConverter。

# android - 如何在另一个活动中开始一个活动？志兴

> ID：10273014
> 
> 赞同：0
> 
> 时间：2012-04-22T23:16:52.873
> 
> 标签：android

是否可以在我自己的 Activity（我的 xml 文件）中恢复创建 QR 码 ZXing 的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T23:32:43.930

不确定这是否是您所要求的，但您可以使用 ZXING 从您的一项活动中扫描条形码，如下所示：

```
 try {
                    Intent intent = new Intent("com.google.zxing.client.android.SCAN");
                    intent.putExtra("com.google.zxing.client.android.SCAN.SCAN_MODE", "QR_CODE_MODE");
                    intent.putExtra("com.google.zxing.client.android.SCAN.SCAN_MODE", "PRODUCT_MODE");
                    startActivityForResult(intent, 0);
                }
                catch (ActivityNotFoundException e) {

                } 
```

对条形码做一些事情包括：

```
public void onActivityResult(int requestCode, int resultCode, Intent intent) {
        if (requestCode == 0) {

            if (resultCode == RESULT_OK) {

                String contents = intent.getStringExtra("SCAN_RESULT");

                String format = intent.getStringExtra("SCAN_RESULT_FORMAT");

                Toast.makeText(this, contents, Toast.LENGTH_SHORT).show();

            } else if (resultCode == RESULT_CANCELED) {
                // Handle cancel
            }
        }
    } 
```

您需要在您的设备上安装[ZXING 条码应用](https://play.google.com/store/apps/details?id=com.google.zxing.client.android&hl=en)程序。

# javascript - 照片库适用于 gae apppot 但不适用于 127.0.0.1

> ID：10273017
> 
> 赞同：0
> 
> 时间：2012-04-22T23:16:58.467
> 
> 标签：javascript, jquery, python, google-app-engine, image-gallery

当我在应用程序引擎上部署我的应用程序时，图库可以工作（[http://mark-smith-app.appspot.com/projects/](http://mark-smith-app.appspot.com/projects/)），但它不能离线工作..

我想让我的画廊使用以下命令：

```
C:\Python27\python.exe "C:/Program Files/Google/google_appengine/dev_appserver.py" . 
```

当我打开 chrome 并转到 127.0.0.1/projects/ 时，它会显示图库，但只显示第一张图片，图库中的其余图片都是“黑色”的。

[我从http://www.awkwardgroup.com/sandbox/awkward-showcase-a-jquery-plugin/](http://www.awkwardgroup.com/sandbox/awkward-showcase-a-jquery-plugin/)下载了画廊

我下载的画廊带有一个示例**index4.html**，当我用 chrome 打开它时它可以工作。

我将 index4.html 中的所有内容复制到我的谷歌应用程序引擎 projects.html 中，并为 css、js 和图像创建了一个静态目录。

这是 app.yaml：

```
application: mark-smith-app
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /stylesheets
  static_dir: stylesheets

- url: /images
  static_dir: images

- url: /.*
  script: main.app

libraries:
- name: jinja2
  version: latest 
```

我还去了 127.0.0.1/projects 并去“查看源代码”并将其复制到 html1.txt

我还将“查看源代码”从 index4.html 复制到 html2.txt

我从以下 python 不同的脚本中得到了以下结果：

```
f1 = open('html1.txt')
f2 = open('html2.txt')

from difflib import ndiff,IS_CHARACTER_JUNK

delta = ndiff([i.strip()+"\n" for i in f1],[i.strip()+"\n" for i in f2])

for line in delta:
    print line, 
```

输出：

```
*** Python 2.7.2 (default, Jun 12 2011, 15:08:59) [MSC v.1500 32 bit (Intel)] on win32\. ***
>>> 

  <!DOCTYPE html>
  <html>
  <head>
  <title>Awkward Showcase - Demo #4</title>
- <link rel="stylesheet" href="/stylesheets/style.css" />
?                              ^ ---------
+ <link rel="stylesheet" href="css/style.css" />
?                              ^
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
- <script type="text/javascript" src="/stylesheets/jquery.aw-showcase.js"></script>
?                                     -------------
+ <script type="text/javascript" src="jquery.aw-showcase.js"></script>
  <script type="text/javascript">

  $(window).ready(function()
  {
  $("#showcase").awShowcase(
  {
  content_width:            700,
  fit_to_parent:            false,
  auto:                 true,
  interval:             3000,
  continuous:               false,
  loading:              true,
  tooltip_width:            200,
  tooltip_icon_width:       32,
  tooltip_icon_height:  32,
  tooltip_offsetx:      18,
  tooltip_offsety:      0,
  arrows:                   true,
  buttons:              true,
  btn_numbers:          false,
  keybord_keys:         true,
  mousetrace:               false, /* Trace x and y coordinates for the mouse */
  pauseonover:          true,
  stoponclick:          true,
  transition:               'fade', /* hslide/vslide/fade */
  transition_speed:     500,
  transition_delay:     300,
  show_caption:         'onhover', /* onload/onhover/show */
  thumbnails:               true,
  thumbnails_position:  'outside-last', /* outside-last/outside-first/inside-last/inside-first */
  thumbnails_direction: 'horizontal', /* vertical/horizontal */
  thumbnails_slidex:        0, /* 0 = auto / 1 = slide one thumbnail / 2 = slide two thumbnails / etc. */
  dynamic_height:           true, /* For dynamic height to work in webkit you need to set the width and height of images in the source. Usually works to only set the dimension of the first slide in the showcase. */
  speed_change:         false, /* Set to true to prevent users from swithing more then one slide at once. */
  viewline:             false /* If set to true content_width, thumbnails, transition and dynamic_height will be disabled. As for dynamic height you need to set the width and height of images in the source. */
  });
  });

  </script>
  </head>
  <body>

  <div class="menu"><a href="index.html">Demo #1</a> (Normal) | <a href="index2.html">Demo #2</a> (Vertical thumnbails) | <a href="index3.html">Demo #3</a> (Horizontal thumbnails) | <a href="index4.html" class="active">Demo #4</a> (Dynamic height) | <a href="index5.html">Demo #5</a> (Hundred percent) | <a href="index6.html">Demo #6</a> (Viewline)</div>
  <div id="error"></div>
  <div style="width: 700px; margin: auto;">

  <!-- This is the button used to switch between One Page and Slideshow. -->
  <p><a id="awOnePageButton" href="#"><span class="view-page">View As One Page</span><span class="view-slide">View As Slideshow</span></a></p>

  <div id="showcase" class="showcase">
  <!-- Each child div in #showcase represents a slide -->
  <div class="showcase-slide">
  <div class="showcase-content">
  <!-- For dynamic height to work in webkit you need to set the width and height of images in the source.
  Usually works to only set the dimension of the first slide in the showcase. -->
- <img src="/images/05.jpg" alt="05" width="700px" height="600px" />
?           -
+ <img src="images/05.jpg" alt="05" width="700px" height="600px" />
  </div>
  <div class="showcase-thumbnail">
- <img src="/images/05.jpg" alt="05" width="140px" />
?           -
+ <img src="images/05.jpg" alt="05" width="140px" />
  <!-- The div below with the class .showcase-thumbnail-cover is used for the thumbnails active state. -->
  <div class="showcase-thumbnail-cover"></div>
  </div>
  </div>
  <!-- Each child div in #showcase represents a slide -->
  <div class="showcase-slide">
  <!-- Put the slide content in a div with the class .showcase-content. -->
  <div class="showcase-content">
- <img src="/images/01.jpg" alt="01" />
?           -
+ <img src="images/01.jpg" alt="01" />
  </div>
  <!-- Put the thumbnail content in a div with the class .showcase-thumbnail -->
  <div class="showcase-thumbnail">
- <img src="/images/01.jpg" alt="01" width="140px" />
?           -
+ <img src="images/01.jpg" alt="01" width="140px" />
  <div class="showcase-thumbnail-cover"></div>
  </div>
  <!-- Put the caption content in a div with the class .showcase-caption -->
  <div class="showcase-caption">
  <h2>Be creative. Get Noticed!</h2>
  </div>
  </div>
  <!-- Each child div in #showcase represents a slide -->
  <div class="showcase-slide">
  <div class="showcase-content">
- <img src="/images/04.jpg" alt="04" />
?           -
+ <img src="images/04.jpg" alt="04" />
  </div>
  <div class="showcase-thumbnail">
- <img src="/images/04.jpg" alt="04" width="140px" />
?           -
+ <img src="images/04.jpg" alt="04" width="140px" />
  <div class="showcase-thumbnail-cover"></div>
  </div>
  </div>
  <!-- Each child div in #showcase represents a slide -->
  <div class="showcase-slide">
  <div class="showcase-content">
- <img src="/images/03.jpg" alt="03" />
?           -
+ <img src="images/03.jpg" alt="03" />
  </div>
  <div class="showcase-thumbnail">
- <img src="/images/03.jpg" alt="01" width="140px" />
?           -
+ <img src="images/03.jpg" alt="01" width="140px" />
  <div class="showcase-thumbnail-cover"></div>
  </div>
  </div>
  <!-- Each child div in #showcase represents a slide -->
  <div class="showcase-slide">
  <div class="showcase-content">
- <img src="/images/02.jpg" alt="02" />
?           -
+ <img src="images/02.jpg" alt="02" />
  </div>
  <div class="showcase-thumbnail">
- <img src="/images/02.jpg" alt="01" width="140px" />
?           -
+ <img src="images/02.jpg" alt="01" width="140px" />
  <div class="showcase-thumbnail-cover"></div>
  </div>
  <!-- Put the tooltips in a div with the class .showcase-tooltips. -->
  <div class="showcase-tooltips">
  <!-- Each anchor in .showcase-tooltips represents a tooltip. The coords attribute represents the position of the tooltip. -->
  <a href="http://www.awkward.se" coords="634,130">
  <!-- The content of the anchor-tag is displayed in the tooltip. -->
  This is a tooltip that displays the anchor html in a nice way.
  </a>
  <a href="http://www.awkward.se" coords="200,440">
  This is a tooltip that displays the anchor html in a nice way.
  </a>
  <a href="http://www.awkward.se" coords="600,440">
  This is a tooltip that displays the anchor html in a nice way.
  </a>
  <a href="http://www.awkward.se" coords="356, 172">
  <!-- You can add multiple elements to the anchor-tag which are display in the tooltip. -->
- <img src="/images/glasses.png" />
?           -
+ <img src="images/glasses.png" />
  <span style="display: block; font-weight: bold; padding: 3px 0 3px 0; text-align: center;">
  White Glasses: 500$
  </span>
  </a>
  </div>
  </div>
  </div>

  </div>

  <div style="text-align: center; margin-top: 50px;">
  <a href="http://www.awkwardgroup.com/sandbox/awkward-showcase-a-jquery-plugin">
  Click here to download and learn more about this jQuery plugin.
  </a>
  </div>

  </body>
  </html>
>>> 
```

日志如下： 我运行应用程序，点击项目链接进入 /projects/ 页面，画廊正确显示 05.jpg 然后你可以看到我点击到 01 和 04.jpg，然后回到 05.jpg （05.jpg 是唯一没有被涂黑的）。缩略图虽然有效。

```
C:\Python27\python.exe "C:/Program Files/Google/google_appengine/dev_appserver.py" .
WARNING  2012-04-22 23:50:20,888 rdbms_mysqldb.py:74] The rdbms API is not available because the MySQLdb library could not be loaded.
INFO     2012-04-22 23:50:21,914 appengine_rpc.py:160] Server: appengine.google.com
INFO     2012-04-22 23:50:21,921 appcfg.py:581] Checking for updates to the SDK.
INFO     2012-04-22 23:50:23,601 appcfg.py:599] The SDK is up to date.
INFO     2012-04-22 23:50:23,891 dev_appserver_multiprocess.py:650] Running application dev~mark-smith-app on port 8080: http://localhost:8080
INFO     2012-04-22 23:50:23,891 dev_appserver_multiprocess.py:652] Admin console is available at: http://localhost:8080/_ah/admin
WARNING  2012-04-22 23:50:24,252 py_zipimport.py:139] Can't open zipfile C:\Python27\lib\site-packages\pyfacebook-1.0a2-py2.7.egg: IOError: [Errno 13] file not accessible: 'C:\\Python27\\lib\\site-packages\\pyfacebook-1.0a2-py2.7.egg'
INFO     2012-04-22 23:50:25,663 dev_appserver.py:2865] "GET / HTTP/1.1" 200 -
INFO     2012-04-22 23:50:25,744 dev_appserver.py:2865] "GET /stylesheets/main.css HTTP/1.1" 200 -
INFO     2012-04-22 23:50:25,825 dev_appserver.py:2865] "GET /images/home.jpg HTTP/1.1" 200 -
INFO     2012-04-22 23:50:25,960 dev_appserver.py:2865] "GET /favicon.ico HTTP/1.1" 404 -
INFO     2012-04-22 23:50:32,076 dev_appserver.py:2865] "GET /projects/ HTTP/1.1" 200 -
INFO     2012-04-22 23:50:32,164 dev_appserver.py:2865] "GET /stylesheets/style.css HTTP/1.1" 200 -
INFO     2012-04-22 23:50:32,257 dev_appserver.py:2865] "GET /stylesheets/jquery.aw-showcase.js HTTP/1.1" 200 -
INFO     2012-04-22 23:50:32,414 dev_appserver.py:2865] "GET /images/05.jpg HTTP/1.1" 200 -
INFO     2012-04-22 23:50:32,499 dev_appserver.py:2865] "GET /images/black-opacity-40.png HTTP/1.1" 200 -
INFO     2012-04-22 23:50:32,572 dev_appserver.py:2865] "GET /images/01.jpg HTTP/1.1" 200 -
INFO     2012-04-22 23:50:32,651 dev_appserver.py:2865] "GET /images/white-opacity-80.png HTTP/1.1" 200 -
INFO     2012-04-22 23:50:32,730 dev_appserver.py:2865] "GET /images/04.jpg HTTP/1.1" 200 -
INFO     2012-04-22 23:50:32,811 dev_appserver.py:2865] "GET /images/03.jpg HTTP/1.1" 200 -
INFO     2012-04-22 23:50:32,891 dev_appserver.py:2865] "GET /images/02.jpg HTTP/1.1" 200 -
INFO     2012-04-22 23:50:32,973 dev_appserver.py:2865] "GET /images/glasses.png HTTP/1.1" 200 -
INFO     2012-04-22 23:50:33,045 dev_appserver.py:2865] "GET /images/arrows-small.png HTTP/1.1" 200 -
INFO     2012-04-22 23:50:33,122 dev_appserver.py:2865] "GET /images/arrows.png HTTP/1.1" 200 -
INFO     2012-04-22 23:50:33,220 dev_appserver.py:2865] "GET /favicon.ico HTTP/1.1" 404 -
INFO     2012-04-22 23:50:38,493 dev_appserver.py:2865] "GET /images/01.jpg HTTP/1.1" 304 -
INFO     2012-04-22 23:50:44,198 dev_appserver.py:2865] "GET /images/04.jpg HTTP/1.1" 304 -
INFO     2012-04-22 23:50:46,536 dev_appserver.py:2865] "GET /images/03.jpg HTTP/1.1" 304 -
INFO     2012-04-22 23:50:52,927 dev_appserver.py:2865] "GET /images/04.jpg HTTP/1.1" 304 -
INFO     2012-04-22 23:50:54,806 dev_appserver.py:2865] "GET /images/01.jpg HTTP/1.1" 304 -
INFO     2012-04-22 23:50:57,243 dev_appserver.py:2865] "GET /images/05.jpg HTTP/1.1" 304 - 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T23:46:06.527

从信息中几乎不可能说出确切的原因是什么，但是开发服务器和生产服务器之间有一个很大的区别：开发服务器是单线程的，所以如果之前不可能完成请求图像请求进来，最终浏览器将超时并且不再尝试渲染图像。

查看开发服务器写出的日志会很有用。

# html - 如何在 HTML 的表格中换行？

> ID：10273025
> 
> 赞同：2
> 
> 时间：2012-04-22T23:18:17.017
> 
> 标签：html, css, xhtml

我按照视频课程中的说明制作了[这个 html 文件。](https://github.com/stanigator/webdev_class/blob/master/htmlcss/index.html)但是，由于某种原因，尽管使用了 CSS 样式表，但我没有正确配置单元格大小。以下是该表的代码片段：

```
<table id="table1" cellspacing="40">
    <tr>
        <td><h3>Home</h3>"ksdjfkl;dajkfdl;sajfkldsjlsfl;saflklfas"<a href="about.html">more</a></td>
        <td><h3>About</h3>"dkfjakldfjdklsafjkldsjfvklzjvklz;cjv"<a href="about.html">more</a></td>
        <td><h3>Contact</h3>"jvkl;jkdlfjaklda;fjkdlsafjdlsfkd;"<a href="contact.html">more</a></td>
    </tr>
</table> 
```

这是与表格相关的代码片段：

```
#table1{
width: 750px;
height: 250px;
table-layout: fixed;
margin-left: 20px;
}

#table1 td{
text-align: left;
background: #d8d8d8;
font-size: 14px;
padding: 15px;
border-radius: 10px;
-moz-border-radius: 10px;
box-shadow: 0px 0px 10px #000000;
-moz-box-shadow: 0px 0px 10px #000000;
}

#table1 h3{
text-align: center;
font-family: Pristina;
font-size: 20px;
} 
```

这是页面的结果： ![索引页面截图](../Images/36b9d32b50d42d238a6a0535b984e7f4.png)

我有一种感觉，我应该在`#table1 td{ ... }`. `width = somepixels`但是，即使在添加后，我的外观仍然存在问题`#table1 td{ ... }`。你有什么建议来解决它？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T23:20:22.320

使用 CSS`word-wrap`属性：

```
#table1 td {
     word-wrap: break-word;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T05:06:12.977

定义您希望应用于断开字符串的逻辑。很可能“ksdjfkl;dajkfdl;sajfkldsjlsfl;saflklfas”等，因为你的问题不是真实数据，所以不可能猜测应该应用什么逻辑。但是如果它是一个实际的例子，或者一些神秘的代码，你应该允许分号后的换行符（只）：

```
ksdjfkl;<wbr>dajkfdl;<wbr>sajfkldsjlsfl;<wbr>saflklfas 
```

使用`word-wrap: break-word`几乎是不合适的，当然也不适合英语或其他西方语言。

要在特殊字符后允许中断，请使用`<wbr>`. 要允许在自然语言单词中使用连字符，请使用软连字符（或它的实体引用，`&shy;`）。

# eclipse - Eclipse Maven 一键构建和测试

> ID：10273026
> 
> 赞同：11
> 
> 时间：2012-04-22T23:18:23.827
> 
> 标签：eclipse, unit-testing, maven, build, integration-testing

我在 Eclipse 中做的最常见的构建活动（除了允许自动构建做它的事情）是执行带有 clean 和 package 参数的“Maven Build ...”。这运行了我所有的测试。m2eclipse 在这方面做得很好，我喜欢它的输出。如果测试中断，我会跳转到使用 JUnit 插件、调试器等。

我在“运行”（和“调试”）按钮的下拉菜单中使用了“组织收藏夹...”，以使这种构建“永久”并且易于访问和使用。

但还不够容易。

我现在拥有的是一个按钮，它会根据我的上一个活动、我打开的文件或我在项目窗口中选择的项目而随时变化。是的，我可以单击运行按钮旁边的向下箭头，为“清理和打包”选择最喜欢的，但对于我每天要做数百次的事情，这太难了。

我想要一个按钮。工具栏上的一个大按钮，我只需单击它就会爆炸。我还将接受一种将热键分配给我最喜欢的构建的方式，这样我就可以按 ctrl+r 或其他键来运行我最喜欢的项目。

有什么给我的？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-01T23:54:14.190

我在 Eclipse 中重新发现了键绑定。这不*完全*是我想要的，但它工作得很好，我想。我只是将 F7 绑定到 Maven 的测试钩子。它与“ `mvn clean package`”不同，但在我找到更好的解决方案之前它会起作用。

我是这样做的：

1.  打开首选项
2.  打开常规->键
3.  搜索“maven test”（或“run maven test”）
4.  选择**运行 Maven 测试**条目
5.  单击标有**绑定的字段**
6.  按**F7**（或您要绑定的任何按键）
7.  可能最好**在 Windows中将****When**字段设置为

 **现在，当您按 F7 时，eclipse 将运行“ `mvn test`”。

无论出于何种原因，我确信这是一个非常好的，m2eclipse 插件作者没有提供“运行 Maven 包”钩子。叹。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T08:08:55.277

看起来有几种方法可以做到这一点 - 没有直接在 Eclipse 中：

*   创建您自己的定义键绑定的小插件，请参见此处：[eclipse：将键盘快捷键放在特定的启动配置上](https://stackoverflow.com/questions/6015510/eclipse-put-keyboard-shortcuts-on-specific-launch-configurations)
*   实际使用[宏](https://sourceforge.net/projects/practicalmacro/)- 另请参见此处：[为特定的 Eclipse 构建配置分配键盘快捷键](https://stackoverflow.com/questions/1437323/assigning-a-keyboard-shortcut-for-a-specific-eclipse-build-configuration)
*   使用某种形式的脚本，例如： http: [//mackaz.de/72](http://mackaz.de/72)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-10-03T11:47:00.903

如果您创建 Maven 运行配置并将数字作为名称的第一个字符，则可以使用 Shift-Alt-X Ctrl-M N，其中 N 是您作为名称中的第一个字符提供的数字。对于您的情况，请执行以下操作。

1.  右键单击您的项目，选择 Run As，然后选择 Maven build... 这将打开一个对话框以创建新的 Maven 运行配置。
2.  将配置命名为*1-test*。
3.  以测试为目标。
4.  按应用，然后关闭。
5.  键入 Shift-Alt-X Ctrl-M 1。这将选择您刚刚创建的配置。
6.  按回车将启动它。**

# ruby-on-rails - RoR 中关系模型的验证

> ID：10273030
> 
> 赞同：1
> 
> 时间：2012-04-22T23:19:19.737
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, relationship

如何在 RoR 中验证模型中的关系？例如，我有 3 个模型：

```
class Post < ActiveRecord::Base
  belongs_to :blog
  has_one :user, :through => :blog

  validates :blog_id, :presence => true
end

class Blog < ActiveRecord::Base
  belongs_to :user
  has_many :posts, :dependent => :destroy
end

class User < ActiveRecord::Base
  has_many :blogs
  has_many :posts, :through => :blogs
end 
```

在我的控制器中：

```
@post = current_user.blogs.find(params[:post].delete(:blog_id)).posts.build(params[:post]) 
```

但是当我想创建帖子时，我得到：

```
Can't mass-assign protected attributes: blog_id 
```

我不应该得到这个错误，因为我是从 params 哈希中删除 blog_id，还是不？无论如何，在我的 Post 模型中验证 User.blogs 的 blog_id 附件的更好方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T01:35:35.667

如果你想设置文章写完后在哪个博客上发布，你必须通过设置将 blog_id 放入白名单`attr_accessible`

因此，在您的示例中，您的 Post 模型应如下所示

```
class Post < ActiveRecord::Base
  belongs_to :blog

  attr_accessible :blog_id, :title, :content
  validates :blog_id, :presence => true
end​ 
```

除此以外。小心你如何建立你的关系。`has_one`和之间的区别在于`belongs_to`外键的去向。它转到您定义`belongs_to`. `has_one`说某样东西是你的，所以某样东西指向你。说 Post 用户没有多大意义`has_one`......

一个帖子只属于一个博客就足够了。你仍然可以`current_user.posts`像你已经做的那样通过如何在用户模型中设置关系来做一些事情......

我建议阅读以下链接[http://guides.rubyonrails.org/association_basics.html](http://guides.rubyonrails.org/association_basics.html) http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T06:00:42.690

Post 模型中 :blog_id 的验证是完美的。

```
@post = current_user.blogs.find(params[:post].delete(:blog_id)).posts.build(params[:post]) 
```

:blog_id 已从 params[:post] 中删除，但让我们换个角度来看。

```
@blog = current_user.blogs.find(params[:post].delete(:blog_id))
@post = @blog.build(params[:post]) 
```

params[:post] 没有 :blog_id，但是 build 方法会自动将 blog_id 分配给 @blog.id。这就是 :blog_id 没有出现错误的原因。

如果您想避免批量分配警告，您可以使 :blog_id 属性可访问。

# oop - 当有 Car 类时，是否应该是可转换的子类 Car？

> ID：10273031
> 
> 赞同：-3
> 
> 时间：2012-04-22T23:19:23.107
> 
> 标签：oop, uml, ooad

比方说，如果在我们的对象设计中，已经有一个`Car`类，现在有一些汽车对象就是敞篷车。

我们可以定义另一个 class`Convertible`和 subclass `Car`，但是假设我们稍后创建一个 class that is `FourWheelDrive`that 也是 subclasses `Car`，然后，如果我们有 a `FourWheelDrive`that is also a `Convertible`，那么我们该如何处理呢？

上面的设计与其他设计相比如何，它是类`isConvertible`中的布尔值，`Car`类中`isFourWheelDrive`也是布尔值`Car`，就像类的标志或属性一样`Car`。所以在这种情况下我们不会定义额外的类。

**更新：在一个真实的例子**中，在我们的项目中，有一个`Credential`类存储用户的信息：user_id、encrypted_pa​​ssword、email_address 等。当我们允许通过 Facebook、Gmail、Yahoo、MySpace（使用 JanRain）登录时，同事建议添加`FacebookCredential`, `GmailCredential`, `YahooCredential`, 所有这些子类`Credential`. 我有点不知所措，有这么多类，当你看到一个方法时，你必须看看是子类覆盖了它还是基类的方法。我会使用一个代码来告诉它是哪个凭据提供者（Facebook、Gmail 等），并使用这个提供者代码来做适当的事情。（例如，有些提供商已经验证了电子邮件地址，有些则没有）。所以我只是不知道我同事的方法是否更合适或更复杂。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T23:24:39.127

[您可能希望通过使用http://en.wikipedia.org/wiki/Strategy_pattern](http://en.wikipedia.org/wiki/Strategy_pattern)采取不同的方法。 您可以为不同类型的汽车定义不同的行为，因此您没有很多子类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T23:25:25.130

您暗示您使用的语言不支持多重继承。语言是否支持接口？你可以有一个基础抽象类`Car`。（抽象，因为人们从不构建“汽车”，而是构建汽车的特定实现。）然后继承抽象基类的类的实例可以实现公共接口：

*   `IConvertible`
*   `IFourWheelDrive`
*   `IHybrid`
*   等等...

这个想法是抽象基类定义了*最*简单的东西。接口定义了它是什么*类型*，当然可以有重叠。这些接口将包含特定于该类型的操作和属性。（ An`IConvertible`将具有不可转换的属性和方法，与 an`IHybrid`等相同。）然后特定的实现可以为整个事物添加自己独特的风格。

如您所知，这是一个人为的例子。所以一切都是猜想。但是对于这个特殊的理论实现，我会选择接口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T23:30:30.740

除了您对也是敞篷车的四轮驱动汽车的担忧之外，请考虑以下事项：

*   都是敞篷车吗？
*   所有的车辆都是四轮驱动车吗？

对我来说，这类问题指向的是汽车的这些属性，它们没有定义类型。从某种意义上说，它们与颜色或门的数量等没有什么不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T23:44:53.263

它基本上归结为一个问题，您是否需要/想要根据它是敞篷车还是四轮驱动来更改该类的*功能。*例如，如果您需要/想要拥有一辆敞篷车`raise_top`和一辆四轮驱动车，那么您几乎需要使用继承来添加具有这些的类。在这种情况下，是的，敞篷四驱车很有可能同时继承敞篷车和四轮驱动车型。因此，如果您在 C++ 中这样做，这些类可能应该虚拟继承自（或任何您命名的基类），并且在 Java 之类的东西中，它们几乎需要是接口而不是类。`lower_top``lock_hubs``unlock_hubs``automobile`

另一方面，如果您只需要能够找出特定车辆是否可转换和/或 4 轮驱动，那么类中的简单布尔（或枚举）字段应该是完全足够的。

# cocos2d-iphone - cocos2d 移除场景/场景转换

> ID：10273039
> 
> 赞同：1
> 
> 时间：2012-04-22T23:20:35.257
> 
> 标签：cocos2d-iphone, transition

[我使用菜单教程](http://www.iphonegametutorials.com/2010/09/07/cocos2d-menu-tutorial/)中的基本代码启动了我的应用程序。以这种方式，我所有的“屏幕”（只有 5 个）都作为 CCLayer 类的扩展来实现，并且我有一个共享的 + 场景管理器，它通过将我的图层类作为子类添加到新场景中来工作，然后使用导演运行或替换当前正在播放的场景：

```
+(void) goMenu{
    // \/---------- Issue right here, next line:
    CCLayer *layer = [MenuLayer node];
    [SceneManager go: layer];
}

+(void) go: (CCLayer *) layer{
    CCDirector *director = [CCDirector sharedDirector];
    CCScene *newScene = [SceneManager wrap:layer];
    if ([director runningScene]) {
        [director replaceScene: newScene];
    }else {
        [director runWithScene:newScene];
    }
}

+(CCScene *) wrap: (CCLayer *) layer{
    CCScene *newScene = [CCScene node];
    [newScene addChild: layer];
    return newScene;
} 
```

我遇到的问题如下。假设我有 2 层——“MenuLayer”和“GameLayer”。我从 MenuLayer 开始，后来`[SceneManager go:[GameLayer node]]`用于过渡到 GameLayer。在 GameLayer 中，如果我 goMenu 应用程序以“NSInternalInconsistencyException”终止，原因是：“已添加子项。它不能再次添加'在指示的地方。我认为发生这种情况是因为我试图在图层的初始化代码中添加一些子精灵，并且我正在重新添加它们。

我第一次尝试调试是在我所有层`[self removeAllChildrenWithCleanup:YES];`的`onExit`代码中调用。那并没有解决问题。我添加了一些调试日志，发现在脚本爆炸之前执行的最后一行是指示的那一行`[myLayerClass node];`。图层类中的初始化代码根本不会被执行——因此它不可能是导致问题的精灵之一或添加的其他子元素。再次——请记住，当我第一次尝试打开任何场景时，一切正常。它正在回到当前存在问题的开放场景。

所以我尝试了一种不同的方法——在 Cocos2D Hello world 中使用的方法。我通过添加如下定义的单例 +(id) 场景方法修改了所有图层类：

```
+(id) scene
{
    CCScene *scene = [CCScene node];    
    myLayerClass *layer = [myLayerClass node];
    [scene addChild: layer];
    return scene;
} 
```

在dealloc中添加了一个`[super dealloc]`，并将我所有的init代码封装在：

```
-(id) init
{
    if( (self=[super init] )) {
        // All init code here....
    }
} 
```

当然，`goLayerName`场景管理器中的所有单例方法都替换了它们的内容以匹配这个——例如：

```
+(void) goMenu {
    //CCLayer *layer = [MenuLayer node];
    //[SceneManager go: layerMenu];
    CCDirector *director = [CCDirector sharedDirector];
    if ([director runningScene])
        [director replaceScene:[MenuLayer scene]];
    else 
        [director runWithScene:[MenuLayer scene]];
} 
```

我想这就是 Cocos2D 的 hello world 的工作方式，它一定很好。此外，由于我的每个场景都将单独创建一次（因此每个图层都将单独创建一次）。一点效果都没有！我第一次访问任何场景时，它都会按预期运行。每当我尝试导航回任何现有场景时，都会收到上面提到的错误。

我试着在 SO 周围摸索，[发现了这个](https://stackoverflow.com/questions/4816051/proper-cocos2d-scene-restart)，但我不确定如何正确实现它；我也不完全确定这是否能解决问题——因为症状不同（他只是得到一个粉红色的屏幕，而我的应用程序终止了）。

任何援助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T04:52:55.333

对于任何对此问题感兴趣的人，我都能够解决这个问题。

总之，您添加的孩子的任何孩子都不会被释放`releaseAllChildrenWithClenup`。该函数只会释放直接子级，因此您有责任自己释放任何嵌套的子级。

在我的游戏中，我有一些角色，他们的眼睛嵌套在头部精灵中（这样我就可以移动/旋转头部）。眼睛有自己的动画循环，但我希望它们与头部一起变换。所有这些都奏效了，但由于我在 init 中有一行代码，基本上`[headSprite addChild:eyeSprite];`，我还必须添加`[headSprite removeChild:eyeSprite];`onExit 代码以将其分离，然后**也**`releaseAllChildrenWithClenup`删除所有 n=1 级别的子级。

一旦处理完毕，一切都像宣传的那样工作。

# javascript - 如何从滚动列表中的选定项目生成滚动列表

> ID：10273042
> 
> 赞同：-2
> 
> 时间：2012-04-22T23:21:17.140
> 
> 标签：javascript, perl

我试图建立一个表格。perl CGI 生成了一个滚动列表，perl CGI 也将提取和处理项目。但是，我坚持进一步改进这种形式。因为对于某些物品，也有不同的处理方式。我想要的是，当用户单击此滚动列表的某个项目时，它将生成另一个滚动列表或弹出列表以供更多选择。并且用户可以从这个滚动列表或弹出列表中进一步选择，选择将被Perl提取和处理。我知道这个客户端工作可能必须由 javascript 完成。我知道一些javascript，至少可以理解其中编写的大部分代码，但是我没有编写它们来处理这种事件驱动条件并将结果与​​Perl CGI结合的经验。

有人可以告诉我如何使用 javascript 做到这一点吗？谢谢你。小宽

例如：我有一个 Perl CGI 的滚动列表：

```
print scrolling_list(-name=>"animals",-values=>["dog","cat"],-labels=>{dog=>'dog',cat=>'cat'});

#This will generate a scrolling list of "dog" and "cat". What I want is when a user click on dog to make a selection, this scrolling list will generate another scrolling list or pop-up list such as:

print popup_menu(-name=>"action", -values=>['walking','training'],-labels=>{walking=>'walking the dog',training=>'training the dog'}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:22:20.050

良好的做法规定*必须在**没有 JavaScript*的情况下访问表单。因此，我们不是在用户选择某物时生成新的表单片段，而是*预先生成**所有*表单片段并使用 JavaScript 隐藏它们，当用户选择某物时，它变得不隐藏。

 *```
use CGI qw();
my $c = CGI->new;
print
    $c->header('text/html'),
    $c->start_html(
        -script => [
            { -src => 'https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js', },
            q<
                function hide_all () {
                    jQuery('#dog,#cat').hide();
                }
                jQuery(document).ready(function() {
                    hide_all();
                    jQuery('select[name="animals"]').click( function(e) {
                        hide_all();
                        jQuery('#' + jQuery(e["target"]).val()).show();
                    });
                });
            >,
        ],
    ),
    $c->scrolling_list(
        -name   => 'animals',
        -values => [qw(dog cat)],
        -labels => {dog => 'the dog', cat => 'the cat'},
    ),
    $c->popup_menu(
        -id     => 'dog',
        -name   => 'action1',
        -values => [qw(walking training)],
        -labels => {walking => 'walking the dog', training => 'training the dog'},
    ),
    $c->popup_menu(
        -id     => 'cat',
        -name   => 'action2',
        -values => [qw(playing feeding)],
        -labels => {playing => 'playing with the cat', feeding => 'feeding the cat'},
    ),
; 
```*

# objective-c - “unsigned int”打印为负数？

> ID：10273047
> 
> 赞同：5
> 
> 时间：2012-04-22T23:22:53.107
> 
> 标签：objective-c

我取一个整数，在本例中为 192，并将其左移 24 个空格。似乎是前导 1 导致它变为负数。

```
unsigned int i = 192;
unsigned int newnumber = i << 24;
NSLog(@"newnumber is %d",newnumber); 
```

我期待 3,221,225,472 但我得到 -1,073,741,824（为清楚起见添加了逗号）

无符号整数不应该是负数吧？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-22T23:24:38.563

因为您将其*重新解释*`NSLog`为有符号整数。您应该使用`%u`来查看无符号值。

具有可变数量参数的函数无法确定您传递的值的类型。这就是为什么`NSLog`依赖格式字符串来了解您传递了多少参数以及它们的类型。如果您传递的类型与相应的格式说明符不匹配，`NSLog`则会信任说明符并根据它解释您的数据。现代编译器甚至可能会警告您。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-22T23:24:35.400

你想做`NSLog(@"newnumber is %u",newnumber);`

`%d`将其转换回带符号的 int。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-04-22T23:25:04.753

`%d`表示“有符号整数”；用于`%u`“无符号整数”。

# .htaccess - .htaccess 重写 url 会破坏 css/javascript/其他文件

> ID：10273050
> 
> 赞同：4
> 
> 时间：2012-04-22T23:23:31.950
> 
> 标签：.htaccess

我的 .htaccess 文件如下所示：

```
RewriteEngine On
RewriteRule ^([^/]*)$ index.php/?node=$1 [L] 
```

现在当我包含我的css文件时：

```
<link href="sitewide.css" rel="stylesheet" type="text/css" /> 
```

它不起作用。javascript也是如此。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-21T12:19:37.927

我一直在寻找一个简单的解决方案，它不会让我为所有相对路径（如 imgs、css、javascript...

所以在这里，在`<head>`你有问题的页面的标签之间添加这个：

`<base href='http://www.mydomain.com/'>`

这将使您的相对路径链接将从该基本链接开始。就那么简单。

该`<base>`标记指定文档中所有相对 URL 的基本 URL/目标。将`<base>`标签作为元素内部的第一个`<head>`元素，以便头部中的其他元素使用来自该`<base>`元素的信息。

它对你有用吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T23:26:39.533

考虑只重写不存在的路径，例如，如果文件或目录存在 - 不要重写它。

Wordpress 使用它来重写他们的永久链接，我认为这是一个很好的例子：

```
# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>
# END WordPress 
```

如您所见，它们具有重写条件以排除现有文件/目录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T23:25:09.060

该`.htaccess`文件正在重定向任何不包含`/`to 的内容`index.php`。考虑重写它以仅捕获您*真正*需要的路径。

或者，您可以使用指示为“Last”( ) 的规则开始您的文件`L`：

```
RewriteRule ^/javascript.js$ $0 [L] 
```

这将迫使 Apache 评估此 RewriteRule，然后停止该请求的所有其他规则。因此，您的`.js`or`.css`文件将被正确提供，但您必须在`.htaccess`每个此类文件中创建一个新条目。我**强烈**推荐我的第一个建议。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T23:26:13.587

试试这个：

```
RewriteEngine On   
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^([^/]*)$ index.php/?node=$1 [L] 
```

# java - 无法在 Netbeans JavaFX 项目中集成使用 SceneBuilder 生成的 FXML

> ID：10273062
> 
> 赞同：2
> 
> 时间：2012-04-22T23:26:13.603
> 
> 标签：java, netbeans, javafx-2, fxml, scenebuilder

我使用场景生成器生成了 FXML。现在的问题是当我尝试集成它时，我得到了一堆异常行。还有其他人偶然发现这个问题吗？

```
Apr 23, 2012 2:33:40 AM javafx.fxml.FXMLLoader logException
SEVERE: The following error occurred at line 31 in file /C:/Users/gulcoza/Documents/NetBeansProjects/Commerce/build/classes/commerce/Login.fxml[Ljava.lang.StackTraceElement;@1d59bc95
Exception in Application start method
java.lang.reflect.InvocationTargetException
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.javafx.main.Main.launchApp(Main.java:453)
    at com.javafx.main.Main.main(Main.java:537)
Caused by: java.lang.RuntimeException: Exception in Application start method
    at com.sun.javafx.application.LauncherImpl.launchApplication1(Unknown Source)
    at com.sun.javafx.application.LauncherImpl.access$000(Unknown Source)
    at com.sun.javafx.application.LauncherImpl$1.run(Unknown Source)
    at java.lang.Thread.run(Thread.java:722)
Caused by: javafx.fxml.LoadException: java.lang.InstantiationException: java.net.URL
    at javafx.fxml.FXMLLoader$InstanceDeclarationElement.constructValue(Unknown Source)
    at javafx.fxml.FXMLLoader$ValueElement.processStartElement(Unknown Source)
    at javafx.fxml.FXMLLoader.processStartElement(Unknown Source)
    at javafx.fxml.FXMLLoader.load(Unknown Source)
    at javafx.fxml.FXMLLoader.load(Unknown Source)
    at javafx.fxml.FXMLLoader.load(Unknown Source)
    at javafx.fxml.FXMLLoader.load(Unknown Source)
    at commerce.Commerce.start(Commerce.java:25)
    at com.sun.javafx.application.LauncherImpl$5.run(Unknown Source)
    at com.sun.javafx.application.PlatformImpl$4.run(Unknown Source)
    at com.sun.javafx.application.PlatformImpl$3.run(Unknown Source)
    at com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
    at com.sun.glass.ui.win.WinApplication.access$100(Unknown Source)
    at com.sun.glass.ui.win.WinApplication$2$1.run(Unknown Source)
    ... 1 more
Caused by: java.lang.InstantiationException: java.net.URL
    at java.lang.Class.newInstance0(Class.java:357)
    at java.lang.Class.newInstance(Class.java:325)
    ... 15 more
Java Result: 1 
```

我认为 FXML 很好，因为它可以从 SceneBuilder 预览它。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T12:44:44.550

回复晚了，请原谅。

```
 <stylesheets>
    <URL value="@style.css" />
  </stylesheets> 
```

有错误的行是 URL 行。它由 SceneBuilder 生成。

PS：还将 JavaFX 版本更新到 2.2+ 应该可以解决这个问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-16T16:08:31.490

您还可以在 SceneBuilder 中从 FXML 中删除控制器，然后手动添加控制器 java 文件中存在的所有 fxID（使用 @FXML 注释）。在scenebuilder中重新添加控制器类后，仍然无法识别fxID，但是fxid =“fxid name”将被添加到FXML文件本身，因此当您运行javaFX程序时它将起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T14:43:15.133

好吧，如果没有您的 fxml 文件或代码，就很难理解任何事情。但无论如何：这个错误是发生在您的所有项目中还是仅发生在这个项目中？如果不仅如此 - 也许您使用旧版本的 javafx sdk 或其他一些全局配置是错误的。如果只有这个有这个问题 - 尝试从 FXML 文件中逐个删除组件，以本地化问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-03T20:28:21.260

好吧，不是如何加载 FXML，而是这样我犯了那个错误

```
primaryStage.setTitle ("FXML TableView Example");
    primaryStage.setScene
    ((Scene) FXMLLoader.load (getClass (). GetResource ("fxml_tableview.fxml")));
    primaryStage.show(); 
```

这样，如果我运行：

```
Parent FXMLLoader.load root = (getClass (). GetResource ("Prueba.fxml"));
     primaryStage.setTitle ("FXML TableView Example");
     primaryStage.setScene (new Scene (root));
     primaryStage.show (); 
```

希望这可以帮助。

# vba - Excel VBA函数根据函数名称生成#REF？

> ID：10273070
> 
> 赞同：5
> 
> 时间：2012-04-22T23:28:11.527
> 
> 标签：vba, excel

我正在使用 Excel 2010，并在电子表格的模块中定义了以下 3 个函数。

```
Option Explicit

Public Function AAA() As Double

    AAA = 3
End Function

Public Function AAA2() As Double

    AAA2 = 4
End Function

Public Function AAA3AAA() As Double

    AAA3AAA = 5
End Function 
```

当我通过在 3 个相邻单元格中输入以下内容来引用电子表格中的三个函数时

```
=AAA()
=AAA2()
=AAA3AAA() 
```

第二个函数生成#REF 错误。其他功能按预期工作。有谁知道为什么会这样？我问的原因是当我从 Office XP 升级到 Office 2010 时，我的一些宏停止工作。经过相当多的试验，函数名称本身似乎是罪魁祸首？在 Office-XP 的 Excel 中未发生该错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T23:35:56.330

同样的事情发生在我身上。我注意到的是，与其他两个不同，“AAA2”可能是**单元格地址**的文本。我怀疑这就是问题所在。

# jquery - Django 和 jquery - 在 .load() 表单之后不再有效

> ID：10273071
> 
> 赞同：0
> 
> 时间：2012-04-22T23:28:11.547
> 
> 标签：jquery, django, forms, load, submit

我正在使用 jquery .load() 将 django 模板加载到弹出 div 中

我使用的模板有一个表单，当我加载模板时，表单不再有效，但是当我通过 url 访问模板时，表单是有效的。

谁能想到在 jquery 加载后表单不再有效的任何原因？

这是我的表格：

```
def createrecipe(request):
    if not request.user.is_authenticated():
        return HttpResponseRedirect('/index/')
    else:
        if request.method == 'POST':
            form = RecipeForm(request.POST)
            if form.is_valid():
                recipe = form.save(commit=False)
                recipe.original_cookbook = request.user.cookbooks.all()[0]
                recipe.pub_date = datetime.datetime.now()
                recipe.save()
                user = request.user
                cookbooks = user.cookbooks
                cookbook = cookbooks.all()[0]
                cookbook.recipes.add(recipe)
                return HttpResponseRedirect('/account')
        else:
            form = RecipeForm()

        return render_to_response('cookbook/createrecipe.html',
                                    {'form':form},
                              context_instance=RequestContext(request)) 
```

这是我的表单模板：

```
{% block content %}
<div id="createform">
<h1>Create New Recipe</h1>
    <form action="." method="POST">
        <table>
            {% csrf_token %}
            {{ form.as_table }}
        </table>
        <p><input type="submit" value="Submit"></p>
    </form>
</div>
{% endblock %} 
```

这是加载函数：

```
$(document).ready(function(){
    $(".create").on("click", function(){
        $("#popupContact").load("/cookbook/createrecipe #createform");
    });
}); 
```

谢谢你，

零食鱼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T23:34:53.390

这是您通过 jQuery 或默认表单行为执行的提交按钮，我认为您的代码看不到加载的表单，您应该在处理 ajax 数据时使用 jquery 的 .on() 方法。[http://api.jquery.com/on/](http://api.jquery.com/on/)

# ruby - “Ruby-esque” if else 条件语句

> ID：10273076
> 
> 赞同：2
> 
> 时间：2012-04-22T23:29:43.663
> 
> 标签：ruby

我目前正在阅读[The Ruby Programming Language](http://shop.oreilly.com/product/9780596516178.do)，但我不确定如何正确阅读 Ruby 风格的 if else 语句。你能帮我在像这样的常规 if-else 语句的第二个代码块中编写下面的 ruby​​ 代码吗？

```
if some_condition
  return x
else
  return y
end 
```

所以我不确定的红宝石代码是这些。

```
minimum = if x < y then x else y end

max = x > y ? x : y 
```

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T23:32:11.277

您似乎难以使用的两种形式都使用了 Ruby 从函数式编程范式中获取的一个想法：即，*一切都是表达式，因此返回一个值*。甚至对于条件语句也是如此，像 Java 这样的语言并不真正支持这种想法（例如：

```
public boolean test() {
  boolean x = if (1 > 2 ) { false; } else { true; };
  return x;
} 
```

只是在语法上无效）。

您可以在 Ruby 终端中看到：

```
will_be_assigned_nil = false if (1 > 2) # => nil
will_be_assigned_nil # => nil 
```

所以，对于你的问题。第一个可以这样改写：

```
if x < y
  mininum = x
else
  minimum = y
end 
```

第二种类似于其他语言中的三元运算符，相当于：

```
if x > y
  max = x
else
  max = y
end 
```

在尝试理解语言的结构时，记住语言的根源和遗产是有帮助的。Ruby 与 Perl 共享“不止一种方法”的理念，惯用的 Ruby 代码通常高度强调优雅。

“后表达”式条件句就是一个很好的例子。如果我在我的方法开始时有保护表达式，我经常会这样写：

```
raise "Pre-condition x not met" unless x # (or "if !x" , preference thing)
raise "Pre-condition y not met" unless y # etc., etc. 
```

代替

```
if !x
  raise "Pre-condition x not met"
end
if !y
  raise "Pre-condition y not met"
end 
```

# ruby - Rails 3 中的多态回形针模型

> ID：10273077
> 
> 赞同：1
> 
> 时间：2012-04-22T23:29:54.937
> 
> 标签：ruby, ruby-on-rails-3, polymorphism, paperclip

我正在建立一个名为的模型`Wall`，其中有很多`Assets`. 资产模型是回形针模型。一切似乎都很好，但它不会呈现表单。在`walls controller`I am building 5 assets with the line`5.times { @wall.assets.build }`中。该行在`ap @wall.assets.build`控制台中很好地吐出 5 条资产记录。我已经包含了下面的代码。我看不出我做错了什么。有人知道吗？

墙.rb

```
class Wall < ActiveRecord::Base
  has_many :assets, :as => :assetable
  accepts_nested_attributes_for :assets, :allow_destroy => true
end 
```

资产.rb

```
class Asset < ActiveRecord::Base
  belongs_to :assetable, :polymorphic => true
  attr_accessible :assetable_id, :assetable_type
  has_attached_file :asset, :styles => { :medium => "300x300>", :thumb => "100x100>" }
end 
```

wall_controller.rb

```
 def new
    @wall = Wall.new
    5.times do
      @wall.assets.build
    end
    ap @wall.assets
    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @wall }
    end
  end

  def edit
    @wall = Wall.find(params[:id])
    5.times do
      @wall.assets.build
    end
  end 
```

_form.html.haml

```
= form_for @wall, :html => { :class => 'form-horizontal', :multipart => true } do |f|
  .control-group
    = f.label :name, :class => 'control-label'
    .controls
      = f.text_field :name, :class => 'text_field'
  - f.fields_for :assets do |asset|
    = asset.file_field :asset
  .form-actions
    = f.submit nil, :class => 'btn btn-primary'
    = link_to t('.cancel', :default => t("helpers.links.cancel")), walls_path, :class => 'btn' 
```

干杯

托尼

# ios - iPhoto 中显示另一个滑动工具栏的按钮

> ID：10273079
> 
> 赞同：0
> 
> 时间：2012-04-22T23:30:24.100
> 
> 标签：ios, ios5, toolbar, iphoto, uitoolbaritem

我怎样才能开发一个像这样的工具栏，有一个按钮，当它被按下时会显示另一个工具栏（滑动到当前工具栏的顶部）？这是来自 Apple 的 iPhoto 应用程序的屏幕截图。

[http://i.stack.imgur.com/dKYZq.png](http://i.stack.imgur.com/dKYZq.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:01:31.810

我使用以下方法使其工作（**免责声明：这可能会违反 HIG！**）：

1.  我添加了一个新的基本 UIViewController。
2.  我在 UIViewController 的视图中添加了一个 UIToolbar。我将此 UIToolbar 连接到我的 UIViewController 中名为“BaseToolbar”的属性。
3.  在“BaseToolbar”中，我添加了一个按钮。我将此按钮连接到我的 UIViewController 中名为“AddPressed:”的 IBAction。
4.  我在 UIViewController 的 xib 中添加了一个 UIToolbar，但不在***UIViewController 的视图中。***我只是将它添加到设计表面上。我将此 UIToolbar 连接到我的 UIViewController 中名为“SecondToolbar”的属性。
5.  在“SecondToolbar”中，我添加了一个按钮。我将此按钮连接到我的 UIViewController 中名为“TrashPressed:”的 IBAction。

我使用了以下代码：

```
- (IBAction)AddPressed:(id)sender {
    CGRect secondCurrRect = [[self SecondToolbar] frame];
    [[self SecondToolbar] setFrame:CGRectMake(0, -1 * secondCurrRect.size.height, secondCurrRect.size.width, secondCurrRect.size.height)];
    [[self view] addSubview:[self SecondToolbar]];
    [[self view] bringSubviewToFront:[self SecondToolbar]];
    [UIView animateWithDuration:1.0
                     animations:^(void){
                         [[self SecondToolbar] setFrame:CGRectMake(0, 0, secondCurrRect.size.width, secondCurrRect.size.height)];
                     }];
}
- (IBAction)TrashPressed:(id)sender {
    CGRect secondCurrRect = [[self SecondToolbar] frame];
    [UIView animateWithDuration:1.0
                     animations:^(void){
                         [[self SecondToolbar] setFrame:CGRectMake(0, -1 * secondCurrRect.size.height, secondCurrRect.size.width, secondCurrRect.size.height)];
                     }
                     completion:^(BOOL finished) {
                         [[self SecondToolbar] removeFromSuperview];
                     }];
} 
```

使用该代码，新的 UIToolbar在“基本”UIToolbar***顶部***滑动开/关。

* * *

***编辑/更新***

让我们尝试不同的策略。 **（这假设您`UIToolbar`在设计时将对象添加到您的 xib）**

1.  将 Toolbar #1（始终显示在屏幕上的工具栏）添加到视图的顶部，并根据需要放置它。
2.  在 Toolbar #1 下方添加 Toolbar #2（上/下滑动的那个），并使用您想要的按钮构建它。
3.  将以下代码行放入您的`-(void)viewDidLoad`方法中（这会将第二个工具栏移出屏幕）：

* * *

```
[[self Toolbar2] setFrame:
    CGRectMake(0,                                    // origin.x
               -[[self Toolbar2] frame].size.height, // origin.y
               [[self Toolbar2] frame].size.width,   // size.width (remains the same)
               [[self Toolbar2] frame].size.height)  // size.height (remains the same)
]; 
```

然后，使用上面的代码，但跳过对`addSubview:`and的调用`removeFromSuperview`。

现在这有意义吗？

# android - 在 Intent 将用户带到主屏幕后，您的应用程序还能做什么？

> ID：10273081
> 
> 赞同：0
> 
> 时间：2012-04-22T23:30:31.260
> 
> 标签：android, android-intent, homescreen

你什么时候需要一个带你到主屏幕的 Intent？因为这是否意味着您不再可以控制应用程序？

例如，作为开发人员，您在执行以下代码后可以做什么：

```
Intent startMain = new Intent(Intent.ACTION_MAIN);
startMain.addCategory(Intent.CATEGORY_HOME);
startMain.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
startActivity(startMain); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T03:34:50.273

你可能认为这是一个更棘手的问题。首先，在现实生活中你通常不会这样做。如果您完成了活动，则调用它的 finish() 方法。android 系统会将您返回到您从中调用活动的活动，如果您从主屏幕启动它，它将是您的主屏幕。但是，如果您从其他应用程序启动它，例如查看某个联系人地址的地图，当您在地图活动上“完成（）”时，您将返回到您的联系人应用程序。

当您启动具有意图的活动时，根据该活动的确切性质，您可能会在您的活动正在运行的进程中打开该活动的新实例，或者您可能只是将一个已经在运行的不同进程带到前面应用程序/活动。在主屏幕的情况下，我不知道会发生什么，因为我不知道主屏幕是如何被编程为应用程序/活动的，以及它是如何在清单中声明的​​。

对于傻笑，我将您的代码行放在我的一个应用程序的主要活动的 onCreate() 中。我有相当古怪的行为。意图肯定让我离开了我的应用程序，并且似乎破坏了我的应用程序在该过程中运行的过程。（至少在 Eclipse 中，它终止了 ADB 连接，所以我再也看不到它发生了什么。）当我从主屏幕回到我的主要活动时，它有时会回到我的应用程序的主屏幕，有时到我的应用程序的辅助屏幕，有时只是再次弹回主屏幕。我想我的辅助应用程序的其他代码调用意图以某种方式成为我的应用程序“状态”的一部分，以某种方式返回它会在启动家庭活动后以某种方式进入。

显然我在这里胡扯。我会把这个留给其他人，他们可能会在调用意图启动主屏幕而不是使用“finish()”来摆脱活动的情况下真正受益。

# windows-phone-7 - Html 敏捷包解析网站编码 iso-8859-1 真的很烦

> ID：10273083
> 
> 赞同：1
> 
> 时间：2012-04-22T23:31:02.163
> 
> 标签：windows-phone-7, webclient, html-agility-pack

我一直在使用 Html 敏捷包为我的 Windows Phone 应用程序解析这个网站；

首先我使用 webclient 类下载它，然后给出 HtmlDocument 的结果。

iso-8859-1 编码存在一些问题，但 htmlentity.DeEntitize 解决了字母 Öä 显示为 Ö 和 ä 的问题...

但是该文档仍然有一些随机编码的斯堪的纳维亚字符（äö）（显示为：�）。

这些字母使用铬完美显示。

网站是：[http ://reittiopas.tampere.fi/mobile/fi/](http://reittiopas.tampere.fi/mobile/fi/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T09:17:50.373

Windows Phone 仅支持一小组编码，iso-8859-1 不是其中之一！

[要解决这个问题，只需使用Silverlight Encoding Generator](http://www.hardcodet.net/2010/03/silverlight-text-encoding-class-generator)创建编码处理程序，转换文本，然后像现在一样使用 HTML Agility Pack！

# javascript - jQueryUI 设置后无法立即工作

> ID：10273084
> 
> 赞同：0
> 
> 时间：2012-04-22T23:31:08.953
> 
> 标签：javascript, jquery-ui, jquery-ui-sortable, jquery-ui-draggable

我想在我的项目中集成 jQueryUI 可拖动和可排序，并使用 mousedown 和第一个 mousemove 事件之间的时间差来区分它们。我的部分代码如下：

```
if (self.mouse.endTime - self.mouse.startTime < 700){                   
                    var deltaX = self.mouse.startX - event.pageX,
                        deltaY = self.mouse.startY - event.pageY;
                    // Drag down
                    if(Math.abs(deltaX) < Math.abs(deltaY) && deltaY < 0){
                        $(self.el).draggable({disabled: false});
                        $(self.el).find('li').draggable({disabled: true});
                        $(self.el).sortable({disabled: true});
                        $(self.el).draggable({axis: 'y'});
                        $(self.el).draggable({revert: true});
....
else {
                $(self.el).sortable({disabled: false});
                $(self.el).draggable({disabled: true}); // global dragging
                $(self.el).children().draggable({disabled: true}); // item dragging
                $(self.el).sortable({containment: $(self.el).closest('.content')});
            } 
```

但事情并不如我所料。每次我开始拖动元素时，firebug 中显示的 html 都有正确的可拖动/可排序类设置，但它对当前的拖动事件无效。例如，第一次拖动时，虽然 html 已经有相应的类设置，但该元素既不可拖动也不可排序。第二次拖动时，它将是可拖动或可排序的。如果您为当前拖动事件设置元素可拖动/可排序，则下次拖动它时它将起作用。总之，您期望当前事件的可拖动/可排序事件只会对下一个事件有效。我想知道这是 jQueryUI 应该是什么，还是我的代码有问题。我应该如何解决它？

# ios - 在 iPad 上，要保留当前主视图的位图，Core Graphics 与 cocos2D 和 OpenGL ES 相比如何？

> ID：10273086
> 
> 赞同：0
> 
> 时间：2012-04-22T23:31:45.160
> 
> 标签：ios, opengl-es, cocos2d-iphone, core-graphics

听说对于单视图应用来说，最好将当前主视图的内容保存在一个位图中，我们在这个位图上绘制额外的东西，当需要做的`drawRect`时候（被iOS调用时），然后我们就显示位图。

Core Graphics 真的有能力处理它吗？但是既然 cocos2D 和 OpenGL ES 在处理图形时都被认为是超快的，那么使用其中一个对上述情况有好处，使其更流畅还是与使用 Core Graphics 没有什么不同？

（或者也许它对应用程序的类型很重要，例如简单的绘图程序，而不是刷新 30fps 或 60fps 的游戏？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T23:56:24.883

这取决于您是否需要绘制每一帧并更改您的绘图。

查看 Apple 提供的[AccelerometerGraph](http://developer.apple.com/library/ios/#samplecode/AccelerometerGraph/Introduction/Intro.html#//apple_ref/doc/uid/DTS40007410-Intro-DontLinkElementID_2)示例代码。这是一种使用 Core Animation 层和 Core Graphics（Quartz 绘图）一起在许多帧上进行连续绘图的方法，而无需重绘已经绘制的内容。

Cocos2D 较少用于绘图，而更多用于基于精灵的动画，其中您的精灵是您导入的预渲染图像（png 等）。它同时处理多个图像的速度非常快，并提供了批处理节点，用于将所有图像合并到一个单一的 Open GL 调用中。

Quartz（核心图形）本身通常不是连续绘图的最佳选择，但如果需要的话，它更适合生成静态图像，然后再四处移动。

# regex - 拆分日期正则表达式

> ID：10273088
> 
> 赞同：0
> 
> 时间：2012-04-22T23:32:16.517
> 
> 标签：regex, pipe, yahoo

您好我正在尝试将日期 YYYY-MM-DD 的格式拆分为雅虎管道中的单独变量。

我可以让正则表达式在一年中工作，但我在努力获得月份和日期。

我一年的正则表达式：

```
(?<=\d{4}).* 
```

雅虎管道使用我认为的替换正则表达式，所以我需要选择年（跳过）日来获取月份。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T23:43:35.293

正则表达式`(\d{4})-(\d{2})-(\d{2})`匹配并捕获日期的元素。我不确定您将如何在 Yahoo Pipes 中使用它，因为我自己从未使用过它，但正则表达式应该可以帮助您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T23:52:26.073

`(?<=\-).*(?=\-)`仅匹配月份。

# c++ - 在 Linux 上编译时出现未定义引用的奇怪错误

> ID：10273089
> 
> 赞同：-1
> 
> 时间：2012-04-22T23:32:23.303
> 
> 标签：c++, g++

> **可能重复：** [为什么模板只能在头文件中实现？](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)

在 Linux 上编译 g++ 4.5.5 时出现以下错误，而据称我的代码在 Windows 上运行良好。

```
A.o: In function `A::NewObj(int)':
A.cpp:(.text+0x39): undefined reference to `List<A>::Add(A*)'
collect2: ld returned 1 exit status
make: *** [program] Error 1 
```

我不知道我的代码有什么问题。我不确定我是否正确声明了对象 list_A。

文件：

### 啊

```
#ifndef A_H
#define A_H

class A
{
public:
    int key;
    A() { key=0; }
    A(int i) { key = i; }
    void NewObj(int i);
};

#endif 
```

### A.cpp

```
#include "A.h"
#include "List.h"

static    List<A> *list_A = new List<A>();

void A::NewObj(int i)
{
    A *nobject = new A(i);
    list_A->Add( nobject );

} 
```

### 列表.h

```
#ifndef LIST_H
#define LIST_H

template<typename Objct>
class Node
{
public:
    Objct* datapiece;
    Node *next, *previous;

    Node() { next = previous = 0; }
    Node ( Objct *object, Node *n = 0, Node *p = 0)
    {
        datapiece = object;
        next = n; previous = p;
    }
};

template<typename Objct>
class List
{
public:
    List() { head = tail = 0; }
    void Add( Objct* );
protected:
    Node<Objct> *head, *tail;
};

#endif 
```

### 列表.cpp

```
#include "List.h"
#include <iostream>

template<typename Objct>
void List<Objct>::Add( Objct *o )
{
    int i =5;
    Node<Objct> *nnode = new Node<Objct>(o);
    if ( o->key < i )
    std::cout << "Ok" << std::endl;
} 
```

### 主文件

```
#include <iostream>
#include "A.h"
#include "List.h"

int main()
{
    A *magazyn = new A();
    magazyn->NewObj(6);
} 
```

### 生成文件

```
CC=g++
CFLAGS=-c -Wall -pedantic

program: List.o A.o main.o
    $(CC) List.o A.o main.o -o program
A.o: A.cpp List.h
    $(CC) $(CFLAGS) A.cpp
List.o: List.cpp
    $(CC) $(CFLAGS) List.cpp
main.o: main.cpp A.h
    $(CC) $(CFLAGS) main.cpp 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T23:41:45.530

问题是您的模板类`List`需要在每个使用它的编译单元中定义其方法。模板通常不遵循一个标头，一个实现文件的规则。有关更多信息，请参阅此相关问题： [为什么模板只能在头文件中实现？](https://stackoverflow.com/questions/495021/why-can-templates-only-be-implemented-in-the-header-file)

# jquery - JQuery颜色选择器更改十六进制值

> ID：10273091
> 
> 赞同：3
> 
> 时间：2012-04-22T23:33:01.763
> 
> 标签：jquery, hex, color-picker

我正在使用这个颜色选择器[http://www.eyecon.ro/colorpicker](http://www.eyecon.ro/colorpicker)并试图捕获十六进制值，以便我可以在服务器端使用它来存储选定的颜色。

更改默认颜色后，我无法获得所选颜色。

这是我的代码：

```
 var currentHex = '#0000ff';
            alert(currentHex);
            $('#colorSelector').ColorPicker({
                color: currentHex,
                onShow: function (colpkr) {
                    $(colpkr).fadeIn(500);
                    return false;
                },
                onHide: function (colpkr) {
                    $(colpkr).fadeOut(500);
                    return false;
                },
                onChange: function (hsb, hex, rgb) {
                    // every time a new colour is selected, this function is called
                    currentHex = hex;
                    $('#mycolor').val = currentHex;
                }
            }); 
```

html:

```
<div id="colorSelector"><div style="background-color: rgb(62, 62, 189); "></div></div>
<input type="text" maxlength="6" size="6" id="mycolor" value="00ff00"> 
```

这是我的**[演示](http://jsfiddle.net/ZRWEd/)**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T23:38:43.173

```
$('#mycolor').val = currentHex; //wrong syntax 
```

应该

```
$('#mycolor').val(currentHex); 
```

[更新的演示](http://jsfiddle.net/ZRWEd/4/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T23:40:01.913

```
$(document).ready(function() {
    var currentHex = '#0000ff';
    $('#colorSelector').ColorPicker({
        color: currentHex,
        onShow: function(colpkr) {
            $(colpkr).fadeIn(500);
            return false;
        },
        onHide: function(colpkr) {
            $(colpkr).fadeOut(500);
            return false;
        },
        onChange: function(hsb, hex, rgb) {
            $('#colorSelector div').css('backgroundColor', '#' + hex);
            alert(hex);
            $('#mycolor').val(currentHex);
        }
    });

});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T23:41:25.907

这是你的目的吗？

[JSFiddle](http://jsfiddle.net/zHkxT/)

# ios - 让 UITextField 更改 Webview URL

> ID：10273093
> 
> 赞同：3
> 
> 时间：2012-04-22T23:33:10.370
> 
> 标签：ios, xcode, url, uiwebview, uitextfield

我有一个带有 xib 文件的视图控制器。该文件需要有一个 TextField 和一个 Button 以通向另一个具有 Web 视图的视图控制器。我希望通过用户在文本字段中输入的任何内容来更改 URL。例如：

WebView 中的 URL：[http ://www.google.com/](http://www.google.com/) **用户在文本字段中输入足球** WebView 中的新 URL：[http ://www.google.com/football](http://www.google.com/football)

任何帮助都将不胜感激我已经有了我的“主页”导致一个 web 视图我只需要知道需要什么代码去改变 url。

提前致谢。如果需要代码，我可以发布它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T23:50:12.883

您可以使用字符串文字将框的文本传递给 webview。像这样：

```
NSString *stringToPass = [NSString stringWithFormat:@"www.google.com/%@", self.textField.text]; 
```

然后，使用自定义 init 方法将您的字符串传递给新视图：

```
self.viewController = [ViewController alloc]initWithAddress:stringToPass]; 
```

确保`-(id)initWithAddress:(NSString*)address;`在 .h 中声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T00:07:05.833

继续@CodaFi ...

```
// WebViewController.m

@property (strong, nonatomic) NSURL *url;
@property (weak, nonatomic) UIWebView *webView;

//@synthesize, etc.

-(id)initWithAddress:(NSString*)address {

    self = [super init];
    if (self) {
        self.url = [NSURL urlWithString:address];
    }
    return self;
}

- (void)viewWillAppear:(BOOL)animated {

    [super viewWillAppear:animated];

    NSURLRequest *request = [NSURLRequest requestWithURL:self.url];
    [self.webView loadRequest:request];
} 
```

# linux - 查看并选择要从列表中删除的文件

> ID：10273094
> 
> 赞同：4
> 
> 时间：2012-04-22T23:33:19.423
> 
> 标签：linux, bash

我有一堆保存为 png 文件的图形。它们中的大多数不是很有用，但有些非常有用。

我想编写一个脚本，一次显示它们，然后等待我点击 y 或 n。如果我点击n，请删除它。如果没有，请继续下一个。

我遇到了两个问题。

首先，feh 打开一个新窗口，所以我必须按 alt-tab 键回到我的 shell 中才能按 y 或 n。是否可以让 bash 监听任何按键，包括不同窗口中的按键？

其次，我试图使用 read 来监听一个字符，但它说 -n 不是一个有效的选项。不过，同一行在终端中也可以正常工作。

知道怎么做吗？感谢帮助。

```
#! /bin/sh                                                                                                                                                               

FILES=./*.png
echo $FILES
for FILE in $FILES
do
    echo $FILE
    feh "$FILE" &
    CHOICE="none"
    read -p "d to delete, any other key to keep: " CHOICE -n 1 -s
    killall feh
    if [$CHOICE -eq "d"]
    then
        rm $FILE
    fi
done 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T23:43:24.330

这可能只与您的问题相切，但您的脚本设置为使用`/bin/sh`（POSIX shell）执行，但您可能正在`/bin/bash`用作*交互式*终端 shell。`read`根据您使用的外壳，处理方式不同：

这是您的一个命令的输出，`read`三个不同的外壳；`dash`shell 用于我的`/bin/sh`系统，但为了确保它在调用 as`sh`和 as时处理相同`dash`，我运行了两次，每个名称一次：

```
$ bash
$ read -p "d to delete, any other key to keep: " CHOICE -n 1 -s
d to delete, any other key to keep: d
bash: read: `-n': not a valid identifier
$ exit
$ dash
$ read -p "d to delete, any other key to keep: " CHOICE -n 1 -s
d to delete, any other key to keep: d
read: 1: -n: bad variable name
$ 
$ pdksh
$ read -p "d to delete, any other key to keep: " CHOICE -n 1 -s
pdksh: read: -p: no coprocess
$ $ sh
$ read -p "d to delete, any other key to keep: " CHOICE -n 1 -s
d to delete, any other key to keep: d
read: 1: -n: bad variable name
$ 
$ 
```

# jquery - 如何使用 Smooth Div Scroll 改变水平滚动的方向？

> ID：10273098
> 
> 赞同：0
> 
> 时间：2012-04-22T23:33:36.970
> 
> 标签：jquery, direction, smooth-scrolling

我正在使用[Smooth Div Scroll](http://www.smoothdivscroll.com)进入页面并且它可以正常工作（感谢 Thomas Kahn！：P）

我只需要鼠标滚轮滚动，问题是方向：向上滚动时内容向左移动，反之亦然，但这是不自然的。我尝试使用带负数的 mousewheelScrolling 选项（如此处所报告[）](http://www.smoothdivscroll.com/options.html)，但它不起作用。（奇怪的是有两个同名的选项......第二个选项有可能有不同的名字吗？）

如何反转滚动方向？

我很抱歉英语不好 :D

提前感谢您的支持。:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T09:42:16.397

只是为了让您知道-就像您建议的那样，最新版本中的滚动方向已更改。所以现在鼠标滚轮向上滚动使滚轮向左滚动，鼠标滚轮向下滚动使滚轮向右滚动。感谢您对此的意见！

我还扩展了 mousewheelScrolling 选项，让您更好地控制鼠标滚轮事件。有些鼠标同时具有垂直和水平鼠标滚轮滚动功能，现在您决定滚动条应该监听哪些事件。

您可以[在此处找到有关扩展选项的更多信息](http://www.smoothdivscroll.com/options.html#mousewheelScrolling)。

# jquery - 在 JQUERY 中定位 sub ul

> ID：10273102
> 
> 赞同：1
> 
> 时间：2012-04-22T23:34:17.947
> 
> 标签：jquery, jquery-selectors

我试图将一些 html 附加到 id 为 myEventsContainer 的 div 下的 ul（类 sportMatches）中，但我该如何定位它呢？这似乎不起作用：

```
 $(this).parent().parent().appendTo($('#myEventsContainer .sportMatches')); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T23:35:43.287

这里有几个选择

```
$('#myEventsContainer .sportMatches').html('<li>some html</li>'); 
```

或者

```
$('#myEventsContainer .sportMatches').append($('.myhtml')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T23:39:50.633

```
 $('#myEventsContainer .sportMatches').append($(this).parents('#element')); 
```

而不是 .parent().parent() 尝试：`.parents('yourTargetParent')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T23:43:48.383

尝试：

```
$('#myEventsContainer').find('ul.sportMatches').append('<p>Some text</p>'); 
```

# database-design - 是否所有表都具有重要的功能依赖关系？

> ID：10273105
> 
> 赞同：1
> 
> 时间：2012-04-22T23:35:21.243
> 
> 标签：database-design

我问这个问题是因为如果一个表有一个包含所有 is 属性的键，那么该表将具有微不足道的功能依赖性，因为右侧是左侧的子集。例如，我有具有属性 A 和 B 的关系 R。A 和 B 一起是关系 R 的键。因此我有 FD AB -> AB 这是一个微不足道的依赖关系，因此该表只有微不足道的函数依赖关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T23:56:39.940

好吧，您几乎回答了自己的问题，让我尝试以（希望）更清晰的方式重述它...

*   所有属性在功能上都依赖于键。
*   如果键“覆盖”所有属性，那么所有这些依赖关系都是微不足道的（根据定义）。
*   *OTOH，如果在键之外（甚至在另一个*键中）有属性，那么它们与键无关（同样，根据定义）。

# c# - 图片绑定，一步一步改变图片

> ID：10273108
> 
> 赞同：0
> 
> 时间：2012-04-22T23:36:04.300
> 
> 标签：c#, wpf, silverlight, windows-phone-7

我已经创建了一个扑克应用程序。我有 6 个玩家，每个玩家 2 张牌。我想知道如何说明这笔交易。我在交易时用卡换了图片，然后一步一步。但是卡片图片没有改变。如果我在`syncrhon`卡片图片中这样做会在迭代后发生变化。如果我使用该`asynchron`模式，卡片图片不会改变。
谢谢你的帮助。

有代码：

```
for (int j = 0; j < 2; j++)
            {
                for (int i = 0; i < opposers.Count; i++)
                {
                //    View.View.Dispatcher.BeginInvoke(() =>
                //    {
                        if (j == 0)
                            GetPlayer(i).Card1 = new Card(deck.Pop());
                        else GetPlayer(i).Card2 = new Card(deck.Pop());
                    //Thread.Sleep(500);
                    //});
                }
            }

      <Image Width="50" Height="80" Source="{Binding Card2.ImgCard}" RenderTransformOrigin="0.5,0.5" Canvas.Left="108.358" Canvas.Top="-8.349">
                    <Image.RenderTransform>
                        <CompositeTransform Rotation="16.39" SkewY="1.788" ScaleY="0.995" ScaleX="1.005" />
                    </Image.RenderTransform>
                </Image> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T23:44:37.167

使用绑定你的想法很好。我建议使用 Storyboard 而不是 Threading Sleep 但这不是这里的问题。

您需要确保您的`ImgCard`属性确实引发了[PropertyChanged Event](http://msdn.microsoft.com/en-us/library/ms752914.aspx)。然后，您需要通过更新 Image as 来设置代码，`new ImageSource`并将新的 imagesource 设置为事件将引发的属性。

`

```
Public Shared ReadOnly IsSpinningProperty As DependencyProperty =
    DependencyProperty.Register("IsSpinning",
                                GetType(Boolean),
                                GetType(MyCode))

Public Property IsSpinning() As Boolean
    Get
        Return CBool(GetValue(IsSpinningProperty))
    End Get
    Set(ByVal value As Boolean)
        SetValue(IsSpinningProperty, value)
    End Set
End Property 
```

` 现在，您可以通过代码隐藏更改 IsSpinning 的值，例如

```
IsSpinning = NOT IsSpinning 'simple swtich the value 
```

如果 IsSpinning 现在将切换，它将使用 SetValue 方法，并且此方法将为绑定到此 IsSpinnning 属性的所有项目引发事件。

# c++ - c++ 中用于多映射的 getter 和 setter

> ID：10273113
> 
> 赞同：1
> 
> 时间：2012-04-22T23:37:20.537
> 
> 标签：c++, getter, multimap

我读过 C++ 中的默认行为始终是复制。所以我猜测数据成员上的 get 函数也会返回数据成员的副本。

通常这可以正常工作，但在这种情况下，我的一个数据成员是一个多图。这就是我现在所拥有的：

```
class Track {
private:
    multimap<long, Note> noteList;
public:

    multimap<long ,Note> getNoteList()
    {
        return noteList;
    }
} 
```

但由于某种原因，这不起作用。当我打电话时`getNoteList()`，我没有收到任何错误，但控制台中的程序输出停止（当我运行我的应用程序时）。如果我`noteList`公开一切正常。

与 multimap 相比，int、char、float 等常规类型有什么区别吗？为什么这不起作用的任何原因我如何编写一个有效的getter函数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T23:42:25.937

返回容器的副本可能不是一个好主意。您很可能最终会无故复制太多。如果您不希望用户能够更改您现有的容器，您应该通过引用返回它`const`。

```
class Track {
private:
    multimap<long, Note> noteList;
public:

    multimap<long ,Note> const& getNoteList() const
    {
        return noteList;
    }
} 
```

现在，当这个类的客户端调用时`getNodeList()`，可以直接访问`noteList`map，而不需要做昂贵的副本。

如果您还想让客户端能够直接修改该映射，您可以添加一个返回常规引用的重载：

```
 multimap<long ,Note>& getNoteList()
    {
        return noteList;
    } 
```

但是，如果您达到这一点，您可能应该问自己为什么不`noteList`直接曝光。

# c++ - 如何确定转换为灰度的 cv::Mat 中的数据类型

> ID：10273122
> 
> 赞同：5
> 
> 时间：2012-04-22T23:39:07.823
> 
> 标签：c++, opencv

我不确定在哪里可以找到这些信息。

我加载了.jpg并将其转换为灰度`cv::cvtColor(*input_image_grayscale, *input_image_grayscale, CV_BGR2GRAY);`

然后我尝试引用一个像素，`input_image_grayscale->at<float>(row, col)`但得到一个断言错误。如何确定正确的数据类型（显然不是浮动的）来取消引用？谢谢

作为参考，我跑了`input_image_grayscale->type()`，得到了 0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T23:58:35.710

type 返回的值只是 OpenCV 用预处理器定义声明的整数。您可以在 switch 语句中检查它，如下所示：

```
switch( matrixType )
{
    case CV_8UC1:

    .... check for other types
} 
```

该`8U`, 在该示例中指的是无符号字符，并且`C1`指的是单通道图像。CV_8UC1 被定义为`0`，所以这是你的垫子的类型，你应该使用`unsigned char`你的参考类型。

您还可以使用函数 Mat::depth 来返回单个矩阵元素的大小类型，因为您已经知道它是单通道图像，因为它是灰度图像。

# php - 按月和年划分的 PHP SQL 事件

> ID：10273124
> 
> 赞同：0
> 
> 时间：2012-04-22T23:39:34.847
> 
> 标签：php, html, sql

更新的 PHP

似乎与尖括号有关...

我第一次编写自己的 PHP 和 SQL，但遇到了一些麻烦，所以还没有插入 HTML。我想我没有正确地逃避某些事情，或者我的格式差了几英里……或者真的很简单。

我基本上是在尝试获取一个有效的事件列表，以及这里的许多帖子，只是无法将它们全部放在一起以获得结果。

所以我在寻找

```
YEAR

MONTH
EVENT

MONTH
EVENT
EVENT

YEAR etc 
```

我的 HTML 看起来像这样......

```
<div id="year">
<p class="vert">YEAR</p>
    <div id="month">
        <h1>MONTH</h1>
        <div class="event">
            <p>DATE START - DATEEND IF DIFFERENT/AVAILABLE</p>
            <div class="eventmain">
                <img class="flag" src="./img/defaultflag.png">
                <img class="open" src="./img/plus.png">
                <img class="close" src="./img/minus.png">
                <h2> Event Name </h2>
                <div class="eventdetails">
                    <p>FORMAT</p>
                    <p>INFO</p>
                    <p>CONTACT</p>
                    <p>EMAIL</p>
                    <p>WEBSITE</p>
                </div> <!-- close div event details -->
            </div> <!-- close div event main -->
        </div> <!-- close div event -->
    </div> <!-- close div month -->
</div> <!--close div year--> 
```

使用 DB 辩论日历中的以下数据库字段，表事件 event_name，event_startdate，event_enddate，event_flag，event_format，event_info，event_contactinfo，event_email，event_website，event_reg

我有以下 PHP

```
<?php

$server = "localhost:8889";
$user = "root";
$passwd = "root";
$db_name = "debate_calendar";
$table_name = "events";

$conn = mysql_connect($server, $user, $passwd) or die("Couldn't connect to SQL Server on $server"); 
mysql_select_db($db_name, $conn);

    if (!$conn)
        {
        exit("Failed to Connect to $dbConnection");
        } 
    else
        {
        echo "Database Connected";
        }

$query = "SELECT * FROM `debate_calendar`.`events` WHERE event_date > NOW() ORDER BY event_date DESC";
$result = mysql_query( $query );

    $current_month = '';
    $current_year = '';

    while ($event = mysql_fetch_assoc($result)) {
         $year = date('y', $event['event_startdate']);
        if($current_year != $year) 
            {
                $current_year = $year;
                echo ("<h1>" .$current_year. "</h1>");
            }           
        $month = date('m', $event['event_startdate']);
        if($current_month != $month) 
            {
                $current_month = $month;
                echo '<h2>' . $current_month . '</h2>';
            }
        echo '<p>' . $event['event_name'] . '</p>';
    }   
        mysql_close($con);
?> 
```

但它所产生的只是......

```
NOW() ORDER BY event_date DESC"; $result = mysql_query( $query ); $current_month = ''; $current_year = ''; while ($event = mysql_fetch_assoc($result)) { $year = date('y', $event['event_startdate']); if($current_year != $year) { $current_year = $year; echo ("
" .$current_year. "
"); } $month = date('m', $event['event_startdate']); if($current_month != $month) { $current_month = $month; echo '
' . $current_month . '
'; } echo '

' . $event['event_name'] . '
'; } mysql_close($con); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T00:02:54.477

你之前没有引用你最后的回声`$qry`。此外，您的查询中有一些额外的字符会使其失败。它应该是这样的：

```
SELECT * FROM `debate_calendar`.`events` WHERE event_date > NOW() 
ORDER BY event_date DESC 
```

此外，如果需要，您可以直接从 SQL获取任何`DATE`/类型字段的年/月/日部分：`DATETIME`

```
SELECT year(event_date) AS event_year, month(event_date) AS event_month ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T00:03:13.893

```
echo <p> Your Database is Connected</p\><br/\> 
```

您忘记添加引号 ("")

试试这个：

```
echo "<p> Your Database is Connected</p\><br/\>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T21:13:15.000

答案是一个小学生的错误。

我已经将该站点从一个 MAMP 安装移动到一个新的安装，其中 htaccess 没有被更改以允许 html 文件作为 PHP 打开。

代码中仍然有很多错误，但这是根本问题

就那么简单！！

# javascript - Javascript中的套接字服务器（在浏览器中）？

> ID：10273127
> 
> 赞同：7
> 
> 时间：2012-04-22T23:40:00.377
> 
> 标签：javascript

我希望允许用户在我正在开发的多人游戏中玩 p2p，但要做到这一点，javascript 需要能够在浏览器中创建套接字服务器。这甚至可能吗？我不知道有任何 API 可以让客户端在 javascript 中连接到其他客户端。还有其他方法吗？喜欢使用隐藏的闪光元素？

我要求的东西根本不需要服务器。数据包需要直接从客户端传输到客户端

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-08-13T20:36:12.723

这个问题很老了，但我现在可以给出一个答案：是的，终于有一种方法可以在浏览器之间进行 p2p 通信了！多亏了新标准[WebRTC](http://www.w3.org/TR/webrtc/)，现代浏览器才获得了对**Data Channels**的支持，这比 WebSockets 强大得多。

看看这里：

[WebRTC 数据通道](http://www.html5rocks.com/en/tutorials/webrtc/datachannels/)

在线示例：**香蕉面包 3D**是一款第一人称射击游戏，编译为 JS+WebGL，在多人模式下使用 WebRTC 数据通道：

[BananaBread 3D多人在线fps游戏](https://developer.mozilla.org/en/demos/detail/bananabread)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-22T23:49:26.837

简而言之，浏览器中的 p2p 是不可能的。

您可以获得的最接近的是使用 NodeJS（可能用于 p2p JS）或集中式服务器（或多个服务器）和 websockets（用于浏览器中的套接字）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-23T00:03:41.523

有趣的问题，但可能是重复的：

*   [有哪些技术可以在浏览器中进行 P2P？](https://stackoverflow.com/questions/4807685/what-techniques-are-available-to-do-p2p-in-the-browser)

我确信这不能仅使用 javascript（在每个浏览器中）来完成。根据 上述主题中关于 Stackoverflow 的[另一个答案](https://stackoverflow.com/a/6921251/11926)，您可能可以使用[rtmfp-api](http://h3xstream.github.com/rtmfp-api/)执行此操作。

> 该项目通过隐藏的 Flash 小程序向 javascript 应用程序公开 Rtmfp 协议（由 Flash 版本 10 提供）。该协议允许多个客户端直接通信。有关该协议的更多详细信息，请参阅参考资料。

快速查看该站点，您仍然需要一个`rtmfpUrl`中间的服务器，我完全理解，因为客户端需要能够找到彼此（IP）。但我认为在那之后它将是p2p。快速搜索我还发现[了开源 rtmfp-server(s)](https://github.com/OpenRTMFP)。

我自己还没有尝试过，但我也许这会帮助你实现你的目标。

其他一些链接：

*   [https://stackoverflow.com/search?q=browser+p2p](https://stackoverflow.com/search?q=browser+p2p)
*   [https://stackoverflow.com/a/7933140/11926](https://stackoverflow.com/a/7933140/11926)
*   [https://stackoverflow.com/a/5211895/11926](https://stackoverflow.com/a/5211895/11926)
*   [https://stackoverflow.com/a/5023048/11926](https://stackoverflow.com/a/5023048/11926)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T23:45:01.580

虽然这是一个购物问题，但我会研究 APE

[http://www.ape-project.org/](http://www.ape-project.org/)

至少你可以看看他们是如何构建它的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-22T23:46:58.257

为了实现这样的游戏，您的 JavaScript 客户端必须与服务器通信。然后服务器运行游戏逻辑，并将结果发送回客户端。

*   JavaScript 接收用户输入并将其发送到服务器
*   服务器确保输入有效（以防止作弊）并使用新输入更新游戏
*   服务器定期将游戏状态发送到 JavaScript（通过长轮询或让 JS 每隔一段时间请求它）。

基本上，永远不要相信来自 JavaScript 的任何东西，因为它非常容易修改。一切都应该在服务器端完成。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-21T00:39:50.453

这是 mobl 的解决方案（但我还没有尝试过）。

[http://zef.me/3391/moving-the-server-to-the-browser](http://zef.me/3391/moving-the-server-to-the-browser)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-09-21T23:22:59.447

可以使用 Flash 实现无服务器。这可以通过 Adob​​e Flash 的点对点功能实现。我曾经用它写了一个点对点聊天。缺点是 Actionscript 是一种垂死的语言，将来可能不会得到太多支持。

这是原始类。 [http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetGroup.html](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/NetGroup.html)

如果您不想自己编写，这里有资源。 [http://www.as3gamegears.com/category/multiplayer/](http://www.as3gamegears.com/category/multiplayer/)

如果您想要在服务器端轻量级的服务器选项。试试这个 node.js 扩展。
[http://socket.io/](http://socket.io/)

我建议使用某种 java 套接字服务器。Electroserver 曾经是该领域的领导者之一，它有 Unity 支持并且可以扩展到数十万。虽然我认为他们已经陷入困境。Electroserver 站点有一段时间无法访问。我知道还有其他的，但 Electroserver 是我唯一使用过的。

# python - 打开另一个命令行解释器并输入命令

> ID：10273129
> 
> 赞同：1
> 
> 时间：2012-04-22T23:40:02.343
> 
> 标签：python, command-line, spim

我使用“spim”模拟器来模拟 mips 架构。它的工作方式是我首先应该有一个“filename.asm”文件，然后在 bash 中键入“spim”以打开 spim 的命令行解释器，然后我可以使用 spim 命令，例如加载文件并运行它， ETC..

我正在尝试编写一个 python 脚本来打开 spim 命令行解释器并开始在其中输入 spim 命令。这可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T00:01:41.673

这将取决于我不熟悉的 spim，但如果你可以通过管道传递一些东西，你可以在 Python 中做同样的事情

查看[http://docs.python.org/library/subprocess.html](http://docs.python.org/library/subprocess.html)

这样的事情会让你开始：

```
proc = subprocess.Popen('spim',shell = True,stdin = subprocess.PIPE)
proc.stdin.write("Hello world") 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-08T17:31:05.110

```
from subprocess import Popen, PIPE, STDOUT

# Open Pipe to communicate with spim process.
p = Popen(['spim'], stdout=PIPE, stdin=PIPE, stderr=STDOUT, shell=True)

# Write a "step 1" command to spim.
p.stdin.write('step 1\n')
p.stdin.close()

# Get the spim process output.
spim_stdout = p.stdout.read()
print(spim_stdout) 
```

# zend-framework - 如何将 ZF2 与 Doctrine Mongo ODM 集成？

> ID：10273130
> 
> 赞同：6
> 
> 时间：2012-04-22T23:40:02.783
> 
> 标签：zend-framework, doctrine, doctrine-orm, zend-framework2, doctrine-odm

我正在尝试将 zf2 beta3 与学说 mongo odm （https://github.com/doctrine/DoctrineMongoODMModule）集成，但没有成功。

如何安装和配置它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T05:32:19.827

我正在做同样的事情。像这样的东西应该工作：

下载该模块，并将其放在您的供应商文件夹中。

在 application.config.php 中添加模块

复制 module.doctrine_mongodb.config.php.dist 到 /config/autoload

使用您自己的设置编辑该配置文件

将该配置文件的名称更改为 module.doctrine_mongodb.local.config.php

在您的控制器中创建一个“setDocumentManager”方法，如下所示：

```
protected $documentManager;

public function setDocumentManager(DocumentManager $documentManager)
{
    $this->documentManager = $documentManager;
    return $this;
} 
```

将以下内容放入模块的 DI 配置中：

```
 'Application\Controller\[YourControllerClass]' => array(
        'parameters' => array(
            'documentManager' => 'mongo_dm'
        )
    ), 
```

根据 Doctrine 2 文档创建 Document 类，以及此问答中的说明：[Annotations Namespace not loaded DoctrineMongoODMModule for Zend Framework 2](https://stackoverflow.com/questions/10222507/annotations-namespace-not-loaded-doctrinemongoodmmodule-for-zend-framework-2)

最后，像这样使用 dm：

```
public function indexAction()
{
    $dm = $this->documentManager;

    $user = new User();
    $user->set('name', 'testname');
    $user->set('firstname', 'testfirstname');
    $dm->persist($user);
    $dm->flush();

    return new ViewModel();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-25T04:22:06.993

我将给出我为将 zf2 与 mongodb 学说 odm 集成所做的步骤

1.下载mongodb学说odm模块，放到vendor目录下或者从github克隆

```
cd /path/to/project/vendor
git clone --recursive https://github.com/doctrine/DoctrineMongoODMModule.git 
```

2.从 /path/to/project/vendor/DoctrineMongoODMModule/config/module.doctrine_mongodb.config.php.dist 复制文件，放在你的 path/to/your/project/config/autoload/ 并重命名为 module.doctrine_mongodb .local.config.php

3.编辑你的module.doctrine_mongodb.local.config.php。更改默认数据库

```
'config' => array(
    // set the default database to use (or not)
    'default_db' => 'myDbName'
), 
```

更改连接参数

```
'connection' => array(
    //'server'  => 'mongodb://<user>:<password>@<server>:<port>',
    'server'  => 'mongodb://localhost:27017',
    'options' => array()
), 
```

更改驱动程序选项

```
'driver' => array(
    'class'     => 'Doctrine\ODM\MongoDB\Mapping\Driver\AnnotationDriver',
    'namespace' => 'Application\Document',
    'paths'     => array('module/Application/src/Application/Document'),
), 
```

添加代理和 hydratros 配置

```
 'mongo_config' => array(
            'parameters' => array(
                'opts' => array(
                    'auto_generate_proxies'   => true,
                    'proxy_dir'               => __DIR__ . '/../../module/Application/src/Application/Document/Proxy',
                    'proxy_namespace'         => 'Application\Model\Proxy',
                    'auto_generate_hydrators' => true,
                    'hydrator_dir'            => __DIR__ . '/../../module/Application/src/Application/Document/Hydrators',
                    'hydrator_namespace'      => 'Application\Document\Hydrators',
                    'default_db' => $settings['config']['default_db'],
                ),
                'metadataCache' => $settings['cache'],
            )
        ), 
```

4.在 /path/to/project/module/Application/src/Application/ 中创建一个名为“Document”的目录，您的文档映射在哪里，在“Document”目录中，创建“Proxy”和“Hydrators”目录。

5.编辑您的 /path/to/project/config/application.config.php 并将“DoctrineMongoODMModule”添加到模块数组

6.确保您已安装 mongo php 扩展，否则在[http://www.php.net/manual/en/mongo.installation.php#mongo.installation.windows](http://www.php.net/manual/en/mongo.installation.php#mongo.installation.windows)下载并将其复制到您的扩展 php 目录，通常是 /php /分机。根据您在 php.ini 中下载的名称文件扩展名添加扩展行“extension=php_mongo-xxx-5.x-vc9.dll”。

7.在你的文档目录应用模块中创建一个文档映射User.php。

```
<?php
namespace Application\Document;
use Doctrine\ODM\MongoDB\Mapping\Annotations as ODM;
/** @ODM\Document */
class User
{
    /** @ODM\Id */
    private $id;

    /** @ODM\Field(type="string") */
    private $name;

    /**
     * @return the $id
     */
    public function getId() {
        return $this->id;
    }

    /**
     * @return the $name
     */
    public function getName() {
        return $this->name;
    }

    /**
     * @param field_type $id
     */
    public function setId($id) {
        $this->id = $id;
    }

    /**
     * @param field_type $name
     */
    public function setName($name) {
        $this->name = $name;
    }

} 
```

8.坚持它，例如在你的控制器中

```
<?php

namespace Application\Controller;

use Zend\Mvc\Controller\ActionController,
    Zend\View\Model\ViewModel,
    Application\Document\User;

class IndexController extends ActionController
{

    public function indexAction()
    {
        $dm = $this->getLocator()->get('mongo_dm');

        $user = new User();
        $user->setName('Bulat S.');

        $dm->persist($user);
        $dm->flush();

        return new ViewModel();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-22T20:10:12.600

现在默认配置已经改变，你能展示一个更新的方法来让它在 ZF2 中工作吗？

```
<?php
return array(
    'doctrine' => array(

        'connection' => array(
            'odm_default' => array(
                'server'    => 'localhost',
                'port'      => '27017',
                'user'      => null,
                'password'  => null,
                'dbname'    => 'user',
                'options'   => array()
            ),
        ),

        'configuration' => array(
            'odm_default' => array(
                'metadata_cache'     => 'array',

                'driver'             => 'odm_default',

                'generate_proxies'   => true,
                'proxy_dir'          => 'data/DoctrineMongoODMModule/Proxy',
                'proxy_namespace'    => 'DoctrineMongoODMModule\Proxy',

                'generate_hydrators' => true,
                'hydrator_dir'       => 'data/DoctrineMongoODMModule/Hydrator',
                'hydrator_namespace' => 'DoctrineMongoODMModule\Hydrator',

                'default_db'         => null,

                'filters'            => array()   // array('filterName' => 'BSON\Filter\Class')
            )
        ),

        'driver' => array(
            'odm_default' => array(
                'drivers' => array()
            )
        ),

        'documentmanager' => array(
            'odm_default' => array(
                'connection'    => 'odm_default',
                'configuration' => 'odm_default',
                'eventmanager' => 'odm_default'
            )
        ),

        'eventmanager' => array(
            'odm_default' => array(
                'subscribers' => array()
            )
        ),
    ),
); 
```

当前收到错误：在链配置的命名空间中找不到类 'Application\Document\User'

# python - 在目录和子目录中查找带有扩展名的文件？

> ID：10273132
> 
> 赞同：1
> 
> 时间：2012-04-22T23:40:23.733
> 
> 标签：python

我想制作一个 Python 脚本来快速将我桌面上的文件组织到基于扩展名的文件夹中。基本上，我如何使用循环来获取一个文件，对其执行某些操作，然后转到下一个文件，等等？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-22T23:44:29.800

您需要的一切都可能包含在[`os`](http://docs.python.org/library/os.html)库中，更具体地说，在[`os.path`](http://docs.python.org/library/os.path.html)它的位和那个中[`shutil`](http://docs.python.org/library/shutil.html)。

要探索您可以使用的目录树[`os.walk`](http://docs.python.org/library/os.html#os.walk)并移动您可以使用的文件[`shutil.move`](http://docs.python.org/library/shutil.html#shutil.move)。

* * *

**编辑：**我一起编写的一个小脚本让你继续前进：

```
import os
import shutil as sh
from collections import defaultdict

DESKTOP = '/home/mac/Desktop'

#This dictionary will contain: <extension>: <list_of_files> mappings
register = defaultdict(list)

#Populate the register
for dir_, dirs, fnames in os.walk('/home/mac/Desktop'):
    for fname in fnames:
        register[fname.rsplit('.', 1)[1]].append(os.path.join(dir_, fname))

#Iterate over the register, creating the directory and moving the files 
#with that extension in it.
for dirname, files in register.iteritems():
    dirname = os.path.join(DESKTOP, dirname)
    if not os.path.exists(dirname):
        os.makedirs(dirname)
    for file_ in files:
        sh.move(file_, dirname) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T22:13:32.950

我会从模块[os](http://docs.python.org/library/os.html)和文件名[列表中推荐 os.walk](http://docs.python.org/tutorial/datastructures.html)

# ruby-on-rails - 在 Ruby on Rails 应用程序中运行 rake db:migrate 的问题

> ID：10273133
> 
> 赞同：0
> 
> 时间：2012-04-22T23:40:26.467
> 
> 标签：ruby-on-rails, rake, dbmigrate

我正在尝试在我的 Ruby on Rails 应用程序中运行 rake db:migrate。

但是，它给了我一个“未初始化的常量”异常。从谷歌搜索来看，解决方案似乎是更新 rake 版本。所以我改变了我的 gemfile 并运行了包更新。

但是，异常仍在发生……我想是因为我没有更新正确的 rake 库。

我该如何解决？我如何也可以为其他路径更新 rake，或者专门通过 bundle 运行 rake？

```
My-Comp:my_project username$ bundle show rake
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2
My-Comp:my_project username$ which rake
/usr/bin/rake
My-Comp:my_project username$ rake -V
rake, version 0.8.7

(See - they are not the same!)

My-Comp:my_project username$ rake db:migrate --trace
(in /Users/username/projects/my_project)
rake aborted!
uninitialized constant Rake::DSL
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rake.rb:2503:in `const_missing'
/Library/Ruby/Gems/1.8/gems/rake-0.9.2.2/lib/rake/tasklib.rb:8
/Library/Ruby/Gems/1.8/gems/rdoc-3.12/lib/rdoc/task.rb:37:in `require'
/Library/Ruby/Gems/1.8/gems/rdoc-3.12/lib/rdoc/task.rb:37
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/tasks/documentation.rake:2:in `require'
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/tasks/documentation.rake:2
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/tasks.rb:15:in `load'
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/tasks.rb:15
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/tasks.rb:6:in `each'
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/tasks.rb:6
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/application.rb:289:in `require'
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/application.rb:289:in `initialize_tasks'
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/railtie.rb:184:in `instance_exec'
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/railtie.rb:184:in `load_tasks'
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/railtie.rb:184:in `each'
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/railtie.rb:184:in `load_tasks'
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/engine.rb:424:in `load_tasks'
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/application.rb:145:in `load_tasks'
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in `send'
/Library/Ruby/Gems/1.8/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in `method_missing'
/Users/username/projects/my_project/Rakefile:7
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rake.rb:2383:in `load'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rake.rb:2383:in `raw_load_rakefile'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rake.rb:2017:in `load_rakefile'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rake.rb:2068:in `standard_exception_handling'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rake.rb:2016:in `load_rakefile'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rake.rb:2000:in `run'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rake.rb:2068:in `standard_exception_handling'
/System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/1.8/rake.rb:1998:in `run'
/usr/bin/rake:31 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T00:02:31.097

试试这个命令：

```
bundle exec rake db:migrate 
```

`bundle exec`在 gemfile 的上下文中执行命令。

# mysql - sphinx 索引与 mysql 索引的主要区别是什么，允许更快的搜索和聚合

> ID：10273137
> 
> 赞同：0
> 
> 时间：2012-04-22T23:41:34.720
> 
> 标签：mysql, indexing, sphinx, aggregation

目前，我正在尝试构建一个类似于 [http://www.indeed.com/jobs?q=sales&l=](http://www.indeed.com/jobs?q=sales&l=)的搜索引擎 （我最担心的是左侧的搜索过滤器是 group-by-s不同参数的搜索结果）。

目前我们使用的数据库是 MySQL。我做了一些初步研究，人们一直告诉我我的问题是由于没有正确使用 mysql 索引而引起的。我花了几个月的时间对 mysql 索引、缓存等进行深入研究，结果却发现根本没有办法用 mysql 提供的东西来解决这个问题。B-tree 是个好东西，但它有其局限性，无法设置允许同时在多个列上进行所有类型搜索（全文、范围等）的索引类型（然后也最后多次分组）。

经过更多的谷歌搜索和交谈，我发现了一个名为 Sphinx 的东西，据称它能够解决这些类型的任务。但是，我似乎找不到一本好书或研究来解释和说明 Sphinx 究竟是如何实现这一点的。如果您能向我解释这是如何工作的，或者至少为我指明一本好书的方向，那就太棒了！基本上我想了解 Sphinx 背后的技术，以 100% 确定它可以解决我面临的问题。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T13:44:55.517

最基本的，Sphinx 实现了一个倒排索引[http://en.wikipedia.org/wiki/Inverted_index](http://en.wikipedia.org/wiki/Inverted_index)

这适用于全文搜索。顺便说一句，Mysql 的“全文”索引也使用倒排索引。

Sphinx 通常比 mysql 更适合搜索 - 因为它是为任务设计的工具，而不是“螺栓固定”。它有更多的配置选项。Sphinx 在性能方面也有很大的优势，并且不遗余力地实现它。例如，属性保存在内存中，用于快速索引查找。

它还具有诸如“多查询”之类的功能，该功能使用了许多优化，可以在同一数据集上运行多个查询——这对于构建这些类型的接口非常有用。

...所以狮身人面像的设置会更加复杂，但最终结果希望会让它值得付出努力！

我不知道任何解释狮身人面像的好处的文件。“高性能mysql”中有一个章节可能值得一读，但没有涉及“如何”狮身人面像的工作原理。

还有一些演讲，例如 [http://www.slideshare.net/freelancing_god/sphinx-beyond-the-basics](http://www.slideshare.net/freelancing_god/sphinx-beyond-the-basics) 更多：[https://www.google.co.uk/search?q=sphinx+talk](https://www.google.co.uk/search?q=sphinx+talk)他们可能是了解狮身人面像的力量的好方法。

还有这个真正的技术文档： [http ://sphinxsearch.googlecode.com/svn/trunk/doc/internals-index-format.txt](http://sphinxsearch.googlecode.com/svn/trunk/doc/internals-index-format.txt)

（顺便说一下——“左边的东西”被称为刻面。Sphinx 的刻面效果很好。使用技术术语可能有助于您的研究。但 sphinx 本身通常称它们为“分组依据”或聚类）

# java - 如何“卸载” .properties 文件

> ID：10273146
> 
> 赞同：1
> 
> 时间：2012-04-22T23:43:19.150
> 
> 标签：java, file, io

在我的游戏中，我使用以下代码从特定级别文件夹加载属性文件：

```
Properties prop = new Properties

public void LoadLevel(int levelID) {
try {
   prop.load(new FileInputStream("/resources/levels" + levelID + "lev.properties"));
....snip.... 
```

如果我想加载另一个级别，如何卸载最后一个级别的属性文件？我找到了一个解决方案，但由于该网站是付费的，所以它很模糊，所以我又爬回来了：D

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T23:45:01.327

`Properties`是一个`Hashtable`。你可以[`clear`](http://docs.oracle.com/javase/7/docs/api/java/util/Hashtable.html#clear%28%29)的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T00:54:54.017

另一种选择是创建一个新`Properties`对象，加载它，然后将其分配给`prop`. 这应该可以正常工作，除非您的代码已将对原始对象的引用保存在其他地方。

# ruby-on-rails - 如何通过bundler查看heroku上安装了什么版本的gem？

> ID：10273147
> 
> 赞同：0
> 
> 时间：2012-04-22T23:43:20.507
> 
> 标签：ruby-on-rails, heroku, bundler

我不确定我是否在这里遗漏了什么！如何`bundle show GEM_NAME`为我的 heroku 应用程序执行？

我想看看正在运行的 heroku 应用程序上安装了什么版本的 gem。我搞砸了我的本地包，现在其中一个 gem 升级了，它不兼容 backword！

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-22T23:46:28.070

假设您使用的是 Heroku Cedar，您可以运行：

```
$ heroku run bundle show GEM_NAME 
```

# c++ - 随机分段错误 C++

> ID：10273154
> 
> 赞同：0
> 
> 时间：2012-04-22T23:43:53.670
> 
> 标签：c++, hash, segmentation-fault

我编译了一次文件，并以相同的输出运行它，但我只有大约 20-30% 的时间会出现分段错误。我刚刚给我的教授发了电子邮件，但她一直在接受。我真的不知道为什么，特别是因为错误并非一直发生，而是有时会出现在完全相同的 a.out 文件中。我确切地知道错误发生在哪里，它来自 if( sDB[index] == 0 )。

谢谢您的帮助，

如果需要更多代码来解决问题，请告诉我。

*sDB 是在我的构造函数中初始化的指针数组：

```
*sDB = new HashElem[MAX]; 
```

结构：

```
struct Elem { 
    student *info;
    Elem *next;
};

struct HashElem {
    student *info;
    HashElem *next; 
}; 
```

我的代码片段：

```
void studentsDB::push( student *std ) {

Elem *e = new Elem;
e->info = std;

Elem *cur = head;
while( cur->next != 0 ) 
    cur = cur->next;

cur->next = e;
e->next = 0;

int index = std->hash( );

HashElem *h = new HashElem;
h->info = std;;
if( sDB[index] == 0 ) { //<<< THIS LINE CAUSES THE ERROR
    sDB[index] = h; 
    h->next = 0;
}
else {
    HashElem *ha = sDB[index];
    while( ha->next != 0 ) {
        ha = ha->next;
    }
    ha->next = h;
}

size++;
} 
```

哈希（）：

```
int student::hash( ) {
int ret = 0;
string s = id;

for( int i = 0; i < s.length( ); i++ )
    ret = 33 * ret + s[i];

return ret % MAX;
} 
```

输出：

```
bash-4.2$ g++ *.cpp
bash-4.2$ ./a.out students.dat courses.dat 
begin
objects created
+++ Before the if statement +++
+++ 548 +++
Segmentation fault

bash-4.2$ ./a.out students.dat courses.dat 
begin
objects created
+++ Before the if statement +++
+++ 548 +++
Segmentation fault

bash-4.2$ ./a.out students.dat courses.dat 
begin
objects created
+++ Before the if statement +++
+++ 548 +++
+++ After +++
+++ Before the if statement +++
+++ 626 +++
+++ After +++
+++ Before the if statement +++
+++ 605 +++
+++ After +++
+++ Before the if statement +++
+++ 915 +++
+++ After +++
+++ Before the if statement +++
+++ 915 +++
printList
Flintstone, Fred 000-12SA 3 121314 12333 12116 
Flintstone, Wilma 000-45SA 2 12332 12111 
Glotz, Joe Q 901-9984 3 12332 12116 12111 
Rubble, Barney 001-01SA 3 121314 12111 12116 
CS001 1 12111 1 10 3 000-45SA 901-9984 001-01SA 
CS515 2 121314 4 45 2 000-12SA 001-01SA 
CH302 1 12116 5 15 3 000-12SA 901-9984 001-01SA 
MA111 1 12333 4 15 1 000-12SA 
PH999 1 12999 2 10 0000-12SA901-9984 
PY000 3 12332 6 5 2 000-45SA 901-9984 

bash-4.2$ ./a.out students.dat courses.dat 
begin
objects created
+++ Before the if statement +++
+++ 548 +++
Segmentation fault

bash-4.2$ ./a.out students.dat courses.dat 
begin
objects created
+++ Before the if statement +++
+++ 548 +++
Segmentation fault

bash-4.2$ ./a.out students.dat courses.dat 
begin
objects created
+++ Before the if statement +++
+++ 548 +++
+++ After +++
+++ Before the if statement +++
+++ 626 +++
+++ After +++
+++ Before the if statement +++
+++ 605 +++
+++ After +++
+++ Before the if statement +++
+++ 915 +++
+++ After +++
+++ Before the if statement +++
+++ 915 +++
printList
Flintstone, Fred 000-12SA 3 121314 12333 12116 
Flintstone, Wilma 000-45SA 2 12332 12111 
Glotz, Joe Q 901-9984 3 12332 12116 12111 
Rubble, Barney 001-01SA 3 121314 12111 12116 
CS001 1 12111 1 10 3 000-45SA 901-9984 001-01SA 
CS515 2 121314 4 45 2 000-12SA 001-01SA 
CH302 1 12116 5 15 3 000-12SA 901-9984 001-01SA 
MA111 1 12333 4 15 1 000-12SA 
PH999 1 12999 2 10 0000-12SA901-9984 
PY000 3 12332 6 5 2 000-45SA 901-9984 

bash-4.2$ ./a.out students.dat courses.dat 
begin
objects created
+++ Before the if statement +++
+++ 548 +++
+++ After +++
+++ Before the if statement +++
+++ 626 +++
+++ After +++
+++ Before the if statement +++
+++ 605 +++
+++ After +++
+++ Before the if statement +++
+++ 915 +++
Segmentation fault 
```

gdb 输出：

```
Starting program: /home/csu/dtk24/cs515/prog11/a.out students.dat courses.dat
begin
objects created
+++ Before the if statement +++
+++ 548 +++

Program received signal SIGSEGV, Segmentation fault.
0x0804b2a0 in studentsDB::push (this=0xbffff78c, std=0x8054120)
    at studentsDB.cpp:130
130     if( sDB[index] == 0 ) { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T10:42:11.373

你写了一个双“;” 特点。错误是在 if 之前的行引起的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T23:49:21.457

您的问题中包含的代码不足，无法确定问题所在。

但是，如果我冒昧地猜测一下，那么问题很可能出在 hash() 中——这取决于你如何进行计算，最终得到一个负数，或者一个大于哈希表最大值的数字

# macos - OSX 以编程方式调用声级图形

> ID：10273159
> 
> 赞同：3
> 
> 时间：2012-04-22T23:44:32.813
> 
> 标签：macos, core-audio

我有一个可以在 OSX 下改变音量的应用程序。它缺少的是按下声音上/下键时提供的视觉反馈。有谁知道如何以编程方式调用该行为？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T16:55:28.527

这是 George Warner 和 Casey Fleser 的一个小代码，可以做到这一点。仔细想想，这*确实*是你想做的事情。

```
// Save as sound_up.m
// Compile: gcc -o sound_up sound_up.m -framework IOKit -framework Cocoa

#import <Cocoa/Cocoa.h>
#import <IOKit/hidsystem/IOHIDLib.h>
#import <IOKit/hidsystem/ev_keymap.h>

static io_connect_t get_event_driver(void)
{
    static  mach_port_t sEventDrvrRef = 0;
    mach_port_t masterPort, service, iter;
    kern_return_t    kr;

    if (!sEventDrvrRef)
    {
        // Get master device port
        kr = IOMasterPort( bootstrap_port, &masterPort );
        check( KERN_SUCCESS == kr);

        kr = IOServiceGetMatchingServices( masterPort, IOServiceMatching( kIOHIDSystemClass ), &iter );
        check( KERN_SUCCESS == kr);

        service = IOIteratorNext( iter );
        check( service );

        kr = IOServiceOpen( service, mach_task_self(),
                            kIOHIDParamConnectType, &sEventDrvrRef );
        check( KERN_SUCCESS == kr );

        IOObjectRelease( service );
        IOObjectRelease( iter );
    }
    return sEventDrvrRef;
}

static void HIDPostAuxKey( const UInt8 auxKeyCode )
{
  NXEventData   event;
  kern_return_t kr;
  IOGPoint      loc = { 0, 0 };

  // Key press event
  UInt32      evtInfo = auxKeyCode << 16 | NX_KEYDOWN << 8;
  bzero(&event, sizeof(NXEventData));
  event.compound.subType = NX_SUBTYPE_AUX_CONTROL_BUTTONS;
  event.compound.misc.L[0] = evtInfo;
  kr = IOHIDPostEvent( get_event_driver(), NX_SYSDEFINED, loc, &event, kNXEventDataVersion, 0, FALSE );
  check( KERN_SUCCESS == kr );

  // Key release event
  evtInfo = auxKeyCode << 16 | NX_KEYUP << 8;
  bzero(&event, sizeof(NXEventData));
  event.compound.subType = NX_SUBTYPE_AUX_CONTROL_BUTTONS;
  event.compound.misc.L[0] = evtInfo;
  kr = IOHIDPostEvent( get_event_driver(), NX_SYSDEFINED, loc, &event, kNXEventDataVersion, 0, FALSE );
  check( KERN_SUCCESS == kr );

}

int main(int argc, char *argv[]) {
  HIDPostAuxKey(NX_KEYTYPE_SOUND_UP);
} 
```

其他有趣的键码包括：`NX_KEYTYPE_SOUND_DOWN`, `NX_KEYTYPE_MUTE`, `NX_KEYTYPE_PLAY`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T00:46:51.893

我将通过模拟向上/向下音量键的物理按下来实现这一点，并让操作系统处理细节。也许用户禁用了视觉反馈，也许它发生了变化，等等——这是最安全的方法。

看看这个：[Simulating key press events in Mac OS X](https://stackoverflow.com/questions/2379867/simulating-key-press-events-in-mac-os-x)

# html - 无法使用 Internet Explorer 8 获取 @font-face

> ID：10273161
> 
> 赞同：9
> 
> 时间：2012-04-22T23:44:40.537
> 
> 标签：html, css, internet-explorer-8, font-face

我无法让客户的自定义字体显示在 IE8 中。它出现在 IE 9 & 7 和 Chrome obv 中。我不确定为什么这个版本的 IE 会造成麻烦。这是我的 html 中的 include 语句

```
<!--[if IE 8]>
    <link rel="stylesheet" type="text/css" href="../styles/ie/cherokee_ie.css" />
    <![endif]--> 
```

这是 cherokee_ie.css 文件

```
@font-face {
font-family: 'cherokee';
src: url('../../custom.eot');
src: url('../../custom.eot') format('embedded-opentype'),
src: local('☺'), url('../../font/custom.woff') format('woff'), url('../../font/custom.ttf')             format('truetype'), url('../../font/custom.svg') format('svg');
font-weight: normal;
font-style: normal;
}

h1 ul li {
  font-family:cherokee;
} 
```

我不太确定 src: local 上的笑脸在做什么，但我在另一个 SO 问题中发现了这段代码，这使它在 IE7 中完美运行（或者至少就我通过 BrowserLab 看到的而言。）

另外，有没有比 Browserlab 更快的生成视图的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T00:16:05.320

删除 IE Con​​ditional 并将其放入您的 CSS

```
@font-face {
    font-family: 'cherokee';
    src: url('../../custom.eot');
    src: url('../../custom.eot?#iefix') format('embedded-opentype'),
         url('../../font/custom.woff') format('woff'),
         url('../../font/custom.ttf') format('truetype'),
         url('../../font/custom.svg#cherokee') format('svg');
    font-weight: normal;
    font-style: normal;

} 
```

也使用 '...' 自定义字体，像这样

```
h1 ul li {
  font: 18px/27px 'cherokee', Arial, sans-serif;
} 
```

还要检查您的路径是否设置正确。

# php - 考虑到本地化，如何对数组进行排序？

> ID：10273165
> 
> 赞同：2
> 
> 时间：2012-04-22T23:45:16.060
> 
> 标签：php, sorting, localization

我正在尝试按字母顺序对一组名称进行排序（在本例中为克罗地亚语）。

我怎样才能`Đani`在之前出现`Derrick`？

```
$names = array(
    "Đani", "Bill", "Dennis", "George", "Derrick"
);

sort($names);

print_r($names); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T23:49:58.843

您需要适当地设置语言环境，可能像这样：

```
setlocale(LC_ALL, 'hr_HR'); 
```

然后告诉 sort 尊重语言环境：

```
sort($names,SORT_LOCALE_STRING); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T23:47:39.783

如果可以，您可以将它们导入 MySQL 表并使用该`ORDER BY`子句进行排序，前提是您为数据库/表设置了正确的排序规则。

我确信有一些更简单的解决方案不需要 RDMS。

也看看这个问题：[PHP 中支持 Unicode 的自然排序算法？](https://stackoverflow.com/questions/832709/natural-sorting-algorithm-in-php-with-support-for-unicode)

# jquery - 防止 jQuery 遍历文档的某些部分

> ID：10273166
> 
> 赞同：0
> 
> 时间：2012-04-22T23:45:21.377
> 
> 标签：jquery, asp.net

我正在开发一个大量使用 Ajax 请求的网站，该请求在 DOM 中构建了一个基于选项卡的结构。我担心的是 DOM 会累积太多的选项卡和元素，以至于 JQuery 选择器最终会表现不佳。

有没有办法维护一个大型 DOM，但提供 JQuery 一个“提示”来排除某些部分。例如，我想维护 DOM 中的元素，但只有我的 JQuery 选择器应用于活动选项卡。

我希望有某种“忽略”标签可以动态应用于非活动部分

也许将非活动选项卡元素存储在数据字典中并在它们成为焦点时将它们带入和带出 DOM 是一种替代方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T23:47:56.630

只需提供一个选择器来告诉 jquery 你想要什么。例如，给每个选项卡一个`id`. 然后，如果您想获取选项卡`a`中的所有标签`news`：

```
$("#news a") 
```

然后 jQuery 将只知道在`#news`.

`id`一般来说，查询非常有效，因为只有一个元素可以有一个给定的`id`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-22T23:52:25.007

你可以使用`context`方法：

*最初传递给 jQuery() 的 DOM 节点上下文；如果没有通过，则上下文可能是文档。*

[http://api.jquery.com/context/](http://api.jquery.com/context/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-22T23:52:28.220

正如我在评论中所说，您使用选择器的方式取决于您的代码。但是如果你最终得到一个巨大的选择器列表，你总是可以`filter()`使用任何规则来收集。

```
$elements.filter(function(){
    return $(this).parent('.foo').length; // Only elements with parent `.foo`
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-22T23:49:38.877

在您的选择器上，您可以传递一个上下文作为第二个参数来告诉 jquery 要查看文档的哪个部分，比方说：`var selectedItem = $('#listItem' + i, $('.myList'));`这减少了要查找的节点数量。参考：[http ://www.tvidesign.co.uk/blog/improve-your-jquery-25-excellent-tips.aspx#tip9](http://www.tvidesign.co.uk/blog/improve-your-jquery-25-excellent-tips.aspx#tip9)

# assembly - 汇编错误：“指令操作数必须相同大小”

> ID：10273169
> 
> 赞同：2
> 
> 时间：2012-04-22T23:46:28.283
> 
> 标签：assembly, x86, mov

我对此很陌生，我正在尝试将值从一个数组移动到另一个数组，它应该是：

```
vec1 = 1, 2, 3, 4, 5
vec2 = 5, 4, 3, 2, 1 
```

但我得到一个错误：“指令操作数必须是相同的大小”

```
TITLE program

     .386
     .model flat
     extern _ExitProcess@4:Near
     .data

     vec1 WORD 1, 2, 3, 4, 5; original array
     vec2 WORD 5 DUP(?)
     .code                 
_main:

    mov ebx, 0
    mov ecx, lengthof vec1
    DO:
    mov eax, vec1[ebx]
    mov vec2[ecx], eax
    inc ebx
    loop DO

    push    0                       
    call    _ExitProcess@4          

    end   _main 
```

请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T23:50:31.967

我首先要看的是 a`WORD`是 16 位宽和`eax`32 位宽的事实。因此，当您将某些内容加载到`eax`（没有明确的大小说明符）时，您将获得 32 位而不是 16 位。

此外，我不相信你的值`ecx`会是你所期望的——你应该检查一下，记住它需要从`n-1`向下迭代到`0`包容性。你拥有它的方式，它是从`n`到`1`。

# c - 包含在 C 语言中的通用头文件

> ID：10273183
> 
> 赞同：3
> 
> 时间：2012-04-22T23:48:55.857
> 
> 标签：c

我是 C 语言的新手，想知道是否有一个通用头文件可以包含在 main function 的顶部。在 Java 中，只需在 eclipse 中执行 ctrl+shift+o 并为您导入包非常简单。但是在 C 中，我每次都必须谷歌并添加它。有时，我什至不知道要包含什么库。非常感谢你 。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-22T23:53:40.350

没有通用标题，但您当然可以为您的应用程序制作一个，并将其包含在您的所有文件中。如果您不确定要为需要调用的函数包含哪个文件，可以`man`在 UNIX 上使用命令。例如，

```
man 3 printf 
```

显示了这一点：

> 概要
> 
> ```
> #include <stdio.h>
> 
> int printf(const char * restrict format, ...); 
> ```

如果您使用它足够长的时间，您通常会相对较快地记住函数到标题的“映射”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-22T23:55:12.010

没有一个包罗万象的标题。

除此之外，任何这样的 MS Windows 头文件对于 Unix 都是错误的，而任何这样的 Unix 头文件对于 Windows 都是错误的。即使在 Unix 上，通用头文件是否应该包含所有 X11 头文件？那么 OpenSSL 标头呢？POSIX 线程头呢？其他 POSIX 标头？

您需要了解在哪里可以找到您需要使用的任何给定功能的信息。在 Unix 上，经典资源是“手册页”（意思是“手册页”，通常使用“ `-man`”troff/nroff 宏包格式化）。这些天来，我倾向于使用网络：例如，我在 The Open Group 找到[POSIX](http://www.opengroup.org/onlinepubs/9699919799/toc.htm)手册页。

（请注意，头文件与库是分开的；单个库中的函数可能使用许多头文件。请参阅标准 C 库作为说明。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-22T23:55:58.207

没有*通用*的标头——因为解析每个标头都需要时间，并且有数千个（如果不是数百万个）标头可用，因此无法将它们全部包含到每个编译单元中。你不会想要的，因为其中 99.9% 不会被*使用*，只会不必要地用静态分配使最终的可执行文件膨胀。

每个标准化函数都会告诉您需要在其联机帮助页顶部包含的标题；例如，来自`malloc(3)`：

```
NAME
   calloc, malloc, free, realloc - Allocate and free dynamic
   memory

SYNOPSIS
   #include <stdlib.h>

   void *calloc(size_t nmemb, size_t size);
   void *malloc(size_t size);
   void free(void *ptr);
   void *realloc(void *ptr, size_t size); 
```

因此，您需要`#include <stdlib.h>`在您的项目中，并且有原型供您查看。

如果您想快速查看联机帮助页，可以配置 IDE 以快速向您显示它们。`K`in的默认键绑定`vim`是为光标下的函数加载手册页——但是，由于它使用默认的手册页搜索顺序，它有时会找到错误的页面。（`printf`例如，在 上，它会加载`printf(1)`而不是`printf(3)`. 烦人。如果您愿意，可以使用中`MANSECT`描述的环境变量来更改此行为以在之前向您显示。）`man(1)``3``1`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-22T23:53:30.253

不。

我想您可以创建一个，但这会大大降低您的编译速度。一些 IDE 可能会帮助您找到包含文件。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T00:00:11.760

您可以让 Eclipse 自动插入您经常使用的各种头文件。但是：如果您想学习 CI，建议您完成查找要包含哪些内容的工作。

就像所有的学习一样。边做边学——从重复中学习。

标准 C 库并没有*那么*大——头文件的命名很直观，并且有一个可管理的标准函数列表。

有一个这样的列表[可用](http://www.utas.edu.au/infosys/info/documentation/C/CStdLib.html)并阅读它。当您需要包含等时阅读它。

当你觉得你真的知道什么时候该包括什么时。自动化它。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-23T00:03:35.797

您正在包含一个头文件，因为您使用的是头文件中定义的接口；不是因为有一套标准要包括在内。那么，你如何确定你需要什么接口呢？有两个基本选项：

1.  查找头文件或头文件的描述并查看它们以了解接口，或者
2.  使用“apropos search_term”或“man interface_function”。

作为初学者，选项#1 将是一个好的开始——查看`/usr/include`或找到一本名为“C 标准库”（或类似内容）的书。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-23T00:50:21.233

一本好的参考手册（例如[这个](http://www.careferencemanual.com/)）将有一个附录列出所有库函数及其相关的头文件。您还可以查看在线[C 语言标准](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf)第 7 章中的类似列表。

# vba - 在 VBA 中对对象集合进行排序

> ID：10273184
> 
> 赞同：4
> 
> 时间：2012-04-22T23:48:58.897
> 
> 标签：vba, sorting, collections, excel

我正在尝试编写一个对对象集合进行排序的函数。由于对象都是相同的类型（相同的用户定义类），它们的属性集是相同的。是否有可能（通过代码）发现对象的属性，以便将集合放入一个二维数组中，每一行代表一个对象，每一列代表它的一个属性？

另一种解决方案是将集合中的每个对象复制到一个对象数组中，并根据它们的一个属性对它们进行排序，该属性的名称作为字符串传递给函数。但是我看不到如何使用作为字符串传递的属性名称来指向对象的属性。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T00:23:05.337

对于一个集合，最好按它的键对其进行排序（这就是它们的用途）——但如果你没有键列表（丢失了你的键！）：

```
'Give an input "Data As Collection"

    Dim vItm As Variant
    Dim i As Long, j As Long
    Dim vTemp As Variant

    For i = 1 To Data.Count – 1
        For j = i + 1 To Data.Count
            If CompareKeys(Data(i).myMemberKey, Data(j).myMemberKey) Then
                'store the lesser item
                vTemp = Data(j)

                'remove the lesser item
                Data.Remove j

                're-add the lesser item before the greater Item
                Data.Add vTemp, , i
            End If
        Next j
    Next i 
```

想出自己的 CompareKey 函数，如果 UDT 成员变量彼此之间是 >、< 或 0，它将返回 true 或 false。您必须删除并重新添加的原因是您不能在 vb6/vba 集合对象中“交换”内部成员。

祝你好运

编辑：

要以编程方式访问您具有名称的属性（作为字符串），请以下列形式使用 VB`CallByName` [函数](http://www.pcreview.co.uk/forums/vb6-access-object-properties-name-t1409534.html)：

```
 Result = CallByName(MyObject, "MyProperty", vbGet) 
```

# javascript - 在 JavaScript 事件代码中对回调和参数使用匿名函数而不是命名函数有什么好处？

> ID：10273185
> 
> 赞同：65
> 
> 时间：2012-04-22T23:49:12.250
> 
> 标签：javascript, coding-style, callback, anonymous-function, code-readability

我是 JavaScript 新手。我了解该语言的许多概念，我一直在阅读原型继承模型，并且我正在用越来越多的交互式前端内容来刺激我的口哨。这是一种有趣的语言，但我总是对许多非平凡交互模型中典型的回调意大利面条感到厌烦。

我一直觉得奇怪的是，尽管 JavaScript 嵌套回调嵌套是可读性的噩梦，但我在许多示例和教程中很少看到的一件事是使用预定义的命名函数作为回调参数。我白天是一名 Java 程序员，[摒弃了对代码单元的 Enterprise-y 名称的刻板印象，](http://projects.haykranen.nl/java/)我喜欢使用一种具有强大功能 IDE 选择的语言的一件事就是使用有意义的、如果很长，名称可以使代码的意图和含义更加清晰，而不会使实际生产变得更加困难。那么为什么在编写 JavaScript 代码时不使用相同的方法呢？

考虑一下，我可以提出支持和反对这个想法的论点，但是我对语言的天真和新奇使我无法得出关于为什么这在技术层面上会很好的任何结论。

## 优点：

*   灵活性。具有回调参数的异步函数可以通过许多不同的代码路径之一访问，并且可能不得不编写一个命名函数来解决每个可能的边缘情况。
*   速度。它在很大程度上影响了黑客的心态。用螺栓固定它，直到它起作用。
*   其他人都在做
*   更小的文件大小，即使是微不足道的，但每一点在网络上都很重要。
*   更简单的 AST？我会假设匿名函数是在运行时生成的，因此 JIT 不会将名称映射到指令，但我只是在猜测这一点。
*   发货更快？这个也不确定。再次猜测。

## 缺点：

*   这是可怕的和不可读的
*   当您将坚果嵌套在回调沼泽的深处时，它会增加混乱（公平地说，这可能意味着您一开始就编写了结构不佳的代码，但这很常见）。
*   对于没有功能背景的人来说，这可能是一个奇怪的概念

由于有如此多的现代浏览器显示出比以前更快地执行 JavaScript 代码的能力，我看不出使用匿名回调如何获得任何微不足道的性能提升是必要的。似乎，如果您处于使用命名函数可行的情况（可预测的行为和执行路径），那么没有理由不这样做。

那么是否有任何我不知道的技术原因或陷阱使这种做法如此普遍是有原因的？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-04-22T23:58:49.390

我使用匿名函数有三个原因：

1.  如果不需要名称，因为该函数只在一个地方被调用，那么为什么要在你所在的任何命名空间中添加一个名称。
2.  匿名函数被声明为内联，内联函数的优势在于它们可以访问父作用域中的变量。是的，您可以在匿名函数上命名，但如果它被声明为内联，那通常是没有意义的。所以内联有一个显着的优势，如果你正在做内联，几乎没有理由给它命名。
3.  当处理程序被定义在调用它们的代码中时，代码看起来更加独立和可读。您可以以几乎顺序的方式阅读代码，而不必去查找具有该名称的函数。

我确实尽量避免匿名函数的深度嵌套，因为这可能很难理解和阅读。通常，当这种情况发生时，有一种更好的方法来构建代码（有时使用循环，有时使用数据表等），并且命名函数通常也不是解决方案。

我想我会补充一点，如果回调开始变得超过 15-20 行，并且它不需要直接访问父范围中的变量，我会很想给它一个名字并将它分解成它是在别处声明的自己命名的函数。这里肯定有一个可读性点，如果将一个变长的非平凡函数放在自己的命名单元中，它就更易于维护。但是，我最终得到的大多数回调都没有那么长，而且我发现将它们保持内联更具可读性。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-23T14:55:33.820

我自己更喜欢命名函数，但对我来说归结为一个问题：

***我会在其他地方使用此功能吗？***

如果答案是肯定的，我命名/定义它。如果没有，请将其作为匿名函数传递。

如果你只使用一次，用它来挤满全局命名空间是没有意义的。在当今复杂的前端中，可能是匿名的命名函数的数量迅速增长（在真正复杂的设计中很容易超过 1000 个），通过首选匿名函数导致（相对）较大的性能提升。

然而，代码的可维护性也极其重要。每种情况都不同。如果您一开始并没有编写很多这些函数，那么无论哪种方式都没有坏处。这真的取决于你的喜好。

关于名字的另一个注释。养成定义长名称的习惯确实会损害您的文件大小。举个例子。

假设这两个函数都做同样的事情：

```
function addTimes(time1, time2)
{
    // return time1 + time2;
}

function addTwoTimesIn24HourFormat(time1, time2)
{
    // return time1 + time2;
} 
```

第二个确切地告诉您它在名称中的作用。第一个比较模棱两可。但是，名称中有17个字符的差异。假设该函数在整个代码中被调用了 8 次，那是您的代码不需要的**153 个额外字节。**不是很大，但如果这是一种习惯，将其推断为 10 甚至 100 的函数将很容易意味着下载量有几 KB 的差异。

然而，同样需要权衡可维护性与性能的好处。这是处理脚本语言的痛苦。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-11-20T16:54:52.667

派对有点晚了，但一些尚未提及的功能方面，匿名或其他......

Anon func 在团队中关于代码的类人对话中不容易被提及。例如，“Joe，您能解释一下该算法在该函数中的作用。......哪个？fooApp 函数中的第 17 个匿名函数......不，不是那个！第 17 个！”

Anon funcs 对调试器也是匿名的。（呃！）因此，调试器堆栈跟踪通常只会显示一个问号或类似的东西，当您设置多个断点时它的用处不大。你打了断点，但发现自己向上/向下滚动调试窗口以找出你在程序中的地狱，因为嘿，问号函数就是不这样做！

对污染全局命名空间的担忧是有效的，但可以通过将函数命名为自己的根对象中的节点来轻松解决，例如“myFooApp.happyFunc = function ( ... ) { ... }; ”。

全局命名空间中可用的函数，或者像上面一样作为根对象中的节点，可以在开发和调试期间直接从调试器调用。例如，在控制台命令行中，执行“myFooApp.happyFunc(42)”。这是一种极其强大的能力，在编译的编程语言中（本机）不存在。尝试使用匿名函数。

Anon funcs 可以通过将它们分配给 var 来提高可读性，然后将 var 作为回调传递（而不是内联）。例如： var funky = function ( ... ) { ... }; jQuery('#otis').click(funky);

使用上述方法，您可以将多个匿名函数分组在父函数的顶部，然后在其下方，顺序语句的内容变得更加紧密，并且更易于阅读。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-02-11T16:19:40.183

它使用命名函数更具可读性，并且它们还能够自引用，如下例所示。

```
(function recursion(iteration){
    if (iteration > 0) {
      console.log(iteration);
      recursion(--iteration);
    } else {
      console.log('done');
    }
})(20);

console.log('recursion defined? ' + (typeof recursion === 'function')); 
```

[http://jsfiddle.net/Yq2WD/](http://jsfiddle.net/Yq2WD/)

当您希望有一个引用自身但不添加到全局命名空间的立即调用函数时，这很好。它仍然可读但不污染。吃你的蛋糕。

嗨，我的名字是 Jason 或者嗨，我的名字是 ???? 你选。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2021-06-09T18:59:32.167

匿名函数很有用，因为它们可以帮助您控制公开哪些函数。

更多细节：如果没有名称，您不能在任何地方重新分配或篡改它，只能在它创建的确切位置。一个好的经验法则是，如果您不需要在任何地方重复使用此函数，最好考虑使用匿名函数是否能更好地防止在任何地方被篡改。

示例：如果您正在与很多人一起处理一个大项目，如果您在一个更大的函数中包含一个函数并且您命名它怎么办？这意味着任何与您合作并在较大功能中编辑代码的人都可以随时对较小的功能进行处理。例如，如果您将其命名为“add”，而有人将“add”重新分配给同一范围内的数字，该怎么办？然后整个事情就崩溃了！

PS - 我知道这是一个非常古老的帖子，但是这个问题有一个更简单的答案，我希望有人在我作为初学者自己寻找答案时这样说 - 我希望你可以恢复一个旧线程！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-05-02T22:08:58.210

好吧，为了我的论点，为了清楚起见，以下是我书中的所有匿名函数/函数表达式：

```
var x = function(){ alert('hi'); },

indexOfHandyMethods = {
   hi: function(){ alert('hi'); },
   high: function(){
       buyPotatoChips();
       playBobMarley();
   }
};

someObject.someEventListenerHandlerAssigner( function(e){
    if(e.doIt === true){ doStuff(e.someId); }
} );

(function namedButAnon(){ alert('name visible internally only'); })() 
```

优点：

*   它可以减少一些麻烦，特别是在递归函数中（你可以（实际上应该因为 arguments.callee 已被弃用）仍然在内部使用最后一个示例的命名引用），并清楚地表明该函数只会在这个函数中触发地方。

*   代码易读性获胜：在将匿名函数分配为方法的对象字面量示例中，当该对象字面量的全部意义在于将一些相关功能放入同一个方便参考的地点。但是，当在构造函数中声明公共方法时，我倾向于定义内联标记函数，然后将其分配为 this.sameFuncName 的引用。它让我可以在内部使用相同的方法，而无需使用“this”。当他们互相调用时，不关心定义的顺序。

*   对于避免不必要的全局命名空间污染很有用 - 但是，内部命名空间不应该被多个团队同时广泛填充或处理，因此这个论点对我来说似乎有点愚蠢。

*   在设置短事件处理程序时，我同意内联回调。必须寻找 1-5 行函数是愚蠢的，特别是因为使用 JS 和函数提升，定义可能会在任何地方结束，甚至不在同一个文件中。这可能是在不破坏任何东西的情况下偶然发生的，不，你并不总是能控制这些东西。事件总是导致回调函数被触发。没有理由向需要扫描的名称链添加更多链接，只是为了在大型代码库中对简单的事件处理程序进行逆向工程，并且可以通过将事件触发器本身抽象为在调试时记录有用信息的方法来解决堆栈跟踪问题模式打开并触发触发器。我实际上开始以这种方式构建整个接口。

*   当您希望函数定义的顺序很重要时很有用。有时你想确定一个默认函数是你认为的，直到代码中的某个点可以重新定义它。或者，当依赖关系被打乱时，您希望破坏更加明显。

缺点：

*   匿名函数不能利用函数提升。这是一个主要区别。我倾向于充分利用提升来在底部定义我自己显式命名的函数和对象构造函数，并在顶部找到对象定义和主循环类型的东西。我发现当你很好地命名你的变量时，它使代码更容易阅读，并在 ctrl-Fing 之前对正在发生的事情有一个广泛的了解，只有当它们对你很重要时才能获得详细信息。在高度事件驱动的界面中，提升也可以是一个巨大的好处，在这些界面中，对可用的内容施加严格的顺序可能会咬到你。提升有其自身的警告（如循环引用潜力），但如果使用得当，它是一种非常有用的工具，可用于组织和使代码清晰易读。

*   易读性/调试。当然，它们有时会被过度使用，这会使调试和代码易读性变得很麻烦。例如，如果您不以合理的方式封装 $soup 的近乎不可避免的非繁重和大量重载的参数，那么严重依赖 JQ 的代码库可能是一个严重的 PITA 来阅读和调试。例如，JQuery 的 hover 方法是当您将两个匿名函数放入其中时过度使用匿名函数的经典示例，因为初学者很容易认为它是标准事件侦听器分配方法，而不是一个重载分配的方法一两个事件的处理程序。`$(this).hover(onMouseOver, onMouseOut)`比两个匿名函数要清楚得多。

# python - [:] 如何在 python 中工作？

> ID：10273186
> 
> 赞同：4
> 
> 时间：2012-04-22T23:49:17.397
> 
> 标签：python, copy

它复制一个列表对吗？但是在代码中，我正在查看`x = x[:]`我不理解的代码。两个副本怎么能被称为同一个东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-22T23:51:06.883

首先计算右边的值，放入一个临时变量中，然后将 x 重新分配给临时变量。当然，你永远看不到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-22T23:54:05.450

回答您的问题“[:] 如何在 python 中工作？” 在这个特定表达式的上下文中，它本身有点棘手

```
x = x[:] 
```

就像说的那样，这不太可能发生`a = a`。

你更有可能看到类似的东西

```
a = x[:] 
```

简而言之，它会复制所引用的列表`x`并将其分配给`a`.

如果你只是做了

```
a = x 
```

两个变量都指向同一个位置，对任何一个变量的任何更改都将反映在两者中。

如果您不使用冒号表示法，会发生以下情况，例如`a = x`：

```
In [31]: x = range(5)
In [32]: a = x

In [33]: a
Out[33]: [0, 1, 2, 3, 4]

In [34]: x
Out[34]: [0, 1, 2, 3, 4]

In [35]: a[3] = 99    # I am making a change in a

In [36]: a
Out[36]: [0, 1, 2, 99, 4]

In [37]: x
Out[37]: [0, 1, 2, 99, 4]   # but x changes too! 
```

将此与`a = x[:]`

```
In [38]: x = range(5)
In [39]: a = x[:]

In [40]: a
Out[40]: [0, 1, 2, 3, 4]

In [41]: x
Out[41]: [0, 1, 2, 3, 4]

In [42]: a[3] = -99    

In [43]: a
Out[43]: [0, 1, 2, -99, 4]  # a changes

In [44]: x
Out[44]: [0, 1, 2, 3, 4]    # x does not change 
```

注意：@gnibbler 提供了一个简短而完整的示例（在评论下方），您可能会遇到该示例，`x = x[:]`并且在该上下文中分配将起到有用的作用（尽管我们不知道您最初是在什么上下文中遇到的）。

# android - 安卓 SDK。字符串索引越界异常

> ID：10273189
> 
> 赞同：0
> 
> 时间：2012-04-22T23:49:23.983
> 
> 标签：android, android-2.2-froyo

我终于有了适用于我的应用程序的地图和点（数组）。快速提问：我有一个致命的异常`substring()`，一个“stringIndexOutOfBoundException”

一般来说，这是指什么？

我使用 ? 越过字符串的末尾`substring()`？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T00:38:09.693

> ```
> testing.substring(1,2); 
> ```
> 
> （我想解析每个字符以查找特定字符）

我不会`substring()`用于抓取长度为 1 的字符串（这只是一个字符），而是[`charAt(int)`](http://developer.android.com/reference/java/lang/String.html#charAt%28int%29)用于特定位置。如果您需要遍历字符串中的所有字符，最好将整个内容转换为`char[]`第一个（使用[`toCharArray()`](http://developer.android.com/reference/java/lang/String.html#toCharArray%28%29)）并对其进行迭代。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T23:55:27.443

[就像这里](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#substring%28int%29)的官方文档中所述：

> 公共字符串子字符串（int beginIndex）
> 
> 返回一个新字符串，它是该字符串的子字符串。子字符串以指定索引处的字符开始并延伸到该字符串的末尾。
> 
> 抛出： IndexOutOfBoundsException - 如果 beginIndex 为负数或大于此 String 对象的长度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-22T23:51:12.750

是的，你通常会越过你的字符串边界。

Java [API](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#substring%28int%29)甚至告诉你...

> IndexOutOfBoundsException - 如果 beginIndex 为负数或大于此 String 对象的长度。

您应该习惯使用 API。它告诉您方法抛出了哪些异常以及原因。

在尝试子字符串之前尝试打印字符串长度和值。这将帮助您看到问题所在。

例如...

```
String testing = "Hello StackOverflow";
System.out.println("Length of testing = " + testing.length);
System.out.println("Value of testing = " + testing);
testing.substring(1,2); 
```

# mysql - 组合 2 个表，但首先显示选定的行，然后以随机顺序显示其余的行

> ID：10273191
> 
> 赞同：0
> 
> 时间：2012-04-22T23:49:27.493
> 
> 标签：mysql

我有 2 张桌子，trophies_list 和 trophies_won。我想先列出所有已赢得的奖杯，然后按随机顺序列出所有未赢得的奖杯。我已经搜遍了，但没有运气。

我的桌子...

**trophies_won**：

trophy_id获胜者
ID

**奖杯列表**：

trophy_id
奖杯名

澄清一下，我希望列出所有奖杯，但首先显示出现在“trophies_won”中的奖杯和选择的“winners_id”，然后以随机顺序显示其余奖杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-22T23:58:46.693

你需要一个[外连接](https://stackoverflow.com/questions/38549/sql-difference-between-inner-and-outer-join)。

如果您不关心“赢得”奖杯出现的顺序，您可以非常简单地执行以下操作（因为`winner_id`将`NULL`针对那些尚未赢得的奖杯，并且[`NULL`按降序排列“在”所有其他结果之后](http://dev.mysql.com/doc/refman/5.5/en/working-with-null.html)):

```
SELECT * FROM
  trophies_list
  NATURAL LEFT JOIN trophies_won
ORDER BY winner_id DESC, RAND(); 
```

当然，如果您说“所有未赢得的奖杯都应该按随机顺序排列”时，您的意思是您只是不关心顺序，您可以省略尾随的“ `, RAND()`”。

* * *

**更新**

在回应您的评论时，我认为您实际上正在寻找类似的东西：

```
SELECT trophies_list.*, NOT ISNULL(trophies_won.winner_id) AS won FROM
  trophies_list
  LEFT JOIN trophies_won ON (
        trophies_won.trophy_id = trophies_list.trophy_id
    AND trophies_won.winner_id = 43
  )
ORDER BY won DESC, RAND(); 
```

通过执行您所追求的标准的外部连接`ON`，您可以在所有奖杯列表中识别出符合该标准和不符合该标准的奖杯。在这种情况下，指定的获胜者赢得了哪些奖杯，哪些没有。

然后，该`ORDER BY`子句确保结果按已赢得的奖杯排列在前，然后是未赢得的奖杯；在这些层中，顺序是随机的（同样，如果您根本不关心顺序，您可以删除`, RAND()`增加不必要开销的部分）。

# c# - 大消息的 WCF 替代方案

> ID：10273192
> 
> 赞同：2
> 
> 时间：2012-04-22T23:49:29.940
> 
> 标签：c#, .net, wcf, azure

我在 azure 中部署了 WCF 服务。我有一个使用此服务的客户端，该服务在 Windows Phone 7 上运行。一切正常，但是当我尝试向服务器发送一些较大的文件或丢失项目的枚举时，发生了错误。我发现可以在配置文件中配置最大消息大小、最大数组长度等。所以我在默认值中添加了几个零并且它起作用了。但是，我对这个解决方案不满意，因为它很脏。

我的问题是：

1.盲目地增加消息大小限制的缺点是什么，它如何影响服务？

2.我有什么替代方案而不是增加消息大小？

特别是，我需要向服务器发送包含相同元数据和大量位置点的 GPS 轨迹。

如果我正确理解概念，默认情况下 wcf 使用基于 XML 的 SOAP。所以发送的对象被编码为 XML（类似于 .net 中的 XML 序列化？）。那么它可以以某种方式切换到某种二进制模式来发送 BLOBS 或上传大型对象流吗？还是我唯一的选择是完全绕过 WCF 服务并直接上传到服务器存储（如 SQL azure 或 Azure Blob 服务），这会公开 API 来这样做？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T00:11:10.697

正如佩雷茨在评论中提到的那样，这就是应该发生的事情。

默认值就是-- **defaults**。不是“推荐”设置，也不是伪最大尺寸。它们可以根据您的需要进行更改（并且应该是）。

您*可以*使用 net.tcp 绑定（如果您还没有），它可以更好地处理数据（关于序列化），但您所做的一切都在 WCF 及其能力的范围内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T20:57:32.200

我对巨大的 gps 轨道有同样的问题。我真的建议不要将肥皂用于此类任务。您可以使用 WebHttpBinding 并从您的存储中实现流式传输，或者使用 ASP.NET WebAPI（将随 MVC4 提供并且可以在 IIS 之外托管）之类的东西来将流传输到客户端的低级别管道。这将允许您实现多个下载流以及此类任务中可能需要的所有内容。

在此类系统的整体设计理念中，尽量不要认为一种工具可以解决您的问题。只需使用正确的任务。如果您有一些业务任务 - 为他们实现基于事务的 ws-* 服务。要传输大量数据 - 使用 REST 服务之类的东西。这也将有助于查询曲目。

例如：Tracks/{deviceid}/{trackDate}.{format}。

随意问=）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T04:51:55.927

您不应通过在这些设置的末尾添加 0 来任意增加消息大小。是的，它们是可以更改的默认值，但是在达到限制时增加消息大小并不是您应该始终采用的方法。具有如此小尺寸的原因之一是安全性：它可以防止客户端用大量消息淹没服务器并将它们关闭。它还鼓励客户发送有助于可扩展性的小消息。

您可以使用一些编码：这取决于使用的绑定。我认为 WCF 无论如何都会将 SOAP 编码为二进制......但我可能错了，我已经有 6 个月没有接触过 WCF 了。

在以前的项目中，每当我们达到大小限制时，我们都会考虑将数据切割成更小的块。我们做过的最好的事情之一是在我们的 GUI 中实现可分页网格，它一次只能从服务器获取 10-20 条左右的记录。Entity Framework 允许我们编写一个通用的跳过获取查询来为我们所有的网格执行此操作。

只是增加尺寸是一个简单的解决方法......直到你不能进一步增加。这是一种脆弱而破碎的方法。

# android - 背景列表视图中的每一行

> ID：10273193
> 
> 赞同：3
> 
> 时间：2012-04-22T23:49:34.883
> 
> 标签：android, listview

我正在尝试自定义 a`ListView`以使每一行都具有默认背景图像和突出显示的背景图像。

但是，高亮背景图片影响单行，默认背景图片影响整个`ListView`；但我需要它来影响每一行。

有人可以告诉我该怎么做吗？

这是我的代码：

**布局/main.xml：**

```
<ListView
 android:id="@+id/list"
 android:layout_width="match_parent"
 android:layout_height="wrap_content"
 android:dividerHeight="1dip"       
 android:listSelector="@drawable/bg_highlighted"
/> 
```

**可绘制/选择器.xml：**

```
<selector xmlns:android="http://schemas.android.com/apk/res/android">

<item android:state_selected="true" android:drawable="@drawable/bg_default"/>
<item android:state_focused="true" android:drawable="@drawable/bg_default"/>

</selector> 
```

**src/main.java：**

```
 ArrayAdapter<String> adapter = new ArrayAdapter<String>(
            this,R.layout.list, mStrings); /*"Item1","Item2","Item3","Item4"*/
    ListView lv = (ListView)findViewById(R.id.list);
    lv.setAdapter(adapter);
    lv.setBackgroundResource(R.drawable.selector); 
```

作为默认背景和突出显示的背景，我使用 png 图像。

[这就是我所拥有的](http://i.stack.imgur.com/JNLVo.png)，但这[就是我想要](http://i.stack.imgur.com/LdLqz.png)的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T23:21:20.170

I did like **heepie** advised above.
And as I understand there is not a property that allow to set background drawable to single row of `ListView` directly. It's should be done by creating custom view in `getView` method of a custom adapter. This is my final code. May be it will be useful to someone.

**layout/main.xml:**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout    
       xmlns:android="http://schemas.android.com/apk/res/android"
       android:layout_width="fill_parent"
       android:layout_height="fill_parent"
       android:orientation="vertical" >

        <ListView
           android:id="@+id/my_list"
           android:layout_width="match_parent"
           android:layout_height="wrap_content"
         />

</LinearLayout> 
```

**layout/my_list_item.xml:**

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/my_textview"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:gravity="left|center_vertical"
    android:paddingLeft="6dip"
    android:textColor="#FFFFFF"
    android:background="@drawable/list_selector"    
/> 
```

**drawable/list_selector.xml:**

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:state_pressed="true" android:drawable="@drawable/bg_highlighted" />
    <item android:drawable="@drawable/bg_default" />
</selector> 
```

Drawable png images:
**drawable/bg_default.png:**
![bg_default](../Images/b74d2d1806ab3fcc91c6562d0e7407b6.png)

**drawable/bg_highlighted.png:**
![bg_highlighted](../Images/eaa505f102f88c5dd636a0c56e5f8968.png)

**src/main.java:**

```
public class main extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        MyAdapter adapter;
        ArrayList<String> mStrings = new ArrayList<String>();
        mStrings.add("Item 1");
        mStrings.add("Item 2");
        mStrings.add("Item 3");
        mStrings.add("Item 4");

        ListView lv = (ListView) findViewById(R.id.my_list);
        adapter = new MyAdapter(this, mStrings);
        lv.setAdapter(adapter);
    }
} 
```

**src/MyAdapter.java:**

```
public class MyAdapter extends BaseAdapter {

public Activity activity;
ArrayList<String> data = new ArrayList<String>();
private static LayoutInflater inflater = null;

public MyAdapter(Activity a, ArrayList<String> d) {
    activity = a;
    data = d;
    inflater = LayoutInflater.from(activity);
}    

@Override
public View getView(final int position, View convertView, ViewGroup parent) {
    ViewHolder holder = null;
    if (convertView == null) {
        convertView = inflater.inflate(R.layout.my_list_item, null);
        holder = new ViewHolder();
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder)convertView.getTag();
    }

    convertView.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View v) {
            //Touch on view handle
            Log.d("", "Touched row "+position);
        }

    });

    //customizing view
    holder.textView = (TextView)convertView.findViewById(R.id.my_textview);
    holder.textView.setText(data.get(position));

    return convertView;
}       

public static class ViewHolder {
    public TextView textView;
}
@Override
public int getCount() {
    return data.size();
}
@Override
public Object getItem(int position) {
    return position;
}
@Override
public long getItemId(int position) {
    return position;
}
} 
```

**And this is a result**:

![result.png](../Images/e8eb7acdf562ba256c4858ca23225880.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T02:18:12.900

使用扩展 baseadapter 的新类并从 getview 方法更改每一行的背景，而不是使用 arrayadapter 可能会更好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T00:08:28.280

我看到的问题是您实际上在这里使用项目选择器作为整个 ListView 背景：

> ```
> lv.setBackgroundResource(R.drawable.selector); 
> ```

您所要做的就是将此选择器设置为您内部根视图的背景`layout/list.xml`（为列表中的每个项目膨胀的布局）

# php - 如何在不离开网站的情况下显示链接中的信息？PHP

> ID：10273206
> 
> 赞同：0
> 
> 时间：2012-04-22T23:51:30.567
> 
> 标签：php

我让网站完全正常工作并从 rss 提要返回信息，因为它返回网站链接我如何显示链接中的信息而不是将用户重定向回原始网站？

```
<?php

    $query = 'http://query.yahooapis.com/v1/public/yql?q=Select%20*%20from%20rss%20where%20url%3D%22http%3A%2F%2Fnestor.sunderland.ac.uk%2F~bf71wx%2FphpTest%2Fjquery.mobile-1.0.1%2520-%2520%25E8%25A4%2587%25E8%25A3%25BD%2Fjquery.mobile-1.0.1%2Fdemos%2Fdocs%2Frss%2FNews.xml%22%20&diagnostics=true';
    $xml = simplexml_load_file($query);
    //var_dump($xml);

    echo '<h2>World of Tank News</h2>';

    //iterate over query result set
    $results = $xml->results;
    foreach ($results->item as $r){
        echo $r->title . "<br />";
        echo "<a href=\"" . $r->link . "\">" . $r->link . "</a><br /><br />";
        echo 'Publish Date - ';

    }

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-22T23:53:46.823

使用 curl 从链接中读取信息并发布它，例如

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $file);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_REFERER, $_SERVER['REQUEST_URI']);
$result = curl_exec($ch);
curl_close($ch); 
```

没必要。您可以将此代码添加到您的程序中，例如

```
<?php

$query = 'http://query.yahooapis.com/v1/public/yql?q=Select%20*%20from%20rss%20where%20url%3D%22http%3A%2F%2Fnestor.sunderland.ac.uk%2F~bf71wx%2FphpTest%2Fjquery.mobile-1.0.1%2520-%2520%25E8%25A4%2587%25E8%25A3%25BD%2Fjquery.mobile-1.0.1%2Fdemos%2Fdocs%2Frss%2FNews.xml%22%20&diagnostics=true';
$xml = simplexml_load_file($query);
//var_dump($xml);

echo '<h2>World of Tank News</h2>';

//iterate over query result set
$results = $xml->results;
foreach ($results->item as $r){
echo $r->title . "<br />";
$ch = curl_init();

$timeout = 5;
curl_setopt($ch,CURLOPT_URL,$r->link);
curl_setopt($ch,CURLOPT_RETURNTRANSFER,1);
curl_setopt($ch,CURLOPT_CONNECTTIMEOUT,$timeout);
$result = curl_exec($ch);
curl_close($ch);
echo $result;
//        echo "<a href=\"" . $r->link . "\">" . $r->link . "</a><br /><br />";
//        echo 'Publish Date - ';

}

?> 
```

# codeigniter - 将数据从模型传递到控制器的正确方法

> ID：10273207
> 
> 赞同：0
> 
> 时间：2012-04-22T23:51:31.673
> 
> 标签：codeigniter, object

我有一个模型，它从我的数据库（有时来自一个或多个表）中获取复杂数据。它们都是关于一些 - 让我们说 - 一个学生。我应该有一个 Student 类，以便我在我的模型中创建它的一个实例，并填充它的属性并将其返回给控制器。

*   我可以这样做吗，这很奇怪吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T08:15:41.327

这并不奇怪。在 MVC 世界中听起来很正常。如果第一个模型类似于 StudentRegister，那么它负责在给定标准的情况下查找学生。将检索到的数据本身建模为学生集合并返回给 StudentRegister 的客户端是合适的。所以，例如，你可以有

```
class StudenteRegister extends CI_Model {

public function __construct() {
   parent::__construct();
   $this->ci = & get_instance();

   $this->ci->load->model('student');
}

public function findStudent($studentid)
{
   $student = null; // will hold Student object once constructed
   // some code to query database and construct Student object
   return $student;
} 
```

# .net - ZedGraph：仅获取可见曲线点的 PointPairList

> ID：10273208
> 
> 赞同：3
> 
> 时间：2012-04-22T23:51:47.630
> 
> 标签：.net, winforms, zedgraph

如何仅获取可见曲线数据的 PointPairList 而不是 Curveitem 列表中的所有点？此列表应在缩放或平移时动态更改。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-02-11T10:22:00.330

似乎没有为您执行此操作的 ZedGraph API 方法。但是，下面的代码演示了一个 VisiblePoints 方法，该方法返回一个 PointPairList 并在一个非常特定的 ZedGraph 用例下工作。

```
using System;
using System.Collections.Generic;
using System.Drawing;
using System.Linq;
using System.Windows.Forms;
using ZedGraph;

namespace ZedGraphMain
{
    public class ZedGraphDemo : Form
    {
        public ZedGraphDemo()
        {
            var graphControl = new ZedGraphControl();
            graphControl.Dock = DockStyle.Fill;
            graphControl.IsShowPointValues = true;
            Controls.Add(graphControl);
            var points = new PointPairList();
            for (double i = 0; i <= 5.0; i += 1)
                points.Add(i, i);

            var curve = graphControl.GraphPane.AddCurve("A Label", points, Color.ForestGreen);

            graphControl.RestoreScale(graphControl.GraphPane);
            graphControl.ZoomEvent += (_, __, ___) => LogVisibility(graphControl, curve, points);
        }

        private static PointPairList VisiblePoints(ZedGraphControl control, LineItem lineItem, PointPairList points)
        {
            var pointPairList = new PointPairList();
            pointPairList.AddRange(points.Where(pp => IsVisible(control, lineItem, pp)).ToList());
            return pointPairList;
        }

        private static bool IsVisible(ZedGraphControl control, LineItem lineItem, PointPair point)
        {
            GraphPane pane = control.GraphPane;
            Scale xScale = lineItem.GetXAxis(pane).Scale;
            Scale yScale = lineItem.GetYAxis(pane).Scale;
            return point.X > xScale.Min && point.X < xScale.Max && point.Y > yScale.Min && point.Y < yScale.Max;
        }

        private static void LogVisibility(ZedGraphControl control, LineItem lineItem, PointPairList points)
        {
            List<PointPair> visiblePoints = VisiblePoints(control, lineItem, points);
            Console.Out.WriteLine(DateTime.Now + ": " + string.Join(",", visiblePoints.Select(pp => string.Format("({0:N1}, {1:N1})", pp.X, pp.Y))));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-23T20:05:14.650

我相信 PointPairList 总是包含所有的点。

绘制的点始终存在，只是它们如何转换为像素随缩放和平移而变化。

我知道我需要为大型数据集创建自己的 AverageFilteredList。我有数万个点，由于内存使用，应用程序将停止运行（为简洁起见，删除了实现）：

```
public class AverageFilteredPointList : IPointList 
{
  <snip>

  public int Count { get; set; }
  public int MaxPts { get; set; }

  public PointPair this[int index] { get; set; }
  public void SetBounds(double min, double max, int maxPts) { }
} 
```

我认为，如果您想收集诸如可见“点”之类的信息，则必须实现自己的 IPointList 类，该类在发生缩放/平移时处理自己的内部点。

另外，我不确定这是否会对您有所帮助，但您可以使用以下 GraphPane 函数来确定像素位置所在的实际 DataPoint：

```
ReverseTransform(pt, out xSampleData, out ySampleData); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-08T07:44:26.027

The existing [FilteredPointList](http://zedgraph.sourceforge.net/documentation/html/T_ZedGraph_FilteredPointList.htm) matches exactly your requirements.

It contains a [detailed explanation](http://web.archive.org/web/20141020014042/http://zedgraph.dariowiz.com/indexe3e9.html?title=Use_a_FilteredPointList_to_reduce_the_number_of_points) about how to use it as well as a [link to *a* ZedGraph wiki](http://web.archive.org/web/20141002174008/http://zedgraph.dariowiz.com/index.html?title=Main_Page).

# c# - 对 CreateEnvironmentBlock 的 P/Invoke 调用最多需要 30 秒？

> ID：10273212
> 
> 赞同：2
> 
> 时间：2012-04-22T23:52:57.280
> 
> 标签：c#, performance, winapi, pinvoke

我一直在使用[此 CodeProject 页面](http://www.codeproject.com/Articles/36581/Interaction-between-services-and-applications-at-u)`ProcessStarter`中的C# 类作为 Windows 服务中的交互式用户启动一个进程。

我注意到（在运行 Win7 和 XP 的大约 50 台不同的计算机上测试代码之后）P/Invoke 调用[`CreateEnvironmentBlock`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762270%28v=vs.85%29.aspx)（在`Run`方法中）可能需要长达 30 秒才能返回（有时很快，有时不是） .

我看到[其他人有这个问题，但他们得到了一个错误](http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/c6512846-adb5-4235-8a02-1e4b5536e347/)（对我来说它总是有效的）。

**为什么通话[`CreateEnvironmentBlock`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762270%28v=vs.85%29.aspx)要花这么长时间？**

* * *

P/Invoke 声明：

```
[DllImport("userenv.dll", CharSet = CharSet.Auto, SetLastError = true)]
static extern bool CreateEnvironmentBlock(out IntPtr lpEnvironment, IntPtr hToken, bool bInherit); 
```

`CreateEnvironmentBlock`称呼：

```
IntPtr lpEnvironment = IntPtr.Zero;
bool resultEnv = CreateEnvironmentBlock(out lpEnvironment, primaryToken, false); 
```

* * *

编辑：附加信息：

*   它并不*总是*30 秒 - 它（在不同的计算机上）在几秒到 30 秒之间变化。

*   [`procmon`](http://technet.microsoft.com/en-us/sysinternals/bb896645)显示了一大堆对 和 等键的注册表读取`HKLM\System\CurrentControlSet\Control\Session Manager\Environment`，`HKCU\Volatile Environment`但***没有网络活动***。

*   访问域工作站上的域控制器似乎对呼叫的长度没有影响。

*   `perfmon`显示几乎没有 CPU 使用率，只有初始和结束 I/O 峰值：

    ![性能图](../Images/9de1b9f1fc3c2f396551c3e82f871dfa.png)

    此示例中的`CreateEnvironmentBlock`调用大约需要 12 秒。

*   [MSDN 文档](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762270%28v=vs.85%29.aspx)推断调用`CreateEnvironmentBlock`不加载用户*的*配置文件（并且用户已经登录，因此必须加载他们的配置文件）：

    > 仅在加载用户配置文件时设置用户特定的环境变量，例如 %USERPROFILE%。要加载用户的配置文件，请调用 LoadUserProfile 函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T00:32:13.363

因为为不同的用户创建环境块需要加载该用户的配置文件。如果您在域控制的机器上，这将加倍慢，因为它需要与网络上的 Active Directory 机器交谈并下载配置文件。

# facebook - 应用程序选项卡上的 facebook opengraph 操作

> ID：10273220
> 
> 赞同：0
> 
> 时间：2012-04-22T23:54:12.547
> 
> 标签：facebook, facebook-opengraph, facebook-page

我有一个 facebook 页面。我将应用程序添加为页面的选项卡。我的应用程序是一个投票游戏。我创建了一个动作和对象。我已经提交了，没有问题。但是我的应用程序的 url 在用户时间轴上提交的操作预览中不正确。

例如：

我的页面网址： http: [//www.facebook.com/brandname](http://www.facebook.com/brandname)

我的应用程序的网址： http: [//www.facebook.com/brandname/app_xxxxxxxxxxx](http://www.facebook.com/brandname/app_xxxxxxxxxxx)

但是我的应用程序的网址是[http://www.facebook.com/coolestgame](http://www.facebook.com/coolestgame) （coolestgame 是我的应用程序的应用程序命名空间），在时间轴上的动作预览中。

我怎样才能显示正确的网址？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T17:44:54.603

用户操作的工作方式是

- 用户单击按钮发布到时间线 - facebook 转到操作指向的 url。- 查找元标记 og:url，这是将在时间轴上的用户操作上显示的 url。

如果您在您的 url 'http://www.facebook.com/coolestgame' 中，这将被视为个人资料。所以我这样做的方式是。我有一个中间页面，其中用户操作指向例如 appNamespace:buy?product=intermediatePage.aspx。

在此页面上，元标记 url 是intermediatePage.aspx。

然后，当人们通过点击时间轴上的动作进来时，我将他们重定向到我希望他们去的地方。

希望这可以帮助

# php - 通过单击图像保存变量

> ID：10273222
> 
> 赞同：0
> 
> 时间：2012-04-22T23:54:55.367
> 
> 标签：php, javascript, mysql, html

我已经为此苦苦挣扎了一段时间，但似乎仍然无法找到并回答。在我的网页上，我有 6 张不同的天气图片。当用户单击一个时，我希望它做两件事-

1）将变量保存到表格（例如-您按多云图片，“多云”保存到“天气”列下的我的表格）

2）它会将您重定向到下一页（在此页面中您将输入一个名称，然后将其提交到表格，它会将您重定向到另一个页面，您将在其中提交与天气有关的故事）

因此，这些信息将全部发布在人们可以看到的表格上。但我的主要问题是我无法将天气变量保存到数据库表并将您重定向到下一页，有人知道方法吗？

这是两个代码，我在试图弄清楚时得到了一些帮助。

[http://jsfiddle.net/np5Mv/](http://jsfiddle.net/np5Mv/)

和

[http://jsfiddle.net/wDwSC/](http://jsfiddle.net/wDwSC/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T00:07:44.607

如果你使用一个

```
<input type="image" src="cloudy.png" alt="Cloudy" name="weather" value="cloudy"> 
```

那么图像将（大部分）与具有相同名称/值的表单提交按钮相同。根本不需要javascript。

# jquery - jquery，针对具有类名的 div

> ID：10273223
> 
> 赞同：1
> 
> 时间：2012-04-22T23:54:59.887
> 
> 标签：jquery

我的 div 被称为足球，这有效：

```
$target.appendTo($('#football')); 
```

但我不想硬编码，它需要更动态，我怎样才能用属性的类名替换“足球”：

```
$target.attr('class') //football 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T00:00:45.750

如果我理解正确，您希望您的类值`$target`与页面上的实际元素相对应吗？或者例如，如果目标是：

```
<p id='foo' class='football'>Hello, World.</p> 
```

您可能有一个相应的元素：

```
<div id='football' class='games'>...</div> 
```

您在询问如何`className`在附加过程中使用作为选择器（特别是作为 ID）：

```
var $target = $("#foo"); // reference to our paragraph
var targetClass = $target.attr('class');

$target.appendTo( '#' + targetClass ); 
```

这假设您的类属性将永远只包含一个类。类属性可以包含空格，但是如果您尝试使用包含空格的 ID 作为 ID，则会产生问题，因为 ID 值不能包含空格。

我假设如果你想像这样解决它，你已经记住了这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-22T23:56:49.897

使用类选择器而不是 ID 选择器。

`$target.appendTo($('.football'));`

# java - 错误 404：Solr 中的路径中缺少核心名称

> ID：10273226
> 
> 赞同：0
> 
> 时间：2012-04-22T23:55:24.540
> 
> 标签：java, solr, tomcat7, http-status-code-400

我用了：

```
//server.deleteByQuery( "*:*" );// CAUTION: deletes everything! 
```

在我的 solr 索引程序中查询。从那以后我每次都会收到错误，我去[http://localhost:8080/solr/admin/](http://localhost:8080/solr/admin/)

并使用查询字符串按搜索*：*

错误是：

> HTTP 状态 400 - 路径中缺少 solr 核心名称
> 
> 类型状态报告
> 
> 消息路径中缺少 solr 核心名称
> 
> 描述 客户端发送的请求在语法上不正确（路径中缺少 solr 核心名称）。
> 
> Apache Tomcat/7.0.21

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:19:22.773

如果您访问[http://localhost:8080/solr/](http://localhost:8080/solr/)会发生什么。
您能否检查您的`solr.xml`（在 solr 的根目录中）是否有已定义的内核。
此外，您可以检查是否`solr home`在`WEB-INF/web.xml`.

查看[这个类似的问题](https://stackoverflow.com/questions/2213123/http-error-404-missing-core-name-in-path-with-solr)，了解一些类似和不同的解决方案。还有[这个](https://stackoverflow.com/questions/6071112/getting-missing-core-name-in-path-when-trying-to-access-solr-admin-installed-o)。

# c++ - 实例化一个派生自一个接口的类，该接口位于另一个派生自一个接口的类中......只需阅读以找出答案

> ID：10273227
> 
> 赞同：2
> 
> 时间：2012-04-22T23:55:26.123
> 
> 标签：c++

前段时间我问过[如何在 c++ 中使用虚拟类](https://stackoverflow.com/questions/10241134/is-it-possible-to-have-a-virtual-class-declaration-in-a-class)，令我沮丧的是，我得知你不能。但是一个用户，（即“Emilio Garavaglia”，非常感谢）发布了一种获取类似于虚拟类的方法，只是使用了一些额外的代码。但是，我在编译我正在做的事情时遇到了一些麻烦。这是代码：

global_defs.h

```
#define Interface class

#define abstract_class class

#define implements : public 
```

I_Graphics.h

```
#ifndef I_GRAPHICS_H
#define I_GRAPHICS_H

#include <string>
#include "global_defs.h"

Interface I_Graphics
{
public:
    virtual ~I_Graphics() {};

    virtual void Initialize() = 0;
    virtual void Frame() = 0;
    virtual void Shutdown() = 0;

    class I_Model;

    virtual I_Model * CreateModel() = 0;

};

Interface I_Graphics::I_Model
{
public:
    virtual ~I_Model() {}

    virtual void Initialize(std::string const & filename, std::string const & textureFilename) = 0;
    virtual void * GetVertexBuffer() = 0;
    virtual void * GetIndexBuffer() = 0;
};

#endif 
```

图形.h

```
#ifndef GRAPHICS_H
#define GRAPHICS_H

#include "global_defs.h"

#include <map>
#include <string>
#include <memory>
#include "I_Graphics.h"

class Graphics implements I_Graphics
{
public:
    Graphics();
    ~Graphics();

    void Initialize();
    void Frame();
    void Shutdown();

    class Model;

    I_Model * CreateModel() {return new Model;}   // <--- compile error here

private:
    std::map <std::string, I_Model *> m_ModelList;
};

class Graphics::Model implements I_Graphics::I_Model
{
public:
    Model();
    ~Model();

    void Initialize(std::string filename, std::string textureFilename);
    void * GetVertexBuffer();
    void * GetIndexBuffer();
};

#endif 
```

Graphics.cpp 这里什么都没有，还没有真正开始工作，只是试图让模型实例化工作。

```
#include "Graphics.h"

Graphics::Graphics()
{

}

Graphics::~Graphics()
{
}

void Graphics::Initialize()
{

}

void Graphics::Frame()
{

}

void Graphics::Shutdown()
{

}

Graphics::Model::Model()
{

}

Graphics::Model::~Model()
{
}

void Graphics::Model::Initialize(std::string filename, std::string textureFilename)
{

}

void * Graphics::Model::GetVertexBuffer()
{
    return NULL;
}

void * Graphics::Model::GetIndexBuffer()
{
    return NULL;
} 
```

所以，正如小评论所说，我得到一个错误说：

`error C2512: 'Graphics::Model' : no appropriate default constructor available`

当 graphics.cpp 中显然有它的构造函数时。有人可以解释一下编译器在这里抱怨什么吗？

编辑：
不确定它是否意味着什么，但是当鼠标悬停在 MSVC 中的红色小曲线上时，它说，“抽象类类型的对象 Graphics::Model 是不允许的”。...但它没有任何纯虚拟成员，所以它不是抽象的对吗？

编辑：
根据 Castilho 的建议，我像以前一样在 graphics.h 中声明 CreateModel，但随后在 graphics.cpp 中定义它，它产生了一个更具体的错误，但我仍然不明白为什么。

`error C2259: 'Graphics::Model' : cannot instantiate abstract class
1> due to following members:
1> 'void I_Graphics::I_Model::Initialize(const std::string &,const std::string &)' : is abstract
1> i_graphics.h(28) : see declaration of 'I_Graphics::I_Model::Initialize'`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T00:11:32.863

您在定义之前使用 Model 类。在单独的 CPP 中定义函数 CreateModel，它可能会起作用。

# ruby-on-rails - 在rails 3中呈现视图后如何调用方法

> ID：10273231
> 
> 赞同：3
> 
> 时间：2012-04-22T23:55:54.080
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个大约需要 20 到 30 秒的任务。我希望在呈现视图后立即运行此任务。我希望将此任务的输出存储在会话变量中。什么是最简单的方法来做到这一点rails 3。

解释我到底需要什么。我正在向用户显示推文列表（这是呈现的视图）他们必须通过它们。我希望在呈现此视图后调用一个方法，该方法将采用相同的推文并将它们聚类（20-30 秒的过程）。我应该在会话中获得聚类结果，以便可以在下一页中显示它们。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T06:40:49.433

您应该能够在呈现视图的控制器方法中执行此操作。只需在“渲染”调用后添加代码。例如：

```
 def index
    @tweets = Tweet.all

    respond_to do |format|
      format.html # index.html.erb
      format.json { render json: @tweets }
    end
    # do something with tweets
    puts "#{@tweets}"
  end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T23:58:05.800

这就是我解决问题的方法

1.  我用于`resque`后台任务。在调用渲染之前，我将任务排入队列。
2.  我对后台工作人员进行了编码，以将集群的结果放入 redis 缓存中。
3.  应该显示集群的控制器，我从 redis 读取结果，对它们进行反序列化并渲染它们。

它并不完美，但对于研究反馈收集工具来说已经足够快了。

# storyboard - Xcode performSegueWithIdentifier 不起作用

> ID：10273237
> 
> 赞同：1
> 
> 时间：2012-04-22T23:56:39.467
> 
> 标签：storyboard

我想根据用户状态（即 NSUserDefaults 值）切换场景，所以我使用了两个视图控制器和 segue。但它不起作用。我相信我的代码有问题。请帮忙。谢谢。

```
- (void)viewDidLoad
{

//sleep(5);
NSString *usercode = [[NSUserDefaults standardUserDefaults] objectForKey:@"usercode"];
if([usercode isEqualToString:@""] || usercode == nil){
    [self performSegueWithIdentifier:@"loginSegue" sender:self];
    NSLog(@"usercode start: key=%@", usercode);
}else{
    [self performSegueWithIdentifier:@"loggedInSegue" sender:self];
    NSLog(@"usercode start: not null key=%@", usercode);
}
[super viewDidLoad];

}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
if([[segue identifier] isEqualToString:@"loginSegue"])
{
    NSLog(@"delegated");
    //loginViewController *loginController = [segue destinationViewController];        
    NSLog(@"%@", NSStringFromClass([[segue destinationViewController] class]));
    //controller.delegate=self;
}else if ([[segue identifier] isEqualToString:@"loggedInSegue"]){
    NSLog(@"logged in delegated"); 
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T06:53:43.470

它应该在

```
-(void)viewDidAppear 
```

代替

```
-(void)viewDidLoad. 
```

# android - 如何在活动之间进行 3D 转换。

> ID：10273240
> 
> 赞同：1
> 
> 时间：2012-04-22T23:57:40.007
> 
> 标签：android

我看到了很多关于这方面的教程，但其中大多数在一个活动中的视图之间制作了 3D 效果。我怎么能在代码中做这样的效果

# warnings - 错误帮助：警告：mysql_num_rows() 期望参数 1 是资源

> ID：10273244
> 
> 赞同：1
> 
> 时间：2012-04-22T23:58:16.100
> 
> 标签：warnings, mysql-num-rows

我正在构建一个简单的 PHP CRUD 应用程序，但遇到了这个错误：

> 警告：mysql_num_rows() 期望参数 1 是资源，布尔值在

```
<?php 
$query = "select * from user";
$result = mysql_query($query);

if (mysql_num_rows($result) > 1) {
    echo "<table align='center' border='1'>";
    echo "<tr>";
    echo "<th>Id</th>";
    echo "<th>Username</th>";
    echo "<th>Password</th>";
    echo "</tr>";
    while($row = mysql_fetch_array($result)) {
        echo "<tr>";
        echo "<td>".$row['id']."</td>"; 
        echo "<td>".$row['username']."</td>";   
        echo "<td>".$row['password']."</td>";
        echo "<td><a href='index.php?operation=edit&id=".$row['id']."&username=".$row['username']."&password=".$row['password']."'>edit</a></td>";
        echo "<td><a href='index.php?operation=delete&id=".$row['id']."'>delete</a></td>";  
        echo "</tr>";
    }
    echo "</table>";
} else {
    echo "<center>No Records Found!</center>";  
}
?> 
```

错误指向该代码中的第 34 行。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T00:06:31.790

通常这意味着您的查询由于不正确的字段名等而失败 - 您确定您的表存在吗？尝试使用一些错误处理来了解问题所在。

```
$result = mysql_query($query) or die('Cannot Execute:'. mysql_error()); 
```

# java - JAVA通用树问题

> ID：10273248
> 
> 赞同：0
> 
> 时间：2012-04-22T23:58:37.910
> 
> 标签：java, tree

我试图了解泛型和树结构并坚持以下问题......

我创建了 3 个类 1) 节点 2) 人员 3) NodeTest

```
import java.util.*;

public class Node<T>
{
    private Node<T> root; // a T type variable to store the root of the list
    private Node<T> parent; // a T type variable to store the parent of the list
    private List<Node<T>> children = new ArrayList<Node<T>>(); // a T type list to store the children of the list

    // default constructor
    public Node(){ }

    // constructor overloading to set the parent
    public Node(Node<T> parent)
    {
        this.setParent(parent);
        //this.addChild(parent);
    }

    // constructor overloading to set the parent of the list  
    public Node(Node<T> parent, Node<T> child)
    {
        this(parent);
        this.children.add(child);
    }

    public void addChild(Node<T> child)
    {
        this.children.add(child); // add this child to the list
    }

    public void removeChild(Node<T> child)
    {
        this.children.remove(child); // remove this child from the list
    }

    public Node<T> getRoot() {
        return root;
    }

    public boolean isRoot()
    {
        return this.root != null; // check to see if the root is null if yes then return true else return false
    }

    public void setRoot(Node<T> root) {
        this.root = root;
    }

    public Node<T> getParent() {
        return parent;
    }

    public void setParent(Node<T> parent) {
        this.parent = parent;
    }

    public boolean hasChildren()
    {
        return this.children.size()>0;
    }

    public Node<T>[] children()
    {
        return (Node<T>[]) children.toArray(new Node[children.size()]);
    }

    public Node<T>[] getSiblings()
    {

        if(this.isRoot()==false)
        {
            System.out.println("this is not root");
        }

        List<Node<T>> tempSiblingList = new ArrayList<Node<T>>();

        //this.parent.children() isn't working for me
        //hence i tried to get around it next two lines
        Node<T> parent =  this.parent;

        Node<T>[] children =  parent.children();

        for(int i=0; i<children.length; i++)
        {
            if(this!=children[i])
            {
                tempSiblingList.add(children[i]);
            }
        }
        return (Node<T>[]) tempSiblingList.toArray(new Node[children.length]);
    }
}

public class Person {

    private String name;
    private int age;
    private String status;

    public Person(String name, int age, String status)
    {
        this.setName(name);
        this.setAge(age);
        this.setStatus(status);
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    public String getStatus() {
        return status;
    }

    public void setStatus(String status) {
        this.status = status;
    }
} 
```

我的问题是如何初始化 Node 类 Person 类...

我试过了

```
Person rootPerson = new Person("root", 80, "Alive");

Node<Person> root = new Node<Person>(rootPerson); 
```

但这对我不起作用...

还需要 getSibilings() 的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T00:08:23.960

您将 Person 传递给需要`Node<Person>`

如果这是一棵树，您既需要父变量，也需要树包含的对象。

```
public Node(Node<T> parent,T value) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T00:08:42.007

您的节点类没有用于存储值的成员：

```
class Node<T>
{
    ...
    private T value;
    ...
} 
```

您没有`Node`采用元素类型的构造函数：

```
...
public node (T value)
{
    this.value = value;
}
... 
```

而且，根据定义，一个人的兄弟姐妹是不是你自己的父母的孩子：

```
public Node<T>[] getSiblings ( )
{
    if (parent == null)
        return null;

    List<Node<T>> siblings = new ArrayList<Node<T>>( );
    Collections.copy(siblings, parent.children);
    siblings.remove(this);

    return siblings.toArray(new Node<T>[]{});
} 
```

警告：以上代码均未经过测试。

此外，您似乎正在为家谱建​​模？如果是这样，请注意，您所遵循的严格的层次模型实际上并不能很好地模拟现实，正如著名的[这里](https://stackoverflow.com/questions/6163683/cycles-in-family-tree-software)记载的那样。

**编辑：**回应评论。

要初始化类，您应该首先进行我上面提到的更改 - 创建一个成员，以便每个成员都`Node`可以存储一个值，并创建可以接受值的构造函数。

在这方面，@spinning_plate 是正确的：除了我展示的采用值的那个之外，您还需要一个采用值和父级的值。他们的构造函数的完整实现可能如下所示：

```
public Node<T> (Node<T> parent, T value)
{
    this.parent = parent;
    this.value = value;

    // Don't forget: if you have a parent, you are their child.
    parent.addChild(this);
} 
```

然后你可以制作一个简单的树，如下所示：

```
Person rootPerson = new Person("root", 80, "alive");
Node<Person> rootNode = new Node<Person>(rootPerson); // This uses my constructor

Person son = new Person("son", 50, "alive");
Node<Person> sonNode = new Node<Person>(rootPerson, son); // This uses spinning_plate's constructor 
```

# linq - 格式异常 - RavenDB LINQ 查询

> ID：10273253
> 
> 赞同：0
> 
> 时间：2012-04-22T23:59:38.417
> 
> 标签：linq, nosql, ravendb

我在以下代码中收到输入字符串格式错误...在调试代码时，它作为单行代码运行，因此我无法深入研究可能导致格式异常的原因...可以请指出我做错了什么..谢谢。

例外：

```
FormatException was unhandled by user code:
"Input string was not in correct format" 
```

代码：

```
store.DatabaseCommands.UpdateByIndex("Movies/NewIndexName",
             new IndexQuery
             {
                 Query =
         string.Format("Status:Released AND IsDeleted:false AND ReleaseDate:{* TO {0}}",
         DateTools.DateToString(new DateTime(2012, 4, 3),
                                DateTools.Resolution.MILLISECOND))
             },
             new[]
            {
              new PatchRequest
                  {
                      Type = PatchCommandType.Modify,
                      Name = "Status",
                      Value = "TestingReleased"
                   }
            }, allowStale: false); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T04:34:46.780

问题出在 string.Format 内部，您需要的值为：

```
 {{* TO {0}}} 
```

换句话说，您需要转义 { }

# c# - 如何记录耗时的操作？（C＃）

> ID：10273256
> 
> 赞同：1
> 
> 时间：2012-04-23T00:00:26.813
> 
> 标签：c#, performance, timer, xna, slowdown

我的游戏运行了很多计算，有时帧率会在没有明显原因的情况下下降，我想知道什么需要这么长时间来处理。如何创建一个计时器（或其他东西）来打印每个主要操作的经过时间？

**UPD：**运行默认分析器后，我发现瓶颈在我的 tile 数组循环中。我有大约 50 万个瓷砖，循环要求瓷砖的一个属性，每帧大约 200 个瓷砖。像这样：

```
if (tileArray[tile].this_tile_is_on_screen)
tileArray[tile].Draw(); 
```

当 tileArray 非常大时，这会导致减速吗？关于如何避免它的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T00:03:54.023

使用诸如[EQATEC Profiler for .NET](http://www.eqatec.com/tools/profiler/)之类的分析器，或内置于[Visual Studio](http://msdn.microsoft.com/en-us/library/ms182372.aspx) Premium 和 Ultimate 版本中的分析器。

如果您已经在使用日志框架，例如 log4Net，您可以在代码段中添加日志并调高日志的详细程度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T00:16:07.853

我通常使用[Diagnostic命名空间中的](http://msdn.microsoft.com/en-us/library/15t15zda.aspx)[Stopwatch](http://msdn.microsoft.com/en-us/library/System.Diagnostics.Stopwatch.aspx)类作为计时器。[来自](http://msdn.microsoft.com/en-us/library/system.diagnostics.debug.writeline.aspx)[Debug](http://msdn.microsoft.com/en-us/library/6x31ezs1.aspx)类的 WriteLine函数用于打印输出以打印经过的时间。

# actionscript-3 - 纯as3如何在空中使用新的StageText？

> ID：10273259
> 
> 赞同：4
> 
> 时间：2012-04-23T00:01:05.323
> 
> 标签：actionscript-3, flash, android-softkeyboard, enter

我已经在纯 AS3 中为 android 和 iPhone 编写了一个应用程序（我开始时没有 flash builder，所以在我转向 flex 之前需要像这样完成这个项目）但我现在卡住了，需要控制软键盘和无法解决我的生活如何将返回键更改为“搜索”或捕获它被点击以提交我的表单？

我看到我需要使用新的 stagetext 但不知道如何实现它......

（我已将 air 更新到 3.2，所以可以使用它）

反正有没有使用普通的文本字段来做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T01:42:23.500

查看[StageText 文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/StageText.html)，似乎以下内容应该有效。请注意，StageText 对象不是 Flash 显示列表的成员。

**[未经测试的代码：]**

```
import flash.text.StageText;
import flash.text.ReturnKeyLabel;
import flash.events.KeyboardEvent;
import flash.geom.Rectangle;
import flash.ui.Keyboard;

//

var myTextField:StageText = new StageText();
myTextField.returnKeyLabel = ReturnKeyLabel.SEARCH;
myTextField.addEventListener(KeyboardEvent.KEY_UP, keyUpEventHandler);

myTextField.stage = stage;
myTextField.viewPort = new Rectangle(10, 10, stage.stageWidth - 20, 20); 

// 

private function keyUpEventHandler(event:KeyboardEvent):void
{
    if (event.keyCode == Keyboard.SEARCH)
    {
        trace("search button pressed");
    }
} 
```

# facebook - 使用 PHP 存储 Facebook 登录信息

> ID：10273263
> 
> 赞同：0
> 
> 时间：2012-04-23T00:01:42.820
> 
> 标签：facebook

我正在使用 Facebook PHP API 来允许登录我的网站。我还允许人们使用我的软件中的内置表单登录/注册，以防他们不想使用他们的 Facebook 帐户。

我这一切工作正常，我唯一的问题是如何将 Facebook 帐户附加到他们在我的 MySQL 数据库中的帐户？

例如，Joe Bloggs 想在我的网站上创建一个帐户。他决定通过 Facebook 登录，而不是填写表格。他这样做。在他通过 Facebook 登录后，它会将他返回到我网站上的一个页面，他可以在其中填写其余的帐户详细信息。然后它保存了他的帐户，他可以自由地起诉该网站。

我的问题是在他使用 Facebook 登录、在 MySQL 数据库中创建并保存他的帐户后，我如何将他的 Facebook 帐户和他的帐户链接到我的数据库中？

当您使用 Facebook 登录时，它会返回一个状态、代码，我还可以使用 API 检索一个访问令牌。但是每次我登录时，这些代码都会改变。我认为可能会返回一个代码，我可以使用它来存储在 MySQL 数据库中，所以我所要做的就是将其中一个代码与数据库匹配。

但我似乎无法做到这一点。我在这一切都错了吗？

希望我说得通。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T00:08:13.647

> 我的问题是在他使用 Facebook 登录、在 MySQL 数据库中创建并保存他的帐户后，我如何将他的 Facebook 帐户和他的帐户链接到我的数据库中？

只需将 facebook 用户 ID 存储在您的表中即可。

> 当您使用 Facebook 登录时，它会返回一个状态、代码，我还可以使用 API 检索一个访问令牌。但是每次我登录时，这些代码都会改变。我认为可能会返回一个代码，我可以使用它来存储在 MySQL 数据库中，所以我所要做的就是将其中一个代码与数据库匹配。

你不需要永远坚持它们。只有 facebook 用户 ID 是您识别用户所需的标识符

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T00:07:46.080

将他们的 FaceBook UserID 作为可选字段存储在您的用户表中，以将他们唯一的 FaceBook UserID 链接到您的应用程序中的用户。

[https://developers.facebook.com/docs/reference/php/facebook-getUser/](https://developers.facebook.com/docs/reference/php/facebook-getUser/)

# ruby-on-rails - Rails activerecord 与 all 或 where

> ID：10273266
> 
> 赞同：0
> 
> 时间：2012-04-23T00:02:20.747
> 
> 标签：ruby-on-rails, ruby, activerecord

我看不出 Model.all 和 Model.where(:source_id => 2) 在 ruby​​ 控制台中的区别。我的问题是我可以在数组上执行的 «all» 指令 .each 和 Model.where 我无法执行的 .each

在职的

```
# controller.rb
@results = Adress.all

#view.haml
- @results.each do |result| 
```

不工作

```
# controller.rb
@results = Adress.where(:source_id => 2)

#view.haml
- @results.each do |result| 
```

错误消息 --> nil:NilClass 的未定义方法“每个”

在控制台 --> Adress.where(:source_id => 2) 它的作品

------- 我的坏，解决方案 ------

我的观点是试图在不存在的变量上做 .each ......

问题

```
@Adress = Adress.where(:arrondissement_id => params[:arrondissement]) 
```

解决方案

```
@results = Adress.where(:arrondissement_id => params[:arrondissement]) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T23:55:36.880

我的错，

我的观点是试图在不存在的情况下做 .each 。

问题

```
@Adress = Adress.where(:arrondissement_id => params[:arrondissement]) 
```

解决方案

```
@results = Adress.where(:arrondissement_id => params[:arrondissement]) 
```

# infinite-scroll - mansory + 无限滚动加载

> ID：10273267
> 
> 赞同：0
> 
> 时间：2012-04-23T00:02:21.960
> 
> 标签：infinite-scroll

我有这个代码：mansory + 无限滚动 jquery 插件来显示多个框。但是当我打开我的页面时，下一个内容的加载是在我滚动页面而不是在页面末尾时开始的。我错了什么？

> ```
>  $container.infinitescroll({
>             navSelector  : '#page-nav',    // selector for the paged navigation 
>             nextSelector : '#page-nav a',  // selector for the NEXT link (to page 2)
>             itemSelector : '.box',     // selector for all items you'll retrieve
> 
>             // enable debug messaging ( to console.log )
>             loading: {
>                 finishedMsg: 'Pagine da caricare terminate.',
>                 img: 'http://i.imgur.com/6RMhx.gif'
>                }
>               },
>             // trigger Masonry as a callback
>             function( newElements ) {
>                // hide new items while they are loading
>               var $newElems = $( newElements ).css({ opacity: 0 });
>               // ensure that images load before adding to masonry layout
>               $newElems.imagesLoaded(function(){
>                 // show elems now they're ready
>                 $newElems.animate({ opacity: 1 });
>                 $container.masonry( 'appended', $newElems, true ); 
>               });
>              }
>           ); 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T05:53:09.463

`$container.masonry( 'appended', $newElems, true );` 应更改为 `$container.append( $newElems ).masonry( 'appended', $newElems, true );` 手段...应首先将项目添加到容器中。

# android - 通过程序检查 CheckBoxPrefrence

> ID：10273277
> 
> 赞同：0
> 
> 时间：2012-04-23T00:04:01.163
> 
> 标签：android, android-preferences

我们知道我们可以`CheckBox`使用该`setChecked(boolean)`方法设置法线。是否可以`CheckBoxPreference`通过方法设置？有什么方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T00:29:51.057

怎么样…… [`setChecked(boolean)`](http://developer.android.com/reference/android/preference/TwoStatePreference.html#setChecked%28boolean%29)？当您获得对您的`CheckBoxPreference`（例如在您的`PreferenceActivity`或`PreferenceFragment`）的引用时，使用此方法应该没有问题。

* * *

我不确定您遇到了什么问题，但是对`CheckBoxPreference`'s的方法调用与`setChecked(boolean)`常规方法调用没有什么不同`CheckBox`（例如：您只需传递一个表示“tick”的布尔值）：

```
CheckBoxPreference checkboxPref = new CheckBoxPreference(this);
// or:
CheckBoxPreference checkboxPref = (CheckBoxPreference) findPreference("checkbox_pref");
checkboxPref.setChecked(true); 
```

# html - 两列，每列三个 DIV

> ID：10273280
> 
> 赞同：0
> 
> 时间：2012-04-23T00:05:15.393
> 
> 标签：html, css

我正在尝试并排放置两列三个垂直 DIV 的列。左栏是主要文本区域，右栏是杂项信息。每列的顶部和底部DIV只是一个带有圆角的图像。中心 DIV 用于文本。此外，理想情况下，我希望每列中的中心 DIV 自动与文本内容成比例地垂直扩展。

以下是我的 CSS：

```
.main_bkgd_tp_img {
    background: url(../images/text.main.tp.gif);
    float:left;
    width: 400px;
    height: 20px;
 }
 .main_bkgd_btm_img {
    background: url(../images/text.main.btm.gif);
    float:left;
    width: 400px;
    height: 20px;
 }
 .mainbody {
    background: url(../images/text.main.fill.gif);
    position:relative;
    float:left;
    width: 400px;
    height: 300px;
 }
 .mainbody .text {
    position:absolute;
    top:10px;
    left:20px;
    width:95%;
 }
 .mainbody p {
    position:relative;
    font:normal 12px verdana, arial, helvetica, sans-serif;
    color:#000;
    line-height:15px;
 }
 .mainbody h1, h2 {
    position:relative;
    color:#000;
    line-height:15px;
  }
 .rtcol_bkgd_tp_img {
    background: url(../images/rtcol.main.tp.gif);
    float:right;
    width: 100px;
    height: 20px;
  }
  .rtcol_bkgd_btm_img {
    background: url(../images/rtcol.main.btm.gif);
    float:right;
    width: 100px;
    height: 20px;
 }
 .rtcolbody {
    background: url(../images/rtcol.main.fill.gif);
    position:relative;
    float:right;
    width: 100px;
    height: 300px;
 }
 .rtcolbody .text {
    position:absolute;
    top:10px;
    right:20px;
    width:95%;
 }
 .rtcolbody p {
    position:relative;
    font:normal 12px verdana, arial, helvetica, sans-serif;
    color:#000;
    line-height:15px;
 }
 .rtcolbody h1, h2 {
    position:relative;
    color:#000;
    line-height:15px;
 } 
```

以下是我的 HTML：

```
 <div class="main_bkgd_tp_img"></div>
 <div class="mainbody">
      <div class="text">
          <h4> This is made up text just for testing purposes. The real text will be added later.</h4>
          <h4> This is more made up text just for testing purposes. The real text will be added later. </h4>
      </div>
  </div>
  <div class="main_bkgd_btm_img"></div>
  <div class="rtcol_bkgd_tp_img"></div>
  <div class="rtcolbody">
      <div class="text">
          <h4> This is a test. </h4> <br/>
          <h4>This text is just for testing purposes. The real text will be added later. </h4>
      </div>
 </div>
 <div class="rtcol_bkgd_btm_img"></div> 
```

可以在[此处查看](http://www.rkmpcservices.com/azdance/company.html)正在处理的实际页面。

谢谢！

* * *

我相信我想通了。对于每个“rtcol_....”CSS 条目，我将“float:right”更改为“margin-left:420px。

我仍然需要知道如何使中间 DIV 与文本内容相关联自动扩展。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:52:44.540

我会以稍微不同的方式构建页面布局，将每一列包装在自己的 div 中，但无论如何。像这样修改你的CSS：

*   并设置`.rtcolbody`或简单地删除该行`.mainbody``height: auto;`
*   进入`.rtcolbody .text`并`.mainbody .text`移除`position: absoulute;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T11:25:28.190

如果我使用您的样式代码，那么您应该对 CSS 进行一些更改，如下所述：-

从类中删除**定位。****文本并为班级****主体**提供最小高度....

```
.mainbody {
    background: url("../images/text.main.fill.gif") repeat scroll 0 0 transparent;
    float: left;
    min-height: 300px;
    opacity: 0.8;
    position: relative;
    width: 450px;
}        

.mainbody .text {
        padding: 20px 12px;

    } 
```

还有另一种 CSS3 方法可以解决您的问题，您可以将**曲线**和**背景透明**放入您的框中，请参阅演示：- [http://jsfiddle.net/8LFLd/31/](http://jsfiddle.net/8LFLd/31/)

通过这种方法，您可以增加和减少背景的不透明度，这不会影响框内的文本颜色，它很简单，请看 css，基本上您必须在背景 alpa 中使用 rgb 颜色来获得不透明度，并且您不需要使用图像以及**顶部、中间、底部**等的额外 div。

# java - 将字符串从 Java 发送到 C（套接字）

> ID：10273281
> 
> 赞同：3
> 
> 时间：2012-04-23T00:05:17.953
> 
> 标签：java, c, sockets, tcp

我正在尝试使用 C 将一些字符串从 Java 客户端发送到 C 服务器。首先我发送字符串的长度。然后，我在 C 中手动分配内存，最后我一个字符一个字符地发送字符串。

有时我得到正确的字符串，有时我得到整个字符串 + 额外的其他未知字符的问题（就像我分配的比我得到的多）。

这是Java代码：

```
protected void send(String data){
    short dataLength=(short)data.length();
    try {
        out.write(dataLength);
    for (int i=0; i<data.getBytes().length ;i++)
    {
        out.write(data.getBytes()[i]);
    }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }       
} 
```

这是C代码：

```
void read4(int sock, int *data)
{

    char dataRecv;
    char* memoireAllouee=NULL;
    int stringLength;
    int i=0;
    recv(sock, (char*)&dataRecv, sizeof(dataRecv), 0) ;
    *data = dataRecv;
    stringLength=dataRecv;
    memoireAllouee=malloc(sizeof(char)*stringLength);
    if (memoireAllouee==NULL)
    {
        exit(0);
    }
    for (i=0;i<stringLength;i++)
    {
        recv(sock, (char*)&dataRecv, sizeof(dataRecv), 0) ;
        *data = dataRecv;
        memoireAllouee[i]=dataRecv;
    }
    printf("\n\n%d\n\n\n",stringLength);
    printf("\n%s\n",memoireAllouee);
} 
```

如果您还认为这种方法不是最佳方法，您能帮我用一个更快的方法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-23T00:08:48.620

```
protected void send(String data){
    short dataLength=(short)data.length();
    try {
        out.write(dataLength);
    for (int i=0; i<data.getBytes().length ;i++)
    {
        out.write(data.getBytes()[i]);
    }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }       
} 
```

对于初学者，您要为*每个 character*`getBytes()`重新计算整个数组*两次*。将 保存到一个变量并使用它——你正在让它花费二次时间，完全没有必要。另外，为什么不直接调用，而不是循环呢？*`byte[]``byteArray``out.write(byteArray)``for`*

 *其次，`data.length()`并不总是等于`data.getBytes().length()`。确保你正在写作`byteArray.length`而不是仅仅`data.length()`.

最后，确保您在两端使用一致的字符集。字符串到字节数组的映射在很大程度上依赖于`Charset`，所以要确保它`Charset`在两边都是一样的，这样你就不会遇到编码问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-23T01:37:26.663

回答你的第二个问题：

```
for (int i=0; i<data.getBytes().length ;i++)
{
    out.write(data.getBytes()[i]);
} 
```

应该只是：

```
out.write(data.getBytes()); 
```

和

```
for (i=0;i<stringLength;i++)
{
    recv(sock, (char*)&dataRecv, sizeof(dataRecv), 0) ;
    *data = dataRecv;
    memoireAllouee[i]=dataRecv;
} 
```

应该：

```
int offset= 0;
while (offset < stringLength)
{
    int count = recv(sock, &memoireAllouee[offset], stringLength-offset 0) ;
    if (count == 0)
        // premature EOS .. do something
        break;
    if (count == -1)
        // Error ... do something
        break;
    offset += count;
} 
```*

# ruby-on-rails - 使用序列化字段，如何在不替换所有内容的情况下管理更新？

> ID：10273283
> 
> 赞同：0
> 
> 时间：2012-04-23T00:05:29.570
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, serialization

在我的用户模型中，我有一个设置为序列化的引导字段。默认情况下，该字段为 nil，但计划是它稍后会像这样结束：

```
{
guided_step1 : true,
guided_step1_decision : 33,
guided_step2 : true,
guided_step3 : false,
guided_step4 : false
} 
```

我的问题是，如果我想发布到服务器 param[:user][:guided_step3] = true，那么最终会删除其他所有内容。如何发布并仅更新字段或插入它？处理这个用例的正确方法是什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T00:11:51.633

为什么这不起作用？

```
user = User.find id

user.datastpeps[:guided_step3] = true
user.save 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T01:46:55.813

我在这里看到了两种潜在的方法。最简单的方法是在控制器中合并散列，而不是仅仅将它们发送到`update_attributes`：

```
guided_steps = params[:user].delete(:guided_steps) || {}
@user.guided_steps = (@user.guided_steps || {}).merge(guided_steps)
@user.update_attributes(params[:user]) 
```

`guided_steps`另一个，如果你真的希望它是自动的，是在你的`User`模型中重新定义 writer 方法：

```
class User < ActiveRecord::Base
  ...
  def guided_steps=(new_steps)
    gs = self.guided_steps || {}
    gs = gs.merge(new_steps || {})
    write_attribute(:guided_steps, gs)
  end
  ...
end 
```

这应该使得当你调用`@user.update_attributes(params[:user])`你的控制器时，新的`guided_steps`将与旧的合并。这种方法的一个潜在缺点是它的`guided_steps=`工作方式比以前不那么直观。例如，`@user.guided_steps = {}`不会清除哈希。因此，您需要平衡这种方法的利弊。

# html - 导航在不同页面上看起来不同，为什么？

> ID：10273284
> 
> 赞同：0
> 
> 时间：2012-04-23T00:05:43.993
> 
> 标签：html, css, navigation, nav, navbar

我一生都无法弄清楚我的导航栏只有在主页以外的页面上有一些额外的填充或边距。在主页上看起来不错。

我已经花了几个小时在这上面，我束手无策。

你可以在[这里看到网站](http://premierperspectives.net/)

点击关于我们或博客文章，看看它的变化。这个模板在 css 方面有点乱（至少对我来说），我无法弄清楚其他页面上实际发生了什么变化。

我希望有人可以在这里提供帮助。

在此先感谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T00:35:50.177

在您页面的`#header`div 上，您的主页上有两个`h1`和`h2`标签，`h1`标题仅包含其中的文本，然后当您切换到“关于我们”页面时，这些标签会变成`h2`并且标题`h3`这次`h2`填充了锚，这就是将您的菜单向下推的原因，这些标签上的填充。因此，将该标题切换到`h1`“关于我们”页面上的标题 1 页面标题标签，它工作正常，否则您将不得不修改您的 CSS 以调整这些标签上的填充/边距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T05:27:36.410

嘿，如果您`h3 margin : 0;`在 css 文件中定义，那么您的页面就可以了。

像这样

```
#header > h3{margin:0;} 
```

# java - Android 通讯录问题

> ID：10273286
> 
> 赞同：0
> 
> 时间：2012-04-23T00:06:03.410
> 
> 标签：java, android, android-contacts

我一直在做很多搜索，寻找一个示例项目，向我展示如何从 android 手机中提取联系人，然后移动到单独的数据存储并将其显示在我的应用程序上。有人能帮助我吗.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T05:58:18.807

获取联系人的方法

```
public List<String> lookupContactNames(){
    contentResolver = context.getContentResolver();
    List<String> contacts = new ArrayList<String>();
    Cursor cursor = null;
    try {
        final String[] projection = new String[] { ContactsContract.Contacts.DISPLAY_NAME };
        String selection = ContactsContract.Contacts.IN_VISIBLE_GROUP
                + " = '1'";
        String[] selectionArgs = null;
        final String sortOrder = ContactsContract.Contacts.DISPLAY_NAME
                + " COLLATE LOCALIZED ASC";
        cursor = contentResolver.query(
                ContactsContract.Contacts.CONTENT_URI, projection,
                selection, selectionArgs, sortOrder);

        while (cursor.moveToNext()) {
            contacts
                    .add(cursor
                            .getString(cursor
                                    .getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME)));
        }
        return contacts;
    } finally {
        if (cursor != null) {
            cursor.close();
        }
    }

} 
```

# jquery - jQuery slideToggle 动画切换其他元素

> ID：10273287
> 
> 赞同：1
> 
> 时间：2012-04-23T00:06:05.907
> 
> 标签：jquery, css

当我单击已注册为 slideToggle 触发器的元素时，该元素似乎无缘无故向右移动了几个像素。我认为它与某处的 CSS 有关，但我无法确定问题所在。

这是该问题的一个工作示例：http: [//jsfiddle.net/ZmyGq/](http://jsfiddle.net/ZmyGq/)。当按下“高级搜索”时，它会稍微向右打勾，然后再次单击时回到原来的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T00:08:42.913

因为`<a>`元素不是块元素，试试这个[FIDDLE](http://jsfiddle.net/adeneo/ZmyGq/2/)

# iphone - 如何在 root.plist 中格式化 sting？

> ID：10273288
> 
> 赞同：0
> 
> 时间：2012-04-23T00:06:09.400
> 
> 标签：iphone, ios, xcode, format, plist

有没有办法在 root.plist 文件中格式化字符串？我到处看了看，我很震惊，这上面什么都没有。我想做的就是把这个居中：

```
<string>Version 1.1</string> 
```

这样，当进入我的应用程序设置的设置应用程序时，它就会居中。（希望这是有道理的。）

任何帮助都会很棒，我不敢相信这样做没有任何意义！

答案让我明白了这一点：效果很好！

```
<dict>
    <key>Type</key>
    <string>PSGroupSpecifier</string>
    <key>FooterText</key>
    <string>Version 1.1</string>
    <key>Key</key>
    <string></string>
</dict> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T00:35:19.217

我过去通过将我想要的东西放在一个新组中来实现这一点`Footertext`

```
<dict>
    <key>FooterText</key>
    <string>Centered Text Here</string>
    <key>Type</key>
    <string>PSGroupSpecifier</string>
</dict> 
```

警告 - 这将导致该组和任何其他组之间出现一些空白。

# java - 按下后退按钮后媒体播放器崩溃并再次打开应用程序

> ID：10273289
> 
> 赞同：0
> 
> 时间：2012-04-23T00:06:11.713
> 
> 标签：java, android, media-player

好吧，我的应用程序在启动时有一个菜单，您可以点击一个按钮来启动该应用程序。一旦它启动媒体播放器开始播放，但如果我点击后退按钮，点击按钮再次启动应用程序，然后点击按钮停止音乐应用程序崩溃。继承人的代码。它在手机上崩溃了，但在模拟器中它工作正常。任何评论将不胜感激。谢谢

```
int cancion = 1, cancion1 = 1;
MediaPlayer song, song1, song2, song3, song4;
if (cancion == 1)
    {
        song1.start();
        playing = true;
        song1.setLooping(true);
        song = song1;
    }
music.setOnLongClickListener(new View.OnLongClickListener() {

    public boolean onLongClick(View view) {
            song.pause();
            song.seekTo(0);
            playing = false;
            cancion = cancion+1;

            if (cancion == 5)
            {
                cancion = 1;
            }
            if (cancion == 1)
            {
                song1.start();
                playing = true;
                song1.setLooping(true);
                song = song1;
            }
            else if (cancion == 2)
            {
                song2.start();
                playing = true;
                song2.setLooping(true);
                song = song2;
            }
            else if (cancion == 3)
            {
                song3.start();
                playing = true;
                song3.setLooping(true);
                song = song3;
            }
            else if (cancion == 4)
            {
                song4.start();
                playing = true;
                song4.setLooping(true);
                song = song4;
            }

        return true;
    }
});
    music.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {

            if (!playing)
            {
                song.start();
                playing = true;
            }

            else
            {
                song.pause();
                song.seekTo(0);
                playing = false;
                cancion1 = 2;
            }
        }
});
@Override
protected void onResume() {
    super.onResume();
    if(!song.isPlaying() && cancion1 != 2)
    {
        song.start();
        playing = true;
    }
}
@Override
public void onPause(){
    super.onPause();
    if(song.isPlaying())
    {
        song.pause();
        song.seekTo(0);
        playing = false;
    }
} 
```

日志猫：

04-22 22:12:47.151: W/ActivityNative(12915): 发送 ACTIVITY_IDLE_TRANSACTION 04-22 22:12:47.541: W/dalvikvm(12915): threadid=1: 线程退出未捕获异常 (group=0x400207d8) 04- 22 22：12：47.551：E/AndroidRuntime（12915）：致命异常：主要 04-22 22：12：47.551：E/AndroidRuntime（12915）：java.lang.NullPointerException 04-22 22：12：47.551：E/ AndroidRuntime(12915): 在 com.try.player.DragActivity$5.onClick(DragActivity.java:1772) 04-22 22:12:47.551: E/AndroidRuntime(12915): 在 android.view.View.performClick(View. java:2408) 04-22 22:12:47.551: E/AndroidRuntime(12915): 在 android.view.View$PerformClick.run(View.java:8816) 04-22 22:12:47.551: E/AndroidRuntime( 12915): 在 android.os.Handler.handleCallback(Handler.java:587) 04-22 22:12:47.551: E/AndroidRuntime(12915): 在 android.os.Handler.dispatchMessage(Handler.java:92) 04 -22 22:12：47.551: E/AndroidRuntime(12915): 在 android.os.Looper.loop(Looper.java:123) 04-22 22:12:47.551: E/AndroidRuntime(12915): 在 android.app.ActivityThread.main(ActivityThread .java:4633) 04-22 22:12:47.551: E/AndroidRuntime(12915): 在 java.lang.reflect.Method.invokeNative(Native Method) 04-22 22:12:47.551: E/AndroidRuntime(12915) : 在 java.lang.reflect.Method.invoke(Method.java:521) 04-22 22:12:47.551: E/AndroidRuntime(12915): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit .java:858) 04-22 22:12:47.551: E/AndroidRuntime(12915): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616) 04-22 22:12:47.551: E /AndroidRuntime(12915): 在 dalvik.system.NativeStart.main(Native Method)在 android.app.ActivityThread.main(ActivityThread.java:4633) 04-22 22:12:47.551: E/AndroidRuntime(12915): 在 java.lang.reflect.Method.invokeNative(Native Method) 04-22 22: 12:47.551: E/AndroidRuntime(12915): 在 java.lang.reflect.Method.invoke(Method.java:521) 04-22 22:12:47.551: E/AndroidRuntime(12915): 在 com.android.internal .os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858) 04-22 22:12:47.551: E/AndroidRuntime(12915): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616) 04-22 22:12:47.551: E/AndroidRuntime(12915): at dalvik.system.NativeStart.main(Native Method)在 android.app.ActivityThread.main(ActivityThread.java:4633) 04-22 22:12:47.551: E/AndroidRuntime(12915): 在 java.lang.reflect.Method.invokeNative(Native Method) 04-22 22: 12:47.551: E/AndroidRuntime(12915): 在 java.lang.reflect.Method.invoke(Method.java:521) 04-22 22:12:47.551: E/AndroidRuntime(12915): 在 com.android.internal .os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858) 04-22 22:12:47.551: E/AndroidRuntime(12915): at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616) 04-22 22:12:47.551: E/AndroidRuntime(12915): at dalvik.system.NativeStart.main(Native Method)java:521) 04-22 22:12:47.551: E/AndroidRuntime(12915): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858) 04-22 22:12:47.551: E/AndroidRuntime(12915): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616) 04-22 22:12:47.551: E/AndroidRuntime(12915): 在 dalvik.system.NativeStart.main （本机方法）java:521) 04-22 22:12:47.551: E/AndroidRuntime(12915): 在 com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858) 04-22 22:12:47.551: E/AndroidRuntime(12915): 在 com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616) 04-22 22:12:47.551: E/AndroidRuntime(12915): 在 dalvik.system.NativeStart.main （本机方法）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T00:55:40.207

更改您`onPause()`以释放所有`MediaPlayer`对象，而不是尝试重新启动当前播放的歌曲。

像这样的东西：

```
@Override
public void onPause(){
    super.onPause();

    song.release();
    song1.release();
    //and so on

} 
```

# php - 水平扩展：在服务器之间路由用户生成的子域

> ID：10273291
> 
> 赞同：5
> 
> 时间：2012-04-23T00:06:23.573
> 
> 标签：php, model-view-controller, dns, subdomain, scalability

我维护了一个超出单个 VPS 的 Web 应用程序。该架构由大量小用户组成，每个用户都有自己的子域。用户不交互。加载意味着我必须将一些用户和所有新用户移动到单独服务器上的另一个 Web 应用程序安装。

目前，每个用户子域都属于同一个虚拟主机，其中一个 PHP 前端控制器根据主机名显示适当的内容。*.mydomain.com 的单个通配符 DNS 记录指向当前服务器。

将不同用户子域路由到不同服务器的最佳选择是什么？

我的想法：

*   每台服务器都有一个新的顶级域。user.s1.mydomain.com、user.s2.mydomain.com 等（不雅且泄露信息）
*   运行我自己的 DNS 服务器在服务器之间路由用户（额外的故障点，不熟悉的技术）
*   一个中央前端控制器/平衡器，将每个请求反向代理到适当的服务器（额外的故障点，潜在的有限连接）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T17:03:33.557

在应用程序的横向扩展时，我会使用中央前端负载均衡器。Nginx 应该处理由单个服务器动态提供的任何负载。我们有 nginx 作为 6 个动态服务器和一个静态内容服务器的前端，并且在 nginx 上看不到瓶颈。

在您的规模点上，设置 nginx 以自行处理所有静态内容，并将动态内容反向代理到所需数量的盒子。简单代理通行证的设置接近：

```
upstream upstream_regular_backend {
    fair;
    server 10.0.0.1:80;
    server 10.0.0.2:80;
}

server {
    listen 0.0.0.0:80;
    server_name  example.com;
    proxy_set_header Host $host;
    proxy_set_header  X-Real-IP  $remote_addr;
    location / {
        proxy_pass http://upstream_regular_backend;
    }
} 
```

对于提供静态内容并传回所有其余内容，例如：

```
server {
    listen 0.0.0.0:80;
    server_name  example.com;
    proxy_set_header Host $host;
    proxy_set_header  X-Real-IP  $remote_addr;
    index index.php;
    root /some/dir/:
    location ~ \.php {
        proxy_pass http://upstream_regular_backend;
    }
} 
```

当然，如果您不使用 PHP，请相应地调整配置。

关于上游的定义，“公平”；将根据响应时间对后端进行负载平衡。对于缓存动机，您可能需要使用“ip_hash;” 相反，因为它将来自客户端的请求始终放在同一台服务器上。

我们的设置更进一步。我们有 nginx 负载平衡器代理清漆缓存，而后者又代理动态内容服务器。

如果您担心 nginx 会出现单点故障，请设置一个辅助服务器以准备好假设前端的 IP，以防万一它发生故障。

# jquery - 我需要做什么/检查 jQuery 是否安装在我的 rails 3 项目中

> ID：10273292
> 
> 赞同：1
> 
> 时间：2012-04-23T00:06:26.360
> 
> 标签：jquery, ruby-on-rails

我如何知道/检查我的 rails 项目中是否安装了 jQuery？我正在编写一些 jQuery 代码，并希望确保我正确安装了先决条件。我意识到有一个 gem 可以做到这一点，但我想知道是否有人可以指出一种使用 gem 安装 jQuery 的方法，也可以不使用 gem。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T00:23:31.547

在最新版本的 Rails 中，jquery 自动在您的应用程序中可用，无需您进一步干预，您可以通过在视图中放置类似内容来验证这一点：

```
 <script type='text/javascript'>
   $('#mydiv').show();
 </script>

 <div id='mydiv' style='display:none'>
   TEST
 </div> 
```

如果在加载该视图页面时看到 TEST，则 jquery 正在运行。

如果您查看 app/assets/javascripst/application.js，您会看到 jquery.js 包含在该清单中，并且 rails 会将其加载到您的所有页面上。如果您从该文件中删除 jquery.js，它将不会被加载。如果你想这样做，（没有真正的理由？？），那么你可以下载你想要的 jquery.js 版本，把它放在“public/javascripts”中，然后放

```
<%= javascript_include_tag 'jquery.js' %> 
```

或者你也可以把它放在 app/assets/javascripts 中，上面的代码会加载它。

app/assets/javascripts 是新的首选方式，因为它利用了新的资产管道功能，但将它们放在“public/javascripts”中的旧方法仍然有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T00:15:03.533

主意：

创建一个函数来检查是否定义了 jQuery

```
existjQuery = function(){return typeof jQuery != 'undefined'  || typeof $ != 'undefined'} 
```

# css - div 不创建高度

> ID：10273295
> 
> 赞同：1
> 
> 时间：2012-04-23T00:07:09.980
> 
> 标签：css, html, height

我有一个`div`包含一个`h2`和三个`div`的，但它没有创造高度。我不记得以前有这个问题。但基本上，这三个包含`div`的高度需要灵活，所以我不能给容器`div`一个设定的高度。由于它没有创建高度，我的页脚浮动在`div`. 如果您将鼠标悬停`div`在萤火虫或检查器中的“最近”上，您会注意到`div`唯一的高度扩展了`h2`. 有什么想法吗？谢谢！

这是小提琴：[链接](http://jsfiddle.net/s5p49/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T00:13:04.060

您的三个内部 div 设置为`float: left`，因此不会影响其父级的高度。你需要清除它们。有多种方法可以做到这一点；一种是设置`overflow: hidden`在父级上。

```
#recent {
  clear: both;
  margin: 0 auto;
  margin-top: 30px;
  width: 824px;
  overflow: hidden;
} 
```

还有其他各种方法，有些方法比其他方法好。我鼓励您阅读[http://css-tricks.com/all-about-floats/](http://css-tricks.com/all-about-floats/)，特别是*清除浮动的技术*部分。

# javascript - 如何在 HTML 下拉菜单中显示 AJAX 结果

> ID：10273299
> 
> 赞同：0
> 
> 时间：2012-04-23T00:07:52.220
> 
> 标签：javascript, ajax

我正在创建一些下拉菜单，这些下拉菜单根据之前选择的下拉值填充。

到目前为止，我能够成功地使用 ajax 从 php 脚本中获取数据，但是，我不确定如何将该数据附加到名为 AREAS 的第二个下拉列表中。

```
HTML / Javascript / AJAX
    <html>
    <head>
      <title>IPSLA Report</title>
    <script type="text/javascript">
    function changeSelections() {
      var departments = document.selections.department;
      var areas = document.selections.areas;
      var months = document.selections.months;
      var years = document.selections.years;
      var s = document.getElementById("department");

      switch(departments.selectedIndex) {
        case 0:
          areas.options.length = 0;
          months.options.length = 0;
          years.options.length = 0;

          areas.options[0] = new Option("Select an Area");
          months.options[0] = new Option("Select a Month");
          years.options[0] = new Option("Select a Year");
          departments.options[0].selected = true;
          break;

        default:
          months.options.length = 0;
          years.options.length = 0;

          months.options[0] = new Option("Select a Month");
          years.options[0] = new Option("Select a Year");

          var pass = s.options[s.selectedIndex].text;
          ajaxFunction(pass);
      }

    }

    function ajaxFunction(pass) {

    var ajaxRequest;
      try {
         ajaxRequest = new XMLHttpRequest();
      }
      catch(e) {
        try {
          ajaxRequest = new ActiveXObjext("Msxml2.XMLHTTP");
        }
        catch(e) {
          try {
            ajaxRequest = new ActiveXObjext("Microsoft.XMLHTTP");
          }
          catch(e) {
            alert("Please use another browser");
            return false;
          }
        }
      }
      ajaxRequest.onreadystatechange = function() {
        if (ajaxRequest.readyState == 4) {
          var ajaxDisplay = document.getElementById("areas");
          if (ajaxDisplay != null) {
          ajaxDisplay.options.selectedIndex.text = ajaxRequest.responseText;
          }
          else {
            document.write("NULL!!!");
          }
        }
      }

      if (pass == "CRAN") {
        var active_id = '0';
      }

      var queryString = "?active_id=" + active_id;
      ajaxRequest.open("GET","db_connect.php" + queryString, true);
      ajaxRequest.send(null);

    }
    </script>
    </head>
    <body>
    <div id="wrapper">
      <div id="select">
        <form name="selections" id="selections" action="">
          <select name="department" id="department" onChange="changeSelections()">
            <option value="none">Select Department</option>
            <option value="none">CRAN</option>
            <option value="none">BackBone</option>
            <option value="none">Datacenter</option>
            <option value="none">Enterprise</option>
          </select>

          <select name="areas" id="areas" onChange="changeMonth()">
            <option value="none">Select an Area</option>
          </select>

          <select name="months" id="months" onChange="changeYear()">
            <option value="none">Select a Month</option>
          </select>

          <select name="years" id="years" onChange="go(this)">
            <option value="none">Select a Year</option>
          </select>
        </form>
      </div>

      <div id="image">

      </div>

      <div id="incidents">

      </div>
    </div>
    </body>
    </html>

PHP Script
<?php
  $host = "";
  $dbName = "";
  $username = "";
  $password = "";

  $conn = mysql_connect($host,$username,$password);
  $db = mysql_select_db($dbName,$conn);

  $dept_id = $_GET['id'];

  $area_query = "SELECT area_name FROM incident_area WHERE FK_dept= '$dept_id'";
  $area_result = mysql_query($area_query);

 $options = "";
  while ($area_row = mysql_fetch_assoc($area_result)) {
     #$options .= '<option value="'.$area_row['area_name'].'">'.$area_row['area_name'].'</option>';
      $options .= $area_row['area_name'];
  }
 echo $options;

?>
~ 
```

所以，基本上我只需要知道如何将 AJAX 收集的值附加到下拉菜单“区域”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T00:46:14.567

这个[网站](http://viralpatel.net/blogs/2009/04/jquery-ajax-tutorial-example-ajax-jquery-development.html)帮了我很大的忙，也在[这里](http://viralpatel.net/blogs/2009/04/jquery-ajax-tutorial-example-ajax-jquery-development.html)。Jquery是要走的路。它允许您将数据附加到 html 并创建您正在寻找的动态下拉列表。

```
Javascript
// needs hotlink to jquery file, for library to work right. 
var options = "";
$(document).ready(function(){
    $.post("./file.php", { postVariableInPHPFile: "some string" }, function(data) {
        options = data; // data is the return from the AJAX call 
    });
}); 
```

根据您希望从 PHP 调用中获得多少数据，您可能需要将结果连接起来，以获得完整列表。

# ruby-on-rails - Rails：如何处理“属性应该是一个数组，但是是一个字符串”错误？

> ID：10273301
> 
> 赞同：11
> 
> 时间：2012-04-23T00:08:06.720
> 
> 标签：ruby-on-rails, arrays, string, activerecord, serialization

我有一个表格，其中有一列是文本类型。里面有一个小字符串，应该序列化为数组

```
serialize :image_urls, Array 
```

有时，SQL 插入数据的速度更快。在这种情况下，我将插入作为字符串

```
["image1.jpg", "image2.jpg"] 
```

由于我插入了一个字符串，我的 Rails 应用程序在尝试读取数据时崩溃，并显示以下错误消息：

```
Attribute was supposed to be a Array, but was a String 
```

**有没有办法不抛出这个错误，或者捕捉它并转换数据？**

我的意思是将字符串转换为数组只是一个简单的调用，所以，这应该很容易。我只是不知道在哪里或如何完成它。

* * *

我有点想覆盖 object_from_yaml，但我不确定在哪里做这项工作。
我在正确的轨道上吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T00:34:54.333

来自[精美手册](http://api.rubyonrails.org/classes/ActiveRecord/AttributeMethods/Serialization/ClassMethods.html#method-i-serialize)：

> **serialize**`(attr_name, class_name = Object)`
> [...] 序列化是通过 YAML 完成的。

因此，该列应包含您的 YAML 化版本，`image_urls`但`'["image1.jpg", "image2.jpg"]'`不是 YAML 数组。如果您想处理原始序列化数据，那么您应该使用类似的东西

```
["image1.jpg", "image2.jpg"].to_yaml
# ---------------------------^^^^^^^ 
```

生成字符串。

或者更好的是，完全停止使用`serialize`以支持单独的表。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-30T10:13:22.463

在 Rails 4 中它对我没有任何作用`.to_yaml`，只是将它添加到强大的参数中`image_urls: []`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-16T07:22:47.210

你可以这样尝试：{:serialized_attribute_name => [ ]}。并且不要忘记将其添加到适当的控制器中作为强参数。当我遇到同样的问题时，它可以帮助我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-05T17:23:29.093

为了有一个“序列化”的数组列，我发现这非常有帮助。将此添加到您希望作为数组的列的迁移中：

```
add_column :table, :column_name, :text, array: true, default: '{}', using: "(string_to_array(column_name, ','))" 
```

有了这个，您不需要“序列化”列。这将是一个数组。

# java - 在 Android 中解析/抓取网站的库？

> ID：10273304
> 
> 赞同：0
> 
> 时间：2012-04-23T00:08:16.203
> 
> 标签：java, android, html, parsing

我正在尝试从以下网页中提取 2 件，即文章正文和文章图像中的 src

谁能告诉我如何在java中提取这两个部分

[http://www.ncataggies.com//ViewArticle.dbml?DB_OEM_ID=24500&ATCLID=205417767](http://www.ncataggies.com//ViewArticle.dbml?DB_OEM_ID=24500&ATCLID=205417767)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T00:16:06.967

Java还是JavaScript？

如果我要这样做，当我想创建页面时，我会打开 URL 的源并从 class="article-body" 中获取文本，然后在 class="photocopy" 中我会刮掉 src=" ”。这将为您提供所有文本和图像的来源。

所以只需加载页面并使用基本的字符串操作来找到正确的类，然后提取内容。

这有帮助吗？如果您需要有关特定代码的帮助，请先尝试一下，发布您拥有的内容，我可以从那里帮助您。

# java - 用于比较巨大方板 (1000 x 1000) 中的坐标的数据结构

> ID：10273305
> 
> 赞同：2
> 
> 时间：2012-04-23T00:08:18.953
> 
> 标签：java, algorithm

我正在设计一个棋盘游戏`(1000 x 1000)`。董事会充满了独特的数字。我调用了一个随机数生成器，它将生成的数字与板上的数字进行比较，然后在板上划掉数字。现在每次发生这种情况时，我都必须检查整个行/列/对角线是否已被划掉，如果是，我必须进行其他操作。

不是在调用一个数字来检查行/列/对角线后每次都进行迭代，有没有办法缓存已经检查的那些，这样我就不必重复一些迭代？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T00:38:06.563

如果我猜对了，这就是某种类似宾果游戏的游戏。

阅读上面的内容，如果您只需要检查行或列，那么拥有一个达到 1000 的迭代器将是解决方案。

但是由于您也需要检查对角线，所以不能只增加迭代器。IE：对角线可以只包含 3 个数字，并用这 3 个数字划掉，而不是 1000。

您可以使用一种算法，让您知道，对于您通过的任何位置，它的行、列和对角线是什么。

如果所有这些值都为真，则您取消了整行/列对角线。您有一个固定的 1000x1000 矩阵，因此 (int)(CalledNumber/1000)-1 是要检查的行， (CalledNumber%1000) 是列。要获得对角线，您将向上的每一行减去一列，从左到右时为向下的每一行添加一列，从右到左时反向操作。

因为那将是一个布尔 [1000][1000] 矩阵，一旦你收集了你需要的所有位置，只需将它们与 AND 条件一起检查，如果它是真的，整个行/对角线/列被划掉。

这样，您只需要检索与每个数字相关的位置，并且使用布尔值进行检查应该足够快并且不需要太多内存。

编辑：另一种可能的方式已经发布：预先计算每个对角线/行列并减少一些计数器，但我发现这有点浪费内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T00:16:24.840

就在这里。但是由于 1000 并不是*一个*很大的数字，你可能会发现它没有必要，除非你经常这样做*。*我的建议是从你所拥有的开始，只有在你遇到明确的问题时才引入 *这个*。

我的想法是简单地计算每行、每列和对角线中未划掉的数字的数量（从这里开始，我将它们称为集合）。这些被初始化为集合的最大值，只要你划掉一个单元格（从填充到划掉），你只需减少相关的值。

考虑以下矩阵：

```
abc
def
ghi 
```

当你“划掉”时`f`，你递减 的行计数器，递减 的`def`列计数器和`cfi`的对角计数器。行和列索引很容易计算，因为它们完全反映了您已经拥有的信息（您要划掉的单元格的行或列）。对角线索引只是*稍微难一些，因为它是一个**同时*使用行和列的公式。`bf``hf`

 **一旦您确定了给定单元格的计数器并将其递减，只需检查计数是否为零。零表示集合中的所有元素都已被划掉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T00:19:43.683

虽然我真的很喜欢为每列或每行设置一个简单计数器的想法，但您也可以考虑使用 BitSet。好处是，如果你真的需要，你可以找出哪些细胞仍然存在。如果这没有用，只需使用计数器。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T00:19:45.723

[您可能会发现BitSet](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/BitSet.html)的数组或集合很有帮助。**

# jquery - 如何将 Bootstrap 中的按钮组转换为表单的单选式输入？

> ID：10273307
> 
> 赞同：11
> 
> 时间：2012-04-23T00:08:24.217
> 
> 标签：jquery, forms, twitter-bootstrap

我有以下 HTML 使用 Bootstrap 创建单选按钮组。

```
<div class="btn-group" data-toggle="buttons-radio">
  <button class="btn" type="button" name="rating" value="1">
    <img ...>
  </button>
  <button class="btn" type="button" name="rating" value="2">
    <img ...>
  </button>
  <button class="btn" type="button" name="rating" value="3">
    <img ...>
  </button>
  <button class="btn" type="button" name="rating" value="4">
    <img ...>
  </button>
</div>

<button class="btn" type="submit" name="submit">Submit</button> 
```

根据用户选择，我想从名为“rating”的单选组中以表单形式发送变量，并将值分配给所选按钮的值。我将如何在 jQuery 中执行此操作？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-23T06:23:56.603

```
$('button[name="rating"].active').val(); 
```

用简单的英语来说，选择内容如下：

*   给我价值
*   `button`元素
*   `name`按具有**rating**值的属性（组）过滤
*   和 CSS 类`active`（表明它已被选中）

**根据评论中OP的新问题进行编辑：**

要从按钮捕获输入，您需要使用自定义脚本处理程序。如果您的目标是实际将其与表单一起提交，我实际上建议您反对它。主要是因为这不是用户在表单中所期望的。只需使用常规单选按钮输入。

但是，如果您确实想使用它，您可以执行以下操作：

```
$('form').submit(function() {
    var rating = $('button[name="rating"].active').val();  

    // get the rest of the values
    // submit the form
});​ 
```

这是一个常规`input`与 the的示例，`button`以及为什么您不应该在表单中使用该按钮：http: [//jsfiddle.net/TxgVe/1/](http://jsfiddle.net/TxgVe/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-23T14:28:57.060

# 好消息！

Bootstrap 3 现在使用`input type="radio"`按钮组！

但是，如果您不想升级，请参阅下面的答案：

* * *

我正在使用以下 jQuery：

```
$('[data-toggle="buttons-radio"]').children(".btn").click(function(){
    var value = $(this).val();
    $(this).parent().next().val(value);
    $(this).parent().next().valid(); // Remove this if you're not using jQuery Validation
}); 
```

为此，您需要做的就是确保`button`在.`value``input``type="hidden"``type="text"``btn-group` `div`

我注意到，如果您提交表单然后点击后退按钮，所有表单数据仍然存在，包括隐藏的输入，但按钮不会处于活动状态。为了解决这个问题，添加这个额外的 jQuery：

```
$('[data-toggle="buttons-radio"]').each(function(){
    var that = $(this);
    var value = that.next().val();
    if(value != "") {
        that.children("button[value="+value+"]").addClass("active");
    }
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-09T11:40:31.367

尝试这个。它对我有用。我有一个巨大的表格多次工作。

```
<div class="btn-group" data-toggle="buttons-checkbox">
<button onclick="javascript:document.getElementById('INPUT_ID').value='1'" type="button" class="btn">CHECK ME</button>
</div>
<input type="hidden" id="INPUT_ID" name="INPUT_ID" value="" /> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-20T08:23:49.307

这是我的解决方案：http: [//jsfiddle.net/tFYV9/1/](http://jsfiddle.net/tFYV9/1/)

**编辑** *（来自 jsFiddle 的代码）*

HTML

```
<input type="text" id="hidden_ipt" value="0" />
<div class="btn-group" data-toggle="buttons-radio" data-target="hidden_ipt"> 
  <button type="button" class="btn" data-toggle="button" value="female">
    female  
  </button>
  <button type="button" class="btn" data-toggle="button" value="male">
    male
  </button>
</div>​ 
```

JavaScript

```
// Bootstrap Hack
var _old_toggle = $.fn.button.prototype.constructor.Constructor.prototype.toggle;
$.fn.button.prototype.constructor.Constructor.prototype.toggle = function(){
  _old_toggle.apply(this);
  var $parent = this.$element.parent('[data-toggle="buttons-radio"]')
  var target = $parent ? $parent.data('target') : undefined;
  var value = this.$element.attr('value');
  if(target && value){
    $('#'+target).val(value);
  }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-02T19:52:29.680

您可以使用我的插件[bootstrap-form-b​​uttonset](https://github.com/akger1379/bootstrap-form-buttonset)来设置收音机或复选框以引导按钮组。它与 Bootstrap 2 和 Bootstrap 3 兼容。

只需编写普通的旧无线电输入，将它们包装在一起并调用`$('.my-wrapper').bsFormButtonset('attach')`. 而已。

# javascript - 需要挂钩到一个javascript函数调用，有什么办法吗？

> ID：10273309
> 
> 赞同：19
> 
> 时间：2012-04-23T00:08:31.573
> 
> 标签：javascript

我正在尝试连接一个加载 Facebook 新闻提要的函数：

```
UIIntentionalStream.instance && UIIntentionalStream.instance.loadOlderPosts(); 
```

在 Facebook.com 上。

有没有办法让我用我自己的 JavaScript 做到这一点？基本上，我需要某种回调——当调用该函数时，我希望调用我自己的函数。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-05-30T11:40:38.923

更完整的方法是：

```
var old = UIIntentionalStream.instance.loadOlderPosts;
UIIntentionalStream.instance.loadOlderPosts = function(arguments) {
    // hook before call
    var ret = old.apply(this, arguments);
    // hook after call
    return ret;
}; 
```

这确保如果`loadOlderPosts`期望任何参数或使用它，它将获得它们的正确版本，以及如果调用者期望任何返回值，它将获得它

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-23T00:10:33.753

尝试这样的事情：

```
var old = UIIntentionalStream.instance.loadOlderPosts;
UIIntentionalStream.instance.loadOlderPosts = function() {
    // hook before call
    old();
    // hook after call
}; 
```

只需在原始函数调用之前或之后的任何地方挂接即可。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-07-24T20:00:06.080

扩展之前的帖子：我创建了一个函数，您可以调用它来执行此“挂钩”操作。

```
hookFunction(UIIntentionalStream.instance, 'loadOlderPosts', function(){
    /* This anonymous function gets called after UIIntentionalStream.instance.loadOlderPosts() has finished */
    doMyCustomStuff();
});

// Define this function so you can reuse it later and keep your overrides "cleaner"
function hookFunction(object, functionName, callback) {
    (function(originalFunction) {
        object[functionName] = function () {
            var returnValue = originalFunction.apply(this, arguments);

            callback.apply(this, [returnValue, originalFunction, arguments]);

            return returnValue;
        };
    }(object[functionName]));
} 
```

奖励：您还应该将这一切都包装起来，以防万一。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-06-11T21:23:53.823

类似于上面埃里克的回答。使用 ES6 时，此函数适用于异步和同步函数：

```
export function createHook(obj, targetFunction, hookFunction) {
    let temp = obj[targetFunction]
    obj[targetFunction] = function (...args) {
        let ret = temp.apply(this, args)
        if (ret && typeof ret.then === 'function') {
            return ret.then((value)=>{hookFunction([value, args]); return value;})
        } else {
            hookFunction([ret, args])
            return ret
        }
    }
} 
```

# visual-studio-2010 - ViewModel 保存数据

> ID：10273315
> 
> 赞同：1
> 
> 时间：2012-04-23T00:09:14.273
> 
> 标签：visual-studio-2010, asp.net-mvc-3, model, code-first

我有一个包含文本框和下拉框的 ViewModel，我想将数据保存到 MVC3 中的数据库中。

我通常会这样做：

```
if (ModelState.IsValid)
{
    db.Orders.Add(orders);
    db.SaveChanges();
    return RedirectToAction("Index");  
} 
```

我将如何保存 ViewModel？

提前致谢

编辑好的，所以我得到了这个 ViewModel：

```
namespace DropDownList.Models
{
public class CreditCardModel
{
public List<SelectListItem> CardTypeOptions { get; set; }

[Display(Name = "Card Type")]
public string CardTypeID { get; set; }

[Display(Name = "Card Number")]
[Required(ErrorMessage = "Please provide your card number")]
public string CardNumber { get; set; }
}
}

and this controller:
namespace DropDownList.Controllers
{
public class CreditCardModelController : Controller
{
//
// GET: /CreditCardModel/
public ActionResult Index()
{
var model = new CreditCardModel();
// Populate the dropdown options
model.CardTypeOptions = GetCardTypes("MS"); // Set the default to American Express

return View(model);
}

[HttpPost]
public ActionResult Index(CreditCardModel model)
{
if (ModelState.IsValid)

{
return RedirectToAction("addcardcomplete");
}
// TODO - Handle the form submit
// Populate the dropdown options
model.CardTypeOptions = GetCardTypes("MS"); // Set the default to American Express

return View(model);
}
// TODO - AddCardComplete goes here

// TODO - GetCardTypes goes here

private List<SelectListItem> GetCardTypes(string defaultValue)
{
List<SelectListItem> items = new List<SelectListItem>();
items.Add(new SelectListItem { Text = "American Express", Value = "AE", Selected = (defaultValue == "AE") });
items.Add(new SelectListItem { Text = "Mastercard", Value = "MS", Selected = (defaultValue     == "MS") });
items.Add(new SelectListItem { Text = "Visa", Value = "VS", Selected = (defaultValue == "VS") });
return items;
}

public ActionResult AddCardComplete()
{
return View();
}
}
} 
```

我将如何保存这些数据？一旦iv学会了这一点，我就可以将其应用于实际场景

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T00:35:37.443

创建实体模型的实例并设置您从 ViewModel 中读取的值，该值已发布到操作方法，并将其用于保存到数据库。像这样的东西。

```
[HttpPost]
public ActionResult SaveOrder(OrderViewModel orderVM)
{
  if(ModelState.IsValid)
  {
    YourDomainEntity objDomainModel=new YourDomainEntity();
    objDomainModel.ItemId=orderVm.ItemId;
    objDomainModel.Quantity=orderVM.Quantity;
    //Set Other relevant properties also

    db.Orders.Add(orders);
    db.SaveChanges();
    return RedirectToAction("Index"); 

  } 
} 
```

您可以考虑使用[AutoMapper 之](http://automapper.codeplex.com/)类的库来将您的域对象映射到您的 ViewModel。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T00:34:54.463

我猜你的意思是编辑？您可以将其重新附加为已修改并重新保存..

```
db.Orders.Attach(orders, true);
db.ObjectStateManager.ChangeObjectState(orders, EntityState.Modified);
db.SaveChanges(); 
```

尽管我**强烈**建议您拆分数据库对象和视图模型。您还可以使用[AutoMapper](http://automapper.codeplex.com/)来简化来回操作，但保持数据库和前端分离。

# c# - 后台工作者和线程池的停止按钮

> ID：10273316
> 
> 赞同：0
> 
> 时间：2012-04-23T00:10:01.977
> 
> 标签：c#, backgroundworker, threadpool

我有以下功能，除了停止按钮外，它们都可以正常工作。它正在停止线程池，但是当我再次单击启动时，它显示 backgroundworker 仍然很忙。暂停也有效。

**如何正确停止后台工作程序和所有线程池？**

```
 public bool stop = false;
    private object signal = new object();
    private static EventWaitHandle PauseEvent = new EventWaitHandle(false, EventResetMode.ManualReset);

    private void start_button_Click(object sender, EventArgs e)
    {

        if (this._BackgroundWorker.IsBusy)
        {
            MessageBox.Show("busy", "test", MessageBoxButtons.OK);
            return;
        }
        /////////////////////////////////////////////////////////////////////////
        //some code
        /////////////////////////////////////////////////////////////////////////
                starting();
    }

    private void stop_button_Click(object sender, EventArgs e)
    {
        if (start == true)
        {
            stop = true;
            //this._BackgroundWorker.CancelAsync();
              progressBar1.Value = 0;
        /////////////////////////////////////////////////////////////////////////
        //some code
        /////////////////////////////////////////////////////////////////////////
        }
    }

    private void starting()
    {
            ThreadPool.SetMinThreads(5, 5);
            ThreadPool.SetMaxThreads(10, 10);
        /////////////////////////////////////////////////////////////////////////
        //some code
        /////////////////////////////////////////////////////////////////////////
            this._BackgroundWorker.WorkerReportsProgress = true;
            this._BackgroundWorker.WorkerSupportsCancellation = true;
            this._BackgroundWorker.RunWorkerAsync();
    }

    private void _BackgroundWorker_DoWork(object sender, DoWorkEventArgs e)
    {
        if (this._BackgroundWorker.CancellationPending)
        {
            e.Cancel = true;
            return;
        }
        /////////////////////////////////////////////////////////////////////////
        //some code
        /////////////////////////////////////////////////////////////////////////
        for (int i = 0; i < cnt; i++)
        {
           string argument = this.listView1.CheckedItems[i].Text;
           this.DoSend(argument);
        }
    }

    private void DoSend(object sender)
    {
        int activeWorkers = 0;
        StreamReader reader = new StreamReader(E_LIST);
        do
        {
                lock (reader)
                {
                    line = reader.ReadLine();
                }
        /////////////////////////////////////////////////////////////////////////
                //some code
        /////////////////////////////////////////////////////////////////////////
                lock (signal) 
                {
                    ++activeWorkers; // keep track of active workers
                }
                ThreadPool.QueueUserWorkItem(
                        o =>
                        {
                            myfunction(argument);
                            lock (signal) // signal termination
                            {
                                --activeWorkers;
                                Monitor.Pulse(signal);
                            }
                        }, state);

                lock (signal)
                {
                    while (activeWorkers > 0 || stop == true)
                    {
                        Monitor.Wait(signal);
                        this._BackgroundWorker.CancelAsync();
                    }
                }

                this.add();

                crt++;
            }
                //start progressbar
                int iProgressPercentage = (int)(((double)crt / (double)total) * 100);
                if (iProgressPercentage <= 100)
                    _BackgroundWorker.ReportProgress(iProgressPercentage);
                //end progresbar

                PauseEvent.WaitOne();   
        }
        while (reader.Peek() != -1);
        reader.Close();
    } 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T01:06:58.803

我会考虑解雇聘请的编码员。没有必要以这种方式同时进行这两种操作。很乱。

对于这个问题 -

1.  您需要在后台工作人员上调用取消并等待它停止。
2.  您需要在 for 循环中添加取消检查。

    ```
     for (int i = 0; i < cnt; i++)
         {
             if (this._BackgroundWorker.CancellationPending)
             {
                 e.Cancel = true;
                 return;
             }

             string argument = this.listView1.CheckedItems[i].Text;
             this.DoSend(argument);
         } 
    ```

# c# - 将 lambda 分配给操作

> ID：10273317
> 
> 赞同：3
> 
> 时间：2012-04-23T00:10:19.760
> 
> 标签：c#, delegates, lambda, action

已知可以分配一个不返回值给`Action<T>`对象的 lambda。理论上返回值的 lambdas 怎么样？像这个：

```
Action<double> result = (x => x + 1); 
```

结果会被忽略吗？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-23T00:13:49.087

你使用一个[`Func`](http://msdn.microsoft.com/en-us/library/bb534647.aspx)

```
Func<double, double> result = (x => x + 1); 
```

如果你这样写，那么结果可以被忽略。虽然这个例子不是非常有用

```
Action<double> result = x => { x + 1; }; 
```

# android - ndk-gdb 的问题 - gdb.setup、putpkt、运行 PID

> ID：10273318
> 
> 赞同：1
> 
> 时间：2012-04-23T00:10:19.980
> 
> 标签：android, android-ndk, gdb, segmentation-fault

我用 ndk-build 构建了一个原生库，它在 Android.mk 中被标记为可调试。如果我进入 cygwin shell 并运行

```
cd (PROJDIR)
ndk-gdb --start --verbose 
```

我得到以下信息：

```
Android NDK installation path: /cygdrive/c/Android/android-ndk-r7b
Using default adb command: /cygdrive/c/Android/android-sdk/platform-tools/adb
ADB version found: Android Debug Bridge version 1.0.29
Using ADB flags: 
Using auto-detected project path: .
Found package name: tiny.test2
ABIs targetted by application: armeabi
Device API Level: 15
Device CPU ABIs: armeabi-v7a armeabi
Compatible device ABI: armeabi
Found debuggable flag: true
Found device gdbserver: /data/data/tiny.test2/lib/gdbserver
Using gdb setup init: ./libs/armeabi/gdb.setup
Using toolchain prefix: /cygdrive/c/Android/android-ndk-r7b/toolchains/arm-linux-androideabi-4.4.3/prebuilt/windows/bin/arm-linux-androideabi-
Using app out directory: ./obj/local/armeabi
Found data directory: '/data/data/tiny.test2'
Found first launchable activity: .Test2Activity
Launching activity: tiny.test2/.Test2Activity
## COMMAND: /cygdrive/c/Android/android-sdk/platform-tools/adb shell am start -n tiny.test2/.Test2Activity
Starting: Intent { cmp=tiny.test2/.Test2Activity }

## COMMAND: /cygdrive/c/Android/android-sdk/platform-tools/adb shell sleep 2
Found running PID: 0
ERROR: Could not extract PID of application on device/emulator.
       Weird, this probably means one of these:

         - The installed package does not match your current manifest.
         - The application process was terminated.

       Try using the --verbose option and look at its output for details. 
```

它没有到达 gdb 提示符进行调试。我尝试在第一次 C++ 函数调用之前使用 .java 文件中的断点从 Eclipse 启动它，然后在运行 ndk-gdb 的 java 断点处，它成功找到运行 PID 1977，通过端口 5039 连接到设备，并从设备中拉出 libc.so，但随后得到了`Error while mapping shared library sections: libxxxx.so: No such file or directory`. 中找不到符号`info sharedLibrary`。

我已`LOCAL_CFLAGS := -g -ggdb -O0`根据另一个问题的建议添加到 Android.mk，并从中删除了`$(NDK_PATH)/build/core/build-binary.mk`从 .so 文件中删除附加内容的行。

如果有人知道这些错误的可能原因，请提供帮助。

谢谢

编辑：ndk-gdb 告诉我 '这个 GDB 被配置为 "--host-i586-mingw32msvc --target=arm-elf-linux"' 在 '(没有找到调试符号)' 之前

这意味着什么吗？

EDIT2：`share`从 gdb 运行返回`Symbol file not found`所有 .so 文件的 s 列表。在我看来，这就像我没有正确生成符号文件，或者它们没有包含在搜索路径中。它们应该设置在哪里？

EDIT3：原来我错过了 ndk-gdb 文档中的重要行 -

```
 "The GDB prompt will be preceded by a long list of error messages,
   where gdb complains that it cannot find various system libraries
   (e.g. libc.so, libstdc++.so, liblog.so, libcutils.so, etc...)

   This is normal, because there are no symbol/debug versions of
   these libraries corresponding to your target device on your
   development machine. You can safely ignore these messages." 
```

这并不能解决问题，但有助于知道这些不是错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T01:19:18.657

你有环境 ANDROID_NDK_ROOT 吗？在 Windows 下必须像 /cygdrive/c/Android/android-ndk-r7* 一样。尝试添加 DNK_DEBUG=1 编译.. 像：ndk-build DNK_DEBUG=1 -BV=1

另外，请确保您在 libs/$(Target-ABI)/ 下同时拥有 gdbserver 和 gdb.set

希望能帮助你。

# jquery - 将点击功能添加到传单点

> ID：10273319
> 
> 赞同：0
> 
> 时间：2012-04-23T00:10:21.613
> 
> 标签：jquery, maps, geojson, leaflet

使用以下代码使用 Leaflet 将 json 点添加到地图。

```
var geojsonLayer = new L.GeoJSON(data, {
    pointToLayer: function (latlng){
        return new L.CircleMarker(latlng, {
            radius: 8,
               fillColor: "#fecb00",
               color: "#fecb00",
               weight: 1,
               opacity: 1,
               fillOpacity: 0.9,
           });

       }

}); 
```

我想添加功能，以便单击该点会弹出一个弹出窗口，其中包含来自 geojson 文件的更多信息。这是如何实现的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T23:50:29.647

假设 GeoJson 包含一个名为“myProperty”的属性，要在弹出窗口中显示该信息，只需将此指令放在代码之后：

```
geojsonLayer.on("featureparse", function (e) {
    e.layer.bindPopup("<p>Prop value: " + e.properties.myProperty + "</p>");
}); 
```

为 GeoJson 集合中的每个项目调用“featureparse”事件。它通常用于数据和/或弹出绑定的更具体的样式。

# ios - UIViewController 中动态大小的表格视图

> ID：10273321
> 
> 赞同：0
> 
> 时间：2012-04-23T00:10:58.243
> 
> 标签：ios, cocoa-touch, uitableview, uiviewcontroller

这可能需要一点解释。我有一个 UIViewController 子类，它直接在下面包含一个标签和一个表格视图（标签和其他一些控件是我不能使用 UITableViewController 子类的原因）。因为tableview内容是动态的，所以添加的时候不能直接设置它的高度。因此，我在 loadView 中执行以下操作：

```
//add the table view with no size for now
    tableView = [[UITableView alloc] initWithFrame:CGRectMake(0, 0, 0, 0) style:UITableViewStyleGrouped];
    tableView.dataSource = self;
    tableView.delegate = self;
    tableView.scrollEnabled = NO;

//now that the datasource is set, use the delegates to update the height
    [tableView layoutIfNeeded];
    [tableView setFrame:CGRectMake(0, self.y_position, 320, [tableView contentSize].height)];

//add it to my scrollview, which contains all controls in this view
    [scrollView addSubview:tableView]; 
```

到目前为止，这很有效（尽管很高兴听到其他想法）。

当我为我的视图进入编辑模式时，问题就来了。我想修改表格视图的内容，插入一个额外的部分和行。到目前为止，我有以下 setEditing 的实现：

```
- (void)setEditing:(BOOL)editing animated:(BOOL)animated{   
    [tableView beginUpdates];
    [super setEditing:editing animated:animated];

    //insert or remove the section and row 
    NSRange range = NSMakeRange(0, 1);
    if (self.isEditing) {
        [tableView insertSections:[NSIndexSet indexSetWithIndexesInRange:range] withRowAnimation:UITableViewRowAnimationAutomatic];
    }
    else {
        [tableView deleteSections:[NSIndexSet indexSetWithIndexesInRange:range] withRowAnimation:UITableViewRowAnimationAutomatic];
    }

    [nameAndIngredientsTableView endUpdates]; 
```

}

额外的部分和行添加得很好，但表格视图的底部行被切断，因为它的大小尚未更新。我该怎么做？

我尝试再次使用相同的代码 - layoutIfNeeded 然后手动设置高度，但这似乎没有做任何事情

我很想知道在进入和退出编辑时动态调整表格视图大小应该看什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T03:53:35.377

如果有更好的解决方案，我将保持开放状态，但我只能通过手动计算新高度并手动设置动画来实现这一点：

```
 [UIView beginAnimations:nil context:nil];
    [UIView setAnimationDuration:0.3];
    [nameAndIngredientsTableView setFrame:CGRectMake(0, tableView.frame.origin.y, 320, tableView.frame.size.height + delta)];
    [UIView commitAnimations]; 
```

其中 delta 是 +x 表示插入，-x 表示删除。x 目前是通过反复试验确定的，这并不理想，但我正在努力从 tableView.rowHeight、.sectionHeaderHeight 和 .sectionFooterHeight 派生它

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-23T00:39:18.807

我假设您正在尝试显示所有行而不滚动。（如果您的应用可以滚动，那么最后一行被截断不是问题，对吧？）

管理此问题的更好方法是使用行高。你固定框架高度。然后将 rowHeight 计算为 frameHeight/NumberOfRows。

希望这可以帮助

# django - Django - 如何使用多个字段和 ModelForm 执行搜索

> ID：10273328
> 
> 赞同：0
> 
> 时间：2012-04-23T00:11:45.297
> 
> 标签：django, search, django-queryset, django-forms

我正在寻找使用 ModelForm 类构建一个搜索表单，它允许用户通过特定字段而不是单个字段关键字搜索来搜索模型中的值。我还希望忽略空字段。

我研究了诸如 Haystack 和 Djapian 之类的搜索引擎选项，以及在 Django 中手动解决问题，但是在使用多个字段进行查询时，我似乎无法获得结果。

这是我迄今为止的观点，部分基于对本网站上一些类似问题的回答，以及记录的内容：

```
def search(request):
    error = False
    form = InfoForm()
    if 'field1' or 'field2' or 'field3' in request.GET:
        form = InfoForm(request.GET)
        if form.is_valid():
            cd = form.cleaned_data
            field1 = cd['field1']
            field2 = cd['field2']
            field3 = cd['field3']
            if not(field1 or field2 or field3):
                error = True
            else:
                query = Q()
                if request.GET['field1']:
                    query &= Q(field1__icontains=request.GET['field1'])
                if request.GET['field2']:
                    query &= Q(field2__icontains=request.GET['field2'])
                if request.GET['field3']:
                    query &= Q(field3__icontains=request.GET['field3'])

                results = PersonInfo.objects.filter(query).distinct()

                return render_to_response('search/personsearch.html',
                        {'query': query,
                         'field1': field1,
                         'field2': field2,
                         'field3': field3,
                         'results': results,
                        },
                    context_instance=RequestContext(request))

    return render_to_response('search/infosearch.html',
            {'error': error,
             'form': form},
        context_instance=RequestContext(request)) 
```

我还直接从文档中尝试了这个复杂的查询：

```
query = InfoModel.objects.get(
    Q(field1__icontains=field1) |
    Q(field2__icontains=field2) |
    Q(field3__icontains=field3)
) 
```

在这两种情况下，查询字符串都`?field1=&field2=&field3=`出现在 URL 的后面，并且页面返回字段中提供的字段值，如预期的那样；但如果所有字段都留空，则不会返回结果或生成错误。

我显然错过了一些东西，但对于我的生活，我无法弄清楚是什么。有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T17:54:34.237

在调试搜索视图时，我发现初始`if`条件`request.GET`仅`True`针对一个字段返回，即使列出的所有字段实际上都在表单中。

从那里开始，实现我的多字段搜索的最简单方法是将`.filter()`方法串在一起。正如所希望的那样，搜索表单中的空字段被忽略，但如果所有字段都是空的，它会将您返回到搜索表单，并带有正确处理的错误。

```
def search(request):
    errors = []
    if 'field1' in request.GET:
        field1 = request.GET['field1']
        field2 = request.GET['field2']
        field3 = request.GET['field3']
        if not ((field1 or field2) or field3):
            errors.append('Enter a search term.')
        else:
            results = MyModel.objects.filter(
                field1__icontains=field1
            ).filter(
                field2__icontains=field2
            ).filter(
                field3__icontains=field3
            )
            query = "Field 1: %s, Field 2: %s, Field 3: %s" % (field1, field2, field3)
            return render_to_response('search/search_results.html',
                    {'results': results, 'query': query})
    return render_to_response('search/search_form.html',
            {'errors': errors}) 
```

此处的`query`字符串现在只返回一个格式化的搜索词列表，您可以将其放入模板中。但是，如果需要，您也可以直接返回变量并将它们以另一种形式放置在搜索结果页面上。

分页也适用于搜索结果，这对于任何实际应用程序都是必不可少的。`results`将上面的重命名为 ，并且可以将[分页上的 Django 文档中](https://docs.djangoproject.com/en/1.4/topics/pagination/)`results_list`的代码插入到您的视图中。我发现一个警告，您必须添加一个包含搜索字符串的新变量，并将其包含在分页链接的前面，否则当您单击定义的“下一个”或“上一个”链接时，您将返回到搜索表单在文档中。

最后，当您在 HTML 中构建表单而不是依赖 Django 的 ModelForm 类时，它似乎效果最好。这样您就不必费力地尝试调试表单验证错误，并且可以在视图函数中定义自己的验证规则。

# asp.net - 如何从 asp.net 读取 php cookie？

> ID：10273332
> 
> 赞同：1
> 
> 时间：2012-04-23T00:12:39.727
> 
> 标签：asp.net, cookies

我将保持简单：如何从 asp.net 读取不是由 asp.net 生成的 cookie？如果我尝试使用 Request.Cookies 检索所有 cookie，它只返回由 ASP.Net 网页生成的那些，但是，我需要检索所有 cookie（即我在浏览器的 cookie 管理器中看到的所有 cookie）我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T00:16:52.727

`Request.Cookies`应存储所有 cookie 以供查看/编辑（例如使用 PHP、javascript 等创建的那些）。因此，出于所有意图和目的，您将以正确的方式进行操作。

但是，一个失误可能与 cookie 的上下文有关：

*   它对整个域是全局的还是只是一个子域？
*   是否仅适用于特定路径（也可用于 php？）
*   它是否适用于一个域并且 ASP 站点位于另一个域上？

所有这些都会改变对 ASP 和`Request.Cookies`访问者可用的内容。

# c# - 如何在 ASP.NET MVC 中获取 ViewBag 值？

> ID：10273341
> 
> 赞同：3
> 
> 时间：2012-04-23T00:13:45.047
> 
> 标签：c#, asp.net, razor, viewbag

我正在使用 ASP.NET MVC Razor 视图引擎，并且正在尝试使用 Viewbag。以下代码对我不起作用。在控制器中我有

```
ViewBag.courses = new List<dynamic>();
ViewBag.courses.Add(new { Name = "Math" }); 
```

然后在我看来

```
@foreach(dynamic course in ViewBag.courses)
{
    <li>@course.Name</li>
} 
```

但它给了我一个错误，说对象课程没有名称的定义。调试器给了我价值，并正确地显示了一切。有什么办法可以让它工作吗？（我已经有一个解决方法，我只是宁愿使用它）。

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T01:03:42.387

就个人而言，我会使用以下方法解决它：

```
public class Course
{
    public String Name { get; set; }
}

public class CoursesViewModel
{
    private IList<Course> courses;

    public IList<Course> Courses{
      get { return this.courses ?? (this.courses = new List<Course>()); }
      set { this.courses = value; }
    }
} 
```

控制器：

```
public ActionResult Index()
{
  CoursesViewModel model = new CoursesViewModel();
  model.Courses.Add(new Course { Name = "Math" });

  return View(model: model);
} 
```

而你的观点：

```
@model CoursesViewModel
@* ... *@
<ul>
@foreach (Course course in Model.Courses)
{
  <li>@course.Name</li>
}
</ul>
@* ... *@ 
```

使用模型，这就是 MVC 的全部意义所在。它使生活变得如此轻松，更不用说您可以应用到模型以进一步自定义其显示方式的属性（模板等）。[Ab]使用`dynamic`你现在的方式只是为了让你的网站解决未来的问题，更不用说一堆猫捉老鼠的来回了（“我给那个属性起什么名字？”，“什么值类型是'foo' 再次出现？”，...），忽略是否还有其他人需要处理您生成的代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T01:23:00.720

Brad Christie 的 ViewModel 方法更合理，编译器可以更早地捕获 View 中的错误，而不是在修复错误更昂贵的时候，即在运行时；而如果你使用动态，你基本上是靠自己的。并且对匿名类型进行动态处理也行不通，我曾经说过我曾经尝试将[匿名类型持久化为动态](http://www.ienablemuch.com/2011/03/passing-anonymous-type-to-aspnet-mvcs.html)，这不是一个丑陋的黑客；但我仍然希望更早地发现我的视图错误，可以通过 ViewModel 完成。

如果你仍然想使用动态，你只需要一个好的序列化器来将匿名值从 Controller 持久化到 View。您将在控制器上执行此操作：

```
 return View((object)r.JsSerialize()); 
```

在你看来：

```
 @{ dynamic r = ((string)Model).JsDeserialize(); }

 @foreach (var item in r) {
 <tr>
  <td>
   @item.Person.Lastname
  </td>
  <td>
   @item.Person.Firstname
  </td>
  <td>
   @item.Person.FavoriteNumber
  </td>
  <td>
   <input type="checkbox" disabled="disabled" @(item.IsQualified ? "checked" : "") />
  </td>
 </tr>
} 
```

在我的尝试中，Json Serializer 是序列化需求的一个很好的候选者，它可以模仿整个对象图

我使用的 Json Serializer 组件：[http ://www.drowningintechnicaldebt.com/ShawnWeisfeld/archive/2010/08/22/using-c-4.0-and-dynamic-to-parse-json.aspx](http://www.drowningintechnicaldebt.com/ShawnWeisfeld/archive/2010/08/22/using-c-4.0-and-dynamic-to-parse-json.aspx)

# javascript - 使用 JS 对 dom 中的元素进行优先级排序的逻辑

> ID：10273349
> 
> 赞同：0
> 
> 时间：2012-04-23T00:14:26.010
> 
> 标签：javascript, jquery

我做了这个小提琴：http: [//jsfiddle.net/GMH6q/2/](http://jsfiddle.net/GMH6q/2/)

HTML：

```
<div class="feature" id="about">about</div>
<div class="feature" id="services">services</div>
<div class="feature" id="products">products</div>

<label>About</label><input type="checkbox" data-id="about" />
<label>Services</label><input type="checkbox" data-id="services" />
<label>Products</label><input type="checkbox" data-id="products" /> 
```

JavaScript：

```
$(document).ready(function(){
    var priority = {'about':1, 'services':2, 'products':3};
    $('input[type="checkbox"]').change(function(){
        var el = $(this).attr('data-id');        
        if($(this).is(':checked')){                        
           $('.feature').hide();             
           $('.feature#' + el).show();
        } else {
           $('.feature#' + el).hide();    
        }
    });              
}); 
```

如果`about`打开，则单击任何其他复选框将没有任何效果。
同样，如果`services`是 on，则 put `products`on 不会有任何效果，但 put `about`in 只会显示`about`。
如果一切都打开，那么`about`只是显示。
如果全部关闭，则没有任何显示。

优先级数组需要以某种方式集成，但我不知道如何。如果有人可以帮助我解决一些逻辑并集成数组，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T00:54:03.767

小提琴[http://jsfiddle.net/NAdCP/20/](http://jsfiddle.net/NAdCP/20/)

要求 data-id 与您的优先级对象中的键相同，它不是很优雅，但它可以满足您的要求，我更进一步确保它回退到下一个最高检查的优先级项目时你取消选中一个项目（如果有的话）

编辑还表明您的优先级对象中有一个名为“最高”的额外键来确定初始边缘点，并且可以被称为任何东西，或者用更好的机制替换

```
$(document).ready(function(){
    var priority = {'about':1, 'services':2, 'products':3, 'highest':4};
    var highest = priority['highest']
    var current = highest;
    $('input[type="checkbox"]').change(function(){
        var el = $(this).attr('data-id');
        if($(this).is(':checked')){
            if(priority[el] < current ){
               current = priority[el];          
               $('.feature').hide();             
               $('.feature#' + el).show();
            }
        } else {
            if(priority[el] == current){
               $('.feature#' + el).hide();
               var pNext= highest;
                var pNextName= "";
                $('input[type="checkbox"]').each(function(){
                    if($(this).is(':checked')){
                        var elNext = $(this).attr('data-id');
                        if(priority[elNext] < pNext){
                            pNext = priority[elNext];
                            pNextName= elNext;
                        }
                    }
                });

                current = pNext;
                if(current != highest && pNextName != ""){
                    $('.feature#' + pNextName).show();
                }
            }
        }        
    });              
});
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T00:37:20.443

你可以这样做。它还禁用不允许的复选框。这就是你所追求的吗？
**演示：http:** [//jsfiddle.net/elclanrs/GMH6q/4/](http://jsfiddle.net/elclanrs/GMH6q/4/)

```
var features = ['about', 'services', 'products'],
    $inputs = $('input:checkbox'),
    $divs = $('.feature');

$inputs.change(function() {

    $inputs.prop('disabled', false);

    var name = $(this).attr('data-id'),
        idx = features.indexOf(name),
        arr = features.slice(idx + 1, features.lenght);

    if ($(this).is(':checked')) {
        $.each(arr, function(i, v) {
            $('input:checkbox[data-id="' + v + '"]').prop('disabled', true);
        });
        $divs.hide().eq(idx).show();
    } else {
        $divs.hide();
    }

}); 
```

# vb.net - vb.net 在共享 subs 中传递变量

> ID：10273350
> 
> 赞同：0
> 
> 时间：2012-04-23T00:14:27.043
> 
> 标签：vb.net, multithreading, parameters, invoke, address-operator

```
Public Shared _formRef As frmMain
Public Shared f As frmMain

    Class Server
        <STAThread()> Public Shared Sub Main()
            Dim aTcpMessaging As IMessagingSystemFactory = New TcpMessagingSystemFactory()
            Dim anInputChannel As IInputChannel = aTcpMessaging.CreateInputChannel(theIPforLocal & ":" & thePort)
            Dim aStringMessagesFactory As IStringMessagesFactory = New StringMessagesFactory()
            Dim aStringMessageReceiver As IStringMessageReceiver = aStringMessagesFactory.CreateStringMessageReceiver()
            AddHandler aStringMessageReceiver.MessageReceived, AddressOf StringMessageReceived

            aStringMessageReceiver.AttachInputChannel(anInputChannel)
        End Sub

        Private Shared Sub StringMessageReceived(ByVal sender As Object, ByVal e As StringMessageEventArgs)
            _formRef = f

            LANResponse = Convert.ToString(e.Message)
            Dim lanSent As String() = Nothing
            Dim sep(3) As Char
            Dim s As String = ""

            sep(0) = "~"
            'sep(1) = ","
            lanSent = LANResponse.Split(sep, 2)

            Dim a As New Threading.Thread(AddressOf getStatus)

            a.SetApartmentState(Threading.ApartmentState.STA)
            a.Start(Trim(lanSent(0)) & Trim(lanSent(1)))
   End Sub
End Class

Class Sending
        Public Shared Sub Main(ByRef whatToWrite As String)
            Dim aTcpMessaging As IMessagingSystemFactory = New TcpMessagingSystemFactory()
            Dim anOutputChannel As IOutputChannel = aTcpMessaging.CreateOutputChannel(theIPforVM & ":" & thePort)
            Dim aStringMessagesFactory As IStringMessagesFactory = New StringMessagesFactory()
            Dim aStringMessageSender As IStringMessageSender = aStringMessagesFactory.CreateStringMessageSender()

            aStringMessageSender.AttachOutputChannel(anOutputChannel)
            aStringMessageSender.SendMessage(whatToWrite)
        End Sub
End Class

    Private Shared Sub getStatus(ByVal data As Object)
        _formRef.UpdateLabelText("Static: " & data)
    End Sub

    Public Sub UpdateLabelText(ByVal text As String)
        If Me.lblStatus.InvokeRequired Then
            Me.lblStatus.Invoke(New Action(Of String)(AddressOf UpdateLabelText), New Object() {text})
        Else
            Me.lblStatus.Text = text
        End If
    End Sub

#Region "Form Load"
    <STAThread()> Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

        Call Server.Main()
        '--------------------------------
        isTesting = False
        lblVer.Text = "V.7"
        '--------------------------------
    End Sub
#End Region 
```

但是一旦启动代码，我就会收到您在附加图片中看到的错误

![错误](../Images/a4ccc1c8a8deb6577924db5709f2dfd8.png)

但奇怪的是，我确实传递了我正在寻找的价值：

![错误 2](../Images/4f4b20a988f5926b42673f74ad8e7c15.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T00:30:42.450

您永远不会将 frmMain 的运行实例分配给共享变量。

如果您将 Server Main 方法更改为：

```
 <STAThread()> Public Shared Sub Main(formRef As frmMain)
        f = FormRef 
```

然后将您对此方法的调用更改为：

```
Call Server.Main(Me) 
```

那么这应该可以解决您的问题（假设 Server.Main 是从 frmMain 调用的）。

# javascript - 如何在 JavaScript 代码模块上下文中使用 FormData？

> ID：10273351
> 
> 赞同：1
> 
> 时间：2012-04-23T00:14:28.230
> 
> 标签：javascript, firefox, firefox-addon, form-data

如何使用JavaScript[代码模块中的](https://developer.mozilla.org/en/JavaScript_code_modules/Using)[FormData](https://developer.mozilla.org/en/XMLHttpRequest/FormData)？

```
new FormData(); 
```

给出：

> FormData 未定义

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T00:27:27.920

因为 JavaScript 代码模块没有正常的浏览器上下文，我有时通过传入一个 , 或任何可能与我需要的对象相关的对象来解决这个问题`window`（`document`例如，当您调用内置于模块中的方法时传入`window`or对象） `FormData`.

但是，我看到有人已经提出了这种担忧，并且有一种解决方法：[https ://bugzilla.mozilla.org/show_bug.cgi?id=672690#c4](https://bugzilla.mozilla.org/show_bug.cgi?id=672690#c4)

```
var formData = Components.classes["@mozilla.org/files/formdata;1"]
                         .createInstance(Components.interfaces.nsIDOMFormData); 
```

我相信您总能找到浏览器上下文项的此类/接口等价物，除非您需要获取特定的`window`或`document`.

# php - php在多个输入搜索表单上返回空白页

> ID：10273353
> 
> 赞同：0
> 
> 时间：2012-04-23T00:14:38.520
> 
> 标签：php, mysql

我是全新的 php/mysql 和全新的网站，所以提前感谢任何帮助。我需要创建一个 php 脚本，它将从具有四个输入字段的搜索表单中返回结果。需要这样才能搜索字段的任何组合，或者根本不搜索，这将返回数据库中的所有项目。到目前为止，当我在表单页面上单击提交时返回的只是一个空白页面。

这就是我到目前为止所拥有的。我最初尝试将它作为一个查询来尝试捕获所有要求，然后作为一系列“if”语句，我在这个站点上阅读了这些语句，但我得到的只是一个空白页。

```
<?php
if (isset(
  $_POST['product_description'],$_POST['product_finish'],
  $_POST ['product_minimum_price'], $_POST['product_maximum_price'])) {

    $product_description = ($_POST['product_description']);
    $product_finish = ($_POST['product_finish']);
    $product_minimum_price = ($_POST['product_minimum_price']);
    $product_maximum_price = ($_POST['product_maximum_price']);

    $query = "SELECT ProductDescription, ProductFinish, ProductStandardPrice FROM product_t";
    if (isset($_POST['product_description'])) {
        $query = "SELECT ProductDescription, ProductFinish, ProductStandardPrice
             FROM product_t
             WHERE ProductDescription LIKE '%.$product_description.%'";
    }

    if (isset($_POST['product_finish'])) {
        $query = "SELECT ProductDescription, ProductFinish, ProductStandardPrice
             FROM product_t
             WHERE ProductDescription LIKE '%.$product_finish.%'";
    }

    if (isset($_POST['product_minimum_price'])) {
        $query = "SELECT ProductDescription, ProductFinish, ProductStandardPrice
             FROM product_t
             WHERE ProductStandardPrice >= 'product_minimum_price'";
    }

    if (isset($_POST['product_maximum_price'])) {
        $query = "SELECT ProductDescription, ProductFinish, ProductStandardPrice
             FROM product_t
             WHERE ProductStandardPrice <= 'product_maximum_price'";
    }

    $result = mysql_query($query);
    if($result === FALSE) die(mysql_error());

    echo '<table align="left" cellspacing="1" cellpadding ="5" border="1"><tr><td
    align="left">Product Description</td><td align="left">Product Finish</td><td align="left">
    Product Standard Price</td></tr>';

    while ($row=mysql_fetch_array($result, MYSQL_ASSOC)) {
        echo '<tr><td align="left">' .$row['ProductDescription'].
        '</td><td align="left">'.$row['ProductFinish'].
        '</td><td align="left">'.$row['ProductStandardPrice'].'</td></tr>';
    }

   echo '</table>';
   mysql_close();
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T00:23:49.593

如果你得到一个空白页，那是因为你的外部`if`陈述没有评估为真。包括一个`else`子句并回显其他内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T00:30:54.363

很可能您的表单名称拼写错误，您应该让页面只回显那些 POST 变量，以仔细检查您是否正在向它们获取数据。

此外，您缺少与数据库的连接，我建议使用 PDO 作为您的数据库连接，您将获得更好的错误报告。

```
mysql_connect("localhost", "mysql_user", "mysql_password") or
die("Could not connect: " . mysql_error());
mysql_select_db("mydb"); 
```

高温高压

# asp.net-mvc-3 - 如何确保我的 asp.net mvc Web 应用程序中的攻击者用户没有修改对象 ID

> ID：10273358
> 
> 赞同：1
> 
> 时间：2012-04-23T00:15:13.287
> 
> 标签：asp.net-mvc-3, security

我有两个具有一对多关系的对象 ( `LabTest & LabTestDetail`)。当我想添加一个新`LabTestDetail`对象时，我将`LabTest ID`（父 ID）传递`LabTestDetail Create action method`给`Ajax.actionlink`如下

```
@Ajax.ActionLink("+ Add New Lab Test Detail",
      "Create", "LabTestDetail",
      new { labtestid = Model.LabTestID },

new AjaxOptions
{

    InsertionMode = InsertionMode.Replace,
    HttpMethod = "Get",
    UpdateTargetId = "replace",
    LoadingElementId = "progress"
}) 
```

`LabTestDetail` `Create Action method`外观如下；我将值存储`labtestid` 在一个`viewbag`： -

```
[Authorize(Roles = "Doctor")]

public ActionResult Create(int labtestid)
            {
                ViewBag.labtestid = labtestid;
                LabTestDetail ltr = new LabTestDetail();
                return PartialView("_Create", ltr);
            } 
```

然后在`create view`i 上存储 a 的值`Viewbag`如下`hidden html field`：-

```
<input type= "hidden" name = "labtestid" value = @ViewBag.labtestid /> 
```

最后`LabTestDetail` `Post Create action`方法如下：-

```
[Authorize(Roles = "Doctor")]    
[HttpPost]
            [ValidateAntiForgeryToken]
            public ActionResult Create(LabTestDetail ltr, int labtestid)
            {
                try
                {
                    if (ModelState.IsValid)
                    {
                        ltr.LabTestID = labtestid;
                        repository.AddLabTestDetail(ltr);
                        repository.Save();
                        return PartialView("_datails", ltr);
                    }
                }
    //code goes here 
```

当我测试它时，上面的内容对我来说很好，**但是我最关心的是我如何确保`labtestid`在以下操作期间攻击者没有修改**的值：-

1.  当我将`labtestid`值`ajax.action link`从`create action method`

2.  当我将`labtestid`值作为视图包传递时

3.  最后，当我将`labtestid`值分配给 a时`html hidden field`。

最好的问候提前感谢您的帮助。BR

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T07:41:38.857

如果您使用身份验证并且只有经过身份验证的用户才能执行这些操作，那么在应该执行更新的操作中，您可以验证当前经过身份验证的用户 ( `User.Identity.Name`) 是否是实验室测试的所有者。为此，这意味着您需要将这些实验室测试 ID 与用户相关联。

# iphone - GameCenter - 向游戏中心提交分数的代码不起作用 - Xcode - iOS

> ID：10273364
> 
> 赞同：0
> 
> 时间：2012-04-23T00:16:07.527
> 
> 标签：iphone, ios, xcode, game-center

我有将我的分数提交到游戏中心的代码，但是每当我在游戏中心提交分数时，它说我的分数是 0。我不确定这是怎么发生的？我还导入了 GameKit 框架。我查看了几个教程，所有这些教程都来自以前版本的 Xcode，但我不确定这是否会有所不同。

```
-(IBAction)submitScore{
if (highscore>0) {

GKScore *scoreReporter = [[[GKScore alloc] initWithCategory:@"MyLeaderBoardID"] autorelease];

scoreReporter.value = [[NSNumber numberWithInt:highscore] longLongValue];
NSLog(@"posted");
NSLog(@"%i",highscore);

[scoreReporter reportScoreWithCompletionHandler:^(NSError *error) {
    if (error != nil)
    {
        NSLog(@"failed!!!");
        NSLog(@"%i",highscore);
    }
    else{
        NSLog(@"Succeded");

    }
}];} 
```

我也有用于登录的代码：

```
[[GKLocalPlayer localPlayer] authenticateWithCompletionHandler:^(NSError *error){
if (error == nil) {
    NSLog(@"authintication success");
}
else{
NSLog(@"authintication failed");
    UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Game Center Disabled"message:@"For Game Center make sure you have an account and you have a proper device connection."delegate:self cancelButtonTitle:@"Ok"otherButtonTitles:nil];
    [alert show];
} 
```

}];

```
self.currentLeaderBoard = @"MyLeaderBoardID"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-22T19:48:12.843

我会尝试制作一个 int64_t 并将其设置为 scorevalue ...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-06T23:58:40.060

您确定您在 iTunes Connect 上设置的排行榜将“MyLeaderBoardID”作为其**排行榜 ID**吗？我看不出代码有什么问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-16T14:29:47.423

好吧，我在 iOS 编程方面相当陌生，并试图学习向游戏中心报告分数。但是当我检查你的代码时，我猜测有两种可能性：

1) "scoreReporter.value = [[NSNumber numberWithInt:highscore] longLongValue];" 可能需要一个字符串值而不是一个数字值

2) 您的排行榜的 ID 可能不是“MyLeaderBoardID”

在我看来，其他部分似乎还不错。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-11T01:06:22.853

也许这样...

```
GKScore *scoreReporter = [[GKScore alloc] initWithCategory:@"ID"]; 
```

# spotify - Web API - 建议检索添加的最新曲目的方法

> ID：10273368
> 
> 赞同：0
> 
> 时间：2012-04-23T00:16:38.207
> 
> 标签：spotify

我目前正在使用 Web API 来跟踪不同艺术家/曲目受欢迎程度的历史趋势。但是，为了在不经常访问 Web API 的情况下维护我的记录，返回添加到 Spotify 的最新曲目的方法将是对 API 的一个很好的补充。你认为将来有可能有类似的东西吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T05:14:03.830

此查询显示添加到 Spotify 的最新曲目，不幸的是它仅按受欢迎程度排序，但也许它对您来说是一个很好的解决方案：

[http://ws.spotify.com/search/1/album?q=tag:new](http://ws.spotify.com/search/1/album?q=tag:new)

# python - ImportError：无法导入名称 ABCMeta - Linux 上 PyDev 中的 Python 错误

> ID：10273373
> 
> 赞同：10
> 
> 时间：2012-04-23T00:18:00.653
> 
> 标签：python, pydev

我在 Linux 上使用 PyDev 编写代码时遇到了这个奇怪的错误。即使是这样的简单代码也会产生错误

```
print 'Hello World' 
```

错误就在这里

```
True
Traceback (most recent call last):
  File "/usr/lib/python2.7/site.py", line 62, in <module>
    import os
  File "/usr/lib/python2.7/os.py", line 398, in <module>
    import UserDict
  File "/usr/lib/python2.7/UserDict.py", line 83, in <module>
    import _abcoll
  File "/usr/lib/python2.7/_abcoll.py", line 11, in <module>
    from abc import ABCMeta, abstractmethod
ImportError: cannot import name ABCMeta 
```

我的模块名为*sample.py*。请帮我。谢谢

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-04-23T00:46:46.310

我的猜测是，您的工作目录或 PYTHONPATH 中有一个名为`abc.py`or的文件，并且该文件隐藏了 stdlib模块。`abc.pyc``abc`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-09T06:00:47.053

很可能您的 python 脚本的文件名是“abc”，而“abc”是 python 标准库的一个模块。

更改文件名并再次运行脚本，错误将消除，脚本将正常工作。

# javascript - jQuery.data() 仅适用于附加元素？

> ID：10273374
> 
> 赞同：0
> 
> 时间：2012-04-23T00:18:10.907
> 
> 标签：javascript, jquery, jquery-data

在 jQuery 文档（[jQuery.data()](http://api.jquery.com/jQuery.data/)）中，示例是关于分配给已附加到文档的元素的“数据”，如下所示

```
<script>var div = $("div")[0];
    jQuery.data(div, "test", { first: 16, last: "pizza!" });
    $("span:first").text(jQuery.data(div, "test").first);
    $("span:last").text(jQuery.data(div, "test").last);
</script> 
```

我尝试以相同的方式分配数据，但分配给尚未附加的对象，如下所示

```
<script>var div = $("<div></div>")[0];
    jQuery.data(div, "test", { first: 16, last: "pizza!" });
    $("span:first").text(jQuery.data(div, "test").first);
    $("span:last").text(jQuery.data(div, "test").last);
</script> 
```

这没用。应该是？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T00:21:53.150

删除`[0]`, 适用于最新的 jquery 版本

```
<script>var div = $("<div></div>");
    jQuery.data(div, "test", { first: 16, last: "pizza!" });
    $("span:first").text(jQuery.data(div, "test").first);
    $("span:last").text(jQuery.data(div, "test").last);
</script> 
```

证明：http: [//jsfiddle.net/Lsa7D/1/](http://jsfiddle.net/Lsa7D/1/)

# jquery - 一次加载所有内容（图像）以提高网站性能

> ID：10273375
> 
> 赞同：4
> 
> 时间：2012-04-23T00:18:41.660
> 
> 标签：jquery, image, web, load

我最近[在我的网站](http://nanisolutions.us/wordpress/mitzvah/)上做了一些网站分析，发现我网站 90% 的加载时间来自我在网站上拥有的 100 张图片。我已经裁剪并压缩了所有图像，使它们的大小（每个）约为 120kb。

有没有一种使用 jQuery 的方法，也许我可以在网站加载时缓存每个图像，这样每个页面就不需要 10 - 12 秒的时间来加载？如果没有，阅读本文的人是否有更好的想法？到目前为止，当每个页面加载时，它首先会加载您在右侧看到的缩略图，然后会在屏幕中央加载较大的图像。

我很感激任何帮助！

*   埃文

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T00:27:07.687

> 有没有一种使用 jQuery 的方法，也许我可以在网站加载时缓存每个图像，这样每个页面就不需要 10 - 12 秒的时间来加载？

缓存由 HTTP 标头（您当然应该设置）控制，但是如果您以每张 120KB 的速度加载数百张图像，则无论缓存如何，初始加载时间都会太长。

*预加载*可以用一点 JavaScript（jQuery 与否）来完成，但你可能不应该预加载数百张图片（如果一个网站在后台默默地占用了我所有的带宽，我会很不高兴）。

我建议要么按需加载全尺寸图像（例如用户点击缩略图）和/或延迟加载图像（例如仅在它们滚动到视图时加载它们）。

鉴于您网站的布局，我会：

*   加载第一个可见图像
*   为每个可见缩略图预加载图像
*   每当用户点击“向下”箭头时，预加载更多图像。

情侣杂项。笔记：

*   [http://gtmetrix.com/](http://gtmetrix.com/)是一个很好的性能分析站点。

*   您的布局在非常宽的显示器上有点混乱。在我的 2500x1600 显示器上，控制缩略图的箭头距离数百像素，这使得它们很难被注意到。![截屏](../Images/a66a30a852973a83ea32ff4edae14230.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T00:34:39.600

以为我会将此作为答案，因为您喜欢我的延迟加载评论。

尝试使用[jQuery 的延迟加载插件](http://www.appelsiini.net/projects/lazyload)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T00:27:44.603

这让人想起 90 年代和“悬停”图像......

您可以在 JavaScript 中使用[Image](https://developer.mozilla.org/en/DOM/HTMLImageElement)并将它们预加载到浏览器缓存中，如果这是您所追求的：

```
var i = new Image();
i.src = "/path.to/image.jpg"; 
```

或者，对于一个集合：

```
var images = Array();
images[0] = '...1.jpg';
images[1] = '...2.jpg';
images[2] = '...3.jpg';

var img = new Image();
for (var i = 0; i < images.length; i++){
  img.src = images[i];
} 
```

# java - Android AlarmManager 服务

> ID：10273376
> 
> 赞同：3
> 
> 时间：2012-04-23T00:18:43.343
> 
> 标签：java, android, service, alarmmanager

我有一个小问题......比其他任何事情都需要一些技巧和例子......我需要比较两个字符串，其中一个来自设备上的当前日期，另一个是一个日期我写。所以这个比较可以随时进行。如果这个比较是真的运行各种命令。

我创建了一个调用循环一服务的 AlarmManager，并且在此服务中存在我需要的比较..

```
private static final int EXEC_INTERVAL = 10 * 1000;

Intent myIntent = new Intent(AndroidAlarmService.this, MyAlarmService.class);
   pendingIntent = PendingIntent.getService(AndroidAlarmService.this, 0, myIntent, 0);

            AlarmManager alarmManager = (AlarmManager)getSystemService(ALARM_SERVICE);

            Calendar calendar = Calendar.getInstance();
            calendar.setTimeInMillis(System.currentTimeMillis());
            calendar.add(Calendar.SECOND, 10);

            alarmManager.setRepeating(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(), EXEC_INTERVAL,  pendingIntent); 
```

做我需要的更好的方法是什么？

我用这个？还是需要广播接收器？

如果你能给我一些例子，非常感谢..提前谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T00:39:35.500

据我所知，您在“MyAlarmService”中每 10 秒准时进行一次测试，对吗？

如果是这样，我的建议是使用 Handler 而不是 AlarmManager。根据android文档（http://developer.android.com/reference/android/app/AlarmManager.html），你应该使用Handler来做定时操作。

此外，您可能不需要每次运行测试时都启动服务。服务不是你应该不断启动的东西，你可能想把测试代码放在循环中，只有在你真正需要的时候才启动服务。

至于使用handler的例子，这里有教程：[http ://www.vogella.com/articles/AndroidPerformance/article.html](http://www.vogella.com/articles/AndroidPerformance/article.html)

你应该做的是：

```
Handler handler = new Handler();
handler.postDelayed(new Runnable() { /* comparison work */ }, EXEC_INTERVAL); 
```

# ruby-on-rails - 在 Rails 3.2.3 中安装 NUBIC/surveyor gem 的问题

> ID：10273379
> 
> 赞同：0
> 
> 时间：2012-04-23T00:19:33.273
> 
> 标签：ruby-on-rails, ruby-on-rails-3, surveyor-gem

我正在尝试在 Rails 3.2.3 应用程序中安装[NUBIC 测量员gem。](https://github.com/NUBIC/surveyor)我做了以下步骤：

1) 创建了一个新的 Rails 3.2.3 项目

```
 $ rails new surveyor 
```

2) 添加了测量员宝石

```
 gem "surveyor" 
```

3) 跑

```
bundle install 
```

4) 生成资产

```
 script/rails generate surveyor:install 
```

5）运行迁移

```
 bundle exec rake db:migrate 
```

6）然后当我尝试“厨房水槽”调查时

```
 rake surveyor FILE=surveys/kitchen_sink_survey.rb 
```

我遇到了以下错误：

> 调查耙中止！无法批量分配受保护的属性：title、reference_identifier

我[在 github (#302) 上](https://github.com/NUBIC/surveyor/issues/302)发现了这个关于受保护属性的大规模分配的问题，似乎问题已关闭并且 gem 已更新。任何关于我做错了什么的想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T19:44:10.320

正如瑞德所说，这不再是当前版本的测量员的问题。您可以尝试`bundle update surveyor`，或在 Gemfile 中指定更新版本的测量员，例如

```
gem 'surveyor', '~>1.3.0' 
```

您可能还需要运行`bundle exec rake surveyor FILE=...`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T08:28:22.527

1）我需要在 Gemfile 中指定依赖的 gem，我没有这样做。我只指定了测量员宝石。

```
 gem 'surveyor', :git => 'git://github.com/NUBIC/surveyor.git' 
 gem 'haml', '~> 3.1.3'
 gem 'sass'
 gem 'fastercsv', '~> 1.5.4'
 gem 'formtastic', '~> 1.2.4'
 gem 'uuidtools', '~> 2.1'
 gem 'mustache', '0.99.4'
 gem 'rabl', '~>0.6.6'
 gem 'rake', '0.9.2' 
```

2）surveyor 所需的 rake 版本（0.9.2）与我正在运行的版本（0.9.2.2）不同，因此我需要在[surveyor README 安装说明](https://github.com/NUBIC/surveyor)`bundle exec`中的所有 rake 命令之前添加。

# cakephp - 在 cakePHP 中，控制器设置其视图随后将访问的变量的最佳方式是什么？

> ID：10273383
> 
> 赞同：1
> 
> 时间：2012-04-23T00:19:51.473
> 
> 标签：cakephp, variables

新手问题。我希望没有人介意。

在文件 AccessesController.php

```
class AccessesController extends AppController {
    public $name = 'Accesses';
    public $helpers = array('Html', 'Form');

    public function index() {
       $this->aVariable = 123;
    }
} 
```

在文件 View/Accesses.ctp

```
<h1> You came thru the AccessesController and set
    aVariable to <?php echo $this->aVariable?>, happy?</h1> 
```

它不会在那里打印 123 。它不知道 this->aVariable 已设置为 123。

我应该使用这些全局变量`Configure::read / Configure::write`吗？或者控制器和视图如何访问相同的变量？// Accesses.ctp 不知道 this->aVariable 已设置为 123。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T01:33:34.500

要将变量从控制器发送到视图：

```
//Controller
$this->set('variableName', $variableValue);

//View
echo $variableName; 
```

如果要发送多个变量，通常使用[PHP 的 compact() ：](http://php.net/manual/en/function.compact.php)

```
//Controller
$var1 = 'pizza';
$var2 = 'beer';
$var3 = 'sleep'; //(trying to keep it PG)
$this->set(compact('var1', 'var2', 'var3'));

//View
echo 'The perfect night: ' . $var1 . ' ' . $var2 . ' ' . $var3; 
```

# c# - Nothing returned after authentication?

> ID：10273385
> 
> 赞同：1
> 
> 时间：2012-04-23T00:20:09.437
> 
> 标签：c#, wcf, linq, web-services, authentication

When I try to return the student using this method it doesn't show anything or any error, if I however don't put anything in the password box I get a 404 error so I know its working so my authenticate method isn't working, I basically want to authenticate the user and return something from the student collection, like the FirstName?

```
private void button20_Click(object sender, EventArgs e)
{
    string uri = string.Format("http://localhost:8000/Service/AuthenticateStudent/{0}/{1}", textBox28.Text, textBox29.Text);
    XDocument xDoc = XDocument.Load(uri);
    var Tag12 = xDoc.Descendants("Student")
        .Select(n => new
        {
            FirstName = n.Element("FirstName").Value,
        })
        .ToList();

    dataGridView12.DataSource = Tag12;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T02:47:29.357

You'll want to create a special return type that includes the boolean you're currently returning, as well as the Student:

```
public class AuthenticationResult
{
    public bool IsValid {get;set;}
    public Student ValidatedStudent {get;set;}
} 
```

Then return an object of this type from your WCF method:

```
public AuthenticationResult AuthenticateStudent(string studentID, string password)
{
    var result = students.FirstOrDefault(n => n.StudentID == studentID);
    bool flag = false;
    if (result != null) {...}

    ...
    return new AuthenticationResult {IsValid = flag, ValidatedStudent = result};
} 
```

# python - 我应该如何使用默认字典？

> ID：10273386
> 
> 赞同：-1
> 
> 时间：2012-04-23T00:20:25.613
> 
> 标签：python

有一个名为 Count 的类。

```
def __init__(self, caters):
    self.form = collections.defaultdict(collection.Counter)
    self.caters = {caters: Catergory(caters) for caters in cats} 
```

我从一些文件中读取信息并赋予它价值，

```
def read_file(file_name, level, counters):
    data = open(file_name).read()
    counters.caters[level].docs.add(file_name)
    for token in blabla:
        counter.form[token][file_name] += 1 
```

如果我想获得每个令牌的总频率，而不管它在哪个文件中，我该怎么办？

如何获取某个单词在某个级别的频率，例如。令牌的名称是dog，level = 1，我要获取freq[dog][1]？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T01:22:41.803

像其他人一样，我不确定我是否有足够的背景来提供全面的信息。但是这一行：

```
counter.form[token][file_name] += 1 
```

对我说`counter.form`，最终将包含每个令牌/文件名组合的单独计数。这得到了您所说的计数器初始化的支持：

```
self.form = collections.defaultdict(collections.Counter) 
```

那就是说这`self.form`是一个默认字典，其默认值是实例`collection.Counter`（基本上`defaultdict(int)`是一些额外的方法，IIRC）。所以，基本上，一个二维计数器。

如果您想要令牌计数而不管它们在哪个文件中，那么您基本上不想`file_name`成为计数器的参数，并且计数器需要是一维的。所以我会考虑将你的计数器的初始化更改为：

```
self.form = collections.Counter() 
```

并将您的计数递增更改为：

```
counter.form[token] += 1 
```

根据程序其余部分的结构，您可能需要进行更多更改。但希望这会让你朝着正确的方向前进。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T00:33:33.447

我使用 collections.defaultdict(int) 来计算标记的实例。您可以在您感兴趣的所有文件中应用这样的代码，对每个文件使用相同的令牌计数器集合（在我的示例中为 token_counts）：

```
token_counts = collections.defaultdict(int)
with open('foo.txt') as f:
    for line in f:
        for token in line.split():
            token_counts[token] += 1
for token, count in token_counts.items():
    print token, count 
```

我必须承认我发现你的问题有点含糊。这是我对您要查找的内容的最佳猜测。

# python - 与多个模型的一对多关系

> ID：10273388
> 
> 赞同：2
> 
> 时间：2012-04-23T00:20:30.270
> 
> 标签：python, sqlalchemy, flask, flask-sqlalchemy

我有一个模型`Thing`和一个模型`Action`。`Thing`s 和`Action`s之间存在一对多的关系。但是，我希望能够继承`Action`(例如`BuildAction`)`HealAction`和`BloodyStupidAction`. 是否可以使用 Flask-SQLAlchemy 来执行此操作并维护单个一对多关系？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T15:33:42.050

[继承配置](http://docs.sqlalchemy.org/en/latest/orm/extensions/declarative.html#inheritance-configuration)下的 SQLAlchemy 文档中描述了此问题。如果您的不同子类将共享同一个数据库表，则应使用[单表继承](http://docs.sqlalchemy.org/en/latest/orm/extensions/declarative.html#single-table-inheritance)。

代码示例：

```
class Thing(db.Model):
    __tablename__ = 'thing'
    id = db.Column(db.Integer, primary_key=True)
    actions = db.relationship('Action', backref=db.backref('thing'))

class Action(db.Model):
    __tablename__ = 'action'
    id = db.Column(db.Integer, primary_key=True)
    thing_id = db.Column(db.Integer, db.ForeignKey('thing.id'))
    discriminator = db.Column('type', db.String(50))
    __mapper_args__ = {'polymorphic_on': discriminator}

class BuildAction(Action):
    __mapper_args__ = {'polymorphic_identity': 'build_action'}
    time_required = db.Column(db.Integer) 
```

每个子类都`Action`应该继承`thing`父类中定义的关系。该`action.type`列描述了表中每一行代表的子类操作。

# iphone - 使用表格单元格的文本访问相应的对象

> ID：10273389
> 
> 赞同：0
> 
> 时间：2012-04-23T00:20:31.357
> 
> 标签：iphone, objective-c, cocoa-touch

目前，我有一个 savedWorkout 类，它只是一个表格视图，在每个单元格中填充了不同的练习。我现在的目标是让用户能够单击每个单独的练习，这将带您进入一个包含有关它的详细信息的新视图。

为此，我创建了一个练习类，它将保存有关新对象的详细信息。这可能吗？

这是我写的一些伪代码：

```
if (Table View Cell's Text == ExerciseObject.exerciseName) {
Populate a view with the corresponding information;
} 
```

作为 iPhone 编程的新手，我不确定什么是最好的方法，这就是我认为最好的方法。

我的练习类包含一个 NSString 来跟踪练习名称，以及三个 NSMutableArray 来保存不同的信息。

如果我朝着正确的方向前进，请告诉我。

编辑：

在尝试实现我的伪代码之后，这就是我想出的：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

    Exercise *exerciseView = [[Exercise alloc] initWithNibName:@"Exercise" bundle:nil]; //Makes new exercise object.

    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    NSString *str = cell.textLabel.text; // Retrieves the string of the selected cell.

    exerciseView.exerciseName.text = str;

    [self presentModalViewController:exerciseView animated:YES];
} 
```

但是，这似乎不起作用。当新视图出现时，标签不显示（我将 UILabel 练习名称连接到我想要的字符串）。我执行这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T00:27:15.040

是的，当然有可能。只需使用委托方法：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath; 
```

并根据索引位置检查您的数据源单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T02:08:03.897

您可能需要发布您的 cellForRowAtIndexPath 方法。如果按照传统方式完成，它使用 indexPath.row 访问练习数组以获取特定练习，然后根据特定练习更改单元格属性。这对吗？

就是这样，那你就到了半路。

**编辑** 1) 使用您的 cellForRowAtIndex 路径中的代码*来*初始化您的 str，如此处所示。2) 新的视图控制器视图尚未构建。在 VC 准备好之前，您不能在视图层次结构中初始化子视图。您需要将字符串传递给该视图控制器中的属性（如果需要，可以在自定义 init 方法中），然后在该类的 viewDidLoad 上，您可以将 exerciseName 字段设置为您之前保存的字符串属性。该子视图不应该是类公共接口的一部分。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    // There should be an array of exercises, the same one used in cellForRowAtIndexPath:
    NSString *str = [self.myArrayOfExercises objectAtIndex:indexPath.row];
    // Just made code up here, but however you get a string to place in the cell
    // in cellForRowAtIndexPath do that same thing here.

    Exercise *exerciseView = [[Exercise alloc] initWithNibName:@"Exercise" bundle:nil];
    // Might be wise to rename this ExerciseViewController, since it's probably (hopefully) a ViewController subclass

    // no need to get a table cell, you have the info you need from your exercise array
    //UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    //NSString *str = cell.textLabel.text; // Retrieves the string of the selected cell.

    exerciseView.exerciseName.text = str;

    [self presentModalViewController:exerciseView animated:YES];
} 
```

# vb.net - 如何在 VB.Net CallByName 中将代码模块指定为“Object Ref”参数？

> ID：10273394
> 
> 赞同：4
> 
> 时间：2012-04-23T00:22:03.013
> 
> 标签：vb.net

我正在尝试根据包含子例程名称的字符串变量从 Windows 窗体调用公共子例程。子例程是代码模块中的一个过程，直接使用过程名称调用时可以正常工作。

VB.net 函数 CallByName 应该可以工作，但我不知道如何将模块名称指定为“Object Ref”参数。

![在此处输入图像描述](../Images/088c30734d86fe7dcb5fdb609ed1cf0b.png)

在显示的代码中，“ReportLibrary”是一个包含公共子的模块，其名称包含在字符串 strReportProcedure 中。这将导致以下错误帮助程序：

![在此处输入图像描述](../Images/a488546efa199d0508060e5487c2a763.png)

帮助说明了 ObjectRef 参数：

> ObjectRef
> 类型：System.Object
> 必需。目的。指向公开属性或方法的对象的指针。

我错过了什么，或者只是无法使用 CallByName 从模块调用例程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T00:36:18.563

[CallByName](http://msdn.microsoft.com/en-us/library/chsc1tx6%28v=vs.80%29.aspx)不适用于 VB.Net 模块中的代码，因为第一个参数需要一个对象。您需要将方法移动到一个类中，然后创建该类的一个实例以使 CallByName 起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-24T18:58:21.323

嗯，我认为问题出在其他地方。我认为您还没有声明这样的变量：

```
Dim RL as NEW Reportlibrary 
```

在声明它之后，使用它：

```
CallByName(RL, strReportProcedure , CallType.Method , blnPreview) 
```

问题可能出在声明中，因为（在您的情况下）您的类不允许您访问库的子例程。这就是您需要声明“作为新报告库”的原因。
祝你好运 ！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-22T18:24:17.743

`Dim object As NEW Reportlibrary`然后就使用那个对象。

# php - 使用 sum 和 join

> ID：10273397
> 
> 赞同：0
> 
> 时间：2012-04-23T00:22:30.343
> 
> 标签：php, mysql

我对网站进行了编程，但无法正确获取此查询。

我有一个包含频道的表

```
select * from `channels` 
```

我还有另一个表，其中包含查看站点中每个页面的统计信息。

为了获得对特定频道的所有访问，我会写

```
SELECT SUM(ip) AS visits FROM `log` where `module` = 'channels' and mid = '15' 
```

其中 15 等于`channels`表中一行的 id。

我需要编写的查询应该使用带有 sum 的连接`select * from channels`并添加一个额外的单元格（值）来获取 Channels 中每个 id 的访问次数。

* * *

从评论到答案：

> 名为 Channels 的表包含列 id 和 name。名为 Log 的表包含列 ip、module、mid。`log.module = 'channel'`; _ `log.mid = channel.id`. 每个频道 id（例如 '15'）都可以通过查询获得其所有访问`SELECT SUM(ip) AS visits FROM log where module = 'channels' and mid = '15'`。

大致：

```
CREATE TABLE Channels (ID INTEGER, Name CHAR(30), PRIMARY KEY ID);
CREATE TABLE Log (IP CHAR(16), Module CHAR(10), MID INTEGER REFERENCES Channels(ID)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T00:37:25.597

既然您提到您不熟悉 SQL 联接，也许您会发现有关该主题的[Wikipedia 文章](http://en.wikipedia.org/wiki/Join_%28SQL%29)或[W3Schools 课程](http://www.w3schools.com/sql/sql_join.asp)信息丰富（这些是我在 Google 搜索“SQL 联接”时的前 2 个结果）。

如果做不到这一点，请按照`SUM()`MySQL[函数参考](http://dev.mysql.com/doc/refman/5.6/en/func-op-summary-ref.html)中的链接将一个人带到[`GROUP BY`(Aggregate) functions](http://dev.mysql.com/doc/refman/5.6/en/group-by-functions.html#function_sum)的页面，这是对答案的强烈暗示。

```
SELECT channels.*, SUM(ip) AS visits
FROM
  channels JOIN log ON (
    log.module = 'channels' AND
    log.mid = channels.id -- or whatever is the appropriate column in `channels`
  )
GROUP BY log.mid; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T00:39:19.147

您需要提供有关表格的更多信息才能获得好的答案。具体来说，您没有明确提供有关 Channels 中的哪些列与 Visits 中的哪些列连接的信息。但是，在字里行间有一些阅读，使用 GROUP BY 的 JOIN 查询应该可以完成这项工作：

```
SELECT c.id, COUNT(*) AS Visits
  FROM Channels AS C
  JOIN Log      AS L ON c.id = l.mid
 WHERE l.module = 'channels'
 GROUP BY c.id; 
```

您也可以将 WHERE 子句移到 ON 条件中，但优化器应该会自动为您执行此操作。

如果要查看所有 Channel 记录，即使是计数为零的记录，也必须使用 LEFT OUTER JOIN（缩写为 LEFT JOIN）和 COUNT(x)，其中`x`Log 表中的相应列是：

```
SELECT c.id, COUNT(l.mid) AS Visits
  FROM Channels AS C
  LEFT JOIN Log AS L ON c.id = l.mid
 WHERE l.module = 'channels'
 GROUP BY c.id; 
```

# sql - sqlce - 我需要改变什么才能使这个查询工作？

> ID：10273398
> 
> 赞同：1
> 
> 时间：2012-04-23T00:22:30.580
> 
> 标签：sql, sql-server-ce

我正在尝试分别选择两列“技能”，即player1和player2。如果我删除“player2”但只返回 player1 技能，则查询有效。

所以我的问题是，我需要在这个查询上做些什么不同的事情才能让它从 player1 和 player2 中选择技能，而不是只选择一个。谢谢。

```
SELECT        skill
FROM            player
WHERE        (id IN
                         (SELECT        player1,player2
                           FROM            temp_table
                           WHERE        (school = 0)))
ORDER BY weight 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T00:33:14.080

您可以改用连接：

```
SELECT        p.skill
FROM          player p
INNER JOIN    temp_table t  ON p.id IN (t.player1, t.player2)
WHERE         t.school = 0
ORDER BY      p.weight 
```

# javascript - 带有可排序的 KnockoutJS 的复杂绑定语句

> ID：10273399
> 
> 赞同：1
> 
> 时间：2012-04-23T00:22:39.030
> 
> 标签：javascript, jquery, jquery-ui, knockout.js, jquery-ui-sortable

将 KnockoutJS 与 jQuery UI Sortable 一起使用时是否不支持复杂的绑定？

这有效：

```
<div class="accordion edit-test" id="edit-questions" 
     data-bind="foreach: currentItem().questions "> 
```

但这不会：

```
<div class="accordion edit-test" id="edit-questions" 
     data-bind="sortable:{ data: currentItem().questions }"> 
```

* * *

这是我目前的解决方法：

```
<!-- ko with: currentItem() -->

<div class="accordion edit-test" id="edit-questions" 
     data-bind="sortable:{ data: questions }"> 
```

# python - 使用 os.getenv 时减少变量名重复

> ID：10273402
> 
> 赞同：3
> 
> 时间：2012-04-23T00:22:58.770
> 
> 标签：python

我经常发现自己以以下样式编写重复感觉的代码（碰巧在 Django 内部`settings.py`，但这个问题的含义更普遍）：

```
STACKEXCHANGE_CLIENT_ID = os.getenv('STACKEXCHANGE_CLIENT_ID')
STACKEXCHANGE_CLIENT_SECRET = os.getenv('STACKEXCHANGE_CLIENT_SECRET')
# et cetera 
```

当然，在很多情况下我不希望我的局部变量名称与环境变量的名称匹配，但这种情况发生得足够多，我想知道是否有避免名称重复的好方法。

下面的代码对我有用：

```
_locals = locals()
def f(x):
    _locals[x] = os.getenv(x)

f('TERM')

print TERM 
```

但我无意在生产中使用它，因为引用[Python 文档`locals()`](http://docs.python.org/library/functions.html#locals)：

> **注意：**不得修改本词典的内容；

所以我想知道是否存在有效的“支持”/“批准”解决方案，如果有，它会是什么样子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T00:37:15.747

参考：[如何以编程方式设置全局（模块）变量？](https://stackoverflow.com/questions/1429814/how-to-programmatically-set-a-global-module-variable)

```
import sys, os

opts = (
    'STACKEXCHANGE_CLIENT_ID', 
    'STACKEXCHANGE_CLIENT_SECRET'
)

module = sys.modules[__name__]
for o in opts:
    setattr(module, o, os.getenv(o)) 
```

在该引用答案的评论中，它链接到另一个建议`globals()`直接更新也是可靠的......

```
_g = globals()
for o in opts:
    _g[o] = os.getenv(o) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T00:44:06.000

我想，这部分是口味问题，但我倾向于把这些放在字典里，所以：

```
STACKEXCHANGE_CLIENT_ID = os.getenv('STACKEXCHANGE_CLIENT_ID')
STACKEXCHANGE_CLIENT_SECRET = os.getenv('STACKEXCHANGE_CLIENT_SECRET') 
```

会成为：

```
envars['STACKEXCHANGE_CLIENT_ID'] = os.getenv('STACKEXCHANGE_CLIENT_ID')
envars['STACKEXCHANGE_CLIENT_SECRET'] = os.getenv('STACKEXCHANGE_CLIENT_SECRET') 
```

或者，您可以直接使用`os.environ`字典。

# asp.net-mvc-3 - 使用删除链接删除对象时如何包含 @Html.AntiForgeryToken()

> ID：10273404
> 
> 赞同：14
> 
> 时间：2012-04-23T00:23:08.593
> 
> 标签：asp.net-mvc-3, antiforgerytoken

我有以下`ajax.actionlink`要求`Delete action method`删除对象：-

```
 @if (!item.IsAlreadyAssigned(item.LabTestID))
        { 
        string i = "Are You sure You want to delete (" + @item.Description.ToString() + ") ?";
           @Ajax.ActionLink("Delete",
       "Delete", "LabTest",
      new { id = item.LabTestID },

new AjaxOptions
{ Confirm = i,
    HttpMethod = "Post",
    OnSuccess = "deletionconfirmation",
    OnFailure = "deletionerror"
})
} 
```

**但是有没有办法包含`@Html.AntiForgeryToken()`在`Ajax.actionlink`删除调用中以确保没有攻击者可以发送错误的删除请求？**

BR

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-23T07:32:16.490

您需要使用`Html.AntiForgeryToken`设置 cookie 并发出具有相同值的隐藏字段的助手。发送 AJAX 请求时，您还需要将此值添加到 POST 数据中。

所以我会使用普通链接而不是 Ajax 链接：

```
@Html.ActionLink(
    "Delete", 
    "Delete", 
    "LabTest", 
    new { 
        id = item.LabTestID
    }, 
    new { 
        @class = "delete",
        data_confirm = "Are You sure You want to delete (" + item.Description.ToString() + ") ?"
    }
) 
```

然后将隐藏字段放在 DOM 中的某个位置（例如在结束 body 标记之前）：

```
@Html.AntiForgeryToken() 
```

最后以不显眼的 AJAXify 删除锚点：

```
$(function () {
    $('.delete').click(function () {
        if (!confirm($(this).data('confirm'))) {
            return false;
        }

        var token = $(':input:hidden[name*="RequestVerificationToken"]');
        var data = { };
        data[token.attr('name')] = token.val();
        $.ajax({
            url: this.href,
            type: 'POST',
            data: data,
            success: function (result) {

            },
            error: function () {

            }
        });

        return false;
    });
}); 
```

现在您可以使用以下属性来装饰您的`Delete`操作：`ValidateAntiForgeryToken`

```
[HttpPost]
[ValidateAntiForgeryToken]
public ActionResult Delete(int id)
{
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-11T05:19:03.893

修改[布朗克斯](https://stackoverflow.com/questions/4074199/jquery-ajax-calls-and-the-html-antiforgerytoken/12116344#12116344)的答案：

```
$.ajaxPrefilter(function (options, localOptions, jqXHR) {
    var token, tokenQuery;
    if (options.type.toLowerCase() !== 'get') {
        token = GetAntiForgeryToken();
        if (options.data.indexOf(token.name)===-1) {
            tokenQuery = token.name + '=' + token.value;
            options.data = options.data ? (options.data + '&' + tokenQuery) 
                : tokenQuery;
        }
    }
}); 
```

结合乔恩怀特的这个[答案](http://jonwhite.me/2012/09/16/how-to-use-antiforgery-tokens-with-ajax-in-asp-net-mvc/)

```
function GetAntiForgeryToken() {
  var tokenField = $("input[type='hidden'][name$='RequestVerificationToken']");
  if (tokenField.length == 0) { return null; 
  } else {
  return {
     name: tokenField[0].name,
     value: tokenField[0].value
  };
} 
```

编辑对不起 - 意识到我在这里重新发明轮子所以[asp-net-mvc-antiforgerytoken-over-ajax/16495855#16495855](https://stackoverflow.com/questions/1346070/asp-net-mvc-antiforgerytoken-over-ajax/16495855#16495855)

# css - 另一个 Div 中的 Google Maps API v3

> ID：10273411
> 
> 赞同：2
> 
> 时间：2012-04-23T00:24:12.480
> 
> 标签：css, google-maps, html

这是一个下拉 Div - 它适用于除 GoogleMap 之外的所有内容。

我得到了一半的地图，或者可能是它的 1/4……当我摆脱 div 时，一切正常……或者是否有没有 div 的解决方法？想法...我尝试声明表，p等...没有运气...

Javascript 下拉代码和 Div 调用

```
 <script type="text/javascript">
   function showElement(layer){
   var myLayer = document.getElementById(layer);
   if(myLayer.style.display=="none"){
   myLayer.style.display="block";
   myLayer.backgroundPosition="top";
   } else { 
   myLayer.style.display="none";
   }
   }
   </script>

  <div class=catlist>
  <table border=0 cellpadding=4>
  <tr>
  <td valign=middle><img src="images/plus.png" onclick="javascript:showElement('ed')"></td>
  <td valign=middle><a href="#" onclick="javascript:showElement('ed')"><b>Edit GPS 
  Map</b></a></td>
  </tr></table>
  </div>
  <div class="qlist" id="ed" style="display:none;">

  <div id="map" style="width: 500px; height: 250px;"></div>

  </div> 
```

* * *

## 添加 Google Javascript...

这是实际的 Google Maps Javascript...Cold Fusion 绘制 # 标记...这在 div 之外工作正常...上面建议的代码可以显示正确的地图界面...但是绘图的居中不起作用...并且标记显示在左上角并提供上述代码...

```
 <div id="map" style="width: 500px; height: 250px;"></div>
  <script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript">
  </script> 

  <script type="text/javascript"> 

  var locations = [ 
["#bsname#", #gpslat#, #gpslong#, #busid#], 
  ]; 

  var map = new google.maps.Map(document.getElementById('map'), { 
  zoom: 15, 
  center: new google.maps.LatLng(#gpslat#, #gpslong#), 
  mapTypeId: google.maps.MapTypeId.ROADMAP
  }); 

  var infowindow = new google.maps.InfoWindow(); 

  var marker, i; 

  for (i = 0; i < locations.length; i++) {   
  marker = new google.maps.Marker({ 
    position: new google.maps.LatLng(locations[i][1], locations[i][2]), 
    map: map 
  }); 

  google.maps.event.addListener(marker, 'click', (function(marker, i) { 
    return function() { 
      infowindow.setContent(locations[i][0]); 
      infowindow.open(map, marker); 
    } 
  })(marker, i)); 
  } 

</script> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-25T20:59:25.420

我所做的更改是：

*   展开 div 时触发调整大小
*   调整大小后使地图居中
*   使地图和位置变量成为全局变量。

jsfiddle在这里：

[http://jsfiddle.net/Mgp9z/9](http://jsfiddle.net/Mgp9z/9)

```
<!DOCTYPE html>
<html>
  <head>
    <style type="text/css">
      html, body, #map_canvas { margin: 0; padding: 0; height: 100% }
    </style>
    <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script type="text/javascript">
var map;
      var mapOptions = { center: new google.maps.LatLng(0.0, 0.0), zoom: 2,
        mapTypeId: google.maps.MapTypeId.ROADMAP };

// CHANGED locations and map now global so they refer to the same thing in both initialize and showElement

var locations = [ 
["a", 40.2, -88.8, "k"], 
  ]; 

var map;

function initialize() {
   map = new google.maps.Map(document.getElementById('map'), { 
  // CHANGED
      zoom: 10, 
  center: new google.maps.LatLng(40.2, -88.8), 
  mapTypeId: google.maps.MapTypeId.ROADMAP
  }); 

  var infowindow = new google.maps.InfoWindow(); 

  var marker, i; 

  for (i = 0; i < locations.length; i++) {   
  marker = new google.maps.Marker({ 
    position: new google.maps.LatLng(locations[i][1], locations[i][2]), 
    map: map 
  }); 

  google.maps.event.addListener(marker, 'click', (function(marker, i) { 
    return function() { 
      infowindow.setContent(locations[i][0]); 
      infowindow.open(map, marker); 
    } 
  })(marker, i)); 
  } 

      }
function showElement(layer){
   var myLayer = document.getElementById(layer);
   if(myLayer.style.display=="none"){
   myLayer.style.display="block";
   myLayer.backgroundPosition="top";

   // *** add the trigger here ***
   google.maps.event.trigger(map, 'resize');
   var mylat=locations[0][1];
   var mylng=locations[0][2];
   map.setCenter(new google.maps.LatLng(mylat,mylng));

   } else { 
   myLayer.style.display="none";
   }
}

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
  </head>
  <body>
<div class=catlist>
  <table border=0 cellpadding=4>
  <tr>
Lat:   <input type="text" id="mylat" value="40.2">
Lng:   <input type="text" id="mylng" value="-88.8">
      <!-- <td valign=middle><img src="images/plus.png" onclick="javascript:showElement('ed')"></td> -->
  <td valign=middle><a href="#" onclick="javascript:showElement('ed')"><b>Edit GPS 
  Map</b></a></td>
  </tr></table>
  </div>
  <div class="qlist" id="ed" style="display:none;">

  <div id="map" style="width: 500px; height: 250px;"></div>

  </div>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T01:01:16.097

在显示 div 后调整地图大小应该可以：

来自[文档](https://developers.google.com/maps/documentation/javascript/reference)：“当 div 更改大小时，开发人员应在地图上触发此事件：”`google.maps.event.trigger(map, 'resize') .`

**编辑**- 我会更具体，请再试一次

```
function showElement(layer){
   var myLayer = document.getElementById(layer);
   if(myLayer.style.display=="none"){
   myLayer.style.display="block";
   myLayer.backgroundPosition="top";

   // *** add the trigger here ***
   google.maps.event.trigger(map, 'resize')

   } else { 
   myLayer.style.display="none";
   }
} 
```

**演示：http:** [//jsfiddle.net/Mgp9z/](http://jsfiddle.net/Mgp9z/)

# c - C中的密码（盐/哈希）库？

> ID：10273414
> 
> 赞同：5
> 
> 时间：2012-04-23T00:24:48.643
> 
> 标签：c, hash, passwords

有谁知道在 C 中加盐和散列密码的库或框架？我将如何在程序中执行此操作？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T00:27:48.780

我肯定会选择[OpenSSL](http://OpenSSL.org)。请，当涉及到加密时，不要尝试自己动手，或者只是找到某人在 Internet 上发布的内容。使用诸如 OpenSSL 之类的东西，它每天都得到数百万人的验证和信任。在我看来，自制和不当实施的加密是互联网安全漏洞的主要原因。

正如 Tibor 所提到的，通常在散列之前将盐附加到密码中。独特的盐大大降低了基于彩虹表的攻击的能力。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-08T20:33:40.060

我会建议使用 Openssl API

1.）如果您想使用密码生成密钥，请`PKCS5_PBKDF2_HMAC_SHA1()`使用

```
# include <openssl/evp.h>
int PKCS5_PBKDF2_HMAC_SHA1(const char *pass, int passlen,
                       unsigned char *salt, int saltlen, int iter,
                       int keylen, unsigned char *out); 
```

或者

```
int EVP_BytesToKey(const EVP_CIPHER *type,const EVP_MD *md,
                          const unsigned char *salt,
                          const unsigned char *data, int datal, int count,
                          unsigned char *key,unsigned char *iv); 
```

2.）散列密码使用sha256而不是sha1（原因更安全，并且已经在sha1安全上进行了尝试）

```
 # include <openssl/sha.h>
 SHA256_CTX context;
 unsigned char md[SHA256_DIGEST_LENGTH];

 SHA256_Init(&context);
 SHA256_Update(&context, (unsigned char*)input, length);
 SHA256_Final(md, &context); 
```

所以在这个 md 之后将包含密码哈希

3.) SALT：salt 只不过是一些随机字节，但重点是采用加密安全随机字节。为此，您可以使用：

```
# include <openssl/rand.h>

unsigned char salt[32];    //32 is just an example  
int RAND_bytes(salt,32); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T00:28:49.870

C 中有许多散列函数实现，我建议在 C 中搜索 SHA1 算法。如果这是唯一的加密功能，您可以复制一些片段，否则您可以使用更高级的库，例如 OpenSSL 或 GNU Crypto。

另一方面，加盐通常只需将盐附加到密码即（在伪代码中）即可完成`pwhash=hash(password+salt)`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-23T00:36:32.623

最流行的具有散列函数的 C 加密库是[OpenSSL](http://www.openssl.org/)、[Botan](http://botan.randombit.net/)，如果您使用的是 C++ ，还有[Crypto++](http://www.cryptopp.com/)。此外，根据您的目标平台和您要使用的散列函数，您可以在 Windows 上使用 Win32 加密函数以及用于不同平台的其他本机库。

# java - 如何在 Eclipse 中使用代码存储库？

> ID：10273415
> 
> 赞同：1
> 
> 时间：2012-04-23T00:24:53.603
> 
> 标签：java, svn, version-control, mercurial, repository

如何在 Eclipse 中使用代码存储库？我应该使用 SVN 还是 Mercurial？在 Mac 上使用 Eclipse 最简单的方法是什么。我尝试使用 Google 代码（使用 SVN 和 Mercurial），但我需要获得 JavaHL 才能使其工作。有没有更简单的方法？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T02:09:40.750

> 如何在 Eclipse 中使用代码存储库？

它依赖于版本控制技术，但 Eclipse 通过“团队”用户界面支持多种技术。

> 我应该使用 SVN 还是 Mercurial？

你的选择。还支持其他版本控制技术；例如 Git 和 CVS。在 Eclipse 市场中搜索。

您确实需要对此进行自己的研究，并找出哪一个最符合您和您的项目的要求。（所以不是调查或推荐网站，所以不要指望人们给你推荐......）

> 在 Mac 上使用 Eclipse 最简单的方法是什么。

呃...见上文。

> 我尝试使用 Google 代码（使用 SVN 和 Mercurial），但我需要获得 JavaHL 才能使其工作。有没有更简单的方法？

不幸的是，Eclipse 的 SVN 插件需要本地 JavaHL 驱动程序的实现：

*   对于 Windows，当您从更新服务安装时，驱动程序已包含在内。

*   对于其他平台，它们不是。您可以从 Collabnet 免费下载它们（在注册歌舞之后）。安装和设置非常重要，但该过程有据可查，如果您按照文档完成所有步骤，它就可以工作。这是，IMO，一种“糟糕的用户体验”，但似乎没有人关心它来修复它。（伙计们......你正在寻找的词是“妥协”。）

只有 SVN 插件需要 JavaHL 库。其他版本控制技术不需要这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T00:27:23.277

我使用 subclipse 已经有一段时间了，我认为它对于小型项目来说已经足够了。

如果您使用 git 作为存储库，则可以尝试 EGit。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T05:17:25.263

如果您搜索“Eclipse 版本控制”，您会得到很多建议。

*   SVN（需要安装JavaHL库）
*   EGit（如果你使用 Git，推荐使用）
*   SourceAnywhere Standalone（由我工作的公司提供）
*   水银 (MercurialEclipse)

您可以测试上述工具，看看哪些最能满足您的要求。

# mapkit - CLLocation geocodeAddressString 结果准确性

> ID：10273417
> 
> 赞同：1
> 
> 时间：2012-04-23T00:25:36.273
> 
> 标签：mapkit, latitude-longitude, cllocation, geocode

我目前正在开发一个用户输入和地址的应用程序，然后将其转换为坐标。然后查询位置数据库，并返回搜索位置在 5 公里以内的位置。

我遇到的问题是 geocodeAddressString 函数返回的准确性。搜索时：奥克兰，新西兰，我返回**-36.90000, 174.70000**，与正确结果相差约 10 公里。这是几个郊区。

有什么办法可以改善这一点吗？谷歌地图的结果是-36.848479, 174.763373，你可以看到它更清晰，也是我所追求的。

谢谢！

# asp.net-mvc - ASP.NET MVC 在视图页面中显示从控制器返回的数据？

> ID：10273418
> 
> 赞同：0
> 
> 时间：2012-04-23T00:25:51.577
> 
> 标签：asp.net-mvc, asp.net-ajax

我想在 onComplete 函数中显示从控制器返回的数据：

```
function onComplete() {
    alert(); //I want to show data that returned from controller in this.
} 
```

这是ajax链接：

```
@Ajax.ActionLink("Upvote", "Upvote", "Author",
new AjaxOptions
{
    InsertionMode = InsertionMode.Replace,
    UpdateTargetId = "vote_count",
    OnComplete = "onComplete",
}) 
```

我的控制器：

```
public ActionResult Upvote(Guid QuestionID)
{
     return Content("Message");
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T10:04:07.967

```
function onComplete(result) {
    alert(result.responseText);
} 
```

或者，如果您使用`OnSuccess`回调：

```
@Ajax.ActionLink("Upvote", "Upvote", "Author",
new AjaxOptions
{
    InsertionMode = InsertionMode.Replace,
    UpdateTargetId = "vote_count",
    OnSuccess = "onSuccess",
}) 
```

你可以：

```
function onSuccess(result) {
    alert(result);
} 
```

例如，如果您的控制器操作返回 JSON 结果：

```
return Json(new { foo = "bar" }, JsonRequestBehavior.AllowGet); 
```

在您的成功回调中，您已经获得了一个 javascript 解析对象：

```
function onSuccess(result) {
    alert(result.foo);
} 
```

请注意，回调的情况并非如此`OnComplete`，您始终将 XHR 对象作为参数，由您来进行解析等。还要注意 OnComlpete 回调总是被执行，即使 AJAX 调用失败，显然 OnSuccess 回调不是这种情况。

# ruby - ruby net/http 的困难

> ID：10273419
> 
> 赞同：1
> 
> 时间：2012-04-23T00:25:52.917
> 
> 标签：ruby, perl, net-http

我有一些我正在尝试移植到 ruby​​ 的 perl 代码。perl 代码可以做我想做的事，但是我很难从 ruby​​ 代码中得到类似的结果，这更令人沮丧，因为我所做的并不是非常复杂。

首先，perl代码：

```
use LWP::UserAgent;
use HTTP::Cookies;

my $cookie_jar  = HTTP::Cookies->new(file => "/home/blah/lwpcookies.txt", autosave => 0);
my $ua      = LWP::UserAgent->new('cookie_jar' => $cookie_jar);

my $p = {
    'param1'    => 'p1val',
    'param2'    => 'p2val',
    'param3'    => 'p3val',
    'param4'    => 'p4val',
    'param5'    => 'p5val',
    'param6'    => 'p6val',
     };

my $res = $ua->post('https://sitename.somesite.com/login_page.php', $p); #login
my $url = "https://sitename.sometime.com/report.php?startdate=2012-1-1&enddate=2012-1-2";
$res = $ua->get($url); 
```

然后我可以访问 $res->content 并从中获取我想要的内容。

我在 ruby​​ 中使用 net/http 进行了同样的尝试，但我无法获得相同的结果。我在弄清楚哪些部分甚至无法正常工作时也遇到了一些麻烦。

这是红宝石代码：

```
require 'net/http'
params  = Hash.new
params['param1']    = 'p1val'
params['param2']    = 'p2val'
params['param3']    = 'p3val'
params['param4']    = 'p4val'
params['param5']    = 'p5val'
params['param6']    = 'p6val'

uri = URI.parse('https://sitename.somesite.com/login_page.php')
http = Net::HTTP.new(uri.host, uri.port)

http.use_ssl = true
http.verify_mode = OpenSSL::SSL::VERIFY_NONE

request = Net::HTTP::Post.new(uri.request_uri)
request.set_form_data(params)
res = http.request(request)
cookies = res.response['set-cookie']

# for what it's worth, I'm pretty sure the problem has already occurred by this point
uri = URI.parse("https://sitename.somesite.com/report.php?startdate=2012-1-1&enddate=2012-1-2")
http = Net::HTTP.new(uri.host, uri.port)
http.use_ssl = true
http.verify_mode = OpenSSL::SSL::VERIFY_NONE

request = Net::HTTP::Get.new(uri.request_uri)
request['Cookie'] = cookies

res = http.request(request) 
```

想法？建议？告诉我为什么我是个白痴？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T00:58:14.880

试试[Mechanize](http://mechanize.rubyforge.org)，它会为你做 cookie 和重定向：

```
require 'mechanize'
agent = Mechanize.new
agent.post url1, params 
```

cookie 已设置

```
response = agent.get url2 
```

# optimization - 通过混合组合逻辑和行为逻辑来优化连续分配？

> ID：10273420
> 
> 赞同：0
> 
> 时间：2012-04-23T00:26:20.673
> 
> 标签：optimization, verilog, led, digital-logic, clockrates

我试图将我的头脑围绕在组合逻辑和行为逻辑的混合中。我有带有 4 个 LED 和 66 MHz 时钟输入的小型 FPGA。这个想法是让其中两个发光（一个上升，一个下降），另外两个闪烁。所以我想出了以下代码：

```
module ledflash(input wire CLK,
        input wire USER_RESET,
        output wire LED[3:0]);

   reg [26:0]           cnt;
   reg [4:0]            pwm;

   wire             led_enable = ~USER_RESET;

   always @(posedge CLK)
     begin
    if (led_enable)
      begin
         cnt <= cnt + 1;
         pwm <= pwm[3:0] + (cnt[26] ? cnt[25:22] : ~cnt[25:22]);
      end
    else
      begin
         cnt <= 0;
         pwm <= 0;
      end
   end

   assign LED[0] = led_enable ? (cnt[26] ? pwm[4] : ~pwm[4]) : 0;
   assign LED[1] = led_enable ? (cnt[26] ? ~pwm[4] : pwm[4]) : 0;

   assign LED[2] = led_enable ? cnt[25] : 0;
   assign LED[3] = led_enable ? ~cnt[25] : 0;

endmodule 
```

我不想使用供应商特定的 DCM，因此具有 66MHz 时钟的简单位加法器可以发挥作用。也许整个设计首先是错误的（例如，我可以使用两个时钟分频器并简单地翻转两个寄存器来实现（几乎）相同的事情），但我遇到了这种让我想知道的情况。 ..

从普通软件开发人员的角度来看，连续分配中的某些部分似乎是多余的。例如，可以使用一个额外的寄存器，因此看起来执行的工作更少。例如：

```
module ledglow(input wire CLK,
        input wire USER_RESET,
        output wire LED[3:0]);

   reg [26:0]           cnt;
   reg [4:0]            pwm;
   reg              led_pair1;
   reg              led_pair2;

   wire             led_enable = ~USER_RESET;

   always @(posedge CLK)
     begin
    if (led_enable)
      begin
         cnt <= cnt + 1;
         pwm <= pwm[3:0] + (cnt[26] ? cnt[25:22] : ~cnt[25:22]);
      end
    else
      begin
         cnt <= 0;
         pwm <= 0;
      end
    led_pair1 <= cnt[26] ? pwm[4] : ~pwm[4];
    led_pair2 <= cnt[25];
     end

   assign LED[0] = led_enable ? led_pair1 : 0;
   assign LED[1] = led_enable ? ~led_pair1 : 0;

   assign LED[2] = led_enable ? led_pair2 : 0;
   assign LED[3] = led_enable ? ~led_pair2: 0;

endmodule 
```

我试图深入研究上述两种方法的合成器报告差异并查看 HDL 原理图，但对于像我这样没有经验的人来说，它太复杂了。

毫无疑问，综合工具很好地优化了组合逻辑，但假设右手边的表达式非常复杂，成为单行等，有没有办法说这样的话？

```
 if (some_reg_var) begin
       assign net0 = 1;
       assign net1 = 0;
    end
   else
    begin
       assign net0 = 0;
       assign net1 = 1;
    end 
```

或者这样做是否有意义？如果不是，在这种情况下引入寄存器以简化行为部分是否有意义？我相信至少有一些规则或经验。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T01:28:12.430

你的问题有点冗长，但我想我理解你的意思（如果我错了，请纠正我）。

您想知道是否有一种方法可以分解长分配语句以使用 if/else 逻辑，类似于 always 块中的 regs？

以这种方式，Verilog 对我来说总是有点好笑，但仅仅因为你声明了一个 'reg' 数据类型**并不意味着它会被合成到一个 register**。如果有一些状态要存储，它实际上只会创建一个寄存器。话虽如此，以下两个语句应该合成完全相同的东西：

情况1：

```
wire a;
wire b;
assign a = b ? 0 : 1; 
```

案例二：

```
reg a;
wire b;

always @(b)
   if(b)
       a <= 0;
   else
       a <= 1; 
```

这两个都应该创建完全相同的逻辑（简单地说，a = !b 的反相器）。即使在您声明了一个 reg 的第二种情况下，它实际上也没有实例化一个寄存器，因为没有什么要记住的（所有输入都在敏感度列表中）。

因此，您可以自由编写复杂的 if/else 逻辑来简化代码，这并不意味着您要为合成额外的寄存器付出代价。因此，请随意编写最适合您的方式。（如果您确实使用了 always 块，请确保对所有可能的情况进行分配，否则您将推断出您可能不想要的锁存器）。

# java - 如何将 6 个整数数组与 2d 整数数组 [19][5] 进行比较？

> ID：10273421
> 
> 赞同：3
> 
> 时间：2012-04-23T00:26:22.290
> 
> 标签：java, arrays, multidimensional-array

我正在为学校做一个项目，但无法弄清楚。顺便说一句，我是一个非常初级的初学者。

我有一个二维数组，称为`tickets[19][6]`20 张票，每张票有 6 个整数。我正在尝试将这 20 张票与具有 6 个数字的常规整数数组进行比较`winner[5]`我从 .txt 文件中读取的。

两个数组的说明如下：

```
public static int[] winner = new int[5]
public static int[][] tickets = new int[19][5] 
```

请记住，我对此很陌生，我提前感谢任何帮助！

*编辑*这是我用来将用户输入分配给我的二维数组的循环，当我经历整个事情时才意识到这是一个无限循环。我认为编写代码会更多......好吧，写作！到目前为止，似乎更像是调试的艺术。

```
static void ticketNumberArray(){

    int number = 1;        // which of the six numbers you need from the ticket
    int ticketCount = 1;   // which ticket (out of 20) you are currently on

    while(ticketCount<21){ // sentinel controlled while loop,
                           // will continue until the twentieth ticket is entered
        System.out.println("Please type number " +number+ " of ticket number " +ticketCount+ ".");
                           //asks for the numbers of the ticket your currently on

        Scanner keyboard = new Scanner(System.in); // initiates a scanner variable

        int ticketNumber = keyboard.nextInt();     // assigns user input to the double variable ticketNumber
                                                   // and initializes as a double

        tickets[ticketCount-1][number-1]=ticketNumber;  // assigns user input into a 2-d array

        number++;           //Sentinel variable

        if(number==7){      //loop that controls the ticket count, every 6 numbers ='s one ticket
            ticketCount++;
            number=1;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T00:38:13.257

首先，`[ ]`声明数组时输入的数字是数组的大小。因此，要创建一个包含六个项目的数组，您需要将`[6]`. 索引将编号为 0--> 5。

您只需要遍历数组中的票“行” `tickets`，并将其与获胜者数组进行比较。每一行都是一张单独的票。2D 数组中的“列”将是组成票证的单个数字。

`Arrays.equal`如果票证中各个号码的顺序很重要，您可以使用 Louis 的建议。`0-1-2-3`（即，如果中奖者是，您只能用彩票中奖`0-1-2-3`- 大多数彩票允许您赢得任何组合。）

```
for(int i=0; i < tickets.length; i++)
{
   int[] ticket = tickets[i];

   if(Arrays.equals(ticket, winner))
   {
      // This one is the winner

      // For efficiency you should probably stop looping
      break;
   }
} 
```

* * *

编辑：

当学生使用 API 时，很多入门教授不喜欢它。因此，您必须编写自己的 equals 函数。

```
private static boolean areEqual(int[] a, int[] b)
{ 
   if(a == null && b == null)
       return true;

   // Not equal if one is null and the other is not     
   if(a == null || b == null)
       return false;

   if(a.length != b.length)
       return false;

   // When we get here we have to check each element, one by one
   // Implementation left as exercise :-)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T00:30:52.963

票有 5 个整数还是 6 个整数？你的问题自相矛盾。

无论如何，如果您只想检查票证中的整数是否匹配——如果它们以完全相同的顺序具有完全相同的值——最简单的解决方案就是使用[`Arrays.equals(int[], int[])`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#equals%28int%5B%5D,%20int%5B%5D%29).

# c# - 如何获取使用 javascript 加载的标签值

> ID：10273423
> 
> 赞同：2
> 
> 时间：2012-04-23T00:26:50.203
> 
> 标签：c#, javascript, asp.net, geturl

我有一个这样的链接。它来自instagram api。

```
http://localhost:60785/access_token.aspx/#access_token=43667613.4a1ee8c.791949d8f78b472d8136fcdaa706875b 
```

如何从代码隐藏中获取此链接？我可以用 js 来获取它，但在分配给标签后我无法获取它。我是说：

```
<script>
    function getURL(){
        document.getElementById('lblAccessToken').innerText = location.href;
    }
</script> 
```

这个js函数在body onload事件中。如何从代码隐藏中获取此 innerText 值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T00:44:04.450

如果您使用的是 ASP.NET 4.0 和 jQuery，它相当容易。否则，您可能必须处理损坏的 id 并且必须自己处理 DOMReady。尝试这个

标记

```
<asp:Label ID="lblAccessToken" runat="server" ClientIDMode="Static"></asp:Label> 
```

JavaScript

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
    $(document).ready(function(){
        var myToken = GetHashParameterByName("access_token");
        $("#lblAccessToken").html( myToken );
    });

    function GetHashParameterByName(name) {    
        var match = RegExp('[#&]' + name + '=([^&]*)')
                .exec(window.location.hash);
        return match && decodeURIComponent(match[1].replace(/\+/g, ' '));    
    }
</script> 
```

* * *

你想要右边的值`Page_Load`吗？我自己还没有想出一种方法来获取哈希值。`Page_Load`我通常会做这些事情之一

1.  将哈希值传递给 jQuery ajax 方法并将其存储在那里。
2.  获取哈希值并在将其转换为查询字符串后重定向到同一页面

JavaScript

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script>
    $(document).ready(function(){
        var myToken = GetHashParameterByName("access_token") || "";
        if(my_token !=== ""){
            window.location = window.location.split("/#")[0] + "?access_token=" + myToken;
        }
    });

    function GetHashParameterByName(name) {    
        var match = RegExp('[#&]' + name + '=([^&]*)')
                .exec(window.location.hash);
        return match && decodeURIComponent(match[1].replace(/\+/g, ' '));    
    }
</script> 
```

现在在 Page_Load，抓住它

```
string token = Request.QueryString["access_token"]; 
```

请注意，它需要多往返一次服务器，因此效率不高。但这就是我所做的。

# iphone - 路由音频输入以从 iPhone 上的 TOP 麦克风接收

> ID：10273424
> 
> 赞同：2
> 
> 时间：2012-04-23T00:26:52.000
> 
> 标签：iphone, ios, xcode4, avfoundation

我正在编写一个小应用程序来录制多个曲目并相互播放。我正在使用 PlaybackAndRecord 模式，并将我的输出路由到主扬声器。问题是底部麦克风仍然用于输入，所以现在我在录制时从其他轨道的输出在新轨道上非常响亮。这是我到目前为止所拥有的：

```
audioSession = [AVAudioSession sharedInstance];
[audioSession setCategory:AVAudioSessionCategoryPlayAndRecord error:nil];    
OSStatus propertySetError = 0;
UInt32 allowMixing = true;
propertySetError = AudioSessionSetProperty(kAudioSessionProperty_OverrideCategoryMixWithOthers, sizeof(allowMixing), &allowMixing);

UInt32 audioRouteOverride = kAudioSessionOverrideAudioRoute_Speaker;
AudioSessionSetProperty (kAudioSessionProperty_OverrideAudioRoute,sizeof (audioRouteOverride),&audioRouteOverride);

[audioSession setActive:YES error:nil]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-10-19T06:46:10.837

使用 AVAudioSession 获取可用的输入。在我的 iPhone 5 上，它看起来像这样。

```
NSLog(@"%@", [AVAudioSession sharedInstance].availableInputs);

  "<AVAudioSessionPortDescription: 0x14554400, type = MicrophoneBuiltIn; name = iPhone Microphone; UID = Built-In Microphone; selectedDataSource = Back>" 
```

然后使用这些输入之一来获取可用的数据源，就像这样。

```
NSLog(@"%@", [AVAudioSession sharedInstance].availableInputs[0].dataSources);

  "<AVAudioSessionDataSourceDescription: 0x145afb00, ID = 1835216945; name = Bottom>",
  "<AVAudioSessionDataSourceDescription: 0x145b1870, ID = 1835216946; name = Front>",
  "<AVAudioSessionDataSourceDescription: 0x145b3650, ID = 1835216947; name = Back>" 
```

我们可以看到，这款 iPhone 上实际上有三个麦克风：顶部正面、顶部背面和底部。现在您可以设置您的首选数据源。

```
AVAudioSessionPortDescription *port = [AVAudioSession sharedInstance].availableInputs[0];
for (AVAudioSessionDataSourceDescription *source in port.dataSources) {
    if ([source.dataSourceName isEqualToString:@"Back"]) {
        [port setPreferredDataSource:source error:nil];
    }
} 
```

# c++ - 在 C++ 中遍历可能包含 0xff 的十六进制输入

> ID：10273427
> 
> 赞同：2
> 
> 时间：2012-04-23T00:27:16.783
> 
> 标签：c++, hex, eof, getchar

我在我的代码中遍历来自标准输入的十六进制输入，我注意到当达到 0xff 字节时我无法绕过我的代码停止。我知道发生这种情况是因为循环是：

```
while( (c=getchar()) != EOF) 
```

但是，我不能忽略这一点，因为否则 getchar 在真正的文件结束之后被调用并且它会出现段错误。如何正确遍历完整输入？

（对不起，我知道这个看似常见的任务应该有一个简单的答案，但我尝试搜索了一段时间，一无所获）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T00:40:29.550

您已声明`c`为 char，但[`getchar()`](http://linux.die.net/man/3/getchar)返回`int`. C 的正确循环结构是这样的：

```
int c;
while ( (c = getchar()) != EOF ) {
  // use c here.
} 
```

# c# - Process.StartInfo with '*' character - 查找Linux发行版

> ID：10273435
> 
> 赞同：1
> 
> 时间：2012-04-23T00:28:07.117
> 
> 标签：c#, gtk#

我的 linux 命令中的星号有一点问题 - 我需要找出发行版。当我替换这个字符女巫时，例如'fedora'，那么这个命令给出了很好的结果。在这种情况下，它会这样写： /bin/cat: /etc/*-release: 目录或文件不存在。

我的代码是：

```
 Process p = new Process();
    p.StartInfo.UseShellExecute = false;
    p.StartInfo.RedirectStandardOutput = true;
    p.StartInfo.FileName = "cat";
    p.StartInfo.Arguments = "/etc/*-release";
    p.Start();
    string output = p.StandardOutput.ReadToEnd();
    p.WaitForExit(); 
```

提前感谢您的回答。马泰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T00:34:41.933

当您`cat /etc/*-release`从 shell 运行时，*shell*负责将 扩展`*`为匹配文件的列表（如果有）。

当您自己直接执行程序时（就像您在此处使用`Process`接口所做的那样），您需要自己重新创建 shell 的行为。这实际上是最好的，因为`cat`从功能齐全的编程语言中读取文件有点愚蠢——当然，该语言为以下逻辑等价物提供了一些简单的东西：

```
list = glob(/etc/*-release)
foreach file in (list):
    fd = open(file, "read");
    contents = read(fd)
    close(fd)
    dosomething_with(contents) 
```

您可以使用任何您喜欢的机制来替换`glob()`那里的位；[一个堆垛机同事在另一个答案](https://stackoverflow.com/a/3562062/377270)[中提供了他自己的`glob()`](https://stackoverflow.com/a/3562062/377270)机制。

# linux - wget - HTML 重定向问题

> ID：10273436
> 
> 赞同：1
> 
> 时间：2012-04-23T00:28:07.583
> 
> 标签：linux, wget

我无法让 wget 在以下链接上工作。（似乎是 HTML 重定向）

[http://www.limesurvey.org/en/stable-release/finish/25-latest-stable-release/407-limesurvey192plus-build120418targz](http://www.limesurvey.org/en/stable-release/finish/25-latest-stable-release/407-limesurvey192plus-build120418targz)

在这里找到_ [http://www.limesurvey.org/en/stable-release](http://www.limesurvey.org/en/stable-release)

我搜索并尝试了不同的选项，但没有成功。将提供帮助。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T00:38:37.283

查看从该链接获得的 HTML：

```
<script>document.location.href='http://download.limesurvey.org/Latest_stable_release/limesurvey192plus-build120418.tar.gz';</script> 
```

wget 不能执行 JS，所以你必须复制链接并 wget ：

```
wget http://download.limesurvey.org/Latest_stable_release/limesurvey192plus-build120418.tar.gz 
```

# android - 通过蓝牙发送网页

> ID：10273438
> 
> 赞同：1
> 
> 时间：2012-04-23T00:28:17.753
> 
> 标签：android, webview, bluetooth

我正在使用本教程

[http://developer.android.com/resources/samples/BluetoothChat/index.html。](http://developer.android.com/resources/samples/BluetoothChat/index.html)

我想通过一部安卓手机访问互联网，然后通过蓝牙将其发送到另一部手机。**虽然网页显示很慢，网页显示不正确。**我尝试逐行发送它并逐行将其加载到webview中，然后使用StringBuilder将其作为整个块加载到webview，尝试将其作为一个整体发送并由StringBuilder作为一个块加载。我还提供了所有权限。

```
uses-permission android:name="android.permission.BLUETOOTH_ADMIN" />
uses-permission android:name="android.permission.BLUETOOTH" />
uses-permission android:name="android.permission.INTERNET" /> 
```

我正在通过

```
 HttpClient client = new DefaultHttpClient();
    HttpPost httppost = new HttpPost("http://www.sheldonbrown.com/web_sample1.html"); 
    HttpResponse response = client.execute(httppost);
    in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
    String line = "";
    String NL = System.getProperty("line.separator");
    while (( line = in.readLine())!= null) {
    line = in.readLine();
    sendMessage(line); 
```

然后在另一端检索它并加载它的webview。

```
case MESSAGE_READ:
                byte[] readBuf = (byte[]) msg.obj;
                // construct a string from the valid bytes in the buffer
              String readMessage = new String(readBuf, 0, msg.arg1);
               add = readMessage + add;
                    try {
        mWebView.loadData(URLEncoder.encode(add,"utf-8").replaceAll("\\+"," "),
                            "text/html", "utf-8");
        } catch (UnsupportedEncodingException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        }
               break; 
```

其中 add 是 String add="";

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-10T05:16:18.433

您刚刚将 html 代码发送到另一部手机，而不是 image/css/js。因此，如果您需要正常显示，请同时发送这些文件。

但我认为这不是一个好方法，Waybe PAN 更好。

# xslt - XSLT 使用 value-of inside select (嵌套 value-of select)

> ID：10273440
> 
> 赞同：2
> 
> 时间：2012-04-23T00:28:47.937
> 
> 标签：xslt

我正在尝试将选择值的结果传递给另一个选择值的参数。这是带有伪语句的完整代码（myVar）

```
<xsl:stylesheet version="1.0"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output omit-xml-declaration="yes" />
    <xsl:variable name="data" select="document('user.xml')/user/data" />
    <xsl:template match="/">
        <xsl:for-each select="form/field">
            <p class="field">
                <xsl:attribute name="style">left:<xsl:value-of
                select="left" />;top:<xsl:value-of select="top" />;
                </xsl:attribute>
                myVar = <xsl:value-of select="text" />
                <xsl:value-of select="$data[@key = {@myVar}]/@value" />
            </p>
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T01:10:56.533

> 我正在尝试将选择值的结果传递给另一个选择值的参数。
> 
> ```
>  myVar = <xsl:value-of select="text" />
>         <xsl:value-of select="$data[@key = {@myVar}]/@value" /> 
> ```

上面的行在语法上是不正确的——`select`是唯一不接受 AVT 的属性。

**为了达到想要的结果，将上述内容替换为：**

```
<xsl:value-of select="$data[@key = current()/text]/@value" /> 
```

**解释**：正确使用 XSLT**[`current()`](http://www.w3.org/TR/xslt#function-current)**函数。

# php - 检查日期是否与前一个日期相同。if not echo out 语句 PHP

> ID：10273442
> 
> 赞同：0
> 
> 时间：2012-04-23T00:28:57.297
> 
> 标签：php

如果我想检查日期是否与表中的前一个日期相同，我不知道要使用的正确语法

如果不是同一日期，我想附上一份声明

我有这个得到差异的语句，我将如何生成一个语句来检查是否存在差异并回显一个字符串，如果它是

```
 $interval = $newdate->diff(new DateTime($last_date)); 
```

谢谢大家，对不起，我无法提供太多代码，我在语法上苦苦挣扎

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T00:30:39.573

假设`$last_date`和`$newdate`都是[DateTime](http://us.php.net/manual/en/book.datetime.php)对象，您可以从 PHP 5.2 开始进行比较

```
if ($last_date == $newdate){
    echo "They're equal";
} else {
    echo "They're not equal";
} 
```

# flash - 从 excel 中制作数据的打包图形表示的最佳方法是什么？

> ID：10273452
> 
> 赞同：1
> 
> 时间：2012-04-23T00:31:06.427
> 
> 标签：flash, html, excel, spreadsheet

客户正在寻找基于大量 Excel 文件的数据可视化方法。有一些规定。过去，成品是一闪而过的。然后，它以由密码保护的 zip 通过电子邮件发送给客户。Flash 文件本身允许对数据进行结构化操作。无非就是以几种不同的方式解析数据。客户询问是否有其他选择可以更有效地完成此任务。我想我现在只是在寻找建议。没什么太复杂的。我还负责研究切换到 HTML 5 作为交付方法的可行性。在这一点上，我不确定客户是否想要合并一种允许通过服务器和网络存在进行实时更新的格式。

任何想法或建议将不胜感激。对不起，帖子的长度！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T04:23:55.407

假设数据集不是那么大，excel 将无法计算它。此外，假设您使用的是最新的 excel 版本（具有切片器等）（如果这些假设是错误的无视建议，我提出它们，因为该组织似乎非常精通技术）

为什么不创建一个使用切片器和数据透视图的 Excel 仪表板工作表，以及使用 countif(s)、sumif(s)、averageif(s) 等公式创建汇总统计数据。这样您就可以提供参数单元格、滑块、切片器、等来调整可视化

然后只需密码保护工作簿。您甚至可以使用单独的密码保护所有不想编辑的工作表

# asp.net-mvc-3 - 从下拉列表中删除项目

> ID：10273453
> 
> 赞同：3
> 
> 时间：2012-04-23T00:31:13.870
> 
> 标签：asp.net-mvc-3, entity-framework-4, asp.net-mvc-3-areas

我创建了一个下拉列表，让用户通过选择角色来选择他们希望创建的帐户。我面临的问题是它在下拉列表中显示了管理员角色。您将如何从列表中隐藏或删除管理员角色？

下拉列表是使用 viewbag 生成的：

```
 public ActionResult Register()
        {
            List<SelectListItem> list = new List<SelectListItem>();
            SelectListItem item;
            foreach (String role in Roles.GetAllRoles())
            {
                item = new SelectListItem { Text = role, Value = role };
                list.Add(item);
            }

            ViewBag.roleList = (IEnumerable<SelectListItem>)list;
            return View();
        } 
```

任何建议 - 欢迎

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T00:53:08.483

我认为您应该从创建选择列表的阵列中删除管理员角色，而不是从选择列表中删除管理员角色。

所以而不是

```
foreach (String role in Roles.GetAllRoles())

foreach (String role in Roles.GetAllRoles().Where(role => role != "admin")) 
```

如果您愿意，您可以进一步将这个有限的角色调用抽象为它自己的方法。

不是您的问题的一部分，但您可以用一个简单的 linq 语句替换所有这些代码。

```
ViewBag.roleList = Roles.GetAllRoles().Where(role => role != "admin").
    Select(role => new SelectListItem { Text = role, Value = role}).ToList(); 
```

也不是您问题的一部分，但我强烈建议您将 SelectList 作为您的视图模型的一部分。

# c# - WP7 在页面之间传递数据

> ID：10273454
> 
> 赞同：0
> 
> 时间：2012-04-23T00:31:32.460
> 
> 标签：c#, windows-phone-7

我的应用程序的基本导航功能包括从列表框中选择一个项目，确定选择了什么项目并获取它的`id`值。将`id`值传递到下一页并将其添加到 api url 以在 webclient 中使用以提取新数据。这就是我现在所拥有的。

确定选择的项目并导航到辅助页面。

```
 public void genreSelectedHandler(object sender, RoutedEventArgs e)
    {
        ResultGenre data = (sender as TextBlock).DataContext as ResultGenre;
        ListBoxItem pressedItem = this.listGenres.ItemContainerGenerator.ContainerFromItem(data) as ListBoxItem;
        if (pressedItem != null)
        {
            string genreID = "http://api.beatport.com/catalog/3/beatport/genre?id=" + data.id;

            this.NavigationService.Navigate(new Uri("/Pages/GenrePage.xaml?genreID=" + genreID, UriKind.Relative));
        }
    } 
```

在辅助页面上，我可以使用 OnNavigatedTo 从上一页获取 url，但我坚持的部分是将 url 插入 webclient。

```
 public GenrePage()
    {
        InitializeComponent();

        // WebClient jsonRelease
        WebClient jsonGenres = new WebClient();
        Uri apiGenre = new Uri("URL from previous page goes here");
        jsonGenres.DownloadStringCompleted += new DownloadStringCompletedEventHandler(jsonGenres_GetDataCompleted);
        jsonGenres.DownloadStringAsync(apiGenre);

    }

    // Textblock data from main page
    protected override void OnNavigatedTo(System.Windows.Navigation.NavigationEventArgs e)
    {
        string genreID = "";
        if (NavigationContext.QueryString.TryGetValue("genreID", out genreID))

        base.OnNavigatedTo(e);
    } 
```

似乎我唯一能做的就是将 url 添加到辅助页面上的现有控件中。有没有更好的方法来完成我想要做的事情？我已经阅读了一些关于 MVVM 框架的内容。这会是更好的处理方法吗？如果是这样，那将如何工作？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T01:28:10.050

Uri 的这一部分会`"http://api.beatport.com/catalog/3/beatport/genre?id="`改变吗？如果没有，而不是传递整个事情来`GenrePage`考虑只传递`data.id`查询字符串。然后在目标页面上创建 Uri。

如果您必须按照片段中显示的方式进行操作，请执行以下操作：

```
string genreID = @"http://api.beatport.com/catalog/3/beatport/genre?id=" + data.id;
this.NavigationService.Navigate( new Uri( "/Pages/GenrePage.xaml?genreID=" + 
  Uri.EscapeDataString( genreID ), UriKind.Relative ) ); 
```

在 GenrePage.xaml.cs

```
public partial class GenrePage : PhoneApplicationPage
{
  public GenrePage()
  {
    InitializeComponent();
  }

  protected override void OnNavigatedTo( NavigationEventArgs e )
  {
    base.OnNavigatedTo( e );

    string genreID = String.Empty;
    if( NavigationContext.QueryString.TryGetValue( "genreID", out genreID ) ) {
      LaunchWebClient( genreID );
    }
  }

  private void LaunchWebClient( string genreID )
  {
    WebClient jsonGenres = new WebClient();
    Uri apiGenre = new Uri( genreID );

    jsonGenres.DownloadStringCompleted += new 
      DownloadStringCompletedEventHandler( jsonGenres_GetDataCompleted );
    jsonGenres.DownloadStringAsync( apiGenre );
  }
} 
```

[Uri.EscapeDataString](http://msdn.microsoft.com/en-us/library/system.uri.escapedatastring%28v=vs.95%29.aspx)将在查询字符串中插入适当的转义字符。查询字符串在目标页面上自动取消转义，因此您无需在此处执行任何特殊操作。

# algorithm - 什么校验和技术可以让我从部分校验和计算整体校验和？

> ID：10273457
> 
> 赞同：1
> 
> 时间：2012-04-23T00:32:06.030
> 
> 标签：algorithm, hash, checksum, crc

我想通过简单地将它们连接在一起来通过网络发送几块数据，并且我希望能够使用校验和来验证一切是否正常（这主要是为了对错误进行防御性检查，而不是因为我已经看到或期望实际的低级数据损坏）。所以我正在寻找一种校验和算法，它可以让我从各个部分的校验和中计算出整体的校验和。

我认为可行的技术的一个简单示例是将每个块的每个字节视为一个整数，并将所有这些整数加在一起（当然，这不会检测到丢失的零字节）。另一种方法是只计算每个块的长度（当然，不会检测到不会导致净插入或删除的数据更改）。我相信，另一个是将所有字节异或在一起，但这只能生成 1 个字节的校验和（我可以一次取 4 个字节，并对每个单元进行异或，但如果块长度不是' t 是四的倍数，我不得不陷入混乱，我认为这可能会消除简单地将不同块连接在一起的能力）。

所以，我正在寻找一种更严格的校验和或散列算法，它仍然可以让我在给定每个块的校验和的情况下轻松计算几个连接块的校验和。有吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T00:41:56.063

通过 TCP 正确传输消息需要协议。该协议必须定义消息的开始、结束或最好两者兼而有之。这意味着您将始终知道消息的长度。如果您的协议将 lenth 放在消息的开头并将整数校验和放在消息的末尾，则将检测到丢失的零字节，因为传输的校验和将从流中的错误字节中恢复，因此平均会出错，65535 65536 次。

# java - 按值将对象添加到 LinkedList 的正确方法

> ID：10273461
> 
> 赞同：1
> 
> 时间：2012-04-23T00:32:44.290
> 
> 标签：java, linked-list

我正在尝试将许多对象添加到`LinkedList`. 我尝试的第一个（不正确的方法）如下：

人物类：

```
public class Person 
{
    public double age;
    public String name;
} 
```

（第一种方式）主文件：

```
import java.util.LinkedList;
public class Main 
{
    public static void main(String[] args) 
    {
        LinkedList<Person> myStudents = new LinkedList<Person>();
        Person currPerson = new Person();   
        for(int ix = 0; ix < 10; ix++)
        {
            currPerson.age = ix + 20;
            currPerson.name = "Bob_" + ix;
            myStudents.add(currPerson);
        }

        String tempName_1 = myStudents.get(1).name; \\This won't be "Bob_1"
        String tempName_2 = myStudents.get(2).name; \\This won't be "Bob_2"
    }
} 
```

第二种方式：

```
import java.util.LinkedList;
public class Main 
{
    public static void main(String[] args) 
    {
        LinkedList<Person> myStudents = new LinkedList<Person>();
        for(int ix = 0; ix < 10; ix++)
        {
            Person currPerson = new Person();   
            currPerson.age = ix + 20;
            currPerson.name = "Bob_" + ix;
            myStudents.add(currPerson);
        }

        String tempName_1 = myStudents.get(1).name;  \\This will be "Bob_1"
        String tempName_2 = myStudents.get(2).name;  \\This will be "Bob_2"
    }
} 
```

第二种方法效果很好，但是有更好（或更正确）的方法吗？如果第二种方式只使用这些对象的地址，那会不会有风险（因为这个地址可能会在以后被替换）？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-23T00:53:27.617

第二种方法是正确的，尽管有人可能会争辩说你可以这样做：

```
import java.util.LinkedList;
public class Main 
{
    public static void main(String[] args) 
    {
        LinkedList<Person> myStudents = new LinkedList<Person>();
        Person currPerson = null; 
        for(int ix = 0; ix < 10; ix++)
        {
            currPerson = new Person();   
            currPerson.age = ix + 20;
            currPerson.name = "Bob_" + ix;
            myStudents.add(currPerson);
        }

        String tempName_1 = myStudents.get(1).name;  \\This will be "Bob_1"
        String tempName_2 = myStudents.get(2).name;  \\This will be "Bob_2"
    }
} 
```

并在循环外声明 currPerson 。这应该“节省”一点空间，但它是一个无限小的优化。无论如何，JVM 可能会为您优化这一点。

无论如何——正如你所看到的，第二种方法是要走的路。

# iphone - ios bundle id 问题以启动第一个 facebook 应用程序

> ID：10273465
> 
> 赞同：3
> 
> 时间：2012-04-23T00:33:29.853
> 
> 标签：iphone, ios, facebook, ios5, bundle

我一直在努力学习如何做我的第一个 Facebook 应用程序。developer.facebook.com/apps/407656052586647/summary?web_hosting=0 上的说明询问我的 ios 捆绑包 ID。

我看过这个网站，[Bundle ID Suffix？它是什么？](https://stackoverflow.com/questions/3436260/bundle-id-suffix-what-is-it)，讨论它（假设bundle id和bundle suffix id相同），听起来好像是链接到了apple id。我只是在开发应用程序并且还没有苹果 ID，假设它与将应用程序分发到 iTunes 相关联。先有鸡还是先有蛋？我什至还没有编写应用程序，所以我怎么可能有 iTunes 的 ID？我看到了这个[用于 App 提交 iOS 的 Bundle ID](https://stackoverflow.com/questions/9200686/bundle-id-for-app-submission-ios)，但我绝对没有准备好将它提交到 iTunes。

我在这个网站的某个地方读到我需要去 xcode ->resource->settings bundle 为项目创建一个包。我会将项目的每个文件都放在查找器窗口的包中吗？

[此外，在http://thinkdiff.net/facebook/how-to-develop-facebook-application-for-iphone/comment-page-1/#comment-293743](http://thinkdiff.net/facebook/how-to-develop-facebook-application-for-iphone/comment-page-1/#comment-293743)中提到的 hackbook 示例，在步骤 3 中（它正在调用它是demoApp，但我发现的名字是Hackbook，但到目前为止它仍然是一个示例）是指设置kAppId。他们创建应用程序 ID 的链接不起作用。它会和我在上面这个问题的第一段中在developers.facebook.com 上所做的一样吗？这个应用程序 id 会是我从 developer.facebook.com/apps/407656052586647/summary?save=1 成功提交中得到的吗？我看到他们在那里列出了应用程序 ID 和应用程序密码，但它不起作用，因为我没有 ios 捆绑包 ID？捆绑包 ID 是我的捆绑包名称（将 xcode 项目的内容拖入）吗？

感谢您提供的任何帮助...密歇根州

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T01:05:08.103

无需担心将应用程序提交到 iTunes。

为了让您的应用与 Facebook 配合使用，您需要访问[https://developers.facebook.com/apps](https://developers.facebook.com/apps)。

从那里，单击“创建新应用程序”

只需指定应用程序名称。此时不需要应用程序命名空间，它是可选的。

单击继续，您将创建新的 Facebook 应用程序。从那里，您将获得您的应用程序 ID。在这行代码中使用您的 Facebook 应用程序 ID：

```
[[Facebook alloc] initWithAppId:@"<APP ID GOES HERE>" andDelegate:self]; 
```

![显示 App ID 的 Facebook 屏幕截图](../Images/3519e4f2b5e9b05dd28d1043e3fe6489.png)

* * *

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T13:43:01.223

这似乎是一个受欢迎的问题，所以我想我会添加更多关于我决定做什么的信息。在 facebook 开发者链接上创建应用程序 ID 后，我最终使用 ShareKit2.0 来让更新版本的 ios 工作。上面链接中的 Hackbook/Demo 示例使用的是较旧的 ios 版本，因此我无法使其与 ios5 一起使用。使用 Hackbook 找出我需要什么权限很有帮助，但仅此而已。我最终遵循了 SharKit2.0 的指示（不在他们的网站上，转到社区当前正在更新的 git 版本）。 [静态 Facebook sdk 中没有 .m 文件](https://stackoverflow.com/questions/10388298/static-facebook-sdk-has-no-m-files-in-it)

链接中的说明有助于创建和启动我的第一个 Facebook 应用程序，包括应用程序 ID。我从来没有用 Bundle 做任何事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T00:57:31.373

您的链接不起作用，但我认为它们指的是 developer.facebook.com 上的捆绑 ID，您需要在其中创建一个 App ID 并在您的 iOS 应用中使用它。你已经这样做了吗？这绝对是您处理 iTunes 之前的先决条件。

# google-app-engine - 谷歌应用引擎中使用 jdo 的 max 和 min 函数

> ID：10273466
> 
> 赞同：0
> 
> 时间：2012-04-23T00:33:30.560
> 
> 标签：google-app-engine, jdo

一直在尝试使用 JDO 在 google appengine 中检索具有最大值和最小值的记录，我知道它不受支持..有没有人知道对数据存储中的实体执行此查询...下面是我的代码

```
PersistenceManager pm = PMF.get().getPersistenceManager();

  Query q=pm.newQuery(userentity.class);

  q.setFilter("Cusunique == CusUniqueId");              

  q.declareParameters("String CusUniqueId");
  //JDO does not allow this below line of code
  q.setResult("max(this.fieldname)"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T06:57:01.130

**JDO**对您这样做**没有**任何限制。GAE v1 插件可能会，但 GAE v2 插件肯定不会。显然，数据存储的任何限制都是另一回事。

PS。简单地写更有效

```
q = pm.newQuery("SELECT max(this.fieldname) FROM mydomain.userentity WHERE Cusunique == :id"); 
```

# command-line - 动态的 PHP 命令行输出

> ID：10273469
> 
> 赞同：6
> 
> 时间：2012-04-23T00:33:54.727
> 
> 标签：command-line, php

我正在编写一个命令行 php 脚本，它对控制台窗口进行一些输出，它看起来都很好，唯一的问题是当我输入

```
php myfilename.php -.... 
```

在控制台窗口中，只有在完全执行后，它才会将结果输出到窗口..

我想要的是像下面这样即时执行此操作

```
customer id: 1223 skipped.
customer id: 22233 added.. 
```

...ETC

另一个问题是将 \n\r 添加到 printf 函数中没有换行...

关于这些问题的任何想法..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T00:40:42.187

这可能是由于[输出缓冲](http://php.net/manual/en/book.outcontrol.php)。您可以`ob_flush()`在需要时手动刷新缓冲区。

至于您的第二个问题，Microsoft Windows 上换行符的正确顺序是`"\r\n"`，而不是相反。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T00:44:04.643

首先，[Windows 样式的行尾标记是`\r\n`，而不是`\n\r`](http://en.wikipedia.org/wiki/End_of_line)。使用过的系统并不多`\n\r`，但它们非常罕见，以至于您现在可以忘记它们。

其次，输出被*块缓冲*的可能性很大——您可以使用在每个输出命令之后[`ob_implicit_flush(1)`](http://www.php.net/manual/en/function.ob-implicit-flush.php)自动插入[`flush()`](http://www.php.net/manual/en/function.flush.php)命令。或者，您可以`flush()`在需要刷新输出时手动调用。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-06T07:40:27.587

关于行尾标记，**始终使用 PHP 预定义常量** `PHP_EOL`；**它是根据您的平台正确设置的**，因此您不必担心它是对还是错。

对于 [Enter] 问题，可能是输出缓冲已打开。在您的脚本中添加这个简单的测试：

```
function test()
{
    $state = array(' added', ' skipped');
    for ($i = 0; $i < 50; $i++)
    {
        echo 'customer id: ' . rand(1, 1000) . $state[rand(0, 1)] . PHP_EOL;
        usleep(50000); // slow it a bit to see the line by line output
    }
}

// without ob -------------------------------------------

$start = microtime(true);
test();
echo 'Finished in ' . round(microtime(true) - $start, 2) . PHP_EOL . str_repeat('-', 78) . PHP_EOL;
sleep(1);

// with ob ----------------------------------------------

$start = microtime(true);
ob_start(); // if called somewhere at the top in your script

// some previous code...
echo 'Line 1'.PHP_EOL.'Line 2'.PHP_EOL.uniqid().PHP_EOL;

// flush the buffer and stop ob
// this will echo whatever is in the output buffer!
//ob_end_flush();

// or, store the current buffer content in a variable and use it later
$output = ob_get_clean();

test();
echo $output;
echo 'Finished in ' . round(microtime(true) - $start, 2) . PHP_EOL . str_repeat('-', 78) . PHP_EOL;

// you could start buffering again, if needed
ob_start(); 
```

有关输出控制功能，请参见[http://www.php.net/manual/en/ref.outcontrol.php](http://www.php.net/manual/en/ref.outcontrol.php)。它们是非常强大的工具。

希望能帮助到你。干杯!

# solr - apache openNLP chuker/POS 名词检测

> ID：10273482
> 
> 赞同：1
> 
> 时间：2012-04-23T00:35:59.307
> 
> 标签：solr, nlp, opennlp, part-of-speech

我正在为我的一个项目试验 apache Open NLP，我的要求是从电子邮件内容中检测名词并检查我们的客户数据库（该数据库由个人姓名、组织名称等组成，我的搜索引擎是 Solr 库）。

对于普通的英语名词，默认训练模型可以正常工作（对于大多数情况），但一个棘手的要求是，我们有一个带有 OK、LET 等缩写的业务组织，因此在少数情况下我需要考虑 OK、LET 等作为名词。

例如 1) “寄一些物品给 LET，请注意延迟付款” 2) “让我们去参加派对吧”

在＃1中，我想将LET视为名词，而在＃2中，LET不是名词。

如果我能达到这个要求，我可以在我的搜索引擎中减少大量的误报匹配。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T04:29:40.440

制作特殊名词的**字典**并执行基于字典的提取作为后处理步骤。基于字典的提取应该考虑小写和大写之间的区别，特别是对于那些是首字母缩略词的条目。

在**字典查找的实现方面：**

*   只要所讨论的实体是单个标记（或仅由预定义的、每个最大数量 M 的标记组成），将字典实现为`HashSet<String>`，标记文本并在哈希中查找每个标记（以及最多 M 个令牌）应该工作得很好

*   如果您正在处理很长的实体，或者如果标记化是一个问题，那么使用搜索树或字典的有限状态机实现是明智的。

最后，与 NLP 一样，您将需要**查看大量结果样本**以识别任何进一步的问题。根据实体列表中的歧义程度，您可能需要通过在区分大小写的字典查找之上添加启发式或基于统计/ML 的决策机制来进一步改进检测方法。

# c# - 在不中断 Windows 背景的情况下向特定窗口发出键盘输入

> ID：10273484
> 
> 赞同：0
> 
> 时间：2012-04-23T00:36:31.447
> 
> 标签：c#, python, input

我需要能够在不中断用户的情况下定期在后台向特定窗口发出键盘输入。怎么可能做到这一点？

**用例：**

我打开了两个窗口：一个窗口正在等待输入（窗口 A），而我正在另一个窗口（窗口 B）中积极工作。在窗口 B 中工作时，通过键盘向窗口 A 发出周期性命令，而不会中断窗口 B 中正在进行的交互。

我希望使用 Python 或 C# 来完成此任务......无论哪种方式都能以最干净和最快的速度完成工作（或两者的完美混合）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T01:01:54.070

检查[winGuiAuto.py](http://www.brunningonline.net/simon/blog/archives/winGuiAuto.py.html)。如果您可以找到要更改其输入的控件的 hwnd，即使它不是活动窗口，也可以将其发送给它。

即使它不能直接解决您的问题，源代码也是将 win32api 与 Python 结合使用的很好的一课，无论如何应该对您有所帮助。

# google-chrome-extension - 检索 Chrome URL 并与另一个固定 URL 结合使用

> ID：10273486
> 
> 赞同：1
> 
> 时间：2012-04-23T00:36:41.443
> 
> 标签：google-chrome-extension

我目前正在编写一个 chrome 扩展，以便在栏上有一个按钮，单击时我希望它获取当前选定选项卡的 URL 并打开一个新选项卡，如下所示：

FixedURL/grabbedURL 例如：假设当前打开的页面是“http://www.abc.com”，我分配的固定 url 是“http://www.123.com”，所以我要打开的新 URL将是[http://www.123.com/http://www.abc.com](http://www.123.com/http://www.abc.com)

这样，只有在新选项卡中打开的 URL 的第二部分会根据所选选项卡而改变。

我已经创建了 manifest.json 和图标、标题等...

然后我尝试同时使用 background.html 和 popup.html 但无济于事。

我对整个 .js 文件以及如何将它们链接在一起也有点迷茫。

我可以达到的最大值是打开 chrome：当我单击按钮时，chrome://settings/extensions/obidbojnjbigokbpalmaacmgmecopond/title.url。

这是我的 manifest.json

```
 {
  "name": "Circumvent",
  "version": "1.0",
  "description": "Opens new tab",
  "browser_action": {
      "default_icon": "111.png",
      "default_title": "Circumvent!",
      "popup": "main.html"
         },
  "icons": {
      "48": "111.png"
   },
  "permissions": [
    "tabs","notifications","http://*/*"
    ]
} 
```

任何关于示例代码的想法和/或简短的说明都会非常棒且非常有帮助！

提前致谢....

PS我的第一个扩展

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T14:58:21.920

您应该添加一个[背景页面](http://code.google.com/chrome/extensions/background_pages.html)并让它监听您的扩展程序的[浏览器操作按钮](http://code.google.com/chrome/extensions/browserAction.html#event-onClicked)的点击：

```
chrome.browserAction.onClicked.addListener(function(tab) {
    chrome.tabs.create({"url" : "http://www.123.com/" + tab.url})
}); 
```

（此代码位于您的背景页面中。）

您需要删除`popup`清单中的行，因为`onClicked`如果有弹出窗口，处理程序将不会触发（此外，您不需要弹出窗口，您只需要一个按钮）。

# shell - UNIX shell 编程解释是否基于？

> ID：10273488
> 
> 赞同：0
> 
> 时间：2012-04-23T00:36:56.273
> 
> 标签：shell, unix

我刚开始学习 UNIX，出于好奇，我想知道 UNIX shell 脚本是由 shell 编译还是解释？我的猜测是解释。不过我不确定。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T00:38:31.557

它们是 100% 解释的。几乎任何时候你听到“脚本”这个词，你都可以假设它是被解释过的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T00:54:03.827

存在用于 shell 语言的编译器，例如专有的 CCsh： http: [//www.comeaucomputing.com/faqs/ccshfaq.html](http://www.comeaucomputing.com/faqs/ccshfaq.html)

shell 的主流实现不编译。

shell 语言的设计完全不考虑编译的可能性。

# google-maps-api-3 - google-maps kml，如何标记线串？

> ID：10273494
> 
> 赞同：6
> 
> 时间：2012-04-23T00:37:37.663
> 
> 标签：google-maps-api-3, kml

我有一个网站，在谷歌地图上将 kml Line Strings 显示为自行车路线。

我想标记路线，但无法这样做。
我无法在 Line String 中添加气泡。我在路线上放了一个地标，它显示为一个图标，但我找不到在它们上面贴标签的方法。我无法将图标更改为带有所需文本的 png 图标。

我一直在尝试不同的事情，通常会查看这些文档，但只是尝试了很多不同的事情。

[https://developers.google.com/kml/documentation/mapsSupport](https://developers.google.com/kml/documentation/mapsSupport)

[https://developers.google.com/kml/documentation/kmlelementsinmaps](https://developers.google.com/kml/documentation/kmlelementsinmaps)

我不确定这是不可能的，还是我做错了什么。

我唯一能想到的就是在 Google Earth 中以我的标签所需的字符的形状在我想要显示它的位置绘制一个 Line String，但这看起来很愚蠢，它应该比这更容易。

有没有人能够在 kml 文件中添加标签以在 google-map API 3 中显示？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-24T05:16:17.850

[如果我理解你的问题，我相信这里](https://stackoverflow.com/q/6733780/1314132)已经有人问过了。另外，在您的问题中，您谈到了更改地标图标，并且我相信有一个不同的[答案可以解决您问题的这一部分。](https://stackoverflow.com/a/3905453/1314132)希望这可以帮助 -

# java - Java - 我们如何获取选定或活动框架 (getSelectedFrame()) 并将其传递给 JDialog()？

> ID：10273496
> 
> 赞同：2
> 
> 时间：2012-04-23T00:37:52.873
> 
> 标签：java, swing, jdialog

我有一个带有自定义类加载器的 mainFrame。我的加载程序根据需要在 mainFrame 中加载面板。在其中一个面板中，我有一个 JDialog。我希望 JDialog 框阻止应用程序中的所有窗口。

在面板中，我想做这样的事情。

```
myDialog = new JDialog(getSelectedFrame(),"",Dialog.ModalityType...); 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T01:01:42.277

你不需要它。如果要将对话框作为框架、对话框或任何对象的父级，您只需在实例化 JDialog 的组件上调用 getTopLevelAncestor()。这使得知道框架无关紧要，这有助于确保调用或重用代码的人可以在任何组件上使用它：框架、另一个对话框、窗口等。

[http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#getTopLevelAncestor](http://docs.oracle.com/javase/6/docs/api/javax/swing/JComponent.html#getTopLevelAncestor) ()

例如：

```
class MySpecialPanel extends JPanel {

    public MySpecialPanel() {

        JButton button = new JButton( new AbstractAction("Show") {
            public void actionPerformed(ActionEvent event) {
                JDialog dialog = new JDialog( (Window)getTopLevelAncestor(), "Some Title", Dialog.ModalityType.DOCUMENT_MODAL );
                dialog.add( new DialogPanel() );
                dialog.show();
            }
        });
    }
} 
```

现在通过使用 MySpecialPanel.getTopLevelAncestor() 您正在创建的对话框不需要知道它的确切组件。并且使用 MySpecialPanel 的客户端可以自由地将这个面板放入它想要的任何容器中，例如 JFrame、另一个 JDialog 或其他任何容器。

# objective-c - 用户输入文本翻译

> ID：10273503
> 
> 赞同：0
> 
> 时间：2012-04-23T00:38:46.530
> 
> 标签：objective-c, search, nsarray, uitextview, translation

我正在开发一种翻译器，它将采用英语文本（作为用户输入到 UITextView 中）并（按下按钮）用替代词替换特定的词。我将范围内的英语单词以及它们的替代词放在单独的数组（englishArray 和alternativeArray）中，并进行相应的索引。

我的挑战是找到一种算法，该算法允许我识别输入文本（UITextView）中的单词，忽略 <",.()> 等字符，在 englishArray 中查找单词（不区分大小写），在 AlternativeArray 中找到相应的单词并然后用那个词代替原来的——把它写回 UITextView。

非常感谢任何帮助。

注意。我创建了一个扩展 NSArray 功能的类别，该方法使用 indexOfCaseInsensitiveString 方法在执行 indexOfObject 类型查找时忽略大小写，如果有帮助的话。

托尼。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T03:14:26.530

我认为使用 NSScanner 最好将字符串解析为单独的单词，然后您可以将其传递给 indexOfCaseInsensitiveString 方法。scanCharactersFromSet:intoString: 使用一组你想忽略的所有字符，包括空格和换行符应该让你找到一个单词的开头，然后你可以使用 scanUpToCharactersFromSet:intoString: 使用相同的集合扫描到结尾这个单词。在每次扫描的开头和结尾使用 scanLocation 应该可以让您获得该单词的范围，因此如果您在数组中找到匹配项，您将知道在字符串中的哪个位置进行替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T05:25:57.353

谢谢你的建议。它有一个例外。

我想捕获所有标点符号，以便我可以重新创建原始输入，但使用替换的单词。即使我的字符集中有一个“空格”，扫描仪也不会将空格放入“intoString”中。我在字符集中指定的其他字符，例如“（”和“；”）在“intoString”中表示。

Net 是，当我重新创建输入时，它是完美的，除了我让单个单词相互运行。

更新：我通过包括以下内容解决了这个问题：

```
[theScanner setCharactersToBeSkipped:nil]; 
```

再次感谢。

# regex - 使用正则表达式至少获得 2 个零个或多个集合中的 1 个

> ID：10273509
> 
> 赞同：1
> 
> 时间：2012-04-23T00:39:51.940
> 
> 标签：regex

我将如何编写一个正则表达式，允许一个组中的零个或多个，以及另一个组的零个或多个，但至少两个组中的一个必须存在？

具体来说，我想得到一个类似参考的电子表格，所以它应该得到 A1:B5（对于整个区域）、A:A（对于一整列）或 5:5（对于一整行）。

我第一次尝试

```
[A-Za-z]*[\d]*:[A-Za-z]*[\d]* 
```

但这还不够，因为只需键入 : 或 B6: 也可以满足该标准。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T00:42:38.647

你可以通过分组来做到这一点......

```
/((how)|(now))+/ 
```

如果你想匹配一个范围而不是一个单元格引用，你可以列举方法来做到这一点：

```
([A-Z]:[A-Z])|(\d+:\d+)|([A-Z]\d+:[A-Z]\d+) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T00:48:35.133

一种方法是显式交替：

```
(?:[a-zA-Z]+|\d+|[a-zA-Z]+\d+):(?:[a-zA-Z]+|\d+|[a-zA-Z]+\d+) 
```

但是，如果您的引擎支持后视，您可以使用它：

```
(?>[a-zA-Z]*\d*(?<=.)):(?>[a-zA-Z]*\d*)(?<=.)) 
```

这表示“零个或多个字母，后跟零个或多个数字，它必须以至少一个字符 (.) 结尾。这保证它不会为空。原子分组`(?>...)`意味着后向`(?<=.)`不能匹配之前出现的任何内容那一点。

# sql - SQL 编号检查触发器

> ID：10273511
> 
> 赞同：2
> 
> 时间：2012-04-23T00:40:29.273
> 
> 标签：sql, error-handling, triggers

我需要 ID 是一个八位整数。

```
create table foo(
ID  primary key DEFERRABLE,
);

create or replace trigger foo_trg 
before insert or update
on foo
for each row
Begin
  if :new.ID > 99999999  or :new.ID < 9999999 then 
    raise pkg.Illegal_update;
  end if;
end;
/ 
```

现在我的触发器只能在数字太大或太小的情况下阻止非法更新。我需要一种检查数字中小数的方法

欢迎任何建议谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T00:46:36.407

什么是 DBMS？我将 id 列的类型声明为整数。在 Oracle 中，你会这样做：

```
create table foo(
ID  NUMBER(8,0) primary key DEFERRABLE,
); 
```

有什么理由可以推迟吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T00:48:17.353

`floor(number) = number`如果一切都失败了，你可以使用。

# python - 将代码从 Python 转换为 Smalltalk

> ID：10273513
> 
> 赞同：6
> 
> 时间：2012-04-23T00:40:30.393
> 
> 标签：python, smalltalk, code-translation

首先让我说，我不是在这里寻找自动解决方案。我想将代码从 Python 翻译成 Smalltalk，因为我注意到一些非常简单的句子可以自动翻译，例如：

***将变量赋值给一个值***

Python

```
i = 1 
```

短暂聊天

```
i := 1. 
```

***创建一个类的新实例***

Python

```
instance = module.ClassName() 
```

短暂聊天

```
instance := ClassName new. 
```

***一个 for 循环***

Python

```
for a in [0,1,2]:
  print (str(a)+str(a)) 
```

短暂聊天

```
#(0 1 2) do: [: a | Transcript show: a + a; cr ] 
```

等等（while 循环、条件等）。我的想法是有一个工具来翻译所有这些极其“简单”的案例，然后我可以手动完成或教授一个规则系统。

你知道任何可以帮助我的编程翻译工具或库吗？

如果您还没有听说过任何工具，您将使用什么技术/模式来实现这种翻译？你能提供一个例子的链接吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T00:50:15.180

您需要解析 Python 代码，遍历解析器生成的抽象语法树并输出您的 Smalltalk。[Eli Bendersky](http://eli.thegreenplace.net/2009/11/28/python-internals-working-with-python-asts/)有一篇关于 Python AST 的好文章，还有一篇稍旧的[文章](http://www.dalkescientific.com/writings/diary/archive/2010/02/22/instrumenting_the_ast.html)。Python 使这相对简单，因为 Python 标准库公开了许多解释器的内部工具，并且[文档](http://docs.python.org/library/ast.html)相当全面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T06:34:50.153

我不知道有任何此类工具，一般情况下它可能很复杂和/或效率低下。因此，您的路线将取决于您更精确的需求：移植现有的 python 库，仅从 smalltalk 中使用它，或者制作与 python 执行相同操作的漂亮干净的 smalltalk 代码。

我会考虑的路线：

*   保留python库，并通过c接口从smalltalk调用它
*   在 pettit parser 中实现 python 解析器然后：
    *   实现 smalltalk 生成器可以通过用户界面由人工辅助
    *   smalltalk中的python解释器

请注意，生成器变体在一般情况下可能会遇到一些难题，例如 smalltalk 具有固定数量的实例变量，而在 python 中，您可以随时附加。您可以解决这个问题，但生成的 smalltalk 代码可能并不漂亮。

至于在 smalltalk 中实现 python，请看 Lukas Renggli 的 helvetia 演示，它是关于在 smalltalk IDE 中包含其他语言的主题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T00:53:17.823

看看[ply](http://www.dabeaz.com/ply/)，它是一个 Lex-Yacc Python 实现。我主要将它用于通过使用它构建 Python AST 将其他一些语言转换为 Python 字节码，但相反的情况也应该是可能的。

# c# - 在大型对象数组中查找对象参数会花费太长时间吗？（C＃）

> ID：10273515
> 
> 赞同：2
> 
> 时间：2012-04-23T00:40:57.293
> 
> 标签：c#, arrays, performance

我正在制作一个基于 2d 瓷砖的游戏。我的一些测试级别很少有瓷砖，有些有 500,000 用于测试目的。运行 Visual Studio 附带的性能分析器会显示瓶颈： ![图片必须在这里，它显示了 <code>if (blocks[i].Visible)</code> 如何花费 87% 的时间](../Images/90b414267c9f1d0b348115dbcf37e406.png)

需要这么长时间的确切原因是什么？我该如何避免这种情况？

**UPD：**没关系，我只是遍历整个数组，而不是仅遍历约 200 个可见图块。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T00:43:17.227

.Visible 是一个属性。要了解为什么这是一个瓶颈，您需要查看该 getter 的实现。虽然它看起来只是一个简单的布尔值，但它在幕后可能很复杂。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T00:44:07.417

并不是说评估每个单独的 Visibility 属性/字段会花费很多时间-而是您要执行 500k 次-它加起来。由于这是分析器估计的瓶颈，这意味着绝大多数项目已`Visibility`设置为 false - 否则您会假设`Draw()`方法调用将显示为瓶颈。优化这一点的一种方法是分离可见项目并仅对其进行迭代。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T00:43:57.663

500k是典型场景吗？请记住，根据您的实际需求，复杂性会有很大差异。

如果你真的必须处理 500k 块，我会有第二个可见块列表，或者一个包含这些可见块的数组索引的整数列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T00:44:21.887

为查找具有特定属性的对象而进行的顺序检查意味着运行“n”次迭代的最坏情况，其中“n”是记录总数。这无疑是一个瓶颈。

您可能希望单独保留一组可见项目。

# javascript - 从画布元素中获取 SVG 并保存

> ID：10273516
> 
> 赞同：28
> 
> 时间：2012-04-23T00:41:23.473
> 
> 标签：javascript, canvas, svg, save

目前我正在为一个正在攻读博士学位并需要构建一些网络图的朋友创建一个小型应用程序。到目前为止，使用 Force Directed 图一切正常。可以移动图形节点以设置布局样式。

![](../Images/bc2c344706b35c7473adabe91d8ff24b.png)

我无法理解的是：

> **»如何从画布中提取数据并将其保存到 SVG 文件中«** .

### 我尝试了什么：

我已经尝试从控制台访问图像数据

```
var app.canvas = document.getElementById( 'graph-canvas' )
    .getContext( '2d' )
        .getImageData( 0, 0, 200, 200 ); 
```

并得到了`(object) ImageData`回报。现在我可以访问 ↑ 显示的画布数据`app.canvas.data`。（当我尝试查找值时，浏览器开始挂起并询问是否应该停止脚本 - Chrome 和 FF 最新）。

我将如何从这里开始绘制 SVG，然后单击按钮保存？

**编辑：**

到目前为止，我发现了如何绘制 SVG 并向`image/png`其添加元素。但是，它没有显示。

```
// Add the test SVG el:
var svg = document.createElementNS( "http://www.w3.org/2000/svg", "svg" );
svg.setAttribute( 'style', 'border: 1px solid black;' )
        .setAttribute( 'width', '600' )
        .setAttribute( 'height', '400' )
        .setAttributeNS(
            'http://www.w3.org/2000/xmlns/',
            'xmlns:xlink',
            'http://www.w3.org/1999/xlink'
        );

// Call
importCanvas( document.getElementById( 'infovis-canvas' ), svg ); 

// Function: Add data to SVG
function importCanvas( sourceCanvas, targetSVG ) 
{
    // get base64 encoded png data url from Canvas
    var img_dataurl = sourceCanvas.toDataURL( "image/png" );

    var svg_img = document.createElementNS(
        "http://www.w3.org/2000/svg",
        "image"
    );

    svg_img.setAttributeNS(
        'http://www.w3.org/1999/xlink',
        'xlink:href',
        img_dataurl
    );
    jQuery( targetSVG.appendChild( svg_img ) )
        .appendTo( '#graph-container' );

    console.log( 'done' ); // Log & confirm
} 
```

最后...

```
// ...resulting SVG element containing the image element
<svg style="border: 1px solid black;" width="600" height="400" xlink="http://www.w3.org/1999/xlink"><image href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAABQAAA(...) 
```

* * *

*UI 与 jQuery UI、jQuery 和[Jit/InfoVIZ](http://thejit.org/static/v20/Docs/files/Core/Core-js.html)库一起使用，所以这些都是可用的。*

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-23T06:37:40.017

如果您想将其保留为矢量图形而不是栅格，您可以尝试将画布 API 操作转换为 svg 的库之一。

**对于[SVGKit](http://svgkit.sourceforge.net/SVGCanvas.html)：**

```
var svgkitContext = new SVGCanvas(150,150);

function draw(ctx) {
   // ... normal canvas drawing commands go here ...
}

// draw to SVGKit canvas (svg) instead of canvasElement.getContext("2d")
draw(svgkitContext); 
```

上面的完整运行[示例](http://xn--dahlstrm-t4a.net/svg/libraries/svgkit/example/canvas-to-svg.html)。

**对于[canvas-svg](http://code.google.com/p/canvas-svg/)：**

```
var canvasSVGContext = new CanvasSVG.Deferred();
canvasSVGContext.wrapCanvas(document.querySelector("canvas"));
var canvasContext = document.querySelector("canvas").getContext("2d");

function draw(ctx) {
    // ... normal canvas drawing commands go here ...
}

// draw to html5 canvas and record as svg at the same time
draw(canvasContext);

// append the svg result
var svg = document.appendChild(canvasContext.getSVG()); 
```

上面的完整运行[示例](http://xn--dahlstrm-t4a.net/svg/libraries/canvas-svg/canvas-to-svg.html)。

**代替生成 svg：**

另一种选择当然是首先将图形制作为 svg，[d3.js](http://mbostock.github.com/d3/)是一个 javascript 库，可以很容易地做到这一点，例如看[这个](http://mbostock.github.com/d3/ex/force.html)力有向图的例子。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-23T15:42:49.797

如果您受到限制，`ImageData`那么您就不走运了，因为那只是一个像素阵列（请参阅[参考资料](https://developer.mozilla.org/en/DOM/ImageData)）。您无法从那里获得有意义的 SVG 图像。您可能可以拉出一个`.png`表示...但这是一个没有交互的静态图像。

如果您打算将某种画布导出到 SVG，那么如何进行画布绘图很重要。最好的方法是使用一个维护画布[场景图](http://en.wikipedia.org/wiki/Scene_graph)的库。

[Fabric.js](http://fabricjs.com/)似乎是一个不错的选择。您可以使用画布进行绘图，然后调用`canvas.toSVG()`并获取您的 svg 图像。

# c# - C# 聊天 - TCP P2P

> ID：10273519
> 
> 赞同：0
> 
> 时间：2012-04-23T00:41:39.767
> 
> 标签：c#, tcp, chat, p2p

我正在开发一个点对点聊天程序，但遇到了一个问题：同时运行客户端和服务器。我不希望有专用服务器来管理连接。我相信解决方案可能是异步直接连接，但我不确定。

我想要完成的是能够在两台主机之间运行该程序，该程序将启动并开始尝试连接到由文本框指定的 IP 地址。同时，它也会开始监听 localhost ip 地址上的传入连接。

***我正在使用 tcp，因为万一某些东西被损坏，消息将无法被读取（它是加密的）

问题： 1) 可以想象，客户端可能会在其他程序尝试连接之前等待一段时间。那么是否必须使用某种形式的循环？如果是这样，怎么做？

2）我假设我需要使用多线程，一个线程用于服务器部分，一个线程用于客户端部分，但问题是使它们无法挂起。由于这两个程序是相同的，因此有一种方法可以监听并同时尝试连接到另一台主机。

3）我也无法让我的服务器监听到它的连接，并且不知道如何让它自动从我的计算机中提取 IP 地址。

谢谢你的帮助。

编辑：这仅在 LAN 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T01:05:38.903

你需要知道的一切都在微软的文档中。

[http://msdn.microsoft.com/en-us/library/w89fhyex.aspx](http://msdn.microsoft.com/en-us/library/w89fhyex.aspx)

# bison - Flex/Bison 错误：在非结构或联合的情况下请求成员“str”

> ID：10273523
> 
> 赞同：2
> 
> 时间：2012-04-23T00:42:54.150
> 
> 标签：bison, flex-lexer

我正在学习 flex/bison。我编写了以下程序，但出现错误。

```
%{
#include <stdio.h>

typedef struct node
{
    struct node *left;
    struct node *right;
    char *token;

}node;

node *mknode( node *left, node *right, char *token);
void printtree(node *tree);

#define YYSTYPE struct node *

%}

%union 
{
    char* str;
    int num;
}

%start  lines
%token <str> WORD 
%token <str> PLUS MINUS TIMES DIVIDE    POWER
%token <str> LEFT_PARENTHESIS RIGHT_PARENTHESIS
%token  <str> END

%left PLUS MINUS
%left TIMES DIVIDE
%right POWER

%type <str> exp term factor line lines
%%

lines:      /* empty */
            | lines line;

line:       exp END                 { printtree($1); printf("\n");}
            ;

exp:        term                    {$$=$1; }
            | exp PLUS term         { $$=mknode($1,$3,"+"); }
            | exp MINUS term        { $$=mknode($1,$3,"-"); }
            ;

term:       factor                  { $$=$1; }
            |term TIMES factor      { $$=mknode($1,$3,"*"); }
            ;

factor:     WORD                    { $$=mknode(0,0, (char*)yylval); }
            |LEFT_PARENTHESIS exp RIGHT_PARENTHESIS 
                                    { $$=$2; }
            ;
%%

int main(void)
{
    return yyparse();
}

node *mknode(node *left, node *right, char *token)
{
  /* malloc the node */
  node *newnode = (node *)malloc(sizeof(node));
  char *newstr = (char *)malloc(strlen(token)+1);
  strcpy(newstr, token);
  newnode->left = left;
  newnode->right = right;
  newnode->token = newstr;
  return(newnode);
}

void printtree(node *tree)
{
  int i;

  if (tree->left || tree->right)
    printf("(");

  printf(" %s ", tree->token);

  if (tree->left)
    printtree(tree->left);
  if (tree->right)
    printtree(tree->right);

  if (tree->left || tree->right)
    printf(")");
}

int yyerror(char *s )
{
    fprintf (stderr, "%s\n", s);
} 
```

柔性：

```
%{

  #include <stdlib.h>
  #include "y.tab.h"

%}

%%

[a-zA-Z0-9]+            { yylval.str = strdup( yytext ); return WORD; }
                        /* cast pointer to int for compiler warning */
[ \t]                   ;
"+"                     return(PLUS);
"-"                     return(MINUS);
"*"                     return(TIMES);
"/"                     return(DIVIDE);
"^"                     return(POWER);
"("                     return(LEFT_PARENTHESIS);
")"                     return(RIGHT_PARENTHESIS);
\n                      return(END);

%%

int yywrap (void) {return 1;} 
```

我得到的错误：

```
C:\flexbison>recomp example2
example2.y:40.6: warning: empty rule for typed nonterminal, and no action
conflicts: 5 reduce/reduce
example2.y:43: error: request for member `str' in something not a structure or union
example2.y:46: error: request for member `str' in something not a structure or union
example2.y:46: error: request for member `str' in something not a structure or union
example2.y:47: error: request for member `str' in something not a structure or union
example2.y:47: error: request for member `str' in something not a structure or union
example2.y:47: error: request for member `str' in something not a structure or union
example2.y:48: error: request for member `str' in something not a structure or union
example2.y:48: error: request for member `str' in something not a structure or union
example2.y:48: error: request for member `str' in something not a structure or union
example2.y:51: error: request for member `str' in something not a structure or union
example2.y:51: error: request for member `str' in something not a structure or union
example2.y:52: error: request for member `str' in something not a structure or union
example2.y:52: error: request for member `str' in something not a structure or union
example2.y:52: error: request for member `str' in something not a structure or union
example2.y:55: error: request for member `str' in something not a structure or union
example2.y:56: error: request for member `str' in something not a structure or union
example2.y:58: error: request for member `str' in something not a structure or union
example2.y:58: error: request for member `str' in something not a structure or union 
```

知道为什么我会收到此错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T01:00:57.207

第一个明显的问题是您不应该定义`YYSTYPE`是否使用 yacc。Yacc`YYSTYPE`从你的`%union`. 您需要定义`YYSTYPE`是否使用`lex`，但不使用`yacc`。

您的`%union`解析堆栈项类型仅包含`int`和`str`成员。示例：您已将`exp`语法符号定义为具有 type `str`，然后您有以下产生式：

```
exp:        term                    {$$=$1; }
            | exp PLUS term         { $$=mknode($1,$3,"+"); }
            | exp MINUS term        { $$=mknode($1,$3,"-"); }
            ; 
```

该`mknode`函数返回`node *`，但`$$`符号的类型是`char *`因为它代表`exp`左侧的 ，您键入为 a `str`，而 the 的`str`成员`%union`是`char *`。

的参数也`mknode`必须是`node *`。但是`$1`并`$3`没有那种类型。

# javascript - Backbone.js：模型继承导致共享数据

> ID：10273525
> 
> 赞同：11
> 
> 时间：2012-04-23T00:43:22.287
> 
> 标签：javascript, backbone.js, prototypal-inheritance

在过去的两天里，我一直在努力解决这个问题。出于某种原因，主干在继承的子模型之间共享父实例数据。这是一个例子：

```
var Base = Backbone.Model.extend({

  index : []

});

var Group = Base.extend({

  initialize : function() {
    this.index.push('from group');
  }

});

var User = Base.extend({

  initialize : function() {
    this.index.push('from user');
  }

});

var user = new User();
console.log(user.index); // ['from user']

var group = new Group();
console.log(group.index) // ['from user', 'from group'] 
```

* * *

我正在寻找的是：

```
console.log(user.index); // ['from user']
console.log(group.index) // ['from group'] 
```

有什么见解吗？

谢谢！马特

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-23T00:51:05.993

您所经历的本质上是 JS 通过引用而不是值传递对象（或数组）的方式的副产品。如果您希望用户和组的索引不同，只需在初始化函数中将其实例化为数组即可。

```
var Base = Backbone.Model.extend({

initialize: function() {
  this.index = [];
}

}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-23T00:54:17.553

index 成员就像一个类变量，因为它位于 Base 的原型链中，因此被所有实例共享，就像它包含的方法也是共享的一样。尝试切换实例化用户和组的顺序。现在索引包含什么？是反了吧？那是因为它们共享对象传递给扩展的所有内容。

为了使它成为一个实例变量，您需要在 Base 的构造函数中实例化它，并让每个子类从它们各自的构造函数中调用该构造函数。像：

```
var Base = Backbone.Model.extend({
    initialize: function() {
       this.index = [];
    }
});

var User = Base.extend({
    initialize: function() {
        Base.prototype.initialize.call( this );
        this.index.push('User');
    }
});

// repeat it for group. 
```

# iphone - 动画更改 UIImageView 的图像

> ID：10273536
> 
> 赞同：0
> 
> 时间：2012-04-23T00:44:21.633
> 
> 标签：iphone, ios

这个问题有另一个帖子，但没有一个解决方案有效。我的问题是我有几个需要更改图像的图像视图。如果我突然改变它们似乎很奇怪，所以我想知道是否有办法淡入新图像。

这是我设置其中一个 imageViews 的时候。

```
self.imageView1.image = [UIImage imageNamed:[NSString stringWithFormat:@"%@.jpg", [images objectAtIndex:newArray[0]]]]; 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T00:52:58.520

imageView 中的淡入淡出可以通过多种方式实现。如果您可以发布您的代码，（您如何在不淡入的情况下更改视图）其他人将能够建议最简单的方法

编辑：尝试像下面的代码一样为 alpha 设置动画：

```
self.imageView1.image = [UIImage imageNamed:[NSString stringWithFormat:@"%@.jpg", [images objectAtIndex:newArray[0]]]];
self.imgView1.alpha=0;
[UIView animateWithDuration:2.0
                      delay:0.1
                    options: UIViewAnimationCurveLinear
                 animations:^{
                    self.imgView1.alpha=1;
                 } 
                 completion:^(BOOL finished){
                     NSLog(@"Done!");
                 }]; 
```

您可以控制 animateWithDuration 和 delay 的值以适合您的应用

让我们知道它是否有效

# javascript - 如何使用 Gmail 构建的方法发送 Gmail 谈话消息

> ID：10273537
> 
> 赞同：3
> 
> 时间：2012-04-23T00:44:32.423
> 
> 标签：javascript, google-chrome-extension, gmail

我想创建一个谷歌浏览器扩展，除其他外，它将根据输入的内容修改聊天文本。我将在视频旁边添加一个按钮，呼叫，并在名称下方添加人员按钮，单击时将激活修改。我不想在页面上放置更多的脚本，所以我希望能够以 Gmail 在聊天框中按“返回”的方式发送消息。此外，我希望能够通过在聊天框中显示文本来显示聊天的两个人都在使用我的扩展程序，就像“此聊天已关闭记录”文本一样，并且如果双方都在使用它，可能会添加额外的东西聊天。我试图做的是模仿文本区域，当用户“发送”它时，抓住它并修改它，然后将其插入真实的并发送新文本。我可以更改文本，但似乎无法发送...

这是我到目前为止所拥有的，我将所有内容都包含在 setInterval 中以检查聊天框是否存在并向其中添加适当的内容：

```
var chatBtnClone = setInterval(function() {
    if ($("body").find(".nH .NG").length > 0) {  //if chat is active

        var clone = $("body").find(".nH .NG .NJ").first();
        if (clone.children()[0].className.indexOf("chat") < 0) { //if already added my class
            var clonned = clone.clone();
            var clonnedChd = clonned.children().first();
            clonnedChd.attr("title", "Start encrypted chat");
            clonnedChd.on('click', function() {
                console.log("clicked chatBtn!"); //make sure it works
                var self = $(this);
                if (self[0].className.indexOf("chatEncX") >= 0) { //toggle button pic 
                    self.removeClass('chatEncX').addClass('chatEnc');
                    self.attr("title", "Stop encrypted chat");
                } else {
                    self.removeClass('chatEnc').addClass('chatEncX');
                    self.attr("title", "Start encrypted chat");
                }
            });
            clone.parent().prepend(clonned);
            clonned.find('.NK').removeClass("NK-Y8").addClass("chatEncX");
        }

        var chatBoxs = $('body').find(".nn .AD");
        var chatArea = chatBoxs.first().find(".nH textarea"); //get chat textareas
        if (chatArea.length === 1) {
            var clonChatArea = chatArea.first().clone();
            clonChatArea.removeAttr("id");
            chatArea.first().parent().append(clonChatArea);
            // chatArea.first().hide();
            var chatTextDiv = chatBoxs.first().find(".jp .nH .nH").first();
            clonChatArea.focusin(function() {
                chatTextDiv.removeClass("gv").addClass("f7");
            });
            clonChatArea.focusout(function() {
                chatTextDiv.removeClass("f7").addClass("gv");
            });
            clonChatArea.on('keyup', function(event) {
                var self = this;
                //console.log(this.style.height); //make sure height it working

                if (self.scrollHeight === 38) {
                    self.style.overflowY = "hidden";
                    self.style.height = "36px";
                } else if (self.scrollHeight === 47) {
                    self.style.height = "54px";
                } else if (self.scrollHeight === 62) {
                    self.style.height = "72px";
                } else if (self.scrollHeight >= 77) {
                    self.style.height = "80px";
                    self.style.overflowY = "scroll";
                }

                if( event.keyCode === 13 && event.shiftKey ){
                    //regular, just insert a newline
                } else if (event.keyCode === 13) {
                    //grab text and modify then reinsert into real textarea
                    var chatTxt = $(this).val();
                    var chatHidden = chatBoxs.first().find(".nH textarea").first();
                    var chatEncTxt = Crypto.AES.encrypt(chatTxt, "pass"); //modify text
                    //console.log(chatEncTxt);
                    chatHidden.val(chatEncTxt);
                    chatHidden.focus();
                    chatHidden.trigger({ type : 'keypress', which : 13 }); //try to imitate the return key and send (NOT WORKING!!!)
                    // $(this).focus();
                }
            });
        }
    }
},150); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-13T09:53:36.100

这可能有点晚了，但如果其他人有兴趣，那么我通过执行以下操作来管理它：

```
var e = new Event("keypress");
e.keyCode = e.which = 13;
// :mc is an example textarea id, but the OP has the code for finding that already
document.getElementById(':mc').dispatchEvent(e); 
```

# r - 改进内存实验的 R 代码

> ID：10273540
> 
> 赞同：-3
> 
> 时间：2012-04-23T00:45:20.457
> 
> 标签：r

我正在为我的实验处理一个数据集，并试图找出有多少次试验导致参与者的错误行为。在我的表格（见下文）中，我在末尾添加了三列：prefix、corrfix 和 errfix（0 表示错误，数值表示正确操作）。我想首先查看每个参与者有多少次试验导致前缀列的操作不正确（即，该试验没有数值，表明他们没有执行正确的操作）。

```
 RECORDING_SESSION_LABEL CURRENT_FIX_INDEX identifier prefix corrfix errfix
1                     1091                 1         86      0       0      0
2                     1091                 2         86      0       0      0
3                     1091                 3         86   1229       0      0
4                     1091                 4         86      0       0      0
5                     1091                 5         86      0       0      0
6                     1091                 1        110      0       0      0
7                     1091                 2        110    764       0      0
8                     1092                 3         22    202       0    202
9                     1092                 4         22    120       0      0
10                    1092                 5         22      0       0      0
11                    1092                 6         22      0       0      0
12                    1092                 7         22      0       0      0
13                    1092                 8         22      0       0      0
14                    1092                 9         22    510       0      0
15                    1092                10         22    330       0      0
16                    1092                11         22      0       0     57 
```

我一直在编写代码，但是当我只想要没有数值的试验（每个参与者每行应该进行不同的试验）时，它会返回多行（同一个试验）我将不胜感激任何帮助或建议。我正在努力提高我的 R 技能。

```
 flag=0
  flag=1
  if(new[i,]$CURRENT_FIX_INDEX==1){
  flag=1
  }
  if (flag==1) {
  if(new[i,]$prefix==0){
  cbind(new$RECORDING_SESSION_LABEL, new$identifier)} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T01:25:46.343

仍然不确定你到底在追求什么。您似乎想查看 RECORDING_SESSION_LABEL 和标识符作为分组。因此，在您上面的数据框中，我们有 1091 个标签和 86 个标识符的 5 个观察值，然后是 1091 个标签和 110 个标识符的 2 个观察值。您想对 1091 和 86 的 5 个观测值求和，然后再对 1091 和 110 求和。如果总和不大于 0，我们标记并返回此 LABEL 和标识符。这是正确的，还是您只想查看所有 1091 标签作为一个整体，看看是否有除 0 以外的任何值？

代码 beloe 查看这三个组（正确吗？）：

```
$`1092.22`
   RECORDING_SESSION_LABEL CURRENT_FIX_INDEX identifier prefix corrfix errfix
8                     1092                 3         22    202       0    202
9                     1092                 4         22    120       0      0
10                    1092                 5         22      0       0      0
11                    1092                 6         22      0       0      0
12                    1092                 7         22      0       0      0
13                    1092                 8         22      0       0      0
14                    1092                 9         22    510       0      0
15                    1092                10         22    330       0      0
16                    1092                11         22      0       0     57

$`1091.86`
  RECORDING_SESSION_LABEL CURRENT_FIX_INDEX identifier prefix corrfix errfix
1                    1091                 1         86      0       0      0
2                    1091                 2         86      0       0      0
3                    1091                 3         86   1229       0      0
4                    1091                 4         86      0       0      0
5                    1091                 5         86      0       0      0

$`1091.110`
  RECORDING_SESSION_LABEL CURRENT_FIX_INDEX identifier prefix corrfix errfix
6                    1091                 1        110      0       0      0
7                    1091                 2        110    764       0      0 
```

编码：

```
error.count <- function(column){
    x <- rle(sort(column))
    ifelse(sum(x[[2]])==0, TRUE, FALSE)
}

outcome <- aggregate(prefix~RECORDING_SESSION_LABEL+identifier, dat, error.count)
outcome[outcome$prefix==1, ] #return just those Labels and identifiers with all zeros 
```

在这种情况下，您将不会得到任何返回，因为您没有任何适合这些情况的数据。我可能会建议进一步完善您提供的数据，这些数据将产生您试图识别的情况。

# android - 如何开发一个能够真正取代锁屏的应用程序？

> ID：10273547
> 
> 赞同：3
> 
> 时间：2012-04-23T00:46:46.680
> 
> 标签：android, root, lockscreen

> **可能重复：**
> [如何自定义 Android 的 LockScreen？](https://stackoverflow.com/questions/5829671/how-to-customize-androids-lockscreen)

如果设备有根，我该如何更换锁屏？（只是滑块屏幕，但保持安全措施）

不要使用像窗口标志关闭键盘保护这样的假方法。

# ruby-on-rails - 如何使用回形针检查文件是否等于目录中的另一个文件

> ID：10273548
> 
> 赞同：2
> 
> 时间：2012-04-23T00:46:47.360
> 
> 标签：ruby-on-rails, ruby, paperclip

我有一个 Rails 应用程序，可以在其中上传一首歌曲，我正在尝试将该歌曲与资产目录中的所有其他歌曲进行比较。如果歌曲相同，我想删除上传并将所有查询路由到主歌曲。

我正在考虑建立一个关联，其中主歌曲有许多用户歌曲上传，但默认情况下，用户关联的主歌曲 ID 为 nil。我将如何检查资产中的歌曲是否相等，以及如何删除歌曲并将请求路由到主歌曲。

这是我的 user_song_uploads 数据库：

```
class CreateUserSongUploads < ActiveRecord::Migration
  def change
    create_table :user_song_uploads do |t|
        t.integer :user_id
        t.has_attached_file :song
            :url => "/assets/user_song_uploads/:id/",
            :path =>  "#{rails.root}/assets/user_song_uploads/:id/",
      t.timestamps
      t.string :artist
      t.string :album
      t.string :title
    end
  end
end 
```

我的 master_song 数据库：

```
 t.has_attached_file :m_song
     :url => "/assets/master_songs/:id",
     :path =>  "#{rails.root}/assets/master_songs/:id", 
```

有任何想法吗？太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T02:55:35.090

文件级别比较：

制作文件的 md5/sha1 校验和并将它们保存在 db 中，下次上传时，上传完成时首先比较校验和，如果相同，只需链接它们。

这类似于 ZFS 文件系统重复数据删除。

# php - 如何在codeigniter中引用数据库连接？

> ID：10273550
> 
> 赞同：6
> 
> 时间：2012-04-23T00:47:08.117
> 
> 标签：php, mysql, codeigniter

如何在 CodeIgniter 的数据库处理程序对象上手动调用 PHP 数据库函数？如何检索连接（`$dbc`），或调用类似的函数`mysql_real_escape_string($dbc, $variable)`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T01:12:40.790

您可以调用任何 mysql 本机函数并访问 mysql 连接 ID。

请参阅[CodeIgniter 用户指南](https://ellislab.com/codeigniter/user-guide/database/call_function.html)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-09-29T17:50:51.780

`$this->db->conn_id`如果您在 CI 上下文中，将为您获取当前的连接链接对象。它将返回一个 mysqli 或 mysql 链接对象，您可以将其传递给类似函数`mysql_real_escape_string`或更新的 mysqli，这实际上需要链接对象。[来源](https://mmxgroup.net/2010/02/11/get-db-handler-in-codeigniter)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-01-10T12:19:58.813

最好使用 codeIgiter 的函数： `$this->db->escape()` , `$this->db->escape_str()` ,`$this->db->escape_like_str()`

该函数`mysql_real_escape_string()`现在已被弃用（参见： http: [//php.net/mysql_real_escape_string](http://php.net/mysql_real_escape_string)）。

而是使用`mysqli_real_escape_string`或`mysqli::real_escape_string`（参见语法：[http](http://www.php.net/manual/en/mysqli.real-escape-string.php) ://www.php.net/manual/en/mysqli.real-escape-string.php ）

# php - 什么时候应该在数组上使用isset()而不指定键？

> ID：10273555
> 
> 赞同：8
> 
> 时间：2012-04-23T00:49:12.123
> 
> 标签：php, arrays, language-features

我了解到`isset($array)`在检查特定密钥是否存在时不需要这样做，但是我也知道有一些理由在没有已知密钥的情况下检查是否`$array`已实例化。

例如这个：

```
foreach ($foo as $bar) {
    echo $bar;
} 
```

*PHP 注意：未定义变量：foo*
*PHP 警告：为 foreach() 提供的参数无效*

这样更好：

```
if (isset($foo)) {
    foreach ($foo as $bar) {
    echo $bar;
    }
} 
```

因为我在处理数据时经常使用数组，所以我想问一下是否还有其他一些情况我应该检查整个数组`isset()`？或者我应该坚持检查每一个`$array[$key]`我将要使用的东西吗？这涉及到这样做是否有任何优点或缺点的问题：

```
if (isset($foo[0])) {
    foreach ($foo as $bar) {
        // noop
    }
} 
```

而不是这个：

```
if (isset($foo)) {
    foreach ($foo as $bar) {
        // noop
    }
} 
```

### 那么，我应该使用if is known`isset($array)`代替吗？`isset($array[$key])``$key`

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-23T01:01:28.543

在 PHP 中，`isset()`是一种特殊的形式，而不是函数；当您调用 时`isset($ary[$index])`，`$ary`不必先设置其本身。即使使用`E_STRICT`，调用也不会产生警告，因为`isset`实际上并没有尝试访问`$ary[$index]`; 它尽可能确定`$ary`未设置并返回`false`。因此，您无需先检查数组即可应用于`isset`元素。

您的问题表明您已经知道这一点，并且想知道您是否有理由这样做。我唯一能想到的就是效率：如果您要检查数组中是否存在大量键，您可以通过首先检测数组本身何时未设置并跳过所有键来节省一些工作在这种情况下，单独的密钥检查。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-23T00:52:10.990

如果您想知道数组是否已定义，请使用`isset($array)`.

如果您想知道是否定义了特定键，请使用`isset($array[$key])`.

例如，这是完全有效的：

```
$foo = array();
foreach($foo as $bar) {
    // never called because $foo is an empty array
} 
```

# javascript - 仅当 mouseenter 结束时才离开

> ID：10273561
> 
> 赞同：1
> 
> 时间：2012-04-23T00:50:40.797
> 
> 标签：javascript, jquery

使用以下代码：

```
$('someelement').hover(
    function() {
        console.log('mouseenter begin');
        setTimeout(function() {
            console.log('mouseenter ends');
        }, 2000);
    },
    function() {
        console.log('mouseleave begin');
        setTimeout(function() {
            console.log('mouseleave ends');
        }, 2000);
    }
) 
```

如果我有时（或不到 2 秒）进入和离开 div，我的控制台会得到：

```
mouseenter begin
mouseleave begin
mouseenter ends
mouseleave ends 
```

我希望 mouseleave 仅在`mouseenter`结束时执行，但不知道如何。

```
mouseenter begin
mouseenter ends
mouseleave begin
mouseleave ends 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T00:56:45.727

你可以创建一个队列...

[http://jsfiddle.net/FHPGS/](http://jsfiddle.net/FHPGS/)

```
var queue = []

$('someelement').hover(
    function() {
        queue.push('mouseenter begin');
        setTimeout(function() {
            var item = queue.shift();
            if (item)
                console.log(item)
            console.log('mouseenter ends');
        }, 2000);
    },
    function() {
        queue.push('mouseleave begin');
        setTimeout(function() {
            var item = queue.shift();
            if (item)
                console.log(item)
            console.log('mouseleave ends');
        }, 2000);
    }
) 
```

# java - 管道 unix 命令未在 java 程序中执行

> ID：10273563
> 
> 赞同：1
> 
> 时间：2012-04-23T00:51:08.037
> 
> 标签：java, ps

我正在尝试使用以下命令在 java 程序中使用其 pid 获取特定进程的内存使用情况 ps -eo pid,pmem,comm | grep java | awk '{打印 ($2)}'

虽然此命令适用于 unix 终端，但它在 java 中不起作用即使我运行另一个 java 程序（用 java 进程填充 ps 表），我也会继续得到 null 结果。

```
String[] PipedCommand = {
                        "/bin/bash",
                        "-c",
                        "ps -eo pid,pmem,comm | grep java | awk '{print ($2)}'"
            };
            Process command1=Runtime.getRuntime().exec(PipedCommand);
            command1.waitFor(); 
            BufferedReader reader1=new BufferedReader(new InputStreamReader(command.getInputStream())); 
            String line1=reader1.readLine();
            if(line1 != null)
            {
                System.out.println(" Memory percentage is "+line1);
            } 
```

如果有人能告诉我这种方法是否有问题，我将不胜感激

# php - Paypal API“超时处理请求”错误

> ID：10273564
> 
> 赞同：1
> 
> 时间：2012-04-23T00:51:19.160
> 
> 标签：php, paypal, paypal-sandbox

我在使用 Paypal Sandbox 时遇到“超时处理请求”错误

我使用了“SetExpressCheckout”，它工作正常，但是当我使用收到的令牌处理“CreateRecurringPaymentsProfile”时，出现超时错误。

我创建了自定义类，但总体代码类似于此页面上的代码[https://www.x.com/paypal-apis-createrecurringpaymentsprofile-php-5.3/nvp](https://www.x.com/paypal-apis-createrecurringpaymentsprofile-php-5.3/nvp)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T01:31:16.027

我以前遇到过这个问题。如果这是我正在考虑的同一个问题，那是因为 Payal 有时会在您使用的浏览器的 Cookie 中出现混乱。在另一个浏览器中尝试测试，它会完全清除您的缓存，然后重试。如果这是我正在考虑的相同问题，那么应该可以解决它。

# java - 试图将 sdCard 上的文件读取到变量中

> ID：10273565
> 
> 赞同：1
> 
> 时间：2012-04-23T00:51:53.080
> 
> 标签：java, android, file, filereader, file-read

我有这个函数，当我调用它时，它不会返回任何东西。

```
public String getfileFromSDCard(String filename){//get the file
    String text;
    text = "";

    File root = new File(Environment.getExternalStorageDirectory(), "Notes");
    if (!root.exists()) {
        root.mkdirs();
    }
    File file = new File(root,"file.txt");
    try {
        BufferedReader br = new BufferedReader(new FileReader(file));
        String str;

        while ((str = br.readLine()) != null) {
            text = text + str;
        }
        br.close();
    }
    catch (IOException e) {
        e.printStackTrace();
    }
    Toast.makeText(this, text, Toast.LENGTH_SHORT).show();
    return text;
} 
```

我是否需要向我的 android 清单添加任何权限，除了

...uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" ...（我在代码中写了这一行）

我已经添加了这个并且正在运行，因为我可以轻松编写一个文件，但之后我无法读取它

这就是我从 onCreate 调用函数的方式

```
 TextView countDisplay = new TextView(this);
    CreatefiletoSDCard("testnumberone.txt","22222fkdf sdjf hjsdf sdj fsdf ");
    countDisplay.setText(getfileFromSDCard("testnumberone.txt"));

    this.setContentView(countDisplay); 
```

ps： CreatefiletoSDCard() 有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T00:57:52.977

尽管您在方法中传递了一个`filename`参数`getfileFromSDCard()`，但您似乎已经将您正在读取的实际文件（名称）硬编码到`file.txt`. 根据您用于创建测试文件的文件名猜测，错误可能是您尝试从不存在的文件中读取，无论您实际传递给方法的名称是什么。

换句话说，您可能想要更改以下行：

```
File file = new File(root,"file.txt"); 
```

到：

```
File file = new File(root,filename); 
```

# java - 如何使用 FontMetrics？

> ID：10273568
> 
> 赞同：0
> 
> 时间：2012-04-23T00:52:32.660
> 
> 标签：java, graphics, awt, jpanel, fontmetrics

有人可以向我解释如何在 JPanel 中使用 FontMetrics 吗？使用 drawString() 在 JPanel 上绘制字符串时，我需要计算出字符串的宽度和高度（以像素为单位）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-03-17T09:55:22.767

您可以将 Graphics 对象定义为方法的输入变量。或者，您可以使用 JFrame 或 JPanel 的 getFontMetrics() 方法。

例如获取字符的宽度：

```
JFrame frame = new JFrame();
int charWidth = frame.getFontMetrics( frame.getFont() ).charWidth() ; 
```

# hadoop - mapreduce：可以减少阶段“发射”吗？

> ID：10273573
> 
> 赞同：0
> 
> 时间：2012-04-23T00:53:18.210
> 
> 标签：hadoop, mapreduce

假设我们正在节点上进行处理。等待处理的键是 2,1,3。在预处理中，键将被排序为 1,2,3。处理顺序为：

开始处理 1
处理 1 完成
开始处理 2
处理 2 完成
开始处理 3
处理 3 完成

在处理密钥 1 时，我可以用密钥 2 发出一些东西吗？在处理密钥 2 时，将处理发出的东西。

我认为这与并行处理的概念没有冲突，因为同一节点上的键将按顺序处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T22:34:51.857

不，因为分区步骤已经发生，所以您的 reduce 步骤的任何输出都将转到目标文件夹，而不是返回输入文件夹

分区输入 => 减速器 => 输出

您始终可以使用身份映射器和相同的减速器运行第二个 mapreduce 作业。

# java - java 将间歇性地无法解析 Linux 上的符号链接

> ID：10273575
> 
> 赞同：12
> 
> 时间：2012-04-23T00:53:33.953
> 
> 标签：java, linux, permissions, openjdk

我正在尝试解析文件夹树中所有文件的规范路径，但由于某种原因它无法解析它们（并且间歇性地，JVM 安全代码将在 FilePermission 中正确解析符号链接并导致安全错误）。

环境：

```
$ java -version
java version "1.6.0_23"
OpenJDK Runtime Environment (IcedTea6 1.11pre) (6b23~pre11-0ubuntu1.11.10.2)
OpenJDK 64-Bit Server VM (build 20.0-b11, mixed mode) 
```

系统中一个已知的符号链接是 /usr/share/java/gnome-java-bridge.jar：

```
$ ls -l /usr/lib/jvm/java-6-openjdk/jre/lib/ext/gnome-java-bridge.jar
lrwxrwxrwx 1 root root 50 2012-02-24 13:39 /usr/lib/jvm/java-6-openjdk/jre/lib/ext/gnome-java-bridge.jar -> ../../../../../../share/java/gnome-java-bridge.jar 
```

以下代码应解析此已知符号链接：

```
String symlinkedFilePath =
    "/usr/lib/jvm/java-6-openjdk/jre/lib/ext/gnome-java-bridge.jar";

File symlinkedFile = new File(symlinkedFilePath);

System.out.println(symlinkedFile.getAbsolutePath());
System.out.println(symlinkedFile.getCanonicalPath()); 
```

但产生：

```
/usr/lib/jvm/java-6-openjdk/jre/lib/ext/gnome-java-bridge.jar
/usr/lib/jvm/java-6-openjdk/jre/lib/ext/gnome-java-bridge.jar 
```

进一步的测试，使用以下代码，有时会返回 true 进行权限检查，但有时会返回 false：

```
String symlinkedFilePath =
    "/usr/lib/jvm/java-6-openjdk/jre/lib/ext/gnome-java-bridge.jar";

File symlinkedFile = new File(symlinkedFilePath);

FilePermission recursivePermission = new FilePermission(
    symlinkedFile.getParentFile().getParent() + "/-", "read");

FilePermission filePermission = new FilePermission(
    symlinkedFile.getAbsolutePath(), "read");

System.out.println(recursivePermission);
System.out.println(filePermission);
System.out.println(
    "Can read symlink: " + recursivePermission.implies(filePermission)); 
```

典型的结果是：

```
(java.io.FilePermission /usr/lib/jvm/java-6-openjdk/jre/lib/- read)
(java.io.FilePermission /usr/lib/jvm/java-6-openjdk/jre/lib/ext/gnome-java-bridge.jar read)
Can read symlink: true 
```

但是在调试时，如果我逐步在目标文件上创建 FilePermission，则在内部将路径解析为符号链接，并且输出结果为：

```
(java.io.FilePermission /usr/lib/jvm/java-6-openjdk/jre/lib/- read)
(java.io.FilePermission /usr/lib/jvm/java-6-openjdk/jre/lib/ext/gnome-java-bridge.jar read)
Can read symlink: false 
```

问题是，在实际发生权限检查的应用程序上下文中，符号链接始终由 FilePermission 对象解析，但从来没有通过我自己对 file.getCanonicalPath() 的调用来解析，如上所示。

这对任何人都有意义吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-18T13:30:23.680

我的一位同事在 OpenJDK 6u23 上确认了这个问题，但在任何之前或之后的版本上都没有。话虽如此，既然问题已经

A）以系统属性的形式解决

```
-Dsun.io.useCanonCaches=false 
OR
-Dsun.io.useCanonPrefixCache=false 
```

B）似乎在以后的构建中得到解决（u24）

似乎没有什么动力去深入挖掘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T07:30:07.343

在 Unix 中，符号链接是一个“特殊”文件，具有自己的权限。

您对符号链接具有读取权限这一事实并不意味着您将拥有链接文件的权限。

我的猜测是您正在以可以读取符号链接但不能读取实际文件的用户身份运行程序。

进入调试模式时，您会触发对某些方法的调用，这些方法会更改 FilePermission 对象的内部状态，使其解析为实际文件，从而返回“false”。

当您获得“真实”时，它只是告诉您可以阅读符号链接。

在您的位置，我将检查此文件的权限： - /usr/share/java/gnome-java-bridge.jar

和两个目录： - /usr/share - /usr/share/java

# python - Python：循环通过命名空间中的列表调用函数

> ID：10273576
> 
> 赞同：1
> 
> 时间：2012-04-23T00:53:44.030
> 
> 标签：python, loops, dynamic, dictionary, namespaces

```
# single call to a dict in a namespace
print namespaced.dict1
print namespaced.dict2

# dynamic list of dict names to be used
othernamespace.list = ['dict1', 'dict2']

for element in othernamespace.list:
    # a string of what would be a valid dict
    dynamicDict = 'namespaced.'+element
    print dynamicDict 
```

背景资料：

在一个模块中，我从一个 ini 文件中读取并将一些值（dict 标题）放入一个列表中。然后在主脚本中，我想遍历该列表并打印每个字典的内容。字典是从另一个模块导入的。

前两个 print 语句打印 dict 的内容。以下两个打印语句打印字典名称（字符串）。我怎样才能让他们打印字典内容而不是名称？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T00:57:09.400

[`getattr()`](http://docs.python.org/library/functions.html#getattr)

# java - 以随机方式读取行，然后以随机顺序打印数字

> ID：10273584
> 
> 赞同：1
> 
> 时间：2012-04-23T00:55:07.310
> 
> 标签：java

下面是文本文件，我想通过以某种随机顺序打印行中的每个数字来以某种随机方式读取每一行。我可以逐行读取每一行，然后按顺序打印与每一行对应的数字，但是有什么方法可以以某种随机方式读取行，以便我可以以某种随机顺序打印所有数字。

```
 Line1   1  1116    2090    100234  145106  76523
 Line2   1  10107   1008    10187
 Line3   1  10107   10908   1109 
```

任何建议将不胜感激。下面是我编写的代码，它将按顺序读取该行。

```
BufferedReader br = null;

    try {
        String sCurrentLine;

        br = new BufferedReader(new FileReader("C:\\testing\\Test.txt"));

        while ((sCurrentLine = br.readLine()) != null) {
            String[] s = sCurrentLine.split("\\s+");
            for (String split : s) {
                if(split.matches("\\d*"))
                System.out.println(split);
            }
        }

    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        try {
            if (br != null)br.close();
        } catch (IOException ex) {
            ex.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T00:58:53.667

你不能“以某种随机的方式阅读一行”（嗯，你可以，但这会很可怕！）

我建议将所有行按顺序读入一个集合，然后一次（随机）挑选出 1 行，直到集合为空。

您可以以类似的方式单独处理每一行：将所有数字解析为一个集合，然后将它们随机拉出。

例如（伪代码）

```
ArrayList lines = new ArrayList()
while (! EOF)
    lines.append(readLine)

while(lines.size() > 0)
    int index = Random(0, lines.size)
    line = lines[index];
    lines.remove(index)
    processLine(line)
    // processLine does a similar thing to the above but with numbers
    // on a line rather than lines in a file. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T02:01:59.217

如果你想重新排列每一行的顺序，你可以使用 Collections.shuffle：

```
while ((sCurrentLine = br.readLine()) != null) {
    List<String> s = Arrays.asList(sCurrentLine.split("\\s+"));
    Collections.shuffle(s);
    for (String split : s) {
        if (split.matches("\\d*")) {
            System.out.println(split);
        }
    }
} 
```

这将按顺序打印行，但每行中的数字将被打乱。

如果要打乱行的顺序，只需将每一行添加到一个`ArrayList<List<String>>`，打乱 ArrayList，然后打乱每一行：

```
ArrayList<List<String>> allLines = new ArrayList<List<String>>();
while ((sCurrentLine = br.readLine()) != null) {
    allLines.add(Arrays.asList(sCurrentLine.split("\\s+")));
    Collections.shuffle(allLines);
    for (List<String> s : allLines) {
        Collections.shuffle(s);
        for (String split : s) {
            if(split.matches("\\d*"))
            System.out.println(split);
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T01:19:52.603

将溢出的变量存储到您希望在文本文件中收集数字的类型的数组列表或数组中

# java - 如果我的班级已经在扩展另一个班级......如何使用 unicastremoteobject？

> ID：10273586
> 
> 赞同：3
> 
> 时间：2012-04-23T00:55:26.367
> 
> 标签：java, rmi

我有一个问题，我的`Server`班级已经在扩展另一个班级。我应该如何使用[`UniCastRemoteObject`](http://docs.oracle.com/javase/7/docs/api/java/rmi/server/UnicastRemoteObject.html)？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T01:27:12.893

只要打电话`UnicastRemoteObject.exportObject()`。这将导出对象，就像在您的类扩展时调用 super() 一样`UnicastRemoteObject`。

# javascript - 随机图像两个位置相同的集合

> ID：10273595
> 
> 赞同：1
> 
> 时间：2012-04-23T00:57:35.900
> 
> 标签：javascript

所以基本上我正在寻找的是如何拥有一个随机图像 javascript 代码，但图像位于两个不同的 div 中，但我希望随机图像来自同一个数组。

我计划今年夏天上JS课，所以我不必再问了，因为我觉得这应该很简单......

目前我只是在两个不同的位置使用来自 javascript kit 的代码：

```
<script language="JavaScript">
<!--

/*
Random Image Script- By JavaScript Kit (http://www.javascriptkit.com) 
Over 400+ free JavaScripts here!
Keep this notice intact please
*/

function random_imglink(){
    var myimages=new Array()
    //specify random images below. You can have as many as you wish
    myimages[1]="image1.gif"
    myimages[2]="image2.gif"
    myimages[3]="image3.gif"
    myimages[4]="image4.gif"
    myimages[5]="image5.gif"
    myimages[6]="image6.gif"

    var ry=Math.floor(Math.random()*myimages.length)
    if (ry==0)ry=1
    document.write('<img src="'+myimages[ry]+'" border=0>')
}
random_imglink()
//-->
</script> 
```

但我希望实现的是：

```
<script language="JavaScript">
<!--

/*
Random Image Script- By JavaScript Kit (http://www.javascriptkit.com) 
Over 400+ free JavaScripts here!
Keep this notice intact please
*/

function random_imglink(){
    var myimages=new Array()
    //specify random images below. You can have as many as you wish
    myimages[1]="image1.gif"
    myimages2[1]="image1a.gif"
    myimages[2]="image2.gif"
    myimages2[2]="image2a.gif"

    var ry=Math.floor(Math.random()*myimages.length)
    if (ry==0) ry=1
    document.write('<img src="'+myimages[ry]+'" border=0>')
}
random_imglink()
//-->
</script> 
```

DIVS 中的渲染代码

```
<div class="one"><img src="img1.gif"></div>
<div class="two"><img src="img1a.gif"></div> 
```

刷新

```
<div class="one"><img src="img2.gif"></div>
<div class="two"><img src="img2a.gif"></div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T01:26:02.637

这是一种特殊的方法。

我首先确定我计划使用的所有变量：

```
var rIndex1, rIndex2, 
    oContainer1, oContainer2, 
    aImages; 
```

现在我为 DOM 容器分配初始引用，并填充我的 images 数组：

```
oContainer1 = document.getElementById("left");
oContainer2 = document.getElementById("right");
aImages = ['http://placekitten.com/200/200','http://placekitten.com/201/201',
           'http://placekitten.com/202/202','http://placekitten.com/203/203',
           'http://placekitten.com/204/204','http://placekitten.com/205/205']; 
```

因为我会生成几次随机索引值，所以我为此逻辑创建了一个简单的函数：

```
function rIndex ( iMax ) {
  return Math.floor( Math.random() * iMax );
} 
```

为了一遍又一遍地查看效果，我在一个匿名函数中运行逻辑，存储在每秒运行的间隔内。当然，您可以将其包装在一个命名函数中，以便调用一次。

```
setInterval(function(){ 
```

为我的索引变量设置初始随机值。

```
 rIndex1 = rIndex( aImages.length );
  rIndex2 = rIndex( aImages.length ); 
```

我们不希望两个图像相同，所以只要我们选择了相同的值，让我们为第二个索引选择另一个索引值。

```
 while ( rIndex2 == rIndex1 ) rIndex2 = rIndex( aImages.length ); 
```

最后，我用新的图像元素覆盖容器的 innerHTML 属性。

```
 oContainer1.innerHTML = '<img src="%s" />'.replace( /%s/, aImages[ rIndex1 ] );
  oContainer2.innerHTML = '<img src="%s" />'.replace( /%s/, aImages[ rIndex2 ] );

}, 1000); 
```

演示：http: [//jsbin.com/ubuxoj/edit#javascript,html](http://jsbin.com/ubuxoj/edit#javascript,html)

这可以稍微改进一下。例如，当`aImages[2]`当前显示在 中时`oContainer2`，它可能会在下一次重新应用。您可以检查以确保您只选择了当前显示在容器中的图像以外的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T01:26:04.180

如果您的目的是可扩展的（例如，如果您不知道将拥有多少张图像），我通常建议附加到 DOM 并`<div/>`随机创建，并循环创建 div，这样您就不会t 需要手动创建它们。但是，如果不是这种情况，通过使用您使用的模式，您可以执行以下操作：

```
<script>
var random = Math.random();
function random_imglink(arr){
    var ry = Math.floor(random*arr.length);
    document.write(
        '<img src="'+arr[ry]+'" border=0>'
    );
}  
var myimages = [
       "image1.gif", "image2.gif"
      ],
        myimagesA = [
       "image1a.gif", "image2a.gif"
      ];
</script>
<div class="one"><script>random_imglink(myimages);</script></div>
<div class="two"><script>random_imglink(myimagesA);</script></div> 
```

我们首先制作一个随机数，我们会在此页面加载时在脚本的整个生命周期中重复使用该随机数。然后我们定义写入函数，然后使我们的 2 个数组可用，以便它们可以被 div 中的函数调用引用。如果没有更多细节，很难确切地知道你想要什么，但希望这会给你一些想法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T01:08:26.903

对于您想要做的事情，我看不出将它们存储在数组中并做复杂的事情来获取它们的意义。

如果 URL 路径相同，则无需从数组中选择它们：

```
function refreshImages() {
    var max = 10;
    var rand = (Math.floor(Math.random() * max) + 1); //1-10
    var src1 = "http://example.com/image" + rand + ".gif";
    var src2 = "http://example.com/image" + rand + "a.gif";

    document.getElementById("div1").innerHTML = "<img src='" + src1 + "' />";
    document.getElementById("div2").innerHTML = "<img src='" + src2 + "' />";
}

window.onload = function() {//need to wait until the divs are loaded
    refreshImages();
}​ 
```

并在您的 HTML 中：

```
<div id="div1"></div>
<div id="div2"></div> 
```

**注意：**我添加`+1`到`rand`是因为在您的示例中您从 开始`image1`，如果您希望从 开始`image0`，只需删除`+1`并且可能性范围将更改为`0-9`

[jsFiddle demo](http://jsfiddle.net/qJ9ee/2/)（因为图片不存在，需要看源码）

# mysql - 另一个表中不存在一对值的MySQL查询

> ID：10273602
> 
> 赞同：1
> 
> 时间：2012-04-23T00:59:10.643
> 
> 标签：mysql

我正在尝试执行一个 SELECT 查询，该查询仅在第三个表中不存在某些数据时才从两个表中获取数据。以下是三张表：

博客

```
id   |   blog_name 
```

精选提要

```
id   |   blog_id 
```

订阅

```
id   |   member_id   |   blog_id 
```

我想返回 Featured Feeds 表中列出的那些的 blog_id 和 blog_name，但排除用户 (member_id) 在 Subscriptions 表中已经订阅的 Featured Feeds。这是我到目前为止的查询（使用 3 作为 member_id - 请注意表名与上面略有不同）：

```
SELECT featured_feeds.blog_id, featured_feeds.category_id, blogs.blog_name FROM featured_feeds LEFT JOIN blogs ON featured_feeds.blog_id = blogs.blog_id LEFT JOIN subscriptions ON subscriptions.blog_id = featured_feeds.blog_id WHERE subscriptions.blog_id != '3' ORDER BY blogs.blog_name ASC 
```

如果另一个用户订阅了相同的订阅源，则此查询不会排除用户订阅的精选订阅源。例如，如果 Subscriptions 表有以下行：

```
1   |   3   |   4
2   |   2   |   4 
```

如果 blog_id 4 列在特色提要中，由于上面的第二行数据，我的查询仍将返回该 blog_id。我需要使用 GROUP 吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T01:11:46.183

```
SELECT b.id, b.blog_name
FROM blogs b
INNER JOIN featured f on f.blog_id = b.id
WHERE b.id NOT IN (SELECT id FROM subscriptions WHERE member_id = 3) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T01:12:25.047

做一个外部左连接，省略匹配的结果。

```
SELECT * FROM `featured` f
LEFT OUTER JOIN `subscription` s
ON f.blog_id = s.blog_id
WHERE s.id IS null 
```

# c# - 如何在列表框中显示文件名但使用 openfiledialog 保留相对路径？

> ID：10273603
> 
> 赞同：1
> 
> 时间：2012-04-23T00:59:20.560
> 
> 标签：c#, listbox, openfiledialog

我正在制作一个程序，用户需要在其中加载多个文件。但是，在`ListBox`我只需要显示他们加载的文件的文件名但仍然能够使用加载的文件。所以我想隐藏完整路径。这就是我将文件加载到`ListBox`现在的方式，但它显示了整个路径：

```
private void browseBttn_Click(object sender, EventArgs e)
{
    OpenFileDialog OpenFileDialog1 = new OpenFileDialog();
    OpenFileDialog1.Multiselect = true;
    OpenFileDialog1.Filter = "DLL Files|*.dll";
    OpenFileDialog1.Title = "Select a Dll File";
    if (OpenFileDialog1.ShowDialog() == System.Windows.Forms.DialogResult.OK)
    {
        dllList.Items.AddRange(OpenFileDialog1.FileNames);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T01:26:50.303

```
// Set a global variable to hold all the selected files result
List<String> fullFileName;

// Browse button handler
    private void button1_Click(object sender, EventArgs e)
    {
        OpenFileDialog OpenFileDialog1 = new OpenFileDialog();
        OpenFileDialog1.Multiselect = true;
        OpenFileDialog1.Filter = "DLL Files|*.dll";
        OpenFileDialog1.Title = "Seclect a Dll File";
        if (OpenFileDialog1.ShowDialog() == System.Windows.Forms.DialogResult.OK)
        {
            // put the selected result in the global variable
            fullFileName = new List<String>(OpenFileDialog1.FileNames);

            // add just the names to the listbox
            foreach (string fileName in fullFileName)
            {
                dllList.Items.Add(fileName.Substring(fileName.LastIndexOf(@"\")+1));
            }

        }
    }

    // handle the selected change if you wish and get the full path from the selectedIndex.
    private void dllList_SelectedIndexChanged(object sender, EventArgs e)
    {
        // check to make sure there is a selected item
        if (dllList.SelectedIndex > -1)
        {
            string fullPath = fullFileName[dllList.SelectedIndex];

            // remove the item from the list
            fullFileName.RemoveAt(dllList.SelectedIndex);
            dllList.Items.Remove(dllList.SelectedItem);
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T01:47:21.953

您可以使用in提取`fileName`绝对路径的`static Class Path``System.IO namespace`

```
//returns only the filename of an absolute path.

Path.GetFileName("FilePath"); 
```

# python - 合并两个以上子查询的有效查询

> ID：10273604
> 
> 赞同：4
> 
> 时间：2012-04-23T00:59:26.937
> 
> 标签：python, postgresql, psycopg2

我有一个数据库

```
books          (primary key: bookID)
characterNames (foreign key: books.bookID) 
locations      (foreign key: books.bookID) 
```

字符名称和位置的文本位置保存在相应的表中。
我正在使用 psycopg2 编写 Pythonscript，查找书中给定字符名称和位置的所有出现。我只想要书中的出现，同时找到角色名称和位置。
[在这里](https://stackoverflow.com/q/10036645/1315186)，我已经有了一个搜索一个位置和一个字符的解决方案：

```
WITH b AS (  
    SELECT bookid  
    FROM   characternames  
    WHERE  name = 'XXX'  
    GROUP  BY 1  
    INTERSECT  
    SELECT bookid  
    FROM   locations  
    WHERE  l.locname = 'YYY'  
    GROUP  BY 1  
    )  
SELECT bookid, position, 'char' AS what  
FROM   b  
JOIN   characternames USING (bookid)  
WHERE  name = 'XXX'  
UNION  ALL  
SELECT bookid, position, 'loc' AS what  
FROM   b  
JOIN   locations USING (bookid)  
WHERE  locname = 'YYY'  
ORDER  BY bookid, position; 
```

CTE 'b' 包含所有 bookid，其中出现了字符名称 'XXX' 和位置 'YYY'。

现在我还想知道搜索 2 个地点和一个名称（或分别搜索 2 个名称和一个地点）。如果所有搜索的实体都必须出现在一本书中，这很简单，但是这又如何：
搜索：Tim, Al, Toolshop 结果：书籍包括
(Tim, Al, Toolshop) 或
(Tim, Al) 或
(Tim, Toolshop) 或
(铝，工具店）

该问题可能会在 4、5、6...条件下重复出现。
我想 INTERSECTing 更多子查询，但这行不通。
相反，我会将找到的 bookID 合并，将它们分组并选择 bookid 的出现不止一次：

```
WITH b AS (  
    SELECT bookid, count(bookid) AS occurrences  
    FROM  
        (SELECT DISTINCT bookid  
        FROM characterNames  
        WHERE name='XXX'  
        UNION  
        SELECT DISTINCT bookid  
        FROM characterNames  
        WHERE name='YYY'  
        UNION  
        SELECT DISTINCT bookid  
        FROM locations  
        WHERE locname='ZZZ'  
        GROUP BY bookid)  
    WHERE occurrences>1) 
```

我认为这可行，目前无法测试，但这是最好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T01:18:25.290

对一般情况使用计数的想法是合理的。不过，对语法进行了一些调整：

```
WITH b AS (  
   SELECT bookid
   FROM  (
      SELECT DISTINCT bookid  
      FROM   characterNames  
      WHERE  name='XXX'  

      UNION ALL  
      SELECT DISTINCT bookid  
      FROM   characterNames  
      WHERE  name='YYY'  

      UNION ALL
      SELECT DISTINCT bookid  
      FROM   locations  
      WHERE  locname='ZZZ'  
      ) x
   GROUP  BY bookid
   HAVING count(*) > 1
   )
SELECT bookid, position, 'char' AS what
FROM   b
JOIN   characternames USING (bookid)
WHERE  name = 'XXX'

UNION  ALL
SELECT bookid, position, 'loc' AS what
FROM   b
JOIN   locations USING (bookid)
WHERE  locname = 'YYY'
ORDER  BY bookid, position; 
```

### 笔记

*   使用`UNION ALL`(not `UNION`) 保留子查询之间的重复项。在这种情况下，您希望它们能够计算它们。

*   子查询应该产生不同的值。它以`DISTINCT`您拥有的方式工作。您可能想尝试一下`GROUP BY 1`，看看它是否表现更好（我不希望它这样做。）

*   `GROUP BY`必须走出子查询。它只会应用于最后一个子查询，并且`DISTINCT bookid`已经没有任何意义。

*   检查一本书是否有多个点击必须进入一个`HAVING`子句：

    ```
     HAVING count(*) > 1 
    ```

    您不能在`WHERE`子句中使用聚合值。

* * *

### 在一张桌子上组合条件

您不能*简单地*将多个条件组合在一张表上。您将如何计算发现的数量？但是有一种更复杂的方法。可能会或可能不会提高性能，您必须进行测试（使用[`EXPLAIN ANALYZE`](http://www.postgresql.org/docs/current/interactive/sql-explain.html)）。这两个查询都需要对表至少进行两次索引扫描`characterNames`。至少它缩短了语法。

考虑我如何计算点击次数`characterNames`以及我如何`sum(hits)`在外部更改为`SELECT`：

```
WITH b AS (  
   SELECT bookid
   FROM  (
      SELECT bookid
           , max((name='XXX')::int)
           + max((name='YYY')::int) AS hits
      FROM   characterNames  
      WHERE  (name='XXX'
           OR name='YYY')
      GROUP  BY bookid

      UNION ALL
      SELECT DISTINCT bookid, 1 AS hits  
      FROM   locations  
      WHERE  locname='ZZZ'  
      ) x
   GROUP  BY bookid
   HAVING sum(hits) > 1
   )
... 
```

将 a`boolean`转换`integer`为`0`for`FALSE`和`1`for `TRUE`。这有帮助。

* * *

### EXISTS 更快

骑自行车去公司时，这件事一直在我的后脑勺上踢。我有理由相信这个查询可能会更快。请试一试：

```
WITH b AS (  
   SELECT bookid

        , (EXISTS (
            SELECT *
            FROM   characterNames c
            WHERE  c.bookid = b.bookid
            AND    c.name = 'XXX'))::int
        + (EXISTS (
            SELECT *
            FROM   characterNames c
            WHERE  c.bookid = b.bookid
            AND    c.name = 'YYY'))::int AS c_hits

        , (EXISTS (
            SELECT *
            FROM   locations l
            WHERE  l.bookid = b.bookid
            AND    l.locname='ZZZ'))::int AS l_hits
   FROM   books b  
   WHERE  (c_hits + l_hits) > 1
   )
SELECT c.bookid, c.position, 'char' AS what
FROM   b
JOIN   characternames c USING (bookid)
WHERE  b.c_hits > 0
AND    c.name IN ('XXX', 'YYY')

UNION  ALL
SELECT l.bookid, l.position, 'loc' AS what
FROM   b
JOIN   locations l USING (bookid)
WHERE  b.l_hits > 0
AND    l.locname = 'YYY'
ORDER  BY 1,2,3; 
```

*   `EXISTS`半连接可以在第一次匹配时停止执行。由于我们只对 CTE 中全有或全无的答案感兴趣，因此这可能会更快地完成这项*工作*。

*   这样我们也不需要聚合（没有`GROUP BY`必要）。

*   我还记得是否找到了*任何*字符或位置，并且只重新访问具有实际匹配项的表。

# android - Android 文件资源管理器 - Eclipse

> ID：10273605
> 
> 赞同：0
> 
> 时间：2012-04-23T00:59:31.763
> 
> 标签：android, file

我在 Eclipse 中将数据内部保存到手机中，我被告知要保存到的文件位于此处。我尝试通过双击文件来打开文件以查看保存的数据，但什么也没有出现。我究竟做错了什么？

![在此处输入图像描述](../Images/7d156a80277d6e606104deba015bc2eb.png)

我正在尝试检查它是否正确保存到文件中。我正在尝试验证它是否在此处保存文本，因为我不确定它在哪里保存它。

我试过拉它，并将它保存到我的桌面，但我得到的只是这个错误：

```
Failed to pull selection
(null) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T02:41:29.650

DDMS 文件资源管理器看起来像一个 Windows 文件资源管理器，因此您认为您应该只是单击并拖动它们等等。

不幸的是，事实并非如此。它看起来像那样，但事实并非如此。

从[**使用 DDMS**页面](http://developer.android.com/guide/developing/debugging/ddms.html)我们发现：

> 要使用模拟器或设备的文件系统：
> 
> 在“设备”选项卡中，选择要查看其文件系统的模拟器。要从设备复制文件，请在文件资源管理器中找到该文件，然后单击“拉取文件”按钮。要将文件复制到设备，请单击文件资源管理器选项卡上的推送文件按钮。

也就是说，您必须使用按钮将文件从手机复制到本地文件系统。从那里您可以使用您习惯的所有双击和拖动来阅读它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T01:37:42.947

我猜你是在 DDMS 的文件资源管理器中查看文件。找到文件后，右上角有几个按钮可以从设备中拉/推文件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T01:45:17.933

通过文件资源管理器从设备中提取文件是正确的方法。不知道为什么会失败。真机还是模拟器？

不过还有另一种方法。Android SDK中有一个叫ADB的程序；它在平台工具下。使用以下参数运行它：

```
adb shell cat /data/data/com.mypackage/files/textfile.txt 
```

显然，包名称会有所不同。这会将文件内容打印到标准输出。

编辑：

*   按 Windows 键 + R。
*   键入“cmd”，单击“确定”。
*   键入或粘贴以下行：

    C:\android-sdk-windows\platform-tools\adb shell cat /data/data/com.mypackage/files/textfile.txt

用您的应用程序包的名称替换`com.mypackage`名称，我不可能知道。如果需要，还可以替换 Android SDK 的路径。

*   按 Enter。
*   观察输出。

EDIT2：顺便说一句，你是在写入数据后关闭流吗？这可能是您无法通过文件资源管理器提取文件的原因。

# c - C中的按位运算 - AnyOddBit

> ID：10273606
> 
> 赞同：3
> 
> 时间：2012-04-23T01:00:09.683
> 
> 标签：c, bit-manipulation

我的最后一个问题是我的家庭作业练习的最后一个问题。如果任何奇数位设置为 1，该函数应该返回 1。这是我到目前为止所拥有的：

```
int anyOddBit(int x) {
    return (x & 0xaaaaaaaa) != 0;
} 
```

这工作得很好，但我不允许使用这么大的常数（只允许 0 到 255、0xFF）。我也不允许使用！=

具体来说，这是我仅限于使用的：

```
 Each "Expr" is an expression using ONLY the following:
  1\. Integer constants 0 through 255 (0xFF), inclusive. You are
      not allowed to use big constants such as 0xffffffff.
  2\. Function arguments and local variables (no global variables).
  3\. Unary integer operations ! ~
  4\. Binary integer operations & ^ | + << >> 
```

我不知道如何在这些限制内做到这一点，如果有人能指出我正确的方向，我将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T01:02:21.337

您可以在 AND 之前执行 OR：

```
((x>>0) | (x>>8) | (x>>16) | (x>>24)) & 0xaa 
```

最初的转变`(x >> 0)`将被优化 - 它在那里是为了保持一致的外观。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T01:32:16.707

您可以使用：

```
!!((   ( x        & 0xff)
     | ((x >>  8) & 0xff)
     | ((x >> 16) & 0xff)
     | ((x >> 24) & 0xff)
) & 0xaa) 
```

如果在任何源八位字节中设置了等效位，则将每个源八位字节 OR 在一起的“内部”位将为您提供一个八位字节，其中设置了每个位。因此，如果在源八位字节中设置了奇数位之一，它也将在目标八位字节中设置。

然后，通过简单地与 进行与`0xaa`，如果没有设置奇数位，您将获得一个零值，如果设置了任何奇数位，您将获得一个非零值。

然后，由于您需要 0 或 1，而您不能使用，因此您可以使用, 两个逻辑非运算符`!=`来实现类似的效果。`!!`它之所以有效，是因为`!(any-non-zero-value)`给`0`和`!0`给`1`。

* * *

为了仅使用 12 个运算符（而不是按照我上面的原始解决方案的 13 个），您可以删除`& 0xff`for`>> 24`值，因为它实际上不是必需的（零位从左侧移入）：

```
!!((   ( x        & 0xff)
     | ((x >>  8) & 0xff)
     | ((x >> 16) & 0xff)
     | ((x >> 24)       )
) & 0xaa) 
```

事实上，你可以做得更好。无论如何，最终`& 0xaa`将清除所有高 24 位，因此不需要任何`& 0xff`部分（它也适合一行）：

```
!!((x | (x >> 8) | (x >> 16) | (x >> 24)) & 0xaa) 
```

这使它减少到九个运营商。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T01:02:37.190

`0xaaaaaaaa`基本上是`(0xaa << 24) | (0xaa << 16) | (0xaa << 8) | (0xaa)`，这是允许的，不是吗？

# linux - 如何将项目（比如 zeromq）构建为静态库并将其链接到我的项目中

> ID：10273608
> 
> 赞同：6
> 
> 时间：2012-04-23T01:00:42.587
> 
> 标签：linux, build, hyperlink, zeromq

我想在我的项目中使用 zeroMQ 并运行如下配置以将 libaray 构建到我的主文件夹中

```
./configure --enable-static --disable-shared --prefix=/home/xx/out 
```

然后我链接我的项目

```
gcc -o myproject x.c y.c /home/xx/out/libzmq.a 
```

但仍然有很多链接错误，如下所示：

```
../zmq/lib/libzmq.a(libzmq_la-ip.o): In function zmq::resolve_ip_interface(sockaddr_storage*, unsigned int*, char const*)':
/home/sureone/share/zeromq-2.2.0/src/ip.cpp:221: undefined reference to std::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string()'
/home/sureone/share/zeromq-2.2.0/src/ip.cpp:222: undefined reference to std::basic_string<char, std::char_traits<char>, std::allocator<char> >::~basic_string()'
../zmq/lib/libzmq.a(libzmq_la-ip.o): In function zmq::resolve_ip_hostname(sockaddr_storage*, unsigned int*, char const*)':
/home/sureone/share/zeromq-2.2.0/src/ip.cpp:314: undefined reference to std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string(char const*, uns 
```

............

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T01:19:54.210

> gcc -o myproject xc yc /home/xx/out/libzmq.a

由于 ZeroMQ（显然）使用 C++，因此您需要使用适当的编译器驱动程序（`g++`在这种情况下）来链接它。

尝试这个：

```
 gcc -c x.c y.c
 g++ -o myproject x.o y.o /home/xx/out/libzmq.a 
```

# c - Valgrind 向 malloc 报告愚蠢的 arg，我如何找出在哪里？

> ID：10273609
> 
> 赞同：1
> 
> 时间：2012-04-23T01:00:54.990
> 
> 标签：c, memory, valgrind

在 valgrind 下运行我的程序时收到警告：

```
==24214== 警告：愚蠢的 arg (-1) 到 malloc()

```

我如何确定哪个呼叫`malloc()`有问题？有没有办法可以在不重新编译的情况下做到这一点？

> 该程序是用`-g`（debug）和不`-s`（strip）编译的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T01:20:19.597

在使用 Valgrind 版本 3.2.1 对相对古老的 RedHat Linux 进行少量实验后，它似乎没有产生更精确的警告。此外，即使是 Mac OS X 10.7.3 上的 Valgrind 3.7.0 也不能更好地识别错误调用。

测试代码：

```
#include <stdlib.h>
#include <stdint.h>
int main(void)
{
    int   l = -1;
    char *x = malloc(l);
    return (uintptr_t)x & 1;
} 
```

所以，既然`valgrind`没有帮助，你可能会减少在程序上使用调试器，中断对的调用`malloc()`——也许当参数等于`(size_t)-1`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T01:25:37.923

事实上，valgrind 似乎拒绝为这种情况打印堆栈跟踪，即使使用`--verbose`. 请写信到邮件列表；应该有一个选项，否则诊断没有那么有用。

请注意，参数 of`malloc`是无符号类型 ，`size_t`其范围内没有 -1。这种情况的意思实际上是将最大可能的值`size_t`传递给`malloc`.

严格来说，这不是一个错误的 API 调用，但它可能确实表明有问题。（您的程序不需要数 GB 的数组，对吗？）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T01:17:34.733

您可能会发现文本“silly arg”在 valgrind 中被调用的位置。调出你的调试器并在那个地方中断。运行你的程序，当它把你带回调试器提示符时，直到你在调用 malloc 的那一行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T01:13:40.090

您可以在 malloc 上做一个断点并使其有条件，例如 arg 为 <0

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T03:24:30.477

我最终插入`printf`'s 并查找它是在 valgrind 之前还是之后`printf`。没有你们推荐的那么花哨，但它比尝试实施其他解决方案更快。

# c - 从套接字读取字符串时，写入打印额外的字符

> ID：10273611
> 
> 赞同：-1
> 
> 时间：2012-04-23T01:00:58.907
> 
> 标签：c, sockets

在以下程序中，我通过服务器进行了读写。但是当执行 write() 时，它会打印出多余的字符

```
// this a server program
#include <stdio.h>
#include <stdlib.h>
#include <assert.h>
#include <string.h>
#include <sys/stat.h>
#include <unistd.h>             //  for ssize_t data type  
#include <sys/socket.h>
#include <sys/types.h>
#include <sys/un.h>
#include <arpa/inet.h>
#include <errno.h>
#include <wait.h>

#define LISTENQ        (24)   /*  Backlog for listen()   */
#define MAXBUFFSIZE 12

// Read in characters. Increase memory if we run out of space.
char *stdin_line(int conn)
{
  int rr=0, size=0, cap = MAXBUFFSIZE;
  char *str_ptr;//, oc;
  char buff[MAXBUFFSIZE];

   // allocate some memory for the pointer first
   str_ptr = (char *) malloc(cap * sizeof(char));
   assert(str_ptr != NULL);
   // start reading from socket
   rr=read(conn,buff,MAXBUFFSIZE)) > 0 )
       if(rr > 0){
    str_ptr = buff;
    size = MAXBUFFSIZE;
   }
   if( rr == -1) printf("Error (stdin_line): %s/n",strerror(errno));

  return str_ptr;
}

void daemonize(void){
   pid_t pid, sid=0;
   // fork off process
   pid = fork();
   // failure
   if( pid < 0 ){
    printf("Error (fork<0): %s\n",strerror(errno));
    exit(1);
   }
   // exit parent process
   if( pid > 0 ){
    printf("Error (fork>0): %s\n",strerror(errno));
    exit(0);
   }
   // change file mode mask
   umask(0);

// open log file for daemon debug information. OR as per requirements of hw4

   // create new Session ID for child process
   setsid();
   if( sid < 0 ){
    printf("Error (setsid<0): %s\n",strerror(errno));
    exit(1);
   }
   // exit parent process
   if( sid > 0 ){
    printf("Error (setsid>0): %s\n",strerror(errno));
    exit(0);
   }

   // change working directory to safe directory (one which is always there)
   if( chdir("/") < 0 ){
    printf("Error (chdir): %s\n",strerror(errno));
    exit(1);
   }

}

int main(void) {

   int lstn_sock, conn_sock;
   struct sockaddr_in my_serv;
   short int pnum = 4080;
   ssize_t wnum;
   char *rstr=NULL;

   // create listening socket
   if( (lstn_sock = socket(AF_INET, SOCK_STREAM, 0)) < 0) {
    printf("Error (socket): %s\n",strerror(errno));
    exit(1);
   }

   // initialize socket address
   memset( &my_serv, 0, sizeof(my_serv) );
   my_serv.sin_family = AF_INET;
   my_serv.sin_addr.s_addr = INADDR_ANY;
   my_serv.sin_port = htons(pnum);

   // associate address with socket. 
   if( bind(lstn_sock, (struct sockaddr *) &my_serv, sizeof(my_serv)) < 0){
    printf("Error (bind): %s\n",strerror(errno));
    exit(1);
   }
   // start listening to socket
   if( listen(lstn_sock, LISTENQ) < 0){
    printf("Error (listen): %s\n",strerror(errno));
    exit(1);
   }
   // make it a daemon
   daemonize();

   // work in the background
   while(1){
    // retrieve connect request and connect
    if( (conn_sock = accept(lstn_sock, NULL, NULL)) < 0){
       printf("Error (accept): %s\n",strerror(errno));
       exit(1);
    }

    rstr = stdin_line(conn_sock);

    if( (wnum=write(conn_sock,rstr,strlen(rstr))) <= 0){
       printf("Error (write: rstr): %s\n",strerror(errno));
       exit(1);
    }

    // close connected socket
    if( close(conn_sock) < 0){
       printf("Error (close): %s\n",strerror(errno));
       exit(1);
    }
   }

return 0;

} 
```

@ubuntu:$ ./my_code
@ubuntu:$ telnet localhost 4080

**输出：**
正在尝试 ::1...
正在尝试 127.0.0.1..
已连接到 localhost。
转义字符是 '^]'。
j
j
dhk
9
连接被外部主机关闭。

第一个“j”由用户（我）输入，第二个“j”由服务器回显。为什么我得到“dhk”和“9”字符？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T01:05:24.723

因为您忽略了您收到的实际数据量，也就是说`rr`，而是打印整个字符串。

```
rr=read(conn,buff,MAXBUFFSIZE)) > 0 )
    if(rr > 0){
 str_ptr = buff;
 size = MAXBUFFSIZE;
} 
```

您也不应该这样做，`str_ptr = buff;`因为这只是复制指针而不是字符串本身。是在堆栈上分配的`buff`，因此当函数返回时它可能不再有效。

# html - 内嵌 Facebook 的“喜欢”按钮

> ID：10273612
> 
> 赞同：0
> 
> 时间：2012-04-23T01:01:03.680
> 
> 标签：html, facebook-like

[在此页面](http://www.alliancehealthpartners.com/index.html)的最底部，我添加了一些社交按钮。无论我尝试什么，Facebook 的“喜欢”按钮都会出现在自己的行中。我该怎么做才能让它与其他人保持一致？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T01:03:36.907

`<br>`FB Like 按钮之前似乎有一个标签。你能去掉`<br>`吗？

# android - 为什么我的 BroadcastReceiver 收到 ACTION_USER_PRESENT 两次？

> ID：10273614
> 
> 赞同：4
> 
> 时间：2012-04-23T01:01:12.570
> 
> 标签：android, android-intent, broadcastreceiver

当用户解锁屏幕时，我的应用程序需要祝酒，所以我注册了一个来获取清单中`BroadcastReceiver`的意图，如下所示：`ACTION_USER_PRESENT`

```
<receiver 
            android:name=".ScreenReceiver" >
            <intent-filter>
                <action 
                    android:name="android.intent.action.USER_PRESENT"/>
            </intent-filter>
        </receiver> 
```

然后我定义了一个这样的类：

```
package com.patmahoneyjr.toastr;

import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

public class ScreenReceiver extends BroadcastReceiver {

    private boolean screenOn;
    private static final String TAG = "Screen Receiver";

    @Override
public void onReceive(Context context, Intent intent) {

    if(intent.getAction().equals(Intent.ACTION_USER_PRESENT)) {
        screenOn = true;
        Intent i = new Intent(context, toastrService.class);
        i.putExtra("screen_state", screenOn);
        context.startService(i);
        Log.d(TAG, " The screen turned on!");
    } else if(intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {
        screenOn = false;
        }
    }
} 
```

但是由于某种原因，Log 语句被打印了两次，我的服务做了两次敬酒而不是一次敬酒。有谁知道为什么会发生这种情况，我能做些什么来阻止它？我是否忽略了一些愚蠢的事情？

编辑：我非常抱歉大家，但我自己发现了问题......错误是在应该接收广播的服务类中，我已经实例化了一个新的 ScreenReceiver 并且它也正在接收意图。我误解了课程，并认为要接收意图，我必须在那里有一个，但是在删除该块之后，我只收到一次意图。Android 没有两次发送意图，只是被接收了两次......谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T19:25:32.727

尝试这个：

**1.**只需创建您的广播接收器。

```
BroadcastReceiver reciever_ob = new BroadcastReceiver( 

    @Override
    public void onReceive(Context context, Intent intent) {
        String action = intent.getAction();
        if(action.equals(Intent.ACTION_USER_PRESENT)){
             //DO YOUR WORK HERE
        }
    }
} 
```

**2.**在使用上述广播对象发送广播之前注册您的接收器。您还可以添加多个操作。

```
IntentFilter actions = new IntentFilter(Intent.ACTION_USER_PRESENT);
registerReciever(reciever_ob, actions); 
```

**3.**发送广播

```
Intent intent = new Intent(Intent.ACTION_USER_PRESENT);
SendBroadcast(intent); 
```

现在您可以删除您在 xml-manifest 文件中声明的所有内容，我不确切知道，但我认为它应该可以工作。

# python - 从Python中的字符串中提取值？

> ID：10273620
> 
> 赞同：0
> 
> 时间：2012-04-23T01:02:13.100
> 
> 标签：python, string

我想处理两种情况：

1.  `(string)`->`string`

2.  `@string otherStuff`->`string`

如何做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T01:05:01.427

```
>>> re.search(r'\(([^)]+)\)|@([^ ]+) ', '(string)').groups()
('string', None)
>>> re.search(r'\(([^)]+)\)|@([^ ]+) ', '@string otherStuff').groups()
(None, 'string') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T01:10:47.647

```
import re

def getstring(string):
    testforstring = re.search("\((.*)\)",string)
    if testforstring:
        return testforstring.group(1)
    testforstring = re.search("@(.*?)\s+.*",string)
    if testforstring:
        return testforstring.group(1)
    return None 
```

允许您执行以下操作：

```
>>> print getstring('(hello)')
hello
>>> print getstring('@hello sdfdsf')
hello 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T01:05:22.103

这对你有用吗？

```
In [45]: s='(string)' 
In [46]: s = s[1:-1]

In [47]: s
Out[47]: 'string' 
```

和

```
In [48]: s = '@string otherstuff'
In [49]: s=' '.join(s.split()[1:])  

In [50]: s
Out[51]: 'otherstuff' 
```

# iphone - 编写一个 NSPredicate 来查找日期是否在某个范围内

> ID：10273626
> 
> 赞同：1
> 
> 时间：2012-04-23T01:04:30.793
> 
> 标签：iphone, objective-c

我需要编写一个 NSPredicate 来查看提供的日期是否介于内部某个时间之间。

例如，如果我提供数据`12 Mar, 2012`。它需要看看它是否介于`startdate`和之间`enddate`

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"(statrDate >= %@) AND (enddate <= %@)", providedDate, ProvidedDate]; 
```

1.) 在上面的例子`startdate`中是`10 Mar 2012`，并且`endDate`是`20 Mar 2012`。但是`NSPredicate`由于我已将 2012 年 3 月 12 日指定为`providedDate`.

2.) 我可以利用这个`BETWEEN`子句吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T04:08:25.373

Just remove brackets and try :

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"statrDate >= %@ AND enddate <= %@", providedDate, ProvidedDate]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T01:36:58.270

使用复合谓词：

```
NSPredicate *greaterThanPredicate = [NSPredicate predicateWithFormat:@"statrDate <= %@", providedDate];
NSPredicate *lessThanPredicate = [NSPredicate predicateWithFormat:@"enddate >= %@", providedDate];
NSPredicate *betweenPredicate = [NSCompoundPredicate andPredicateWithSubpredicates:[NSArray arrayWithObjects:greaterThanPredicate, lessThanPredicate, nil]]; 
```

我用过`>=`，`<=`因为你用过。如果它不应该是包容性的，请分别切换到`>`和`<`。

# objective-c - 如果块是对象，它们如何保持内部状态？与常规对象相比，它们有什么优势？

> ID：10273628
> 
> 赞同：3
> 
> 时间：2012-04-23T01:04:58.063
> 
> 标签：objective-c, objective-c-blocks

我的印象是块应该类似于一流的函数并允许 lambda calc 样式的构造。然而，从之前的问题中，我被告知它们实际上只是对象。

然后我真的有两个问题：

1.  除了可以访问其定义范围的功能（我猜这使它们能够以类似于 C++“友谊”的方式使用）之外，为什么人们会选择块而不是对象呢？它们更轻吗？因为如果不是，我还不如继续将对象作为参数而不是块传递。

2.  块有保持内部状态的方法吗？例如，在块内声明的一些变量将在调用中保留其值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T01:42:32.940

> 除了可以访问其定义范围的功能（我猜这使它们能够以类似于 C++“友谊”的方式使用）之外，为什么人们会选择块而不是对象呢？

灵活性。实施较少。块能够表示的不仅仅是参数列表或特定对象类型。

> 它们更轻吗？

不必要。只需将它们视为工具箱中的另一个工具，并在适当（或需要）时使用它们。

> 块有保持内部状态的方法吗？例如，在块内声明的一些变量将在调用中保留其值。

是的，它们能够执行引用计数以及复制堆栈对象。这并不一定会使它们比表示您需要的参数的对象更轻。

**有关的**

[NSInvocation 和 block 有什么区别？](https://stackoverflow.com/questions/9463152/whats-the-difference-between-nsinvocation-and-block/9463297#9463297)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T01:52:40.380

> 块应该类似于一流的函数 [...] 它们实际上只是对象。

它们实际上是一流的函数，为了 ObjC 的目的而实现为对象。在plain-C 中，它们也可用，它们具有密切相关但非基于对象的实现。您可以以目前最方便的方式考虑它们。

> 那为什么要一个块而不是一个对象呢？

块是一个可执行的代码块，它自动从其封闭范围中捕获变量。自定义对象的状态和动作必须更明确地处理，并且不那么通用；您不能使用任何旧对象作为完成参数，而*可执行*对象完全符合该要求。

> 块有保持内部状态的方法吗？例如，在块内声明的一些变量将在调用中保留其值。

`static`当然，您可以像使用函数或方法一样声明变量：

```
void (^albatross)(void);
albatross = ^{
            static int notoriety;
            NSLog(@"%d", notoriety++);
        };

albatross();
albatross();
albatross();
albatross(); 
```

# php - 限制从 MySQL/PHP 显示的内容

> ID：10273631
> 
> 赞同：-1
> 
> 时间：2012-04-23T01:05:14.597
> 
> 标签：php, mysql, date

我正在构建一个交互式时间线，用于加载电影并计算它们的发行日期之间的差异，从而显示没有任何电影发行的“天数”来创建时间线效果。但是我有一些在同一天上映的电影。我不想一遍又一遍地重复这些电影的日期，而只是像群体效果一样显示第一部电影的日期。

我操纵了一个`if`循环遍历表并检查日期是否与前一行的日期相同的语句。

[http://ignitethatdesign.com/CheckFilm/test_search.php](http://ignitethatdesign.com/CheckFilm/test_search.php)

但是，我将如何使用 PHP 仅显示一组具有相同日期的电影中第一部电影的日期？

我正在使用一个复杂的循环系统，这是完整的代码

```
<?php                      
 $last_value = null;
 echo "<div class=\"timeline\">";

$pNumber = 0;
            while ($row = mysql_fetch_assoc($sql)) {

                      if (!is_null($last_value)) {
                          $pNumber++;
                      $a = new DateTime($row['FilmRelease']);
                      $film_date = $row['FilmRelease'];

                      $film_name = urldecode($row['FilmName']);  
                      $film_desc = urldecode($row['Synopsis']);  
                      echo "<div id=\"t".$pNumber."\"><p class=\"everyday\">".$film_name."</div>";

                          if (empty($film_desc)) {
                            echo "<div id=\"b".$pNumber."\" style=\"font-size:12px;\">No film information for ".$film_name."</div>";
                            }
                            else 
                            {
                             echo "<div id=\"b".$pNumber."\"  style=\"font-size:12px;\">".$film_desc."</div>";
                             }

                                    ?> <script type="text/javascript">
                                     $("#b<?php echo $pNumber ?>").hide(); 
                                $("#t<?php echo $pNumber ?>").click(function() {
                                  $("#b<?php echo $pNumber ?>").fadeToggle("slow");
                                });

                                </script>
                                <?php
                                  $interval = $a->diff(new DateTime($last_value));
                                  //echo $interval->format('%d days');
                                  $b = new DateTime($last_value);
                                  $i = 0;
                                } 

                                if ($b == $a)
                                {
                                    echo "same date as above";
                                } else 
                                {
                                    echo "This date is different";
                                }

                        $howManydays = $interval->days;

                        for ( $i; $i < $howManydays; $i++) {
                            echo "<p class=\"day\"></p>";

                        }

              $last_value = $row['FilmRelease'];
            } 
            echo "<div id=\"end\"></end>";
            echo "</div>";

            ?> 
```

任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T01:09:49.320

简单的例子：

```
$lastDate = null;

while (...) {
    $currentDate = date('Y-m-d', strtotime($film['date']));
    if ($currentDate != $lastDate) {
        echo "<h1>$currentDate</h1>";
    }
    $lastDate = $currentDate;

    // output film details
} 
```

这会给你类似的东西：

```
2012-04-01

Film A
Film B

2012-04-02

Film C

2012-04-05

Film D
Film E 
```

# windows - 我们可以创建支持任何应用程序的自定义操作系统吗？

> ID：10273636
> 
> 赞同：-1
> 
> 时间：2012-04-23T01:06:01.050
> 
> 标签：windows, operating-system, linux-from-scratch

我可以创建一个同时支持 Windows 和 Linux 应用程序的自定义操作系统吗？

我该怎么做？我应该具备哪些知识？

这是[一个](http://www.linuxfromscratch.org/lfs/view/development/)好的开始吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T01:32:49.053

这可以通过使用 Linux 和[Wine](http://www.winehq.org/)来完成，但它并不完美。

问题是 Windows 不是开源的，而且**非常**大，所以要完美地模拟操作系统在幕后所做的事情并不容易。这对于许多程序喜欢在 Windows 上使用的未记录的 API 调用尤其困难。

我不知道有什么可以让您在不使用 VM 的情况下在 Linix 上运行 Mac。

几乎不可能有“一个操作系统来统治所有这些”，但使用像 Wine 这样的工具并使用虚拟化和 VMWare 的[Unity 模式](http://www.codewiz51.com/blog/post/2010/01/24/VMWare-Unity-mode.aspx)等东西来产生另一个操作系统的程序在您的系统上运行的影响。

# php - Facebook 用户生成的应用请求/无摩擦请求

> ID：10273637
> 
> 赞同：0
> 
> 时间：2012-04-23T01:06:04.567
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我正在开发一款 Android/iPhone 游戏。当用户击败他们的 Facebook 朋友得分之一时，我想通过使用 Facebook 请求功能通知该用户。

我现在正在尝试通过简单地向自己发送消息来进行测试。

我正在使用 PHP SDK。这是我正在使用的代码：

```
require_once("facebook.php");
    $config = array();
    $config['appId'] = 'xxx';
    $config['secret'] = 'xxx';
    $config['fileUpload'] = false; // optional

    $facebook = new Facebook($config);
    // $params["fb_sess"] is sent as a header
    $facebook->setAccessToken($params["fb_sess"]);  
    $fbid = $facebook->getUser();
$req = array();
        $req['message'] = "This is a test string";
        $req['data'] = "this is the data string";
        $req['ids'] = $fbid;
        $result = $facebook->api("/apprequests","POST",$req);
        echo "Result [";
        print_r($result);
        echo "]"; 
```

我从服务器得到的结果是

```
(
    [request] => 275812909174776
    [to] => Array
        (
            [0] => 12818036
        )
) 
```

但是，我没有在我的 Facebook 上看到通知。当我点击应用程序和游戏时看到它，然后我看到一个接受或 X 按钮...由于我的游戏是移动游戏，我不想有接受或 X 按钮...我只是希望它显示为给他们的信息。

# air - navigateToURL 在 iPad (Adobe Air) 上打开浏览器失败

> ID：10273638
> 
> 赞同：0
> 
> 时间：2012-04-23T01:06:05.283
> 
> 标签：air, actionscript-3

快速提问，我正在使用 Adob​​e AIR 在 iPad 下开发应用程序。为什么`navigateToURL`不打开 iPad 下的 Safari？它在Android下工作。

```
if(e == 'pdf')
{
    loader.addEventListener(Event.COMPLETE, function(e)
    {
        var variables:URLVariables = new URLVariables(e.target.data);
        var url:String = 'http://files.au2.schneider-electric.com/locator/index.php?controller=pdfGenerator&action=fetchroom&roomid=' + variables.roomid + '&userid=0';
        var request:URLRequest = new URLRequest(url);

        try
        {
            navigateToURL(request, '_blank'); // second argument is target
        }
        catch(e:Error)
        {
            trace("Error occurred!");
        }
    });
} 
```

只是想知道 Adob​​e Air 是否根本无法在移动设备上打开浏览器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T04:07:00.193

我认为您不能期望 PDF 像 iOS 上的常规网页那样加载。这是未经测试的，但想法是创建一个`StageWebView`实例，使用它来加载 PDF：

```
var swv:StageWebView = new StageWebView();
swv.viewPort = new Rectangle(0,0,wid,ht);
swv.stage = stage;
swv.loadURL( someUrl ); 
```

编辑：

另请参阅[StageWebView 上的 Adob​​e 文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/media/StageWebView.html)。

# python - Python-将多个文件导入单个 .csv 文件

> ID：10273640
> 
> 赞同：0
> 
> 时间：2012-04-23T01:06:19.807
> 
> 标签：python, file, import

我有 125 个数据文件，其中包含两列和 21 行数据，我想将它们导入单个 .csv 文件（作为 125 对列和只有 21 行）。这是我的数据文件的样子：

![在此处输入图像描述](../Images/404aeb61c177a845ba60483d5f6b6e04.png)

我对python相当陌生，但我想出了以下代码：

```
import glob
Results = glob.glob('./*.data')
fout='c:/Results/res.csv'
fout=open ("res.csv", 'w')
 for file in Results:
 g = open( file, "r" )
 fout.write(g.read())
 g.close() 
fout.close() 
```

上面代码的问题是所有数据都被复制到只有两列125*21行。

很感谢任何形式的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T01:27:53.283

这应该有效：

```
import glob

files = [open(f) for f in glob.glob('./*.data')] #Make list of open files
fout = open("res.csv", 'w')

for row in range(21):
    for f in files:
        fout.write( f.readline().strip() ) # strip removes trailing newline
        fout.write(',')
    fout.write('\n')

fout.close() 
```

请注意，如果您尝试大量文件，此方法可能会失败，我相信 Python 中的默认限制是 256。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T01:38:38.963

您可能想尝试 python CSV 模块 (http://docs.python.org/library/csv.html)，它为读取和写入 CSV 文件提供了非常有用的方法。既然您说您只需要 21 行和 250 列数据，我建议您创建 21 个 python 列表作为您的行，然后在您遍历文件时将数据附加到每一行。

就像是：

```
import csv

rows = []
for i in range(0,21):
    row  = []
    rows.append(row)

#not sure the structure of your input files or how they are delimited, but for each one, as you have it open and iterate through the rows, you would want to append the values in each row to the end of the corresponding list contained within the rows list.

#then, write each row to the new csv:

writer = csv.writer(open('output.csv', 'wb'), delimiter=',')
for row in rows:
    writer.writerow(row) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T11:51:10.857

（抱歉，我还不能添加评论。）

**[稍后编辑，以下语句是错误的！！！]** *“davesnitty 生成的行循环可以替换为`rows = [[]] * 21`。”* 这是错误的，因为这将创建空列表的列表，但空列表将是外部列表的所有元素共享的单个空列表。

我对使用标准 csv 模块的 +1。但是文件应该总是关闭的——尤其是当你打开那么多文件时。此外，还有一个错误。通过 -- 即使您只在此处写入结果，从文件中读取的行也是如此。解决方案实际上是缺失的。基本上，从文件中读取的行应该附加到与行号相关的子列表中。行号应通过 enumerate(reader) 获得，其中 reader 为 csv.reader(fin, ...)。

**[稍后添加]**尝试以下代码，为您的 puprose 修复路径：

```
import csv
import glob
import os

datapath = './data'
resultpath = './result'
if not os.path.isdir(resultpath):
   os.makedirs(resultpath)

# Initialize the empty rows. It does not check how many rows are
# in the file.
rows = []

# Read data from the files to the above matrix.
for fname in glob.glob(os.path.join(datapath, '*.data')):
    with open(fname, 'rb') as f:
        reader = csv.reader(f)
        for n, row in enumerate(reader):
            if len(rows) < n+1:
                rows.append([])  # add another row
            rows[n].extend(row)  # append the elements from the file

# Write the data from memory to the result file.
fname = os.path.join(resultpath, 'result.csv')
with open(fname, 'wb') as f:
    writer = csv.writer(f)
    for row in rows:
        writer.writerow(row) 
```

# c++ - 使用函数模板初始化函数数组

> ID：10273642
> 
> 赞同：2
> 
> 时间：2012-04-23T01:06:51.647
> 
> 标签：c++, template-meta-programming

我目前正在尝试使用模板元编程实现如下一些功能

```
typedef void (*function)(void*);
function function_array[/* total size of type list */];

...

template<typename T>
void some_func(void*)
{
    // do something with type T
}

...

function_array[0] = &some_func<type_0>;
function_array[1] = &some_func<type_1>;
function_array[2] = &some_func<type_2>;

...

function_array[n] = &some_func<type_n>; 
```

我的意图是通过类型的整数索引实现类型的动态调度机制。

似乎可以通过使用可变参数模板机制（[C++/C++11 - Switch statement for variadic templates?](https://stackoverflow.com/questions/7381805/c-c11-switch-statement-for-variadic-templates)）来实现，但目前我不能使用支持可变参数模板的编译器。

因此，我尝试通过使用类型列表（在现代 C++ 设计中）和模板递归作为概念代码来解决问题，如下所示。

```
template<typename list, typename function>
struct type_dispatch
{
    type_dispatch() { init(); }

    template<typename typelist>
    void init();

    template<typename head, typename tail>
    void init(cell<head, tail>&)
    {
        // setting dispatch array with templated function
        function_array[index_of<list, head>::value] = &function<head>;
        init(tail());
    }
    void init(null&) {}

    // functor array which size is equal to the size of type list    
    function function_array[size_of<list>::value];
}; 
```

当然，上面的代码不会被正确编译。我怎样才能实现这个功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T01:46:28.917

您的代码修复了一些错误并填写了缺失的部分，对我来说编译得很好：

```
struct null {};

template <typename head, typename tail>
struct cell {};

template <typename, typename>
struct index_of;

template <typename head, typename tail>
struct index_of<cell<head, tail>, head>
{
    static const int value = 0;
};

template <typename head, typename tail, typename other>
struct index_of<cell<head, tail>, other>
{
    static const int value = 1 + index_of<tail, other>::value;
};

template <typename>
struct size_of;

template <>
struct size_of<null>
{
    static const int value = 0;
};

template <typename head, typename tail>
struct size_of<cell<head, tail> >
{
    static const int value = 1 + size_of<tail>::value;
};

template <typename T>
void the_function(void*)
{
}

template<typename list, typename function_t>
struct type_dispatch
{
    type_dispatch() { init(list()); }

    template<typename head, typename tail>
    void init(cell<head, tail>)
    {
        // setting dispatch array with templated function
        function_array[index_of<list, head>::value] = &the_function<head>;
        init(tail());
    }

    void init(null) {}

    // functor array which size is equal to the size of type list    
    function_t function_array[size_of<list>::value];
};

typedef void (*function_t)(void*);

int main()
{
    type_dispatch<cell<int, cell<float, cell<double, null> > >, function_t> t;
} 
```

# javascript - CodeMirror 和 Socket.io - 使用 onChange 发出编辑器的内容

> ID：10273643
> 
> 赞同：0
> 
> 时间：2012-04-23T01:06:57.527
> 
> 标签：javascript, jquery, node.js, socket.io, codemirror

我正在尝试将编辑器的内容提交到我的服务器 onChange。我正在使用 node.js、socket.io、jquery 和 codemirror。

这是我到目前为止的代码（客户端）（“code.server”意味着我正在将代码文本区域内容发送到我的服务器。我使用“code.client”将信息发送回客户端）：

```
<textarea id="code"></textarea>
<script>
var socket = io.connect();

var editor = CodeMirror.fromTextArea(document.getElementById('code'), {
                lineNumbers: true,
            matchBrackets: true,
            onChange: function(){
            var value = getValue();
            socket.emit("code.server", value);
            }
});
</script> 
```

然而它不起作用。我究竟做错了什么？我可以在添加 CodeMirror 之前提交 textarea 的内容：

```
<script>
$("#code").keyup(function () {
        var value = $(this).val();
        socket.emit("code.server", value);
}).keyup();
</script> 
```

我使用了 jQuery，以防不清楚。

现在，添加codemirror后，我无法获取内容并将它们发送到服务器。到底是怎么回事？感谢您帮助我，我已经解决这个问题好几天了，这让我发疯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T01:54:15.110

从上面的代码中，该`getValue`方法是未定义的，我认为您想要`this.getValue`or `editor.getValue`。

# android - Android - 如何将图片从 webview.capturePicture() 转换为 byte[] 并返回位图

> ID：10273646
> 
> 赞同：4
> 
> 时间：2012-04-23T01:08:17.483
> 
> 标签：android, webview, bytearray, image, bytearrayoutputstream

我正在尝试捕获从 webview.capturePicture() 获取的图片以将其保存到 sqliteDatabase，我需要将图像转换为 byte[] 以便能够将其保存为表中的 BLOB ，然后通过检索该 byte[] 并将其转换回位图。

这是我正在做的事情：

```
Picture p = webView.capturePicture();  
ByteArrayOutputStream bos = new ByteArrayOutputStream();  
p.writeToStream(bos);

byte[] ba = bos.toByteArray()); 
```

然后我通过以下方式检索图像：

```
byte[] image = cursor.getBlob(imageColumnIndex);
Bitmap bm = BitmapFactory.decodeByteArray(image, 0, image.length); 
```

我能够很好地检索字节 []，但我一直从 bitmapfactory 得到一个空位图。

我还注意到，如果我 log.d(TAG, ""+bos) 我得到了一个很长的字节序列，但是如果我在我做 bos.toByteArray() 之后对 ba 做同样的事情，我只会得到一个短数组，像这样的东西：[B@2b0a7c60

我猜我可能无法通过 OutputStream 转换为 byteArray。这可能是因为 capturePiture() 方法返回的是 OutputStream 而不是 ByteArrayOutputStream 吗？

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T02:14:00.483

使用以下两个函数 convert::::

```
public String convertBitmapToString(Bitmap src) {
    String str =null; 
    if(src!= null){
        ByteArrayOutputStream os=new ByteArrayOutputStream();
    src.compress(android.graphics.Bitmap.CompressFormat.PNG, 100,(OutputStream) os);
    byte[] byteArray = os.toByteArray();
    str = Base64.encodeToString(byteArray,Base64.DEFAULT);   
    }
    return str;         
}

public static Bitmap getBitMapFromString(String src)    {
    Bitmap bitmap = null;
if(src!= null){
   byte[] decodedString = Base64.decode(src.getBytes(), Base64.DEFAULT);
   bitmap = BitmapFactory.decodeByteArray(decodedString,0,decodedString.length);
}
return bitmap;
} 
```

更新：：

```
//Convert Picture to Bitmap
private static Bitmap pictureDrawable2Bitmap(Picture picture){
        PictureDrawable pictureDrawable = new PictureDrawable(picture);
        Bitmap bitmap = Bitmap.createBitmap(pictureDrawable.getIntrinsicWidth(),pictureDrawable.getIntrinsicHeight(), Config.ARGB_8888);
        Canvas canvas = new Canvas(bitmap);
        canvas.drawPicture(pictureDrawable.getPicture());
        return bitmap;
    } 
```

# iphone - iPhone iOS如何计算字符串中不区分大小写的单词出现次数？

> ID：10273649
> 
> 赞同：3
> 
> 时间：2012-04-23T01:08:48.053
> 
> 标签：iphone, objective-c, ios, nsstring, keyword

我正在寻找一种方法来搜索任意长字符串（10000 个字符）并查找特定关键字在字符串中重复的次数。如何才能做到这一点？

我有这种方法，它几乎可以计算字符串围绕关键字拆分后留下的片段数，但它不区分大小写。

```
-(void)countKeywords
{
    NSArray* components = [self.salesCopy componentsSeparatedByString:@"search term"];

    NSLog(@"search term number found: %i",components.count);

} 
```

**计算字符串中关键字数量的更好方法是什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T01:19:05.363

拆分字符串、计算零件并丢弃它们效率不高。在不创建新对象的情况下重复搜索子字符串肯定会更有效。由于字符串相对较长，您可能会受益于实施高级字符串搜索算法，例如[Knuth-Morris-Pratt](http://en.wikipedia.org/wiki/Knuth%E2%80%93Morris%E2%80%93Pratt_algorithm)，以显着减少搜索时间。

这是一个应该比拆分代码更快的实现：

```
NSString *str = @"Hello sun, hello bird, hello my lady! Hello breakfast, May I buy you again tomorrow?";
NSRange r = NSMakeRange(0, str.length);
int count = 0;
for (;;) {
    r = [str rangeOfString:@"hello" options:NSCaseInsensitiveSearch range:r];
    if (r.location == NSNotFound) {
        break;
    }
    count++;
    r.location++;
    r.length = str.length - r.location;
}
NSLog(@"%d", count); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T01:15:14.160

只需创建 self.salesCopy 和 searchTerm 的副本，通过 [NSString lowercaseString] 将副本设置为小写，然后执行您的代码，您将获得计数

```
-(void)countKeywords
{
    NSString *lowerCaseSalesCopy = [self.salesCopy lowercaseString];
    NSString *lowerCaseSearchTerm = [searchTerm lowercaseString];
    NSArray* components = [lowerCaseSalesCopy componentsSeparatedByString:lowerCaseSearchTerm];

    NSLog(@"search term number found: %i",components.count);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T01:18:49.183

我不是 100% 确定这可以帮助你，但可能会做一些你需要的工作（如果不是全部）：

```
NSRange ran = [yourString rangeOfString:wordToLookFor options:NSCaseInsensitiveSearch]; 
```

看看

```
ran.length
ran.location 
```

ran.location 将为您提供第一次出现的字符串中的位置。然后，您可以在此事件发生后剪切字符串，并再次运行此操作，直到字符串结束。

# android - BitmapFactory.decodeResource 和 BitmapFactory.decodeStream 的区别

> ID：10273650
> 
> 赞同：3
> 
> 时间：2012-04-23T01:08:57.123
> 
> 标签：android, bitmap, imageview, scaling

我有一个 if-else 场景，其中 if-path 使用此代码：

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inScaled = false;
options.inPurgeable = true;
options.inInputShareable = true;
bitmap = BitmapFactory.decodeResource(getResources(), resourceId, options); 
```

else-path 使用以下代码：

```
InputStream is = getContentResolver().openInputStream(Uri.fromFile(file));
BitmapFactory.Options options = new BitmapFactory.Options();
options.inScaled = false;
options.inPurgeable = true;
options.inInputShareable = true;
bitmap = BitmapFactory.decodeStream(is, null, options); 
```

现在对我来说，阅读 API、测试和谷歌搜索的简短描述，我不太清楚其中的区别，但似乎有一个微妙的区别。

当应用于 ImageView（在 RelativeLayout 内，在 ScrollView 内）时，第一段代码会缩放以适应屏幕的宽度。第二段代码没有，这是我的问题。它似乎也以某种方式放松了它的纵横比，因为如果我申请：

```
imageView.setAdjustViewBounds(true);
imageView.setScaleType(ImageView.ScaleType.FIT_XY); 
```

它设法使其适合宽度，但弄乱了高度（使其比应有的短）。**任何投入将不胜感激！**

（我已经尝试更改第一段代码，看看我是否把其他东西搞砸了，但是这个 if-path 的重写给出了同样的错误：）

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inScaled = false;
options.inPurgeable = true;
options.inInputShareable = true;
bitmap= BitmapFactory.decodeStream(getResources().openRawResource(resourceId), null, options); 
```

# ruby-on-rails - 将 ID 值传递给控制器 ，出现批量分配安全错误

> ID：10273652
> 
> 赞同：1
> 
> 时间：2012-04-23T01:09:16.713
> 
> 标签：ruby-on-rails, forms, controller, attr-accessible

我有一个消息模型和一个用户模型。我的消息`belongs_to`我的用户和用户`has_many`消息。

我试图允许用户在他们的公共个人资料页面（他们的显示模板）上向另一个用户发送私人消息。我已经尝试了很多尝试，但最终我又遇到了需要 ID 的问题`attr_accessible`（我听说这样做不好）。难道我做错了什么？

我的消息模型，我有`:user_id`（这是当前用户，又名`sending_from`ID）`:to_id`，，，`:content`。

当我查看用户个人资料页面时，在显示模板上我有

```
 <%= form_for([current_user, @message])  do |f| %>
        <%= f.hidden_field :to_id, :value => @user.id %>
        <div class="field">
          <%= f.text_area :content, placeholder: "Send a private message..." %>
        </div>
        <%= f.submit "Post", class: "btn btn-large btn-primary" %>
    <% end %> 
```

在我的用户展示操作中，我有

```
def show
   @user = User.find(params[:id])
   @microposts = @user.microposts.paginate(page: params[:page])
   if user_signed_in?
      @message = current_user.messages.build(params[:messages], to_id: @user.id)
   end
end 
```

当表单提交时，它会转到我的消息创建操作

```
def create
    @message = current_user.messages.build(params[:message])
    redirect_to user_path(params[:message][:to_id])
end 
```

但是，我总是得到错误

```
`Can't mass-assign protected attributes: to_id` 
```

似乎我可以通过 make 修复它`:to_id attr_accessible`，但是我听说这样做不是很安全。难道我做错了什么？这个问题一直在杀死我。

任何帮助，将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T01:21:04.583

使`to_id`可访问性很好。但是，如果您不希望出现该错误，只需像这样修复它：

```
def create
    @message = current_user.messages.build
    @message.to_id = params[:message][:to_id]
    # manually assign whatever other params you need to
    redirect_to user_path(params[:message][:to_id])
end 
```

批量分配只是意味着你不能使用`update_attributes`，你仍然可以使用`model.attribute=`。这样做的原因可能是添加额外的白名单参数，例如：

```
def create
  safe_params = params[:model].slice(:safe_attr1,:safe_attr2)
  @model = Model.new(safe_params)
  whitelist = ['some_safe_string','another_safe_string']
  if whitelist.include?(params[:model][:dangerous])
    @model.dangerous_attribute = params[:model][:dangerous]
  end
  @model.save
  redirect_to @model
end 
```

# wsdl - Intalio Designer 生成的代码出错

> ID：10273653
> 
> 赞同：2
> 
> 时间：2012-04-23T01:09:30.367
> 
> 标签：wsdl

每当我在 intalio 中验证我的项目时，我总是会遇到这种错误，

```
The 'body' element defined here is undefined for the SOAP namespace. The only valid element is "fault".

The 'Process' port type specified for the 'process_flowAndUsersForPortTypeProcessPlkServiceBinding' binding is undefined. Check the 'Process' port type name and ensure it is defined. 
```

我应该怎么做才能解决这个错误？错误指定的文件中的每个脚本都是由 Intalio Designer 自动生成的。我有配置问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-29T19:55:55.897

我认为您定义了一个进程，将消息发送到没有具体端点的池（有端口类型但没有端口）。您需要为端口类型指定绑定，以便可以解析端点。

您将在 Intalio 社区网站上获得更好的答案。

# android - 如何使用片段显示 ProgressDialog

> ID：10273655
> 
> 赞同：5
> 
> 时间：2012-04-23T01:09:50.573
> 
> 标签：android, android-fragments

我有一个片段活动，左侧有一个 ListFragment，右侧有一个带有 WebView 的片段。该功能工作正常，但我想在网页完成加载时显示一个显示“正在加载...”的进度对话框。我怎样才能完成这个看似微不足道的任务？

下面是我的代码：

```
public class ArticleListActivity extends FragmentActivity implements
    ArticleListFragment.OnArticleSelectedListener {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.articlelist_fragment);
    }

    public void onArticleSelected(String contentLink) {
        ArticleViewerFragment viewer = (ArticleViewerFragment) getSupportFragmentManager()
                .findFragmentById(R.id.articleview_fragment);

        if (viewer == null || !viewer.isInLayout()) {
            Intent showContent = new Intent(getApplicationContext(),
                    ArticleViewerActivity.class);

            showContent.setData(Uri.parse(contentLink));
            startActivity(showContent);
        } else {
            viewer.updateUrl(contentLink);
        }
    }
} 
```

这是我的 FragmentActivity

```
public class ArticleViewerActivity extends FragmentActivity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.articleview_fragment);

        Intent launchingIntent = getIntent();
        String content = launchingIntent.getData().toString();

        ArticleViewerFragment viewer = (ArticleViewerFragment) getSupportFragmentManager()
                .findFragmentById(R.id.articleview_fragment);

        viewer.updateUrl(content);
    }
} 
```

这是我的片段

```
public class ArticleViewerFragment extends Fragment {

    private ProgressDialog progressBar; 

    private WebView viewer = null;

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        viewer = (WebView) inflater.inflate(R.layout.webview_layout, container, false);
        viewer.loadUrl("file:///android_asset/default.html");
        return viewer;
    }

    public void updateUrl(String newUrl) {
        if (viewer != null) {
            viewer.loadUrl(newUrl);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-26T08:24:20.593

Use this code:

```
final ProgressDialog pd = ProgressDialog.show(this, "", "Loading...", true);
pd.setCancelable(false);

webview.getSettings().setJavaScriptEnabled(true);
webview.getSettings().setSupportZoom(true);
webview.getSettings().setBuiltInZoomControls(true);
webview.setWebViewClient(new WebViewClient() {
    @Override
    public void onPageFinished(WebView view, String url) {
        if (pd != null && pd.isShowing()) {
            pd.dismiss();
        }
    }
});
webview.loadUrl("file:///android_asset/default.html"); 
```

# perl - 在 perl 中读取和存储数字而不会丢失 percision (Perl)

> ID：10273659
> 
> 赞同：2
> 
> 时间：2012-04-23T01:10:53.303
> 
> 标签：perl, decimal, scientific-notation

我在一个文件中有几个不同格式的数字：8.3、0.001、9e-18。我正在寻找一种简单的方法来读取和存储它们而不会损失任何精度。这在 AWK 中很容易，但在 Perl 中是如何完成的呢？我只愿意使用 Perl。谢谢！

另外，我想知道是否有一种简单的方法可以以适当的格式打印它们。例如，8.3 应该打印为“8.3”而不是“8.3e0”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T01:31:57.823

如果它们是文本字符串，那么将它们作为字符串读入 Perl 并将它们作为字符串写回不应导致任何精度损失。如果您必须对它们进行算术运算，那么我建议安装 CPAN 模块 Math::BigFloat 以确保您不会因舍入而失去任何精度。

至于你的第二个问题，Perl 不会进行任何重新格式化，除非你要求它：

```
$ perl -le 'print 8.3'
8.3 
```

我错过了什么吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T03:28:26.400

从[http://perldoc.perl.org/perlnumber.html](http://perldoc.perl.org/perlnumber.html)：

> Perl 可以在内部以 3 种不同的方式表示数字：原生整数、原生浮点数和十进制字符串。十进制字符串可能有指数符号部分，如 "12.34e-56" 。这里的 Native 表示“用于构建 perl 的 C 编译器支持的格式”。

这意味着打印数字取决于数字在 perl 内部的存储方式，这反过来意味着您必须知道数字在输入中的表示方式。

总的来说，Perl 只会做正确的事，但您应该知道如何使用编译器，它如何在内部表示数字，以及如何打印这些数字。例如：

```
 $ perldoc -f int

 int EXPR

      int  Returns the integer portion of EXPR.  If EXPR is omitted, uses $_.  You should
      not use this function for rounding: one because it truncates towards 0, and two
      because machine representations of floating-point numbers can sometimes produce
      counterintuitive results.  For example, "int(-6.725/0.025)" produces -268 rather than
      the correct -269; that's because it's really more like -268.99999999999994315658
      instead.  Usually, the "sprintf", "printf", or the "POSIX::floor" and
      "POSIX::ceil" functions will serve you better than will int(). 
```

我认为，如果您想以字符串的形式显式读取数字，最好的办法是使用具有“A*”格式的 unpack()。

# ios - ios ARC强制保留NSURL

> ID：10273662
> 
> 赞同：2
> 
> 时间：2012-04-23T01:11:21.600
> 
> 标签：ios, automatic-ref-counting, nsurl

我正在制作一个`NSURL`并将它传递给一个选择器，然后将它传递给另一个选择器，等等。当它到达它要去的地方时，它记录得很好，但是在使用它时会给出一个 sigabort。我怀疑这意味着我的对象已被 ARC 释放。我怎样才能确保它保持足够长的时间来使用？

```
__strong NSURL *url = [[NSURL alloc] initWithString:str];

... passes to a selector
... passes to another
... and then to fetchVideoContent

- (void)fetchVideoContent:(NSURL *)url withGUID:(NSString *)guid;
{
    NSMutableURLRequest *req;
    req = [NSMutableURLRequest requestWithURL:url // <-- DIES ON THIS LINE (SIGABRT)
                                  cachePolicy:NSURLRequestUseProtocolCachePolicy
                              timeoutInterval:30.0];
    ... 
```

这是我能想到的“最强大”的东西，但仍然行不通。有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T02:15:32.497

当 url 对象以 fetchVideoContent 方法结束时，您需要确保初始 url 变量 (__strong NSURL *url) 继续存在，否则，您将收到您所描述的错误。在我看来，您正在使用局部变量在方法中创建 url 对象，然后将该对象通过几个方法传递，这些方法要么交叉到新线程，要么进入运行循环的末尾并返回下一次运行。

例如，如果通过您省略的步骤，当前运行循环结束，并且初始 url 变量超出范围，则 url 对象将被释放，因为实际上没有任何东西再保留它了。将对象传递给另一个方法不足以保留它，因为不会在参数上调用保留。

简短的版本是，确保某些东西保留在 url 上，如果您一次只使用一个类的实例，您可以将其设为类的属性、实例变量甚至静态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T01:32:57.590

首先，您应该验证您实际上正在处理引用计数问题——在启用僵尸的情况下运行。

我不知道传递的所有 URL 是什么，但在某些极端情况下，启用 ARC 时需要显式引用计数。

如果需要 MRC 语义，您可以使用`CFRetain`并将其与 a 匹配`CFRelease`，或者您可以创建自己的函数，这些函数未在启用 ARC 的情况下编译。

当然，您可以简单地使用 CFTypes 代替（在这种情况下）。

# xcode - cocoa：确保您的目标都指定了此版本 Xcode 支持的 SDK

> ID：10273663
> 
> 赞同：14
> 
> 时间：2012-04-23T01:11:41.363
> 
> 标签：xcode, macos

方案“PrintingWebView”不包含可以为运行目标 My Mac 64 位支持的 SDK 构建的可构建项目。确保您的目标都指定了此版本 Xcode 支持的 SDK。

![在此处输入图像描述](../Images/10d25469b177ff9177fe1c7e625189a0.png)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-10T15:29:07.940

我遇到了这个问题。就我而言，以下步骤可以解决它：

你的项目 -> 目标 -> 构建设置

修改以下项目： 1.Base SDK；2.架构；3.iOS部署目标。

然后清理并构建应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-27T04:45:24.533

试试这个简单的：

```
Target 
   '---> General 
             '---> Deployment Info  
                          '---> Deployment Target 
                                     '---> Choose Version (Better lower version) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-23T08:04:59.380

上面的答案是对的。我犯了一个愚蠢的错误，我的应用程序是专门为 iPad 设计的，我错误地尝试在 iPhone 模拟器上构建，并得到了这个错误。确保也部署在相关设备上。

# facebook - 想要让网站的赞框链接到粉丝页面而不是网站管理界面？

> ID：10273665
> 
> 赞同：0
> 
> 时间：2012-04-23T01:12:04.703
> 
> 标签：facebook, facebook-like, facebook-opengraph, facebook-page

我正在尝试将网站上的类似框链接到 Facebook 粉丝页面。

[http://witheri.com](http://witheri.com)

我创建了一个 APP (developer.facebook.com)，进入设置 -> 高级 -> 添加页面为乐队创建粉丝页面。然后我使用这个打开的图形按钮（http://developers.facebook.com/docs/reference/plugins/like/）链接页面。

它正在网站上运行，但是当我点击喜欢时，它会创建一个第三页，一个洞察页面，并显示此消息“这是您的网页的管理界面，位于[http://witheri.com](http://witheri.com)。您可以查看洞察并发布到喜欢你的网页的用户。只有网页的管理员可以查看该界面，其他用户被发送到该网页。

这一切都很好，但我希望喜欢出现在粉丝页面而不是洞察页面上。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T02:37:02.017

该消息说明了情况；使用 Like 按钮的人喜欢 [http://witheri.com](http://witheri.com)，您在 Facebook.com 上看到的页面仅对您可见，并让您了解谁喜欢该页面，并让您发布内容出现在粉丝的新闻中

# ruby-on-rails - 验证日期时间

> ID：10273672
> 
> 赞同：2
> 
> 时间：2012-04-23T01:13:03.507
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation

我有一个日期——<code>start_time 和`end_time`——我想验证时间是否是在特定日期。我阅读了范围验证：

```
validates :date ,:uniqueness => { :scope => :timeEnd, :timeStart } 
```

但我想我必须做其他事情我认为这是一个实现问题，从技术上讲不是逻辑问题或错误错误之类的东西。

伙计们对我该如何解决这个问题有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-16T15:36:06.197

听起来您需要编写一个[条件验证器](http://guides.rubyonrails.org/active_record_validations_callbacks.html#conditional-validation)。

这可能是也可能不是您需要的实际代码，但它应该为您指明正确的方向。

```
validates :date, :if => :within_range?

def within_range?
    timeStart...timeEnd === date
end 
```

# javascript - 向我的网站添加 div 时调用函数

> ID：10273673
> 
> 赞同：1
> 
> 时间：2012-04-23T01:13:10.027
> 
> 标签：javascript, jquery, javascript-events

我有一个脚本，可以在我上传照片时向我的网站添加一个 div。现在我不想在添加这个 div 时调用函数。我试过这个，但它不起作用。

```
var divImg = document.createElement("div");
divImg.id = "divimg";
newImg.setAttribute('onload','urediBtnx(this)');
divImg.innerHTML = '<a href=""><img src="/imago/images/btnx.gif" class="btnx"></a>'; 
```

它应该调用这个函数：

```
function urediBtnx(dv){
    alert("blabla");
} 
```

问题是，如果我这样做，那么函数会被调用，但我需要获取 div，而不是 img。

```
divImg.innerHTML = '<a href=""><img onload="urediBtnx(this)" src="/imago/images/btnx.gif" class="btnx"></a>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T01:17:49.590

好吧，`<div>`'s 没有，`onload`因为它们没有加载。加载了文档，加载了图像，加载了 iframe - 只是 div。为了实现您想要的，您应该`urediBtnx()`立即从您调用的相同代码中调用`appendChild()`以将 div 插入到文档中，因为此时，div 就像它将要得到的那样“加载”。（如果您稍后更改 div 的内容，您可能需要从该代码再次调用该函数...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T01:17:51.040

Div 没有 onload 事件。它们仅适用于`<body>`, `<frame>`, `<frameset>`, `<iframe>`, `<img>`,`<link>`或`<script>`。

随后在添加到 DOM 后调用该函数是一种方法。

```
parent.appendChild(divImg);
urediBtnx(); 
```

如果您是 jQuery 库，则可以获得回调的可能性

```
$("#parent").append($(divImg), function() {
    urediBtnx();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T01:19:04.367

您可以将 onload 事件处理程序附加到 body、img、script 或 iframe 等元素，但不能附加到 div。

在您的场景中， div 是您的图像的祖父母。您可以将 onload 保留在图像上，然后使用 this.parentNode.parentNode 到达 div。

# string - 使用不同的字典编辑距离

> ID：10273680
> 
> 赞同：1
> 
> 时间：2012-04-23T01:14:47.510
> 
> 标签：string, levenshtein-distance, edit-distance

我的问题类似于[通过有效单词将一个单词转换为另一个单词的算法](https://stackoverflow.com/questions/2205540/algorithm-to-transform-one-word-to-another-through-valid-words)

但有一个主要区别。我有一个固定的词说“詹姆斯”和不同的字典作为 i/p。当然，我现在不能预处理字典。

所以我必须找到用不同的字典作为输入处理“JAMES”到“JOHNY”的最低成本。

无论如何我可以预处理“JAMES”这个词，以便我需要在运行时执行最少数量的编辑距离计算？你们有什么建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-28T17:08:39.877

我假设规则与您引用的问题相似，即一次只允许进行一次编辑，并且每个中间词都应该出现在给定的字典中。

1.  创建源字符串到目标字符串的单一编辑版本。例如：JOMES JAHES JAMNS JAMEY

对这些单词中的每一个进行递归，并为每个唯一单词继续创建节点。如果节点已经创建，只需创建边。这样就完成了预处理。

现在给定一个字典，找到字典中所有的第一级单词。对于所有匹配，进一步查找所有二级单词，依此类推，直到到达目标单词。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T02:16:13.253

首先，您需要正确定义您的规则——“编辑”是否允许添加或删除多个字符、替换一个字符等？

无论如何-我只是从显而易见的开始-创建一个图表，其中每个单词都链接到可以直接编辑的所有单词。然后，使用具有深度限制的递归，将访问过的元素标记为“脏”以避免循环，然后查看是否存在一次编辑解决方案、二次编辑解决方案等，直到找到解决方案或所有路径在该深度都是脏的。（如果您在“脏”成员中记录尝试的深度，则不必担心每次增加深度限制时都会清除它们。您还可以标记所有脏子树以避免再次递归到它们.)

# java - Java：JVM 可用的内核？

> ID：10273682
> 
> 赞同：7
> 
> 时间：2012-04-23T01:15:08.260
> 
> 标签：java, jvm, core, processors

在 Java 中`Runtime.getRuntime().availableProcessors()`，有以下 Javadoc 的方法：

> *返回 Java 虚拟机可用的处理器数量。此值可能会在虚拟机的特定调用期间发生变化。*

价值如何实际改变？例如，在什么情况下，JVM 可用的处理器会比物理安装的少？

乔纳斯

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-23T01:19:53.707

Linux 命令`taskset(1)`可用于强制进程使用特定的 CPU 或特定的 CPU 集；修改正在运行的程序以将其强制用于一个或多个处理器非常容易。例如，

```
taskset -p `pidof java` --cpu-list 0,5,7,9-11 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T01:17:50.557

在 Windows 中，可以通过一些简单的属性来更改应用程序允许使用的内核数量。在虚拟化环境中，您还可以将内核限制为 VM，以便您只能看到 VM 看到的内核。在 Linux/Unix 中，您可以设置核心亲和性，以便应用程序或用户无法使用所有核心，因此您安装的核心可能比 JVM 可见的多。

注意：这对于运行多个作业的机器很有用，在这些作业中您不希望出现高资源争用，并且希望资源配置不足（甚至过度配置）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-23T17:20:50.333

在某些硬件（服务器）上，可以在不重新启动系统的情况下热插拔处理器。这可能会导致处理器数量发生变化。尽管更常见的原因是系统管理员更改了处理器调度策略。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T01:18:10.937

您可以使用 java 命令上的选项自定义 Java 应用程序可用的资源。我实际上不知道开关的确切名称，但您可以自定义一堆东西。

为什么要为 JVM 实例分配更少的处理器？这取决于！也许您正在托管 Tomcat 并希望将可用资源分发给您的客户。

希望这可以帮助。

# lambda - lambda 演算的语法树

> ID：10273686
> 
> 赞同：6
> 
> 时间：2012-04-23T01:15:23.037
> 
> 标签：lambda, lambda-calculus

我试图弄清楚如何为下面的表达式绘制语法树。首先，这究竟是如何表现的？看起来它需要 1 和 2 作为参数，如果`n`是 0，它只会返回`m`。

![<code>添加</code>定义](../Images/23116f94eaae8a251a2d181404e5fd25.png)

另外，有人可以指出解析树的起点，还是一个例子？我一直找不到。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:30:48.213

Once the function is defined, you do applications of the arguments on the function itself, returning, thus, new functions, resultants of the applied args.

I'm not sure which language you used to wirte that code, but the application would result in something like:

```
\f.\n.\m.if isZero n then m else f (pred n) (succ m) 
```

Since `\f` is the definition of the function, you can write the above as:

```
add = (\n.\m.if (isZero n) then m else add (pred n) (succ m)) 
```

And the applications:

```
add = (\n.\m.if (isZero n) then m else add (pred n) (succ m))
add 1 2
(\n.\m.if (isZero n) then m else add (pred n) (succ m)) 1 2 
```

Replacing the outermost variable with the innermost argument (in this case, `n` by 1):

```
((**\n**.\m.if (isZero n) then m else f (pred **n**) (succ m)) **1**) 2
(\m.if (isZero 1) then m else add (pred 1) (succ m)) 2 
```

Resolving it a bit:

```
(\m.if (isZero 1) then m else add **(pred 1)** (succ m)) 2
(\m.if (isZero 1) then m else add 0 (succ m)) 2 
```

Applying the second argument, and resolving:

```
(**\m**.if (isZero 1) then **m** else add 0 (succ **m**)) **2**
(if (isZero 1) then 2 else add 0 (succ 2))
(if (isZero 1) then 2 else add 0 **(succ 2)**)
(if (isZero 1) then 2 else add 0 3) 
```

We know (isZero 1) is false; so, we solve the above expression and have the resulting:

```
(if **(isZero 1)** then 2 else add 0 3)
(if False then 2 else add 0 3)
add 0 3 
```

Which is the same as of applying 0 to function f, and then, 3 to the result. The above expression may be read as: "f" is: 0 applied to "f", and 3 applied to the result of the former application.

But f's been defined formerly as:

```
(\f.\n.\m.if (isZero n) then m else f (pred n) (succ m)) 
```

So, in this case, you'd have:

```
add = (\f.\n.\m.if (isZero n) then m else f (pred n) (succ m))

add 0 3 = \n.\m.if (isZero n) then m else add (pred n) (succ m)) 0 3
    = **\n**.\m.if (isZero **n**) then m else add (pred **n**) (succ m)) **0** 3
    = \m.if (isZero 0) then m else add (pred 0) (succ m)) 3
    = **\m**.if (isZero 0) then **m** else add (pred 0) (succ **m**)) **3**
    = if (isZero 0) then 3 else add (pred 0) (succ 3))
    = if **(isZero 0)** then 3 else add (pred 0) (succ 3))
    = if True then 3 else add (pred 0) (succ 3))
    = 3 
```

In the syntax tree you would simply show the expansions, reaching the result 3.

As a more straightforward example of the application process, considering the function "sum", defined as (\x.\y.x + y), the result of (sum 3 2) would be:

```
(sum 3 2)
((sum 3) 2)
(((sum) 3) 2)
(((\x.\y.x + y) 3) 2)
((\y.3 + y) 2)
(3 + 2)
5 
```

There's no restraint on the order one solves the expressions; lambda calculus is proved to have the same result what ever may be the order of the reductions used. [See ref](http://en.wikipedia.org/wiki/Church-Rosser).

As pointed out by Giorgio, `Y` is a fixed point combinator, that allows you to stop iterating at a certain point, if you're applications return to the same expression.

Since the application requires a finite number of iterations, the solution would be the same, simply noting the fixed pointer combination mark:

```
Y = (\f.\n.\m.if (isZero n) then m else f (pred n) (succ m))
Y add = (\f.\n.\m.if (isZero n) then m else f (pred n) (succ m)) add
Y add = (**\f**.\n.\m.if (isZero n) then m else **f** (pred n) (succ m)) **add**
Y add = \n.\m.if (isZero n) then m else add (pred n) (succ m)

Y add 0 3 = \n.\m.if (isZero n) then m else add (pred n) (succ m)) 0 3
    = **\n**.\m.if (isZero **n**) then m else add (pred **n**) (succ m)) **0** 3
    = \m.if (isZero 0) then m else add (pred 0) (succ m)) 3
    = **\m**.if (isZero 0) then **m** else add (pred 0) (succ **m**)) **3**
    = if (isZero 0) then 3 else add (pred 0) (succ 3))
    = if **(isZero 0)** then 3 else add (pred 0) (succ 3))
    = if True then 3 else add (pred 0) (succ 3))
    = 3 
```

Reference to [fixed point combinator](http://en.wikipedia.org/wiki/Fixed-point_combinator).

# javascript - 将节点聊天服务器与 ChuckK 链接以获取声音

> ID：10273687
> 
> 赞同：2
> 
> 时间：2012-04-23T01:15:24.623
> 
> 标签：javascript, c, node.js, chuck

我目前就读于加州艺术学院，主修音乐技术。我目前想出了一个我想尝试的想法，尽管随着我的深入，它变得有点复杂。我知道有更简单的方法可以做到这一点，但我想这样做是为了说我可以。我的想法是，我可能会使用预制节点聊天服务器，或者自己编写一个，并将其链接到 ChuckK（普林斯顿大学开发的一种编程语言）。这个想法是，当按下按钮或按下返回时，它会向 ChuckK 发送一个信号并告诉它播放声音（通过“Sndbuf”函数）。

我的问题是 ChucK 基于 C/C++ 而 Node 是基于 Javascript。我不确定如何让这两种语言进行交流。我知道 ChuckK 有能力在端口上侦听 Web 服务器请求，但我不是 TCP/IP 专家。

我知道其中一些可能不存在，我可能需要自己写很多。“它”是从框架到服务器的任何东西。任何有关如何使他们相互交流的建议将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T22:43:29.870

> 我知道 ChuckK 有能力在端口上侦听 Web 服务器请求，但我不是 TCP/IP 专家。

嗯？ChucK 本身支持 OSC 和 MIDI，但我从未见过任何 ChuckK 暴露原始 TCP 套接字的示例。即使有办法做到这一点，而我根本不知道，您也不想尝试使用 ChuckK 手动解析消息；Chuck 的弦乐操控能力是……弱，说白了。您最可能想要做的是让您的应用程序层将 websocket 请求转换为 OSC，因为使用 JavaScript 操作传入的用户请求比使用 ChuckK 容易得多。

这里有一个节点的 OSC 库： [https ://github.com/termie/node-osc](https://github.com/termie/node-osc)

这里有一个在 ChuckK 中接收 OSC 的示例：http: [//chuck.cs.princeton.edu/doc/examples/osc/r.ck](http://chuck.cs.princeton.edu/doc/examples/osc/r.ck)

[查克邮件列表在这里，通常是查克查克查询的最佳选择： https](https://lists.cs.princeton.edu/mailman/listinfo/chuck-users) ://lists.cs.princeton.edu/mailman/listinfo/chuck-users

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-24T22:47:57.307

你可以用管子吗？...chuck 支持标准 IO .... 使用 node 将消息通过管道传输到节点套接字侦听器中。

```
chuck some.ck | node accept_message_input.js 
```

所以触发一条消息，然后通过节点推送回客户端

现在相反... [http://chuck.cs.princeton.edu/doc/program/otfp.html](http://chuck.cs.princeton.edu/doc/program/otfp.html)（查找--remote 选项）有节点反引号（`）到节点--remote

[http://chuck.cs.princeton.edu/doc/program/otfp.html](http://chuck.cs.princeton.edu/doc/program/otfp.html)

我很高兴我找到了寻求夹头和节点集成的人......让我们这样做吧！！！ [https://github.com/copremesis](https://github.com/copremesis)

# php - 在 IFRAME 中传递 Session 信息

> ID：10273688
> 
> 赞同：2
> 
> 时间：2012-04-23T01:15:27.027
> 
> 标签：php, session, iframe

我有一个 iFRAME，它位于不在同一个域中的页面上。我正在尝试通过 url 传递会话 ID。我设置了这样的网址......

```
 applyonline.php?session_id=3u8ob97d5e3h35povbnuraih22 
```

然后我读了那个会话ID......

```
 $session_id = $_GET['session_id'];
   session_id($session_id); 
```

我试过设置这些无济于事......

```
 ini_set('session.use_cookies', '0');
   ini_set('session.use_trans_sid', '1'); 
```

我疯狂地用谷歌搜索了这个，找不到适合我的解决方案。

顺便说一句，Firefox 工作正常，因为它在 iFRAME 中接受 3rd 方 cookie，IE 是问题所在。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T12:08:24.197

改用`?PHPSESSID=`参数。

[文档](http://www.php.net/manual/en/session.idpassing.php)中描述了最干净的方法：

```
url.php?<?= htmlspecialchars(SID) ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T12:04:42.600

这似乎有效，即使它看起来仍在使用 cookie：

```
 header ( "p3p:CP=\"IDC DSP COR ADM DEVi TAIi PSA PSD IVAi IVDi CONi HIS OUR IND CNT\""); 
```

# python - 使用字典替换列表中的项目

> ID：10273691
> 
> 赞同：2
> 
> 时间：2012-04-23T01:16:14.603
> 
> 标签：python, dictionary

```
LowKeys = dict(La = 'z', Lb = 'x', Lc = 'c', Ld = 'v', Le = 'b', Lf = 'n', Lg = 'm')
MidKeys = dict(Ma = 'q', Mb = 'w', Mc = 'e', Md = 'r', Me = 't', Mf = 'y', Mg = 'u')
HighKeys = dict(Ha = 'i', Hb = 'o', Hc = 'p', Hd = '[', He = ']')
SharpLowKeys = dict(SLa = 's', SLc = 'f', SLd = 'g', SLf = 'j', SLg = 'k') 
FlatLowKeys = dict(FLa = 'a', FLb = 's', FLd = 'f', FLe = 'g', FLg = 'j') 
SharpMidKeys = dict(SMa = '2', SMc = '4', SMd = '5', SMf = '7', SMg = '8')
FlatMidKeys = dict(FMa = '1', FMb = '2', FMd = '4', FMe = '5', FMg = '7')
SharpHighKeys = dict(SHa = '9', SHc = '-', SHd = '=')
FlatHighKeys = dict(FHa = '8', FHb = '9', FHd = '-', FHe = '=')

notes = raw_input('Notes: ')
notes = notes.split() 
```

我想用值替换出现在两个注释和任何一个中的所有`dicts`项目`dict`。

前任：

```
notes = La, Ha, Lb
notes = z, i, x 
```

有没有办法做到这一点？还是比我正在尝试的更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T01:33:26.493

```
allKeys = {}
for subdict in (LowKeys, MidKeys, ..., FlatHighKeys):
    allKeys.update(subdict)

notes = [allKeys[note] for note in notes] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T01:18:40.153

将字典的所有内容放在一个大字典中，然后使用列表推导从字典中提取适当的值。

# java - 如何序列化一个类（JPanel），为什么？

> ID：10273695
> 
> 赞同：0
> 
> 时间：2012-04-23T01:16:55.840
> 
> 标签：java, serialization, jpanel

我如何序列化一个类（JPanel），**为什么**要序列化？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-29T20:19:56.717

嗯，一个原因是保存某种包含在 JPanel 中并由用户制作的绘图。我正在开发一个绘图板应用程序作为我的高级 Java 类的最终项目，我们应该将绘制的任何内容保存到文件中，并能够加载并调用该实例。

我遇到的困难是弄清楚序列化这些对象的“如何”部分，以及应该序列化什么，以便将文件加载回加载该对象或对象的已保存实例。

我会继续寻找线索......

# performance - 为什么基于 Haskell 枚举器的 IO 如此频繁地调用 sigprocmask？

> ID：10273696
> 
> 赞同：7
> 
> 时间：2012-04-23T01:16:58.683
> 
> 标签：performance, haskell, ghc

**修订摘要**

好吧，看起来系统调用肯定与 GC 有关，而根本问题只是 GC 发生得太频繁了。这似乎与 splitWhen 和 pack 的使用有关，我可以通过分析来判断。

[splitWhen 的实现](http://hackage.haskell.org/packages/archive/enumerator/0.4.17/doc/html/src/Data-Enumerator-Text.html#splitWhen)将每个块从惰性文本转换为严格文本，并将它们全部连接起来，因为它建立了一个块缓冲区。这势必会分配很多。

pack，因为它正在从一种类型转换为另一种类型，所以必须分配，这在我的内部循环中，所以这也是有道理的。

**原始问题**

我在基于 haskell 枚举器的 IO 中偶然发现了一些令人惊讶的系统调用活动。希望有人能对此有所了解。

我一直在玩弄我曾经写了几个月的快速 perl 脚本的 haskell 版本，时断时续。该脚本从每一行读取一些 json，然后打印出一个特定字段（如果存在）。

这是 perl 版本，以及我如何运行它。

```
cat ~/sample_input | perl -lpe '($_) = grep(/type/, split(/,/))' > /dev/null 
```

这是 haskell 版本（它的调用方式与 perl 版本类似）。

```
{-# LANGUAGE OverloadedStrings #-}
import qualified Data.Enumerator as E
import qualified Data.Enumerator.Internal as EI
import qualified Data.Enumerator.Text as ET
import qualified Data.Enumerator.List as EL
import qualified Data.Text as T
import qualified Data.Text.IO as TI
import Data.Functor
import Control.Monad
import qualified Data.Text.Lazy as TL
import qualified Data.Text.Lazy.IO as TLI
import System.Environment
import System.IO (stdin, stdout)
import GHC.IO.Handle (hSetBuffering, BufferMode(BlockBuffering))

fieldEnumerator field = enumStdin E.$= splitOn [',','\n'] E.$= grabField field

enumStdin = ET.enumHandle stdin

splitOn :: [Char] -> EI.Enumeratee T.Text T.Text IO b
splitOn chars = (ET.splitWhen (`elem` chars))

grabField :: String -> EI.Enumeratee T.Text T.Text IO b
grabField = EL.filter . T.isInfixOf . T.pack

intercalateNewlines = EL.mapM_ (\field -> (TI.putStrLn field >> (putStr "\n\n")))

runE enum = E.run_ $ enum E.$$ intercalateNewlines

main = do
  (field:_) <- getArgs
  runE $ fieldEnumerator field 
```

令人惊讶的是，haskell 版本的跟踪看起来像这样（实际的 JSON 被抑制，因为它是来自工作的数据），而 perl 版本则符合我的预期；一堆读取，然后是写入，重复。

```
55333/0x8816f5:    366125       3      0 sigprocmask(0x1, 0x10069BFA8, 0x10069BFAC)      = 0x0 0
55333/0x8816f5:    366136       3      0 sigprocmask(0x3, 0x10069BFAC, 0x0)      = 0x0 0
55333/0x8816f5:    367209       3      0 sigprocmask(0x1, 0x10069BFA8, 0x10069BFAC)      = 0x0 0
55333/0x8816f5:    367218       2      0 sigprocmask(0x3, 0x10069BFAC, 0x0)      = 0x0 0
55333/0x8816f5:    368449       3      0 sigprocmask(0x1, 0x10069BFA8, 0x10069BFAC)      = 0x0 0
55333/0x8816f5:    368458       2      0 sigprocmask(0x3, 0x10069BFAC, 0x0)      = 0x0 0
55333/0x8816f5:    369525       3      0 sigprocmask(0x1, 0x10069BFA8, 0x10069BFAC)      = 0x0 0
55333/0x8816f5:    369534       2      0 sigprocmask(0x3, 0x10069BFAC, 0x0)      = 0x0 0
55333/0x8816f5:    370610       3      0 sigprocmask(0x1, 0x10069BFA8, 0x10069BFAC)      = 0x0 0
55333/0x8816f5:    370620       2      0 sigprocmask(0x3, 0x10069BFAC, 0x0)      = 0x0 0
55333/0x8816f5:    371735       3      0 sigprocmask(0x1, 0x10069BFA8, 0x10069BFAC)      = 0x0 0
55333/0x8816f5:    371744       2      0 sigprocmask(0x3, 0x10069BFAC, 0x0)      = 0x0 0
55333/0x8816f5:    371798       5      2 select(0x1, 0x7FFF5FBFBA70, 0x7FFF5FBFB9F0, 0x0, 0x7FFF5FBFBAF0)        = 1 0
55333/0x8816f5:    371802       3      1 read(0x0, SOME_JSON, 0x1FA0)      = 8096 0
55333/0x8816f5:    372907       3      0 sigprocmask(0x1, 0x10069BFA8, 0x10069BFAC)      = 0x0 0
55333/0x8816f5:    372918       3      0 sigprocmask(0x3, 0x10069BFAC, 0x0)      = 0x0 0
55333/0x8816f5:    374063       3      0 sigprocmask(0x1, 0x10069BFA8, 0x10069BFAC)      = 0x0 0
55333/0x8816f5:    374072       2      0 sigprocmask(0x3, 0x10069BFAC, 0x0)      = 0x0 0
55333/0x8816f5:    375147       3      0 sigprocmask(0x1, 0x10069BFA8, 0x10069BFAC)      = 0x0 0
55333/0x8816f5:    375156       2      0 sigprocmask(0x3, 0x10069BFAC, 0x0)      = 0x0 0
55333/0x8816f5:    376283       3      0 sigprocmask(0x1, 0x10069BFA8, 0x10069BFAC)      = 0x0 0
55333/0x8816f5:    376292       2      0 sigprocmask(0x3, 0x10069BFAC, 0x0)      = 0x0 0
55333/0x8816f5:    376809       6      2 select(0x1, 0x7FFF5FBFBA70, 0x7FFF5FBFB9F0, 0x0, 0x7FFF5FBFBAF0)        = 1 0
55333/0x8816f5:    376814       5      3 read(0x0, SOME_JSON, 0x1FA0)      = 8096 0
55333/0x8816f5:    377378       3      0 sigprocmask(0x1, 0x10069BFA8, 0x10069BFAC)      = 0x0 0
55333/0x8816f5:    377387       3      0 sigprocmask(0x3, 0x10069BFAC, 0x0)      = 0x0 0
55333/0x8816f5:    378537       3      0 sigprocmask(0x1, 0x10069BFA8, 0x10069BFAC)      = 0x0 0
55333/0x8816f5:    378546       2      0 sigprocmask(0x3, 0x10069BFAC, 0x0)      = 0x0 0
55333/0x8816f5:    379598       3      0 sigprocmask(0x1, 0x10069BFA8, 0x10069BFAC)      = 0x0 0
55333/0x8816f5:    379604       3      0 sigreturn(0x7FFF5FBFF9A0, 0x1E, 0x1)        = 0 Err#-2
55333/0x8816f5:    379613       2      0 sigprocmask(0x3, 0x10069BFAC, 0x0)      = 0x0 0
55333/0x8816f5:    380667       3      0 sigprocmask(0x1, 0x10069BFA8, 0x10069BFAC)      = 0x0 0
55333/0x8816f5:    380678       2      0 sigprocmask(0x3, 0x10069BFAC, 0x0)      = 0x0 0
55333/0x8816f5:    381862       3      0 sigprocmask(0x1, 0x10069BFA8, 0x10069BFAC)      = 0x0 0
55333/0x8816f5:    381871       3      0 sigprocmask(0x3, 0x10069BFAC, 0x0)      = 0x0 0
55333/0x8816f5:    382032       6      2 select(0x1, 0x7FFF5FBFBA70, 0x7FFF5FBFB9F0, 0x0, 0x7FFF5FBFBAF0)        = 1 0
55333/0x8816f5:    382036       4      2 read(0x0, SOME_JSON, 0x1FA0)        = 8096 0
55333/0x8816f5:    383064       3      0 sigprocmask(0x1, 0x10069BFA8, 0x10069BFAC)      = 0x0 0
55333/0x8816f5:    383073       2      0 sigprocmask(0x3, 0x10069BFAC, 0x0)      = 0x0 0
55333/0x8816f5:    384118       3      0 sigprocmask(0x1, 0x10069BFA8, 0x10069BFAC)      = 0x0 0
55333/0x8816f5:    384127       2      0 sigprocmask(0x3, 0x10069BFAC, 0x0)      = 0x0 0
55333/0x8816f5:    385206       3      0 sigprocmask(0x1, 0x10069BFA8, 0x10069BFAC)      = 0x0 0
55333/0x8816f5:    385215       2      0 sigprocmask(0x3, 0x10069BFAC, 0x0)      = 0x0 0
55333/0x8816f5:    386348       3      0 sigprocmask(0x1, 0x10069BFA8, 0x10069BFAC)      = 0x0 0
55333/0x8816f5:    386358       3      0 sigprocmask(0x3, 0x10069BFAC, 0x0)      = 0x0 0
55333/0x8816f5:    387468       3      0 sigprocmask(0x1, 0x10069BFA8, 0x10069BFAC)      = 0x0 0
55333/0x8816f5:    387477      11      0 sigprocmask(0x3, 0x10069BFAC, 0x0)      = 0x0 0
55333/0x8816f5:    387614       6      2 select(0x1, 0x7FFF5FBFBA70, 0x7FFF5FBFB9F0, 0x0, 0x7FFF5FBFBAF0)        = 1 0
55333/0x8816f5:    387620       5      3 read(0x0, SOME_JSON, 0x1FA0)        = 8096 0
55333/0x8816f5:    388597       3      0 sigprocmask(0x1, 0x10069BFA8, 0x10069BFAC)      = 0x0 0
55333/0x8816f5:    388606       2      0 sigprocmask(0x3, 0x10069BFAC, 0x0)      = 0x0 0
55333/0x8816f5:    389707       3      0 sigprocmask(0x1, 0x10069BFA8, 0x10069BFAC)      = 0x0 0
55333/0x8816f5:    389716       2      0 sigprocmask(0x3, 0x10069BFAC, 0x0)      = 0x0 0
55333/0x8816f5:    390261       7      3 select(0x2, 0x7FFF5FBFBA70, 0x7FFF5FBFB9F0, 0x0, 0x7FFF5FBFBAF0)        = 1 0
55333/0x8816f5:    390273       6      3 write(0x1, SOME_OUTPUT, 0x1FA0)      = 8096 0 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-23T03:45:01.610

从评论中将此提升到最高级别：

> FWIW，我正在经历运行时（我们也在 IRC 中讨论这个），并且 sigprocmask 只有两种用途：GC 和 tty 驱动程序。后者不太可能，我建议进行分析以验证它正在执行大量 GC 并尝试找出原因。

事实证明（来自 IRC）它为 0.5MB 的数据分配了 90MB，并且垃圾收集器确实被触发了很多。所以现在要归结为为什么枚举器要进行如此多的额外分配。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-23T06:17:33.087

您是否担心分配或（开销来自？）对 sigprocmask 的调用？

如果是前者并且你想使用这个`enumerator`包，这个小改动可以帮助 4k 测试集减少大约 50%：8MB 的分配减少到 4MB，gen0 GC 从 15 到 6。

```
splitOn :: EI.Enumeratee T.Text T.Text IO b
splitOn = EL.concatMap (T.split fastSplit)

fastSplit :: Char -> Bool
fastSplit ','  = True
fastSplit '\n' = True
fastSplit _    = False 
```

之前（来自 的统计数据`+RTS -sstderr -RTS`）：

```
       在堆中分配了 8,212,680 字节
         GC 期间复制了 696,184 个字节
         148,656 字节最大驻留（1 个样本）
          30,664 字节最大斜率
               2 MB 总内存在使用（0 MB 由于碎片丢失）

                                    总时间（经过） 平均暂停 最大暂停
  Gen 0 15 colls，0 par 0.00s 0.00s 0.0001s 0.0005s
  Gen 1 1 colls, 0 par 0.00s 0.00s 0.0010s 0.0010s

```

后：

```
       在堆中分配了 3,838,048 字节
         GC 期间复制了 689,592 个字节
         148,368 字节最大驻留（1 个样本）
          27,040 字节最大斜率
               2 MB 总内存在使用（0 MB 由于碎片丢失）

                                    总时间（经过） 平均暂停 最大暂停
  Gen 0 6 colls，0 par 0.00s 0.00s 0.0001s 0.0003s
  Gen 1 1 colls, 0 par 0.00s 0.00s 0.0006s 0.0006s

```

这是一个相当合理的改进，但肯定还有一些不足之处。我没有过多地踢枚举器，而是尝试在导管 0.4.1 中重写它，只是为了踢球。应该是等价的...

```
import Data.Conduit as C
import qualified Data.Conduit.Binary as Cb
import qualified Data.Conduit.List as Cl
import qualified Data.Conduit.Text as Ct
import qualified Data.Text as T
import qualified Data.Text.IO as TI
import Control.Monad.Trans (MonadIO, liftIO)
import System.Environment
import System.IO (stdin)

grabField :: Monad m => String -> Conduit T.Text m T.Text
grabField = Cl.filter . T.isInfixOf . T.pack

printField :: MonadIO m => T.Text -> m ()
printField field = liftIO $ do
  TI.putStrLn field
  putStr "\n\n"

fastSplit :: Char -> Bool
fastSplit ','  = True
fastSplit '\n' = True
fastSplit _    = False

main :: IO ()
main = do
  field:_ <- getArgs
  runResourceT $ Cb.sourceHandle stdin
              $$ Ct.decode Ct.utf8
              =$ Cl.concatMap (T.split fastSplit)
              =$ grabField field
              =$ Cl.mapM_ printField 
```

...但由于某种原因分配并保留更少的内存：

```
         在堆中分配了 835,688 字节
           GC 期间复制了 8,576 个字节
          87,200 字节最大驻留（1 个样本）
          19,968 字节最大斜率
               1 MB 总内存在使用（0 MB 由于碎片丢失）

                                    总时间（经过） 平均暂停 最大暂停
  Gen 0 1 colls, 0 par 0.00s 0.00s 0.0000s 0.0000s
  Gen 1 1 colls, 0 par 0.00s 0.00s 0.0008s 0.0008s

```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-23T03:01:00.030

如果在这些 sigsetmasks 之间读取的数据量很大，我的第一个猜测是运行时在 gc 运行之前执行 sigsetmask，因此 gc 不会因堆处于不一致状态而中断。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-23T03:35:44.090

多于评论而不是答案：如果您通过 GHC 源 grep，您将看到`posix/TTY.c`(TERMIOS 代码) 和`sm/GC.c`(via `{,un}blockUserSignals`) 有最有可能的候选人。您可以使用调试符号编译 GHC，或者只添加一些虚拟（唯一）系统调用，以确保您可以区分两个系统调用配置文件以找出答案。另一个便宜的测试是删除任何终端交互，如果掩蔽行为消失，那么这将是支持 GC 的温和证据（没有答案）。

编辑：我应该承认一些库代码也可以调用`sigprocmask`，我忽略了它作为不太可能的来源，但它实际上可能是问题！

# ruby-on-rails - save() 上的 Backbone.js 发布到 create 而不是 Update 并且使用 JS 而不是 JSON？

> ID：10273697
> 
> 赞同：0
> 
> 时间：2012-04-23T01:17:17.397
> 
> 标签：ruby-on-rails, backbone.js

我正在尝试使用 Backbone.js 模型来跟踪用户看到的指南。我想将值存储在 User.guides 中，这是 rails 中的序列化字段。

```
var Model = Backbone.Model.extend({
    urlRoot : '/users',
    defaults : {
        user : {
            guides : {
                step1 : false,
                step2 : false           
            }           
        }
    }

}); 
```

这就是负载时发生的事情。稍后当我尝试进行更新时：

```
me.model.set({
    user : {
        room_wizard : {
            project_completed : true
        }           
    }
});

me.model.save(); 
```

这里的问题是 Rails 出错，原因如下：

*   Backbone.js 在应该更新为 JSON 时发布以创建为 JS？为什么？

想法？我是否错误地处理了上述问题？我是新来的backbone.js 谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T08:28:41.293

Backbone在服务器之间进行选择的经验法则是模型`POST`是否具有。`PUT``id`

*   如果 Model**有**Backbone将`id`使用动词`PUT`。
*   如果 Model**没有**Backbone将`id`使用动词`POST`。

# python - 如何使用 Python 的 mysqldb 强制刷新网页？

> ID：10273698
> 
> 赞同：0
> 
> 时间：2012-04-23T01:17:20.003
> 
> 标签：python, html, refresh, mysql-python

对于数据库项目，我们使用 MySQL 数据库，与 Python 和“mysqldb”库进行交互。对于实际界面，我们使用 HTML 模板，可以轻松地在 Python 代码中获取/发送值。

对于我们的最后一步，其中一部分涉及等待在线找到另一个玩家，然后开始游戏。我们*可以*通过告诉玩家刷新直到他们找到某人来做到这一点，但我更愿意让它在玩家的挑战被接受后强制刷新。

有什么方法可以使用 mysqldb 做到这一点？我还没有找到一个，可以使用一些帮助，因为这是我第一个使用所有这些东西的大项目。

谢谢！

# java - google appengine 中 java 后端的示例代码

> ID：10273700
> 
> 赞同：6
> 
> 时间：2012-04-23T01:17:49.410
> 
> 标签：java, google-app-engine

当我阅读后端文档时，它告诉如何配置等。后端的代码是什么样的？它只是一个在 backend.xml 文件中有额外条目的 servlet 吗？

我尝试使用类 com.xyz.Mybackend 和 servlet 名称 Mybackend 创建一个 servlet。

```
public Mybackend  extends HttpServlet{

 public void doGet(HttpServletRequest req, HttpServletResponse resp){

   while(true){
     //do something
     try{
      Thread.sleep(xyz);
     }catch(Exception ex){

     }
   }

} 
```

然后我在 backend.xml 中添加了以下几行

```
<backends>
    <backend name="Mybackend">
    <class>B1</class>
    <options>
    <dynamic>true</dynamic>
    </options>
    </backend>
</backends> 
```

这是正确的/足够的吗？如果是的话。我现在如何启动我的后端？它是通过调用后端 servlet url 来实现的吗？

`http://localhost/mybackenurl` ?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T05:34:49.433

1.  是的，后端只是 servlet。

2.  您必须通过`appcfg`脚本手动启动后端：[https ://developers.google.com/appengine/docs/java/backends/overview#Backend_States](https://developers.google.com/appengine/docs/java/backends/overview#Backend_States)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-27T12:40:19.937

我知道你的意思。我第一次阅读时会发现整个后端概述部分会更加清晰，如果它在顶部说，后端只是 servlet 的特殊实例。

这里没有人提到的启动后端的一种流行方法是使用推送队列，如此处所述，[https://developers.google.com/appengine/docs/java/taskqueue/overview-push#Java_Push_queues_and_backends](https://developers.google.com/appengine/docs/java/taskqueue/overview-push#Java_Push_queues_and_backends)

# android - 操作由 SimpleAdapter 填充的 ListView 中的一行

> ID：10273706
> 
> 赞同：0
> 
> 时间：2012-04-23T01:18:08.980
> 
> 标签：android, listview, simpleadapter

我使用以下内容填充 ListView：

```
list = (ListView) findViewById(R.id.historylist);
ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();
String[] titles = new String[]{"transactionID","date","description","redeem","reward","status"};

try{

for(int i=0;i<rows.length();i++){
    map = new HashMap<String, String>();
    for(int n=0;n<allRows.getJSONArray(i).length();n++){
        map.put(titles[n], allRows.getJSONArray(i).getString(n));
    }
    mylist.add(map);
}

mSchedule = new SimpleAdapter(
    History.this,
    mylist,
    R.layout.history_row,
    titles,
    new int[] {R.id.textView0, R.id.textView1, R.id.textView2, R.id.textView3, R.id.textView4, R.id.textView5});

list.setAdapter(mSchedule);

for(int i=0; i<mylist.size(); i++)
    if(((Map<String, String>) mSchedule.getItem(i)).get("status").equals("0"))
        try{
            // SET BACKGROUND COLOR OF ROW
        }catch(Exception e){
            Log.e("AAA Error getting ListView row", e.toString());
        }

}catch(Exception e){
Log.e("Error Creating ListView", e.toString());
} 
```

我想更改任何包含“0”状态的 ListView 行的背景颜色。

有任何想法吗？

**新：这是更新后的代码 - 更好（除了我必须手动从 JSONArray 中删除字符的部分.. eww..）**

```
private void showListView(JSONArray rows, JSONArray totals){

    list = (ListView) findViewById(android.R.id.list);
    ArrayList<String[]> rowValues = null;
    String[] r = null;

    try{
        rowValues = new ArrayList<String[]>();
        for (int i=0;i<rows.length();i++){

            r = rows.get(i).toString().replaceAll("\\[\"", "").replaceAll("\"\\]", "").split("\",\"");
            rowValues.add(r);
        }

        mba = new MyBaseAdapter(this, rowValues);
        list.setAdapter(mba);

    }catch(Exception e){
        Log.e("showListView() ERROR", e.toString());
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T01:33:17.970

我不认为你可以。实现您所说的唯一方法是创建一个扩展 BaseAdapter 的新类并在该类中的 getView() 方法上更改视图的背景颜色

# c - 错误编译进程 SIGALRM kill

> ID：10273720
> 
> 赞同：4
> 
> 时间：2012-04-23T01:19:34.997
> 
> 标签：c, linux, fork, alarm

这个程序会创建一个子进程，子进程会等待一个ALARM信号，当这个信号在3秒后到达时，f函数会抓取父进程ID，并发送一个SIGINT信号杀死它，所以子进程会被杀死3秒后的父母

```
#include <stdio.h>
    #include <unistd.h>
    #include <signal.h>
    #include <string.h>

    void f(int sig)
    {
        kill(getppid(),SIGINT);
    }

    main()
    {
        int f=fork();
        if(f==0)
        {
            signal(SIGALRM,f);
            alarm(3);
        }
        else
        {
            pause();
        }
    } 
```

我收到了这个错误：

```
test13.c: In function ‘main’:
test13.c:16:3: warning: passing argument 2 of ‘signal’ makes pointer from integer without a cast
/usr/include/signal.h:101:23: note: expected ‘__sighandler_t’ but argument is of type ‘int’ 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T01:21:23.713

停止`f`使用你的变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T01:23:40.507

您已[根据范围](http://en.wikipedia.org/wiki/Variable_shadowing)[重用名称`f`](http://en.wikipedia.org/wiki/Variable_shadowing)来指代不同的事物。

# php - 按照 PHP 中的要求验证用户输入的数据

> ID：10273725
> 
> 赞同：0
> 
> 时间：2012-04-23T01:20:34.737
> 
> 标签：php

如何在这些要求中验证用户输入的数据：

1.  小写字母，
2.  没有特殊字符，也没有空格字符，
3.  并且只允许一个连字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T01:24:48.763

未经测试：

```
if (!preg_match('/^(?=[a-z])(?=\-{1})$/', $string))
{
    //invalid
} 
```

# c# - 将 if 语句转换为条件语句

> ID：10273727
> 
> 赞同：0
> 
> 时间：2012-04-23T01:20:58.767
> 
> 标签：c#, regex, replace

我正在尝试将`IF`语句转换如下

```
SET RESULT = IF(C>(X-2), (A+B), C) //IF C< X-2 return A+B otherwise return C 
```

条件语句如下

```
SET RESULT = C>(X-2)?(A+B):C 
```

我编写了一个代码，它扫描整个字符串并查看`IF`,`(`和`,`. 当有超过 1 个`IF`语句时，我的算法不起作用，如下所示

```
SET RESULT = IF(C>(X-2), IF(P>C,2,3),C) 
```

这是代码...

```
 string data = "SET RESULT=IF(C>(X-2), (A+B), C)";
        string output = string.Empty;

        int indexofIF = data.IndexOf("IF");
        int obCount = 0;
        int cbCount = 0;
        if (indexofIF > -1)
        {
            string script = data.Substring(indexOfIF, (data.Length-indexOfIF-1))
            for(int index=0; index<script.Length; index++)
            {
                int obIndex = data.IndexOf('(', index);
                if(obIndex>-1)
                    obCount++;
                int cbIndex = data.IndexOf(')', index);
                if(cbIndex>-1)
                    cbCount++;

                if(obCount==cbCount)//Found the end of If statement
                {
                    string tempData = data.Substring(0, index);
                    int count = tempData.Count(f => f == ',');//Get the number of occurences of ','
                    if (count == 2)//There are only 2 commas
                    {
                        int firstIndex = tempData.IndexOf(',');
                        int lastIndex = tempData.LastIndexOf(',');
                        string condtion = tempData.Substring(3, (firstIndex - 4));
                        string trueCond = tempData.Substring(firstIndex + 1, (lastIndex - firstIndex - 1));
                        string falseCond = tempData.Substring(lastIndex + 1, (index - lastIndex - 1));
                        output = condtion + "?" + trueCond + ":" + falseCond;

                    }
                    else //More than 2 commas
                    {

                    }
                }

            }

        } 
```

我不确定这是否适用于复杂的场景。有没有更好的其他方法来做到这一点？也许使用`regex`或任何其他字符串替换操作..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T01:26:26.053

你在正确的轨道上。

我会：

*   将每个字符读入一个小缓冲区
*   评估缓冲区以查找单词“IF”
*   设置一个标志，这样你就知道你在一个 IF 语句中
*   清除缓冲区
*   评估括号
*   跟踪括号的打开/关闭
*   执行任何附加逻辑（例如逗号解析）
*   继续直到字符串的结尾

> 也许使用正则表达式或任何其他字符串替换操作..

`(IF.*?(?=IF|$))`分解出多个 IF 语句，但它不处理额外的解析，并要求输入数据遵循严格的结构。跟踪括号是棘手/不可能的（请参阅此答案的评论）并且更容易由状态机处理。

就个人而言，我喜欢逐字符解析的控制/灵活性。[Code Mirror](http://codemirror.net/)等工具使用这种方法来解析源代码。

`A + B > C`一旦成功提取了字符串的一部分（例如，将公式解构为它的部分），您可能会发现正则表达式很有用。

# xna - 在 XNA 中拉长或缩放模型的肢体

> ID：10273729
> 
> 赞同：1
> 
> 时间：2012-04-23T01:21:23.587
> 
> 标签：xna

我想创建一个模型并将其导入 XNA 游戏。

我希望能够复制此模型并在执行期间对其进行编程修改（目的是使用相同的模型来表示游戏中的多个角色）。比如我想让腿稍微长一点或者短一点，或者腰部稍微胖一点或者瘦一点，或者头部稍微小一点或者大一点。

我知道如何使用变换来修改网格，但似乎我在这里需要的是仅将变换应用于该网格中的顶点子集。我不知道如何在 XNA 中执行此操作，或者它是否受支持。

两个问题：
1) XNA 支持这样的功能吗？
2）如果是这样，使用什么样的方法来获得预期的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T18:52:58.710

您要查找的内容称为`retargeting`. 你想有多个`skeleton`s 但只有一个`model`.

使用骨骼动画，每个骨骼都会影响`model`使用权重的顶点，称为`skinning`. 如果您有不同的骨架，则模型保持不变，但其顶点变换的方式会发生变化。

对您的问题的简短回答：

1.  不，但可能存在项目可以帮助您一路走来。
2.  这取决于您尝试使用的解决方案。它都会影响角色在引擎中动画、导出和回放的方式。

这个关于[stackexchange](https://gamedev.stackexchange.com/questions/27058/how-to-programatically-retarget-animations-from-one-skeleton-to-another)或[这个项目](http://www.digitalrune.com/Products/GameEngine/Animation.aspx)的问题以获取更多信息。

我从未尝试在 XNA 中这样做，只是“商业游戏引擎”。

# javascript - jQuery 效果 - 叫什么名字？

> ID：10273734
> 
> 赞同：0
> 
> 时间：2012-04-23T01:22:03.150
> 
> 标签：javascript, jquery

曾经有一个 jQuery 效果，当你初始化它时.. DIV/CLASS 会同时向上滑动和消失。我知道这不是粉扑……但它是某种东西。我记得是因为我在做滑动/淡入淡出之后发现了它，当我想......哦，我本来可以这样做的。

但我再也无法在 jQuery UI 网站上找到它了……帮助？

我尝试搜索谷歌，尤其是 jQuery API： [http ://api.jquery.com](http://api.jquery.com)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T01:24:24.453

听起来像[动画](http://api.jquery.com/animate/)和[淡出](http://api.jquery.com/fadeOut/)一起。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T01:32:51.643

这些链接可能会帮助您 slideUp 和 fadeOut 是您所需要的

[jQuery：淡出然后上滑](https://stackoverflow.com/questions/734554/jquery-fadeout-then-slideup)

带有示例的更多信息

1\. [http://www.elated.com/articles/super-easy-animated-effects-with-jquery/](http://www.elated.com/articles/super-easy-animated-effects-with-jquery/)

2\. [http://www.htmlgoodies.com/tutorials/forms/article.php/3896356/HTML-Forms-jQuery-](http://www.htmlgoodies.com/tutorials/forms/article.php/3896356/HTML-Forms-jQuery-) Basics----Effects.htm

# python - django 多对多字段：仅预取主键

> ID：10273744
> 
> 赞同：8
> 
> 时间：2012-04-23T01:23:55.847
> 
> 标签：python, database, django, optimization, django-queryset

我正在尝试优化 Django 应用程序的数据库查询。这是一个简化的示例：

```
class Label(models.Model):
    name = models.CharField(max_length=200)
    # ... many other fields ...

class Thing(models.Model):
    name = models.CharField(max_length=200)
    labels = models.ManyToManyField(Label) 
```

我有一个函数可以获取所有`Label`s 和`Thing`s 并将它们放入 JSON 数据结构中，其中s 使用它们的 s （主键）`Thing`引用s 。像这样的东西：`Label``id`

```
{
    'labels': [
        { 'id': 123, 'name': 'label foo' },
        ...
    ],
    'things': [
        { 'id': 45, 'name': 'thing bar', 'labels': [ 123, ... ] },
        ...
    ]
} 
```

使用 Django 获取这种数据结构的最有效方法是什么？假设我有**L** `Label` s 和**T** `Thing` s，平均值`Thing`有**x** `Label` s。

**方法一：**

```
data = {}
data['labels'] = [model_to_dict(label) for label in Label.objects.all()]
data['things'] = [model_to_dict(thing) for thing in Thing.objects.all()] 
```

这使得 (1 + 1 + **T** ) 数据库查询，因为`model_to_dict(thing)`需要`Label`为每个`Thing`单独获取 s。

**方法二：**

```
data = {}
data['labels'] = [model_to_dict(label) for label in Label.objects.all()]
data['things'] = [model_to_dict(thing) for thing in
                    Thing.objects.prefetch_related('labels').all()] 
```

这只会进行 (1 + 1 + 1) 次数据库查询，因为获取的s 现在在单个附加查询中预取了`Thing`它们的 s。`Label`

**这仍然不能令人满意。** `prefetch_related('labels')`将获取相同的许多副本`Label`，而我只需要它们`id`的 s。有没有办法只预取`id`s 的`Label`s ？我试过`prefetch_related('labels__id')`了，但没有用。我还担心因为**T**很大（数百个），`prefetch_related('labels')`导致 SQL 查询带有很大的`IN`子句。**L**要小得多（< 10），所以我可以这样做：

**方法三：**

```
data = {}
data['labels'] = [model_to_dict(label) for label in
                    Label.objects.prefetch_related('thing_set').all()]
things = list(Thing.objects.all())
# plug in label ids by hand, and also fetch things that have zero labels
# somehow 
```

这会产生一个较小的`IN`子句，但仍然不能令人满意，因为如果 a有多个s，则会`prefetch_related('thing_set')`获取重复的s。`Thing``Thing``Label`

**概括：**

`Label`并由`Thing`a 连接`ManyToManyField`。无论如何，我正在获取**所有** `Label`s 和`Thing`s 。那么我如何有效地获取他们的多对多关系呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T02:09:13.473

我知道了。感谢 ilvar，他对问题的评论将我指向了[`through`表格](https://docs.djangoproject.com/en/dev/ref/models/fields/#django.db.models.ManyToManyField.through)。

> 如果您未指定显式直通模型，则仍有一个隐式直通模型类可用于直接访问为保存关联而创建的表。它具有三个字段来链接模型。

长话短说：

```
# Fetch all labels and things:
labels = list(Label.objects.all())
things = list(Thing.objects.all())
# Fetch all label-thing pairs:
labels_of = defaultdict(lambda: [])
for pair in Thing.labels.through.objects.filter(label__in=labels):
    labels_of[pair.thing_id].append(pair.label_id)
# Put everything together:
data = {}
data['labels'] = [model_to_dict(label) for label in labels]
data['things'] = []
for thing in things:
    thing_dict = model_to_dict(thing, exclude='labels')
    thing_dict['labels'] = labels_of[thing.id]
    data['things'].append(thing_dict) 
```

这会进行 (1 + 1 + 1) 次查询，并且不会重复获取任何内容。我还可以将第一个 for 循环更改为：

```
for pair in Thing.labels.through.objects.filter(thing__in=things): 
```

如果我`Label`的 s 多于`Thing`s，这将导致查询的`IN`子句更小。

[Django-debug-toolbar](https://github.com/django-debug-toolbar/django-debug-toolbar)的`debugsqlshell`管理命令非常适合实际查看一段代码正在执行的查询。

# c - 使用 Fork() 计算多个文件的行数，其中每个孩子单独运行

> ID：10273745
> 
> 赞同：0
> 
> 时间：2012-04-23T01:24:12.880
> 
> 标签：c, linux, fork

继我之前的问题 [here][1] 之后，我现在想计算多个文件的行数，我想在每个文件中放置一个进程的位置，一个子进程，这将为`calculateLines`他自己运行该方法文件，并找到其文件的行数。

我写`fork()`为系统调用（称为`my_fork()`），这是代码：

```
 int main(int argc, char *argv[])
 {

     typedef struct fileChild {
       pid_t processID;
       char *fileName;
       int processFileLines;
     }  child;

     child children[argc];        // array of children

     int n = 0;   // using this to tell how much lines in a single file
     int i = 0;   // using this to iterate the number of files
     char dig;    // using this to convert into char the number of lines

     while (i < argc )
     {
         children[i].processID = my_fork();  // create process 'i' for file 'i'
         children[i].fileName = argv[i];
         children[i].processFileLines = calculateLines(children[i].fileName);
     }

     ....
     ....

     return 0;
 } 
```

我的问题：这是子进程如何检查他的文件（文件`i`）的行数吗？
我看不出这个（分叉）如何改进我的代码......请放轻松，这是我第一次使用流程。

**最终版：**

```
#include <stdio.h>

 typedef unsigned int size_t;
 typedef signed ssize_t;

 int main(int argc, char *argv[])
 {

     char myArray[15];

     int n = 0;
     int i = 0;
     pid_t pid;

     for (i = 1; i < argc; i++)
     {

         if ((pid = my_fork()) == 0)

         {
             n = calculateLines(argv[i]);
             sprintf (myArray, "\nfile%d: %d \n", i,n);
             my_write(1,myArray,15);

         }
        else if (pid < 0)
            break;

     }

     return 0;
 } 
```

在终端测试：

```
a@ubuntu:~/Desktop$ ./ProjOsFInal somefile.txt about.html epl-v10.html
a@ubuntu:~/Desktop$ 
file2: 300 

file1: 133 

file3: 327 

file2: 300 

file3: 327 

file3: 327 

file3: 327 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T01:45:31.517

编辑：经过编辑以反映您的修订和表格更改

fork() 返回它创建的子进程 ID，如果是创建的子进程，则返回 0。因此，如果您可以使用它来区分您是需要更多分叉的父母，还是应该忙于数线的孩子。

如果我理解正确，您可能希望在设置局部变量（例如文件名）后进行分叉。这是一个简化的示例：

```
const char *local_filename;
pid_t f;
int i = 0;
while (i < argc) {
  i++;
  local_filename = argv[i];
  f =  my_fork();
  if (f == 0) { // fork() returns 0 if we are a child, so we want to be a child prcess here
    calculate stuff;
    ...
    break; // Since we're a child we don't want to go on and spawn more, so we exit the loop and are done
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T03:36:38.687

我认为您可以稍微简化代码。您遇到的一个问题是您当前正在处理`argv[0]`，这是程序的名称，而不是其任何参数的名称。

```
int main(int argc, char **argv)
{
    pid_t kids[argc];   // VLA
    int n_kids = 0;

    for (int i = 1; i < argc; i++)
    {
        pid_t pid;
        if ((pid = my_fork()) == 0)
        {
            be_childish(argv[i]);
            /*NOTREACHED*/
            exit(EXIT_FAILURE);
        }
        else if (pid < 0)
            break;
        else
            kids[n_kids++] = pid;
    }
    int status;
    while ((pid = waitpid(-1, &status, 0)) > 0)
        n_kids = note_death_of_child(pid, status, n_kids, kids);
    return(0);
} 
```

该`note_death_of_child()`函数只是在列表中查找条目。实际上，您确实不需要此处的子列表，但您可以注意每个子退出时，以及它的退出状态是什么。

该`be_childish()`函数被赋予一个文件的名称。它打开文件，读取它，关闭它，写入任何需要写入的内容，然后退出。`exit()`对函数循环中的调用`main()`是作为一种防御机制来防止错误实现的幼稚函数。

# html - 如何防止 Ajax 元素换行？

> ID：10273748
> 
> 赞同：0
> 
> 时间：2012-04-23T01:24:56.970
> 
> 标签：html, css, ajax, resize

我在一个 HTML 页面中有一个 div，它通过**Ajax**注入了 12 个 div 。当我调整浏览器窗口的大小时，元素或其包含的 div 似乎会改变大小，其中 div 开始以不合需要的方式换行。当页面为 100% 大小时，div 对齐如下：

```
|div| |div| |div| |div| |div| |div|
|div| |div| |div| |div| |div| |div| 
```

当我缩小窗口时，`div`s 对齐如下：

```
|div| |div| |div| |div| |div|
|div| |div| |div| |div| |div|
|div| |div| 
```

所以，我试图让 div 在调整窗口大小时保持在第一个位置。我找到了解决方案，例如使用 CSS 将包含设置`div`为固定宽度，并使用属性`white-space: nowrap`.

然而，这些不适用于我的页面，似乎 Ajax 是原因。在我的 Ajax 的 PHP 文件中，我创建了每个`div`在里面有一个链接和一个表，如下所示：

```
 $str = "<div class = 'productdiv'>
                <a class='product' id='$id' title = '$name'>
                    <table id = 'product-table' onmouseover = 'darkenProduct(this);' onmouseout = 'lightenProduct(this);'>
                        <tr>
                            <td>$name</td>
                        </tr>
                        <tr>
                            <td><img src = '$img' /></td>
                        </tr>
                        <tr>
                            <td>$price</td>
                        </tr>
                    </table>
                </a>
            </div>"; 
```

这是每个 Ajax 元素和包含`div`“产品”的相关 CSS：

```
#products
{
    width: 900px;

    margin-left: 2%;
}
/*product table (ID SOURCE FROM PHP -- for each individual product) */
#product-table
{
    float: left;

    width: 138px;
    height: 142px;

    color: #333;
    text-decoration: none;

    border: 1px solid black;
    background-color: #eee;

    /* for rounded borders */
        -moz-border-radius: 25px; /* for firefox */
        border-radius: 25px;
}
#product-table a:link, a:visited
{           
    display: -moz-box; /* for firefox */
    display: block; 

    width: 100%;
    height: 100%;
}
#product-table img
{
    width: 138px;
    height: 142px;
    border: 1px solid black;
} 
```

包含 div “产品” 嵌套在中心列的较大 div 中。这是用于此的CSS：

```
/* center column */
#center
{
    /* for stretching the center column beyond the window height */
        min-height: 100%;

    margin-left: auto;
    margin-right: auto;

    text-align: center;
} 
```

...那么，我该如何防止这些`div`s 包装，以及我应该采用哪些 CSS 方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T01:28:57.430

您还应该将它们的容器设置为固定宽度。您也可以尝试添加一个`min-width`等于宽度的值。

编辑：抱歉，您应该继续将它们向左浮动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T01:33:20.007

考虑到容器的设置宽度为 900 像素......我可以看到它们包装的唯一原因是它们实际上并没有像你想象的那样被注入容器，或者可能是你的中间列的其他一些 css 怪癖

当窗口调整大小时，应添加一个 900 像素宽的滚动条，并且产品表根本不应该移动。

# sql - Sql 条件非空约束

> ID：10273750
> 
> 赞同：29
> 
> 时间：2012-04-23T01:25:03.780
> 
> 标签：sql, constraints, notnull

我很想知道是否可以在 sql 中创建条件非空约束？换句话说，是否可以创建一个约束，使得 B 列可以为空，只要 A 列包含让我们说“新”，但如果 A 列的内容更改为其他内容，那么 B 列不再允许为空？
为了扩展这一点，只要 A 列显示“新”，就有可能使 B 列必须为空或为空？
谢谢大家 :D

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-23T01:58:18.470

这对于 CONSTRAINT CHECK 来说非常好。只需这样做：

要求：

> 是否可以创建一个约束，使得 B 列可以为空，只要 A 列包含让我们说“新”，但如果 A 列的内容更改为其他内容，则 B 列不再允许为空？

注意这句话：B 列**可以**为空

解决方案：

```
create table tbl
(
    A varchar(10) not null,
    B varchar(10),

    constraint uk_tbl check
    (
      A = 'NEW' -- B can be null or not null: no need to add AND here
      OR (A <> 'NEW' AND B IS NOT NULL)
    )
); 
```

您可以进一步简化它：

```
create table tbl
(
    A varchar(10) not null,
    B varchar(10),

    constraint uk_tbl check
    (
      A = 'NEW' 
      OR B IS NOT NULL
    )
); 
```

* * *

要求与上述要求互不兼容：

> 为了扩展这一点，只要 A 列显示“新”，就有可能使 B 列必须为空或为空？

注意这句话：B 列**必须**为空

```
create table tbl
(
    A varchar(10) not null,
    B varchar(10),

    constraint uk_tbl check
    (
      (A = 'NEW' AND B IS NULL)
      OR A <> 'NEW'
    )
); 
```

可以用这个来简化，更简单但可能不像上面那样可读：

```
create table tbl
(
    A varchar(10) not null,
    B varchar(10),

    constraint uk_tbl check
    (
      A <> 'NEW'
      OR B IS NULL
    )
); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T08:09:09.280

我认为您的第一个要求是：

```
IF ( B IS NULL ) THEN ( A = 'NEW' ) 
```

应用蕴涵重写规则：

```
IF ( X ) THEN ( Y )   <=>   ( NOT ( X ) OR ( Y ) ) 
```

在你的情况下；

```
( NOT ( B IS NULL ) OR ( A = 'NEW' ) ) 
```

小幅重写以利用 SQL 语法：

```
( B IS NOT NULL OR A = 'NEW' ) 
```

* * *

您的第二个陈述（“扩展”）要求：

```
IF ( A = 'NEW' ) THEN ( B IS NULL ) 
```

应用重写规则：

```
( NOT ( A = 'NEW' ) OR ( B IS NULL ) ) 
```

小改写：

```
( A <> 'NEW' OR B IS NULL ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T01:33:13.850

编辑：如其他答案中所述， CHECK 是最好的方法，而不是我最初建议的触发器。原文如下：

* * *

正如 dbaseman 建议的那样，~~触发器是要走的路~~（不是这样）。尝试这样的事情（未经测试）：

```
CREATE OR REPLACE TRIGGER test
  BEFORE UPDATE ON table1
FOR EACH ROW
WHEN (new.A = 'NEW' and new.B IS NOT NULL)
   RAISE_APPLICATION_ERROR (
     num=> -20001,
     msg=> 'B must be NULL for new rows (A = NEW)'
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T01:29:26.743

Per *onedaywhen*，这个答案在犯罪上是错误的，而且令人憎恶。您可以使用**CHECK**约束。 [http://msdn.microsoft.com/en-us/library/ms188258.aspx](http://msdn.microsoft.com/en-us/library/ms188258.aspx)

~~没有办法进行条件约束。但是，您应该能够使用触发器来完成这项工作。这就是他们的目的。~~

[http://msdn.microsoft.com/en-us/library/ms189799.aspx](http://msdn.microsoft.com/en-us/library/ms189799.aspx)

```
CREATE TRIGGER MyTable.ConditionalNullConstraint ON MyTable.ColumnB
AFTER INSERT
AS
IF EXISTS (SELECT *
    FROM inserted
    WHERE A <> 'NEW' AND B IS NULL
    )
BEGIN
    RAISERROR ('if A is ''NEW'' then B cannot be NULL', 16, 1);
    ROLLBACK TRANSACTION;
END;
GO 
```

请注意，在查询中，您需要引用**插入**的对象，它是一个行为类似于表的特殊对象，并允许您引用导致触发器的行。

~~当然，在此示例中，您还需要处理**AFTER UPDATE**以强制执行约束，但这是一般的想法。~~

# apache - 保护 Apache 提供的静态内容

> ID：10273759
> 
> 赞同：4
> 
> 时间：2012-04-23T01:26:43.643
> 
> 标签：apache, rest, tomcat

我有一个运行一些 Jersey RESTful 服务的 Tomcat 服务器，并且我正在使用 Apache 来托管静态内容。静态内容大部分是空的，内容是通过 RESTful 调用填写的，但是除了登录页面，我不希望任何人能够直接浏览到其他静态页面。我们有一个身份验证 servlet，可以过滤对 REST 服务的任何请求，但我想知道处理静态内容的最佳方法是什么。如果可能的话，我宁愿不通过 Tomcat 提供静态内容。

编辑：我应该提到，只有登录页面应该可以直接访问，无需过滤等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-25T15:57:15.257

想到的第一个想法是`Cookie`在用户进行身份验证时设置一个，然后您可以在 Apache 中使用`mod_rewrite`.

不确定这是否适合您...

如果你想要一个例子，请告诉我`RewriteRule`。

编辑 - 示例规则：

假设静态内容驻留在`/static/`目录中，如果用户尚未登录，则以下结果**应**为 a（导致 cookie 的值为）`401 Forbidden``authenticated=true`

```
RewriteEngine on

RewriteCond %{REQUEST_URI} ^\/static\/
RewriteCond %{HTTP_COOKIE} !authenticated=true
RewriteRule .* - [L,F] 
```

我已经使用这种方法来引导移动流量，但不是为了限制安全内容，所以我建议进行一些彻底的测试。

希望有帮助。

# api - 在 Javascript 中动态加载的 Google Map API：单击标记弹出窗口

> ID：10273764
> 
> 赞同：0
> 
> 时间：2012-04-23T01:27:46.197
> 
> 标签：api, google-maps, google-maps-markers, markerclusterer

所以我有一张我正在处理的地图，像这样动态加载：

```
foreach( $myposts as $post ) :  setup_postdata($post); ?>                                

    var marker<?php echo $count; ?> = new google.maps.Marker({ position: new google.maps.LatLng<?php the_field('longlat'); ?>, map: map, title:"<?php the_title(); ?>, <?php the_field('address'); ?>", icon:image });

    google.maps.event.addListener(marker<?php echo $count; ?>, 'click', function()
    {

        alert('you clicked: <?php the_title(); ?> - <?php the_field('address'); ?>');

    });

    <?php $count++ ?>

    <?php endforeach; ?> 
```

我想要它做的是优雅地加载带有标题和地址的标记弹出窗口......这是来自php的这两个值：

```
<?php the_title(); ?> - <?php the_field('address'); ?> 
```

目前它会这样做，但在警报中......

那么如何设置它以使其出现在标记上方的弹出窗口中？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T04:18:37.330

我建议您在以下位置查看`infoWindow`课程和相关文档：[https ://developers.google.com/maps/documentation/javascript/reference#InfoWindow](https://developers.google.com/maps/documentation/javascript/reference#InfoWindow)

也有相关的代码示例： [https ://developers.google.com/maps/documentation/javascript/demogallery](https://developers.google.com/maps/documentation/javascript/demogallery)

在您有警报代码的地方，您可以输入以下内容：

```
var infowindow = new google.maps.InfoWindow();
infowindow.setContent('Whatever you want in the popup');
infowindow.open(map, this); 
```

# actionscript-3 - 无法设置 flash.geom.Matrix3D rawData

> ID：10273765
> 
> 赞同：1
> 
> 时间：2012-04-23T01:27:52.580
> 
> 标签：actionscript-3, stage3d

考虑以下代码：

```
var t:Matrix3D = new Matrix3D(
    new Vector.<Number>([1,0,0,0,0,1,0,0,0,0,1,0,10,10,0,1])
);

trace(t.rawData[12]); 
```

跟踪命令将为我打印“0”，并且在调试器中可以看到 rawData 实际上包含一个单位矩阵。我根本无法设置 Matrix3D 包含的值！

我正在使用闪存 11.2。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T01:33:07.867

很确定您创建预填充向量的语法是错误的。

你应该有：

```
new <Number>[values] 
```

代替：

```
new Vector.<Number>([values]) 
```

演示：

```
var wrong:Vector.<int> = new Vector.<int>([1,2,3]);
var right:Vector.<int> = new <int>[1,2,3];

trace(right[1]); // 2
trace(wrong[1]); // error 
```

# java - 为什么我的循环坏了？[20][6] 的二维数组

> ID：10273773
> 
> 赞同：0
> 
> 时间：2012-04-23T01:28:53.187
> 
> 标签：java, loops, while-loop

这是我到目前为止所拥有的。我最终进入了输入数组数字的无限循环，但是，就数字而言，它继续正确循环

```
static void ticketNumberArray(){

    int number = 1;             //which of the six numbers you need from the ticket
    int ticketCount = 1;            //which ticket (out of 20) you are currently on

    while(ticketCount<21){      //sentinel controlled while loop, will continue until the twentieth ticket is entered

         System.out.println("Please type number " +number+ " of ticket number " +ticketCount+ ".");     //asks for the numbers of the ticket your currently on
         Scanner keyboard = new Scanner(System.in);             //initiates a scanner variable
         int ticketNumber = keyboard.nextInt();             //assigns user input to the double variable ticketNumber and initializes as a double

         tickets[ticketCount-1][number-1]=ticketNumber;     //assigns user input into a 2-d array

         number++;                                      //Sentinel variable

         if(number==7){                                     //loop that controls the ticket count, every 6 numbers ='s one ticket
          ticketCount++;
          number=1;
         }
     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T01:55:21.420

它不是无穷无尽的，它只需要`20 * 6 = 120 times`输入用户结束循环......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T01:32:37.837

这是次要的，但仅供将来参考，当您分配 ticketNumber 时，它是一个 int，但您的评论是双倍的。你的意思可能是int，但如果你把它们混在一起可能会导致问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T02:02:22.697

考虑将您的方法重写`ticketNumberArray()`为以下内容：

```
static void ticketNumberArray()
{
   for (int ticketCount = 1; ticketCount <= 20; ticketCount++)
   {
      for (int numberCount = 1; numberCount <= 6; numberCount++)
      {
         System.out.println("Please enter a number for ticket number " + ticketCount + ".");

         Scanner keyboard = new Scanner(System.in);

         int number = keyboard.nextInt();

         tickets[ticketCount - 1][numberCount - 1] = number;
      }
   }
} 
```

通过这种方式，您的意图更加清晰，并且您的循环实际上确实终止了，这一点更加明显。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T01:54:59.810

查看代码，我看不出它为什么会陷入无限循环。我要做的是跟踪 number 的值，看看它是否不会跳过七个案例。
另外，作为一个好习惯，我认为最好将相等 (==) 更改为高级或相等 (>=)。您可能最终会在将来更改增量步骤并忘记更新条件，这也将导致无限循环:)
最后一点，不相关的评论，通常最好不要使用文字常量（如 7）并更喜欢使用声明的常量。这对于代码理解和更新都是最好的。

# php - 从谷歌新闻读取 xml 时出错警告：file_get_contents

> ID：10273774
> 
> 赞同：0
> 
> 时间：2012-04-23T01:28:57.027
> 
> 标签：php, xml, stream

我需要读取一个 xml，我没有找到另一种读取它的方法，我只是对 $movie 和这个进行了编码，然后我收到了这个错误消息：

```
Warning: file_get_contents(http://news.google.com.mx/news?hl=es&gl=mx&q=harry potter&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&um=1&ie=UTF-8&output=rss) [function.file-get-contents]: failed to open stream: HTTP request failed! HTTP/1.0 400 Bad Request 
```

我收到此错误，这是我的代码，错误在 url 中有人可以帮忙，如何解决？

```
$url = 
$data = file_get_contents('http://news.google.com.mx/news?hl=es&gl=mx&q='.$movie.'&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&um=1&ie=UTF-8&output=rss');

$xml = new SimpleXMLElement($data);
$channel = array();
$channel['title'] = $xml->channel->title;

foreach ($xml->channel->item as $item)
{

    //echo $article['title'] = $item->title;
    //echo $article['link'] = $item->link;
    echo $article['pubDate'] = $item->pubDate;
    echo $article['description'] = (string) trim($item->description);

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T01:34:10.277

如果您[urlencode()](http://php.net/urlencode) URL 参数（即`$movie`），它应该按预期工作。

例子：

```
$data = file_get_contents('http://news.google.com.mx/news?hl=es&gl=mx&q='. urlencode($movie) .'&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&um=1&ie=UTF-8&output=rss') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T01:38:51.833

您需要将`$movie`in urlencode 包装起来。我还添加了一个内容类型标头，以便您可以指定该提要中使用的 UTF-8 编码，并为非英文字符正确呈现文本。

```
<?php

header('Content-Type:text/html;charset=utf-8');

$movie = 'harry potter';
$url = 
$data = file_get_contents('http://news.google.com.mx/news?hl=es&gl=mx&q='.urlencode($movie).'&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.,cf.osb&um=1&ie=UTF-8&output=rss');

$xml = new SimpleXMLElement($data);
$channel = array();
$channel['title'] = $xml->channel->title;

foreach ($xml->channel->item as $item)
{
    //echo $article['title'] = $item->title;
    //echo $article['link'] = $item->link;
    echo $article['pubDate'] = $item->pubDate;
    echo $article['description'] = (string) trim($item->description);
}

?> 
```

# mysql - Mysql添加索引错误还是没有？

> ID：10273781
> 
> 赞同：0
> 
> 时间：2012-04-23T01:30:01.253
> 
> 标签：mysql, indexing

我正在使用以下 SQL 命令向表中添加索引。当我通过 PHPmyadmin 运行 SQL 命令时，我会加载黄色方块，然后它会淡出。没有刷新或任何内容，它只是停留在该页面上。我在这个表中有数百万条记录，这会影响添加索引，还是添加索引并且它只是没有告诉我？如果是这样，我应该保持该浏览器选项卡打开直到它完成还是可以关闭它？

```
ALTER TABLE table_name ADD INDEX table_index_name(col1, col2); 
```

当我转到 PHPmyadmin 的进程部分时，我在 Alter Table 进程下收到此消息：*Waiting for table metadata lock*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T03:09:50.707

当您执行另一个模式更改语句时，会出现此语句。

检查以确保没有其他语句正在执行。我有过没有两个进程修改架构的情况下出现这种情况的经验，我不得不终止该进程并重试或重新启动您的 MySQL 实例

# objective-c - 在 Objective-C 中，“id”是否与 C 中的“void *”相同，以及程序在方法调用期间如何告诉类？

> ID：10273785
> 
> 赞同：6
> 
> 时间：2012-04-23T01:31:48.273
> 
> 标签：objective-c

在Objective-C中，与C中的`id`完全一样`void *`吗？（通用指针类型）。

如果是这样，当我们使用

```
id obj = [[Fraction alloc] init];
[obj methodName];
obj = [[ComplexNumber alloc] init];
[obj anotherMethodName]; 
```

当方法被调用时，程序通过什么方式知道什么是类`obj`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T01:55:10.527

`id`与 a 不一样`void *`。`id`是一个指向未知类型的 Objective C 对象的指针；像`object`C# 或 Java 的数据类型。A`void*`可以指向任何东西；非 nil`id`应指向所有 ObjC 对象共有的数据结构，并包含指向其各自类数据的指针。

ObjC 运行时-//etc 的`alloc`实现`init`。- 确保所有有效对象中都有正确的类指针。

IIRC，在 Apple 的实现中，指向的指针大小的变量实际上*是*`id`指向类的指针。

 *在类的数据块中，有一个方法列表，将方法签名映射到指向方法实现的函数指针。从那里开始，这是一个相当简单的查找，当您向对象发送消息（即调用其中的方法）时，它会在运行时发生。还有一个指向基类的指针，以便方法查找可以继续沿继承树向上。

顺便说一句，这就是为什么取消引用 void 指针是编译器错误，而将消息发送到 an`id`是合法的，如果静态不安全的话。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T02:29:02.630

`id`Objective-C 中的内容与 C 中的内容不同`void *`。

来自 Apple 的“The Objective-C Programming Language”：

```
typedef struct objc_object {
   Class isa;
} *id; 
```

这意味着，`id`是一个指向`objc_object`结构的指针，它不同于指向`void`.

> 因此，每个对象都有一个`isa`变量，告诉它它是什么类的实例。由于`Class`类型本身被声明为指针。

```
typedef struct objc_class *Class; 
```

关于，*程序如何在方法调用期间告诉类？*，这是来自上面引用的同一编程指南：

> `isa`实例变量标识对象的类**——**它是什么类型的对象。具有相同行为（方法）和相同类型数据（实例变量）的对象是同一类的成员。
> 
> 因此，对象在运行时是**动态类型的。**无论何时需要，运行时系统都可以通过询问对象来找到对象所属的确切类。（要了解有关运行时的更多信息，请参阅 *Objective-C 运行时编程指南。*）

根据指南，`id`Objective `nil`-C 的 、 和其他基本类型都在头文件中定义`objc/objc.h`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T01:43:10.477

是的，`id`只是一个通用指针。编译时的类解析只是为了通知用户警告和错误。但是，具有 id 类型的名副其实在编译时不会绑定到任何特定的类。在运行时访问对象之前，不会知道实际的类。如果对象是 的子类`NSObject`，它很可能是，您的代码可以询问对象它的类是什么。

`[myObject class]`将返回`myObject`. `[myObject isMemberOfClass:[SomeClass class]]`将返回一个`BOOL`指示更白的 ir 不是`myObject`该类的成员`SomeClass`。

如果您的代码调用 上的方法`myObject`，运行时将尝试进行调用，即使对象没有响应该方法。如果`myObject`不实现该方法，则会发生运行时异常。

您也可以`myObject`提前询问该方法是否适用于`[myObject respondsToSelector:@selector(myCoolMethod)]`.*

# mysql - 适用于 Windows 程序的 MySQL 托管

> ID：10273789
> 
> 赞同：0
> 
> 时间：2012-04-23T01:32:36.853
> 
> 标签：mysql, windows, host

我只是在这里输入我的文字墙，但请随意跳到有用的部分^^

因此，基本上我目前拥有一个小型网站，我打算在其中分发免费软件，以后可能还会分发付费软件。

现在，我目前正在开发一些需要数据库的程序，例如我所有应用程序的通用错误报告器，还有一个帐户系统和其他一些东西。这基本上意味着每个 IP 都能够连接到 mySQL 服务器。现在我有几个问题：

1.  我应该做些什么来确保我的数据库不会被人们以某种​​方式反编译我的程序吗？（我不太确定这是如何工作的，如果这听起来很迟钝，对不起）

2.  哪里是托管这个 mySQL 服务器的好地方？我的网站非常小，目前我的程序几乎只被一些朋友使用，所以最好是免费服务，我的数据库不应该很快变得超过几兆字节，但我想要一个可靠的服务来保存备份。我已经考虑过我当前的网络主机，但它们不允许远程 mySQL 访问。

3.  是否有某种更合乎逻辑的替代方案，或者可能比 mysql 更好（我只是一个自学成才的菜鸟开发人员，所以我真的没有。我以前只使用过 mysql）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T01:37:29.730

不要将您的数据库暴露在互联网上。

您可以：

1.  如果您的数据可以存储在本地，请使用诸如 sqlite 之类的嵌入式数据库，或者
2.  通过 Web 界面在 Web 服务器上公开功能

进一步阅读：

*   [http://www.sqlite.org/](http://www.sqlite.org/)
*   [http://www.raywenderlich.com/2941/how-to-write-a-simple-phpmysql-web-service-for-an-ios-app](http://www.raywenderlich.com/2941/how-to-write-a-simple-phpmysql-web-service-for-an-ios-app)

# sql - 在价值观中寻找下一个差距

> ID：10273794
> 
> 赞同：1
> 
> 时间：2012-04-23T01:32:57.557
> 
> 标签：sql, orm

假设我有下表：

```
id  name  base   index
0   A     2      0
1   B     2      2
2   C     2      4
3   D     2      6
4   E     2      8
5   F     2      10 
```

因此，index = base * i，其中 i 是该行在序列中的位置。

有时会删除一些行，例如，如果我删除名为 C 和 D 的行：

```
id  name  base   index
0   A     2      0
1   B     2      2
4   E     2      8
5   F     2      10 
```

新行总是在最后一行之后添加，因此在这种情况下，下一行将是 MAX(index)+base=12，但是由于删除的行，索引列中的值之间留下的间隙会在一段时间后成为问题。如果不是最后插入而是将其插入第一个可用间隙，则不会发生问题。

所以，我怀疑找到第一个可用间隙的任何查询都会像 MAX(index) 一样有效，但最有效的解决方案是什么？也许已经足够好了。

如果不清楚，我需要找到第一行'a'，使得具有最接近上索引值的行大于a.index + a.base。

这适用于对任何 SQL 数据库使用 ORM 的应用程序，因此它必须是严格的标准 SQL。

**编辑**

这是对真实表和真实问题的简化，我正在寻找仅使用基列和索引列的解决方案。涉及在其他表中添加新列或索引的解决方案对我的应用程序不实用。

**编辑 2**

似乎基列使它变得更加复杂，但这不是必需的。问题可以简化为如下表：

```
id  name  index
0   A     0
1   B     1
4   E     4
5   F     5 
```

我需要在哪里找到第一行'a'，使得索引最低的行高于a.index + x。在这种情况下 x = 1。

枚举而不先排序或利用 id 不是可靠的解决方案，因为这些可能会改变。例如，如果行也是这样的，则解决方案必须起作用：

```
id  name  index
0   A     0
23  F     5
45  E     4
90  B     1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T02:28:43.343

如果表中有多个“base”值，我不清楚你的问题是什么意思。例如，“具有最接近上索引值的行”是否必须具有相同的“基数”值？

无论如何，如果您使用的是实现函数 LEAD() 的 SQL 平台，这可能是一个开始。您可能需要用适当的方言重新表述 TOP。将 999999999 替换为大于 index+base 的最大可能值的任何值。

```
with LeadAdded as (
  select 
    lead(index,1,999999999) over (order by index) as nxt,
    *
  from yourTable
)
  select top (1) *
  from LeadAdded
  where nxt > index + base;
  order by index 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T01:49:20.713

您可以添加另一列以将其标记为可用，而不是删除该行？然后，您可以从表中选择具有给定基数的标记为“可用”的 MIN(id)。如果找不到，则插入。这样您就可以避免出现空白，保留历史记录，甚至可以简化？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T02:05:30.073

大多数 SQL 方言都支持窗口函数，因此您可以执行以下操作：

```
select min(id)
from 
(
   select t.*, 
      row_number() over (order by id) as rownum
   from t
)
where id <> rownum 
```

这将返回第一个乱序的 id。

我可能会建议，类似于第一个建议。删除一行时，将 id 存储在另一个“可用”id 表中。插入时，请先查看此表。如果没有可用的，则创建一个新的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T03:02:01.227

好吧，一种不依赖于标准 SQL 之外的任何东西的方法是保留一个单独的表，其中包含“所有可能的值`index`”：

```
SELECT * FROM indices LIMIT 7;
+------+
| idx  |
+------+
|    0 |
|    2 |
|    4 |
|    6 |
|    8 |
|   10 |
|   12 |
+------+
7 rows in set (0.00 sec) 
```

然后假设您的用户表看起来像这样，第一个间隙发生在 index=4 处：

```
SELECT * FROM users;
+------+------+------+------+
| id   | name | base | idx  |
+------+------+------+------+
|    0 | A    |    2 |    0 |
|    1 | B    |    2 |    2 |
|    4 | E    |    2 |    8 |
|    5 | F    |    2 |   10 |
+------+------+------+------+
4 rows in set (0.00 sec) 
```

您可以将 a`LEFT JOIN`与索引表一起使用来查找第一个间隙：

```
SELECT indices.*
FROM indices
LEFT JOIN users
USING(idx)
WHERE users.idx IS NULL
ORDER BY idx
LIMIT 1;

+------+
| idx  |
+------+
|    4 |
+------+
1 row in set (0.00 sec) 
```

This will fail if the first gap occurs after the end of the indices table, in which case you could detect the error and extend the indices table.

# c# - 使用多个组合框填充文本框

> ID：10273797
> 
> 赞同：0
> 
> 时间：2012-04-23T01:33:10.293
> 
> 标签：c#, winforms, combobox, textbox

我正在编写一个具有三个选项卡的程序。

在第一个选项卡上，用户输入有关客户帐户的信息，然后将其发送到名为`combobox`的第二个和第三个选项卡上`clients`。在第二个选项卡上，用户输入有关股票或共同基金的信息。股票信息转到`combobox`第三个选项卡上的股票，共同基金信息转到`combobox`第三个选项卡上的共同基金。

我遇到的问题是我只能填写一个信息字段，并且能够`textboxes`使用`combobox`. 例如，如果我输入有关客户帐户的信息——然后在其中选择该选项`combobox`——它将填充`textboxes`该信息。但是，如果我尝试从股票或共同基金中选择一个选项`combobox`，那么相应`textboxes`的信息将不会填充。我不知道为什么第一个选择`combobox`是唯一会填充`textboxes`.

这是填充的代码`textboxes`：

```
 private void cboClientsTab3_SelectedIndexChanged(object sender, EventArgs e)
    {
        CustomerAccount custAccount = account[cboClientsTab3.SelectedIndex] as CustomerAccount;
        if (custAccount != null)
        {
            txtAccountNumberTab3.Text = custAccount.GetAccountNumber();
            txtCustomerNameTab3.Text = custAccount.GetCustomerName();
            txtCustomerAddressTab3.Text = custAccount.GetCustomerAddress();
            txtCustomerPhoneNumberTab3.Text = custAccount.GetCustomerPhoneNo();
        }

    }

    private void cboStocksTab3_SelectedIndexChanged(object sender, EventArgs e)
    {
        Stock aStock = account[cboStocksTab3.SelectedIndex] as Stock;
        if (aStock != null)
        {
            txtStockIDTab3.Text = aStock.GetInvestmentID();
            txtStockNameTab3.Text = aStock.GetInvestmentName();
            txtStockSymbolTab3.Text = aStock.GetInvestmentSymbol();
            txtStockSharesTab3.Text = aStock.GetInvestmentShare().ToString();
            txtStockPriceTab3.Text = aStock.GetStockPrice().ToString();
        }

    }

    private void cboMutualFundsTab3_SelectedIndexChanged(object sender, EventArgs e)
    {
        MutualFund aMutualFund = account[cboMutualFundsTab3.SelectedIndex] as MutualFund;
        if (aMutualFund!=null)
        {
            txtMutualIDTab3.Text=aMutualFund.GetInvestmentID();
            txtMutualNameTab3.Text=aMutualFund.GetInvestmentName();
            txtMutualSymbolTab3.Text=aMutualFund.GetInvestmentSymbol();
            txtMutualSharesTab3.Text=aMutualFund.GetInvestmentShare().ToString();
            txtNAVTab3.Text=aMutualFund.GetNAV().ToString();
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T02:28:37.417

根据我们上面的聊天，问题似乎是**cboStocksTab3**和**cboMutualFundsTab3**连接到错误的事件处理程序（即**cboClientsTab3_SelectedIndexChanged**）。检查您的*SelectedIndexChanged*事件添加到元素的位置，并更改为正确的。那应该可以解决您的问题。

# php - PHP 图像上传器不适用于 Capital JPG 扩展

> ID：10273804
> 
> 赞同：2
> 
> 时间：2012-04-23T01:33:36.550
> 
> 标签：php, mysql, image, file-upload, jpeg

提前致谢。

我有一个我构建的 php 图片上传器，它工作得很好。但是，我尝试上传 .JPG 扩展名图片，但没有成功。请注意，我的意思是大写 JPG，而不是小写 jpg。.png、.jpg、.gif 都可以正常工作并被上传，缩略图被创建等等。由于某种原因，它是大写的 .JPG 不起作用。请参阅下面的代码。它是不同的 mime 类型吗？

查询（出于安全目的我删除了）工作得很好。信息被存储。由于大写的 .JPG 扩展名，文件和缩略图不会移动到正确的文件夹中。任何帮助都会很棒，我做了一些研究并尝试了 Apache 添加类型 JPG，但没有奏效。

```
if(isset($_POST['submit']))
{

    $getcatid = mysql_query('"query here"');
    $rescatid = mysql_fetch_assoc($getcatid);
    $catid = $rescatid['catid'];

    if ((($_FILES['file']['type'] == "image/png") || 
        ($_FILES['file']['type'] == "image/jpeg") ||
        ($_FILES['file']['type'] == "image/pjpeg")) && ($_FILES['file']['size'] < 2097152))
    {

        if (file_exists("location here".time().'_'.$_FILES["file"]["name"]))
            {
                echo '<div class="error">'.$_FILES["file"]["name"].' already exists</div>'; 

            }
        else
            {

                    $filename = time().'_'.$_FILES['file']['name'];  
                    $source = $_FILES['file']['tmp_name'];  
                    $target = 'location here'.$filename;  

                    move_uploaded_file($source, $target); 

                    createThumbnail($filename);  

                $date = time();
                $store = '"query here"';';

                mysql_query ($store);

                echo '<div class="success">Image added</div>';

            }
    }

    else
    {
        echo '<div class="error">Invalid file, only jpg, jpeg, or png file types allowed</div>';
    }

}

if(isset($_POST['multisubmit']))
{

    $getcatid = mysql_query('"query here"');
    $rescatid = mysql_fetch_assoc($getcatid);
    $catid = $rescatid['catid'];

    for($i=0;$i< count($_FILES['multifile']['type']);$i++)
    {

        if ((($_FILES['multifile']['type'][$i] == "image/png") || 
        ($_FILES['multifile']['type'][$i] == "image/jpeg") || 
        ($_FILES['multifile']['type'][$i] == "image/pjpeg")) && 
        ($_FILES['multifile']['size'][$i] < 2097152))
        {

            $filename = time().'_'.$_FILES['multifile']['name'][$i]; 
            $source = $_FILES['multifile']['tmp_name'];   
            $target = 'location here'.$filename;  

            if(move_uploaded_file ($_FILES['multifile']['tmp_name'][$i],$target))
            {
                createThumbnail($filename);  

                $date = time();
                $store = '"query here"';';

                mysql_query ($store);

                echo '<div class="success">Image: '.$filename.' added, view individual album to edit image descriptions</div>';
            } 
            else
            {
            echo '<div class="error">Invalid file'.$filename.', only jpg, jpeg, or png file types allowed</div>';
            }        
        }
    }
} 
```

缩略图功能如果有帮助：

```
function createThumbnail($filename) {  
$final_width_of_image = 160;  
$path_to_image_directory = 'path here';  
$path_to_thumbs_directory = 'path here';

if(preg_match('/[.](jpg)$/', $filename)) {  
    $im = imagecreatefromjpeg($path_to_image_directory . $filename);  
} else if (preg_match('/[.](gif)$/', $filename)) {  
    $im = imagecreatefromgif($path_to_image_directory . $filename);  
} else if (preg_match('/[.](png)$/', $filename)) {  
    $im = imagecreatefrompng($path_to_image_directory . $filename);  
}  

$ox = imagesx($im);  
$oy = imagesy($im);  

$nx = $final_width_of_image;  
$ny = floor($oy * ($final_width_of_image / $ox));  

$nm = imagecreatetruecolor($nx, $ny);  

imagecopyresized($nm, $im, 0,0,0,0,$nx,$ny,$ox,$oy);  

if(!file_exists($path_to_thumbs_directory)) {  
  if(!mkdir($path_to_thumbs_directory)) {  
       die("There was a problem. Please try again!");  
  }  
   }  

imagejpeg($nm, $path_to_thumbs_directory . $filename, 100);  

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T01:55:31.607

从您的缩略图代码：

```
if(preg_match('/[.](jpg)$/', $filename)) 
```

那只会匹配小写的'jpg'。如果要匹配大小写，可以添加`/i`不区分大小写的标志：

```
if(preg_match('/[.](jpg)$/i', $filename)) 
```

# actionscript-3 - 编辑按钮内标签的文本 - AS3

> ID：10273805
> 
> 赞同：0
> 
> 时间：2012-04-23T01:33:47.277
> 
> 标签：actionscript-3, button, label, edit

我创建了一个按钮名称：

> 菜单按钮

在按钮内，我有两个带有以下名称的文本框；

> 名称_mb
> 
> level_mb

我已经创建了大约 6 个此对象/按钮的实例。我正在尝试为每个这些按钮实例更改这些文本框的文本（每个实例都有不同的名称）。

这就是我正在尝试的方式；

```
menu_One.level_mb.text = "hello"; 
```

> 菜单_一个；实例名称

但是，我收到以下错误：

> 符号'menuButton'，图层'Layer 1'，第1帧警告：实例名称'level_mb'在fl.text.TLFTextField类型的对象上声明，但实例名称'level_mb'在对象上的使用冲突键入 flash.display.InteractiveObject。
> 
> 符号'menuButton'，图层'Layer 1'，第1帧警告：实例名称'name_mb'是在fl.text.TLFTextField类型的对象上声明的，但实例名称'name_mb'在对象上的使用存在冲突键入 flash.display.InteractiveObject

. 这是由于同一对象/按钮的多个实例造成的吗？

或者，我可以为我需要的每个按钮创建一个新按钮，并手动为其提供文本。不过，我更喜欢通过代码来完成，因为我将有大约 10 个按钮，并且将来如果我需要添加更多按钮，它会容易得多。

如果需要，我可以提供更多代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T13:14:01.340

您可以尝试使用严格的 AS3 语法：

```
menu_One.getChildByName("level_mb") 
```

并将其转换为 a`TextField`以访问该`text`属性：

```
(menu_One.getChildByName("level_mb") as TextField).text = "hello"; 
```

# android - 如何在 Eclipse for Android 上使用 cocos2d-x 编程的技巧

> ID：10273807
> 
> 赞同：2
> 
> 时间：2012-04-23T01:34:07.727
> 
> 标签：android, eclipse, cocos2d-x

我开始为 Android 手机使用 cocos2d-x 进行开发。
我已经按照这两个教程集成了 Hello World 游戏的源代码，并且能够在 Eclipse 上调试（Java 和 C++ 代码）。

[http://blog.plicatibu.com/developing-with-cocos2d-x-for-android-on-linux/](http://blog.plicatibu.com/developing-with-cocos2d-x-for-android-on-linux/)
[http://blog.plicatibu.com/how-to-debug-cocos2d-x-and-java-代码使用-eclipse/](http://blog.plicatibu.com/how-to-debug-cocos2d-x-and-java-code-using-eclipse/)

一切正常，我可以运行/调试两个代码，但我不知道如何开始编程。

jni 中有一个 helloworld 文件夹，它有一个 main.cpp。我应该在 helloworld 文件夹中创建我的游戏类吗？因为我注意到所有源文件（.h 和 .cpp）都在 eclipse 项目之外（在 Classes 文件夹中）。所以我想知道是否有更有经验的人可以帮助我开始。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T16:45:08.233

我解决了！
按照教程后，我进入项目属性，然后进入 C/C++ General->Paths and Symbols，在 Source location 选项卡中，我添加了由 cocos2d-x 脚本自动生成的 Classes 文件夹以创建一个新项目。
为了解决宏的问题，在 Eclipse Preferences, C/C++ -> Indexer 中，我刚刚检查了在编辑器中打开的索引源和头文件，现在它就像一个魅力;)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T08:33:01.153

1.你可以在HelloWorld中编码，然后将你的HelloWorld.h和.cpp复制到cocos2d-x/android的文件夹中，而不是旧的。

2.也可以修改**AppDelegate.cpp**。在这个类中你可以找到**CCScene *pScene = HelloWorld::xxxx();** 将其更改为您的根类函数。

我希望它可以帮助你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-08T10:19:11.087

转到：
项目属性
C/C++ 常规 *
路径和符号 -> 链接文件夹 -> 标记链接到文件系统中的文件夹 -> 浏览（并从项目中选择类）

*如果 C/C++ General 不适用：
进入 file new C/C++ 并选择 C/C++ project(Adds C/C++ Nature) Next
标记您的项目
在项目类型（如下）中选择 Makefile 项目
在 Toolchains 中选择 --Other工具链——
完成

# ruby-on-rails - Ruby on Rails 未定义方法“attr_accessible”和“before_save”？

> ID：10273812
> 
> 赞同：0
> 
> 时间：2012-04-23T01:34:54.013
> 
> 标签：ruby-on-rails, exception

我最近开始了一个新的 RoR 项目，并复制了大约 6 个月前的一些旧代码。

出于某种原因，我的用户模型中出现以下错误：

```
undefined method `attr_accessible' for User:Class 
```

当我注释掉 attr_accessible 行时，我在同一个文件中得到了类似的错误：

```
undefined method `before_save' for User:Class 
```

当我评论它时，我得到另一个：

```
undefined method `validates' for User:Class 
```

为什么 attr_accessible 和 before_save 是未定义的方法？我以为那些是 Ruby on Rails 内置的！？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T01:38:34.463

您的 User 类是否继承自 ActiveRecord::Base？

它应该如下所示：

```
class User < ActiveRecord::Base 
```

# java - 在谷歌应用引擎数据存储中使用 sum 函数

> ID：10273813
> 
> 赞同：0
> 
> 时间：2012-04-23T01:35:17.760
> 
> 标签：java, google-app-engine, jpa

> **可能重复：**
> [有没有办法在 Google App Engine 上执行聚合函数？](https://stackoverflow.com/questions/993059/is-there-a-way-to-do-aggregate-functions-on-google-app-engine)

您好，我一直在尝试在我的 JPA 应用程序中使用 GAE 中的 Sum 函数，但出现此错误

```
Problem with query <SELECT SUM(c.amount) FROM Cheque c>: App Engine datastore does not support operator SUM. 
```

所以我想知道是否有另一种方法来求和并在 jsp 页面中呈现数据？还是我不得不忘记它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T04:34:55.800

您不能在 App Engine 数据存储区中执行聚合函数；此类操作效率低下，因为它们需要读取匹配的每条记录。相反，您应该在进行时计算所需的任何聚合——在编写时多花一点时间，以便在阅读时节省大量时间。

# ios - 如何在使用 ARC 的项目中发布“请求”？

> ID：10273815
> 
> 赞同：0
> 
> 时间：2012-04-23T01:35:41.593
> 
> 标签：ios, asihttprequest, automatic-ref-counting

作为 iOS 开发者的初学者。我在我的项目中使用 ARC。我什至使用 ASIHttpRequest 来简化一些工作。如您所知，ASIHttpRequest 不支持 ARC。我添加了 -fno-objc-arc 编译器标志以使其工作。现在，这是我的问题。如果我的一些代码是这样的，我如何释放“请求”对象：

```
NSURL *url = [NSURL URLWithString:@"http://allseeing-i.com"];
   __block ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:url];
   [request setCompletionBlock:^{
      NSData *responseData = [request responseData];
   }];
   [request setFailedBlock:^{
      NSError *error = [request error];
   }];
   [request startAsynchronous]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T01:48:56.160

我的理解是编译器在混合 ARC 和非 ARC 代码时使用 NSObjects 做正确的事情。

根据 Cocoa 方法的命名约定，responseData 应该是一个非拥有引用。因此，您不应该负责保留/释放它。请求对象拥有它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T05:17:32.440

无需发布此“请求”，因为这些代码位于使用 ARC 的文件中。编译器将帮助您插入发布方法。但是对于 ASIHTTPRequest.m 文件中的对象，您需要释放它们（实际上您不需要这样做），因为您添加了 -fno-objc-arc 编译器标志，并且编译器不会为您插入释放方法。

# c++ - 如何在c ++中检查文件是否存在于Qt中

> ID：10273816
> 
> 赞同：82
> 
> 时间：2012-04-23T01:35:56.857
> 
> 标签：c++, qt, file-exists

Qt中如何检查给定路径中是​​否存在文件？

我当前的代码如下：

```
QFile Fout("/Users/Hans/Desktop/result.txt");

if(!Fout.exists()) 
{       
  eh.handleError(8);
}  
else
{
  // ......
} 
```

`handleError`但是当我运行代码时，即使我在路径中提到的文件不存在，它也没有给出指定的错误消息。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2014-11-18T09:51:58.043

**（TL；底部的 DR）**

我会使用`QFileInfo`-class ( [docs](http://qt-project.org/doc/qt-5/qfileinfo.html) ) - 这正是它的用途：

> QFileInfo 类提供与系统无关的文件信息。
> 
> QFileInfo 提供有关文件名和文件系统中的位置（路径）、其访问权限以及它是目录还是符号链接等信息。文件的大小和最后修改/读取时间也可用。QFileInfo 也可用于获取有关 Qt 资源的信息。

这是检查文件是否存在的源代码：

```
#include <QFileInfo> 
```

*（不要忘记添加相应的`#include`-语句）*

```
bool fileExists(QString path) {
    QFileInfo check_file(path);
    // check if file exists and if yes: Is it really a file and no directory?
    if (check_file.exists() && check_file.isFile()) {
        return true;
    } else {
        return false;
    }
} 
```

还要考虑：您只想检查路径是否存在 ( `exists()`) 还是要确保这是一个文件而不是目录 ( `isFile()`)？

**小心**：-function 的文档`exists()`说：

> 如果文件存在则返回真；否则返回假。
> 
> 注意：如果 file 是指向不存在文件的符号链接，则返回 false。

**这并不精确。**它应该是：

> 如果路径（即文件或目录）存在则返回true；否则返回假。

* * *

**TL;博士**

*（上面函数的版本更短，省了几行代码）*

```
#include <QFileInfo>

bool fileExists(QString path) {
    QFileInfo check_file(path);
    // check if path exists and if yes: Is it really a file and no directory?
    return check_file.exists() && check_file.isFile();
} 
```

**TL；Qt >=5.2 的 DR**

*（使用`exists`作为`static`Qt 5.2 中引入的 a ；文档说静态函数更快，尽管我不确定在使用该`isFile()`方法时仍然是这种情况；至少这是一个单行）*

```
#include <QFileInfo>

// check if path exists and if yes: Is it a file and no directory?
bool fileExists = QFileInfo::exists(path) && QFileInfo(path).isFile(); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2016-10-23T13:05:43.193

您可以使用以下`QFileInfo::exists()`方法：

```
#include <QFileInfo>
if(QFileInfo("C:\\exampleFile.txt").exists()){
    //The file exists
}
else{
    //The file doesn't exist
} 
```

* * *

如果您希望它`true`仅在*文件*存在且`false`路径存在但为文件夹时返回，您可以将其与`QDir::exists()`：

```
#include <QFileInfo>
#include <QDir>
QString path = "C:\\exampleFile.txt";
if(QFileInfo(path).exists() && !QDir(path).exists()){
    //The file exists and is not a folder
}
else{
    //The file doesn't exist, either the path doesn't exist or is the path of a folder
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-23T03:39:40.467

您发布的代码是正确的。很可能还有其他问题。

试着把这个：

```
qDebug() << "Function is being called."; 
```

在您的 handleError 函数内部。如果打印出上述消息，您就知道问题出在其他地方。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-07-28T09:48:51.023

这就是我检查数据库是否存在的方式：

```
#include <QtSql>
#include <QDebug>
#include <QSqlDatabase>
#include <QSqlError>
#include <QFileInfo>

QString db_path = "/home/serge/Projects/sqlite/users_admin.db";

QSqlDatabase db = QSqlDatabase::addDatabase("QSQLITE");
db.setDatabaseName(db_path);

if (QFileInfo::exists(db_path))
{
    bool ok = db.open();
    if(ok)
    {
        qDebug() << "Connected to the Database !";
        db.close();
    }
}
else
{
    qDebug() << "Database doesn't exists !";
} 
```

`SQLite`很难检查数据库是否存在，因为如果它不存在，它会自动创建一个新数据库。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-23T01:41:39.917

我会跳过使用 Qt 中的任何内容，而只使用旧标准`access`：

```
if (0==access("/Users/Hans/Desktop/result.txt", 0))
    // it exists
else
    // it doesn't exist 
```

# iphone - iPhone iOS 如何在文本上方的 UITextView 中添加可见的标题视图？

> ID：10273820
> 
> 赞同：0
> 
> 时间：2012-04-23T01:37:04.887
> 
> 标签：iphone, objective-c, ios, header, uitextview

我正在尝试在 UITextView 上添加标题。我现在拥有的代码添加了一个标题，该标题最初是可见的，但是一旦用户滚动它就会隐藏起来（它已经下拉以刷新感觉）。 **我想让我的 UITextView 绘制文本比正常低 90 像素，并在文本上方绘制标题，从原点开始。如何才能做到这一点？**

目前我有：

```
[self.textViewWithHeader addSubview:self.headerView];
self.headerView.center = CGPointMake(160,-50);
self.salesCopyTextField.contentOffset = CGPointMake(0,-90); 
```

这在文本上显示了一个标题，但它被滚动视图的边界剪掉了。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T13:01:02.607

我最终使用了一个普通`UITableView`的，第一个单元格是一个标题。第二个单元格包含一个 UITextView，其高度动态计算以匹配`UITextView`. 已`UITextView`禁用滚动，仅保留`UITableView's`滚动。当用户点击文本视图进行编辑时，滚动有一种奇怪的行为，但我认为这不是一个主要问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-03T12:18:48.230

使用**Swift 3**：

```
let headerViewHeight: CGFloat = 30.0
let headerView = HeaderView(frame: CGRect(x: textView.bounds.origin.x, y: textView.bounds.origin.y - headerViewHeight, width: textView.bounds.size.width, height: headerViewHeight))
textView.addSubview(headerView)
textView.contentInset.top = headerViewHeight 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T01:43:49.343

为什么self.headerView需要是self.textViewWithHeader的子视图？相反，我会将 self.headerView 添加到适当位置的 textViewWithHeader 的父视图中。

就像是

```
[self.view addSubview:self.textViewWithHeader];
self.headerView.frame = CGRectMake(self.textViewWithHeader.frame.origin.x, self.textViewWithHeader.frame.origin.y - self.headerView.frame.size.height, self.headerView.frame.size.width, self.headerView.frame.size.height);
[self.view addSubview:self.headerView]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-01T21:59:31.077

设置[`contentInset`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/occ/instp/UIScrollView/contentInset)不[`contentOffset`](http://developer.apple.com/library/ios/documentation/uikit/reference/UIScrollView_Class/Reference/UIScrollView.html#//apple_ref/occ/instp/UIScrollView/contentOffset)。`contentOffset`只会影响滚动位置。有关 的详细说明`contentOffset`，请查看[WWDC 2012 会议视频](https://developer.apple.com/videos/wwdc/2012/)的“使用滚动视图增强用户体验”的开头部分。

相关： [UITextView 的标题视图？](https://stackoverflow.com/questions/1327881/header-view-for-a-uitextview)

# c# - 在 ASP.NET MVC 上使用表单文本框打开 PDF 文件

> ID：10273821
> 
> 赞同：1
> 
> 时间：2012-04-23T01:37:06.633
> 
> 标签：c#, asp.net-mvc, pdf

我需要打开一个包含在表单中的表单 texbox 的 pdf 文件。我使用此代码打开 pdf 文件。

```
 `StreamReader streamReader = new StreamReader(GridView1.Rows[index].Cells[1].Text);

            Stream stream = streamReader.BaseStream;

            BinaryReader binaryReader = new BinaryReader(stream);
            byte[] sendbyteArray =binaryReader.ReadBytes(Convert.ToInt32(binaryReader.BaseStream.Length));
                Response.ContentType = "application/pdf";
                Response.AddHeader("Content-Type", "application/pdf");
                Response.AddHeader("Content-Disposition", "inline");
                Response.BinaryWrite(sendbyteArray);
                Response.End();` 
```

这是工作。显示 pdf 文件后，我需要在 pdf 上方添加一个文本框。这可能吗？请指教。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T11:41:41.693

据我所知，这是不可能的，但如果您分享该文本框的目的是什么，我们可以考虑另一种解决方案。

# regex - 匹配模式的正则表达式：something FROM xxxx TO yyyy

> ID：10273832
> 
> 赞同：0
> 
> 时间：2012-04-23T01:40:33.900
> 
> 标签：regex, pattern-matching

我正在为基于位置的服务进行一些文本处理，我想找出输入是否与 type 匹配`something sth FROM xxxx TO yyyy`。基本上我需要找出用户输入的来源和目的地。

例如

```
show me how can I go from xxxx to yyyy
I want to go to abcd
I want to go from abcd to xyz 
```

我不擅长正则表达式，我能想出的正则表达式`A-Za-z`来自`A-Za-z`哪个`A-Za-z`不起作用。谁能告诉我如何匹配多关键字正则表达式，其中单词可以被任意数量的单词分隔。例如`I want to go FROM manhattan TO Seattle`或`I want to go FROM times square, New York City TO Seattle`。然后我可以通过索引来提取源/目标。

如果它包含`FROM`在句子的中间，我可以提取它，但我想让它通用，所以我不必创建多个规则。用户可能会说

```
I want to go TO x FROM y
I want to go FROM x to Y 
```

在上面的句子中，源和目标被交换了。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T06:55:35.457

您需要使用单词边界锚点，否则正则表达式将在句子上失败

```
I want to go from Montreal to Toronto. 
```

此外，您应该捕获匹配词之间的部分，而不是匹配词本身：

```
Pattern regex1 = Pattern.compile(
    "\\b     # Match word boundary\n" +
    "from    # Match 'from'\n" +
    "\\s+    # Match whitespace\n" +
    "(.+?)   # Match one or more characters\n" +
    "\\b     # Match word boundary\n" +
    "to      # Match 'to'\n" +
    "\\s+    # Match whitespace\n" +
    "(.+)    # Match one or more characters", 
    Pattern.CASE_INSENSITIVE | Pattern.UNICODE_CASE | Pattern.COMMENTS);
Pattern regex2 = Pattern.compile("\\bto\\s+(.+?)\\bfrom\\s+(.+)", Pattern.CASE_INSENSITIVE | Pattern.UNICODE_CASE | Pattern.COMMENTS);

Matcher regexMatcher = regex1.matcher(subjectString);
if (regexMatcher.find()) {
    fromString = regexMatcher.group(1);
    destString = regexMatcher.group(2);
} else {
    Matcher regexMatcher = regex2.matcher(subjectString);
    if (regexMatcher.find()) {
        fromString = regexMatcher.group(1);
        destString = regexMatcher.group(2);
    }   
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T01:46:57.393

我能想到的最简单的一个是`.*(from).*(to).*`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T01:56:01.027

`(?<=from\s)(.*)(?<=\sto)(.*)`应该管用。

# objective-c - 将“__unsafe_unretained id *”转换为“const void **”

> ID：10273833
> 
> 赞同：2
> 
> 时间：2012-04-23T01:40:35.747
> 
> 标签：objective-c, ios, automatic-ref-counting

我正在尝试`[NSMutableDictionary dictionaryWithObjects:frames forKeys:items]`使用 CFDictionary 来实现，因此我可以控制键和值回调。这就是我所拥有的：

```
__unsafe_unretained id keys[itemCount];
[items getObjects:keys range:NSMakeRange(0, itemCount)];
__unsafe_unretained id values[itemCount];
[frames getObjects:values range:NSMakeRange(0, itemCount)];
CFDictionaryCreate(kCFAllocatorDefault, (const void **)keys, (const void **)values, itemCount, &kCFTypeDictionaryKeyCallBacks, &kCFTypeDictionaryValueCallBacks); 
```

这给出了以下错误：`Cast of an indirect pointer to an Objective-C pointer to 'const void **' is disallowed with ARC`。

我尝试了各种桥接排列，但我似乎无法毫无怨言地编译它。

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T06:58:56.093

我也无法找到它的语法。（编辑：贾斯汀的答案有语法。）试试这个：

```
void *keys[itemCount];
[items getObjects:(__unsafe_unretained id *)(void *)keys range:NSMakeRange(0, itemCount)]; 
```

然后，当您调用`CFDictionaryCreate`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T07:25:34.313

此时您可以简单地将其转换`void*`为：

```
CFDictionaryRef d = CFDictionaryCreate(kCFAllocatorDefault,
                        (void*)keys,
                        (void*)values,
                        itemCount,
                        &kCFTypeDictionaryKeyCallBacks,
                        &kCFTypeDictionaryValueCallBacks); 
```

您也可以考虑这种方法：

```
const void* keys[itemCount];
CFArrayGetValues((__bridge CFArrayRef)items, CFRangeMake(0, itemCount), keys);
const void* values[itemCount];
CFArrayGetValues((__bridge CFArrayRef)frames, CFRangeMake(0, itemCount), values);

CFDictionaryRef d = CFDictionaryCreate(kCFAllocatorDefault,
                                       keys,
                                       values,
                                       itemCount,
                                       &kCFTypeDictionaryKeyCallBacks,
                                       &kCFTypeDictionaryValueCallBacks); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T01:42:25.133

试试`(__bridge const void **)keys`。

# c - 空指针的奇怪行为

> ID：10273836
> 
> 赞同：1
> 
> 时间：2012-04-23T01:41:10.007
> 
> 标签：c, pointers, void

我想创建一个获取 void 指针的函数。该指针指向任意用户数据。这与现在无关。哪个描述符更重要，它描述了这个用户数据。就是**根据这个数据**。我想得到它的地址，有两种不同的解决方案：

```
struct data_desc {
     size_t size;
     data_type_t type;
     /* And so on... */
};

/* Operate on the descriptor */
void operate_on_data(void *ptr)
{
    struct data_desc *desc;
    /* Now I want to get the desc /*

    /* This is the first approach, simply fails */
    desc = ((struct data_desc *)ptr) - sizeof(struct data_desc);
    /* This is the second, it works...*/
    desc = (struct data_desc *)ptr;
    desc--; 
    /* Do something with desc */
} 
```

如您所见，我使用两种不同的方法**来获取描述符的地址**。我认为第一个更自然，但它只是行不通。我使用了更多的括号来避免优先级问题。

我知道这些方法*并不安全*。**第一个不起作用，为什么？**这种行为背后的原因是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T01:52:50.743

问题是指针算术。当你拿一个指针减去 1 时，你实际上是在减去`(1*sizeof(struct))`。第一个带有“-sizeof”的等式，实际上是`(sizeof(struct) * sizeof(struct))`从指针中减去字节。说得通？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T01:48:32.897

当您定义`data_desc`为指向 a 的指针时`struct data_desc`，编译器知道`sizeof(struct data_desc)`在您将指针递增或递减 1 时进行加法或减法。换句话说，它将“一个”翻译成“一个结构”。

编写这样的代码很常见：

```
struct data_desc *desc = (struct data_desc *) ptr; 
```

然后你可以像这样操作它：

```
size_t sz0 = desc->size;  // size of 0th element
size_t sz1 = desc[1].size;  // size of 1st element
size_t sz2 = (desc + 2)->size; // size of 2nd element (slightly awkward)
desc++;  // Increment to next structure 
```

回到你原来的代码：你*可以*写`desc = ((struct data_desc *)ptr) - 1;`，但大多数程序员更喜欢初始化`desc`然后直接使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T01:56:52.200

```
desc = ((struct data_desc *)ptr) - sizeof(struct data_desc); 
```

您已类型转换`ptr`为`struct data_desc *`. 现在，编译器对该指针执行的所有算术运算都以它指向的类型的大小为单位。

因此，如果您减去`sizeof(struct data_desc)`（假设`struct data_desc`大小为 8 个字节），`ptr`将指向一个可以`struct data_desc`在其自身和`ptr`.

假设`loc`下面每个都可以容纳一个`struct data_desc`

```
-------------------------------------------------------------
|     |     |     |     |     |     |     |     |     |     |
| loc | loc | loc | loc | loc | loc | loc | loc | loc | ptr | 
|  9  |  8  |  7  |  6  |  5  |  4  |  3  |  2  |  1  |     |
-------------------------------------------------------------
      ^                                               ^
      |                                               |
     desc                                            ptr 
     location                                        location
     after
     subtraction 
```

# sql - 用于处理字符串的 SQL 函数

> ID：10273844
> 
> 赞同：-1
> 
> 时间：2012-04-23T01:42:29.413
> 
> 标签：sql, sql-server, string, sql-server-2008

我需要一个函数将字符串转换为仅字母数字字符...

意思是用空/空白替换（空）除了标准的 26 个字母和 10 个数字之外的所有其他字符。并用连字符替换所有空格。一个例子是这样的：

从

```
 stack## overfl*w's s"te !s cool! 
```

到

```
 stack-overflws-ste-s-cool 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T02:04:17.707

您可以为此使用“XML 连接技巧”。您需要有一个从 1 到最长输入字符串长度的整数表。

```
-- The table Nums should have a column "n" with
-- integers from 1 to N, where N is at least as long as
-- the longest input string.

declare @T table (
  id int,
  s varchar(40)
);

insert into @T values
  (1,'This *9--St ring.. '),
  (2,'@#_that*8.3a--String..')        
     select
      id,
      (
        select case when substring(s,n,1) = space(1) then '-' else substring(s,n,1) end
        from Nums
        where substring(s,n,1) like '[ a-zA-Z0-9]'
        and n between 1 and datalength(s)
        order by n
        for xml path('')
      ) as S
    from @T

Result:

id  S
1   This-9St-ring-
2   that83aString 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T02:58:17.117

```
CREATE FUNCTION dbo.StripNonAlphaNumerics
    (
      @s VARCHAR(255)
    )
    RETURNS VARCHAR(255)
    AS
    BEGIN
      DECLARE @p INT = 1, @n VARCHAR(255) = '', @c CHAR(1);
      SET @s = REPLACE(@s, ' ', '-');
      WHILE @p <= LEN(@s)
      BEGIN
        SET @c = SUBSTRING(@s, @p, 1);
        IF @c = '-' OR @c LIKE '[A-Za-z0-9]'
        BEGIN
          SET @n += @c;
        END 
        SET @p += 1;
      END
      RETURN(@n);
    END
    GO 
```

用法：

```
SELECT dbo.StripNonAlphaNumerics('tether-45(;$&@- ip'); 
```

结果：

```
tether-45--ip 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T01:54:22.770

您可以使用“字符漫游器”概念，将原始字符串的每个字符连接到顺序整数表中。在此示例中，我们将最大长度限制为 80，但您当然可以根据需要使整数表变大。

```
declare @c table (i int);
declare @i int=1;
while @i<80 begin
    insert into @c values(@i);
    set @i+=1;
end

declare @str varchar(80)='stack## overfl*w''s s"te !s cool!';
declare @newstr varchar(80)='';

select @newstr+=replace(substring(@str,i,1),' ','-')
from @c
where substring(@str,i,1) like '[A-Za-z0-9 ]';

select @newstr; 
```

结果：

```
stack-overflws-ste-s-cool 
```

性能说明：此方法是我在工作中使用的一种方法，用于从转换项目中的遗留数据中清除坏字符。在该设置中，整数表被预先创建并由函数调用。整数表的`i int`列上还定义了一个 PK。性能非常快。

# javascript - 如何连续多次获取Ajax成功消息事件

> ID：10273850
> 
> 赞同：0
> 
> 时间：2012-04-23T01:43:16.607
> 
> 标签：javascript, jquery, ajax, forms, jquery-animate

我有一个填写 codeigniter 日历的表格。首先，我会说表单与 Ajax 和我的控制器配合得很好。我第一次提交表单时，所有数据都进入数据库，我得到了我的成功事件，它只是重复我输入的内容，然后它消失了。效果很好。

第二次输入数据（我通常连续输入数据至少5-6次）数据进入数据库但没有第二个事件消息。或第三、第四等。

我的问题是**如何在每次提交表单时触发成功回调？**

我的jQuery

```
$(function() {
$('.error').hide();
$("#calen").submit(function() {
var data = $('#calen').serialize();
$.ajax({
url: ("http://XXXXXX.net/mycal/cale"),
data: data,
type: "POST",
success: function(msg){
    $('#cal').append(msg);
    $('#cal').delay(5000).fadeOut(1500);
    }      

});
return false;
});
}); 
```

我知道这必须很简单。感谢您的时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T01:53:02.070

看起来问题在于您*淡出*，但从不淡入。尝试添加：

```
$('#cal').fadeIn(1500); 
```

在将消息附加到元素之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T01:53:59.137

我注意到第一次更新会隐藏 div。我没有看到你`#cal`为第二次更新重新显示了 div。您是否尝试过这样做，或者在那里发出警报以查看它是否真的被解雇了？

# php - 有没有更有效的方法来处理二进制文件？

> ID：10273853
> 
> 赞同：1
> 
> 时间：2012-04-23T01:44:06.060
> 
> 标签：php

我有一个脚本可以执行一大堆`fread`并`fseek`调用二进制文件，使用这样创建的文件指针：

```
$fp = fopen('r','mybinaryfile'); 
```

该脚本处理二进制文件中大约 2,500 个单独的文件，每个文件都吸引了许多`fseek`和`fread`调用，因此对文件指针的总操作可能远远超过 20,000。

我是否认为使用我的`$fp`文件指针的每个调用都会导致磁盘上的物理读取操作？

如果是这样，我想知道将整个文件加载到内存中并像这样使用它是否会更好。会吗？

目前，当我运行此脚本时，大约需要 20 秒。在我看来，还有改进的余地。

编辑：而且，如果可以将文件放入内存，那么在坚持指针方法的同时，这是如何实现的？这些文件每个只有大约 3MB，所以内存不足应该不是问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T01:58:42.890

> 我是否认为使用我的 $fp 文件指针的每个调用都会导致磁盘上的物理读取操作？

不，不一定。操作系统会将文件缓冲到内存中，因此读取和写入不必立即访问磁盘。操作系统也很擅长这样做。

这是一种将整个文件读入内存并且仍然能够使用文件流对其进行操作的方法。

```
$content = file_get_contents('large_file.bin');
$membuf = fopen("php://memory", "w+b");
fputs($membuf, $content);
unset($content);
rewind($membuf);

// now you can read and seek on $membuf using the usual stream functions fseek, fread etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T01:53:12.627

通过将整个文件作为字符串或数组读取到变量中，将整个文件存储在内存中。做任何你想做的事，然后写回来。唯一的问题是，当您的 PHP 脚本在内存中运行时，其他人可能会编辑该文件，因此您可能希望在读取文件后锁定文件，并在写入前解锁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T01:54:01.633

如果您在文件上做很多事情（不仅仅是一次操作），那么将二进制文件加载到内存中应该是更可取的，只要您有足够的内存来包含您的文件。

在 PHP 中，要将文件加载到内存中，可以使用`file_get_contents`

`file_get_contents` [http://php.net/file_get_contents](http://php.net/file_get_contents)

```
$content = file_get_contents('mybinaryfile');

// $content is a string containing the whole content of your binary 
```

然后，您可以使用数组引用“指向”文件上的任何位置，

```
$content[100]; // the 101th character of your binary 
```

完成后，要将其写回，请使用`file_put_contents` [http://php.net/file_put_contents](http://php.net/file_put_contents)

```
file_put_contents('mybinaryfile', $content); 
```

# php - 多页会话，将所有信息发布到一个涉及 AJAX 的表中

> ID：10273854
> 
> 赞同：0
> 
> 时间：2012-04-23T01:44:17.620
> 
> 标签：php, mysql, ajax

我对 PHP 真的很陌生。我一直在处理这个多页表单。

我有五页，第一页用户输入他们的电子邮件，第二页是发布到同一个表的 AJAX，第三页是另一个 $post 使用 AJAX 添加到表中，最后一页只是破坏会话，但回显所有信息并添加提交的数据。我怎么能做到这一点？

我的表格现在的样子，它只包含电子邮件，但现在包含数据：

电子邮件 - 数据 1 - 数据 2 - 数据 3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T01:49:28.790

最好的方法是将前一页的表单存储在会话数据中，在会话中慢慢构建整个表单。在最后一页，您只需将其全部放入表格中。

唯一需要 AJAX 的时候是当您不想刷新页面时...如果您有 5 个页面，一个页面指向另一个页面，您可以将所有值存储到会话中，不需要 AJAX。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T01:50:02.130

您可以保存用户在会话的第一页和第二页中输入的数据，在第三页中，将这些保存的数据输出到隐藏输入字段或您喜欢的其他隐藏元素中。并使用 AJAX POST 发布所有这些数据，包括数据 3。

# emacs - 运行编译好的 Lisp 程序

> ID：10273856
> 
> 赞同：7
> 
> 时间：2012-04-23T01:45:13.083
> 
> 标签：emacs, lisp, common-lisp, slime

我猜这不是火箭科学，但我怎样才能运行编译的 lisp 文件？我在 Windows 下使用 emacs 和 SLIME。从 SLIME 菜单可以直接编译文件，一旦编译完成，它会在与我的 lisp 源代码相同的目录中生成一个 wx64fsl。如何加载/运行此文件？我一直在通过评估整个代码块来运行文件，并且有人告诉我运行编译版本的性能要好得多。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T02:09:09.500

来自 SLIME REPL：

1.  `,cd`将目录更改为您的 lisp 文件的目录
2.  `(load (compile "filename.lisp"))`

或从 SLIME 菜单：

SLIME > 编译 > 编译 \ 加载

所以基本上它非常简单，甚至还有一个菜单选项，我最初只是被命名法弄糊涂了。希望这将有助于将来的某人。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-27T00:28:40.210

`(LOAD "whatever")`通常会加载和编译*whatever.lisp*，除非已经存在具有相同名称和实现特定扩展名的编译文件。这些文件是`(COMPILE-FILE "whatever.lisp")`使用 key 使用 SLIME 或在 emacs中生成的`C-c C-k`。

正如 Rainer 建议的那样，您可能应该使用[ASDF](http://common-lisp.net/project/asdf/)来定义您的系统，并且最肯定的是使用[quicklisp](http://www.quicklisp.org/)来管理依赖项和安装包。还有我推荐用于创建项目模板的**quickproject 。**您可以使用 quicklisp 轻松安装它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-23T04:02:05.970

你的 lisp 实现会自动编译函数吗？OS X 上的 SBCL 对我有用。如果是这种情况，我认为除了在加载文件时节省编译时间之外，您不会从使用编译文件中看到任何好处。

示例取自[CLHS](http://clhs.lisp.se/Body/f_cmpd_f.htm)，并在我的 REPL 设置上进行了测试：

```
(defun f (x) x)
F
> 
(compiled-function-p #'f)
T
> 
```

在实践中，我一直只使用 .lisp 文件。从来没有把时间花在使用 Make 作为构建工具来在 lisp 源代码更改时自动编译它。除了节省编译时间（不加快运行时间）之外，至少在我的设置中，我没有看到使用编译的 fasls 带来的任何实际好处。

为了节省编译时间，我使用了一种技术，将大部分包/稳定代码加载（自动编译）到核心文件中，这样当我从该核心文件开始并在.lisp 文件。

# c# - 按下其中的取消按钮时如何卸载部分视图

> ID：10273858
> 
> 赞同：1
> 
> 时间：2012-04-23T01:45:30.840
> 
> 标签：c#, .net, asp.net-mvc-3, partial-views

我正在使用.NET MVC3 ....当单击按钮时，我有一个部分视图呈现到页面中...

```
$('#myLink').click(function () {
     $('#partial2Div').load(this.href);
     return false;
}); 
```

但是......我在加载时在这个局部视图内有一个取消按钮，我试图弄清楚当按下这个取消按钮时如何让“原始”页面保持其状态（它上面有编辑字段）。 ..只是让部分视图消失。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T02:19:50.803

根据[jQuery API](http://api.jquery.com/load/)，当内容被加载时有一个回调。你应该可以尝试这样的事情：

```
$('#myLink').click(function () {
     $('#partial2Div').load(this.href, function(){
         $("#id-of-cancel-button").click(function(){
             $("#partial2Div").hide();
         });
     });
     return false;
}); 
```

只要确保在绑定时引用取消按钮的 id 即可！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T01:48:38.560

如果不加载整个页面，您将无法卸载部分视图。

但是您可以显示/隐藏它，只需将部分视图放在 div 中并在按钮单击时隐藏 div。或者从 DOM 中完全删除元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-19T14:50:13.453

```
$("cancel").click(
  function()
  {    
    $("partial2Div").html(''); 
  }
); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-23T01:49:59.347

如果您已经更新了`partial2Div`then 那么将您的逻辑更改为不这样做，而是在另一个 div 中插入您的部分，如果不是这种情况，并且`partial2Div`仅适用于该部分，您所要做的就是隐藏它`div`，如下所示：

```
$("cancel").click(function(){
   $("partial2Div").hide();
}); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-09-14T18:03:02.703

事实是，你不能卸载它。

您可以将 div 的样式设置为“显示：无”。

$("partial2Div").hide();

# objective-c - 在 Objective-C 中，initWith 返回 (Fraction *) 和 init 返回 (id) 有什么区别？

> ID：10273860
> 
> 赞同：0
> 
> 时间：2012-04-23T01:45:56.583
> 
> 标签：objective-c

在 Stephen Kochan 的 Objective-C 书（我有第 3 版）中，一个 init 函数返回`Fraction *`，一个返回`id`：

```
-(Fraction *) initWith: (int) n: (int) d {
    self = [super init];
    if (self)
        [self setTo: n over: d];

    return self;
}

-(id) init {
    return [self initWith: 0 over: 0];
} 
```

（在本书的第 198 至 199 页）。为什么会这样，如果两者都返回`Fraction *`或都返回`id`（或有`init`return`Fraction *`和`initWith`return `id`）有关系吗？这样做有什么副作用（如果有的话）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T01:47:44.163

`Init`方法通常返回`id`类型，因为它们不一定返回它们所属类的对象。

例如，`-[NSMutableArray init]`实际上返回一个`NSCFMutableArray`对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T01:53:08.160

倾向于`id`从初始化器返回。

您可以使用其他语法，但在实践中它非常嘈杂（除非您从未子类化并且选择器保证是唯一的）。

方便的构造函数很好，但是将类型名称添加到构造函数中是最安全的：

```
+ (Fraction *)newFractionWithNumerator:(int)pNumerator denominator:(int)pDenominator; 
```

如果没有这些措施，您的程序将面临多个编译器警告和错误。

# objective-c - 在 Objective-C/Xcode 中将用户输入添加到数组

> ID：10273867
> 
> 赞同：0
> 
> 时间：2012-04-23T01:46:56.770
> 
> 标签：objective-c, ios, xcode

我正在构建一个应用程序并遇到了一些问题。构建和尝试学习如何在 Objective-C 中构建和编码是一个漫长的过程，但它很有趣。现在，我几乎完成了它，但我终其一生都无法弄清楚如何从一个文件（UITextField）生成用户输入并在另一个文件（UITableView）中用它填充一个数组。

这是我正在使用的一些代码，我试图这样填充数组：

```
arryData = [[NSArray alloc] initWithObjects:@"@&", textFieldinput, nil]; 
```

关于如何按照这些思路做某事的任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T01:57:05.417

当然 - textFieldinput 可以使用 text 属性报告它显示的字符串，所以......

```
arryData = [[NSArray alloc] initWithObjects:@"@&", textFieldinput.text, nil]; 
```

..会更好。祝你好运，并继续享受它！

# java - 无法将值“2012-04-05 10:20:00”从 XX 列转换为 TIMESTAMP

> ID：10273870
> 
> 赞同：5
> 
> 时间：2012-04-23T01:47:42.493
> 
> 标签：java, mysql, datetime, jdbc

当 JDBC 尝试将 MySQL (5.1.51) 中的有效日期时间转换为 java.sql.timestamp 时，将引发 java.sql.SQLException。一个例子是：

```
java.sql.SQLException: Cannot convert value '2012-04-05 10:20:00' from column 40 to TIMESTAMP 
```

这是第一次

```
Versions:
MySQL: 5.1.51
J/Connector: 5.1.19
Column Definition:  DATETIME
Java Type:   java.sql.Timestamp 
```

堆栈跟踪：

```
Cannot convert value '2012-04-05 10:20:00' from column 40 to TIMESTAMP.
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:1073)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:987)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:982)
    at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:927)
    at com.mysql.jdbc.ResultSetRow.getTimestampFast(ResultSetRow.java:1335)
    at com.mysql.jdbc.BufferRow.getTimestampFast(BufferRow.java:576)
    at com.mysql.jdbc.ResultSetImpl.getTimestampInternal(ResultSetImpl.java:6466)
    at com.mysql.jdbc.ResultSetImpl.getTimestamp(ResultSetImpl.java:6066)
    at com.mysql.jdbc.ResultSetImpl.getTimestamp(ResultSetImpl.java:6104)
    at org.apache.tomcat.dbcp.dbcp.DelegatingResultSet.getTimestamp(DelegatingResultSet.java:300)
    at org.apache.tomcat.dbcp.dbcp.DelegatingResultSet.getTimestamp(DelegatingResultSet.java:300)
    at org.apache.tomcat.dbcp.dbcp.DelegatingResultSet.getTimestamp(DelegatingResultSet.java:300) 
```

DAO 类最近没有被修改过。服务器上最近的唯一变化是将 MySQL 从 5.1.46 升级到 5.1.51

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-09-24T17:22:52.340

您可以通过将 useFastDateParsing=false 添加到 JDBC 连接 URL 来禁用快速日期解析。例如以下可能会解决您的问题：

```
jdbc:mysql://yourHostName:3306/yourDbName?useUnicode=true&useFastDateParsing=false&characterEncoding=UTF-8 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T02:20:43.203

我可以建议：

1.  尝试`DEBUG`您的`DAO`并查看您的`Sql Query`并尝试将手册输入到 MySQL 中，您会发现问题更容易。
2.  将您的 MySQL 降级到 5.1.46 是否会出现同样的问题？如果是，那么您的表结构有问题。列已被某人更改。

# r - 使用稀疏矩阵预测变量和稀疏矩阵响应拟合线性回归模型

> ID：10273871
> 
> 赞同：2
> 
> 时间：2012-04-23T01:47:42.807
> 
> 标签：r, matrix, statistics, sparse-matrix

使用稀疏矩阵时，获得与矩阵响应的最小二乘拟合的最佳方法是什么？我的回归矩阵和响应矩阵都是稀疏的。在我的特定情况下，它们是多值因素，并且这些因素与计数变量相互作用。

`slm.fit`从`SparseM`包中选择是一种选择，但似乎没有简单的方法来构建`SparseM`模型矩阵。所有示例都使用密集矩阵创建它们，然后转换或从文件中读取它。这意味着我可以使用 Matrix 构建模型矩阵，然后将其写入文件，然后使用 SparseM 将其读取。不完全是一个很好的解决方案。

`speedlm`, `sparse.lm.fit`, 和`glm4`所有似乎都无法处理 Matrix 响应。我可以简单地`speedlm`为响应矩阵的每一列运行一次，但这非常低效。

# php - 以相反的顺序对 Glob 进行排序并限制为 2

> ID：10273873
> 
> 赞同：1
> 
> 时间：2012-04-23T01:48:10.947
> 
> 标签：php

我正在尝试在文件夹中创建文件列表，但顺序相反并限制为 2 个（最后 2 个），有很多很好的例子，所以我喜欢这个......但我试图限制数量的结果，我几乎有它，但它给了我一个错误......你们能帮我吗？

```
<?php
foreach (glob("../../imagenes/medianas/*") as $files) {
$images[filectime($files)] = $files;
}
krsort($images);
foreach($images as $timestamp => $files) if ($limite++ < 2){

print "<img src='../../imagenes/medianas/". basename($files) ."' title=''>"."<br>";
}
?> 
```

非常感谢您的帮助。

* * *

对不起，好的...我修复了它，这就是它的工作原理...谢谢乔恩，很好的提示。这是有相同问题的任何人的代码

```
<?php
$limite = 0;
foreach (glob("../../imagenes/medianas/*") as $files) {
    $images[filectime($files)] = $files;
}
krsort($images);
foreach($images as $timestamp => $files) if ($limite++ < 2){

   print "<img src='../../imagenes/medianas/". basename($files) ."' title=''>"."<br>";
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T01:57:13.593

当您遍历`glob()`数组时，只需添加 a`$count`并首先检查它：

```
$limite = 2;
$count = 0;
foreach(krsort(glob('...')) as $file)
  if($count++ <= $limite)
    // do what you do with $file 
```

# android - 方法未定义？

> ID：10273875
> 
> 赞同：0
> 
> 时间：2012-04-23T01:48:15.067
> 
> 标签：android, sqlite

当我写下面的代码时，它说该方法`getReadableDatabase()`是 undefined for `dbHelper`，这是什么问题？

```
public void checklogin(String logged){

    DatabaseAdapter dbHelper = new DatabaseAdapter(LoginActivity.this);

    db = dbHelper.getReadableDatabase();

    Cursor mCursor = db.query(dbHelper.TABLE_USERS,new String[]{"select * from users"}, " Name like" + "'logged+'",null,null,null,null);

     if  (mCursor.moveToFirst()){
         Toast.makeText(LoginActivity.this, "Yaaaay", Toast.LENGTH_LONG).show();
     }

      Toast.makeText(LoginActivity.this, "invalid", Toast.LENGTH_LONG).show();

        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T02:04:25.380

你的实现是`DatabaseAdapter`什么？它不是 Android 框架的一部分。我所知道的唯一实现的类`getReadableDatabase()`是[SQLiteOpenHelper](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#getReadableDatabase%28%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T02:07:18.630

这通常意味着 getReadableDatabase() 不是 DatabaseAdapter 类中的函数。

# c++ - Sprintf 使用运行时定义的字符串和列表

> ID：10273881
> 
> 赞同：1
> 
> 时间：2012-04-23T01:49:15.427
> 
> 标签：c++, printf, variadic-functions

我试图弄清楚如何在运行定义的字符串上的 C++ sprintf 调用中使用运行时定义的列表。字符串中已经有标记，我只需要以某种方式调用它以匹配字符串中尽可能多的 args。基本上是将下面的 4 个调用编译成一个对所有调用都有效的调用，类似于 sprintf（缓冲区，“这是我的带有 args %i 的字符串”，myvec）。

```
std::vector<int> myvec = {0, 1, 2, 3, 4};

char buffer [500];

sprintf (buffer, "This is my string with args %i", myvec[0], myvec[1], myvec[2], myvec[3], myvec[4]);

sprintf (buffer, "This is my string with args %i %i", myvec[0], myvec[1], myvec[2], myvec[3], myvec[4]);

sprintf (buffer, "This is my string with args %i %i %i", myvec[0], myvec[1], myvec[2], myvec[3], myvec[4]);

sprintf (buffer, "This is my string with args %i %i %i %i", myvec[0], myvec[1], myvec[2], myvec[3], myvec[4]); 
```

我和我的同事谈过，他们认为不存在这样的东西，所以我想我会把它放在那里。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T02:27:07.807

至少如果我了解您要完成的工作，我将从以下内容开始：

```
std::ostringstream stream("This is my string with args ");

std::copy(myvec.begin(), myvec.end(), std::ostream_iterator<int>(stream, " "));

// stream.str() now contains the string. 
```

如所写，这将在结果字符串的末尾附加一个额外的空格。如果您想避免这种情况，您可以使用`infix_ostream_iterator`我在上一个[答案](https://stackoverflow.com/questions/3496982/printing-lists-with-commas-c/3497021#3497021)中发布的内容来代替`ostream_iterator`此用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T01:55:16.967

你可以自己做。创建一个接受向量并返回正确字符串的函数。我没有时间测试它，但是：

```
string vecToString (const vector<int> &v)
{
    string ret = "This is my string with args ";

    for (vector<int>::const_iterator it = v.begin(); it != v.end(); ++it)
    {
        istringstream ss;
        ss << *it;
        ret += ss.str() + (it != v.end() ? " " : "");
    }

    return ret;
} 
```

# javascript - 使用 IE 捕获 HTML 内容

> ID：10273884
> 
> 赞同：1
> 
> 时间：2012-04-23T01:49:49.293
> 
> 标签：javascript, jquery, dom

我正在尝试获取当前 HTML 文档的内容以进行进一步处理。在有用的浏览器中，我可以很容易地做到这一点。（见[http://jsfiddle.net/HYyH4/](http://jsfiddle.net/HYyH4/)）

在 IE 中查看该链接，我无法从该命令获得任何输出 - “无法设置 innerHTML 属性。此操作的目标元素无效。”

有没有其他方法可以完成这样的事情，而无需手动重写整个 DOM？我最终希望能够将其拉入 jQuery 中，这样我就可以轻松删除元素，所以不会失败的东西`jQuery.html()`也会很好:)

感谢您的任何帮助/反馈！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T03:53:10.420

我不知道您为什么要尝试复制文档的源代码，所以我不能说以下内容是否有用，但是它返回一个与原始 DOM 完全相同的 HTML 元素：

```
var doc = document.getElementsByTagName('html')[0];
var newDoc = doc.cloneNode(true);
alert(newDoc.innerHTML); 
```

这是否适合您的情况取决于您。请注意，克隆的 HTML 元素将（取决于浏览器）缺少一些或所有动态添加的侦听器，并且表单控件值可能不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T01:56:19.703

您可以尝试使用`documentElement`which 将拉文档根节点。

> 返回作为文档根元素的 Element（例如，HTML 文档的元素）。

它适用于 IE 5.5+。继承人mdn[文章](https://developer.mozilla.org/en/DOM/document.documentElement)讨论它以获取更多信息。

**[现场演示](http://jsfiddle.net/loktar/HYyH4/1/)**

另请注意.. jsfiddle 根本不知道在 IE 中运行良好，因此如果这就是您用来测试的东西，这可能是问题的一部分。

# ruby-on-rails-3 - 在 Rails 中显示两次的 Flash 消息

> ID：10273885
> 
> 赞同：1
> 
> 时间：2012-04-23T01:49:49.417
> 
> 标签：ruby-on-rails-3

当用户访问一个页面时，我试图显示一个 Flash，感谢他们访问该页面，这使他们可以选择与他们的朋友分享 URL。但是，Flash 消息显示在页面上（正确），但随后会转移到他们访问的下一页。我怎样才能在第一页上只显示这个？

现在，我想要显示消息的方法/视图是：

```
def show    
  user_message
end 
```

user_message 是我的应用程序控制器中的一种方法：

```
def user_message
  if current_user    
    flash[:page_visited] = "Thank you for visiting!"
  end
end 
```

我使用部分（包含在我的应用程序布局中）作为我的 Flash 通知：

```
<% flash.each do |name, msg| %>
  <% if name == :notice %>  
    <div class="alert-message block-message success" data-alert="alert">
        <a class="close" data-dismiss="alert">×</a>
        <%= msg %>&nbsp;<br />  
    </div>
  <% elsif name == :page_visited %> 
    <div class="alert-message block_message warning" data-alert="alert">
        <a class="close" data-dismiss="alert">×</a>
        <strong><%= msg %><br><br></strong>
        Let your friends and family know!<br /><br />
        <!-- ShareThis Button BEGIN -->
        <span class='st_facebook_large'></span>
        <span class='st_twitter_large'></span>
        <span class='st_plusone_large'></span>      
        <span class='st_sharethis_large'></span>
        <!-- ShareThis Button END -->
    </div>  
  <% else %> 
    <div class="alert alert-message error" data-alert="alert">
        <a class="close" data-dismiss="alert">×</a>
        <%= msg %>
    </div>
  <% end %> 
<% end %> 
```

所以发生的事情是它会在 :show 视图上正确显示，但在下一页上，用户单击消息再次显示并使用 flash“错误”格式并且不显示 ShareThis 链接（尽管 url 不会无论如何我都希望他们分享）。

我该如何纠正？我尝试将 user_message 移动到 before_filter 即

`before_filter :user_message, :only => :show`

但这做了同样的事情 - 在 :show 和后续页面上显示 flash 消息（作为错误消息）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T03:18:16.180

立即尝试闪光

```
def user_message
  if current_user    
    flash.now[:page_visited] = "Thank you for visiting!"
  end
end 
```

# c++ - 将 boost accumulator_set 存储在 STL 映射中

> ID：10273888
> 
> 赞同：2
> 
> 时间：2012-04-23T01:50:28.073
> 
> 标签：c++, boost, map

我想将多个 boost accumulataor_set 存储在 stl 地图中。

我阅读的所有示例都`accumulator_set`用作局部变量：

```
accumulator_set<int, stats<tag::rolling_mean> > acc(tag::rolling_window::window_size = 5);

acc(1);
acc(2);
acc(3);

cout << rolling_mean(acc); 
```

但是我想存储`accumulator_set`在地图中。我试着写这样的代码，但我卡住了：

```
map<int, accumulator_set<long, stats<tag::rolling_mean> > > avg;

void update(int id, long data){
    if(avg.count(id)==0){
        //key doesn't exist in map
        avg[id]= ;// How to create acc as in above example and store it in map?
    }
    accumulator_set<long, stats<tag::rolling_mean> > &acc = avg[id];
    acc(data);
}

void read(int id){
    cout << rolling_mean(avg[id]) ;
} 
```

如何`accumulator_set`在上面的示例中创建一个并将其（引用或对象）存储在地图中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T06:12:20.027

您可以使用插入（）：

```
typedef accumulator_set<long, stats<tag::rolling_mean> > acc_set_t;

if(avg.count(id)==0){
    //key doesn't exist in map
    avg.insert( std::make_pair(id, acc_set_t(/*init parameters here*/) ));
} 
```

# javascript - 在新选项卡中打开链接

> ID：10273890
> 
> 赞同：10
> 
> 时间：2012-04-23T01:50:51.423
> 
> 标签：javascript, html, xhtml, tabs, anchor

我为我正在做的一个项目创建了一个网站。在网站的内容中有一些可以访问的外部网页的链接。同时，当用户单击其中一个链接时，他将被带到指定的链接，并且他将不再出现在当前页面上。我想要做的是当用户单击链接时，单击链接中的指定网站会出现在新选项卡中。这样，用户就可以留在当前页面上，并且还可以在新选项卡上查看其他页面。

我在互联网上查看并发现这似乎很有用：

```
function externalLinks()
{
  var anchors = document.getElementsByTagName("a");
  for (var i=0; i<anchors.length; i++)
  {
      var anchor = anchors[i];
      if(anchor.getAttribute("href"))
        anchor.target = "_blank";
  }
}
window.onload = externalLinks; 
```

我面临的问题是我网站的导航栏包含锚标签。因此，现在如果用户单击导航栏上的链接，它将打开一个新选项卡。我希望只有当用户点击我网站内容中的链接时才会发生这种情况。因此，如果用户单击导航栏中的链接，则不应打开新选项卡，而应将他带到指定的目的地。

我尝试向内容中的所有链接添加一个类并使用 getElementByClassName 但它仍然不起作用

任何人都可以帮助我

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-23T01:57:46.197

* * *

您可以只使用 HTML：

```
<a target="_blank" href="YourAmazingURL">Click here for Amazing URL</a> 
```

另一个例子：

```
<a target="_blank" href="http://www.google.com/">Google</a> 
```

这利用了目标属性。

关于目标属性的更多信息：http: [//www.w3schools.com/tags/att_a_target.asp](http://www.w3schools.com/tags/att_a_target.asp) 另外：[http ://www.w3schools.com/html/html_links.asp](http://www.w3schools.com/html/html_links.asp)

编辑：

对于 XHTML，只需这样做：

```
<a href="YourAmazingURL" onclick="window.open(this.href,'_blank');return false;">Click here for Amazing URL</a> 
```

或者，再次：

```
<a href="http://www.google.com/" onclick="window.open(this.href,'_blank');return false;">Google</a> 
```

* * *

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T01:54:57.433

你需要为此使用javascript吗？

如果不是，您可以直接将属性添加到 HTML 中的 a 标记。

例如：`<a href="http://www.google.co.uk" target="_blank">Google</a>`

如果不需要 javascript，这可能是一种更简单的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-30T09:00:16.960

如果你需要依赖 JavaScript：

基本上你只需要改变你的`if`-condition （检查锚链接是否指向外部位置）。

所以，代替`if(anchor.getAttribute("href"))`，使用`if(anchor.getAttribute("href") && anchor.hostname!==location.hostname)`。

通过一些代码清理，您的函数应如下所示：

```
function externalLinks() {
  for(var c = document.getElementsByTagName("a"), a = 0;a < c.length;a++) {
    var b = c[a];
    b.getAttribute("href") && b.hostname !== location.hostname && (b.target = "_blank")
  }
}
;
externalLinks(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-04-23T01:55:27.310

你想用`document.getElementById("theidgoeshere");`

为此，请在链接中设置 id 属性，如下所示：

```
<a href="www.google.com" id="theidgoeshere">Google</a> 
```

然后在你的 javascript

```
 var anchor = document.getElementById("theidgoeshere");
  if(anchor.getAttribute("href"))
      anchor.target = "_blank"; 
```

另请注意，您可能希望不使用 javascript。只需放入`target="_blank"`您的锚标签。

# javascript - 在 tableview 单元格中突出显示 uiwebview 文本

> ID：10273892
> 
> 赞同：2
> 
> 时间：2012-04-23T01:51:17.683
> 
> 标签：javascript, iphone, search, uitableview, uiwebview

我有一个嵌入了 uiwebview 的 uitableview。webview 包含 html 文本。我正在使用 JavaScript 在 web 视图中搜索和突出显示文本。我已成功使搜索突出显示加载的最后一个 tableview 单元格中的搜索文本，但是如何让它同时突出显示所有可见单元格中的文本？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T02:44:33.083

```
[tableView reloadData]; 
```

然后使用突出显示 js 代码重新加载所有 webview

# c++ - 检查值是否真的存在于动态数组中？C++

> ID：10273893
> 
> 赞同：0
> 
> 时间：2012-04-23T01:51:36.673
> 
> 标签：c++, c

我想知道在 C++ 中是否有办法检查动态数组的值是否确实存在。

```
int *x = new int[5]; 
```

好的，所以我认为默认情况下 x 的每个值都是 0。但是，问题是，当我用值填充它时，我实际上可能会输入 0。因此，这会导致混淆，告诉我们如果value 是否真的存在（0 似乎是告诉我们它是 NULL 的成语，但在这种特殊情况下，我不能使用该成语，因为 0 可能是给我的值）。

是否有另一种方法来检查动态数组中的值是否未定义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T01:59:59.207

好吧，首先，正如乔纳森所说，不能保证数组将被初始化为`0`. 您可以单独初始化它，也可以使用`int *x = new int[5]();`which 为您进行初始化。

至于你怎么知道哪些是有效的。最简单的方法是存储 struct 而不是`int`s。像这样的东西：

```
struct T {
    T() : valid(false), value(0) {
    }

    bool valid;
    int  value;
};

T *p = new T[5]; // each element will be initialized to false/0 because T has a constructor. 
```

然后你可以这样做：

```
p[0].value = 10;
p[0].valid = true; 
```

等等。

**编辑：** 作为更高级的选项，您可以使用运算符重载来使`valid`标志自动设置，如下所示：

```
struct T {
    T() : valid(false), value(0) {
    }

    T &operator=(int x) {
        valid = true;
        value = x;
        return *this;
    }

    bool valid;
    int  value;
};

T *p = new T[5]; // each element will be initialized to false/0 because T has a 
p[1] = 10;       // p[1] is now true/10 
```

基本上，为元素分配一个整数值，将自动将其标记为有效。尽管在这个特定示例中，我没有演示如何将值“取消设置”回“无效”。这对于您的用例或编码风格可能有意义，也可能没有意义，只是一些值得深思的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T01:55:30.547

如果它是动态分配的，它不会为你归零；您必须通过将所有条目设置为某个默认值来自己初始化数组。如果零是有效条目，则考虑使用负一。如果所有正值和负值都是有效条目，则考虑使用包含整数值和初始化为 false 的布尔标志的结构。

在 C 中，这将是：

```
typedef struct {
    bool valid;
    int  value;
} node;

node x[] = new node[5]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T01:58:41.603

如果您不能牺牲一个值，例如最小的负数或最大的正数`int`，来表示“未设置”，您需要跟踪旁边设置的内容。在 C++ 中，您可以使用`std::vector<bool>`：

```
int *x  = new int[5];
std::vector<bool> isSet(5, false);
if (!isSet[3]) {
    x[3] = 123;
    isSet[3] = true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-23T02:23:21.633

由于正确管理资源涉及许多复杂性，我不会为这项工作使用动态数组。在我看来，你应该看一下`std::vector`，这会使你的代码变成这样的东西：

```
#include <vector>

...

    std::vector<int> x();
    x.resize(5); 
```

现在，这将使您不再担心资源管理是个婊子，而是专注于真正重要的事情（即处理您的 Xses）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-23T02:11:56.223

如果您要使用的它们的值将是密集/连续的，请使用`std::vector`（其`size()`成员会告诉您当前有效的项目数）。如果值稀疏，请`std::set`改用。

无论哪种方式，你最好忘记它的`new T[size]`存在，更不用说让自己陷入实际使用它的疯狂。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-23T02:32:47.697

> 但是，问题是当我用值填充它时，我实际上可能会输入 0。因此，这会导致我们混淆什么告诉我们该值是否真的存在

关于“0”是否真的存在，没有任何混淆。如果数组中有一个 0 你没有放在那里，它仍然存在。恰好在数组中的零和您放在那里的零之间没有区别。如果您需要区分已分配值的元素与未初始化的元素，则必须在其他地方跟踪该信息。

```
bool *b = new bool[5](); // initialize the array to all false
int *x = new int[5]; // don't initialize the array
x[3] = 0; // set the fourth element in the array to 0
b[3] = true; // record that the fourth element in the array has been set 
```

（注意，[你不应该使用原始数组](https://stackoverflow.com/a/10264383/365496)，也不应该使用 new/delete）

* * *

> ```
> int *x = new int[5]; 
> ```
> 
> 好的，所以我认为默认情况下 x 的每个值都是 0。

不是您构建该数组的方式；数组中没有一个`int`s 被初始化。它们可能有任何价值。通常，当您在“调试”模式下构建时，内存会自动为您初始化为零，但这不是 C++ 指定的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-23T04:42:19.317

除了我的其他答案之外，**如果您认为有效索引将是 sparse**，另一种方法是`std::map`用作关联数组，如下所示：

```
std::map<int, int> x;
x[0] = 10;
x[2] = 123;
// indexes 0 and 2 are set, the rest do not exist. 
```

要测试是否预设了值，只需执行以下操作：

```
if(x.find(n) != x.end()) {
    // there is a value at index n
} else {
    // no value found at index n
} 
```

如果您的有效索引是连续的，您也可以使用`std::vector`，或者我的原始答案。

# javascript - 如何使用存储在 Rails 序列化字段中的数据

> ID：10273895
> 
> 赞同：0
> 
> 时间：2012-04-23T01:51:53.840
> 
> 标签：javascript, jquery, ruby-on-rails, ruby-on-rails-3

我在我的 user.rb 文件中将 User.guided 字段设置为序列化：

```
serialize :guided 
```

在数据库中，值的存储方式如下：

```
--- "{\"step1\"=>\"true\", \"step2\"=>\"false\"}" 
```

因此，在我的 Rails 视图中，我将值输出到 JS，如下所示：

```
<script>
var guided = <%= current_user.guided.to_json.html_safe %>;
</script> 
```

然后在 js 控制台中，引导输出：

```
"{"step1"=>"true", "step2"=>"false"}" 
```

问题是我无法访问各个值？你是怎样做的？

作为`guided.step1`错误`undefined`

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T01:55:54.290

`to_json`返回一个 JSON 字符串。您应该在客户端解析该字符串以获取实际对象。

例如：

```
var guided = JSON.parse(<%= current_user.guided.to_json.html_safe %>); 
```

此外，您的代码不会返回实际的 JSON 字符串，而是返回带有 ruby​​ 哈希语法的字符串。那里可能发生的事情比你向我们展示的要多。此代码有效：

```
obj = {"step1"=>"true", "step2"=>"false"}
obj # => {"step1"=>"true", "step2"=>"false"}
obj.to_json # => "{\"step1\":\"true\",\"step2\":\"false\"}" 
```

# actionscript-3 - As3 触摸事件相互影响

> ID：10273899
> 
> 赞同：0
> 
> 时间：2012-04-23T01:52:28.400
> 
> 标签：actionscript-3, actionscript, action, touch-event

我有一个方向和一个冲刺按钮。我想要发生的是：按住冲刺按钮时，玩家的移动速度是原来的两倍。然后当释放冲刺按钮时，玩家应该继续以正常速度行走。发生的情况是当释放冲刺按钮时，即使方向按钮仍被按住，玩家也会停止。

```
public function addControllerListeners(){
        controller.leftButton.addEventListener(TouchEvent.TOUCH_ROLL_OVER, moveCharLeft);
        controller.leftButton.addEventListener(TouchEvent.TOUCH_BEGIN, moveCharLeft);
        controller.leftButton.addEventListener(TouchEvent.TOUCH_END, playerStop);
        controller.leftButton.addEventListener(TouchEvent.TOUCH_OUT, playerStop);
        controller.leftButton.addEventListener(TouchEvent.TOUCH_ROLL_OUT, playerStop);

        sprintButton.addEventListener(TouchEvent.TOUCH_ROLL_OVER, playerSprint);
        sprintButton.addEventListener(TouchEvent.TOUCH_BEGIN, playerSprint);
        sprintButton.addEventListener(TouchEvent.TOUCH_END, playerStopSprint);
        sprintButton.addEventListener(TouchEvent.TOUCH_OUT, playerStopSprint);
        sprintButton.addEventListener(TouchEvent.TOUCH_ROLL_OUT, playerStopSprint);
}

public function playerSprint(e:Event = null) {
        playerChar.sprint = true;
        trace("Player Sprint");
}
public function playerStopSprint(e:Event = null) {
        playerChar.sprint = false;
        trace("stopSprinting");
}
public function moveCharLeft(event:TouchEvent):void{
        playerChar.setWalk("left");
}
public function playerStop(event:TouchEvent):void {
        var target:String = event.target.name;
        if(target == "upButton" || target == "rightButton" || target == "downButton" || target == "leftButton"){
            trace("Player Stopped from: " + event.target.name + " - " + event.currentTarget.name);
            playerChar.direction = "idle";
        }
    } 
```

停止播放器功能中的跟踪表明目标名称是按住的控制器按钮。即使被释放的按钮是冲刺按钮。

如果它有助于在舞台上添加按钮。我不认为这应该有所作为，但你永远不知道。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T03:55:07.873

事件（触摸）不是持久的。当一个事件触发时，它就完成了，您必须轮询下一个触发事件。自动重复是操作系统的一项功能，并且（通常）会被另一个类似事件打断（我认为第二次触摸将停止第一次）。

使用一个标志来指示是否满足某个条件。您必须手动打开和关闭此布尔值，但它能够跟踪您需要知道的内容。（在此 SO 评论中可以找到类似的示例：[https](https://stackoverflow.com/a/7976038/516537) ://stackoverflow.com/a/7976038/516537 。这恰好适用于可以重复并与其他键盘事件共存的键盘事件，但您可以请参阅标志的使用。）因此，请收听您的事件，但也要：

1.  当条件变为活动状态时标记。
2.  当条件变为非活动状态时标记关闭。
3.  检查多个标志是否打开以激活复杂条件。

您获得的是事件的持久性。如果`TOUCH_BEGIN`触发（或其他开始）事件，但没有触发`TOUCH_END`（或其他结束）事件，则标志将是您知道触摸事件仍然存在的方式。

**所有这一切的警告**是，您将不得不以稍微不同的方式轮询事件。您必须添加一个`Event.ENTER_FRAME`事件侦听器以继续检查哪些事件仍然处于活动状态。

HTH。

# c - C中具有一般和特定属性的项目列表的适当数据结构

> ID：10273904
> 
> 赞同：1
> 
> 时间：2012-04-23T01:53:08.887
> 
> 标签：c, data-structures, dataset

我正在制作一个多人文本游戏，游戏中的每个玩家都被分配了一个库存。物品栏是一个简单的线性链表，包含物品的 ID 和物品在游戏中的状态。例如，玩家 1 可能有一辆带有 50% 燃料的红色汽车，它会在列表中表示为 (5, 50)，其中 5 是游戏中红色汽车的 ID，50 是该特定汽车的燃料量车。

但这意味着游戏中每个项目的信息都应该保存在某种数据结构中。

我想过使用类似的东西

```
enum itemtype {car, gun, bullet, etc};
struct itemlist {
    itemtype type;
    char* name;
    int volume, weight;
} itemlist[]; 
```

红色汽车的所有信息`(car, "Red car", 15m^3, 2000kg)`都将存储在 中`itemlist[5]`，因为红色汽车的 ID 是 5。

但是这个游戏中有不同类型的物品，所以每个物品都有自己的属性。汽车会有`(max_speed, acceleration)`，子弹也会有`(mass, velocity, kinetic_energy)`。并且代码的某些部分需要访问这些特定属性才能在游戏中进行操作。

所以这意味着

*   从库存中获取 ID
*   检查数组以获取此类项目的特定属性
*   用检索到的属性做事

但我不知道该怎么做，因为有不同类别的项目，每个项目都有不同的特定属性。

将数组添加到结构不会有帮助，因为属性可以是任何东西，例如字符串或数字。添加嵌套结构可能很好，但可能会尝试使用某些东西，`item[5].properties.max_speed`我不确定这是否安全，因为有人可能会尝试`max_speed`从没有它的项目中获取该属性。

那么，为此类项目列表存储一般和特定属性的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T01:56:14.013

呃，也许我在这里遗漏了一些东西，但这不*正是*它的`union`目的吗？

使列表中的每个项目成为联合数据类型，如下所示：

```
struct itemelem {
    itemtype type;
    union {
        cartype c;
        bullettype b;
    };
}; 
```

在这种情况下，您将使用`type`来识别元素类型是*什么*，这样您就可以访问正确的联合说明符，有点像穷人的多态性:-)

# php - 如果我只是在我的网站上显示新闻，我如何评价我的新闻（如 5 星）？

> ID：10273909
> 
> 赞同：0
> 
> 时间：2012-04-23T01:53:40.867
> 
> 标签：php, sql, database-design, rss, rating-system

我只是显示一个新闻提要，我的问题是我想允许用户对项目进行评分。我读到我需要将它们存储在数据库中如果我想对其进行排名，但是如何？这是我的代码：

```
$data = file_get_contents('https://news.google.com.mx/news/feeds?hl=es&gl=us&q='.tennis.'&um=1&ie=UTF-8&output=rss');

$xml = new SimpleXMLElement($data);
$channel = array();
$channel['title']       = $xml->channel->title;

foreach ($xml->channel->item as $item)
{
    echo $article['pubDate'] = $item->pubDate;
    echo $article['description'] = (string) trim($item->description);
} 
```

有人可以给出如何做到这一点的想法吗？我想我应该阅读然后插入数据库，然后我不知道。我需要为排名设计表格。有什么好的教程吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T02:20:15.260

根据您的描述，我想说涉及 3 个实体：新闻报道、评级本身以及进行评级的用户。

1.  你需要一张桌子来放新闻报道。您将必须弄清楚如何识别每个故事（可能通过其 URL 或其他方式）。您还需要一种机制来将来自提要的新故事插入到您的数据库中，同时避免重复。（原因是，将新闻提要的整个 URL 存储在系统中进行评级并不是一个好主意，因为这会占用不必要的空间并减慢您的查询速度。）

2.  供用户使用的表。您将需要某种身份验证机制，以便知道谁在投票。您还需要编写查询来验证没有一个用户可以对同一篇文章进行多次投票。

3.  最后是收视率表。这将使用外键引用引用上面的**用户**和**故事**表，并将包括一个用于评级的数字列。

我认为以上对于您的应用程序来说是一个很好的数据库设计......

# ios - 注销时重置情节提要

> ID：10273910
> 
> 赞同：20
> 
> 时间：2012-04-23T01:53:45.830
> 
> 标签：ios, uiviewcontroller, xib, nib

我正在构建一个使用情节提要的 IOS 5.1 Web 客户端应用程序。我的操作之一是“注销”，在此期间我想将我的根视图重置为由情节提要的根视图创建的初始视图。（当你登录时，一些视图项会根据你的身份被删除或添加；当你注销时，我想将它们重置为我在故事板中指定的默认值。）

我意识到我可以以编程方式重置/重新添加所有元素，但是故事板有什么用呢？我认为必须有一种方法可以通过重新加载视图文件来恢复原状，对吗？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-09-10T04:39:47.867

我发现以下方法对我有用。请注意，我使用 ARC，但不确定这是否对解决方案有很大影响。首先，在应用程序委托类中，`application:didFinishLaunchingWithOptions:`我使用以下代码行捕获初始 Storyboard 实例：

```
_initalStoryboard = self.window.rootViewController.storyboard; 
```

（显然有一个实例变量`UIStoryboard* _initalStoryboard;`）

然后我在我的应用程序委托中定义了以下函数：

```
- (void)resetWindowToInitialView
{
    for (UIView* view in self.window.subviews)
    {
        [view removeFromSuperview];
    }

    UIViewController* initialScene = [_initalStoryboard instantiateInitialViewController];
    self.window.rootViewController = initialScene;
} 
```

请注意 for in 循环从`window`. UIWindow rootViewController 文档指出：

> 如果窗口具有现有的视图层次结构，则在安装新视图之前删除旧视图。

但是我没有发现这种情况......所以我在分配一个新的 rootViewController 之前明确地删除了现有的视图。使用这种方法，我没有发现任何令人担忧的副作用或内存泄漏。我绝不是 UIKit 魔法方面的专家，所以如果你打算自己使用它，我建议你测试并重新测试这个解决方案。干杯

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-23T18:49:25.640

如果您使用基于 NavController 的结构，以下内容对我很有用：

```
UIWindow *window = [[UIApplication sharedApplication].windows firstObject];
UINavigationController *navController = (UINavigationController *)window.rootViewController;
UIViewController *vc = [navController.storyboard instantiateViewControllerWithIdentifier:@"Login"];
navController.viewControllers = @[vc]; 
```

您必须将 Storyboard ID“登录”分配给您的登录 VC，才能使其正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-24T10:06:18.170

如果我使用`UISplitViewController`基于 - 的结构（在 iOS 8+ 上测试），则以下内容对我有用：

从 Projects **General** -> **Deployment Info**中删除 Storyboard ，因此下拉列表如下所示，您必须在代码中配置 Storyboard。

[![部署信息空主界面](../Images/2c730a80f141d8dc47a38ebbd73778c4.png)](https://i.stack.imgur.com/ZPfuD.png)

在某处`AppDelegate.m`

```
- (void)setupViewControllers
{
    // check for thread, as this method might be called by other (e.g. logout) logic
    if ([NSThread currentThread] != [NSThread mainThread]) {
        dispatch_async(dispatch_get_main_queue(), ^{
            [self setupViewControllers];
        });
        return;
    }

    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"Main" bundle:[NSBundle mainBundle]];
    UIViewController *vc =[storyboard instantiateInitialViewController];
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    self.window.rootViewController = vc;

    // configure split vc 
    // Note: I reference split vc for my own purpose, but it is your mater of choice
    self.splitViewController = (UISplitViewController *)self.window.rootViewController;
    self.splitViewController.delegate = self;
    self.splitViewController.preferredDisplayMode = UISplitViewControllerDisplayModeAllVisible;
    self.splitViewController.preferredPrimaryColumnWidthFraction = 0.5;

    [self.window makeKeyAndVisible];
} 
```

为避免代码重复，请`application:didFinishLaunchingWithOptions:`在首次设置时调用此函数

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
    // some code...
    [self setupViewControllers];
    // Optional: add splash view (e.g. [self addSplashView];)
    // some code...
} 
```

在视图控制器中，您已准备好向用户展示 UI，删除启动视图。例如（在 Swift 中）：

```
override func viewDidAppear(animated: Bool) {
    super.viewDidAppear(animated)

    if !AppSession.currentSession().isLoggedIn() {
        presentLoginViewController(false, completion: { ()->Void in
            self.removeSplash()
        })
    }
    else {
       removeSplash()
    }

    // some code...
}

private func removeSplash() {
    if let appDelegate = UIApplication.sharedApplication().delegate as? AppDelegate {
        appDelegate.removeSplashView()
    }
} 
```

# sql - SQL SLEEP_BPOOL_FLUSH 等待。无法重新初始化合并推送订阅

> ID：10273917
> 
> 赞同：0
> 
> 时间：2012-04-23T01:54:24.910
> 
> 标签：sql, sql-server-2008, replication, merge-replication, database-administration

我正在尝试初始化合并订阅，但它失败并给出查询超时已过期的错误。

```
The merge process failed to execute a query because the query timed out. If this failure continues, increase the query timeout for the process. When troubleshooting, restart the synchronization with verbose history logging and specify an output file to which to write. 
```

当我检查 SQL 活动监视器时，它显示`sys.sp_MSCleanupForPullReinit`命令处于`SUSPENDED`模式并且具有等待类型`SLEEP_BPOOL_FLUSH`

我试图停止并启动复制代理，但仍然遇到同样的问题。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T02:33:37.137

这可能是应用快照时的正常行为，通常在快照应用进程的索引创建阶段遇到。索引创建语句可能很耗时并导致代理超时。尝试将 Merge Agent **-QueryTimeout**值提高到**900**秒，看看是否有帮助。

# c++ - 多功能

> ID：10273921
> 
> 赞同：0
> 
> 时间：2012-04-23T01:55:13.693
> 
> 标签：c++, function

@ sarnold 好的，这是我的更新，尝试按照您给我的指南进行操作每个函数的 int 希望这是正确的举动。

```
#include <iostream>
#include <cmath>
#include <stdio.h>
#include <string>

using namespace std;

void function1()
{
    //Enter Variables
    int number;
    cout << "Enter Variable a: ";
    cin >> number;
    int a = number;

    cout << "Enter Variable b: ";
    cin >> number;
    int b = number;
    cout << "Enter Variable c: ";
    cin >> number;
    int c = number;
    if (a > b && a > c);
    return a;
    cout << "This is your highest number(" << a << ")";
    if (b > a && b > c);
    return b;
    cout << "This is your highest number(" << b << ")";
    if (c > a && c > B);
    return c;
    cout << "This is your highest number(" << c << ")";

}

void function2()
{
    // Prompt User for Integer

    int number;
    cout << "Enter integer 1: ";
    cin >> number;
    int a = number;

    cout << "Enter integer 2: ";
    cin >> number;
    int b = number;

    if (a != B)
        cout << "Continue";

    else
        cout << "Number 1 or 2 is the same!";

    cout << "Enter integer 3: ";
    cin >> number;
    int c = number;

    if ((a != B) != c)
        cout << "Continue";
    else
        cout << "Number 3 is the same as number 1 or 2!";
    cout << "Enter integer 4: ";
    cin >> number;
    int d = number;

    if (((a != B) != c) != d)
        cout << "numbers are all different";
    else
        cout << "Number 3 is the same as number 1, 2, or 3!";
    cout << "Thank you enter another number?\n\n";
    cin >> number;
    return 0;
}

std::string numerals = "VXLCDM";
void function3()
{
    char roman_Numeral;
    int arabic_Numeral = 0;
    cout << "Enter the Roman Numeral in Capital letters (e.g. CCXIX) : ";
    while(cin.get(roman_Numeral))
    {
        if(roman_Numeral == 'M')
            arabic_Numeral = arabic_Numeral + 1000;
        else if(roman_Numeral == 'D')
        {
            roman_Numeral = cin.peek();
            if(numerals.find(roman_Numeral, 5) != std::string::npos)
            {
                arabic_Numeral = arabic_Numeral - 500;
                continue;
            }
            else
            {
                arabic_Numeral = arabic_Numeral + 500;
                continue;
            }
        }
        else if(roman_Numeral == 'C')
        {
            roman_Numeral = cin.peek();
            if(numerals.find(roman_Numeral, 4) != std::string::npos)
            {
                arabic_Numeral = arabic_Numeral - 100;
                continue;
            }
            else
            {
                arabic_Numeral = arabic_Numeral + 100;
                continue;
            }
        }
        else if(roman_Numeral == 'L')
        {
            roman_Numeral = cin.peek();
            if(numerals.find(roman_Numeral, 3) != std::string::npos)
            {
                arabic_Numeral = arabic_Numeral - 50;
                continue;
            }
            else
            {
                arabic_Numeral = arabic_Numeral + 50;
                continue;
            }
        }
        else if(roman_Numeral == 'X')
        {
            roman_Numeral = cin.peek();
            if(numerals.find(roman_Numeral, 2) != std::string::npos)
            {
                arabic_Numeral = arabic_Numeral - 10;
                continue;
            }
            else
            {
                arabic_Numeral = arabic_Numeral + 10;
                continue;
            }
        }
        else if(roman_Numeral == 'V')
        {
            roman_Numeral = cin.peek();
            if(numerals.find(roman_Numeral, 1) != std::string::npos)
            {
                arabic_Numeral = arabic_Numeral - 5;
                continue;
            }
            else
            {
                arabic_Numeral = arabic_Numeral + 5;
                continue;
            }
        }
        else if(roman_Numeral == 'I')
        {
            roman_Numeral = cin.peek();
            if(numerals.find(roman_Numeral) != std::string::npos)
            {
                arabic_Numeral = arabic_Numeral - 1;
                continue;
            }
            else
            {
                arabic_Numeral = arabic_Numeral + 1;
                continue;
            }
        }
        else
            break;
    }
    cout << arabic_Numeral << endl;
    return 0;
}
void input (double &);
void convert (double radius, int & feet, double & total);
void output (int, double, double);
void function4()
{
    double total, radius;
    int feet;
    char yn;
    do
    {
        input (radius);
        convert (radius, feet, total);
        output (feet, total, radius);
        cout << "Enter a Different radius? (y or n)\n";
        cin >> yn;
        cout << "\n\n";
    }
    while (yn == 'y'  || yn == 'Y');
    system("pause");
    return 0;
}
void input(double & radius)
{
    cout << "---------------------------Re Enter Radius-------------------------\n\n";
    cout << "Enter Radius:\n";
    cin >> radius;
    cout << "\n";
}
void convert(double radius, int & feet, double & total)
{
    //=======================================================
    total = 3.14 * radius * radius * radius * 4 / 3;
}
//========================================================
void output(int feet, double total, double radius)
{
    cout << "---------------------------Re Enter Radius-------------------------\n\n";
    cout << "The volume is: " << total << " \n\n";
    cout << "---------------------------   Equation    -------------------------\n\n";
    cout << "The Equation with (" << radius << ") being:\n\n";
    cout << "4/3 * 3.14 * (" << radius << ")^3 = " << total << "\n\n";
    cout << "---------------------------     Again?    -------------------------\n\n";
}
void swap( int &x, int &y )
    int number;

void function5()

{

    cout << "x is ";
    cin >> number;
    int x = number;

    cout << "y is ";
    cin >> number;
    int y = number;
    swap(x, y);
    cout << "Swapped the first number is now(" << x << ")and the second is now (" << y >> ")";

    return 0;
}
int leap (int year);
void function6 (void){
    int month,day,year,dm,dn,leap;

    printf("enter the month:");
    scanf("%d",&month);

    printf("enter the day:");
    scanf("%d",&day);

    printf("enter the year:");
    scanf("%d",&year);

    if (leap==0)
    {   if(month==1)
        dm=0;
        if(month==2)
            dm=31;
        if(month==3)
            dm=59;
        if(month==4)
            dm=90;
        if(month==5)
            dm=120;
        if(month==6)
            dm=151;
        if(month==7)
            dm=181;
        if(month==8)
            dm=212;
        if(month==9)
            dm=243;
        if(month==10)
            dm=273;
        if(month==11)
            dm=304;
        if(month==12)
            dm=334;}

    else
    {    if(month==1)
        dm=0;
        if(month==2)
            dm=31;

        if(month==3)
            dm=60;
        if(month==4)
            dm=91;
        if(month==5)
            dm=121;
        if(month==6)
            dm=152;
        if(month==7)
            dm=182;
        if(month==8)
            dm=213;
        if(month==9)
            dm=244;
        if(month==10)
            dm=274;
        if(month==11)
            dm=304;
        if(month==12)
            dm=335;}

        dn=dm+day;

        printf("the day number is :%d",dn);

        return 0;
}

int leap (int year){
    if((year%100== 0 && year%400==0)||  (year%4==0))

        return 1;
    else
        return 0;}

int main(int argc, char *argv[], int year, int leap, int number, int arabic_Numeral)

{
    function1();
    function2();
    function3();
    function4();
    function5();
    function6();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T02:07:25.380

好吧，你已经`int main()`定义了三次。你需要给每个人一个不同的名字。

此外，您不需要重复`#include`and`using`语句，只需在开始时使用一次。

我建议将您的原型也移到课程的开头，只是为了便于阅读。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-23T04:06:44.953

```
if (a > b && a > c);
return a;
cout << "This is your highest number(" << a << ")"; 
```

These three lines summarize many of the problems in your code:

*   Your `if` conditions are useless:

    ```
    if (foo); 
    ```

    only executes the `foo` test; the semicolon brackets the *end* of the code to execute if the `foo` is true:

    ```
    if (foo)
        /* then code */ ; 
    ```

*   Your `return a` statement prevents execution of the rest of the code, including the `cout` line immediately following.

Some of these little problems would be more immediately obvious if you use a text editor, such as `vim`, that can do syntax-aware indenting for you. The editors aren't always as good as a compiler, but they can help save you some time if you pay attention to how they layout your code.

Furthermore, at least the code-after-`return` should have been reported to you by your compiler. If it didn't, turn up the warnings. (On `gcc`, `-Wall -Wextra` is nice.)

* * *

**Update**

To put each of these into a single file and call them each in turn, you'll need to re-format them slightly. Each program is currently self-contained and almost entirely run from within the `main()` routine. This is fine in toy programs but complicates your efforts to call them all from within a single executable.

Currently, in pseudo-code you've got a few files like this:

prog 1:

```
main() {
    /* ask for input */
    /* run the routine */
    /* maybe call functions */
    /* output results */
    /* quit */
} 
```

prog 2:

```
main() {
    /* ask for input */
    /* run the routine */
    /* maybe call functions */
    /* output results */
    /* quit */
} 
```

You'll need to re-arrange your program like this:

program:

```
void run_routine_one(); /* I think C++ forbids a (void) prototype here */
void run_routine_two();

main() {
    run_routine_one();
    run_routine_two();
    /* quit */
}

void run_routine_one() {
    /* ask for input */
    /* run the routine */
    /* maybe call functions */
    /* output results */
}

void run_routine_two() {
    /* ask for input */
    /* run the routine */
    /* maybe call functions */
    /* output results */
} 
```

You can nearly copy-and-paste things together given this kind of template; in fact, you may wish to do so, though the global variables will complicate matters. (One more reason to discourage global storage without a good reason.)

If you have time before the project is due, I strongly recommend taking a little further step back and refactoring the code significantly -- your routines are currently mixing input, calculation, and output, and code is usually far easier to test and maintain if you split apart the input and output from the calculation. Your input and output would be easier if you provide some *helper* functions. A quick sketch of what this might look like:

```
int prompt_for_int(string)
{
    int ret;
    cout << string;
    cin >> ret;
    return ret;
}

int days_in_month(int month, int year)
{
    int leap = is_leap_year(year);
    /*                   J   F   M   A   M   J   J   A   S   O   N   D */
    int days[2][12] = { {31, 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31},
                        {31, 29, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31}};
    if (month < 0 || month > 11 || year < 1753)
        return -1;

    return days[leap][month];
}

void program_one()
{
    int month, year, days;

    month = prompt_for_int("Enter month, 1 for January, 2 for February...\n");
    month -= 1; /* zero-indexed month */

    year = prompt_for_int("Enter year, not before 1754...\n");

    days = days_in_month(month, year);
    cout << "There are " << days << " in " << month + 1
        << " " << year << nl;
    /* I'm no C++ expert -- perhaps >> nl isn't idiomatic or even functional */
}

int main(int argc, char *argv[])
{
    program_one();
    program_two();
    /* maybe given them better names */
    return 0;
} 
```

I hope you can see the legibility gains from breaking a program into smaller pieces and having each function do as little as possible. You'll probably come across large functions that really do make sense to keep as large functions but try to get into the habit of breaking functions into as small pieces as you can. The smaller the tasks, the more likely you are to find that some fair simple re-writing can lead to far simpler code. (Check out that `days_in_month()` routine -- it uses *arrays* to store the number of days and picks which array to use based on the result of the `is_leap_year()` function. I learned this from [The Elements of Programming Style](http://en.wikipedia.org/wiki/The_Elements_of_Programming_Style) ([page 54](http://books.google.com/books?ei=jzeXT--_OYeYiAKJjuX6Dw&id=-_QmAAAAMAAJ&dq=%22the+elements+of+programming+style%22&q=leap+year#search_anchor)) -- which, despite being written for FORTRAN and PL/1, is still an excellent book. Anyway, that little routine is *very* easy to test with a small program because it doesn't do any input and output itself.)

# php - jQuery 函数仅在再次包含时才有效 - 两次（导致其他冲突）

> ID：10273928
> 
> 赞同：4
> 
> 时间：2012-04-23T01:55:47.297
> 
> 标签：php, jquery, jspinclude

我正在使用这个 jQuery 脚本/函数来**更改我的选择框的设计**：http : [//tutorialzine.com/2010/11/better-select-jquery-css3/](http://tutorialzine.com/2010/11/better-select-jquery-css3/)

它已*实施并正在运行*。我的网站是由一个索引文件构建的，该文件通过**php 包含页面的所有其他部分，包括**：*关于、联系人等*部分。

问题在于，在显示我的样式选择框的单独联系页面（不包括标题，仅正文内容）中，“样式”如果**仅当 jquery 再次直接包含在contact.php文件中时才有效**（已经包含在 index.php 中）。

```
 <script type="text/javascript" src="http://code.jquery.com/jquery-1.5.js"></script> 
```

从contact.php 中删除后，所有选择选项项都**设置为 null**。**如果网站另一部分中的datePicker**没有**停止工作**，这将不是什么大问题，因为我认为这是两次包含 jQuery 的结果。

我尝试了各种解决方案，例如检查它是否真的存在：

```
 if (typeof jQuery == 'undefined') {  
 document.write('<script type="text/javascript" src="http://code.jquery.com/jquery-1.5.js"></script>');
 } 
```

jQuery不是未定义的，它就在那里，你甚至可以在浏览源代码时看到它。**关于为什么会发生这种情况的**任何想法？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-18T03:06:26.360

在我发布这个问题几天后，我解决了我的问题。问题是 jQuery 总共包含了 3 次（因为 php 包含）。这导致了我最初的问题。当我删除了我认为是第二个和不必要的 jquery 时，仍然有一个太多。因此，在处理类似错误时请考虑这一点，您可能包含它的次数比您意识到的要多得多，一种解决方案是真正确保只有一个 jquery 包含在运行。祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T07:30:09.603

使用来自谷歌的 jquery 而不是你自己的服务器有时我们的 jquery 库不能正常工作......

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-24T07:32:19.510

你在里面运行你的代码吗

```
$(function() {
    // Your jQuery code here
}); 
```

需要启动 jQuery，这在页面加载时发生。也许您正在尝试执行一些在 jQuery 准备好之前执行的功能？

**编辑：**
注意到评论中提到的这个建议。

你不使用`<iframe>`contact.php，是吗？**

# css - JQuery UI 选项卡填充可用的垂直空间

> ID：10273929
> 
> 赞同：1
> 
> 时间：2012-04-23T01:55:53.890
> 
> 标签：css, jquery-ui

jsfiddle：http: [//jsfiddle.net/DQGMb/](http://jsfiddle.net/DQGMb/)

我有 JQuery UI 选项卡，我想一直拉伸到屏幕底部，然后在选项卡内滚动。所以文档不会滚动，只是标签。

为了让面板滚动，我`overflow-y:auto`在那个班上。为了让它填满页面，我试过`height:100%`and `margin-bottom:0`，但没有做到。任何指针？

HTML：

```
<p>I want the tab box to fill the rest of the available vertical space.</p>
<p>height:150 is a placeholder.</p>

<div id="tabs">
    <ul>
        <li><a href="#tabs-1">Nunc tincidunt</a></li>
        <li><a href="#tabs-2">Proin dolor</a></li>
    </ul>
    <div id="tabs-1">
        <p>Proin elit arcu, rutrum commodo, vehicula tempus, commodo a, risus. Curabitur nec arcu. Donec sollicitudin mi sit amet mauris. Nam elementum quam ullamcorper ante. Etiam aliquet massa et lorem. Mauris dapibus lacus auctor risus. Aenean tempor ullamcorper leo. Vivamus sed magna quis ligula eleifend adipiscing. Duis orci. Aliquam sodales tortor vitae ipsum. Aliquam nulla. Duis aliquam molestie erat. Ut et mauris vel pede varius sollicitudin. Sed ut dolor nec orci tincidunt interdum. Phasellus ipsum. Nunc tristique tempus lectus.</p>
    </div>
    <div id="tabs-2">
        <p>Morbi tincidunt, dui sit amet facilisis feugiat, odio metus gravida ante, ut pharetra massa metus id nunc. Duis scelerisque molestie turpis. Sed fringilla, massa eget luctus malesuada, metus eros molestie lectus, ut tempus eros massa ut dolor. Aenean aliquet fringilla sem. Suspendisse sed ligula in ligula suscipit aliquam. Praesent in eros vestibulum mi adipiscing adipiscing. Morbi facilisis. Curabitur ornare consequat nunc. Aenean vel metus. Ut posuere viverra nulla. Aliquam erat volutpat. Pellentesque convallis. Maecenas feugiat, tellus pellentesque pretium posuere, felis lorem euismod felis, eu ornare leo nisi vel felis. Mauris consectetur tortor et purus.</p>
    </div>
</div> 
```

​ JS：

```
$(function() {
    $( "#tabs" ).tabs();
});​ 
```

CSS：

```
.ui-tabs-panel {
    height: 150px;
    overflow-y: auto;
}​ 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T02:25:00.927

您可以使用绝对定位...但这可能会变得草率，具体取决于页面上的其他内容。包含的元素也必须是 100%。

```
html body { height: 100% }

.ui-tabs {
    position: absolute;
    top: 100px;
    bottom: 0px;   
}

.ui-tabs-panel {
    height: 100%;
    overflow-y: auto;
}​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T02:06:30.853

将您的 CSS 更改为：

```
.ui-tabs-panel {
    height: auto;
    overflow-y: auto;
} 
```

[http://jsfiddle.net/DQGMb/6/](http://jsfiddle.net/DQGMb/6/)

# xml - 来自xml的中文文本编码错误

> ID：10273931
> 
> 赞同：0
> 
> 时间：2012-04-23T01:55:54.327
> 
> 标签：xml, vb.net, visual-studio-2010, character-encoding

我正在创建包含中文帖子的 xml 文件，它似乎可以正常工作，但我开始收到错误消息：

此页面包含以下错误：

第 25 列第 4165 行的错误：输入不正确的 UTF-8，指示编码！字节：0x0B 0xC3 0xA5 0xC2 下面是页面的渲染，直到第一个错误。

当试图打开一些结果文件时。它引用的行包含中文字符，这仅在某些情况下发生，我的猜测是文本有时包含一些将其丢弃的字符。如何确保该字段的文本始终正确编码？我什至不明白为什么这个问题。

```
 Public Shared xwriter As XmlTextWriter = New XmlTextWriter(xmlfile, Encoding.UTF8) 
```

我确保正确声明了 xmltextwriter。

编辑：

问题是我使用 vb.net 并且显然它将所有内容编码为 utf-16，所以我认为这很好。问题是我收到的文本可能是双重编码或编码错误，我需要在使用前对其进行清理；这样我的 xml 是有效的。

编辑：

所以如果我需要修复我的数据，我的问题是如何检测用于特定文本的编码以及如何转换为可以在 xml 文件中查看的 utf8 格式并使文件有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T15:59:36.993

发现源是 AnSI 格式，所以我只需要删除我正在做的所有转换，现在看起来很好。

# java - 简单的 Spring MVC+安全设置

> ID：10273932
> 
> 赞同：0
> 
> 时间：2012-04-23T01:55:57.927
> 
> 标签：java, spring, spring-mvc, spring-security

我正在尝试设置一个简单的 spring mvc / spring security webapp，但我似乎找不到实现此目的的方法：

1.  我想使用普通的 @Secured 注释，如果用户没有登录，我希望他们被重定向到登录页面，然后回到他们所在的位置（这是我管理的正常行为去完成）
2.  我希望登录表单成为我自己的控制器/模板对（也很常见且已完成）。
3.  我希望将上面的登录表单提交给我自己的控制器，该控制器将针对我的后端 RESTful 服务验证用户凭据。然后它从服务接收一个安全令牌。此时，我想手动将会话标记为经过身份验证的身份验证并将令牌附加到它。

我如何着手实施最后一个阶段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T09:13:13.873

我不确定我是否完全理解您的问题，但如果我理解正确，您可以扩展 AbstractPreAuthenticatedProcessingFilter 并通过调用您的 restful 服务/控制器等覆盖 getPreAuthenticatedPrincipal 和 getPreAuthenticatedCredentials。覆盖 AuthenticationUserDetailsS​​ervice 并提供一个简单的服务，并添加您的安全上下文，如下所示：

```
<beans:bean id="preauthAuthProvider"
            class="org.springframework.security.web.authentication.preauth.PreAuthenticatedAuthenticationProvider">
    <beans:property name="preAuthenticatedUserDetailsService">
        <beans:bean class="com.YourCompany.YourPreAuthenticatedGrantedAuthoritiesUserDetailsService"></beans:bean>
    </beans:property>
    <beans:property name="order" value="1"/>
</beans:bean>

<authentication-manager alias="authenticationManager" >
    <authentication-provider ref="preauthAuthProvider" ></authentication-provider>
</authentication-manager> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T23:40:47.160

好的答案基本上是：

```
SecurityContextHolder.getContext().setAuthentication(...) 
```

然而，为了能够在我上面描述的 Spring MVC 控制器控制身份验证过程的场景中使用它，还需要做一些其他的事情：

1.  您必须使用一种可用的身份验证 Impls 或创建一个。我发现最好继承 AbstractAuthenticationToken。
2.  如果没有在这种情况下未使用的身份验证管理器，Spring 安全性将无法启动，因此我创建了一个空身份验证管理器：

    ```
    @Service("nullAuthenticationProvider")
    public class NullAuthenticationProvider implements AuthenticationProvider
    {
        @Override
        public Authentication authenticate(Authentication authentication) throws AuthenticationException
        {
            return authentication;
        }

        @Override
        public boolean supports(Class<?> authentication)
        {
            return true;
        }
    } 
    ```

3.  最后是spring context.xml：

    ```
    <security:global-method-security secured-annotations="enabled" />

    <security:http disable-url-rewriting="true">
        <security:access-denied-handler error-page="/login" />
        <security:form-login login-page="/login" />
    </security:http>

    <security:authentication-manager>
        <security:authentication-provider ref='nullAuthenticationProvider'/>
    </security:authentication-manager> 
    ```

# c# - 在 C# 中使用 Access 数据库？

> ID：10273940
> 
> 赞同：5
> 
> 时间：2012-04-23T01:56:56.713
> 
> 标签：c#, ms-access, ado.net

我将如何`.accdb`在 C#（控制台应用程序，而不是 web asp.net）中使用 Microsoft Access () 数据库？根据我的阅读，我需要使用`ADO.NET`，但我真的不知道如何在 C# 控制台应用程序中执行此操作。在 PHP with 中`MySQL`，我正在寻找`mysqli_construct`能帮助我的教程或文档吗？我正在尝试将它用作存储和访问我的**非 Web、非 ASP.NET**应用程序的数据的一种方式，如果这有任何改变的话。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-23T02:02:56.177

请参阅此[演练，了解使用 ADO.NET 编辑 Access 数据库](http://msdn.microsoft.com/en-us/library/ms971485.aspx)。

现在，虽然该示例使用的是 Web 应用程序，但不用担心，所使用的类仍然适用于控制台应用程序。

您需要使用的主要类是：

*   [OleDbConnection](http://msdn.microsoft.com/en-us/library/588b9ffa.aspx)
*   [OleDbCommand](http://msdn.microsoft.com/en-us/library/h37f2yxh.aspx)
*   [OleDbDataReader](http://msdn.microsoft.com/en-us/library/stkwe6zb.aspx)

以上类的文档都有作为控制台应用程序示例的代码示例。

下面是在控制台应用程序中使用的代码片段（记得添加：`using System.Data.OleDb;`

```
string connectionString = 
    @"Provider=Microsoft.Jet.OLEDB.4.0;" +
    @"Data Source=C:\path\to\your\database.mdb;" +
    @"User Id=;Password=;";

string queryString = "SELECT Foo FROM Bar";

using (OleDbConnection connection = new OleDbConnection(connectionString))
using (OleDbCommand command = new OleDbCommand(queryString, connection))
{
    try
    {
        connection.Open();
        OleDbDataReader reader = command.ExecuteReader();

        while (reader.Read())
        {
            Console.WriteLine(reader[0].ToString());
        }
        reader.Close();
    }
    catch (Exception ex)
    {
        Console.WriteLine(ex.Message);
    }
} 
```

另外，刚刚注意到您明确地说了一个 .accdb 数据库。为此，请使用[Microsoft Access Database Engine 2010 Redistributable](http://www.microsoft.com/download/en/details.aspx?id=13255)。然后需要将连接字符串中的提供者更改为：（`Microsoft.ACE.OLEDB.12.0`有关更多信息，请参阅该链接中的注释）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-23T02:12:22.520

只需使用`System.OleDb`. 这是我使用的一个小班

首先，**将数据库文件放在 App_Data 中**

**网络配置**

```
<connectionStrings>
    <add name="MyConnectionString" connectionString="Provider=Microsoft.Jet.OLEDB.4.0;Data Source=|DataDirectory|\DatabaseName.accdb" providerName="System.Data.OleDb"/>
</connectionStrings> 
```

**App_Code/DataAccess.cs**

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.OleDb;

public class DataAccess
{

    #region "Public Methods"

    public static DataTable GetTableFromQuery(string query, Dictionary<string, object> parameters, CommandType commandType)
    {
        DataTable dataTable = new DataTable();
        using (OleDbConnection conn = GetConnection()) {
            using (OleDbCommand cmd = new OleDbCommand(query, conn)) {
                cmd.CommandType = commandType;
                if (parameters != null) {
                    foreach (KeyValuePair<string, object> parameter in parameters) {
                        cmd.Parameters.AddWithValue(parameter.Key, parameter.Value);
                    }
                }
                using (OleDbDataAdapter adapter = new OleDbDataAdapter(cmd)) {
                    adapter.Fill(dataTable);
                }
            }
        }
        return dataTable;
    }

    public static object GetSingleObjectFromQuery(string query, Dictionary<string, object> parameters, CommandType commandType)
    {
        object value = null;
        using (OleDbConnection conn = GetConnection()) {
            using (OleDbCommand cmd = new OleDbCommand(query, conn)) {
                cmd.CommandType = commandType;
                if (parameters != null) {
                    foreach (KeyValuePair<string, object> parameter in parameters) {
                        cmd.Parameters.AddWithValue(parameter.Key, parameter.Value);
                    }
                }
                conn.Open();
                using (OleDbDataReader reader = cmd.ExecuteReader()) {
                    while (reader.Read()) {
                        value = reader.GetValue(0);
                    }
                }
            }
        }
        return value;
    }

    public static int ExecuteNonQuery(string query, Dictionary<string, object> parameters, CommandType commandType)
    {
        int value = 1;
        using (OleDbConnection conn = GetConnection()) {
            using (OleDbCommand cmd = new OleDbCommand(query, conn)) {
                cmd.CommandType = commandType;
                if (parameters != null) {
                    foreach (KeyValuePair<string, object> parameter in parameters) {
                        cmd.Parameters.AddWithValue(parameter.Key, parameter.Value);
                    }
                }
                cmd.Connection.Open();
                value = cmd.ExecuteNonQuery();
            }
        }
        return value;
    }

    #endregion

    #region "Private Methods"

    private static OleDbConnection GetConnection()
    {
        string ConnectionString = System.Configuration.ConfigurationManager.ConnectionStrings("MyConnectionString").ConnectionString;
        return new OleDbConnection(ConnectionString);
    }

    #endregion

} 
```

* * *

现在从页面调用它

```
var myTable = DataAccess.GetTableFromQuery("SELECT * FROM TableName", null, CommandType.Text); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-23T02:02:47.050

看看[OLEDB 命名空间，](http://msdn.microsoft.com/en-us/library/system.data.oledb%28v=vs.100%29.aspx)[这里](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbcommand.aspx)和[这里](http://www.codeproject.com/Articles/1449/OLE-DB-First-steps)有一些简单的例子。

# php - 类中的变量 - 正确的方法

> ID：10273942
> 
> 赞同：0
> 
> 时间：2012-04-23T01:57:05.060
> 
> 标签：php, oop

此代码将输出相同的内容。我的问题是，这样做的正确方法是什么。第一种方法还是第二种方法？或者有什么更好的方法吗？我看不出一个班级比另一个班级有任何优势。

```
<?php
    class Client{
        var $id;
        var $email;

        function __construct($id){
            $this->id=$id;
        }

        public function get_email($db){
            $sql = $db -> prepare(" SELECT email FROM users  WHERE id = ? ");

            $sql -> bind_param('i', $this->id);
            $sql->execute();

            $sql->bind_result($email);

            if ($sql -> fetch()) {
                return $this->email=$email;
            }
            else
            return false;
        }
    }

    class Client_{
        public function get_email($db, $id){
            $sql = $db -> prepare(" SELECT email FROM users  WHERE id = ?");

            $sql -> bind_param('i', $id);
            $sql->execute();

            $sql->bind_result($email);

            if ($sql -> fetch()) {
                return $email;
            }
            else
            return false;
        }
    }
    ?> 
```

**索引.php**

```
<?php
$Client = new Client(1);
$a = $Client -> get_email($db);

print_r($a);

$Client_ = new Client_();
$b = $Client_ -> get_email($db, 1);

print_r($b);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T02:05:54.253

在第二种方法中，实例化类是没有意义的，因为没有任何东西要存储以备将来使用。因此，如果不同的数据存储在其他地方，最好使用“静态类”：

```
class Client_{
    static public function get_email($db, $id){
        $sql = $db -> prepare(" SELECT email FROM users  WHERE id = ?");

        $sql -> bind_param('i', $id);
        $sql->execute();

        $sql->bind_result($email);

        if ($sql -> fetch()) {
            return $email;
        }
        else
        return false;
    }
}

// And use it static way without instantiating first:
Client_::get_email( $arg1, $arg2 ); 
```

如果我要在这两者之间做出决定，我会选择第一个。

我不知道你将如何使用这些类中的任何一个，但对我来说，从外部存储`$db`和供应并本地化更有意义： `$id``$email`

```
class Client{
    var $db;

    function __construct($db){
        $this->db=$db;
    }

    public function get_email($id){
        $sql = $this->db -> prepare(" SELECT email FROM users  WHERE id = ? ");

        $sql -> bind_param('i', $id);
        $sql->execute();

        $sql->bind_result($email);

        if ($sql -> fetch()) {
            return $email;
        }
        else
        return false;
    }
} 
```

也改变了这一行：`return $this->email=$email;`，也许我弄错了，但我认为这没有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T02:02:38.940

我想说第一个在这种情况下更“正确”，因为类名表明该类是数据库表的模型，这意味着对表的大部分或所有更改都应该通过该类进行抽象。通常模型类的实例化将代表数据库表的一行，因此 id 是类的成员是有意义的。

我还将通过构造函数将数据库连接传递给模型，或者以某种方式使其全局可用。

^ 只是我的 2 美分

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-25T07:06:16.867

请停止使用`var`在 php.ini 中定义类变量。它不再是 4.x。现在哪里有`public`和。`private``protected`

也就是说，`Client`需要连接和标识符的实例：

```
class Client
{
    protected $connection;
    protected $id;
    protected $email = null;

    public function __construct($connection, $id)
    {
        $this->connection = $connection;
        $this->id = $id
    }

    public function getEmail()
    {
        if ( $this->email === null )
        {
            $query = 'SELECT email FROM users WHERE id = ?';
            $statement = $this->connection->prepare( $query );
            $statement->bind_param('i', $this->id);
            if ( $statement->execute() )
            {
                 $statement->bind_result($this->email);
            }
        }
        return $this->email;
    }

} 
```

PS我实际上更喜欢PDO而不是MySQLi作为连接API。如果不是其他原因，那只是因为它在错误处理方面具有更大的灵活性。

# java - 双精度不能取消引用？

> ID：10273949
> 
> 赞同：15
> 
> 时间：2012-04-23T01:58:06.263
> 
> 标签：java, double

```
String mins = minsField.getText(); 

    int Mins;
    try
    {
        Mins = Integer.parseInt(mins);

     }
     catch (NumberFormatException e)
     {
         Mins = 0;
     }

    double hours = Mins / 60;

    hours.setText(hoursminsfield); 
```

问题是`Double cannot be dereferenced`。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-23T02:25:09.257

# 编辑 2012 年 4 月 23 日

`double cannot be dereferenced`是一些 Java 编译器在您尝试调用原语上的方法时给出的错误。在我看来`double has no such method`会更有帮助，但我知道什么。

从您的代码中，您似乎认为可以通过 hours.setText(hoursminfield);`hours`复制一个文本表示。`hoursminfield`这有一些错误：1）小时是`double`一个原始类型，没有可以调用的方法。这就是给您所询问的错误的原因。2）您没有说 hoursminfield 是什么类型，也许您甚至还没有声明它。3）通过将变量作为方法的参数来设置变量的值是不寻常的。它有时会发生，但通常不会。

执行您似乎想要的代码行是：

```
String hoursrminfield; // you better declare any variable you are using

// wrap hours in a Double, then use toString() on that Double
hoursminfield = Double.valueOf(hours).toString(); 

// or else a different way to wrap in a double using the Double constructor:
(new Double(hours)).toString(); 

// or else use the very helpful valueOf() method from the class String which will 
// create a string version of any primitive type:
hoursminfield = String.valueOf(hours); 
```

# 原始答案（解决了代码中的另一个问题）：

在`double hours = Mins / 60;`你划分两个`int`s。您将获得该`int`除法的值，因此如果 Mins = 43; 双小时 = 分钟 / 60；// Mins / 60 是一个 int = 0。将其分配给 double hours 使得 // hours 为 double 等于 0。

你需要做的是：

```
double hours = Mins / ((double) 60); 
```

或类似的东西，您需要将除法的某些部分转换为 a`double`以强制使用`double`s 而不是`int`s 来完成除法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-23T02:04:01.157

您尚未指定语言，但如果是 Java，则基本类型`double`和 class之间存在很大差异`Double`。

无论如何，您`setText`的方法似乎是错误的。该`setText`方法将属于数据*字段，*而不是您尝试放入其中的数据：

```
hoursminsfield.setText (hours); 
```

换句话说，您想设置字段的文本，使用您刚刚计算的双精度值。你是否可以通过双打是另一回事，*可能*需要检查。

另一件事：

```
double hours = Mins / 60; 
```

将，如果`Mins`是一个整数`，给你一个*整*数值，然后你把它放入一个双精度。这意味着它将被截断。如果要确保在除法之后保持精度，可以使用以下内容：

```
double hours = (double) Mins / 60.0; 
```

（尽管它可能只适用于其中一项更改，但我更愿意明确所有条款）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-23T04:20:56.567

这种方式怎么样

```
double hours = Mins / 60.0 
```

我总是使用上面的语句来获取双精度值

# php - 获取今天的日期，在充满日期的表格中找到它。MySQL / PHP

> ID：10273950
> 
> 赞同：0
> 
> 时间：2012-04-23T01:58:16.583
> 
> 标签：php, mysql, date

我有一个 MySQL 表，其中包含 DATE 格式的日期。我将如何找到当前日期，然后在表格中找到它并根据`row_id`?

我知道我没有为这个问题提供任何代码，但我正在努力寻找一个开始的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T02:01:41.203

您可以使用该[`CURDATE()`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_curdate)函数来匹配当前日期：

```
select row_id from date_table where date_column = CURDATE(); 
```

# ubuntu - Ubuntu 没有在 VirtualBox 上完全关闭

> ID：10273952
> 
> 赞同：9
> 
> 时间：2012-04-23T01:58:35.660
> 
> 标签：ubuntu, virtualbox

我已经在 VirtualBox v. 4.1.12 上安装了 Ubuntu Precise (v. 12.04)，分别在两台运行 Mac OS 10.5.8 和 10.6.8 的不同机器上。一切都按预期工作。我可以使用菜单中的“关闭”命令关闭 Ubuntu，而客户操作系统确实关闭了。

但是，当我尝试从命令行使用 关闭时`sudo halt`，虽然来宾操作系统确实关闭了，但它的窗口永远不会消失。

有谁知道为什么会这样？在相同的环境中，我对 Ubuntu Lucid (v. 10.04) 没有这样的问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-23T02:07:57.070

这似乎是一个开放的错误，请参阅：[https ://bugs.launchpad.net/ubuntu/+source/upstart/+bug/880240](https://bugs.launchpad.net/ubuntu/+source/upstart/+bug/880240) [https://bugs.launchpad.net/ubuntu/+source/linux/+bug/ 950129](https://bugs.launchpad.net/ubuntu/+source/linux/+bug/950129)

试试`sudo shutdown -h now`吧。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-11-01T19:42:57.073

尝试在 VirtualBox-Configuration-Sytem-Motherboard 菜单中禁用“I/O APIC”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-25T12:56:04.320

在大多数系统上，“sudo poweroff”几乎等同于“sudo halt -p”。

# php - PHP 更改图像中的颜色（包括阴影）

> ID：10273954
> 
> 赞同：3
> 
> 时间：2012-04-23T01:58:41.817
> 
> 标签：php, javascript, image, colors

我不是要代码，除非你有它；）我所要求的只是一个正确方向的点。

基本上我正在尝试重写我的“足球套件生成器”目前我使用具有 2 种颜色的模板，它们使用 imagecolorset 函数进行更改。

但是现在我想开始使用更好看的带有阴影等的工具包（IE [http://img829.imageshack.us/img829/3450/aspireblackwhite.gif](http://img829.imageshack.us/img829/3450/aspireblackwhite.gif)）

如果有人能给我一些关于如何做到这一点的建议，我将不胜感激。

服务端请

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-23T02:25:26.887

您的问题不清楚您是尝试在服务器端还是客户端完成此操作。无论哪种方式，使用具有 alpha 透明度的 24 位 PNG 都可能是实现此目的的最佳方式。

如果要在服务器端生成图像，请从球衣作为部分透明的 png 开始，白色部分透明，然后使用纯色作为其后面的蒙版。

这里有一些关于 alpha 透明度和 GD 库的信息：[如何使用 PHP 将透明 PNG 与图像合并？](https://stackoverflow.com/questions/1394061/how-to-merge-transparent-png-with-image-using-php)

如果这是客户端，您可以在具有绝对定位元素和 z-index 的一些更改的相同 alpha 透明 PNG 后面分层纯色衬衫图像。

编辑：对于多色球衣条纹，您可以叠加三个图像：两件带有交替条纹的纯色球衣 + 1 个 alpha 灰度图像，用于遮蔽顶部。

# xcode - XCode：无法在界面构建器中将 UIView 拖放到 UIViewController 上

> ID：10273956
> 
> 赞同：0
> 
> 时间：2012-04-23T01:59:28.620
> 
> 标签：xcode, uiview, uiviewcontroller, interface-builder

在 XCode 4.3 的 iPad 主从应用程序模板中，主视图（侧窗格导航菜单）扩展了 UITableViewController。相反，我希望它扩展 UIViewController 并使用 UIView 和 UITableView 来显示主表（[这就是原因](https://stackoverflow.com/a/10247213/206613)！）。

我面临的问题是我无法将 View 对象拖放到 MasterViewController 类（扩展 UIViewController）上。这不能使用界面生成器来完成吗？我能做的最好的事情是将 UIView 拖放到 MasterViewController 的同一级别，而不是在其中。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-23T03:43:41.697

要在默认应用程序中用视图控制器替换标准表视图控制器，请执行以下操作：

1.  选择主 UITableViewController
2.  按`delete`将其删除。
3.  将 UIViewController 从 Objects 面板拖到画布上。
4.  从主导航控制器控制拖动到新的 UIViewController
5.  选择“关系 - 根视图控制器”。

注意：在您的另一篇文章中，您说过要结合 UIView 和 UITableViewController。只是一个警告：如果你在表格视图中使用静态单元格，它**必须**嵌入在 UITableViewController 中，它**不会**在 UIViewController 中工作。（如果你打算这样做，你**必须使用动态单元格）。**在您的特定情况下，您可能根本不需要表格视图。

# php - PHP MySQL session_set_save_handler 竞争条件

> ID：10273957
> 
> 赞同：2
> 
> 时间：2012-04-23T01:59:40.757
> 
> 标签：php, mysql, session, locking, race-condition

我使用 MySQL innoDB 表作为存储后端编写了一个简单的[session_set_save_handler 。](http://php.net/manual/en/function.session-set-save-handler.php)MySQL是5.5。

代码看起来像这样（非常简化，但希望能说明代码流），我使用[RedBean ORM](http://www.redbeanphp.com/)与数据库交互，但命令应该清楚地显示正在写入、读取或删除的内容。：

```
class MySession{

    private $_database;  

    public function  __construct($database){
       //database object is injected using dependency injection then assigned to private var

       //Hook up handlers
       session_set_save_handler(
        array($this, "open"),
        array($this, "close"),
        array($this, "read"),
        array($this, "write"),
        array($this, "destroy"),
        array($this, "garbageCollection"));
       }

       //Register the shutdown function
       register_shutdown_function('session_write_close'); 

       //start
       session_start();

       //Regenerate session id
       //(NOTE: in production code, the id is regenerated every 10 minutes,
       //but regenerating allows us to trigger the race condition for demonstration.
       session_regenerate_id(TRUE);

    public function open($savePath, $sessionName){
        $this->_database->exec('SET TRANSACTION ISOLATION LEVEL SERIALIZABLE');
        $this->_database->begin(); //Begin Transaction
        return true;
    }   

    public function close(){
        $this->_database->commit(); //Commit the transaction
        return true;
    }

    public function read($id){

        $this->_database->exec('SELECT * FROM session WHERE identifier = ? LOCK IN SHARE MODE', array($id));
        $session = $this->_database->findOne('session', 'identifier = ?', array($id));
        return $session->data;
    }

    public function write($id, $sessionData){

        $this->_database->exec('SELECT * FROM session WHERE identifier = ? FOR UPDATE', array($id));
        $session = $this->_database->findOne('session', 'identifier = ?', array($id));

        //We need to create a new session
        if ($session == NULL){
            $session = $this->_database->dispense('session');
        }

        $this->_database->store($session);
        return TRUE;
    }

    public function destroy($id){
        $this->_database->exec('SELECT * FROM session WHERE identifier = ? FOR UPDATE', array($id));
        $session = $this->_database->findOne('session', 'identifier = ?', array($id));

        if ($session != NULL){
            $this->_database->trash($session);
        }
        return TRUE;
    }

    public function garbageCollection($maxlifetime){
        $old = ... //Calculate the time for expired sessions

        $this->_database->exec("DELETE from session WHERE last_activity < ?", array($old));
        return TRUE;
    }
} 
```

问题是即使锁定到位，如果我向应用程序发送多个请求（例如，使用 AJAX），竞争条件仍然会发生并且存储在会话中的数据会丢失。我已将其固定到`session_regenerate_id(TRUE)`，这会删除上一个会话作为问题的原因。但是，即使使用行锁定，问题仍然存在。

我查看了这个[页面](http://thwartedefforts.org/2006/11/11/race-conditions-with-ajax-and-php-sessions/)，以及该作者的一些[代码](http://race.phux.net/code/session_mysqlsesslock.phps)，但它使用了实现表锁定的 MyISAM 表。

任何人都可以阐明为什么锁定没有影响，并可能为这个问题提供一些解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-21T02:09:40.223

我认为您最好的选择是仅在您知道请求是整页请求而不是 AJAX 请求时才重新生成会话 ID。

```
if (empty($_SERVER['HTTP_X_REQUESTED_WITH'])) {
    session_regenerate_id(TRUE);
} 
```

以上假设您使用的 javascript 库设置了标题。

# xcode - 获取 XCode 中错误的行号

> ID：10273960
> 
> 赞同：6
> 
> 时间：2012-04-23T02:01:13.883
> 
> 标签：xcode, xcode4, xcode4.2

简单的问题：如何获取 XCode (v 4.2) 中错误的行号？

我搜索了各种解决方案 - 添加了一个异常断点并在这里尝试了建议：[xcode-4-2-debug-doesnt-symbolicate-stack-call](https://stackoverflow.com/questions/7841610/xcode-4-2-debug-doesnt-symbolicate-stack-call)（似乎没有做任何事情）。

这就是我得到的。这没什么用，因为我知道（在这种情况下）引发错误的方法。我只想知道具体的线路。我在可疑行之前和之后诉诸 printf 语句——而那种 hack 是无法编程的。

![在此处输入图像描述](../Images/7b767cb0d438285655a7fc180a8b4509.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T02:07:04.800

如果是异常，您可能只需要单步执行，直到找到并中断执行，或者使用 @try catch 块。

如果您怀疑某个方法，您应该尝试返回系统错误代码并打印该错误的错误消息。

您还可以使用标准 c 宏，如`__FILE__`或`__LINE__`与您自己的记录器一起使用文件/行信息输出错误。

# ios - 如何使用 UIBarButtonItem 作为导航栏标题？

> ID：10273962
> 
> 赞同：0
> 
> 时间：2012-04-23T02:01:44.683
> 
> 标签：ios, uiview, uinavigationbar, uibarbuttonitem

我想要一个带有纯文本标签的 UIBarButtonItem 用作导航栏上的标题。我怎样才能做到这一点？我的代码目前如下所示：

```
UIBarButtonItem *titleButton = [[UIBarButtonItem alloc] initWithTitle:@"CustomTitle" style:UIBarButtonItemStylePlain target:self action:@selector(titleClick)];
UIView *customTitleView = [[UIView alloc] initWithFrame:self.navigationItem.titleView.frame];
//??? now what
self.navigationItem.titleView = customTitleView; 
```

那么...如何以编程方式将此 UIBarButtonItem 项添加到 customTitleView 中？也许 customTitleView 是不必要的中间步骤？

我想使用 UIBarButton 项，因为我希望外观与左/右栏按钮项匹配。但如果绝对必要，我可以使用自定义 UIButton 和图像。

# javascript - setInterval 不会停止 clearInterval

> ID：10273968
> 
> 赞同：0
> 
> 时间：2012-04-23T02:02:52.953
> 
> 标签：javascript, setinterval

我正在尝试进行简单的播放并暂停照片滑块，但是 setInterval 对我不起作用，谁能看到我做错了什么

我希望它在我单击暂停时停止。

```
$('.control').click(function() {
    var data = $(this).attr('data-id');
    var interval;

    switch (data){
        case 'play':
            console.log('play');
            interval = setInterval(slide, 2000);
            break;
        case 'pause':
            console.log('pause');
            clearInterval(interval)
            break;
        default : console.log('nothing');
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T02:09:37.840

您的`interval`变量在函数内部声明，并在函数退出时消失。下次调用该函数时，它没有值，所以 clearInterval 正在被传递`undefined`。`interval`在函数之外声明它应该可以工作。

# mysql - 存储 SQL 字符串数组，以及后续查询

> ID：10273971
> 
> 赞同：7
> 
> 时间：2012-04-23T02:03:12.610
> 
> 标签：mysql, sql, database, database-design, foreign-keys

我想在 SQL 数据库中存储可变大小的图像标签列表，然后能够根据标签在数据库中搜索图像。我目前正在从数据库中提取标签列表，并检查查询标签是否包含在数组中。有什么办法可以在我拉出标签后将它们格式化为 sql 查询而不是在 php 中执行它们？

该列表存储为以下形式的逗号分隔值：

“阳光明媚，沙滩，棕榈树”-im1

“棕榈树，下雨，云” -im2

“冬天，雪，雪人，赃物”-img

我希望能够得到查询标签的联合：“海滩，棕榈树”的查询应该返回 im1 和 im2

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-23T02:06:47.597

您将希望避免在数据库中使用分隔列表 - 正如您所发现的那样，这否定了使用数据库存储结构化数据的优势。相反，您应该创建一个每行一个标签的新表，然后使用主图像表中的*外键引用该表。*

**图像**表

*   ID
*   图像名称

**标签**表

*   ID
*   标签名

**Image_Tags**表

*   image_id（引用图像表主键）
*   tag_id（引用标签表主键）

这样，您将能够运行如下查询：

```
SELECT t.tag_name, i.image_name FROM image_tags it
    INNER JOIN images i on it.image_id = i.id
    INNER JOIN tags t on it.tag_id = t.id
WHERE t.tag_name in ('beach', 'palms') 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-23T21:54:35.160

@dbaseman 提供了一个[很好的答案](https://stackoverflow.com/a/10273989/533120)(+1)，但它*可能*有点矫枉过正。假设您想知道的关于标签的唯一信息是它的名称，那么只有 2 个表的模型在实践中可能会表现得更好（少一个 JOIN 和更好的数据[聚类](http://use-the-index-luke.com/sql/clustering)）：

图像表：

*   身份PK
*   图像名称

image_tag 表：

*   标签名 PK
*   image_id PK，FK -> 图像

image_tag 的 PK 中的字段顺序很重要：如果您保留它，`{tag_name, image_id}`它将很好地聚集数据（即，将具有相同标签的图像保存在一起），完全符合您查询的需要：

```
SELECT DISTINCT image.*
FROM image JOIN image_tag ON (image.id = image_tag.image_id)
WHERE image_tag.tag_name IN ('beach', 'palms') 
```

另一方面，如果您还需要标签描述、标签作者等...，@dbaseman 的模型很好，除了您可以考虑翻转 Image_Tags PK 中的字段顺序（出于与上述相同的聚类原因）。

# hibernate - 映射为实体 Hibernate 的鉴别器列

> ID：10273975
> 
> 赞同：3
> 
> 时间：2012-04-23T02:04:13.663
> 
> 标签：hibernate, entity, discriminator

在hibernate中，是否可以将鉴别器作为一个实体？例如，如果我将 Department 作为基类，并将 AdminDepartment 和 ProcessingDepartment 作为子类。DepartmentType 是鉴别器 & 是映射到 DEPT_TYPE 表的实体。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-23T08:11:13.277

是的，这是可能的，尽管这样的关系是只读的：

```
@Entity @Inheritence(...)
@DiscriminatorColumn(name = "DEPT_TYPE_ID")
public class Department {
    ...
    @ManyToOne
    @JoinColumn(name = "DEPT_TYPE_ID", insertable = false, updatable = false)
    private DepartmentType deptType;
    ...
} 
```

# javascript - NaN on Force-Directed Layout Append in D3.js

> ID：10273981
> 
> 赞同：2
> 
> 时间：2012-04-23T02:05:49.047
> 
> 标签：javascript, layout, svg, d3.js, force-layout

I'm using a force-directed layout in D3 that grabs data from a JSON file and then, when one of the nodes is double-clicked, queries the database to find links to that node and updates the links and nodes arrays attempting to append the new data to the viz. It seems when the nodes are appended without links, they work fine, but the links to the xy coordinates end up being NaN. You can see the effect here, just double-click on one of the nodes:

[http://blockses.appspot.com/2432083](http://blockses.appspot.com/2432083)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-24T20:52:57.007

I fixed this by rewriting the code to follow the force-directed with append example from Bostock. The problem seems to occur when you overwrite your nodes and links arrays rather than pushing data to them, in case anyone runs into similar issues.

The updated code is in the original gist and can be seen here:

[http://blockses.appspot.com/2432083](http://blockses.appspot.com/2432083)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-22T20:00:42.970

Old post, but I also hit this issue and my solution was different.

I figured out when I was setting the size of the force layout :

```
networkViewerVariables.force = d3.layout.force()
        .gravity(.05)
        .distance(50)
        .charge(-50)
        .size([forceWidth, forceHeight]) 
```

The 'forceWidth' and 'forceHeight' variables were null. When I populated these, the errors were gone.

Hope that helps someone :)

# java - 您如何为自己的方程式实现 BigInteger 类？

> ID：10273983
> 
> 赞同：3
> 
> 时间：2012-04-23T02:06:00.810
> 
> 标签：java, arrays, for-loop, biginteger

我有一个需要以 BigInteger 格式编写的方程式。它需要在一个 for 循环中。这是我到目前为止所拥有的，但我不确定如何使用 BigInteger。这是写在 for 循环中的等式： i*(i+1)*(2*i+1)*(3*i*i+3*i-1)/30

```
public static BigInteger[] nthtetranum(int n) //This is the method using the simple formula for tetra number.
{

    BigInteger[] nth = new BigInteger[n];

    for(int i = 0; i <nth.length; i++)
    {
        //nth[i] = i*(i+1)*(2*i+1)*(3*i*i+3*i-1)/30;
        nth[i] = 

    }
    return nth; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-23T02:24:18.040

```
BigInteger two = new BigInteger("2");
BigInteger three = new BigInteger("3");
BigInteger I = new BigInteger(""+i); // "I" is a bigint version of "i"
nth[i] = I
    .multiply(I.add(BigInteger.ONE))
    .multiply(I.multiply(two).add(BigInteger.ONE))
    .multiply(I.multiply(I).multiply(three).add(I.multiply(three)).subtract(BigInteger.ONE))
    .divide(new BigInteger("30")); 
```

这个表达式很难看，但即使对于 . 的“边界”值也不会溢出`i`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T02:23:25.827

嗯。正常方式？

```
nth[i] = BigInteger.valueOf(i)
  .multiply(BigInteger.valueOf(i+1))
  .multiply(BigInteger.valueOf(2*i + 1))
  .multiply(BigInteger.valueOf(3L*i*i + 3*i - 1)) // should fit in a long
  .divide(BigInteger.valueOf(30)); 
```

# android - Android 写入 JSON 文件

> ID：10273985
> 
> 赞同：0
> 
> 时间：2012-04-23T02:06:24.013
> 
> 标签：android, json

嘿，所以我正在创建一个允许用户投票的 Android 应用程序。该应用程序从服务器读取 JSON 文件。此 JSON 文件将用于在用户回答完问题后显示用户的选择百分比。所以基本上在任何问题上，我都需要它来显示从服务器的 JSON 文件中读取的用户选择百分比。

我不确定如何在用户对特定问题投票的情况下从服务器更新此 JSON 文件。我对此的想法是首先读取 JSON 文件，然后如果选择了选项，则添加 1。然后将 JSON 文件写入服务器以更新它。

这是更新此 JSON 文件的正确方法吗？

我的 JSON 文件示例：

```
 {
"polls": [
    {
        "count1": "0",
        "count2": "0",
        "count3": "0",
        "count4": "0",
        "count5": "0"
    },
    {   
        "count1": "0",
        "count2": "0",
        "count3": "0",
        "count4": "0",
        "count5": "0"
    },
    {
        "count1": "0",
        "count2": "0",
        "count3": "0",
        "count4": "0",
    }
]
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-10T17:41:48.710

基本上你的方法没有问题，但它会增加一点开销或每次解析数据并将所有数据发送到服务器。因此，如果可以在服务器端进行更改并可以实现新服务，那么最好在每次轮询时附加一个唯一的 id，并且只发送三种类型的数据

1 - 投票的唯一 ID 2- 用户选择的选项 3- 用户 ID /IMEI（可选）

只需将逻辑放在服务器端，根据“用户选择的选项”将投票增加 1

即使您的两部手机同时发出请求，也可能会产生问题。或者如果有很多用户，那么较早获取数据但由于网络延迟等问题的用户将覆盖中间轮询用户的结果。

# sql - 组合多个查询不同的 Where 子句

> ID：10273987
> 
> 赞同：1
> 
> 时间：2012-04-23T02:06:44.320
> 
> 标签：sql

我有 2 个查询要合并为一个。基本上我希望 2 个查询在一个输出表中......输出看起来像这样......</p>

```

商店 GC 已售汽车总数

1 22 75

2 24 88

3 15 89

```

问题是我不知道如何将它放在同一张桌子上。

这是我的疑问……</p>

```
SELECT        Store_Number, COUNT_BIG(Quantity_Sold) AS GC Sold
FROM            Invoice_Detail_Tb
WHERE        (Invoice_Date BETWEEN CONVERT(DATETIME, @startdate, 102) AND CONVERT(DATETIME, @enddate, 102)) AND (JLI_Category_Code = 'gc') 
                         AND (Invoice_Detail_Code LIKE 'jlgc%') AND (Invoice_Detail_Type = 'Item')
GROUP BY Store_Number 
```

这个输出是：

```
店铺编号 GC 已售

1 12

2 13

3 14

```

```
SELECT   Store_Number,
         SUM(Vehicle_Count) AS [Total_Cars]
FROM     Daily_Sales_Tb
WHERE    (Operations_Day BETWEEN CONVERT (DATETIME, @startdate, 102) AND CONVERT (DATETIME, @enddate, 102))
GROUP BY Store_Number; 
```

输出：

```
店铺数量 总车次

1 7

2 8

3 9

```

另外，查询按设计工作。但是，如果我尝试将它们组合起来，它们是 2 个不同的聚合函数，所以它不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-23T02:20:10.067

```
SELECT A.Store_Number,A.GC_Sold,B.Total_Cars
FROM
(
SELECT        Store_Number, COUNT_BIG(Quantity_Sold) AS GC_Sold
FROM            Invoice_Detail_Tb
WHERE        (Invoice_Date BETWEEN CONVERT(DATETIME, @startdate, 102) AND CONVERT(DATETIME, @enddate, 102)) AND (JLI_Category_Code = 'gc') 
                         AND (Invoice_Detail_Code LIKE 'jlgc%') AND (Invoice_Detail_Type = 'Item')
GROUP BY Store_Number
) A,
(
SELECT   Store_Number,
         SUM(Vehicle_Count) AS [Total_Cars]
FROM     Daily_Sales_Tb
WHERE    (Operations_Day BETWEEN CONVERT (DATETIME, @startdate, 102) AND CONVERT (DATETIME, @enddate, 102))
GROUP BY Store_Number
) B
WHERE A.Store_Number=B.Store_Number; 
```

# javascript - 使用 Javascript REGEX 阻止一定范围的 ASCII 字符

> ID：10273988
> 
> 赞同：-2
> 
> 时间：2012-04-23T02:06:45.287
> 
> 标签：javascript, jquery, regex, validation, ascii

正如其他人建议的“创建白名单”，但我真的很想创建一个黑名单。这是我的代码

```
if($("#txtTag").val().length <=0 || $("#txtTag").val() =="")
{
    $("#ep-insert-keyword").html("Please Enter Keyword");
    $("#ep-insert-keyword").fadeIn("normal");
}
else if(!RegexCheck(/^[a-zA-Z\_]+$/g,$("#txtTag").val()))
{
    $("#ep-insert-keyword").html("Special characters are not allowed");
    $("#ep-insert-keyword").fadeIn("normal");
} 
```

我想阻止我的用户输入我在正则表达式中定义的任何特殊字符。我要防止的字符是 ASCII 中的这些字符范围

> 0-47 58-64 91-96 123-127

**我真的很想将我的代码从白名单反转为黑名单**......但我不知道如何。

**我不担心其他语言，因为我真的希望它们通过我的验证......**我只想阻止我想要的 ASCII 范围内的字符

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-23T03:19:31.873

虽然我和其他人一起推荐了一个白名单，但以下是使用正则表达式创建黑名单的方法：

```
// 0-47 : 00-2F : control codes, spaces, punctuation
// 58-64 : 3A-40 : more punctuation
// 91-96 : 5B-60
// 123-127 : 7B-7F

function verifyChars(str) {
    return str.match(/^[^\x00-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+$/) != null;
} 
```

这是一个 jsFiddle，里面有一堆测试用例：http: [//jsfiddle.net/jfriend00/24xF7/](http://jsfiddle.net/jfriend00/24xF7/)

或者更高效一点（因为它只在启动时评估一次正则表达式并使用`.test()`）：

```
var verifyChars = (function() {
    var re = /^[^\x00-\x2F\x3A-\x40\x5B-\x60\x7B-\x7F]+$/;
    return function(str) {
        return re.test(str);
    }
})(); 
```

这个带有测试用例的jsFiddle：http: [//jsfiddle.net/jfriend00/fZ3AN/](http://jsfiddle.net/jfriend00/fZ3AN/)

仅供参考，这是关于如何将不可打印的字符放入正则表达式的一个很好的参考：[http ://www.regular-expressions.info/characters.html](http://www.regular-expressions.info/characters.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-23T03:31:27.047

更多的评论，其他人几乎涵盖了为什么在这种情况下测试允许的字符可能比测试排除的字符简单得多：

```
> if($("#txtTag").val().length <=0 || $("#txtTag").val() =="") { 
```

大概`txtTag`是像输入或文本区域这样的元素的 ID。在这种情况下，该值是一个字符串，它的长度永远不能小于零。另外，空字符串“”的长度为零，所以被第一次测试覆盖了，所以上面可以简单的：

```
if ($("#txtTag").val().length == 0) 
```

然后你有：

```
> else if(!RegexCheck(/^[a-zA-Z\_]+$/g,$("#txtTag").val())){ 
```

您的代码会更有效：

```
var re = /^[a-zA-Z\_]+$/;
var value = $("#txtTag").val(); // or document.getElementById('txtTag').value

if (value == '') {
  // value is blank, do something

) else if (!re.test(value)) {
  // value has characters outside the restricted set
} 
```

顺便说一句，如果您将元素的默认值设置为“请输入关键字”，您可以这样做：

```
var el = document.getElementById('txtTag');

if (el.value == '') {
  // nothing has been entered
  el.value = el.defaultValue; // reset to 'Please enter keyword"

} else if (...) { 
```