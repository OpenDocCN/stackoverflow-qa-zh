# StackOverflow 问答 11042000-11042999

# php - PHP 是否放弃了 MySQL 扩展？

> ID：11042003
> 
> 赞同：8
> 
> 时间：2012-06-14T22:04:46.473
> 
> 标签：php

最近 PHP 手册开始在每个 mysql 函数页面上显示以下警告：

> 不鼓励使用此扩展程序。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。另请参阅 MySQL：选择 API 指南和相关常见问题解答以获取更多信息...

MySQLi 曾经非常有缺陷，但他们是否对其进行了改进以使其最终名副其实？这就是他们放弃 MySQL 扩展并试图让人们使用 MySQLi 的原因吗？

实际上，如果 MySQLi 不再有问题，我想使用它。它具有更多功能，并且是面向对象的。

对此有何评论？

//编辑：我想知道的是是否可以使用 MySQLi。或者它仍然是错误的？我应该改用 PDO 吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T22:05:52.987

是的。因为（很）久。我们现在有了 mysqli，或者更好的是 PDO。

我不会把自己锁在 mysqli 中，我更喜欢 PDO。除了提供从一个数据库系统到另一个数据库系统的更轻松迁移之外，它还提供了更好的错误处理。

> 我想知道的是是否可以使用 MySQLi。或者它仍然是错误的？

MySQLi 本身是完全没有错误的，并且已在生产中使用。

> 我应该改用 PDO 吗？

如果您使用 mysqli 的唯一理由是它与 mysql 的相似性，那么您可能无论如何都不会充分发挥 mysqli 的潜力。如果你想充分发挥 mysqli 的潜力，那么你必须开始“重新”学习（你知道，学习的东西并不多）。如果您从“零基础”开始学习一些新工具，那么为什么不首先学习更好的替代方法——PDO？

另一方面，PDO 也不完美。使用 PDO，您无法访问 MySQL 特定的 API（例如构建后的 set_charset、infile 设置、异步查询、预准备语句中的 OUT 参数）。此外，如果需要，您应该将其设置为执行真正的准备好的语句。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T22:13:29.197

PHP MySQLi 是 MySQL 改进的扩展。

> mysqli 扩展允许您访问 MySQL 4.1 及更高版本提供的功能。

[您可以在The MySQLi Extension Function Summary](http://www.php.net/manual/en/mysqli.summary.php)中比较它们。

* * *

如果您正在寻找面向对象的面向未来的解决方案，那么您可以选择[PHP PDO](http://www.php.net/manual/en/book.pdo.php)。

> PHP 数据对象 (PDO) 扩展定义了一个轻量级、一致的接口，用于在 PHP 中访问数据库。每个实现 PDO 接口的数据库驱动程序都可以将特定于数据库的特性公开为常规扩展函数。
> 
> ...
> 
> PDO 提供了一个数据访问抽象层，这意味着，无论您使用哪个数据库，您都可以使用相同的函数来发出查询和获取数据。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T23:16:41.023

是的，您可以使用 MySQLi，而且您所写的是真实的，该 API 允许从 MySQL API 轻松更改。

对于新项目，建议不再使用*ext/mysql*，而是使用*ext/mysqli*或*PDO_MySQL*。

由于您还没有写出 2009 年对您来说有什么缺陷的东西，所以很难说这些缺陷是否已经消失。我会假设是这样，但是，好吧，你自己检查一下。

您可能还想将*ext/mysqli* 与*MySQL 本机驱动程序*一起使用，而不是*MySQL 客户端服务器库 (libmysql)*。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T22:24:30.747

差不多是时候。该`mysql`API 虽然易于使用，但存在许多问题。可以说，最糟糕的问题是完全不支持准备好的语句，这迫使您通过字符串操作将 SQL 片段拼凑在一起。这不仅速度慢，而且是 SQL 注入漏洞的主要来源。

PDO 相对于 MySQLi 的优势之一是，当您决定在未来的项目中使用不同的 DBMS 时，您会发现不必学习新的 API。

# selenium - python 中带有 SauceLabs webdriver 的 Selenium 将 desired_capabilities 设置为 None

> ID：11042008
> 
> 赞同：0
> 
> 时间：2012-06-14T22:05:41.347
> 
> 标签：selenium, selenium-webdriver, saucelabs

我正在尝试将我的 SauceLabs 执行的 Selenium 1.0 测试转换为 Selenium 2.0。当我创建 selenium.webdriver.remote.webdriver 对象时：

```
driver = RemoteWebDriver('http://saucelabs.com:444', DesiredCapbilities.CHROME) 
```

我可以检查它是否创建正确，并且 desired_capabilities 似乎设置为 none 而不是字典。

在我们创建 selenium 对象并调用 selenium.start(driver=driver) 后，这会导致问题：

```
selenium = selenium(host, port, browser_string, endpoint)
selenium.start(driver=driver) 
```

我得到的错误是：

```
id = driver.desired_capabilities['webdriver.remote.sessionid']
TypeError: 'NoneType' object is not subscriptable 
```

提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T00:05:32.130

无需实例化 selenium 对象或使用 WebDriver 调用 .start。只需开始调用 Remote WebDriver 对象上的方法，如下所示：

```
driver = webdriver.Remote(
        desired_capabilities=webdriver.DesiredCapabilities.FIREFOX,
        command_executor="http://username:accesskey@ondemand.saucelabs.com/wd/hub")
driver.get("http://google.com")
driver.find_element_by_id(...etc...) 
```

# java - 如何组织我的 ElasticSearch 索引？

> ID：11042021
> 
> 赞同：9
> 
> 时间：2012-06-14T22:07:30.547
> 
> 标签：java, lucene, indexing, couchdb, elasticsearch

我是 ElasticSearch 的新手，我试图用它来帮助一个需要搜索引擎的很酷的初创公司。

我的用例是：

*   网站的每个用户都有自己的个人空间，他可以在其中创建文本文档
*   每个用户可以与有限的人（朋友）分享或不分享其内容
*   每个用户都可以创建公共内容
*   用户可能来自不同的国家
*   用户可能会搜索帖子以外的其他内容（例如，搜索其他用户）

我们的数据托管在 CouchDB 中。

* * *

**1）我应该创建一个唯一索引还是为每个用户创建一个索引是一种好习惯？** 我读过将所有内容放在同一个索引上并不是一个坏主意，这样您就可以同时搜索许多不同的内容。但是我注意到 ES 提供了搜索多个索引的能力，那么为什么不为每个用户创建一个索引呢？这是一个问题，因为最大 url 大小是有限的，并且索引名称是由 url 或其他东西提供的？

**2) 我应该为每个 json 文档创建一个索引或类型吗？** 我主要有 2 种不同类型的文档要索引：帖子和用户。如果我希望能够同时搜索它们，我应该：

*   为帖子创建索引和为用户创建索引，并同时搜索它们？
*   要创建一个索引和 2 个不同类型，并搜索同一索引的两种类型？我真的不知道会有什么不同。

**3）必须创建多条相同类型的河流是否正常？** 例如，在 CouchDB 河上，它提供了一个“过滤器”属性来仅接收与您的过滤器匹配的文档。因此，如果我想在 2 个单独的索引或类型上索引我的帖子和我的用户，我的第一次尝试将是创建 2 个 CouchDB 河流，它们都将具有不同的过滤器和不同的索引和/或类型。

这是这样做的方法吗？

# javascript - 为什么我的删除事件侦听器不起作用？

> ID：11042024
> 
> 赞同：0
> 
> 时间：2012-06-14T22:07:38.350
> 
> 标签：javascript, html, dom-events

我知道类似的问题已经在堆栈上得到了回答，但由于某种原因，他们的解决方案对我不起作用。我正在尝试创建一个简单的拖放游戏/活动。用户只能尝试一次拖动元素，因此如果拖动一次我想删除关联的拖动事件侦听器。希望这是有道理的。这是代码：

HTML

```
<div id="boxes">
 <div id="b1" class="box" draggable="true"><header>Vacuum Tubes</header></div>
 <div id="b2" class="box" draggable="true"><header> Eniac</header></div> 
 <div id="b3" class="box" draggable="true"><header> Transistors </header> </div> 
 <div id="b4" class="box" draggable="true"><header> Integrated Cicuits</header> </div>
 <div id="b5" class="box" draggable="true"><header> Microprocessor </header> </div>
</div> 
```

在 init 函数中，我将事件侦听器添加到稍后要拖动的元素中。

```
function init(){
 cols = document.querySelectorAll('#boxes div.box');
 [].forEach.call(cols, function(col) {
 boxes.push(col);
 states.push("false");
 col.addEventListener('dragstart', handleDragStart, false);
 col.addEventListener('dragend', handleDragEnd, false);}
} 
```

`init()`**** 框、状态和列是在函数外部定义和声明的数组

比在处理删除元素的函数中我有以下代码

```
dragSrcEl.removeEventListener('dragstart', handleDragStart, false);
dragSrcEl.removeEventListener('dragend', handleDragEnd, false);
cols[i].removeEventListener('dragstart', handleDragStart, false);
cols[i].removeEventListener('dragend', handleDragEnd, false);
cols[i].draggable=false;
dragSrcEl.draggable=false; 
```

如您所见，我正在尝试阻止此元素以三种不同的方式拖动。而且，它仍然不起作用。用户仍然可以拖动元素。

我的问题 1：
如何删除`dragstart`和`dragend`事件监听器？
我的问题 2：
为什么我的代码不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T22:38:19.687

首先，尝试检查您的语法。我将您的 js 放入 jsfiddle 并运行解释器。当您查看 console.log 时，您会看到语法错误。

```
function init(){
cols = document.querySelectorAll('#boxes div.box');
[].forEach.call(cols, function(col) {
    boxes.push(col);
    states.push("false");
    col.addEventListener('dragstart', handleDragStart, false);
    col.addEventListener('dragend', handleDragEnd, false);
}); /* <--- Check this here. */
}
init();
console.log($('#boxes > div.box')); 
```

然后当我在 jslint 之后运行它（它说没关系）时，你的 push 函数只有一个 TypeError 。

干杯悠闲

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-26T08:44:35.467

浏览器之间的行为存在很大差异。我能想到的唯一一个符合您期望的行为方式是 Firefox。

draggable 属性本身就足以允许在 Internet Explorer、Edge 和 Chrome 上进行拖动。另一方面，Firefox 在调用 event.dataTransfer.setData(mimetype, valuestring) 之前不会进入拖动模式。对于选定的文本和图像，这会自动发生，这就是它们可以神奇地拖动的原因。

所以要让 FF 设置值，你必须有一个 dragStart 处理程序，一旦你有一个处理程序，它必须返回 true，否则你仍然不会获得拖动模式。

要获得统一的跨浏览器行为，必须采用 FF 方式，并设置 draggable 的值来指示是否开始拖动，以抑制在 IE、Edge 和 Chrome 上的拖动。返回 false 也可能有效，但您必须检查一下。

# ruby-on-rails - 在 ActiveAdmin 中显示一列关联名称

> ID：11042025
> 
> 赞同：3
> 
> 时间：2012-06-14T22:07:40.807
> 
> 标签：ruby-on-rails, activeadmin

我有两个模型，Listing 和 Invitation，与 has_and_belongs_to_many 相关联。我正在通过 ActiveAdmin 查看邀请，并希望显示相关列表的名称。我尝试使用以下代码：

```
ActiveAdmin.register Invitation do
  index do
    column("Listings") { |invitation| invitation.listings.each do |listing|
                          listing.name
                          end
                       }
    default_actions
  end
end 
```

但什么也没有出现。我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T22:23:18.847

我假设您想要一个包含所有邀请列表名称的列。请尝试以下

```
column 'listing' do |invitation|
  invitation.listings.collect(&:name).join(', ')
end 
```

您可能希望稍后对其进行自定义并添加一个 includes(:listings) 以提高数据库检索性能。

# c++ - glPixelStorei(GL_UNPACK_ALIGNMENT, 1) 缺点？

> ID：11042027
> 
> 赞同：32
> 
> 时间：2012-06-14T22:07:46.620
> 
> 标签：c++, opengl, alignment, textures, pbo

总是使用 alginment 1 的缺点是什么？

```
glPixelStorei(GL_UNPACK_ALIGNMENT, 1)
glPixelStorei(GL_PACK_ALIGNMENT, 1) 
```

它会影响现代 GPU 的性能吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-06-15T05:52:08.020

> 数据怎么可能不是 1 字节对齐的？

[这强烈表明缺乏对像素传输操作中行对齐](http://www.opengl.org/wiki/Pixel_Transfer#Pixel_layout)的含义的理解。

您传递给 OpenGL 的图像数据预计会分组到行中。每行包含`width`多个像素，每个像素的大小由格式和类型参数定义。`GL_RGB`因此，类型为的格式`GL_UNSIGNED_BYTE`将产生一个 24 位大小的像素。否则，像素会被打包，因此一行 16 个像素将占用 48 个字节。

正如`GL_PACK/UNPACK_ALIGNMENT`. 这意味着您添加到指针以到达下一行的值是：`align(pixel_size * width, GL_*_ALIGNMENT)`。如果像素大小为 3 字节，宽度为 2，对齐方式为 1，则行字节大小为 6。如果对齐方式为 4，则行字节大小为***8***。

看到问题了吗？

图像数据，可能来自某些图像加载器加载的图像文件格式，具有行对齐。有时这是 1 字节对齐的，有时*不是*. DDS 图像具有指定为格式的一部分的对齐方式。在许多情况下，图像具有 4 字节的行对齐；因此，小于 32 位的像素大小将在具有特定宽度的行末尾有填充。如果您给 OpenGL 的对齐方式与该对齐方式不匹配，那么您会得到一个格式错误的纹理。

您设置对齐方式以匹配图像格式的对齐方式。如果您知道或可以确保您的行对齐始终为 1（除非您编写了自己的图像格式或 DDS 编写器，否则这不太可能），您需要将行对齐设置为与您的图像格式使用的完全相同。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-14T23:50:30.503

> 它会影响现代 GPU 的性能吗？

不，因为像素存储设置仅与从 GPU 传输数据或向 GPU 传输数据相关，即数据的对齐。一旦进入 GPU 内存，它就会以 GPU 和驱动程序所需的任何方式对齐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-28T20:39:38.643

不会对性能产生影响。设置更高的对齐（在 openGL 中）不会改善任何东西，也不会加速任何东西。

所有对齐都是告诉openGL在哪里期望下一行像素。如果您的图像像素紧密排列，即如果在一行字节的结束位置和新行的开始位置之间没有间隙，则应始终使用 1 对齐。

默认对齐方式为 4（即，openGL 期望下一行像素在内存中可被 4 整除的跳转之后），这可能会在您加载不是 4 字节浮点数的 R、RG 或 RGB 纹理的情况下导致问题，或者宽度不能被 4 整除。如果您的图像像素紧密排列，您必须将对齐更改为 1 才能使解包工作。

你可以（我个人没有遇到过它们）有一个 3x3 RGB ubyte 的图像，它的行是第 4 对齐的，最后有 3 个额外的字节用作填充。哪些行可能如下所示：

R - G - B - R - G - B - R - G - B - X - X - X（共16字节）

其原因是对齐的数据提高了处理器的性能（不确定在今天的处理器上它是真实的/合理的）。**如果**您对原始图像的组成方式有任何控制权，那么可能以一种或另一种方式对齐它会改善对它的处理。但这是**在 openGL 之前**完成的。OpenGL 无法对此进行任何更改，它只关心在哪里找到像素。

所以，回到上面的 3x3 图像行 - 将对齐设置为 4 会很好（并且有必要）跳过最后一个填充。如果您将其设置为 1，它会弄乱您的结果，因此您需要将其保留/恢复为 4。（请注意，您也可以使用 ROW_LENGTH 跳过它，因为这是处理子集时使用的参数图像，在这种情况下，有时您必须跳多于 3 或 7 个字节（这是对齐参数 8 可以给您的最大值）。在我们的示例中，如果您提供 4 的行长度和 1 的对齐方式也将工作）。

打包也是一样。您可以告诉 openGL 将像素行对齐到 1、2、4 和 8。如果要保存 3x3 RGB ubyte，则应将对齐方式设置为 1。从技术上讲，如果您希望结果行紧密排列，您应该总是给 1。如果你想（无论出于什么原因）创建一些填充，你可以给另一个值。给（在我们的示例中）一个 4 的 PACK_ALIGNMENT 将导致创建看起来像上面的行的行（最后有 3 个额外的填充）。请注意，在这种情况下，您的包含对象（openCV mat、位图等）应该能够接收额外的填充。

# ruby-on-rails - rails has_one 关联字段_for 表单不显示

> ID：11042029
> 
> 赞同：12
> 
> 时间：2012-06-14T22:07:55.137
> 
> 标签：ruby-on-rails

我有一个会议模型：

```
class Meeting < ActiveRecord::Base
  has_one :location, :class_name => "MeetingLocation", :dependent => :destroy
  accepts_nested_attributes_for :location 
```

然后我有一个 MeetingLocation 模型：

```
class MeetingLocation < ActiveRecord::Base
  belongs_to :meeting 
```

我的新会议表格：

```
<%= form_for @meeting do |f| %>
  <%= f.label :location %>
  <%= fields_for :location do |l| %>
    Name <%= l.text_field :name %>
    Street <%= l.text_field :street %>
    City <%= l.text_field :city, :class => "span2" %>
    State <%= l.select :state, us_states, :class => "span1" %>
    Zipcode <%= l.text_field :zip, :class => "span1" %>
  <% end %> 
```

当我查看新的会议表格时，位置字段是空白的！我只看到位置标签，但没有看到其他位置字段。过去 3 小时我一直在寻找解释，发现很多类似的问题，但没有运气。

谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-14T22:40:27.410

位置字段未显示的原因是，当您使用 新建会议时`@meeting = Meeting.new`，此会议还没有关联的 MeetingLocation。如果你打电话给@meeting.location，你会得到零。因此，表单不会显示该位置的字段。

要解决此问题，您应该`@meeting.build_location`在创建新会议后致电。这会将新会议与空白位置相关联。

编辑：尝试更改`fields_for`为`f.fields_for`

# facebook - 添加此 Facebook 描述和标题

> ID：11042030
> 
> 赞同：1
> 
> 时间：2012-06-14T22:08:02.623
> 
> 标签：facebook, addthis

我在我的 Facebook 页面选项卡中添加了一个 Addthis 脚本；

```
<div class="addthis_toolbox addthis_default_style addthis_32x32_style"
addthis:title="MY TITLE"
    addthis:description="MY TITLE"> 
<a class="addthis_button_preferred_1"></a>
<a class="addthis_button_preferred_2"></a>
<a class="addthis_button_compact"></a>
<a class="addthis_counter addthis_bubble_style"></a>
</div>
<script type="text/javascript" src="http://s7.addthis.com/js/250/addthis_widget.js#pubid=XXXX">    </script> 
```

我还在我的 Facebook 标签页中添加了正确的标题和描述，但是当我分享时，我没有得到正确的标题和描述。相反，我从我的 Facebook 主页获得默认值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T12:33:28.737

[正如保罗在该线程](http://support.addthis.com/customer/portal/questions/266403-custom-title-description-not-working-for-facebook-share-link- "这个线程")的第二个答案中指出的那样，facebook 的 addThis 共享链接不适用于正常的 addThis 参数。您必须添加所需的 facebook 元标记：

```
<meta property="og:title" content="Your title here" />
        <meta property="og:description" content="your description here" /> 
```

到您的页面。您可以在 facebook 开放图形文档 [http://developers.facebook.com/docs/opengraph/中找到更多标签](http://developers.facebook.com/docs/opengraph/)

# php - 在数组 SQL 查询中创建所有元素之间的关系。

> ID：11042032
> 
> 赞同：0
> 
> 时间：2012-06-14T22:08:18.863
> 
> 标签：php, mysql, sql

我有一系列名称：

```
 $names = array('ray'=>0,'bob'=>1,'sue'=>2,'jeff'=>3); 
```

然后我有一个表来存储数组中每个关键字之间的关系：

```
+----------+----------+
|  id_a    |   id_b   |
+----------+----------+
|   0      |    1     |
+----------+----------+
|   0      |    2     |
+----------+----------+
|   0      |    3     |
+----------+----------+
|   1      |    2     |
+----------+----------+
|   1      |    3     |
+----------+----------+
|   2      |    3     |
+----------+----------+ 
```

目前我存储关系的功能是：

```
 foreach($names as $name=>$id_a){
        foreach($names as $n2=>$id_b){
            if($name != $n2){
                INSERT INTO relationships (id_a,id_b) VALUES ($id_a,$id_b);
            }
        }
        array_shift($names);
    } 
```

我想知道是否有更快的 SQL 解决方案来处理此类操作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:13:23.393

您可以先构建插入的值数组，然后使用[单个查询](http://dev.mysql.com/doc/refman/5.5/en/insert.html)将其全部插入；那会更快。查询看起来像......

```
INSERT INTO relationships (id_a, id_b) VALUES (0, 1), (0, 2), (0, 3); 
```

# javascript - 在 Javascript 事件上播放声音

> ID：11042035
> 
> 赞同：0
> 
> 时间：2012-06-14T22:08:24.480
> 
> 标签：javascript, audio

有没有一种方法可以使用 JavaScript 或 jQuery 在 JavaScript 中的事件上播放声音？如果它是简单的，那将是最好的。这是一个例子：

```
function play_song() {
    i = 0;
    b = 1;
    if (b > i) {
        play_sound(beep.mp3);
    }
} 
```

另外，如果它是一个库，我正在寻找可以实际用于 JS 函数的东西，而不是任何 HTML。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:13:26.100

我发现这种方式：

```
<div id="sound_element">
    <embed src=sound_file_url hidden=true autostart=true loop=false>   
</div> 
```

使用 javascript：

```
document.getElementById("sound_element").innerHTML= 
    "<embed src='"+sound_file_url+"' hidden=true autostart=true loop=false>"; 
```

HTML5 还有更简单的方法。

但请不要在我使用的网站上使用它，谢谢。

# qt - QWebView：document.location.replace 在 iframe 中有错误的行为

> ID：11042036
> 
> 赞同：1
> 
> 时间：2012-06-14T22:08:39.823
> 
> 标签：qt, google-chrome, qwebview

这很难解释，但我会尝试

我的机器上有一个本地 apache。在 apache 中，我有 2 个文件夹，*foldera*和*folderb*。在*foldera/a.html*我有一个 iframe 指向*folderb/b.html*的页面。在*b.html*中有一个链接，其 href 执行以下代码：

```
function go() {
    document.location.replace('c.html');
} 
```

如果我使用**Chrome**，然后转到*http://mymachine.com/foldera/a.html*单击链接，iframe 会转到*folderb/c.html*，这是预期的行为。

**奇怪的是**：

我有一个带有 QWebView 的 QtApp。它转到文件夹*a/a.html*文件并执行以下 javascript 代码：

```
var a = document.querySelector('#ifrm').contentWindow.document.querySelector('a')
myLib.doClick(a) 
```

doClick 是一个在对象中“单击”的函数。

**奇怪的是，我的 iframe 试图转到*文件夹 a/c.html****替换*函数认为它位于错误的位置，即父窗口的位置并替换了 url 的最后一位（b.html -> c.html )

click 函数的代码在任何其他情况下都运行良好

```
 click: function (target ) {
    relatedTarget = relatedTarget || null;
    var customEvent = document.createEvent("MouseEvents");
    customEvent.initMouseEvent('click', true, true, window, detail,
                 0, 0, 0, 0,
                 false, false, false, false,
                 0, null);
     target.dispatchEvent(customEvent);
} 
```

我尝试将*窗口*和*文档*更改为 iframe.contentWindow 和 iframe.contentWindow.document，但我得到了相同的行为

这是预期的行为吗？有人知道这是否是一个真正的错误？我可以做点别的吗？

感谢您的每一个回答

# java - 如何使用 main.xml 中定义的布局添加按钮？

> ID：11042040
> 
> 赞同：1
> 
> 时间：2012-06-14T22:09:12.287
> 
> 标签：java, android, xml, button

我在 main.xml 文件中创建了按钮并在活动文件中对其进行了初始化，但我不确定如何使用 xml 中定义的布局让按钮出现在屏幕上。谁能帮我这个？

```
public class MyTasteActivity extends Activity implements View.OnClickListener{

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        TextView tv = new TextView(this);
        tv.setText("Hello, Android");

        Button collectionBtn = (Button) findViewById(R.id.collectionBtn);

    }

    public void collectionBtn(View v) {
        Toast.makeText(getApplicationContext(), "Collection was pressed", Toast.LENGTH_LONG).show();
    }

    public void onClick(View v) {}
} 
```

XML 文件：

```
 <LinearLayout
        android:layout_width="310px"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <Button
            android:id="@+id/collectionBtn"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:onClick="collectionBtn"
            android:text="Collection" />
        <Button
            android:id="@+id/button2"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Button 2" />

        <Button
            android:id="@+id/button3"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Button 3" />

        <EditText
            android:id="@+id/txt"
            android:layout_width="fill_parent"
            android:layout_height="300px" />

        <Button
            android:id="@+id/button4"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Button 4" />

        <Button
            android:id="@+id/button5"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:text="Button 5" />
    </LinearLayout>

</ScrollView> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T22:14:42.230

用于`setContentView()`告诉 Android 为您使用什么布局文件`Activity`。

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.xml_file_name_here);
} 
```

# ruby - 执行此操作的新方法（ActiveRecord 聚合）

> ID：11042042
> 
> 赞同：0
> 
> 时间：2012-06-14T22:09:22.880
> 
> 标签：ruby, sqlite, activerecord, ruby-1.9, aggregation

我一直在学习[**Pro Active Record: Databases With Ruby And Rails**](https://rads.stackoverflow.com/amzn/click/com/1590598474)`ActiveRecord`一书。这本书有点过时（**2007 年**出版），但到目前为止我没有遇到任何问题，直到我学会了**聚合**。我用来练习的代码由以下部分组成：[](https://rads.stackoverflow.com/amzn/click/com/1590598474)

 *******   **简单*的 sqlite3*数据库**
*   **与该数据库中的表对应的类**
*   **第二类是第一类的“聚合模型”（*不知道该怎么称呼它*）**

*代码如下所示：*

**SQL：**

```
CREATE TABLE songs(
id INTEGER PRIMARYKEY AUTOINCREMENTED,
title VARCHAR
); 
```

**红宝石：**

```
ActiveRecord::Base.establish_connection(:database => "songs.db", :adapter => "sqlite3")
class Song < ActiveRecord::Base
  composed_of :songinfo, :class_name => "SongInfo", :mapping => [%w(title title)]
end

class SongInfo
  attr_accessor :title
  def initialize title
    @title = title
  end
end

song.songinfo = SongInfo.new("Purple Haze")
# I first tried it out on an old (school owned) computer, with an outdated version of ActiveRecord.
# When I called the previous line on the school computer, it worked fine, but on my home computer, which is not old, I saw: DEPRECATION WARNING: You're trying to create an attribute `title,'. Writing arbitrary attributes on a model is deprecated. Please just use `attr_writer` etc. 
song.save
song.title
song.title = "Voodoo Child"
song.save 
```

当我在**家用电脑**上调用前面的代码时，`song.title`返回`nil`，而在学校电脑上，它返回**歌曲的实际标题**。另外，在**学校电脑上**，`Song.find(1)`会返回ID为1的歌曲，在家用电脑上，会返回很长的错误信息，如下图所示：

```
ActiveRecord::StatementInvalid: SQLite3::SQLException: no such column: songs.: SELECT  "songs".* FROM "songs"  WHERE "songs"."" = ? LIMIT 1
    from /Users/Solomon/.rvm/gems/ruby-1.9.3-p125/gems/sqlite3-1.3.6/lib/sqlite3/database.rb:91:in `initialize'
    from /Users/Solomon/.rvm/gems/ruby-1.9.3-p125/gems/sqlite3-1.3.6/lib/sqlite3/database.rb:91:in `new'
    from /Users/Solomon/.rvm/gems/ruby-1.9.3-p125/gems/sqlite3-1.3.6/lib/sqlite3/database.rb:91:in `prepare'
    from /Users/Solomon/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.4/lib/active_record/connection_adapters/sqlite_adapter.rb:253:in `block in exec_query'
    from /Users/Solomon/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.4/lib/active_record/connection_adapters/abstract_adapter.rb:280:in `block in log'
    from /Users/Solomon/.rvm/gems/ruby-1.9.3-p125/gems/activesupport-3.2.4/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
    from /Users/Solomon/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.4/lib/active_record/connection_adapters/abstract_adapter.rb:275:in `log'
    from /Users/Solomon/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.4/lib/active_record/connection_adapters/sqlite_adapter.rb:242:in `exec_query'
    from /Users/Solomon/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.4/lib/active_record/connection_adapters/sqlite_adapter.rb:467:in `select'
    from /Users/Solomon/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.4/lib/active_record/connection_adapters/abstract/database_statements.rb:18:in `select_all'
    from /Users/Solomon/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.4/lib/active_record/connection_adapters/abstract/query_cache.rb:63:in `select_all'
    from /Users/Solomon/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.4/lib/active_record/querying.rb:38:in `block in find_by_sql'
    from /Users/Solomon/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.4/lib/active_record/explain.rb:25:in `logging_query_plan'
    from /Users/Solomon/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.4/lib/active_record/querying.rb:37:in `find_by_sql'
    from /Users/Solomon/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.4/lib/active_record/relation.rb:171:in `exec_queries'
    from /Users/Solomon/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.4/lib/active_record/relation.rb:160:in `block in to_a'
    from /Users/Solomon/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.4/lib/active_record/explain.rb:25:in `logging_query_plan'
    from /Users/Solomon/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.4/lib/active_record/relation.rb:159:in `to_a'
    from /Users/Solomon/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.4/lib/active_record/relation/finder_methods.rb:376:in `find_first'
    from /Users/Solomon/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.4/lib/active_record/relation/finder_methods.rb:122:in `first'
    from /Users/Solomon/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.4/lib/active_record/relation/finder_methods.rb:334:in `find_one'
    from /Users/Solomon/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.4/lib/active_record/relation/finder_methods.rb:310:in `find_with_ids'
    from /Users/Solomon/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.4/lib/active_record/relation/finder_methods.rb:107:in `find'
    from /Users/Solomon/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.4/lib/active_record/querying.rb:5:in `find'
    from (irb):19
    from /Users/Solomon/.rvm/rubies/ruby-1.9.3-p125/bin/irb:16:in `<main>'1.9.3-p125 :020 > 
```

版本号：

*   **红宝石**：1.9.3
*   **活动记录：**3.2.4****
***   **操作系统**：OS X Lion 10.7**

 **任何帮助将不胜感激，详细说明**不推荐使用**的有效方法。

## 更新：

帖子的前半部分完全固定。但是，当我尝试运行`Song.find(1)`时，它仍然会给出错误消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:53:14.803

我看到一个问题，映射中的一个额外逗号，这可能与您的问题无关。尝试这个：`composed_of :songinfo, :class_name => "SongInfo", :mapping => [%w(title title)]`********

# java - 日志记录在 Android 设备上实际上做了什么？

> ID：11042044
> 
> 赞同：2
> 
> 时间：2012-06-14T22:09:36.883
> 
> 标签：java, android, logging

我一直在 Android 示例中看到这样的代码？

```
try { ... }
catch (Exception e) {
    Log.e("Error", e.getMessage());
} 
```

`Log.e`在物理设备上实际做了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T22:11:57.367

它进入系统日志，开发人员可以通过 SDK 工具访问，`adb logcat`也可以通过 aLogcat 等应用程序访问。Android 的默认应用发布构建过程通常会删除调试日志语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T22:12:06.477

`adb`日志将该行打印到系统的控制台日志中，您可以使用该工具实时转储该日志。例如：`adb logcat`。或者您可以使用基于 Eclipse 的调试工具来查看它。

我最喜欢的日志风格是[Log.wtf()](http://developer.android.com/reference/android/util/Log.html#wtf%28java.lang.String,%20java.lang.String%29)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T23:06:57.760

`Log.e`特别用于记录错误，但一般来说，Log 用于各种记录（错误、警告、调试、详细等）。这些对于调试应用程序非常有帮助。在这里，有一个很好的教程来解释这个 -[应用程序日志](http://mobile.tutsplus.com/tutorials/android/logcat_android-sdk/)

希望这可以帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T22:17:10.873

该设备保存一个称为 logcat 的滚动日志。这可以通过多个 IDE 或 android SDK 中的独立工具跨 ADB 读取。这样使用它是一个很好的调试工具。

在设备上，可以发送 logcat 进行远程调试。

# css - Wicket - 删除过时的标头贡献/AJAX 面板替换

> ID：11042046
> 
> 赞同：0
> 
> 时间：2012-06-14T22:09:57.630
> 
> 标签：css, ajax, wicket, wicket-1.5

我们正在编写一个重 AJAX 的 Wicket 应用程序，并且有面板通过`renderHead()`. 但是，当通过 AJAX 替换面板时 - 比如说，通过`AjaxTabbedPanel`，旧面板的标题贡献仍然存在并污染了应用程序的其余部分。除了响应膨胀之外，当 CSS 声明过于通用时，这会导致问题，从而导致应用程序的其他区域出现渲染问题。

有没有解决的办法？`IHeaderReponse`比如说，当面板被替换/不再可见时重新创建的机制？

对于它的价值，我们的标题贡献者的一个例子是：

```
@Override
public void renderHead(IHeaderResponse response) {
    response.renderCSSReference(new SharedResourceReference(SearchMainPanel.class, "Search.css"));
} 
```

我们正在使用 Wicket 1.5.3。

`<link rel="stylesheet" ... />`我在面板标记中呈现 a 的自定义标签取得了成功`<body>`（即，不使用标题贡献者），但是 IE8 拒绝承认此 CSS 的存在 - 因此不得不重新考虑我们的策略。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T18:14:52.790

每个**AjaxRequestTarget 都会收到一个**专门针对该请求的新 IHeaderResponse。您看到的问题是由于先前的请求响应了您不再希望该页面出现的样式表。让浏览器忽略您已经在页面上呈现的样式表的唯一方法是在没有该文件的情况下重新呈现页面。

在这种情况下，您可以在第一次渲染每个选项卡时依赖样式级联，因为 Wicket 将在您渲染该面板时加载关联的样式表。但是，当您返回到以前呈现的选项卡（面板）时，Wicket 不会重新呈现样式表，因为它已经加载。这意味着您需要有一种方法来克服级联样式的限制。

最好的方法是给**你的样式命名空间**......这意味着你应该用一个命名空间类（如“tab1”或更准确的上下文）将每个面板包装在一个标签中，然后你将基于该类的所有样式：

```
.tab1 .heading {
    font-weight: bold;
}

.tab1 .description {
    background: blue;
}

.tab2 .heading {
    font-size: 1.3em;
}

.tab2 .description {
    background: lightblue;
} 
```

这将确保您能够区分每个选项卡的单独样式，并且您可能需要的任何级联仍然适用于命名空间选择器

# android - Android 中的国际化

> ID：11042056
> 
> 赞同：1
> 
> 时间：2012-06-14T22:10:44.777
> 
> 标签：android, internationalization

大家好，任何人都可以指导我在 Android 平台上实施国际化。我正在用德语实现我的应用程序，我也接受了用户的输入。输入也有数字，因为德国人使用“，”字符而不是“。” 点字符和日期格式也不同。有没有人研究过这样的东西。请在这篇关于 android 的国际化文章中分享您的知识。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T22:25:37.017

我假设您已经阅读了[本地化指南](http://developer.android.com/guide/topics/resources/localization.html)。这应该可以帮助您翻译字符串。

您还将对[Format](http://developer.android.com/reference/java/text/Format.html)类感兴趣，特别是[NumberFormat](http://developer.android.com/reference/java/text/NumberFormat.html)（用于数字、百分比、货币...）和[DateFormat](http://developer.android.com/reference/java/text/DateFormat.html)。

# php - 将 var 从 js 发送到 php

> ID：11042058
> 
> 赞同：-5
> 
> 时间：2012-06-14T22:11:17.490
> 
> 标签：php, javascript, jquery, ajax

> **可能重复：**
> [如何将变量从 JavaScript 传递到 PHP？](https://stackoverflow.com/questions/980770/how-can-i-pass-variables-from-javascript-to-php)

当我单击一个按钮时，它会创建一个变量 $var 然后我想将此 var 发送到 php 来处理它。

例子：

## 在 Jquery.js 中

```
$('#button').click(function(){

//create the var
$name = "abcde";

//send the $name to process.php
---I DONT KNOW HOW---
}); 
```

## 在 process.php 中

只是...

```
echo $name; 
```

如何发送 $name ？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T22:13:05.577

您需要将其发布到服务器， [PHP](http://en.wikipedia.org/wiki/POST_%28HTTP%29)可以使用`$POST['variablename']`. 这通常通过将其包含在表单中或使用[AJAX](http://en.wikipedia.org/wiki/Ajax_%28programming%29)异步来完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T22:15:19.110

## 得到

```
$.get("url", {name: "abcde"}, function(response){
    //Do something
}); 
```

## 邮政

```
$.post("url", {name: "abcde"}, function(response){
    //Do something
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T22:15:19.373

在jQuery代码中

```
$.post('process.php',name:$name,function(data){alert(data);}); 
```

在 process.php 中

```
if(isset($_POST['name'])){
  echo $_POST['name'];
}else{
  echo 'nothing was send';
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T22:15:54.810

```
$('#button').click(function(){
    var $name = "abcde";
    $.ajax({
      type: 'POST',
      url: process.php,
      data: {name:$name},
      success: function(data){alert("send ok")}
    });
}); 
```

进程.php：

```
if(isset($_POST['name'])){
  echo $_POST['name'];
} 
```

# android - Android - 超过 2 次同时触摸

> ID：11042060
> 
> 赞同：0
> 
> 时间：2012-06-14T22:11:50.430
> 
> 标签：android, multi-touch

android可以识别两个以上的同时触摸（3、4等......）吗？支持的触摸次数是否因设备而异？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T22:16:04.667

通常是的，但包括触摸次数在内的硬件支持取决于设备。始终提供访问您的应用程序的替代方法。

请参阅[此处](http://android-developers.blogspot.cz/2010/06/making-sense-of-multitouch.html)了解更多详情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T22:17:18.297

是的，多点触控点的数量取决于设备的触摸屏硬件以及是否在其 ROM 中实现了多点触控。

[http://android-developers.blogspot.com/2010/06/making-sense-of-multitouch.html](http://android-developers.blogspot.com/2010/06/making-sense-of-multitouch.html)

# html - 如何在没有绝对值的情况下将 div 附加到底部？

> ID：11042064
> 
> 赞同：6
> 
> 时间：2012-06-14T22:12:02.937
> 
> 标签：html, css

所以我有一个页脚：

```
<div id="footer" >
    <div style="padding:20px;">
        Footer
    </div>
</div> 
```

这是在包装风格：

```
#page { width:964px; margin:0 auto; } 
```

所以我需要将页脚 div 附加到浏览器的底部。问题是如果我添加：

```
position:absolute;
bottom:0; 
```

以前的一些 div 与页脚相交，而且我需要自己设置高度和宽度。

![演示](../Images/326b6906726da1a2dd0a2bbcfb2c64cb.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-15T04:44:42.470

试试这样。。

**CSS**

```
html, body {
    height: 100%;
}
.wrapper {
    min-height: 100%;
    height: auto !important;
    height: 100%;
    margin: 0 auto -142px; /* the bottom margin is the negative value of the footer's height */
}
.footer, .push {
    height: 142px; /* .push must be the same height as .footer */
} 
```

**的HTML**

```
<div class="wrapper">
    <p>wrapper text here</p>    
    <div class="push"></div>
</div>

<div class="footer">
    <p>footer text here.</p>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T04:36:45.183

[这](http://jsfiddle.net/aniketpant/ttQAz/)不完全是您所要求的，但它是我使用`position: fixed`.

对于您要实现的目标，您将需要使用`position: absolute`它来实现它。然后您将不得不手动给出元素的高度以使其正确适合。而当你在里面有内容的时候`footer`，你可以用它`padding`来完善形状。

这些是唯一可能的选择。要么去`fixed`定位，要么`absolute`定位。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-14T22:20:09.327

利用：

```
#footer {
    position: fixed;
    bottom: 0;
} 
```

这是一篇很好的[文章](http://css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/)，可以了解如何`position:`工作

# android - PendingIntent 和 DownloadManager

> ID：11042070
> 
> 赞同：0
> 
> 时间：2012-06-14T22:12:11.470
> 
> 标签：android, android-pendingintent, android-download-manager, notificationmanager

有什么方法可以使用下载管理器设置 PendingIntent 吗？还是 DownloadManager.Request？我正在工具栏中向用户发送有关下载的通知：

```
request.setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE_NOTIFY_COMPLETED); 
```

请求是这样初始化的：

```
DownloadManager.Request request = new DownloadManager.Request(Uri.parse(url)); 
```

我需要它，以便当用户单击此通知时，他们会被带到活动或下载文件的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:43:19.190

我认为你的问题在这个[问题](https://stackoverflow.com/questions/9676786/how-to-launch-download-manager-from-broadcast-receiver)中得到了回答。

也就是说，注意[ACTION_NOTIFICATION_CLICKED](http://developer.android.com/reference/android/app/DownloadManager.html#ACTION_NOTIFICATION_CLICKED)和[ACTION_DOWNLOAD_COMPLETE](http://developer.android.com/reference/android/app/DownloadManager.html#ACTION_DOWNLOAD_COMPLETE)操作。

如果您需要更多控制权，您可以使用自己的通知，在下载完成后使用您的 PendingIntent 更新它。

# cocos2d-iphone - (Cocos2d) 使用粒子系统时 autoRemoveOnFinish 放置在哪里？

> ID：11042074
> 
> 赞同：0
> 
> 时间：2012-06-14T22:12:22.030
> 
> 标签：cocos2d-iphone

我在我的游戏中为我的足球创建了一个火焰粒子系统，我想知道我应该在哪里放置优化代码（autoRemoveOnFinish）。这就是我现在正在做的事情。

界面

```
CCParticleSystem        *_fire;
@property (readwrite,retain) CCParticleSystem *fire; 
```

执行

```
self.fire = [CCParticleSystemQuad particleWithFile:@"fire.plist"];
self.fire.position = cpv(self.contentSize.width * .5, self.contentSize.height * .5);
self.fire.positionType = kCCPositionTypeGrouped;
_fire.autoRemoveOnFinish = YES;
[self addChild:_fire z:0]; 
```

如果我这样做的方式是正确的，为什么 fps 会下降到 25 左右。我一次只允许在屏幕上创建 5 个足球。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:45:59.453

无论何时何地启用 autoRemoveOnFinish 都无关紧要。重要的一点是，这只适用于一次性效果，例如 CCParticleExplosion。一次性效果的持续时间属性设置为正值。

如果您遇到帧率问题，我敢打赌，totalParticles（字形设计器中的最大粒子数）值设置得太高了。您可能只运行了 5 个粒子效果，但每个粒子系统可能会产生数百个粒子。

每个粒子的大小（分别是其纹理）也对性能有很大影响。

# c# - asp.net ListView 排序箭头

> ID：11042075
> 
> 赞同：0
> 
> 时间：2012-06-14T22:12:25.870
> 
> 标签：c#, asp.net, image, listview, sorting

如何将一个箭头图像（向上或向下）添加到列表视图的标题中，以便在单击它时按升序/降序对列进行排序？

目前我只有一个进行排序的链接：

```
<asp:LinkButton runat="server" ID="sortPosition" CommandName="Sort" CommandArgument="Position" >Position</asp:LinkButton> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:43:57.660

有很多方法可以做到这一点。一种是使用 jquery 在客户端执行此操作。您可以添加一个跨度或 div 或图像，并根据排序状态使用 jquery 切换它。

```
<style>
    .sortNotSelected
    {
        background-image: none;
        width: 15px;
        height: 15px;
    }
    .sortAscending
    {
        background-image: url('down.png');
        width: 15px;
        height: 15px;
    }
    .sortDescending
    {
        background-image: url('up.png');
        width: 15px;
        height: 15px;
    }

</style>

<asp:LinkButton runat="server" ID="sortPosition" CommandName="Sort" CommandArgument="Position" OnClientClick="changeSortState();">Position</asp:LinkButton>
<span id="imgSortPosition" class="sortNotSelected"></span>

<script>
    function changeSortState(){
        if ($('#imgSortPosition').attr('class') == 'sortNotSelected'){
            $('#imgSortPosition').removeClass();
            $('#imgSortPosition').addClass('sortAscending');
        }  
        else if ($('#imgSortPosition').attr('class') == 'sortAscending'){
            $('#imgSortPosition').removeClass();
            $('#imgSortPosition').addClass('sortDescending');
        }  
        else 
            $('#imgSortPosition').removeClass();
            $('#imgSortPosition').addClass('sortNotSelected');
        }  

    }
</script> 
```

在服务器端执行此操作的另一种方法。您可以根据命令排序上的排序状态添加控件并更改 ImageUrl 属性

```
<asp:ImageUrl ID="imgSort" runat="server" /> 
```

背后的代码

```
if (sortAsc)
{
    imgSort.ImageUrl = "up.png";
}

// and so on 
```

您可以将此图像添加到列表视图的布局模板中

# sql - sql server查询指定日期的订单

> ID：11042078
> 
> 赞同：-1
> 
> 时间：2012-06-14T22:12:35.077
> 
> 标签：sql, sql-server

```
SELECT Id,Date,Name 
FROM people 
WHERE DATEPART(hh,Date) >= 7 
AND DATEPART(hh,Date) <= 8 
Order by DATEPART(ww,Date); 
```

我的数据库是 SQL Server，问题是“日期”存储为字符串类型。如果我执行该查询，它不会正确排序。

我想要做的是，获取每天早上 7 点到 8 点之间的价值。例如，我想获取 6 月 14 日上午 7 点到 8 点之间的记录，6 月 15 日的记录相同，依此类推....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T22:20:09.300

首先，您（我们）都应该知道它是如何存储在数据库中的。将“varchar 日期”解析为日期时间。

假设我们有像 mm/dd/yyyy 这样存储的 Date varchar 所以你应该使用`SELECT convert(datetime, THEDATECOLUMN, 101) -- mm/dd/yyyy`

您可以在[此处查看更多类型的将 varchar 转换为日期时间](http://www.sqlusa.com/bestpractices/datetimeconversion/)

好的，在理解您必须首先将 varchar 转换为日期时间并且在此示例中使用`mm/dd/yyyy`我们应该这样编写查询时。

```
SELECT Id,Date,Name 
FROM people 
WHERE DATEPART(hh,convert(datetime, DATE, 101) ) >= 7 
AND DATEPART(hh,convert(datetime, DATE, 101) )  <= 8 
Order by convert(datetime, DATE, 101); 
```

根据存储方式，您应该更改相关链接中列出的转换类型

# jquery - MVC3 上的 GitHub 树滑块实现

> ID：11042079
> 
> 赞同：4
> 
> 时间：2012-06-14T22:12:40.517
> 
> 标签：jquery, asp.net, asp.net-mvc-3, github

我正在尝试在我的 MVC3 应用程序中实现相同的树形幻灯片，但我不完全确定我做对了：

索引页面：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#slider a').click(function () {
            history.pushState({ path: this.path }, '', this.href);
            $.get(this.href, function (data) {
                $('#slider').slideTo(data);
            });
            return false;
        });
    });
</script>

@{Html.RenderAction("MainTableTracker", "Release", new { releaseId = Model });} 
```

MainTableTracker 局部视图：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#slider a').click(function () {
            history.pushState({ path: this.path }, '', this.href);
            $.get(this.href, function (data) {
                $('#slider').slideTo(data);
            });
            return false;
        });
    });
</script>

<div id="slider">
    @Html.RouteLink(Model.Brand.Name, "Brand", new { BrandId = Model.Brand.Id }) /
    <ul>
        <li><a href="#">Overview</a></li>
        @foreach(var model in Model.ModelExts)
        {
            <li>@Html.RouteLink(model.Model.Name, new { modelId = model.Model.Id })</li>
        }
    </ul>
</div> 
```

VersionTable 局部视图：

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#slider a').click(function () {
            history.pushState({ path: this.path }, '', this.href);
            $.get(this.href, function (data) {
                $('#slider').slideTo(data);
            });
            return false;
        });
    });
</script>

<div id="slider">
    @Html.RouteLink(Model.Brand.Name, "Brand", new { BrandId = Model.Brand.Id }) / @Html.RouteLink(Model.Name, "Model", new { modelId = Model.Id }) /
    <ul>
        <li><a href="#">Overview</a></li>
        @foreach(var model in Model.Brand.Model)
        {
            <li>@Html.RouteLink(model.Name, new { modelId = model.Id })</li>
        }
    </ul>

    <div class="versionWraper">
        @foreach(var version in Model.Version)
        {
            <div>
                @version.Name
            </div>
        }
    </div>
</div> 
```

这行得通，但是我很确定我做错了，我猜我不应该有 3 个不同的视图每次都复制父视图的代码。

我想知道我是否应该只有一个视图模型和一个动作，让视图决定每次显示什么？但我对只使用一个操作来显示不同类型的数据（发布、品牌和功能）并不满意。

此外，布局有：

```
 $(window).bind('popstate', function (e) {
        $.get(e.originalEvent.state.path, function (data) {
            $('#slider').slideTo(data);
        });
    }); 
```

这行得通，但是当我回到品牌级别时，它会重新加载我的所有脚本（因为它是视图而不是默认脚本的部分）。

有没有更好的方法来实现这一点？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T17:56:25.140

在设计这样的东西时，我会鼓励你不要通过 ID 来定位对象。它使您处于奇怪的情况，例如您所面临的情况，您希望在脚本触发之前保证该项目在页面上以及诸如此类的事情-在处理部分加载等时，这本质上是有问题的。

相反，考虑这种方法：

```
<style>
    .slider { /* Styles here */ }
    .slider > ul { /* Styles here */ }
    .slider > ul > li { /* Styles here */ }
    .slider > .versionWrapper { /* Styles here */ }
    .slider > .versionWrapper > .versionName { /* Styles here */ }
</style>

<div class="slider">
    @Html.RouteLink(Model.Brand.Name, "Brand", new { BrandId = Model.Brand.Id })
    / @Html.RouteLink(Model.Name, "Model", new { modelId = Model.Id }) /
    <ul>
     <li><a href="#">Overview</a></li>

    @foreach(var model in Model.Brand.Model) {
     <li>@Html.RouteLink(model.Name, new { modelId = model.Id })</li>
    }

    </ul>
    <div class="versionWrapper">

    @foreach(var version in Model.Version) {
     <div class="versionName">@version.Name</div>
    }

    </div>
</div>

<script type="text/javascript" language="javascript">
$(document).ready(function () {
    $('.slider > ul > li > a').live('click', function (ev) {
        ev.preventDefault();
        ev.stopPropagation();

        var $a = $(ev.target);
        var $slider = $a.closest('.slider');

        history.pushState({ path: $a.path }, '', $a.href);
        $.get($a.href, function (data) {
            $slider.slideTo(data);
        });
    });
});
</script> 
```

此时，您可以有效地定位放置在页面上的任何滑块，无论它包含在哪个部分中 - 最后的少量 jQuery 逻辑可以轻松放入站点范围或页面范围的 JS 文件中，与输出 HTML 的特定实现分离。

接下来，只需为您所处的模式创建一个切换。我喜欢使用 来执行此操作`ViewData["SettingName"]`，但这只是我。

如果您希望显示“MainTable”样式视图，请设置如下内容：

```
ViewData["Mode"] = "Default"; 
```

如果您希望显示“版本”样式视图，请设置：

```
ViewData["Mode"] = "Version"; 
```

然后将您的部分更改为：

```
<div class="slider">
@{
    bool versionMode = (ViewData["Mode"] as String == "Version");

    string breadCrumb = Html.RouteLink(
        Model.Brand.Name, 
        "Brand", 
        new { BrandId = Model.Brand.Id }
    ).ToString();

    if (versionMode) {
        breadCrumb = String.Format("{0} / {1}", 
            breadCrumb, 
            Html.RouteLink(
                Model.Name, 
                "Model", 
                new { modelId = Model.Id }
            ).ToString()
        );
    }
}

    @breadCrumb /
    <ul>
        <li><a href="#">Overview</a></li>
@{
    if (versionMode)
        foreach(var model in Model.ModelExts) {

        <li>@Html.RouteLink(model.Model.Name, new { modelId = model.Model.Id })</li>

        }
    } else {

        @foreach(var model in Model.Brand.Model) {
            <li>@Html.RouteLink(model.Name, new { modelId = model.Id })</li>
        }

    }
}
    </ul>

@{
    if (versionMode) {

    <div class="versionWrapper">
        @foreach(var version in Model.Version) {
        <div>@version.Name</div>
        }
    </div>

    }
}

</div> 
```

# python - Django formwizard：在表单之间传递数据

> ID：11042084
> 
> 赞同：4
> 
> 时间：2012-06-14T22:12:57.527
> 
> 标签：python, django

我有一个包含 3 个表单的表单向导。基本上，我想做的是将数据从第一种和第二种形式传递到第三种形式。我尝试的是在向导类中添加一个字典属性，并在每次`process_step`调用该方法时更新该字典。[Django 1.4 文档](https://docs.djangoproject.com/en/1.4/ref/contrib/formtools/form-wizard/#django.contrib.formtools.wizard.views.WizardView.process_step)说，每次为所有提交的步骤呈现页面时都会调用此方法。

在下面的示例代码中，字典属性被更改为整数`self.test`以保持简单。在这种情况下，每次`process_step`调用该方法时， 的值为`self.test`2，永远不会增加。似乎`__init__`每个表单都调用了该方法。

```
class MyWizard(SessionWizardView):
    def __init__(self, *args, **kwargs):
        super(MyWizard, self).__init__(*args, **kwargs)
        self.test = 1

    def process_step(self, form):
        self.test += 1  
        print self.test
        return self.get_form_step_data(form) 
```

除了这个解决方案，还有更优雅的方式在表单向导的表单之间传递数据吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-29T17:09:31.160

我会做的是以下几点：

```
class MyWizard(SessionWizardView):
    def get_context_data(self, form, **kwargs):
        context = super(MyWizard, self).get_context_data(form=form, **kwargs)
        if self.steps.step1 == 3:
            data_from_step_1 = self.get_cleaned_data_for_step('0') # zero indexed
            data_from_step_2 = self.get_cleaned_data_for_step('1') # zero indexed
            context.update({'data_from_step_1':data_from_step_1,
                            'data_from_step_2':data_from_step_2})
        return context 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T09:10:41.320

我对 formwizard 几乎没有经验，但从 django 文档来看，[这](https://docs.djangoproject.com/en/dev/ref/contrib/formtools/form-wizard/#django.contrib.formtools.wizard.views.WizardView.get_context_data "获取上下文数据（）")看起来就像你所追求的。

```
def get_context_data(self, form, **kwargs):
    context = super(MyWizard, self).get_context_data(form=form, **kwargs)
    if self.steps.current == 'my_step_name':
        context.update({'another_var': True})
    return context 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-29T19:06:10.687

您可以通过将“初始”信息传递给第三种形式的会话来做到这一点。[这是一个类似](https://stackoverflow.com/questions/10029942/need-clarification-on-using-django-1-4-form-wizards-specifically-pre-filling-an/11135623#11135623)的例子。

# git - 在 Aptana 中禁用 git？或者让 git 比 samba 更兼容？

> ID：11042086
> 
> 赞同：0
> 
> 时间：2012-06-14T22:13:18.643
> 
> 标签：git, aptana, samba

我正在使用 Windows 客户端中的 Aptana 来更改存储在 Debian 机器上的 Git 存储库的工作目录。我正在使用 Samba 共享工作目录（和 Git 存储库）。

不幸的是，当我在 Aptana 工作时，我拥有的每个文件都被标记为更改（从上次提交的角度来看）。当我在 Aptana 中进行提交时，所有星号都消失了，但是当我`git log`在服务器上运行时，星号又回来了。

有没有办法解决这种情况？有没有办法一起禁用 aptana 中的 Git 支持？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T12:58:15.837

这可能是因为 Windows 不支持 UNIX 文件模式。Samba 提供此信息，但 Windows 不使用它。

存储在索引文件中的模式与 Windows 上的 Git 报告文件实际具有的模式不同。发生这种情况是因为在 Windows 上没有任何真正的 UNIX 样式文件模式，所以它们只是在运行中创建的。当您在服务器上运行“git log”时，它会重写索引文件以再次具有正确的（Unix）文件模式。

# java - 垂直对齐BoxLayout间距？

> ID：11042092
> 
> 赞同：2
> 
> 时间：2012-06-14T22:13:53.277
> 
> 标签：java, swing, vertical-alignment, boxlayout

当使用垂直对齐的 BoxLayout 时，如何阻止组件随着包含 JFrame 的增长而扩展，从而在底部留下额外的空间？我尝试了不同的布局，但很快就变得一团糟。我还尝试在面板底部添加胶水，但是布局管理器将胶水视为另一个空 JPanel，仍​​然导致所有组件增长。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T22:19:05.867

考虑嵌套你的容器。例如，如果您将使用容器的 BoxLayout 放置在使用 BorderLayout 的容器的 BorderLayout.NORTH 位置，那么它将仅占用它需要的垂直空间，而不会更多。

编辑：根据 lnballoti 修复！

# php - 注销功能不起作用（会话未终止）

> ID：11042094
> 
> 赞同：-2
> 
> 时间：2012-06-14T22:14:30.973
> 
> 标签：php

```
function killsession()
{
  //  global $_SESSION;
    $_SESSION = array();
    if (session_id() != "" || isset($_COOKIE[session_name()])) {
        setcookie(session_name(), '', time() - 42000, '/');
    }
    session_unset();
    session_destroy();
    header("Location: "index");

} 
```

任何想法为什么在我运行此功能后 $_SESSION['userid'] 仍然存在？我真的保持登录状态。

会话名称和 start() 设置在每个页面的顶部。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T23:13:25.987

如[PHP session_destroy()](http://php.net/manual/en/function.session-destroy.php)手册中所述：

> [session_destroy()](http://php.net/manual/en/function.session-destroy.php)销毁与当前会话关联的所有数据。它不会取消设置与会话关联的任何全局变量，也不会取消设置会话 cookie。要再次使用会话变量，必须调用[session_start() 。](http://www.php.net/manual/en/function.session-start.php)
> 
> 为了完全终止会话，例如注销用户，还必须取消设置会话 ID。如果使用 cookie 传播会话 id（默认行为），则必须删除会话 cookie。[setcookie()](http://www.php.net/manual/en/function.setcookie.php)可以用于此。

**直接来自 PHP 手册的示例：**

```
<?php
// Initialize the session.
// If you are using session_name("something"), don't forget it now!
session_start();

// Unset all of the session variables.
$_SESSION = array();

// If it's desired to kill the session, also delete the session cookie.
// Note: This will destroy the session, and not just the session data!
if (ini_get("session.use_cookies")) {
    $params = session_get_cookie_params();
    setcookie(session_name(), '', time() - 42000,
        $params["path"], $params["domain"],
        $params["secure"], $params["httponly"]
    );
}

// Finally, destroy the session.
session_destroy();
?> 
```

# 将此示例应用于您的函数：

```
function killsession()
{
  // start the session, if started before, comment
  session_start();

  // Unset all of the session variables. 
  $_SESSION = array();

  // destroy the session, and not just the session data!
  if (ini_get("session.use_cookies")) {
    $params = session_get_cookie_params();
    setcookie(session_name(), '', time() - 42000,
        $params["path"], $params["domain"],
        $params["secure"], $params["httponly"]
    );
  }

  // destroy the session.
  session_destroy();

  // direct user
  header("Location: index.php");
} 
```

* * *

**考虑这两个会话变量：**

```
$_SESSION['userid']=25;
$_SESSION['userName']='Super BuBu'; 
```

的输出`print_r($_SESSION);`将是：

```
Array ( [userid] => 25 [userName] => Super BuBu ) 
```

调用该`killsession()`函数后，输出将是：

```
Array ( ); 
```

请参阅此[工作示例](http://codepad.org/Z3HqIaFh)。由于`print_r`和`session`交互执行了先前的输出和标头，因此假设错误出现在此环境中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T22:21:36.473

试一试

```
 function killsession() {
     unset($_SESSION['userid']);
     session_destroy();
     header("Location: "index");

 } 
```

# javascript - Firefox strokeText 锯齿状伪影

> ID：11042098
> 
> 赞同：1
> 
> 时间：2012-06-14T22:15:11.957
> 
> 标签：javascript, firefox, text, canvas, rendering

在 FF 中对 strokeText() 的画布渲染有一些问题。每当使用代码绘制轮廓文本时：

```
canvasCtx.font          = '36px impact';
canvasCtx.strokeStyle   = '#000';
canvasCtx.fillStyle     = '#fff';
canvasCtx.lineWidth     = 4;

canvasCtx.strokeText('DIG IN CEREAL', 20, 20); 
```

Chrome 没有给我[任何文物](http://i.imgur.com/o9ck6.jpg)。
FF 给了我锯齿状的[文物](http://i.imgur.com/bNkxZ.jpg)。

基本上这是在画布上呈现，然后使用 toDataUrl() 导出。任何人都知道一种解决方法/为什么锯齿状伪影只会在 FF 中发生？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-02T14:52:27.753

好吧，我通过节点画布服务器端遇到了这个问题。由于我只在孤立事件中使用文本，因此我可以在文本周围剪裁一个矩形，但它可能特定于我的字体。

```
 x = 10
  y = 10
  @fontSize = 104
  @context.font = 'bold ' + @fontSize + ' Arial'

  @context.save()
  @context.beginPath()
  @context.rect x - @fontSize*.1, y - @fontSize*.68 - @context.lineWidth, @context.measureText(text).width + @fontSize * .2, @fontSize + @context.lineWidth
  @context.clip()
  @context.strokeText text, x, y
  @context.fillText text, x, y
  @context.restore() 
```

所以，这是从咖啡脚本中摘录的片段，但你应该明白`save, clip, stroke/draw, restore`......

你将不得不玩`*.1`, `*.775`, 等等

您实际上可以使矩形的水平部分更大（而不是`.1`，您可以使用`10`and 而不是`.2`, use `20`），因为您不担心右侧和右侧的伪影。这`.775`是我准确剪掉顶部的确切数字

所以是的，有点像黑客，但它对我来说解决了这个问题。

# linux - apt-get 返回错误“debconf：Perl 可能未配置”/我如何真正理解 linux 错误

> ID：11042102
> 
> 赞同：4
> 
> 时间：2012-06-14T22:15:33.307
> 
> 标签：linux, debian, apt-get, raspberry-pi

哎呀。

所以我在我的树莓派上安装了 Debian，一切都很顺利，但是在某个地方我的 apt-get 坏了。现在，每当我尝试安装或删除任何东西时，它都会失败并返回如下错误消息：

```
debconf: Perl may be unconfigured (Quantifier follows nothing in regex; marked by <-- HERE in m/* <-- HERE     nostdio.h
 *
 *    Copyright (C) 1996, 2000, 2001, 2005, by Larry Wall and others
 *
 *    You may distribute under the terms of either the GNU General Public
 *    License or the Artistic License, as specified in the README file.
 *
 */ at /usr/lib/perl/5.10/IO.pm line 8.
Compilation failed in require at /usr/lib/perl/5.10/IO/Handle.pm line 9.
BEGIN failed--compilation aborted at /usr/lib/perl/5.10/IO/Handle.pm line 9.
Compilation failed in require at /usr/lib/perl/5.10/IO/Seekable.pm line 9.
BEGIN failed--compilation aborted at /usr/lib/perl/5.10/IO/Seekable.pm line 9.
Compilation failed in require at /usr/lib/perl/5.10/IO/File.pm line 11.
BEGIN failed--compilation aborted at /usr/lib/perl/5.10/IO/File.pm line 11.
Compilation failed in require at /usr/share/perl/5.10/FileHandle.pm line 9.
Compilation failed in require at (eval 1) line 3.
BEGIN failed--compilation aborted at (eval 1) line 3.
) -- aborting 
```

Perl 似乎已安装并正常运行。我还能在哪里寻找线索，以及如何修复我的 apt-get 安装？

我想这也暗示了一个更大的问题：我认为自己是一个称职的 Web 程序员，拥有大约 10 年的前端和后端经验，但 linux 库/编译错误仍然感觉我在阅读 Etruscan。是否有任何关于诊断 Linux 中常见类型的编译/安装错误的好的文档，这样我就不会觉得我在输入我在 Google 上找到的魔法咒语，而更像是我实际上正在理解我的解决方案？

谢谢你，互联网。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-05T21:34:26.973

你可以试试：

```
dpkg --configure -a 
```

# java - grails -xlint 错误阻止运行项目

> ID：11042103
> 
> 赞同：0
> 
> 时间：2012-06-14T22:15:43.027
> 
> 标签：java, grails, groovy

我正在从事一个大型 grails 项目，该项目有来自公司不同部门的大量插件贡献。我搬到了新电脑（mac 电脑），现在无法解决我遇到的问题。

项目使用 grails 2.0.0、groovy 1.8.6 和 java 1.6.0_32。然后我在项目目录（从我的终端）中执行 grails run-app，我收到此错误：

```
| Compiling 11 source files.
| Error Compilation error: startup failed:
Invalid commandline usage for javac.
javac: invalid flag: -Xlint:-options
Usage: javac <options> <source files>
where possible options include:
  -g                        Generate all debugging info
  -g:none                   Generate no debugging info
  -g:{lines,vars,source}    Generate only some debugging info
  -nowarn                   Generate no warnings
  -verbose                  Output messages about what the compiler is doing
  -deprecation              Output source locations where deprecated APIs are used
  -classpath <path>         Specify where to find user class files
  -sourcepath <path>        Specify where to find input source files
  -bootclasspath <path>     Override location of bootstrap class files
  -extdirs <dirs>           Override location of installed extensions
  -d <directory>            Specify where to place generated class files
  -encoding <encoding>      Specify character encoding used by source files
  -source <release>         Provide source compatibility with specified release
  -target <release>         Generate class files for specific VM version
  -help                     Print a synopsis of standard options

1 error 
```

我尝试了所有我想到的东西——更改 java、升级 grails、搜索项目源以获取自定义的 -xlint 参数。没有这样的帮助...

也许任何人都可以提供一些提示来解决这个问题？它适用于项目中的其他人，但我们俩 - 不能在 PC 升级后使这个项目工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T22:23:44.760

我不认为

```
-Xlint:-options 
```

是一个有效的 java 参数：您需要在 grails/java 脚本/环境变量中找到此错字的位置并更正它。

有关正确的 Xlint 参数，请参阅以下内容，如果您确实打算使用它（我怀疑您没有，最好将其全部放在一起） [http://marxsoftware.blogspot.com/2010/10/javacs- xlint-options.html](http://marxsoftware.blogspot.com/2010/10/javacs-xlint-options.html)

# vb.net - 如何使用 VB.net 将 Unix 文件路径转换为 Windows 路径

> ID：11042111
> 
> 赞同：1
> 
> 时间：2012-06-14T22:16:10.733
> 
> 标签：vb.net, path

我正在使用返回 unix 路径而不是 windows 路径的 acrobat。所以我想知道 vb.net 中是否有办法将路径转换为 ​​Windows 路径。

我尝试使用：

```
docs(i) = javaScriptObj.path().ToString.Replace("/", "\").Substring(1)
position = docs(i).IndexOf("\")
docs(i) = docs(i).Substring(0, position) + ":\" + docs(i).Substring(position + 1) 
```

这仅适用于本地文件，但当我开始使用网络驱动器时失败。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T22:47:48.487

试试这个：

```
Private Function UnixPathToWindowsPath(UnixPath As String) As String
   If String.IsNullOrWhiteSpace(UnixPath) Then Return String.Empty
   Dim chunks = UnixPath.Split(New Char() {"/"c}, StringSplitOptions.RemoveEmptyEntries)
   If chunks.Any Then
      If chunks(0).Length = 1 Then 'Single character root, assume drive letter.
         Return String.Join("\", chunks).Insert(1, ":")
      Else
         Return "\\" & String.Join("\", chunks)
      End If
   Else
      Return IO.Path.DirectorySeparatorChar
   End If
End Function 
```

这假定完整路径名，而不是部分路径。

# postgresql - 从 select 语句调用返回值

> ID：11042112
> 
> 赞同：1
> 
> 时间：2012-06-14T22:16:12.013
> 
> 标签：postgresql, insert, postgis

我需要将多边形插入到 postgresql 表“polygontable”中，然后返回其 (the_geom) 值以进行进一步查询。我想在“polygontable”中获取最近插入的实例。如何在 SELECT 语句中调用返回的“polygongeom”？

```
INSERT INTO polygontable (the_geom) 
VALUES (ST_SetSRID((ST_MakeValid(ST_GeomFromGeoJSON('"+JSON.stringify(payload)+"'))),4326)) returning the_geom as polygon_geom;  

SELECT st_intersects(polygon_geom, other_table.the_geom) 
from polygon_geom, other_table; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T22:30:39.570

如果您使用的是 9.1，则可以执行以下操作：

```
with inserted as 
(
  insert into ... 
  returning the_geom as new_geom
)
SELECT st_intersects(inserted.new_geom, other_table.the_geom) 
from inserted, other_table; 
```

# lucene - 通过 ElasticSearch 使用多种词干提取语言

> ID：11042117
> 
> 赞同：5
> 
> 时间：2012-06-14T22:16:56.943
> 
> 标签：lucene, elasticsearch, stemming, snowball

我正在为一个网站构建一个搜索引擎，用户可以来自许多不同的国家并发布文本内容。

我会考虑： - 法语生成法语和英语内容 - 德语生成德语和英语等内容...

我想知道是否可以同时使用不同的雪球词干分析器语言进行搜索，以便我们同时获得适当的结果。

我们是否必须为每个雪球词干分析器语言创建一个索引？

这种情况有已知的模式吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T18:42:06.720

这么快的免责声明，我不是词干/语言形态方面的专家，但由于没有其他人回应，这是我的理解。此外，我的大部分经验都与 solr 类似。

为了能够使用单个混合结果集对多种语言进行词干查询，您需要使用多语言词干分析器。我不确定什么可用于 elastisearch。

尝试将针对单一语言设计的多个词干分析器应用到单个索引会互相影响，并且可能不会产生预期的结果（词干规则因语言而异）。

每种语言都有一个带有各自词干分析器的索引适用于具有单一语言结果的查询。尝试将来自多个查询的结果与多个索引结合起来通常是相当有问题的（您必须尝试规范相关性并处理分页）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-22T21:44:10.167

您可以创建 2 个单独的索引并同时搜索两个（或全部）。只要索引字段相同，您就会得到有效的结果。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-12-23T15:17:51.597

今年早些时候，来自 elasticsearch 团队的*Kiju Kim*在 elastic.co 博客上发表了一些关于如何使用多种语言的好文章：

*   [如何使用 Elasticsearch 6.2 搜索中文、日文和韩文文本 - 第 1 部分：分析器](https://www.elastic.co/blog/how-to-search-ch-jp-kr-part-1)
*   [如何使用 Elasticsearch 6.2 搜索中文、日文和韩文文本 - 第 2 部分：多字段](https://www.elastic.co/blog/how-to-search-ch-jp-kr-part-2)
*   [如何使用 Elasticsearch 6.2 搜索中文、日文和韩文文本 - 第 3 部分：语言检测器](https://www.elastic.co/blog/how-to-search-ch-jp-kr-part-3)

您基本上可以为您的内容使用*多个字段*- 一个用于您想要支持的每种语言（第 2 部分） - 每个字段都使用特定于语言的*分析器*（第 1 部分）。（第 3 部分）添加了一些优化以使用语言检测来填充正确的语言字段，而不是使用摄取管道（使用[摄取插件进行语言检测](https://github.com/spinscale/elasticsearch-ingest-langdetect)）的所有字段。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T21:15:55.487

这个新的 ElasticSearch 插件工作正常：

[https://github.com/yakaz/elasticsearch-analysis-combo](https://github.com/yakaz/elasticsearch-analysis-combo)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-28T04:57:30.507

您可以组合词干分析器。我认为会有冲突，秩序很重要。想知道这是多大的问题。

```
"settings": {
    "index": {
        "analysis": {
            "filter": {
                "german_stemmer": {
                    "type": "stemmer",
                    "name": "light_german"
                },
                "english_stemmer": {
                    "type": "stemmer",
                    "name": "english"
                },
                "french_stemmer": {
                    "type": "stemmer",
                    "name": "light_french"
                },
                "italian_stemmer": {
                    "type": "stemmer",
                    "name": "light_italian"
                }
            }
            "analyzer": {
                "asdfghjkl": {
                    "tokenizer": "standard",
                    "filter": [
                        "english_stemmer",
                        "italian_stemmer",
                        "french_stemmer",
                        "german_stemmer"
                    ]
                }
            }
        }
    }
} 
```

# jquery - 为什么我的动态添加不了用 POST 发送元素？下面是我的表格。使用 jQuery，我根据前一个 <select>的值加载了一个</select> 元素。但是，当我发送表单时，动态添加的 <select>(add_student_contact_id) 的值不是 $_POST'ed。是因为它是在页面加载后添加的吗？有什么办法可以解决吗？students.php ID：11042121 赞同：0 时间：2012-06-14T22:17:04.400 标签：jquery, forms, post 回答 #1 赞同：1 时间：2012-06-14T22:19:23.417 一个可能的原因是$row['contact_id']注入页面时没有值。另一个原因是您缺少一个name属性。这意味着浏览器是： 发送空白值 完全省略 如果您可以检查并回发，我们可以提供更多帮助。</select>

# jquery - jquery和交换图像

> ID：11042125
> 
> 赞同：1
> 
> 时间：2012-06-14T22:17:35.550
> 
> 标签：jquery

我有这个简单的切换功能来打开/关闭信息。我想在它旁边添加一个图像，以便它显示展开或关闭。我尝试了这种方法，但没有任何反应。我错过了什么？

```
$('#slick-software').click(function() {
   $('#slickbox-software').toggle(400);
   $('#slick-img').attr('src') == "/images/up.png" ? "/images/down.png" : "/images/up.png";
   return false;
});

...
...

<a href="#" id="slick-software">
    <img id="slick-img" src="/images/up.png" border="0" align="absmiddle" />&nbsp;&nbsp;
        <b>Software</b><br>
    </a>
<div id="slickbox-software">
    text here
</div> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T22:25:17.910

一个更好的解决方案是将 CSS 用于您的向上/向下图像，您可以将其作为背景图像包含在 #slick-software 元素上（应用一些左侧填充）。然后，您可以在单击处理程序中切换一个类以更改背景图像，或者最好更改[CSS sprite](http://css-tricks.com/css-sprites/)的背景位置。我也更喜欢调用 preventDefault 而不是返回 false 来覆盖默认的点击行为，因为返回 false 会停止[事件冒泡](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false)。

```
$('#slick-software').click(function(e) {
   $('#slickbox-software').toggle(400);
   $(this).toggleClass("expanded");
   e.preventDefault();
}); 
```

然后在你的CSS中，类似：

```
#slick-software{
  display: inline-block;
  padding: 0 0 0 20px;
  background: url(img/toggle.png) no-repeat 0 0;
}

#slick-software.expanded{
  background-position: 0 -50px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T22:22:19.547

错误就在这里，我认为：

```
$('#slick-img').attr('src') == "/images/up.png" ? "/images/down.png" : "/images/up.png"; 
```

您只需在此处检查 'src' 属性，但实际上并没有更改它。

请改用以下内容：

```
var newSrc = $('#slick-img').attr('src') === "/images/up.png" ? "/images/down.png" : "/images/up.png";
$('#slick-img').attr('src', newSrc); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T22:20:26.817

尝试：

```
var src_img = ($('#slick-img').attr('src')=="/images/up.png") ? "/images/down.png" : "/images/up.png";
$('#slick-img').attr('src', src_img) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T22:21:10.917

更改 src 后，您想强制刷新图像。这里有一个问题与一些不错的答案非常相似：

[如何用jQuery刷新<img />的src？](https://stackoverflow.com/q/1997901/484072)

# java - 关于本地android开发的2个问题

> ID：11042126
> 
> 赞同：-1
> 
> 时间：2012-06-14T22:17:40.233
> 
> 标签：java, android, html, responsive-design

首先让我指出，我是一位经验丰富的软件工程师。我对OOP原理和软件系统架构相当熟悉。我的背景主要是 AS3，但我也非常精通 Java、JavaScript 和 HTML(5)。我想我会提到这一点，因为它可能会对您的答案的措辞产生影响。

现在，我很新的领域是 nativa android 开发。我目前正在构建一个应用程序，它将具有一些简单的网络集成，即使用一些网络服务在云中/从云中保存和请求数据。我还处于开发阶段的早期，所以现在对设计进行根本性的改变还为时不晚。

到目前为止，我只是简单地将这些功能构建为一个直接的 android/java 应用程序，目的是结合一个 Web 服务管理器来从/向云中获取/发布数据。但是，我已经意识到 WebView api，现在我想知道是否应该停止在应用程序本身中构建所有功能。相反，我认为让应用程序简单地成为 WebView 的包装器可能是一个更好的主意，而 WebView 又会加载一个 url。这样我就可以将实际的应用程序编写为一个响应式设计的 html5 网站，该网站会自动调整到它打开的任何屏幕尺寸。如果这种方法可行，我认为它将主要消除为不同屏幕尺寸进行开发的麻烦。它还将简化获取/发布数据，因为它'

所以这是我的问题：

1）我在上面描述的是什么 - 也就是构建一个应用程序只是它加载的网络应用程序的包装器 - 一种可行且智能的方式来设置一个安卓应用程序？这是做这种事情的常用方法吗？

2) 如何限制网站/网址只能从运行在 android 设备上的应用程序内部加载，而不是从运行在计算机上的浏览器加载？这可能吗？有这种要求的api吗？我需要这是一个 android 应用程序，而不仅仅是一个可以在任何浏览器中从任何平台访问的网站。

3) 谁能给我指出一个关于响应式网页设计的好教程/指南？我非常熟悉基础知识，但这是我特别要寻找的：我看到响应式网页不仅会在调整浏览器窗口大小时“流畅地”调整自己（这种响应式设计我非常熟悉并且可以轻松设置）。相反，他们所做的是保持原来的（也就是最大的）布局，直到浏览器窗口达到某个较小的尺寸，然后页面捕捉到不同的布局，完美地适应浏览器窗口的较小尺寸。此更改不仅包括布局，还包括可见项目的数量以及激活其他 UI 元素以使在较小窗口中的导航更容易。想象一下扑克牌在窗口中并排放置。让我们假设当窗口处于全屏模式时 5 张卡片彼此相邻。现在想象窗口的尺寸减小了。布局保持不变，直到第一张和最后一张卡片几乎超出可见区域。当窗口达到那个大小时，页面“捕捉”到不同的布局，现在只在中心显示 3 张卡片，左右边缘出现箭头，表示用户可以滚动到更多卡片。这种响应式设计是如何完成的？页面“捕捉”到不同的布局，现在只在中心显示 3 张卡片，左右边缘出现箭头，表示用户可以滚动到更多卡片。这种响应式设计是如何完成的？页面“捕捉”到不同的布局，现在只在中心显示 3 张卡片，左右边缘出现箭头，表示用户可以滚动到更多卡片。这种响应式设计是如何完成的？

提前感谢您的任何相关回复！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T22:21:33.560

这并不能回答你所有的问题......但我会检查一下[PhoneGap](http://phonegap.com/)之类的东西，然后从那里开始。

# aptana - Aptana Studio 3 需要 2 分钟才能启动

> ID：11042128
> 
> 赞同：2
> 
> 时间：2012-06-14T22:17:49.533
> 
> 标签：aptana, aptana3

我最近在具有 4gb RAM 的 Win7 Enterprise 32 位机器上安装了 Aptana Studio 3，内部版本：3.1.3.201205292243。

我已经卸载并重新安装了一次（总共安装了两次），但在我第一次设置我的工作区后不久，从我看到启动屏幕开始需要大约 2 分钟才能启动直到加载透视图。我已经能够通过关闭所有文件并删除所有项目（仅作为测试）来缩短这个疯狂的启动时间，但加载仍然需要大约 30 秒。

显然，不建立任何项目不是一种选择，但即使是这样，根据我过去的经验，30 秒的启动时间仍然太长而且对于这个软件来说是不正常的。

我在其他 Windows 7 机器（32 位和 64 位）上使用过 Aptana，从未遇到过这样的问题。如何解决此问题以找出导致这些长启动时间的原因并修复它？

最大7

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:20:49.077

Aptana 总是需要很长时间才能加载。这就是我停止使用它的原因。您可以将 Eclipse 与 Aptana 插件一起使用，这对我来说更快但更丑陋。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-12T06:05:27.233

我知道我迟到了。

将 Aptana Studio 根文件夹中的 Aptanastudio.ini 文件编辑为类似这样的内容

> -vmargs
> 
> -Xmx1024M
> 
> -Xms512M
> 
> -Xverify：无
> 
> -XX:+UseParallelGC
> 
> -XX:+积极选择
> 
> -XX:+UseFastAccessorMethods
> 
> -XX:编译阈值=100
> 
> -Djava.awt.headless=true
> 
> -Djava.awt.nativeDoubleBuffering=true

[资源](http://www.katasonov.com/2009/03/aptana-studio-optimization/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-16T15:28:54.587

以我的经验，这种事情是由于没有足够的可用内存造成的。您的 32 位 Windows 将无法使用全部 4 GB，并且可用于 aptana 的内存将取决于正在运行的其他内容，包括您自己没有启动的后台进程。

右键单击任务栏（屏幕底部），选择“任务管理器”，然后查看窗口状态栏上的“提交费用”显示。如果第一个数字超过 3G 或 3000M，我会说你有内存问题。免责声明：我不是 Windows 专家，YMMV。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T23:25:41.013

我刚刚学会了如何在 Aptana 中禁用 git 附件。我的工作台现在加载不到 10 秒（而不是大约 30 秒）。

我在项目资源管理器面板中单击了齿轮旁边的向下箭头，然后我找到了一个包含“分离”一词的选项。在我的情况下，这会有所帮助，因为我没有在我正在处理项目的机器上使用 git。

# iphone - UITableViewCell 分配问题 - 单元格不为零

> ID：11042129
> 
> 赞同：3
> 
> 时间：2012-06-14T22:17:50.657
> 
> 标签：iphone, ios, uitableview

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell2";
    UILabel *titleLabel;
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        titleLabel = [[UILabel alloc]initWithFrame:CGRectMake(5, 5, 300, 20)];
        [cell.contentView addSubview:titleLabel];
        titleLabel.tag = 0011;
    }
    else 
    {
        titleLabel = (UILabel *)[cell.contentView viewWithTag:0011];
    }

    // Configure the cell...
    NSMutableString *title = [NSMutableString stringWithString:@"Customer: "];
    [title appendString:[titles objectAtIndex:indexPath.row]];
    titleLabel.text = title.copy;
    titleLabel.backgroundColor = [UIColor clearColor];
    titleLabel.textAlignment = UITextAlignmentLeft;
    titleLabel.font = [UIFont systemFontOfSize:18.0]; 
```

尽管我的单元格已生成，但我的单元格永远不会为零，而我的 titleLabel 从未被分配。我看不出这是怎么可能的。if 状态永远不会为真，这应该是第一次生成的单元格，但是我的单元格是按原样创建的，没有我的 titleLabel

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T22:34:26.467

听起来好像您正在使用 iOS 5（或更高版本）和 Storyboards。

在 iOS 5（或更高版本）下，如果您使用 Storyboard 和 TableView 控制器，则该`dequeueReusableCellWithIdentifier:`方法保证返回一个单元格（前提是您已在 Storyboard 中定义了具有给定标识符的单元格）。

如果是这种情况，解决方案是在情节提要中完全创建自定义表格单元格。转到 Storyboard 中的表视图，选择`Content:Dynamic Prototypes`并制作`Prototype Cells:1`. 现在以图形方式布局您的单元格，使其完全符合您的要求。现在单击单元格并设置`Identifier:Cell2`. 您现在不需要在运行时创建标签或检查它是否为 nil。完整的详细信息，包括如何引用您设置的标签，请参阅 iOS 5 发行说明（下面的链接）或网络上的许多教程。

请参阅 iOS 5 发行说明部分[配置表格视图](https://developer.apple.com/library/ios/#releasenotes/Miscellaneous/RN-AdoptingStoryboards/_index.html)

# c# - 我应该如何为我的 Web 服务 API 生成文档？

> ID：11042131
> 
> 赞同：4
> 
> 时间：2012-06-14T22:18:32.450
> 
> 标签：c#, asp.net, .net, web-services, documentation

我正在通过 Web 服务 ( `.asmx`) 公开我的 API。目前，唯一可用的是默认的 WSDL 帮助页面。虽然这非常有帮助，但如果我的目标受众需要更多的帮助，这还不够。例如，假设我想包含一些示例，但仍需要自动生成方法签名等。

是否有一个好的半自动化（自动方法签名但仍然能够提供示例）来实现这一点？我正在寻找这样的东西[，](http://ivaynberg.github.com/select2/)它也是可维护的。理想情况下，可以帮助我修改默认 WSDL（我真的很喜欢那个页面）的东西会很棒。*我所需要的只是让文档在部署时与服务一起自动可用。*

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T23:03:41.727

也许最简单的方法是使用 XML 文档注释。

[XML 文档注释](http://msdn.microsoft.com/en-us/library/b2s063f7.aspx)

使用这些注释，您可以自动生成 HTML 文档。例如使用[Sandcastle](http://sandcastle.codeplex.com/)或[NDoc3](http://sourceforge.net/projects/ndoc3/)：

[构建 Visual Studio 项目时构建 Sandcastle 文档](https://stackoverflow.com/questions/7882746/build-sandcastle-documentation-when-building-visual-studio-project)

毕竟，您可以将 html 文档自动保存到服务附近的共享位置，并且可以使用浏览器轻松导航到那里。所以，一切都可能接近 - wsdl + html 文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T22:58:50.710

这相当容易。如果你用三重 /// 注释装饰你所有的类和方法，那么你可以从中生成文档。看这里：

[http://msdn.microsoft.com/en-us/library/dd233217.aspx](http://msdn.microsoft.com/en-us/library/dd233217.aspx)

[http://www.developerfusion.com/article/84436/documentation-made-easy-with-c-and-xml/](http://www.developerfusion.com/article/84436/documentation-made-easy-with-c-and-xml/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-21T22:13:15.930

同意其他海报，但是我使用 NDoc3 取得了很大的成功。它比 Sandcastle 快很多（这也是一个非常好的工具）。NDoc3 将创建 .chm、.doc 和 .html 输出。

NDoc3 和 Sandcastle 都生成 MSDN 样式的文档。

NDoc3 - [http://sourceforge.net/projects/ndoc3/](http://sourceforge.net/projects/ndoc3/)

# c++ - 打破工厂模式的循环依赖

> ID：11042136
> 
> 赞同：0
> 
> 时间：2012-06-14T22:19:10.343
> 
> 标签：c++, factory-pattern, forward-declaration, circular-dependency

我正在尝试开发游戏，但在管理游戏对象的创建和销毁时遇到问题，并且有几个人建议尝试使用工厂模式。我去阅读了工厂模式，我正在尝试实施它，但遇到了障碍。

```
// inside of EnemyGuy.h
#pragma once
#include "Entity.h"
#include "EntityFactory.h"
class EnemyGuy: public Entity {
public:
    void update();
}

//inside of EnemyGuy.cpp
#include "EnemyGuy.h"
void EnemyGuy::update(){
    if (you see player)
        Entity* shotFired = EntityFactory::create("bullet", params);
}

// inside of EntityFactory.h
#pragma once
class Entity
#include "Bullet.h"
#include "EnemyGuy.h"
class EntityFactory{
public:
    static Entity* create(const std::string passed, params);
}

// inside of EntityFactory.cpp
#include "EntityFactory.h"
 static Entity* create(const std::string passed, params){
    if (passed == "bullet")
        return new Bullet(params);
    if (passed == "enemyguy")
        return new EnemyGuy(params);
 } 
```

我收到一个循环依赖错误，因为工厂需要包含 EnemyGuy 以便它可以创建它的实例，然后 EnemyGuy 需要包含工厂以便它可以调用 create() 方法。

通常你会用前向声明打破循环依赖，但在这种情况下，前向声明不会这样做。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T22:22:16.410

工厂头文件不需要包含它。将声明和实现分开，你会没事的。

实体工厂.h：

```
class Entity

class EntityFactory{ public:
     static Entity* create(const std::string passed, params);
} 
```

实体工厂.cpp：

```
#include "EntityFactory.h"
#include "Bullet.h"
#include "EnemyGuy.h"

 Entity* EntityFactory::create(const std::string passed, params){
     if (passed == "bullet")
         return new Bullet(params);
     if (passed == "enemyguy")
         return new EnemyGuy(params);
 } 
```

这个想法是工厂头文件和声明**永远不会**改变，无论您添加多少新选项。

# java - 居中 JFrame 不适用于子子类

> ID：11042137
> 
> 赞同：2
> 
> 时间：2012-06-14T22:19:18.860
> 
> 标签：java, swing, jframe, subclass, center

对于我项目中每种不同类型的窗口，我创建了一个不同的类。例如，我的主窗口是 MainWindow 的一个实例。项目设置窗口是 ProjectSettingsWindow 的一个实例。我还创建了一个名为 CustomWindow 的类。我会把它命名为 Window，但那已经被采用了。嘎。这个类包含我所有的窗口共享的东西，比如初始化方法和 JPanel。它扩展了 JFrame，我所有的其他窗口类都扩展了 CustomWindow。

对不起，这太长了。但这是 SSCCE：（这是我在这里的第一个问题，请耐心等待）

主类：

```
package beat;

public class Main {
    public static StartWindow start = new StartWindow();

    public static void main(String[] args) {
        start.init(300, 100, "choices, choices");
        start.display();
    }

    public static void close() {
        //does other things
        System.exit(0);
    }
} 
```

开始窗口类：

```
package beat;
import javax.swing.*;

public class StartWindow extends CustomWindow {
    public StartWindow() {
        eventHandler = new StartWindowEvents(this);
    }

    JButton newButton = new JButton();
    JButton loadButton = new JButton();

    //initialize
    public void initBranch() {
        initButtons();
            //other classes have a few groups to initialize, not just one   
}

    private void initButtons() {
        newButton.setText("new project");
        newButton.setSize(120,49);
        newButton.setLocation(10,10);
        newButton.addActionListener(eventHandler);

        loadButton.setText("load project");
        loadButton.setSize(120,49);
        loadButton.setLocation(164,10);
        loadButton.addActionListener(eventHandler);

        content.add(newButton);
        content.add(loadButton);
    }
} 
```

StartWindowEvents 类：

```
package beat;
import javax.swing.*;
import java.awt.event.*;
import java.io.*;

public class StartWindowEvents extends CustomWindowEvents {
    public StartWindowEvents(CustomWindow w) {
        super(w);
    }

    //if a button is pressed
    public void actionPerformed(ActionEvent e) {
        if (e.getSource() == Main.start.newButton)
            newButton();
        else if (e.getSource() == Main.start.loadButton)
            loadButton();
    }

    private void newButton(){
        //do the newButton stuff
    }
    private void loadButton() {
        //do the loadButton stuff
    }
} 
```

自定义窗口类：

```
package beat;
import javax.swing.*;

public class CustomWindow extends JFrame {
    JPanel content = new JPanel(null);
    CustomWindowEvents eventHandler;

    public void display() {
        //whatever you want to refresh, usually nothing
        setVisible(true);
    }

    public void init(int width, int height, String title) {
        pack();
        setVisible(false);
        setResizable(false);
        setLocationRelativeTo(null); //center on screen, but it doesnt work
        setDefaultCloseOperation(DO_NOTHING_ON_CLOSE);
        setContentPane(content);
        addWindowListener(eventHandler);

        setSize(width, height);
        setTitle(title);

        initBranch();
    }
    public void initBranch() {
        //whatever you want to do after the window is initialized, usually  branch to groups of JComponents
    }
} 
```

自定义窗口事件类：

```
package beat;
import java.awt.event.*;
import javax.swing.JOptionPane;

public class CustomWindowEvents extends WindowAdapter implements ActionListener {
    CustomWindow source;

    public CustomWindowEvents(CustomWindow w) {
        source = w;
    }

    public void actionPerformed(ActionEvent e) {}

    public void windowClosing(WindowEvent e) {
        int i = JOptionPane.showConfirmDialog(source,
                "DONT DO IT",
                "are you sure?",
                JOptionPane.YES_NO_OPTION);
        if (i == JOptionPane.YES_OPTION)
            doClose();
    }

    public void doClose() {
        //whatever you want to do after the window is confirmed closed, usually exit the program    
    Main.close();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T22:22:08.283

*   如果您在调用 Window`setLocationRelativeTo(null)`之后调用`pack()`，它将使 Window 居中。
*   你确定你的`init()`方法在所有 Window 对象上都被调用了吗？你`pack()`先打电话？
*   您的 GUI 类似乎是为创建 JFrame 而设计的，我认为这是一个错误。你最好让他们去创建 JPanel，因为这会给你的程序带来更大的灵活性。通过这种方式，您可以在 JFrame、JApplet 或 JDialog 中使用您的 GUI，或者作为 CardLayout 中的“卡片”，或者作为较大 GUI 中的子 JPanel，...
*   避免使用执行大量窗口交换的 GUI，因为这对用户不是很友好。
*   我怀疑可能过度使用继承。一方面，您很少需要扩展 JFrame，因为我们很少需要覆盖 JFrame 的方法之一。
*   **编辑 1**你被你的调用搞砸了，`setSize(...)`因为它使`pack()`. 您几乎不应该调用`setSize(...)`，而是让组件使用`pack()`.

**编辑 2**
例如，

```
public void init(int width, int height, String title) {
  // !! pack();
  setVisible(false);
  setResizable(false);
  // !! setLocationRelativeTo(null); // center on screen, but it doesnt work
  setDefaultCloseOperation(DO_NOTHING_ON_CLOSE);
  setContentPane(content);
  addWindowListener(eventHandler);

  // !! setSize(width, height);
  setPreferredSize(new Dimension(width, height)); // !!
  pack(); // !!
  setLocationRelativeTo(null); // !!
  setTitle(title);

  initBranch();
} 
```

如果你能帮忙，你甚至不应该打电话`setPreferredSize(...)`（kleopatra 肯定会为这段代码叮嘱我），但再次让组件自己调整大小。

# mysql - mysqli 行大小太大

> ID：11042139
> 
> 赞同：1
> 
> 时间：2012-06-14T22:19:31.657
> 
> 标签：mysql, xml, mysqli, innodb

我正在尝试将数据插入到使用 innodb 存储引擎的 mysql 表中，并收到此错误：

```
Mysqli statement execute error : Row size too large. The maximum row size for the used table type, not counting BLOBs, is 8126\. You have to change some columns to TEXT or BLOBs 
```

我理解错误，但我的表格几乎只由 text 和 mediumtext 列组成。基本上，我正在尝试存储来自 Web 服务的一组可变长度的 xml 响应。我能够保存这些响应（请求在批处理中按顺序发生），直到我到达 col14，其中响应的插入给出了上述错误

如果我不能让它工作，我的备份想法就是将 xml 保存在服务器上并将文件位置放在数据库中。

我已经包含了创建表代码

```
CREATE TABLE IF NOT EXISTS `qb_results` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `col1` varchar(32) COLLATE utf8_unicode_ci DEFAULT NULL,
  `col2` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
  `col3` text COLLATE utf8_unicode_ci,
  `col4` text COLLATE utf8_unicode_ci,
  `col5` text COLLATE utf8_unicode_ci,
  `col6` text COLLATE utf8_unicode_ci,
  `col7` mediumtext COLLATE utf8_unicode_ci,
  `col8` mediumtext COLLATE utf8_unicode_ci,
  `col9` mediumtext COLLATE utf8_unicode_ci,
  `col10` mediumtext COLLATE utf8_unicode_ci,
  `col11` mediumtext COLLATE utf8_unicode_ci,
  `col12` mediumtext COLLATE utf8_unicode_ci,
  `col13` mediumtext COLLATE utf8_unicode_ci,
  `col14` mediumtext COLLATE utf8_unicode_ci,
  `col15` mediumtext COLLATE utf8_unicode_ci,
  `col16` mediumtext COLLATE utf8_unicode_ci,
  `col17` mediumtext COLLATE utf8_unicode_ci,
  `col18` mediumtext COLLATE utf8_unicode_ci,
  `updated_time` datetime DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=61 ; 
```

编辑 - 将列更改为编号，因为它们是特定于业务的，并且认为包含其实际列名没有必要或相关。规范化实际上会解决问题，但仍然不能解释给定上下文的错误（错误说使用文本列，这些列已经在使用）

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-07-09T09:50:45.270

我也有同样的问题。执行以下操作：设置 ENGINE=MyISAM。此外，如果您的脚本很庞大，您可能需要更改脚本的执行时间。在这种情况下，打开 PHP 的配置文件（windows 的 php.ini）并设置

```
max_execution_time=150 //(suppose) you can set it whatever you feel right. 
```

# iphone - [__NSCFNumber isEqualToString:]: 无法识别的选择器发送到实例

> ID：11042140
> 
> 赞同：2
> 
> 时间：2012-06-14T22:19:33.730
> 
> 标签：iphone, cocoa-touch

我正在尝试在用户接受位置共享后显示视图。这是代码：

```
-(void) locationManager:(CLLocationManager *)manager didChangeAuthorizationStatus:(CLAuthorizationStatus)status {
    if (status == kCLAuthorizationStatusDenied) {
        NSLog(@"Denied");
    }
    else if (status == kCLAuthorizationStatusAuthorized) {
        NSLog(@"Accepted!");
        AlertViewController *aViewController = [[AlertViewController alloc] initWithNibName:@"AlertViewController" bundle:nil];
        aViewController.view.frame = CGRectMake(0, 0, 320, 460);
        aViewController.view.backgroundColor = [UIColor colorWithWhite:0 alpha:0.5];
        AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
        [appDelegate.window addSubview:[aViewController view]];
    }
} 
```

但是我`*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[__NSCFNumber isEqualToString:]: unrecognized selector sent to instance 0xee6fc90'`在线上遇到错误`aViewController.view.frame = ...`

我放了断点并验证了`aViewController`它不在语句`0x00000`之后。`alloc`我似乎无法弄清楚问题是什么。请提出解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T04:44:09.587

我怀疑 xib 文件或 AlertViewController 的视图初始化例程（即 viewDidLoad 或 loadView）中存在问题。我可以推断设置框架的行崩溃的唯一方法是这是您第一次访问视图属性，并且视图是延迟加载的。

我怀疑如果你更换

```
aViewController.view.frame = CGRectMake(0, 0, 320, 460); 
```

和

```
UIView *aVCView = aViewController.view;
aVCView.frame = CGRectMake(0, 0, 320, 460); 
```

那么你会在第一行看到崩溃，而不是第二行。

为了进一步调试，我会在 AlertViewController 的 viewDidLoad 或类似中使用中断。并仔细检查 xib 中的所有内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T04:36:36.723

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T00:06:35.223

在您的条件语句中，类型是`status`什么？您可能使用了错误的运算符或方法。例如，如果`status`是`int`、`bool`或 a `float`，您将使用`==`. 如果它是一个字符串，你会使用`isEqualToString`，如果它是一个通用对象，你可以简单地使用`isEqual:`。该功能还有专门的版本，`isEqual:`例如`isEqualToArray`.

希望这可以帮助！

# qt - 在 Qt 上更新程序后重新启动应用程序

> ID：11042141
> 
> 赞同：3
> 
> 时间：2012-06-14T22:19:38.860
> 
> 标签：qt, exit, restart

成功更新后，我使用以下逻辑重新启动应用程序：

```
 QString appName = QApplication::instance()->applicationName();
   QString appDir =  QApplication::instance()->applicationFilePath();
   QStringList arguments = QApplication::instance()->arguments();

   QProcess::startDetached( appName, arguments, appDir );

   //quit the current application
   QApplication::instance()->exit(); 
```

它启动新应用程序并退出这两个应用程序。从 Qt 中，我了解到即使退出调用进程后新进程也会继续存在。我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T01:38:37.740

以下是问题：

1.  您`appName`不保证不为空，也不保证与可执行文件的名称相同。在任何情况下，`startDetached()`都需要可执行文件的完整路径。

2.  你`appDir`不是 - 它是可执行文件的完整文件路径。

3.  最后一个参数`startDetached()`是工作目录。你可以简单地使用`QDir::currentPath()`它。

4.  您调用的所有 QApplication 方法都是静态的。您不需要使用`instance()`.

要更新您的应用程序，您可以：

1.  将当前运行的可执行文件重命名为其他名称。

2.  以原始名称写入新的可执行文件。

3.  开始如下。

只要您的应用程序具有足够的管理权限，这在 Windows 和 Unices 上都可以工作——但通常它不会，因此您需要一个具有足够访问权限的单独更新程序。更新程序需要通知应用程序在用户方便时自行重启。在用户忙于使用应用程序时强制重启应用程序可能不是很好。

下面是一个工作示例：

```
#include <QtWidgets>

void start() {
    auto app = QCoreApplication::applicationFilePath();
    auto arguments = QCoreApplication::arguments();
    auto pwd = QDir::currentPath();
    qDebug() << app << arguments << pwd;
    QProcess::startDetached(app, arguments, pwd);
    QCoreApplication::exit();
}

int main(int argc, char **argv) {
    QApplication app{argc, argv};
    QPushButton button{QStringLiteral("Spawn")};
    Starter starter;
    QObject::connect(&button, &QPushButton::clicked, &start);
    button.show();
    app.exec();
} 
```

# c++ - 完全重建后奇怪的段错误消失

> ID：11042150
> 
> 赞同：0
> 
> 时间：2012-06-14T22:20:23.837
> 
> 标签：c++, g++, segmentation-fault

我不止一次在使用 g++ 构建代码时遇到以下问题：

一切似乎都很好。你编译，运行然后繁荣 - 一个段错误突然出现在你身上。您开始查看代码，找不到任何东西，执行 make clean && make 并且问题消失了。

我已经看到这种情况发生在不同的 g++ 版本、不同的机器、不同的内核上。

为什么会这样？有没有办法防止它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T23:29:55.863

如果更改了头文件，那么 Makefile 中没有机制来确定哪些源文件包含这些，并且需要重新编译。您可能遇到的一个问题是，如果头文件`A.h`定义了一个类`A`，并且您添加或删除或重新排列 的成员`A`，则该类的大小会发生变化。然而，旧的大小仍在某些源文件中使用，因此当您在堆栈上或在堆。`make clean`强制传播有关类的新信息，因为所有源文件都必须重新编译。

如果您对头文件进行了重大更改，那么完全重建可能是最安全的。

# erlang - Erlang code_change 和本地函数调用

> ID：11042151
> 
> 赞同：3
> 
> 时间：2012-06-14T22:20:24.243
> 
> 标签：erlang, gen-server, hotswap

我不确定如何在模块中调用*本地*函数，以便在代码更改后使用最新版本的代码。请参见以下示例：

```
1  -module(test).
2
3  -export([start/0, call/1]).
4  -export([loop/0, add/1]).
5
6  start() ->
7      register(foo, spawn(test, loop, [])).
8
9  call(X) ->
10     foo ! {self(), X},
11     receive
12         Y -> Y
13 end.
14
15 loop() ->
16     receive
17         {Pid, Z} -> Pid ! add(Z)
18     end,
19     loop().
20
21 add(N) ->
22     N + 1. 
```

将要更改的功能是`add/1`。为了使用最新版本的函数，`add/1`（第 17 行）的调用应该是*完全限定的函数调用* `{Pid, Z} -> Pid ! ?MODULE:add(Z)`。当我尝试它时，我得到了这个：

```
1> c(test). 
{ok,test}
2> test:start(). 
true
3> test:call(1).
2 
```

第 22 行更改为`N + 2`

```
4> c(test).     
{ok,test}
5> test:call(1).
3 
```

第 22 行再次更改为`N + 3`

```
6> c(test).     
{ok,test}
7> test:call(1).
** exception error: bad argument
    in function  test:call/1 (test.erl, line 10) 
```

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T22:28:28.300

我相信您最终需要调用函数的完全限定版本`loop/0`而不是`add/1`函数，以便加载和使用新模块。代码加载机制准备一次处理一个模块的两个运行版本，您的示例`N+3`是模块的*第三次*加载——第一个版本被强制删除。

试试这个循环：

```
15 loop() ->
16     receive
17         {Pid, Z} -> Pid ! add(Z)
18     end,
19     ?MODULE:loop(). 
```

我已将其更改为在下次执行`loop/0`.

我相信更常见的是使用`reload`直接显式调用主循环的消息或类似内容，以避免在每次请求时不断重新加载模块的开销。

# c# - 使用 localhost、127.0.0.1、计算机名和静态 ip 的区别

> ID：11042153
> 
> 赞同：0
> 
> 时间：2012-06-14T22:20:29.700
> 
> 标签：c#, asp.net, web-services, sqlclr

我想消费一个在本地机器上运行的web服务（不要问我为什么，我没有做web服务，只是需要使用它），我想知道有什么不同（技术可能还有性能）通过 localhost、127.0.0.1、计算机名称和计算机静态 IP 引用它？这很关键，因为我几乎每 30 秒都需要从数据库内的表触发器中使用 Web 服务（同样，不要问我为什么，在这种情况下我只能这样做）。Web 服务是用 ASP.NET 编写的，从数据库中访问它的对象是 C#.NET 中的 CLR 用户定义函数

编辑：对不起，30 秒的估计很差。这是一个交易表，其中近百家商店的销售额在线保存。它的时间段是可变的，从交易之间的几分钟到几毫秒。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T22:25:24.400

与“实时”相比，30 秒确实很长，因此您使用的 IP 没有任何区别，并且对您的应用程序是透明的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T22:23:03.323

没有真正的性能影响，但最快的应该是 127.0.0.1 和静态 IP，因为无需在主机文件或 DNS 上进行查找。既然你有一个 30 秒的窗口，那真的没关系。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T22:25:03.060

它们是有区别的。

虽然所有四个权限名称都会导致与同一主机建立 TCP 连接，但区别在于 HTTP：HTTP 具有浏览器或客户端发送的“Host:”标头，此标头的内容是 URI 的主机名部分权威名称。

Host 标头很重要，因为它是像 IIS 这样的网络服务器如何将请求路由到正确的网站，即使多个网站共享一个 IP 地址（HTTP1.1 有 Host 标头，HTTP1.0 没有，所以早在 1990 年代中期，每个网站都需要自己的 IP 地址）。

如果您的 Web 服务在使用 Host 标头的服务器上运行，或者它本身使用 Host 标头，那么这很重要。

性能方面的差异可以忽略不计，因为“localhost”和“%computername%”应该永久存储在您的 DNS 客户端的缓存中，但避免在应用程序中硬编码主机名是常识。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T22:30:23.993

这取决于 Web 服务的暴露位置（监听）。

`localhost`并将`127.0.0.1`在内部 localhost 界面上与其联系。其他两种方法将在特定网卡上查找服务。

从性能的角度来看，使用 IP 地址要快一点，因为它避免了 DNS 查找，但是在这种情况下，DNS 查找将在本地解析并且几乎是即时的。（30 秒是相对无限的，所以这不能成为瓶颈。）

从维护的角度来看，静态 IP 地址最有可能咬你。

获胜者：`127.0.0.1`或`localhost`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T22:25:04.990

没有真正的区别，但是它们都将转换为 127.0.0.1，因此您不妨先提供它。

如果您检查您的主机文件，您可以看到 localhost 直接转换为 127.0.0.1

# android - 从另一个应用程序启动 firefox mobile

> ID：11042155
> 
> 赞同：3
> 
> 时间：2012-06-14T22:20:36.830
> 
> 标签：android, firefox, fennec

我需要在我的应用程序中启动 firefox mobile。我目前正在这样做：

```
String url = "http://www.google.it";
Intent intent = new Intent(Intent.ACTION_MAIN, null);
intent.addCategory(Intent.CATEGORY_LAUNCHER);
intent.setComponent(new ComponentName("org.mozilla.firefox_beta",
    "org.mozilla.firefox_beta.App"));
intent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
intent.setData(Uri.parse(url));
startActivity(intent); 
```

如果 Firefox 没有运行，它就可以工作。如果它正在运行（在后台暂停），则此代码只需启动 firefox 而不加载我在代码中指定的 url。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T22:10:48.643

这对我有用：

```
adb shell am start -a android.intent.action.VIEW -n org.mozilla.firefox_beta/.App -d 'http://www.mozilla.org' 
```

尝试更改您的：

```
Intent intent = new Intent(Intent.ACTION_MAIN, null); 
```

至

```
Intent intent = new Intent(Intent.ACTION_VIEW, null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T22:25:01.780

尝试：

```
String url = "http://example.com/";
Intent intent = new Intent(Intent.ACTION_MAIN, null);
intent.addCategory(Intent.CATEGORY_LAUNCHER);
intent.setComponent(new ComponentName("org.mozilla.firefox", "org.mozilla.firefox.App"));
intent.setAction("org.mozilla.gecko.BOOKMARK");
Bundle b = new Bundle();
b.putBoolean("new_window", true);
intent.putExtras(b);
intent.setData(Uri.parse(url)); 
```

我不确定这是否适用于 Firefox 应用程序，但可能会有类似的东西。

# javascript - 如何在 jQuery 小部件中使用动态属性值

> ID：11042159
> 
> 赞同：1
> 
> 时间：2012-06-14T22:20:55.833
> 
> 标签：javascript, jquery, html, jquery-ui, global-object

我有一个 javascript，只要我从下拉菜单中选择一个选项，它就会返回一个值。

```
 $(document).ready(function() {
        function calculateVals() { 
            //dropdown menus      
             var valuestart = $("select[name='timestart']").val();
             var valuestop = $("select[name='timestop']").val();

             //create date format          
             var timeStart = new Date("01/01/2007 " + valuestart).getHours();
             var timeEnd = new Date("01/01/2007 " + valuestop).getHours();

             var hourDiff = timeEnd - timeStart;                         

             return hourDiff;  

        }
        $("select").change(calculateVals);
        calculateVals();
    }); 
```

上面的脚本返回一个数字，我需要将其添加到下面的 jquery 插件中。我需要将其添加到`max`选项中，但出现错误`calculateVal is not defined`。

```
$(function(){
    $("#slider").slider({
        range: "min",
        value:  8,
        min: 1,
        max: calculateVals(), //my attempt
        step: 1,
        slide: function(event, ui) {
            $("#amount").text(ui.value);
        },
         stop: function(event, ui) {
            $("#notifications").val(ui.value);
        }
    });
    $("#notifications").val( $("#slider").slider("value") );
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T22:23:23.183

尝试定义`function`就绪块的外侧：

```
function calculateVals() { 

             //code here...

             return someResult;                                          
}

$(document).ready(function() {
    $("select").change(calculateVals);
    calculateVals();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T22:24:38.340

将函数移动到全局范围：

```
function calculateVals() {       
    //code here...
    return someResult;                                           
}

$(document).ready(function() {
        $("select").change(calculateVals);
    calculateVals();
}); 
```

更好的是，当你滥用它时，了解 DOM 就绪意味着什么。

*   您应该只有一个准备好的处理程序。
*   只有与 DOM 元素相关的代码应该在那里。

**更新：**

您可以稍后更改滑块最大值：

```
$( "#slider").slider("option", "max", calculateVals()); 
```

# calendar - 编写跨平台兼容的日历事件？

> ID：11042161
> 
> 赞同：1
> 
> 时间：2012-06-14T22:21:13.947
> 
> 标签：calendar, compatibility

我希望向我的网站添加功能，用户可以在其中将事件添加到他们的日历中。这引发了兼容性问题，因为最终用户可以使用许多潜在的日历选项（Outlook、Google、iCal 等等）。使问题更加混乱的是，日历既可以是本地软件，也可以是在线云服务。

是否有一个通用的或跨平台的规范我可以用来发布日历事件，还是我坚持写几个不同的规范并让用户选择他们需要下载的一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-22T18:28:31.520

您可能正在寻找[iCalendar 格式](http://en.wikipedia.org/wiki/ICalendar)。

> iCalendar 被大量产品使用和支持，包括 Google Calendar、Apple iCal、GoDaddy Online Group Calendar、IBM Lotus Notes、Yahoo! Calendar、Evolution（软件）、Mozilla Thunderbird 和 SeaMonkey 的 Lightning 扩展，部分由 Microsoft Outlook 提供。

# lucene - 在 ElasticSearch 中使用高亮与 _source:false

> ID：11042162
> 
> 赞同：2
> 
> 时间：2012-06-14T22:21:17.440
> 
> 标签：lucene, highlight, elasticsearch

只是想知道。是否可以在 _source = false 的索引上突出显示 ElasticSearch 中的文本？

我的意思是我知道如果 ES 没有他不能做高亮的文档，但是有没有办法只使用 ES 作为高亮引擎而不是带有高亮的完整搜索引擎？（我在高亮查询中提供了完整的文档）

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-22T21:40:36.613

我不相信这是可能的。

但是，您可以在搜索查询和文档上使用 _analyze，然后比较标记以在代码中突出显示。

例如：

```
curl -XGET 'localhost:9200/test/_analyze?analyzer=snowball' -d 'some search query keywords' 
```

{"tokens":[{"token":"some","start_offset":0,"end_offset":4,"type":"","position":1},{"token":"search", "start_offset":5,"end_offset":11,"type":"","position":2},{"token":"query","start_offset":12,"end_offset":17,"type" :"","position":3},{"token":"keyword","start_offset":18,"end_offset":26,"type":"","position":4}]}

curl -XGET 'localhost:9200/test/_analyze?analyzer=snowball' -d '$document_text'

{“令牌”：..}

然后在文档中查找那些令牌匹配项，偏移量应该为您提供文档中正确的突出显示位置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-09-18T08:10:04.887

```
{
  "query": {
    "query_string": {
      "query": "**",
      "fields["
      sometext "]}},"
      highlight {
        "pre_tags": ["<em>"],
        "post_tags[</em>"],
      "order": "score",
      "require_field_match": true,
      "fields": {
        "sometext": {
          "fragment_size": 180,
          "number_of_fragments": 1
        }
      }
    }
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-22T15:15:35.827

如果默认情况下未停用源，您可以：

```
{
    "_source" :  ["_id"],
    "query": {
        "match" : {
            "attachment.content" : "Setup"
        }
    },
    "highlight": {
        "fields" : {
            "attachment.content" : {}
        }
    }
} 
```

你必须在`_score`. 它仍然返回有关它找到的文档的每个“元数据”：

```
{
    "took": 4,
    "timed_out": false,
    "_shards": {
        "total": 5,
        "successful": 5,
        "skipped": 0,
        "failed": 0
    },
    "hits": {
        "total": 1,
        "max_score": 0.2919385,
        "hits": [
            {
                "_index": "test",
                "_type": "_doc",
                "_id": "xpto",
                "_score": 0.2919385,
                "_source": {},
                "highlight": {
                    "attachment.content": [
                        "<em>Setup</em> the [GenericCommand.properties] file\n\nThe commands that ought to be recognized have to be defined"
                    ]
                }
            }
        ]
    }
} 
```

# ms-office - Office Starter 是否包含 Microsoft.Office.Interop 的 DLL？

> ID：11042166
> 
> 赞同：2
> 
> 时间：2012-06-14T22:22:00.887
> 
> 标签：ms-office, office-interop

我想使用 Microsoft.Office.Interop.Excel 从 XLS 文件中提取一些数据。我安装了 Visual Studio 2010 和 Office 开发人员工具。但是，我在`var app = new Application();`程序运行时收到 COMException 错误。

> 由于以下错误，检索具有 CLSID {00024500-0000-0000-C000-000000000046} 的组件的 COM 类工厂失败：80040154 未注册类（HRESULT 异常：0x80040154 (REGDB_E_CLASSNOTREG)）。

我安装了 Office Starter 2010。除非我有完整版的office，否则我不能使用互操作库吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-07T15:08:46.753

> Microsoft Office Starter 2010 无法运行您使用 Visual Studio 2010 创建的 Office 解决方案。 [http://msdn.microsoft.com/en-us/library/bb608617.aspx](http://msdn.microsoft.com/en-us/library/bb608617.aspx)

所以我会说你的问题的答案是肯定的。现在我意识到你可能已经解决了。但以防万一其他人遇到这个问题。:-)

# android - ImageButton setBackgroundDrawable 九个补丁不会缩放

> ID：11042168
> 
> 赞同：0
> 
> 时间：2012-06-14T22:22:10.153
> 
> 标签：android, imagebutton, nine-patch

![纽扣](../Images/0ddc132b555092082ec7aaeeb0441b64.png)

这是 2 个屏幕截图，它们的大小不同，因为左边来自模拟器，右边来自设备。应该从设备中取出两者，对此感到抱歉。

两者都使用相同的drawable。

左：布局中设置的背景：

```
 <ImageButton
        android:id="@+id/backFromOldCurves"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:background="@drawable/backunpressed"
        android:paddingLeft="10sp"
        android:paddingRight="10sp"
        android:src="@drawable/navigationpreviousitem" /> 
```

右：在 onTouch on ACTION_UP 中动态设置的背景：

```
public boolean onTouch(View v, MotionEvent event) {
    if (event.getAction() == MotionEvent.ACTION_DOWN) {
        v.setBackgroundDrawable(getResources().getDrawable(R.drawable.backpressed));

    }
    if (event.getAction() == MotionEvent.ACTION_UP) {
        v.setBackgroundDrawable(getResources().getDrawable(R.drawable.backunpressed));
        onClick(v);

    }

    return true;

} 
```

在 setBackgroundDrawable 中将 Drawable 转换为 NinePatchDrawable 不起作用。我怎么能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T12:12:31.520

为什么你不使用

```
v.setBackgroundResource(R.drawable.backpressed); 
```

?

编辑：不要在 onTouch() 中返回 true。返回 false ，当 MotionEvent.ACTOIN_UP 被触发时，您不必调用 onClick() 。

```
public boolean onTouch(final View v, final MotionEvent event) {
    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        v.setBackgroundResource(R.drawable.backpressed);
    case MotionEvent.ACTION_UP:
        v.setBackgroundResource(R.drawable.backunpressed);
    default:
        Thread.sleep(50); // sleep for performance, otherwise you'd get flooded with ACTION_MOVE
    }
    return false; // return false to not consume the event
} 
```

# python - PySide 的 MVVM 模式

> ID：11042172
> 
> 赞同：16
> 
> 时间：2012-06-14T22:22:23.963
> 
> 标签：python, qt, mvvm, pyside, architectural-patterns

我一直在尝试找到一种使用 PySide 实现 MVVM 的方法，但一直没能做到。我认为应该有一种方法可以使用 QItemEditorFactory 从 ViewModels 创建视图，并且可以使用 QDataWidgetMapper 进行数据绑定。

您对如何使用 Qt 和 PySide 实现 MVVM 有任何想法吗？即使 C++ 中有一些资源，我也会尝试将它们翻译成 python。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-04T23:53:43.857

MVVM 是 MVP（Model-View-Presenter）模式的一种特殊化，并不是 WPF 独有的，而是它最初的一部分。我认为您想要获得的是将您的域模型公开为该域的视图的 MVP。

如果您想要 c++ 中的示例，可以查看[此 PDF。](http://www.objectmentor.com/resources/articles/TheHumbleDialogBox.pdf)但是，您可以从下面的 manged c# 中的简短概要中获得它的要点：

```
public class DomainView : IDomainView
{
    private IDomainPresenter domainPresenter = null;

    ///<summary>Constructor</summary>
    public DomainView()
    {
        domainPresenter = new ConcreteDomainPresenter(this);
    }
} 
```

另外，我想知道您可以使用[抽象对象表示法](http://qt-project.org/wiki/JSONListModel) 来制作从模型到视图的可传递泛型（视图模型）。基本上，您需要一个中间函数来标记要序列化的相关部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-08T08:33:54.537

我不知道你想把 MVVM 走多远，但在基本层面上它是 Qt 自带的，而且我已经使用了很长时间。你有一个特定于业务的模型，比如绑定到数据库。然后，您创建特定于视图的视图模型作为代理模型。您可以根据需要堆叠几层。然后你用一个视图来展示它。只要一切设置正确，它就会“正常工作”。现在，如果您想使用模型来配置视图，Qt 不会直接为您提供任何东西。您需要编写一个可以使用视图模型数据为您实例化和设置视图的工厂类。一切都取决于你想走多远，以及它给你带来了什么架构上的好处。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-06-21T03:38:31.463

对我来说，一个明显的答案是 MVVM 适用于 WPF 和其他一些欢迎这种模式的技术，因此您必须找出是否可以将这种模式应用于其他技术。请阅读 wiki 中的 MVVM。

# python - 文件第一行中包含的 unicode 标头

> ID：11042173
> 
> 赞同：1
> 
> 时间：2012-06-14T22:22:24.087
> 
> 标签：python, python-3.x

我正在打印文件的第一行：

```
with open(path,"r",encoding='utf8') as f:
    for i, l in enumerate(f.readlines()):
        print(bytes(l.rstrip(), encoding='utf8')) 
```

我希望输出 b'1' 但我得到的是：

```
b'\xef\xbb\xbf1' 
```

这里有什么问题？

我在 Windows 上，我使用记事本 ++ 保存了我的文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T22:35:03.797

要正确解析 BOM，请使用[utf-8-sig](http://docs.python.org/library/codecs.html?highlight=codecs#module-encodings.utf_8_sig)：

```
with open(path,"r",encoding='utf-8-sig') as f: 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T22:28:49.033

您会看到Notepad++ 放在文件开头以将其标记为 UTF-8 编码的[字节顺序标记 (BOM) 。](http://en.wikipedia.org/wiki/Byte_order_mark#UTF-8)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T22:28:56.333

[BOM](http://en.wikipedia.org/wiki/Byte_order_mark)的 UTF-8 表示是字节序列`0xEF,0xBB,0xBF`。将文本解释为 ISO-8859-1 或 CP1252 的文本编辑器或 Web 浏览器将为此显示字符 ï»¿。

* * *

`UTF-8`不需要BOM in 。您可以配置记事本++。

# java - Android - 当事件发生在不同的类上时收到通知

> ID：11042174
> 
> 赞同：1
> 
> 时间：2012-06-14T22:22:34.103
> 
> 标签：java, android, delegates

我有一个应用程序，上面有地图和一些 POI。我正在使用[http://djsolid.net/blog/android---draw-a-path-array-of-points-in-mapview](http://djsolid.net/blog/android---draw-a-path-array-of-points-in-mapview)来绘制路径。Pin 标记使用[https://github.com/jgilfelt/android-mapviewballoons](https://github.com/jgilfelt/android-mapviewballoons)显示带有信息的弹出气球

我正在尝试找到一种在主要活动中获得通知的方法，一次

```
protected boolean onBalloonTap(int index, OverlayItem item) 
```

发生。一切正常，关于获取点，绘制气球和弹出信息，当点击（气球）时，它会绘制路径。但是我想存储选定的 POI（屏幕上有一些，我想知道用户选择了哪一个），但是由于它发生在不同的类上，不一定是在创建时，我只是使用类似的公共 getter . 创建叠加层的代码是：

```
 Drawable marker = getResources().getDrawable(R.drawable.malls);
    PinsOverlay malls= new PinsOverlay(marker, mapView);
    List<Overlay> mapOverlays= mapView.getOverlays();
    for (int i = 0; i < coordinates.length; i++) {
        long systemTime = Long.valueOf(currentTime);
        long timeSinceReported = (systemTime - Long.valueOf(time[i])) / 60;
        OverlayItem spot = new OverlayItem(coordinates[i], getAddressFromGP(coordinates[i]), getResources()
                .getString(R.string.timeSinceReported)
                + String.valueOf(timeSinceReported)
                + " "
                + getResources().getString(R.string.minutes));
        malls.addOverlay(spot);
    }
    mapOverlays.add(malls); 
```

`coordinates[i]`保存所有标记坐标的数组在哪里，`getAddressFromGP(coordinates[i])`是一种使用 Google API 进行反向地理编码的方法

如何向每个叠加层添加任何类型的委托？可能吗？我查看了这个[http://www.javaworld.com/javatips/jw-javatip10.html](http://www.javaworld.com/javatips/jw-javatip10.html)但无法完全理解这是否是我正在寻找的以及如何实现它。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T23:32:28.543

为了从另一个类通知一个类发生的事情，请使用[**观察者设计模式**](http://en.wikipedia.org/wiki/Observer_pattern)，通常在 java 上称为[**Listener**](http://docs.oracle.com/javase/tutorial/uiswing/events/index.html)，因为它们侦听应该发生的事件。

为了通知主线程从另一个线程发生的事情，最常见的方法是：

1.  [处理程序.post](http://developer.android.com/reference/android/os/Handler.html#post%28java.lang.Runnable%29)
2.  [Activity.runOnUiThread](http://developer.android.com/reference/android/app/Activity.html#runOnUiThread%28java.lang.Runnable%29)
3.  [查看.post](http://developer.android.com/reference/android/view/View.html#post%28java.lang.Runnable%29)
4.  [异步任务](http://developer.android.com/reference/android/os/AsyncTask.html)

# opencv - OpenCV cvLoadImage 函数不适用于显式路径

> ID：11042187
> 
> 赞同：3
> 
> 时间：2012-06-14T22:23:46.583
> 
> 标签：opencv

我是使用 OpenCV 的新手，当我尝试使用 cvLoadImage() 函数加载图像时遇到了问题。

以下代码尝试使用 (1) 工作目录（注释掉的代码行）或 (2) 桌面上文件的显式路径来加载图像“testImg.bmp”。请注意，这两个图像文件完全相同，只是它们位于两个位置（即工作路径不是桌面）。

当我使用第一行（注释掉的行）运行程序时，图像被加载并显示在一个窗口中。但是，当我按照编写的方式运行程序（即使用桌面上图像的显式路径）时，会弹出一个空窗口并弹出错误消息（“无法加载图像”消息）。

非常感谢任何帮助告诉我我在显式路径行上做错了什么，因为将图像文件移动到工作目录通常是不可行/不可取的。

```
#include "stdafx.h"

#include "opencv/cv.h"
#include "opencv/highgui.h"

using namespace std; 

int main(int argc, CHAR* argv[])
{
    //IplImage* img = cvLoadImage("testImg.bmp");
    IplImage* img = cvLoadImage("C:\Users\Jeremy\Desktop\testImg.bmp");

    if(!img)
        std::cerr<<"Unable to load image"<<endl;

    cvNamedWindow("myfirstwindow");
    cvShowImage("myfirstwindow",img);

    cvWaitKey(0);
    cvReleaseImage(&img);
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T22:41:57.070

与opencv无关

`"\"`在 C 字符串中表示下一个字符是转义码，请使用`"\\"`或`"/"`

# pdf - 导出嵌入的 Adob e PDF Reader 文本

> ID：11042188
> 
> 赞同：1
> 
> 时间：2012-06-14T22:23:47.407
> 
> 标签：pdf, text, components, pdf-parsing

我的 Windows 应用程序中有一个嵌入式 Adob​​e PDF 阅读器。当我打开某个 PDF 文件时，我需要手动选择该 PDF 中的文本并将其传输到文本框。我没有对 PDF 嵌入式组件做太多的工作。但我可以看到两个潜在的解决方案。要么在嵌入式组件中找到可以从中获取所选文本的位置，要么使用剪贴板剪切所选文本并将其传输到文本框。

谁能帮我这个？因此，坦率地说，我想知道如何在嵌入式 PDF 阅读器组件中访问文本（选择或未选择）的最佳方式。

# java - 我可以使用 mockito 来匹配具有自动更新时间戳的对象吗？

> ID：11042200
> 
> 赞同：3
> 
> 时间：2012-06-14T22:25:08.420
> 
> 标签：java, unit-testing, time, mocking, mockito

在进行模拟调用之前自动更新时间戳的最佳方法是什么？

这是我要测试的一些虚拟代码：

```
public class ThingWithATimestamp {
    public Long timestamp;
    public String name;

    public ThingWithATimestamp(String name) {
        this.name = name;
    }
}

public class TheClassThatDoesStuff {
    private ThingConnector connector;

    public TheClassThatDoesStuff(ThingConnector connector) {
        this.connector = connector;
    }

    public void updateTheThing(MyThingWithATimestamp thing) {
        thing.timestamp = currentTimestamp();
        connector.update(thing);            
    }
} 
```

这是我要测试的内容：

```
public class TheClassThatDoesStuffTests {
    @Test
    public void canUpdateTheThing() {
        ThingConnector connector = mock(ThingConnector.class);
        TheClassThatDoesStuff doer = new ThisClassThatDoesStuff(connector);

        doer.updateTheThing(new ThingWithATimestamp("the name"));

        verify(connector, times(1)).update(SomeMatcherThatICantFigureOut);
    } 
```

我知道这段代码非常愚蠢，但我认为它准确地描述了我想要验证的内容。我基本上需要一个匹配器来填写测试，以验证时间戳是否在当前时间的 X 范围内，所以我知道它已正确更新，并且`connector.update`使用对象的正确时间戳调用。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-15T08:22:13.693

我发现处理时间关键代码的最稳健的方法是将所有时间关键函数包装在它们自己的类中。我通常称之为`TimeHelper`。所以这个类可能如下所示。

```
import java.util.Date;
public class TimeHelper{
    public long currentTimeMillis(){
        return System.currentTimeMillis();
    }
    public Date makeDate(){
        return new Date();
    }
} 
```

它可能有更多相同类型的方法。现在，任何使用这些函数的类都应该（至少）有两个构造函数——您将在应用程序中使用的普通构造函数，加上一个包私有的构造函数，其中 a`TimeHelper`是一个参数。这`TimeHelper`需要存放起来以备后用。

```
public class ClassThatDoesStuff {
    private ThingConnector connector;
    private TimeHelper timeHelper;

    public ClassThatDoesStuff(ThingConnector connector) {
        this(connector, new TimeHelper());
    }

    ClassThatDoesStuff(ThingConnector connector, TimeHelper timeHelper) {
        this.connector = connector;
        this.timeHelper = timeHelper;
    } 
} 
```

现在，在你的课堂上，而不是写作`System.currentTimeMillis()`，写作`timeHelper.currentTimeMillis()`。当然，这将产生完全相同的效果；除了现在，您的课程神奇地变得更加可测试。

当你测试你的课程时，模拟`TimeHelper`. 配置此模拟（使用 Mockito 的`when`and`thenReturn`或替代`doReturn`）以返回您喜欢的任何时间值 - 无论您需要什么测试。如果您要`currentTimeMillis()`在测试过程中多次调用，您甚至可以在此处返回多个值。

现在使用第二个构造函数来创建您要测试的对象，并传入模拟。这使您可以完美控制测试中使用的时间值；并且您可以使您的断言或验证断言已经使用了正确的值。

```
public class ClassThatDoesStuffTest{
    @Mock private TimeHelper mockTime;
    @Mock private ThingConnector mockConnector;
    private ClassThatDoesStuff toTest;

    @Test
    public void doesSomething(){
        // Arrange
        initMocks(this);
        when(mockTime.currentTimeMillis()).thenReturn(1000L, 2000L, 5000L);
        toTest = new ClassThatDoesStuff(mockConnector, mockTime);

        // Act
        toTest.doSomething();

        // Assert
        // ... ???
    }
} 
```

如果这样做，您就知道您的测试将始终有效，并且永远不会依赖于操作系统的时间切片策略。您还可以验证时间戳的确切值，而不是断言它们属于某个近似区间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T23:00:25.233

第一的：

```
class TimestampInInterval extends ArgumentMatcher< ThingWithATimestamp > {
      public boolean matches(Object arg) {
          ThingWithATimestamp thing = (ThingWithATimestamp) arg;
          long delta = thing.timestamp - System.currentTimeMillis();
          return delta < INTERVAL;
      }
   } 
```

第二：

```
verify(connector, times(1)).update(argThat(new TimestampInInterval()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-15T10:11:55.320

尽管接受的答案很好，但没有必要创建自定义`TimeHelper`类。您可以改为在您的类中使用`java.time.Clock`作为依赖项，如[本答案](https://stackoverflow.com/a/54642365/6238094)中所述。`TheClassThatDoesStuff`

`java.time.Clock`有许多静态工厂方法来创建具有固定时间点、自定义节奏/滴答声和从当前时刻偏移的时钟。这些工厂方法在测试期间很有用。

# objective-c - JTRevealSideBar 关闭侧边栏

> ID：11042209
> 
> 赞同：1
> 
> 时间：2012-06-14T22:26:05.553
> 
> 标签：objective-c, ios, xcode, sidebar

我已经在我的项目中实现了 JTRevelSideBar，它运行得很好，但我一直在试图弄清楚是否可以使用 Facebook 应用程序做类似的事情，如果用户按下主视图控制器，而侧边栏就会显示出来, 侧边栏应该被关闭。有人知道这可以实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-21T22:20:58.780

以前从未使用过它，我会说：*可能*。

不过，您提到的 pod 的 github 页面表示，由于 WWDC14 不鼓励使用它，因此不再支持它。不过，JT 提到的替代方案之一是 PKRevealController2，而且使用起来似乎相当简单。

尽管我提出它的原因是通常开发人员会在项目的主要头文件之一中给您一些提示，告诉您如何执行您所要求的操作。例如在[PKRevealController.h](https://github.com/pkluz/PKRevealController/blob/master/Source/PKRevealController/PKRevealController.h)它列出了属性

```
/// Whether to use the front view's entire visible area to allow pan based reveal.
    @property (nonatomic, assign, readwrite) BOOL recognizesPanningOnFrontView; 
```

这正是您想要`YES`在项目中设置的内容。我建议查看 JTRevealSideBar pod 中的头文件，看看是否有类似的东西。

现在，我以前使用[过 MMDrawerController](https://github.com/mutualmobile/MMDrawerController)（它非常棒！），同样它有一个**MMCloseDrawerGestureMode**可以设置为**MMCloseDrawerGestureModeBezelPanningCenterView**（用户可以通过在中心视图边框内的任何位置启动平移来关闭抽屉。）

所以你看，你只需要做一点挖掘。否则你需要实现一个平移手势识别器......但我不能确定你将把它放在你的特定实现中的哪个位置。

# javascript - FF 13、IE 9：JSON 字符串化/地理定位对象

> ID：11042212
> 
> 赞同：17
> 
> 时间：2012-06-14T22:26:36.267
> 
> 标签：javascript, json, firefox, geolocation, internet-explorer-9

我试图让 Firefox 13 将地理定位对象转换为 JSON 字符串，但它返回的是一个空字符串，而不是我的 JSON 对象的正确字符串表示形式。这在最新版本的 Chrome 和 Safari 以及 Android 浏览器中运行良好。这是我的代码：

```
if (navigator.geolocation) {
    navigator.geolocation.getCurrentPosition( 
        function (position) {  
            //Success handler
            console.log(position); //This outputs the position object to the console
            var gps = JSON.stringify(position); 
            console.log(gps); //This outputs an empty string!
        }, 
        function (error)
        {   
            //Handle error
        },
        { maximumAge: 3000, timeout: 60000, enableHighAccuracy: true }
        );
}
else {
    //Handle error
} 
```

在 Chrome 中，这会输出一个地理位置对象，以及这个字符串：

```
"{"coords":{"latitude":XYZ,"heading":null,"accuracy":40,"altitudeAccuracy":null,"altitude":null,"longitude":XYZ,"speed":null},"timestamp":1339712284200}" 
```

但是，在 Firefox 13 中，输出只是一个空字符串，即使打印到控制台的地理位置对象的所有意图和目的都与 Chrome 显示的对象相同。关于这里出了什么问题的任何想法？[这](https://github.com/sebastienblanc/geolocation/issues/6)似乎是一个相关的问题，但我也没有看到解决方案。顺便说一句，IE9 显示相同的行为。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2016-06-09T12:56:49.163

我创建了一个克隆函数来将 Geolocation 位置（或任何其他）对象克隆到一个将按预期进行字符串化的对象中：

```
function cloneAsObject(obj) {
    if (obj === null || !(obj instanceof Object)) {
        return obj;
    }
    var temp = (obj instanceof Array) ? [] : {};
    // ReSharper disable once MissingHasOwnPropertyInForeach
    for (var key in obj) {
        temp[key] = cloneAsObject(obj[key]);
    }
    return temp;
} 
```

**注意：** *可能不支持 Geoposition 类型中未使用的类型（例如 Date）*

然后，您将在代码中按如下方式使用它：

```
var gps = JSON.stringify(cloneAsObject(position)); 
```

希望这可以帮助某人:)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-15T05:17:54.347

发生的事情是 JSON.stringify 默认只查看对象自己的属性。

根据 DOM 规范，所有 DOM 属性实际上都存在于对象的原型上。

IE 和 Firefox 通过将属性放在原型上来正确实现规范。Chrome 和 Safari 没有：它们将属性直接放在对象上。这使得这个案例有效，但破坏了其他东西（例如，挂钩属性 getter 和 setter 的能力）......

有人谈论将 toJSON 方法添加到一些 DOM 对象，以便为 JSON.stringify 提供更合理的行为。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-12-13T11:20:32.133

老问题，但我来到这里是因为 stringify 也不适合我。

在谷歌搜索各种克隆功能后，我采取了不同的方法。

```
export async function getLocation(): Promise<Position> {
    return new Promise((resolve, reject) => {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition((position: Position) =>
                resolve({
                    coords: {
                        accuracy: position.coords.accuracy,
                        altitude: position.coords.altitude,
                        altitudeAccuracy: position.coords.altitudeAccuracy,
                        heading: position.coords.heading,
                        latitude: position.coords.latitude,
                        longitude: position.coords.longitude,
                        speed: position.coords.speed,
                    },
                    timestamp: position.timestamp,
                }),
            );
        } else {
            reject(new Error('Browser does not support geolocation!'));
        }
    });
} 
```

`getLocation`返回一个“可字符串化”的位置对象！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-09-29T07:06:13.100

我能找到的最简单的方法是使用 Lodash

```
lodash.defaultsDeep({coords: {}}, p) 
```

安装`npm i lodash.defaultsdeep`，然后

```
import defaultsDeep from 'lodash.defaultsdeep'; 
//const defaultsDeep = require('lodash.defaultsdeep'); //CommonJS/Node

JSON.stringify(defaultsDeep({coords: {}}, p))

//Outputs:
// "{
//   "coords": {
//     "latitude": 55.6300000,
//     "longitude": -6.1520000,
//     "altitude": null,
//     "accuracy": 1794,
//     "altitudeAccuracy": null,
//     "heading": null,
//     "speed": null
//   },
//   "timestamp": 1601361646336
// }" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-09T10:14:04.170

只是迈克回答的更新：

```
export function getUserPosition(): Promise<GeolocationPosition> {
  return new Promise((resolve, reject) => {
    if (navigator.geolocation) {
      navigator.geolocation.getCurrentPosition(
        (position: GeolocationPosition) =>
          resolve({
            coords: {
              accuracy: position.coords.accuracy,
              altitude: position.coords.altitude,
              altitudeAccuracy: position.coords.altitudeAccuracy,
              heading: position.coords.heading,
              latitude: position.coords.latitude,
              longitude: position.coords.longitude,
              speed: position.coords.speed,
            },
            timestamp: position.timestamp,
          }),
        (err) => {
          reject(err);
        },
        {
          timeout: GET_CURRENT_POSITION_TIMEOUT,
          maximumAge: GET_CURRENT_POSITION_MAX_AGE,
          /* 
          There was an issue with location in Chrome 89 if this wasn't set to `false`,
          so the best solution is set it to false in dev & test and undefine it in production
          */
          enableHighAccuracy:
            process.env.NODE_ENV !== 'production' ? false : undefined,
        }
      );
    } else {
      reject(new Error('Browser does not support geolocation!'));
    }
  });
} 
```

# javascript - this.form 和 document.forms 的区别

> ID：11042214
> 
> 赞同：6
> 
> 时间：2012-06-14T22:26:39.950
> 
> 标签：javascript, forms, this, document

`this.form`和或之间有区别`document.forms (document["forms"])`吗，它们相似吗？

这是我为测试差异而编写的代码。

```
<form name="myForm" id="myForm">
<input type="text" name="haha" id="myForm" value="laughable" onclick="alert(this.form.haha.value)" />
</form>

alert(document.forms.myForm.haha.value); 
```

他们都导致同样的事情。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-14T22:29:23.300

`this.form`会给你表单元素的形式。（`this`是表单元素）

> 包含表单元素，如果此元素在表单中。

`document.forms`将为您提供文档中的所有表格（如果支持！）

> forms 返回当前文档中表单元素的集合（一个 HTMLCollection ）。

更好的使用`document.getElementById(id)`

```
var form = document.getElementById(formId); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-13T03:02:33.960

`this.form`将返回 this 的 form 属性，如上所述`"this"`。

`"this"`可以是任何东西，例如。一个 div，所以可能没有表单属性。

如果`"this"`碰巧引用了文档，那么`this.form`将返回与`document.form`. 但除此之外，不要指望它。

# c# - 我可以更改 Windows Azure 网站上的语言环境吗？

> ID：11042216
> 
> 赞同：6
> 
> 时间：2012-06-14T22:26:56.490
> 
> 标签：c#, asp.net, azure, localization

我们有一系列经典的 ASP 应用程序，我们希望将它们移植到新的 Windows Azure 网站托管。

Classic ASP 网站是针对在英国地区运行的服务器编写的。经典的 ASP 已被编码为在数百页中以各种方式使用英国日期时间格式。当我之前在美国语言环境的服务器上尝试过代码时，由于日期时间格式不同，日期时间处理失败。

有谁知道我是否可以指定网站的语言环境？

或者，有谁知道如何通过启动任务更改标准 Web 角色的区域设置？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T23:17:36.873

如果要配置网站全球化，最好使用[全球化](http://msdn.microsoft.com/en-us/library/hy4kkhe0%28VS.71%29.aspx)元素。

要更改网站的区域设置，您可以在 web.config 中正确设置**文化和 uiculture 。**

在 Windows Azure 中，如果您想在启动任务中执行此操作，您需要创建一个批处理文件（**即 global.cmd**），其中可以运行以下命令：

```
Appcmd set config /commit:WEBROOT /section:globalization /culture: string
Appcmd set config /commit:WEBROOT /section:globalization /uiCulture: string 
```

上面将“字符串”更改为您想要的语言环境代码。

最后，您可以创建 ServiceDefinition.csdef 中定义的启动任务

```
<Startup>
 <Task commandLine="global.cmd" executionContext="elevated" taskType="simple" />
</Startup> 
```

# c - C 将标准输出恢复到终端

> ID：11042218
> 
> 赞同：26
> 
> 时间：2012-06-14T22:27:39.123
> 
> 标签：c, stdout

我正在使用多线程程序。

首先，我将我的标准输出重定向到某个文件。那里没问题（我使用了文件的文件描述符在`dup2(fd, 1)`哪里）。`fd`

之后，我需要再次将我的标准输出重定向到终端。

我的第一种方法：

```
 /*Declaration*/
      fpost_t  stream_sdout;
      /*code*/
      if ( fgetpos( stdout, &stream_sdout) == -1 )
          perror(Error:); 
```

它说非法搜索。
不知道为什么会这样。
但是如果我让它工作，那么我只需要使用`fsetpos(stdout, &stream_stdout)`它就可以工作。

我的第二个想法是将 stdout 使用复制`dup2(stdout, 4)`到位置 4 的文件描述符表中。但这也不起作用。

如何将标准输出切换回其原始目标（终端、管道、文件等）？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-06-14T23:08:19.043

```
#include <unistd.h>

...

int saved_stdout;

...

/* Save current stdout for use later */
saved_stdout = dup(1);
dup2(my_temporary_stdout_fd, 1);

... do some work on your new stdout ...

/* Restore stdout */
dup2(saved_stdout, 1);
close(saved_stdout); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-14T23:13:15.893

在你做之前`dup2(fd, STDOUT_FILENO)`，你应该保存当前打开的文件描述符用于标准输出`int saved_stdout = dup(STDOUT_FILENO);`（让[`dup()`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/dup.html)你选择一个可用的文件描述符编号）。然后，在完成将输出重定向到文件后，您可以`dup2(saved_stdout, STDOUT_FILENO)`将标准输出恢复到开始所有这些操作之前的位置（并且您也应该关闭`saved_stdout`）。

您确实需要担心`fflush(stdout)`在适当的时候刷新标准 I/O 流 ( )，因为您搞砸了。这意味着'在你切换标准输出之前'。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T22:35:15.887

如果程序在 Linux 环境下运行，您可以`freopen ("/dev/stdout", "a", stdout)`.

但如果你知道那`stdout`是终端，`freopen ("/dev/tty", "a", stdout)`或者其他操作系统的等价物——甚至是 Windows。

# java - 带有 HashMap 和 ArrayList 的 Android OutOfMemoryError

> ID：11042221
> 
> 赞同：2
> 
> 时间：2012-06-14T22:28:13.963
> 
> 标签：java, android, arraylist, hashmap, out-of-memory

我正在解析一个 csv 文件，更具体地说是一个 POI 文件，使用 opencsv 并将信息读入 ArrayList。我需要将信息缓存在内存中，因此当用户点击按钮时，我会检查每个 POI 并查看它是否在地图视图的当前范围内。一些 POI 文件可以有 10K - 60K 行。在我的应用程序强制关闭之前，我可以读取大约 50K 行，所以我设置了 30K 的限制，以便为其他事情留下内存。我的问题是当我去加载另一个文件时，我清除（）我 trimToSize（）的 Arraylists，我尝试将 ArrayLists 声明为新的 ArrayLists，但 GC 从不从内存中释放旧数据。我可以清除（）它们并向其中读入一个新文件，但有些东西不允许 GC 释放内存。我没有接受过编程、IT 或 CS 方面的培训。这是我用 Java / Android 开发或编写的第一个应用程序。我工作过，现在阅读和研究了大约 6 天，试图弄清楚为什么我会出现这种内存泄漏。任何帮助将不胜感激，任何关于如何优化我的代码的建议也将不胜感激，因为我是一个完整的菜鸟。此外，下面的代码仅显示了有关将文件读入内存的方法。您可以谷歌 opencsv 以查看有关其工作原理的文档，如果您需要查看其他任何内容，请告诉我，我会发布它。

提前致谢！

```
 public class MainActivity extends MapActivity implements LocationListener {
    private static MapView mapView;
    int counter = 0;
    private ArrayList<String> arrLat = new ArrayList<String>();
    private ArrayList<String> arrLong = new ArrayList<String>();
    private ArrayList<String> arrName = new ArrayList<String>();
    private ArrayList<String> arrInfo = new ArrayList<String>();
    private ArrayList<Boolean> arrCheck = new ArrayList<Boolean>();
    private ProgressDialog progressDialog;

@Override
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    // main.xml contains a MapView
    setContentView(R.layout.main); 

    //Gets file name from ListOfFiles Activity Class
            Bundle extras = getIntent().getExtras();
            if (extras != null) {
                boolean callreadPOIFile = extras.getBoolean("callreadPOIFile");
                if(callreadPOIFile) {
                    String filePath = extras.getString("filePath");
                    readPOIFileInThread(filePath);

                }else{
                    // Show user alert box                      
                }

            }
}

public void readPOIFileInThread(String filePath) {

    progressDialog = ProgressDialog.show(this, "", "LOADING:\n" + filePath + "\nPLEASE WAIT...");
    final String finalFilePath = filePath;

    new Thread(new Runnable(){
        public void run(){
            try{
                readPOIFile(finalFilePath);
            }catch(Exception e){
                runOnUiThread(new Runnable() {
                    public void run() {
                Toast.makeText(getApplicationContext(), "Exception, readPOIFileInThread", Toast.LENGTH_SHORT).show();
                //progressDialog.dismiss();
                    }
                });
            }

            progressDialog.dismiss();

        }
    }).start();

}       

//Parse and load POI CSV File
public void readPOIFile(String filePath){

    arrLat.clear();
    arrLong.clear();
    arrName.clear();
    arrInfo.clear();
    arrCheck.clear();

    arrLat.trimToSize();
    arrLong.trimToSize();
    arrName.trimToSize();
    arrInfo.trimToSize();
    arrCheck.trimToSize();

            //arrLat = null;
            //arrLong = null;
            //arrName = null;
            //arrInfo = null;
            //arrCheck = null;

            //arrLat = new ArrayList<String>();
            //arrLong = new ArrayList<String>();
            //arrName = new ArrayList<String>();
            //arrInfo = new ArrayList<String>();
            //arrCheck = new ArrayList<Boolean>();

    System.out.println(arrLat.isEmpty());

    String lat = null;
    String lng = null;
    Double dLat;
    Double dLng;
    int lati;
    int lngi;
    String name = null;
    String info = null;

    CSVReader reader = null;
    //System.out.println(filePath);
    try {
        reader = new CSVReader(new FileReader(filePath));
    } catch (FileNotFoundException e) {
        // prepare the alert box
        AlertDialog.Builder alertbox = new AlertDialog.Builder(this);

        // set the message to display
        alertbox.setMessage("There was an error reading file: " + filePath
                + "\n Please check the file format and try again.");

        // add a neutral button to the alert box and assign a click listener
        alertbox.setNeutralButton("Ok", new DialogInterface.OnClickListener() {

            // click listener on the alert box
            public void onClick(DialogInterface arg0, int arg1) {
                // the button was clicked
                //Toast.makeText(getApplicationContext(), "OK button clicked", Toast.LENGTH_SHORT).show();
            }
        });

        // show it
        alertbox.show();
        e.printStackTrace();
    }
    String [] nextLine = null;
    int count = 0;
    try {
        while ((nextLine = reader.readNext()) != null) {
            // nextLine[] is an array of values from the line
            //System.out.println(nextLine[0]+ "\n" + nextLine[1]+ "\n"  + nextLine[2]+ "\n"  + nextLine[3] + "\n");

            try {
                lng = nextLine[0];

            } catch (Exception e) {
                lng = Integer.toString(1);
            }

            try {
                lat = nextLine[1];

            } catch (Exception e) {
                lat = Integer.toString(1);
            }
            try {
                name = nextLine[2];

            } catch (Exception e) {
                name = "No Name...";
            }
            try {
                info = nextLine[3];
            } catch (Exception e) {

                info = "No Info...";
            }
            //convert lat and long to double
            try{
                dLat = Double.parseDouble(lat);
                dLng = Double.parseDouble(lng);
            }catch(Exception e){

                System.out.println("error converting lat long to Double at row: " + count);
                break;

            }
            //convert lat lng to int
            lati = (int)(dLat * 1E6);
            lngi = (int)(dLng * 1E6);

            //add line to ArrayLists
            try{
            arrLat.add(Integer.toString(lati));
            arrLong.add(Integer.toString(lngi));
            arrName.add(name);
            arrInfo.add(info);
            arrCheck.add(false);
            }catch (Exception e){

                runOnUiThread(new Runnable() {
                    public void run() {
                        //Toast.makeText(getApplicationContext(), "Error reading. Please check the file. ", Toast.LENGTH_SHORT).show();
                        System.out.println("Error reading file.");

                    }
                });
            }
            count++;
            if(count == 10000 || count == 20000){
                final int showcount = count;
                runOnUiThread(new Runnable() {
                    public void run() {
                        Toast.makeText(getApplicationContext(), showcount + " POI's loaded",
                                Toast.LENGTH_LONG).show();              
                    }
                });
            }

            if(count == 30000)
                break;

            System.out.println(count);
        }
        final String toastFilePath = filePath;
        final int toastcount = count;

        runOnUiThread(new Runnable() {
            public void run() {
                if(toastcount > 0){
                    Toast.makeText(getApplicationContext(), "File: " + toastFilePath + " read... \n"
                            + toastcount + " point(s) were loaded...",
                            Toast.LENGTH_LONG).show();
                }else{
                    Toast.makeText(getApplicationContext(), "INVALIDE FILE!\nFile: " + toastFilePath + " read... \n"
                            + toastcount + " points.",
                            Toast.LENGTH_LONG).show();
                }
            }
        });

    } catch (IOException e) {

        e.printStackTrace();
    }

} 
```

固定的：

我终于找到了我的问题！在研究了活动生命周期后，我发现每次我去我的列表活动选择一个文件并缓存它时都会创建一个新实例，我正在创建我的 MainActivity 的一个新实例。我在清单中将 MainActivity 设置为 singleTop 模式，并将一些代码移至 onNewIntent() 方法，一切都很好。我的应用程序现在运行良好！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T22:56:41.060

一些建议：

1.  **没有对 View**对象（或 drawable 或任何对上下文的引用）的静态引用。这是一个非常糟糕的做法，很容易让你陷入内存泄漏。原因：即使在离开活动之后，也有一个对视图的静态引用，该视图引用你离开的活动，包括它的所有字段（你的大集合， 例如）。阅读[**此处**](http://developer.android.com/resources/articles/avoiding-memory-leaks.html)了解更多信息。

2.  您真的必须读取整个文件并将其全部内容存储到内存中吗？当然，它对您来说很容易，而且比其他任何东西都快得多，但是它很容易占用大量内存，尤其是如果您以这种方式使用它。试着**只阅读你需要**的东西，**只存储你需要**的东西。

3.  观看[**google 的**](http://www.google.com/events/io/2011/sessions/memory-management-for-android-apps.html)视频，了解如何查找和处理内存泄漏

4.  你真的必须将数据存储在字符串中吗？只是需要检查的值（坐标，也许？）或**Pois 的集合**，每个都有自己的字段（id，name，coordinates，...）？java中的字符串是一个字符数组，每个字符占用2个字节（因为它是unicode），因此它可能会占用大量内存空间。例如，60000行乘以80个字符乘以每个字符2个字节为9,600,000字节，这几乎是**10MB**。您需要更严格地使用内存。请记住，它是一个移动平台，它的首要任务之一是内存效率（为了更好地切换任务）。

    使用 Pois 集合不仅在设计方面会更好（更容易阅读、理解、维护……）。它也将占用更少的空间 - 使用原语而不是包装器（例如，int 而不是整数）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T22:35:32.030

夫妻心得：

1.  `Integer.toString(1)`可以替换为`"1"`哪个将利用字符串池。
2.  `String`您是否尝试过使用原语，而不是将所有值存储为s？
3.  `lat``lng`听起来你正在尝试存储纬度和经度。也许您想为此使用 a `Double`。
4.  `ArrayList`您可以尝试分配一个静态大小的数组并存储长度，而不是使用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-14T22:42:31.217

我对 CSVReader 的实现了解不多，但它永远不会在 readPOIFile 中关闭。如果它挂在东西上，可能会导致您出现内存问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-13T17:43:32.573

我检查了对我的 Mapview 的静态引用并删除了 static，除了它破坏了我的 getter 和 setter 之外没有任何改变。我终于找到了我的问题！在研究了活动生命周期后，我发现每次我去我的列表活动选择一个文件并缓存它时都会创建一个新实例，我正在创建我的 MainActivity 的一个新实例。我在清单中将 MainActivity 设置为 singleTop 模式，并将一些代码移至 onNewIntent() 方法，一切都很好。我的应用程序现在运行良好！

# php - 将类存储在类变量中我做得对吗？PHP

> ID：11042225
> 
> 赞同：1
> 
> 时间：2012-06-14T22:28:47.247
> 
> 标签：php, variables, object

我目前正在这样做，

```
class Page {
    // variable to hold DBC class
    public $dbc;
    /*
        __CONSTRUCT
        Called when class is initiated and sets the dbc variable to hold the DBC class.
    */
    public function __construct() {
        // set the dbc variable to hold the DBC class
        $this -> dbc = new DBC();
    }
    /*
        CREATE PAGE
        Create a page with the option to pass data into it.
    */
    public function create($title, $class, $data = false) {
        // start buffer
        ob_start('gz_handler');
        // content
        content($this -> dbc, $data);
        // end buffer and flush
        ob_end_flush();
    } 
```

}

我已经简化了示例，但基本上我需要将对象传递`DBC`给方法内的函数`create`？

这是否像我以前使用的那样被认为是不好的做法，`extends`但意识到无法将扩展类提取到变量中？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T22:31:01.550

您非常接近[依赖注入](http://en.wikipedia.org/wiki/Dependency_injection)设计模式。

您只需更改构造函数以接受对象作为参数，如下所示：

```
public function __construct( $dbc) {
    // set the dbc variable to hold the DBC class
    $this -> dbc = $dbc;
} 
```

然后使用数据库连接实例化您的类，如下所示：

```
$dbc = new DBC();
$page = new Page( $dbc); 
```

这有很多好处，从更容易测试到与数据库建立单一连接。想象一下，您需要五个`Page`对象 - 现在您将它们传递给所有相同的数据库连接，因此它们不需要单独创建一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T22:31:38.977

您应该将`DBC`类​​实例传递给构造函数，而不是在内部创建对象。这称为`dependency injection`：[https](https://en.wikipedia.org/wiki/Dependency_injection) ://en.wikipedia.org/wiki/Dependency_injection 。

# c# - 创建一个dll来导入MYSQL数据

> ID：11042228
> 
> 赞同：0
> 
> 时间：2012-06-14T22:28:50.337
> 
> 标签：c#, mysql, dll

嗨，我想知道如何创建一个用 c# 编写的 dll，它从在线托管的 MYSQL 数据库的列中获取数据，所以我有点困惑，因为 MYSQL 中的数据经常更新如何确保那个 dll 正在提取信息？

我对创建 dll 非常陌生，以前从未做过。

Tks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T23:20:22.107

设置好 Windows 类库后。您需要决定 dll 需要为您的调用应用程序提供哪些数据。然后，您需要在 dll 中公开这些方法，以便在需要时调用它们。您应该为这些方法使用接口

```
namespace ProductExampleInterfaces
{

    public interface IProductData
    {
        IList<Product> GetAllProducts();
        string GetProductName(int id);
        ...
    }
    ...
} 
```

上述接口将在您的调用应用程序中使用，如下所示

```
using MySqlExmpleDll;
...

class ProductService
{
    private IProductData _productData;

    public ProductService(IProductData productData)
    {
        _productData = productData;
    }

    public IList<Product> GetAllProducts()
    {
        IList<Product> products;
        products = _productData.GetAllProducts();
        ...
        return products;
    }

} 
```

现在，如果 GetAllProducts() 正在返回数据，那么您就知道您已经走上正轨了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T22:39:31.143

要在 Visual Studio 中创建新项目时创建 DLL，请确保选择编译为 DLL 的选项，例如 Windows 类库。

要将外部 DLL 添加到您自己的项目中，您可以在解决方案资源管理器中右键单击项目的引用并选择“添加引用”，然后浏览到 DLL 的位置。然后，您将能够使用该 DLL 中包含的任何功能。

# ruby - 在 webstorm 中安装 ruby 插件失败

> ID：11042231
> 
> 赞同：0
> 
> 时间：2012-06-14T22:29:00.250
> 
> 标签：ruby, plugins, webstorm

在 WebStorm 中启用 ruby​​ 插件后，它以以下错误消息开始：

```
Plugin org.jetbrains.plugins.ruby failed to initialize and will be disabled:
com/intelij/debugger/settings/NodeRenderSettings
Please restart JetBrains WebStorm. 
```

有谁知道这里发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T06:38:55.897

WebStorm 不支持 Ruby 插件，它只为 IntelliJ IDEA Ultimate 设计。允许安装不兼容的插件是插件库的一个已知问题，我们正在努力解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-05T10:29:25.873

看到这个解决方案，它也适用于 webstorm。 [是否可以在 PHPStorm 中突出显示 Ruby 语法？](https://stackoverflow.com/questions/16451359/is-it-possible-to-get-ruby-syntax-highlighting-in-phpstorm)

但它仅用于突出显示。它对我有用。

# c++ - 任务管理器如何获取进程的命令行可执行路径？

> ID：11042237
> 
> 赞同：1
> 
> 时间：2012-06-14T22:29:38.907
> 
> 标签：c++, winapi

我正在查看任务管理器的进程列表，并启用查看 > 选择列 > 命令行以查看包含 exe 路径和命令行参数。

我试图让同样的东西工作，`GetModuleFileNameEx`但有一些问题；首先，结果不包含任何参数，并且对于某些进程也会失败，例如**WinRar.exe**或**Opera.exe**。

我知道任务管理器使用 WMI 来获取其中的一些数据（我尝试关闭服务，但它失败了，就像我的脚本一样，对于相同的进程），但我想知道，是什么让进程的路径“无法获取”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T23:55:16.603

任务管理器使用进程的[`PEB`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa813706.aspx)结构来访问命令行参数（除其他外）。如果你有一个`HANDLE`目标进程（并且有足够的权限访问它的内存），你可以访问[`PEB`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa813706.aspx)使用该[`NtQueryInformationProcess()`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms684280.aspx)函数（设置它的`ProcessInformationClass`参数`ProcessBasicInformation`来接收一个`PROCESS_BASIC_INFORMATION`结构）来获取[`PEB`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa813706.aspx)目标进程的地址空间内的内存地址（其中其他事情）。然后，您可以根据需要使用`ReadProcessMemory()`将内容读[`PEB`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa813706.aspx)入应用程序的地址空间。命令行参数通过使用`PEB::ProcessParameters`字段定位，该字段是指向[`RTL_USER_PROCESS_PARAMETERS`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa813741.aspx)结构的指针，该结构包含`CommandLine`类型为 的字段[`UNICODE_STRING`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380518.aspx)。

如果您是访问 64 位进程的 PEB 的 32 位进程，则事情会变得有些棘手，反之亦然。您必须考虑不同大小的指针（4 个 32 位，8 个 64 位），这会影响结构大小和偏移量。

但这就是它的要点。

# regex - 为什么这个模式只匹配第一个和最后一个

> ID：11042238
> 
> 赞同：0
> 
> 时间：2012-06-14T22:29:41.053
> 
> 标签：regex

草垛：

```
<h2 >a&nbsp; &middot;&nbsp;&middot;&nbsp;&middot;
</h2>
<div class="indent">
aaaa
</div>
<h2 >b&nbsp; &middot;&nbsp;&middot;&nbsp;&middot;
</h2>
<div class="indent">
bbbb
</div> 
```

我使用的模式：

```
#<h2[^>]*>(a|b)(?!</h2>)[\s\S]*</h2><div class="indent">((?!</div>)[\s\S]+)</div># 
```

此模式仅匹配第一个 h2 内容（例如`a&nbsp; &middot;&nbsp;&middot;&nbsp;&middot;`）和最后一个 div 中的内容（例如`bbbb`）

但我希望它匹配 h2 和 div 中的所有内容以制作一对一的地图（例如`a&nbsp; &middot;&nbsp;&middot;&nbsp;&middot;`=> `aaaa`，`b&nbsp; &middot;&nbsp;&middot;&nbsp;&middot;`=> `bbbb`），我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:40:31.347

`[\s\S]*`并且`[\s\S]+`是贪婪的，这意味着它们将匹配尽可能多的字符。尝试将它们更改为`[\s\S]*?`和`[\s\S]+?`。

使用您当前的正则表达式，如果您将您`[\s\S]*`放入一个捕获组，您会看到它与以下内容匹配：

```
&nbsp; &middot;&nbsp;&middot;&nbsp;&middot;
</h2>
<div class="indent">
aaaa
</div>
<h2 >b&nbsp; &middot;&nbsp;&middot;&nbsp;&middot; 
```

在末尾添加`?`会使这变得懒惰，因此它不会匹配尽可能多的字符，而是匹配尽可能少的字符，因此它会`</h2>`像您想要的那样在第一个停止。相同的推理适用`[\s\S]+`于您的正则表达式中的后者。

看起来这应该在您的示例字符串上失败，因为您在正则表达式的中间，但是在您的示例文本中，结束和`</h2><div...`之间总是有一个换行符，您可能应该将此部分更改为. 最终结果：`</h2>``<div>``</h2>\s*<div...`

```
#<h2[^>]*>(a|b)(?!</h2>)[\s\S]*?</h2>\s*<div class="indent">((?!</div>)[\s\S]+?)</div># 
```

[但是不要用正则表达式解析 HTML！](https://stackoverflow.com/a/1732454/505154)

# javascript - ajax 请求失败，我不知道为什么？

> ID：11042239
> 
> 赞同：-2
> 
> 时间：2012-06-14T22:29:43.963
> 
> 标签：javascript, jquery, ajax

由于一些非常奇怪的原因，我的 ajax 请求一直作为错误返回，但是数据确实被添加到数据库中。在控制台中，它只是在我记录错误时显示了一大堆东西，我不明白它到底来自哪里。所有的 php/html/naming 都是正确的，因为它曾经可以工作，但是我不明白为什么会这样。

代码：

```
function doShorten(event)
 {
event.preventDefault();

var form_data = {
    long_url : $("[name='long_url']").val()
};

$.ajax({
    type: "POST",
    url: "url/short_ajax",
    data: form_data,
    dataType: "json",
    timeout: 10000,

    beforeSend: function() {
        console.log("About to send");
    },

    complete: function() {
        console.log("Complete", this.url);
    },

    success: function(data){
        console.log("Success", this.url);
        $('#shorty').addClass('shorty').html("Short URL: "+data);
    },

    error: function(error) {
        console.log("Error", this.url, error);
    }

});
} 
```

请帮忙！

```
Stuff I get in the console:
    abort: function (a){a=a||"abort",p&&p.abort(a),w(0,a);return this}
always: function (){i.done.apply(i,arguments).fail.apply(i,arguments);return this}
complete: function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this}
done: function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this}
error: function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this}
fail: function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this}
getAllResponseHeaders: function (){return s===2?n:null}
getResponseHeader: function (a){var c;if(s===2){if(!o){o={};while(c=bG.exec(n))o[c[1].toLowerCase()]=c[2]}c=o[a.toLowerCase()]}return c===b?null:c}
isRejected: function (){return!!i}
isResolved: function (){return!!i}
overrideMimeType: function (a){s||(d.mimeType=a);return this}
pipe: function (a,b,c){return f.Deferred(function(d){f.each({done:[a,"resolve"],fail:[b,"reject"],progress:[c,"notify"]},function(a,b){var c=b[0],e=b[1],g;f.isFunction(c)?i[a](function(){g=c.apply(this,arguments),g&&f.isFunction(g.promise)?g.promise().then(d.resolve,d.reject,d.notify):d[e+"With"](this===i?d:this,[g])}):i[a](d[e])})}).promise()}
progress: function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this}
promise: function (a){if(a==null)a=h;else for(var b in h)a[b]=h[b];return a}
readyState: 4
responseText: "http://localhost/u/pRam"
setRequestHeader: function (a,b){if(!s){var c=a.toLowerCase();a=m[c]=m[c]||a,l[a]=b}return this}
state: function (){return e}
status: 200
statusCode: function (a){if(a){var b;if(s<2)for(b in a)j[b]=[j[b],a[b]];else    b=a[v.status],v.then(b,b)}return this}
statusText: "OK"
success: function (){if(c){var a=c.length;n(arguments),j?l=c.length:e&&e!==!0&&(k=a,o(e[0],e[1]))}return this}
then: function (a,b,c){i.done(a).fail(b).progress(c);return this}
__proto__: Object 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T22:31:42.317

确保**网址**正确，也许您的意思是：

```
url: "url/short_ajax.php", 
```

# python - 清除金字塔中的 setuptools 缓存？

> ID：11042240
> 
> 赞同：2
> 
> 时间：2012-06-14T22:30:00.373
> 
> 标签：python, caching, pyramid, setuptools

我对 python 和金字塔很陌生。我正在使用以下命令运行金字塔应用程序：

```
pserve development.ini 
```

当我进行一些更改并重新启动服务器（杀死它并再次运行它）时，它会将旧版本的文件保留在缓存中。

我注意到我可以通过重新安装应用程序来清理缓存

```
python setup.py install 
```

但我确信有更好的方法吗？

我注意到缓存文件保存在构建文件夹中：

```
build/lib.linux-x86_64-2.7/* 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T23:27:32.820

而不是使用`python setup.py install`，使用`python setup.py develop`。这会将您的应用程序目录链接到站点包，而无需创建单独的“已安装”源代码树。

# c# - 删除 RabbitMQ 队列时 CPU 消耗高？

> ID：11042243
> 
> 赞同：0
> 
> 时间：2012-06-14T22:30:21.617
> 
> 标签：c#, .net, rabbitmq

我在 RabbitMQ 上有一个问题，每当我删除一个队列时，CPU 就会上升。我删除兔子队列的次数越多，CPU 就会逐渐增加。在我看来，在某些时候有一些对象没有结束。顺便说一句，我的代码没有循环，只是普通的 QueueDelete。我正在使用 RabbitMQ .net 库。

请让我知道您是否遇到过此类问题以及您是如何解决的。或者任何建议都可以。

此致，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T07:03:46.360

I fixed this issue by checking channels and consumers if they are still running.

So on my consume method, before I get the message, I am checking if the channel is still open and or the consumer tag is still running. This way I know what to do if this returns true. What happened on my previous code was I don't have checking and exceptions was not handled. So every time I delete a channel it is throwing an exception on consume.

Thanks

# scala - 当我发出 g8 命令时，Github 对等体未通过身份验证

> ID：11042246
> 
> 赞同：2
> 
> 时间：2012-06-14T22:30:25.640
> 
> 标签：scala, github, sbt, typesafe-stack, giter8

我正在使用红帽Linux。我正在尝试运行此命令：

`g8 typesafehub/play-scala`

我得到了这样的回应：

> 从 github 对等方获取的异常未经过身份验证

但是当我使用检查连接时

```
openssl s_client -connect github.com:443 
```

我明白了：

> 验证返回码：0（ok）

这意味着我可以连接到 github。为什么这个命令不起作用？

`g8 typesafehub/play-scala`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T06:47:04.430

`RHEL 5`我还在使用的VM 映像上遇到了这个问题`openjdk 6`。这是另一个让`TrustManager`我了解修复的笔记。我调整了调用，为 github 添加了信任设置；在我的情况下，它解决了对等身份验证问题。

`openssl`首先使用和获取 github 证书`keytool`，使其可供 java 访问。

```
echo "" | openssl s_client -connect www.github.com:443 \
    -showcerts 2>/dev/null | openssl x509 -out github.cert
keytool -import -alias github \ 
    -file github.cert -storepass g8g8g8 \
    -keystore $HOME/g8.truststore 
```

现在用我称为“G8”的脚本重写调用：

```
g8 \
   \ -Djavax.net.ssl.trustStore=$HOME/g8.truststore \
   \ -Djavax.net.ssl.trustStorePassword=g8g8g8 \
   $* 
```

现在尝试执行`G8 -v typesafehub/akka-scala-sbt`，我发现现在事情变得更快乐了。我想设置一个系统范围的默认信任库可能会更好，但我还没有想出来。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T08:05:25.750

If it really is an authentication issue, check your `~/.g8/config` file for [authentication purpose](https://github.com/n8han/giter8#private-repositories), but you shouldn't need it for anonymous access.

Note that, according to [issue 32 of giter8](https://github.com/n8han/giter8/issues/32), it can also depends on the Java you are using.
For instance:

> Sorry, that preview release of openjdk 7 is not fit for general use. (There's also giter8 issue #27 specific to openjdk on mac.) I have tested openjdk 7~b147-2.0-0ubuntu0.11.10.1 with giter8 and that worked fine, so when there is a final release available for mac you should be able to use it.
> 
> **For now, please try with jdk 6** and reopen if you are still having trouble.

Another JDK (openjdk) might end up using the wrong `TrustManager`, as described in "[Avoiding the "`javax.net.ssl.SSLPeerUnverifiedException: peer not authenticated`" with `HttpClient`](http://javaskeleton.blogspot.fr/2010/07/avoiding-peer-not-authenticated-with.html)"

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T15:58:32.713

我和 B Evans 有同样的问题（谢谢！），但是在 Windows 中，所以这里是等效的代码，以防其他人遇到这个问题并且不知道如何从 windows cmd 执行此操作。我还必须从[http://www.openssl.org/related/binaries.html获取 openssl](http://www.openssl.org/related/binaries.html)

```
openssl s_client -connect www.github.com:443 -showcerts > out.txt
openssl x509 -out github.cert < out.txt
keytool -import -alias github -file github.cert \
 -storepass g8g8g8 -keystore C:\tmp\g8.truststore 
```

然后将其添加到 JAVA_OPTS （我还必须处理我们的公司防火墙，因此还要处理代理......）

```
SET JAVA_OPTS=-Dhttp.proxyHost=our.proxy.com -Dhttp.proxyPort=8080 \
 -Dhttps.proxyHost=our.proxy.com -Dhttps.proxyPort=8080 \
 -Djavax.net.ssl.trustStore=C:\tmp\g8.truststore \ 
 -Djavax.net.ssl.trustStorePassword=g8g8g8 
```

# liquibase - 使用 liquibase 创建列时，如何根据现有列为该列指定值？

> ID：11042247
> 
> 赞同：20
> 
> 时间：2012-06-14T22:30:35.860
> 
> 标签：liquibase

我有一个现有的 mysql 表，其中包含两列 a 和 b。

我现在想在该表中添加一列 c。

c 应该是可空的，应该有一个默认值 NULL，除了那些 b 列的值为 10 的行。其中 b 的值为 10，c 应该有一个值 X。

我知道使用 SQL 执行此操作相当简单，但我想使用 liquibase 执行此操作，因为 liquibase 是我们用于架构迁移的。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-12-19T09:27:56.447

你已经尝试过这样的事情了吗？

```
<addColumn tableName="SGW_PRODOTTI_INFO_ATTRIBUTE">
    <column name="AlternativeListPrice" type="double" defaultValue="0.0">
    <constraints nullable="true"/>
    </column>
</addColumn> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-02-06T13:27:13.687

我认为不使用普通 sql 的最佳解决方案如下：

*   正如 Walter 所写，使用[addColumn](http://www.liquibase.org/documentation/changes/add_column.html "添加列")更改；

*   使用[更新](http://www.liquibase.org/documentation/changes/update.html "更新")更改。

您可以选择在变更集中同时使用这两种变更，但一个好的做法是通过单独的变更集将每一项分开，以用于 liquibase 事务/回滚目的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-06-21T11:00:41.323

如果您要添加列，那么

```
<changeSet author="your-name" id="your-id"> 
    <addColumn tableName="person" >
        <column name="is_active" type="varchar2(1)" defaultValue="Y" />  
    </addColumn>  
</changeSet> 
```

[添加列](https://docs.liquibase.com/change-types/community/add-column.html)

如果已添加列，则需要设置默认值

```
<changeSet author="your-name" id="your-id">
    <addDefaultValue columnDataType="varchar2(1)" columnName="is_active" defaultValue="Y" tableName="person"/>  
</changeSet> 
```

[添加默认值](https://docs.liquibase.com/change-types/community/add-default-value.html)

# css - Can't load a Bootstrap.css library

> ID：11042251
> 
> 赞同：0
> 
> 时间：2012-06-14T22:31:05.687
> 
> 标签：css, ruby, twitter-bootstrap, haml

I have a Ruby application, and here is my setup:

I have this HAML code:

```
 .alert.alert-info
    %p="This is the correct style." 
```

The sidebar.css has this:

```
/*
 * THIS IS THE MANIFEST FILE FOR THE LAYOUT: SIDEBAR
 *= require_self
 *= require bootstrap
 *= require bootstrap-responsive
 *= require bootstrap_overrides
 *= require layout/buttons
 *= require sidebar/base
*/ 
```

The web page renders the text "This is the correct style" but not the styling for it.

Here is the page with the styling documentation:

[http://twitter.github.com/bootstrap/components.html#alerts](http://twitter.github.com/bootstrap/components.html#alerts)

Any idea what I might be missing or need to set up still? The css styles are just not rendering.

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:53:39.357

Not sure if you use LESS or not, by I import Bootstrap like this:

`@import "twitter/bootstrap/bootstrap";`

# c++ - 在较大字符串中查找字符串的函数

> ID：11042264
> 
> 赞同：2
> 
> 时间：2012-06-14T22:33:52.843
> 
> 标签：c++, string, oop, function

这是我用来实现这个程序的完整代码。一切似乎都可以编译并运行，但是一旦它运行我的 find 方法，程序似乎停止并且不执行说明 main.cpp 文件中匹配子字符串的最后一行。绝对感谢任何帮助！

.h 文件：

```
#include <iostream>
using namespace std;

class MyString
{
    public:
            MyString();
            MyString(const char *message);
            MyString(const MyString &source);
            ~MyString();
            const void Print() const;
            const int Length() const;
            MyString& operator()(const int index, const char b);
            char& operator()(const int i);

            MyString& operator=(const MyString& rhs);
            bool operator==(const MyString& other) const;
            bool operator!=(const MyString& other) const;
            const MyString operator+(const MyString& rhs) const;
            MyString& operator+=(const MyString& rhs);
            friend ostream& operator<<(ostream& output, const MyString& rhs);
            const int Find(const MyString& other);
            MyString Substring(int start, int length);

    private:
            char *String;
            int Size;

   };

  istream& operator>>(istream& input, MyString& rhs); 
```

.cpp 文件：

```
 #include <iostream>
  #include <cstdlib>
  #include "MyString.h"

  using namespace std;

  //default constructor that sets the initial string to the value "Hello World"
 MyString::MyString()
 {
    char temp[] = "Hello World";

    int counter(0);
    while(temp[counter] != '\0')
    {
            counter++;
    }
    Size = counter;
    String = new char [Size];
    for(int i=0; i < Size; i++)
            String[i] = temp[i];

 }

 //alternate constructor that allows for setting of the inital value of the string
 MyString::MyString(const char *message)
{
    int counter(0);
    while(message[counter] != '\0')
    {
            counter++;
    }
    Size = counter;
    String = new char [Size];
    for(int i=0; i < Size; i++)
            String[i] = message[i];
  }

    //copy constructor
  MyString::MyString(const MyString &source)
  {

     int counter(0);
    while(source.String[counter] != '\0')
    {
            counter++;
    }
    Size = counter;
    String = new char[Size];
    for(int i = 0; i < Size; i++)
            String[i] = source.String[i];
  }

 //Deconstructor
 MyString::~MyString()
{
    delete [] String;
 }

//Length() method that reports the length of the string
const int MyString::Length() const
{
    int counter(0);

    while(String[counter] != '\0')
    {
            counter ++;
    }
    return (counter);
 }

/*Parenthesis operator should be overloaded to replace the Set and Get functions of    your previous assignment. Note that both instances should issue exit(1) upon violation of the string array bounaries.
*/
 MyString& MyString::operator()(const int index, const char b)
{
    if(String[index] == '\0')
    {
            exit(1);
    }
    else
    {
            String[index] = b;
    }
}

char& MyString::operator()(const int i)
{
    if(String[i] == '\0')
    {
            exit(1);
    }
    else
    {
            return String[i];
    }
}
 /*Assignment operator (=) which will copy the source string into the destination string. Note that size of the destination needs to be adjusted to be the same as the source.
 */
   MyString& MyString::operator=(const MyString& rhs)
  {
    if(this != &rhs)
    {
            delete [] String;
            String = new char[rhs.Size];
            Size = rhs.Size;

            for(int i = 0; i < rhs.Size+1 ; i++)
            {
                    String[i] = rhs.String[i];
            }
    }

    return *this;
  }
 /*Logical comparison operator (==) that returns true iff the two strings are identical in size and contents.
 */
  bool MyString::operator==(const MyString& other)const
  {
    if(other.Size == this->Size)
    {
            for(int i = 0; i < this->Size+1; i++)
            {
                    if(&other == this)                               

                        return true;
            }
    }
    else
            return false;
    }

 //Negated logical comparison operator (!=) that returns boolean negation of 2
    bool MyString::operator!=(const MyString& other) const
  {
    return !(*this == other);
  }

 //Addition operator (+) that concatenates two strings
 const MyString MyString::operator+(const MyString& rhs) const
 {
    char* tmp = new char[Size + rhs.Size +1];

    for(int i = 0; i < Size; i++)
    {
            tmp[i] = String[i];
    }
    for(int i = 0; i < rhs.Size+1; i++)
    {
            tmp[i+Size] = rhs.String[i];
    }
    MyString result;

    delete [] result.String;
    result.String = tmp;
    result.Size = Size+rhs.Size;

    return result;
 }
 /*Addition/Assigment operator (+=) used in the following fashion: String1 += String2 to operate as String1 = String1 + String2
*/
MyString& MyString::operator+=(const MyString& rhs)
{
    char* tmp = new char[Size + rhs.Size + 1];

    for(int i = 0; i < Size; i++)
    {
            tmp[i] = String[i];
    }        for(int i = 0; i < rhs.Size+1; i++)
    {
            tmp[i+Size] = rhs.String[i];
    }

    delete [] String;
    String = tmp;
    Size += rhs.Size;

    return *this;
 }
 istream& operator>>(istream& input, MyString& rhs)
{
    char* t;
    int size(256);
    t = new char[size];
    input.getline(t,size);

    rhs = MyString(t);
    delete [] t;

    return input;
 }

 ostream& operator<<(ostream& output, const MyString& rhs)
{
    if(rhs.String != '\0')
    {
            output << rhs.String;
    }
    else
    {
            output<<"No String to output\n";
    }

    return output;
 }

  const int MyString::Find(const MyString& other)
 {
       int nfound = -1;

    if(other.Size > Size)
    {
            return nfound;
    }
    int i = 0, j = 0;
    for(i = 0; i < Size; i++)
    {
            for(j = 0; j < other.Size; j++)
            {
                    if( ((i+j) >= Size) || (String[i+j] != other.String[j]) )
                    {
                            break;
                    }

            }

            if(j == other.Size)
            {
                    return i;
            }

    }

    return nfound;
    }
  /*MyString::Substring(start, length). This method returns a substring of the original string that contains the same characters as the original string starting at location start and is as long as length.
 */

 MyString MyString::Substring(int start, int length)
 {
    char* sub;
    sub = new char[length+1];

    while(start != '\0')
    {
            for(int i = start; i < length+1; i++)
            {
                    sub[i] = String[i];
            }
    }
    return MyString(sub);
 }

 //Print() method that prints the string
 const void MyString::Print() const
 {

    for(int i=0; i < Size; i++)
    {
            cout<<String[i];
    }
    cout<<endl;
  } 
```

main.cpp 文件：

```
 #include <cstdlib>
  #include <iostream>
 #include "MyString.h"

  using namespace std;

 /*
 *
 */
int main (int argc, char **argv)
{

 MyString String1; // String1 must be defined within the scope

 const MyString ConstString("Target string");          //Test of alternate constructor

  MyString SearchString;  //Test of default constructor that should set "Hello World". W/o ()
 MyString TargetString (String1); //Test of copy constructor

  cout << "Please enter two strings. ";
 cout << "Each string needs to be shorter than 256 characters or terminated by /\n." << endl;
 cout << "The first string will be searched to see whether it contains exactly the second string. " << endl;

  cin >> SearchString >> TargetString; // Test of cascaded string-extraction operator

 if(SearchString.Find(TargetString) == -1) {
      cout << TargetString << " is not in " << SearchString << endl;
   }
   else {
    cout << TargetString << " is in " << SearchString << endl;
    cout << "Details of the hit: " << endl;
    cout << "Starting poisition of the hit: " << SearchString.Find(TargetString) << endl;
    cout << "The matching substring is: " << SearchString.Substring(SearchString.Find(TargetString), TargetString.Length());
  }
 return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T22:40:45.963

看起来内循环的不变量是 j 介于 0 和 end-2 之间。因此 j 永远不会等于 end （“匹配”条件）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T22:39:07.223

看来你的`found`逻辑有问题。

您的 for 循环定义为`for(int j = 0; j < end -1; j++)`

但是然后你测试`if(j == end)`

`j``end`在这个 for 循环中永远不能等于。考虑一下您在 if 语句中实际尝试测试的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T23:00:02.727

我认为您需要在循环之外声明 i 和 j 。
我认为你的意思是`j < end`而不是`j < end - 1`
我认为你需要`if((i+j>=end1) || String[i+j] != other.String[j])`而不只是 `if(String[i+j] != other.String[j])`

并且`if(j == end)`需要在内部循环之外。

这是一个类似的实现。

```
#include <string>
#include <iostream>
using namespace std;

class MyString
{
    private:
        string String;
        unsigned int Size;
    public:
        MyString() {
            this->String = "";
            this->Size = 0;                    
        }
        MyString(string initial_value) {
            this->String = initial_value;
            this->Size = initial_value.length();
        }        

        const int Find(const MyString& other);       
};

const int MyString::Find(const MyString& other)
{                  
    if (other.Size > Size)
        return -1; // if the substring is greater then us, there's no way we can have it as a substring
    int i = 0, j = 0;
    for (i = 0; i < Size; i++)
    {
        for (j = 0; j < other.Size; j++)  
            if ( ((i + j) >= Size) || (String[i + j] != other.String[j]) ) // if they don't match, offset exceeded Size, break
                break ;
        if (j == other.Size) // We went through the entire substring, didn't hit break so j == Other.size
            return i; // return index
    }

    return -1; // if we never return anything means, we didn't find it, so return -1
}

int main()
{
    string temp1, temp2;
    getline(std::cin, temp1, '\n');
    getline(std::cin, temp2, '\n');
    MyString main_string(temp1), sub_string(temp2);

    cout << main_string.Find(sub_string) << endl;
    return 0;
}

MyString MyString::Substring(int start, int length)
{
    char* sub = new char[length + 2]; // 2 byte buffer to be safe

    int i = 0;
    for (i = 0; i < length; i++)           
        sub[i] = String[start + i]; 
    sub[i] = '\0'; // always null terminated to be safe!           

    return MyString(sub);
 } 
```

如果有任何错误或问题，我很抱歉，没有测试过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-16T09:19:14.527

与其他人所说的一样，在您的 Substring 方法中，您有以下代码：

```
 while(start != '\0')
 {
     for(int i = start; i < length+1; i++)
     {
         sub[i] = String[i];
     }
} 
```

花点时间回顾一下 while 循环的逻辑，然后问自己“我想在这里实现什么，这段代码*实际上*做了什么？”

# c# - COM 互操作 InvalidCastException 与 IGroupPolicyObject

> ID：11042268
> 
> 赞同：0
> 
> 时间：2012-06-14T22:34:05.740
> 
> 标签：c#, .net, windows, com, group-policy

我使用 COM 定义了以下类，以使用 C#.NET 使用 IGroupPolicyObject：

```
 [ComImport, Guid("EA502722-A23D-11d1-A7D3-0000F87571E3")]
    public class GPClass
    {
        // The C# compiler will add a parameterless constructor that we will call          // to create an instance of the COM coclass.
    }

   [ComImport, Guid("EA502723-A23D-11d1-A7D3-0000F87571E3"),  
    InterfaceType(ComInterfaceType.InterfaceIsIUnknown)]  
    public interface IGroupPolicyObject  
    {  
        [System.Diagnostics.CodeAnalysis.SuppressMessage("Microsoft.Naming", "CA1716:IdentifiersShouldNotMatchKeywords")]  
        void New(  
            [MarshalAs(UnmanagedType.LPWStr)] string domainName,  
            [MarshalAs(UnmanagedType.LPWStr)] string displayName,  
            uint flags);  

        [System.Diagnostics.CodeAnalysis.SuppressMessage("Microsoft.Naming", "CA1704:IdentifiersShouldBeSpelledCorrectly")]  
        void OpenDsgpo(  
            [MarshalAs(UnmanagedType.LPWStr)] string path,  
            uint flags);  

        void OpenLocalMachineGpo(  
            uint flags);  

        void OpenRemoteMachineGpo(  
            [MarshalAs(UnmanagedType.LPWStr)] string computerName,  
            uint flags);  

        void Save(  
            [MarshalAs(UnmanagedType.Bool)] bool machine,  
            [MarshalAs(UnmanagedType.Bool)] bool add,  
            [MarshalAs(UnmanagedType.LPStruct)] Guid extension,  
            [MarshalAs(UnmanagedType.LPStruct)] Guid app);  

        void Delete();  

        void GetName(  
            [MarshalAs(UnmanagedType.LPWStr)] StringBuilder name,  
            int maxLength);  

        void GetDisplayName(  
            [MarshalAs(UnmanagedType.LPWStr)] StringBuilder name,  
            int maxLength);  

        void SetDisplayName(  
            [MarshalAs(UnmanagedType.LPWStr)] string name);  

        void GetPath(  
            [MarshalAs(UnmanagedType.LPWStr)] StringBuilder path,  
            int maxPath);  

        void GetDSPath(  
            uint section,  
            [MarshalAs(UnmanagedType.LPWStr)] StringBuilder path,  
            int maxPath);  

        void GetFileSysPath(  
            uint section,  
            [MarshalAs(UnmanagedType.LPWStr)] StringBuilder path,  
            int maxPath);  

        IntPtr GetRegistryKey(uint section);  

        uint GetOptions();  

        void SetOptions(  
            uint options,  
            uint mask);  

        void GetMachineName(  
            [MarshalAs(UnmanagedType.LPWStr)] StringBuilder name,  
            int maxLength);  

        uint GetPropertySheetPages(  
            out IntPtr pages);  
    } 
```

问题是当我尝试按如下方式使用 IGroupPolicyObject 时，我得到一个 InvalidCastException：

```
GPClass gpClass = new GPClass();
IGroupPolicyObject comGroupPolicyObject = (IGroupPolicyObject)gpClass; 
```

我得到的例外是： **无法将“ConfigureRemoteSources.GPClass”类型的 COM 对象转换为接口类型“ConfigureRemoteSources.IGroupPolicyObject”。此操作失败，因为 IID 为“{EA502722-A23D-11D1-A7D3-0000F87571E3}”的接口的 COM 组件上的 QueryInterface 调用因以下错误而失败：不支持此类接口（来自 HRESULT 的异常：0x80004002 (E_NOINTERFACE)） .**

关于如何解决这个问题的任何想法？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T23:57:44.673

You can find it back with Regedit.exe, HKCR\CLSID\{EA502722-A23D-11D1-A7D3-0000F87571E3}\InProcServer32 key. Which contains the ThreadModel value, it is set to "Apartment". That means that the coclass is not thread-safe, it must be called from a Single-Threaded Apartment. You'll recognize the acronym, that's what STA means in [STAThread].

There's commonly also a key in HKCR\Interface that declares the proxy/stub DLL that marshals an interface call across apartments. But that's missing. Which is what the error message really means, COM created a *separate* thread to give the component a safe home but then it couldn't find a way to marshal the call. Microsoft just didn't bother, this coclass is normally used from MMC by running the group policy editor, gpedit.msc. You must provide a similar safe home for this non-threadsafe component, an STA thread that pumps a message loop. The UI thread of a GUI program. You took care of STA with the attribute, probably not of the message loop. You might get away with it, if you notice deadlock then you didn't.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T23:22:26.453

It seems that this article has something clean but I wasn't able to get that working though. I got the issue solved by adding `[STAThread]` to the main method. (`using System.Threading;`)

# jquery - 高级 jQuery 查找

> ID：11042274
> 
> 赞同：0
> 
> 时间：2012-06-14T22:34:40.233
> 
> 标签：jquery, show-hide

我得到了以下重复的语法，我想保留所有`<h1>`后面的至少一个*不隐藏*的 div，但删除剩余的孤儿`<h1>`：

```
<h1>FIRST</h1>
<div></div>
<div></div>

<h1>SECOND</h1>
<div style="display:none"></div>
<div></div>

<h1>THIRD</h1>
<div style="display:none"></div>
<div style="display:none"></div>

<h1>FOURTH</h1>
<div></div>
<div></div> 
```

如您所见，有时在 div 之前有一个`<h1>`未隐藏的 div。所以在第三块我想隐藏`<h1>`，但不是在第二块或任何其他块中。

我尝试的基本上是寻找一种情况，即 an`<h1>`后面跟着另一个`<h1>`，而忽略了两者之间的所有隐藏元素：

```
$('h1').each(function(){
    if($(this).nextAll().not(':hidden') == $('h1')) { $(this).hide() }
}) 
```

不幸的是，它不会隐藏任何，`<h1>`我只是不知道为什么，尽管我怀疑这个`:hidden`属性是问题所在。**应该注意的是，在我的真实代码中，隐藏`<div>`不是由'display：none'隐藏，而是通过使用jQuerys `.hide()`！**

希望有人能帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T22:45:27.987

这就是你所追求的吗？

对于每一个H1，找到下一个H1之前的所有元素，如果都被隐藏了，就隐藏这个H1

```
$('h1').each(function() {
var elems = $(this).nextUntil('h1');
var elemsHidden = false;
for (var i = 0; i < elems.length; i++) {
    if ($(elems[i]).is(':hidden')) {
        elemsHidden = true;
    } else {
        elemsHidden = false;
    }
}

if (elemsHidden) {
    $(this).hide();
}

});​ 
```

**更新**

```
$('h1').each(function() {
    var elems = $(this).nextUntil('h1');
    for (var i = 0; i < elems.length; i++) {
        if (!$(elems[i]).is(':hidden')) {
            return;
        }
    }        
    $(this).hide();

});​ 
```

**JSFiddle**
[http://jsfiddle.net/Mm6Mz/1/](http://jsfiddle.net/Mm6Mz/1/)

**更新 2**

```
$('h1').each(function() {
    $(this).nextUntil('h1').is(':visible') ? 0 : $(this).hide() ;
});​ 
```

**JSFiddle**
[http://jsfiddle.net/Mm6Mz/2/](http://jsfiddle.net/Mm6Mz/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T22:42:54.430

我能想到的最干净的解决方案：

```
$('h1').each(function(){
  if ( $(this).nextUntil('h1').not(':hidden').length == 0 ) $(this).hide();
});​ 
```

这里的例子：http: [//jsfiddle.net/sagivo/sTveD/](http://jsfiddle.net/sagivo/sTveD/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T22:56:15.207

您可以选择 hidden`div`然后找到 prev `h1`。它减少了您的代码并使其保持简单

```
$('div:hidden').prev('h1').hide(); 
```

jsfiddle在这里[http://jsfiddle.net/tkYbh/](http://jsfiddle.net/tkYbh/)

# javascript - IE8 事件坐标

> ID：11042275
> 
> 赞同：5
> 
> 时间：2012-06-14T22:34:41.460
> 
> 标签：javascript, events, internet-explorer-8, coordinates, dom-events

我似乎找不到在 IE8 中获取事件坐标的方法，它只会触发诸如“pageX undefined”、“clientX undefined”等错误。虽然它在其他浏览器中运行良好。

这就是我想要做的：

```
document.onmousemove=setcoord;

function setcoord(e){
    var xxcoord = e.pageX||(e.clientX+document.body.scrollLeft);
    var yycoord = e.pageY||(e.clientY+document.body.scrollTop);
} 
```

是否有任何解决方法来获得该鼠标位置？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T22:53:42.090

以下似乎有效。我不确定它是否是正确的方法：

```
var x=event.clientX;
var y=event.clientY; 
```

# php - 使用通配符 mysql 查询使用 varchar 和 INT 字段搜索所有数据库

> ID：11042280
> 
> 赞同：0
> 
> 时间：2012-06-14T22:35:12.017
> 
> 标签：php, mysql

尝试进行通配符搜索以获取 org_name 字段中的任何文本，并获取其中包含 1 的任何 INT 字段输入到表单中，

例如，如果有人在表单中键入 Childminder，我希望所有带有 childminder INT 字段且其中包含 1 的记录都显示在结果中......

```
$sql_result= "SELECT * FROM table WHERE org_name LIKE '%" . $org_name . "%' 

OR carer LIKE '1'
OR childminder LIKE '1' "; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T22:39:00.937

不知道你为什么要做这样的事情，但听起来像是手动查询连接的候选者（提示：不要这样做，这很痛）。PDO 不支持绑定列名，因此如果您试图从库/其他已建立的解决方案中获得任何帮助，那么您就不走运了。

**更新**

如果您的架构没有更改并且您担心 SQLi，则可以使用一些匹配机制来获取搜索查询和可用（“可匹配”）列的数组并处理它们，报告匹配的列。然后，您只需从安全数据中进行查询。示例代码：

```
$columns = array(/* ... */);
$query = '/* ... */';
$matches = array();
foreach($columns as $column) 
    { 
    if(preg_match('/'.$column.'/', $query)) 
        { 
        $matches[] = $column; 
        } 
    }

$sqlQuery = 'you select';
foreach($matches as $match)
    {
    $sqlQuery .= ' OR '.$match.' = 1';
    } 
```

不是确切的代码，但你应该明白。

# objective-c - NSArrayController 添加类别

> ID：11042287
> 
> 赞同：0
> 
> 时间：2012-06-14T22:35:41.580
> 
> 标签：objective-c, nsarraycontroller

我正在尝试向 NSArrayController 类添加新类别：它可以选择第一项和最后一项。我这样做了：

```
#import "NSArrayController+selectEnds.h"

@implementation NSArrayController (selectEnds)

- (void)selectFirst:(id)sender {
    if (self.arrangedObjects !=nil){ BOOL ignore = [self setSelectionIndex:0];}
}
- (void)selectLast:(id)sender {
    if (self.arrangedObjects !=nil){ 
        NSUInteger lastItem = [self.arrangedObjects count]-1;
        BOOL ignore = [self setSelectionIndex:lastItem];}
}
@end 
```

我没有收到任何错误，但我想将此对象放入 IB 中，使用蓝色立方体并将按钮绑定到其“selectFirst”和“selectLast”方法。

但我有点迷茫：从哪个标准对象开始？一个标准的 ArrayController？然后，选择哪个类名来列出新方法？

感谢您的帮助……</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T23:34:33.930

由于您没有显示 NSArrayController+selectEnds.h（这是 IB 实际查看的内容），仅显示 NSArrayController+selectEnds.m，因此很难确切知道您做错了什么，但有两个合理的猜测。

首先，如果您希望这些新方法成为 NSArrayController 类的接口的一部分，您必须将它们添加到接口声明中，而不仅仅是添加到实现中。

其次，如果您希望 Xcode（或 IB）知道这些新方法是操作，则必须将它们标记为：在接口中，不要将它们标记为普通的 void 方法，而是将它们标记为 IBAction 方法。（在实现中，你可以做任何一个；没关系。）

所以， NSArrayController+selectEnds.h 应该是：

```
#import <Cocoa/Cocoa.h>
@interface NSArrayController (selectEnds)
- (IBAction)selectFirst:(id)sender;
- (IBAction)selectLast:(id)sender;
@end 
```

# python - 如何将 xaxis_date() 与 barh() 一起使用？

> ID：11042290
> 
> 赞同：8
> 
> 时间：2012-06-14T22:36:01.547
> 
> 标签：python, datetime, matplotlib, bar-chart

在下面的代码中， bdate 和 edate 都是 datetime.datetime() 对象：

```
pylab.barh(ypos, edate - bdate, left=bdate, height=TRMWidth ) 
```

但这会在 dates.py._to_ordinalf() 中抛出一个 AttributeError 方式：

> 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/pyplot.py”，第 1926 行，barh ret = ax.barh(bottom, width, height, left , **kwargs) 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/axes.py”，第 4774 行，barhorientation='horizo​​ntal'，** kwargs) 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/axes.py”，第 4624 行，条形宽度 = self.convert_xunits(width) 文件“/ Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/artist.py”，第 147 行，在 convert_xunits 返回 ax.xaxis.convert_units(x) 文件“/Library/Frameworks/ Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/axis。py”，第 1312 行，在 convert_units ret = self.converter.convert(x, self.units, self) 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib /dates.py”，第 1125 行，在转换中返回 date2num(value) 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/dates.py”，第 260 行, 在 date2num 中 else: return np.asarray([_to_ordinalf(val) for val in d]) File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/dates. py"，第 189 行，在 _to_ordinalf base = float(dt.toordinal())py”，第 1125 行，在转换中返回 date2num(value) 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/dates.py”，第 260 行，在 date2num否则：返回 np.asarray([_to_ordinalf(val) for val in d]) 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/dates.py”，第 189 行，在 _to_ordinalf base = float(dt.toordinal())py”，第 1125 行，在转换中返回 date2num(value) 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/dates.py”，第 260 行，在 date2num否则：返回 np.asarray([_to_ordinalf(val) for val in d]) 文件“/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/dates.py”，第 189 行，在 _to_ordinalf base = float(dt.toordinal())在 _to_ordinalf 基础 = 浮动（dt.toordinal（））在 _to_ordinalf 基础 = 浮动（dt.toordinal（））
> 
> AttributeError：“datetime.timedelta”对象没有属性“toordinal”

我认为如果我可以将日期时间推到 xaxis 并让它计算出细节，那就太好了；没那么多。关于如何使日期适合 xaxis 的任何建议？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-15T19:19:46.513

发生的事情是 matplotlib 实际上并没有使用 datetime 对象进行绘图。

日期首先转换为内部浮点格式。转换未设置为处理时间增量（可以说是疏忽）。

你基本上可以做你想做的事，你只需要先将日期显式转换为matplotlib的内部格式，然后调用`ax.xaxis_date()`.

作为一个简单的例子（其中大部分是生成要绘制的数据......）：

```
import datetime as dt
import matplotlib.pyplot as plt
import matplotlib.dates as mdates

def drange(start, end, interval=dt.timedelta(days=1)):
    output = []
    while start <= end:
        output.append(start)
        start += interval
    return output

# Generate a series of dates for plotting...
edate = drange(dt.datetime(2012, 2, 1), dt.datetime(2012, 6, 15), 
                      dt.timedelta(days=5))
bdate = drange(dt.datetime(2012, 1, 1), dt.datetime(2012, 5, 15), 
                      dt.timedelta(days=5))

# Now convert them to matplotlib's internal format...
edate, bdate = [mdates.date2num(item) for item in (edate, bdate)]

ypos = range(len(edate))
fig, ax = plt.subplots()

# Plot the data
ax.barh(ypos, edate - bdate, left=bdate, height=0.8, align='center')
ax.axis('tight')

# We need to tell matplotlib that these are dates...
ax.xaxis_date()

plt.show() 
```

![在此处输入图像描述](../Images/4a1f41a28e1fbea29b7b9189cef51b67.png)

# dynamics-crm-2011 - 在 CRM 2011 对话框中形成非标准超链接

> ID：11042291
> 
> 赞同：3
> 
> 时间：2012-06-14T22:36:02.293
> 
> 标签：dynamics-crm-2011, crm

在 CRM 2011 中，链接到另一个 CRM 记录或从对话和电子邮件中链接到外部网站非常容易。但是，当我尝试创建非 http 链接（例如 sip: 或 tel:）时，它们不起作用。我尝试使用超链接按钮并使用超链接语法：

`<hyperlink>`

`<name>555-555-5555</name>`

`<value>sip:5555555555</value>`

`</hyperlink>`

结果，它看起来像一个正确的超链接，但单击它什么也不做。检查源代码时，看起来好像超链接链接到对话页面本身。

还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T21:08:59.657

也许您可以在 CRM 中创建一个 HTML Web 资源并通过 URL + 查询字符串参数访问它。然后，您可以使用类似于以下内容的方式传播查询字符串并“重定向”到所需资源：

```
var myFixedUrl = ParseQuerystringIntoUrl();
window.open(myFixedUrl); 
```

`ParseQuerystringIntoUrl`您自己的自定义函数在哪里从查询字符串中删除详细信息并重建所需的 URL。

# backbone.js - 将 Backbone.sync 扩展为批量同步？

> ID：11042292
> 
> 赞同：8
> 
> 时间：2012-06-14T22:36:10.287
> 
> 标签：backbone.js

应该使用什么技术来实现 Backbone.sync 的批量插入/更新？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T10:01:08.870

我想这取决于您的使用场景，以及您想要更改多少调用代码。我认为你有两个选择：

**选项 1：不更改客户端（调用）代码**

奇怪的是[，Backbone.sync 的注释源](http://backbonejs.org/docs/backbone.html#section-164)将“批处理”作为覆盖该`sync`方法的可能原因：

> 使用 setTimeout 将快速更新批处理到单个请求中。

与其实际保存同步，不如将请求添加到队列中，并且每隔一段时间才批量保存。[`_.throttle`](http://underscorejs.org/#throttle)或者[`_.delay`](http://underscorejs.org/#delay)可以在这里帮助你。

**选项 2：更改客户端代码**

或者，您可以向集合`save`添加某种方法，而不是调用您的模型。`save`您必须跟踪实际修改了哪些模型，因此需要更新，因为据我所知，Backbone 只知道它们是否是新的（但我可能错了）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-20T07:38:07.860

我是这样做的

```
Backbone.originalSync = Backbone.sync;

Backbone.sync = function (method, model, options) {
    //
    // code to extend sync
    //

    // calling original sync 
    Backbone.originalSync(method, model, options);
} 
```

对我来说很好，我用它来控制来自任何模型或集合的每个 ajax 请求

# javascript - 在新页面中打开图像并在单击时打印

> ID：11042295
> 
> 赞同：1
> 
> 时间：2012-06-14T22:36:35.527
> 
> 标签：javascript, html, javascript-events

这是我的页面：[http ://budclarychevy.com/custom/parts-specials-test](http://budclarychevy.com/custom/parts-specials-test)

我的目标是让图像可点击并在新窗口中打开并提示打印。我能找到的最接近的方法是 JavaScript 中的 window.print() 函数，但它只是打印整个页面。我希望每张图片都能单独在可打印页面上打开。这可以用 JavaScript 实现吗？如果还有其他方法，那是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T22:59:39.030

您可以简单地使用一些 javascript 添加一个 onclick 事件。

```
<img src="http://budclarychevy.com/path/to/my/image.png"
width="660" height="225" alt="GM Oil Filters"
onclick="newWindow = window.open('http://budclarychevy.com/path/to/img.png');
    newWindow.print();"> 
```

如您所见，单击时会打开一个带有图片网址的新窗口。由于您有对新窗口对象的引用，您可以在其上调用“print()”函数。

干杯悠闲

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T22:41:56.147

你可以做类似的事情

```
function clicked(address) {

    popup = window.open(); // display popup
    popup.document.write(address.src); // This is where the image url goes which will just open up the image
    popup.print(); // then print the image

} 
```

在 HTML 中

```
<img src="image.jpg" onclick="clicked(this)" /> 
```

# awk - 使用 AWK 将特殊字符查找到字符串中

> ID：11042296
> 
> 赞同：2
> 
> 时间：2012-06-14T22:36:55.010
> 
> 标签：awk

需要对这样的文件应用过滤器：

```
TUPAC_0006:1:1:2554:2356#0/1    0   *   0   0   *   *   0   0   AGAGTTTTAAAATTTCCTTCCATTTCAGTATATGCATACTCAGTTCATCACATAGTAATATCAATAAAAAAATAAA    aK\`Zb_`aaaffdf]ffcfffafddffdffa[ffffcefgfacgggcgedaf[cQ^^_^cc`acadccbgbgcbb    XM:i:0
TUPAC_0006:1:1:4363:2353#0/2    0   *   0   0   *   *   0   0   CNNCNCCATTNATCGGTTACTACTATACTCAATGGATCCAATACCGTTACCAACGGAACAAGTTACCCTAGGGATA    UBBUBT[JTZBHOUIHQGNSVPQYVedcWeHHVK]aee`ca\KaaaLaS\\QW\Qadd_ehhh[cXUIPSaZYW[c    XM:i:0
TUPAC_0006:1:1:3197:2355#0/1    0   *   0   0   *   *   0   0   AGGGCAGAGGACCAACATGGGCATTTTGTTTATGAGCAACGTGGGTCTCA  acY\a\^Sc^`Z^aYff_dYcc^L\]\WRY__dKdYaY\LSIQQO\[W^a  XM:i:0
TUPAC_0006:1:1:3142:2353#0/2    0   *   0   0   *   *   0   0   ACGTCATTTCCACATTCAAAATCCGCAAAGCAGCCAATCACATCGTTCTCTGCAAACTTGTCTCCGTAGTTTTCAA    fffffcffffggggggcgggggggdfgggggcfgggggggggggccRfffgdggafggfffgeffgdWbd]dbdag    XM:i:0
TUPAC_0006:1:1:2463:2357#0/1    16  chr1:20982270-20982592|ENST00000415136.2|100_100    115 255 76M *   0   0   GCTGGGCAGTGAGTGCGGGATTGAGTTTGACGAGGAGAAAACGGCTGTCATTGACCATCACAACTATGACATCTCA    XO^WacPV\[O]`c`_cac^PdadcW]fccacaa\^ZZ`_V_V_R_Wfacfffddfdf^ccafff_cddda^cccY    XA:i:0  MD:Z:76 NM:i:0
TUPAC_0006:1:1:2463:2357#0/2    16  chr1:20982031-20982172|ENST00000415136.2|100_100    17  255 76M *   0   0   GCTGGGCAGTGAGTGCGGGATTGAGTTTGACGAGGAGAAAACGGCTGTCATTGACCATCACAACTATGACATCTCA    XO^WacPV\[O]`c`_cac^PdadcW]fccacaa\^ZZ`_V_V_R_Wfacfffddfdf^ccafff_cddda^cccY    XA:i:0  MD:Z:76 NM:i:0
TUPAC_0006:1:1:2463:2357#0/1    16  chr1:20982273-20982595|ENST00000415136.2|100_100    118 255 76M *   0   0   GCTGGGCAGTGAGTGCGGGATTGAGTTTGACGAGGAGAAAACGGCTGTCATTGACCATCACAACTATGACATCTCA    XO^WacPV\[O]`c`_cac^PdadcW]fccacaa\^ZZ`_V_V_R_Wfacfffddfdf^ccafff_cddda^cccY    XA:i:0  MD:Z:76 NM:i:0 
```

我只想保留在第二个字段上有 16 并且第一个字段以 /1 结尾的行。

期望的结果：

```
TUPAC_0006:1:1:2463:2357#0/1    16  chr1:20982270-20982592|ENST00000415136.2|100_100    115 255 76M *   0   0   GCTGGGCAGTGAGTGCGGGATTGAGTTTGACGAGGAGAAAACGGCTGTCATTGACCATCACAACTATGACATCTCA    XO^WacPV\[O]`c`_cac^PdadcW]fccacaa\^ZZ`_V_V_R_Wfacfffddfdf^ccafff_cddda^cccY    XA:i:0  MD:Z:76 NM:i:0
TUPAC_0006:1:1:2463:2357#0/1    16  chr1:20982273-20982595|ENST00000415136.2|100_100    118 255 76M *   0   0   GCTGGGCAGTGAGTGCGGGATTGAGTTTGACGAGGAGAAAACGGCTGTCATTGACCATCACAACTATGACATCTCA    XO^WacPV\[O]`c`_cac^PdadcW]fccacaa\^ZZ`_V_V_R_Wfacfffddfdf^ccafff_cddda^cccY    XA:i:0  MD:Z:76 NM:i:0 
```

我试图用这个 awk 行来做到这一点：

```
 awk '{if ($1 ~ //1/ && $2 == 16) print $0}' file 
```

但是字符“/”扰乱了 awk 语法。所以，我也试过：

```
 awk '{if ($1 ~ /"/1"/ && $2 == 16) print $0}' file 
```

但它不起作用。

有人知道如何使用 awk 在字符串中查找 /1 吗？

等效解决方案仅按第一个字段的最后一个数字进行过滤。但我不知道如何使用 awk 来做到这一点。

谢谢你的时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T22:39:15.243

试试这个：

```
awk '$1~/\/1$/ && $2==16' file 
```

* * *

用于`\/1$`匹配`/1`字段#1 的末尾。

# google-app-engine - 键 + 祖先的低级 AppEngine 查询

> ID：11042301
> 
> 赞同：0
> 
> 时间：2012-06-14T22:38:08.087
> 
> 标签：google-app-engine, ancestor, low-level-api

这个 AppEngine 任务看起来应该是微不足道的，但我还没有完全解决。我在 GrandParent/Parent/Child 关系中有一些数据，因此：

```
EntityName  Key
----------- -------
GrandParent W
GrandParent X
Parent      W.A
Parent      X.A
Parent      X.B
Child       W.A.i
Child       X.A.i
Child       X.A.ii    <=== matches X.*.ii
Child       X.A.iii
Child       X.B.i
Child       X.B.ii    <=== matches X.*.ii 
```

我正在尝试构建一个与键 X.*.ii 匹配的所有子项的查询。换句话说，它将从上面返回键 XAii 和 XBii，仅此而已。我正在使用低级查询机制，到目前为止我所拥有的是：

```
Entity gpX = new Entity("GrandParent","X");
Query q = new Query("Child");
q.setAncestor(gpX.getKey()); 
```

返回五个孩子。如果 i/ii/iii 属性是属性而不是键，这将是微不足道的，但它是键，我不清楚如何指定“ii”是搜索条件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T23:17:14.757

如果没有单独的属性，就无法做到这一点。App Engine 数据存储区中的所有过滤器都必须是相等或范围测试（相当于字符串前缀测试）；使用单个过滤器无法按照您描述的方式进行过滤。

# android - Splashscreen - 第一次使用共享偏好

> ID：11042302
> 
> 赞同：2
> 
> 时间：2012-06-14T22:38:16.990
> 
> 标签：android, splash-screen

您好，如果应用程序第一次启动（例如在安装后），我想在默认屏幕之后显示另一个启动屏幕

所以我写了这个。但是新的 Activity 没有启动它停留在 Splash 屏幕上。有人可以说它有什么问题吗？

```
import android.app.Activity;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.preference.PreferenceManager;
import android.widget.TextView;

    public class splash extends Activity {
         private Thread splashTread;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
            // TODO Auto-generated method stub
            super.onCreate(savedInstanceState);
            setContentView(R.layout.splash);

            SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
            if(!prefs.getBoolean("firstTime", false)) {
                // run your one time code
                 Intent i = new Intent(splash.this, main.class);

                         startActivity(i);
                SharedPreferences.Editor editor = prefs.edit();
                editor.putBoolean("firstTime", true);
                editor.commit();

             // thread for displaying the SplashScreen
             splashTread = new Thread() {
                 @Override
                 public void run() {
                     try {
                         synchronized(this){

                                 //wait 2 sec
                                 wait(2000);
                         }

                     } catch(InterruptedException e) {}
                     finally {
                         finish();

                         //start a new activity
                         Intent i = new Intent();
                         i.setClass(splash.this, main.class);
                                 startActivity(i);

                         stop();
                     }
                 }
             };

             splashTread.start();

        }

    }
    } 
```

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T07:52:42.883

从我所见，无论启动是否是第一次，您的代码都会运行相同的 Activity (main)。我假设您的目的是在第一次启动时立即启动备用启动屏幕，否则在 2 秒后继续进入主 Activity。另外，我建议使用 Handler 而不是 Thread，因为您只使用一次，并且会延迟使用。尝试这个：

```
 public class splash extends Activity
{
    private Handler handler = new Handler()
    {
        public void handleMessage(Message msg)
        {
            Intent i = new Intent(splash.this, main.class);
            splash.this.startActivity(i);
                                 this.finish()
        }
    };

    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);

        SharedPreferences prefs = PreferenceManager.getDefaultSharedPreferences(this);
        if(!prefs.getBoolean("first_time", false))
        {
            SharedPreferences.Editor editor = prefs.edit();
            editor.putBoolean("first_time", true);
            editor.commit();
            Intent i = new Intent(splash.this, otherSplash.class);
            this.startActivity(i);
                                 this.finish();
        }
        else
        {
            this.setContentView(R.layout.splash);
            handler.sendEmptyMessageDelayed(0, 2000);
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T00:52:03.637

而不是调用`finish()`......只需开始主要活动`FLAG_ACTIVITY_CLEAR_TOP`

[http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_CLEAR_TOP)

这是有关该标志的更多信息

[Android 中的 FLAG_ACTIVITY_CLEAR_TOP](https://stackoverflow.com/questions/7385443/flag-activity-clear-top-in-android)

更清楚地说，我的建议是你要么

1.  将默认活动设为`Splash`默认活动，并在超时后调用`Main`活动，或者，如果已经看到启动画面（首选项检查）。（即所有启动逻辑都在`Splash`活动中）
2.  进行`Main`活动检查以查看是否`Splash`应该调用（首选项检查），如果是，则使用相同的`CLEAR_TOP`标志启动它，然后`Splash`设置超时并在几秒钟后`Main`使用 再次设置。`CLEAR_TOP`（这在`Splash`和中混合了启动逻辑`Main`）

最终结果是`Main`，一旦完成，这将是堆栈上的唯一活动`Splash`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T13:10:30.277

如果您的意图是简单地拥有多个“Splash”屏幕，并且它们除了显示内容之外没有任何逻辑，那么为什么不使用单个活动并将视图替换为第二个启动的新视图。您还必须在 UI 线程上进行此更新，因此您需要使用 an`Handler`或使用 and `AsyncTask`，或者使用`View.post()`当前视图中的已知视图元素。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-15T06:04:53.937

我认为您不能/不应该从不是 UI 线程的线程开始活动。更改为 AsyncTask，或使用 Handler

# c# - 如何使用嵌套类从特定模型到 ViewModel，反之亦然？

> ID：11042304
> 
> 赞同：1
> 
> 时间：2012-06-14T22:38:36.090
> 
> 标签：c#, asp.net-mvc, entity-framework, model, viewmodel

我想知道一种将`Model`to`ViewModel`和`ViewModel`to `Model`without`AutoMapper`或类似东西转换的好方法，因为我想了解背后的内容并学习如何自己做。当然，模型是指由 EF 生成的类。

到目前为止，我做了这样的事情，但是在涉及嵌套类时遇到了一些问题：

```
 // to VM
    public static Author ToViewModel(EntityAuthor author)
    {
        if (author == null)
            return null;

        Author result = new Author();
        result.Id = author.ATH_ID;
        result.FirstName = author.ATH_FirstName;
        result.LastName = author.ATH_LastName;
        return result;
    }
    public static BlogPost ToViewModel(EntityBlogPost post)
    {
        if (post == null)
            return null;

        Experiment result = new Experiment();
        result.Id = post.BP_ID;
        result.Title = post.BP_Title;
        result.Url = post.BP_Url;
        result.Description = post.BP_Description;
        result.Author = ToViewModel(post.Author);
        return result;
    }

    // from VM 
    public static EntityAuthor ToModel(Author author)
    {
        if (author == null)
            return null;

        EntityAuthor result = new EntityAuthor();
        result.ATH_ID= author.Id;
        result.ATH_FirstName = author.FirstName;
        result.ATH_LastName = author.LastName;
        return result;
    }
    public static EntityBlogPost ToModel(BlogPost post)
    {
        if (post == null)
            return null;

        EntityBlogPost result = new EntityBlogPost();
        result.BP_ID = post.Id;
        result.BP_Title = post.Title;
        result.BP_Url = post.Url;
        result.BP_Description = post.Description;
        result.Author = ToModel(post.Author);
        return result;
    } 
```

注意：`EntityBlogPost`持有`EntityAuthor`. 我现在面临的一个问题是，当我想编辑一篇博客文章时，它的对应实体需要设置作者的外键：“BP_ATH_ID”，但这是“0”，因为编辑后的帖子的作者是“空”，因为我不想http-post作者。不过，作者需要在视图模型中，因为我想显示它（在 http-get 期间）。这是我的控制器以更好地理解（视图并不重要）：

```
 // GET: I make use of Author for this
    public ActionResult Edit(int id)
    {
        return View(VMConverter.ToViewModel(new BlogPostService().GetByID(id)));
    }

    //
    // POST: I don't make use of Author for this
    [HttpPost]
    public ActionResult Edit(BlogPost input)
    {
        if (ModelState.IsValid)
        {                
            new BlogPostService().Update(VMConverter.ToModel(input));
            return RedirectToAction("List");
        }
        return View(input);
    } 
```

目前，我的控制器后面有一些***服务***`Model`，它们只能在（如您在我的代码中看到的那样）工作。其目的是将这个“服务层”也用于其他应用程序。

```
 public void Update(EntityBlogPost post)
    {
        // let's keep it simple for now
        this.dbContext.Entry(post).State = EntityState.Modified;
        this.dbContext.SaveChanges();
    } 
```

好的，回到我的问题。处理这种转换模型->视图模型并返回的好方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T14:49:12.560

在我看来，这种方法在两个方向上都是有问题的。

*   **模型到 ViewModel（GET 请求）**

    如果您使用这样的方法...

    ```
    public static Author ToViewModel(EntityAuthor author) 
    ```

    ...问题是：你从哪里得到的`EntityAuthor author`？当然，您可以使用`Find`or`Single`或其他东西从数据库中加载它。这将具有所有属性的整个`EntityAuthor`实体具体化。你需要它们都在视图中吗？也许是的，在这个简单的例子中。但是想象一个大`Order`实体，它有很多对其他实体的引用——客户、送货地址、订单项目、联系人、发票地址等——你想显示一个只有一些属性的视图：到期日、客户姓名，联系人电子邮件地址。

    要应用该`ToViewModel`方法，您必须加载`EntityOrder`视图不需要的一大堆属性，甚至必须申请`Include`相关实体。这将再次加载这些实体的*所有属性，但您只需要在视图中选择它们。*

    仅加载视图所需属性的常用方法是*投影*，例如：

    ```
    var dto = context.Orders.Where(o => o.Id == someOrderId)
        .Select(o => new MyViewDto
        {
            DueDate = o.DueDate,
            CustomerName = o.Customer.Name,
            ContactPersonEmailAddress = o.ContactPerson.EmailAddress
        })
        .Single(); 
    ```

    如您所见，我引入了一个新的辅助类`MyViewDto`。现在您可以创建特定的`ToViewModel`方法：

    ```
    public static OrderViewModel ToMyViewModel(MyViewDto dto) 
    ```

    dto 和 viewModel 之间的映射是 AutoMapper 的一个很好的候选。（您不能将 AutoMapper 用于上述投影步骤。）

    另一种方法是直接投影到 ViewModel 中，即将`MyViewDto`上面替换为`OrderViewModel`. 尽管 ViewModel 所在的位置，但您必须向视图层公开`IQueryable<Order>`。有些人不喜欢它，我个人正在使用这种方法。

    缺点是你需要很多不同的 type 方法`ToMyViewModel`，基本上每个视图都需要另一种方法。

*   **ViewModel 到模型（POST 请求）**

    这是更大的问题，正如您在示例中已经注意到的那样：许多视图不显示完整的实体或显示应该是“仅查看”并且不回发到服务器的实体数据。

    如果您使用该方法（是否使用 AutoMapper）...

    ```
    public static EntityAuthor ToModel(Author author) 
    ```

    ...在大多数情况下，您显然不会创建完整的`EntityAuthor`对象，因为视图模型表示的视图`Author author`不会显示所有属性，并且至少不会将它们全部返回。使用这样的`Update`方法：

    ```
    this.dbContext.Entry(post).State = EntityState.Modified; 
    ```

    ...将部分破坏数据库中的实体（或在最好的情况下引发异常，因为某些必需的 FK 或属性设置不正确）。要实现正确的更新，您实际上必须合并存储在数据库中的值，并且保持不变，更改后的值会从视图回发。

    您*可以*使用针对`Update`视图量身定制的特定方法：

    ```
    public void UpdateForMyView1(EntityBlogPost post)
    {
        this.dbContext.EntityBlogPosts.Attach(post);
        this.dbContext.Entry(post).Property(p => p.Title).IsModified = true;
        this.dbContext.Entry(post).Property(p => p.Description).IsModified = true;
        this.dbContext.SaveChanges();
    } 
    ```

    这将是一种视图方法，它只允许编辑`Title`和`Description`. `EntityBlogPost`通过将特定属性标记为`Modified`EF 只会更新数据库中的那些列。

    另一种方法是再次引入 DTO 以及视图模型和那些 DTO 之间的映射方法：

    ```
    public static MyUpdateAuthorDto ToMyUpdateAuthorDto(Author author) 
    ```

    这只是属性复制或 AutoMapper。更新可以通过以下方式完成：

    ```
    public void UpdateForMyView1(MyUpdateAuthorDto dto)
    {
        var entityAuthor = this.dbContext.EntityAuthors.Find(dto.AuthorId);
        this.dbContext.Entry(entityAuthor).CurrentValues.SetValues(dto);
        this.dbContext.SaveChanges();
    } 
    ```

    这只会更新匹配 in`EntityAuthor`和 in的属性，`dto`并将它们标记为`Modified`它们确实发生了变化。这将解决您缺少外键的问题，因为它不是 dto 的一部分并且不会被更新。数据库中的原始值保持不变。

    请注意，它`SetValues`需要一个`object`as 参数。因此，您可以使用某种可重复使用的更新方法：

    ```
    public void UpdateScalarAuthorProperties(int authorId, object dto)
    {
        var entityAuthor = this.dbContext.EntityAuthors.Find(authorId);
        this.dbContext.Entry(entityAuthor).CurrentValues.SetValues(dto);
        this.dbContext.SaveChanges();
    } 
    ```

    此方法仅适用于标量和复杂属性的更新。如果允许您的视图更改相关实体或实体之间的关系，则该过程并不容易。对于这种情况，除了为每种更新编写特定方法之外，我不知道另一种方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T23:48:38.390

处理这些转换的一个好方法是使用**AutoMapper**。这就是创建 automapper 的目的，**真的**。

如果您想了解它是如何工作的，请使用 assemlby 反编译器（[**ILSpy**](http://wiki.sharpdevelop.net/ILSpy.ashx)就是其中之一）并在**AutoMapper.dll**上使用它。

这里的神奇词是**反射**。

从...开始：

```
foreach (PropertyInfo prop in typeof(EntityAuthor).GetProperties())
{
   ...
} 
```

反射机制允许您列出源类和目标类的所有属性，比较它们的名称，当您匹配这些名称时，您可以使用`SetValue`方法设置目标对象的属性，基于源对象的值。

# c++ - 带有 CRTP 的 C++ SFINAE，G++ 编译错误

> ID：11042313
> 
> 赞同：3
> 
> 时间：2012-06-14T22:39:35.757
> 
> 标签：c++, sfinae, crtp

我想知道以下代码是否有效。

最初的意图是，我喜欢一个基类，它将对某个成员的调用分派给派生类成员（如果存在），或者如果派生类没有该成员，则回退到默认行为。另一个用途是这个基类可以自己使用，`Derived`模板参数成为实现策略。`clang++`无论如何，下面的 MWE 可以在、Intel`icpc`和 MSVS上正确编译和运行。但是，它失败了`g++`（从 4.4 到 4.6，我使用过的任何版本），并在问题末尾显示错误消息。

如果我将`call`点 (1)、(2)、(3) 更改为`call_dispatch`（这是我最初所做的那种事情），`g++`就不会再抱怨了。我认为调度函数和调用者具有相同的名称不是一个好习惯。我只是好奇它是否会起作用，并且好奇地尝试一下（我不知道这个想法是如何产生的）。我这样做的理由是，在品脱 (1) 处，`call`使用一个参数调用，因此重载决议将不匹配其调用者，即零参数一。它也不会匹配`SFINAE`点 (2) 处的那个，因为`D2`没有成员，然后它应该匹配点 (3) 处的那个。就像 (1)-(3) 被命名的情况一样`call_dispatch`。

但`g++`不同意我和其他编译器。那么，是不正确的实现`g++`还是代码本身无效？除了错误信息真的很混乱。`void (B<D2>::*)()`和从何`&B<D2>::call`而来？Int 他调用的成员指针被定义为`D2`' 的成员。

```
#include <iostream>
#include <functional>

template <typename Derived>
class B
{
    public :

    void call ()
    {
        call<Derived>(0); //----------------------------------------- (1)
    }

    private :

    template <typename D, void (D::*)()> class SFINAE {};

    template <typename D>
    void call (SFINAE<D, &D::call> *) //---------------------------- (2)
    {
        static_cast<Derived *>(this)->call();
    }

    template <typename D>
    void call (...) //--------------------------------------------- (3)
    {
        std::cout << "Call B" << std::endl;
    }
};

class D1 : public B<D1>
{
    public :

    void call ()
    {
        std::cout << "Call D1" << std::endl;
    }
};

class D2 : public B<D2> {};

int main ()
{
    D1 d1;
    D2 d2;
    d1.call();
    d2.call();

    return 0;
} 
```

错误：

```
foo.cpp: In member function ‘void B<Derived>::call() [with Derived = D2]’:
foo.cpp:48:13:   instantiated from here
foo.cpp:11:9: error: ‘&amp;B<D2>::call’ is not a valid template argument for type ‘void (D2::*)()’ because it is of type ‘void (B<D2>::*)()’
foo.cpp:11:9: note: standard conversions are not allowed in this context 
```

**编辑**

虽然我还没有完全理解上面的代码出了什么问题。但我认为还有另一种方法，无需专门构建 SFINAE 类，但存档相同的效果。

```
#include <iostream>

template <typename Derived>
class B
{
    public :

    void call ()
    {
        call_dispatch(&Derived::call);
    }

    template <typename C>
    void call_dispatch (void (C::*) ())
    {
        static_cast<Derived *>(this)->call();
    }

    void call_dispatch (void (B<Derived>::*) ())
    {
        std::cout << "Call B" << std::endl;
    }

    private :
};

class D1 : public B<D1>
{
    public :

    void call ()
    {
        std::cout << "Call D1" << std::endl;
    }
};

class D2 : public B<D2> {};

int main ()
{
    D1 d1;
    D2 d2;

    d1.call();
    d2.call();

    return 0;
} 
```

基本上，因为`D1`和`D2`都是从 派生的`B`，所以表达式`&Derived::call`总是会被解析。在`D1`它解析为`&D1::call`，然后使用模板版本成员。在`D2`中，它没有自己的，`call`因此`&D2::call`解决 了 所以使用默认调用。`&B::call`
`&D2::call``B::call`

可以帮我看看这个新代码是否有任何缺陷？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T23:27:15.703

> void (B::*)() 和 &B::call 来自哪里？

指向成员的指针的类型不是您获得该指针的类型，而是定义该成员的类型。

```
struct base { int x; };
struct derived : base {};
int main() {
   std::cout << std::is_same< decltype(&derived::x), int (base::*) >::value << std::endl;
} 
```

上面的程序打印`1`. 在您的情况下，当您使用 时`&D::base`，编译器会发现`B<D2>::call`它是基本模板的成员，这就是表达式的结果：`void (B<D2>::*)()`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T23:13:40.773

您的实例化`SFINAE`期望函数指针模板参数是 type `void (D2::*)()`，而是 type `void (B<D2>::*)()`（因为`call`没有在 中覆盖`D2`，它使用在 中定义的那个`B<D2>`）。

**编辑**

`template <typename D> void call (SFINAE<D, &D::call> *)`在这里失败的不是实例化 。那里没有替换错误。替换错误发生在 的实例化中`SFINAE<B<D2>, &B<D2>::call>`，其中没有后备实例化，因此出现错误。

# node.js - 跨 node.js 和 nginx 的身份验证

> ID：11042316
> 
> 赞同：2
> 
> 时间：2012-06-14T22:40:07.087
> 
> 标签：node.js, authentication, nginx

由于我的大部分内容都是静态的，我打算让 nginx 来处理静态文件的服务。但静态内容也是私有的。不同的用户有不同的内容。

应用程序本身是用 node.js/express.js 编写的

我想知道我应该如何处理身份验证/授权。有什么，任何 nginx 模块。

像node.js这样的东西在memcached中放置了一些令牌，nginx根据请求或类似的东西查找？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T11:00:11.690

是的，有这样的功能，查看以下更详细的文章：

*   [http://wiki.nginx.org/XSendfile](http://wiki.nginx.org/XSendfile)
*   [http://kovyrin.net/2006/11/01/nginx-x-accel-redirect-php-rails/](http://kovyrin.net/2006/11/01/nginx-x-accel-redirect-php-rails/)

您所要做的就是让 Node.js 将文件的路径发送到 NGiNX，方法是使用该文件的位置设置标题“X-Accel-Redirect”。

# php - 数据排序 PHP

> ID：11042317
> 
> 赞同：0
> 
> 时间：2012-06-14T22:40:17.893
> 
> 标签：php

我正在尝试按布局和排序顺序对图像进行排序。我已经做到了，但不完全是我想要的样子。

```
<div id="sortableImages">
    <ul>
        <?php
            $galleryID = $_SESSION['newGalleryId'];

            $query  = "SELECT * 
                        FROM galleryimage 
                        WHERE galleryId = $galleryID
                        ORDER BY sort 
                        AND layout
                        ASC";
            $result = mysql_query($query);

            while($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
                $sortImageName = $row['OrgImageName']; 
                $sortPath = "../data/gallery/" . $_GET['edit'] . "/images/album/" . $sortImageName;
        ?>
            <li class="sortPhotos" id="recordsArray_<?php echo $row['id']; ?>">
                <img src="<?php echo $sortPath ?>"  />                            
            </li>
        <?php } ?>
    </ul>
</div> 
```

这给了我一个输出

```
<ul class="ui-sortable">
                    <li class="sortPhotos" id="recordsArray_1392">
                <img src="../data/gallery/208/images/album/front_cover.jpg"  />                            
            </li>
                    <li class="sortPhotos" id="recordsArray_1393">
                <img src="../data/gallery/208/images/album/007.jpg"  />                            
            </li>
                    <li class="sortPhotos" id="recordsArray_1394">
                <img src="../data/gallery/208/images/album/009.jpg"  />                            
            </li>
</ul> 
```

我希望能够让它看起来像

```
<h2>Layout 1</h2>
<ul class="ui-sortable">
                    <li class="sortPhotos" id="recordsArray_1392">
                <img src="../data/gallery/208/images/album/front_cover.jpg"  />                            
            </li>
</ul>
<h2>Layout 2</h2>
<ul>
                    <li class="sortPhotos" id="recordsArray_1393">
                <img src="../data/gallery/208/images/album/007.jpg"  />                            
            </li>
                    <li class="sortPhotos" id="recordsArray_1394">
                <img src="../data/gallery/208/images/album/009.jpg"  />                            
            </li>
</ul> 
```

我需要一点帮助来弄清楚如何在 PHP 中正确嵌套循环。任何帮助将是一个很大的帮助。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:52:52.913

```
<?php

$galleryID = $_SESSION['newGalleryId'];

$layout1 = $layout2 = "";

$query  = "SELECT * 
            FROM galleryimage 
            WHERE galleryId = $galleryID
            ORDER BY sort 
            AND layout
            ASC";
$result = mysql_query($query);

while($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
    $sortImageName = $row['OrgImageName']; 
    $sortPath = "../data/gallery/" . $_GET['edit'] . "/images/album/" . $sortImageName;
    if ($sortImageName == 'front_cover.jpg'){
        $layout1 .= 
            "<li class='sortPhotos' id='recordsArray_{$row['id']}'>
                <img src="$sortPath"  />                            
            </li>";
    } else {
        $layout2 .= 
            "<li class='sortPhotos' id='recordsArray_{$row['id']}'>
                <img src="$sortPath"  />                            
            </li>";
    }
} 
?>
<h2>Layout 1</h2>
<ul class="ui-sortable">
    <?=$layout1?>
</ul>
<h2>Layout 2</h2>
<ul>
    <?=$layout2?>
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T22:47:42.567

您需要适当地设置一个标志。

```
<div id="sortableImages">
    <h2>Layout 1</h2>
    <ul class="ui-sortable">

    // Etc...

    $first = true;
    while($row = mysql_fetch_array($result, MYSQL_ASSOC)) {
        $sortImageName = $row['OrgImageName']; 
        $sortPath = "../data/gallery/" . $_GET['edit'] . "/images/album/" . $sortImageName;

    ?>
        <li class="sortPhotos" id="recordsArray_<?php echo $row['id']; ?>">
             <img src="<?php echo $sortPath ?>"  />                            
        </li>
    <?php 
        if( $first === true) {
            $first = false;
    ?>
    </ul>
        <h2>Layout 2</h2>
    <ul>
    <?php
        }
    } 
?>
    </ul> 
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T22:52:38.740

$query = "SELECT * FROM galleryimage WHERE galleryId = $galleryID ORDER BY sort AND layout ASC";

应该：

```
SELECT 
   layout,sort, id, orgImageName 
FROM galleryimage
GROUP BY layout
ORDER BY layout, sort 
```

# django - Django ORM 查询而不是使用字典

> ID：11042318
> 
> 赞同：0
> 
> 时间：2012-06-14T22:40:23.447
> 
> 标签：django, django-models

我有以下型号：

```
class ProjectUser(models.Model):

    categories = models.ManyToManyField('UserCategory', blank=True, null=True)

    user_id = models.PositiveIntegerField(db_index=True)
    name = models.CharField(max_length=80)
    actual_rank = models.FloatField(default=0) 

class UserCategory(models.Model):
    name = models.CharField(max_length=100) 
```

我想做的是获取类别名称和它们在用户中出现的次数除以另一个对象的长度。

我正在创建一个类别字典 {'category': ocurrences }，然后对其进行迭代并将出现次数除以一个数字以获得类别排名。

也许这是一个很好的方法，但我想知道是否可以直接使用一些查询集方法来完成。我在很多地方都在做类似的事情，找到一种更好、更简洁的方法来解决它会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T22:51:02.797

这应该让所有具有类别名称的用户在他们的类别中，计算用户数量，然后将该数字除以您在其他地方获得的长度。

```
ProjectUser.objects.filter(categories__name__contains=category.name).count() / objectLength 
```

`category`成为您正在尝试分析的当前人。

# spring-mvc - 在登录尝试失败时提供登录页面 JSP

> ID：11042323
> 
> 赞同：1
> 
> 时间：2012-06-14T22:40:41.483
> 
> 标签：spring-mvc, spring-security

我的登录表单位于`/account/login`。对此 URL 的 GET 请求会导致调用请求处理程序，该处理程序`account/login`作为逻辑视图名称返回，并`/WEB-INF/jsp/account/login.jsp`得到服务。

```
@RequestMapping(value="/account/login", method=RequestMethod.GET)
public String login()
{
    return "account/login";
} 
```

POST 请求`/account/login`调用 my [`UsernamePasswordAuthenticationFilter`](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/UsernamePasswordAuthenticationFilter.html)，因此登录表单既由 (via GET) 提供，也由 (via POST) 提交`/account/login`。

这一切都很好。

但是，在登录失败的情况下，我希望`/WEB-INF/jsp/account/login.jsp`在**不进行 HTTP 重定向的情况下**获得服务，即将错误的用户名/密码发布到`/account/login`会服务`/WEB-INF/jsp/account/login.jsp`。

我试过[`SimpleUrlAuthenticationFailureHandler.onAuthenticationFailure()`](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/SimpleUrlAuthenticationFailureHandler.html#onAuthenticationFailure%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse,%20org.springframework.security.core.AuthenticationException%29)这样覆盖：

```
@Override
public void onAuthenticationFailure(HttpServletRequest request, HttpServletResponse response, AuthenticationException exception) throws IOException, ServletException
{
    request.getRequestDispatcher("account/login").forward(request, response);
} 
```

但是，当向 POST 错误的用户名/密码时，这会导致 404 响应`/account/login`。

我尝试过传入`/WEB-INF/jsp/account/login.jsp`,`/account/login.jsp`和许多其他组合，[`ServletRequest.getRequestDispatcher()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getRequestDispatcher%28java.lang.String%29)但似乎没有任何效果。

任何想法我做错了什么？我有一种感觉，调度程序正在尝试向我的请求处理程序而不是 JSP 本身进行调度，但是我对整个 JSP 调度工作流程还不够熟悉，不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T22:55:55.877

在发布问题后不久，我不小心想到了这一点。在这里回答，以防它对其他人有用。

在 中[`onAuthenticationFailure()`](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/AuthenticationFailureHandler.html#onAuthenticationFailure%28javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse,%20org.springframework.security.core.AuthenticationException%29)，我传递`/account/login`给[`getRequestDispatcher()`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletRequest.html#getRequestDispatcher%28java.lang.String%29)，并且我也调用[`include()`](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html#include%28javax.servlet.ServletRequest,%20javax.servlet.ServletResponse%29)而不是 a [`forward()`](http://docs.oracle.com/javaee/6/api/javax/servlet/RequestDispatcher.html#forward%28javax.servlet.ServletRequest,%20javax.servlet.ServletResponse%29)，如下所示：

```
@Override
public void onAuthenticationFailure(HttpServletRequest request, HttpServletResponse response, AuthenticationException exception) throws IOException, ServletException
{
    request.getRequestDispatcher("/account/login").include(request, response);
} 
```

使用不正确的用户名和/或密码提交登录表单会导致登录表单 JSP 被用作 POST 的响应，并且提交正确的用户名/密码仍然会调用我的[`UsernamePasswordAuthenticationFilter`](http://static.springsource.org/spring-security/site/docs/3.0.x/apidocs/org/springframework/security/web/authentication/UsernamePasswordAuthenticationFilter.html)!!

# python - reportlab 不同的下一页

> ID：11042327
> 
> 赞同：5
> 
> 时间：2012-06-14T22:40:58.333
> 
> 标签：python, reportlab

我正在尝试使用 Python 2.7 和 ReportLab 生成具有不同奇数/偶数页面布局（以允许非对称边框进行绑定）的 PDF 文档。为了使事情进一步复杂化，我试图每页生成两列。

```
def WritePDF(files):

    story = []
    doc = BaseDocTemplate("Polar.pdf", pagesize=A4, title = "Polar Document 5th Edition")

    oddf1  = Frame(doc.leftMargin, doc.bottomMargin, doc.width/2-6, doc.height, id='oddcol1') 
    oddf2  = Frame(doc.leftMargin+doc.width/2+6, doc.bottomMargin, doc.width/2-6, doc.height, id='oddcol2')
    evenf1 = Frame(doc.leftMargin, doc.bottomMargin, doc.width/2-6, doc.height, id='evencol1') 
    evenf2 = Frame(doc.leftMargin+doc.width/2+6, doc.bottomMargin, doc.width/2-6, doc.height, id='evencol2')
    doc.addPageTemplates([PageTemplate(id='EvenTwoC',frames=[evenf1,evenf2],onPage=evenFooter),
                          PageTemplate(id='OddTwoC', frames=[oddf1, oddf2], onPage=oddFooter)])

    ...

    story.append(Paragraph(whatever, style)) 
```

我想不通的是如何让 ReportLab 在左右（或奇偶）页面之间交替。有什么建议么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-18T16:43:32.773

我找到了我猜的解决方案！:)

我不得不深入研究源代码。我在`reportlab/platypus/doctemplate.py`第 636 行的文件中找到了解决方案。这不是我第一次这样做，因为文档非常有限......

现在，我发现了什么：

```
def handle_nextPageTemplate(self,pt):
        '''On endPage change to the page template with name or index pt'''
        if type(pt) is StringType:
            # ... in short, set self._nextPageTemplate
        elif type(pt) is IntType:
            # ... in short, set self._nextPageTemplate
        elif type(pt) in (ListType, TupleType):
            #used for alternating left/right pages
            #collect the refs to the template objects, complain if any are bad
            c = PTCycle()
            for ptn in pt:
                found = 0
                if ptn=='*':    #special case name used to short circuit the iteration
                    c._restart = len(c)
                    continue
                for t in self.pageTemplates:
                    if t.id == ptn:
                        c.append(t)
                        found = 1
                if not found:
                    raise ValueError("Cannot find page template called %s" % ptn)
            if not c:
                raise ValueError("No valid page templates in cycle")
            elif c._restart>len(c):
                raise ValueError("Invalid cycle restart position")

            #ensure we start on the first one
            self._nextPageTemplateCycle = c.cyclicIterator()
        else:
            raise TypeError("argument pt should be string or integer or list") 
```

我检查了它`self._nextPageTemplateCycle`的使用位置，所以这是我认为应该工作的（虽然没有测试）：

```
story = []
# ...
# doc.addPageTemplates([...])

story.append(NextPageTemplate(['pageLeft', 'pageRight'])) # this will cycle through left/right/left/right/...

story.append(NextPageTemplate(['firstPage', 'secondPage', '*', 'pageLeft', 'pageRight'])) # this will cycle through first/second/left/right/left/right/... 
```

当您想开始交替页面时，将其添加到故事一次。使用另一个普通的 NextPageTemplate 来停止这个循环（因为在源代码中，`del self._nextPageTemplateCycle`如果你这样做了）。

希望它有所帮助，并说它是否有效，我现在不能确定，但​​我会的！

# css - 强制浏览器使用仿斜体（斜体）而不是真正的斜体

> ID：11042330
> 
> 赞同：10
> 
> 时间：2012-06-14T22:41:48.693
> 
> 标签：css, fonts

我读过很多人在浏览器无法加载真正的斜体字体时遇到问题，另一方面我想强制浏览器使用仿斜体。这是我的 CSS 代码：

```
h2 {
    font-family:"Bell MT", Georgia, serif;
    font-size:31px;
    font-style:oblique;
    font-weight:normal;
    color:#e19614;
} 
```

当我将字体粗细设置为粗体或更大时，产生的效果是所需的倾斜字体，但每当我将粗细设置为正常（这是所需的设置）时，它就会回到真正的斜体字体，在这种情况下（Bell MT）很不一样。。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T05:46:45.407

要强制浏览器使用仿斜体，请使用要求`italic`或`oblique`当指定的字体系列不包含斜体或倾斜字体时的字体设置，给定情况的参数。

如果您要求使用粗斜体 Bell MT，您正在这样做。Bell MT 字体系列有普通、粗体和斜体字体，但没有粗斜体。因此，浏览器必须拒绝执行您的请求或通过算法倾斜粗体字体或算法粗体斜体字体来伪造它。

正如 biziclop 的回答所表明的那样，您可以使用 CSS 转换来制作*自己的*假（假）斜体，或者更确切地说是假斜体。但是在请求的斜体或斜体对浏览器可用的情况下，没有办法强制浏览器使用它自己的伪造机制。

**更新：** @JonHanna 的回答表明，可以通过在`@font-face`规则中指定字体而不指定斜体字体来欺骗浏览器使用假斜体。所以“对浏览器可用”是相对的。

PS 假斜体/斜体与斜体不同。排版师可以设计一种倾斜字体，它不仅仅是一种普通的倾斜字体，也不是经典的斜体样式。字体是斜体还是斜体在很大程度上取决于品味和命名。对于大多数实际用途，CSS 关键字`italic`和`oblique`是同义词，因为浏览器在请求倾斜但不存在时使用斜体，反之亦然。只有当字体同时具有斜体字体和斜体字体时，它们才会真正不同，这很少见。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T23:47:05.697

使用 css 转换的丑陋 hack：

[http://jsfiddle.net/DQnVS/1/](http://jsfiddle.net/DQnVS/1/)

```
span {
    display: inline-block;
 -webkit-transform: skewX(-30deg);
    -moz-transform: skewX(-30deg);
     -ms-transform: skewX(-30deg);
      -o-transform: skewX(-30deg);
         transform: skewX(-30deg);
​} 
```

​</p>

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-30T14:29:00.800

您可以通过别名字体来做到这一点。这仅在字体未被替换超出您建议的字体时才有效（`serif`此处不能使用 catch-all-of-type 关键字等），但您可以通过使用 web-font 来保证这一点。网络字体可以用作备份，因此您不需要总是下载它。

让我们先尝试不备份：

```
@font-face {
  font-family: 'Fake Oblique Font';
  font-style: normal;
  font-weight: 400;
  src: local('Bell MT'), local('Georgia');
}
@font-face {
  font-family: 'Fake Oblique Font';
  font-style: normal;
  font-weight: 700;
  src: local('Bell MT Bold'), local('Georgia Bold');
}
*
{
    font-family: 'Bell MT Bold', Georgia, serif;
}
.oblique
{
    font-style: oblique;
    font-family: 'Fake Oblique Font';
} 
```

在研究“Fake Oblique Font”如何工作时，浏览器只有这些声明中提到的表格可用。我的机器上没有可用的 Bell MT，但这确实成功地使用了带有强制倾斜样式的 Georgia 和 Georgia Bold：http: [//jsfiddle.net/k1w1zt0g/](http://jsfiddle.net/k1w1zt0g/)特别`x`是斜体和斜体之间最明显的不同假斜。

这不起作用的地方是，如果没有提到的字体可用，因为`local()`声明不能使用通用标签，如`serif`. 一个人可以决定接受它（如果你回退到`serif`那么你无论如何都会回退，所以你已经有点偏离你的目标设计了），或者使用 webfont 保证。MS 确实授权 Bell MT 用于网络使用，但我不会仅仅为了写证明而授权它，所以我将使用 Google Fonts 中的 Noto Serif 代替：

Noto Serif 是她的一个方便的选择，因为它提供了一整套正常、粗体、斜体和粗体斜体。这使我能够展示更全面的变化。删除以下代码使用的粗斜体字体，并通过在使用斜体时对斜体进行假粗体化，来查看浏览器也进行了更多的伪装：

```
@font-face {
  font-family: 'Noto Serif';
  font-style: normal;
  font-weight: 400;
  /* There are lots of pros and cons about just how you allow or disallow local fonts
     to be used. I'll go with allowing it here, to show it works throughout, but by
     all means change this to local('☺') to block local use, or so on. */
  src: local('Noto Serif'), local('NotoSerif'), url(http://fonts.gstatic.com/s/notoserif/v4/Lpe_acwQmwESv6cuCHE3rfesZW2xOQ-xsNqO47m55DA.woff) format('woff');
}
@font-face {
  font-family: 'Noto Serif';
  font-style: normal;
  font-weight: 700;
  src: local('Noto Serif Bold'), local('NotoSerif-Bold'), url(http://fonts.gstatic.com/s/notoserif/v4/lJAvZoKA5NttpPc9yc6lPYSoAJ3FdnHwSRdilZRLja4.woff) format('woff');
}
@font-face {
  font-family: 'Noto Serif';
  font-style: italic;
  font-weight: 400;
  src: local('Noto Serif Italic'), local('NotoSerif-Italic'), url(http://fonts.gstatic.com/s/notoserif/v4/HQXBIwLHsOJCNEQeX9kNzxsxEYwM7FgeyaSgU71cLG0.woff) format('woff');
}
@font-face {
  font-family: 'Noto Serif Fake Oblique';
  font-style: normal;
  font-weight: 400;
  src: local('Noto Serif'), local('NotoSerif'), url(http://fonts.gstatic.com/s/notoserif/v4/Lpe_acwQmwESv6cuCHE3rfesZW2xOQ-xsNqO47m55DA.woff) format('woff');
}
@font-face {
  font-family: 'Noto Serif Fake Oblique';
  font-style: normal;
  font-weight: 700;
  src: local('Noto Serif Bold'), local('NotoSerif-Bold'), url(http://fonts.gstatic.com/s/notoserif/v4/lJAvZoKA5NttpPc9yc6lPYSoAJ3FdnHwSRdilZRLja4.woff) format('woff');
}
*
{
    font-family: 'Noto Serif';
}
.oblique
{
    font-family: 'Noto Serif Fake Oblique'; /* Force faking, by only providing non-italic, non-oblique forms. */
    font-style: oblique;
} 
```

[http://jsfiddle.net/k1w1zt0g/1/](http://jsfiddle.net/k1w1zt0g/1/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-09T15:56:22.847

我实际上最喜欢[Biziclop 的答案](https://stackoverflow.com/a/11042884/7685153)，所以我开始摆弄他们提供的[这个 jsfiddle 。](http://jsfiddle.net/DQnVS/1/)这就是我想出的。

### HTML

```
<p>Hello <span class="superitalic">SUPERITALIC!</span> World!</p> 
```

### CSS

```
p {
  font-size: 100%;
}

p span {
  display: inline-block;
  -ms-transform: skewX(-10deg) translateY(-1px);
  -o-transform: skewX(-10deg) translateY(-1px);
  transform: skewX(-10deg) translateY(-1px);
  font-size: 90%;
  opacity: 0.65;
  padding-top: 0.25px;
  -ms-text-shadow: 1px 1px 0.1px rgba(0,0,0,0.004);
  -o-text-shadow: 1px 1px 0.1px rgba(0,0,0,0.004);
  text-shadow: 1px 1px 0.1px rgba(0,0,0,0.004);
} 
```

生成的 JSFiddle - [http://jsfiddle.net/ttxhtks0/](http://jsfiddle.net/ttxhtks0/)

[我从这篇文章](https://stackoverflow.com/a/22990803)中删除了文本阴影分辨率解决方法。让我知道它是否成立。

# jsf-2 - JSF Bound HtmlPanelGrid 未显示

> ID：11042336
> 
> 赞同：0
> 
> 时间：2012-06-14T22:42:00.817
> 
> 标签：jsf-2

我使用托管bean生成一个HtmlPanelGrid，然后将它绑定到xhtml文件中，像这样

```
 <h:panelGrid id ="questions"  binding="#{ui.generatedComponents}" /> 
```

On this page is a form, with a dropdown, and whenever a value is selected, it shows the page. 然而，当某些东西被选中时，每隔一个（静态的，即在 xhtml 页面中）组件都会显示出来，但绑定的组件永远不会显示出来。

但是，如果我在浏览器中重新请求该页面，它会显示它们。

多混乱。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:12:38.827

使用时`binding`，需要绝对确保该属性后面的属性在当前视图中被该组件**独占使用。**托管 bean 不应*在*会话范围内，因为它将在同一会话中的多个视图（浏览器窗口/选项卡）之间共享相同的属性。当然也不应该在应用范围内。托管 bean 应该在请求或视图范围内处于最高位置。视图范围对于这个特定目的最有意义。

后面属性的getter方法也应该**不**`binding`包含业务代码。它应该只返回财产，仅此而已。任何初始化都需要在支持 bean 类的 (post) 构造函数或 (action)listener 方法中完成。对此组件属性的任何操作都需要在支持 bean 类的 (action)listener 方法中完成。

 **不这样做可能会导致尴尬的行为。**

# serial-port - 传统指点杆设备 + Arduino/直接 USB 连接？

> ID：11042340
> 
> 赞同：-1
> 
> 时间：2012-06-14T22:42:30.823
> 
> 标签：serial-port, usb, arduino

我有一个非常旧的笔记本电脑上的指点杆模块。它有 4 个引脚，就像 USB 电缆一样。如果我将 USB 电缆焊接到 4 个引脚上并将其插入计算机，它会像真正的指点杆一样移动我的鼠标吗？如果我要将电线连接到引脚，然后将这些相同的电线连接到 Arduino 上的相应引脚，我会接收来自 D- 和 D+ 引脚的输出吗？以下是该设备的一些图片： [https](https://www.dropbox.com/s/6pnhnptcjzf5v7i/IMG_20120614_151526.jpg) ://www.dropbox.com/s/6pnhnptcjzf5v7i/IMG_20120614_151526.jpg和 [https://www.dropbox.com/s/ppyo5o14bx2xj8k/IMG_20120614_151532.jpg](https://www.dropbox.com/s/ppyo5o14bx2xj8k/IMG_20120614_151532.jpg)

这是USB端口的示意图。指点杆上的引脚功能是否与 USB 电缆相同？我会假设c1是电源，c2是数据+，c3是数据-，c4是接地？ [http://upload.wikimedia.org/wikipedia/commons/6/67/USB.svg](http://upload.wikimedia.org/wikipedia/commons/6/67/USB.svg)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:52:12.323

我最好的猜测是，这只是一个带有 2 个罐子的操纵杆。我会在一对针脚上放一个仪表，看看当你移动棒时欧姆读数是否会改变。我希望你会发现一对是上下轴，另一对是左右轴。

如果是这种情况，您可以使用 arduino 上的模拟输入读取位置。您也可以使用游戏端口将其连接到计算机。

我非常怀疑该板上是否有足够的电路用于 USB。

# python - Python Tkinter 温度转换器

> ID：11042342
> 
> 赞同：0
> 
> 时间：2012-06-14T22:42:39.093
> 
> 标签：python, tkinter, integer-division

所以我正在制作一个温度转换器，但我无法将它用于华氏到摄氏度的计算。它可以从摄氏温度到华氏温度，但它不会以另一种方式转换。我不确定是什么问题导致了这个我已经尝试了 intvars 和 stringvars，但似乎没有一个可以解决这个问题，我也尝试了 diff if 语句，但它只是无法从 fah 转换为 cel。有人可以帮助我并告诉我出了什么问题。这是我所拥有的：

```
from Tkinter import*

def convert():
    celTemp = celTempVar.get()
    fahTemp = fahTempVar.get()

    if celTempVar.get() != 0.0:
        celToFah = (celTemp *  9/5 + 32)
        print celToFah
        fahTempVar.set(celToFah)

    elif fahTempVar.get() != 0.0:
        fahToCel = ((fahTemp - 32) * (5/9))
        print fahToCel
        celTempVar.set(fahToCel)

def reset():
    top = Toplevel(padx=50, pady=50)
    top.grid()
    message = Label(top, text = "Reset Complete")
    button = Button(top, text="OK", command=top.destroy)

    message.grid(row = 0, padx = 5, pady = 5)
    button.grid(row = 1, ipadx = 10, ipady = 10, padx = 5, pady = 5)

    fahTempVar.set(int(0))
    celTempVar.set(int(0))

###MAIN###
root = Tk()
root.title("Temperature Converter")
mainframe = Frame(root)
mainframe.grid()

celTempVar = IntVar()
celTempVar.set(int(0))
fahTempVar = IntVar()
fahTempVar.set(int(0))

titleLabel = Label (mainframe, text = "Celcius/Fahrenheit Temperature", font = ("Arial", 20, "bold"), justify = CENTER)
titleLabel.grid(row = 1, column = 1, columnspan = 3, pady = 10, padx = 20)

celLabel = Label (mainframe, text = "Celcius: ", font = ("Arial", 16), fg = "red")
celLabel.grid(row = 2, column = 1, pady = 10, sticky = NW)

fahLabel = Label (mainframe, text = "Fahrenheit: ", font = ("Arial", 16), fg = "blue")
fahLabel.grid(row = 3, column = 1, pady = 10, sticky = NW)

celEntry = Entry (mainframe, width = 10, bd = 5, textvariable = celTempVar)
celEntry.grid(row = 2, column = 1, pady = 10, sticky = NW, padx = 125 )

fahEntry = Entry (mainframe, width = 10, bd = 5, textvariable = fahTempVar)
fahEntry.grid(row = 3, column = 1, pady = 10, sticky = NW, padx = 125 )

convertButton =Button (mainframe, text = "Convert", font = ("Arial", 8, "bold"), relief = RAISED, bd=5, justify = CENTER, highlightbackground = "red", overrelief = GROOVE, activebackground = "green", activeforeground="blue", command = convert)
convertButton.grid(row = 4, column = 1, ipady = 8, ipadx = 12, pady = 5, sticky = NW, padx = 55)

resetButton = Button (mainframe, text = "Reset", font = ("Arial", 8, "bold"), relief = RAISED, bd=5, justify = CENTER, highlightbackground = "red", overrelief = GROOVE, activebackground = "green", activeforeground="blue", command = reset)
resetButton.grid(row = 5, column = 1,ipady = 8, ipadx = 12, pady = 5, sticky = NW)

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T22:52:38.953

问题是这一行：

```
fahToCel = ((fahTemp - 32) * (5/9)) 
```

问题是`5/9`使用整数除法计算（因为它的两个输入都是整数）；它恰好等于`0`，这不是您想要的！有很多可能的修复方法，但最简单的方法是使用`5.0/9.0`明确处理浮点除法的方法。（您也可以更改相反的方向，即使只是为了清楚起见。是的，它目前正在工作，但这是因为乘法（具有浮点输入）`celTemp`是在除法之前处理的。）

# mysql - Magento 让所有订单号在两个日期之间隔夜发货

> ID：11042343
> 
> 赞同：2
> 
> 时间：2012-06-14T22:42:40.220
> 
> 标签：mysql, magento

标题几乎描述了它，我只需要在 6-8 到 6-12 之间获得通宵运输的所有订单号。

帮助表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T19:03:41.093

这是实现这一目标的至少一种方法......

```
$from           = "2012-06-08";
$to             = "2012-06-12";
$shippingMethod = "overnight_shipping";

$orderIds = Mage::getResourceModel('sales/order_shipment_collection')
                ->addAttributeToFilter('created_at', array(
                    'from'  => $from,
                    'to'    => $to,                    
                 ))
                ->getColumnValues('order_id')
             ;

$incrementIds = Mage::getResourceModel('sales/order_collection')
                        ->addAttributeToFilter('shipping_method', array('eq' => $shippingMethod))
                        ->addAttributeToFilter('entity_id', array('in' => $orderIds))
                        ->getColumnValues('increment_id')
                ;

echo "<ul>";
foreach($incrementIds as $incrementId) {
    echo "<li>" . $incrementId . "</li>";
}
echo "</ul>"; 
```

# android - 定位 Google API

> ID：11042348
> 
> 赞同：0
> 
> 时间：2012-06-14T22:42:58.577
> 
> 标签：android

我是 Android 开发和 Eclipse 的新手，我正在阅读各种教程。

在设置 Eclipse 时，我安装了 Android 2.3.3 SDK 平台以及该平台的 Google API。

当我为大多数教程程序创建新项目时，我选择 Android 2.3.3 作为我的目标。

但是，在浏览 Google Map Views 教程时，我被告知在创建项目时选择 Google API 而不是 Android 2.3.3。我这样做了，地图视图程序工作得很好。

但这似乎是一个二元或决定；我可以选择其中一个。Google API 是否包含 Android 2.3.3 平台中的所有功能？换句话说，我是否可以始终为我想要的平台级别选择 Google API 目标并且它会起作用？谢谢，院长

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:47:11.623

是的，它总是有效的，因为[Google API](https://developers.google.com/android/add-ons/google-apis/)是 Android SDK 的超集。

> Google APIs Add-On 是 Android SDK 开发环境的扩展，可让您为包含 Google 的一组自定义应用程序、库和服务的设备开发应用程序。该插件的一个核心功能是 Maps 外部库，它允许您向 Android 应用程序添加强大的地图功能。

除非需要，否则不应使用它。这将为系统节省在运行时加载这些不必要的功能所需的额外工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T22:48:55.520

目前，Google API SDK 主要用于其中的专有 Google Maps API。

当您需要其中的特定 API 时，您只想选择它作为您的目标。如果您不在应用中使用地图，通常可以将其关闭。它确实包括其随附的 Android SDK 中的所有内容。

当您选择它作为目标时，只有运行带有 Google API SDK 的 ROM 的设备才能在市场上看到您的应用程序。

# asp.net-mvc - 无法使用简单注入器为每个请求创建 DbContext

> ID：11042357
> 
> 赞同：5
> 
> 时间：2012-06-14T22:43:49.450
> 
> 标签：asp.net-mvc, entity-framework, dependency-injection, ninject, simple-injector

尝试注册我的 DbContext 时，Simple Inject 引发以下异常。

> 提供的连接字符串无效，因为它包含的映射或元数据信息不足。参数名称：连接字符串

我是 DI 的新手，可能会遗漏一些相当明显的东西。连接字符串看起来不错。它与通常用于创建 DbContext 的相同。[我在这里](https://stackoverflow.com/a/8927881/965935)尝试解决方案

```
public static class SimpleInjectorInitializer
{
    /// <summary>Initialize the container and register 
    // it as MVC3 Dependency Resolver.</summary>
    public static void Initialize()
    {
        var container = new Container();            
        InitializeContainer(container);
        container.RegisterMvcControllers(
            Assembly.GetExecutingAssembly());            
        container.RegisterMvcAttributeFilterProvider();       
        container.Verify();            
        DependencyResolver.SetResolver(
            new SimpleInjectorDependencyResolver(container));
    }

    private static void InitializeContainer(
        Container container)
    {
    }
} 
```

更新：我仍然没有解决我的问题，但它与[Ninject的这个问题非常相似](https://groups.google.com/forum/?fromgroups#!topic/ninject/4PKxjPT-BIA)

堆栈跟踪：

```
System.InvalidOperationException was unhandled by user code
  Message=The configuration is invalid. Creating the instance for type _AccountController failed. Error occurred while trying to get an instance of type _AccountController. The type initializer for 'Web.Controllers._AccountController' threw an exception.
  Source=SimpleInjector
  StackTrace:
       at SimpleInjector.Helpers.Verify(IInstanceProducer instanceProducer, Type serviceType)
       at SimpleInjector.Container.ValidateRegistrations()
       at SimpleInjector.Container.Verify()
       at Web.App_Start.SimpleInjectorInitializer.Initialize() in C:\workspace\BrowsarServer\QARSite\Web\App_Start\SimpleInjectorInitializer.cs:line 24
  InnerException: SimpleInjector.ActivationException
       Message=Error occurred while trying to get an instance of type _AccountController. The type initializer for 'Web.Controllers._AccountController' threw an exception.
       Source=SimpleInjector
       StackTrace:
            at SimpleInjector.InstanceProducers.InstanceProducer.ThrowErrorWhileTryingToGetInstanceOfType(Exception innerException)
            at SimpleInjector.InstanceProducers.InstanceProducer.GetInstance()
            at SimpleInjector.Helpers.Verify(IInstanceProducer instanceProducer, Type serviceType)
       InnerException: System.TypeInitializationException
            Message=The type initializer for 'Web.Controllers._AccountController' threw an exception.
            Source=Web
            TypeName=Web.Controllers._AccountController
            StackTrace:
                 at Web.Controllers._AccountController..ctor()
                 at lambda_method(Closure )
                 at SimpleInjector.InstanceProducers.InstanceProducer.GetInstance()
            InnerException: System.ArgumentException
                 Message=The supplied connection string is not valid, because it contains insufficient mapping or metadata information.
Parameter name: connectionString
                 Source=System.Data.Entity
                 ParamName=connectionString
                 StackTrace:
                      at System.Data.Objects.ObjectContext..ctor(EntityConnection connection, Boolean isConnectionConstructor)
                      at System.Data.Objects.ObjectContext..ctor(String connectionString, String defaultContainerName)
                      at Web.Models.BrowsarEntities..ctor() in C:\workspace\BrowsarServer\QARSite\Web\Models\Browsar.Designer.cs:line 90
                      at Web.Controllers._AccountController..cctor() in C:\workspace\BrowsarServer\QARSite\Web\Controllers\_AccountController.cs:line 15
                 InnerException: System.InvalidOperationException
                      Message=Unable to determine application context. The ASP.NET application path could not be resolved.
                      Source=System.Data.Entity
                      StackTrace:
                           at System.Data.Metadata.Edm.AspProxy.GetBuildManagerReferencedAssemblies()
                           at System.Data.Metadata.Edm.DefaultAssemblyResolver.GetAllDiscoverableAssemblies()
                           at System.Data.Metadata.Edm.DefaultAssemblyResolver.GetWildcardAssemblies()
                           at System.Data.Metadata.Edm.MetadataArtifactLoaderCompositeResource.LoadResources(String assemblyName, String resourceName, ICollection`1 uriRegistry, MetadataArtifactAssemblyResolver resolver)
                           at System.Data.Metadata.Edm.MetadataArtifactLoaderCompositeResource.CreateResourceLoader(String path, ExtensionCheck extensionCheck, String validExtension, ICollection`1 uriRegistry, MetadataArtifactAssemblyResolver resolver)
                           at System.Data.Metadata.Edm.MetadataArtifactLoader.Create(String path, ExtensionCheck extensionCheck, String validExtension, ICollection`1 uriRegistry, MetadataArtifactAssemblyResolver resolver)
                           at System.Data.Metadata.Edm.MetadataCache.SplitPaths(String paths)
                           at System.Data.Common.Utils.Memoizer`2.<>c__DisplayClass2.<Evaluate>b__0()
                           at System.Data.Common.Utils.Memoizer`2.Result.GetValue()
                           at System.Data.Common.Utils.Memoizer`2.Evaluate(TArg arg)
                           at System.Data.EntityClient.EntityConnection.GetMetadataWorkspace(Boolean initializeAllCollections)
                           at System.Data.Objects.ObjectContext.RetrieveMetadataWorkspaceFromConnection()
                           at System.Data.Objects.ObjectContext..ctor(EntityConnection connection, Boolean isConnectionConstructor)
                      InnerException: System.Reflection.TargetInvocationException
                           Message=Exception has been thrown by the target of an invocation.
                           Source=mscorlib
                           StackTrace:
                                at System.RuntimeMethodHandle._InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, SignatureStruct& sig, MethodAttributes methodAttributes, RuntimeType typeOwner)
                                at System.RuntimeMethodHandle.InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, Signature sig, MethodAttributes methodAttributes, RuntimeType typeOwner)
                                at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks)
                                at System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture)
                                at System.Data.Metadata.Edm.AspProxy.GetBuildManagerReferencedAssemblies()
                           InnerException: System.InvalidOperationException
                                Message=This method cannot be called during the application's pre-start initialization stage.
                                Source=System.Web
                                StackTrace:
                                     at System.Web.Compilation.BuildManager.EnsureTopLevelFilesCompiled()
                                     at System.Web.Compilation.BuildManager.GetReferencedAssemblies()
                                InnerException: 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-16T00:12:26.567

根本原因深藏在内部异常中。检查堆栈跟踪时，您将能够找到造成这种情况的原因。原因在于以下两个内部异常：

> InvalidOperationException：无法确定应用程序上下文。无法解析 ASP.NET 应用程序路径。

和：

> InvalidOperationException：在应用程序的预启动初始化阶段无法调用此方法。

换句话说，这个异常是由时序问题引起的。我不确定您是否可以更改连接字符串来解决此问题，但您也可以将初始化移到启动应用程序的稍后时刻。您可以按如下方式执行此操作：

1.  删除**SimpleInjectorInitializer.cs**类的`[assembly: WebActivator.PreApplicationStartMethod]`（顶行） 。
***   在全局 asax 事件中添加对该`SimpleInjectorInitializer.Initialize()`方法的调用。`Application_Start()`**

 **完成此操作后，对象图的初始化（尤其是验证）在预初始化状态之后完成，这对于 ASP.NET 环境中的 EF 来说似乎为时过早。

另一种选择是从方法中删除`container.Verify();`调用`SimpleInjectorInitializer.Initialize`，因为早期验证过程正在扼杀你。但是，请先阅读此[验证容器的配置](http://simpleinjector.codeplex.com/wikipage?title=How-to#Verifying_Configuration)，以查看替代方案，然后再执行此操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T06:48:54.367

尽管您使用了一个类`DbContext`，但它看起来像是从`ObjectContext`. 在这种情况下，您应该使用 an[`EntityConnectionStringBuilder`](http://msdn.microsoft.com/en-us/library/system.data.entityclient.entityconnectionstringbuilder.aspx)来构建连接字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T23:04:20.957

您可能会丢失连接字符串中的一些元数据信息。例如实体框架在连接字符串中有一些特殊的元数据，请参见下面的示例：

```
<add name="MyEntities" connectionString="metadata=res://*/MyEntitiesStore.csdl|res://*/MyEntitiesStore.ssdl|res://*/MyEntitiesStore.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=<your server>;Initial Catalog=<your DB>;Integrated Security=False;User ID=<user>;Password=<pass>;MultipleActiveResultSets=True&quot;" 
   providerName="System.Data.EntityClient" /> 
```**

# c# - 当我尝试通过 C# 将日期插入 Access 数据库时出现“INSERT INTO 语句中的语法错误”错误

> ID：11042358
> 
> 赞同：4
> 
> 时间：2012-06-14T22:43:51.330
> 
> 标签：c#, datetime, insert

我想将日期记录插入 Access 数据库。这是我的代码：

```
cmd.CommandText = "INSERT INTO AlarmHistory(Date) VALUES ('6/8/2012')"; 
cmd.ExecuteNonQuery(); 
```

`Syntax error in INSERT INTO statement.`它在第二行给出错误。

下面是显示我在 db 上的单元格数据类型的屏幕截图。

![db 中的单元格数据类型](../Images/a2e07b044c9a40fc222c9df4a13ded1a.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T22:48:10.000

使用参数

```
cmd.CommandText = "INSERT INTO AlarmHistory([Date]) VALUES (?)";  
cmd.Parameters.AddWithValue("@date", new DateTime(2012,06,8));
cmd.ExecuteNonQuery(); 
```

这将从[SqlInjection](http://en.wikipedia.org/wiki/SQL_injection)中保留您的代码，您可以不必担心引用您的值-

刚刚尝试创建一个虚拟数据库。这是日期字段。您应该用方括号括起来，因为`Date`它是保留关键字

[这里是](http://support.microsoft.com/kb/321266/en-us)Jet 4.0 的保留关键字列表

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T23:02:57.123

也许`date`是一个保留字。如果是这样，它应该被分隔（可能用括号）：

```
INSERT INTO AlarmHistory([Date]) VALUES ('6/8/2012') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T22:47:03.213

尝试使用

`"INSERT INTO AlarmHistory(Date) VALUES ('#6/8/2012#')"`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-14T22:48:49.483

您应该在应该解决您的问题的日期周围添加一个 # 符号。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-10-25T03:41:47.747

请记住在创建数据库表之前避免给字段名称 DATE 和 NAME

插入时会报错。例如..给出字段密码，日期而不是那样给出，password_user，bill_date

**注意：MS Access 表中的日期和密码不可接受的字段名称 .bcoz 它是一个关键字。**

**它应该可以解决您的问题**

谢谢。拉提娜。

# php - 如何将现有的 wordpress 博客整合到一个新的网站中？

> ID：11042360
> 
> 赞同：0
> 
> 时间：2012-06-14T22:44:09.067
> 
> 标签：php, wordpress, migration

我有一个 wordpress 博客，它托管在 public_html 目录中，但为了添加更多功能，我开发了一个单独的网站。我有一个新的索引页面和其他几个页面来满足我的需要。我的问题是我不能把 wordpress 放到一个新的目录中，比如博客，因为我想保持我所有的链接和内容相同。所以我想保留 wordpress 博客，但我也想有一个新的索引页面。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:50:02.323

您可以将您的 wordpress 安装移动到一个新文件夹中，没问题。只需确保更新 wordpress 配置中的路径，否则链接将无法正常工作。

如果您在博客文章中链接到博客页面，则必须手动编辑它们。

请参阅[移动 Wordpress](http://codex.wordpress.org/Moving_WordPress)和[将根安装移动到它自己的目录](http://codex.wordpress.org/Giving_WordPress_Its_Own_Directory)中（它们是不同的进程，听起来您想要第一个链接，但请阅读第二个链接以防万一）。

如果您希望外部链接继续工作，您可以 (a) 尝试捕获它们并使用 .htaccess 中的 URL 重写规则进行重定向，或者 (b) 用 PHP 之类的东西编写一个自定义的 404 错误页面来重定向它们。

# java - 逻辑错误或重新绘制/重新验证 Java JFrame

> ID：11042361
> 
> 赞同：2
> 
> 时间：2012-06-14T22:44:11.627
> 
> 标签：java, swing, jtextfield, inputverifier

我要做的是，当我输入详细信息时，它将验证按下按钮时 textFiled 是否为空，如果为空，它将显示一条消息。然后它将移动到类似于许多基于网络的注册表单的下一个文本文件，我试图找出为什么消息不会改变？

将此代码粘贴到 ecilpse 文件中并运行它应该显示简单的框架和我正在尝试做的事情。

当名字字段为空时，消息显示在框架的底部，谁能解释为什么当名字字段包含文本而中间名不包含文本时它不显示下一条消息？

大多数逻辑都在代码的底部。

```
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Toolkit;
import javax.swing.JFrame;
import javax.swing.JMenuBar;
import javax.swing.JMenu;
import javax.swing.JMenuItem;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.awt.Color;
import javax.swing.UIManager;
import javax.swing.JPanel;
import com.jgoodies.forms.layout.FormLayout;
import com.jgoodies.forms.layout.ColumnSpec;
import com.jgoodies.forms.layout.RowSpec;
import com.jgoodies.forms.factories.FormFactory;
import javax.swing.JLabel;
import javax.swing.JTextField;
import java.awt.Font;
import javax.swing.SwingConstants;
import javax.swing.JRadioButton;
import java.awt.event.ItemListener;
import java.awt.event.ItemEvent;
import javax.swing.JButton;
import javax.swing.JComboBox;

public class start {

private JFrame frame;
private JTextField tfFirstname;
private JTextField tfMiddlenames;
private JTextField tfSurname;

/**
 * Launch the application.
 */
public static void main(String[] args) {
    EventQueue.invokeLater(new Runnable() {
        public void run() {
            try {
                start window = new start();
                window.frame.setVisible(true);
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    });
}

/**
 * Create the application.
 */
public start() {
    initialize();
}

/**
 * Initialize the contents of the frame.
 */
private void initialize() {
    frame = new JFrame();

    frame.setBounds(100, 100, 505, 429);

    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    frame.getContentPane().setLayout(null);

    final JPanel panelClientNew = new JPanel();
    panelClientNew.setBackground(new Color(0, 102, 255));
    panelClientNew.setBounds(10, 11, 469, 299);
    frame.getContentPane().add(panelClientNew);
    panelClientNew.setLayout(null);

    JLabel lblFirstname = new JLabel("Firstname :");
    lblFirstname.setHorizontalAlignment(SwingConstants.RIGHT);
    lblFirstname.setVerticalAlignment(SwingConstants.BOTTOM);
    lblFirstname.setForeground(new Color(255, 255, 255));
    lblFirstname.setFont(new Font("Tahoma", Font.BOLD, 13));
    lblFirstname.setBounds(10, 16, 163, 14);
    panelClientNew.add(lblFirstname);

    tfFirstname = new JTextField();
    tfFirstname.setFont(new Font("Tahoma", Font.PLAIN, 13));
    tfFirstname.setBounds(177, 10, 282, 27);
    panelClientNew.add(tfFirstname);
    tfFirstname.setColumns(10);

    JLabel lblMiddlenames = new JLabel("Middlenames :");
    lblMiddlenames.setHorizontalAlignment(SwingConstants.RIGHT);
    lblMiddlenames.setForeground(new Color(255, 255, 255));
    lblMiddlenames.setFont(new Font("Tahoma", Font.BOLD, 13));
    lblMiddlenames.setBounds(10, 47, 163, 14);
    panelClientNew.add(lblMiddlenames);

    tfMiddlenames = new JTextField();
    tfMiddlenames.setFont(new Font("Tahoma", Font.PLAIN, 13));
    tfMiddlenames.setBounds(177, 41, 282, 27);
    panelClientNew.add(tfMiddlenames);
    tfMiddlenames.setColumns(10);

    JLabel lblSurname = new JLabel("Surname :");
    lblSurname.setHorizontalAlignment(SwingConstants.RIGHT);
    lblSurname.setForeground(new Color(255, 255, 255));
    lblSurname.setFont(new Font("Tahoma", Font.BOLD, 13));
    lblSurname.setBounds(10, 78, 163, 14);
    panelClientNew.add(lblSurname);

    tfSurname = new JTextField();
    tfSurname.setFont(new Font("Tahoma", Font.PLAIN, 13));
    tfSurname.setBounds(177, 72, 282, 27);
    panelClientNew.add(tfSurname);
    tfSurname.setColumns(10);

    JButton btnAdd = new JButton("Add");
    btnAdd.addMouseListener(new MouseAdapter() {
        @Override
        public void mousePressed(MouseEvent arg0) {
            /*
             * 
             * 
             *
             *I am trying to create a message that validates on certain circumstances
             * 
             * 
             * 
             */

            if(tfFirstname.getText().equals(null) || tfFirstname.getText().equals("") || tfFirstname.getText().equals(false)) {
                JPanel panelMessage = new JPanel();
                panelMessage.setBackground(new Color(30, 144, 255));
                panelMessage.setBounds(10, 321, 469, 29);
                frame.getContentPane().add(panelMessage);

                JLabel lblPersonSaved = new JLabel("Please Enter Firstname :");
                lblPersonSaved.setForeground(new Color(255, 255, 255));
                lblPersonSaved.setFont(new Font("Tahoma", Font.BOLD, 15));
                panelMessage.add(lblPersonSaved);
                frame.revalidate();
                panelMessage.revalidate();
                frame.repaint();

            }
            else if (tfMiddlenames.getText().equals(null) || tfMiddlenames.getText().equals("") || tfMiddlenames.getText().equals(false)) {
                JPanel panelMessage = new JPanel();
                panelMessage.setBackground(new Color(30, 144, 255));
                panelMessage.setBounds(10, 321, 469, 29);
                frame.getContentPane().add(panelMessage);

                JLabel lblPersonSaved = new JLabel("Please Enter Middlenames :");
                lblPersonSaved.setForeground(new Color(255, 255, 255));
                lblPersonSaved.setFont(new Font("Tahoma", Font.BOLD, 15));
                panelMessage.add(lblPersonSaved);

                frame.revalidate();
                panelMessage.revalidate();
                frame.repaint();

            }
            else if (tfSurname.getText().equals(null) || tfSurname.getText().equals("") || tfSurname.getText().equals(false)) {
                JPanel panelMessage = new JPanel();
                panelMessage.setBackground(new Color(30, 144, 255));
                panelMessage.setBounds(10, 321, 469, 29);
                frame.getContentPane().add(panelMessage);

                JLabel lblPersonSaved = new JLabel("Please Enter Surname :");
                lblPersonSaved.setForeground(new Color(255, 255, 255));
                lblPersonSaved.setFont(new Font("Tahoma", Font.BOLD, 15));
                panelMessage.add(lblPersonSaved);
                frame.revalidate();
                panelMessage.revalidate();
                frame.repaint();

            }
            else {

                //Validation has passed

            }
        }
    });
    btnAdd.setBounds(370, 265, 89, 23);
    panelClientNew.add(btnAdd);

}
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T23:30:34.930

我建议您使用 InputVerifier，因为这将在允许您离开 JTextField 之前验证 JTextField 的内容是否正确（您希望定义的任何方式）。现在它不会阻止您按下其他 JButton 等，因此如果您有提交按钮，则需要采取其他预防措施。检查 JTextField 是否为空的简单 InputVerifier 示例如下所示：

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

@SuppressWarnings("serial")
public class InputVerifierExample extends JPanel {
   public static final Color WARNING_COLOR = Color.red;
   private JTextField firstNameField = new JTextField(10);
   private JTextField middleNameField = new JTextField(10);
   private JTextField lastNameField = new JTextField(10);
   private JTextField[] nameFields = { 
         firstNameField, 
         middleNameField,
         lastNameField };
   private JLabel warningLabel = new JLabel("  ");

   public InputVerifierExample() {
      warningLabel.setOpaque(true);

      JPanel namePanel = new JPanel();
      namePanel.add(new JLabel("Name:"));
      MyInputVerifier verifier = new MyInputVerifier();
      for (JTextField field : nameFields) {
         field.setInputVerifier(verifier);
         namePanel.add(field);
      }
      namePanel.add(new JButton(new SubmitBtnAction()));

      setLayout(new BorderLayout());
      add(namePanel, BorderLayout.CENTER);
      add(warningLabel, BorderLayout.SOUTH);
   }

   private class SubmitBtnAction extends AbstractAction {
      public SubmitBtnAction() {
         super("Submit");
      }

      @Override
      public void actionPerformed(ActionEvent e) {
         // first check all fields aren't empty
         for (JTextField field : nameFields) {
            if (field.getText().trim().isEmpty()) {
               return;  // return if empty
            }
         }
         String name = "";
         for (JTextField field : nameFields) {
            name += field.getText() + " ";
            field.setText("");
         }
         name = name.trim();
         JOptionPane.showMessageDialog(InputVerifierExample.this, name, "Name Entered",
               JOptionPane.INFORMATION_MESSAGE);
      }
   }

   private class MyInputVerifier extends InputVerifier {

      @Override
      public boolean verify(JComponent input) {
         JTextField field = (JTextField) input;
         if (field.getText().trim().isEmpty()) {
            warningLabel.setText("Please do not leave this field empty");
            warningLabel.setBackground(WARNING_COLOR);
            return false;
         }
         warningLabel.setText("");
         warningLabel.setBackground(null);
         return true;
      }

   }

   private static void createAndShowGui() {
      JFrame frame = new JFrame("InputVerifier Example");
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      frame.getContentPane().add(new InputVerifierExample());
      frame.pack();
      frame.setLocationRelativeTo(null);
      frame.setVisible(true);
   }

   public static void main(String[] args) {
      SwingUtilities.invokeLater(new Runnable() {
         public void run() {
            createAndShowGui();
         }
      });
   }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T23:26:04.683

1.  看看[DocumentListener](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)，

2.  在 start_up 上仅启用第一个[JTextField](http://docs.oracle.com/javase/tutorial/uiswing/components/textfield.html)，如果在第一个 JTextField 中输入了任何（由您决定）字符，则启用第二个 JTextField，依此类推...，

3.  如果要过滤、更改或替换来自键盘的输出，请使用`DocumentFilter`

4.  [例如，将背景更改为 Color.red](https://stackoverflow.com/a/8582656/714968) (from `DocumentListeners events`)，如果其中一个`JTextFields`包含不正确的长度，例如数据

5.  同意`HFOE`关于[LayoutManagers](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

# mysql - 删除默认约束

> ID：11042362
> 
> 赞同：2
> 
> 时间：2012-06-14T22:44:18.347
> 
> 标签：mysql

我有一个 tableA，其中包含 desc tableA 命令的以下输出：

```
+---------+-------------+------+-----+---------+----------------+
| Field   | Type        | Null | Key | Default | Extra          |
+---------+-------------+------+-----+---------+----------------+
| id      | int(11)     | NO   | PRI | NULL    | auto_increment |
| name    | varchar(50) | NO   |     |         |                |
| city    | varchar(50) | YES  |     | NULL    |                |
| state   | char(2)     | YES  |     | NULL    |                |
| country | varchar(30) | YES  |     | NULL    |                |
| notes   | longtext    | YES  |     | NULL    |                |
| type    | varchar(50) | NO   |     | NULL    |                |
+---------+-------------+------+-----+---------+----------------+ 
```

现在有 3 列具有 NOT NULL 约束：

1.  ID
2.  姓名
3.  类型

对于列 id 和类型，我需要删除默认约束。基本上我想要默认值：无。我不想使用变通方法，例如 . 将 varchar 的默认值设置为 ''。

[从这个讨论Default-values-for-varchar-and-int-mysql-data-types](https://stackoverflow.com/questions/10605327/default-values-for-varchar-and-int-mysql-data-types)可以更清楚地看出 NULL、NONE 和 '' 之间的区别

我尝试使用以下命令：

```
alter table tableA alter column type drop default; 
```

查询运行良好，但没有行受到影响。当我运行 describe 命令时，默认值没有显示变化。

如果我将默认值设置为 '' 我会遇到不同的问题 - 数据库允许在数据库中输入空字符串。对我来说，这相当于为列的值插入 NULL，我不想允许这样做。

在这种情况下，我需要一些关于如何处理默认值的指导，在这种情况下，我不能允许空字符串作为数据库中的数据。我想提一下，我打算在代码中添加验证，以检查传入的数据是空字符串还是 NULL。但以防万一验证不起作用等，我想确保数据库可以拒绝添加此类数据。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T23:38:56.080

如果该列可以为空，则默认值或空值都是相同的。所以允许空，默认空实际上是无关紧要的，除非说

插入（名称，城市，类型）值（'Fred'，DEFAULT，'Caucasian'）

Null 不是空字符串。假设您在表中允许 null 但在应用程序中将其解释为空字符串，那么您的设计中有一个令人讨厌的缺陷。

如果你不想要空字符串，通常你会使用一个检查约束，据我所知，它仍然没有在 mysql 中实现。显然，这种缺乏通常通过插入触发器来解决。因此，您将检查触发器中的值，然后插入空字符串失败。

PS它不能解决完整性问题，但是如果您确实想要一种在应变为空时放入空值的方法，那么您不必区分空字符串和空值。

然后看看 nullif 函数。

# c - cublas 是否应该被 atlas 超越？

> ID：11042363
> 
> 赞同：1
> 
> 时间：2012-06-14T22:44:19.920
> 
> 标签：c, cuda, cublas

根据我对 cublas 和 atlas 的 dgemm 测量结果，atlas 在速度方面远远超过 cublas。这对于配备 Intel i7 950 和 Nvidia GTX470 的系统是否可以预期？

我以 50 为增量测试了大小为 10x10 到 6000x6000 的矩阵。Atlas 总是获胜。我测量了整个应用程序执行和乘法步骤。

其他人有这方面的经验吗？这是预期的结果吗？

提前致谢。

编辑：（相同的代码，在 Xeon X5670 和 Nvidia Tesla C2050 上的结果相同）

编辑 2：如果归因于 cublas 库的初始化，它似乎很慢。我继续努力。当我了解更多信息时，我会在这里更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T23:18:19.730

您是否使用了这两个库的单线程版本？据我了解，GotoBLAS 和 Atlas 在处理大型矩阵时都倾向于偷偷地使用多个线程。

也就是说，在大矩阵大小时，所使用的算法往往比低级实现更重要。朴素的矩阵乘法是 O(N^3)，而 Strassen 算法的扩展性要好得多，大约 O(N^2.81) 左右。然而，Strassen 算法恰好可以很好地向量化（对于更大的 SSE 和 AVX 寄存器，效率几乎提高了 2 到 8 倍，具体取决于浮点格式和寄存器大小）。

我不确定您提到的两个 GPU 处理双精度数学的能力如何。通常，它们针对单精度（32 位浮点数）进行了优化，在处理双精度时会下降到该速度的三分之一或四分之一。

您的测试中还有其他因素可能会影响结果。例如，您可能包括矩阵传输到 CPU 的时间。我不知道这是否符合现实世界的用例；我没有要测试的 Nvidia GPU。但我怀疑没有。通常有多个操作，并且矩阵不需要在操作之间转移。

我一直在使用 GCC 和 ICC C99 编译器提供的 SSE/AVX 矢量内置函数编写自己的低级 SSE3 矩阵函数；早期测试表明它在很大程度上击败了当前的 Fortran 实现，特别是在非常小的（比如高达 8x8，针对每种尺寸进行了优化）和非常大（超过 1000x1000，使用 Strassen 算法）尺寸的密集矩阵上。

# sql-server - 将数据加载到 SQL Server 数据库时，有什么比 Excel 更好的替代方法？

> ID：11042367
> 
> 赞同：1
> 
> 时间：2012-06-14T22:45:26.270
> 
> 标签：sql-server, excel, ssis

我在将电子表格加载到 SQL Server 数据库时遇到了很多麻烦。

目前，我正在使用 SSIS 包来加载数据，我必须进行大量调整才能加载数据：

*   所有数字都必须格式化为文本（否则它们无法正确加载）。
*   有时数字必须以单引号 (') 开头才能加载。
*   如果一列混合了数字单元格和文本单元格，则文本单元格必须位于文件的首位（否则仅加载数字而文本为 NULL）。
*   如果用户更改列名，则不会加载该文件。
*   如果用户更改选项卡名称，则不会加载该文件。
*   如果用户添加新列（即使在工作表的末尾），文件也不会加载。
*   文件中的额外表格不是问题，谢天谢地！
*   日期似乎很敏感，无论它们是否会正确加载。
*   Excel 文件的连接字符串必须包含“IMEX=1”，否则情况会更糟。
*   即使在 64 位系统上，计划的 SSIS 作业也必须以 32 位运行。

我一直在将数据（通常每个文件 200,000-500,000 行）加载到所有字段定义为`nvarchar`. 然后，当加载时，我在 SSIS 包的下一步中将该数据传输到带有类型数据字段的工作表。

我必须对用户提出的关于如何格式化 Excel 文件的所有要求真的很痛苦。我们通常必须多次发回文件，直到所有格式问题都正确后才能加载文件。我想消除这种颠簸。

我知道我不是唯一面临此类问题的人。所以，我必须问...

在将数据加载到 SQL Server 数据库中时，有什么比 Excel 更好的替代方法？

或者，我是不是走错了路？我应该使用 SSIS 以外的东西来加载 Excel 电子表格吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T23:48:13.830

你可以试试 OpenRowSet：

```
SELECT *
INTO SomeTable
From OpenRowSet('Microsoft.Jet.OLEDB.4.0', 
    'Excel 8.0;Database=\\servername\c$\filename.xls;HDR=YES;IMEX=1', [Sheet2$]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T00:17:45.417

不是一个真正的 SQL 答案，而是一个简单的答案：

您可以要求用户将数据复制并粘贴到 Excel 电子表格中，其中除了要包含的数据字段之外的所有内容都被锁定。这将避免描述的许多痛点。

# mysql - Mysql 以这种格式解析日期：2012-03-27T03:03:00？

> ID：11042372
> 
> 赞同：0
> 
> 时间：2012-06-14T22:46:00.793
> 
> 标签：mysql, datetime, hour

我有一个表格，将时间存储为简单的 varchar，格式类似于“2012-03-27T03:03:00”。

我想对这些数据使用 mysql 的日期函数。一些功能工作正常，即

```
mysql> select year('2012-03-14T11:28:32'), month('2012-03-14T11:28:32');
+-----------------------------+------------------------------+
| year('2012-03-14T11:28:32') | month('2012-03-14T11:28:32') |
+-----------------------------+------------------------------+
|                        2012 |                            3 |
+-----------------------------+------------------------------+
1 row in set (0.00 sec) 
```

但小时和分钟功能失败：

```
mysql> select hour('2012-03-14T11:28:32'), minute('2012-03-14T11:28:32');
+-----------------------------+-------------------------------+
| hour('2012-03-14T11:28:32') | minute('2012-03-14T11:28:32') |
+-----------------------------+-------------------------------+
|                           0 |                            20 |
+-----------------------------+-------------------------------+
1 row in set, 2 warnings (0.00 sec) 
```

我相信是我的日期格式中的'T'搞砸了mysql。如果我手动将其替换为空格，则这些功能将起作用：

```
mysql> select hour('2012-03-14 11:28:32'), minute('2012-03-14 11:28:32');
+-----------------------------+-------------------------------+
| hour('2012-03-14 11:28:32') | minute('2012-03-14 11:28:32') |
+-----------------------------+-------------------------------+
|                          11 |                            28 |
+-----------------------------+-------------------------------+
1 row in set (0.00 sec) 
```

有没有一些简单的方法可以告诉mysql解析'T'？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T23:03:52.403

那些 MySQL 日期和时间函数（[`HOUR`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_hour)例如）需要时间戳的*特定部分*。

因此，您需要使用[`TIME`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_time)和[`DATE`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date)分别从传递的时间戳中提取时间和日期：

提取时间：

```
select hour(time('2012-03-14T11:28:32')), minute(time('2012-03-14T11:28:32')); 
```

提取日期：

```
select year(date('2012-03-14T11:28:32')), month(date('2012-03-14T11:28:32')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T23:04:26.600

```
 SELECT HOUR(STR_TO_DATE('2012-03-14T11:28:32','%Y-%m-%dT%k:%i:%s')) 
```

STR_TO_DATE 对于像这个非闰年项目这样的垃圾日期返回 NULL 非常好。

```
 SELECT STR_TO_DATE('2011-02-29T11:28:32','%Y-%m-%dT%k:%i:%s') 
```

它还可以让你做一些事情，比如

```
 SELECT STR_TO_DATE('2011-02-28T11:28:32','%Y-%m-%dT%k:%i:%s') + INTERVAL 1 QUARTER 
```

或者

```
 SELECT STR_TO_DATE('2011-02-28T11:28:32','%Y-%m-%dT%k:%i:%s') - INTERVAL 35 MINUTE 
```

并让一切正常。

有关转换说明符，请参见此处。

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

# jquery - Building the data portion of $.ajax dynamically

> ID：11042374
> 
> 赞同：0
> 
> 时间：2012-06-14T22:46:23.480
> 
> 标签：jquery, ajax

I have a need to build the data string dynamically. This is not working, as it is just passing the param variable as a string.

```
var parameters = "{foo: 'test'}";
    $.ajax({
        url: 'test.php',
        data: parameters,
        type: 'get',
        dataType: 'json
    }); 
```

Any ideas?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:52:52.687

Well, first you assign a string to parameters variable, but then expect it to turn into object? ) Use object in the first place, like this:

```
var params = {foo: 'test'};
$.ajax({..., data: params, ...}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T22:53:14.833

```
var parameters = {foo:'test'};
//modify `parameters` dynamicaly
parameters[bar]='dynamic!';
$.ajax({
    //...
    data: (sendJSON?JSON.stringify(parameters):parameters) // sends params either JSON or form encoded
    //...
}); 
```

# javascript - 如何写一个简单的函数？

> ID：11042377
> 
> 赞同：12
> 
> 时间：2012-06-14T22:46:58.700
> 
> 标签：javascript, jquery

如何在 jQuery 中创建一个函数、调用它并将变量传递给它？这里是 Javascript 风格：

```
<script type="text/javascript">
function popup(msg) {
  alert(msg);
}
</script> 
```

然后，您只需将事件包含在 HTML 中：

```
<html>
<input type="submit" onclick="popup('My Message')" />
</html> 
```

jQuery 相当于什么？从所有“新手”教程中，它们都是不接受变量的静态函数。例如：

```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function() {
  $('button').click(function() {
    alert('hello, world');
   });
});
</script> 
```

我希望能够动态地包含不同的消息。上面的代码会影响所有按钮并输出相同的消息“你好，世界”。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-14T22:53:56.970

如果您希望消息是动态的，您将要使用`data-attributes`：

```
<input class='message-button-' type="submit" data-message="My Message" /> 
```

然后在一个单独的 javascript 文件中：

```
// equivalent of $(document).ready(function(){...
$(function(){

  // Functionality starts here
  $('.message-button').on('click', function(e){
    alert($(this).data('message'));
  })

}); 
```

现在该函数将在任何时候单击带有类的按钮时执行`.message-button`，并且它将使用自定义属性 data-message 来显示一条消息。

希望这可以帮助！:)

更新：

请注意，不显眼地执行 javascript 被认为是最佳实践。有些人提到仍然`onclick`像您在示例中所做的那样使用该属性，不要那样做。`.on('click', function(){})`使用 jquery 的方法像我在这里展示的那样绑定事件。

如果您的点击项目是一个锚标记`<a>`，那么您可以通过使用以下方式阻止 href 被关注`e.preventDefault`：

```
$('a').on('click', function(e){
  e.preventDefault()
}) 
```

另外，如果您需要知道，这`$('.message-button')`是使用 css 选择器来抓取 dom 元素。任何有效的 CSS 选择器通常都可以在那里工作。

**一步步**

首先，我们需要将所有代码包装在一个由 jQuery 提供的函数中，该函数等待文档准备好处理 javascript 操作和 dom 操作。长格式版本是`$(document).ready(function(){ /* CODE GOES HERE */ })`，但我使用的版本是快捷方式`$(function({ /* CODE GOES HERE */ })`：

```
$(function(){
}) 
```

接下来，我们需要将一个事件绑定到我们的按钮。因为我们已经给了它 class `.message-button`，所以我们可以使用 jQuery 来抓取该元素并将 'click' 事件绑定到它：

```
$(function(){
  // Functionality starts here
  $('.message-button').on('click', function(e){
    // Code here executes when the input button is clicked
  })

}); 
```

事件处理程序内部`this`重新绑定以直接指向触发事件的 HTML 元素。包装在 $() 中使我们可以访问 jquery 方法。因此： $(this) 使用非常频繁。jQuery 为我们提供了`.data()`访问`data-*`元素上的任何方法并为我们提供值的方法，这就是它`alert()`正在做的事情。

```
$(function(){
  // Functionality starts here
  $('.message-button').on('click', function(e){
    alert($(this).data('message'));
  })

}); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-09-07T05:36:49.477

这是我最好的方法，就像 javascript 一样：

## ---- 像这样使用 jQuery 创建函数

> ```
> <script>$(document).ready(function(){
>     popup=function(msg){
>       alert(msg);
>     }});
> </script> 
> ```

而且您无需更改正文中的代码

> ```
> <html>
> <input type="submit" onclick="popup('My Message')" />
> </html> 
> ```

这是示例[http://jsfiddle.net/PLnF3/](http://jsfiddle.net/PLnF3/)

## ---- 但是等等，如果您只需要显示一条警报消息，也许这个示例是最好的：

> ```
> <html>
> <input type="submit" onclick="alert('My Message')" />
> </html> 
> ```

您不需要任何 javascript 或 jQuery 来执行此操作，只需在按钮上使用 alert('My Message') 即可。示例[http://jsfiddle.net/PLnF3/1/](http://jsfiddle.net/PLnF3/1/)

## ---- 如果您想使用 jQuery 获得更好的外观，可以使用 jQuery Dialog()。

这里的例子[http://howto.software-mirrors.com/2013/09/how-to-make-jquery-popup-window.html](http://howto.software-mirrors.com/2013/09/how-to-make-jquery-popup-window.html) 这是代码：

> ```
> <script>
>     $(document).ready(function() {
>         popup = function(msg) {
>             $("<div>" + msg + "</div>").dialog();
>         }
>     });
> </script> 
> ```

而且你不需要改变你身上的html代码。

> ```
> <html>
> <input type="submit" onclick="popup('My Message')" />
> </html> 
> ```

这里的例子[http://jsfiddle.net/PLnF3/2/](http://jsfiddle.net/PLnF3/2/)

请记住，要能够使用 jQuery 对话框，您需要 jquery.js、jquery-ui.js 以及 jquery.css 主题。[在http://howto.software-mirrors.com/2013/09/how-to-make-jquery-popup-window.html](http://howto.software-mirrors.com/2013/09/how-to-make-jquery-popup-window.html)阅读更多内容

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-14T22:53:41.183

你会给每个按钮一个不同的 ID，像这样：

```
<input type="submit" id="submit-something" onclick="popup('My Message')" /> 
```

然后：

```
$(document).ready(function() {
    $('#submit-something').click(function() {
        alert('My message');
    });
}); 
```

此外，如果任务非常重复，您可以使用另一个函数来创建函数：

```
function messageHandler(message) {
    return function() {
        alert(message);
    };
}

$(document).ready(function() {
    $('#submit-something').click(messageHandler('My message'));
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-14T22:51:48.320

您应该将消息存储在一个`data-*`属性中：

```
<button data-message="Hi there!">...</button> 
```

```
$('button').click(function() {
    alert($(this).data('message'));
}); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-14T22:49:29.077

```
$(document).ready(function() {
    var message = "foo"; // You might need to move it to the global scope,
                         // denepends on what you want to do with it.
  $('button').click(function() {
    alert(message);
   });
   ...
   ...
   message = "hello world";
}); 
```

值得一说：

> 如何在 jQuery 中创建函数

没有这样的东西，在jQuery中创建一个函数。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-14T22:51:33.117

如果您绝对需要将数据存储在 HTML 代码中，数据属性是一个不错的选择：

```
<button class="alert" data-msg="My Message">Click me</button> 
```

JavaScript：

```
$(document).ready(function() {
  $('button.alert').click(function() {
      var msg = $(this).data('msg');  // access HTML attribute data-msg
      alert(msg);
  });
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-14T22:51:47.313

一种解决方案：使用参数等属性。

```
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript">
$(document).ready(function() {
  $('button').click(function() {
    alert($(this).attr("message"));
   });
});
</script>
<button message="personal message 1">Botton 1</button>
<button message="personal message 1">Botton 2</button> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-15T05:29:02.683

我已经尝试了一些建议，效果很好..

--html 按钮

```
<input type="submit" value="Submit 1" class="message" data-message="Sample Message 1"/>
<input type="submit" value="Submit 2" class="message" data-message="Sample Message 2"/> 
```

--jquery 按钮点击

```
$('.message').live('click', function(){
      alert($(this).data('message'));
}); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-10-09T16:24:23.257

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>POS</title>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<script>

function getUnitPrice(){
        var item = document.getElementById('item').value;
        if(item==0){
            document.getElementById('unitprice').value = "36000.00";
        }
        if(item==1){
            document.getElementById('unitprice').value = "2500.00";
        }
        if(item==2){
            document.getElementById('unitprice').value = '14000.00';
        }
        if(item==3){
            document.getElementById('unitprice').value = '40000.00';
        }
        if (item==" "){
            document.getElementById('unitprice').value = '0';
        }

}

function calcSubtotal(){
    var qty = document.getElementById('quantity').value;
    var price = document.getElementById('unitprice').value;
    if(isNaN(qty)||isNaN(price)){
        alert("Please enter valid values");

    }
    else{
        var subtotal= eval(price) * eval(qty);
        document.getElementById('subtotal').value = subtotal;
    }

}

function calcDiscount(){

    var discRate = document.getElementById('discountRate').value;
    var discAmount = document.getElementById('subtotal').value;

    if(isNaN(discRate)||isNaN(discAmount)){
        alert("Please enter valid discount");
        return;
    }
    if(discRate < 5 || discRate > 20 ){
        alert("Please enter valid discount");
        return;
    }

    var discount = eval(discAmount) * eval(discRate)/100;
    document.getElementById('discountAmount').value = discount;
    document.getElementById('total').value= discAmount - discount;

}

function calcBalance(){

    var cash = document.getElementById('cash').value;
    var total = document.getElementById('total').value;

    if(isNaN(cash)){
        alert("Enter valid amount");
        return;
    }

    var bal = eval(total) - eval(cash);
    document.getElementById('balance').value = bal;

}

</script>

</head>

<body class="container">
    <div class="panel panel-primary" style="margin-top: 10px;">
        <div class="panel-heading">
            <p style="font-size: 36px; margin: 0;"><strong>Kumara Super Centre</strong></p>
            <p style="font-size: 16px; margin: 0;">No. 300, Ja-ela Road, Gampaha. Tel: 033-2232526</p>
        </div>
        <div class="panel-body">
        <table class="table table-hover">
            <tr>
                <th class="text-center">Item</th>
                <th class="text-center">Quantity</th>
                <th class="text-center">Unit Price</th>
                <th class="text-center">Amount</th>
            </tr>
            <tr>
                <td class="col-lg-5">
                    <select class="form-control" id="item" required onChange="getUnitPrice()">
                        <option value="">Select one</option>
                        <option value="0">Television</option>
                        <option value="1">FM Radio</option>
                        <option value="2">DVD Player</option>
                        <option value="3">Surround System</option>
                    </select>
                </td>
                <td class="col-lg-2">
                    <input class="form-control" type="number" value="0" id="quantity" name="quantity" required onKeyUp="calcSubtotal()" />
                </td>
                <td class="col-lg-2">
                    <input class="form-control" type="number" value="0" id="unitprice" name="unitprice" readonly />
                </td>
                <td class="col-lg-3">
                    <input class="form-control" type="number" value="0" id="subtotal" name="subtotal" readonly />
                </td>
            </tr>
        </table>
        <table class="table" style="float: right; width: 600px;">
            <tr style="border:none">
                <td class="text-center col-lg-3"><strong>Discount Rate (%)</strong></td>
                <td class="col-lg-2"><input class="form-control" type="number" value="0" id="discountRate" name="discountRate" onKeyUp="calcDiscount()" /></td>
                <td class="col-lg-3"><input class="form-control" type="number" value="0" id="discountAmount" name="discountAmount" readonly /></td>
            </tr>
            <tr style="border-top:none">
                <td class="text-center"><strong>Total</strong></td>
                <td></td>
                <td><input class="form-control" type="number" value="0" id="total" name="total" readonly /></td>
            </tr>
            <tr style="border:none">
                <td class="text-center"><strong>Cash</strong></td>
                <td></td>
                <td><input class="form-control" type="number" value="0" id="cash" name="cash" onKeyUp="calcBalance()" /></td>
            </tr>
            <tr style="border:none">
                <td class="text-center"><strong>Balance</strong></td>
                <td></td>
                <td><input class="form-control" type="number" value="0" id="balance"  name="balance" readonly /></td>
            </tr>
        </table>

        </div>

    </div>
</body>
</html> 
```

# testing - watir-webdriver（send_keys）功能中的 Safari 不起作用

> ID：11042390
> 
> 赞同：2
> 
> 时间：2012-06-14T22:48:18.627
> 
> 标签：testing, safari, watir, watir-webdriver, qa

```
b.send_keys :tab 
```

上面的那一行不适用于我的 mac 上的 safari。我正在运行 watir-webdriver 0.6.1 和 selenium-webdriver 2.22.2。

我收到以下错误：

```
Failure/Error: b.send_keys :tab
     Selenium::WebDriver::Error::UnknownError:
       Maximum call stack size exceeded. 
```

我还没有安装 safari-driver。只需在上述 2 个 gem 的帮助下直接运行即可。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T05:24:01.890

Safari 支持最近才添加到 webdriver 中，据我所知，如果没有 safari-driver（它采用 safari 浏览器扩展的形式，您需要编译），您将无法驱动 safari。

引用 Selenium 网站：

> 在准备好使用时，SafariDriver 仍然需要一些手动干预才能开始编写测试。如果您不习惯从源代码检查和构建 Selenium 项目，您可能需要等待我们发布一个通用的 SafariDriver 版本。

我会按照[这里的说明开始](http://watirwebdriver.com/safari/)

如果您对此不满意，我会针对 Firefox 或 Chrome 进行测试（无论如何它们代表了更大的用户群）

# javascript - 编译为 javascript 是否会阻止 dart 添加弱引用？

> ID：11042395
> 
> 赞同：0
> 
> 时间：2012-06-14T22:48:59.220
> 
> 标签：javascript, dart

我很失望 dart 没有弱引用。

有没有关于编译成一种不提供弱引用的语言的东西，这使得它变得不可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T22:50:49.523

是的。

为了支持弱引用，您需要一种与 GC 交互或覆盖的方法。
这在 Javascript 中基本上是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:38:00.137

Dart 想要编译成*高性能*的JavaScript。这就是为什么它需要跳过某些功能（例如尾调用）。而且我什至认为弱引用无论如何都是一个坏主意。

# c# - XSD 到 XML。多个没有前缀的命名空间。如何？

> ID：11042398
> 
> 赞同：1
> 
> 时间：2012-06-14T22:49:18.503
> 
> 标签：c#, xml, xsd, xml-serialization, xml-namespaces

我正在使用 XSD 文件通过 xsd.exe 生成 C# 代码，并使用生成的代码序列化 XML。

问题是我必须生成一个具有默认/根 xmlns 名称空间的 XML 文件，以及在该元素上定义另一个“原始”名称空间的元素（不带前缀）。

这是一个简单的示例（不是整个 XML），用于说明目的：

```
<?xml version="1.0" encoding="utf-16"?>
<Request xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://mynamespace">
   <ABC>STACKOVERFLOW</ABC>
   <Method Name="TEST" xmlns="http://myothernamespace">
     <DEF>123456</DEF>
   </Method>
 </Request> 
```

我找不到在 Method 元素上“插入”第二个 xmlns 属性的方法（没有前缀）。

问题是我不能使用前缀，因为这个 XML 被发送到另一端没有使用 XML 反序列化器的应用程序，但是它将 XML 解析为字符串并寻找精确的字符串匹配（当然这不是可以更改此“接收”应用程序）。

我在 XSD 中尝试了很多不同的东西，但没有任何效果 :( 我正在使用 MSMQ 传输 XML 消息，所以我没有自己序列化请求（只是为请求对象提供正确的参数，并且序列化在幕后处理）。

我可以使用 XmlSerializer 在没有第二个 xmlns 的情况下将 XML 序列化为字符串，并在发送之前通过编码将其添加到 XML（到字符串）中，但这很脏，并且让我走这条路只是为了添加这个“ Method 元素上的 xmlns" 属性。

有没有办法通过纯XSD（通过使用xsd.exe的.NET代码生成）来解决这个问题？

希望我的问题很清楚，希望有人能够回答

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T23:42:04.873

像这样定义你的类型：

```
[XmlRoot("Method")]
public class MyMethod
{
    [XmlAttribute]
    public String Name   { get; set; }
    [XmlElement]
    public int DEF   { get; set; }
}

[XmlRoot("Request", Namespace="http://mynamespace")]
public class MyRequest
{
    [XmlElement]
    public String ABC { get; set; }

    [XmlElement(Namespace="http://myothernamespace")]
    public MyMethod Method { get; set; }
} 
```

支持代码：

```
 static TextWriter GetWriter(bool wantSave)
    {
        if (wantSave)
        {
            var fs = new FileStream(StorageFile, FileMode.Create);
            return new StreamWriter(fs, new UTF8Encoding());
        }
        return Console.Out;
    }

    private static void ShoworSave(MyRequest r, bool wantSave)
    {
        if (r==null)
        {
            Console.WriteLine(" --null--");
            return;
        }

        Console.WriteLine("\n");

        var writerSettings = new XmlWriterSettings
        {
            OmitXmlDeclaration = true,
            Indent = true
        };

        using (XmlWriter xmlWriter =
               XmlWriter.Create(GetWriter(wantSave), writerSettings))
        {
            XmlSerializer ser = new XmlSerializer(r.GetType());
            var ns = new XmlSerializerNamespaces();
            ns.Add("", "http://mynamespace"); // default xmlns
            ser.Serialize(xmlWriter, r, ns);
        }
        Console.WriteLine("\n");
    } 
```

然后像这样使用：

```
 var request = new MyRequest
        {
            ABC = "HelloWorld",
            Method = new MyMethod
            {
                Name="TEST",
                DEF=123456
            }
        };

        SaveOrShow(request, false); 
```

结果：

```
<Request xmlns="http://mynamespace">
  <ABC>HelloWorld</ABC>
  <Method Name="TEST" xmlns="http://myothernamespace">
    <DEF>123456</DEF>
  </Method>
</Request> 
```

## 讨论

Xml 序列化程序允许您指定命名空间映射，从而可以为序列化输出提供命名空间前缀列表和它们映射到的实际命名空间。要设置默认的 xml 命名空间及其前缀，请使用前缀“”（空字符串）。

所以我使用的代码指定了默认命名空间。

我还使用适当的 xml 序列化程序属性修饰了各种类型和成员，以获得正确的命名空间。

乍一看，您可能认为在代码中的几个不同位置使用 xml 命名空间字符串（在您的示例中为“http://mynamespace”）违反了干净编码的“不要重复自己”格言。但这不是真的。在我使用它的一个地方，它设置了该类型的 XML 命名空间。另一方面，它为序列化程序指定了默认的 xml 命名空间。

如果我没有指定后者，那么你会得到一个前缀；这将为您提供语义上等效的 xml 信息集，但是因为您说您的接收器应用程序不是真正的 xml 感知的，所以它会破坏该接收器。

此外，关于您关于 xsd.exe 和代码生成的问题，不确定您在做什么，但请考虑一下：Xsd.exe 只是一个工具。获取该工具的输出并对其进行调整、编辑并没有错。如果您的类型相对简单，您可能会发现只在 C# 中定义类型会更容易，正如我在上面所展示的。如果您很喜欢将 XSD 作为源代码，那么您将需要依赖 xsd.exe 工具。在这种情况下，您需要在 xsd 文档的适当位置指定这些名称空间。您选择哪个选项取决于您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T23:22:00.567

不，如果你`xmlns="http://myothernamespace">`说你的根节点所有无前缀的节点都将被视为在该命名空间中，那是有效的。上述格式称为默认命名空间。您必须添加更多代码才能在 Xpath 中使用它。

例如

在你的例子`SomeNode.SelectSingleNode("Test")`中不起作用。

您需要手动将命名空间添加到 NameSpaceManager 的实例中，并使用需要管理器的重载。

例如

```
<Test> 
```

和

```
<Test xmlns="http://myothernamespace"> 
```

是不同的动物。

为了使其正确序列化，您可以实例化一个 XmlSerialiserNamespaces，并为其添加前缀“”，然后将其传递给序列化器。

这里的上一个问题，它在 VB.Net 中，但你会明白的。

[序列化和默认命名空间](https://stackoverflow.com/questions/258960/how-to-serialize-an-object-to-xml-without-getting-xmlns)

# c# - 动态执行方法

> ID：11042399
> 
> 赞同：7
> 
> 时间：2012-06-14T22:49:19.783
> 
> 标签：c#, c#-4.0, dynamic, invoke

我确信这个问题已经在某个地方得到了回答，但是我在找到正确的关键字组合来找到它时遇到了重大问题。

我很想知道是否可以做这样的事情：

```
dynamic someObj = new SomeObject();

var methodName = "someMethodName";

// execute methodName on someObj 
```

我基本上想知道是否可以使用存储方法名称的变量对动态对象执行方法。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T22:51:36.283

您可以在*任何*对象上执行此操作，不一定是`dynamic`使用[*反射*](http://msdn.microsoft.com/en-us/library/f7ykdhsy%28v=vs.71%29.aspx)的对象。

```
object obj = new SomeObject();
var meth = obj.GetType().GetMethod("someMethodName");
meth.Invoke(obj, new object[0]); // assuming a no-arg method 
```

当你使用 时`dynamic`，你可以使用*任何*标识符作为方法名，编译器不会报错：

```
dynamic obj = MakeSomeObject();
obj.someMethodName(); // Compiler takes it fine, even if MakeSomeObject returns an object that does not declare someMethodName() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T23:02:16.183

好吧，您实际上不需要引号中的“someMethodName”。您只需执行此操作（完整程序列表）：

```
class Program
{
    static void Main(string[] args)
    {
        dynamic obj = new SomeObject();
        obj.someMethodName("hello");
    }
}

public class SomeObject
{
    public void someMethodName(string message)
    {
        Console.WriteLine(message);
    }
} 
```

如果您的方法名称来自诸如 javascript 之类的邪恶地方，那么您可以这样做：

```
class Program
{
    static void Main(string[] args)
    {
        dynamic obj = new SomeObject();
        var meth = obj.GetType().GetMethod("someMethodName");
        meth.Invoke(obj, new object[1]{"hello"});
    }
}

public class SomeObject
{
    public void someMethodName(string message)
    {
        Console.WriteLine(message);
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-15T08:30:02.507

根据您的评论，要求是能够使用字符串调用 SignalR 动态客户端代理的函数。尝试使用反射来做到这一点，即：`.GetType().GetMethod(functionName)`不起作用，因为它不适用于任何动态对象。

然而，它可以使用`Invoke`动态对象的方法来完成。

```
var functionName = "alertAllUsers";
var message = "Hello!";
var groupID = "1";

var connection = GlobalHost.ConnectionManager.GetHubContext<SomeHub>();
connection.Clients.Group(groupID).Invoke(functionName, message); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T22:55:34.210

您可以使用反射来做到这一点，请看这里：

[http://en.csharp-online.net/CSharp_FAQ%3A_How_call_a_method_using_a_name_string](http://en.csharp-online.net/CSharp_FAQ%3A_How_call_a_method_using_a_name_string)

# android - 如何在 Android 测试用例中使用 jUnit 测试 swipe/fling 事件

> ID：11042403
> 
> 赞同：3
> 
> 时间：2012-06-14T22:50:05.617
> 
> 标签：android, user-interface, testing, robotium

我发现`android.test.TouchUtils`里面有一个拖动方法，我试了一下，但`onfling()`似乎对这个动作没有反应。我也尝试了robotium的`scrollToSide(int)`，也没有工作。关于如何在我的测试用例中实现这一点的任何建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-24T10:16:40.440

*在Robotium 中*的 drag(float fromX, float toX, float fromY, float toY, int stepCount)*[也](https://code.google.com/p/robotium/)可以工作，而 swipe 和 scrollToSide 似乎不起作用。*

 *使用[android.support.v4.view.ViewPager](http://developer.android.com/reference/android/support/v4/view/ViewPager.html)，以下代码适用于我：

```
solo.drag(300,0,100,100,1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-20T20:04:40.490

我相信您可以使用`MotionEvent`类及其`obtain()`方法来模拟各种滑动/触摸手势。这是我找到的第一个教程，它应该可以帮助您入门：[http ://softteco.blogspot.com/2011/02/touch-hold-swipe-release-gesture.html](http://softteco.blogspot.com/2011/02/touch-hold-swipe-release-gesture.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-27T21:07:33.577

我对 Robotium 使用以下方法。我需要使用这种 hacky 方式，因为 v4.view.ViewPager 总是让我的测试套件由于某些原因停止运行。

```
private void swipeToLeft(int stepCount) {
    Display display = solo.getCurrentActivity().getWindowManager().getDefaultDisplay();
    int width = display.getWidth();
    int height = display.getHeight();
    float xStart = width - 10 ;
    float xEnd = 10;
    solo.drag(xStart, xEnd, height / 2, height / 2, stepCount);
}

private void swipeToRight(int stepCount) {
    Display display = solo.getCurrentActivity().getWindowManager().getDefaultDisplay();
    int width = display.getWidth();
    int height = display.getHeight();
    float xStart = 10 ;
    float xEnd = width - 10;
    solo.drag(xStart, xEnd, height / 2, height / 2, stepCount);
} 
```

整个想法来自 Jason 的这篇很棒的帖子：http: [//blogs.steeplesoft.com/posts/2013/02/13/simulating-swipes-in-your-android-tests/](http://blogs.steeplesoft.com/posts/2013/02/13/simulating-swipes-in-your-android-tests/)*

# iphone - 可以保证一张照片在后台上传吗？

> ID：11042409
> 
> 赞同：0
> 
> 时间：2012-06-14T22:51:03.260
> 
> 标签：iphone, ios

我想创建一个简单的应用程序，用户可以在其中拍照。关键是我需要保证照片尽快上传到我们的服务器。这一定是真的，即使照片是在没有互联网连接的情况下拍摄的，或者即使电池在上传过程中耗尽，或者您能想到的任何其他情况。

解决这个问题的最简单方法是使用进度条，但我真的不希望我的用户不必要地等待。

下次启动应用程序时上传照片还不够好，因为我需要尽快获得照片。

我的问题是，是否可以保证照片在后台上传？

[这个](https://stackoverflow.com/questions/5109305/iphone-app-can-autolaunch-after-device-boot)问题有点相似，但我没有任何东西可以使用该位置，所以该应用程序可能会被我的 App Store 拒绝。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T23:25:29.453

简而言之：您无法保证任何事情。您只能尝试并希望它被上传，您可以做一些事情来最大化您的机会，但如果长时间没有连接，鉴于您提到的限制，您无能为力。

您只能在应用程序处于前台时执行上传。

除非你有背景类型——正如你猜想的那样，如果你假装有位置，或者其他类型之一，而你没有，那么你将被拒绝。

因此，您唯一可用的其他选择是使用 beginBackgroundTaskWithExpirationHandler。

一旦用户离开您的应用程序，这将给您大约 10 分钟的时间在后台执行（但如果他们终止应用程序，您将无能为力）。

如果在应用程序处于前台时没有连接 + 移动到后台后的额外 10 分钟，除了下次应用程序启动时重试之外，您无能为力。

使用 Reachability 类查看 url 是否可访问，如果是，请尝试上传，如果未注册可访问状态更改的通知，并且一旦出现可访问性，请尝试再次上传。

如果您有可达性，请尝试上传它，如果出现网络故障，请继续重试，直到 10 分钟结束。

PS 你怎么能指望在电池耗尽时保证它会被上传？

# amazon-ec2 - 每个 Amazon EC2 实例的最大附加卷数是多少？

> ID：11042413
> 
> 赞同：7
> 
> 时间：2012-06-14T22:51:35.053
> 
> 标签：amazon-ec2, amazon, volume

我正在运行 Ubuntu Server 12.04 LTS 作为来宾操作系统。

一个实例可以附加多少卷？我正在开展一个项目，该项目要求我们的每个客户都有自己的数量。

Amazon 似乎没有动态卷，因此我们需要从快照创建一个新卷来扩展现有卷。此操作需要服务器停机时间，这是不可接受的。这就是为什么我们需要每个客户端一个卷。对于物理服务器，我将放置一个 2TB 驱动器并使用配额，但我们现在不想这样做。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2019-03-19T17:15:38.880

接受的答案是错误的。有一个限制。我现在对在 Amazon Linux 下运行的 EC2 t3.medium、m5a.large、c5.xlarge 有直接的经验，这是我发现的：

*   似乎有 26 卷的硬性限制
*   设备名称为 /dev/sd[az]、/dev/xvd[az]、/dev/xvd[az][az]

亚马逊[文档](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/nvme-ebs-volumes.html)间接说限制是（当前）26 台设备：

> EBS 卷在基于 Nitro 的实例上作为 NVMe 块设备公开。设备名称为 /dev/nvme0n1、/dev/nvme1n1 等。您在块设备映射中指定的设备名称使用 NVMe 设备名称 (/dev/nvme[0-26]n1) 重命名。块设备驱动程序可以按照与您为块设备映射中的卷指定的顺序不同的顺序分配 NVMe 设备名称。

所以，虽然您可以使用 /dev/xvd 生成大量设备名称？这实际上会起作用，并且它们不必按任何顺序排列，您可以混合和匹配所有组合，例如 /dev/sdf、/dev/xvdz、/dev/xvdxy，仍然有一个限制26 台设备。

如果超过这个限制会发生什么？两件事情：

*   如果实例正在运行，您尝试附加的卷将保持在“附加”状态。
*   如果实例停止，卷附加没有问题，但是当您尝试启动实例时，它将卡在“挂起”状态。

由于这种行为，我怀疑问题是否与操作系统、Linux、Windows、FreeBSD 等有关。如果是关于操作系统，实例将进入“运行”状态，然后在启动时卡住，但不会卡在“待处理”状态。

此外，您可能希望列出您的 /dev/ 目录以供您自己查看，但您不必担心那些硝基设备名称 /dev/nvme* 并想知道它们是如何从您在附件中指定的设备名称映射的-音量命令；您会找到两者，即在上面的示例中，您会找到设备名称 /dev/sdf、/dev/xvdz、/dev/xvdxy，但您也会找到 /dev/nvme* 节点。您可以将您在 attach-volume 命令中指定的设备名称用于 mkfs 之类的内容，我强烈建议您使用 UUID=... 格式在 /etc/fstab 中指定卷，切勿尝试通过 /dev/ 节点名称挂载。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-18T17:08:49.643

AWS 表示 Linux 的卷限制为 40 个，Windows 的卷限制为 26 或 16 个，每个都有这个警告。仅在尽力而为的基础上支持将超过 * 个卷附加到 * 个实例，并且不能保证。

[http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/volume_limits.html](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/volume_limits.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T06:45:48.363

事实上，如果您坚持使用 Linux，则没有限制（Windows 实例限制为 16 个 EBS 卷）。您可能需要更改设备的命名，然后您可以轻松获得多达 24 个卷：

```
/dev/sdf1  /dev/sdf5  /dev/sdf9  /dev/sdg4  /dev/sdg8  /dev/sdh3
/dev/sdf2  /dev/sdf6  /dev/sdg1  /dev/sdg5  /dev/sdg9  /dev/sdh4
/dev/sdf3  /dev/sdf7  /dev/sdg2  /dev/sdg6  /dev/sdh1  /dev/sdh5
/dev/sdf4  /dev/sdf8  /dev/sdg3  /dev/sdg7  /dev/sdh2  /dev/sdh6 
```

有关更多信息，请查看文档：[将卷附加到实例](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/ebs-attaching-volume.html?r=5444)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-15T17:35:49.907

为了建立 moosgummi 的答案，AWS 允许使用广泛的块设备名称。请参阅此处“指定块设备映射”下的相关文档。

[http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/block-device-mapping-concepts.html](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/block-device-mapping-concepts.html)

EBS 卷挂载点必须以 /dev/ 开头，然后指定“hd”或“sd”(2)，然后是 a 到 z (26)，然后是 1 到 15，或无编号 (16)。这些选项产生 2 x 26 x 16 = **832 个名称选项**。（超过 moosgummi 建议的 24 个。）但要小心避免与根设备 (sda1) 或其他默认值 (sda[1-15]) 发生冲突。

设备名称限制是我所知道的对附加 EBS 卷总数的唯一限制。但我从来没有一次尝试过多个。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-08-09T10:47:28.213

上面的答案都不是完全正确的，部分原因是两个不同的虚拟化平台的行为。

现实情况是，这种行为在基于**Xen**的实例（第 4 代及更早版本）和较新的基于**Nitro**的实例（第 5 代及更高版本）之间有所不同。

该[文档](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/volume_limits.html)在这里并没有很好地消除 Xen 和 Nitro 行为之间的歧义，因此为清楚起见：

**对于 Nitro 实例**

*   最多支持 28 个**附件**。请注意，这是所有设备，*而不仅仅是卷*。文档很好地涵盖了这一点。
*   从技术上讲，这意味着在具有单个 ENI 的实例上最多有 27 个卷。

**对于 Xen 实例**

*   最多支持 40 个软**卷**。您绝对可以附加比这更多的卷（我已经看到 98 个卷附加到实例，但不能保证它是可靠的，我强烈建议不要走这条路）。
*   Xen 没有与 Nitro 相同的共享设备池模型

还有其他适用的限制：

*   可以同时附加的加密 EBS 卷的最大数量（我找不到任何公开文档来解决这个问题，但我已经看到了这个限制）
*   基于可用带宽和附加卷数的性能限制（文档建议限制为 8 个卷，这对我来说似乎很合理）

# javascript - 验证脚本仅触发一次并且无法选择特定的无线电父 div

> ID：11042416
> 
> 赞同：0
> 
> 时间：2012-06-14T22:51:42.947
> 
> 标签：javascript

我正在努力让几个 javascripts 脚本正常工作。

第一个是文本框上的简单验证脚本。它工作一次，但如果您第二次点击提交，您无需输入任何内容即可继续。每次单击提交按钮时，如何使脚本触发（并工作）？

我要做的第二件事是让一个 div 类根据单选 click 进行更改。问题在于，因为所有单选按钮共享相同的 ID/名称，所以无论单击哪个单选按钮，它总是会更改第一个单选按钮背景。如何让它改变包含它的 div 的类？

HTML看起来像（在head标签中带有javascript，如图所示......

```
<head>
<link href="/css/0051.css" rel="stylesheet" type="text/css" />

<script type="text/javascript">

function validateForm() {
        var x=document.forms["form"]["txtbox_1501"].value;
    if (x==null || x=="" || x=="Please type your answer in this box")
    {
        document.getElementById("txtbox_container").id = "txtbox_err";
        document.getElementById("ques_txt").className = "ques_txt_err";
        document.getElementById("ques_inst").className = "ques_inst_err";
        return false;
    }
}

function radioDiv() {
    document.getElementById("radio_label").className = "radio_input_selected";
}

</script>

</head>

<body>

<form id="form" name ="form" action="/php/process.php" onsubmit="return validateForm()"  method="post">

<div id="txtbox_container">
       <div id="ques_container">
          <a id="ques_txt" class="ques_txt">Please tell us your name:</br></a>
          <a id="ques_inst" class="ques_inst">(How you would like to be referred to in this demo)</br></a>
       </div>
       <div id="txtbox_input">
          <input type="text" name="txtbox_1501" value="Please type your answer in this box" onfocus="if(!this._haschanged){this.value=''};this._haschanged=true;" /></br>
       </div>
    </div>

    <div id="radio_container">
       <div id="ques_container">
          <a class="ques_txt">What is your gender?</br></a>
          <a class="ques_inst">(Are you female or male?)</br></a>
       </div>
       <label>
          <div id="radio_label" class="radio_input">
             <input type="radio" name="radio_1503" value="2" onclick="return radioDiv()" />
             <a class="radio_label">Female</a>
          </div>
       </label>
       <label>
          <div id="radio_label" class="radio_input">
             <input type="radio" name="radio_1503" value="1" onclick="return radioDiv()" />
             <a class="radio_label">Male</a>
          </div>
       </label></div> 
</div>      

<div id="button">
   <input type="submit" class="submitbutton" value=""/>

</div>  

    </form>

</body> 
```

任何建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T23:19:22.383

> 每次单击提交按钮时，如何使脚本触发（并工作）？

第一次运行这行代码时：

```
document.getElementById("txtbox_container").id = "txtbox_err"; 
```

被正确执行。但是，在任何后续调用中，您将无法`getElementById`传递`id`不再存在的一个！（你只是`id`用另一个元素覆盖了那个元素）

因此，从第二次调用开始`getElementById("txtbox_container")`返回`null`，并尝试设置 的`id`属性会`null`产生这个致命错误：

> 未捕获的类型错误：无法将属性“id”设置为 null

这会在返回之前破坏您的功能，`false`从而使表单正常提交。

您可以仅注释该行，或者如果您需要样式更改/添加 CSS`class`而不是更改`id`.

> 如何让它改变包含它的 div 的类？

您不能有 2 个与`id`无效标记相同的元素。相反，将对单击的单选按钮元素 ( `this`) 的引用传递给您的函数，并让它`parentNode`根据需要更改样式：

```
//HTML
onclick="return radioDiv(this)"
//JS
function radioDiv(el) {
    el.parentNode.className = "radio_input radio_input_selected";
} 
```

我也保留了原始类，因为您可能想要重置`radio`元素以防用户选择另一个`radio`：

```
function radioDiv(el) {
    var radios = document.getElementsByClassName('radio_input');
    //could use a for loop to reset these, but there are only 2 radios...
    radios[0].className = "radio_input"; radios[1].className = "radio_input";
    el.parentNode.className = "radio_input radio_input_selected";
}​ 
```

干得好。

***[JSFiddle 现场演示](http://jsfiddle.net/ult_combo/U86AW/)***

***提示：***

始终验证您的 HTML，任何好的 JS 编码都必须有一个坚固的 DOM 结构。W3C 验证服务可能有点过于苛刻，但任何好的标记突出显示程序都可以向您显示未关闭和无效的语法标签 - 甚至[JSFiddle.net](http://jsfiddle.net)在线编辑器。

**始终检查您的 JS 控制台是否有错误：**
Firefox：**Ctrl+Shift+K**（或安装[Firebug](http://getfirebug.com/)并按 F12）；
Chrome：按**F12**并选择**控制台**选项卡。

这将显示可能会破坏您的代码的错误，因此如果您下次无法解决它们，您可以将其发布在您的问题中。`:)`

# ide - 为什么我们不使用函数数据库而不是包/库？

> ID：11042417
> 
> 赞同：2
> 
> 时间：2012-06-14T22:51:43.413
> 
> 标签：ide, programming-languages, language-design

为什么我们不使用集中式函数数据库，而不是实际的包/库概念？我可以看到很多优点。

1.  更容易成长（任何人都可以发送他的小功能，而不是维持大

2.  可分析。统计和图论工具可用于分析和分类数据库。

3.  终极生产力工具。假设您的任务是将文件夹中的所有图像转换为黑白图像。你可以用谷歌搜索和安装你的语言的图像处理和操作系统包，然后学习并搜索正确的功能。整个过程可能需要一天时间。或者您可以在上述全局数据库中搜索“打开文件夹中的图像文件”功能、“将图像转换为黑白”功能和“保存图像”功能，整个过程可能需要一分钟。**现在把它推广到任何编程任务，你就会明白为什么我觉得这很重要。**

为什么不采用这个概念？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T00:08:10.543

这是一个有趣的想法。我认为问题的症结在于：一个设计良好的库（或一组库）是*连贯*的，因为它会仔细选择一小组函数、数据结构和其他约定。这就是让程序员理解、使用和重用它的原因。

一个庞大的函数数据库似乎是在尝试使一个不连贯的、未经设计的大量函数在同样的意义上可重用。但我不认为问题的难点在于首先找到相关功能：我担心任意技术选择的纯粹组合爆炸（即使在中等简单的任务中也是固有的）会挫败大多数直接重用的尝试（与类似伪代码的灵感相反）。

以您的“在文件夹中打开图像”示例查询为例，并考虑可能的目标函数如何：

*   识别文件夹：目录句柄、字符串或十几个“路径”数据结构之一
*   选择特定图像：字符串、模式匹配或许多交互式 UI 选项之一
*   处理图像格式：例如，GIF、JPG、PNG 或各种多语言图像加载器框架
*   加载图像：无条件地，标题/元数据，然后是正文，按图块，按行或其他
*   表示图像：它使用什么数据结构来存储加载的图像？
*   使用异常、错误或中间决策点

程序员可以轻松处理其中一些可能性（假设函数已正确记录）。有些可能是可修补的（例如，通过找到另一个函数来从提供的帧缓冲区格式转换为您可以使用的格式）。但其他人具有重量级的技术含义。交互式 UI 文件选择器需要使用特定的 UI 框架。多语言图像加载器功能可以拉入数十个图像库，并将您提交给它的内存管理方案。

换句话说：“为重用而设计”几十年来一直是软件工程师充满希望的座右铭，而我们的最大努力只取得了适度的成功。然而，长期的经验告诉我们这句话中隐含的教训：没有“设计”部分，“重用”就没有机会。

# python - python: split() 也拆分引用的值

> ID：11042421
> 
> 赞同：1
> 
> 时间：2012-06-14T22:51:54.273
> 
> 标签：python

我有一个地址

```
line = 12345 North Drive,,"Palm Retreat, CO",CO,92261 
```

当我分开时，我得到

```
line.split(",") 
['12345 North Drive', '', '"Palm Retreat', ' CO"', 'CO', '92261'] 
```

我想要的只是

```
'12345 North Drive', '', '"Palm Retreat CO"', 'CO', '92261'] 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T22:55:49.173

`split()`正在按预期工作；它不关心报价。您可能希望结合 来查看`csv`模块`StringIO`：将字符串放入一个`StringIO`对象中（这使它看起来像一个文件），然后将其传递给`csv.reader`. 像这样的东西：

```
import csv
from cStringIO import StringIO

s = "12345 North Drive,,\"Palm Retreat, CO\",CO,92261"
s = StringIO(s)
reader = csv.reader(s, delimiter=",")
for row in reader:
    print row 
```

**更新**：实际上，由于`csv.reader`适用于任何产生行（不仅仅是文件）的迭代，您可以简单地将行列表传递给`csv.reader`而不经过`StringIO`位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T22:54:55.363

您应该使用该`csv`模块来处理 CSV 数据。

# python - 将基类添加到python中的现有对象

> ID：11042424
> 
> 赞同：11
> 
> 时间：2012-06-14T22:52:18.970
> 
> 标签：python, inheritance, metaclass, monkeypatching

我有几个不同类型的对象（不同的函数名称，不同的签名），我猴子修补它们以有一种通用的方式从不同的函数访问它们。简而言之，有一个调度程序接收我要修补的对象，并根据对象类型调用不同的修补程序。修补程序将为对象添加方法：

```
def patcher_of_some_type(object):

    def target(self, value):
        # do something and call self methods

    object.target = types.MethodType(target, object)

    # many more of these 
```

随着程序变得越来越复杂，围绕对象（或对象类）进行包装似乎是更好的主意。一些修补程序共享公共代码或相互关联。但我不控制对象的创建，也不控制类的创建。我只得到对象。即使我能做到这一点，我也只想包装（或修补）某些对象，而不是全部。

一种解决方案可能是将基类添加到现有对象，但我不确定这是多么可维护和安全。还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-15T12:23:18.810

动态修改对象的类型是相当安全的，只要额外的基类是兼容的（如果不兼容，你会得到一个异常）。添加基类的最简单方法是使用 3 参数`type`构造函数：

```
cls = object.__class__
object.__class__ = cls.__class__(cls.__name__ + "WithExtraBase", (cls, ExtraBase), {}) 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-09-13T22:34:35.283

基于对另一个答案的[评论](https://stackoverflow.com/questions/11042424/adding-base-class-to-existing-object-in-python#comment14456857_11050571)，这是修补基类的另一种方法：

```
class Patched(instance.__class__, ExtraBase):
    pass

instance.__class__ = Patched 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T11:24:01.797

要将一个类添加到另一个类库，您可以执行以下操作：

```
def pacher_of_some_type(object):

    #this class holds all the stuff you want to add to the object
    class Patch():
        def target(self, value):
            #do something

    #add it to the class' base classes
    object.__class__.__bases__ += (Patch, ) 
```

但这会影响这个类的所有对象，因为你实际上改变了类本身，这似乎不是你想要的......如果你只是想修补一个实例，你可以继承原始类并更改实例类动态：

```
class PatchedClass(object.__class__):
    def target(self, value):
        #do whatever

object.__class__ = PatchedClass 
```

在安全性和可管理性方面，我想说动态添加基类与动态添加一些函数一样可维护，并且更安全，因为您不太可能因为添加了新基类而意外覆盖原始类的某些内部函数到元组的末尾，这意味着它最后用于名称解析。如果您真的想覆盖方法，请将它们添加到基类元组的开头（当然这不适用于子类方法）。不要问我动态更改实例的类是否安全，但在一个简单的示例中，它似乎不是问题：

```
class A():
    def p(self): print 1

class B():
    def p(self): print 2

a = A()
a.p()    #prints 1
a.__class__ = B
a.p()    #prints 2 
```

# jquery - 序列化排序不起作用

> ID：11042431
> 
> 赞同：0
> 
> 时间：2012-06-14T22:53:01.777
> 
> 标签：jquery

我已经尝试了一切，但仍然失败！这段代码有什么问题？！？！我想获得可序列化的可排序，就这么简单，但我查看了 SO 并找到了片段.. 应用了我的代码，但它仍然不起作用。这根本没有意义。我确实查看了可能的错误（是的，有 jQuery 文档指定的 set_number ）......但仍然没有任何效果。

```
 <html>
<body>
    <script type='text/javascript' src='http://code.jquery.com/jquery-1.5.js'>
    </script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.js">
    </script>
    <script>

$(function() {
    $( "#sortable" ).sortable();
    $( "#sortable" ).disableSelection();     
});

    $("form").submit(function(){         
    $('#thedata').val($( "#sortable" ).sortable("serialize"));
    return false;        
    });

    </script>
    <h1>
        Filters For Tables
    </h1>
    <h2>
        Filters for Assets
    </h2>
    <form action="validate.php" method="post">
        <input type='text' name='thedata' id='thedata' />
        <ul id="sortable">
            <li id="foo_0">ID</li>
            <li id="foo_1">TIME LOG</li>
            <li id="foo_2">DEVICE TYPE</li>
            <li id="foo_3">CHASSIS TYPE</li>
            <li id="foo_4">PARENT ID</li>
            <li id="foo_5">PARENT</li>              
        </ul>
        <input type="submit" name="submit" id="submit" value="Update" />
    </form>
</body>

 </html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T19:41:04.853

表单元素不存在。当 DOM 准备好时，您必须绑定事件。移动这个：

```
$("form").submit(function(){         
    $('#thedata').val($( "#sortable" ).sortable("serialize"));
    return false;        
}); 
```

到这个函数： $(function() {}); 它适用于 JSFiddle，因为我认为加载 DOM 时会调用 JavaScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T15:46:27.310

当从 html 中剥离时，对我来说似乎很好。 [http://jsfiddle.net/Zfu6N/](http://jsfiddle.net/Zfu6N/)

我注意到您没有使用有效的文档类型，例如：

```
<!doctype html> 
```

或者例如

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" 
   "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd"> 
```

这可能会使浏览器进入怪癖模式。

这可能只是因为您在示例中缺少它，但以防万一。

# java - 使用 JAVA 的 JSONObject 中的参数数组

> ID：11042437
> 
> 赞同：2
> 
> 时间：2012-06-14T22:53:30.560
> 
> 标签：java, json

我正在尝试使用这种精确的 JSON 语法，但无法使用：

```
{
    "sun":"yellow",
    "vegetables":[{
        "apple":"red",
        "banana":"yellow",
        "melon":"orange"
    }]
} 
```

我能得到的最接近的是：

```
{
    "sun":"yellow",
    "vegetables":["{
        "apple":"red",
        "banana":"yellow",
        "melon":"orange"
    "]}
} 
```

这就是我正在做的事情：

```
JSONObject json = new JSONObject();
json.put("sun","yellow");

ArrayList<HashMap<String,Object>> test = new ArrayList<HashMap<String,Object>>();
HashMap<String,Object> params = new HashMap<String, Object>();
params.put("apple","red");
params.put("banana","yellow");
params.put("melon","orange");

test.add(params);
json.put("fruits",test); 
```

我想不通，我错过了什么吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T23:04:27.643

应该是这样的——

```
JSONObject json = new JSONObject();
json.put("sun","yellow");

JSONArray veg = new JSONArray();
JSONObject vegData = new JSONObject();
vegData.put("apple","red");
vegData.put("banana","yellow");
vegData.put("melon","orange");

veg.put(vegData);   

json.put("vegetables",veg); 
```

我正在使用`Jettison`. [您可以在此处](http://jettison.codehaus.org/)找到详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T23:10:18.873

为什么不做嵌套？[这里](http://code.google.com/p/json-simple/wiki/EncodingExamples)有一些例子

```
JSONObject outer = new JSONObject();
JSONObject inner = new JSONObject();
JSONArray  array = new JSONArray();

outer.put("sun", "yellow");
array.put("apple", "red");
array.put("bannanna", "yellow");
array.put("melon", "orange");

inner.put(array);

outer.put("Vegtables":inner); 
```

# php - 检查和更改数组中的值

> ID：11042438
> 
> 赞同：1
> 
> 时间：2012-06-14T22:53:38.297
> 
> 标签：php

我有一个存储在 SESSION 中的多数组

我遍历数据以更改设置为“1”的值并将其设置为“0”

但是由于某种原因，即使它确实找到了价值，它也没有改变它。

这就是我所拥有的：

```
Array (
    [0] => 1 
    [1] => 0 
    [2] => admin_user
    [8] => 1 
    [3] => 2
    [4] => Array (
        [7] => Array ( 
            [0] => User1
            [1] => 1 
            [2] => 1 
            [3] => w.jpg 
            [4] => 1 
            [5] => 1 
            [6] => 500 
            [7] => 50
            [8] => 3000 
        )
        [1] => Array ( 
            [0] => User2 
            [1] => 1 
            [2] => 3 
            [3] => d.jpg 
            [4] => 1
            [5] => 0 
            [6] => 200 
            [7] => 85 
            [8] => 5000
        ) 
    )
) 
```

因此，在 PHP 中，我试图更改位置 4 的数组中位置 5 的值。

我就是这样做的：

```
foreach($_SESSION['player_data'][4] as $key){
    if($key[5] == 1){
       $_SESSION['player_data'][4][$key][5] = 0;
       break;
    }
} 
```

但它不会将它设置为 0 它保持为 1 它令人讨厌:(我哪里出错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T22:58:32.227

改成：

```
foreach($_SESSION['player_data'][4] as $key => $value){    
   if($value[5] == 1){
       $_SESSION['player_data'][4][$key][5] = 0;
       break;
    }
} 
```

# php - PHP 在 foreach 中间隔运行，但增加了随机性

> ID：11042442
> 
> 赞同：-2
> 
> 时间：2012-06-14T22:53:44.497
> 
> 标签：php, foreach

所以我有一个foreach，我想插入一些html，每说6次或者11次循环运行。

所以我在每 13 条记录上插入

```
if ($i % 13 == 0) { 
} 
```

麻烦的是我想给它增加一点随机性。

也完全忘记了这个叫什么

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T22:58:59.047

这样的事情将使一些代码`$percentage`在每个循环的时间执行。例如，您可以设置`$percent = 20`然后您的代码每次迭代仅执行 20% 的时间。

```
$value = rand( 0, 100 ); // Set your ranges (min/max)
$percent = 0; // Set percentage

if ( $percent >= $value )
{
    // Will only execute $percentage of the time each loop
} 
```

# xcode - 是否可以从命令行在 xCode 中“配置 SCM 存储库”？

> ID：11042446
> 
> 赞同：1
> 
> 时间：2012-06-14T22:54:13.693
> 
> 标签：xcode, version-control

我正在开发一个甜蜜的应用程序，所以我当然使用版本控制。问题是，我是一名学生，我在图书馆的电脑之间移动。我编写了一个脚本来从网络上的个人存储中复制我的 svn 配置文件，但每次我开始使用我的甜蜜应用程序时，我仍然必须手动“配置 SCM”。我的意思是，我每次都必须让 xCode 知道 repo。这意味着打开一个浏览器，去汇编，并复制粘贴 URL ......我宁愿通过运行一个甜蜜的脚本来做所有这些事情。

所以我想知道：当我在 xcode 中“配置 SCM”时，这些配置保存在哪里？自动化该设置会很困难吗？

谢谢！

更新：这不是解决方案，但我在脚本末尾添加了一行，至少为我将 URL 复制到剪贴板。这让我的生活更轻松，但我仍然宁愿通过编辑一些 xCode 配置文件或 proj 文件或其他东西来自动化这个过程。

z。

# vim - VIM：无法使用 Vimball 卸载 Latex-Box 插件

> ID：11042449
> 
> 赞同：2
> 
> 时间：2012-06-14T22:54:37.767
> 
> 标签：vim

根据文档，vimball卸载应该是一个非常简单的输入过程：RmVimball LatexBox

但是，我收到错误消息 ***vimball*** (RmVimball) 无法在 .VimballRecord 中找到

我很确定我输入了正确的提示，因为 LatexBox.vmb 是我运行的文件 :so % on 安装插件。

Vimball 文档 (http://www.cs.csubak.edu/docs/vim/pi_vimball.html) 指出：

*:RmVimball 删除指定 vimball 生成的所有文件（但不删除它可能创建的任何目录）。也可以选择卸载路径（参见|'runtimepath'|）；否则，默认是|'runtimepath'| 上的第一个现有目录。*

事实上，当我输入 :echo &runtimepath 时，我的 .VimballRecord 存在于输出的第一个现有目录中。我打开了 .VimballRecord 它说

LatexBox.vmb: 调用 delete('C:\Program Files (x86)\Vim\vimfiles/ftplugin/tex_LatexBox.vim')| ...

这似乎证实了 LatexBox 是正确的插件名称。我很困惑错误来自哪里。否则——我怎样才能手动删除这个插件？（我担心浏览和删除 ftplugin 文件夹中的文件并不彻底）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T23:02:44.553

卸载 vim 插件真的很容易，因为没有隐藏的东西。

*   进入`C:\Program Files\vim\vimfiles`（取决于您的系统）
*   找出所有关于`LatexBox`
*   删除它们。

* * *

`vimfiles`在删除文件之前备份文件夹。
如果出现问题，您可以进行更改以恢复。

* * *

### 更新：

回答您有关`:helptags`命令的问题：

当您安装插件时，它可能包含帮助文件（例如`latexbox.txt`）。
它通常安装在`C:\Program Files\vim\vimfiles\doc`目录中（我`doc`将从现在开始调用它）。
该目录可能包含其他插件的其他帮助文件。

`tags`请注意，此`doc`目录中有一个文件。当您按下一个单词 时，该`tags`文件用于跳转到位置。`Ctrl-]`

`doc\tags`如果不存在，请不要担心。
您可以使用`:helptags C:\Program Files\vim\vimfiles\doc`它来生成它。

当您通过 vimball 安装插件时（这只是一个帮助您创建文件/目录的 vimscript），
vimball 将`latexbox.txt`在`doc`目录中创建，
并运行`:helptags`命令`tags`自动更新文件。

因此，当您手动删除 时`doc\latexbox.txt`，
该`tags`文件仍然包含有关`latexbox.txt`.
只需`:helptags path\you\want\to\sync`再次运行命令即可`doc\tags`同步。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T11:44:23.527

到过那里。问题是 Vim 附带的 Vimball 版本 (v31) 已经过时并且不支持 .vmb 文件。检查[1](http://www.vim.org/scripts/script.php?script_id=1502)以获得最新的 Vimball 版本，你会没事的。

# html - 最小化浏览器窗口时，浮动 div 在彼此下方跳跃

> ID：11042452
> 
> 赞同：0
> 
> 时间：2012-06-14T22:54:57.647
> 
> 标签：html, css

我的页眉中有 3 个 div。第一个 div 是教师徽标，第二个 div 是网站标题，第三个 div 是大学徽标。

整个标题有 CSS：

```
height: 55px;
width:auto; 
```

和背景颜色。

第一个 div 有：

```
#header .logoUt {
  width:285px;
  height:55px;
  float:left;
  background:url(images/Drawing1.png) no-repeat 0 0;
  background-position:left center; } 
```

第二个 div 相同：固定宽度和向左浮动以及一个文本。

第三格：

```
#header .logoEtti {
  width:285px;
  height:55px;
  float:right;
  background:url(images/Drawing1.png) no-repeat 0 0;
  background-position:left center; } 
```

问题是：当我最小化浏览器窗口时，我该怎么做，这些 div 不会跳到彼此下方。对不起，我的英语不好。

PS 我无法为整个页眉设置固定宽度，因为我希望页眉背景在整个页面中从左到右拉伸，高度为 55px。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T23:03:02.977

您可以`min-width`为整个标题设置 a：

```
#header {min-width: 855px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T23:02:34.067

一种选择是不使用浮动，而是使用定位。

尝试这个：

给标题`position:relative`

给里面的所有3个div`position: absolute`

用于`top:0;left:0`第一个 div

用于`top:0;right:0`最后一个

并且对于中间一个给出正确`px`的左值：

# r - 使用 Lumley 调查包在 R *without* 中指定概率权重

> ID：11042453
> 
> 赞同：0
> 
> 时间：2012-06-14T22:54:58.890
> 
> 标签：r, stata

*在不*使用 Lumley 调查包的情况下，我非常感谢在 R 中指定概率权重的任何帮助。我正在使用 Imai 等人的中介包在 R 中进行中介分析，该软件包目前不支持 svyglm。

我目前正在运行的代码是：

```
olsmediator_basic<-lm(poledu ~ gateway_strict_alt + gender_n + spline1 + spline2 + spline3,
   data = unifiedanalysis, weights = designweight). 
```

但是，我不确定这是否正确地加权数据。原因是这段代码产生的标准错误与我在 Stata 中得到的不同。我正在运行的Stata代码是：

```
reg poledu gateway_strict_alt gender_n spline1 spline2 spline3 [pweight=designweight]). 
```

我想知道 R 中的权重选项是否可能不适用于逆概率权重，但我无法从文档、本论坛或其他地方确定这一点。如果我遗漏了什么，我真的很抱歉 - 我对 R 以及这个论坛都是新手。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T23:58:27.497

[R 文档](http://stat.ethz.ch/R-manual/R-patched/library/stats/html/lm.html)指定函数的参数`weights`与`lm`观测值的方差成反比。这是分析权重的定义，或者`aweights`在 Stata 中。

看看`ipw`逆概率加权的包。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-02-23T20:26:42.113

为了更正先前的答案-我查阅了有关权重的手册，并找到了以下有关*lm中权重的描述*

> 非 NULL 权重可用于表示不同的观测值具有不同的方差（权重中的值与方差成反比）；或者等价地，当权重的元素是正整数 w_i 时，每个响应 y_i 是 w_i 个单位权重观测值的平均值（包括 w_i 个观测值等于 y_i 并且数据已经汇总的情况）。

这些实际上是频率权重（stata 中的 fweights）。它们将观察值乘以权重向量定义的*n次。*另一方面，概率权重是指观察组包含在总体中的概率。这样做会调整观测值对系数的影响，但*不会调整对标准误差*的影响，因为它们不会改变样本中表示的观测值数量。

# azure - 在暂存和生产环境中具有不同 SDK 版本的 Azure 应用程序

> ID：11042454
> 
> 赞同：1
> 
> 时间：2012-06-14T22:55:05.533
> 
> 标签：azure

如果我有使用旧版 SDK 部署的生产环境，是否可以使用 1.7 SDK 将 azure 应用程序部署到暂存环境？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T22:56:42.743

是的。从运行时的角度来看，Staging 和 Production 是完全不同的环境，所以你肯定会这样做。

实际上，您想在暂存和生产上运行什么并不重要，因为唯一的区别是，在生产部署中，您有自己配置的 DNS 名称，而暂存为您提供基于 GUID 的 DNS 名称。在内部，它们与您的服务中配置的虚拟机配置相同，但在单独运行时仍然非常不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T06:19:37.073

是的，“暂存”和“生产”部署在不同的虚拟机上运行，​​并且完全相互独立。

# azure - 我是否需要第二个 Azure 数据存储来保存用户上传的文件？

> ID：11042456
> 
> 赞同：0
> 
> 时间：2012-06-14T22:55:26.457
> 
> 标签：azure

我的 Windows Azure 帐户中有两个数据存储。一个用于 Web 应用程序本身，我创建了第二个用于存储最终用户上传的文件。

我的问题是——真的需要第二个数据存储吗？我创建它是因为每次部署 Web 应用程序时，都会收到消息“所选部署环境正在使用中，您要替换当前部署吗？”。我从该消息中推断，如果我将上传的文件存储在 Web 应用程序数据存储中，它们将在每次部署时被替换。

所以我基本上是想确认我的解释是否正确。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T23:02:04.507

这告诉您云服务环境槽（生产或登台）中已经有服务。它与存储帐户无关。所以不，我不认为您需要第二个存储帐户，除非您专门用于扩展目的（超过每秒 5k 事务限制）或安全性（控制对数据的访问）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T23:04:09.683

当您从 Visual Studio 部署 Windows Azure 应用程序到“生产”或“暂存”槽中的特定服务名称“xyz”时，如果已经有应用程序部署到相同的服务名称“xyz”和相同的“生产”或“ staging”插槽，然后您将收到“所选部署环境正在使用中，您要替换当前部署吗？”这样的消息。这是因为使用 Visual Studio，在删除部署后将重新部署到现有插槽的部署。

在整个情况下，“Azure Blob 存储”仅用于将您的 Azure 应用程序包放置在名为“vsdeploy”的容器中。

因此，您肯定可以为所有应用程序使用单个“Windows Azure 存储”名称，这将是更好的设计。

# c++ - c++ pthreads - 尝试锁定互斥锁以进行读取时崩溃

> ID：11042458
> 
> 赞同：1
> 
> 时间：2012-06-14T22:55:46.470
> 
> 标签：c++, crash, gdb, pthreads, mutex

班级`LocalT`有其他班级的成员意识到了`read-write-mutex`。Mutex 在构造函数中初始化并`pthread_rwlock_rdlock(&aMutex);`用于读取锁。所以，看起来，对互斥类来说一切正常。`LocalT`但是当某个对象锁定他的互斥成员以供读取时，程序崩溃了。

`CSerialize.cpp:2054`线是`MUTEX.lock_reading();`

```
Thread 6 (Thread 0x80d4e00 (runnable)):
#0  0x4864f11d in pthread_mutex_lock () from /lib/libpthread.so.2
#1  0x4864b558 in pthread_rwlock_init () from /lib/libpthread.so.2
#2  0x4864b659 in pthread_rwlock_rdlock () from /lib/libpthread.so.2
#3  0x0807ae14 in LocalT::serialize (this=0x80d4e00, outbin=@0x7574736b)
    at CSerialize.cpp:2054 
```

其他两个正在运行的线程：

1) 在插座`accept();`

2）调用时的下一个可运行线程`popen()`，似乎是它的执行或`read`来自管道。但是不知道是什么`__error()`？？？？？？

```
Thread 1 (Thread 0x8614800 (LWP 100343)):
#0  0x4865b8f9 in __error () from /lib/libpthread.so.2
#1  0x4865a15a in pthread_testcancel () from /lib/libpthread.so.2
#2  0x486425bf in read () from /lib/libpthread.so.2
#3  0x08056340 in UT::execute_popen (command=@0x4865e6bc,
    ptr_output=0xbf2f7d30) at Utils.cpp:75 
```

3）所有其他线程休眠。

我不知道为什么它崩溃了？也许有人可以假设或建议？

**==编辑==**

这是一个系统（？）线程（我没有创建它，但程序总是有+1线程）。它总是：

```
Thread 8 (Thread 0x80d4a00 (LWP 100051)):
#0  0x4865a79b in pthread_testcancel () from /lib/libpthread.so.2
#1  0x48652412 in pthread_mutexattr_init () from /lib/libpthread.so.2
#2  0x489fd450 in ?? () 
```

**==EDIT2 - 按要求发送==**

```
(gdb) bt
#0  0x4865a7db in pthread_testcancel () from /lib/libpthread.so.2
#1  0x48652412 in pthread_mutexattr_init () from /lib/libpthread.so.2
#2  0x489fd450 in ?? () 
```

奇怪……为什么`?? ()`？

**==EDIT3 - 加载核心时==**

```
Program terminated with signal 11, Segmentation fault.
[skiped]
#0  0x4865a7db in pthread_testcancel () from /lib/libpthread.so.2
[New Thread 0x8614800 (LWP 100343)]
[New Thread 0x8614600 (sleeping)]
[New Thread 0x8614400 (sleeping)]
[New Thread 0x8614200 (sleeping)]
[New Thread 0x8614000 (sleeping)]
[New Thread 0x80d4e00 (runnable)]
[New Thread 0x80d4c00 (sleeping)]
[New Thread 0x80d4a00 (LWP 100051)]
[New Thread 0x80d4000 (runnable)]
[New LWP 100802]

(gdb) info thread
* 10 LWP 100802  0x4865a7db in pthread_testcancel () from /lib/libpthread.so.2
  9 Thread 0x80d4000 (runnable)  0x486d7bd3 in accept () from /lib/libc.so.6 -- MAIN() THREAD
  8 Thread 0x80d4a00 (LWP 100051)  0x4865a79b in pthread_testcancel ()
   from /lib/libpthread.so.2 ( UNIDENTIFIED THREAD system()? ) 
  7 Thread 0x80d4c00 (sleeping)  0x48651cb6 in pthread_mutexattr_init ()
   from /lib/libpthread.so.2 (SIGNAL PROCESSOR THREAD)
  6 Thread 0x80d4e00 (runnable)  0x4864f11d in pthread_mutex_lock ()
   from /lib/libpthread.so.2 (MAINTENANCE THREAD)
  5 Thread 0x8614000 (sleeping)  0x48651cb6 in pthread_mutexattr_init ()
   from /lib/libpthread.so.2 (other mutex cond_wait - worker 1)
  4 Thread 0x8614200 (sleeping)  0x48651cb6 in pthread_mutexattr_init ()
   from /lib/libpthread.so.2 (other mutex cond_wait - worker 2 )
  3 Thread 0x8614400 (sleeping)  0x48651cb6 in pthread_mutexattr_init ()
   from /lib/libpthread.so.2 (other mutex cond_wait - worker 3 )
  2 Thread 0x8614600 (sleeping)  0x48651cb6 in pthread_mutexattr_init ()
   from /lib/libpthread.so.2 (other mutex cond_wait - worker 4)
  1 Thread 0x8614800 (LWP 100343)  0x4865b8f9 in __error ()
   from /lib/libpthread.so.2 ( popen() thread see below) 
```

我创建了：1 个维护线程（序列化）、1 个`popen()`线程、4 个工作线程、1 个主线程、1 个信号线程 = 8 个线程......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T23:10:01.683

您称为系统线程的线程实际上是您程序的`main thread`.

其次，到目前为止您共享的信息，看起来您正在获取互斥锁但从未释放它。这会导致不稳定的状态（某些参数的值错误），从而导致崩溃。我相信您也会观察到间歇性挂起。

你能分享`backtrace` 它什么时候崩溃吗？

# spring - JTA 超时，无任何承诺

> ID：11042463
> 
> 赞同：0
> 
> 时间：2012-06-14T22:56:10.610
> 
> 标签：spring, weblogic, jta

我有一个非常基本的 JTA 问题。

我们正在使用 Spring 的 AOP 在服务类中的任何方法上应用 WebLogicJtaTransactionManager 切入点……并且我们设置了 tx:method timeout="60"。

有趣的是在该服务中，我们运行一个 select 语句从数据库中检索记录（使用 Hibernate/JPA），然后去做一些与数据库/事务无关的工作。该方法运行时间超过 60 秒，并且永远不会抛出超时异常，并且永远不会回滚事务。我们不会更新或创建新对象来持久化。

除此之外，我们将 JTA 配置为在 WebLogic Server 上 180 秒后超时......并且应用程序仍然没有超时。

WLS 文档说“事务超时以秒为单位。如果在此时间之后事务仍处于“活动”状态（从 begin() 开始计数），它会自动回滚。一旦事务进入准备状态，但是，此超时参数不适用；事务将重试，直到提交所有资源。"

这种行为是否与 JTA 没有任何东西可以提交，因此超时不一定适用的事实有关？

或者它是否与因为没有真正的数据库（插入/更新/删除）所以事务永远不会处于真正的活动状态这一事实有关？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T18:29:22.990

JTA 事务超时仅适用于基于 XA 的数据源。您能否确认数据源是使用 XA 数据库驱动程序设置的？

# jquery - 带边距顶部的下拉菜单

> ID：11042471
> 
> 赞同：1
> 
> 时间：2012-06-14T22:56:58.357
> 
> 标签：jquery, css

我正在处理带有顶部边缘的下拉菜单。问题是，当我将鼠标从 li 下拉到下拉时，它会关闭。我怎样才能使它与margin-top一起工作？

[http://jsfiddle.net/wGzj8/8/](http://jsfiddle.net/wGzj8/8/)

从我的真实设计：

![落下](../Images/b7598fe147cc655f9ae81ee8183e7556.png)

我试过这个解决方案：[How to use (top) margin with CSS3 drop down menu?](https://stackoverflow.com/questions/8322663/how-to-use-top-margin-with-css3-drop-down-menu) ，但它会将我的 ul 下的图像向下移动（“O fakulteti”）。

请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T23:46:48.290

只需使顶级列表元素稍高一点，以便它们与导致问题的边距之间的区域重叠，您可以添加 4px 的底部填充来实现这一点。在这里更新小提琴：http: [//jsfiddle.net/wGzj8/22/](http://jsfiddle.net/wGzj8/22/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T00:24:34.637

这应该可以帮助你：http: [//jsfiddle.net/seyfollahi/qwL8P/](http://jsfiddle.net/seyfollahi/qwL8P/)

添加高度：`#header_glavni_meni ul li .header_glavni_a {}`

更改边距顶部： `#header_glavni_meni ul li ul {}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T23:07:38.403

`margin-bottom`在选择器中添加以下代码，

```
#header_glavni_meni ul li .header_glavni_a {
  margin-bottom:10px;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T23:09:37.883

如果你用 extra 包裹你的子菜单`<div>`怎么办？这`<div>`应该具有`margin-top: 4px`样式，而不是与嵌套样式相同的样式`ul`：

```
<li>
    <div class="header_meni_crta"></div>
    <a class="header_glavni_a">O fakulteti</a>
    <div style="margin-top: 4px;">
        <ul style="display: none;" class="dropdown_levo" style="margin-top: 0;">
            <li><a href="#">Vizitka</a></li>
            <li><a href="#">Vodstvo</a></li>
            <li><a href="#">Organi</a></li>
            <li><a href="#">Zaposleni</a></li>
            <li><a href="#">Organiziranost in enote</a></li>
            <li><a href="#">Akti in pravilniki</a></li>
        </ul>
    </div>
</li> 
```

**演示：http:** [//jsfiddle.net/wGzj8/18/](http://jsfiddle.net/wGzj8/18/)

# c# - 在 C# 中将 dll 文件添加到 Visual Studio 时遇到问题

> ID：11042472
> 
> 赞同：2
> 
> 时间：2012-06-14T22:56:58.857
> 
> 标签：c#, visual-studio, dll, alglib

我是 C# 编码的新手，我使用的是 Microsoft Visual Studio 2012。我的问题是，当我从 dll 文件添加引用时，它以红色突出显示导入“使用 alglibnet2;” 我正在尝试从 Alglib 添加对我的代码的引用来计算协方差矩阵 covm()。我也确实将 dll 文件和我的代码一起放在了 lib 文件夹中。任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-14T22:58:56.817

您需要右键单击项目并选择*Add Reference*，然后导航到程序集的位置。

# excel - 如何从 VBA (Excel) 调用 Bash 脚本

> ID：11042473
> 
> 赞同：15
> 
> 时间：2012-06-14T22:57:02.243
> 
> 标签：excel, vba, bash, macos

如何`bash`在 MAC OSX 上使用 VBA 运行文件

我尝试了以下代码

```
location = FolderPath(ThisWorkBook.FullName) 
```

它返回当前目录减去文件名。

其次是

```
Shell(location &"runmybatch.sh") 
```

我这样做是因为 bash 脚本与 excel 电子表格位于同一文件夹中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-26T23:46:46.927

有几个惊喜让这件事变得棘手！

1.  **Shell**函数期望路径由**:**分隔，而不是**/**
2.  脚本运行时，会将根 ( **/** ) 目录作为其工作目录

除此之外，您应该能够使用**Shell**命令运行 bash 脚本。以下是帮助您入门的分步说明。

*   在 Desktop 目录中创建以下 bash 脚本并将其命名为**test.sh**：

> ```
> #!/bin/bash
> open /Applications/Calculator.app/ 
> ```

*   确保 test.sh 是可执行的（从终端窗口**chmod +x test.sh**）
*   尝试运行它（在终端中键入**./test.sh**）。应该出现计算器应用程序。退出那个。
*   运行 Excel 并创建一个新工作簿**Workbook1**。
*   将此空白工作簿保存在**桌面**目录中作为**启用宏的工作簿**
*   运行 VB：**工具 > 宏 > Visual Basic 编辑器**
*   如果没有显示即时窗口，**查看 > 即时窗口**
*   在即时窗口中，键入以下 VBA 代码：

> ```
>  Shell ActiveWorkbook.Path & ":test.sh" 
> ```

*   计算器应用程序应该运行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T00:01:23.813

我对 shell 命令没有运气，但这是通过 Excel 2011 中的 applescript 为我工作的：

```
script_s = "do shell script ""/Users/user/path/to/script/rubyscript_09.rb"""
MacScript script_s 
```

我发现有必要让脚本使用' `#!/usr/bin/env ruby`'的shebang（在安装ruby版本管理器之后）

要寻址位于调用文件文件夹的子文件夹中的文件，请使用以下命令：

```
FilePathName_s = ThisWorkbook.Path & ":subfolder:filename" 
```

这将返回带有`:`'s 的路径，我认为必须将其转换为`/`'s `do shell script`。这可以通过 AppleScript`quoted form of POSIX path of FilePathName_s`或 VBA来完成`FilePathName_s = "/" & Replace(FilePathName_s, ":", "/")`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-01-03T22:50:13.737

即使我将它放在全局路径 (/usr/bin) 上并且所有用户都具有读取和执行权限，我也无法让我的简单 bash 脚本正常工作。有两件事导致我的脚本失败：由于 AppleScript 环境和我的用户的 bash 环境之间的差异导致的权限和路径。[我发现Office 2011 for Mac](https://stackoverflow.com/questions/6136798/vba-shell-function-in-office-2011-for-mac/)中 VBA Shell 函数的讨论对解决我的问题更有帮助。这是我最终确定的过程。

因为 Excel 掩盖了底层细节，我建议使用 AppleScript 编辑器，它希望在您的故障排除过程中比我看到的无意义的 Excel 错误提供更好的洞察力：

1.  使用 AppleScript 编辑器来确认脚本实际上可以作为任何用户使用，并且使用了任何环境变量：

    1.  在 Spotlight 中，开始输入“applescript editor”，直到它出现，然后单击它
    2.  创建一个新的 AppleScript 编辑器文件
    3.  *在不*加双引号的情况下将您的简单脚本输入新文件- 我的读取

        ```
        do shell script "parseCsvAndOpen.sh" 
        ```

    4.  点击脚本的“运行”按钮
    5.  跟踪任何问题，进行更改，然后重复点击“运行”按钮，直到您从 AppleScript 编辑器中执行它
        *   好消息是，如果您需要返回 StackOverflow 或 Google 寻求帮助，您的搜索范围会更窄；-)
2.  现在将您的简单脚本从 AppleScript 编辑器复制到您的 vba 并确认它仍然有效

    1.  我能够将我的双引号加倍并将其放在 MacScript 代码之后的双引号中：

        ```
        MacScript "do shell script ""parseCsvAndOpen.sh""" 
        ```

        那确实是一个，两个，然后是三个双引号字符！（大概是转义双引号）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-23T14:16:57.533

我没有使用 FolderPath 命令，它似乎对我不可用，所以我稍后会调查为什么不可用。下面是我测试过的一些示例代码，以确保可以从 OSX Excel 运行 .sh 文件。

我用来测试的 .sh 文件放在我的桌面上，只包含以下行：“open /Applications/Calculator.app”

在 OSX 上从 Excel 调用 .sh 的 VBA 代码如下：

```
Dim DesktopFolder As String
DesktopFolder = MacScript("return (path to desktop folder) as string")

Dim ScriptFile As String
ScriptFile = DesktopFolder & "test.sh"

RetVal = Shell(ScriptFile, vbNormalFocus) 
```

我决定检查它是否仅在某些文件夹上起作用，所以我将 .sh 文件移动到 /tmp 文件夹并且无法执行该文件，无论我如何编码路径，都只是得到“找不到文件错误”。终于意识到 OSX 上的 /tmp 文件是一个映射到 /private/tmp 的符号链接，当我使用该路径时，它似乎又可以正常工作了。

```
Dim ScriptFile As String
ScriptFile = "Macintosh HD:private:tmp:test.sh"
RetVal = Shell(ScriptFile, vbNormalFocus) 
```

无论如何，希望它有点帮助。我将继续寻找更好的方法，需要一些东西来动态地找到可靠的文件位置。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-17T01:06:06.697

起初，Joel 的优秀教程对我不起作用（在 OS X 10.11.6 和 Excel for Mac 2011 上）。经过一番调查，我发现我的问题是由我的脚本文件 test.sh 中的“扩展属性”引起的。在终端中，`ls -l test.sh`产生：

```
 -rwxr-xr-x@ 1 tgk  staff  456 Mar 16 13:12 test.sh 
```

请注意，“@”表示存在扩展文件属性。通过调用 给出更多信息`ls -l@ test.sh`，这会产生：

```
-rwxr-xr-x@ 1 tgk  staff  456 Mar 16 13:12 test.sh
      com.apple.FinderInfo   32 
      com.apple.TextEncoding     15 
```

换句话说，根据文件的创建方式，它可能有也可能没有扩展属性。所以我通过 剥离了扩展属性`xattr -c test.sh`，然后 Joel 的调用：`Shell ActiveWorkbook.Path & ":test.sh"`完美运行！非常感谢大家。

`____`

后来我了解到，通过首先`defaults write com.barebones.textwrangler WriteExtendedAttributes never`在终端中调用，可以在 TextWrangler 中保存 shell 脚本而不编写扩展属性。但是，这只会阻止添加`com.apple.FinderInfo`属性；该`com.apple.TextEncoding`属性仍然存在。然而幸运的是，当 shell 脚本只有`com.apple.TextEncoding`扩展属性时，Joel 的 VBA 脚本命令现在可以工作了！所以，TextWrangler 是我的编辑器！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-24T14:42:50.783

我没有安装 MS Office for Mac，所以我无法测试我提出的答案。我想应该可以调用 Bash 二进制文件（即 /bin/bash）并将您想要执行的脚本的名称作为参数传递。这将避免权限位的任何问题，并确保第二个参数的路径名是通常的 Unix 风格的 / 分隔的。对于第一个参数，按名称调用 bash 可能就足够了，没有任何路径，因为它应该使用 PATH 环境变量。

总而言之，仍然没有测试，我会试试这个：

```
Shell("bash runmybatch.sh") 
```

或者，如果由于工作目录不正确而无法正常工作，

```
Shell("bash '" & location & "/runmybatch.sh'") 
```

其中 location 是工作簿目录的 / 分隔路径。单引号应注意路径中的任何空格或其他外来字符。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-09-03T23:46:23.547

您需要做的是在您的 VBA 宏中编写以下命令：

```
Shell "C:Path\to\script\location\script.sh" 
```

（记得在路径两边加上双引号）

获取脚本位置的最佳方法是录制一个宏以将工作簿保存在 bash 脚本所在的同一文件夹中。这样，您以后可以查看 Excel 如何调用该路径并将其复制/粘贴到上面的 shell 命令中。

# php - 使用 php 上传本地文档

> ID：11042478
> 
> 赞同：0
> 
> 时间：2012-06-14T22:58:20.793
> 
> 标签：php, curl

我正在尝试测试一个用于将本地文件上传到 https url 的 rest api。我目前正在使用 curl 来做到这一点。问题是我在 curl 中的 POST 被转换为 PUT (http://curl.haxx.se/docs/manpage.html) 也提到了同样的问题。要从命令行进行测试，我使用以下内容：

> curl -H "Content-Type: application/json" -H "Authorization: Bearer XXXXXXXXXXXXXXXYYYYYzzzzzz" -H "Accept-Version: ~1" -H "Except: 100-continue" -H "Accept-Version: ~1" - T“somefile.pdf”“https://abc-xyz.co/docs”

输出：

```
{"code":"BadMethod","message":"/docs does not support PUT"} 
```

我的PHP代码：

```
$url = '"https://abc-xyz.co/docs';
$filepath = '/Users/me/Documents/somefile.pdf'; //mac path
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST" ); 
curl_setopt($ch, CURLOPT_HTTPHEADER,  
array('Authorization: Bearer XXXXXXXXXXXXXXXYYYYYzzzzzz', 'Accept-Version: ~1', 'Except: 100-continue'); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLINFO_HEADER_OUT, true);
$file = "@".$filepath;
curl_setopt($ch, CURLOPT_POSTFIELDS,$file); 
$response = curl_exec($ch);
if(!CURL_ERROR($ch))
  {      
  echo"\n The output is:".$response;
  }
else
  {
  echo "\nUpload failed ".curl_error($ch);
  exit;
  } 
curl_close($ch); 
```

输出：我得到解析错误。

有人可以用三件事教育我：

1.  我可以使用 curl 为 https 进行 POST 吗？如果是，如何？如果没有，我的方法应该是什么？
2.  如何在我的 php 中传递文件路径名？我也试过 "@".$filepath 但它仍然不喜欢它。
3.  如果我想将文件上传类型限制为 pdf，我应该使用 mime 类型吗？（申请/pdf????）

谢谢，博士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T23:20:08.077

在命令行中，[使用 curl 查看 post fileupload](https://superuser.com/a/149335)。

从 PHP，请参阅[手册](http://nl.php.net/curl_setopt)

> 在 HTTP“POST”操作中发布的完整数据。要发布文件，请在文件名前加上 @ 并**使用完整路径**。文件类型可以通过使用格式为“;type=mimetype”的文件名来明确指定。此参数可以作为 urlencoded 字符串（如 'para1=val1¶2=val2&...'）或作为字段名称作为键和字段数据作为值的数组传递。如果 value 是一个数组，则 Content-Type 标头将设置为 multipart/form-data。从 PHP 5.2.0 开始，如果文件以 @ 前缀传递给此选项，**则 value 必须是数组。**

```
curl_setopt($ch, CURLOPT_POSTFIELDS,array('someuploadname'=> "@".$filepath)); 
```

# internet-explorer - 为什么我的 vb.net http cookie 无法在 IE 中写入（仅适用于 FireFox）

> ID：11042482
> 
> 赞同：0
> 
> 时间：2012-06-14T22:58:38.860
> 
> 标签：internet-explorer, iis, cookies, save

我的 vb.net 代码写入一个 cookie 值，然后检索它。

写入 cookie 的代码是：

```
Dim cookie As HttpCookie = New HttpCookie("mySessionID", mySessionID)
cookie.Expires = DateTime.Now.AddDays(90)
cookie.HttpOnly = True
Response.Cookies.Add(cookie) 
```

以及在后续页面上阅读它的代码：

```
Dim myRetrivedSessionID as String = Request.Cookies("mySessionID").Value 
```

当代码**在 FireFox 中运行时，它运行良好**，但**在 IE8**（或 IE7）中运行时，“Request.Cookies("mySessionID").Value”总是抛出异常***“对象引用未设置为对象的实例”。***，我解释为它找不到要加载的保存值？

知道为什么我失败了吗？更重要的是，我该如何解决它！

感谢您的帮助，我这几天一直在努力解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:23:32.907

我想我找到了导致我的问题的问题。

事实证明，IIS、IE 和名称中包含下划线“_”的服务器名称的组合会导致某种问题，从而使 cookie 无法正常工作。

我终于发现了这个问题：[线程：缺少带有 iis 64 位 isapi_redirect.dll jboss 和 MSIE 的 sessionid](http://forums.iis.net/p/1147938/1879164.aspx)

里面有没有说：

> 在我们的案例中，问题是 URL 中的下划线。如果服务器名的一部分有下划线，则 IE7 不接受它，但所有其他浏览器都接受它。（server_1 正常，server-1 正常）
> 
> rgrds

当我在名称中没有下划线的服务器上进行测试时，在同一个浏览器上，一切正常。

# wcf - 如何从客户端 SetDefaultCertificate 在 WCF 中调用服务器 Web 方法

> ID：11042483
> 
> 赞同：0
> 
> 时间：2012-06-14T22:58:44.097
> 
> 标签：wcf

下面是我在服务器 web.config 文件中的配置设置，它是 WCF 应用程序。这里我使用 makecert.exe 创建 X509 证书。

`<serviceCredentials> <userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType= "WcfService1.CCustomValidatorClass,WcfService1"/> <serviceCertificate findValue="CN=SignedByCA1" x509FindType="FindBySubjectDistinguishedName" storeLocation="CurrentUser" storeName="My" /> </serviceCredentials>`

“CN=SignedByCA1”是私钥，现在，我想从客户端调用 WCF 服务上的 Web 方法。但是我需要从客户端设置 SetDefaultCertificate，请您帮助我如何获取访问私钥 X509 证书的密钥。

`ServiceReference1.Service1Client obj = new ServiceReference1.Service1Client();`

```
 obj.ClientCredentials.UserName.UserName = "Sukesh";
        obj.ClientCredentials.UserName.Password = "Sukesh";

        obj.ClientCredentials.ServiceCertificate.SetDefaultCertificate(
             System.Security.Cryptography.X509Certificates.StoreLocation.CurrentUser, 
             System.Security.Cryptography.X509Certificates.StoreName.My,
             System.Security.Cryptography.X509Certificates.X509FindType.FindBySubjectDistinguishedName,
             "XYZ");

    string str = obj.GetData(1); // web method 
```

请在这里帮我...

错误：{“X.509 证书 CN=SignedByCA1 链构建失败。使用的证书具有无法验证的信任链。更换证书或更改 certificateValidationMode。吊销功能无法检查证书的吊销。 \r\n"}

谢谢，苏克什。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T00:15:40.770

由于自签名证书，您收到错误消息。

您可以使用[http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.servercertificatevalidationcallback(v=vs.100).aspx忽略错误](http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.servercertificatevalidationcallback(v=vs.100).aspx)

或者您可以将客户端证书安装到服务器的受信任的根权限中（假设这仅用于开发）。

或者，当然，您可以签署证书。

# mobile - 无限滚动在 iPhone 4 上不起作用

> ID：11042488
> 
> 赞同：0
> 
> 时间：2012-06-14T22:59:09.417
> 
> 标签：mobile

遵循无限滚动脚本在桌面和 Android 网络浏览器上运行良好，但在 iPhone 4 上无法运行。我应该修改什么以使其适用于 iPhone 和 Android？

"#more" 是 mysql 查询输出的 div ID。

这是脚本的一部分

```
var page = 1;
$(window).scroll(function () {
 $('#more').hide();
 $('#no-more').hide();

 if($(window).scrollTop() + $(window).height() > $(document).height() - 200) {
   $('#more').css("top","400");
   $('#more').show();
 }

 if($(window).scrollTop() + $(window).height() == $(document).height()) {

 $('#more').hide();
 $('#no-more').hide();

 page++; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-03-21T12:53:29.373

旧代码：以下旧代码仅适用于 PC 浏览器。

```
if ((($(window).scrollTop()+document.body.clientHeight)==$(window).height()) && isload=='true'){ 
```

新代码：我只是将 == 更改为 >=。它也适用于 Android (Chrome) 和 iOS

```
if ((($(window).scrollTop()+document.body.clientHeight)>=$(window).height()) && isload=='true') 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-06-27T13:07:11.180

尝试替换这个：

```
if($(window).scrollTop() + $(window).height() == $(document).height()) 
```

这样 ：

```
if($(window).scrollTop() + $(window).height() > $(document).height()) 
```

# javascript - JQuery 删除和内存泄漏

> ID：11042492
> 
> 赞同：3
> 
> 时间：2012-06-14T22:59:45.643
> 
> 标签：javascript, jquery

我正在做一个游戏，我看到很多内存消耗，我使用 jquery animate，动画完成后，我 .remove() 元素，我的问题是，从 dom 树中删除一个元素后，对象还存在于记忆中？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T23:18:41.897

Javascript 是一种垃圾收集语言。这意味着当没有代码保存对它的任何引用并且（对于 DOM 对象）它不在 DOM 中时，内存中的对象将被释放。因此，当您从 DOM 中删除一个对象时，只要您的 javascript 的其他部分没有对该 DOM 对象的引用，该 DOM 对象就会被清理，并且当垃圾收集器获得一个跑的机会。

请记住，当垃圾收集器释放内存时，它可能不会立即或永远不会返回到系统。它可能保留为分配给浏览器的内存，但可供浏览器内的其他内存请求使用。因此，释放脚本中的内存并不一定会使浏览器使用的总内存减少。

如果一遍又一遍地重复执行相同的操作导致浏览器使用的总内存不断增加，这只是内存泄漏。只有这样，您才能确定某些内存正在被“泄漏”永久消耗。

关于垃圾收集有许多细微差别，特别是对于旧版本的 IE，但对于现代浏览器，您需要记住的主要是如果您在自己的 javascript 数据结构中持有对对象的引用，它不会被垃圾收集。如果你没有对它的引用并且它不在 DOM 中，它将被释放并回收它的内存。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T23:01:05.783

如果没有对该元素的引用，垃圾收集将在下一次运行时将其清理干净。你很好用`.remove`，但不用担心垃圾收集。

# php - 使用函数在 PHP 中生成页面时在 HTML 源代码上获得额外的行

> ID：11042493
> 
> 赞同：0
> 
> 时间：2012-06-14T22:59:57.987
> 
> 标签：php, html

我正在完成我的 PHP 课程作业。

我不明白的问题是，当我对所有部分实际使用该功能时，我会不断收到额外的行。

喜欢在我的`index.php`页面上

```
<?php include('library.php') ?>
<?php top_header(); ?> 
```

这是我的功能`top_header`代码`library.php`

```
<?php function top_header(){ ?>
<?php echo '<?xml version="1.0" encoding="UTF-8"?>'; ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head><title></title></head>
<body>
<?php } ?> 
```

因此，当我使用验证检查我的代码时，它说 xml 文档类型必须在第一行，当我检查我的源代码时，我发现它不在第一行。我现在已经删除并重新创建了两次页面（首先它在第 4 行，现在它是第 2 行）

![在此处输入图像描述](../Images/5f9a92e7c61d2364a9abd5159d039ee6.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T23:04:10.760

前两行之间有一个换行符：

```
<?php include('library.php') ?>
<?php top_header(); ?> 
```

而这个换行符实际上生成了第一个空行！

使用以下内容：

```
<?php
    include('library.php');
    top_header();
?> 
```

一切正常:-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T23:01:37.047

可能是 library.php 中的某个地方正在呼应返回行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T23:02:30.523

`<?php include('library.php') ?>`一定是在输出什么。检查那个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T23:04:10.323

`<?php ?>`这些块之间有一个换行符：

```
<?php include('library.php') ?>
<?php top_header(); ?> 
```

请记住，PHP 会在 PHP 块的位置准确输出内容。休息保持不变。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T23:04:34.793

首先，如果您要输出 HTML，则不需要：

```
<?php echo '<?xml version="1.0" encoding="UTF-8"?>'; ?> 
```

其次，当你跳出一个`<?php ?>`代码块时，PHP标签之外的任何东西都会被输出。所以，你应该摆脱所有这些退出/重新进入，因为那里可能有空格。

第三，您不需要关闭`?>`，因为之后可能会有换行符/空格。所以，省略它是合法的，可以避免你犯这个错误。

```
<?php function top_header(){
    // echo '<?xml version="1.0" encoding="UTF-8"?>';
    echo '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en-US" lang="en-US">
<head><title></title></head>
<body>';
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-14T23:04:36.313

一个典型的原因是：结束标签后的行尾字符。这在编辑器中甚至可能不明显，但如果您在代码中的 ?> 之后有回车，则很容易出现新行。

简单的补救措施：只是不要关闭 PHP 标记。没有什么不好的，而且多余的行被 PHP 解释器吃掉了。

顺便说一句，如果您在代码之前出现空行，那就更糟了，因为您将失去发送新标头的能力。有趣的调试时间，我可以告诉你:-)

# css - PhoneGap：如何让 iPad 特定的 CSS 工作？

> ID：11042494
> 
> 赞同：1
> 
> 时间：2012-06-14T22:59:58.043
> 
> 标签：css, ipad, cordova

我正在为 iPhone 构建一个 PhoneGap/Cordova 项目。

我有 2 个 css 文件 - 一个用于一般 CSS 规则，一个用于 iPad 相关 css，如下所示：

```
 <!--Main Style Sheet-->    
    <link rel="stylesheet" href="css/styles.css" />
    <!-- iPad specific css-->
    <link rel="stylesheet" media="only screen and (max-device-width: 768px)" href="css/ipad.css" type="text/css" /> 
```

问题是 iPad css 的行为就像普通 css。当我运行 iPhone 和 iPad 模拟器时，我放在那里的 CSS 会出现。

谁能帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T23:04:30.963

对于 iPad，您需要**min** -device-width，而不是 max-device-width（即 iPad 在纵向模式下的最小宽度为 768px）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T23:09:45.827

max-device-width 给了我们一个最大值而不是最小值，所以它会影响所有低于 768 像素的设备，包括 iphone。给出最小宽度也应该解决它。可能（最小设备宽度：481px）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T04:45:29.117

如果上述解决方案不能解决某些读者的问题，那么这个问题与响应式网页设计直接相关。

我建议只使用一个带有媒体查询的样式表。

```
@media screen and (max-width:768px){
    /* Device Specific CSS rules here */
} 
```

我在这里选择了 max-width ，因为上面的任何东西都会呈现正常的 CSS。然后，您可以设置另一个最大宽度约为 500 像素的媒体查询以定位智能手机。请记住，媒体查询会自动继承所有指定的正常 CSS 规则，并且唯一需要在媒体查询内部定义的规则是设备特定样式。

这完全一样；然而，这只需要浏览器解析一个样式表，从而产生更快的加载时间（最小，但更快。

使用媒体查询时，您还需要在 HTML 中包含视口元标记。否则，您的设备将呈现与桌面相同的 CSS。

此外，大多数现代移动浏览器都支持 CSS3 媒体查询。

# hadoop - oozie 如何处理依赖关系？

> ID：11042495
> 
> 赞同：9
> 
> 时间：2012-06-14T22:59:59.183
> 
> 标签：hadoop, oozie, oozie-coordinator

我有几个关于 oozie 2.3 共享库的问题：

目前，我在 coordinator.properties 中定义了共享库：

```
oozie.use.system.libpath=true 
oozie.libpath=<hdfs_path> 
```

以下是我的问题：

1.  当共享库被复制到其他数据节点时，有多少数据节点将获得共享库？

2.  共享库是根据协调器作业中的 wf 数量复制到其他数据节点，还是每个协调器作业只复制一次？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T11:47:28.100

有效地将条目添加到`oozie.libpath`属性意味着 OOZIE 将在`mapred.cache.files`执行工作流中的操作时将这些库配置为配置属性（这是一个 DistributedCache 属性）。

然后，Hadoop 将负责在每个作业中将这些 jar 复制到每个集群节点一次，然后使用 classpath 配置属性中的 jar 配置任务`mapred.job.classpath.files`

因此，在回答您的第二个问题时，将为工作流中的每个操作复制它们，而不是每个协调员工作一次。因此，如果您有一个具有 4 个 mapreduce 操作的 wf 作业，则在该工作流的生命周期中，这些库将被复制到每个 tasktracker（仅那些参与 mapreduce 作业的任务跟踪器）4 次。

# .net - 配置 POS 打印机以进行远程打印

> ID：11042501
> 
> 赞同：0
> 
> 时间：2012-06-14T23:00:46.237
> 
> 标签：.net, epson, network-printers, receipt

如何配置餐厅的 POS 打印机以从网站打印订单？我们有一个基于 .NET/SQL 的在线订购 Web 应用程序。在线提交订单后，我们希望在餐厅的 POS 打印机上打印。

POS 打印机 - Epson TM-88V 或同等打印机直接（或通过路由器）连接到互联网，但不通过 PC！

在线订购系统是 Clorder (http://www.clorder.com)

非常感谢任何指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T23:14:24.550

您需要在网络中配置一些东西，以便从您的网站检索订单，然后打印到您的打印机。

# netty - 不受控制的客户端（websocketx）使用过多的内存

> ID：11042503
> 
> 赞同：2
> 
> 时间：2012-06-14T23:01:06.567
> 
> 标签：netty

当发送不受控制的 TextWebSocketFrames 到一个简单的 Netty WebSocket 回显服务器实现（示例包中的实现的略微修改版本）时，无需等待 ChannelFuture 上的客户端同步（），服务器上的堆内存使用量正在增长以指数方式直到它最终耗尽内存。

测试用例：客户端不会等到实际字节被写入，也不会等待服务器在写入下一个文本帧之前将文本“回显”回客户端

```
for (int i = 0; i < 10000000; i++) {
    ch.write(new TextWebSocketFrame("Message #" + i));
} 
```

在观察 yourkit 内存分析器时（测试开始 15 秒，写入大约 20.000 帧），BigEndianHeapChannelBuffer 对象的数量已经过度增长。

```
BigEndianHeapChannelBuffer 284,509 (objects) 9,104,288 (shallow size) (after ~30.000 frames sent within 10 second window) 
```

在服务器端，可以从 BigEndianHeapChannelBuffers 和 CompositeChannelBuffers 对象中观察到大量堆积，这些对象从未被清理过，也不会被垃圾收集（由于引用被持有，这可能是不可能的）。我猜这与（单个）工作线程无法向客户端通道写入下游“回声”响应有关，因为它正忙于处理来自客户端的快速传入请求

有没有办法在服务器端防止/限制这种情况（意外拒绝服务）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T01:40:39.683

在 Netty 中，大多数 I/O 操作都是异步的。因此，在不等待之前的写入完成的情况下写入数千条消息将使您获得`OutOfMemoryError`. 为避免这种情况，我更喜欢使用计数器变量来计算挂起的写入次数。例如：

```
private final AtomicInteger pendingWrites = new AtomicInteger();

...
while (pendingWrites.get() < MAX_PENDING_WRITES) {
  pendingWrites.incrementAndGet();
  ch.write(msg).addListener(new ChannelFutureListener() {
    ...
    pendingWrites.decrementAndGet();
    if (pendingWrites.get() < MAX_PENDING_WRITES) {
      // resume writing here
    }
  }
} 
```

或者，您可以使用`ChunkedWriteHandler`which 基本上完成相同的工作。

# vba - 如何避免段落标记？

> ID：11042509
> 
> 赞同：1
> 
> 时间：2012-06-14T23:01:37.077
> 
> 标签：vba, ms-word

我有这个运作良好的例程，但它在计算段落标记时会搞砸。如何跳过段落标记？

```
 For Each wrd In ActiveDocument.Words
            If Selection.Style = ActiveDocument.Styles("Normal") Then
               If wrd.Font.Name <> "Arial" Or wrd.Font.Size < 9 Or wrd.Font.Size = 11 Or wrd.Font.Size > 12 _
                Or wrd.Font.Color <> wdColorBlack Or wrd.Font.Color <> wdColorAutomatic Or wdColorBlue Then
                    wrd.HighlightColorIndex = wdYellow
                    wordrep = wordrep + 1
                End If
            End If
        Next 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T02:14:24.537

试试这个

```
For Each wrd In ActiveDocument.Words
    If Selection.Style = ActiveDocument.Styles("Normal") Then
        If wrd.Font.Name <> "Arial" Or _
           wrd.Font.Size < 9 Or _
           wrd.Font.Size = 11 Or _
           wrd.Font.Size > 12 _
           Or wrd.Font.Color <> wdColorBlack Or _
           wrd.Font.Color <> wdColorAutomatic Or _
           wrd.Font.Color <> wdColorBlue Then
                If Asc(Left(wrd, 1)) <> 13 Then
                    wrd.HighlightColorIndex = wdYellow
                    wordrep = wordrep + 1
                End If
        End If
    End If
Next 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T06:52:31.043

你的逻辑有问题。你是什​​么意思`Or wdColorBlue Then`？这不会按预期工作......

如果你`wrd.Font.Color <> wdColorBlue`的意思是：字体颜色不能同时是黑色和蓝色，所以`wrd.Font.Color <> wdColorBlack Or wrd.Font.Color <> wdColorBlue`永远*都是*真的！因此，您的内部`If`构造的内容将始终执行。

如果您的意思是`wrd.Font.Color = wdColorBlue`：当字体为蓝色时，则不一定是黑色，因此`wrd.Font.Color <> wdColorBlack`条件是多余和多余的。

我不知道这是否解决了你的问题......我不完全确定你所说的“它在计算段落标记时搞砸了”是什么意思。

# javascript - JavaScript 动画的持续时间不准确

> ID：11042510
> 
> 赞同：0
> 
> 时间：2012-06-14T23:01:41.413
> 
> 标签：javascript, setinterval, duration

首先我想提两件事，
~~**一：**我的代码并不完美（尤其是 eval 部分）——但我想为自己尝试一些东西，看看我是否可以复制 jQuery Animation 函数，所以请原谅我“不好”的做法，请不要建议我使用 jQuery，我想尝试一下。~~
**二：**这段代码还没有完成，我只是想弄清楚是什么让它工作得不好。

所以动画运行了大约 12 秒，而我输入的持续时间参数是 15 秒，我做错了什么？

```
function animate(elem, attr, duration){
  if(attr.constructor === Object){//check for object literal
    var i = 0;
    var cssProp = [];
    var cssValue = [];
    for(key in attr) {
          cssProp[i] =  key;
          cssValue[i] = attr[key];
    }
    var fps = (1000 / 60);
    var t = setInterval(function(){
      for(var j=0;j<cssProp.length;j++){
        if(document.getElementById(elem).style[cssProp[j]].length == 0){
          //asign basic value in css if the object dosn't have one.
         document.getElementById(elem).style[cssProp[j]]= 0;
        }
        var c = document.getElementById(elem).style[cssProp[j]];
        //console.log(str +" | "+c+"|"+cssValue[j]);
        if(c > cssValue[j]){
            document.getElementById(elem).style[cssProp[j]] -= 1/((duration/fps)*(c-cssValue[j]));
        }else if(c < cssValue[j]){
            document.getElementById(elem).style[cssProp[j]] += 1/((duration/fps)*(c-cssValue[j]));
        }else if(c == cssValue[j]){
            window.clearInterval(t);
        }
      }
    },fps);
  }
}
  animate('hello',{opacity:0},15000); 
```

**html:**

```
 <p id="hello" style="opacity:1;">Hello World</p> 
```

*注意：我猜是有问题*

> (持续时间/fps)*(c-cssValue[j])

*setInterval（fps 变量）的部分或/和间隔。*

**提前谢谢**。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T00:10:56.720

我不会尝试重构它并弄清楚它，因为它非常不稳定。这就是说……一些事情。

**不要依赖你正在制作动画的值来让你知道动画进度**

一般来说，你的方法是不合理的。你最好自己跟踪进度。此外，由于您的方法，您的数学似乎过于努力，应该更简单。

可以这样想：当时间过去时，您的动画就完成了，而不是当动画值似乎表明它处于最终位置时。

**不要增加，设置**

浮点数学是不精确的，像这样的重复加法累积也会累积浮点错误。制作一些变量来为您跟踪进度会更具可读性，您可以在计算中使用这些变量。

```
animatedValue += changeOnThisFrame // BAD!
animatedValue = valueOnThisFrame   // GOOD! 
```

**不要做正/负条件舞**

事实证明，这`10 + 10`和`10 - (-10)`真的是一回事。这意味着您始终可以添加值，但变化率可以是负值或正值，并且值将在适当的方向上动画。

**超时和间隔不准确**

结果`setTimeout(fn, 50)`实际上意味着安排 fn 至少在 50 毫秒后调用。在这 50 毫秒之后执行的下一个 JS 运行循环将运行该函数，因此您不能依赖它来完全准确。

也就是说，它通常在几毫秒内。但是 60fps 大约是 16ms 的帧，并且该计时器实际上可能会在 16-22ms 的可变时间内触发。因此，当您根据帧速率进行计算时，它与实际经过的时间完全不匹配。

**重构复杂的数学**

在这里解构这条线会很困难。

```
document.getElementById(elem).style[cssProp[j]] -= 1/((duration/fps)*(c-cssValue[j])); 
```

为什么要更复杂地分解它，以便您可以轻松理解这里发生了什么。单独重构这一行，我可能会这样做：

```
var style = document.getElementById(elem).style;
var changeThisFrame = duration/fps;
var someOddCalculatedValue = c-cssValue[j];
style[cssProp[j]] -= 1 / (changeThisFrame * someOddCalculatedValue); 
```

这样做可以更清楚地了解数学中的每个表达式的含义以及它的用途。而且因为你没有在这里做，我很难想知道为什么`c-cssValue[j]`在那里以及它代表什么。

**简单示例**

这比你所拥有的能力要差，但它显示了你应该采取的方法。它使用动画开始时间来创建完美的值，这取决于动画应该有多完整、它从哪里开始以及它要去哪里。它不使用当前动画值来确定任何内容，并保证运行动画的完整长度。

```
var anim = function(elem, duration) {

    // save when we started for calculating progress
    var startedAt = Date.now();

    // set animation bounds
    var startValue = 10;
    var endValue   = 200;

    // figure out how much change we have over the whole animation
    var delta = endValue - startValue;

    // Animation function, to run at 60 fps.
    var t = setInterval(function(){

        // How far are we into the animation, on a scale of 0 to 1.
        var progress = (Date.now() - startedAt) / duration;

        // If we passed 1, the animation is over so clean up.
        if (progress > 1) {
            alert('DONE! Elapsed: ' + (Date.now() - startedAt) + 'ms');
            clearInterval(t);
        }

        // Set the real value.
        elem.style.top = startValue + (progress * delta) + "px";

    }, 1000 / 60);
};

anim(document.getElementById('foo'), 5000);
​ 
```

JSFiddle：http: [//jsfiddle.net/DSRst/](http://jsfiddle.net/DSRst/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T23:51:08.697

您不能`setInterval`用于准确的总计时。因为 JS 是单线程的，并且多个事物在一个线程上竞争周期，所以不能保证下一个间隔调用将完全准时，或者 N 个间隔将消耗确切的持续时间。

相反，几乎所有动画例程都获取当前时间并使用系统时钟来测量总持续时间的时间。一般的算法是获取开始时间，计算出期望的结束时间（开始时间+持续时间）。然后，正如您所做的那样，计算预期的步长值和迭代次数。然后，在每一步中，您重新计算剩余的剩余时间和剩余的步长值。通过这种方式，您可以确保动画始终准确（或几乎准确）按时完成，并且始终准确到达最终位置。如果动画落后于理想轨迹，那么它将自我纠正并在剩余的步骤中稍微移动更多。如果它因任何原因（舍入误差等）领先，它将回拨步长并同样准时到达最终位置。

您可能还需要知道浏览器并不总是支持非常小的时间量。每个浏览器都有某种最小时间，它们将允许计时器操作。这[是一篇](http://www.adequatelygood.com/2010/2/Minimum-Timer-Intervals-in-JavaScript)关于最低计时器级别的文章。

这[是一篇](http://www.schillmania.com/content/projects/javascript-animation-3/)关于补间的文章（不断重新计算步骤以准确匹配持续时间的过程）。

我还建议您查看一些库（jQuery、YUI 或您找到的任何其他库）中的动画代码，因为它们都可以向您展示这是如何以非常通用的方式完成的，包括补间、缓动函数， ETC...

# ruby-on-rails-3 - 设计+验证码+ x个错误的密码？

> ID：11042512
> 
> 赞同：0
> 
> 时间：2012-06-14T23:01:58.157
> 
> 标签：ruby-on-rails-3, login, devise, passwords

当用户输入 x 个错误密码时，是否有一些好的资源教程或有人尝试在设计上实现验证码？

这个想法是验证码出现在许多请求中，以防止机器人或其他坏人出现并限制设计签名页面上的请求数量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T03:01:05.563

我可以考虑通过两种方式做到这一点：

第一个基于 failed_attempts 属性（因此您应该在每次登录失败后增加它）。要在 Devise 上使用它，您可以创建自己的`FailureApp`覆盖响应方法以更新以对用户的 failed_attempt 属性进行增量。当用户达到验证码限制时，您可以设置 flash 属性来发出信号，因此，您可以在控制器上决定验证码。但是这种方式存在一个问题：当它为用户登录时，它对尝试不同登录的用户不起作用。

第二个是基于 IP 的：对于每次不成功的登录，您都会记录 IP 和不成功的尝试，当 IP 达到限制时，您设置已经提到的 flash 属性以表示来自该 IP 的请求数已经达到限制你可以显示验证码。您可以使用 ActiveRecord 和关系数据库，甚至像 Redis 这样的轻量级数据库来做到这一点。您还可以考虑从该数据库中删除旧数据的方法。

# linux - 如何将tail -1输入到sh script var

> ID：11042514
> 
> 赞同：2
> 
> 时间：2012-06-14T23:02:09.173
> 
> 标签：linux, bash, shell

目的：我想尾随 file.txt 的最后一行并输入一个变量以用于通过 sed 进行替换。

代码：

```
 ALARM_POPUP_CONTENT=(tail -1 /logs/file.txt)
 ALARM_POPUP_CONTENT=tail -1 /logs/file.txt 
```

结果：

这仅输出工作“尾”或第二个选项未找到的错误命令。有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T23:03:13.510

尝试：

```
ALARM_POPUP_CONTENT=$(tail -1 /logs/file.txt) 
```

或带反引号：

```
ALARM_POPUP_CONTENT=`tail -1 /logs/file.txt` 
```

# php - Drupal 7 中的条件字段组/字段集

> ID：11042523
> 
> 赞同：10
> 
> 时间：2012-06-14T23:02:45.983
> 
> 标签：php, drupal, drupal-7

**背景：**在 Drupal 7 中，我使用 CCK（又名 Field UI）创建了一个表单。我使用[字段组](http://drupal.org/project/field_group)模块创建了一个字段组，但我需要它是有条件的，这意味着它只会根据之前的答案显示。

**以前的研究**：要创建条件字段，您可以使用[hook_form_alter()](http://api.drupal.org/api/drupal/modules%21system%21system.api.php/function/hook_form_alter/7)来编辑[#states](http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7#states)属性，如下所示：

```
function MYMODULE_form_alter(&$form, &$form_state, $form_id) {
  if ($form_id == 'person_info_node_form') {
    // Display 'field_maiden_name' only if married
    $form['field_maiden_name']['#states'] = array(
      'visible' => array(
        ':input[name="field_married[und]"]' => array('value' => 'Yes'),
      ),
    );
  }
} 
```

但是，似乎没有办法将 States API 用于字段组。需要注意的一件事是，虽然字段存储在 中，但字段组也`$form`存储在`$form['#groups']`中`$form['#fieldgroups']`。我不知道如何区分这些，考虑到这一点，我尝试以与上述相同的方式将[#states属性应用于字段组。](http://api.drupal.org/api/drupal/developer!topics!forms_api_reference.html/7#states)但是，它只会产生服务器错误。

**问题**：有没有办法使用 States API 或其他方法有条件地显示字段组？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-03T16:12:46.753

你必须使用[hook_field_group_build_pre_render_alter()](http://api.drupalhelp.net/api/field_group/field_group.api.php/function/hook_field_group_build_pre_render_alter/7)

简单地 ：

```
function your_module_field_group_build_pre_render_alter(&$element) {
  $element['your_field_group']['#states'] = array(
    'visible' => array(
      ':input[name="field_checkbox"]' => array('checked' => TRUE),
    ),
  );
} 
```

这非常有效。如果 A 组在另一个组中，请执行此操作

```
$element['groupA']['groupB']['#states'] etc.... 
```

如果不存在，您可能需要添加 id 属性：

```
$element['your_field_group']['#attributes']['id'] = 'some-id';
$element['yout_field_group']['#id'] = 'some-id'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T22:31:30.633

这是我想出的最简单的解决方案。这基本上有 2 个部分：(1.) 以编程方式更改表单的显示，以及 (2.) 使用 GUI 更改内容的显示。

(1.) 首先，我使用[hook_form_alter()](http://api.drupal.org/api/drupal/modules%21system%21system.api.php/function/hook_form_alter/7)以编程方式创建条件字段集并向其中添加现有字段。代码如下所示。

```
function MYMODULE_form_alter(&$form, &$form_state, $form_id) {
  if ($form_id == 'FORM_ID_node_form') {
    // programmatically create a conditional fieldset
    $form['MYFIELDSET'] = array( // do NOT name the same as a 'Field group' fieldset or problems will occur
      '#type' => 'fieldset',
      '#title' => t('Conditional fieldset'),
      '#weight' => intval($form['field_PARENT']['#weight'])+1, // put this fieldset right after it's "parent" field
      '#states' => array(
        'visible' => array(
          ':input[name="field_PARENT[und]"]' => array('value' => 'Yes'), // only show if field_PARENT == 'Yes'
        ),  
      ),  
    );

    // add existing fields (created with the Field UI) to the
    // conditional fieldset
    $fields = array('field_MYFIELD1', 'field_MYFIELD2', 'field_MYFIELD3');
    $form = MYMODULE_addToFieldset($form, 'MYFIELDSET', $fields);
  }
}

/**
 * Adds existing fields to the specified fieldset.
 *
 * @param  array   $form Nested array of form elements that comprise the form.
 * @param  string  $fieldset The machine name of the fieldset.
 * @param  array   $fields An array of the machine names of all fields to
 *                   be included in the fieldset.
 * @return array   $form The updated form.
 */
function MYMODULE_addToFieldSet($form, $fieldset, $fields) {
  foreach($fields as $field) {
    $form[$fieldset][$field] = $form[$field]; // copy existing field into fieldset
    unset($form[$field]); // destroy the original field or duplication will occur
  }

  return $form;
} 
```

(2.) 然后我使用[字段组](http://drupal.org/project/field_group)模块来更改内容的显示。我通过转到我的内容类型并使用“管理显示”选项卡创建一个字段组并将我的字段添加到其中来做到这一点。这样，这些字段将在表单和保存的内容上显示为属于同一组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-28T12:15:30.363

或许你可以试着看一下[这个模块](http://drupal.org/project/conditional_fields)的代码来帮助你找到一个想法。

# c++ - 私有继承上的组合

> ID：11042524
> 
> 赞同：0
> 
> 时间：2012-06-14T23:02:51.713
> 
> 标签：c++, composition

> **可能重复：**
> [何时使用 C++ 私有继承而不是组合？](https://stackoverflow.com/questions/6297331/when-to-use-c-private-inheritance-over-composition)

请帮助我解决组合优先于私有继承的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T23:08:09.810

每时每刻。真正的问题是，什么时候私有继承优于组合？仅当需要虚拟功能时。否则，总是倾向于构图。

# c++ - C++中带有模板成员函数的模板类的继承

> ID：11042531
> 
> 赞同：5
> 
> 时间：2012-06-14T23:03:32.713
> 
> 标签：c++, templates, inheritance

**问题：**我收到以下代码的以下错误，有人知道为什么吗？

**问题：** 我正在研究一个类 (ClassB)，它控制来自外部库 ( [libMesh](http://libmesh.sourceforge.net/) ) 的多个类的行为。代码的“...做某事...”部分旨在在这些具有模板函数的外部库类中设置一些变量。

我希望能够从继承类（ClassC）的构造函数中设置其中一些值。但是，如果我这样做，如下面的代码所示，我会得到显示的错误。如果我在构造函数中删除此命令，它就可以正常工作。

我还包括一个更详细的示例，它使用产生相同的错误，但使用[libmesh](http://libmesh.sourceforge.net/)类本身，它说明了我想要做得更好的事情。我不确定我正在尝试做的事情是否有用，我主要想知道为什么这不起作用，因为它似乎应该这样做。

我发现了另一篇类似的帖子，但我似乎无法将它们应用于我的问题。

[模板继承内部类访问问题](https://stackoverflow.com/questions/6013786/template-inheritance-inner-class-access-problem)

感谢您的帮助，安德鲁

错误：

```
XXXXXXX@XXXXX:~/Documents/programs/build$ make test
[100%] Building CXX object CMakeFiles/test.dir/source/test.cpp.o
test.cpp: In constructor ‘ClassC<T>::ClassC()’:
test.cpp:16:29: error: expected primary-expression before ‘int’
test.cpp:16:29: error: expected ‘;’ before ‘int’
make[3]: *** [CMakeFiles/test.dir/source/test.cpp.o] Error 1
make[2]: *** [CMakeFiles/test.dir/all] Error 2
make[1]: *** [CMakeFiles/test.dir/rule] Error 2
make: *** [test] Error 2 
```

简单代码：

```
// A class that sets that sets the value of something 
template <typename Type> class ClassB{
public:
    ClassB(){}
    template<typename TypeValue> void set_value(TypeValue value){
        // ... do something ...
    }
};

// A class that inherits ClassB
template<typename T> class ClassC : public ClassB<T>{
public:
    ClassC(){
        // I want to do this (if I remove this it compiles) 
        ClassB<T>::set_value<int>(1);;
    }
};

// The main function
int main (){
    ClassC<double> c;
    c.set_value<int>(1); // This works
} 
```

问题特定代码：

```
//! \example test_libmesh.cpp

#include <string>
using std::string;

// libMesh includes
#include <libmesh.h>
#include <libmesh_common.h> 
#include <equation_systems.h>
#include <transient_system.h>
#include <explicit_system.h>
#include <parameters.h>
#include <mesh.h>
using namespace libMesh;

// Fundamental behavior that will be used among many classes
template <typename Type> class EqCore{
    public:

        // Class constructor
        EqCore(EquationSystems& sys, string name) : eq_sys(sys){

            // Creates a system that will store the constant(s)
            name_.assign(name);
            eq_sys.add_system<Type>(name_); 

            // I can set stuff from here
            set_constant<double>("test4", 4);
        }

        // A function for storing a constant value
        template<typename ParamType> void set_constant(std::string name, ParamType var){  
            eq_sys.parameters.set<ParamType>(name) = var;
        }

        // A function for retrieving a constant value
        template<typename ParamType> ParamType get_constant(std::string name){  
            ParamType output = eq_sys.parameters.get<ParamType>(name);
            return output;
        }

        // Reference to the controlling equation system
        EquationSystems& eq_sys;    

        // The name of the system holding the constant(s)
        string name_;
};

// A test class derived
template <typename Type> class EqBase : public EqCore<Type>{
    public: 

        // Constructor
        EqBase(EquationSystems& sys, string name) : EqCore<Type>(sys, name){    

            // I want to do this!
            // (remove this and the associated print statement in the main and it works)
            EqCore<Type>::set_constant<double>("test5", 5);
        }   

};  

// Begin main function
int main (int argc, char** argv){

    // Initialize libMesh and create an empty mesh
    LibMeshInit init (argc, argv);
    Mesh mesh;

    // Test w/o any of the above classes
    EquationSystems eq_sys(mesh);
    eq_sys.parameters.set<double>("test1") = 1;
    printf("Test 1: %f\n", eq_sys.parameters.get<double>("test1"));

    // Test EqBase/EqCore functions set/get functions
    EqBase<TransientExplicitSystem> eq(eq_sys, "TestSystem");
    eq.set_constant<double>("test2", 2);
    printf("Test 2: %f\n", eq.get_constant<double>("test2"));

    // Test generic creation but accessed through EqBase
    eq.eq_sys.parameters.set<double>("test3") = 3;
    printf("Test 3: %f\n", eq.eq_sys.parameters.get<double>("test3"));

    // Test the constant created in EqCore constructor from EqBase
    printf("Test 4: %f\n", eq.eq_sys.parameters.get<double>("test4"));

    // Test the constant created in EqBase constructor from EqBase
    printf("Test 5: %f\n", eq.eq_sys.parameters.get<double>("test5"));

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T23:12:12.947

编译器无法确定如何解析这个东西，因为它无法确定 set_value 是模板的名称。如果在解决问题`template`之后添加关键字`::`：

```
ClassC(){
    // I want to do this (if I remove this it compiles) 
    ClassB<T>::template set_value<int>(1);;
} 
```

这个问题的答案非常详细地说明了为什么： [我必须在哪里以及为什么要放置“模板”和“类型名”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

# javascript - Why CSS :active on link doesn't make the current page link highlighted?

> ID：11042535
> 
> 赞同：1
> 
> 时间：2012-06-14T23:04:04.110
> 
> 标签：javascript, jquery, css, menu, navigation

I have the following code below for list into master page

```
<div id="header">
            <ul>
                <li><a href="default.aspx">Home</a></li>
                <li><a href="page1.aspx">Page1</a></li>

            </ul>
        </div>       ​ 
```

with css

```
#header a:hover {
    color: #AA1111;
    border-color: #AA1111;
}

#header a:active {
    color: #AA1111;
    border-color:#AA1111;
} 
```

but the link doesn't highlight with color when page is actived .

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T23:07:41.773

`:active` does not indicate that the link will be highlighted when the current page is active.

`:active` is the state of the link between mouse click and mouse released on the link. Try holding your mouse down on the link to see for yourself.

To set the current page's link in a different style you will need to either give the current page link a different class and target that class in your CSS.

If you're using .NET I recommend using the various CSS menu adapters / list controls that have the option of specifying the current page menu link class.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T23:08:22.147

I think you are confusing the meaning of the pseudo-selector `:active`. That css rule will apply when you click on the link. But if that link brings you to a new page, the anchor is no longer active.

What you need to do is add a class to the anchor depending on what page you are on. So, in default.aspx you need to make sure that you have `<a class="active" href="default.aspx">Home</a>`. Then, you will need to change your css rule to `#header a.active`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T23:23:04.483

The way you may want to setup your page:

```
#header li {}
#header li.active a {color: #AA1111; border-color:#AA1111;} 

<div id="header">
        <ul>
            <li class="active"><a href="default.aspx">Home</a></li>
            <li><a href="page1.aspx">Page1</a></li>

        </ul>
</div> 
```

You will need to set the active class on the `li` based on which page.

Demo: [http://jsfiddle.net/lucuma/HT4U4/](http://jsfiddle.net/lucuma/HT4U4/)

# php - 使用非数字键删除数组的所有元素

> ID：11042536
> 
> 赞同：18
> 
> 时间：2012-06-14T23:04:06.063
> 
> 标签：php, arrays, associative-array

我有一个看起来像这样的数组：

```
Array
(
    [0] => apple
    ["b"] => banana
    [3] => cow
    ["wrench"] => duck
) 
```

我想获取该数组并使用 array_filter 或类似的东西来删除具有非数字键的元素并接收以下数组：

```
Array
(
    [0] => apple
    [3] => cow
) 
```

我正在考虑这个问题，但我想不出办法来做到这一点，因为 array_filter 没有为我的函数提供密钥，并且 array_walk 无法修改数组结构（在 PHP 手册中谈到）。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-14T23:07:00.683

在这种情况下使用[`foreach`](https://php.net/foreach)循环是合适的：

```
foreach ($arr as $key => $value) {
    if (!is_int($key)) {
        unset($arr[$key]);
    }
} 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2013-08-28T14:01:26.817

无需在**一行**（长）**行**中编写循环即可完成：

```
$a = array_intersect_key($a, array_flip(array_filter(array_keys($a), 'is_numeric'))); 
```

> ### 它能做什么：
> 
> *   由于`array_filter`使用值，`array_keys`首先创建一个以键为值的新数组（忽略原始值）。
> *   然后这些由`is_numeric`函数过滤。
> *   然后将结果*翻转*回来，因此键再次成为键。
> *   最后，`array_intersect_key`仅从原始数组中获取在上述结果中具有键的项目（数字键）。

不过不要问我关于性能的问题。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2016-07-19T14:44:06.470

从 PHP 5.6 开始，现在可以以`array_filter`紧凑的形式使用：

```
array_filter($array, function ($k) { return is_numeric($k); }, ARRAY_FILTER_USE_KEY); 
```

[演示。](https://3v4l.org/7KjaV)

这种方法比我的盒子上的循环慢约 20% `for`（1.61s 与 1.31s 的 1M 迭代）。

* * *

从 PHP 7.4 开始，也可以使用短闭包::

```
array_filter($array, fn($k) => is_numeric($k), ARRAY_FILTER_USE_KEY); 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-14T23:07:29.157

这是一个循环：

```
foreach($arr as $key => $value) {
    if($key !== 0 and !intval($key)) {
         unset($arr[$key]);
    }
} 
```

# mysql - 如何用许多随机数填充 MySQL 表？

> ID：11042546
> 
> 赞同：29
> 
> 时间：2012-06-14T23:04:34.523
> 
> 标签：mysql

我要问一个以[非常](https://stackoverflow.com/questions/9505930/populate-mysql-table-with-random-data-in-python)抽象的[术语](https://stackoverflow.com/questions/844527/how-to-populate-a-database-column-with-random-numbers)提出的问题，但（可以理解）没有提供具体答案：

在 MySQL 提示符下，我如何创建和填充一个表 ，`rand_numbers`其中包含一列、`number INT`和 1111 行，其中该`number`列包含 2222 和 5555 之间的随机数？

就像是：

```
CREATE TABLE rand_numbers(number INT);

 #run following line 1111 times
INSERT INTO rand_numbers (number) VALUES (2222 + CEIL( RAND() * 3333)); 
```

有人问过这个问题，但要么[依赖](https://stackoverflow.com/questions/8551755/postgresql-how-to-efficient-populate-table-with-10-millions-rows-with-random-st)于循环的[外部语言，要么](https://stackoverflow.com/questions/9927933/how-to-insert-random-numbers-mysql)[过于笼统](https://stackoverflow.com/questions/3371503/sql-populate-table-with-random-data)。我想知道是否可以从典型的 Linux MySQL 提示符中执行如此简单的操作。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-14T23:13:11.443

要创建表，请使用：

```
CREATE TABLE rand_numbers (
    number INT NOT NULL
) ENGINE = MYISAM; 
```

然后用随机值填充它，您可以定义一个[存储过程](http://www.mysqltutorial.org/mysql-stored-procedure-tutorial.aspx)（支持循环）：

```
DELIMITER $$
CREATE PROCEDURE InsertRand(IN NumRows INT, IN MinVal INT, IN MaxVal INT)
    BEGIN
        DECLARE i INT;
        SET i = 1;
        START TRANSACTION;
        WHILE i <= NumRows DO
            INSERT INTO rand_numbers VALUES (MinVal + CEIL(RAND() * (MaxVal - MinVal)));
            SET i = i + 1;
        END WHILE;
        COMMIT;
    END$$
DELIMITER ;

CALL InsertRand(1111, 2222, 5555); 
```

然后，您可以重用该过程以根据不同的参数插入更多随机值。比如说 600 行，随机值介于 1200 和 8500 之间：

```
CALL InsertRand(600, 1200, 8500); 
```

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2014-04-10T12:52:03.967

在不创建存储过程的情况下，我应用的一种技术是使用表本身来添加列。首先用一个值播种它......

```
INSERT INTO rand_numbers ( number ) VALUES ( rand() * 3333 ); 
```

然后再次插入，从此表中选择每次将行加倍...

```
INSERT INTO rand_numbers ( number ) SELECT number * rand() FROM rand_numbers; 
```

您不需要多次运行第二个查询来获得相当多的随机行。当然，不像使用存储过程那样“整洁”，只是提出了一个替代方案。

[正如mohamed23gharbi](https://stackoverflow.com/users/3382822/mohamed23gharbi)所指出的，如果您的测试质量太大，您可能会遇到重复。如果这是一个问题，您可以使用`INSERT IGNORE`跳过重复项。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2015-05-14T08:09:12.780

该任务也可以通过这种方式完成：

```
-- scale from 0 to MAX

UPDATE `table` SET `column` = 1000 * RAND() WHERE 1;

-- scale from MIN to MAX

UPDATE `table` SET `column` = MIN + (MAX - MIN) * RAND() WHERE 1; 
```

您还可以在表达式中使用数学函数，如 FLOOR()、CEIL() 等。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-11-08T08:37:50.673

我一直用这个-

```
insert into rand_numbers ( number ) select rand() from (
    select 0 as i
    union select 1 union select 2 union select 3
    union select 4 union select 5 union select 6
    union select 7 union select 8 union select 9
) as t1, (
    select 0 as i
    union select 1 union select 2 union select 3
    union select 4 union select 5 union select 6
    union select 7 union select 8 union select 9
) as t2, (
    select 0 as i
    union select 1 union select 2 union select 3
    union select 4 union select 5 union select 6
    union select 7 union select 8 union select 9
) as t3; 
```

插入 1000 个随机数。动态表`t1`, `t2`,`t3`是交叉连接的，所以我们得到 10x10x10 行。

因此，对于一百万行，只需再添加 3 条 `(select 0 as i union select 1 ...) as`语句。这对我来说似乎很方便，因为多次复制粘贴几行并不费力。

希望这可以帮助，

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-04-23T09:14:47.800

如果您很懒惰并且有创建表的查询，请尝试[http://filldb.info/](http://filldb.info//)

# java - 调试集合时modcount变量是什么

> ID：11042552
> 
> 赞同：9
> 
> 时间：2012-06-14T23:05:11.020
> 
> 标签：java, eclipse, collections

在使用 Eclipse 调试 Java 代码时，对于集合变量，我看到了`modcount`成员。这是什么意思？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-06-14T23:15:32.880

Java 的许多集合产生的迭代器是“快速失败的”，这意味着如果在创建迭代器后更改集合，则迭代器将失效并`ConcurrentModificationException`尽快抛出 a。（与稍后失败或返回无效数据相比。）

为了支持此功能，集合必须跟踪它是否已被修改。每次更改集合时，它都会递增`modcount`。当集合产生一个迭代器时，迭代器存储`modcount`它创建时的 from 值。然后，每当您尝试使用迭代器时，它都会检查其保存`modcount`的是否与父集合的 current 不同`modcount`；如果是，则迭代器失败并显示`ConcurrentModificationException`.

（此规则的一个例外是通过迭代器本身（如迭代器的方法）对集合进行的修改`remove`不会使迭代器无效。）

# c++ - wxGrid 在用户编辑单元格后显示旧值而不是新值

> ID：11042553
> 
> 赞同：0
> 
> 时间：2012-06-14T23:05:16.550
> 
> 标签：c++, visual-c++, wxwidgets

我在可编辑模式下创建了 wxGrid。我注册了以下事件处理程序。

```
class ReadWriteGrid : public wxGrid
{
public:
ReadWriteGrid(wxWindow *parent, wxWindowID ID,
            const wxPoint &pos=wxDefaultPosition, const wxSize &size=wxDefaultSize,
            long style=262144, const wxString &name=wxGridNameStr)
            : wxGrid(parent, ID, pos, size, style, name)
{
    SetEditable();
} 
```

};

> EVT_GRID_CELL_CHANGE(IndexTableFrame::OnEditField)

现在，当用户更改单元格值时，我的函数被调用但在它完成之后。单元格值变回其旧值。

```
void IndexTableFrame::OnEditField(wxGridEvent& event)
 {
int RowNumber;
int ColNumber;
wxString type;
wxGridCellEditor *m_Editor;
wxString NewValue;
RowNumber = event.GetRow();
ColNumber = event.GetCol();
m_Editor = m_grid->GetDefaultEditorForCell(RowNumber,ColNumber);
NewValue = m_Editor->GetValue();
m_Editor->Destroy();
m_grid->SetCellValue(NewValue,RowNumber,ColNumber);
event.skip();   
   } 
```

这是我第一次使用 WxWidget。我不确定如何避免单元格变回其旧值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-23T22:01:07.320

在许多应用程序中，必须在用户更改单元格值时对其进行动态处理（例如，根据新的单元格值动态更新其他屏幕控件；或通过串行端口发送数据更改单元格时立即转移到另一台设备）。

如上所述，要求用户单击单独的“保存按钮”并不是在许多用例中用户可以接受的解决方案。

我可以确认原始海报的观察结果：如果您创建一个 wxGrid 并将 wxEVT_GRID_CELL_CHANGED、wxEVT_GRID_CELL_CHANGING 或 wxEVT_GRID_EDITOR_HIDDEN 事件附加到它，则调用 grid->GetCellValue(row,col); 返回旧值。处理函数的事件参数也不包含新文本。它看起来像 wxGrid 的一个“特性”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T21:43:45.943

您应该创建自己的继承自[wxGridTableBase](http://docs.wxwidgets.org/trunk/classwx_grid_table_base.html)的类。

[然后您应该使用它的SetTable](http://docs.wxwidgets.org/trunk/classwx_grid.html#af7ddc545bc6f1c84f63982e3d9bcb5d5)方法将您的网格表对象附加到 wxGrid 。

wxGrid 对象将使用表的方法（GetValue、SetValue）来检索和存储数据。

wxWidgets 附带了一个网格示例，它将帮助您了解 wxGrid 是如何工作的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T14:05:26.520

你太辛苦了！放松，让 wxGrid 承受压力。

最简单的事情就是什么都不做。wxGrid 将接受单元格中的用户编辑并显示更改，而无需您执行任何操作。当用户完成后，他可以单击一个按钮 SAVE，您可以在其中实现代码以从单元格中读取值并将它们用于您需要的任何内容。

# gwt - Anymote 库可以在基于 GWT 的 Google Chrome 扩展中实现吗？

> ID：11042554
> 
> 赞同：1
> 
> 时间：2012-06-14T23:05:37.067
> 
> 标签：gwt, google-chrome-extension, google-tv

我已经为我的 Google Chrome 扩展程序构建了 UI，但我正在尝试弄清楚如何在 GWT Web 应用程序中实现 anymote 库。这甚至有可能实现吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T16:48:38.350

我们将在即将到来的 Google IO 演讲（2012 年 6 月 28 日）中详细讨论这一点。演讲是关于第二个屏幕的控制，其中包括 Chrome 扩展。

[https://developers.google.com/events/io/sessions/gooio2012/1301/](https://developers.google.com/events/io/sessions/gooio2012/1301/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T19:56:05.917

我已经看到它完成了，但不相信来源已经可用。

# asp.net-mvc - 如何在 cshtml 视图中使用 WebGrid？

> ID：11042556
> 
> 赞同：10
> 
> 时间：2012-06-14T23:05:48.993
> 
> 标签：asp.net-mvc, razor, webgrid

我可以在任何控制器中使用[WebGrid ，例如：](http://msdn.microsoft.com/en-us/library/system.web.helpers.webgrid%28v=vs.99%29.aspx)

`var grid = new WebGrid(emailsFetched, columnNames);`

为此，我必须在我的 ASP.NET MVC 项目中添加一个引用`System.Web.Helpers`。

但是当我尝试直接在**视图**中使用这个网络网格时（以避免控制器中的实例化和其他设置）它说：`The type or namespace 'WebGrid' cannot be found`. 好的，我也尝试在这里添加参考：

`@using System.Web.Helpers`但这引发了另一个问题：

`There is no build provider registered for the extension '.cshtml'. You can register one in the <compilation><buildProviders> section in the machine.config or web.config. Make sure is has a BuildProviderAppliesToAttribute attribute which includes the value 'Web' or 'All'.`

这很奇怪......我已经在网上看到了足够多的使用 WebGrid 并且不必在 cshtml 视图中声明任何内容的示例......

你能告诉我如何解决这个问题吗？或者为什么我会遇到这个非常丑陋的问题？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-15T00:02:32.063

最后我能够注意到这一点：

`<assemblies> <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" /> </assemblies>`

必须在 web 配置中添加，在`system.web`部分下，带有`compilation`标签，所以它看起来像：

```
<system.web>
    <compilation debug="true" targetFramework="4.0">
        <assemblies>
            <add assembly="System.Web.Helpers, Version=1.0.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" />
        </assemblies>
    </compilation>
</system.web> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-11-03T10:00:47.930

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-12T23:00:15.397

碰到这个问题。不能真正相信，但我卸载了早期版本并从 Nuget 重新安装了最新版本的 Microsoft ASP.NET MVC4，一切都对我有用。希望这对其他人有帮助。尝试了所有解决方案，但这是唯一有效的方法。[http://forums.asp.net/t/1823940.aspx?MVC4+WebGrid+problem+in+View+Razor+](http://forums.asp.net/t/1823940.aspx?MVC4%20WebGrid%20problem%20in%20View%20Razor%20)

# objective-c - 删除和重新部署应用程序后 iOS CoreData + iCloud 中的错误消息

> ID：11042558
> 
> 赞同：3
> 
> 时间：2012-06-14T23:05:59.200
> 
> 标签：objective-c, core-data, icloud

该应用程序从一开始就放在 iCloud 中，所以我有机会用数据填充它，并查看其他设备上发生的同步。但是，仅在一台设备上删除和重新部署应用程序后，我开始遇到问题。

特别是在启动时，此时需要很多时间：

```
NSLog(@"add coordinator");
if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:options error:&error]) {
    NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
    abort();
}
NSLog(@"finish"); 
```

我可以在控制台中看到“添加协调器”，然后它似乎永远处于暂停状态。相反，通过激活核心数据记录，我可以看到它正在做很多选择和更新。

然后显示每个 transactionNumber 的无限日志错误消息列表：

```
CoreData: Ubiquity: Error importing transaction log: <PFUbiquityTransactionLog: 0x1929e350>
    transactionLogLocation: <PFUbiquityLocation: 0x17bf1c40>: /private/var/mobile/Library/Mobile Documents/6G8M57K6MU~myapp/mobile.63606F7B-D6A9-5937-9160-126AC1315EBF/myAppCloud/3IEWV8FXM6GJ58H5PkyqFsyuoUZ2qIOuJOfon1QIYC4=/035A5A1C-F893-4B67-A784-866A4DE1B3F1.1.cdt
    transactionNumber: 1
, exception: -[__NSCFDictionary setObject:forKey:]: attempt to insert nil key
-[_PFUbiquityRecordsImporter operation:failedWithError:](839): CoreData: Ubiquity:  Import operation encountered an error: Error Domain=NSCocoaErrorDomain Code=134060 "The operation couldn‚Äôt be completed. (Cocoa error 134060.)" UserInfo=0x194c9f40 {exception=-[__NSCFDictionary setObject:forKey:]: attempt to insert nil key} while trying to import the log file at the URL: <PFUbiquityTransactionLog: 0x1929e350>
    transactionLogLocation: <PFUbiquityLocation: 0x17bf1c40>: /private/var/mobile/Library/Mobile Documents/6G8M57K6MU~myapp/mobile.63606F7B-D6A9-5937-9160-126AC1315EBF/myAppCloud/3IEWV8FXM6GJ58H5PkyqFsyuoUZ2qIOuJOfon1QIYC4=/035A5A1C-F893-4B67-A784-866A4DE1B3F1.1.cdt
    transactionNumber: 1 
```

然后正如我所说，“完成”被打印出来，应用程序根本没有任何数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T19:29:44.480

一位 Apple 工程师回复了我在 Apple Dev 论坛上的帖子，称这是一个已知错误，已在即将发布的 iOS 6 中修复。

因此，没有比刮掉设备上的所有数据并重新开始的解决方案。在这一点上，我想我将在没有 iCloud 的情况下使用 CoreData。

# css - 是否有可以重用我自己的自定义 CSS 的网络应用程序线框图工具？

> ID：11042559
> 
> 赞同：0
> 
> 时间：2012-06-14T23:06:07.727
> 
> 标签：css, wireframe

我一直在寻找并且没有找到（我担心它不存在）将使用我们当前的 css 对象的线框应用程序。

我们花了很多时间完善我们的 css 以获得我们想要的外观，现在我希望能够将该 css 用于新的模型，而无需在每次添加东西时创建新对象（就像我们在 photoshop 中必须做的那样）。

在一个完美的世界里，它甚至可以处理页面布局，所以剩下的就是逻辑。

有没有人听说过可以做到这一点的工具？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T23:24:40.790

[http://axure.com](http://axure.com)是一种流行的线框图工具。有办法让它使用自定义 CSS： http: [//enterpriseux.tumblr.com/post/8972215862/an-axure-html-prototype-hack](http://enterpriseux.tumblr.com/post/8972215862/an-axure-html-prototype-hack)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T02:27:38.650

我没有使用它，我不能保证它，但[https://alpha.easel.io/](https://alpha.easel.io/)可能符合要求。它仍处于测试阶段，但看起来非常有趣。

来自他们的主页：“使用精确的 CSS 属性快速实现设计，而不是从模型中猜测。”

# system.reactive - 订阅者在 Rx 中的下一个回调之后如何执行操作？

> ID：11042560
> 
> 赞同：0
> 
> 时间：2012-06-14T23:06:17.703
> 
> 标签：system.reactive, reactive-programming

我希望能够添加这样的扩展方法：

```
IObservable<T> AfterSubscriber(this IObservable<T> observable, Action<T> action) 
```

在哪里：

```
var subj = new Subject<int>();
subj.
    AfterSubscriber(i => Console.WriteLine("Second")).
    Subscribe(i => Console.WriteLine("First"));

subj.OnNext(1); 
```

产生输出：

```
First
Second 
```

关于如何实施上述方法的任何建议？有没有我可以使用的内置方法？（假设：同步/立即订阅）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T00:51:43.207

这个实现怎么样？

```
public static IObservable<T> AfterSubscriber<T>(
    this IObservable<T> @this, Action<T> after)
{
    if (@this == null) throw new ArgumentNullException("@this");
    if (after == null) throw new ArgumentNullException("after");
    return Observable.Create<T>(o =>
    {
        return @this.Subscribe(t =>
        {
            o.OnNext(t);
            try
            {
                after(t);
            }
            catch (Exception exception)
            {
                o.OnError(exception);
            }
        }, o.OnError, o.OnCompleted);
    });
} 
```

# xcode - 使用 CorePlot 更改饼图的边框线样式

> ID：11042562
> 
> 赞同：1
> 
> 时间：2012-06-14T23:06:24.830
> 
> 标签：xcode, core-plot

尝试将值分配给 lineStyle 的 lineColor 和 lineWidth 时，出现错误“分配给只读属性”。我要做的是将饼图的borderLineStyle 属性设置为符合我偏好的lineStyle。

我已经制作了一个属性并合成了它，但我仍然无法设置这些值。

下面是位于设置其他 pieChart 属性的同一位置的代码片段。

```
self.myLineStyle = [CPTLineStyle lineStyle];
self.myLineStyle.lineColor = [CPTColor whiteColor];  //Assignment to readonly property
self.myLineStyle.lineWidth = 1.0;                    //Assignment to readonly property

pieChart.borderLineStyle = self.myLineStyle; 
```

目标是能够调整饼图切片之间的间距并更改其颜色。

我在寻找如何做到这一点时发现了这个链接：[http ://code.google.com/p/core-plot/issues/detail?id=193](http://code.google.com/p/core-plot/issues/detail?id=193)

不幸的是，那里没有太多东西，但可以使用borderLineStyle 属性来完成。

在此先感谢您的帮助，我可能忽略了一些愚蠢的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T23:48:47.813

`CPTLineStyle`是不可变的；改用可变线条样式：

```
CPTMutableLineStyle *myLineStyle = [CPTMutableLineStyle lineStyle];
myLineStyle.lineColor = [CPTColor whiteColor];
myLineStyle.lineWidth = 1.0;

pieChart.borderLineStyle = myLineStyle; 
```

# c - 赋值与增量操作

> ID：11042565
> 
> 赞同：2
> 
> 时间：2012-06-14T23:06:47.453
> 
> 标签：c, performance, variable-assignment, increment

我正在开发一个应用程序，我必须保持数据排序，每个数据单元都有一个序列号，我检查序列号是否比前一个大 1，如果是，我将接收到的计数增加 1 .我的问题是，是否有区别：
1\. 将我收到的计数增加一。
AND
2\. 将最后接收的序列号分配给接收计数。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T23:15:00.337

对我来说，这听起来像是一个经典的过早优化问题。通常增加值意味着“获取原始->更改->存储”，而分配将是“获取其他->存储新”。“其他”可能已经被获取，从而节省了更多的时钟周期。因此分配可能会更快。

**但是**以 1 为增量通常由编译器和 CPU 进行了很好的优化，因此它不需要任何获取或存储。它可以很好地在一个 CPU 命令中完成，因此消除了任何差异，事实上，增加 1 可能在性能方面更好。

使困惑？好的。

重点是，除非您对瓶颈进行基准测试，否则您**不**应该进行这种优化。然后你对选项进行基准测试并选择最好的。

# html - 如何获取 HTML5 日历日期输入以显示弹出窗口？

> ID：11042579
> 
> 赞同：2
> 
> 时间：2012-06-14T23:08:05.460
> 
> 标签：html

我写了以下内容：

```
<html>
<head>
</head>
<body>
<input type="date" />
</body>
</html> 
```

只是一些基本的东西，所以我可以看到它工作。它在页面上呈现了一个文本框，但是当我单击它时，没有弹出日期显示。我在 IE9 和 Chrome 中都试过了。

你还需要做些什么来让它工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T23:11:02.090

目前，根据[CanIUse.com](http://caniuse.com/#feat=input-datetime)的说法，IE9 不支持日期或时间输入类型（对 IE10 的支持未知）。

目前唯一支持日期输入类型的主流浏览器是 Opera 和 Opera Mobile。

现在，每当主要浏览器检测到它们默认使用的未知输入类型时`type="text"`，将类型字段保留为未来用户的日期并没有什么坏处。如果您现在想实现日历功能而不依赖于浏览器支持，最好的办法是研究跨浏览器兼容的 JavaScript 插件。如果您使用 jQuery，可能有十几个或更多的主要插件可供您免费使用。

# ios - 在 iOS 中播放加密的 mp3

> ID：11042583
> 
> 赞同：0
> 
> 时间：2012-06-14T23:08:46.627
> 
> 标签：ios, audio, encryption, mp3, avaudioplayer

我有一个需要在 iOS 中播放的 aes 加密 mp3 文件；出于安全原因，我无法将文件解密到磁盘，并且由于内存限制，我可能无法将其解密到内存。

有没有办法直接播放加密文件，或者将其流式传输到播放器而不将其全部加载到内存中？我真的很茫然，我什至不知道从哪里开始......我正在使用 AVAudioPlayer 播放文件，但我猜它不够灵活，无法满足我的需求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T14:44:43.183

我不知道 AVAudioPlayer 是如何工作的，但解决这个问题的唯一方法是提供播放器可以访问的某种抽象。如果播放器只能访问“文件”对象，那么您很不走运，必须使用另一个播放器。如果播放器可以访问某种类型的输入流（我怀疑它可以），您可以从文件创建一个流（称为“文件流”），并从文件流创建一个解密流。您只需要了解 AES 加密，因为您需要使用已经存在的代码（如 crypto++）来创建解密流。

在伪代码中，它看起来像这样：

```
filestream fs = new filestream( path )
decryptionstream ds = decryptionstream( fs, decryptionkeydata )
AVAudioPlayer.open( ds );
AVAudioPlayer.play() 
```

在内部，AVAudioPlayer 将从解密流中读取数据块，这将从文件流中提取数据，从文件流中提取数据。数据将在解密流中被解密，一次一个块。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-01-31T08:54:52.847

对于音频或图像文件的加密和解密，请使用 RNCryptor 算法--> [https://github.com/RNCryptor/RNCryptor](https://github.com/RNCryptor/RNCryptor)

**加密：**

```
let fileData = try NSData(contentsOf: fileURL, options: NSData.ReadingOptions.mappedIfSafe)
let encryptData = RNCryptor.encrypt(data: fileData as Data, withPassword: "password")
try encryptData.write(to: fileURL, options: Data.WritingOptions.completeFileProtection) 
```

**解密：（**要播放音频，您必须解密第一个音频然后播放）

```
let fileData = try NSData(contentsOfFile: filePath, options:NSData.ReadingOptions.mappedIfSafe)
encryptData = RNCryptor.encrypt(data: fileData as Data, withPassword: password)
try encryptData.write(to: URL.init(fileURLWithPath: filePath), options: Data.WritingOptions.completeFileProtection) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T23:18:19.667

首先，您需要了解[AES 加密是如何工作](http://en.wikipedia.org/wiki/Advanced_Encryption_Standard)的。

你不能在不解密的情况下播放加密文件，因为加密文件只是一些垃圾数据。在解密之前，您无法阅读或播放它。

我不确定您如何加密文件以及如何获取解密密钥，但您的第一步是获取解密过程的对称密钥。

# linux - 列出目录和子目录中的所有 xml 文件

> ID：11042585
> 
> 赞同：2
> 
> 时间：2012-06-14T23:09:05.717
> 
> 标签：linux, bash

我想列出一个目录及其子目录中的所有 .xml 文件。我尝试了 ls -LR 但无法过滤除 .xml 之外的其他文件 ..

我想要类似 ls -LR | grep *.xml 。

谢谢！

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-14T23:10:44.007

您可以使用`find`命令：

```
find . -type f -name '*.xml' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T00:04:07.520

既然你用 bash 标记了这个问题：

```
shopt -s extglob globstar
ls !(exclude.this.dir)/**/*.xml 
```

# caching - 具有嵌入式和分布式缓存/数据网格的数据感知负载平衡

> ID：11042586
> 
> 赞同：0
> 
> 时间：2012-06-14T23:09:07.140
> 
> 标签：caching, memcached, load-balancing, hazelcast, gemfire

对不起，我是负载平衡的初学者。

* * *

在分布式环境中，我们越来越倾向于将处理（map/reduce）发送到数据，以便结果在本地计算然后聚合。

我想做的事情适用于分区/分布式数据，而不是复制。遵循同样的原则，我希望能够在缓存用户数据的服务器上发送用户请求。

* * *

当使用嵌入式缓存或数据网格来获得低响应时间时，当数据集很大时，我们倾向于避免复制并使用分布式/分区缓存。

分区算法通常是基于散列的，并且允许有副本来处理服务器故障。

最后，用户数据通常托管在 3 个服务器（1 个主副本和 2 个副本）上

在本地缓存未命中时，缓存通常能够搜索其他缓存对等点上的条目。这工作正常，但需要网络访问。我想要一个负载平衡策略来避免这种无用的网络调用。

* * *

我想知道的是：是否有可能拥有一个知道缓存分区机制的负载均衡器，以便在我们需要数据时它总是转发到具有本地副本的网络服务器之一？

例如，我有一个请求 www.mywebsite.com/user=387 负载均衡器将检查 387 userId 并知道该用户存储在服务器 1、6 和 12 中。因此他可以轮询其中一个或其他战略。

* * *

如果没有通用解决方案，是否有允许定义自定义路由策略的开源或商业、软件或硬件负载平衡器？

请求中提取多少数据会减慢负载均衡器的速度？与例如循环策略相比，提取 url 参数（例如在我的 user=387 示例中）并遵循一些规则转到正确的网络服务器的成本是多少？

在缓存供应商之上是否有一个抽象库，以便我们可以轻松检索分区数据并将其提供给负载均衡器？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T08:05:08.583

有趣的问题。我认为没有现成的解决方案可以满足您的要求，但是*如果*您的散列标准相对简单并且仅取决于请求（如您的示例中的 URL 参数），那么构建将非常容易。

如果我正在构建它，我会使用 Varnish (http://varnish-cache.org)，但你可以在其他反向代理中做同样的事情。

# php - PHP JSON 返回到 Jquery

> ID：11042588
> 
> 赞同：1
> 
> 时间：2012-06-14T23:09:16.317
> 
> 标签：php, jquery, json

我阅读了很多关于如何处理从 Ajax 函数返回的 JSON 数组的搜索结果，但似乎没有一个适合我的问题。

说明：我有效地在树状结构中搜索数据库，以返回给定元素的*所有*子元素。可能有 1 到数百个结果。所有这些繁重的工作都是在 PHP 中完成的，然后返回一个包含结果的 JSON 数组，但是，我似乎无法弄清楚如何迭代结果，如下所示：

```
{ 
  "Kaz1Kid43343757245": {
    "kaz1KidKid24572649":[],
    "kaz1KidKid24572649Back":[]
  },
  "Kaz1Kid43343757245Back":[]
} 
```

请注意，每个项目都需要作为单独的 ID 返回，但如果我尝试

```
$.each(obj, function(key, val)
{
    //doing stuff with each item
}); 
```

我在键中只得到了两个结果（Kaz1Kid43343757245 和 Kaz1Kid43343757245Back），而 val 什么也没显示。

我究竟做错了什么？

干杯

MVK

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T23:15:04.020

您需要递归到数组中。您的代码只查看第一级，但正如您自己所说：它是一个树结构。所以如果一个元素是一个数组，你需要进去并再次取出你的值，如果这些是数组，你需要......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T23:16:16.573

让我们用适当的缩进重写 Object 字面量：

```
{
  "Kaz1Kid43343757245": {
    "kaz1KidKid24572649": [],
    "kaz1KidKid24572649Back": []
  },
  "Kaz1Kid43343757245Back": []
} 
```

我认为现在很明显为什么循环只迭代两个属性。您将需要重组生成的 JSON。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T00:20:23.750

这是一个递归函数的示例，它将向下循环到它遇到的对象或将键/值添加到一个新的平面对象：

```
function flatten(obj) {
    var result = {};

    function list(node) {
        $.each(node, function(key, val){
            if (jQuery.isPlainObject(val)) {
                list(val);
            } else {
                result[key] = val;
            }
        });
    }

    list(obj);
    return result;
} 
```

[http://jsfiddle.net/userdude/nssvk/](http://jsfiddle.net/userdude/nssvk/)

或者运行第一个调用的更高级的方式：

[http://jsfiddle.net/userdude/nssvk/1/](http://jsfiddle.net/userdude/nssvk/1/)

这使：

```
{
    "Kaz1Kid43343757245Back" : []
    "kaz1KidKid24572649"     : []
    "kaz1KidKid24572649Back" : []
} 
```

问题是，您想如何处理`Kaz1Kid43343757245`示例对象中的“扁平化”键？

# android - Android 的 AlarmManager 困境

> ID：11042589
> 
> 赞同：0
> 
> 时间：2012-06-14T23:09:18.437
> 
> 标签：android, alarmmanager

我想每月设置一个重复的闹钟；但我的应用程序每次启动时都会重置警报。那么以这种方式而不是设置重复警报是不好的做法吗？

（警报设置为一个月中的特定日期。（例如，8 日、16 日、21 日等）。因此，如果过了那一天，它只是对当前月份的总数 +1。）

我还在启动时运行了一项服务来设置任何警报，因此即使它们一个月没有进入应用程序，它也会再次重置。

再说一次，这是最好的方法还是这是不好的做法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T23:20:00.780

> 那么以这种方式而不是设置重复警报是不好的做法吗？

如果它适合你，它可能没问题。

> 我还在启动时运行了一项服务来设置任何警报，因此即使它们一个月没有进入应用程序，它也会再次重置。

这有点奇怪。在启动时获得控制以重新建立警报很好，但您不需要为此提供服务。

# java - 数字附加到类型的变量？

> ID：11042590
> 
> 赞同：1
> 
> 时间：2012-06-14T23:09:20.660
> 
> 标签：java, eclipse

在 Eclipse 中，调试时，我看到变量后面附加了一个数字，例如 com.blah.blah.blah@82963fb

82963fb 是什么意思？是内存地址吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T23:16:28.373

它是对象的“识别哈希码”值的十六进制呈现。它是方法返回的值[`System.identityHashCode(Object)`](http://docs.oracle.com/javase/6/docs/api/java/lang/System.html#identityHashCode%28java.lang.Object%29)。此方法还用于为其类尚未覆盖该`Object.hashcode()`方法的对象提供默认哈希码值。

它不一定是对象的内存地址，但实际上在身份哈希码和对象的>>a<<内存地址之间存在关系。（该值通常基于第一次调用该方法时对象的地址。对象的地址随后可能会改变，但哈希码值不会。）

（整个字符串由默认`Object.toString()`方法生成。前面的部分`@`是对象的完全限定类名。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T08:24:57.570

您看到的是 Object.toString() 方法的输出。其定义为：

```
public String toString() {
    return getClass().getName() + "@" + Integer.toHexString(hashCode());
    } 
```

所以，你看到`@`的是`Integer.toHexString(hashCode())`

# c# - ComboBox 文本更改失败

> ID：11042595
> 
> 赞同：1
> 
> 时间：2012-06-14T23:09:52.697
> 
> 标签：c#, datagrid, combobox, toolstripmenu

我在`ToolStripMenu`item click 上调用以下内容：

```
protected void windowNewMenu_Click(object sender, EventArgs e)
    {
     if (_selectedThings.Contains(((ToolStripMenuItem)sender).Tag))
     {
        selectedItemsPropertyGrid.SelectedObject = ((ToolStripMenuItem)sender).Tag;
        selectedItemsComboBox.SelectedText = (((ToolStripMenuItem)sender).Tag.GetType()).ToString();
     }
    } 
```

但是，应该更改的第二行似乎不会对`ComboBox`. 有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T23:12:33.453

`SelectedText`用于突出显示部分文本，而不是选择列表中的*项目*。为此，您需要`SelectedItem`.

或者你可以只使用：

```
selectedItemsComboBox.Text = ... 
```

# .net - FirstOrDefault()、SingleOrDefault()、Any() 等...哪个最快？

> ID：11042596
> 
> 赞同：4
> 
> 时间：2012-06-14T23:10:00.960
> 
> 标签：.net, linq

关于上述和/或包括其他方法，如果您正在搜索一条记录，并且只有一条记录存在，那么哪一个会执行得最快？例如，我想确保一旦它找到正在查询的值，我正在寻找一个会立即返回它而不搜索剩余记录的值。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-14T23:13:49.543

如果你有这个想法，你可能会解决它。

`FirstOrDefault`枚举集合，直到找到匹配项

`SingleOrDefault`枚举整个集合以确保项目恰好出现一次

这意味着`SingleOrDefault`不能比`FirstOrDefault`. 但它确实有点依赖于查询提供程序的实现

编辑：

Any 都可以更快地实现。考虑一个 SQL 实现：

```
Select Top 1 from myTable //(its not quite this but this implementation but it will be similar) 
```

执行速度将比：

```
Select Top 1 from myTable where <somecondition> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:48:29.237

只有在有 0 个或多个结果的情况下要强制异常时，才应使用 Single（和 SingleOrDefault）。典型的 SQL 实现是

```
Select Top 2 * from table 
```

另一方面，第一个通常会在找到第一个匹配项后短路。在 TSQL 中

```
Select Top 1 * from table 
```

Any 用于指示是否找到至少一个匹配项（以及找到匹配项后是否短路）。在 TSQL 中，这使用 Exists。

在您的情况下，由于您需要结果值，因此发出单独的请求（使用 Any）然后执行 Single 是没有用的。相反，只需使用 FirstOrDefault 然后检查返回结果是否为 null。

```
var foo = table.FirstOrDefault(t => t.bar == val);
if (null != foo)
   ... 
```

从存在的表中选择 1

# objective-c - 在应用程序中禁用 Siri

> ID：11042598
> 
> 赞同：2
> 
> 时间：2012-06-14T23:10:03.930
> 
> 标签：objective-c, siri

有没有办法在应用程序中完全禁用 Siri？我不仅在谈论接近传感器，还谈论长按主页键。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T23:50:01.193

不，无法覆盖主页按钮的功能。一般来说，Apple 不允许您修改超出应用程序范围的内容的行为。

# r - 存储 R 生成的大型结果的理想格式是什么？

> ID：11042603
> 
> 赞同：3
> 
> 时间：2012-06-14T23:10:55.957
> 
> 标签：r, bigdata, mclapply

我通过大量参数组合（20-40k）模拟合理大小的数据集（10-20mb）。每个数据集 x 参数集都被推送`mclapply`，结果是`list`每个项目包含输出数据（作为列表项 1）和用于生成该结果的参数作为列表项 2（其中该列表的每个元素都是一个参数）。

我刚刚浏览了一个 81K 列表（但必须以 30k 块运行它们），结果列表每个大约 700 mb。我已将它们存储为`.rdata`文件，但可能会将它们重新保存为`.Rda`. 但是每个文件都需要永远读入`R`. 这里是否有最佳实践，尤其是对于长期存储？

理想情况下，我会将所有内容都保留在一个列表中，但`mclapply`会抛出一个关于无法序列化向量的错误，并且这么大的工作将永远在集群上花费（分成 3 种方式，每个工作需要 3 小时）。但是有几个结果文件`results1a.rdata`，，，`results2b.rdata`也`results3c.rdata`似乎效率低下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T23:42:24.300

听起来您在那里有几个不同的问题——我建议您在一个单独的问题中询问优化您的列表格式。

但是，关于将 R 数据读/写到磁盘，我不确定在效率方面是否有比 Rda 文件更好的方法。*但是*，我发现压缩级别会对读取/写入这些文件所需的时间产生实际影响，具体取决于计算设置。我通常发现不使用压缩 ( `save(x,file="y.Rda", compress=FALSE)`) 可以获得最佳性能。

作为备用计划，您可以尝试保持压缩状态，但也可以改变压缩级别。

# c++ - 将 lambda 参数类型获取到模板参数包中

> ID：11042605
> 
> 赞同：1
> 
> 时间：2012-06-14T23:11:20.390
> 
> 标签：c++, lambda, c++11, variadic-templates

我一直在寻找答案几个小时，但我没有找到任何东西......所以，这是我的问题：

```
template<typename Signature> struct wrapper; // (1)

template<typename Ret, typename... Args>
struct wrapper<Ret(Args...)> // (2)
{
  function static get(Ret(*fnc)(Args...), Args... args)
  {
    return function(/*some more stuff here that work*/);
  }
} 
```

基本上，这段代码提取函数的返回类型和参数并返回一个通用函数容器。此代码使用简单的功能。但后来我尝试使用 lambdas。如果没有这个包装器（通过手写完整的原型），代码就可以工作，我可以调用 lambda。但是当我将这个包装器与 lambda 函数一起使用时，我得到了一些

> './some-file.cpp:xy:z: 错误：不完整的类型 'wrapper >' 用于嵌套名称说明符'

错误是由 (1) 和 (2) 两点引起的，因为 lambda 无法放入函数指针？我正在寻找一种将 lambda 的参数类型放入模板参数包的方法（返回类型并不重要，我所有的 lambda 都不返回值（所以它是无效的））提前感谢您的帮助:)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-15T05:57:28.543

似乎您只*声明*了`wrapper`结构，实际上并没有*定义*它。

尝试正确定义结构：

```
template<typename Signature> struct wrapper {}; 
```

# uitableview - 如何在 UITableView 中显示标签

> ID：11042611
> 
> 赞同：0
> 
> 时间：2012-06-14T23:12:32.710
> 
> 标签：uitableview, ios5, storyboard

我`UIViewController`在 Xcode 4.2 中创建了一个使用故事板。然后`UITableView`通过将对象拖到视图控制器上来添加一个对象。然后将标签拖到其中一个单元格上，`UITableView`并将标签的文本设为 MyFirstLabel。现在，当我在模拟器中运行它时，我看不到标签。我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T23:22:47.747

添加到单元格时，您必须为 UILabel 创建属性假设您有这样的 UILabel 声明（并连接到您在情节提要上拖动的对象）

`@property(retain, nonatomic) IBOutlet UILabel* yourLabel;` 在你的 .h 文件和

```
@synthesize yourLabel; 
```

在您的 .m 文件中。初始化单元格后（在`cellForRowAtIndexPath`委托方法上）像这样将标签添加到单元格`[cell.contenView addSubview:yourLabel];`我希望这会有所帮助 - 如果没有，请提供有关您的问题的更多详细信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T00:20:14.997

你*应该*看到标签。确保您的表格视图具有**静态单元格**。您可以通过选择表格视图并在检查器中更改它来执行此操作。现在，您可以在情节提要中创建确切数量的部分和行，包括内容。

但是，如果您想更改标签的内容，则必须创建一个`IBOutlet`仍然使用静态单元格的 .

如果你想改变部分和行的数量，你将不得不使用动态单元格。在这种情况下，如果您在情节提要中设置了正确的**单元格标识符**并在表视图数据源方法中引用，您应该会看到标签`cellForRowAtIndexPath`。

**编辑**：
正如已经指出的那样，如果没有嵌入到表视图控制器（它声称整个屏幕）中，则不能使用静态表视图。所以这里是解决方法：

选项 1：您将其制成如上所述的动态单元格，并在您的普通视图控制器中实现数据源协议。然后，您可以在代码中插入标签。

选项 2：与选项 1 一样，但具有子类`UITableViewCell`化功能，您可以在其中使用 xib 设计单元并创建必要的插座。

# java - java键侦听器不适用于多个面板

> ID：11042615
> 
> 赞同：1
> 
> 时间：2012-06-14T23:13:05.410
> 
> 标签：java, swing, jtextarea, keylistener

我有一个带有 1 个用于绘图的面板的 JFrame，并为 JFrame 设置了 KyeListener。除非我添加 JTextArea 或 JTextPane，否则它工作正常。看起来它根本停止响应。我需要一些选项来显示文本并使用 keylistener 进行动画。我不需要输入任何内容，我只希望我的 keylistener 一直工作。我需要比 JLabel 更好的东西，我想要一些格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T23:31:50.457

1.  [KeyListener](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)未指定用于`KeyEvents`从键盘到 Swing GUI 的侦听，

2.  因为 KeyListener 需要 focusable `JComponent`，所以您必须设置`setFocusable()`或以编程方式移动`Focus`

3.  `Focus / Focus SubSystem`是异步的

4.  使用[KeyBindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)而不是使用[Focus / Focus SubSystem](http://docs.oracle.com/javase/tutorial/uiswing/misc/focus.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T23:21:15.353

您是否有理由不将 KeyListener 添加到面板本身？

```
panel.addKeyListener(this); 
```

# dapper - Dapper 多映射问题

> ID：11042618
> 
> 赞同：12
> 
> 时间：2012-06-14T23:13:07.453
> 
> 标签：dapper

继续遇到以下代码块的“使用多映射 API 时，如果您有除 Id 以外的键，请确保设置 splitOn 参数”错误：

```
var accounts = DbConnection.Query<Account, Branch, Application, Account>(
            "select Accounts.*, SplitAccount = '', Branches.*, SplitBranch = '', Applications.*" +
            " from Accounts" +
            "    join Branches" +
            "       on Accounts.BranchId = Branches.BranchId" +
            "    join Applications" +
            "       on Accounts.ApplicationId = Applications.ApplicationId" +
            " where Accounts.AccountId <> 0",
            (account, branch, application) =>
                {
                    account.Branch = branch;
                    account.Application = application;
                    return account;
                }, splitOn : "SplitAccount, SplitBranch"
            ).AsQueryable(); 
```

我将 SplitAccount 和 SplitBranch 用于 splitOn 作为解决方法。

我错过了什么？

谢谢

**编辑：**

我已经清理了我的测试，下面是一个轻量级的类和一个新的查询：

```
public class AccountLight
{
    public int AccountId { get; set; }
    public string AccountNumber { get; set; }
    public BranchLight Branch { get; set; }
    public ApplicationLight Application { get; set; }
}

public class BranchLight
{
    public int BranchId { get; set; }
    public string BranchNumber { get; set; }
}

public class ApplicationLight
{
    public int ApplicationId { get; set; }
    public string ApplicationCode { get; set; }
}

var accounts2 = DbConnection.Query<AccountLight, BranchLight, ApplicationLight, AccountLight>(
    "select Accounts.AccountId, Accounts.AccountNumber," +
    "       Branches.BranchId, Branches.BranchNumber," +
    "       Applications.ApplicationId, Applications.ApplicationCode" +
    " from Accounts" +
    "    inner join Branches" +
    "       on Accounts.BranchId = Branches.BranchId" +
    "    inner join Applications" +
    "       on Accounts.ApplicationId = Applications.ApplicationId" +
    " where Accounts.AccountId <> 0",
    (account, brach, application) =>
    {
        account.Branch = brach;
        account.Application = application;
        return account;
    }, 
    commandType: CommandType.Text,
    splitOn: "AccountId, BranchId"
    ).AsQueryable(); 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-20T22:58:22.240

在调试了 Dapper 的源代码几个小时后，我终于找到了问题所在，这是一个非常有趣的问题。

当提供多个 splitOn 字段时，Dapper 会根据逗号进行拆分，例如 var splits = splitOn.Split(',').ToArray()。然后它遍历所有记录集字段并根据上述数组将它们拆分为对象；相当海峡前进。

现在有趣的部分：当我提供我的 splitOn 字段时，逗号后有一个额外的空格，例如“AccountId，BranchId”，而那个小空格是原因。在 Split() 之后，BranchId 字段包含一个额外的空格，并且无法与记录集中的任何字段匹配。

有两种方法可以解决这个问题：

1.  不要在逗号后使用多余的空格；我个人沉迷其中；SQL 的一个旧习惯。
2.  修改 Dapper 的 GenerateDeserializers 方法并更改： var currentSplit = splits[splitIndex] 为 var currentSplit = splits[splitIndex].Trim()，或类似的东西；这就是我为我的本地副本所做的。

这是代码快照：

```
 private static Func<IDataReader, object>[] GenerateDeserializers(Type[] types, string splitOn, IDataReader reader)
    {
        int current = 0;
        var splits = splitOn.Split(',').ToArray();
        var splitIndex = 0;

        Func<Type, int> nextSplit = type =>
        {
            var currentSplit = splits[splitIndex].Trim();
            if (splits.Length > splitIndex + 1)
            {
                splitIndex++;
            } 
```

更新：

上述修复已合并：[https ://github.com/SamSaffron/dapper-dot-net/commit/399db17e5aa6f1eefaf8fdccff827020be8e6cbb](https://github.com/SamSaffron/dapper-dot-net/commit/399db17e5aa6f1eefaf8fdccff827020be8e6cbb)

# android - 启动 DatePicker 对象时出现“设置月份”错误

> ID：11042626
> 
> 赞同：1
> 
> 时间：2012-06-14T23:13:48.483
> 
> 标签：android, android-widget

启动 DatePicker 对象或 DatePickerDialog 时出现错误：在 mi Eclipse LogCat 调试控制台中显示此消息：

```
06-15 01:02:33.935: E/DatePicker(7667): set months 
```

我已经尝试了一些东西，并且我已经阅读了两天的帖子，对我来说是不可能跳过这个错误的。对于代码，没有任何结果。对于 xml 文件，没有任何结果......我对这个错误感到疯狂。我正在复制 android 开发人员参考代码，错误再次显示。

```
public class GestionAlertas extends Activity
{

    private TextView mDateDisplay;
    private Button mPickDate;
    private int mYear;
    private int mMonth;
    private int mDay;

    static final int DATE_DIALOG_ID = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.gestion_alertas);

        final Calendar c = Calendar.getInstance();
        mYear = c.get(Calendar.YEAR); mMonth = c.get(Calendar.MONTH); mDay = c.get(Calendar.DAY_OF_MONTH);

        mDateDisplay = (TextView) findViewById(R.id.dateDisplay);
        mPickDate = (Button) findViewById(R.id.pickDate);

        mPickDate.setOnClickListener(new View.OnClickListener() { public void onClick(View v) 
        {
            showDialog(DATE_DIALOG_ID);
        }});

        updateDisplay();
    }

    @Override
    protected Dialog onCreateDialog(int id) 
    {
        switch (id) 
        {
            case DATE_DIALOG_ID:
                return new DatePickerDialog(this, mDateSetListener, mYear, mMonth, mDay );
        }
        return null;
    }

    private DatePickerDialog.OnDateSetListener mDateSetListener = new DatePickerDialog.OnDateSetListener() { public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) 
    {
        mYear = year; mMonth = monthOfYear; mDay = dayOfMonth;
        updateDisplay();
    }};

    private void updateDisplay() 
    {
        mDateDisplay.setText( new StringBuilder().append(mMonth + 1).append("-").append(mDay).append("-").append(mYear).append(" ") );
    } 
```

请帮我。

**编辑**

日志猫：

> 06-15 11:14:38.920: D/dalvikvm(25412): GC_EXTERNAL_ALLOC 释放 89K,
> 47% 空闲 2895K/5447K, 外部 1249K/1288K, 暂停 16ms 06-15
> 11:14:38.995: D/InputTransport(25412):输入通道构造：
> name='40a1d3a8 com.hide.hide/com.hide.hide.GestionAlertas (client)',
> ashmemFd=47, receivePipeFd=48, sendPipeFd=49 06-15 11:14:39.075:
> I/ViewRoot( 25412): !@FINISH DRAWING :
> com.hide.hide/com.hide.hide.GestionAlertas 06-15 11:14:39.080:
> I/ViewRoot(25412): !@finishDrawing 完成 :
> com.hide.hide/com .hide.hide.GestionAlertas
> 
> 06-15 11:14:40.800: D/(25412): 1 <--- 日志
> 
> 06-15 11:14:40.920: E/DatePicker(25412): 设置月份 <---------**错误**
> 
> 06-15 11:14:40.930: D/(25412): 2 <--- 日志
> 
> 06-15 11:14:40.965: D/InputTransport(25412): 输入通道
> 构造: name='40a3e268 viernes, 15/jun/2012 (client)',
> ashmemFd=50, receivePipeFd=51, sendPipeFd=52 06-15 11:14:40.985:
> D/dalvikvm(25412): GC_CONCURRENT 释放 97K, 46% 释放 3082K/5639K,
> 外部 3162K/3530K, 暂停 2ms+3ms 06-15 11:14:41.070:
> I/ViewRoot(25412): ! @FINISH DRAWING : viernes, 15/jun/2012 06-15
> 11:14:41.075: I/ViewRoot(25412): !@finishDrawing 完成 :
> viernes, 15/jun/2012

编码：

```
private DatePickerDialog.OnDateSetListener escuchadorFecha = new DatePickerDialog.OnDateSetListener() { public void onDateSet(DatePicker view, int year, int monthOfYear, int dayOfMonth) 
{
    mYear = year; mMonth = monthOfYear; mDay = dayOfMonth;

    edFecha.setText( String.valueOf(mYear) + "/" + String.valueOf(mMonth) + "/" + String.valueOf(mDay)  );
}}; 
```

* * *

```
@Override
protected Dialog onCreateDialog(int id) 
{

    switch( id )
    {
        case DLG_FECHA:
            Log.d("", "1");
            DatePickerDialog r = new DatePickerDialog(this, escuchadorFecha, mYear, mMonth, mDay );
            Log.d("", "2");
            return r; 
    }
    return null;
} 
```

显然，这段代码没有 xml 对象。

# javascript - Dojo：我可以将两个或更多小部件添加到同一个 BorderContainer 区域吗？

> ID：11042631
> 
> 赞同：3
> 
> 时间：2012-06-14T23:14:45.257
> 
> 标签：javascript, html, layout, dojo

请多多包涵，因为我是 dojo、javascript 和一般网络编程的新手。

在我正在处理的网页的一部分中，我有一个 BorderContainer（在 TabContainer 内部，在另一个 BorderContainer 内部，但我认为这与问题无关），我想放一些里面的小部件。

我在 BorderContainer 上使用“标题”设计 - 理想情况下 - 我希望在中心区域有一个 ContentPane，在底部区域有一个 TextBox 和四个按钮（在宽度上并排排列边界容器）。

这可能是一个非常基本的想法，我通常在 BorderContainers 或小部件（甚至在 Web 编程的基本范式中）缺少它，但我无法让 TextBox 和四个按钮并排排列，因为我想。

我是否可以将不同的小部件放在同一区域，而无需仅为该区域创建另一个 BorderContainer（或其他容器或窗格）？如果是这样，我将如何实施？

以下是创建 BorderContainer 及其未来组件的一些片段。

```
 //Main BorderContainer
    this.container = new dijit.layout.BorderContainer({
        title: that.name + "_CTR",
        style: "height: 100%",
        design: "headline"
    }, that.name + "_CTR"); 

    //Blank ContentPane in the center region
    this.msgArea = new dijit.layout.ContentPane({
        content: "",
        region: "center"
    }, that.name + "_MSGS");

    //TextBox to be placed in the "bottom" region
    this.textBox = new dijit.form.TextBox({
        value: "",
        placeHolder: "Type a message to publish",
        region: "bottom"
    }, that.name + "_TB");

    //Example of one of my four buttons also to be placed in the "bottom" region
    this.pubButton = new dijit.form.Button({
        region: "bottom",
        label: "Publish",
        showLabel: true,
        onClick: function () { that.publish(); }
    }, that.name + "_PB");

    //Function that adds children to the main BorderContainer and calls startup()
    this.initialize = function () {
        that.container.addChild(that.msgArea);
        that.container.addChild(that.textBox);
        that.container.addChild(that.pubButton);
        that.container.addChild(that.pubButton2);
        that.container.addChild(that.pubButton3);
        that.container.addChild(that.pubButton4);

        that.container.startup();
    }; 
```

感谢您的时间！

编辑：忘了提到，如果可能的话，我宁愿以编程方式执行此操作

EDIT2：非常感谢下面的克雷格！虽然我没有使用您的确切方法，但使用 dojo.create（尚未转换为 1.7...）帮助我了解了有关 DomNodes 的更多信息（就像我说的，我是网络编程的新手：P），这让我发现不止一个小部件可以取代 ContentPane 的“内容”属性，只需将其设置为每个小部件的 domNode 引用数组！

```
 //Create BorderContainer and Buttons as above

    //Create the ContentPane for the bottom region of the BorderContainer
    this.pane = new dijit.layout.ContentPane({
        content: "",
        region: "bottom"
    }, that.name + "_BTM");

    //Add each widget to the ContentPane's "content" by using a DomNodeList
    //Then add the ContentPane to the BorderContainer
    this.initialize = function () {
        that.pane.set("content", [
            that.textBox.domNode, 
            that.button1.domNode,
            that.button2.domNode,
            that.button3.domNode,
            that.button4.domNode
        ]);

        that.container.addChild(that.pane);

        that.container.startup();
    }; 
```

这种快速而肮脏的方法可能不是最好的标记/布局，在这种情况下，我认为您的方法和/或“innerHTML”的编辑可能会更好，但这是我目前需要的。

再次非常感谢，希望我能够投票/给予声誉....

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T23:56:06.857

是的，您可以将多个小部件放在同一区域中，中心区域除外。请注意，添加的第一个小部件在区域指定的方向上最远。第一个顶部小部件位于顶部。第一个底部小部件位于底部，依此类推。

[http://jsfiddle.net/cswing/ssDXh/](http://jsfiddle.net/cswing/ssDXh/)

查看您的示例，我建议将文本框和按钮放入它自己的内容窗格中，然后将窗格放入边框容器中。边框容器将根据屏幕大小调整区域的大小，您不希望按钮和文本框改变大小。

编辑：

您可以考虑两种技术来完成评论中提出的要求。

1）您可以使用[dom-construct](https://www.google.com/search?sugexp=chrome,mod=18&sourceid=chrome&ie=UTF-8&q=dojo%20domConstruct)手动构建 html，然后使用新创建的 domNode 实例化一个小部件。

```
var b1 = new ContentPane({});
var div1 = domConstruct.create('div', {}, b1.containerNode);
// build more html using domConstruct, like a table etc
var btn = new Button({ label: 'My Action 1'}, 
                 domConstruct.create('div', {}, div1)); 
```

2）您可以创建一个具有 html 标记的模板化小部件，然后该小部件负责实例化文本框和按钮。

```
dojo.declare("MyFormLayout", [dijit._Widget, dijit._Templated], {

    //put better html layout in the template
    templateString: '<div><div dojoAttachPoint="btnNode"></div></div>',

    postCreate: function() {
        this.inherited(arguments);
        this.button = new Button({ label: 'My Action 2'}, this.btnNode);
    }
});

appLayout.addChild(new ContentPane({
    region: "bottom",
    content: new MyFormLayout({})
})); 
```

如果标记简单且严格用于布局，则第一个选项很方便。当有为小部件编码的其他逻辑时，第二个选项效果很好。该代码可以进入自定义小部件。

# performance - 站点速度：Web 开发人员工具栏显示页面需要一段时间

> ID：11042633
> 
> 赞同：0
> 
> 时间：2012-06-14T23:14:52.777
> 
> 标签：performance, codeigniter, smarty, yslow, pagespeed

一直在监视 Chrome 的 Web 开发人员工具栏的网络选项卡，并注意到页面似乎需要一段时间（比如几秒钟左右）才能到达浏览器。该页面没有做任何繁重的工作，例如复杂的 SQL 查询。

其他资产，如 JS、CSS、图像等似乎是合理的。来自同一服务器的未缓存图像有时会比 HTML 更快地返回到浏览器。我正在使用 CodeIgniter + Smarty。

有什么想法可以确定瓶颈吗？更重要的是：**我可以采取哪些一般策略来加快 HTML 加载速度？**我的问题是关于 HTML 的（因为我的其他资源做得很好）。假设创建页面的脚本实际上在合理的时间（微秒）内执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T23:49:01.880

有很多东西可以减少页面加载时间，下面是一些

**1** .将此添加到您的`.htaccess`以启用内容压缩

```
<ifModule mod_gzip.c>
   mod_gzip_on Yes
   mod_gzip_dechunk Yes
   mod_gzip_item_include file \.(html?|txt|css|js|php|pl)$
   mod_gzip_item_include handler ^cgi-script$
   mod_gzip_item_include mime ^text/.*
   mod_gzip_item_include mime ^application/x-javascript.*
   mod_gzip_item_exclude mime ^image/.*
   mod_gzip_item_exclude rspheader ^Content-Encoding:.*gzip.*
 </ifModule> 
```

**2** .将图像组合成 CSS 精灵

**3** .延迟加载JavaScript

**要了解有关优化页面/站点的更多信息，您可以使用** [**此工具**](https://developers.google.com/speed/docs/best-practices/payload#CompressImages)。

就我而言，使用任何模板解析器都会使执行过程变慢一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T23:29:41.443

要获取详细的性能信息和瀑布图，请访问[http://webpagetest.org](http://webpagetest.org)

你怎么知道问题出在你的 HTML 上？

您是否尝试过在没有任何其他资产、没有图像/CSS/JS 的情况下渲染页面？

你的 HTML 有多大？

你能 gzip / 压缩你的 HTML 吗？

从webpagetest 到第一个字节的时间和domReady 的时间是什么时候，即HTML 文档对象模型完成的时间？

# visual-studio - “Visual Studio 版本选择器”究竟是如何选择 Visual Studio 版本的？

> ID：11042636
> 
> 赞同：26
> 
> 时间：2012-06-14T23:15:06.053
> 
> 标签：visual-studio

对于`.sln`或`.csproj`之类的扩展，默认应用程序是*Microsoft Visual Studio 版本选择器*。我安装了两个版本，2010 SP1 和 2012 RC。这个应用程序将如何决定启动哪个 VS？

我会说它是这样工作的：

1.  如果它在给定文件中找到任何提示应该使用哪个版本，那么它会使用它。例如，在`.sln`文件的顶部有这样的内容，因此版本选择器可以决定：

```
Microsoft Visual Studio Solution File, Format Version 12.00
# Visual Studio 2010 
```

2.  如果它没有找到任何提示，它将使用后来安装的任何版本（在我的情况下，我在我的 PC 上已经安装了 2012 之后重新安装了 2010 SP1，现在我认为 VS2010 比 2012 更频繁地打开，但我不是 100% 确定）。

这是我的感觉，但确切的规则是什么？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-10T13:37:18.897

文件头中有一些版本信息。否则，文件资源管理器将无法在 .sln 文件上显示带有数字的不同文档图标：

![VS2008](../Images/5607190eb1f8317e085127040ff55e0c.png) ![VS2010](../Images/f6c90ebca0e33709e2795bf0ce572c97.png) ![VS2012](../Images/7f9e51c8a708f478cc1a3d06c83f025b.png) ![VS2013](../Images/a1bec6faa065ecb8afdd07a7faa5a4b3.png) ![VS2015](../Images/84c098a4f6ba959945f93882bfa63f6e.png) ![VS2017](../Images/d3f9244d3ec5356910faba385460f36e.png) ![VS2019](../Images/2bea43444ba183159bea3fdd00794a7d.png) ![VS2022](../Images/72f99cbe12768aea1014f0630e312e2a.png) ^(代表VS版本2008/2010/2012/2013/2015/2017/2019/2022的.sln文件)

如果您使用记事本或其他不保留 UTF-8 签名的文本编辑器编辑 .sln 文件，图标上的这个数字会消失（参见[Paul Groke 的评论](https://stackoverflow.com/questions/11042636/how-exactly-does-visual-studio-version-selector-chooses-a-vs-version#comment44789916_12352910)）。在这种情况下，版本选择器也无法选择正确的版本，并且您无法从文件资源管理器中打开它。您可以专门从 Visual Studio 中打开它并保存 .sln 文件以修复它。有关此问题的更多信息，请参阅[此](https://stackoverflow.com/a/2829550/109392)内容。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-07-15T00:29:36.863

.sln 文件必须是 UTF-8-BOM 文件，并且必须像这样开始：

```
[blank line]
Microsoft Visual Studio Solution File, Format Version XX.XX[XXX...]
[description] 
```

例如VS 2012 或VS 2017 `[description]`。`# Visual Studio Express 2012 for Windows Desktop``# Visual Studio 15`

第二行区分大小写，但第三行 ( `description`) 不区分大小写。如果缺少，则 Selector 似乎启动了最新的 VS。

该`VisualStudioVersion`条目被忽略。

但是，要显示正确的文件图标，`[description]`必须**准确**且区分大小写。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-27T15:27:51.310

在正确的 Visual Studio 版本中打开您的解决方案。单击以选择解决方案。单击文件 --> 保存 xxx.sln。

[![](../Images/a8a5fa7371c363db5c278b7605a321c9.png)](https://i.stack.imgur.com/QrU9E.png)

# html - IE9 的每一页上都没有打印

> ID：11042637
> 
> 赞同：0
> 
> 时间：2012-06-14T23:15:20.547
> 
> 标签：html, css, printing, html-table

我有一份包含在表格中的报告。我使用`<thead>`带有样式的表头，以`display: table-header-group;`尝试在打印时在每页上打印表头。这在大多数浏览器中都可以正常工作，除了 IE 9。

不幸的是，我无法提供实际代码，因为它是包含专有信息的订单。我尝试了几种文档类型，但在打印到打印机时似乎无法让 IE 9 在每一页上打印表头。有没有人遇到这个问题并知道修复？

**HTML**

```
<table id="pt">
    <thead>
        <tr class="header">
            <td colspan="4">
                <h1>egdfgsdfg</h1>
                <h3>sdfgsdfg</h3>
            </td>
            <td colspan="2" class="align-right">
                <h2>sdfgsdfg</h2>
                sdfgsdfgsdfg
            </td>
        </tr>
        <tr class="contacts">
            <td colspan="3">sdfgsdfg</td>
            <td colspan="3">sdfgsdfgs</td>
        </tr>
        <tr class="header-info">                
            <td>asdfadfasdf</td>
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr class="column-headers">               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
    </thead>
    <tbody>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
    </tbody>
</table> 
```

**CSS：**

```
#pt thead {
    display: table-header-group;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-26T23:51:48.167

尝试通过 IE 的开发工具使用“兼容性”设置，看看它是否有效。如果实际上设置有效，您可能必须使用 META 标记来强制执行该操作。只是想看看它是某个地方的一些 css 还是一个实际的 IE 9 东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T07:16:23.023

尝试将所有`<td>`标签更改`<thead>`为`<th>`标签怎么样？

像这样，看到了吗？

```
<table id="pt" border="1">
    <thead>
        <tr class="header">
            <th colspan="4">
                <h1>egdfgsdfg</h1>
                <h3>sdfgsdfg</h3>
            </th>
            <th colspan="2" class="align-right">
                <h2>sdfgsdfg</h2>
                sdfgsdfgsdfg
            </th>
        </tr>
        <tr class="contacts">
            <th colspan="3">sdfgsdfg</th>
            <th colspan="3">sdfgsdfgs</th>
        </tr>
        <tr class="header-info">                
            <th>asdfadfasdf</th>
            <th>asdfadfasdf</th>               
            <th>asdfadfasdf</th>               
            <th>asdfadfasdf</th>               
            <th>asdfadfasdf</th>               
            <th>asdfadfasdf</th>
        </tr>
        <tr class="column-headers">               
            <th>asdfadfasdf</th>               
            <th>asdfadfasdf</th>               
            <th>asdfadfasdf</th>               
            <th>asdfadfasdf</th>               
            <th>asdfadfasdf</th>               
            <th>asdfadfasdf</th>
        </tr>
    </thead>
    <tbody>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-27T11:20:57.707

尝试自己指定所有 CSS 属性

```
<style type="text/css" media="print,screen" >
th {
    font-family:Arial;
    color:black;
    background-color:lightgrey;
}

thead {
    display:table-header-group;
}

tbody {
    display:table-row-group;
}
tfoot { 
     display: table-footer-group; 
}
</style>

<table border="1" cellpadding="2" cellspacing="0">
    <thead>
        <tr>
            <th>ID</th>
            <th>First Name</th>
            <th>Last Name</th>
        </tr>
    </thead>
    <tbody>
                <tr>
                <td>#i#</td>
                <td>First Name #i#</td>
                <td>Last Name #i#</td>
                </tr>
    </tbody>
</table> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-03T20:03:33.463

正如 Jared Farrish 在他的评论中暗示的那样，问题在于与问题一起发布的标记或样式之外的标记或样式。以下 html 包含发布的标记和样式，但正文行重复了足够多的时间以创建两个打印页面。IE9 使用我测试的所有浏览器模式/文档模式组合在打印预览的两个页面上显示标题。

**浏览器模式/文档模式测试：**

*   Internet Explorer 9/怪癖
*   Internet Explorer 9/Internet Explorer 标准
*   Internet Explorer 9 兼容模式/怪癖
*   Internet Explorer 9 兼容模式/Internet Explorer 标准

**IE9打印预览：**

![IE9打印预览](../Images/642c181a49b434ed699d48f0039d332e.png)

**IE9版本详情：**

![IE9版本详情](../Images/43f99132c46ed4dca923f9e30db59a90.png)

**完整代码：**

```
<html>
<head>
<style>
#pt thead {
    display: table-header-group;
}
</style>
<body>
<table id="pt">
    <thead>
        <tr class="header">
            <td colspan="4">
                <h1>egdfgsdfg</h1>
                <h3>sdfgsdfg</h3>
            </td>
            <td colspan="2" class="align-right">
                <h2>sdfgsdfg</h2>
                sdfgsdfgsdfg
            </td>
        </tr>
        <tr class="contacts">
            <td colspan="3">sdfgsdfg</td>
            <td colspan="3">sdfgsdfgs</td>
        </tr>
        <tr class="header-info">                
            <td>asdfadfasdf</td>
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr class="column-headers">               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
    </thead>
    <tbody>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
        <tr>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>               
            <td>asdfadfasdf</td>
        </tr>
    </tbody>
</table>
</body>
</html> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-29T16:54:31.577

“如果一个表格包含多个带有 'display: table-header-group' 的元素，则只有第一个被呈现为标题；其他的被视为具有 'display: table-row-group'” - W3.org

因此，我希望您在同一页面上没有具有该属性的多个表。

就像凯利建议的那样，检查兼容性是否导致问题是个好主意。在文档的开头部分使用它，看看它是否有帮助：

```
<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
```

# python - 在 Google App Engine 中上传文件。如何获取文件到上传处理程序类

> ID：11042641
> 
> 赞同：1
> 
> 时间：2012-06-14T23:16:04.420
> 
> 标签：python, google-app-engine, file-upload

我在谷歌应用引擎中有一个表单，我想同时上传一张图片和我的所有文本。我是否必须将其分成两个单独的页面和操作？

这是我的上传处理程序：

```
class UploadHandler(blobstore_handlers.BlobstoreUploadHandler):
    def upload(self, reseller_id, imgfile):
        upload_files = imgfile
        blob_info = upload_files[0]
        key = blob_info.key()
        r = Reseller.get_by_id(reseller_id)
        r.blob_key_logo = str(key)
        r.put(); 
```

这是我创建的新经销商对象：

```
class NewReseller(BaseHandler):
    def get(self):
        if self.user:
            self.render("new_reseller.html")
        else:
            self.redirect("/display_resellers")

    def post(self):
        name = self.request.get('name')
        website = self.request.get('website')
        information = self.request.get('information')
        address = self.request.get('address')
        city = self.request.get('city')
        state = self.request.get('state')
        zipcode = self.request.get('zipcode')
        email = self.request.get('email')
        phone = self.request.get('phone')

        r = Reseller( name = name, 
              website = website, 
              information = information, 
              address = address,
              city = city,
              state = state,
              zipcode = zipcode,
              email = email, 
              phone = phone)        
        r.put()

        theresellerid = r.key().id()
        #And then Upload the image
        u = UploadHandler()
        logo_img = u.get_uploads('logo_img')
        u.upload(theid, logo_img)

        self.redirect('/display_resellers') 
```

我认为我的问题是这一行：

```
logo_img = u.get_uploads('logo_img') 
```

它弹出错误消息

```
for key, value in self.request.params.items():
AttributeError: 'NoneType' object has no attribute 'params' 
```

不知何故，我需要这个 NewReseller 类从 BlobstoreUploadHandler 继承 .getuploads 以便我可以这样做：

```
 logo_img = self.get_uploads('logo_img') 
```

或者可能有更好的方法，因为这看起来有点乱。

所以我的问题是如何在一个页面上以一种形式上传文件和数据。我可以用两个单独的页面来做到这一点。一种用于添加经销商，另一种用于添加图像，但这似乎过于复杂。

我试图从这个问题中遵循一些步骤和线索：

[在 Google App Engine 中上传文件](https://stackoverflow.com/questions/81451/upload-files-in-google-app-engine)

******编辑*****下面的工作实现：

```
class EditReseller(BaseHandler, blobstore_handlers.BlobstoreUploadHandler):
    def get(self, reseller_id):
        if self.user:
            reseller = Reseller.get_by_id(int(reseller_id))
            upload_url = blobstore.create_upload_url('/upload')
            image = True
            if reseller.blob_key_logo is None:
                image = False
            self.render('edit_reseller.html', r=reseller, reseller_id=reseller_id, upload_url=upload_url, image=image)

        else:
            self.redirect('/admin')

class UploadHandler(blobstore_handlers.BlobstoreUploadHandler):
    def post(self):
        reseller_id = self.request.get('reseller_id')
        upload_files = self.get_uploads('logo_img')
        if upload_files:
            blob_info = upload_files[0]
            key = blob_info.key()
            r = Reseller.get_by_id(int(reseller_id))
            r.blob_key_logo = str(key)
            r.put();

        name = self.request.get('name')
        website = self.request.get('website')
        information = self.request.get('information')
        address = self.request.get('address')
        city = self.request.get('city')
        state = self.request.get('state')
        zipcode = self.request.get('zipcode')
        email = self.request.get('email')
        phone = self.request.get('phone')

        if name and website and information and email and phone and address and city and state and zipcode:
            r = Reseller.get_by_id(int(reseller_id))
            r.name = name 
            r.website = website
            r.information = information
            r.address = address
            r.city = city
            r.state = state
            r.zipcode = zipcode
            r.email = email
            r.phone = phone
            r.put()

        else:
            error = "Looks like your missing some critical info"
            self.render("edit_reseller.html", name=name, website=website, information=information, address=address, city=city, zipcode=zipcode, email=email, phone=phone, error=error)

        self.redirect("/edit_reseller/" + reseller_id) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T00:12:08.303

你只需要把UploadHandler的逻辑放到Reseller(BaseHandler)里面，让Reseller继承blobstore_handlers.BlobstoreUploadHandler。

对 get_uploads 的调用失败，因为 NewReseller 类没有从 BlobstoreUploadHandler 继承。BlobstoreUploadHandler 类接管了上传操作，因此您无需创建 post 方法，只需在 post ( `name = self.request.get('name')`, `r = Reseller()`,`r.put()`等) 中添加相应的逻辑并将其添加到上传方法中即可。

你不应该手动调用或创建一个新的处理程序实例（除非你知道你在做什么），因为它会丢失使它工作的东西。

官方文档中的[完整应用示例](https://developers.google.com/appengine/docs/python/blobstore/overview#Complete_Sample_App)也可能会有所帮助。

# java - openCSV 解析单个列

> ID：11042644
> 
> 赞同：1
> 
> 时间：2012-06-14T23:16:28.680
> 
> 标签：java, parsing, csv, groovy, opencsv

我使用 tokenize 在 groovy 中编写了一个解析 .csv 文件的脚本，但最终并没有完全满足我的需要，我正在尝试使用 openCSV 库，但我不确定如何解析各个列。到目前为止，这是我的代码：

```
List<String[]> rows = new CSVReader(
    new InputStreamReader(getClass().classLoader.getResourceAsStream(inputFileString)))
        .readAll()

        rows.each { row ->
            row.each { it ->
                println it
            }
        } 
```

这是我的输入数据：

```
1,"unknown","positive","full message","I love it." 
```

所以我想弄清楚的是如何打印所述行中的选择列。还要提前感谢，我正试图了解 groovy/java，我来自 Ruby 背景。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T08:54:06.403

不知道你的意思是*'......如何打印所述行中的选择列'*

但是这个脚本（例如）为每一行打印第 4 列：

```
@Grab( 'net.sf.opencsv:opencsv:2.3' )
import au.com.bytecode.opencsv.CSVReader

// This sets example to a 2 line string
// I'm using it instead of a file, as it makes
// an easier example to follow
def example = '''1,"unknown","positive","full message","I love it."
                |2,"tim","negative","whoop!","It's ok"'''.stripMargin()

List<String[]> rows = new CSVReader( new StringReader( example ) ).readAll()

rows.each {
  // print the 4th column
  println it[ 3 ]
} 
```

打印：

```
full message
whoop! 
```

# java - 使用带有 PHP 的 java 库打印条形码

> ID：11042651
> 
> 赞同：1
> 
> 时间：2012-06-14T23:17:20.823
> 
> 标签：java, php, apache, wamp

我有一个`html`链接到`php`页面的按钮。该`php`页面调用一个`jar`文件，该文件必须在服务器上的条形码打印机（默认和唯一安装的网络打印机）上打印条形码。我在我的`php`.

```
$out = system("java -jar C:\\wamp\\bprint\\bprint.jar ABC1234"); 
```

在`jar`命令行中工作正常（并打印条形码），但它不会在我的 php 页面中打印任何内容。我知道我的页面`jar`中正在调用它，因为我的 jar 中的 a 执行得很好。其他可执行文件也在 system() 中工作`php``System.Out.Println();`

我正在运行`WAMP`并且`Windows XP`正在`Apache`以`Admin`用户身份运行。

我的问题是，打印部分被`PHP`or`Java`或`Apache`. 我应该如何克服它？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T23:21:42.427

[`system`](http://php.net/manual/en/function.system.php)只返回标准输出的**最后一行**。尝试[`exec`](http://www.php.net/manual/en/function.exec.php)与`array &$output`参数一起使用。

```
$out = array();
exec("java -jar C:\\wamp\\bprint\\bprint.jar ABC1234", $out);
var_dump($out); 
```

# google-maps - 谷歌地图无法正确渲染

> ID：11042656
> 
> 赞同：4
> 
> 时间：2012-06-14T23:18:16.920
> 
> 标签：google-maps, backbone.js

我正在玩backbone和gmaps.js，由于某种原因，地图没有正确渲染......

控制器没有正确显示，信息窗口也呈现出奇怪的样子。

我正在使用[gmaps.js 库](https://github.com/HPNeo/gmaps)。我什至不知道如何调试这个东西......

这是我的地图主干视图：

```
App.MapView = Backbone.View.extend({
   el: '.map',
   initialize: function() {
       this.map = new GMaps({
           div: this.el,
           lat: -12.043333,
           lng: -77.028333,   
       });
       App.houseCollection.bind('reset', this.populateMarkers, this);
   },
   populateMarkers: function(collection) {
       _.each(collection.models, function(house) {
            var html = 'hello'
            this.map.addMarker({
                lat: house.attributes.lat,
                lng: house.attributes.lng,
                infoWindow: {
                    content: html,
                }                
            });
       }, this);
   },
}); 
```

谢谢

![在此处输入图像描述](../Images/ffc16fc37b8aad4142899bfde36c146d.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T23:23:57.063

我见过类似屏幕截图的问题，解决方法是将这些行添加到 CSS 中：

```
#map label { width: auto; display:inline; }
#map img { max-width: none; max-height: none; } 
```

（如果需要，用您的地图的 div id 或类名替换 #map） 与骨干网或 gmaps.js 无关，我不认为，可能是您页面的其他一些组件。

# ruby-on-rails - 如何使用 OpenSSL::Cipher 加密 UTF-8 字符串中的数据？

> ID：11042657
> 
> 赞同：24
> 
> 时间：2012-06-14T23:18:18.453
> 
> 标签：ruby-on-rails, ruby, utf-8, openssl, aes

在 Rails 3.0 (Ruby 1.9.2) 应用程序中，我尝试使用以下方式加密一些数据：

```
cipher = OpenSSL::Cipher.new 'aes-256-cbc'
cipher.encrypt
cipher.key = cipher.random_key
cipher.iv = cipher.random_iv

encrypted = cipher.update 'most secret data in the world'
encrypted << cipher.final 
```

这将进入一个 UTF-8 数据库。我的问题是

```
> encrypted.encoding
 => #<Encoding:ASCII-8BIT>

> encrypted.encode 'utf-8'
Encoding::UndefinedConversionError: "\xF7" from ASCII-8BIT to UTF-8 
```

如何获得 UTF-8 加密字符串？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-06-15T03:00:40.007

解决方法是将 ASCII-8BIT 字符串转换为 Base64，然后编码为 UTF-8。

```
cipher = OpenSSL::Cipher.new 'aes-256-cbc'
cipher.encrypt
cipher.key = cipher.random_key
cipher.iv = cipher.random_iv

encrypted = cipher.update 'most secret data in the world'
encrypted << cipher.final

encoded = Base64.encode64(encrypted).encode('utf-8') 
```

一旦持久化并从数据库中检索，

```
decoded = Base64.decode64 encoded.encode('ascii-8bit') 
```

最后解密它。

* * *

PS：如果你好奇：

```
cipher = OpenSSL::Cipher.new 'aes-256-cbc'
cipher.decrypt
cipher.key = random_key
cipher.iv = random_iv

decrypted = cipher.update encoded
decrypted << cipher.final

> decrypted
 => 'most secret data in the world' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T00:25:42.483

我相信你最好的选择是使用`force_encoding`found [here](http://ruby-doc.org/core-1.9.2/String.html#method-i-force_encoding)。

```
> encrypted.encoding
  => #<Encoding:ASCII-8BIT>

> encrypted.force_encoding "utf-8"

> encrypted.encoding
  => #<Encoding:UTF-8> 
```

# asp.net-mvc-3 - ASP.NET MVC DropDownListFor 不从模型中选择值

> ID：11042660
> 
> 赞同：17
> 
> 时间：2012-06-14T23:18:39.480
> 
> 标签：asp.net-mvc-3

我正在使用 ASP.NET MVC 3，只是使用`DropDownListFor`HTML Helper 遇到了一个“问题”。

我在我的控制器中这样做：

```
ViewBag.ShippingTypes = this.SelectListDataRepository.GetShippingTypes(); 
```

和`GetShippingTypes`方法：

```
public SelectList GetShippingTypes()
{
    List<ShippingTypeDto> shippingTypes = this._orderService.GetShippingTypes();

    return new SelectList(shippingTypes, "Id", "Name");
} 
```

我把它放在模型中`ViewBag`而不是模型中的原因（我对每个视图都有强类型模型），是因为我有一个使用 EditorTemplate 呈现的项目集合，它还需要访问 ShippingTypes 选择列表。

否则我需要遍历整个集合，然后分配一个 ShippingTypes 属性。

到现在为止还挺好。

在我看来，我这样做：

```
@Html.DropDownListFor(m => m.RequiredShippingTypeId, ViewBag.ShippingTypes as SelectList) 
```

（`RequiredShippingTypeId`是类型`Int32`）

发生的情况是，下拉列表`RequiredShippingTypeId`中*未选择 的值。*

我遇到了这个：[http ://web.archive.org/web/20090628135923/http://blog.benhartonline.com/post/2008/11/24/ASPNET-MVC-SelectList-selectedValue-Gotcha.aspx](http://web.archive.org/web/20090628135923/http://blog.benhartonline.com/post/2008/11/24/ASPNET-MVC-SelectList-selectedValue-Gotcha.aspx)

他建议，MVC将从`ViewData`“选择列表”从中查找所选值`ViewData`。我不确定情况是否如此，因为博客文章很旧而且他在谈论 MVC 1 beta。

解决此问题的解决方法是：

```
@Html.DropDownListFor(m => m.RequiredShippingTypeId, new SelectList(ViewBag.ShippingTypes as IEnumerable<SelectListItem>, "Value", "Text", Model.RequiredShippingTypeId.ToString())) 
```

最后我试着不`ToString`打开`RequiredShippingTypeId`，这给了我和以前一样的行为：没有选择项目。

我认为这是一个数据类型问题。最终，HTML 助手将字符串（在选择列表中）与`Int32`（来自`RequiredShippingTypeId`）进行比较。

`ViewBag`但是，为什么将 SelectList 放入- 当它在将其添加到模型时完美工作时它不起作用，并在视图中执行此操作：

```
@Html.DropDownListFor(m => m.Product.RequiredShippingTypeId, Model.ShippingTypes) 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-15T06:36:59.577

这不起作用的原因是由于助手的限制：**只有当**这个 lambda 表达式是一个简单的属性访问表达式`DropDownListFor`时，它才能使用作为第一个参数传递的 lambda 表达式来推断选定的值。例如，这不适用于数组索引器访问表达式，这是您的情况，因为编辑器模板。

 **你基本上有（不包括编辑器模板）：

```
@Html.DropDownListFor(
    m => m.ShippingTypes[i].RequiredShippingTypeId, 
    ViewBag.ShippingTypes as IEnumerable<SelectListItem>
) 
```

不支持以下内容：`m => m.ShippingTypes[i].RequiredShippingTypeId`。它仅适用于简单的属性访问表达式，但不适用于索引集合访问。

您找到的解决方法是解决此问题的正确方法，方法是在构建`SelectList`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T01:48:29.450

这可能很愚蠢，但是将其添加到您视图中的变量中是否有任何作用？

```
var shippingTypes = ViewBag.ShippingTypes;

@Html.DropDownListFor(m => m.Product.RequiredShippingTypeId, shippingTypes) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-30T06:07:18.630

@html.DropdownList 有一个重载方法来处理这个问题。有另一种方法可以在 HTML 下拉列表中设置选定的值。

```
@Html.DropDownListFor(m => m.Section[b].State, 
              new SelectList(Model.StatesDropdown, "value", "text", Model.Section[b].State)) 
```

我能够从模型中获得选定的值。

`"value", "text", Model.Section[b].State`本节上面的语法将 selected 属性添加到从 Controller 加载的值中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-10T08:58:10.643

您可以为复杂类型的每个下拉列表字段创建动态视图数据而不是视图袋。希望这会给你提示如何做到这一点

```
 @if (Model.Exchange != null)
                                {
                                    for (int i = 0; i < Model.Exchange.Count; i++)
                                    {
                                        <tr>
                                            @Html.HiddenFor(model => model.Exchange[i].companyExchangeDtlsId)
                                            <td>

                                                @Html.DropDownListFor(model => model.Exchange[i].categoryDetailsId, ViewData["Exchange" + i] as SelectList, " Select category", new { @id = "ddlexchange", @class = "form-control custom-form-control required" })
                                                @Html.ValidationMessageFor(model => model.Exchange[i].categoryDetailsId, "", new { @class = "text-danger" })
                                            </td>
                                            <td>
                                                @Html.TextAreaFor(model => model.Exchange[i].Address, new { @class = "form-control custom-form-control", @style = "margin:5px;display:inline" })

                                                @Html.ValidationMessageFor(model => model.Exchange[i].Address, "", new { @class = "text-danger" })
                                            </td>
                                        </tr>
                                    }

                                }
```

```
 ViewModel CompanyDetail = companyDetailService.GetCompanyDetails(id);
               if (CompanyDetail.Exchange != null)
                for (int i = 0; i < CompanyDetail.Exchange.Count; i++)
                {
                    ViewData["Exchange" + i]= new SelectList(companyDetailService.GetComapnyExchange(), "categoryDetailsId", "LOV", CompanyDetail.Exchange[i].categoryDetailsId);
                }
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-09T13:52:09.403

我只是被这个限制击中并想出了一个简单的解决方法。刚刚定义的扩展方法在内部`SelectList`使用正确的选定项生成。

```
public static class HtmlHelperExtensions
{
    public static MvcHtmlString DropDownListForEx<TModel, TProperty>(
       this HtmlHelper<TModel> htmlHelper,
       Expression<Func<TModel, TProperty>> expression,
       IEnumerable<SelectListItem> selectList,
       object htmlAttributes = null)
    {
        var selectedValue = expression.Compile().Invoke(htmlHelper.ViewData.Model);
        var selectListCopy = new SelectList(selectList.ToList(), nameof(SelectListItem.Value), nameof(SelectListItem.Text), selectedValue);

        return htmlHelper.DropDownListFor(expression, selectListCopy, htmlAttributes);
    }
} 
```

最好的事情是这个扩展可以像原来一样使用`DropDownListFor`：

```
@for(var i = 0; i < Model.Items.Count(); i++)
{
   @Html.DropDownListForEx(x => x.Items[i].CountryId, Model.AllCountries)
} 
```**

# php - 在 PHP 中使用多个名称空间解析 XML

> ID：11042661
> 
> 赞同：0
> 
> 时间：2012-06-14T23:18:39.950
> 
> 标签：php, xml-namespaces

我有以下形式的 XML，我想用 PHP 解析（我无法更改 XML 的格式）。SimpleXML 和 DOM 似乎都不能处理不同的命名空间——谁能给我示例代码？下面的代码没有给出任何结果。

```
 <atom:feed>
        <atom:entry>
            <atom:id />
            <otherns:othervalue />
        </atom:entry>
        <atom:entry>
            <atom:id />
            <otherns:othervalue />
        </atom:entry>
    </atom:feed>

    $doc = new DOMDocument();
    $doc->load($url);
    $entries = $doc->getElementsByTagName("atom:entry");
    foreach($entries as $entry) {
        $id = $entry->getElementsByTagName("atom:id");
        echo $id;
        $othervalue = $entry->getElementsByTagName("otherns:othervalue");
        echo $othervalue;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-16T10:29:43.960

我只想发布这个可怕问题的答案。对不起。

命名空间与 DOM 无关——我只是没有从元素中获取 nodeValue。

```
$doc = new DOMDocument();
$doc->load($url);
$feed = $doc->getElementsByTagName("entry");
foreach($feed as $entry) {
    $id = $entry->getElementsByTagName("id")->item(0)->nodeValue;
    echo $id;
    $id = $entry->getElementsByTagName("othervalue")->item(0)->nodeValue;
    echo $othervalue;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-15T00:38:04.763

您需要注册您的名称空间。否则 simplexml 将忽略它们。我从 PHP 手册中获得的这段代码，并在我自己的项目中使用

```
$xmlsimple = simplexml_load_string('YOUR XML'); 
$namespaces = $xmlsimple->getNamespaces(true);
$extensions = array_keys($namespaces);

foreach ($extensions as  $extension )
{
    $xmlsimple->registerXPathNamespace($extension,$namespaces[$extension]);
} 
```

之后，您在 $xmlsimple 上使用 xpath

# objective-c - 尝试在 Lion 机器上安装 Xcode 3.2.6 但无法正确安装（不是日期问题）

> ID：11042665
> 
> 赞同：1
> 
> 时间：2012-06-14T23:18:49.470
> 
> 标签：objective-c, xcode4, xcode3.2, xcode3to4

所以我有一些在 OSX 10.5.8 上的 Xcode 3.1 中创建的 Objective-c 代码，它不会在 Xcode 4 中运行。我使用了这个方便的小指南[http://hints.macworld.com/article.php?story =20110318050811544](http://hints.macworld.com/article.php?story=20110318050811544)在我的 10.7.4 盒子之一上，它运行良好。（我刚刚从 10.6 升级）。

所以现在我正在尝试做同样的事情，在另一台运行 10.7.3 的机器上安装 3.2、安装 4、链接 SDK 等，并在使用与我在另一台计算机上使用的相同 3.2 mpkg 的 little date hack 之后，安装程序说它成功完成但是当我去查看时，Xcode 没有安装在任何地方，并且上面链接的说明中提到的目录 /Developers/SDKs 甚至不存在（它在另一台计算机上存在）。我尝试将10.5 SDK从10.7.4机器复制到10.7.3机器还是什么都没有，4运行不了，出现这个错误。

> ld：无法直接与架构 i386 的 /Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.6.sdk/usr/lib/libcrypto.0.9.7.dylib 链接 clang：错误: 链接器命令失败，退出代码为 1（使用 -v 查看调用）

也有一点历史，10.7.4 机器上安装了 xcode 3，之前它更新到 lion，所以它已经存在，我不必搞乱任何废话。是不是在 Lion 升级之前安装了它？

那么，我如何让 Xcode 3 在机器上运行，其次有人能识别出这个错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T13:44:54.023

我认为 Xcode 4 确实可以运行，但无法构建您的项目，因为该错误消息来自构建项目最后阶段的链接器。

这是在 Lion 上安装 Xcode 3 的一种更简单的方法：http: [//anatomicwax.tumblr.com/post/8064949186/installing-xcode-3-2-6-on-lion-redux](http://anatomicwax.tumblr.com/post/8064949186/installing-xcode-3-2-6-on-lion-redux)

确保将其安装到名为 Developer 以外的其他文件夹。Xcode 4 可能会不遗余力地找到 /Developer 并将其删除。我将我的命名为 /Xcode3。

# iphone - Cocos2d 和 iPhone：具有多个纹理图集的视差背景给出了许多内存警告

> ID：11042668
> 
> 赞同：0
> 
> 时间：2012-06-14T23:19:02.237
> 
> 标签：iphone, ios, performance, cocos2d-iphone, background-image

我要解决的问题是：

我有 6 条条纹，需要以不同的速度移动。2048*2048 的纹理表是不够的，为了解决这个问题，我将图像分成两部分（上半部分和下半部分），因此每个条纹正好是 960*640 像素。一般的算法是为每个条纹分配一个上半部分和下半部分，并在每一帧移动它们，确保在它们退出用户视图时将它们重新定位在屏幕顶部。我的类实现，直接修改了[本书中的 ShootEmUp 示例中的 ParallaxBackground，在](http://www.apress.com/9781430233039/)使用 Instruments 运行和分析时给出了太多的内存警告。见下文分析：

OpenGL分析： ![OpenGL分析](../Images/8572b72c08e5b5ecdc3cb481f4d69d18.png)

活动监视器： ![活动监视器分析](../Images/6d28ff0157ee0bc400a3ec00f9f4c90f.png)

我担心的是两种分析中的大量内存警告（分别为 24 和 5）。

**编辑：您可以在下面找到解释解决方案的评论**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T23:28:00.810

2048x2048 是新设备纹理的最大可能尺寸。[您可以在Apple OpenGL ES Programming Guide](https://developer.apple.com/library/ios/#documentation/3DDrawing/Conceptual/OpenGLES_ProgrammingGuide/OpenGLESPlatforms/OpenGLESPlatforms.html "这里")中了解它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T13:07:52.183

请记住，Cocos2D 总是保存宽度/高度为 2 的幂的图像。因此，如果您的图像是 960x640 像素，它将像图像是 1024x1024 像素一样使用内存。

还要删除不再需要的纹理（以及调用内存不足时）。

```
[[CCTextureCache sharedTextureCache] removeUnusedTextures]; 
```

您还可以使用质量较低的图像来节省内存。

```
[CCTexture2D setDefaultAlphaPixelFormat:kTexture2DPixelFormat_RGBA4444]; 
```

每当您需要加载更高质量的图像或渐变时，您都可以将其放回原处。

```
[CCTexture2D setDefaultAlphaPixelFormat:kCCTexture2DPixelFormat_RGBA8888]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-18T08:58:27.383

在 LearnCocos2d 对我的问题的评论建议之后，正确的答案解决方案是简单地重新启动设备..（见他上面的评论）。

谢谢！

# java - 根据正文部分添加的顺序，电子邮件中缺少消息

> ID：11042671
> 
> 赞同：0
> 
> 时间：2012-06-14T23:19:28.677
> 
> 标签：java, email, jakarta-mail, attachment, html-email

**我遇到的问题**是，当我在添加附件之前将电子邮件的消息正文部分添加到消息对象时，电子邮件的正文不会显示，但是当我在之后添加消息正文部分时它显示的所有附件都很好。

这很奇怪，但是我正在尝试使用 JavaMail 发送一封电子邮件。它具有电子邮件所需的所有常规内容（地址等）。您将在下面看到的“电子邮件”对象是一个 Javabean，它包含用于附件的 mimeBodyParts 以及用于消息正文、主题等的 mimeBodyPart...

这是不起作用的代码**（**如上所述）

```
Multipart multipart = new MimeMultipart("alternative");
message.setSubject(email.getSubject());
multipart.addBodyPart(email.getContentBodyPart()); //This is the only line that moves
for (MimeBodyPart mimeBodyPart : email.getBodyParts()) {
  multipart.addBodyPart(mimeBodyPart);
}
message.setContent(multipart); 
```

**这是**有效的代码：

```
Multipart multipart = new MimeMultipart("alternative");
message.setSubject(email.getSubject());
for (MimeBodyPart mimeBodyPart : email.getBodyParts()) {
  multipart.addBodyPart(mimeBodyPart);
}
multipart.addBodyPart(email.getContentBodyPart()); //This is the only line that moved
message.setContent(multipart); 
```

如果您需要有关电子邮件 javabean 的更多信息，我会将其提供给您（或者您可以在[此处](https://github.com/kentcdodds/Java-Helper/blob/master/src/com/kentcdodds/javahelper/model/Email.java)找到整个目标代码），但我猜我只是缺少一些简单的东西。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T23:59:48.550

只是为了向其他阅读本文的人澄清：如果您使用“替代”MimeMultipart，它的所有部分都应该是相同内容的替代版本。此外，根据相关 RFC，应最后添加内容的首选版本。在创建带有纯文本回退的 HTML 电子邮件时，您经常这样做。这就是他们在 JavaMail 文档中警告您阅读 RFC 的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T23:42:57.637

如果您正在创建带有附件的消息，为什么要使用多部分/替代方案？您应该使用（默认）多部分/混合。

您是否在不理解的情况下剪切并粘贴了该代码？:-)

# node.js - npm 脚本为预安装运行，但不为预更新运行

> ID：11042672
> 
> 赞同：7
> 
> 时间：2012-06-14T23:19:34.577
> 
> 标签：node.js, npm

我在 packages.json 中为节点应用程序引用了一个脚本。

当我这样做时，脚本运行良好

```
npm install 
```

但不是为了

```
npm update 
```

packages.json 的摘录是

```
"scripts": {
    "start": "node app.js",
    "preinstall": "node scripts/install.js",
    "preupdate": "node scripts/install.js"
} 
```

整个文件位于[https://github.com/Pike/outreach/blob/master/package.json](https://github.com/Pike/outreach/blob/master/package.json)。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-05T18:59:08.410

据我了解，他们已经禁用了 npm 更新（更新前/更新后）的脚本——一些关于最佳实践的东西......

这是一个彻头彻尾的痛苦——他们希望你使用 node-gyp 和 .gyp 文件来构建节点模块——它依赖于 python！不，谢谢！

我仍然在敲键盘——因为我们不能在我们的生产服务器上安装 python。

**更新** Python 在大多数 Linux 发行版上都可用，没什么大不了的

# arrays - Unix中的合并变量

> ID：11042678
> 
> 赞同：0
> 
> 时间：2012-06-14T23:20:36.107
> 
> 标签：arrays, shell, variables

在 UNIX 中：

我有几个变量：

```
FOLDER0=/home/user0
FOLDER1=/home/user1
FOLDER2=/home/user2
FOLDER3=/home/user3
FOLDER=FOLDER

for i in 0 1 2 3
do
${FOLDER}${i} // print /home/user0, /home/user1 and so on based on value of i
done 
```

${i}${FOLDER} 的值应该根据 i 的值打印 /home/user0、/home/user1 等等有什么办法可以实现吗？

**编辑：** 将数字放在变量的末尾而不是开头。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T23:52:40.363

使用`eval`：

```
#!/usr/bin/bash

FOLDER0=/home/user0
FOLDER1=/home/user1
FOLDER2=/home/user2
FOLDER3=/home/user3
FOLDER=FOLDER

for i in {0..3}; do
  eval var=\${FOLDER${i}}
  print $var
done 
```

注意：我的循环是特定于 bash/ksh 的，但`eval`构造不是。

# windows-phone-7 - 在 WP7/Silverlight 中将数据集合绑定到对象（不使用 ListBox！）

> ID：11042680
> 
> 赞同：0
> 
> 时间：2012-06-14T23:20:59.340
> 
> 标签：windows-phone-7

我有一个可观察的对象集合，我想在屏幕上显示，但不是列表框格式。举例来说，假设它们是可观测的行星集合，我想将它们显示在屏幕上，就像它们出现在天空中一样。这是我可以在 Silverlight 绑定中巧妙地完成的事情吗？目前我正在考虑循环遍历我的行星集合并为每个对象创建一个椭圆对象，但如果我可以通过数据绑定来做到这一点，那就太好了。

希望这是有道理的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T02:39:09.917

这是可能的，[Bea Stollnitz 提供了一个很好的例子](http://bea.stollnitz.com/blog/?p=40)，展示了 xaml 和样式的强大功能。这是一篇旧文章（5 年！哇），但仍然值得一读，就像她的其他博客一样

[http://bea.stollnitz.com/blog/?p=40](http://bea.stollnitz.com/blog/?p=40)

# html - 将操作输出与 knitr 集成

> ID：11042681
> 
> 赞同：5
> 
> 时间：2012-06-14T23:21:00.413
> 
> 标签：html, r, knitr, gwidgets

我想知道是否有一种方法可以集成`manipulate`包或`gWidgetsManipulate`包，以便它们的输出可以在 html/markdown 输出文件中查看/操作，因为我认为这在开发可重现的交互式研究报告时非常有用. 我知道 googleVis 有一些功能允许它与 knitr 集成，以便通过使用 results='asis' 之类的选项将输出输入到 html 文件中，但是 googleVis 目前在使用滑块时的功能非常有限。

如果操作或 gWidgetsManipulate 的包输出尚未完全集成，是否可以暂时建议一种解决方法，使其可以在 html 文件中查看？

即在运行 knitr-ing 到 html 之前，我的 Rmd 文件中的当前代码如下所示......但我收到以下错误。

```
```{r}
library(manipulate)
manipulate(plot(1:x), x = slider(5, 10))
``` 
```

带输出

```
library(manipulate)
## Error: there is no package called 'manipulate'
manipulate(plot(1:x), x = slider(5, 10))
## Error: could not find function "manipulate" 
```

所以尝试使用 gWidgetsManipulate 包...

```
```{r}
library(gWidgetsManipulate)
manipulate(plot(1:x), x = slider(5, 10))
``` 
```

你得到错误...

```
library("gWidgetsManipulate")
## Loading required package: gWidgets
manipulate(plot(1:x), x = slider(5, 10))
## Error: unable to find an inherited method for function ".gwindow", for signature "NULL" 
```

我试图通过使用类似的东西来指定一个 guiToolkit 来修复这个错误

```
options(guiToolkit="WWW") 
```

但无济于事...

任何帮助将不胜感激，在此先感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-08T16:48:08.743

如果您不是绝对需要使用 gwidgets，我有一个 Rook 和 googleVis 的解决方案可以满足您的需求：在 html 中显示交互式图表。

滑块的脚本：它包含一个小的 javascript 函数来显示当前选择的值。它还在每次更改时提交表单。您可以在此处轻松更改 min/max/... 值。

```
slider_script <- '
  <input type="range" min="5" max="10" name="plot_max" value="%s" step="1" onchange="document.form1.submit(); showValue(this.value);" />
  <span id="range">%s</span>
  <script type="text/javascript">
  function showValue(newValue)
{
    document.getElementById("range").innerHTML=newValue;
  }
</script>
' 
```

我们构建网页的代码。rook 的结构很典型：html 代码写在 res$write() 中。

```
### this script builds the webpage
    webreport_app <- function(
      ){
      newapp = function(env) {
        req = Rook::Request$new(env)
        res = Rook::Response$new()
        # initialise variables for first execution
        if (is.null(req$POST())){
          plot_max <- 5
        } else{
          plot_max <- as.numeric(req$POST()[["plot_max"]])
        }
        res$write('<body style="font-family:Arial">')
        res$write("<H3>My App</H3>")
        res$write('<form name = "form1" method="POST">\n')
        res$write('<br> Number of dots: \n')
        res$write(sprintf(slider_script, plot_max, plot_max))
        res$write('<br><input type="submit" name="Go!">\n</form>\n')
        if (!is.null(req$POST())) {    
          # generate the plot
          library(googleVis)
          data_for_plot <- data.frame(x_var = 1:plot_max, y_var = 1:plot_max)
          Scatter1 <- gvisScatterChart(data_for_plot)
          # extract chart script
          chart_script <- capture.output(print(Scatter1, 'chart'))
          # write to html
          res$write(paste(chart_script, collapse="\n"))
          res$write("<br><br></body></html>")
        }
        res$finish()
      }
      return(newapp)
    } 
```

最后启动设置并通过 Rook 启动 html 服务器：

```
library(Rook)

# launch the web app
if (exists("report_server")){
  report_server$remove(app, all = TRUE)
  report_server$stop()
  rm(report_server)
}
report_server = Rhttpd$new()
report_server$add(app = webreport_app(), name = "My_app")
report_server$start()
report_server$browse("My_app")
report_server$browse() 
```

# objective-c - Cocoa-Touch：输入验证后如何更改视图？

> ID：11042682
> 
> 赞同：0
> 
> 时间：2012-06-14T23:21:07.170
> 
> 标签：objective-c, ios, xcode, cocoa-touch

我有一个单视图应用程序，它接受用户名和密码并使用服务器对其进行验证。验证凭据后，我希望应用程序转到另一个视图，该视图将显示一些其他数据。

我只知道当我有一个按钮时如何切换视图（也就是说，通过将它拖到辅助视图并选择我想要使用的类型）。但是在验证凭据后如何更改视图？

为了让您更清楚地了解，以下是我的应用程序当前的运行方式：

文本输入到两个字段中。按下“登录”按钮（或键盘上的“完成”按钮）调用验证输入凭据的方法。如果凭据有效，则添加*应*继续进行。否则，它将弹出一条通知，说明凭据无效。

我已完成所有工作并开始工作。我只需要知道在验证给定凭据后如何更改验证方法中的视图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T23:30:17.030

有很多方法可以实现这一点；您选择的技术应该取决于您是否希望验证视图控制器在您继续前进后“停留”。如果你想让它一直存在，你实际上可以用与你的故事板从按钮中分离出来的方式大致相同的方式来做到这一点。

在情节提要中，从第一个（验证）视图控制器按住 ctrl 并拖动到第二个以创建 segue。选择 segue 并使用检查器面板给它一个标识符。然后在验证视图控制器的代码中，您可以执行以下操作：

```
[self performSegueWithIdentifier:@"validCredentialsSegue" sender:self]; 
```

如果您希望原始视图控制器“消失”，则必须查看应用程序流的体系结构。也许您想要一个“高于”凭证的主视图控制器，通过成功登录的委托通知它并决定要做什么（也许它的视图无论如何都是目标视图......）。否则，我认为在过去人们对设置窗口的 rootViewController 属性大惊小怪。不过，我相信有更好的技术。

# haskell - 为索引单子重新绑定 do 表示法

> ID：11042685
> 
> 赞同：22
> 
> 时间：2012-06-14T23:21:33.267
> 
> 标签：haskell

[我正在关注 Conor McBride 的“Kleisli arrows of outrageous fortune”论文，并在此处](https://github.com/Gabriel439/Haskell-IMonad-Library)发布了我对他的代码的实现。简而言之，他定义了以下类型和类：

```
type a :-> b = forall i . a i -> b i

class IFunctor f where imap :: (a :-> b) -> (f a :-> f b)

class (IFunctor m) => IMonad m where
    skip :: a :-> m a
    bind :: (a :-> m b) -> (m a :-> m b)

data (a := i) j where
    V :: a -> (a := i) i 
```

然后他定义了两种类型的绑定，后者`(:=)`用于限制初始索引：

```
-- Conor McBride's "demonic bind"
(?>=) :: (IMonad m) => m a i -> (a :-> m b) -> m b i
(?>=) = flip bind

-- Conor McBride's "angelic bind"   
(>>=) :: (IMonad m) => m (a := j) i -> (a -> m b j) -> m b i
m >>= f = bind (\(V a) -> f a) m 
```

后一个绑定非常适合重新绑定`do`符号以使用带有`RebindableSyntax`扩展名的索引 monad，使用以下相应的定义`return`and `fail`：

```
return :: (IMonad m) => a -> m (a := i) i
return = skip . V

fail :: String -> m a i
fail = error 
```

...但问题是我无法让以前的绑定（即`(?>=)`）工作。我尝试改为定义`(>>=)`并`return`成为：

```
(>>=) :: (IMonad m) => m a i -> (a :-> m b) -> m b i
(>>=) = (?>=)

return :: (IMonad m) => a :-> m a
return = skip 
```

然后我创建了一个保证包含特定索引的数据类型：

```
data Unit a where
    Unit :: Unit () 
```

但是，当我尝试使用 and 的新定义重新绑定符号`do`时，它不起作用，如下例所示：`(>>=)``return`

```
-- Without do notation
test1 = skip Unit >>= \Unit -> skip Unit

-- With do notation
test2 = do
    Unit <- skip Unit
    skip Unit 
```

`test1`类型检查，但`test2`没有，这很奇怪，因为我认为`RebindableSyntax`所做的只是让`do`符号`test2`去糖`test1`，所以如果`test1`类型检查，那为什么不`test2`呢？我得到的错误是：

```
Couldn't match expected type `t0 -> t1'
            with actual type `a0 :-> m0 b0'
Expected type: m0 a0 i0 -> (t0 -> t1) -> m Unit ()
  Actual type: m0 a0 i0 -> (a0 :-> m0 b0) -> m0 b0 i0
In a stmt of a 'do' block: Unit <- skip Unit
In the expression:
  do { Unit <- skip Unit;
       skip Unit } 
```

即使我使用显式`forall`语法而不是`:->`类型运算符，错误仍然存​​在。

现在，我知道使用“恶魔绑定”还有另一个问题，那就是你无法定义`(>>)`，但我仍然想看看我能走多远。任何人都可以解释为什么我不能让 GHC 对“恶魔绑定”进行脱糖，即使它通常会进行类型检查？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-16T00:19:30.863

IIUC，GHC desugarer 实际上在类型检查器（[源代码）](http://hackage.haskell.org/trac/ghc/wiki/Commentary/Compiler/HscMain)*之后*运行。这就解释了为什么你观察到的情况在理论上是可能的。类型检查器可能对 do-notation 有一些特殊的类型规则，这些规则可能与类型检查器对去糖代码的处理方式不一致。

当然，期望它们保持一致是合理的，所以我建议提交 GHC 错误。

# c# - WPF 将列表绑定到 DataGrid

> ID：11042688
> 
> 赞同：0
> 
> 时间：2012-06-14T23:21:54.567
> 
> 标签：c#, wpf, binding, datagrid

这是我第一次使用 WPF 数据网格。据我了解，我应该将网格绑定到我的视图模型中的公共属性。下面是 ViewModel 代码，当我逐步完成调试器时，GridInventory 被设置为包含 2606 条记录的列表，但是这些记录从未显示在数据网格中。我究竟做错了什么？

```
public class ShellViewModel : PropertyChangedBase, IShell
{
    private List<ComputerRecord> _gridInventory;

    public List<ComputerRecord> GridInventory
    {
        get { return _gridInventory; }
        set { _gridInventory = value; }
    }

    public void Select()
    {
        var builder = new SqlConnectionBuilder();
        using (var db = new DataContext(builder.GetConnectionObject(_serverName, _dbName)))
        {
            var record = db.GetTable<ComputerRecord>().OrderBy(r => r.ComputerName);                
            GridInventory = record.ToList();
        }
    }
} 
```

我的 XAML 是

```
<Window x:Class="Viewer.Views.ShellView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="InventoryViewer" Height="647" Width="1032" WindowStartupLocation="CenterScreen">
<Grid>
    <DataGrid x:Name="GridInventory" ItemsSource="{Binding GridInventory}"></DataGrid>
    <Button x:Name="Select" Content="Select" Height="40" Margin="600,530,0,0" Width="100" />
</Grid>
</Window> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T23:39:49.340

我认为您需要在 GridInventory 设置器中调用 raisepropertychanged 事件，以便视图可以得到通知。

```
public List<ComputerRecord> GridInventory
{
    get { return _gridInventory; }
    set 
    { _gridInventory = value; 
      RaisePropertyChanged("GridInventory");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T02:29:49.180

页面的数据上下文未绑定到视图模型的实例。在 InitializeComponent 调用后的代码中，分配数据上下文，例如：

```
InitializeComponent();

DataContext = new ShellViewModel(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T05:51:57.307

我认为您应该在 ViewModel 和 Model 中使用 RaisePropertyChanged，并且还应该在 View 中设置 DataContext。

```
<Window.DataContext>    
    <local:ShellViewModel />    
</Window.DataContext> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-04T18:59:21.773

您可能需要考虑使用绑定 ObservableCollection 到数据网格。然后你不需要维护一个私有成员 _gridInventory 和一个公共属性 GridInventory

```
//viewModel.cs
public ObservableCollection<ComputerRecord> GridInventory {get; private set;}
//view.xaml
<DataGrid ... ItemsSource="{Binding GridInventory}" .../> 
```

# jquery - 跟踪固定 div 从窗口顶部的滚动偏移量

> ID：11042692
> 
> 赞同：2
> 
> 时间：2012-06-14T23:22:14.640
> 
> 标签：jquery

所以我有一个带有固定导航栏的长滚动 1page 网站。

有了这个导航栏，我想跟踪它`.offset().top`，所以我可以根据窗口顶部的偏移量添加或删除类。

[实时代码链接](http://www.designobvio.us/para)

**示例**（这是我的逻辑，但我无法让 jQuery 警报正常工作。

```
$(window).scroll(function () {
  var elem = $('.navigation');
  var topValue = offset.top;
  if (topValue > 400) {
    alert(topValue);
  }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T23:29:35.557

试试[jQuery 航点](http://imakewebthings.com/jquery-waypoints/)。您无需指定偏移量，而是使用页面上的元素在它们出现时触发回调：

```
$(function () {
  $("#map").waypoint(function () {
    alert("Scrolled to #map");
  });
}); 
```

**编辑：**

但是要正确回答您的问题，您的导航将始终处于相同位置，因为`position: fixed`您的元素相对于视口而不是页面定位。如果您想在没有航点的情况下执行此操作，只需检查`body`标签`scrollTop`：

```
$(function () {
  $(window).scroll(function () {
    var offset = $("body").scrollTop();
    if (offset > 400)
      alert("Scrolled to 400");
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T00:30:00.467

您的代码的问题是您正在使用`offset.top`，但您没有`offset`声明变量，这意味着`.top`没有返回任何内容。

您似乎已经查看了[offset()](http://api.jquery.com/offset/)的 jQuery 文档，但没有正确理解/阅读示例。

在文档中，他们正在初始化一个变量：

```
var offset = $(this).offset(); 
```

然后提取`.top`和`.left`值：

```
alert(" coordinates: ( " + offset.left + ", " + offset.top + " ) "); 
```

* * *

从您的链接查看网页，您不需要非常广泛的脚本来检查用户滚动了多少。这个小功能为您提供所需的内容：

请参阅此[工作小提琴](http://jsfiddle.net/zuul/a9G6e/)示例！

```
// getPageScroll() by quirksmode.com
function getPageScroll() {
    var xScroll, yScroll;
    if (self.pageYOffset) {
      yScroll = self.pageYOffset;
      xScroll = self.pageXOffset;
    } else if (document.documentElement && document.documentElement.scrollTop) {
      yScroll = document.documentElement.scrollTop;
      xScroll = document.documentElement.scrollLeft;
    } else if (document.body) {// all other Explorers
      yScroll = document.body.scrollTop;
      xScroll = document.body.scrollLeft;
    }
    return new Array(xScroll,yScroll)
} 
```

可以在[此 stackoverflow 答案](https://stackoverflow.com/a/1567387/352449)中找到有关此的更多信息。

# java - 使用特定语言学习算法的方法

> ID：11042696
> 
> 赞同：8
> 
> 时间：2012-06-14T23:22:47.140
> 
> 标签：java, algorithm

所以暑假我决定还是在开学前开始学习算法。有人告诉我，这门课的节奏相当快，算法不是你应该掉以轻心的东西（我倾向于在学期中的所有课程作业中都这样做，哈哈）。

我们要使用的书是这本[算法（第 4 版）](https://rads.stackoverflow.com/amzn/click/com/032157351X)。无论如何，这是我的问题。

我几乎是通过这本书的第三个方式，但我才意识到我在做什么。例如，我会反复阅读我不太理解的部分。然后，如果我有足够的信心，我会尝试从我的脑海中用 java 重现相同的算法。但是通过这样做，我的代码看起来几乎与书中的代码一模一样……在 java 中。

我不能说我只是在一个接一个地记住代码——我确实理解这些概念，它们帮助我编写这些算法——但我觉得我只能在 java 中实现这些算法。我应该注意，我目前只知道 java。

tldr：我正在学习算法，就好像我在学习弹吉他一样——重复一遍又一遍。但是通过这样做，我觉得我更加专注于我只能在 java 中实现这些。如果您使用的书是特定语言的，您将如何学习算法？

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-14T23:27:02.720

# 不要迷惑​​自己

**您正在学习 Java，所以用 Java 编写它们。**特别是如果 Java 是您的第一语言。现在不要混淆自己，因为您正在尝试一次学习两件事：*如何用 Java 编程*，以及*如何编程*。**你正在学习一种新的语言和一种思维方式。**不要做太多，但现在在酱汁中添加另一种语言。

# 多样化

稍后，或者如果您有足够的信心可以同时学习另一种语言，那么学习另一种语言并尝试在不看书的情况下复制算法显然是有益的。

# 复制和扩展

我们可以向您推荐的是寻找算法的衍生物。已知变体，已记录在案，您可以在其中阅读变体的描述，以便您可以尝试从“基本”版本实现它，而无需阅读本书。

例如，如果您的书向您介绍了一个链表，您应该能够想出一个双向链表或循环链表的算法，而无需阅读对所需结果的描述。或者您明显误解了原始概念的某些内容。

# 先试后读

我建议您甚至**在向您展示之前尝试实现您书中描述的算法**。看到 Sedgewick 算法的重点是看到一个规范的实现，它被认为是一个标准的蓝图。如果您只是阅读了实现的部分（希望首先显示），那么只需坐下来看这本书，并尝试弄清楚如何做到这一点。如果你根本无法做到这一点，那么你的书就太超前了，应该回溯并从头开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T23:31:39.837

关于算法，它们本质上与语言无关。真的没有什么能阻止你用 C、Python 或其他语言编写 Sedgewick 的示例。

如果你真的不知道任何其他语言，请专注于 Java。当然，它有点重复，但这些部分会很好地留在你的脑海中，到了测试时间，你会很高兴得到这些信息。

您现在处于一个有趣的位置，因为编写程序所需的思维方式与正常思维方式非常不同。除此之外，您正在学习一门具有不同语法、标点符号等的全新语言。熟能生巧，因为有很多零碎的东西要记住。

哦，如果您想练习算法，请尝试[project euler](http://projecteuler.net/index.php)、[code kata](http://codekata.pragprog.com/)和其他挑战网站。这些小挑战可以帮助您熟悉语言并熟悉所需的思维类型。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T23:40:34.960

首先，恭喜您迈出了学习编码的第一步。我会说你已经领先于你的同龄人，在夏天开始展望未来。

至于您对只能在 Java 中实现算法的恐惧，您已经证明这对您来说不是问题。听起来您有足够的热情尽早开始，因此您应该可以毫无问题地实施多种语言的解决方案。此外，大多数具有 C/C++（Java 和 C# 仅举几例）类似语法的语言将非常相似，您将能够无缝地翻译您的知识。

我能给的最好的建议是 CODE, CODE, CODE！！不要只阅读实际实现它们的算法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T23:28:06.370

你没有说你对算法背后的数学有多了解。这将是确定您使用代码的设施的关键。

Sedgewick 的书非常好。我也可以随意挑选一些书并查看其他书籍，例如“数值食谱”和“有效的数值方法”。看看另一种观点是否可以为您澄清。

如果你觉得你从复制 Java 中获得了足够的东西，看看你是否可以将它们翻译成另一种语言，也许是 Python 或纯粹的功能替代品。如果你能做到这一点，你就会知道你已经做到了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-14T23:30:29.813

我要么尝试学习另一种语言，以验证您是否可以将其实际移植到另一种语言（javascript 将是我的投票，因为它在前端和后端都很简单且有用），或者用伪代码编写算法，因为这与语言无关. 大多数语言的代码看起来都非常相似。唯一需要非常小心的是，当您依赖于语言的某些方面（例如 java 中的泛型或迭代器）时，您可能无法在另一种语言中使用，这可能会在您的理解上留下空白。

验证您是否真正理解算法的另一种方法是对问题进行轻微更改，并确保您可以调整算法以使其仍然有效。例如，如果它是一种排序算法，那么尝试按几个不同的属性进行排序，而不仅仅是一个，如果它是一种图算法，则使图成为有向图，看看事情应该如何改变。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-15T01:12:56.787

> 我正在学习算法，就好像我在学习弹吉他一样——重复一遍又一遍。

那么你不是在学习算法。你正在学习重复。两种不同的东西。算法书对编程语言的使用是次要因素。它只是一个指导工具，一个实施细节。

你应该关注的是理解算法的结构、逻辑和数学特征（可能还有与之相关的数据结构）。

这就是你应该关注的焦点。

> 但是通过这样做，我觉得我更加专注于我只能在 java 中实现这些。

但那是因为您只关注算法的编码方式（在这种特殊情况下是 Java）。您关注的是实现细节。

当您学习驾驶时，您不会专注于如何学习驾驶本田思域或日产千里马。您将了解驾驶的本质、经验法则、必要的预防措施以及管理车辆驾驶的法律。

与学习算法相同。您不会学习“Java 中的算法”，而不会超过“Haskell 中的算法”。您首先学习算法，车辆（没有非常专业的情况）是次要的。

您应该关注*算法*的作用、*方式*和*原因*。诸如*“它如何/为什么起作用？”之类的问题。*最重要的是*“性能特征是什么？”，这些是您应该关注的事情。

每本优秀的算法书（包括 Sedgewick 的）都带有这一信息。这才是你应该关注的。你如何重新聚焦，这是个人学习策略的一个功能。

> 如果您使用的书是特定语言的，您将如何学习算法？

通过不专注于语言。关注结构，关注所涉及的数据结构，不变量，前置条件和后置条件。理解 Big-O（或 Big-Omicron）、Little-O/Little-Omicron 和 Omega 符号中描述的渐近行为。

您正在学习算法，而不是通过编码算法在 Java 中编程。

如果你做不到这种精神上的飞跃，那说明你没有足够的练习或抽象的分析。这不是侮辱，而是观察和建议。编码，编程语言的使用通常次于计算的数学分析，这是计算机科学的重点（其中算法是其中的一部分。）

**注意**我已经使用 Java 超过 10 年了，虽然我喜欢*在工作*中使用它，但我坚信它对于学习编程或 CS 主题来说是一个糟糕的工具。

最好通过以下两种方式学习算法：A) 像 C 或 Ada 这样的过程式系统级编程语言，或者高级伪汇编程序模拟器，或者 B) 像 Lisp 或 Haskell 这样的函数式语言。

纯/伪纯 OO 语言中的面向对象特性只是阻碍。

算法是具有描述如何（操作上）和/或内容（数学上）的性质的数学结构。前者非常适合过程式编程，后者适合函数式编程。

# dom - Chrome 扩展 - 内容脚本无法按类名查找元素

> ID：11042707
> 
> 赞同：3
> 
> 时间：2012-06-14T23:24:17.837
> 
> 标签：dom, google-chrome-extension, getelementsbyclassname, content-script

我正在尝试使用 Chrome 扩展的内容脚本从页面访问具有特定类名的元素。到目前为止，内容脚本可以使用 document.getElementById() 成功找到具有特定 id 的元素，但使用 document.getElementsByClassName() 或 jQuery 的 $(".className") 不会产生任何结果。为了测试，我使用“标题”作为我的类名，并且我在其上运行扩展的每个网站都导致数组长度为 0。有什么想法我可能会遗漏吗？这是我一直在测试的：

```
manifest.json
=================
{
    "name": "Sample Extension",
    "version": "0.0.1",
    "description": "Sample extension",
    "icons": {"128": "icon.png"},
    "permissions": [
        "tabs", "<all_urls>"
    ],
    "browser_action": {
        "default_icon": "browseraction.png",
        "default_title": "Sample",
        "popup": "popup.html"
    },
    "content_scripts": [
        {
            "matches": [ "<all_urls>" ],
            "js": ["scripts/contentscript.js"],
            "run_at": "document_end"
        }
    ]
}

contentscript.js
===================
var elems = document.getElementsByClassName("header");
alert( elems.length ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T07:08:06.487

您的代码非常基本且直接，它*不会*成为问题的原因。实际上，我只是使用了您的确切代码（使用您提供的“说”类和网站）并且`alert()`每次都说`1`（这是正确的）。

我最好的猜测是您在进行更改后没有重新加载您的扩展程序，`contentscript.js`或者其他一些扩展程序正在干扰并导致这种奇怪的行为。在测试您的扩展程序之前尝试禁用其他扩展程序。

# oracle - 有什么方法可以确定包在 Oracle 中是否有状态？

> ID：11042712
> 
> 赞同：12
> 
> 时间：2012-06-14T23:25:06.353
> 
> 标签：oracle, oracle11g, package, state

Oracle 中有什么方法可以确定一个包是有状态还是无状态？我不知道包含该信息的数据字典中的任何视图。

“ORA-04068：包字符串的现有状态已被丢弃”错误相当烦人。它可以通过从包中删除包变量来消除。11g 引入了一个特性，即包含所有编译时常量的变量的包将被视为无状态。

我可以有两个会话并在一个中编译包并在另一个中调用它并查看它是否引发异常，但这需要调用包中的过程，这可能是不可取的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-15T01:19:37.997

听起来您想要的是能够列出所有可能具有状态的包。

您正在寻找的只是具有任何全局变量或常量的包。对于单个包装，这通过检查非常简单。但是，要查看模式中的所有包，您可以使用 PL/Scope：

首先，以模式所有者身份登录，在会话中打开 PL/Scope：

```
alter session set plscope_settings='IDENTIFIERS:ALL'; 
```

然后，重新编译所有包体。

然后，运行此查询以查找在包级别声明的所有变量和常量：

```
select object_name AS package,
       type,
       name AS variable_name
from user_identifiers
where object_type IN ('PACKAGE','PACKAGE BODY')
and usage = 'DECLARATION'
and type in ('VARIABLE','CONSTANT')
and usage_context_id in (
  select usage_id
  from user_identifiers
  where type = 'PACKAGE'
  ); 
```

我建议生成的软件包列表将成为您的目标。

如果您使用的是 11gR2，则常量不再导致此问题，因此您可以改用以下查询：

```
select object_name AS package,
       type,
       name AS variable_name
from user_identifiers
where object_type IN ('PACKAGE','PACKAGE BODY')
and usage = 'DECLARATION'
and type = 'VARIABLE'
and usage_context_id in (
  select usage_id
  from user_identifiers
  where type = 'PACKAGE'
  ); 
```

# iphone - iPhone - 在 iOS 3.x 上检测单击和长按

> ID：11042714
> 
> 赞同：1
> 
> 时间：2012-06-14T23:25:11.853
> 
> 标签：iphone, ios, cocoa-touch, ipad

这是一个客户项目，他希望它使用 TouchesBegan/Moved/Ended 而不是手势，因为它也必须与 iOS 3.0 和 3.1 兼容，并且手势是 iOS >= 3.2。

我必须检测自定义元素上的单击和长按，该元素是一种带有我们称为单元格的元素的 tableView。

我必须遵守的规则是：

*   单击必须在 0.1 秒后触发一个方法（我们称之为 cellTapped）
*   如果控件在执行 cellTapped 之前滚动，取消 cellTapped 执行
*   如果检测到 Long Tap，则运行 longTap 方法而不是 cellTapped

这就是我在 TouchesBegan 中所拥有的

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{

  self.isScrolling = NO;

  // if single tap detected, fire method within 0.1 seconds
  if ([self elementIsTapped:touches]) {
             [self performSelector:@selector(cellTapped:)
                   withObject:nil
                   afterDelay:0.1];
  }

}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event{

  if (self.isScrolling == NO) {
        // started scrolling, cancel single tap method that was about to be executed 
        [NSObject cancelPreviousPerformRequestsWithTarget:self 
                                                 selector:@selector(cellTapped:)
                                                   object:nil];
        self.isScrolling = YES;
  }
} 
```

如何将长按检测添加到此逻辑？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T23:28:29.163

不使用 UIGestureRecognizers 的长按检测实际上相当简单。你可以遵循这样的模式：

在 touchesBegan 上，将 BOOL 标志`hasLongTouchPassed`设置为 false。然后，使用`[self performSelector:@selector(longPressDetected) withObject:nil afterDelay:1.0f]`. 在`longPressDetected`设置`hasLongTouchPassed`标志为真。然后，在 touchesEnded 上，检测是否`hasLongTouchPassed`为真，如果是，则为长触摸。如果用户在时间过去之前抬起手指，请致电`[NSObject cancelPreviousPerformRequestWithTarget:self]`

或者，您可以`[NSDate date]`在 touchesBegan 上存储一个日期，然后再在 touchesEnded 中存储一个日期，并比较以查看时间间隔是否足够长以被视为长按。

此外，如果您希望事件在用户按下 X 后触发

这假设您没有使用多点触控。如果是，您将必须跟踪哪个手指在哪里以及持续了多长时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T23:38:24.147

我觉得你的逻辑有点倒退。您应该在触摸开始方法中添加一个*长按计时器，而不是点击计时器。*然后，在您的 touches end 方法中，如果该方法尚未触发，您可以取消该方法，并调用您的 tap 方法，或者如果它已经触发，则不执行任何操作。

PS iOS 3.0？哎哟……还不如写翻盖手机。

# iphone - iOS - 将已安装的证书从钥匙串附加到请求

> ID：11042715
> 
> 赞同：2
> 
> 时间：2012-06-14T23:25:15.927
> 
> 标签：iphone, objective-c, ios, ssl, https

我需要连接到需要将证书附加到请求的安全 API。我已经在我的设备（它的钥匙串）上安装了所需的证书，但我在尝试让它工作时遇到了很多麻烦。理想情况下，我想用`ASIHTTPRequest`它来完成这个，因为它有方便的`setClientCertificateIdentity:`方法。但是，我无法将安装的证书转换为所需的文件格式（SecIdentityRef）。

我尝试了 Apple 文档中的代码从钥匙串中提取证书，这似乎不起作用（只是陷入错误）。我什至尝试过，只是为了它，将证书嵌入到应用程序本身中，至少看看我是否可以让它工作，但没有骰子。根据我正在阅读的所有堆栈溢出线程，我将其转换为`NSData`，但是当我尝试使用各种方法`SecIdentityRef`从数据中提取时，它总是失败。

我也尝试过不`ASIHTTPRequest`使用 , 只是为了利用该`didReceiveAuthenticationChallenge`方法，但我在那里也遇到了障碍。话虽如此，我确实成功地让代码通过以下代码找到了我想要的证书：

`- (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge {`

 ````
SecTrustRef trustRef = [[challenge protectionSpace] serverTrust];
SecTrustEvaluate(trustRef, NULL);
CFIndex count = SecTrustGetCertificateCount(trustRef); 

for (CFIndex i = 0; i < count; i++)
{
    SecCertificateRef certRef = SecTrustGetCertificateAtIndex(trustRef, i);
    CFStringRef certSummary = SecCertificateCopySubjectSummary(certRef);
    CFDataRef certData = SecCertificateCopyData(certRef);
    NSLog(@"certSummary: %@", certSummary);
} 
````  `这确实打印了我需要的证书。但在那之后，我猜是把它发回服务器的问题，这似乎不适用于我手头的代码。我仍然没有得到任何回应，也没有返回数据。

因此，总而言之，理想情况下，我希望使用`ASIHTTPRequest`（尽管我知道它不再受支持），并且我需要`SecIdentityRef`格式的证书才能附加到发送请求。看起来很简单，我知道。现在我担心这是否可能？

真的很感激任何明确的方向。提前致谢！

-文森特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T14:36:53.887

回答我自己的问题，或者至少提供更多信息 - 事实证明这可能是不可能的，至少是部分原因。iOS 请求要求您通过身份验证方法“didReceiveAuthenticationChallenge”来发送证书，但是如果您有一个 API 要求将证书附加到请求中，那么绝对没有办法从前面的钥匙串中获取它。 . 至少从我收集到的东西来看。

完成它的唯一方法是预先访问实际的证书，而不是仅仅从钥匙串中提取它。这可以通过将其嵌入应用程序或可能从源下载来完成。从那里，可以格式化证书以附加到请求中。但是，即使将证书嵌入到应用程序中，我仍然没有让这件作品正常工作。从 NSData 到 SecIdentityRef 的转换仍然让我迷失了方向，而且似乎没有代码可以进行这种转换。对此的任何帮助将不胜感激！`

# spring - 在 Spring 中配置 JCache 实现

> ID：11042716
> 
> 赞同：0
> 
> 时间：2012-06-14T23:25:28.560
> 
> 标签：spring, ehcache, jcache

查看 net.sf.cache.JS107 的 Ehcahce 实现，我试图实现以下代码片段以将 JCache 实现生成为 Spring 托管 bean。

```
 Ehcache Ehcache = new net.sf.ehcache.Cache(...);
  net.sf.jsr107cache.Cache cache = new JCache(ehcache);
  manager.addJCache(cache); 
```

这是我的经理豆：

```
 <bean id="cacheManager" class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean">
        <property name="shared" value="true"/>
    </bean> 
```

这是我的 Ehcache bean：

```
<bean id="ehcache" class="org.springframework.cache.ehcache.EhCacheFactoryBean">
        <property name="cacheManager" ref="cacheManager"/>
        <property name="diskPersistent" value="false"/>
</bean> 
```

以下是我创建 JCache bean 的方法：

```
<bean id="jcache" class="net.sf.jsr107cache.Cache">
        <constructor-arg ref="ehcache"/>
</bean> 
```

我想要的是能够在 Spring 中调用以下方法将我的 JCache 应用于 Ehcache 管理器：

```
manager.addJCache(cache); 
```

在春天一定有办法做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T16:28:13.877

不要打扰 XML，只需使用 Java `@Configuration`：

```
@Bean
public Ehcache ehcache() {
    return new net.sf.ehcache.Cache(...);
}

@Bean
public net.sf.jsr107cache.Cache jsrCache() {
    net.sf.jsr107cache.Cache cache = new JCache(ehcache());
    manager.addJCache(cache);
    return cache;
} 
```

# ember.js - 在视图中嵌入视图时上下文丢失

> ID：11042719
> 
> 赞同：0
> 
> 时间：2012-06-14T23:26:01.847
> 
> 标签：ember.js

我正在使用 Ember 0.9.8.1 并且遇到嵌套视图无法正确保留其父级上下文的问题。我正在尝试遵循 Tom Dale 最近关于 0.9.8 中如何改变这种行为的要点，但它对我不起作用：[https ://gist.github.com/2494968](https://gist.github.com/2494968)

这是一个演示的小提琴：http: [//jsfiddle.net/Zngar/1/](http://jsfiddle.net/Zngar/1/)

难道我做错了什么？还是应该将其作为错误提交？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T06:32:50.683

让它在你的情况下工作：http: [//jsfiddle.net/MikeAski/Zngar/3/](http://jsfiddle.net/MikeAski/Zngar/3/)

`number`是包含视图的属性。除非您按照小提琴中的演示明确地这样做，否则它不会被转发。

当您使用插座时，范围转发与控制器一起使用。View 绑定到一个控制器，并且包含的​​视图，当没有任何控制器时，回退到其父级的。

# android - 导入项目后无法访问 res 文件夹

> ID：11042722
> 
> 赞同：0
> 
> 时间：2012-06-14T23:26:39.057
> 
> 标签：android, android-layout, android-resources

通过导入旧项目来加载它。我正在尝试创建一个新布局并希望从可绘制对象中导入图像。由于某种原因，它无法识别我将图片（jpeg）添加到文件夹中的事实。确实刷新了。（R.drawable.yoda）；无法识别 yoda.jpeg

# regex - 搜索带有任何重复字符的单词

> ID：11042730
> 
> 赞同：5
> 
> 时间：2012-06-14T23:27:52.233
> 
> 标签：regex, perl

寻找一个 perl 单行程序，它将找到具有下一个模式的所有单词：

```
X(not_X_chrs)X(not_X_chrs)X    e.g. cyclic 
```

对于一个字符，这很容易，例如对于 'a'

```
perl -nle 'print if /^a[^a]+a[^a]+a$/' < /usr/share/dict/web2 
```

但我想搜索**任何**字符，因此，寻找一个正则表达式来查找**所有**单词，例如：

```
azalea   #repeating a
baobab   #repeating b
cyclic   #c 
```

等等..

试过这个：

```
perl -nle 'print if m/^([a-z])[^$1]+$1[^$1]+$1$/i' </usr/share/dict/web2 
```

但不起作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T23:45:06.160

```
(?:(?!STRING).) 
```

是

```
(?:STRING) 
```

作为

```
[^CHAR] 
```

是

```
CHAR 
```

所以你可以使用

```
/
   ^
   (\pL)
   (?:
      (?:(?!\1).)+
      \1
   ){2}
   \z
/sx 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T23:46:09.617

这是我能想到的最好的正则表达式：

```
^([a-z])((?:(?!\1).)+\1){2}$ 
```

在[RegexPal](http://regexpal.com/)上测试。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T01:14:49.130

您还可以使用带有原子非回溯组的惰性量词：

```
^(\w)(?>\w*?\1){2}$ 
```

仅当可接受 0 个中间字符时才有效。

对于至少 1 个字符，您必须使用负前瞻：

```
^(\w)(?>(?!\1)\w+?\1){2}$ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T07:28:33.147

在[perlretut](http://perldoc.perl.org/perlretut.html#Backreferences)中，它说您可以在正则表达式（不是替换的正确部分）中使用`\g1`. 这在 5.14 中有所改变。因为我这里只有 5.12.2，所以我必须`\1`改用。

因此，您的原始正则表达式稍作调整对我有用：

```
use strict; use warnings;
use 5.12.2;
use feature qw(say);
for (qw/ azalea baobab cyclic deadend teeeeeestest doesnotwork /) {
  say if m/^([a-z])[^\1]+\1[^\1]+\1$/i;
} 
```

用[YAPE::Regex::Explain看它](http://search.cpan.org/~gsullivan/YAPE-Regex-Explain-4.01/Explain.pm)

```
use YAPE::Regex::Explain;
print YAPE::Regex::Explain->new(qr/^([a-z])[^\1]+\1[^\1]+\1$/i)->explain(); 
```

产量：

```
The regular expression:

(?i-msx:^([a-z])[^\1]+\1[^\1]+\1$)

matches as follows:

use YAPE::Regex::Explain;
print YAPE::Regex::Explain->new(qr/^([a-z])[^\1]+\1[^\1]+\1$/i)->explain();

NODE                     EXPLANATION
----------------------------------------------------------------------
(?i-msx:                 group, but do not capture (case-insensitive)
                         (with ^ and $ matching normally) (with . not
                         matching \n) (matching whitespace and #
                         normally):
----------------------------------------------------------------------
  ^                        the beginning of the string
----------------------------------------------------------------------
  (                        group and capture to \1:
----------------------------------------------------------------------
    [a-z]                    any character of: 'a' to 'z'
----------------------------------------------------------------------
  )                        end of \1
----------------------------------------------------------------------
  [^\1]+                   any character except: '\1' (1 or more
                           times (matching the most amount possible))
----------------------------------------------------------------------
  \1                       what was matched by capture \1
----------------------------------------------------------------------
  [^\1]+                   any character except: '\1' (1 or more
                           times (matching the most amount possible))
----------------------------------------------------------------------
  \1                       what was matched by capture \1
----------------------------------------------------------------------
  $                        before an optional \n, and the end of the
                           string
----------------------------------------------------------------------
)                        end of grouping
---------------------------------------------------------------------- 
```

**编辑**：因此，您的单线是`perl -e 'print if m/^([a-z])[^\1]+\1[^\1]+\1$/i'`.

另一方面，如果您尝试过`perl -w -e 'print if m/(as)$1/'`，您会立即看到您的问题：

```
$ perl -w -e 'print if m/(a)$1/' asdf
Use of uninitialized value $1 in regexp compilation at -e line 1.
Use of uninitialized value $_ in pattern match (m//) at -e line 1. 
```

* * *

我没有弄清楚为什么它匹配`ololololo`。

# html - HTML中的容器大小？

> ID：11042731
> 
> 赞同：1
> 
> 时间：2012-06-14T23:27:53.273
> 
> 标签：html, css

**编辑：我通过将 .firstlayer 的位置更改为绝对来解决这个问题。这使得将左/右边距设置为自动无法使容器居中，所以我设置了 left:0; 和权利：0；当我定义一个宽度并将其标记为重要时，它使容器居中。谢谢大家的帮助！**

为了澄清，我试图让 延伸到页面底部。到目前为止，我所有的尝试都没有成功。此外，所有高度属性都在 .firstlayer 中，以实现浏览器兼容性。

可以在[这里](http://imgur.com/a/q2np8#0)找到带注释的屏幕截图：（我现在只是在做布局，所以看起来很傻）。 ![上衣看起来不错](../Images/841a0d7a8c104e9d939af9ef045f8089.png) ![底部没有](../Images/bd293fdb0e6d7890de99328b80fad74b.png)

我有一个非常愚蠢的问题。我正在处理一个网页，我试图让一个`<span>`区域一直延伸到页面底部。我在网上搜索了答案，并确保将正文和 html 高度设置为 100%，将容器高度设置为 auto/min-height 为 100%，但它仍然只达到分页符。

有人对如何解决这个问题有任何建议吗？

我的 CSS 在这里：

```
html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video{
    border:0 none;
    font:inherit;
    margin:0;
    padding:0;
    }

html, body { width:100%; height:100%; }

body { background: #ff8 url("blue.jpg") repeat fixed; font-family: Helvetica, San-Serif; }

    /*----- GRID -----*/
.container {
    background: none;
    overflow: none;
    display: block;
    z-index: 1;
    } 

.firstlayer { 
    background-color: #fff !important;
    height: auto !important; 
    min-height: 100%; 
    height: 100%;
    width: 960px; 
    margin:0 auto;
    border-left: solid 1px #000;  border-right: solid 1px #000;
    }

.padded  {margin-left:20px; margin-right:20px;}

span { height:auto; }
    .onecol { width:8.33%; float:left; }
    .twocols { width:16.66%;  float:left; }
    .threecols { width:25%;  float:left; }
    .fourcols { width:33.33%;  float:left; }
    .fivecols { width:41.66%;  float:left; }
    .sixcols { width:50%;  float:left; }
    .sevencols { width:58.33%;  float:left; }
    .eightcols { width:66.66%;  float:left; }
    .ninecols { width:75%; float:left;  }
    .tencols { width:83.33%;  float:left; }
    .elevencols { width:91.66%;  float:left; }
    .allcols { width:100%;  float:left; }

footer {
    font-size: 0.75em;
    color: #fff;
    background: 100px #000;
    padding:10px 20px 10px 20px;
    bottom: 0px; 
    height:7em;  
    } 
```

* * *

我的 HTML 代码在这里：

```
 <!--Begin the content area-->

    <span class="container firstlayer">
        <span class="container  padded">

<!--TITLE AND SUBTITLE-->
            <span class="container allcols">
                <h1>Stand-in Title</h1>
                <h1 class="subtitle">Stand-in Subtitle</h1>
            </span>

<!--MEDIA PLACEHOLDER-->
            <span style="height:400px; background-color:#000;" class="container allcols">
            </span>

<!--ROW ZERO: 2 COLS-->
            <span class="allcols" style="padding-top:1em;"> 
                <span class="container sixcols">
                    <h2>Subtitle</h2>
                    <p> Lorem ipsum </p>
                </span>
                <span class="container sixcols">
                    <h2>Subtitle</h2>
                    <p> Lorem ipsum </p>
                </span>
            </span>  

        </span>
    </span> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T23:46:04.440

给你。尽量不要使用`<span>`标签，而是将其更改为`<div>`标签。它们更健壮，有时它们无缘无故地不起作用......而且你也设置了太多的高度变量。基本上当你有： height: auto !important; 最小高度：100%；高度：100%；他们都互相矛盾。越简单通常越好，你有点想多了:)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>

<style type="text/css">
html, body, div, div, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video{
    border:0 none;
    font:inherit;
    margin:0;
    padding:0;
    }

html, body { width:100%; height:100%; }

body { background: #ff8 url("blue.jpg") repeat fixed; font-family: Helvetica, San-Serif; }

    ...

    /*----- GRID -----*/
.container {
    background: none;
    overflow: none;
    display: block;
    z-index: 1;
    } 

.firstlayer { 
    background-color: #fff !important;
    min-height: 100%;
    max-height:100%;
    width: 960px; 
    margin:0 auto;
    border-left: solid 1px #000;  border-right: solid 1px #000;
    }

.padded  {margin-left:20px; margin-right:20px;}

div { height:auto; }
    .onecol { width:8.33%; float:left; }
    .twocols { width:16.66%;  float:left; }
    .threecols { width:25%;  float:left; }
    .fourcols { width:33.33%;  float:left; }
    .fivecols { width:41.66%;  float:left; }
    .sixcols { width:50%;  float:left; }
    .sevencols { width:58.33%;  float:left; }
    .eightcols { width:66.66%;  float:left; }
    .ninecols { width:75%; float:left;  }
    .tencols { width:83.33%;  float:left; }
    .elevencols { width:91.66%;  float:left; }
    .allcols { width:100%;  float:left; }

footer {
    font-size: 0.75em;
    color: #fff;
    background: 100px #000;
    padding:10px 20px 10px 20px;
    bottom: 0px; 
    height:7em;  
    }
</style>

</head>

<body>

 <div class="container firstlayer">
        <div class="container  padded">

<!--TITLE AND SUBTITLE-->
            <div class="container allcols">
                <h1>Stand-in Title</h1>
                <h1 class="subtitle">Stand-in Subtitle</h1>
            </div>

<!--MEDIA PLACEHOLDER-->
            <div style="height:400px; background-color:#000;" class="container allcols">
            </div>

<!--ROW ZERO: 2 COLS-->
            <div class="allcols" style="padding-top:1em;"> 
                <div class="container sixcols">
                    <h2>Subtitle</h2>
                    <p> Lorem ipsum </p>
                </div>
                <div class="container sixcols">
                    <h2>Subtitle</h2>
                    <p> Lorem ipsum </p>
                </div>
            </div>  
        ... 
        </div>
    </div> 
</body>
</html> 
```

希望这可以帮助！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T15:26:15.660

我注意到您有几个跨度类设置为`float:left`. 我假设您已采纳 Epik 的建议，将它们改为 div。

不完全确定您是否在 HTML 中包含了任何 clearfixes，因为您提供的代码示例是部分的，并且考虑到您的屏幕截图表明主容器或包装器甚至不涉及包含它们的浮动子元素的存在，它可能是没有任何清除修复。您可能希望首先通过在浮动元素之后添加 clearfix 来解决该问题，然后再继续尝试让有问题的 div 填充屏幕。像这样的东西：

**HTML**

```
<div id="container">
    <div id="col1" class="col">1</div>
    <div id="col2" class="col">2</div>
    <div id="col3" class="col">3</div>
<div class="clearfix"></div>
</div> 
```

**CSS**

```
body{
    background:#333333;
}

#container{
    width:100%;
    height:100%;
    position:absolute;
    background:#ffffff;
    top:0;
    left:0;
}

.col{
    float:left;
    width:30%;
    margin-right:30px;
    background:#cccccc;
    color:#333333;
}

.clearfix:before, .clearfix:after { 
    content: ""; 
    display: table; 
}

.clearfix:after { 
    clear: both; 
}

.clearfix { 
    zoom: 1; 
} 
```

您会在上面注意到我添加`position:absolute`到`#container`. 这是因为如果您不这样做，`height:100%`定义将不起作用。在这种情况下，clearfix 似乎没有必要，因为容器将始终填满窗口的整个高度。但是，如果您的内容是动态的，即您将继续向容器添加更多列，则容器可能无法注册新的浮动列，并且您最终会再次出现方形。

所以基本上，这里要做的是，您首先需要添加一个 clearfix 以使容器识别浮动子元素的存在，然后在使用之前先将容器定位为绝对，`height:100%`或者`height:90%`为您的黑色页脚释放必要空间.

我已将示例代码放在 jsFiddle 中供您参考 - [http://jsfiddle.net/qmHzC/](http://jsfiddle.net/qmHzC/)

您会注意到我已将 设置`body`为`background:#333333`。这是为了作为您测试代码的控件。`position:absolute`从中移除`#container`，您会看到容器不再占据整个窗口，并且会显示主体较暗的背景。除了删除绝对定位之外，您还可以尝试删除`<div class="clearfix"></div>`浮动子元素之后的 ，您会看到白色容器不再识别浮动子元素并立即消失，就像它什么都没有一样。

希望这可以帮助！

**编辑：** *经过一番思考，我强烈认为这个问题更多是因为缺乏清晰的修复。将容器定位为绝对会阻止您使用`margin:0 auto`将容器集中在视口中心。此外，容器应该只向下流到黑色页脚的顶部，而不是窗口的底部。因此，白色容器的真实高度应该与其内容的价值加上任何顶部或底部填充一样多。为此，clearfix 解决方案应该独立工作。我不会编辑该`position:absolute`部分，因为它可能对那些想在不使用 jQuery 的情况下让 div 继承窗口的高度和宽度的人有所帮助。*

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-15T00:44:37.483

我真的不会太担心 IE6，因为现在大多数人/公司都不再支持它了。我工作的公司已经有了，因为它太旧了（Windows XP 之前，2001 年）。

不要使用 span 标签，而是使用 div 标签，因为如果您想稍后在 HTML5 中添加它，那么它会比 span 标签更加多样化。

基本上它适用于我通过删除 height:auto 和 height:100% 来设置最大和最小高度。

让我知道你的情况，如果它跟上，请发布你得到的截图，以便我进行比较和测试。

# php - 区间中数字之间的接近度

> ID：11042735
> 
> 赞同：2
> 
> 时间：2012-06-14T23:28:15.723
> 
> 标签：php, math, statistics

我在 x = 1 和 y = 9 之间有一组（浮点）数：

```
$numbers = array(1, 2, 3, 4, 5, 6, 7, 8, 9); 
```

如何计算给定间隔内数字 A 和数字 B 之间的接近度指标？

* * *

## 我试过的

`max - min`如果上述集合`9 - 1 = 8`的振幅`(n - min) / (max - min)`（

*   `(1 - 1) / (9 - 1) = 0`
*   `(2 - 1) / (9 - 1) = 0.125`
*   `(3 - 1) / (9 - 1) = 0.25`
*   `(4 - 1) / (9 - 1) = 0.375`
*   `(5 - 1) / (9 - 1) = 0.5`
*   `(6 - 1) / (9 - 1) = 0.625`
*   `(7 - 1) / (9 - 1) = 0.75`
*   `(8 - 1) / (9 - 1) = 0.875`
*   `(9 - 1) / (9 - 1) = 1`

将最小相对值（在 A 和 B 之间）除以最大相对值（也在 A 和 B 之间），似乎产生了我正在寻找的那种度量。这里有一些例子：

```
var_dump(min(0.875, 0.25) / max(0.875, 0.25));   // 0.286 between 8 and 3
var_dump(min(0.875, 0.375) / max(0.875, 0.375)); // 0.429 between 8 and 4
var_dump(min(0.875, 0.75) / max(0.875, 0.75));   // 0.857 between 8 and 7
var_dump(min(0.875, 0.875) / max(0.875, 0.875)); // 1 between 8 and 8
var_dump(min(0.25, 0.25) / max(0.25, 0.25));     // 1 between 3 and 3 
```

* * *

## 问题

每当集合的最小值开始起作用时，结果将始终是`0`：

```
var_dump(min(0.875, 0) / max(0.875, 0));         // 0 between 8 and 1
var_dump(min(0.125, 0) / max(0.125, 0));         // 0 between 2 and 1
var_dump(min(0, 0) / max(0, 0));                 // 0 between 1 and 1 (ERR!) 
```

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T23:51:29.163

我在建议这样的事情：

```
<?php

function prox($a,$b)
{
    return(abs($a-$b) / abs(1-9));
}

printf("%f\n", prox(1,2)); // 0.125000 
printf("%f\n", prox(2,3)); // 0.125000
printf("%f\n", prox(1,1)); // 0.000000
printf("%f\n", prox(1,9)); // 1.000000 
```

1 和 2 之间的接近程度与 2 和 3 相同。这似乎是有道理的。

当您指定的数字是预定义范围的界限时，您将获得最大的接近度。

您将获得的最小接近度是您指定的数字相等时。

如果您希望相反的情况成立（我想这更好地反映了***接近性***，您可以这样做：

```
<?php

function prox($a,$b)
{
    return(1 - (abs($a-$b) / abs(1-9)));
}

printf("%f\n", prox(1,2));
printf("%f\n", prox(2,3));
printf("%f\n", prox(1,1));
printf("%f\n", prox(1,9)); 
```

这将输出：

```
0.875000
0.875000
1.000000
0.000000 
```

现在，与您指定的相同的数字产生 1，而边界产生 0，因为它们是*最不接近*的值对。(1,2)、(2,3)、(3,4) 等组合都会产生相同的值，就像 (2,4)、(3,5)、(4,6) 等组合一样，等等等等

# c# - 将 RSA 加密 Java 代码移植到 C#

> ID：11042742
> 
> 赞同：6
> 
> 时间：2012-06-14T23:29:02.913
> 
> 标签：c#, java, rsa, porting, bouncycastle

我正在尝试将以下 Java 代码移植到 C# 等效项：

```
public static String encrypt(String value, String key) throws InvalidKeySpecException, NoSuchAlgorithmException, NoSuchPaddingException, InvalidKeyException, IllegalBlockSizeException, BadPaddingException {
    byte[] bytes = value.getBytes(Charset.forName("UTF-8"));
    X509EncodedKeySpec x509 = new X509EncodedKeySpec(DatatypeConverter.parseBase64Binary(key));
    KeyFactory factory = KeyFactory.getInstance("RSA");
    PublicKey publicKey = factory.generatePublic(x509);
    Cipher cipher = Cipher.getInstance("RSA");
    cipher.init(Cipher.ENCRYPT_MODE, publicKey);
    bytes = cipher.doFinal(bytes);
    return DatatypeConverter.printBase64Binary(bytes);
} 
```

到目前为止，我设法使用 .NET 的 BouncyCastle 库在 C# 中编写了以下内容：

```
public static string Encrypt(string value, string key)
    {
        var bytes = Encoding.UTF8.GetBytes(value);
        var publicKeyBytes = Convert.FromBase64String(key);
        var asymmetricKeyParameter = PublicKeyFactory.CreateKey(publicKeyBytes);
        var rsaKeyParameters = (RsaKeyParameters) asymmetricKeyParameter;
        var cipher = CipherUtilities.GetCipher("RSA");
        cipher.Init(true, rsaKeyParameters);
        var processBlock = cipher.DoFinal(bytes);
        return Convert.ToBase64String(processBlock);
    } 
```

但是，即使使用相同的参数调用这两种方法，也会产生不同的结果。出于测试目的，我使用以下公共 RSA 密钥：

```
MIGfMA0GCSqGSIb3DQEBAQUAA4GNADCBiQKBgQCLCZahTj/oz8mL6xsIfnX399Gt6bh8rDHx2ItTMjUhQrE/9kGznP5PVP19vFkQjHhcBBJ0Xi1C1wPWMKMfBsnCPwKTF/g4yga6yw26awEy4rvfjTCuFUsrShSPOz9OxwJ4t0ZIjuKxTRCDVUO7d/GZh2r7lx4zJCxACuHci0DvTQIDAQAB 
```

您能否帮助我成功移植 Java 代码或提出替代方案以在 C# 中获得相同的结果？

**EDIT1**：每次运行程序时，Java 中的输出都不同。我认为没有指定任何填充，所以我不明白是什么使输出随机。

**EDIT2**：Java 默认使用 PKCS1，因此在 C# 密码初始化中指定它就足够了，以获得相同的加密类型（尽管结果不同，这在这一点上无关紧要）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-21T18:59:49.433

作为一个有根据的猜测，我会说 Java 添加了随机填充以创建更强大的加密。

RSA 的大多数实际实现都是这样做的，正如[wiki](http://en.m.wikipedia.org/wiki/RSA_%28algorithm%29)所说...

> 因为 RSA 加密是一种确定性加密算法——即没有随机分量——攻击者可以通过在公钥下加密可能的明文并测试它们是否等于密文，从而成功地对密码系统发起选定的明文攻击。如果即使攻击者知道（或已经选择）相应的明文，攻击者也无法将两种加密彼此区分开来，则密码系统被称为语义安全。如上所述，没有填充的 RSA 在语义上是不安全的。

这可能是您的两种方法输出不同的原因。

# ruby - 无意中在ruby中重新分配了变量值

> ID：11042745
> 
> 赞同：1
> 
> 时间：2012-06-14T23:29:18.893
> 
> 标签：ruby, arrays, multidimensional-array, iteration

我还在学习红宝石的基础知识，所以我想我会尝试制作一个乘法表

```
x = (0..7).to_a
y = []
x.each { y << x } 
```

`y`现在是一个 8x8 数组，其中每一行都是相等的。这些只是我不想要的占位符值，因此我尝试遍历数组索引以更改值。

```
x.each { |i| y[i][i] = i * i } 
```

此时，`y`变成一个包含 8 列的数组`[0, 1, 4, 9, 16, ...]`。我理解为什么我只收到平方值，但我不明白为什么`y[1][3]`，例如，当我只期望索引值如 , 被改变时，为什么会`[1][1]`被`[2][2]`改变。

此外，即使我从未故意重新分配它的值，也会重新分配 的值`x`。`[0, 1, 4, 9, 16, ...]`通过上面的代码部分，它的值被自动重新分配，我不明白为什么。

我总是可以自己查找另一种方法来制作这样的表，但我想了解发生了什么`x`导致它改变了它的值，以及为什么通过索引的迭代没有按预期运行。当我能理解为什么我更简单的尝试会产生无效输出时，我将继续更正确地迭代 2D 数组的每个索引。我想自己解决这个相当基本的任务，但我现在遇到了障碍。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T23:32:04.487

您输入的是*对完全相同 object*`y`的 8 个引用。因此，当您更改 时，与 相同，与等相同。 *`x``y[1][1]``x[1]``y[2][1]``y[3][1]`*

 *的值`x`没有被重新分配。相反，`x`是一个 8 元素数组；此对象是`y`8 倍的元素，也是 的值`x`；的每次迭代都在`each`修改该数组的内容。

如果您不习惯，这是非常违反直觉的。也许以下可怕的类比会有所帮助。假设你刚刚成立了一个秘密社团，而此刻你是唯一的成员。（这是一个*非常*秘密的社团。） 特别是：你是社团的主席、秘书和司库。你也有工作；比如说，你是微软的 CEO。

现在，一个敌对秘密社团的成员来了，打断了你的秘密社团主席的左脚趾。（显然这还不够秘密。）另一个人过来打断了秘书的右膝盖骨。另一个打碎了司库的牙齿。现在，瞧，事实证明，微软的 CEO 遭受了所有这些侮辱。怎么可能？从来没有人告诉过任何人要打破微软 CEO 的膝盖骨！

当然，这并不难：同一个人可以担任所有这些角色；如果你要求 Mangrove-Throat-Wobbler Society 的主席就像你要求它的秘书，或者你要求 Microsoft 的 CEO，你会得到完全相同的人。

在 Ruby（以及许多其他类似的语言）中，变量与其值之间的关系，或数组中的位置与保存在那里的东西之间的关系，更像是官方职位与其持有者之间的关系，而不是像盒子与其内容之间的关系。完全相同的东西可以是许多变量的值，就像完全相同的人可以是总统、秘书、财务和大维尼一样。*

# ruby-on-rails - 在 git 中存储 Rails 资产？备择方案？

> ID：11042746
> 
> 赞同：4
> 
> 时间：2012-06-14T23:29:20.110
> 
> 标签：ruby-on-rails, ruby-on-rails-3, git

我希望你们可以推荐一个“最佳实践”来控制 git 中 Rails 站点的二进制资产的源代码。

我主要担心的是，当我们在站点上工作时，不断地从我们的 git 存储库中添加和删除 500kb+ 的图像，存储库最终会变得非常庞大和笨重，我们要么必须手动从历史记录中删除这些图像（容易发生灾难，据我所知）或忍受长时间的初始下载和额外浪费的磁盘空间。

将应用程序的逻辑与资产分开有哪些替代方法？Git子模块？还要别的吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T01:17:22.327

似乎这在 SO 和其他地方的其他地方都很好地涵盖了。开始*（搜索 5 秒后）*：

*   关于如何跟踪二进制文件：http: [//osdir.com/ml/git/2009-04/msg01221.html](http://osdir.com/ml/git/2009-04/msg01221.html)
*   看似相关：[使用 git 管理大型二进制文件](https://stackoverflow.com/questions/540535/managing-large-binary-files-with-git)

如果你真的在你的 repo 中看到了膨胀并且想要保持主 rails 应用 repo 没有这个，你可以查看[git submodules](http://git-scm.com/book/en/Git-Tools-Submodules) - 对图像的所有更改都将保存在一个单独的`assets` *（例如）* repo 中，保持你的主要回购免于发生膨胀。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-14T23:55:24.450

将图像文件夹添加到您的`.gitignore`文件中。例如

```
/app/assets/images/* 
```

# django - 为什么会话密钥在 Django 中莫名其妙地发生了变化？

> ID：11042747
> 
> 赞同：1
> 
> 时间：2012-06-14T23:29:20.483
> 
> 标签：django, django-socialauth

我一直在尝试通过 django-social-auth 与我的 Django 应用程序一起使用 LinkedIn 身份验证。我在 /complete/linkedin URL 上收到 AuthTokenError。奇怪的是，我认为这与匿名用户的 Django 会话 ID 更改有关！

1) 用户访问主页，session_key 为 X 2) 用户访问 /login/linkedin，session_key 仍为 X 3) 用户通过认证成功后从 LinkedIn 重定向回来，现在 session_key 为 Y！

对于我的生活，我无法理解为什么会发生这种情况！

`[127.0.0.1:2222] out: [14/Jun/2012 18:25:53] "GET /login/linkedin HTTP/1.0" 301 0 [127.0.0.1:2222] out: > /server/myapp.com/local/lib/python2.7/site-packages/social_auth/backends/__init__.py(574)auth_url() [127.0.0.1:2222] out: 573 import ipdb; ipdb.set_trace() [127.0.0.1:2222] out: --> 574 print self.request.session.session_key [127.0.0.1:2222] out: 575 self.request.session[name] = token.to_string() [127.0.0.1:2222] out: [127.0.0.1:2222] out: ipdb> c [127.0.0.1:2222] out: .eJxNy70KwjAQAGD0RdzcTvLXNB36GJ3L9XLB0DbBNF0EwcnnFqGD6wff-_x6nIbLEtPMPqY94V7vucQn-7HmmdOYcOXhk39-yMZUuPamCeRJSNAdCTAqIHQCNfiWrZgEGunw-vd6xla6Fi3oxhIY5xR00jKEyUqlhVAG3REIl2VCmkfKKcSysu9r2Xm7fQEeNDtE:1SfJOG:y2Mr30FBCGefUWjMAK0abGe1BbU [127.0.0.1:2222] out: [14/Jun/2012 18:26:01] "GET /login/linkedin/ HTTP/1.0" 302 0 [127.0.0.1:2222] out: > /server/myapp.com/local/lib/python2.7/site-packages/social_auth/backends/__init__.py(583)auth_complete() [127.0.0.1:2222] out: 582 import ipdb; ipdb.set_trace() [127.0.0.1:2222] out: --> 583 print self.request.session.session_key [127.0.0.1:2222] out: 584 if not unauthed_token: [127.0.0.1:2222] out: [127.0.0.1:2222] out: ipdb> c [127.0.0.1:2222] out: gAJ9cQEu:1SfJ9u:KnhiuQen4cVGpahdN7a8p3OuxeU [127.0.0.1:2222] out: [14/Jun/2012 18:26:03] ERROR [django.request] Internal Server Error: /complete/linkedin/ [127.0.0.1:2222] out: Traceback (most recent call last): [127.0.0.1:2222] out: File "/server/myapp.com/local/lib/python2.7/site-packages/django/core/handlers/base.py", line 111, in get_response [127.0.0.1:2222] out: response = callback(request, *callback_args, **callback_kwargs) [127.0.0.1:2222] out: File "/server/myapp.com/local/lib/python2.7/site-packages/django/views/decorators/csrf.py", line 77, in wrapped_view [127.0.0.1:2222] out: return view_func(*args, **kwargs) [127.0.0.1:2222] out: File "/server/myapp.com/local/lib/python2.7/site-packages/social_auth/decorators.py", line 37, in wrapper [127.0.0.1:2222] out: return func(request, backend, *args, **kwargs) [127.0.0.1:2222] out: File "/server/myapp.com/local/lib/python2.7/site-packages/social_auth/views.py", line 38, in complete [127.0.0.1:2222] out: return complete_process(request, backend, *args, **kwargs) [127.0.0.1:2222] out: File "/server/myapp.com/local/lib/python2.7/site-packages/social_auth/views.py", line 96, in complete_process [127.0.0.1:2222] out: user = auth_complete(request, backend, *args, **kwargs) [127.0.0.1:2222] out: File "/server/myapp.com/local/lib/python2.7/site-packages/social_auth/views.py", line 164, in auth_complete [127.0.0.1:2222] out: **kwargs) [127.0.0.1:2222] out: File "/server/myapp.com/local/lib/python2.7/site-packages/social_auth/backends/contrib/linkedin.py", line 75, in auth_complete [127.0.0.1:2222] out: return super(LinkedinAuth, self).auth_complete(*args, **kwargs) [127.0.0.1:2222] out: File "/server/myapp.com/local/lib/python2.7/site-packages/social_auth/backends/__init__.py", line 583, in auth_complete [127.0.0.1:2222] out: print self.request.session.session_key [127.0.0.1:2222] out: AuthTokenError [127.0.0.1:2222] out: [14/Jun/2012 18:26:04] "GET /complete/linkedin/?oauth_token=35cbc8ab-2cf2-4d5d-9d56-9fca71a31703&oauth_verifier=02980 HTTP/1.0" 500 420961 [127.0.0.1:2222] out:`

# r - 在不破坏类型的情况下计算组合

> ID：11042748
> 
> 赞同：3
> 
> 时间：2012-06-14T23:29:24.520
> 
> 标签：r, data.table, combinations, factors

我想知道是否有人知道如何以比我想象的更好的方式计算以下组合。

```
> library(lubridate)
> df <- data.frame(x=sample(now()+hours(1:3), 100, T), y=sample(1:4, 100, T))
> with(df, as.data.frame(table(x, y)))
                     x y Freq
1  2012-06-15 00:10:18 1    5
2  2012-06-15 01:10:18 1    9
3  2012-06-15 02:10:18 1    8
4  2012-06-15 00:10:18 2    9
5  2012-06-15 01:10:18 2   10
6  2012-06-15 02:10:18 2   12
7  2012-06-15 00:10:18 3    7
8  2012-06-15 01:10:18 3    9
9  2012-06-15 02:10:18 3    6
10 2012-06-15 00:10:18 4    5
11 2012-06-15 01:10:18 4   14
12 2012-06-15 02:10:18 4    6 
```

我喜欢这种格式，但不幸的是，当我们运行`x`并`y`通过时`table()`，它们被转换为因子。在最终输出中，它们可以作为原始类型很好地存在，但到达那里似乎有问题。目前我只是在之后手动修复所有类型，这真的很麻烦，因为我必须重新设置时区，并查找默认日期格式的百分比代码等。

似乎一个有效的解决方案将涉及对对象进行哈希处理，或者将整数映射到的唯一值，`x`因此`y`我们可以使用`tabulate()`，然后映射回来。

想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-15T00:14:02.273

这`data.table`是保留列类的版本：

```
library(data.table)

dt <- data.table(df, key=c("x", "y"))
dt[, .N, by=key(dt)]
#                       x y  N
#  1: 2012-06-14 18:10:22 1  8
#  2: 2012-06-14 18:10:22 2 10
#  3: 2012-06-14 18:10:22 3  8
#  4: 2012-06-14 18:10:22 4  8
#  5: 2012-06-14 19:10:22 1  6
#  6: 2012-06-14 19:10:22 2  8
#  7: 2012-06-14 19:10:22 3  6
#  8: 2012-06-14 19:10:22 4  6
#  9: 2012-06-14 20:10:22 1 15
# 10: 2012-06-14 20:10:22 2  5
# 11: 2012-06-14 20:10:22 3 12
# 12: 2012-06-14 20:10:22 4  8

str(dt[, .N, by=key(dt)])
# Classes ‘data.table’ and 'data.frame':  12 obs. of  3 variables:
#  $ x: POSIXct, format: "2012-06-14 18:10:22" "2012-06-14 18:10:22" ...
#  $ y: int  1 2 3 4 1 2 3 4 1 2 ...
#  $ N: int  8 10 8 8 6 8 6 6 15 5 ... 
```

**编辑以回应后续问题**

要计算观察到的因子水平的**所有可能组合**的出现次数（包括那些未出现在数据中的组合），您可以执行以下操作：

```
dt<-dt[1:30,]  # Make subset of dt in which some factor combinations don't appear

ii <- do.call("CJ", lapply(dt, unique))  # CJ() is similar to expand.grid()
dt[ii, .N]
#                      x y N
# 1: 2012-06-14 22:53:05 1 8
# 2: 2012-06-14 22:53:05 2 7
# 3: 2012-06-14 22:53:05 3 9
# 4: 2012-06-14 22:53:05 4 5
# 5: 2012-06-14 23:53:05 1 1
# 6: 2012-06-14 23:53:05 2 0
# 7: 2012-06-14 23:53:05 3 0
# 8: 2012-06-14 23:53:05 4 0 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-14T23:45:12.977

您可以使用`ddply`

```
library(plyr)

ddply(df, .(x, y), summarize, Freq = length(y)) 
```

如果你想在那时`y`安排`x`

```
ddply(df, .(y, x), summarize, Freq = length(y)) 
```

或者如果列顺序和行顺序一样重要

```
arrange(ddply(df, .(x, y), summarize, Freq = length(y)), y) 
```

# php - Netsuite PHP API - 通过电子邮件查找客户

> ID：11042752
> 
> 赞同：1
> 
> 时间：2012-06-14T23:29:41.670
> 
> 标签：php, soap, netsuite

我正在尝试通过电子邮件搜索客户。Netsuite api 文档没有多大帮助。感谢我能得到的任何帮助。谢谢你。

```
 global $myNSclient;
$email = "myemail";
$item = new nsComplexObject('SearchStringField');
$item->setFields(array( 'searchValue' => $email, 'operator' => 'is'));
$search = new nsComplexObject('ContactSearchBasic');
$search->setFields($item);
$myNSclient->setSearchPreferences(false, 10);
$searchResponse = $myNSclient->search($search); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-07T03:23:34.730

我有很多白发试图自己解决这个问题。

下面是从他们的电子邮件中获取联系人（与 Netsuite 中的客户不同，虽然两者都是本机数据类型）的代码。对于客户来说，这将非常相似。

```
$service = new NetSuiteService();
$service->setSearchPreferences(false, 20);

$recordRef = new RecordRef();
$recordRef->internalId = '-6'; //Internal ID for a customer is -2, contact is -6

$contactSearch = new ContactSearch(); //use CustomerSearch() for a customer
$contactSearchBasic = new ContactSearchBasic();//SearchRecordBasic
$contactSearchBasic->email = new SearchStringField();
$contactSearchBasic->email->searchValue = 'someone@somewhere.com';
$contactSearchBasic->email->operator = SearchStringFieldOperator::is;
$contactSearch->basic = $contactSearchBasic;

$searchRequest = new searchRequest(); //% contains a searchRecord
$searchRequest->searchRecord = $contactSearch; 

$searchResponse = $service->search($searchRequest); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:54:07.073

不久前，我在我的博客上发布了一些示例代码来做到这一点。我认为它应该回答你的问题：

[看帖子](http://www.ozonesolutions.com/programming/2011/06/sample-search-code/)

除其他外，我认为您会想要使用“CustomerSearchBasic”类型的 nsComplexObject。希望有帮助！

# c# - XAML 有没有办法使用样式将事件绑定到方法？

> ID：11042753
> 
> 赞同：0
> 
> 时间：2012-06-14T23:29:43.343
> 
> 标签：c#, wpf, xaml

我正在使用样式来定义预定义控件的模板。该控件是我无法修改的框架的一部分。这个控件有一个`DataGrid`，我想为此添加一个`MouseDoubleClick`事件。事件处理程序 ( `HandleGridDoubleClick`) 已在框架中指定。

有没有办法绑定到这个方法？我知道如果框架为此提供了一个命令会很容易。

```
<Style
    TargetType="xyz:FileMessageControl">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate
                TargetType="xyz:FileMessageControl">
                   <Grid>
                    .....
                       <DataGrid MouseDoubleClick = HandleGridDoubleClick>
                        .....
                       </DataGrid>
                   </Grid>
           </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T02:54:54.537

尝试这样的事情（你需要使用交互 dll）

```
<i:Interaction.Triggers>                            
    <i:EventTrigger EventName="MouseDoubleClick">
        <action:ExecuteCommandAction Command="{Binding DataContext.HandleGridDoubleClick}" />
     </i:EventTrigger>
</i:Interaction.Triggers> 
```

# android - 在android中的视图之间动态分配字符串值

> ID：11042756
> 
> 赞同：0
> 
> 时间：2012-06-14T23:30:23.500
> 
> 标签：android

我是android新手，需要帮助。我有两个视图 VIEW 1 - 包括一个微调器，用户选择首选语言来发送 SMS，VIEW 2 - 由 textviews、editText（包含提示）和按钮组成。

我想让用户在 VIEW 1 中选择首选语言，然后使用所选语言指定提示。比如说我选择英文，VIEW 2 中的文字和提示应该是英文。如果我选择法语，他们应该是法语。

Ps，我怎么能这样。我对这个一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T23:34:44.507

使用[在这里](http://developer.android.com/resources/tutorials/views/hello-spinner.html)`onItemSelectedListener`阅读更多信息。

[这是另一个使用中的例子。](http://www.java-samples.com/showtutorial.php?tutorialid=1517)

由于您想使用多种语言，请阅读 Android 资源和本地化。这是一个[SO Post](https://stackoverflow.com/questions/4259128/how-can-i-create-a-multilingual-android-application)，其中包含更多信息。

# ruby-on-rails - 表单张贴空白字段的书写方法

> ID：11042758
> 
> 赞同：0
> 
> 时间：2012-06-14T23:30:30.673
> 
> 标签：ruby-on-rails, forms

我正在运行rails 3.2

我创建了一个嵌套表单（请求>标签），其中咖啡脚本处理添加新标签。

除了发布空白 tag.name 的表单外，一切正常

我正在尝试编写一种方法来删除表单发布之前的空白字段。我意识到这可能是错误的方法，但我仍然是初学者：

requests_controller.rb

```
 def create
        @request = current_user.requests.build(params[:request])
        @tag = Tag.new
        if @tag.name.blank?
          destroy_blank
        end

    respond_to do |format|
      if @request.save
        format.html  { redirect_to(@request,
                      :notice => 'Request was successfully created.') }
        format.json  { render :json => @request,
                      :status => :created, :location => @request }
      else
        format.html  { render :action => "new" }
        format.json  { render :json => @request.errors,
                      :status => :unprocessable_entity }
      end
    end
  end 
```

请求.rb

```
 def destroy_blank
    blank = @tag.name
    blank.delete
 end 
```

我希望这很清楚。如果不让我知道，我将提供更多信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T01:38:50.403

如果您无法阻止空白标签进入，您可以在模型中创建一个 before_create 过滤器以跳过保存空白标签。让控制器保持干净和简单。

祝你好运！

# javascript - 当向给定对象添加新属性时，有没有办法让 Javascript 抛出错误？

> ID：11042760
> 
> 赞同：3
> 
> 时间：2012-06-14T23:30:45.553
> 
> 标签：javascript, ecmascript-5

[Object.preventExtensions](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/preventExtensions)和[Object.seal](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/seal)防止将未知属性添加到对象中，但这些属性会默默地失败而不是引发错误。有没有办法强迫他们犯错误？

```
var myObj = Object.seal({});
try{
    myObj.someProp = 17;
    console.log("I don't want to reach this message");
}catch(err){
    console.log("I want an error to occur instead.")
    console.log("Or at least get a warning somewhere.");
} 
```

我在 Chrome 19 和 Firefox 9 中对此进行了测试。我也不介意特定于浏览器的解决方案，因为我只在开发过程中需要它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T23:39:29.447

根据(and ) 的[MDN 文档，`Object.seal()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/seal)[`Object.freeze()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Object/freeze)如果您启用严格模式，则在尝试修改密封对象时将引发 TypeError：

```
function go() {
  'use strict';
  var x = {};
  Object.seal(x);
  x.foo = 123;
}
go(); // => TypeError: Can't add property foo, object is not extensible 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T23:38:19.323

如果严格模式是一个选项， Object.seal 似乎可以解决问题（至少在 Firefox 中）：

> 尝试删除或添加属性到密封对象，或将数据属性转换为访问器，反之亦然，将失败，无论是静默还是抛出 TypeError（最常见，但不是唯一的，在严格模式代码中）。

效果很好：http: [//jsfiddle.net/yVWr6/](http://jsfiddle.net/yVWr6/)

（顺便说一句：对于 preventExtensions() 的工作方式相同）

# sql - MS Access重复记录查询相关表

> ID：11042764
> 
> 赞同：1
> 
> 时间：2012-06-14T23:31:04.150
> 
> 标签：sql, ms-access

我在为以下内容创建报告时遇到问题，正如您从包含的 csv 中看到的那样，查询正在生成重复项。我已经尝试了许多我能找到的 SQL 语句的变体，但没有任何运气。

**主表：`tblServers`**

```
Server ID,Server name,Hostname,Operating System,Admin Password,Attachments
1,"ESX","ESX",1,"**************","CS6.txt;WUG.docx"
2,"Media","media",2,"**************","Access-Compare-CSV-Tables-Relationship.pl;Updates-WSUS.pdf"
3,"Deploy","deploy",3,"**************","WUG.docx"
5,"Newtest","newtest",2,"************", 
```

**二级表：`tblSettings`**

```
ID,Server ID,Role,Feature,Application,Setting,sValue
1,1,1,,,1,"C:\inetpub"
2,1,1,,,6,"test.com"
3,1,1,,,4,"testuser"
4,1,1,,,5,"testpassword"
5,2,,7,,4,"root"
6,2,,7,,5,"pword"
7,2,,5,,6,"techtools.hopto.org" 
```

**第三张表：`tblIP`**

```
ID,Sebnet,Last Octect,Description
1,"192.168.0",120,"DRAC"
1,"192.168.0",250,"Giga1"
2,"192.168.31",9,"VMWARE"
1,"192.168.31",250,"Giga2" 
```

**查询 - 结果**

```
"Server ID","Server name","Hostname","Operating System","Admin Password","Attachments","Role","Feature","Application","Setting","sValue","IP","Description"
1,"ESX","ESX",1,"**************","CS6 License.txt;WUG.docx",1,,,1,"C:\inetpub","192.168.0.250","Giga1"
1,"ESX","ESX",1,"**************","CS6 License.txt;WUG.docx",1,,,6,"test.com","192.168.0.250","Giga1"
1,"ESX","ESX",1,"**************","CS6 License.txt;WUG.docx",1,,,4,"testuser","192.168.0.250","Giga1"
1,"ESX","ESX",1,"**************","CS6 License.txt;WUG.docx",1,,,5,"testpassword","192.168.0.250","Giga1"
1,"ESX","ESX",1,"**************","CS6 License.txt;WUG.docx",1,,,1,"C:\inetpub","192.168.0.120","DRAC"
1,"ESX","ESX",1,"**************","CS6 License.txt;WUG.docx",1,,,6,"test.com","192.168.0.120","DRAC"
1,"ESX","ESX",1,"**************","CS6 License.txt;WUG.docx",1,,,4,"testuser","192.168.0.120","DRAC"
1,"ESX","ESX",1,"**************","CS6 License.txt;WUG.docx",1,,,5,"testpassword","192.168.0.120","DRAC"
1,"ESX","ESX",1,"**************","CS6 License.txt;WUG.docx",1,,,1,"C:\inetpub","192.168.31.250","Giga2"
1,"ESX","ESX",1,"**************","CS6 License.txt;WUG.docx",1,,,6,"test.com","192.168.31.250","Giga2"
1,"ESX","ESX",1,"**************","CS6 License.txt;WUG.docx",1,,,4,"testuser","192.168.31.250","Giga2"
1,"ESX","ESX",1,"**************","CS6 License.txt;WUG.docx",1,,,5,"testpassword","192.168.31.250","Giga2"
2,"Media","media",2,"**************","**;**",,7,,4,"root","192.168.31.9","VMWARE"
2,"Media","media",2,"**************","Access-Compare-CSV-Tables-Relationship.pl;**",,7,,5,"pword","192.168.31.9","VMWARE"
2,"Media","media",2,"**************","Access-Compare-CSV-Tables-Relationship.pl;**",,5,,6,"**","192.168.31.9","VMWARE" 
```

任何帮助将非常感激

编辑：

**查询的 SQL**

```
SELECT
  tblServers.[Server ID],
  tblServers.[Server name],
  tblServers.Hostname,
  tblServers.[Operating System],
  tblServers.[Admin Password],
  tblServers.Attachments,
  tblSettings.Role,
  tblSettings.Feature,
  tblSettings.Application,
  tblSettings.Setting,
  tblSettings.sValue,
  [tblIP]![Subnet] & "." & [tblIP]![Last Octect] AS IP,
  tblIP.Description
FROM (tblServers
  LEFT JOIN tblSettings ON tblServers.[Server ID] = tblSettings.[Server ID])
  INNER JOIN tblIP ON tblServers.[Server ID] = tblIP.[Server ID]
; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T01:13:44.867

这`Select Distinct`是有用的地方。

您可以简单地将 Distinct Keyword 添加到您的查询中，如下所示，以获得没有重复的值。

```
SELECT Distinct tblServers.[Server ID], tblServers.[Server name], tblServers.Hostname, 
    tblServers.[Operating System], tblServers.[Admin Password], tblServers.Attachments,
    tblSettings.Role, tblSettings.Feature, tblSettings.Application, tblSettings.Setting,
    tblSettings.sValue, [tblIP]![Subnet] & "." & [tblIP]![Last Octect] AS IP,
    tblIP.Description
FROM (tblServers 
  LEFT JOIN tblSettings ON tblServers.[Server ID] = tblSettings.[Server ID]) 
  INNER JOIN tblIP ON tblServers.[Server ID] = tblIP.[Server ID]; 
```

# maven - 自动检测 mvn3 以在多项目环境中拾取插件

> ID：11042768
> 
> 赞同：2
> 
> 时间：2012-06-14T23:31:43.557
> 
> 标签：maven, maven-2, maven-3

我当前的设置包括：

*   插件中的 parentPom
*   仅与 maven2 兼容的 customPlugin 2.0 版
*   仅与 maven3 兼容的 customPlugin 3.0 版

各种引用 parentPom 并使用我的 customPlugin 的项目。当用户使用 maven2 时，customPlugin 应该是 version2 - 当他们使用 maven3 时，它应该是 customPlugin 的 version3。

我最初遵循本[指南](http://maven.apache.org/plugins/maven-site-plugin/maven-3.html#Using_maven-site-plugin_2.x_with_Maven_2_and_maven-site-plugin_3.x_with_Maven_3)

如上页所述，可以使用配置文件和 {basedir} 属性来检测 maven 版本。检测机制在 parentPom 中实现。我遇到的问题是我的项目没有激活配置文件中的 maven3 检测机制。我相信这是因为配置文件没有在 Maven 中继承。

您会建议做什么以： - 避免在子 poms 中明确声明 pluginVersion - 提供 maven2 和 maven3 兼容性

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T06:46:26.727

`<build><pluginManagement> ...`在父 POM 级别的内部配置文件（由 Maven 版本激活）中使用插件版本声明。然后，您可以在任何地方（在父 POM 或模块）使用该插件，而无需指定版本，它应该可以根据您的需要工作。

# javascript - 用小胡子迭代无键数组？

> ID：11042775
> 
> 赞同：2
> 
> 时间：2012-06-14T23:32:23.760
> 
> 标签：javascript, mustache

我有一个看起来像这样的数组：

```
[
    Object
        actions: Array[2]
        comments: Object
        created_time: "2012-06-14T17:45:34+0000"
        from: Object
        id: "2388163605_10150972634368606"
        message: "På jakt efter lift Visby/oskarshamn- Malmö efter almedalsveckan antingen söndagen den 8 juli eller morgon/fm den 9 Juli... Bensinpengar och choklad utlovas... spännande historier kan berättas på begäran."
        to: Object
        type: "status"
        updated_time: "2012-06-14T21:45:15+0000"
        __proto__: Object
    , 
    Object
        actions: Array[2]
        comments: Object
        created_time: "2012-06-14T17:45:34+0000"
        from: Object
        id: "2388163605_10150972634368606"
        message: "På jakt efter lift Visby/oskarshamn- Malmö efter almedalsveckan antingen söndagen den 8 juli eller morgon/fm den 9 Juli... Bensinpengar och choklad utlovas... spännande historier kan berättas på begäran."
        to: Object
        type: "status"
        updated_time: "2012-06-14T21:45:15+0000"
        __proto__: Object
    , 
    Object
        actions: Array[2]
        comments: Object
        created_time: "2012-06-13T11:30:35+0000"
        from: Object
        id: "2388163605_10150969775613606"
        message: "Har en båtbiljett Nynäshamn-Visby avg 11.05 nu på fredag!"
        to: Object
        type: "status"
        updated_time: "2012-06-13T11:30:35+0000"
        __proto__: Object
    , 
    Object
        actions: Array[2]
        comments: Object
        created_time: "2012-05-21T10:36:18+0000"
        from: Object
        id: "103138046395999_394844430558691"
        message: "Hej, är det någon som pendlar Visby-Sthlm-Visby? Jag skulle behöva ha hjälp att få hem en byrå från Sthlm. Den är monterad så den där ganska stor. Så behövs släp,lastbil eller större personbil. Mvh Sabina "
        to: Object
        type: "status"
        updated_time: "2012-05-21T10:36:18+0000"
        __proto__: Object
] 
```

我尝试使用 mustache 迭代并打印出每条消息。这是我尝试使用的模板：

```
<ul>
    {{#.}}
         <li>{{message}}</li>
    {{/.}}
</ul> 
```

这就是我将数组发布到模板中的方式：

```
var template = $('#trips').html();
var content = locationIndex[loc.title];
var html = Mustache.to_html(template, content);
$('#right').html(html); 
```

模板定义如下：

```
<script id="trips" type="text/template">
    <div id="wrapper">
        <ul>
            {{#.}}
            <li>{{message}}</li>
            {{/.}}
        </ul>
    </div>
</script> 
```

这是我以前使用过的一种方法，现在似乎也可以使用...

该模板有效，因为 Ul 标记已呈现，但我似乎没有正确引用该数组。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T00:26:12.453

试试这个：

模板：

```
<script id="trips" type="text/template">
    <div id="wrapper">
        <ul>
            {{#array}}
            <li>{{message}}</li>
            {{/array}}
        </ul>
    </div>
</script> 
```

JavaScript：

```
var html = Mustache.to_html( template, { array: content } ); 
```

我假设`content`变量包含一个数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T05:00:19.827

在这里查看我的回复 [Mustache JS Template with JSON Collection](https://stackoverflow.com/questions/11819006/mustache-js-template-with-json-collection/18576523#18576523)

**数据 = {'角色'：数据}**

下面是通过 web api 的 json 调用

```
 $.ajax({
    dataType: "json",
    url: '/api/TestApi/GetAllRole',
    success: function (data) {          
        ` 
```

**数据= {'角色'：数据}；**

```
 // formatting the data to support the mustache    format  
        var html = Mustache.to_html($('#RoleTemplate').html(), data);
        $('#tblRole').append(html);

    }
}) 
```

# regex - 匹配字符串的正则表达式

> ID：11042779
> 
> 赞同：0
> 
> 时间：2012-06-14T23:32:59.953
> 
> 标签：regex

你能帮忙推导出一个与下面字符串的粗斜体部分匹配的正则表达式吗？里面的人物`X`会变。此信息来自日志文件。我需要从日志文件中删除所有时间戳。

***[6/14/12 18:10:XX:XX CDT] 000001234*** XXXXXXXXXXXXXXX XXXXXXXXXXXXXXXX

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T23:43:24.033

Python 中的示例

```
>>> import re
>>> test = '[6/14/12 18:10:XX:XX CDT] 000001234'
>>> print re.findall(r'\[6/14/12 18:10:..:.. CDT\] 000001234', test)
['[6/14/12 18:10:XX:XX CDT] 000001234'] 
```

匹配每个字符，因此`.`我们有 4 个点来匹配该`XX:XX`部分。此外，`[`and`]`是正则表达式中的特殊字符，因此我们需要对它们进行转义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T23:44:56.967

这是一个，在 grep 中测试过，它在引号内。应该很普遍。也可以与 grep -E 一起使用，因为它不使用任何高级正则表达式功能。

```
C:\>echo [6/14/12 18:10:46:XX CDT] 000001234 | grep -P "\[6/14/12 18:10:([0-9]|[
0-9][0-9]|XX):([0-9]|[0-9][0-9]|XX) CDT\] 000001234"
[6/14/12 18:10:46:XX CDT] 000001234

C:\> 
```

所以

```
\[6/14/12 18:10:([0-9]|[0-9][0-9]|XX):([0-9]|[0-9][0-9]|XX) CDT\] 000001234 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T23:40:45.783

例如，在 Perl 中，假设 X 是字母数字：

```
/\[6/14/12\s18:10:\w{2}:\w{2}\sCDT\]\s000001234/ 
```

如果您还想捕获不同的字符，可以将它们放在括号中，然后使用反向引用：

```
/\[6/14/12\s18:10:(\w{2}):(\w{2})\sCDT\]\s000001234/ 
```

其他语言类似，语法略有不同。

# c++ - C++ - 删除包含向量的结构向量会导致内存泄漏吗？

> ID：11042780
> 
> 赞同：2
> 
> 时间：2012-06-14T23:33:03.180
> 
> 标签：c++, memory-management, memory-leaks, vector, struct

我正在构建一个游戏，并且有一个名为 sprite 的对象向量。

```
struct Sprite
{
    SpriteType texture;     // The texture enumeration
    float x;                // The x position of the sprite
    float y;                // The y position of the sprite
    float xVel;             // The x velocity of the sprite
    float yVel;             // The y velocity of the sprite
    int imgBlockX;          // The x block in the image
    int imgBlockY;          // The y block in the image
    int numFrames;          // The number of frames in the sprite animation
    int curFrame;           // The current frame of animation
    int delay;              // The delay between frame switches
    int elapsed;            // The amount of time on this frame
    long lastTime;          // The last update time
    long curTime;           // The current update time
    bool loop;              // Does this animation loop?
    int lifespan;           // The max lifespan of the sprite
    int order;              // 0 for first 1 for last
    bool hasChildren;       // Is this a parent sprite?
    int maxSize;
    std::vector<SpriteChild> children;// The sprites that are linked to this one (die when this one dies)
}; 
```

正如你在底部看到的，它包含一个精灵子向量本身。如果我从我的 sprite 向量中删除一个元素，它会导致 spritechild 向量发生内存泄漏，还是已经解决了？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T23:35:29.530

您的向量被分配为 Sprite 结构的成员（它不是通过 分配的），因此在删除`new`时会自动清理它。`Sprite`

当您通过创建对象`new`而不`delete`这样做时，您会遇到内存泄漏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T00:03:19.007

如果没有正确定义 SpriteChild 的析构函数，它只会导致泄漏（即 SpriteChild 的析构函数需要删除任何动态分配的内存）。

删除两次可能会导致崩溃。

然而，仅仅删除一个用 new 成功分配的对象不会导致内存泄漏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-14T23:37:39.357

无论您如何分配精灵向量，从中删除一个元素都会释放`children`特定于该对象的向量。Believe`SpriteChild`不是指针类型的 typedef，而是结构名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-14T23:38:00.200

如果你不搞砸，它会得到照顾`SpriteChild`。如果它在构造函数中分配了一些东西，请确保在析构函数中释放它。IIRC与其成员的默认可见性`struct`没有太大区别。`class``public`

# c# - c# 正则表达式匹配太慷慨

> ID：11042782
> 
> 赞同：2
> 
> 时间：2012-06-14T23:33:31.340
> 
> 标签：c#, regex

我需要确认客户编号的格式，它必须是`#####-##`（# 是 0-9 数字，破折号是文字破折号）的格式。

我使用 RegexBuddy 构建了正则表达式（它允许您输入测试字符串以确保它是正确的）。我最终得到：

```
\d{5}-\d{2} 
```

这很好地测试了，给了我想要的结果——“命中”：

```
12345-01 
```

和不匹配

```
12345 
```

此工具提供了在各种语言中使用此正则表达式的代码 - 我想在 C# 中使用它来返回 true 以匹配整个字符串。这给了我以下内容，我已将其放入代码中。

```
Regex.IsMatch(c.Bill_To, @"\A\d{5}-\d{2}\Z") 
```

但是，此代码将 my`12345`作为匹配项返回！

我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T23:44:47.247

您的 RegEx 工作正常。尝试检查 c.Bill_To 值。

```
 bool testResult;

        var testSuccess = "12345-01";
        testResult = Regex.IsMatch(testSuccess, @"\A\d{5}-\d{2}\Z"); //is True

        var testFail = "12345";
        testResult = Regex.IsMatch(testFail, @"\A\d{5}-\d{2}\Z"); //is False 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T02:05:34.433

我想我看到了你遇到的问题。如果您的客户编号与其他内容一起包含在字符串中，则您的模式不起作用。同时指定`\A`和`\Z`意味着您的客户编号必须从字符串的开头开始并在字符串的结尾结束才能进行匹配。`\A`就像`^`匹配字符串的开头和匹配字符串的结尾`\Z`一样`$`——除了它们忽略是否`MultiLine`指定了选项。

尝试使用这种模式：`\b\d{5}-\d{2}\b`

仅当客户编号位于字母数字字符和非字母数字字符之间时，它才会匹配您的客户编号。这也意味着您可以找到客户编号，即使它们不是仅由空格分隔，如以下[LINQPad](http://www.linqpad.net/)脚本中的最后一个测试用例所示。

```
const string pattern = @"\b\d{5}-\d{2}\b";

Regex.IsMatch("12345", pattern).Dump(); // no match
Regex.IsMatch("12345-12", pattern).Dump(); // match
Regex.IsMatch("12345-1234", pattern).Dump(); // no match
Regex.IsMatch("word 12345 word", pattern).Dump(); // no match
Regex.IsMatch("word 12345-12 word", pattern).Dump(); // match
Regex.IsMatch("word 12345-1234 word", pattern).Dump(); // no match
Regex.IsMatch("word@12345-12@word", pattern).Dump(); // match 
```

# javascript - 使用 JS-ctypes 将结构化数据传递给本机代码

> ID：11042785
> 
> 赞同：1
> 
> 时间：2012-06-14T23:33:53.187
> 
> 标签：javascript, c, firefox-addon, jsctypes

我正在开发一个 Firefox 扩展，我需要使用当前以 Javascript 对象形式呈现的结构化数据执行一些高速计算。为了实现这一点，我计划编写要使用 js-ctypes 调用的 C 库。有没有办法使用 JS-ctypes 将 Javascript 对象传递给本机库？数据示例：

```
{vendors: 
{Oracle: {products: 
{Exadata: {spec1: 111, spec2: 222}, Exalogic:
{spec1: 111, spec2: 222}}}, IBM: {products: {WebSphere: {spec1: 111, spec2:222}}}
}} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T06:29:34.210

您只能传入在 C 中有效的类型。由于 C 没有字典类型或类似的概念，因此您无法将它们传递给您的 C 代码。所以你基本上有两个选择：

1.  你[`JSON.stringify()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/JSON/stringify)用来把这个对象变成一个字符串。然后，您必须找到一些可以解析 JSON 并允许您以某种方式使用它的 C 库。
2.  您将 JavaScript 数据转换为 C 可以直接理解的类型。例如，您可以传入一个[结构](https://developer.mozilla.org/en/js-ctypes/js-ctypes_reference/ctypes#StructType%28%29)[数组](https://developer.mozilla.org/en/js-ctypes/js-ctypes_reference/ctypes#ArrayType%28%29)，其中每个结构都包含一个指向结构数组的指针。当然，您的 C 代码将需要知道数组的大小 - 这必须是前一个数组的函数参数和后者的结构字段。[`Vendor`](https://developer.mozilla.org/en/js-ctypes/js-ctypes_reference/ctypes#StructType%28%29)`Vendor``Product``Vendor`

# ruby - 读取文件后，ruby 在 Windows XP 上将其打开/锁定

> ID：11042786
> 
> 赞同：0
> 
> 时间：2012-06-14T23:33:56.207
> 
> 标签：ruby

我读取了一个文本文件以从中获取一些信息，然后我需要重命名该文件所在的目录。我无法这样做，因为该文件已被锁定。如果我注释掉从文件中读取的函数，或者如果我手动解锁文件（解锁实用程序）一切正常。

我在 ruby​​ 1.8.7 (2010-08-16 patchlevel 302) [i386-mingw32]

此行使文件保持打开状态`File.open(file).readlines.each{|line|`

这两行使文件保持打开状态

```
 my_file=File.open(file,"r")
    my_file.collect {|line| 
```

除非我最后使用关闭文件`my_file.close`

[IO.html#method-c-open 的核心 1.8.7 的](http://www.ruby-doc.org/core-1.8.7/IO.html#method-c-open)man状态

> 如果给出了可选代码块，它将作为参数传递 io，当块终止时，IO 对象将自动关闭。

所以我不明白为什么文件仍然打开。

1.8.7 中读取文本文件并自动关闭它的单行代码是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T23:39:20.080

文档很清楚。但是，您将块传递给`collect`. 而且由于您没有将其传递给`open`，因此您有责任关闭文件。

要自动关闭文件，请尝试以下操作：

```
File.open(file,"r") do |f|
  f.collect # or whatever
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T23:43:27.980

如果您希望块自动关闭文件而不将文件句柄传递给块，则可以使用 File 对象的 IO#readlines 方法。

```
array_of_lines = File.readlines('/tmp/foo') 
```

这将读取文件的全部内容，然后关闭文件句柄。只要文件小到可以轻松放入内存，这是一个不错的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T23:45:18.387

尝试将块直接传递给“打开”调用：

```
File.open(file, 'r') do |f|
  f.each_line do |line|
    # Process each line
  end
end 
```

或者，如果您只想一次性获取文件内容，请尝试以下操作：

```
lines = File.read(file).split(/\r?\n/) 
```

# php - MySQL PDO - $sth->fetch() 返回 FALSE，但只是第二次？

> ID：11042789
> 
> 赞同：0
> 
> 时间：2012-06-14T23:34:05.647
> 
> 标签：php, mysql, oop, pdo

以下是我的应用程序的代码片段。请记住，我对 PDO 非常非常陌生（例如，今天开始弄清楚）所以我有点困惑。

现在，该`if`语句应返回 1。这是意料之中的。但是，在我设置之后发生了意想不到的事情`$node`：设置之后，它似乎是 FALSE。什么？就在几行之前，我的`fetch()`尝试返回了预期值，所以我不知道发生了什么。

```
$sth = $dbh->prepare("
    SELECT *, COUNT(*) AS num_rows
    FROM flow
    INNER JOIN flow_strings
        USING(node_id)
    WHERE
        (
            parent = 0
            OR parent = :user_flow
        )
        AND source = 0
        AND string = :input
    ");
$sth->bindParam(':user_flow', $user->info->flow);
$sth->bindParam(':input', $input_sentence);
$sth->execute();

// If node exists.
if ($sth->fetch()->num_rows > 0)
{
    // Get the information for the node.
    $node = $sth->fetch();

[...] etc 
```

我猜光标是向前移动的，然后就没有什么要读的了，所以返回了 FALSE。不过，当然有办法解决这个问题！当我运行时`$sth->fetch()->num_rows`，我不想改变任何东西——我只是想读取一个值。有解决方法吗？我在做一些奇怪的事情吗？我迷路了，哈哈。

谢谢！:)

* * *

# 编辑：

`Notice: Undefined variable: node_count ... on line 56`

```
// Retrieve all child nodes under $parent.
$node_query = $dbh->prepare("
    SELECT *, COUNT(*) AS num_rows
    FROM flow
    WHERE parent = :parent
    ");
$node_query->bindParam(':parent', $parent);
$node_query->execute();

// If child nodes exist.
if ($node_count = $node_query->fetch() && $node_count->num_rows > 0) // Line 56
{

[...] etc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T23:36:54.110

将数据数组分配给某个变量并使用它而无需进一步获取：

```
if (($row = $sth->fetch()) && $row->num_rows > 0) {
    // work with $row here
} 
```

# image - 如何为 Xaml 图像使用相对 http url

> ID：11042792
> 
> 赞同：0
> 
> 时间：2012-06-14T23:34:20.260
> 
> 标签：image, xaml

我需要将 XAML 中的图像视为特殊情况，并让它使用相对 HTTP URL 而不是相对 DLL 路径下载图像。但我似乎无法让它正常工作。我已经尝试过打包 URL，但它似乎忽略了它。这些似乎都不起作用。

```
<Image Source="pack://siteoforigin:,,,/images/logo.png" />
<Image Source="~/images/logo.png" />
<Image Source="/images/logo.png" /> 
```

我只是想让这些像普通的 HTML img src 一样工作。我知道我可以在代码中做到这一点，但如果可以的话，我希望能避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T01:38:43.820

我终于找到了一种让它工作的方法。我的 xap 文件是从 /ClientBin/ 加载的，因此生成的下载 URL 实际上是这样的：

```
/ClientBin/images/logo.png. 
```

一旦我意识到这正在发生，我就能够将 URL 映射添加到我的 web.config 和一个 HttpHandler 以将图像下载重定向到我需要它去的地方。

# ruby-on-rails - 我可以在 Heroku 上使用 Amazon Elasticache 吗？

> ID：11042794
> 
> 赞同：13
> 
> 时间：2012-06-14T23:34:31.417
> 
> 标签：ruby-on-rails, heroku, memcached, amazon-elasticache

我目前在 Rails 3 应用程序中使用 Heroku 的 Memcached，并且想转移到 Elasticache，因为价格更优惠。这可能吗？配置相对简单吗？关于性能，我有什么需要注意的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-15T19:26:23.550

不，不建议您使用 Elasticache，因为它没有身份验证机制。因此，**任何人都**可以访问您的缓存！这通常很好，因为您将使用 AWS 安全规则来限制哪些机器可以访问它。但是，这显然不适用于 Heroku，因为您的应用程序是在随机选择的 Herokus 机器上运行的。

您可以在 EC2 机器上使用 SASL 身份验证自行部署 memcache。无论如何，ElastiCache 只为您提供了一台预装了 memcache 的 EC2 机器。

**还有另一种选择：[MemCachier](http://www.memcachier.com/)**

*（完全免责声明，我为 MemCachier 工作）。*

Heroku 上还有另一个 memcache 提供商，它比 membase 提供的便宜得多。它叫做[MemCachier](http://www.memcachier.com/)，插件主页在[这里](https://addons.heroku.com/memcachier)。

它的价格与 ElasticCache 相当，具体取决于您的缓存大小以及是否使用保留实例（在非常大的缓存大小下，ElatiCache 更便宜）。

**更新（2013 年 6 月）**：membase memcache 插件已关闭，因此 MemCachier 是 Heroku 上唯一的 Memcache 提供者。

如果您需要任何帮助，即使您使用 ElastiCache，也请与我联系。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-20T08:49:41.717

**危险：我不建议将此解决方案用于生产用途。虽然这确实有效，但@btucker 指出它允许*任何*Heroku 托管的应用程序访问您的 ElastiCache 集群。**

是的你可以。该设置类似于 Heroku 在[Amazon RDS](https://devcenter.heroku.com/articles/amazon_rds)上的指南。不同的步骤如下：

1.  按照“ [Amazon ElastiCache 入门](http://docs.amazonwebservices.com/AmazonElastiCache/latest/GettingStartedGuide/Welcome.html)”指南创建缓存集群和节点
2.  安装[ElastiCache 命令行工具包](http://aws.amazon.com/developertools/2310261897259567)
3.  允许 Heroku 的服务器进入您的 ElastiCache 集群，就像 RDS 指南解释的那样，但将`rds-`命令替换为`elasticache-`：

    ```
    elasticache-authorize-cache-security-group-ingress \
      --cache-security-group-name default \ 
      --ec2-security-group-name default \
      --ec2-security-group-owner-id 098166147350 \

      # If your AWS_CREDENTIAL_FILE environment setting is configured,
      # this option is not necessary.
      --aws-credential-file ../credential-file-path.template 
    ```

4.  使用集群的主机名为您的生产应用程序设置 Heroku 配置值：

    ```
    heroku config:set MEMCACHE_SERVERS=elasticachehostname.amazonaws.com 
    ```

之后，按照[Memcache Rails setup](https://devcenter.heroku.com/articles/memcache#rails-setup)进行操作，一切就绪。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-30T14:00:26.310

值得注意的是，虽然@ssorallen 的上述回答将按描述工作，但它还允许*任何*部署 heroku 的应用程序访问您的 memcached 服务器。因此，如果您存储任何机密信息，或者您担心其他人会使用您的 ElatiCache 集群，请不要这样做。在 RDS 的上下文中，您在数据库中内置了访问控制，但 memcached 没有 ElastiCache 支持的此类身份验证。因此，向所有 Heroku 开放安全组是一个相当大的风险。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-28T00:51:48.787

有几个 Heroku 插件可以解决这个问题。他们为 SOCKS5 代理提供了一个静态 IP 地址，您可以将其列入白名单。

*   [https://elements.heroku.com/addons/proximo](https://elements.heroku.com/addons/proximo)
*   [https://elements.heroku.com/addons/quotaguardstatic](https://elements.heroku.com/addons/quotaguardstatic)
*   [https://elements.heroku.com/addons/fixie-socks](https://elements.heroku.com/addons/fixie-socks)

您也可以通过在 ec2 上设置自己的 SOCKS5 代理来自己执行此操作。

请注意此处的警告：http: [//docs.aws.amazon.com/AmazonElastiCache/latest/UserGuide/Access.Outside.html](http://docs.aws.amazon.com/AmazonElastiCache/latest/UserGuide/Access.Outside.html)

它速度较慢，未加密，并且需要一些 NAT 猴子业务才能使其正常工作。

# android - 无法启动 TMXTiledMapExample

> ID：11042808
> 
> 赞同：0
> 
> 时间：2012-06-14T23:36:30.950
> 
> 标签：android, andengine

我刚刚从 0 开始安装和引擎。我不得不花 2 天时间在上面。很多问题和非常糟糕的教程，信息不完整。最后它工作了，除了我需要的例子，一切都在工作。我已在项目中下载并加载了所有扩展。我正在使用[这个](https://github.com/nicolasgramlich/AndEngineTMXTiledMapExtension)扩展。所有其他示例，或者其中许多示例都在起作用。背景>使用 TMXTiledMap 会崩溃。

这是来自 logcat 的日志文件

```
06-15 01:10:33.153: E/dalvikvm(28675): Could not find class 'org.andengine.extension.tmx.TMXLoader', referenced from method org.andengine.examples.TMXTiledMapExample.onCreateScene
06-15 01:10:33.153: W/dalvikvm(28675): VFY: unable to resolve new-instance 1050 (Lorg/andengine/extension/tmx/TMXLoader;) in Lorg/andengine/examples/TMXTiledMapExample;
06-15 01:10:33.153: D/dalvikvm(28675): VFY: replacing opcode 0x22 at 0x000f
06-15 01:10:33.153: W/dalvikvm(28675): VFY: unable to resolve exception class 1054 (Lorg/andengine/extension/tmx/util/exception/TMXLoadException;)
06-15 01:10:33.153: W/dalvikvm(28675): VFY: unable to find exception handler at addr 0xfb
06-15 01:10:33.153: W/dalvikvm(28675): VFY:  rejected Lorg/andengine/examples/TMXTiledMapExample;.onCreateScene ()Lorg/andengine/entity/scene/Scene;
06-15 01:10:33.153: W/dalvikvm(28675): VFY:  rejecting opcode 0x0d at 0x00fb
06-15 01:10:33.153: W/dalvikvm(28675): VFY:  rejected Lorg/andengine/examples/TMXTiledMapExample;.onCreateScene ()Lorg/andengine/entity/scene/Scene;
06-15 01:10:33.153: W/dalvikvm(28675): Verifier rejected class Lorg/andengine/examples/TMXTiledMapExample;
06-15 01:10:33.153: W/dalvikvm(28675): Class init failed in newInstance call (Lorg/andengine/examples/TMXTiledMapExample;)
06-15 01:10:33.153: D/AndroidRuntime(28675): Shutting down VM
06-15 01:10:33.153: W/dalvikvm(28675): threadid=1: thread exiting with uncaught exception (group=0x2b542210)
06-15 01:10:33.153: E/AndroidRuntime(28675): FATAL EXCEPTION: main
06-15 01:10:33.153: E/AndroidRuntime(28675): java.lang.VerifyError: org/andengine/examples/TMXTiledMapExample
06-15 01:10:33.153: E/AndroidRuntime(28675):    at java.lang.Class.newInstanceImpl(Native Method)
06-15 01:10:33.153: E/AndroidRuntime(28675):    at java.lang.Class.newInstance(Class.java:1319)
06-15 01:10:33.153: E/AndroidRuntime(28675):    at android.app.Instrumentation.newActivity(Instrumentation.java:1023)
06-15 01:10:33.153: E/AndroidRuntime(28675):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1882)
06-15 01:10:33.153: E/AndroidRuntime(28675):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
06-15 01:10:33.153: E/AndroidRuntime(28675):    at android.app.ActivityThread.access$600(ActivityThread.java:127)
06-15 01:10:33.153: E/AndroidRuntime(28675):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
06-15 01:10:33.153: E/AndroidRuntime(28675):    at android.os.Handler.dispatchMessage(Handler.java:99)
06-15 01:10:33.153: E/AndroidRuntime(28675):    at android.os.Looper.loop(Looper.java:137)
06-15 01:10:33.153: E/AndroidRuntime(28675):    at android.app.ActivityThread.main(ActivityThread.java:4441)
06-15 01:10:33.153: E/AndroidRuntime(28675):    at java.lang.reflect.Method.invokeNative(Native Method)
06-15 01:10:33.153: E/AndroidRuntime(28675):    at java.lang.reflect.Method.invoke(Method.java:511)
06-15 01:10:33.153: E/AndroidRuntime(28675):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
06-15 01:10:33.153: E/AndroidRuntime(28675):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
06-15 01:10:33.153: E/AndroidRuntime(28675):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T18:31:36.777

尝试右键单击您的 androidproject，然后转到 android、project 并将扩展添加为对您的项目的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-13T08:39:50.993

确保您从 GitHub 上的存储库中检查了扩展（我希望您从那里获得了 AndEngine，Google Code 上的另一个存储库已经严重过时，GitHub 是该引擎的新的和唯一的家）。

[https://github.com/nicolasgramlich/](https://github.com/nicolasgramlich/)

[https://github.com/nicolasgramlich/AndEngineTMXTiledMapExtension](https://github.com/nicolasgramlich/AndEngineTMXTiledMapExtension)

# cuda - 如何在 cuda 中创建大位数组？

> ID：11042816
> 
> 赞同：1
> 
> 时间：2012-06-14T23:38:13.537
> 
> 标签：cuda, bitarray

我需要在我的算法中跟踪大约 10000 个数组元素。因此，为此我需要为每个记录使用布尔值。如果我使用 char 数组来跟踪 10000 个数组（如 0/1），它将占用很多记忆。

那么我可以在 Cuda 中创建一个 10000 位的位数组，其中每个位代表相应的数组记录吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T13:49:36.567

正如 Roger 所说，答案是肯定的，CUDA 提供与普通 C 相同的按位运算（即`>>`和`<<`）`&`，因此您可以基本上正常地实现位数组（几乎，请参阅下面的线程同步问题）。

* * *

但是，对于您的情况，这几乎肯定不是一个好主意。

线程同步存在问题。想象一下，您的 GPU 上的两个线程正在反转数组单个条目的两位。每个线程将从内存中读取相同的值，并将它们的操作应用于它，但是最后将其值写回内存的线程将覆盖另一个线程的结果。（注意：如果您的位数组没有被 GPU 代码修改，那么这不是问题。）

而且，除非明确要求，否则您**不**应该针对内存使用进行优化，具有 10K 元素的数组根本不会占用太多内存：即使您将每个布尔值存储在 64 位整数中，它也只有 80 KB。显然，您可以将它们存储在较小的数据类型中。（只有当您获得数千万甚至数亿个元素时，您才应该开始担心尽可能多地压缩数组。）

此外，GPU 的工作方式意味着您可以通过为每个布尔值（很可能是 32 位）使用相当大的数据类型来获得最佳性能，例如，内存合并工作得更好。（我没有测试过这个断言，你需要运行一些基准来检查它。）

# c# - 操作 int 和 string 类型以实现函数参数兼容性

> ID：11042818
> 
> 赞同：1
> 
> 时间：2012-06-14T23:38:20.103
> 
> 标签：c#, readprocessmemory

我正在使用一个`readprocessmemory`类，并让它用于读取多级指针并在 label2.text 的最终地址处显示整数。

这适用于我指定基地址的地方（如下所示的“0x40000”）：

```
private void label2_Click(object sender, EventArgs e)
    {
        int Readpointer = Trainer.ReadPointerInteger("runningprocess", 0x40000, new int[3] { 0x3, 0x4, 0x10 });
        string converted = Readpointer.ToString();
        label2.Text = converted; 
```

现在，我不想指定基地址“40000”，而是想使用一个函数来“找出”进程的基地址并将其存储在一个变量中并将其作为参数传递。这是第一部分：

```
 Process[] test = Process.GetProcessesByName("runningprocess"); //Get process base address
        int Base = test[0].MainModule.BaseAddress.ToInt32(); // "" 
```

不幸的是，该`"Trainer.ReadPointerInteger"`函数需要“0x40000”形式的基地址参数。所以我这样做了：

```
 string BaseAddress = "0x" + Addr.ToHex(Base); // addr.ToHex is just another function which converts the int to hex. 
```

现在我想将变量传递给`ReadPointerInteger's`第二个参数，我尝试了这个：

```
 int Readpointer = Trainer.ReadPointerInteger("runningprocess", BaseAddress, new int[3] { 0x3, 0x4, 0x10 });
        string converted = Readpointer.ToString();
        label2.Text = converted; 
```

看起来这应该可行，但问题（错误）是“Trainer”函数的第二个参数是一个 Int，这对我的新手来说很奇怪，因为我不直观地拥有一个包含的输入参数字母作为 Int。无论如何，我被困在这里，想知道是否有人可以指出如何解决 Int/String 问题？

仅供参考，`ReadPointerInteger`课程是：

```
public static int ReadPointerInteger(string EXENAME, int Pointer, int[] Offset)
{
    int Value = 0;
    checked
    {
        try
        {
            Process[] Proc = Process.GetProcessesByName(EXENAME);
            if (Proc.Length != 0)
            {
                int Bytes = 0;
                int Handle = OpenProcess(PROCESS_ALL_ACCESS, 0, Proc[0].Id);
                if (Handle != 0)
                {
                    foreach (int i in Offset)
                    {
                        ReadProcessMemoryInteger((int)Handle, Pointer, ref Pointer, 4, ref Bytes);
                        Pointer += i;
                    }
                    ReadProcessMemoryInteger((int)Handle, Pointer, ref Value, 4, ref Bytes);
                    CloseHandle(Handle);
                }
            }
        }
        catch
        { }
    }
    return Value;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T23:47:20.603

0x40000 只是整数 262144 的另一个名称。它不是一个包含“0x”的字符串，它是写入整数的另一种语法，用于以 16 为基数比以 10 为基数更具启发性的情况下使用。特别是，以下不能成立：

> “Trainer.ReadPointerInteger”函数需要“0x40000”形式的基址参数。

只是地址通常用十六进制写。

# mongodb - MongoDB 如何将逻辑和处理卸载到客户端？

> ID：11042820
> 
> 赞同：1
> 
> 时间：2012-06-14T23:38:21.587
> 
> 标签：mongodb

我在看 Kristina 的书，在介绍章节的开头，我读到 MongoDB 尽可能将逻辑和处理卸载到客户端。

有人可以更详细地解释一下吗？

当它说尽可能时，这个“何时”是什么？它如何确定是否可行？

还有关于处理和逻辑......有哪些例子？就像在客户端而不是服务器端进行插入或更新一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T23:56:35.267

作者正在描述 MongoDB 设计原则之一。

以下是 MongoDB 将处理卸载到客户端的一些方式：

*   对象 ID 通常由客户端生成和提供
*   由于 Mongo 是无模式的，因此客户端负责确保所有必需的字段都存在并包含有效数据（值得注意的例外：约束唯一索引）
*   没有连接：这种聚合通常需要由客户端完成
*   聚合函数受到严格限制（尽管 v2.2 中还有更多函数）

客户端不会以任何重要方式处理插入、更新或任何类似操作。

# jquery - jQuery 在更改和页面加载时显示/隐藏带有单选按钮的 div

> ID：11042826
> 
> 赞同：0
> 
> 时间：2012-06-14T23:38:52.117
> 
> 标签：jquery, show-hide

如果你不介意的话，帮助不大。

基本上，我有 3 个单选框和一个 div。选择第三个无线电框时，DIV应该可见。但是，可以在页面加载时选中单选框，因此如果选中了第 3 个框，则需要显示 div，否则最初应该隐藏它，但如果稍后选中第 3 个框，则它会变得可见。

HTML：

```
<input type="radio" name="image_location" value="featured_image" />
<input type="radio" name="image_location" value="all_images" />
<input type="radio" name="image_location" value="custom_field" />

<div id="image_location_custom_field">
    ** Content **
</div> 
```

到目前为止我使用 JavaScript 的地方：

```
jQuery('input[name=image_location]').hide();
jQuery('input[name=image_location]').change(function() {
  var selected = jQuery(this).val();
  if(selected == 'custom_field'){
      jQuery('#caption_custom_field').show();
  } else {
      jQuery('#caption_custom_field').hide();
  }
}); 
```

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T00:00:07.117

只需检查单选按钮是否被选中并显示 div，您也可以使用 css 隐藏 div

```
<input type="radio" name="image_location" value="featured_image" />
<input type="radio" name="image_location" value="all_images" />
<input type="radio" name="image_location" value="custom_field" />

<div style="display:none" id="image_location_custom_field">
    ** Content **
</div>​
//on dom ready
if (jQuery('input[value=custom_field]:checked').length > 0){
    jQuery('#image_location_custom_field').show()
}
else {
    jQuery('#image_location_custom_field').hide();
}
jQuery('input[name=image_location]').change(function() {
  var selected = jQuery(this).val();console.log(selected);
  if(selected == 'custom_field'){
      jQuery('#image_location_custom_field').show();
  } else {
      jQuery('#image_location_custom_field').hide();
  }
}); 
```

W/O 检查[FIDDLE](http://jsfiddle.net/mowglisanu/V9EAx/)
和检查[FIDDLE](http://jsfiddle.net/mowglisanu/V9EAx/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T23:53:07.947

`<div>`在初始页面加载时隐藏CSS - [http://jsfiddle.net/yh5ct/](http://jsfiddle.net/yh5ct/)

```
$("input[type=radio]").on("click", function() {
    if ( $(this).val() == "custom_field" ) {
        $("div").show();
    } else {
        $("div").hide();        
    }
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T00:02:06.560

我会尝试这样的事情：

```
jQuery.noConflict();

(function($) {
  $(document).ready(function() {
    $(':radio[name="image_location"]').on('change', function() {
      if ($(this).val() == 'custom_field') {
        $('#caption_custom_field').show();
      } else {
        $('#caption_custom_field').hide();
      }
    }).last().trigger('change'); // This triggers the event for the last element.
  });
})(jQuery); 
```

# ruby-on-rails-3 - 嵌套表单 - Ajax 删除

> ID：11042828
> 
> 赞同：0
> 
> 时间：2012-06-14T23:38:57.577
> 
> 标签：ruby-on-rails-3

我有一个嵌套的表单结构如下：

```
class List < ActiveRecord::Base
has_many :restaurants, :dependent => :destroy
end

class Restaurant < ActiveRecord::Base
  belongs_to :list
end 
```

我可以以创建/编辑列表的相同形式将餐厅项目添加到特定列表中。为了在列表表单中嵌套餐厅项目，我执行以下操作：

```
 <%= f.fields_for :restaurants do |builder| %>
        <%= render 'restaurant_fields', f: builder %>
 <% end %>
 <%= link_to_add_fields "+ add to stack", f, :restaurants %> 
```

餐厅字段部分有一个删除项目的链接：

```
<%= link_to "remove stack item", '#', class: "remove_fields" %> 
```

这些操作的 jquery (coffeescript) 如下：

```
jQuery ->
  $('form').on 'click', '.remove_fields', (event) ->
    $(this).prev('input[type=hidden]').val('1')
    $(this).closest('fieldset').hide()
    event.preventDefault()

  $('form').on 'click', '.add_fields', (event) ->
    time = new Date().getTime()
    regexp = new RegExp($(this).data('id'), 'g')
    $(this).before($(this).data('fields').replace(regexp, time))
    event.preventDefault() 
```

当我单击删除堆栈项时，我想发送一个 ajax 请求，以便堆栈项（餐厅）不仅从视图中隐藏（见上文），而且同时删除实际记录。你会建议我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T04:33:26.990

您可以传入`_destroy`参数来执行此操作：从客户端接收到的示例属性：

```
"restaurant" => { "stack_item" => { "id" => "987", "_destroy" => "1" } } 
```

您还需要在`Restaurant`模型中的关联上启用 :allow_destroy 选项。

在此处查看更多信息：[Active Record 嵌套属性](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)

# php - 停止在php的动态ul列表中输出一项

> ID：11042829
> 
> 赞同：1
> 
> 时间：2012-06-14T23:39:11.320
> 
> 标签：php, mysql

我有一个来自数据库的动态 ul 列表作为类别输出，但是我不想在这个特定列表中列出一个类别。是否存在停止在字段中显示一个值的 sql 选择？或者我可以在针对列表的选择查询之后编写一个 if 语句以不显示该项目吗？如果有人可以提供帮助，我将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-14T23:41:01.007

SQL`where`为您提供子句来过滤您选择的结果。

假设您的表被调用`category`并且它的主键是，请在查询`id`中添加一些内容。`where category.id != <id of category you don't want>`如果您已经有一个`where`子句，请附加另一个条件，`and`而不是：`and category.id != ...`。

# java - 在没有空布局的 Swing 中绕过组件的布局

> ID：11042834
> 
> 赞同：1
> 
> 时间：2012-06-14T23:40:20.523
> 
> 标签：java, swing, layout

有没有办法绕过 Swing 中给定组件的布局管理器？类似于 CSS 中的 position="absolute" 的东西。空布局不是一种选择。

我有一个现有的 GUI，我**无法修改**它并使用不同类型的布局，我需要在屏幕的右上角添加一个按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T00:23:51.603

如果您无法修改现有的 GUI，包括顶级包含`JFrame`，您可能会不走运。

[如果您可以修改根容器，则可以使用分层窗格](http://docs.oracle.com/javase/tutorial/uiswing/components/layeredpane.html)实现您想要的。您可以将现有`JTabbedPane`的放在较低层，并将按钮添加到较高层（在那里您*可以*使用`null`布局 + `setLocation()`）。

# drupal - Drupal 6 视图：使用暴露的过滤器作为标题

> ID：11042837
> 
> 赞同：0
> 
> 时间：2012-06-14T23:40:46.437
> 
> 标签：drupal, drupal-views

我正在使用 Drupal 6 视图来创建页面。我希望页面标题是用户从我正在使用的公开过滤器中选择的任何内容。如何从暴露的过滤器中获得选择作为页面标题？我已将以下 php 代码插入到标题窗口中，并选择 php 作为输入。结果是页面标题为 Program:Thank you for your help。

```
<?php
$view = views_get_current_view();
$program = $view->exposed_input[field_program_value] ;
drupal_set_title('Program: '. $program->title);
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T05:55:20.803

使用表单更改并在其中使用 drupal_set_title() 设置页面标题。为 $_GET 或 $_POST 添加条件以避免在未选择过滤器时设置标题。

# jquery - Knockout.js 和空值

> ID：11042839
> 
> 赞同：1
> 
> 时间：2012-06-14T23:40:56.283
> 
> 标签：jquery, rest, null, knockout.js, knockout-mapping-plugin

我在一个使用来自 RESTful API 的 JSON 的富 Web 客户端中使用了**Knockout.js** + **Knockout 映射插件**+ **jQuery的组合。**

我需要一些关于如何在我的视图模型中**处理空值的指导。**这是我的场景和我遇到的问题：

REST API 返回的大多数数据成员都是可以为**空**的。为了解决这个问题，我将一个带有空值的 JSON 样本传递给映射插件：

```
um.jsonMaps.campaign = {
    "priority": null,
    "recipientListId": null,
    "autoPrepare": null,
    "timeToSend": null
} 
```

我像这样进行初始绑定：

```
this.model = ko.mapping.fromJS(um.jsonMaps.campaign); 
```

以下是来自 API 调用的一些数据：

```
var data= {
    "priority": 95,
    "recipientListId": "a2aac72a-59f6-45da-a636-a48cc2b20137",
    "autoPrepare": false,
    "timeToSend": null
} 
```

...它是这样绑定的：

```
ko.mapping.fromJS(data, this.viewModel.model); 
```

**问题**在于，如果用户修改或触摸绑定到此数据的任何 UI 元素，他们会隐式地将模型中的数据成员转换为带引号**的字符串字面**量。因此，如果用户添加一些文本并将其删除，整数**95**将变为***“95” 。***如果在 UI 中触摸了 API 中为 null 的值，则它变为**“”**（例如空字符串）。

我需要整数和空值在编辑后保留为整数和空值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T23:55:37.257

在我的项目中，我最终通过来自服务器的数据创建了视图模型。我使用 getter 和 setter 添加了新属性，以便在需要时写入数值：

```
function DataViewModel(dataModel) {
    var self = this;
    self.priority = ko.observable(dataModel.priority);
    self.recipientListId = ko.observable(dataModel.recipientListId);
    self.autoPrepare = ko.observable(dataModel.autoPrepare);
    self.timeToSend = ko.observable(dataModel.timeToSend);

    self.priorityKo = ko.computed({
        read: function () {
            return self.priority().toFixed(2);
        },
        write: function (value) {
            value = parseFloat(value.replace(/[^\.\d]/g, ""));
            if (isNaN(value)) {
                self.priority(-1); // to fire 'changed' event
                self.priority(0); // final value in case of incorrect user input
            } else {
                self.priority(value); // real numeric value
            }
        },
        owner: this
    }); 
```

您的映射将如下所示：

```
this.model = ko.mapping.fromJS(new DataViewModel(um.jsonMaps.campaign)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T23:52:02.970

您可以使用 Ryan 的[Smart Dirty Flag](http://www.knockmeout.net/2011/05/creating-smart-dirty-flag-in-knockoutjs.html "智能脏标志")扩展作为如何处理它的基础。

或者你可以手动完成同样的事情，但他的文章仍然是你正在处理的一个很好的起点。

# iphone - 停止 UISearchDisplayController 以关闭搜索栏键盘

> ID：11042841
> 
> 赞同：0
> 
> 时间：2012-06-14T23:41:02.287
> 
> 标签：iphone, objective-c, cocoa-touch, uisearchbar, uisearchdisplaycontroller

我有一个 UISearchBar，我将它放在 UISearchDisplayController 中。现在，每当我点击键盘上的“搜索”按钮时，它都会关闭键盘。我正在实施以下方法以在点击“搜索”按钮时停止搜索，在这种情况下，我也不想松开键盘。有什么方法可以指示 UISearchDisplayController 在点击“搜索”按钮时不要关闭键盘？

```
- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar1 {
     if ([searchBar.text length] < 3){
          return;
     }
     else {
          // Do searching here or other stuffs
     }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T00:37:16.520

// 此方法返回 NO 不让第一响应者辞职

```
- (BOOL)searchBarShouldEndEditing:(UISearchBar *)searchBar; 
```

因此，在您的代码中，它应该是这样的，以避免键盘仅在搜索按钮点击时关闭，而是在取消时关闭，等等。

```
- (void)searchBarSearchButtonClicked:(UISearchBar *)searchBar1 {
     isSearchTap = YES;
}

- (BOOL)searchBarShouldEndEditing:(UISearchBar *)searchBar {
   if(isSearchTap) {
    return NO;
   }
   return YES;
} 
```

# sql - 在 SQL 中搜索多列的值与存储在一列中

> ID：11042843
> 
> 赞同：3
> 
> 时间：2012-06-14T23:41:31.177
> 
> 标签：sql, database-design

我需要将乐透号码存储在 SQL 数据库中。有 8 个独立的号码组成乐透号码。

例如：07-12-34-40-59-80-88-89

我首先想到将这些数据存储在一个名为 lotto1 - lotto8 的列中。这是有道理的，因为乐透号码总是从低到高显示，用户需要查看存储的乐透号码。编写一个 select 语句将是微不足道的。

我还需要看看有多少乐透号码是中奖者。为此，我需要在每一列中搜索每个中奖号码。

例如：如果中奖号码是 01-02-03-04-05-06-07-08，我需要检查每一列才能看到“07”在我的乐透 1 列中。

如果所有乐透号码都存储在 1 列中，并且他们有一个 LottoTicketID 将 8 行数据与 1 张彩票相关联，则检查中奖者会更容易。在检查获胜者时，我不需要说匹配的具体数字/位置，只需要说明有多少匹配。

SELECT LottoTicketID,Count(LottoTicketID) from LOTTOTABLE WHERE LottoNumber in (01,02,03,04,05,06,07,08) GROUP BY LottoTicketID

以这种方式存储会导致问题，因为我需要编写 7 个连接来显示数字。

有人可以建议一种存储这些数据的方法，以便我可以： 1\. 快速显示乐透号码/全部 2\. 检查中奖者

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-15T20:21:50.797

您可能想要解决这个问题的方法是有两个表来存储有关彩票的信息：

*   **lottery_tickets**：存储有关每张彩票的信息：

    ```
    lottery_tickets
    ----------------------
    id [PK]
    first_name
    last_name
    date_given
    ... 
    ```

*   **lottery_ticket_numbers**：存储相应的彩票号码：

    ```
    lottery_ticket_numbers
    ----------------------
    id        [PK](FK)
    number    [PK]
    position 
    ```

字段上两者`id`通过1:N识别关系连接，每张彩票在`lottery_ticket_numbers`表中有8行对应。该`position`字段将跟踪整个数字字符串中每个数字的位置 (1-8)。

*这将允许您通过将表格连接在一起并将范围缩小到具有所有*匹配号码的彩票来轻松找出中奖彩票：

```
SELECT
    a.*,
    GROUP_CONCAT(b.number ORDER BY position SEPARATOR '-') AS lottery_number
FROM
    lottery_tickets a
INNER JOIN
    lottery_ticket_numbers b ON a.id = b.id
WHERE
    b.number IN (07,12,34,40,59,80,88,89)
GROUP BY 
    a.id
HAVING 
    COUNT(b.number) = 8 
```

结果集将如下所示：

```
id   |   first_name   |   last_name   |   date_given   |   lottery_number
--------------------------------------------------------------------------------
823  |   Zane         |   Bien        |   2012-01-01   |   34-80-07-89-12-40-59-88
2321 |   Jeff         |   Clark       |   2012-01-14   |   59-07-88-40-12-34-80-89 
```

*注意*：

*   如果您使用的是 MySQL，该`GROUP_CONCAT()`函数将 XX-XX-XX-XX-XX-XX-XX-XX 格式的中奖彩票号码与该人获得的原始号码中的号码合并。如果您不使用 MySQL，我不确定其他 DBMS 中是否存在类似功能。

现在您可能还想存储有关实际中奖彩票号码的数据。为此，您还将*以*几乎相同的方式使用两张表：一张用于彩票号码，另一张用于对应的号码：

*   **获胜号码**：

    ```
    winning_numbers
    ----------------------
    id [PK]
    date_pulled 
    ```

*   **获奖号码号码**：

    ```
    winning_numbers_numbers
    ----------------------
    id     [PK](FK)
    number [PK] 
    ```

查询中奖彩票：

```
SELECT
    a.*,
    GROUP_CONCAT(b.number ORDER BY position SEPARATOR '-') AS lottery_number
FROM
    lottery_tickets a
INNER JOIN
    lottery_ticket_numbers b ON a.id = b.id
WHERE
    b.number IN
    (
        SELECT number
        FROM winning_numbers_numbers
        WHERE id = <id of a particular lottery number>
    )
GROUP BY 
    a.id
HAVING 
    COUNT(b.number) = 8 
```

与前面的查询几乎相同，只是现在数字列表是来自子查询的结果集。

显示中奖彩票号码很简单。前任：

*检索所有中奖号码及其开奖日期；将他们的数字字符串显示为按升序排列的数字，并按最近提取的数字排序：*

```
SELECT
    GROUP_CONCAT(b.number ORDER BY b.number SEPARATOR '-') AS winning_number,
    a.date_pulled
FROM
    winning_numbers a
INNER JOIN
    winning_numbers_numbers b ON a.id = b.id
GROUP BY 
    a.id
ORDER BY
    a.date_pulled DESC 
```

请注意，当您插入中奖号码时，您完全不必担心您插入的号码的顺序。由于它们始终按升序显示，因此`ORDER BY`in`GROUP_CONCAT()`会为您处理。

* * *

现在让我们看看如果您使用基于列的方法（将中奖号码和彩票号码存储为单行，但每个号码有八列），您将需要做什么：

假设架构：

`winning_numbers(id, date_pulled, n1, n2, n3, n4, n5, n6, n7, n8)`

`ticket_numbers(id, fname, lname, date_given, n1, n2, n3, n4, n5, n6, n7, n8)`

*查找给定彩票号码的所有中奖彩票*：

```
SELECT
    a.*
FROM 
    ticket_numbers a
INNER JOIN
    winning_numbers b ON
        a.n1 IN (b.n1, b.n2, b.n3, b.n4, b.n5, b.n6, b.n7, b.n8) AND
        a.n2 IN (b.n1, b.n2, b.n3, b.n4, b.n5, b.n6, b.n7, b.n8) AND
        a.n3 IN (b.n1, b.n2, b.n3, b.n4, b.n5, b.n6, b.n7, b.n8) AND
        a.n4 IN (b.n1, b.n2, b.n3, b.n4, b.n5, b.n6, b.n7, b.n8) AND
        a.n5 IN (b.n1, b.n2, b.n3, b.n4, b.n5, b.n6, b.n7, b.n8) AND
        a.n6 IN (b.n1, b.n2, b.n3, b.n4, b.n5, b.n6, b.n7, b.n8) AND
        a.n7 IN (b.n1, b.n2, b.n3, b.n4, b.n5, b.n6, b.n7, b.n8) AND
        a.n8 IN (b.n1, b.n2, b.n3, b.n4, b.n5, b.n6, b.n7, b.n8) AND
        b.id = <winning number id> 
```

`IN`如果你要问我，那真是一大堆……！！！

这种方法的优点是您不需要特定于 MySQL 的`GROUP_CONCAT`函数来显示票号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T23:52:49.407

> 以这种方式存储会导致问题，因为我需要编写 7 个连接来显示数字。

唯一需要进行 7 次连接才能显示所有数字的情况是，如果您需要它们在单行上。如果您在数据库之外处理这些（甚至使用存储过程），将它们收集成可读格式是微不足道的。

如果您的数据库支持，您可能拥有的另一个选择是将所有数字放在单个数组类型的列中或使用某种多行分析函数。你总是可以只写一个视图来解决这个问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T00:00:13.377

为什么需要编写 7 个连接来显示数字？你可以这样写：

```
SELECT LottoNumber FROM LOTTOTABLE
WHERE LottoTicketID=n
ORDER BY LottoNumber 
```

您可以使用您已经建议的查询来检查它们：

```
SELECT LottoTicketID, Count(LottoTicketID) 
FROM LOTTOTABLE 
WHERE LottoNumber in (01,02,03,04,05,06,07,08) 
GROUP BY LottoTicketID 
```

您还可以使用以下方法将此列表限制为仅获奖者：

```
HAVING Count(LottoTicketID) = 8 
```

您还可以将乐透号码存储为 TINYINT 以减小数据库大小。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T01:05:38.127

正如您所提到的，将数字存储在单列中有很多优点。如果唯一剩下的问题是将它们一起显示的复杂性，那么有很多可能性可以干净而轻松地做到这一点 - 而且它经常被忽视，所以这个问题经常被问到。

对于几种 SQL 风格以及一些独立于平台的选项，这里处理得很好： [将许多行连接成一个文本字符串？](https://stackoverflow.com/questions/194852/concatenate-many-rows-into-a-single-text-string)

# ide - VS2012的菜单可以全部大写吗？

> ID：11042852
> 
> 赞同：21
> 
> 时间：2012-06-14T23:42:42.713
> 
> 标签：ide, menubar, visual-studio-2012

VS2012 菜单中的全部大写非常烦人，IDE 或其他地方是否有设置将其关闭？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-15T15:09:18.307

还有另一种方法可以做到这一点，创建以下注册表项并设置其值：

```
HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0\General\SuppressUppercaseConversion
REG_DWORD value: 1 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-08T18:08:28.253

您也可以在 Power Shell 中运行它

```
Set-ItemProperty -Path HKCU:\Software\Microsoft\VisualStudio\11.0\General -Name SuppressUppercaseConversion -Type DWord -Value 1 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-14T23:45:39.817

是的; 在 NuGet（是的，NuGet）中搜索[VS2012 Caps](http://nuget.org/packages/VS2012.RemoveAllCaps)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-28T15:02:27.010

实现[大卫](https://stackoverflow.com/a/11053386/422877)建议的注册表项的一种简单方法（IMO）是通过注册表文件输入它。这可以通过将下面的代码保存到一个`.reg`文件（例如`VS2012_MenuCasing.reg`）并双击它来完成：

```
Windows Registry Editor Version 5.00

[HKEY_CURRENT_USER\Software\Microsoft\VisualStudio\11.0\General\]
"SuppressUppercaseConversion"=dword:00000001 
```

我希望它可以节省一些时间...

# android - Cannot figure out how to set FLAG_ACTIVITY_CLEAR_TOP

> ID：11042855
> 
> 赞同：2
> 
> 时间：2012-06-14T23:43:03.550
> 
> 标签：android, android-intent

I would like a home button on all my actives so they can bring you to the starting point. I got some great help from stack overflow and a link to the document in [http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html](http://developer.android.com/guide/topics/fundamentals/tasks-and-back-stack.html)

I'm assuming I will have to set the `FLAG_ACTIVITY_CLEAR_TOP` flag, the document ion has the following line

When starting an activity, you can modify the default association of an activity to its task by including flags in the intent that you deliver to startActivity(). The flags you can use to modify the default behavior are: Ok I tried the following,

```
 new Intent(this,TellaFortuneActivity.class,  Intent.FLAG_ACTIVITY_CLEAR_TOP ); 
```

and

```
 startActivity(i,Intent.FLAG_ACTIVITY_CLEAR_TOP); 
 break; 
```

both gave me errors. How do I do this?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-14T23:51:22.227

```
Intent i=new Intent(this,TellaFortuneActivity.class);

i.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP); 
```

# excel-formula - Excel：使用数据透视表中的数据跟踪 3 个月的下降

> ID：11042856
> 
> 赞同：0
> 
> 时间：2012-06-14T23:43:04.533
> 
> 标签：excel-formula, pivot-table

（http://stackoverflow.com/questions/5283466/calculate-moving-average-in-excel 似乎有些相关。我很想知道非 vba 的方法。）

我的数据透视表有源数据，可以计算一个人在过去 36 天内的销售额。数据透视表中的每一天 os 1 列，并且人名在行上。

其中一些人在第 1 天、第 2 天等没有销售，可能只有 3 天他们在第 14、15 和 16 天销售了一些东西。无论他们的顺序如何，我都想找到最近的销售数据（最接近数据透视表的右边缘）并计算三个销售额增长，例如，如果 C20 的任何一天有更多销售额，C20/C19 将 > 1。可以通过减去 1 并更改为百分比来增加。问题是，如果一个人只有 d10、d11、d12 的销售额，那么我如何在 Excel 中输入一个**通用**公式来表示“查找最近的连续销售额，然后计算这个比率”？对于过去三天有销售的人来说，这很容易。硬编码在哪里寻找每个销售价值会很混乱。

```
 d1   d2   d3   d4...d7   d8   d9...d34  d35  d36   mostrecentincrease nextrecent
ant   1    5    7                                       7/5=1.4            5/1=5
bat                   ...10   11   12...                12/11=1.blah       11/10=1.1
cat   2    6    9   13
dog                                           19   20   20/19=1.blah       19/blank=0
elf   4                                                 4/dnexist=0 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T02:26:52.567

我这里没有 excel，但我希望这将引导您获得正确的结果（如果那是您的列表分隔符，请使用`,`而不是）：`;`

1.  将**销售额**定义为给定行的从 d1 到 d36 的值范围（或使用实际范围）
2.  [使用这些数组公式](http://office.microsoft.com/en-us/excel-help/introducing-array-formulas-in-excel-HA001087290.aspx)计算每一行的最后一个值的位置（使用 ctrl+shift+enter 而不是在编写这些公式后只输入）：
    **position_1** `=max(if(sales<>0;column(sales)))`
    **position_2** `=max(if((sales<>0)*(column(sales)<>position_1);column(sales)))`
    **position_3** `=max(if((sales<>0)*(column(sales)<>position_1)*(column(sales)<>position_2);column(sales)))`
3.  检索值：
    **value_1** `=index(sales;position_1)`
4.  做一些错误处理（`=iferror(...;0)`）等......

# javascript - 将 :not 选择器与 .on() 结合使用

> ID：11042862
> 
> 赞同：1
> 
> 时间：2012-06-14T23:43:54.517
> 
> 标签：javascript, jquery

我正在尝试选择所有`a`没有类的href `.agency`：

```
$("#content-listing").on("click", "a:not(li.agency a)",
    function () {
        $("#content-listing").hide();
    }); 
```

我也试过：

```
$("#content-listing").on("click", "a.not('li.agency a')", function () {
    $("#content-listing").hide();
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T00:00:00.453

在您发表评论后：

> 因为我的**li**有类**机构**，我想选择`<div>`除了**li.agency 之外的所有链接**

然后使用这个：

```
$("#content-listing").on("click", "li:not(.agency) a", function () {
    $("#content-listing").hide();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T23:51:53.827

实际上，您可以在没有以下情况下做到这一点`:not`：

```
$("#content-listing").on("click", "a[class!='agency'])", function(){
    ...
}); 
```

请注意，只有当所有这些`.agency`锚点都只有这个类时，它才会起作用。

# asp.net - 在 GridView 中添加一个文本框，文本框从集合中检索数据，而不是从数据源中检索数据

> ID：11042863
> 
> 赞同：0
> 
> 时间：2012-06-14T23:44:13.780
> 
> 标签：asp.net, visual-studio-2010, gridview, collections, sqldatasource

我想在 GridView 中添加一个文本框，知道文本框从 ArrayList 或 List(OF ..) 等集合中检索数据，而不是从数据源 (ASP.net)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T23:47:33.533

在代码中设置数据源：

```
// in this case the object I am using is:

public class Product
{
    public int Id { get; set; }
    public string Name { get; set; }
    public bool IsActive { get; set; }
    public bool IsInStock { get; set; }
}

private void BindGrid()
{
   // in the GetProducts() method return the collection
   List<Product> r = GetProducts();
   this.grdSomething.DataSource = r;
   this.grdSomething.DataBind();
}

protected void Page_Load(object sender, EventArgs e)
{
    this.BindGrid();
}

protected void grdSomething_EditCommand(object sender, DataGridCommandEventArgs e)
{
    this.grdSomething.EditItemIndex = e.Item.ItemIndex;
    this.BindGrid();
} 
```

只需添加一个绑定字段列，如下所示：

```
<asp:DataGrid runat="server" ID="grdSomething" AutoGenerateColumns="False"
    OnEditCommand="grdSomething_EditCommand">
    <Columns>
       <asp:BoundColumn DataField="Name"></asp:BoundColumn>
       <asp:EditCommandColumn EditText="Edit"></asp:EditCommandColumn>
    </Columns>
</asp:DataGrid> 
```

而已

# c# - 如何检测用户何时开始在浏览器中下载？

> ID：11042866
> 
> 赞同：1
> 
> 时间：2012-06-14T23:44:54.407
> 
> 标签：c#

我进行了广泛的搜索，但没有找到解决方案。

这是我要找的东西：

当用户在浏览器中开始下载时，我希望将其移动到下载管理器并从浏览器中删除对话框下载，这在 C# 中是否可行？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-14T23:46:53.840

服务器端代码根本不可能修改浏览器的下载体验。

# php - 如何从 URL 中删除“.php”扩展名？

> ID：11042874
> 
> 赞同：1
> 
> 时间：2012-06-14T23:45:20.587
> 
> 标签：php, .htaccess, url, file-extension

这是 PHP 文件所在的位置：

ts1.WEBSITENAMEHERE.biz/cp/

.htaccess 文件也在此文件夹中。我想从“FILENAME.PHP”中删除“.php”。

这是我当前的“.htaccess”文件：

```
Options +FollowSymlinks
RewriteEngine on 
RewriteBase /cp
RewriteRule ^(.*)/$ $1.php 
```

但它不起作用。为什么是这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-14T23:51:31.520

```
RewriteEngine on
RewriteBase /cp/

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !\.php$
RewriteRule .* $0.php [L] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T23:55:38.943

在 DocumentRoot 目录中创建一个 .htaccess 文件。在该文件中添加以下代码...

```
##############
RewriteEngine On
RewriteCond %{REQUEST_URI} !^(.*)\.(.*)$
RewriteRule ^(.*)$ %{REQUEST_URI}.php [R]
############# 
```

应启用 mod_rewrite 以使其正常工作。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-14T23:59:24.493

```
 Options +FollowSymlinks
    RewriteEngine on 
    RewriteBase /cp
    RewriteRule ^(.*) $1.php 
```

我使用这个检查器：http: [//htaccess.madewithlove.be](http://htaccess.madewithlove.be)

# c++ - 30 天 SYSTEMTIME 差异

> ID：11042878
> 
> 赞同：0
> 
> 时间：2012-06-14T23:46:06.200
> 
> 标签：c++, date, time, systemtime

我愿意问是否有人有一些好的算法（或方法）来检查两个 SYSTEMTIME 变量是否有 30 天或更长时间的差异？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-14T23:57:18.217

正如[MSDN 页面](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724950%28v=vs.85%29.aspx)上`SYSTEMTIME`所说，

> 不建议您从`SYSTEMTIME`结构中添加和减去值以获得相对时间。相反，你应该
> 
> *   将`SYSTEMTIME`结构转换为`FILETIME`结构。
> *   将生成`FILETIME`的结构复制到`ULARGE_INTEGER`结构中。
> *   对值使用正常的 64 位算术`ULARGE_INTEGER`。

```
SYSTEMTIME st1, st2;
/* ... */
FILETIME ft1, ft2;
ULARGE_INTEGER t1, t2;
ULONGLONG diff;
SystemTimeToFileTime(&st1, &ft1);
SystemTimeToFileTime(&st2, &ft2);
memcpy(&t1, &ft1, sizeof(t1));
memcpy(&t2, &ft2, sizeof(t1));
diff = (t1.QuadPart<t2.QuadPart)?(t2.QuadPart-t1.QuadPart):(t1.QuadPart-t2.QuadPart);
if(diff > (30*24*60*60)*(ULONGLONG)10000000)
{
    ...
} 
```

[`SystemTimeToFileTime`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724948%28v=vs.85%29.aspx)（为简洁起见，对省略的调用进行错误处理）

关于`(30*24*60*60)*(ULONGLONG)10000000`:`30*24*60*60`是 30 天的秒数；`10000000`是[`FILETIME`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724284%28v=vs.85%29.aspx)一秒内“滴答”的数量（每个`FILETIME`滴答为 100 ns=10^2*10^-9 s=10^-7 s）。对乘法中的一个操作数进行强制转换是为了避免溢出常规`int`s（在适合 a 范围的整数文字之间执行操作时的默认值`int`）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-14T23:53:43.360

我[会将它们转换为`FileTime`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724948(v=vs.85).aspx)并从另一个中减去。
差值应大于`30*24*60*60*10^7`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T00:03:58.860

微软[建议](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724950%28v=vs.85%29.aspx)_

*   将 SYSTEMTIME 结构转换为 FILETIME 结构（[64 位值，表示自 1601 年 1 月 1 日 (UTC) 以来的 100 纳秒间隔数](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724284%28v=vs.85%29.aspx)）
*   将结果复制到 ULARGE_INTEGER 并在此之上执行普通整数运算

有用的可能是：

*   [系统时间到文件时间（...）](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724948%28v=vs.85%29.aspx)

# php - PHP计算从下午到上午经过的小时数

> ID：11042879
> 
> 赞同：4
> 
> 时间：2012-06-14T23:46:06.373
> 
> 标签：php, datetime, time

时间令人困惑......如何在php中计算从PM到AM所经过的时间？

例如`22:00:00 (10pm)`to`02:00:00 (02am)`应该给`04 hours`elapsed。相反，我的代码返回`-08 hours`

```
function hours_elapsed() 
{           
    $timestart = strtotime("22:00:00");
    $timestop = strtotime("02:00:00"); 

    $time_diff = $timestop - $timestart; //time difference

    return gmdate("h", $total_hours);
} 
```

很明显，代码是以 24 小时格式计算的，所以它当然会返回`-08`，但是如何在没有 24 小时限制的情况下获得时间......当它通过午夜标记时？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-14T23:48:26.547

`-8`小时就是`4`小时。`12`如果数字是负数，只需添加：

```
$time_diff = $timestop - $timestart; //time difference

if ($time_diff < 0) {
  $time_diff += 12;
} 
```

但是，如果您的约会相隔一天以上，这对您没有帮助。您还需要指定日期（如月份中的某天）以告诉 PHP 这些时间是不同的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-14T23:54:53.097

显然 22:00:00 是 24 小时制，但 02:00:00 可能不是吗？

也添加日期，或测试负数并添加 12 小时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-14T23:55:36.877

我的快速解决方案：将一天添加到以后的日期。

```
echo gmdate('h', strtotime('1970-00-01 02:00:00') - strtotime('1970-00-00 22:00:00')); 
```

但 Blender 的回答似乎更容易。:)

# information-extraction - 如何将程序连接到（学校）网站以提取数据

> ID：11042889
> 
> 赞同：0
> 
> 时间：2012-06-14T23:47:36.950
> 
> 标签：information-extraction

这只是由一个为大学创建的程序提出的，该程序提取了可用课程、代码、教师、时间、地点的完整列表。

要访问这些信息，我需要登录我所在大学的安全网站并搜索个别课程。程序如何（我看过 iphone 应用程序等），您可以在其中搜索大学、课程，它会显示课程的当前和更新名册。

程序如何在没有 API 或登录凭据的情况下访问这些数据以提取可用的课程数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T23:55:34.340

假设大学没有某种 API，这些应用程序可能只是从屏幕上抓取 html 数据并将相关部分提取出来以供其应用程序使用。这可以工作，但工作起来总是很痛苦，因为网站经常会改变它们的 HTML 结构，这将需要你重写你的屏幕抓取工具来弥补。

请注意，某些大学数据的使用可能会受到联邦 FERPA 法律的限制。由于该大学没有某种形式的公共 API 来获取该数据，因此明智的做法是与他们核实一下他们对您从他们的网站提取数据以在您的应用程序中使用的感觉。当他们发现您的应用程序正在从他们的安全网站获取数据时，这将避免出现大问题。

# backbone.js - 从另一个视图调用视图函数 - Backbone

> ID：11042898
> 
> 赞同：8
> 
> 时间：2012-06-14T23:48:49.553
> 
> 标签：backbone.js

我的应用程序中有以下视图。基本上，当单击 App.HouseListElemView 的 li 时，我想在 App.MapView 中调用 show_house() 。

这样做的最佳方法是什么？

```
App.HouseListElemView = Backbone.View.extend({
    tagName: 'li',
    events: {
        'click': function() {
            // call show_house in App.MapView
        }
    },
    initialize: function() {
        this.template = _.template($('#house-list-template').html());
        this.render();
    },
    render: function() {
        var html = this.template({model: this.model.toJSON()});
        $(this.el).append(html);
    },   
});

App.MapView = Backbone.View.extend({
   el: '.map',
   events: {
       'list_house_click': 'show_house',
   },
   initialize: function() {
       this.map = new GMaps({
           div: this.el,
           lat: -12.043333,
           lng: -77.028333,   
       });
       App.houseCollection.bind('reset', this.populate_markers, this);
   },
   populate_markers: function(collection) {
       _.each(collection.models, function(house) {
            var html = 'hello'
            this.map.addMarker({
                lat: house.attributes.lat,
                lng: house.attributes.lng,
                infoWindow: {
                    content: html,
                }                
            });
       }, this);
   },
   show_house: function() {
       console.log('show house');
   }
}); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-15T01:43:43.287

当前房屋实际上是您的应用程序全局状态的一部分，因此创建一个新模型来保存您的全局应用程序状态：

```
var AppState  = Backbone.Model.extend({ /* maybe something in here, maybe not */ });
var app_state = new AppState; 
```

然后您`HouseListElemView`可以通过在 中设置一个值来响应点击`app_state`：

```
App.HouseListElemView = Backbone.View.extend({
    //...
    events: {
        'click': 'set_current_house'
    },
    set_current_house: function() {
        // Presumably this view has a model that is the house in question...
        app_state.set('current_house', this.model.id);
    },
    //...
}); 
```

然后您`MapView`只需侦听以下`'change:current_house'`事件`app_state`：

```
App.MapView = Backbone.View.extend({
    //...
    initialize: function() {
        _.bindAll(this, 'show_house');
        app_state.on('change:current_house', this.show_house);
    },
    show_house: function(m) {
        // 'm' is actually 'app_state' here so...
        console.log('Current house is now ', m.get('current_house'));
    },
    //...
}); 
```

演示：http: [//jsfiddle.net/ambiguous/sXFLC/1/](http://jsfiddle.net/ambiguous/sXFLC/1/)

你可能想`current_house`成为一个实际的模型而不是简单的`id`当然，但这很容易。

`app_state`一旦拥有它，您可能会找到各种其他用途。您甚至可以添加一点点 REST 和 AJAX，并几乎免费获得应用程序设置的持久性。

事件是 Backbone 中每个问题的常用解决方案，你可以为任何你想要的东西制作模型，你甚至可以制作临时模型来严格地将东西粘合在一起。

# encoding - ffmpeg 编码图像序列

> ID：11042900
> 
> 赞同：0
> 
> 时间：2012-06-14T23:49:14.820
> 
> 标签：encoding, ffmpeg

我一直在使用 ffmpeg 使用以下语法将 jpeg 序列转换为视频：

`ffmpeg.exe -f image2 -i image_%05d.png -vcodec mpeg4 -b 800k video.mpg`

它不起作用：

```
C:\Documents and Settings\Atelier\Mes documents\dev\projets\emptycanvas\testresu
lt\objets\starbuck.tests.TestAnimationSphereInterieur>"c:\Documents and Settings
\Atelier\Mes documents\Téléchargements\ffmpeg-20120608-git-718607b-win32-static\
bin\ffmpeg.exe" -f image2 -i image_%05d.png -vcodec mpeg4 -b 800k video.mpg
ffmpeg version N-41416-g718607b Copyright (c) 2000-2012 the FFmpeg developers
  built on Jun  8 2012 12:46:19 with gcc 4.6.3
  configuration: --enable-gpl --enable-version3 --disable-w32threads --enable-ru
ntime-cpudetect --enable-avisynth --enable-bzlib --enable-frei0r --enable-libass
 --enable-libcelt --enable-libopencore-amrnb --enable-libopencore-amrwb --enable
-libfreetype --enable-libgsm --enable-libmp3lame --enable-libnut --enable-libope
njpeg --enable-librtmp --enable-libschroedinger --enable-libspeex --enable-libth
eora --enable-libutvideo --enable-libvo-aacenc --enable-libvo-amrwbenc --enable-
libvorbis --enable-libvpx --ena  libavutil      51\. 56.100 / 51\. 56.100
  libavcodec     54\. 25.100 / 54\. 25.100
  libavformat    54\.  6.101 / 54\.  6.101
  libavdevice    54\.  0.100 / 54\.  0.100
  libavfilter     2\. 78.101 /  2\. 78.101
  libswscale      2\.  1.100 /  2\.  1.100
  libswresample   0\. 15.100 /  0\. 15.100
  libpostproc    52\.  0.100 / 52\.  0.100
image_%05d.png: No such file or directory 
```

在 Windows XP...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T00:15:11.043

> 一直在使用 ffmpeg 转换一系列**jpegs**
> ...
> -i image_%05d. **png**
> ...
> image_%05d。**png** : 没有这样的文件或目录

你可能有更好的运气`-i image_%05.jpg`。这将输入名为`image_00001.jpg`, `image_00002.jpg`,`image_00003.jpg`等的图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-01T16:27:33.637

问题是窗口外壳扩展了 %05d。您可以通过将 % ffmpeg.exe -f image2 -i image_%%05d.png -vcodec mpeg4 -b 800k video.mpg 加倍来防止这种情况发生

# java - 为什么我的类没有通过外部类加载器加载？

> ID：11042901
> 
> 赞同：0
> 
> 时间：2012-06-14T23:49:40.433
> 
> 标签：java, class, classloader, external, classnotfoundexception

我想在文件夹 C:\classes\ 中运行包 Test2 中的 Main.class 的构造函数

这是我正在使用的代码。当它试图将它变成一个类时，它会抛出一个类未找到异常。然后一旦它成为类对象的一部分，构造函数会自动运行，还是我必须以某种方式实例化它？Test2 作为文本输入到此代码中。

```
 if (Main.os.equals("Windows"))
    {
        String path = "C:\\classes\\";
    }
    else
    {
        String path = "~/classes/";
    }

    File file = new File(path);

    try
    {
        URL url = file.toURI().toURL();
        URL[] urls = new URL[]{url};
        Main.print("Stage 1");
        ClassLoader cl = new URLClassLoader(urls);
        Main.print("Stage 2");
        Class cls = cl.loadClass(text + ".Main");
        Main.print(text + " was loaded into memory.");
        close();
    }
    catch (MalformedURLException e)
    {
        e.printStackTrace();
    }
    catch (ClassNotFoundException e)
    {
        e.printStackTrace();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T03:55:53.897

我怀疑您的问题是以下之一：

1.  `file`不存在或未正确指定。检查方式`file.exists()`
2.  您的类文件不在正确的目录中。如果类的包声明`Main`是，`package Test2;`那么您的类文件必须位于以下位置：`C:\classes\Test2\Main.class`.
3.  如果 Main 是嵌套类，则在加载时需要引用封闭类，例如`cl.loadClass("Test2.EnclosingClass$Main");`

我猜你的问题是2号！:)

祝你好运。

哦，是的，如果要调用构造函数，则需要创建对象的实例：`clazz.newInstance()`这是无参数构造函数的最简单方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T01:35:24.630

你能发布确切的错误信息吗？

但这是我如何执行使用类加载器的主要方法

```
 urlLoader = new URLClassLoader(urls);

    Class runClass = urlLoader.loadClass(classToRun);
    System.out.println("Starting Program !!!");

    Object[] arguments = new Object[]{args};
    Method mainMethod = runClass.getMethod("main", new Class[] {args.getClass()});
    mainMethod.invoke(null, arguments); 
```

**注意：** *classToRun*将是完整的包/类定义，即**net.sf.RecordEditor.edit.FullEditor**

**注意：**我使用它从 jar 文件中加载，目录类似

它取自这里的运行类

[http://record-editor.svn.sourceforge.net/viewvc/record-editor/Source/RecordEditor/src/net/sf/RecordEditor/utils/Run.java?revision=65&view=markup](http://record-editor.svn.sourceforge.net/viewvc/record-editor/Source/RecordEditor/src/net/sf/RecordEditor/utils/Run.java?revision=65&view=markup)

调用该类的示例在这里 [http://record-editor.svn.sourceforge.net/viewvc/record-editor/Source/RecordEditor/src/net/sf/RecordEditor/RunFullEditor.java?revision=65&view=markup](http://record-editor.svn.sourceforge.net/viewvc/record-editor/Source/RecordEditor/src/net/sf/RecordEditor/RunFullEditor.java?revision=65&view=markup)

# javascript - 未捕获的类型错误：对象# 没有“准备好”的方法

> ID：11042905
> 
> 赞同：2
> 
> 时间：2012-06-14T23:50:22.397
> 
> 标签：javascript, jquery

我一直试图弄清楚为什么我会遇到这个问题并且无法弄清楚。我猜这与添加的库有关，但我是新手，花了 2 天时间尝试不同的东西。这里的问题是调用fancybox的函数，但每当我调用document.ready时就会发生这种情况。

这是代码：

```
<head>
<script type="text/javascript" src="public/scripts/jquery.min.js"></script>  <!-- 1.7.2 -->
<script src="public/scripts/applicat.js" type="text/javascript"></script>

<!--Add link fancybox-->
<script type="text/javascript" src="public/fancybox/jquery.fancybox-1.3.4.pack.js"></script>
<link rel="stylesheet" href="public/fancybox/jquery.fancybox-1.3.4.css" type="text/css" media="screen" />
<script type="text/javascript">
    $(document).ready(function() {
        $("#add-iframe").fancybox({
            'hideOnContentClick': true
        });
    });
</script></head>

<section id="top-comments" style="margin-top: 10px">
                <div class="left-side">
                    <p class="top-comment-title">Michigan</p>
                    <div class="top-comment-wrapper">
                        <div class="top-comment-header">
                            <span class="user-name">Andrew P.</span>
                            <div class="fix"></div>
                        </div>
                        <p class="top-comment-content">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer</p>
                    </div>
                </div>
                <div class="right-side">
                    <p class="top-comment-title">Notre Dame</p>
                    <div class="top-comment-wrapper">
                        <div class="top-comment-header dispute-comment">
                            <span class="user-name">Jenny S.</span>
                            <div class="fix"></div>
                        </div>
                        <p class="top-comment-content">Lorem Ipsum is simply dummy text of the printing and typesetting industry. Lorem Ipsum has been the industry's standard dummy text ever since the 1500s, when an unknown printer</p>
                    </div>
                </div>
                <div class="fix"></div>
            </section>

            <!-- Articles -->
            <section id="top-resources" style="display:none; margin-top:10px">
                <a id="add-iframe" href="add-link.html" class="top-add-link">Add Link</a>
                <div class="left-side">
                    <p class="top-comment-title">Michigan</p>
                </div>
                <div class="right-side">
                    <p class="top-comment-title">Notre Dame</p>
                </div>
                <div class="fix"></div>
            </section>
        </div>

        <script type="text/javascript" charset="utf-8">
            jQuery().ready(function() { 
                jQuery("#discussion-sections > nav ul").tabs("#discussion-sections > section");
            });
        </script> 
```

谢谢你的帮助！路易斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T00:02:26.183

您以某种方式（在 appplicat.js 中）在 jQuery 库之后立即加载 Modernizr，因此`$`变量被重写。在“ [noConflict](http://api.jquery.com/jQuery.noConflict/) ”模式下使用 jQuery，或使用 Modernizr 来加载 jQuery，如此[处](http://modernizr.com/docs/)所述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-14T23:56:11.097

您没有成功引用 jQuery。

检查这个：

```
alert(typeof $ == "undefined");
alert(typeof jQuery == "undefined"); 
```

如果这些都是真的，那么 jQuery 没有加载到页面中。

改变：

```
<script type="text/javascript" src="public/scripts/jquery.min.js"></script> 
```

到：

```
<script type="text/javascript" src="http://www.sofiaandluis.com/luis/public/scripts/jquery.min.js"></script> 
```

# c# - 为什么我的弹窗背景是透明的？

> ID：11042907
> 
> 赞同：0
> 
> 时间：2012-06-14T23:50:30.527
> 
> 标签：c#, windows-phone-7

我正在尝试显示一个带有旋转图标的模式对话框，以指示背景中发生的事情。

我正在`Popup`为对话框使用一个，并且我`UserControl`为内容构建了一个。

显示`Popup`很好，但背景是透明的。内容按预期显示。理想情况下，我想要一个黑色背景，弹出窗口上有一个白色边框。

这是我的`UserControl`：

```
<StackPanel VerticalAlignment="Center">
    <Image Name="WaitImage" Source="/Resources/Images/Wait/70px/Loader-01.png" Stretch="None"></Image>
    <StackPanel Name="MessPanel" Visibility="Collapsed">
        <TextBlock Name="MessText" Foreground="White" TextAlignment="Center" TextWrapping="Wrap"></TextBlock>
        <Button Name="MessBtn" Content="OK" Click="MessBtn_Click" Width="150"></Button>
    </StackPanel>
</StackPanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T02:16:20.893

您没有向 StackPanel 添加边框或背景。

像这样的东西应该工作。根据您的应用程序，您可能只想使用真实颜色，而不是基于设备主题的颜色。

```
<Border BorderThickness="2" BorderBrush="{StaticResource PhoneContrastForegroundBrush}">
<StackPanel Background="{StaticResource PhoneChromeBrush}" VerticalAlignment="Center">
    <Image Name="WaitImage" Source="/Resources/Images/Wait/70px/Loader-01.png" Stretch="None"></Image>
    <StackPanel Name="MessPanel" Visibility="Collapsed">
        <TextBlock Name="MessText" Foreground="White" TextAlignment="Center" TextWrapping="Wrap"></TextBlock>
        <Button Name="MessBtn" Content="OK" Click="MessBtn_Click" Width="150"></Button>
    </StackPanel>
</StackPanel>
</Border> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T02:22:39.470

我没有看到您在 xaml 中定义背景或边框。如果需要背景和边框，则必须指定一个。我还建议做一个“覆盖”而不是弹出窗口。覆盖允许您禁用页面的其余部分。

```
 <Grid x:Name="Overlay" Visibility="Collapsed">
        <Grid Background="{StaticResource PhoneBackgroundBrush}" Opacity=".6"/>
        <Border VerticalAlignment="Center" BorderThickness="2"
            Background="{StaticResource PhoneBackgroundBrush}" BorderBrush="{StaticResource PhoneForegroundBrush}"
            CornerRadius="5" Visibility="Visible" Margin="12">
            <StackPanel VerticalAlignment="Center">
                <Image Name="WaitImage" Source="/Resources/Images/Wait/70px/Loader-01.png" Stretch="None"/>
                <StackPanel Name="MessPanel" Visibility="Collapsed">
                    <TextBlock Name="MessText" Foreground="White" TextAlignment="Center" TextWrapping="Wrap"/>
                    <Button Name="MessBtn" Content="OK" Click="MessBtn_Click" Width="150"/>
                </StackPanel>
            </StackPanel>
        </Border>
    </Grid> 
```

通过设置其可见性来显示覆盖

```
Overlay.Visibility = Visibility.Visible; 
```

# knockout.js - ko.mapping.toJSON 2 方式绑定似乎不起作用

> ID：11042908
> 
> 赞同：1
> 
> 时间：2012-06-14T23:50:34.187
> 
> 标签：knockout.js, knockout-mapping-plugin

我在下面有一个带有 ko 绑定的 html。

```
<ul data-bind="foreach: ViewModel">
<li data-bind="text: name">                       
</li>
</ul>
<input type="hidden" data-bind="value:id"/> 
```

当我更改列表时，隐藏的字段会正确更新。但是，当我单击表单上的提交按钮时，POST 不会发送新更新的 viewModel。它发送已检索到的旧的。

当我从服务器获取数据时，我使用了这个：

```
ko.mapping.fromJS(data, {}, viewModel) 
```

在我发布之前，我已经这样做了：

```
ko.mapping.toJSON(viewModel) 
```

我已经应用了正确的`ko.applyBindings`. 这可能是 ko.Mapping 的错误还是我在这里缺少的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T13:05:59.617

您是否尝试过这样做：

```
ko.toJSON(viewModel); 
```

我认为您不需要在将对象发送到 JSON 之前取消映射该对象...

# sockets - Unix 域套接字中的二进制请求

> ID：11042919
> 
> 赞同：0
> 
> 时间：2012-06-14T23:51:42.863
> 
> 标签：sockets, binary

如果可能的话，我想在 Unix 中有一个本地服务器来处理并发请求，并且它的响应将是二进制格式。

Unix 域套接字是否适合此任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-14T23:53:42.703

当然，如果您只需要接受来自本地进程的连接（即不通过网络）。

# vim - 如何在运行 vim 实例的不同 tmux 窗格之间复制和粘贴

> ID：11042920
> 
> 赞同：71
> 
> 时间：2012-06-14T23:51:44.250
> 
> 标签：vim, vi, tmux

示例：复制到一个 tmux 窗格（通过 vim），然后切换到另一个窗格（运行另一个 vim 实例）并使用 vim paste 命令粘贴。我知道这可以通过 tmux（使用前缀+]）来完成，但是如果我可以使用 vim 绑定复制和粘贴，那将非常方便，因为我只是在运行 vim 的不同窗格之间切换。

有任何想法吗？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-06-14T23:56:34.877

抱歉，我试图说服你使用 vim 的内置功能。

* * *

为`copy/paste`方便起见，您可以在另一个标签页中打开文件：

```
:tabe /path/to/another/file 
```

使用`gt`或`gT`切换标签页。

* * *

或拆分窗口以编辑另一个文件：

```
:sp /path/to/another/file 
```

用于`Ctrl-w``w`切换 Windows。
要垂直拆分窗口，请使用`:vsp file`

* * *

### 更新：

这是我的`.tmux.conf`文件：

```
# vim
setw -g mode-keys vi
bind [ copy-mode
bind -t vi-copy v begin-selection
bind -t vi-copy y copy-selection
bind -t vi-copy V rectangle-toggle
bind ] paste-buffer

# buffer
bind Space choose-buffer 
```

我只在需要复制终端输出时使用它们。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-06-15T14:35:37.570

我已经使用这种方便的绑定好几年了：）

```
" copy to buffer
vmap <C-c> :w! ~/.vimbuffer<CR>
nmap <C-c> :.w! ~/.vimbuffer<CR>
" paste from buffer
map <C-p> :r ~/.vimbuffer<CR> 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-03-24T18:18:31.210

我目前在工作中被一台运行 Windows 的笔记本电脑困住了，但我在运行 Linux 的服务器上进行了所有开发，所以我最终整天都在 PuTTY 上的 tmux 会话中工作。

我想在我的 tmux 会话中在不同窗口中运行的 vim 实例之间复制文本。我尝试使用`*`寄存器复制到系统剪贴板，但由于我是通过 PuTTY 连接的，所以我没有 X 会话，所以即使我启动 gVim 而不是 vim，也没有系统剪贴板*。*（我可能已经能够使用 x-forwarding 或其他东西来解决这个问题，但我不想在 Windows 上安装 x-server。）

我认为应该有一种方法可以使用 vim 中的 tmux 复制/粘贴缓冲区来代替系统键盘，果然有人为此编写[了一个插件](https://github.com/kana/vim-fakeclip)。

安装 fakeclip 会添加一个新的寄存器，`&`映射到 tmux 的粘贴缓冲区。由于我所有的 vim 实例都在同一个 tmux 会话中，这使得在它们之间拉取/放置文本变得非常简单。

插件文档说 fakeclip 也应该与 gnu screen 一起使用，但我没有亲自测试过。

* * *

**tl;博士**

安装[fakeclip](https://github.com/kana/vim-fakeclip)插件，然后你可以使用*yank*`"``&``y`到tmux 的缓冲区，并从 tmux 的缓冲区中*放入。**`"``&``p`*

 *** * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-06-27T19:29:18.337

虽然我同意最好只使用一个 vim 实例，但您可以单独使用 tmux 来做到这一点。它有一个内置的复制模式。我的 tmux.conf 设置如下：

```
 setw -g mode-keys vi
  unbind [
  unbind p
  bind C-y copy-mode
  bind p paste-buffer
  bind -t vi-copy v begin-selection
  bind -t vi-copy y copy-selection
  bind -t vi-copy Escape cancel 
```

因此，您可以使用`prefix-<C-y>`激活复制模式，`/search term`例如去您想去的地方、`v`直观地选择、`y`拉入 tmux。然后转到其他 vim 会话并进入插入模式。用于`prefix-p`粘贴 tmux 粘贴缓冲区中的内容。还有一些方法可以将 tmux 的粘贴缓冲区复制到系统剪贴板。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-05-27T17:49:53.273

您可以使用 vim 绑定将内容复制到剪贴板，然后切换到窗格并粘贴它。以下键绑定可能很方便。

```
noremap ty "+y
noremap tY "+Y  // copy a whole line to the clipboard
noremap tp "+p  // put the text from clipboard after the cursor 
noremap tP "+P  // put the text from clipboard before the cursor 
```

该`"+`寄存器用于访问 Vim 中系统的剪贴板。

一些有用的提示：
1\. 您可以按`v`或进入可视模式`V`，`ctrl-v`然后选择要拉出的内容，然后按`ty`将其复制到剪贴板。
2.`ty`可以与其他动作相结合。例如，`tyaw`可用于将光标下的单词复制到剪贴板。`tyib`复制括号内的内容。`tyi"`复制双引号内的文本等...

另请参阅[如何从（并复制到）系统的剪贴板进行 vim 粘贴？](https://stackoverflow.com/questions/11489428/how-to-make-vim-paste-from-and-copy-to-systems-clipboard)进一步解释。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2019-03-03T15:29:33.910

这适用于neovim。

执行`:checkhealth`，你会发现类似这样的东西：

```
## Clipboard (optional)
  - OK: Clipboard tool found: tmux 
```

如果没有，也许您需要将 tmux 升级到最新版本 2.9。

然后在 '~/config/nvim/init.vim' 中添加如下代码

```
set clipboard+=unnamedplus 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-10-17T21:39:01.717

**Fedora24 上的解决方案**

你需要使用**vimx**而不是**vim**

放入你的 .bashrc 或 .zshrc

```
alias vi='vimx'
alias vim='vimx' 
```

然后您可以轻松地在 vims/tmux 面板之间复制

* * *

```
$ vim --version | grep clipboard
-clipboard       +insert_expand   +path_extra      -toolbar
+eval            +mouse_dec       +statusline      -xterm_clipboard

$ vimx --version | grep clipboard
+clipboard       +insert_expand   +path_extra      +toolbar
+eval            +mouse_dec       +statusline      +xterm_clipboard 
```

vimx 是您很可能已经安装的 vim-enhanced-2:7.4.1868-1.fc24.x86_64 的一部分

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-09-05T02:42:49.353

**控制+插入**=复制

**移位+插入**=粘贴**

# xcode - 使用情节提要的用于纵向和横向的通用 iOS 应用程序

> ID：11042921
> 
> 赞同：3
> 
> 时间：2012-06-14T23:51:49.167
> 
> 标签：xcode, storyboard, landscape, portrait, xcode-storyboard

我已经研究这个问题几天了，我没有一个明确的答案。

以下链接上发布的答案很接近，并描述了使用两个故事板： [2 个用于纵向和横向的故事板](https://stackoverflow.com/questions/9590524/2-storyboards-for-portrait-and-landscape)

另一种解决方案是在同一个视图控制器中创建另一个视图并隐藏/取消隐藏。

这些解决方案的问题在于，在前者中，数据需要复制到新的控制器并可能导致状态问题。在后一种解决方案中，如果我使用两个视图，我需要为视图中的每个成员创建重复的 IBOutlets！

我希望我可以简单地执行以下操作：

1.  创建一个包含纵向和横向视图的故事板。
2.  为每个视图可以引用的每个属性设置一个出口。
3.  根据需要旋转视图。

我希望在我走错兔子洞之前解决这个问题。

注意：Storyboard 不允许出于设计目的将 UIView 移动到层次结构之外。我可以在 .xib 文件中执行此操作。这意味着如果我在 .xib 中有纵向和横向视图，我可以将它们物理移动到单独的区域以进​​行编辑。故事板不允许这样做，所以我必须在横向模式下创建一个单独的视图控制器，编辑它，然后将视图移动到位。但是，将来进行编辑会很痛苦。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-16T23:19:25.557

我发现处理景观的最佳方法是在代码中处理它。为什么要使用额外的故事板来移动或隐藏 UI 元素？这似乎不太可维护。此外，在同一视图控制器中处理旋转将在元素移动时显示 UI 动画。

希望这可以帮助您朝着正确的方向前进。

# java - 按位 & (AND)

> ID：11042922
> 
> 赞同：-4
> 
> 时间：2012-06-14T23:51:52.300
> 
> 标签：java

我应该为 MD5 散列编写一个包装函数，将 MD5 的输入和输出大小限制为 20 位。（所有超出的输出位都被丢弃）。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T23:54:37.917

`value20Bits = value24Bits & 0xfffff;`? 还是其他面具？

# python - 从双循环转换为单循环

> ID：11042924
> 
> 赞同：0
> 
> 时间：2012-06-14T23:51:59.430
> 
> 标签：python

该程序根据您希望列表中的两个索引号从列表中构建字典。这是输出

{'a'：2，'c'：7，'b'：'h'}

```
def buildDict2(theList,inputOne,inputTwo) :
    newdict={}
    for a in theList:
        if inputTwo >= len(a):
                print "error"
                return "error"
        if inputOne >= len(a):
                print "error"
                return "error"
        for oneValue in a: 
                    print len(a)

                    varkey=a[inputOne]
                    varvalue=a[inputTwo]
                    newdict[varkey]=varvalue

    return newdict
print buildDict2([["a", "s","d", 2,0,1],["b", "f",3,"h",0,2],["c", "g",5,7]],0,3) 
```

如何将其转换为单个循环？+1 所有答案感谢您的帮助，非常感谢。

基本上我只需要使用一个循环而不是两个

编辑：重要概念：它需要一本字典和两个数字。这两个数字告诉程序要使用的列表索引。list=[[a,b,c],[d,e,f],[h,g,i]] 与数字 0 和 2 一起使用将返回一个包含三个条目的字典。键将是第一个输入。所以键是 ad 和 h，值将是第二个输入的列表索引，所以 c，e i。得到它？

对于此代码

```
def buildDict2(theList, range1, range2, newdict = {}):
    for a in theList:
        if range2 >= len(a) or range1 >= len(a):
            return "error"
        newdict[a[range1]] = a[range2]
        return newdict
print buildDict2([["a", "s","d", 2,0,1],["b", "f",3,"h",0,2],["c", "g",5,7]],0,3) 
```

当我想得到 {'a': 2, 'c': 7, 'b': 'h'} 时，我得到了 {'a': 2} 有什么问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T00:20:48.180

这是另一种方法，使用`map()`而不是显式循环：

```
>>> from operator import itemgetter
>>> def build_dict(lists, key_idx, value_idx):
...     return dict(map(itemgetter(key_idx, value_idx), lists))
...
>>> build_dict([["a", "s","d", 2,0,1],["b", "f",3,"h",0,2],["c", "g",5,7]],0,3)
{'a': 2, 'c': 7, 'b': 'h'} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-15T00:02:39.287

```
def buildDict2(theList, pos1, pos2):
    di = {}
    for element in theList:
        try:
            di[element[pos1]] = element[pos2]
        except IndexError:
            return "Error" # <- Idk?
    return di

assert buildDict2([["a", "s","d", 2,0,1],["b", "f",3,"h",0,2],["c", "g",5,7]],0,3) == {'a': 2, 'c': 7, 'b': 'h'} 
```

只是一个猜测。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-15T00:06:14.797

```
def buildDict2(theList, range1, range2):
    newdict = {}
    for a in theList:
        if range2 >= len(a) or range1 >= len(a):
            return "error"
        newdict[a[range1]] = a[range2]
    return newdict
if __name__ == '__main__':
    print buildDict2([["a", "s","d", 2,0,1],["b", "f",3,"h",0,2],["c", "g",5,7]],0,3) 
```

根据 Jakob 的建议更改为 pep8 缩进，以便您可以更清楚地看到缩进。您将退货声明置于错误的级别。

根据 astynax 的评论更正了可变默认值。

# escaping - 如何在 Mustache 模板中使用文字 {{？

> ID：11042926
> 
> 赞同：21
> 
> 时间：2012-06-14T23:52:08.367
> 
> 标签：escaping, mustache

如何在 Mustache 模板中使用文字“{{”？

附带说明一下，如果我使用自定义标签，比如`<%`and `%>`，有没有办法写“<%”？

从理论上讲，我可以使用不同的标签，但我有太多的代码使用`{{`并`}}`改变它。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-04T03:03:38.753

只需临时更改分隔符：

```
{{=<% %>=}}
{{Look at the curlies!}}
<%={{ }}=%> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-15T00:03:05.693

假设您正在输出 HTML，您可以使用 HTML 实体来避免它（mustache 没有任何方法可以转义内置的开始标签）。

所以要输出`{{`你会写`&#123;{`.
要输出`<%`你会写`&lt;%`.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-15T21:48:24.930

您可以`{{`很容易地单独使用。如果您尝试记录类似的`{{example}}`内容，则可以始终将前两个 cur 与您的数据一起传递。

```
orphaned curlies are easy {{ <br>
{{curly}}example}} curlies are harder 
```

一些简单的渲染：

```
var data = { 'curly' : '{{'},
    tpl = $('#curly').html(),
    html = Mustache.to_html(tpl, data);

document.write(html);​ 
```

结果是：

```
orphaned curlies are easy {{ 
{{example}} curlies are harder 
```

这是[完整的工作 jsFiddle](http://jsfiddle.net/maxbeatty/NMqQV/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-25T09:36:10.427

您只需在模板中添加几个花括号即可实现结果，
例如： data: `const data = {"charsToBeEscaped": "<%"}`template: `a special char like that is perfectly rendered! {{{charsToBeEscaped}}}`，它会生成： `is perfectly rendered! <%`

# ruby - 如何测试我是否正确地与 mixin 交互？

> ID：11042930
> 
> 赞同：2
> 
> 时间：2012-06-14T23:52:49.947
> 
> 标签：ruby, rspec, mixins

如何测试我是否正确地与 mixin 交互？

我有一个 mixin，它提供了一个类似于 named_scope 或 protected_attribute 的类方法。我已经对 mixin 进行了广泛的测试，现在需要测试它所混合的模型是否正确使用它。我不想再次测试整个 mixin，只是我用正确的 args 调用了它。

该模型：

```
class SomeClass
  include MatchMixin
  match :name
end 
```

考试：

```
describe SomeClass do
  it { should be_kind_of(MatchMixin) }

  it "calls match with :name" do
    SomeClass.stubs(:match)
    SomeClass.new
    SomeClass.should have_received(:match).with(:name)  # <= this fails
  end
end 
```

混音：

```
module MatchMixin
  extend ActiveSupport::Concern

  module ClassMethods
    def match(arg)
      # lots of awesome code
    end
  end
end 
```

我已经尝试了我能想到的一切。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T01:22:44.600

我个人只是使​​用你的第一个例子：

```
it "includes MatchMixin" do
  SomeClass.new.should be_a_kind_of(MatchMixin)
end 
```

但是，如果您的 mixin 需要填写一些缺失的部分（即需要一些它不知道如何实现的方法定义），那么您可以使用 RSpec 的[共享示例](https://www.relishapp.com/rspec/rspec-core/v/2-0/docs/example-groups/shared-example-group)。

这意味着规范代码本身只编写一次，但使用不同的输入。

```
it_behaves_like "a MatchMixin" 
```

# sql - 如何将此 SQL 代码转换为 LINQ？

> ID：11042932
> 
> 赞同：3
> 
> 时间：2012-06-14T23:52:59.400
> 
> 标签：sql, linq

如何将此 SQL 代码转换为 LINQ？

```
SELECT * FROM tbl1  
  WHERE NOT EXISTS (SELECT NULL AS Expr1
            FROM tbl2 AS tbl2_1
            WHERE (T = 'literal') AND tbl1.Id = someId) 
```

这就是我所拥有的，但它不起作用：

```
from a in Tbl1 
let b = from b in Tbl2 select b.someId   
let c = from c in Tbl2 select c.T 
where (!c.Contains("literal") & !(b.Contains(a.Id)))
select a 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-15T00:07:07.907

这应该可以解决问题：

```
from t1 in Tbl1
where !(from t2 in Tbl2
    where t2.T == "literal"
    select t2.someId)
       .Contains(t1.Id)
select t1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T02:05:23.000

你也可以试试这个：

```
var query =
    from a in Tbl1
    join b in Tbl2 on a.Id equals b.someId into bs
    where !bs
        .Where(b2 => b2.T == "literal")
        .Any()
    select a; 
```

# .net - 实现 DependencyProperty 并避免“CA2104：不要声明只读可变引用类型”的最佳方法是什么？

> ID：11042937
> 
> 赞同：3
> 
> 时间：2012-06-14T23:54:19.140
> 
> 标签：.net, dependency-properties, code-analysis, fxcop

[在避免CA2104 的代码分析警告（不要声明只读可变引用类型）](http://msdn.microsoft.com/en-us/library/ms182302.aspx)的同时实现依赖属性的最佳方法是什么（或者，有没有一种方法） ？

[MSDN 文档](http://msdn.microsoft.com/en-us/library/ms750428.aspx)建议以这种方式声明您的依赖属性：

```
 public static readonly DependencyProperty StateProperty = DependencyProperty.Register(
    "State", typeof(Boolean), typeof(MyStateControl),new PropertyMetadata(false)); 
```

但这会导致 CA2104。压制很容易，但我只是想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T23:58:21.413

这是一个误报；`DependencyProperty`是不可变的。

您可以使用属性而不是字段，但是您需要在静态构造函数中设置它，从而触发另一个警告。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-29T14:21:37.057

**编辑：**经过进一步思考，我决定**这个警告很糟糕**。CA2104 的整个想法是您可以获取指针并使用它来修改对象的内容。对附加属性使用“获取”操作并不能解决根本问题，它只会欺骗代码分析以接受该模式。处理这个问题的正确方法是忽略项目属性中的 CA2104，因为在一个拥有公共 DependencyProperty 类的世界中，这是一个愚蠢的警告。

此警告在 Metro 中似乎无效，因为 DependencyProperties 是不可变的。但是，它在 WPF 中似乎是有效的，因为如果您有对 DependencyProperty 的可写引用，您可以添加所有者或弄乱元数据。这是代码，它并不漂亮，但这通过了 FXCop 指南。

```
 /// <summary>
    /// Identifies the Format dependency property.
    /// </summary>
    private static readonly DependencyProperty labelPropertyField = DependencyProperty.Register(
        "Label",
        typeof(String),
        typeof(MetadataLabel),
        new PropertyMetadata(String.Empty));

    /// <summary>
    /// Gets the LabelProperty DependencyProperty.
    /// </summary>
    public static DependencyProperty LabelProperty
    {
        get
        {
            return MetadataLabel.labelPropertyField;
        }
    }

    /// <summary>
    /// Gets or sets the format field used to display the <see cref="Guid"/>.
    /// </summary>
    public String Label
    {
        get
        {
            return this.GetValue(MetadataLabel.labelPropertyField) as String;
        }

        set
        {
            this.SetValue(MetadataLabel.labelPropertyField, value);
        }
    } 
```

# c# - 用于将多个部分字符串列表与主要列表进行比较的模式

> ID：11042941
> 
> 赞同：0
> 
> 时间：2012-06-14T23:54:40.930
> 
> 标签：c#, list, design-patterns, comparison

所以我有一个“超级”列表：DestinationColumn，有 100 个字符串。为了简单起见，假设总是 100。

它来自几个源列，ColA、ColB。其中一些将有 100 个字符串，有些则更少。

所以，例如：

ColA 具有字符串 1-33、40-70 和 90-100 的值。它获得第一优先级，并将所有值填充到这些字符串的 DestinationColumn 中。ColB 具有 1-40 和 70-100 的值。在存在间隙的地方，它会填充它，但它不能覆盖 ColA 字符串。

现在我想确保这已经发生了。

列出 sourceColA、列出 sourceColB 和 ListdestinationColumn。

首先，我编写了一个函数来比较两个列表，看看它们是否包含相同的字符串：

```
public static bool ListEquals<T>(IList<T> list1, IList<T> list2)
    {
        if ((list1 == null) || (list2 == null))
        {
            return false;
        }
        if (list1.Count != list2.Count)
            return false;
        for (int i = list1.Count - 1; i >= 0; --i)
        {
            if (!list1[i].Equals(list2[i]))
            {
                return false;
            }
        }
        return true;
    } 
```

现在我想保持它的通用性，但取 x 个源列，并确保所有内容现在都正确地位于一个目标列中。是否有这样做的一般模式？

我目前的想法是一个循环，根据destinationCol 标记ColA 的所有条目，对B 重复，等等，然后确保所有条目都没有被命中两次，并且所有条目都被命中一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T00:01:35.820

要按照您的描述合并两列，您可以这样做

```
ColA.Zip(ColB, (a, b) => a??b) 
```

所以：

```
void Main()
{
    IEnumerable<IEnumerable<string>> cols=
        new string[][]
        {
            new string[]{"monkey", "frog", null, null, null, null},
            new string[]{null, null, null, null, "cat", "giraffe"},
            new string[]{null, null, null, "dog", "fish", null}
        };
    cols.MergeLeft().Dump();
    //gives: "monkey", "frog", null, "dog", "cat", "giraffe" 

}

static class Ex
{
    public static IEnumerable<T> MergeLeft<T>
        (this IEnumerable<IEnumerable<T>> cols) where T:class
    {
        var maxItems = cols.Max(x => x.Count());
        var leftMerged = 
            cols
                .Aggregate(
                    Enumerable.Repeat((T)null, maxItems),
                    (acc,col) => acc.Zip(col, (a, b) => a ?? b));
        return leftMerged;

    }
} 
```

编辑

这是一个更有效的版本，`MergeLeft`不需要`maxItems`消除@Enigmativity 下面描述的费用：

```
static class Ex
{
    public static IEnumerable<T> MergeLeft<T>
        (this IEnumerable<IEnumerable<T>> cols) where T:class
    {
        return cols
            .Aggregate(
                Enumerable.Empty<T>(),
                (acc,col) => 
                acc
                    .Concat(Infinite<T>(null))
                    .Zip(col, (a, b) => a ?? b));   
    }
    private static IEnumerable<T> Infinite<T>(T item)
    {
        for(;;){yield return item;}
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T05:11:49.760

我不完全确定我了解您要做什么，因为我不了解您的 ListEquals 的目的。无论如何，我会这样：

```
 public static void FillDest<T>(IList<T> dest, IList<IList<T>> srcLists)
        where T : class
    {
        bool goon = true;
        int idx = 0;
        dest.Clear();
        while (goon)
        {
            goon = false;
            bool added = true;
            foreach (IList<T> aSrc in srcLists)
            {
                added = false;
                T anItem;
                if (aSrc.Count <= idx)
                {
                    added = true;
                    continue;
                }
                goon = true;
                if ((anItem = aSrc[idx]) != null)
                {
                    dest.Add(anItem);
                    added = true;
                    break;
                }
            }
            if (!added)
                dest.Add((T)null);
            idx++;
        }
    } 
```

# jquery - Wordpress 无限滚动选择器

> ID：11042942
> 
> 赞同：1
> 
> 时间：2012-06-14T23:54:41.313
> 
> 标签：jquery, css, wordpress, infinite-scroll

无限滚动插件 (infinite-scroll.com) 曾经在我的网站上运行，但不知何故不再适用。我不确定发生了什么变化。

我的网站是 www.outgrow.me

我使用的内容选择器是 .li_container:first 和后选择器 .mcol

任何想法发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T00:10:11.337

Chrome 控制台输出以下错误：

```
Uncaught SyntaxError: Unexpected end of input http://outgrow.me/:1 
```

查看文档的末尾：

```
<script type="text/javascript">
  mixpanel.track("Viewed Homepage",
    {"Title":"Homepage",
     "Date":"Friday",
</script> 
```

缺少右括号和括号：

```
}); 
```

而且，由于 date 是 JSON 对象中的最后一项，它后面不应该有逗号 - 这会导致旧版本的 Internet Explorer 出现问题。

**编辑：**这样就修复了 JS 错误，但无限滚动仍然无法正常工作。我怀疑问题是您的`.li_container`div 不在页面的源代码中。

您用于创建列（columnizer）的插件会插入`.li_container`到 DOM 中，但在无限滚动脚本运行之后才会这样做，因此无限滚动没有任何附加内容。将您的分栏器脚本放在无限滚动脚本之上，我怀疑这会解决问题。

# ios - 为 IOS 解析器组织 JSON 的最佳方式

> ID：11042946
> 
> 赞同：0
> 
> 时间：2012-06-14T23:55:15.687
> 
> 标签：ios, json

我正在使用`NSJSONSerialization`从我的 Web 服务中解析一些 JSON，并且我想知道最有效的布局方式。

目前我以这种格式生成 JSON：

```
[
  {"title":"title Val","description":"description val","appointmentDate":"2012-06-16T00:00:00"},
  {"title":"title Val","description":"description val","appointmentDate":"2012-06-16T00:00:00"},
  {"title":"title Val","description":"description val","appointmentDate":"2012-06-16T00:00:00"}
] 
```

解析器构造一个`NSArray`其中每个元素都是一个`NSDictionary`包含约会详细信息（标题、描述、日期）的元素。

现在我的应用程序实际上需要在解析的 JSON 中搜索日期在某个时间间隔之间的约会，以便它可以根据某些用户操作显示它们。目前我只是扫描数组并检索任何符合条件的约会。这当然是 O(n)。当我想在特定字段上搜索时，我应该以不同的方式表示我的 JSON 吗？也许像这样？

```
{
  "2012-06-16T00:00:00" : {"title":"title Val","description":"description val"},
  "2012-06-18T00:00:00" : {"title":"title val","description":"description val"},
  "2012-06-20T00:00:00" : {"title":"title val","description":"description val"},
} 
```

这样，解析器将生成`NSDictionary`每行的键是约会日期的位置。这样做是否更有效，或者我可以同样快速地对一个对象`NSArray`执行二进制搜索？`NSDictionary`如果搜索了数组，则有必要`[row objectForKey:@"appointmentDate"]`在比较谓词中执行 a，这可能是一项昂贵的操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T00:03:43.853

如果约会是有序的，只需进行二分搜索而不是线性搜索。除非您有数以万计的项目，否则它可能会足够快。

不过，可能会花费您大量时间的一件事是重新解析日期。NSDates 的创建速度很慢，因此我建议您在读入列表时创建一次，或者将字符串转换为数值，例如自 1970 年以来的秒数，这可以快速进行比较。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-15T00:03:54.157

如何解析约会并使用 Core Data 之类的东西存储它们，并在要搜索的字段上设置索引？这可能比尝试手动优化和搜索更简单、更快。

虽然如果您想手动进行，那么可以，建立一个以您要搜索的信息为关键字的排序索引将为您提供更有效的搜索。因此，您可以让您的字典将`NSDate`'s（不要以字符串格式保存数据）映射到该日期的约会集，然后您可以对字典的键集执行二进制搜索（确保它是首先正确排序！）以识别落在搜索间隔内的键范围。然后您可以进入字典并获取相应的约会。

# jquery-selectors - 单击外部 div 时，如何选择嵌套在 2 个 div 内的图像？

> ID：11042962
> 
> 赞同：0
> 
> 时间：2012-06-14T23:57:08.060
> 
> 标签：jquery-selectors

我正在使用 jquery，我想找到我单击的图像的 src，但我也希望能够单击 outerdiv 而不仅仅是单击图像本身。我的代码都在这里，可以复制并粘贴到编辑器中。这是简化的代码，但我的项目从数据库生成标签并使用 PHP 输出到网页。如果我单击图像，它工作正常，但如果我单击 innerdiv 或outerdiv 则不行。任何帮助将不胜感激，我刚刚开始使用 jquery，谢谢。

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
    "http://www.w3.org/TR/html4/loose.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>Jquery Select src</title>

    <script type="text/javascript" language="javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript" language="javascript">
      $(document).ready(function() {
          $(".outerdiv img").click(function(){  //output variable 'theImage' when outerdiv is clicked
              var theImage = $(this).attr('src');
              alert("The image source is: " + theImage);
          });
  }); //end of document ready function
    </script>

    <style>
        .outerdiv {width: 300px; height: 200px; border: thin solid #000000;}
        .innerdiv {width: 160px; height: 160px; border: thin solid #0099FF;}
        .innerdiv img {width: 120px; height: 120px; border: thin solid #FF3300;}
    </style>

</head>

<body>

<div class="outerdiv">outerdiv
    <div class="innerdiv">innerdiv
        <img src="image1.jpg">
    </div><!--/innerdiv-->
</div><!--/outerdiv-->

<div class="outerdiv">outerdiv
    <div class="innerdiv">innerdiv
        <img src="image2.jpg">
    </div><!--/innerdiv-->
</div><!--/outerdiv-->

<div class="outerdiv">outerdiv
    <div class="innerdiv">innerdiv
        <img src="image3.jpg">
    </div><!--/innerdiv-->
</div><!--/outerdiv-->

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T00:01:35.787

问题是它`this`没有`src`属性，因为`this`它不是图像。您需要在外部 div 中选择图像。

尝试：

```
var theImage = $('img',this)[0].attr('src'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T00:02:30.053

```
 jQuery(".outerdiv").add("innerdiv").add("img").click(function (){
    var target = $(this);
    var src = target.attr("src") || target.find("img").attr("src");
  }); 
```

# java - 当我调用 XMLGrammarCachingConfiguration.parseGrammar() 时，如何捕获标准错误输出？

> ID：11042966
> 
> 赞同：0
> 
> 时间：2012-06-14T23:57:35.577
> 
> 标签：java, xerces

我在 Java 中使用 Xerces2 并且有一个 XMLGrammarCachingConfiguration。我正在使用它通过调用 parseGrammar 将 XML Schema (xsd) 解析为语法池。它可以很好地解析 xsd 文件，但它会向 stderr 报告所有错误和警告（我使用的是 Eclipse，所以这会在控制台中捕获）。我设法更改了我的 xsd，使其出现致命错误，这引发了我的应用程序可以捕获的 XNIException，正如预期的那样。

我尝试使用 XMLGrammarCachingConfiguration.setErrorHandler() 方法，并将我用自己的 PrintWriter 构造的 DefaultErrorHandler 传递给它。我还尝试传入我自己的实现 XMLErrorHandler 接口的自定义错误处理程序。它仍然出现在控制台中，而不是我的 PrintWriter 正在使用的文件中。

这似乎应该如此简单。有人可以告诉我我做错了什么吗？

--edit：我应该补充一点，我正在使用自定义 XMLEntityResolver，我想要捕获的错误消息是当我的解析器无法解析实体时，因此从它的 resolveEntity() 方法返回 null，这意味着默认实体解析器正在尝试解析它。即错误消息来自底层默认实体解析器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-18T23:42:54.820

好的，我设法解决了这个问题。我需要做的是创建自己的 XMLErrorHandler，然后解决如何注册它的窍门。

它需要在 XMLGrammarCachingConfiguration 的 XMLErrorReporter 中注册，但是要访问它，您需要调用

```
XMLGrammarCachingConfiguration.getProperty("http://apache.org/xml/properties/internal/error-reporter") 
```

然后将返回的对象转换为 XMLErrorReporter 并调用

```
XMLErrorReporter.setProperty("http://apache.org/xml/properties/internal/error-handler", customHandler); 
```

就这么简单。

# javascript - Mouseout 事件不会在 IE 8 中触发

> ID：11042968
> 
> 赞同：0
> 
> 时间：2012-06-14T23:57:46.420
> 
> 标签：javascript, events, event-handling, internet-explorer-8, dom-events

我在鼠标之后有一个尾随对象。当鼠标离开窗口时，我想隐藏它。这在其他浏览器中可以正常工作，*但甚至不会触发 IE8 中的事件*>.<

如果我能触发它，那么我猜它会正常工作。

```
function mouseport(e){
    //alert('event triggered');
    if (document.all)  { //IF IE
        mouseX = event.clientX;
        mouseY = event.clientY;
    } else    {
        mouseX = (window.Event) ? e.clientX : event.clientX;
        mouseY = (window.Event) ? e.clientX : event.clientY;
    }
        if ((mouseY > 0 && mouseY < window.innerHeight)
        && (mouseX > 0 && mouseX < window.innerWidth)){
            return false;
        }else{
            if (follow) hidett()    //that's my hide function
        }
    }

// for IE compatability
if (!window.addEventListener) {
    window.attachEvent("mouseout", mouseport);
}
else {
    window.addEventListener("mouseout", mouseport, false);
}

if (window.Event) {
            if (window.captureEvents) { //doesn't run if IE
                document.captureEvents(Event.MOUSEOUT);
            }
        } 
```

请帮助找出我在哪里犯了它不会触发的错误......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T00:11:40.980

```
window.attachEvent("mouseout", mouseport); 
```

应该

```
document.attachEvent("onmouseout", mouseport); 
```

[http://msdn.microsoft.com/en-us/library/ie/ms536343(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/ie/ms536343(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T00:04:08.440

尝试添加这个

```
<meta http-equiv="X-UA-Compatible" content="IE=7" /> 
```

注意：已知会导致某些滚动条出现问题。

# installshield - 来自 XML 文件的 InstallShield 动态配置

> ID：11042969
> 
> 赞同：0
> 
> 时间：2012-06-14T23:57:47.950
> 
> 标签：installshield

InstallShield 包括通过 XML 文件更改* 修改应用程序 .config 文件的能力...但是如果您想在多个安装包之间共享配置设置怎么办？

在我们的环境中，我们提供了一个 WPF 应用程序和一个 WinForms 应用程序，其中一个是管理控制台，另一个是数据收集应用程序（用户可以选择他们想要的单个安装程序）。我们还为两个应用程序使用的服务层提供了一个安装程序，因此每个客户位置的 Web 服务端点都不同。（实际环境稍微复杂一些，以上是复杂度的一个例子）

我们的方向是创建一个 XML 文件，该文件具有两个安装程序的通用配置设置，包括通用设置，InstallShield 读取这些值，然后更新每个应用程序的 .config 文件以指向相同的端点。有人做过吗？这可以在不使用 InstallScript 或自定义操作的情况下完成吗？

*   将 xml 配置文件导入 XML 文件更改区域以读取配置文件中的每一行，并通过 XPath 为每一行创建添加请求（例如 add[@key="IsMultiTouch" 和 @value="True"]）。这似乎不太理想，因为我怀疑它只是重新创建我希望它从开发团队以文件的当前状态读取的文件，并且只在安装期间修改 appsettings 中的值

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T17:14:49.027

[后续] 使用 CtrlGetText() 从 InstallShield 对话框中提取值，将该数据传递给我的 dll 以包含在我的应用程序配置文件中。生成的 .config 文件条目包含大量“�”序列。尝试使用 InstallScript 清理这些内容的尝试效果不佳。最终不得不通过将 XmlDocument 翻转为字符串，在字符串上执行 .Replace("�", "") 将它们加载到 XmlDocument 中（以确保它有效），然后保存它，从而在 dll 中清理它们. InstallShield！= 太棒了。[/跟进]

XML 文件更改似乎不是一个好的方向，因此我编写了一个自定义操作，该操作在安装该功能后触发。自定义操作调用一个托管程序集，该程序集通过 xml 文件将更改应用到应用程序 .config 文件。

**自定义操作**

```
#define CO_APPCONFIG_DLL "MyCompany.InstallShield.AppConfig.dll"
#define CO_APPCONFIG_FQNAME "MyCompany.InstallShield.AppConfig.ConfigMgr"

#define CO_APPSETTINGS_NEW "MyApp_AppSettings.xml"
#define CO_APPSETTINGS_CONFIG "MyCompany.IOAnywhere.Dashboard.exe.config"
#define CO_APPSETTINGS_SECTION "CO_dashboard"

//---------------------------------------------------------------------------
// The Installed event is sent after the feature Dashboard
// is installed.
//---------------------------------------------------------------------------
export prototype Dashboard_Installed();
function Dashboard_Installed()
BOOL bResult;
OBJECT oAppConfig;
begin

try
    // Note: the configuration dll is in the support directory
    set oAppConfig = DotNetCoCreateObject(SUPPORTDIR ^ CO_APPCONFIG_DLL, CO_APPCONFIG_FQNAME, "");
catch
    MessageBox("Error Loading" + SUPPORTDIR ^ CO_APPCONFIG_DLL + ": " + Err.Number + " " + Err.Description, INFORMATION); 
    abort;
endcatch;

try
    // Note: the new configuration settings file should be in the same folder as the setup.exe
    bResult = oAppConfig.ConfigureSettings(CO_APPSETTINGS_NEW, TARGETDIR ^ CO_APPSETTINGS_CONFIG, CO_APPSETTINGS_SECTION);
catch
    MessageBox("Verify that the file " + CO_APPSETTINGS_NEW + " exists in the setup directory.  Error calling ConfigureSettings " + SUPPORTDIR ^ CO_APPCONFIG_DLL + " " + Err.Number + " " + Err.Description, INFORMATION);
endcatch;

end; 
```

**调用 DLL**

```
using System;
using System.Xml;

/// <summary>
/// Called by InstallShield Installer process to apply appSettings to an installed applications .config file
/// </summary>
namespace CO.InstallShield.AppConfig
{
    /// <summary>
    /// ConfigMgr is the class that encapsulates functionality related to modifying a .config file
    /// </summary>
    public class ConfigMgr
    {
        /// <summary>
        /// ConfigureSettings applies changes from a common xml file to the applications .config file
        /// </summary>
        /// <remarks>
        /// Ensures required keys for the application are included in the .config file
        /// Applies common settings to the .config file
        /// Applies application specific settings to the .config file
        /// </remarks>
        /// <param name="configFilePath">Path to the xml file that has the setting that need to be applied</param>
        /// <param name="targetAppConfigPath">Path to the .config file for the appliction</param>
        /// <param name="targetAppName">Section in the xml file that has application specific settings</param>
        /// <returns>True if it was able to configure settings</returns>
        public bool ConfigureSettings(string configFilePath, string targetAppConfigPath, string targetAppName)
        {
            bool completed = false;

            try
            {
                XmlDocument configFileDoc = new XmlDocument();
                configFileDoc.Load(configFilePath);

                XmlDocument targetAppConfigDoc = new XmlDocument();
                targetAppConfigDoc.Load(targetAppConfigPath);

                // ensure the appSettings section exists
                AddRequiredSections(ref targetAppConfigDoc);

                // ensure all required keys exist in the target .config file
                AddRequiredKeys(configFileDoc.SelectSingleNode("configuration/" + targetAppName + "/requiredKeys"), ref targetAppConfigDoc);

                // loop through each key in the common section of the configuration file
                AddKeyValues(configFileDoc.SelectSingleNode("configuration/common/appSettings"), ref targetAppConfigDoc);

                // loop through each key in the app specific section of the configuration file - it will override the standard configuration
                AddKeyValues(configFileDoc.SelectSingleNode("configuration/" + targetAppName + "/appSettings"), ref targetAppConfigDoc);

                // save it off
                targetAppConfigDoc.Save(targetAppConfigPath);
            }
            catch (Exception ex)
            {
                throw ex;
            }
            finally
            {
                completed = true;
            }
            return completed;
        }
        private void AddRequiredSections(ref XmlDocument targeAppConfigDoc)
        {
            // Ensure the target .config file has an appSettings section... unusual but evidently possible
            if (targeAppConfigDoc.SelectSingleNode("configuration/appSettings") == null)
                targeAppConfigDoc.SelectSingleNode("configuration").AppendChild(targeAppConfigDoc.CreateNode(XmlNodeType.Element, "appSettings", null));
        }
        private void AddKeyValues(XmlNode configAppNodeSet, ref XmlDocument targetAppConfigDoc)
        {
            if (configAppNodeSet == null) return; // Nothing to do

            foreach (XmlNode configNode in configAppNodeSet.SelectNodes("add"))
            {
                XmlNode targetNode = targetAppConfigDoc.SelectSingleNode("configuration/appSettings/add[@key='" + configNode.Attributes["key"].Value + "']");
                if (targetNode != null)
                {
                    targetNode.Attributes["value"].Value = configNode.Attributes["value"].Value;
                }
            }
        }
        private void AddRequiredKeys(XmlNode targetAppNodeSet, ref XmlDocument targetAppConfigDoc)
        {
            if (targetAppNodeSet == null) return; // Nothing to do

            foreach (XmlNode targetNode in targetAppNodeSet.SelectNodes("key"))
            {
                // add the key if it doesn't already exist
                XmlNode appNode = targetAppConfigDoc.SelectSingleNode("configuration/appSettings/add[@key='" + targetNode.Attributes["value"].Value + "']");
                if (appNode == null)
                {
                    appNode = targetAppConfigDoc.SelectSingleNode("configuration/appSettings");
                    XmlNode newAddNode = targetAppConfigDoc.CreateNode(XmlNodeType.Element, "add", null);
                    XmlAttribute newAddNodeKey = targetAppConfigDoc.CreateAttribute("key");
                    newAddNodeKey.Value = targetNode.Attributes["value"].Value;
                    XmlAttribute newAddNodeValue = targetAppConfigDoc.CreateAttribute("value");
                    newAddNodeValue.Value = "NotSet";
                    newAddNode.Attributes.Append(newAddNodeKey);
                    newAddNode.Attributes.Append(newAddNodeValue);
                    appNode.AppendChild(newAddNode);
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T11:49:35.817

从安装的角度来看，您可以通过遵循记忆属性模式的变体来获得很多这样的信息。通过存储 XML 文件更改引用的属性值，创建一个共享组件，该组件在共享注册表项中注册各种配置信息。使用系统搜索尝试将这些值读回相同或相关安装的后续运行中。但是，这种方法不会更新相关项目中现有的单独配置文件。

为了解决这个问题（尽管您可能会发现单独的配置本身很有用），我建议找到一种方法来引用单个共享配置。这可能是通过使用配置文件的共享目录来实现的。它可能是通过直接引用共享注册表位置并跳过前面描述的 XML 文件更改来实现的。

# python - django 应用程序在 IE 中加载非常慢

> ID：11042970
> 
> 赞同：0
> 
> 时间：2012-06-14T23:57:51.443
> 
> 标签：python, django

我们的 Django 应用程序在 Chrome 中运行没有问题，但在使用 IE 时很烦人。

运行应用程序 using`manage.py runserver`工作正常，但在我们的生产站点中，它非常慢。逐页导航非常慢。

我们如何提高应用在 IE 中的性能？我们已经尝试减少我们的 js 和 css 行并优化我们的 js 和 css 代码，但这并没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T04:51:18.303

Django 不对您的网站在 IE 中运行缓慢负责。可能原因如下：

1）您的页面中可能有大量图像/javascript。使用 YSLOW/PSO 对其进行调试。

2）尝试使用像apache这样的网络服务器而不是django。

# c - 为什么“a && (b = 5/a)”不将“5/a”分配给“b”？

> ID：11042973
> 
> 赞同：4
> 
> 时间：2012-06-14T23:58:17.997
> 
> 标签：c, debugging, boolean, variable-assignment, unsigned

是否`a && (b = 5/a)`分配`5/a`给`b`（对于非零`a`）？

我的朋友说它没有，但我很困惑为什么它不会。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-14T23:59:30.647

你朋友错了。对于非零`a`，该语句`a && (b = 5/a)`会将值分配`5/a`给`b`。

如果`a == 0`，则条件将短路并且不会发生分配。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-14T23:59:40.633

你朋友错了。如果`a`评估为真，则必须评估双方，因为`&&`必须评估双方才能执行正确的操作。 `||`另一方面不会。当然，您可以通过执行代码并检查`b`条件后的值来轻松地自己测试这一点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-15T00:04:37.957

在 C 语言中，如果从逻辑简化的角度来看，评估是有意义的，那么它会提前中断。

IE：

```
if(a && (b=5/a)) 
```

如果 a 为零，则逻辑上，整个语句为零/假，如果您忽略系统错误（即：除以零），则不会评估语句的其余部分（例如：“零且任何等于零” ，那么当我们已经知道最终答案总是为零时，为什么还要计算“和任何东西”部分）。

更好的解决方案是：

```
if(a) {
  b=5/a;
} else {
  b=0;
  printf("ERROR! Attempt to divide by zero would have happened here!");
if(a && b) {
  //Do stuff
} 
```

祝你好运！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-15T00:05:49.957

你朋友说的不对。假设 a 和 b 是整数，那么当 a 为零时 b 保持不变，但当 a 为零时，5 除以 a(int 除法！) ...

'&&' 运算符是短路评估...

使用 gcc 检查了这一点...

# xsd - 在另一个 xsd 中引用不同命名空间的本地元素？

> ID：11042976
> 
> 赞同：0
> 
> 时间：2012-06-14T23:58:52.483
> 
> 标签：xsd

要求是，我只希望 xsd 中定义的一些元素可以作为根元素访问。因此，为此，方法是通过声明复杂类型并引用它们来使所有其他元素成为本地元素。

但是，如果*在另一个 xsd 定义中需要这些*这些不可访问或本地元素，换句话说**，它们可以是属于在不同 xsd 中定义的某个其他命名空间的元素的子元素。

如何实现这种模式定义？

例如在下面说我只希望**A:root 和 custom:root**是有效根而不是**inner:A**，所以我在根元素下声明了 innerA 并引用了类型，而 A:innerA 可以在元素下？

我无法在 B.xsd 中定义 innerA，bcz**它将使 innerA 位于 B.xsd 的 targetnamespace 即 custom namespace**中。

例如

a.xsd

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified"
    targetNamespace="http://www.abc.com/custom"
    xmlns:A="http://www.abc.com/A" 
    xmlns:custom="http://www.abc.com/custom">
<xsd:import namespace="http://www.abc.com/custom"
        schemaLocation="B.xsd"/>

<xsd:complexType name="innerType">
   <xsd:sequence>
      <xsd:element name="abc" type="xs:string"/>
   </xsd:sequence>
</xsd:complexType>

<xsd:element name="root">
        <xsd:complexType mixed="true">
            <xsd:choice>
                <xsd:element ref="custom:root">
                 <xsd:element name="innerA" type="A:innerType"/>
            </xsd:choice>
        </xsd:complexType>
</xsd:element> 
```

B.xsd

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified"
    targetNamespace="http://www.abc.com/custom"
    xmlns:A="http://www.abc.com/A" 
    xmlns:custom="http://www.abc.com/custom">
<xsd:import namespace="http://www.abc.com/A"
        schemaLocation="A.xsd"/>
    <xsd:element name="root">
        <xsd:complexType mixed="true">
            <xsd:sequence>
                <xsd:element ref="A:innerA"/>
            </xsd:sequence>
        </xsd:complexType>
   </xsd:element> 
```

**上面 B.xsd 中的最后第四行导致错误。如何引用 innerA 元素。有什么建议吗？**

XML

```
 <A:root xmlns:A="http://www.abc.com/a" xmlns:custom="http://www.abc.com/custom"
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation=""http://www.abc.com/a "http://www.abc.com/a/A.xsd">
    <custom:root>
       <A:innerA>
          <A:abc>
       </A:innerA>
    </custom:root>
    </A:hello> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T00:27:08.803

简单的回答，您不能引用本地声明的元素（想想 Java 或 C# 中的私有元素）。如果它是全局的，那么它可以是文档中的根元素。防止全局成为根元素的唯一方法是在您的验证程序中实现一个扩展，该扩展将检查根元素是什么。如果你想让你的方法通用，你可以使用 appinfo。

假设您使用的是 .NET。在使用 XML 之前，您可以检查文档元素的限定名称以查看它是否在允许列表中。您可以在单独的配置文件中配置此列表，也可以使用 XSD 本身。要验证 XML，无论如何都必须在 XmlSchemaSet 中编译 XSD；因此，如果您在 appinfo 中使用了一些标记，那么您可以访问所有全局元素，检查该标记，并在找到时将该元素的限定名称添加到我上面提到的列表中。

如果是 Java，你可以做类似的事情。

如果您正在处理一种不支持模式对象模型的语言，那么您可以将 XSD 处理为 XML 文件。这样做的问题是它变得复杂，因为您必须遍历包含/导入，基本上您最终将自己处理解决外部引用。

您必须记住的一件事是，如果您最终使用不属于您的 XSD，但这些 XSD 使用全局元素，那么您对 ​​appinfo 无能为力。您坚持使用预先配置的列表。

没有链接，因为这是我自己对您的问题的想法。相反，如果您正在寻找有关 appinfo 的文档，那么试试[这个](http://www.w3.org/TR/xmlschema-1/#cAnnotations)。

# java - java.awt.Robot.waitForIdle() 是否等待分派事件？

> ID：11042979
> 
> 赞同：9
> 
> 时间：2012-06-14T23:59:30.600
> 
> 标签：java, swing, awt, awtrobot

我正在使用`java.awt.Robot`我的 Swing 应用程序的集成测试，但我无法以正确的顺序运行我的操作。`robot.mousePressed(...)`在 Swing 完成调度该事件之前，我如何告诉调用阻塞的线程？显然，`robot.setAutoWaitForIdle(true)`没有什么好处。

这是我的演示。我期待“机器人完成！” 消息总是在“操作完成阻止。”之后出现，但它通常发生得太快。

```
import java.awt.AWTException;
import java.awt.GraphicsConfiguration;
import java.awt.GraphicsDevice;
import java.awt.GraphicsEnvironment;
import java.awt.Point;
import java.awt.Rectangle;
import java.awt.Robot;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.InputEvent;
import java.sql.Date;
import java.text.DateFormat;
import java.util.logging.ConsoleHandler;
import java.util.logging.Formatter;
import java.util.logging.LogManager;
import java.util.logging.LogRecord;
import java.util.logging.Logger;

import javax.swing.GroupLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.SwingUtilities;
import javax.swing.WindowConstants;

public class RobotWaitForIdleDemo {
    /**
     * Create the device that contains the given point in screen coordinates.
     * Robot has to be constructed differently for each monitor.
     */
    public static GraphicsDevice getDevice(Point p) {
        GraphicsEnvironment ge = GraphicsEnvironment.getLocalGraphicsEnvironment();
        GraphicsDevice[] gs = ge.getScreenDevices();

        // Search the devices for the one that draws the specified point.
        for (GraphicsDevice device : gs) {
            GraphicsConfiguration configuration = device.getDefaultConfiguration();
            Rectangle bounds = configuration.getBounds();
            if (bounds.contains(p)) {
                return device;
            }
        }
        return null;
    }
    public static final Logger logger = Logger.getLogger(RobotWaitForIdleDemo.class.getName());
    public static void main(String[] args) {
        LogManager.getLogManager().reset();
        Formatter formatter = new Formatter() {
            @Override
            public String format(LogRecord arg0) {
                Date date = new Date(arg0.getMillis());
                DateFormat.getTimeInstance().format(date);
                return String.format("%s %s %s %s%n",
                        DateFormat.getTimeInstance().format(date),
                        arg0.getLoggerName(),
                        arg0.getLevel(),
                        arg0.getMessage());
            }
        };
        ConsoleHandler consoleHandler = new ConsoleHandler();
        consoleHandler.setFormatter(formatter);
        logger.addHandler(consoleHandler);

        final JFrame jframe = new JFrame("Robot experiment");
        GroupLayout groupLayout = new GroupLayout(jframe.getContentPane());

        final JButton jbutton = new JButton("Click me!");
        jbutton.addActionListener(new ActionListener() {
            @Override public void actionPerformed(ActionEvent e) {
                // Simulate a heavy Swing event handler.
                logger.info("(swing thread) Action starting to block...");
                try {
                    Thread.sleep(500);
                } catch (InterruptedException e1) {}
                logger.info("(swing thread) Action finished blocking.");
            }
        });

        JButton tryAgainBUtton = new JButton("Automatically click above button.");
        tryAgainBUtton.addActionListener(new ActionListener() {
            @Override public void actionPerformed(ActionEvent e) {
                new Thread(new Runnable() {
                    @Override public void run() {
                        try {
                            Point point = new Point(jbutton.getWidth()/2,jbutton.getHeight()/2);
                            SwingUtilities.convertPointToScreen(point, jbutton);
                            GraphicsDevice device = getDevice(point);
                            Point offset = device.getDefaultConfiguration().getBounds().getLocation();

                            Robot robot = new Robot(device);
                            robot.setAutoWaitForIdle(true);
                            robot.setAutoDelay(30);

                            robot.mouseMove(point.x - offset.x, point.y - offset.y);
                            String threadName = Thread.currentThread().getName();
                            logger.info(String.format("(%s) robot.mousePress(%d)", threadName, InputEvent.BUTTON1_MASK));
                            robot.mousePress(InputEvent.BUTTON1_MASK);
                            logger.info(String.format("(%s) robot.mouseRelease(%d)", threadName, InputEvent.BUTTON1_MASK));
                            robot.mouseRelease(InputEvent.BUTTON1_MASK);
                            logger.info(String.format("(%s) robot finished!", threadName, InputEvent.BUTTON1_MASK));
                        } catch (AWTException ex) {
                            ex.printStackTrace();
                        }
                    }
                }, "robot thread").start();
            }
        });

        jframe.getContentPane().setLayout(groupLayout);
        groupLayout.setAutoCreateGaps(true);
        groupLayout.setAutoCreateContainerGaps(true);
        groupLayout.setVerticalGroup(
                groupLayout.createSequentialGroup()
                    .addComponent(jbutton)
                    .addComponent(tryAgainBUtton));
        groupLayout.setHorizontalGroup(
                groupLayout.createParallelGroup()
                    .addComponent(jbutton)
                    .addComponent(tryAgainBUtton)                           );

        jframe.setSize(300, 300);
        jframe.setVisible(true);
        jframe.setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
    }
} 
```

我在 Ubuntu 上运行 Java 1.6。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-15T00:25:15.050

也许这个可以帮助你，注意没有在 Java7 中测试

[您可以在isEventDispatchThread()](https://stackoverflow.com/a/10770381/714968)的每个步骤中进行测试

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import sun.awt.SunToolkit;

public class TestMenu {

    /**
     * Without a delay, SunToolkit may encounter a problem in SunToolkit (at
     * least in JDK 6, where the drop down size problem is not present).
     * 
     * Note: SunToolkit also has some mechanism to delay, but I forgot how it
     * worked.
     * 
     * <pre>
     * Exception in thread "main" sun.awt.SunToolkit$InfiniteLoop
     *         at sun.awt.SunToolkit.realSync(Unknown Source)
     *         at TestMenu.syncAndDelay(TestMenu.java:172)
     *         at TestMenu.click(TestMenu.java:88)
     *         at TestMenu.moveAndClickCenter(TestMenu.java:150)
     *         at TestMenu.main(TestMenu.java:45)
     * </pre>
     * 
     * As a bonus, the delay makes the scenario better visible for the human
     * eye.
     */
    private static int delay = 500;
    private static JMenu[] menus = new JMenu[5];
    private static Dimension[] parentSizes;
    private static Robot robot;
    private static SunToolkit toolkit;

    public static void main(String[] args) throws Exception {
        robot = new Robot();
        toolkit = (SunToolkit) Toolkit.getDefaultToolkit();
        parentSizes = new Dimension[menus.length];
        createGUI(); // Open the first menu. Then get the drop down size of all menu's
        moveAndClickCenter(menus[0]);
        for (int index = 0; index < menus.length; index++) {
            parentSizes[index] = getDropDownSize(index);
        }// Click the last item on the last menu.        
        Component item = menus[menus.length - 1].getMenuComponent(menus[menus.length - 1].getMenuComponentCount() - 1);
        moveAndClickCenter(item);
        // Open the last drop down again. Then get the drop down sizes once more. If size not equal to previous size, then it's a bug.
        boolean bug = false;
        moveAndClickCenter(menus[menus.length - 1]);
        for (int index = menus.length - 1; index >= 0; index--) {
            Dimension currentSize = getDropDownSize(index);
            System.out.print("old: " + parentSizes[index] + ", new: " + currentSize);
            if (!parentSizes[index].equals(currentSize)) {
                bug = true;
                System.out.println(" ERROR");
            } else {
                System.out.println();
            }
        }
        if (bug) {
            throw new RuntimeException("JMenu drop down size is changed for no reason.");
        }

    }

    private static Dimension getDropDownSize(int index) throws Exception {
        moveToCenter(menus[index]);
        return menus[index].getMenuComponent(0).getParent().getSize();
    }

    private static void click() throws Exception {
        robot.mousePress(InputEvent.BUTTON1_MASK);
        robot.mouseRelease(InputEvent.BUTTON1_MASK);
        syncAndDelay();
    }

    private static void createGUI() throws Exception {

        SwingUtilities.invokeAndWait(new Runnable() {

            @Override
            public void run() {
                UIManager.LookAndFeelInfo[] infos = UIManager.getInstalledLookAndFeels();// The L&F defines the drop down policy.
                for (final UIManager.LookAndFeelInfo info : infos) {
                    if (info.getName().toLowerCase().indexOf("metal") >= 0) {
                        if (!UIManager.getLookAndFeel().getName().equals(info.getName())) {
                            try {
                                UIManager.setLookAndFeel(info.getClassName());
                                System.out.println("Attempt to set look and feel to " + info.getName());
                            } catch (Exception e) {
                                e.printStackTrace();
                            }
                        } else {
                            System.out.println("Metal look and feel is the default");
                        }
                        break;
                    }
                }
                System.out.println("Testing with " + UIManager.getLookAndFeel().getName());  // Setup the GUI.
                JFrame frame = new JFrame("A frame");
                frame.setJMenuBar(new JMenuBar());
                for (int menuIndex = 0; menuIndex < menus.length; menuIndex++) {
                    menus[menuIndex] = new JMenu("Menu " + menuIndex);
                    frame.getJMenuBar().add(menus[menuIndex]);
                    for (int itemIndex = 0; itemIndex <= menus.length - menuIndex; itemIndex++) {
                        // It seems that the problem only occurs if the drop down is displayed outside the frame at the right
                        // (not sure though). A rather long item name.
                        JMenuItem item = new JMenuItem("Menu " + menuIndex + " item " + itemIndex);
                        menus[menuIndex].add(item);
                    }
                }
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
        syncAndDelay();
    }

    private static void moveAndClickCenter(Component c) throws Exception {
        moveToCenter(c);
        click();
    }

    private static void moveToCenter(final Component c) throws Exception {
        final Point cp = new Point();
        SwingUtilities.invokeAndWait(new Runnable() {

            @Override
            public void run() {
                Point p = new Point(c.getWidth() / 2, c.getHeight() / 2);
                SwingUtilities.convertPointToScreen(p, c);
                cp.setLocation(p);
            }
        });
        robot.mouseMove(cp.x, cp.y);
        syncAndDelay();
    }

    private static void syncAndDelay() throws Exception {
        if (delay > 0) {
            Thread.sleep(delay);
        }
        toolkit.realSync();
    }

    private TestMenu() {
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T16:57:42.677

mKorbel 的答案 ( `SunToolkit.realSync()`) 是正确的，但`realSync`速度很慢并且会抛出`SunToolkit.InfiniteLoop`. 我在学习后最终使用了这个变体`realSync`：

```
import java.awt.Toolkit;
import java.lang.reflect.InvocationTargetException;
import java.lang.reflect.Method;
import java.util.Arrays;
import java.util.List;

import javax.swing.SwingUtilities;

import sun.awt.SunToolkit;

public class ToolkitUtils {
    private Method syncNativeQueue;
    private boolean isSyncNativeQueueZeroArguments;
    public ToolkitUtils() {
        syncNativeQueue = null;
        isSyncNativeQueueZeroArguments = true;
        try {
            // Since it's a protected method, we have to iterate over declared
            // methods and setAccessible.
            Method[] methods = SunToolkit.class.getDeclaredMethods();
            for (Method method: methods) {
                String name = method.getName();
                if ("syncNativeQueue".equals(name)) {
                    List<Class<?>> parameterTypes = Arrays.asList(method.getParameterTypes());
                    if (Arrays.<Class<?>>asList(long.class).equals(parameterTypes)) {
                        isSyncNativeQueueZeroArguments = false;
                    } else if (parameterTypes.isEmpty() && null == syncNativeQueue) {
                        isSyncNativeQueueZeroArguments = true;
                    } else {
                        continue;
                    }
                    syncNativeQueue = method;
                    syncNativeQueue.setAccessible(true);
                }
            }
        } catch (SecurityException e) {
            throw new RuntimeException(e);
        }
        if (syncNativeQueue == null)
            throw new IllegalStateException("Could not find method SunToolkit.syncNativeQueue.");
    }

    /**
     * Block until Swing has dispatched events caused by the Robot or user.
     * 
     * <p>
     * It is based on {@link SunToolkit#realSync()}. Use that method if you want
     * to try to wait for everything to settle down (e.g. if an event listener
     * calls {@link java.awt.Component#requestFocus()},
     * {@link SwingUtilities#invokeLater(Runnable)}, or
     * {@link javax.swing.Timer}, realSync will block until all of those are
     * done, or throw exception after trying). The disadvantage of realSync is
     * that it throws {@link SunToolkit.InfiniteLoop} when the queues don't
     * become idle after 20 tries.
     * 
     * <p>
     * Use this method if you only want to wait until the direct event listeners
     * have been called. For example, if you need to simulate a user click
     * followed by a stream input, then you can ensure that they will reach the
     * program under test in the right order:
     * 
     * <pre>
     * robot.mousePress(InputEvent.BUTTON1);
     * toolkitUtils.flushInputEvents(10000);
     * writer.write("done with press");
     * </pre>
     * 
     * @see {@link java.awt.Robot#waitForIdle()} is no good; does not wait for
     *      OS input events to get to the Java process.
     * @see {@link SunToolkit#realSync()} tries 20 times to wait for queues to
     *      settle and then throws exception. In contrast, flushInputEvents does
     *      not wait for queues to settle, just to flush what's already on them
     *      once.
     * @see {@link java.awt.Toolkit#sync()} flushes graphics pipeline but not
     *      input events.
     * 
     * @param syncNativeQueueTimeout
     *            timeout to use for syncNativeQueue. Something like 10000 is
     *            reasonable.
     */
    public void flushInputEvents(long syncNativeQueueTimeout) {
        SunToolkit toolkit = (SunToolkit) Toolkit.getDefaultToolkit();

        // 1) SunToolkit.syncNativeQueue: block until the operating system
        // delivers Robot or user events to the process.
        try {
            if (isSyncNativeQueueZeroArguments) {
                // java 1.6
                syncNativeQueue.invoke(toolkit);
            } else {
                // java 1.7
                syncNativeQueue.invoke(toolkit, syncNativeQueueTimeout);
            }
        } catch (IllegalArgumentException e) {
            throw new RuntimeException(e);
        } catch (IllegalAccessException e) {
            throw new RuntimeException(e);
        } catch (InvocationTargetException e) {
            throw new RuntimeException(e);
        }

        // 2) SunToolkit.flushPendingEvents: block until the Toolkit thread
        // (aka AWT-XAWT, AWT-AppKit, or AWT-Windows) delivers enqueued events
        // to the EventQueue
        SunToolkit.flushPendingEvents();

        // 3) SwingUtilities.invokeAndWait: block until the Swing thread (aka
        // AWT-EventQueue-0) has dispatched all the enqueued input events.
        try {
            SwingUtilities.invokeAndWait(new Runnable(){
                @Override public void run() {}});
        } catch (InterruptedException e) {
            throw new RuntimeException(e);
        } catch (InvocationTargetException e) {
            throw new RuntimeException(e);
        }
    }
} 
```

# asp.net - 使用 base64 编码使 asp.net formsauth cookie 更小

> ID：11042982
> 
> 赞同：2
> 
> 时间：2012-06-14T23:59:46.210
> 
> 标签：asp.net, cookies, forms-authentication, base64

我现在正在使用带有 asp.net Web 应用程序的内置 FormsAuthentication，并且我在 cookie 中添加了一些额外的信息，这导致 cookie 大小“合理”大，约为 500B。这不是很大，但它有可能变得更大，我不喜欢在每个请求之上的这种开销。

默认情况下，formauth cookie 以十六进制编码...

我想知道是否有一种干净的方法可以覆盖 ASP.NET 中的方法或某些东西，这样我就可以将 cookie 编码更改为 base64 而不会产生太多开销。

归根结底，我可以创建自己的类来执行所有身份验证，但我喜欢使用 asp.net 为角色提供者和成员提供者提供内置功能。

有没有人有任何想法或有人尝试过这个？谢谢。

# php - Facebook Graph API 视频上传权限

> ID：11042988
> 
> 赞同：1
> 
> 时间：2012-06-15T00:00:39.923
> 
> 标签：php, facebook, facebook-graph-api, video, permissions

我正在开发一个与 Facebook 集成的应用程序，以发布视频，然后将这些视频显示在我们在 FB 之外的应用程序上。

我们有一个应用程序的 Facebook 页面，通过 FB Graph API (PHP) 上传/发布到 FB 页面的流/时间线/专辑，在上传视频、将隐私设置为公共并将故事发布到时间线时效果非常好. （我已经测试了通过应用程序的测试用户发布的非页面管理员。一切都很好。）

但是，我们想做的是从应用程序发布到用户的相册，并明确设置该视频的隐私，以便可以通过我们的应用程序访问该视频，以便在 Facebook 之外的应用程序中显示。

目前，如果我发布到自己的个人资料（使用对 /me/videos 的 POST 请求；我被列为应用管理员），视频会按预期上传，但视频的隐私设置为“仅限我”，并且我无法通过 Graph API 访问要在网站上显示的视频。

可以在这里做我想做的事吗？以下是我用来上传到用户个人资料的基本代码：

```
$this->facebook->setFileUploadSupport(true);

$upload = $this->facebook->api('/me/videos', 'POST', array(
    'source' => '@'.$file,
    'title' => $title,
    'description' => $description,
    'privacy' => json_encode(array( 'value' => 'EVERYONE' ))
)); 
```

如您所见，我正在尝试通过“隐私”参数（omgrly？）设置隐私。这似乎没有按预期设置隐私（？）。

预先感谢您的帮助！

编辑：我知道这个默认的最大权限是在应用程序首次通过身份验证时设置的。我想知道的是这些隐私设置是否可以在每个帖子的基础上进行更改。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-16T00:17:35.927

据我所知，个人帖子的隐私值不能增加到任何比 Facebook Connect 身份验证对话框中选择的“更公开”的值。