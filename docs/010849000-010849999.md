# StackOverflow 问答 10849000-10849999

# php - PHP 中的数据库连接 - 意外错误

> ID：10849002
> 
> 赞同：-3
> 
> 时间：2012-06-01T10:58:43.387
> 
> 标签：php, sql, connection, database-connection, connection-string

以下是我试图在其中创建数据库连接的代码。请参阅下面的代码中的注释，其中我提到了问题发生的确切位置。此外，我还提到了一个运行良好的连接代码。

请让我知道如何调用 my `dbconfig.php`，以便它的行为类似于导致成功连接的那段代码。

谢谢

```
<?php

//Including Header file for the connectivity to the database
require_once('Connections/dbconfig.php');

  mysql_select_db($database_dbconfig, $dbconfig);
  // If I use the following line of code for connectivity then it works perfectly fine:
  //$dbh = new PDO('mysql:host=localhost;dbname=rare','root','');
  $dbh= $dbconfig;
  $q = 'select resident_id,u_first,u_last from z_events group by resident_id';
  /*
  The following error will occur when I try to make a connection from the header file:
  Fatal error: Call to a member function prepare() on a non-object in C:\Users\QAD\Downloads\CAR\index12 - Copy.php on line 200 
  */
  $user = $dbh->prepare($q);
  $user->execute();
?> 
```

**数据库配置文件**

```
<?php
# FileName="Connection_php_mysql.htm"
# Type="MYSQL"
# HTTP="true"
$hostname_dbconfig = "localhost";
$database_dbconfig = "rare";
$username_dbconfig = "root";
$password_dbconfig = "";
$dbconfig = mysql_pconnect($hostname_dbconfig, $username_dbconfig, $password_dbconfig) or trigger_error(mysql_error(),E_USER_ERROR); 
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T11:04:43.637

您将 mysql_* 函数与 PDO 函数混合使用 - 首先使用 mysql_connect 连接到您的数据库，然后使用 prepare() 查询您的数据库。

您应该完全移至 PDO，替换此行：

```
$dbconfig = mysql_pconnect($hostname_dbconfig, $username_dbconfig, $password_dbconfig) or trigger_error(mysql_error(),E_USER_ERROR); 
```

有了这个：

```
$dbconfig = new PDO('mysql:dbname=' . $database_dbconfig . ';host=127.0.0.1', $username_dbconfig, $password_dbconfig); 
```

并将其放入您的另一个文件中：

```
<?php

//Including Header file for the conectivity to the database
require_once('Connections/dbconfig.php');

  $dbh = $dbconfig;
  $q = 'select resident_id,u_first,u_last from z_events group by resident_id';
  $user = $dbh->prepare($q);
  $user->execute();
?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-19T06:30:03.210

**试试这个**

```
$connection = mysql_connect("localhost","root","") or die(mysql_error());
$db = mysql_select_db("database_name") or die(mysql_error()); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-01T11:04:56.680

将您的数据库选择更改为此

```
mysql_select_db($database_dbconfig); 
```

# css - 如何在 Gxt 3.0 中更改 TextButton 样式

> ID：10849009
> 
> 赞同：2
> 
> 时间：2012-06-01T10:59:12.637
> 
> 标签：css, gxt

我想更改文本按钮的样式，就像我想添加背景图片一样，我想使用 GXT 3.0 更改背景颜色

有人帮我plzzz

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-05T11:17:30.213

GXT 3 有一种更简洁的方式来处理这些要求。您必须使用 Sencha 3 中提供的 Appearance API。这是此过程中涉及的关键点。

*   外观接口、实现和替换
*   使用 CssResource 进行样式设置
*   使用 ClientBundle 获取 css 资源
*   XTemplates 将样式/属性应用于标记

在这种情况下，您需要做的是实现 TextButtonCell 的外观（因为 TextButton 使用 TextButtonCell 作为外观）并使用 css 样式资源提供所需的样式（将实际的 .css 文件路径注释为源）。例如

```
 public interface TextButtonResources extends ClientBundle 
     { 
            @Source("TextButton.css")
            Style style();
     } 
```

然后将内置的 TextButtonCell 外观替换为您的外观。

```
<replace-with class="fullyQualifiedNameToYourButtonCellAppearanceClass">
        <when-type-is class="com.sencha.gxt.cell.core.client.ButtonCell.ButtonCellAppearance" />
    </replace-with> 
```

这篇博文详细介绍了这个概念 [Ext GWT 3.0 外观设计](http://www.sencha.com/blog/ext-gwt-3-appearance-design/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T21:02:02.870

首先，您在客户端 java 代码中设置此样式：

```
aButton.addStyleName("my_button_style"); 
```

或者，您可以使用 setStyleName() 方法，甚至可以使用 setStyleAttribute() 更改特定的样式属性。

在客户端 java 代码中完成此操作后，您可以在为页面加载的 css 文件中定义样式。

您还可以在组件渲染后更改样式。它应该正确刷新按钮的外观。

# javascript - HTML / CSS 选项卡式导航

> ID：10849010
> 
> 赞同：0
> 
> 时间：2012-06-01T10:59:16.567
> 
> 标签：javascript, html, css, twitter-bootstrap

我正在开发一个用户可以打开标签的应用程序。请注意，我使用的是 Bootstrap CSS 框架，它也有一个选项卡插件。（如果我需要更灵活的方法，我可以使用不同的库来完成这项工作。）

[http://twitter.github.com/bootstrap/javascript.html#tabs](http://twitter.github.com/bootstrap/javascript.html#tabs)

我需要的是为标签提供灵活的宽度。它应该像 Chrome/Firefox 的标签一样工作。如果选项卡的总宽度小于栏的宽度，它应该按原样工作。但是，如果它比条的宽度长，则每个选项卡宽度的大小应该相等地减小。（如果你使用 chrome/firefox 打开 10-20 个标签，你就会明白我的意思）

有没有简单的方法可以做到这一点，而不使用 javascript？我想到的唯一解决方案是使用 javascript 获取栏的内部宽度，并获取其他选项卡的宽度并将它们总结起来。如果总和更高，那么我可以调整每个选项卡的大小。

我可以实现这个解决方案，但我担心很难确保跨浏览器的兼容性。有没有更简单的方法来实现这一目标？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T15:31:46.687

您可以在渲染后调整`nav nav-tabs li`元素的宽度。

计算有多少选项卡以其正常大小适合父元素，并将每个选项卡减少超过最大数量的每个选项卡的单个选项卡宽度的百分比。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T16:00:41.160

您不需要 JavaScript，只要您可以依赖一种使宽度适应其内容的 CSS 算法：**表格布局**算法 :)

有关示例，请参见我[之前的答案中的](https://stackoverflow.com/questions/10525744/css-table-cell-equal-width/10526275#10526275)[http://jsfiddle.net/r9yrM/1/ 。](http://jsfiddle.net/r9yrM/1/)

不要忘记在每个“单元格”上都有一个最小的填充，粘在边框上的文本不是很可读（而且很难看）。

使用 JS，您可以决定选项卡的最大数量（或最小的“合理”宽度）以及高于（低于）该数量，在父级上添加一个类，该类将触发每个选项卡呈现为`float: left`和`block`不再呈现`table-cell`。然后它将占据 2 行或更多行（如Firefox 上的扩展*Tab Mix Plus ）*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-31T07:49:44.577

我今天尝试解决同样的问题......也许我的解决方案可以帮助你更多：[http ://www.da3x.de/blog/flexible-tab-panel-with-overlapping-elements/](http://www.da3x.de/blog/flexible-tab-panel-with-overlapping-elements/)

它仅使用 HTML + CSS……到目前为止还没有 JS。但我认为我需要一些 JS 来对浏览器窗口的实际宽度做出反应。

# html - div元素的高度没有自动设置

> ID：10849011
> 
> 赞同：1
> 
> 时间：2012-06-01T10:59:27.840
> 
> 标签：html, css

```
 .block    
               {
                width:540px;
                margin:20px;
                padding:10px;
                border:1px solid Gray;
               }

              <div id="header" class="block">
                <div id="pe" class="text">
                  <b>Name :</b> <span>King</span><br />
                  <b>Surname :</b> <span>Kong</span>
                </div>
                <div id="area" class="text">
                  <span id="city">Abcs</span><b>/</b>
                  <span id="state">Bcsdf</span>
                </div>
              </div>​ 
```

如果你在 Jsfiddle 中运行上面的代码，那么它会显示 a`border around the text`和`the important thing is that`，`height of the block class is auto`所以它会自动调整它的高度。

但是当我添加以下 css 时问题就来了：

```
 #pe
 {
  float:left;
 }
 #area
 {
   float:right;
 }​ 
```

现在的高度`div.block`不是自动设置的。谁能告诉我这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:09:46.113

添加浮动：左；在你的块类中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T11:04:22.127

因为 float 将它们从当前流中取出。它们不在块 div 中的位置，使用定位和显示：内联让它们按照你想要的方式排列

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T11:04:27.667

您可以使用绝对定位，其中外部元素设置为 height:auto，内部 #pe 和 #area 设置为 height:100%。

看看这个答案：[How to make a floated div 100% height of its parent?](https://stackoverflow.com/a/3050064/977431)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T11:05:22.060

那是因为它们不再是文档通用流程的一部分。

解决方案可能是`display: block`在块类中设置，然后通过使用和`position: absolute`在该块中定位元素`left: 0``right: 0`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-01T11:07:40.680

只需添加溢出：隐藏到类“块”。

```
 .block{
   width:540px;
   margin:20px;
   padding:10px;
   border:1px solid Gray;
   overflow:hidden;
 } 
```

这是小提琴：http: [//jsfiddle.net/rWuBF/](http://jsfiddle.net/rWuBF/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-01T11:07:56.567

我将添加`overflow:hidden`到包含元素 ( `#header`)。那应该解决它。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-01T12:01:52.927

现在你需要一个 Clearfix

```
.clearfix:after{
clear:both;
line-height:0;
height:0;
display:block;
background-color:transparent;
border:none;
content: ".";
visibility:hidden;
 }

html[xmlns] .clearfix {
display: block;
}

* html .clearfix {
height: 1%;
 } 
```

你像这样添加它

```
"<div id = "header" class="block clearfix"></div>" 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-01T11:15:00.953

虽然有点脏，但您也可以在浮动元素之后添加一些清除两者的内容。

```
<div id="header" class="block">
  <div id="pe" class="text"> ... </div>

  <div id="area" class="text"> ... </div>

  <div style="clear:both;"></div>
</div> 
```

还有更清晰的“clearfix”变体，这将使您清楚：两者都无需添加非语义标记。 [http://www.positioniseverything.net/easyclearing.html](http://www.positioniseverything.net/easyclearing.html)

# session - tomcat7下如何关闭会话共享？

> ID：10849015
> 
> 赞同：0
> 
> 时间：2012-06-01T10:59:49.110
> 
> 标签：session, tomcat, session-cookies, tomcat7

我在tomcat中有两个主机：

```
<Host name="host1.domain.com" .../>
<Host name="host2.domain.com" .../> 
```

我发现当我登录host1时，它会在会话中保存一个“USER_ID”，host2也可以在会话中获得一个“USER_ID”。

这是否意味着tomcat7将在a下共享会话？

那么如何禁用它，我不希望他们共享会话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T19:02:49.560

每个 webapp 都有自己的一组会话，它们不与任何其他 webapp 重叠。即使同一个 webapp 已经部署了两次（一次在 host1 下，一次在 host2 下），它们也被认为是不同的，并且不会共享会话。

# php - 使用 PHP 的数组值生成自定义 HTML 表单

> ID：10849021
> 
> 赞同：1
> 
> 时间：2012-06-01T11:00:20.663
> 
> 标签：php, html, arrays, forms

**问题：**

我正在尝试使用 PHP 在数组中的值的帮助下生成自定义 HTML 表单。

**PHP 代码**（**$row['Key'] 将包含 W、B 和 R**）：

```
$numbers[$row['Key']] = array (
                            'C' => 
                                array (
                                    'BO' => $row['BO'], 
                                    'BT' => $row['BT']),
                            'D' => 
                                array (
                                    'MF' => $row['MF'], 
                                    'MT' => $row['MT'])
                        ); 
```

**使用 PHP 生成的数组：**

```
Array
(
    [W] => Array
        (
            [C] => Array
                (
                    [BO] => 36
                    [BT] => 63
                )
            [D] => Array
                (
                    [MF] => 54
                    [MT] => 63
                )
        )

    [B] => Array
        (
            [C] => Array
                (
                    [BO] => 60
                    [BT] => 105
                )
            [D] => Array
                (
                    [MF] => 90
                    [MT] => 105
                )
        )

    [R] => Array
        (
            [C] => Array
                (
                    [BO] => 12
                    [BT] => 21
                )
            [D] => Array
                (
                    [MF] => 18
                    [MT] => 24
                )
        )
) 
```

**结果应如下所示。注意 W/B/R 和 BO/BT/MF/MT 的组合。**

```
<table>
    <tbody>
        <tr>
            <td>W</td>
            <td><input type="text" name="WBO" id="WBO" value="36"></td>
            <td><input type="text" name="WBT" id="WBT" value="63"></td>
            <td><input type="text" name="WMF" id="WMF" value="54"></td>
            <td><input type="text" name="WMT" id="WMT" value="63"></td>
        </tr>
        <tr>
            <td>B</td>
            <td><input type="text" name="BBO" id="BBO" value="60"></td>
            <td><input type="text" name="BBT" id="BBT" value="105"></td>
            <td><input type="text" name="BMF" id="BMF" value="90"></td>
            <td><input type="text" name="BMT" id="BMT" value="105"></td>
        </tr>
        <tr>
            <td>R</td>
            <td><input type="text" name="RBO" id="RBO" value="12"></td>
            <td><input type="text" name="RBT" id="RBT" value="21"></td>
            <td><input type="text" name="RMF" id="RMF" value="18"></td>
            <td><input type="text" name="RMT" id="RMT" value="24"></td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T11:03:07.363

[http://php.net/manual/en/control-structures.foreach.php](http://php.net/manual/en/control-structures.foreach.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-08T07:14:31.100

不使用 3 个 foreach 循环

```
$var = print_r($numbers, true);

$table =  preg_replace_callback(
            "{.*?[^ ][ ]{4}\[(\S+)\].*?[^ ][ ]{8}\)}s",
            "func",
            $var);
$table= preg_replace('{\n[^<].*}','',$table);   

echo "<table>{$table}</table>"; 
```

功能：（计算空间以查找数组级别）

```
function func($matches)
{
  $table='';
  $k=$matches[1];
  $t=$matches[0];

  $tr = preg_replace('{.*?[^ ][ ]{20}\[(\S+)\].*?=>.*?(\S+)}s',PHP_EOL."<td><input type='text' id='{$k}$1' name='{$k}$1' value='$2'></td>",$t);

  $table .= "<tr>".PHP_EOL;
  $table .= "<td>{$k}<td>{$tr}".PHP_EOL;
  $table .= "</tr>".PHP_EOL;
   return  $table;
} 
```

回声

```
<table><tr>
<td>W<td>
<td><input type='text' id='WBO' name='WBO' value='36'></td>
<td><input type='text' id='WBT' name='WBT' value='63'></td>
<td><input type='text' id='WMF' name='WMF' value='54'></td>
<td><input type='text' id='WMT' name='WMT' value='63'></td>
</tr>
<tr>
<td>B<td>
<td><input type='text' id='BBO' name='BBO' value='60'></td>
<td><input type='text' id='BBT' name='BBT' value='105'></td>
<td><input type='text' id='BMF' name='BMF' value='90'></td>
<td><input type='text' id='BMT' name='BMT' value='105'></td>
</tr>
</table> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T11:25:44.003

Should be fairly easy to step through this array with `foreach()`.

```
[ghoti@pc ~]$ cat doit.php 
#!/usr/local/bin/php
<?php
printf("<table>\n  <tbody>\n");

$numbers=array(
  'W' => array(
    'C' => array( 'BO' => 36, 'BT' => 63),
    'D' => array( 'MF' => 54, 'MT' => 63),
  ),
  'B' => array(
    'C' => array( 'BO' => 60, 'BT' => 105),
    'D' => array( 'MF' => 90, 'MT' => 105),
  ),
);

$fmt1 = "\t<tr>\n"
     . "\t\t<td>%s</td>\n"
     . "%s"
     . "\t</tr>\n";

$fmt2 = "\t\t<td><input type='text' name='%s%s' id='%s%s' value='%s'></td>\n";

foreach ($numbers as $index1 => $line1) {
  foreach ($line1 as $index2 => $line2) {
    foreach ($line2 as $index3 => $value) {
      $output .= sprintf($fmt2, $index1, $index3, $index1, $index3, $value);
    }
  }
  printf($fmt1, $index1, $output);
  $output = "";
}

printf("  </tbody>\n</table>\n"); 
```

And the output:

```
[ghoti@pc ~]$ ./doit.php
<table>
  <tbody>
        <tr>
                <td>W</td>
                <td><input type='text' name='WBO' id='WBO' value='36'></td>
                <td><input type='text' name='WBT' id='WBT' value='63'></td>
                <td><input type='text' name='WMF' id='WMF' value='54'></td>
                <td><input type='text' name='WMT' id='WMT' value='63'></td>
        </tr>
        <tr>
                <td>B</td>
                <td><input type='text' name='BBO' id='BBO' value='60'></td>
                <td><input type='text' name='BBT' id='BBT' value='105'></td>
                <td><input type='text' name='BMF' id='BMF' value='90'></td>
                <td><input type='text' name='BMT' id='BMT' value='105'></td>
        </tr>
  </tbody>
</table>
[ghoti@pc ~]$ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T11:20:48.053

这个？

```
echo "<table><tbody>";
foreach((array)$numbers as $key=>$val) {
   echo "<tr><td>".$key."</td>";
   foreach((array)$val as $key2=>$val2) {
      foreach((array)$val2 as $key3=>$val3) {
         echo '<td><input type="text" name="'.$key.$key3.'" id="'.$key.$key3.'" value="'.$val3.'"></td>';
      }
   }
   echo "</tr>";
}
echo "</tbody></table>"; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-01T12:10:38.797

检查这个代码老兄。

```
<table>
    <tbody>
        <?php
            foreach($numbers as $key=>$sarray){
                echo "<tr>";
                    echo "<td>$key</td>";
                    foreach($sarray as $key1=>$sarray1){
                        foreach($sarray1 as $fname=>$fvalue){
                            echo '<td><input type="text" name="'.$fname.'" id="'.$fname.'" value="'.$fvalue.'"></td>';
                        }
                    }
                echo "</tr>";
            }
        ?>
    </tbody>
</table> 
```

# mysql - 如何关联mysql中的多个表

> ID：10849022
> 
> 赞同：0
> 
> 时间：2012-06-01T11:00:21.463
> 
> 标签：mysql, optimization, query-optimization

我有 5 张桌子。那是

## 主表

```
id int(11)=>primary key auto increment,
name varchar(255) 
```

## 子表1

```
id int(11)=>primary key auto increment,
mainid int(11),
field1 varchar(255),
field2 varchar(255) 
```

## 子表2

```
id int(11)=>primary key auto increment,
mainid int(11),
field3 varchar(255),
field4 varchar(255) 
```

## 子表3

```
id int(11)=>primary key auto increment,
mainid int(11),
field5 varchar(255),
field6 varchar(255) 
```

## 子表4

```
id int(11)=>primary key auto increment,
mainid int(11),
field7 varchar(255),
field8 varchar(255) 
```

这里的 mainid 是所有表的共同点。我想在一页中显示所有表格字段...在该页面中，我们将名称作为输入...每个表格包含大约 50 万条记录..

我如何有效地为上述情况编写查询？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:11:37.500

如果您只想从所有表中选择所有字段而不进行任何过滤，那么使用 INNER JOINS 相对简单。

例如 ...

```
SELECT * FROM maintable INNER JOIN subtable1 ON subtable1.mainid = maintable.id INNER JOIN subtable2 ON subtable2.mainid = maintableid ... 
```

ETC

希望有帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T07:25:38.067

```
SELECT
  mmaintable.colnames,
  subtable1.colnames,
  subtable2.colnames,
  subtable3.colnames,
  subtable4.colnames
FROM maintable
  LEFT JOIN subtable1
    ON subtable1.mainid = maintable.id
  LEFT JOIN subtable2
    ON subtable2.mainid = maintable.id 
      LEFT JOIN subtable3
    ON subtable3.mainid = maintable.id 
      LEFT JOIN subtable4
    ON subtable4.mainid = maintable.id 
```

# sql - SQL如何将ROWS转换为COLUMNS和COLUMNS TO ROWS？数据库2

> ID：10849023
> 
> 赞同：0
> 
> 时间：2012-06-01T11:00:25.287
> 
> 标签：sql, db2, rows

我有一个在 DB2 中运行良好的 SQL 查询我的结果是

```
SERVICE   IN   OUT   INPROGRESS

ADSL      1     5      10
VOIP      15    12     11
IPTV      20    14     17 
```

现在我想把它改成这样：

```
CLASS       ADSL   VOIP   IPTV

IN           1     5      10
OUT          15    12     11
INPROGRESS   20    14     17 
```

尽管我的 SQL 看起来很简单，但我从未改变过它。如果有人知道，我将不胜感激。

我的 SQL 是

```
select  distinct 'ADSL' as SERVICE,

(select count(*) as In from ticket 
where 
(class='C1'  and
(servicesinfault='25'))),

(select count(*) as Out from ticket
where 
(class='C2' and
(servicesinfault='25'))),

(select count(*) as In_progress from ticket
where 
(class='C3' and
(servicesinfault='25')))

from ticket where servicesinfault = '25'

union all

select  distinct 'VoIP',

(select count(*) from ticket 
where
(class='C1'  and
(servicesinfault='26'))),

(select count(*) from ticket
where
(class='C2'  and
(servicesinfault='26'))),

(select count(*) from ticket
where 
(class='C3'  and
(servicesinfault='26')))

from ticket where servicesinfault = '26'

union all

select  distinct 'IPTV',

(select count(*) from ticket 

where 
(class='C1'  and
(ticket.servicesinfault='27'))),

(select count(*) from ticket
where 
(class='C2'  and
(servicesinfault='27'))),

(select count(*) from ticket
where 
(class='C3'  and
(servicesinfault='27')))

from ticket where servicesinfault = '27' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:20:21.270

就像备注一样，您的结果应该是：

```
CLASS       ADSL   VOIP   IPTV

IN           1     15     20
OUT          5     12     14
INPROGRESS   10    11     17 
```

旋转的版本应该是这样的：

```
select distinct 'In' as CLASS,

                (select count(*) as 'ADSL'
                   from ticket
                  where (class = 'C1' and (servicesinfault = '25'))),

                (select count(*) as 'VoIP'
                   from ticket
                  where (class = 'C1' and (servicesinfault = '26'))),

                (select count(*) as 'IPTV'
                   from ticket
                  where (class = 'C1' and (servicesinfault = '27')))

  from ticket
 where class = 'C1'

union all

select distinct 'Out',

                (select count(*)
                   from ticket
                  where (class = 'C2' and (servicesinfault = '25'))),

                (select count(*)
                   from ticket
                  where (class = 'C2' and (servicesinfault = '26'))),

                (select count(*)
                   from ticket
                  where (class = 'C2' and (servicesinfault = '27')))

  from ticket
 where class = 'C2'

union all

select distinct 'InProgress',

                (select count(*)
                   from ticket

                  where (class = 'C3' and (ticket.servicesinfault = '25'))),

                (select count(*)
                   from ticket
                  where (class = 'C3' and (servicesinfault = '26'))),

                (select count(*)
                   from ticket
                  where (class = 'C3' and (servicesinfault = '27')))

  from ticket
 where class = 'C3' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:15:45.920

您要查找的词是“PIVOT”。

如果您的 DBMS 不提供，您可以使用“穷人的支点”。

看看 usr 对这个问题的回答：

[穷人的 SQL 枢轴。将问题列为列并在一行中列出每个用户的答案](https://stackoverflow.com/questions/3924641/poor-mans-sql-pivot-list-questions-as-columns-and-answers-per-user-in-one-row)

# iphone - 无法在 UIWebView 中查看 .pages 文件

> ID：10849024
> 
> 赞同：0
> 
> 时间：2012-06-01T11:00:33.710
> 
> 标签：iphone, objective-c, ios, xcode, uiwebview

我`myUniqueWebView`在我的应用程序中调用的 UIWebView 中加载了一个 Test.pages 文件，但我收到了这个错误

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', 
reason: '*** -[NSURL initFileURLWithPath:]: nil string parameter' 
```

我正在使用此代码

```
-(void)loadDocument:(NSString*)documentName inView:(UIWebView*)webView
{
    NSString *path = [[NSBundle mainBundle] pathForResource:@"Test" ofType:nil];
    NSURL *url = [NSURL fileURLWithPath:path];
    NSURLRequest *request = [NSURLRequest requestWithURL:url];
    [webView loadRequest:request];
} 
```

而这段代码在`viewDidLoad`

```
[self loadDocument:@"Test.pages" inView:self.myUniqueWebView]; 
```

任何想法为什么它不起作用？我正在我的设备上测试它。提前致谢！

编辑：

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"Test" ofType:@"pages"]; 
```

不起作用，如果我压缩文件，它只会加载一个空的 UIWebView

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:37:17.640

看看这个链接。这可能是你的[答案](http://developer.apple.com/library/ios/#qa/qa1630/_index.html)。但似乎你必须压缩它才能在 UIWebView 中查看文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:53:15.193

我已经尝试了一切，只成功地查看了 PDF 文件。这非常令人失望，但事实就是如此。

# asp.net - Asp.Net 多文件上传

> ID：10849027
> 
> 赞同：1
> 
> 时间：2012-06-01T11:00:36.380
> 
> 标签：asp.net, vb.net, image-uploading, multi-upload

我已经设置了一个 asp.net 多文件上传，它可以工作，但不是我期望的那样。

在我的页面上，我有 2 个像这样的图片上传器

```
<input type="file" id="gallery" class="multi" accept="jpg" runat="server" />

<input type="file" id="pic1" accept="jpg" runat="server" /> 
```

我的问题是当我上传它时使用此代码

```
Dim hfc As HttpFileCollection = Request.Files 
```

要获取所有已发布的文件，但我只想要`gallery`此特定方法的图像。

我有不同的方法来上传我的其他图片。

我尝试将其更改为以下

```
Dim hfc As HttpFileCollection = Request.Files("gallery") 
```

但我得到一个错误

> “System.Web.HttpPostedFile”类型的值无法转换为“System.Web.HttpFileCollection”。

有什么想法可以做到这一点吗？

谢谢

**编辑**

这是我正在使用的完整代码

```
Dim hfc As HttpFileCollection = Request.Files("gallery")
For i As Integer = 0 To hfc.Count - 1
Dim hpf As HttpPostedFile = hfc(i)
If hpf.ContentLength > 0 Then
    hpf.SaveAs(Server.MapPath("/images/" & i & ".jpg"))
End If
Next i 
```

当我使用下面答案中的代码时，我收到一条错误消息

> “Count”不是“System.Web.HttpPostedFile”的成员。

**编辑 2**

这适用于上传我的所有图片

```
Dim hfc As HttpFileCollection = Request.Files
For i As Integer = 0 To hfc.Count - 1
Dim hpf As HttpPostedFile = hfc(i)
If hpf.ContentLength > 0 Then
hpf.SaveAs(Server.MapPath("/images/" & i & ".jpg"))
End If
Next i 
```

但它会上传每张图片 - 我只想让它上传从

`<input type="file" id="gallery" class="multi" accept="jpg" runat="server" />`

而不是这个

```
<input type="file" id="pic1" accept="jpg" runat="server" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T18:06:51.037

`Request.Files("gallery")`无效，因为它是属性而不是方法。

您可以通过请求 PostedFile 值从 Gallery 输入中获取 Posted 文件，然后像您所做的那样保存到文件系统。

```
Dim hfc As System.Web.HttpPostedFile = gallery.PostedFile
If hpf.ContentLength > 0 Then
   hpf.SaveAs(Server.MapPath("/images/GalleryImage.jpg"))
End If 
```

您显然可以将文件名设置为任何您想要的名称。

# iphone - 手动同步 iCloud

> ID：10849029
> 
> 赞同：4
> 
> 时间：2012-06-01T11:00:43.423
> 
> 标签：iphone, ios, core-data, icloud, ios5

我正在 iphone 中开发数据管理应用程序，在应用程序中，我正在使用核心数据（如姓名地址、联系方式等）保存一组数据。

现在我只想在用户想要同步的情况下将现有数据同步到 iCloud，另一方面我想导入 iCloud 上的所有数据，只有当用户想要其他应用程序应该与本地应用程序数据一起工作时，我才能完成这样的工作在 iCloud 上手动导入导出操作？

一些菜单，例如“从 iCloud 同步”和“同步到 iCloud”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-02T06:58:18.333

你的问题很笼统。

作为第一步，我建议您观看以下 WWDC 会议视频：

1.  WWDC2012：第 209 场会议 - **iCloud 存储概述**
2.  WWDC2012：第 227 场会议 -**将 iCloud 与 Core Data 结合使用**
3.  WWDC2011：第 116 场会议 -**使用 iOS5 在 iCloud 中存储文档**（简要了解 UIManagedDocument）。

# ruby-on-rails - 如何使 URL 路由像“web.com/user-name”

> ID：10849031
> 
> 赞同：1
> 
> 时间：2012-06-01T11:00:58.110
> 
> 标签：ruby-on-rails, routes, url-routing

我在 Rails 3.2 中有一个基本应用程序 - 两个主要控制器：**用户**和**文章**。基本路由类似于**web.com/users/john**和**web.com/articles/articles-name**。

使用**匹配**规则，我可以使上面的 URL 更短：

```
match "u/:permalink" => "users#my_action_name"
match "a/:permalink" => "articles#my_action_name" 
```

请允许我做 **web.com/u/john**和**web.com/a/articles-name**

但以最好的方式，我想让 URL 更短且更具可读性，就像这样（这种方式使用例如 Twitter - **twitter.com/username**） **web.com/john**和**web.com/articles-name**

但我无法想象，如何实现这种路由方式。在应用程序中还使用了另一个控制器，例如**HomeController**与 action **index**、**about**、**contact**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:27:18.770

前段时间我想知道同样的事情，并在[路由指南](http://guides.rubyonrails.org/routing.html)中找到了答案。

您的问题可以分两步回答：

1) 第一步是覆盖`to_param`模型中的方法以获得更漂亮的 URL。以[这个问题](https://stackoverflow.com/questions/4732779/pretty-paths-in-rails)为例。你也可以使用像 FriendlyId 这样的 gem（看看这个[截屏视频](http://railscasts.com/episodes/314-pretty-urls-with-friendlyid?view=asciicast)）。

2）然后您必须`:path`在文件中使用该选项`routes.rb`。因此，例如，如果你想拥有像“example.com/3214-a-blog-post”这样的 URL，你应该像这样声明你的资源：

```
resources :posts, :path => "/" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T11:29:22.230

查看官方 Rails 指南的“ [Route Globbing](http://guides.rubyonrails.org/routing.html#route-globbing) ”部分。你需要添加类似的东西

```
match '*users_or_articles' => 'agnostic#show' 
```

在`config/routes.rb`文件的末尾。这将捕获到目前为止在您的路由文件中找不到匹配器的所有请求。然后您的控制器必须确定如何处理该请求。

# css - 为内联元素添加“清除”效果

> ID：10849032
> 
> 赞同：0
> 
> 时间：2012-06-01T11:01:06.380
> 
> 标签：css

我想知道您是否可以将清除样式效果应用于一堆内联元素？

我的问题是我正在使用一组同级 div 元素，因此我无法将任何类型的块显示应用于容器或父元素。

这是有问题的代码（不幸的是，HTML 无法更改，只有 CSS）：

```
<div class="form-item form-type-checkbox form-item-alert-option-1">...</div>
Send alert
<div class="form-item form-type-select form-item-alert-time-period-1">...</div>
day(s) from completion date
<div class="form-item form-type-checkbox form-item-alert-option-2">...</div>
Send alert
<div class="form-item form-type-select form-item-alert-time-period-2">...</div>
day(s) from completion date 
```

请注意，“...”标记所在的位置还有进一步的输入和标签内容，但它太大且与问题无关。

我申请的 CSS 是：

```
.form-item {
    display: inline;
} 
```

在上面的示例中，我想要一个由每个班级编号表示的新行，“1、2 等”。

在不改变 HTML 的情况下这是否可行？

非常感谢任何输入，

瑞克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:16:30.193

我不确定我是否得到了您想要实现的目标，以及为什么必须将 div 显示为内联元素，但您可以尝试使用 inline-block：

```
.form-item {
    display: inline-block;
    clear: both;
} 
```

否则你为什么不只是漂浮：离开它们并清除它们？

```
.form-item {
    float: left;
    clear: both;
} 
```

没有测试它，所以它可能不起作用。如果您可以详细说明为什么将 div 显示为内联元素，那将有所帮助！谢谢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-19T14:27:23.770

您可以使用伪块元素清除 Inline-Element

```
.form-item {
  display: inline;
}
.clear-before::before {
    content:' ';
    display: block;
    height: 0;
    border-bottom:1px solid red;
}
```

```
<div class="form-item form-type-checkbox form-item-alert-option-1">[[Form]]</div>
Send alert
<div class="form-item form-type-select form-item-alert-time-period-1">[[Form item]]</div>
day(s) from completion date
<div class="form-item form-type-checkbox form-item-alert-option-2 clear-before">[[New Line Form Element]].</div>
Send alert
<div class="form-item form-type-select form-item-alert-time-period-2">[[Form Element]]</div>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T11:06:18.313

您可以使用 jQuery append 将文本添加到每个 div。

[附加（）](http://api.jquery.com/append/)

# ios - 如何在运行时在 iPad 中调用第二个 XIB？

> ID：10849033
> 
> 赞同：0
> 
> 时间：2012-06-01T11:01:14.010
> 
> 标签：ios, ipad, mpmovieplayercontroller, xib

在我的应用程序中，我使用 MPMoviePlayerController 在我的第一类 XIB 中运行视频。我的视频持续时间约为 20 秒。我希望当我的视频结束时它自动调用第二类 XIB。这是我的代码。

```
 -(void)viewWillAppear:(BOOL)animated
       {
         NSString *urlStr = [[NSBundle mainBundle] pathForResource:@"3idiots.mov" ofType:nil];
         NSURL *url = [NSURL fileURLWithPath:urlStr];
         videoPlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];
         [self.view addSubview:videoPlayer.view];
         videoPlayer.view.frame = CGRectMake(0, 0,768, 1000);  
         [videoPlayer play];
         [self performSelector:@selector(gotonextview)];

         }
      -(void)gotonextview
        {
         secondview *sec=[[secondview alloc] initWithNibName:@"secondview" bundle:nil];
         [self presentModalViewController:sec animated:YES];
         [sec release];

        } 
```

这段代码给我没有错误，但在视频完成后它不会调用第二类。任何人都可以指导我。提前感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T11:19:24.747

这在文档中都有解释……iOS版本之间的行为也不同。

不要从 viewWillAppear 调用 gotonextview。而是将您的视图控制器注册为 viewDidLoad 中 MPMoviePlayerPlaybackDidFinishNotification 和 MPMoviePlayerDidExitFullscreenNotification 的观察者，并使用 gotonextview:(NSNotification *)notification 作为选择器。

另外，我建议您从 viewDidAppear 而不是 viewWillAppear 启动电影播放器​​。

编辑：改编的原始海报代码（未经测试）...

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(gotonextview:) name:MPMoviePlayerPlaybackDidFinishNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(gotonextview:) name:MPMoviePlayerDidExitFullscreenNotification object:nil];
}

-(void)viewDidAppear:(BOOL)animated
{
    NSString *urlStr = [[NSBundle mainBundle] pathForResource:@"3idiots.mov" ofType:nil];
    NSURL *url = [NSURL fileURLWithPath:urlStr];
    videoPlayer = [[MPMoviePlayerController alloc] initWithContentURL:url];
    [self.view addSubview:videoPlayer.view];
    videoPlayer.view.frame = CGRectMake(0, 0,768, 1000);  
    [videoPlayer play];
}

-(void)gotonextview:(NSNotification *)notification
{
    NSDictionary *notifDict = notification.userInfo; // Please refer Apple's docs for using information provided in this dictionary

    secondview *sec=[[secondview alloc] initWithNibName:@"secondview" bundle:nil];
    [self presentModalViewController:sec animated:YES];
    [sec release];

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:32:38.713

更好的方法是使用 Timer 或向视频播放器注册事件侦听器。

示例可以在[http://mobiledevelopertips.com/cocoa/basics-of-notifications.html下找到](http://mobiledevelopertips.com/cocoa/basics-of-notifications.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T11:13:46.630

一种选择是：

使用带有两个选项卡的 tabBarController。将您的视频放在一个选项卡中，并将您的“第二个视图”放在第二个选项卡中。然后使用

```
self.tabBarController.selectedIndex=2; 
```

# java - Seam中参数值的评估

> ID：10849036
> 
> 赞同：1
> 
> 时间：2012-06-01T11:01:40.327
> 
> 标签：java, jsf, xhtml, attributes, seam

在 af:attribute 我用来计算值，但我看到它仅在调用时才计算。
我需要使用可视化期间消耗的变量来指定值，因此如果它要求的值不在 f:attribute 引用的组件的生产期间，则该值将不正确。
我希望正确地说明我的问题。如何强制评估属性值？

如果有人回答我，谢谢！
xhtml是：

```
<rich:scrollableDataTable
        value="#{myBean.getScrollData(frm,sez)}"
        var="eachRow"
        rows="20"
    >
<rich:columns value="#{sez.getElements()}" var="info"
            index="index" sortable="false"
            >
<h:inputText id="txtf#{info.getId()}" value="#{eachRow.data[info]}"
    valueChangeListener="#{myBean.handle}"
    >
    <f:attribute name="xxx" value="#{eachRow.getId()}"/>
</h:inputText>
</rich:columns>
</rich:scrollableDataTable> 
```

myBean java是：

```
public void handle(ValueChangeEvent e){
    Object value = e.getNewValue();
    if ((value==null || value.equals("")) && e.getOldValue()==null) return;
    String xxx = e.getComponent().getAttributes().get("xxx").toString();
    System.out.println("handle("+xxx+","+value+")");
} 
```

ScrollData java 是：

```
private String id="";
public String getId(){ return id;} 
```

id 是从 DB 读取的 ScrollData 的属性。

我看到 xxx 值仅在发布期间检查，因此 eachRow 位于表的最后一条记录上......这是错误的。
在 DataTable 中不使用此机制时可以正常工作，并且我看到在创建页面期间调用了 getId() 方法（这是正确的）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T13:05:46.950

这是预期的行为。这`<f:attribute>`是一个标签处理程序，它与它的单个父 UIComponent 绑定并在视图构建期间进行处理。实际上，当要基于 XHTML 标记解析 JSF UI 组件时，会评估和应用所有标记处理程序。在您的情况下，JSF 组件树仅包含一个`<h:inputText>`组件，该组件在视图渲染期间的每次行迭代中都被重用。在视图渲染期间不会重新`<f:attribute>`评估**。**所以它仍然只保留在视图构建期间可用的值，即它包含`null`.

无论如何，有几种方法可以实现功能要求，其中一种是通过在值更改侦听器方法中以`#{eachRow}`编程方式进行评估。[`Application#evaluateExpressionGet()`](http://docs.oracle.com/javaee/6/api/javax/faces/application/Application.html#evaluateExpressionGet%28javax.faces.context.FacesContext,%20java.lang.String,%20java.lang.Class%29)

```
public void handle(ValueChangeEvent e) {
    FacesContext context = FacesContext.getCurrentInstance();
    EachRow eachRow = context.getApplication().evaluateExpressionGet(context, "#{eachRow}", EachRow.class);
    // ...
} 
```

### 也可以看看：

*   [JSF2 Facelets 中的 JSTL...有意义吗？](https://stackoverflow.com/questions/3342984/jstl-in-jsf2-facelets-makes-sense)（同样的答案适用于`<f:attribute>`）。
*   [如何将选定的行传递给 dataTable 中的 commandLink？](https://stackoverflow.com/questions/4994458/how-can-i-pass-a-parameter-to-a-commandlink-inside-a-datatable)

# backbone.js - 主干/骨干关系应用程序中的视图 + 子视图

> ID：10849040
> 
> 赞同：2
> 
> 时间：2012-06-01T11:01:55.510
> 
> 标签：backbone.js, backbone-events, backbone-relational, backbone-views

我通过阅读 stackexchange 学习了很多关于骨干、骨干关系和构建 Web 应用程序的知识 - 所以首先感谢社区。

现在，我一直在试图理解这个当前涉及嵌套模型和子视图的问题，在我看来这是一个非常常见的用例。

我正在尝试通过跟踪每种葡萄酒的“CheckIns”来扩展本[教程](http://coenraets.org/blog/2011/12/backbone-js-wine-cellar-tutorial-part-1-getting-started/)以了解主干关系、视图/子视图和事件处理。

我已经扩展了服务器端来为 checkIns 返回适当的 JSON 和骨干关系模型，如下所示：

```
window.CheckInModel = Backbone.RelationalModel.extend({
  defaults:{
        "_id":null,
        "Did":"true",
        "dateOf":"",
        }
});

window.CheckInCollection = Backbone.Collection.extend({
    model : CheckInModel
}); 
```

葡萄酒模型是这样的：

```
relations: [{
 type: Backbone.HasMany, 
 key:'CheckIn',
 relatedModel: 'CheckInModel',
 collectionType: CheckInCollection,
     }] 
```

我创建了一个 CheckInListView 和 CheckInItemView（与 WineListView 和 WineListItemView 相同）并使用 WineView Render 函数来呈现 CheckIns，如下所示：

```
render:function (eventName) {
    console.log("wine View Render");
    $(this.el).html(this.template(this.model.toJSON()));

    this.myCheckInListView = new CheckInListView({model: this.model.attributes.CheckIn}); 
    this.$el.append(this.myCheckInListView.render().el);
    return this;
}, 
```

我还在 wineview 中创建了一个新函数，该函数创建一个签入并与给定事件相关联：

```
logcheckin: function (event){
  var todate = new Date();
  newCheckIn = new CheckInModel ({'Did':"true", 'dateOf': todate.toISOString()});
  console.log ("Logcheckin - About to push newCheckIn onto Model.");
  this.model.attributes.CheckIn.push (newCheckIn); 
  console.log ("Just pushed newCheckIn onto Model.");
  this.saveWine(); 
```

}

好的 - 如果你还没有 TL/DRed - 从 UI 的角度来看，这一切似乎都可以正常工作 - 即。一切都正确呈现并保存到 Db。

但是我在控制台中注意到，当我推送一个新的 CheckIn（在上面的 console.logs 之间）时，CheckInListView 的 Add 绑定被多次调用以按下 wach 按钮 - 这让我觉得我的视图有问题或者那个我不了解有关事件传播的基本知识。

为什么会这样？这是预期的行为吗？我是否正在接近我正在尝试正确做的事情？

如果不是您的帮助，请感谢您的阅读。

==

以下是绑定到添加（和其他）事件的 CheckinListView 和 CheckInList Item 视图的相关部分。

```
window.CheckInListView = Backbone.View.extend({

        initialize:function () {
        this.model.bind("reset", this.render, this);
        this.model.bind("change", this.render, this);
        var self = this;
        this.model.bind("add", function (CheckIn) {
           console.log ("Adding to CheckInListView - a CheckIn List Item", CheckIn);
           self.$el.append(new CheckInListItemView({model:CheckIn}).render().el);
        });
    },  

       close:function () {
        $(this.el).unbind();
        $(this.el).remove();
    }
});

window.CheckInListItemView = Backbone.View.extend({

    initialize:function () {
        this.model.bind("change", this.render, this);
        this.model.bind("destroy", this.close, this);
    },

}); 
```

===============================================

关于事件绑定和关闭视图的注释是调试它的正确提示。

1) 我没有正确关闭和取消绑定嵌套视图，这留下了一些幽灵事件消费者，即使 DOM 中没有任何内容

2）如果我们只想在子视图中做某事，您只需要绑定事件。
例如 - 如果我在子视图中有复选框，我可以在主视图中绑定子视图更改事件并在那里处理事件，因为无论如何主视图都有模型。我不知道这是否是“正确”的方式，但它适用于我需要做的事情。（mm .. 意大利面条代码味道很好）

3) 努力解决这个问题帮助我对 UX 进行了更多思考，并帮助我简化了 UI。

4）我试图通过将所有数据嵌套到 JSON 调用中来“保存”对服务器的调用。如果我要重新执行此操作 - 我根本不会嵌套数据，而是通过将葡萄酒 ID 与 checkIn ID 关联起来在后端处理它，然后有一个单独的集合，一旦选择任务，该集合就会填充该集合- 我认为这不是首选方式，但它似乎是很多人的方式。

仍然欢迎对上述“正确”方式问题的任何想法，或者是否有人可以指出超出“简单主干应用程序”的教程

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T15:46:51.330

我不确定正在发生的所有事情，但是，我之前遇到过多次触发事件的问题。如果您使用同一个视图渲染多个模型，则它们有可能都绑定到同一个事件。

也许这个答案可能适用： [使用骨干网清理视图？](https://stackoverflow.com/questions/9079491/cleaning-views-with-backbone-js/9139131#9139131)

如果没有，您应该回复 Edward M Smith 的评论并展示您的活动是如何被绑定的。

# android - 无法在我的 Android 应用中播放 mp4 视频

> ID：10849044
> 
> 赞同：4
> 
> 时间：2012-06-01T11:02:20.660
> 
> 标签：android, android-mediaplayer

我非常想在我的 android 应用程序中播放 mp4 视频。我什至为它写了一些代码：

```
String sourceUrl = "http://tvstream.cn.ru/storage/1kanal/20120530/"
       + "1kanal-20120530-01-14-00-20120530-03-16-00.mp4";

final VideoView videoView = (VideoView) findViewById(R.id.videoView);
getWindow().setFormat(PixelFormat.TRANSLUCENT);

final MediaController mediaController = new MediaController(this);
mediaController.setMediaPlayer(videoView);
videoView.setMediaController(mediaController);
videoView.setVideoURI(Uri.parse(sourceUrl));

videoView.setOnPreparedListener(new OnPreparedListener() {

    public void onPrepared(MediaPlayer mp) {
        videoView.requestFocus();
        videoView.start();
        mediaController.show();
    }
}); 
```

但是没有任何效果:(当我在模拟器（Android 2.3.3）中启动我的应用程序时，我有一些奇怪的堆栈跟踪和一些常见的错误代码：

经过几个小时的谷歌搜索和实验后，我决定尝试在真实设备上启动我的应用程序并观看 logcat：

```
D/test.tv.activity.PlayerActivity( 3428): Player source: http://tvstream.cn.ru/storage/1kanal/20120530/1kanal-20120530-01-14-00-20120530-03-16-00.mp4
D/VideoView( 3428): onMeasure()
I/VideoView( 3428):     Setting size: 320x430
I/Launcher(  260): onWindowFocusChanged(false)
D/Launcher(  260): setWallpaperDimension() called
D/Launcher(  260): USE_NON_SCROLLABLE_IMAGE_WALLPAPER is true
I/ActivityManager(  163): Start proc org.reactivephone for broadcast org.reactivephone/ru.yandex.common.clid.ClidBroadcastReceiver: pid=3448 uid=10073 gids={1015, 3003}
I/ActivityManager(  163): No longer want com.sec.android.provider.badge (pid 2310): hidden #16
I/MediaPlayer( 3428): uri is:http://tvstream.cn.ru/storage/1kanal/20120530/1kanal-20120530-01-14-00-20120530-03-16-00.mp4
I/MediaPlayer( 3428): path is null
D/MediaPlayer( 3428): Couldn't open file on client side, trying server side
D/Launcher(  260): It's image wallpaper. suggestDesiredDimensions(-1,-1)
I/ActivityManager(  163): Displayed test.tv/.activity.PlayerActivity: +943ms
D/VideoView( 3428): onMeasure()
I/VideoView( 3428):     Setting size: 320x430
W/dalvikvm( 3406): threadid=5: spin on suspend #1 threadid=22 (pcf=0)
W/dalvikvm( 3406): threadid=5: spin on suspend resolved in 1154 msec
W/SearchableInfo(  163): Invalid searchable metadata for org.reactivephone/.ui.RegionForm: Search label must be a resource reference.
I/ActivityManager(  163): Start proc com.google.android.googlequicksearchbox for broadcast com.google.android.googlequicksearchbox/.SourceUpdateReceiver: pid=3457 uid=10027 gids={3003}
I/WindowOrientationListener(  163): orientation 295.6932 gives new rotation = 2
I/OrientationDebug(  163): [pwm] in MyOrientationListener.onOrientationChanged() rotation=3  mFancyRotationAnimation=0   now call mWindowManager.setRotation()
I/OrientationDebug(  163): [wms] in setRotation() rotation=3 alwaysSendConfiguration=false animFlags=0
I/OrientationDebug(  163): [wms] in setRotation() now call setRotationUnchecked()
I/WindowManager(  163): Setting rotation to 3, animFlags=0
I/ActivityManager(  163): Config changed: { scale=1.0 imsi=250/1 loc=ru_RU touch=3 keys=1/1/2 nav=1/1 orien=2 layout=18 uiMode=17 seq=7}
D/PhoneApp(  241): updateProximitySensorMode: lock already released.
I/ActivityThread( 3457): Pub com.google.android.googlequicksearchbox.shortcuts: com.google.android.googlequicksearchbox.WebHistoryProvider
I/ActivityThread( 3457): Pub com.google.android.googlequicksearchbox.google: com.google.android.googlequicksearchbox.google.GoogleSuggestionProvider
I/ActivityManager(  163): No longer want com.sec.android.widgetapp.clockweather.clockwidget (pid 1214): hidden #16
D/Finsky  ( 3406): [1] 2.run: Loaded library for account: [Y091GklnFtI4Ab1gmLOw-nJkJXQ]
D/Finsky  ( 3406): [1] 2.run: Finished loading 1 libraries.
W/dalvikvm( 3406): VFY: unable to resolve instance field 78
D/DfeApi  ( 3406): [1] DfeApiContext.getSmallestScreenWidthDp: smallestScreenWidthDp does not exist, using pre-ics hack.
E/QCvdec  (   95): Setparameter: unknown param 2130706451
W/TimedEventQueue(   95): Event 3 was not found in the queue, already cancelled?
E/QCvdec  (   95): Omx Flush issued when vdec is not initialized yet.
W/QCvdec  (   95): ======================================================================
W/QCvdec  (   95):                    Open Max Statistics                                
W/QCvdec  (   95): ======================================================================
W/QCvdec  (   95): empty this buffer rate = NaN
W/QCvdec  (   95): empty this buffer total time = 0
W/QCvdec  (   95): empty this buffer count = 0
W/QCvdec  (   95): ======================================================================
D/test.tv.activity.PlayerActivity( 3428): Player source: http://tvstream.cn.ru/storage/1kanal/20120530/1kanal-20120530-01-14-00-20120530-03-16-00.mp4
D/VideoView( 3428): onMeasure()
I/VideoView( 3428):     Setting size: 480x270
I/MediaPlayer( 3428): uri is:http://tvstream.cn.ru/storage/1kanal/20120530/1kanal-20120530-01-14-00-20120530-03-16-00.mp4
I/MediaPlayer( 3428): path is null
D/MediaPlayer( 3428): Couldn't open file on client side, trying server side
D/VideoView( 3428): onMeasure()
I/VideoView( 3428):     Setting size: 480x270
D/WifiService(  163): [mPersistState] : On
D/BatteryService(  163): update start
D/BatteryService(  163): update start
D/BatteryService(  163): update start
E/QCvdec  (   95): Setparameter: unknown param 2130706451
I/VideoView( 3428): start()
D/WifiService(  163): [mPersistState] : On
D/WifiService(  163): [mPersistState] : On
D/WifiWatchdogService(  163): (android.server.ServerThread) wntk (1c:af:f7:2e:7f:c8) does not require the watchdog
E/QCvdec  (   95): Unsupported profile, level, or widht, height
E/QCvdec  (   95): Unsupported clip
E/QCvdec  (   95): Unsupported profile, level, or widht, height
E/QCvdec  (   95): Unsupported clip
E/QCvdec  (   95): Omx Flush issued when vdec is not initialized yet.
E/QCvdec  (   95): Omx Flush issued when vdec is not initialized yet.
E/QCvdec  (   95): Empty this buffer in Invalid State
E/OMXCodec(   95): [OMX.qcom.video.decoder.avc] ERROR(0x8000100a, 0)
E/OMXCodec(   95): [OMX.qcom.video.decoder.avc] ERROR(0x8000100a, 0)
E/OMXCodec(   95): read : mState[9] is wrong...
E/MediaPlayer( 3428): error (1, -2147483648)
E/OMXCodec(   95): [OMX.qcom.video.decoder.avc] ERROR(0x8000100a, 0)
E/QCvdec  (   95): Omx Flush issued when vdec is not initialized yet.
D/VideoView( 3428): onMeasure()
I/VideoView( 3428):     Setting size: 335x270
I/VideoView( 3428): start()
E/MediaPlayer( 3428): start called in state 0
E/MediaPlayer( 3428): error (-38, 0)
E/MediaPlayer( 3428): Error (1,-2147483648)
D/VideoView( 3428): Error: 1,-2147483648
E/MediaPlayer( 3428): Error (-38,0)
D/VideoView( 3428): Error: -38,0
D/PowerManagerService(  163): reactivateScreenLocksLocked mProxIgnoredBecauseScreenTurnedOff=false
I/PowerManagerService(  163): Ulight 1->3|0
W/InputManagerService(  163): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@40873ab8
I/PowerManagerService(  163): Light Animator Finished curIntValue=141
D/Finsky  ( 3406): [1] 5.onFinished: Installation state replication succeeded.
D/BatteryService(  163): update start
D/BatteryService(  163): update start
D/BatteryService(  163): update start 
```

我尝试查找有关“OMX.qcom.video.decoder.avc] ERROR(0x8000100a, 0)”的内容，但没有发现任何有趣的内容。关于“无法在客户端打开文件，尝试服务器端”问题 stackoverflow 有很多答案，但没有人帮助。

当我在 ICS（在模拟器中）上启动这个应用程序时，我遇到了类似的错误：

```
06-01 10:22:14.674: I/NuCachedSource2(37): ERROR_END_OF_STREAM
06-01 10:22:15.375: I/OMXCodec(37): [OMX.google.h264.decoder] AVC profile = 100 (High), level = 30
06-01 10:22:15.384: I/OMXCodec(37): [OMX.google.h264.decoder] video dimensions are 320 x 240
06-01 10:22:15.384: I/OMXCodec(37): [OMX.google.h264.decoder] Crop rect is 320 x 240 @ (0, 0)
06-01 10:22:16.253: W/NetworkManagementSocketTagger(89): setKernelCountSet(10013, 0) failed with errno -2
06-01 10:22:16.374: I/Launcher(553): setLoadOnResume
06-01 10:22:16.584: D/MediaPlayer(602): getMetadata
06-01 10:22:16.614: I/NuCachedSource2(37): new range: offset= 0
06-01 10:22:16.694: I/ChromiumHTTPDataSource(37): connect to http://tvstream.cn.ru/storage/1kanal/20120530/1kanal-20120530-01-14-00-20120530-03-16-00.mp4 @0
06-01 10:22:16.834: E/SoftAVC(37): Decoder failed: -2
06-01 10:22:16.844: E/OMXCodec(37): [OMX.google.h264.decoder] ERROR(0x80001001, -1007)
06-01 10:22:16.884: D/AudioSink(37): bufferCount (4) is too small and increased to 12 
```

据我所知，Android 支持播放使用 h264 解码的视频（http://developer.android.com/guide/appendix/media-formats.html）。所以，谁能告诉我我做错了什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-03T09:54:12.103

可能您的文件正在使用不受支持的配置文件，请注意官方[媒体格式](http://developer.android.com/guide/appendix/media-formats.html)页面仅列出H.264 AVC 支持的*基线配置文件。*

[尝试按照此 stackoverflow question](https://superuser.com/questions/371460/command-encoding-h264-baseline-profile-level-1-with-ffmpeg-and-libx264)中的建议对指定基线配置文件的视频进行转码，即如果您的容器是 MP4 运行：

```
ffmpeg -i yourfile.mp4 -c:v libx264 -profile:v baseline -level 1 yourfile_BaselineProfile.mp4 
```

如果这行得通，那在您的代码中不是问题，您只需要使用受支持的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-28T03:52:36.633

尝试这个

```
File clip=new File(Environment.getExternalStorageDirectory(),
                       "test.mp4");

    if (clip.exists()) {
      video=(VideoView)findViewById(R.id.video);
      video.setVideoPath(clip.getAbsolutePath());

      ctlr=new MediaController(this);
      ctlr.setMediaPlayer(video);
      video.setMediaController(ctlr);
      video.requestFocus();
      video.start(); 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-01T11:06:55.300

VideoView 类不允许播放 MP4 文件格式的视频。请通过[此链接了解 Android 媒体格式](http://developer.android.com/guide/appendix/media-formats.html)。[尝试使用Daroon Player](https://play.google.com/store/apps/details?id=com.daroonplayer.dsplayer&feature=search_result#?t=W251bGwsMSwyLDEsImNvbS5kYXJvb25wbGF5ZXIuZHNwbGF5ZXIiXQ..)查看您的视频

# javascript - 使用 js 数组作为栈

> ID：10849052
> 
> 赞同：0
> 
> 时间：2012-06-01T11:03:12.703
> 
> 标签：javascript

我认为它应该发出 4 次警报，但为什么它只发出 2 次警报。有没有人可以为我解释一下？

```
 var arr = new Array;

   arr.push("1");
   arr.push("2");
   arr.push("3");
   arr.push("4");

   for(var i=0;i<arr.length;i++){
     alert(arr.pop());
   } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T11:04:45.450

将循环更改`for`为`while`循环：

```
while(arr.length) {
    alert(arr.pop());   
} 
```

问题是您从数组中删除元素，因此`length`减少，`for`提前结束循环。在循环的 2 次迭代之后`for`，`arr.length`是 2，`i`也是 2，所以循环结束。

这是上面的一个[工作示例](http://jsfiddle.net/C3Vcd/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T11:08:02.697

您的代码正在检查每个循环的长度，因此在第二个循环中，数组长度必须为 2（弹出 2）但 var i 为 2，因此它们将退出循环

尝试使用`for`或者你可以使用

```
var arr = new Array;

arr.push("1");
arr.push("2");
arr.push("3");
arr.push("4");
var length = arr.length;
for(var i=0;i<length;i++){
    alert(arr.pop());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T11:09:29.797

Pop 从数组中删除元素，并减小长度属性。所以经过两个循环 i = 2 和数组长度 = 2。

```
 var arr = new Array;
   arr.push("1");
   arr.push("2");
   arr.push("3");
   arr.push("4");
   var len = arr.length;
   for(var i=0;i<len;i++){
       alert(arr.pop());
   } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T11:09:41.220

由于 pop() 操作数组长度在循环执行期间递减。所以经过 2 次迭代， i==2 和 arr.length==2

# numpy - 邻居平均值数组

> ID：10849054
> 
> 赞同：3
> 
> 时间：2012-06-01T11:03:22.273
> 
> 标签：numpy, average

`func`计算`n-1`大小数组的后续元素的平均大小数组`n`（即窗口宽度为 2 的移动平均值）的函数是什么？

```
func(numpy.array([1,2,3,4,5]))
# return numpy.array([1.5, 2.5, 3.5, 4.5]) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T11:33:06.957

这里不需要函数：

```
import numpy as np

x = np.array([1,2,3,4,5])
x_f2 = 0.5*(x[1:] + x[:-1]) 
```

如果你想要它作为一个函数：

```
def window(x, n):
    return (x[(n-1):] + x[:-(n-1)])/float(n) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T11:07:53.873

```
>>> x = np.array([1,2,3,4,5])
>>> np.vstack([x[1:], x[:-1]]).mean(axis=0) 
```

# .htaccess - 301重定向通配符的想法？

> ID：10849055
> 
> 赞同：1
> 
> 时间：2012-06-01T11:03:23.420
> 
> 标签：.htaccess, redirect

我在寻找 301 重定向问题的答案时遇到了一些麻烦。故事是这样的：我曾经在 www.punkto.ro 有一个德语新闻网站。使用该网站的 CMS 创建的每篇新文章都具有以下格式：punkto.ro/articles/title-1234.html，其中 1234 被数据库中的文章编号替换。由于几个原因，我不得不重新设计并选择了 wordpress，我把它放在了根目录中。我创建了一个子域archive.punkto.ro，并将config.php文件中的url变量“punkto.ro”替换为“archive.punkto.ro”。然后我将站点文件移动到子目录“存档”。它工作正常。当然，谷歌中的旧文章链接现在会导致 404 响应。可以肯定的是，我还在404上注明了档案的位置，所以人们可以去那里看。现在到重定向：我想要实现的是，当用户单击 google punkto.ro/articles/title-1234.html 中的链接时，他/她应该被重定向到 archive.punkto.ro/articles/title-1234.html。奇怪的是，我在我的文件管理器（cpanel 或 ftp）中找不到文件夹“articles”......有人知道 .htacces 应该是什么样子吗？

示例：旧链接：`http://www.punkto.ro/articles/Staatschef_Basescu:_Rumaenien_einschliesslich_gesetzmaessig_fuer_Grexit_gewappnet-4169.html`

新链接：`http://www.archive.punkto.ro/articles/Staatschef_Basescu:_Rumaenien_einschliesslich_gesetzmaessig_fuer_Grexit_gewappnet-4169.html`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:29:00.467

I don't think you have to create the .htacccess-file in the "articles"-folder. Just create it in the main folder. I hope this will work for you:

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} ^(www\.)?punkto.ro$
RewriteRule ^articles/(.*)$ http://www.archive.punkto.ro/articles/$1 [L,NC,R=301] 
```

The RewriteCond makes sure that www.archive.punkto.ro will not be redirected again, the RewriteCond redirects every URL containing "articles/" to the archiv.

# python - 在python中匹配数组列

> ID：10849059
> 
> 赞同：0
> 
> 时间：2012-06-01T11:03:46.957
> 
> 标签：python, file-comparison

我有两个文件，内容如下。我的问题是，在下面显示的代码中，如果 id 在 file1 和 file2 中匹配，那么如何匹配 file1 中的第二列和 file2 中对应的第二列直到 n 列..

```
 def process(file):
     pt = []
     f=open(file)
     for l in f: 
       parts=l.strip().split('\t')
        if len(parts) < 3:
          print 'error with either ur input file or field check parts'
          break
        else:
          pt.append(parts)
     return pt
   arr1 = process(file1)
   arr2 = process(file2)                  
   for arr in arr1:
     if arr[0] in arr2:
        //then match arr1[1] with arr2[1] and so on and get the results 
```

文件1：

```
ID674097256 voice tech department
ID674097257 NA NA
ID674097399 chat  order processing department 
```

文件2：

```
ID674097212 voice tech department
ID674097257 NA NA
ID674097399 chat  new processing department 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:17:09.903

这个问题对我来说并不完全清楚，但我认为你正在尝试做

```
for arr in arr1:
    for a in arr2:
        if a[0] == arr[0]:
             print a
             print arr
             # compare the rest of the fields 
```

但是，就性能而言，这可能不是最佳选择。考虑对文件进行排序，看看诸如[逐行比较两个不同文件之类的问题，并在第三个文件中写出差异 - Python](https://stackoverflow.com/questions/7757626/compare-two-different-files-line-by-line-and-write-the-difference-in-third-file)等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:17:13.080

采用`zip`

```
for (a1, a2) in zip(arr1, arr2):
  if a1[0] == a2[0]:
      ##  do something. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T11:25:30.423

如果我理解正确，您需要匹配文件中的相同行。此代码可能对您的任务有帮助：

```
>>> s = range(10)
>>> s
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
>>> s2 = range(20)
>>> s2
[0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19]
>>> matching = {}
>>> for i, k in zip(s,s2):
...     matching[i] = k
...
>>> matching
{0: 0, 1: 1, 2: 2, 3: 3, 4: 4, 5: 5, 6: 6, 7: 7, 8: 8, 9: 9}
>>> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T11:53:49.973

此代码将第一个数组的每一行与第二个数组的每一行进行比较。如果行相同（如果列表相同），则将该行放入列表“行”中，并删除行的重复实例。

```
 rows = [row1 for row1 in arr1 for row2 in arr2 if row1 == row2]
    rows = list(set(rows)) 
```

# c# - wpf 应用程序中的调用目标已引发异常

> ID：10849061
> 
> 赞同：1
> 
> 时间：2012-06-01T11:03:49.257
> 
> 标签：c#, wpf

我编写了一个简单的 wpf 应用程序，用于在 datagrid 中绑定数据。在下一行运行时会引发错误。

```
string ConString = System.Configuration.ConfigurationManager
                         .ConnectionStrings["ConString"].ToString(); 
```

异常显示：`Exception has been thrown by the target of an invocation."`

`InnerException:{"Object reference not set to an instance of an object."}`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:05:49.857

可能 System.Configuration.ConfigurationManager.ConnectionStrings["ConString"] 为 NULL 或 System.Configuration.ConfigurationManager.ConnectionStrings 为 NULL。

# yui - YUI 3.5：复选框树

> ID：10849064
> 
> 赞同：0
> 
> 时间：2012-06-01T11:03:56.777
> 
> 标签：yui, yui3

我想在 YUI 3.5 中创建一个带有复选框的树，如下所示：

```
|v|1
--| |1.1
--| |1.2
| |2 
```

-- 1.2和2检查后；

```
|v|1
--| |1.1
--|v|1.2
-----| |1.2.1
|v|2
--| |2.1 
```

`|v|`——检查； `| |`-- 未选中

发现 yui3.5 文档有点奇怪，因为[这就是](http://yuilibrary.com/yui/docs/datatable/datatable-chkboxselect.html)我设法找到的关于复选框的全部内容。
与 YUI 3.5 中的单个复选框元素和树无关。

所以，问题是：我在哪里可以找到有关复选框、复选框的侦听器或复选框树的信息？

*PS*
对不起我的英语并提前感谢。
[这](https://stackoverflow.com/questions/2321203/tree-of-checkboxes)不相关，因为它引用了 yui2、extjs 和 jquery。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:57:07.670

一切都很容易。

`Y.Node.create("html-code-here");`-- 创建一个选择框。

要构建描述的树：观察复选框以隐藏/显示最近的孩子。
我的 [*显示*/*隐藏*] 操作看起来像是为适当的选择框切换 css 样式：
`display: block;`<->`display: none;`

虽然这可能不是我一直在寻找的答案，但我会留下它，因为这是我的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T10:07:20.407

我正在寻找几乎相同的问题，我找到了以下解决方案，

[带有复选框的自定义 TreeView](http://developer.yahoo.com/yui/examples/treeview/tasklist.html)

# c# - 在两个线程之间交替

> ID：10849075
> 
> 赞同：1
> 
> 时间：2012-06-01T11:04:30.373
> 
> 标签：c#, multithreading

我正在构建的应用程序从某个源读取日志并将其显示在网格上。日志的大小可以是几 MB 到几 GB。为防止内存出现任何问题，我使用网格并一次通过日志分页 500 行。这是我希望做的：

我想创建一个线程，它将读取日志并将它们每次写入大约 500 行的文件，然后通知另一个线程已写入日志。然后另一个线程将读取文件并在网格上显示行，并向第一个线程发出它已完成读取的信号。这种情况一直持续到没有更多日志写入文件。

是否可以像这样在线程之间切换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:58:05.533

是的，当然，它是[生产者-消费者模型](http://en.wikipedia.org/wiki/Producer-consumer_problem)的变体。

您可以在这里使用一些基本的构建块，例如`Thread`和`AutoResetEvent`。“生产者”从日志中读取行并将它们发布到文件中（也许您可以使用内存缓冲区来代替？）然后向另一个线程发出信号以读取它们：

```
AutoResetEvent consumerEvent = new AutoResetEvent(false);
AutoResetEvent producerEvent = new AutoResetEvent(false);

// producer code
while(/* lines still available */)
{
    // read 500 lines
    // write to shared file
    consumerEvent.Set(); // signal consumer thread
    producerEvent.WaitOne(); // wait to be signaled to continue
} 
```

和消费者代码：

```
while(/* termination not received */)
{
    consumerEvent.WaitOne(); // wait for the producer to finish     
    // read lines from file and put them in the grid
    producerEvent.Set(); // allow producer to read more logs
} 
```

这将允许消费者读取文件和生产者读取更多日志并准备下一批之间存在一定程度的并行性。

当生产者完成日志后，它可以在文件中放置一条特殊的终止消息，以通知消费者正常退出。

这是一种策略，它非常低级且容易出错。您可以完全跳过共享文件并使用[BlockingCollection](http://msdn.microsoft.com/en-us/library/dd267312)形式的内存缓冲区。

定义一个`ProducerTask`类来保存一些文本行：

```
class ProducerTask 
{
    public String[] Lines { get; set; }
} 
```

此任务一次将保存 500 行。

然后使用`Task`和`BlockingCollection`（.NET 4.0+）如下：

```
BlockingCollection<ProducerTask> buffer = new BlockingCollection<ProducerTask>(1);

// producer task
while(/* lines still available */)
{
    // read 500 lines
    ProducerTask p = new ProducerTask();
    buffer.Add(p); // this will block until the consumer takes the previous task
}

// consumer task
while(/* termination not received */)
{
    ProducerTask p = buffer.Take(); // blocks if no task is available
    // put the lines in the grid
} 
```

更加简单和优雅。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:54:08.547

在 Tudor 的非常好的回答之后，您还可以查看[TPL Dataflow](http://msdn.microsoft.com/en-us/library/hh228603%28v=vs.110%29.aspx)，它提供了一组非常干净的构建块来实现生产者-消费者模式。

# ruby-on-rails - 了解 Avdi 在 Rails 代码上的对象

> ID：10849080
> 
> 赞同：2
> 
> 时间：2012-06-01T11:04:46.880
> 
> 标签：ruby-on-rails, ruby

我正在阅读 Avdi[在 Rails 上的对象书](http://objectsonrails.com/#sec-5-2)，但不理解部分示例代码。

他创建了一个类，我猜是出于依赖注入的目的：

```
class Blog
  # ...
  attr_writer :post_source
  # ...
  private
  def post_source
    @post_source ||= Post.public_method(:new)
  end
end 
```

然后他写了以下规范

```
# spec/models/blog_spec.rb
require 'ostruct'
describe Blog do
  # ...
  describe "#new_post" do
    before do
      @new_post = OpenStruct.new
      @it.post_source = ->{ @new_post }
    end
    it "returns a new post" do
      @it.new_post.must_equal @new_post
    end
    it "sets the post's blog reference to itself" do
      @it.new_post.blog.must_equal(@it)
    end
  end
end 
```

我不明白他为什么使用`@it.post_source = ->{ @new_post }`

他为什么不直接使用`@it.post_source = OpenStruct.public_method(:new)`类似于他的博客类代码的东西`@post_source ||= Post.public_method(:new)`

是否有一个原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:20:44.977

`->{ @new_post }`是一个 lambda，它返回存储在 @new_post 中的实例。

`Post.public_method(:new)`将返回 Post 的构造方法

传入要使用的类的 lambda 可以让您控制返回的实例。传入类的构造函数意味着您不知道它将获得什么实例，只是知道它将属于您指定的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:16:29.377

它为规范提供了参考`it`，否则无法在`it "returns a new post"`块中进行比较。它使用`post_source`方法中允许的简单依赖注入机制来简化可测试性。

# ruby-on-rails - RAILS：数据库迁移：将 id 列重置为 auto_increment

> ID：10849081
> 
> 赞同：2
> 
> 时间：2012-06-01T11:04:49.053
> 
> 标签：ruby-on-rails, migration, auto-increment, dbnull

当我创建表 users 时，生成的表有一个名为 id 的列，定义为一个整数。

我尝试将其修改为 bigint, unsigned 如下：

```
change_column :users, :id, :integer, :limit => 8, :unsigned => true 
```

确实将其更改为 bigint，但它不再是自动增量列（尽管它仍被标识为主索引，并且未设置为无符号（尽管 rails 告诉我迁移执行良好）

然后我尝试做：

```
change_column :users, :id, :integer, :limit => 8, :unsigned => true, :null => false, :auto_increment => true 
```

Rails 表示迁移执行得很好，但没有任何改变。

我可以尝试类似：

```
change_column :users, :id, :primary_index 
```

但这会让我从头开始

我也可以尝试使用 MySQL 代码执行“执行”语句，但我想保持迁移文件“干净”。有没有人遇到过这个问题？

顺便说一句，我还试图在另一列上将默认值设置为 NULL，在这里（和谷歌）进行了研究，但没有成功。

编辑：

在通过通用迁移作为表创建的一部分创建列“id”之后，似乎没有办法对其进行编辑。做到这一点的唯一方法是使用 MySQL 语法的“执行”语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T19:11:16.920

尝试创建并运行此迁移：

```
class ChangeColumnUserIdToAutoIncrement < ActiveRecord::Migration

  def self.up
    execute "ALTER TABLE users modify COLUMN id int(8) AUTO_INCREMENT"
  end

  def self.down
    execute "ALTER TABLE users modify COLUMN id int(8)"
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:15:38.683

Rails 会照顾您正在创建的所有表的 ID 字段，并且它对您的迁移甚至`schema.rb`文件都隐藏。

所以我建议你退后一步想想：你为什么要搞砸它？你确定真的需要吗？

编辑：[这个答案](https://stackoverflow.com/a/1442413/1242778)似乎正是您正在寻找的。

关于“将默认设置为 NULL”，您为什么要这样做？无论如何，所有列都默认为 NULL。但是，如果不是这种情况，您可以在迁移中这样做：

```
change_table :users do |t|
  t.string :description, :default => nil
end 
```

希望这能回答你的问题。

# mysql - 使用 $_SERVER['HTTP_USER_AGENT'] 以 flash 版本的 uploadify 返回操作系统和浏览器

> ID：10849085
> 
> 赞同：0
> 
> 时间：2012-06-01T11:04:59.573
> 
> 标签：mysql, flash, browser, operating-system, uploadify

当使用 uploadifive 成功完成上传时，我正在使用 $_SERVER['HTTP_USER_AGENT'] 返回用户的操作系统和浏览器。对于尚不支持 HTML5 的浏览器，我必须使用 flash 后备，即脚本后退到 uploadify。成功上传后，我有一个将数据提交到 MySQL 数据库的脚本，包括操作系统和浏览器。这适用于uploadifive，但对于uploadify，返回“Adobe Flash Player 11”。我想知道在使用 flash 时是否有一种解决方法可以返回操作系统和浏览器？

谢谢

缺口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:32:13.600

是和不是。如果用户有兴趣*不*向您提供此信息，您将不会得到它。但是，如果他们不关心/愿意提供它，那么您可以通过[http://help.adobe.com/en_US/FlashPlatform/beta/reference/actionscript/3/#!flash/system/Capabilities 来完成。 html](http://help.adobe.com/en_US/FlashPlatform/beta/reference/actionscript/3/#!flash/system/Capabilities.html) `os`属性。您还可以通过 ExternalInterface 为导航器查询 JavaScript。

但是，一般来说，Flash 可以自己发送请求，即作为用户代理，不需要其他用户代理。

这些标头由客户端软件生成，本质上是不可信的。没有什么可以阻止用户随请求发送任何信息。因此，通过处理 Flash 没有发送您认为您没有解决问题的特定情况，您应该准备好在该字段中获得任何随机信息，或者可能根本没有。

# sql - Left JOIN 中缺少数据

> ID：10849090
> 
> 赞同：0
> 
> 时间：2012-06-01T11:05:14.520
> 
> 标签：sql, sql-server, left-join

我有两张桌子要连接在一起。

```
SELECT Col3, tab1.Col1, tab1.Col2 FROM
    (SELECT Col1,Col2 
    FROM Table1
    GROUP BY Col1,Col2) tab1
LEFT JOIN
    (SELECT Col3, Col1, Col2
    FROM Table2
    GROUP BY Col3, Col1, Col2) tab2
ON tab2.Col2 = tab1.Col2 AND tab2.Col1 = tab1.Col1 
```

目前，对于 Table2 中不存在的 Table1 中的行，我返回 Col3 为 Null 的行。当我根据 Col3 对数据进行分组时，如果我能以某种方式获得 Col3 的值而不是 Null 会很好......

这可能吗？？

所以我试图根据 col3 的值返回 col1 和 col2 的所有可能组合。问题是当 col3 不包含 col1,col2 的特定组合时，我得到 col3 的空值......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:29:04.453

假设 Col3 是某种类别，并且是`category`表的主键，您可以这样做：

```
select Category.Col3,
       tab1.Col1,
       tab1.Col2,
       sum (tab2.YourAggregate) SumOfSomething
 -- Take all categories
  from Category
 -- Cartesian product with Tabl1
 cross join Table1 tab1
 -- Find matching records in Table2, if they exist
  left join Table2 tab2
    on Category.Col3 = Tab2.Col3
   and Tab1.Col1 = Tab2.Col1
   and Tab1.Col2 = Tab2.Col2
 group by Category.Col3,
       tab1.Col1,
       tab1.Col2 
```

[交叉连接](http://msdn.microsoft.com/en-us/library/ms190690%28v=sql.105%29.aspx)产生所涉及表的笛卡尔积，检索在 Table2 中可能找不到的 Col3。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:11:00.233

LEFT JOIN 将在右表中产生空值，在左表中找不到 Col1 和 Col2 的匹配项。这是预期的行为。

如果您需要帮助编写不同的查询，则必须发布您的数据结构和一些示例数据以供使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T11:12:47.637

只需切换表（或使用右连接）：

```
SELECT tab2.Col3, tab2.Col1, tab2.Col2 FROM
  (SELECT distinct Col3, Col1, Col2 FROM Table2) tab2
LEFT JOIN
  (SELECT distinct Col1,Col2  FROM Table1) tab1
ON tab2.Col2 = tab1.Col2 AND tab2.Col1 = tab1.Col1 
```

# uml - UML 状态机图中状态表示的棘手案例。正交与否？

> ID：10849091
> 
> 赞同：1
> 
> 时间：2012-06-01T11:05:21.797
> 
> 标签：uml, diagram, state-machine

UML 2.0 中有限状态机的层次表示提供了很好的信息压缩，因此您不必描述所有可能的状态组合。UML 还提供了所谓的正交状态，它们不是相互排斥的。据我理解这个想法，如果一个对象在这些状态下产生一些活动以响应相同的事件，那么对应于每个状态的活动应该简单地组合起来。从遗留 C++ 代码对 UML 状态机图进行逆向工程时出现了这个问题。给出了精炼的 C++ 代码和 UML 图：

```
void CSomeClass::somePublicMethod()
{
    if (false == m_A)
    {
        return;
        }

    if (true == m_B)
    {
        m_C = otherMethodWithSideEffects();
    }

    if (false == m_C)
    {
        // some logic with side effects and state transitions
        return;
    }

    // other complex logic with side effects and state transitions
} 
```

UML状态机图：

![UML 状态机图](../Images/bb990697ffb8e5159d6c48382123cfae.png)

一方面状态 B 和 C 不是完全独立的，另一方面并发状态的概念使图表更简单。您能否提出更好的解决方案或告诉我我错在哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T14:55:52.420

您在应用“并行”或“非独占”状态机时遇到真正的问题吗？

似乎您正在寻找一个非常理论化的概念。您的图表示例，不显示任何“转换值”，看起来更像标准流程图。（是的，我知道，状态机是专门的流程图）

分层状态机也应该具有“封装”或“隐藏”转换值。

UML 流程图还支持表示“并行”或“非排他”路径，因此如果您必须对这种情况进行建模，您可能希望从它们开始，而不是状态机。

我工作的唯一分层状态机与解析器有关，当然，我知道它们也用于电路。

祝你好运。

# c# - 为什么我的表格在闪烁

> ID：10849096
> 
> 赞同：0
> 
> 时间：2012-06-01T11:05:55.943
> 
> 标签：c#, winforms, multithreading, drawing

我已经实现了一个简单的多线程服务器\客户端游戏作为我大学的作业。

在客户端除了主线程还有：

1-thread 负责绘制游戏场地和表格上的玩家。

2线程与服务器通信以发送方向并接收位置和其他信息。

首先我使用了调用技术，但它不起作用，因为我在处理它之后使用了 Graphics。请参阅[通过单独的线程在表单上绘图](https://stackoverflow.com/questions/10714358/draw-on-a-form-by-a-separate-thread#comment13919956_10714358)

所以为了避免这种情况并规范绘图线程，我只是在绘图线程上的每个特定时间提升标志'无效'并将其实际处理留给主线程：

```
 public Form1()
    {
        SetStyle(ControlStyles.OptimizedDoubleBuffer, true);
        InitializeComponent();
    }

    private void Draw()
    {
        while (true)
        {
            Thread.Sleep(200);
            Invalidate();
        }
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        base.OnPaint(e);

        if (map.hasGraph)
        {
            map.Draw(e.Graphics);
            if (this.Index != null)
                e.Graphics.FillRectangle(Brush, Rectangle);
            if (OpponentIndex != null)
                e.Graphics.FillRectangle(OpponentBrush, OpponentRectangle);
        }
    } 
```

这里的问题是，即使我使用双缓冲，表单也会以任意方式闪烁，并且当我增加绘图线程的睡眠时间时，闪烁会减少，但我认为 200 毫秒已经太多了。有什么建议吗？

[编辑]

我意识到我正在从产生问题的代码和属性编辑器中设置双缓冲标志（这可能是一个愚蠢的想法），但我花了半个小时用一个标志和两个标志来测试我的代码，当我从两个地方设置双缓冲标志时出现的问题，我的问题已解决，但现在我需要知道这是否可以解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:16:48.393

运行时间越长，它一定会变得越来越糟，对吗？

每次你的程序绘制它都会启动draw，它有一个无限循环，它调用paint，它在另一个无限循环中调用draw。看来您在这里有一个循环引用。如果我可以假设 Map.Draw 是私有的 void Draw()

有一个更简单的解决方案，将所有内容绘制到位图，然后在 onPaint 事件中绘制位图。

```
Bitmap buffer=new Bitmap(this.Width, this.Height); //make sure to resize the bitmap during the Form.Onresize event
Form1()
{
    InitializeComponent();
    Timer timer=new Timer();
    timer.Interval= 100;
    timer.Tick+=......
    timer.Start()
}

//the Timer tick event
private void timer_tick(....
{
    if (map.hasGraph)
    {
         using (Graphics g = Graphics.FromImage(buffer))
        {
            //You might need to clear the Bitmap first, and apply a backfround color or image
            //change color to whatever you want, or don't use this line at all, I don't know
            g.Clear(Color.AliceBlue);

            if (this.Index != null)
                g.FillRectangle(Brush, Rectangle);
            if (OpponentIndex != null)
                g.FillRectangle(OpponentBrush, OpponentRectangle);
        }
     panel1.BackgroundImage=buffer;
     }
} 
```

**注意**我没有测试这个语法的准确性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:57:11.643

1.  创建将用于存储最后渲染场景的图像。
2.  创建将绘制到图像的新线程
3.  创建一个计时器会刷新图像
4.  将图像复制到计时器刻度上

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T11:14:32.660

对于执行的操作，系统的内存可能非常低。阅读更多关于它的信息。 [http://msdn.microsoft.com/en-us/library/system.drawing.graphics.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.graphics.aspx)

# android - 在 jQuery mobile 中创建并使用 {NUMBERS 数组} 在列表视图中显示内容

> ID：10849103
> 
> 赞同：2
> 
> 时间：2012-06-01T11:06:40.187
> 
> 标签：android, iphone, jquery-mobile, cordova, nsmutablearray

我正在使用 jQuery mobile 和 Phonegap 来实现 iPhone 应用程序并希望实现列表视图，而不使用统计上的硬编码数据。

```
<ul data-role="listview" data-inset="true" class="ui-listview">
          <li>One</li>
          <li>Two</li>
          <li>Three</li>
</ul> 
```

不像上面的硬代码。

我需要创建一个对象，例如带有数字列表（一、二、三、四、五等）的数组，并使用我想填充到列表视图中的数字数组。如何在 jQuery mobile 中创建和使用数组以在列表视图中显示内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:13:54.477

你想做这样的事情：

```
var NUMBERS = ["one", "two", "three", "four", "five"];
for (var i=0; i < NUMBERS.length; i++) {
    $('#idofmylist').append($('<li/>', {    
            'id': id
        }).append($(NUMBERS[i]))));
} 
```

你需要给你“ul”一个id，你可以引用它来使用jQuery的追加添加“li”。

# java - Wicket：是否可以从线程更新标签值？

> ID：10849105
> 
> 赞同：1
> 
> 时间：2012-06-01T11:06:54.850
> 
> 标签：java, wicket

例如，我有一个 html 跨度，当应用程序进行一些测试时应该更新它（比如发布，然后等待一段时间等待响应并表示结果）。所以我想在这个跨度上展示这个动作的当前进展。

我尝试在扩展 WebPage 的 myPage.java 中创建线程。它的定义是：

```
class TestThread extends Thread{

    private Label current_message_lbl;
    private Component component;

    public void run() {
        try {
            this.sleep(1000);
            current_message_lbl.setDefaultModelObject(new StringResourceModel("test-SENDING-COMMANDS",component, null));
                    /* HTTP POST and other test code*/

        } catch (Exception e) {
            System.out.println(e.getMessage());
        }
    }

    public void setCurrentMesssageLabel(Label current_message_lbl){
        this.current_message_lbl = current_message_lbl;
    }
    public void setComponent(Component component){
        this.component = component;
    }
} 
```

我从以下开始：

```
TestThread thread = new TestThread();
thread.setCurrentMesssageLabel(current_message_lbl);
thread.setComponent(component);
thread.start(); 
```

在我收到此错误消息后

> 当前线程 Thread-103 没有附加应用程序

我也尝试过定义线程，如：

```
class TestThread extends WicketApplication implements Runnable{ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T10:50:36.360

您可以将[AjaxSelfUpdatingTimeBehavior](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/ajax/AjaxSelfUpdatingTimerBehavior.html)添加到您的组件中。比此行为每隔几秒更新一次组件。但是你必须在你的线程中改变组件的模型。

Also if you try to lazy load a component you can check [AjaxLazyLoadPanel](http://wicket.apache.org/apidocs/1.4/org/apache/wicket/extensions/ajax/markup/html/AjaxLazyLoadPanel.html). There are some examples in [here](http://www.wicket-library.com/wicket-examples/ajax/lazy-loading) and [here](http://www.mkyong.com/wicket/how-do-use-ajaxlazyloadpanel-in-wicket/).

# powershell - 远程尝试使用 Get-NlbClusterNode 时访问被拒绝

> ID：10849108
> 
> 赞同：0
> 
> 时间：2012-06-01T11:06:57.717
> 
> 标签：powershell, windows-server-2008, powershell-2.0

尝试为我们的 SMTP 集群编写一个监控脚本 (Powershell)，该集群有时有 3 个节点。

当我在本地时，在 SMTP 集群上运行以下命令：

```
Get-NlbClusterNode 
```

我得到了我需要的输出。

但是，如果我从远程服务器（相同的网络和域）尝试相同的操作，我会得到：

```
[smtp-s001a]: PS C:\> Get-NlbClusterNode
Access is denied. (Exception from HRESULT: 0x80070005 (E_ACCESSDENIED))
+ CategoryInfo          :
+ FullyQualifiedErrorId :
AccessDenied,Microsoft.NetworkLoadBalancingClusters.PowerShell.GetNlbClusterNode 
```

这是为什么？只有“Get-NlbClusterNODE”命令才能让我访问被拒绝。以“Get-NlbCluster”为例，效果很好。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T19:55:15.540

我遇到过同样的问题。

我花了一段时间才弄清楚。我将 Powershell 作为我的服务中的一个进程运行。该服务在所有主机的同一用户帐户下运行，但密码是在每个主机/集群节点上随机生成的，这就是为什么我得到“拒绝访问...”一旦我将密码更改为相同，一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T12:52:10.717

还要禁用 UAC 并重新启动机器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T22:08:36.827

我找到了一些解决方法。在远程会话中模拟管理员凭据

```
function EntryPoint()
{
    ImportModule-Impersonate;

    $impersonate = new-object UserSession.Impersonate;
    try
    {
        if ($impersonate.Login("SKODA", "Administrator", "*****") -eq $false) {
            throw new Exception("Invalid credentials");
        }
        Import-Module NetworkLoadBalancingClusters
        Get-NlbClusterNode;    
    }
    finally
    {
        $impersonate.Dispose();
    }
};

function ImportModule-Impersonate {

$assem = @();

$source = @" 
using System;
using System.Collections.Generic;
using System.Runtime.InteropServices;
using System.Security.Principal;
using System.Text;

namespace UserSession
{
    public class Impersonate : IDisposable
    {
        public const int LOGON32_LOGON_INTERACTIVE = 2;
        public const int LOGON32_PROVIDER_DEFAULT = 0;

        private WindowsImpersonationContext _impersonationContext;

        [DllImport("advapi32.dll")]
        public static extern int LogonUserA(String lpszUserName,
                                            String lpszDomain,
                                            String lpszPassword,
                                            int dwLogonType,
                                            int dwLogonProvider,
                                            ref IntPtr phToken);

        [DllImport("advapi32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        public static extern int DuplicateToken(IntPtr hToken,
                                                int impersonationLevel,
                                                ref IntPtr hNewToken);

        [DllImport("advapi32.dll", CharSet = CharSet.Auto, SetLastError = true)]
        public static extern bool RevertToSelf();

        [DllImport("kernel32.dll", CharSet = CharSet.Auto)]
        public static extern bool CloseHandle(IntPtr handle);

        public bool Login(String domain, String userName, String password)
        {
            IntPtr token = IntPtr.Zero;
            IntPtr tokenDuplicate = IntPtr.Zero;

            if (RevertToSelf())
            {
                if (LogonUserA(userName, domain, password, LOGON32_LOGON_INTERACTIVE,
                               LOGON32_PROVIDER_DEFAULT, ref token) != 0)
                {
                    if (DuplicateToken(token, 2, ref tokenDuplicate) != 0)
                    {
                        WindowsIdentity tempWindowsIdentity = new WindowsIdentity(tokenDuplicate);
                        _impersonationContext = tempWindowsIdentity.Impersonate();

                        if (_impersonationContext != null)
                        {
                            CloseHandle(token);
                            CloseHandle(tokenDuplicate);
                            return true;
                        }
                    }
                }
            }
            if (token != IntPtr.Zero)
            {
                CloseHandle(token);
            }
            if (tokenDuplicate != IntPtr.Zero)
            {
                CloseHandle(tokenDuplicate);
            }
            return false;
        }

        public void Logout()
        {
            if (_impersonationContext != null)
            {
                _impersonationContext.Undo();
                _impersonationContext = null;
            }
        }

        public void Dispose()
        {
            Logout();
        }
    }
}
"@;

    Add-Type -ReferencedAssemblies $assem -TypeDefinition $source -Language CSharp 
}

EntryPoint; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-17T09:38:06.950

我有完全相同的问题。使用这些凭据访问和运行的用户`Get-NlbClusterNode`拥有正确的权限，但由于某种无法解释的原因，他得到了那个奇怪的错误。我放弃了调查并做了以下解决方法：

```
$username = "domain\user_name"
$securePassword = "secure_hash" | ConvertTo-SecureString
$credential = New-Object System.Management.Automation.PSCredential $username, $securePassword
$result = Start-Process powershell.exe -WorkingDirectory $PSHome -Credential $credential -ArgumentList ("-File $PSScriptRoot\your-script.ps1") | Out-Null 
```

如果`your-script.ps1`你在哪里输入：

```
Invoke-Command -ComputerName "your-remote-server" -ScriptBlock {
    Get-NlbClusterNode
    #Any other commands you want here
} 
```

它按预期工作......

# internationalization - google 的 CSE API 的 lr 参数仅以定义的语言返回页面

> ID：10849113
> 
> 赞同：4
> 
> 时间：2012-06-01T11:07:27.737
> 
> 标签：internationalization, google-custom-search

我正在使用 Google CSE 搜索多语言网站（德语、英语、荷兰语、法语）。

问题是我希望搜索仅以用户使用的语言返回结果，例如 www.coolsite.de/en/?q=hotel 应该只返回英文结果。

[文档](https://developers.google.com/custom-search/v1/using_rest#query-params)说：

> 您可以将搜索限制为以特定语言编写的文档（例如，lr=lang_ja）。

所以这正是我想要实现的！

**但是**`lr`当设置为`lang_en`（[可用语言](https://developers.google.com/custom-search/docs/xml_results?hl=en#languageCollections)）时，我的搜索仍会返回德语结果。我所有的页面都在 html-Tag 中设置了语言，如下所示：

`<html lang="en">`或者`<html lang="de">`

它们还包含`<meta name="language" content="en" />`或`<meta name="language" content="de" />`（这是元数据的正确值吗？我[读到](http://www.metatags.org/meta_name_language)该值应该包含语言的全名？！）

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T15:43:30.510

我的解决方法是将`hq`-Parameter （将额外的查询词附加到查询中。）设置为`site:http://www.coolsite.de/[language-I-want-to-search-in]/`

也可以[过滤](https://developers.google.com/custom-search/docs/structured_search#structured_search_element)包含在我的[PageMap](https://developers.google.com/custom-search/docs/structured_data#pagemaps)中的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-23T13:14:44.243

我能找到的最佳解决方案是在同一站点上为每种语言创建单独的配置。然后根据我网站的 URL 中的语言（例如 /es/blah 表示西班牙语），我在对`cse.js`. 这让我可以为每种语言自定义配置，并让 Google 也以该语言显示界面。

# javascript - jQuery 验证远程消息并继续提交

> ID：10849119
> 
> 赞同：0
> 
> 时间：2012-06-01T11:08:00.003
> 
> 标签：javascript, jquery, forms, jquery-validate

我有一个关于来自 bassistance 的 jQuery.validate.js 插件的快速问题。我正在使用这个插件的 1.6 版。

问题是关于远程功能。当某些值不在特定范围内时，我只需要显示错误。当这些值不在范围内时，仍然可以提交表单。

我已经创建了远程验证，但是当值不在范围内时，我的表单没有提交。

我的代码是：

```
 rules[elm.attr('name')] = {
        required: true,
        minlength: 2,
        remote: {
            type: 'POST',
            url: 'checkpostcode'
        }
    }; 
```

有人知道如何解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:45:37.220

我通过在输入值下注入自定义标签来解决此问题。不是验证消息，因此验证仍会继续发送表单。

谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T07:19:48.540

这只是由于您的请求 ajax 正在处理中，并且在您提交的尚未验证的表单之间。

要克服这个问题并解决这个问题，只需将其添加到您的远程方法中：

```
remote: {
    type: 'POST',
    url: 'checkpostcode',
    async: true
} 
```

# jquery-mobile - jQuery Mobile：如何制作不重新加载页面的按钮（href）？

> ID：10849121
> 
> 赞同：0
> 
> 时间：2012-06-01T11:08:07.460
> 
> 标签：jquery-mobile

根据[jQuery 1.1.0 Mobile 文档](http://jquerymobile.com/demos/1.1.0)，按钮应定义为链接。

```
<a href="index.html" data-role="button">Link button</a> 
```

这将加载引用的页面。

使用 # 时，它会重新加载当前页面。

```
<a href="#" data-role="button">Action</a> 
```

我们如何定义一个不是链接的按钮，并在其上发生事件时简单地触发事件处理程序？

**编辑：**我对所见所闻的解释是错误的。单击带有 href="#" 的按钮不会重新加载页面。我应该删除这个问题，因为它没有意义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T13:32:38.017

据我了解，`href="#"`不会刷新页面，例如：

*   [http://jsfiddle.net/XNLWS/](http://jsfiddle.net/XNLWS/)

以下是 jQM 文档：

*   [http://jquerymobile.com/demos/1.1.0/docs/buttons/buttons-types.html](http://jquerymobile.com/demos/1.1.0/docs/buttons/buttons-types.html)

如果您正在寻找自定义事件，以下是一个示例：

*   [http://jsfiddle.net/XNLWS/1/](http://jsfiddle.net/XNLWS/1/)

JS：

```
$( "#myButton" ).bind( "click", function(event, ui) {
    alert('Custom action here');
});​ 
```

HTML：

```
<div data-role="page" id="home">
    <div data-role="content">
        <a href="#" data-role="button" id="myButton">Link button</a>
    </div>
</div>​ 
```

# android - setHint 不适用于 setInputType

> ID：10849122
> 
> 赞同：2
> 
> 时间：2012-06-01T11:08:08.487
> 
> 标签：android, android-edittext, hint

我动态构建 EditText。除其他外，我设置了 2 个属性：hint(.setHint) 和 inputType(.setInputType)。我的问题：当我调用 setInputType 时，setHint 无效：空白编辑文本保持空白，没有提示。一旦我注释掉 setInputType，我就会看到所有提示。我需要输入类型和提示。该怎么办？我的代码：

```
 private EditText buildTextBox(Property property)
{
    EditText control = new EditText(this);
    control.setInputType(getInputTypeByPropertyInputType(property.getType()));// android.text.InputType.
    control.setHint(property.getDisplayName());
    return control;
}

private int getInputTypeByPropertyInputType(String type)
{
    if (type.equals("integer"))
    {
        return android.text.InputType.TYPE_CLASS_NUMBER;
    }
    else
    {
        return android.text.InputType.TYPE_CLASS_TEXT;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-15T10:01:52.697

@Eugene 确保在调用 control.setGravity() 和 control.setInputType() 之前调用 control.SetHint(); 它对我非常有用！

```
 column1 = new EditText(this);
            column1.setId(i);
            column1.setHint("Value");
            column1.setInputType(InputType.TYPE_CLASS_NUMBER);
            column1.setGravity(Gravity.RIGHT); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-23T14:17:04.700

我同意尤金的观点。移除重力（只是不要使用 CENTER），提示文本将正常返回。很好的发现！

# javascript - 尽管 js 文件引用在标头中，但未定义函数

> ID：10849124
> 
> 赞同：0
> 
> 时间：2012-06-01T11:08:12.713
> 
> 标签：javascript

我正在网站上的一个页面上工作（请参阅[http://www.quick-conversions.com/currency](http://www.quick-conversions.com/currency)）。

我`onkeyup="doConversion('...')`在每个输入字段上附加了一个。相应的函数在一个 javascript 文件中定义：[http ://www.quick-conversions.com/sites/MyScripts/PHP/currency.js](http://www.quick-conversions.com/sites/MyScripts/PHP/currency.js)

在源页面中，该文件似乎在标题中正确导入：

```
<script type="text/javascript"
src="http://www.quick-conversions.com/sites/MyScripts/PHP/currency.js?m4xpzi"></script> 
```

但是该函数没有被触发并且Firebug说它没有定义？我已经没有解决这个问题的想法了。任何人都知道发生了什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:12:29.307

加载我得到的页面：

```
Uncaught SyntaxError: Unexpected token ( 
        currency.js line 104 
```

这很可能是原因。

你有：

```
var updateConversion(src_rate, value) { 
```

应该是：

```
function updateConversion(src_rate, value) { 
```

或者

```
var updateConversion = function (src_rate, value) { 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T11:12:15.453

您的源文件有错误。

失踪 ; before 语句 [Break On This Error]

var updateConversion(src_rate, value) {

当前...？m4xpzi（第 104 行，第 20 列）

# c# - C# 线程和内存泄漏

> ID：10849125
> 
> 赞同：1
> 
> 时间：2012-06-01T11:08:26.703
> 
> 标签：c#, multithreading, excel, interop

我正在编写一个通过互操作打开 Microsoft Excel 的应用程序。

我遇到的问题是，如果应用程序本身锁定或内存泄漏，我的应用程序将被阻塞并且不会继续线程。

我有一个父线程，它查看一个目录并为每个文件循环写入

转换("src.xls","src.pdf",null); 有时说，例如，如果我们给 excel 一个无法打开的文件类型，它将被锁定。这将锁定我的线程，迫使我不得不终止该进程。

```
public static class ExcelConverter
{
    public static bool Convert(string srcFile, string destinationFile, object[] parameters)
    {
        bool bStatus = false;
        Workbook excelWorkBook = null;
        Excel.Application application = null;

        try
        {

        application = new Excel.Application();
        object missingParam = Type.Missing;

            excelWorkBook = application.Workbooks.Open(srcFile);

            if (excelWorkBook != null)
            {
                excelWorkBook.ExportAsFixedFormat(XlFixedFormatType.xlTypePDF, destinationFile);
            }
            bStatus = true;
        }
        catch (Exception)
        {

            bStatus = false;
        }
        finally
        {
            if (excelWorkBook != null)
            {
                excelWorkBook.Close(false);
                excelWorkBook = null;
            }

            if (application != null)
            {
                application.Quit();
                application = null;
            }

            GC.Collect();
            GC.WaitForPendingFinalizers();
            GC.Collect();
            GC.WaitForPendingFinalizers();
        }

        return bStatus;
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T12:18:08.947

> 例如，如果我们给 excel 一个无法打开的文件类型，它将被锁定

它可能试图显示一个告诉用户它的对话框。通过设置 application.Visible = true 来调试它，这样您就可以实际看到对话框。通过在 Open() 调用中指定更多参数来修复它。Password、Notify 和 CorruptLoad 参数有作用。更好地筛选文件是一个明显的解决方法，Excel 真正设计为交互式和健谈的问题。

您不必担心线程，Excel 是单线程 COM 对象，COM 确保以线程安全的方式调用接口方法。在您的情况下，这是通过实际创建一个*新*线程来为互操作对象提供一个安全的家。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T14:49:30.127

在这里，您可能想要创建一个扩展`MarshalByRefObject`对象的对象，您可以在新对象中生成该对象`AppDomain`以进行转换。完成后，只需卸载`AppDomain`并清除所有内存。

# objective-c - 如何使用 uiimageview 从数组中查看图像

> ID：10849130
> 
> 赞同：0
> 
> 时间：2012-06-01T11:08:36.710
> 
> 标签：objective-c, xcode, arrays, uiimageview, nsmutablearray

我创建了一个包含一系列照片的应用程序。我有一个 UIImageView 对象，我想将数组中的图像显示到我的 imageview 中。我怎样才能做到这一点？

我的数组声明：

```
 photoArray = [[NSMutableArray alloc] init];
     PhotoItem *photo1 = [[PhotoItem alloc] initWithPhoto:[UIImage imageNamed:@"1.jpg"] name:@"roy rest"  photographer:@"roy"];
     PhotoItem *photo2 = [[PhotoItem alloc] initWithPhoto:[UIImage imageNamed:@"2.jpg"] name:@"roy's hand" photographer:@"roy"];
     PhotoItem *photo3 = [[PhotoItem alloc] initWithPhoto:[UIImage imageNamed:@"3.jpg"] name:@"sapir first" photographer:@"sapir"];
     PhotoItem *photo4 = [[PhotoItem alloc] initWithPhoto:[UIImage imageNamed:@"4.jpg"] name:@"sapir second" photographer:@"sapir"];
     [photoArray addObject:photo1];
     [photoArray addObject:photo2];
     [photoArray addObject:photo3];
     [photoArray addObject:photo4]; 
```

另一个问题：我如何编写一个代码来创建一个 uiimageview 作为我数组中对象的编号？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:19:16.757

请参考下面，让我知道它是否有用？

```
for(PhotoItem *photoItem in photoArray){
        UIImageView *imgView = [[UIImageView alloc] initWithImage:photoItem.imageProperty];
     [self.view addSubview:imgView];
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:23:21.780

您可以将 UIImageView 对象添加到 uiscrollView，然后添加 uiscrollView 对象，即滚动到视图...

```
 int y = 10;
    for (UIImage *img in array) {
        UIImageView *imgView = [[UIImageView alloc] initWithFrame:CGRectMake(0, y,200, 400)];
        [imgView setImage:img];
        [scroll addSubview:imgView];
        y = y + imgView.frame.size.height + 5;
    }
    [scroll setContentSize:CGSizeMake(300, y)]; 
```

# jquery - Jquery可拖动+可调整大小的元素超出范围

> ID：10849131
> 
> 赞同：4
> 
> 时间：2012-06-01T11:08:38.863
> 
> 标签：jquery, css, jquery-ui, jquery-ui-draggable, jquery-ui-resizable

如果父元素没有，则应用了可调整大小和可拖动的 Jquery 插件的元素将超出范围

```
overflow:hidden; 
```

应用于它。

这是 JSfiddle：http: [//jsfiddle.net/hjtBA/](http://jsfiddle.net/hjtBA/)

尝试将元素拖动到最右下角几次。你会看到它超出了界限。我发现如果我将父元素（例如#outer）设置为溢出：隐藏问题就解决了。

**问题：** 我需要父母有溢出：其他CSS才能正常工作。*在不*使父溢出：隐藏的情况下，我还能如何解决问题？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T11:26:50.753

Resizable transforms the element to be absolutely positioned, so the bounding box is irrelevant,

There seems to be a bug, that you can drag 3px out of the bounding box, so replace your fiddle with this code which adds a 3px snap function so you can't drag 3px out of the boundary :-)

```
$(function(){
    $('#inner').resizable({
        containment: 'parent'        
        }).draggable({
        containment: 'parent' ,
        snap: "#outer", snapMode: "inner" ,
        snapTolerance: 3       
    });    
});​ 
```

You need overflow visible! when the item draggable and resizable, otherwise I found that it caused the item to be irretrievable!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-14T12:22:31.767

我对任何有帮助的人的解决方案，小提琴中的工作代码

```
$('#box-1').draggable({
  grid: [20, 10],
  axis: "x",
  containment: '#container'
  }); 
```

[http://jsfiddle.net/pjasv3hg/](http://jsfiddle.net/pjasv3hg/)

# c# - ASP.NET Web API 与 ninject 绑定

> ID：10849132
> 
> 赞同：37
> 
> 时间：2012-06-01T11:08:49.890
> 
> 标签：c#, asp.net-mvc-4, asp.net-web-api, wcf-web-api

我刚刚安装了 mvc4 rc 更新，我正在尝试构建一个 api 应用程序，但运气不佳。

我正在使用 ninject 但无法加载我的控制器。我不断收到错误

> 类型 'Api.Controllers.ConsumerController' 没有默认构造函数

我对 mvc 和使用注入非常陌生，所以请多多包涵。

我没有对通过 nuget 创建的默认绑定做任何特别的事情

```
 public static class NinjectWebCommon 
{
    private static readonly Bootstrapper bootstrapper = new Bootstrapper();

    /// <summary>
    /// Starts the application
    /// </summary>
    public static void Start() 
    {
        DynamicModuleUtility.RegisterModule(typeof(OnePerRequestHttpModule));
        DynamicModuleUtility.RegisterModule(typeof(NinjectHttpModule));
        bootstrapper.Initialize(CreateKernel);
    }

    /// <summary>
    /// Stops the application.
    /// </summary>
    public static void Stop()
    {
        bootstrapper.ShutDown();
    }

    /// <summary>
    /// Creates the kernel that will manage your application.
    /// </summary>
    /// <returns>The created kernel.</returns>
    private static IKernel CreateKernel()
    {
        var kernel = new StandardKernel();
        kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
        kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

        RegisterServices(kernel);
        return kernel;
    }

    /// <summary>
    /// Load your modules or register your services here!
    /// </summary>
    /// <param name="kernel">The kernel.</param>
    private static void RegisterServices(IKernel kernel)
    {
        kernel.Bind<IConsumerRepository>().To<ConsumerRepository>();
    }        
} 
```

我的控制器看起来像

```
 private readonly IConsumerRepository _repository;

    public ConsumerController(IConsumerRepository repository)
    {
        _repository = repository;
    }

    [HttpGet]
    public IQueryable<Consumer> Get(Guid id)
    {
        return _repository.Get(id).AsQueryable();
    } 
```

我需要做什么才能让 api 控制器与 ninject 一起工作？

对不起，如果这是简单的东西

但是，在将 webcommon.cs 更改为此之后，我尝试了您的建议 Michael

```
 private static IKernel CreateKernel()
    {
        var kernel = new StandardKernel();
        kernel.Bind<Func<IKernel>>().ToMethod(ctx => () => new Bootstrapper().Kernel);
        kernel.Bind<IHttpModule>().To<HttpApplicationInitializationHttpModule>();

        RegisterServices(kernel);
        GlobalConfiguration.Configuration.DependencyResolver = new NinjectDependencyResolver(kernel);
        return kernel;
    }

    /// <summary>
    /// Load your modules or register your services here!
    /// </summary>
    /// <param name="kernel">The kernel.</param>
    private static void RegisterServices(IKernel kernel)
    {
        kernel.Bind<IConsumerRepository>().To<ConsumerRepository>();
    } 
```

我收到错误时

```
var kernel = new StandardKernel(); 
```

叫做

> 来自程序集“Ninject.Web.WebApi，版本=3.0.0.0，文化=中性，PublicKeyToken=c7192dc5380945e7”的“Ninject.Web.WebApi.Filter.DefaultFilterProvider”类型中的方法“GetFilters”没有实现。

我错过了什么？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-06-01T17:50:17.870

我向[Brad Wilson](https://twitter.com/bradwilson/status/208570715459424256)询问了这个问题，它在 MVC4 RC 中发生了变化。

**GlobalConfiguration.Configuration.ServiceResolver**已移至**GlobalConfiguration.Configuration.DependencyResolver**

使用此实现为您的 Web Api 创建一个 Ninject DependencyResolver： [https ://gist.github.com/2417226](https://gist.github.com/2417226)

在**NinjectWebCommon.cs 中**：

```
// Register Dependencies
RegisterServices(kernel);

// Set Web API Resolver
GlobalConfiguration.Configuration.DependencyResolver = new NinjectDependencyResolver(kernel); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-10-02T22:27:39.573

您可以安装 NuGet 包 WebApiContrib.IoC.Ninject 并将以下代码行添加到 NinjectWebCommon.cs

```
GlobalConfiguration.Configuration.DependencyResolver = new NinjectResolver(kernel); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-15T10:07:00.030

此通用错误消息

> 类型 'Api.Controllers.ConsumerController' 没有默认构造函数

如果您不公开您的构造函数，或者由于缺少参数，IoC 容器无法解析依赖项，也会发生这种情况。

至少可以说，该错误消息具有误导性。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-24T14:16:54.800

对于在搜索“...没有默认构造函数”时登陆这里的人，寻找一种简单的方法来调试静默失败的配置：

1.  移除构造函数注入的对象，直到可以调用构造函数
2.  对于之前注入的每个现在未初始化的对象，使用以下命令调用：

`ServiceLocator.Current.GetInstance<[OBJ-TYPE]>()`

违规对象将导致带有描述性消息的 ActivationException。你会有事可做。

请记住删除对 ServiceLocator 后修复的调用。IE。这*不是*在调试之外使用服务定位器反模式的建议。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-06T18:17:43.540

当您的 IOC 依赖项设置不正确时，Ninject 似乎没有像通常那样抛出异常。相反，它看起来好像我没有注册 WebAPI 依赖解析器，我当然做了。这是我对这个问题的解决方案，但从我发现它可能是许多不同类型的设置问题。只需重新检查依赖链中的所有内容。希望它可以帮助某人！

控制器：

```
public class ContestsController : ApiController
{
    //Ninject wouldn't inject this CTOR argument resulting in the error
    public ContestsController(IContestEntryService contestEntryService)
    { 
```

依赖：

```
public class ContestEntryService : IContestEntryService
{

    public ContestEntryService(IContestsContext contestsContext)
    { 
```

错误的配置：

```
 private static void RegisterServices(IKernel kernel)
    {
        kernel.Bind<IContestsContext>()
              .To<ContestsContext>()
              .InRequestScope();

        kernel.Bind(x =>
            x.FromAssembliesMatching("MyNameSpace.*")
             .SelectAllClasses()
             .BindAllInterfaces()
         ); 
```

正确的配置：

```
 private static void RegisterServices(IKernel kernel)
    {
         kernel.Bind(x =>
            x.FromAssembliesMatching("MyNameSpace.*")
             .SelectAllClasses()
             .BindAllInterfaces()
         );

         kernel.ReBind<IContestsContext>()
              .To<ContestsContext>()
              .InRequestScope(); 
```

一般来说，Ninject 非常擅长报告这些类型的错误，所以我真的被抛出了一个循环！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-24T18:11:17.757

我也收到了这个错误消息，但事实证明我的一个接口实际上并没有被任何类实现（我忘记将它添加到类声明中）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-02-13T00:53:22.690

如果任何人仍然有问题，请听出于某种原因 ninject 无法按照我们对 mvc 4 的预期工作。在您的 web api 中，您需要编写此代码

```
public DefaultController() : base() { } 
```

这消除了关于没有默认构造函数的错误，然后当您需要从 get 方法获取数据时编写以下代码：

```
public IEnumerable<YourModelGoesHere> Get() 
{
    return context.YourData;  
} 
```

请记住，您还必须在此处访问您的 db 类，例如：

```
DefaultConnection context = new DefaultConnection(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-09-27T04:11:03.273

我知道这是一篇旧帖子，但我在某个链接上找到了解决方案，所以在这里分享。希望能帮助到你。

[http://weblogs.asp.net/hajan/archive/2013/03/16/quick-tip-how-to-make-ninject-work-with-asp-net-web-api.aspx?CommentPosted=true#评论留言](http://weblogs.asp.net/hajan/archive/2013/03/16/quick-tip-how-to-make-ninject-work-with-asp-net-web-api.aspx?CommentPosted=true#commentmessage)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-01-14T14:08:35.980

只需安装 Ninject.MvcXXX 包，其中 XXX - MVC 版本...

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-06-01T13:34:22.023

你用框架注册了容器吗？我更喜欢使用 autofac，这里是一个如何将 autofac 与 API 一起使用的示例。[http://alexmg.com/post/2012/03/08/Autofac-ASPNET-Web-API-%28Beta%29-Integration.aspx](http://alexmg.com/post/2012/03/08/Autofac-ASPNET-Web-API-%28Beta%29-Integration.aspx)

此外，Mark Seeman 有一篇关于 DI 的好文章，一般来说使用 WebAPI

[http://blog.ploeh.dk/2012/03/20/RobustDIWithTheASPNETWebAPI.aspx](http://blog.ploeh.dk/2012/03/20/RobustDIWithTheASPNETWebAPI.aspx)

来自普洛：

```
GlobalConfiguration.Configuration.ServiceResolver.SetResolver(
    t => this.container.Kernel.HasComponent(t) ?
        this.container.Resolve(t) :
        null,
    t => this.container.ResolveAll(t).Cast<object>()); 
```

以上必须在 global.asax 中执行

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-08-20T02:13:25.993

希望这对其他人有帮助...

我遇到了同样的问题，这与我负责注册负责初始化控制器的程序集的移动类有关。从 Web 移出到框架项目中。

使用 Autofac 但同样适用于其他容器。

正在调用：

```
builder.RegisterApiControllers(Assembly.GetExecutingAssembly()); 
```

当它在 Web 应用程序中时工作正常，但是当移动到框架项目时抛出异常，因为执行程序集不再包含控制器。

而是必须更新为：

```
builder.RegisterApiControllers(Assembly.GetCallingAssembly()); 
```

# iphone - CLLocationManager 回调（locationManager:didUpdateToLocation:fromLocation 和 locationManager:didFailWithError:) 从未调用

> ID：10849133
> 
> 赞同：0
> 
> 时间：2012-06-01T11:08:58.723
> 
> 标签：iphone, ios, location, cllocationmanager

我正在尝试获取当前位置，并且正在解决此问题：

大约 90% 的时间。它只是做得很好：它获取位置并调用`didUpdateToLocation:`，或者它失败并调用`didFailWithError:`。一切如预期。

但有时（*总是在 iOS 4.2 模拟器中，有时在真正的 iPhone 4S 设备上），它根本无法获取位置并且它不调用任何回调（有时它调用 didFailWithError 但在启动后 2 或 3 分钟更新位置，有时它永远不会这样做），所以我找不到一种方法来意识到这一点。

顺便说一句，无法获取位置的是设备/模拟器，因为当发生这种情况时，地图应用程序也**无法**获取位置，无限期地显示动画活动轮。服务已启用，并且一切都配置良好，因为它在大多数情况下都可以正常工作。

所以，问题是：有没有办法让我知道这种情况并通知用户？

谢谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:24:41.467

我认为解决此问题的唯一方法是设置一个计时器并通知用户如果在合理的时间（例如，20 或 30 秒）后没有调用任何委托方法，则无法获得位置修复。然后打电话`stopUpdatingLocation`，稍后再试。

我不知道是否记录了这种行为，但似乎不能保证您会从位置管理器那里得到响应，因为它可能会长时间处于无法获得位置修复但没有的状态观察错误，要么。

# javascript - 错误：“标识符在数字文字 javascript 之后立即开始”

> ID：10849135
> 
> 赞同：0
> 
> 时间：2012-06-01T11:09:04.197
> 
> 标签：javascript, jquery

```
$(obj).replaceWith('<a class="fd-tool-li" onclick="javascript:Like(this, @Model.User.HOCODE.ToString(), @Model.CommentHOCODE.ToString());">' +
'<i class="icon-thumbs-up"></i><span> ' +UserCount+ ' Like this</span>'+
'<a name="Unlike"class="fd-tool-li" onclick="javascript:Unlike(this, @Model.User.HOCODE.ToString(), @Model.CommentHOCODE.ToString());">(Unlike?)</a>' +
'</a>'); 
```

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:15:47.090

简化代码以避免引用问题（并提高可读性）。从替换调用中提取 onclick javascript：

```
$(obj).html('<a class=fd-tool-li onclick="javascript:Like(this, @Model.User.HOCODE.ToString(), @Model.CommentHOCODE.ToString());">' +
    '<i class="icon-thumbs-up"></i><span> ' +1+ ' Like this</span>'+
    '<a name=Unlike class=fd-tool-li>(Unlike?)</a>' +
    '</a>'
);

$(obj).click(function() {
   // things
}); 
```

那是假设 @Model 是由某种预编译器定义的，并且不存在于代码中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:13:58.783

如果这确实是您的代码在到达浏览器时的样子（而不是部分代码在服务器上处理，而某些不同的东西进入浏览器），那么您有一个语法错误`@Model.CommentHOCODE.ToString()`。你需要解决这个问题。标识符不能以`@`.

如果相反，它是在服务器端处理并替换为一系列字符，如果它真的是一个字符串，你可能需要在它周围加上引号。

同样，您是否有一个名为 的**客户端**变量`UserCount`？因为如果不是，并且如果没有在服务器端处理，那也可能是一个问题。

从根本上讲，您需要查看该代码并确定服务器端发生了什么以及发送到客户端浏览器的结果是什么，然后确保发送到客户端浏览器的内容是有效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-23T21:57:56.667

在我的例子中，我使用 UUID 来设置一个复杂的变量（一些东西 + UUID），我做的一个简单的解决方案是：

将“-”替换为“”，标识符的唯一性保持有效。

如果您使用 Razor (ASP.net) 而不是这样做：@Model.User.HOCODE.ToString() 尝试使用：@(Model.User.HOCODE.ToString())

问候。

# java - 在android中制作一个超时小部件

> ID：10849136
> 
> 赞同：0
> 
> 时间：2012-06-01T11:09:04.540
> 
> 标签：java, android, widget

几天来我一直在阅读有关小部件的信息，但我还无法弄清楚它们。我运行的只是一个“hello world”小部件。onUpdate() 因为我猜有 30 分钟的限制，所以我从来没有工作过，我需要至少更新 ecery 5 分钟。我阅读[了这篇文章](http://android-er.blogslpot.com.ar/2010/10/app-widget-upsing-alarm-manager.html)和另一篇文章，但是当教程以时钟示例开始时，我被卡住了。现在我想做的就是用警报管理器刷新小部件，所以它显示一个数字 private static int num =0; @Override onUpdate(..) { remoteView.setText(num); 数++；}

如果有人可以为我提供一个关于如何做到这一点的简单且有效的示例，我将不胜感激！提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:24:00.433

我将为您提供一些您可以关注的有用链接：

[如何编写 Android 小部件](http://buildmobile.com/how-to-code-an-android-widget/#fbid=hPu_C3byOSj)

[教程 - 创建自定义模拟时钟小部件](http://nexsoftware.net/wp/2009/07/29/tutorial-creating-a-custom-analogclock-widget/)

[开源模拟小部件](http://code.google.com/p/open-ahome-clock-widget/)

# jsp - java.sql.SQLException：我的 jsp 页面中的游标状态无效

> ID：10849137
> 
> 赞同：0
> 
> 时间：2012-06-01T11:09:26.707
> 
> 标签：jsp, jdbc

我希望创建一个表，其中前 3 列是纯文本，但第 4 列是文本区域列，最后一列是下拉列表列。这些表单元素中给出的所有输入都将发送到一个单独的 jsp 页面，在该页面中 iit 将在数据库中更新。这是我写的代码

```
 <form name="input" action="UpdateSMCFO.jsp" method="post">

    <table>
    <tr>
    <th>Dist. Code</th>
    <th>Cons. No.</th>
    <th>Consumer Details</th>
    <th>Verification by FO</th>
    <th>Remarks by SO</th>

    </tr>
    <%
    int r=0;
    while (rs.next()) {r++;
                   }
    for(int j=0;j<r;j++)
                   {
    out.println("<TR>");
    for (int i = 0; i < columnCount; i++) {
    if(i>=0 && i<=2)
    {
        out.println("<TD>"+rs.getString(i+1)+"</TD>");
    }
    else if(i==3)
    {
    out.println("<TD><input type=\"text\" name=\"FOVerification\""+String.valueOf(j)+"/></TD>");
    }
    else
    {
        out.println("<TD><select name=\"SORemarks\""+String.valueOf(j)+">");
        out.println("<option value=\"Please Specify\">Please Specify</option>");
        out.println("<option value=\"Genuine Customer\">Genuine Customer</option>");
        out.println("<option value=\"MC\">MC-To be blocked</option>");
        out.println("</select></TD>");
    }
    }              
    out.println("</TR>");

                  }
%>
</table>
 <input type="submit" value="Submit" />

 </form> 
```

我很确定这不是处理表格元素的方法，但这就是我能想到的。请在 jsp 和 html 范围内给我任何想法。现在，我一周前才开始学习jsp，所以我对这些概念很陌生。

这是堆栈跟踪：

类型异常报告

信息

描述服务器遇到一个内部错误 () 阻止它完成这个请求。

例外

javax.servlet.ServletException: java.sql.SQLException: [Microsoft][ODBC Driver Manager] 游标状态无效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T06:39:57.160

知道了！我只是试图用异常的名称来理解它：INvalid cursor state..

所以我的 sql 游标状态在第 34 行无效！

将其更改为：

```
 while (rs.next()) {

    out.println("<TR>");
    for (int i = 0; i < columnCount; i++) {
    if(i>=0 && i<=2)
    {
        out.println("<TD>"+rs.getString(i+1)+"</TD>");
    }
    else if(i==3)
    {
    out.println("<TD><input type=\"text\" name=\"FOVerification\""+String.valueOf(r)+"/></TD>");
    }
           else if(i==4)
    {
        out.println("<TD><select name=\"SORemarks\""+String.valueOf(r)+">");
        out.println("<option value=\"Please Specify\">Please Specify</option>");
        out.println("<option value=\"Genuine Customer\">Genuine Customer</option>");
        out.println("<option value=\"MC\">MC-To be blocked</option>");
        out.println("</select></TD>");
    }
    }
    out.println("</TR>");
    r++;
                  } 
```

它奏效了！:)

# python - 我可以在python中以百分比精度执行“字符串包含X”吗？

> ID：10849141
> 
> 赞同：18
> 
> 时间：2012-06-01T11:09:33.623
> 
> 标签：python, string, comparison, ocr

我需要对一大块文本进行一些 OCR 并检查它是否包含某个字符串，但由于 OCR 的不准确性，我需要它来检查它是否包含类似于字符串的约 85% 匹配的内容。

例如，我可能会 OCR 一大块文本以确保它不包含`no information available`但 OCR 可能会看到`n0 inf0rmation available`或误解一些字符。

有没有一种简单的方法可以在 Python 中做到这一点？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-06-01T11:31:59.087

正如 发布的那样`gauden`，`SequenceMatcher`in`difflib`是一种简单的方法。使用`ratio()`, 从文档中返回一个介于两个字符串之间`0`并`1`对应于相似性的值：

> 其中 T 是两个序列中元素的总数，M 是匹配数，这是 2.0*M / T。请注意，如果序列相同，则为 1.0，如果它们没有共同点，则为 0.0。

例子：

```
>>> import difflib
>>> difflib.SequenceMatcher(None,'no information available','n0 inf0rmation available').ratio()
0.91666666666666663 
```

还有`get_close_matches`，这可能对您有用，您可以指定距离截止值，它将从列表返回该距离内的所有匹配项：

```
>>> difflib.get_close_matches('unicorn', ['unicycle', 'uncorn', 'corny', 
                              'house'], cutoff=0.8)
['uncorn']
>>> difflib.get_close_matches('unicorn', ['unicycle'  'uncorn', 'corny',
                              'house'], cutoff=0.5)
['uncorn', 'corny', 'unicycle'] 
```

**更新：找到部分子序列匹配**

为了找到与三个单词序列的紧密匹配，我会将文本拆分为单词，然后将它们分组为三个单词序列，然后 apply `difflib.get_close_matches`，如下所示：

```
import difflib
text = "Here is the text we are trying to match across to find the three word
        sequence n0 inf0rmation available I wonder if we will find it?"    
words = text.split()
three = [' '.join([i,j,k]) for i,j,k in zip(words, words[1:], words[2:])]
print difflib.get_close_matches('no information available', three, cutoff=0.9)
#Oyutput:
['n0 inf0rmation available'] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-01T11:19:49.267

标准库模块中的[`SequenceMatcher`对象](http://docs.python.org/library/difflib.html#difflib.SequenceMatcher)`difflib`会直接给你一个比率：

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-01T11:16:21.880

您可以计算[Levenshtein distance](http://en.wikipedia.org/wiki/Levenshtein_distance)。这是一个 Python 实现： http: [//pypi.python.org/pypi/python-Levenshtein/](http://pypi.python.org/pypi/python-Levenshtein/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T11:28:58.667

我不知道任何可用的 python 库可以开箱即用，但您可能会找到一个（或找到一个 C 或 C++ 库并为其编写 Python 包装器）。

您还可以尝试推出自己的解决方案，基于“蛮力”逐个字符比较，规则定义两个给定字符之间的“接近度”并根据这些规则计算“准确性”（即“o”=> "0" : 90% 准确率, "o" => "w" : 1% 准确率等），或者玩更多涉及 IA 的东西（如果你不熟悉 IA，“编程集体智能”一书可以获得您开始了，尽管实施示例有些差）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-09T06:29:33.600

只是为了扩展 fraxel 的答案，这允许找到任意长度的字符串。很抱歉格式不好，所以很难。准确度是 findWords 中的截止值

```
def joinAllInTupleList(toupe):
#joinAllInTuple( [("hello", "world"),("face","book")]) = ['hello world', 'face book']
result=[]
for i in toupe:
    #i is the tuple itself
    carry = " "
    for z in i:
        #z is an element of i
        carry+=" "+z

    result.append(carry.strip())
return result

def findWords(text,wordSequence):

#setup
words = text.split(" ")

#get a list of subLists based on the length of wordSequence
#i.e. get all wordSequence length sub-sequences in text!

result=[]
numberOfWordsInSequence = len(wordSequence.strip().split(" ")) 
for i in range(numberOfWordsInSequence):
    result.append(words[i:])

# print 'result',result
c=zip(*result)

# print 'c',c
#join each tuple to a string
joined = joinAllInTupleList(c)

return difflib.get_close_matches(wordSequence, joined, cutoff=0.72389) 
```

# scala - 如何给 scalaz 的 Functor 赋予具有上下文绑定的更高种类的类型？

> ID：10849142
> 
> 赞同：4
> 
> 时间：2012-06-01T11:09:36.867
> 
> 标签：scala, scalaz

我想为以下类定义一个 Functor 实例：

```
class RequiresManifest[A: Manifest] {
  def value: A
}

class RequiresAnyRef[A <: AnyRef] {
  def value: A
}

class RequiresBothManifestAndAnyRef[A <: AnyRef: Manifest] {
  def value: A
} 
```

这可能吗 ？或者，可以定义一个 'BoundedFunctor 特征吗？像这样的东西：

```
trait BoundedFunctor[F[_], Bound[_]] {
  def fmap[A: Bound, B: Bound](r: F[A], f: A => B): F[B]
} 
```

这是我的励志示例：如何为 TypedConverter 类定义 Functor。

```
import com.thoughtworks.xstream.converters.Converter

abstract class TypedConverter[A <: AnyRef: Manifest] extends Converter { 
  final def canConvert(klass: Class[_]) = 
    manifest[A].erasure.isAssignableFrom(klass)

  final def marshal(value: AnyRef, writer: HierarchicalStreamWriter, 
                    context: MarshallingContext) =
    typedMarshal(value.asInstanceOf[A], writer, context)

  final def unmarshal(reader: HierarchicalStreamReader, 
                      context: UnmarshallingContext) = 
    typedUnmarshal(reader, context)

  def typedMarshal(value: A, writer: HierarchicalStreamWriter, 
                   context: MarshallingContext): Unit

  def typedUnmarshal(reader: HierarchicalStreamReader, 
                     context: UnmarshallingContext): A
} 
```

这种更高种类的类型对其类型参数有两个约束，第一个是 Manifest，因为它用于“canConvert”的实现，第二个是 AnyRef，因为 unmarshal 需要一个 Object。

实际上我正在尝试创建一个 InvariantFunctor，但 Functor 会开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-05T01:40:18.453

看，在数学中，函子是从一个类别到另一个类别的映射。在 Comp Sci 中，人们不知何故相信函子是内函子，例如对于 Scala 话语，它在所有 Scala 类型上都定义了。

scalaz 的实现就是这样写的。

但它不必如此。据我了解，在您的情况下，您有一个子类别（大致由 Bound 定义）；所以函子将从 Bound 到 Scala。

总的来说这是一个好主意，没有太多探索。我相信我们必须进一步调查。尽管在编程语言中明确定义类别有点问题。甚至不确定Agda。

# ios - 使用 Google OAuth API 检索出生日期

> ID：10849148
> 
> 赞同：10
> 
> 时间：2012-06-01T11:09:46.927
> 
> 标签：ios, oauth-2.0, date

有谁知道如何通过 Google OAuth api 检索 DOB？我可以通过将范围设置为[https://www.googleapis.com/auth/userinfo.profile](https://www.googleapis.com/auth/userinfo.profile)来获取其他信息，例如姓名、电子邮件、性别。但我无法在这个范围内获得 DOB。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-12T18:54:39.493

我肯定会为我的帐户获得它：

```
{
  "id": "108635752367054807758",
  "name": "Nicolas Garnier",
  "given_name": "Nicolas",
  "family_name": "Garnier",
  "link": "https://plus.google.com/108635752367054807758",
  "picture": "https://lh4.googleusercontent.com/-K1xGP8W20xk/AAAAAAAAAAI/AAAAAAAABhY/Cs_4qr30MxI/photo.jpg",
  "gender": "male",
  "birthday": "0000-08-25",
  "locale": "en"
} 
```

我所做的只是授权[https://www.googleapis.com/auth/userinfo.profile范围，然后向](https://www.googleapis.com/auth/userinfo.profile)[https://www.googleapis.com/oauth2/v2/userinfo](https://www.googleapis.com/oauth2/v2/userinfo)发送 GET 请求

首先确保您正在测试的 Google+ 帐户设置了生日（当然），然后在 OAuth 2.0 Playground 上尝试请求，例如：[https ://code.google.com/oauthplayground/#step1&apisSelect=https% 3A//www.googleapis.com/auth/userinfo.profile&url=https%3A//www.googleapis.com/oauth2/v2/userinfo](https://code.google.com/oauthplayground/#step1&apisSelect=https%3A//www.googleapis.com/auth/userinfo.profile&url=https%3A//www.googleapis.com/oauth2/v2/userinfo)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-23T02:17:04.770

看来您必须发送 2 个请求：

*   [https://www.googleapis.com/plus/v1/people/me（oauth](https://www.googleapis.com/plus/v1/people/me) v1）
*   [https://www.googleapis.com/oauth2/v2/userinfo（oauth](https://www.googleapis.com/oauth2/v2/userinfo) v2）

获取 google plus 个人资料数据和 google 帐户数据（如果需要，还有生日日期和区域设置）

我使用抄写员，它工作正常。设置两个范围（“https://www.googleapis.com/auth/userinfo.profile [https://www.googleapis.com/auth/plus.me](https://www.googleapis.com/auth/plus.me) ”）并为两个 REST 链接发送两个请求

# qt - 如何将插槽连接到 Qt 中的用户定义变量？

> ID：10849149
> 
> 赞同：1
> 
> 时间：2012-06-01T11:09:47.457
> 
> 标签：qt, signals-slots

抱歉，如果我遗漏了一些明显的东西，但我似乎无法找到我的问题的答案。任何帮助，将不胜感激。

我正在尝试使用 QSlider 来操作我创建的类中的数据。

在主窗口构造函数中，我有以下内容：

```
connect(ui->horizontalSlider, SIGNAL(valueChanged(int)), this, SLOT(setValue(int))); 
```

使用同一类中定义的插槽：

```
class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();

private:
    AFrame *frame;
    Ui::MainWindow *ui;

public slots:
    void setValue(int val)
    {
        frame->setMphValue(val);
    }

}; 
```

我的框架类是一个提升的小部件，允许在我设置的图像上绘图，定义如下：

```
class AFrame : public QLabel
{
    Q_OBJECT

public:
    AFrame( QWidget *parent );
    void setMphValue(int val) { m_mph = val; }

protected:
    void paintEvent( QPaintEvent *event );

private:
    int m_mph;

}; 
```

问题是当我尝试在 AFrame 类的 paintEvent 函数中分配 m_mph 值时，整数值会丢失。

我有什么明显的遗漏吗？有没有更好的方法来解决这个问题？

还有我的paintEvent代码：

```
void AFrame::paintEvent(QPaintEvent *event)
{

    QLabel::paintEvent(event);
    QPainter painter(this);

    QPen pen("#FF0099");
    pen.setWidth(8);

    painter.setPen(pen);

    //rpm
    painter.drawLine(250,275,165,165);

    //oil
    painter.drawLine(450,100,400,75);

    //fuel
    painter.drawLine(650,95,600,65);

    //mph

    QRect rec(0,0,125,3);

    int velocity = m_mph;
    int rpmStartVal = -225;
    float mph = velocity * 1.68;

    painter.translate(870,275);
    painter.rotate(rpmStartVal + mph);

    painter.drawRect(rec);

 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-04T14:27:53.610

整数值不会丢失。`mph`小部件对值更新时应该重新绘制这一事实没有神奇的洞察力。您`setMphValue`应该如下所示。这就是它的全部。

```
void setMphValue(int val) {
   m_mph = val;
   update();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-08T09:58:24.423

添加到 Kuba 的回复中：

您还应该检查是否`val`与以前的值相同，以避免在实际上没有必要时避免重新绘制 - 以及稍后调用的任何东西都会产生副作用无限循环`update()`touch `setMphValue()`。

在全：

```
void setMphValue(int val) {
   if (val == m_mph) return;
   m_mph = val;
   update();
} 
```

# couchdb - 在 map/reduce 之后从 CouchDB 获取完整的对象

> ID：10849150
> 
> 赞同：0
> 
> 时间：2012-06-01T11:09:53.323
> 
> 标签：couchdb

在此示例[http://guide.couchdb.org/draft/cookbook.html#unique](http://guide.couchdb.org/draft/cookbook.html#unique)中，输出行被分组以实现唯一性，但 value 属性仅包含在 reduce 步骤中定义的数据。有没有一种有效的方法来获取完整的对象作为值？

另一种方法是在 reduce 之后获取对象的 id 作为值，并在第二步中查询完整的对象。在这种情况下，您将如何设计相应的 map/reduce 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:57:39.650

我想你想要“？include_docs = true”。

看看这里..

[http://wiki.apache.org/couchdb/HTTP_view_API#Querying_Options](http://wiki.apache.org/couchdb/HTTP_view_API#Querying_Options)

# c# - ViewState 在更新 DataTable 时自动更新

> ID：10849152
> 
> 赞同：3
> 
> 时间：2012-06-01T11:10:03.430
> 
> 标签：c#, asp.net, datatable, viewstate

我在**ViewState中分配一个****DataTable**。

 **```
public void Method1()
{    
    DataTable dt = getData(); //Gets the Data

    ViewState["dtThis"] = dt;
} 
```

现在，当“ ***Method2*** ”执行时， **ViewState**将被分配给**DataTable**。

```
public void Method2()
{    
    DataTable dt2 = (DataTable)ViewState["dtThis"];

    dt2.Columns.Remove("FirstName");    //Removing a column

    dt2.AcceptChanges();
} 
```

现在，在执行***Method2***后，当我检查**(DataTable)ViewState("dtThis")**时，即使我没有将**dt2**分配回ViewState("dtThis") ，它也具有 DataTable **dt2** **。**（意味着在 ViewSate("dtThis") 数据表中删除了列 - "FirstName"）。

 ****知道为什么 ViewState 会出现这种行为吗？

以及如何保持原来的 ViewState ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T11:14:11.730

您正在将数据表的引用存储到视图状态中。因此，所做的任何更新`viewstate["dtThis"]`都会直接影响在`method1()`.

保留原始视图状态数据表的一种方法是使用 DataTable.Copy() 创建原始副本并对该副本进行操作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T11:19:57.593

我不确定原因，但它也发生在我身上，但当时我有点着急，所以我选择了另一种方式。当我从 ViewState 获取数据表时，我创建了一个新表并遍历原始表的记录并在新表中设置值:) 所以我的 viewstate 表保持不变。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-06T07:23:50.530

像这样使用它可以解决引用问题

```
DataTable dt2= ( (DataTable)ViewState["dtThis"]).Copy(); 
```******

# objective-c - CS193P，运行程序和作业 2

> ID：10849162
> 
> 赞同：0
> 
> 时间：2012-06-01T11:10:57.910
> 
> 标签：objective-c

我正在做 CS193P 的作业 2 - 斯坦福的 IOS 编程课程。我想知道的一件事是calculatorBrain 应该如何接受和运行一个存储的程序，一个程序是一个数组或操作数和操作的堆栈。

假设我们要执行以下计算：2、3、4、+、*

如果您将其输入计算器，则会发生以下情况：

2 3 4 一次一个地被压入堆栈，并为每个调用 runProgram ，它只是将数字从堆栈中弹出并返回它的值，该值被压入堆栈。
你按下 +，runProgram 弹出这个并看到它必须添加它所做的前 2 个项目，并将结果推送到现在包含 2、7 的堆栈上。你按下 *，堆栈现在包含 14。

但是我看不到如何将包含 (2, 3, 4, +, `*`) 的数组传递给大脑（讲师稍后说您可以将程序传递给 runProgram 类方法并获得结果，而不必实例化一个大脑对象），因为 runProgram 将首先尝试执行顶部操作数 ie`*`并为此将接下来的两个对象从堆栈中取出并尝试将它们相乘并将结果推回堆栈。这两个对象是“+”和“4”，它们不起作用。

现在教练做这件事的时间比我长得多，因为我认为我错过了一些东西，但我不确定是什么。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:23:07.663

如果您将此视为将“2,3,4,+,*”传递给“大脑”，则需要在堆栈处理器的上下文中进行思考。

参数按照它们在数组中出现的顺序进行评估。但是，不要混淆堆栈的数组，它们是不同的对象。堆栈在计算器例程内部，输入数组在例程外部。由于我没有在您所在的任何学校上特定的课程，因此我无法谈论所使用语言的细节，但基本上，将数组 "2,3,4,+,*" 视为输入到计算器的键盘。然而，计算器是一个非常简单的机器，一次只处理一个按键。

因此，当您处理数组时，您基本上是将数组的每个元素传递给计算器进行处理，然后计算器决定是推入堆栈还是执行运算符。这些元素按顺序传递，因此计算器接收：2 后跟 3，然后是 4，然后是 '+'，然后是 '*'。

看起来您正在尝试将数组作为堆栈传递给计算器来考虑问题，而这不是您想要在这里做的。

我希望这很清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T23:33:41.897

好的 - 答案是 runProgram 从堆栈中获取下一项的方式是递归调用 popOperandOffStack (pOOS) 方法。

因此，当它通过一个由 2 3 4 + * 组成的程序时，它首先将 * 从堆栈中弹出。然后它必须将接下来的两个操作数从堆栈中弹出。所以它调用 pOOS，它首先返回一个“+”，然后它再次调用 pOOS（两次），分别得到“4”和“3”，它们被添加到 7，它被推回堆栈（现在包含2 7) 并且也作为调用 pOOS 的结果返回。因此，当它为“*”操作的第一个操作数调用 pOOS 时，它没有得到“+”，它实际上得到了“7”。第二次调用 pOOS（对于 * 的第二个操作数）得到 '2'，然后它很高兴地乘以得到 14。

我确实尝试在我的 IT 字典中查找递归，但它只是说“查看递归”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-02T20:57:00.060

@steve Ives，我认为您在最后一条评论中找到了答案。几周前完成了这项任务（也是我自己完成的），我发现这个网站有助于理解逆波兰计算器，它基本上模仿了一个。但是当你在思考递归时，你的大脑可能会进入过载模式。希望这有助于验证您的一些场景测试......祝你好运。 [HP12C 模拟器](http://www.epx.com.br/ctb/hp12c.php)

# android - 将大型视频从 Android 崩溃应用程序上传到 PHP 服务器

> ID：10849165
> 
> 赞同：4
> 
> 时间：2012-06-01T11:11:06.047
> 
> 标签：android, video, file-upload, upload

我正在将大型视频上传到 php 服务器，这会导致应用程序崩溃。

所以，我使用 **了 conn.setChunkedStreamingMode(maxBufferSize);**
但它给出了**响应：请求实体太大**

服务器端视频以编码形式接受，因此我使用 Base64 进行编码。

我正在使用 JSON 网络服务上传视频

```
 uploadvideo(&userid,&video,&title,&description,&type) 
```

我已经搜索了很多但无法获得解决方案。谁能告诉我

[http://www.coderzheaven.com/2012/03/29/uploading-audio-video-or-image-files-from-android-to-server/](http://www.coderzheaven.com/2012/03/29/uploading-audio-video-or-image-files-from-android-to-server/)

[http://www.mail-archive.com/android-developers@googlegroups.com/msg92856.html](http://www.mail-archive.com/android-developers@googlegroups.com/msg92856.html)

哪个更好以及如何添加参数？

我使用过类似 dis 的代码

```
try {
    FileInputStream fileInputStream = new FileInputStream(myFile.getAbsolutePath());        //(new File(selectedPath) );
    // open a URL connection to the Servlet
    URL url = new URL(urlString);
    // Open a HTTP connection to the URL
    conn = (HttpURLConnection) url.openConnection();
    // Allow Inputs
    conn.setDoInput(true);
    // Allow Outputs
    conn.setDoOutput(true);
    // Don't use a cached copy.
    conn.setUseCaches(false);
    // Use a post method.
    conn.setRequestMethod("POST");
    conn.setChunkedStreamingMode(maxBufferSize);
    conn.setRequestProperty("Connection", "Keep-Alive");
    conn.setRequestProperty("Content-Type", "multipart/form-data;boundary="+boundary);

    dos = new DataOutputStream( conn.getOutputStream() );
    dos.writeBytes(twoHyphens + boundary + lineEnd);
    dos.writeBytes("Content-Disposition: form-data; name=\"userid\""+ lineEnd + lineEnd);
    dos.writeBytes(strUserid+lineEnd);

    bytesAvailable = fileInputStream.available();
    bufferSize = Math.min(bytesAvailable, maxBufferSize);
    buffer = new byte[bufferSize];

    // read file and write it into form...
    bytesRead = fileInputStream.read(buffer, 0, bufferSize);
    while (bytesRead > 0)
    {
        dos.write(buffer, 0, bufferSize);
        bytesAvailable = fileInputStream.available();
        bufferSize = Math.min(bytesAvailable, maxBufferSize);
        bytesRead = fileInputStream.read(buffer, 0, bufferSize);
    }
    String encodeurl = Base64.encodeBytes(buffer);

    dos.writeBytes(twoHyphens + boundary + lineEnd);
    dos.writeBytes("Content-Disposition: form-data; name=\"video\""+ lineEnd + lineEnd);
    dos.writeBytes(encodeurl+lineEnd);

    dos.writeBytes(twoHyphens + boundary + lineEnd);
    dos.writeBytes("Content-Disposition: form-data; name=\"title\""+ lineEnd + lineEnd);
    dos.writeBytes(strVideoName+lineEnd);

    dos.writeBytes(twoHyphens + boundary + lineEnd);
    dos.writeBytes("Content-Disposition: form-data; name=\"description\""+ lineEnd + lineEnd);
    dos.writeBytes(strVideoComments+lineEnd);

    dos.writeBytes(twoHyphens + boundary + lineEnd);
    dos.writeBytes("Content-Disposition: form-data; name=\"type\""+ lineEnd + lineEnd);
    dos.writeBytes(type+lineEnd);

    responseMsg = conn.getResponseMessage();
    // close streams
    System.out.println("Debug  File is written");
    fileInputStream.close();
    dos.flush();
    dos.close();
    }
    catch (MalformedURLException ex)
    {
        System.out.println(("Debug  Error: " + ex.getMessage()));
    }
    catch (IOException ioe)
    {
        System.out.println("Debug  Error: " + ioe.getMessage());
    }
    //------------------ read the SERVER RESPONSE
    try {
        inStream = new DataInputStream ( conn.getInputStream() );
        System.out.println("Input Stream :: "+inStream.toString());
        String str;

        while (( str = inStream.readLine()) != null)
        {
            System.out.println("Debug  Server Response "+str);
        }
        inStream.close();

    }
    catch (IOException ioex){
         System.out.println("Debug  Error: " + ioex.getMessage());
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-31T13:30:58.633

您应该将大文件分成小部分然后尝试发送。然后在服务器上加入这个小部分

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-11T09:42:38.833

`conn.setChunkedStreamingMode(1024);` 使用和 buffersize分块发送数据`int maxBufferSize = 1 * 1024;`

# c# - MVVM 轻量级工具包：新窗口

> ID：10849167
> 
> 赞同：0
> 
> 时间：2012-06-01T11:11:13.457
> 
> 标签：c#, wpf, mvvm, mvvm-light

我一直在搜索，但找不到使用加载新窗口的 MVVM 轻型工具包的示例。我想要一个在父窗口和子窗口之间传递的示例。

例如，我在我的 MainWindow.xaml 中，我希望能够加载一个新窗口，两者同时显示。不是弹窗。

我正在使用 WPF。

任何例子都会有很大帮助吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-06T08:06:35.487

您可以使用 UIService 类来处理应用程序中新 Windows 的创建/销毁。

例如，看看 Cinch (http://cinch.codeplex.com/)，它提出了以下 UIServices：

*   UI 服务事件记录器（仅限 Cinch V1）
*   消息框（Cinch V1 和 Cinch V2 WPF/SL）
*   打开文件（Cinch V1 和 Cinch V2 WPF）
*   保存文件（Cinch V1 和 Cinch V2 WPF）
*   弹出窗口（Cinch V1 和 Cinch V2 WPF）
*   儿童窗（Cinch V2 SL）

# java - 为 Hadoop MapReduce 编译类文件

> ID：10849168
> 
> 赞同：0
> 
> 时间：2012-06-01T11:11:30.417
> 
> 标签：java, hadoop, mapreduce

在 Hadoop 中成功运行默认 wordcount 示例后，我通过复制 wordcount 示例的内容创建了一个新的 java 文件。我稍微修改了代码。现在我要编译新的 java 文件，创建 *.jar 文件。我没有日食，因为这似乎很头疼。vim 中的纯 java 代码，没有 eclipse 通常会创建的任何文件结构。

我的问题是：鉴于我在特定文件夹中有一个 java 文件，我该如何编译并运行它？我在互联网上看到的所有教程都没有真正显示这些步骤。如果我的 java 程序中使用了一些库怎么办？

我真的希望有人能给我一个很好的见解。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T02:38:24.293

首先，确保所有依赖项（Hadoop jar 和 $HADOOP_HOME/lib 中的 jar）都在**CLASS_PATH**中。可以使用 Hadoop CLI 命令“ **bin/hadoop 类路径**（我使用版本 0.22.0）”来获取所有依赖项。然后，使用 javac 编译您的源代码。我还建议您研究一些构建工具，例如**Ant**或**Maven**。

# python - libgmail python的错误

> ID：10849169
> 
> 赞同：0
> 
> 时间：2012-06-01T11:11:36.693
> 
> 标签：python, sms, libgmail

大家好，我正在运行以下 python 脚本以通过 libgmail 模块发送短信：

```
#!/usr/bin/env python
import libgmail

stuff = libgmail.GmailAccount("example@gmail.com", "password")
myCellEmail = "phonenumber@tmomail.net"

stuff.login()
msg=libgmail.GmailComposedMessage(myCellEmail, "", "Hello World! From python-libgmail!")
stuff.sendMessage(msg) 
```

但是我收到以下错误：

```
Traceback (most recent call last):
  File "./sms.py", line 7, in <module>
    stuff.login()
  File "/usr/local/lib/python2.7/dist-packages/libgmail.py", line 305, in login
    pageData = self._retrievePage(req)
  File "/usr/local/lib/python2.7/dist-packages/libgmail.py", line 340, in _retrievePage
    req = ClientCookie.Request(urlOrRequest)
  File "/usr/local/lib/python2.7/dist-packages/mechanize/_request.py", line 31, in __init__
    if not _rfc3986.is_clean_uri(url):
  File "/usr/local/lib/python2.7/dist-packages/mechanize/_rfc3986.py", line 62, in is_clean_uri
    return not bool(BAD_URI_CHARS_RE.search(uri))
TypeError: expected string or buffer 
```

libgmail 模块已安装在我想要的目录中，所以这不是问题。任何答案都会有所帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T21:40:54.693

libgmail 不再维护。（我是它的最后一个维护者。）

然而，现在 Gmail 有了 IMAP 接口，你甚至不再需要 libgmail。Python 的[imaplib](http://docs.python.org/library/imaplib.html)可以让您检查邮件，而[smtplib](http://docs.python.org/library/smtplib.html)可以让您发送邮件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:35:28.303

这看起来像一个已知的错误，显然不会被修复，参见 [http://sourceforge.net/tracker/?func=detail&aid=3149613&group_id=113492&atid=665330](http://sourceforge.net/tracker/?func=detail&aid=3149613&group_id=113492&atid=665330)

我想你要么必须找到另一个解决方案，要么维护 libgmail。

# javascript - 从子 Knockout ViewModel 调用导航函数

> ID：10849176
> 
> 赞同：0
> 
> 时间：2012-06-01T11:12:01.850
> 
> 标签：javascript, asp.net-mvc-4, knockout.js, asp.net-web-api, single-page-application

我正在使用 ASP.NET MVC、Knockout、nav.js 等构建单页应用程序，

两个视图模型：

1.  父视图模型；
2.  子视图模型；

FatherViewModel 拥有所有 Navigation 方法，FatherViewModel 拥有 SonViewModel 的实例，

**问：如何从 SonViewModel 访问那些 Navigation 方法？**

```
FatherViewModel = function () {
    var self = this;
    var dataSource = {...}

    self.sonViewModel = new SonViewModel();

    self.nav = new NavHistory({
        params: {...},
        onNavigate: function (navEntry) {...}
    }).initialize({ linkToUrl: true });
    //navigation methods:
    self.gotoHomePage = function (){...}
}
SonViewModel = function () {
    var self = this;
    var dataSource = {...}

    //...
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:51:33.653

为了从儿子视图模型访问父亲的方法，您需要将父亲的引用传递给儿子，如下所示：

```
FatherViewModel = function () {
    var self = this;
    var dataSource = {...}

    self.sonViewModel = new SonViewModel(self);

    self.nav = new NavHistory({
        params: {...},
        onNavigate: function (navEntry) {...}
    }).initialize({ linkToUrl: true });
    //navigation methods:
    self.gotoHomePage = function (){...}
}
SonViewModel = function (father) {
    var self = this;
    self.father = father;
    var dataSource = {...}

    function gotoHomePage() {
        self.father.gotoHomePage();
    }

    //...
} 
```

# excel - 使用 VBA 遍历过滤列表的最简单方法是什么？

> ID：10849177
> 
> 赞同：50
> 
> 时间：2012-06-01T11:12:08.237
> 
> 标签：excel, vba

如果我在 Excel 中设置了一个自动过滤器，并且我想用 VBA 代码遍历一列中的所有可见数据，那么最简单的方法是什么？

不应包含所有已过滤掉的隐藏行，因此从上到下的普通 Range 无济于事。

有什么好主意吗？

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-06-01T12:09:51.573

假设我的单元格中有数字 1 到 10，`A2:A11`而我的自动过滤器位于`A1`. 我现在过滤只显示大于 5 的数字（即 6、7、8、9、10）。

此代码将仅打印可见单元格：

```
Sub SpecialLoop()
    Dim cl As Range, rng As Range

    Set rng = Range("A2:A11")

    For Each cl In rng
        If cl.EntireRow.Hidden = False Then //Use Hidden property to check if filtered or not
            Debug.Print cl
        End If
    Next

End Sub 
```

也许有更好的方法，`SpecialCells`但上述方法在 Excel 2003 中对我有用。

**编辑**

刚刚找到了一个更好的方法`SpecialCells`：

```
Sub SpecialLoop()
    Dim cl As Range, rng As Range

    Set rng = Range("A2:A11")

    For Each cl In rng.SpecialCells(xlCellTypeVisible)
        Debug.Print cl
    Next cl

End Sub 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-01T13:15:19.387

我建议使用`Offset`假设标题位于第 1 行。请参阅此示例

```
Option Explicit

Sub Sample()
    Dim rRange As Range, filRange As Range, Rng as Range
    'Remove any filters
    ActiveSheet.AutoFilterMode = False

    '~~> Set your range
    Set rRange = Sheets("Sheet1").Range("A1:E10")

    With rRange
        '~~> Set your criteria and filter
        .AutoFilter Field:=1, Criteria1:="=1"

        '~~> Filter, offset(to exclude headers)
        Set filRange = .Offset(1, 0).SpecialCells(xlCellTypeVisible).EntireRow

        Debug.Print filRange.Address

        For Each Rng In filRange
            '~~> Your Code
        Next
    End With

    'Remove any filters
    ActiveSheet.AutoFilterMode = False
End Sub 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-06-01T12:11:00.793

一种方法是假设 A1 中的过滤数据向下；

```
dim Rng as Range
set Rng = Range("A2", Range("A2").End(xlDown)).Cells.SpecialCells(xlCellTypeVisible)
...
for each cell in Rng 
   ... 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-26T22:37:27.303

我使用`RowHeight`了范围的属性（这也意味着单元格）。如果它为零，则它是隐藏的。因此，只需像往常一样遍历所有行，但在`if`条件检查中检查该属性，因为您想对可见单元格执行`If myRange.RowHeight > 0 then DoStuff`哪些操作。`DoStuff`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-06T23:15:41.073

SpecialCells 实际上并不工作，因为它需要是连续的。我通过添加排序功能解决了这个问题，以便根据我需要的列对数据进行排序。

抱歉没有对代码发表评论，因为我不打算分享它：

```
Sub testtt()
    arr = FilterAndGetData(Worksheets("Data").range("A:K"), Array(1, 9), Array("george", "WeeklyCash"), Array(1, 2, 3, 10, 11), 1)
    Debug.Print sms(arr)
End Sub
Function FilterAndGetData(ByVal rng As Variant, ByVal fields As Variant, ByVal criterias As Variant, ByVal colstoreturn As Variant, ByVal headers As Boolean) As Variant
Dim SUset, EAset, CMset
If Application.ScreenUpdating Then Application.ScreenUpdating = False: SUset = False Else SUset = True
If Application.EnableEvents Then Application.EnableEvents = False: EAset = False Else EAset = True
If Application.Calculation = xlCalculationAutomatic Then Application.Calculation = xlCalculationManual: CMset = False Else CMset = True
For Each col In rng.Columns: col.Hidden = False: Next col

Dim oldsheet, scol, ecol, srow, hyesno As String
Dim i, counter As Integer

oldsheet = ActiveSheet.Name

Worksheets(rng.Worksheet.Name).Activate

Worksheets(rng.Worksheet.Name).AutoFilterMode = False

scol = Chr(rng.Column + 64)
ecol = Chr(rng.Columns.Count + rng.Column + 64 - 1)
srow = rng.row

If UBound(fields) - LBound(fields) <> UBound(criterias) - LBound(criterias) Then FilterAndGetData = "Fields&Crit. counts dont match": GoTo done

dd = sortrange(rng, colstoreturn, headers)

For i = LBound(fields) To UBound(fields)
    rng.AutoFilter Field:=CStr(fields(i)), Criteria1:=CStr(criterias(i))
Next i

Dim rngg As Variant

rngg = rng.SpecialCells(xlCellTypeVisible)
Debug.Print ActiveSheet.AutoFilter.range.address
FilterAndGetData = ActiveSheet.AutoFilter.range.SpecialCells(xlCellTypeVisible).Value

For Each row In rng.Rows
    If row.EntireRow.Hidden Then Debug.Print yes
Next row

done:
    'Worksheets("Data").AutoFilterMode = False
    Worksheets(oldsheet).Activate
    If SUset Then Application.ScreenUpdating = True
    If EAset Then Application.EnableEvents = True
    If CMset Then Application.Calculation = xlCalculationAutomatic
End Function
Function sortrange(ByVal rng As Variant, ByVal colnumbers As Variant, ByVal headers As Boolean)

    Dim SUset, EAset, CMset
    If Application.ScreenUpdating Then Application.ScreenUpdating = False: SUset = False Else SUset = True
    If Application.EnableEvents Then Application.EnableEvents = False: EAset = False Else EAset = True
    If Application.Calculation = xlCalculationAutomatic Then Application.Calculation = xlCalculationManual: CMset = False Else CMset = True
    For Each col In rng.Columns: col.Hidden = False: Next col

    Dim oldsheet, scol, srow, sortcol, hyesno As String
    Dim i, counter As Integer
    oldsheet = ActiveSheet.Name
    Worksheets(rng.Worksheet.Name).Activate
    Worksheets(rng.Worksheet.Name).AutoFilterMode = False
    scol = rng.Column
    srow = rng.row

    If headers Then hyesno = xlYes Else hyesno = xlNo

    For i = LBound(colnumbers) To UBound(colnumbers)
        rng.Sort key1:=range(Chr(scol + colnumbers(i) + 63) + CStr(srow)), order1:=xlAscending, Header:=hyesno
    Next i
    sortrange = "123"
done:
    Worksheets(oldsheet).Activate
    If SUset Then Application.ScreenUpdating = True
    If EAset Then Application.EnableEvents = True
    If CMset Then Application.Calculation = xlCalculationAutomatic
End Function 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-04-09T11:55:30.867

```
a = 2
x = 0

Do Until Cells(a, 1).Value = ""
If Rows(a).Hidden = False Then
x = Cells(a, 1).Value + x
End If
a = a + 1
Loop

End Sub 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-03-30T06:02:46.397

```
Thisworkbook.sheets("Mysheet").Range("A1).Currentregion.copy 
Thisworkbook.sheets("Othersheet").Range("A1) 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-10-03T18:44:41.763

```
Call MyMacro()

ActiveCell.Offset(1, 0).Activate

Do Until Selection.EntireRow.Hidden = False
If Selection.EntireRow.Hidden = True Then
ActiveCell.Offset(1, 0).Activate
End If
Loop 
```

# java - 在目录结构中移动时 Java 小程序不运行

> ID：10849178
> 
> 赞同：0
> 
> 时间：2012-06-01T11:12:08.777
> 
> 标签：java, html, browser, applet, classnotfoundexception

我想知道是否有人可以帮助我解决这个问题，因为我一直在努力让它发挥作用。

有一个现有的 Java 小程序肯定可以工作，但我需要将它从目录层次结构顶部的当前位置移动到它内部深处的某个位置。

运行它的原始 HTML 代码是这样的：

```
<html>
<applet code=DSVisApp.class
archive="jcommon-1.0.16.jar,jfreechart-1.0.13.jar,
jung-graph-impl-2.0.1.jar, jung-visualization-2.0.1.jar,
gson-1.7.1.jar, jung-algorithms-2.0.1.jar, jung-api-2.0.1.jar,
collections-generic-4.01.jar,colt-1.2.0.jar" name=DSVis height=100%
width=100%>
</applet>
</html> 
```

（我知道，我刚刚继承了它。我想让它从新位置开始工作，然后担心切换到`<object>`。）

结构是：

```
DSVisApp
 + bin
 + + DSVisApp.class
 + + and lots of other classes for this applet
 + src
 + a couple of other directories
jcommon-1.0.16.jar
and all the other jar files with support code 
```

这适用于上面的 HTML。

现在我想把它放在几个目录级别，例如：

```
alpha
 + beta
 + + gamma
 + + + delta
 + + + + DSVisApp...
 + + + + jar files... 
```

我以为我可以只输入一个 codebase="/alpha/beta/gamma/delta" 但如果我这样做，我会得到：

```
basic: Added progress listener: sun.plugin.util.GrayBoxPainter$GrayBoxProgressListener@1929190

basic: Plugin2ClassLoader.addURL parent called for
http://disco.local/alpha/beta/gamma/delta/jcommon-1.0.16.jar

basic: Plugin2ClassLoader.addURL parent called for
http://disco.local/alpha/beta/gamma/delta/jfreechart-1.0.13.jar

basic: Plugin2ClassLoader.addURL parent called for
http://disco.local/alpha/beta/gamma/delta/jung-graph-impl-2.0.1.jar

basic: Plugin2ClassLoader.addURL parent called for
http://disco.local/alpha/beta/gamma/delta/jung-visualization-2.0.1.jar

basic: Plugin2ClassLoader.addURL parent called for
http://disco.local/alpha/beta/gamma/delta/gson-1.7.1.jar

basic: Plugin2ClassLoader.addURL parent called for
http://disco.local/alpha/beta/gamma/delta/jung-algorithms-2.0.1.jar

basic: Plugin2ClassLoader.addURL parent called for
http://disco.local/alpha/beta/gamma/delta/jung-api-2.0.1.jar

basic: Plugin2ClassLoader.addURL parent called for
http://disco.local/alpha/beta/gamma/delta/collections-generic-4.01.jar

basic: Plugin2ClassLoader.addURL parent called for
http://disco.local/alpha/beta/gamma/delta/colt-1.2.0.jar

network: Cache entry not found [url:
http://disco.local/alpha/beta/gamma/delta/DSVisApp.class, version:
null]
network: Connecting
http://disco.local/alpha/beta/gamma/delta/DSVisApp.class with
proxy=DIRECT
network: Connecting http://disco.local:80/ with proxy=DIRECT
network: Connecting
http://disco.local/alpha/beta/gamma/delta/DSVisApp.class with cookie
"SESS59f29a0af2165ae4a0b5f5e4a22a492a=i2ds99n4hd27qoi2nida5iah67;
has_js=1"
network: Cache entry not found [url:
http://disco.local/alpha/beta/gamma/delta/DSVisApp/class.class,
version: null]
network: Connecting
http://disco.local/alpha/beta/gamma/delta/DSVisApp/class.class with
proxy=DIRECT
network: Connecting http://disco.local:80/ with proxy=DIRECT
network: Connecting
http://disco.local/alpha/beta/gamma/delta/DSVisApp/class.class with
cookie "SESS59f29a0af2165ae4a0b5f5e4a22a492a=i2ds99n4hd27qoi2nida5iah67;
has_js=1"
basic: load: class DSVisApp.class not found.
load: class DSVisApp.class not found.
java.lang.ClassNotFoundException: DSVisApp.class
       at sun.plugin2.applet.Applet2ClassLoader.findClass(Unknown Source)
       at sun.plugin2.applet.Plugin2ClassLoader.loadClass0(Unknown Source)
       at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
       at sun.plugin2.applet.Plugin2ClassLoader.loadClass(Unknown Source)
       at java.lang.ClassLoader.loadClass(Unknown Source)
       at sun.plugin2.applet.Plugin2ClassLoader.loadCode(Unknown Source)
       at sun.plugin2.applet.Plugin2Manager.createApplet(Unknown Source)
       at sun.plugin2.applet.Plugin2Manager$AppletExecutionRunnable.run(Unknown
Source)
       at java.lang.Thread.run(Unknown Source)
Exception: java.lang.ClassNotFoundException: DSVisApp.class
Ignored exception: java.lang.ClassNotFoundException: DSVisApp.class
basic: Loading Java Applet Failed... 
```

反正我的头发不多——把它撕下来很痛。

它可能是服务器或 Java 配置的东西吗？因为很明显原始版本*没有*指向实际的类——实际的类在 DSVisApp/bin/DSVisApp.class）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:24:12.713

如果您将浏览器指向[http://disco.local/alpha/beta/gamma/delta/DSVisApp.class](http://disco.local/alpha/beta/gamma/delta/DSVisApp.class)，会发生什么？
如果您的服务器设置正确，系统会提示您保存 DSVisApp.class。
我猜你会得到一个404。
这表明存在 Web 服务器配置问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T11:20:19.887

感谢您的建议。

原来我做了一个毫无根据的假设（并不完全出乎意料，因为我只是顺便了解 Java）。我假设给我的代码是在服务器上运行的，记住我无权访问服务器。

将提供的代码导出到 JAR 中并将其放入与第 3 方 JAR 相同的级别并将该 JAR 添加到存档参数的列表中即可立即解决问题。

# tomcat7 - 不同虚拟主机的相同主机/服务器名称

> ID：10849179
> 
> 赞同：0
> 
> 时间：2012-06-01T11:12:10.873
> 
> 标签：tomcat7, apache, mod-jk

我在 3 个 Tomcat 实例中部署了 3 个应用程序

```
http://host:8080/app0
http://host:8081/app1
http://host:8082/app2 
```

我有workers.properties

worker.list=worker1,worker2,worker3

```
# Set properties for worker 'example' (ajp13)

worker.worker1.host=host
worker.worker1.port=8009
worker.worker1.type=ajp13

# Set properties for worker 'example' (ajp13)

worker.worker2.host=host
worker.worker2.port=8019
worker.worker2.type=ajp13

# Set properties for worker 'example' (ajp13)

worker.worker3.host=host
worker.worker3.port=8029
worker.worker3.type=ajp13 
```

我的 httpd.conf 应该是什么样子？所有虚拟主机都可以具有相同的服务器名称，如下所示

```
# app0 instance virtual host
<VirtualHost *:80>
ServerName host
DocumentRoot TOMCAT_HOME"\Tomcat Instance 1\webapps"
ErrorLog logs/app0.log
JkMount /app0 worker1
</VirtualHost>

# app1 instance virtual host
<VirtualHost *:80>
ServerName host
DocumentRoot TOMCAT_HOME"\Tomcat Instance 2\webapps"
ErrorLog logs/app1.log
JkMount /app1 worker2
</VirtualHost>

# app2 instance virtual host
<VirtualHost *:80>
ServerName host
DocumentRoot TOMCAT_HOME"\Tomcat Instance 2\webapps"
ErrorLog logs/app2.log
JkMount /app2 worker3 
</VirtualHost> 
```

谁能帮我？如果我使用 mod 代理，我会间歇性地收到 502 代理错误，所以考虑使用 mod jk。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T10:11:03.927

我不确定Tomcat的一部分，但这就是我要做的

忘记不同的端口（如果您愿意，您可以，但如果您只想设置虚拟主机，则没有必要）

访问

```
http://host/app0
http://host/app1
http://host/app2 
```

修改 httpd.conf 为

```
<VirtualHost *>
  ServerName host
  DocumentRoot TOMCAT_HOME"\Tomcat Instance 2\webapps"
  Alias /app0 APP0_ROOT_HERE
  Alias /app1 APP1_ROOT_HERE
  Alias /app2 APP2_ROOT_HERE
</VirtualHost> 
```

此配置将处理具有服务器名称“主机”的所有请求，如果它与任何别名匹配，将使用指示的文档根目录。如果没有别名匹配，它将使用默认的文档根。不确定单独的日志记录，但应该可以，请查看[http://httpd.apache.org/docs/2.2/vhosts/name-based.html](http://httpd.apache.org/docs/2.2/vhosts/name-based.html)

# java - 透明 UI (+UIManager) 工件

> ID：10849183
> 
> 赞同：2
> 
> 时间：2012-06-01T11:12:42.037
> 
> 标签：java, swing, transparent, uimanager, uidefaults

我有一个`background image`在 a 上绘制 a 的应用程序`panel`，但要实现最佳 UI，我需要设置`Component`背景`Transparent`：

我通过使用 UI 管理器使每个组件变得透明： `uimanager.put(Button, background(new color(0, 0, 0, 0);`<- 类似的东西，这工作得很好，除了..

`onMouseOver`重绘本身（我猜）并`component`导致工件..我怎样才能避免这种情况`UIManager`？

（我创建了一个类：`uidefaults.java`所有`UIManager`设置）

提前致谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T12:43:56.700

好吧，这很简单——不要对不透明的组件（确切地说是任何 JComponent 祖先）使用透明背景颜色。

要删除组件背景，您不需要设置透明颜色 - 只需使用此方法：

```
component.setOpaque ( false ); 
```

这将隐藏组件背景并且还将更改组件重绘策略，因此它不会在重绘调用时创建任何工件。

此外，如果您仍然希望组件后面有半透明背景，您可以像这样覆盖 paintComponent 方法：

```
 JLabel label = new JLabel ( "Transparent background" )
    {
        protected void paintComponent ( Graphics g )
        {
            g.setColor ( getBackground () );
            g.fillRect ( 0, 0, getWidth (), getHeight () );
            super.paintComponent ( g );
        }
    };
    label.setOpaque ( false );
    label.setBackground ( new Color ( 255, 0, 0, 128 ) ); 
```

这将强制标签隐藏其默认背景并绘制您自己的背景（这取决于组件的背景属性）。

# javascript - 底部的Javascript，正文中的函数调用？

> ID：10849188
> 
> 赞同：3
> 
> 时间：2012-06-01T11:13:08.333
> 
> 标签：javascript, jquery, document, onload

只是一个简单的问题，我正在遵循将所有 Javascript 文件保存在文档底部之前关闭正文的做法。但是我想在正文中调用一个函数，该函数会出现在 JS 包含之前，因此会失败。

有没有办法让这个功能在不将文件移动到头部的情况下工作？

干杯!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:14:19.803

是的，你可以用

```
window.onload = function() {
   //call to your function here
}; 
```

但如果您可以修改页面的底部，这个解决方案可能会更好：
[停止支付您的 jQuery 税](http://samsaffron.com/archive/2012/02/17/stop-paying-your-jquery-tax)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T11:20:38.803

您还可以从 html 文档中调用您的函数：

```
<body onload="yourFunction()"> 
```

并在 .js 中定义它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T11:14:54.510

是的，使用`$(document).ready()`将在 dom 加载后调用的函数，这样你的所有 js 函数都是已知的。

```
$(function(){
  //do stuff here
} 
```

但您的 jQuery 文件必须在该调用之前。

如果您不想使用 jquery-这取决于您如何声明该函数。是否使用 var 是有区别的。看看这个样本：

```
function FunctionDefinitionOrder() {
    assert(isRed(), "Named function definition doesn't matter");        
    assert(isGreen === undefined, "However, it's not the case with anonymous functions");

    function isRed() { return true; }
    var isGreen = function () { return true; };

    assert(isGreen(), "Anonymous functions are known only after the definition");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T11:17:33.650

```
$(document).ready(function() {
   // put all your jQuery goodness in here.
 }); 
```

检查这个网址：[准备好](http://docs.jquery.com/Tutorials%3aIntroducing_%24%28document%29.ready%28%29)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T11:32:25.007

如果您没有在正文 onload 事件中调用该函数，您应该能够从页面上的任何位置调用这些函数，即使这些函数位于页面底部也是如此。浏览器在加载页面时将找到的所有功能都加载到内存中，因此在页面准备好时所有功能都可用。如果找不到该功能，您要么

*   调用函数名时拼写错误（不太可能）

或者

*   包含要调用的函数的脚本标签之间的 JS 中存在错误

第二种情况，检查JS控制台是否有错误。您还可以尝试将函数调用替换为包含在单独脚本标记中的另一个函数，仅输出警告消息。如果此调用有效，但对您的“真实”函数的调用无效，则 JS 代码中的某处存在错误，导致该函数无法加载。

# javascript - 用javascript访问数据库？

> ID：10849192
> 
> 赞同：1
> 
> 时间：2012-06-01T11:13:43.287
> 
> 标签：javascript, jsp

如何使用 javascript 连接和访问数据库的值？我想注册一个用户，所以当我要创建用户时，我想检查用户名是否可用（意味着要对数据库进行搜索操作）？我们可以用javascript做到这一点吗？因为它用于客户端所以我很困惑？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:18:56.970

> 我们可以用javascript做到这一点吗？因为它用于客户端所以我很困惑？

JavaScript 是一种通用编程语言，而不是客户端语言。人们一直在服务器端使用它。

但是，如果您的意思是，您是否可以*在 Web 浏览器*中使用 JavaScript来访问*您服务器上*的数据库，答案是：不能直接，不能（好吧，除非您在 Intranet 上并且跳过您真的不知道的障碍想跳过）；你需要一个中间层。您可以让客户端上的 JavaScript 向服务器发送消息（例如，通过[ajax](http://en.wikipedia.org/wiki/Ajax_%28programming%29)）；然后，服务器端代码需要处理这些消息，确保它们有效且无恶意，然后非常谨慎地更新数据库并将结果发送回客户端浏览器。

服务器端语言可以是 JavaScript 或您想在服务器上使用的任何其他语言。我注意到你标记了你的问题`jsp`，所以大概你想用 Java（而不是 JavaScript）编写服务器端的东西。如果是这样，并且如果你想使用 ajax 来获得现代的、非页面刷新的体验，它看起来像这样：

1.  用户执行和操作，在浏览器中引发事件。

2.  JavaScript 代码通过向服务器发送 ajax 消息来处理事件；在登录的情况下，您可能想要执行`POST`.

3.  一个 JSP（或者更好的是，一个 servlet）

    1.  收到`POST`消息

    2.  验证内容，检查恶意内容和其他类似攻击

    3.  使用准备好的语句和类似语句查询和/或更新数据库以避免 SQL 注入攻击

    4.  发送响应，其中包含有关操作结果的信息

4.  JavaScript 代码接收到对`POST`ajax 调用的响应并查看它以了解发生了什么

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T11:26:22.337

直接说不行。JavaScript 通常在不受信任的机器上运行。由于 JavaScript 是一种脚本语言。因此，您应该考虑使用 ajax 调用（例如帖子）来访问您的服务器数据库...

类似的[线程](https://stackoverflow.com/questions/598900/run-db-query-sql-server-2005-with-ajax-is-it-possible)讨论这个问题

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T11:16:08.290

感谢上帝，JavaScript 是不可能的。您需要一种服务器端脚本语言来验证某些用户对数据库的输入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T11:16:33.113

出于多种原因（不良做法、安全问题等），您不应该使用客户端 javascript 访问数据库，但如果您真的想这样做，这里有一个示例：

```
var connection = new ActiveXObject("ADODB.Connection") ;

var connectionstring="Data Source=<server>;Initial Catalog=<catalog>;User ID=<user>;Password=<password>;Provider=SQLOLEDB";

connection.Open(connectionstring);
var rs = new ActiveXObject("ADODB.Recordset");

rs.Open("SELECT * FROM table", connection);
rs.MoveFirst
while(!rs.eof)
{
   document.write(rs.fields(1));
   rs.movenext;
}

rs.close;
connection.close; 
```

连接到 sql server 的更好方法是使用一些服务器端语言，如 PHP、Java、.NET 等。客户端 javascript 应仅用于接口。

并且有一个关于服务器javascript存在的古老传说的传言，但这是另一个故事。;)

# php - 表单无法正常工作的 PHP 会话

> ID：10849196
> 
> 赞同：0
> 
> 时间：2012-06-01T11:13:57.107
> 
> 标签：php, forms, session

我正在尝试了解如何使用 PHP 会话，因为我需要在我正在制作的另一个网站上实现它们。无论如何，我已经制作了一个非常基本的表格，上面有 3 个问题，当您回答一个问题然后离开网页时，它会记住您之前提出的问题。

会话部分有效，问题是问题显示两次，当您转到下一个问题时，上一个答案如下所示，如果您想了解我的意思，请转到[简单表单会话](http://s504518.brunelweb.net/SessionButtons.php)

有谁知道我可以如何更改它，以便一次只显示 1 个问题并且会话仍然有效，目前如果我取出所有会话代码，它可以正常工作。这是到目前为止我得到的所有代码。

```
<?php
session_set_cookie_params(2592000); //Sets cookie to last for 30 days
session_start();
?>

<html>
<head>
<title> Using Sessions with Buttons </title>
</head>
<body>
<p> This is the start</p>
<form method='POST' action='SessionButtons.php'>
<input type='submit' name='start' value='start' />
</form>

<?php
$q1 = 'This is question 1';
$q2 = 'This is the second question';
$q3 = 'This is question, number 3';

$answer1 = "This is the first answer";
$answer2 = "This is the answer to the second question";
$answer3 = "Third answer, this is ";
$answer4 = "This is the mighty fourth answer";

$start = "<form method='POST' action='SessionButtons.php'>
<input type='submit' name='yes1' value='yes' />
<input type='submit' name='no1' value='no' />
</form>";

$form1 = "<form method='POST' action='SessionButtons.php'>
<input type='submit' name='yes2' value='yes' />
<input type='submit' name='no2' value='no' />
</form>";

$form2 = "<form method='POST' action='SessionButtons.php'>
<input type='submit' name='yes3' value='yes' />
<input type='submit' name='no3' value='no' />
</form>";

if (!isset($_POST['start'])){
if (isset($_SESSION['question'])){
echo $_SESSION['question'];
echo $_SESSION['form'];
}

} //If start button has been pressed, display questions
else
{
echo $q1;
echo $start;
}

if ($_POST['yes1']){
echo $q2;
echo $form1;
$_SESSION['question'] = $q2;
$_SESSION['form'] = $form1;
}

if ($_POST['no1']){
echo $q3;
echo $form2;
$_SESSION['question'] = $q3;
$_SESSION['form'] = $form2;
}

if ($_POST['yes2']){
echo $answer1;
$_SESSION['answer'] = $answer1;
}

if ($_POST['no2']){
echo $answer2;
$_SESSION['answer'] = $answer2;
}

if ($_POST['yes3']){
echo $answer3;
$_SESSION['answer'] = $answer3;
}

if ($_POST['no3']){
echo $answer4;
$_SESSION['answer'] = $answer4;
}

?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:34:28.120

只需要使用您的部分代码来做一些解释

```
if (!isset($_POST['start'])){
if (isset($_SESSION['question']) && $_POST['yes1'] && $_POST['no1']){
echo $_SESSION['question'];
echo $_SESSION['form'];
}

} //If start button has been pressed, display questions
else
{
echo $q1;
echo $start;
}

if ($_POST['yes1']){
echo $q2;
echo $form1;
$_SESSION['question'] = $q2;
$_SESSION['form'] = $form1;
} 
```

如果您有问题，重新调整我的代码以跳过第二个 if 语句。试试这种方式。

# android - Android：如何在 WebView 中显示位图？

> ID：10849200
> 
> 赞同：9
> 
> 时间：2012-06-01T11:14:03.433
> 
> 标签：android, webview, bitmap

由于内置的​​平移和缩放功能，我正在使用 WebView 来显示类似地图的图像。但是，我需要在地图图像上的某些点覆盖一些其他信息（标记等），并显示所有这些。

所以我将我的基本地图图像作为位图，并将我的其他图像覆盖在上面（使用 Canvas 和更多位图），给我一个包含所有信息的最终位图。因为我需要在运行时编辑图像，所以我不能使用预制文件。实现位图的叠加不是问题，问题是我不知道如何使用平移和缩放功能轻松显示生成的图像。

有没有办法使用 WebView 显示位图？或者有什么其他建议？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-30T10:55:49.003

使用来自 itsrajesh4uguys 的链接，我创建了这个代码片段：

```
// Desired Bitmap and the html code, where you want to place it
Bitmap bitmap = YOUR_BITMAP;
String html="<html><body><img src='{IMAGE_PLACEHOLDER}' /></body></html>";

// Convert bitmap to Base64 encoded image for web
ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
bitmap.compress(Bitmap.CompressFormat.PNG, 100, byteArrayOutputStream);
byte[] byteArray = byteArrayOutputStream.toByteArray();
String imgageBase64 = Base64.encodeToString(byteArray, Base64.DEFAULT);
    String image = "data:image/png;base64," + imgageBase64;

// Use image for the img src parameter in your html and load to webview
html = html.replace("{IMAGE_PLACEHOLDER}", image);
webview.loadDataWithBaseURL("file:///android_asset/", html, "text/html", "utf-8", ""); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-19T07:55:19.410

如果您想在 webview 中加载图像，则不需要占位符

您可以直接在 webview 中加载 dataurl。例如：

```
ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
bitmap.compress(Bitmap.CompressFormat.PNG, 100, byteArrayOutputStream);
byte[] byteArray = byteArrayOutputStream.toByteArray();
String imgageBase64 = Base64.encodeToString(byteArray, Base64.DEFAULT);
    String dataURL= "data:image/png;base64," + imgageBase64;

webview.loadUrl(dataURL); //pass the bitmap base64 dataurl in URL parameter 
```

希望它可以帮助别人！:-)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T11:17:31.533

通常在 webview 中，我们可以使用 html 标签设置图像。这不会产生任何问题。

以任何方式使用此链接获取示例问题和答案

[为什么Bitmap to Base64 String在android的webview上显示黑色背景？](https://stackoverflow.com/questions/5133879/why-bitmap-to-base64-string-showing-black-background-on-webview-in-android)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-11T10:26:17.317

答案似乎是：不，在 web 视图中显示本地位图对象而不将其保存到文件是不可能的。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-06-01T11:25:59.510

你不需要位图，只要它的名字就足够了。尝试以下操作：

```
html = "<html><img src=\"" + imageUrl
                        + "\"></html>";
final WebView webView = (WebView) view
                    .findViewById(R.id.yourWebView);
wvImageView.getSettings().setJavaScriptEnabled(true);
wvImageView.loadDataWithBaseURL("", html, "text/html", "utf-8", ""); 
```

这应该在 WebView 上显示您的图像。如果你想提供缩放功能，试试这个：

```
webView.getSettings().setSupportZoom(true);
webView.getSettings().setBuiltInZoomControls(true); 
```

# linux - 定义代码段

> ID：10849230
> 
> 赞同：1
> 
> 时间：2012-06-01T11:16:39.010
> 
> 标签：linux, assembly, 64-bit, nasm, elf

我正在尝试使用 Nasm 组装以下代码：

```
section .stage1_main 
extern stage1_get_stage2_addr
global stage1_main

stage1_main:
    sub rsp, 0x8
    call stage1_get_stage2_addr 
    cmp rax, -1 
    jz error
    add rsp, 0x8
    push stage1_main
    jmp rax 

error:
     ret 
```

.stage1_main 是我定义的一个新部分。问题是 Nasm 将其定义为 DATA 部分

```
objdump -h main.o 
```

main.o：文件格式elf64-x86-64

部分：

Idx 名称 大小 VMA LMA 文件关闭 Algn 0 .stage1_main 0000001b 0000000000000000 0000000000000000 000001c0 2**0 CONTENTS, ALLOC, LOAD, RELOC, READONLY, **DATA**

我需要一个代码部分...有没有办法将我的部分定义为代码部分（如 .text）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T11:27:17.850

您可以`section`明确说明该部分的内容是可执行的：

`section .stage1_main exec`

并且您可能还想坚持 16 字节对齐（这`nasm`将自动为该`.text`部分执行）：

`section .stage1_main exec align=16`

# jquery - onclick中获取动态表格单元格的值

> ID：10849234
> 
> 赞同：0
> 
> 时间：2012-06-01T11:16:55.340
> 
> 标签：jquery, html-table

如果我在我的代码中执行下面的 jQuery：

```
if (data.PCompany.length > 0) {                        
$.each(data.PCompany, function (i, subEntity) {   
html.push('<tr><td id="row"><a style="color:green;text-decoration:underline;cursor:pointer;" id="link">' + subEntity.Name + '</a></td>
<td id="deem">' + subEntity.Deemed + '</td></tr>'); 
        });
        }
     if (data.CCompany.length > 0) {
    $.each(data.CCompany, function (i, subEntity) {
    html.push('<tr><td nowrap="nowrap">' + subEntity.Name + '</td><td id="deem1" >'
    + subEntity.Deemed +'</td><td>'+ subEntity.Effect shares+ '</td></tr>');
      });            
      } 
```

这将生成两个表，每个表中有很多列。现在我想通过`subEntity.Deemed`单击表中的列之一来获取两个表中列的值`pcompany`。这会产生如下结果：

```
`Pcomapny table`
 <td id="deem">1<td> <td id="deem">2<td>
 Ccompany
 <td id="deem1">3<td> <td id="deem1">4<td> <td id="deem1">5<td> <td id="deem1">6<td>

On first row  onclick of Pcompany table i want to get 1 and 3,
   1 and 4, 1 and 5, 1 and 6
on second row onclick want to get 2 and 3 , 2 and 4, 2 and 5 etc... 
```

# grails - 与下拉相关的 grails

> ID：10849235
> 
> 赞同：0
> 
> 时间：2012-06-01T11:17:03.167
> 
> 标签：grails

这是我的问题:--

```
class ReasonForCancellation {
    String reason
    Status status
    Date lastUpdated
    Date dateCreated

    static constraints = {
    reason(blank:false,maxSize:100,unique:true)
    dateCreated()
    lastUpdated()
    }

    enum Status{
        ACTIVE(true),
        INACTIVE(false)

        private boolean bool

        public Status(boolean bool){
            this.bool = bool
        }
    }

} 
```

我的视图页面中有 1 个文本框和 1 个下拉菜单。当我在文本框中给出值“FOO”并单击活动选项并保存它时。它保存了。当我单击编辑选项并单击停用选项时我需要做什么并尝试在文本框中给出相同的值“FOO”并保存它，然后它应该使用相同的唯一值本身更新。它不应该给出唯一的警报消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T16:32:31.963

您可能会得到唯一约束，因为 Grails 认为您正在尝试保存新记录。您要进行更新的保存方法应类似于：

```
def update = {
  def reasonForCancellation = ReasonForCancellation.get(params.id)
  reasonForCancellation.properties = params
  reasonForCancellation.save()
} 
```

并且您应该将 GSP 中的编辑记录的 ID 作为隐藏字段。这是很标准的东西。您可能想花一些时间阅读更多文档和/或阅读一本关于 Grails 的好书。

# xml - 使用 xslt 递归转换 xml 文档

> ID：10849240
> 
> 赞同：1
> 
> 时间：2012-06-01T11:17:16.677
> 
> 标签：xml, xslt

我开始使用 xml 和 xslt，我还阅读了一些教程等。根据我对这个 xml 的理解：

```
<?xml version="1.0"?>  
<Menu>  
    <Accounts type="menu" label="Accounts">  
        <ListUsers type="cmd" label="List users">  
            <cmd>HAha</cmd>  
        </ListUsers>  
        <AddUsers type="cmd" label="Add users">  
            <cmd></cmd>  
        </AddUsers>  
        <DeleteUsers type="cmd" label="Delete users">  
            <cmd></cmd>  
        </DeleteUsers>  
    </Accounts>  
    <Hardware type="menu" label="Hardware">  
        <ListDisks type="cmd" label="List disks">  
            <cmd></cmd>  
        </ListDisks>  
    </Hardware>  
    <Network type="menu" label="Network"></Network>  
    <Filesystem type="menu" label="Filesystem"></Filesystem>  
</Menu> 
```

这个xslt：

```
<?xml version="1.0"?>  
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">  
<xsl:template match="/*">   
    <xsl:apply-templates select="*"/>  
</xsl:template>  
<xsl:template match="*">  
    <div><xsl:value-of select="@label"/></div>  
</xsl:template>   
</xsl:stylesheet> 
```

应该输出所有元素的标签，但它没有......我错过了什么，请你纠正并解释一下，谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T11:37:51.990

好吧，您应该向我们展示您想要的输出，但是如果您想处理所有元素，那么请确保您继续处理所有元素，或者通过更改来展平层次结构

```
<xsl:template match="/*">
<xsl:apply-templates select="*"/>
</xsl:template> 
```

到

```
<xsl:template match="/*">
<xsl:apply-templates select=".//*"/>
</xsl:template> 
```

或通过更改使用递归

```
<xsl:template match="*">
<div><xsl:value-of select="@label"/></div>
</xsl:template> 
```

类似于

```
<xsl:template match="*">
<div>
  <xsl:value-of select="@label"/>
  <xsl:apply-templates select="*"/>
</div>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T11:49:39.750

**这段代码有两个问题**：

> ```
> <xsl:template match="*">       
>   <div>
>     <xsl:value-of select="@label"/>
>   </div>   
> </xsl:template> 
> ```

1.  **不是顶部元素（或顶部元素本身）的子元素的元素根本*不会*被处理**。为了纠正这个问题，应该在模板正文中添加一条新指令——例如：`<xsl:apply-templates select="*"/>`

2.  **没有`label`属性的元素将生成一个空的`<div>`.** 如果使用适当的模板匹配模式，则可以避免这种情况，以便仅为具有此属性的元素选择模板。

**这是一个*完整*的解决方案，它可以简短而简单**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>

 <xsl:template match="*[@label]">
     <div><xsl:value-of select="@label"/></div>
   <xsl:apply-templates select="*"/>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<Menu>
    <Accounts type="menu" label="Accounts">
        <ListUsers type="cmd" label="List users">
            <cmd>HAha</cmd>
        </ListUsers>
        <AddUsers type="cmd" label="Add users">
            <cmd></cmd>
        </AddUsers>
        <DeleteUsers type="cmd" label="Delete users">
            <cmd></cmd>
        </DeleteUsers>
    </Accounts>
    <Hardware type="menu" label="Hardware">
        <ListDisks type="cmd" label="List disks">
            <cmd></cmd>
        </ListDisks>
    </Hardware>
    <Network type="menu" label="Network"></Network>
    <Filesystem type="menu" label="Filesystem"></Filesystem>
</Menu> 
```

**产生了想要的正确结果：**

```
<div>Accounts</div>
<div>List users</div>
<div>Add users</div>
<div>Delete users</div>
<div>Hardware</div>
<div>List disks</div>
<div>Network</div>
<div>Filesystem</div> 
```

# c# - 简单的 VB 到 C# 和 webservice 错误

> ID：10849242
> 
> 赞同：0
> 
> 时间：2012-06-01T11:17:22.877
> 
> 标签：c#, web-services

我有一个简单的 Web 服务方法，我正在尝试转换：

```
<WebMethod()> _
<ScriptMethod(ResponseFormat:=ResponseFormat.Json, UseHttpGet:=True)> _
Public Function GetEmployees() As Object
    Dim _db As New DataClasses1DataContext()

    Return New With {.data = _db.Employees}
End Function 
```

这是我的 C# 代码：

```
[WebMethod]
[ScriptMethod(ResponseFormat = ResponseFormat.Json, UseHttpGet = true)]
public object GetEmployees()
{
    DBModelDataContext _db = new DBModelDataContext();
    return new { data = _db.Employees };
} 
```

但是当我运行我的服务时，我得到一个错误：

```
System.InvalidOperationException: Wystąpił błąd podczas generowania dokumentu XML. --->
System.InvalidOperationException: Aby serializacja XML była możliwa, dla typ&#243;w dziedziczących po elemencie IEnumerable należy zaimplementować metodę Add(System.Object) na wszystkich poziomach hierarchii dziedziczenia. Dla elementu System.Data.Linq.Table`1[[Scheduler.db.Employee, Scheduler, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]] metoda Add(System.Object) nie jest implementowana.
w System.Xml.Serialization.TypeScope.GetEnumeratorElementType(Type type, TypeFlags& flags)
w System.Xml.Serialization.TypeScope.ImportTypeDesc(Type type, MemberInfo memberInfo, Boolean directReference)
w System.Xml.Serialization.TypeScope.GetTypeDesc(Type type, MemberInfo source, Boolean directReference, Boolean throwOnError)
w System.Xml.Serialization.XmlSerializationWriter.CreateUnknownTypeException(Type type)
w System.Xml.Serialization.XmlSerializationWriter.WriteTypedPrimitive(String name, String ns, Object o, Boolean xsiType)
w Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriter1.Write1_Object(String n, String ns, Object o, Boolean isNullable, Boolean needType)
w Microsoft.Xml.Serialization.GeneratedAssembly.XmlSerializationWriter1.Write2_anyType(Object o)
w Microsoft.Xml.Serialization.GeneratedAssembly.ObjectSerializer.Serialize(Object objectToSerialize, XmlSerializationWriter writer)
w System.Xml.Serialization.XmlSerializer.Serialize(XmlWriter xmlWriter, Object o, XmlSerializerNamespaces namespaces, String encodingStyle, String id)
--- Koniec śladu stosu wyjątków wewnętrznych ---
w System.Xml.Serialization.XmlSerializer.Serialize(XmlWriter xmlWriter, Object o, XmlSerializerNamespaces namespaces, String encodingStyle, String id)
w System.Xml.Serialization.XmlSerializer.Serialize(TextWriter textWriter, Object o, XmlSerializerNamespaces namespaces)
w System.Xml.Serialization.XmlSerializer.Serialize(TextWriter textWriter, Object o)
w System.Web.Services.Protocols.XmlReturnWriter.Write(HttpResponse response, Stream outputStream, Object returnValue)
w System.Web.Services.Protocols.HttpServerProtocol.WriteReturns(Object[] returnValues, Stream outputStream)
w System.Web.Services.Protocols.WebServiceHandler.WriteReturns(Object[] returnValues)
w System.Web.Services.Protocols.WebServiceHandler.Invoke() 
```

我现在被困了4个小时：/

我有一个简单的 sql server 数据库，其中包含 2 个表 Employee 和 Plans。

我需要这种格式来使用 Ext Scheduler。VB 代码来自 Ext Scheduler 网页上的演示，我只想将其转换为 C#。

**编辑：** 我正在使用 Visual Studio 2008（.NET 3.5），VB 中的演示是在 2010 年（.NET 4.0）创建的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:20:55.510

尝试

`return new { data = _db.Employees.ToList() };`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:35:32.970

问题是结果格式。XML 崩溃，但 JSON 有效。我需要那个 web 服务来返回 JSON 数据，所以问题解决了（部分）

# c++ - 如何使用 boost 多索引容器创建树

> ID：10849247
> 
> 赞同：0
> 
> 时间：2012-06-01T11:17:50.080
> 
> 标签：c++, boost-multi-index

我正在尝试创建一棵树。我的第一个要求是树级别中的对象按其插入顺序排序。

作为第一次尝试，我使用了 stl 矢量类：

```
#include <vector>
#include <iostream>
#include <string>

class Node;
typedef std::vector<Node> NodeList;

class Node
{
public:
    Node(const std::string& name, int val=0): name_(name), value_(val), list_() {}
    Node(const Node& nd): name_(nd.name_), value_(nd.value_), list_(nd.list_) {}
    Node& operator=(const Node& nd)
    {
        name_ = nd.name_;
        value_ = nd.value_;
        list_ = nd.list_;
        return *this;
    }
    const std::string& name(void) const {return name_;}
    NodeList& list(void) {return list_;}
    const NodeList& list(void) const {return list_;}
    int value(void) const {return value_;}
    void value(int val) {value_ = val;}
private:
    std::string name_;
    int value_;
    NodeList list_;
};

std::ostream& operator<<(std::ostream& os, const Node& nd)
{
    os << nd.name() << "=\"" << nd.value() << "\"";
    return os;
}

std::ostream& operator<<(std::ostream& os, const NodeList& ndlst)
{
    for(NodeList::const_iterator it = ndlst.begin(); it < ndlst.end(); it++)
    {
        os << ' ' << *it;
    }
    return os;
}

int main()
{
    std::cout << "Creating a little tree..." << std::endl;
    Node a("ROOT", 1);
    a.list().push_back(Node("LEVEL1_1", 21));
    a.list().push_back(Node("LEVEL1_2", 22));
    a.list().push_back(Node("LEVEL1_3", 23));
    a.list().push_back(Node("LEVEL1_4", 24));
    a.list().at(2).list().push_back(Node("LEVEL2_1", 231));
    std::cout << "Done. Now let's see some values." << std::endl;
    std::cout << "root: " << a.value() << ", root->node2: "
              << a.list().at(1).value()
              << ", root->node3->node1: "
              << a.list().at(2).list().at(0).value()
              << std::endl;
    std::cout << "Ok, now let's use our '<<' operators." << std::endl;
    std::cout << a << std::endl;
    std::cout << a.list() << std::endl;
    return 0;
} 
```

这个小程序编译成功并按预期执行。

更进一步，我想添加通过名称访问树级别对象的功能，因此我尝试使用 boost 多索引，因此我修改了 Node 类，如下所示：

```
class Node;
struct Name{};

typedef boost::multi_index::multi_index_container<
    Node,
    boost::multi_index::indexed_by<
        boost::multi_index::random_access<>,
        boost::multi_index::hashed_non_unique<
            boost::multi_index::tag<Name>,
            boost::multi_index::const_mem_fun<Node, const std::string&, &Node::name>
        >
    >
> NodeList;

class Node
{
public:
    Node(const std::string& name, int val=0): name_(name), value_(val), list_() {}
    Node(const Node& nd): name_(nd.name_), value_(nd.value_), list_(nd.list_) {}
    Node& operator=(const Node& nd)
    {
        name_ = nd.name_;
        value_ = nd.value_;
        list_ = nd.list_;
        return *this;
    }
    const std::string& name(void) const {return name_;}
    int value(void) const {return value_;}
    void value(int val) {value_ = val;}
    NodeList& list(void) {return list_;}
    const NodeList& list(void) const {return list_;}
private:
    std::string name_;
    int value_;
    NodeList list_;
}; 
```

但它根本不编译。使用 gnu g++ 4.6.1 版，第一个错误是

```
tree.cpp:19:65: error: incomplete type 'Node' used in nested name specifier 
```

有人可以帮我解决这种相互依赖吗？

非常感谢你。

最好的祝福

感谢詹姆斯霍普金，我的程序部分工作：

```
#include <boost/multi_index_container.hpp>
#include <boost/multi_index/random_access_index.hpp>
#include <boost/multi_index/hashed_index.hpp>
#include <boost/multi_index/identity.hpp>
#include <boost/multi_index/global_fun.hpp>
#include <iostream>
#include <string>

class Node;
struct Name{};
const std::string& getNodeName(const Node& nd);

typedef boost::multi_index::multi_index_container<
    Node,
    boost::multi_index::indexed_by<
        boost::multi_index::random_access<>,
        boost::multi_index::hashed_non_unique<
            boost::multi_index::tag<Name>,
            boost::multi_index::global_fun<const Node&, const std::string&, &getNodeName>
        >
    >
> NodeList;

class Node
{
public:
    Node(const std::string& name, int val=0): name_(name), value_(val), list_(new NodeList) {}
    Node(const Node& nd): name_(nd.name_), value_(nd.value_), list_(new NodeList(*nd.list_)) {}
    virtual ~Node() {delete list_;}
    Node& operator=(const Node& nd)
    {
        name_ = nd.name_;
        value_ = nd.value_;
        *list_ = *nd.list_;
        return *this;
    }
    const std::string& name(void) const {return name_;}
    int value(void) const {return value_;}
    void value(int val) {value_ = val;}
    NodeList& list(void) {return *list_;}
    const NodeList& list(void) const {return *list_;}
    friend const std::string& getNodeName(const Node& nd);
private:
    std::string name_;
    int value_;
    NodeList* list_;
};

const std::string& getNodeName(const Node& nd)
{
    return nd.name_;
}

std::ostream& operator<<(std::ostream& os, const Node& nd)
{
    os << nd.name() << "=\"" << nd.value() << "\"";
    return os;
}

std::ostream& operator<<(std::ostream& os, const NodeList& ndlst)
{
    for(NodeList::const_iterator it = ndlst.begin(); it < ndlst.end(); it++)
    {
        const Node& nd = *it;
        os << ' ' << nd;
    }
    return os;
}

int main()
{
    std::cout << "Creating a little tree..." << std::endl;
    Node a("ROOT", 1);
    a.list().push_back(Node("LEVEL1_1", 21));
    a.list().push_back(Node("LEVEL1_2", 22));
    a.list().push_back(Node("LEVEL1_3", 23));
    a.list().push_back(Node("LEVEL1_4", 24));
    // a.list().at(2).list().push_back(Node("LEVEL2_1", 231)); // First call to "at()" returns a read-only iterador so I can't append elements to its pointed object.
    std::cout << "Done. Now let's see some values." << std::endl;
    std::cout << "root: " << a.value() << ", root->node2: "
              << a.list().at(1).value() << std::endl;
             /* << ", root->node3->node1: " << a.list().at(2).list().at(0).value()
              << std::endl; */
    std::cout << "Ok, now let's use our '<<' operators." << std::endl;
    std::cout << a << std::endl;
    std::cout << a.list() << std::endl;
    return 0;
} 
```

现在我必须在替换/修改方法中工作，以便将元素添加到多索引迭代器检索到的对象中。

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:23:08.443

看起来`Node::name`typedef 中的使用导致了该错误。也许您可以创建一个非成员函数来访问 a`Node`的名称并改用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T16:46:09.003

你看过 Boost.PropertyTree 吗？

# websocket - 在netty中使用websocket进行服务器推送

> ID：10849249
> 
> 赞同：0
> 
> 时间：2012-06-01T11:17:59.623
> 
> 标签：websocket, netty, server-push

我想在netty（不是聊天应用程序）中使用websockets实现基本的服务器推送机制。任何人都可以提供一些指针和示例...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T14:38:21.790

查看[netty WebSocket Server xsource 示例](http://netty.io/docs/stable/xref/org/jboss/netty/example/http/websocketx/server/package-summary.html)。它们非常好并且不言自明。另外，我一直在整理一个测试项目来演示使用 netty 进行 Ajax 推送。请参阅[netty-ajax-server](https://github.com/nickman/netty-ajax-server)中的[websocket 包](https://github.com/nickman/netty-ajax-server/tree/master/src/main/java/org/helios/netty/ajax/handlergroups/websockets)。

# android - 如何开发安卓固件？

> ID：10849250
> 
> 赞同：2
> 
> 时间：2012-06-01T11:18:02.417
> 
> 标签：android, linux, android-3.0-honeycomb, android-firmware

我需要基于 Honeycomb 创建自己的 android 固件。

问题是我不知道该怎么做。我在网上搜索了一些教程来帮助我入门，但没有找到。

谁能把我链接到一些教程，或者给我一些关于如何创建安卓固件的信息？

TIA

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:24:12.960

Marakana 有一些很好的 Android 教程/培训课程。我认为 Android 内部视频可能是一个好的开始，因为它将告诉您 Android 的实际工作原理。

[Android 内部结构：Marakana](http://www.youtube.com/watch?v=1_H4AlQaNa0)

# iphone - 在启用 ARC 的 iOS5 应用程序中替换 NSZoneMalloc 的使用

> ID：10849251
> 
> 赞同：2
> 
> 时间：2012-06-01T11:18:10.007
> 
> 标签：iphone, objective-c, ios, ios5, automatic-ref-counting

我正在尝试修改一些使用 NSZoneMalloc 的旧代码。我在其中使用它的项目启用了不允许 NSZoneMalloc 的 ARC。

有问题的代码行是：

```
x = NSZoneMalloc([self zone], sizeof(*x)); 
```

是否有任何等效代码可以与 ARC 一起使用以消除错误？老实说，我不太了解内存分区。如果这还不够信息，请告诉我。

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T11:27:29.750

一般来说，内存分区在现代并不那么重要。尽管它仍在某些地方使用，但您可以安全地将其替换为直的`malloc()`.

区域历史上用于多个分配池以限制内存使用并增加重用和局部性。它们基本上在现代虚拟内存世界中变得无关紧要（即使在平台上，例如没有交换的iOS）。

然而，在过去，当您知道要回收大量相同类型的对象时，您可以使用区域，以将分配开销保持在最低限度。或者，您可以通过从特定的固定大小的池中分配某些对象来限制它们消耗过多的内存。

# c# - MVC3 停止由客户端设置模型值

> ID：10849252
> 
> 赞同：2
> 
> 时间：2012-06-01T11:18:16.950
> 
> 标签：c#, asp.net-mvc-3, model

不是一个主要问题，但绝对是一个很好的问题。

例如，我有一个看起来像这样的模型（我不是为了节省阅读时间而删减了一些，我确实有确认字段等:)）：

```
public class NewUser
{
    [Required]
    public string Username{ get; set; }
    [Required]
    public string Password{ get; set; }

    public string Salt{ get; set; }
} 
```

在发布后（验证后）的代码中，我创建了一个盐，用于以一种方式加密密码，将它放在模型中非常有用（我知道我可以将其省略，但我宁愿不这样做）。

如果在发布时，用户添加到他们的 querystring `&salt=blahblahblah`，一旦页面被回发并且 MVC 匹配模型，它会`blahblahblah`按预期将值分配给我的模型，我没有遇到问题，因为我总是可以覆盖这个。

有什么方法可以让 MVC 不会将模型中的值分配给从回发发送的内容，因为我不希望它有可能设置其他模型中的某些值（我让我的解决方法将它们重置为应有的状态，但是如果有人想尝试破解某些值，则缺少此方法可能会导致问题）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T11:22:50.830

您可以在模型绑定期间将[BindAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.bindattribute.aspx)用于白/黑名单属性：

您可以将其应用于全局模型级别：

```
[Bind(Exclude="Salt")]
public class NewUser
{
    [Required]
    public string Username{ get; set; }
    [Required]
    public string Password{ get; set; }

    public string Salt{ get; set; }
} 
```

或者在单个控制器操作级别：

```
public ActionResult MyAction([Bind(Exclude="Salt")] NewUser user)
{
    //...
} 
```

# javascript - ContentEditable 的标志？

> ID：10849253
> 
> 赞同：1
> 
> 时间：2012-06-01T11:18:19.227
> 
> 标签：javascript, jquery, html, contenteditable

`attr`奇怪...在 StackOverflow 上有很多关于此的问题，但没有人回答我的以下问题：

我有一个`span`（仅举例），其中已启用`ContentEditable`. 我只想保存更改的元素（通过 jQuery 和 ajax）。

*问题：*

如何确定元素是否已更改？

`newVAl==oldVal`不是一种选择：我不想保存旧值进行比较。

是否有任何标志（或其他指标）表明：“ `isChanged`”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:46:03.413

尝试使用 html5 数据属性，如下所示：

```
$('element').change(function() {
    $(this).attr('data-edited', true);
}); 
```

**[演示](http://jsfiddle.net/tBbnT/2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:07:50.983

```
$('[contenteditable]').focus(function(){
      $(this).attr("data-old",$(this).html());
}).blur(function(){
   if( $(this).html() != $(this).attr("data-old") ){
       changed, save ... 
   }
}); 
```

更新：

## [jsfiddle 上的演示](http://jsfiddle.net/DLVZ8/)

# wordpress - 如何在 magento 主页上显示带有特色图片的博客文章？

> ID：10849254
> 
> 赞同：0
> 
> 时间：2012-06-01T11:18:21.550
> 
> 标签：wordpress, magento, posts

我已经在我的 magento 站点中集成了 fishbig。（fishbig 用于将 wordpress 与 magento 集成）。现在帖子显示正常。

现在我需要获取帖子名称、发布日期、发布特色图片和发布链接，以便在主页中以幻灯片的形式显示。我怎么能得到那个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-02T04:46:52.870

当我们将 fishbig 与 magento 集成时，我们可以在模板文件夹中拥有一个文件夹“wordpress”。`(path:- app\design\frontend\base\default\template).`

因为我们可以创建我们的自定义文件夹，如“home”。我们需要创建一个名为“slider.phtml”的.phtml 文件。

以下代码返回帖子名称、帖子特色图片等...

```
<?php $posts = $this->getPosts() 

if (count($posts) > 0): ?>

<?php 
      foreach($posts as $post): ?>
      <?php 

     $image_url = $post->getFeaturedImage()->getFullSizeImage(); // Featured image
          $post_link = $post->getPermalink(); // Post link
          $post_date = $post->getPostDate(); // Post date
          $post_day = date('l', strtotime($post_date)); // Day of Post
          $post_title = $post->getPostTitle(); // Post Title

<?php endforeach; ?> 

<?php endif; ?> 
```

然后在主页幻灯片部分调用此模板，例如，

```
<div class="home_banner">
  <?php
$magento_block = Mage::getSingleton('core/layout');
$blog = $magento_block->createBlock('wordpress/sidebar_widget_posts')->setTemplate('wordpress/home/homeslide.phtml');
$blog->setPostCount(6);
echo $blog->toHtml();
?> 
</div> 
```

# c# - 是否有任何可用的 c# api 执行任何脚本文件或可执行文件？

> ID：10849260
> 
> 赞同：-1
> 
> 时间：2012-06-01T11:18:45.543
> 
> 标签：c#

我正在寻找可以执行任何脚本（VB.脚本、powershell 脚本等）或可执行文件的 c# 程序，如果文件路径提供给程序。如果有可用的 api，请告诉我。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:30:33.510

```
System.Diagnostics.Process.Start("yourprogrampath"); 
```

# r - 将堆栈溢出查询中的数据导入 R 的代码

> ID：10849270
> 
> 赞同：38
> 
> 时间：2012-06-01T11:19:04.920
> 
> 标签：r

当我尝试在 Stack Overflow 中回答有关 R 的问题时，我的大部分时间都花在尝试重建作为示例给出的数据（除非问题作者足够好以将它们作为 R 代码提供）。

所以我的问题是，如果有人只是问一个问题并通过以下方式给出他的示例数据框：

```
a  b   c
1 11 foo
2 12 bar
3 13 baz
4 14 bar
5 15 foo 
```

您是否有技巧或功能可以轻松地将其导入 R 会话，而无需键入整个`data.frame()`指令？

提前感谢您的任何提示！

PS：抱歉，如果我的问题标题中的“查询”一词不是很好，但似乎您不能在堆栈溢出的问题标题中使用“问题”一词:-)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-01T11:21:58.717

也许`textConnection()`是你想要的：

```
R> zz <- read.table(textConnection("a  b   c
1 11 foo
2 12 bar
3 13 baz
4 14 bar
5 15 foo"), header=TRUE)
R> zz
  a  b   c
1 1 11 foo
2 2 12 bar
3 3 13 baz
4 4 14 bar
5 5 15 foo
R> 
```

它允许您将文本视为阅读的“连接”。您也可以只复制和粘贴，但从剪贴板访问更多地依赖于操作系统，因此便携性较差。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-06-01T13:02:21.853

R 的最新版本现在提供的击键选项比将`textConnection`列数据输入到 read.table 和朋友的路径更低。面对这个：

```
zz
  a  b   c
1 1 11 foo
2 2 12 bar
3 3 13 baz
4 4 14 bar
5 5 15 foo 
```

可以简单地插入 :`<- read.table(text="`之后`zz`，删除回车，然后`", header=TRUE)`在最后一个之后插入`foo`并键入 [enter]。

```
zz<- read.table(text="  a  b   c
1 1 11 foo
2 2 12 bar
3 3 13 baz
4 4 14 bar
5 5 15 foo", header=TRUE) 
```

也可以`scan`用来有效地输入长序列的纯数字或纯字符向量条目。面对： 67 75 44 25 99 37 6 96 77 21 31 41 5 52 13 46 14 70 100 18 ，可以简单地输入：`zz <- scan()`并点击 [enter]。然后粘贴选定的数字并再次按 [enter]，也许第二次会导致双回车，控制台应响应“读取 20 个项目”。

```
> zz <- scan()
1: 67  75  44  25  99  37   6  96  77  21  31  41   5  52  13  46  14  70 100  18
21: 
Read 20 items 
```

“角色”任务。粘贴到控制台并编辑掉多余的换行符并添加引号后，然后点击 [enter]：

```
> countries <- scan(what="character")
1:     'republic of congo'
2:     'republic of the congo'
3:     'congo, republic of the'
4:     'congo, republic'
5: 'democratic republic of the congo'
6: 'congo, democratic republic of the'
7: 'dem rep of the congo'
8: 
Read 7 items 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-06-01T11:27:41.043

You can also ask the questioner to use [the `dput` function](http://stat.ethz.ch/R-manual/R-patched/library/base/html/dput.html) which dumps any data structure in a way that can be just copy-pasted into R. e.g.

```
> zz
  a  b   c
1 1 11 foo
2 2 12 bar
3 3 13 baz
4 4 14 bar
5 5 15 foo

> dput(zz)
structure(list(a = 1:5, b = 11:15, c = structure(c(3L, 1L, 2L, 
1L, 3L), .Label = c("bar", "baz", "foo"), class = "factor")), .Names = c("a", 
"b", "c"), class = "data.frame", row.names = c(NA, -5L))

> xx <- structure(list(a = 1:5, b = 11:15, c = structure(c(3L, 1L, 2L, 
+ 1L, 3L), .Label = c("bar", "baz", "foo"), class = "factor")), .Names = c("a", 
+ "b", "c"), class = "data.frame", row.names = c(NA, -5L))
> xx
  a  b   c
1 1 11 foo
2 2 12 bar
3 3 13 baz
4 4 14 bar
5 5 15 foo 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-12-18T16:42:32.157

只想添加这个，因为我现在经常使用它，我认为它非常有用。有一个包*溢出*（下面的安装说明）具有读取复制数据帧的功能。假设我从一个 SO 帖子开始，其中包含如下所示的数据，但没有`dput`输出。

```
 Sepal.Length Sepal.Width Petal.Length Petal.Width Species
1          5.1         3.5          1.4         0.2  setosa
2          4.9         3.0          1.4         0.2  setosa
3          4.7         3.2          1.3         0.2  setosa
4          4.6         3.1          1.5         0.2  setosa
5          5.0         3.6          1.4         0.2  setosa
6          5.4         3.9          1.7         0.4  setosa 
```

现在，如果我直接复制该数据，然后运行以下

```
library(overflow)
soread()
# data.frame “mydf” created in your workspace
#   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
# 1          5.1         3.5          1.4         0.2  setosa
# 2          4.9         3.0          1.4         0.2  setosa
# 3          4.7         3.2          1.3         0.2  setosa
# 4          4.6         3.1          1.5         0.2  setosa
# 5          5.0         3.6          1.4         0.2  setosa
# 6          5.4         3.9          1.7         0.4  setosa 
```

我现在有一个`mydf`与我在全局环境中复制的名称相同的数据框，因此我不必等待 OP 发布`dput`他们的数据框。我可以使用参数更改数据框的名称，该`out`参数（显然）默认为`mydf`. 还有一些其他有用的功能可用于处理包中的 SO 帖子（例如`sopkgs()`，它会临时安装一个包，以便您可以帮助解决有关您以前未安装的包的问题）。

如果你留`library(overflow)`在你的`.Rprofile`, 那么`soread()`从 SO 帖子中导入数据会非常快速。

*overflow*可从 GitHub 获得，并且可以安装

```
library(devtools)
install_github("overflow", "sebastian-c") 
```

# python - 如何将多个 Django 模型一起收集到一个列表中？

> ID：10849271
> 
> 赞同：1
> 
> 时间：2012-06-01T11:19:06.927
> 
> 标签：python, django, django-models

我在 Django 中有一个相当简单的博客，文章和链接有单独的模型。我想在我的模板中有一个循环，按日期顺序列出它们，这意味着这样的事情：

```
def listview(request):
    return render_to_response('index.dtmpl', {
        'articles' : ArticlesAndLinks.objects.order_by('post_date')[:10]
    }, context_instance = RequestContext(request) 
```

我不知道该怎么做。我是否必须分别抓取`Articles.objects.order_by('post_date')`并`Links.objects.order_by('post_date')`合并它们并重新排序？或者是否有更好的 Django-ish/Pythonic 方式来实现这一点？

如果有帮助，Posts 和 Links 都是抽象类 Post 的子类，但由于它是一个抽象类，因此我无法在其上运行集合。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:38:24.157

原来解决方案是将抽象类变成一个真正的类，然后我可以收集它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T12:43:54.047

重构可能是更好的解决方案，但这是另一个可以完成这项工作的解决方案：

创建自定义管理器：

```
class PostManager(models.Manager):
    def mixed(self, first):
        all_dates = []
        articles_dates = Articles.objects.extra(select={'type':'"article"'}).values('id', 'post_date', 'type').order_by('-post_date')[:first]
        links_dates = Links.objects.extra(select={'type':'"link"'}).values('id', 'post_date', 'type').order_by('-post_date')[:first]
        all_dates.extend(articles_dates)
        all_dates.extend(links_dates)
        # Sort the mixed list by post_date, reversed
        all_dates.sort(key=lambda item: item['post_date'], reverse=True)
        # Cut first 'first' items in mixed list
        all_dates = all_dates[:first]
        mixed_objects = []
        mixed_objects.extend(Articles.objects.filter(id__in=[item['id'] for item in all_dates if item['type'] = 'article']))
        mixed_objects.extend(Links.objects.filter(id__in=[item['id'] for item in all_dates if item['type'] = 'link']))
        # Sort again the result list
        mixed_objects.sort(key=lambda post: post.post_date, reverse=True)
        return mixed_objects 
```

并在您的抽象模型中使用它：

```
class Post(models.Model):

    class Meta:
        abstract = True

    objects = PostManager() 
```

然后对混合对象的调用将是：

```
Article.objects.mixed(10) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T11:45:19.830

好吧，显而易见的答案是让 Post 成为一个具体的类。否则，您可能不得不压缩 ORM 并诉诸手工编码的 SQL 或手动合并/排序您的两个查询集。鉴于数据集的规模较小，我会选择最后一个解决方案。

# css - 如何从底部停止背景 30px

> ID：10849272
> 
> 赞同：0
> 
> 时间：2012-06-01T11:19:08.833
> 
> 标签：css

我有一个要阻止引用的背景图像，但我希望它从阻止引用的底部停止 30 像素左右。

当前的CSS：

```
.project-inner-quotes blockquote
{
  background: url("Img/quoteTop.gif") no-repeat scroll center top transparent  ;
  margin: 0 3px 0 3px;
  font-style:italic;
  font-size:14px;
} 
```

原因是我在引语中有 ap 标签，其中有闭幕词buuble ...

```
.project-inner-quotes blockquote > p:last-child 
{
    background: url("Img/quoteBot.gif") no-repeat scroll center bottom transparent;
    padding: 30px 20px 50px 50px;
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:36:47.643

这可以用 css 以一种棘手的方式“伪造”，因为它取决于您的设计。我现在做一些假设，首先你的 blockquote 容器元素有一个 #fff 背景（实际上可以是任何颜色）。

在这种情况下，您可以这样做：

```
.project-inner-quotes blockquote > p:last-child {
    background: url("Img/white-image_8x30") repeat-x scroll left bottom transparent;
}

.project-inner-quotes blockquote > p:last-child span {
    background: url("Img/quoteBot.gif") no-repeat scroll center bottom transparent;
    padding: 30px 20px 50px 50px;
    display: block;
} 
```

这将“假”从底部偏移 30px。将您的 p 文本包装在将获取背景图像和显示块以应用填充的跨度内。

您将需要创建一个 8px 宽（为了更好地平铺）和 30px 高的图像，该图像将应用于底部的段落。图像的颜色将是您在“偏移”quoteTop 图像时尝试获得的背景颜色......但是，如果您没有纯色作为主要背景，则此方法将失败。

如果不清楚，请告诉我

# javascript - 用jquery模板/部分？

> ID：10849287
> 
> 赞同：0
> 
> 时间：2012-06-01T11:20:03.633
> 
> 标签：javascript, jquery

我想生成类似于 facebook 墙类型效果的东西，并且每次创建帖子时都会更新墙。我已经建立了我希望 css/html 与 php 一起看的方式，但我现在想通过 ajax 来实现。

我的问题-它们是 jquery partials 这样的东西吗？就像一个视图，我可以推入我的 html 页面。由于我的更新声明已从

```
sel.prepend('<li id="'+response[i].post_id +'"> ' + response[i].title + '</li>'); 
```

使用下面的 html 更新页面需要更多时间

帖子外观 imgs/t_silhouette.jpg"/> 用户名 title?> img_url?>'/>*/?> img_url?>"/> link?>">link_title?> link_caption?> message?> /imgs/cog. gif') no-repeat;margin-right:5px;">点赞·评论·3 月 7 日 19:08 通过 APPNAME

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T11:35:11.957

你可以使用[http://handlebarsjs.com/](http://handlebarsjs.com/) 语法很简单。你必须像这样定义一个模板

```
<script type="text/x-handlebars" id="people-template">
  <ul>
    {{#each people}}
        <li >Name: {{name}} : Location: {{location.city}}</li>
    {{/each}}
 </ul>
</script> 
```

然后你可以像这样使用它

```
 var context= {
   people: [
      { name: "John Doe", location: { city: "Chicago" } },
      { name: "Jane Sinha", location: { city: "New York"} },
      { name: "Name Test", location: { city: "LA"} }  
    ]
  };

var template = Handlebars.compile($("#people-template").text());
var html = template(context);
$(document.body).html(html); 
```

[工作小提琴](http://jsfiddle.net/joycse06/HSjfR/2/)

# python - 从python创建office文件

> ID：10849289
> 
> 赞同：0
> 
> 时间：2012-06-01T11:20:10.857
> 
> 标签：python, excel, ms-word, report

我们有一个带有 django 的 python 项目。我们需要生成**复杂**的word、excel和pdf文件。

对于我们用 PHP 完成的其余项目，我们使用[PHPexcel](http://phpexcel.codeplex.com)、 [PHPWord](http://phpword.codeplex.com) 和 tcpdf 来处理 PDF。

您会推荐哪些 Python 库来创建此类文件？（对于 excel 和 word 来说，使用开放的 xml 文件格式 xlsx ， docx 很重要）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:33:26.190

Python-docx 可能会有所帮助（[https://github.com/mikemaccana/python-docx](https://github.com/mikemaccana/python-docx)）。

Python 没有高度发达的工具来操作 word 文档。我发现 java 库 xdocreport ( [https://code.google.com/p/xdocreport/](https://code.google.com/p/xdocreport/) ) 是迄今为止最好的 Word 报告。因为我需要生成 PCL，这可以通过 FOP 有效地完成，所以我也使用 docx4j。

为了将它与我的 python 集成，我使用 spark 框架将它与一个简单的 web 服务包装起来，并`requests`在 python 端使用它来与服务对话。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T11:38:11.520

对于 excel，有[openpyxl](http://packages.python.org/openpyxl/)，它实际上是 PHPexcel 的 python 端口，afaik。我还没有使用它，但对我来说听起来不错。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T12:01:27.207

我会推荐使用[Docutils](http://docutils.sourceforge.net/)。它采用 reStructuredText 文件并将它们转换为一系列输出文件。包中包含 HTML、LaTeX 和 .odf 文件编写器，但在[沙箱](http://docutils.sourceforge.net/sandbox/)中还有大量其他编写器用于写入其他格式，例如，参见[WordML](http://docutils.sourceforge.net/sandbox/rst2wordml/)编写器*（免责声明：我没有使用它）*。

此解决方案的优点是您可以编写人类可读的纯文本 (reStructuredText) 主文件，然后根据需要转换为一系列其他文件格式。

虽然不是 Python 解决方案，但您还应该查看[Pandoc](http://johnmacfarlane.net/pandoc/)一个 Haskell 库，它支持比 docutils*更*广泛的输出和输入格式。Pandoc 相对于 Docutils 的一个主要优势是您可以进行反向翻译，即 WordML 到 reStructuredText。[你可以在这里](http://johnmacfarlane.net/pandoc/try)试试 Pandoc 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T11:26:23.917

Simplest way to generate PDF is to generate HTML (with CSS+images) and convert it using `wkhtmltopdf` tool.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T11:24:46.930

我从来没有为此使用过任何库，但是您可以将 any `docx`, `xlsx`file 的扩展名更改为`zip`，然后看看魔术！

生成 openxml 文件就像生成几个 XML 文件（您可以使用模板）并压缩它一样简单。

# python - 为什么 WxPython 的运动检测这么慢？

> ID：10849294
> 
> 赞同：8
> 
> 时间：2012-06-01T11:20:36.917
> 
> 标签：python, wxpython

我设置`on_motion`为处理`EVT_MOTION`。我想要鼠标位置以**交互**方式生成特定于坐标的图像，但 WxPython**在**注册连续运动事件时有约 400 毫秒的延迟。这使得界面迟缓。

为什么`EVT_MOTION`这么慢，我该如何解决？我在 Ubuntu 11.10 和 WinXP 上试过，延迟差不多？

我需要快速响应时间来从图片中选择一部分，如图片所示。就目前而言，“十字准线”跟随鼠标的速度太慢了。

![在此处输入图像描述](../Images/9948338cc3b91ecd2200746d7b20c425.png)

这是我尝试过的代码`EVT_MOTION`：

```
def on_motion(self, event):
    """mouse in motion"""
    #pt = event.GetPosition()
    self.mouseover_location = event.GetPosition()
    self.t2 = time.time()
    print "delay",self.t2 - self.t1
    self.t1 = self.t2

delay 0.379776954651
delay 0.00115919113159
delay 0.421130895615
delay 0.416938066483
delay 0.376848936081
delay 0.387464046478
delay 0.40311384201
delay 0.392899036407
delay 0.385301113129
delay 0.422554969788
delay 0.355197906494 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T18:40:10.747

目前的问题是不完整的，因为没有示例应用程序来演示该问题。但是，我会说运动处理程序与您的问题无关，因为您很可能在后续运动处理程序之间进行了一些昂贵的操作（例如刷新整个绘图画布）。

如果是这种情况（并且您可以轻松检查是否在鼠标运动事件之间调用了您的绘制例程），我建议如下：

1.  如果您自己绘制这些东西，请确保您使用的是双缓冲（通过 wx.BufferedPaintDC）；
2.  如果确实在鼠标运动之间调用了绘制程序，请尝试仅刷新绘图的损坏部分（通过 RefreshRect）；
3.  使用 wx.Overlay 绘制您的矩形选择（有一些演示如何做到这一点）；
4.  发布一个小型、可运行的示例应用程序来演示该问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-08T18:36:17.173

我们真的需要看看应用程序中发生了什么，才能给你任何有意义的答案，尽管许多人能够在创建一个小样本的过程中自己解决问题，以与他人分享问题.

[http://wiki.wxpython.org/MakingSampleApps](http://wiki.wxpython.org/MakingSampleApps)

优化你如何绘制十字准线和/或如何刷新窗口的主要内容可能是你最好的选择，但在你分享更多细节之前，我们所能做的就是猜测。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-06T19:10:12.100

每次`EVT_MOTION`移动鼠标时都会触发！如果您随后调用`event.GetPosition()`每个动作并处理数据，这将降低性能。将如何使用`EVT_LEFT_DOWN`或类似的东西，然后获取位置并处理该数据。这将更有效率，因为您只是在寻找图像的某个区域。

# android - 在另一个线程的末尾开始一个线程

> ID：10849296
> 
> 赞同：0
> 
> 时间：2012-06-01T11:20:38.687
> 
> 标签：android

我有一个应用程序，其中我有 3-4 个线程，我希望第 2 个线程必须在第 1 个线程结束时启动，第 3 个在第 2 个线程结束时启动，依此类推.. 我正在给出代码..

```
//1st thread

new Thread(new Runnable() {

                int progressStatus = 0;

                public void run() {

                        progressStatus = dofirstWork();
                        try {
                            Thread.sleep(500);
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }

                        // Update the progress bar
                        handler.post(new Runnable() {
                            public void run() {
                                bar.setProgress(progressStatus);

                            }
                        });

                }
                private int dofirstWork() {

                    //do some work
                    return 25;

                 }

                }).start();         
                    //2nd thread

new Thread(new Runnable() {

                int progressStatus = 0;

                public void run() {

                        progressStatus = dosecondWork();
                        try {
                            Thread.sleep(500);
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }

                        // Update the progress bar
                        handler.post(new Runnable() {
                            public void run() {
                                bar.setProgress(progressStatus);

                            }
                        });

                }
                private int dosecondWork() {

                    //do some work
                    return 50;

                 }

                }).start();   

                    //3rd thread

new Thread(new Runnable() {

                int progressStatus = 0;

                public void run() {

                        progressStatus = dothirdWork();
                        try {
                            Thread.sleep(500);
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }

                        // Update the progress bar
                        handler.post(new Runnable() {
                            public void run() {
                                bar.setProgress(progressStatus);

                            }
                        });

                }
                private int dothirdWork() {

                    //do some work
                    return 75;

                 }

                }).start(); 
```

实际上，我试图在第一次函数调用时以 25% 显示进度条，在第二次操作时以 50% 显示进度条等等.. on.. 请帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:25:52.370

```
 package com.integrated.mpr;

import org.apache.commons.math.linear.RealMatrix;
import org.apache.commons.math.stat.correlation.Covariance;
import org.apache.commons.math.stat.correlation.PearsonsCorrelation;
import org.apache.commons.math.util.FastMath;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.os.Handler;
import android.os.Looper;
import android.os.Message;
import android.util.Log;
import android.widget.ProgressBar;
import android.widget.TextView;

public class Logic extends Activity{

    int n = Choose.n;
    double final_matrix[][] = new double[n][5];
    double swap =0;

    double weightage_matrix[] = {0,0,0,0,0,0,0,0,0,0,0};
    double sorted_weightage[] = {0,0,0,0,0,0,0,0,0,0};
    String  display[] = new String[n]; 

    double input_matrix[][] = new double[22050][n];
    double[] peak_matrix = new double[n];
    double[] sd_matrix = new double[n];
    double[] rms_matrix = new double[n];
    double[] cf_matrix = new double[n];
    double[] mean_matrix = new double[n];
    int[] sensitive_positions = new int[n];
    double[] new_sensitive = new double[n];
    int[] sortsensi = new int[n];

    private static final int Progress = 0;

    ProgressBar bar;
    TextView label;
    Handler handler = new Handler();

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.progress);

        bar = (ProgressBar) findViewById(R.id.progBar);

        final Handler handler=new Handler()
        {

            public void handleMessage(Message msg)
            {

                 int what=msg.what;
                 switch(what)
                 { 
                    case 1:
                          {
                            //do some long operation
                          }

                    case 2:

                    {
                        //do some long operation
                    }
                          break;

                    case 3:

                    {
                    // do some long operation
                    }

                    break;

                    case 4 :

                    {
                        //do some long opeartion

                    }
                        break;

                 }
            }
        };

            new Thread(new Runnable() {

                int progressStatus = 0;

                public void run() {

                        handler.sendEmptyMessage(1);
                        try {
                            Thread.sleep(500);
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }
                        handler.post(new Runnable() {
                            public void run() {
                                bar.setProgress(25);

                            }
                        });
                        handler.sendEmptyMessage(2);
                        try {
                            Thread.sleep(500);
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }
                        handler.post(new Runnable() {
                            public void run() {
                                bar.setProgress(50);

                            }
                        });
                        handler.sendEmptyMessage(3);
                        try {
                            Thread.sleep(500);
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }
                        handler.post(new Runnable() {
                            public void run() {
                                bar.setProgress(75);

                            }
                        });
                        handler.sendEmptyMessage(4);
                        try {
                            Thread.sleep(500);
                        } catch (InterruptedException e) {
                            e.printStackTrace();
                        }
                        handler.post(new Runnable() {
                            public void run() {
                                bar.setProgress(100);

                            }
                        });
                        // Update the progress bar

                }

            }).start();         

            Intent openList=new Intent("com.integrated.mpr.SENSITIVELIST");
            startActivity(openList);

        } 
```

# shell - 使用 sh shell 比较字符串

> ID：10849297
> 
> 赞同：228
> 
> 时间：2012-06-01T11:20:42.237
> 
> 标签：shell, unix, sh

我正在使用 SH shell，我正在尝试将字符串与变量的值进行比较，但`if`条件始终执行为真。为什么？

这是一些代码：

```
Sourcesystem="ABC"

if [ "$Sourcesystem" -eq 'XYZ' ]; then 
    echo "Sourcesystem Matched" 
else
    echo "Sourcesystem is NOT Matched $Sourcesystem"  
fi;

echo Sourcesystem Value is  $Sourcesystem ; 
```

即使这样也行不通：

```
Sourcesystem="ABC"

if [ 'XYZ' -eq "$Sourcesystem" ]; then 
    echo "Sourcesystem Matched" 
else
    echo "Sourcesystem is NOT Matched $Sourcesystem"  
fi;

echo Sourcesystem Value is  $Sourcesystem ; 
```

其次，我们可以将其与 NULL 或空字符串匹配吗？

* * *

## 回答 #1

> 赞同：327
> 
> 时间：2012-06-01T11:24:24.150

您应该使用`=`运算符进行字符串比较：

```
Sourcesystem="ABC"

if [ "$Sourcesystem" = "XYZ" ]; then 
    echo "Sourcesystem Matched" 
else
    echo "Sourcesystem is NOT Matched $Sourcesystem"  
fi; 
```

`man test`说你`-z`用来匹配空字符串。

* * *

## 回答 #2

> 赞同：90
> 
> 时间：2012-06-01T11:24:19.660

`-eq`用于比较整数。改为使用`=`。

* * *

## 回答 #3

> 赞同：45
> 
> 时间：2017-05-02T14:37:54.473

eq 用于比较整数，使用 equal '=' 代替，例如：

```
if [ 'AAA' = 'ABC' ];
then 
    echo "the same" 
else 
    echo "not the same"
fi 
```

祝你好运

* * *

## 回答 #4

> 赞同：30
> 
> 时间：2014-09-24T06:55:47.840

我有同样的问题，这样做

```
if [ 'xyz' = 'abc' ]; then
  echo "match"
fi 
```

注意空格。`=`在这种情况下，在符号前后使用空格很重要。

查看“[其他比较运算符](http://tldp.org/LDP/abs/html/comparison-ops.html)”。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2012-06-01T11:25:15.427

`-eq`是用于比较整数的 shell 比较运算符。要比较字符串，您需要使用`=`.

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-06-01T11:25:12.803

`-eq`是一个数学比较运算符。我从来没有将它用于字符串比较，依赖`==`和`!=`比较。

```
if [ 'XYZ' == 'ABC' ]; then   # Double equal to will work in Linux but not on HPUX boxes it should be if [ 'XYZ' = 'ABC' ] which will work on both
  echo "Match"
else
  echo "No Match"
fi 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-06-01T14:10:22.157

在我测试过的 4 个 shell 中， `ABC -eq XYZ`在`test`for`zsh`和`ksh`. `/usr/bin/test`该表达式在and 的内置函数下计算`dash`为false `bash`。在`ksh`and`zsh`中，字符串被转换为数值并且相等，因为它们都是 0。IMO，`ksh`and的内置函数的行为`zsh`是不正确的，但是 for 的规范`test`在这方面是模棱两可的。

# c# - 持续更改我的字典

> ID：10849303
> 
> 赞同：1
> 
> 时间：2012-06-01T11:21:03.047
> 
> 标签：c#, windows-phone-7, data-binding, mvvm-light

由于时间已晚，我可能遗漏了一些明显的东西。

我有一个这样定义的字典，`Dictionary<string,MyObject>`其中`MyObject`有一个属性`bool IsFavoriate`

最初在页面加载时，我查询我的 Web 服务，并使用任何新对象更新 Dictionary 并将其保存在 IsolatedStorage 中。

对于 UI，我将 Dictionary 绑定到一个 ItemsControl，其中有一个复选框：

```
<ItemsControl ItemsSource="{Binding Categories, Mode=TwoWay}">
     <ItemsControl.ItemTemplate>
          <DataTemplate>
                <CheckBox IsChecked="{Binding Value.IsFavorite}" Content="{Binding Key}" />
          </DataTemplate>
      </ItemsControl.ItemTemplate>
 </ItemsControl> 
```

这很好绑定。但是，当我选择一个复选框时，我希望我的字典能够更新。

我可能需要`MyObject`调用这些属性`RaisePropertyChanged`吗？也许我现在会试一试。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:26:32.750

您需要`INotifyPropertyChanged`在您的类上实现接口`MyObject`并从属性设置器引发`PropertyChanged`事件，以防`IsFavorite`后者可能以编程方式更新（在初始填充之后），并且您希望更新`IsChecked`属性（和`CheckBox`的视觉状态）随着你的变化。

在您的情况下，您希望以相反的方式传播更新（从`IsChecked`属性到`IsFavorite`）；这通常通过将绑定设置为`Mode=TwoWay`.

```
<ItemsControl ItemsSource="{Binding Categories, Mode=TwoWay}">
     <ItemsControl.ItemTemplate>
          <DataTemplate>
                <CheckBox IsChecked="{Binding Value.IsFavorite, Mode=TwoWay}"
                          Content="{Binding Key}" />
          </DataTemplate>
     </ItemsControl.ItemTemplate>
</ItemsControl> 
```

PS 我假设你的意思是“当我~~选中一个~~ *复选框*时，我希望我的字典更新。”</p>

# asp.net - SQL Server：超时已过期

> ID：10849304
> 
> 赞同：0
> 
> 时间：2012-06-01T11:21:03.350
> 
> 标签：asp.net, sql-server

我正在使用 MS SQL Server 2008，我收到以下错误。我怎样才能解决这个问题？你们认为将 Timeout 设置为 60 秒是一个好方法吗？

感谢您的时间，

```
Timeout expired. The timeout period elapsed prior to completion of the operation or the server is not responding. Stack Trace: at System.Data.SqlClient.SqlConnection.OnError(SqlException exception, Boolean breakConnection) at System.Data.SqlClient.TdsParser.ThrowExceptionAndWarning() at System.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj) at System.Data.SqlClient.SqlDataReader.ConsumeMetaData() at System.Data.SqlClient.SqlDataReader.get_MetaData() at System.Data.SqlClient.SqlCommand.FinishExecuteReader(SqlDataReader ds, RunBehavior runBehavior, String resetOptionsString) at 
System.Data.SqlClient.SqlCommand.RunExecuteReaderTds(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, Boolean async) at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method, DbAsyncResult result) at System.Data.SqlClient.SqlCommand.RunExecuteReader(CommandBehavior cmdBehavior, RunBehavior runBehavior, Boolean returnStream, String method) at System.Data.SqlClient.SqlCommand.ExecuteReader(CommandBehavior behavior, String method)
 at System.Data.SqlClient.SqlCommand.ExecuteDbDataReader(CommandBehavior behavior) at System.Data.Common.DbCommand.System.Data.IDbCommand.ExecuteReader(CommandBehavior behavior) at System.Data.Common.DbDataAdapter.FillInternal(DataSet dataset, DataTable[] datatables, Int32 startRecord, Int32 maxRecords, String srcTable, IDbCommand command, CommandBehavior behavior) at System.Data.Common.DbDataAdapter.Fill(DataTable[] dataTables, Int32 startRecord, Int32 maxRecords, IDbCommand command, CommandBehavior behavior) at System.Data.Common.DbDataAdapter.Fill(DataTable dataTable) at Karkas.Core.DataUtil.HelperFunctions.SorguCalistir(DataTable dt, SqlCommand cmd) at Karkas.Core.DataUtil.HelperFunctions.SorguCalistir(DataTable dt, String sql, CommandType cmdType, SqlParameter[] parameters) at Karkas.Core.DataUtil.AdoTemplate.DataTableDoldur(DataTable dataTable, String sql, CommandType commandType, SqlParameter[] parameters) at Karkas.Core.DataUtil.AdoTemplate.DataTableOlustur(String sql, SqlParameter[] parameters) at 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:33:51.717

是否更改命令超时取决于几件事。它认为您应该首先花一些时间找出超时发生的原因：

*   您是否一口气获取了太多信息？
*   你能以某种方式提高性能吗？也许在相关表上添加 som 索引？
*   是否有另一个进程（或其他进程）锁定表，阻止您查询

找出原因后，您可以决定增加命令超时是否是正确的做法。但特别是如果问题被外部进程阻塞，我会非常犹豫是否增加超时。这可能会使问题变得更糟。

# jquery - jquery 循环插件 - 操作下一个/上一个按钮？

> ID：10849305
> 
> 赞同：0
> 
> 时间：2012-06-01T11:21:04.343
> 
> 标签：jquery, cycle, jquery-cycle, cycle-plugin

[我从 jquery循环插件](http://malsup.github.com/jquery.cycle.all.js)创建了一个标准的 jquery 幻灯片，我没有改变它。[在我遵循本](http://line25.com/tutorials/build-a-simple-image-slideshow-with-jquery-cycle)教程之后，现在一切正常。我现在的问题是，有谁知道如何更改插件代码，上一个和下一个按钮不会都显示在 mouseOver 上，而只是其中一个取决于鼠标在幻灯片的哪一半？

如果有人可以帮助我，我会非常高兴:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T20:40:19.387

更新。我对上次更新不满意，因为它有效，但本来可以更干净一些。

JSF中：

[http://jsfiddle.net/lucuma/fg6d4/10/](http://jsfiddle.net/lucuma/fg6d4/10/)

```
$(document).ready(function() {
$('#sliders').hover(
function() {

    $('.controller', this).fadeIn();
}, function() {
    $('.controller', this).fadeOut();
});

$('#slideshow').cycle({
    prev: $('.controller .prev', this),
    next: $('.controller .next', this),
    after: function(currSlideElement, nextSlideElement, options, forwardFlag) {
        // you can easily adapt this to hide prev on firstslide and next on last slide
        if (options.currSlide < options.slideCount / 2) {
            $(options.prev).hide();
            $(options.next).show();
        } else {
            $(options.prev).show();
            $(options.next).hide();
        }

    }

}); 
```

});​​​​</p>

HTML：

```
<div id="sliders">

    <div id="slideshow">

      <div><img src="http://weblogs.marylandweather.com/4526619322_1912218db8.jpg" /></div>
      <div><img src="http://www.silverstar-academy.com/Blog/wp-content/uploads/2012/03/03-14-12N00184967.jpg" /></div>
      <div><img src="http://cdn.the2012scenario.com/wp-content/uploads/2011/11/sunspot-500x500.jpg" /></div>
   </div>
    <div class="controller">
      <a href="#" class="prev">prev</a>
      <a href="#" class="next">next</a>
    </div>
</div>
​ 
```

CSS：

```
#sliders{width:500px;height:500px;position:relative}
#slideshow {width:100%;height:100%;}
#sliders .controller {display:none;position:absolute;top:50px;z-index:100;width:100%;height:20px}
#sliders .controller a {background-color:white;padding:10px;color:red}
#sliders .controller a.next {position:absolute;right:0} 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:36:50.450

我认为您将不得不在图像顶部添加两个分层的元素，并在翻转时添加一个切换。Cycle 不会自动切换或定位按钮。

# javascript - 使用 ajax 更改花式框的内容

> ID：10849306
> 
> 赞同：1
> 
> 时间：2012-06-01T11:21:19.333
> 
> 标签：javascript, jquery, fancybox, fancybox-2

我的菜单中有一个链接，它打开了一个带有一些 ajax 内容的幻想框。此框包含链接，例如fancybox 中显示的数据的菜单。我希望能够单击这些链接并更改fancybox的内容，但我所做的只是打开一个新框，这会使屏幕变白并变回，使它看起来像是在闪烁。

我尝试使用一系列内容字典来更改但无法加载其中的任何一个。我还在链接中添加了一个 rel，使其成为侧面带有箭头的专辑，因此我可以转到下一个/上一个，并且效果很好，除非那不是我想要的导航类型。必须可以通过链接来做同样的事情，但我不知道怎么做。谁能帮我这个？

编辑：我尝试过的一些东西的一个小[jsfiddle 。](http://jsfiddle.net/PYTQT/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:26:16.750

Fancybox 支持 iframe。您可以改为制作 iframe。并在那里放置另一个 html 页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:26:26.523

您可以尝试每个链接

位于同一服务器或不同域的链接？

您是否尝试过 onclick="window.location.replace(url)"

我在我们的网络系统上使用了 fancybox，这对我使用 fancybox 有帮助

# android - 从浏览器启动 Android 应用程序

> ID：10849307
> 
> 赞同：1
> 
> 时间：2012-06-01T11:21:33.403
> 
> 标签：android

我有一个小问题。

我有一个 Android Activity，我想从浏览器上的一个链接运行它。

这就是我在清单文件上声明我的活动的方式：

```
<activity android:name=".Wul4"
        android:windowSoftInputMode="adjustPan"
        android:configChanges="keyboardHidden|orientation"
        android:launchMode="singleInstance"
        android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.VIEW" />
            <category android:name="android.intent.category.BROWSABLE" />
            <data android:scheme="wul4" android:host="com.wul4.wul4"/>
            <category android:name="android.intent.category.DEFAULT"/>
        </intent-filter>
    </activity> 
```

在 webApp 上，启动应用程序的链接如下：

```
wul4://com.wul4.wul4?codOperacion="+respuestaActual.idOperacion 
```

关键是它可以在以下浏览器上运行：“Opera”和“Google Chrome”，但它不适用于其他浏览器............（例如，它不适用于默认浏览器）手机浏览器）。

有谁知道为什么？？？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:24:55.093

试试这个，使用 HTTP 而不是你自己的模式：

```
<intent-filter>
  <action android:name="android.intent.action.VIEW" />

  <category android:name="android.intent.category.DEFAULT" />
  <category android:name="android.intent.category.BROWSABLE" />

  <data
    android:host="com.wul4.wul4"
    android:scheme="http:" />
</intent-filter> 
```

当在 Android 设备中单击此域的链接时，用户会看到一个对话框，供您在您的应用程序（如果已安装）或浏览器之间进行选择。

# gcc - x86_64：是否可以“在线替换”PLT/GOT 引用？

> ID：10849308
> 
> 赞同：11
> 
> 时间：2012-06-01T11:21:39.520
> 
> 标签：gcc, assembly, x86-64, ld, elf

我不确定这个问题的好主题是什么，但我们开始吧：

为了强制代码的关键部分的代码局部性/紧凑性，我正在寻找一种方法来通过“跳转槽”（ELF`R_X86_64_JUMP_SLOT`重定位）直接在调用时调用外部（动态加载）库中的函数站点 - 链接器通常放入 PLT / GOT 的内容，但在调用站点将这些内联。

如果我模拟这样的调用：

```
#include <stdio.h>
int main(int argc, char **argv)
{
        asm ("push $1f\n\t"
             "jmp *0f\n\t"
             "0: .quad %P0\n"
             "1:\n\t"
             : : "i"(printf), "D"("Hello, World!\n"));
        return 0;
}
```

为了获得 64 位字的空间，调用本身可以工作（请不要评论这是幸运的巧合，因为这违反了某些 ABI 规则——所有这些都不是这个问题的主题。

对于我的情况，以其他方式解决/解决，我试图保持这个例子简短）。

它创建以下程序集：

```
0000000000000000 <主>：
0: bf 00 00 00 00 移动 $0x0,%edi
1：R_X86_64_32.rodata.str1.1
5：68 00 00 00 00 推 0x0
6：R_X86_64_32 .text+0x19
一个：ff 24 25 00 00 00 00 jmpq *0x0
d: R_X86_64_32S .text+0x11
...
11：R_X86_64_64 printf
19: 31 c0 xor %eax,%eax
1b: c3 retq
```

但是（由于`printf`用作立即数，我猜......？）这里的目标地址仍然是 PLT 钩子的地址 - 相同的`R_X86_64_64`reloc。将针对 libc 的目标文件链接到实际的可执行文件会导致：

```
0000000000400428 <printf@plt>:
  400428: ff 25 92 04 10 00 jmpq *1049746(%rip) # 5008c0 <_GLOBAL_OFFSET_TABLE_+0x20>
[ ... ]
0000000000400500 <主>：
  400500: bf 0c 06 40 00 移动 $0x40060c,%edi
  400505：68 19 05 40 00 推 0x400519
  40050a: ff 24 25 11 05 40 00 jmpq *0x400511
  400511：[.quad 400428]
  400519: 31 c0 xorl %eax, %eax
  40051b：c3 retq
[ ... ]
动态搬迁记录
偏移类型值
[ ... ]
00000000005008c0 R_X86_64_JUMP_SLOT printf
```

即这仍然给出了两步重定向，首先将执行转移到PLT钩子，然后跳转到库入口点。

有没有办法指示编译器/汇编器/链接器 - 在这个例子中 - “内联”地址处的跳转槽目标`0x400511`？

即用“远程”（在程序加载时通过）reloc替换“本地”（在程序链接时通过）reloc （并`ld`强制这部分代码进行非延迟加载）？也许链接器映射文件可能使这成为可能 - 如果是这样，如何？`R_X86_64_64``ld.so``R_X86_64_JUMP_SLOT`

**编辑：**
为了清楚起见，问题是关于如何在动态链接的可执行文件中实现这一点/对于仅在动态库中可用的外部函数。是的，真正的静态链接以更简单的方式解决了这个问题，但是：

*   在某些系统（如 Solaris）中，供应商通常不提供静态库
*   有些库既不能作为源代码也不能作为静态版本使用

因此静态链接在这里没有帮助:(

**Edit2：**
我发现在某些体系结构中（SPARC，值得注意的是，请参阅[GNU 中的 SPARC 重定位部分作为手册），GNU 能够使用](http://sourceware.org/binutils/docs/as/Sparc_002dRelocs.html)*修饰符*为链接器就地创建某些类型的重定位引用。引用的 SPARC 将用于`%gdop(symbolname)`使汇编器向链接器发出指令，说明“在此处创建该重定位”。Intel 在 Itanium 上的汇编器知道相同类型的`@fptr(symbol)` [*链接重定位运算符*](http://nf.nci.org.au/facilities/software/Compilers/Intel8/doc/ref/axc_reloc.htm)（另请参见[Itanium psABI](http://www.uclibc.org/docs/psABI-ia64.pdf)中的第 4 节）。但是对于 x86_64，是否存在等效机制——指示汇编器在代码中的特定位置发出特定的链接器重定位类型？

我还发现 GNU 汇编器有一个[`.reloc`](http://sourceware.org/binutils/docs/as/Reloc.html)指令，据说是用于此目的；不过，如果我尝试：

```
#include <stdio.h>
int main(int argc, char **argv)
{
        asm ("push %%rax\n\t"
             "lea 1f(%%rip), %%rax\n\t"
             "xchg %%rax, (%rsp)\n\t"
             "jmp *0f\n\t"
             ".reloc 0f, R_X86_64_JUMP_SLOT, printf\n\t"
             "0: .quad 0\n"
             "1:\n\t"
             : : "D"("Hello, World!\n"));
        return 0;
}
```

我从链接器收到一个错误（请注意`7 == R_X86_64_JUMP_SLOT`）：

```
错误：/tmp/cc6BUEZh.o：目标文件中出现意外的 reloc 7
```

汇编器创建一个目标文件，其中`readelf`说：

```
偏移 0x5e8 处的重定位部分“.rela.text.startup”包含 2 个条目：
偏移量信息类型符号的值符号的名称+加数
0000000000000001 000000050000000a R_X86_64_32 0000000000000000 .rodata.str1.1 + 0
0000000000000017 0000000b00000007 R_X86_64_JUMP_SLOT 0000000000000000 printf + 0

```

这就是我想要的——但链接器不接受它。
链接器*只*接受上面的使用`R_X86_64_64`代替；这样做会创建与第一种情况相同的二进制文件...重定向到`printf@plt`，而不是“已解决”的二进制文件。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-05-25T17:54:54.397

为了内联调用，您需要一个代码 ( `.text`) 重定位，其结果是动态加载的共享库中函数的最终地址。使用 GNU/Linux 的 GNU 工具链在 x86_64 上不存在这样的重定位（并且现代静态链接器不允许它们），因此您不能按照您的意愿内联整个调用。

您可以获得的最接近的是通过 GOT 直接调用（避免 PLT）：

```
 .section    .rodata
.LC0:
    .string "Hello, World!\n"
    .text
    .globl  main
    .type   main, @function
main:
    pushq   %rbp
    movq    %rsp, %rbp
    movl    $.LC0, %eax
    movq    %rax, %rdi
    call    *printf@GOTPCREL(%rip)
    nop
    popq    %rbp
    ret
    .size   main, .-main 
```

这应该在 GOT 中生成一个`R_X86_64_GLOB_DAT`针对 printf 的重定位，以供上述序列使用。您需要避免使用 C 代码，因为通常编译器可能会在序言和尾声中使用任意数量的调用者保存的寄存器，这会迫使您在 asm 函数调用周围保存和恢复所有此类寄存器，否则可能会损坏这些寄存器以供以后使用在包装函数中。因此，在纯汇编中编写包装器更容易。

另一种选择是进行编译，`-Wl,-z,now -Wl,-z,relro`以确保在启动时解析 PLT 和 PLT 相关的 GOT 条目，以增加代码局部性和紧凑性。使用完整的 RELRO，您只需在 PLT 中运行代码并访问 GOT 中的数据，这两件事应该已经在逻辑核心的缓存层次结构中的某个位置。如果完整的 RELRO 足以满足您的需求，那么您将不需要包装器，并且您将获得额外的安全优势。

最好的选择是真正的静态链接或 LTO，如果它们可供您使用的话。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-04-18T16:08:04.663

此优化已在 GCC 中实施。它可以通过[`-fno-plt`选项](https://gcc.gnu.org/onlinedocs/gcc/Code-Gen-Options.html#index-fno-plt)和[`noplt`功能属性](https://gcc.gnu.org/onlinedocs/gcc/Common-Function-Attributes.html#index-noplt-function-attribute)启用：

> 不要将 PLT 用于与位置无关的代码中的外部函数调用。相反，从 GOT 加载调用站点的被调用者地址并分支到它。通过消除 PLT 存根并将 GOT 负载暴露给优化，这会导致更高效的代码。在 PLT 存根期望 GOT 指针位于特定寄存器中的 32 位 x86 等体系结构上，这为编译器提供了更多的寄存器分配自由度。惰性绑定需要使用 PLT；`-fno-plt`所有外部符号都在加载时解析。
> 
> 或者，函数属性`noplt`可用于避免通过 PLT 调用特定外部函数。
> 
> 在与位置相关的代码中，一些目标还将调用转换为标记为不使用 PLT 的函数以改为使用 GOT。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-01T11:54:47.773

您可以静态链接可执行文件。只需添加`-static`到最后的链接命令，您所有的间接跳转都将被直接调用所取代。

# wpf - 无法绑定 WPF DependencyProperty

> ID：10849320
> 
> 赞同：0
> 
> 时间：2012-06-01T11:22:25.807
> 
> 标签：wpf, binding, dependency-properties

我是 WPF 的新手，我正在尝试绑定依赖属性。我希望我在 WPFCtrl:FilterTextBox 上写的文本将显示在 TextBlock 中

这是我的 XAML

```
 xmlns:WPFCtrl="clr-namespace:WPFControls"
    xmlns:local="clr-namespace:WpfApplication9"
    Title="MainWindow" Height="350" Width="525">
    <Window.Resources>
    <local:Person x:Key="myDataSource" />
    </Window.Resources>
    <Grid>
    <StackPanel>
    <StackPanel.DataContext>
        <Binding Source="{StaticResource myDataSource}"/>
    </StackPanel.DataContext>
    <WPFCtrl:FilterTextBox Text="{Binding Path=Name, UpdateSourceTrigger=PropertyChanged }"/>
    <TextBlock Width="55" Height="25" Text="{Binding Path=Name, UpdateSourceTrigger=PropertyChanged}"/>
</StackPanel>
</Grid> 
```

这里是人员类

```
namespace WpfApplication9
{
    public class Person : INotifyPropertyChanged
    {
        private string name = "";
        // Declare the event
        public event PropertyChangedEventHandler PropertyChanged;

        public Person()
        {
        }

        public Person(string value)
        {
            this.name = value;
        }

        public string Name
        {
            get { return name; }
            set
            {
                name = value;
                // Call OnPropertyChanged whenever the property is updated
                OnPropertyChanged("Name");
            }
        }

        // Create the OnPropertyChanged method to raise the event
        protected void OnPropertyChanged(string name)
        {
            PropertyChangedEventHandler handler = PropertyChanged;

            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs(name));

            }
        }
    }   
} 
```

和 FilterTextBox 文本属性

```
 public static readonly DependencyProperty TextProperty = DependencyProperty.Register("Text", typeof(string), typeof(FilterTextBox), new PropertyMetadata());

    public string Text
    {
        //get { return _tbFilterTextBox.Text == null ? null : _tbFilterTextBox.Text.TrimEnd(); }
        get { return (string)GetValue(TextProperty); }
        set { SetValue(TextProperty, value); }
        //set { _tbFilterTextBox.Text = value; }
    } 
```

问题是它没有进入 OnPropertyChanged() 我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:32:19.383

每次插入文本时，此“FilterTextBox”控件是否更新 DP？

我猜 FilterTextBox 有一个 ControlTemplate，里面有一个常规的 TextBox。就像是

```
<ControlTemplate TargetType="{x:Type FilterTextBox}">
 <TextBox Name="PART_FilterTextBoxInputField" Text="{TemplateBinding Text}"/>
</ControlTemplate> 
```

您需要设置内部文本框绑定到您的 Text-Dependcy 属性的绑定，以便也使用 UpdateSourceTrigger=PropertyChanged。否则绑定只会在文本框失去焦点时更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T11:39:30.507

问题是`TextProperty`in默认情况下`FilterTextBox`不绑定`TwoWay`。

要么设置`BindingMode`为`TwoWay`

```
<WPFCtrl:FilterTextBox Text="{Binding Path=Name,
                                      Mode=TwoWay,
                                      UpdateSourceTrigger=PropertyChanged }"/> 
```

或更改元数据，`DependencyProperty` `Text`使其默认绑定双向

```
public static readonly DependencyProperty TextProperty =
    DependencyProperty.Register("Text",
                                typeof(string),
                                typeof(FilterTextBox),
                                new FrameworkPropertyMetadata(null,
                     FrameworkPropertyMetadataOptions.BindsTwoWayByDefault)); 
```

# java - 如何解压缩具有子目录的 zip 存档？

> ID：10849321
> 
> 赞同：2
> 
> 时间：2012-06-01T11:22:25.963
> 
> 标签：java, android

假设我有一个 zip 文件`MyZipFile.zip`，其中包含 (1) 一个文件`MyFile.txt`和 (2) 一个`MyFolder`包含文件的文件夹`MyFileInMyFolder.txt`，即如下所示：

> `MyZipFile.zip`
>    |-> `MyFile.txt`
>    |-> `MyFolder`
>           |->`MyFileInMyFolder.txt`

我想解压这个 zip 档案。我能够在网上搜索到的最常见的代码示例使用的`ZipInputStream`类有点像粘贴在这个问题底部的代码。但是，使用上面的示例，问题在于它会创建`MyFolder`但不会解压缩`MyFolder`. 任何人都知道是否可以使用`ZipInputStream`或通过任何其他方式解压缩 zip 存档中文件夹的内容？

```
public static boolean unzip(File sourceZipFile, File targetFolder)
{
 // pre-stuff

 ZipInputStream zipInputStream = new ZipInputStream(new FileInputStream(sourceZipFile));
 ZipEntry zipEntry = null;

 while ((zipEntry = zipInputStream.getNextEntry()) != null)
 {
  File zipEntryFile = new File(targetFolder, zipEntry.getName());

  if (zipEntry.isDirectory())
  {
   if (!zipEntryFile.exists() && !zipEntryFile.mkdirs())
    return false;
  }
  else
  {
   FileOutputStream fileOutputStream = new FileOutputStream(zipEntryFile);

   byte buffer[] = new byte[1024];
   int count;

   while ((count = zipInputStream.read(buffer, 0, buffer.length)) != -1)
    fileOutputStream.write(buffer, 0, count); 

   fileOutputStream.flush();
   fileOutputStream.close();
   zipInputStream.closeEntry();
  }
 }

 zipInputStream.close();

 // post-stuff
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T13:24:01.067

试试这个：

```
ZipInputStream zis = null;
try {

    zis = new ZipInputStream(new FileInputStream(zipFilePath));
    ZipEntry entry;

    while ((entry = zis.getNextEntry()) != null) {

        // Create a file on HDD in the destinationPath directory
        // destinationPath is a "root" folder, where you want to extract your ZIP file
        File entryFile = new File(destinationPath, entry.getName());
        if (entry.isDirectory()) {

            if (entryFile.exists()) {
                logger.log(Level.WARNING, "Directory {0} already exists!", entryFile);
            } else {
                entryFile.mkdirs();
            }

        } else {

            // Make sure all folders exists (they should, but the safer, the better ;-))
            if (entryFile.getParentFile() != null && !entryFile.getParentFile().exists()) {
                entryFile.getParentFile().mkdirs();
            }

            // Create file on disk...
            if (!entryFile.exists()) {
                entryFile.createNewFile();
            }

            // and rewrite data from stream
            OutputStream os = null;
            try {
                os = new FileOutputStream(entryFile);
                IOUtils.copy(zis, os);
            } finally {
                IOUtils.closeQuietly(os);
            }
        }
    }
} finally {
    IOUtils.closeQuietly(zis);
} 
```

请注意，它使用[Apache Commons IO](http://commons.apache.org/io/)来处理流复制/关闭。

# ios - 允许用户在 UIImage 上绘制矩形，以裁剪图像

> ID：10849330
> 
> 赞同：2
> 
> 时间：2012-06-01T11:23:24.460
> 
> 标签：ios, ios5, uiimage, crop

*我敢肯定，这个问题已经从各种不同的角度被问过很多次了，但我还无法在这里找到答案。*

**我想要实现** 我想要做的是显示一个 UIImage，并允许用户在图像上绘制一个矩形，并最终裁剪他们的选择。

**到目前为止的研究，** 我在这里找到了关于处理裁剪的 SO 的先前问题，但是它们通常处理不变的静态裁剪区域，这确实导致了这种机制的以下限制

1.  您感兴趣的图像区域可能位于任何位置，例如，如果您要裁剪路标，它可能位于一张图像的中心，但在另一张图像上左对齐，因此您无法预测哪个区域作物。
2.  感兴趣区域的大小和比例可能会发生变化，例如，一张图像可能是该路标的特写，因此裁剪区域会更大，但另一张图像可能是从远处拍摄的，这意味着裁剪区域会更小。

结合上述两个变量，几乎不可能准确预测图像中感兴趣的区域在哪里，所以我依靠用户通过能够在我们周围“绘制”一个框来定义这一点'在这种情况下，对路标感兴趣。

这在 Android 上非常好，因为您可以将所有艰苦的工作委派给一个好的意图，例如：

`Intent intent = new Intent("com.android.camera.action.CROP");`

但是，我找不到适用于 iOS 的等价物。

我从这个[来源](http://www.cocoanetics.com/2010/07/drawing-on-uiimages/)找到了这段代码：

```
- (UIImage *)imageByDrawingCircleOnImage:(UIImage *)image
{
    // begin a graphics context of sufficient size
    UIGraphicsBeginImageContext(image.size);

    // draw original image into the context
    [image drawAtPoint:CGPointZero];

    // get the context for CoreGraphics
    CGContextRef ctx = UIGraphicsGetCurrentContext();

    // set stroking color and draw circle
    [[UIColor redColor] setStroke];

    // make circle rect 5 px from border
    CGRect circleRect = CGRectMake(0, 0,
                image.size.width,
                image.size.height);
    circleRect = CGRectInset(circleRect, 5, 5);

    // draw circle
    CGContextStrokeEllipseInRect(ctx, circleRect);

    // make image out of bitmap context
    UIImage *retImage = UIGraphicsGetImageFromCurrentImageContext();

    // free the context
    UIGraphicsEndImageContext();

    return retImage;
} 
```

我认为这是裁剪的一个很好的起点（但是它确实有麦田圈），它确实依赖于在调用时预定义要裁剪的区域`CGRectMake`。

这个[previous question](https://stackoverflow.com/questions/158914/cropping-a-uiimage)还详细说明了如何进行实际裁剪。

我假设要允许用户绘制矩形，我需要与手势集成？

**问题：** 如何允许用户在图像视图上绘制矩形，以裁剪该区域？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:27:30.890

你可以试试[BJImageCropper](https://github.com/barrettj/BJImageCropper)：

> 一个简单的 UIView 子类，允许用户裁剪图像。如果你使用它，我很想知道！推特：@barrettjacobsen

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-05-18T13:15:26.540

这篇文章已经有 5 年的历史了，但未来的参考资料，这就是我设法完成它的方式。以下代码是[Rob 的答案](https://stackoverflow.com/questions/45906289/drawing-a-rectangle-on-uiimageview-using-core-graphics)和一些图像裁剪的组合

此处使用 Xcode 9 和 Swift 4

1.  添加 2 个视图控制器

为第一个视图控制器添加 ImageView 和 2 个按钮，为最后一个视图控制器添加另一个图像视图

[![在此处输入图像描述](../Images/6afaa3cf72afa475ca0619ac66e114a8.png)](https://i.stack.imgur.com/ImTPa.png)

将所有视图链接到源文件

2.  视图控制器

    ```
    import UIKit

    extension UIView {
    func snapshot(afterScreenUpdates: Bool = false) -> UIImage {
    UIGraphicsBeginImageContextWithOptions(bounds.size, isOpaque, 0)
    drawHierarchy(in: bounds, afterScreenUpdates: afterScreenUpdates)
    let image = UIGraphicsGetImageFromCurrentImageContext()!
    UIGraphicsEndImageContext()
    return image
    }
    }

    extension UIImage {
    func crop( rect: CGRect) -> UIImage {
    var rect = rect
    rect.origin.x*=self.scale
    rect.origin.y*=self.scale
    rect.size.width*=self.scale
    rect.size.height*=self.scale

    let imageRef = self.cgImage!.cropping(to: rect)
    let image = UIImage(cgImage: imageRef!, scale: self.scale, orientation: self.imageOrientation)
    return image
    }
    } 
    ```

类视图控制器：UIViewController {

```
var rec: CGRect!
var cropImage: UIImage!
@IBOutlet weak var imageView: UIImageView!

private let shapeLayer: CAShapeLayer = {
    let _shapeLayer = CAShapeLayer()
    _shapeLayer.fillColor = UIColor.clear.cgColor
    _shapeLayer.strokeColor = UIColor.green.cgColor
    _shapeLayer.lineWidth = 2
    return _shapeLayer
}()

private var startPoint: CGPoint!

override func viewDidLoad() {
    super.viewDidLoad()
    imageView.layer.addSublayer(shapeLayer)
}

override func touchesBegan(_ touches: Set<UITouch>, with event: UIEvent?) {
    clear()
    startPoint = touches.first?.location(in: imageView)
}

func clear() {
    imageView.layer.sublayers = nil
    imageView.image = UIImage(named: "aa")
    imageView.layer.addSublayer(shapeLayer)
}

override func touchesMoved(_ touches: Set<UITouch>, with event: UIEvent?) {
    guard let startPoint = startPoint, let touch = touches.first else { return }
    let point: CGPoint

    if let predictedTouch = event?.predictedTouches(for: touch)?.last {
        point = predictedTouch.location(in: imageView)
    } else {
        point = touch.location(in: imageView)
    }
    updatePath(from: startPoint, to: point)
}

override func touchesEnded(_ touches: Set<UITouch>, with event: UIEvent?) {
    guard let startPoint = startPoint, let touch = touches.first else { return }
    let point = touch.location(in: imageView)
    updatePath(from: startPoint, to: point)
    imageView.image = imageView.snapshot(afterScreenUpdates: true)
    shapeLayer.path = nil
}

override func touchesCancelled(_ touches: Set<UITouch>, with event: UIEvent?) {
    shapeLayer.path = nil
}

private func updatePath(from startPoint: CGPoint, to point: CGPoint) {
    let size = CGSize(width: point.x - startPoint.x, height: point.y - startPoint.y)
    rec = CGRect(origin: startPoint, size: size)
    shapeLayer.path = UIBezierPath(rect: rec).cgPath
}
@IBAction func btnTapped(_ sender: Any) {
    clear()
}

@IBAction func btnCropTapped(_ sender: Any) {
    let newRec = CGRect(origin: CGPoint(x: rec.origin.x, y: rec.origin.y), size: rec.size)
    cropImage = imageView.image?.crop(rect: newRec)
    print(rec)
    print(newRec)
    self.performSegue(withIdentifier: "toImage", sender: nil)
}

override func prepare(for segue: UIStoryboardSegue, sender: Any?) {
    if segue.identifier == "toImage" {
        if let destination = segue.destination as? ImageViewController {
            destination.croppedImage = cropImage
        }
    }
} 
```

}

# c# - Linq 查询 - 使用字符串作为属性？

> ID：10849331
> 
> 赞同：0
> 
> 时间：2012-06-01T11:23:30.940
> 
> 标签：c#, linq

代码：

```
foreach (PropertyInfo prop in typeof(SomeObject).GetProperties())
                {
                    if (Attribute.IsDefined(prop, typeof(SomeCustomAttribute)))
                    {
                        column.Expression(p => p.Name);
                    }
                } 
```

我想添加分配了 SomeCustomAttribute 数据注释的列。

如何使用prop.Name（属性名称）作为属性而不是手动p.Name？

例如..

```
...
column.Expression(p => prop.Name);
... 
```

column.Expression 是

```
ITableColumn Expression<TProperty>(Expression<Func<TModel, TProperty>> expression) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:28:51.517

假设您定义了以下类型：

```
interface ITableColumn { }
class SomeObject 
{
    public int MyProperty { get; set; }
}
class Column<TModel>
{
    public ITableColumn Expression<TProperty>(Expression<Func<TModel, TProperty>> expression)
    {
        // just a stub
        return null;
    }
} 
```

要调用`Column.Expression`通过反射获得的单个属性，您必须首先构建成员表达式：

```
 private static LambdaExpression MakeMemberExpression(PropertyInfo propertyInfo)
    {
        var instanceExpression = Expression.Parameter(propertyInfo.DeclaringType);
        return Expression.Lambda(Expression.MakeMemberAccess(instanceExpression, propertyInfo), instanceExpression);
    } 
```

只要你不知道`TProperty`静态的，你就不需要构建强类型的 lambda( `Expression<Func<TModel, TProperty>>`)。现在，让我们调用它：

```
 var property = typeof(SomeObject)
            .GetProperty("MyProperty");

        var columnType = typeof(Column<>)
            .MakeGenericType(typeof(SomeObject));

        var expressionMethod = columnType
            .GetMethod("Expression")
            .MakeGenericMethod(property.PropertyType);

        var expr = MakeMemberExpression(property);

        expressionMethod.Invoke(new Column<SomeObject>(), new[] { expr }); 
```

希望这可以帮助。

# unix - Shell scripting to 如何显示搜索字符串的具体内容？

> ID：10849335
> 
> 赞同：1
> 
> 时间：2012-06-01T11:23:38.020
> 
> 标签：unix

这是我的查询：

/path/newdir/newfile.csv

示例输入搜索字符串：123456789

示例输出：

样品号：123456789 时间：2012-05-29T10:21:06Z 时间：2012-05-29T13:07:46Z

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:16:56.477

您可以尝试使用 sed，

```
sed '/123456789/s/\(Sample Number.*\) \(Time In.*\) \(Time Out: [^ ]\+\) \(.*\)/\1 \2 \3/g' newfile.csv 
```

我认为您的 newfile.csv 看起来只是这样。我认为是这样。

文件内容：

```
Sample Number: 123456789 Time In: 2012-05-29T10:21:06Z Time Out: 2012-05-29T13:07:46Z some data : gfjgkgkgjg 
```

我希望这会对你有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:29:41.160

grep 命令用于在文件中搜索字符串。在您的示例中，您将执行以下操作：

```
grep 123456789 /path/newdir/newfile.csv 
```

您还可以在输出中包含上下文：

```
grep -A <lines before> -B <lines after> 123456789 /path/newdir/newfile.csv 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T12:37:47.517

让我再猜一次。

```
Sample Number: 123456789
Time In: 2012-05-29T10:21:06Z
Time Out: 2012-05-29T13:07:46Z
some data : gfjgkgkgjg 
```

我们可以使用 awk：

```
awk -v re=gfjgkgkgjg -F ": " '$1~/^Sample Number$/{sn=$2}$1~/^Time In$/{tin=$2}$1~/^Time Out$/{out=$2}$1~/^some data $/{data=$2}$2~re{print"Sample Number: "sn" Time In: "tin" Time Out: "out" Data: "data}' 
```

如果您与最后一行匹配，则需要添加一些状态自动化以在最后一行打印收集的数据。

# ios - iOS 渲染到纹理：为什么它是清晰的

> ID：10849336
> 
> 赞同：2
> 
> 时间：2012-06-01T11:23:46.150
> 
> 标签：ios, opengl-es, framebuffer

我正在尝试使用这篇文章进行屏幕外渲染 [http://www.idevgames.com/forums/thread-1785-post-54500.html#pid54500](http://www.idevgames.com/forums/thread-1785-post-54500.html#pid54500)

首先我初始化 FBO。

```
glGenTextures(1, &tex);
glBindTexture(GL_TEXTURE_2D, tex);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA, 512, 512, 0,  GL_RGBA, GL_UNSIGNED_BYTE, NULL);
glBindTexture(GL_TEXTURE_2D, 0);
glGenFramebuffersOES(1, &fbo);
glBindFramebufferOES(GL_FRAMEBUFFER_OES, fbo);
glFramebufferTexture2DOES(GL_FRAMEBUFFER_OES, GL_COLOR_ATTACHMENT0_OES, GL_TEXTURE_2D, tex, 0);

GLenum status = glCheckFramebufferStatusOES(GL_FRAMEBUFFER_OES); 
if (status != GL_FRAMEBUFFER_COMPLETE_OES) { 
    NSLog(@"failed to make complete framebuffer object %x", status);
    exit(-1);
} 
```

然后我画到我的纹理

```
GLint oldFBO, oldViewPort[4];
glGetIntegerv(GL_FRAMEBUFFER_BINDING_OES, &oldFBO);
glGetIntegerv(GL_VIEWPORT, oldViewPort);
glBindTexture(GL_TEXTURE_2D, 0);
glBindFramebufferOES(GL_FRAMEBUFFER_OES, listFrameBuffers[i]);
glViewport(0, 0, 512, 512);
glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

// draw code here
glBindFramebufferOES(GL_FRAMEBUFFER_OES, oldFBO);
glViewport(oldViewPort[0], oldViewPort[1], oldViewPort[2], oldViewPort[3]); 
```

然后每一帧我都画出来。

**当我完成调用 glSwapBuffers 的帧时，附加到帧缓冲区的纹理变得清晰** （但是当我每次在 glSwapBuffers 之后绘制到帧缓冲区时，一切都正常）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T10:33:28.550

至此，任务完成。我只是将绘制代码更改为此

```
GLint oldFBO, oldViewPort[4];
glGetIntegerv(GL_FRAMEBUFFER_BINDING_OES, &oldFBO);
glGetIntegerv(GL_VIEWPORT, oldViewPort);
glBindTexture(GL_TEXTURE_2D, 0);
glBindFramebufferOES(GL_FRAMEBUFFER_OES, listFrameBuffers[i]);
glViewport(0, 0, 512, 512);
//glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT); // HERE
glDisable(GL_DEPTH_TEST); // AND HERE

// draw code here

glBindFramebufferOES(GL_FRAMEBUFFER_OES, oldFBO);
glViewport(oldViewPort[0], oldViewPort[1], oldViewPort[2], oldViewPort[3]); 
```

它有效！:)

# android - 振动、LED、声音的 Android 通知默认值

> ID：10849337
> 
> 赞同：0
> 
> 时间：2012-06-01T11:23:46.897
> 
> 标签：android, eclipse, jakarta-ee

我现在已经构建了一个短信服务应用程序我希望在接收短信时显示通知，我希望在基于设备（移动设备）的设置上使用默认方式，即如果一个选择振动然后振动，或者如果一个选择 LED 然后`Notification.DEFAULT_LIGHTS`或者如果一个选择声音或然后响铃`Notification.DEFAULT_SOUND`。先生是否可以在这方面帮助我，或者对我的英语不好或不明白感到抱歉。我还在下面标记了我的代码

```
private void displayNotification(String msg)
{
    Intent i = new Intent(this.context,ZigbeeActivity.class);
    i.putExtra("ID", ID);
    i.putExtra("msg",msg);
    PendingIntent pendInt = PendingIntent.getActivity(context, 0, i, 0);
    Notification notif = new Notification(0,"Receiving SMS",System.currentTimeMillis());
    NotificationManager nm = (NotificationManager)context.getSystemService(context.NOTIFICATION_SERVICE);
    notif.setLatestEventInfo(context, "SMS", msg, pendInt);     
    notif.flags = Notification.FLAG_AUTO_CANCEL;
    notif.icon = R.drawable.notify;     
    notif.defaults |= Notification.DEFAULT_LIGHTS | Notification.DEFAULT_SOUND |     Notification.DEFAULT_VIBRATE;          
    notif.ledARGB = Color.WHITE;
    notif.flags |= Notification.FLAG_SHOW_LIGHTS;
    notif.ledOnMS = 1500;                         
    notif.ledOffMS = 1500;      
    nm.notify(ID, notif);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-02T18:57:06.933

问题出在 Notification.DEFAULT_LIGHTS 标志设置中。你不应该设置它。这段代码对我有用

```
 notification.flags |= Notification.FLAG_AUTO_CANCEL;
    notification.defaults = Notification.DEFAULT_SOUND | Notification.DEFAULT_VIBRATE;
    notification.ledARGB = Color.BLUE;
    notification.ledOnMS = 500;
    notification.ledOffMS = 500;
    notification.flags |= Notification.FLAG_SHOW_LIGHTS; 
```

# c# - 带有日期字段的动态 Linq

> ID：10849339
> 
> 赞同：2
> 
> 时间：2012-06-01T11:23:56.320
> 
> 标签：c#, linq, entity-framework, entity-framework-4, entity-framework-4.1

我正在使用动态 linq 库构建动态查询构建器。到目前为止，它适用于布尔、数字和文本，但不适用于日期。

我想知道日期的格式应该是什么才能正常工作。

这是执行 sb.ToString 返回的代码。

```
private string BuildQuery()
        {
            var sb = new StringBuilder();
            //var list = RequestBaseBL.GetRequestByCustomQuery("RequestNumber == \"12\"");
        #region 1st ROW of the QUERY
        if (ColumnType(DdlColumn1.SelectedValue) == "Text")
        {
            if(DdlOperator1.SelectedValue == "==")
            {
                sb.Append(DdlColumn1.SelectedValue);
                sb.Append(DdlOperator1.SelectedValue);
                sb.Append("\"" + TxtValue1.Text + "\"");
            }
            if (DdlOperator1.SelectedValue == "<>")
            {
                sb.Append(DdlColumn1.SelectedValue);
                sb.Append(DdlOperator1.SelectedValue);
                sb.Append("\"" + TxtValue1.Text + "\"");
            }
            if (DdlOperator1.SelectedValue == "LIKE")
            {
                sb.Append(string.Format("{0}.Contains(\"{1}\")", DdlColumn1.SelectedValue, TxtValue1.Text));
            }
            if (DdlOperator1.SelectedValue == "NOT LIKE")
            {
                sb.Append(string.Format("!{0}.Contains(\"{1}\")", DdlColumn1.SelectedValue, TxtValue1.Text));
            }
        }

        if (ColumnType(DdlColumn1.SelectedValue) == "Number")
        {
            sb.Append(DdlColumn1.SelectedValue);
            sb.Append(DdlOperator1.SelectedValue);
            sb.Append(TxtValue1.Text);
        }

        if (ColumnType(DdlColumn1.SelectedValue) == "Date")
        {
            sb.Append(DdlColumn1.SelectedValue);
            sb.Append(DdlOperator1.SelectedValue);
            sb.Append(TxtValue1.Text);
        }

        if (ColumnType(DdlColumn1.SelectedValue) == "Bool")
        {
            sb.Append(DdlColumn1.SelectedValue);
            sb.Append(DdlOperator1.SelectedValue);
            sb.Append(TxtValue1.Text);
        }

        #endregion  

        return sb.ToString();
    }

  string strSql = BuildQuery();
            try
            {
                var list = RequestBaseBL.GetRequestByCustomQuery(strSql, DdlRequestType.SelectedValue).ToList();

private static void AddDateOperatorsToList(Dictionary<string, string> operators)
            {
                operators.Add("=", "Equals");
                operators.Add("<>", "Not Equals");
                operators.Add(">", "Greater than");
                operators.Add(">=", "Greater or equal than");
                operators.Add("<", "Less than");
                operators.Add("<=", "Less or equal than");
            } 
```

**更新1：**

错误是：运算符 '=' 与操作数类型 'DateTime' 和 'Int32' 不兼容

sb.toString()

? sb.ToString() "RequestDate=12/12/2015"

**更新 2：**

更新 2 的错误：

“日期时间”类型中不存在适用的方法“解析”

```
if (ColumnType(DdlColumn1.SelectedValue) == "Date")
                {
                    sb.AppendFormat("DateTime.Parse({0})", DdlColumn1.SelectedValue);
                    var str = string.Format("{0} {1} {2}", DdlColumn1.SelectedValue, DdlOperator1.SelectedValue,
                                               DateTime.Parse(TxtValue1.Text));
                    //sb.Append(DdlColumn1.SelectedValue);
                    //sb.Append(DdlOperator1.SelectedValue);
                    //sb.Append(TxtValue1.Text);
                    sb.Append(str);
                } 
```

**更新 3：**

也没有工作

```
if (ColumnType(DdlColumn1.SelectedValue) == "Date")
                {
                    var date = DateTime.Parse(TxtValue1.Text);
                    sb.Append(DdlColumn1.SelectedValue);
                    sb.Append(DdlOperator1.SelectedValue);
                    sb.Append("\"" + date.ToUniversalTime() + "\"");
                    //sb.Append(date.ToUniversalTime());
                } 
```

![在此处输入图像描述](../Images/d289bfbc938f7e5dceda0adebc83f23f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:03:30.357

我目前正在使用 System.Dynamic.Linq 并使用带有 DateTime 对象的双等号。

```
case "Equals":
    myDictionary.Add("MyField.Date ==", dt1);
    break; 
```

后来我将字典中的键转换为字符串，将值转换为数组（注意@符号的用法）：

```
if (myDictionary.Keys.Count > 0)
{
  var conditions = myDictionary.Keys.Select((key, idx) => string.Format("{0} (@{1})", key, idx));

  // in .NET 4, the ToArray() part can go away
  predicateString = string.Join(" and ", conditions.ToArray());
  predicateValues = myDictionary.Values.ToArray();
} 
```

然后调用 AsQueryable().Where()

```
return myList.AsQueryable().Where(predicateString, predicateValues).ToList(); 
```

我相信这样做可以消除将 DateTime 对象作为字符串处理的需要。

# email - 如何将图表放入 smtp 电子邮件

> ID：10849344
> 
> 赞同：0
> 
> 时间：2012-06-01T11:24:16.667
> 
> 标签：email, charts, smtp

我希望在 html smtp 电子邮件中包含一个饼图。

我首先想到了一个 ASP.NET 图表，但这是在前端。然后我想到了高图表，但我无法为它们附加 javascript。最后我决定使用 Google Chart API。

我四处搜索，发现如果我将 URL 放入图像标签中，它会将 URL 返回的图像放入我的电子邮件中。但我已经这样做了，只是得到了“alt”文本。谷歌搜索了一下说我需要制作我的 smtp HTML。但我也这样做了，仍然没有图像。

```
var mail = new MailMessage();
mail.From = new MailAddress("email@address.com");
mail.To.Add("email@address.com");
mail.Subject = "Chart Test";
mail.Body = "<img src='https://chart.googleapis.com/chart?chs=250x100&chd=t:60,40&cht=p3&chl=Hello|World' alt='chart' />";
mail.IsBodyHtml = true;

var smtp = new SmtpClient();
smtp.Send(mail); 
```

任何建议将不胜感激。

Ps - 这是我的第一篇文章，所以请温柔哈哈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:32:31.840

我会回过头来确定这件事有什么问题。首先，发送一封带有图片的电子邮件。接下来，我注意到图像的来源是https。使用更简单的 HTTPS 映像验证这是否可行。然后，值得检查您是否甚至可以通过电子邮件包含来自不属于您自己的网络服务器的内容（可能与服务器设置有关）。

我希望，这 3 个调试步骤将导致您的答案！

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T02:54:44.170

我认为您的方法有问题的一些事情是：

1：你的邮件正文是一个不完整的html文档

2：您正在链接外部内容而不是在电子邮件中包含图像，外部图像经常被垃圾邮件过滤器等阻止。

3：您正在向谷歌发送可能是机密数据的内容

4：你选择的饼图不是圆形的，这是故意误导吗？相对于着墨区域的比例、可见的细分角度、转换前的细分角度，如果是，是转换倾斜还是透视？

不幸的是，我对 asp 邮件的了解还不够，无法详细说明如何解决该问题，但为了获得最佳结果，您应该：

1> 发送有效的 HTML

2> 在您的服务器上生成图表并将其和 html 一起发送到电子邮件中作为多部分相关

3> 将它和一个文本组合成一个版本（使用多部分替代）

4> 一定要生成一个圆形饼图，如果你想让它看起来不错（尤其是打印出来的时候），请使用像 SVG 这样的矢量格式而不是像素格式。

# php - Sybase SQL + PHP，为什么'='附近的语法不正确

> ID：10849349
> 
> 赞同：1
> 
> 时间：2012-06-01T11:24:45.863
> 
> 标签：php, sql, sybase

```
//$type has value of "Hello+World"
$type = $_POST['series'];

$sql = "select max(id) from TABLE_NAME where type = " . $type;

$result = sybase_query ($sql, $db_ro_conn) or die(db_error("query failed $sql"));
$row = sybase_fetch_row($result) 
```

我在 $sql 行中收到错误““=”附近的语法不正确。y15，过程 N/A。

发生这种情况的可能原因是什么？不知何故，它不起作用。将不胜感激任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:29:45.180

像这样在 $type 周围加上引号：

```
$type = $_POST['series'];

$sql = "select max(id) from TABLE_NAME where type = '" . $type. "'";

$result = sybase_query ($sql, $db_ro_conn) or die(db_error("query failed $sql"));
$row = sybase_fetch_row($result) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:30:08.087

让我从这个开始。始终在查询中转义 POST/GET 值！

该错误可能是由于 $type 是字符串而不是引号引起的。尝试将 $sql 更改为

```
$sql = "select max(id) from TABLE_NAME where type = '" . $type."'"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T11:30:57.590

您没有引用该值：

```
$type = str_replace("'", "''", $_POST['series']);
$sql = "select max(id) from TABLE_NAME where type = '" . $type . "'"; 
```

# ios - ASIHTTPRequest GET 请求问题

> ID：10849366
> 
> 赞同：2
> 
> 时间：2012-06-01T11:25:53.147
> 
> 标签：ios, cocoa-touch, ios4, xcode4.2, asihttprequest

我的要求是

```
 request_ = [[ASIFormDataRequest requestWithURL:requestUrl] retain];
    [request_ setDelegate:self];
    [request_ setRequestMethod:@"GET"];
    [request_ setTimeOutSeconds:HTTP_TIME_OUT];
    [request_ startAsynchronous]; 
```

但是服务器的响应是

HTTP 状态 405 - 不支持请求方法“GET”。请求的资源不允许使用指定的 HTTP 方法（不支持请求方法“GET”）。

请注意，即使它是一个获取请求，该 url 也没有任何“GET”参数。问题是，当我在浏览器中获取请求 URL 或使用“HttpRequester”（用于测试 http 请求的 Firefox 插件）调用它时，我从服务器获得了正确的响应——我相信你知道）。可能出了什么问题？

提前致谢。

巴鲁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:29:01.897

对于`GET`请求，使用`ASIHTTPRequest`.

`ASIFormDataRequest`用于`POST`请求。

但是，如果您只需要一个简单的`GET`请求，为什么还要使用 ASI？您可以在一个`dispatch_async`块中执行此操作：

```
dispatch_async(<some_queue>, ^{ 

    NSError  * error = nil;
    NSString * response = [NSString stringWithContentsOfURL: stringWithContentsOfURL: requestUrl error: &error];

    [self performSelectorOnMainThread: @selector(processResult:) withObject: response waitUntilDone: NO];
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T11:29:14.143

解决了。这是因为已发出的请求中没有标头参数“Accept”。一旦添加，一切都像一个魅力。还用 ASIHTTPRequest 替换了 ASIFormDataRequest（那是一个愚蠢的错误）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-13T12:34:20.333

似乎这是一个服务器端的问题。请验证服务器要求的所有标头参数是否都在请求中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T11:29:18.330

为什么要创建`ASIFormDataRequest`又名 POSTRequest 并将其设置`RequestMethod`为 GET？如果您想发出 GET 请求，请`ASIHTTPRequest`改用。

# javascript - 单独 div 内的多个 Google 可视化图表实例 [后续]

> ID：10849370
> 
> 赞同：1
> 
> 时间：2012-06-01T11:26:00.923
> 
> 标签：javascript, jquery, svg, google-visualization, google-gauges

这是我在 StackOverflow 上提出的问题的后续。因此，请确保您阅读了该内容以了解全貌：

[单独 div 内的多个 Google 可视化图表实例](https://stackoverflow.com/questions/10848217/multiple-instances-of-google-visualizations-chart-inside-separate-divs)

因此，为了使整个事情变得动态，我编写了以下代码：

```
var containers = document.getElementsByClassName('gaugeWrapper');
    console.log(containers);
    google.load('visualization', '1', { packages: ['gauge'] });
    for(var i = 0; i < containers.length; i++) {
        var id = containers[i].getAttribute('id');
        var name = containers[i].getAttribute('data-name');
        var value = containers[i].getAttribute('data-value');
        google.setOnLoadCallback(function () { drawChart(id, name, value) });

    }

    function drawChart(id, name, value) {
        console.log(id);
        console.log(name);
        console.log(value);
        var data = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          [name, value]
        ]);

        var options = {
            width: 400, height: 120,
            redFrom: 90, redTo: 100,
            yellowFrom: 75, yellowTo: 90,
            minorTicks: 5
        };

        var chart = new google.visualization.Gauge(document.getElementById(id));
        chart.draw(data, options);
    } 
```

这不起作用。问题是控制台只输出最后一个 div 的数据。这意味着该函数`containers.length`使用相同的参数集被调用 5 ( ) 次。

**更新：**

根据 Ateszki 的回答，这是我更新的代码：

```
 google.load('visualization', '1', { packages: ['gauge'] });     
    google.setOnLoadCallback(drawChart);

    function drawChart() {
        var containers = document.getElementsByClassName('gaugeWrapper');
        for (var i = 0; i < containers.length; i++) {

            var id = containers[i].getAttribute('id');
            var name = containers[i].getAttribute('data-name');
            var value = containers[i].getAttribute('data-value');

            var data = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          [name, value]
                ]);

            var options = {
                width: 400, height: 120,
                redFrom: 90, redTo: 100,
                yellowFrom: 75, yellowTo: 90,
                minorTicks: 5
            };
            var cont = document.getElementById(id);
            console.log(cont);
            var chart = new google.visualization.Gauge(cont);
            chart.draw(data, options);
        }
    } 
```

不幸的是，我仍然无法让它工作。现在屏幕上什么都没有呈现，尽管我的 console.log 似乎输出了正确的东西......

有什么解释/建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:42:34.043

您正在绑定 onload 的功能正在覆盖前一个。

也许您可以将值存储在另一个对象中，然后在一个函数中一次将它们全部加载。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T12:32:18.633

好的，以下已解决问题：

```
 google.load('visualization', '1', { packages: ['gauge'] });     
    google.setOnLoadCallback(drawChart);

    function drawChart() {

        var containers = $('.gaugeWrapper');
        containers.each(function (index, elem) {

            var id = $(elem).attr('id');
            var name = $(elem).data('name');
            var value = $(elem).data('value');

            var data = google.visualization.arrayToDataTable([
          ['Label', 'Value'],
          [name, value]
                ]);

            var options = {
                width: 400, height: 120,
                redFrom: 90, redTo: 100,
                yellowFrom: 75, yellowTo: 90,
                minorTicks: 5
            };
            var cont = document.getElementById(id);
            var chart = new google.visualization.Gauge(cont);
            chart.draw(data, options);
        }); 
```

我不知道它与问题更新部分中的代码有何不同，除了我现在使用 jQuery 来获取我正在寻找的值......

# google-analytics - Restkit and google analitycs

> ID：10849373
> 
> 赞同：1
> 
> 时间：2012-06-01T11:26:09.417
> 
> 标签：google-analytics, restkit, spring-3

I have developed an APP that uses restkit and connect to my server. The server side was built using spring 3.1 and jackson to generate the rest objects.

Now I want to mesuare the APP trafic but I cant find a way for google analitycs track the rest querys.

is this posible?? any recomendation??

Thanks in advance

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T04:58:38.080

对于 Google Analytics，您应该将[Google Analytics iOS 库](https://developers.google.com/analytics/devguides/collection/ios/ "适用于 iOS 的 Google Analytics（分析）SDK")添加到您的应用程序中，并可能将事件与您的应用程序进行的不同 REST 调用联系起来。

否则，您必须根据来自 iOS 用户代理的请求，从您的 Web 服务器日志中自己生成统计信息。

# castle-windsor - 在 Castle Windsor 中为服务在运行时注册附加组件实现

> ID：10849376
> 
> 赞同：2
> 
> 时间：2012-06-01T11:26:23.870
> 
> 标签：castle-windsor, ioc-container

使用 Castle Windsor 我可以注册一个类型的多个实现，例如

```
container.Register(Component.For<IMyInterceptor>()
    .ImplementedBy<MyInterceptor>();

container.Register(Component.For<IMyInterceptor>()
    .ImplementedBy<MyInterceptor2>(); 
```

这一切都如您所料，我可以使用 ResolveAll() 解决多个实现

如果我尝试在运行时注册另一个实现的实例 - 例如

```
var interceptor = new MyInterceptor3();
Container.Register(
    Component.For<IMyInterceptor>()
        .Instance(interceptor)); 
```

我得到一个例外：

已为给定键 MyInterceptor3 注册了一个组件

这是预期的行为吗？我想要实现的是使用例如 Container.ResolveAll() 来获取 IMyInterceptor 的默认实现列表以及可选的附加实现（即，在启用调试模式时，基于请求的请求）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T14:15:06.353

这会帮你解决的。

```
var interceptor = new MyInterceptor3();
Container.Register(
    Component.For<IMyInterceptor>()
        .Instance(interceptor).Named("something unique)); 
```

名称必须是唯一的。

# smarty - smarty , how to solve smarty incompatible

> ID：10849379
> 
> 赞同：0
> 
> 时间：2012-06-01T11:26:29.283
> 
> 标签：smarty

> unrecognized tag: `$ncache['tab']="gallery_cat"` (Smarty_Compiler.class.php, line 455)

i got this error, when i type the following code

```
{$ncache[tab]="gallery_cat"}
{$ncache.tab="gallery_cat"} 
```

anyway to assign an array in smarty?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:48:08.050

您可以使用 php 标签在 smarty 中分配数组，如下所示：

```
{php}
$this->assign("array", array('1','2','3'));
{/php} 
```

或者，如果您使用的是版本 3，您也可以直接从 smarty 使用它

```
{$array = ['1','2','3']} 
```

# matlab - 如何从文本文件中读取“ArrayIndex：Value”格式特征并转换为 matlab 数组？

> ID：10849381
> 
> 赞同：0
> 
> 时间：2012-06-01T11:26:35.323
> 
> 标签：matlab, file-io, sparse-matrix

我将稀疏特征存储在以下格式的文本文件中（ArrayIndex：Value）。目前我正在使用 reg 表达式解析文本并将其转换为 matlab 数组。我想知道的是，是否有更快/更好的 MATLAB-ish 方法将这种数据格式转换为 matlab 数组。

```
 2402:0.099061 2404:0.136546 2406:0.447161 2407:0.126333 2408:0.213803 2411:0.068189 2416:0.223526 2417:0.090420 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:53:23.867

## 编辑：

您可以使用 TEXTSCAN 读取和解析文件，然后从这些值构建稀疏矩阵：

```
fid = fopen('input.txt');
C = textscan(fid, '%f:%f');
fclose(fid);
C = sparse(1,C{1},C{2}); 
```

结果：

```
>> C
C =
   (1,2402)     0.099061
   (1,2404)      0.13655
   (1,2406)      0.44716
   (1,2407)      0.12633
   (1,2408)       0.2138
   (1,2411)     0.068189
   (1,2416)      0.22353
   (1,2417)      0.09042 
```

# vb.net - VB.net 循环分割字符串/替换

> ID：10849383
> 
> 赞同：1
> 
> 时间：2012-06-01T11:26:38.763
> 
> 标签：vb.net, arrays, loops, replace

我正在尝试在 VB.net 中创建一个循环算法的函数。我已经使用 Split 命令将算法拆分为一个数组，所以我有一个包含值的数组。然后我尝试遍历它们并在必要时用“数字”替换 #，但是 VB.net 会引发错误。我对 VB.net 还很陌生，所以我不确定它为什么要这样做。算法的格式为`A B C D E F 1 2 3 #`

```
Function generate(ByVal alg As String)
    Dim algSplit As String() = alg.Split(" ")
    For Each digit In algSplit
        Dim replacement As String = algSplit(digit).Replace("#", "Number")
        algSplit(digit) = replacement
    Next
    Dim result As String = String.Join("", algSplit)
    MsgBox(result)
End Function 
```

## 有快速修复吗？

问题第 2 部分：我让循环正常工作；但是我破坏了我想要的部分功能。

```
Public Function GetRandom(ByVal Min As Integer, ByVal Max As Integer) As Integer
    Dim Generator As System.Random = New System.Random()
    Return Generator.Next(Min, Max)
End Function
Public Function RandLet() As String
    Dim number As Integer = GetRandom(1, 26)
    Dim Alphabet() As String = New String() {"A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V""W", "X", "Y", "Z"}
    Dim Letter As String = Alphabet(number)
    Return Letter
End Function
Function generate(ByVal alg As String) As String
    Dim algSplit As String() = alg.Split(" "c)

    For index As Int32 = 0 To algSplit.Length - 1
        algSplit(index) = algSplit(index).Replace("#"c, GetRandom(1, 9)).Replace("%"c, RandLet())
    Next
    Dim result As String = String.Join("", algSplit)
    MsgBox(result)
    Return result
End Function 
```

最终结果从`A B C D E F 1 2 3 | L % % % | N # # #`本质`ABCDEF123|LXXX|N888` 上讲，每个 # 和每个 % 都被相同的数字替换，而不是每次都替换为不同的数字。我以为在循环中不会发生这种情况，我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:00:08.380

您正在使用字符串变量进行 For-Eaching，因为`digit`正在查找“A”，它是一个字符串，但您将它用作索引：`algSplit(digit).`。

你可以试试这个：

```
For i As Integer = 0 To algSplit.Length - 1
  algSplit(i) = algSplit(i).Replace("#", "Number")
Next 
```

如果您只是想替换`#`和 空格，这也可以：

```
alg = alg.Replace(" ", String.Empty).Replace("#", "Number") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T12:00:32.057

使用 LINQ 可能更容易：

```
Dim value = "A B C D E F 1 2 3 #"
Dim replaced = From digit In value.Split(" "c)
             Select digit.Replace("#"c, "Number")
Dim result = String.Join("", replaced) 
```

您的“传统”方法，更正：

```
Function generate(ByVal alg As String) As String
    Dim algSplit As String() = alg.Split(" "c)

    For index As Int32 = 0 To algSplit.Length - 1
        algSplit(index) = algSplit(index).Replace("#"c, "Number")
    Next
    Dim result As String = String.Join("", algSplit)
    Return result
End Function 
```

1.  方法（VB 中的函数）必须返回一些东西。您的函数不返回任何内容，因此`AS String`在最后添加。
2.  `Split`有几个重载，您使用的重载需要 a`Char`而不是字符串，所以替换`alg.Split(" ")`为`alg.Split(" "c)`
3.  如果您想用其他值替换数组值，最好 a`For-Loop`而不是 a，`For-Each`因为您需要经常使用索引（见上文）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T12:00:43.607

您正在循环字符串数组。
algSplit 上的 foreach 返回一个字符串而不是整数。
您不能将该`digit`字符串用作数组的索引

用这个替换你的代码：

```
Function generate(ByVal alg As String)     
    Dim algSplit As String() = alg.Split(" ")     
    For digit = 0 to algSplit.Length - 1
        Dim replacement As String = algSplit(digit).Replace("#", "Number")         
        algSplit(digit) = replacement     
               ' could be simply written as 
               ' algSplit(digit) = algSplit(digit).Replace("#", "Number")     

    Next     
    Dim result As String = String.Join("", algSplit)     
    ??? .. you should return something here ????
End Function 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-12-04T08:14:31.407

```
Function generate(ByVal alg As String)     
    Dim algSplit As String() = alg.Split(" ")     
    For digit = 0 to algSplit.Length - 1
        Dim replacement As String = algSplit(digit).Replace("#", "Number")         
        algSplit(digit) = replacement     
               ' could be simply written as 
               ' algSplit(digit) = algSplit(digit).Replace("#", "Number")     

    Next     
    Dim result As String = String.Join("", algSplit)     
    ??? .. you should return something here ????
End Function 
```

# asp.net - 在工作流类型的情况下管理上传的文件

> ID：10849388
> 
> 赞同：0
> 
> 时间：2012-06-01T11:27:18.180
> 
> 标签：asp.net, .net, asp.net-mvc-3

我正在使用 Asp.NET MVC 3。在一个特定的用例中，我需要一个接一个地向用户展示三种表单。在每个表单上，用户最多可以上传 5 个文件，每个文件最大为 2 MB。因此，如果特定用户以每种形式上传所有文件，则合并后的文件大小可以达到 30MB。在某些情况下，根据页面上的其他选择，用户可能不必通过所有三个表单。最后，将有一个提交按钮，将所有数据插入表中。

我的问题是：在用户在最后一页点击提交之前，管理每个页面上上传的文件及其相关数据的最佳方法是什么。我认为保持会话状态不是一个好主意，因为该服务器最多可以同时拥有 100 个用户，这意味着服务器需要大量内存。我的假设错了吗？如果不使用会话来存储所有数据，我还有哪些其他选择？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T16:46:57.203

将您的文件存储在“进行中”表中。在工作流场景中保存状态是可以的。

当他们完成这个过程时，将数据移动到永久休息的地方。

如果他们取消上传过程，您可以从暂存环境中删除数据。

如果他们没有登录，您可以在会话到期时将其删除。确保在记录上加上日期戳，以便您可以定期运行清理脚本。

# node.js - Node.js 游戏逻辑

> ID：10849400
> 
> 赞同：4
> 
> 时间：2012-06-01T11:28:49.963
> 
> 标签：node.js, mmo

我正在制作实时多人赛车游戏。现在我需要帮助在 Node.js TCP（网络）服务器中编写游戏逻辑。我不知道这是否可能，我不知道我是否做得对，但我正在尽我所能。我知道很难理解我蹩脚的英语，所以我做了这幅“画”:)
谢谢你的时间
![过程](../Images/fcb1567b19ed8e1e5b1016ad08506612.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T16:02:02.237

要详细说明 driushkin 的答案，您应该使用远程过程调用 (RPC) 和事件队列。这就像您发布的图像一样，其中每个数据包代表一个“命令”或带有一些参数（即运动方向）的 RPC。您还需要一个事件队列来确保 RPC 按时按顺序执行。这将需要每个要执行的命令的时间戳或帧计数（在未来的某个时间点，在一个简单的方案中）和同步手表（二战风格）。

您可能会注意到此方案中的一个严重弱点：由于网络延迟、恶意用户等原因，RPC 消息可能会延迟（在应该应用它们的时间之后到达）。在一个简单的方案中，延迟的 RPC 会被丢弃。这很好，因为所有客户端（甚至是发起者！）在行动之前都等待服务器发送 RPC（如果发起客户端没有等待服务器消息，他的游戏状态将与服务器不同步，并且您的游戏会被破坏）。

考虑滞后对这种方案的影响。假设客户端 A 到服务器的延迟是 100 毫秒，而回程也是 100 毫秒。这意味着客户端输入如下：

*   客户端A按键，发送RPC到服务器，*但不本地添加*（0ms）
*   服务器接收并重播 RPC (100ms)
*   客户端 A 收到自己的事件，现在终于将它添加到他的事件队列中进行处理（200ms）

如您所见，客户端在按下键后 1/5 秒内对自己的事件做出反应。这是相当不错的 100 毫秒延迟。单程跨洋延迟很容易超过 200 毫秒，拨号连接（很少见，但今天仍然存在）可能会出现 > 500 毫秒的延迟峰值。如果您在 LAN 或类似的地方玩游戏，这些都不重要，但在互联网上，这种无响应可能是无法忍受的。

这就是客户端预测 (CSP) 概念的用武之地。CSP 被认为是大而可怕的，但正确且经过深思熟虑地实施它实际上非常简单。CSP 的有趣特性是**客户端可以立即处理他们的输入**（客户端*预测*会发生什么）。当然，客户可能（而且经常会）是错误的。这意味着客户端将需要一种从服务器应用更正的方法。这意味着您需要一种方法让服务器验证、拒绝或修改来自客户端的 RPC 请求，以及一种序列化游戏状态的方法（以便可以将其恢复为重新模拟的基点）。

有很多关于这样做的好资源。我特别喜欢[http://www.gabrielgambetta.com/?p=22](http://www.gabrielgambetta.com/?p=22)，但你真的应该寻找一本好的多人游戏编程书籍。

* * *

即使在阅读了您对 Flex 和 AS3 的评论之后，我也必须推荐 socket.io。易用性（以及与节点的简单集成）使其成为我曾经使用过的通过 HTTP 进行网络游戏的最佳（最佳？）选项之一。我会做任何必要的调整才能使用它。我相信 AIR/AS3 至少有一个 WebSockets 库，即使 socket.io 本身不可用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T11:34:59.173

这听起来像是[socket.io](http://socket.io/)非常适合的东西。它是一个库，可为您在浏览器和服务器上提供实时可能性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T11:55:38.903

您可以将其建模`commands`为`events`：客户端向`move`服务器发送命令，然后服务器验证此命令，如果一切正常，他会发布事件`is moving`。

在您的情况下，可能不需要对 P1（好的，您可以移动）和其余的（P1 正在移动）做出不同的响应，后者在这两种情况下都足够了。该`is moving`事件应包含所有必要的信息（如当前位置、速度等）。

在这种最简单的形式中，发出命令会经历一些延迟，直到来自服务器的事件到达，为了避免您可以立即开始移动，然后在事件到达时在必要时应用一些补偿动作。但这可能会变得复杂。

# javascript - JavaScript - 搜索数组中的第一个字符

> ID：10849402
> 
> 赞同：4
> 
> 时间：2012-06-01T11:28:59.647
> 
> 标签：javascript, arrays, math, search, random

我正在尝试在 JavaScript 中查找数组中的第一个字符。

我有这个随机函数（不是最好的，但我会改进它）：

```
function random() {
var Rand = Math.floor(Math.random()*myArray.length);
document.getElementById('tr').innerHTML = myArray[Rand];
} 
```

这是我的数组列表。

```
myArray = ["where", "to", "get", "under", "over", "why"]; 
```

如果用户只想要带有 W 的数组，则只显示第一个字母中带有 W 的单词。（比如“在哪里”或“为什么”）

我以前对 JavaScript 没有太多经验，而且我多年来一直在处理这个问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T11:31:59.773

有`indexOf()`一个数组/字符串的方法可以为您提供一个字母的位置。**第一个字母**的位置为**0(zero)**，所以

```
function filter(letter) {
  var results = [];
  var len = myArray.length;
  for (var i = 0; i < len; i++) {
    if (myArray[i].indexOf(letter) == 0) results.push(myArray[i]);
  }
  return results;
} 
```

这是一个[jsFiddle](http://jsfiddle.net/kR4EA/)。在运行之前打开控制台（Chrome：ctrl+shift+i，或 FireBug 中的控制台）以查看生成的数组。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-01T11:34:51.730

您可以过滤数组以仅包含特定值，例如以“w”开头的值

```
var words = ["where", "to", "get", "under", "over", "why"];
var wordsWithW = words.filter(function(word) {
  return word[0] == 'w';
});
var randomWordWithW = wordsWithW[Math.floor(Math.random() * wordsWithW.length];
... // operate on the filtered array afterwards 
```

如果您打算支持*旧版*浏览器，您可能需要考虑使用[underscore.js](http://underscorejs.org/#filter)或[Prototype](http://api.prototypejs.org/language/Enumerable/prototype/findAll/)

使用下划线时，您可以简单地这样写：

```
var randomWordWithW = _.chain(words).filter(function(word) {
  return word[0] == 'w';
}).shuffle().first().value() 
```

# sql - 如何在asp.net mvc3的sql数据库中检索存储的图像？

> ID：10849409
> 
> 赞同：0
> 
> 时间：2012-06-01T11:29:26.640
> 
> 标签：sql, asp.net-mvc, asp.net-mvc-3, sql-server-2008

我的数据库中有一个表，其中一列是图像数据类型。我可以将图像存储在数据库中，但无法检索它。我想为每个登录的用户检索图像。我使用了这段代码：

```
public ActionResult ShowImage()
{
    var userID = GetUserID();
    var advert = from ad in StoreDb.Ads where ad.UserId == userID select ad.AdImage;
    return File(advert, "Image");     
} 
```

但是得到了这个错误：

> 错误 2 参数 1：无法从 'System.Linq.IQueryable' 转换为 'string' C:\Users\Tena\Documents\Visual Studio 2010\Projects\MvcApplication6\MvcApplication6\Controllers\Default3Controller.cs 92 25 MvcApplication6

问题是广告在

```
System.Linq.IQueryable<>byte[] 
```

格式，但文件需要`byte[]`格式。我现在该怎么办？任何答案都是有帮助的。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:35:24.280

我不确定，这是解决这个问题的方法。我通常实现一个自定义的 http 处理程序，它需要一些 id（例如 userid），连接到数据库，获取图片并返回具有图片正确 mime 类型的字节流。

在“视图”中，我只是创建一个带有 http 处理程序的 url 作为图像源的图像标记。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T11:38:48.710

问题是没有对 LINQ 查询进行评估，并且目前的查询理论上可以返回多个结果（因此它是一个`IQueryable`）。

实际上，查询看起来不正确，因为可能会有多个广告针对特定用户，而且我不希望在任何情况下都根据用户存储广告，但我对您的数据一无所知结构，因此我将尝试帮助您使查询正常工作，您可以稍后对其进行改进。

尝试更改此行：

```
var advert = from ad in StoreDb.Ads where ad.UserId == userID select ad.AdImage; 
```

对此：

```
var advert = (from ad in StoreDb.Ads where ad.UserId == userID select ad.AdImage).FirstOrDefault(); 
```

我可以为您提供有关如何执行此操作的其他提示，但请先尝试一下，看看会发生什么。

# sqlite - Refactor SQLite Table by splitting it in two and link with foreign keys

> ID：10849411
> 
> 赞同：2
> 
> 时间：2012-06-01T11:29:30.047
> 
> 标签：sqlite, foreign-keys, temp-tables

I'm working on a SQLite Database. The database is already filled, but I want to refactor it. Here is a sample of what I need to do:

I currently have one table:

```
CREATE TABLE Cars (ID INTEGER PRIMARY KEY,
                   Name VARCHAR(32),
                   TopSpeed FLOAT,                   
                   EngineCap FLOAT); 
```

I want to split this into two tables:

```
CREATE TABLE Vehicles (ID INTEGER PRIMARY KEY,
                       Name VARCHAR(32),
                       TopSpeed FLOAT); 

CREATE TABLE Cars (ID INTEGER PRIMARY KEY,
                   VehicleID INTEGER CONSTRAINT FK_Cars REFERENCES [Vehicles](ID),                  
                   EngineCap FLOAT); 
```

I have figured out to create a temporary table with the `Cars` table contents, and I can fill up the `Vehicles` table with the contents of the `Cars` table:

```
CREATE TEMPORARY TABLE Cars_temp AS SELECT * FROM Cars;

INSERT INTO Vehicles (Name, TopSpeed)
SELECT Name, TopSpeed FROM Cars_temp; 
```

But I am still looking for a way to go over that same selection, while putting the `EngineCap` field into the new `Cars` table and **somehow extracting the corresponding ID value from the `Vehicles` table to put into the `VehicleID` foreign key field on the `Cars` table.**

I'm open for workaround or alternative approaches.

Thanks.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2018-11-24T18:32:12.990

由于@mateusza 没有提供示例，因此我做了一个示例：

假设你有这张表：

```
CREATE TABLE [Customer] (
  [name] TEXT,
  [street] TEXT,
  [city] TEXT); 
```

现在你想移动`street`并`city`进入一个单独的表`Address`，所以你最终会得到两个表：

```
CREATE TABLE [Customer2] (
  [name] TEXT,
  [addr] INTEGER);

CREATE TABLE [Address] (
  [rowid] INTEGER NOT NULL,
  [street] TEXT,
  [city] TEXT,
  PRIMARY KEY ([rowid])
); 
```

*（对于这个例子，我在同一个数据库中进行转换。您可能会使用两个 DB，将一个转换为另一个，使用 SQL ATTACH 命令。）*

现在我们创建一个视图（它使用新表模仿我们的原始表）和触发器：

```
CREATE VIEW Customer1 (name, street, city) AS
    SELECT C.name, A.street, A.city FROM Customer2 AS C
    JOIN Address as A ON (C.addr == A.rowid);

CREATE TEMP TRIGGER TempTrig INSTEAD OF INSERT ON Customer1 FOR EACH ROW BEGIN
    INSERT INTO Address (street, city) SELECT NEW.street, NEW.city;
    INSERT INTO Customer2 (addr, name) SELECT last_insert_rowid(), NEW.name;
END; 
```

现在您可以复制表格行：

```
INSERT INTO Customer1 (name, street, city) SELECT name, street, city FROM Customer; 
```

* * *

以上是一个简化的情况，您只需将一些数据移动到一个新表中。

一个更复杂（和更一般）的情况是您想要...

1.  将原始表的列分成几个外部表，并且
2.  在外部表中有唯一的条目（这通常是您重构表的原因）。

这增加了一些额外的挑战：

1.  您最终将插入多个表，然后才能将它们的 rowid 插入到具有引用 rowid 的表中。这需要将每个`INSERT`'s last_insert_rowid() 的结果存储到临时表中。
2.  如果外部表中已经存在该值，则必须存储其 rowid 而不是（未执行的）插入操作中的 rowid。

这是一个完整的解决方案。它管理一个音乐记录数据库，由歌曲名称、专辑名称和艺术家姓名组成。

```
-- Original table
CREATE TABLE [Song] (
  [title] TEXT,
  [album] TEXT,
  [artist] TEXT
);

-- Refactored tables
CREATE TABLE [Song2] (
  [title] TEXT,
  [album_rowid] INTEGER,
  [artist_rowid] INTEGER
);
CREATE TABLE [Album] (
  [rowid] INTEGER PRIMARY KEY AUTOINCREMENT,
  [title] TEXT UNIQUE
);
CREATE TABLE [Artist] (
  [rowid] INTEGER PRIMARY KEY AUTOINCREMENT,
  [name] TEXT UNIQUE
);

-- Fill with sample data

INSERT INTO Song VALUES ("Hunting Girl", "Songs From The Wood", "Jethro Tull");
INSERT INTO Song VALUES ("Acres Wild", "Heavy Horses", "Jethro Tull");
INSERT INTO Song VALUES ("Broadford Bazar", "Heavy Horses", "Jethro Tull");
INSERT INTO Song VALUES ("Statue of Liberty", "White Music", "XTC");
INSERT INTO Song VALUES ("Standing In For Joe", "Wasp Star", "XTC");
INSERT INTO Song VALUES ("Velvet Green", "Songs From The Wood", "Jethro Tull");

-- Conversion starts here

CREATE TEMP TABLE [TempRowIDs] (
  [album_id] INTEGER,
  [artist_id] INTEGER
);

CREATE VIEW Song1 (title, album, artist) AS
  SELECT Song2.title, Album.title, Artist.name
    FROM Song2
    JOIN Album ON (Song2.album_rowid == Album.rowid)
    JOIN Artist ON (Song2.artist_rowid == Artist.rowid);

CREATE TEMP TRIGGER TempTrig INSTEAD OF INSERT ON Song1 FOR EACH ROW BEGIN
  INSERT OR IGNORE INTO Album (title) SELECT NEW.album;
  UPDATE TempRowIDs SET album_id = (SELECT COALESCE (
    (SELECT rowid FROM Album WHERE changes()==0 AND title==NEW.album), last_insert_rowid()
  ) ) WHERE rowid==1;
  INSERT OR IGNORE INTO Artist (name) SELECT NEW.artist;
  UPDATE TempRowIDs SET artist_id = (SELECT COALESCE (
    (SELECT rowid FROM Artist WHERE changes()==0 AND name==NEW.artist), last_insert_rowid()
  ) ) WHERE rowid==1;
  INSERT INTO Song2 (title, album_rowid, artist_rowid) SELECT
    NEW.title, (SELECT album_id FROM TempRowIDs), (SELECT artist_id FROM TempRowIDs);
END;

INSERT INTO TempRowIDs DEFAULT VALUES;

INSERT INTO Song1 (title, album, artist) SELECT title, album, artist FROM Song;

DROP TRIGGER TempTrig;
DROP TABLE TempRowIDs;

-- Conversion ends here

-- Print results
SELECT * FROM Song;
SELECT * FROM Song1;

-- Check if original and copy are identical (https://stackoverflow.com/a/13865679/43615)
SELECT CASE WHEN (SELECT COUNT(*) FROM (SELECT * FROM Song UNION SELECT * FROM Song1)) == (SELECT COUNT() FROM Song) THEN 'Success' ELSE 'Failure' END; 
```

请注意，此示例有一个潜在问题：如果外表上的约束更复杂，则`SELECT rowid FROM`需要相应地更新对现有条目的搜索。理想情况下，SQLite 应该提供一种方法来以某种方式确定冲突的 rowid，但不幸的是，它没有（[参见这个相关问题](https://stackoverflow.com/q/53468186/43615)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T15:49:31.437

没有触发器的简单解决方案：

*   创建包含 CAR_ID 的 VEHICLES_TEMP 表
*   创建没有您不想要的 VEHICLES 列的新 CARS 表
*   使用取自 VEHICLES_TEMP 的 VEHICLE_ID 更新 CARS（由 CAR_ID 标识）
*   创建没有 CAR_ID 的最终 VEHICLES 表

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T12:39:32.447

创建一个表`New_Cars`和一个`INSTEAD OF INSERT`触发器，它将向表`Vehicles`和`Cars`. 插入时`Cars`，可以使用[last_insert_rowid()](http://www.sqlite.org/lang_corefunc.html#last_insert_rowid)函数来引用`Vehicles`表中插入的行。

这可以是临时解决方案，或者您可以将其保留在数据库中以进行进一步修改。

# visual-c++ - 无限针三通过滤器的IPinFlowControl

> ID：10849413
> 
> 赞同：1
> 
> 时间：2012-06-01T11:29:36.323
> 
> 标签：visual-c++, directshow

我想阻止来自其中一个引脚的输出`Infinite Pin Tee filter`，

所以我试图获取`IPinFlowControl`其中一个输出引脚，但我正在进入`E_Pointer`HResult。

下面是我的代码

```
IPin *pOutInfiniteTee2=NULL;

hr = FindUnconnectedPin(infiniteTeeFilter,PINDIR_OUTPUT,&pOutInfiniteTee2);

//ConnectFilter..using..pOutInfiniteTee2

IPinFlowControl *ipinFlow=NULL;
    hr=pOutInfiniteTee2->QueryInterface(IID_IPinFlowControl,(void **)&ipinFlow); 
```

如何将 IPinFlowControl 与 InfineTeePin fitler 一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:17:49.570

正如 MSDN 所述，在[Infinite Pin Tee Filter](https://stackoverflow.com/questions/10849413/ipinflowcontrol-of-infinite-pin-tee-filter)`IPinFlowControl`上不可用：

```
Filter Interfaces   IBaseFilter
Input Pin Media Types   Any media type
Input Pin Interfaces    IMemInputPin, IPin, IQualityControl
Output Pin Media Types  Any media type. The output type always matches the input type, for all output pins
Output Pin Interfaces   IMediaPosition, IMediaSeeking, IPin, IQualityControl
Filter CLSID    CLSID_InfTee 
```

# c++ - 如何强制 Visual Studio 2010 使用 x64？

> ID：10849420
> 
> 赞同：1
> 
> 时间：2012-06-01T11:29:52.273
> 
> 标签：c++, visual-studio-2010, platform

每当我在 Visual Studio 2010 中创建一个新项目并且一开始没有设置特定平台（在我的情况下为 x64）时，之后我将无法完全更改它。所以我用一个外部库（编译为x64）设置了所有需要的东西，然后按编译它显然失败了，因为两个平台不匹配。

> sfml-graphics-sd.lib(RenderStates.obj)：致命错误 LNK1112：模块机器类型“x64”与目标机器类型“X86”冲突

注意到我使用 Build->Configuration-Manager->Active projectplattform->New...->x64 将其更改为 x64。这与我在做任何其他事情之前所做的相同并且它有效，但如果我之后再做，我会收到链接器错误：

> libcpmtd.lib(uncaught.obj)：致命错误 LNK1112：模块机器类型“x64”与目标机器类型“X86”冲突

*.obj 文件可以从项目更改为项目（例如 cout.obj），据我了解，Visual Studio 选择 x86 标准库，并且在我切换平台后不会改变它的决定。

所以对于这个问题：我如何强制 VS 使用新指定的 x64 平台 - 也适用于标准库？

**注意：**创建新的配置设置将自动将目标机器的链接器设置更改为：`MachineX64 (/MACHINE:X64)`

**注意：**不确定它是否相关，但我正在静态链接运行时库`Multithreaded-Debug (/MTd)`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T18:32:24.383

如果有人遇到和我一样的问题，他可以在[MSDN '论坛'](http://social.msdn.microsoft.com/Forums/en-US/vcgeneral/thread/790c5973-41b7-44f5-9742-9e9975088666)上找到讨论和解决方案。

> OK，找到了，LibraryPath对应VC++ Directories项目属性页中的Library Directories属性。这就解释了发生了什么，该值通常是继承的，因此在您创建 add x64 时它会自动更改。但是，由于您修改了该值，因此它现在是项目的本地值，并且在添加 x64 时它只是被复制...与所有那些 x86 特定的目录。
> 
> 我想在 Linker\General\Additional Library 目录中添加该 lib 目录更简单、更安全

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-27T20:35:37.133

卢卡斯上面的回答是正确的。但是，可能还有其他并发症。

如果更改库目录路径不起作用，请确保您的 vcxproj 文件不是只读文件或尝试直接在 vcxproj 文件中编辑路径。

使用 VS Perforce 插件，更改库目录路径和构建可能实际上不会保存您的项目文件，并且您不会收到文件为只读的警告，从而允许构建以旧的、不正确的设置继续进行。

# javascript - 文本区域空检查

> ID：10849421
> 
> 赞同：6
> 
> 时间：2012-06-01T11:29:54.307
> 
> 标签：javascript, textarea

HTML

```
<form name="myForm" id="myForm" onsubmit="return validate();" action="<?php echo $_SERVER['PHP_SELF']?>">
<input type="text" name="name" id="name">
<textarea name="details" id="details"></textarea>
<input type="submit">
</form> 
```

Javascript

```
function validate()
{
         if(document.getElementById('details').value == '') 
         {      
        alert("Please Provide Details!");
              document.getElementById('details').focus();
        return false;       
        }
         else if(document.getElementById('name').value == '')
         {      
        alert("Please Provide Name!");
               document.getElementById('name').focus();
        return false;       
        }
         else
           return true;
} 
```

或者

```
function validate()
    {
             if(document.myForm.details.value == '') 
             {      
            alert("Please Provide Details!");
              document.myForm.details.focus();
            return false;       
            }
             else if(document.myForm.name.value == '')
             {      
            alert("Please Provide Name!");
              document.myForm.name.focus();
            return false;       
            }
             else
               return true;
    } 
```

我已经看过以前 Stack Overflow 的代码，但是当我使用这些代码时，它不起作用。有人会帮助解决使用Javascript而不是jquery检查Textarea上的空值吗？

我使用的参考 [如何使用 javascript 检查 textarea 内容是否为空白？](https://stackoverflow.com/questions/2090869/how-to-check-the-textarea-content-is-blank-using-javascript) 以及 [如何检查 Javascript 或 Jquery 中的 Textarea 是否为空？](https://stackoverflow.com/questions/2476382/how-to-check-if-a-textarea-is-empty-in-javascript-or-jquery)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-04T04:21:46.327

我认为您的文本区域可能存在空间问题。使用修剪功能来减少它。这是下面的示例。我希望它可以解决你的问题。

JavaScript 添加这个函数

```
function trimfield(str) 
{ 
    return str.replace(/^\s+|\s+$/g,''); 
} 
```

还有你的 JavaScript 函数

```
function validate()
{
     var obj1 = document.getElementById('details');
     var obj2 = document.getElementById('name');
         if(trimfield(obj1.value) == '') 
         {      
              alert("Please Provide Details!");
              obj1.focus();
              return false;       
         }
         else if(trimfield(obj2.value) == '')
         {      
               alert("Please Provide Name!");
               obj2.focus();
               return false;       
        }
         else
           return true;
} 
```

或者

```
function validate()
    {
         var obj1 = document.myForm.details;
         var obj2 = document.myForm.name;
             if(trimfield(obj1.value) == '') 
             {      
               alert("Please Provide Details!");
               obj1.focus();
               return false;       
             }
             else if(trimfield(obj2.value) == '')
             {      
               alert("Please Provide Name!");
               obj2.focus();
               return false;       
             }
             else
               return true;
    } 
```

以及带有 PHP 的 HTML

```
<form name="myForm" id="myForm" onsubmit="return validate();" action="<?php echo $_SERVER['PHP_SELF']?>">
<input type="text" name="name" id="name">
<textarea name="details" id="details"></textarea>
<input type="submit">
</form> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-02-01T06:13:04.227

您可以使用以下 jQuery 来转义空格。

```
if($("#YourTextAreaID").val().trim().length < 1)
{
    alert("Please Enter Text...");
    return; 
} 
```

# javascript - Ember.js - 在对象内定义 ArrayProxy

> ID：10849423
> 
> 赞同：1
> 
> 时间：2012-06-01T11:30:04.273
> 
> 标签：javascript, ember.js

我有一个类别列表。每个类别都可以有子类别。这是我创建的模型：

```
App.Category = Em.Object.extend({
    id: null,
    name: null,
    subCategories: Em.ArrayProxy.create({content: []})
}); 
```

问题是，如果我将一个子类别`subCategories`推送到数组中，它会被推送到`App.Category`

看看这个[jsFiddle](http://jsfiddle.net/lazyboy/HdcQj/)。

我不明白为什么会这样，我应该如何重写它才能正常工作。

* * *

**代码**：

```
App.Category = Em.Object.extend({
    id: null,
    name: null,
    subCategories: Em.ArrayProxy.create({content: []})
});

App.categories = Em.ArrayController.create({
    content: [],

    // assumes list of categories is ordered by parent id
    loadCategories: function(cats) {
        for (var i=0, cat; i < cats.length; i++) {
            var parentID = cats[i].parentID;
            delete cats[i].parentID;
            cat = App.Category.create(cats[i]);

            if (parentID !== null) {
                var parent = this.findProperty('id', parentID);
                parent.get('subCategories').pushObject(cat);
            } else {
                this.pushObject(cat);
            }
        };
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T14:07:24.180

这是因为传递给的散列`extend`定义了类实例化的对象原型上的属性。而`create`在实例化对象上定义属性。[Dan Gebhardt 有一篇关于理解 Ember.js 对象](http://www.cerebris.com/blog/2012/03/06/understanding-ember-object/)的非常好的博文。你应该检查一下。

您的问题可以按如下方式解决，请参见[http://jsfiddle.net/pangratz666/hXHqs/](http://jsfiddle.net/pangratz666/hXHqs/)：

```
App.Category = Em.Object.extend({
    init: function() {
        this._super();
        this.set('subCategories', Em.ArrayProxy.create({
            content: []
        }));
    }
}); 
```

# c++ - cmake将唯一的-D传递给子目录

> ID：10849424
> 
> 赞同：1
> 
> 时间：2012-06-01T11:30:06.793
> 
> 标签：c++, configuration, cmake, subdirectory

我正在尝试为一个相当大的项目设置一个 cmake 系统，但我陷入了将项目中每个子目录中的所有文件的唯一定义传递给 C++ 编译器的阶段。我所做的是：

在 CMakeLists.txt 的顶级目录中：

```
set_property(
    DIRECTORY
    APPEND PROPERTY COMPILE_DEFINITIONS LOG_FAPP_PKG=CORE
) 
```

接着

```
add_subdirectory(Modules) 
```

在 CMakeListst.txt 的 Modules 子目录中：

```
add_subdirectory(ModuleConfigurationProvider)
set_property(
    DIRECTORY ModuleConfigurationProvider
    APPEND PROPERTY COMPILE_DEFINITIONS LOG_FAPP_MODULE=CONFPROVIDER
) 
```

但我在 Makefile 中得到的只是定义的第一级（即：LOG_FAPP_PKG），而第二级（LOG_FAPP_MODULE）被完全忽略。

我还尝试将 CMakeLists.txt 放入 ModuleConfigurationProvider 目录中

```
set_property(
    DIRECTORY
    APPEND PROPERTY COMPILE_DEFINITIONS LOG_FAPP_MODULE=CONFIGPROVIDER
) 
```

甚至是

```
add_definitions(-DLOG_FAPP_MODULE=CONFIGPROVIDER) 
```

但仍然无法正常工作。我已经打印出当前目录的定义，它们在目录中正确显示，但似乎它们没有传播到生成的 makefile。

知道我做错了什么吗？

# php - 通过 AJAX、PHP 和 MYSQL 传递参数时返回多个值

> ID：10849426
> 
> 赞同：2
> 
> 时间：2012-06-01T11:30:11.390
> 
> 标签：php, mysql, html, ajax, jquery

我正在开发基于 ajax 的搜索，这是它的演示。我在返回结果时遇到问题。我需要显示 Result 2 次。但它只显示一次。下面是我的 HTML 代码

```
<form action="" method="post" id="demoform">
<select style="width:250px;padding:5px 0px;color:#f1eedb;"  name="product" class="product">
   <option>TENNIS</option>
   <option>FOOTBALL</option>
   <option>SWIMMING</option>
</select>
</form>
<div id="result">Display Result Here</div> 
```

我使用下面的 Ajax 脚本来检索数据：-

```
$(".product").change(function(){
            $.ajax({
                type : 'POST',
                url : 'post.php',
                dataType : 'json',
                data: {
                    product : $(".product option:selected").text(),
                },
                success : function(data){
                    $('#result').removeClass().addClass((data.error === true) ? 'error' : 'success')
                        .html(data.msg).show();
                    if (data.error === true)
                        $('#demoForm').show();
                },
                error : function(XMLHttpRequest, textStatus, errorThrown) {
                    $('#result').removeClass().addClass('error')
                        .text('There was an error.').show(500);
                    $('#demoForm').show();
                }
            });
        }); 
```

post.php 文件具有以下代码：-

```
<?php
require('connect.php');
$get_select = $_POST[product];
if($get_product!='FOOTBALL'){
  $return['error'] = true;
  return['msg'] = 'Incorrect Selection';
  echo json_encode(return);
}
else {
  $return['error'] = false;
  $i=0;
  while($i<2) {
    return['msg'] = $get_product;
  }
  echo json_encode(return);//Returns only one result.
}
?> 
```

我需要将结果显示为“CRICKET CRICKET”两次，但它只显示一次。我应该怎么做才能得到这两个结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:59:42.167

这条线是否有可能使 php 感到困惑：

> while($i<2) {
> return['msg'] = $get_product;
> }

应该是 $return 吗？使用像“return”这样的保留字也有点不确定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-28T08:37:21.313

请更改以下代码：

```
else {
  $i=0;
  $messageToReturn = "";
  while($i<2) {
    $messageToReturn .= $get_product; //Append to your variable
  }
  return json_encode($messageToReturn); //Returns the result
} 
```

我建议将 while 更改为 for 循环。在这种情况下，你会得到这个：

```
else {
 $messageToReturn = "";
 for($i = 0; $i < 2; $i++)
 {
    $messageToReturn .= $get_product; //Append to your variable
 }
 return json_encode($messageToReturn); 
```

如果您知道需要重复的次数，请使用 for 循环。时光永无止境。所以你可以得到一个可能的堆栈溢出......

# algorithm - 两个网格点之间的豪斯多夫距离

> ID：10849430
> 
> 赞同：1
> 
> 时间：2012-06-01T11:30:23.100
> 
> 标签：algorithm, distance, euclidean-distance

我必须为 2 个网格实现 Hausdorff 距离。网格是人体器官的不同分割结果，我必须比较它们，一个网格是黄金分割。第二个是分割算法的结果。

我将使用 Hausdorff 距离，但在理解我到底要做什么时遇到了一些问题。我知道我必须计算meshB中meshA中每个点的最近点，反之亦然。这些是我的相对距离。对于集合中的 2 个对应点，我采用最大相对距离 => hausdorff。（这就是我有多远）

现在我的问题是：一个网格有 ~100,000 点，另一个网格有 ~2,000。因此，这将是 n:1 关系。我在计算 Hausdorff 时需要考虑哪些点，我该如何解决？将不胜感激任何提示。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:03:11.387

如果![x 和 x](../Images/4355b4e2812e2ada3ba312922a2c2c97.png)是有限或可数并集，则![和](../Images/c330d9c9a1c9b04aaf0f6479ab5c491a.png)

如果![X](../Images/8cf3fa1ec6df67ff0956077f21a8cf37.png)和![是的](../Images/61068580f3e7a93fa06214a5ce14d775.png)是度量空间，则其乘积的 Hausdorff 维数满足 ![和](../Images/2ea977d78746f13060321aacdd8b2e37.png)

upd：蛮力算法：

```
1\.  h = 0 
2\.  for every point ai of A,
      2.1  shortest = Inf ;
      2.2  for every point bj of B
                    dij = d (ai , bj )
                    if dij < shortest then
                              shortest = dij
      2.3  if shortest > h then 
                    h = shortest 
```

# javascript - 如果使用javascript几秒钟没有用户活动，如何刷新页面

> ID：10849432
> 
> 赞同：8
> 
> 时间：2012-06-01T11:30:25.507
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [如何更改此代码，使其仅在没有鼠标移动时重定向](https://stackoverflow.com/questions/10825263/how-to-alter-this-code-so-that-it-only-redirects-if-there-is-no-mouse-movement)

如果用户没有使用 Javascript 进行任何活动，我想刷新网页。用户活动，如按键或鼠标单击。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-01T11:33:19.857

这是一个基本的例子

```
(function(seconds) {
    var refresh,       
        intvrefresh = function() {
            clearInterval(refresh);
            refresh = setTimeout(function() {
               location.href = location.href;
            }, seconds * 1000);
        };

    $(document).on('keypress click', function() { intvrefresh() });
    intvrefresh();

}(15)); // define here seconds 
```

这将在没有按键或点击事件的情况下每 15 秒刷新一次页面（但如果您在其他地方定义了相同的事件，则`stopPropagation()`这将无法正常工作，因为该事件将无法到达元素）

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-01T11:35:45.700

创建一个`setTimeout`将刷新页面的计时器（ ），每次按下键或按下鼠标时，只需重新启动计时器。

请参阅[此问题](https://stackoverflow.com/questions/10825263/how-to-alter-this-code-so-that-it-only-redirects-if-there-is-no-mouse-movement)以获取执行您想要的大部分功能的代码。

FWIW，这是 F.Calderan 的答案改写为：

1.  消除不必要的关闭
2.  通过将动作提供为回调，将*动作*与*重复*分开

--

```
function setIdle(cb, seconds) {
    var timer; 
    var interval = seconds * 1000;
    function refresh() {
            clearInterval(timer);
            timer = setTimeout(cb, interval);
    };
    $(document).on('keypress click', refresh);
    refresh();
}

setIdle(function() {
    location.href = location.href;
}, 15); 
```

# c# - 在窗口服务 C# 中实现未处理的异常捕获事件？

> ID：10849433
> 
> 赞同：1
> 
> 时间：2012-06-01T11:30:31.913
> 
> 标签：c#, windows-services

我是 C# 的新手，我想**在 Windows 服务中捕获未经处理的异常。**乳清我尝试这个窗口服务崩溃我没有什么问题......任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T11:44:55.987

尝试这个

在构造函数中添加这个

```
 AppDomain.CurrentDomain.UnhandledException += new UnhandledExceptionEventHandler(CurrentDomain_UnhandledException); 
```

在构造函数之后

```
 void CurrentDomain_UnhandledException(object sender, UnhandledExceptionEventArgs e)
    {
        Exception ex =(Exception)e.ExceptionObject;

       ....
    } 
```

# c# - 嵌套的 Math.Pow(...) 行为怪异

> ID：10849439
> 
> 赞同：4
> 
> 时间：2012-06-01T11:31:04.403
> 
> 标签：c#, math, nested, pow

目前我正在将一些旧的 C++ 代码重写为 C#。运行一些测试时，它没有按应有的方式工作，我开始调试，遇到了下面我似乎无法弄清楚的问题。

由于我在课堂上做了大量数学运算并经常使用 Math.Pow 函数，因此我为它创建了一个快捷方法：

```
public double pow(double d, double p)
{
   return Math.Pow(d,p);
} 
```

然后我有一个代码行如下，它使用这种方法很多次：

```
double y = pow((pow(d12, 2) + pow(d13, 2) + pow(23, 2)), 2) - (2.0 * (pow(d12, 4) + pow(d13, 4) + pow(d23, 4))); 
```

这条线没有给出预期的结果，所以我开始把它分成更小的部分，因为它应该被计算出来......例如，减号之前的值应该等于 q5：

```
double q1 = pow(d12, 2);
double q2 = pow(d13, 2);
double q3 = pow(d23, 2);
double q4 = q1 + q2 + q3;
double q5 = pow(q4, 2); 
```

在这些行之后 q5 是 8775553070736.0

然后我尝试将长线分成两部分，其中第一部分应该等于上面的5行，就写成一行：

```
double q12 = pow((pow(d12, 2) + pow(d13, 2) + pow(23, 2)), 2); 
```

我希望评估的结果与 q5 相同，但事实并非如此。q12 改为 4479508755225.0

代码有什么问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T11:33:39.960

你为什么期望：

```
pow(d23, 2) 
```

与

```
pow(23, 2) 
```

?

**提示：**在 VS 中，始终将数字的默认颜色（黑色）更改为其他颜色（我喜欢红色）。

# asp.net-mvc - MongoDB（或其他 NoSQL）适用于处理项目、订单、预测等的大型数据集

> ID：10849446
> 
> 赞同：0
> 
> 时间：2012-06-01T11:31:21.280
> 
> 标签：asp.net-mvc, mongodb, database, nosql

我目前正在对位于我们开发的系统下的数据库进行重组。我们正在考虑将解决方案移植到云端。

我们所做的是从 ERP 系统中检索大量数据（项目、每天的销售额等），并对我们自己数据库中每个项目的这些数据进行复杂的计算。例如，我们在销售表中拥有的记录数可能高达数万亿行。我们以订单和预测的形式从这些计算中创建数据。

我对查看 NoSQL 解决方案很感兴趣，因为它适用于云环境以及简化代码库。但是我不确定 NoSQL 是否适合我的用例。你们怎么看，我应该坚持使用 RDBMS 还是研究 NoSQL？

如果您认为我应该更深入地研究 NoSQL，MongoDB 是要走的路还是您会推荐其他东西？

我正在考虑使用 Node.js、Rails 或 Razor MVC 编写代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:51:36.543

如果使用 mongodb，结合使用分片 mongodb 设置和 hadoop 来处理数字将是一个好的开始。有一个非常好的官方 mongodb hadoop 插件。

[https://github.com/mongodb/mongo-hadoop](https://github.com/mongodb/mongo-hadoop)

我会明确加载测试数据设置和实验

# java - 如何防止 InputStream.readObject() 抛出 EOFException？

> ID：10849449
> 
> 赞同：11
> 
> 时间：2012-06-01T11:31:39.063
> 
> 标签：java, exception, eof

我序列化一个对象并将其作为文件保存在我的硬盘上。当我阅读它时，仅在某些情况下它会抛出[EOFException](http://docs.oracle.com/javase/6/docs/api/java/io/EOFException.html)。经过几个小时的调试，我找不到问题。

**这是我的代码：**

```
 public void serialize(MyClass myClass,String path) {
        FileOutputStream foStream = null;
        ObjectOutputStream ooStream = null;
        try {
            File file = new File(path);
            if (!file.exists()) {
                file.createNewFile();
            }
            foStream = new FileOutputStream(file);
            ooStream = new ObjectOutputStream(foStream);
            ooStream.writeObject(myClass);
        } catch (Throwable t) {
            log.error(t);
        } finally {
            if (ooStream != null) {
                try {
                    ooStream.flush();
                    ooStream.close();
                } catch (IOException e) {
                    log.error(e);
                }
            }

        }
    } 
```

**获取对象：**

```
 public MyClass deSerialize(String path) {
        MyClass myClass=null;
        FileInputStream fiStream = null;
        ObjectInputStream oiStream = null;
        String errorMessage = "";
        try {
            File file = new File(path);
            if (!file.exists()) {
                return null;
            }
            fiStream = new FileInputStream(path);
            oiStream = new ObjectInputStream(fiStream);
            Object o = oiStream.readObject();
            myClass = (MyClass) o;
        } catch (Throwable t) {
            log.warn(t);
        } finally {
            if (oiStream != null) {
                try {
                    oiStream.close();
                } catch (IOException e) {
                    log.error(e);
                }
            }
        }
        return myClass;
    } 
```

**堆栈跟踪：**

> java.io.EOFException 在 java.io.ObjectInputStream$BlockDataInputStream.peekByte(ObjectInputStream.java:2498) 在 java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1273) 在 java.io.ObjectInputStream.readObject(ObjectInputStream.java: 348) 在 java.util.LinkedList.readObject(LinkedList.java:776) 在 sun.reflect.GeneratedMethodAccessor583.invoke(Unknown Source) 在 sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) 在 java.lang.reflect .Method.invoke(Method.java:585) 在 java.io.ObjectStreamClass.invokeReadObject(ObjectStreamClass.java:946) 在 java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1809) 在 java.io.ObjectInputStream.readOrdinaryObject( ObjectInputStream.java:1719) 在 java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1305) 在 java.io.ObjectInputStream.defaultReadFields(ObjectInputStream.java:1908) 在 java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:1832) 在 java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1719) 在 java. io.ObjectInputStream.readObject0(ObjectInputStream.java:1305) 在 java.io.ObjectInputStream.readObject(ObjectInputStream.java:348)

**问题：** 我的序列化对象现在已损坏，那么它现在是垃圾吗？
因为这个对象负责渲染用户保存的 UI。如果用户登录它应该呈现之前保存的 UI 状态。但是对于某些用户，该文件无法反序列化。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T22:40:47.220

`EOFException`表示您正在尝试读取文件末尾的内容。通常，除了尝试之外，您无法知道是否还有更多对象要读取，因此您首先不应将`EOFException`其视为问题。*如果在您认为您知道*文件中有更多对象的情况下抛出它，例如，当您在文件中添加了对象计数前缀时，则表明编写文件的代码有问题，或者文件可能损坏本身。另一个示例是长度不应为零的零长度文件。不管是什么问题，阅读端都解决不了，已经来不及了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T12:34:05.337

我看不出文件的写入和读取有任何问题。

所以我最好的猜测是问题出在文件级别。例如：

*   您可能正在编写一个文件并读取另一个文件，或者
*   您可能在文件写入完成之前正在读取文件，或者
*   在运行您的写入代码和读取代码之间，其他东西可能会破坏文件。

我建议您添加一些使用 File.length() 的跟踪代码，以在您编写文件之后和阅读文件之前找出文件大小。

* * *

其他几种可能性：

*   编写器和阅读器代码使用不同版本的`MyClass`（或依赖类），具有不兼容的表示形式和相同的 serialVersionId 值，或者

*   您可能正在使用不兼容的自定义`readObject`和`writeObject`方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-27T18:44:26.993

就我而言，通过确保对文件的读写是线程安全的，解决了 EOF 异常。就像上面回答的 Stephen C 一样，如果您尝试写入一个您也尝试从另一个线程读取的文件，您可能会踩到 ObjectInputStream，在这种情况下会抛出 EOF Exception。

# javascript - 让 div 上浮

> ID：10849450
> 
> 赞同：0
> 
> 时间：2012-06-01T11:31:44.120
> 
> 标签：javascript, jquery

我正在尝试为用户创建一个聊天选项，但是我只希望聊天显示一段时间，我可以通过 PHP 和时间戳做到这一点，但我也想通过使包含消息的 div 来直观地隐藏它浮动直到它被隐藏为溢出..

我在以下页面上看到了一个脚本： [http](http://rainbow.arch.scriptmania.com/scripts/bg/float_up.html) ://rainbow.arch.scriptmania.com/scripts/bg/float_up.html 它使用图像，但我想对提交的消息做同样的想法（浮动聊天）

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T12:32:20.143

我不知道这是否是你想要做的：http: [//jsfiddle.net/LPc2z/3/](http://jsfiddle.net/LPc2z/3/)？

它保持简单，因为我不确切知道您要做什么。

# oracle - 这个 PL/SQL 代码是否符合 ACID？

> ID：10849455
> 
> 赞同：1
> 
> 时间：2012-06-01T11:32:01.583
> 
> 标签：oracle, plsql, acid

可以在 TEMPORARY 表上发出异步提交吗？它是否会使我的交易不那么持久？

```
CREATE GLOBAL TEMPORARY TABLE my_table_tmp (id number) ON COMMIT PRESERVE ROWS;
CREATE TABLE my_table (id number);

BEGIN
  INSERT --+ append
  INTO my_table_tmp (id)
  SELECT rownum 
  FROM all_objects;

  COMMIT WRITE BATCH NOWAIT; -- continue working without waiting on LGWR

  INSERT INTO my_table (id)
  SELECT id 
  FROM my_table_tmp;

  COMMIT; -- actually preserve transaction
END;
/ 
```

编辑：

是的，我知道它不是严格意义上的 ACID，因为它会在一瞬间绕过 D 部分。问题是 - 它是否“和”ACID 一样好，因为它与只使用真正 COMMIT 的版本没有任何不同的可能场景？还是我弄错了，可能会有所不同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:54:04.433

一句话：没有。ACID 中的 D 代表 Durability，这意味着即使数据库在之后立即崩溃，提交 100% 也能保证事务被保留。异步提交为违反 ACID 的这一方面提供了机会。

有关使用异步提交的优点/缺点的更多信息在这里：[http ://www.orafaq.com/node/93](http://www.orafaq.com/node/93)

# mysql - 使用用户变量在mysql中显示日期之间的数据

> ID：10849467
> 
> 赞同：1
> 
> 时间：2012-06-01T11:32:54.423
> 
> 标签：mysql, sql, ruby-on-rails, date-range

我想显示给定日期之间的所有数据。未找到数据的日期我想为所有列显示 null

表架构

```
TimeEntry(id: integer, project_id: integer, user_id: integer, hours: float, comments: string, spent_on: date) 
```

到目前为止我尝试了什么，

```
set @num = -1;
SELECT DATE_ADD(  '2009-01-01', INTERVAL @num := @num +1
DAY ) AS date_sequence, time_entries.id
FROM time_entries
WHERE user_id =55
HAVING DATE_ADD(  '2009-01-01', INTERVAL @num DAY ) <=  '2012-01-01' 
```

它给出以下输出

```
date_sequence id
2009-01-01  46
2009-01-02  50
2009-01-03  55
2009-01-04  01
2009-01-05  02
2009-01-06  24
2009-01-07  57
2009-01-08  59
2009-01-09  74
2009-01-10  78 
```

预期输出为

```
date_sequence id
2009-01-01  NULL
2009-01-02  NULL
2009-01-03  NULL
2009-01-04  NULL
2009-01-05  NULL
2009-01-06  NULL
2009-01-07  NULL
2009-01-08  NULL
2009-01-09  74
2009-01-10  78 
```

因为 id 只存在于 09 和 10

如何将日期与其他字段匹配？

提示/评论？

基于 Rails 的解决方案也很有用。

**编辑：**

到目前为止我在 Rails 中尝试过的东西

```
def create_dates(from_time,till_time)
  dates = []
  date_from = from_time.to_time
  while date_from <= till_time.to_time && periods.length <= 100          
      dates << "#{date_from.to_date}"
      date_from = date_from + 1.day
  end
dates 
```

结尾

它返回给定期间之间的日期。但我无法将我的数据与这些日期匹配

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T18:39:11.373

试试这个：

```
set @num = -1;
select t1.date_sequence, count(t2.id) from
 (SELECT DATE_ADD(  '2009-01-01', INTERVAL @num := @num +1 DAY ) AS date_sequence
  FROM time_entries HAVING DATE_ADD(  '2009-01-01', INTERVAL @num + 1 DAY ) <=  '2012-01-01') as t1
left outer join time_entries as t2 on t1.date_sequence = t2.spent_on
group by t1.date_sequence
order by t1.date_sequence; 
```

# windows-phone-7 - 如何在 Windows Phone 7 中将图像转换为字节流？

> ID：10849469
> 
> 赞同：1
> 
> 时间：2012-06-01T11:33:08.097
> 
> 标签：windows-phone-7

如何将图像作为字节流发送到服务？

通过使用下面的代码，我将 Url 作为图像绑定到图像控件。如何将其作为字节流再次发送到服务？请帮我... `enter code here`

```
string userimage="http://{ipadress}/sample.jpg";
                        Uri uri = new Uri(userImage, UriKind.Absolute);
                        image2.Source = new BitmapImage(uri); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T11:59:21.573

要将上面的图像转换为字节数组，您可以尝试：

```
MemoryStream ms = new MemoryStream();
image2.Source.Save(ms,System.Drawing.Imaging.ImageFormat.Jpeg);
byte[] imageBytes = ms.ToArray(); 
```

编辑：

如果上面的代码没有给出想要的结果，您可以尝试：

```
WriteableBitmap bmp = new WriteableBitmap((BitmapSource)image2.Source);
byte[] byteArray;

using (MemoryStream stream = new MemoryStream()) {

    bmp.SaveJpeg(stream, bmp.PixelWidth, bmp.PixelHeight, 0, 100);

    byteArray = stream.ToArray();
} 
```

您需要包含`Microsoft.Phone`命名空间`SaveJpeg`才能工作。

# php - php printf 将数字添加到输出

> ID：10849470
> 
> 赞同：3
> 
> 时间：2012-06-01T11:33:17.830
> 
> 标签：php, printf

我想使用 printf 格式化一些输出，但由于某种原因它在每个项目之后输出一个数字。关于为什么会这样以及如何解决的任何想法？

```
$array = array("Mo" => "09:30-19:00",  
          "Di" => "09:30-19:00", 
          "So" => "geschlossen");

foreach( $array as $key => $value ){
     echo printf("%3s:%15s", $key, $value);
} 
```

输出

```
Mo: 09:30-19:0019 Di: 09:30-19:0019 So: geschlossen19 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T12:02:53.917

不就是因为你在`echo`ing`printf`吗？

[http://codepad.org/1KtxR9JF](http://codepad.org/1KtxR9JF)

```
<?php

$array = array("Mo" => "09:30-19:00",  
          "Di" => "09:30-19:00", 
          "So" => "geschlossen");

foreach( $array as $key => $value ){
     printf("%3s:%15s", $key, $value);
}

 Mo:    09:30-19:00 Di:    09:30-19:00 So:    geschlossen 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:57:29.363

您使用的有什么特别的原因，`echo printf(...)`而不仅仅是`echo`？

如果不是，那么使用它会正确返回（不附加 19）：

```
$array = array("Mo" => "09:30-19:00",  
          "Di" => "09:30-19:00", 
          "So" => "geschlossen");

foreach( $array as $key => $value ){
     echo "$key:$value";
} 
```

# java - 正则表达式：匹配排列与重复字符，其中一个字符不能出现多次

> ID：10849477
> 
> 赞同：4
> 
> 时间：2012-06-01T11:33:33.017
> 
> 标签：java, regex, permutation, restriction

正则表达式应匹配所有长度在 2 到 3 个字符之间且仅包含 A 和 B ([AB]{2,3}) 的字符串。但它也应该只匹配最多包含一个 B 的字符串。

允许的字符串：

> 啊啊
> 啊啊
> 啊啊
> 啊啊
> 啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊啊
> 啊啊
> 啊啊。

不允许：

> ABB <-- 两个 B

是否可以使用单个正则表达式来实现这一目标？我尝试过这样的事情：

> ([AB]{2,3})(?<=([B]*A[B]*){2})

但它不适用于 Java，因为它不支持 Look-behind 组的可变长度。

> 线程“主”java.util.regex.PatternSyntaxException 中的异常：后视组在索引 28 附近没有明显的最大长度 ([AB]{2,3})(?<=([B]*A[B ]*){2})

有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T11:37:22.563

您可以使用负前瞻来确保字符串没有两个`B`s。

```
^(?!.*B.*B)[AB]{2,3}$ 
```

[**看见**](http://www.rubular.com/r/99133LyaIx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T11:39:59.657

好吧，您可以单独列出选项：

```
^(A{2,3}|A{1,2}B|ABA|BA{1,2})$
  ↑      ↑       ↑   ↑
  │      │       │   └─ starting with B
  │      │       └───── B in the middle
  │      └───────────── B at the end
  └──────────────────── only A 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T11:40:32.740

**尝试这个**

```
\b(?:A{1,2}B|BA{1,2}|A{2,3}|ABA?)\b 
```

# jquery - 带有 WCF 的 Jquery

> ID：10849479
> 
> 赞同：4
> 
> 时间：2012-06-01T11:33:50.710
> 
> 标签：jquery, wcf

我正在尝试让我的 jquery 代码与 WCF 一起工作。我从一些非常简单的事情开始。WCF 服务托管在 IIS 上。它有一个简单的接口和一个简单的实现。以下是我的 WCF 代码。

```
 [ServiceContract]
 public interface IEvalService
  {
    [OperationContract]
    [WebInvoke(Method = "GET", UriTemplate = "GetId",
    RequestFormat = WebMessageFormat.Json, ResponseFormat = WebMessageFormat.Json)]
    string GetId();
  } 
```

上述接口的实现如下：

```
[AspNetCompatibilityRequirements(RequirementsMode=
AspNetCompatibilityRequirementsMode.Allowed)]
public class EvalService: IEvalService
{

    public string GetId()
    {
        BenchMarkStatus benchMarkStatus = new BenchMarkStatus();         
        return benchMarkstatus.Name;
    }
} 
```

当然还有一个benchMark类如下：

```
[DataContract]
public class BenchMarkStatus
{
    private string _name;

    public BenchMarkStatus()
    {
        _name = "Sudarshan";
    }

    [DataMember]
    public string Name
    {
        get
        {
            return _name;
        }
        set
        {
            _name = value;
        }
    }
} 
```

Web服务的配置文件如下：

```
<services>
  <service name="BenchMarkServiceLiabrary.EvalService">
    <endpoint address="10.66.26.171"         
              binding="webHttpBinding"
              contract="BenchMarkServiceLiabrary.IEvalService"  
              behaviorConfiguration="WEB" />
   </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior>
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="false" />
    </behavior>
  </serviceBehaviors>
  <endpointBehaviors>
    <behavior name="WEB">
      <webHttp helpEnabled="true" defaultOutgoingResponseFormat="Json"/>
    </behavior>
  </endpointBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" 
                           aspNetCompatibilityEnabled="true" /> 
```

在客户端，我有以下代码：

```
$.ajax({
          type: 'GET',
          url: "http://10.66.26.171/EvalService/Eval.svc/GetId?callback=?",
          contentType: "json/application; charset=utf-8",
          dataType: "jsonp",
          jsonpCallback: 'jsonCallback',
          success: function (data) { alert(data) }
      });
function jsonCallback() {
          alert("me");
} 
```

我收到 404 错误。最初我遇到了跨域问题......但现在无法从客户端代码访问 GetId 函数。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-09T13:58:32.220

你的问题是 web.config 中服务的地址部分

因为您在 iis 中托管，所以您的服务将在以下位置可用：

`http://localhost/EvalService/Eval.svc`（如果您的 iis 在本地运行，则为 localhost，如果不是，则为远程 iis 的 ip 或地址）

如果您没有在 web.config 中添加地址部分，这将是您的服务端点的地址，添加的地址部分可以在`http://localhost/EvalService/Eval.svc/10.66.26.171`

如果您只有一个端点，您可以安全地在服务配置中省略或仅使用 address="" 并在此地址访问您的服务`http://localhost/EvalService/Eval.svc`：

```
 <service name="BenchMarkServiceLiabrary.EvalService">
    <endpoint address=""         
              binding="webHttpBinding"
              contract="BenchMarkServiceLiabrary.IEvalService"  
              behaviorConfiguration="WEB" />
   </service> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-05-09T13:42:31.563

StackOverflow 确实提出了一些老问题；我真的希望你现在已经转移到 WebAPI，这要容易得多。每次我尝试设置 wcf 服务时，都是一场斗争。但是关于这个问题；前段时间我有一个非常相似的问题，添加到 EndpointBehaviors 为我解决了这个问题。

尝试将您的 endPointBehaviors 更新为以下

```
<endpointBehaviors>
    <behavior name="WEB">
      <webHttp helpEnabled="true" defaultOutgoingResponseFormat="Json"/>
      <enableWebScript />
    </behavior>
</endpointBehaviors> 
```

# html - 如何居中可变长度提交按钮？

> ID：10849481
> 
> 赞同：1
> 
> 时间：2012-06-01T11:33:54.687
> 
> 标签：html, css

当在 Firefox 中而不是在 Google Chrome 中查看时，元素内部和外部的以下`input type=submit`按钮将居中：`div``margin: auto`

HTML：

```
<div>
 <input type=submit value=submit>
</div>
<input type=submit value=submit>
text continues from here... 
```

CSS：

```
div {
 width: 200px;
 background: green;
}

input {
 display: block;
 margin: auto;
} 
```

根据**W3C**，是否有正确的行为？以及如何在谷歌浏览器中将其居中，注意宽度必须是一个变量，并且必须从下面的文本中清除按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:57:23.103

我怀疑问题在于您没有在输入上定义宽度，因此它没有执行自动边距。

`INPUT`是一个内联元素，所以它最容易用内联元素的样式设置样式，例如`text-align: center`父元素上的 a。

[http://jsfiddle.net/chrisvenus/wU5tb/](http://jsfiddle.net/chrisvenus/wU5tb/)是一个小提琴，展示了放置`text-align: center`两个相关父元素（div 和 body）的效果。

因为这是为父元素设置样式，所以您可能会发现自己需要添加一些额外的块元素（例如`p`或`div`根据需要）以采用居中样式。

我已经在 chrome、firefox 和 IE 上对此进行了测试，并且都按预期运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:35:32.113

用于`align="center"`使您的 div 内容/按钮居中。

```
<div align="center">
   <input type=submit value=submit>
</div> 
```

# 更新

# [演示](http://jsbin.com/oyutoq)

# unit-testing - RhinoMocks - 使用非静态存储库时无法将类型 foo 转换为类型 bar

> ID：10849482
> 
> 赞同：2
> 
> 时间：2012-06-01T11:33:55.520
> 
> 标签：unit-testing, rhino-mocks

我正在尝试 RhinoMocks（才刚刚开始，请温柔一点！）并且很困惑为什么我使用这个设置：

```
var mockRepos = new MockRepository();
var mockServiceProvider = mockRepos.DynamicMock<IServiceProvider>(null);
var mockContext = mockRepos.DynamicMock<IPluginExecutionContext>(null);

mockServiceProvider.Expect(x => x.GetService(typeof(IPluginExecutionContext))).Return(mockContext);

var someSampleClass = new SomeClassOrOther(mockServiceProvider); 
```

在 SomeClassOrOther 的某个时刻，该方法`GetService`被调用

```
var context = (Microsoft.Xrm.Sdk.IPluginExecutionContext)serviceProvider.GetService(typeof(Microsoft.Xrm.Sdk.IPluginExecutionContext)); 
```

并导致异常：

```
 Unable to cast object of type 'Castle.Proxies.ObjectProxyd0bf4b879a6341bbba3478cf1189d621' to type 'Microsoft.Xrm.Sdk.IPluginExecutionContext'. 
```

但是，如果我使用：

```
var mockServiceProvider = MockRepository.GenerateMock<IServiceProvider>(null);
var mockContext = MockRepository.GenerateMock<IPluginExecutionContext>(null);

mockServiceProvider.Expect(x => x.GetService(typeof(IPluginExecutionContext))).Return(mockContext); 
```

即静态`MockRepository.GenerateMock`，它执行没有错误。

我在哪里错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:21:58.843

我不知道你为什么会得到这个例外。但是，当使用“旧”非静态语法时，您会得到“记录”状态的模拟。在使用它们之前，您需要将它们设置为重播模式：

```
var mockRepos = new MockRepository();
var mockServiceProvider = mockRepos.DynamicMock<IServiceProvider>();
var mockContext = mockRepos.DynamicMock<IPluginExecutionContext>();

mockRepos.ReplayAll();

mockServiceProvider
    .Stub(x => x.GetService(typeof(IPluginExecutionContext)))
    .Return(mockContext);

var someSampleClass = new SomeClassOrOther(mockServiceProvider); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T13:29:03.330

您正在混合新`AAA`语法和旧`Record/Replay`语法。当您使用`Expect`扩展方法和新`AAA`语法时，您无需对 mocks 存储库进行操作并手动更改其模式（记录/重播）。使用新的静态方法创建模拟（在重放模式下创建模拟）并稍后验证期望：

```
// Arrange
var mockServiceProvider = MockRepository.GenerateMock<IServiceProvider>();
var mockContext = MockRepository.GenerateMock<IPluginExecutionContext>();

mockServiceProvider.Expect(x => x.GetService(typeof(IPluginExecutionContext)))
                   .Return(mockContext);

var someSampleClass = new SomeClassOrOther(mockServiceProvider);
// Act

// Assert
mockServiceProvider.VerifyAllExpectations(); 
```

这是用于比较的旧`Record/Replay`语法：

```
var mockRepos = new MockRepository();
var mockServiceProvider = mockRepos.DynamicMock<IServiceProvider>();
var mockContext = mockRepos.DynamicMock<IPluginExecutionContext>();

Expect.Call(mockServiceProvider.GetService(typeof(IPluginExecutionContext)))
      .Return(mockContext);
mockRepos.ReplayAll();

var someSampleClass = new SomeClassOrOther(mockServiceProvider);
// exercise your SUT
mockRepos.VerifyAll(); 
```

# html - 自定义背景重复而不实际编辑源

> ID：10849484
> 
> 赞同：0
> 
> 时间：2012-06-01T11:34:04.087
> 
> 标签：html, css

我有一个 HTML 页面的背景图像，我只用于页面的顶部。所以当我给出 repeat-x 时，图像的标题内容部分太长，以至于它来自页面的实际标题内容。有没有办法让它只限于标题部分，这取决于它的高度或多或少（使用时只增加或减少背景图像的顶部（必需部分））。此外，如果有一个具有纯色的背景图像，如何获取它的颜色代码，以便我可以使用背景颜色属性而不是背景。该页面的 URL 是[http://www.freecsstemplates.org/preview/fotofolium/](http://www.freecsstemplates.org/preview/fotofolium/)并且我想减少标题部分中黑色的高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:53:41.527

不为（我假设）`<body>`标签设置背景，而是为标题设置背景。像这样使用 CSS`background`速记属性：

```
header {background:#ffffff url('img.png') repeat-x right top;} 
```

您可以在此处指定默认背景颜色（此处为#ffffff）和背景图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:17:24.100

您可以更改背景位置以使黑色部分变薄。渐变的结束颜色是**#325e00**。您可以在背景上添加此颜色以获得完整的渐变。

```
body {
        background: url("images/wrapper-bg.png") repeat-x scroll 0 -35px #335F01;
        color: #333333;
        font-family: 'Arvo',serif;
        font-size: 14px;
        margin: 0;
        padding: 0;
    } 
```

# spring - 如何使用spring调用方法？

> ID：10849487
> 
> 赞同：1
> 
> 时间：2012-06-01T11:34:21.300
> 
> 标签：spring, methods

我想在使用spring创建bean之后调用一个方法，例如我创建`Factory`和模式但我想`Factory`在创建模式bean之前调用相同的方法

```
 <!-- schemaFactory-->
    <bean id="schemaFact" class="javax.xml.validation.SchemaFactory"
        factory-method="newInstance">
        <constructor-arg value="http://www.w3.org/2001/XMLSchema" />
    </bean>

<!-- schema -->
    <bean id="schema" class="javax.xml.validation.Schema"
        factory-bean="schemaFact" factory-method="newSchema">
        <constructor-arg value="3DSecure.xsd" />
    </bean> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:44:33.300

您可以使用自己的工厂 bean 代替`javax.xml.validation.SchemaFactory`，它将委托给`javax.xml.validation.SchemaFactory`并调用该方法：

```
public class MySchemaFactory {
    public SchemaFactory newInstance() {
        SchemaFactory factory = SchemaFactory.newInstance();
        factory.callSomeMethod();
        return factory;
    }
}

<bean id="mySchemaFactory" class="com.foo.bar.MySchemaFactory"/>

<bean id="schemaFact"
      factory-bean="mySchemaFactory"
      factory-method="newInstance"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T11:40:30.837

如果您使用的是 Spring 3.0/3.1，您可以利用 Java 配置：

```
@Configuration
class Config {

    @Bean
    public SchemaFactory schemaFact() throws SAXNotSupportedException, SAXNotRecognizedException {
        final SchemaFactory schemaFactory = SchemaFactory.newInstance("http://www.w3.org/2001/XMLSchema");
        schemaFactory.setFeature("apache.org/xml/features/validation/schema-full-checking", false);
        return schemaFactory;
    }

    @Bean
    public Schema schema() throws SAXException {
        return schemaFact().newSchema(new File("3DSecure.xsd"));
    }
} 
```

但是`SchemaFactory`你想调用哪个方法？~~似乎他们都是getter或setter，所以你可以使用普通的XML注入......~~或者创建自己的`FactoryBean`：

```
class SchemaFactoryFactoryBean implements FactoryBean<SchemaFactory> {

    @Override
    public SchemaFactory getObject() throws Exception
    {
        final SchemaFactory schemaFactory = SchemaFactory.newInstance("http://www.w3.org/2001/XMLSchema");
        schemaFactory.setFeature("apache.org/xml/features/validation/schema-full-checking", false);
        return schemaFactory;
    }

    @Override
    public Class<?> getObjectType()
    {
        return SchemaFactory.class;
    }

    @Override
    public boolean isSingleton()
    {
        return true;
    }
} 
```

并像这样使用它（`factory-method`不需要）：

```
<bean id="schemaFact" class="SchemaFactoryFactoryBean"/> 
```

# actionscript-3 - 如何在火花 GridColumn 上提供事件

> ID：10849491
> 
> 赞同：0
> 
> 时间：2012-06-01T11:34:39.000
> 
> 标签：actionscript-3, apache-flex

我有一个火花数据网格，其中有 2 列可编辑。我想处理数据网格中设置为此可编辑列的值的事件。我想我需要 2 个不同的事件处理程序来处理两个列中的事件。但它告诉我gridItemEditSessionSave 不适用于GridColumn。目前我已将事件设置为 DataGrid。但只有一个处理程序可用于两列。它没有给我想要的输出。这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-03T09:05:34.927

您很可能只需要一个事件处理程序来监听两列，因为由 datagrid 类调度的许多事件都有一个 columnIndex 和 rowIndex 来标识 datagrid 中的哪个单元格调度了事件。

# jquery - 覆盖或扩展 jquery 函数

> ID：10849493
> 
> 赞同：0
> 
> 时间：2012-06-01T11:34:48.353
> 
> 标签：jquery

我是 jquery 的新手，所以如果我的术语不正确，请原谅，但我想覆盖或扩展一个函数（不确定正确的术语是什么）。

我们部门的首席开发人员创建了一个 jquery .js 文件，我们将其源到我们的每个页面中。其中有一个函数如下所示：

```
 $(window).bind('beforeunload', function () {
    //DO SOME STUFF HERE
 }); 
```

这在用户关闭浏览器窗口时执行。当用户关闭浏览器窗口时，我想要执行一些额外的功能（在我自己的页面上），但我仍然想要执行我们的首席开发人员创建的函数中的代码。

如何在窗口关闭时同时执行主要开发人员的代码和我自己的代码？

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:42:06.983

您可以根据需要将任意数量的事件处理程序绑定到一个事件，只需确保其中一个不会返回 false 或停止传播，您应该会很好。

# jquery - 使用 JQuery 将 XML 数据转换为单个变量

> ID：10849494
> 
> 赞同：0
> 
> 时间：2012-06-01T11:34:50.217
> 
> 标签：jquery, xml

假设您有一个 data.xml 文件：

```
<?xml version="1.0" encoding="UTF-8" ?>
<root>
    <item>value1</item>
    <item>value2</item>
    <item>value3</item>
</root> 
```

我正在尝试将所有数据配置存储到一个变量中，以便在我的 .js 代码中使用它：

```
$(document).ready(function() {
        'use strict';
        jQuery.extend({
            getValues: function(url) {
            var result = null;
            $.ajax({
                url: url,
                type: 'get',
                dataType: 'xml',
                async: false,
                success: function(data) {
                result = data;
                }
            });
               return result;
            }
        });

        results = $.getValues("data.xml");
        console.log(results);
}); 
```

如果我刷新页面，我会在结果变量中得到一个 Document 对象，其中包含 URL、baseURI、body 等字段......

如果我再次刷新，我会得到一个带有 data.xml 数据的#document 对象：

```
<root>
    <item>value1</item>
    <item>value2</item>
    <item>value3</item>
</root> 
```

因此，每次有人访问该 url 时，返回的对象类型都会发生变化。

我对此有两个问题：

1.  如何使返回值始终#document？（其中包含来自 .xml 文件的数据）

2.  如何从#document 访问元素？

我试过使用：

```
console.log(results.root.item);
console.log(results.find("item")); 
```

但两者都给我错误。

也许有更好的方法来做到这一点（意味着将 xml 数据读入单个变量）。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:18:58.877

您在 ajax 请求完成之前返回结果。您必须等待ajax返回，然后调用回调函数：

```
$(document).ready(function() {
        'use strict';
        jQuery.extend({
            getValues: function(url, callback) {
            var result = null;
            $.ajax({
                url: url,
                type: 'get',
                dataType: 'xml',
                async: false,
                success: function(data) {
                    callback.call(this, data);
                }
            });
            }
        });

        $.getValues("data.xml",function(data){
             console.log(data);
        });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:42:01.820

您可以通过这种方式选择 xml 标签：

```
success: function(data) {
    parser(data);
}

function parser(data) {
 ...
} 
```

# c++ - 在具有 runas 的不同用户帐户下运行时，CreateFileMapping 上的访问被拒绝

> ID：10849498
> 
> 赞同：2
> 
> 时间：2012-06-01T11:35:01.410
> 
> 标签：c++, winapi, windows-xp, file-mapping

尝试打开以前创建的文件映射时，此代码使我访问被拒绝错误。帮助，帮助，帮助。

*   操作系统：WinXP SP3，无快速用户切换。
*   以下代码使用 runas 在 2 个不同的用户帐户上运行。
*   两个用户都具有管理员权限。

测试代码：

```
SECURITY_DESCRIPTOR sd;

if(!InitializeSecurityDescriptor(&sd, SECURITY_DESCRIPTOR_REVISION))
    printf("InitializeSecurityDescriptor failed %d\n", GetLastError());

if(!SetSecurityDescriptorDacl(&sd, true, 0, false))
    printf("SetSecurityDescriptorDacl failed %d\n", GetLastError());

SECURITY_ATTRIBUTES sa;
sa.nLength = sizeof(sa);
sa.lpSecurityDescriptor = &sd;
sa.bInheritHandle = false;

HANDLE hMap = CreateFileMapping(INVALID_HANDLE_VALUE, 0, PAGE_READWRITE, 0, 0x1000, "Global\\MyMap");
void* pMap = 0;
if(hMap) {
    pMap = MapViewOfFile(hMap, FILE_MAP_ALL_ACCESS, 0, 0, 0x1000);
} else {
    printf("CreateFileMapping failed: %d\n", GetLastError());
    hMap = OpenFileMapping(FILE_MAP_ALL_ACCESS, false, "Global\\MyMap");
    if(hMap) {
        printf("OpenFileMapping sucess!\n");
    } else {
        printf("OpenFileMapping failed: %d\n", GetLastError());
    }
}
if(pMap) {
    printf("Sucess!\n");
    printf("DW: %X", *(DWORD*)pMap);
    *(DWORD*)pMap = 0xDEADBEEF;
} else {
    printf("MapViewOfFile failed: %d\n", GetLastError());
}

cin.ignore();

if(pMap)
    UnmapViewOfFile(pMap);

if(hMap)
    CloseHandle(hMap); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:42:11.700

您忘记将 SECURITY_ATTRIBUTES 结构传递给 CreateFileMapping ...

# mysql - MySQL join - 数据不在第二个表中

> ID：10849505
> 
> 赞同：3
> 
> 时间：2012-06-01T11:35:25.513
> 
> 标签：mysql, join

我有 3 个表，t1 包含事件，t2 包含“参加”事件，t3 包含一些受邀用户 ID（链接到系统用户 ID）。一个以上的用户可以参加和活动。

当一个新事件被创建时，它被插入到 t1 中。每次用户确认参加活动时，都会在 t2 中插入一行，否则 t2 表为空。

下面的查询会提取用户正在参加的所有活动。

```
SELECT * FROM events t1
INNER JOIN attending_events t2 ON t1.id_ev = t2.id_ev
INNER JOIN attending_users t3 ON t2.id_user = t3.id_user AND t3.id_system_user=17
WHERE t1.id_comp = 42 
```

请帮忙，我需要一个查询来做完全相反的事情，找到用户没有参加的活动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T11:38:38.723

```
SELECT  e.*
FROM    events e
WHERE   e.id_ev NOT IN
        (
        SELECT  id_ev
        FROM    attending_events ae
        JOIN    attending_users au
        ON      au.id_user = ae.id_user
        WHERE   au.system_user_id = 17
        )
        AND id_comp = 42 
```

或者：

```
SELECT  *
FROM    events e
LEFT JOIN
(
        attending_events ae
JOIN    attending_users au
ON      au.id_user = ae.id_user
)
ON      ae.id_ev = e.id_ev
        AND au.system_user_id = 17
WHERE   e.id_comp = 42
        AND ae.id_ev IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:38:20.227

```
select * from attending_events where id_ev not in 
(SELECT id_ev FROM events t1
INNER JOIN attending_events t2 ON t1.id_ev = t2.id_ev
INNER JOIN attending_users t3 ON t2.id_user = t3.id_user AND t3.id_system_user=17
WHERE t1.id_comp = 42) 
```

我首先想到的是。绝对应该优化。

# java - 如何在java中的某个时间启动一个进程？

> ID：10849509
> 
> 赞同：4
> 
> 时间：2012-06-01T11:35:41.113
> 
> 标签：java, timer, scheduled-tasks, timertask

*我有一个应用程序从用户那里获取开始和结束时间，并在（开始时间）开始特定进程运行到（结束时间），对于示例我使用 TimerTask 实用程序，以防它只从当前时间开始进程和运行到（结束时间）我无法设置开始时间我如何在java中commapare用户时间（开始时间）和系统时间*

```
//my sample  program
import java.sql.Date;
import java.util.Timer;
import java.util.TimerTask;

public class Main {
  public static void main(String[] argv) throws Exception {

     int numberOfMillisecondsInTheFuture=1000;

//    start time= dynamically set by user
//    end time =dynamically set by user

    Date timeToRun = new Date(System.currentTimeMillis() + numberOfMillisecondsInTheFuture);//here is the problem.
    Timer timer = new Timer();

    timer.schedule(new TimerTask() {
      public void run() {

      //System.out.println("doing");
      //doing some task not related to this question
      }
    }, timeToRun);
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T11:45:05.750

如果这有帮助 [我如何每天下午 2 点运行我的 TimerTask](https://stackoverflow.com/questions/9375882/how-i-can-run-my-timertask-everyday-2-pm) 您可能需要进行一些更改以适应您的使用。

# html - IE6或IE9无法点击img前面的/按钮

> ID：10849511
> 
> 赞同：4
> 
> 时间：2012-06-01T11:35:46.077
> 
> 标签：html, css

# 问题

我正在编写一个网页，用户可以在其中**单击图像的一部分来触发 Javascript 事件**。但是，我发现如果我在**图像**( ) 上放置一个绝对定位的**锚点**( `a`) /**按钮**( )，即使它位于图像顶部，用户也无法（仅）在**IE中单击它。**`input type=button`**`img`**

 ****# 演示

```
<style type="text/css">
.MyDiv
{
    position:relative;
    left:0px;
    top:0px;
    width:275px;
    height:95px;
}

.MyDiv .MyImageDiv
{
    position:absolute;
    left:0px;
    top:0px;
    width:275px;
    height:95px;
    background-image:url('https://www.google.com/images/srpr/logo3w.png');
}

.MyDiv .MyButton
{
    position:absolute;
    left:162px;
    top:20px;
    width:53px;
    height:80px;

    display:inline-block;    /* Added based on @Zeta's comment */

    background-color:transparent;
/*    background-color:black;opacity:0.5;*/
    border:0px;
    cursor:pointer;
}
</style>

<!-- Button on image: cannot click in IE. Why? -->
<div class='MyDiv'>
    <img src='https://www.google.com/images/srpr/logo3w.png' />
    <input type='button' class='MyButton' onClick="alert('You clicked g!');"/>
</div>

<!-- Anchor on image: cannot click in IE. Why? -->
<div class='MyDiv'>
    <img src='https://www.google.com/images/srpr/logo3w.png' />
    <a href='#' class='MyButton' onClick="alert('You clicked g!');"></a>
</div>

<hr/>

<!-- Button on div with background-image: no problem -->
<div class='MyDiv'>
    <div class='MyImageDiv'></div>
    <input type='button' class='MyButton' onClick="alert('You clicked g!');"/>
</div>

<!-- Anchor on div with background-image: no problem -->
<div class='MyDiv'>
    <div class='MyImageDiv'></div>
    <a href='#' class='MyButton' onClick="alert('You clicked g!');"></a>
</div> 
```

# 现场演示

要测试，请单击小写字母**g**

 ~~~~*   [Demo1](http://pang.phpfogapp.com/stackoverflow/10849511/demo.php)（原创）
*   [Demo2](http://pang.phpfogapp.com/stackoverflow/10849511/demo_w3c_validated.php)（完整，经过 w3c 验证）
*   [Demo3](http://pang.phpfogapp.com/stackoverflow/10849511/demo_w3c_validated_with_text_indent.php)（完整，w3c 验证，`text-indent`由@Sparky672 建议）。~~ 

~~编辑（2012-12-05）：将演示迁移到 jsfiddle。~~

 ~~*   [Demo4@jsfiddle](http://jsfiddle.net/XGcG5/1/)
*   [Demo5@jsfiddle](http://jsfiddle.net/XGcG5/2/)（`text-indent`由@Sparky672 建议）。

# 细节

我可以在所有浏览器中单击并触发底部的两个警报；但是，**前两个*不能*在 IE 中触发**（请参阅下面的测试结果）。没关系，因为我总是可以提醒自己不要那样写，但是对于为什么会发生这种情况，有一个合理的解释吗？

PS我尝试`z-index`在锚/按钮上使用，但没有帮助。

编辑（2012-06-01）：尝试在锚点/按钮上使用`display:block`/ `display:inline-block`（根据@Zeta 的评论），但没有帮助。

我还尝试使用 IE9 的开发者工具 (F12) 来尝试调试页面。如果我使用箭头工具（Ctrl+B）选择锚点/按钮，则无法选择；但是如果我在开发工具的 HTML 中突出显示锚/按钮元素，它会正确显示锚/按钮的位置和大小。够奇怪的。

# 试验结果

```
+-------------------------------------------------------+---------------------------------------+
|                                                       | Can click on anchor / button on image |
+-------------------------------------------------------+---------------------------------------+
| IE 6.0.2900.2180.xpsp_sp2_gdr.100216-1441, on Windows | **NO**                                |
| IE 9.0.8112.16421, on Windows                         | **NO**                                |
| Opera 11.64, on Windows                               | Yes                                   |
| Opera 12.00, on Windows                               | Yes                                   |
| Opera 12.02, on Windows                               | Yes                                   |
| Opera 12.11, on Windows                               | Yes                                   |
| Opera 11.64, on Mac                                   | Yes                                   |
| Opera 12.00, on Mac                                   | Yes                                   |
| Opera Mini 7.0.4, on iPhone                           | Yes                                   |
| Firefox 12.0, on Windows                              | Yes                                   |
| Firefox 14.0.1, on Windows                            | Yes                                   |
| Firefox 15.0.1, on Windows                            | Yes                                   |
| Firefox 13.0, on Mac                                  | Yes                                   |
| Chrome 19.0.1084.52m, on Windows                      | Yes                                   |
| Chrome 22.0.1229.79 m, on Windows                     | Yes                                   |
| Chrome 23.0.1271.95 m, on Windows                     | Yes                                   |
| Chrome 19.0.1084.54, on Mac                           | Yes                                   |
| Chrome 21.0.1180.82, on iPhone                        | Yes                                   |
| Safari 5.1.5, on Windows                              | Yes                                   |
| Safari 5.1.7 (7534.57.2), on Windows                  | Yes                                   |
| Safari 5.1.7 (7534.57.2), on Mac                      | Yes                                   |
| Safari, on iOS 4.3.5                                  | Yes                                   |
| Browser, on Android 3.1                               | Yes                                   |
+-------------------------------------------------------+---------------------------------------+ 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-09T14:33:00.333

# 结论

这是我经过更多研究后得出的结论。

在[这个页面中，作者](http://nopeople.com/CSS%20tips/empty_anchor/index.html)**在 IE8 中**遇到了同样的行为。

在这个 SO question ( [1663919 ) 中，作者](https://stackoverflow.com/questions/1663919/how-to-make-an-empty-anchor-tag-clickable-in-ie7)**在 IE7 中**遇到了相同的行为。

在这些 SO 问题（[1075684、4639921](https://stackoverflow.com/questions/1075684/ie-only-part-of-an-anchor-is-clickable) ）中，作者**在 IE 中遇到了相同的问题，**[但](https://stackoverflow.com/questions/4639921/clicking-on-a-div-placed-over-an-image-in-ie)**场景**略有不同但相似。

 ****似乎[规范](http://www.w3.org/TR/html401/struct/links.html)没有提及任何内容，但因为它只发生在 IE 中，而且它只发生在将锚/按钮放在图像顶部时（这不是任何人都期望的），我会这样说只是IE中的一个错误。

# 解决方法

使用以下*任何一种*来解决问题：

1.  不要在图像上放置锚点/按钮。相反，把它放在`div`一个 CSS上`background-image`（如问题中所述）。

2.  **在 anchor / button 上**设置以下 CSS 属性，使其在 IE 中再次可点击（如此处所述[）](https://stackoverflow.com/a/1664014/1402846)。

    ```
    background-image:url(about:blank) 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T12:03:37.647

这里有一件事令人困惑

在前两个 div 中，您在输入或标签之前使用 img

```
<div class='MyDiv'>
    <img src='https://www.google.com/images/srpr/logo3w.png' />
    <input type='button' class='MyButton' onClick="alert('You clicked g!');"/>
</div>

<div class='MyDiv'>
    <img src='https://www.google.com/images/srpr/logo3w.png' />
    <a href='#' class='MyButton' onClick="alert('You clicked g!');"/></a>
</div> 
```

在其他 div 上，它只是输入之前的 div。这有什么原因吗？

试试这个把 img 放在 a 标签内。

```
<div class='MyDiv'>
    <a href='#' class='MyButton' onClick="alert('You clicked g!');"/><img src='https://www.google.com/images/srpr/logo3w.png' /></a>

</div>

<div class='MyDiv'>

    <a href='#' class='MyButton' onClick="alert('You clicked g!');"/><img src='https://www.google.com/images/srpr/logo3w.png' /></a>
</div> 
```****~~~~****

# javascript - 车把 registerPartial() 不起作用

> ID：10849514
> 
> 赞同：0
> 
> 时间：2012-06-01T11:36:04.313
> 
> 标签：javascript, handlebars.js, templating-engine

这是我在[JsFiddle上的代码](http://jsfiddle.net/chhantyal/pkQLw/)

错误 - 未捕获的错误：找不到部分社交

PS。我已经包含了所有的库。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T16:04:05.403

我想通了，在此之前我使用的是部分：

```
$('ul').append(template(data)); 
```

# php - 带有 php 的 jquery 回调 .... 只想要值，而不是重定向

> ID：10849517
> 
> 赞同：0
> 
> 时间：2012-06-01T11:36:06.747
> 
> 标签：php, javascript, jquery, redirect, callback

我以为这会很简单，但我有点生疏了。

我称之为 javascript/jquery 代码：

```
$.get("plugin.php", {up_vote:surl},
    function(data){
    //alert(data);
    document.getElementById('numvotes').innerHTML = data;
});
...... 
```

当它返回时，我得到一个值，这是一个作为字符串返回的数字，然后在数字之后显示一个关于重定向的长文本。我该如何摆脱它？我只想要价值。这是返回的内容：8（如果您在 10 秒后没有重定向，请单击此处）

是什么导致这个重定向？或者，我该如何摆脱那个'（如果你是......）文本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:40:04.707

它实际上是您的 plugin.php 发送重定向文本（也可能是其他一些 html）。尝试直接浏览到 plugin.php?up_vote=surl 你会看到会发生什么。

此外，如果您仍然使用 jquery，为什么不更改`document.getElementById()`为：

```
$('#numvotes').html(data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T11:44:54.017

你可以尝试使用

```
data = data.match(/^\d{1,}/);  
$('#numvotes').html(data); 
```

如果结果总是与您在问题中给出的格式相同。

# objective-c - 在 SplitViewController 之前插入视图控制器

> ID：10849522
> 
> 赞同：1
> 
> 时间：2012-06-01T11:36:22.617
> 
> 标签：objective-c, ios5, uisplitviewcontroller, viewcontroller, uiapplicationdelegate

我想在我的 SplitViewController 之前插入一个 RootViewController。我在 AppDelegate 中的代码是：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [_window addSubview:[_viewController view]];
    [_window makeKeyAndVisible];

    return YES;
} 
```

将调用委托给我的 rootviewcontroller，在此我想调用我的 splitviewcontroller：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    SplitViewController *splitViewController = [SplitViewController initApp];
    [[self navigationController] pushViewController:splitViewController animated:YES];

} 
```

在我的 SplitViewController 我有这个方法：

```
+ (YetSplitViewController*) initApp
{
    YetSplitViewController * cont = [[YetSplitViewController alloc] initWithNibName:@"YetSplitViewController" bundle:nil];
    if (NO) 
    { 
        cont.splitWidth = 15.0;
    }
    return [cont autorelease];
} 
```

之后没找到好的.......

我从委托到我的 SplitViewController 的第一个代码调用：

```
@interface TemplateAppDelegate : UIResponder <UIApplicationDelegate>

@property (strong,   nonatomic)    IBOutlet UIWindow               *window;
@property (readonly, nonatomic)    IBOutlet YetSplitViewController *splitViewController;

@property (readonly, nonatomic)    IBOutlet MasterViewController   *rootViewController;
@property (readonly, nonatomic)    IBOutlet DetailViewController   *detailViewController;

@end

@implementation TemplateAppDelegate

@synthesize window                   = _window;
@synthesize splitViewController      = _splitViewController;
@synthesize rootViewController       = _rootViewController;
@synthesize detailViewController     = _detailViewController;

- (void)dealloc
{
    [_window release];
    [_splitViewController release];

    [_rootViewController release];
    [_detailViewController release];

    [super dealloc];
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    if (NO) 
    { 
    _splitViewController.splitWidth = 15.0;
    }

    [_window addSubview:_splitViewController.view];
    [_window makeKeyAndVisible];

    return YES;
}

@end 
```

# android - 如何“刷新” ViewPager 中的片段？

> ID：10849523
> 
> 赞同：0
> 
> 时间：2012-06-01T11:36:28.353
> 
> 标签：android, android-fragments, android-viewpager

我在这里遇到了一个让我发疯的问题。我所拥有的是以下内容：

FragmentActivity1 持有 viewPager。它实例化 FragmentAdapter 和两个片段并将它们附加到 ViewPager。

Fragment1 只有一个按钮。当用户单击此按钮时，我会创建一个 Intent 并调用 FragmentActivty。这个 fragmentActivity 包含一个表单，用户填写并按 OK。当他这样做时，我将数据保存在应用程序的数据库中。

Fragment2 是一个 ListFragment，列出了用户之前插入的所有数据。

当用户完成表单并按下 OK 时，我会保存数据，就像我说的并完成（）活动，返回到 Fragment1。当我滑动到 Fragment2 时，数据不存在。然后我需要刷到Frag1，然后再回到Frag2。只有这样我才能看到问题。

我尝试在活动和片段之间设置侦听器，但仍然无法完成这项工作。

有人见过吗？我也愿意分享我的小项目，大家可以看看。

谢谢，费利佩

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T11:46:12.830

我通常在 ListFragment 中的 onResume() 中填写我的 ListView。当我完成向列表中添加新内容时（在单独的 FragmentActivity 中，就像您一样），ListView 会自动刷新，因为 onResume() 被调用；）

另一种方法是使用 onActivityResult()，然后您只能在添加新内容或删除某些内容时更新列表

# silverlight - 同步 2 个滚动查看器 silverlight

> ID：10849524
> 
> 赞同：2
> 
> 时间：2012-06-01T11:36:33.757
> 
> 标签：silverlight, scrollviewer

我想同步 2 个滚动查看器。请让我知道如何获取两个滚动查看器的滚动事件然后同步它们？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T11:41:18.123

首先获取要同步的滚动查看器的 2 个滚动条。在这种情况下，`scrollviewer1`然后`scrollviewer2` 我们得到两个滚动条的事件处理程序，在这种情况下是垂直的。然后我们可以通过事件轻松地同步它们。将`ScrollToVerticalOffset`按照另一个滚动。

```
 ScrollBar vertical1 = ((FrameworkElement)VisualTreeHelper.GetChild(scrollviewer1, 0)).FindName("VerticalScrollBar") as ScrollBar;
        vertical1.ValueChanged += new RoutedPropertyChangedEventHandler<double>(vertical1_ValueChanged);

        ScrollBar vertical2 = ((FrameworkElement)VisualTreeHelper.GetChild(scrollviewer2, 0)).FindName("VerticalScrollBar") as ScrollBar;
        vertical2.ValueChanged += new RoutedPropertyChangedEventHandler<double>(vertical2_ValueChanged);

    void vertical1_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
    {
        scrollviewer2.ScrollToVerticalOffset(e.NewValue);
    }

    void vertical2_ValueChanged(object sender, RoutedPropertyChangedEventArgs<double> e)
    {
        scrollviewer1.ScrollToVerticalOffset(e.NewValue);
    } 
```

希望这可以帮助！

# jersey - 返回 JSONArray 而不是 JSONObject，Jersey JAX-RS

> ID：10849526
> 
> 赞同：8
> 
> 时间：2012-06-01T11:36:37.043
> 
> 标签：jersey, jax-rs, arrays

我正在使用**Jersey**使我的一些服务成为 RESTful。

我的 REST 服务调用返回给我

```
{"param1":"value1", "param2":"value2",...."paramN":"valueN"} 
```

但是，我希望它返回

```
["param1":"value1", "param2":"value2",...."paramN":"valueN"] 
```

我需要在下面的代码中进行哪些更改？

```
@GET
@Produces(MediaType.APPLICATION_JSON)
public List<com.abc.def.rest.model.SimplePojo> getSomeList() {
    /* 
            Do something
    */
    return listOfPojos;
} 
```

我的**web.xml**文件的一部分看起来像这样

```
 <servlet>
        <servlet-name>Abc Jersey REST Service</servlet-name>
        <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
        <init-param>
            <param-name>com.sun.jersey.config.property.packages</param-name>
            <param-value>com.abc.def.rest</param-value>
        </init-param>
        <load-on-startup>0</load-on-startup>
    </servlet> 
```

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-06T21:26:05.133

您可以使用 Person POJO 如下定义您的服务方法：

```
@GET
@Produces("application/json")
@Path("/list")
public String getList(){
    List<Person> persons = new ArrayList<>();
    persons.add(new Person("1", "2"));
    persons.add(new Person("3", "4"));
    persons.add(new Person("5", "6"));
    // takes advantage to toString() implementation to format as [a, b, c]
    return persons.toString();
} 
```

POJO 类：

```
@XmlRootElement
public class Person {
    @XmlElement(name="fn")
    String fn;

    @XmlElement(name="ln")
    String ln;

    public Person(){        
    }

    public Person(String fn, String ln) {
        this.fn = fn;
        this.ln = ln;
    }    

    @Override
    public String toString(){
        try {
            // takes advantage of toString() implementation to format {"a":"b"}
            return new JSONObject().put("fn", fn).put("ln", ln).toString();
        } catch (JSONException e) {
            return null;
        }
    }
} 
```

结果将如下所示：

```
[{"fn":"1","ln":"2"}, {"fn":"3","ln":"4"}, {"fn":"5","ln":"6"}] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T13:10:40.827

要以数组类型样式返回条目，您应该从数组构建实体。尝试以下操作：

```
@GET
@Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_JSON})
public Response getSomeList() {
    List<com.abc.def.rest.model.SimplePojo> yourListInstance = 
          new List<com.abc.def.rest.model.SimplePojo>();
    /* 
          Do something
    */
    return Response.ok(yourListInstance.toArray()).build();
} 
```

如果您根据`toArray()`方法的返回类型遇到一些麻烦 - 您可以显式转换您的数组：

```
Response
   .ok((com.abc.def.rest.model.SimplePojo[])yourListInstance.toArray())
   .build(); 
```

UPD：尝试将您的列表转换为 JSONArray：

```
JSONArray arr = new JSONArray();
for (SimplePojo p : yourListInstance) {
  arr.add(p);
} 
```

接着：

```
Response.ok(arr).build(); 
```

# jquery - Jquery插件准备好后返回给调用者

> ID：10849528
> 
> 赞同：-1
> 
> 时间：2012-06-01T11:36:41.767
> 
> 标签：jquery, jquery-plugins

我的标题可能有点不清楚。例如我有这个代码：

```
$('#element').image_resize_crop(); 
```

在某个时刻，我正在编写的 image_resize_crop 插件已完成预加载图像。如何将其返回到首先调用该函数的脚本？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:40:54.263

您可以`trigger`订阅他们可以订阅和执行代码的自定义事件，

```
$(elem).trigger('preloadComplete'); 
```

他们可以使用它

```
$('#element').on('preloadComplete',function(){
    // do what they want
}) 
```

或像这样接收`oncomplete`处理程序作为插件的设置

```
$('#element').image_resize_crop(function(){

}); 
```

或作为设置对象的一部分

```
$('#element').image_resize_crop({
     onComplete: function(){

     }
}); 
```

如果您想将一些数据传递给该回调，您可以像这样指示它们

```
$('#element').image_resize_crop({
     onComplete: function(data){
       // utilize data passed from plugin
     }
}); 
```

并在图像预加载完成时调用该函数。

在您的插件代码中，您可以这样称呼它

```
settings.onComplete.call(this,arg1,arg2); 
```

`this`该`onComplete`函数将作为变量在其中获得`this`什么，而 arg1,arg2 是它将作为参数获得的值。

你也可以使用`apply`方法。

在此处阅读更多信息：[致电](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/call)或[申请](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/apply)

# java - Eclipse 导出到 jar 会忽略 Manifest 类路径：指令

> ID：10849529
> 
> 赞同：1
> 
> 时间：2012-06-01T11:36:45.067
> 
> 标签：java, eclipse, export, manifest

我正在尝试使用 Eclipse 导出功能来创建要部署在 Tomcat 中的 Axis2 部署中的 jar 文件。当我有源代码项目时，我可以导出这个jar，将它重命名为aar，它工作正常。所有项目的所有类都存在于导出的 jar 中。

现在我将其中一些项目转换为 jar 文件（它们形成一个库）。主项目现在将这些库 jar 指向构建路径中的外部 jar。它构建良好。现在我想从这个不再有权访问包含库源代码的项目的主项目中导出相同类型的 jar 文件。

SOO ...我按照这些说明创建了我自己的 Manifest.txt 文件，该文件将使用 Class-Path 指令指向这些外部 jar。该行显示如下：

```
Class-Path: file1.jar ../../libraryJars/file2.jar 
```

所以我按照通常的导出到 jar （当然不可运行；这里没有 main ！）使用我的清单文件的选项，并且该清单中的 Class-Path 指令被忽略。我查看创建的 jar 内部，我发现的唯一类来自主项目。未加载外部 jar 中的所有这些类。

创建此 jar 时，如何将外部 jar 中的类与主项目中的类一起导出？我知道使用 Manifest.txt 方法是做到这一点的方法。也许它只在制作可运行的 jar 时才有效（我不能这样做）？

我不想使用像 ANT 这样乱七八糟的东西。如果我必须求助于脚本文件来完成这项任务，我将只使用 bat 文件进行复制。

# security - Vala 替代 Gnome Keyring OAuth 访问令牌存储？

> ID：10849532
> 
> 赞同：0
> 
> 时间：2012-06-01T11:37:00.153
> 
> 标签：security, oauth, access-token, vala, gnome-keyring-daemon

Vala 的 Gnome Keyring 是否有很好的 OAuth 访问令牌/秘密存储替代品？Gnome Keyring 绑定解决方案非常有问题，因为它产生了太多的 C 错误，使调试变得实用。此外，我对安全性知之甚少，因此我宁愿不必自己编写任何加密算法——一个有据可查、稳定的库对我来说是理想的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-13T05:54:40.420

libsecret 是 gnome-keyring 的替代品，后者已被弃用。它具有随它分发的 Vala 绑定。文档中有示例，或者您可以查看测试用例：[http ://git.gnome.org/browse/libsecret/tree/library/tests/test-vala-lang.vala](http://git.gnome.org/browse/libsecret/tree/library/tests/test-vala-lang.vala)

此外，gnome-keyring 现在分发基于 GObject Introspection 的 Vala 绑定，并且应该比使用 valac 分发的要好得多。

# c# - MVVM - 作用于“当前选定对象”的全局动作

> ID：10849533
> 
> 赞同：0
> 
> 时间：2012-06-01T11:37:06.403
> 
> 标签：c#, wpf, user-interface, mvvm

我有一个复杂的应用程序，我正在尝试使用 MVVM（我不熟悉的模式）开发 - 该应用程序有选项卡和停靠窗口，每个都有“选定对象”的概念，顶部有一个全局工具栏具有需要对“选定对象”进行操作的操作的应用程序。

想象一下类似于 Visual Studio 的稍微简单一点的版本，例如：

*   如果选择了包含列表视图的窗格，其中所选对象为“非活动”，则应启用“激活”工具栏项。（全局选中项就是那个列表视图项）
*   但是，如果用户随后单击另一个窗格中没有选定对象的选项卡，则应禁用相同的工具栏项（全局选定项为空）。

暂时忽略诸如多项选择之类的复杂情况，目前我通过创建一个代表“应用程序”本身的包罗万象的单例*模型类来实现这一点，例如

```
class MyAppModel : INotifyPropertyChanged
{
    public ISelectableObject SelectedObject { get; }
} 
```

然后，我有一个“系统”（我承认我在这里忽略了很多细节），以确保当 UI 中的更改导致全局更改时更新此属性（并触发相关事件）当前选定的对象”，工具栏按钮使用此属性来确定可用性等...

但是，我对这似乎不太像 MVVM 感到困惑（我在某处读到 UI 状态应该存储在 ViewModel 中？）

*   拥有一个以这种方式代表“应用程序”的全局模型是个好主意吗？（那里还有其他属性可以以类似的方式跟踪应用程序中的其他内容，例如打开的文档）
*   如果不是，我应该使用什么来允许全局组件（例如工具栏中的项目）找出并跟踪“全局选定对象”是什么

* * *

(*) 这可以很容易地使用依赖注入来提供

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:26:13.163

尝试注册 Inputmanager.current 的 PreNotifyInput 事件。并在应用程序级别将此事件注册到全局级别。

```
InputManager.Current.PreNotifyInput += new NotifyInputEventHandler(Current_PreNotifyInput); 
```

另请参阅 Inputmanager 类

[http://msdn.microsoft.com/en-us/library/ms617136](http://msdn.microsoft.com/en-us/library/ms617136)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:45:15.957

因为`MVVM`你肯定应该有一个`ViewModel`代表你的顶级绑定表面的主控。那个`Views`主控`ViewModel`将有一个`'SelectedItem'`参与`INotifyPropertyChanged`通知的属性`ViewModel`。然后，您应该将相关的 ItemsControl(s) (`TabControl`等)绑定`SeledctedItem`到此`ViewModel`属性，然后您的应用程序的其他部分可以绑定到 ViewModels`SelectedItem`属性，并且绑定将自动更改。

# javascript - 视频播放完毕后自动打开链接

> ID：10849538
> 
> 赞同：2
> 
> 时间：2012-06-01T11:37:35.240
> 
> 标签：javascript, html

是否可以让 html5 视频播放完毕后自动打开另一个页面？

这怎么能在javascript中完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:38:46.967

看看[MDN 上的媒体事件](http://jsfiddle.net/fJZYu/)。

```
// Cross-browser attach event logic (might be useful for this one day)
function listen(evnt, elem, func) {
    if (elem.addEventListener) { // W3C DOM
        elem.addEventListener(evnt, func, false);
    }
    else if (elem.attachEvent) { // IE DOM
        var r = elem.attachEvent("on" + evnt, func);
        return r;
    }
    else alert('I\'m sorry, I\'m afraid I can\'t do that.');
}

// Attach to event
listen("ended", document.getElementById('myVideo'), DoSomething);

// Event handler
function DoSomething() {
    // Use window.open (new window), or window.location.href = '[your link]'
}​ 
```

这是[一个工作小提琴。](http://jsfiddle.net/fJZYu/)

**编辑**

由于您在评论中提到您拥有 jQuery，因此这也可以：

```
$("#myVideo").on("ended", function() {
    // Use window.open (new window), or window.location.href = '[your link]'
});​ 
```

这是[一个工作小提琴](http://jsfiddle.net/p5hhJ/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:42:08.167

如果你使用 jQuery，你可以这样做：

```
$("#myVideoElementID").bind("ended", function() {
  // Do stuff here
}); 
```

# mysql - 在 Linux 中设置 Mysql++

> ID：10849548
> 
> 赞同：7
> 
> 时间：2012-06-01T11:38:40.267
> 
> 标签：mysql, ubuntu, mysql++

我想在 linux 中使用 C++ 连接到 mysql 数据库。在我的本地机器上，我正在运行 Ubuntu，并安装了 mysql 服务器和客户端软件包：

> sudo apt-get install mysql-server mysql-client

我遇到了[Mysql++](http://tangentsoft.net/mysql++/)，但是从他们的二进制包运行 ./configure 时遇到了一些问题。错误说：

> 检查 MySQL 库目录...配置：错误：在 '/usr/lib64 /usr/lib /usr/lib64/mysql /usr/lib/mysql /usr/local/lib64 /usr/local 中找不到 mysqlclient 库/lib /usr/local/lib/mysql /usr/local/mysql/lib /usr/local/mysql/lib/mysql /usr/mysql/lib/mysql /opt/mysql/lib /opt/mysql/lib/mysql /sw/lib /sw/lib/mysql'

我看到我可以在哪里使用这个命令来指定路径：

> ./configure --with-mysql-lib=/...

~~但我不知道该指向哪里。我使用 whereis mysql 但找不到任何包含 lib 子目录的 mysql 目录。mysqlclient 库将安装在哪里？~~

* * *

编辑：

定位后`libmysqlclient`我回来了

> /usr/lib/i386-linux-gnu/libmysqlclient.so.18
> /usr/lib/i386-linux-gnu/libmysqlclient.so.18.0.0
> /usr/lib/i386-linux-gnu/libmysqlclient_r.so.18
> /usr/lib/i386-linux-gnu/libmysqlclient_r.so.18.0.0
> /usr/share/doc/libmysqlclient18
> /usr/share/doc/libmysqlclient18/changelog.Debian.gz
> /usr/share/doc/libmysqlclient18/copyright
> /var/cache/apt/archives/libmysqlclient18_5.5.22-0ubuntu1_i386.deb
> /var/lib/dpkg/info/libmysqlclient18:i386.list
> /var/lib/dpkg/info/libmysqlclient18:i386.md5sums
> /var/lib/dpkg /info/libmysqlclient18:i386.postinst
> /var/lib/dpkg/info/libmysqlclient18:i386.postrm
> /var/lib/dpkg/info/libmysqlclient18:i386.shlibs

所以，我试过`./configure --with-mysql-lib=/usr/lib/i386-linux-gnu` 了，它似乎没有任何抱怨就完成了。

虽然这解决了 ./configure 完成的问题，但我还有更多的麻烦。当我运行时`make`一切都很好，直到这一点：

> 在来自 ./lib/sql_buffer.h:31:0 的文件中，来自 ./lib/sql_buffer.cpp:26: ./lib/refcounted.h:258:2: error: 'size_t' does not name a type 。 /lib/refcounted.h：在构造函数“mysqlpp::RefCountedPointer::RefCountedPointer()”中：./lib/refcounted.h:89:2: 错误：类“mysqlpp::RefCountedPointer”没有任何名为“refs_”的字段' ./lib/refcounted.h: 在构造函数 'mysqlpp::RefCountedPointer::RefCountedPointer(T*)': ./lib/refcounted.h:100:2: 错误：类 'mysqlpp::RefCountedPointer' 没有任何名为“refs_”的字段./lib/refcounted.h:104:4：错误：“refs_”未在此范围内声明。/lib/refcounted.h:104:16：错误：“size_t”之前的预期类型说明符./lib/refcounted.h:104:16: 错误：预期';' 在'size_t' ./lib/refcounted.h 之前：在构造函数'mysqlpp::RefCountedPointer::

我对 C++ 不是很熟悉，所以我不确定这个错误的确切含义。任何关于如何从这一点获得 Mysql++ 设置的帮助或指导将不胜感激。虽然，我承认我也开始寻找可以使用的替代库。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-11T14:42:19.150

之所以会出现此问题，是因为`size_t`在配置（make）文件中调用 stddef 命名空间之前，它依赖于它的包含。

我遇到了同样的问题（使用亚马逊 EC2 ubuntu 12.04 云服务器）并通过编辑有问题的文件（`sql_buffer.cpp`在我的情况下位于 /home/ubuntu/mysql++-3.1.0/lib）并包括 stddef（同时向上移动字符串命名空间）：

```
#include <stddef.h>
#include <string.h>
#include "sql_buffer.h" 
```

这个更正回答了你的问题。但是，您可能会遇到其他问题，就像我一样。所以我解释了我是如何解决一些后续问题的，你可能有也可能没有。

你可能不得不使用

```
sudo chown username sql_buffer.cpp 
```

能够编辑文件，具体取决于您的安装方式（例如，我是用户 ubuntu）。

然后我遇到了另一个问题：

```
./ssx/genv2.cpp: In function âbool generate_ssqls2(const char*, const ParseV2*)â:
./ssx/genv2.cpp:70:28: error: âstrcmpâ was not declared in this scope 
```

所以我编辑了有问题的文件（`genv2.cpp`）并包含了字符串命名空间

```
#include <string.h> 
```

然后我遇到了另一个问题：

```
./libmysqlpp_ssqls2parse.a(ssqls2parse_parsev2.o): In function `Type':
/home/ubuntu/mysql++-3.1.0/./ssx/parsev2.cpp:256: undefined reference to `mysqlpp::internal::str_to_lwr 
```

我本可以编辑`Makefile.in`但选择简单地在命令行中运行：

```
sudo  g++ -o test_ssqls2 test_ssqls2_ssqls2.o -lmysqlpp_ssqls2parse   -L. -lmysqlclient   -L/usr/lib/x86_64-linux-gnu  -lmysqlpp 
```

然后我继续这个`make`过程。

这对我有用：安装并运行 mysql++。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T11:42:30.967

您需要安装头文件（开发）文件，我假设其中之一：

```
apt-cache search mysql
...
libmysqlclient-dev - MySQL database development files
libmysqlclient16 - MySQL database client library
libmysql++-dev - MySQL C++ library bindings (development)
libmysqlcppconn-dev - MySQL Connector for C++ (development files)
... 
```

`--with-mysql-lib`应该不是必需的，因为这些文件将安装在默认位置。

# python - 为上传文件的生成 URL 设置时间约束

> ID：10849550
> 
> 赞同：0
> 
> 时间：2012-06-01T11:38:45.190
> 
> 标签：python, django, django-forms

我正在尝试构建一个应用程序（使用 Django）来上传文件并生成相应的 URL。有什么方法可以为 url 设置时间限制，即 url 中上传的文件应该只存在于指定时间之后 url 应该给出错误的一小段时间。我将使用默认的 django 服务器，在这种情况下，解决时间约束问题的可能方法是什么。如果您同时回答全局和单个文件的两种情况，我会很高兴，或者即使是单一的解决方案也很好:)~新手完成一项艰巨的任务！谢谢你 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:54:47.407

如果您上传的文件由 Django 应用程序本身提供，那么这很容易（并且可以通过不同的方式解决，具体取决于“时间限制”是否对所有文件/url 都是全局的）。

否则 - 如果文件由 Apache 或类似的东西提供服务 - 你将不得不求助于一些异步机制来收集和删除“过时”文件，无论是 Q&D 方式（使用 cron 作业）还是在 Celery 的帮助下.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T12:41:57.907

您可以将日期时间字段作为附加列，并在需要时将其过期。

# android - 动态更新 ViewPager？

> ID：10849552
> 
> 赞同：331
> 
> 时间：2012-06-01T11:38:46.033
> 
> 标签：android, android-fragments, android-viewpager

我无法更新 ViewPager 中的内容。

FragmentPagerAdapter 类中方法 instantiateItem() 和 getItem() 的正确用法是什么？

我只使用 getItem() 来实例化并返回我的片段：

```
@Override
public Fragment getItem(int position) {
    return new MyFragment(context, paramters);
} 
```

这运作良好。除了我不能改变内容。

所以我发现了这个：[ViewPager PagerAdapter not updates the View](https://stackoverflow.com/questions/7263291/viewpager-pageradapter-not-updating-the-view)

> “我的方法是对 instanceItem() 方法中的任何实例化视图使用 setTag() 方法”

现在我想实现 instantiateItem() 来做到这一点。但我不知道我必须返回什么（类型是 Object）以及与 getItem(int position) 的关系是什么？

我阅读了[参考资料](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)：

> *   公共抽象片段 getItem（int 位置）
>     
>     
>     
>     返回与指定位置关联的 Fragment。
>     
>     
> *   public Object instantiateItem（ViewGroup 容器，int 位置）
>     
>     
>     
>     为给定位置创建页面。适配器负责将视图添加到此处给出的容器中，尽管它只必须确保在它从 finishUpdate(ViewGroup) 返回时完成此操作。参数
>     
>     
>     
>     容器 将在其中显示页面的包含视图。position 要实例化的页面位置。
>     
>     
>     
>     退货
>     
>     
>     
>     返回一个表示新页面的对象。这不需要是视图，但可以是页面的其他容器。

但我还是不明白。

这是我的代码。我正在使用支持包 v4。

ViewPagerTest

```
public class ViewPagerTest extends FragmentActivity {
    private ViewPager pager;
    private MyFragmentAdapter adapter; 

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.pager1);

        pager = (ViewPager)findViewById(R.id.slider);

        String[] data = {"page1", "page2", "page3", "page4", "page5", "page6"};

        adapter = new MyFragmentAdapter(getSupportFragmentManager(), 6, this, data);
        pager.setAdapter(adapter);

        ((Button)findViewById(R.id.button)).setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                reload();
            }
        });
    }

    private void reload() {
        String[] data = {"changed1", "changed2", "changed3", "changed4", "changed5", "changed6"};
        //adapter = new MyFragmentAdapter(getSupportFragmentManager(), 6, this, data);
        adapter.setData(data);
        adapter.notifyDataSetChanged();
        pager.invalidate();

        //pager.setCurrentItem(0);
    }
} 
```

我的片段适配器

```
class MyFragmentAdapter extends FragmentPagerAdapter {
    private int slideCount;
    private Context context;
    private String[] data;

    public MyFragmentAdapter(FragmentManager fm, int slideCount, Context context, String[] data) {
        super(fm);
        this.slideCount = slideCount;
        this.context = context;
        this.data = data;
    }

    @Override
    public Fragment getItem(int position) {
        return new MyFragment(data[position], context);
    }

    @Override
    public int getCount() {
        return slideCount;
    }

    public void setData(String[] data) {
        this.data = data;
    }

    @Override
    public int getItemPosition(Object object) {
        return POSITION_NONE;
    }
} 
```

我的片段

```
public final class MyFragment extends Fragment {
    private String text;

    public MyFragment(String text, Context context) {
        this.text = text;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.slide, null);
        ((TextView)view.findViewById(R.id.text)).setText(text);

        return view;
    }
} 
```

这里也有人有类似问题，没有答案 [http://www.mail-archive.com/android-developers@googlegroups.com/msg200477.html](http://www.mail-archive.com/android-developers@googlegroups.com/msg200477.html)

* * *

## 回答 #1

> 赞同：622
> 
> 时间：2012-06-01T14:22:07.693

在使用 FragmentPagerAdapter 或 FragmentStatePagerAdapter 时，最好单独处理，完全`getItem()`不接触`instantiateItem()`。PagerAdapter 上的`instantiateItem()`- `destroyItem()`-`isViewFromObject()`接口是一个较低级别的接口，FragmentPagerAdapter 使用它来实现更简单的`getItem()`接口。

在进入这个之前，我应该澄清一下

> **如果要切换出正在显示的实际片段，则需要避免使用 FragmentPagerAdapter 并使用 FragmentStatePagerAdapter。**

此答案的早期版本错误地将 FragmentPagerAdapter 用作其示例 - 这将不起作用，因为 FragmentPagerAdapter 在第一次显示后永远不会破坏片段。

我不推荐您链接的帖子中提供的解决方法`setTag()`。`findViewWithTag()`正如您所发现的，使用`setTag()`和`findViewWithTag()`不适用于片段，所以它不是一个很好的匹配。

正确的解决方案是覆盖`getItemPosition()`. 当`notifyDataSetChanged()`被调用时，ViewPager 会调用`getItemPosition()`其适配器中的所有项目，以查看它们是否需要移动到不同的位置或移除。

默认情况下，`getItemPosition()`返回`POSITION_UNCHANGED`，这意味着，“这个对象在它所在的地方很好，不要破坏或删除它。” 返回`POSITION_NONE`解决了这个问题，而是说，“这个对象不再是我正在显示的项目，删除它。” 因此，它具有删除和重新创建适配器中每个项目的效果。

这是一个完全合法的修复！此修复使 notifyDataSetChanged 的​​行为类似于常规适配器，无需视图回收。如果您实施此修复并且性能令人满意，那么您就可以参加比赛了。任务完成。

如果您需要更好的性能，您可以使用更高级的`getItemPosition()`实现。这是一个寻呼机从字符串列表中创建片段的示例：

```
ViewPager pager = /* get my ViewPager */;
// assume this actually has stuff in it
final ArrayList<String> titles = new ArrayList<String>();

FragmentManager fm = getSupportFragmentManager();
pager.setAdapter(new FragmentStatePagerAdapter(fm) {
    public int getCount() {
        return titles.size();
    }

    public Fragment getItem(int position) {
        MyFragment fragment = new MyFragment();
        fragment.setTitle(titles.get(position));
        return fragment;
    }

    public int getItemPosition(Object item) {
        MyFragment fragment = (MyFragment)item;
        String title = fragment.getTitle();
        int position = titles.indexOf(title);

        if (position >= 0) {
            return position;
        } else {
            return POSITION_NONE;
        }
    }
}); 
```

使用此实现，只会显示显示新标题的片段。任何显示仍在列表中的标题的片段都将被移动到它们在列表中的新位置，并且标题不再在列表中的片段将被销毁。

如果片段尚未重新创建，但仍需要更新怎么办？对活动片段的更新最好由片段本身处理。毕竟，这就是拥有片段的优势——它是它自己的控制器。片段可以在 中向另一个对象添加侦听器或观察者`onCreate()`，然后在 中删除它`onDestroy()`，从而自行管理更新。您不必`getItem()`像在 ListView 或其他 AdapterView 类型的适配器中那样将所有更新代码放入其中。

最后一件事——仅仅因为 FragmentPagerAdapter 不破坏片段并不意味着 getItemPosition 在 FragmentPagerAdapter 中完全没用。您仍然可以使用此回调在 ViewPager 中重新排序您的片段。但是，它永远不会将它们完全从 FragmentManager 中删除。

* * *

## 回答 #2

> 赞同：149
> 
> 时间：2013-07-25T10:40:15.743

不要从返回`POSITION_NONE`并`getItemPosition()`引起全视图娱乐，而是这样做：

```
//call this method to update fragments in ViewPager dynamically
public void update(UpdateData xyzData) {
    this.updateData = xyzData;
    notifyDataSetChanged();
}

@Override
public int getItemPosition(Object object) {
    if (object instanceof UpdateableFragment) {
        ((UpdateableFragment) object).update(updateData);
    }
    //don't return POSITION_NONE, avoid fragment recreation. 
    return super.getItemPosition(object);
} 
```

您的片段应该实现`UpdateableFragment`接口：

```
public class SomeFragment extends Fragment implements
    UpdateableFragment{

    @Override
    public void update(UpdateData xyzData) {
         // this method will be called for every fragment in viewpager
         // so check if update is for this fragment
         if(forMe(xyzData)) {
           // do whatever you want to update your UI
         }
    }
} 
```

和界面：

```
public interface UpdateableFragment {
   public void update(UpdateData xyzData);
} 
```

您的数据类：

```
public class UpdateData {
    //whatever you want here
} 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2014-12-11T11:40:33.487

对于那些仍然面临我之前遇到的相同问题的人，当我有`ViewPager`7 个片段时。这些片段的默认设置是从`API`服务中加载英语内容，但这里的问题是我想从设置活动中更改语言，并且在完成设置活动后，我希望`ViewPager`在主要活动中刷新片段以匹配用户的语言选择并加载如果用户在这里选择阿拉伯语，则阿拉伯语内容我从第一次开始工作

**1-您必须使用上面提到的 FragmentStatePagerAdapter。**

2- 在 mainActivity 我覆盖 onResume 并做了以下

```
if (!(mPagerAdapter == null)) {
    mPagerAdapter.notifyDataSetChanged();
} 
```

3-i 覆盖了`getItemPosition()`mPagerAdapter 并使其返回`POSITION_NONE`。

```
@Override
public int getItemPosition(Object object) {
    return POSITION_NONE;
} 
```

像魅力一样工作

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-08-08T06:51:35.653

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2013-07-09T09:03:34.290

在您的代码中尝试`destroyDrawingCache()`ViewPager 。`notifyDataSetChanged()`

* * *

## 回答 #6

> 赞同：11
> 
> 时间：2014-03-08T18:03:07.333

经过数小时的挫折，同时尝试了所有上述解决方案来克服这个问题，并尝试了许多其他类似问题的解决方案，比如[这个](https://stackoverflow.com/questions/10849552/android-viewpager-cant-update-dynamically)，[这个](https://stackoverflow.com/questions/11736953/viewpager-does-not-redraw-content-remains-turns-blank)和[这个](https://stackoverflow.com/questions/10611018/how-to-update-viewpager-content)都失败了，我无法解决这个问题并`ViewPager`破坏旧的并`Fragment`填充`pager`新`Fragment`s。我已经解决了以下问题：

**1）**使`ViewPager`类扩展`FragmentPagerAdapter`如下：

```
 public class myPagerAdapter extends FragmentPagerAdapter { 
```

**2）**`ViewPager`为该商店创建一个项目，`title`如下`fragment`所示：

```
public class PagerItem {
private String mTitle;
private Fragment mFragment;

public PagerItem(String mTitle, Fragment mFragment) {
    this.mTitle = mTitle;
    this.mFragment = mFragment;
}
public String getTitle() {
    return mTitle;
}
public Fragment getFragment() {
    return mFragment;
}
public void setTitle(String mTitle) {
    this.mTitle = mTitle;
}

public void setFragment(Fragment mFragment) {
    this.mFragment = mFragment;
}

} 
```

**3）**使`ViewPager`take my`FragmentManager`实例的构造函数将其存储在my`class`中，如下所示：

```
private FragmentManager mFragmentManager;
private ArrayList<PagerItem> mPagerItems;

public MyPagerAdapter(FragmentManager fragmentManager, ArrayList<PagerItem> pagerItems) {
    super(fragmentManager);
    mFragmentManager = fragmentManager;
    mPagerItems = pagerItems;
} 
```

**4）**创建一个方法来用新数据重新设置`adapter`数据，方法是直接`fragment`从`fragmentManager`自身中删除所有以前的数据，以便再次从新列表`adapter`中设置新数据`fragment`，如下所示：

```
public void setPagerItems(ArrayList<PagerItem> pagerItems) {
    if (mPagerItems != null)
        for (int i = 0; i < mPagerItems.size(); i++) {
            mFragmentManager.beginTransaction().remove(mPagerItems.get(i).getFragment()).commit();
        }
    mPagerItems = pagerItems;
} 
```

**5)**从容器`Activity`或`Fragment`不使用新数据重新初始化适配器。通过使用新数据的方法设置`setPagerItems`新数据如下：

```
ArrayList<PagerItem> pagerItems = new ArrayList<PagerItem>();
    pagerItems.add(new PagerItem("Fragment1", new MyFragment1()));
    pagerItems.add(new PagerItem("Fragment2", new MyFragment2()));

    mPagerAdapter.setPagerItems(pagerItems);
    mPagerAdapter.notifyDataSetChanged(); 
```

我希望它有所帮助。

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2015-08-18T15:41:47.827

For some reason none of the answers worked for me so I had to override the restoreState method without calling super in my fragmentStatePagerAdapter. Code:

```
private class MyAdapter extends FragmentStatePagerAdapter {

    // [Rest of implementation]

    @Override
    public void restoreState(Parcelable state, ClassLoader loader) {}

} 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-04-23T13:23:08.083

我稍微修改了比尔菲利普斯提供的解决方案以满足我的需要

```
private class PagerAdapter extends FragmentStatePagerAdapter{
    Bundle oBundle;
    FragmentManager oFragmentManager;
    ArrayList<Fragment> oPooledFragments;

public PagerAdapter(FragmentManager fm) {
    super(fm);
    oFragmentManager=fm;

    }
@Override
public int getItemPosition(Object object) {

    Fragment oFragment=(Fragment)object;
    oPooledFragments=new ArrayList<>(oFragmentManager.getFragments());
    if(oPooledFragments.contains(oFragment))
        return POSITION_NONE;
    else
        return POSITION_UNCHANGED;
    } 
} 
```

以便仅`getItemPosition()`返回当前在when`POSITION_NONE`中的那些片段。（请注意，此及其关联的内容包含在 Fragment 中而不是 Activity 中）`FragmentManager``getItemPosition``FragmentStatePager``ViewPager`

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2013-11-06T12:00:56.217

我有一个类似的问题，但不想相信现有的解决方案（硬编码标签名称等），我无法让 M-WaJeEh 的解决方案为我工作。这是我的解决方案：

我将在 getItem 中创建的片段的引用保存在一个数组中。只要活动没有因配置更改或内存不足或其他原因而被破坏（-->返回活动时，片段返回到它们的最后状态而不会再次调用“getItem”，因此不会更新数组，这工作正常）。

为了避免这个问题，我实现了 instantiateItem(ViewGroup, int) 并在那里更新我的数组，如下所示：

```
 @Override
    public Object instantiateItem(ViewGroup container, int position) {
        Object o = super.instantiateItem(container, position);
        if(o instanceof FragmentX){
            myFragments[0] = (FragmentX)o;
        }else if(o instanceof FragmentY){
            myFragments[1] = (FragmentY)o;
        }else if(o instanceof FragmentZ){
            myFragments[2] = (FragmentZ)o;
        }
        return o;
    } 
```

所以，一方面我很高兴我找到了一个适合我的解决方案并想与你分享，但我也想问是否有人尝试过类似的东西，是否有任何理由我不应该这样做吗？到目前为止，它对我来说非常好......

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-08-07T09:10:10.727

我也遇到过同样的问题，而且我搜索了太多次。在 stackoverflow 或通过谷歌给出的任何答案都不能解决我的问题。我的问题很简单。我有一个列表，我用 viewpager 显示这个列表。当我将一个新元素添加到列表的头部并刷新 viewpager 时，什么都没有改变。我的最终解决方案非常简单，任何人都可以使用。当一个新元素添加到列表中并且想要刷新列表时。首先将 viewpager 适配器设置为 null 然后重新创建适配器并将 i 设置为 viewpager。

```
myVPager.setAdapter(null);
myFragmentAdapter = new MyFragmentAdapter(getSupportFragmentManager(),newList);
myVPager.setAdapter(myFragmentAdapter); 
```

确保您的适配器必须扩展 FragmentStatePagerAdapter

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-02-13T09:38:40.637

我使用[EventBus](https://github.com/greenrobot/EventBus)库来更新`Fragment`. `ViewPager`逻辑很简单，就像[EventBus 怎么做的文档](https://github.com/greenrobot/EventBus/blob/master/HOWTO.md)。无需控制`FragmentPagerAdapter`实例。代码在这里：

1：定义事件

定义需要更新的消息。

```
public class UpdateCountEvent {
    public final int count;

    public UpdateCountEvent(int count) {
        this.count = count;
    }
} 
```

2.准备订阅者

在需要更新的片段中写入以下代码。

```
@Override
public void onStart() {
    super.onStart();
    EventBus.getDefault().register(this);
}

@Override
public void onStop() {
    EventBus.getDefault().unregister(this);  
    super.onStop();
}

public void onEvent(UpdateCountEvent event) {//get update message
    Toast.makeText(getActivity(), event.count, Toast.LENGTH_SHORT).show();
} 
```

3.发布活动

在需要更新参数 的其他`Activity`或其他中编写以下代码`Fragment`

```
//input update message
EventBus.getDefault().post(new UpdateCountEvent(count)); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2015-06-17T01:38:18.447

我一直在尝试很多不同的方法，但没有一个能真正解决我的问题。以下是我如何使用你们提供的各种解决方案来解决它。感谢大家。

```
class PagerAdapter extends FragmentPagerAdapter {

    public boolean flag_refresh=false;

    public PagerAdapter(FragmentManager fm) {
        super(fm);
    }

    @Override
    public Fragment getItem(int page) {
        FragmentsMain f;
        f=new FragmentsMain();
        f.page=page;
        return f;
    }

    @Override
    public int getCount() {
        return 4;
    }

    @Override
    public int getItemPosition(Object item) {
        int page= ((FragmentsMain)item).page;

        if (page == 0 && flag_refresh) {
            flag_refresh=false;
            return POSITION_NONE;
        } else {
            return super.getItemPosition(item);
        }
    }

    @Override
    public void destroyItem(View container, int position, Object object) {

        ((ViewPager) container).removeView((View) object);
    }
} 
```

我只想在 onResume() 之后刷新第 0 页。

```
 adapter=new PagerAdapter(getSupportFragmentManager());
 pager.setAdapter(adapter);

@Override
protected void onResume() {
    super.onResume();

    if (adapter!=null) {
        adapter.flag_refresh=true;
        adapter.notifyDataSetChanged();
    }
} 
```

在我的 FragmentsMain 中，有一个公共整数“页面”，它可以告诉我是否是我要刷新的页面。

```
public class FragmentsMain extends Fragment {

private Cursor cursor;
private static Context context;
public int page=-1; 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2019-01-09T17:08:24.370

这是我的实现，它结合了来自@Bill Phillips One 的信息，大多数情况下都会获取片段缓存，除非数据发生了变化。很简单，而且似乎工作正常。

MyFragmentStatePagerAdapter.java

```
private boolean mIsUpdating = false;
public void setIsUpdating(boolean mIsUpdating) {
        this.mIsUpdating = mIsUpdating;
    }

@Override
public int getItemPosition(@NonNull Object object) {

    if (mIsUpdating) {
        return POSITION_NONE;
    }
    else {
        return super.getItemPosition(object);
    }
} 
```

我的活动.java

```
mAdapter.setIsUpdating(true);
mAdapter.notifyDataSetChanged();
mAdapter.setIsUpdating(false); 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-08-23T13:34:38.600

这可能对某人有所帮助 - 在我的情况下，当插入新页面时，视图寻呼机两次询问现有片段的位置，但不询问新项目的位置，导致不正确的行为和数据不显示。

1.  复制 FragmentStatePagerAdapter 的源代码（似乎很久没有更新了）。

2.  覆盖 notifyDataSetChanged()

    ```
    @Override
    public void notifyDataSetChanged() {
        mFragments.clear();
        super.notifyDataSetChanged();
    } 
    ```

3.  向 destroyItem() 添加健全性检查以防止崩溃：

    ```
    if (position < mFragments.size()) {
        mFragments.set(position, null);
    } 
    ```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2015-11-12T03:35:41.170

我知道派对迟到了。我已经通过调用解决了这个`TabLayout#setupWithViewPager(myViewPager);`问题`FragmentPagerAdapter#notifyDataSetChanged();`

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-08-22T21:47:22.927

如果您想使用 FragmentStatePagerAdapter，请查看[https://code.google.com/p/android/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Owner%20Summary% 20 星&groupby=&sort=&id=37990](https://code.google.com/p/android/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Owner%20Summary%20Stars&groupby=&sort=&id=37990)。FragmentStatePagerAdapter 存在可能会或可能不会给您的用例带来麻烦的问题。

此外，链接也很少有解决方案..很少有可能适合您的要求。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2021-02-02T19:09:30.710

**使用`ViewPager2`和`FragmentStateAdapter`：**

支持动态更新数据`ViewPager2`。

[文档](https://developer.android.com/training/animation/vp2-migration)中有一条关于如何使其工作的重要说明：

> 注意：DiffUtil 实用程序类依赖于通过 ID 识别项目。**如果您使用 ViewPager2 对可变集合进行分页，则还必须覆盖 getItemId() 和 containsItem()。**（强调我的）

根据`ViewPager2` [文档](https://developer.android.com/guide/navigation/navigation-swipe-view-2)和 Android 的 Github[示例项目](https://github.com/android/views-widgets-samples/tree/master/ViewPager2)，我们需要采取一些步骤：

1.  设置`FragmentStateAdapter`和覆盖以下方法：、、、和`getItemCount`（注意：不支持）`createFragment``getItemId``containsItem``FragmentStatePagerAdapter``ViewPager2`

2.  将适配器连接到`ViewPager2`

3.  调度列表更新到`ViewPager2`with `DiffUtil`（不需要使用`DiffUtil`，如示例项目中所示）

* * *

**例子：**

```
private val items: List<Int>
    get() = viewModel.items
private val viewPager: ViewPager2 = binding.viewPager

private val adapter = object : FragmentStateAdapter(this@Fragment) {
    override fun getItemCount() = items.size
    override fun createFragment(position: Int): Fragment = MyFragment()
    override fun getItemId(position: Int): Long = items[position].id
    override fun containsItem(itemId: Long): Boolean = items.any { it.id == itemId }
}
viewPager.adapter = adapter

private fun onDataChanged() {
    DiffUtil
        .calculateDiff(object : DiffUtil.Callback() {
            override fun getOldListSize(): Int = viewPager.adapter.itemCount
            override fun getNewListSize(): Int = viewModel.items.size
            override fun areItemsTheSame(oldItemPosition: Int, newItemPosition: Int) =
                viewPager.adapter?.getItemId(oldItemPosition) == viewModel.items[newItemPosition].id

            override fun areContentsTheSame(oldItemPosition: Int, newItemPosition: Int) =
                areItemsTheSame(oldItemPosition, newItemPosition)
        }, false)
        .dispatchUpdatesTo(viewPager.adapter!!)
} 
```

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-07-06T15:31:08.180

此解决方案不适用于所有人，但就我而言，我的 ViewPager 中的每个 Fragment 都是不同的类，并且一次只存在一个。

有了这个约束，这个解决方案是安全的，应该可以安全地在生产中使用。

```
private void updateFragment(Item item) {

    List<Fragment> fragments = getSupportFragmentManager().getFragments();
    for (Fragment fragment : fragments) {

        if (fragment instanceof MyItemFragment && fragment.isVisible()) {
            ((MyItemFragment) fragment).update(item);
        }

    }
} 
```

如果您有同一个片段的多个版本，您可以使用相同的策略来调用这些片段上的方法，以确定它是否是您要更新的片段。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2018-06-11T14:09:09.617

如果要基于索引重新创建或重新加载片段，请使用 FragmentStatePagerAdapter 而不是 FragmentPagerAdapter 例如，如果要重新加载 FirstFragment 以外的片段，则可以像这样检查实例并返回位置

```
 public int getItemPosition(Object item) {
    if(item instanceof FirstFragment){
       return 0;
    }
    return POSITION_NONE;
 } 
```

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2017-02-05T20:17:21.903

我已经浏览了上面的所有答案和其他一些帖子，但仍然找不到适合我的东西（具有不同的片段类型以及动态添加和删除选项卡）。FWIW 以下方法对我有用（以防其他人有同样的问题）。

```
public class MyFragmentStatePageAdapter extends FragmentStatePagerAdapter {
    private static final String TAB1_TITLE = "Tab 1";
    private static final String TAB2_TITLE = "Tab 2";
    private static final String TAB3_TITLE = "Tab 3";

    private ArrayList<String> titles = new ArrayList<>();
    private Map<Fragment, Integer> fragmentPositions = new HashMap<>();

    public MyFragmentStatePageAdapter(FragmentManager fm) {
        super(fm);
    }

    public void update(boolean showTab1, boolean showTab2, boolean showTab3) {
        titles.clear();

        if (showTab1) {
            titles.add(TAB1_TITLE);
        }
        if (showTab2) {
            titles.add(TAB2_TITLE);
        }
        if (showTab3) {
            titles.add(TAB3_TITLE);
        }
        notifyDataSetChanged();
    }

    @Override
    public int getCount() {
        return titles.size();
    }

    @Override
    public Fragment getItem(int position) {
        Fragment fragment = null;

        String tabName = titles.get(position);
        if (tabName.equals(TAB1_TITLE)) { 
            fragment =  Tab1Fragment.newInstance();
        } else if (tabName.equals(TAB2_TITLE)) {
            fragment =  Tab2Fragment.newInstance();
        } else if (tabName.equals(TAB3_TITLE)) {
            fragment =  Tab3Fragmen.newInstance();
        } 

        ((BaseFragment)fragment).setTitle(tabName);
        fragmentPositions.put(fragment, position);
        return fragment;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        return titles.get(position);
    }

    @Override
    public int getItemPosition(Object item) {
        BaseFragment fragment = (BaseFragment)item;
        String title = fragment.getTitle();
        int position = titles.indexOf(title);

        Integer fragmentPosition = fragmentPositions.get(item);
        if (fragmentPosition != null && position == fragmentPosition) {
            return POSITION_UNCHANGED;
        } else {
            return POSITION_NONE;
        }
    }

    @Override
    public void destroyItem(ViewGroup container, int position, Object object) {
        super.destroyItem(container, position, object);
        fragmentPositions.remove(object);
    }
} 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2020-04-09T14:19:23.163

您需要更改 instantiateItem 的 mFragments 元素 getItemPosition。

```
 if (mFragments.size() > position) {
        Fragment f = mFragments.get(position);

        if (f != null) {
            int newPosition = getItemPosition(f);
            if (newPosition == POSITION_UNCHANGED) {
                return f;
            } else if (newPosition == POSITION_NONE) {
                mFragments.set(position, null);
            } else {
                mFragments.set(newPosition, f);
            }
        }
    } 
```

基于 AndroidX FragmentStatePagerAdapter.java，因为`mFragments`调用 notifyDataSetChanged() 时元素位置不会改变。

来源： [https ://github.com/cuichanghao/infivt/blob/master/library/src/main/java/cc/cuichanghao/library/FragmentStatePagerChangeableAdapter.java](https://github.com/cuichanghao/infivt/blob/master/library/src/main/java/cc/cuichanghao/library/FragmentStatePagerChangeableAdapter.java)

示例： [https ://github.com/cuichanghao/infivt/blob/master/app/src/main/java/cc/cuichanghao/infivt/MainActivityChangeablePager.kt](https://github.com/cuichanghao/infivt/blob/master/app/src/main/java/cc/cuichanghao/infivt/MainActivityChangeablePager.kt)

您可以运行此项目以确认如何工作。 [https://github.com/cuichanghao/infivt](https://github.com/cuichanghao/infivt)

# php - 如何在 zend 中清理/释放数据库查询内存？

> ID：10849553
> 
> 赞同：2
> 
> 时间：2012-06-01T11:38:46.493
> 
> 标签：php, database, zend-framework, memory-management

在执行这个简单的代码（对于 MySQL 数据库）后，每次循环迭代我会减少 1kB 的内存，所以在第 1000 次迭代后，我使用了大约 1MB 的内存。

现在，如果我必须循环运行一个长时间运行的脚本（大约 1 000 000 次迭代），我很快就会内存不足

```
$_db = Zend_Db_Table::getDefaultAdapter();

$start_memory = memory_get_usage();

for ($i=0; $i<1000; $i++) {
    $update_query = "UPDATE table SET field='value'";
    $_db->query($update_query);
}

echo 'memory used: '.(memory_get_usage()-$start_memory); 
```

有没有办法释放数据库查询使用的内存？

我试图将更新查询放在一个函数中，因此在离开函数范围后，该函数使用的资源应该被自动释放：

```
function update($_db) {
  $sql = "UPDATE table SET field='value'";
  $_db->query($sql);
}
...
for ($i=0; $i<1000; $i++) {
    update($_db);
} 
```

但他们不是！

我对“尝试一次更新多行”之类的建议不感兴趣；）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T12:42:32.023

很可能您启用了[Zend_Db_Profiler 。](http://framework.zend.com/manual/en/zend.db.profiler.html)

数据库分析器存储每个执行的查询，这对于调试和优化非常有用，但如果您执行大量查询，则会导致相当快的内存耗尽。

在您给出的示例中，禁用分析器应该可以解决问题：

```
$_db = Zend_Db_Table::getDefaultAdapter();
$_db->getProfiler()->setEnabled(false);

$start_memory = memory_get_usage();

for ($i=0; $i<1000; $i++) {
    $update_query = "UPDATE table SET field='value'";
    $_db->query($update_query);
}

echo 'memory used: '.(memory_get_usage()-$start_memory); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:44:51.057

当多次执行相同的查询时，节省内存的最佳方法是实现[预准备语句](http://framework.zend.com/manual/en/zend.db.statement.html)。您的适配器将使用准备好的语句，但由于您在循环内调用 query() 方法，因此每次都准备好。将其移出循环：

```
$_db = Zend_Db_Table::getDefaultAdapter();
$_stm = $_db->prepare("UPDATE table SET field='?'");

for ($i=0; $i<1000; $i++) {
    $_stm->execute(array($fieldValue));
} 
```

# java - Junit：将 MyBatis 升级到 3.1.1 后出现意外调用

> ID：10849557
> 
> 赞同：0
> 
> 时间：2012-06-01T11:39:09.023
> 
> 标签：java, junit, mocking, mybatis

设想：

```
final CatalogRuleExample example = new CatalogRuleExample();
example.createCriteria().andCatalogIdEqualTo(catalogId);
example.setOrderByClause("position ASC");

final List<CatalogRuleRecord> records = new ArrayList<CatalogRuleRecord>();
final CatalogRuleRecord firstRecord = new CatalogRuleRecord();
final CatalogRuleRecord secondRecord = new CatalogRuleRecord();
records.add(firstRecord);
records.add(secondRecord);
mockery.checking(new Expectations() {
  {
    oneOf(catalogRuleDAO).selectByExample(example);
    will(returnValue(records)); 
```

...

问题：

CatalogRuleExample 的最后一个例子在我的 mockery.checking by selectByExample 中是不一样的。如果我覆盖 equals() 它将起作用。但我想知道，这种情况是否有更好的解决方案。在此先感谢 PS：相同的代码在我从 Ibatis 迁移到 Mybtis 之前有效

```
final CatalogRuleExample example = new CatalogRuleExample() {
  @Override
  public boolean equals(Object that) {
    if (that instanceof CatalogRuleExample) {
      CatalogRuleExample other = (CatalogRuleExample) that;
      if (other.getOredCriteria().size() != 1) {
        return false;
      }
      if (other.getOredCriteria().get(0).getCriteria().size() != 1) {
        return false;
      }
      if (!other.getOredCriteria().get(0).getCriteria().get(0).getValue().equals(catalogId)) {
        return false;
      }
      if (!other.getOrderByClause().equals("position ASC")) {
        return false;
      }
      return true;
    }
    return false;
  }
}; 
```

错误：意外调用：catalogRuleDAO.selectByExample(<com.protogo.persistence.dao.CatalogRuleExample@a6ca0ea9>) 期望：预期一次，从未调用过：catalogRuleDAO.selectByExample(<com.protogo.persistence.dao.CatalogRuleExample@66e1beb1>); 返回 <[com.protogo.persistence.data.CatalogRuleRecord@4f7d02c2, com.protogo.persistence.data.CatalogRuleRecord@4f7d02c2]>

# android - HTML5 跨平台应用的架构类型

> ID：10849559
> 
> 赞同：1
> 
> 时间：2012-06-01T11:39:13.273
> 
> 标签：android, sqlite, google-chrome, jquery-mobile, cordova

![在此处输入图像描述](../Images/38e95796a304c18bf5cc3b7106200985.png)

我正在使用带有 web 存储的 jquery mobile、phoneGap 和 sqlite 数据库开发 HTML5 跨平台调查应用程序！！！！现在我正在使用 eclipse 在 Android 平台上测试这个应用程序。我是移动世界的新手，我更熟悉 j2ee Web 应用程序所以我想知道我们可以将这种类型的架构称为什么，尤其是我没有使用真正的服务器，例如 glassFish、TomCat .. 甚至一个真正的 SGBD，一切都在网络浏览器上（我正在使用 chrome） 有人可以帮我吗？谢谢你 :)
这是可能的建筑风格列表，但我找不到适合我的案例！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T21:21:15.960

您正在多个平台上构建 HTML5 加载器应用程序，具体取决于您是在本地存储 HTML5 还是将其从服务器中提取出来，这就是服务器/客户端的答案。

您需要*面向对象*的 javascript，这样您就不会污染命名空间。如果您在后端编写脚本，这也是一个很好的做法......我认为这些天面向对象是不言而喻的。

您可以将您的 JavaScript 分层，以拥有一个前端生成器、业务逻辑层和数据层来使用 sqlite 处理您的事务。或者您也可以遵循 MVC 分层设置。

如果您将数据从设备推送到中央存储库（我认为您必须这样做），您可以在服务器上构建 SOA 来处理数据的摄取。

# php - 在 PHP 中检测浏览器退出

> ID：10849561
> 
> 赞同：4
> 
> 时间：2012-06-01T11:39:28.940
> 
> 标签：php, browser

我已经查看了一些关于在 php 中检测浏览器退出的主题（此处和谷歌），但我对如何执行此操作并不太清楚。

我在 PHP 中尝试过`register_shutdown_function`，但即使我刷新了浏览器页面，它也在执行。

任何人都可以帮忙吗？

提前致谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-01T11:43:21.880

PHP 是一种服务器端语言。浏览器事件由 DOM 事件处理。在“onunload”或“onbeforeunload”事件中，向 PHP 文件发送 AJAX 调用。

在[另一个问题](https://stackoverflow.com/questions/1821625/ajax-request-with-jquery-on-page-unload)中，对我所说的内容有一个有味道的解释。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T11:41:24.907

我认为没有任何万无一失的方法可以检测 PHP 或 Javascript 中的浏览器关闭按钮。

通过基于计时器的轮询或服务器端的简单会话超时来处理它会更安全、更好。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-01T11:46:31.960

请说明您在浏览器关闭时想要做什么，看看是否有其他方法可以做到这一点*。*

Web 服务器将其响应发送到浏览器，然后（通常）关闭连接。您必须在 Javascript 中执行某些操作，但这并不能满足所有条件。您当然无法在服务器端检测到它。

可以使用 Javascript`onbeforeunload`或`onunload`函数来检测它，但这绝对不准确，因为它不会检测到：

*   浏览器崩溃
*   浏览器退出
*   电脑关机
*   链接点击页面
*   返回浏览器时

另请参阅[此答案](https://stackoverflow.com/a/3888938/266143)。

因此，例如，当您想在用户关闭浏览器时注销用户时，您最好使用“keepalive”机制而不是“say goodbye”机制。然后，您可以在服务器上注销那些`cron`会话未处于活动状态（即未发送“keepalive”）超过 X 分钟的用户（例如使用 ）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-18T16:12:19.167

不仅仅是 PHP。

PHP 在服务器端运行，并且在用户有机会关闭浏览器时已经完成了对页面的处理。您可以从技术上检测 PHP 是否仍在处理页面并且用户使用特定配置关闭它。然而，这并不理想。见[`connection_aborted()`](http://www.php.net/manual/en/function.connection-aborted.php)。

您需要做的是使用 JavaScript 建立一个长轮询连接，并在服务器端对其进行监控。然后，您将了解该窗口何时关闭。该连接可以与您的 PHP 脚本建立，允许 PHP 检查`connection_aborted()`. 请注意，您需要为此进行设置[`ignore_user_abort()`](http://www.php.net/manual/en/function.ignore-user-abort.php)，或相应地配置 PHP.ini。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-01T11:45:50.463

一种至少防傻的解决方案是使用 Javascript 和 Ajax 向服务器发送心跳，然后假设当信号停止脉冲时浏览器窗口已关闭。

另一种方法是使用 Web 套接字来保持持续连接，直到浏览器窗口关闭。

无论如何，设置它需要你做很多工作

# java - Eclipse 中导入的项目没有运行，说 - “编辑器不包含主要类型。”

> ID：10849563
> 
> 赞同：1
> 
> 时间：2012-06-01T11:39:34.637
> 
> 标签：java, eclipse, ubuntu

我将一些 Java 项目从 Windows PC 转移到 Ubuntu，方法是“通过归档文件存储”（即 zip 文件）导出它，然后用相同的方法导入。

当我将它导入回 Eclipse 时，它​​说我需要先创建一个空白项目才能从存档文件中导入。所以我创建了一个新的虚拟 java 项目并将其导入。但是现在当我编译时，它不允许我说“编辑器不包含主要类型”。

由于我太新，无法在此处附上屏幕截图，因此我将其上传[HERE](http://s13.postimage.org/k81ncwbxy/Screenshot_from_2012_06_01_16_57_20.jpg)。现在我该怎么做？

编辑：我要编译的程序是一个简单的程序，演示了不同类型的排序。如果你觉得你应该看到它，这里是：

```
import java.io.PrintStream;
import java.util.LinkedList;
import java.util.Queue;

public class Sorting
{
    public static void print_r(char[] arr)
    {
        for(int i=0;i<arr.length;i++)
            System.out.print(arr[i]);
        System.out.println("\n-----");
    }

    public static void print_r_int(int[] arr)
    {
        for(int i=0;i<arr.length;i++)
            System.out.println(arr[i]);

        System.out.println("\n-----");
    }

    public static void main(String sar[])
    {
        String st=new String("jsahen");
        PrintStream oo=System.out;

        /*char ar1[]=st.toCharArray();
        mergeSort(ar1,0,ar1.length-1);
        print_r(ar1);*/

        /*char ar2[]=st.toCharArray();
        quickSort(ar2,0,ar2.length-1);
        print_r(ar2);*/

        /*char ar3[]=st.toCharArray();
        insertionSort(ar3);
        print_r(ar3);*/

        int ar3[]={215,64,25,3,541,584,68,14,69};
        recursiveRadixLSD(ar3,1);
        print_r_int(ar3);
    }

    public static void recursiveRadixLSD(int[] str,int digitFromRight)
    {
        if(digitFromRight==4)
            return;
        LinkedList<Integer>[] q=new LinkedList[10];

        for(int i:str)
        {
            int t=i/(int)(Math.pow(10, digitFromRight-1));
            int rem=t%10;
            if(q[rem]==null)
                q[rem]=new LinkedList<Integer>();
            q[rem].add(i);
        }

        int c=0;
        for(int i=0;i<10;i++)
        {
            while(q[i]!=null&&!q[i].isEmpty())
                str[c++]=q[i].remove();
        }

        recursiveRadixLSD(str,digitFromRight+1);
    }

    public static void insertionSort(char[] str)
    {
        if(!(str.length>1))
            return;

        else
        {
            int wall;

            for(wall=1;wall<=str.length-1;wall++)
            {
                char t=str[wall];
                int ind=wall;

                while(ind>=1&&str[ind-1]>t)
                {
                    str[ind]=str[ind-1];
                    ind--;
                }
                str[ind]=t;

            }

        }

    }

    public static void quickSort (char[] str,int st,int en)
    {
        if(st>=en)
            return;

        int j=partition(str,st,en);
        quickSort(str,st,j-1);
        quickSort(str,j+1,en);
    }
    public static int partition (char[] str,int st,int en)
    {
        if(st==en)
            return 0;
        char a=str[st];
        int left=st;
        int right=en;

        boolean go=true;

        while(go)
        {
            while(left<=en&&str[left]<=a)
                left++;

            while(right>=st&&str[right]>a)
                right--;

            if(left<right)
            {
                char t=str[left];
                str[left]=str[right];
                str[right]=t;
            }
            else
            {
                str[st]=str[right];
                str[right]=a;
                return right;
            }
        }

        return -1;
    }
    public static void mergeSort (char[] str,int st,int en)
    {
        if(st==en)
            return;
        int mid=(st+en)/2;
        char ret[]=new char[str.length];
        mergeSort(str,st,mid);
        mergeSort(str,mid+1,en);

        int i,j;
        int k=0;
        for(i=st,j=mid+1;i<=mid&&j<=en;)
        {
            if(str[i]>str[j])
            {
                ret[k++]=str[j++];
            }
            else
            {
                ret[k++]=str[i++];
            }
        }

        while(i<=mid)
            ret[k++]=str[i++];

        while(j<=en)
            ret[k++]=str[j++];

        for(int l=st;l<=en;l++)
            str[l]=ret[l-st];

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:44:58.993

您的文件夹`Scratch/src`未被 Eclipse 识别（配置）为源文件夹。您将源文件移动到`src`或添加`Scratch/src`为源文件夹。右键单击项目-> 属性，`Java Build Path`从右侧选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:50:14.273

1.  打开java类进行编辑
2.  右键单击编辑器窗口中的任意位置（源文本所在的位置）
3.  选择`Run as > Java Application`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-22T08:12:49.930

检查构建路径后，这仍然发生在我身上。因此，我在“运行配置”对话框中手动输入了主类并且它起作用了。

# c# - AttributeRouting 中的路由歧义

> ID：10849569
> 
> 赞同：1
> 
> 时间：2012-06-01T11:39:55.800
> 
> 标签：c#, asp.net-mvc-3, attributerouting

我正在尝试在两种不同的操作方法上创建两条不同的路线，如下所示：

```
[GET("/project/create")]
public ActionResult Create()

[GET("/project/{projectId}")]
public ActionResult Details(int projectId) 
```

问题是当我导航到 /project/create 时，我被路由到 Details 页面，该页面失败，因为 projectId 不是 int。

我意识到我可以将 Details 路由更改为类似的东西，`/project/{projectId}/details`但我希望它以另一种方式工作。

另外一个解决方案可能是将 projectId 设为一个字符串，并在 projectId == "create" 的情况下在内部重定向到 Create 操作，但这会让人感觉很糟糕。

我为此使用[AttributeRouting 。](https://github.com/mccalltd/AttributeRouting)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T11:46:08.113

如果您使用的是 v2.2 或更高版本的属性路由，您可以简单地在项目 id 上指定一个[约束：](https://github.com/mccalltd/AttributeRouting/wiki/Route-Constraints)

```
[GET("/project/{projectId:int}")] 
```

如果在 v2.2 之前，您可以使用正则表达式来达到同样的效果：

```
[GET("/project/{projectId(^[\\d]+$)}")] 
```

然而，在更一般的情况下，您可以通过设置属性的属性来指定控制器中路由的[优先级：](https://github.com/mccalltd/AttributeRouting/wiki/Route-Precedence-Within-a-Controller)`Precedence`

```
[GET("/project/create", Precedence = 1)]
public ActionResult Create()

[GET("/project/{projectId}", Precedence = 2)]
public ActionResult Details(int projectId) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T16:55:52.717

动作的顺序应该自动设置优先级。因此，如果您的 Create 操作在 Details 之前，那么您应该没有问题。Precedence 属性最初是为了帮助具有部分类的用户而开发的，每个类中都有路线。

如果您无法适当地订购路线，或者需要进一步控制，那么 Rich 的回答有很好的提示。

# java - Netty sendBufferSize receiveBufferSize 引导选项

> ID：10849571
> 
> 赞同：1
> 
> 时间：2012-06-01T11:40:00.760
> 
> 标签：java, netty

您能否解释一下与引导程序一起使用的 sendBufferSize receiveBufferSize 选项背后的想法：

```
bootstrap.setOption("sendBufferSize", 1048576); 
bootstrap.setOption("receiveBufferSize", 1048576); 
```

我注意到在客户端之间传输大容量数据时，它们可以提高以下代码的性能：

```
// encode method in OneToOneEncoder subclass -> 1st client
ChannelBuffer buffer = ChannelBuffers.buffer(capacity);
buffer.writeInt(myData);

// decode method in FrameDecoder subclass -> 2nd client
int myData = buffer.readInt(); 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T14:47:01.543

这些选项指定 Channel 的底层 Java [Socket](http://docs.oracle.com/javase/6/docs/api/index.html?java/net/Socket.html)实例的缓冲区大小。[在What are SO_SNDBUF 和 SO_RECVBUF](https://stackoverflow.com/questions/4257410/what-are-so-sndbuf-and-so-recvbuf)中有一个很好的总结。

# ajax - 如果在类中定义了 $.ajax 方法，如何使用 ajaxStart？

> ID：10849574
> 
> 赞同：0
> 
> 时间：2012-06-01T11:40:09.747
> 
> 标签：ajax, jquery

我在我的 js 文件的一个类中创建了 ajax 方法。下面附上供参考

```
var ajaxcall =
{
    SitePath: '',
    data: '',
    url: '',
    callbackfunction: '',
    fileElementId: '',
    AjaxRequest: false,
    callback: true,
    async: false,
    folder: '',
    filename: '',
    Call: function () {
        if (ajaxcall.AjaxRequest == true) {
            alert(ajaxcall.AjaxRequest);
            return;
        }
        else {
            try {
                ajaxcall.AjaxRequest == true;
                alert('b');
                $.ajax({
                    type: "POST",
                    url: ajaxcall.url,
                    data: ajaxcall.data,
                    contentType: "application/json; Characterset=utf-8",
                    dataType: "json",
                    async: false,
                    success: function (data) {
                        if (ajaxcall.callback == true) {
                            ajaxcall.callbackfunction(data);
                        }
                    },
                    error: function (request, status, error) {
                        //alert("Exception Handling :  \n" + request.responseText);
                        alert('Unable to process the request at this moment! Please try again later.');
                    },
                    complete: function () {
                        ajaxcall.AjaxRequest = false;
                    }
                });
            }
            catch (e) {
                ajaxcall.AjaxRequest == false;
                // alert("Error Catch : " + e.Description + '\n' + 'Message: ' + e.Message);
            }
        }
    },
    AjaxFileUpload: function () {
        $.ajaxFileUpload({
            type: "POST",
            url: "../GenericHandlers/FileUploader.ashx?path=" + ajaxcall.folder,
            dataType: 'json',
            async: false,
            secureuri: false,
            fileElementClass: ajaxcall.fileElementClass,
            success: function (data) {
                var data = data.toString();
                ajaxcall.filename = data.substring(6, data.length - 7);
                alert(ajaxcall.filename);
                return true;
            }
        });
    }
}; 
```

现在我想在 ajax 调用开始时显示一个 div 并在完成后隐藏。所以为此我使用了

```
$(document).ready(function(
    $('#Loading').ajaxStart(function () {
         alert('a');
         $('#Loading').show();
    }).ajaxStop(function () {
         $('#Loading').hide();
    });
}); 
```

但是当我调用 ajax 方法（上面在类中定义）时，控制首先进入 ajax 方法，然后进入 ajaxStart。

我不知道为什么会这样。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:05:56.663

对这些使用推荐的全局：

```
$.ajaxStart(function() {
    $("#Loading").show();
});
$.ajaxComplete(function() {
    $("#Loading").hide();
}); 
```

尝试以这种方式附加到您的 Loading id 元素：

```
$("#Loading").ajaxStart(function() {
    $(this).show();
});
$("#Loading").ajaxComplete(function() {
    $(this).hide();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:44:45.313

AjaxStart 在 http 请求开始时调用，而不是在 ajax 方法执行时调用。

# symfony - Symfony2 Doctrine2 - 如何将实体（未从数据库中获取）转换为数组

> ID：10849575
> 
> 赞同：1
> 
> 时间：2012-06-01T11:40:10.033
> 
> 标签：symfony, doctrine-orm

我有来自表单框架的实体。

```
 public function editAction($id)
    {
        $request = $this->getRequest();
        $r = $this->getProfileRepository();
        $profile = $id ? $r->find($id) : 
            new \Alden\BonBundle\Entity\Profile();
        /* @var $profile \Alden\BonBundle\Entity\Profile */
        $form = $this->createForm(
            new \Alden\BonBundle\Form\Type\ProfileType(), 
            $profile);
        if ($request->getMethod() == 'POST')
        {
            $form->bindRequest($request);
            if ($form->isValid())
            {
            ... 
```

我需要转换`$profile`成数组。在类`Profile`中，所有属性都定义为私有的，所以我不能像这样迭代`foreach($profile as $key => $value) {...}`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T11:50:00.060

您可以使用反射来检索类属性。然后，使用 PropertyPath 检索属性值。

这是一个例子：

```
$reflectedClass = new \ReflectionClass($yourClass);
$objectProperties = $reflectedClass->getProperties();
$datas = array();
foreach ($objectProperties as $objectProperty) {
    $property = $objectProperty->getName();

    $path = new PropertyPath($property);
    $datas[] = $path->getValue($object);
} 
```

但是，如果您的表单/实体很简单，您可以在实体中创建一个专用方法来返回正确的数组。

# mysql - Mysql子查询优化——count

> ID：10849576
> 
> 赞同：0
> 
> 时间：2012-06-01T11:40:29.993
> 
> 标签：mysql, optimization, join, query-optimization, subquery

我在用于获取一些事件的主查询中有这些子查询：

```
SELECT [...],
(SELECT COUNT(*) FROM WEventUser WHERE WEventUser.eID=e.eID AND favorited=1) as numfavorited,
(SELECT COUNT(*) FROM WEventUser WHERE WEventUser.eID=e.eID AND subscribed=1) as numsubscribed,
(SELECT COUNT(*) FROM WEventUser WHERE eID=e.eID AND WEventUser.uID=2 AND favorited=1) as favorited,
(SELECT COUNT(*) FROM WEventUser WHERE eID=e.eID AND WEventUser.uID=2 AND subscribed=1) as subscribed,
[...] WHERE...etc. 
```

WEventUser 的结构非常简单

```
CREATE TABLE IF NOT EXISTS `WEventUser` (
  `eID` int(10) unsigned NOT NULL auto_increment,
  `uID` int(10) unsigned NOT NULL,
  `favorited` int(1) unsigned default '0',
  `subscribed` int(1) unsigned default '0',
  PRIMARY KEY  (`eID`,`uID`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8; 
```

这些子查询非常昂贵。你能帮我找到一个替代方案（比如一个单一的连接）吗？

提前致谢！

编辑：我从一个主 WEvents 表中选择：

```
CREATE TABLE IF NOT EXISTS `wevents` (
`eID` int(10) unsigned NOT NULL AUTO_INCREMENT,
 `uID` int(10) unsigned DEFAULT NULL,
 `ecID` int(10) unsigned NOT NULL,
 `eName` varchar(64) NOT NULL,
 `eDescription` longtext,
 `eIsActive` varchar(1) NOT NULL DEFAULT '0',
 `eIsValidated` tinyint(4) NOT NULL DEFAULT '-1',
 `eDateAdded` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
 `eDateModified` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
 PRIMARY KEY (`eID`,`ecID`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:53:20.053

您不应该使用子查询，在 COUNT 函数中计算值就足够了，例如 -

```
SELECT [...],
COUNT(IF(wu.favorited = 1, 1, NULL)) as numfavorited,
COUNT(IF(wu.subscribed = 1, 1, NULL)) as numsubscribed,
COUNT(IF(wu.uID=2 AND wu.favorited=1, 1, NULL)) as favorited,
COUNT(IF(wu.uID=2 AND wu.favorited = 1, 1, NULL)) as subscribed,
[...]
FROM
  WEventUser wu
WHERE...etc. 
```

如果您想加入`WEventUser`另一张桌子，您可以轻松地使用这个。

# ios - iOS 5.1.1 Popover 不会自动关闭

> ID：10849578
> 
> 赞同：1
> 
> 时间：2012-06-01T11:40:32.537
> 
> 标签：ios, ipad, viewcontroller, popover

我的应用程序在旧操作系统上运行良好，但在 5.1.1（在 iPad2 和新 iPad 上测试）弹出窗口出现，运行良好但当用户在弹出窗口外点击时不会关闭。我不使用任何解雇代码或按钮。我使用 iOS 5.0 SDK、XCode 4.2 来编译应用程序。这就是我展示它的方式。有什么想法可能是错的吗？

```
- (void)showNotifications {

    NotificationsViewController *vc = [[[NotificationsViewController alloc] init] autorelease];
    vc.modalTransitionStyle = UIModalTransitionStyleCoverVertical;

    if ([UIApplication isIPad]) {

        vc.modalInPopover = YES;
        self.popoverController = [[[UIPopoverController alloc] initWithContentViewController:vc] autorelease];

        [self.popoverController presentPopoverFromRect:bottomView.frame inView:[bottomView superview] permittedArrowDirections:UIPopoverArrowDirectionDown animated:YES];

    }
    else
        [self presentModalViewController:vc animated:YES];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T16:00:42.253

谜团已揭开。刚刚注释掉了这一行

```
//vc.modalInPopover = YES; must be no on iOS 5 
```

ModalInPopover 在 iOS 5 上必须为 false。但不知道它是否仍然适用于 iOS 4。

# javascript - 从 javascript 中禁用 SelectOneMenu

> ID：10849583
> 
> 赞同：0
> 
> 时间：2012-06-01T11:40:57.100
> 
> 标签：javascript, jsf

我正在使用 JSF-primeface 和 javascript。

这是javascript的代码。

```
<script>
var $element = $("select['se:type5'] option:selected").val();

alert($element);

var input = document.getElementById('se:search');
var combo = document.getElementById('se:type1');

if($element == 1)
{
    input.disabled = false; 
    combo.disabled = true;
}
else if($element == 2)
{
    input.disabled = true; 
    combo.disabled = false;
}
</script> 
```

我可以使用上面的代码禁用输入框，但 onemenu 不受影响。

这是我的 JSF 代码

```
 <p:selectOneMenu id="type5"  effect="fold" onchange="disabled();" 
                               required="true" 
                               label="Type5"  styleClass="select-option" style="border:1px solid #b5b5b5; padding-left:5px; margin-top:5px;width:298px;height:25px;" >

        <f:selectItem itemLabel="Search By Skill" itemValue="1" />  
        <f:selectItem itemLabel="Search By Location" itemValue="2" />  

              </p:selectOneMenu> 
       <p:inputText value="#{user.latitude}" id="latitude" style="visibility: hidden" />
  <h:panelGrid columns="4">

      <p:inputText id="search" styleClass="inner-page-input-type"

         onfocus="if(this.value=='Job title, Skills, Company, etc.') this.value='';" 
 onblur="if(this.value=='') this.value='Job title, Skills, Company, etc.';" type="text"  
 value="#{user.skill}"   >  

        </p:inputText>  

      <p:selectOneMenu id="type1" value="#{user.geoLocationLatitude}" effect="fold" 
                               required="true" 
                               label="Type1"  styleClass="select-option" style="border:1px solid #b5b5b5; padding-left:5px; margin-top:5px;width:298px;height:25px;" >

        <f:selectItem itemLabel="---km---" itemValue="1" />  
        <f:selectItem itemLabel="Under 150km" itemValue="150" />  
        <f:selectItem itemLabel="Between 150km - 300km" itemValue="300" />  
        <f:selectItem itemLabel="Between 300km - 450km" itemValue="450" />  
        <f:selectItem itemLabel="Between 450km - 600km" itemValue="599" /> 
        <f:selectItem itemLabel="Above 600km" itemValue="600" /> 

              </p:selectOneMenu> 
```

```
 </h:form> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T12:16:15.343

JavaScript对 JSF 代码*一无所知。*相反，它知道有关其生成的 HTML 输出的所有信息。在浏览器中通过右键单击页面查看生成的 HTML 输出并*查看源代码*。如果仔细观察，您会发现`<p:selectOneMenu>`不会生成 a `<select><option>`，而是生成`<div><ul><li>`. 该`disabled`属性仅在 上受支持`<select>`。因此，您看不到任何效果。

我建议您通过 JSF ajax 而不是通过 JavaScript 禁用该功能。只需在下拉列表中添加`<f:ajax>`or`<p:ajax>`并指定需要更新的组件的 ID，其中`disabled`根据当前选定的项目进行检查。不再需要 JavaScript 样板。这样，您还将利用服务器端验证的稳健性。

```
<p:selectOneMenu binding="#{searchType}" ...>
    <f:selectItem itemLabel="Search By Skill" itemValue="1" />  
    <f:selectItem itemLabel="Search By Location" itemValue="2" />  
    <p:ajax update="search type1" />
</p:selectOneMenu> 

<p:inputText id="search" ... disabled="#{searchType.value == 2}" />  

<p:selectOneMenu id="type1" ... disabled="#{searchType.value == 1}">
    ...
</p:selectOneMenu> 
```

* * *

顺便说一句，变量名“combo”是错误的。这是一个下拉菜单，而不是组合框。组合框是**可编辑**的下拉菜单。`<p:selectOneMenu>`不会呈现可编辑的下拉列表，而只是一个下拉列表。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-01T19:16:07.160

Going on what you said, try this instead:

```
var input = document.getElementById('search');
var combo = document.getElementById('type1'); 
```

# php - str_replace PHP 不起作用

> ID：10849586
> 
> 赞同：0
> 
> 时间：2012-06-01T11:41:11.390
> 
> 标签：php, str-replace

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:44:32.833

Perhaps database uses different encoding than your PHP file. Start with comparing those strings converted with `bin2hex()` function (in PHP).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:47:50.657

Second attempt:

There are a bunch of suggestions in the PHP doc's comments. Try these:

1.  [http://www.php.net/manual/es/function.str-replace.php#106653](http://www.php.net/manual/es/function.str-replace.php#106653)
2.  [http://www.php.net/manual/es/function.str-replace.php#75566](http://www.php.net/manual/es/function.str-replace.php#75566)
3.  [http://www.php.net/manual/es/function.str-replace.php#72344](http://www.php.net/manual/es/function.str-replace.php#72344)

* * *

Try explicitly setting your page's chartype. Try placing this in the header:

```
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
```

Or, if you're using HTML 5:

```
<meta charset="utf-8"> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-01T11:47:46.240

I think since you have some weird characters they might go beyond ascii range and you might need to use multibyte string functions, though it does not have str_replace analogue, you might need to use multibyte regexes.

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-01T11:51:20.263

please take a look at this , it will tell you how to handle UTF characters in a web app

[UTF-8 in Web Apps](http://kunststube.net/frontback/)

# php - PHP UDP scraper 的速度非常慢，如何改进？

> ID：10849587
> 
> 赞同：0
> 
> 时间：2012-06-01T11:41:11.903
> 
> 标签：php, performance, sockets

我正在做我的一个小项目，并构建了一个 UDP 刮板，它使用套接字返回有关特定`sha1`哈希的数据。

它可以工作，但速度非常慢，想知道是否有人知道我可以如何加快速度或改进现有代码。

代码如下；

```
// SCRAPE UDP
private function scrapeUDP($tracker, $hash) {
    // GET TRACKER DETAILS
    preg_match('%udp://([^:/]*)(?::([0-9]*))?(?:/)?%i', $tracker, $info);
    // GENERATE TRANSACTION ID
    $transID = mt_rand(0, 65535);
    // PACKED TRANSACTION ID
    $packedTransID = pack('N', $transID);
    // ATTEMPT TO CREATE A SOCKET
    if(!$socket = @fsockopen('udp://' . $info[1], $info[2], $errno, $errstr, 2)) {
        return;
    }
    // SET STREAM TIMEOUT
    stream_set_timeout($socket, 2);
    // CONNECTION ID
    $connID = "\x00\x00\x04\x17\x27\x10\x19\x80";
    // BUILD CONNECTION REQUEST PACKET
    $packet = $connID . pack('N', 0) . $packedTransID;
    // SEND PACKET
    fwrite($socket, $packet);
    // CONNECTION RESPONSE
    $response = fread($socket, 16);
    // CHECK CONNECTION RESPONSE LENGTH
    if(strlen($response) < 16) {
        return;
    }
    // UNPACK CONNECTION RESPONSE
    $returnData = unpack('Naction/NtransID', $response);
    // CHECK CONNECTION RESPONSE DATA
    if($returnData['action'] != 0 || $returnData['transID'] != $transID) {
        return;
    }
    // GET CONNECTION ID
    $connID = substr($response, 8, 8);
    // BUILD SCRAPE PACKET
    $packet = $connID . pack('N', 2) . $packedTransID . $hash;
    // SEND SCRAPE PACKET
    fwrite($socket, $packet);
    // SCRAPE RESPONSE
    $response = fread($socket, 20);
    // CHECK SCRAPE RESPONSE LENGTH
    if(strlen($response) < 20) {
        return;
    }
    // UNPACK SCRAPE RESPONSE
    $returnData = unpack('Naction/NtransID', $response);
    // CHECK SCRAPE RESPONSE DATA
    if($returnData['action'] != 2 || $returnData['transID'] != $transID) {
        return;
    }
    // UNPACK SCRAPE INFORMATION
    $returnData = unpack('Nseeders/Ncompleted/Nleechers', substr($response, 8, 12));
    // RETURN TRACKER INFORMATION
    return array('seeders' => $returnData['seeders'], 'leechers' => $returnData['leechers'],);
} 
```

这是我第一次创建与套接字或 UDP 相关的任何东西，如果它是一团糟，请原谅我！

谢谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:46:18.463

您必须使用[socket_select()](http://php.net/manual/en/function.socket-select.php)和非阻塞套接字或[forks](http://php.net/manual/en/function.pcntl-fork.php)发出并行请求，因为您要花费大量时间等待响应。此外，最好使用 socket_read() 或类似的低级函数来更好地控制连接和数据传输。

# biopython - Entrez.efetch(db="Taxonomy", id=tax_id, retmode="xml") 返回空记录

> ID：10849590
> 
> 赞同：0
> 
> 时间：2012-06-01T11:41:53.090
> 
> 标签：biopython

以下代码返回一个空记录：

```
handle = Entrez.efetch(db="Taxonomy", id="158330", retmode="xml") #From biopython tutorial
records = Entrez.read(handle) #Record is empty 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T17:14:56.470

我刚刚尝试过同样的事情，返回记录不为空。

```
In [20]: handle = Entrez.efetch(db="Taxonomy", id="158330", retmode="xml")

In [21]: records = Entrez.read(handle)

In [22]: records
Out[22]: [{u'Lineage': 'cellular organisms; Eukaryota; Viridiplantae; Streptophyta; Streptophytina; Embryophyta; Tracheophyta; Euphyllophyta; Spermatophyta; Magnoliophyta; Liliopsida; Asparagales; Orchidaceae', u'Division': 'Plants', u'ParentTaxId': '4747', u'PubDate': '2001/04/25 19:02:00', u'LineageEx': [{u'ScientificName': 'cellular organisms', u'TaxId': '131567', u'Rank': 'no rank'}, {u'ScientificName': 'Eukaryota', u'TaxId': '2759', u'Rank': 'superkingdom'}, {u'ScientificName': 'Viridiplantae', u'TaxId': '33090', u'Rank': 'kingdom'}, {u'ScientificName': 'Streptophyta', u'TaxId': '35493', u'Rank': 'phylum'}, {u'ScientificName': 'Streptophytina', u'TaxId': '131221', u'Rank': 'no rank'}, {u'ScientificName': 'Embryophyta', u'TaxId': '3193', u'Rank': 'no rank'}, {u'ScientificName': 'Tracheophyta', u'TaxId': '58023', u'Rank': 'no rank'}, {u'ScientificName': 'Euphyllophyta', u'TaxId': '78536', u'Rank': 'no rank'}, {u'ScientificName': 'Spermatophyta', u'TaxId': '58024', u'Rank': 'no rank'}, {u'ScientificName': 'Magnoliophyta', u'TaxId': '3398', u'Rank': 'no rank'}, {u'ScientificName': 'Liliopsida', u'TaxId': '4447', u'Rank': 'class'}, {u'ScientificName': 'Asparagales', u'TaxId': '73496', u'Rank': 'order'}, {u'ScientificName': 'Orchidaceae', u'TaxId': '4747', u'Rank': 'family'}], u'CreateDate': '2001/04/24 16:31:00', u'TaxId': '158330', u'Rank': 'subfamily', u'GeneticCode': {u'GCId': '1', u'GCName': 'Standard'}, u'ScientificName': 'Cypripedioideae', u'MitoGeneticCode': {u'MGCId': '1', u'MGCName': 'Standard'}, u'UpdateDate': '2001/04/24 16:31:00'}] 
```

# lighttpd - lighttpd，stdin 处理并将 HTTP 请求转换为套接字连接/隧道

> ID：10849592
> 
> 赞同：1
> 
> 时间：2012-06-01T11:42:01.333
> 
> 标签：lighttpd, tunnel

在处理标准输入方面，我在使用 lighttpd 和 CGI​​ 脚本时遇到了一些问题。Lighttpd 似乎在客户端发出 GET 请求后立即关闭标准输入。以前，我可以使用 thttpd 允许 http 客户端连接到端口 80，然后透明地重定向到单独的内部端口。这让我可以用 Adob​​e Flash 和 XML 套接字做一些有趣的事情。我应该更多地解释这一点。客户端可以是任何东西，一个 Adob​​e 应用程序，一些移动应用程序，它发送 GET /redirect.cgi 到服务器，服务器的 Web 服务器然后将其交给 CGI，CGI 进程然后与该客户端建立一个套接字连接，通过该套接字连接它可以发送/接收任何它想要的东西。下面是一个使用 netcat 作为服务器的简单 CGI 示例：

（服务器只是 nc -l 9999 ）

```
test@test:/var/www/cgi-bin$ cat > redirect.cgi <<EOF ; chmod 0755 redirect.cgi
#!/bin/sh

echo -e "Content-type: text/html\r\n\r\n";`

nc 127.0.0.1 9999
EOF 
```

现在我们连接到 Web 服务器并向 cgi 发出 GET，然后在客户端和服务器上进行对话：

```
-- client test

nc 127.0.0.1 80
GET /cgi-bin/redirect.cgi HTTP/1.0
HOST: test.example.com

HTTP/1.0 200 OK
Content-type: text/html

server: this is the server speaking
client: this is is a test 
```

正如您在上面看到的，客户端的 GET 请求导致 thttpd 执行 redirect.cgi 并且 stdin 保持打开状态，从而允许我们继续向服务器发送数据，直到我们关闭客户端套接字。相比之下，使用 lighttpd，我看到：

```
GET /cgi-bin/redirect.cgi HTTP/1.0
HOST: test.example.com

HTTP/1.0 200 OK
Content-type: text/html
Connection: close
Date: Tue, 29 May 2012 11:35:37 GMT
Server: lighttpd/1.4.26 
```

使用 lighttpd，cgi 的标准输入会立即关闭。有没有办法可以将 lighttpd 配置为不同的行为？或者，是否有不同类型的请求（可能是 POST 或 CONNECT？）可用于实现所需的行为？我尝试了 POST，但似乎有一个固定的内容长度对我不起作用，CONNECT 的行为似乎与 GET / 相同。我需要 lighttpd 来保持 CGI 的标准输入打开，直到客户端关闭其套接字。欢迎大家提出意见。

我也尝试使用 mod_proxy。所以我做了：

```
$HTTP["host"] =~ "" {
        proxy.server = (
                "/testport" => (
                        "test" => (
                                 "host" => "127.0.0.1",
                                 "port" => 9999,
                         )
                )
        )
} 
```

我看到的是：

```
$ nc -C -l 9999
GET /testport HTTP/1.0
Host: www.example.com
X-Forwarded-For: 127.0.0.1
X-Host: www.example.com
X-Forwarded-Proto: http

server: saying hello
blah 
```

但是“服务器：打招呼”的东西永远不会回到客户端，所以这对我也不起作用。

# asp.net-mvc-3 - Form is not submitting

> ID：10849594
> 
> 赞同：0
> 
> 时间：2012-06-01T11:42:02.973
> 
> 标签：asp.net-mvc-3

My form (`Html.BeginForm`) was submitting well, i added some records over the period of one month using this form.

Then i did some cleanup (i don't remember those cleanups :( ) and tested the form after some time and now it is not submitting with a date value.

I mean, there are some date fields associated with master and child models, if child's date fields are filled (no matter parent's date is filled or not), the form does not get submitted and if these are empty then it does provided this is the first attempt i.e. if i attempt first with filled dates and then with empty dates, submitting does not work. I have two validation summaries with `excludePropertyErrors` `true` and `false`, no error is shown.

I had custom date format, `dd-MMM-yyyy`, and respective unobtrusive validator as `jQuery.validator.methods["date"]`. The behavior is same after removing these on both IE and Chrome.

However, a sample form submitting to the same controller's action on the same view with a sample model depicting the same structure works fine !!!

How to troubleshooting this??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:46:04.227

Seems to me that the model binder is working correctly for your expected params, but that specific form is not passing in the values correctly (while your test form does).

These are the things your should try:

1.  Use the browser's built in network logger and see what your POST looks like
2.  Check the `cAsE` and `spellnig` of your variable names on the form (they should match your params/POCO on the action signature)

Hope this helps some.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T07:05:46.153

Thanks BiffBaffBoff for `compare the two`. I figured out the problem by enhancing the sample model, controller and view, adding fields and validations one by one and finally got the issue. It was my authorization action attribute which was missing on one of the Remote validation action for date, my controller requires authorization.

Thank you all who tried to help me out, without even looking at single line of code.

# ios - 基于拆分视图的 Ipad 应用程序：视图从 v5.0 更改为 v.51

> ID：10849601
> 
> 赞同：0
> 
> 时间：2012-06-01T11:42:18.010
> 
> 标签：ios, ipad

我正在为 Ipad 创建一个基于拆分视图的应用程序。我在我的应用程序中使用了以下代码在我的应用程序中获取拆分视图（http://blog.corywiles.com/creating-a-universal-ios-app-tutorial）。当我检查时，代码似乎显示了我在 Ipad v5.0 中预期的结果，就像一个下拉列表。但在 Ipad v5.1 中，相同代码的弹出视图发生了变化。

如何获得与 v5.0 Ipad 中相同的弹出视图 ..？

Ipad 5.0 截图： http: [//postimage.org/image/bre31nai9/](http://postimage.org/image/bre31nai9/)

Ipad 5.1 截图： http: [//postimage.org/image/7waoz2rch/](http://postimage.org/image/7waoz2rch/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T21:43:31.743

这是 Apple 在 iOS 5.1 SDK 中引入的更改。要获得旧的行为，要么以 iOS 5.0 SDK 为目标，要么（最好）使用 MGSplitViewController，它提供与旧的 UISplitViewController 类似的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-25T22:16:45.610

如果您仍在寻找一种使用拆分视图的 iOS 5.0 样式弹出框的方法，我只是花了最后几个小时寻找并想出了一个解决方案，将“结束”放回“弹出框”中。如果你需要它就在这里：[splitview poperver issues between ios5.0 and ios5.1](https://stackoverflow.com/questions/12123617/splitview-poperver-issues-between-ios5-0-and-ios5-1/12126029#12126029)

好起来。

# java - java中的SAX解析器问题

> ID：10849606
> 
> 赞同：0
> 
> 时间：2012-06-01T11:42:42.670
> 
> 标签：java, xml, sax

当使用 SOAP 请求调用 Web 服务时，会出现以下解析错误。我检查了请求的序言，它没有空格或破折号。即使它会导致以下错误

```
org.xml.sax.SAXParseException: Content is not allowed in prolog.
    at org.apache.xerces.util.ErrorHandlerWrapper.createSAXParseException(Un
  known Source)
    at org.apache.xerces.util.ErrorHandlerWrapper.fatalError(Unknown Source)

    at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)
    at org.apache.xerces.impl.XMLErrorReporter.reportError(Unknown Source)
    at org.apache.xerces.impl.XMLScanner.reportFatalError(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentScannerImpl$PrologDispatcher.dispat
ch(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Un
known Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
    at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)
    at org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Sour
ce)
    at org.apache.xerces.jaxp.SAXParserImpl.parse(Unknown Source)
    at javax.xml.parsers.SAXParser.parse(SAXParser.java:198)
    at requestModel.SimpleCheckMail.checkMail(SimpleCheckMail.java:162)
    at model.InboxDataBean.prepareList(InboxDataBean.java:97)
    at model.InboxDataBean.getemailList(InboxDataBean.java:207)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:87)
    at com.sun.faces.el.DemuxCompositeELResolver._getValue(DemuxCompositeELR
esolver.java:176)
    at com.sun.faces.el.DemuxCompositeELResolver.getValue(DemuxCompositeELRe
solver.java:203)
    at org.apache.el.parser.AstValue.getValue(AstValue.java:169)
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:1
89)
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpress
ion.java:109)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.
 java:194)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.
java:182)
    at javax.faces.component.UIData.getValue(UIData.java:731)
    at javax.faces.component.UIData.getDataModel(UIData.java:1798)
    at javax.faces.component.UIData.setRowIndexWithoutRowStatePreserved(UIDa
ta.java:484)
    at javax.faces.component.UIData.setRowIndex(UIData.java:473)
    at com.sun.faces.renderkit.html_basic.TableRenderer.encodeBegin(TableRen
 derer.java:81)
    at javax.faces.component.UIComponentBase.encodeBegin(UIComponentBase.jav
 a:820)
    at javax.faces.component.UIData.encodeBegin(UIData.java:1118)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1754)
    at javax.faces.render.Renderer.encodeChildren(Renderer.java:168)
    at javax.faces.component.UIComponentBase.encodeChildren(UIComponentBase.
java:845)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1756)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1759)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView
(FaceletViewHandlingStrategy.java:401)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewH
andler.java:131)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePha
se.java:121)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:410)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(Appl
icationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationF
ilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperV
alve.java:224)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextV
alve.java:169)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(Authentica
torBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.j
ava:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.j
 ava:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:
 927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineVal
ve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.jav
a:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp
 11Processor.java:987)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(
AbstractProtocol.java:579)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoin
t.java:1805)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExec
utor.java:885)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor
.java:907)
    at java.lang.Thread.run(Thread.java:619) 
```

请让我知道是什么问题......这个错误......谢谢提前

* * *

是的......你们都是对的......但我得到的是它是一个SOAP请求，我已经仔细看到了这个请求，没有坏字符......但问题是当我正在通过soap请求调用Web服务，它给出了null作为响应，所以我得到了错误......只要Webservice正常工作......现在工作正常......谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:46:14.360

这意味着在`<?xml ...`仔细查看之前，xml中有一些东西。还要检查没有不可见的字符（您可以在任何 HEX 编辑器中进行）。有时Windows记事本会在文件开头添加他的标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:45:39.837

解析器在实际 XML 本身启动之前查看字符数据。在 XML 启动之前确保您的 XML 不包含任何内容，或者让您的 SAX 解析器忽略它...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T11:51:20.450

尝试显示您实际解析的数据。也许在您的 xml 开头之前插入了一些坏字符，或者您没有读取正确的文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T12:29:45.167

这可能是因为[BOM](http://en.wikipedia.org/wiki/Byte_order_mark)，如果您的 XML 文件存储为`UTF-8`（它可能是）。

[在这里](https://stackoverflow.com/questions/1835430/byte-order-mark-screws-up-file-reading-in-java)，您有一个 InputStream 示例，它摆脱了 BOM。

# iphone - 如何在触摸后从视图中删除子层

> ID：10849607
> 
> 赞同：2
> 
> 时间：2012-06-01T11:42:47.733
> 
> 标签：iphone

我正在开发一个应用程序，其中我有一个层

layer1.frame=CGRectMake(80, 100, 180, 170);

如果用户触摸屏幕，则应通过动画将图层滑出窗口。

为此，我使用计时器进行动画处理，但我不知道在计时器函数中写什么

使其从窗口中删除（如刷出）...

请帮忙...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:53:47.063

在您的触摸事件中使用以下代码：

```
[UIView transitionWithView:mysuperview duration:0.75 options:UIViewAnimationTransitionFlipFromRight animations:^{ [yourLayer removeFromSuperlayer]; } completion:nil] 
```

# web-applications - 企业网站和webapp php框架和开发工具

> ID：10849609
> 
> 赞同：0
> 
> 时间：2012-06-01T11:43:09.770
> 
> 标签：web-applications, php

我会尽量具体以使问题更容易回答。我是一名网络/图形设计师，我基本上是在尝试向开发“跳跃”（现在我很了解 html/css，以及一些 javascript 和 php）。
我治了一个企业网站，是用Joomla搭建的，但是现在感觉还很局限，主要是僵化的输出布局结构。我必须实施的是：

*   强大的用户管理系统/acl来控制显示的内容（网站应该被代理用作webapp，并根据代理和登录显示/隐藏信息）。

*   灵活的布局：网站将响应并在桌面和移动设备中使用（应该看起来像原生应用程序）。另外，我需要将内容项关联起来才能将它们一起显示（即导航路径之一是：选择产品 A > 从列表中选择产品 A 的机器 > 登陆带有产品 A 信息的页面选择机器信息。）

*   多语言

*   新闻/事件博客类部分

*   可能有一些类似应用程序的功能：离线导航、自动登录。

*   可能进行用户分析以跟踪用户的行为（了解代理是否下载了资源）。[这看起来很难做到]

我知道没有框架可以快速完成这样的事情，尤其是对于新手（而且 php 不是唯一需要的工具）。我正在寻找的是一种可以实现此类功能的工具（或指南），以便我以正确的方式专注于自己。

我已经阅读了有关**Codeigniter、Zend Framework、CakePHP**的信息，但开发人员的观点对我的问题非常有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T15:00:01.977

如果您的网络/图形设计师希望创建交互式网络/移动应用程序，我会使用[Adob​​e CS6 Creative Suite](https://creative.adobe.com/)。

您可以使用 Dreamweaver 轻松[生成 jQuery Mobile 应用程序](http://tv.adobe.com/watch/cs-55-web-premium-feature-tour-/dreamweaver-cs-55-jquery-mobile/)。然后就可以轻松连接到内置的[PhoneGap 集成](http://tv.adobe.com/watch/cs6-creative-cloud-feature-tour-for-web/updated-phonegap-support-in-dreamweaver-cs6/)，并将您的应用程序转换为 IOS、BlackBerry、Android 等。

使用 Fireworks[自定义 jQuery Mobile](http://webdesign.tutsplus.com/tutorials/applications/new-in-fireworks-cs6-jquery-mobile-themes/)主题。

您还可以使用[Adob​​e Business Catalyst](http://tv.adobe.com/show/introducing-business-catalyst)添加用户管理、新闻和电子商务功能，而无需编写太多代码。

然后使用[Adob​​e Shadow](http://tv.adobe.com/watch/adobe-technology-sneaks-2012/adobe-shadow)在多台设备上进行测试。

您还可以使用提到的工具并将 Business Catlyst 切换到另一个后端系统，例如您提到的 Codeignite、Zend Framewor 或 CakePHP。

# sql-server - 子查询列名大小写错误导致结果不正确，但没有错误

> ID：10849612
> 
> 赞同：1
> 
> 时间：2012-06-01T11:43:15.213
> 
> 标签：sql-server, collation

使用 SQL Server Management Studio，我得到了一些不想要的结果（对我来说看起来像一个错误..？）

如果我使用（字段而不是 other_table 的字段）：

```
SELECT * FROM main_table WHERE field IN (SELECT FIELD FROM other_table) 
```

我从 main_table 得到所有结果。

使用正确的案例：

```
SELECT * FROM main_table WHERE field IN (SELECT field FROM other_table) 
```

我得到了其他字段出现的预期结果。

自行运行子查询：

```
SELECT FIELD FROM other_table 
```

我收到无效的列名错误。

当然我应该在第一种情况下得到这个错误？

这与整理有关吗？数据库是二进制排序规则。但是，服务器不区分大小写。在我看来，服务器组件在说“这段代码没问题”，并且不允许数据库说该字段是错误的名称..？

我的解决方案有哪些选择？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T12:17:26.307

让我们用不区分大小写的东西来说明正在发生的事情：

```
USE tempdb;
GO

CREATE TABLE dbo.main_table(column1 INT);

CREATE TABLE dbo.other_table(column2 INT);

INSERT dbo.main_table SELECT 1 UNION ALL SELECT 2;
INSERT dbo.other_table SELECT 1 UNION ALL SELECT 3;

SELECT column1 FROM dbo.main_table
WHERE column1 IN (SELECT column1 FROM dbo.other_table); 
```

结果：

```
column1
-------
1
2 
```

为什么这不会引发错误？SQL Server 正在查看您的查询，发现里面的 column1 不可能在 other_table 中，因此它正在推断和“使用”外部引用表中存在的 column1（就像您可以引用仅存在于没有表引用的外部表）。想想这个变化：

```
SELECT [column1] FROM dbo.main_table
WHERE EXISTS (SELECT [column1] FROM dbo.other_table WHERE [column2] = [column1]); 
```

结果：

```
column1
-------
1 
```

SQL Server 再次知道 where 子句中的 column1 在本地引用的表中也不存在，但它会尝试在外部范围内找到它。因此，在想象的世界中，您可能会认为查询实际上是在说：

```
SELECT m.[column1] FROM dbo.main_table AS m
WHERE EXISTS (SELECT m.[column1] FROM dbo.other_table AS o WHERE o.[column2] = m.[column1]); 
```

（这不是我输入的方式，但如果我这样输入，它仍然有效。）

在某些情况下它没有逻辑意义，但这是查询引擎的方式，并且必须一致地应用规则。在你的情况下（没有双关语），你有一个额外的复杂性：区分大小写。SQL Server 没有`FIELD`在您的子查询中找到它，但它确实在外部查询中找到了它。所以有几个教训：

1.  始终使用表名或别名作为列引用的[前缀（并始终在表引用前加上 schema](https://sqlblog.org/2009/10/11/bad-habits-to-kick-avoiding-the-schema-prefix)）。
2.  [始终使用一致的大小写](https://sqlblog.org/2011/07/12/t-sql-tuesday-20-t-sql-best-practices)创建和引用您的表、列和其他实体。*特别是*在使用二进制或区分大小写的排序规则时。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T11:54:20.480

非常有趣的发现。不言而喻的要求是，您始终应该为子查询中的表设置别名，并使用这些别名来明确说明您的列来自哪个表。子查询允许您从外部查询中引用一个字段，这是您的问题的原因，但在您的场景中，我同意默认值应该是内部查询的字段列表，或者给您一个列歧义错误。无论如何，下面的这种方法总是更可取的：

`select * from main_table a where a.field in (select x.field from other_table x)`

# wpf - WPF DataGrid 列忽略宽度

> ID：10849616
> 
> 赞同：3
> 
> 时间：2012-06-01T11:43:30.040
> 
> 标签：wpf, templates, datagrid, styles

我有 2 个数据网格。为了让它们漂亮，我对它们做了一些造型。我定义了 CellTemplate 和 HeaderTemplate 并将它们以隐式样式应用于 DataGrid。我在 XAML 中添加列并保留它们。他们也有 HeaderTemplates。

**编辑：** 我尝试了其他一些场景，所以这里有更多关于发生的事情：

DataGrid 'A' 工作正常。它完全从 XAML 启动。它接受各种宽度（包括星号）并正确显示。它被放置在具有 VM 的 UserControl 中。这是 XAML：

```
<DataGrid ItemsSource="{Binding Items}">
    <DataGrid.Columns>
        <DataGridTextColumn Binding="{Binding Name}" Header="Name" MinWidth="50" Width="250" HeaderTemplate="{StaticResource DefaultDataGridHeader}"/>
        <DataGridTextColumn Binding="{Binding StartDate}" Header="Start"  MinWidth="50" Width="150" HeaderTemplate="{StaticResource DefaultDataGridHeader}" />
        <DataGridTextColumn Binding="{Binding FinishDate}" Header="Finish"  MinWidth="50" Width="150" HeaderTemplate="{StaticResource DefaultDataGridHeader}" />
        <DataGridTextColumn Binding="{Binding Leader}" Header="Leader"  MinWidth="50" Width="*" HeaderTemplate="{StaticResource DefaultDataGridHeader}" />
    </DataGrid.Columns>
</DataGrid> 
```

然后是DataGrid B...

现在有点复杂了。有一个显示 DataGrid B 并执行其他操作的控件。它用于许多其他视图，具有不同的数据。因此，对于每个数据，都有另一个视图，其中包含 DataGrid 列。当数据到达主控件时，它会清除 DataGrid B 的列并用相应视图中定义的列重新填充它。

这是用户控件中的 DataGrid B：

```
<DataGrid x:Name="datagrid" ItemsSource="{Binding Items}" IsReadOnly="True"  SelectionMode="Single" /> 
```

UserControl 有一个 ObservableCollection `GridColumns`DependencyProp。这是实际的 DataGridColumns 到达的地方。所以在 CollectionChanged 事件中我这样做：

```
void GridColumnsCollectionChanged(object sender, NotifyCollectionChangedEventArgs e)
{
    datagrid.Columns.Clear();
    foreach (var gridColumn in GridColumns)
    {
        datagrid.Columns.Add(gridColumn);
    }
} 
```

这是我如何在数据特定视图中设置实际列的示例：

```
<c:GenericList >
    <c:GenericList.GridColumns>
            <DataGridTextColumn Binding="{Binding Name}" Header="Name" 
            Width="300" HeaderTemplate="{StaticResource DefaultDataGridHeader}"/>
    </c:GenericList.GridColumns>
</c:GenericList> 
```

-------- DataGrid B 会发生什么：--------

*   如果我像这样离开 XAML，则该列将以 300 像素的宽度呈现。
*   如果我将宽度更改为星形大小，或添加任何其他星形大小的列，它们会以 20px 宽度呈现。（即使标题中有一些文字）
*   如果我设置了 MinWidth，那么所有星形大小的列都使用 MinWidth 呈现。

*   如果我省略了整个“从另一个视图放置列”部分，并将一些列直接添加到数据网格，那么像素大小的列会跨越到标题文本的宽度，而星形大小的列以 20px 宽度呈现。此外，如果我在正在运行的应用程序中调整星型列的大小，则会出现一些宽度限制，我无法再使列变小。- 但在这个版本中，没有数据可以绑定到列。会不会造成这种影响？

**//编辑结束。**

样式是在 Blend 中使用“编辑副本”功能制作的。

他们是这样的：

```
<Style x:Key="DefaultDataGridColumnHeaderStyle" TargetType="{x:Type DataGridColumnHeader}">
    <Setter Property="VerticalContentAlignment" Value="Center"/>
    <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type DataGridColumnHeader}">
                <Grid >
                    <Microsoft_Windows_Themes:DataGridHeaderBorder BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" 
                                                                   IsClickable="{TemplateBinding CanUserSort}" IsPressed="{TemplateBinding IsPressed}" IsHovered="{TemplateBinding IsMouseOver}" 
                                                                   Padding="{TemplateBinding Padding}" SortDirection="{TemplateBinding SortDirection}" SeparatorBrush="{TemplateBinding SeparatorBrush}" 
                                                                   SeparatorVisibility="{TemplateBinding SeparatorVisibility}" Background="#00000000">
                        <Grid>
                            <ContentPresenter HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" 
                                              VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                            <Rectangle StrokeThickness="0" RadiusY="0" Opacity="0">
                                <Rectangle.Fill>
                                    <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                                        <GradientStop Color="#33000000" Offset="1"/>
                                        <GradientStop Color="#4CFFFFFF"/>
                                        <GradientStop Color="#007B7B7B" Offset="0.35"/>
                                    </LinearGradientBrush>
                                </Rectangle.Fill>
                            </Rectangle>
                        </Grid>
                    </Microsoft_Windows_Themes:DataGridHeaderBorder>
                    <Thumb x:Name="PART_LeftHeaderGripper" HorizontalAlignment="Left" Style="{StaticResource ColumnHeaderGripperStyle}" Width="8"/>
                    <Thumb x:Name="PART_RightHeaderGripper" HorizontalAlignment="Right" Style="{StaticResource ColumnHeaderGripperStyle}" Width="8"/>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<DataTemplate x:Key="DefaultDataGridHeader">
    <Border BorderBrush="{DynamicResource ShadowBrush}" Background="{x:Null}" d:DesignWidth="289" d:DesignHeight="72.28">
        <Grid>
            <Rectangle RadiusY="0" StrokeThickness="0" Fill="{DynamicResource ActionTileBrush}" />
            <Rectangle RadiusY="0" StrokeThickness="0" >
                <Rectangle.Fill>
                    <SolidColorBrush Color="#88FFFFFF" />
                </Rectangle.Fill>
            </Rectangle>
            <TextBlock Text="{Binding}" Margin="12" FontSize="16" FontWeight="Bold">
                <TextBlock.Foreground>
                    <SolidColorBrush Color="#FF11789D" />
                </TextBlock.Foreground>
            </TextBlock>
            <Rectangle RadiusY="0" StrokeThickness="1" Stroke="{DynamicResource ShadowBrush}"></Rectangle>
        </Grid>
    </Border>
</DataTemplate>

<Style x:Key="DefaultDataGridCellStyle" TargetType="{x:Type DataGridCell}">
    <Setter Property="Background" Value="Transparent"/>
    <Setter Property="BorderBrush" Value="Transparent"/>
    <Setter Property="BorderThickness" Value="1"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type DataGridCell}">
                <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" SnapsToDevicePixels="True" Padding="12,8">
                    <ContentPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                </Border>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Style.Triggers>
        <Trigger Property="IsSelected" Value="True">
            <Setter Property="Background" Value="{DynamicResource HighlightBrush}"/>
        </Trigger>
        <Trigger Property="IsKeyboardFocusWithin" Value="True">
            <Setter Property="BorderBrush" Value="{DynamicResource HighlightBrush}"/>
        </Trigger>
    </Style.Triggers>
</Style>

<Style x:Key="DefaultDataGridStyle" TargetType="{x:Type DataGrid}">
    <Setter Property="AlternatingRowBackground" Value="{x:Null}"/>
    <Setter Property="AlternationCount" Value="2"/>
    <Setter Property="AutoGenerateColumns" Value="False"/>
    <Setter Property="Background" Value="{x:Null}"/>
    <Setter Property="BorderBrush" Value="{DynamicResource ChromeBrush}"/>
    <Setter Property="BorderThickness" Value="1"/>
    <Setter Property="CellStyle" Value="{StaticResource DefaultDataGridCellStyle}"/>
    <Setter Property="ColumnHeaderStyle" Value="{StaticResource DefaultDataGridColumnHeaderStyle}"/>
    <Setter Property="Foreground" Value="{DynamicResource ForegroundBrush}"/>
    <Setter Property="HorizontalGridLinesBrush" Value="{DynamicResource ShadowBrush}"/>
    <Setter Property="RowBackground" Value="{DynamicResource BackgroundBrush}"/>
    <Setter Property="RowDetailsVisibilityMode" Value="VisibleWhenSelected"/>
    <Setter Property="ScrollViewer.CanContentScroll" Value="true"/>
    <Setter Property="ScrollViewer.PanningMode" Value="Both"/>
    <Setter Property="Stylus.IsFlicksEnabled" Value="True"/>
    <Setter Property="VerticalGridLinesBrush" Value="{DynamicResource ShadowBrush}"/>
    <Setter Property="VerticalContentAlignment" Value="Stretch"/>
    <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
    <Style.Triggers>
        <Trigger Property="IsGrouping" Value="true">
            <Setter Property="ScrollViewer.CanContentScroll" Value="false"/>
        </Trigger>
    </Style.Triggers>
</Style> 
```

显然某处有问题，我应该能够将列设置为星号大小，或者如果将它们设置为像素大小，我希望它们保持不变。

感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:40:22.527

希望空间在您的 xaml 中的第二个 DataGridTextColumn`Binding`和`Width`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-30T15:38:14.663

承载第二个数据网格的 UserControl 的 Horizo​​ntalAlignment 是否设置为 Stretch？我会尝试将 UserControl 的 Horizo​​ntalAlignment 设置为 Stretch - 也许这会限制 DataGrid 的大小。

# php - Python 的鼻子有基于 PHP 的实现吗？

> ID：10849619
> 
> 赞同：3
> 
> 时间：2012-06-01T11:43:41.297
> 
> 标签：php, python, unit-testing, phpunit, nose

我真的很欣赏 Python 的[鼻子实用程序](http://pypi.python.org/pypi/nose/)，它是一个测试框架扩展，可以监视您的源代码的更改，并在修改任何内容时运行单元测试。

我想知道 PHP / 作为 PHPUnit 扩展是否存在诸如此类的东西？我完全清楚，使用 watch 在 bash 中想出这种事情并不难，但我跨平台工作，理想情况下希望避免编写单独的实现。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T11:50:43.627

您可以为此使用[观察者](https://github.com/mynyml/watchr)。

*   [PHPUnit 观察者配置](https://github.com/proofek/watchr-phpunit)
*   [另一个 PHPUnit Watchr 配置](http://codesnippets.joyent.com/posts/show/14593)
*   [关于如何结合 Watchr、Growl 和 PHPUnit 的指南](http://criticallog.thornet.net/2011/03/08/autotesting-with-watchr-growl-and-phpunit/)

# css - 在单选按钮周围放置 CSS 边框

> ID：10849626
> 
> 赞同：16
> 
> 时间：2012-06-01T11:44:49.950
> 
> 标签：css

我试图在一些单选按钮周围设置一个花哨的红色边框，但它没有出现在 Firefox 最新版或 Chrome 最新版中。在 IE9/IE8 中运行良好。

我的表单上需要的每个输入元素都有一个由 MVC3 放入的 data-val-required 属性。当我们有文本或文本区域输入时，所有浏览器都会将红色边框放入花花公子中，但是却在单选按钮上苦苦挣扎。对于 IE，它可以工作，但其他浏览器不会在它周围加上红色边框。

CSS：

```
input[data-val-required], select[data-val-required], textarea[data-val-required]
{
    background-color: #F0FFFF;
    border: 1px solid red;
} 
```

查看源代码：

```
<label for="WaiveSelect">Do you waive confidentiality?</label><br />
<input data-val="true" data-val-number="The field WaiveSelect must be a number." data-val-required="Please select waive." id="WaiveSelect" name="WaiveSelect" type="radio" value="0" /> No, I do not waive confidentiality<br />
<input id="WaiveSelect_2" name="WaiveSelect" type="radio" value="2" /> Yes, I waive confidentiality<br />
<input id="WaiveSelect_3" name="WaiveSelect" type="radio" value="3" /> Yes, I waive confidentiality except to the client<br />
<span class="field-validation-valid" data-valmsg-for="WaiveSelect" data-valmsg-replace="true"></span> 
```

它在 IE 中的样子（Firefox 和 Chrome 没有边框）： ![在此处输入图像描述](../Images/262457a25198696104cd71fc48529dea.png)

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2013-01-17T21:13:21.707

```
input[type=radio]{
    outline: 1px solid red
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-05-05T10:39:30.593

我知道这已经四年了，但我想出了一个使用 CSS 伪元素的不错的解决方案。

我的要求是在验证中突出显示未选中的复选框或单选按钮。

```
<input type="radio" class="required" name="radio1"/>

/* Radio button and Checkbox .required needs an after to show */
input[type=radio].required::after, input[type=checkbox].required::after {
    display: block;
    width: 100%;
    height: 100%;
    background: transparent;
    content: '';
    border: 2px solid red !important;
    box-sizing: border-box;
}
/* Radio buttons are round, so add 100% border radius. */
input[type=radio].required::after {
     border-radius:100%;
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-01T11:55:12.727

您可以通过用 div 标签包装每个输入元素并给它一个边框和一个左浮动来完成......像这样：

```
<div style="border:1px solid red;float:left">
   <input type="radio".. />
</div>
No, I do not waive confidentiality 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-01T11:50:25.287

并非所有浏览器都支持单选按钮和复选框周围的边框。几年前我投票支持一个错误，将其包含在 Gecko 中，但到目前为止他们还没有实现它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-01T12:29:44.203

这可能会帮助您：

```
.style {
  border: 1px solid red;
  width: 20px;
  height: 20px;
  text-align: center;
  margin-top: 2px;
  background-color: #f0ffff;
}
```

```
<div class="style">
  <input type="radio" />
</div>
<div class="style">
  <input type="radio" />
</div>
<div class="style">
  <input type="radio" />
</div>
<div class="style">
  <input type="radio" />
</div>
```

[在 JSFiddle 上查看](http://jsfiddle.net/rp9HJ/1/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-04-04T07:06:14.623

使用jquery完成代码

[https://jsfiddle.net/xcb26Lzx/](https://jsfiddle.net/xcb26Lzx/)

```
$(function(){
      $('.layer').css('border',0);
    $('input:radio').change(
    function(){
        if ($(this).is(':checked')) {
            $('.layer').css('border','1px solid red');
        }
    });
}); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-15T00:28:50.767

尝试这个...

在输入周围放置一个 div 并为 div 分配一个类，如下所示：

```
<div class="custom"><input type="radio"></div> 
```

然后打开您的自定义 css 文件并添加此 CSS

```
.custom {border: 1px solid red; border-radius: 30px; padding: 3px 3px 0 3px; background: red;} 
```

这应该在单选按钮周围创建一个漂亮的红色边框。如果您使用复选框，您只需从 css 中删除border-radius: 30px。根据您可能需要稍微使用填充以使按钮居中，但这对我有用。

编辑：您还需要将以下 CSS 分配给 div 以便它正确排列。

```
.custom {display: inline;} 
```

[小提琴链接](https://jsfiddle.net/hr0u2dcz/10/)

# javascript - 是否有适用于 JavaScript 的 BCE / CE 日期库？

> ID：10849627
> 
> 赞同：7
> 
> 时间：2012-06-01T11:44:53.810
> 
> 标签：javascript, date

看起来[momentjs](http://momentjs.com/)是目前最新、最强大的 JavaScript 日期库，但它不处理古代日期（或数百万年前的日期）。

有什么可以做到的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-19T11:14:39.987

[Any+Time™ DatePicker/TimePicker AJAX Calendar Widget](http://www.ama3.com/anytime/)

# algorithm - 完美哈希构建

> ID：10849634
> 
> 赞同：-2
> 
> 时间：2012-06-01T11:45:14.937
> 
> 标签：algorithm, hash

我们为什么不使用 SHA-1、md5Sum 和其他标准加密哈希值进行哈希处理。它们足够聪明，可以避免碰撞，而且不可恢复。所以与其想出一组新的哈希函数，它可能会发生冲突，我们为什么不使用它们。我能想到的唯一原因是他们需要说大密钥，比如 32 位。但仍然避免冲突，所以查找肯定是 O(1)。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T12:17:01.797

1.  因为它们非常慢，有两个原因：
    1.  它们的目标是在密码学上是安全的，而不仅仅是一般的防碰撞
    2.  它们产生的哈希值比您在哈希表中实际需要的值大得多
2.  因为它们处理非结构化数据（八位字节/字节流），但您需要散列的对象通常是结构化的，并且首先需要线性化

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-05T02:09:25.280

> 我们为什么不使用 SHA-1、md5Sum 和其他标准加密哈希值进行哈希处理。他们足够聪明，可以避免碰撞......

错了，因为：

*   两个输入 cam 仍然碰巧具有相同的哈希值。假设散列值是 32 位，一个出色的通用散列例程（即不利用对一组实际键的洞察力）仍然有至少 1/2^32 的机会为任何 2 返回相同的散列值键，然后 2/2^32 与其中一个发生碰撞的机会，因为第三个键被散列，3/2^32 与第四个等发生冲突。
*   拥有不同的哈希值与将哈希值映射到哈希表中的不同哈希桶是完全不同的事情。散列值通常被修改为表大小以选择一个桶，所以充其量 - 并且再次用于通用散列 - 将元素添加到散列表时发生冲突的机会是#preexisting-elements / table-size。

> 所以与其想出一组新的哈希函数，它可能会发生冲突，我们为什么不使用它们。

因为在选择使用哈希表而不是二叉树时，速度通常是程序员的目标。如果哈希值在数学上计算起来很复杂，那么它们可能比使用更容易（但仍然不是特别）容易发生冲突但计算速度更快的哈希函数花费更长的时间。也就是说，有时在哈希上付出更多的努力可以获得回报——例如，当哈希表存在于磁盘上时，查找和读取记录的 I/O 成本使哈希计算工作相形见绌。

antti 对数据也提出了一个有趣的观点......通用哈希例程通常处理具有特定起始地址和字节数的二进制数据块（它们甚至可能要求字节数是 2 或 4 的倍数） . 在许多应用程序中，需要散列的数据将与不得包含在散列中的数据混合在一起 - 例如缓存值、文件句柄、指向其他数据或虚拟调度表的指针/引用等。一个常见的解决方案是单独散列所需字段并组合散列键 - 可能使用异或。由于可能有一些位字段应该在与其他不应该被散列的数据相同的内存字节中进行散列，因此您有时需要自定义代码来提取这些值。尽管如此，即使事先需要一些复制和填充，

> 我能想到的唯一原因是他们需要说大密钥，比如 32 位。

在所有其他条件相同的情况下，密钥越大越好，但如果哈希函数在数学上是理想的，那么它的任何 N 个位 - 其中 2^N >= # 个哈希桶 - 将产生最小的冲突。

> 但仍然避免碰撞，所以查找肯定是 O(1)。

再次，如上所述的错误。

（顺便说一句......我在上面的几个地方强调了通用性。那只是因为在一些微不足道的情况下，您可能对需要散列的键有一些了解，这使您可以将它们完美地定位在可用的散列桶中. 例如，如果您知道键是数字 1000、2000、3000 等直到 100000，并且您至少有 100 个哈希桶，您可以简单地将哈希函数定义为 x/1000，并且知道您将拥有完美的散列无冲突。知道所有键映射到不同的散列表桶的这种情况被称为“完美散列” - 根据您的问题标题 - 像 md5 这样的良好通用散列不是完美散列，实际上它使在不知道完整的可能键集的情况下谈论完美散列是没有意义的）。

# vb.net - 如何用谷歌浏览器打开一个网站

> ID：10849638
> 
> 赞同：4
> 
> 时间：2012-06-01T11:45:25.953
> 
> 标签：vb.net, internet-explorer, google-chrome

我正在制作一个桌面搜索应用程序。我需要一种将网络浏览器目标设置为 Google Chrome 的方法。即，如果有人单击我的应用程序中的按钮，它将打开带有网站而不是 Internet Explorer 的 Chrome。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-01T11:52:31.013

以 url 作为第一个 arg 运行 chrome exe

`chrome.exe xkcd.com`

所以像...

`Process.Start("pathToChrome\\chrome.exe", "xkcd.com")`

# android - 如何监控android中的浏览内容？

> ID：10849639
> 
> 赞同：3
> 
> 时间：2012-06-01T11:45:26.253
> 
> 标签：android, broadcastreceiver, broadcast, android-browser

作为企业安全的一部分，我需要限制默认的 android 浏览器来阻止某些网站。

我已经实现了一个后台服务，当用户打开浏览器时会通知我。

用户访问网站时如何获取网站URL或浏览内容？

如何监控它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-18T10:39:52.507

据我所知，无法从默认浏览器获取当前 URL。如果需要，您可以使用 android web view 实现自己的浏览器，并使用 web view 客户端，您可以通过覆盖来获取用户正在浏览的 URL

```
public boolean shouldOverrideUrlLoading(WebView view, String url) 
```

更多检查下面的链接

[获取浏览器中正在查看的当前页面（可能吗？）](https://stackoverflow.com/questions/4470434/get-the-current-page-being-viewed-in-the-browser-possible)

# javascript - 在 div 中打开 jquery UI 对话框

> ID：10849642
> 
> 赞同：0
> 
> 时间：2012-06-01T11:45:36.897
> 
> 标签：javascript, jquery

我有一个`div#test`，我用它绑定一个`dblclick event to opens a jquery ui dialog`，现在我想打开

那`dialog inside a floating div`( 表示一个 div 其位置是绝对的并放置在

屏幕中心）当`dblclick event triggers`打开`div#test`类似：

```
 line #1     $("#test").trigger("dblclick"); => open the dialog 

           line #2     $("floatingdiv").html("I want to open the dialog inside

                        this div after executing the line #1); 
```

帮我？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:11:40.213

先把`test`div 里面`floatingdiv`。

```
$("#test .ui-dialog-content").bind("dialogopen", function() {  
    // Reposition dialog, 'this' refers to the element the even occurred on.
    $(this).parent('div').css('position', 'relative');
}); 
```

# c# - 在返回 IEnumerable 的方法中使用 IDisposable 对象

> ID：10849643
> 
> 赞同：40
> 
> 时间：2012-06-01T11:45:39.433
> 
> 标签：c#, linq, resources

想象一下，您有一个内部使用 IDisposable 对象（例如流读取器）的方法，并且在从文件中读取项目时，yield 返回项目。像这样：

```
public IEnumerable<YourObject> Read(string filename)
{
    using(var filestream = new FileStream(filename, FileMode.Open))
    {
        using(var reader = new StreamReader(filestream))
        {
            string line;

            while((line = reader.ReadLine()) != null)
            {
                yield return new YourObject(line);
            }
        }
    }
} 
```

当我使用不迭代完整集合的 LINQ 方法时，`reader`和 会被处理吗？`filestream`

```
YourOjbect firstLine = Read("myfile.txt").First(); 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-01T12:08:02.997

当您使用`yield`关键字编译器生成嵌套类，它实现`IEnumerable`，`IEnumerator`并`IDisposable`存储所有上下文数据：

```
[CompilerGenerated]
private sealed class <Read>d__0 : IEnumerable<YourObject>, IEnumerable, IEnumerator<YourObject>, IEnumerator, IDisposable
{
    // Fields
    private int <>1__state;
    private YourObject <>2__current;
    public string <>3__filename;
    public Foo <>4__this;
    private int <>l__initialThreadId;
    public FileStream <filestream>5__1;
    public string <line>5__3;
    public StreamReader <reader>5__2;
    public string filename;

    // Methods
    [DebuggerHidden]
    public <Read>d__0(int <>1__state);
    private void <>m__Finally4();
    private void <>m__Finally5();
    private bool MoveNext();
    [DebuggerHidden]
    IEnumerator<YourObject> IEnumerable<YourObject>.GetEnumerator();
    [DebuggerHidden]
    IEnumerator IEnumerable.GetEnumerator();
    [DebuggerHidden]
    void IEnumerator.Reset();
    void IDisposable.Dispose();

    // Properties
    YourObject IEnumerator<YourObject>.Current { [DebuggerHidden] get; }
    object IEnumerator.Current { [DebuggerHidden] get; }
} 
```

如您所见， yield 方法上下文中的所有局部变量都被移动到这个生成的类的字段中。有趣的方法是那些`m_Finally`以它们的名字命名的方法：

```
private void <>m__Finally4()
{
    this.<>1__state = -1;
    if (this.<filestream>5__1 != null)
    {
        this.<filestream>5__1.Dispose();
    }
} 
```

如您所见，这些方法处理您的一次性对象（`FileStream`和`StreamReader`）。什么时候叫？在枚举结束时，或何时`Dispose`调用：

```
private bool MoveNext()
{
    bool CS$1$0000;
    try
    {
        int CS$4$0001 = this.<>1__state;
        if (CS$4$0001 != 0)
        {
            if (CS$4$0001 != 3)
            {
                goto Label_00AB;
            }
            goto Label_0074;
        }
        this.<>1__state = -1;
        this.<filestream>5__1 = new FileStream(this.filename, FileMode.Open);
        this.<>1__state = 1;
        this.<reader>5__2 = new StreamReader(this.<filestream>5__1);
        this.<>1__state = 2;
        while ((this.<line>5__3 = this.<reader>5__2.ReadLine()) != null)
        {
            this.<>2__current = new YourObject(this.<line>5__3);
            this.<>1__state = 3;
            return true;
        Label_0074:
            this.<>1__state = 2;
        }
        this.<>m__Finally5();
        this.<>m__Finally4();
    Label_00AB:
        CS$1$0000 = false;
    }
    fault
    {
        this.System.IDisposable.Dispose();
    }
    return CS$1$0000;
}

void IDisposable.Dispose()
{
    switch (this.<>1__state)
    {
        case 1:
        case 2:
        case 3:
            try
            {
                switch (this.<>1__state)
                {
                    case 2:
                    case 3:
                        break;

                    default:
                        break;
                }
                try
                {
                }
                finally
                {
                    this.<>m__Finally5();
                }
            }
            finally
            {
                this.<>m__Finally4();
            }
            break;
    }
} 
```

如果您查看 的`First()`实现`Enumerable`，那么您会看到 - 它`Dispose`在返回第一项后调用：

```
using (IEnumerator<TSource> enumerator = source.GetEnumerator())
{
   if (enumerator.MoveNext())
   {
       return enumerator.Current;
   }
} 
```

因此`Dispose`将调用自动生成的类，所有需要处理的局部变量将通过调用`m_Finally`方法来处理。

顺便说一句（不是关于 LINQ 的使用），如果您查看[foreach 语句实现](http://en.csharp-online.net/ECMA-334:_15.8.4_The_foreach_statement)，您会看到枚举器在枚举后被释放。因此，即使在出现异常`Dispose`的情况下也会调用生成的类。`break`

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-06-01T11:54:14.687

是的，它们被处理掉了。

[编辑] 只要您使用 LINQ 方法或 foreach 循环，就会自动处理处理。但是，如果您决定手动调用`.Enumerator().MoveNext()`该方法，那么您需要自己处理处置。[/编辑]

这段代码：

```
class something : IDisposable
{
    public void Dispose()
    {
        Console.WriteLine("Disposing");
        Console.WriteLine(Environment.StackTrace);
    }
}
static IEnumerable<string> ie()
{
    using (new something())
    {
        Console.WriteLine("first");
        yield return "first";
        Console.WriteLine("second");
        yield return "second";
    }
}
static void Main(string[] args)
{
    Console.WriteLine("before");
    ie().First();
    Console.WriteLine("after");
} 
```

印刷：

```
before
first
Disposing
   at System.Environment.GetStackTrace(Exception e, Boolean needFileInfo)
   at System.Environment.get_StackTrace()
   at TestApp.Program.something.Dispose() in C:\Users\Tim\Documents\Visual Studi
o 2010\Projects\TestApp\TestApp\Program.cs:line 198
   at TestApp.Program.<ie>d__0.<>m__Finally2() in C:\Users\Tim\Documents\Visual
Studio 2010\Projects\TestApp\TestApp\Program.cs:line 0
   at TestApp.Program.<ie>d__0.System.IDisposable.Dispose() in C:\Users\Tim\Docu
ments\Visual Studio 2010\Projects\TestApp\TestApp\Program.cs:line 0
   at System.Linq.Enumerable.First[TSource](IEnumerable`1 source)
   at TestApp.Program.Main(String[] args) in C:\Users\Tim\Documents\Visual Studi
o 2010\Projects\TestApp\TestApp\Program.cs:line 214
   at System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args
)
   at System.AppDomain.ExecuteAssembly(String assemblyFile, Evidence assemblySec
urity, String[] args)
   at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
   at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, C
ontextCallback callback, Object state, Boolean ignoreSyncCtx)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, C
ontextCallback callback, Object state)
   at System.Threading.ThreadHelper.ThreadStart()
after 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T12:01:52.497

这是一个一般的 LINQ 问题/问题，是的 - LINQ 将在执行时处理它获得的所有一次性元素。

# sql - 查询 MS ACCESS

> ID：10849653
> 
> 赞同：1
> 
> 时间：2012-06-01T11:46:21.693
> 
> 标签：sql, ms-access

我创建了一个看起来像这样的数据库：

桌子：

```
PATIENT ID      CONDITION      DOCTOR      DATE ADMITTED
PATIENT 1       CONDITION 1    DOCTOR 1    5/23/2011
PATIENT 2       CONDITION 1    DOCTOR 2    8/22/2011
PATIENT 3       CONDITION 2    DOCTOR 1    12/12/2010 
```

表 2：

```
PATIENT ID     CONDITION     DOCTOR      DATE CHANGED
PATIENT 1      CONDITION 4   DOCTOR 3    5/24/2011
PATIENT 1      CONDITION 3   DOCTOR 3    6/22/2011
PATIENT 2      CONDITION 1   DOCTOR 1    10/22/2011 
```

我想在特定日期获得病情和医生，这看起来像：（在特定日期有条件 x 的患者人数）

```
 DATE            5/1/2012    5/2/2012    5/3/2012
 ====================================================
 CONDITION 1       5            2           1
 CONDITION 2       2            1           2 
```

以及在某个日期出现状况 x 的患者人数（例如（3 名患者患有状况 1，但 1 名患者在 2012 年 5 月 1 日患有状况 1，因此它将产生 1 而不是 3）

顺便说一句，我正在 ms-access 上执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T18:47:21.180

在联合查询上创建交叉表。

```
SELECT Condition, Doctor, [Date Admitted]
FROM [Table]

UNION

SELECT Condition, Doctor, [Date Changed]
FROM Table2 
```

这将创建一个 3 列的表，而不考虑是否存在任何等式。如果要限制任何条件，则必须将该`WHERE`语句放在每个联合查询中，或者放在交叉表查询本身中

# ios - 多采样渲染到纹理

> ID：10849654
> 
> 赞同：1
> 
> 时间：2012-06-01T11:46:25.390
> 
> 标签：ios, opengl-es, textures, fbo, msaa

我正在使用以下架构：

*   iOS 上的 OpenGL ES 2
*   具有相同 ShareGroup 的两个 EAGL 上下文
*   两个线程（服务器，客户端=主线程）；服务器将内容渲染到纹理，客户端使用简单的纹理四边形显示纹理。

**服务器线程的附加细节（工作代码）**

在初始化期间创建一个 fbo：

```
void init(void) {
    glGenFramebuffer(1, &fbo);
} 
```

服务器的渲染循环大致如下：

```
GLuint loop(void) {
    glBindFrameBuffer(GL_FRAMEBUFFER, fbo);
    glViewport(0,0,width,height);

    GLuint tex;
    glGenTextures(1, &tex);
    glBindTexture(GL_TEXTURE_2D, tex);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, width, height, 0, GL_RGB, GL_UNSIGNED_BYTE, NULL);
    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, tex, 0);

    // Framebuffer completeness check omitted

    glClear(GL_COLOR_BUFFER_BIT);

    // actual drawing code omitted

    // the drawing code bound other textures, so..
    glBindTexture(GL_TEXTURE_2D, tex);
    glGenerateMipmap(GL_TEXTURE_2D);

    glBindTexture(GL_TEXTURE_2D, GL_NONE);
    glFlush();

    return tex;
} 
```

到目前为止，这一切都很好。

**新的（错误的）代码**

现在我想将多重采样添加到服务器线程，使用 GL_APPLE_framebuffer_multisample 扩展并修改初始化代码如下：

```
void init(void) {
    glGenFramebuffer(1, &resolve_fbo);
    glGenFramebuffers(1, &sample_fbo);
    glBindFramebuffer(GL_FRAMEBUFFER, sample_fbo);
    glGenRenderbuffers(1, &sample_colorRenderbuffer);
    glBindRenderbuffer(GL_RENDERBUFFER, sample_colorRenderbuffer);
    glRenderbufferStorageMultisampleAPPLE(GL_RENDERBUFFER, 4, GL_RGBA8_OES, width, height);
    glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, sample_colorRenderbuffer);

    // Framebuffer completeness check (sample_fbo) omitted

    glBindRenderbuffer(GL_RENDERBUFFER, GL_NONE);
    glBindFramebuffer(GL_FRAMEBUFFER, GL_NONE);
} 
```

主循环已更改为：

```
GLuint loop(void) {
    glBindFrameBuffer(GL_FRAMEBUFFER, sample_fbo);
    glViewport(0,0,width,height);

    GLuint tex;
    glGenTextures(1, &tex);
    glBindTexture(GL_TEXTURE_2D, tex);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR_MIPMAP_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);
    glTexImage2D(GL_TEXTURE_2D, 0, GL_RGB, width, height, 0, GL_RGB, GL_UNSIGNED_BYTE, NULL);

    glClear(GL_COLOR_BUFFER_BIT);

    // actual drawing code omitted

    glBindFramebuffer(GL_FRAMEBUFFER, resolve_fbo);
    glFramebufferTexture2D(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_TEXTURE_2D, tex, 0);

    // Framebuffer completeness check (resolve_fbo) omitted

    // resolve multisampling
    glBindFramebuffer(GL_DRAW_FRAMEBUFFER_APPLE, resolve_fbo);
    glBindFramebuffer(GL_READ_FRAMEBUFFER_APPLE, sample_fbo);
    glResolveMultisampleFramebufferAPPLE();

    // the drawing code bound other textures, so..
    glBindTexture(GL_TEXTURE_2D, tex);
    glGenerateMipmap(GL_TEXTURE_2D);

    glBindTexture(GL_TEXTURE_2D, GL_NONE);
    glFlush();

    return tex;
} 
```

我现在看到的是纹理包含来自多个 loop() 调用的数据，混合在一起。我想我要么错过了某种“解除绑定”，要么可能是一个`glFinish()`电话（我以前在不同的地方遇到过这样的问题，我设置了纹理数据`glTexImage2D()`并在之后使用它——这需要一个`glFinish()`调用来强制纹理要被更新）。

但是在绘图代码之后插入 a`glFinish()`并没有改变这里的任何内容..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:04:49.187

哦，没关系，这么愚蠢的错误。我省略了 loop() 方法实际上包含一个 for 循环并渲染多个纹理的细节，错误是我只在这个循环之前绑定了示例 fbo，所以在第一次运行之后，解析 fbo 被绑定..

在循环内移动 fbo 绑定解决了这个问题。

不管怎样，谢谢@所有的读者，很抱歉浪费你的时间:)

# c++ - 我应该使用什么来代替 std::ostrstream？

> ID：10849656
> 
> 赞同：10
> 
> 时间：2012-06-01T11:46:38.183
> 
> 标签：c++, stream, deprecated

我喜欢用来[`std::ostrstream`](http://en.cppreference.com/w/cpp/io/ostrstream)格式化文本，但不将其打印到标准输出，而是将其写入`std::string`（通过访问`std::ostrstream::str()`成员）。显然，现在已*弃用*。那么，我应该如何将格式化的对象写入字符串，并且与写入流时一样方便？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-01T11:48:18.510

你可以使用[`std::ostringstream`](http://en.cppreference.com/w/cpp/io/basic_ostringstream). 同样，`std::istrstream`您应该使用`std::istringstream`. 您需要包含`<sstream>`这些类的标题。

您还可以看到[这个问题](https://stackoverflow.com/questions/2820221/why-was-stdstrstream-deprecated)，它解释了为什么`strstream`不推荐使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T11:56:52.167

正如其他人已经说过的那样，`std::ostringstream`是替代品。

它比自动管理所有内存更方便（也更安全），`std::ostrstream`因此您无需调用`freeze(false)`以确保在完成后释放内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T11:48:44.570

你应该使用[`std::stringstream`](http://www.cplusplus.com/reference/iostream/stringstream/). 另请参阅[`boost::lexical_cast`](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_lexical_cast.html)。

`std::stringstream`支持`<<`和`>>`。 `std::ostringstream`只支持`<<`，也`std::istringstream`只支持`>>`。我经常发现能够同时使用这两个运算符很方便。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T11:52:07.057

您也可以使用[`boost::format`](http://www.boost.org/doc/libs/1_49_0/libs/format/). 然后您可以执行以下操作：

```
int a = 1;
std::string b("foo");
std::string s = boost::str(
    boost::format("some text, some vars=%1%, %2%, %1%") % a % b % a); 
```

然后`s`将包含`"some text, some vars=1, foo, 1"`.

在我看来，这在某些情况下比使用 operator 更方便`<<`。

作为参考，我还包括[格式规范](http://www.boost.org/doc/libs/1_49_0/libs/format/doc/format.html#printf_directives)。

# arrays - 我可以用python制作一个变量数组吗？

> ID：10849657
> 
> 赞同：0
> 
> 时间：2012-06-01T11:46:43.050
> 
> 标签：arrays, variables, python-2.7

我正在使用 Python 2.7 和 Gedit。我写了一个简单的程序来计算我的收入。现在我认为将变量存放在数组中会很有用，这可能吗？

```
# this is a test program

# my work week that I wish could hold the values of the following variables
workweek = ['sunday', 'monday', 'tuesday', 'wednesday', 'thursday', 'friday',        'saturday']

# The variables I would like to place in an array
sunday = 0
monday = 0
tuesday = 0
wednesday = 9
thursday = 9
friday = 9
saturday = 9

print sunday + monday + tuesday + wednesday + thursday + friday + saturday

# my wage for sunday through thursday
weekdaywage = 4.25

# my wage for friday and saturday
weekendwage = 3.25

# this is my wages on thursday...
print thursday * weekdaywage

# this is coming out as an error? What can I do as a workaround
# I did a googlesearch
# All I need is a link to learning material if you don't have time to explain
print workweek * weekdaywage 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:50:44.350

我想你需要一本字典？

```
workweek = {
    'sunday': 0
    'monday': 0
    'tuesday': 0
    'wednesday': 9
    'thursday': 9
    'friday': 9
    'saturday': 9   
} 
```

您可以使用以下方法检索变量的值：

```
workweek['monday'] 
```

这确实打乱了顺序，如果您希望保持时间顺序，请使用 OrderedDict

```
from collections import OrderedDict
p = OrderedDict([('monday', 1), ('tuesday', 0)]) 
```

# javascript - 如何将 textarea 中的长数据内容传递给 servlet？

> ID：10849658
> 
> 赞同：-1
> 
> 时间：2012-06-01T11:46:54.237
> 
> 标签：javascript, servlets

我在文本区域（字母、数字和其他字符）中有大量数据内容，允许长度为 4000。我将其内容传递`document.getElementByID('txtarea').value;`给另一个 servlet。我可以使用`request.getParameter("pname")`方法将大量数据内容获取到我的 servlet 吗？如果不是，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:49:40.443

是的你可以。

确保您的字段在表单元素下，您应该使用 `method=POST`.

# java - Apache POI：更改 CellType 会导致 IllegalStateException

> ID：10849659
> 
> 赞同：1
> 
> 时间：2012-06-01T11:46:55.983
> 
> 标签：java, apache-poi, illegalstateexception

为什么在 Apache POI 中更改单元格类型是非法的？下面的代码导致`IllegalStateException: Cannot get a error value from a numeric cell`.

```
Cell mycell = myrow.createCell(0);

// Make it numeric by default.
mycell.setCellType(Cell.CELL_TYPE_NUMERIC);

if (someCondition) {        
  mycell.setCellType(Cell.CELL_TYPE_STRING); // IllegalStateException
} 
```

有没有办法解决这个问题（如不引入额外的逻辑）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:01:58.483

我不确定这是否避免了你的“没有额外的逻辑”，但这里是：

```
Cell mycell = myrow.createCell(0);

// Make it numeric by default.
int cellType = Cell.CELL_TYPE_NUMERIC;

if (someCondition) {        
  cellType = Cell.CELL_TYPE_STRING;
}

mycell.setCellType(cellType); 
```

Javadoc 没有说明为什么它会抛出一个`IllegalStateException`，所以我会避免它（通过执行上述操作）或去挖掘源代码。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-04T08:03:07.133

修复。将流版本 ( `org.apache.poi.xssf.streaming.SXSSFWorkbook`) 替换为非流版本 ( ) 后`org.apache.poi.xssf.usermodel.XSSFWorkbook`，异常消失了。我对 XSSFWorkbook 没问题，因为我只用几行来填充 XLSX。

# google-app-engine - 将 App Engine 应用程序添加到 Google Apps 域时出现问题

> ID：10849660
> 
> 赞同：5
> 
> 时间：2012-06-01T11:47:00.163
> 
> 标签：google-app-engine

在过去的几个月里，我们一直在向我们的应用程序添加域，没有任何问题，遵循这些说明[https://developers.google.com/appengine/articles/domains](https://developers.google.com/appengine/articles/domains)

从昨天开始我们一直无法，当单击激活此服务时，我们收到此错误消息“尝试安装此应用程序时发生错误。请稍后再试。”

我们也尝试过使用较旧的域和不同的应用程序并得到相同的错误，因此问题似乎更普遍，而不是孤立于特定域/应用程序。

有谁知道如何解决？

谢谢罗恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-04T16:37:16.530

在 Google Apps 控制面板中，点击“域设置”，向下滚动到“新的管理控制面板功能”并选择“当前版本（多语言）”。

然后再次尝试在[https://www.google.com/a/cpanel/YOURSITE.TLD/SelectServices添加您的应用引擎 ID](https://www.google.com/a/cpanel/YOURSITE.TLD/SelectServices)

这对我有用。

另请参阅 [http://productforums.google.com/forum/#!category-topic/apps/control-panel/k2Ecis3paW4](http://productforums.google.com/forum/#!category-topic/apps/control-panel/k2Ecis3paW4)

# windows-phone-7 - 我无法在手机上部署我的应用

> ID：10849661
> 
> 赞同：3
> 
> 时间：2012-06-01T11:47:10.010
> 
> 标签：windows-phone-7, deployment

我昨天下午开始学习WP7，请耐心等待。
我刚刚创建了我的第一个测试应用程序，在[AppHub](http://create.msdn.com/en-US/)上注册为开发人员，将我的手机与 Zune 连接，在我的 AppHub 配置文件中注册了我的手机（我可以在我的设备部分看到它）并编译了我的应用程序。
当我尝试将我的应用程序转移到手机中（使用[此处](http://weblogs.asp.net/pabloperalta/archive/2011/02/24/how-to-deploy-and-test-a-windows-phone-7-application-into-the-phone.aspx)所述的应用程序部署工具）时，我收到一个错误，可以解释为无法连接到设备，因为它已被 pin 锁定

但是我的设备没有任何针脚（或者我不知道有针脚），并且它没有在屏幕上显示任何内容。
我可以/应该做什么？

**更新：**

*   Zune 正在运行：如果我尝试我得到错误
*   我关闭 Zune 并运行 WPConnect：我的设备已连接但错误相同

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T11:57:43.637

部署应用程序时，请确保手机屏幕已解锁。

附加信息：如果您是从台式电脑开发，有时从前 USB 面板连接将无法正常工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T11:57:33.740

屏幕锁定处于活动状态时无法部署，因此请尝试在部署前向上滑动锁定屏幕。

# php - PHP - if 语句中的颠倒顺序

> ID：10849667
> 
> 赞同：11
> 
> 时间：2012-06-01T11:47:26.537
> 
> 标签：php, zend-framework, coding-style

这是一个困扰我很长时间并且找不到任何答案的问题......注意到它被 Zend Framework 开发人员使用了很多，

以下2个“if”语句有什么区别？：

```
if (null === $this->user) { ... }

if ($this->user === null) { ... } 
```

对我来说，第一个看起来有点奇怪；]

感谢您的回答。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-01T11:52:17.040

这与您的脚本工作方式没有区别，它只是一个编码标准，一个建议

推荐这样使用的原因：

```
if (null == $this->user) 
```

事实是，如果你输入错误并写 = 而不是 == 你会得到一个错误，而

```
($this->user = null) 
```

代替

```
($this->user == null) 
```

有效但会导致奇怪的错误（赋值和最终值被评估为布尔而不是比较）

我猜它只是作为一种习惯扩展到严格的比较运算符（===）

**更新**：因为我发现即使在我发布答案 3 年后，该线程上仍有一些活动，所以我想我会添加一些我忘记提及的内容。这种类型的符号称为 ，例如`yoda conditions`，您可以在[此 wikipedia 页面](https://en.wikipedia.org/wiki/Yoda_conditions)上阅读更多相关信息。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-01T12:08:10.037

这是写`if`陈述的好习惯。考虑这段代码：

```
if (10 == $var) {
  echo 'true';
} else {
  echo 'false';
} 
```

如果您忘记了一个等号：

```
if (10 = $var) { } 
```

然后PHP会产生解析错误，所以你知道你错过了一个`=`，你可以修复它。但是这段代码：

```
if ($var = 10) { } 
```

将分配 10`$var`并始终评估为真条件。无论 的内容是什么`$var`，上面的代码总是会回显“true”，并且很难找到这个错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T11:53:01.760

这些被称为尤达条件。

这个想法是，如果您将值放在首位（例如 false、null、true 或任何简短的内容），则人们更容易扫描语句并快速理解条件的意图。

另外，米舒说的:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T11:50:17.440

比较值时顺序没有区别。

有人读或写这样的代码可能更容易，但对我来说这和从右到左写是一样的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-01T11:52:04.507

我认为这种元素的比较顺序是为了防止 if 语句中的意外分配。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-01T11:52:14.793

结果将是相同的，但是，第二个是合乎逻辑的。您想检查变量是否为 NULL，而不是 NULL 是否是变量...此处描述了相反的原因： [http ://umumble.com/blogs/Programming/321/](http://umumble.com/blogs/Programming/321/)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-06-01T11:55:42.657

如果你不小心写了：

```
if (null = $this->user) { ... } 
```

你会得到一个语法错误。

如果你不小心写了：

```
if ($this->user = null) { ... } 
```

您将长时间寻找应用程序异常行为的原因。

# php - 正则表达式：php的密码验证

> ID：10849669
> 
> 赞同：1
> 
> 时间：2012-06-01T11:47:37.403
> 
> 标签：php, regex

我正在对我的新项目进行一些密码验证。我有这些规则，我想使用 php preg_match() 函数在正则表达式模式上进行转换：

*   接受所有字符。
*   除了空格。
*   最少 4 个字符。
*   最多 20 个字符。

提前谢谢你！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T11:48:46.683

**试试这个**

```
(?s)^(\S{4,20})$ 
```

**解释**

```
"(?s)" +     // Match the remainder of the regex with the options: dot matches newline (s)
"^" +        // Assert position at the beginning of the string
"(" +        // Match the regular expression below and capture its match into backreference number 1
   "\\S" +       // Match a single character that is a “non-whitespace character”
      "{4,20}" +      // Between 4 and 20 times, as many times as possible, giving back as needed (greedy)
")" +
"$"          // Assert position at the end of the string (or before the line break at the end of the string, if any) 
```

# javascript - 将 jQuery Globalize 与 underscore.js 模板相结合？

> ID：10849670
> 
> 赞同：1
> 
> 时间：2012-06-01T11:47:37.420
> 
> 标签：javascript, templates, underscore.js, jquery-globalization

我正在使用下划线模板来创建一个 HTML 列表，该列表包含一个我想要全球化的日期字段。模板的简化如下所示：

```
<li>Date: <%= date %> </li> 
```

这个日期是一个 Javascript 日期对象，所以不想直接打印该值，我想使用 globalize 打印它。如果没有模板，解决方案应该如下所示：

```
var html = "<li>Date: " + Globalize.format(settings.get('lastUpdate'),'F') + "</li>"; 
```

您认为我可以使用模板来实现这一点还是必须使用解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T16:55:16.830

您可以在模板中调用任何全局可访问的函数。所以，如果`Globalize`是全局的（即 的属性`window`），那么这个模板：

```
<script id="tmpl" type="text/html">
    <li>Date: <%= Globalize.format(date, 'F') %></li>
</script> 
```

将使用此 JavaScript：

```
_.template($('#tmpl').html(), {
    date: some_date_that_globalize_understands
}); 
```

如果您没有`Globalize`全球可用，那么您可以：

```
window.Globalize = Globalize; 
```

使其全局可用或只是手动将其添加到模板的命名空间：

```
_.template($('#tmpl').html(), {
    Globalize: Globalize,
    date:      some_date_that_globalize_understands
}); 
```

演示：

1.  [全球`Globalize`通`window.Globalize`。](http://jsfiddle.net/ambiguous/7ta9d/).
2.  [局部`Globalize`通过`_.template`参数。](http://jsfiddle.net/ambiguous/8XkT8/).

Underscore 模板真的没有什么特别之处，里面的东西`<%= %>`只是包裹在一个[`with`block](https://developer.mozilla.org/en/JavaScript/Reference/Statements/with)中的 JavaScript 代码。您甚至可以通过查看`source`返回的模板函数的属性来查看函数的源代码：

```
var t = _.template($('#t').html());
console.log(t.source); 
```

你会看到一些相当简单（如果丑陋）的 JavaScript，如下所示：

```
function(obj){
var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};
with(obj||{}){
__p+='\n    '+
( Globalize.mangle(pancakes) )+
'\n';
}
return __p;
} 
```

那`+ (Globalize.mangle(pancakes) )+`一点就是`<%= Globalize.mangle(pancakes) %>`变成了什么。没有魔法，没有特殊的内容解析`<%= ... %>`，只是简单（但有效）的 JavaScript 转换。

# android - 在自定义主题 Android 中隐藏通知栏

> ID：10849674
> 
> 赞同：1
> 
> 时间：2012-06-01T11:47:55.577
> 
> 标签：android, fullscreen, android-notification-bar

我为我的 android 应用程序设计了一个自定义主题。我希望应用程序全屏显示，但也显示 TitleBar。我想隐藏/禁用 NotificationBar 但保留 TitleBar。我厌倦了这段代码。但这隐藏了 TitleBar 而不是 NotificationsBar。

```
this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:50:03.847

```
 requestWindowFeature(Window.FEATURE_NO_TITLE); 
this.getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);
setContentView(R.layout.main); 
```

将此代码添加到您的 Android Manifest.xml

# javascript - 没有夏令时的日期

> ID：10849676
> 
> 赞同：2
> 
> 时间：2012-06-01T11:48:11.880
> 
> 标签：javascript, date, dst

我试图创建一个 JavaScript 日历，但是当我尝试增加天数时，我遇到了一个问题，这似乎是夏令时的变化。例如，当我尝试增加 2012 年 3 月的天数时，`(myDate.setDate(myDate.getDate() + 1);`我得到 2 天 24、2012 年 3 月 24 日 0:00 和 2012 年 3 月 24 日 23:00（我希望我没记错，它是 24）。这只发生在某些 PC 上（可能是那些在操作系统上启用它的 PC）。

我的问题是，我可以删除自动日光增量并使用日期变量来存储日期和时间数据，并使其禁用自动递增/递减数字。

谢谢你，丹尼尔！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:18:14.150

使用 .setUTCDate() 和 .getUTCDate() 将设置并获取忽略时区偏移量的月份日期，但 lanzz 是正确的，我们需要查看您如何初始化 myDate 变量。

# facebook - Facebook 页面和网站之间的 2 向同步内容

> ID：10849677
> 
> 赞同：0
> 
> 时间：2012-06-01T11:48:16.577
> 
> 标签：facebook, node.js, facebook-graph-api, synchronization, feed

我正计划推出一个网站和一个随附的 Facebook 页面。尽管这些“站点”中的每一个都有自己的目标，但我希望为我的站点上的部分用户生成内容设置 2 路同步设置，例如：

1.  在我的网站上发布的满足某些标准的内容（由编辑或用户）被推送到随附的 Facebook 页面的墙上

2.  反过来：用户在 facebook 页面墙上发布的内容，被推送到我的网站。（我想完全控制如何格式化、显示、注释内容，所以我不是在寻找一些现成的小部件）

**对于 2.**我很确定我可以定期轮询特定 facebook 页面的新闻源或频道，但我想知道是否可以进行更紧密的集成，即：推送更改的内容（delta's，river any you want调用它）到一个专用的休息端点，我的网站可以从中使用内容或其他东西。

**对于 1**。我需要一种自动化的方式来发布到我拥有的 Facebook 页面的墙上。如果该用户通过 Facebook 在我的网站上登录，则最好使用用户凭据（如果用户同意），或者使用一些备用凭据，例如：我自己的 Facebook 凭据。

只是在大量的开发人员 Facebook 资源中寻找一些指针，或者更好的是，一些库（最好是 Node.js，但其他人可以查看架构）来处理一些管道

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T14:38:09.973

1）您可以通过不同的方式在页面上发布

*   作为用户：您需要用户访问令牌，并且他应该是该页面的粉丝，或者如果您的粉丝页面在其设置中允许任何用户的墙贴。
*   作为页面：您需要[页面访问令牌](https://developers.facebook.com/docs/authentication/pages/)

    您可以获取页面访问令牌并将其长期扩展并将其存储在数据库中。您可以使用 60 天。

仅供参考：
[扩展访问令牌](https://developers.facebook.com/roadmap/offline-access-removal/)
[教程](http://www.sergiy.ca/post-on-facebook-app-wall-and-fan-page-wall-as-admin/)

2) 使用图形 API，您可以定期拉取。还有一个实时通知系统，但它对页面非常有限（[它对您的情况没有用](http://bugs.developers.facebook.net/show_bug.cgi?id=18048)）。

仅供参考： [实时更新](https://developers.facebook.com/docs/reference/api/realtime/)

# javascript - Raphael JS 嵌套转换

> ID：10849678
> 
> 赞同：1
> 
> 时间：2012-06-01T11:48:16.967
> 
> 标签：javascript, raphael, nested-sets

我在 Raphael JS 中有几个嵌套集，我想在 Photoshop 中使用类似图层。也就是说：集合中的对象可能有自己的变换，并且作为集合的位置，它们在其中变得相对定位。并且 set 也可能有它自己的转变。

现在看来，当应用集合转换时，它只是分别对每个元素执行它，并且相对于页面具有绝对位置。

有了这种机制，我遇到了一个简单的问题：我有集合和矩形。然后我用 scale(0.5,0.5,0,0); 调整矩形的大小 然后我想拖动整个集合。我使用 set.translate(x,y) 执行拖动。结果，我得到的矩形移动速度比其他非缩放项目慢两倍。

```
var rdr = this;
this.paper = Raphael(0,0,1000,1000);
this.set = this.paper.set();
this.set.push(this.paper.rect(0,0,100,100)); // non-scaled rectangle
this.set.push(this.paper.rect(0,0,100,100).scale(0.5,0.5,0,0)); // scaled rectangle
$("body").bind("mousedown.RDR",function(e) {
  var ox = e.pageX;
  var oy = e.pageY;
  $("body").bind("mousemove.RDR",function(e) {
    rdr.set.translate(e.pageX-ox,e.pageY-oy);
    ox = e.pageX;
    oy = e.pageY;
  }).bind("mouseup.RDR",function() {
    $("body").unbind("mouseup.RDR").unbind("mousemove.RDR");
  });
}); 
```

我应该如何更正此代码以使我的矩形以相同的速度移动？

* * *

理论上，我需要同时移动一组对象是一种控制转换顺序的方法。我还没有找到内置的解决方案，所以有一个小技巧可以插入已经应用于元素的一组“BEFORE”转换的翻译：

```
Raphael.el.translateBefore = function(x,y) {
  var matrix = this.matrix;
  var transform = matrix.toTransformString();
  transform = ("t"+x.toString()+","+y.toString()) + "," + transform;
  this.transform(transform);
  return this;
}

this.paper = Raphael(this.containerId,this.paperWidth,this.paperHeight);
// добавляем метод для raphael.set через жопу, не нашел нормальный способ
this.paper.set().__proto__.translateBefore = function(x,y) {
  _.each(this,function(el) {
    el.translateBefore(x,y);
  });
  return this;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-06T14:27:53.500

[http://raphaeljs.com/reference.html#Element.transform](http://raphaeljs.com/reference.html#Element.transform)

```
// if you want you can append or prepend transformations
el.transform("...t50,50");
el.transform("s2..."); 
```

# exe - 如何在安装包中嵌入 javafx 2.1

> ID：10849680
> 
> 赞同：2
> 
> 时间：2012-06-01T11:48:22.427
> 
> 标签：exe, javafx-2, software-distribution, dmg

我需要分发一个 javafx 2.1 应用程序，但客户不想被问到是否要安装 javafx 2.1。它应该是自动安装的。有人知道如何将它包装在 dmg 和 exe 包中吗？

非常感谢您提前。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T12:29:53.567

这里有一个教程：http: [//fxexperience.com/2012/03/packaging-javafx-applications-as-native/](http://fxexperience.com/2012/03/packaging-javafx-applications-as-native/)

并且在那里（尽管对于 2.2）：[https ://blogs.oracle.com/talkingjavadeployment/entry/native_packaging_for_javafx](https://blogs.oracle.com/talkingjavadeployment/entry/native_packaging_for_javafx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-05T12:46:04.870

最后我得到了它 ！！！！

我将从我的角度解释我是如何得到它的。抱歉，如果这听起来有点笨拙，但我不习惯构建桌面应用程序并且使用新技术，因为 javafx 对我来说更加困难。

1.  下载最新版本的 jdk（在本例中为 7.0 版本）。
2.  按照教程中的步骤操作并包含您的 .jar 和 jfxrt.jar
3.  作为一个主类，我设置了 com.javafx.main.Main
4.  创建应用程序，现在是最重要的部分：
5.  创建应用程序后，打开它（右键单击应用程序并“显示包内容”。转到文件夹：Content/Resources/Java。
6.  对 vm 执行相同的操作：转到 /Java/JavaVirtualMachines 并右键单击 1.7.0.jdk 打开 Contents 文件夹。
7.  **将 jdk 中的所有 .jar 和 .dylib 复制到应用程序中的 java 资源**
8.  运行应用程序，它将工作:)

# regex - 以 " 开头但不以 " 结尾的字符串的正则表达式

> ID：10849682
> 
> 赞同：5
> 
> 时间：2012-06-01T11:48:34.733
> 
> 标签：regex

是否可以编写一个表示以 开头`"`和**不以 结尾的** `"`字符串的正则表达式？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T11:50:27.760

您可以使用正则表达式：

```
^".*[^"]$ 
```

解释：

```
^     Start of line anchor
"     A literal "
.*    Any junk
[^"]  Any non " character
$     End of line anchor 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T11:50:50.500

你去：

```
^".*[^"]$

^" starts with "
.* some chars (or none)
[^"]$ doesn't end with " 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-01T11:51:00.803

干得好

```
^".*[^"]$ 
```

您使用的是什么正则表达式引擎？

# node.js - Express.js：如何获取远程客户端地址

> ID：10849687
> 
> 赞同：345
> 
> 时间：2012-06-01T11:49:01.420
> 
> 标签：node.js, express, ip, ip-address

我不完全明白我应该如何获得远程用户 IP 地址。

假设我有一个简单的请求路由，例如：

```
app.get(/, function (req, res){
   var forwardedIpsStr = req.header('x-forwarded-for');
   var IP = '';

   if (forwardedIpsStr) {
      IP = forwardedIps = forwardedIpsStr.split(',')[0];  
   }
}); 
```

上述方法是否正确获取真实用户 IP 地址还是有更好的方法？那么代理呢？

* * *

## 回答 #1

> 赞同：619
> 
> 时间：2012-06-01T11:53:33.490

如果您在 NGiNX 之类的代理或您拥有的代理后面运行，那么您应该检查`'x-forwarded-for'`：

```
var ip = req.headers['x-forwarded-for'] || req.socket.remoteAddress 
```

如果代理不是“你的”，我不会相信`'x-forwarded-for'`标题，因为它可以被欺骗。

* * *

## 回答 #2

> 赞同：285
> 
> 时间：2013-01-31T17:31:43.070

虽然@alessioalex 的答案有效，但在[Express-guide的](http://expressjs.com/guide/behind-proxies.html)*Express behind proxies*部分中还有另一种方法。

1.  添加`app.set('trust proxy', true)`到您的快速初始化代码中。
2.  当你想获取远程客户端的ip时，使用`req.ip`或`req.ips`以通常的方式（好像没有反向代理一样）

选读：

*   使用`req.ip`或`req.ips`。`req.connection.remoteAddress`不适用于此解决方案。
*   `'trust proxy'`如果您需要比信任标头中传递的所有内容更复杂的东西`x-forwarded-for`（例如，当您的代理没有从不受信任的来源中删除预先存在的 x-forwarded-for 标头时） ，则可以使用更多选项。有关更多详细信息，请参阅链接指南。
*   如果您的代理服务器未填充`x-forwarded-for`标头，则有两种可能性。
    1.  代理服务器不会中继有关请求最初所在位置的信息。在这种情况下，将无法找出请求的最初来源。您需要先修改代理服务器的配置。
        *   例如，如果您使用 nginx 作为反向代理，则可能需要添加`proxy_set_header X-Forwarded-For $remote_addr;`到您的配置中。
    2.  代理服务器以专有方式（例如，自定义 http 标头）中继有关请求最初来自何处的信息。在这种情况下，这个答案是行不通的。可能有一种自定义方法可以获取该信息，但您需要首先了解该机制。

* * *

## 回答 #3

> 赞同：64
> 
> 时间：2013-08-28T07:27:56.053

在`nginx.conf`文件中：
`proxy_set_header X-Real-IP $remote_addr;`

在`node.js`服务器文件中：
`var ip = req.headers['x-real-ip'] || req.connection.remoteAddress;`

*请注意，表示小写标题*

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2014-02-06T16:46:07.703

特别是对于节点，http 服务器组件的文档，在[事件连接](http://nodejs.org/docs/v0.10.25/api/http.html#http_event_connection)下说：

> [触发] 当建立新的 TCP 流时。[The] socket 是一个 net.Socket 类型的对象。通常用户不想访问此事件。特别是，由于协议解析器附加到套接字的方式，套接字不会发出可读事件。也可以在 访问套接字**`request.connection`**。

所以，这意味着`request.connection`是一个套接字，根据文档确实有一个[socket.remoteAddress](http://nodejs.org/api/net.html#net_socket_remoteaddress)属性，根据文档是：

> 远程 IP 地址的字符串表示形式。例如，“74.125.127.100”或“2001:4860:a005::68”。

在 express 下，request 对象也是 Node http request 对象的一个​​实例，所以这种做法应该还是可以的。

但是，在 Express.js 下，请求已经有两个属性：[req.ip](http://expressjs.com/api.html#req.ip)和[req.ips](http://expressjs.com/api.html#req.ip)

> **请求.ip**
> 
> 返回远程地址，或者启用“信任代理”时 - 上游地址。
> 
> **请求.ips**
> 
> 当[“trust proxy”](https://expressjs.com/en/guide/behind-proxies.html)为`true`时，解析“X-Forwarded-For”ip地址列表并返回一个数组，否则返回一个空数组。例如，如果值为 "client, proxy1, proxy2"，您将收到数组 ["client", "proxy1", "proxy2"]，其中 "proxy2" 是最远的下游。

值得一提的是，根据我的理解，Express`req.ip`是一种比 更好的方法`req.connection.remoteAddress`，因为`req.ip`它包含实际的客户端 ip（前提是在 express 中启用了可信代理），而另一个可能包含代理的 IP 地址（如果有一）。

这就是为什么当前接受的答案建议：

> `var ip = req.headers['x-forwarded-for'] || req.connection.remoteAddress;`

将`req.headers['x-forwarded-for']`相当于 express `req.ip`。

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2020-04-03T02:45:16.977

如果您可以使用 3rd-party 库。您可以检查[request-ip](https://github.com/pbojinov/request-ip)。

你可以使用它

```
import requestIp from 'request-ip';

app.use(requestIp.mw())

app.use((req, res) => {
  const ip = req.clientIp;
}); 
```

源码比较长，这里就不复制了，大家可以去[https://github.com/pbojinov/request-ip/blob/master/src/index.js查看](https://github.com/pbojinov/request-ip/blob/master/src/index.js)

基本上，

> 它在请求中查找特定的标头，如果它们不存在，则回退到一些默认值。
> 
> 用户 ip 由以下顺序确定：
> 
> 1.  `X-Client-IP`
> 2.  `X-Forwarded-For`（Header 可能会返回多个 IP 地址，格式为：“client IP, proxy 1 IP, proxy 2 IP”，所以我们取第一个。）
> 3.  `CF-Connecting-IP`（云闪）
> 4.  `Fastly-Client-Ip`（转发到云功能时快速 CDN 和 Firebase 托管标头）
> 5.  `True-Client-Ip`（Akamai 和 Cloudflare）
> 6.  `X-Real-IP`（Nginx 代理/FastCGI）
> 7.  `X-Cluster-Client-IP`（Rackspace LB，河床黄貂鱼）
> 8.  `X-Forwarded`,`Forwarded-For`和`Forwarded`(#2 的变体)
> 9.  `req.connection.remoteAddress`
> 10.  `req.socket.remoteAddress`
> 11.  `req.connection.socket.remoteAddress`
> 12.  `req.info.remoteAddress`
> 
> 如果找不到 IP 地址，它将返回`null`.

披露：我与图书馆无关。

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2017-07-31T12:18:33.357

1.  添加`app.set('trust proxy', true)`
2.  使用`req.ip`或`req.ips`以通常的方式

* * *

## 回答 #7

> 赞同：10
> 
> 时间：2019-05-09T22:42:15.010

这只是[此答案](https://stackoverflow.com/a/18481747/11312528)的附加信息。

如果您正在使用`nginx`，您将添加`proxy_set_header X-Real-IP $remote_addr;`到站点的位置块。`/etc/nginx/sites-available/www.example.com`例如。这是一个示例服务器块。

```
server {
    listen 80;
    listen [::]:80;

    server_name example.com www.example.com;

    location / {
        proxy_set_header  X-Real-IP  $remote_addr;
        proxy_pass http://127.0.1.1:3080;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
} 
```

重新启动后`nginx`，您将能够访问`node`/`express`应用程序路由中的 ip`req.headers['x-real-ip'] || req.connection.remoteAddress;`

* * *

## 回答 #8

> 赞同：6
> 
> 时间：2018-11-21T11:00:41.330

我为此编写了一个包。您可以将其用作快速中间件。我的包在这里发布：[https ://www.npmjs.com/package/express-ip](https://www.npmjs.com/package/express-ip)

您可以使用安装模块

```
npm i express-ip 
```

用法

```
const express = require('express');
const app = express();
const expressip = require('express-ip');
app.use(expressip().getIpInfoMiddleware);

app.get('/', function (req, res) {
    console.log(req.ipInfo);
}); 
```

* * *

## 回答 #9

> 赞同：5
> 
> 时间：2019-01-25T19:59:38.463

我知道这个问题已经得到解答，但这就是我的工作方式。

```
let ip = req.connection.remoteAddress.split(`:`).pop(); 
```

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2017-01-03T21:51:59.700

根据[Express behind proxies](https://expressjs.com/en/guide/behind-proxies.html)，如果您配置正确，`req.ip`则已考虑反向代理。`trust proxy`因此它比`req.connection.remoteAddress`从网络层获得并且不知道代理要好。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2017-04-09T03:28:49.500

这对我来说比其他人更好。我的网站落后于 CloudFlare，它似乎需要`cf-connecting-ip`.

```
req.headers['cf-connecting-ip'] || req.headers['x-forwarded-for'] || req.connection.remoteAddress 
```

没有[在代理后面测试 Express，](https://expressjs.com/en/guide/behind-proxies.html)因为它没有说明这个`cf-connecting-ip`标题。

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2020-01-31T20:09:19.643

就我而言，与[此](https://stackoverflow.com/a/10849772/1373465)解决方案类似，我最终使用了以下[x-forwarded-for](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Forwarded-For)方法：

```
let ip = (req.headers['x-forwarded-for'] || '').split(',')[0]; 
```

`x-forwarded-for`标头将继续添加从源到最终目标服务器的 IP 路由，因此如果您需要检索源客户端的 IP，这将是数组的**第一项**。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2018-02-01T14:06:08.813

var ip = req.connection.remoteAddress;

ip = ip.split(':')[3];

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-05-03T20:20:04.103

headers 对象拥有您需要的一切，只需执行以下操作：

```
var ip = req.headers['x-forwarded-for'].split(',')[0]; 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2019-08-21T15:06:32.177

支持 can-flare、nginx 和 x-real-ip

```
var user_ip;

    if(req.headers['cf-connecting-ip'] && req.headers['cf-connecting-ip'].split(', ').length) {
      let first = req.headers['cf-connecting-ip'].split(', ');
      user_ip = first[0];
    } else {
      let user_ip = req.headers['x-forwarded-for'] || req.headers['x-real-ip'] || req.connection.remoteAddress || req.socket.remoteAddress || req.connection.socket.remoteAddress;
    } 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2019-11-20T18:05:30.243

将所有witk @kakopappa解决方案以及`morgan`客户端IP地址的日志记录放在一起：

```
morgan.token('client_ip', function getId(req) {
    return req.client_ip
});
const LOG_OUT = ':remote-addr - :remote-user [:date[clf]] ":method :url HTTP/:http-version" :status :res[content-length] ":referrer" ":user-agent" :client_ip'
self.app.use(morgan(LOG_OUT, {
    skip: function(req, res) { // custom logging: filter status codes
        return res.statusCode < self._options.logging.statusCode;
    }
}));

// could-flare, nginx and x-real-ip support
var getIpInfoMiddleware = function(req, res, next) {
    var client_ip;
    if (req.headers['cf-connecting-ip'] && req.headers['cf-connecting-ip'].split(', ').length) {
        var first = req.headers['cf-connecting-ip'].split(', ');
        client_ip = first[0];
    } else {
        client_ip = req.headers['x-forwarded-for'] || req.headers['x-real-ip'] || req.connection.remoteAddress || req.socket.remoteAddress || req.connection.socket.remoteAddress;
    }
    req.client_ip = client_ip;
    next();
};
self.app.use(getIpInfoMiddleware); 
```

# php - 我的网站出现 Facebook 评论问题

> ID：10849688
> 
> 赞同：0
> 
> 时间：2012-06-01T11:49:04.270
> 
> 标签：php, facebook, comments

我正在尝试将 facebook 评论插件添加到我的 flash 游戏网站以用于我的游戏页面，并且我已将此代码用于 facebook 评论表单。我已将以下代码放在 play.php 页面中。

```
<div class="fb-comments" data-href="http://www.dilawez.com/" data-num-posts="5" data-width="785"></div> 
```

我将以下代码放在我的 index.php 页面中，就在我的标签之后。这段代码的主要问题是我能够看到我所有游戏的评论。因为我不想看到这样的。我希望我的用户发布游戏明智的评论。例如，我发布了第 1 场比赛的评论，我可以看到剩余的比赛。任何人都可以解决这个问题。

```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

有关演示，请参阅此[链接](http://www.dilawez.com/play/Spy_Truck)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:01:14.040

是的，你可以

评论特定于此处定义的页面，`data-href="http://www.dilawez.com/"` 因此它是加载评论或存储评论的标识符。

如果您可以为每个游戏设置一个唯一的 URL，它会自动处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T13:52:39.593

使用以下代码正常工作...

```
<div class="fb-comments" data-href="<?php echo $confRow['sitePath'];?>play/<?php echo str_replace(' ','_',$gameInfoRow['name']);?>" data-num-posts="5" data-width="785"></div> 
```

# django - 如何从 Django 模型中的子类写入父类上的实例？

> ID：10849689
> 
> 赞同：0
> 
> 时间：2012-06-01T11:49:05.023
> 
> 标签：django, django-models

从[这个问题](https://stackoverflow.com/questions/10849271/how-do-i-collect-multiple-django-models-together-into-a-single-list/10849545)开始......

我的博客有两个主要模型，`Article`和`Link`，两者都是`Post`. 稍微简化一下，它们看起来像这样：

```
class Post(models.Model):
    title = models.CharField(max_length=100)
    body = models.TextField()
    post_date = models.DateField(db_index=True, auto_now_add=True)

class Article(Post):
    feature_image = models.FileField(upload_to='feature_images')

class Link(Post):
    link = models.URLField(verify_exists=True) 
```

我想同时收集文章和链接，所以在我看来，我运行`Post.objects.order_by('post_date')`并很快，我得到了整个列表——但只有在`Post`. 如果我想在`Link`实例中使用链接，我不能。

我有主键，所以我应该能够做类似的事情`Link.objects.get(pk=item.pk)`并被设置——但我必须知道这是 a`Link`还是`Article`.

我可以`post_type`在父模型上创建一个属性并使用子模型的正确模型名称写入它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T18:12:45.107

我最终以完全不同的方式解决了这个问题，为 Post 编写了一个自定义管理器：

```
class PostManager(models.Manager):
    def __get_final(self, pk):
        for k in Post.__subclasses__():
            if k.objects.filter(pk=pk).exists():
                return k.objects.get(pk=pk)
        return None

    def __subclass_queryset(self, qs):
        collection = []
        for item in qs:
            collection.append(self.__get_final(item.pk))
        return collection

    def all(self):
        return self.__subclass_queryset(super(PostManager, self).all()) 
```

现在`Post.objects.all()`（或我添加到管理器的任何其他 QuerySet 操作，如`order_by`），我将返回所有对象的列表，以及它们的完整特定字段集。（然后我重置了子类的管理器，因此它们不会为日常操作而背负这些额外的查询。）

# iphone - IOS 类方法中的内存泄漏

> ID：10849691
> 
> 赞同：6
> 
> 时间：2012-06-01T11:49:13.210
> 
> 标签：iphone, objective-c, ios

在您看来，如果我有一个 NSObject 的单例子类正在使用如下参数进行初始化：

```
- (MyObject *) initWithSomeParam:(NSString *)param{
    self = [super init];
    if (SharedInstance == nil){
        SharedInstance = [super init];
        SharedInstance.someProperty = param;
    }
    return self;
}

+ (MyObject *) objectWithSomeParam:(NSString *)param{
    return [[self alloc] initWithSomeParam:param];
    // Will the alloc cause a leak?
} 
```

用户无权访问实例方法，只能访问类。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T11:57:49.200

这不是实现单例的正常方式，而且你打破了`init`. 更好的是创建一个`sharedInstance`类方法并让该`initWithParam`方法更传统：

```
static MyObject *_sharedInstance = nil;

+ (MyObject *)sharedInstance:(NSString *)param
{
    if (_sharedInstance == nil)
    {
        _sharedInstance = [MyObject alloc] initWithParam:param];
    }
    return _sharedInstance;
}

// This must be called during app termination to avoid memory leak
+ (void)cleanup
{
    [_sharedInstance release];
    _sharedInstance = nil;
}

- (id)initWithParam:(NSString *)param
{
    self = [super init];
    if (self != nil)
    {
        self.someProperty = param;
    }
    return self;
} 
```

然而，即使这样看起来也不是很舒服；即如果用户`sharedInstance`使用不同的参数调用会发生什么？也许您想保留一个`NSMutableDictionary`已初始化的对象并根据参数创建/返回它们？

如果是这样，你会这样做：

```
static NSMutableDictionary _sharedInstances = [[NSMutableDictionary alloc] init];

+ (MyObject *)sharedInstance:(NSString *)param
{
    MyObject *obj = [_sharedInstances objectForKey:param];
    if (obj == nil)
    {
        obj = [[MyObject alloc] initWithParam:param];
        [_sharedInstances setObject:obj forKey:param];
    }
    return obj;
}

// This must be called during app termination to avoid memory leak
+ (void)cleanup
{
    [_sharedInstances release];
    _sharedInstances = nil;
} 
```

# php - PHP Object() 标识符

> ID：10849693
> 
> 赞同：1
> 
> 时间：2012-06-01T11:49:27.143
> 
> 标签：php, object, identifier

对象的 var_dump 中括号之间的整数的名称是什么。以及如何使用 PHP 访问它？

我指的是下一个示例中的 (3)。

> ```
>  object(SimpleXMLElement)#18 (3) {
>        ["ID"]=>
>       string(3) "xx"
>        ["Name"]=>
>        string(25) "xx"
>        ["Date"]=>
>        string(10) "xx"
>     } 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:53:07.673

这是对象的属性数。要计算这一点，您可以将对象转换为数组并使用[`count()`](http://de.php.net/manual/en/function.count.php)：

```
$number = count((array)$object); 
```

**编辑：**我做了一个小测试（[参见](http://codepad.org/TLZoTfVY)codepad ），它证明了转换为数组是你想要做的，而不是`get_object_vars()`像其他人提到的那样使用，因为后者在数组转换和 var_dump 时不计算私有属性数这些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T11:53:41.773

> 对象的 var_dump 中括号之间的整数的名称是什么。以及如何使用 PHP 访问它？
> 
> 我指的是下一个示例中的 (3)。

这是它拥有的公共成员的数量（即 ID、姓名和日期）。如果你想知道这个数字，你可以使用`count( get_object_vars( $object ) )`：

```
<?php

$foo = new stdClass;
$foo->foo = 42;
$foo->bar = 42;
$foo->baz = 42;

var_dump( count( get_object_vars( $foo ) ) ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T11:51:29.333

它是该对象的公共属性的数量，不能直接访问

# sql - T-SQL：CTE 别名的多次使用——不仅在外部查询中

> ID：10849694
> 
> 赞同：7
> 
> 时间：2012-06-01T11:49:35.293
> 
> 标签：sql, tsql, common-table-expression, with-clause

当我在我的一个脚本中使用 WITH 子句时，我遇到了一个问题。这个问题很容易指出我想多次使用 CTE 别名，而不是只在外部查询中使用，并且有症结所在。

例如：

```
-- Define the CTE expression
WITH cte_test (domain1, domain2, [...])
AS
-- CTE query
(
    SELECT domain1, domain2, [...]
    FROM table
)
-- Outer query
SELECT * FROM cte_test
-- Now I wanna use the CTE expression another time
INSERT INTO sometable ([...]) SELECT [...] FROM cte_test 
```

最后一行将导致以下错误，因为它在外部查询之外：

> 消息 208，级别 16，状态 1，第 12 行无效的对象名称“cte_test”。

有没有办法多次使用 CTE。让它持久化？我当前的解决方案是创建一个临时表，在其中存储 CTE 的结果，并将此临时表用于任何进一步的语句。

```
-- CTE
[...]
-- Create a temp table after the CTE block
DECLARE  @tmp TABLE (domain1 DATATYPE, domain2 DATATYPE, [...])
INSERT INTO @tmp (domain1, domain2, [...]) SELECT domain1, domain2, [...] FROM cte_test
-- Any further DML statements
SELECT * FROM @tmp
INSERT INTO sometable ([...]) SELECT [...] FROM @tmp
[...] 
```

坦率地说，我不喜欢这种解决方案。有没有其他人有这个问题的最佳实践？

提前致谢！

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-01T12:07:50.497

CommonTableExpression 不会以任何方式持久化数据。它基本上只是在主查询本身之前创建子查询的一种方式。

这使它更像是一个内联视图，而不是一个普通的子查询。因为您可以在一个查询中重复引用它，而不必一次又一次地键入它。

但它仍然只是被视为一个视图，扩展为引用它的查询，类似于宏。根本没有数据的持久化。

不幸的是，这对您来说意味着您必须自己坚持。

*   如果您希望 CTE 的逻辑被持久化，您不需要内联视图，您只需要一个视图。

*   如果您希望 CTE 的结果集被持久化，您需要一种临时表类型的解决方案，例如您不喜欢的解决方案。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-01T12:02:34.453

CTE 仅在它所属的 SQL 语句的范围内。如果您需要在后续语句中重用其数据，则需要一个临时表或表变量来存储数据。在您的示例中，除非您正在实现递归 CTE，否则我根本不需要 CTE - 您可以将其内容直接存储在临时表/表变量中，并尽可能多地重复使用它。

另请注意，您的 DELETE 语句将尝试从基础表中删除，这与您将结果放入临时表/表变量不同。

# cocos2d-iphone - Cocos2D for Android 纹理消失

> ID：10849697
> 
> 赞同：1
> 
> 时间：2012-06-01T11:49:40.850
> 
> 标签：cocos2d-iphone, cocos2d-android

有时纹理会从精灵中消失。我有一个显示为白色的精灵，它应该有一个纹理和一个标签，其中应该有一个文本，它显示为黑色。标签是精灵的子类，所以这个问题与精灵有关。有人可以告诉我有什么问题吗？有人在 Android 上的 Cococs2D 中遇到过这个错误吗？谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T14:52:09.687

当我从 cocos2d 的“外部”进行导航时，我遇到了这样的问题，即我依靠 Android 的原生后退按钮的回调来改变场景。显然，此回调与 cocos 在同一线程上不起作用并导致此问题（可能与 TextureCache 中的 WeakReferences 有关）。希望能帮助到你 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-03T16:41:50.637

你在用pvr吗？当我尝试使用 pvr 时，我遇到了类似的问题。我切换到png，它为我解决了这个问题。

# iphone - Cordova 1.6 Iphone 带附件的电子邮件发送

> ID：10849698
> 
> 赞同：3
> 
> 时间：2012-06-01T11:49:41.977
> 
> 标签：iphone, cordova, email-attachments

在 iPhone 中使用 phonegap 发送电子邮件附件 - 我需要捕获图片并将捕获的图像默认附加到邮件编辑器并启动它。你们中的任何人都可以帮忙吗？我使用了`camera API`并且我成功发送了电子邮件，但不知道如何附加与此电子邮件一起捕获的图像。

```
function onPhotoDataSuccess(imageData) {
    // Uncomment to view the base64 encoded image data
    // console.log(imageData);

    // Get image handle
    //
    var smallImage = document.getElementById('smallImage');

    // Unhide image elements
    //
    smallImage.style.display = 'block';

    // Show the captured photo
    // The inline CSS rules are used to resize the image
    //
    //smallImage.src = "data:image/jpeg;base64," + imageData;

    smallImage.src = imageData;
    alert("data:image/jpeg;base64," + imageData);
    var args;

    cordova.exec(null, null, "EmailComposer", "showEmailComposer", [args]);
} 
```

即使它不是附件并且如果需要将其添加到电子邮件正文中，我也使用了

```
 EmailComposer.prototype.showEmailComposer("Test","<html><body><img src=\""+imageData+"\" /></body></html>","test@example.com","","","YES"); 
```

然后我可以看到嵌入在邮件编辑器中的图像，在发送时我没有收到任何错误，并且在收到电子邮件时没有显示图像。

# android - Android 设备不支持自定义字体

> ID：10849699
> 
> 赞同：1
> 
> 时间：2012-06-01T11:49:45.827
> 
> 标签：android, android-widget

您好正在开发一个使用自定义字体 .TTF 文件的 Android 应用程序。问题是我使用具有不同构建版本的相同品牌设备进行了测试。旧版本设备支持自定义字体但新版本设备不采用自定义字体。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:54:25.590

我有一个建议在资产中添加这些字体并在 html 中制作文本，因此您可以在 Web View android 中添加它希望它适用于您的情况：

```
WebView view = new WebView(this);
        view.setVerticalScrollBarEnabled(true);     
        view.loadUrl("file:///android_asset/demo/intro.html");
        ((LinearLayout)findViewById(R.id.introLayout1)).addView(view);
        view.setBackgroundColor(Color.BLACK) 
```

![在此处输入图像描述](../Images/ac0e72ff128ef77ebb4fd56d13c2a0ca.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T12:00:16.037

首先下载需要的ttf文件（你想要的字体样式）。并将其放在android项目的**assets文件夹中。**然后在java文件中添加以下代码..

```
TextView txt = (TextView) findViewById(R.id.custom_font);

        Typeface font = Typeface.createFromAsset(getAssets(), "Eltpan-n.ttf");
        txt.setTypeface(font); 
```

希望它会帮助你..它对我来说就像一个魅力..如果你满意投票给我的答案

# iphone - iPhone中的SVG绘图

> ID：10849702
> 
> 赞同：0
> 
> 时间：2012-06-01T11:50:04.377
> 
> 标签：iphone, svg, drawing

希望你们所有人都会好起来，并在那里做得最好。我今年 4 月才开始开发 iphone 应用程序。我想在 iphone 的 CGContext 上绘制 svg，就像我们可以在 android 中一样。请点击 android SVG 绘图库的链接。

[Android 上的 SVG](https://stackoverflow.com/questions/2969037/svg-to-android-shape)

[图书馆 1 号](http://code.google.com/p/svg-android/)

我的要求，我只想在 iphone CGContext 上绘制 SVG，因为我需要任何第三方库。如果任何机构有有用和准确的信息，请帮助我。如何在 iPhone 中绘制 SVG？

提前致谢。

马克·杰尔。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T15:03:34.890

如果 SVG 是固定的，您可以尝试[使用 Qwarkee](http://itunes.apple.com/us/app/qwarkee/id498340809?mt=12)生成一个`-drawRect:`实现，该实现仅使用石英函数绘制等效的 SVG。

当前版本最适用于 Illustrator 生成的 SVG 文件，但开发人员告诉我，未来几天将发布更新，这将使该应用程序可以处理更多种类的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-07T13:43:29.187

[SVGgh](https://github.com/GenerallyHelpfulSoftware/SVGgh) has an SVGRenderer class which can draw into a CGContextRef, so you can use it to print, generate a PDF or draw to a UIView or CALayer.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T15:15:52.140

不是您的问题的完美匹配，但请查看[SVGKit](https://github.com/SVGKit/SVGKit)

> SVGKit 是一个跨平台的 Cocoa 框架，用于将 SVG 文件渲染为核心动画层。所有形状都由 CAShapeLayer 类的实例表示，并且在设计上是可动画的。SVGKit 与最新的 OS X 和 iOS SDK 兼容。

# android - 表格布局对齐？

> ID：10849703
> 
> 赞同：0
> 
> 时间：2012-06-01T11:50:07.107
> 
> 标签：android, image, button, android-tablelayout

我设计了一个 XML 布局，如下图所示：

![表格布局中的四个按钮](../Images/1f57a045cfbd0166e803211d4ee9a6c3.png)

我需要在屏幕上平等地放置四个按钮，但我无法让它工作。我尝试了我能想到的所有可能的更改。下面是布局的 XML：

```
<RelativeLayout  
   android:layout_width="fill_parent"  
   android:layout_height="40dp" 
   android:id="@+id/buttonlayout"
   android:layout_alignBottom="@id/framelayout">

<TableLayout 
android:layout_width="fill_parent" 
android:layout_height="fill_parent" 
xmlns:android="http://schemas.android.com/apk/res/android">

<TableRow>

  <Button
    android:id="@+id/previous"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/previous_icon" />

 <Button
    android:id="@+id/button_startprint"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/print_icon"
    android:padding="10dp" />

<Button
    android:id="@+id/button_cam"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/cam_icon"
    android:padding="10dp" />

<Button
    android:id="@+id/next"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/next_icon"
    android:hapticFeedbackEnabled="true"/>

 </TableRow>  
 </TableLayout> 
</RelativeLayout> 
```

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:54:05.613

如果您为所有四个按钮设置了属性 android:weight="1"，它们应该被适当地隔开，因为 TableRow 是 LinearLayout 的子类。为了获得更好的性能，建议也使用 android:layout_width="0dp" 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T11:52:58.303

使用`android:layout_weight=1`, 和 使用`android:layout_width="0dp"`来制作等重的按钮..

**编辑** 例如将您的按钮定义为

```
 <Button
        android:id="@+id/button_cam"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:layout_weight=1
        android:background="@drawable/cam_icon"
        android:padding="10dp" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T12:02:59.977

尝试将所有按钮宽度替换为`layout_width="0dp"`并添加`layout_weight="1"`

尝试使用 9-patch 图像以避免图像被拉伸的事实

```
 <TableRow>

      <Button
        android:id="@+id/previous"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:background="@drawable/ic_menu_compass"
        android:layout_weight="1" />

     <Button
        android:id="@+id/button_startprint"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:background="@drawable/ic_menu_mylocation"
        android:padding="10dp" 
        android:layout_weight="1"/>

    <Button
        android:id="@+id/button_cam"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:background="@drawable/ic_menu_mapmode"
        android:padding="10dp"
        android:layout_weight="1" />

    <Button
        android:id="@+id/next"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:background="@drawable/ic_menu_about"
        android:hapticFeedbackEnabled="true"
        android:layout_weight="1"/>

 </TableRow> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T12:08:47.170

嗨 jxgn 使用此代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TableRow
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

        <LinearLayout
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1" >

            <Button
                android:id="@+id/previous"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/ic_launcher" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1" >

            <Button
                android:id="@+id/button_startprint"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/ic_launcher" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1" >

            <Button
                android:id="@+id/button_cam"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/ic_launcher" />
        </LinearLayout>

        <LinearLayout
            android:layout_width="0dip"
            android:layout_height="wrap_content"
            android:layout_weight="1" >

            <Button
                android:id="@+id/next"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/ic_launcher" />
        </LinearLayout>
    </TableRow>

</TableLayout> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T11:55:19.503

尝试在每个按钮上设置：

```
android:layout_weight="0.25" 
```

希望这对你有用

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-01T11:58:52.117

试试这个很有用

```
 <RelativeLayout  
    xmlns:android="http://schemas.android.com/apk/res/android"
   android:layout_width="fill_parent"  
   android:layout_height="wrap_content" 
   android:id="@+id/buttonlayout"     >

<TableLayout 
android:layout_width="fill_parent" 
android:layout_height="fill_parent" 
xmlns:android="http://schemas.android.com/apk/res/android">

<TableRow>

  <Button
    android:id="@+id/previous"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
     android:background="@drawable/ic_launcher"  
    android:layout_weight="1"/>

 <Button
    android:id="@+id/button_startprint"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
   android:background="@drawable/ic_launcher" 
    android:layout_weight="1"
    />

<Button
    android:id="@+id/button_cam"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="@drawable/ic_launcher" 
    android:layout_weight="1"     />

 <Button
    android:id="@+id/next"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
  android:background="@drawable/ic_launcher" 
    android:layout_weight="1"       />

  </TableRow>  
  </TableLayout> 
  </RelativeLayout> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-01T12:15:35.190

`android:layout_weight="1"`在您的 xml 中应用将拉伸您的按钮图像。

如果您不想拉伸按钮图像，请使用`ImageButton`并设置`android:src`为您的可绘制对象。

参考以下代码：

```
<TableLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TableRow>

        <ImageButton
            android:id="@+id/previous"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/previous_icon"
            android:background="@android:color/transparent"
            android:layout_weight="1" />

        <ImageButton
            android:id="@+id/button_startprint"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/print_icon"
            android:background="@android:color/transparent"
            android:padding="10dp"
            android:layout_weight="1" />

        <ImageButton
            android:id="@+id/button_cam"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/cam_icon"
            android:background="@android:color/transparent"
            android:padding="10dp"
            android:layout_weight="1" />

        <ImageButton
            android:id="@+id/next"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/next_icon"
            android:background="@android:color/transparent"
            android:hapticFeedbackEnabled="true"
            android:layout_weight="1" />
    </TableRow>
</TableLayout> 
```

`

# ruby - 在初始化时验证 BinData::Record

> ID：10849704
> 
> 赞同：1
> 
> 时间：2012-06-01T11:50:11.760
> 
> 标签：ruby, bindata

有没有办法在初始化期间验证 BinData::Record 上设置的字段？每个参数的 check_value 似乎仅在从输入流中读取后才进行评估

```
class Foo < BinData::Record
   uint8 :bar,:check_value=>lambda{raise 'Here is an error'}
end

Foo.new(:bar=>5)  #Does not raise validation exception 
```

我尝试添加一个“initialize_instance”，它在“to_binary_s”上进行读取，但它引发了一些其他错误，可能是因为该对象没有完全实例化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:19:56.427

写一个`def initialize`方法。然后将验证放入其中。初始化在对象实例化时运行，因此必须进行检查。

# c# - 使用 ORM 时的命令/查询分离

> ID：10849706
> 
> 赞同：1
> 
> 时间：2012-06-01T11:50:16.323
> 
> 标签：c#, asp.net-mvc, nhibernate, command-query-separation

在我的各种项目中，我实现了命令/查询分离模式并使用 NHibernate 作为我的 ORM。

一般来说，我将我的命令和查询保存在与特定活动集相关的单独项目中，例如，`UserManagement`等。`TagManagement``QuestionManagement`

我非常喜欢将所有内容都很好地划分到这些存储库中，并具有易于查找的功能。以这种方式做事当然有好处。

然而，我开始怀疑这种抽象对于基本查询的价值，特别是考虑到 NHibernate 本身已经提供了如此强大的抽象。

在我的 MVC 控制器中考虑这一点：

```
_nHibernateSession.Get<UserProfile>(_sessionData.UserId); 
```

我可以将其抽象为`UserManagement`存储库中的查询，但我不确定它提供了什么价值。

你怎么看？您会将所有内容都保留在命令/查询范式中，还是直接在控制器中使用 nhibernate 会话来处理像这样的简单请求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T12:20:26.130

通常我不使用存储库，因为我认为它们在我的代码中添加了太多抽象。我更喜欢直接在服务/控制器层构建的视图模型。如果我想编写一个单元测试，我可以针对服务或控制器编写它。如果你想重用一些查询条件，那么只需编写扩展方法：

```
 public static IQueryable<User> Administrators(this IQueryable<User> users)
    {
        return users.Where(x => x.Role.Id == Role.Const.Admin);
    } 
```

关于这一点，我推荐这些文章： [http ://ayende.com/blog/3955/repository-is-the-new-singleton](http://ayende.com/blog/3955/repository-is-the-new-singleton) [http://www.planetgeek.ch/2012/05/05/what-is-that-所有关于存储库的反模式/](http://www.planetgeek.ch/2012/05/05/what-is-that-all-about-the-repository-anti-pattern/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T11:58:47.973

我更喜欢将所有查询保留在**存储库**中，如果您需要进行很多不同的查询，您可以公开实现 IQueryable 并包装 session.Query 的 LINQ To Nhibernate 的存储库，这对 HQL 或标准有限制。

但对我来说，没有正当理由这样做，只有当您向其他人提供*数据访问层*并且您不知道查询时。

您可以在我正在工作的 DDD[项目](http://sample.codeplex.com/wikipage?title=Domain%20Model%20in%20DDD)中看到一个示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T12:00:32.787

我强烈建议您在 MVC 控制器和 NHibernate 之间保持一定程度的抽象，尤其是在您需要对 MVC 控制器进行单元测试时。如果没有存储库层，创建需要模拟存储库层的单元测试要困难得多。

# c# - 为不同的屏幕分辨率加载不同的资源字典

> ID：10849711
> 
> 赞同：0
> 
> 时间：2012-06-01T11:50:25.093
> 
> 标签：c#, wpf, c#-4.0

我有一个资源字典，其中为我的应用程序定义了样式和控件模板。现在我想定义更多资源字典来定位不同的屏幕分辨率，每个屏幕分辨率一个。如何检测客户端屏幕分辨率并在 App.XAML 中加载特定的资源字典？

**我当前的 App.XAML：**

```
<ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="Resources\BlueYellow\BlueYellowTheme.xaml" />
            </ResourceDictionary.MergedDictionaries>
</ResourceDictionary> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:09:09.287

我认为您可以制作 markupExtension，它根据分辨率返回适当的资源字典 uri，并像这样使用它：

```
<ResourceDictionary Source="{ThemeUriAccordingToCurrentResolution}" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T12:47:27.827

我可以看到能够根据屏幕分辨率切换资源的价值，您显然必须做一些工作才能将大量分辨率降低到可管理的短列表中，并找到最适合当前的分辨率，但是干得好。

应用程序.cs

```
protected override void OnStartup(StartupEventArgs e)
{
  // Get the width and height, you might want to at least round these to a few values.
  var width = System.Windows.SystemParameters.PrimaryScreenWidth;
  var height = System.Windows.SystemParameters.PrimaryScreenHeight;

  // make the resource path from them.
  string resourceName = string.Format("Themes\resource{0}x{1}", width, height);

  // Add the resource to the app.
  Application.Current.Resources.MergedDictionaries.Add((ResourceDictionary)Application.LoadComponent(new Uri(resourceName, UriKind.Relative)));

  base.OnStartup(e);
} 
```

# date - 1601 年 1 月 1 日的意义是什么？

> ID：10849717
> 
> 赞同：46
> 
> 时间：2012-06-01T11:50:37.823
> 
> 标签：date, time, ansi

> 此结构是一个 64 位值，表示
> 自 1601 年 1 月 1 日以来 100 纳秒间隔的数量。
> 
> **参考：http:** [//msdn.microsoft.com/en-us/library/aa915351](http://msdn.microsoft.com/en-us/library/aa915351)

为什么设置为“自 1601 年以来”？为什么不是 unix 时间 1970 甚至 2000？我能用如此遥远的时间日期的兼容性做些什么？

* * *

**回答我自己。**

ANSI 日期将 1601 年 1 月 1 日定义为第 1 天，并用作 COBOL 整数日期的来源。这个纪元是公历中前一个 400 年闰年周期的开始，该周期以 2000 年结束。您可以在维基百科的 Julian_day 条目下找到。

## 更远：

*   [为什么 Win32 时代是 1601 年 1 月 1 日](http://blogs.msdn.com/b/oldnewthing/archive/2009/03/06/9461176.aspx)

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2013-06-26T17:26:13.440

因为 1601 年 1 月 1 日是纪元的开始。

从Raymond Chen那里得到它：

> # [为什么 Win32 纪元是 1601 年 1 月 1 日？](https://devblogs.microsoft.com/oldnewthing/20090306-00/?p=18913)
> 
> 该[`FILETIME`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724284(v=vs.85).aspx)结构以 1601 年 1 月 1 日以来的 100 纳秒间隔的形式记录时间。为什么选择那个日期？
> 
> 公历以 400 年为周期运行，1601 年是在设计 Windows NT 时处于活动状态的第一年。换句话说，选择它是为了使数学很好地得出结论。
> 
> 我实际上收到了来自 Dave Cutler 的电子邮件，证实了这一点。

## 奖金喋喋不休

[RFC4122 UUID](https://www.rfc-editor.org/rfc/rfc4122)也测量 100ns*滴答*，但它们从 10/15/1582 开始（而不是`FILETIME`1/1/1601：

```
Date                    Ticks               Uuid Epoch ticks
----------------------  ------------------  ------------------
1582-10-15              -5748192000000000   0                    Start of uuid epoch
1601-01-01              0                   0x00146BF33E42C000   Start of Windows epoch
1899-12-30              0x014F35A9A90CC000  0x0163A19CE74F8000   Lotus 123/Excel/Access/COM zero date
1900-01-01              0x014F373BFDE04000  0x0163A32F3C230000   SQL Server zero date
1970-01-01              0x019DB1DED53E8000  0x01B21DD213814000   Unix epoch timestamp
2000-01-01              0x01BF53EB256D4000  0x01D3BFDE63B00000
2010-01-01              0x01CA8A755C6E0000  0x01DEF6689AB0C000
2020-01-01              0x01D5C03669050000  0x01EA2C29A747C000

//FILETIME eras
1972-01-21 11:43:51 PM  0x01A0000000000000  0x01B46BF33E42C000   Start of 0x01A era
1986-04-30 11:43:13 AM  0x01B0000000000000  0x01C46BF33E42C000   Start of 0x01B era
2000-08-06 11:42:36 PM  0x01C0000000000000  0x01D46BF33E42C000   Start of 0x01C era
2014-11-14 11:41:59 AM  0x01D0000000000000  0x01E46BF33E42C000   Start of 0x01D era
2029-02-20 11:41:22 PM  0x01E0000000000000  0x01F46BF33E42C000   Start of 0x01E era
2043-05-31 11:40:44 AM  0x01F0000000000000  0x02046BF33E42C000   Start of 0x01F era

//UUID eras
1968-02-11 11:43:13 AM  0x019B940CC1BD4000  0x01B0000000000000   Start of uuid 0x01B era
1982-05-20 11:42:36 PM  0x01AB940CC1BD4000  0x01C0000000000000   Start of uuid 0x01C era
1996-08-27 11:41:59 AM  0x01BB940CC1BD4000  0x01D0000000000000   Start of uuid 0x01D era
2010-12-04 11:41:22 PM  0x01CB940CC1BD4000  0x01E0000000000000   Start of uuid 0x01E era
2025-03-13 11:40:44 AM  0x01DB940CC1BD4000  0x01F0000000000000   Start of uuid 0x01F era 
```

## 奖金喋喋不休

Excel 使用零日期`12/30/1899`以便与 Lotus 1-2-3 兼容。这也是 Excel 将 1900 年 2 月视为闰年的原因（因为 Lotus 1-2-3 的人认为是闰年）。这就是为什么`March 1, 1900`在 Excel 中也无法表示之前的日期。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-06-01T11:59:43.717

嗯，1601 年 1 月 1 日是 17 世纪的第一天。摆钟是在 17 世纪发明的，可以将时间精确到 1 秒¹。因此（理论上）从那个时期的现有文献中可能会引用以该精度测量的时间点。

但实际上，选择是任意的。必须有一个“时代”，并提供

1.  时代足够远，以至于“负时间”值很少见，并且

2.  未来的环绕时间足够远，可以在几代人之外，

任何选择都可以。

但是，嘿，如果你这么担心，给史蒂夫巴尔默写一封信²。

* * *

鉴于声称的消息来源，我倾向于相信伊恩博伊德的回答。其中的原因是它使数学更容易（用于公历闰年计算）。然而，考虑到这种简化是多么微小，以及它背后的推理多么薄弱，选择（IMO）本质上是任意的。（并不是说我是错的……）

* * *

^(1 - 好的......可能不是那么准确。)

^(2 - 或萨蒂亚纳德拉。)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-07T06:59:54.553

这是一个务实的选择。

现代西方历法直到 1752 年才保持一致，当时英国（及其殖民地）采用了公历，自 1582 年以来，大部分天主教欧洲都采用了公历。

这是带有闰年等的现代日历，以保持 1 月 1 日与冬至一致。

那么为什么不从 1752 年 1 月 1 日开始呢？因为基本的闰年规则“如果两位数的年份可以被四整除，则它是闰年，除非四位数的世纪也能被四整除”）建立了一个 400 年的周期。第一个完整周期从 1601 年 1 月 1 日开始（至少在罗马）。

闰年和日期的计算很痛苦，因为没有从四百年周期的中途开始，所以 1600 是一个很好的开始，只要你记得 1752 年之前的任何日期都需要通过地理位置来限定，因为英国的日期是 10 天不同步。与此时的罗马日期。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-10-07T00:24:59.627

正如已经提到的，我认为流行的答案是因为公历以 400 年为周期运行，而 1601 年是在设计 Windows NT 时处于活动状态的第一年。

1601 年 1 月 1 日是 COBOL 整数日期的起源。

它也是 ANSI 日期格式的第 1 天。

如果您根据 ISO8601 进一步推测，这是它所处的格式，在 1583 年之前，时间是基于每年 366 天的公历。也许他们只是四舍五入到下一个世纪。

# java - 试图将双精度数转换为十进制

> ID：10849721
> 
> 赞同：2
> 
> 时间：2012-06-01T11:50:44.717
> 
> 标签：java, double-precision

我正在尝试将双精度数转换为十进制。例如，双精度数字 22 和字节为：

```
[0] 0
[1] 0
[2] 0
[3] 0
[4] 0
[5] 0
[6] 54
[7] 64 
```

现在我尝试再次将这些值转换为 22 ：

```
 ByteBuffer buffer = ByteBuffer.wrap(data);
  long l = buffer.getLong();
  long b = Double.doubleToLongBits(l); 
```

但结果是完全错误`4.6688606E18` 的：这个数字是多少？请帮忙，我完全糊涂了！

根据 IEEE 标准 754 双精度：

任何存储为双精度值的值都需要 64 位，格式如下表所示：

63 符号（0 = 正，1 = 负）

62 到 52 指数，偏差 1023

51 到 0 数字 1.f 的分数 f

现在我应该如何将双精度转换为数字以再次获得 22？所有这些答案都是错误的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:53:50.230

我不确定您要进行哪种转换（当您说“转换为十进制”时，您想要的输出格式/类是什么？*）*

但是，我阅读标题的第一个想法是[BigDecimal](http://docs.oracle.com/javase/6/docs/api/java/math/BigDecimal.html)将是一个有效的表示。因此，第一种方法是执行以下操作：

```
double d = ...; // your input number
BigDecimal b = new BigDecimal(d); 
```

也就是说，如果您想转换为十进制，那么这可能是因为 的值存在浮动点/舍入问题`d`，它仍然会出现在`BigDecimal`表示中，因为它是基于 构建的`d`。

解决这个问题的最佳方法是`BigDecimals`从一开始就使用它们的`String`构造函数——这样就不会有任何浮点舍入的实例。如果出于某种原因这不是一个选项，您可以将其转换`double`为字符串，以便解决许多浮点舍入问题：

```
String strRep = Double.toString(d);
BigDecimal b = new BigDecimal(strRep); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:31:42.280

您可以编写简单的测试（使用 JUnit）：

```
double initial = 22.0;

long bits = Double.doubleToLongBits(initial);

double converted = Double.longBitsToDouble(bits);

assertEquals(Double.valueOf(initial), Double.valueOf(converted)); 
```

如果这可行 - 检查您是否有正确的 22 字节表示（正确的表示将在位变量处）。

# php - 子字符串导致不完整的 html 标签

> ID：10849722
> 
> 赞同：1
> 
> 时间：2012-06-01T11:50:49.530
> 
> 标签：php, html, formatting, substring

我正在使用子字符串扩展/压缩博客文章，其中第二个子字符串位于按下按钮时激活的 div 标记内（因此连接两个子字符串）

代码如下所示：

```
<?php echo substr($f2, 0, 50);?>
<div id="<?php echo $f4; ?>" class = "hidden">
<?php echo substr($f2, 0, 5000);?></div> 
```

然而，我的问题是，如果博客文章包含 html 标签（例如 <\li>、<\p>）并且初始子字符串在该组标签终止之前结束，那么显然它会导致主要的格式问题。有没有办法使用我当前的方法解决这个问题，或者我需要使用 XML 样式表之类的东西（在这种情况下，请指导我完成它）

编辑：

我已经使用 DOMDocument 半完成了我的请求。

```
$second = substr($f2, 50, 5000);
$dom= new DOMDocument();
    $dom->loadHTML($second);      
    $xpath = new DOMXPath($dom);
    $body = $xpath->query('/html/body');
$secondoutput = ($dom->saveXml($body->item(0)));

$first = substr($f2, 0, 50);
$dom= new DOMDocument();
    $dom->loadHTML($first);      
    $xpath = new DOMXPath($dom);
    $body = $xpath->query('/html/body');
$firstoutput = ($dom->saveXml($body->item(0))); 
```

这有效，除非当第二个子字符串被调用时，它不再具有以前的格式，因为它已被纯化。当调用第二个子字符串时，有什么方法可以重新附加上一个 HTML 标记？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:00:47.957

您可能想使用[Tidy](http://php.net/manual/en/book.tidy.php)来修复被截断的 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:02:57.333

您可能希望使用 DOMDocument 或[SimpleHTMLDOM](http://simplehtmldom.sourceforge.net/)解析整个 HTML 代码，然后删除最后一个元素，直到帖子足够短。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T12:15:22.130

这个问题有不同的解决方案，但`substr`不是特别合适（正如你提到的）。您可以使用正则表达式或 HTML 解析器。

继续复制[这个问题](https://stackoverflow.com/questions/2398725/using-php-substr-and-strip-tags-while-retaining-formatting-and-without-break)的解决方案。

# c - 无法进入while语句

> ID：10849724
> 
> 赞同：0
> 
> 时间：2012-06-01T11:50:51.263
> 
> 标签：c, loops

> **可能重复：**
> [无符号和有符号比较](https://stackoverflow.com/questions/3384911/unsigned-and-signed-comparison)
> [unsigned int 和有符号字符比较](https://stackoverflow.com/questions/5087992/unsigned-int-and-signed-char-comparison)

当我尝试输入此 while 语句时，我有一个奇怪的行为：

```
unsigned u = 0;
int i = -2;

while(i < u)
{
    // Do something
    i++;
} 
```

但它永远不会进入，即使我设置了一个断点`i = -2`并且`u = 0`. 我究竟做错了什么？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T11:52:12.063

这是因为 ANSI C 标准定义，只要在限定类型 (your `unsigned int u`) 和非限定类型 (your `int i`) 之间进行比较，非限定类型就会提升为相同类型的类型（因此总是`int`），但也继承其他数量的限定词（即它变成`unsigned`）。

当你的`int`，其值等于`-2`，成为`unsigned`第一个字节时，经历了这种转变：`0000 0010 -> 1111 1110`。你`int`现在是一个非常大的正数，肯定比你的更大`unsigned int`。

有一个解决方案：cast to`signed`

```
while(i < (signed) u)
{
    // Do something
    i++;
} 
```

顺便说一句，您的编译器可能应该给您一个警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T11:51:52.277

你正在比较一个有符号和无符号整数，你的问题从那里开始......
不要那样做，它应该可以正常工作。

# facebook - Facebook 分享图标对于通过 Graph API 发布的帖子不可见

> ID：10849730
> 
> 赞同：0
> 
> 时间：2012-06-01T11:51:17.127
> 
> 标签：facebook, facebook-graph-api

我在通过图形 API 向 facebook 发布更新时遇到问题，当我通过图形 API 向 facebook 发布内容时，在 facebook 中只显示该更新的点赞和评论，而没有共享图标，经过一番谷歌搜索后，我发现我们应该使用**我/链接**作为发布时的终点，效果很好我可以看到我现在正在进行的所有链接更新的共享图标，但问题是我应该如何处理没有任何链接的普通文本更新的情况我应该如何发布这样更新以在 facebook 中获取共享图标，

下面是我用于链接更新的代码，它发布更新，我可以在 facebook 中看到共享图标

```
facebookClient.publish("me/links", String.class , inputStream, 
            Parameter.with(ACCESS_TOKEN_PARAM,  accessToken), Parameter.with(MESSAGE, message), 
            Parameter.with(PICTURE, imageURL), Parameter.with(LINK, link==null?"":link)); 
```

下面是我用来发布文本更新的代码，此代码发布更新，但在 facebook 中没有共享图标。

```
facebookClient.publish("me/feed", String.class ,
            Parameter.with(ACCESS_TOKEN_PARAM,  accessToken), Parameter.with(MESSAGE, message)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:44:30.293

不幸的是，这目前不是 Graph API 的功能。[这里](https://developers.facebook.com/bugs/164888633588257)有一个功能请求报告，我建议您通过投票来支持它。

作为一种解决方法，您应该考虑使用带有用户消息的 Open Graph 操作，而不是流发布调用，因为它会显示共享链接，并且也可以包含其他自定义操作链接。

# sql - 在存在子句中使用有 count()

> ID：10849731
> 
> 赞同：4
> 
> 时间：2012-06-01T11:51:18.300
> 
> 标签：sql, sql-server-2008

我正在尝试进行 SQL 查询，其中“exists”子句中的子查询具有“have”子句。奇怪的是。没有错误，并且子查询作为独立查询工作。但是，整个查询给出的结果与没有 'have' 子句的结果完全相同。
这是我的查询的样子：

```
 SELECT X
   FROM A
  WHERE exists (
               SELECT X, count(distinct Y)
                 FROM B
             GROUP BY X
               HAVING count(distinct Y) > 2) 
```

所以我试图从 A 中选择行，其中 X 在 B 中出现两次以上的 Y。但是，结果还包括子查询中不存在的记录。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-01T11:54:47.250

您不关联这两个查询：

```
SELECT  X
FROM    A
WHERE   (
        SELECT  COUNT(DISTINCT y)
        FROM    b
        WHERE   b.x = a.x
        ) > 2 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T12:10:20.490

您的查询是这样说的：

如果在 B 中按 Y 分组，如果有不止一次出现的记录，则从 A 中选择 X。

如果您的“存在子查询”从表 B 中返回甚至一条记录，则条件为真，您将从 A 中获取所有行。

尝试：

```
select X
from A
where exists (select 1
              from B
              where B.x = A.x
              group by b.x
              having count(distinct b.y) > 2
             ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-13T20:52:36.877

我有类似的情况并通过 JOIN 解决，因为其他答案对我不起作用。我试图与您的通用示例相关联。希望对其他人有帮助！

```
SELECT  X
FROM    A
JOIN (SELECT X, COUNT(DISTINCT y)
      FROM B
      GROUP BY X
      HAVING count(distinct Y) > 2) C
ON A.X = C.X 
```

# grails - 使用 afterInsert() 修改域后是否需要双重保存()？

> ID：10849735
> 
> 赞同：1
> 
> 时间：2012-06-01T11:51:31.853
> 
> 标签：grails, grails-orm

`afterInsert`我有一个域类，它在事件中修改其属性之一。

一个小例子：

```
class Transaction {
   Long transactionId

   static constraints = {
       transactionId nullable: true
   }

   def afterInsert() {
       // copy the record id to transactionId;
       transactionId = id
   }
} 
```

**每当我在单元测试中保存域对象**( `transaction.save(flush: true)`)**时，一切都很好，**并且`transactionId`更新了。但是**当我尝试使用 查找保存的记录时**，`Transaction.findByTransactionId()`我**没有得到任何结果：**

```
 // do something
   transaction.save(flush: true)
   Transaction transaction = Transaction.findByTransactionId(1)
   // !! no results; transaction == null 
```

我必须做一个双倍`save()`才能找到记录`findByTransactionId()`：

```
 // do something
   transaction.save(flush: true)
   transaction.save(flush: true)
   Transaction transaction = Transaction.findByTransactionId(1)
   // !! it works.... 
```

双子`save()`似乎很尴尬。关于如何消除对它的需要的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T17:20:21.643

如果验证通过，调用[`save()`](http://grails.org/doc/latest/ref/Domain%20Classes/save.html)将返回持久实体，因此没有任何理由在之后单独查找它。我认为您的问题是您正在重新实例化`transaction`变量（使用相同的名称）。如果您必须查找它（我不建议这样做），请将其称为其他名称。此外，`1`如果该列是`AUTO-INCREMENT`.

```
 def a = a.save(flush: true)
      a?.refresh() // for afterInsert()
      Transaction b = (a == null) ? null : Transaction.findByTransactionId(a.id)
      // (Why look it up? You already have it.) 
```

**更新：**

因为您使用的是 `afterInsert()`，Hibernate 可能没有意识到它需要刷新对象。调用后尝试使用[该`refresh()`方法](http://grails.org/doc/latest/ref/Domain%20Classes/refresh.html)`save()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-04T05:29:48.877

这段小代码使它显然可以工作：

```
def afterInsert() {
    transactionId = id
    save() // we need to call save to persist the changens made to the object
} 
```

因此需要在 afterInsert 中调用 save 来持久化在 afterInsert 中所做的更改！

# iphone - 如何在 iPhone 应用程序中解析 HTML 页面数据？

> ID：10849743
> 
> 赞同：3
> 
> 时间：2012-06-01T11:51:54.530
> 
> 标签：iphone, html, objective-c, ios, html-parsing

我不知道如何在 iPhone SDK 中解析 HTML 页面内容？

我有一个 iPhone 应用程序，在这个应用程序中，我需要显示 HTML 页面中的图像和数据。我有一个 HTML 页面 URL，我需要从 HTML 页面 URL 获取数据。谁能指导我从 HTML 页面解析 HTML 内容并在 iPhone 应用程序中显示？

你能帮我么？

**编辑**

我有一个 HTML 格式的网站，例如[http://www.example.com/mobile/403.html](http://www.example.com/mobile/403.html)页面。我想为这个网站开发一个原生 iPhone 应用程序。我的客户不会在 XML 提要中给出响应，所以我需要使用这个站点并解析 HTML 内容。此页面有许多图像、实时数据和表格。到目前为止，我还没有在 iPhone SDK 中解析 HTML 页面/内容。所以我需要你的帮助才能做到这一点？你能帮我么？我希望与旧问题相比很清楚。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:04:34.010

您可以将图像 url 添加到 NSMutableArray 中，如下所示。

```
 NSMutableArray *array = [[NSMutableArray alloc] init];
     NSString *response = [[NSString alloc] initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"index1" ofType:@"html"] encoding:NSUTF8StringEncoding error:nil];
  //  NSLog(@"response == %@", response);
   NSString *regexStr = @"<a href=\"([^>]*)\">";
  //NSString *regexStr = @"<A HREF=\"([^>]*)\">";
    NSError *error;
    NSInteger i =0;
 // NSInteger length =0;
    while (i<[response length]) {
           NSRegularExpression *testRegex = [NSRegularExpression regularExpressionWithPattern:regexStr options:NSRegularExpressionCaseInsensitive error:&error];
        if( testRegex == nil ) NSLog( @"Error making regex: %@", error );
            NSTextCheckingResult *result = [testRegex firstMatchInString:response options:0 range:NSMakeRange(i, [response length]-i)];
 //   NSLog(@"result == %@",result);
            NSRange range = [result rangeAtIndex:1];
            if (range.location == 0) {
            break;
        }
        NSString * imageUrl = [response substringWithRange:range];
        if ([imageUrl hasSuffix:@".jpg"] || [imageUrl hasSuffix:@".gif"] || [imageUrl hasSuffix:@".tiff"] || [imageUrl hasSuffix:@".JPG"] || [imageUrl hasSuffix:@".JPEG"] || [imageUrl hasSuffix:@".png"] || [imageUrl hasSuffix:@".PNG"] || [imageUrl hasSuffix:@".GIF"] || [imageUrl hasSuffix:@".TIFF"]) {
       // NSLog(@"%@",imageUrl);
       // imageUrl = [imageUrl stringByReplacingOccurrencesOfString:@"/syneye_Portfolio/" withString:@""];
            [array addObject:imageUrl];
            //[array retain];
        }
        i= range.location;
        //NSLog(@"%i",range.location);
        i=i+range.length;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:00:20.500

您应该通过网络框架（[例如 AFNetworking](https://github.com/AFNetworking/AFNetworking)）获得 HTML，并使用以下选项之一对其进行解析：

1.  自定义代码
2.  一些 HTML 解析框架（我不知道）
3.  在隐藏的 UIWebView 中加载 HTML 并在里面做一些 Javascript`stringByEvaluatingJavaScriptFromString:`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T14:13:29.067

我仍然不明白你想要什么，但这是 urls 和 html 页面的可能：

1) 页面可以加载到 Safari 中。当然，如果用户有 url，用户可以这样做。但本机应用程序也可以启动 Safari 并为 Safari 提供要加载的页面的 url。但是，本机应用程序无法启动 Safari 并为其提供要加载的实际 html 页面，它必须是 url。

2) 原生应用程序可以使用 UIWebView 来 a) 下载并显示给定 url 的 html 页面或： b) 如果 html 存在于设备上，则将 html 页面提供给 UIWebView，然后 UIWebView 将直接显示它。

3）如果打算只是从html中提取一些文本或一两个图像然后显示它，然后搜索一些帖子/教程然后你可以a）在隐藏的UIWebView中加载html页面并使用Javascript访问 dom 元素或 b) 如果其 xhmlt 使用 xml 解析器来提取您正在查找的 html 标记或 c) 查看是否有可用于 html 的 html 解析框架或 d) 对 html 令牌执行 hack 和字符串搜索直接在html中。

4) 自己解析完整的 HTML 并显示其所有内容。除非这是一个非常非常简单的 html，没有完整的功能集并且无法处理 javascript 等。您是否有一个庞大的团队和多年的空闲时间来编写有效地成为您自己的浏览器的东西。

编辑：您仍然在谈论解析，就好像解析与显示它一样。

如果您只想在 url 上显示 http 页面，请使用 UIWebView。UIWebView 将解析它并显示它。无需您自己解析。或者从您的应用程序启动 Safari（但之后您将无法返回您的应用程序）。

你说不能用 UIWebView？为什么不？

实际尝试自己解析和显示 HTML 页面将是疯狂的。

# linux - 试图在我的服务器的根目录中添加一个新目录

> ID：10849744
> 
> 赞同：1
> 
> 时间：2012-06-01T11:51:58.540
> 
> 标签：linux, ssh, directory-structure, dedicated-server

刚刚从共享主机转移到专用服务器，试图在服务器的根目录中创建两个新目录，但是当我使用 Plesk 控制面板时我得到了这个

错误：无法创建目录 /other-files：filemng：/bin/mkdir 命令期间发生错误。

所以我尝试执行这个

```
$old_umask = umask(0);
$return = mkdir('../other-files', 0770);
umask($old_umask);
var_dump($return); 
```

返回 false

我已经下载了腻子，但我从未使用过 SSH 命令，据我了解，我认为我需要以 root 用户身份创建文件夹，但我真的不想做错事，而且我认为我无法登录以 root 用户身份登录，但我可以执行一个 su 命令，这似乎是我需要做的......有什么帮助吗？

# javascript - 让文字变大

> ID：10849753
> 
> 赞同：-2
> 
> 时间：2012-06-01T11:52:18.203
> 
> 标签：javascript, jquery

如何使文本更大或 div 内的文本？

我真的不知道，帮帮我

就像是：

```
$('div.text'), { FontSize: '40px' }); // <--- this is not real code, just to show what i need 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T11:54:40.287

```
document.getElementById("node1").style.fontSize = "40px"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T11:59:37.727

```
$('.text').css('font-size','40px'); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-01T11:58:49.653

在 jQuery 中，您将这样做的方式是更改 div 的 CSS。这是一个快速的肮脏演示：http: [//jsfiddle.net/wjAqm/](http://jsfiddle.net/wjAqm/)

实际代码是`$("#demo").css("font-size", "20px");`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T11:58:05.227

`css`如果您有可用的 jQuery，请使用函数。这是一个工作示例 - [http://jsfiddle.net/Pharaon/qLuBs/](http://jsfiddle.net/Pharaon/qLuBs/)

```
$('#content').click(function() {
    $(this).css('fontSize', '40px');
}); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-01T11:58:27.567

试试这个：

```
$('#div1').css('fontSize', '20px'); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-01T12:02:40.093

小变焦演示：

```
<button id="bigger">Zoom In</button><button id="smaller">Zoom Out</button>
<div id="text" style="font-size: 1em;">Hello, world.</div>

​&lt;script>

$('#bigger').click( function() { zoom( 1.2 ); } );
$('#smaller').click( function() { zoom( 0.8 ); } );

function zoom( factor ) {
    var div = $('#text');
    var size = div.css( 'font-size' );
    size = parseFloat( size );
    console.log([ 'size', size ]);
    size *= factor;
    div.css( 'font-size', size + 'px' )
}
​&lt;/script> 
```

需要 jQuery 1.7.x。[jfiddle 上的现场演示](http://jsfiddle.net/bxHWr/4/)。

# sql - 从字段列表执行存储过程

> ID：10849757
> 
> 赞同：0
> 
> 时间：2012-06-01T11:52:39.960
> 
> 标签：sql, sql-server-2008, stored-procedures

```
ALTER PROCEDURE [dbo].[HO_GetListOfLeaguesPerLocation]
AS
BEGIN
    SELECT DISTINCT LeagueID, (EXEC dbo.HO_GetLeagueNumOfMatches LeagueID)
    FROM Games
END 
```

我收到一个错误：

> 关键字 EXEC 附近的语法不正确。

当我单独运行此查询时，没有任何其他内容，它运行良好。

我也试过：

```
SELECT DISTINCT LeagueID, dbo.HO_GetLeagueNumOfMatches(LeagueID) 
```

和：

```
SELECT DISTINCT LeagueID, SELECT * FROM dbo.HO_GetLeagueNumOfMatches(LeagueID) 
```

和：

```
SELECT DISTINCT LeagueID, SELECT dbo.HO_GetLeagueNumOfMatches(LeagueID) 
```

没有工作。

知道我应该如何运行这个查询吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T11:54:23.890

您需要为此使用（标量）函数。此处不能使用存储过程。

（您不能将 APPLY 与存储过程一起使用。）

# java - 需要了解我的示例中的 wait() 和 notify() 行为吗？

> ID：10849758
> 
> 赞同：0
> 
> 时间：2012-06-01T11:52:45.577
> 
> 标签：java, multithreading, wait, notify

```
public class class_Q {
volatile boolean valueSet = false;
volatile int n;

synchronized int get()
{  
System.out.println("Now i am in get block and  valueset is : "+ valueSet  );
    if(!valueSet)
    {
        System.out.println("i am waiting in get block.....and releasing lock  ");
    try{
        wait();
    }catch(InterruptedException e)
        {
    System.out.println( "InterruptedException caught" );
        }
    }
    System.out.println( " value of n now in get block is  : " + n );
    valueSet=false;
    notify(); 
    return n; 
}

   synchronized void put(int n)
     {  
System.out.println(" Now i am in Put block and  valueset is : "+ valueSet);
if(valueSet) 
{
try
{
System.out.println("i am waiting in put block......and releasing lock. ");
wait();
}catch(InterruptedException e)
{
System.out.println( "InterruptedException caught" );
}
}
  this.n = n;
  valueSet = true;
  System.out.println( "the value of n now in put block is : " + n );
  notify();   
  } 
```

}

```
 class Producer implements Runnable{
class_Q q;
Producer(class_Q q)
{
this.q = q;
new Thread( this, "Producer" ).start();
}
public void run()
{
    int i = 0;
    while(true)
    {
    q.put(i++);
    }
    }
} 

 class Consumer implements Runnable{
class_Q q;
 Consumer(class_Q q)
 {
    this.q = q;
    new Thread(this, "Consumer").start();
    }
  public void run()
  {
    while(true)
    {
        q.get();
        }
    }
  } 

  class PCFixed {
public static void main (String args[])
{
    class_Q q = new class_Q();
    new Producer(q);
    new Consumer(q);
    System.out.println( "Press Control-C to stop." );   
    }
} 
```

> > > > *****输出******
> 
>  **现在我在 get 块中，valueset 是：false
> 
> 我正在等待获取块.....并释放锁定
> 
> 按 Control-C 停止。
> 
> 现在我在 Put 块中，valueset 是：false
> 
> 现在 put 块中 n 的值是：0
> 
> 现在 get 块中 n 的值是：0
> 
> 现在我在 get 块中，valueset 是：false
> 
> 我正在等待获取块.....并释放锁定
> 
> 现在我在 Put 块中，valueset 是：false
> 
> 现在 put 块中 n 的值是：1
> 
> 现在 get 块中 n 的值是：1
> 
> 在我的输出的第六行之后，我期待 get() 线程唤醒（“notify()”）put() 线程。有人可以帮助我理解调用 get() 线程背后的逻辑（换句话说，为什么它在 get 块中？）**

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T22:35:16.650

我已经重新格式化了您的代码并更改了日志消息，所以一切都应该更加清晰。

```
public class Test {
  static class class_Q {
    volatile boolean valueSet = false;
    volatile int n;

    synchronized int get() throws InterruptedException {
      System.out.println("get entering - valueSet=" + valueSet);
      // *** Changed from `if` to `while`
      while (!valueSet) {
        System.out.println("get waiting");
        wait();
      }
      // Clear to set the value.
      valueSet = false;
      // Tell any put waits to finish
      notify();
      System.out.println("get finished - n=" + n);
      return n;
    }

    synchronized void put(int n) throws InterruptedException {
      System.out.println("put entering - valueSet=" + valueSet);
      // *** Changed from `if` to `while`
      while (valueSet) {
        System.out.println("put waiting");
        wait();
      }
      this.n = n;
      valueSet = true;
      System.out.println("put finished - n=" + n);
      notify();
    }
  }

  static class Producer implements Runnable {
    class_Q q;

    Producer(class_Q q) {
      this.q = q;
    }

    public void run() {
      int i = 0;
      try {
        while (true) {
          q.put(i++);
          System.out.println("put(" + (i-1) + ")");
        }
      } catch (InterruptedException ex) {
        // Just exit the run loop and finish when interrupted.
      }
    }
  }

  static class Consumer implements Runnable {
    class_Q q;

    Consumer(class_Q q) {
      this.q = q;
    }

    public void run() {
      try {
        while (true) {
          int i;
          i = q.get();
          System.out.println("get(" + i + ")");
        }
      } catch (InterruptedException ex) {
        // Just exit the run loop and finish when interrupted.
      }
    }
  }

  public static void main(String args[]) {
    class_Q q = new class_Q();
    Thread producer = new Thread(new Producer(q));
    Thread consumer = new Thread(new Consumer(q));
    System.out.println("Press Control-C to stop.");
    producer.start();
    consumer.start();
  }
} 
```

我也做了三个主要的改变。我已经让`interrupted`机制退出了你的线程。我已经让您的阻塞测试在阻塞状态下循环，而不仅仅是检查它们（`while (x)`而不是`if (x)`）。我已经让你的线程不会自动启动。

我认为如果你现在运行这段代码，流程应该更清晰，你应该能够更好地理解正在发生的事情。请记住，这`System.out`是 a `PrintWriter`，因此可以被缓冲。

我得到的输出是：

```
输入 - valueSet=false
完成 - n=0
放(0)
输入 - valueSet=true
等待
按 Control-C 停止。
进入 - valueSet=true
完成 - n=0
完成 - n=1
放(1)
输入 - valueSet=true
等待
得到（0）
进入 - valueSet=true
完成 - n=1
完成 - n=2
放(2)
输入 - valueSet=true
等待
得到（1）
进入 - valueSet=true
完成 - n=2
得到（2）
进入 - valueSet=false
等待
完成 - n=3
完成 - n=3
得到（3）
进入 - valueSet=false
等待
放(3)
输入 - valueSet=false
完成 - n=4
完成 - n=4
得到（4）
进入 - valueSet=false
等待
放(4)
...

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:13:47.397

> 在我的输出的第六行之后，我期待 get() 线程唤醒（“notify()”）put() 线程。有人可以帮助我理解调用 get() 线程背后的逻辑（换句话说，为什么它在 get 块中？）

Producer 启动，调用 put，`valueSet`为 false，从函数返回，再次调用 put，`valueSet`为 true，所以他必须等待......如果没有 notify in `get`，那么 Producer 将永远被阻塞，即使 Consumer 已读取写入的值。 ..

in each 用于向进程中领先的另一个参与者发出信号，该`notify`参与者正在等待后面的线程，他们现在都在同一个位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T12:23:17.390

这是带有阻塞队列的经典生产者-消费者模式。如果队列已满，则将数据写入队列并阻塞（在队列的当前实现大小中 - 单个元素）。消费者从队列中读取数据并在队列为空时阻塞（等待）。

1 您使用 valueSet = false 调用 get()。它在 wait() 处停止。

2 您调用 put() 来通知（）您的队列对象并解锁在 get() 方法中等待的线程的执行。**

# javascript - 选择单选按钮时更改隐藏的输入字段值

> ID：10849759
> 
> 赞同：2
> 
> 时间：2012-06-01T11:52:46.183
> 
> 标签：javascript, jquery, html

每次用户检查单选按钮时，我都想更改隐藏输入字段的值。

这就是我的 HTML 的样子。

```
<input type="hidden" id="ZAAL_NAME" value="" name="ZAAL_NAME" />

<input type="radio" name="zaal_ID" value="ROOM1" onclick="change">
<input type="radio" name="zaal_ID" value="ROOM2" onclick="change"> 
<input type="radio" name="zaal_ID" value="ROOM3" onclick="change"> 
```

现在我希望每次检查单选按钮时，该单选按钮的值也成为隐藏输入字段的值。有人知道该怎么做吗？这是我到目前为止所拥有的。

```
 $('input[name="radbut"]').click(function() {
    console.log(this.value);
    $('ZAAL_NAME').val(this.value);
}); 
```

有人可以帮忙吗？

亲切的问候，

史蒂芬

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T11:59:22.710

您的内联`onclick`处理程序将不起作用，因为您没有包含括号：它需要`onclick="change()"`实际调用您的函数。但是您应该将其更改`onclick="change(this);"`为将对单击的按钮的引用传递给您的函数，然后：

```
function change(el){
    $("#ZAAL_NAME").val(el.value) ;
} 
```

此外，您的 jQuery 选择器需要一个 # 来按 id 选择。

更好的是从您的标记中删除内联`onclick`并这样做：

```
$('input[name="zaal_ID"]').click(function() {
    $('#ZAAL_NAME').val(this.value);
}); 
```

后者需要位于文档就绪处理程序和/或出现在页面源中单选按钮之后的脚本块中。

注意：当获取被点击元素的值时，您可以说`$(el).val()`or `$(this).val()`（取决于您正在查看的两个函数中的哪一个），但是鉴于`el`and`this`是对 DOM 元素的引用，您可以直接使用`el.value`or获取其 value 属性`this.value`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T11:57:02.640

```
$('input[name="zaal_ID"]').change(function(){
   $('#ZAAL_NAME').val( this.value );
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T11:56:26.860

```
function change(){
   $("ZAAL_NAME").val( $(this).val() ) ;
} 
```

或者

```
function change(){
   $("ZAAL_NAME").val($("input[type='radio']:checked").val()) ;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T11:58:50.283

尝试 -

```
$(':radio').change(function(){
   $('#ZAAL_NAME').val($(this).val());
}) 
```

演示：http: [//jsfiddle.net/KMXnR/](http://jsfiddle.net/KMXnR/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-01T12:04:26.067

像这样使用`onclick="change(this.value);"`和函数使用

```
function change(e){
    $("ZAAL_NAME").val(e) ;

} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-01T11:56:12.443

你可以使用是

```
$("input:radio[name=ZAAL_NAME]").click(function() {
     var value =  $(this).val(); 
     // or $('input:radio[name=theme]:checked').val(); 
     $("#ZAAL_NAME").val(value); 
 }); 
```

简而言之

```
$("input:radio[name=ZAAL_NAME]").click(function() {
     $("#ZAAL_NAME").val( $(this).val() ); 
 }); 
```

# iphone - 如何让 UIWebView 平滑滚动？

> ID：10849760
> 
> 赞同：1
> 
> 时间：2012-06-01T11:52:51.097
> 
> 标签：iphone, objective-c, ios, xcode, uiwebview

我`UIWebView`在我的应用程序中使用 a 。当它有很多图片并且仍在加载时，它会突然滚动。

我怎样才能`UIWebView`像在 Mobile Safari 中一样平滑滚动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:19:55.933

您可以缓存图像并从缓存中加载它们以加快渲染速度。看看下面的答案。

1.[如何保存 UIWebView 中的内容以便下次启动时更快加载？](https://stackoverflow.com/questions/1343515/how-to-save-the-content-in-uiwebview-for-faster-loading-on-next-launch)

2.[需要UIWebView中的内容快速显示](https://stackoverflow.com/questions/1246420/need-content-in-uiwebview-to-display-quickly)

3.[用本地数据代替远程UIWebView请求](http://cocoawithlove.com/2010/09/substituting-local-data-for-remote.html)

# java - 如何暂停计时器线程

> ID：10849765
> 
> 赞同：1
> 
> 时间：2012-06-01T11:53:10.590
> 
> 标签：java, timer, timertask

我想暂停“计时器”线程....或者我可以说想要将其置于“等待”模式，然后在完成某些事情后通知。

`Timer _catchTimer = new Timer(); CatchAppNameTimer _catchTimerTask = new CatchAppNameTimer(_catchTimer); _catchTimer.schedule(_catchTimerTask, 0, 5000);`

我的“TimerTask（_catchTimerTask）”每次都显示一个弹出屏幕......该弹出屏幕有两个按钮 - 解锁，取消。

基本上我想要那个直到用户点击......解锁/取消btn之一，时间线程设置为等待模式......当用户点击解锁/取消按钮之一...... ....只有在那之后时间线程才会得到通知。

目前我在“timertask”的运行方法中使用一个布尔变量......来处理死锁情况......即每隔几秒调用一次TimerTask......即使已经弹出屏幕显示…………

如下 ：

```
public void run() { 

GlobalSingleton obj = null; 
  obj = GlobalSingleton.getInstance(); 
  if( obj.getShowDialog() ) 
        return;

   unlockField();
} 
```

当第一次调用“unlockFiled()”时......我将一个布尔变量设置为 true（使用运行时存储）......该值由 getShowDialog() 方法检索。并且在

`fieldChanged(Field field, int context) { }`解锁/取消按钮的方法............我将布尔变量的值设置为false......通过调用......

`GlobalSingleton obj = null; obj = GlobalSingleton.getInstance(); obj.setShowDialog(false);`

但是正确的方法是“计时器任务”不应该再次启动......直到用户按下取消阻止/取消按钮并且控制退出该`fieldChanged(Field field, int context) { }`方法。

我应该使用不同的线程来处理....等待 - 通知 Timer 对象上的操作....基于布尔变量。我已经尝试过这种方法............但无法得到解决方案......

我将不胜感激任何建议....

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:09:44.423

正如我所不明白的那样，你有一个线程正在监听一些事件并执行这些事件。Mayby 生产者-消费者模式将有助于：

1 您有将消息放入队列的生产者

2 你有 BlockingQueue 存储你的消息

3 您有从 BlockingQueue 读取消息的线程（如果队列为空线程正在等待消息）并且取决于消息它显示/隐藏您的对话框。

认为这将是最简单和清晰的实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:22:19.663

使用另一个线程监视您的 TimerTask。并在满足时指定某种 while 循环的条件，只需通知您的 Timetask 停止作业。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-15T08:50:03.110

感谢 BOSS 和 Alexey 的贡献，我已经解决了我的问题，一个连续运行的线程休眠了 1 秒。

我的解决方案在 - [解决方案](http://supportforums.blackberry.com/t5/Java-Development/how-to-pause-the-timer-thread/m-p/1744855#M200757) 或：[主线程](http://supportforums.blackberry.com/t5/Java-Development/how-to-pause-the-timer-thread/m-p/1743415)上给出 如果您发现我的解决方案有帮助，请投票，因为我需要一些声誉才能开始在黑莓房间聊天。

谢谢。

# cocoa - 单击 TableView 单元格时如何显示更多详细信息？

> ID：10849766
> 
> 赞同：1
> 
> 时间：2012-06-01T11:53:15.303
> 
> 标签：cocoa, nstableviewcell

我有一个 TextView，输入到 TextView 的任何文本都可以保存到 TableView（或者我应该说 NSMutableArray！）。我有这个工作没有问题。我现在遇到的问题是因为可以在 TextView 中输入大量文本，但并非所有文本都在 TableView 单元格中可见。我不想让 TableView 单元格变大，并希望将它们保持在当前大小。

最终，我希望能够单击 TableView 单元格，它将向用户显示所有文本，以便在需要时能够阅读和编辑，然后使用更新的详细信息将其保存回原始 TableCell。

我想不出这样做的方法，并希望对此有任何帮助....谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T07:59:45.643

您可以通过两种不同的方式实现此功能，具体取决于您的设计要求：

*   表内编辑：用户单击单元格，文本变为可编辑。您应该能够通过实现基于视图的表格视图来实现这一点。只需将一个添加`NSTextView`到您的视图并设置`setHidden:YES`. 当用户单击单元格时，您会显示`NSTextView`. 完成编辑后（通过单击按钮或单击另一个单元格？？？），您可以更新模型并`NSTextView`再次隐藏。为此，您需要一个基于视图的`NSTableView`.

*   使用`NSPopover`. 当用户单击单元格时，您会显示一个单独`NSView`的包含所有编辑控件的单元格，并以`NSPopover`. 通过将单元格的边界传递给弹出框，您可以将弹出框“附加”到您正在编辑的特定单元格。编辑完成后，您可以更新模型并关闭弹出框。

# android - 我可以为 android 3.0 编写一个 opengl es 2.0 吗？

> ID：10849767
> 
> 赞同：-1
> 
> 时间：2012-06-01T11:53:19.053
> 
> 标签：android, opengl-es

我刚刚开始使用适用于 android 3.xx 的 opengl es 2.0 但我面临着不断的强制关闭。我无法弄清楚 Log Cat 中的消息。所以我只是想知道opengl es 2.0是否仅在android 4.x中受支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T11:55:07.093

Android OS 2.2 及更高版本支持 OpenGL es 2.0 [**（来源）**](http://developer.android.com/guide/topics/graphics/opengl.html)。问题可能出在其他地方

# asp.net-mvc-3 - 如何在模块 Orchard 中覆盖列表形状渲染

> ID：10849771
> 
> 赞同：0
> 
> 时间：2012-06-01T11:53:24.817
> 
> 标签：asp.net-mvc-3, dynamic-data, orchardcms, shape

我还是果园的新手。

我有两种内容类型定义如下

```
public int Create() {
            // Define the tab list type which will
            // contain body details, common, route, menu and be a container
            ContentDefinitionManager.AlterTypeDefinition("TabList",
                cfg => cfg
                    .WithPart("BodyPart")
                    .WithPart("CommonPart")
                    .WithPart("RoutePart")
                    .WithPart("MenuPart")
                    .WithPart("ContainerPart")
                    .Creatable());

            // Define the tab type which will
            // contain body details, common, be containable.
            ContentDefinitionManager.AlterTypeDefinition("Tab",
                cfg => cfg
                    .WithPart("BodyPart")
                    .WithPart("TitlePart")
                    .WithPart("CommonPart")
                    .WithPart("ContainablePart")
                    .Creatable());
            return 1;
        } 
```

我正在尝试将模块中的列表标记渲染从：

```
<ul>
<li>...content-item</li>
...
</ul> 
```

至

```
<ul>
<li>content-item.Title</li>
...
</ul>
<ul>
<li>content-item.Body</li>
...
</ul> 
```

而且我只希望仅针对此模块更改列表呈现。

有人可以指点我一个方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T23:29:10.293

阅读这个：[http](http://weblogs.asp.net/bleroy/archive/2011/03/27/taking-over-list-rendering-in-orchard.aspx) ://weblogs.asp.net/bleroy/archive/2011/03/27/taking-over-list-rendering-in-orchard.aspx和这个：[http ://weblogs.asp.net/bleroy /archive/2011/05/23/orchard-list-customization-first-item-template.aspx](http://weblogs.asp.net/bleroy/archive/2011/05/23/orchard-list-customization-first-item-template.aspx)

# firefox-addon - firefox插件，将数据保存在简单存储中

> ID：10849777
> 
> 赞同：1
> 
> 时间：2012-06-01T11:53:45.487
> 
> 标签：firefox-addon, firefox-addon-sdk

我正在尝试使用 Firefox Addon Builder 创建一个 Firefox 插件。

我无法弄清楚我如何将数据保存在“简单存储”中。

`main.js`：

```
var data = require("self").data;

var ss = require("simple-storage");
if(typeof(ss.storage.bl) === 'undefined') {
  ss.storage.bl = [];
}
blacklist = ss.storage.bl;

exports.main = function(){
    var pageMod = require("page-mod");
    pageMod.PageMod({
        include: "*",
        contentScriptWhen: 'end',
        contentScriptFile: [data.url("jquery.min.js")] 
    });

    var contextmenu = require("context-menu");
    contextmenu.Item({
        label: "block",
        context: contextmenu.SelectorContext("a[href]"),
        contentScriptFile: [data.url("jquery.min.js"),data.url("onclick.js"),data.url("core.js")]     
    }); 
}; 
```

`onclick.js`：

```
self.on("click", function (node) {
    user = node.href.substring(node.href.lastIndexOf('/') + 1);

    blacklist.push(user);

    blockthis();
}); 
```

一直出现这个错误：

> onclick.js，
> blacklist.push(user) 中的第 4 行
> ReferenceError: blacklist is not defined

链接：[https ://builder.addons.mozilla.org/addon/1054941/latest/](https://builder.addons.mozilla.org/addon/1054941/latest/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:51:34.167

内容脚本和您的扩展代码不在同一个上下文中运行 - 它们不共享任何变量，因此您不能简单地从上下文中的扩展访问变量。此外，您不能在内容脚本中使用 SDK 模块。内容脚本应该向扩展发送一条消息，并让它执行所有必要的操作：

```
self.on("click", function (node) {
    user = node.href.substring(node.href.lastIndexOf('/') + 1);
    self.postMessage(user);
    blockthis();
}); 
```

并在`main.js`：

```
contextmenu.Item({
    label: "block",
    context: contextmenu.SelectorContext("a[href]"),
    contentScriptFile: [data.url("jquery.min.js"),data.url("onclick.js"),data.url("core.js")],
    onMessage: function(user)
    {
      blacklist.push(user);
    }
}); 
```

[更多信息](https://addons.mozilla.org/en-US/developers/docs/sdk/1.6/dev-guide/guides/content-scripts/using-postmessage.html)

# firefox - 如何更改音量混合器中显示的 Mozilla 名称？

> ID：10849781
> 
> 赞同：0
> 
> 时间：2012-06-01T11:53:50.573
> 
> 标签：firefox

我尝试更改 Mozilla Firefox 的品牌名称，它改变了浏览器的显示，但在音量混合器中显示的名称仍然相同。我该如何改变呢？

# ruby-on-rails-3 - 何时将模型拆分为两个单独的模型？

> ID：10849786
> 
> 赞同：1
> 
> 时间：2012-06-01T11:54:13.483
> 
> 标签：ruby-on-rails-3, ruby-on-rails-3.1

我有一个名为`Price`以下列的模型：

```
create_table :prices do |t|
   t.decimal :cost
   t.integer :product_id
   t.integer :store_id
   t.decimal :cost_per_unit
   t.decimal :unit_amount
   t.string  :unit
end 
```

在我的应用程序中，价格可以使用`cost`列，也可以使用其他 3 `cost per unit`、、`unit amount`和`unit`。既然我有这个规则，那么创建另一个名为`PricePerUnit`or的模型是否明智`UnitPrice`？现在我打算只使用价格模型和两个单独的表格。你会怎么办？如果我计划有专门处理这两种不同价格类型的列，从长远来看，什么会更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T13:58:02.737

具有可为空的列并不是很好，特别是如果您打算查询它们。如果拥有单独的类（和表）不会让你的生活更加困难，我肯定会创建两个不同的类（和表）来处理这些情况。

如果您不打算查询这些列并且拥有一个类更简单，那么我看不到这样做有很多改进。

# ios - 在异步调用 IOS 后执行 segue

> ID：10849799
> 
> 赞同：0
> 
> 时间：2012-06-01T11:55:10.620
> 
> 标签：ios, xcode4.3, segue

在对服务进行异步调用之后，我想执行 segue。

在一节课上，我打了电话，我接到了。

```
dispatch_async(dispatch_get_main_queue(), ^(){
            NSLog(@"json arrived");
            SearchViewController *searchVCObj =[[SearchViewController alloc]init];
                     [searchVCObj performSegueSinceInfoCamed:sender];
        }); 
```

现在我想在我放的另一个类中执行一个 segue：

```
-(IBAction)performSegueSinceInfoCamed:(id)sender
{  
    [self performSegueWithIdentifier:@"MySegue" sender:self];
} 
```

但我收到一个错误：“NSInvalidArgumentException”，原因：“Receiver () has no segue with identifier 'MySegue''”

女巫是“假的”，因为它存在。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T19:00:23.340

您必须直接在控制器之间创建一个 segue，而不是从 UIButton 到 ViewController。然后 segue 将存在于控制器上，并且可以通过它的标识符来调用。

# php - pChart - 语言问题

> ID：10849801
> 
> 赞同：0
> 
> 时间：2012-06-01T11:55:19.393
> 
> 标签：php, charts, pchart

我正在使用 pChart。我的网站有英语和其他语言的内容。我可以在显示图表的同一页面中打印和查看所有语言。但图表内部（即生成的.png）部分内容不显示。请看下图。我在页面中打印了一个数组。它被显示了。但在右上角，您可以找到一些不清楚的内容。

![在此处输入图像描述](../Images/4b529fd8e5154e57c4d4904f00fa99da.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T11:57:39.567

似乎您使用的字体不接受您要打印的字符。尝试使用不同的字体。

# winforms - 通过 WCF 使用实体框架

> ID：10849804
> 
> 赞同：0
> 
> 时间：2012-06-01T11:55:25.323
> 
> 标签：winforms, wcf, entity-framework, architecture, entity-framework-4

我想使用实体框架来管理对数据的访问。Windows 应用程序将调用服务器上的 WCF 服务，然后服务器将使用实体框架来读取和写入数据库。

谁能指出我如何解决这个问题的正确方向？也许一些示例代码可以开始？

想到但我不确定如何解决的问题是：

1) 并发性 - 每个用户都需要有一个单独的上下文，他可以对其进行更改然后保存它们？

2）连接——如果我们有很多上下文，数据库会被连接淹没吗？

3) WCF 服务能否应对这种负载？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:14:13.240

我建议你看看这里： http: [//msdn.microsoft.com/en-us/magazine/ee321569.aspx](http://msdn.microsoft.com/en-us/magazine/ee321569.aspx) 你可以使用一些不错的模式，尤其是自我跟踪实体。

1) 在 WCF 中（默认情况下，您可以更改此设置），每次调用服务，都会生成服务的另一个实例。所以每个用户都会有自己的上下文，但每次调用，所以我想你需要更多。我不确定，您的意思是，每个用户都应该有自己的上下文作为 EF 上下文类的实例，或者他们应该通过不同的凭据进行连接，以使他们能够访问不同的数据......

2）你所说的被淹没是什么意思？如果 1000 个用户将在 1 秒内更新数据库，那么是的，数据库将不得不处理 1000 个查询。但是有一种叫做连接池的东西，只要谷歌它。

3）你的意思是什么“负载”？作为“在这种情况下，我可以使用 WCF 处理多少用户”？

# c# - 在主页中的 page_load 方法之前调用 Javascript 脚本

> ID：10849811
> 
> 赞同：0
> 
> 时间：2012-06-01T11:56:21.337
> 
> 标签：c#, javascript, asp.net

我需要在 MasterPage.cs 中的 page_load 方法之前调用一个 javascript 脚本。

我需要这样做，因为我想恢复将在 page_Load 方法中使用的 javascript 变量。

有人知道怎么做吗？

谢谢，

昆汀

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:09:35.543

在 Page_Load 开始或在 Page_Init 方法中，您可以调用 javascript，如：

```
ClientScriptManager cs = Page.ClientScript;
cs.RegisterStartupScript(this.Page.GetType(), "TestKey", "YourJavascriptMethod();", true); 
```

# c# - 试图找出一种优雅的方式来在 ASP.NET MVC 请求管道中的对象之间持久化数据

> ID：10849822
> 
> 赞同：0
> 
> 时间：2012-06-01T11:57:21.610
> 
> 标签：c#, asp.net, asp.net-mvc, httprequest

框架：ASP.Net MVC 3

当一个请求进来时，我通过一个全局过滤器拦截请求并基于子域执行数据库查找。从 DB 查找返回的 int 需要持久化到其他对象（即控制器），以便在可能需要该数据时无需再次执行 DB 命中。

我希望避免使用 cookie，因为此信息是系统的相关部分，我不想依赖启用的 cookie。

我在[这里](https://stackoverflow.com/questions/2471815/standard-way-to-persist-data-between-requests-in-asp-net-mvc)和[这里](https://stackoverflow.com/questions/678872/how-to-persist-a-data-set-between-mvc-calls)阅读了相关问题，但没有提供任何好的答案。

我其实有两个问题：

1.  到目前为止，我已经提出了一个子域管理器对象，它可以完成繁重的工作，并通过我的 IoC 将管理器对象设置为 HTTP 请求范围，并且我可以在请求期间随时获取该管理器作为可能的解决方案。

    在我查找之后，是否有更好的方法在 MVC 请求管道中的不同对象之间传递这些信息？- 我已经检查了以某种方式将信息放回请求中的想法（这与问题 #2 有关）。

2.  如果您要使用 Request 来存储数据（即拦截请求、执行查找、写入请求），那么保存该信息的逻辑位置在哪里？

    我查看了会话，但这似乎与为会话配置 Web 服务器的方式密切相关，我已经提到我不想使用 cookie。出于安全原因，其他区域（例如发布数据和查询字符串集合）被锁定。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:01:01.873

我认为您使用 IoC 容器和 http 请求范围的第一种方法很好。

对于您的第二个问题：正确的位置是`HttpContext.Items`商店，它在当前请求的生命周期内存储键值对。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T12:07:30.257

1 非常接近。

您的子域管理器可能是一个单例（可能使用您的 IOC 容器），带有一个简单的静态字典，用于在最初加载数据后查找子域。如果您担心发生此初始加载并在多个服务器之间同步而不执行多次数据加载，您可以查看分布式缓存（appfabric、ncache、memcache），具体取决于进行 DB 调用的开销。

但是，我不会使用 HttpContext.Item 来存储 Id。我会使用您的 IOC 容器将其注入您的控制器（可能是属性注入）。使用大多数 IOC 容器，您应该能够在 HttpRequest 开始时触发并持续“用户会话/事务”的生命周期。

NHibernate Burrows 让所有这些都可以轻松实现，这很可笑[http://nhforge.org/wikis/burrow/default.aspx](http://nhforge.org/wikis/burrow/default.aspx)

# java - 将 XML 发送到 JMS 时，我应该使用 TextMessage 还是 BytesMessage

> ID：10849828
> 
> 赞同：10
> 
> 时间：2012-06-01T11:57:41.593
> 
> 标签：java, xml, serialization, character-encoding, jms

我在网上发现了一些非常矛盾的信息，我认为每个不同的 JMS 提供者也可能会改变答案。

我试图了解将 XML 发送到 JMS 系统（例如 ActiveMQ）时是否应该使用

*   BytesMessage ：我可以保证 XML 被正确序列化，并且序言将与实际编码匹配。此外，我可以确定客户端将能够正确获取原始表示。

*   TextMessage ：在许多队列实现中都有用于轻松发送 XML 的 API。我也了解消息附加了“编码”信息。但是我冒着以一种格式编码消息（并将其编写为序言）并将其作为另一种格式接收的风险。

有没有人有明确的答案，或者至少有一些你会选择其中一个的原因？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T12:54:53.150

我同意[jos](https://stackoverflow.com/users/755654/jos)对您的问题的评论。*首先，您应该选择最能表达内容语义*的消息类型。阅读[`TextMessage`](http://docs.oracle.com/javaee/6/api/javax/jms/TextMessage.html)Javadoc，我会这样做：

> 此消息类型可用于传输基于文本的消息，包括具有 XML 内容的消息。

因此，如果您确实在文本消息编码方面遇到问题，那么客户端/服务器端可能存在一些错误配置。但这不应成为滥用主要不是用于文本传输的不同消息类型的动机，例如[`BytesMessage`](http://docs.oracle.com/javaee/6/api/javax/jms/BytesMessage.html).

注意：即使使用`BytesMessage`，您也可能得到错误的编码。想象：

```
// Send that data through JMS
byte[] data1 = "source text".getBytes("ISO-8859-1");

// Receive the byte stream on the other side. Ooops
String data2 = new String(data1, "UTF-8"); 
```

# qt - Qt X11 应用程序配置为 Always on Top

> ID：10849831
> 
> 赞同：1
> 
> 时间：2012-06-01T11:57:50.043
> 
> 标签：qt, x11, xserver, always-on-top

我目前正在尝试在远程 XServer (Exceed) 上执行 Qt X11 应用程序。为了使应用程序窗口始终位于其他显示器之上，我使用以下语句：

```
MainWindow->setWindowFlags(Qt::WindowStaysOnTopHint | Qt::Tool); 
```

如果我在本地 Windows 7 和 Ubuntu 操作系统上执行我的应用程序，它会作为“始终在顶部”应用程序执行。但是，当我将显示信息路由到远程 XServer（超过 x64 v14）时，它开始执行而没有“始终位于顶部”属性。当它失去焦点时，它落后于其他显示器。

我应该在 Qt 代码或 Exceed 产品中进行任何进一步的配置吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:05:02.397

X11 转发不支持此功能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-05T10:50:24.513

首先让我们了解一些术语。您设置的“始终位于顶部”属性不是 X11 的功能，而是所谓的窗口管理器“提示”标准集的一部分，指定为客户端间通信手册和扩展窗口管理器的一部分- 提示。

X11 不处理窗口在屏幕上的位置，这就是窗口管理器所做的。在典型的 X11 系统上，您有一个 ICCCM/EWMH 兼容的窗口管理器，它控制着所有的窗口，一切都很好。这也适用于各种转发，因为对于 X11 服务器，客户端连接的方式无关紧要，客户端之间的所有通信都通过 X11 服务器进行。

现在，在您的情况下，您使用的是 Exceed，它是运行在 Microsoft Windows 桌面之上的 X11 服务器。Windows 自己完成所有的窗口管理，像“Always-On-Top”这样的东西是 Windows 窗口管理代码的策略部分。然而，由于 X11 没有定义策略，只有方法任何类型的 ICCCM/EWMH 信息*永远不会*传递给 Windows 窗口管理。所有 Windows 看到的都是 Exceed 为各个客户端创建的无功能的顶级窗口。

现在你可以在 Exceed 中启动一个 X11 WM，但是这个 WM 只存在于 X11 中，并且由于 X11 没有定义像“Always-On-Top”这样的策略，因此无法告诉 Windows，一个窗口实际上应该保持在顶部。您也可以在“全屏”模式下启动 Exceed，它会打开一个完整的窗口，其中所有 X11 客户端都在他们自己的小桌面上运行。在其中运行的 WM 只会管理其中的 X11 客户端，但同样不能将其信息传递给 Windows。

您实际需要的是某种旁路，它将并行连接到 Exceed，并使 Windows 窗口属性（策略）与 X11 端的 ICCCM/EWMH 保持同步。这样的程序是完全可行的，但我不知道有任何程序可以这样做。

# android - 如何使用源代码在 android 音乐播放器中设置静音选项

> ID：10849832
> 
> 赞同：1
> 
> 时间：2012-06-01T11:57:51.870
> 
> 标签：android, mute

如何从源代码在 Android 音乐播放器中设置静音选项？请帮我。这是我的代码。请检查它并给我你的想法。

```
 mute.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            if(mute.isPressed())

                //audioManager.setRingerMode(AudioManager.RINGER_MODE_SILENT);

                mp.setVolume(0,0);

        else if(mute.isPressed())
                mp.setVolume(0, 1);
        }
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:02:57.020

```
if(!mute.isPressed()) you forgot ! in else if .............

in both if it is mute.isPressed() ...........

and would be better 

    if(mute.isPressed()){
       mp.setVolume(0,0);
    }
    else{ 
      mp.setVolume(0, 1);
    } 
```

因为 mute.isPressed() 是一个布尔值，如果它不是真的，所以不需要检查它是否是假的............

可以在Android中使用代码[ImageView Button Toggle](https://stackoverflow.com/questions/10438014/imageview-button-toggle-in-android)

为你 ：

```
 final ImageView button01 = (ImageView) findViewById(R.id.button01);

    button01.setOnClickListener(new OnClickListener() {
        boolean isPressed = false;
        public void onClick(View v) {
            if (isPressed ) {
                //button01.setImageResource(R.drawable.image01);.
                 mp.setVolume(0,0);
            } else {
               //button01.setImageResource(R.drawable.image02);.
                 mp.setVolume(0,1);
            }
            isPressed = !isPressed ;
        }
    }); 
```

..................................................... …………………………………………………………………………………………………………………………………………

```
alternative answer : 
```

让我们让它变得有趣:)

```
button01.setOnClickListener(new OnClickListener() {
        int state = 0;
         public void onClick(View v) {
             state = (state+1)%2;
             mp.setVolume(0,state);
        }
    }); 
```

看起来不错 ？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:08:51.567

看起来你想试试

```
mute.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
        if(mute.isPressed()){
            mp.setVolume(0,0);
        }
        else if(!mute.isPressed()){
            mp.setVolume(0, 1);
        }
    }}); 
```

问题是您没有正确的括号，并且您没有在 else if 语句中检查正确的表达式。让我们知道这对您有何帮助。

# php - 使用PHP删除图像后如何显示图像

> ID：10849833
> 
> 赞同：2
> 
> 时间：2012-06-01T11:57:59.470
> 
> 标签：php, image-processing, smarty

我正在通过 PHP 动态生成图像并将它们保存在临时目录中并在**smarty**模板中显示它。我希望在 smarty 中显示图像后自动删除图像。
是否可以在智能显示图像之前删除图像并使用缓冲区或其他东西在页面上显示图像？

我的问题是我从网络服务获取图像（以字符串格式）。现在我将字符串转换为 PNG 图像并临时保存。我将图像分配给 smarty 变量，然后模板显示图像。base64 格式的限制是我正在使用“Tikiwiki”cms。我为此创建了一个包含在 CKeditor 中的模块。Tikiwik 中的 Ckeditor 不喜欢图像源中的长 base64 字符串会破坏所有页面源（希望你明白）。
在 smarty 中显示后可以删除图像吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T12:05:55.347

如果您只显示一次图像，则可以将其作为 HTML 中的内联数据而不是 URL 发送到浏览器。

您需要使用数据伪 url 方案：[http ://en.wikipedia.org/wiki/Data_URI_scheme](http://en.wikipedia.org/wiki/Data_URI_scheme)

图像数据本身需要进行 base 64 编码。像这样：

```
<img src="data:image/jpeg;base64,<?= base64_encode(file_get_contents('my_image.jpg')) ?>" /> 
```

一旦您将图像数据读入字符串，您就可以将其删除，或者更好的是，首先不要将其写入磁盘。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T13:07:39.143

我猜您是在某种控制器中生成图像，然后将图像 URL 放入您的 Smarty 模板中。然后将模板呈现并发送到浏览器，之后浏览器通过 HTML 页面中的 URL 请求生成的图像。

现在您要在将图像发送到浏览器后删除它们，以节省磁盘空间：

> 随着时间的推移，临时目录可能会充满图像。我们必须每次都清理它。

在生成资源后删除资源，以后再次需要它们时，这不是一个好的解决方案，因为生成图像是一个占用大量 CPU 的过程，因此您应该尽可能地缓存它们。

这里唯一明智的做法就是获得更多磁盘空间：在生成数据的站点上拥有更多用户需要更多空间。

一个不太糟糕的选择是按照[geon](https://stackoverflow.com/a/10849952/266143)的建议内联图像，但是您说由于“限制”而不能使用 base64。那是什么限制？但是，每个请求都会再次导致图像再次生成。

如果添加磁盘空间不是一个选项，并且图像真的只需要在很短的时间内访问，您可以创建一个`cron`作业来删除超过给定时间未访问的图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T11:59:48.450

尝试通过 php 文件显示图像来读取“图像文件”数据（例如 image.php?imageid=111）

这是 jpeg 图像的示例

```
header ('Content-length: ' .filesize($image_file));
header ('Content-type: image/jpeg');
readfile ($image_file);
unlink($image_file);
die(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T12:01:11.823

我认为不可能按照您所说的方式进行操作，但是您可以这样做。

不要参考实际图像，而是参考代理页面，在其中放置以下代码：

```
$imageUrl = "/images/123.jpg"; // link to image
$imginfo = getimagesize($imageUrl); // get mime info

header("Content-type: " . $imginfo['mime']); // add Content-type header

readfile($imageUrl); // show image

unlink($imageUrl); // delete image 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-01T12:00:29.363

问题是，您永远无法保证图像确实被查看（只要您不使用`data:`@geon 建议的 URI 方法）。这是，你不能确定，图像真的只有你创建它的客户才能看到。

不过，有一种 hacky 解决方法：将图像和随机散列之间的链接存储在用户会话中并传递（并删除）图像，如果此散列出现在 URL 中：

```
if (isset($_GET['_imagelink'])) {
    if (isset($_SESSION[$_GET['_imagelink']])) {
        $path = $_SESSION[$_GET['_imagelink']];
        if (is_file($path)) {
            readfile($path);
            unlink($path);
        }
    }
} 
```

在上一个请求的 Smarty 模板中，您只需要知道秘密`_imagelink`变量并使用`?_imagelink={$_imagelink}`.

缺点是，您需要不时手动清理临时文件夹以自动删除未请求的文件。但是，您可以使用 cron-job 轻松做到这一点（“删除所有匹配`/tmp/*.jpg`超过 1 周的文件”）。

# matlab - matlab中的回归树

> ID：10849836
> 
> 赞同：3
> 
> 时间：2012-06-01T11:58:12.617
> 
> 标签：matlab, machine-learning, decision-tree

我正在尝试在matlab中实现梯度树提升算法，但我需要控制回归树中终端节点（叶节点）的数量。有没有办法使用统计工具箱中的 classregtree 来做到这一点？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-04T18:52:35.347

您可以尝试修剪树。Matlab 以两种方式进行修剪，按级别和按节点。我更喜欢按级别，这样您就可以指定级别的数量，它会为您修剪它。我修剪树的原因是为了避免过度拟合树，如果你有一棵大树，就会发生这种情况。prune 的简单代码是

```
tprune = prune(tree,'level',p) ; 
```

其中 p 是层数。您可以为 'p' 构建一个 for 循环，以便它会不断修剪，直到满足您的规范。

# batch-file - 从 Net Start 命令到 Find 命令的管道是什么意思？

> ID：10849838
> 
> 赞同：1
> 
> 时间：2012-06-01T11:58:28.623
> 
> 标签：batch-file, find

这方面的一个例子是：

```
NET START | FIND "MSSQLSERVER" > nul 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:05:08.327

我认为这个命令行没有多大意义，但无论如何：

`NET START`列出所有正在运行的服务，此命令的输出将发送到该`FIND`工具，该工具会在给定的输入中搜索字符串“MSSQLSERVER”。如果输入的任何一行与搜索条件匹配，find 会在屏幕上打印这些行，除非在这种情况下，输入被发送到空设备。这是部分：> nul。

# objective-c - 在ios中的地图上绘制路径

> ID：10849840
> 
> 赞同：1
> 
> 时间：2012-06-01T11:58:39.720
> 
> 标签：objective-c, ios4, ios5, mapkit, xcode4.3

我有一个代码，我想在其中显示地图上两点之间的路径。问题是它显示了正确的路线以及点的位移，即它也连接了起点和终点。

但是，如果我不使用循环而不是使用循环，则代码可以正常工作。是不是像 CGContextCloseGraph() 在循环中自动调用？

请帮帮我。这是我的代码。

```
 - (void)drawRect:(CGRect)rect
     {

     if(!self.hidden && nil != self.points && self.points.count > 0)
     {
       CGContextRef context = UIGraphicsGetCurrentContext(); 

       if(nil == self.lineColor)
        self.lineColor = [UIColor blueColor];

       CGContextSetStrokeColorWithColor(context, self.lineColor.CGColor);
       CGContextSetRGBFillColor(context, 0.0, 0.0, 1.0, 1.0);

       CGContextSetLineWidth(context, 2.0);

               // This Loop doesnt works..

       for(int i = 0; i < self.points.count; i++)
       {
           CLLocation* location = [self.points objectAtIndex:i];
             CGPoint point = [_mapView convertCoordinate:location.coordinate toPointToView:self];

        if(i == 0)
        {
            // move to the first point
            CGContextMoveToPoint(context, point.x, point.y);
        }
        else
        {
            CGContextAddLineToPoint(context, point.x, point.y);
        }
        }
               // This works..

              /*CLLocation* location = [self.points objectAtIndex:0];
              CGPoint point = [_mapView convertCoordinate:location.coordinate toPointToView:self];

            CGContextMoveToPoint(context, point.x, point.y);

            location = [self.points objectAtIndex:1];
            point = [_mapView convertCoordinate:location.coordinate toPointToView:self];
            CGContextAddLineToPoint(context, point.x, point.y);

           location = [self.points objectAtIndex:2];
           point = [_mapView convertCoordinate:location.coordinate toPointToView:self];
           CGContextAddLineToPoint(context, point.x, point.y);
           location = [self.points objectAtIndex:3];
           point = [_mapView convertCoordinate:location.coordinate toPointToView:self];
           CGContextAddLineToPoint(context, point.x, point.y);
           location = [self.points objectAtIndex:4];
           point = [_mapView convertCoordinate:location.coordinate toPointToView:self];
           CGContextAddLineToPoint(context, point.x, point.y);
           location = [self.points objectAtIndex:5];
           point = [_mapView convertCoordinate:location.coordinate toPointToView:self];
           CGContextAddLineToPoint(context, point.x, point.y);*/

    CGContextStrokePath(context);
    }
     } 
```

# html - Mozilla Firefox 和 Internet Explorer 之间的字体差异

> ID：10849849
> 
> 赞同：7
> 
> 时间：2012-06-01T11:59:25.837
> 
> 标签：html, css, browser, fonts, font-size

我敢打赌，这是一个很常见的问题，我认为无法解决，但至少我会尝试。

**看看这张图片：** ![http://i.imgur.com/nHPNr.jpg](../Images/b7c742c1c11aa7748f3a94e1da947603.png)

转到以下 URL 以获得更大的图像：http: [//i.imgur.com/nHPNr.jpg](https://i.imgur.com/nHPNr.jpg)

**HTML 代码：**

```
<div style="font-family: Arial, sans-serif; font-size: 60px; letter-spacing: 0px; padding: 0; margin: 0;">TEXT GOES HERE</div> 
```

如您所见，字体看起来不一样。有没有办法解决这个问题？

*   Internet Explorer 版本：9.0.8112.1641 64 位版本
*   火狐浏览器版本：13.0

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T12:10:54.007

有一种方法可以解决这个问题：将其设为图像。

文本的渲染方式取决于很多因素，例如安装的字体、操作系统、渲染校准、字体平滑和渲染参数。如果这些参数中的任何一个不同，结果就会不同。

如果您检查您的图像，您会发现浏览器使用不同的字体平滑参数，其他参数也可能不同。

在不同的浏览器中呈现文本时，您根本无法期望得到相同的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:22:33.680

[Lettering.js](http://letteringjs.com/)是一个 jQuery 插件，可用于精确地对字母进行字距调整。结果可能会有所不同

# ruby-on-rails - Rails 在页面中调用编辑操作

> ID：10849854
> 
> 赞同：0
> 
> 时间：2012-06-01T11:59:56.727
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing, crud

我确信这是常见的要求，但我是 Rails 新手，我曾尝试寻找问题，但运气不佳。

我有一个表格，我已经用数据库中的特定条目的值预先填充了它。用户应该能够更改这些值，然后点击“编辑”按钮，然后去编辑数据库中的值。

我想在不使用标准 /1/edit url 路径的情况下从页面中调用编辑操作。基本上我想通过将特定条目的 id 直接传递到方法中来调用 .find(params[:id]) 。

这样做的最佳“导轨方式”是什么？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:11:29.023

这个特殊的方法是在按钮按下时调用的？点击链接？重心改变？

您始终可以像这样向服务器发送参数：

```
<%= link_to "Your action", yourcustomaction_path(:id => @object.id) %> 
```

或者像这样：

```
<%= text_field_tag "yourattribute", params[:this_field_attribute] %> 
```

您不必总是调用默认的编辑操作，您可以简单地在 routes.rb 中创建另一个路由

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T18:03:45.180

或者您可以更进一步，使用 in_place_editing gem。无需按钮和远程表单。

# javascript - 在 Sammy 中使用预编译的模板

> ID：10849861
> 
> 赞同：1
> 
> 时间：2012-06-01T12:00:18.013
> 
> 标签：javascript, templates, sammy.js, client-templates, brunch

Sammy 有很多使用模板语言的功能。但是，在使用[brunch](http://brunch.io/)时，服务器会为我预编译所有模板，这是非常需要的。

所以它们都可以作为 java 函数使用，我如何将它们与 Sammy 一起使用？

# javascript - 有效地在页面上呈现许多选择框

> ID：10849879
> 
> 赞同：1
> 
> 时间：2012-06-01T12:01:22.350
> 
> 标签：javascript, jquery, html

我正在开发一个 Web 应用程序，该应用程序大量使用带有选择下拉列表的网格进行数据输入。网格由多行选择框组成。在某些情况下，页面上可能同时有数百个选择框。

目前，我渲染网格类似于以下方法：

```
function render(jsonData) {
    var html = [];
    $.each(jsonData.Rows, function (i, row) {
        html.push('<tr data-id="', row.Id, '"><td>');
        renderSelect(html, globalVar.ArrayX, row.ValueX);
        html.push('</td><td>');
        renderSelect(html, globalVar.ArrayY, row.ValueY);
        html.push('</td><td>');
        ...
        html.push('</tr>');
    });
    $('tbody#container').html(html.join(''));
}

function renderSelect(html, set, selectedValue) {
    html.push('<select>');
    $.each(set, function (i, item) {
        html.push('<option value="', item.Id, '"', item.Id === selectedValue ? ' selected="1"' : '', '>', item.Name, '</option>');
    });
    html.push('</select>');
} 
```

大多数选择框都有相同的选项，只是每行选择的项目不同（所以我不能简单地缓存选择框 html）。

性能并不可怕，Chrome 在 1 秒内渲染网格，FF 和 IE 在大约 2 秒内渲染。我仍然想知道，是否有更高效的内存/性能替代方法来创建这些选择框，也许可以通过某种方式来引用它们为每一行重新创建它们？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T12:22:40.303

创建一次*选择*并使用克隆将其放置在您需要的位置。如果 HTML 结构实际上是相同的，那么您之后要做的就是为每个*选择选择适当的值*

[http://api.jquery.com/clone/](http://api.jquery.com/clone/)

您的另一种选择是在*每个*语句之前为*select*创建一个 html 数组，将其加入一个字符串，然后在*每个*语句中将其应用于您的 html 的其余部分，在添加后选择您选择的*选项*。（我希望这是有道理的。）

 ***无论哪种方式，事先编写您的行和选择框，为每个循环克隆它（或复制字符串），并为每个循环单独选择*选项*，这将是您性能最高的选项。

这是使用克隆的一种可能的解决方案。它没有利用操作字符串而不是追加的性能，但您可以为您的目的提出一个替代版本。

```
// construct your html ahead of time
var rowHtml = [];
rowHtml.push('<tr"><td>');
rowHtml.push('<select>');
$.each(globalVar.ArrayX, function (i, item) {
    rowHtml.push('<option value="', item.Id, '"', '>', item.Name, '</option>');
});
rowHtml.push('</select>');
rowHtml.push('</td><td>');
$.each(globalVar.ArrayY, function (i, item) {
    rowHtml.push('<option value="', item.Id, '"', '>', item.Name, '</option>');
});
rowHtml.push('</select>');
rowHtml.push('</td><td>');
rowHtml.push('</tr>');
var rowTemplate = $(rowHtml.join(''));

// make a variable for the container once so we can save time performing the DOM lookup
var container = $('tbody#container');

$(jsonData.Rows).each(function (i, row) {
    // since I have to do lookups I've chosen to manipulate attributes using jquery
    // this should move quickly now that we are just cloning
    var clone = rowTemplate.clone();
    clone.attr("data-id", row.Id);
    $("select option[value=" + row.ValueX + "]", clone).attr("selected", "selected");
    container.append(clone);
}); 
```

另一种选择是，如果您不想进行 jquery 克隆和查找，则可以进行字符串操作，在其中查找*value="X"*语句的索引并插入您的*selected=selected*。***

# cordova - Phonegap 上的 iPhone 键盘操作

> ID：10849883
> 
> 赞同：1
> 
> 时间：2012-06-01T12:01:34.220
> 
> 标签：cordova, sencha-touch, extjs, sencha-touch-2

我目前正在使用 Phonegap 1.6.1 和 Sencha Touch 2 开发应用程序 fi iPhone。

我想创建一个插件来为一个页面编辑我的键盘，因为我想发表评论并且我不需要状态栏，它看起来不太好。

我已经找到了隐藏此栏的解决方案，但仅限于所有时间。

[https://stackoverflow.com/a/9276023/35364](https://stackoverflow.com/a/9276023/35364)

在此链接中，该栏将被删除。

我对Objective C不是很熟悉，我知道了解它会更好，但我没有时间学习它。

所以我的问题是，如何将代码从 abodes 链接放入 Phonegap 插件以显示和隐藏栏。一些背景颜色的变化会很不错。

上面代码的问题是，当我自己尝试将其放入插件中时，如果没有状态栏，键盘的第一次打开不会产生影响。

像 removeStatusBar 和 addStatusBar 这样的东西。

当键盘出现时，我也遇到了向上推视图的问题。有没有办法在不按任何东西的情况下查看键盘？

我找到了一个链接，但这没有帮助。

[Phonegap：完全去除 iPhone 键盘上的黑条](https://stackoverflow.com/questions/10746998)

这可能是煎茶触摸问题，因为当我点击屏幕时，视图会像我想要的那样向下推...

# iphone - 解析 JSON 不起作用

> ID：10849884
> 
> 赞同：0
> 
> 时间：2012-06-01T12:01:36.453
> 
> 标签：iphone, objective-c, json

我有以下有效的 JSON 来解析：

```
[{"name":"kkkk","empid":"55628","address":"mumbai","mobile":"9525878558"},{"name":"xtreme","empid":"20","address":"stripes","mobile":"9999597"},{"name":"xtreme","empid":"20","address":"stripes","mobile":"9699597"},{"name":"xtreme","empid":"20","address":"stripes","mobile":"9699597"},{"name":"xtreme","empid":"20","address":"stripes","mobile":"9699597"},{"name":"xtreme","empid":"20","address":"stripes","mobile":"9689597"},{"name":"xtreme","empid":"20","address":"stripes","mobile":"9699597"},{"name":"xtreme","empid":"20","address":"stripes","mobile":"9689597"},{"name":"xtreme","empid":"20","address":"stripes","mobile":"9699597"},{"name":"vx","empid":"96","address":"addre","mobile":"9999596"},{"name":"vxx","empid":"96","address":"addre","mobile":"96899"},{"name":"vx","empid":"96","address":"addre","mobile":"9689596"}] 
```

解析后，我想在员工对象上设置它的属性。我尝试了以下不起作用的代码：

```
NSDictionary *dict=[parser objectWithString:firstParseData];
NSString *secondParseData=[dict objectForKey:@"name"];
NSLog(@"name=%@",secondParseData); 
```

我不明白是什么问题，请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T12:04:29.187

如果`firstParseData`是您提供的 json，那么您将获得`NSArray`in`dict`变量，而不是`NSDictionary`.

如果您需要所有名称，请使用`valueForKey:`该数组的方法。它将返回`dict`变量中所有名称的数组。

如果您只需要一个名称 - 在返回的对象上使用`objectAtIndex:`and`valueForKey:`来获取顶级数组的给定索引上的名称值。

# c# - 如何从视图访问控制器变量

> ID：10849889
> 
> 赞同：0
> 
> 时间：2012-06-01T12:02:06.473
> 
> 标签：c#, html, variables, asp.net-mvc-4

我今天开始尝试 C# 和 HTML5。我认为这个问题很容易找到答案，但我在谷歌或这里找不到。我创建了一个 MVC4 默认模板。我有一个 ascx 文件，这是我的表单视图。目前是这样的

```
<hgroup class="title">
<h1>Log in.</h1>
<h2>Enter username and password</h2> 
```

但不是硬编码的“登录”。我想从另一个名为 HomeController.cs 的类中放置一个本地化字符串

所以我想我会这样做。（我习惯这样做，因为到目前为止我只知道 Java）

```
<hgroup class="title">
<h1><script>HomeController.strings.voerIn</script></h1>
<h2>Enter username and password</h2>
</hgroup> 
```

但是，这只是将变量名称显示为文本而不是变量值。我尝试将这些变量包装在 script> 或 code> 中，但这似乎没有帮助。

编辑：答案

好的，所以我终于让它工作了。我必须实例化 HomeController，而不是 <% %> 显示我必须使用的字符串 <%= %>

所以这就是我的代码现在的样子，它有效！

```
<% MvcApplication2.Controllers.HomeController hc=new MvcApplication2.Controllers.HomeController();%>
  <h2><%=hc.aha%></h2> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T12:03:54.230

要将代码放入您的页面，您必须使用 <% %>。

# php - 如何使 php 网页在特定时间过期

> ID：10849891
> 
> 赞同：0
> 
> 时间：2012-06-01T12:02:11.730
> 
> 标签：php, security, header, browser-cache

出于安全原因，有几篇文章建议“不要缓存页面”。所以我通常将以下内容放在网页的开头

```
header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT");
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache"); 
```

这很好用，但许多访问者喜欢使用历史按钮。所以，我需要允许它在短时间内。我尝试使用以下标题

```
header("Cache-Control: maxage=".$expires.", must-revalidate");
header('Expires: ' . gmdate('D, d M Y H:i:s', time()+$expires) . ' GMT'); 
```

其中*$expires*是我需要的时间。问题是页面不会过期，就好像那些标题不存在一样。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T18:28:54.723

简而言之：浏览器历史缓存是您无法完全控制的不同之处。对另一个问题有一个完美而详尽的答案，也可以在这里回答您的问题：

[为什么在 HTTP 响应中应该同时使用 no-cache 和 no-store？](https://stackoverflow.com/questions/866822/why-both-no-cache-and-no-store-should-be-used-in-http-response)

# python - python在扫描mp3元数据后删除不需要的字符

> ID：10849892
> 
> 赞同：2
> 
> 时间：2012-06-01T12:02:12.010
> 
> 标签：python, mp3, metadata

我昨天正在寻找一种扫描 mp3 元数据的方法，我在互联网上找到了这个代码片段

```
def getID3(filename):
    fp = open(filename, 'r') 
    fp.seek(-128, 2)
    fp.read(3) # TAG iniziale
    title   = fp.read(30)
    artist  = fp.read(30) 
    album   = fp.read(30) 
    fp.close()
    return {'title':title, 'artist':artist, 'album':album} 
```

它完全有效，但问题是每次我使用它时，这个 ---> `\x00`<--- 都会出现在标题、专辑或艺术家的末尾。例如;

```
>>> import getid as id
>>> import os
>>> music = 'D:/Muzic'
>>> os.chdir(music)
>>> meta = id.getID3('04 - Mayday Parade - Your Song.mp3')
>>> meta
{'album': 'Tales Told By Dead Friends\x00\x00\x00\x00', 'artist': 'Mayday Parade\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00', 'title': 'Your Song\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00'} 
```

任何人都知道如何摆脱它？

顺便说一句，我目前尝试的所有音乐都发生了这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-01T12:04:46.490

添加`rstrip('\x00')`到您读取文件的行：

```
fp.read(30).rstrip('\x00') 
```

例子：

```
>>> 'abc\x00\x00\x00\x00'.rstrip('\x00')
'abc' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T12:11:49.917

您正在读取一个固定的字段宽度 (30)，并且该结构正在使用 null (\x00) 填充字段。

我认为您可以使用 .strip('\x00') 例如

```
 title   = fp.read(30).strip('\x00')
   artist  = fp.read(30).strip('\x00')
   album   = fp.read(30).strip('\x00') 
```

# java - 如何将字节数组转换为blob

> ID：10849893
> 
> 赞同：16
> 
> 时间：2012-06-01T12:02:13.557
> 
> 标签：java, mysql, swing, netbeans

我想从数据库中获取图像。为此，我为图像创建了一个字节数组，该数组由字符串传递，现在我想将该字符串转换为图像格式。我将该图像分配给 Jlabel 字段。代码如下：

```
try {
    Blob image_vis = rs1.getBlob(10);
    InputStream x=image_vis.getBinaryStream();
    OutputStream out=new FileOutputStream(string_op);
    byte[] bytes = string_op.getBytes();
    String s=new String(bytes);
    System.out.println(+s);  //prints bytes for the string
    ImageIcon icon_cap = new ImageIcon(string_op);
    image_cap.setIcon(icon_cap);   //prints nothing to Jlabel
    //image_cap.setText(s);     //prints a path of a image
} 
```

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-06-01T12:05:40.890

```
Blob blob = new javax.sql.rowset.serial.SerialBlob(bytes); 
```

# android - 从另一个 Activity 访问 TabHost

> ID：10849897
> 
> 赞同：4
> 
> 时间：2012-06-01T12:02:27.987
> 
> 标签：android, android-activity, android-tabhost

我需要从所有活动中更改 TabHost。我做了一些研究，但我没有找到任何与 TabHost 兼容的东西。

我希望能够从另一个活动中隐藏 TabHost。（如果我设法访问它，隐藏它对我来说不是问题）

我之前曾使用过一些公共静态变量，但无法使其与 TabHost 一起使用。我需要它可以从所有活动中更改的原因是 TabHost 应该只在特定活动的结果上消失。

TabHost 是库存。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T12:40:31.383

你可以`tabhost`参加儿童活动

```
yourTabActivity activity = (yourTabActivity) this.getParent();
TabHost host = activity.getTabHost(); 
```

# php - 可以在 nginx 服务器上托管一个 rails 应用程序和一个 PHP 应用程序

> ID：10849899
> 
> 赞同：1
> 
> 时间：2012-06-01T12:02:35.287
> 
> 标签：php, ruby-on-rails-3, wordpress, deployment, nginx

我目前在 ubuntu 上的 nginx 上运行一个 rails web 应用程序，现在我的目标是向它部署一个 wordpress 实例。是否可以将 wordpress 实例也部署到 nginx 服务器。我尝试在互联网上搜索，但它提供了不同的方法来集成 php 和 nginx 服务器来运行 WordPress。我对互联网上这些不同的帖子感到困惑。您是否建议一种简单的方法来完成它？

顺便说一句，我目前正在那个来自“Passenger”安装的 nginx 服务器上运行一个 rails 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T18:50:00.720

我建议寻找不仅针对 Nginx 和 Wordpress 的教程，还针对您的情况的其他详细信息：您正在安装什么操作系统，以及您是在寻找单站点还是多站点安装。

例如，这是[在 Nginx 上安装 Wordpress 的一个很好的分步教程](http://elasticdog.com/2008/02/howto-install-wordpress-on-nginx/)，但在您的情况下，也许可以从包中安装“spawn-fcgi”，或者您可能需要多站点支持。

您已经在同一台服务器上运行 Rails 应用程序不应该是冲突。

# .net - 不应使用实体框架的情况？

> ID：10849901
> 
> 赞同：-1
> 
> 时间：2012-06-01T12:02:42.660
> 
> 标签：.net, entity-framework

是否存在 EF 不是数据访问的理想解决方案的情况？我回想起 DataReader 和 DataSet 之间的对比，以及后者在尝试流式传输大量数据时通常是不可取的。所以我很好奇是否存在 EF 不是一个好主意的用例。或者，也许 EF 在其使用方式上提出了挑战或陷阱？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:24:07.177

一般来说，所有抽象所做的只是呈现某物的外观。外观的原因可能有很多原因，尽管通常它们呈现出复杂性的简化。

EF 提供了 ORM 分层，以减少从面向对象世界映射到关系世界的复杂性所带来的阻抗。这样做的开销与滚动您自己的映射不同。在某些方面它更容易，而在其他方面它更难。提供功能的一部分是增加开销（无论是性能还是问题域的有效性），这需要进行管理。此外，简化某些事情的抽象（根据我的经验）通常会限制您可以做什么或不可以做什么。在任何设计中也需要考虑这一点。

所以答案是 - EF 提供的功能并没有克服受其做事方式限制的好处和努力。

一个经典的例子，如果这是简单的 CRUD 客户端服务器应用程序，现在通常可以使用 Codesmith 或 IronSpeed 或类似工具自动生成。

* * *

## 回答 #2

> 赞同：-7
> 
> 时间：2012-06-01T12:22:59.070

在几乎每一个重要的现实世界情况下，如果您更关心用户满意度，那么就只是对简单性和程序员便利性的空洞承诺。如果您更关心完成工作，那么调试泄漏的抽象。

# php - 搜索建议 - PHP - MySQL

> ID：10849902
> 
> 赞同：0
> 
> 时间：2012-06-01T12:02:45.427
> 
> 标签：php, mysql, search, pdo, search-suggestion

我有一个如下的 MySQL 查询；

```
$query = "SELECT * FROM dictionary WHERE word LIKE '%".$word."%' ORDER BY word LIMIT 10"; 
```

这将在我的字典数据库中搜索（并显示）单词。

搜索将返回；

`Drunken for Drunk, etc, etc..`, `Drunken for Drunke, etc, etc..` 和`Drunken for Drunken, etc, etc..`

但它不会返回`Drunken`。**`Drunkin`**我想将这个词显示为建议词（就像我们在谷歌中看到的那样）。我怎样才能做到这一点？

以下是我的完整代码供参考；

```
$db = new pdo("mysql:host=localhost;dbname=dictionary", "root", "password");
$query = "SELECT * FROM dictionary WHERE word LIKE '%".$word."%' ORDER BY word LIMIT 10";
$result = $db->query($query);
$end_result = '';
if ($result) {
    while ( $r = $result->fetch(PDO::FETCH_ASSOC) ) {
        $end_result .= $r['word'].'<br>';
    }
}
echo $end_result; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T12:07:54.820

尝试使用**[SOUNDEX](http://php.net/manual/en/function.soundex.php)**

> **Soundex**键具有发音相似的单词产生相同的 soundex 键的特性，因此可用于简化在您知道发音但不知道拼写的数据库中的搜索。这个 soundex 函数返回一个 4 个字符长的字符串，以一个字母开头。

以下是一些关于 SO 的问题，它们可能会引导您朝着正确的方向前进：

*   **[谷歌“你的意思是什么？” 算法工作？](https://stackoverflow.com/questions/307291/how-does-the-google-did-you-mean-algorithm-work)**
*   **[您如何实施“您的意思是”？](https://stackoverflow.com/questions/41424/how-do-you-implement-a-did-you-mean)**

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T12:13:12.593

Soundex 可能对简单的情况有所帮助，但如果您想正确实现这样的事情，您将需要一个 Lucene 搜索索引，您可以在其中执行模糊（=不精确）搜索。看看[Apache Solr PHP 端口](http://code.google.com/p/solr-php-client/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T12:09:55.113

您将需要一些比 LIKE 语句更复杂的东西。它为 Drunk 显示 Drunken，因为 Drunken 包含 Drunk 一词。

更复杂的算法会查看键盘布局是否存在可能的拼写错误：例如，如果您搜索“drumk”，您可能会解释为字母 M 位于 N 旁边（在 QWERTY 键盘上）并建议喝醉了。

如果没有结果，您也可以尝试从搜索查询中删除最后一个字符：例如：如果您搜索醉酒但没有找到任何内容，您可以尝试搜索醉酒等。

希望这可以帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-29T14:38:42.997

只是为了记录，我很惊讶这里没有提到[levenshtein](http://php.net/manual/en/function.levenshtein.php)函数，用于测量两个字符串的“距离”或相似性，尽管对于英语单词来说，似乎没有什么比 soundex 类型算法更好，或者，最近，Metaphone。

只需几行代码，您就会从 Google 之类的东西中获得“您的意思是”。请参阅php.net 文档中的[示例 #1](http://php.net/manual/en/function.levenshtein.php)。

请注意，此示例基于单词的静态数组。如果您需要从数据库中检索这些单词，则需要再实现几行...

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-10-01T13:34:52.290

最简单的方法：

SELECT * FROM table_name WHERE soundex(field_name) LIKE CONCAT('%', soundex('searching_element'), '%')

# algorithm - 求主定理的 lambda

> ID：10849903
> 
> 赞同：1
> 
> 时间：2012-06-01T12:02:47.997
> 
> 标签：algorithm, complexity-theory, big-o, recurrence, master-theorem

假设我有一个案例

```
T(n)=2T(n/4)+log(n). a=2, b=4, f(n)=log(n) 
```

那应该是第一种情况，因为`n^(1/2)>log(n)`. 在案例 1 中还有一个 lambda `f(n)=O(n^((1/2)-lambda)`。这个对吗？我怎样才能找到这个 lambda？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T15:13:28.450

常数 lambda*很*重要：它的目的是避免考虑位于案例 1 和案例 2 之间的奇怪情况。由于 big-O 只是一个上限而不是下限，因此较小的 lambda 选择在某种意义上是“更好”的它们涵盖了更多功能。但是，由于 lambda 必须是正数，因此没有“最佳”选择 lambda。Lambda = 10^-3 应该让你通过足够多的例子来了解为什么主定理的大多数处理都不能通过选择 lambda 来产生结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-09T15:48:45.127

f(n)=logn

Epsilon 可以是 1/4，因为

n ^((log [b] a-epsilon)) =n ^((log [4] 2-1/4)) =n ^((1/2-1/4)) =n ^((1/4))。

f(n)=O(n ^((1/4)) )。

因此，根据主定理 T(n)=Θ(n ^(log [b] a) )=Θ(n ^((1/2)) ) 的情况 1。

# sql-server-2005 - SSIS 包 - 子包没有被执行

> ID：10849918
> 
> 赞同：1
> 
> 时间：2012-06-01T12:03:36.327
> 
> 标签：sql-server-2005, ssis

我们有多个 Staging、Dimension、Fact 包——最近都运行良好。

但是从昨天开始，在 Facts 过程中 - 子包没有从父级执行。它调用子包，但是 CHILD 中的任何任务都没有被执行，它只是被卡住了。

我们没有对包进行任何更改。但是当我单独运行子包时，它们工作得很好。

这是一个 SSIS 错误吗？

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T12:28:35.823

不，一定是做了什么。即使它是一个错误，这个错误也不会从无到有:)

如果您保证包上没有任何更改，我会说对环境做了一些事情。包部署在哪里？SQL 服务器？检查 SSIS 服务。文件系统？检查包的路径，特别是配置文件。

如果您发布更多信息会很有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:30:15.587

我认为您必须检查`LOG`以查看发生了什么或此问题的原因是什么。

通过从 SSIS 菜单打开“日志事件”窗口，也可以从商业智能工作室查看日志条目。

您还有**许多日志提供程序**来帮助您将所有包事件记录为：

*   **SQL Profiler 日志提供程序**写入可以使用 SQL Profiler 查看的日志文件。默认文件扩展名为 .trc。

*   **SQL Server 日志提供程序**将日志条目写入 SQL Server 2005 数据库中的 sysdtslog90 表。

*   **Windows 事件日志提供程序**将条目写入本地计算机上 Windows 事件日志中的应用程序日志。

*   **XML 文件日志提供程序**将日志文件写入 XML 文件。默认文件扩展名为 .xml。

*   **文本文件日志提供程序**使用逗号分隔值 (CSV) 格式将日志条目写入 ASCII 文本文件。默认文件扩展名为 .log。

有关更多信息： [查看部分：SSIS 包日志记录](http://msdn.microsoft.com/en-us/library/cc966389.aspx)

# c# - 不同的 WCF 绑定，它们的区别以及与其他平台的兼容性

> ID：10849920
> 
> 赞同：19
> 
> 时间：2012-06-01T12:03:49.987
> 
> 标签：c#, java, php, .net, wcf

我正在寻找有关 WCF 绑定主题的一些好的技术细节，我有兴趣了解以下内容。

1.  不同 WCF 绑定的列表及其特殊用途和限制。
2.  与其他平台的兼容性/互操作性，例如在 Java、PHP 客户端中使用 WCF 服务。支持哪些绑定，哪些不支持。
3.  如果我想通过服务 API 获取/发布安全数据，如果客户端应用程序是 Java 或 Php，我应该使用哪个绑定？

我在互联网上浏览了不同的材料，但并不详细，而且有些分散。等待一些好的回应。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-06-01T12:09:03.967

[选择正确的 WCF 绑定](http://weblogs.asp.net/spano/archive/2007/10/02/choosing-the-right-wcf-binding.aspx)

![在此处输入图像描述](../Images/ec30469e46d868f53fcf3e386bc20baa.png)

1.  **BasicHttpBinding**：基本的 Web 服务通信。将 WCF 服务公开为旧版 ASMX Web 服务。用于互操作性。默认情况下没有安全性。
2.  **WSHttpBinding**：支持 WS-* 的 Web 服务。支持事务和可靠的消息传递。
3.  **WSDualHttpBinding**：具有双工合同和事务支持的 Web 服务。
4.  **WSFederationHttpBinding**：具有联合安全性的 Web 服务。支持交易。
5.  **MsmqIntegrationBinding**：直接与 MSMQ 应用程序通信。支持交易。
6.  **NetMsmqBinding**：使用队列在 WCF 应用程序之间进行通信。支持交易。
7.  **NetNamedPipeBinding**：同一台计算机上的 WCF 应用程序之间的通信。支持双工合约和交易。
8.  **NetPeerTcpBinding**：跨点对点服务的计算机之间的通信。支持双工合同。
9.  **NetTcpBinding**：跨计算机的 WCF 应用程序之间的通信。支持双工合约和交易。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-27T02:34:39.137

要添加到已接受的答案，如果要将**JSON**请求绑定到 WCF 中的对象，请使用**webHttpBinding**

[这是](http://blogs.msdn.com/b/bashmohandes/archive/2008/01/05/using-webhttpbinding-json-support-in-wcf.aspx)一个例子。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T06:50:45.063

*   如果您需要创建全局可互操作的绑定，请使用`http`绑定。

*   供内部使用，但消费者在不同的服务器中使用`tcp` 绑定。它的互操作性较低，但使用更快的二进制编码。

*   使用`named pipe`绑定进行服务器内通信，即托管在同一服务器中的消费者。命名管道绑定是 wcf 允许绑定中最快的绑定。

适当地使用绑定，让你的项目最好。

# c# - Elmah 日志错误页面自定义

> ID：10849929
> 
> 赞同：5
> 
> 时间：2012-06-01T12:04:28.503
> 
> 标签：c#, logging, elmah

我想使用 Elmah 来记录应用程序中的操作，**而不仅仅是记录错误** *（我知道，字面意思是错误记录模块）*。

所以，我想自定义默认的错误视图屏幕（../elmah.axd）：

我有如下愿望：

1.  **更改“消息”的列名称“错误”**
2.  **在错误消息中使用 html 标签。**

为了记录自定义信息，我使用的方法如下：

```
ErrorSignal.FromCurrentContext().Raise(new Elmah.ApplicationException(message)); 
```

但它确实在跨度标记中显示消息，如果我使用任何`<a href="">`或`<br />`什`&lt;`至结果是书面的，而不是 html 属性。

* * *

*默认页面如下，便于直观理解：*

![在此处输入图像描述](../Images/5f06c9ea20d5a505306c24498492ba02.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-23T22:08:07.117

Elmah 是一个单独的 dll，因此您必须下载[源代码](http://code.google.com/p/elmah/source/checkout)，在 ErroLogPage、ErrorDetailPage 中更改渲染，重建并部署修改后的程序集。

或者编写一个新的自定义显示页面，使用直接存储在 db/disk/etc 中的 elmah 错误。

# magento - Magento Multistore：将非 www 重定向到 www

> ID：10849936
> 
> 赞同：0
> 
> 时间：2012-06-01T12:04:47.037
> 
> 标签：magento

我们正在运行 Magento CE 1.6.2，我们想运行另一家商店。我们已经正确配置了 store2.com，但是我们遇到了一个问题：

store1.com 重定向到 www.store1.com ：好的 store2.com 和 www.store2.com 重定向到 www.store1.com ：不好

这是我们的 .htaccess ：

```
SetEnvIf Host .*store2.com MAGE_RUN_CODE=store2_com
SetEnvIf Host .*store2.com MAGE_RUN_TYPE=website 
```

要将非 www 重定向到 www，我们正在使用：

```
RewriteCond %{HTTPS} off
RewriteCond %{HTTP_HOST} !^www\.(.*)$ [NC]
RewriteRule ^(.*)$ http://www.%{HTTP_HOST}/$1 [R=301,L]

RewriteCond %{HTTPS} on
RewriteCond %{HTTP_HOST} !^www\.(.*)$ [NC]
RewriteRule ^(.*)$ https://www.%{HTTP_HOST}/$1 [R=301,L] 
```

这个配置不起作用。

我们使用托管域运行 store2.com，并在 store1.com 和 store2.com 之间共享托管。

希望你能帮助我们，对不起我的英语。

谢谢你的帮助昆汀

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-03T12:08:14.347

1) 确保所有域都指向同一个文档根

2）在magento后端为您运行的每个商店/网站指定基本网址（如果它们不同）

3) 修改 index.php 根据域选择正确的商店/网站

在我们的 index.php 我们有这样的东西

```
switch($_SERVER['HTTP_HOST']) {
    case 'www.example.com':
      $mageRunCode = 'www_exampe_com';
      break;  
    case 'another.example.com':
      $mageRunCode = 'another_example_com';
      break;        
    case 'admin.example.com':  
      $mageRunCode = 'admin';
      break;  
    default:
      $mageRunCode = 'www_example_com';      
  }

}

Mage::run($mageRunCode, $mageRunType); 
```

其中 www_example_com、another_example_com 是系统 > 商店管理中指定的商店代码。

**更新：** 我还发现了本教程[http://www.magentocommerce.com/knowledge-base/entry/tutorial-multi-site-multi-domain-setup](http://www.magentocommerce.com/knowledge-base/entry/tutorial-multi-site-multi-domain-setup)所以它可能会有所帮助，但您需要更新您的虚拟主机设置和它在某些情况下可能不是合适的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T06:14:31.877

您是否尝试过查看 Magento 管理配置页面？转到`System -> Configuration -> Web`然后将其更改为等效`Configuration Scope`的网站。`store2`展开该`Unsecure`部分并`http://www.store2.com`在 Base URL 字段中输入。如果您计划使用 SSL 并使用`https://www.store2.com/`.

![系统->配置-> Web部分 Magento Admin](../Images/5a09647e9fb2296f0a599465d1a5c568.png)

另请注意，您不能再在 Magento 1.6.x 上使用 {{base_url}}。

# android - 适用于 Android 的 Web 块

> ID：10849945
> 
> 赞同：3
> 
> 时间：2012-06-01T12:05:41.160
> 
> 标签：android, web-services, android-intent, android-browser, parental-control

我正在做家长控制，有谁知道如何防止它打开网站。我知道何时使用内容提供程序在浏览器中输入 URL。我尝试重定向它，但当浏览器关闭然后再次启动时，它会转到被阻止的站点，因为它没有在表中进行任何更改，我的接收器没有被调用。我尝试从浏览器表中删除所有记录，但它不起作用。

# facebook - Facebook 应用喜欢 bttn 标头

> ID：10849946
> 
> 赞同：0
> 
> 时间：2012-06-01T12:05:42.690
> 
> 标签：facebook, button, facebook-like, status

有人可以告诉我如何复制我在此应用页面中看到的点赞按钮和功能：

```
https://www.facebook.com/illamasqua/app_4949752878 
```

我创建了一个应用程序......并且无法确定用户对某个页面的喜爱程度。

我已经使用插件代码添加了一个赞按钮......但现在需要检测它的点击。挣扎！

```
http://apps.facebook.com/hoo_promo/ 
```

非常感谢肖恩

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:15:19.947

1）创建一个应用程序并设置页面选项卡设置。![在此处输入图像描述](../Images/cfcd4dc9b71a7bed85845a775c96ceb1.png)

2) 将此代码放在 index.php 中

```
<?php
 require 'facebook/src/facebook.php';
 $facebook = new Facebook(array(
  'appId'  => $CONF['FB_APP_ID'],
  'secret' => $CONF['FB_APP_SECRET'],
  'cookie' => false,
 ));

 // Get User ID
 $user = $facebook->getUser();
 $signed_request = $facebook->getSignedRequest();
 $like_status = $signed_request["page"]["liked"];
 if($like_status == 1){ 
 echo 'You liked it';
 }else{  echo 'Please like the page to access'; 
 } ?> 
```

修改配置变量。

[3) 使用此 URL https://www.facebook.com/dialog/pagetab?app_id=XXXXXXXX&next=XXXXXXXXXXXXXXXXXX](https://www.facebook.com/dialog/pagetab?app_id=XXXXXXXX&next=XXXXXXXXXXXXXXXXX)将应用程序添加到粉丝页面

更改 app_id，下一个变量

就是这样。

# javascript - Firefox 和 Chrome 之间 div 中的垂直滚动差异

> ID：10849947
> 
> 赞同：0
> 
> 时间：2012-06-01T12:05:45.163
> 
> 标签：javascript, css, browser, fullcalendar, compatibility

我在理解浏览器在包含 fullCalendar js 日历的 div 内解释垂直滚动的方式时遇到了一些麻烦。

在 Firefox 中，我可以检查元素并看到：

```
<div class="fc-agenda-body" style="position: relative; z-index: 2; overflow: auto; height: 572px; width: 706px;"> 
```

在 Chrome 中，我检查了相同的元素，我看到了这个：

```
<div class="fc-agenda-body" style="position: relative; z-index: 2; width: 705px; overflow: hidden; height: 570px; "> 
```

所以 - 我的问题是如何停止 Chrome（和 Safari）更改溢出：自动；溢出：隐藏？

任何建议表示赞赏。

谢谢！

西蒙

# android - 顶部 android ActionBar 上的片段

> ID：10849948
> 
> 赞同：2
> 
> 时间：2012-06-01T12:05:46.490
> 
> 标签：android

我有一个`Fragment`. `ImageView`我如何`Fragment`在顶级系统 android 上显示这个`ActionBar`？

对于：Wottah `ActionBar`应该是可见的。有必要让重叠部分成为我的一部分。我们需要对此使用一些东西：

```
ImageView view = new ImageView (getActivity ());
view.setBackgroundColor (Color.GREEN); 
WindowManager.LayoutParams p = new WindowManager.LayoutParams (); 
p.gravity = Gravity.TOP;
p.type = WindowManager.LayoutParams.TYPE_APPLICATION_PANEL; 
p.token = view.getWindowToken (); 
WindowManager mWindowManager = (WindowManager) getActivity (). GetSystemService(Context.WINDOW_SERVICE); 
mWindowManager.addView (view, p); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-15T12:30:53.043

Wottah，不幸的是，您的回答没有帮助。我查找了 android popupwindow 的源文件以及他们在我的项目中应用的决定。

任务：我们有应用程序。并且标准的 android 操作栏（如我们所知）是应用程序的一个单独部分，我的观点可能不是最重要的证据。

以下解决方案： 我的看法：

```
private class MyView extends ImageView
{
    public MyView(Context context)
    {
        super(context);
    }

    //it must be override
    @Override
    public boolean onKeyDown(int keyCode, KeyEvent event)
    {
        if (keyCode == KeyEvent.KEYCODE_BACK)
        {
            activity.onBackPressed();
        }
        return super.onKeyDown(keyCode, event);
    }
} 
```

我如何使用它：

```
private void createMyView()
    {
        view = new MyView(activity.getBaseContext());
        view.setBackgroundResource(R.drawable.*******);
        WindowManager mWindowManager = (WindowManager) activity.getSystemService(Context.WINDOW_SERVICE);
        WindowManager.LayoutParams p = new WindowManager.LayoutParams();
        p.width = iconWidth;
        p.height = iconHeight;
        p.flags = WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL;
        p.type = WindowManager.LayoutParams.TYPE_APPLICATION_PANEL;
        p.token = view.getWindowToken();
        p.gravity = Gravity.TOP;
        p.x = x;
        p.format = PixelFormat.TRANSLUCENT;
        mWindowManager.addView(view, p);

        view.setOnClickListener(new OnClickListener()
        {
            @Override
            public void onClick(View v)
            {
                //TODO
            }
        });
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:58:33.600

如果你调整你的布局风格，你可以隐藏操作栏，这样你就不需要任何奇怪的结构来把一个 ImageView 放在它上面。

# lucene - 尝试从命令行运行 lucene 应用程序时发生未找到类定义错误

> ID：10849951
> 
> 赞同：4
> 
> 时间：2012-06-01T12:05:54.297
> 
> 标签：lucene, runtime-error, classnotfound

我是 lucene 的初学者，我曾尝试运行网站[http://www.lucenetutorial.com/lucene-in-5-minutes.html](http://www.lucenetutorial.com/lucene-in-5-minutes.html)中提供的示例应用程序 (HelloLucene.java) 。代码已成功编译，并为应用程序创建了一个类文件 (HelloLucene.class)。

但是在尝试运行应用程序时，出现以下错误

*   找不到或加载主类 HelloLucene

我曾提到[Java 程序使用或覆盖已弃用的 API 的链接？](https://stackoverflow.com/questions/9258005/java-program-uses-or-overrides-a-deprecated-api)并尝试了提供的解决方案，但都是徒劳的。请帮我解决这个问题。

我用来运行代码的命令是

*   java HelloLucene lucene

我试图运行的代码：

```
import org.apache.lucene.analysis.standard.StandardAnalyzer;
import org.apache.lucene.document.Document;
import org.apache.lucene.document.Field;
import org.apache.lucene.index.IndexReader;
import org.apache.lucene.index.IndexWriter;
import org.apache.lucene.index.IndexWriterConfig;
import org.apache.lucene.queryParser.ParseException;
import org.apache.lucene.queryParser.QueryParser;
import org.apache.lucene.search.IndexSearcher;
import org.apache.lucene.search.Query;
import org.apache.lucene.search.ScoreDoc;
import org.apache.lucene.search.TopScoreDocCollector;
import org.apache.lucene.store.Directory;
import org.apache.lucene.store.RAMDirectory;
import org.apache.lucene.util.Version;

import java.io.IOException;

public class HelloLucene {
  public static void main(String[] args) throws IOException, ParseException {
// 0\. Specify the analyzer for tokenizing text.
//    The same analyzer should be used for indexing and searching
StandardAnalyzer analyzer = new StandardAnalyzer(Version.LUCENE_35);

// 1\. create the index
Directory index = new RAMDirectory();

IndexWriterConfig config = new IndexWriterConfig(Version.LUCENE_35, analyzer);

IndexWriter w = new IndexWriter(index, config);
addDoc(w, "Lucene in Action");
addDoc(w, "Lucene for Dummies");
addDoc(w, "Managing Gigabytes");
addDoc(w, "The Art of Computer Science");
w.close();

// 2\. query
String querystr = args.length > 0 ? args[0] : "lucene";

// the "title" arg specifies the default field to use
// when no field is explicitly specified in the query.
Query q = new QueryParser(Version.LUCENE_35, "title", analyzer).parse(querystr);

// 3\. search
int hitsPerPage = 10;
IndexReader reader = IndexReader.open(index);
IndexSearcher searcher = new IndexSearcher(reader);
TopScoreDocCollector collector = TopScoreDocCollector.create(hitsPerPage, true);
searcher.search(q, collector);
ScoreDoc[] hits = collector.topDocs().scoreDocs;

// 4\. display results
System.out.println("Found " + hits.length + " hits.");
for(int i=0;i<hits.length;++i) {
  int docId = hits[i].doc;
  Document d = searcher.doc(docId);
  System.out.println((i + 1) + ". " + d.get("title"));
}

// searcher can only be closed when there
// is no need to access the documents any more. 
searcher.close();
}

 private static void addDoc(IndexWriter w, String value) throws IOException {
   Document doc = new Document();
   doc.add(new Field("title", value, Field.Store.YES, Field.Index.ANALYZED));
   w.addDocument(doc);
 }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T17:29:55.750

看起来您需要设置类路径，以包括 Lucene JAR 文件和包含 HelloLucene 类的目录。整个命令应如下所示：

```
java -classpath .:lucene-core-3.4.0.jar HelloLucene lucene 
```

# lisp - 将包导入 SLIME REPL

> ID：10849953
> 
> 赞同：3
> 
> 时间：2012-06-01T12:05:58.633
> 
> 标签：lisp, common-lisp, packages, slime, sbcl

我正在尝试从 SBCL 非标准内置函数中导入一些函数以与套接字一起使用。当我在外部粘液中执行此操作时，使用裸交互式 shell + SBCL 它可以工作，但不能在 SLIME 中使用。

我做了什么：

```
(import 'sb-bsd-sockets:host-ent-address)
(import 'sb-bsd-sockets:get-host-by-name) 
```

或者

```
(use-package :sb-bsd-sockets) 
```

执行完任一操作后，SLIME 都会向我打招呼，说我正在尝试导入 cl-user 包中已有的内容。这是一个可纠正的错误，我通过选择在 sb-bsd-sockets 包中找到的符号进行纠正。没有进一步的错误。

然后，当我尝试编译函数时：

```
(defun nslookup (hostname) 
  (if hostname 
      (sb-bsd-sockets:host-ent-address (sb-bsd-sockets:get-host-by-name hostname)) 
      nil)) 
```

有用。但是如果我尝试编译这个：

```
(defun nslookup-1 (hostname) 
  (if hostname 
      (host-ent-address (get-host-by-name hostname)) 
      nil)) 
```

然后我收到关于未定义函数的警告，当我尝试调用`nslookup-1`.

令我惊讶的是，如果我尝试在 REPL 中这样做：

```
CL-USER> #'host-ent-address
#<STANDARD-GENERIC-FUNCTION HOST-ENT-ADDRESS (1)>
CL-USER> 
```

有用”。即它知道该功能，但决定不使用它...

必须有一些（特殊的？）方法可以将包导入 SLIME 的 REPL，或者至少从这些包中导入符号，否则使用长名称进行测试然后将它们替换为实际程序非常不方便......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-01T13:30:40.203

如果“可纠正错误”是指“名称冲突”，那么您可以通过定义自己的包并使用`:shadow`and`:shadowing-import-from`子句来处理这个问题。有关详细信息，请查看[PCL](http://www.gigamonkeys.com/book/programming-in-the-large-packages-and-symbols.html)的第 21 章。

简短的回答：如果您尝试导入已在当前包中定义的新符号，则需要 do`shadowing-import`而不是标准`import`（尽管您实际上应该使用相应的子句`defpackage`而不是自己调用这些子句）。

对于第二部分，“编译函数”是什么意思？当我评估从 ing 两部分`nslookup-1`之后的第二个定义时，它工作正常。您确定要在已导入适当功能的包中对其进行评估吗？`shadowing-import``:sb-bsd-sockets`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T12:22:34.953

> 将包导入 SLIME 的 REPL

你不能将包导入 SLIME 的 REPL，因为这样的概念是不存在的。“REPL”不能导入包。

符号可以属于某个包。可以将符号导入包中。您还可以将导出的符号从一个包导入到另一个包中。

阅读器有一个当前包，符号的值`cl:*package*`。当你与 Lisp 交互时，这个包被用作默认包。每当您将文件或类型编译为 REPL 之类的东西时，都会使用此默认包。

您需要控制正在使用的包类型。例如，这就是为什么您将 a 放在`(in-package "FOO")`文件开头的原因。您还可以键入`(in-package "FOO")`一个 REPL，然后`*package*`将包命名为`FOO`.

如果要使用没有包限定符（`foo`而不是`bar:foo`）的符号，则需要设置`*package*`为此包或导入这些符号的包。

因此，您所要做的就是确保 cl: *package*指向正确的包，并且如果您导入符号，则将它们导入正确的包中。

例子：

```
CL-USER 191 > (defpackage "FOO" (:use "CL"))
#<The FOO package, 0/16 internal, 0/16 external>

CL-USER 192 > *package*
#<The COMMON-LISP-USER package, 155/256 internal, 0/4 external>

CL-USER 193 > (defpackage "FOO" (:use "CL"))
#<The FOO package, 0/16 internal, 0/16 external>

CL-USER 194 > cl:*package*
#<The COMMON-LISP-USER package, 155/256 internal, 0/4 external>

CL-USER 195 > (in-package "FOO")
#<The FOO package, 0/16 internal, 0/16 external>

FOO 196 > cl:*package*
#<The FOO package, 0/16 internal, 0/16 external> 
```

# java - 从 jdbc 连接到 oracle 服务器获取活动主机和端口（不解析 url）

> ID：10849954
> 
> 赞同：2
> 
> 时间：2012-06-01T12:06:08.783
> 
> 标签：java, oracle, jdbc

有没有办法获得连接到 Oracle DB 服务器的 JDBC 连接的主机和端口？

我知道，我可以解析 URL。但是我们使用故障转移，我想知道我实际连接的是哪台服务器。由于我们使用不同的格式，URL 的解析是静态的并且容易出错。

在连接元数据中找不到它。

使用 'select * from global_name' 我可以获得服务名称。但是我还没有找到一种方法来获取我们连接的主机和端口。

任何的想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T12:21:25.333

以下是您可以从连接中获得的一些信息：

```
 Connection dbConnection = null;
        try {
            dbConnection = dataSource.getConnection();
            DatabaseMetaData dbMetaData = dbConnection.getMetaData();
            getLogger().debug("DB Product Name   = " + dbMetaData.getDatabaseProductName());
            getLogger().debug("DB Product Version= " + dbMetaData.getDatabaseProductVersion());
            getLogger().debug("DB Driver Name    = " + dbMetaData.getDriverName());
            getLogger().debug("DB Driver Version = " + dbMetaData.getDriverVersion());
            getLogger().debug("DB Username         = " + dbMetaData.getUserName());
            getLogger().debug("DB URL            = " + dbMetaData.getURL());
        } catch (Exception e) {
            getLogger().debug("Failed to recover DatabaseMetaData: "+e.getMessage(), e);
        } finally {
            if (dbConnection != null) {
                try {
                    dbConnection.close();
                } catch (Exception ex) {
                    getLogger().error("Failed to close the DB connection: "+ex.getMessage(), ex);
                }
            }
        } 
```

如果您需要更多/不同的信息，请检查 DatabaseMetaData。输出示例：

```
DB Product Name   = Oracle
DB Product Version= Oracle Database 11g Enterprise Edition Release 11.2.0.2.0 - 64bit Production
With the Partitioning, Automatic Storage Management, OLAP, Data Mining
and Real Application Testing options
DB Driver Name    = Oracle JDBC driver
DB Driver Version = 11.2.0.2.0
DB Schema         = XXXXX
DB URL            = jdbc:oracle:thin:@XXX.XXX.XXX.XXX:11010:MYSID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T12:51:53.133

不确定端口（实际上是侦听器上的端口），但对于主机，您可以尝试：

```
select utl_inaddr.get_host_name, utl_inaddr.get_host_address from dual; 
```

db 端还有其他选项（例如查询 v$instance），请参见[此处](http://www.oracle-base.com/articles/misc/identifying-host-names-and-addresses.php)。例如，您可能使用的 SID：

```
select sys_context('userenv','instance_name') from dual; 
```

希望有帮助。另请注意，我使用 utl_inaddr，但仅用于日志记录和电子邮件/警报目的。

编辑：

另外，请注意，欺骗 Oracle 会话信息存在一些问题，部分原因是我注意到我只使用它来向警报和日志添加上下文。我不假装知道所有的来龙去脉，但基本上这个问题涉及假装是其他人（或来自其他地方）的客户。由于您是通过 java 应用程序控制连接，因此不必担心，但如果您关心，请参阅[此处了解更多信息。](http://www.integrigy.com/security-resources/analysis/Integrigy_Spoofing_Oracle_Session_Information.pdf)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-04T17:17:50.973

这应该为您提供正在运行的实例的主机名：

`select host_name from v$instance`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-04-01T12:53:08.540

尝试以下之一：

```
select sys_context('userenv','instance_name') from dual;
select sys_context('userenv','instance') from dual;
select sys_context('userenv','server_host') from dual; 
```

文档：[https ://docs.oracle.com/cd/B19306_01/server.102/b14200/functions165.htm](https://docs.oracle.com/cd/B19306_01/server.102/b14200/functions165.htm)

# android - 在我的应用程序（Android）中单击按钮时出现 ANR

> ID：10849955
> 
> 赞同：0
> 
> 时间：2012-06-01T12:06:13.977
> 
> 标签：android

我的应用程序中有一个按钮，如果我单击一次，一切正常，问题是当我继续快速单击它时，我会得到 ANR。这是我的代码的一部分：

```
shareBtn.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            shareBtn.setClickable(false);
            new UploadPicture().execute(urls);                    
        }
    });

private class UploadPicture extends AsyncTask<String, Void, Boolean> {
         protected Boolean doInBackground(String... urls) {

            Booblean boo = uploadPic(picPath);  

            return boo;
         }

         protected void onPostExecute(Boolean result) {
             //do nothing
         }
     } 
```

1、我有shareBtn.setClickable(false)；2，我使用 AsyncTask 来做一些需要很长时间的事情。

谁能给我一些建议？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:56:41.380

**这是pre android 4.0版本的问题**

如果您快速单击该按钮。它会将所有单击排队并一一处理。但你想要的是在第一次点击后忽略其余的点击。

编辑您的代码如下

```
boolean isClickable=true;
shareBtn.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            if(isClickable)
             { 
            new UploadPicture().execute(urls);                    
             }
           isClickable=false;
        }
    });

private class UploadPicture extends AsyncTask<String, Void, Boolean> {
         protected Boolean doInBackground(String... urls) {

            Booblean boo = uploadPic(picPath);  

            return boo;
         }

         protected void onPostExecute(Boolean result) {
             //do nothing
         }
     } 
```

# c# - 为 c# Post 使用不受信任的 ssl 证书

> ID：10849959
> 
> 赞同：1
> 
> 时间：2012-06-01T12:06:40.433
> 
> 标签：c#, iis, ssl, https, posting

我们在 IIS6 中创建了一个证书，并将其应用于使用 SSL 的站点。现在，我们之前使用的相同程序将无法正常工作。据我了解，c# 透明地支持 HTTPS，所以我相信它必须使用“不受信任”的证书。关闭代理设置后（收到 403 禁止错误），我收到“无法为 SSL 建立信任关系”

我尝试了一些解决方法，例如将默认证书策略与验证黑客交换，但它已经很老了，我仍然遇到同样的错误。

下面是我的发帖方法。

```
 try
    {
        HttpRequestCachePolicy policy = new HttpRequestCachePolicy(HttpRequestCacheLevel.NoCacheNoStore);
        HttpWebRequest.DefaultCachePolicy = policy;

        byte[] buffer = Encoding.UTF8.GetBytes(postData);
        //Initialisation
        HttpWebRequest WebReq = (HttpWebRequest)WebRequest.Create(url);
        WebReq.Timeout = 10000;
        //method is post

        if (useproxy == "ON")
        {
            WebProxy myProxy = new WebProxy();
            // Create a new Uri object.
            Uri newUri = new Uri(proxy);

            // Associate the new Uri object to the myProxy object.
            myProxy.Address = newUri;
            WebReq.Proxy = myProxy;
        }

        WebReq.KeepAlive = false;
        WebReq.Method = "POST";
        WebReq.ContentType = "application/x-www-form-urlencoded";

        //The length of the buffer 
        WebReq.ContentLength = buffer.Length;
        Stream PostData = WebReq.GetRequestStream();
        //write, and close. 
        PostData.Write(buffer, 0, buffer.Length);
        PostData.Close();

        //Get the response handle
        HttpWebResponse WebResp = (HttpWebResponse)WebReq.GetResponse();

        Console.WriteLine(WebResp.StatusCode);
        Console.WriteLine(WebResp.Server);

        //Do not worry about response!. 
        //read the response (the string), and output it.
        Stream Answer = WebResp.GetResponseStream();
        StreamReader _Answer = new StreamReader(Answer);
        vystup = _Answer.ReadToEnd();

        if (vystup != "OK")
        {

        }
    }
    catch (WebException ex)
    {

        Console.WriteLine(ex);
    } 
```

证书或我的应用程序或 IIS 中是否有任何解决方法可以解决此问题？大概是它的 C# 不信任证书，但这是我第一次尝试 Https。

欢迎任何信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T12:59:59.163

默认情况下，.NET 证书策略将拒绝任何未经验证或不受信任的服务器证书，因为 99% 的时间都是您想要的。（默认情况下唯一通过的“坏”证书已过期，但其他有效证书。）

您有几个选项，具体取决于您所讨论的部署规模。

1.  在客户端上安装服务器的证书作为受信任的根证书。对于*测试*，这是最简单的选择，我一直使用我的开发机器的 IIS 和 IIS Express 证书来做这件事。不过，生产的想法很*糟糕。*

2.  使用内部 CA 生成证书；如果您为具有 Active Directory 设置的公司工作，则 AD 服务器可以充当 CA，您可以使用组策略将 AD 服务器的 CA 根自动推送到客户端。如果您在内部部署某些东西，这是一个不错的选择，因为它非常便宜:)

3.  在忽略任何 SSL 错误的类上实现[ServerCertificateValidationCallback 。](http://msdn.microsoft.com/en-us/library/system.net.servicepointmanager.servercertificatevalidationcallback.aspx)`ServicePointManager`这里唯一真正的陷阱是这是一个全局设置，因此*每次*使用`WebRequest`类都将使用您的自定义验证回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:47:40.637

我认为这不起作用，因为您没有要求 WebRequest 通过 SSL 发生。

根据[Microsoft](http://msdn.microsoft.com/en-us/library/ds8bxk2a.aspx)，您需要添加类似`WebReq.EnableSsl = true;`

# maven - maven deploy 不能按预期的方式工作。还是我错了？

> ID：10849960
> 
> 赞同：1
> 
> 时间：2012-06-01T12:06:46.410
> 
> 标签：maven, deployment

得到一个简单的任务：`mvn deploy`将最终工件 org.foo.MyProject_1.2.3.war 复制到 /tomcat/webapps/myproject.war

根据 maven 文档设置 pom：

```
...
<distributionManagement>
        <repository>
                <id>local_tomcat</id>
                <url>/tomcat/webapps</url>
        </repository>
</distributionManagement>
...    
<extensions>
        <extension>
                <groupId>org.apache.maven.wagon</groupId>
                <artifactId>wagon-file</artifactId>
                <version>2.2</version>
        </extension>
</extensions>
... 
```

但它没有用。由于某种原因， wagon 尝试创建目录 /org/foo/MyProject/1.2.3 并失败。

当然，我可以使用 tomcat:deploy 或 ant，但我认为`deploy`这是部署的正确选择。

在我看来，我虐待了插件。这与在远程存储库上安装工件的能力`deploy`相同。`install`我对吗？

如果`deploy`选择错误，那么在 maven 中传输/重命名文件的正确方法是什么？Wagon 看起来不错，但不确定它是否可以重命名文件。

提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:15:21.633

Maven 中的[部署](http://maven.apache.org/plugins/maven-deploy-plugin/)是指将工件放入远程存储库（通常是存储库管理器或有时是 Maven 中心），而**不是**放入 Tomcat 等容器中。此外，基于[Maven](http://maven.apache.org/guides/introduction/introduction-to-the-lifecycle.html#Lifecycle_Reference)中的生命周期，部署阶段在安装阶段之后，这意味着换句话说，如果您调用了 mvn deploy，安装已经运行。如果您想将工件（通常是战争）部署到 Tomcat，[maven-tomcat-plugin](http://tomcat.apache.org/maven-plugin-2/)是正确的选择。对于进行某种集成测试，[cargo2-maven-plugin](http://cargo.codehaus.org/Maven2+plugin)可能是一个更好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:17:20.627

部署任务通常用于将您的项目构建的工件部署到远程存储库中，以供其他人下载。

如果您想上传由您的项目构建的战争，请使用[http://mojo.codehaus.org/tomcat-maven-plugin/deployment.html](http://mojo.codehaus.org/tomcat-maven-plugin/deployment.html)之类的插件或等效插件。

# android - Android中MediaPlayer的速度控制

> ID：10849961
> 
> 赞同：29
> 
> 时间：2012-06-01T12:06:46.677
> 
> 标签：android

我正在开发一个播放器应用程序，我正在使用[`MediaPlayer`](https://developer.android.com/reference/android/media/MediaPlayer.html)它。

现在，我想改变播放曲目的速度。

我见过很多具有此功能的应用程序。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2016-05-07T22:26:45.517

**从 API 23 开始**，MediaPlayer 可以使用[此方法](http://developer.android.com/reference/android/media/MediaPlayer.html#setPlaybackParams%28android.media.PlaybackParams%29)设置播放速度。

> 类媒体播放器
> 
> `public void setPlaybackParams (PlaybackParams params)`在 API 级别 23 中添加
> 
> 使用 PlaybackParams 设置播放速率。参数 params PlaybackParams：播放参数。如果内部播放器引擎尚未初始化，则引发 IllegalStateException。如果不支持 params，则 IllegalArgumentException。

示例代码：

```
MediaPlayer mp = ...; //Whatever
float speed = 0.75f;     
mp.setPlaybackParams(mp.getPlaybackParams().setSpeed(speed)); 
```

**对于 API < 23**，请参阅上面（或下面）[的 Vipul Shah 的回答。](https://stackoverflow.com/a/10850224)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-01T12:26:04.903

**MediaPlayer 不**提供此功能，但 SoundPool 具有此功能。SoundPool 类有一个名为`setRate (int streamID, float rate)`. 如果您对[API 感兴趣，请查看此处](http://developer.android.com/reference/android/media/SoundPool.html#setRate%28int,%20float%29)。

此代码段将起作用。

```
 float playbackSpeed=1.5f; 
 SoundPool soundPool = new SoundPool(4, AudioManager.STREAM_MUSIC, 100);

 soundId = soundPool.load(Environment.getExternalStorageDirectory()
                         + "/sample.3gp", 1);
 AudioManager mgr = (AudioManager) getSystemService(Context.AUDIO_SERVICE);
 final float volume = mgr.getStreamMaxVolume(AudioManager.STREAM_MUSIC);

 soundPool.setOnLoadCompleteListener(new OnLoadCompleteListener()
 {
     @Override
     public void onLoadComplete(SoundPool arg0, int arg1, int arg2)
     {
         soundPool.play(soundId, volume, volume, 1, 0, playbackSpeed);
     }
 }); 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2012-10-22T00:45:02.687

soundpool 只支持比较小的可以预加载的音效文件。您将获得任何有用长度的音乐曲目的堆溢出。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-07-04T21:31:36.657

现在你可以使用

`mediaPlayer.setPlaybackParams(mediaPlayer.getPlaybackParams().setSpeed(speed))`

适用于 API 23 及更高版本！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-01T12:12:21.533

该类`MediaPlayer`不提供此功能。而是使用`SoundPool`类。它有一个名为`setRate (int streamID, float rate)`. 阅读[此](http://developer.android.com/reference/android/media/SoundPool.html#setRate%28int,%20float%29)内容以获取更多信息。这是一个[示例代码](https://stackoverflow.com/questions/2751309/change-the-playback-rate-of-a-track-in-real-time-on-android)供您使用。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-04-20T11:15:47.380

根据我们在[这里](https://stackoverflow.com/a/45613064/13634739)提到的流程， 以下代码适用于 android API 23 (Android 6.0 Marshmallow)

```
PlaybackParams playbackParams = new PlaybackParams();
playbackParams.setSpeed(2);
playbackParams.setPitch(1);
playbackParams.setAudioFallbackMode(
    PlaybackParams.AUDIO_FALLBACK_MODE_DEFAULT);
mMediaPlayer.setPlaybackParams(playbackParams); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-11T10:10:11.473

**在 Android 中通过 ExoPlayer 进行速度控制**

```
//exoPlayer.setPlaybackParameters(PlaybackParameters(//speed in float))
//EXAMPLE->
exoPlayer.setPlaybackParameters(PlaybackParameters(1.5f)) 
```

# uri - 如何将 NULL 值传递给 WCF 数据服务的服务操作？

> ID：10849962
> 
> 赞同：0
> 
> 时间：2012-06-01T12:06:50.233
> 
> 标签：uri, wcf-data-services, odata

我有一个 WCF 数据服务的服务操作，例如

```
[WebGet(UriTemplate = "GetData")]
public IQueryable<string> GetData(int code, int deviceid, int groupId, DateTime dateTimeFrom, DateTime dateTimeTo)
{ ...
} 
```

我通过以这种格式向服务器发送 HTTP 请求来调用此服务操作：

```
http://localhost:6000/GetData?code=0&deviceId=1&groupId=0L&dateTimeFrom=datetime'2013-01-31T15:36:50.904'&dateTimeTo=datetime'2012-02-01T15:36:50.904' 
```

它就像一个魅力。

现在我想传递一个 NULL 值作为参数之一。我怎么做？我是否需要使用可空类型，例如“Int”？在服务运营声明中？如何对 URI 中的 NULL 值进行编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-02T15:29:15.510

是的 - 您需要将参数声明为可为空的。然后你可以简单地省略参数（如果它可以为空，那么它将被视为空）。

# java - 动态地将方法体重新分配给对象

> ID：10849963
> 
> 赞同：1
> 
> 时间：2012-06-01T12:06:58.103
> 
> 标签：java, class, dynamic, methods, overriding

是否有可能有`A`一个空方法的类说`render()`..然后你创建了该类的 3 个实例，所以你有 objects `b, c, d`，那么我可以为每个对象的 render 方法分配主体吗？

这是一个例子，在 JavaScript 中你可以让一个对象说`a`，然后在任何你可以说的地方

```
a.method = function() { /* do something */ } 
```

在该行之后，您将拥有一个带有`method`对象名称的方法，`a`并且无论何时调用它都会`/* do something */`。

这在 Java 中是否可行，语法是什么？

我的想法是有一个`button`类并在它使用的不同情况/上下文中为其实例的方法分配不同的操作`click`，因此我不必为每个操作定义不同的子类。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-01T12:08:31.427

在 Java 中，您不能像在 Javascript 中那样传递函数。

您需要创建一个名为（最好是更具描述性的！）的*类*或*接口*`Handler`，它声明您要调用的方法。然后你可以做类似这样的事情：

```
a.method = function() { /* do something */ } 
```

但你必须将其表述为

```
a.method = new Handler() {
    public void function() {
        /* do something */
    }
}; 
```

并将其称为`a.method.function()`.

> ***我的想法是有一个`button`类并在它使用的不同情况/上下文中为其实例的方法分配不同的操作`click`，因此我不必为每个操作定义不同的子类。***

这正是 Swing 的做法。它通常看起来像这样：

```
myButton.setAction(new AbstractAction("Click me!") {
    public void actionPerformed() {
        // do something
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-01T12:11:07.647

您可以异常地实例化该类的子`A`类并覆盖您想要的方法。像这样

```
A a = new A(){
   @Override
   public void render(){
       //do something
   }
};
A b = new A(){
    @Override
    public void render(){
        //do something
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T12:36:19.343

如果只想实例化具有render方法的类的一个对象，可以使用委托；如果课程是重量级课程，您可能想要这样做。

这实际上是**策略模式**：

```
class MyClass {
    private Behavior behavior;

     public void setBehaviour(Behavior someBehaviour) {
         this.behavior = someBehavior;
     }
     public void render() {
         behavior.render();
     }
}

interface Behavior {
     void render(); 
}

class BehaviorA implements Behavior {
     public void render() {
         //do behavior A 
     }
}

class BehaviorB implements Behavior {
     public void render() {
         //do behavoir B
     }
}

class RunnerClass {
    public static void main(String[] args) {
        MyClass myClass = new MyClass();

        myClass.setBehavior(new BehaviorA()); //actually you should put a factory for behavioir
        myClass.render();//render A logic is done
        myClass.setBehavior(new BehaviorB());
        myClass.render();//render B logic is done   
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-01T12:10:23.833

实例化类*后*不能定义方法体，但实例化*时*`A`可以定义方法体。

 *```
interface A {
  void method();
}

A b = new A() {
  @Override
  public void method() {
    //body for instance b
  }
};

A c = new A() {
  @Override
  public void method() {
    //body for instance c
  }
}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-01T12:11:05.650

不，你不能在 Java 中做到这一点。方法的实现完全由其对象的运行时类型决定。

但是您可以使用策略模式，这实际上是标准 Swing 框架所做的（或多或少）：您可以将 an 设置`Action`为 a `JButton`，并在单击按钮时调用`Action`'方法。`actionPerformed()`这只是对象之间的委托。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-01T12:17:24.060

好吧，老实说，这听起来像是 java 中的纯多态性，可以通过两种方式实现：

*   要么创建一个公共接口，您的每个对象都以不同的方式实现

*   定义一个抽象类按钮并创建扩展抽象按钮的 b、c、d 按钮并以不同方式定义每个按钮的行为。

[http://java.sys-con.com/node/376​​95](http://java.sys-con.com/node/37695)

[http://www.javaworld.com/javaworld/javatips/jw-javatip30.html](http://www.javaworld.com/javaworld/javatips/jw-javatip30.html)*

# android - 如何区分 ActionBarSherlock 中的两个菜单项点击？

> ID：10849964
> 
> 赞同：6
> 
> 时间：2012-06-01T12:06:58.603
> 
> 标签：android, actionbarsherlock, android-actionbar

我最近一直在使用 ActionBarSherlock，并遵循各种教程，我编写了这段代码来将项目添加到操作栏

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {

    menu.add("Refresh")
        .setIcon(R.drawable.ic_action_refresh)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

    menu.add("Search")// Search
        .setIcon(R.drawable.ic_action_search)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
        return true;
} 
```

但是，我不知道如何区分这两次点击。

虽然我确实发现您必须覆盖 onOptionsItemSelected 来处理点击，并且可以使用 switch 语句来区分点击，但大多数教程使用来自他们的 xml 菜单的项目 ID。由于我没有在 xml 中创建菜单，我如何区分没有 ID 的点击。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-01T13:10:16.513

```
private static final int REFRESH = 1;
private static final int SEARCH = 2;

@Override
public boolean onCreateOptionsMenu(Menu menu) {

    menu.add(0, REFRESH, 0, "Refresh")
        .setIcon(R.drawable.ic_action_refresh)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

    menu.add(0, SEARCH, 0, "Search")
        .setIcon(R.drawable.ic_action_search)
        .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);
        return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case REFRESH:
            // Do refresh
            return true;
        case SEARCH:
            // Do search
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T12:17:51.383

只需检查以下

```
http://developer.android.com/guide/topics/ui/actionbar.html 
```

其中包含

```
@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {   <--- here you can get it
        case android.R.id.home:
            // app icon in action bar clicked; go home
            Intent intent = new Intent(this, HomeActivity.class);
            intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(intent);
            return true;
        default:
            return super.onOptionsItemSelected(item);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T12:10:58.610

您可以通过 onOptionsItemSelected 中的 Id 进行 ti ......也可以在此处设置

[http://thedevelopersinfo.wordpress.com/2009/10/29/handling-options-menu-item-selections-in-android/](http://thedevelopersinfo.wordpress.com/2009/10/29/handling-options-menu-item-selections-in-android/)

[http://developer.android.com/reference/android/view/Menu.html#add(int](http://developer.android.com/reference/android/view/Menu.html#add(int) , int, int, java.lang.CharSequence)

```
use 
public abstract MenuItem add (int groupId, int itemId, int order, CharSequence title)

Since: API Level 1
Add a new item to the menu. This item displays the given title for its label.
Parameters

groupId The group identifier that this item should be part of. This can be used to define groups of items for batch state changes. Normally use NONE if an item should not be in a group.
itemId  Unique item ID. Use NONE if you do not need a unique ID.
order   The order for the item. Use NONE if you do not care about the order. See getOrder().
title   The text to display for the item.
Returns

The newly added menu item. 
```

# mysql - 如何在mysql中获得本周前6周的结果

> ID：10849965
> 
> 赞同：0
> 
> 时间：2012-06-01T12:07:09.670
> 
> 标签：mysql

我可以使用下面的代码获得每周的总条目。

```
select week(date_created) as week, count(distinct tag_code) as Total_This_Week 
from entries 
where date_created between '2000-01-01' and '2020-01-01' 
group by week; 
```

但我需要得到的是`total_last_6_weeks`下面这样的列，它是前 6 周的加起来，所以第 6 周的`total_Last_6_weeks`“370”是通过加起来得到的（56+45+85+34​​+85+65）。这必须每周发生，所以第 9 周必须将前 6 周相加。我尝试过的一切似乎都不起作用。

```
+-----+-----------------+--------------------+ 
| week| Total_This_Week | total_Last_6_Weeks | 
+-----+-----------------+--------------------+ 
|__0__|_______81________|_______ 122________ | 
|__1__|_______65________|________188________ | 
|__2__|_______85________|________145_________| 
|__3__|_______34________|________205_________| 
|__4__|_______85________|________189_________| 
|__5__|_______45________|________112_________| 
|__6__|_______56________|________370_________| 
|__7__|_______32________|________518_________| 
|__8__|_______34________|________121_________| 
|__9__|_______45________|________224_________| 
+-----+-----------------+--------------------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-01T12:43:40.620

在 SQL Server 或 Oracle 中，您可以延迟`date_created`六周并使用

```
 over (partition by ...) 
```

获得累计总和，而差额将为您提供 6 周滚动的总和。我知道在 MySQL 中你可以通过使用变量来做到这一点，因为分区和 over 不直接存在。以下是如何进行的简要总结：

[MySQL 中的 ROW_NUMBER、Partition 和 Over](http://briansteffens.com/2011/07/19/row_number-partition-and-over-in-mysql/)

# ios - 与 UIImage 分开的视图中的阴影用于动态调整

> ID：10849967
> 
> 赞同：0
> 
> 时间：2012-06-01T12:07:25.240
> 
> 标签：ios, path, uiimageview, dropshadow

我想获得这种效果（http://stackoverflow.com/questions/7023271/how-to-adjust-drop-shadow-dynamically-during-an-uiimageview-rotation），但从一个比红色更复杂的图像正方形 ！如果链接被破坏，这是关于如何在 UIImageView 旋转期间动态调整阴影。

所以我尝试实现一些东西，但我无法在单独的层中获得阴影......这是我的代码，非常简单，但不起作用：

```
 // here is my code

- (void)viewDidLoad {
[super viewDidLoad];

testView = [[UIImageView alloc] initWithImage: [UIImage imageNamed:@"handNoShadow.png"]];

testViewShadow = [[UIView alloc] initWithFrame:testView.frame];

testViewShadow.layer.shadowPath = [[testView layer] shadowPath];
testViewShadow.layer.shadowOpacity = 1.0;
testViewShadow.layer.shadowOffset = CGSizeMake(10, 10);
testViewShadow.layer.shadowRadius = 5.0;

[self.view addSubview:testViewShadow];
[self.view addSubview:testView];

} 
```

PS：我做了#import

我确实得到了图像但没有阴影...... =（

欢迎任何线索、帮助、代码、链接……！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:54:26.477

可能的原因：

*   你的 testViewShadow.clipToBounds 属性设置为 YES（应该是 NO）

*   您的 testViewShadow 正确绘制阴影，但另一个 UIView 位于顶部并将其遮盖。检查您的 Z 订单。Storyboard/Nib 文件中的顺序（或您以编程方式添加子视图的顺序）。列表中的最后一个（或添加的最后一个）位于顶部。对于我的应用程序，我必须将需要阴影的 UIView 放在最后，以免其他视图掩盖它。

# php - facebook php 连接 检查 cookie

> ID：10849970
> 
> 赞同：0
> 
> 时间：2012-06-01T12:07:41.847
> 
> 标签：php, facebook

如何检查用户是否使用 php-sdk 3.1.1 从 facebook 登录？我正在这样做：

```
$user = $this->facebook->getUser();
if ($user) { 
```

因此，如果用户我知道他已登录，但与 facebook 对象通信需要很长时间，如果我只能使用 php 检查 facebook coockie 是否存在，那么我知道是否有人登录。

所以它是关于速度的优化，也许只用一次 Facebook 登录并中继我的会话或 coockie 也是个好主意

有人可以给我一些反馈吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:00:34.013

[getUser()](http://developers.facebook.com/docs/reference/php/facebook-getUser/)方法将尝试从签名请求（从请求或 cookie）中获取用户 ID。默认情况下它不会调用 Facebook 服务器。

您在创建 Facebook 对象时不会失去任何性能/速度。

**您应该遵循以下伪代码：**

```
call getUser method
if user 
  if(!isset($_SESSION['user']))
    get user data using graph api
    store it in session
  else
    if($_SESSION['user']['fb_id'] != $user){
    get user data using graph api
        store it in session         
    end
  end

end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T12:10:02.080

如果您进行检查，您可以将结果存储在某处，例如在会话中。

您无法检查其他域的 cookie。

# java - 具有相同标识符值的不同对象已与会话关联

> ID：10849974
> 
> 赞同：4
> 
> 时间：2012-06-01T12:07:53.527
> 
> 标签：java, hibernate, set

> **可能重复：**
> [休眠：具有相同标识符值的不同对象已与会话关联](https://stackoverflow.com/questions/3553200/hibernate-different-object-with-the-same-identifier-value-was-already-associate)

我收到以下错误：

具有相同标识符值的不同对象已与会话关联

我有两种类型的对象，Course 和 RecommendedSchedule，其中包含一组课程。以下是他们的 xml 定义：

```
<hibernate-mapping>
<class name="database.datatypes.Course" table="courses" lazy="false">
    <id name="id" column="ID">
         <generator class="assigned"/>
    </id>
    <property name="name" type="string"/>
    <property name="date"/>
</class> 
```

和

```
<hibernate-mapping>
<class name="database.datatypes.RecommendedSchedule" table="recommended_schedules" lazy="false">
    <id name="id" column="ID">
         <generator class="increment"/>
    </id>
    <set name="courses" table="schedules_courses" cascade="save-update" lazy="false">
        <key column="course_id"/>
        <many-to-many class="database.datatypes.Course"/>
    </set>
    <property name="semester" type="string"/>
    <property name="path" type="string"/>
</class> 
```

基本上，如果我插入两个具有不同集合的推荐系统，但使用相同的课程对象，它可以工作，但如果我做完全相同的事情但使用不同的课程对象（具有相同的值），我会得到错误。

有人知道我在做什么错吗？

这是一段失败的代码的示例：

```
Session s = db.factory.openSession();
    Set<Course> set1 = new HashSet<>();
    Set<Course> set2 = new HashSet<>();
    Course c1 = new Course(104167L, "Algebra A");
    Course c2 = new Course(234114L, "Introduction to CS H and M");
    Course c3 = new Course(104012L, "Calculus 1 T");
    Course c4 = new Course(234145L, "Digital Systems");
    Course c12 = new Course(104167L, "Algebra A");
    Course c22 = new Course(234114L, "Introduction to CS H and M");
    Course c32 = new Course(104012L, "Calculus 1 T");
    Course c42 = new Course(234145L, "Digital Systems");
    set1.add(c1);
    set1.add(c2);
    set1.add(c3);
    set2.add(c12);
    set2.add(c22);
    set2.add(c32);
    set2.add(c42);
    RecommendedSchedule r1 = new RecommendedSchedule(set1, "General 3 years", "1");
    RecommendedSchedule r2 = new RecommendedSchedule(set2, "General 4 years", "1");
    Collection<RecommendedSchedule> col = new ArrayList<RecommendedSchedule>();
    Collection<Course> col2 = new ArrayList<Course>();
    col.add(r1);
    col.add(r2);
    col2.add(c12);
    col2.add(c22);
    col2.add(c32);
    col2.add(c42);

    Transaction t = s.beginTransaction();
    s.save(r1);
    s.save(r2);
    t.commit();
    s.close(); 
```

如果我这样做了：

```
set2.add(c1);
set2.add(c2);
set2.add(c3);
set2.add(c4); 
```

它会奏效的。（这当然不是真正的问题，只是一个简单的例子）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-04T18:15:12.723

最后我只是简单地使用了merge()而不是save()，似乎它解决了这个问题，即使我有一组对象，而不仅仅是尝试使用普通对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T12:43:55.997

id 是 Course 表的唯一键。每个 id 值只能使用一次。Course 之间的关系是 m:n。

当您对同一课程（相同的 ID）使用不同的实例时，您尝试插入两个具有相同 ID 的不同行。这是行不通的。Hibernate 会记住每个实例（实例，而不是键值！）如果它已经保存，并且因为您使用级联，那么在保存时 Hibernate 会查看哪些子实例尚未保存，如果您`c1`先保存，则`c12`不是尚未保存并稍后保存会产生错误。

解决方案：在RecommendedSchedule 的两个课程列表中插入相同的Course 实例。无论如何，它们是相同的课程。

# c++ - 函数结束后丢失指针数据

> ID：10849982
> 
> 赞同：0
> 
> 时间：2012-06-01T12:08:19.430
> 
> 标签：c++, pointers, vector

我正在尝试使指针指向某个向量，但在函数结束后，调试器显示指针不再指向该向量。相关代码如下：

```
#pragma once
#include "Configuration.h"
#include "Enemy.h"

class FireBall:public sf::Sprite{
public:
    FireBall(const sf::Vector2f position,  Tile * startTile);
    void moveFB();
    void setTrail(vector<Tile *> *trail);
    void removeTrail();

private:
    sf::Vector2f _position;
    vector<Tile *> *_p2_trail;
    vector<Tile *>::iterator _it2Tile;
    sf::Clock _clock;
    int _lastMoveTime;

    float getDecimalPart(float number);
};

void FireBall::setTrail(vector<Tile *> *trail){
    _p2_trail = trail; // here it points to the vector (SHOULED REMAIN LIKE THAT AFTER FUNCTION ENDS....)
    _it2Tile = _p2_trail->begin(); // setting iterator to begin
}

void GameBoard::setFireBall(bool set, float x, float y){
    if (set)
        _p2FB = new FireBall(sf::Vector2f((float)x*OFFSET,(float)y*OFFSET),        _gameBoard[x][y]);
    else{
        _p2FB->removeTrail();
        delete _p2FB;
    }

    _hasFireBall = set;
    _p2FB->setTrail(&_player->getTrail());
    // at this point _p2FB no more points to the vecotr! why?!!
} 
```

播放器标题：#pragma once #include "Configuration.h" #include "Character.h"

```
class Player:public Character{
public:
    Player(vector< vector <Tile *>> &gameBoard, const sf::Vector2f position, const     IMAGE img);
    bool isLegalMove(const sf::Vector2f &position);
    void move(sf::Vector2f &direction, Tile ** previousTile, Tile ** currentTile);
    void act();

    void setShielded(const bool shieldMode){ _sheilded = shieldMode; };
    bool getShielded() const {return _sheilded; };
    vector<Tile *> getTrail(){ return _trail; };
    void addToTrail(Tile * tile);
    void convertTrailToShield();
    void removeTrail();
    void fixBoardPosition();
    void updateShielded(const pair<int,int>& prevPosition);
private:
    bool _sheilded;
    vector<Tile *> _trail; 
```

};

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T12:48:46.557

Player::getTrail() 返回一个“vector”类型的临时对象，您可以通过 _p2FB->setTrail() 调用获取它的指针并存储。在这种情况下，临时的生命周期只到表达式的结尾。因此，指针 Fireball::_p2_trail 在 setTrail 调用之后是无效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-01T12:13:32.390

在`setFireBall()`if`set`为 false 时，您删除`_p2FB`，然后在 2 行后通过调用来使用它`setTrail()`。您正在对已删除的指针调用方法。

另外，游戏是多线程的吗？当您获得指向它的指针和调试器说它无效时，是否有不同的线程正在修改/删除播放器的向量？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T12:18:31.870

如果您的构造函数调用设置跟踪，则不要在堆栈上设置向量，而是尝试将其放入堆中并传递一个指针。在堆上而不是在堆栈上使用带有对象的指针是一种很好的做法。如果它在堆栈上并且您尝试保存指向它的指针，它将在其作用域结束时被释放。

# compression - MPI：是否有能够进行消息压缩的 mpi 库？

> ID：10849983
> 
> 赞同：7
> 
> 时间：2012-06-01T12:08:20.443
> 
> 标签：compression, mpi

有时 MPI 用于在消息中发送低熵数据。因此，在发送消息之前尝试压缩消息会很有用。我知道 MPI 可以在非常快的网络（10 Gbit/s 或更高）上运行，但许多 MPI 程序用于廉价网络，如 0.1G 或 1Gbit/s 以太网和廉价（慢速、低二分）网络交换机。有一个非常快速的[Snappy (wikipedia)](http://en.wikipedia.org/wiki/Snappy_%28software%29)压缩算法，它有

> 压缩速度为 250 MB/s，解压缩速度为 500 MB/s

等等可压缩数据和慢速网络，它会提供一些加速。

是否有任何 MPI 库可以压缩 MPI 消息（在 MPI 层；而不是像 PPP 那样压缩 ip 数据包）。

MPI 消息也是结构化的，因此可以有一些特殊的方法，例如压缩双精度数组中的指数部分。

PS：还有速度相当的[LZ4压缩方式](http://fastcompression.blogspot.ru/p/lz4.html)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-01T12:38:36.797

我不会发誓那里没有，但没有常用的。

不常见的原因有两个：

MPI 常用于发送大量难以（但并非不可能）压缩好的浮点数据，并且通常在一段时间后具有相对较高的熵。

此外，MPI 用户通常关心延迟和带宽一样，在消息传递关键路径中添加压缩/解压缩步骤对这些用户没有吸引力。

最后，一些操作（如归约集合或分散聚集）将很难通过压缩有效实现。

但是，听起来您的用例可以从点对点通信中受益，因此您没有理由不能自己做。如果您要发送大小为 N 的消息并且接收者期望它，那么：

*   发送方调用压缩例程，接收缓冲区和新长度 M；
*   如果 M >= N，将原始数据（初始字节为 0）作为 N+1 个字节发送给接收方
*   否则发送 1 + 压缩数据的初始字节
*   接收方将数据接收到长度为 N+1 的缓冲区中
*   如果第一个字节为 1，则调用 MPI_Get_count 以确定接收到的数据量，调用解压缩例程
*   否则使用未压缩的数据

关于压缩例程，我不能给你太多指导，但看起来人们之前已经尝试过，例如[http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.91.7936](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.91.7936)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-01T12:28:39.787

我很高兴被告知其他情况，但我认为我们许多 MPI 用户并不关心拥有压缩数据的传输层。

为什么不呢？

1）我们已经设计了我们的程序以尽可能少地进行通信，因此我们（认为我们）正在通过互连发送最低限度的信息。

2）我们较大的消息的大部分包含浮点数数组，这些浮点数相对难以压缩（因此在时间上相对昂贵）到任何程度。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-01T11:29:47.067

爱丁堡大学有一个正在进行的项目：http: [//link.springer.com/chapter/10.1007%2F978-3-642-32820-6_72 ?LI=true](http://link.springer.com/chapter/10.1007%2F978-3-642-32820-6_72?LI=true)

# vmware - VMWare 播放器上的黑莓 playbook 模拟器暂停

> ID：10849984
> 
> 赞同：0
> 
> 时间：2012-06-01T12:08:27.633
> 
> 标签：vmware, blackberry-playbook

我在 windows7 上安装了 BlackBerryPlayBookSimulator-Installer-1.0.8-6067-Win-201112052354 并尝试在它暂停的 VMWare 播放器上播放，如下图所示。

![](../Images/df40a1a76e13beb07612a78de09ed680.png)请帮我。我重新安装了VMWare，但没有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T20:49:32.007

我试过在我的几台机器上运行 VMware Workstation 8 下的模拟器。它实际工作的唯一机器是带有精美显卡的机器。在所有其他情况下，它会在“开始屏幕”处冻结。

# java - 从java自定义excel文件

> ID：10849986
> 
> 赞同：2
> 
> 时间：2012-06-01T12:08:42.400
> 
> 标签：java, jsp

我有一个**jsp 页面**，其中填充了来自数据库的表。我必须把这个表的数据扔到 **excel 文件**中。此外，我还必须**自定义 excel 文件，如边框颜色、合并单元格颜色**的字体等以及数据。我该怎么做？是否有任何**用于这项工作的 java 脚本？或者是否有任何用于此任务的开源工具？**

我找到了一个类似*dataTables jquery 包，但它没有自定义 excel 文件，只会将数据抛出到 excel 中。*还是我必须使用*java 库*？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-01T12:15:11.563

您可以为此使用[Apache POI](http://poi.apache.org/)。

以供参考 -

```
public class xyzExcelExportView extends AbstractExcelView {

    private static final xyzService xyzService = ApplicationContextProvider.getxyzServiceImpl();

    @SuppressWarnings({ "unchecked" })
    protected void buildExcelDocument(Map model, HSSFWorkbook workbook,
            HttpServletRequest request, HttpServletResponse response)
            throws Exception {
        CurrencyService currencyService = ApplicationContextProvider.getCurrencyService();
        Currency currency = null;
        //set Response
        response.setContentType("application/vnd.ms-excel");
        response.setCharacterEncoding("UTF-8");
        response.setHeader("Content-Disposition", "Attachment;Filename=\""+"ExcelExport"+"."+"xls" + "\"");
        // Create Sheet.
        HSSFSheet sheet = workbook.createSheet("Software Contract Database");
        // Create Style for sheet.
        HSSFCellStyle headerStyle = workbook.createCellStyle();
        HSSFCellStyle dateStyle = workbook.createCellStyle();       
        HSSFCellStyle datePatternStyle = workbook.createCellStyle();
        HSSFDataFormat format1 = workbook.createDataFormat();
        HSSFCellStyle dataStyle = workbook.createCellStyle();
        HSSFCellStyle numberStyle = workbook.createCellStyle();     
        dateStyle.setAlignment(HSSFCellStyle.ALIGN_RIGHT);
        dataStyle.setWrapText(true);
        datePatternStyle.setDataFormat(HSSFDataFormat
                .getBuiltinFormat("d-mmm-yy"));
        numberStyle.setDataFormat(format1.getFormat("#,##0"));
        // Font setting for sheet.
        HSSFFont font = workbook.createFont();
        HSSFPalette palette = workbook.getCustomPalette();
        palette.setColorAtIndex(HSSFColor.LAVENDER.index,
                (byte) 204,  
                (byte) 204,    
                (byte) 255);
        font.setBoldweight((short) 700);
        sheet.setDefaultColumnWidth((short) 30);
        List<Type> dataList = // YOur Data list     
        int currentRow = 0;
        // WRITE ROW FOR HEADER
        HSSFCell header = null;
        for (short i = 0; i < getHeader().size(); i++) {
            header = getCell(sheet, currentRow, i);
            headerStyle.setFillForegroundColor(HSSFColor.LAVENDER.index);
            headerStyle.setFillPattern(HSSFCellStyle.SOLID_FOREGROUND);
            headerStyle.setFont(font);
            header.setCellStyle(headerStyle);
            setText(header, getxyzHeader().get(i));
        }       

        HSSFRow row = null;
        HSSFCell cellNumber = null;
        HSSFCell cellString = null;
        HSSFCell cellNumberWitnComma = null;
        HSSFCell cellDate = null;

        for(Type xyz : dataList){
                currentRow++;
                short i = 0;
                row = sheet.createRow(currentRow);
                cellNumber = row.createCell(i);
                cellNumber = fillxyzExcelExportCell(xyz.getId() == null ? 0 : xyz.getId(), 1 , cellNumber);
                cellNumber.setCellStyle(dataStyle);

                cellString = row.createCell(++i);
                cellString = fillxyzExcelExportCell(xyz.getStatus() == null ? "" : xyz.getStatus() , 3 , cellString);   
                cellString.setCellStyle(dataStyle); 

                cellString = row.createCell(++i);
                cellString = fillxyzExcelExportCell(xyz.getxyzStatus() , 3 , cellString);   
                cellString.setCellStyle(dataStyle);

                cellString = row.createCell(++i);
                cellString = fillxyzExcelExportCell(xyz.getName() == null ? "" : xyz.getName(), 3 , cellString);
                cellString.setCellStyle(dataStyle);     
            }
        }   
        workbook.write(response.getOutputStream());
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T12:11:15.043

[Apache POI](http://poi.apache.org/)非常适合这项任务——它是一个 Java 库并且具有非常好的 Excel 支持。它是免费和开源的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-01T12:25:07.610

JExcelApi 是一个开源库，允许您读取、编写和自定义 Excel 表格。它可能会满足您的要求。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T13:11:58.080

以下答案可能会有所帮助：

*   [如何使用 javascript 将 html 表导出到 excel](https://stackoverflow.com/questions/6566831/how-to-export-html-table-to-excel-using-javascript)这仅适用于 IE。
*   [Excel XML 电子表格示例](http://en.wikipedia.org/wiki/Microsoft_Office_2003_XML_formats)您需要指定`Content-Type`标头`application/vnd.ms-excel`和可选标头`Content-Disposition`有关 XML 格式的参考，请参阅[http://msdn.microsoft.com/en-us/library/aa140066(office.10).aspx](http://msdn.microsoft.com/en-us/library/aa140066(office.10).aspx)
*   [从对应的xml生成xls文件](https://stackoverflow.com/questions/8385880/generating-xls-file-from-corresponding-xml)

您还可以通过更改JSP 中的`Content-Type`and将 HTML 文件导出到 Excel 。`Content-Disposition`从 Excel 2003 开始​​，您可以打开 HTML 文件。我最喜欢的方式是用于 XLS 或 XLSX 的 Apache POI。

# java - 检索目录时的 edtFTPj Java 错误

> ID：10849987
> 
> 赞同：3
> 
> 时间：2012-06-01T12:08:42.820
> 
> 标签：java, ftp4j, edtftpj

我想使用 Java 连接到 FTP 服务器，在本例中为 FileZilla 服务器。我已经下载[了 edtFTPJ/free](http://www.enterprisedt.com/products/edtftpj/overview.html) ，并且一直在尝试他们在该软件包中发送的示例。连接到服务器，删除文件夹/文件，重命名，创建文件夹工作，但是当我想获取目录列表时，连接被关闭。（这也发生在另一个名为[FTP4J](http://www.sauronsoftware.it/projects/ftp4j/)的库中。）这是代码：

```
package ftp_classes;

import com.enterprisedt.net.ftp.FileTransferClient;
import com.enterprisedt.net.ftp.FTPFile;
import com.enterprisedt.util.debug.Level;
import com.enterprisedt.util.debug.Logger;

public class GetDirectoryListing {

    public static void main(String[] args) {

        String host = "localhost";
        String username = "user";
        String password = "password";

        // set up logger so that we get some output
        Logger log = Logger.getLogger(GetDirectoryListing.class);
        Logger.setLevel(Level.INFO);

        FileTransferClient ftp = null;

        try {
              com.enterprisedt.util.debug.Logger.setLevel(com.enterprisedt.util.debug.Level.DEBUG);
            // create client
            log.info("Creating FTP client");
            ftp = new FileTransferClient();

            // set remote host
            log.info("Setting remote host");
            ftp.setRemoteHost(host);
            ftp.setUserName(username);
            ftp.setPassword(password);

            // connect to the server
            log.info("Connecting to server " + host);
            ftp.connect();
            log.info("Connected and logged in to server " + host);

            log.info("Getting current directory listing");
            FTPFile[] files = ftp.directoryList(".");
            for (int i = 0; i < files.length; i++) {
                log.info(files[i].toString());
            }

            // Shut down client
            log.info("Quitting client");
            ftp.disconnect();

            log.info("Example complete");

        } catch (Exception e) {
            e.printStackTrace();

        }
    }

} 
```

这是控制台输出：

```
INFO [ftp_classes.GetDirectoryListing] 1 Jun 2012 14:05:00.151 : Setting remote host
INFO [ftp_classes.GetDirectoryListing] 1 Jun 2012 14:05:00.151 : Connecting to server localhost
DEBUG [FileTransferClient] 1 Jun 2012 14:05:00.151 : Configured client
DEBUG [FTPClient] 1 Jun 2012 14:05:00.159 : Connecting to localhost/127.0.0.1:21
DEBUG [FTPControlSocket] 1 Jun 2012 14:05:00.175 : 220-FileZilla Server version 0.9.41 beta
DEBUG [FTPControlSocket] 1 Jun 2012 14:05:00.175 : 220-written by Tim Kosse (Tim.Kosse@gmx.de)
DEBUG [FTPControlSocket] 1 Jun 2012 14:05:00.177 : 220 Please visit http://sourceforge.net/projects/filezilla/
DEBUG [FileTransferClient] 1 Jun 2012 14:05:00.179 : Client connected
DEBUG [FileTransferClient] 1 Jun 2012 14:05:00.180 : Logging in
DEBUG [FTPControlSocket] 1 Jun 2012 14:05:00.180 : ---> USER user
DEBUG [FTPControlSocket] 1 Jun 2012 14:05:00.180 : 331 Password required for user
DEBUG [FTPControlSocket] 1 Jun 2012 14:05:00.181 : ---> PASS ********
DEBUG [FTPControlSocket] 1 Jun 2012 14:05:00.181 : 230 Logged on
DEBUG [FileTransferClient] 1 Jun 2012 14:05:00.181 : Logged in
DEBUG [FTPControlSocket] 1 Jun 2012 14:05:00.181 : ---> TYPE I
DEBUG [FTPControlSocket] 1 Jun 2012 14:05:00.182 : 200 Type set to I
INFO [ftp_classes.GetDirectoryListing] 1 Jun 2012 14:05:00.182 : Connected and logged in to server localhost
INFO [ftp_classes.GetDirectoryListing] 1 Jun 2012 14:05:00.182 : Getting current directory listing
DEBUG [FTPControlSocket] 1 Jun 2012 14:05:00.189 : ---> SYST
DEBUG [FTPControlSocket] 1 Jun 2012 14:05:00.189 : 215 UNIX emulated by FileZilla
DEBUG [FTPControlSocket] 1 Jun 2012 14:05:00.194 : ---> PWD
DEBUG [FTPControlSocket] 1 Jun 2012 14:05:00.194 : 257 "/" is current directory.
DEBUG [FTPClient] 1 Jun 2012 14:05:00.194 : setupDirDetails(.) returning: /
DEBUG [FTPControlSocket] 1 Jun 2012 14:05:00.195 : ListenOnAllInterfaces=true
com.enterprisedt.net.ftp.ControlChannelIOException: Software caused connection abort: socket write error
    at com.enterprisedt.net.ftp.FTPControlSocket.writeCommand(FTPControlSocket.java:1020)
    at com.enterprisedt.net.ftp.FTPControlSocket.sendCommand(FTPControlSocket.java:997)
    at com.enterprisedt.net.ftp.FTPControlSocket.setDataPort(FTPControlSocket.java:813)
    at com.enterprisedt.net.ftp.FTPControlSocket.sendPORTCommand(FTPControlSocket.java:669)
    at com.enterprisedt.net.ftp.FTPControlSocket.createDataSocketActive(FTPControlSocket.java:616)
    at com.enterprisedt.net.ftp.FTPControlSocket.createDataSocket(FTPControlSocket.java:583)
    at com.enterprisedt.net.ftp.FTPClient.setupDataSocket(FTPClient.java:2648)
    at com.enterprisedt.net.ftp.FTPClient.dir(FTPClient.java:3664)
    at com.enterprisedt.net.ftp.FTPClient.dir(FTPClient.java:3756)
    at com.enterprisedt.net.ftp.FTPClient.dirDetails(FTPClient.java:3583)
    at com.enterprisedt.net.ftp.FileTransferClient.directoryList(FileTransferClient.java:647)
    at ftp_classes.GetDirectoryListing.main(GetDirectoryListing.java:52)
DEBUG [FTPControlSocket] 1 Jun 2012 14:05:00.197 : ---> PORT 127,0,0,1,201,168 
```

谁能帮我？我真的不知道为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-01T05:22:15.767

当客户端尝试打开侦听套接字以供服务器连接并发送目录列表时，就会发生错误。我不确定为什么会发生这种情况，但我建议将[连接模式](http://enterprisedt.com/products/edtftpjssl/doc/manual/html/activeandpassivemodes.html)从“主动”更改为“被动”，这可能会绕过问题。你可以这样做：

```
ftp.getAdvancedFTPSettings().setConnectMode(FTPConnectMode.PASV); 
```

# iphone - 如何在目标 C 中将 * )xÿª5c'√K'Rk¬É* 转换为纯文本？

> ID：10849992
> 
> 赞同：3
> 
> 时间：2012-06-01T12:09:07.630
> 
> 标签：iphone, xcode, nsstring, hex, nsdata

请检查这里是我的代码

```
int asciiCode = @"29 78 D8 BB 35 12 63 D5 C3 4B 18 D5 52 6B C2 83";
NSString *strings = [NSString stringWithFormat:@"%c", asciiCode];
NSLog(@"%c",strings);
} 
```

如果值**29 78 D8 BB 35 12 63 D5 C3 4B 18 D5 52 6B C2 83**它应该显示为**india 是我的**字符串值，但它显示为**)xÿª5c'√K'Rk¬É**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-01T12:14:06.943

```
int asciiCode = @"29 78 D8 BB 35 12 63 D5 C3 4B 18 D5 52 6B C2 83"; 
```

这是无效的。`@"..."`是一个 NSString，而不是一个 int。

你可以有一个 char 数组，像这样：

```
char *asciiCode = {0x29, 0x78, 0xD8, 0xBB, ...} 
```

您可以使用它变成 NSString

```
NSString *strings = [NSString stringWithCString:asciiCode usingEncoding:NSUTF8StringEncoding]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-01T12:14:45.837

您显示的字符不是 ASCII，因为它们设置了第 8 位，但它们可能是 UTF-8 编码的？如果是这样，您只需将它们视为 NUL 终止的 C 字符串：

```
unsigned char cstr[] = { 0x29, 0x78, 0xD8, 0xBB, 0x35, 0x12, 0x63, 0xD5, 0xC3,
                         0x4B, 0x18, 0xD5, 0x52, 0x6B, 0xC2, 0x83, 0x0 };
NSString *string = [[NSString alloc] initWithUTF8String:cstr];
NSLog(@"%@",string); 
```

或者：

```
NSString *string = [NSString stringWithUTF8String:cstr];
NSLog(@"%@",string); 
```

取决于您是否想要保留或自动释放的`NSString`对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-01T12:31:12.920

您还可以在字符代码前面加上`\x`. 例如：

```
NSString *string = @"\x29 \x78 \xD8 \xBB \x35 \x12 \x63 \xD5 \xC3 \x4B \x18 \xD5 \x52 \x6B \xC2 \x83";
NSLog(@"%@",string); 
```

但请注意，代码应该是十六进制的。例如，这里的 29 是十六进制的 29 (0x29)，而不是十进制。

# c++ - SSL Heade HMAC 计算

> ID：10849994
> 
> 赞同：0
> 
> 时间：2012-06-01T12:09:12.867
> 
> 标签：c++, security, ssl, openssl, hmac

我正在编写几个数据包的编码。对于我需要生成 HMAC 的数据包。现在，我实际上是出于安全目的而尝试设计它，并密切关注数据包的 OpenSSL 格式。

如何为数据包生成 HMAC？如何获得钥匙？openssl 如何获得它的密钥？

我希望您了解密钥必须对客户端和服务器都可用。

我的代码是 C++

# plone - ploneformgen 在提交前确认数据

> ID：10849999
> 
> 赞同：2
> 
> 时间：2012-06-01T12:09:39.077
> 
> 标签：plone, ploneformgen

我正在使用 ploneformgen 创建一个多阶段表单。我想在最终提交表单之前添加一个确认页面，显示已输入的所有数据。类似于感谢页面的东西，但带有提交按钮。

/Iz

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-02T05:34:06.453

看看[http://pypi.python.org/pypi/collective.pfgpreview](http://pypi.python.org/pypi/collective.pfgpreview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T00:06:48.887

我自己没有这样做，但我认为您可以将[http://plone.org/products/ploneformgen/documentation/how-to/create-a-multi-page-form](http://plone.org/products/ploneformgen/documentation/how-to/create-a-multi-page-form)上的“隐藏字段”技术调整为做到这一点。结合“谢谢”模板如何显示提交的字段。