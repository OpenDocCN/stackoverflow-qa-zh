# StackOverflow 问答 11890000-11890999

# node.js - 为 node.js 使用 sqlite 模块时遇到问题

> ID：11890009
> 
> 赞同：2
> 
> 时间：2012-08-09T18:47:58.463
> 
> 标签：node.js, sqlite, npm, node-gyp

[我试图包含更多链接以使我的问题更清楚，但 stackoverflow 不允许我这样做，因为我没有 10 个声望点。]

我有 node.js，现在我想为它选择一个 sqlite 模块，我的选择是：orlandov/node-sqlite、developmentseed/node-sqlite3 和 grumdrig/node-sqlite。我删除了 grumdrig，因为只支持同步访问。

当我尝试按照他们的指示探索 developmentseed 时，我遇到了这个问题：

```
./configure

./configure: line 3: node-gyp: command not found 
```

所以我尝试使用 npm install （也建议）并遇到这个问题：

```
npm install sqlite3
-bash: npm: command not found 
```

当我尝试使用 npm

```
curl http://npmjs.org/install.sh | sh 
```

我遇到了这个问题（即使使用 sudo 并更改所有者/权限）：

```
curl http://npmjs.org/install.sh | sh

  % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
  0    85    0    85    0     0    175      0 --:--:-- --:--:-- --:--:--     0

**sh: line 1: syntax error near unexpected token `newline'**

sh: line 1: `<html>Moved: <a href="https://npmjs.org/install.sh">https://npmjs.org/install.sh</a>' 
```

我查看了 stackoverflow 的：[Node.js : NPM Install Fails](https://stackoverflow.com/questions/6752873/node-js-npm-install-fails)和[Nodejs + Node-Sqlite3 Installation Problem](https://stackoverflow.com/questions/6077628/nodejs-node-sqlite3-installation-problem)以及许多其他链接，但还没有找到解决方案。

我也无法通过 orlandov 配置 node-sqlite。

我只是想玩弄 node-sqlite（通过 orlandov）和 node-sqlite3（通过 developmentseed），所以我可以选择更好的，但被困在这里。

哦，我也在 github 上查看了 node-gyp -- /TooTallNate/node-gyp/ 但它似乎也需要 npm。

对于如何构建这些和/或在 developmentseed 和 orlandov 之间使用哪些建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T22:44:23.717

要直接安装 npm，请使用以下命令：

```
curl -k https://npmjs.org/install.sh | sudo sh 
```

如果你使用 Ubuntu，你可以从[PPA](https://launchpad.net/~chris-lea/+archive/node.js/)安装最新版本的 node.js 和 npm 。**注意**：您需要先删除当前的 nodejs。

```
sudo apt-get install python-software-properties
sudo apt-add-repository ppa:chris-lea/node.js
sudo apt-get update
sudo apt-get install nodejs nodejs-dev npm 
```

安装节点gyp：

```
sudo npm install -g node-gyp 
```

现在你准备好从 npm 安装 sqlite3 了。

```
npm install sqlite3 
```

**注意**：构建工具需要在安装 sqlite3 之前安装。

对于 ubuntu：

```
sudo apt-get install build-essential 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-25T20:29:22.083

如果这对某些人不起作用，这对我有用：

```
sudo apt install node-sqlite3 
```

*（我试图为 Ubuntu 安装 sqlite3 以使用 nodejs 和 sqlite3 数据库（使用的编辑器是 vscode）。即使我尝试使用 npm 和 sudo apt 安装 sqlite3，它仍然给出错误“找不到模块”）*

# css - 选中时要标记的发光效果

> ID：11890011
> 
> 赞同：1
> 
> 时间：2012-08-09T18:48:08.027
> 
> 标签：css

我目前正在向测试站点添加导航栏。`<a>`我已经看到一些导航栏通过在标签下方添加一个栏或发光来指示当前选定的页面。我现在很困惑以正确的方式实现这种 css 风格。如何在选定对象周围实现发光效果，`<a>`以便用户现在可以访问他们当前所在的页面？ [例子](http://webprolearner2346.zxq.net/css-test2/index.php)

谢谢

对于我的`<a>`标签，我创建了一个`.buttonNav`类

**导航栏的CSS相关规则：**

```
<style>
/**************  Header Styling ****************/
#navigation {
    left: 440px;
    margin-top: 80px;
    position: relative;
}

#contentNav { color: #cfdae3; }
/* Dark Button CSS */
.buttonNav {
    outline: 0;
    padding: 5px 12px;
    display: block;
    color: #EBEBEB;
    font-weight: bold;
    text-shadow: 1px 1px #1f272b;
    border: 1px solid #1c252b;
    border-radius: 3px;
    background: #232B30;
}
.buttonNav:hover {
    color: #fff;
    background: #4C5A64; 
}
.buttonNav:active {
    background-position: 0 top;
    position: relative;
    top: 1px;
    color: #fff;
    padding: 6px 12px 4px;
    background: #20282D; 
    box-shadow: 1px 1px 1px rgba(255,255,255,0.1); /* CSS3 */
}
.button-list {
    list-style: none outside none;
    overflow: hidden;
}
.button-list li { float: left; margin: 0 5px 0 0; }
.button-list li.search { padding-left: 18px; margin-left: 10px; position: relative; list-style: none outside none;}

</style> 
```

**HTML**

```
<div id="header">
  <div class="search"><input type="text" class="search-input" name="search" value="Search" onclick="$(this).val('');" /><input type="submit" class="search-submit" /></div>
  <div id="navigation">

   <ul class="button-list">
       <h2>MAIN TITLE PAGE</h2>
    <li><a href="http://webprolearner2346.zxq.net/css-test2/index.php" class="buttonNav" >Content 1</a></li>
    <li><a href="http://webprolearner2346.zxq.net/css-test2/content2.php" class="buttonNav" >Content 2</a></li> 
   </ul> 
  </div>
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:59:48.900

我会放入一些 jquery 来自动处理这个问题，比如

```
 $(document).ready(function () {
      var str = location.href.toLowerCase();
      $(".navigation li a").each(function () {
          if (str.indexOf(this.href.toLowerCase()) > -1) {
              $("li.highlight").removeClass("highlight");
              $(this).parent().addClass("highlight");
          }
      });
  }) 
```

此函数将向`highlight`活动`li` `a`元素添加一个 css 类。**如果且仅当** 下一页的名称与文本相同时。因此，如果链接名为“Product.html”，您将希望`a`元素的文本为“Product”

HTML的一个例子

```
<ul class="navigation">
    <li class="highlight"><a href="index.html">Home</a></li>
    <li><a href="product.html">Product</a></li>
    <li><a href="about.html">About</a></li>
    <li><a href="contact.html">Contact</a></li>
</ul> 
```

CSS会稍微改变背景颜色。

```
.highlight{
    background-color: #fff;
} 
```

你知道或放入你想要的发光效果

希望这可以帮助，

编辑：工作教程/演示[http://blog.huidesign.com/automatically-highlight-current-page-in-navigation-with-css-jquery/](http://blog.huidesign.com/automatically-highlight-current-page-in-navigation-with-css-jquery/)

EDIT2：感谢 Sven Bieder 帮助更好地理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T18:55:23.877

如果你添加一个类

```
.currentPage {
  background: #yourDifferentColor;
  (box-shadow)..
  (text-decoration)..
} 
```

并将其添加到代表当前页面的链接中（您必须在所有页面上执行此操作），您可以将当前页面链接的样式定义为不同于其他链接的样式，以符合您的规范。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T18:55:50.960

好吧，您通常会在服务器级别处理此问题。现在这很容易。如果您在索引页面上，只需在导航中转到指向索引页面的链接，然后向其添加类或内联样式。

# xcode - 如何将多个应用程序作为一个存档/捆绑包/应用程序分发给 mac os x

> ID：11890012
> 
> 赞同：2
> 
> 时间：2012-08-09T18:48:14.080
> 
> 标签：xcode, macos, cocoa

我需要同时分发两个应用程序，例如，菜单栏添加和 mac 中的完整应用程序。我有什么选择？是否可以在 Mac App Store 中分发这样的“捆绑包”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T15:05:08.037

如果用户不必手动运行第二个应用程序，或者不必通过您的主应用程序，那么这是可能的。

您可以将它放在主应用程序包中的某个位置，例如：（内容/可执行文件）。如果您使用的是 Xcode，您可以通过将复制文件构建阶段添加到您的主应用程序包来实现。

只需确保对每个包进行代码签名，因为对主应用程序包进行代码签名是不够的。

# html - 使页面只能通过密码访问

> ID：11890026
> 
> 赞同：1
> 
> 时间：2012-08-09T18:49:58.383
> 
> 标签：html, login

使用户名/密码可访问页面的最简单方法是什么？在学校里，我学会了使用 sql 和 java 在服务器端执行此操作。我想知道有没有办法只在客户端做到这一点？

编辑：大声笑......根据回复，我可能应该说我为什么指定客户端。我被要求在我们的公司网站上加载一个额外的页面，该页面应该可以帮助我们的一些员工。我没有设计这个额外的页面，我被要求用一个非常简单的登录来完成这个。当然，我需要与我的上级确认客户端登录足够，我只是想知道是否可以完成如果他们认为这不是那么重要。该页面本身在站点上没有链接，因此除非有人知道它在那里或决定窥探，否则没有人会知道它在那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:56:47.023

您可以将页面保存到受 .htaccess 文件保护的目录中。

那将是服务器端（您必须将 .htaccess 文件上传到目录中）。

但是客户端呢？嗯，我唯一想的就是创建一个带有 position: fixed 的 DIV，它将覆盖您的所有页面内容。

询问用户和密码，然后使用 Javascript（这是客户端）检查它们，然后将属性“display: none”添加到包含登录视图的 DIV。

这将隐藏登录视图并显示其下方的页面。

在我看来，这是一个巨大的安全问题。我可以轻松地使用 Firebug 编辑您的网站，并在不输入密码的情况下将 Display: none 添加到 div。

但是，由于密码是 Javascript 中的，我无论如何都可以只查看源代码来查看它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T19:00:14.043

最简单的可能是服务器端 apache 身份验证。为此使用这两个生成器： [http://www.htaccesstools.com/htaccess-authentication/](http://www.htaccesstools.com/htaccess-authentication/)
[http://www.htaccesstools.com/htpasswd-generator/](http://www.htaccesstools.com/htpasswd-generator/)

只是在客户端，使用 javascript 永远不够安全。但是有办法：

```
if( ​prompt('Enter password'​)​ == 'password' )
{
    // we are okay
}

else
{
    // password is wrong
}​ 
```

有关更强大的示例，请使用用户名参见[http://jsfiddle.net/7mZYQ/2/](http://jsfiddle.net/7mZYQ/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T18:54:35.783

您不能仅在客户端安全地执行此操作，它需要您在浏览器内执行用户身份验证。这意味着您的整个用户群必须以某种形式加载到浏览器内存中，可能是在 javascript 中，这使得它不安全。

对于在最小程度上涉及服务器的简单身份验证机制，请查看[基本身份验证](http://engineering.oregonstate.edu/computing/web/43)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T18:53:44.393

好吧，您可以尝试一个带有 HTML 输入的基本 JavaScript 虚拟对象，它会以某种方式提供密码保护的轻微错觉。否则，创建一个 HTML 表单并使用 PHP Sessions。这些可能是拥有最多教程的语言，所以你不会花那么长时间来完成它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T18:56:12.593

如果您考虑一下“客户端”的含义，您就会明白为什么它不可能。在客户端，所有信息都被处理，所有数据都存储在*客户端的*机器上。因此，为了在客户端完全检查密码，您必须将整个用户名密码列表保存到与您的站点交互的每台计算机上。

还要记住，任何“客户端”本质上都没有服务器端那么安全。因此，即使您*可以*这样做，也可能是个坏主意。

* * *

**现在，话虽如此，您可以这样做：**

想出一个密码（请注意，您必须使用主密码，而不是个人密码），对密码进行哈希处理，并将哈希密码存储在变量中，或其他东西。这听起来可能不安全，但如果您正在对密码进行哈希处理，您可以向每个人发送一封带有密码的个性化电子邮件，这样就不会更容易被黑客入侵。散列是一种单向操作。没有办法对其进行逆向工程。但是，请确保将您存储的密码设为常量，否则有人可能会在最后一分钟更改其哈希密码的值以匹配您存储的密码。给出css规则`Display:none;`使用 css 将您的数据隐藏起来。现在提示用户输入密码。然后，获取该密码并通过与创建密码时相同的加密运行它。如果该值与您存储的值匹配，则宾果游戏。只需恢复你的`display:none;`，你就可以开始了。

虽然我想这仍然会留下有人只是把你`display:none`赶走的问题。猜猜你也必须加密页面上的数据。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-09T18:54:42.037

不，它不能在客户端完成。至少不是以安全的方式。客户端（密码）验证很容易绕过，因为会向用户提供线索（例如密码和/或输入正确密码时要显示的内容）。

# objective-c - 连接常量 Objective-C ios

> ID：11890029
> 
> 赞同：9
> 
> 时间：2012-08-09T18:50:16.263
> 
> 标签：objective-c, ios

> **可能重复：**
> [如何通过在 Obj-C 中连接字符串来创建常量 NSString？](https://stackoverflow.com/questions/3060139/how-to-create-constant-nsstring-by-concatenating-strings-in-obj-c)

我有两个要连接的常量：

```
NSString * const WEBSITE_URL = @"http://192.168.1.15:3000/";
NSString * const API_URL = @"http://192.168.1.15:3000/api/"; 
```

通常在其他语言中，我会在 API_URL 中连接 WEBSITE_URL，但您不能连接编译时间常量，因为 stringWithFormat 或类似的东西是运行时方法，而不是编译时间方法。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-09T18:57:32.007

你可以用宏来做到这一点：

```
#define WEBSITE_URL @"http://192.168.1.15:3000/"
#define API_URL WEBSITE_URL @"api/" 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-09T18:58:25.337

您可以转到预处理器。

```
#define WEBSITE_URL_DEF "http://192.168.1.15:3000/"

NSString * const WEBSITE_URL = @WEBSITE_URL_DEF;
NSString * const API_URL     = @WEBSITE_URL_DEF "api/"; 
```

# php - 上传文件前删除特殊字符

> ID：11890037
> 
> 赞同：0
> 
> 时间：2012-08-09T18:50:42.727
> 
> 标签：php, string

使用下面的代码，我通过 html 页面上的表单获取图像，在其中进行一些剪切并添加另一个图像，它运行良好。

我在从 html 表单获得的图像名称中遇到特殊字符问题...

简而言之，在您上传、裁剪图像、移动它们等之前，我必须处理它们的名称......删除空格、删除重音等等......

我尝试使用某些功能但没有成功..有人可以帮忙吗？

这是我的代码：

```
<?php

require( "./lib/WideImage.php");

// Example of accessing data for a newly uploaded file
$fileName = $_FILES["uploaded_file"]["name"]; 
$fileTmpLoc = $_FILES["uploaded_file"]["tmp_name"];
// Path and file name
$pathAndName = "cartelas/cart".$fileName;
// Run the move_uploaded_file() function here
$moveResult = move_uploaded_file($fileTmpLoc, $pathAndName);
// Evaluate the value returned from the function if needed

$image = WideImage::load($pathAndName);

$unh = WideImage::load("unh11.png");

$crop1 = $image->crop("25", "50", 111, 132);

$out1 = $crop1->merge($unh,'middle','middle');

$pathAndName1 = "unha-1-".$fileName;

$crop1->saveToFile('./cartelas/estampa'.$pathAndName1);

$out1->saveToFile('./cartelas/'.$pathAndName1);

echo "Imagens geradas:<BR>";
echo "<img src=./cartelas/estampa$pathAndName1><img src=./cartelas/$pathAndName1>";
?> 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:20:07.120

如果你想在 php 端做，你可以用文件名做任何你想做的事情。如果您不必具有完全相同的名称，则可以使用 rawurlencode() 或 base64_encode(); 甚至是名称中的 md5() 哈希。这应该可以解决奇怪名称或特殊字符的问题。

如果您需要存储所有这些文件，您可以这样做`$newfilename = md5($filename) . '_' . uniqid();`，它们将是独一无二的。您还可以添加用户 ID 或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-23T00:02:25.523

imclickingmaniac 如果你这样做，它会失去它的扩展名！所以改为...

```
<?php
$ext=pathinfo($_FILES["file1"]["name"], PATHINFO_EXTENSION);
$fileName=md5($fileName);
$fileName="$fileName.$ext";
?> 
```

# ruby-on-rails - 如何“限制”索引页上字符串中的字符数？

> ID：11890041
> 
> 赞同：1
> 
> 时间：2012-08-09T18:51:27.140
> 
> 标签：ruby-on-rails, ruby-on-rails-3

在我的 Rails 应用程序中，我有一个“帖子”模型，在索引页面中，我将所有帖子显示为带有标题和一小段摘录的“正方形”。每个“正方形”的大小为 250px 宽。

由于某些标题超过 250 像素，我希望能够“限制”将在“帖子”索引页面上的标题中显示的字符数。

而不是“冷冻干草莓”有类似“冷冻干草莓..”的东西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T18:53:25.520

[http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-truncate](http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-truncate)

```
truncate(@post.title, :length => 15) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T19:07:27.617

正如 Jason 所提到的，截断辅助函数应该可以工作。

但是，如果您在此字符串的文本中包含 html 标记（链接等），则可能值得研究可以安全地转义它们的 gem 或帮助程序，例如`truncate_html`gem。 [https://github.com/ianwhite/truncate_html](https://github.com/ianwhite/truncate_html)

例如：如果它允许链接，您不想在标签和标签之间截断，因为这会导致严重格式错误的 html。

# rspec - 更好的后卫（Spork/RSpec）

> ID：11890045
> 
> 赞同：0
> 
> 时间：2012-08-09T18:51:34.343
> 
> 标签：rspec, bundle, guard, spork

我正在使用`bundle exec guard`它作为我的主要测试运行者，我喜欢它，即使我完全不了解它。

困扰我的事情是我必须手动“r”重新启动它以进行任何真正的代码更改。我对缓慢的重新加载时间感到满意（尽管如果它执行类似`rails c`'s 的操作会很好`reload!`），但我无法忍受的是必须手动切换到窗口并点击`r`. 特别是当我忘记这样做时，并认为这一切都很好。因此，这是在低效率之上的不一致。

这是我的卫兵文件：

```
guard 'spork', wait: 45 do
  watch 'config/application.rb'
  watch 'config/environment.rb'
  watch %r{^config/environments/.+\.rb$}
  watch %r{^config/initializers/.+\.rb$}
  watch 'Gemfile'
  watch 'Gemfile.lock'
  watch 'spec/spec_helper.rb' do 'spec' end
end

guard 'rspec', version: 2 do
  watch %r{^spec/.+_spec\.rb$}
  watch %r{^lib/(.+)\.rb$} do |m| "spec/lib/#{m[1]}_spec.rb" end

  watch %r{^spec/.+_spec\.rb$}
  watch %r{^app/(.+)\.rb$} do |m| "spec/#{m[1]}_spec.rb" end
  watch %r{^app/(.*)(\.erb|\.haml)$} do |m| "spec/#{m[1]}#{m[2]}_spec.rb" end
  watch %r{^lib/(.+)\.rb$} do |m| "spec/lib/#{m[1]}_spec.rb" end
  watch %r{^app/controllers/(.+)_(controller)\.rb$} do |m| ["spec/routing/#{m[1]}_routing_spec.rb", "spec/#{m[2]}s/#{m[1]}_#{m[2]}_spec.rb", "spec/acceptance/#{m[1]}_spec.rb"] end
  watch %r{^spec/support/(.+)\.rb$} do 'spec' end
  watch 'spec/spec_helper.rb' do "spec" end
  watch 'config/routes.rb' do 'spec/routing' end
  watch 'app/controllers/application_controller.rb' do 'spec/controllers' end
  # Capybara request specs
  watch %r{^app/views/(.+)/.*\.(erb|haml)$} do |m| "spec/views/**/#{m[1]}_spec.rb" end
  watch %r{^app/.*\.sass$} do 'spec/requests/*' end
end 
```

我想过做类似的事情：

```
watch %r{^app/models/*.rb} do system `killall bundle` end
… 
```

但这显然是一个巨大的组合。仍然比看到假通过的测试滚动要好。

感谢您提供有关使此设置更好的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T06:14:54.853

这是我的“第 1 天”编辑（也就是说，上面的那个是我摸索着试图用尽可能少的学习来让它继续下去，但这个更了解一些）。这个对我来说效果更好。

```
notification :on
guard 'spork', wait: 45, rspec_env: { 'RAILS_ENV' => 'test' } do
  [
    %r{^config/(environments|initializers)/.+\.rb$},
    %r{^config/(application|environment|routes)\.rb$},
    %r{Gemfile(.lock)?},
    %r{^lib/},
    %r{app/(models|controllers)},
    'spec/spec_helper.rb'
  ].each do |e| watch e end
end
guard 'rspec', version: 2 do
  watch %r{^spec/.+_spec\.rb$}
  watch %r{^app/(.+)\.rb$} do |m| "spec/#{m[1]}_spec.rb" end
  watch %r{^lib/(.+)\.rb$} do |m| "spec/lib/#{m[1]}_spec.rb" end
  watch %r{^app/(.*)(\.erb|\.haml)$} do |m| "spec/#{m[1]}#{m[2]}_spec.rb" end
  watch %r{^app/views/(.+)/.*\.(erb|haml)$} do |m| "spec/views/**/#{m[1]}_spec.rb" end
  watch %r{^app/.*\.sass$} do 'spec/requests/*' end
end 
```

它工作正常。我敢打赌，还会有更多改进。—☈

# web-services - 在 SOAP UI 中导入 .csv 或 excel 测试用例

> ID：11890050
> 
> 赞同：0
> 
> 时间：2012-08-09T18:51:56.360
> 
> 标签：web-services, soapui, load-testing

我正在使用 SOAP UI 来测试我们的 RESTful 搜索服务。搜索请求的形式为：

```
 {               "className": "Pets",
                "searchType": "SearchResult",
                "query": "German shephard",
                "filterQuery": {"subClassName" = "Dogs"},
                "sortType": null,
                "startPageFrom": 0,
                "distance": 100.0,
                "latitude": 34.069784,
                "longitude": -118.34901,
                "pageSize": 20,
                "randomSeed": 0,
                "notBackfillable": false,
} 
```

我想测试大约 200 个搜索词（从日志中获得）以及其他请求参数的多种组合。因此，测试用例的数量很容易超过一千。我不想在 SOAP UI 中创建每个测试用例，而是想创建一个 .csv 或 excel 表来将这些测试用例导入到 SOAP UI（我以后可以作为负载测试运行）。有人知道这样做的方法吗？我浏览了 SOAP UI 的文档，但没有发现任何有用的东西。任何指针将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:09:29.683

如果您使用的是专业版，您可以使用[此处](http://www.soapui.org/Data-Driven-Testing/data-driven-tutorial/Implementation.html)提到的文件数据源和数据源循环测试步骤轻松实现此目的。如果您使用的是基本版本，则需要为此编写一个 groovy 脚本。[这篇博客文章](http://learnsoapui.wordpress.com/2012/05/19/groovy-datasource-teststep-dataloop-teststep-using-groovy-in-soapui/)介绍了一个类似的 groovy 脚本。

# java - 是否有用于函数编程的 java 库？

> ID：11890057
> 
> 赞同：1
> 
> 时间：2012-08-09T18:52:28.667
> 
> 标签：java, functional-programming

有没有人用java编写了一个提供映射功能的库（例如lisp的mapcar）。

我看到了这篇[文章](http://programmaticallyspeaking.blogspot.com/2008/06/lisps-mapcar-for-java-onall-collect.html)和其他几篇文章（比如这个这个[这个](http://arstechnica.com/civis/viewtopic.php?f=20&t=809652)），但遗憾的是我认为没有什么是主流和/或可用的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T19:32:32.730

有几个。它们通常被描述为类似于“Java 中的函数式编程”库，而不是通过引用 LISP。

在我的公司，函数式编程德鲁伊将[函数式 Java作为他们的首选库，尽管有相当一部分人更喜欢](http://functionaljava.org/)[Guava](http://code.google.com/p/guava-libraries/)中的函数式规定。

Guava 是一个非常主流和流行的库；它牢牢地属于“没有人因使用而被解雇”类别。FJ 可能不太为人所知，但我们使用它非常愉快。我们甚至已经[分叉了它，](https://github.com/youdevise/functionaljava)所以我们可以帮助改进它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T19:57:12.310

那么，您将期待 Java 8！它将包含 Project Lambda，它为类似闭包的匿名类提供了更好的语法。^(†</sup> 示例：)

```
Iterable<String> strs = ...
Iterable<String> downCased = strs.map(s -> s.toLowerCase()); 
```

*任何*具有一种方法的接口（或具有一种抽象方法的抽象类）都可以使用这种语法，包括 Guava 的`Function`和`Predicate`（尽管 Java 8 有自己的`Mapper`和`Predicate`接口，所以这些都是开箱即用的）。在这种情况下`Iterable.map`，是一个新的扩展方法，它采用一个名为 的新接口类型`Mapper`。

如果您想了解更多 Java 8 lambda 示例，请询问！

† 匿名类的所有通常限制仍然适用，包括局部自由变量必须是“有效的最终”。这意味着您不必将变量显式标记为`final`，但仍然不允许更改该值。

# java - Java中的局域网游戏

> ID：11890059
> 
> 赞同：1
> 
> 时间：2012-08-09T18:52:45.340
> 
> 标签：java, sockets, networking, ip, lan

我花了一些时间学习 Java 中的套接字编程，并设法制作了几个使用套接字的简单应用程序。（即时通讯，井字游戏，基本的东西）对于我的程序，我使用了 ServerSocket 和 Socket 类的客户端-服务器关系。到目前为止，我一直在同一台机器上测试我所有的游戏，这意味着客户端和服务器都在同一台机器上运行，并且我使用的套接字 ip 是 127.0.0.1。现在我想用同样的逻辑制作一个局域网游戏。一台计算机将是服务器，另一台计算机将是客户端。

我想问的问题，如果这是一个愚蠢的问题，请原谅我，我并没有真正接受过网络等方面的教育，但是在什么情况下我可以在两台机器之间建立套接字连接。我的意思是，我在一台计算机上运行我的套接字服务器，我希望另一台计算机上的套接字使用第一台计算机的 ip 进行连接。比如说，我的 ip 是“192.1.1.4”，我希望能够连接到那台计算机。是否可以在世界上任意两台计算机之间建立这样的连接？我知道“lan”代表“局域网”，但除此之外我对此一无所知。抱歉，这是一个愚蠢的问题，如果有人需要我，我可以澄清一下。

基本上，我必须在两台机器上满足什么标准才能使用 Java 程序在它们之间建立套接字连接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T19:02:10.820

您可以在以下之间建立 TCP/IP 连接：

*   同一局域网中的两台机器（私有 IP）
*   两台公网IP（互联网）的机器
*   LAN 中的机器和具有公共 IP 的机器，前提是从 LAN 到公共 IP 的连接已打开

您不能从 LAN 外部打开与 LAN 内部机器的直接 TCP/IP 连接，除非网关配置为将连接重定向到该机器的特定端口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T19:00:09.020

在内部网络上，您按照您所说的进行操作，客户端使用服务器的 IP 地址或给定端口上的主机名连接到服务器。

由于防火墙和 NAT，通过 Internet 可能会很棘手。例如，您的计算机在家庭网络上的 ip 地址可能在“192.168.0.xxx”的某处 - 但如果您访问： http: [//www.whatismyipaddress.com](http://www.whatismyipaddress.com)，您会看到您面向互联网的 ip地址完全不同。您将看到的基本上是您的路由器在互联网 (WAN) 上的 IP 地址。

所以基本上，服务器必须在他们的路由器上为你的游戏端口设置端口转发到他的计算机。然后他必须向客户提供他面向互联网的 IP 地址以进行连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T19:03:41.913

建立连接的主要标准 - 忽略许多*可能的*因素，如防火墙配置等 - 是两台机器只是在同一个网络上。您可能知道以 192.168 开头的 IP 地址。*.*总是指本地网络上的计算机，这就是您要询问的情况，所以如果您有两台计算机连接在本地网络上（例如通过路由器），并且您知道每台计算机的 IP 地址，那么它真的就是这么简单 - 您可以使用迄今为止一直使用的相同方式进行连接。事实上，这同样适用于互联网——即使你在世界不同的地方设置了两台机器并且你知道它们的 IP 地址（同样，忽略潜在的更重要的防火墙问题），过程完全相同。这正是互联网被证明具有如此可扩展性的原因，因为定位具有特定 IP 地址的机器的过程由网络堆栈的较低层处理。

tl; dr：这与您已经在做的事情相同，只是使用了适当的 IP 地址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T09:07:03.513

you can use a public IP address and you don't have to change anything about your own address, this is handled by your router that connects to the internet. What you do have to consider is your firewall settings. The ports you are using in your socket should be added to your 'allowed' list. Normally "established" traffic is allowed by default. This means that you need to allow your incoming ports @ serverside to go to your server.

# python - 使用 **kwargs 制作自定义容器（Python 如何扩展 args？）

> ID：11890066
> 
> 赞同：16
> 
> 时间：2012-08-09T18:53:06.403
> 
> 标签：python

我在 Python 2.7 中有一个自定义容器类，一切都按预期工作，*除非*我通过尝试将实例扩展`**kwargs`为函数：

```
cm = ChainableMap({'a': 1})
cm['b'] = 2
assert cm == {'a': 1, 'b': 2} # Is fine
def check_kwargs(**kwargs):
   assert kwargs == {'a': 1, 'b': 2}
check_kwargs(**cm) # Raises AssertionError 
```

我已经覆盖了`__getitem__`, `__iter__`, `iterkeys`, `keys`, `items`, and `iteritems`, （和`__eq__`and `__repr__`）但它们似乎都没有参与扩展`**kwargs`，我做错了什么？

编辑 - 现在从 MutableMapping 继承并添加缺少的方法的工作更新源：

```
from itertools import chain
from collections import MutableMapping

class ChainableMap(MutableMapping):
    """
    A mapping object with a delegation chain similar to JS object prototypes::

        >>> parent = {'a': 1}
        >>> child = ChainableMap(parent)
        >>> child.parent is parent
        True

    Failed lookups delegate up the chain to self.parent::

        >>> 'a' in child
        True
        >>> child['a']
        1

    But modifications will only affect the child::

        >>> child['b'] = 2
        >>> child.keys()
        ['a', 'b']
        >>> parent.keys()
        ['a']
        >>> child['a'] = 10
        >>> parent['a']
        1

    Changes in the parent are also reflected in the child::

        >>> parent['c'] = 3
        >>> sorted(child.keys())
        ['a', 'b', 'c']
        >>> expect = {'a': 10, 'b': 2, 'c': 3}
        >>> assert child == expect, "%s != %s" % (child, expect)

    Unless the child is already masking out a certain key::

        >>> del parent['a']
        >>> parent.keys()
        ['c']
        >>> assert child == expect, "%s != %s" % (child, expect)

    However, this doesn't work::

        >>> def print_sorted(**kwargs):
        ...     for k in sorted(kwargs.keys()):
        ...         print "%r=%r" % (k, kwargs[k])
        >>> child['c'] == 3
        True
        >>> print_sorted(**child)
        'a'=10
        'b'=2
        'c'=3

    """
    __slots__ = ('_', 'parent')

    def __init__(self, parent, **data):
        self.parent = parent
        self._ = data

    def __getitem__(self, key):
        try:
            return self._[key]
        except KeyError:
            return self.parent[key]

    def __iter__(self):
        return self.iterkeys()

    def __setitem__(self, key, val):
        self._[key] = val

    def __delitem__(self, key):
        del self._[key]

    def __len__(self):
        return len(self.keys())

    def keys(self, own=False):
        return list(self.iterkeys(own))

    def items(self, own=False):
        return list(self.iteritems(own))

    def iterkeys(self, own=False):
        if own:
            for k in self._.iterkeys():
                yield k
            return
        yielded = set([])
        for k in chain(self.parent.iterkeys(), self._.iterkeys()):
            if k in yielded:
                continue
            yield k
            yielded.add(k)

    def iteritems(self, own=False):
        for k in self.iterkeys(own):
            yield k, self[k]

    def __eq__(self, other):
        return sorted(self.iteritems()) == sorted(other.iteritems())

    def __repr__(self):
        return dict(self.iteritems()).__repr__()

    def __contains__(self, key):
        return key in self._ or key in self.parent

    def containing(self, key):
        """
        Return the ancestor that directly contains ``key``

        >>> p2 = {'a', 2}
        >>> p1 = ChainableMap(p2)
        >>> c = ChainableMap(p1)
        >>> c.containing('a') is p2
        True
        """
        if key in self._:
            return self
        elif hasattr(self.parent, 'containing'):
            return self.parent.containing(key)
        elif key in self.parent:
            return self.parent

    def get(self, key, default=None):
        """
        >>> c = ChainableMap({'a': 1})
        >>> c.get('a')
        1
        >>> c.get('b', 'default')
        'default'
        """
        if key in self:
            return self[key]
        else:
            return default

    def pushdown(self, top):
        """
        Pushes a new mapping onto the top of the delegation chain:

        >>> parent = {'a': 10}
        >>> child = ChainableMap(parent)
        >>> top = {'a': 'apple', 'b': 'beer', 'c': 'cheese'}
        >>> child.pushdown(top)
        >>> assert child == top

        This creates a new ChainableMap with the contents of ``child`` and makes it
        the new parent (the old parent becomes the grandparent):

        >>> child.parent.parent is parent
        True
        >>> del child['a']
        >>> child['a'] == 10
        True
        """
        old = ChainableMap(self.parent)
        for k, v in self.items(True):
            old[k] = v
            del self[k]
        self.parent = old
        for k, v in top.iteritems():
            self[k] = v 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T19:23:34.313

创建关键字参数字典时，行为与将对象传递给`dict()`初始化程序相同，这会导致对象的`{'b': 2}`字典`cm`：

```
>>> cm = ChainableMap({'a': 1})
>>> cm['b'] = 2
>>> dict(cm)
{'b': 2} 
```

下面是对这种情况的更详细解释，但总结是，您的映射被转换为 C 代码中的 Python 字典，如果参数本身是另一个字典，则通过绕过 Python 函数调用并检查直接底层 C 对象。

有几种方法可以解决这个问题，要么确保底层 dict 包含您想要的所有内容，要么停止从 dict 继承（这也需要其他更改，至少是一种`__setitem__`方法）。

**编辑：**听起来[BrenBarn 的建议](https://stackoverflow.com/questions/11890066/making-custom-containers-work-with-kwargs-how-does-python-expand-the-args/11890526#comment15824502_11890066)是继承`collections.MutableMapping`而不是`dict`成功。

您只需添加`self.update(parent)`to即可完成第一种方法`ChainableMap.__init__()`，但我不确定这是否会对您的类的行为产生其他副作用。

**为什么`dict(cm)`给出`{'b': 2}`**的解释：

查看 dict 对象的以下 CPython 代码：http:
[//hg.python.org/releasing/2.7.3/file/7bb96963d067/Objects/dictobject.c#l1522](http://hg.python.org/releasing/2.7.3/file/7bb96963d067/Objects/dictobject.c#l1522)

当`dict(cm)`被调用时（并且当关键字参数被解包时），`PyDict_Merge`函数`cm`作为`b`参数被调用。因为 ChainableMap 继承自 dict，所以在第 1539 行输入 if 语句：

```
if (PyDict_Check(b)) {
    other = (PyDictObject*)b;
    ... 
```

从那里开始，来自的项目`other`被添加到通过直接访问 C 对象创建的新 dict 中，这绕过了您覆盖的所有方法。

This means that any items in a ChainableMap instance that are accessed through the `parent` attribute will not be added to the new dictionary created by `dict()` or keyword argument unpacking.

# java - 如何在 GWT 表单面板中发布整个页面

> ID：11890068
> 
> 赞同：4
> 
> 时间：2012-08-09T18:53:20.760
> 
> 标签：java, forms, gwt

使用 GWT FormPanel 时，提交表单后，它会发布表单但不会重定向到操作 url。有谁能够帮我？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T18:56:12.973

```
formPanelObject.getElement().<FormElement>cast().setTarget(""); 
```

通过这一行，您更改了表单的目标参数，现在主页在调用 formPanelObject.submit(); 后重定向到操作 url。

# javascript - jQuery Mobile 组件的 Javascript API？

> ID：11890071
> 
> 赞同：0
> 
> 时间：2012-08-09T18:53:33.390
> 
> 标签：javascript, jquery, jquery-mobile, javascript-framework, jquery-events

我正在尝试附加将操纵 JQM 组件的事件，但是一旦我引用了该组件，我不知道我可以对其应用什么操作。例如，使用新的可折叠列表视图“，如何通过单击按钮折叠所有项目？这是可折叠列表视图的演示：http: [//jquerymobile.com/demos/1.2.0-alpha.1/docs /lists/lists-collapsible.html](http://jquerymobile.com/demos/1.2.0-alpha.1/docs/lists/lists-collapsible.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T18:59:55.010

对于可折叠的，您可以使用`expand`和`collapse`事件：

```
$('.ui-collapsible').trigger('expand'); 
```

例如，您可以根据当前状态折叠/展开 DOM 中的所有可折叠小部件，如下所示：

```
//attach the code to an event (click on a link)
$('a').on('click', function () {

    //cache all the widgets
    var $all       = $('.ui-collapsible');

    //iterate through each widget
    $.each($all, function () {

        //if the widget has the "collapsed" class, then expand it
        if ($(this).hasClass('ui-collapsible-collapsed')) {
            $(this).trigger('expand');
        } else {

          //otherwise collapse it
          $(this).trigger('collapse');  
        }
    });
});​ 
```

这是一个演示：http: [//jsfiddle.net/HLEss/1/](http://jsfiddle.net/HLEss/1/)

这是一个示例可折叠小部件的 HTML，用于验证您是否可以通过“折叠”类进行选择：

```
<div data-role="collapsible" class="ui-collapsible ui-collapsible-collapsed">
    <h3 class="ui-collapsible-heading ui-collapsible-heading-collapsed">
        <a href="#" class="ui-collapsible-heading-toggle ui-btn ui-btn-up-c ui-fullsize ui-btn-icon-left ui-corner-top ui-corner-bottom ui-btn-active ui-btn-hover-null ui-btn-down-null" data-corners="false" data-shadow="false" data-iconshadow="true" data-wrapperels="span" data-icon="plus" data-iconpos="left" data-theme="null" data-mini="false">
            <span class="ui-btn-inner ui-corner-top ui-corner-bottom">
                <span class="ui-btn-text">Zero
                    <span class="ui-collapsible-heading-status"> click to expand contents</span>
                </span>
                <span class="ui-icon ui-icon-plus ui-icon-shadow">&nbsp;</span>
            </span>
        </a>
    </h3>
    <div class="ui-collapsible-content ui-collapsible-content-collapsed" aria-hidden="true">
        <p>Woohoo!</p>
    </div>
</div> 
```

我希望这会有所帮助。

**更新**

以下是这些事件的文档（虽然很稀疏）：http: [//jquerymobile.com/demos/1.1.1/docs/content/content-collapsible-events.html](http://jquerymobile.com/demos/1.1.1/docs/content/content-collapsible-events.html)

# perl - 不确定 Perl 数据类型引用

> ID：11890075
> 
> 赞同：2
> 
> 时间：2012-08-09T18:53:47.030
> 
> 标签：perl, imap

我正在尝试使用输出电子邮件正文的 Net::IMAP::Client 编写脚本，但到目前为止，我尝试从模块输出的每个变量都显示为：ARRAY(0x86f5524) 或给出错误“不能使用未定义的值作为 SCALAR 引用。”

模块文档说

```
# fetch full messages
my @msgs = $imap->get_rfc822_body([ @msg_ids ]);
print $$_ for (@msgs) 
```

应该包含对标量的引用。@msg_id 应该是收件箱中电子邮件号码的数字数组，但也作为数组引用返回。

我不确定如何正确输出这些数据以使其可读。这是模块参考：[Net::IMAP::Client](https://metacpan.org/pod/Net%3a%3aIMAP%3a%3aClient)

这是我的代码片段：

```
use Net::IMAP::Client;
use Net::IMAP;
use Net::SMTP;
use strict;
use warnings;

my $imap = Net::IMAP::Client->new(
server => ,
user   => ,   # i omitted this data for privacy
pass   => ,
ssl    => ,
port   =>  ,
) or die "could not connect to IMAP server";

$imap->login or die('Login Failed: ' . $imap->last_error);

my $num_messages = $imap->select('[Gmail]/All Mail');

my @msg_id = $imap->search('ALL');
print @msg_id;
print "\n";

my @data = $imap->get_rfc822_body([@msg_id]);
print $$_ for (@data); 
```

编辑：我使用 Data::Dumper 并获得了包含电子邮件和所有格式标签的一大块测试。我也知道 $imap-search 应该返回一些东西，因为收件箱有 4 封电子邮件，2 封未读。但是，由于变量@data 保存了电子邮件，我无法找出在输出中取消引用它的正确方法

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T19:31:37.527

`$imap->search('ALL')`返回**数组引用**而不是**数组**。所以你需要改变

```
my @msg_id = $imap->search('ALL'); 
```

至

```
my @msg_id = @{$imap->search('ALL')}; 
```

最好在取消引用之前检查方法是否返回定义的值，以防万一失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T19:30:17.107

查看代码，正确的用法是：

```
my $msgs = $imap->get_rfc822_body([ @msg_ids ]);
print $$_ for @$msgs; 
```

* * *

获取记录在案的行为，

```
return $wants_many ? \@ret : $ret[0]; 
```

应该

```
return $wants_many ? (wantarray ? @ret : \@ret) : $ret[0]; 
```

# java - PHP 可以调用 Java 对象吗？

> ID：11890078
> 
> 赞同：2
> 
> 时间：2012-08-09T18:54:14.060
> 
> 标签：java, php, interop

现在，我正在学习 PHP，并且在 Java 方面有一些经验。在某些语言中，您可以使用以一种语言编写的库并在另一种语言中使用它的对象。例如，您可以使用 COM/COM+ 在 VB 中调用用 C++ 编写的对象。 **这个想法在 PHP 和 Java 方面的翻译效果如何？这甚至是个好主意吗？**

请记住，我不是在说 JavaScript。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:08:19.513

是的，PHP 可以调用 Java 对象。例如，您可以这样做：

```
 <?php 
    $fp = new Java("java.io.File", "test.txt");
    if($fp->exists())
    { 
      echo "The file ". $fp->getAbsolutePath() . " is ". $fp->length() . " bytes"  
    } 
    else 
    { 
       echo "The file " . $fp->getAbsolutePath() . " does not exist";
    }
 ?> 
```

注意：由于默认情况下 PHP 没有启用 Java 支持，因此您需要重新编译它以启用此支持。您可以通过将“--with-java”编译时参数添加到 PHP“配置”脚本来完成此操作。

更多信息，您可以[在此处](http://www.devshed.com/c/a/PHP/Using-PHP-with-Java/1/)阅读。

由于 PHP5 不存在上述扩展，您可以使用Zend 服务器的[JavaBridge](http://files.zend.com/help/previous-version/Zend-Studio-i5-5/java_bridge.htm)和[PJB(PHP/Java Bridge)](http://php-java-bridge.sourceforge.net/pjb/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T19:03:37.153

有可能，使用 PHP 5，当前的两个选项似乎是使用[Zend Server CE](http://www.zend.com/en/products/server-ce/)作为您的 PHP Web 服务器。[启用Java Bridge](http://files.zend.com/help/Zend-Server-Community-Edition/zend-server-community-edition.htm#working_with_the_java_bridge.htm)时，ZSCE 支持 Java 连接。

另一个选项似乎是[PHP/Java Bridge](http://php-java-bridge.sourceforge.net/pjb/)，它是一个 SourceForge 项目。

# android - 具有统一行/列大小的 Android TableLayout 控件

> ID：11890079
> 
> 赞同：0
> 
> 时间：2012-08-09T18:54:15.563
> 
> 标签：android, android-layout, user-interface

我正在 Android 中创建一个应用程序，为此我需要将屏幕分成统一的行和列以填充整个屏幕。

我知道如何在 HTML 和 WPF（以及标准 GDI+）中执行此操作，但我在 Android 中找不到合适的控件。

我仅限于 Android 3.2，所以我不能使用 GridLayout，它看起来可以做我想做的事。

一旦我有了这个“表格/网格”控件，我希望能够将按钮、文本视图等放入单元格中，并指示它们是否跨越多列或多行。

我一直在尝试使用 TableLayout 控件，但我似乎无法让列/行具有统一的大小。

我还在运行时动态构建这个网格。

有没有这样的控制允许这样做？

谢谢，里奇。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:19:21.413

至少对于列宽，您可以为一行中的每个视图设置权​​重：

```
 <TableRow>

        <View
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

        <View
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

        <View
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1" />
    </TableRow>

    <TableRow>

        <View
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

        <View
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1" />

        <View
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1" />
    </TableRow> 
```

如果你也对它施加重量，这也可能有效，但我从未测试过。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T14:22:26.000

我通过创建一个派生自 ViewGroup 的新类来实现这一点，该类以正确的方式布置我的“视图”。这很好用，尽管我在子视图中对齐文本时遇到了一些问题。

# c++ - 声明冲突

> ID：11890083
> 
> 赞同：6
> 
> 时间：2012-08-09T18:54:33.317
> 
> 标签：c++, typedef, conflict, size-t

我在我的代码中定义了一个 typedef

```
typdef unsigned int size_t; 
```

它与 stddef 冲突

```
typedef __SIZE_TYPE__ size_t; 
```

我不确定如何解决这个问题，但仍想将 size_t 保留在我的代码中。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-09T19:01:09.463

~~二~~三个选项：

1）选择一个不同的名字，我想你已经知道了。

2）使用`namespace`：

```
namespace X
{
   typedef long size_t;
} 
```

类型为

```
X::size_t x; 
```

3）丑陋，保证让你被解雇，我投了反对票：

```
typedef unsigned int my_size_t;
#define size_t my_size_t 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T18:58:25.563

尝试重新定义一个标准头文件中的类型可能是个坏主意。你想达到什么目的？为什么不想使用标准的 size_t 定义？

# postgresql - 将 postgresql 转储导入 Heroku

> ID：11890084
> 
> 赞同：8
> 
> 时间：2012-08-09T18:54:33.360
> 
> 标签：postgresql, heroku

我有一个运行在 Heroku 上的 java 应用程序和 postgresql 数据库。我可以很好地推送我的应用程序，但是数据库内容呢？我已经从数据库中导出了一个完整的转储，但我不知道如何导入它。

通过谷歌搜索，您可以找到关于[db:push](https://devcenter.heroku.com/articles/taps#import-push-to-heroku)的信息，这是一个有限的 ruby​​gem，而不是推送所有需要的东西。我有序列、bigint 数据类型等。我还尝试使用`heroku pg:psql --app MYAPP < db_all.out`which just connect 和 stop 导入，并尝试`heroku pg:psql --app MYAPP`发出`\i db_all.out`有关权限的投诉。

我该怎么做？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-09T21:23:29.440

您可以`pg_restore`使用提供的凭据从本地计算机运行命令`heroku pg:credentials HEROKU_POSTGRESQL_<COLOR>`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2021-01-22T13:07:32.187

为了帮助仍然偶然发现这个问题的其他人，对我有用的是[hgmnz 的答案](https://stackoverflow.com/a/11892145/6211890)，但有一些修改。

更准确地说：

1.  从源 PostgreSQL 数据库创建转储

    ```
    $ PGPASSWORD=YOUR_PG_PASSWORD pg_dump -Fc --no-acl --no-owner -h localhost -U YOUR_PG_USER YOUR_DB_NAME > YOUR_DB_NAME.dump 
    ```

2.  获取 Heroku 应用程序的 Heroku Postgres 凭据

    ```
    $ heroku pg:credentials:url -a YOUR_APP_NAME 
    ```

3.  尝试使用上述凭据将 PostgreSQL 转储导入 Heroku

    ```
    $ pg_restore --verbose --clean --no-acl --no-owner -h HOSTNAME -U USER -d DATABASE -p PORT PATH/TO/YOUR_DB_NAME.dump --password 
    ```

4.  输入从 Heroku Postgres 凭据收到的密码
5.  然后它应该成功导入转储

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-21T13:05:10.307

这很简单，对我有用：

`heroku pg:psql -a {YOUR_APP} -f {YOUR_DUMP_PATH}`

我发现这是使用标准输入语法（如在 OP 示例中）更好的方法，因为它使用 Heroku 命令本身给出的选项。

您可能想在提交之前检查您的转储文件是否正常（在我的情况下不是）。

# php - 类中的 MySQL 导致沮丧

> ID：11890086
> 
> 赞同：0
> 
> 时间：2012-08-09T18:54:37.840
> 
> 标签：php, mysql, global-variables

我有这个代码：

```
<?php 

class guildData {

    public $email = NULL;
    public $hash_pw = NULL;
    public $user_id = NULL;
    public $clean_username = NULL;
    public $display_username = NULL;

    public function selectGuild($g_id)
    {
            global $db,$db_table_prefix;

            $this->g_id = $g_id;

            $sql = "SELECT
                            name
                            FROM
                            guild
                            WHERE
                            id = '".$g_id."'";

            $result = $db->sql_query($sql);

            $row = $db->sql_fetchrow($result);

            return ($row['name']);
    }
}
?>
<?php echo $guildData->selectGuild(1); ?> 
```

我只是收到一个 500 错误，IDEone 也给了我这个：

致命错误：在第 32 行的 /home/VT00Ds/prog.php 中的非对象上调用成员函数 selectGuild()

我看不到错误，你能帮帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T19:13:32.950

You are doing it wrong.

1.  Get rid of the global variables. Instead , if the class needs DB access , then you should inject it in the constructor:

    ```
    class GuildData
    {
        //  ... snip 

        protected $connection;

        public function __construct( PDO $connection )
        {
            $this->connection = $connection;
        }

        //  ... snip 
    } 
    ```

2.  Your code has potential for SQL injections. Instead of concatenating the query, you should use prepared statements:

    ```
    $statement = $this->connection->prepare(
                    'SELECT name FROM guild WHERE id = :id'
                 );
    $statement->bindParam( ':id', $this->g_id, PDO::PARAM_INT );
    if ( $statement->execute() )
    {
        $data = $statement->fetch( PDO::FETCH_ASSOC );
    } 
    ```

3.  You have to instantiate object, before you can use them:

    ```
    $pdo = new PDO('mysql:host=localhost;dbname=myMagicalDB;charset=UTF-8', 
                   'username', 'password');
    $pdo->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    $guild = new GuildData( $pdo );
    $guild->selectGuild(42); 
    ```

4.  You might consider separating the part with deals with DB from the domain logic. Essentially letting some other class to handle the fetching and storing the data, while the `Guild` class manages the logic. You might find [this](https://stackoverflow.com/a/9960628/727208) and [this](https://stackoverflow.com/a/5864000/727208) answer relevant.

5.  Do not use `public` variables. You are breaking the encapsulation of the object by directly exposing the internal data. Instead you should define them as `protected` or `private`.

    You might also take a hard look at what you are actually keeping there. Why does `GuildData` need `$hash_pw` or `$clean_username` ?

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T18:56:21.820

你还没有实例化`$guildData`. 如果您想在不实例化对象的情况下使用此方法，则该方法应为`static`.

```
class guildData {
    public static function selectGuild($g_id) { ... }
} 
```

然后你可以从

```
echo guildData::selectGuild(1); 
```

否则，您需要实例化一个对象

```
$guildData = new GuildData();

echo $guildData->selectGuild(1); 
```

此外，您应该有某种`__construct()`方法，以便设置您的成员变量。

**更新**我还注意到您的方法中有一个错误`selectGuild()`：

```
$this->g_id = $g_id; 
```

Sets the value of `g_id`, which is not defined as a member variable in the class. You must declare `g_id` as a member variable in your class definition:

```
class guildData {
    public $email = NULL;
    public $hash_pw = NULL;
    public $user_id = NULL;
    public $clean_username = NULL;
    public $display_username = NULL;

    public $g_id = NULL;

    .
    .
    .

} 
```

Finally, `sql_query()` is not a PHP method that I've ever heard of. Unless you're using a library that defines these methods, I think you mean `mysql_query()`. If this is the case, you should stop using `mysql_*` functions. They're being deprecated. Instead use [PDO](http://php.net/manual/en/book.pdo.php) (supported as of PHP 5.1) or [mysqli](http://php.net/manual/en/book.mysqli.php) (supported as of PHP 4.1). If you're not sure which one to use, [read this SO article](https://stackoverflow.com/questions/13569/mysqli-or-pdo-what-are-the-pros-and-cons).

# python - Python中的无效语法错误

> ID：11890095
> 
> 赞同：4
> 
> 时间：2012-08-09T18:55:06.437
> 
> 标签：python, syntax-error

今年秋天我将在 Uni 开始 Comp Sci 课程（从零编程知识开始），所以我刚刚开始玩编程。我正在读一本书并尝试复制粘贴一些代码 - 但它不起作用。这是我尝试过的：

```
>>> def function(x):
    return x+2
function(2)
SyntaxError: invalid syntax 
```

“功能”一词被突出显示。我很困惑，因为书中使用了相同的示例并且它似乎可以工作，但后来我得到了那个错误。这里发生了什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T19:01:50.133

您需要将函数定义与其执行分开。此外，Python 对行首的空格很敏感。试试这个（确切地说）：

```
def function(x):
    return x+2
function(2) 
```

或者，在一行中（您不应该这样做；请参阅[样式指南](http://www.python.org/dev/peps/pep-0008/#pet-peeves)）：

```
def function(x): return x+2; function(2) 
```

或者，在 Python shell 中：

```
>>> def function(x):
    return x+2

>>> function(2)
4 
```

注意函数定义和它的使用之间的空白行。定义函数后，按回车键即可返回提示。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T19:00:58.603

我假设您打算将 Python 放在标题中。Python 具有有趣的语法规则，因为它在解析程序时实际上将空格视为有意义的。我的意思是，拥有额外的空间、换行符或制表符等实际上会改变程序的含义。仔细检查本书示例并确保您编写的语法完全相同（制表符、新行和所有）。它可能看起来更接近于：

```
def f(x):
    return x + 2 
```

注意新行和标签。要调用此函数，请在单独的行上说：

```
f(5) 
```

或将 5 替换为您想要的任何参数。

**编辑：**

所以完整的脚本应该是：

```
def f(x):
    return x + 2

f(2) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-23T06:00:25.873

尝试这个：

```
def function(x):
    return x+2
function(5) 
```

在 python 中，缩进很重要。他们是`{}`蟒蛇世界的。

实际上，您之前不需要添加额外的空格，`function(5)`因为 python 知道不将其包含在函数定义中，因为它没有缩进。添加额外的空白行仍然是一种很好的做法，但并非绝对必要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-10T15:21:48.080

这适用于使用 Python 2.6.6 和 IDLE 2.6.6 的用户。

由于 Python 解释器对空格和缩进非常敏感，我们需要将函数声明与执行分开。

**你必须做什么：**

```
>>> def square(input):
    output=input*input
    return output
print square(5) 
```

输出：SyntaxError：无效语法

**正确的做法：**

```
>>> def square(input):
    output=input*input
    return output

>>> print square(3)
9 
```

# sql - 帐户层次结构？父母帐户有孩子，孩子可以成为父母

> ID：11890104
> 
> 赞同：0
> 
> 时间：2012-08-09T18:55:58.553
> 
> 标签：sql, sql-server-2008, hierarchy

我有 2 张桌子。一张表包含所有父帐户，最高层次结构。第二个表包含所有子帐户，这些子帐户可能与父表中的父帐户匹配，也可能不匹配。目标是创建一个查询（SQL Server 2008，递归或非递归），除了子帐户本身可能是其他子帐户的父帐户之外，还可以查找与父帐户匹配的所有子帐户。

简而言之，一旦在父子帐户上进行了匹配，就需要检查以确保匹配中的子帐户本身不是其他子帐户的父帐户。一口我理解，我希望它是有道理的。我也不知道层次结构会扩展的深度。

```
CREATE TABLE dbo.Parent_Accounts
(Parent_Account_Key_Lookup     varchar(28)          NOT NULL,
 Account_Number            bigint       NOT NULL,
 Reference_Account_Number_1        bigint       NOT NULL,
 Reference_Account_Number_2        bigint       NOT NULL,
 OpenDate              int          NOT NULL,
 Status                        char(1)              NOT NULL,
 Record_Created            smalldatetime    NOT NULL,
 Active                bit          NOT NULL)
GO

CREATE TABLE dbo.Child_Accounts
(Child_Account_Key_Lookup      varchar(28)          NOT NULL,
 Account_Number            bigint       NOT NULL,
 Reference_Account_Number_1        bigint       NOT NULL,
 Reference_Account_Number_2        bigint       NOT NULL,
 OpenDate              int          NOT NULL,
 Status                        char(1)              NOT NULL,
 Record_Created            smalldatetime    NOT NULL,
 Active                bit          NOT NULL)
GO

    WITH cte_Recursive
AS  (SELECT parent.Account_Number,
        parent.Parent_Account_Key_Lookup,
        parent.Reference_Account_Number_1,
        parent.Reference_Account_Number_2,
        parent.OpenDate,
        parent.[Status],
        parent.Record_Created,
        parent.Active,
        1 AS Hierarchy_Level
     FROM dbo.Parent_Accounts parent
     WHERE parent.Account_Number = 4498481055218674
     UNION ALL
     SELECT child.Account_Number,
        child.Child_Account_Key_Lookup,
        child.Reference_Account_Number_1,
        child.Reference_Account_Number_2,
        child.OpenDate,
        child.[Status],
        child.Record_Created,
        child.Active,
        cte.Hierarchy_Level + 1
     FROM cte_Recursive cte
     INNER JOIN dbo.Child_Accounts child
         ON cte.Parent_Account_Key_Lookup = child.Child_Account_Key_Lookup)

    --SELECT * FROM cte_Recursive
            SELECT TOP 2 * FROM cte_Recursive

INSERT INTO dbo.Parent_Accounts
 (Parent_Account_Key_Lookup, 
  Account_Number, 
  Reference_Account_Number_1, 
  Reference_Account_Number_2, 
  OpenDate, 
  [Status], 
  Record_Created, 
  Active)
 VALUES ('222248105521867419970702', 2222481055218674, 2222481060975466, 0, 19970702, 'U', '2010-11-18 12:46:00', 0)

 INSERT INTO dbo.Child_Accounts
 (Child_Account_Key_Lookup, 
  Account_Number, 
  Reference_Account_Number_1, 
  Reference_Account_Number_2, 
  OpenDate, 
  [Status], 
  Record_Created, 
  Active)
 VALUES ('222248105521867419970702', 2222481060975466, 2222481055218674, 2222481055218674, 19970702, 'L', '2010-11-19 08:33:00', 0),
    ('222248106097546619970702', 2222481060982900, 2222481060989137, 2222481060975466, 19970702, 'U', '2010-11-19 16:54:00', 0),
    ('222248106098290019970702', 2222481060989137, 0,                2222481060982900, 19970702, ' ', '2010-11-21 01:52:00', 1) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:51:41.920

问题似乎是无法指定如何确定孩子有孩子以及缺乏孩子的身份。如果`ON`CTE 中的子句可以阻止子加入自身，它将破坏无限递归链。

示例输出和对评论的回答应该清楚地表明您是否只需要`ON`子句中的另一个条件或 a`UNION`来处理孩子的孩子。

这至少通过限制层次结构级别来停止递归，并提供一个任何人都可以执行而不会弄乱他们的数据库的测试平台：

```
declare @Parent_Accounts as table (
  Parent_Account_Key_Lookup varchar(28) NOT NULL, 
  Account_Number bigint NOT NULL, 
  Reference_Account_Number_1 bigint NOT NULL, 
  Reference_Account_Number_2 bigint NOT NULL, 
  OpenDate int NOT NULL, 
  Status char(1) NOT NULL, 
  Record_Created smalldatetime NOT NULL, 
  Active bit NOT NULL) 

declare @Child_Accounts as table (
  Child_Account_Key_Lookup varchar(28) NOT NULL, 
  Account_Number bigint NOT NULL, 
  Reference_Account_Number_1 bigint NOT NULL, 
  Reference_Account_Number_2 bigint NOT NULL, 
  OpenDate int NOT NULL, 
  Status char(1) NOT NULL, 
  Record_Created smalldatetime NOT NULL, 
  Active bit NOT NULL) 

INSERT INTO @Parent_Accounts 
  (Parent_Account_Key_Lookup, Account_Number, Reference_Account_Number_1, Reference_Account_Number_2, OpenDate, [Status], Record_Created, Active) VALUES
  ('222248105521867419970702', 2222481055218674, 2222481060975466, 0, 19970702, 'U', '2010-11-18 12:46:00', 0) 

 INSERT INTO @Child_Accounts 
  (Child_Account_Key_Lookup, Account_Number, Reference_Account_Number_1, Reference_Account_Number_2, OpenDate, [Status], Record_Created, Active) VALUES
  ('222248105521867419970702', 2222481060975466, 2222481055218674, 2222481055218674, 19970702, 'L', '2010-11-19 08:33:00', 0), 
  ('222248106097546619970702', 2222481060982900, 2222481060989137, 2222481060975466, 19970702, 'U', '2010-11-19 16:54:00', 0), 
  ('222248106098290019970702', 2222481060989137, 0, 2222481060982900, 19970702, ' ', '2010-11-21 01:52:00', 1) 

; WITH cte_Recursive 
AS (SELECT parent.Account_Number, 
 parent.Parent_Account_Key_Lookup, 
 parent.Reference_Account_Number_1, 
 parent.Reference_Account_Number_2, 
 parent.OpenDate, 
 parent.[Status], 
 parent.Record_Created, 
 parent.Active, 
 1 AS Hierarchy_Level 
 FROM @Parent_Accounts parent 
 WHERE parent.Account_Number = 2222481055218674 
 UNION ALL 
 SELECT child.Account_Number, 
 child.Child_Account_Key_Lookup, 
 child.Reference_Account_Number_1, 
 child.Reference_Account_Number_2, 
 child.OpenDate, 
 child.[Status], 
 child.Record_Created, 
 child.Active, 
 cte.Hierarchy_Level + 1 
 FROM cte_Recursive cte 
 INNER JOIN @Child_Accounts child 
 ON cte.Parent_Account_Key_Lookup = child.Child_Account_Key_Lookup and cte.Hierarchy_Level < 2) 
 SELECT * FROM cte_Recursive 
```

# java - 设置操作系统环境变量后，Apache Maven 安装“'mvn' 不被识别为内部或外部命令”？

> ID：11890116
> 
> 赞同：27
> 
> 时间：2012-08-09T18:56:31.557
> 
> 标签：java, apache, maven, windows-xp

我已经按照Windows XP 的官方安装说明进行[操作。](http://maven.apache.org/download.html#Installation)但有时当我执行时`mvn --version`，我会收到错误消息，

> 'mvn' 未被识别为内部或外部命令

我什至重新启动了我的机器几次，但操作系统并不总是能识别 maven 命令。但是，当我执行`cd %M2_HOME%`, 或时，`cd %M2%`它会将我带到安装目录。我还确保将用户变量添加`M2`到`Path`系统变量中。

那么，什么给了？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-08-09T19:06:41.700

解决方法是`M2`从*用户*变量转移到*系统*变量

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-09T19:05:35.223

看起来 Maven 不存在于您的 PATH 中。将绝对 maven home\bin 位置添加到您的 PATH。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-03-13T16:05:46.237

我遇到了同样的问题，重新启动命令提示符，然后检查 try mvn --version。它可能一直在设置并工作，但需要重新启动命令提示符才能访问新的系统变量。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-12-15T04:52:36.523

1.  下载`apache-maven-3.3.9-bin.zip`文件并解压。

2.  然后设置系统变量`M2_HOME = B:\sql software\apache-maven-3.3.9`或酌情

3.  同时设置变量`M2 = %M2_HOME%\bin`

4.  打开`CMD`并写入`mvn`

我解决了谢谢

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-03-22T09:56:38.103

只需添加一些为我解决问题的更多信息：

*   确保 %M2% 和 %M2_HOME% 变量末尾没有分号 (;)。仅当该路径中有多个位置时才应使用此方法，但情况并非如此；
*   另外，请确保在“路径”变量中，各个路径之间没有任何空格，以分号分隔。

感谢 Pawan Valecha 和 Abhijeet Sawant 的提示。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-07-15T14:25:31.127

这是我做错了什么：

1) 确保它**不在**[C:\Program Files (x86)] 它应该在 [C:\Program Files] 我不是 100% 如果这会破坏它，但你永远不知道。

2）我需要在我的环境变量中做三件事才能让它工作

1.  **创建**这样的用户变量 [ M2 = %M2_HOME% ]
2.  **创建**一个像这样的用户变量 [M2_HOME = C:\Program Files\Apache Software Foundation\apache-maven-3.2.2]
3.  **将 PATH**编辑为 [What ever is already in here +];%M2%****

 *** * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-02-11T07:26:37.707

同样的问题。

我通过以下方式解决了它：

1.  添加 C:\Program Files\apache-maven-3.3.9\bin; 到路径
2.  以管理员身份运行 cmd

然后`mvn --version`工作。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-08-10T04:40:47.233

Maven 应该按以下方式配置（可以是用户变量或系统）： - M2: %M2_HOME%\bin - M2_HOME: (你的目录到 Maven 的根目录，而不是 \bin) - PATH: %PATH%;%M2%

然后，您应该能够`mvn`从命令提示符运行。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-07-23T10:43:36.870

我遇到了这个问题，发现由于某种原因，环境变量根本没有被解析（执行告诉我当前目录`cd %M2%`中没有文件夹）。`%M2%`最后添加到 Maven 可执行文件的显式路径对我有用：

`C:\apache-maven-3.1.0\bin`

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-10-06T09:46:16.600

您需要设置 M2 和 M2_HOME。我遇到了同样的问题，问题是我在分号后的 PATH 变量中添加了一个额外的空格。刚刚从路径中删除了空间并且它起作用了。（Windows 7 机器）

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-03-07T20:31:41.627

安装步骤

1.  下载二进制 zip 存档或 tar.gz。
2.  复制到相应的文件夹中。示例 - C:\apache-maven-3.3.9
3.  添加变量（用户或系统） M2_HOME = C:\apache-maven-3.3.9
4.  添加变量（用户或系统） MAVEN_HOME = C:\apache-maven-3.3.9
5.  使用 C:\apache-maven-3.3.9\bin 更新变量 PATH
6.  打开 CMD 并输入 mvn -v 或 mvn --version 它应该给出以下响应

C:\Users\XXXXXXX>mvn --version Apache Maven 3.3.9 (bb52d8502b132ec0a5a3f4c09453c07478323dc5; 2015-11-10T22:11:4 7+05:30) Maven 主页：C:\apache-maven-3.3.9 Java 版本： 1.8.0_40，供应商：Oracle Corporation Java 主页：C:\Program Files\Java\jdk1.8.0_40\jre 默认语言环境：en_US，平台编码：Cp1252 操作系统名称：“windows 8”，版本：“6.2”，arch： “amd64”，家庭：“dos”

**使用 CMD 上的 echo %M2_HOME% 确保所有变量都具有正确的值

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-08-24T03:11:14.613

我通过创建所有**用户变量**（包括`PATH`变量）来解决这个问题。这是因为系统变量不会“翻译”用户变量。所以如果你只想在你的帐户中使用maven，你需要添加另一个`PATH`变量作为用户变量，而不是系统变量。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-02-22T18:32:47.733

正如其他人所做的那样，创建新的系统变量 M2 和 M2_HOME 解决了这个问题。只是在我的 Windows XP 机器上创建用户变量 M2 和 M2_HOME 导致无法从命令行识别 maven。然后我删除了用户变量，创建了系统变量的副本，这一切都变得生动起来。

这是带有 XP sp3 的 apache-maven-3.0.4。因此：[http](http://maven.apache.org/download.cgi) ://maven.apache.org/download.cgi 中的说明 似乎不正确。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-08-07T17:22:05.157

以管理员身份运行命令提示符为我解决了这个问题。我不必在系统变量下移动 M2 或 M2_HOME。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2013-11-14T11:06:02.707

很可能您可能没有正确安装 maven。用[它](http://maven.apache.org/download.cgi)来下载maven。下载最新`(Binary tar.gz)`的文件。它对我有用。

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2014-01-08T16:50:09.930

我有同样的问题，我的语法没有问题，但是当我将`M2`, `M2_HOME`,`JAVA_HOME`环境变量从用户移动到系统时，它开始工作。路径变量保持不变。

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2014-04-16T05:16:24.230

将您的 Maven bin 路径添加到 System 变量，如下所示

前往

```
> Enviornment Variables > set Path=D:\apache-maven-3.2.1\bin 
```

或者如果路径已经设置而不是附加路径`";"`

重启命令并尝试

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2014-06-22T07:08:05.860

运行 maven 赢得 7

1.  将 apache-maven 解压到目录 C:\Program Files\apache-maven-3.2.1
2.  转到 [环境变量] 设置 [路径] C:\Program Files\apache-maven-3.2.1\bin;
3.  打开 cmd 并输入 C:\Program Files\apache-maven-3.2.1> mvn -version

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2014-08-11T15:08:56.370

我在 Windows 7 上遇到了类似的问题。起初我在 User 变量下设置了 M2, M2_HOME 但是当我回显 %PATH% 时，我没有看到 PATH 下列出的 maven bin 目录。然后我在系统变量下设置 M2，M2_HOME 并且它工作。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2014-09-02T16:07:54.893

从用户变量中删除 M2 和 M2_HOME 并移至系统变量。这将解决问题

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2014-09-06T19:46:58.573

遇到了同样的问题，

> mvn --版本

工作但

> 行家——版本

没有。无论如何，我更喜欢使用'mvn'而不是'maven'，所以一切都很好。我也注销/登录以确保。

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2015-03-25T12:21:41.803

确保您没有重命名`M2`环境变量路径中的某个文件夹。如果您有，请相应地更改您的`M2`和/或`M2_HOME`。

只要您使用环境变量所在范围内的同一用户登录，无论是系统变量还是用户变量都没有关系`M2`。`M2_HOME`

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2015-12-27T05:00:10.360

我已经通过在用户变量中添加路径变量来解决它`%JAVA_HOME%\bin;%M2_HOME%\bin;`

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2016-04-19T11:12:11.857

接受的答案无济于事，但下面的简单步骤修复它！

在系统 PATH 下：不要使用 M2%，而是使用 %M2_HOME%\bin，就这么简单。

注意我的 %M2_HOME% 指向 %MV3_HOME% 而不是实际的绝对路径 bcos 我安装了多个版本的 maven 并试图变得聪明（在同一个盒子上为不同的项目切换 maven 版本）。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2016-10-19T11:08:56.417

一个临时的解决方法是从终端本身设置路径。之后为我工作。以管理员身份运行也可以。在我的例子中，M2 和 M2_HOME 都已经设置为系统变量。

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2017-07-11T19:34:04.723

我在执行命令 mvn -version 时遇到了同样的问题；但是，我检查了我还在环境变量设置中设置了 mvn 选项，这在命令提示符下给了我一些堆内存问题。所以，我删除了我设置的 Maven 选项，然后它对我来说很好。

* * *

## 回答 #27

> 赞同：0
> 
> 时间：2017-11-04T07:09:42.987

我遇到了同样的问题，然后我关闭并重新打开 cmd.exe 以使 mvn -vto 传播到我的命令提示符。

如果在您设置变量时 cmd 处于打开状态，则它们在该会话中将不可用。

* * *

## 回答 #28

> 赞同：0
> 
> 时间：2018-04-21T23:35:32.710

假设您已经为 maven 创建了变量路径，如下所示：

在系统路径下，单击`new`然后编辑如下：

变量的名称：`MAVEN_HOME`

变量值：`C:\Program Files\apache-maven-3.5.3\bin`

然后继续执行以下说明：

在系统路径下，通过单击编辑更新变量路径并添加：

```
C:\Program Files\apache-maven-3.5.3\bin; 
```

之后立马：

```
C:\Program Files\Java\jdk\1.8.0_161\bin; 
```

`;`记得在上面添加分号`\bin`，然后运行你的 cmd 提示符并输入：

```
mvn -v 
```**

# jquery - JQuery 自动完成组合框：MVC3 验证不起作用

> ID：11890118
> 
> 赞同：0
> 
> 时间：2012-08-09T18:56:42.647
> 
> 标签：jquery, asp.net-mvc-3, jquery-ui, validation, jquery-ui-autocomplete

我正在尝试将[JQuery UI Autocomplete (Combobox)](http://jqueryui.com/demos/autocomplete/#combobox)与 ASP.NET MVC3 中的下拉列表一起使用。

在我看来，这是相关的代码部分：

```
 <div class="editor-label">
        @Html.LabelFor(model => model.MerchantID, "Merchant")
    </div>
    <div class="editor-field">
        @Html.DropDownList("MerchantID", null, String.Empty, new { @class = "combobox" })
        @Html.ValidationMessageFor(model => model.MerchantID)
    </div>

    <div class="editor-label">
        @Html.LabelFor(model => model.FinancialAccountID, "FinancialAccount")
    </div>
    <div class="editor-field">
        @Html.DropDownList("FinancialAccountID", null, String.Empty, new { @class = "combobox" })
        @Html.ValidationMessageFor(model => model.FinancialAccountID)
    </div> 
```

（有 4-10 个下拉列表。）

这是 javascript 文件的内容，基本上是从[jquery-ui 网站](http://jqueryui.com/demos/autocomplete/#combobox)复制的：

```
(function ($) {
    $.widget("ui.combobox", {
        _create: function () {
            var input,
                    self = this,
                    select = this.element.hide(),
                    selected = select.children(":selected"),
                    value = selected.val() ? selected.text() : "",
                    wrapper = this.wrapper = $("<span>")
                        .addClass("ui-combobox")
                        .insertAfter(select);

            input = $("<input>")
                    .appendTo(wrapper)
                    .val(value)
                    .addClass("ui-state-default ui-combobox-input")
                    .autocomplete({
                        delay: 0,
                        minLength: 0,
                        source: function (request, response) {
                            var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), "i");
                            response(select.children("option").map(function () {
                                var text = $(this).text();
                                if (this.value && (!request.term || matcher.test(text)))
                                    return {
                                        label: text.replace(
                                            new RegExp(
                                                "(?![^&;]+;)(?!<[^<>]*)(" +
                                                $.ui.autocomplete.escapeRegex(request.term) +
                                                ")(?![^<>]*>)(?![^&;]+;)", "gi"
                                            ), "<strong>$1</strong>"),
                                        value: text,
                                        option: this
                                    };
                            }));
                        },
                        select: function (event, ui) {
                            ui.item.option.selected = true;
                            self._trigger("selected", event, {
                                item: ui.item.option
                            });
                        },
                        change: function (event, ui) {
                            if (!ui.item) {
                                var matcher = new RegExp("^" + $.ui.autocomplete.escapeRegex($(this).val()) + "$", "i"),
                                    valid = false;
                                select.children("option").each(function () {
                                    if ($(this).text().match(matcher)) {
                                        this.selected = valid = true;
                                        return false;
                                    }
                                });
                                if (!valid) {
                                    // remove invalid value, as it didn't match anything
                                    $(this).val("");
                                    select.val("");
                                    input.data("autocomplete").term = "";
                                    return false;
                                }
                            }
                        }
                    })
                    .addClass("ui-widget ui-widget-content ui-corner-left");

            input.data("autocomplete")._renderItem = function (ul, item) {
                return $("<li></li>")
                        .data("item.autocomplete", item)
                        .append("<a>" + item.label + "</a>")
                        .appendTo(ul);
            };

            $("<a>")
                    .attr("tabIndex", -1)
                    .attr("title", "Show All Items")
                    .appendTo(wrapper)
                    .button({
                        icons: {
                            primary: "ui-icon-triangle-1-s"
                        },
                        text: false
                    })
                    .removeClass("ui-corner-all")
                    .addClass("ui-corner-right ui-combobox-toggle")
                    .click(function () {
                        // close if already visible
                        if (input.autocomplete("widget").is(":visible")) {
                            input.autocomplete("close");
                            return;
                        }

                        // work around a bug (likely same cause as #5265)
                        $(this).blur();

                        // pass empty string as value to search for, displaying all results
                        input.autocomplete("search", "");
                        input.focus();
                    });
        },

        destroy: function () {
            this.wrapper.remove();
            this.element.show();
            $.Widget.prototype.destroy.call(this);
        }
    });
})(jQuery);

$(function () {
    $(".combobox").combobox();
}); 
```

我遇到的问题是似乎没有对输入的值进行任何验证。例如，如果我将其留空并提交，则没有错误表明输入了无效信息。但是，如果我注释掉 combobox() 调用以禁用组合框功能，则验证工作正常。

我已经针对这个问题在 stackoverflow 上进行了一些搜索，但我似乎找不到任何与这种特定情况相匹配的东西。

编辑：我发现验证确实发生了，但前提是我在提交之前单击另一个字段，这很奇怪。因此，如果我在组合框中输入空白文本，然后单击文本字段，然后提交，它可以正常工作（显示验证错误。）但是如果我在组合框中输入空白文本并提交，它不会显示验证错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T16:08:58.963

好的，我发现了问题所在。

当按下提交按钮时，在检测到错误输入时清除所选项目的自动完成 JQuery*之前调用 javascript 验证。*这是我的意思的部分：

```
if (!valid) {
     // remove invalid value, as it didn't match anything
     $(this).val("");
     select.val("");
     input.data("autocomplete").term = "";
     return false;
} 
```

因此，一旦用户开始输入，我就明确了选定的项目，并且只有在选择了有效项目时才重新选择。

```
source: function (request, response) {
    select.val(""); //as soon as typing is started, the select input is cleared.  This makes sure validation always occurs
    var matcher = new RegExp($.ui.autocomplete.escapeRegex(request.term), "i");
    response(select.children("option").map(function () {
        var text = $(this).text();
        if (this.value && (!request.term || matcher.test(text)))
            return {
                label: text.replace(
                    new RegExp(
                        "(?![^&;]+;)(?!<[^<>]*)(" +
                        $.ui.autocomplete.escapeRegex(request.term) +
                        ")(?![^<>]*>)(?![^&;]+;)", "gi"
                    ), "<strong>$1</strong>"),
                value: text,
                option: this
            };
    }));
}, 
```

# c# - 将一个数据表的某些列复制到新数据表

> ID：11890122
> 
> 赞同：0
> 
> 时间：2012-08-09T18:56:54.407
> 
> 标签：c#, .net, datatable

我在visual basic中发现了类似的问题，但在c#中没有什么确切的问题。

我想使用 INDEX（即 1、4 和 5 是索引而不是它们的名称/标题）从 10 列数据表中复制某些列（比如 1、4 和 5）并创建一个对象（我认为数组/列表最好？），我将传递给 form2。在 form2 中，我想从这些数组/列表中创建一个新的数据表，因此它最终将有 3 列与原始数据表的第 1、4 和 5 列相同。我还希望可以选择在传递每个数组的第一个元素之前删除它，基于我将在别处设置的真/假值。

这是我到目前为止的大纲（'alldata' 是我的数据表，'cx' 是我想要获得的第 x 列）：

表格1：

```
 private void button2_Click(object sender, EventArgs e) //next
    {
        this.Hide();

        int c1 = 1; int c2 = 4; int c3 = 5
        int[] 1st_col; int[] 2nd_col; int[] 3rd_col;
        [assign c1th column to 1st_col, etc]

        if (variable = marker_number)
        {
            [delete first element of each array]
        }

        Form2 step2 = new Form2(1st_col, 2nd_col, 3rd_col);
        step2.ShowDialog();
    } 
```

表格2：

```
 public Form2(int 1st_col, int 2nd_col, int 3rd_col)
    {

        DataTable mytable1 = new DataTable();            
        [add 1st, 2nd, and 3rd cols to mytable1]
        InitializeComponent();

    } 
```

如果还有什么我应该提供的，请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:46:02.213

更新了，试试这个：

表格1

```
 private void button2_Click(object sender, EventArgs e)
    {
        //10 column datatable
        var dt10 = new DataTable("DT10");
        dt10.Columns.Add("PKID");
        dt10.Columns.Add("FName"); 
        dt10.Columns.Add("MName");
        dt10.Columns.Add("LName");
        dt10.Columns.Add("Address");
        dt10.Columns.Add("City");
        dt10.Columns.Add("State");
        dt10.Columns.Add("Zip");
        dt10.Columns.Add("Phone");
        dt10.Columns.Add("Fax");

        //give some sample data
        dt10.Rows.Add(new object[] { 1, "Matt", "James", "Smith", "123 Main", "Philadelphia", "PA", "12141", "215-555-1111", "215-555-1212" });
        dt10.Rows.Add(new object[] { 2, "Mark", "James", "Smith", "123 Main", "Pittsburgh", "PA", "12141", "215-555-1111", "215-555-1212" });
        dt10.Rows.Add(new object[] { 3, "Luke", "James", "Smith", "123 Main", "Scranton", "PA", "12141", "215-555-1111", "215-555-1212" });
        dt10.Rows.Add(new object[] { 4, "John", "James", "Smith", "123 Main", "Reading", "PA", "12141", "215-555-1111", "215-555-1212" });
        dt10.Rows.Add(new object[] { 5, "Paul", "James", "Smith", "123 Main", "Harrisburg", "PA", "12141", "215-555-1111", "215-555-1212" });

        //create new datatable with subset of columns
        var dt3 = new DataTable("DT3");
        dt3.Columns.Add("FName");
        dt3.Columns.Add("LName");
        dt3.Columns.Add("Phone");

        //indexes can be hardcoded or set at runtime
        int c1 = 1; int c2 = 3; int c3 = 8;

        //add all rows, but only the specified columns
        foreach (DataRow r in dt10.Rows)
        {
            dt3.Rows.Add(new object[] { r[c1], r[c2], r[c3] } );                
        }

        bool includeFirstRow = chkIncludeFirstRow.Checked;
        if (!includeFirstRow)
        {
            dt3.Rows.RemoveAt(0);
        }

        Form2 step2 = new Form2(dt3);
        step2.ShowDialog();
    } 
```

表格2

```
public partial class Form2 : Form
{
    public Form2()
    {
        InitializeComponent();
    }

    public Form2(DataTable dt)
    {
        InitializeComponent();
        //do your thing here, bind to datagridview or whatever

    }
} 
```

# java - Java nio 服务器客户端异步

> ID：11890124
> 
> 赞同：1
> 
> 时间：2012-08-09T18:57:05.153
> 
> 标签：java, multithreading, sockets, io, socketchannel

我使用 java nio 和选择器自己制作了一个服务器。如果需要，我可以直接从客户那里接收数据并回答。

但是现在我想要一个可以处理数据的线程，并且它会随时向每个客户端发送数据。

那么我该怎么做呢？另外如何将所有通道保存在内存中以将数据写入每个客户端？

如果您需要，我可以使用 java nio 发布我的部分代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-07T19:21:25.940

创建一个可运行的新线程并确保它知道您的服务器，因为您的服务器应该知道所有客户端。如果客户端发送一条消息，通过数据处理器线程解析它并让它完成它的工作。完成处理您的任务后，请让服务器知道，以便他可以更新所有客户端。

[提示：您应该使用LinkedBlockingQueue](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/LinkedBlockingQueue.html)之类的东西为处理线程创建一个等待队列，这样您就可以始终将任务放入队列中，而无需等待任务完成。然后tad将等待队列中需要处理的东西。这样处理线程只会在队列中有实际任务时才使用 CPU 资源

这是一个代码示例

```
public abstract class Queue implements Runnable {
private final LinkedBlockingQueue<Message> queue;

public Queue() {
    this.queue = new LinkedBlockingQueue<Message>();
}

/**
 * Adds a message to the queue.
 * @param message
 */
public void add(final Message message) {
    try {
        queue.put(message);
    } catch (final InterruptedException e) {
        e.printStackTrace();
    }
}

/**
 * Waits for new messages
 */
@Override
public void run() {
    while(true) {
        try {
            final Message message = queue.take();
            processMessage(message);
        } catch (final InterruptedException e) {
            e.printStackTrace();
        }
    }
}

/**
* Processes the new message
*/
protected abstract void processMessage(Message message); 
```

}

# lua - Lua 表库被移除？

> ID：11890125
> 
> 赞同：19
> 
> 时间：2012-08-09T18:57:14.627
> 
> 标签：lua, lua-table

我正在尝试学习 Lua 的技巧，并且正在阅读在线教程。我试图解决的一个问题是检查一张表`local foo = {}`，看看它有多少元素。该教程给出了使用的建议`local length = table.getn(foo)`。当我使用 Lua52 尝试此操作时，我收到一条错误消息`attempt to call field 'getn' (a nil value)`。我进一步环顾四周，注意到给出的任何函数`table`都会产生相同类型的错误。该`table`库是否从 Lua 中删除？它是第三方库，还是提供了什么？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-09T19:05:17.153

使用长度运算符`#`，如`#foo`.

`table.getn`在 5.1 中已弃用并在 5.2 中删除。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-13T04:36:07.177

表库没有被删除，因为它是语言和模块系统的重要组成部分。该`getn`函数已被删除，但如果*表*函数都不起作用，那几乎可以肯定是因为您覆盖了`table`.

# haskell - 将 http-conduit 源连接到 xml-conduit 接收器

> ID：11890126
> 
> 赞同：4
> 
> 时间：2012-08-09T18:57:16.183
> 
> 标签：haskell, conduit

我试图遵循[这个](https://stackoverflow.com/questions/9245342/)connecting-http-conduit-to-xml-conduit stackoverflow 问题，因为它看起来与我想要做的完全一样。

我正在构建来自 yesod 书的[http-conduit](http://www.yesodweb.com/book/http-conduit)部分的示例。

编码

```
getBody = do
   manager <- liftIO $ newManager def
   req <- liftIO $ parseUrl fredURL
   http req manager 
```

错误

```
No instance for (monad-control-0.3.1.3:Control.Monad.Trans.Control.MonadBaseControl
                   IO m0)
  arising from a use of `http'
Possible fix:
  add an instance declaration for
  (monad-control-0.3.1.3:Control.Monad.Trans.Control.MonadBaseControl
     IO m0)
In a stmt of a 'do' block: http req manager
In the expression:
  do { manager <- liftIO $ newManager def;
       req <- liftIO $ parseUrl fredURL;
       http req manager }
In an equation for `getBody':
    getBody
      = do { manager <- liftIO $ newManager def;
             req <- liftIO $ parseUrl fredURL;
             http req manager } 
```

目标

我正在尝试返回一个将由 xml-conduit Sink 使用的 Source，其目的是我想使用 XML-Conduit 来解析 XML 并将其表示为 Haskell`data`类型。我能否解释一下我为什么会出错？

# java - 在 JavaFX 中重新触发消费事件

> ID：11890128
> 
> 赞同：3
> 
> 时间：2012-08-09T18:57:18.480
> 
> 标签：java, event-handling, javafx-2, barcode-scanner

我正在开发一个允许用户扫描条形码的系统。条码扫描器实际上就像一个键盘，以超人的速度“键入”条码的每个数字。为了这个例子，假设连续“击键”之间的大部分时间是 10 毫秒。

我首先在应用`EventHandler`程序`KeyEvent`的`Window`. 当 a`KeyEvent`到达时，处理程序还不知道它是由人输入还是由条形码扫描仪输入的（它将*在*10 毫秒后知道）。**不幸的是，我现在**必须做出决定，否则有锁定 JavaFX 主线程的风险，所以我自动调用`keyEvent.consume()`以防止它被处理。

10 毫秒过去后，定时器唤醒并决定是否`KeyEvent`是条形码的一部分。如果是，则将`KeyEvent`s 连接在一起并由条形码处理逻辑处理。否则，我想让应用程序`KeyEvent`正常处理。

`KeyEvent`在我已经调用它之后，如何强制应用程序处理`keyEvent.consume()`它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T02:06:39.100

这是我对如何做到这一点的看法。

该解决方案的工作原理是过滤应用程序的关键事件，克隆它们并将克隆的事件放入队列中，然后使用过滤器中的原始事件。克隆的事件队列稍后处理。来自条形码阅读器的事件不会重新触发。不是来自条形码阅读器的事件将被重新触发，以便系统可以处理它们。数据结构跟踪事件是否已经被处理，以便系统可以在事件过滤器中知道它是否真的必须拦截和使用事件，或者让它们传递给标准的 JavaFX 事件处理程序。

```
import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import javafx.animation.KeyFrame;
import javafx.animation.Timeline;
import javafx.application.Application;
import javafx.event.Event;
import javafx.event.EventHandler;
import javafx.scene.Node;
import javafx.scene.Scene;
import javafx.scene.control.Label;
import javafx.scene.control.TextField;
import javafx.scene.input.KeyEvent;
import javafx.scene.layout.GridPane;
import javafx.scene.layout.VBox;
import javafx.stage.Stage;
import javafx.util.Duration;

// delays event key press handling so that some events can be intercepted
// and routed to a bar code a reader and others can be processed by the app.
public class EventRefire extends Application {
  public static void main(String[] args) { launch(args); }
  @Override public void start(final Stage stage) throws Exception {
    // create the scene.
    final VBox layout = new VBox();
    final Scene scene = new Scene(layout);

    // create a queue to hold delayed events which have not yet been processed.
    final List<KeyEvent> unprocessedEventQueue = new ArrayList();
    // create a queue to hold delayed events which have already been processed.
    final List<KeyEvent> processedEventQueue = new ArrayList();

    // create some controls for the app.
    final TextField splitterField1 = new TextField(); splitterField1.setId("f1");
    final TextField splitterField2 = new TextField(); splitterField2.setId("f2");
    final Label forBarCode   = new Label();
    final Label forTextField = new Label();

    // filter key events on the textfield and don't process them straight away.
    stage.addEventFilter(KeyEvent.ANY, new EventHandler<KeyEvent>() {
      @Override public void handle(KeyEvent event) {
        if (event.getTarget() instanceof Node) {
          if (!processedEventQueue.contains(event)) {
            unprocessedEventQueue.add((KeyEvent) event.clone());
            event.consume();
          } else {
            processedEventQueue.remove(event);
          }  
        }  
      }
    });

    // set up a timeline to simulate handling delayed event processing from 
    // the barcode scanner.
    Timeline timeline = new Timeline(
      new KeyFrame(
        Duration.seconds(1), 
        new EventHandler() {
          @Override public void handle(Event timeEvent) {
            // process the unprocessed events, routing them to the barcode reader
            // or scheduling the for refiring as approriate.
            final Iterator<KeyEvent> uei = unprocessedEventQueue.iterator();
            final List<KeyEvent> refireEvents = new ArrayList();
            while (uei.hasNext()) {
              KeyEvent event = uei.next();
              String keychar = event.getCharacter();
              if ("barcode".contains(keychar)) {
                forBarCode.setText(forBarCode.getText() + keychar);
              } else {
                forTextField.setText(forTextField.getText() + keychar);
                refireEvents.add(event);
              }
            }

            // all events have now been processed - clear the unprocessed event queue.
            unprocessedEventQueue.clear();

            // refire all of the events scheduled to refire.
            final Iterator<KeyEvent> rei = refireEvents.iterator();
            while (rei.hasNext()) {
              KeyEvent event = rei.next();
              processedEventQueue.add(event);
              if (event.getTarget() instanceof Node) {
                ((Node) event.getTarget()).fireEvent(event);
              }
            }
          }
        }
      )
    );
    timeline.setCycleCount(Timeline.INDEFINITE);
    timeline.play();

    // layout the scene.
    final GridPane grid = new GridPane();
    grid.addRow(0, new Label("Input Field 1:"), splitterField1);
    grid.addRow(1, new Label("Input Field 2:"), splitterField2);
    grid.addRow(2, new Label("For App:"),       forTextField);
    grid.addRow(3, new Label("For BarCode:"),   forBarCode);
    grid.setStyle("-fx-padding: 10; -fx-vgap: 10; -fx-hgap: 10; -fx-background-color: cornsilk;");

    Label instructions = new Label("Type letters - key events which generate the lowercase letters b, a, r, c, o, d, e will be routed to the barcode input processor, other key events will be routed back to the app and processed normally.");
    instructions.setWrapText(true);
    layout.getChildren().addAll(grid, instructions);
    layout.setStyle("-fx-padding: 10; -fx-vgap: 10; -fx-background-color: cornsilk;");
    layout.setPrefWidth(300);
    stage.setScene(scene);
    stage.show();
  }
} 
```

示例程序输出：

![示例程序输出](../Images/1996da0d7c030336926933f0ed8a8a5d.png)

因为我使用时间轴，所以我的代码中的所有内容都在 FXApplicationThread 上运行，所以我不必担心我的实现中的并发性。在使用真正的条形码阅读器和条形码事件处理器实现时，您可能需要一些额外的并发保护，因为可能会涉及多个线程。此外，您可能不需要我的代码中使用的时间线来模拟条形码系统的延迟处理。

# c# - 在 google plus 流上发帖

> ID：11890129
> 
> 赞同：5
> 
> 时间：2012-08-09T18:57:26.510
> 
> 标签：c#, api, social-networking, google-plus

它可能与此重复，我已经看到了这个[是否有现有的 Google+ API？](https://stackoverflow.com/questions/6545560/is-there-an-existing-google-api?rq=1)

现在我的问题是我已经看到了 google+ history API 和 google+ Api ..

我以前从未使用过 API，也不知道从哪里开始我所知道的就是我必须实现一个代码才能在我的品牌的 google+ 页面上发布..我知道我必须拥有访问令牌才能做到这一点.. 但是有人可以告诉我在理解和实施它之前我应该​​从哪里开始以及我需要知道什么..

我知道有许多网站可以让我们在 google plus 页面上发帖，例如 hoosuite.. 它允许我们同时发布到所有不同的网络站点，goole+ 也是如此.. 所以我假设肯定有解决方法可以做到这一点..有人可以帮助我..从哪里开始？

谢谢 ！

PS：如果我不清楚或我的问题太模糊，请告诉我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:39:11.433

目前没有公开记录的 API 可让您自动发布到您的 Google+ 信息页。

但是，有一些工具（例如 HootSuite）确实允许这样做，并且由于您从未使用过 API，因此这可能是您进行调查的好方法。

HootSuite 正在使用的 API 正在慢慢向其他供应商开放。请参阅[https://plus.google.com/u/0/104946722942277428266/posts/LUi2ZNyRHag](https://plus.google.com/u/0/104946722942277428266/posts/LUi2ZNyRHag)了解有关即将发生的事情以及如何注册以请求访问此内容的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:09:19.203

快速浏览 API，我没有看到您会调用什么来创建帖子，到目前为止我只看到了一个读取 API...

但是，如果您可以找到将数据发送到何处，则需要研究如何将数据 HTTP POST 到该 url。

您在 C# 中内置的主要选项是或属性设置为[`WebClient`](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)`.UploadString()`[`HttpWebRequest`](http://msdn.microsoft.com/en-us/library/system.net.httpwebrequest.aspx)`Method``POST`

然后上传指定的 JSON 对象以创建帖子。可能有一些框架可以帮助 AJAX 或 JSON 使其变得更容易，但是对于仅制作一种类型的帖子，手动执行它并不会太难。

# objective-c - 如何使用 initWithContentsOfURL:error: 加载声音文件？

> ID：11890133
> 
> 赞同：0
> 
> 时间：2012-08-09T18:57:42.420
> 
> 标签：objective-c, ios, avaudioplayer

如何访问`crashSound.wav`我放在 xCode 项目的 Supporting Files 文件夹中的文件？因为以下代码不起作用：

```
@interface Game()
{
    // code...

    AVAudioPlayer *crashSound;

    // code...
}
@end

@implementation Game

- (id) init 
{ 
    // code...

    NSURL *crashSoundFile = [[NSURL alloc] initWithString:@"crashSound" ]; // <--PROBLEM

    crashSound = [[AVAudioPlayer alloc] initWithContentsOfURL:crashSoundFile error:NULL];

    // code...
}
-(void) play // this is my "main" method that will be called once the playButton is pressed
{
   [crashSound play];[crashSound play];[crashSound play];

}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:03:46.573

`@"crashSound"`不是有效的 URL。您必须提供一个实际的 URL。

项目中图像、声音等（资源）的 URL 在编译时不可预测，必须在运行时生成。这很容易使用`NSBundle`。

```
NSBundle *bundle = [NSBundle mainBundle];
NSURL *crashSoundFile = [bundle URLForResource: @"crashSound" withExtension: @"wav"]; 
```

达达。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:05:52.723

NSURL *url = [NSURL fileURLWithPath:[NSString stringWithFormat:@"%@/soundfile.extension", [[NSBundle mainBundle] resourcePath]]];

# php - 列表更新 - 行冲突

> ID：11890135
> 
> 赞同：0
> 
> 时间：2012-08-09T18:57:44.513
> 
> 标签：php, mysql

我有一个名为的列`list`，按我的顺序使用（在 MYSQL 查询中），列表中是数字：（例如 1 到 20）

然后，该列表由`list`ASC 使用 MYSQL 顺序输出 - 但是，当我使用 Jquery 拖放 UI 列表在后端更新我的列表时，它应该更新列表前端。

我的问题是我的列表顺序有时会与其他行冲突，因为列表中可能有两到三行值为 1，因此当我的订单更新时，我想知道如何**仅当行更新其他行时 +1是 >= 给定的订单号**

我不想使列成为主要列，因为我的目标不是使`list`列唯一，原因是因为有多个类别 - 在每个类别中它们都从 1 开始 - 因此，如果我让它独一无二会导致错误，因为在不同的类别中有多个 1。

我问了一位朋友，他说我可能可以使用触发器函数尝试 PL/SQL，但这对我来说是新的领域——我不完全理解那种语言，想知道是否有人可以帮助我做我正在尝试使用 MYSQL 或甚至是 PL/SQL。

**这是我到目前为止所拥有的：**

```
<?php
$project = mysql_real_escape_string(stripslashes($_POST['pid']));
$category = mysql_real_escape_string(stripslashes($_POST['cat']));
$order = mysql_real_escape_string(stripslashes($_POST['order']));
// need to do update the moved result (list row) and update all conflicting rows by 1
mysql_query("UPDATE `projects` SET `cat`='$category',`list`='$order' WHERE `id`='$project'")or die(mysql_query());
?> 
```

**结论：**

我正在尝试更新一个非唯一列以具有该单个类别的唯一值。我不确定如何通过 +1 更新该类别中的所有行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:17:19.160

@andrewsi 是对的，特别是我建议`order by list ASC, last_update DESC`在您更新的同一查询中添加`list`时间戳`last_update`，因此您无需使用触发器或任何其他更新。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T21:12:26.367

总的来说，andrewsi 和 Luis 的建议是正确的。而不是（像 andrewsi 说的）“做混乱的更新”，你应该真正考虑按第二列排序。

但是，我也许可以看到您对方法的看法。我知道它可能适用的一种类似情况是在 CMS 中，您可以通过在项目旁边的文本字段中手动更改订单号来让后端用户订购项目，例如

```
item 1 - [ 1 ]
item 2 - [ 3 ]
item 3 - [ 2 ] 
```

... 中的数字`[]`将成为新订单。

所以，一个非常混乱的解决方案是（很多步骤，但如果你不必担心性能，它可能对你没问题，我不知道）：

```
INSERT INTO projects (cat, list, timestamp_inserted) VALUES (:cat, :list, NOW()) 
```

然后作为第二步

```
SELECT id, list FROM projects WHERE cat=:cat ORDER BY list ASC, timestamp_inserted DESC 
```

然后循环遍历从 select 和 foreach 行更新中获得的数组（：i 是递增索引）

```
UPDATE projects SET list=:i WHERE id=:id 
```

PS：您必须添加一个`timestamp_inserted`带有时间戳值的列。
PPS：明确地说，我不推荐这样做，也从未说过这是最佳做法（对于那些考虑因此而投票反对的人）

# c# - .aspx 文件中的访问属性设置值

> ID：11890136
> 
> 赞同：2
> 
> 时间：2012-08-09T18:57:47.920
> 
> 标签：c#, asp.net, properties, settings

我可以访问我的类文件 SomeClass.cs 中 Settings.settings 文件中定义的属性的值，如下所示：

```
TestProject.Properties.Settings property = Properties.Settings.Default;
string myValue = property.someValue; 
```

但是，我想从我的 Default.aspx 页面访问属性值。我努力了：

```
<% 
    TestProject.Properties.Settings property = Properties.Settings.Default;
%> 
```

它在属性的右侧给出了一个错误，说：“名称属性在当前上下文中不存在。”

是否可以从 .aspx 文件访问属性项？我能想到的唯一替代方法是创建一个 .cs 类，它只读取属性项并提供 .aspx 文件可以使用的 getter。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T19:21:57.397

那是因为`Settings`类被定义为`internal`. 您可以在代码隐藏中使用类似的方法解决此问题：

...

```
public string Test { get; set; } 
```

...

```
this.Test = WebApplication1.Properties.Settings.Default.Test; 
```

...

回到你的aspx：

```
<%= this.Test %> 
```

但我建议你用来`web.config`存储设置的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:08:30.483

我最终只是创建了一个专门用于检索这些属性值的类：

例子：

```
public class TestProperties
{
    public static string getValue1()
    {
        return Properties.Settings.Default.Value1;
    }

    public static string getValue2()
    {
        return Properties.Settings.Default.Value2;
    }
} 
```

然后在 .aspx 文件中，我按如下方式检索值：

```
Value1: <%= TestProperties.Value1() %><br>
Value2: <%= TestProperties.Value2() %><br> 
```

如果有人知道更简单的方法来做到这一点，我想得到一些评论。

# python - 为什么我在 Python 中收到此属性错误？

> ID：11890137
> 
> 赞同：0
> 
> 时间：2012-08-09T18:57:57.503
> 
> 标签：python

提前感谢您的帮助，我知道这可能是一个新手问题，但我无法通过搜索找到任何似乎可以回答我的问题的内容。这是回溯的相关部分：

```
 File "war.py", line 183, in __battle
    if (card1 > card2):
  File "war.py", line 24, in __lt__
    return self.int_id % 13 < other.int_id % 13
AttributeError: 'function' object has no attribute 'int_id' 
```

我对这意味着什么感到困惑……什么是“功能”对象？另外，为什么要从大于比较的行中调用**lt ？**为什么现在这是一个问题，因为我对我的 Card 类（其中 card1 和 card2 是实例）进行了单元测试，包括所有丰富的比较运算符，并且它通过了？

这些是我的 Card 类中丰富的比较方法的定义（您可能会猜到，int_id 只是一个实例变量 int）：

（对不起，下面的缩进搞砸了）

```
class Card():

    def __init__(self, int_id):
        self.int_id = int_id

    def __lt__(self, other):
        return self.int_id % 13 < other.int_id % 13

    def __le__(self, other):
        return self.int_id % 13 <= other.int_id % 13

    def __eq__(self, other):
        return self.int_id % 13 == other.int_id % 13

    def __ne__(self, other):
        return self.int_id % 13 != other.int_id % 13

    def __gt__(self, other):
        return self.int_id % 13 > other.int_id % 13

    def __ge__(self, other):
        return self.int_id % 13 >= other.int_id % 13 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T19:15:26.803

从错误`'function' object has no attribute 'int_id'`中，我猜想函数对象正在与行中的 Card 进行比较`if (card1 > card2):`。如果其中一张卡被错误地分配为功能，则可能会发生这种情况。例如，`card1 = getMyOtherCard`代替`card1 = getMyOtherCard()`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T19:14:45.330

`card1`以某种方式引用了一个函数（您是否在函数或方法调用上省略了括号？）。

结果，`card1 < card2`被重新排列为`card2 < card1`（因为`function`对象没有比较运算符），这就是`__lt__`被调用的原因。

来自[http://docs.python.org/reference/datamodel.html#object.__lt__](http://docs.python.org/reference/datamodel.html#object.__lt__)：

> 这些方法没有交换参数版本（当左参数不支持操作但右参数支持时使用）；相反，`__lt__()`并且`__gt__()`是彼此的反映[...]

# postgresql - 我想让我的 pl/pgsql 脚本输出到屏幕上

> ID：11890138
> 
> 赞同：3
> 
> 时间：2012-08-09T18:58:07.857
> 
> 标签：postgresql, for-loop, plpgsql

我有以下脚本，我想从中输出到屏幕。

```
CREATE OR REPLACE FUNCTION randomnametest() RETURNS integer AS $$
DECLARE
    rec RECORD;
BEGIN
    FOR rec IN SELECT * FROM my_table LOOP
        SELECT levenshtein('mystring',lower('rec.Name')) ORDER BY levenshtein;
    END LOOP;

    RETURN 1;
END;
$$ LANGUAGE plpgsql; 
```

我想在表中获取 levenshein() 函数的输出以及rec.Name。我该怎么做？此外，它给了我一个关于我调用 levenshtein() 的行的错误，说我应该改用 perform。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T19:03:16.413

假设你想把`insert`函数的返回值和`rec.name`放到不同的表中。这是您可以做的（首先`create`是表格`new_tab`）-

```
SELECT levenshtein('mystring',lower(rec.Name)) AS L_val;
INSERT INTO new_tab (L_val, rec.name); 
```

上面的用法如下所示。

我猜，您可以使用`RAISE INFO 'This is %', rec.name;`来查看值。

```
CREATE OR REPLACE FUNCTION randomnametest() RETURNS integer AS $$

DECLARE
    rec RECORD;
BEGIN
    FOR rec IN SELECT * FROM my_table LOOP
        SELECT levenshtein('mystring',lower(rec.Name))
         AS L_val;

       RAISE INFO '%   -   %', L_val, rec.name; 
    END LOOP;

    RETURN 1;
END;
$$ LANGUAGE plpgsql; 
```

**注意**-`FROM`如果您从 select like 中的函数中选择`netxval(sequence_name)`并且没有任何实际表可供选择，即 like `SELECT nextval(sequence_name) AS next_value;`，则该子句是可选的，在 Oracle 术语中它将是`SELECT sequence_name.nextval FROM dual;`or `SELECT function() FROM dual;`。`dual`中没有`postgreSQL`。

我还认为这`ORDER BY`不是必需的，因为我的假设是您的函数`levenshtein()`很可能在任何时间点都只返回一个值，因此没有足够的数据来`ORDER`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T20:51:46.923

*如果*你想要一个 plpgsql 函数的输出，如标题所说：

```
CREATE OR REPLACE FUNCTION randomnametest(_mystring text)
  RETURNS TABLE (l_dist int, name text) AS
$BODY$
BEGIN
    RETURN QUERY
    SELECT levenshtein(_mystring, lower(t.name)), t.name
    FROM   my_table t
    ORDER  BY 1;
END;
$$ LANGUAGE plpgsql; 
```

*   用 声明表[`RETURNS TABLE`](http://www.postgresql.org/docs/current/interactive/sql-createfunction.html)。
*   用于[`RETURN QUERY`](http://www.postgresql.org/docs/current/interactive/plpgsql-control-structures.html#PLPGSQL-STATEMENTS-RETURNING)从函数返回记录。
*   `OUT`通过查询中的表限定列名来避免列名和参数（来自`RETURNS TABLE`子句）之间的命名冲突。`OUT`参数在函数体中随处可见。
*   我将字符串与函数的参数进行比较，以使其更有用。

还有其他方法，但这是最有效的任务。您需要 PostgreSQL 8.4 或更高版本。

对于一次性使用，我会考虑只使用普通查询（= 没有`RETURN QUERY`上述内容的函数体）。

# php - 如何在 PHPUnit 中覆盖异常类

> ID：11890141
> 
> 赞同：5
> 
> 时间：2012-08-09T18:58:22.613
> 
> 标签：php, phpunit, code-coverage

我的目标是非常高的代码覆盖率，并且想要覆盖异常类或将它们从代码覆盖率报告中排除。

示例代码

```
class My_DataException extends Exception
{}

class Foo
{
   function __construct() { throw new My_DataException('see?'); }
} 
```

如何获得 My_DataException 的代码覆盖率（在 library/My/DataException.php 中）或将文件排除在代码覆盖率报告中？我不想使用注释方法（@codeCoverageIgnore 或类似的东西）。

我的 phpunit.xml 定义了一个黑名单，没有白名单

```
<filter>
    <blacklist>
        <directory suffix="Exception.php">../library/</directory>
    </blacklist>
</filter> 
```

每个异常文件都将以“Exception.php”结尾，所以我不确定为什么后缀部分不起作用。

额外细节：

*   这不是关于正确覆盖范围的问题
*   我宁愿不在每个异常文件中使用注释方法
*   每个异常文件都将以“Exception.php”结尾，例如。My/Exception.php 或 My/DataException.php

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T08:28:17.430

对于以下代码：

```
class Foo
{
    function __construct() {
        throw new My_DataException('see?');
    }
}s 
```

如果您在测试中执行该行，您将获得代码覆盖率：

```
new Foo; 
```

对于这样的测试，您可以通过注释告诉 Phpunit 您期望哪个异常：

```
/**
 * @expectedException My_DataException
 */ 
```

但是，异常通常是异常，因此您不会覆盖它们，但出于安全原因也可能存在异常，您还不知道如何使用测试设置/数据/参数触发它们。

然后更加努力地思考并尝试触发它们。否则，代码可能是多余的，因为从技术上讲，您无法抛出异常，因此没有必要。

对于您知道它们可能发生但仍然无法触发它们的情况（这可能吗？），您可以将脚本的某些区域标记为从源代码中的覆盖率报告中排除：

```
// @codeCoverageIgnoreStart
throw new My_DataException('see?');
// @codeCoverageIgnoreEnd 
```

稀疏地使用它，您将来可能希望将其删除。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T23:13:08.927

我一直在寻找一种方法来覆盖实际的异常文件，这就是我最终偶然发现答案的方式：

```
<?php

/**
 * Simple test for exception
 */
class Api_ExceptionTest extends PHPUnit_Framework_TestCase
{
    /**
     * Test can construct the exception, then throw it.
     *
     * @expectedException Api_Exception
     */
    public function testThrowException()
    {
        $exception = new Api_Exception();
        throw $exception;
    }
} 
```

# 2d - 我如何在java中创建一个二维位数组，其中每个单元格中存储的数据在硬盘上的大小为1位？

> ID：11890146
> 
> 赞同：0
> 
> 时间：2012-08-09T18:58:40.713
> 
> 标签：2d, bitarray

我真正想要完成的是： 1）创建一个表或打包的二维位数组，2 列——行可以是任意长度。给出列名，以便我可以引用它们。3）然后我可以设置这个数组中的各个位 4）一旦将数据放入表中，我想将表对象写入文件。我不关心内存中表对象的大小，因为每个单元格中的数据在硬盘驱动器上占用 1 位。假设表对象的大小为 10 字节，我在表中存储了 16 位，所以当写入文件时，我总共得到 12 字节。

我是编程新手，所以如果我没有说清楚，请原谅我。我很欣赏你的知识。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T19:14:41.877

任何二维数组都可以使用一维数组来实现。以 m 行 n 列的二维数组为例。在这种情况下，等效一维数组的大小将为 m*n。

2D[i, j] 等价于 1D[i*n + j]。这里 i 是行索引，j 是列索引。

在 Java 中，您使用 BitSet 来实现一维位数组。BitSet 类是一个可序列化的类，因此您可以将它保存在磁盘中。当您将 bitset 对象保存在硬盘中时，可能需要更多的研究来了解最终需要多少空间。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-09T19:18:45.303

你不能在硬盘上保存一点。

例如，我认为 java 中的 char 数据类型占用 4 位，这就是您可以使用的简单数据类型。

# xpages - XPiNC 视图图标

> ID：11890147
> 
> 赞同：0
> 
> 时间：2012-08-09T18:58:48.060
> 
> 标签：xpages

有没有办法可以在 XPiNC 呈现的 XPage 中加载视图图标（例如：vwicn001.gif）？我发现的大部分内容似乎只适用于网络浏览器。

我的工作是使用图像资源，因为这似乎在两种环境中都有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T23:21:16.533

查看正常的客户端安装（不是 Designer）- 图标不存在。您需要将它们添加到资源中

# moodle - 在顶部导航中创建指向课程历史的链接

> ID：11890148
> 
> 赞同：0
> 
> 时间：2012-08-09T18:58:49.177
> 
> 标签：moodle

我正在尝试为登录的用户“等级”页面添加一个指向顶部导航栏的静态链接。有没有办法让这成为可能？创建没有“user”参数的链接会导致错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T03:46:37.697

是的，我相信您应该能够使用[Navigation API](http://docs.moodle.org/dev/Navigation_API)来做到这一点。

就像是：

```
$settingnode = $PAGE->navigation->find('grades', navigation_node::TYPE_CONTAINER);
$thingnode = $settingnode->add(get_string('Name of thing'), new moodle_url('/a/link/if/you/want/one.php'));
$thingnode->make_active(); 
```

# jquery - 数字范围的正则表达式在 jquery 验证中不起作用

> ID：11890152
> 
> 赞同：0
> 
> 时间：2012-08-09T18:59:01.563
> 
> 标签：jquery, regex, asp.net-mvc-3, jquery-validate

在 asp.net mvc3 视图中，我有一个带有输入的表单。输入具有数字范围的正则表达式。正则表达式是正确的，但验证*总是*返回无效。我不确定我在这里缺少什么。这是渲染的元素。它在运行时页面加载后附加到 DOM。

```
<input 
 id="ReserveQuantity" 
 class="text-box single-line" 
 type="text" 
 name="ReserveQuantity" 
 data-val="true" 
 data-val-required="required." 
 data-val-number="numeric" 
 data-val-regex-pattern="/^(?:[0-9]|[1-9][0-9]|10[0-4])$/" 
 data-val-regex="The field must be in range 0 to 104."
> 
```

为了正确验证，我缺少什么？动态渲染时我错过了对 jquery 验证器的调用还是其他地方的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:41:19.047

不知道为什么正则表达式不能正确验证**并且仍然愿意解释！**正则表达式的形成是正确的，我什至尝试了几个不同的场景，但都没有正确验证。在我发现一篇写得很好的博客文章之前，我*很*茫然：http: [//xhalent.wordpress.com/2011/01/21/arbitrary-client-side-validation-in-asp-net-mvc-3/](http://xhalent.wordpress.com/2011/01/21/arbitrary-client-side-validation-in-asp-net-mvc-3/)

结果，我进行了以下更改：

```
data-val-regex-pattern="/^(?:[0-9]|[1-9][0-9]|10[0-4])$/" 
data-val-regex="The field must be in range 0 to 104." 
```

成为

```
data-val-range="The field must be in range 0 to 104." 
data-val-range-min="0" 
data-val-range-max="104" 
```

奇迹般有效。

# c++ - 涉及通过网络快速发送数据的 C/C++ 技术

> ID：11890156
> 
> 赞同：4
> 
> 时间：2012-08-09T18:59:29.937
> 
> 标签：c++, c, unix, tcp, network-programming

在低延迟方面（我正在考虑金融交换/托管 - 关心微秒的人）有哪些选项可以从两台 Unix 计算机上的 C++ 程序发送数据包？

我听说过内核绕过网卡，但这是否意味着您针对网卡的某种 API 进行编程？我认为与使用标准 Unix berkeley 套接字相比，这将是一个更快的选择？

我真的很感激任何贡献，尤其是那些参与这一领域的人。

从毫秒编辑到微秒

已编辑我有点希望收到更多基于 C/C++ 的答案，而不是网络硬件技术。它的目的是作为一个软件问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:09:45.770

当两台机器在同一个 LAN 上时，UDP 套接字速度快、延迟低且足够可靠。TCP 比 UDP 慢很多，但是当两台机器不在同一个 LAN 上时，UDP 是不可靠的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T19:16:49.977

软件分析将解决您的程序明显的问题。但是，当您谈论网络性能时，网络延迟可能是您最大的瓶颈。如果您使用的是 TCP，那么您需要做一些事情来避免网络上的拥塞和丢失，以防止重新传输。有几件事可以应对：

*   使用具有带宽和可靠性保证的网络。
*   适当调整 TCP 参数的大小以最大限度地提高利用率而不会造成损失。
*   在您的数据传输中使用纠错来纠正您可能遇到的少量丢失。

或者您可以完全避免使用 TCP。但如果需要可靠性，您最终将实现 TCP 中已有的大部分内容。

但是，您可以利用已经考虑过很多此类问题的现有项目。[UDT 项目](http://udt.sourceforge.net/)是我所知道的，它似乎正在获得关注。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T19:21:16.190

在过去的某个时候，我使用了一个加载到 Windows 内核中的数据包发送驱动程序。使用这个驱动程序可以生成比使用套接字层的应用程序强 10-15 倍的数据包流（我不记得确切的数字）。

优点很简单：发送请求直接来自内核，绕过多层软件：套接字、协议（即使对于UDP数据包仍然需要简单的协议驱动处理）、上下文切换等。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T19:22:18.590

通常减少延迟是以降低鲁棒性为代价的。例如，比较[ADSL 的（经常大肆宣传的）快速路径选项](http://en.wikipedia.org/wiki/Asymmetric_digital_subscriber_line#Interleaving_and_fastpath)。由于更短的数据包传输时间而减少的延迟是以增加错误敏感性为代价的。类似的技术可能存在于大量网络媒体中。所以这在很大程度上取决于所涉及的硬件技术。您的问题表明您指的是以太网，但尚不清楚该链接是仅以太网还是其他东西（ATM，ADSL，...），以及其他一些网络技术是否也是一种选择。它也很大程度上取决于地理距离。

**编辑：**
我对这个问题的硬件方面有点忘乎所以。在应用程序设计级别提供至少一个有形的方面：看看像[(2)这样的](http://linux.die.net/man/2/sendfile)[零拷贝](https://en.wikipedia.org/wiki/Zero-copy)网络操作。它们可用于消除一种可能的延迟原因，尽管仅在原始数据来自应用程序内存以外的某个来源的情况下。[`sendfile`](http://linux.die.net/man/2/sendfile)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-11T13:53:34.910

作为我的日常工作，我在某家证券交易所工作。下面的答案是我自己对我们为这种高吞吐量低延迟数据传输提供的软件解决方案的看法。它无意以任何方式被视为营销宣传（请我是开发人员。）这只是为了提供这种快速数据的解决方案中软件堆栈的基本组件（数据可能是库存/交易市场数据或一般任何数据）：-

1] 物理层 - 基于 TCP-UDP/IP 的以太网网络的网络接口卡，或称为[Infiniband](http://en.wikipedia.org/wiki/InfiniBand)主机通道适配器的非常快速/高带宽的接口。对于 IP/以太网软件堆栈，它是操作系统的一部分。对于 Infiniband，卡制造商（英特尔、Mellanox）提供了他们的驱动程序、固件和 API 库，必须针对这些库实施套接字代码（甚至 infiniband 也使用自己的“socketish”协议在 2 个节点之间进行网络通信。

2] 我们拥有的物理层之上的下一层是[中间件](http://en.wikipedia.org/wiki/Message_oriented_middleware)，它基本上抽象了较低的网络协议细节，为从物理层到应用层的数据 I/O 提供某种接口。该层还提供某种网络数据质量保证（IF 使用 tCP）

3] 最后一层是我们在中间件之上提供的应用程序。任何从我们这里得到 1] 和 2] 的人，都可以开发一种低延迟/高吞吐量的“网络数据传输”类应用程序，用于股票交易、算法交易类操作系统应用程序，使用编程语言接口 - C、C++、爪哇，C#。

基本上，像您这样的客户可以使用我们提供的 API 在 C、C++ 中开发自己的应用程序，这将负责与 NIC 或 HCA（即实际的物理网络接口）进行交互，以快速、非常快速地发送和接收数据。

我们有一个全面的解决方案，可以满足客户对不同质量和延迟的需求——有些需要微秒级的延迟是可以的，但他们需要高质量的数据/很少的错误；有些可以容忍一些错误，但需要纳秒延迟，有些需要微秒延迟，不能容忍错误，...

如果您需要/或对这种解决方案有任何兴趣，请通过我在 SO 中提到的联系人联系我离线。

# mysql - 使用 REGEX 和 or 运算符的 mySQL 查询有什么问题？

> ID：11890157
> 
> 赞同：0
> 
> 时间：2012-08-09T18:59:31.453
> 
> 标签：mysql, regex

我有一个脚本，它通过从数据库中获取类别和关键字来生成类似这样的查询。然而，看起来语法有问题。这里首先是代码：

```
UPDATE `mrhowtos_main`.`eng-jap` SET `category` = 'travel' WHERE `eng` REGEXP 'abroad|country|sight seeing|foreign|plane|train|bus' and where `category` REGEXP 'misc|none'; 
```

这是mySQL返回的错误：

# 1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以`category`在第 1 行的 'where REGEXP 'misc|none''附近使用正确的语法

我已经看了很长时间，但似乎仍然看不出它有什么问题。我确定错误不在数据库中的表或列名中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:01:20.993

第二个`where`不应该在那里。尝试：

```
UPDATE `mrhowtos_main`.`eng-jap` SET `category` = 'travel' WHERE `eng` REGEXP 'abroad|country|sight seeing|foreign|plane|train|bus' and `category` REGEXP 'misc|none'; 
```

# .net - 最小化网络图中的交叉线

> ID：11890168
> 
> 赞同：4
> 
> 时间：2012-08-09T18:59:57.123
> 
> 标签：.net, algorithm, user-interface, layout

我正在实现（实际上考虑）一个控件，该控件允许用户从一系列节点中创建一个 web 图表。目的是从软件的另一部分提出的一系列问题中创建一个“流程图”；对于每个问题，选择的答案决定了接下来应该问哪个问题。这有点 FSMish 但比“如果您对问题 Y 回答 X，请回答以下...”形式的问题的线性进展要聪明得多。该图是一个网络，并不保证是一棵树，因为定义该图的用户可能想问几个后续问题，然后返回到“正常”的提问线，因此两个不同的节点可能会“合并”到同一个子节点。然而，

这是问题。我想要一个“排列”按钮（或简单地自动排列）来重新排列节点，以便将必须相互交叉的网络节点连接线的数量降至最低。大多数流程图工具都有这样做的功能，但我的 Google-fu 未能找到这种类型的通用算法。我已将其确定为“交叉数”问题，但似乎没有通用解决方案来找到具有 V 节点和 E 路径的图的最小交叉数，并且任何此类解决方案都是 NP 难的（如果一个特定的子问题可以在单个操作中解决，然后整个问题可以在多项式时间内解决）。最重要的是，我没有找到可以用最小的图形布置图形的详细算法（更不用说“

有什么提示吗？

**编辑：**我给 Sharkos 打勾是因为他的出色参考。然而，假设图有一个明确的起点，是单向的和非圆形的，一个工作算法（可能不是最优的）实际上非常简单。在伪代码中：

```
"
Give all nodes an initial XScore, YScore and LinkScore of 0
Determine the start node (either designated, or the one not linked to by any other)
Set start node's XScore and YScore to 1
Set running YScore = 1
Start recursion
for each path from node
   if node on other end has XScore <= current      
      set other node's XScore to current + 1
   if node on other end has YScore <= running YScore
      set other node's YScore to running YScore
      increment other node's LinkScore
   Recurse with node on other end
   Increment running YScore

Order nodes by XScore, then YScore.

--If the graph happens to be planar, we're done.

--To minimize crossover:

for each XScore
   for each node with that XScore
      if the next node with the same XScore has a higher LinkScore
         swap the two nodes, exchanging YScores 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T20:50:34.853

这是一篇关于该主题的[硕士论文](http://www.dcs.fmph.uniba.sk/diplomovky/obhajene/getfile.php/dipl.pdf?id=137&fid=223&type=application/pdf)，其中给出了一些带有讨论的算法，并参考了许多不同的人的方法，从精确算法到近似算法。

然而，对于“平面化方法”的一个相当简单、具体的伪代码版本，显然（不是专家，尽管我研究过图论并且听起来似乎很有用）一个常见的近似值，请参阅[图手册](http://www.cs.brown.edu/~rt/gdhandbook/)[本章](http://www.cs.brown.edu/~rt/gdhandbook/chapters/crossings.pdf)中的第 2.5 节[绘图和可视化](http://www.cs.brown.edu/~rt/gdhandbook/)，可在线免费获得。

希望那是你想要的那种东西？

# css - 如何只选择这个类？

> ID：11890170
> 
> 赞同：1
> 
> 时间：2012-08-09T18:59:59.197
> 
> 标签：css, css-selectors

我如何只选择`.media`不是班级孩子的`.slideshow`班级？

```
<article>
    <div class="entry"></div>
    <figure class="media"></figure>
</article>

<article>
    <div class="slideshow">
        <div class="entry"></div>
        <figure class="media"></figure>
    </div>
</article> 
```

显然我可以`.slideshow .media`针对第二个目标，但我将如何针对第一个目标呢？

注意：这些块中的每一个都有多个，因此仅执行诸如`article:first-chlid`选择第一个实例之类的操作是行不通的。

多个块的示例...

```
<article>
    <div class="entry"></div>
    <figure class="media"></figure>
</article>

<article>
    <div class="entry"></div>
    <figure class="media"></figure>
</article>

<article>
    <div class="entry"></div>
    <figure class="media"></figure>
</article>

<article>
    <div class="slideshow">
        <div class="entry"></div>
        <figure class="media"></figure>
    </div>
</article>

<article>
    <div class="entry"></div>
    <figure class="media"></figure>
</article>

<article>
    <div class="slideshow">
        <div class="entry"></div>
        <figure class="media"></figure>
    </div>
</article> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T19:02:51.427

你可以只使用两个类...

```
.media{
  /* styles here */
  padding:10px;
}
.slideshow .media{
  /* styles here */
  padding:20px;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T19:02:52.980

它们并不意味着完全相同的东西，所以我会在该`class=media`部分添加第二个类，以便您可以单独定位它

```
<article>
    <div class="entry"></div>
    <figure class="media"></figure>
</article>

<article>
    <div class="slideshow">
        <div class="entry"></div>
        <figure class="media another-class"></figure>
    </div>
</article> 
```

**CSS**

```
.media.another-class {...} 
```

您还可以使用直接子选择器

```
article > .media 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T19:11:32.880

试试这个：

```
:not(.slideshow)>.media{
  //code here
} 
```

示例：http:
[//jsfiddle.net/kLyDF/](http://jsfiddle.net/kLyDF/)

信息：
[http ://www.w3schools.com/cssref/sel_not.asp](http://www.w3schools.com/cssref/sel_not.asp)

# mysql - MySQL检查字段中是否有数字

> ID：11890173
> 
> 赞同：0
> 
> 时间：2012-08-09T19:00:12.343
> 
> 标签：mysql, select, comparison

我希望在 MySQL 中做一个简单的比较测试，我有一个存储 ID 的字段，如下所示：

```
1;2;23;12 
```

或者，如果在创建该条目时只选择了一个选项，则它只会是一个：

```
2 
```

无论如何，我希望过滤我的选择查询以查找数据库中具有例如 ID 2 的条目。因此，我需要某种比较来将该 id 2 与该列与这些值和可能的单个值进行比较。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T19:03:06.687

您正在寻找[find_in_set](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_find-in-set)功能：

```
Select 
   *
from 
   your_table
where 
   FIND_IN_SET('2',REPLACE( '1;2;23;12', ';' , ',' ) ) > 0 
```

我建议您规范化数据库（请参阅：[http](http://en.wikipedia.org/wiki/First_normal_form) ://en.wikipedia.org/wiki/First_normal_form ）另外，请注意这种查询没有高性能。

# c# - 在检查时访问多个 CheckedItem

> ID：11890175
> 
> 赞同：-1
> 
> 时间：2012-08-09T19:00:14.457
> 
> 标签：c#, checkedlistbox, checkeditems

我正在尝试根据选中列表框中的选定标签过滤文档——它填充了我的*标签*类的对象——但无法访问这些项目以进行搜索。我尝试了几种变体，但我现在使用的方法是：

```
private void chlbTags_ItemCheck(object sender, ItemCheckEventArgs e)
    {
        List<Tag> chosenTags = new List<Tag>();
        foreach (object item in chlbTags.CheckedItems)
        {
            chosenTags.Add((Tag)item);
        }
        fillDocs(tags: chosenTags);
    } 
```

我知道这可能很简单，但我在搜索时似乎发现的一切似乎都与取回字符串有关。

编辑：无论检查多少标签，*selectedTags始终为空。*

编辑2：感谢@Jony 该死的......这已经部分排序了。但是现在我不能检查多个标签而不抛出 InvalidCastException。

编辑 3：如何填充选中的列表框。

```
public static List<Tag> fillUsed(List<int> docIds = null)
    {
        List<Tag> used;
        if (docIds == null)
        {
            used = (from t in frmFocus._context.Tags
                    where t.AllocateDocumentTags.Count > 0
                    select t).ToList();                
        }
        else
        {
            used = (from id in docIds
                    join adt in frmFocus._context.AllocateDocumentTags on 
                             id equals adt.documentId
                    join t in _tags on adt.tagId equals t.id
                    select t).ToList();

        }
        return used;
    } 
```

任何帮助表示赞赏，谢谢。

这部分有效

```
public void fillDocs(List<Tag> tags = null)
{ 
   lvDownload.Items.Clear(); 
   if (tags != null) 
   { 
      docs = docManagement.fillUp(tags: tags);
   } 
   else
   { 
      docs = docManagement.fillUp(); 
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:09:06.627

您发布的代码应该会因*NullReferenceException*而失败。你应该替换`List<Tag> chosenTags = null;`它`List<Tag> chosenTags = new List<Tag>();`
应该没问题...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T19:14:51.580

就像 Jony 所说，这段代码将失败，你必须做的不仅仅是将 null 分配给对象。你需要做他们所谓的“NEWING”对象，意思是关键词**new**

我正在尝试根据选中列表框中的选定标签过滤文档——它填充了我的标签类的对象——但无法访问这些项目以进行搜索。我尝试了几种变体，但我现在使用的方法是：如果你改变它，这将起作用。

```
private void chlbTags_ItemCheck(object sender, ItemCheckEventArgs e)
{
   List<Tag> chosenTags = new List<Tag>();
   foreach (object item in chlbTags.CheckedItems)
   {
      Tag tag = (Tag) item.Tag;
      chosenTags.Add(tag);  
     -- your code chosenTags.Add((Tag)item);
   }
   fillDocs(tags: chosenTags);
} 
```

必须通过获取字符串属性来完成转换 // checkBox is CheckBox string s = checkBox.Tag.ToString(); 如果您愿意，您也可以使用类似的东西来测试单个或多个项目

# php - jQuery AJAX 上传系统 IE 问题

> ID：11890178
> 
> 赞同：1
> 
> 时间：2012-08-09T19:00:22.240
> 
> 标签：php, javascript, jquery, ajax, internet-explorer

我有问题`Internet Explorer`

这是一个带有 AJAX 和 jQuery 的脚本示例，在其他浏览器中运行良好，但在其他浏览器中`IE`却不行

索引.html

```
<form enctype="multipart/form-data" method="post">
    <input name="file" type="file" multiple="true" id="file" />
    <input type="button" value="Upload" /> or clic "U"
</form> 
```

ajax.js

```
$(':button').click(function(){
    var formData = new FormData($('form')[0]);
    $("#data").html(formData);
    $.ajax({
        url: 'upload.php',  //server script to process data
        type: 'POST',
        xhr: function() {  // custom xhr
            myXhr = $.ajaxSettings.xhr();
            if(myXhr.upload){ // check if upload property exists
                myXhr.upload.addEventListener('progress',progressHandlingFunction, false); // for handling the progress of the upload
            }
            return myXhr;
        },
        //Ajax events
        //beforeSend: beforeSendHandler,
        success: function(html) {
            $("#php").html(html);
            $("#file").val('');
        },
        error:function(html) {
            $("#php").html(html);
        },
        enctype: 'multipart/form-data',
        // Form data
        data: formData,
        //Options to tell JQuery not to process data or worry about content-type
        cache: false,
        contentType: false,
        processData: false
    });
}); 
```

`Opera`在其他浏览器中工作正常，但在`IE`它不工作。

这是 CONSOLE( `F12`) 错误`IE`

```
SCRIPT5009: 'FormData' is undefined 
ajax.js, line 53 character 9 
```

我应该怎么做才能解决问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:29:04.710

> SCRIPT5009：'FormData' 未定义 ajax.js，第 53 行字符 9 这是代码

假设您的错误在这里，请将您的方法移到`FormData`上面发布的代码之上。

例子：

```
function FormData (form) {
   ....
}

$(':button').click(function(){
    var formData = new FormData($('form')[0]);
    $("#data").html(formData);
    $.ajax({
        url: 'upload.php',  //server script to process data
        type: 'POST'... 
```

**编辑**

显然，`FormData`在 IE 中不支持。但是，您可以`serialize`像这样使用 jQuery：

```
var formData = $('form').serialize(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-06T02:04:35.107

FormData 类仅适用于 html 5，最新版本的浏览器支持 html5。

问题是对于 IE，即使是最新的也有一些通过 ajax 上传多个文件的安全问题，但你可以上传一个文件。

如果您坚持使用 ajax 上传，最好使用 iframe 或 flash 对象在旧浏览器中上传

# iphone - Facebook iOS SDK 示例代码无法编译

> ID：11890183
> 
> 赞同：1
> 
> 时间：2012-08-09T19:00:56.767
> 
> 标签：iphone, facebook, facebook-ios-sdk

[我从https://github.com/facebook/facebook-ios-sdk](https://github.com/facebook/facebook-ios-sdk)下载了代码

但是没有一个示例项目在 Xcode 中编译。我已阅读 readme.txt 并没有帮助。

错误是：找不到“FacebookSDK/FacebookSDK.h”文件

没有名为 FacebookSDK 的文件夹，它实际上称为 src。当我将代码更改为 src 时，新错误是：ld: framework not found FacebookSDK clang: error: linker command failed with exit code 1 (use -v to see invocation)

任何人都可以下载代码并让示例工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T19:35:59.257

在发现应该下载和安装一个不那么明显的文件之前，我为同样的问题苦苦挣扎了一段时间（而不是只获取 ZIP 文件及其内容）。该文件名为 FacebookSDK-3.0.pkg，我在以下位置找到它：

[http://www.google.com/url?sa=t&rct=j&q=facebooksdk-3.0.pkg&source=web&cd=1&ved=0CEgQFjAA&url=https%3A%2F%2Fgithub.com%2Fdownloads%2Ffacebook%2Ffacebook-ios-sdk% 2FFacebookSDK-3.0.pkg&ei=Mg8kULzOLofgiALg14DwDQ&usg=AFQjCNF0i0Vkq_cPsOvfrs5nb_IOUR6XhA&sig2=kERJcdvR7UgAB6mr-RUi6w](http://www.google.com/url?sa=t&rct=j&q=facebooksdk-3.0.pkg&source=web&cd=1&ved=0CEgQFjAA&url=https%3A%2F%2Fgithub.com%2Fdownloads%2Ffacebook%2Ffacebook-ios-sdk%2FFacebookSDK-3.0.pkg&ei=Mg8kULzOLofgiALg14DwDQ&usg=AFQjCNF0i0Vkq_cPsOvfrs5nb_IOUR6XhA&sig2=kERJcdvR7UgAB6mr-RUi6w)

（搜索文件名时提供的第一个链接）我安装了它，示例现在工作正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T20:06:09.537

[适用于 iOS 的 Facebook SDK 3.0 及示例](https://github.com/downloads/facebook/facebook-ios-sdk/FacebookSDK-3.0.pkg)

更多详情[https://developers.facebook.com/ios/](https://developers.facebook.com/ios/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-16T15:37:29.397

如果将包安装到 ~/Documents 以外的其他位置，则需要更改示例项目的框架搜索路径。

当您在 XCode 中打开项目时，单击项目信息（例如，文件浏览器中的蓝色“HelloFacebookSample”。

1.  转到构建设置选项卡。
2.  在“搜索路径”部分下，找到“框架搜索路径”。
3.  双击该值，您将看到如下条目：

    ```
    $(SRCROOT/../../../../Documents/FacebookSDK 
    ```

4.  双击*该*值并将其更改为指向您放置 SDK 的目标文件夹。

就我而言，我安装了 SDK，`/Dropbox/SDKs/FacebookSDK`因此我将值更改为

```
$(SRCROOT/../../../../SDKs/FacebookSDK 
```

（这 4 个`../`是因为它与 HelloFacebookSample 项目相关）

# javascript - 我将此代码移动到一个单独的函数中，它停止工作，为什么？

> ID：11890186
> 
> 赞同：0
> 
> 时间：2012-08-09T19:01:07.607
> 
> 标签：javascript

这是我的代码的摘录。您可以忽略其中的大部分内容：需要关注的是 refreshDimensions 方法、zoomTo 内部对所述方法的调用以及调用之后的代码块。

```
function refreshDimensions(node) {
    _("refreshdimensions");
    t = $("#contents");
    var other = $(selectednode).parent().parent(":not(#contents)");
    if(!other.length) {
    other = selectednode || zoomednode || start;
    t.width("100%");
    } else {
    t.width("100%");
    t.width((t.width() + other.position().left));
    }
    t.height($(other).position().top);

    /* Begin animating */

    t.animate({ fontSize: zoom }, {duration: 0, queue: false });

//    
}

function zoomTo(node, select) {
    var oldzoom, zoomdepth, t;
    oldzoom = zoomednode;
    if($(node)[0] != $(zoomednode)[0]) {
    savedepth = t = zoomdepth = $(node).parents("ul").length;
    if(!zoomednode)
        zoomednode = topChapter;
    $(zoomednode).toggleClass("zoomednode", false);
    if(!node)
        node = topChapter;
    /* capture values */
    var sz;
    var capp = cBaseSz.slice((zoom = zoomnum = sz = parseFloat(cBaseSz)+"").length);
    /* end capture */
    while(--t > 0) {
            zoomnum = (zoom *= 1.15);
    }
    zoom  += capp;
    zoomdepth -= $(zoomednode).parents("ul").length;
    if(zoomdepth < 0)
        zoomdepth *= -1;
    zoomednode = node;
    zoomednode.toggleClass("zoomednode", true);
    switch(select) {
    case 0:
    case false:
    default:
        break;
    case true:
    case 1:
        toggleNode(selectednode, false);
        toggleNode(node, true);
        break;
    case 2:
        toggleNode(zoomednode, false);
            zoomednode = 0;
    }

    /* Handle showing/hiding */

    //////////////////////////////
    //
    var showzoom = 1, showselect = 1, showidea = 1, seldepth, zdepth, showlist, hidelist = {};
    /* This is the 'brute force' way of doing it, horribly inefficient */
    if(zoomednode)
        zdepth = $(zoomednode).parents(".chapter").length;
    if(selectednode)
        seldepth = $(selectednode).parents(".chapter").length;
    else
        seldepth = zdepth;
    if(!seldepth)
        seldepth = zdepth = 0;
    showlist=$(".chapter, .idea").filter( function() {
        if($(this).parents("li").length < (zdepth+showzoom))
        return true;
        else {
        hidelist = $(hidelist).add(this);
        return false;
        }
    });

    $(showlist).show()/*.not(hidelist)*/;
    if(hidelist && hidelist.length) {
        $(hidelist).hide();
    }
    /* End showing/hiding */

    refreshDimensions(node);

    if(node) {
        _("top: " + $(zoomednode).position().top);
        $("html,body").stop().animate(
        { scrollTop: $(zoomednode).position().top - topAdjust }, {duration: 60+60*zoomdepth, queue: false }, 0);
    }

    }
    else {
    var dest;
    if($(zoomednode).parents(".chapter").length > 1)
        dest = $(zoomednode).parent().parent().prevAll(".chapter:first .chapterheading:first");
    else {
    //    if($(zoomednode)[0] != $("#contents")[0]) {
        toggleNode(selectednode, false);
        dest = $("#contents");
    //    } else
    //  dest = $(start);
    }
    zoomTo(dest, 0);
    }
} 
```

所以我的问题是，当我在调用 refreshDimensions （以 'if(node) {' 开头的块）之后将代码位移动到 refreshDimensions （最后）中时，所需的效果停止工作。我已将该行使用的所有变量转储到控制台中，并且它们在两个实例中都是一致的，但是当我将代码移动到 refreshDimensions 时，我的页面被“困”在屏幕顶部并且根本不会滚动。这真的让我很难过，因为一切都表明它应该完全一样......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T06:10:38.707

原来这是因为'zoomdepth'应该是一个全局变量而不是局部变量。

# jquery-mobile - 使jquery移动更快的可能方法？

> ID：11890190
> 
> 赞同：0
> 
> 时间：2012-08-09T19:01:34.267
> 
> 标签：jquery-mobile

我正在使用 jquery mobile 开发移动网页，它似乎具有几乎所有必需的功能，但我发现它非常慢。特别是，在过渡期间，整个性能是不可接受的。由于我没有更改有关 jquery mobile 的任何配置，有没有办法让它更快？

我正在 iis 8.0 + asp.net MVC 4.0 剃须刀、jquery mobile 1.0 上进行测试

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:07:51.257

尝试在后端使用 Microsoft 的任务并行库来划分控制器需要执行的工作。并行运行将使其更快。另外，尝试从 JQM 中删除所有转换。它不那么性感，但会在页面转换时提供更多响应。

```
$(document).bind("mobileinit", function() {
      //Set your global init settings here
      //This is the setting you are looking for!      
      $.mobile.defaultPageTransition = 'none';

      //I personally use some other settings, such as:
      $.mobile.page.prototype.options.addBackBtn = true;
      $.mobile.useFastClick  = false;
} 
```

# jquery - 如何让 jquery-tools tabs-accordion 扩展到页面底部？

> ID：11890195
> 
> 赞同：1
> 
> 时间：2012-08-09T19:01:54.067
> 
> 标签：jquery, css, jquery-tools

我目前正在使用 jquery-tools 构建一个 ui，但我遇到了一个问题，即手风琴只能扩展到它需要的范围内。有什么办法可以让标签一直延伸到容器下方？我需要这样的东西：

```
+------------------------------------------+ (container)
|tab (open)                                |
|                                          |
|                                          |
|                                          |
|                                          |
|                                          |
|                                          |
|                                          |
|                                          |
|(end of content)                          |
|                                          |
|                                          |
|                                          |
|                                          |
|                                          |
|(tab)                                     |
|(tab)                                     |
|(tab)                                     |
+------------------------------------------+ 
```

我尝试将容器高度设置为 100%，将选项卡高度设置为 100%，但是选项卡的数量不是恒定的（将根据用户而变化）。有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:24:50.770

这在[jQuery UI 文档中得到了准确的解释](http://jqueryui.com/demos/accordion/#fillspace)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:04:01.820

`autoHeight: false`在手风琴选项中设置。这应该允许您使用 css 等设置自己的高度。

# javascript - 检查/访问 QML 中动态创建的对象

> ID：11890196
> 
> 赞同：4
> 
> 时间：2012-08-09T19:01:55.263
> 
> 标签：javascript, c++, qt, qt4, qml

有没有办法检查存在和访问 QML/javascript 中动态创建的对象（不使用 C++）？

我正在尝试创建一个具有类似于地图的界面的应用程序 - 给定一个键和一个对象，我的应用程序必须找到具有该键的对象是否存在并用新对象覆盖。如果没有，应用程序必须创建一个新对象并与密钥关联。

文档说动态管理的对象没有 ID，我发现访问它们的唯一方法是使用 objectName，这似乎需要 C++ 应用程序。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T11:35:03.283

您可以将 JavaScript 对象用作地图。您不能在 QML 中直接操作它，但您可以将处理此对象的所有代码移动到 JavaScript 文件中并将其作为模块包含在内。这是一个简单的例子：

地图.js：

```
var _map = new Object()

function value(key) {
    return _map[key]
}

function setValue(key, value) {
    _map[key] = value
}

function remove(key) {
    delete _map[key]
}

function keys() {
    return Object.keys(_map)
}

function process() {
    for (var key in _map) {
        /* do something */
    }
} 
```

QML 示例：

```
import QtQuick 1.1
import "Map.js" as Map

Item {
    Component.onCompleted: {
        Map.setValue("test", "hello")
        console.log("test = ", Map.value("test"))
        Map.remove("test", "hello")
        console.log("test = ", Map.value("test"))
    }
} 
```

输出将是：

```
test =  hello
test =  undefined 
```

# vim - 为没有扩展名的文件设置 vim 文件类型，仅

> ID：11890203
> 
> 赞同：5
> 
> 时间：2012-08-09T19:02:33.153
> 
> 标签：vim

如何为 vim 中没有扩展名的文件设置文件类型和/或语法？

**笔记**

[这是没有扩展名的文件](https://stackoverflow.com/q/2666551/1000282)的 vim 默认语法的副本。我再次问，因为在我看来没有人正确回答。

我不想知道如何为无法识别的文件类型设置默认语法，我想知道如何仅为无扩展名文件设置它。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-09T19:15:30.187

您可以创建一个自动命令来检查文件名是否包含 a `.`，如果不是，则切换到给定的语法：

```
autocmd BufNewFile,BufRead * if expand('%:t') !~ '\.' | set syntax=perl | endif 
```

这个选择`perl`作为默认语法，但您可以简单地使用合适的语法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-09T19:17:52.747

`:help ftdetect`将显示 vim 文档中有关如何编写文件类型检测脚本的部分。

这是我对这种情况的建议：

创建一个`~/.vim/ftdetect`以您的文件类型命名的文件，例如`myfiletype.vim`.

在这个文件中放

```
au BufRead,BufNewFile * if expand('<afile>:e') == '' | set ft=myfiletype | end 
```

这将导致 vim 将没有任何扩展名的文件的文件类型设置为`myfiletype`. 如果您希望仅在未检测到其他文件类型时使用它，请`setfiletype myfiletype`使用`set ft=myfiletype`.

然后创建语法文件`~/.vim/syntax/myfiletype.vim`。这只是一个普通的 vim 语法定义文件，没什么特别的。如果您不想创建自己的文件类型，只需在自动命令中使用普通文件类型而不是 myfiletype。例如

```
au BufRead,BufNewFile * if expand('<afile>:e') == '' | set ft=html | end 
```

将设置将加载 html 语法文件的 html 文件类型。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T19:15:18.283

```
1) Hit escape to make sure you're in normal mode
2) Type ":set syntax=java" (or equivalent language)
3) :set filetype=FILETYPE, where FILETYPE is the filetype. 
```

如果您希望自动执行此操作，请尝试使用上一个答案中的解决方案：

```
autocmd BufNewFile,BufRead * if expand('%:t') !~ '\.' | set syntax=perl | endif 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-16T01:15:35.607

最后，我为我的 C++ 配置选择了这个：

```
let s:reserved = '^NERD_tree\|^GoToFile$'
au BufNewFile,BufRead *
\ if expand('%:e') =~ '^\(h\|hh\|hxx\|hpp\|ii\|ixx\|ipp\|inl\|txx\|tpp\|tpl\|cc\|cxx\|cpp\)$' ||
\    expand('%:t') !~ '\.\|'.s:reserved && expand('%:t') =~ '[a-z]'                            |
\   if &ft != 'cpp'                                                                            |
\     set ft=cpp                                                                               |
\   endif                                                                                      |
\   set syntax=cpp11                                                                           |
\   call CSyntaxAfter()                                                                        |
\ endif 
```

而不是只检查`.`尾部的缺失。这避免了从 CommandT 和NERD 树设置几个非 cpp 文件，如`COMMIT_EDITMSG`, 。`README``GoToFile``NERD_tree*`

**编辑**

我只是放弃了这个想法。

# ios - iOS - 具有透明度的 presentViewController

> ID：11890205
> 
> 赞同：5
> 
> 时间：2012-08-09T19:02:47.363
> 
> 标签：ios, uiviewcontroller

我想以半透明的方式全屏显示视图控制器，以便我仍然可以看到它下面的视图。以下代码展示了新的视图控制器，但它替换了当前的。保持原始视图控制器可见的最佳方法是什么？新视图控制器的视图将具有半透明的黑色背景。

```
NewViewController* newVC = [[NSClassFromString(@"NewViewController") alloc] initWithNibName:deviceNib bundle:nil];
newVC.modalPresentationStyle = UIModalPresentationFullScreen;
newVC.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;

[self presentViewController:newVC animated:YES completion:NULL]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T20:17:28.607

呈现一个半透明的视图，而不是视图控制器。

```
mySemiTransparentView.alpha = 0.0f;
[self.view addSubview:mySemiTransparentView]; 
```

mySemiTransparentView 是您的全屏视图。您可以将其设置为动画：

```
[UIView beginAnimations:@"fadeIn" context:nil];
[UIView setAnimationCurve:UIViewAnimationCurveEaseIn];
[UIView setAnimationDuration:0.4f];
mySemiTransparentView.alpha = 0.5f;
[UIView commitAnimations]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-18T06:12:59.293

您可以通过以下方式呈现半透明模态控制器：

```
NewViewController* newVC = [[NSClassFromString(@"NewViewController") alloc] initWithNibName:deviceNib bundle:nil];

self.modalPresentationStyle = UIModalPresentationCurrentContext;
newVC.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;

[self presentViewController:newVC animated:YES completion:NULL]; 
```

请注意，您必须将常量*UIModalPresentationCurrentContext*设置为**self** .modalPresentationStyle，而不是**newVC** .modalPresentationStyle

此外，当您使用*UIModalTransitionStyleCrossDissolve时，* *newVC.view*的 alpha将在过渡期间被覆盖，因此如果您想要半透明背景，您需要保持*newVC.view*的*backgroundColor*清晰，只需添加另一个 UIView 作为它的子视图半透明*背景颜色*

# unit-testing - 为什么 JsTestDriver 会创建第二个浏览器实例？

> ID：11890206
> 
> 赞同：2
> 
> 时间：2012-08-09T19:02:49.387
> 
> 标签：unit-testing, testing, automation, jasmine, js-test-driver

我打开 FireFox 并转到捕获 URL（默认为 localhost:9876/capture）。

然后我通过 jstestdriver 运行我的 jasmine 测试。

输出说：

```
setting runnermode QUIET
Firefox: Reset
Firefox: Reset
...
Total 3 tests (Passed: 3; Fails: 0; Errors: 0) (3.00 ms)
  Firefox 14.0.1 Linux: Run 3 tests (Passed: 3; Fails: 0; Errors 0) (3.00 ms) 
```

即使在运行测试之前，如果我在 Firefox 上单击“关闭”，jstestdriver 注册为已关闭一个实例，但我仍然看到浏览器打开。打开捕获和/或服务器后，似乎有两个 Firefox 实例正在运行。

任何想法为什么会发生？

# javascript - highcharts：问题

> ID：11890211
> 
> 赞同：0
> 
> 时间：2012-08-09T19:03:08.773
> 
> 标签：javascript, arrays, ruby-on-rails-3, highcharts

我正在制作一个带有 highcharts 的应用程序，在遇到很多问题后，我终于绘制了图表，但现在获取了正确的数据，但我需要进行一些调整。

例如，如果用户在同一天注册了一个新日志，它应该获取日志的成本并将其添加到同一天的日志中，或者简单地显示是否没有更多日志，我按照[railcast 第 223 集](http://railscasts.com/episodes/223-charts?view=asciicast)和帮助我一点. 但我的问题是：当我添加一个新日志时，它会创建一个新栏：（只有 2 个日志，我要创建一个新日志） ![在此处输入图像描述](../Images/82a4f451860ad8dbcce7229a389baaad.png) 这是我的应用程序所做的。 ![在此处输入图像描述](../Images/5c50708bc1ed0460766251bc9ccb8ba4.png)

我还需要修复日期时间，这是我的代码：

```
 $(function () {
      new Highcharts.Chart({
        chart: { renderTo: 'foo_chart',defaultSeriesType: 'column' },
        title: { text: 'tanking costs daily' },
        xAxis: { type: 'datetime' },
        yAxis: {
          title: { text: 'cost' }
        },
        tooltip: {
          formatter: function () {
            return Highcharts.dateFormat("%B %e %Y", this.x) + ': ' + '$' + Highcharts.numberFormat(this.y, 2);
          }
        },
        series: [{
          name: 'Days',
          pointInterval: <%= 1.day * 1000 %>, 
          pointStart: <%= 1.weeks.ago.at_midnight.to_i * 1000 %>,
          data:[
            <% for tankinglog in @tankinglog  %>
              <%= "(" + tankinglog.cost.to_f.round(2).to_s + "),"%>
            <% end %>
          ]
        }]
      });
    }); 
```

如果您看到图片上的列表，我有 3 个日志...最后 2 个日志具有相同的日期，它们必须与它们的成本总和出现在同一个栏中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:08:58.413

你的问题非常令人困惑。您希望将所有数据汇总到一个条中吗？为列表中的每个号码创建一个新栏`data`。因此，您的 for-each 循环正在为`@tankinglog`. 解决方案是将所需内容汇总为一个数字，然后将其添加到列表中。

我不确定您到底在问什么，因为您的问题很糟糕，但这里所有的值都汇总到一个栏中。

```
$(function () {
  new Highcharts.Chart({
    chart: { renderTo: 'foo_chart',defaultSeriesType: 'column' },
    title: { text: 'tanking costs daily' },
    xAxis: { type: 'datetime' },
    yAxis: {
      title: { text: 'cost' }
    },
    tooltip: {
      formatter: function () {
        return Highcharts.dateFormat("%B %e %Y", this.x) + ': ' + '$' + Highcharts.numberFormat(this.y, 2);
      }
    },
    series: [{
      name: 'Days',
      pointInterval: <%= 1.day * 1000 %>, 
      pointStart: <%= 1.weeks.ago.at_midnight.to_i * 1000 %>,
      data:[
        <% 
        result = 0;
        for tankinglog in @tankinglog 
            result += tankinglog.cost.to_f
        end %>
        <%= result.round(2).to_s %>
      ]
    }]
  });
}); 
```

# vb.net - 如何在文本框中找到指定的行

> ID：11890216
> 
> 赞同：0
> 
> 时间：2012-08-09T19:03:27.733
> 
> 标签：vb.net, textbox

如何在文本框中获取指定的行并从字符串中获取该行的文本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T19:22:33.930

```
Dim lines As String() = testing.Text.Split(Environment.NewLine) 
```

然后像这样访问这些行

```
lines(0) // would be first line 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:18:13.867

您需要根据行分隔符将文本框文本拆分为字符串数组，然后，如果您有足够的行，则从数组中获取行：

```
 Dim asLines As String()
    Dim wLineToGet As Integer = 2
    asLines = TextBox1.Text.Split(New String() {Environment.NewLine}, StringSplitOptions.None)
    If asLines IsNot Nothing AndAlso asLines.Length >= wLineToGet Then
        MessageBox.Show("Line " & wLineToGet & " = " & asLines(wLineToGet - 1))
    Else
        MessageBox.Show("There are not enough lines in the textbox to retrieve line " & wLineToGet)
    End If 
```

# java - Java 类变量等于相同的值

> ID：11890217
> 
> 赞同：1
> 
> 时间：2012-08-09T19:03:27.910
> 
> 标签：java, class, variables

我正在准备认证考试，但我不明白这段代码：

主要的：

```
public class TestStudent {
    public static void main(String[] args) {
        Student bob = new Student();
        Student jian = new Student();
        bob.name = "Bob";
        bob.age = 19;
        jian = bob;
        jian.name = "Jian";
        System.out.println("Bob's Name: " + bob.name);
    }
} 
```

班级：

```
public class Student {
    public String name = "";
    public int age = 0;
    public String major = "Undeclared";
} 
```

为什么这个输出“鲍勃的名字：简”？

Bob.name 从未设置为 Jian。显然一定是因为“jian = bob;” 但我认为这只会将 jian 变量设置为与 bob 相同。这个概念叫什么，它在 java 教程中的解释是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T19:05:57.313

Java 中的赋值不复制对象，它们复制引用。在这个任务之后

```
jian = bob; 
```

your`jian`不再指向`Student`您已分配和分配给的对象 `jian`，它与 相同，为同一对象`bob`创建*别名。*原件`jian`现在已经无法挽回地丢失，有资格进行垃圾收集。

下面的赋值

```
 jian.name = "Jian"; 
```

通过其别名覆盖`bob`变量中的名称`jian`，从而导致您看到的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T19:06:27.580

看代码`"jian = bob;" 您更改了 bob 对象的引用并将其设置为 jian。
然后设置 jian.name = "Jian" 也改变了 bob 对象

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T19:06:21.340

现在您的`jian`对象引用指向与对象引用相同的内存部分`bob`，因此如果您更改其中一个 - 它会影响它们两个，因为现在它们是同一个对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T19:08:07.963

那是因为`bob`and `jian`（就像 java 中的所有非原始变量一样）是引用（指向对象的指针）而不是对象。因此，当您说时`jian = bob;`，这与 .`jian`指向同一个对象`bob`。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-09T19:17:47.817

这是 Java 中的一个基本概念：所有*对象变量*（即表示 Java 类实例的对象）`bob`都是*引用*。这个概念在诸如 C 之类的语言中也被称为*指针。*`jian`

 **这意味着您的变量`bob`在概念上并不保存`name`,`age`和`major`字段的值，而是*指向*内存中保存数据的位置。因此，当您对对象引用变量使用赋值运算符（即`=`符号）时，您只是在更改该变量指向的内存部分。所以这一行：

```
bob = jian 
```

意味着该变量`bob`现在与 引用*相同*的内存区域`jian`，并且您在其中所做的任何事情都会反映在另一个中。

这就留下了一个有趣的问题，即保存 Bob 数据的内存区域发生了什么。由于我们不再拥有对它的引用，因此我们不再可能获取它，即使它仍然存在于内存中的某个位置（尽管 Java 很快会注意到并清除它 - 称为*垃圾收集*）。

无论如何，这种概念最好用图表来表达，所以我建议查看[官方 Java 文档](http://docs.oracle.com/javase/tutorial/java/javaOO/objectcreation.html)或[本教程](http://www.learn-java-tutorial.com/JavaObjects.cfm#References)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-09T19:08:47.197

变量 bob 和 jian 是对象引用。请参阅[http://docs.oracle.com/javase/tutorial/java/javaOO/objectcreation.html](http://docs.oracle.com/javase/tutorial/java/javaOO/objectcreation.html)

本文包含与您类似的示例：http: [//www.informit.com/articles/article.aspx? p=174371&seqNum=4](http://www.informit.com/articles/article.aspx?p=174371&seqNum=4)**

# ios - iOS - 使用标签作为过滤器

> ID：11890222
> 
> 赞同：1
> 
> 时间：2012-08-09T19:03:41.727
> 
> 标签：ios, tabs, uitabbarcontroller

是否可以使用选项卡作为列表视图的过滤器？

我知道您可以通过将新选项卡连接到新视图控制器来添加新选项卡，但理想情况下，我希望使用相同的视图控制器，但根据选择的选项卡显示不同的项目。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:07:07.483

我想你可能想用 a`UISegmentedControl`代替。它看起来有点像标签栏，当然您可以使用它来过滤列表结果。

[http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UISegmentedControl_Class/Reference/UISegmentedControl.html](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UISegmentedControl_Class/Reference/UISegmentedControl.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T19:09:28.823

我不建议为此使用选项卡。如果过滤后的结果要显示在同一个视图控制器中，您可以将分段控制与各种段一起使用。

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/SegmentedControl/Articles/SegmentedControlCode.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/SegmentedControl/Articles/SegmentedControlCode.html)

# iphone - Xcode 分析 69 种潜在的内存泄漏

> ID：11890223
> 
> 赞同：1
> 
> 时间：2012-08-09T19:03:44.533
> 
> 标签：iphone, ios, xcode, cocoa

我正在制作我的第一个应用程序，这真的很令人困惑。

我正在使用 ARC，可能我所有的潜在泄漏都说：“对象泄漏：分配和存储在 'point' 中的对象在此执行路径的后面没有被引用，并且保留计数为 +1”

它们几乎位于我使用 [[alloc] init] 创建的任何对象上。

关于如何处理这些的任何建议？不过，该应用程序运行良好。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:07:18.507

您确定您的项目实际上设置为 ARC 吗？这些类型的分析器警告听起来不像。这是一个自动为您打开 ARC 的新项目，还是您自己进行了转换？

![ARC 项目设置](../Images/12f12a729e1915a436d32536319a64bd.png)

没有办法真正告诉分析器您是 ARC 还是不是。它会自动从设置中选择它。

# c++ - 在线裁判的测试环境

> ID：11890226
> 
> 赞同：0
> 
> 时间：2012-08-09T19:03:55.997
> 
> 标签：c++, c, testing

我计划在 CodeChef、TechGig 等方面建立一个在线评委。最初，我将只接受 C/C++ 中的解决方案。

已经考虑过相同的安全模型，但我现在关心的是如何对执行和测试部分进行建模。

**方法一**

似乎更流行的方法是将标准输入重定向到可执行文件，并将标准输出重定向到文件，例如：

```
./submission.exe < input.txt > output.txt 
```

然后将 output.txt 文件与一些 solution.txt 文件逐个字符进行比较并报告结果。

**方法二**

我看到的第二种方法是不允许用户编写 main()。相反，编写一个以字符串形式接受一些参数并将全局变量设置为输出的函数。例如：

```
//This variable should be set before returning from submissionAlgorithm()
char * output; 

void submissionAlgorithm(char * input1, char * input2)
{
    //Write your code here.
} 
```

在每个步骤中，对于要执行的测试用例，重复调用函数 submitAlgorithm() 并检查输出变量的结果。

形成初步分析，我发现方法 2 不仅是安全的（我会阻止从提交的代码对文件系统的所有读写访问），而且由于测试的计算可以更快地执行测试用例（也许？）结果会出现在内存中。

我想知道是否有任何理由说明为什么方法 1 优于方法 2。

PS：当然，我会在 Linux 服务器上托管在线判断引擎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T19:11:08.470

不要误会，但您需要从更高的角度看待安全性。问题不会是写入文件的输入和输出，也不会对性能产生太大影响。但是您将需要管理实际上可以取消您的进程（在第二种情况下）或整个系统（调用操作系统以写入磁盘，获取太多内存......）的提交

**免责声明**我绝不是安全专家。

# .net - 使用 TFS 管理通用代码组件

> ID：11890229
> 
> 赞同：1
> 
> 时间：2012-08-09T19:04:05.190
> 
> 标签：.net, build, tfs

我正在为我和一个朋友设置[Team Foundation Service 。](https://tfspreview.com/)我们将使用它来创建一些爱好项目。

我已经用一个团队项目设置了它，源代码控制目前的结构是这样的

$\Projects\CommonLib

$\项目\项目1

$\项目\项目2

Project1 是一个游戏，Project2 是一个 win8 应用程序，commonlib 是我们通用的、可重用的代码，Projec1 和 Project2 都将引用它们。每个项目将由一个包含多个项目的解决方案组成。

CommonLib 需要分发到这两个项目中。我最初的想法是将 CommonLib 二进制文件检入源代码控制文件夹并将其分支到其他两个项目，使用某种自定义 Team Build 流程进行部署。

不过有一个问题。像这样工作是相当乏味的，尤其是现在处于开发的早期阶段。我们希望能够快速将代码添加到 CommonLib，虽然当代码库已经成熟并且不会经常修改时，上述过程很好，但每次添加内容时执行所有这些步骤将是一件很麻烦的事情那里（构建->部署->合并）。

在规模的另一端，我们可以为例如 Project1 创建一个开发解决方案，其中还包含 CommonLib 项目。但是，这意味着如果我们错误地导致破坏性更改，我们可能会导致 Project2 出现问题。这可以通过上面描述的分支+合并策略更好地管理

所以我的问题是，我是否遗漏了任何可能使我们能够保留控制权同时仍能够将开发过程的复杂性保持在最低限度的选项？我确定这是一个常见问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T00:17:41.530

如果您不将二进制文件合并到产品空间中会有所帮助吗？

```
$\Projects\CommonLib\1.0\Source
$\Projects\CommonLib\1.0\Bin
$\Projects\CommonLib\Dev\Source
$\Projects\CommonLib\Dev\Bin

$\Projects\Project1

$\Projects\Project2 
```

为 common 设置一个构建，让它将二进制文件检查到 Bin 文件夹中，然后让 Project1 和 Project2 共同引用它们。如您所见，我还在 Common 中添加了 Dev 的 1.0 分支，这样当 Project1 或 Project2 gewt 准备发布时，它们可以将 common dev 分支到版本化文件夹中，并将自己与其他项目更改为 common 隔离开来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T00:38:45.453

即使每个开发人员只对其中一个项目感兴趣，是否有任何理由不能在同一个构建解决方案中拥有两个项目？

由于两个项目都在一个解决方案中，而公共项目在同一个解决方案中，那么无论何时你们中的任何一个对公共模块进行更改，您都会立即知道是否在任何一个依赖项目中破坏了某些东西，因为一切都是构建在一起的。然后，您可以更新因更改公共模块而损坏的依赖代码，或与项目所有者协调以更新该代码。随着项目的成熟，您应该期望看到对公共模块的更改更少。

在一切构建干净并且单元测试通过之前，不要检查您的重大更改。如果您对公共模块进行重大更改，则您有责任修复所有相关代码。这建立了性格，并在不破坏已发布的界面或语义的情况下对核心更改的技能产生了新的认识。;>

显然，这种“包罗万象”的方法不适用于大型开发团队和大量项目。但是，当您与更大的团队合作时，您应该切换到自动构建/共享构建服务器工作流程，在该工作流程中，依赖项目决定它们所依赖的中间体构建，并可以决定何时“汇总”到他们更新的模块版本依赖 - 独立于依赖模块的发布周期。对于两个开发人员和两个具有公共代码的项目，您不需要这种级别的依赖关系管理。

# php - PHP联系表单布局不允许在电子邮件中换行

> ID：11890230
> 
> 赞同：0
> 
> 时间：2012-08-09T19:04:14.537
> 
> 标签：php, email

我有一个包含此代码的联系表

```
$message = "Telephone Number: $telephone"."\n"."Job Details: $message"."\n"."Number of Pages Required: $pages"."\n"."Clients Budget: $budget"; 
```

但是我不能像它应该的那样在电子邮件中换行。我不知道我可能还需要什么其他代码。谢谢你。

atb 阿兰

```
<?php
// Clean up the input values
foreach($_POST as $key => $value) {
if(ini_get('magic_quotes_gpc'))
$_POST[$key] = stripslashes($_POST[$key]);

$_POST[$key] = htmlspecialchars(strip_tags($_POST[$key]));
}

mb_convert_encoding($string, "UTF-8"); //AUTO DETECT AND CONVERT
mb_convert_encoding($string, "UTF-8", "latin1");

// Assign the input values to variables for easy reference
$name = $_POST["name"]; 
$email = $_POST["email"];
$telephone = $_POST["telephone"];
$pages = $_POST["pages"];
$budget = $_POST["budget"];
$message = $_POST["message"];

  // Test input values for errors
$errors = array();
if(strlen($name) < 2) {
if(!$name) {
$errors[] = "You must enter a name.";
} else {
$errors[] = "Name must be at least 2 characters.";
}
}
if(!$email) {
$errors[] = "You must enter an email.";
} else if(!validEmail($email)) {
$errors[] = "You must enter a valid email.";
}
if(strlen($telephone) < 6) {
if(!$telephone) {
$errors[] = "You must enter a phone number.";
} else {
$errors[] = "Message must be at least 6 characters. (include area code)";
}
}
if(strlen($message) < 10) {
if(!$message) {
$errors[] = "You must enter a message.";
} else {
$errors[] = "Message must be at least 10 characters.";
}
}

if($errors) {
// Output errors and die with a failure message
$errortext = "";
foreach($errors as $error) {
$errortext .= "<li>".$error."</li>";
}
die("<span class='failure'>The following errors occured:<ul>". $errortext ."</ul>   </span>");
}

// Send the email
$to = "contact@dorsetdesigns.co.uk";
$subject = "Quote Request: $name";
$message = "Telephone Number: $telephone"."\n"."Job Details: $message"."\n"."Number of Pages Required: $pages"."\n"."Clients Budget: $budget";
$headers = 'Content-Type: text/html; charset=utf-8';
"Quote Request From: $email";

mail($to, $subject, $message, $headers);

// Die with a success message
die("<span class='success'>Success! Your message has been sent.</span>");

// A function that checks to see if
// an email is valid
function validEmail($email)
{
$isValid = true;
$atIndex = strrpos($email, "@");
if (is_bool($atIndex) && !$atIndex)
{
  $isValid = false;
}
else
{
  $domain = substr($email, $atIndex+1);
  $local = substr($email, 0, $atIndex);
  $localLen = strlen($local);
  $domainLen = strlen($domain);
  if ($localLen < 1 || $localLen > 64)
  {
     // local part length exceeded
     $isValid = false;
  }
  else if ($domainLen < 1 || $domainLen > 255)
  {
     // domain part length exceeded
     $isValid = false;
  }
  else if ($local[0] == '.' || $local[$localLen-1] == '.')
  {
     // local part starts or ends with '.'
     $isValid = false;
  }
  else if (preg_match('/\\.\\./', $local))
  {
     // local part has two consecutive dots
     $isValid = false;
  }
  else if (!preg_match('/^[A-Za-z0-9\\-\\.]+$/', $domain))
  {
     // character not valid in domain part
     $isValid = false;
  }
  else if (preg_match('/\\.\\./', $domain))
  {
     // domain part has two consecutive dots
     $isValid = false;
  }
  else if(!preg_match('/^(\\\\.|[A-Za-z0-9!#%&`_=\\/$\'*+?^{}|~.-])+$/',
             str_replace("\\\\","",$local)))
  {
     // character not valid in local part unless
     // local part is quoted
     if (!preg_match('/^"(\\\\"|[^"])+"$/',
         str_replace("\\\\","",$local)))
     {
        $isValid = false;
     }
  }
  if ($isValid && !(checkdnsrr($domain,"MX") || checkdnsrr($domain,"A")))
  {
     // domain not found in DNS
     $isValid = false;
  }
  }
  return $isValid;
  }

  ?> 
```

和js

```
 $(function() {
      // Validate the contact form
      $('#contactform').validate({
        // Specify what the errors should look like
        // when they are dynamically added to the form
        errorElement: "label",
        wrapper: "td",
        errorPlacement: function(error, element) {
          error.insertBefore( element.parent().parent() );
          error.wrap("<tr class='error'></tr>");
          $("<td></td>").insertBefore(error);
        },

        // Add requirements to each of the fields
        rules: {
          name: {
            required: true,
            minlength: 2
          },
          email: {
            required: true,
            email: true
          },
           telephone: {
            required: true,
            minlength: 6
          },
          message: {
            required: true,
            minlength: 10
          }
        },

        // Specify what error messages to display
        // when the user does something horrid
        messages: {
          name: {
            required: "Please enter your name.",
            minlength: jQuery.format("At least {0} characters required.")
          },
          email: {
            required: "Please enter your email.",
            email: "Please enter a valid email."
          },
          telephone: {
            required: "Please enter a phone number.",
            minlength: jQuery.format("At least {0} characters required.")

          },
          message: {
            required: "Please enter a message.",
            minlength: jQuery.format("At least {0} characters required.")
          }
        },

        // Use Ajax to send everything to quote.php
        submitHandler: function(form) {
          $("#send").attr("value", "Sending...");
          $(form).ajaxSubmit({
            target: "#response",
            success: function(responseText, statusText, xhr, $form) {
              $(form).slideUp("fast");
              $("#response").html(responseText).hide().slideDown("fast");
            }
          });
          return false;
        }
      });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:39:26.397

```
$headers = 'Content-Type: text/html; charset=utf-8'; 
```

您将其作为 HTML 电子邮件发送，因此您的换行符将被忽略。

您可以将它们更改为 HTML 换行符（将 更改`\n`为`<br />`，正如 Mathieu Imbert 上面所建议的那样。但由于您没有在消息中使用 HTML，您可以完全从标题中删除该行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:06:09.480

对于某些电子邮件客户端，例如 Outlook，您需要使用：

```
\r\n 
```

如果您以 HTML 格式发送电子邮件，请使用：

```
<br /> 
```

# jquery - 在 Google Map V3 上打开一个新的菜单框

> ID：11890232
> 
> 赞同：0
> 
> 时间：2012-08-09T19:04:21.787
> 
> 标签：jquery, google-maps, events, mouseevent

当我右键单击 Google map 时，我想在我的鼠标在地图上的确切位置显示一个菜单框。我知道我可以使用 Google 地图活动，但我不知道该怎么做。我比 Javascript 更熟悉 jQuery。感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:22:53.660

`rightclick`此示例将帮助您并查看定义事件的代码末尾：

html:

```
<script src="http://code.jquery.com/jquery-1.7.2.min.js" type="text/javascript"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script src="https://dl.dropbox.com/u/15208254/stackoverflow/googlelocation/script.js" type="text/javascript"></script>
<div id="mapDiv" style="width:700px; height: 500px;"></div> 
```

js：

```
$.geolocation.find(function(location) {
        var lat = location.latitude;
        var lng = location.longitude;

        var map = new google.maps.Map($('#mapDiv').get(0), {
            center: new google.maps.LatLng(lat, lng),
            zoom: 13,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        });

        var pinColor = "FE7569";
        var pinImage = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_letter&chld=%E2%80%A2|" + pinColor,
        new google.maps.Size(21, 34),
        new google.maps.Point(0,0),
        new google.maps.Point(10, 34));
        var pinShadow = new google.maps.MarkerImage("http://chart.apis.google.com/chart?chst=d_map_pin_shadow",
        new google.maps.Size(40, 37),
        new google.maps.Point(0, 0),
        new google.maps.Point(12, 35))

        var marker = new google.maps.Marker({
            position: new google.maps.LatLng(lat, lng),
            map: map,
            icon: pinImage,
            shadow: pinShadow 
        });

    /* click event for the map */
    google.maps.event.addListener(map, 'rightclick', function() {
        alert('right click detected!');
    });
}); 
```

**现场演示：**

[http://jsfiddle.net/oscarj24/sPsxh/1/](http://jsfiddle.net/oscarj24/sPsxh/1/)

# php - Codeigniter $this->db->where() 不工作

> ID：11890234
> 
> 赞同：1
> 
> 时间：2012-08-09T19:04:24.377
> 
> 标签：php, mysql, database, codeigniter, where

```
$this->db->from('posts');
$this->db->where('id',$this->uri->segment(3));
$data['query'] = $this->db->get(); 
```

我正在尝试使用 where 语句发布一篇文章。运行此代码时，我没有收到任何错误。但在我看来，当我尝试获取`$query->result()->body`PHP 时给了我一个错误`Trying to get property of non-object.`所以我跑了`print_r($query)`，这就是它给我的：

```
(
    [conn_id] => Resource id #27
    [result_id] => Resource id #32
    [result_array] => Array
        (
        )

    [result_object] => Array
        (
        )

    [custom_result_object] => Array
        (
        )

    [current_row] => 0
    [num_rows] => 0
    [row_data] => 
) 
```

我不知道为什么它不会从数据库中获取我的特定帖子。我知道我的数据库处于工作状态。我在我网站的其他地方使用它。我也在`$this->db->where()`我网站上的其他地方使用过，效果很好。我也尝试过插入帖子的 id 而不是，`$this->uri->segment(3)`我遇到了同样的问题。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:13:15.547

`result()`当您从 db 中选择多于 1 行时，应使用，`row()`改为使用。

在控制器使用中

```
$data['query'] = $this->db->get()->row(); 
```

然后在视野中

```
$query->body 
```

我强烈建议您使用`$data['post']`and`$post->body`而不是`$query->body`. 当您在一页上有更多查询时，您的视图将变得混乱。

# optimization - Box2D 的可变时间步错误

> ID：11890245
> 
> 赞同：0
> 
> 时间：2012-08-09T19:05:12.423
> 
> 标签：optimization, cocos2d-iphone, box2d, physics, intervals

任何人都可以发现下面的代码有什么问题。它应该对前一个 TIME_STEPS 帧数的帧间隔 (dt) 进行平均。

我正在使用 Box2d 和 cocos2d，虽然我不认为 cocos2d 位非常相关。

```
-(void) update: (ccTime) dt
{
    float32 timeStep;
    const int32 velocityIterations = 8;
    const int32 positionIterations = 3;

    // Average the previous TIME_STEPS time steps

    for (int i = 0; i < TIME_STEPS; i++)
    {
        timeStep += previous_time_steps[i];
    }

    timeStep = timeStep/TIME_STEPS;

    // step the world
    [GB2Engine sharedInstance].world->Step(timeStep, velocityIterations, positionIterations);

    for (int i = 0; i < TIME_STEPS - 1; i++)
    {
        previous_time_steps[i] = previous_time_steps[i+1];
    }

    previous_time_steps[TIME_STEPS - 1] = dt;
} 
```

previous_time_steps 数组最初也填充了设置的动画间隔。

这也不符合我的预期。在具有低帧速率的设备上，它会加快模拟速度，而在具有高帧速率的设备上，它会减慢模拟速度。我确定这是我在寻找的愚蠢的东西。

我知道 box2D 喜欢使用固定的时间步长，但我真的别无选择。我的游戏在各种设备上以非常可变的帧速率运行，因此固定时间停止不起作用。游戏的平均运行速度为 40 fps，但在一些更糟糕的设备上，如第一代 iPad，它的运行速度仅为每秒 30 帧。第三代 ipad 以每秒 50/60 帧的速度运行。

我也愿意接受有关处理此问题的其他方法的建议。任何意见，将不胜感激。

我应该注意的其他不寻常的事情可能有人可能会有所了解，即在构建上运行任何调试优化都会对上述内容产生巨大影响。当调试优化设置为 -Os 与 -O0 时，帧速率没有太大变化。但是，当首次优化设置为 -Os 时，当上述代码处于活动状态时，物理模拟的运行速度比 -O0 快得多。如果我只是使用 dt 作为间隔而不是上面的代码，那么调试优化没有任何区别。

我对此完全感到困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:58:29.047

> 在具有低帧速率的设备上，它会加快模拟速度，而在具有高帧速率的设备上，它会减慢模拟速度。

这就是使用可变时间步长的意义所在。如果您仅获得 10 fps，则物理引擎将更快地迭代世界，因为增量时间更大。

PS：如果您进行任何类型的性能测试，请使用发布版本运行它们。这也确保了（大多数）日志记录被禁用并且代码优化被打开。在旧设备上调试代码时，您可能会体验到更大的性能影响。

另外，TIME_STEPS 的值是多少？不应该超过10个，最多20个。平均的替代方法是直接使用增量时间，但如果增量时间大于某个阈值（30 fps），则切换到使用固定增量时间（上限）。因为低于 30 fps 的可变时间步长可能会变得非常丑陋，所以在这种情况下，最好让物理引擎随着帧速率减慢速度，否则游戏会变得更难，如果在较低的 fps 下无法玩的话。

# c# - 如何允许 Windows 8 应用程序打开/创建任何类型的文件？

> ID：11890250
> 
> 赞同：0
> 
> 时间：2012-08-09T19:05:31.520
> 
> 标签：c#, .net, windows-8, microsoft-metro

我正在为 Windows 8 Metro 编写应用程序，我需要能够打开/创建任何类型的文件。

但是，根据[这篇文章](http://msdn.microsoft.com/en-us/library/windows/apps/hh464936.aspx#documents_library)，即使应用程序声明了该`documentsLibrary`功能，它也只能打开/创建文件类型关联部分中定义的文件。

如何允许我的应用打开或创建任何类型的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:37:09.707

不，该页面仅指在**用户不知情的情况下**访问文件。这意味着您可以枚举它们并阅读它们，而无需用户明确选择一个。

使用时`Windows.Storage.Pickers.FileOpenPicker`，用户可以从任何地方选择任何文件。但这必须由用户完成，而不是由应用程序自动完成。储蓄也是一样。

示例：[使用文件选择器示例访问和保存文件](http://code.msdn.microsoft.com/windowsapps/File-picker-sample-9f294cba/sourcecode?fileId=43705&pathId=2647585)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:17:36.727

似乎在不添加任何功能的情况下，允许应用程序在“下载”文件夹中创建任何类型的文件。

即使没有以下`documentsLibrary`功能，此代码也可以工作：

```
StorageFolder folder = await Windows.Storage.DownloadsFolder.CreateFolderAsync("folder");
StorageFile file = await folder.CreateFileAsync("myfile.txt"); 
```

“.txt”文件类型不需要在文件类型关联中声明。

**更新： msdn 上的** [这篇文章](http://msdn.microsoft.com/en-us/library/windows/apps/windows.storage.downloadsfolder)解释了下载文件夹的权限。

# c# - Visual Studio 在发布时移动内容文件

> ID：11890252
> 
> 赞同：2
> 
> 时间：2012-08-09T19:05:35.020
> 
> 标签：c#, xml, visual-studio-2010, installation, publishing

我正在开发一个使用几个 XML 文件来存储数据的 Web 应用程序。我将他们的构建操作设置为内容，并在安装时将文件成功复制到应用程序虚拟目录：

```
C:\inetpub\wwwroot\ApplicationName\ 
```

我遇到的问题是写入这些 XML 文件（为了保存设置和类似的东西）会导致很多写入权限问题。因此，为了解决这个问题，我尝试使用 Web 部署项目中的以下 PostBuildEvent 将这些文件从它们安装到的虚拟目录复制到 C 驱动器下的新目录：

```
xcopy "$(TargetDir)*.xml" "C:\CompanyName\ApplicationName\" /y 
```

但是，这无济于事。我不确定这是否是因为安装程序中的 PostBuildEvents 实际上并未在安装时触发，而只是在构建安装程序时触发，或者 TargetDir 是否代表 bin 目录：

```
C:\inetpub\wwwroot\ApplicationName\bin\ 
```

而不是根应用程序虚拟目录：

```
C:\inetpub\wwwroot\ApplicationName\ 
```

有没有人有任何想法？以前有没有人处理过这种事情？我真的被这个难住了。

**更新：** 我包括一个 PostBuildEvent 应该为所有用户提供完全权限：

```
icacls "$(TargetDir)" /grant Users:F 
```

但它似乎并没有解决问题。

我也不确定 $(TargetDir) 指向的确切位置，如果它是 ..\ApplicationName\ 或 ..\ApplicationName\bin\

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:09:19.450

您所要做的就是向 Web 应用程序池在其上下文中运行的用户授予完全权限。

您可以通过启动 IIS 管理器并查看**Application Pools** and **Identity**列来找到该用户

就像是

```
cacls C:\inetpub\wwwroot\ApplicationName /G Users:F 
```

会将对该子目录的所有权限授予计算机上的所有用户，如果您在`ApplicationPoolIndentity`参考[此处运行](http://blogs.msdn.com/b/vijaysk/archive/2009/02/13/goodbye-network-service.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T13:25:10.587

事实证明，有一种更简单的方法可以做我想做的事情。

我没有使用 PostBuildEvents 创建新的目录结构并将文件移到那里，而是将新的目录结构添加到

```
InstallerProject > View > File System 
```

之后，我在我的安装程序项目中***找到了 SomeProject***条目中的内容文件，并将***文件夹***值更改为新指定的目录结构，在这种情况下

```
C:\CompanyName\ApplicationName\ 
```

这似乎工作正常，我现在可以按照我最初的意图自由访问这些文件。

# memory - gdb 'x' 命令有什么作用？

> ID：11890253
> 
> 赞同：4
> 
> 时间：2012-08-09T19:05:36.267
> 
> 标签：memory, assembly, gdb, cpu-registers

为了进一步了解计算机，我偶然发现了一本书，其中有一些关于反汇编、x86 汇编语言以及 C 和 x86 汇编之间的关系的章节。现在我一直在阅读这个`GDB`命令，但我无法完全理解它。

该命令及其结果如下：

```
(gdb) x/32xw $esp
0xbffff7e0:    0xb8000ce0 0x08048510 0xbffff848 0xb7eafebc
0xbffff7f0:    0x00000002 0xbffff874 0xbffff880 0xb8001898
0xbffff800:    0x00000000 0x00000001 0x00000001 0x00000000
0xbffff810:    0xb7fd6ff4 0xb8000ce0 0x00000000 0xbffff848
0xbffff820:    0x40f5f7f0 0x48e0fe81 0x00000000 0x00000000
0xbffff830:    0x00000000 0xb7ff9300 0xb7eafded 0xb8000ff4
0xbffff840:    0x00000002 0x08048350 0x00000000 0x08048371
0xbffff850:    0x08048474 0x00000002 0xbffff874 0x08048510 
```

现在，据我了解，我发出的命令告诉调试器：

*   x（第一个）：检查内存
*   32：得到下面的 32 个
*   x：启用十六进制表示
*   w：给我看`Word`尺寸数据。
*   `**Note:**`我知道我问过 esp 寄存器，但我不太明白 $ 在它前面做什么。当我尝试不使用它时，我得到一个缺少符号的错误，所以我知道它与引用/取消引用有关吗？

困扰我的是我是如何找到所有这些字节的？由于我正在检查一个寄存器，谁的大小是 32 位，我不应该只得到 32 位或 4 个字节（上面只有 1 行）吗？如果我的假设是正确的，那么我们是否找到了其余的数据？它是否必须与堆栈以及我目前不知道的特定堆栈框架有关？

我会很感激你的意见，这样我就可以澄清我的想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T19:26:58.617

```
(gdb) help x   
Examine memory: x/FMT ADDRESS. 
```

将 $esp 作为地址将使 gdb 获取该寄存器中的任何内容并将其用作 x 命令的内存地址 - 并将显示内存中从该地址开始的以下 32 个字。

gdb 本身中的变量是以 $ 为前缀的名称，gdb 为所有 cpu 寄存器设置预定义变量。

如果您想检查 esp 寄存器，请使用命令`info registers esp`，正如您将在示例中看到的 (x/32xw $esp)，esp 寄存器包含显示的第一个地址，0xbffff7e0

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T19:26:16.010

它为您提供了 32 个`esp`寄存器指向的内存字（显然该寄存器包含地址 0xbffff7e0）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-15T16:21:37.413

(gdb) x/32xw $esp 这意味着显示 esp 指向的 32 个单词字段。

件数：32，格式：十六进制，大小：字（1 字= gdb 上的 32 位）

显示 32 个单词字段，其中 esp 指向 (hex)0xbffff7e0 - (hex)0xbffff7f0 = (dec)3221223392 - (dec)3221223408 = 16bytes=4words

# regex - 16 个字符的正则表达式，后跟冒号

> ID：11890260
> 
> 赞同：1
> 
> 时间：2012-08-09T19:06:08.500
> 
> 标签：regex

将字符串与以下内容匹配的正确正则表达式是什么？

*   新行开头的任意 16 个字符。
*   后跟一个冒号`:`

我想出了这个，但不知道是否足够： `.{16}:`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T19:07:40.870

你错过了行的开头，[`^`](http://www.regular-expressions.info/anchors.html)：

```
^.{16}: 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-09T19:08:56.847

我要提供的唯一更正是：

```
^.{16}: 
```

插入符号 ( `^`) 锚定到行首。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T19:09:01.463

那将是：

```
^(.{16})[?=:]

. almost any character
{n} How many
[?=X] Followed by 
```

也许更简单 ^.{16}：

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T19:24:24.803

在 PHP 中，这将是这样的：

`**/**^([^:]{16}):/**m**`

一些细节：

*   `^`行首*   `/`是正则表达式分隔符*   `[^:]`包装任何字符，但`:`. 我不使用“。” 为了避免在 16 个字符之间有“：”时出现问题。如果您无论如何都想抓住它，那么只需使用“。” 正如你正在做的那样。*   `{16}`重复此操作 16 次。*   `**(**[^:]{16}**)**`括号捕获匹配的值。它被存储到一个引用中，稍后可以由“\”或“$”获取，具体取决于您使用的语言。*   `m`这里是魔法。“m”是**多行修饰符**。这将使表达式在文本的每一行中执行。在 javascript 中，此修饰符是“g”（全局）。

希望能帮助到你！

# qt - Qml - 错误：未安装模块“QtMobility.location”

> ID：11890268
> 
> 赞同：1
> 
> 时间：2012-08-09T19:06:18.700
> 
> 标签：qt, qml

我安装了 Qt SDK 1.2.1。当我使用 QtQuick 编写程序并且我想使用时`QtMobility.location 1.2`会出现以下错误：

`module "QtMobility.location" is not installed`

谁能帮我 ？当我安装 Qt sdk 时，会自动安装 Qt 移动性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T20:57:28.117

请务必在 pro 文件中声明以下内容：

1.  symbian:TARGET.CAPABILITY += 位置
2.  移动性+=位置
3.  据我记得 - 可以检查是否安装了 Qt 移动性，请检查 Qt SDK 更新管理器。

# ruby - Nokogiri - 编码问题 - UTF8 字符无效

> ID：11890269
> 
> 赞同：0
> 
> 时间：2012-08-09T19:06:19.263
> 
> 标签：ruby, nokogiri

有人可以看看这个。我认为进行此调用时存在无效的 UTF-8 字符。

`Nokogiri::HTML(open("http://www.next.co.uk/x502062s2"))`

如果有办法解决这个问题？这是问题所在吗？我正在编写一个新的开源屏幕抓取工具，专为产品信息捕获（当网站不提供提要时）而设计，然后有人说我做的事情有点狡猾:-)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:38:02.063

在向 Nokogiri 传递任何内容之前，您可以对页面内容进行编码，并使用 Iconv 忽略所有无效的 UTF 字符。

我是这样使用它的：

```
ic = Iconv.new('UTF-8//IGNORE', 'UTF-8')
valid_string = ic.iconv(open('http://example.com').read) 
```

您还可以检查“[修复 Ruby 中无效的 UTF-8，重新访问](http://po-ru.com/diary/fixing-invalid-utf-8-in-ruby-revisited/)。”

# java - Android 套接字应用程序在模拟器上运行但在设备上不工作

> ID：11890274
> 
> 赞同：1
> 
> 时间：2012-08-09T19:06:38.673
> 
> 标签：java, android, sockets, serversocket

我正在开发一个应用程序，其中应用程序必须使用套接字编程连接到 java 类。该应用程序在 android 模拟器中运行良好，但在我的设备上无法运行。当我在我的设备上运行它时，我的设备和计算机之间没有套接字连接。我在这里包含了一些用于套接字连接的代码，请检查并建议我一些解决方案。这很紧急..！！

```
try {
    socket = new Socket(InetAddress.getByName("vivek-PC")
            .getHostAddress(), 8888);

    dataOutputStream = new DataOutputStream(socket.getOutputStream());
    dataInputStream = new DataInputStream(socket.getInputStream());
} catch (UnknownHostException e) {
    // textIn.setText("Button Clicked" + e);
    e.printStackTrace();
} catch (IOException e) {

    e.printStackTrace();

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:03:07.620

好吧，我认为您应该首先通过在您的设备上安装 android 终端仿真器应用程序并使用您的服务器 IP 地址 ping 它来检查您的设备和您的服务器 PC 之间的连接......然后尝试将您的设备与服务器连接......希望你会成功....

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T19:11:33.437

因为您的 android 使用不使用名称 vivekpc 的 wifi，请尝试将 vivekpc 更改为您设备的 wifi 名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T19:40:16.427

> 当我在我的设备上运行它时，我的设备和计算机之间没有套接字连接。

您正在尝试在此处连接 PC 上的 localhost：

```
InetAddress.getByName("vivek-PC").getHostAddress() 
```

如果您的 PC 和设备之间没有连接，那么它很自然会落入 UnknownHostException 部分并且无法在您的设备上运行。

# windows - 如何从 IIS 迁移到 Azure

> ID：11890276
> 
> 赞同：1
> 
> 时间：2012-08-09T19:06:45.780
> 
> 标签：windows, azure

是否有任何工具或流程可用于将部署的服务迁移`IIS`到`Windows Azure Cloud space`. 有没有办法拍摄一组虚拟目录的快照/图像并将其移动到 Windows Azure？

-马亨德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T22:42:45.587

有几种方法可以在 Windows Azure 上运行 IIS 网站（参见[http://davidpallmann.blogspot.com/2012/07/windows-azure-is-3-lane-highway-how-to.html](http://davidpallmann.blogspot.com/2012/07/windows-azure-is-3-lane-highway-how-to.html)进行比较） .

1.  Windows Azure 网站
2.  云服务（平台即服务）- 托管服务
3.  虚拟机（基础设施即服务）

如果您的要求是复制文件并完成它，选项 1 (WAWS) 和选项 3 (虚拟机) 允许这样做。您可以通过 FTP 为 WAWS 上传文件，也可以通过远程桌面连接为 VM 上传文件。但是，请注意 WAWS 不支持多个虚拟目录或任何类型的自定义 IIS 配置。使用虚拟机，您有责任自己管理您的虚拟机。

我建议通过 Windows Azure 培训工具包（可从 azure.com 下载）中的动手实验，了解使用这些不同方法设置网站所涉及的内容，以确定哪种方法最适合您。

# c# - 后台工作者错误中的进程

> ID：11890277
> 
> 赞同：5
> 
> 时间：2012-08-09T19:06:50.067
> 
> 标签：c#, .net, process, backgroundworker

在执行耗时的 python 脚本时，我会使用后台工作人员管理 IU 以显示进度条。

当我不需要事件时，我已经成功地使用了后台工作人员`OutputDataReceived`，但是我正在使用的脚本会打印一些进度值，例如（“10”，“80”，..），所以我必须听事件`OutputDataReceived`。

我得到这个错误：`This operation has already had OperationCompleted called on it and further calls are illegal.`在这一行`progress.bw.ReportProgress(v);`。

我尝试使用 2 个后台工作实例，一个执行，另一个侦听，它没有给出错误，但似乎没有调用事件“OutputDataReceived”，所以我在进度条中看不到任何进展。

在我使用的代码下方：

```
 private void execute_script()
    {
             progress.bw.DoWork += new DoWorkEventHandler( //progress.bw is reference to the background worker instance
        delegate(object o, DoWorkEventArgs args)
        {

        System.Diagnostics.Process proc = new System.Diagnostics.Process();
        proc.StartInfo.FileName = "python.exe";
        proc.StartInfo.UseShellExecute = false;
        proc.StartInfo.Arguments = @".\scripts\script1.py " + file_path + " " + txtscale.Text;
        //proc.StartInfo.CreateNoWindow = true;
        //proc.StartInfo.WindowStyle = System.Diagnostics.ProcessWindowStyle.Hidden;
        proc.StartInfo.RedirectStandardOutput = true;
        //proc.EnableRaisingEvents = true;
        proc.StartInfo.RedirectStandardError = true;
        proc.StartInfo.RedirectStandardError = true; 
        proc.OutputDataReceived += new System.Diagnostics.DataReceivedEventHandler(proc_OutputDataReceived);
        proc.Start();
        proc.BeginOutputReadLine();

      //proc.WaitForExit();
        //proc.Close();
                   });

           progress.bw.RunWorkerAsync();
        }

 ///the function called in the event OutputDataReceived 
 void proc_OutputDataReceived(object sender, System.Diagnostics.DataReceivedEventArgs e)
    {
        //throw new NotImplementedException();
        if (e.Data != null)
        {
            int v = Convert.ToInt32(e.Data.ToString()); 
            MessageBox.Show(v.ToString());
         //   report(v);
            progress.bw.ReportProgress(v);

        }
        else
            MessageBox.Show("null received"); 

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T19:16:01.570

问题是`BackgroundWorker`' 的`DoWork`处理程序在进程开始后立即完成，因为没有任何“等待”（因为您已注释掉`proc.WaitForExit()`）来完成进程。一旦`BackgroundWorker`工作处理程序完成，您就不能再使用该实例报告进度。

由于`Process.Start`已经是异步的，因此根本没有理由使用后台工作程序。您可以自己将调用从`OutputDataReceived`UI 线程编组：

```
///the function called in the event OutputDataReceived 
void proc_OutputDataReceived(object sender, System.Diagnostics.DataReceivedEventArgs e)
{
    //throw new NotImplementedException();
    if (e.Data != null)
    {
        int v = Convert.ToInt32(e.Data.ToString()); 
        // MessageBox.Show(v.ToString());
        // progress.bw.ReportProgress(v);
        this.BeginInvoke( new Action( () => {
             this.progressBar.Value = v;
        }));
    }
} 
```

如果您使用它，请不要创建`BackgroundWorker`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:13:10.137

BackGroundWorker 有一个专门为此构建的 ReportProgress 选项。

[BackgroundWorker.ReportProgress 方法（Int32，对象）](http://msdn.microsoft.com/en-us/library/a3zbdb1t.aspx)

# iphone - 如何允许用户通过 iOS 浏览器上传图片到我们的网站？

> ID：11890279
> 
> 赞同：0
> 
> 时间：2012-08-09T19:06:59.617
> 
> 标签：iphone, ios, image, upload

我们的网站允许网络用户将图像上传到他们的 WordPress/BuddyPress 个人资料和帖子。我们有一个响应式设计，但 iOS 不允许用户在从他们的 iphone 发布时上传图片。我们不想为此构建一个完整的应用程序 - 有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:56:43.750

这是可能的，通过使用免费的应用程序。看到这个： [http ://buddypress.org/community/groups/how-to-and-troubleshooting/forum/topic/users-cant-upload-their-avatar-when-on-mac/](http://buddypress.org/community/groups/how-to-and-troubleshooting/forum/topic/users-cant-upload-their-avatar-when-on-mac/)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-21T18:55:33.073

建议用户使用不同的浏览器，例如 iCab。[App Store 中的 iCab。](http://itunes.apple.com/us/app/icab-mobile-web-browser/id308111628?mt=8)

# php - 由于单引号引起的php错误

> ID：11890280
> 
> 赞同：0
> 
> 时间：2012-08-09T19:07:00.730
> 
> 标签：php

由于单引号，我在以下代码中收到 php 错误。

```
 <?PHP $annoc=echo '<div id="announcement" class="announcement'.$rid1.'">
  <div id="AContent"><span style="margin:0px 0px 0px 20px;">'.strip_tags($notify).'</span>                                                   

  <div style="float:right;">
  <span class="remind" onclick="announce('.$rid1.','.$userID.','Remind')">                   

  &nbsp;&nbsp;&nbsp;  Remind me later</span> &nbsp;&nbsp;
  <span class="dont" onclick="announce('.$rid1.','.$userID.','Dont');"> Don't show me this         

  again</span></div></div></div>';?> 
```

请让我知道我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:08:50.280

你需要用一个转义你的单引号`\`

```
 <?PHP $annoc=echo '<div id="announcement" class="announcement'.$rid1.'">
  <div id="AContent"><span style="margin:0px 0px 0px 20px;">'.strip_tags($notify).'</span>                                                   

  <div style="float:right;">
  <span class="remind" onclick="announce('.$rid1.','.$userID.',\'Remind\')">                   

  &nbsp;&nbsp;&nbsp;  Remind me later</span> &nbsp;&nbsp;
  <span class="dont" onclick="announce('.$rid1.','.$userID.',\'Dont\');"> Don\'t show me this         

  again</span></div></div></div>';?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T19:09:01.477

StackOverflow 上的语法高亮就是其中之一。

```
;"> Don't show again 
```

那个撇号从你的字符串中断开。您需要使用 . 所有不破坏字符串的单引号都需要转义，例如

```
;"> Don\'t show again 
```

正如皮特在答案中指出的那样，您的 onclick 变量中也有未转义的单引号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T19:09:22.163

你有一个撇号在你的

> 不要再给我看这个

文本。您需要转义该字符，以免它认为您正在终止字符串。例如：

```
Don\'t show me this again 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T19:17:33.800

当您有*很多*HTML 时，就像在这种情况下所做的那样，通常在适当的地方将 PHP 添加到您的 HTML 中，而不是将您的 HTML 放在一个字符串中更简单。

这可能会更干净，并有助于减少将来的错误：

```
<div id="announcement" class="announcement<?= $rid1 ?>">
<div id="AContent"><span style="margin:0px 0px 0px 20px;"><?= strip_tags($notify) ?></span>                                                   

<div style="float:right;">
<span class="remind" onclick="announce(<?= $rid1 ?>,<?= $userID ?>,'Remind')">                   

&nbsp;&nbsp;&nbsp;  Remind me later</span> &nbsp;&nbsp;
<span class="dont" onclick="announce(<?= $rid1 ?>,<?= $userID ?>,'Dont');"> Don't show me this again</span></div></div></div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T19:15:43.817

```
<?php 
$annoc = echo '<div id="announcement" class="announcement'.$rid1.'">
            <div id="AContent"><span style="margin:0px 0px 0px 20px;">'.strip_tags($notify).'</span>                                                   

            <div style="float:right;">
            <span class="remind" onclick="announce('.$rid1.','.$userID.',\'Remind\')">                   

            &nbsp;&nbsp;&nbsp;  Remind me later</span> &nbsp;&nbsp;
            <span class="dont" onclick="announce('.$rid1.','.$userID.',\'Dont\');"> Don\'t show me this again</span></div></div></div>';
?> 
```

这真是一团糟。

也许对您有用：如果您使用双引号，则不必大量使用引号。

相比：

```
echo "i speak $myLanguageCount languages";
echo 'i speak '.$myLanguageCount.' languages'; 
```

# coldfusion-8 - Contribute File Deployer 的写入权限问题？

> ID：11890281
> 
> 赞同：0
> 
> 时间：2012-08-09T19:07:03.530
> 
> 标签：coldfusion-8, adobe-contribute

我使用 Contribute 的 File Deployer 工具已经有一段时间了，在我们更换了将文件推送到的服务器之前，它一直运行良好。推送文件本身工作正常，权限和所有。但主要功能的一部分是它扫描您的文件被推送到的目录，如果它不存在，那么它会创建所述目录。

到目前为止，工具的这一部分总是失败。被推送文件的完整路径的格式是`\\\x.x.x.x\sync$\path/to/folder`（混合斜杠总是有效的。）

这是在带有 ColdFusion 8 的 Windows XP sp3 上。

```
<cftry>
            <cfinvoke method="MakeSurePathExists" path="#serverPathToPush##siteRelative#">
            <cfcatch type="any">
                <cfthrow errorcode="NoLiveServerAccess" message="Can not access or do not have sufficient permissions to write to: #serverPathToPush##siteRelative#">
                <cflog application="yes" text="Can not access or do not have sufficient permissions to write to: #serverPathToPush##siteRelative#" file="Filedeployer" />
            </cfcatch>
        </cftry>

    <cffile action="copy" source="#settings.stagingFileSystemPath & siteRelative#" destination="#serverPathToPush##siteRelative#">
    <!--- touch the file so it gets the current date, so the browser will pull down the new one when previewed --->
    <cffile action="append" file="#serverPathToPush##siteRelative#" output="">

<!--- This function checks if the directory exist of the given file.
         If it doesn't, it tries to build path. If it fails, the function throws --->
    <cffunction name="MakeSurePathExists">
        <cfargument name="path" type="string" required="true">

        <cfset createList = ArrayNew(1)>
        <cfinvoke method="RemoveLastFileFromPath" path="#path#" returnvariable="parentdir">

        <cfloop condition="not DirectoryExists( parentDir ) and Len( parentDir ) gt 0 ">
            <cfset temp = ArrayAppend( createList, parentDir ) >
            <cfinvoke method="RemoveLastFileFromPath" path="parentdir" returnvariable="parentdir">
        </cfloop>

        <cfloop from="#ArrayLen( createList )#" to="1" step="-1" index="index">
            <cfdirectory action="create" directory="#createList[index]#">
        </cfloop>
    </cffunction>

    <cfscript>

        function RemoveLastFileFromPath( path )
        {
            rpath = Reverse( path ) ;
            idx2 = Find( "\", rpath ) ;
            idx = Find( "/", rpath ) ;
            if( idx2 is not "0" and idx2 lt idx )
                idx = idx2 ;
            if( idx is not "0" ) {
                rpath = Right( rpath, Len(rpath) - idx ) ;
                return Reverse( rpath ) ;
            }
            return "" ;
        }
    </cfscript> 
```

我得到的友好错误是：

> 无法访问或没有足够的权限写入：\xxxx\sync$\ path/to/folder/the-file.cfm

CFDUMP 的错误：

> 此错误的最可能原因是您的文件系统上已存在 \xxxx\sync$\ path/to/folder/。cfdirectory action="create" 期间发生异常。

我知道共享 URL 末尾和相对路径之间的空格。同样，这以前不是问题，我不确定现在是否存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:57:59.327

事实证明，在这种情况下，URL 中的空格会影响推送。我不得不在服务器地址周围添加一个 trim() ，这解决了这个问题。但是，为什么这只是现在而不是以前的问题，我永远不会知道。

# jquery - 砌体不适应 jQuery 设置隐藏

> ID：11890290
> 
> 赞同：1
> 
> 时间：2012-08-09T19:07:44.177
> 
> 标签：jquery, load, jquery-masonry

我正在使用 masonry（jQuery 插件）来创建[“流畅”的真棒列](http://masonry.desandro.com/)。一切都很好，直到我添加了一个在关闭 javascript 时可见的字段，否则在加载页面时我隐藏字段并显示“阅读更多”链接（läs mer）......

但是 Masonry 在设置 div 的位置时会考虑隐藏字段 =/

有任何想法吗？

你可以在这里看到它：http: [//hyrakontorsplats.nu/](http://hyrakontorsplats.nu/)

更新：我试图最后移动对砌体的调用，这确实起到了加载的作用。但是现在当我单击阅读更多并显示元素时，它并没有按照应有的方式重新排序。

$('.merInfo').hide(); $('.lasMer').show();

```
$('#kontorsplatser').masonry({
  itemSelector: '.kontorsplats',
  //isRTL: true  //align right :)
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:07:44.177

我找到了！

在这里寻找重新加载：http: [//masonry.desandro.com/docs/methods.html](http://masonry.desandro.com/docs/methods.html) 我的最终（工作！）代码：

$('.merInfo').hide(); $('.lasMer').show();

```
$(".lasMer").click(function() {
    $(this).parent().siblings(".merInfo").show();
    $(this).hide();
    $('#kontorsplatser').masonry( 'reload' );

});

$('#kontorsplatser').masonry({
  itemSelector: '.kontorsplats',
  //isRTL: true  //align right :)
}); 
```

# javascript - 仅在单击时运行 javascript src

> ID：11890294
> 
> 赞同：1
> 
> 时间：2012-08-09T19:07:53.570
> 
> 标签：javascript, jquery, onclick

是否有可能仅在单击按钮时才运行 javascript。我不在乎加载是否需要一点时间，只是我不需要它来加载页面。

例如，我们有一个按钮：

```
<div id="proceed"></div> 
```

然后，当单击该按钮时，我们会看到一个带有另外 2 个按钮的弹出窗口。

所以弹出窗口中的一个按钮就像确认运行它，第二个按钮将简单地关闭弹出窗口。

我想要的是运行以下脚本 src：

```
src="http://fileice.net/gateway/mygate.php?id=4465766c4278366467523838" 
```

单击“继续”时。因此脚本将有时间加载，直到用户阅读弹出消息所说的内容。

所以...有机会在按钮单击时运行脚本 src 吗？

编辑：

网关与其他一些脚本冲突，这就是为什么只在点击时运行它的主要原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T19:18:59.280

没有 JQuery：

```
<input type="button" onclick="loadScript('http://fileice.net/gateway/mygate.php?id=4465766c4278366467523838');" value="Proceed" /> 
```

在您的 Javascript 中：

```
function loadScript(script_url)
{
    var head= document.getElementsByTagName('head')[0];
    var script= document.createElement('script');
    script.type= 'text/javascript';
    script.src= script_url;
    head.appendChild(script);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T19:09:57.263

使用`jQuery`：

```
function doAction() {
    $.getScript("http://fileice.net/gateway/mygate.php?id=4465766c4278366467523838");
    return false;
} 
```

HTML：

```
<div id="proceed" onClick="doAction()"></div> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T19:14:27.693

在 jQuery 中：

```
$('#proceed').click(function(){
    $.getScript('http://fileice.net/gateway/mygate.php?id=4465766c4278366467523838');
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T19:13:46.803

也许您可以在这里得到答案。[如何在页面加载后通过 jQuery 动态插入 <script> 标签？](https://stackoverflow.com/questions/3857874/how-to-dynamically-insert-a-script-tag-via-jquery-after-page-load)..他们在加载时所做的事情你可以在按钮点击时做到这一点

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-09T19:15:27.997

我认为值得注意的是 script 标签也有一个 defer 属性

> 延迟脚本的执行

直到页面加载完毕。[更多的](http://www.w3schools.com/tags/att_script_defer.asp)

如果您不想手动参与加载脚本并且您可以在页面的其余部分准备好后加载它，这可能是一个可行的选择。

祝你好运！

# ios - iOS - 从 didPickMediaItems 获取播放列表

> ID：11890300
> 
> 赞同：3
> 
> 时间：2012-08-09T19:08:16.290
> 
> 标签：ios, ios5, audio-streaming, mpmusicplayercontroller, mpmediapickercontroller

我想知道用户何时使用媒体选择器选择歌曲，他们从哪个播放列表中选择歌曲。由于某种原因，播放列表似乎不存在。

基本上，当用户进入媒体选择器中的播放列表时，我们将其称为“健身房歌曲”并选择一首歌曲，mediaPicker:didPickMediaItems: 函数会返回歌曲详细信息，但不会说明用户从哪个播放列表中选择了歌曲。

所以我想做的是播放那首歌并继续播放该播放列表中的其他歌曲。但是没有播放列表信息，它会开始播放该歌曲并继续播放“所有歌曲”列表中的其余歌曲。

这是我的代码：

```
(void) mediaPicker: (MPMediaPickerController *) mediaPicker didPickMediaItems: (MPMediaItemCollection *) mediaItemCollection

{

    MPMediaItem *selectedSong = [[mediaItemCollection items] objectAtIndex:0];

    MPMediaQuery *songQuery = [MPMediaQuery songsQuery];
    [musicPlayer setQueueWithQuery:songQuery];
    for (MPMediaItem *oneSong in [songQuery items]) {

        if ([selectedSong isEqual:oneSong]) {
            musicPlayer.nowPlayingItem = oneSong;
            [musicPlayer play];

            // Exit the loop
            break;
        }
    }
    [self dismissModalViewControllerAnimated: YES]; } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T11:58:54.030

该数据不可用。您唯一的选择是自己在代码中完成所有这些工作。建立一个 tableview 并用库中的所有播放列表填充它。当用户选择一个播放列表时，放置另一个包含该播放列表中所有曲目的 tableview 并允许用户选择一个。

# asp.net - 使用 LINQ 以动态方式过滤产品

> ID：11890302
> 
> 赞同：1
> 
> 时间：2012-08-09T19:08:21.790
> 
> 标签：asp.net, linq, dictionary, code-behind, dynamicquery

经过数小时的尝试和搜索，我想现在是时候与您分享我的问题了。

问题定义：我有一个**KeyValuePairs 字典**（名为**filterPool**），其中包括一个整数（**PropertyID**）和一个字符串（**McValue**）。我想要做的是根据这些 KeyValuePairs 过滤产品并将它们作为**DataTable/List**返回。您可以将其视为将动态“Where ... And ..”子句构建为 SQL。

这是我正在使用的代码：

```
 foreach (KeyValuePair<int, string> filter in filterPool)
            {
                products = products.Where(i => i.PROPERTYID == filter.Key && i.MCVALUE.Equals(filter.Value));
            }
            return products.ToDataTable(); 
```

问题是上面的 foreach 循环似乎只工作一次，对于字典中可用的最新 KeyValuePair。

据我在 Stackoverflow 上找到的，最接近我的问题的解决方案是：[这个，也使用值字典进行过滤](https://stackoverflow.com/questions/11365267/linq-build-dynamic-filter-with-sequence-of-ands)

必须有一种方法可以实现使用 Dictionary 和 LINQ 进行过滤的目标；或者有一件我想念/忽略的大事。

希望给出的问题对所有人来说都足够清楚，谢谢^^

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:10:58.797

这是一个关闭问题。您可以通过临时解决它：

```
 foreach (KeyValuePair<int, string> filterTmp in filterPool)
        {
            var filter = filterTmp; // Make a temporary
            products = products.Where(i => i.PROPERTYID == filter.Key && i.MCVALUE.Equals(filter.Value));
        }
        return products.ToDataTable(); 
```

有关正在发生的事情的详细信息，请参阅 Eric Lippert 的帖子[关闭被认为有害的循环变量](http://blogs.msdn.com/b/ericlippert/archive/2009/11/12/closing-over-the-loop-variable-considered-harmful.aspx)。

另请注意，对于 C# 5，此行为已更改。在 C# 5/VS2012 中，此代码将按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T19:11:57.967

您在 foreach 的每次迭代中都覆盖了您的产品集合。我不确定你的集合中的数据类型是什么，但你会想在你的 foreach 中做这样的事情：

```
products.AddRange(products.Where(i => i.PROPERTYID == filter.Key && i.MCVALUE.Equals(filter.Value))); 
```

我不确定这是否有意义，但您似乎正在尝试创建一个包含与您的 filterPool 匹配的产品的集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T19:26:50.637

我认为用聚合更好地解决它：

```
return filter
    .Aggregate(products, (acc, filter) => acc.Where(i => i.PROPERTYID == filter.Key && i.MCVALUE.Equals(filter.Value)));
    .ToDataTable(); 
```

# objective-c - NSFetchedResultsController - 从部分中删除所有行后崩溃

> ID：11890316
> 
> 赞同：2
> 
> 时间：2012-08-09T19:09:01.847
> 
> 标签：objective-c, ios, core-data

我将 UITableView 与 NSFetchedResultsController 一起使用。NSFetchedResultsControllerDelegate 的所有方法的实现都类似于 Apple 的文档。但是从数据库中删除所有部分的行后，我收到“无效更新”异常。

委托按以下顺序处理此操作：

*   首先执行**controller:didChangeSection:**方法并删除变为空的部分。
*   然后执行**controller:didChangeObject:**方法，该方法尝试从已删除的部分中删除行。它会导致异常。

我做错了什么以及如何处理这种情况？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T11:27:46.723

我有同样的问题。但是，如果您通过添加“分组”所有更改：

```
- (void)controllerWillChangeContent:(NSFetchedResultsController *)controller {
    [self.tableView beginUpdates];
}

- (void)controllerDidChangeContent:(NSFetchedResultsController *)controller {
    [self.tableView endUpdates];
} 
```

它应该工作得很好。

# php - 获取最后一个星期四，但前提是它是此序列中的第二个星期四

> ID：11890329
> 
> 赞同：4
> 
> 时间：2012-08-09T19:09:44.240
> 
> 标签：php, date, datetime, time, strtotime

我知道我可以用这个得到最后一个星期四

```
$firstdate = strtotime('last thursday'); 
```

但是，截至发布此问题时，它将返回

```
August 2nd, 2012 
```

我需要的是这两周周期之后的最后一个星期四：

*   8 月 9 日
*   8月23日
*   9 月 6 日
*   9月20日

之后的每个第二个星期四。

*   所以如果当前日期是 8 月 10 日，它将返回 8 月 9 日

*   如果当前日期是 8 月 21 日，它也会返回 8 月 9 日（即使上一个星期四是 8 月 16 日）

*   如果当前日期是 8 月 24 日，则返回 8 月 23 日

*   如果当前日期是 9 月 1 日，它也将返回 8 月 23 日（即使上一个星期四是 8 月 30 日）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T19:26:11.643

使用周数。

你想要的是每周的星期四，其中有一个**偶数**。

这是一种方法：

```
function getLastEvenWeekThursday()
{
    $lastThursday = strtotime('last thursday');
    $weeknumber = date("W", $lastThursday);
    if($weeknumber % 2 == 0)
        return $lastThursday;
    else
        return $lastThursday - 3600*24*7;
} 
```

# spring - 使用 HibernateValidator 进行跨字段验证不显示错误消息

> ID：11890334
> 
> 赞同：15
> 
> 时间：2012-08-09T19:10:17.487
> 
> 标签：spring, jsp, spring-mvc, bean-validation, hibernate-validator

我正在验证表单上的两个字段“密码”和“确认密码”是否相等，使用[此答案](https://stackoverflow.com/a/2155576/1391249)[`HibernateValidator`](http://sourceforge.net/projects/hibernate/files/hibernate-validator/4.0.2.GA/hibernate-validator-4.0.2.GA-dist.zip/download?use_mirror=nchc)中指定的方法。以下是*约束描述符*（验证器接口）。

 *```
package constraintdescriptor;

import constraintvalidator.FieldMatchValidator;
import javax.validation.Constraint;
import javax.validation.Payload;
import java.lang.annotation.Documented;
import static java.lang.annotation.ElementType.ANNOTATION_TYPE;
import static java.lang.annotation.ElementType.TYPE;
import java.lang.annotation.Retention;
import static java.lang.annotation.RetentionPolicy.RUNTIME;
import java.lang.annotation.Target;

@Target({TYPE, ANNOTATION_TYPE})
@Retention(RUNTIME)
@Constraint(validatedBy = FieldMatchValidator.class)
@Documented
public @interface FieldMatch
{
    String message() default "{constraintdescriptor.fieldmatch}";
    Class<?>[] groups() default {};
    Class<? extends Payload>[] payload() default {};

    /**
     * @return The first field
     */
    String first();

    /**
     * @return The second field
     */
    String second();

    /**
     * Defines several <code>@FieldMatch</code> annotations on the same element
     *
     * @see FieldMatch
     */
    @Target({TYPE, ANNOTATION_TYPE})
    @Retention(RUNTIME)
    @Documented
    public @interface List{
        FieldMatch[] value();
    }
} 
```

以下是*约束验证器*（实现类）。

* * *

```
package constraintvalidator;

import constraintdescriptor.FieldMatch;
import javax.validation.ConstraintValidator;
import javax.validation.ConstraintValidatorContext;
import org.apache.commons.beanutils.BeanUtils;

public final class FieldMatchValidator implements ConstraintValidator<FieldMatch, Object>
{
    private String firstFieldName;
    private String secondFieldName;

    public void initialize(final FieldMatch constraintAnnotation) {
        firstFieldName = constraintAnnotation.first();
        secondFieldName = constraintAnnotation.second();
        //System.out.println("firstFieldName = "+firstFieldName+"   secondFieldName = "+secondFieldName);
    }

    public boolean isValid(final Object value, final ConstraintValidatorContext cvc) {
        try {
            final Object firstObj = BeanUtils.getProperty(value, firstFieldName );
            final Object secondObj = BeanUtils.getProperty(value, secondFieldName );
            //System.out.println("firstObj = "+firstObj+"   secondObj = "+secondObj);
            return firstObj == null && secondObj == null || firstObj != null && firstObj.equals(secondObj);
        }
        catch (final Exception e) {
            System.out.println(e.toString());
        }
        return true;
    }
} 
```

* * *

以下是映射到 JSP 页面的验证器 bean（`commandName="tempBean"`由`<form:form></form:form>`标记指定）。

```
package validatorbeans;

import constraintdescriptor.FieldMatch;
import javax.validation.constraints.Size;
import org.hibernate.validator.constraints.NotEmpty;

@FieldMatch.List({
    @FieldMatch(first = "password", second = "confirmPassword", message = "The password fields must match", groups={TempBean.ValidationGroup.class})
})

public final class TempBean
{        
    @NotEmpty(groups={ValidationGroup.class}, message="Might not be left blank.")
    private String password;
    @NotEmpty(groups={ValidationGroup.class}, message="Might not be left blank.")
    private String confirmPassword;

    public interface ValidationGroup {};

    //Getters and setters                
} 
```

**更新**

一切正常，并进行了预期的验证。剩下的一件事是在不显示的`TempBean`类上方显示指定的错误消息，`@FieldMatch`即**只有一个问题：** *发生验证冲突时如何在 JSP 页面上显示错误消息？*

`@NotEmpty`（两个字段`password`和类`confirmPassword`中的注释都`TempBean`有效，并在违规时显示指定的消息，事情没有发生`@FieldMatch`）。

我正在使用[此博客](http://digitaljoel.nerd-herders.com/2010/12/28/spring-mvc-and-jsr-303-validation-groups/)中指定的基于[此问题的](https://stackoverflow.com/q/11810688/1391249)*验证组*，它运行良好，不会中断显示错误消息（看起来可能如此）。

* * *

在 JSP 页面上，这两个字段指定如下。

```
<form:form id="mainForm" name="mainForm" method="post" action="Temp.htm" commandName="tempBean">

    <form:password path="password"/>
    <font style="color: red"><form:errors path="password"/></font><br/>

    <form:password path="confirmPassword"/>
    <font style="color: red"><form:errors path="confirmPassword"/></font><br/>

</form:form> 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-19T12:32:40.317

你可以试试你的 isValid 方法是这样的吗？（这在现场项目中肯定对我有用）：

```
 public boolean isValid(final Object value, final ConstraintValidatorContext cvc){
    boolean toReturn = false;

    try{
        final Object firstObj = BeanUtils.getProperty(value, firstFieldName );
        final Object secondObj = BeanUtils.getProperty(value, secondFieldName );

        //System.out.println("firstObj = "+firstObj+"   secondObj = "+secondObj);

        toReturn = firstObj == null && secondObj == null || firstObj != null && firstObj.equals(secondObj);
    }
    catch (final Exception e){
        System.out.println(e.toString());
    }
    //If the validation failed
    if(!toReturn) {
        cvc.disableDefaultConstraintViolation();
        //In the initialiaze method you get the errorMessage: constraintAnnotation.message();
        cvc.buildConstraintViolationWithTemplate(errorMessage).addNode(firstFieldName).addConstraintViolation();
    }
    return toReturn;
} 
```

我还看到您正在使用**Object**实现 ConstraintValidator 接口，从字面上看。它应该是您从表单中获得的支持对象：

> tempBean // 您实际上在 commandName 中指定的那个。

所以你的实现应该是这样的：

```
 implements ConstraintValidator<FieldMatch, TempBean> 
```

这可能不是这里的问题，但作为将来的参考，它应该是这样的。

**更新**

在您的 FieldMatch 接口/注释中，您有两个方法：第一个和第二个，再添加一个名为 errorMessage 的方法，例如：

```
 Class<? extends Payload>[] payload() default {};

/**
 * @return The first field
 */
String first();

/**
 * @return The second field
 */
String second();

/**
  @return the Error Message
 */
String errorMessage 
```

从 Validation 类中查看您的方法 - 您在那里获得了第一个和第二个字段名称。所以只需添加 errorMessage，例如：

```
 private String firstFieldName;
  private String secondFieldName;
  //get the error message name
  private String errorMessagename; 
public void initialize(final FieldMatch constraintAnnotation)
{
    firstFieldName = constraintAnnotation.first();
    secondFieldName = constraintAnnotation.second();
    errorMessageNAme = constraintAnnotation.errorMessage(); 

    //System.out.println("firstFieldName = "+firstFieldName+"   secondFieldName = "+secondFieldName);
} 
```

在 isValida 里面得到它，就像你为第一个和第二个字段名做的一样，并使用它。*

# ruby - 在 Balanced Ruby 客户端中使用 Faraday 存根网络调用的最佳方法是什么？

> ID：11890336
> 
> 赞同：2
> 
> 时间：2012-08-09T19:10:22.970
> 
> 标签：ruby, testing, balanced-payments, faraday

我对 Faraday 的存根 API 不是特别熟悉，但从对其和[Balanced::Client](https://github.com/balanced/balanced-ruby/blob/master/lib/balanced/client.rb)来源的随意检查来看，看起来我需要能够为[`Balanced::Client.conn`](https://github.com/balanced/balanced-ruby/blob/master/lib/balanced/client.rb#L19).

这是通过库中的配置选项支持存根连接模式的一步，而在该切换上翻转时，我可以将[`Balanced::Client.conn`](https://github.com/balanced/balanced-ruby/blob/master/lib/balanced/client.rb#L19)其用作存根我期望在测试期间发生的任何请求的句柄。

为各种平衡 API 调用和/或一些内置存根响应提供示例响应主体以用作我自己的存根的模板也是非常有用的。

这似乎是一个合理的计划，还是我走错了方向？我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-22T23:53:04.683

我建议看一下[balance-ruby](https://github.com/balanced/balanced-ruby)库的[单元测试](https://github.com/balanced/balanced-ruby/tree/master/spec)是如何编写的。他们使用[VCR](https://github.com/vcr/vcr)来记录和回放网络呼叫。

虽然与您的确切问题无关，但您也可以通过`construct_from_response`对继承`Resource`自`resource.rb`. 这允许您创建对象的单个实例，如下所示：

```
1.9.3p194 :034 > payload = {:name"=>"Bob", :uri=>"/v1/marketplaces/M123/accounts/fake"} 
1.9.3p194 :035 > account = Balanced::Account.construct_from_response payload
1.9.3p194 :036 > account.name
 => "Bob" 
```

请注意，`uri`有效负载中的参数是必需的，否则库将尝试从服务器查找对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-09T02:52:32.983

可以做这样的事情。使用 gem `webmock` [https://github.com/bblimke/webmock](https://github.com/bblimke/webmock)

并且存根请求自己：

```
stub_request(:get,"https://<your secret key>:@api.balancedpayments.com/v1/customers   email=#<test email>")
.with(:headers => {'Accept'=>'*/*',
                   'Accept-Encoding'=>'gzip;q=1.0,deflate;q=0.6,identity;q=0.3',
                   'User-Agent'=>'balanced-ruby/0.7.4'})
.to_return(:status => 200, :body => "", :headers => {}) 
```

# php - 只刷新一个下拉值而不是整个页面 CakePHP

> ID：11890344
> 
> 赞同：0
> 
> 时间：2012-08-09T19:10:57.273
> 
> 标签：php, javascript, jquery, ajax, cakephp

我正在使用 CakePHP 2.x。我希望在 jquery ui 的模态对话框关闭（提交后）后，我的页面中的下拉列表使用新值刷新，而不是整个页面刷新。我怎样才能做到这一点？

在我的 ArticlesController.php 上

```
public function admin_add() {
    //setting active link
    $this->set('active', 'new_article');

    if ($this->request->is('post')) {
        $this->request->data['Article']['posted'] = date('Y-m-d H:i:s');

        $this->Article->create();

        if ($this->Article->save($this->request->data)) {
            $this->Session->setFlash(__('The article has been saved'));
            $this->redirect(array('action' => 'index'));
        } else {
            $this->Session->setFlash(__('The article could not be saved. Please, try again.'));
        }
    }

    $categories = $this->Article->Category->find('list');
    $this->set(compact('categories')); 
} 
```

在我的查看页面（admin_add.php）

```
<div>
<?php echo $this->Form->create('Article');?>
    <?php
        echo $this->Form->input('title');
        echo $this->Form->input('author');

            //THIS IS THE DROPDOWN PART
            echo $this->Form->input('category_id');

            //THIS IS THE PART FOR CALLING THE MODAL DIALOG TO ADD A NEW CATEGORY
            echo '<div class="addNewCategory">';
            echo 'add';
            echo '</div>';               
    ?>
<?php echo $this->Form->end(__('Submit'));?>
</div>

<!-- Modal Dialog for Adding New Category (THIS IS HIDDEN UNTIL GET CALLED AS MODAL DIALOG)-->
<div class="dialog-form" title='Create new Category'>
    <?php echo $this->Form->create('Category');?>
        <?php
            echo $this->Form->input('name');
        ?>
    <?php echo $this->Form->end(__('Submit'));?>
</div>

<script type="text/javascript">   
        $('.dialog-form').dialog({
           autoOpen: false,
           title: 'New Category',
           modal: true,
           height: 300,
           width: 350,
           close: function() {
           }
        });

        $('.addNewCategory').click(function() {
            $('.dialog-form').dialog('open');
        });

    $('.dialog-form .submit').click(function(e) {
        var value = document.getElementById('CategoryName').value;
        var data = {'data[Category][name]':value};
        e.preventDefault();
        $.ajax({
            type:"POST",
            url: "<?php echo $this->Html->url(array('controller' => 'categories', 'action' => 'addmodal', 'admin' => TRUE)); ?>",
            data: data,
            success: function() {
                $('.dialog-form').dialog('close');

                //WHAT SHOULD I DO IN HERE AFTER THE DIALOG CLOSED TO UPDATE THE DROPDOWN OR IF ITS NOT IN HERE PLEASE LET ME KNOW THE SOLUTION      
            }
        })
    });
</script> 
```

以上是控制器和视图和脚本的一些代码。大写的评论是我的解释。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:15:19.407

为每个选择选项添加一些类/一个 ID，以便您可以识别相关个人。

然后，获取您需要的数据，选择该元素，然后替换其 html 值。

另请注意，这将是使用 ajax 的好时机。——我同意塞缪尔的观点。

```
<script type="text/javascript">
$(document).ready( function() {
        $('.dialog-form').dialog({
           autoOpen: false,
           title: 'New Category',
           modal: true,
           height: 300,
           width: 350,
           close: function() {
           }
        });

        $('.addNewCategory').click(function() {
            $('.dialog-form').dialog('open');
        });

    $('.dialog-form .submit').click(function(e) {
        var value = document.getElementById('CategoryName').value;
        var data = {'data[Category][name]':value};
        e.preventDefault();
        $.ajax({
            type:"POST",
            url: "<?php echo $this->Html->url(array('controller' => 'categories', 'action' => 'addmodal', 'admin' => TRUE)); ?>",
            data: data,
            success: function( echoedResponseFromPHPController ) {
                $('.dialog-form').dialog('close');
                $('#dropdown_92').html( echoedResponseFromPHPController );  
            }
        })
    });
}
</script> 
```

找出您使用的控制器作为 ajax 端点/url 回显/打印您需要的内容。如果您需要多个值，请将其放入 php 数组中，`print json_encode( $yourDataArray );`然后在 js 中使用`echoedResponseFromPHPController`

然后，在您的 ajax 成功回调中，您会将数据称为 echoedResponseFromPHPController.options[2] 或其他内容。是json，所以只要你懂json，就知道怎么引用数据了。

请注意，您可以拨打`echoedResponseFromPHPController`任何您想要的电话。为了清楚起见，我只是写了长名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T13:00:16.960

你在正确的轨道上。您所需要的只是让您的`success`回调替换`select`.

我倾向于这样做的方式是将数据传递给我的后台脚本（就像你正在做的那样），并让该脚本打印出`select`我`option`需要替换原始`select`.

```
<?php
    // background script

    // some processing...

?>

<select name="originalSelectName" id="originalSelectId">
    <option value="0">Select an Option</option>
    <?php foreach ($options as $option): ?>

    <option value="<?= $option['val'] ?>"><?= $option['label'] ?></option>
    <?php endforeach; ?>
</select> 
```

一旦打印出来，您的`success`回调将被触发，您只需替换`select`.

```
$('.dialog-form .submit').click(function(e) {
    var value = document.getElementById('CategoryName').value;
    var data = {'data[Category][name]':value};
    e.preventDefault();
    $.ajax({
        type:"POST",
        url: "<?php echo $this->Html->url(array('controller' => 'categories', 'action' => 'addmodal', 'admin' => TRUE)); ?>",
        data: data,
        success: function(html) {
            $('.dialog-form').dialog('close');

            // replace the drop-down
            $("#originalSelectId").replaceWith(html);
        }
    })
}); 
```

请注意我是如何将`html`参数添加到您的回调中的？这就是返回的 HTML 将自行运行的地方。

希望这可以帮助！

# axapta - 对于所有可用公司的循环？

> ID：11890348
> 
> 赞同：3
> 
> 时间：2012-08-09T19:11:04.210
> 
> 标签：axapta, dynamics-ax-2012

我需要创建一个带有 for 循环的作业（我认为），该循环遍历所有可用的公司并检查特定值。我只是不熟悉如何选择每个公司。

有谁知道它的语法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T10:19:46.017

我在工作中使用以下技术：

```
static void CountIt(Args _args)
{
    DataArea  DataArea;

    void doIt()
    {;
        info(int2str((select Count(RecId) from CustTable).RecId));
    }

    setPrefix("Counting");
    while select DataArea where !DataArea.isVirtual
    {
        print(DataArea.Id);
        setPrefix(DataArea.Id);
        changecompany (DataArea.Id)
        {
            doIt();
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T06:49:26.437

请记住在 changecompany 范围内重置您的表变量，否则您会得到奇怪的结果或根本没有结果。一位同事要像你一样完成一项任务，但他在 changecompany 范围内的代码完全没有得到任何结果。我用谷歌搜索并找到了这篇博文：http: [//dynamics-ax-live.blogspot.se/2011/10/what-not-to-forget-when-using.html](http://dynamics-ax-live.blogspot.se/2011/10/what-not-to-forget-when-using.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-10T15:57:20.990

您正在寻找的功能称为“跨公司”数据访问。MSDN 这里有很多代码示例：

X++ 代码：http: [//msdn.microsoft.com/en-us/library/cc518738.aspx](http://msdn.microsoft.com/en-us/library/cc518738.aspx)

主条目：http: [//msdn.microsoft.com/en-us/library/cc634544.aspx](http://msdn.microsoft.com/en-us/library/cc634544.aspx)

# php - 单击发送按钮后，列表框将数据发送到 textarea

> ID：11890350
> 
> 赞同：1
> 
> 时间：2012-08-09T19:11:15.107
> 
> 标签：php, javascript, forms, listbox

我正在使用一个微消息 PHP 脚本，它允许用户以简单干净的形式提交消息。它为条目使用数据库。它的表单部分如下所示：

```
<form name="new_post" method="post" action="admin.php?page=wp-admin-microblog/wp-admin-microblog.php" id="new_post_form">
    <table>
        <thead>
        <tr>
            <td>
                <div id="postdiv" class="postarea" style="display:block;">
                    <textarea name="wpam_nm_text" id="wpam_nm_text" style="width:100%;" rows="4"></textarea>
                </div>
                <p style="text-align:right; float:right;"><input name="send" type="submit" class="button-primary" value="<?php _e('Send', 'wp_admin_blog'); ?>" />
            </td>
        </tr>
        </thead>
    </table>
</form> 
```

我想在表单中添加一个下拉列表，根据用户在下拉列表中选择的内容，当用户单击发送按钮时，应将自定义文本添加到 textarea (wpam_nm_text) 消息的开头。

让我解释一下。我想添加这样的东西：

```
<select>
 <option>Milk</option>
 <option>Coffee</option>
 <option>Tea</option>
</select> 
```

...到表单，如果用户选择“咖啡”选项，那么当用户单击发送按钮时，我想将文本“咖啡让我保持清醒”添加到文本区域。因此，当表单被发送到数据库时，它将包含“咖啡让我保持清醒”，然后是用户在 textarea 中写的内容。

我认为使用 Javascript 或 PHP 可以做到这一点，这两者我都不太了解，所以详细的回复是有益的。此外，如果您需要更多信息或脚本，请随时询问。

如果你想要，这里有一个小提琴：http: [//jsfiddle.net/tNrfA/](http://jsfiddle.net/tNrfA/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:24:56.590

我认为您可以从服务器端访问您的选择下拉值并将其附加到文本

HTML

```
<select name="choice">
 <option>Milk</option>
 <option>Coffee</option>
 <option>Tea</option>
</select> 
```

PHP

```
<?php
$wpam_nm_text = $_POST['wpam_nm_text'];
$choice = $_POST['choice'];

$customText = "default";

if($choice == "Coffee")
   $customText = "Coffee keeps me awake";
else if($choice == "Milk")
   $customText = "WhatStuffYouWantHere";

//combine the dropdown value and the textarea value
$requiredVal = $customText.' '.$wpam_nm_text;

print($requiredVal);

//do whatever you want with $requiredVal
?> 
```

应该这样做

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T19:26:51.240

你是对的，一个简单的 javascript 可以帮助你完成这个。

```
<script>
    var drinks = {
        Milk: "does a body good",
        Coffee: "keeps me up",
        Tea: "is yummy"
    }; 

    function optionChange(){
        var drinkText = drinks [document.getElementById('drinkSelection').value]
        document.getElementById('wpam_nm_text').value = drinkText;       
    }
</script> 
```

这是更新的小提琴 [http://jsfiddle.net/tNrfA/6/](http://jsfiddle.net/tNrfA/6/)

编辑：起初我没有看到这是在提交页面时。为此，codingbiz 发布的内容应该可以正常工作。仅当他们可以更新自定义文本时才应使用这种方式。

如果你确实需要在前端做，你可以做这样的事情。

小提琴：http: [//jsfiddle.net/tNrfA/14/](http://jsfiddle.net/tNrfA/14/)

```
var drinks = {
    Milk: "does a body good",
    Coffee: "keeps me up",
    Tea: "is yummy"
}; 

function submitForm(){
    drinkText = drinks [document.getElementById('drinkSelection').value]
    document.getElementById('wpam_nm_text').value = drinkText + ' ' +document.getElementById('wpam_nm_text').value;
    document.getElementById('new_post_form').submit();       
} 
```

```
 <div id="postdiv" class="postarea" style="display:block;">
                    <textarea name="wpam_nm_text" id="wpam_nm_text" style="width:100%;" rows="4"></textarea>
                </div>
                 <select id="drinkSelection">
                     <option>Milk</option>
                     <option>Coffee</option>
                     <option>Tea</option>
                </select>
                <p style="text-align:right; float:right;"><input name="send" type="button" class="button-primary" value="<?php _e('Send', 'wp_admin_blog'); ?>" onclick="submitForm()" />
            </td>
        </tr>
        </thead>
    </table>
</form>​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T19:47:48.410

codingbiz 发布的答案对你有用..（不能投票，没有特权：（）。

但是，如果您想要一个 javascript 解决方案，我认为这应该适合您..

```
<script type="text/javascript">

function setText(){

  var drink = document.getElementById('drink');
   var feed = document.getElementById('feed');
    feed.value = drink.value + " keeps me awake:" + feed.value;

    }

</script>

<form name="new_post" method="post"  id="new_post_form">
        <table>
            <thead>
            <tr>
                <td>

                    <div id="postdiv" class="postarea" style="display:block;">
                        <textarea name="wpam_nm_text" id="feed" style="width:100%;" rows="4"></textarea>
                    </div>
                     <select id = "drink">
                         <option>Milk</option>
                         <option>Coffee</option>
                         <option>Tea</option>
                    </select>
                    <p style="text-align:right; float:right;"><input name="send" type="submit" onClick="setText()" class="button-primary" id ="submit" value='go' />
                </td>
            </tr>
            </thead>
        </table>
 </form>​ 
```

# php - 使用 SOAP 和 ckWebServicePlugin 的第一步：好奇心

> ID：11890351
> 
> 赞同：0
> 
> 时间：2012-08-09T19:11:15.110
> 
> 标签：php, web-services, soap, symfony1, symfony-1.4

我已经按照该插件的[教程](http://www.symfony-project.org/plugins/ckWebServicePlugin)进行操作，它可以工作，但是我只是尝试返回一个字符串（foobar）而不是乘法运算的结果：

```
/**
   * An action multiplying two numbers.
   *
   * @WSMethod(webservice='MathApi')
   *
   * @param double $a Factor A
   * @param double $b Factor B
   *
   * @return string The result  //this is the first change
   */
  public function executeMultiply($request)
  {
    $factorA = $request->getParameter('a');
    $factorB = $request->getParameter('b');

    if(is_numeric($factorA) && is_numeric($factorB))
    {
      $this->result = 'foobar';  //this is the second and last change

      return sfView::SUCCESS;
    }
    else
    {
      return sfView::ERROR;
    }
  } 
```

当我运行网络服务时，我得到了这个：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ns1="http://sf1prueba.local/">
   <SOAP-ENV:Body>
      <ns1:factura_multiplyResponse>
         <result>0</result>
      </ns1:factura_multiplyResponse>
   </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

如您所见，它以结果“0”的形式返回，而我期望的是“foobar”。

# marionette - 只有特定区域的 Backbone.Marionette 淡入淡出过渡？

> ID：11890354
> 
> 赞同：9
> 
> 时间：2012-08-09T19:11:20.207
> 
> 标签：marionette

我知道我可以使用以下方法覆盖所有区域以添加淡入淡出过渡。

```
Marionette.Region.prototype.open = function(view){
  this.$el.hide();
  this.$el.html(view.el);
  this.$el.fadeIn()
} 
```

有没有办法只覆盖特定区域或视图？我的布局中有某些区域我希望能够淡入，而其他区域应该立即渲染。

谢谢，

dk

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-09T21:14:04.947

您可以`Region`像定义任何 Backbone 对象一样定义自定义，并将此代码添加到该区域类型。

```
 MyRegion = Backbone.Marionette.Region.extend({

  el: "#some-element",

  open: function(view){
    this.$el.hide();
    this.$el.html(view.el);
    this.$el.fadeIn();
  }

});

MyApp.addRegions({
  myRegion: MyRegion
}); 
```

请注意，我`el`在区域定义中包含了 。如果您想在多个区域中重复使用它，您必须创建一个基本区域并从该区域扩展您需要的每个区域。

```
 FadeInRegion = Backbone.Marionette.Region.extend({

  open: function(view){
    this.$el.hide();
    this.$el.html(view.el);
    this.$el.fadeIn();
  }

});

MyApp.addRegions({
  myRegion: FadeInRegion.extend({el: "#some-element"}),
  anotherRegion: FadeInRegion.extend({el: "#another-element"})
}); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-19T13:39:14.113

我刚刚使用的另一个选项是覆盖动画的 open 方法是创建一个单独的配置文件，覆盖该配置文件中的 open 方法，以及测试类名的条件逻辑。所以这就是我使用咖啡脚本和 Marionette 模块所做的事情。

创建我的视图：

```
@Item.module "ItemApp.Add", (Add, App, Backbone, Marionette, $,_) ->

    class Add.Item extends Marionette.ItemView

        template: "#add-item"
        className: "add-modal" 
```

在我的配置文件中，我只是测试 className 以执行所需的动画：

```
do (Marionette) ->
    _.extend Marionette.Region::,
        open: (view) ->
            if view.el.className == "add-modal"
                console.log "the add-modal has been called"
                @$el.hide()
                @$el.html(view.el)
                @$el.show().animate "left": '0', queue: false 
```

# javascript - mobiscroll 不在表单输入中输入日期时间值

> ID：11890360
> 
> 赞同：0
> 
> 时间：2012-08-09T19:11:42.967
> 
> 标签：javascript, jquery, mobiscroll

弹出窗口有效，但每次我单击 SET 按钮时，似乎都试图在 INPUT 字段中输入值，然后发生奇怪的事情：页面闪烁，几乎就像刷新一样，并且 INPUTS 中的所有值都是清除。然后页眉中的文本值在其自身下方重复。这在 Firefox、Chrome、Safari 中重现。如果有人愿意在此页面上多加一双眼球，我已暂时打开此页面的权限：http: [//bit.ly/MD8FVW](http://bit.ly/MD8FVW)

这是我的代码：

```
 var now = new Date();

        $('#sessionTime').scroller({
            preset: 'datetime',
            minDate: new Date(now.getFullYear(), now.getMonth(), now.getDate()),
            theme: 'ios',
            display: 'modal',
            mode: 'scroller'
        });

        $('#sessionTime').click(function(){
            $('#sessionTime').scroller('show'); 
            return false;
        }); 
```

我还在页面上使用 iUI 来模拟 iOS 外观，但我不知道这是否会造成干扰。任何想法将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T03:22:18.273

删掉很多东西，然后慢慢地一一加回来，我发现罪魁祸首是：

```
<script type="application/x-javascript" src="iui/iui.js"></script> 
```

我猜 mobiscroll 不适合 iUI。幸运的是，我只需要 iUI CSS 而不是这个特定页面上的脚本，所以我可以删除脚本引用。

# delphi - 使用 CopyFile 函数时出错

> ID：11890371
> 
> 赞同：4
> 
> 时间：2012-08-09T19:12:51.460
> 
> 标签：delphi, delphi-5

您好，我正在使用`CopyFile`Delphi 5 中的功能。但是文件没有被复制到目的地。我也看不到错误。`CopyFile`了解失败原因的最佳方法是什么？

```
if CopyFile(source, dest, false) then
  ShowMessage('Success')
else
  ShowMessage('Error'); 
```

我总是收到显示错误。:(

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-09T19:19:33.697

如果函数失败，您可以获得扩展的错误信息，调用该 [`GetLastError`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms679360%28v=vs.85%29.aspx) 方法或使用 RaiseLastOSError 方法。

检查这个样本

```
 try
    If copyFile(source , dest,false) then
     ShowMessage('Success')
    else
     RaiseLastOSError;
  except  on E: Exception do
     showMessage(Format('Error executing copyFile %s',[E.Message]));
  end; 
```

# clearcase - 如何在 ClearCase 中移动触发器脚本的位置？

> ID：11890372
> 
> 赞同：2
> 
> 时间：2012-08-09T19:12:55.970
> 
> 标签：clearcase

我们必须移动触发器脚本的位置。更改该位置的 cleartool 命令是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:31:44.840

[**`mktrtype`**](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_mktrtype.htm)您可以使用 -replace 选项重新定义现有触发器类型。

您需要使用最初用于定义触发器的相同命令，但将位置替换为`-execunix`and/or的新路径`-execwin`。

```
-rep/lace 
```

> 用新定义替换现有的 type-name 定义。
> 如果您不包括现有定义中的选项，则它们的值将替换为默认值。

# android - 在新位置多次绘制矩形不起作用

> ID：11890377
> 
> 赞同：0
> 
> 时间：2012-08-09T19:13:13.823
> 
> 标签：android, dynamic, android-asynctask, draw, shapes

每次我用这段代码创建一个新的矩形时，它都不起作用，我只能绘制到指定的位置，如果我在执行时使用变量来改变位置，它不会绘制任何东西。

在 Asynctask 方法内部：

```
rect = new desenho(main.this, x, y); 
```

这称为：

```
public class desenho extends View{

    int x, y;
    Paint mPaint = new Paint();

    public desenho(Context context, int x, int y) {
        super(context);
        this.x = x;
        this.y = y;
        mPaint.setStrokeWidth(3);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setColor(Color.BLACK);
    }

    @Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
        setMeasuredDimension(width, y);
    }

    @Override
    protected void onDraw(Canvas c) {
        // TODO Auto-generated method stub
        super.onDraw(c);
        c.drawRect(5, y, width-5, y+x, mPaint);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:35:45.083

在我看来，您希望大小与位置无关。为此，您的 Canvas.drawRect(left, top, right, bottom, paint) 必须满足这些要求：

*   左-右=一个
*   顶部 - 底部 = b

其中 a, b 是常数。例子：

```
c.drawRect(xPos, yPos, xPos + width - 1, yPos + height - 1, mPaint); 
```

你在这个例子中看到

*   左 - 右 = xPos - (xPos + 宽度 - 1) = 1 - 宽度
*   顶部 - 底部 = yPos - (yPos + 高度 - 1) = 1 - 高度

两者都是恒定的→大小是恒定的。

# scala - 玩！从单独的 mongo 集合中选择项目的表单

> ID：11890379
> 
> 赞同：3
> 
> 时间：2012-08-09T19:13:22.700
> 
> 标签：scala, mongodb, playframework, playframework-2.0, salat

因此，对于我正在开发的系统，我正在尝试做类似的事情：

如果我有一个名为 User 的模型，它有一个 _id (ObjectId)、用户名、密码，然后我正在尝试创建一个新约会，我的表单将查找患者（在下拉列表中显示患者姓名，但实际上会选择病人的 ObjectId）和预约时间。

现在我到处找，找不到任何接近我想要达到的解决方案的东西。

在 Application.scala 中，我有：

```
val appointmentForm= Form(
  tuple(
    "patient" -> nonEmptyText, // ObjectId
    "startTime" -> nonEmptyText)) 
```

我不确定如何充分发挥我的观点以反映患者。我知道你必须做这样的事情：

```
@select(appointmentForm("patient"), options(..) 
```

谁能给我任何关于如何查找此示例的患者以获取 Mongo ObjectId 的想法。

顺便说一句，我使用的 ORM 是[https://github.com/leon/play-salat](https://github.com/leon/play-salat)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-11T14:30:41.323

这是一个示例，我将如何做到这一点：

路线：

```
GET      /test        controllers.Test.show
POST     /test        controllers.Test.submit 
```

看法：

```
@(f: Form[(ObjectId, String)], users: Seq[(ObjectId, String)])
@import helper._

@form(action = routes.Test.submit) {
  @select(f("patient"), options = users.map(user => (user._1.toString, user._2)))
  @inputText(f("startTime"))
  <input type="submit" value="Submit!">
} 
```

控制器：

```
package controllers

import org.bson.types.ObjectId
import play.api.data.format.Formatter
import play.api.mvc._
import play.api.data.Forms._
import play.api.data._
import play.api.data.FormError
import play.api.Logger

object Test extends Controller {

  /**
   * Converts an ObjectId to a String and vice versa
   */
  implicit object ObjectIdFormatter extends Formatter[ObjectId] {
    def bind(key: String, data: Map[String, String]) = {
      val error = FormError(key, "error.required.ObjectId", Nil)
      val s = Seq(error)
      val k = data.get(key)
      k.toRight(s).right.flatMap {
        case str: String if (str.length() > 0) => Right(new ObjectId(str))
        case _ => Left(s)
      }
    }
    def unbind(key: String, value: ObjectId) = Map(key -> value.toStringMongod())

    val objectId: Mapping[ObjectId] = of[ObjectId]
  }

  // import to get objectId into scope
  import ObjectIdFormatter._

  // define user tuples consisting of username and ObjectId for the dropdown. In real lif the list is probably fetched from the db
  def users: Seq[(ObjectId, String)] =
    Seq((new ObjectId("4f456bf744aed129d04db1bd"), "dieter"), (new ObjectId("4faa410b44aec5a0a980599f"), "eva"))

  val appointmentForm= Form(
    tuple(
      "patient" -> objectId, // use the ObjectIdFormatter
      "startTime" -> nonEmptyText))

  def show = Action {
    Ok(views.html.test(appointmentForm, users))
  }

  def submit = Action { implicit request =>
    appointmentForm.bindFromRequest.fold(
      formWithErrors => {
        Logger.warn("errors: " + formWithErrors.errors)
        BadRequest(views.html.test(formWithErrors, users))
      },
      formContent => {
        Logger.info("formContent: " + formContent)
        Ok(views.html.test(appointmentForm, users))
      })
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T19:09:03.027

仅供参考，在看到 maxmc 的这篇精彩评论后，我终于解决了这个问题。事实证明，我的问题确实是一个基本的 scala 问题。我没有意识到 List 是 Seq 的实现。所以使用 Mongo，在这个例子中，你要做的就是在你的代码中如下：

控制器

```
 def newAppointment= Action {
   val pList  = Patient.findAll.toList
   Ok(views.html.admin.newuser(appointmentForm, pList))
 } 
```

看法：

```
@(appointmentForm: Form[(String, String, String)], pList : List[Patient]) 
```

…………

```
@select(
        appointmentForm("patient"),
        pList.map{ p =>
            p.id.toString -> (p.patientName)
        },
        '_default -> "--- Select a Patient ---",
        '_label -> "Patient"
    ) 
```

Model.findAll 函数返回 Iterator[Type]。我们不希望那样。我们需要检索一个可以在视图内遍历的列表。这就是你这样做的原因 findAll.toList 。从那里，@select 将映射 pList，并且数据库中的每个条目的 id 都与患者姓名相关联。注意它是一个字符串，因为@Select 标签的 Seq 需要 Seq(String, String)

# ios - 将日期从 mysql 转换为 NSDate

> ID：11890380
> 
> 赞同：1
> 
> 时间：2012-08-09T19:13:27.367
> 
> 标签：ios, nsdate

我在 mysql 中有一个保存日期的 varchar。我一直在尝试将其转换为`NSDate`，但我没有尝试过任何工作。从`NSString`mysql 看起来像这样：

2012 年 8 月 11 日上午 10:17

到目前为止，与转换相关的所有帖子`NSString`都不`NSDate`适用于此字符串。如果有人可以请帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:20:48.737

我假设您使用 JSON 从 MySQL（服务器）获取数据并有一个名为 myJSONObject 的 JSON 对象

**`NOTE:`** `myJSONObject`必须使用诸如[NSJSONSerialization 之类的框架进行序列化](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSJSONSerialization_Class/Reference/Reference.html)

**编辑一些详细的问题链接**

您已要求将数据转换为**2012 年 8 月 11 日上午 10:17，**但我的示例代码尝试转换为**2012-08-11 10:17:..**，我为您编辑了示例代码。有关更多信息，请查看[NSDateFormatter](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateFormatter_Class/Reference/Reference.html)

**请注意：**`month_from_date`您可以使用[NSDateComponents](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSDateComponents_Class/Reference/Reference.html)获取变量。[这里](https://stackoverflow.com/questions/3694867/nsdate-get-year-month-day)和[这里](https://stackoverflow.com/questions/1731322/get-all-days-of-any-month-with-objective-c)有一些关于它的问题.. 如果你不能，请打开一个新帖子。

```
 NSString* dateString = [myJSONObject objectForKey:@"date"];

            NSDateFormatter* fmt = [NSDateFormatter new];
            [fmt setTimeZone:[NSTimeZone defaultTimeZone]]; 
           // [fmt setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
           [fmt setDateFormat:@"%@ DD,YYYY, HH:mm",month_from_date]; 
           NSDate* dateFromString = [fmt dateFromString:dateString];
NSLog("Here is date from string: %@",dateFromString); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T08:04:26.603

要将 a 转换`NSString`为 a `NSDate`，请使用`NSDateFormatter`.

```
NSString *_dateString = @"August 11, 2012, 10:17 AM";
NSDateFormatter *_dateFormatter = [[NSDateFormatter alloc] init];
[_dateFormatter setDateFormat:@"MMMM dd, yyyy, HH:mm a"];
NSDate *_date = [_dateFormatter dateFromString:_dateString];
NSLog(@"raw date : %@", _date);
NSLog(@"formatted date : %@", [_dateFormatter stringFromDate:_date]); 
```

输出`NSDate`将包含日期：

```
raw date : 2012-08-10 23:17:00 +0000
formatted date : August 11, 2012, 11:17 AM 
```

您可以根据需要对不同的输出进行格式化`NSDate`，它是目前为止，但您可以使用`NSDate`包含日期的对象。

***注意：**我们在转换时不知道输入日期的时区，因此`NSDate`使用它的默认值。如果您设置当前时区，您将在转换后获得正确的日期。*

# iphone - 滚动键盘覆盖的文本字段

> ID：11890381
> 
> 赞同：1
> 
> 时间：2012-08-09T19:13:30.470
> 
> 标签：iphone, ios, xcode, uiscrollview

当文本字段被键盘阻止时，我正在努力让我的 UIscroll 通过遵循此文档进行滚动

[http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html#//apple_ref/doc/uid/TP40009542-CH5-SW7](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html#//apple_ref/doc/uid/TP40009542-CH5-SW7)

然而可悲的是......提到了一个变量，activeField，我无法弄清楚它是如何声明的。如果有人可能会建议如何/在哪里声明它，或者甚至在激活键盘时滚动的解决方案会有所帮助，我真的很想。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-26T19:41:34.730

要回答您的具体问题，由于[Apple 文档](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html#//apple_ref/doc/uid/TP40009542-CH5-SW7)仅使用 activeField 来获取大小数据，您可以简单地将其声明为私有全局**UIView *activeField**，它同样适用于 textFields、textViews 等。

然而，他们的代码实际上并不能很好地工作。我必须对他们的代码进行一些更改才能让我的代码正常工作。这段代码基本上是他们的，只是做了一些小的调整来处理下面列出的所有情况：

1）如果您在视图中嵌套了一个较小的滚动视图，而不是全屏滚动视图，它仍然可以工作。2) 如果要将文本字段向下移动到键盘焦点区域以及从键盘后面向上移动它们。3) 适用于各种大小的 textViews 和 textFields 4) 如果键盘当前正在显示，它会将任何新点击的字段移动到焦点区域 5) 如果您的内容已经滚动并调用键盘 6) 适用于所有键盘所有设备的大小（无硬编码常量）

首先，为这些创建私有变量：

```
UIView *_activeField;
CGFloat _keyboardHeight;
BOOL _isShowingKeyboard; 
```

接下来，只需将此代码剪切并粘贴到您的 ViewController 中（看起来很多，但还不错）。

```
#pragma mark TextFieldKeyboardScrolling

- (void)registerForKeyboardNotifications {
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWasShown:) name:UIKeyboardDidShowNotification object:nil];
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(keyboardWillBeHidden:) name:UIKeyboardWillHideNotification object:nil];
}

- (void)adjustInputFieldsForKeyboard {
    CGFloat keyBoardTopInScrollView = self.view.frame.size.height - _keyboardHeight - self.scrollView.frame.origin.y;
    CGFloat inputFieldBottomInVisibleScrollView = _activeField.frame.origin.y - self.scrollView.contentOffset.y + 30 /* small buffer for cursor size */;
    CGPoint scrollPoint;
    if (keyBoardTopInScrollView > inputFieldBottomInVisibleScrollView) {
        scrollPoint = CGPointMake(0.0, self.scrollView.contentOffset.y - (keyBoardTopInScrollView - inputFieldBottomInVisibleScrollView));
    } else {
        scrollPoint = CGPointMake(0.0, self.scrollView.contentOffset.y + (inputFieldBottomInVisibleScrollView - keyBoardTopInScrollView));
    }
    [self.scrollView setContentOffset:scrollPoint animated:YES];
}

- (void)keyboardWasShown:(NSNotification*)aNotification {
    _isShowingKeyboard = YES;
    NSDictionary* info = [aNotification userInfo];
    _keyboardHeight = [[info objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size.height;
    UIEdgeInsets contentInsets = UIEdgeInsetsMake(0.0, 0.0, _keyboardHeight, 0.0);
    self.scrollView.contentInset = contentInsets;
    self.scrollView.scrollIndicatorInsets = contentInsets;
    [self adjustInputFieldsForKeyboard];
}

- (void)keyboardWillBeHidden:(NSNotification*)aNotification {
    _isShowingKeyboard = NO;
    UIEdgeInsets contentInsets = UIEdgeInsetsZero;
    self.scrollView.contentInset = contentInsets;
    self.scrollView.scrollIndicatorInsets = contentInsets;
}

#pragma mark UITextFieldDelegate

- (void)textFieldDidBeginEditing:(UITextField *)textField {
    _activeField = textField;
    if (_isShowingKeyboard) {
        [self adjustInputFieldsForKeyboard];
    }
}

- (void)textFieldDidEndEditing:(UITextField *)textField {
    _activeField = nil;
} 
```

就是这样，只需调用 [self registerForKeyboardNotifications]; 在您的 viewDidLoad 方法中，连接您的 scrollView 插座和情节提要中的 textField/textView 代表，一切就绪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:21:58.777

仅当其中一个 texfields 变为活动状态（成为第一响应者）时，键盘才处于活动状态。因此，您应该收听 UITextField 委托方法以查看何时以及哪个 uitextfield 成为第一响应者。- (void)textFieldDidBeginEditing:(UITextField *)textField

如果您为您的文本字段分配标签或使其成为 ivar，您还可以了解哪个 uitextfield 已变为活动状态并获取其框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T19:33:36.780

我不使用滚动视图或遵循上述文档。

这是在我的不使用滚动视图的情况下的方法

> textFieldShouldBeginEditing

`CGRect frame = self.view.frame;
frame.origin.y = <some negative value>;
self.view.frame = frame`

在我的

> textFieldShouldEndEditing

`CGRect frame = self.view.frame;
frame.origin.y = <some positive value>; // absolute value of your above negative value
self.view.frame = frame`

以上对我有用。请记住，这些是文本字段委托方法。所以你需要设置你的委托。

# php - 为什么代码不起作用，尽管它看起来对我来说还可以？

> ID：11890384
> 
> 赞同：1
> 
> 时间：2012-08-09T19:13:38.433
> 
> 标签：php, arrays, function, screen-scraping, amazon

我之前在谷歌搜索时发现了一个脚本并将其用于报废目的，我的主要课程

在我的 amazon.php 中，我编写了以下脚本

```
include('scrape.php');
set_time_limit(0);

$ASIN       =   'B000GEM3RI';
$shipArray  =   shipingPrice($ASIN);
var_dump($shipArray);
print_r($shipArray);
echo $shipArray;

function shipingPrice($city){
        $shipArray = array();
        $scrape = new Scrape();
        $url = 'http://www.amazon.com/gp/offer-listing/'.$city.'/ref=dp_olp_new?ie=UTF8&condition=new';
        $scrape->fetch($url);
        $data = $scrape->removeNewlines($scrape->result);
        $data = $scrape->fetchBetween('<table cellspacing="0" cellpadding="0" width="100%" border="0"> <thead class="columnheader"><tr><th scope="col" class="price">Price + Shipping</th><th scope="col" class="condition">Condition</th><th scope="col" class="seller">Seller Information</th><th scope="col" class="readytobuy">Buying Options</th></tr></thead>','</table>',$data,true); 
        $rows = $scrape->fetchAllBetween('<tr','</tr>',$data,true);
        $i=0;$j=0;
        foreach ($rows as  $row){
            if($i!=0){
                if($i!=2){              
                    $record = array();
                    $cells = $scrape->fetchAllBetween('<td','</td>',$row,true);                 
                    $record['price'] = strip_tags($cells[0]);

                    if(stristr($record['price'],'oz')===False && stristr($record['price'],'/')===False)
                    {
                        $listPrice=$scrape->fetchBetween('$',' +',$record['price']);
                    }else{
                        $listPrice=$scrape->fetchBetween('$',' (',$record['price']);
                    }
                    //print_r($listPrice);
                    if($listPrice==''){
                        $listPrice=$scrape->fetchBetween('$',' &',$record['price']);
                        $shipPrice='0';                     
                    }else{
                        $shipPrice=$scrape->fetchBetween('+ $','s',$record['price']);
                    }
                    $shipPrice= floatval($shipPrice);
                    //####                  
                    $sellerIdInfo = $cells[2];                                          $sellerIdArray=$scrape->fetchAllBetween('&marketplaceSeller=0&seller=','"><b>',$sellerIdInfo);                  
                    if(count($sellerIdArray)>1){
                        $sellerId=$sellerIdArray[0];
                    }else{
                        $temp = explode('"id',$sellerIdArray[0]);
                        $sellerId=$temp[0];                                         
                    }
                    //##
                    $sellerName =$scrape->fetchBetween('Seller:','Seller',$record['price']);                    
                    $sellerInfo=$scrape->fetchAllBetween('alt="','"',$cells[2],true);           
                    $sellerName=str_replace(array('alt="','"'),array('',''),$sellerInfo[0]);
                    if($sellerName!=""){        
                        //
                    }else{
                        $sellerName = $scrape->fetchBetween('<span class="sellerHeader">Seller:</span>','</b></a>',$cells[2],true);
                        $sellerName=str_replace("Seller:","",$sellerName);
                        $sellerName=$scrape->fetchBetween('<b>','</b>',$sellerName);            
                    }

                    array_push($shipArray,array('sellerName'=>$sellerName,'sellerId'=>$sellerId,'price'=>$listPrice,'shipPrice'=>$shipPrice));

                }
            }
            $i++;
        }
        return $shipArray;
} 
```

此脚本的 url 是[amazon](http://www.amazon.com/gp/offer-listing/B000GEM3RI/ref=dp_olp_new?ie=UTF8&condition=new)

当我回显它，var_dump it 或 print_r 时，显示一个空数组，我使用 firebug 检查了页面，对我来说，看起来我的代码中一切正常

有人可以告诉我为什么我可以从页面访问任何内容，尽管我的代码没问题吗？

谢谢你帮助我

**编辑：-**

通过在我的废料类函数 fetch($url) 中添加 return `$this->result = curl_exec($ch);`，我确保 Page 被成功检索...

**EDIT-2：-**

在按照答案中提供的建议工作后，它尝试了

```
$shipArray[]=array('sellerName'=>$sellerName,'sellerId'=>$sellerId,'price'=>$listPrice,'shipPrice'=>$shipPrice); 
```

在我的函数中，但仍然是相同的空数组

EDIT-3

我更改了以下功能

```
function fetchBetween($needle1,$needle2,$haystack,$include=false){

        $position = strpos($haystack,$needle1);

        if ($position === false) { return ' it was null data'; } 
```

当我`echo $data;`在我的脚本文件中回显时，

> 这是空数据

已打印，所以看起来这行代码`$position = strpos($haystack,$needle1);`不起作用，

我对吗？

如果是，现在该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:21:56.630

您为什么将 var 定义为尚未定义的函数的结果？

```
$shipArray  =   shipingPrice($ASIN);
var_dump($shipArray);
print_r($shipArray);
echo $shipArray; 
```

ShippingPrice 函数在代码中较低。IE shipArray 将为空

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T16:37:50.860

明白了，我是对的，问题不在于我的代码

在线的

```
 $data = $scrape->fetchBetween('<table cellspacing="0" cellpadding="0" width="100%" border="0"> <thead class="columnheader"><tr><th scope="col" class="price">Price + Shipping</th><th scope="col" class="condition">Condition</th><th scope="col" class="seller">Seller Information</th><th scope="col" class="readytobuy">Buying Options</th></tr></thead>','</table>',$data,true); 
```

有一个额外的空间`border="0"> <thead class`，这是造成问题，曾经，我从

```
<table cellspacing="0" cellpadding="0" width="100%" border="0"><thead class="columnheader"> 
```

我的代码没问题..

谢谢大家

# php - 在php中调整动态水印png的大小

> ID：11890385
> 
> 赞同：4
> 
> 时间：2012-08-09T19:13:38.353
> 
> 标签：php, html, gd

我正在尝试自动调整水印的大小以覆盖图像的 1/4。我有水印代码工作，但我不能让它正确调整大小。

```
<?php

$image = $_GET['src'];
$path_parts = pathinfo($image);
$extension=strtolower($path_parts['extension']);
$size = (imagesx($image)/2);

$stamp = ImageCreateFromPNG("watermark.png"); 
ImageAlphaBlending($stamp,true); 
ImageSaveAlpha($stamp,true); 

$w = imagesx($stamp); 
$h = imagesy($stamp); 

if( $w==0 or $h==0 ) die("ERROR - zero image size"); 

$percent = $size / (($w>$h)?$w:$h); 
$nw = intval($w*$percent); 
$nh = intval($h*$percent); 

$stamp_resized = ImageCreateTrueColor($nw,$nh); 

ImageAlphaBlending($stamp_resized,false); 
ImageSaveAlpha($stamp_resized,true); 

if(!empty($transparent_color)) 
{ 
    $transparent_new = ImageColorAllocate($stamp_resized,$transparent_color['red'],$transparent_color['green'],$transparent_color['blue']); 
    $transparent_new_index = ImageColorTransparent($stamp_resized,$transparent_new); 
    ImageFill($stamp_resized, 0,0, $transparent_new_index); 
} 

if(ImageCopyResized($stamp_resized,$stamp, 0,0,0,0, $nw,$nh, $w,$h )) 
{ 
    ImageDestroy($stamp); 
    $stamp = $stamp_resized; 
} 

//Everything from here on works perfect
if(file_exists($image)){
    if ($extension == 'gif')$im = imagecreatefromgif($_GET['src']);
    if ($extension == 'jpg')  {

        $im = imagecreatefromjpeg($_GET['src']);

        $marge_right = 10;
        $marge_bottom = 10;
        $sx = imagesx($stamp);
        $sy = imagesy($stamp);

        imagecopy($im, $stamp, imagesx($im) - $sx - $marge_right, imagesy($im) - $sy - $marge_bottom, 0, 0, $sx, $sy);

    }
}
else{
$im = imagecreatefromgif('images/no_picture.gif');
}

// Output and free memory
header('Content-type: image/jpeg');
imagejpeg($im);  
imagedestroy($im);
?> 
```

我检查了错误日志，并有以下错误：

```
[Thu Aug 09 16:47:05 2012] [error] [client 24.224.164.149] PHP Warning:  imagesx() expects parameter 1 to be resource, string given in {path removed}/watermark.php on line 15

[Thu Aug 09 16:47:05 2012] [error] [client 24.224.164.149] PHP Warning:  imagecreatetruecolor(): Invalid image dimensions in {path removed}/watermark.php on line 32

[Thu Aug 09 16:47:05 2012] [error] [client 24.224.164.149] PHP Warning:  imagealphablending() expects parameter 1 to be resource, boolean given in {path removed}/watermark.php on line 34

[Thu Aug 09 16:47:05 2012] [error] [client 24.224.164.149] PHP Warning:  imagesavealpha() expects parameter 1 to be resource, boolean given in {path removed}/watermark.phpp on line 35

[Thu Aug 09 16:47:05 2012] [error] [client 24.224.164.149] PHP Warning:  imagecopyresized() expects parameter 1 to be resource, boolean given in {path removed}/watermark.php on line 44 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T19:52:30.537

原来我传递 imagesx 是图像的路径（$image），而不是图像资源（$im）本身。我重新编写了代码，以便在调整图像大小之前加载 jpg。

这修复了所有级联错误，现在可以正常工作了。故事的道德，检查错误日志。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:55:39.853

看起来像

```
 $size = (imagesx($image)/2); 
```

可能是您的问题，因为 imagesx 需要由图像创建功能生成的图像资源，并且您给了它一个 src。

# oracle11g - 尽管 tnsnames.ora 中不存在数据库名称，TOAD 仍会连接

> ID：11890387
> 
> 赞同：0
> 
> 时间：2012-08-09T19:13:50.960
> 
> 标签：oracle11g, toad, tnsnames

我进入 TOAD 并输入了由 DBA 提供给我的数据库的 TNS 名称。我还输入了用户名和密码，它连接正常。我的困惑是 tnsnames.ora 文件没有与该数据库名称对应的任何条目。那么 TOAD 是如何解析数据库名称的呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:40:41.467

在您的 Oracle 客户端中，ldap.ora 文件可以列出一个或多个 ldap 服务器名称，可以查询这些名称以获取给定 TNS 名称的 Oracle 实例信息。这样，TOAD（和其他应用程序）可以解析 tnsnames.ora 文件中未列出的 Oracle 数据库名称。

# java - 用方法改变jlabel

> ID：11890388
> 
> 赞同：2
> 
> 时间：2012-08-09T19:14:00.120
> 
> 标签：java, swing, user-interface, jbutton, jlabel

我正在编写一个转换文件的小程序，我想弹出一个框，要求用户在程序循环并转换所有相关文件时请稍候，但我遇到了一个小问题。弹出的框应该有一个 JLabel 和一个 JButton，而用户正在“等待”我想显示一条消息说请稍候，以及一个禁用的“OK”JButton，然后当它完成时我想设置文本的 JLabel 让他们知道它成功地转换了他们的文件，并给他们计算转换了多少文件。（我写了一个名为 alert 的方法，它设置标签的文本并启用按钮。）问题是，当程序运行时，框是空的，标签和按钮不可见，当它完成时，标签显示我想要的最终文本，并且按钮显示为已启用。我不确定到底发生了什么，我尝试多次更改 JLabel 和 JButton 的修饰符，但我似乎无法让它正常工作。这是弹出框的代码，任何帮助都非常有用。

```
import java.awt.BorderLayout;
import java.awt.FlowLayout;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class PleaseWait extends javax.swing.JFrame{

    private static final int height = 125;
    private static final int width = 350;
    final static JLabel converting = new JLabel("Please Wait while I convert your files");
    private static JButton OK = new JButton("OK");

    public PleaseWait(){
        // creates the main window //
        JFrame mainWindow = new JFrame();
        mainWindow.setTitle("Chill For A Sec");
        mainWindow.setSize(width, height);
        mainWindow.setDefaultCloseOperation(DISPOSE_ON_CLOSE);

        // creates the layouts//
        JPanel mainLayout = new JPanel(new BorderLayout());
        JPanel textLayout = new JPanel(new FlowLayout());
        JPanel buttonLayout = new JPanel(new FlowLayout());

        // Sets Text //
        converting.setText("Please wait while I convert your files");

        // disables button //
        OK.setEnabled(false);

        // adds to the layouts //
        textLayout.add(converting);
        buttonLayout.add(OK);
        mainLayout.add(textLayout, BorderLayout.CENTER);
        mainLayout.add(buttonLayout, BorderLayout.SOUTH);

        // adds to the frame //
        mainWindow.add(mainLayout);

        // sets everything visible //
        mainWindow.setVisible(true);

    }

    public static void alert(){
        OK.setEnabled(true);
        String total = String.valueOf(Convert.result());
        converting.setText("Sucsess! " + total + " files Converted");
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:26:53.020

好的，这就是问题所在。您正在扩展 JFrame 。这意味着您的课程是 JFrame。

当您创建`PleaseWait`框架时，您不会对其执行任何操作。这是您看到的空框。相反，您在构造函数中创建了一个*不同*的JFrame。删除你的`mainWindow`，而只是使用`this`. 现在您的所有组件都将添加到您的`PleaseWait`对象中。那应该可以解决您的空白框问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T21:21:16.757

您需要一个应用程序来首先创建您的框架。这是此类应用的一个简单示例。

```
import javax.swing.UIManager;
import java.awt.*;

public class Application {
  boolean packFrame = false;

  //Construct the application
  public Application() {
    PleaseWait frame = new PleaseWait();
    //Validate frames that have preset sizes
    //Pack frames that have useful preferred size info, e.g. from their layout
    if (packFrame) {
      frame.pack();
    }
    else {
      frame.validate();
    }
    //Center the window
    Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();
    Dimension frameSize = frame.getSize();
    if (frameSize.height > screenSize.height) {
      frameSize.height = screenSize.height;
    }
    if (frameSize.width > screenSize.width) {
      frameSize.width = screenSize.width;
    }
    frame.setLocation((screenSize.width - frameSize.width) / 2, (screenSize.height - frameSize.height) / 2);
    frame.setVisible(true);

    frame.convert();

  }

  //Main method
  public static void main(String[] args) {
    try {
      UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
    }
    catch(Exception e) {
      e.printStackTrace();
    }
    new Application();
  }
} 
```

您必须稍微修改框架才能将控件添加到内容窗格。你可以在创建框架后做一些工作，然后调用 alert.

```
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;

public class PleaseWait extends JFrame {

  private static final int height = 125;
  private static final int width = 350;
  final static JLabel converting = new JLabel();
  private static JButton OK = new JButton("OK");
  BorderLayout borderLayout1 = new BorderLayout();
  JPanel contentPane;
  int count;

  public PleaseWait(){
    contentPane = (JPanel)this.getContentPane();
    contentPane.setLayout(borderLayout1);
    this.setSize(new Dimension(width, height));
    this.setTitle("Chill For A Sec");
    this.setDefaultCloseOperation(DISPOSE_ON_CLOSE);

    // creates the layouts//
    JPanel mainLayout = new JPanel(new BorderLayout());
    JPanel textLayout = new JPanel(new FlowLayout());
    JPanel buttonLayout = new JPanel(new FlowLayout());

    // Sets Text //
    converting.setText("Please wait while I convert your files");

    // disables button //
    OK.setEnabled(false);
    OK.addActionListener(new ActionListener(){
      public void actionPerformed(ActionEvent e) {
        System.exit(0);
      }
    });

    // adds to the layouts //
    textLayout.add(converting);
    buttonLayout.add(OK);
    mainLayout.add(textLayout, BorderLayout.CENTER);
    mainLayout.add(buttonLayout, BorderLayout.SOUTH);

    // adds to the frame //
    contentPane.add(mainLayout);
  }

  public void convert(){
    count = 0;
    for (int i = 0; i <10; i++){
      System.out.println("Copy "+i);
      try {
        Thread.sleep(1000);
      } catch (InterruptedException e) {
      }
      count++;
    }
    alert();

  }
  public void alert(){
    OK.setEnabled(true);
//        String total = String.valueOf(Convert.result());
    converting.setText("Sucsess! " + count + " files Converted");
  }

} 
```

# apache - Apache2 - 子域到端口 -> 转发

> ID：11890389
> 
> 赞同：0
> 
> 时间：2012-08-09T19:14:05.250
> 
> 标签：apache, ubuntu, subdomain, portforwarding, dyndns

好的，由于阅读了数百本手册和说明页但仍然没有得到它，我正处于某个时刻，我对自己感到非常愚蠢。我希望你能帮帮我！

我有一台运行 Ubuntu Server 的服务器。在服务器上，我正在运行 ddclient 以使用 dyn.com 更新我的 IP。我有一个域“rasterkomplex.net”，它指向更新的 IP。简单的。

还有一个连接到服务器的摄像头，它运行自己的网络服务器@端口 3360。

当我现在进入时：rasterkomplex.net:3360 - 瞧。但是现在有 2 个 minecraft 服务器同时在 5001 和 5002 上运行。对于每个 mc-server，都有 dynmap-plugins 也在不同的端口上运行一个 webserver。然后是一个网络存储……你明白了吗？我不想记住8个或更多端口，只是为了访问相关服务。

我想要完成的事情：

```
cam.rasterwerks.net -> internal to 127.0.0.1:3360
mc1.rasterwerks.net -> internal to 127.0.0.1:5001
mc2.rasterwerks.net -> internal to 127.0.0.2:5002
etc. etc. etc. 
```

我读了很多关于 VHosts、ProxyPass 等的文章。但我无法管理它来工作。

你能给我一个方向如何做到这一点吗？如果它与虚拟主机有关，也许是一个样本？

非常感谢您的宝贵时间！

问候，

埃利亚斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:31:07.043

`apache`一方面，`ProxyPass`您可以`mod_proxy`在这里或那里重定向您，或者，您也可以做的是 install `haproxy`。然后，根据请求的 URL 中的主机，将请求传递到一个或另一个 Web 存储。

`haproxy`这样做的示例配置是：

```
frontend public
bind        X.X.X.X:80
mode        http
log         global
option      httplog
option      dontlognull
option      httpclose
maxconn     8000
clitimeout  90000

reqisetbe   ^Host:\ .*hudson    hudson

backend hudson
    mode            http
    balance         roundrobin
    contimeout      120000
    srvtimeout      120000
    redispatch
    retries         5
    server          internal.host.com Y.Y.Y.Y:8080 check inter 1000 
```

所以在这个例子中，`haproxy`绑定到端口 80 并且当请求的 URL 包含 时`*.hudson`，它会被重定向到一个`internal.host.com`IP 为`Y.Y.Y.Y`to port的 URL `8080`。

现在，对于`apache`基于解决方案。

您可以定义多个具有不同名称的 VHost，每个 VHost 都包含以下内容。

要进行基于名称的虚拟主机，您的 apache 配置应包含：

```
NameVirtualHost * 
```

然后，虚拟主机本身应该是：

```
<Virtualhost *>
  DocumentRoot "/var/www/somewhere"
  ServerName localhost
  ServerAdmin support@mycompany.com
  DirectoryIndex index.html index.php
  ProxyRequests On
  ProxyPreserveHost On
  ProxyVia full

  <proxy>
    Order deny,allow
    Allow from all
  </proxy>

  ProxyPass        /  http://somehost:1234/
  ProxyPassReverse /  http://somehost:1234/
</Virtualhost> 
```

随意选择对您来说更可行的任何解决方案。

# release-management - 从 Trac 自动生成发行说明

> ID：11890390
> 
> 赞同：3
> 
> 时间：2012-08-09T19:14:05.357
> 
> 标签：release-management, trac, bug-tracking

我们的一个网络应用程序部署到多个不同的服务器上，供该站点的用户访问。我们使用 Trac 来管理错误/工作项，但我们正在寻找一种方法来自动化发布说明，以便服务器升级的用户会看到关于他们何时收到升级的一点通知，以及浏览某种文档 - HTML 或 XML - 在构建时从 Trac 中提取，包含所有项目。

理想情况下，我们将有一个构建后步骤，该步骤将根据主程序集中的 xyz 版本从 Trac 提取 RSS XML，将其保存为 releasenotes.xml，在部署二进制文件、模板等后将驻留在生产环境中。

然后，Web 服务器可以在其安装中显示它。

我的问题是我们的[Trac](http://trac.edgewall.org/)不是公开的（甚至对所有这些在 Trac 中没有帐户的用户也不公开，否则，我们可以将他们指向 Trac 中的报告，他们可以以自己的身份登录以阅读它们），我们可以' t 自动提取此提取，因为它需要表单身份验证过程 - 我找不到不需要身份验证的只读 RSS 提要。

有人解决这个问题吗？还是我应该考虑另一种方法？

我目前在命令脚本中使用 curl 和 grep。我从登录页面获取令牌，然后登录以获取身份验证 cookie，然后提取 RSS 以获得所需的报告。显然这对登录表单的用户/密码/__FORM_TOKEN 结构很敏感。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T23:30:02.743

XMLRPC 插件很可能会成为您的朋友。

Trac-hacks 目前已关闭，因此目前无法获得完整的文档，但这里有一个简短的 Python 脚本可以帮助您入门（处理错误和无效输入作为练习留给读者）。

```
#!/usr/bin/python
# Fetch a Trac page via RPC
# Usage: fetchpage.py <wiki page name> <output file>

import sys
from xmlrpclib import ServerProxy

# Extract info from CLI args
page_title = sys.argv[1]
output_filename = sys.argv[2]

# Authenticate with Trac and fetch the specified wiki page
p = ServerProxy('http://UserName:PassWord@trac.myserver.com/login/rpc')
page = p.wiki.getPageHTML(page_title)

# Write page to file
with open(output_filename,'w') as outfile:
    outfile.write(page) 
```

使用“ ”执行脚本后`./fetchpage.py 'ReleaseNotes/x.y.z' changelog.html`，该文件`changelog.html`将包含指定 wiki 页面的内容，预渲染为 HTML。工具栏和页眉/页脚不包括在内。

这假定您有一个名为的 wiki 页面`ReleaseNotes/x.y.z`，其中包含 xyz 版本的发行说明。就个人而言，我发现使用 wiki 页面创建发行说明文档（使用宏）比解析 RSS 并手动执行要容易。您可以获取此输出，将 CSS 样式表嵌入其中，并以 HTML 格式制作具有吸引力的更改日志，并准备好分发给用户。

请注意，此处使用的帐户除了读取访问权限的正常权限集外，还需要 XML_RPC 权限。

# python - py.test 没有启动（EBUSY：[资源设备]）

> ID：11890398
> 
> 赞同：4
> 
> 时间：2012-08-09T19:14:37.860
> 
> 标签：python, pytest

刚刚安装 py.test`pip install -U pytest`没有错误，但是我们尝试启动时`py.test`出现错误：`EBUSY: [Resource device]: listdir('C:\\Users\\Administrator\\AppData\\Local\\Application Data',)`

这是输出：

```
C:\Users\Administrator>py.test  
========================== test session starts ===========================  
platform win32 -- Python 2.7.3 -- pytest-2.2.4  
collected 0 items / 1 errors  

================================= ERRORS =================================
___________________________ ERROR collecting . ___________________________  
C:\Python27\lib\site-packages\py\_path\common.py:315: in visit  
>       for x in Visitor(fil, rec, ignore, bf, sort).gen(self):  
C:\Python27\lib\site-packages\py\_path\common.py:361: in gen  
>               for p in self.gen(subdir):  
C:\Python27\lib\site-packages\py\_path\common.py:361: in gen  
>               for p in self.gen(subdir):  
C:\Python27\lib\site-packages\py\_path\common.py:361: in gen  
>               for p in self.gen(subdir):  
C:\Python27\lib\site-packages\py\_path\common.py:346: in gen  
>           entries = path.listdir()  
C:\Python27\lib\site-packages\py\_path\local.py:320: in listdir  
>       for name in py.error.checked_call(os.listdir, self.strpath):  
C:\Python27\lib\site-packages\py\_error.py:83: in checked_call  
>           raise cls("%s%r" % (func.__name__, args))  
E           EBUSY: [Resource device]: listdir('C:\\Users\\Administrator\\Ap 
pData\\Local\\Application Data',)  
======================== 1 error in 0.03 seconds ========================= 
```

那会是什么？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T19:28:36.803

显然，当被调用时，它开始使用[标准测试发现规则](https://docs.pytest.org/en/latest/goodpractices.html#test-discovery)`py.test`查看文件/文件夹。并且某些文件夹具有限制访问权限的访问权限，因此会发生此错误。

要使用`py.test`一个必须首先导航到包含测试用例的文件夹。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2020-05-13T02:16:52.337

您创建了一个文件`test_cases`，但`.py`您应该重命名您的测试用例文件，例如`test_cases.py`

# javascript - 如何使用 JavaScript 对象方法计算并返回值

> ID：11890402
> 
> 赞同：0
> 
> 时间：2012-08-09T19:14:46.327
> 
> 标签：javascript, methods, javascript-objects

我创建了这个对象：

```
var resultStats = {
    possibleResults: 10,
    validResults: 5,
}; 
```

我会写什么以便写作`resultsStats["calculateSuccessRate()"]`（或类似的）将计算`Math.round(100*this.validResults/this.possibleResults);`并返回 50 的答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T19:17:02.657

```
var resultStats = {
    possibleResults: 10.0,
    validResults: 5.0,
    calculateSuccessRate: function(){
        return Math.round(100 * this.validResults/this.possibleResults);
    }
}; 
```

然后可以使用以下方法调用该函数：

```
resultStats["calculateSuccessRate"](); 
```

或者：

```
resultStats.calculateSuccessRate(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T19:17:30.010

```
var resultStats = {
    calculateSuccessRate : function() {
       return Math.round(100 * (this.possibleResults / this.validResults))
    },
    possibleResults: 10,
    validResults: 5
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T19:17:14.103

你可以`calculateSuccessRate`给对象一个函数`resultStats`。

```
var resultsStats = {
    possibleResults: 10,
    validResults: 5,
    calculateSuccessRate: function(){
        return Math.round(100*this.validResults/this.possibleResults);
    }
}; 
```

然后你可以这样称呼它：

```
resultsStats.calculateSuccessRate(); 
```

或者（你很接近）：

```
resultsStats["calculateSuccessRate"]() 
```

# url-routing - 发布时 URL 路由在 asp.net4 中不起作用

> ID：11890407
> 
> 赞同：1
> 
> 时间：2012-08-09T19:15:12.007
> 
> 标签：url-routing

我在网站中的页面上使用了 `RouteTable.Routes.MapPageRoute，与 RouteTable.Routes.MapPageRoute(1, "~/LNG/WebSites/Vission/vissions.aspx","vission");

RouteTable.Routes.MapPageRoute(2, "~/LNG/WebSites/Loss/LossCiculars.aspx","Loss Circular"); `....

但这适用于某些页面。我对其他页面 http 404 有错误

在 web.config 我添加了这一行 `<system.webServer> <modules runAllManagedModulesForAllRequests="true"> <remove name="UrlRoutingModule-4.0" /> <add name="UrlRoutingModule-4.0" type="System.Web.Routing.UrlRoutingModule" preCondition="" /> </modules> </system.webServer>`

注意：当我在 vs 中运行项目时，此代码可以正常工作，请帮助我，如果你能感谢

# xsd - 具有属性和限制的 XSD 自定义类型

> ID：11890413
> 
> 赞同：4
> 
> 时间：2012-08-09T19:15:26.600
> 
> 标签：xsd, xsd-validation

我正在开发一个 XSD 文档来验证 XML 导入文件。导入文件的几乎所有元素都“可以”具有 ID 属性 (UPDATE)。UPDATE 属性必须限制为 4 个可能的值，所以我有这个预设类型用于属性限制......

```
<xs:simpleType name="MyUpDir">
  <xs:restriction base="xs:string">
    <xs:enumeration value="OVERWRITE"/>
    <xs:enumeration value="ADDONLY" />
    <xs:enumeration value="NOERASE" />
    <xs:enumeration value="IGNORE" />
  </xs:restriction>
</xs:simpleType> 
```

除了属性限制外，每个元素的值还受各种预先设置的自定义类型的限制示例：

```
<xs:simpleType name="MyChar50">
  <xs:restriction base="xs:string">
    <xs:maxLength value="50" />
  </xs:restriction>
</xs:simpleType> 
```

要将两者结合起来，我知道我可以对每个元素进行内联操作，如下所示：

```
<xs:element name="FullName">
  <xs:complexType>
    <xs:simpleContent>
      <xs:extension base="MyChar50">
        <xs:attribute name="UPDATE" type="MyUpDir" />
      </xs:extension>
    </xs:simpleContent>
  </xs:complexType>
</xs:element> 
```

问题是导入文件中有超过 1000 个元素，每个元素都有不同的长度/regEx/精度限制（大约 20 种自定义类型），并且具有 UPDATE 属性的潜力。如果没有 UPDATE 属性，我可以使用自定义类型在自己的行上处理每个元素，从而大大减少 XSD 的“内容”部分。但是从我所读到的，似乎为了适应自定义类型和提到的属性的潜力，我被迫使用扩展示例（最后一个示例），而不是能够为每个这样的元素保留一行. 有没有办法通过创建结合两者的自定义类型来进一步减少这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:50:37.177

我认为您可以多做 20 种自定义类型（总共 40 种），然后使用适当的类型（w/ 或 w/o 属性）。在你的情况下：

```
<xs:complexType name="MyChar50Attr"><!-- This one has attributes -->
    <xs:simpleContent>
        <xs:extension base="MyChar50">
            <xs:attribute name="UPDATE" type="MyUpDir"/>
        </xs:extension>
    </xs:simpleContent>
</xs:complexType>
<xs:element name="FullName" type="MyChar50Attr"/> 
```

# objective-c - 在 Objective-C 源代码编译中未定义的符号引用

> ID：11890419
> 
> 赞同：1
> 
> 时间：2012-08-09T19:15:49.563
> 
> 标签：objective-c, objective-c-runtime

这些天来，我一直在玩弄 Objective-C 运行时，试图找出一些事情是如何工作的。在我的一个“实验”中，我做了以下事情：我得到了以下代码，它位于一个名为的文件中`test.m`：

```
#import <objc/Object.h>

@interface MySuperClass: Object {

}
-(int) myMessage1;
@end

@interface MyClass: MySuperClass {
    int myIvar;
}
-(void) myMessage2;
@end

@implementation MyClass
-(void) myMessage2 {
  myIvar++;
}
@end

int main() {
    MyClass *myObject;
    myObject = [[MyClass alloc] init];
    [myObject myMessage2];

    return 0;
} 
```

并试图用`clang -fobjc-nonfragile-abi -fnext-runtime -o test test.m`. 可以想象，编译器会生成一个链接错误消息，因为我正在编译一个 Objective-C 文件，但我并没有告诉链接器将它链接到一个 Objective-C 运行时库（`-lobjc`例如，使用选项） . 但我是故意这样做的，以检查哪些 objc 运行时库符号将被引用，因此会丢失。我收到以下错误消息：

```
$ clang -fobjc-nonfragile-abi -fnext-runtime -o test test.m 
/tmp/test-jEfgSA.o:(__DATA, __objc_data+0x0): undefined reference to `OBJC_METACLASS_$_Object'
/tmp/test-jEfgSA.o:(__DATA, __objc_data+0x8): undefined reference to `OBJC_METACLASS_$_MySuperClass'
/tmp/test-jEfgSA.o:(__DATA, __objc_data+0x10): undefined reference to `_objc_empty_cache'
/tmp/test-jEfgSA.o:(__DATA, __objc_data+0x18): undefined reference to `_objc_empty_vtable'
/tmp/test-jEfgSA.o:(__DATA, __objc_data+0x30): undefined reference to `OBJC_CLASS_$_MySuperClass'
/tmp/test-jEfgSA.o:(__DATA, __objc_data+0x38): undefined reference to `_objc_empty_cache'
/tmp/test-jEfgSA.o:(__DATA, __objc_data+0x40): undefined reference to `_objc_empty_vtable'
/tmp/test-jEfgSA.o:(__DATA, __objc_msgrefs, coalesced+0x0): undefined reference to `objc_msgSend_fixup'
/tmp/test-jEfgSA.o:(__DATA, __objc_msgrefs, coalesced+0x10): undefined reference to `objc_msgSend_fixup'
/tmp/test-jEfgSA.o:(__DATA, __objc_msgrefs, coalesced+0x20): undefined reference to `objc_msgSend_fixup'
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

很容易理解为什么列出的一些符号是未定义的。`objc_msgSend_fixup`，例如，指的是运行时库函数。`_objc_empty_cache`并且`_objc_empty_vtable`都是在[http://opensource.apple.com/source/objc4/objc4-532/runtime/objc-abi.h](http://opensource.apple.com/source/objc4/objc4-532/runtime/objc-abi.h)中声明的运行时库结构。但是，`OBJC_METACLASS_$_MySuperClass`和`OBJC_CLASS_$_MySuperClass`是表示已在 中声明的类的结构`test.m`，因此在 Objective-C 运行时库中没有对这些符号的引用。它们应该在 中定义`teste.o`，但似乎不是。那么，为什么会发生这种情况？

还有一件事：没有对 no 或 的损坏`OBJC_METACLASS_$_MyClass`引用`OBJC_CLASS_$_MyClass`。因此，存在对 and 的损坏引用，`Object`并且`MySuperClass`它们在 中都有子类`test.m`，但对 没有损坏的引用`MyClass`，它没有子类。那么，为什么链接器似乎期望在运行时库中有对具有子类的类的引用，而不是对那些没有子类的引用呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:34:00.120

很好地尝试这些事情。稍后当您遇到类似错误并需要调试时会有所帮助。

突出的几点：

*   这实际上与子类化无关。例如，仅通过尝试实例化一个对象，您可能会遇到类似的错误。
*   链接器尝试（简而言之）将编译后的代码及其关联的符号表与代码中的引用进行匹配。
*   您没有 MySuperClass 的实现，因此不会生成目标代码，并且不存在与您的 MySuperClass 接口定义匹配的符号。您可以通过实现 MySuperClass 来消除此错误。
*   MyClass 很好，因为您已经在文件中实现了 MyClass，因此链接器可以找到一个有效的符号来链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T21:35:58.497

我发现`OBJC_METACLASS_$_<my class name>`只有在有`@implementation <my class name>`语句的情况下才会在目标文件中定义符号。所以，如果我添加，例如，片段：

```
@implementation MySuperClass
-(int) myMessage1 {
  return 0;
}
@end 
```

到`test.m`，链接器将生成错误消息：

```
$ clang -fobjc-nonfragile-abi -fnext-runtime -o class_teste class_teste.m 
/tmp/class_teste-gDWfF6.o:(__DATA, __objc_data+0x0): undefined reference to `OBJC_METACLASS_$_Object'
/tmp/class_teste-gDWfF6.o:(__DATA, __objc_data+0x8): undefined reference to `OBJC_METACLASS_$_Object'
/tmp/class_teste-gDWfF6.o:(__DATA, __objc_data+0x10): undefined reference to `_objc_empty_cache'
/tmp/class_teste-gDWfF6.o:(__DATA, __objc_data+0x18): undefined reference to `_objc_empty_vtable'
/tmp/class_teste-gDWfF6.o:(__DATA, __objc_data+0x30): undefined reference to `OBJC_CLASS_$_Object'
/tmp/class_teste-gDWfF6.o:(__DATA, __objc_data+0x38): undefined reference to `_objc_empty_cache'
/tmp/class_teste-gDWfF6.o:(__DATA, __objc_data+0x40): undefined reference to `_objc_empty_vtable'
/tmp/class_teste-gDWfF6.o:(__DATA, __objc_data+0x50): undefined reference to `OBJC_METACLASS_$_Object'
/tmp/class_teste-gDWfF6.o:(__DATA, __objc_data+0x60): undefined reference to `_objc_empty_cache'
/tmp/class_teste-gDWfF6.o:(__DATA, __objc_data+0x68): undefined reference to `_objc_empty_vtable'
/tmp/class_teste-gDWfF6.o:(__DATA, __objc_data+0x88): undefined reference to `_objc_empty_cache'
/tmp/class_teste-gDWfF6.o:(__DATA, __objc_data+0x90): undefined reference to `_objc_empty_vtable'
/tmp/class_teste-gDWfF6.o:(__DATA, __objc_msgrefs, coalesced+0x0): undefined reference to `objc_msgSend_fixup'
/tmp/class_teste-gDWfF6.o:(__DATA, __objc_msgrefs, coalesced+0x10): undefined reference to `objc_msgSend_fixup'
/tmp/class_teste-gDWfF6.o:(__DATA, __objc_msgrefs, coalesced+0x20): undefined reference to `objc_msgSend_fixup'
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

这是可以接受的，因为所有这些未定义的符号都是 Objective-C 运行时库的一部分。由于我的第一个版本`test.m`是为了测试目的，我没有在`MySuperClass`类中添加实现，因为我认为它不会影响目标文件的符号表。所以，这个问题与子类化无关。

# python - MATLAB 中是否有等效的 Python 范围函数？

> ID：11890437
> 
> 赞同：10
> 
> 时间：2012-08-09T19:17:11.310
> 
> 标签：python, matlab

`range()`Python中的函数是否有等效的MATLAB函数？

我真的很希望能够输入类似的内容`range(-10, 11, 5)`并返回`[-10, -5, 0, 5, 10]`，而不必手动写出整个范围。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-09T19:19:56.593

是的，有`:`运营商。该命令`-10:5:11`将产生向量`[-10, -5, 0, 5, 10];`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-09T19:40:28.293

There are two relevant functions. The colon `:` operator, you can use the `linspace` function. The best function to use depends on what you want to specify.

Examples:

```
x = -10:5:10;              % Count by 5's from -10 to 10\.  (or "colon(-10, 5, 10)")
x = linspace(-10, 10, 5);  % 5 even increments between -10 and 10 
```

The result of the `colon` operator will always include the first argument and the desired spacing, but generally will not include the last argument. (e.g. `x = -10:5:11`).

The `linspace` function will always include the desired first and last elements, but will the element spacing will vary. (e.g. `linspace(-10, 11, 5)`).

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T23:16:31.333

其他人提到了[`colon`](http://www.mathworks.com/help/techdoc/ref/colon.html)运营商。你只需要意识到一些差异。

在 Python 中，[`range`](http://docs.python.org/library/functions.html#range)接受所有整数参数并返回一个整数列表。在 MATLAB 中，冒号运算符可以处理开始/停止以及步长中的浮点数。

我会说这[`numpy.arange`](http://docs.scipy.org/doc/numpy/reference/generated/numpy.arange.html)与 MATLAB 的冒号运算符更匹配。

# c# - 是否使用扩展方法 ToList () 浪费资源？

> ID：11890446
> 
> 赞同：2
> 
> 时间：2012-08-09T19:18:02.047
> 
> 标签：c#, linq, generics

我有一个关于 LINQ `IEnumerable<>`、 和`List<>`.

当我有一个`List<T>`并且想要过滤或搜索它时，我会像这样使用 LINQ：

```
var psec = from p in MyListOfSomeObjects
           where ((p.Tipo == tipo) || (p.Tipo == null))
           select p; 
```

但在一种特殊情况下，我需要一个实际的`List<T>`，而不是`IEnumerable<T>`LINQ 查询返回的 。

我可以`psec.ToList<T>()`用来获取我的`List<T>`，但我的问题是：

该方法是否`ToList<T>()`浪费时间或计算机资源？它是否进行一些迭代或循环`IEnumerable<T>`以构建一个`List<T>`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T19:19:21.863

> Tolist<>() 方法是否浪费时间或计算机资源？

这取决于。如果您*需要*一份清单，那么它可能不会浪费。它确实使用时间和资源来构建列表。

> 是否在 IEnumerable psec 上进行一些迭代或循环以构建 List<> ？

是的。它遍历可枚举并从其中的项目构建列表。

一般来说，如果您的目标只是枚举结果（即：在`foreach`循环中使用），则无需转换为`List<T>`via `ToList()`，这样做只是浪费。

# drupal - 需要在 Drupal 中保留下拉列表值

> ID：11890453
> 
> 赞同：0
> 
> 时间：2012-08-09T19:18:54.477
> 
> 标签：drupal

我在 Drupal 中使用 time_tracker_simple 模块。当有人从下拉列表中选择并点击提交时，它会停留在同一页面上，但不会保留该值。选择后如何保留下拉列表的值。

下面是模块中使用的代码。

```
 function time_tracker_simple_timer_form($form_state) {
  global $user;
  $active_timer = _time_tracker_simple_get_timer();
  //*** Both start and start buttons must actually be on the form for #submit to work correctly
  $form['stop'] = array(
    '#value' => t('Stop'),
    '#type' => 'submit',
    '#weight' => 20,
    '#access' => FALSE,
    '#button_type' => 'timer_control_stop',
    '#submit' => array('time_tracker_simple_timer_stop'),
  );
  $form['start'] = array(
    '#value' => t('Start'),
    '#type' => 'submit',
    '#access' => FALSE,
    '#weight' => 20,
    '#submit' => array('time_tracker_simple_timer_start'),
    '#button_type' => 'timer_control_start',
  );-----This part is the drop down list------
  $activities = array();
  $activities[] = '(none)';
  $results = db_query("SELECT * FROM {time_tracker_activity} ORDER BY weight ASC");
  while ($result = db_fetch_object($results)) {
    $activities[$result->taid] = $result->name;
  }
  if (count($activities) > 1) {
    // The activity choser
    $form['activity'] = array(
      '#title' => t('Activity'),
      '#type' => 'select',
      '#weight' => 5,
      '#options' => $activities,
    );
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:20:25.677

drupal 表单 api 允许您将默认值传递给表单项，如下所示：

```
$form['activity'] = array(
      '#title' => t('Activity'),
      '#type' => 'select',
      '#weight' => 5,
      '#options' => $activities,
      '#default_value' => $form_state['post']['activity']
    ); 
```

# php - 连字符未正确显示

> ID：11890461
> 
> 赞同：-1
> 
> 时间：2012-08-09T19:19:24.883
> 
> 标签：php, html, internet-explorer, utf-8

我正在为 RSS 提要上传一个 XML 文件，来自链接，它显示了所有提要，但在 IE 上，法语单词是**Tobique–Mactaquac**（两个单词之间的连字符），但在显示 RSS 的地方，它不显示连字符并显示为**TobiqueMactaquac** . 我的字符集设置为 UTF-8 这两个单词之间的连字符仅在 IE 中显示。RSS的链接在[这里](http://news.gc.ca/web/rss-eng.do?mthd=dpt&crtr.dpt1D=6656)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:36:02.823

它是连字符还是 em 或破折号？如果是后两者之一，则需要使用适当的 HTML 实体引用而不是文字。为了清楚起见，这与法语无​​关，所以你应该编辑你的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T20:11:34.110

在该特定页面上使用**iso-8859-1**字符集后问题已解决

# html - 这是一个有效的 SOAP 响应内容类型吗？

> ID：11890463
> 
> 赞同：0
> 
> 时间：2012-08-09T19:19:26.733
> 
> 标签：html, wcf, soap, wsdl

我正在尝试在 Visual Studio 2008 中使用第三方 WebService，并从服务器获得独特的响应。这个返回有两个内容类型标签。

```
HTTP/1.0 200 OK  
Server: SMBDK_1/2.3.0  
Date: Thu, 09 Aug 2012 18:59:14 GMT  
Connection: close  
Content-Length: 670  
Content-Type: text/html; charset=ISO-8859-1  
Content-Type: text/xml  
Expires: Thu, 09 Aug 2012 18:59:14 GMT  
Last-Modified: Thu, 09 Aug 2012 18:59:14 GMT 
```

这是常见且有效的 SOAP 响应还是奇怪？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T08:47:19.017

我无法评论它的普遍性，但它是无效的（尽管它在 HTTP 级别而不是 SOAP 级别无效）。

因为我们有两种内容类型：

来自[http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.2](http://www.w3.org/Protocols/rfc2616/rfc2616-sec4.html#sec4.2)：

> 当且仅当该头字段的整个字段值被定义为逗号分隔列表[即，#(values)] 时，具有相同字段名称的多个消息头字段可能出现在消息中。

因此，让我们看一下 content-type 标头：

来自[http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.17](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.17)：

> ```
>  Content-Type   = "Content-Type" ":" media-type 
> ```

然后我们[展开`media-type`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec3.html#sec3.7)：

> ```
>  media-type     = type "/" subtype *( ";" parameter )
>    type           = token
>    subtype        = token 
> ```

这不是逗号分隔的列表。

# php - PHP/Ajax/Json - 来自 PHP 的 JSON 回显冻结脚本？

> ID：11890464
> 
> 赞同：0
> 
> 时间：2012-08-09T19:19:27.970
> 
> 标签：php, ajax, json

我通常通过搜索找到我的答案，但这让我很困惑，我找不到任何相关文章：/

我只是对我的 PHP 脚本运行 AJAX 调用并警告返回值（JSON 编码对象）。

问题是，脚本一碰到我的“回声”语句就会冻结。我已经在没有回声的情况下进行了测试，甚至使用了诸如“Hello”之类的值（两者都成功）。我还使用我在网上找到的示例 JSON 字符串测试了输出。这失败了。

我现在相信任何结构为 JSON 的字符串都会导致这个错误（我已经在 jsonlint.com 上测试了两个 JSON 脚本）。

非常感谢所有帮助！！！

Javascript代码：

```
function scan()
{
var script          = "../resources/ajax/fincenmanager/load_reports.php";
var params          = "";
var return_function = "load_wire";

document.getElementById("loading_screen").className = "show";

ajax(script, params, return_function);
}
function load_wire(text)
{
document.getElementById("loading_screen").className = "hidden";
alert(text);
} 
```

PHP代码：

```
<?php
     require_once("../../config.php");
     require_once("../../library/FincenManager/fincenmanagerclass.php");

     header("Content-Type: application/json");

     $manager = new FincenManager("../../inputs/FincenManager/");

     $json = json_encode($manager);

     // Script Breaks After This Line.. 100% Sure :/
     echo $json;
 ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T15:19:44.257

出色地，

我正在研究推理，但我相信这应该足以帮助遇到这个问题的任何人：

我的 JSON 字符串中的双引号（编码对象时由 json_encode 创建的双引号）导致“echo”语句失败。为了解决这个问题，我使用以下命令将所有未转义的双引号替换为转义的双引号：

```
str_replace( " \" " , " \\\" " , json_encode($object) ) 
```

我相信这是 json_encode 没有自行转义双引号的结果，并且仅在尝试从 ajax 请求调用的外部脚本中“回显”时才会发生。

谢谢大家 :D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:46:00.553

你需要逃避的不仅仅是`"`角色（正如你所发现的那样）。在这种情况下，问题在于字符串的结尾，`"`而 JSON 不希望在`"`a或 an之后出现字符。`,``]``}`

这个问题的答案将帮助您进一步了解字符的转义：[单击](https://stackoverflow.com/questions/4253367/how-to-escape-a-json-string-containing-newline-characters-using-javascript)

对于测试 JSON：[JSONlint](http://jsonlint.com/)

# python - 确定一行是否有括号或引号在python中没有关闭

> ID：11890467
> 
> 赞同：1
> 
> 时间：2012-08-09T19:19:36.450
> 
> 标签：python, regex, string

我正在寻找一种打开文件的简单方法，并搜索每一行以查看该行是否具有未闭合的括号和引号。如果该行有未闭合的括号/引号，我想将该行打印到文件中。我知道我可以用一个丑陋的 if/for 语句来做到这一点，但我知道 python 可能有更好的方法来处理 re 模块（我对此一无所知）或其他东西，但我不太了解这种语言这样做。

谢谢！

编辑：一些示例行。如果您将其复制到记事本或其他东西中并关闭自动换行，可能会更容易阅读（有些行可能很长）。此外，文件中有超过 100k 行，所以有效率的东西会很棒！

```
SL  ID=0X14429A0B TY=STANDARD OWN=0X429A03 EXT=22 SLTK=0X1C429A0B MP=0X684003F0 SUB=0X24400007
RT  ID=0X18429A19 TY=CALONSC OWN=0X14429A0B EXLP=0X14429A0C CMDS=(N:0X8429A04,C:0X14429A0B) SGCC=2 REL=1 DESC="AURANT YD-INDSTRY LD" ATIS=T
RT  ID=0X18429A1A TY=CALONSC OWN=0X14429A0B EXLP=0X14429A08 CMDS=(R:0X8429A04,N:0X8429A05,C:0X14429A0B) SGCC=2 REL=2 DESC="AURANT YD TO TRK.1" ATIS=T
RT  ID=0X18429A1B TY=CALONSC OWN=0X14429A0B EXLP=0X14429A0A CMDS=(R:0X8429A04,R:0X8429A05,C:0X14429A0B) SGCC=2 REL=3 DESC="AURANT YD TO TRK.2" ATIS=T
SL  ID=0X14429A0C TY=STANDARD OWN=0X429A03 EXT=24 SLTK=0X1C429A0B MP=0X684003F1 SUB=0X24400007
RT  ID=0X18429A1C TY=CALONSC OWN=0X14429A0C EXLP=0X14429A0B CMDS=(N:0X8429A04,C:0X14429A0C) SGCC=2 REL=1 DESC="AURANT YD-INDSTRY LD" ATIS=T
TK  ID=0X1C429A08 TY=BLKTK OWN=0X429A03 EXT=12 LRMP=0X6C40BDAF LEN=5837 FSPD=60 PSPD=65 QUAL=TRK.1 MAXGE=0 MAXGW=0 JAL=4 ALT=12 SUB=0X24400007 RULES=(CTC:B:UP:0X24400007:485.7305:486.8359:T) LLON=-118.1766772 RLON=-118.1620059 LLAT=34.06838375 RLAT=34.07811764 LELE=416.6983 RELE=425.0596 ULAD=NO URAD=NO
PT  ID=0X20429A0F TY=STANDARD OWN=0X1C429A08 LTK=0X1C40006C RTK=0X1C429A0C REL=1 LEN=1 LQUAL="TRK.1" RQUAL="TRK.1"
PTK OWN=0X1C429A08 PID=0X1C429A13 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T19:43:05.670

如果您认为不会有向后不匹配的括号（即“）（”），您可以这样做：

```
with open("myFile.txt","r") as readfile, open("outFile.txt","w") as outfile:
    for line in readfile:
        if line.count("(") != line.count(")") or line.count('"') % 2 != 0:
            outfile.write(line) 
```

否则，您将不得不一次数一个以检查是否不匹配，如下所示：

```
with open("myFile.txt","r") as readfile, open("outFile.txt","w") as outfile:
    for line in readfile:
        count = 0
        for char in line:
            if char == ")":
                count -= 1
            elif char == "(":
                count += 1
            if count < 0:
                break
         if count != 0 or text.count('"') % 2 != 0:
             outfile.write(line) 
```

我想不出更好的方法来处理它。Python 不支持递归正则表达式，所以一个正则表达式解决方案是正确的。

关于这一点的另一件事：鉴于您的数据，最好将其放入一个函数并拆分您的字符串，这很容易使用正则表达式完成，如下所示：

```
import re
splitre = re.compile(".*?=(.*?)(?:(?=\s*?\S*?=)|(?=\s*$))")
with open("myFile.txt","r") as readfile, open("outFile.txt","w") as outfile:
    for line in readfile:
        def matchParens(text):
            count = 0
            for char in text:
                if char == ")":
                    count -= 1
                elif char == "(":
                    count += 1
                if count < 0:
                    break
            return count != 0 or text.count('"') % 2 != 0
        if any(matchParens(text) for text in splitre.findall(line)):
            outfile.write(line) 
```

这样做可能更好的原因是它单独检查每个值对，这样如果你在一个值对中有一个开放的括号，而在后面的一个中有一个关闭的括号，它就不会认为没有不平衡的括号。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-09T19:48:52.957

使用解析器包似乎有点过头了，但它很快：

```
text = """\
SL  ID=0X14429A0B TY=STANDARD OWN=0X429A03 EXT=22 SLTK=0X1C429A0B MP=0X684003F0 SUB=0X24400007
RT  ID=0X18429A19 TY=CALONSC OWN=0X14429A0B EXLP=0X14429A0C CMDS=(N:0X8429A04,C:0X14429A0B) SGCC=2 REL=1 DESC="AURANT YD-INDSTRY LD" ATIS=T
RT  ID=0X18429A1A TY=CALONSC OWN=0X14429A0B EXLP=0X14429A08 CMDS=(R:0X8429A04,N:0X8429A05,C:0X14429A0B) SGCC=2 REL=2 DESC="AURANT YD TO TRK.1" ATIS=T
RT  ID=0X18429A1B TY=CALONSC OWN=0X14429A0B EXLP=0X14429A0A CMDS=(R:0X8429A04,R:0X8429A05,C:0X14429A0B) SGCC=2 REL=3 DESC="AURANT YD TO TRK.2" ATIS=T
SL  ID=0X14429A0C TY=STANDARD OWN=0X429A03 EXT=24 SLTK=0X1C429A0B MP=0X684003F1 SUB=0X24400007
RT  ID=0X18429A1C TY=CALONSC OWN=0X14429A0C EXLP=0X14429A0B CMDS=(N:0X8429A04,C:0X14429A0C) SGCC=2 REL=1 DESC="AURANT YD-INDSTRY LD" ATIS=T
TK  ID=0X1C429A08 TY=BLKTK OWN=0X429A03 EXT=12 LRMP=0X6C40BDAF LEN=5837 FSPD=60 PSPD=65 QUAL=TRK.1 MAXGE=0 MAXGW=0 JAL=4 ALT=12 SUB=0X24400007 RULES=(CTC:B:UP:0X24400007:485.7305:486.8359:T) LLON=-118.1766772 RLON=-118.1620059 LLAT=34.06838375 RLAT=34.07811764 LELE=416.6983 RELE=425.0596 ULAD=NO URAD=NO
PT  ID=0X20429A0F TY=STANDARD OWN=0X1C429A08 LTK=0X1C40006C RTK=0X1C429A0C REL=1 LEN=1 LQUAL="TRK.1" RQUAL="TRK.1"
PTK OWN=0X1C429A08 PID=0X1C429A13 GOOD
PTK OWN=0X1C429A(08 PID=0X1C429A13 BAD
PTK OWN=0X1C429A08 )PID=0X1C429A13 BAD
PTK OWN=0X1C(42(9A))08 PID=0X1C429A13 GOOD
PTK OWN=0X1C(42(9A))08 PID=0X1C42(9A13 BAD
PTK OWN=0X1C(42(9A))08 PID=0X1C42"("9A13 GOOD
"""

from pyparsing import nestedExpr, quotedString

paired_exprs = nestedExpr('(',')')  |  quotedString

for i, line in enumerate(text.splitlines(), start=1):
    # use pyparsing expression to strip out properly nested quotes/parentheses
    stripped_line = paired_exprs.suppress().transformString(line)

    # if there are any quotes or parentheses left, they were not 
    # properly nested
    if any(unwanted in stripped_line for unwanted in '()"\''):
        print i, ':', line 
```

印刷：

```
10 : PTK OWN=0X1C429A(08 PID=0X1C429A13 BAD
11 : PTK OWN=0X1C429A08 )PID=0X1C429A13 BAD
13 : PTK OWN=0X1C(42(9A))08 PID=0X1C42(9A13 BAD 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-09T19:42:53.157

1.  只需从一行中提取所有有趣的符号。
2.  每当您获得结束符号时，将开始符号压入堆栈并从堆栈中弹出。
3.  如果堆栈是干净的，则符号是平衡的。如果堆栈下溢或没有完全展开，则您的线不平衡。

下面是检查一行的示例代码 - 我在第一行中插入了一个杂散括号。

```
d = """SL  ID=0X14429A0B TY=STANDARD OWN=0X429A(03 EXT=22 SLTK=0X1C429A0B MP=0X684003F0 SUB=0X24400007
RT  ID=0X18429A19 TY=CALONSC OWN=0X14429A0B EXLP=0X14429A0C CMDS=(N:0X8429A04,C:0X14429A0B) SGCC=2 REL=1 DESC="AURANT YD-INDSTRY LD" ATIS=T
RT  ID=0X18429A1A TY=CALONSC OWN=0X14429A0B EXLP=0X14429A08 CMDS=(R:0X8429A04,N:0X8429A05,C:0X14429A0B) SGCC=2 REL=2 DESC="AURANT YD TO TRK.1" ATIS=T
RT  ID=0X18429A1B TY=CALONSC OWN=0X14429A0B EXLP=0X14429A0A CMDS=(R:0X8429A04,R:0X8429A05,C:0X14429A0B) SGCC=2 REL=3 DESC="AURANT YD TO TRK.2" ATIS=T
SL  ID=0X14429A0C TY=STANDARD OWN=0X429A03 EXT=24 SLTK=0X1C429A0B MP=0X684003F1 SUB=0X24400007
RT  ID=0X18429A1C TY=CALONSC OWN=0X14429A0C EXLP=0X14429A0B CMDS=(N:0X8429A04,C:0X14429A0C) SGCC=2 REL=1 DESC="AURANT YD-INDSTRY LD" ATIS=T
TK  ID=0X1C429A08 TY=BLKTK OWN=0X429A03 EXT=12 LRMP=0X6C40BDAF LEN=5837 FSPD=60 PSPD=65 QUAL=TRK.1 MAXGE=0 MAXGW=0 JAL=4 ALT=12 SUB=0X24400007 RULES=(CTC:B:UP:0X24400007:485.7305:486.8359:T) LLON=-118.1766772 RLON=-118.1620059 LLAT=34.06838375 RLAT=34.07811764 LELE=416.6983 RELE=425.0596 ULAD=NO URAD=NO
PT  ID=0X20429A0F TY=STANDARD OWN=0X1C429A08 LTK=0X1C40006C RTK=0X1C429A0C REL=1 LEN=1 LQUAL="TRK.1" RQUAL="TRK.1"
PTK OWN=0X1C429A08 PID=0X1C429A13"""

def unbalanced(line):
    close_symbols = {'"' : '"', '(': ")", '[': ']', "'" : "'"}
    syms = [x for x in line if x in '\'"[]()']
    stack = []
    for s in syms:
        try:
            if len(stack) > 0 and s == close_symbols[stack[-1]]:
                stack.pop()
            else:
                stack.append(s)
        except: # catches stack underflow or closing symbol lookup
            return True
    return len(stack) != 0

print unbalanced("hello 'there' () []")
print unbalanced("hello 'there\"' () []")
print unbalanced("][")

lines = d.splitlines()  # in your case you can do open("file.txt").readlines()

print [line for line in lines if unbalanced(line)] 
```

对于大文件，您不想将所有文件读入内存，因此请改用以下片段：

```
with open("file.txt") as infile:
    for line in infile:
        if unbalanced(line):
            print line 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T19:45:07.993

正则表达式 - 如果您的行不包含嵌套括号，则解决方案非常简单：

```
for line in myFile:
    if re.search(r"\([^\(\)]*($|\()", line):
        #this line contains unbalanced parentheses. 
```

如果您正在使用嵌套语句的可能性，它会变得有点复杂：

```
for line in myFile:
    paren_stack = []
    for char in line:
        if char == '(':
            paren_stack.append(char)
        elif char == ')':
            if paren_stack:
                paren_stack.pop()
            else:
                #this line contains unbalanced parentheses. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T19:39:08.057

我只会做类似的事情：

```
for line in open(file, r):
    if line.count('"') % 2 != 0 or line.count('(') != line.count(')'):
        print(line) 
```

但我不能确定这是否完全符合您的需求。

更健壮：

```
for line in open(file, r):
    paren_count = 0
    paren_count_start_quote = 0
    quote_open = False
    for char in line:
        if char == ')':
            paren_count -= 1
        elif char == '(':
            paren_count += 1
        elif char == '"':
            quote_open = not quote_open
            if quote_open:
                paren_count_start_quote = paren_count
            elif paren_count != paren_count_start_quote:
                print(line)
                break
        if paren_count < 0:
            break
    if quote_open or paren_count != 0:
        print(line) 
```

没有测试健壮的，我认为应该可以。它现在可以确保诸如： (" ) " 之类的事情，其中​​引号内的一组括号会打印该行。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-09T19:50:36.140

检查此代码

```
from tokenize import *
def syntaxCheck(line):
    def readline():
        yield line
        yield ''
    par,quo,dquo = 0,0,0
    count = { '(': (1,0,0),')': (-1,0,0),"'": (0,1,0),'"':(0,0,1) }
    for countPar, countQuo,countDQuo in (
      count.get(token,(0,0))+(token,) for _,token,_,_,_ in tokenize(readline().__next__)):
        par  += countPar
        quo  ^= countQuo
        dquo ^= countDQuo
    return par,quo,dquo 
```

请注意，封闭引号内的括号不计算在内，因为它计为单个字符串标记。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-09T19:29:54.847

是否应该在每一行上关闭括号和引号？如果是这种情况，您可以简单地计算括号和引号。如果是偶数，它们是匹配的。如果它是奇怪的，一个丢失。将该逻辑放入一个函数中，将文本文件的行转储到一个数组中，然后调用 map 为数组中的每个字符串执行该函数。

我的蟒蛇生锈了，但假设一切“应该”都在同一条线上，我就是这样做的。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2012-08-09T20:18:28.973

好吧，我的解决方案可能没有那么花哨，但我说你只计算括号和引号的数量。如果结果不是偶数，你就知道你错过了一些东西！

# cruisecontrol.net - 由于 NAnt，在 OS X Lion 上安装 CruiseControl.Net 1.8 会立即中断

> ID：11890469
> 
> 赞同：1
> 
> 时间：2012-08-09T19:19:54.423
> 
> 标签：cruisecontrol.net, nant

我正在尝试在 OS X Lion 上安装 CruiseControl.Net v1.8。我安装了最新版本的单声道（2.10.9）。我跑：

```
sh build-all.sh 
```

构建开始但立即失败并出现以下错误：

> *构建失败*
> 
> *`../ccnet.build(47,3)`：*
> 
> *无法更改目标框架。`mono-4.0`不是有效的框架标识符。有效值为：`mono-2.0`, `moonlight-2.0`, `mono-1.0`, `mono-3.5`.*
> 
> *总时间：0.1 秒。*

我以前没有在这台机器上安装过 NAnt 或 CruiseControl.Net。我在网上听说据说最新版的NAnt没有这个问题，所以我下载了最新版，将CruiseControl.Net的Tools/NAnt文件夹中的所有内容替换为新下载的NAnt的bin文件夹的内容。在我这样做并再次运行构建之后，我收到以下错误：

> *Williams-MacBook:CruiseControl.NET-1.8.0.0.source williamkeen [(no branch)] $ `sh build.sh`*
> *Buildfile: `file:///Users/williamkeen/Downloads/CruiseControl.NET-1.8.0.0.source/ccnet.build`*
> *Target framework: Mono 2.0 Profile*
> *Target(s) specified:*
> 
> *[属性] 目标框架更改为“Mono 4.0 Profile”。*
> 
> *构建失败*
> 
> *此项目中不存在目标“”。*
> 
> *总时间：0.2秒。*

在网上再看一些，我发现这应该是 CC.Net 1.6 的保证修复。任何帮助，将不胜感激。我在这条路的尽头，我不知道下一步该尝试什么。

# c# - 活瓷砖名称歌曲

> ID：11890472
> 
> 赞同：1
> 
> 时间：2012-08-09T19:20:02.807
> 
> 标签：c#, silverlight, windows-phone-7, live-tile

我有一个活瓷砖的问题。我会在动态磁贴中显示我的应用程序中生成声音的歌曲名称。我在 MainPage.xaml.cs 中使用过：

```
public MainPage()
    {
        InitializeComponent();
        // Application Tile is always the first Tile, even if it is not pinned to Start.
        ShellTile TileToFind = ShellTile.ActiveTiles.First();

        // Application should always be found
        if (TileToFind != null)
        {
            // if Count was not entered, then assume a value of 0

            // set the properties to update for the Application Tile
            // Empty strings for the text values and URIs will result in the property being cleared.
            StandardTileData NewTileData = new StandardTileData
            {
                Title = "MyNameApp",
                BackgroundImage = new Uri("Red.jpg", UriKind.Relative),

                BackTitle = "Zzz...",
                BackBackgroundImage = new Uri("Green.jpg", UriKind.Relative),
                BackContent = txtCurrentTrack.Text <<HERE MY PROBLEM
            };

            // Update the Application Tile
            TileToFind.Update(NewTileData);
        }

    } 
```

在 MainPage.xaml 中：

```
<TextBlock x:Name="txtCurrentTrack" Height="75" HorizontalAlignment="Center" Margin="12,193,0,0" VerticalAlignment="Top" Width="438" TextWrapping="Wrap"/> 
```

在应用程序的 MainPage 中，歌曲的标题出现，而不是在动态磁贴中不出现。你知道是什么问题吗？谢谢大家

编辑：

我在这里设置了 txtcurrentTrack.Text（在 MainPage.xaml.cs 中）：

```
void Instance_PlayStateChanged(object sender, EventArgs e)
    {
        switch (BackgroundAudioPlayer.Instance.PlayerState)
        {
            case PlayState.Playing:
                RelaxTB.Content = "pause";
                break;

            case PlayState.Paused:
            case PlayState.Stopped:
                RelaxTB.Content = "play";
                break;
        }
        if (null != BackgroundAudioPlayer.Instance.Track)
        {
            txtCurrentTrack.Text = BackgroundAudioPlayer.Instance.Track.Title;
        }
    }
    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        if (PlayState.Playing == BackgroundAudioPlayer.Instance.PlayerState)
        {
            RelaxTB.Content = "Pause";
            txtCurrentTrack.Text = BackgroundAudioPlayer.Instance.Track.Title;

        }
        else
        {
            RelaxTB.Content = "Play";
            txtCurrentTrack.Text = "";
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:56:45.613

txtCurrentTrack 上的 Text 属性似乎没有在您更新磁贴数据时设置。因此，您只能将 BackContent 属性设置为 null。

`You need to update the tile explicitly each time you change txtCurrentTrack.Text`- 在 Instance_PlayStateChanged 和 OnNavigatedTo 方法中。

# jquery - 使用选择器过滤 jQuery 可排序无序列表

> ID：11890473
> 
> 赞同：0
> 
> 时间：2012-08-09T19:20:02.653
> 
> 标签：jquery, asp.net, jquery-ui-sortable

我有一个 asp.net 页面，其中有两个动态构建的 jquery 可排序无序列表。我正在使用它将项目从一个列表拖放到另一个列表。那部分工作正常。但是，我现在需要能够过滤列表中的项目。我找到了使用选择器的代码，但它们似乎都使用了包含锚点的列表项

`('#titles>ul>li>a')`.

当我`'>a"`从选择器中删除时，离开

`'#titles>ul>li'`，它停止工作。

我已经尝试了几次迭代，但似乎没有任何效果。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:37:35.430

我使用了[Kilian Valkhof 的帮助代码](http://kilianvalkhof.com/2010/javascript/how-to-build-a-fast-simple-list-filter-with-jquery/)：

```
jQuery.expr[':'].contains = function(a,i,m){
    return (a.textContent || a.innerText || "").toUpperCase().indexOf(m[3].toUpperCase())>=0;
}; 
```

这段代码实际上允许我在我的表达式中使用选择器 :contains。

使用助手，我可以找到包含给定文本的任何元素。当我找到匹配的元素时，我会向上查找 DOM 树以找到[最近](http://api.jquery.com/closest/)的li 标签。匹配的 li 标签是我想要隐藏（或显示）的。

```
filter = "textToSearch";
$matches = $("ul").find(':contains(' + filter + ')').closest('li');
$('li', list).not($matches).hide();
$matches.show(); 
```

# javascript - 如何最好地在 JavaScript 中跨多个方法重构这组重复的触发器调用？

> ID：11890477
> 
> 赞同：1
> 
> 时间：2012-08-09T19:20:24.477
> 
> 标签：javascript, refactoring

这是我拥有的代码：

```
var criterion = _.extends({},Base);

criterion.dispatcher.on('save',this.saveIt,this); //respond to event save. 

criterion.saveIt = function(){
 if(this.hasChanged())
   this.save({success:this.saveSuccess, error:this.saveError}); //method in Base 
 else
   dispatcher.trigger('done');
};

criterion.saveSuccess = function() {
 //do something
 dispatcher.trigger('done');
};

criterion.saveError = function() {
 //do something
 dispatcher.trigger('done');
}; 
```

有很多以`dispatcher.trigger('done')`ajax 特定项目结尾的函数。`done`这用于更新网络应用程序上的进度条 - 它在从每个元素接收到成功或错误或已经处于新状态的事件后倒计时。由于计数器是确定性的，它按项目数向上计数，并按`done`接收到的 s 数向下计数。

**问题：**有没有更好的方法来删除`dispatcher.trigger('done')`每个函数末尾的重复调用？或者它是一种必要的邪恶。我们在各种对象中都有这样的代码，可以说是为了同步“下一步”的执行（将其视为“同步屏障”）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:26:41.583

您可以创建一个自动附加调用的方法。

```
criterion.addProgressMethod = function( methodName, method ) {
   criterion[methodName] = function() {
      method();
      dispatcher.trigger('done');
   }
};

// usage

criterion.addProgressMethod( 'saveSuccess', function() {
   // do something here
} ); 
```

我不确定这是否比您所拥有的更好，但这是一个想法。

# http - 将 Heroku 子域请求重定向到另一个 IP

> ID：11890479
> 
> 赞同：1
> 
> 时间：2012-08-09T19:20:27.137
> 
> 标签：http, redirect, heroku

我在 App Store 中有一个应用程序，它与 Heroku 上托管的 RESTful Rails 应用程序交互。我犯了一个可怕的错误，将 API 的基本 URL 硬编码到 myapp.heroku.com 而不是使用顶级域。

我现在正在迁移到新服务器，所以我想看看我有哪些选择可以让我的 iPhone 应用程序用户无缝过渡。我想创建一个 Rake 应用程序，将所有流量从 heroku 子域重定向到我的新服务器地址，但后来我读到 HTTP 1.1 不允许 POST 重定向（我的 API 有多个 POST 端点）。我总是可以将我的 POST 请求重定向为 GET 请求，但这绝对感觉不对。

还有其他我可能会错过的选择吗？Heroku 有什么方法可以接受将我的子域的 A 记录更改为指向我的新服务器 IP？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T03:57:02.837

我最终按照约翰所说的做了，并在我的应用程序中更改了我的 API 端点。为了保持以前版本的应用程序正常工作（其中硬编码了 heroku 子域），我最终编写了这个快速的 Sinatra 应用程序并用它替换了我原来的 Heroku 应用程序：

```
require 'sinatra'
require 'mechanize'

API_BASE_URL = "http://newdomain.com"

get '/*' do |path|
    url = URI("#{API_BASE_URL}/#{path}")

    agent = Mechanize.new
    agent.user_agent = request.user_agent

    headers = {'AUTHORIZATION' => request.env['HTTP_AUTHORIZATION']}

    page = agent.post(url, params, headers)

    content_type :json
    page.body
end

get '/*' do |path|
    url = URI("#{API_BASE_URL}/#{path}")

    agent = Mechanize.new
    agent.user_agent = request.user_agent

    headers = {'AUTHORIZATION' => request.env['HTTP_AUTHORIZATION']}

    page = agent.get(url, params, nil, headers)

    content_type :json
    page.body
end 
```

（此代码可能会简化为单个方法）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-10T07:36:49.353

**他们不会为您更新他们的 DNS - *.heroku.com 将是一个通配符 DNS 条目，他们不会在每次添加站点时添加新的子域。**

似乎最好的解决方案是正确修复它。将新域附加到 Heroku 上的现有应用程序，它仍然可以在 app.heroku.com 和 yourcustomdomain.com 上访问。

然后，更新您的 iOS 应用程序以将新的自定义域用于其端点。一切正常后，减少 DNS 条目上的 TTL，然后将其重新指向新服务器。

# ruby-on-rails - 包括来自 :belongs_to 关联的列？

> ID：11890485
> 
> 赞同：0
> 
> 时间：2012-08-09T19:21:12.293
> 
> 标签：ruby-on-rails, activerecord

产品型号

```
Class Product < ActiveRecord::Base  
    belongs_to :product_group  
end 
```

产品组模型

```
Class ProductGroup < ActiveRecord::Base  
    has_many :products  
end 
```

是否有一种方法可以声明 as 的快捷方式`product.product_group.name`，`product.name`并且在将 Product 转换为 json 时`product_group.name`包含在`product.to_json`as中？`name`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:22:37.037

要回答您的第一个问题：`name`在`Product`

```
def name
  product_group.name
end 
```

至于你的第二个问题，你也可以`as_json`在你的`Product`模型中自定义。像这样的东西应该工作。

```
def as_json(options = {})
  super.merge({ name: name })
end 
```

# c# - WP7 将图像控件绑定到需要 cookie 的图像 URI

> ID：11890487
> 
> 赞同：3
> 
> 时间：2012-08-09T19:21:26.037
> 
> 标签：c#, image, windows-phone-7, xaml, webclient

我正在开发一个使用需要登录的 RESTful Web 服务的应用程序。此登录使用会话 cookie 进行验证，并使用 下载任何数据`WebClient`，我使用了以下扩展名：

```
public class CookieWebClient : WebClient
{
    [SecuritySafeCritical]
    public CookieWebClient() : base()
    {
    }

    protected override WebRequest GetWebRequest(Uri address)
    {
        var request = base.GetWebRequest(address);
        if (request is HttpWebRequest)
        {
            (request as HttpWebRequest).CookieContainer = App.GlobalCookieContainer;
        }
        return request;
    }
} 
```

但是，返回的一些数据是图像缩略图的 URI，它们以不同的`ListBoxes`. 在我不得不为 Web 服务使用登录之前，我只是将 绑定`ImageSource`到数据中的指定 URI：

```
<Image Source="{Binding Icon_Url}" /> 
```

但是，既然我必须使用登录，我必须在获取图像时提供一个 cookie。因此，我认为 an`IValueConverter`可以解决问题，我将在其中传递 URI，然后`BitmapImage`使用我的扩展下载`WebClient`，直到我记得我只能`WebClient`在 WP7 上进行异步调用。

## 所以我的问题是

如何下载请求中必须有 cookie的`Image`控件的图像？`LisBoxItem`

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T22:01:50.457

您可以使用 http 类下载图像并手动设置图像：

```
var stream = httpResponse.GetResponseStream(); 
var bitmap = new BitmapImage();
bitmap.SetSource(stream);
image.Source = bitmap; 
```

但这不适用于简单的 XAML 绑定...（但您可以将此逻辑包装在附加属性中）

# sql-server-2008-r2 - 没有子查询的 SQL Server 查询

> ID：11890488
> 
> 赞同：0
> 
> 时间：2012-08-09T19:21:30.577
> 
> 标签：sql-server-2008-r2

我有以下 SQL

```
set @ID = '323232'

select 
    tt.ItemOrder, tt.DisplayVal,
    ActualDate = (select mfdate from mfseries where Id = @ID)
from 
    tblTime tt 
```

有没有办法简化这个查询而不使用子查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:24:29.477

```
DECLARE @date datetime

select @date = mfdate from mfseries where Id = @ID

select tt.ItemOrder,tt.DisplayVal,@date As ActualDate
from tblTime tt 
```

# c# - C# 正则表达式匹配所有出现

> ID：11890492
> 
> 赞同：0
> 
> 时间：2012-08-09T19:21:36.863
> 
> 标签：c#, regex, match

我正在尝试在 C# 中创建一个正则表达式，它将匹配类似的字符串`"&#00;&#01;"`，但我的正则表达式在第一次匹配时停止，我想匹配整个字符串。

我一直在尝试很多方法来做到这一点，目前，我的代码如下所示：

```
string sPattern = @"/&#\d{2};/";
Regex rExp = new Regex(sPattern);
MatchCollection mcMatches = rExp.Matches(txtInput.Text);
foreach (Match m in mcMatches) {
    if (!m.Success) {
        //Give Warning
    }
} 
```

并且也尝试过`lblDebug.Text = Regex.IsMatch(txtInput.Text, "(&#[0-9]{2};)+").ToString();`，但它也只找到第一个匹配项。

有小费吗？

编辑：

我正在寻找的最终结果是像现在这样的字符串`&#00;&#`被标记为不正确，因为只进行了第一个匹配，我的代码将其标记为正确的字符串。

第二次编辑：

我把我的代码改成了这个

```
string sPattern = @"&#\d{2};";
Regex rExp = new Regex(sPattern);

MatchCollection mcMatches = rExp.Matches(txtInput.Text);
int iMatchCount = 0;
foreach (Match m in mcMatches) {
    if (m.Success) {
        iMatchCount++;
    }
}

int iTotalStrings = txtInput.Text.Length / 5;
int iVerify = txtInput.Text.Length % 5;

if (iTotalStrings == iMatchCount && iVerify == 0) {
    lblDebug.Text = "True";
} else {
    lblDebug.Text = "False";
} 
```

这按我预期的方式工作，但我仍然认为这可以以更好的方式实现。

第三次编辑：正如@devundef 建议的那样，表达式`"^(&#\d{2};)+$"`完成了我一直在跳的工作，因此，我的最终代码如下所示：

```
string sPattern = @"^(&#\d{2};)+$";
Regex rExp = new Regex(sPattern);
lblDebug.Text = rExp.IsMatch(txtInput.Text).ToString(); 
```

我总是忽略字符串字符（^ / $）的开始和结束。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T19:26:29.400

删除`/`表达式开头和结尾的 。

```
string sPattern = @"&#\d{2};"; 
```

编辑

我测试了该模式，它按预期工作。不确定你想要什么。

两种选择：

`&#\d{2};`=> 将在字符串中给出 N 个匹配项。在字符串`&#00;&#01;`上，它将匹配 2 个组， `&#00;`并且`&#01;`

`(&#\d{2};)+`=> 将整个字符串作为一个单独的组。在字符串`&#00;&#01;`上，它将匹配 1 个组，`&#00;&#01;`

编辑2：

您想要的不是获取组，而是知道字符串的格式是否正确。这是模式：

```
Regex rExp = new Regex(@"^(&#\d{2};)+$");

var isValid = rExp.IsMatch("&#00;&#01;") // isValid = true
var isValid = rExp.IsMatch("&#00;xyz&#01;") // isValid = false 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T19:30:09.270

给你：`(&#\d{2};)+`这应该适用于一次或多次

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T19:26:49.650

(&#\d{2};)*

推荐： [http ://www.weitz.de/regex-coach/](http://www.weitz.de/regex-coach/)

# ios - 是否可以根据启动时应用程序的状态更改启动/启动屏幕？

> ID：11890493
> 
> 赞同：0
> 
> 时间：2012-08-09T19:21:36.870
> 
> 标签：ios

我的应用程序有一个只显示一次的注册屏幕，注册完成后就再也不会显示了。

如果我的启动屏幕是应用程序的屏幕截图，那么我需要提供两个屏幕截图，以便在应用程序启动时最初显示正确的屏幕截图。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:22:01.040

**不**，目前不可能。您无法从您的应用访问 Default.png（或您命名的任何名称）来更新它。

如果是我，我会将启动屏幕设置为适合长期使用的屏幕。从理论上讲，您还可以将注册屏幕更新为更接近主应用屏幕的外观和感觉，因此在视觉上并没有那么远。

# math - 格兰迪游戏的格兰迪价值

> ID：11890494
> 
> 赞同：0
> 
> 时间：2012-08-09T19:21:42.713
> 
> 标签：math

我正在开发 Grundy 的游戏。这个游戏的规则是

对于每一堆，你必须分成不相等的堆。

就像 6 它是 {1,2,3},{2,4},{1,5} 而不是 {3,3} 。

走最后一步的玩家是赢家。

我的问题是，如何找到这个游戏的 Grundy 值。我知道 G(1)=G(2)=0 就像你一样

不能拆分它们，但是 G(4)=0 , G(3) = 1 怎么样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:26:05.200

G(3) 为 1，因为您将其拆分为 1,2，而下一个玩家无法拆分其中任何一个。G(4) 为 0，因为您被迫将其拆分为 1,3，此时另一个玩家拆分 3 堆并获胜。

# image - 如何为桌面应用程序选择图像文件格式？

> ID：11890495
> 
> 赞同：2
> 
> 时间：2012-08-09T19:21:53.370
> 
> 标签：image, png, desktop-application, file-format, jpeg

我对用于 Web 的不同图像格式的优缺点有很好的了解。但是，我正在尝试决定桌面应用程序使用什么格式。

我可能有大量高分辨率图像（没有透明度）要部署。我主要权衡 JPG 与 PNG，但我对其他格式持开放态度。我的理解：

*   JPG 压缩程度更高，这意味着文件更小，但图像质量可能更低。因为它们被压缩得更多，所以它们需要更多时间来解压缩。

*   PNG 文件较大，但可保持图像质量。因为它们的压缩程度较低，所以它们解压缩得更快。

*   一旦加载和解压缩，两者都占用相同数量的 RAM。

考虑到高清空间（即应用程序大小）不是问题，PNG 似乎是一个更好的选择，因为它会更快地解压缩并出现在屏幕上，并保持更高的图像质量。

我的假设通常正确吗？有没有我忽略的细微差别？还有其他值得考虑的图像文件格式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:19:32.820

你的假设大致正确。

> 因为 [JPG] 的压缩程度更高，所以它们需要更多的时间来解压缩。

不完全是，JPG 支持不同级别的压缩，解压缩的时间取决于算法本身，它比 PNG 稍微复杂一些。但是，解压缩速度很少成为问题。而且，无论如何，这在很大程度上取决于解码器的实现。

> 似乎 PNG 是一个更好的选择，因为 HD 空间（即应用程序大小）不是问题不是问题，因为它会更快地解压缩并出现在屏幕上，并保持更高的图像质量。

或许。如果您的程序要读取-修改-写入图像，PNG肯定会更好；在这种情况下不建议使用 JPG - 除非您使用无损 JPG。相反，如果图像是只读的，则差异就不那么重要了。请注意，对于高分辨率摄影图像，压缩比可能会大不相同；而且，即使您不担心 HD 空间，由于 I/O 性能的原因，较大的文件读取速度也会变慢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:25:02.880

我会选择Jpeg。与其他格式相比，它的大小很小，您可以在高质量模式下对其进行压缩，因此很难注意到任何 Jpeg 伪影。关于解压，由于大多数解压过程都是数学运算，而且 CPU 运行速度比内存快得多，您会惊讶地听到在许多情况下解压 Jpeg 比从磁盘读取 PNG 并显示它要快。

# ios - 使用情节提要的 UIPageViewController 示例

> ID：11890499
> 
> 赞同：0
> 
> 时间：2012-08-09T19:21:58.173
> 
> 标签：ios, uipageviewcontroller

任何人都可以使用情节提要向我展示 UIPageViewController 示例吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T04:09:32.500

这很容易，我只是想通了。打开一个新项目，而不是选择单视图应用程序，只需选择基于页面的视图应用程序，它会自动连接所有内容。

# javascript - Facebook 登录错误 (Javascript)

> ID：11890500
> 
> 赞同：2
> 
> 时间：2012-08-09T19:22:03.127
> 
> 标签：javascript, facebook, login

我正在尝试通过 Javascript 启用 Facebook 登录到我的网站，但是当用户登录时，Facebook 弹出窗口不会关闭。相反，它显示以下消息：

> 作为登录过程的一部分，可能发生了错误。您可以关闭此窗口并尝试返回应用程序，但它可能会要求您再次登录。这可能是由于应用程序中的错误。

如果我再次单击登录按钮，一切正常。

这是我的代码：

```
// Load the SDK Asynchronously
(function(d){
    var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
    if (d.getElementById(id)) {return;}
    js = d.createElement('script'); js.id = id; js.async = true;
    js.src = "//connect.facebook.net/en_US/all.js";
    ref.parentNode.insertBefore(js, ref);
}(document));

// Init the SDK upon load
window.fbAsyncInit = function() {
    var doLogin = function (response) {
        url = '//'+window.location.hostname+'?        access_token='+response.authResponse.accessToken;

        window.top.location = url;
    };

    FB.init({
        appId      : 'MY_APP_ID', // App ID
        status     : true, // check login status
        cookie     : true, // enable cookies to allow the server to access the session
        xfbml      : true, // parse XFBML
        oauth      : true,
        channelUrl : '//'+window.location.hostname+'/static/html/channel.html'
    });

    FB.Event.subscribe('auth.login', function(response) {
        doLogin(response);
    })

    FB.getLoginStatus(function(response) {
        if (response.status == 'connected') {
            doLogin(response);
        }
    }, true);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T16:20:36.113

你应该尝试这样的事情：

[https://gist.github.com/3370553](https://gist.github.com/3370553)

或者您可以使用 JS API 中的“FB.login”替换 AuthorizeFacebook

# ios - 将 UIView 动态添加到另一个

> ID：11890501
> 
> 赞同：1
> 
> 时间：2012-08-09T19:22:04.757
> 
> 标签：ios, xcode

我是 IOS、Xcode 和 MVC 的新手。我处于陡峭的学习曲线上，并且在我认为是最基本的任务上失败了。

我有一个带有两个选项卡的选项卡式应用程序。两个选项卡视图都与 Web 服务通信，我想为每个选项卡视图添加一个图像，更改图像以指示连接状态。

因此，我创建了第三个带有控制器类 (IconViewController) 的 .xib 文件。我希望在每个选项卡视图中添加和删除此图标视图的实例。

这是我的图标视图的伪代码：

```
@interface IconViewController : UIViewController
{
    UIImageView *_icon;
}

@property (nonatomic) IBOutlet UIImageView *icon;

- (void)setForBusy;
- (void)setForOk;
- (void)setForFail; 
```

和实施：

```
@implementation IconViewController

@synthesize icon = _icon;

-(void)setForBusy
{
    // Set Busy Icon Image
}

-(void)setForOk
{
    // Set Ok Icon Image
}

-(void)setForFail
{
    // Set Fail Icon Image
} 
```

图标 IBOutlet 连接到随附的 xib 文件上的 UIImageView。

这是根选项卡控制器之一：

```
#import "IconViewController.h"

@interface TaboneViewController : UIViewController
{
    IconViewController *_iconViewController;
}
@property (nonatomic) IBOutlet IconViewController *iconViewController; 
```

和实施：

```
@synthesize iconViewController = _iconViewController;

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.iconViewController = [[IconViewController alloc]
                            initWithNibName:@"iconViewController"
                            bundle:nil];
    [self.view addSubview:self.iconViewController.view];
} 
```

在 tabView xib Interface Builder 中，我添加了一个 Object 并将其设为类类型*IconViewController*。我将**Icon View Controller Object->Reference Outlet**连接到**File Owner->iconViewController Outlet**。

运行项目我收到错误：
**加载了“iconViewController”笔尖，但未设置视图出口。**

我已经尝试过其他连接，但没有运气。在我看来，我的第一个连接应该可以工作，但它没有。

知道我在误解什么吗？原理好吗（将第三个视图的实例加载到两个根视图中）？如果是这样，需要连接什么插座？

非常感谢，波莉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T10:12:28.430

我看到了你的问题。您希望两个选项卡都有共同的图像阶段。我认为最好实现 UIView（或 UIImageView）的子类并实现所有方法，如 set (void)setForBusy 等。你应该从父 ViewController 接收到的图像阶段，比如 UINavigationView 控制器（如果你有的话）。否则，您应该将舞台保存在其他地方。我个人认为仅仅为了你的目的而创建新的控制器太贵了。

希望能帮助到你。

# android - Android Intent 如何处理其 URI？

> ID：11890507
> 
> 赞同：1
> 
> 时间：2012-08-09T19:22:29.430
> 
> 标签：android, android-intent

阅读文档和其他一些文档，没有人真正指定 Intent 对传递的 URI 做了什么。我只是好奇当它获得 URI 时会发生什么。我知道这取决于方案，所以如果方案是`http`，那么它是否会尝试打开该 Web URI？

我问，因为我正在尝试使用以 JSON 格式发回数据的 RESTful API。在尝试将数据从一个活动传递到另一个活动时，让它为我打开 URI，而不是通过 HttpClient 自己进行 HTTP 调用会很好。没什么大不了的，但我只是好奇这是否有效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:13:36.457

Intent 只是一个对象……它对 URI 没有任何作用。Intent 用于 startActivity()、sendBroadcast() 等函数调用。

例如，当您将 Intent 传递给 startActivity() 时，该 Intent 对象对 Activity 可用。Activity 可以随意解释 URI。

Android 还使用 Intent Filters 来帮助将 Intent 路由到各种已安装的 Activity，这些 Intent Filter 可能会检查 URI。

查看[http://developer.android.com/guide/components/intents-filters.html](http://developer.android.com/guide/components/intents-filters.html)以获取所有信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T20:21:14.123

您的意思并不完全清楚，但是 Intents 的行为基本上是由 Android 包管理器决定的。您可以将 Intent 视为过程调用：您指定某人来处理 Intent，以及一些附加数据（参数），可能是某个类别等......

Android 包管理器会查看您的意图，并且基本上会询问“系统上的哪个应用程序准备使用和处理此意图？” 然后系统打开该应用程序（如果它尚未驻留在内存中），然后将意图抛出该应用程序。请注意，在某些情况下，意图处理程序之间可能存在歧义：可以准备多个应用程序来处理意图。您有时可以通过要求用户选择应该处理意图的应用程序的形式看到这一点（并且用户可以选择默认应用程序）。

当然，如何处理意图的动态语义取决于系统上安装的应用程序集，并且可能会根据安装的应用程序类型而改变。听起来，在您的情况下，您最关心的是具有`ACTION_VIEW`与其相关联的操作的意图。在*一般*情况下，看起来像 URL 的东西会被浏览器“捕获”（尽管不能保证一定是这种情况！），并且包管理器会查看 URI 的结构并说“嘿，这看起来它应该由应用程序 X 处理，”我将把这个 URL 发送给它。（当然，新应用程序可以通过注册其他意图过滤器来改变这种行为..）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T20:14:14.710

**意图是对要执行的操作的抽象描述。**`uri`意图必须对其进行操作的特定数据：

> 意图结构
> 
> 意图中的主要信息是：
> 
> *   action：要执行的一般动作，如ACTION_VIEW、ACTION_EDIT、ACTION_MAIN等。
>     
>     
> *   data：要操作的数据，例如联系人数据库中的人员记录，以 Uri 表示。
>     操作/数据对的一些示例是：
>     
>     
>     
>     ACTION_VIEW content://contacts/people/1 -- 显示标识符为“1”的人的信息。
>     
>     
>     
>     ACTION_VIEW tel:123 -- 显示填写给定号码的电话拨号器。注意 VIEW 操作如何执行被认为对特定 URI 最合理的事情。
>     
>     
>     
>     ACTION_VIEW content://contacts/people/ -- 显示用户可以浏览的人员列表。此示例是联系人应用程序的典型顶级条目，向您显示人员列表。选择要查看的特定人员将导致使用新意图 { ACTION_VIEW content://contacts/N } 来启动显示该人员的活动。

因此，您可以看到具有不同数据/uri 的相同操作在`data operate on`.

# math - 有没有更优雅的方法来计算 x = (y / n) + (y % n ? 1 : 0) ？

> ID：11890514
> 
> 赞同：6
> 
> 时间：2012-08-09T19:22:41.613
> 
> 标签：math, language-agnostic

在编程时，我经常发现自己需要计算以下内容：

`x = (y / n) + (y % n ? 1 : 0);`

或更明确地说：

```
x = y / n;
if (y % n != 0) {
   x = x + 1;
} 
```

有没有更优雅的方式来实现这个值？不使用条件表达式可以实现吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-09T19:26:10.073

因此，您希望整数除法向上舍入而不是向下舍入。您可以通过添加`n-1`分子来伪造它：

```
x = (y + n - 1) / n; 
```

这样，您可以将值四舍五入到刚好足以为您提供所需结果的值。

# visual-studio-2010 - 修复nuspec文件中的错字后nuget“无法解决依赖关系”

> ID：11890515
> 
> 赞同：1
> 
> 时间：2012-08-09T19:22:41.343
> 
> 标签：visual-studio-2010, nuget, nuget-package

我有两个 Visual Studio (2010) 解决方案。一种解决方案，SolutionAlpha，有两个项目，ProjA 和 ProjB，这两个项目都有 nuspec 文件，都启用了包构建，并为这两个项目生成了一个 nupkg 文件。我在 nuspec 文件中为 ProjB 添加了一个指向 ProjA 的依赖项，但我不小心在名称中有一堆空格，所以它看起来像：

```
<depedencies>
    <dependency>Pro      jA</depedency>
</dependencies> 
```

我将 ProjA 和 ProjB 的两个 nupkg 文件放在一个目录中，Visual Studio 设置为用作 nuget 存储库。在 SolutionNumeric 的 Proj1 中，我尝试添加对 ProjA 和 ProjB 的 Nuget 引用，但我不断得到`Unable to resolve dependency 'Pro jA`.

我更正了 ProjA 中的 nuspec 文件，将其复制到目录，使用 NuGet 包资源管理器确认它是正确的，并通过 Visual Studio 清除了最近的包和包缓存，但仍然出现错误。

我该如何解决这个问题？

谢谢！

**编辑：**

这适用于从未使用过 nuget 的解决方案。

当我启动包管理器控制台时，我得到`Package Manager Console Host Version 2.0.30619.9119`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:34:20.270

当然，经过太多时间试图弄清楚这一点，并且在此处提出问题后，我立即发现答案是从`packages`我的解决方案中的目录中删除相关文件夹。我曾尝试对解决方案目录进行全文搜索，以查找坏名，甚至只是空格后面的部分名称，但没有得到任何我能理解的东西。它一定是在包的某个地方的某个二进制文件中。

# java - HandlerInterceptorAdapter 似乎没有转发 HttpServletRequestWrapper

> ID：11890516
> 
> 赞同：1
> 
> 时间：2012-08-09T19:22:47.877
> 
> 标签：java, spring, servlets, spring-mvc, interceptor

我正在尝试为我的 JSON 网络服务创建一个验证系统。这个想法是让一个拦截器捕获每个 Json `@RequestBody`，通过`JacksonMapping`. 然后`ValidationAnnotations`从中读取以检查数据，当通过完成常规流程时，将使用包含错误消息的模型和视图图发送回发送者。

知道这个上下文考虑这个

```
@RequestMapping(value="/rest/contact/list/filter", method = RequestMethod.POST, consumes="application/json", produces="application/json")
public @ResponseBody JsonContactList findFilteredContacts(@RequestBody JsonContactSelectorData selectorData, Model model) throws Exception {
    MbaLog.debugLog(logger,"Finding Contacts with selector data: " + selectorData);     
    JsonContactList result = contactService.findContacts(selectorData);
    return result;
} 
```

这是拦截器之前的我的控制器方法，以下是拦截器

```
@Override
public boolean preHandle(HttpServletRequest request,
        HttpServletResponse response, Object handler) throws Exception {
    ValidationRequestWrapper wrapper = new ValidationRequestWrapper(request);
    //do complex validation here 
    return super.preHandle(wrapper, response, handler);
} 
```

列表中的下一个是 requestwrapper

```
public class ValidationRequestWrapper extends HttpServletRequestWrapper {

    private String jsonString;

    public ValidationRequestWrapper(HttpServletRequest request) throws IOException {
        super(request);
        jsonString = "";
        Scanner scanner = new Scanner(request.getInputStream(), "UTF-8").useDelimiter("\\A");
        if (scanner.hasNext())
            jsonString = scanner.next();

        System.out.println("need a break");
    }

    @Override  
    public ServletInputStream getInputStream ()   
        throws IOException {   

        final ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(jsonString.getBytes());   
        ServletInputStream inputStream = new ServletInputStream() {   
            public int read ()    
                throws IOException {   
                return byteArrayInputStream.read();   
            }   
        };   
        return inputStream;   
    }   
} 
```

如您所见，我获取了请求输入流，然后`getInputStream()`在这些情况下覆盖了自定义项。在拦截器中，您可以看到我实例化了这个包装器并将其传递给 super.prehandle(...)。我希望然后进入控制器并愉快地使用我的 jsonobject 进一步工作。然而结果相当令人失望。

```
java.io.EOFException: No content to map to Object due to end of input 
```

似乎没有调用覆盖的输入流方法？还是我的这个机制完全错了？我什至可以使用`HandlerInterceptorAdapter`?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-11T11:16:31.940

我设法弄清楚 HandlerInterceptorAdapter 不可能完成我在问题中要求的功能。

我解决这个问题的唯一选择是使用 javax.servlet.Filter

例子

```
@Override
public void doFilter(ServletRequest request, ServletResponse response,
        FilterChain chain) throws IOException, ServletException {
    InterceptorRequestWrapper myRequestWrapper = new InterceptorRequestWrapper((HttpServletRequest) request);
    String httpRequestMethod = ((HttpServletRequest) request).getMethod();
    if("POST".equals(httpRequestMethod) || "PUT".equals(httpRequestMethod)){
        String body = myRequestWrapper.getBody();
        ErrorObject errorObject = new ErrorObject();
        errorObject.setSource(body);
        Map<String, List<ErrorMessage>> errorMessages = new HashMap<String, List<ErrorMessage>>();
        ErrorMessage error = new ErrorMessage();
        error.setErrorLabel("myerror");
        errorMessages.put("test", Arrays.asList(error));
        errorObject.setErrorMessages(errorMessages);
        myRequestWrapper.setAttribute("errorObject", errorObject);
    }
    chain.doFilter(myRequestWrapper, response);
} 
```

# javascript - Backbone：在创建时处理服务器响应

> ID：11890517
> 
> 赞同：2
> 
> 时间：2012-08-09T19:22:48.703
> 
> 标签：javascript, backbone.js

我有一个处理表单的视图。
此表单有一个在单击保存按钮时触发的事件：

```
var FormView = Backbone.View.extend({
    initialize : function(options){
        this.collection = new PlayerCollection( {url:options.url} );
        this.collection.bind('add', this.addPlayer);
        this.collection.bind('reset', this.addAllPlayers );
    },
    saveNewPlayer : function(event){

        this.collection.create({
        name :    this.$form.find('input[name="name"]').val(),
        });
    }
}); 
```

（我省略了本示例不需要的一些代码）。

此代码正确保存新模型，将数据发送到服务器并创建与此新模型关联的视图。但我想知道在向其发布数据时如何处理服务器响应。
例如，如果服务器无法保存数据或发现任何其他类型的错误，我该如何处理？

我是主干新手，从现在开始我一直在使用 jQuery 来编写我的应用程序，所以我习惯于使用`success`和`error`回调`$.ajax`提供。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T19:26:40.090

Backbone 提供了类似的回调，作为第二个选项哈希添加到创建（以及获取和保存）命令，如下所示：

```
this.collection.create({
    name :    this.$form.find('input[name="name"]').val(),
},{
    error : function(model, response){},
    success: function(model, response){}
}); 
```

# c# - 为什么 for 语句中的随机方法返回相同的结果？

> ID：11890518
> 
> 赞同：2
> 
> 时间：2012-08-09T19:22:51.057
> 
> 标签：c#, .net, random

> **可能重复：**
> [随机数生成器未按我计划的方式工作（C#）](https://stackoverflow.com/questions/767999/random-number-generator-not-working-the-way-i-had-planned-c)

我有一个返回 9 位字符串数字的方法，如果我调用此方法，它会按预期正常工作，但当我在循环语句中调用它时不会，因为它只生成一个数字并重复它。

这是代码：

```
private string GenerateRandomNumber()
        {
            Random r = new Random();
            return r.Next(111111111, 999999999).ToString();
        }
        protected void btnSolo_Click(object sender, EventArgs e)
        {
            Response.Write(GenerateRandomNumber());
            // Every time I call this method , it return 9 digit random number wich is different with the previous call like : 146956595  
        }
        protected void btnBulk_Click(object sender, EventArgs e)
        {
            for (int i = 0; i < 100; i++)
            {
                string randomNumber = GenerateRandomNumber();
                Response.Write("<br /> " + randomNumber);
                //It  create just one 9 digit number 100 times !
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T19:28:39.667

在`Random r = new Random();`类级别完成，并保存`r`为类变量。后续调用`Next`不会生成相同的“随机”值。

```
private static Random r = new Random();

private string GenerateRandomNumber()
{
    return r.Next(111111111, 999999999).ToString();
}

protected void btnSolo_Click(object sender, EventArgs e)
{
    Response.Write(GenerateRandomNumber());
}

protected void btnBulk_Click(object sender, EventArgs e)
{
    for (int i = 0; i < 100; i++)
    {
        string randomNumber = GenerateRandomNumber();
        Response.Write("<br /> " + randomNumber);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T19:27:15.220

GenerateRandomNumber() 方法使用系统时钟作为种子。

也就是说，它对系统时钟的当前值执行复杂的计算，因为真正的随机性在计算机上是不可能的。问题是 CPU 速度如此之快，以至于您可能正在运行循环并获得相同的值，因为时间几乎没有改变（如果有的话）。尝试循环进行更多迭代，看看会发生什么，最终随机值应该改变。

# javascript - 初始淡入后淡入

> ID：11890520
> 
> 赞同：0
> 
> 时间：2012-08-09T19:22:58.657
> 
> 标签：javascript, jquery

我正在一个网站上尝试让导航在背景初始淡入后淡入。这里是网站：[http ://mccraymusic.com/newsite/](http://mccraymusic.com/newsite/)

我知道导航不起作用并且尚未设置样式。如果您单击“进入站点”，您将看到我正在谈论的背景淡化动作。您还会注意到导航当前的行为方式。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:37:42.877

您可以尝试链接效果

```
.fadeOut(1000).fadeIn(1000) 
```

[http://jsfiddle.net/pkQcA/1/](http://jsfiddle.net/pkQcA/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:26:11.660

您可以使用几乎所有 jquery 效果方法中都存在的回调参数。例如：

```
$( '#background' ).fadeOut( 'fast', function(){
  $( '#nav' ).fadeIn( 'fast' );
}); 
```

编辑：：：

刚刚看了你的代码。尝试这个：

```
$('#bg').parent().fadeOut(200, function() {
  $('#bg').attr('src', 'assets/images/'+image); 
  $(this).fadeIn(1000);
  $('.navbar').animate({ opacity : 100 });
}); 
```

# multithreading - C++ CLI：如何在不暂停线程的情况下制作等待计时器（可能在 while 循环中）？

> ID：11890521
> 
> 赞同：0
> 
> 时间：2012-08-09T19:23:02.057
> 
> 标签：multithreading, c++-cli, wait

我会尽量描述这个问题。我有一个用 C++ CLI (Visual Studio 2010) 设计的 GUI，带有一些 OpenGL。

我有一个循环，这是完成的（或应该完成的）： 1\. 从文件中读取行，将其解析为部分 2\. 在一段时间内调用等待函数 - 在此期间不采取任何行动（但 GUI 应该是可用的 - 紧急停止按钮等） 3\. 一旦时间过去，回到从文件读取行。

我绝对可以使用中断在 C 中的微控制器端执行此操作，但我不知道如何在这里实现相同的目标。我最初的想法是启动计时器，当经过时间的事件处理程序触发时，调用一个函数，该函数又会再次调用读取函数。但我认为这不会很好，因为在读取整个文件结束时，所有这些函数都会返回给它们的调用者。这也可能是一团糟，因为文件在技术上可以有无限多的行（所有这些调用都会耗尽内存）。我的意思基本上是一个巨大的递归函数循环（最好我可以描述它们，A 会调用 B，但 B 会调用 A，然后 A 会再次调用 B。

我找到了这篇文章：[Windows 应用程序中的等待窗口，](https://stackoverflow.com/questions/181643/wait-window-in-a-windows-application)其中包含有关使用委托的建议，但 C++ 不接受匿名委托。我也不知道这是否符合我的要求。时间过去后，以下代码片段将返回到哪里？（我知道这是针对 C# 的，但想法应该是一样的，对吧？）

```
Timer t = new Timer();
t.Interval = 2000;
t.Tick += delegate { Close(); t.Stop();};
t.Start(); 
```

我曾考虑过线程，但我不知道这将如何解决我的问题。我需要等待计时器来触发另一个文件读取实例，这将涉及调用一个函数，导致我无休止的函数调用担心。

还有这个，我看过：http: [//msdn.microsoft.com/en-us/library/system.threading.timercallback.aspx](http://msdn.microsoft.com/en-us/library/system.threading.timercallback.aspx)，它使用 TimerCallback 。但这会暂停线程直到计时器触发，对吗？这意味着 GUI 将无响应。

虽然我当然想避免反应迟钝，但我可以做到。或者最好将整个文件读取/等待块放入自己的线程并让它延迟它想要的任何东西？

我很感激这个建议。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-10T20:50:29.827

while (TimeNotElapsed)
     Application::DoEvents();

# objective-c - 避免复制 NSMutableArray 以进行多线程写入读取

> ID：11890522
> 
> 赞同：6
> 
> 时间：2012-08-09T19:23:03.663
> 
> 标签：objective-c, cocoa-touch, concurrency, nsmutablearray

我有一个使用可变数组的类，该数组在大量读取（新项目到达）后修改一次。

问题是，当需要对数组进行变异时，读取会不断出现。

目前为了避免这个问题，它每次读取它在副本上执行的操作：

```
[[theArray copy] operation] //operation being indexOfObject:, objectAtIndex: objectsAtIndexes:, etc. 
```

副本变得非常昂贵，尤其是在不需要的时候（所有那些数组没有发生突变的时候）。

如何锁定数组以延迟对其进行突变时的访问？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T19:29:38.117

将您所有的数组访问放到一个串行调度队列中。这将防止任何两个操作同时发生。请参阅并发编程指南中的[“消除基于锁的代码”](http://developer.apple.com/library/ios/documentation/General/Conceptual/ConcurrencyProgrammingGuide/ThreadMigration/ThreadMigration.html#//apple_ref/doc/uid/TP40008091-CH105-SW3)。

如果您可以要求 iOS >= 4.3，您可以使用并发自定义队列和[调度屏障](http://developer.apple.com/library/ios/documentation/Performance/Reference/GCD_libdispatch_Ref/Reference/reference.html#//apple_ref/doc/uid/TP40008079-CH2-SW57)进行突变操作。这将允许读取同时发生，但是当需要写入时，它们将被暂停直到写入完成。作为屏障提交的块本质上是在并发队列上串行执行的——它不会在所有先前的块完成之前开始，任何后续块也不会在屏障块完成之前开始。（这是 Justin 提到的读写锁的 GCD 版本。）我将您引向无与伦比的 Mike Ash 以[获取此](http://www.mikeash.com/pyblog/friday-qa-2011-10-14-whats-new-in-gcd.html).

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-09T19:25:44.193

最简单的方法是使用[`@synchronized`](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/ThreadSafety/ThreadSafety.html)，如下所示：

```
-(void) accessTheArray {
    MyClass *obj;
    @synchronized(theArray) {
        obj = [theArray objectAtIndex:...];
    }
    [obj someMessage];
} 
```

**编辑：**如果不使用 ARC，您可能希望保留/自动释放该对象，否则它可能会在`someMessage`调用之前从数组中删除（并释放）（感谢[omz](https://stackoverflow.com/users/573626/omz)的出色评论）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T19:25:28.680

在这种情况下，您会考虑使用读/写锁。Cocoa 不提供它们，但`pthread_rwlock_t`在 pthreads 接口中可用——在`pthread.h`. `@synchronized`请注意，这将比，甚至是普通锁更有效（对于您的使用） 。

# ant - TestNG 测试通过，但在通过 Ant 运行时失败，即使构建成功

> ID：11890524
> 
> 赞同：0
> 
> 时间：2012-08-09T19:23:12.410
> 
> 标签：ant, testng

我有一个 TestNG 测试，在 Eclipse 中作为 TestNG Suite 运行时按预期工作，但在通过 TestNG Ant Task（也通过 Eclipse）运行时失败。当我通过命令行运行 Ant 时，同样的测试也失败了。构建成功，但测试失败并显示以下消息：

org.testng.TestNGException：@Test 在方法登录时需要参数“homepage.title”，但尚未标记为@Optional 或已定义

该参数在我的 TestNG.xml 中正确定义，正如我所提到的，如果我通过“Run as TestNG Suite”运行相同的测试将通过

提前致谢！我也希望能够帮助别人！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T04:45:18.220

看起来您为测试定义了一个参数，但没有为它指定一个值。

```
@Test
public void myTest(String myParameter){
} 
```

有几种方法可以解决这个问题。一种是指定参数注释并在 testng.xml 或通过 jvm arg 中传递参数：

```
@Test
@Parameters({"myParameter"})
public void myTest(String myParameter){
} 
```

testng.xml 文件：

```
<suite>
    <test>
         <parameter name="myParameter" value="myValue" />
         <classes>
              <class name="org.example.MyTestClass" />
         </classes>
    </test>
</suite> 
```

或在 build.xml 文件中指定 jvmarg 属性：

```
<testng>
   <jvmarg value="-DmyParameter=myValue" />
   <!-- ... -->
</testng> 
```

TestNG 建议的另一种方法是使用@Optional 注释参数：

```
@Test
@Parameters({"myParameter"})
public void myTest(@Optional("myValue") String myParameter){
} 
```

另外要注意的是，您的构建可能通过的原因是您是否告诉 Ant 在测试失败时使构建失败。在这种情况下，如果构建编译，但有一个测试失败，构建仍然会报告“成功”结果：

```
<testng haltonfailure="true">
   <!-- ... -->
</testng> 
```

属性的默认值为`haltonfailure`“false”。

[有关参数](http://testng.org/doc/documentation-main.html#parameters)以及如何将[TestNG 与 Ant](http://testng.org/doc/ant.html)一起使用的更多信息，请参阅[TestNG 文档](http://testng.org/doc/documentation-main.html)。

# java - 如何设置刚性区域的颜色

> ID：11890529
> 
> 赞同：0
> 
> 时间：2012-08-09T19:24:04.283
> 
> 标签：java, swing

我有一个背景颜色为黑色的 JFrame。

```
setBackground(Color.BLACK); 
```

我使用 RigidArea 作为过滤器：

```
Component rigidArea = Box.createRigidArea(new Dimension(0, 20));
rigidArea.setBackground(Color.BLACK);
getContentPane().add(rigidArea); 
```

但这不起作用，因为rigidArea 的颜色不是黑色。这里有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:44:10.443

您是否尝试过将 JFrame 的内容窗格的背景也设置为黑色？

`getContentPane().setBackground(Color.BLACK);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T19:38:29.930

在[docs](http://docs.oracle.com/javase/6/docs/api/javax/swing/Box.html#createRigidArea%28java.awt.Dimension%29)中， createRigidArea 创建了一个始终为指定大小的*不可见组件。*

对于可见组件，您可以创建一个辅助方法来创建 JPanel：

```
JComponent createVisibleComponent(Dimension d) {
    JPanel panel = new JPanel();
    panel.setMinimumSize(d);
    panel.setMaximumSize(d);
    panel.setPreferredSize(d);

    return panel;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T19:45:25.813

为什么不简单地添加 a`JPanel`并指定其尺寸？

```
JPanel pan = new JPanel();
pan.setBackground(Color.BLACK);
Dimension d = new Dimension(0,20);
pan.setSize(d);
pan.setPreferredSize(d);
pan.setMaximumSize(d);
pan.setMinimumSize(d);
getContentPane().add(pan); 
```

# javascript - 如何正确执行数据绑定

> ID：11890530
> 
> 赞同：1
> 
> 时间：2012-08-09T19:24:04.070
> 
> 标签：javascript, html, data-binding, knockout.js

我需要为`id`元素分配属性，然后触发一个函数，女巫将使用这个唯一的`id`。

HTML：

```
<div class="item-timeleft" data-bind="id: 'timer'+ID, init: zxcCountDown('timer'+ID, 'message', 20)">
</div> 
```

Javascript：

```
var data = [];

var viewModel = {
    item: ko.observableArray(data)
};
ko.applyBindings(viewModel);

$.ajax({
    url: 'api/item/all',
    dataType: 'json',
    success: function (data) {
        var item_array = [];
        $.each(data, function (index, item) {
            item_array[index] = item;
        });
        viewModel.item(item_array);
        console.log(data);
    }
}); 
```

附加的 javascript 和自定义绑定：

```
ko.bindingHandlers.id = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
    },
    update: function (element, valueAccessor, allBindingsAccessor, viewModel) {
        $(element).attr('id', valueAccessor());
    }
};

function zxcCountDown(id, mess, secs, mins, hrs, days) {
    var obj = document.getElementById(id);
    alert(obj.id);
    var oop = obj.oop;
    if (!oop) obj.oop = new zxcCountDownOOP(obj, mess, secs, mins, hrs, days);
    else {
        clearTimeout(oop.to);
        oop.mess = mess;
        oop.mhd = [mins, hrs, days];
        oop.srt = new Date().getTime();
        oop.fin = new Date().getTime() + ((days || 0) * 86400) + ((hrs || 0) * 3600) + ((mins || 0) * 60) + ((secs || 0));
        oop.end = ((oop.fin - oop.srt));
        oop.to = null;
        oop.cng();
    }
} 
```

当我在控制台中重新触发它时，函数工作得很好，但不知何故我不知道如何分配 id 然后才触发该函数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T20:31:16.570

Checkout this [jsFiddle Demo](http://jsfiddle.net/gurkavcu/e2adE/)

You can use attr binding to set id of your item. **attr:{ 'id' : 'TIMER_'+id()}**

```
<span data-bind="delayInit : zxcCountDown  , pId : 'TIMER_'+id() , pMessage : 'Hello' , pSecond : 3 , attr:{ 'id' : 'TIMER_'+id()} , text : 'DEMO'"></span>​ 
```

Then define a delayInit binding which make sure your function called after the id value has been set. It simply call your function inside a SetTimeout function with 0 second delay.

```
var viewModel = {
    id : ko.observable(5) ,
    zxcCountDown : function(id, mess, secs, mins, hrs, days) {
         alert("MESSAGE : "+ mess+ "/ ID : "+id  + "/ SECOND : " + secs);
         alert("My item value :" + document.getElementById(id).textContent);
    }
}

ko.bindingHandlers.delayInit = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
        var allBindings = allBindingsAccessor() || {};
        if(allBindings) {             
             setTimeout( function() {               
                valueAccessor()(allBindings.pId,allBindings.pMessage, allBindings.pSecond);
             } , 0);        
        }
    }
};

ko.applyBindings(viewModel); 
```

# android - 移动混合应用程序测试

> ID：11890534
> 
> 赞同：0
> 
> 时间：2012-08-09T19:24:26.047
> 
> 标签：android, testing

我正在寻找移动混合应用程序的测试工具。我试过 Monkey Talk best 5，但它不完全支持 javascript 测试。

请建议市场上可用的其他平台/工具

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-18T12:34:56.720

试试[http://testobject.com](http://testobject.com)，把它想象成一个 Sikuli for Mobile

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-26T06:41:13.057

目前我正在使用 FoneMonkey、适用于 iOS 的 UTF/QTP 和适用于 Android 的 Robotium，并发现这些是移动应用程序测试的最佳工具。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-14T10:31:00.263

SeeTest 对混合应用程序提供全面支持。请参阅此处（在网络标识下）[http://expitest.com/support/features-2/](http://experitest.com/support/features-2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T04:29:51.807

试试 Sikuli - > [http://sikuli.org/](http://sikuli.org/)

# sql - sql server 2008 选择问题

> ID：11890537
> 
> 赞同：0
> 
> 时间：2012-08-09T19:24:33.157
> 
> 标签：sql, sql-server, sql-server-2008, tsql

有两张桌子

```
Users:Id(PK int), Username(varchar (50))
Emails:Id(PK int), UserId(FK int), Subject(varchar(50)), Content(varchar(250)), SentAt(datetime) 
```

我必须显示每个用户发送的电子邮件数量，按天分组，按当天发送的电子邮件总数排序。我最好举个例子：

```
Date     |User       |Total
---------|-----------|-------
2012-4-5 |username1  |7
2012-4-5 |username2  |2
2012-4-2 |username1  |3
2012-3-24|username1  |12
2012-3-24|username5  |2 
```

我试过了，但显然它不起作用。

```
ALTER PROCEDURE spGetStatistics
AS
SELECT e.SentAt, u.Username, ( SELECT COUNT(*) FROM Emails e2 WHERE e2.SentAt=e.SentAt AND e2.UserID=u.UserID ) AS Total
FROM Emails e INNER JOIN Users u ON e.UserID=u.UserID
GROUP BY e.SentAt
ORDER BY Total 
```

乐：

```
Using the solution provided by Adrian which is:

    SELECT CAST (e.SentAt AS date), u.Username,  COUNT(*) AS Total
    FROM Emails e INNER JOIN Users u ON e.UserID=u.UserID
    GROUP BY CAST (e.SentAt AS date), u.Username
    ORDER BY Total

I got this:
    Date       |User       |Total
    -----------|-----------|-------
    2012-09-08 |username1  |1
    2012-09-07 |username2  |2
    2012-09-08 |username2  |2

instead of

    Date       |User       |Total
    -----------|-----------|-------
    2012-09-08 |username2  |2
    2012-09-08 |username1  |1
    2012-09-07 |username2  |2

It seems to be working like this:
SELECT CAST (e.SentAt AS date), u.Username,  COUNT(*) AS Total
FROM Emails e INNER JOIN Users u ON e.UserID=u.UserID
GROUP BY CAST (e.SentAt AS date), u.Username
ORDER BY CAST (e.SentAt AS date) DESC, Total DESC 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:27:00.973

这应该这样做：

```
SELECT 
    cast(e.SentAt as Date) [Date], 
    u.Username,
    COUNT(*) AS Total
FROM Emails e INNER JOIN Users u ON e.UserID=u.UserID
GROUP BY cast(e.SentAt as Date), u.Username
ORDER BY 3 
```

现在，这隐藏了未发送电子邮件的用户（计数 = 0）。如果你想包括这些，你应该切换到这个：

```
SELECT 
    cast(e.SentAt as Date) [Date], 
    u.Username,
    COUNT(e.Id) AS Total
FROM Users u LEFT JOIN Emails e ON e.UserID=u.UserID
GROUP BY cast(e.SentAt as Date), u.Username
ORDER BY 3 
```

**更新**

对于所需的订单，您应该使用：

```
SELECT 
    cast(e.SentAt as Date) [Date], 
    u.Username,
    COUNT(*) AS Total
FROM Emails e INNER JOIN Users u ON e.UserID=u.UserID
GROUP BY cast(e.SentAt as Date), u.Username
ORDER BY cast(e.SentAt as Date), Total DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:28:07.557

```
SELECT e.SentAt, u.Username, count(e.Id) AS Total
FROM Emails e
  INNER JOIN Users u ON (e.UserID = u.UserID)
GROUP BY e.SentAt, u.Username
ORDER BY Total 
```

# ios - iOS UITableView：仅显示 fetchedResultsController 中的 20 行，其中包含 500 个对象

> ID：11890539
> 
> 赞同：0
> 
> 时间：2012-08-09T19:24:36.623
> 
> 标签：ios, uitableview, nsfetchedresultscontroller

我正在努力在 UITableView 中仅显示来自 NSFetchedResultsController 的 20 行。

目前 UITableView 显示来自 NSFetchedResultsController 对象的所有数据：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [[self.fetchedResultsController fetchedObjects] count];
} 
```

我要做的是首先显示 20 行，然后当用户滚动到 21 行时，它会再加载 20 行。但在此之前，我想了解如何限制 tableView 行。

我四处寻找，尝试了其他人的建议，但仍然缺乏理解。请引导我走向光明...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:28:34.823

`NSFetchRequest`有一个方法叫做`fetchLimit`. 您可以将其设置为 20，它只会获取 20。

话虽这么说，我不太确定你为什么想要你所描述的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:40:37.783

The count of the fetchedObjects array might not what you want to do, since it does not update the changes from the persistent store. From NSFetchedResultsController documentation:

> The results array only includes instances of the entity specified by the fetch request (fetchRequest) and that match its predicate. (If the fetch request has no predicate, then the results array includes all instances of the entity specified by the fetch request.)
> 
> The results array reflects the in-memory state of managed objects in the controller’s managed object context, not their state in the persistent store. The returned array does not, however, update as managed objects are inserted, modified, or deleted.

If you only want to fetch 20 objects, set the fetch limit of the NSFetchRequest. If you want only to keep 20 objects in memory, use setBatchSize of the NSFetchRequest object.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T19:29:12.983

代替：

```
return [[self.fetchedResultsController fetchedObjects] count]; 
```

利用：

```
return (20 * X); 
```

其中 X 是您向表格视图添加更多结果的次数，当然也受到 CoreData 数据库中记录数量的限制。

这里的技巧是根据您的 UI 来决定如何触发对 X 增量的更改。一旦你增加了 X，你就可以调用 UITableView 的[`[insertRowsAtIndexPaths: withRowAnimation:]`方法](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UITableView_Class/Reference/Reference.html#//apple_ref/occ/instm/UITableView/insertRowsAtIndexPaths%3awithRowAnimation%3a)。

当然，您需要确保您的后备商店与表中当前显示的内容相匹配（这使得 iBlue 的答案也非常相关......对他们+1！）。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-09T19:30:07.903

看看这个例子——这个实现包括拉动刷新和“加载更多”效果，你正在努力实现:)

[https://github.com/shiki/STableViewController](https://github.com/shiki/STableViewController)

# spring - @Controller 类中的 Spring @Value 注释未评估属性文件中的值

> ID：11890544
> 
> 赞同：58
> 
> 时间：2012-08-09T19:24:57.137
> 
> 标签：spring, properties

我是 Spring 的新手，并尝试使用带有`@Value("${loginpage.message}")`注释的控制器内部的注释来注入带有值的字符串，`@Controller`并且我的字符串的值被评估为字符串`"${loginpage.message}"`，而不是我的属性文件中的内容。

下面是我想要注入的带有字符串“消息”的控制器。

```
@Controller
public class LoginController extends BaseController {
    @Value("${loginpage.message}")
    private String message;

    @RequestMapping("/")
    public String goToLoginPage(Model model) {
        model.addAttribute("message", message);

        return "/login";
    }
} 
```

我的应用程序上下文如下所示：

```
<context:property-placeholder location="classpath:properties/application.properties" />

<context:annotation-config />

<context:component-scan base-package="com.me.application" /> 
```

我的属性文件有一行：

```
loginpage.message=this is a test message 
```

Spring 必须在某个时候获取该值，因为每当我更改`@Value("${loginpage.message}")`为不在属性文件中的值时`@Value("${notInPropertiesFile}")`，我都会遇到异常。

* * *

## 回答 #1

> 赞同：68
> 
> 时间：2012-08-09T20:24:43.580

似乎已经问过这个问题[Spring 3.0.5 不会从属性中评估 @Value 注释](https://stackoverflow.com/questions/5275724/spring-3-0-5-doesnt-evaluate-value-annotation-from-properties)

Web 应用程序根和 servlet 应用程序上下文之间的区别是 Spring 中最容易混淆的来源之一，请参阅 [Spring Framework 中 applicationContext.xml 和 spring-servlet.xml 之间的区别](https://stackoverflow.com/questions/3652090/difference-between-applicationcontext-and-spring-servlet-xml-in-spring)

从`@Value`javadoc ：

> 请注意，@Value 注释的实际处理是由 BeanPostProcessor 执行的

来自[Spring 文档：](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-extension)

> BeanPostProcessor 接口的范围是每个容器。这仅在您使用容器层次结构时才相关。如果您在一个容器中定义一个 BeanPostProcessor，它只会在该容器中的 bean 上工作。在一个容器中定义的 Bean 不会由另一个容器中的 BeanPostProcessor 进行后处理，即使两个容器是同一层次结构的一部分。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-04T09:58:53.100

是的，我在 Spring 3 中遇到了同样的问题。它似乎在控制器中不起作用。为了解决这个问题，我使用 @Service 创建了另一个 bean 并将其注入到控制器中。它确实对我有用。希望这对我花了一整天时间弄清楚的人有所帮助。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-01T16:05:56.907

你可以`@Autowire Environment`然后`environment.getProperty("name")`。见[https://stackoverflow.com/a/15562319/632293](https://stackoverflow.com/a/15562319/632293)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-10-16T14:22:40.597

如果您使用 @Value 注释，则需要使用 PropertySourcePlaceHolder，因为它可以从属性文件中提取值。如果您使用的是 java config base，则需要像这样创建一个 bean

```
@Bean
public static PropertySourcesPlaceholderConfigurer propertyConfigInDev() {
    return new PropertySourcesPlaceholderConfigurer();
} 
```

或者，如果您使用基于 xml，则相应地声明 bean。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-24T10:23:43.377

我在我的春季项目中遇到了类似的问题，但特别是春季 BATCH 一个。我最初构建了我的配置，如下所示

```
@Configuration
public class BatchConfig   
{
  @Bean
  public Job job(@Autowired Step stepMulti, @Autowired Step stepMultiDiff,  @Autowired Step stepMultiPolling
        ){

    Job job = jobBuilders.get("job")
                .start(init0())
                    .on("POLLING").to(stepMultiPolling)
                .from(init0()).on("*").to(stepMulti).next(stepMultiDiff).end()
                .build();
    return job;
  }

  @Bean
  public Step init0(){
    return stepBuilders.get("init0")
            .tasklet(new MyDecider())
            .build();
  }

  ...
} 
```

MyDecider 如下所示

```
public class MyDecider implements StepExecutionListener , Tasklet{ 

  @Autowired ThreadPoolTaskScheduler taskScheduler;
  @Value("${read.chunk.size}") private Integer pagesize;

@Override
public RepeatStatus execute(StepContribution stepContribution, ChunkContext chunkContext) throws Exception {
    return RepeatStatus.FINISHED;
}

@Override
public ExitStatus afterStep(StepExecution exe) {
    String type = exe.getJobParameters().getString("mode");

    log.info("SPRING BATCH props:");
    log.info("    READ chunk size:  {}", pagesize);

    if (StringUtils.equals(type, "send")) {
        log.info("MODE batch SENDING...");

        if (taskScheduler !=null) taskScheduler.shutdown();
        else log.info("      Not able to stop scheduler (is null)");

        return new ExitStatus("SEND");
    } else  {
        log.info("MODE batch POLLING...");
        return new ExitStatus("POLLING");
    } 

} 
```

但是这样既没有连接 taskScheduler 也没有注入 pagesize ；两者都为空。感谢鲍里斯的回答，经过一番尝试，我将 BatchConfig 更改为以下完美工作

```
...

@Bean
public Step init0(){
    return stepBuilders.get("init0")
            .tasklet(decider())
            .build();
}

@Bean
public Tasklet decider() {
    return new MyDecider();
}

... 
```

原因：让 MyDecider 构造更接近 BatchConfig 中的 Bean 注释（ decisionr *()*之一），让 spring 明白必须正确注入 MyDecider，在 application.property 值中找到值，并与使用的 TaskScheduler 连接（因为我试过也有 SpringScheduler 激活，但如果 jar 启动选项是“发送”，我想关闭它）。

注意：使用选项 mode="send" 春季批处理作业采用 stepMulti 而不是 stepMultiPolling，因为 MyDecider 退出状态是 SEND 而不是 POLLING；但这只是这个主题的解释，所以我跳过更多细节。

希望这个春季批次案例可以对某人有所帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-17T19:34:19.490

我很抱歉问这个显而易见的问题，但是你怎么知道 @Value 注释不起作用？Spring 工作方式的问题之一是 Bean 的预处理是在构建 Bean 之后进行的。

因此，如果您使用调试器在构造函数中检查 Bean，您将看不到正在设置的字段。您可以在 Bean 中添加一个名为 audit() 的方法，并使用 @PostConstruct 对其进行注释，如果您在其中放置日志语句，在其上放置断点，您应该会看到带有 @Value 值的字段。

如果你这样做了，但你仍然看不到你的 @Value 字段，那么你甚至可能没有扫描过 Bean。你认为实现 Bean 的类仍然是一个 Java 类，它可以被实例化，并且如果它没有被预处理，它的字段将被分配为空。

为了确保您的 Bean 正在被扫描，这些类应该至少具有 @Component，并且您需要将类的包添加到 @ComponentScan。

```
@ComponentScan(basePackages = { "com.example.springboot", "org.bilbo.baggins" }) 
```

如果您没有 main() 方法的源代码，通常可以在其中找到 @ComponentScan，那么您可以在同一个包中添加一个 @Configuration 类，并在其中添加一个 @ComponentScan。

在此示例中，我将 @ComponentScan 作为注释掉的行放在错误的位置（它应该替换 @ImportResources）。

```
package com.example.springboot;

import org.springframework.context.annotation.Configuration;
import org.springframework.context.annotation.ImportResource;

// @ComponentScan(basePackages = { "com.example.springboot", "org.bilbo.baggins" })
@Configuration
@ImportResource({"classpath*:applicationContext.xml"})
public class Configurer {
} 
```

我这样做是为了展示如何使用 XML 文件：applicationContext.xml。这包含一个组件扫描并创建一个 Bean。

（注意：声明只扫描一个包，component-scan 似乎是累积的。）

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/sc
hema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/
beans/spring-beans.xsd http://www.springframework.org/schema/context http://www.springframework.org/schema
/context/spring-context.xsd">

    <context:annotation-config />

    <context:component-scan base-package="org.bilbo.baggins" />
          <bean id="applicationProperties"
                      class="org.springframework.context.support.PropertySourcesPlaceholderConfigurer">
                    <property name="location" value="classpath:application.properties" />
          </bean>
</beans> 
```

在 XML 文件中构建一个 bean 很有用，这样您就可以列出它并证明您已经加载了 XML 文件。您可以使用该方法列出 bean`String[] beanNames = ctx.getBeanDefinitionNames();`

# c# - 无法识别的属性“targetFramework”。请注意，属性名称区分大小写

> ID：11890565
> 
> 赞同：7
> 
> 时间：2012-08-09T19:26:29.403
> 
> 标签：c#, asp.net, .net, iis, razor

我刚刚将一个网站上传到我的服务器。而且在本地也能完美运行，但是我上传后，在线版本显示如下：

```
配置错误描述：运行过程中发生错误
处理服务此请求所需的配置文件。
请查看下面的具体错误详细信息并修改您的
适当的配置文件。

 解析器错误消息：无法识别的属性“targetFramework”。笔记
该属性名称区分大小写。

源错误：

第 37 行：</buildProviders>
第 38 行：</编译>
第 39 行：<httpRuntime targetFramework="4.0"
encoderType="System.Web.Security.AntiXss.AntiXssEncoder, System.Web,
版本=4.0.0.0，文化=中性，PublicKeyToken=b03f5f7f11d50a3a" />
第 40 行：<machineKey compatibilityMode="Framework45" />
第 41 行：</system.web>

 源文件：D:\HostingSpaces\o\o.com.au\wwwroot\web.config 行：
39

-------------------------------------------------- ------------------------------
版本信息：Microsoft .NET Framework 版本：4.0.30319；
ASP.NET 版本：4.0.30319.272

```

根据此站点上的其他答案，这是因为服务器上的帐户设置为使用 .NET Framework 2.0。但我的情况并非如此，我确保它设置为 4.0，我什至尝试了 4.0 集成。但它仍然显示此错误。

这可能是什么原因造成的？我该如何解决？

![在此处输入图像描述](../Images/b06f3485826a40df26aecca3854f08de.png)

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-22T00:02:50.333

该应用程序正在尝试使用 ASP.NET 4.5 的新功能（特别是`<httpRuntime>`和`<machineKey>`元素），但服务器只有 ASP.NET 4.0。从 Web.config 中删除`<httpRuntime>`和`<machineKey>`元素以解决问题。

（有趣的事实：该`<httpRuntime/targetFramework>`属性直到 4.5 才存在。所以即使值显示为“4.0”，服务器仍然失败，因为它根本不希望看到这个属性*。*）

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-01-14T21:57:37.323

可以通过转到 IIS，单击应用程序池并将版本设置为 4.0（集成）（运行站点的版本）来解决此问题。接受的答案说 HttpRunTime/targetFrameWork> 直到 4.5 才存在。这是不正确的。作为参考，这是[HttpRuntime V2 Doc](http://msdn.microsoft.com/en-us/library/e1f13641%28v=vs.80%29.aspx)。[TargetFrameWork](http://msdn.microsoft.com/en-us/library/system.configuration.configuration.targetframework%28v=vs.100%29.aspx)是版本 4 的新内容。

OP 问题中的问题是，他将站点的 .NET 版本设置为 4，但在远程服务器上，2.0 正在运行，因此出现错误。在这种情况下，由于他无法控制远程服务器（假设），将 .NET 版本在本地更改为 2.0 将解决问题，而无需摆弄 web.config。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-11-27T06:52:11.917

我认为您在 IIS 中的应用程序池设置不正确，您必须将您的应用程序池设置为 ASP.NET v4.0。

希望这有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-12T19:36:57.143

就我而言，这个解决方案与我的服务器上没有 ASP.NET 4 无关。我的服务器位于负载平衡器上，网站文件位于分布式文件系统上。我需要使用有效的用户名和密码连接到 DFS。完成此操作后，我不再看到错误。但是，如果您遇到此问题，请先检查其他解决方案。我会说，如果您看到此错误，那么十有八九会出现 NET Framework 不在服务器上或未为应用程序池指定的情况。

# jquery - 响应式 jquery 图像缩放器

> ID：11890575
> 
> 赞同：0
> 
> 时间：2012-08-09T19:26:53.147
> 
> 标签：jquery, responsive-design

我已经为基于最大宽度的图像重新大小制作了以下代码，使用`.height()`. 问题仍然是我找不到一个好的响应式图像大小调整插件或类似的东西可以在我们调整浏览器大小时重新调整图像大小。是否可以在我的代码或任何人都知道的任何新的响应式插件中实现任何东西，以在调整浏览器大小时自动调整图像大小加上默认值`max-width`和`height`？

我的最大宽度调整代码

```
// SET MIN AND MAX SIZE OF IMAGES
if (lboxitem.find('.tp-mainimage').width() > opt.maxWidth) {
    var oldimgw = lboxitem.find('.tp-mainimage').width();
    var oldimgh = lboxitem.find('.tp-mainimage').height();
    var perc = opt.maxWidth / oldimgw;
    lboxitem.find('.tp-mainimage').width(opt.maxWidth);
    lboxitem.find('.tp-mainimage').height(oldimgh*perc);
}

if (lboxitem.find('.tp-mainimage').width() < opt.minWidth) {
    var oldimgw = lboxitem.find('.tp-mainimage').width();
    var oldimgh = lboxitem.find('.tp-mainimage').height();
    var perc = opt.minWidth / oldimgw;
    lboxitem.find('.tp-mainimage').width(opt.minWidth);
    lboxitem.find('.tp-mainimage').height(oldimgh*perc);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T19:30:13.637

使用`.resize()`（[jQuery 文档](http://api.jquery.com/resize/)）

[**jsFiddle 演示**](http://jsfiddle.net/AuJ5B/1/)

```
$(window).resize(function () {
    var _width = $(window).width(),
        _height = $(window).height();

    // call your function() to make changes to its allowed maxes
});​ 
```

你甚至可能不需要 Javascript 来满足你的需要……想想你可以用 CSS 做你需要的事情。

`img { width:100%; height:auto; min-width:300px; }`

# objective-c - 使用 AVAudioPlayer 框架完成播放后，如何再次播放相同的声音？

> ID：11890576
> 
> 赞同：1
> 
> 时间：2012-08-09T19:26:52.580
> 
> 标签：objective-c, ios, avaudioplayer

我希望我的声音文件随后播放三遍。但是，它只播放一次。我猜当`[crashSound play]`第二次调用时，声音还没有完成播放，所以任何后续调用都会丢失。我该如何解决。即，我怎样才能使相同的文件在完成当前播放后再次播放？

```
@interface Game()
{
    // code...

    AVAudioPlayer *crashSound;

    // code...
}
@end

@implementation Game

- (id) init 
{ 
    // code...

    NSBundle *bundle = [NSBundle mainBundle];
    NSURL *crashSoundFile = [bundle URLForResource: @"crashSound" withExtension: @"wav"];
    crashSound = [[AVAudioPlayer alloc] initWithContentsOfURL:crashSoundFile error:NULL];

    // code...
}
-(void) play // this is my "main" method that will be called once the playButton is pressed
{
   [crashSound play];[crashSound play];[crashSound play];

}
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:41:47.143

我找到了一个解决方案，所以在这里我一个人回答我自己的问题，以防有人遇到同样的问题。:)

通过`crashSound.numberOfLoops = 3;`在 crashSound 初始化下添加 crashSound 将播放 3 次。

通过`crashSound.numberOfLoops = -1;`在 crashSound 初始化下添加， crashSound 将无限期地播放，直到`[crashSound stop]`调用该方法。

[https://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html](https://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html)

# c# - 初始化优先级 - const vs readonly vs static readonly

> ID：11890579
> 
> 赞同：6
> 
> 时间：2012-08-09T19:27:05.983
> 
> 标签：c#, .net

## 示例 1

```
private const string _DefaultIconPath = _IconsPath + "default.ico";
private const string _IconsPath = "Icons/"; 
```

这些字符串在运行时的值：

*   _DefaultIconPath：“图标/default.ico”
*   _IconsPath: "图标/"

* * *

## 示例 2

```
private readonly string _DefaultIconPath = _IconsPath + "default.ico";
private readonly string _IconsPath = "Icons/"; 
```

编译时错误：

```
A field initializer cannot reference the non-static field, method, or property '_IconsPath' 
```

* * *

## 示例 3

```
private static readonly string _DefaultIconPath = _IconsPath + "default.ico";
private static readonly string _IconsPath = "Icons/"; 
```

这些字符串在运行时的值：

*   _DefaultIconPath：“default.ico”（_IconsPath 评估为`null`）
*   _IconsPath: "图标/"

* * *

## 问题

为什么编译器不会在示例 3 中抛出类似于示例 2 的编译错误？

声明的顺序在字段定义的情况下很重要`static readonly`，但在字段定义的情况下不重要`const`。

编辑：

我理解为什么将字符串初始化为这些特定值。我不明白为什么示例 2 会引发编译错误，强制初始化发生在构造函数中，而不是在变量的声明中（这很有意义），但示例 3 的行为方式不同。抛出相同的编译错误强制在静态构造函数中进行初始化是否有意义？

* * *

## 另一个例子

```
private static string test = test2;
private static string test2 = test; 
```

这个例子演示了我要解释的内容。编译器可以强制在静态构造函数中初始化静态状态（就像实例变量一样）。为什么编译器允许它（或者为什么编译器不允许实例变量这样做）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:38:28.320

示例 3 使用`static`变量，因此是允许的。

示例 2 失败，因为 C# 不允许变量初始化程序引用正在创建的实例。请参阅 Jon Skeet[在此处](https://stackoverflow.com/questions/7400677/a-field-initializer-cannot-reference-the-non-static-field-method-or-property)的解释。

你可以这样做：

```
public class YourClass {
  private readonly string _IconsPath;
  private readonly string _DefaultIconsPath;

  public YourClass() {
    _IconsPath = "Icons/";
    _DefaultIconPath = _IconsPath + "default.ico";
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:01:00.090

在示例 2 中，“_IconsPath”未初始化，无法使用。

在示例 3 中，您正在访问一个静态字段（如您所知）。MSDN 说的很好`A static method, field, property, or event is callable on a class even when no instance of the class has been created.`

看 [这里](http://msdn.microsoft.com/en-us/library/79b3xss3%28v=vs.80%29.aspx)

更新：示例 3：与以下内容相同：

```
private static readonly string _DefaultIconPath = MyStaticClass._IconsPath + "default.ico";
private static readonly string _IconsPath = "Icons/"; 
```

关键是您没有使用字段（亲爱的未初始化，您正在使用（“其他”/“新”）静态类（在以静态方式使用它之前不必创建它） .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T19:34:15.650

有两个不相关的问题。

**1.编译错误**

静态成员不需要类的实例来获取值。这就是为什么从静态成员引用静态成员不会导致问题的原因。

`this`初始化实例成员时，尝试初始化成员时不能引用，除非您从构造函数中这样做。

因为您没有将字段标记为`Example 2`as `static`，所以在引用这些成员之前，您必须首先实例化包含它们的任何对象的实例。

仅仅因为他们是`readonly`并不意味着他们是`static`。只读字段可以在它们的声明或类的构造函数中实例化，但它们不会在类的所有实例之间共享，也不能在没有适当实例化的情况下访问（假设它们没有显式地制作为`static`like `Example 3`）。

**2.空值**

原因`_IconsPath`是 null in`Example 3`是因为字段是按顺序声明和实例化的。颠倒顺序，您会看到它不再为空。

# c# - 如何打印通用对象的属性

> ID：11890580
> 
> 赞同：1
> 
> 时间：2012-08-09T19:27:08.803
> 
> 标签：c#, generics

我是 C# 初学者，正在尝试一段新代码。以下代码未正确打印值：

```
namespace systemTypes
{
    class Program
    {
        static void Main(string[] args)
        {
             CommonData<string>name = new CommonData<string>();
             name.Value = "abcd";
             CommonData<float>version = new CommonData<float>();
             version.Value = 2.0F;
             Console.WriteLine(
                 "generic object storing string val : {0}",
                 name.Value);
             Console.WriteLine(
                 "generic object storing float val : {0}",
                 version.Value);
         }
    }

    public class CommonData<T>
    {
        private T _data;
        public T Value
        {
            get
            {
                return this._data;
            }
            set
            {
                this._data = value;
            }
        }
    }
} 
```

它将字符串值打印为空白，将 int 值打印为零到控制台。我需要实现一个默认构造函数吗？我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:32:02.810

编译器会告诉你这是错误的：

```
CommonData<int>version = new CommonData<float>(); 
```

编译器说：

> 错误 1 ​​无法将类型“systemTypes.CommonData”隐式转换为“systemTypes.CommonData”some.cs 10 39 someproject

目前它**没有编译**，所以你正在运行一些可能硬编码为零的旧版本。您没有运行您显示的代码。

*工作*代码将是：

```
CommonData<float>version = new CommonData<float>(); 
```

但是，有时**说得太多**是自找麻烦；`var`第一次会很好用：

```
var name = new CommonData<string>();
name.Value = "abcd";
var version = new CommonData<float>();
version.Value = 2.0F;
Console.WriteLine("generic object storing string val : {0}", name.Value);
Console.WriteLine("generic object storing float val : {0}", version.Value); 
```

在这里，`var`仅表示“编译器：您可以看到右边的内容 - 请您为我找出变量类型”。这并不意味着“变体”或“动态”或类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T19:35:13.313

这是一个编译时错误。您正在声明泛型类型，但使用 更正行进行`'int'`实例化是`'float'`

```
CommonData<float> version = new CommonData<float>(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T19:33:32.927

因为您在此行有编译错误：

```
CommonData<int>version = new CommonData<float>(); 
```

具体来说：

> 错误 CS0029：无法将类型隐式转换`Test.CommonData<float>`为`Test.CommonData<int>`
> 
> 错误 CS0031：常量值`2`无法转换为`int`

您可能正在运行较旧的二进制文件。修复编译错误，看看你的问题是否会消失。

要解决这个问题：

1.  确保您的类型参数匹配。选择`int`或`float`。`var`或者使用左侧的关键字声明变量：`var version = new CommonData<float>();`

2.  将与您在步骤 1 中选择的类型匹配的文字分配给`Value`属性。如果您选择`int`，请使用`2`. 如果您选择`float`，请使用`2.0f`.

# openerp - 从按钮或菜单打开特定对象

> ID：11890584
> 
> 赞同：4
> 
> 时间：2012-08-09T19:27:32.313
> 
> 标签：openerp

按下菜单项或按钮时如何打开特定对象？如果您想要对类似配置的对象进行排序（只需要一个对象来保存数据，例如用户名和密码），这将非常有用。

我尝试过使用`view_init`方法和`active_id`上下文键，但没有运气。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-21T13:39:40.730

我有一个类似的问题，并找到了一个解决方案：在您的`ir.actions.act_window`定义中（在 XML 中），尝试`res_id`使用您要显示的记录的 id 添加字段。如果这是 id 计算出来的，或许可以使用同一个字段的“eval”属性来获取。

例如 ：

```
<field name="res_id">5</field> 
```

或者（我不知道它是否有效）

```
<field name="res_id" eval="your_func_getting_res_id"/> 
```

当然对于第二种方法，不要忘记定义你的函数。

当我想`ir.actions.act_window`在按钮调用的方法中返回一个时，它对我有用（在python中定义的方法，所以我很容易得到我想要的id）。

希望它可以帮助您或其他人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T08:04:08.327

首先，您必须为您的模型创建视图（树、表单、搜索等）。然后为模型创建动作，例如

```
<record model="ir.actions.act_window" id="my_unique_action_id">
    <field name="name">Name for the Action</field>
    <field name="res_model">your_model_name</field>
    <field name="view_type">form</field>
    <field name="view_mode">tree,form</field>
    <field name="domain">here_provide_your_domain_conditon_as list_of_tuples</field>
    <field name="context">here_provide_your_context_as_a_dictionary</field>
</record> 
```

然后创建一个带有 action= 你的操作 id 的菜单。例如

```
<menuitem action="my_unique_action_id" id="my_unique_menu_id" parent="your parent_menu_id"/> 
```

如果父菜单在另一个模块中，则提供`parent=the_other_module_name.parent_menu_id`

注意：我所说的 unique_action_id_name 和 unique_menu_id_name 是因为 id 在该模块中应该是唯一的。相同的操作 ID 可以在不同的模块中。

# java - 是否可以从 ImmutableMultimap.keys() 中删除方括号

> ID：11890585
> 
> 赞同：1
> 
> 时间：2012-08-09T19:27:34.533
> 
> 标签：java, guava

在执行以下操作时：

```
ImmutableMultimap<Something, Something> map;
//Say I insert "Hello", "5" to the map
System.out.println(map.keys().toString()); 
```

所以`[Hello]`当我这样做时

```
if(map.keys().toString().equals("Hello")) 
```

它总是失败。我不想做

```
if(map.keys().toString.equals("[Hello]") 
```

有没有办法在没有方括号的情况下显示结果？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-09T19:45:16.480

您永远不应该将`toString()`其用于任何严重的事情！此方法适用于检查正在发生的事情（例如在调试器中）的人员，仅用于其他目的。

此外，其中没有括号。`map.keys()`是一个集合，它的`toString()`方法就像集合一样工作。您最好通过测试`map.keys.size() == 1`然后检查唯一元素来替换您的测试。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-09T19:45:08.983

```
map.keys().toString().replaceAll("[\\[\\],]","") 
```

返回字符串，删除所有方括号和逗号

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T22:28:37.230

如果您像在测试中那样检查相等性，那么您实际上应该这样做：

```
System.out.println(ImmutableMultiSet.of("Hello").equals(map.keys())) 
```

由于 ImmutableMultiSet 具有 .equals 的正确实现，因此应该处理除 map 为空之外的所有可能情况。

* * *

如果您想要一个包含其中所有元素的字符串，请改用 Joiner：

```
System.out.println(Joiner.on(",").join(map.keys())) 
```

在 Joiner 上有更多的选项可以用于格式化集合的各种方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T19:38:24.677

您可以替换字符串中的括号，或者您可以遍历键集并单独打印每个组件。

```
 ImmutableMultiset<Something> keys = map.keys();
 for(Something key : keys){
    System.out.print(key);
 } 
```

对于您想要的条件

```
if(map.keys().contains("Hello")) 
```

# sql - 如果 count(values) > 1，将所有值合并到一个单元格中

> ID：11890590
> 
> 赞同：5
> 
> 时间：2012-08-09T19:28:17.763
> 
> 标签：sql, sql-server, sql-server-2008, tsql, ssms

> **可能重复：**
> [SQL Server：我可以用逗号将多行分隔为一列吗？](https://stackoverflow.com/questions/2046037/sql-server-can-i-comma-delimit-multiple-rows-into-one-column)

如果记录的计数大于 1，我想将某个字段中的所有记录合并到一个单元格中（每个值来自另一列）。例如，如果我有以下代码

```
SELECT city, count(zoo name) AS 'count of zoo name' FROM mytable 
```

它将产生以下结果

![在此处输入图像描述](../Images/3a8007b54d541b2eb3da160d97852fb5.png)

原来的表是这样的

![在此处输入图像描述](../Images/4a3dde31afc741c9738e068f5730d264.png)

由于亚特兰大和纽约都有不止一个动物园，而东京只有一个动物园，最终结果应该是这样的

![在此处输入图像描述](../Images/e6d2e4fe15864f20bc88ee0f2b7d205a.png)

我该怎么做呢？我考虑过使用 PIVOT 构造，但这会为每个可能的值创建新列。我还必须将每个可能的动物园名称的名称写入 PIVOT。这将是一种不好的形式，因为实际数据中“动物园名称”的可能值比上面的要多得多。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:41:36.427

您可以使用 XML Path 来连接列值

```
;With Cte(city,concat) as
(
    select city, (select a.Zoo+','
    from Sample a
    where a.city=b.city
    for XML PATH ('') )  concat
    from Sample b
    group by city
 )
Select city,left(concat, len(concat) -1) from cte 
```

[在SQL Fiddle](http://sqlfiddle.com/#!3/0eced/9)中检查结果

# javascript - 是否可以添加 或在一个 标签？

> ID：11890597
> 
> 赞同：35
> 
> 时间：2012-08-09T19:28:40.867
> 
> 标签：javascript, jquery, html

如何`<div>`在`<span>`标签内添加`<option>`标签？

我希望该行`<option>`当然它具有一个值和所有内容，但是我需要在该选项中的文本旁边放置一个红色圆圈，这可能吗？

代码如：

```
<option value="1">text<div style='background:none repeat scroll 0 0 green;height:25px;width:25px;'></div></option>
<option value="2">text<div style='background:none repeat scroll 0 0 green;height:25px;width:25px;'></div></option>
<option value="3">text<div style='background:none repeat scroll 0 0 green;height:25px;width:25px;'></div></option>
<option value="4">text<div style='background:none repeat scroll 0 0 green;height:25px;width:25px;'></div></option> 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-09T19:33:16.323

# 2019 更新

# 此解决方案不再起作用。

签入最新的 Chrome、Firefox 和 Safari。

* * *

可以在文本后面加上一个红色圆圈 - [http://jsfiddle.net/V8cvQ/](http://jsfiddle.net/V8cvQ/)

```
option:after {
    content: " ";
    height: 5px;
    width: 5px;
    background: #c00;
    border-radius: 5px;
    display: inline-block;
} 
```

...

**更新**

有不同颜色的点

**HTML**

```
<select>
    <option> select </option>
    <option class="red"> one </option>
    <option class="green"> two </option>
    <option class="blue"> three </option>
</select> 
```

**CSS**

```
option:after {
    content: " ";
    height: 5px;
    width: 5px;
    border-radius: 5px;
    display: inline-block;
}

option.red:after { background: #c00; }
option.green:after { background: #0c0; }
option.blue:after { background: #00c; } 
```

[**演示**](http://jsfiddle.net/V8cvQ/1/)

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-08-09T19:30:16.577

不，根据[MDN](https://developer.mozilla.org/en-US/docs/HTML/Element/option)，这是允许的：

> 允许的内容：带有最终转义字符的文本（如`&eacute;`）

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-09T19:30:07.040

不，不可能。或者至少无效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T19:33:02.403

不。要实现这一点，您可以尝试以下操作：使用 div 显示所选项目，并在其中放置一个 div 或一个按钮，就像下拉按钮一样。单击按钮时，它会显示另一个包含所有选项的 div。

有点复杂，所以没有必要仅仅为了让它看起来漂亮就达到这个效果

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-30T11:49:18.960

您可以使用此自定义选择输入来执行此操作

参考：[https ://www.w3schools.com/howto/tryit.asp?filename=tryhow_custom_select](https://www.w3schools.com/howto/tryit.asp?filename=tryhow_custom_select)

```
var x, i, j, selElmnt, a, b, c;
x = document.getElementsByClassName("custom-select");
for (i = 0; i < x.length; i++) {
  selElmnt = x[i].getElementsByTagName("select")[0];
  a = document.createElement("DIV");
  a.setAttribute("class", "select-selected");
  a.innerHTML = selElmnt.options[selElmnt.selectedIndex].innerHTML;
  a2 = document.createElement("SPAN");
  a2.setAttribute("class", "square-box");
  a2.setAttribute("style", "background-color: " + selElmnt.options[selElmnt.selectedIndex].getAttribute("COLOR"));
  a.appendChild(a2);
  x[i].appendChild(a);
  b = document.createElement("DIV");
  b.setAttribute("class", "select-items select-hide");
  for (j = 0; j < selElmnt.length; j++) {
    c = document.createElement("DIV");
    c.innerHTML = selElmnt.options[j].innerHTML;
    d = document.createElement("SPAN");
    d.setAttribute("class", "square-box");
    d.setAttribute("style", "background-color: " + selElmnt.options[j].getAttribute("COLOR"));
    c.appendChild(d);
    c.addEventListener("click", function(e) {
      var y, i, k, s, h;
      s = this.parentNode.parentNode.getElementsByTagName("select")[0];
      h = this.parentNode.previousSibling;
      for (i = 0; i < s.length; i++) {
        if (s.options[i].innerText == this.innerText) {
          s.selectedIndex = i;
          h.innerHTML = this.innerHTML;
          y = this.parentNode.getElementsByClassName("same-as-selected");
          for (k = 0; k < y.length; k++) {
            y[k].removeAttribute("class");
          }
          this.setAttribute("class", "same-as-selected");
          break;
        }
      }
      h.click();
    });
    b.appendChild(c);
  }
  x[i].appendChild(b);
  a.addEventListener("click", function(e) {
    e.stopPropagation();
    closeAllSelect(this);
    this.nextSibling.classList.toggle("select-hide");
    this.classList.toggle("select-arrow-active");
  });
}

function closeAllSelect(elmnt) {
  var x, y, i, arrNo = [];
  x = document.getElementsByClassName("select-items");
  y = document.getElementsByClassName("select-selected");
  for (i = 0; i < y.length; i++) {
    if (elmnt == y[i]) {
      arrNo.push(i)
    } else {
      y[i].classList.remove("select-arrow-active");
    }
  }
  for (i = 0; i < x.length; i++) {
    if (arrNo.indexOf(i)) {
      x[i].classList.add("select-hide");
    }
  }
}
document.addEventListener("click", closeAllSelect);
```

```
.custom-select {
  position: relative;
  font-family: Arial;
}

.custom-select select {
  display: none;
}

.select-selected {
  background-color: DodgerBlue;
}

.select-selected:after {
  position: absolute;
  content: "";
  top: 14px;
  right: 10px;
  width: 0;
  height: 0;
  border: 6px solid transparent;
  border-color: #fff transparent transparent transparent;
}

.select-selected.select-arrow-active:after {
  border-color: transparent transparent #fff transparent;
  top: 7px;
}

.select-items div,
.select-selected {
  color: #ffffff;
  padding: 8px 16px;
  border: 1px solid transparent;
  border-color: transparent transparent rgba(0, 0, 0, 0.1) transparent;
  cursor: pointer;
  user-select: none;
}

.select-items {
  position: absolute;
  background-color: DodgerBlue;
  top: 100%;
  left: 0;
  right: 0;
  z-index: 99;
}

.select-hide {
  display: none;
}

.select-items div:hover,
.same-as-selected {
  background-color: rgba(0, 0, 0, 0.1);
}

.select-items .square-box {
  height: 18px;
  width: 18px;
  float: right;
}

.select-selected .square-box {
  height: 18px;
  width: 18px;
  right: 30px;
  position: absolute;
}
```

```
<div class="custom-select" style="width:200px;">
  <select>
    <option value="1" color="red">Audi</option>
    <option value="2" color="green" selected>BMW</option>
    <option value="3" color="yellow">Citroen</option>
    <option value="4">Ford</option>
    <option value="5">Honda</option>
    <option value="6">Jaguar</option>
    <option value="7">Land Rover</option>
    <option value="8">Mercedes</option>
    <option value="9">Mini</option>
    <option value="10">Nissan</option>
    <option value="11">Toyota</option>
    <option value="12">Volvo</option>
  </select>
</div>
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2015-04-08T06:28:09.053

您可以用 JS 插件替换您的选项：

HTML：

```
<h3>multiSelect = false</h3>
<div id="combo1" class="combo"></div><br>
&nbsp;&nbsp;<button id="get1">get1</button>&nbsp;
<button id="set1">set1</button> 
```

JS：

```
$(function(){
var dd = [];
for(var i=1;i<=4; i++)
    dd.push({ code: i + '', name: 'Employee ' + i });
var cfg = {
    keyField: 'code',
    displayField: 'name',
    multiSelect: false,
    width: 200,
    boxWidth: 200,
    cols : [{
        field: 'code', width: '30%'
    },{
        field: 'name', width: '70%'
    }],
    data: dd
};
var cfg1 = $.extend({}, cfg);
var cb1 = $('#combo1').mac('combo', cfg1);
$('#get1').click(function(){
    alert(cb1.selected);
});
$('#set1').click(function(){
    cb1.select(2);
}); 
```

});

不要忘记从 jsfiddle 复制外部资源：这是一个小提琴

[http://jsfiddle.net/arslantabassum/p5s4jzez/](http://jsfiddle.net/arslantabassum/p5s4jzez/)

```
1\. copy html
2\. copy javascript
3\. copy external sources 
```

# sql - Postgresql 批量插入或忽略

> ID：11890599
> 
> 赞同：5
> 
> 时间：2012-08-09T19:28:58.413
> 
> 标签：sql, postgresql, plpgsql, postgresql-9.1, duplicate-removal

我有责任将我们的代码从 sqlite 切换到 postgres。下面复制了我遇到的问题之一。

```
INSERT INTO group_phones(group_id, phone_name)
SELECT g.id, p.name 
FROM phones AS p, groups as g
WHERE g.id IN ($add_groups) AND p.name IN ($phones); 
```

当有重复记录时，就会出现问题。在此表中，两个值的组合必须是唯一的。我在其他地方使用了一些 plpgsql 函数来执行更新或插入操作，但在这种情况下，我可以一次执行多个插入操作。我不确定如何为此编写存储例程。感谢所有 sql 专家提供的所有帮助！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-09T21:10:15.597

有**3个**挑战。

1.  您的查询在表和之间没有**`JOIN`条件**，这实际上是有限的- 您很可能不打算这样做。即每部符合条件的电话都与符合条件的每个组相结合。如果您有 100 部电话和 100 个组，则已经有 10,000 个组合。`phones``groups``CROSS JOIN`

2.  插入**不同**的组合`(group_id, phone_name)`

3.  避免插入table中**已经存在**`group_phones`的行。

所有事情都认为它可能看起来像这样：

```
INSERT INTO group_phones(group_id, phone_name)
SELECT i.id, i.name
FROM  (
    SELECT **DISTINCT** g.id, p.name -- get distinct combinations
    FROM   phones p
    JOIN   groups g ON **??how are p & g connected??**
    WHERE  g.id IN ($add_groups)
    AND    p.name IN ($phones)
    ) i
**LEFT   JOIN** group_phones gp ON (gp.group_id, gp.phone_name) = (i.id, i.name)
**WHERE  gp.group_id IS NULL**  -- avoid duping existing rows 
```

### 并发

这种形式最大限度地减少了并发写操作出现竞争条件的机会。*如果*您的表有 **大量并发写入**负载，您可能希望[独占锁定表](http://www.postgresql.org/docs/current/interactive/explicit-locking.html#LOCKING-TABLES)或使用[可序列化事务隔离](http://www.postgresql.org/docs/current/interactive/applevel-consistency.html#SERIALIZABLE-CONSISTENCY)，这可以防止在约束验证（行不存在）和查询中的写操作。

```
BEGIN ISOLATION LEVEL SERIALIZABLE;
INSERT ...
COMMIT; 
```

如果它因序列化错误而回滚，请准备好重复该事务。有关该主题的更多信息，好的起点可能是[@depesz 的这篇博客文章](http://www.depesz.com/2012/06/10/why-is-upsert-so-complicated/)或[关于 SO 的相关问题](https://stackoverflow.com/q/11532550/939860)。

但是，通常情况下，您甚至不必为此烦恼。

### 表现

```
LEFT JOIN tbl ON right_col = left_col WHERE right_col IS NULL 
```

通常是右表中具有不同列的最快方法。如果您在列中有欺骗（特别是如果有很多），

```
WHERE NOT EXISTS (SELECT 1 FROM tbl WHERE right_col = left_col) 
```

可能会更快，因为它可以在找到第一行后立即停止扫描。

您也可以使用`IN`，就像 @dezso 演示的那样，但在 PostgreSQL 中它通常较慢。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T21:09:16.937

尝试以下操作：

```
INSERT INTO group_phones(group_id, phone_name)
SELECT DISTINCT g.id, p.name 
FROM phones AS p, groups as g
WHERE 
    g.id IN ($add_groups) 
    AND p.name IN ($phones)
    AND (g.id, p.name) NOT IN (
        SELECT group_id, phone_name
        FROM group_phones
    )
; 
```

`DISTINCT`您可以确保将插入唯一的行，并使用该子句`NOT IN`排除已经存在的行。

**注意**虽然这个解决方案可能更容易理解，但在大多数情况下，Erwin 的性能会更好。

# r - 时区，周期。使用 R 在 xts 中应用

> ID：11890600
> 
> 赞同：2
> 
> 时间：2012-08-09T19:29:00.877
> 
> 标签：r, timezone, apply, xts, posixct

`xts`我在GMT 时区的对象中有一堆 1 分钟的数据。我打电话

```
period.apply (obj, endpoints(obj, "hours")) 
```

并且由于某种原因，我的新对象的时区更改为 EST/EDT，但是，当我这样做时，`str(obj)`它仍然说时区是 GMT。这是一个例子：

```
obj1 <- xts(1:200, order.by=index(ret_1_min_xts)[1:200])
head(obj1)
                    [,1]
1986-02-04 14:32:00    1
1986-02-04 14:33:00    2
1986-02-04 14:34:00    3
1986-02-04 14:35:00    4
1986-02-04 14:36:00    5
1986-02-04 14:37:00    6
Warning message:
   timezone of object (GMT) is different than current timezone (). 
```

现在做`period.apply`

```
obj2 <- period.apply(obj1, endpoints(obj1, "hours"), mean)
head(obj2)
                     [,1]
1986-02-04 09:59:00  12.5
1986-02-04 10:59:00  51.0
1986-02-04 11:59:00 103.5
1986-02-04 12:59:00 154.0
1986-02-04 13:26:00 189.5

str(obj1)
An â€˜xtsâ€™ object from 1986-02-04 14:32:00 to 1986-02-04 18:26:00 containing:
   Data: int [1:200, 1] 1 2 3 4 5 6 7 8 9 10 ...
   Indexed by objects of class: [POSIXct,POSIXt] TZ: GMT
   xts Attributes:  
   List of 2
    $ tclass: chr [1:2] "POSIXct" "POSIXt"
    $ tzone : chr "GMT"

str(obj2)
An â€˜xtsâ€™ object from 1986-02-04 09:59:00 to 1986-02-04 13:26:00 containing:
   Data: num [1:5, 1] 12.5 51 103.5 154 189.5
   Indexed by objects of class: [POSIXct,POSIXt] TZ: 
   xts Attributes:  
   List of 2
    $ tclass: chr [1:2] "POSIXct" "POSIXt"
    $ tzone : chr "GMT" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T19:35:19.533

这是大线索

```
Warning message:
  timezone of object (GMT) is different than current timezone () 
```

它显示在您系统的时区中。您可以像这样设置系统的时区

```
Sys.setenv(TZ="GMT") 
```

然后，您`xts`将使用 GMT 时区打印。

# perl - 使用 SOAP 和 Perl 连接到 ivona.com 服务

> ID：11890602
> 
> 赞同：0
> 
> 时间：2012-08-09T19:29:11.173
> 
> 标签：perl, soap

几天来，我尝试使用 SOAP 连接到 TTS Ivona (ivona.com) 服务。

下面是运行良好的 PHP 示例：

```
function txtSpeechToFile($txt, $path) {
    $soapURL    = "http://www.ivona.com/saasapiwsdl.php";
    $user       = "some@email.com";
    $pwd        = 'pass';

    $soap       = new SoapClient($soapURL);
    $token      = $soap->__soapCall('getToken', array('email' => $user));

    print gettype($token);

    $speechFile = $soap->__soapCall('createSpeechFile', array(
            'token'         => $token,
            'md5'           => md5(md5($pwd).$token),
            'text'          => $txt,
            'contentType'   => 'text/plain',
            'voiceId'       => 'gb_amy',
            'codecId'       => 'mp3/22050'
        )
    );

    $xx = file_get_contents($speechFile['soundUrl']);

    file_put_contents($path, $xx);
} 
```

我正在尝试像这样在 Perl 中运行它：

```
use SOAP::Lite;
my $soap = SOAP::Lite->readable(1)->uri($urlPHP)->proxy($soapURL);
my $token = $soap->getToken({('email'=>$user)});
my $speechFile = $soap->createSpeechFile(
    {
        (
            'token'         => '$token',
            'md5'           => md5(md5($pwd) . '$token'),        
            'text'          => $input,      
            'contentType'   => 'text/plain',
            'voiceId'       => 'gb_amy',
            'codecId'       => 'mp3/22050'
        )
    }
);
print $speechFile; 
```

我认为`$token`与PHP的不同`$token`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:25:59.173

1.  Perl 默认没有`md5()`。[您必须从Digest::MD5](http://perldoc.perl.org/Digest/MD5.html)中提取它：

    ```
    use Digest::MD5 qw/ md5 md5_hex /; 
    ```

    稍后使用`md5()`or `md5_hex()`; 我相信你会需要后者。

2.  我不确定你需要传递给什么`$soap->createSpeechFile()`，但如果它是哈希引用（相当于 PHP 中的关联数组），我会删除额外的括号级别。

    或者更好的是，提前定义选项：

    ```
    my $opts = {            # $opts will hold a hash reference
        token       => $token,
        md5         => md5(md5($pwd) . $token),
        text        => $input,
        contentType => 'text/plain',
        voiceId     => 'gb_amy',
        codecId     => 'mp3/22050'
    };
    $soap->createSpeechFile($opts); 
    ```

    相同的原因`$soap->getToken()`。

    注意糖：你不必在 构造的左侧使用*任何引用，***如果**它只有一个单词 ( )。`x => "y"`**`[_1-9a-zA-Z]+`**

***   我猜你不想传递字符串`$token`（我的意思是字面美元后跟单词令牌），而是传递变量的*内容*`$token`。在 Perl 中，单引号不会插入变量，因此您可能需要使用双引号；但是在 Perl 中编写没有意义`"$a"`，您始终可以使用未引用的`$a`.

    这在前面的示例中已经修复。**

# c# - 页面中只能添加一个 ScriptManager 实例

> ID：11890604
> 
> 赞同：0
> 
> 时间：2012-08-09T19:29:17.560
> 
> 标签：c#, asp.net, ajaxcontroltoolkit

我在母版页中有一个脚本管理器。现在我想在我的子页面中添加一个 TextBox 日历扩展器。当我将 ToolscriptManager 添加到子页面时，它会显示一个错误：

> “只能将 ScriptManager 的一个实例添加到页面中。”

我可以将日历扩展器添加到此页面吗？我正在使用 AjaxControlToolkit3.5。谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:33:45.480

永远只能有一个真正的 ScriptManager。如果您的母版页上有一个 ScriptManager，那么在您的页面中您将使用[`ScriptManagerProxy`](http://msdn.microsoft.com/en-us/library/system.web.ui.scriptmanagerproxy.aspx). 这将充当您母版页上真实 ScriptManager 的代理。它在大多数情况下提供与 ScriptManager 相同的功能，并且您可以以相同的方式使用它。

# c# - db4o 查询耗时过长

> ID：11890606
> 
> 赞同：0
> 
> 时间：2012-08-09T19:29:28.770
> 
> 标签：c#, indexing, db4o

我有一个`original`和一个`premium`存储库，我尝试向两者添加索引：

```
 public void SetupIndices()
    {
        original.Ext().Configure().ObjectClass(typeof(LineItem)).ObjectField("idField").Indexed(true);
        original.Ext().Configure().Add(new UniqueFieldValueConstraint(typeof(LineItem), "idField"));
        original.Ext().Configure().ObjectClass(typeof(LineItem)).ObjectField("nameField").Indexed(true);
        original.Ext().Configure().Add(new UniqueFieldValueConstraint(typeof(LineItem), "nameField"));
        original.Ext().Configure().ObjectClass(typeof(Order)).ObjectField("idField").Indexed(true);
        original.Ext().Configure().Add(new UniqueFieldValueConstraint(typeof(Order), "idField"));
        original.Ext().Configure().ObjectClass(typeof(Order)).ObjectField("nameField").Indexed(true);
        original.Ext().Configure().Add(new UniqueFieldValueConstraint(typeof(Order), "nameField"));
        original.Ext().Configure().ObjectClass(typeof(Creative)).ObjectField("idField").Indexed(true);
        original.Ext().Configure().Add(new UniqueFieldValueConstraint(typeof(Creative), "idField"));
        original.Ext().Configure().ObjectClass(typeof(Creative)).ObjectField("nameField").Indexed(true);
        original.Ext().Configure().Add(new UniqueFieldValueConstraint(typeof(Creative), "nameField"));
        original.Ext().Configure().ObjectClass(typeof(Company)).ObjectField("idField").Indexed(true);
        original.Ext().Configure().Add(new UniqueFieldValueConstraint(typeof(Company), "idField"));
        original.Ext().Configure().ObjectClass(typeof(Company)).ObjectField("nameField").Indexed(true);
        original.Ext().Configure().Add(new UniqueFieldValueConstraint(typeof(Company), "nameField"));
        original.Ext().Configure().ObjectClass(typeof(LineItemCreativeAssociation)).ObjectField("lineItemIdField").Indexed(true);
        original.Ext().Configure().ObjectClass(typeof(LineItemCreativeAssociation)).ObjectField("creativeIdField").Indexed(true);

        original.Commit();

        premium.Ext().Configure().ObjectClass(typeof(LineItem)).ObjectField("idField").Indexed(true);
        premium.Ext().Configure().Add(new UniqueFieldValueConstraint(typeof(LineItem), "idField"));
        premium.Ext().Configure().ObjectClass(typeof(LineItem)).ObjectField("nameField").Indexed(true);
        premium.Ext().Configure().Add(new UniqueFieldValueConstraint(typeof(LineItem), "nameField"));
        premium.Ext().Configure().ObjectClass(typeof(Order)).ObjectField("idField").Indexed(true);
        premium.Ext().Configure().Add(new UniqueFieldValueConstraint(typeof(Order), "idField"));
        premium.Ext().Configure().ObjectClass(typeof(Order)).ObjectField("nameField").Indexed(true);
        premium.Ext().Configure().Add(new UniqueFieldValueConstraint(typeof(Order), "nameField"));
        premium.Ext().Configure().ObjectClass(typeof(Creative)).ObjectField("idField").Indexed(true);
        premium.Ext().Configure().Add(new UniqueFieldValueConstraint(typeof(Creative), "idField"));
        premium.Ext().Configure().ObjectClass(typeof(Creative)).ObjectField("nameField").Indexed(true);
        premium.Ext().Configure().Add(new UniqueFieldValueConstraint(typeof(Creative), "nameField"));
        premium.Ext().Configure().ObjectClass(typeof(Company)).ObjectField("idField").Indexed(true);
        premium.Ext().Configure().Add(new UniqueFieldValueConstraint(typeof(Company), "idField"));
        premium.Ext().Configure().ObjectClass(typeof(Company)).ObjectField("nameField").Indexed(true);
        premium.Ext().Configure().Add(new UniqueFieldValueConstraint(typeof(Company), "nameField"));
        premium.Ext().Configure().ObjectClass(typeof(LineItemCreativeAssociation)).ObjectField("lineItemIdField").Indexed(true);
        premium.Ext().Configure().ObjectClass(typeof(LineItemCreativeAssociation)).ObjectField("creativeIdField").Indexed(true);

        premium.Commit();

    } 
```

问题是，这个查询需要很长时间，而且应该只有几百到几千个结果。所有对象存储都不应包含超过 40K 的项目。我究竟做错了什么？

```
 var creatives = from Creative c in original.Query<Creative>()
                        join Company co in original.Query<Company>()
                            on c.advertiserId equals co.id
                        join LineItemCreativeAssociation lica in original.Query<LineItemCreativeAssociation>()
                            on c.id equals lica.creativeId
                        join LineItem li in original.Query<LineItem>()
                            on lica.lineItemId equals li.id
                        join LineItem newLI in premium.Query<LineItem>()
                            on li.name equals newLI.name
                        join Company newCO in premium.Query<Company>()
                            on co.name equals newCO.name
                        from Creative newC in premium.Query<Creative>()
                            .Where(o=>o.name == c.name).DefaultIfEmpty()
                        where newC == null
                        select new { creative = c, newCompany = newCO }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T20:59:11.580

有关您的代码的一些问题/问题可以解释速度缓慢：

1.  看起来您正在尝试在打开的数据库上配置索引。这不起作用（[检查此页面](http://community.versant.com/documentation/reference/db4o-7.12/java/reference/Content/tuning/indexing.htm)）。

2.  在您的查询中，您调用 original.Query() ，这会导致 db4o 返回 X 类型的所有对象（以及子类型），然后 LINQ for Objects 快速进入。您不应该以这种方式使用查询方法 db4o LINQ 实现将被使用相反（这应该更快）。

我对 2 的猜测是，您这样做是为了能够使用连接（因为 db4o LINQ 实现不支持它）。为了使用 db4o LINQ 实现，恐怕您需要尝试将查询拆分为多个简单查询并加入每个查询的结果。

希望这可以帮助。

# android - 来自 Django/Python 应用程序的智能手机警报

> ID：11890609
> 
> 赞同：3
> 
> 时间：2012-08-09T19:29:37.047
> 
> 标签：android, iphone, python, django, smartphone

我正在做一个项目，我将使用 Django 构建一个 Web 应用程序，直接在他们的智能手机上向我的注册用户发送警报。

例如，假设用户订阅了时事通讯，我希望他的手机在收到时事通讯时按照他配置的方式进行操作（例如，响铃或摇晃）。然后他可以打开他的智能手机来阅读时事通讯。阅读后，会提示用户一个问题，以了解他是否要发表评论。如果他单击“是”，他的浏览器将在“时事通讯”页面打开，他可以在其中发表评论。如果他单击“否”，它只会关闭时事通讯，直到有新邮件进来。

有没有办法从带有 Django/Python 的 Web 应用程序中做到这一点？

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T19:39:23.093

There are four ways to handle this:

1.  Write your own custom native app for the phone. Your native iPhone app can receive push notifications from your Django app via [the push notification API](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194-CH1-SW1). You native Android app can receive notifications from your Django app via [the cloud-to-device messaging (C2DM) framework](https://developers.google.com/android/c2dm/).

2.  Write your own web app (HTML + JavaScript) for the phone, using a wrapper app that handles push notifications/C2DM. [Adobe PhoneGap](http://phonegap.com/) is one such wrapper app; there are probably others.

3.  Send a message via an existing service, such as Twitter or Email, for which the user already has an app.

4.  Use a service like [Pushover](https://pushover.net/), which has their own native app that is intended for notifications from web applications such as yours.

# google-apps-script - 如何使用 SpreadsheetApp.openById() 将电子表格中的最后一张工作表设置为活动工作表？

> ID：11890612
> 
> 赞同：1
> 
> 时间：2012-08-09T19:29:53.450
> 
> 标签：google-apps-script, google-sheets

如何将电子表格中的最后一张工作表设置为活动工作表？此代码不起作用。不知道我做错了什么......

```
 var logbook = SpreadsheetApp.openById("my key code");

    var totalSheets = logbook.getNumSheets();
    var lastSheet = logbook.getSheets[totalSheets];
    var currentSheet = logbook.setActiveSheet(lastSheet); 
```

我收到一个错误：

> 找不到方法 setActiveSheet

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T19:37:01.310

试试这样吧：

```
var logbook = SpreadsheetApp.openById("my key code");
var totalSheets = logbook.getNumSheets();
var lastSheet = logbook.getSheets()[totalSheets-1];// !! () and -1 because if 3 sheets, last sheet is [2]
var lastSheetName = lastSheet.getName();
var currentSheet = SpreadsheetApp.setActiveSheet(lastSheet); 
```

也就是说，访问单个工作表似乎很复杂......我通常所做的只是：

```
var ss = SpreadsheetApp.openById(key);// ss for spreadsheet
var sh = ss.getSheetByName('Sheet1');// sh for sheet 
```

这在很多示例代码中都是非常标准的......

# sql-server - 一次更新sql server xml数据字段上的多个属性

> ID：11890614
> 
> 赞同：4
> 
> 时间：2012-08-09T19:29:56.327
> 
> 标签：sql-server, xml

是否可以在一个更新中修改单个节点上的多个属性？

我有类似的东西：

```
<ENTITY NAME="entity1">
    <ATTR ID="attr1" CAPTION="Attributes to Change" SIZE="100" WIDTH="100"></ATTR>
</ENTITY> 
```

我已经能够使用三个单独的更新来修改 CAPTION、SIZE 和 WIDTH 属性，但是我徒劳地寻找某种方法将它们组合成一个更新。是否可以？

我使用的更新示例：

```
UPDATE    t
SET       [column_name].modify('replace value of (/ENTITY/ATTR/@CAPTION)[1] with "New Attribute Caption"')
FROM      table t

UPDATE    t
SET       [column_name].modify('replace value of (/ENTITY/ATTR/@SIZE)[1] with "200"')
FROM      table t

UPDATE    t
SET       [column_name].modify('replace value of (/ENTITY/ATTR/@WIDTH)[1] with "200"')
FROM      table t 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T19:47:11.820

不，这是不可能的。

从[(XML DML) 的替换值](http://msdn.microsoft.com/en-us/library/ms190675)。

> **Expression1**
> 标识要更新其值的节点。它必须只标识一个节点。也就是说，Expression1 必须是静态单例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T15:13:43.397

您确实有几个选择，但可能不会比您的三个更新好多少。选项是 1) 重建 XML 或 2) 创建映射表。

XML 上的 DML 操作代价高昂，因此在重构 XML 时有一个临界点*可能*会更有效 - 取决于 XML 的大小、要替换的属性数量等

映射表解决方案使用循环，因此类似于三更新解决方案。但是，您确实具有使其成为数据驱动的优势。

无论如何，看看这个演示，让我知道你的进展情况：

```
USE tempdb
GO
SET NOCOUNT ON

DECLARE @t TABLE ( yourXML XML )

INSERT INTO @t ( yourXML )
SELECT '<ENTITY NAME="entity1"> 
    <ATTR ID="attr1" CAPTION="Attributes to Change" SIZE="100" WIDTH="100"></ATTR> 
</ENTITY>'

SELECT 'before' s, * FROM @t

------------------------------------------------------------------------------------------------
-- Reconstruct the inner xml START
------------------------------------------------------------------------------------------------

-- Delete current element and attributes
UPDATE @t 
SET yourXML.modify('delete ENTITY[@NAME="entity1"]/ATTR' )

DECLARE @xml XML = '', @caption VARCHAR(100), @size INT, @width INT

SELECT @caption = 'New Attribute Caption', @size = 200, @width = 300

-- Construct new element with attributes
SET @xml = @xml.query ( '<ATTR ID="attr1" CAPTION="{sql:variable("@caption")}" SIZE="{sql:variable("@size")}" WIDTH="{sql:variable("@width")}"></ATTR> ' )

-- Insert it back in
UPDATE t 
SET yourXML.modify('insert sql:variable("@xml") into (ENTITY[@NAME="entity1"])[1] ')
FROM @t t

SELECT 'after' s, * FROM @t

-- Reconstruct the inner xml END
------------------------------------------------------------------------------------------------

------------------------------------------------------------------------------------------------
-- Create mapping table and loop START
------------------------------------------------------------------------------------------------

DECLARE @i INT = 0
DECLARE @map TABLE ( attributeName VARCHAR(50) PRIMARY KEY, newValue VARCHAR(50) NOT NULL )

INSERT INTO @map ( attributeName, newValue ) VALUES ( 'CAPTION', 'New Attribute Caption 3' )  
INSERT INTO @map ( attributeName, newValue ) VALUES ( 'SIZE', 123 ) 
INSERT INTO @map ( attributeName, newValue ) VALUES ( 'WIDTH', 456 ) 

SELECT 'before 2' s, * FROM @t

WHILE 1=1
BEGIN

    SET @i += 1

    -- Update the XML based on the mapping table
    UPDATE @t 
    SET yourXML.modify('replace value of (/ENTITY/ATTR/@*[local-name()= sql:column("attributeName")])[1] with sql:column("newValue")')
    FROM @t
        CROSS JOIN @map m 
    WHERE yourXML.exist('(/ENTITY/ATTR/@*[local-name()= sql:column("attributeName")][. != sql:column("newValue")])') = 1

    IF @@rowcount = 0 BREAK

    -- Guard against infinite loop
    IF @i > 99 BEGIN RAISERROR( 'Too many loops! %i', 16, 1, @i ) BREAK END

END

SELECT @i loops
SELECT 'after' s, * FROM @t

-- Create mapping table and loop END
------------------------------------------------------------------------------------------------ 
```

# .net - 正则表达式自定义词边界.Net

> ID：11890615
> 
> 赞同：1
> 
> 时间：2012-08-09T19:30:04.783
> 
> 标签：.net, regex

我正在尝试匹配以下类型的字符串：

123456

1234.56

123,456

1,234.56

.123456

我想确保这些字符串不匹配：

12,34.56

1.23,456

到目前为止，这是我想出的（在此论坛上一篇文章的帮助下）：

```
(?<acreage>((\d{1,3}(,\d{3})+)?|\d*)\.\d+|(\d{1,3}(,\d{3})+|\d+)\.?) 
```

这匹配所有有效字符串，但它也匹配部分无效字符串。

我想要的是在开始时放置某种边界条件，但它不能是 ^ 字符，因为在我试图匹配的面积之前可能有文本。\b 字符将逗号视为单词边界，因此对于如下字符串，

12,34,567.89

当我真的希望它无法匹配字符串的任何部分时，它将返回 34,567.89。

我将在 acreage 字符串之后检查特定字符，所以我不太担心它会做一些愚蠢的事情，比如从 123,4567 得到 123,456 和 7。

有人可以帮我让它只匹配有效字符串而不匹配任何无效字符串吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:27:07.370

这够了吗？

```
(?<![\d.,])(?<acreage>((\d{1,3}(,\d{3})+)?|\d*)\.\d+|(\d{1,3}(,\d{3})+|\d+)\.?)(?![\d.,]) 
```

我在您的表达式中添加了一个否定的[lookbehind](http://www.regular-expressions.info/lookaround.html) `(?<![\d.,])`和一个否定的[lookahead](http://www.regular-expressions.info/lookaround.html) `(?![\d.,])`断言。

`(?<![\d.,])`确保没有数字，no`.`和 no `,`before

`(?![\d.,])`确保没有数字，没有`.`和没有`,`跟随

[在 Regexr 上](http://regexr.com?31ps4)查看

那将是您的个人号码边界，检查您的号码周围是否有号码中不允许的字符。

# java - java - 如何用Java String中的单个双引号替换两个双引号？

> ID：11890617
> 
> 赞同：4
> 
> 时间：2012-08-09T19:30:05.480
> 
> 标签：java

我正在阅读一个 CSV 文件并有一些值，例如

```
field 1   field 2           field 3
1        test case1         expecting one, and \"two\", and three 
```

在将文件读入`StringBuilder`并转换后，`toString()`我将文件内容拆分为：`string.split(",(?=([^\"]*\"[^\"]*\")*[^\"]*$)");`.

在迭代字符串时，我得到这些值： -

```
1
test case1
expecting one, and ""two"", and three 
```

我怎样才能用像这样“两个”的单双引号替换两个双引号

这是我的代码：-

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;

public class csvStringParser {

    /**
     * @param args
     * @throws IOException 
     */
    public static void main(String[] args) throws IOException {
        // TODO Auto-generated method stub

          String path = "E:/spc.csv";

            String read = readFile(path);
            System.out.println("content of the file before \" = \n"  +read);

//      System.out.println("content of the file after= \n"  +read);

        String[] tokens = read.split(",(?=([^\"]*\"[^\"]*\")*[^\"]*$)");
            for(int i = 0;i<tokens.length;i++) {
                String abc = tokens[i].replace("\"\"", "\"");

           //   if(abc.length()>2){
                if(abc.startsWith("\"") && abc.endsWith("\"")){ 
                abc = abc.substring(1, abc.length()-1);
                }
            //  } 

                System.out.println("> "+abc);
            }

    }

    public static String readFile( String file ) throws IOException {
        BufferedReader reader = new BufferedReader( new FileReader (file));
        String         line = null;
        StringBuilder  stringBuilder = new StringBuilder();
        String         ls = System.getProperty("line.separator");

        while( ( line = reader.readLine() ) != null ) {
            stringBuilder.append( line );
            stringBuilder.append( ls );
        }

        return stringBuilder.toString();
    }

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T19:32:12.967

使用[`String#replace(CharSequence, CharSequence)`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#replace%28java.lang.CharSequence,%20java.lang.CharSequence%29).

```
String input = "this string \"\"has\"\" double quotes";
String output = input.replace("\"\"", "\""); 
```

[http://ideone.com/xPQqL](http://ideone.com/xPQqL)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-16T12:58:14.527

```
String[] tokens = read.split(",(?=([^\"]*\"[^\"]*\")*[^\"]*$)");
for(int i = 0;i<tokens.length;i++)
    tokens[i]=StringEscapeUtils.unescapeCsv(tokens[i]); 
```

# php - php。日期。更改格式

> ID：11890626
> 
> 赞同：1
> 
> 时间：2012-08-09T19:30:50.523
> 
> 标签：php, date, datetime, timestamp, type-conversion

如何更改日期，例如，

2012-08-03 到时间戳 1344024896 使用 PHP？

反过来呢？

```
$date='2012-08-03'
$stampDate=? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T19:31:57.853

时间戳：

```
$date='2012-08-03';
$stampDate=strtotime($date); 
```

逆转：

```
$date = date('Y-m-d', $stampDate); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T19:32:41.537

具有两个功能：

```
strtotime($date); 
```

和

```
date('Y-m-d', $stampDate); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T19:31:53.747

只需用于`strtotime`从日期字符串中获取时间戳（它将与 一起使用`Y-m-d`）。 `date('Y-m-d', $timestamp)`是相反的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T19:35:25.583

```
$dt = new DateTime('2012-08-03');
$stampDate = $dt->getTimestamp(); 
```

你甚至可以转换时区

```
$dt->setTimezone(new DateTimeZone('Europe/Moscow')); 
```

并格式化日期：

```
echo $dt->format('d.m.Y'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T19:32:23.417

您可以使用[strtotime](http://php.net/manual/en/function.strtotime.php)（时间）
，如：

```
$timestamp = strtotime('2012/12/12'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-09T19:33:28.883

鉴于问题中的变量：

```
$timestamp = strtotime($date);
$date = date("Y-m-d", $timestamp); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-12T01:57:42.260

如果你愿意，你可以从其他格式日期更改..

```
$date1='21 May 2015';
$newdate = date_format(date_create_from_format('d M Y', $date1),'Y-m-d'); 
echo $newdate; 
```

产量将**2015-5-21**

# javascript - Ext JS 的舍入问题

> ID：11890627
> 
> 赞同：1
> 
> 时间：2012-08-09T19:30:55.343
> 
> 标签：javascript, rounding

我需要将文本字段四舍五入到小数点后两位。这是我设置的带有警报消息的代码。我担心的是，当我添加第三个或更多数字时，就会出现问题。一个例子是 100 + 10.11 = 110.11,(result = ) 然后 110.11 + 10.11 = 120.22 但是，当我添加第三个数字 120.22 + 10.11 时，它等于 130.32999999999998，我希望它等于 130.33 在添加的第三个数字中疯狂的是“结果”字段等于 130.32999999999998

```
 tbar:  [{
        text: 'Add',
        tooltip:'Add the line item',
        handler : function(){
            var r = new iLineItemRec({
                i_line_item_name: '',
                i_line_item_amt: ''
            });
            iLineItemGrid.stopEditing();
            iLineItemStore.insert(0, r);
            iLineItemGrid.startEditing(0, 0);
            Ext.getCmp('mike').setDisabled(false);
        },
        //Should this be scope:this or scope:iLineItemGrid?
        scope:this
    },
    {
        text: 'Delete',
        tooltip:'Remove the selected line item',
        handler: function(){
            iLineItemGrid.stopEditing();
            var r = iLineItemGrid.getSelectionModel().getSelectedCell();
            iLineItemStore.removeAt(r[0]);
        },
        //Should this be scope:this or scope:iLineItemGrid?
        scope:this
    },

    {
        xtype: 'tbfill'
    },

    {
       id: 'mike',
       text: 'Submit',
        tooltip:'Submit the line item',
        //new
        //disabled: true,
        handler: function(){
            iLineItemGrid.stopEditing();
            // Will this code save changes to the database?
            //iLineItemGrid.getStore().commitChanges();
            iLineItemStore.commitChanges();

            var iAmountTotalForLineItems = 0;
            var iAmountInDueField = Ext.getCmp('iAmountDue').value;
            var tempTotal = 0;
            var result = 0;
            iLineItemStore.each(function(addAmount){
                iAmountTotalForLineItems += addAmount.get('i_line_item_amt');

            });

            alert('1 iAmountInDueField: ' + iAmountInDueField +' iLineItemTotalHold: '+iLineItemTotalHold + ' iAmountTotalForLineItems: '+ iAmountTotalForLineItems);
            if (iLineItemTotalHold > iAmountTotalForLineItems  ){
                alert ('if');
                tempTotal =  iLineItemTotalHold - iAmountTotalForLineItems;
                result = iAmountInDueField - tempTotal;
                alert('two: '+result+' = '+iAmountInDueField+' - '+tempTotal );

            }

            else if (iLineItemTotalHold < iAmountTotalForLineItems  ){
                alert ('if2');
                tempTotal = iAmountTotalForLineItems - iLineItemTotalHold;
                result = iAmountInDueField + tempTotal;
                alert('3: '+result+' = '+iAmountInDueField+' + '+tempTotal );
            }

            iLineItemTotalHold  =  iAmountTotalForLineItems;

            Ext.getCmp('iAmountDue').setValue(result);
            this.setDisabled(true);
        }
        //scope:this
    }

    ] 
```

var iLineItemTotalHold = 0;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:35:53.593

您可能会发现该`toFixed()`方法很有用。

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Number/toFixed)

从该页面：

```
var n = 12345.6789;
n.toFixed();              // Returns "12346": note rounding, no fractional part
n.toFixed(1);             // Returns "12345.7": note rounding
n.toFixed(6);             // Returns "12345.678900": note added zeros 
```

另请参阅[在 JavaScript 中格式化具有两个小数的数字](https://stackoverflow.com/questions/1726630/javascript-formatting-number-with-exactly-two-decimals)。

# objective-c - “指向非函数类型的块指针无效”

> ID：11890631
> 
> 赞同：16
> 
> 时间：2012-08-09T19:31:30.227
> 
> 标签：objective-c, encoding, objective-c-blocks

这里我有一个编码字符串的方法（它不完整），你会发现我的问题是一个错误：“指向非函数类型的块指针无效”

```
+ (NSString *)encodeString: (NSString *)string {
    __block int indexShift;
    __block NSString *dictionary = @"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";
    __block NSString *encodeDictionary = @"mahgbcjdfukripylswxovzetqnFMAJWGCQYXLOETPBKSVNIZUHDR";
    __block NSString *encodeString = @"";

    void (^encode) = ^{ // Error here, "Block pointer to non-function type is invalid"
        for (int x = 0; x < string.length; x++) {
            int index = [dictionary indexOf:[string characterAtIndex:x]];
            indexShift += index;
            encodeString = [encodeString stringByAppendingFormat:@"%c", [encodeDictionary characterAtIndex:index+indexShift]];
        }
    };

    return encodeString;
} 
```

请告诉我为什么会这样，或者我需要改变什么来解决它。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-09T19:42:57.690

这是声明内联块的不正确语法。一般形式如下：

```
ReturnType(^block_name)(parmeter, types, here) = ^(parameter, types, here) {

}; 
```

所以你正在寻找：

```
void(^encode)() = ^() {

}; 
```

# javascript - 在javascript中给定年份，星期数和天数，获取一周中的第一个日期

> ID：11890632
> 
> 赞同：1
> 
> 时间：2012-08-09T19:31:33.127
> 
> 标签：javascript

以下是计算星期日期的代码，

```
//Gets the week dayNumber date against the year,week number
var getWeekDate = function (year, weekNumber, dayNumber) {

var date = new Date(year, 0, 10, 0, 0, 0),
    day = new Date(year, 0, 4, 0, 0, 0),
    month = day.getTime() - date.getDay() * 86400000;
return new Date(month + ((weekNumber - 1) * 7 + dayNumber) * 86400000);
}; 
```

如果我给出以下值，代码工作正常，

**输入：**
year = 2012
weekNumber = 1
dayNumber = 0 //我的一周从星期一开始，所以我给它 0。

**输出：**
2012 年 1 月 2 日 //没错。

**输入：**
year = 2013
weekNumber = 1
dayNumber = 0 //我的一周从星期一开始，所以我给它 0。

**输出：**
2012 年 12 月 31 日 //这是不正确的。

2013 年的第一周将从 2013 年 1 月 7 日即星期一开始，但上面的代码计算不正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:38:10.613

我建议查看[moment.js](http://momentjs.com/docs/)的[ISO 日历插件](https://github.com/fusionbox/moment-isocalendar)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T20:03:27.293

这实际上是准确的，因为 2013 年第 1 周的第 0 天（星期一）仍然是 2012 年的一部分。您可以使用条件来检查所请求的那一周中的一天是否是一年中的一部分。

```
//Gets the week dayNumber date against the year,week number
var getWeekDate = function (year, weekNumber, dayNumber) {

var date = new Date(year, 0, 10, 0, 0, 0),
    day = new Date(year, 0, 4, 0, 0, 0),
    month = day.getTime() - date.getDay() * 86400000,
    ans = new Date(month + ((weekNumber - 1) * 7 + dayNumber) * 86400000);
if (weekNumber === 1 && ans.getMonth() !== 0) {
    // We're still in last year... handle appropriately
}
return ans;
}; 
```

顺便说一句，进行一些变量检查并不是一个坏主意。我可以毫无问题地输入第 0 周、第 55 周和第 92 天。显然，结果仍然是准确的，但它们可能会给那些考虑日历的人带来令人困惑的结果。

# objective-c - 为什么我的整个视图都在动画，而不仅仅是我的 UIImage 视图

> ID：11890637
> 
> 赞同：0
> 
> 时间：2012-08-09T19:31:43.543
> 
> 标签：objective-c, ios, xcode, uiimageview

我通过在我的整个视图 alpha 集 0.5 上覆盖 UIImage 然后在其上覆盖另一个 UIImage 来在情节提要中制作自定义警报，最初设置为隐藏。

`IBAction`然后将这些设置为`hidden = NO`

然后，我使用此处另一篇文章中的一些代码对此进行了动画处理，以模拟`AlertView`“反弹”。

.m 在 IBAction 下

```
tint.hidden = NO; <<tint image

storm.hidden = NO; << my image view

mybtn.hidden = NO; << button to dismiss the view

self.view.transform = CGAffineTransformScale(CGAffineTransformIdentity, 0.001, 0.001);
self.view.alpha = 1.0;
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:1.5];
[UIView setAnimationDelegate:self];
[UIView setAnimationDidStopSelector:@selector(bounce1AnimationStopped)];
self.view.transform = CGAffineTransformScale(CGAffineTransformIdentity, 1.1, 1.1);
[UIView commitAnimations];

[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:2];
[UIView setAnimationDelegate:self];
[UIView setAnimationDidStopSelector:@selector(bounce2AnimationStopped)];
self.view.transform = CGAffineTransformScale(CGAffineTransformIdentity, 0.9, 0.9);
[UIView commitAnimations];

[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.3];
self.view.transform = CGAffineTransformIdentity;
[UIView commitAnimations]; 
```

问题是整个视图动画和反弹，包括下面的视图控制器，我只希望 UIImage`storm`动画而不是整个屏幕。

到目前为止，我尝试更改`Self`为 my `UIImage`，也更改`UIView`为`UIImageview`

现在我没有想法了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:36:54.760

对象是`storm`什么？它是一个`UIImage`或`UIImageView`？

如果是`UIImageView`，那么只需交换所有行：

```
self.view.transform 
```

对此：

```
self.storm.transform 
```

也不要忘记 .alpha 设置，也将其更改为storm :)

这应该可以解决问题。

# qt - Qt：信号的返回值有效，为什么官方文档说它是不可能/禁止的？

> ID：11890644
> 
> 赞同：8
> 
> 时间：2012-08-09T19:32:08.943
> 
> 标签：qt, qt4, qt-signals

[Qt 文档](http://qt-project.org/doc/qt-4.8/signalsandslots.html)说，信号的返回值是不可能的：

> 信号由 moc 自动生成，不得在 .cpp 文件中实现。它们永远不能有返回类型（即使用 void）。

相关的SO问题：

1.  [Qt 信号可以返回一个值吗？](https://stackoverflow.com/questions/5842124/can-qt-signals-return-a-value)
2.  [Qt：槽返回值的含义？](https://stackoverflow.com/questions/112861/qt-meaning-of-slot-return-value)

但是，从我的试验（Qt 4.8.1）我可以看出返回值确实有效：

1.  如果信号/槽在同一个线程中，ConnectionType 可能是`Qt::AutoConnection`
2.  在不同线程中使用信号/插槽我需要使用 `Qt::BlockingQueuedConnection`

所以在我的代码中，我调用了一个信号

```
QString dp = emit WscAircrafts::signalAircraftsJsonArray(); 
```

并且信号 moc 返回 a `QString`，

```
QString _t0;
void *_a[] = { const_cast<void*>(reinterpret_cast<const void*>(&_t0)) };
QMetaObject::activate(this, &staticMetaObject, 0, _a);
return _t0; 
```

这是它传回的插槽 moc`QString`

```
case 4: { QString _r = _t->slotAircraftJsonArray();
  if (_a[0]) *reinterpret_cast< QString*>(_a[0]) = _r; }  break; 
```

所有这些似乎都非常简单，那么为什么会与文档相矛盾呢？使用返回值的问题在哪里？如前所述，在我的代码中这似乎有效。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-10T14:05:16.593

问题是在连接时没有检查返回类型的兼容性，因此将双返回槽连接到浮点返回信号，例如，将溢出分配给浮点的堆栈（没有双关语）空间。

# sql - SQL Server 2008 条件选择输出多个真值

> ID：11890647
> 
> 赞同：2
> 
> 时间：2012-08-09T19:32:13.517
> 
> 标签：sql, sql-server-2008

桌子：

```
Date = 20120101, ID = 123456, ParentID = 654321, System1 = 1, System2 = 1 
```

用户可以在 、 或两者中处于活动状态`System1`（`System2`1 = 真，0 = 假）。查询需要输出如下：

```
System1   System2
1         0            "System1", "All"
0         1            "System2", "All"
1         1            "System1", "System2", "All"
0         0            "All" 
```

我正在尝试一个案例陈述，但我无法让它输出我想要的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:35:51.577

```
select *,
         case when system1 = 1 and system2 = 0 then 'System1, All'
              when system1 = 1 and system2 = 1 then 'System1, System2, All'
              when system1 = 0 and system2 = 0 then 'All'
              when system1 = 0 and system2 = 1 then 'System2, All'
         end as output
from your_table 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T19:42:52.363

I'm getting the idea that you want to generate multiple rows for each row in your data.

If so, the following does this:

```
select a.*
from ((select t.*, 'ALL' as thecode
       from t
      ) union all
      (select t.*, 'System1'
       from t
       where system1 = 1
      ) union all
      (select t.*, 'System2'
       from t
       where system2 = 1
      )
     ) a 
```

# visual-studio - 无法运行应用程序的调试版本

> ID：11890650
> 
> 赞同：3
> 
> 时间：2012-08-09T19:32:23.310
> 
> 标签：visual-studio, visual-c++, visual-studio-debugging, winsxs

带有 Vista/Win7 更新的 Visual Studio 2005 SP1。PC 最初安装了 VS 2010，但由于团队的其他成员使用的是 2005，所以在罗马时...

最初，我安装了 2005 和更新并尝试构建/运行。构建运行良好，运行（在调试模式下）失败。所以我卸载了 VS 更新，删除了所有版本的 VS 和相关组件，并重新安装了带有 SP 和 Win7 更新的 VS2005。

在调试模式下运行相同的问题。我收到一个对话框，告诉我应用程序配置不正确。检查事件日志显示：

```
Activation context generation failed for "u:\ESM\ESM_Layer\debug\ESM_Win32_App.exe". Dependent Assembly Microsoft.VC80.DebugCRT,processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="8.0.50727.6195" could not be found. Please use sxstrace.exe for detailed diagnosis 
```

运行 sxstrace 给了我：

```
Begin Activation Context Generation.
Input Parameter:
    Flags = 0
    ProcessorArchitecture = Wow32
    CultureFallBacks = en-US;en
    ManifestPath = u:\ESM\ESM_Layer\debug\ESM_Win32_App.exe
    AssemblyDirectory = u:\ESM\ESM_Layer\debug\
    Application Config File = 
-----------------
INFO: Parsing Manifest File u:\ESM\ESM_Layer\debug\ESM_Win32_App.exe.
    INFO: Manifest Definition Identity is (null).
    INFO: Reference: Microsoft.VC80.DebugCRT,processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="8.0.50727.762"
    INFO: Reference: Microsoft.VC80.DebugCRT,processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="8.0.50608.0"
    INFO: Reference: Microsoft.VC80.DebugCRT,processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="8.0.50727.6195"
INFO: Resolving reference Microsoft.VC80.DebugCRT,processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="8.0.50727.762".
    INFO: Resolving reference for ProcessorArchitecture WOW64.
        INFO: Resolving reference for culture Neutral.
            INFO: Applying Binding Policy.
                INFO: No publisher policy found.
                INFO: No binding policy redirect found.
            INFO: Begin assembly probing.
                INFO: Did not find the assembly in WinSxS.
                INFO: Attempt to probe manifest at C:\Windows\assembly\GAC_32\Microsoft.VC80.DebugCRT\8.0.50727.762__1fc8b3b9a1e18e3b\Microsoft.VC80.DebugCRT.DLL.
                INFO: Did not find manifest for culture Neutral.
            INFO: End assembly probing.
    INFO: Resolving reference for ProcessorArchitecture x86.
        INFO: Resolving reference for culture Neutral.
            INFO: Applying Binding Policy.
                INFO: Find publisher policy at C:\Windows\WinSxS\manifests\x86_policy.8.0.microsoft.vc80.debugcrt_1fc8b3b9a1e18e3b_8.0.50727.762_none_6d78e2ee5a7eb616.manifest
                INFO: Publisher Policy redirected assembly version.
                INFO: Post policy assembly identity is Microsoft.VC80.DebugCRT,processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="8.0.50727.762".
            INFO: Begin assembly probing.
                INFO: Attempt to probe manifest at C:\Windows\WinSxS\manifests\x86_microsoft.vc80.debugcrt_1fc8b3b9a1e18e3b_8.0.50727.762_none_24c8a196583ff03b.manifest.
                INFO: Manifest found at C:\Windows\WinSxS\manifests\x86_microsoft.vc80.debugcrt_1fc8b3b9a1e18e3b_8.0.50727.762_none_24c8a196583ff03b.manifest.
            INFO: End assembly probing.
INFO: Resolving reference Microsoft.VC80.DebugCRT.mui,language="&#x2a;",processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="8.0.50727.762".
    INFO: Resolving reference for ProcessorArchitecture WOW64.
        INFO: Resolving reference for culture en-US.
            INFO: Applying Binding Policy.
                INFO: No publisher policy found.
                INFO: No binding policy redirect found.
            INFO: Begin assembly probing.
                INFO: Did not find the assembly in WinSxS.
                INFO: Attempt to probe manifest at C:\Windows\assembly\GAC_32\Microsoft.VC80.DebugCRT.mui\8.0.50727.762_en-US_1fc8b3b9a1e18e3b\Microsoft.VC80.DebugCRT.mui.DLL.
                INFO: Did not find manifest for culture en-US.
            INFO: End assembly probing.
        INFO: Resolving reference for culture en.
            INFO: Applying Binding Policy.
                INFO: No publisher policy found.
                INFO: No binding policy redirect found.
            INFO: Begin assembly probing.
                INFO: Did not find the assembly in WinSxS.
                INFO: Attempt to probe manifest at C:\Windows\assembly\GAC_32\Microsoft.VC80.DebugCRT.mui\8.0.50727.762_en_1fc8b3b9a1e18e3b\Microsoft.VC80.DebugCRT.mui.DLL.
                INFO: Did not find manifest for culture en.
            INFO: End assembly probing.
    INFO: Resolving reference for ProcessorArchitecture x86.
        INFO: Resolving reference for culture en-US.
            INFO: Applying Binding Policy.
                INFO: No publisher policy found.
                INFO: No binding policy redirect found.
            INFO: Begin assembly probing.
                INFO: Did not find the assembly in WinSxS.
                INFO: Attempt to probe manifest at C:\Windows\assembly\GAC_32\Microsoft.VC80.DebugCRT.mui\8.0.50727.762_en-US_1fc8b3b9a1e18e3b\Microsoft.VC80.DebugCRT.mui.DLL.
                INFO: Did not find manifest for culture en-US.
            INFO: End assembly probing.
        INFO: Resolving reference for culture en.
            INFO: Applying Binding Policy.
                INFO: No publisher policy found.
                INFO: No binding policy redirect found.
            INFO: Begin assembly probing.
                INFO: Did not find the assembly in WinSxS.
                INFO: Attempt to probe manifest at C:\Windows\assembly\GAC_32\Microsoft.VC80.DebugCRT.mui\8.0.50727.762_en_1fc8b3b9a1e18e3b\Microsoft.VC80.DebugCRT.mui.DLL.
                INFO: Did not find manifest for culture en.
            INFO: End assembly probing.
INFO: Resolving reference Microsoft.VC80.DebugCRT,processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="8.0.50608.0".
    INFO: Resolving reference for ProcessorArchitecture WOW64.
        INFO: Resolving reference for culture Neutral.
            INFO: Applying Binding Policy.
                INFO: No publisher policy found.
                INFO: No binding policy redirect found.
            INFO: Begin assembly probing.
                INFO: Did not find the assembly in WinSxS.
                INFO: Attempt to probe manifest at C:\Windows\assembly\GAC_32\Microsoft.VC80.DebugCRT\8.0.50608.0__1fc8b3b9a1e18e3b\Microsoft.VC80.DebugCRT.DLL.
                INFO: Did not find manifest for culture Neutral.
            INFO: End assembly probing.
    INFO: Resolving reference for ProcessorArchitecture x86.
        INFO: Resolving reference for culture Neutral.
            INFO: Applying Binding Policy.
                INFO: Publisher Policy redirected assembly version.
                INFO: Post policy assembly identity is Microsoft.VC80.DebugCRT,processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="8.0.50727.762".
            INFO: Begin assembly probing.
                INFO: Attempt to probe manifest at C:\Windows\WinSxS\manifests\x86_microsoft.vc80.debugcrt_1fc8b3b9a1e18e3b_8.0.50727.762_none_24c8a196583ff03b.manifest.
                INFO: Manifest found at C:\Windows\WinSxS\manifests\x86_microsoft.vc80.debugcrt_1fc8b3b9a1e18e3b_8.0.50727.762_none_24c8a196583ff03b.manifest.
            INFO: End assembly probing.
INFO: Resolving reference Microsoft.VC80.DebugCRT.mui,language="&#x2a;",processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="8.0.50727.762".
    INFO: Resolving reference for ProcessorArchitecture WOW64.
        INFO: Resolving reference for culture en-US.
            INFO: Applying Binding Policy.
                INFO: No publisher policy found.
                INFO: No binding policy redirect found.
            INFO: Begin assembly probing.
                INFO: Did not find the assembly in WinSxS.
                INFO: Attempt to probe manifest at C:\Windows\assembly\GAC_32\Microsoft.VC80.DebugCRT.mui\8.0.50727.762_en-US_1fc8b3b9a1e18e3b\Microsoft.VC80.DebugCRT.mui.DLL.
                INFO: Did not find manifest for culture en-US.
            INFO: End assembly probing.
        INFO: Resolving reference for culture en.
            INFO: Applying Binding Policy.
                INFO: No publisher policy found.
                INFO: No binding policy redirect found.
            INFO: Begin assembly probing.
                INFO: Did not find the assembly in WinSxS.
                INFO: Attempt to probe manifest at C:\Windows\assembly\GAC_32\Microsoft.VC80.DebugCRT.mui\8.0.50727.762_en_1fc8b3b9a1e18e3b\Microsoft.VC80.DebugCRT.mui.DLL.
                INFO: Did not find manifest for culture en.
            INFO: End assembly probing.
    INFO: Resolving reference for ProcessorArchitecture x86.
        INFO: Resolving reference for culture en-US.
            INFO: Applying Binding Policy.
                INFO: No publisher policy found.
                INFO: No binding policy redirect found.
            INFO: Begin assembly probing.
                INFO: Did not find the assembly in WinSxS.
                INFO: Attempt to probe manifest at C:\Windows\assembly\GAC_32\Microsoft.VC80.DebugCRT.mui\8.0.50727.762_en-US_1fc8b3b9a1e18e3b\Microsoft.VC80.DebugCRT.mui.DLL.
                INFO: Did not find manifest for culture en-US.
            INFO: End assembly probing.
        INFO: Resolving reference for culture en.
            INFO: Applying Binding Policy.
                INFO: No publisher policy found.
                INFO: No binding policy redirect found.
            INFO: Begin assembly probing.
                INFO: Did not find the assembly in WinSxS.
                INFO: Attempt to probe manifest at C:\Windows\assembly\GAC_32\Microsoft.VC80.DebugCRT.mui\8.0.50727.762_en_1fc8b3b9a1e18e3b\Microsoft.VC80.DebugCRT.mui.DLL.
                INFO: Did not find manifest for culture en.
            INFO: End assembly probing.
INFO: Resolving reference Microsoft.VC80.DebugCRT,processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="8.0.50727.6195".
    INFO: Resolving reference for ProcessorArchitecture WOW64.
        INFO: Resolving reference for culture Neutral.
            INFO: Applying Binding Policy.
                INFO: No publisher policy found.
                INFO: No binding policy redirect found.
            INFO: Begin assembly probing.
                INFO: Did not find the assembly in WinSxS.
                INFO: Attempt to probe manifest at C:\Windows\assembly\GAC_32\Microsoft.VC80.DebugCRT\8.0.50727.6195__1fc8b3b9a1e18e3b\Microsoft.VC80.DebugCRT.DLL.
                INFO: Did not find manifest for culture Neutral.
            INFO: End assembly probing.
    INFO: Resolving reference for ProcessorArchitecture x86.
        INFO: Resolving reference for culture Neutral.
            INFO: Applying Binding Policy.
                INFO: No binding policy redirect found.
            INFO: Begin assembly probing.
                INFO: Did not find the assembly in WinSxS.
                INFO: Attempt to probe manifest at C:\Windows\assembly\GAC_32\Microsoft.VC80.DebugCRT\8.0.50727.6195__1fc8b3b9a1e18e3b\Microsoft.VC80.DebugCRT.DLL.
                INFO: Attempt to probe manifest at u:\ESM\ESM_Layer\debug\Microsoft.VC80.DebugCRT.DLL.
                INFO: Attempt to probe manifest at u:\ESM\ESM_Layer\debug\Microsoft.VC80.DebugCRT.MANIFEST.
                INFO: Attempt to probe manifest at u:\ESM\ESM_Layer\debug\Microsoft.VC80.DebugCRT\Microsoft.VC80.DebugCRT.DLL.
                INFO: Attempt to probe manifest at u:\ESM\ESM_Layer\debug\Microsoft.VC80.DebugCRT\Microsoft.VC80.DebugCRT.MANIFEST.
                INFO: Did not find manifest for culture Neutral.
            INFO: End assembly probing.
    ERROR: Cannot resolve reference Microsoft.VC80.DebugCRT,processorArchitecture="x86",publicKeyToken="1fc8b3b9a1e18e3b",type="win32",version="8.0.50727.6195".
ERROR: Activation Context generation failed.
End Activation Context Generation. 
```

查看 C:\Program Files (x86)\Microsoft Visual Studio 8\VC\redist\Debug_NonRedist\x86\Microsoft.VC80.DebugCRT，清单文件包含：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
    <noInheritable></noInheritable>
    <assemblyIdentity type="win32" name="Microsoft.VC80.DebugCRT" version="8.0.50727.762" processorArchitecture="x86" publicKeyToken="1fc8b3b9a1e18e3b"></assemblyIdentity>
    <file name="msvcr80d.dll" hash="9062fecdbc9ab7df4d66e81b37e9cecdee037430" hashalg="SHA1"><asmv2:hash xmlns:asmv2="urn:schemas-microsoft-com:asm.v2" xmlns:dsig="http://www.w3.org/2000/09/xmldsig#"><dsig:Transforms><dsig:Transform Algorithm="urn:schemas-microsoft-com:HashTransforms.Identity"></dsig:Transform></dsig:Transforms><dsig:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"></dsig:DigestMethod><dsig:DigestValue>g5HUX4P7M3mkZuWgfND7EdkmVgs=</dsig:DigestValue></asmv2:hash></file>
    <file name="msvcp80d.dll" hash="cf233a4bb28335cd6b4f62b5947d119faefa5bcb" hashalg="SHA1"><asmv2:hash xmlns:asmv2="urn:schemas-microsoft-com:asm.v2" xmlns:dsig="http://www.w3.org/2000/09/xmldsig#"><dsig:Transforms><dsig:Transform Algorithm="urn:schemas-microsoft-com:HashTransforms.Identity"></dsig:Transform></dsig:Transforms><dsig:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"></dsig:DigestMethod><dsig:DigestValue>lGYgPP6K9l5G0HBKTJ/Rlj2Vybg=</dsig:DigestValue></asmv2:hash></file>
    <file name="msvcm80d.dll" hash="47021cd154192d51aad190daed426bf47156fa40" hashalg="SHA1"><asmv2:hash xmlns:asmv2="urn:schemas-microsoft-com:asm.v2" xmlns:dsig="http://www.w3.org/2000/09/xmldsig#"><dsig:Transforms><dsig:Transform Algorithm="urn:schemas-microsoft-com:HashTransforms.Identity"></dsig:Transform></dsig:Transforms><dsig:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"></dsig:DigestMethod><dsig:DigestValue>1fLI6D1TNH6Hwc1D/toIuhn/R+4=</dsig:DigestValue></asmv2:hash></file>
</assembly> 
```

如果我转到应用程序的调试（输出）目录，则有一个文件（ESM_Win32_App.exe.embed.manifest），其中包含：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<assembly xmlns="urn:schemas-microsoft-com:asm.v1" manifestVersion="1.0">
  <dependency>
    <dependentAssembly>
      <assemblyIdentity type="win32" name="Microsoft.VC80.DebugCRT" version="8.0.50727.762" processorArchitecture="x86" publicKeyToken="1fc8b3b9a1e18e3b"></assemblyIdentity>
    </dependentAssembly>
  </dependency>
  <dependency>
    <dependentAssembly>
      <assemblyIdentity type="win32" name="Microsoft.VC80.DebugCRT" version="8.0.50608.0" processorArchitecture="x86" publicKeyToken="1fc8b3b9a1e18e3b"></assemblyIdentity>
    </dependentAssembly>
  </dependency>
  <dependency>
    <dependentAssembly>
      <assemblyIdentity type="win32" name="Microsoft.VC80.DebugCRT" version="8.0.50727.6195" processorArchitecture="x86" publicKeyToken="1fc8b3b9a1e18e3b"></assemblyIdentity>
    </dependentAssembly>
  </dependency>
</assembly> 
```

我的 c:\windows\winsxs 目录包含：

> x86_microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.1833_none_d08b763a442c70c2 x86_microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.4027_none_d08a21a2442db2dc x86_microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.4053_none_d08d7da0442a985d x86_microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.42_none_db5f52fb98cb24ad x86_microsoft.vc80.crt_1fc8b3b9a1e18e3b_8.0.50727.4940_none_d08cc06a442b34fc x86_microsoft.vc80.crt_1fc8b3b9a1e18e3b_8 .0.50727.762_none_10b2f55f9bffb8f8
> 
> x86_microsoft.vc80.debugcrt_1fc8b3b9a1e18e3b_8.0.50727.42_none_ef74ff32550b5bf0 x86_microsoft.vc80.debugcrt_1fc8b3b9a1e18e3b_8.0.50727.762_none_24c8a196583ff03b

似乎 DLL 的运行时风格比调试多，但是，我什至没有 6195 DLL 的运行时版本，更不用说调试了。

我的 c:\windows\assembly\gac_32 不包含名为 Microsoft.VC80.DebugCRT 的目录，sxstrace 的输出似乎表明应该存在该目录。

因此，我收集到某些调试 DLL 未找到或未安装，但我不知道如何解决此问题。一个人没有这个问题，另一个人有。也没有任何想法。Visual Studio 似乎安装了 .762，我原以为它会被 SP1 和/或 Vista 更新升级......但我不知道如果是这样的话他们会在哪里，我只知道他们'不是我认为他们会在的地方。也许我需要安装另一个更新？我还发现我的 VS 正在尝试使用 .6195 的 DLL 令人费解，但是，它会从哪里获得该信息 - 它可能从其他 DLL 获得信息（即：可能来自其他组的那些？）因此尝试使用它认为是最新的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T18:18:52.730

解决了。安装了以下更新（通过查看同事的 PC 收集）：KB2251481、KB2538218、KB2548826 和 KB973673。我不知道具体是哪一个将 DLL 更新为所需的版本，但这种组合起到了作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-07T11:38:54.173

这应该是对 Jon 自己答案的评论，但我的帐户是新帐户，我没有足够的声誉来添加评论或支持他的答案。我只是想确认他的回答有效：

谢谢乔恩。在尝试使用 Visual Studio 2005 在新安装的 64 位 Windows 7 上运行调试编译时，我收到了关于缺少 Microsoft.VC80.DebugCRT 版本 8.0.50727.6195 的相同错误。根据您的评论，我运行了 Windows 更新，并且问题已解决。这包括提到的所有 4 个更新，所以我不知道哪一个有帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-19T00:34:35.167

它的 KB2538218 具有 6195 个调试 crt 库。谢谢你的信息！

# delphi-7 - 不同线程中的 Winsock recv

> ID：11890654
> 
> 赞同：0
> 
> 时间：2012-08-09T19:32:40.647
> 
> 标签：delphi-7, winsock, delphi

我使用winsock 作为客户端，大约有10 个线程。

每个线程都有自己独特的连接到相同的主机和端口。所有线程都是连接的，它们都需要同时读取一定数量的字节。我看到我一次只能使用 1 个 recv 函数，这是为什么呢？

```
function RecvThread ( p : pointer ) : Integer; stdcall;
var
 Sock   : TSocket;
 Addr   : TSockAddrIn;
 res    : Integer;
begin
 Addr.sin_family      := AF_INET;
 Addr.sin_port        := htons(8080);
 Sock                 := Socket(AF_INET, SOCK_STREAM, 0);
 Addr.sin_addr.S_addr := INET_ADDR (pchar('localhost'));
 if (Connect(Sock, Addr, SizeOf(Addr)) = 0) then begin
 while true do begin
  res := recv (sock, buff, 99999, 0); // just example
  if (res < 0) or (res = INVALID_SOCKET) then break;
 end;
 // Free Stuff, Disconnect, etc...
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:13:03.720

服务器是否能够同时写入 10 个客户端？一次 1 个 recv 功能是否意味着每个客户端按顺序接收数据，或者只有一个客户端完全工作而其他 9 个失败？

您可以尝试创建一个[收费服务器](http://en.wikipedia.org/wiki/Character_Generator_Protocol)进行测试。在不同的端口上运行 10 个副本（因此无需测试/考虑 Chargen 服务器中的线程）并将客户端每个连接到一个端口。

# ruby-on-rails - respond_with 选项

> ID：11890660
> 
> 赞同：3
> 
> 时间：2012-08-09T19:33:25.920
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在阅读 Rails 3 in Action 中的第 13 章，我`:methods => "last_ticket"`在 respond_with 方法中使用了哈希。但是我不明白这是做什么的以及在哪里可以找到可以传递给respond_with 的选项。有人可以告诉我在哪里找到它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:17:56.687

[Responder](http://api.rubyonrails.org/classes/ActionController/Responder.html)对象的 Ruby API 文档解释了您可以传递给 respond_with 的自定义选项。文档摘录：

> respond_with 还允许您传递转发到底层渲染调用的选项。这些选项仅适用于成功场景。

在您的情况下，我相信成功请求的结果将传递给一个名为“last_ticket”的方法（在同一控制器中定义）。本教程向您展示了 respond_with 的一些实际用途和含义[Edge Rails 中的新功能：带有 respond_with 的更清洁的 RESTful 控制器](http://archives.ryandaigle.com/articles/2009/8/6/what-s-new-in-edge-rails-cleaner-restful-controllers-w-respond_with/)

希望能帮助到你

# javascript - 如何从字符串中去除某些 html 标签？

> ID：11890664
> 
> 赞同：5
> 
> 时间：2012-08-09T19:33:32.827
> 
> 标签：javascript, jquery, html, parsing, text

我有`<textarea>`一个用户输入内容，并且允许他们输入 html。一旦他们完成输入，将`<textarea>`更改回`<span>`包含他们刚刚输入的内容的 a。`<script>`但是，我想`<div>`在将其放回`<span>`.

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-09T21:31:02.767

信不信由你，您可以（安全地）使用浏览器内置的 HTML 解析器执行此操作。只需使用 创建一个新`document.createElement`的 div，使用 将 textarea 的内容放入 div 中`innerHTML`，然后，您就可以使用完整的 DOM。不，包含在这个 div 中的脚本*不会*被评估。

这是一个简单的示例，它从一个元素中删除所有未出现在`ALLOWED_TAGS`列表中的标签。

```
var ALLOWED_TAGS = ["STRONG", "EM", "BLOCKQUOTE", "Q", "DEL", "INS", "A"];

function sanitize(el) {
    "Remove all tags from element `el' that aren't in the ALLOWED_TAGS list."
    var tags = Array.prototype.slice.apply(el.getElementsByTagName("*"), [0]);
    for (var i = 0; i < tags.length; i++) {
        if (ALLOWED_TAGS.indexOf(tags[i].nodeName) == -1) {
            usurp(tags[i]);
        }
    }
}

function usurp(p) {
    "Replace parent `p' with its children.";
    var last = p;
    for (var i = p.childNodes.length - 1; i >= 0; i--) {
        var e = p.removeChild(p.childNodes[i]);
        p.parentNode.insertBefore(e, last);
        last = e;
    }
    p.parentNode.removeChild(p);
}​ 
```

如前所述，您必须创建一个空的 div 容器才能使用它。这是该技术的一个示例应用程序，它是一种清理字符串的函数。但是请注意，“sanitize”此时是用词不当——在这个“sanitizer”输出真正安全的 HTML 之前，需要做更多的工作（清理属性字符串等）。

```
function sanitizeString(string) {
    var div = document.createElement("div");
    div.innerHTML = string;
    sanitize(div);
    return div.innerHTML;
} 
```

# jquery - jquery .each(function(index, element)) 不工作？

> ID：11890669
> 
> 赞同：0
> 
> 时间：2012-08-09T19:33:53.627
> 
> 标签：jquery, html, css

我想在一个 div 中获取所有子标签：

```
<div class="form input">
            <label class="formLabel cFont cColor cMore" id="text" for="textInput">please input something</label>
            <input class="formInput" type="text" id="textInput">
            <label class="formLabel" id="check" for="checkboxInput">check here to toggle disable</label>
            <input class="formInput" type="checkbox" id="checkboxInput">
        </div>
        <button type="button" onclick="showClasses()">show classes</button> 
```

我做了以下事情：

```
function showClasses(){
        var children = $('.form').children();
        children.each(function(index, v){
            var classes = v.attr('class');
            console.log(classes);
        }); // end each
    } // end showClasses 
```

控制台给了我一个错误：

```
Uncaught TypeError: Object #<HTMLLabelElement> has no method 'attr' 
```

然后，我将代码更改为：

```
function showClasses(){
        var children = $('.form').children();
        children.each(function(){
            var classes = $(this).attr('class');
            console.log(classes);
        }); // end each
    } // end showClasses 
```

然后它工作。

那么 .each(function(index, element)) 和 .each(function()) 有什么区别？为什么我不能在我的代码中使用第一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:37:08.243

在`children.each(function(index, v){`-`v`是 domElement。尝试使用`.attr`如下，

```
var classes = $(v).attr('class'); 
```

**完整代码：**

```
function showClasses(){
    var children = $('.form').children();
    children.each(function(index, v){
        var classes = $(v).attr('class');
        console.log(classes);
    }); // end each
} // end showClasses 
```

# css - 显示：内联块不在 Chrome 中垂直居中

> ID：11890670
> 
> 赞同：0
> 
> 时间：2012-08-09T19:33:54.530
> 
> 标签：css, google-chrome, webkit

尽管在其他浏览器中一切正常，但右上角的按项目排序在 Google Chrome（最新版本）中并未垂直居中。无法真正弄清楚为什么会发生这种情况。如果我减小宽度，它会起作用，否则不会。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:54:26.430

问题解决了。Chrome 中非常奇怪的事情：如果您使用显示内联块，则需要指定 vertical-align:top 否则它将转到基线，这是默认设置。即使你有一个通常有效的行高，Chrome 也会忽略它。

# makefile - 模式规则未按预期工作

> ID：11890671
> 
> 赞同：0
> 
> 时间：2012-08-09T19:33:58.957
> 
> 标签：makefile, gnu-make

我有一部分 GNU-make makefile (gcc v4.1.2) 没有按我的预期工作。`make`我在子目录中有四个库，如果在基本 /build 目录中运行，我想递归构建它们

```
/prj
|--/build
|  |--makefile
|  |--/Tables.lib
|  |  |--makefile
|  |--/General.lib
|  |  |--makefile (etc..)
|--/lib
|--/src 
```

/prj/build/makefile 的简要代码：

```
LIB_DIR = /prj/lib

LIBRARY := libcomposition_adjustment.a libtables.a libgeneral.a libbiblio.a
DIRS := Tables.lib Composition_adjustment.lib General.lib Biblio.lib

all: $(LIBRARY)
#all: $(LIB_DIR)/libcomposition_adjustment.a # this line works

%.a : $(LIB_DIR)/%.a

$(LIB_DIR)/libtables.a:
    cd Tables.lib; $(MAKE)

$(LIB_DIR)/libcomposition_adjustment.a:
    cd Composition_adjustment.lib; $(MAKE)

$(LIB_DIR)/libgeneral.a:
    cd General.lib; $(MAKE)

$(LIB_DIR)/libbiblio.a: libgeneral.a
    cd Biblio.lib; $(MAKE) 
```

它说“没有规则来制作'all'需要的目标'libcomposition_adjustment.a'。停止”。但我认为这条线`%.a : $(LIB_DIR)/%.a`会处理这个问题。我错误地制定了这个模式规则？

`all:`如果我尝试注释掉的第二行，它会按预期工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T21:12:03.690

问题在这里：

```
%.a : $(LIB_DIR)/%.a 
```

这是一个没有命令的模式规则，Make 根本不会将其解释为独立规则。解决这个问题的方法不止一种；最简单的可能是给它一个什么都不做的命令：

```
%.a : $(LIB_DIR)/%.a
    @: 
```

但更好的方法是完全不使用有问题的规则：

```
LIB_DIR = /prj/lib

LIBRARY := libcomposition_adjustment.a libtables.a libgeneral.a libbiblio.a
LIBRARY := $(addprefix $(LIB_DIR)/,$(LIBRARY))

all: $(LIBRARY)

$(LIB_DIR)/libtables.a:
    cd Tables.lib; $(MAKE)

$(LIB_DIR)/libcomposition_adjustment.a:
    cd Composition_adjustment.lib; $(MAKE)

$(LIB_DIR)/libgeneral.a:
    cd General.lib; $(MAKE)

$(LIB_DIR)/libbiblio.a: $(LIB_DIR)/libgeneral.a
    cd Biblio.lib; $(MAKE) 
```

# jquery - 使用 jQuery 将呈现的 HTML 插入文本字段

> ID：11890679
> 
> 赞同：0
> 
> 时间：2012-08-09T19:34:25.960
> 
> 标签：jquery, html, textbox

*编辑以使我的实际目标更明确...*

不知道这是否可能没有很多努力......

我有一个文本字段，我的用户将在其中输入评论。我想通过在他们的名字前面加上 @ 符号来启用标记用户。我整理了一些 jQuery 函数来轮询文本字段，等到输入 @ 符号，然后使用正则表达式获取 @ 符号后的文本并返回匹配用户的列表。这一切都运作良好。

当用户选择其中一个结果时，我的问题就出现了——我想用某种格式化文本替换文本字段中的“@username”。目标是提供一种在视觉上区分文本字段中的用户名的方法，以便用户知道它被正确地处理为标签。有没有办法在文本字段中使用任何类型的格式？或者是否有另一个我可以使用的表单元素支持这一点？

谢谢

**更新：** 四处搜索，我发现了这个问题：[jQuery textbox and html](https://stackoverflow.com/questions/932177/jquery-textbox-and-html?rq=1)

建议该作者使用 div 来显示丰富的 HTML，并使用隐藏的输入来捕获用户的文本。我想我可以使用 AJAX 来抓取文本字段上的每个按键并使用内容更新 div，但这会产生很多开销吗？在这种情况下还有其他可行的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:54:25.287

吉姆，我本来想把这个作为评论，但我还不能这样做。我之前不得不做类似的事情，并使用轻量级的所见即所得编辑器来做到这一点。对于您的情况来说，这可能有点矫枉过正，但也许需要调查一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:56:42.930

您对问题的更新是 100% 正确的。

捕获击键绝对是正确的方法，但是您实现它的方式将决定开销。

我建议等到您捕获一个 @ 符号，然后是 X 个字符，然后是一个空格。一旦你阅读了空间，你就可以发送一个 AJAX 请求。

除非用户输入一百万个 @ 标签，否则我无法想象这是很多请求。

请记住，某些应用程序每秒轮询服务器几次，这会少得多。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-09T19:45:07.703

请尝试这样。

```
var text = '<a href="users/username">username</a>'
var o = $(text); 
```

# php - Magento 内存泄漏

> ID：11890680
> 
> 赞同：0
> 
> 时间：2012-08-09T19:34:40.287
> 
> 标签：php, magento, memory, hosting, overflow

我在我的 magento 1.6.1.0 站点上遇到了一些问题，看起来像是内存泄漏。服务器完全停机了几次，因为我在共享服务器上，我的托管公司对我并不满意，并威胁要禁止我的网站进入他们的服务器，因为他们说这对整个服务器构成威胁。

当服务器在服务器日志中关闭时，我们可以首先阅读：NY-SH-02 suhosin[31654]: ALERT - canary mismatch on efree() - heap overflow detected at 0x7f7567b90e58 (attacker 'REMOTE_ADDR not set', file '/var/ www/sites/mysite.com/app/code/core/Mage/Core/Model/Session/Abstract/Varien.php'，第 119 行）大约 78 行，同时带有确切的消息

系统写入 NY-SH-02 suhosin[30574] 之间的 1 次：警报 - efree() 上的金丝雀不匹配 - 在 0x7f7567b90e58 处检测到堆溢出（攻击者'REMOTE_ADDR 未设置'，文件'/var/www/sites/mysite.com /lib/Zend/Controller/Response/Abstract.php'，第 586 行）

半分钟后，以下消息出现 NY-SH-02 suhosin[32532]：ALERT - 脚本试图将 memory_limit 增加到超过允许值的 536870912 字节（攻击者 'ip-adress'，文件 '/var/www/网站/mysite.com/index.php'，第 2 行）

这一行出现了 50 次，但有不同的 php 文件，但总是提到第 2 行

最后一条警报线中定义为攻击者的 ip 地址有时不同，2 次是 google bot，2 次是不同的 ip。

有没有人遇到过这个问题，或者知道我必须从哪里开始寻找，因为这是大海捞针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-10T04:24:25.033

这与其说是内存泄漏，不如说是 Magento 对内存的需求很大。我不是安全专家，但我知道这`suhosin`是一个旨在加强 PHP 安全性的 PHP 扩展。似乎在抱怨

1.  PHP 的内存限制正在耗尽，它解释为攻击。

2.  一个 PHP 文件`ini_set`用于将内存限制提高到 536870912 字节，即 512MB。

您的共享主机没有足够的内存分配给每个共享主机实例以供 Magento 运行。如果用户点击包含大量非缓存项目的页面，Magento 可以暂时使用 200 MB、300 MB 甚至 400 MB 的内存。在结帐期间，Magento 故意重建与订单相关的缓存，以确保它获得最新的项目 - 快速修复它以达到内存限制，这可能是正在发生的事情 #2

您需要一个宣传 Magento 支持的主机。

# java - 如何将纪元日期转换为 joda 时间 LocalDate？

> ID：11890683
> 
> 赞同：0
> 
> 时间：2012-08-09T19:34:40.957
> 
> 标签：java, datetime, jodatime

我可以看到如何转换`LocalDate`为纪元日期，但我该如何反其道而行之？

也就是说，如果我有从纪元开始的天数，我该如何构造`org.joda.time.LocalDate`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T19:37:36.443

简单的：

```
// You'd probably make this a constant somewhere
LocalDate epoch = new LocalDate(1970, 1, 1);
LocalDate desiredDate = epoch.plusDays(daysSinceEpoch); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T19:39:31.013

构造一个新的 j [ava.util.Date](http://docs.oracle.com/javase/6/docs/api/java/util/Date.html)然后将其传递给[LocalDate 构造函数](http://joda-time.sourceforge.net/apidocs/org/joda/time/LocalDate.html#LocalDate%28java.lang.Object%29)

# c# - byte[] 数组到 64 位二进制字符串

> ID：11890688
> 
> 赞同：-1
> 
> 时间：2012-08-09T19:35:15.560
> 
> 标签：c#, binary, bytearray, converter

我在从二进制注册表项中获取值时遇到问题。到目前为止我的代码是

```
string key = "UserPreferencesMask";
        string key_place = @"Control Panel\Desktop";
        RegistryKey root = Registry.CurrentUser;
        root = root.OpenSubKey(key_place);
        var byte_value = root.GetValue(key);
        byte[] bytearray = byte_value as byte[];
        //How can convert byte [] array to 64 bit binary string
         klase.Close();
         MessageBox.Show(binary_string); 
```

当我想要的时候我被堆叠

```
UserPreferencesMask 
```

二进制注册表项，用于转换 64 位二进制字符串。像这样的东西

9E3E078012000000

十六进制值

1001111000111110000001111000000000010010000000000000000000000000

二进制值

但是，如果我构建从十六进制转换为二进制的代码，如果十六进制数字中的前一个或两个或多个零数字，我的二进制值就会出错。二进制返回没有第一个零数字，仅从第一个字节值开始计数 1 ，如果十六进制以任何其他字符开头没有错误，除了 0 我该如何解决问题？我到处搜索，但我发现只有十六进制到二进制。，但这对我来说会导致错误，并且返回的值不是 64 位值长度。谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:44:43.547

```
Converter.ToString( BitConverter.ToInt64( bytearray, 0 ), 2 ).PadLeft( 64, '0' ); 
```

如果原始数字是错误的字节序，那么只需执行以下操作就很容易了：

```
Array.Reverse( bytearray ); 
```

在运行第一行之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:43:52.070

您可以通过指定格式将整数转换为十六进制值

```
long x = 1207703453;
string hex = x.ToString("X16"); // "0000000047FC179D" 
```

这将始终产生一个 16 位的十六进制值。

由此很容易产生二进制表示。我建议使用字典。

```
var hexToBinDict = new Dictionary<char, string> { 
    { '0',"0000"},
    { '1',"0001"},
    { '2',"0010"},
    { '3',"0011"},
    { '4',"0100"},
    { '5',"0101"},
    { '6',"0110"},
    { '7',"0111"},
    { '8',"1000"},
    { '9',"1001"},
    { 'A',"1010"},
    { 'B',"1011"},
    { 'C',"1100"},
    { 'D',"1101"},
    { 'E',"1110"},
    { 'F',"1111"}
};

var sb = new StringBuilder(64);
foreach (char hexdigit in hex) {
    sb.Append(hexToBinDict[hexdigit]);
}
string result = sb.ToString(); 
// "0000000000000000000000000000000001000111111111000001011110011101" 
```

# macos - OSX 上的 LLVM 命令行

> ID：11890692
> 
> 赞同：1
> 
> 时间：2012-08-09T19:35:31.090
> 
> 标签：macos, llvm

我正在工作 [http://llvm.org/docs/WritingAnLLVMPass.html][1]，试图写一个非常简单的通行证。我已经编写并编译了通行证（部分感谢 Stackoverflow 社区），但现在我无法运行它......

文档内容如下：

> 要对其进行测试，请按照入门指南末尾的示例将“Hello World”编译为 LLVM。我们现在可以通过这样的转换运行程序的位码文件（hello.bc）（当然，任何位码文件都可以）：
> 
> $ opt -load ../../../Debug+Asserts/lib/Hello.so -hello < hello.bc > /dev/null Hello: __main Hello: puts Hello: main '-load' 选项指定'opt' 应该将您的通行证作为共享对象加载，这使得 '-hello' 成为有效的命令行参数（这是您需要注册通行证的原因之一）。因为 hello pass 并没有以任何有趣的方式修改程序，所以我们只是丢弃了 opt 的结果（将其发送到 /dev/null）。

但是，当我运行命令时，出现以下问题：

```
mymachine$./opt -load ../../../Debug+Asserts/lib/Hello.so -hello < hello.bc > /dev/null 
Error opening '../../../Debug+Asserts/lib/Hello.so': 
   dlopen(../../../Debug+Asserts/lib/Hello.so, 9): image not found  
   -load request ignored. opt: Unknown command line argument '-hello'.  
Try: './opt -help' opt: Did you mean '-help'? 
```

有任何想法吗？我正在运行 OSX，我怀疑这是问题的一部分......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:36:57.813

原来我想要的命令（来自 bin 目录）是：

```
opt  -load ../lib/LLVMHello.dylib -hello < hello.bc > /dev/null 
```

我知道 .dylib 是 .so 的 OSX 等价物 - 但这在很大程度上是猜测......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:38:00.720

尝试使用绝对路径而不是相对路径？这似乎是一个相对明显的“找不到文件”。

# jquery - 根据窗口大小调整图像大小

> ID：11890693
> 
> 赞同：1
> 
> 时间：2012-08-09T19:35:31.257
> 
> 标签：jquery, html, css, image, resize

[在此示例](http://www.sanders-albek.nl/bm.html)中如何调整图像大小？当我调整窗口大小时，我希望图像以适当的纵横比调整大小。

这应该使用 jquery 还是使用 html/css 来完成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:38:41.783

由于您使用的是 jquery，因此您可以使用 resize 方法

```
$(window).resize(function() {
  // check the window width and resize your images
  var width = $(window).width();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:41:38.180

A Simple search on google provides the answer.

Use JQuery Vegas to have full size fading. [http://vegas.jaysalvat.com/](http://vegas.jaysalvat.com/)

Use Supersized to have full size sliding. [http://buildinternet.com/project/supersized/](http://buildinternet.com/project/supersized/)

# excel - 粘贴时 Excel VBA 匹配列

> ID：11890694
> 
> 赞同：0
> 
> 时间：2012-08-09T19:35:38.087
> 
> 标签：excel, excel-2010, vba

我在 excel 中有一小部分数据，有 4 列

```
File A: 

  SNO   TYPE  CountryA   CountryB   CountryD
    1    T1    A1          B2         D1          
    2    T2    A2          B2         D2 
```

我在另一个excel文件中有这些数据

```
File B:

   SNO   TYPE  CountryB  CountryA CountryC
    11    T10   B10         A10     C10
    22    T20   B20         A20     C20
    33    T30   B30         A30     C30 
```

现在，如果我想将文件 B 中的数据粘贴到文件 A 中的数据上，我希望列名使用一些 vba 代码自动对齐。

所以最终结果应该是这样的，

```
 SNO  TYPE CountryA    CountryB  CountryC  CountryD           
        1    T1   A1           B1         --         D1
        2    T2   A2           B2         --         D2 
        11   T10  A10          B10        C10        --
        22   T20  A20          B20        C20        --
        33   T30  A30          B30        C30        -- 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:04:39.797

这应该适合你：

```
Sub MatchUpColumnDataBasedOnHeaders()

Dim wbk As Workbook
Set wbk = ThisWorkbook
Set ws = wbk.Sheets(1)
Set ws2 = wbk.Sheets(2)
Dim cell As Range
Dim refcell As Range

Application.ScreenUpdating = False
ws.Select

    For Each cell In ws.Range("A1:Z1")

        cell.Activate
        ActiveCell.EntireColumn.Copy

        For Each refcell In ws2.Range("A1:Z1")
            If refcell.Value = cell.Value Then refcell.PasteSpecial (xlPasteValues)
        Next refcell

    Next cell
Application.ScreenUpdating = True

End Sub 
```

很有趣，我觉得有一种非常简单的非 VBA 方法可以做到这一点 - 但我在谷歌上找不到它的按钮。这适用于表格 1 和 2 上的 A 到 Z 列。假设您的标题位于第 1 行。

**编辑 - 另外：**

我注意到您想对文件执行此操作，但您没有说任何有关工作表的内容。这是使用不同工作簿的方法：

```
Sub MatchUpColumnDataBasedOnHeadersInFiles()

Dim wbk As Workbook

Set wbk = ThisWorkbook

Workbooks.Open Filename:="C:\PasteIntoWorkbook.xlsx"
Set wbk2 = Workbooks("PasteIntoWorkbook.xlsx")

Set ws = wbk.Sheets(1)
Set ws2 = wbk2.Sheets(1)

Dim cell As Range
Dim refcell As Range

wbk.Activate

Application.ScreenUpdating = False

ws.Select

    For Each cell In ws.Range("A1:N1")

        wbk.Activate
        ws.Select

        cell.Activate
        ActiveCell.EntireColumn.Copy

        wbk2.Activate
        ws2.Select

        For Each refcell In ws2.Range("A1:N1")
            If refcell.Value = cell.Value Then refcell.PasteSpecial (xlPasteValues)
        Next refcell

    Next cell

ws2.Select
Range("A1").Select
wbk.Activate
ws.Select
Range("A1").Select

Application.ScreenUpdating = True

End Sub 
```

因此，如果您决心使用不同的 .xls 文件，那么您就是这样做的。您显然只需要将文件路径调整为粘贴到文件中的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-17T03:56:32.790

匹配列编码

Sheet2 = 您的原始标题（仅需要的标题 - 将它们放入第 1 行）

Sheet1 =您的数据以及标题，但标题不同步，可能有更多或更少的标题，但您希望您的数据与 sheet2 中的标题一致

现在将您的数据放入 sheet2 （在第 2 行）中已经存在于 sheet2 中的标题下方，并运行以下编码，您的数据将按照所需的标题显示。

```
Sub Rahul()

Dim Orig_Range As Range
Dim New_Range As Range
Dim ToMove As Range
Dim RowOld, RowNew As Long
Dim ColOld, ColNew As Long
Dim WSD As Worksheet
Dim Cname As String

Set WSD = ActiveSheet

ColOld = WSD.Cells(1, Application.Columns.Count).End(xlToLeft).Column

ColNew = WSD.Cells(2, Application.Columns.Count).End(xlToLeft).Column

RowNew = WSD.Cells(Application.Rows.Count, 1).End(xlUp).Row

RowOld = 1

Set Orig_Range = Range(WSD.Cells(1, 1), WSD.Cells(1, ColOld))

For i = 1 To ColOld

Set New_Range = Range(WSD.Cells(2, 1), WSD.Cells(2, ColNew))

Cname = Orig_Range.Cells(RowOld, i).Value

Set ToMove = New_Range.Find(what:=Cname, LookIn:=xlValues, LookAt:=xlWhole, SearchOrder:=xlByColumns, MatchCase:=True)

If ToMove Is Nothing Then

New_Range.Cells(1, i).Resize(RowNew, 1).Select

Selection.Insert shift:=xlToRight

ElseIf Not ToMove.Column = i Then

ToMove.Resize(RowNew, 1).Select

Selection.Cut

New_Range.Cells(1, i).Select

Selection.Insert shift:=xlToRight

End If

Next i

End Sub 
```

# time-complexity - 图算法的时间复杂度取决于什么？

> ID：11890695
> 
> 赞同：2
> 
> 时间：2012-08-09T19:35:39.127
> 
> 标签：time-complexity, dijkstra, prims-algorithm, kruskals-algorithm

我在教科书中偶然发现了这个问题：

> “一般来说，Prim、Kruskal 和 Dijkstra 算法的时间复杂度取决于什么？”
> 
> 一个。图中的顶点数。
> 湾。图中的边数。
> C。两者都是关于图中顶点和边的数量。
> 
> 解释你的选择。

因此，根据 Wikipedia Prim、Kruskal 和 Dijkstra 的算法，最坏情况的时间复杂度分别`O(ElogV)`为`O(ElogV)`和`O(E+VlogV)`。所以我猜答案是c？但为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T17:41:00.583

答案是 (c)，因为 V 和 E 都有助于各自算法的渐近复杂度。现在，在进一步的分析中，有人可能会争辩说 V 在 Kruskal 和 Prim 上的影响要小得多（因为它是对数因子）。但在所有三种情况下，E 似乎几乎具有相同的权重。

另外，请注意 |E| <= |V|^2 总是（对于简单的图表）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:47:30.757

我不了解 Prim 和 Kruskal 的情况，并且可能对 Dijkstra 的情况有误，但我认为在这种情况下答案是 b，因为：

Dijkstra 将访问已知最短路径上的节点，直到找到目的地。

这意味着如果两条边指向同一个节点，则算法将只考虑一条，因为一条具有更高的权重或它们相等，从而使一条边没有意义。

因此，通过添加边来增加遍历图所花费的时间的唯一方法是添加节点（在现有节点上添加边可以改变算法的遍历时间，但它**与边的数量不成正比，仅与它们的权重成正比**）。

因此，我的直觉是只有节点的数量与运行时间有直接关系。[Dijkstra 的 Alogrithm 维基百科页面](http://en.wikipedia.org/wiki/Dijkstra%27s_algorithm#Running_time)似乎证实了这一点：

> Dijkstra 算法的最简单实现将集合 Q 的顶点存储在普通链表或数组中，从 Q 中提取最小值只是对 Q 中的所有顶点进行线性搜索。在这种情况下，运行时间为 O(E + V^ 2) 或**O(V^2)**。

这当然只是一种直觉，[cs.stackex](https://cs.stackexchange.com/)可能会有更大的用处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-07T13:54:16.030

在最坏的情况下，图将是一个完整的图，即 v(v-1)/2 边，即 e>>v 和 e ~ v^2

Prim 和 Dijkstra 算法的时间复杂度是：
1\. 使用邻接列表和优先级队列：
O((v+e) log v) 在最坏的情况下：e>>v 所以 O(e log v)
2\. 使用矩阵和优先级队列:
O(v^2 + e log v) in WC e ~ v^2
所以 O(v^2 + e log v) ~ O(e + e log v) ~ O(e log v)。
3\. 当图变得更密集时（最坏的情况是完整图），我们使用斐波那契堆和邻接表：O(e + v log v)

kruskal 的时间复杂度是 O(e log e) 在最坏的情况下 e ~ v^2 所以 log (v^2) = 2 log v

所以我们可以有把握地说，在最坏的情况下，O(e log e) 可以是 O(2e log v)，即 O(e log v)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-01T01:36:16.887

正如你所说，O(ElogV)、O(ElogV) 和 O(E+VlogV) 的时间复杂度意味着每个都依赖于 E 和 V。这是因为每个算法都涉及考虑边缘及其各自的权重在图表中。由于 Prim 和 Kruskal 的 MST 必须连接并包含所有顶点，而 Dijkstra 的最短路径必须通过其他中间顶点从一个顶点到另一个顶点，因此每个算法中也必须考虑顶点。

例如，使用 Dijkstra 算法，您实际上是在寻找成本低且连接顶点的边，这些边最终将提供从起始顶点到结束顶点的路径。要找到最短路径，不能只寻找连​​接起点和终点的路径，也不能只寻找最小的加权边，两者都需要考虑。由于您正在考虑边和顶点，因此在整个算法中进行这些考虑所需的时间将取决于边数和顶点数。

此外，通过三种算法的不同实现，可能存在不同的时间复杂度，分析每种算法需要同时考虑 E 和 V。

例如，Prim 的算法是 O(V^2)，但可以通过使用基于最小堆的优先级队列进行改进，以实现您发现的复杂性：O(ElogV)。O(ElogV) 可能看起来是更快的算法，但并非总是如此。E 可以与 V^2 一样大，因此在具有接近 V^2 边的密集图中，O(ElogV) 变为 O(V^2)。如果 V 非常小，则 O(V^2) 和 O(ElogV) 之间没有太大区别。E 和 V 还会根据图形的存储方式影响运行时间。例如，对于密集图（E 接近 V^2），邻接表变得非常低效，因为检查图中是否存在边从接近 O(1) 到 O(V)。

# php - PHP IMAP 获取没有全文的消息预览

> ID：11890704
> 
> 赞同：2
> 
> 时间：2012-08-09T19:36:31.423
> 
> 标签：php, imap

使用 PHP`IMAP`库，是否可以只抓取消息正文的前 100 个字符左右而不抓取整个消息？

我正在开发一个消息预览功能，我不想让用户在他/她看到预览之前等待每条消息的全部加载。

编辑：为什么我的感谢被删除了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:01:53.133

我不认为你可以。但是，您*可以做的是使用*[http://www.php.net/manual/en/function.imap-fetchbody.php](http://www.php.net/manual/en/function.imap-fetchbody.php)获取消息正文的某些部分

# objective-c - Facebook sdk iOS 注销错误

> ID：11890707
> 
> 赞同：0
> 
> 时间：2012-08-09T19:36:42.230
> 
> 标签：objective-c, xcode, facebook

我目前正在使用新的 Facebook SDK，但我遇到了一个非常奇怪的问题。我有一个名为 FacebookExplorerTableViewController 的视图控制器，在我的 viewdidload 中有以下代码：

```
if(appDelegate.session.isOpen)
    {
        [self receiveAlbums];
    }
    else 
    {
        appDelegate.session = [[FBSession alloc] init];

        appDelegate.session = [FBSession sessionOpenWithPermissions:nil completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
            NSLog(@"opened session");
            if(!error) [self receiveAlbums];
            else NSLog(@"error: %@",error);
        }];
} 
```

当我运行它时，一切都很好。但是，我有另一个视图控制器，名为 SharingSettingsTableViewController，我可以在其中选择注销：

```
[appDelegate.session closeAndClearTokenInformation]; 
```

当我尝试注销时，出现 xCode 崩溃：

```
2012-08-09 21:29:19.683 My Albums[2197:17903] opened session
2012-08-09 21:29:19.684 My Albums[2197:17903] requesting albums
2012-08-09 21:29:19.695 My Albums[2197:17903] access token: (null)
2012-08-09 21:29:19.697 My Albums[2197:17903] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '*** -[__NSPlaceholderDictionary initWithObjects:forKeys:count:]: attempt to insert nil object from objects[0]'
*** First throw call stack:
(0x1b6d022 0x1f56cd6 0x1aac7db 0x1ac4e86 0x757a5 0x754f4 0xa17e2 0x9ef39 0x676f9 0x92c3f1 0x1b6ee99 0x55514e 0x5550e6 0x5fbade 0x5fbfa7 0x5fb266 0x57a3c0 0x57a5e6 0x560dc4 0x554634 0x232eef5 0x1b41195 0x1aa5ff2 0x1aa48da 0x1aa3d84 0x1aa3c9b 0x232d7d8 0x232d88a 0x552626 0x21ed 0x2155)
terminate called throwing an exception 
```

它似乎再次运行我的完成块！控制台中的“请求专辑”来自对 receiveAlbums 的调用。

为什么这个完成块再次运行？在我转到设置视图控制器时，我已经释放了 FacebookExplorerTableViewController！这怎么能运行，我怎么能摆脱错误？:)

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T10:41:34.453

我有同样的问题。我的问题是`[FBSession activeSession].accessToken`通过将其传递给 NSDictionary 来保留。最简单的解决方案是通过 a`[NSString stringWithFormat:@"%@", [FBSession activeSession].accessToken]`而不是直接`[FBSession activeSession].accessToken`使用。

# xampp - 在 XAMP 中使用符号链接

> ID：11890719
> 
> 赞同：0
> 
> 时间：2012-08-09T19:37:28.973
> 
> 标签：xampp, localhost

我已经`symbolic linker`在我的 mac 上安装了，这让我可以轻松地为任何文件夹创建符号链接。

我决定为我的 php 项目文件夹（在保管箱中）创建一个符号链接，并将其放在我的 XAMP htdocs 文件夹中。但是，如果我尝试通过转到以下地址来访问该文件夹：

```
http://localhost/Projects/ 
```

我收到以下错误

```
You don't have permission to access the requested directory. There is either no index document or the directory is read-protected.

If you think this is a server error, please contact the webmaster. 
```

我已经阅读了一些关于带有符号链接的权限的内容，并且我确实将原始文件夹权限级别更改为每个人的读写访问权限，但无济于事。

有谁知道如何让符号链接文件夹与 XAMP 一起使用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:09:38.750

Owww，以下终端命令为我解决了这个问题:)

```
chmod go+x Dropbox 
```

:D 伊皮

# iphone - 寻找将文本字段转换为变量的代码？

> ID：11890720
> 
> 赞同：-1
> 
> 时间：2012-08-09T19:37:33.897
> 
> 标签：iphone, ios, xcode, ipad

我正在寻找能够将文本字段转换为方程式变量的代码。我已经设置了文本字段，单击时他们会拉出一个小键盘，我只需要将它们链接起来。建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:42:58.773

without more detail i cant really help but for extracting something from a textfield

just get the string form the textfield, then convert to int?

```
NSString *variable = textfield.text;
int x= [variable intValue]; 
```

# mysql - 在一个查询中对多个表进行 GROUP_CONCAT

> ID：11890726
> 
> 赞同：1
> 
> 时间：2012-08-09T19:38:20.577
> 
> 标签：mysql

我正在一个投票站点上工作，其中每个投票的基本信息存储在一个表中，选择存储在另一个表中，而投票存储在另一个表中。这种结构给了我最大的灵活性，但是，因为我不是 mySQL 专家，我在查询一次检索所有相关数据时遇到了一些麻烦。

到目前为止，我已经能够使用 GROUP_CONCAT 将选项选择为 CSV，但是对于当前的结构，我不确定如何再次使用 GROUP_CONCAT 来获取选票列表。到目前为止，我使用的查询如下所示：

```
SELECT polls.id AS id, polls.name AS name, polls.time AS time, polls.description AS description, ch.choices 
FROM (SELECT poll, GROUP_CONCAT(name) AS choices FROM choices GROUP BY poll) AS ch 
JOIN polls ON ch.poll = polls.id 
ORDER BY polls.time DESC 
LIMIT 0, ' . ($count - 1) 
```

投票表中的相关列是'poll'和'vote'，其中poll与polls.id相同，vote与choice.id对应。抛开细节不谈，我真正需要知道的是如何使用 GROUP_CONCAT 在单个查询中从两个表中检索值，而不仅仅是一个表。我会很感激任何意见。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T21:30:53.510

解决方案最终比我意识到的要简单得多。我原来的查询是不必要的复杂。我最终在 SELECT 语句中将 GROUP_CONCATs 作为函数执行，并且效果很好。这就是我最终得到的结果：

```
SELECT polls.id AS id, polls.name AS name, polls.time AS time, polls.description AS description, 
(SELECT GROUP_CONCAT(name SEPARATOR "|") FROM choices WHERE poll = polls.id) as choices, 
(SELECT GROUP_CONCAT(choice SEPARATOR "|") FROM votes WHERE poll = polls.id) as votes 
FROM polls 
ORDER BY polls.time DESC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:38:30.777

您的要求有些不清楚。如果您记录投票、投票和选择的表结构，可能会更容易提供帮助。

我的第一次尝试：

```
Select polls.id as id, polls.name as name, polls.time as time,
    polls.description as description, ch.choices
FROM polls
INNER JOIN vote ON polls.id=vote.poll_id
INNER JOIN vote ON vote.id=choice.vote_id
ORDER BY polls.time DESC
LIMIT 0, 30 
```

# java - 布尔值的java数组都设置为相同的值

> ID：11890730
> 
> 赞同：-7
> 
> 时间：2012-08-09T19:38:30.263
> 
> 标签：java, arrays, boolean

在java中，是否可以在任何设置为指定值时`Array`进行设置，（例如，false）都设置为相同的值。（如果一个值为 false，则所有值都将设置为 false。）`booleans``boolean`

我将有一个循环不断添加更多内容`Array`，因此单独设置不是一个选项。

任何帮助表示赞赏。我不会发布代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T19:59:15.420

有一种方法可以用所选值填充布尔数组，这可能是您所追求的：

[`Arrays.fill(boolean[] a, boolean val)`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#fill%28boolean%5B%5D,%20boolean%29)

*将指定的布尔值分配给指定的布尔数组的每个元素。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T19:42:17.803

自己实现一个在设置数组值时使用的方法。然后，该方法可以确保您想到的约束。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T19:41:27.377

我认为没有内置函数可以做到这一点，但是您可以轻松地自己实现这样的数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T19:49:07.933

考虑另一种解决方案：实现一个可变布尔值类并将所有需要的变量指向该可变布尔值。当您更改其中之一的值时，所有值都将更改。我可以发布一些代码，但我不会:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-09T20:01:08.397

您可以创建一个布尔数组，如果数组中的一个布尔值更改为真或假，则所有值都将更改为真或假。

鉴于问题的模棱两可，我不确定布尔值是如何更改的，但假设您在设置它们的代码中有一个位置。你可以实现类似这样的伪代码：

```
//boolean x changed to true(or false)
for (int i = 0; i < ARRAYSIZE; i++)
    //set each value of the booleans to the same value as boolean x 
```

希望这可以帮助。

# python - 我的 pygame 精灵可以左右移动，但我无法让它在屏幕末尾停止

> ID：11890731
> 
> 赞同：1
> 
> 时间：2012-08-09T19:38:35.030
> 
> 标签：python, pygame

主程序：

```
player = Player("player.png",[10,650])
players = pygame.sprite.Group()
players.add(player)

while True:
    for event in pygame.event.get():
      if event.type == KEYDOWN:
        if event.key == K_RIGHT:
          player.goright()
        if event.key == K_LEFT:
          player.goleft()           
      if event.type == KEYUP:
        if event.key == K_RIGHT:
          player.cangoright = False
        if event.key == K_LEFT:
          player.cangoleft = False

players.update()
players.draw(SCREEN)
pygame.display.update()
clock.tick(FPS) 
```

相关精灵的功能：

```
def update(self):
  if self.cangoright:
    self.rect.left += self.speed
  if self.cangoleft:
    self.rect.left -= self.speed

def goright(self):               
  if self.rect.right <= 1024:
    self.cangoright = True
  else:
    self.cangoright = False

def goleft(self):             
  if self.rect.left >= 0:
    self.cangoleft = True
  else:
    self.cangoleft = False 
```

问题是“cangoright”和“cangoleft”标志似乎不能正常工作。当精灵超出屏幕边缘时（左侧为 0，右侧为 1024），标志应设置为 false，因此更新函数中的 ifs 应返回 false，但这不会发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:30:18.863

[这个答案](https://stackoverflow.com/a/11846756/216356)有一些示例`move`方法。也许看看它们是如何写的会有所帮助？

**桨.move()**

```
def move(self, *, up=False, down=False):
    if up or (not down and self.keys.up and
              self.position.y - self.size.y > 0):
        self.position -= Point(0, self.move_by)
    if down or (not up and self.keys.down and
                self.position.y + self.size.y < self.height):
        self.position += Point(0, self.move_by) 
```

**球.move()**

```
def move(self):
    self.position += self.velocity
    self.bounce() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:46:39.330

我相信部分问题是您只`left`在`self.rect`. 尝试同时更新`left`和`right`，看看是否会改变。

更重要的是，这段代码有点难以阅读，而且你想要做的事情太复杂了。`update`通过在函数中而不是在键事件处理程序中检查屏幕的边界，您可能会得到更好的服务。实际上，这是游戏物理的一部分，所以它可能应该挂在那里。

换句话说，使用事件循环来设置表达玩家对`update`函数意图的标志。使用该`update`函数根据事件循环设置的标志将游戏规则（物理等）应用于游戏状态。

也许是这样的？

```
while True:
  ...
    for event in pygame.event.get():
      if event.type == KEYDOWN:
        if event.key == K_RIGHT:
          player.goright = True
        if event.key == K_LEFT:
          player.goleft = True
      if event.type == KEYUP:
        if event.key == K_RIGHT:
          player.goright = False
        if event.key == K_LEFT:
          player.goleft = False

  players.update()
  players.draw(SCREEN)
  pygame.display.update()
  clock.tick(FPS)

def update(self):
  if self.goright and self.speed < SPEED_MAX:
    self.speed += ACCEL_INCREMENT
  if self.goright and self.speed > -SPEED_MAX:
    self.speed -= ACCEL_INCREMENT

  new_left_pos = self.rect.left + self.speed
  new_right_pos = self.rect.right + self.speed

  if new_left_pos > 0 and new_right_pos < 1024:
        self.rect.left += self.speed
        self.rect.right += self.speed 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T19:46:49.087

if 语句略有偏差。

```
if self.rect.right <= 1024:  #Shouldn't this be < 1024 and not <=
    self.cangoright = True 
```

同样适用于：

```
if self.rect.left >= 0:  #Same thing here
    self.cangoleft = True 
```

看起来你走得很远，因此将你的精灵放在屏幕边缘。

希望这可以帮助。

# r - 蒙特卡罗模拟二重积分

> ID：11890732
> 
> 赞同：3
> 
> 时间：2012-08-09T14:13:08.007
> 
> 标签：r

> **可能重复：**
> [快速计算 R 中的双积分](https://stackoverflow.com/questions/8913603/calculating-double-integrals-in-r-quickly)

来自布劳恩和默多克的问题，*蒙特卡洛模拟*：

> doubleintegral: 积分(从 0 到 1) 积分(从 0 到 1) fct'n: cos(xy) I-constants: dxdy

对于只有“dx”的积分，我使用类似的东西：

```
integrand <- function(x)
 {
    exp(x)
 }
integrate(integrand, lower = 1, upper = pi) $value 
```

谁能给我一个提示，如何在 R-Code 中编写双积分？

# asp.net - 如何从页面代码中的公共变量中分配 radwindow 属性值？

> ID：11890733
> 
> 赞同：0
> 
> 时间：2012-08-09T19:38:36.013
> 
> 标签：asp.net, c#-4.0, telerik

我有一个 radwindow，我正在尝试这样做

```
<telerik:RadWindow ID="winQuote" runat="server" NavigateUrl="popupQuote.aspx?serie=<%=  strSerie %>" Behaviors="Resize, Close, Maximize, Move"> 
```

当我使用代码隐藏或 javascript 获取属性**serie**的值时，它返回：serie=<%= strSerie %>。

它没有解析 <%= serie%> 标签，它就像文本一样使用它，我的朋友们有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T14:33:39.587

只需在代码隐藏中设置它。如果您在客户端上需要此类功能，请使用 JavaScript - 请参阅 RadWinddow 客户端 API：[http](http://www.telerik.com/help/aspnet-ajax/window-programming-radwindow-methods.html) ://www.telerik.com/help/aspnet-ajax/window-programming-radwindow-methods.html和 setUrl() 方法显示后可以调用。

# android - 如何正确保护使用应用内购买和本地数据库的应用程序

> ID：11890734
> 
> 赞同：6
> 
> 时间：2012-08-09T19:38:38.477
> 
> 标签：android, security

我目前正在为 Android 开发一款益智游戏，我希望在完成后具有以下功能：

*   免费播放（支持广告），因此需要有效的互联网连接（如果无法显示广告则无法播放）
*   应用内购买选项以删除广告和连接检查
*   额外内容的应用内购买

但是我意识到有很多问题源于我的要求......

1.  拥有一个版本并提供通过应用内购买删除广告的选项而不是在 Play 商店中拥有两个版本的游戏是个好主意吗？也许拥有 2 个单独的应用程序是一个更好的主意，但是，我如何在这 2 个应用程序之间共享数据？例如，如果用户购买了免费版本的附加内容，然后决定购买无广告版本，我希望他在免费版本中购买的内容也可以在他的付费版本中使用。

2.  确保游戏不会被“黑客”以免费获取附加内容的最佳做法是什么？我了解新内容不应包含在原始应用程序中，并且在购买后单独下载，但我可以做些什么来防止购买了某些内容的用户无法自由重新分发？毕竟，“下载其他内容”只是联系服务器获取数据，然后将其添加到本地数据库。

3.  我看到实现“无广告和离线播放”版本（在 Play 商店中没有 2 个不同版本）的唯一方法是更新本地数据库中的一个简单字段，但这似乎不是一个聪明的解决方案，因为那时精通技术的用户只需自己切换此位即可解锁无广告版本，防止这种情况的最佳方法是什么？

谢谢！

ps 好吧，答案并没有倾泻而出……如果您想回答这个问题，请投票以提高知名度！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:50:49.350

好吧，普通用户不太可能超出 /data 分区（应用程序数据），但如果您可以安全起见；您可以使用 SqlCipher（数据库文件的透明 256 位 AES 加密）。

您可以检查，例如：

[http://sqlcipher.net/sqlcipher-for-android/](http://sqlcipher.net/sqlcipher-for-android/)

谢谢，穆尼什

# android - 景观粉碎标签文字achartengine

> ID：11890736
> 
> 赞同：2
> 
> 时间：2012-08-09T19:38:40.210
> 
> 标签：android, achartengine

我正在使用图表框架 achartengine 创建一个简单的水平条形图，但是每当我将其切换到横向时，它都会破坏标签文本，使其几乎无法阅读。这就是我初始化图表的方式：

```
 renderer = new XYMultipleSeriesRenderer();
    dataset = new XYMultipleSeriesDataset();
    seriesRenderer = new XYSeriesRenderer();
    series = new CategorySeries("Episodes");

    renderer.setOrientation(Orientation.VERTICAL); //display the bars horizontally
    //allow the chart to scroll up and down, but not left to right
    renderer.setPanEnabled(true, false);
    renderer.setZoomEnabled(true,false);

    renderer.setXLabelsAlign(Align.LEFT);
    renderer.setLabelsTextSize(20);
    renderer.setXLabels(0);
    renderer.setBarSpacing(.25);

    int[] margins = new int[]{0,0,20,20};
    renderer.setMargins(margins);

    renderer.setYTitle("Engagements");
    renderer.setXAxisMin(0);
    renderer.setXAxisMax(5);
    renderer.setYAxisMin(0);

    renderer.setShowLegend(false);
    renderer.setLegendHeight(0);
    renderer.setXLabelsColor(Color.rgb(10,94,143));
    renderer.setYLabelsColor(0, Color.DKGRAY);
    //cause the margins to be clear
    renderer.setMarginsColor(Color.WHITE);

    //change the series color
    seriesRenderer.setColor(Color.rgb(149,209,240));

    //add the series renderer to the renderer
    renderer.addSeriesRenderer(seriesRenderer); 
```

这是肖像的样子：http: [//www.flickr.com/photos/84608958@N02/7748322920/](http://www.flickr.com/photos/84608958@N02/7748322920/)

这就是它在风景中的全部粉碎：http: [//www.flickr.com/photos/84608958@N02/7748322690/](http://www.flickr.com/photos/84608958@N02/7748322690/)

任何帮助/建议将不胜感激，感谢您的宝贵时间！

注意：我已经尝试调整文本大小，粉碎效果仍然存在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T04:58:30.660

对我来说，这是有效的：

试试这个`renderer.setOrientation(Orientation.VERTICAL);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:54:33.387

水平条形图仅作为 AChartEngine 中的一些原型开发。最后它被包含在发行版中，因为许多用户需要它。但是，有一天它会得到改进，因为它存在很多问题。请参阅问题[#203](http://code.google.com/p/achartengine/issues/detail?id=203)。

# javascript - 我可以使用 jquery 来删除/否定 css ！important 规则吗？

> ID：11890739
> 
> 赞同：21
> 
> 时间：2012-08-09T19:38:53.740
> 
> 标签：javascript, jquery, css

如果有使用的 CSS 规则，`!important`有没有办法删除该`!important`规则，以便我可以使用 JS 或 jQuery 进行进一步的下游样式更改？

**他们的.css**

```
div.stubborn { display: none !important; } 
```

**我的.js**

```
$('.stubborn').fadeIn();  // won't work because of !important flag 
```

不幸的是，我无法控制应用`!important`规则的样式，所以我需要一个变通方法。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-08-09T19:48:24.620

`!important`不幸的是，如果不使用`!important`包含的内联/内部样式，则无法覆盖`theirs.css`。

您可以定义`!important`样式并将其添加到`.stubborn`然后调整不透明度。见下文，

**CSS：**

```
div.hidden_block_el { 
   display: block !important;
   opacity: 0;
} 
```

**JS：**

```
$('.stubborn')
    .addClass('hidden_block_el')
    .animate({opacity: 1}); 
```

**演示：http:** [//jsfiddle.net/jjWJT/1/](http://jsfiddle.net/jjWJT/1/)

替代方法（内联），

```
$('.stubborn')
    .attr('style', 'display: block !important; opacity: 0;')
    .animate({opacity: 1}); 
```

**演示：http:** [//jsfiddle.net/jjWJT/](http://jsfiddle.net/jjWJT/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-09T19:58:07.797

只需将`style=""`标签添加到任何有此问题的图像，希望它们都有某种定义类，这样做很容易。

```
$('div.stubborn').attr('style', 'display: inline !important;');​ 
```

[**jsFiddle 演示**](http://jsfiddle.net/UCAcr/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T19:45:40.557

您需要创建一个新类来应用淡入淡出。

CSS：

```
div.stubborn { display: none !important; }
div.stubborn.fade-ready { display: block !important; opacity: 0; } 
```

JS：

```
$('.stubborn').addClass('fade-ready').animate({opacity: 1}); //to show
$('.stubborn').fadeOut(function() {$(this).removeClass('fade-ready');}); //to hide 
```

**[在这里](http://jsfiddle.net/kuQej/5/)演示**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T19:44:00.053

您可以添加一个新的 CSS 样式，其中添加了 !important 将覆盖原始样式

这是来自javascript中的另一个答案：

```
function addNewStyle(newStyle) {
var styleElement = document.getElementById('styles_js');
if (!styleElement) {
    styleElement = document.createElement('style');
    styleElement.type = 'text/css';
    styleElement.id = 'styles_js';
    document.getElementsByTagName('head')[0].appendChild(styleElement);
}
styleElement.appendChild(document.createTextNode(newStyle));
}

 addNewStyle('td.EvenRow a {display:inline !important;}') 
```

这个答案在[这里](https://stackoverflow.com/questions/462537/overriding-important-style-using-javascript)

我也相信你可以添加这样的样式

```
 .css({ 'display' : 'block !important' }); 
```

在 jQuery 中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-05T16:50:39.377

我尝试了几种方法，但通过在单独的类中添加 CSS 样式（！important），然后使用 jQuery 删除，我获得了最好的结果：

CSS：

```
.important-css-here { display: block !important;} 
```

在 jQuery 中：

```
$("#selector").addClass("important-css-here"); 
```

然后，当我需要时：

```
$("#selector").removeClass("important-css-here"); 
```

像魅力一样工作;-)

# git - git error: couldn't connect to host while accessing

> ID：11890740
> 
> 赞同：24
> 
> 时间：2012-08-09T19:39:00.397
> 
> 标签：git

Am getting the following error while trying to pull/push or create new-clone

error: couldn't connect to host while accessing [https://github.com/user/pack.git/info/refs](https://github.com/user/pack.git/info/refs) fatal: HTTP request failed

when i googled, people suggested to setup http_proxy.. but i don't understand it or i don't know to setup it.. am totally stuck up with it..

i don't know how to overcome these issues..

any help would be appreciated..

NB: note that i was able to use git before couple of days.. in the last couple of days it has been screwed up.. please help..

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2015-02-18T06:02:12.410

```
git config --global --unset http.proxy 
git config --global --unset https.proxy 
```

为我工作

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-05-04T02:52:53.200

这发生在我运行 Ubuntu 12.04 的 Vagrant VirtualBox VM 上。vagrant 实例已经运行了好几天。我重新启动了虚拟机`vagrant reload`（

原因是什么？没有把握。别人可以推测。但是，为了确定，我总是喜欢[重新启动三次](http://www.youtube.com/watch?v=W8_Kfjo3VjU)；）

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-05-14T06:26:17.110

当我更改笔记本电脑连接的网络时，我遇到了同样的错误。编辑 /etc/resolv.conf 正确解决了问题：

```
nameserver 8.8.8.8 
```

将 resolv.conf 设为空白并重新启动也可能会解决它。

在 debian 2.6.32-5-amd64 + VirtualBox 4.2.12 上。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-10-31T17:18:29.490

我给出了以下命令来重新启动我的网络服务。这肯定会起作用：

```
service network restart 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-21T01:46:26.863

当我想在 github 上推送代码时，我遇到了同样的错误。问题是我弄乱了我的 Ubuntu 机器上的一些环境变量。发生这种情况是因为我想在 google chrome 上使用手动代理。

如果您使用的是 linux，请使用以下命令查看是否`http_proxy`设置`https_proxy`为某个 IP 地址。

```
env | grep http_proxy 
```

然后使用下面的命令来`unset`取这两个变量的值。

```
unset http_proxy
unset https_proxy 
```

再次尝试使用 git。如果它不起作用，请重新启动。它对我有用。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-10T12:50:15.987

如果这是您控制的存储库，一种解决方案是使用[SSH 密钥](https://help.github.com/articles/generating-ssh-keys)而不是 HTTP 来访问存储库。通过删除遥控器相应地更新您的遥控`origin`器：

```
git remote rm origin
git remote add origin <ssh_path_from_github> 
```

您可以在 github 中找到 ssh 路径：

![SSH github访问](../Images/4719c1ec34670f1fe0b3ca5ecb9774ca.png)

请务必`ssh://`在重新添加遥控器时为其开头。如果这不起作用，那么我们将查看 http 代理设置，但根据您的虚假 github 链接，我希望它是您控制的存储库。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-03-28T23:31:17.480

我在 Visual Studio 2013 中遇到了类似的错误：

```
An error occurred. Detailed message: An error was raised by libgit2\. Category = Net (Error).
An error occurred while sending the request. 
```

然后我尝试使用 Git GUI：

```
Pushing to https://leniel@bitbucket.org/myrepo/bhp.git
error: Couldn't resolve host 'bitbucket.org' while accessing https://leniel@bitbucket.org/myrepo/bhp.git/info/refs?service=git-receive-pack
fatal: HTTP request failed 
```

你猜怎么着……我`Parallels Virtual Machine`当时没有互联网连接。重新建立互联网连接后，我可以推送我的提交。:) 不敢相信发生了这样的事。我们已经习惯了始终保持互联网连接。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-10-30T09:14:47.857

我非常简单的解决方案是首先克隆空的新仓库。然后我删除了项目中的 .git 文件夹，并将所有项目文件和文件夹移动到新的 repo 文件夹中。然后我将目录更改为该文件夹，然后运行`add`​​、`commit`和`push`命令。一切运作良好。

在尝试这个解决方案之前，我没有先克隆 git repo。我的项目文件夹和 repo 具有相同的名称，我运行了`git init`, `add`, `commit`, 并设置了上游，但`push`给了我一个错误（无法连接到主机）。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-11-12T04:16:01.773

尝试使用不同的 linux 用户进行拉取时出现相同的错误。

```
ls -lah
whoami 
```

确保当前用户与该文件夹的所有者相同。

# c# - DataGrid doesn't show nested classes

> ID：11890743
> 
> 赞同：1
> 
> 时间：2012-08-09T19:39:19.827
> 
> 标签：c#, wpf, wpfdatagrid

I want my DataGrid in WPF show nested classes into my objects. I'm using NHibernate to retrieve data.

My Model class:

```
public class PublishedBook
{
    public virtual long ID { get; set; }
    public virtual string Title { get; set; }
    public virtual YearSemester BookYearSemester { get; set; }

    public override string ToString()
    {
        return string.Format("{0} ({1})", Title, BookYearSemester);
    }
}
public class YearSemester 
{
    public virtual long ID { get; set; }
    public virtual string Description { get; set; }

    public override string ToString()
    {
        return Description;
    }
} 
```

My Repository class:

```
public class PublishedBookRepository : BaseRepository
{
    public PublishedBookRepository(ISession objCurrentSession) :
        base(objCurrentSession) { }

    public IEnumerable<PublishedBook> GetAllPublishedBooks()
    {
        return base.CurrentSession
            .CreateCriteria<PublishedBook>()
            .List<PublishedBook>();
    }
} 
```

My XAML Code:

```
<DataGrid x:Name="dagtagridPublishedBooks" AutoGenerateColumns="False">
    <DataGrid.Columns>
        <DataGridTextColumn Header="Title" Binding="{Binding Title}" />
        <DataGridTextColumn Header="YearSemester" Binding="{Binding YearSemester}" />
    </DataGrid.Columns>
</DataGrid> 
```

In the second column, the data isn't displayed. Anyone knows why? Thanks, guys!!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:55:24.810

第二列的绑定路径应该是属性名：`BookYearSemester`，而不是类名`YearSemester`。尝试：

```
<DataGrid x:Name="dagtagridPublishedBooks" AutoGenerateColumns="False">
    <DataGrid.Columns>
        <DataGridTextColumn Header="Title" Binding="{Binding Title}" />
        <DataGridTextColumn Header="YearSemester" Binding="{Binding BookYearSemester}" />
    </DataGrid.Columns>
</DataGrid> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-22T09:59:39.340

因为`YearSemester`是一个类，所以您可以使用完整路径来显示其属性，例如`BookYearSemester.ID`或，或者使用将被替换为类对象`BookYearSemester.Description`的自定义模板`DataTemplate`

# ruby-on-rails - 带有 Twitter Bootstrap 的 Rails：仍然服务于旧资产

> ID：11890749
> 
> 赞同：13
> 
> 时间：2012-08-09T19:39:53.860
> 
> 标签：ruby-on-rails, web-applications, twitter-bootstrap, asset-pipeline, browser-cache

在这里发疯。我正在开发一个 Rails 应用程序，并且我正在使用 twitter-bootstrap-rails gem 来在我的应用程序中包含 Twitter Bootstrap 样式。这个 gem 在 app/assets/stylesheets 中生成一个名为“bootstrap_and_overrides.css.less”的文件，我一直在使用它来修改一些引导变量并包含我自己的 CSS 覆盖。

直到今天，一切都运行良好。出于某种原因，我今天对该文件所做的更改正在保存到该文件中，但 Rails 仍在为该文件的旧版本提供服务！我在任何地方都没有找到该文件的预编译版本（公共/资产中没有）......只有我一直在修改的资产/样式表中的那个。就应用程序中的目录而言，一切看起来都很好，但是当我启动 rails 服务器、加载页面并使用元素检查器查看样式表时，它使用的是旧版本的“bootstrap_and_overrides.css.less”与我已删除的规则。我已经在浏览器中关闭了缓存，并在 4 种不同的浏览器中尝试过，所以我很确定这不是浏览器缓存的结果。

rails 资产管道似乎只是为不存在的文件版本提供服务！有人知道为什么会发生这种情况吗？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-09T20:11:27.847

修复。

资产管道将缓存版本存储在*tmp/cache*中。

我运行`rake tmp:clear`，删除了其中的所有文件，*然后*rails 提供了我想要的 *bootstrap_and_overrides.css.less* 版本。

为什么缓存版本突然停止更新我无法理解。啊啊啊！

# html - min-width, max-width css 使用最小宽度

> ID：11890750
> 
> 赞同：7
> 
> 时间：2012-08-09T19:39:59.343
> 
> 标签：html, css

好吧，所以我希望做的是创建一个 DIV，它将根据其中的内容自动调整大小，但它应该使用尽可能小的宽度。我不知道如何做到这一点。

所以，如果我有一个 DIV 标签，它有 3 个字符，毫无疑问是在 200 像素以下，我想要的是 div 是 200 像素。如果有更多文本，我希望它自动调整大小，以便文本适合。

**这可能只用 ***CSS* 吗？****

****更新****

让我看看我是否可以更好地解释这一点。我有一个 DIV：

```
+++++++++++++++++++++++++++++++++
|-------------------------------|
|-----text this longer text-----|
|-------------------------------|
+++++++++++++++++++++++++++++++++ 
```

我希望发生的是，如果文本被更改，它仍然至少是 200px 宽。像这样：

```
+++++++++++++++++++++++++++++++++
|-------------------------------|
|-------------text--------------|
|-------------------------------|
+++++++++++++++++++++++++++++++++ 
```

但如果它是更长的文本，那么第一个示例将继续向外扩展超过 200 像素宽：

```
++++++++++++++++++++++++++++++++++++++++++++++++++++++
|----------------------------------------------------|
|-----text this longer texttext this longer text-----|
|----------------------------------------------------|
++++++++++++++++++++++++++++++++++++++++++++++++++++++ 
```

但是，我确实有一个限制（有限的空间），所以我需要给它一个最大的宽度。这有意义还是我需要进一步澄清？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-10T12:59:29.347

问题在于，由于`<div>`s 是块级元素，它们不会自动调整大小以适应其内容，尽管它们的宽度可以明确定义。内联元素喜欢`<span>`​​自动调整大小以适应它们的内容，但它们不接受通过*CSS*定义它们的宽度。解决方法是让你的`<div>`行为有点像表格单元格。这是一个例子：

CSS：

```
.widthlim {
    min-width: 200px;
    max-width: 1000px;
    background-color: red; /*This is just for us to be able to see the width*/
    display: table-cell;
    word-wrap: break-word;
    word-break: break-word;
} 
```

HTML：

```
Example 1:<br/>
<div class = "widthlim">
Hello
</div>
Example 2:<br/>
<div class = "widthlim">
Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello
</div>
Example 3:<br/>
<div class = "widthlim">
Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello Hello 
</div> 
```

（注意我们必须在`<br/>`s 之前添加 s ，`<div>`因为它们不再是完全块级的）。
这是渲染时的样子： ![上面呈现的例子](../Images/e1d5e453f377cc5c93ebdd735c54a9d8.png) 这似乎适用于 Firefox、Chrome 和 IE8（对于 IE8，您需要指定 DOCTYPE）。我希望这有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T19:52:16.357

您可以通过几种不同的方式“收缩包装”一个 div。最简单的可能是，`display: inline;`但浮动也会像你描述的那样表现。

查看[http://haslayout.net/css-tuts/CSS-Shrink-Wrap](http://haslayout.net/css-tuts/CSS-Shrink-Wrap)了解详细信息和更多方法。

如果您希望最小宽度为 200 像素（与您的第一段相矛盾），您可以使用`min-width: 200px;`with`display: inline-block`例如。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T19:52:02.893

如果我正确理解了您的问题，`<div>`则 s 是块元素，这意味着默认情况下它们将占据一整行 -屏幕宽度的**100%**。尝试使用该`<span>`元素。

希望对您有所帮助，但如果您指定您想要做或实现的行为，我们可以为您提供更多帮助。

# facebook - Is there a way to merge Facebook's /me/statuses , /me/home , me/feeds?

> ID：11890751
> 
> 赞同：0
> 
> 时间：2012-08-09T19:40:07.010
> 
> 标签：facebook, facebook-graph-api, facebook-like, facebook-javascript-sdk

I want to display on a website all of these 3\. I haven't found a way of doing so together, only in 3 separate sections.

I was reading there is a way of querying but not sure how to build this query to pull all 3 (me/statuses , me/home , me/feed) and have them in chronological order and show comments/likes as well.

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T01:17:05.403

您的应用程序必须遍历结果并根据需要合并它们。您可能想要使用批处理请求，因此您只需发出 1 个请求而不是 3 个请求，但是数据仍会以未合并的方式返回。

# css - 基本 CSS 菜单问题

> ID：11890755
> 
> 赞同：-1
> 
> 时间：2012-08-09T19:40:20.740
> 
> 标签：css

我最近一直在学习 ASP.NET MVC，除了我对 CSS 的了解开始限制我之外，一切都很顺利，尤其是下面的问题。

在下图中，我了解了大部分定位和格式，但是我不知道如何使所有选项卡都像橙色`<li>`块一样宽（忽略所涉及的填充）。

![CSS 菜单](../Images/3e980de98f60110e6346241a25e92866.png)

这是我的CSS：

```
ul#adminmenu {
    border-bottom: 1px #5C87B2 solid;
    padding: 0 0 2px;
    position: relative;
    margin: 0;
    text-align: left;
}

ul#adminmenu li {
    padding: 10px 20px;
    display: list-item;
    background-color: Orange;
    list-style: none;   
}

ul#adminmenu li a {
    padding: 10px 20px;
    font-weight: bold;
    text-decoration: none;
    line-height: 2.8em;
    background-color: #e8eef4;
    color: #034af3;
    border-radius: 4px 4px 0 0;
    -webkit-border-radius: 4px 4px 0 0;
    -moz-border-radius: 4px 4px 0 0;
} 
```

这是相关的HTML：

```
<header>
    <div id="admintitle">
        <h1>Administration</h1>
    </div>  
</header>
<section id="adminmain">
    <div id="div-1a">@* class="page">*@
        <nav>
            <ul id="adminmenu">
                <li>@Html.ActionLink("Home", "Index", "Home")</li>
                <li>@Html.ActionLink("Contracts", "List", "Contract"</li>
                <li id="admin">@Html.ActionLink("Administration", "Administration", "Home")</li>
                <li>@Html.ActionLink("About", "About", "Home")</li>
        </ul>
    </nav>
</div> 
```

如果需要更多信息，请询问。

非常感谢您的任何建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T19:44:41.100

您可以使链接显示块，这将导致它占用所有可用空间。您可能必须更改填充以使其看起来像您想要的那样。

```
ul#adminmenu li a {
    display: block;
} 
```

# hibernate - Hibernate giving Repeated Column in mapping for entitiy .... but it doesn't look like there is a duplicate

> ID：11890762
> 
> 赞同：0
> 
> 时间：2012-08-09T19:40:41.793
> 
> 标签：hibernate, jpa

I have project which is currently failing to deploy successfully. During deployment I get the following exception

Caused by: javax.persistence.PersistenceException: org.hibernate.MappingException: Repeated column in mapping for entity: com.bedbath.amsSched.model.AgreementVendor column: AGRMTID (should be mapped with insert="false" update="false")

I don't however see any duplicate coloumn. I have read some other posts and have tried adding insertable=false, updatable=false on the AGRMTID coloum as suggested, but it did not work.

Here is the entity class

```
package com.bedbath.amsSched.model;

import java.util.HashSet;
import java.util.Set;
import javax.persistence.CascadeType;
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.FetchType;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.OneToMany;
import javax.persistence.Table;
import javax.persistence.Transient;

/**
 * AgreementVendor entity. @author MyEclipse Persistence Tools
 */
@Entity
@Table(name = "AMPGVNDR", schema = "WEBQA")
public class AgreementVendor implements java.io.Serializable
{
private static final long serialVersionUID = -7147948264083644942L;
private Integer agreementVendorId;
private Agreement agreement;
private AgreementVendorTypeCode agreementVendorTypeCode;
private String vendorJdaId;
private String vendorName;
private String vendorType;
private String agreementVendorBuyerId;
private String agreementVendorBuyerName;
private AgreementConcept agreementConcept;
private String termsDescription;
private String newStoreTermsDays;
private String newStoreTermsPercent;
private boolean primaryVendor;
private Set<AgreementVendorNetSalesContact> agreementVendorNSCs = new HashSet<AgreementVendorNetSalesContact>(0);

// Constructors

/** default constructor */
public AgreementVendor()
{
}

/** minimal constructor */
public AgreementVendor(Integer agvndrid)
{
    this.agreementVendorId = agvndrid;
}

/** full constructor */
public AgreementVendor(Integer agvndrid, Agreement agreement, AgreementVendorTypeCode agreementVendorTypeCode, String jdaid)
{
    this.agreementVendorId = agvndrid;
    this.agreement = agreement;
    this.agreementVendorTypeCode = agreementVendorTypeCode;
    this.vendorJdaId = jdaid;
}

// Property accessors
@Id
@GeneratedValue(strategy = GenerationType.AUTO)
@Column(name = "AGVNDRID", unique = true, nullable = false, precision = 5, scale = 0)
public Integer getAgreementVendorId()
{
    return agreementVendorId;
}

public void setAgreementVendorId(Integer agreementVendorId)
{
    this.agreementVendorId = agreementVendorId;
}

@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "AGRMTID")
public Agreement getAgreement()
{
    return this.agreement;
}

public void setAgreement(Agreement agreement)
{
    this.agreement = agreement;
}

@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "VNDTYCID")
public AgreementVendorTypeCode getAgreementVendorTypeCode()
{
    return this.agreementVendorTypeCode;
}

public void setAgreementVendorTypeCode(AgreementVendorTypeCode agreementVendorTypeCode)
{
    this.agreementVendorTypeCode = agreementVendorTypeCode;
}

@Column(name = "JDAID", length = 50)
public String getVendorJdaId()
{
    return vendorJdaId;
}

public void setVendorJdaId(String vendorJdaId)
{
    this.vendorJdaId = vendorJdaId;
}

@Column(name = "AGRMTVNM", length = 50)
public String getVendorName()
{
    return vendorName;
}

public void setVendorName(String vendorName)
{
    this.vendorName = vendorName;
}

@Column(name = "VNDTYP", length = 1)
public String getVendorType()
{
    return vendorType;
}

public void setVendorType(String vendorType)
{
    this.vendorType = vendorType;
}

@Column(name = "VNDBYRNUM", length = 3)
public String getAgreementVendorBuyerId()
{
    return agreementVendorBuyerId;
}

public void setAgreementVendorBuyerId(String agreementVendorBuyerId)
{
    this.agreementVendorBuyerId = agreementVendorBuyerId;
}

@Column(name = "VNDBYRNM", length = 20)
public String getAgreementVendorBuyerName()
{
    return agreementVendorBuyerName;
}

public void setAgreementVendorBuyerName(String agreementVendorBuyerName)
{
    this.agreementVendorBuyerName = agreementVendorBuyerName;
}

@Column(name = "VNDPRIM")
public boolean isPrimaryVendor()
{
    return primaryVendor;
}

public void setPrimaryVendor(boolean primaryVendor)
{
    this.primaryVendor = primaryVendor;
}

@Transient
public String getTermsDescription()
{
    return termsDescription;
}

public void setTermsDescription(String termsDescription)
{
    this.termsDescription = termsDescription;
}

@Transient
public String getNewStoreTermsDays()
{
    return newStoreTermsDays;
}

public void setNewStoreTermsDays(String newStoreTermsDays)
{
    this.newStoreTermsDays = newStoreTermsDays;
}

@Transient
public String getNewStoreTermsPercent()
{
    return newStoreTermsPercent;
}

public void setNewStoreTermsPercent(String newStoreTermsPercent)
{
    this.newStoreTermsPercent = newStoreTermsPercent;
}

@ManyToOne(fetch = FetchType.LAZY)
@JoinColumn(name = "AGCONID")
public AgreementConcept getAgreementConcept()
{
    return agreementConcept;
}

public void setAgreementConcept(AgreementConcept agreementConcept)
{
    this.agreementConcept = agreementConcept;
}

@Override
public int hashCode()
{
    final int prime = 31;
    int result = 1;
    result = prime * result + ((vendorJdaId == null) ? 0 : vendorJdaId.hashCode());
    result = prime * result + ((vendorName == null) ? 0 : vendorName.hashCode());
    return result;
}

@Override
public boolean equals(Object obj)
{
    if (this == obj)
        return true;
    if (obj == null)
        return false;
    if (getClass() != obj.getClass())
        return false;
    AgreementVendor other = (AgreementVendor) obj;
    if (vendorJdaId == null)
    {
        if (other.vendorJdaId != null)
            return false;
    }
    else if (!vendorJdaId.equals(other.vendorJdaId))
        return false;
    if (vendorName == null)
    {
        if (other.vendorName != null)
            return false;
    }
    else if (!vendorName.equals(other.vendorName))
        return false;
    return true;
}

@OneToMany(cascade = CascadeType.ALL, fetch = FetchType.LAZY, mappedBy = "agreementVendor")
public Set<AgreementVendorNetSalesContact> getAgreementVendorNSCs()
{
    return agreementVendorNSCs;
}

public void setAgreementVendorNSCs(Set<AgreementVendorNetSalesContact> agreementVendorNSCs)
{
    this.agreementVendorNSCs = agreementVendorNSCs;
}

@Override
public String toString()
{
    return vendorName;
}
} 
```

Any thoughts would be appreciated. Thanks -Jim

# java - Maven and Spring, using @FormDataParam gives missing dependency errors

> ID：11890763
> 
> 赞同：1
> 
> 时间：2012-08-09T19:40:46.813
> 
> 标签：java, spring, maven, jersey, multipart

I'm trying to use `@FormDataParam` to easily support multipart uploads. I'm able to compile all the sources fine. But, when running, I get the following error in the console:

```
SEVERE: Missing dependency for method public java.lang.String com.fluxtream.api.TimeZoneStore.getTimeZoneMapping(java.lang.String) at parameter at index 0
SEVERE: Method, public java.lang.String com.fluxtream.api.TimeZoneStore.getTimeZoneMapping(java.lang.String), annotated with GET of resource, class com.fluxtream.api.TimeZoneStore, is not recognized as valid resource method. 
```

That isn't the method that's going to use the annotation. But, I just set that up to get the error to output, since I reverted my old changes. The method header is:

```
@GET
@Path("/mapping")
@Produces({MediaType.APPLICATION_JSON})
public String getTimeZoneMapping(@FormDataParam("uid") String uid) 
```

The pom.xml configuration:

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
<modelVersion>4.0.0</modelVersion>
<groupId>com.fluxtream</groupId>
<artifactId>fluxtream-app</artifactId>
<version>1.0</version>
<packaging>pom</packaging>
<modules>
    <module>fluxtream-core</module>
    <module>fluxtream-core-webapp</module>
    <module>fluxtream-connectors</module>
    <module>fluxtream-web</module>
</modules>
<build>
    <resources>
        <resource>
            <directory>src/main/resources</directory>
            <filtering>true</filtering>
        </resource>
    </resources>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.1</version>
            <configuration>
                <source>1.6</source>
                <target>1.6</target>
                <encoding>UTF-8</encoding>
            </configuration>
        </plugin>
    </plugins>
</build>
<repositories>
    <repository>
        <id>Github Imaginatio</id>
        <url>https://github.com/Imaginatio/Maven-repository/raw/master</url>
    </repository>
</repositories>
<dependencies>
    <dependency>
        <groupId>com.ocpsoft</groupId>
        <artifactId>ocpsoft-pretty-time</artifactId>
        <version>1.0.7</version>
    </dependency>
    <dependency>
        <groupId>com.postmark</groupId>
        <artifactId>postmark-client</artifactId>
        <version>0.3.1</version>
        <exclusions>
            <exclusion>
                <artifactId>spring-core</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-beans</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-context</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-context-support</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>mysql</groupId>
        <artifactId>mysql-connector-java</artifactId>
        <version>5.1.13</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-core</artifactId>
        <version>${hibernate.version}</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-entitymanager</artifactId>
        <version>${hibernate.version}</version>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.5.10</version>
    </dependency>
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.1</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.easymock</groupId>
        <artifactId>easymock</artifactId>
        <version>2.5.2</version>
        <scope>test</scope>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-core</artifactId>
        <version>${spring.version}</version>
        <exclusions>
            <exclusion>
                <artifactId>spring-core</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-context</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-aop</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-beans</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-expression</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-web</artifactId>
        <version>${spring.version}</version>
        <exclusions>
            <exclusion>
                <artifactId>spring-web</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-beans</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-expression</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-context</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-aop</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-core</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>commons-dbcp</groupId>
        <artifactId>commons-dbcp</artifactId>
        <version>1.2.2</version>
    </dependency>
    <dependency>
        <groupId>commons-logging</groupId>
        <artifactId>commons-logging</artifactId>
        <version>1.1.1</version>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>servlet-api</artifactId>
        <version>2.5</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>javax.servlet</groupId>
        <artifactId>jstl</artifactId>
        <version>1.2</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-webmvc</artifactId>
        <version>${spring.version}</version>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-aspects</artifactId>
        <version>${spring.version}</version>
        <exclusions>
            <exclusion>
                <artifactId>spring-beans</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-context</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-context-support</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-orm</artifactId>
        <version>${spring.version}</version>
        <exclusions>
            <exclusion>
                <artifactId>spring-core</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-beans</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-jdbc</artifactId>
        <version>${spring.version}</version>
        <exclusions>
            <exclusion>
                <artifactId>spring-core</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-beans</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework</groupId>
        <artifactId>spring-tx</artifactId>
        <version>${spring.version}</version>
        <exclusions>
            <exclusion>
                <artifactId>spring-core</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-beans</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-context</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-aop</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>google</groupId>
        <artifactId>gdata-calendar</artifactId>
        <version>2.0</version>
    </dependency>
    <dependency>
        <groupId>com.google.api.client</groupId>
        <artifactId>google-api-client</artifactId>
        <version>1.1.1-alpha</version>
    </dependency>
    <dependency>
        <groupId>xpp3</groupId>
        <artifactId>xpp3</artifactId>
        <version>1.1.4c</version>
    </dependency>
    <dependency>
        <groupId>dom4j</groupId>
        <artifactId>dom4j</artifactId>
        <version>1.6.1</version>
    </dependency>
    <dependency>
        <groupId>jaxen</groupId>
        <artifactId>jaxen</artifactId>
        <version>1.1.1</version>
    </dependency>
    <dependency>
        <groupId>google</groupId>
        <artifactId>collect</artifactId>
        <version>1.0</version>
    </dependency>
    <dependency>
        <groupId>gdata</groupId>
        <artifactId>client</artifactId>
        <version>1.0</version>
    </dependency>
    <dependency>
        <groupId>gdata</groupId>
        <artifactId>core</artifactId>
        <version>1.0</version>
    </dependency>
    <dependency>
        <groupId>gdata</groupId>
        <artifactId>contacts</artifactId>
        <version>3.0</version>
    </dependency>
    <dependency>
        <groupId>gdata</groupId>
        <artifactId>contacts-meta</artifactId>
        <version>3.0</version>
    </dependency>
    <dependency>
        <groupId>gdata</groupId>
        <artifactId>media</artifactId>
        <version>1.0</version>
    </dependency>
    <dependency>
        <groupId>gdata</groupId>
        <artifactId>photos</artifactId>
        <version>2.0</version>
    </dependency>
    <dependency>
        <groupId>gdata</groupId>
        <artifactId>photos-meta</artifactId>
        <version>2.0</version>
    </dependency>
    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.15</version>
        <exclusions>
            <exclusion>
                <groupId>com.sun.jmx</groupId>
                <artifactId>jmxri</artifactId>
            </exclusion>
            <exclusion>
                <groupId>com.sun.jdmk</groupId>
                <artifactId>jmxtools</artifactId>
            </exclusion>
            <exclusion>
                <groupId>javax.mail</groupId>
                <artifactId>mail</artifactId>
            </exclusion>
            <exclusion>
                <groupId>javax.jms</groupId>
                <artifactId>jms</artifactId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-config</artifactId>
        <version>${spring.version}</version>
        <exclusions>
            <exclusion>
                <artifactId>spring-beans</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-context</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-aop</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-core</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>commons-io</groupId>
        <artifactId>commons-io</artifactId>
        <version>2.0.1</version>
    </dependency>
    <dependency>
        <groupId>commons-httpclient</groupId>
        <artifactId>commons-httpclient</artifactId>
        <version>3.1</version>
        <type>jar</type>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>javax.mail</groupId>
        <artifactId>mail</artifactId>
        <version>1.4.3</version>
    </dependency>
    <dependency>
        <groupId>activation</groupId>
        <artifactId>activation</artifactId>
        <version>1.0.2</version>
    </dependency>
    <dependency>
        <groupId>org.apache.velocity</groupId>
        <artifactId>velocity</artifactId>
        <version>1.7</version>
    </dependency>
    <dependency>
        <groupId>com.linkedin</groupId>
        <artifactId>linkedin-j</artifactId>
        <version>1.0</version>
        <type>jar</type>
    </dependency>
    <dependency>
        <groupId>oauth.signpost</groupId>
        <artifactId>signpost-core</artifactId>
        <version>1.2.1.1</version>
        <type>jar</type>
    </dependency>
    <dependency>
        <groupId>com.googlecode.json-simple</groupId>
        <artifactId>json-simple</artifactId>
        <version>1.1</version>
    </dependency>
    <dependency>
        <groupId>net.sf.json-lib</groupId>
        <artifactId>json-lib</artifactId>
        <version>2.4</version>
        <classifier>jdk15</classifier>
    </dependency>
    <dependency>
        <groupId>oauth.signpost</groupId>
        <artifactId>signpost-commonshttp4</artifactId>
        <version>1.2.1.1</version>
        <type>jar</type>
    </dependency>
    <dependency>
        <groupId>org.apache.tomcat</groupId>
        <artifactId>tomcat-servlet-api</artifactId>
        <version>7.0.6</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>com.luckycatlabs.sotoo</groupId>
        <artifactId>SunriseSunsetCalculator</artifactId>
        <version>1.0-SNAPSHOT</version>
    </dependency>
    <dependency>
        <groupId>net.tanesha.recaptcha4j</groupId>
        <artifactId>recaptcha4j</artifactId>
        <version>0.0.7</version>
    </dependency>
    <dependency>
        <groupId>org.codehaus.gmaven</groupId>
        <artifactId>gmaven-plugin</artifactId>
        <version>1.3</version>
        <type>maven-plugin</type>
    </dependency>
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.5.10</version>
    </dependency>
    <dependency>
        <groupId>org.owasp.antisamy</groupId>
        <artifactId>antisamy</artifactId>
        <version>1.4.4</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-c3p0</artifactId>
        <version>${hibernate.version}</version>
    </dependency>
    <dependency>
        <groupId>net.sf.ehcache</groupId>
        <artifactId>ehcache-core</artifactId>
        <version>2.4.3</version>
    </dependency>
    <dependency>
        <groupId>com.google.code.gson</groupId>
        <artifactId>gson</artifactId>
        <version>1.7.1</version>
    </dependency>
    <dependency>
        <groupId>com.googlecode.concurrentlinkedhashmap</groupId>
        <artifactId>concurrentlinkedhashmap-lru</artifactId>
        <version>1.2</version>
    </dependency>
    <dependency>
        <groupId>com.restfb</groupId>
        <artifactId>restfb</artifactId>
        <version>1.6.6</version>
    </dependency>
    <dependency>
        <groupId>org.springframework.security</groupId>
        <artifactId>spring-security-taglibs</artifactId>
        <version>${spring.version}</version>
        <exclusions>
            <exclusion>
                <artifactId>spring-web</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-beans</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-expression</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-context</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-aop</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-core</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>opensymphony</groupId>
        <artifactId>quartz</artifactId>
        <version>1.6.3</version>
    </dependency>
    <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-search</artifactId>
        <version>3.4.1.Final</version>
    </dependency>
    <dependency>
        <groupId>com.yahoo.platform.yui</groupId>
        <artifactId>yuicompressor</artifactId>
        <version>2.4.6</version>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.mozilla</groupId>
        <artifactId>rhino</artifactId>
        <version>1.7R3</version>
        <scope>compile</scope>
    </dependency>
    <dependency>
        <groupId>org.kohsuke</groupId>
        <artifactId>geoip</artifactId>
        <version>1.2.5</version>
    </dependency>
    <dependency>
        <groupId>com.sun.jersey</groupId>
        <artifactId>jersey-json</artifactId>
        <version>1.11</version>
    </dependency>
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-core-asl</artifactId>
        <version>1.9.2</version>
    </dependency>
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-mapper-asl</artifactId>
        <version>1.9.2</version>
    </dependency>
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-jaxrs</artifactId>
        <version>1.9.2</version>
    </dependency>
    <dependency>
        <groupId>org.codehaus.jackson</groupId>
        <artifactId>jackson-xc</artifactId>
        <version>1.9.2</version>
    </dependency>
    <dependency>
        <groupId>com.sun.jersey.contribs</groupId>
        <artifactId>jersey-spring</artifactId>
        <version>1.11</version>
        <exclusions>
            <exclusion>
                <artifactId>spring-web</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-core</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-beans</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-context</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
            <exclusion>
                <artifactId>spring-aop</artifactId>
                <groupId>org.springframework</groupId>
            </exclusion>
        </exclusions>
    </dependency>
    <dependency>
        <groupId>com.sun.jersey.contribs</groupId>
        <artifactId>jersey-multipart</artifactId>
        <version>1.11</version>
    </dependency>
    <dependency>
        <groupId>aspectj</groupId>
        <artifactId>aspectjrt</artifactId>
        <version>1.5.4</version>
    </dependency>
</dependencies>
<properties>
    <spring.version>3.1.0.RELEASE</spring.version>
    <hibernate.version>3.6.7.Final</hibernate.version>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <project.reporting.outputEncoding>UTF-8</project.reporting.outputEncoding>
</properties> 
```

Does anyone know why I'm getting these errors?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T05:02:48.303

您的方法注释为`@GET`应该是问题 make it `@POST`。

# xcode - 获取可可应用程序中删除文件的路径

> ID：11890764
> 
> 赞同：3
> 
> 时间：2012-08-09T19:40:47.410
> 
> 标签：xcode, macos, cocoa, file

我想知道如何检索用户拖放到可可应用程序中的文件的路径。例如：用户从他/她的桌面拖动一个名为 test 的文件。然后可可应用程序会说：用户/当前用户名/桌面/测试

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:57:49.007

我刚刚下载了[Apple 的“CocoaDragAndDrop”示例代码](https://developer.apple.com/library/mac/#samplecode/CocoaDragAndDrop/Introduction/Intro.html#//apple_ref/doc/uid/DTS10000384)并试用了一下。

当我将 PNG 文件从 Finder 拖入正在运行的应用程序时，窗口的标题会更改为拖入的图像的路径。

查看示例代码，我可以看到粘贴板中包含一个文件 URL：

```
 //if the drag comes from a file, set the window title to the filename
 fileURL=[NSURL URLFromPasteboard: [sender draggingPasteboard]];
 [[self window] setTitle: fileURL!=NULL ? [fileURL absoluteString] : @"(no name)"]; 
```

在您自己的代码中尝试这种技术并根据需要对其进行修改。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-02T11:36:25.693

接受的答案不再适用于 Xcode 6。我发现这种方法可以获得相同的结果：

```
 NSURL*fileURL = [NSURL URLFromPasteboard: [sender draggingPasteboard]];
    NSString *filePath = [fileURL path];
    [[self window] setTitle:filePath]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-18T19:42:23.333

目前正在开发类似的界面，我了解到 OP 要求的是**path**，而不是 URL 检索。对于已接受的答案，建议的 OS X 10.10 (XCode6) 解决方法似乎存在拒绝在窗口之间拖放内容的问题。

但是，避免声明 NSString *filePath，而是简单地将建议示例代码的 DragDropImageView.m 的第 175 行中的 [fileURL absoluteString] 方法替换为 [fileURL path] 方法，似乎可以解决它：

```
 fileURL=[NSURL URLFromPasteboard: [sender draggingPasteboard]];
    [[self window] setTitle: fileURL!=NULL ? [fileURL path] : @"(no name)"]; 
```

它按照 Xcode4 到 Xcode6、SDK 10.8-10.10、AFAICT 的设计编译和运行。

希望这能有所帮助。

# ios - navigation with anchors inside div elements

> ID：11890769
> 
> 赞同：0
> 
> 时间：2012-08-09T19:41:04.623
> 
> 标签：ios, html, css, uiwebview

I am showing a html page that is dynamically generated in code. I am inserting navigation points like

```
<div class="columnbreak"><a name="section01"/></div>. 
```

I then show this html in a UIWebView. I have a CSS rule for column break

```
div.columnbreak { -webkit-column-break-after : always; } 
```

when I try to navigate using javascript

```
NSString *js = [NSString stringWithFormat:@"window.location.hash='#%@';", section];
[webview stringByEvaluatingJavaScriptFromString:js]; 
```

it doesn't navigate to the anchor.

if I put the tags in html

```
<div class="columnbreak" ></div><a name="section01"/> 
```

then I can navigate with javascript but the column **does not break** properly.

Can anyone give me a hint what is going on ?

# java - java - 如何在java swing中对文本字段使用过滤器？

> ID：11890774
> 
> 赞同：4
> 
> 时间：2012-08-09T19:41:11.503
> 
> 标签：java, swing, jtextfield, keylistener

我有一个`JTextField`. 当用户输入`a`or时`j`，我希望文本字段中的文本为大写（例如输入“ab”，输出“AB”）。如果第一个字母不是以下之一，

*   `a`, `t`, `j`, `q`, `k`, `2`, `3`, ...,`9`

我不希望文本字段显示任何内容。

这就是我所拥有的，

```
public class Gui {
    JTextField tf;
    public Gui(){
        tf = new JTextField();
        tf.addKeyListener(new KeyListener(){
           public void keyTyped(KeyEvent e) {
           }
           /** Handle the key-pressed event from the text field. */
           public void keyPressed(KeyEvent e) {
           }
           /** Handle the key-released event from the text field. */
           public void keyReleased(KeyEvent e) {
           }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T20:05:20.900

您可以覆盖类的`insertString`方法`Document`。看一个例子：

```
JTextField tf;

public T() {
    tf = new JTextField();
    JFrame f = new JFrame();
    f.add(tf);
    f.pack();
    f.setVisible(true);

    PlainDocument d = new PlainDocument() {
        @Override
        public void insertString(int offs, String str, AttributeSet a) throws BadLocationException {
            String upStr = str.toUpperCase();
            if (getLength() == 0) {
                char c = upStr.charAt(0);
                if (c == 'A' || c == 'T' || c == 'J' || c == 'Q' || c == 'K' || (c >= '2' && c <= '9')) {
                    super.insertString(offs, upStr, a);
                }
            }

        }
    };
    tf.setDocument(d);

} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T19:51:13.633

> 如果第一个字母不是“a”/“A”或“t”/“T”或“j”/“J”或“q”/“Q”或“k”/“K”，或任何“2”、“3”、...、“9” 我希望文本字段不显示任何内容。

这是 带有[Pattern的](http://docs.oracle.com/javase/6/docs/api/java/util/regex/Pattern.html)[DocumentFilter](http://docs.oracle.com/javase/tutorial/uiswing/components/generaltext.html#filter)的工作，简单[示例](https://stackoverflow.com/a/9430683/714968)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T19:48:27.593

使用[`JFormattedTextField`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JFormattedTextField.html)类。有关详细信息，请参阅[如何使用格式化文本字段](http://docs.oracle.com/javase/tutorial/uiswing/components/formattedtextfield.html)。

# python - python re.sub 正则表达式

> ID：11890781
> 
> 赞同：0
> 
> 时间：2012-08-09T19:41:36.503
> 
> 标签：python, regex

Python 不断返回一个带有损坏字符的字符串。

Python

```
test = re.sub('handle(.*?)', '<verse osisID="lol">\1</verse>', 'handle a bunch of random text here.')
print test 
```

我想要的是

```
<verse osisID="lol">a bunch of random text here.</verse> 
```

我得到了什么

```
<verse osisID="lol">*broken character*</verse>a bunch of random text here. 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T19:45:40.163

您应该转义`\`字符或使用`r''`原始字符串：

```
>>> re.sub('handle(.*?)', r'<verse osisID="lol">\1</verse>', 'handle a bunch of random text here.')
'<verse osisID="lol"></verse> a bunch of random text here.' 
```

如果没有`r''`原始字符串文字，反斜杠将被解释为转义码。您也可以将反斜杠加倍：

```
>>> '\1'
'\x01'
>>> '\\1'
'\\1'
>>> r'\1'
'\\1'
>>> print r'\1'
\1 
```

请注意，您只替换那里的单词`handle`，该`.*?`模式至少匹配 0 个字符。删除问号，它将与您的预期输出匹配：

```
>>> re.sub('handle(.*)', r'<verse osisID="lol">\1</verse>', 'handle a bunch of random text here.')
'<verse osisID="lol"> a bunch of random text here.</verse>' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-02T02:31:08.987

以下代码在 python 3.6 下测试

```
import re 

test = 'a bunch of random text here.'
resp = re.sub(r'(.*)',r'<verse osisID="lol">\1</verse>',test)
print (resp)

<verse osisID="lol">a bunch of random text here.</verse> 
```

# php - Changing attributes of products that are already registered in magento

> ID：11890786
> 
> 赞同：0
> 
> 时间：2012-08-09T19:42:05.247
> 
> 标签：php, magento, magento-1.6

I have given several products the **default** attribute. I now want to change the attributes of these products to **artificial baits**.

How can I accomplish this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T21:27:10.640

从 UI 来看是不可能的。从代码中可以做到这一点，我相信我已经在 Magento connect 中看到了一些扩展。

# php - Balanced Payments PHP Client：查询结果触发未捕获异常

> ID：11890787
> 
> 赞同：2
> 
> 时间：2012-08-09T19:42:15.073
> 
> 标签：php, exception, balanced-payments

我正在尝试在市场上查询与电子邮件地址匹配的帐户，当它找不到结果时，尽管我的 try/catch 阻止了它，但它会引发未捕获的异常。

```
try {
    $vendor = $this->marketplace ->accounts ->query()
               ->filter(Balanced\Account::$f->email_address->eq($this->vendor['email']))
               ->one();
    $this->balanced_vendor = $vendor; 
    return true;
} catch (Balanced\Exceptions\HTTPError $e) {
    $this->notify('no-vendor', $e);
} 
```

我可能做错了什么？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:07:59.883

看起来该类从其方法中[`Balanced\Core\Query`](https://github.com/balanced/balanced-php/blob/master/src/Balanced/Core/Query.php#L8)抛出两者[`Balanced\Exceptions\MultipleResultsFound`](https://github.com/balanced/balanced-php/blob/master/src/Balanced/Exceptions/MultipleResultsFound.php#L9)，而不是.[`Balanced\Exceptions\NoResultFound`](https://github.com/balanced/balanced-php/blob/master/src/Balanced/Exceptions/NoResultFound.php#L8)[`one()`](https://github.com/balanced/balanced-php/blob/master/src/Balanced/Core/Query.php#L127)[`Balanced\Exceptions\HTTPError`](https://github.com/balanced/balanced-php/blob/master/src/Balanced/Exceptions/HTTPError.php#L12)

要解决您当前的问题，您应该将`catch`指令更改为：

```
} catch (Balanced\Exceptions\MultipleResultsFound $e) {
    // handle multiple results..
} catch (Balanced\Exceptions\NoResultsFound $e) {
    $this->notify('no-vendor', $e);
} 
```

但是从外观上看，您试图将其[`Balanced\Exceptions\HTTPError`](https://github.com/balanced/balanced-php/blob/master/src/Balanced/Exceptions/HTTPError.php#L12)用作包罗万象的功能，这可以被认为是客户端缺少的功能。我所做的是，我为您提交了一个[Github 问题](https://github.com/balanced/balanced-php/issues/1)，建议所有异常都继承自基本平衡异常。

我希望这有帮助。

# python - 有谁知道可以将 xml 转换为 json 的好的 Perl 模块？

> ID：11890789
> 
> 赞同：0
> 
> 时间：2012-08-09T19:42:41.840
> 
> 标签：python, perl, module, cgi

这是代码：

```
#!/usr/bin/python
import cgi, cgitb
import httplib2
import xmltodict, json

cgitb.enable()

query = cgi.FieldStorage()
q_value = query["q"].value

h = httplib2.Http()
resp, content = h.request("http://192.168.1.13:8080/solr/select?q=" + q_value, "GET")

p_xml = xmltodict.parse(content)
json_r = json.dumps(p_xml)

print "Content-type: application/json"
print 
print json_r 
```

我正在寻找类似的 Perl 模块来实现相同的效果，因为我听说 Perl 在做这些事情时比 Python 快。这里最大的显然是 httplib2 和 xmltodict，但后者可能只是因为 Python 与 dicts 配合得很好。

我对 Perl 很陌生，对一般编程也很陌生，但是 Stack Overflow 是令人难以置信的知识财富。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T20:25:32.427

不回答问题，但是使用 Solr，您可以添加一个`wt=json`参数，它将返回 json 而不是 XML ...

[http://wiki.apache.org/solr/SolJSON](http://wiki.apache.org/solr/SolJSON)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T19:52:31.600

你试过谷歌搜索`perl xml to json`吗？显示的第一个条目是[XML::XML2JSON](http://search.cpan.org/~ken/XML-XML2JSON-0.06/lib/XML/XML2JSON.pm)。

获取模块，创建测试用例并报告您的发现。

# javascript - javascript 参数对象不起作用

> ID：11890791
> 
> 赞同：0
> 
> 时间：2012-08-09T19:42:44.227
> 
> 标签：javascript, .net

在我的应用程序中，我有一个如下所示的 javascript 函数。

```
var params = {};
function getMethod(art) {
    if (art == 'artwork') {
        params['type'] = 'paper art';
    }
    params['medium'] = 'canvas';
    params['entity'] = 'paper';
} 
```

此功能在 Firefox 中运行良好。但它在 IE 和 Chrome 中失败了。它对 params['type']
给出错误参数的破坏是未定义的。知道我在这里犯了什么错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:50:01.950

这是我将如何使用它：

```
var params = {};
function getMethod(art) {
    if (art == 'artwork') {
        params.type = 'paper art';
    }
    params.medium = 'canvas';
    params.entity = 'paper';
}

// ... later
getMethod("not art");

// check if it is defined before using it
if (params.type && params.type == 'artwork') {
   // do artwork stuff
} 
```

# php - preg_replace 用树枝换行的空间

> ID：11890797
> 
> 赞同：0
> 
> 时间：2012-08-09T19:42:58.340
> 
> 标签：php, symfony, twig

我想将字符串中的空格替换为换行符。

**前**

`1 2 3 4`

**preg_replace**之后：****

 **```
1
2
3
4 
```

这是我的代码：

```
$m_cart = preg_replace('/\s/', '\n', $session->get('cart'));
return $this->render('FooSiteBundle:Site:bar.html.twig', array('cart' => $m_cart)); 
```

这是我对**twig**的看法：

```
{{ cart }} 
```

结果：

```
\n1\n2\n3\n4 
```

但我想拥有

```
1
2
3
4 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T19:46:18.090

换行符转义序列`\n`不被单引号分隔的字符串解释（作为一个点，/[no]/ 转义序列是）

简单的答案是更改`'\n'`为`"\n"`.

我邀请您[阅读更多关于 PHP 的字符串分隔符](http://php.net/manual/en/language.types.string.php)以及它们之间的区别

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-31T14:04:59.313

会有`nl2br`帮助吗？

[http://twig.sensiolabs.org/doc/filters/nl2br.html](http://twig.sensiolabs.org/doc/filters/nl2br.html)

所以试试：

```
{{ cart|nl2br }} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T19:44:32.883

更改`'\n'`为`"\n"`。也就是加双引号。PHP 以不同的方式解析它们，使用双引号可以让您使用特殊字符，例如`\n`.**

# visual-studio - Visual Studio Lightswitch - 版本管理

> ID：11890800
> 
> 赞同：2
> 
> 时间：2012-08-09T19:43:04.797
> 
> 标签：visual-studio, deployment, version-control, version, visual-studio-lightswitch

我有一个不时更新的商业 LS 网络应用程序。我只需使用部署向导进行更新，一切正常。我的问题是处理所有在他们的 IE 中打开我的系统并通过我的部署过程保持打开状态的用户。

由于他们在浏览器上打开了旧的 Web 应用程序，并且我已将新版本部署到服务器，因此我可以看到在某些情况下发生错误。有没有办法确保所有打开应用程序的用户都将被迫刷新 Web 应用程序页面？也许远程断开所有当前连接的用户？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T13:14:58.767

没有内置的方法可以做到这一点。您将需要编写自定义解决方案。MSDN 论坛中的某个人[编写了一个类](http://social.msdn.microsoft.com/Forums/en-US/lightswitch/thread/9a24ae20-c7c4-42a7-a3b5-e492c4a644e9/)来为 OOB 应用程序执行此操作。

您应该能够重用该类的计时器部分。我不确定该`UpdateAvailable`方法是否适用于基于 Web 的应用程序。你必须试验一下。

或者，您可以创建自定义通知系统。从管理员帐户将消息插入到数据库中的表中。让用户帐户上的计时器每隔一段时间检查一次表格。如果发现新消息，则向用户显示通知。

然后，您可以使用 HTTP 响应标头或 ASP 方法将用户注销，如[Microsoft 支持文章中所述](http://support.microsoft.com/kb/315584)。

# java - 给定 3 个向量和角度，如何找到第四个向量，以便通过所有向量形成 2 个线段

> ID：11890802
> 
> 赞同：2
> 
> 时间：2012-08-09T19:43:08.370
> 
> 标签：java, math, 2d

我有一个由两个向量组成的线段，比如说 v1 和 v2，一个向量 v3 和一个角度*a*。如何在 Java 中编写**一个方法**（我也使用 Apache Commons Math 来表示一个向量）**，它给了我一个向量 v4，以便线段 v1-v2 和 v3-v4 成角度*a*？** 有无限的 v4 元素，如果我可以为该方法指定一个大小，以便线段 v3-v4 具有该大小，那就更好了。（都在二维空间中，角度可以是弧度或度数，没关系）

**编辑：**正如承诺的那样，我已经包含了我正在尝试解决的问题的图像。我有一个由 2 个向量定义的线段（这条线有点长，但没关系）、一个角度和第三个点。我需要绘制第二条线，它与第一条线以角度*a*相交。由于 Javafx 中的所有线条（我在这里使用）都是通过定义两个点来绘制的，因此我需要找到红点（或任何可能的红点）。 ![问题的可视化表示](../Images/76b8c47260fc431e82b9256619c5713c.png)

**编辑：**使用阿里的回答，我得到了以下方法，它可以满足我的需要：

```
public Pair<Vector2D, Vector2D> calculateFourthPoint(Vector2D v1, Vector2D v2, Vector2D v3, double angleInDegrees) {
    Vector2D r = v1.subtract(v2);
    double rx = r.getX();
    double ry = r.getY();
    double angle = toRadians(angleInDegrees);

    double a = pow(rx, 2) + pow(ry, 2);
    double b = 2 * sqrt(pow(rx, 2) + pow(ry, 2)) * cos(angle) * rx;
    double c = pow(rx, 2) * pow(cos(angle), 2) + pow(ry, 2) * pow(cos(angle), 2) - pow(ry, 2);
    double discriminant = sqrt(pow(b, 2) - (4 * a * c));

    double sx1 = (-b + discriminant) / (2 * a);
    double sx2 = (-b - discriminant) / (2 * a);

    double sy1 = sqrt(1 - pow(sx1, 2));
    double sy2 = sqrt(1 - pow(sx2, 2));

    Vector2D s1 = new Vector2D(sx1, sy1);
    Vector2D s2 = new Vector2D(sx2, sy2);

    Vector2D v4_1 = v3.subtract(s1);
    Vector2D v4_2 = v3.subtract(s2);

    return new Pair<Vector2D, Vector2D>(v4_1, v4_2);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:19:03.747

我不知道 Apache Commons Math，所以我用伪代码编写。让`vx`和`vy`分别表示向量 的`x`和`y`分量`v`。

让`r=v1-v2`和`s=v3-v4`。您有 2 个未知数（即`sx`和`sy`; 和`v4=v3-s`），因此您需要 2 个方程。这些应该是：

```
dot_product(r,s)=length(r)*cos a // forces the desired angle

dot_product(s,s)=1 // just sets the length of s to 1 
```

为了说明这一点，上面的等式是：

```
(1)    rx*sx + ry*sy = sqrt(rx^2+ry^2)*cos a

(2)    sx^2 + sy^2 = 1 
```

`sx`第一个方程在和中都是线性的`sy`。让我们从第一个方程中消除`sy`（假设它`ry`不为零）

```
 sy = (1/ry)*(sqrt(rx^2+ry^2)*cos a - rx*sx) 
```

并将其代`sy`入第二个等式。你得到一个二次方程`sy`（我不想在这里写它，因为它很复杂），它有两个解。您可以通过将值代入（假设不为零）来获得相应`sx`的值：`sy``rx`

```
 sx = (1/rx)*(sqrt(rx^2+ry^2)*cos a - ry*sy). 
```

最后，`v4=v3-s`. **您得到 v4 的 2 个解**，一个用于二次方程的每个解。（在我的回答中忽略了退化的情况，例如作为`r`空向量。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T09:39:11.847

很遗憾我们不能在这里做 LaTeX 风格的方程式（或者我们*可以*吗？我不知道，从来没有在这里做过......），但这里有：

```
v1-v2 · v3-v4 = |v1-v2| * |v3-v4| * cos(a)   (by definition) 
```

定义`|v3-v4|`为单位向量，因此

```
v1-v2 · v3-v4 = |v1-v2|*1*cos(a) = |v1-v2|*cos(a) 
```

将左手侧向外工作

```
v1·v4 + v2·v4 = |v1-v2|*cos(a) - v1·v3 + v2·v3 
```

或者

```
(v1+v2)·v4 = |v1-v2|*cos(a) - (v1-v2)·v3 
```

尽管

```
|v3-v4| = (v3-v4)·(v3-v4) = 1 
```

因此，在 2 个未知数中有 2 个方程。现在，为简洁起见，

```
aa  = (v1+v2|x
bb  = (v1+v2|y
x1 = v4|x
x2 = v4|y
A  = |v1-v2|*cos(a) - (v1-v2)·v3 
```

where`|x`表示`x`-component 等。有了这个，微不足道的替换给了我们

```
( (A-aa*x1)/bb )^2 + (aa*x1)^2 = 1     (-> 2 solutions)
( (A-bb*x2)/aa )^2 + (bb*x2)^2 = 1     (-> another 2 solutions) 
```

解决方案有点过于混乱，无法在此处写下，但它们是可以轻松求解的简单[二次方程。](http://en.wikipedia.org/wiki/Quadratic_equation)

然后你有**4 个独特的向量**，它们位于一个单位圆上`v3`（见图）。这 4 个向量仅导致 2 个不同的线，但找到所有 4 个向量仍然是一个好主意（作为自检，并提高稳健性 - 可能存在一些边缘情况，其中一个向量是这样的就像*发生灾难性的取消*一样）。

哪条线最适合您，当然取决于您的用例。

无论您选择哪种解决方案，您当然应该始终验证是否

```
arccos(((v1-v2)·(v3-v4))/|v1-v2|) = a 
```

应该是这样。

![情景草图](../Images/291ff21640d4f1ed218e4aea8cc4d482.png)

# c++ - strstream 曾经是标准的一部分吗？

> ID：11890803
> 
> 赞同：0
> 
> 时间：2012-08-09T19:43:19.133
> 
> 标签：c++, standards

最近我浏览了 n3376 并在附件 D 中发现了一个有趣的部分：[depr.ios.members]。它提到不推荐使用的“旧” IO-classes `strstreambuf`, `istrstream`, ...。

就我个人而言，我没有将其中任何一个用于任何严肃的程序（我想我曾经不得不在作业中使用它们，但在那之后我留下了`<sstream>`）。

据我所知，这些课程是预标准的，但它们曾经是任何标准的一部分吗？如果不是，我不太明白为什么标准中甚至提到了......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:46:45.207

是的，它们一直是（自 1998 年以来）并且是标准的一部分，但它们已被弃用（自 1998 年以来一直如此）。

随之而来的自然问题是：为什么将它们添加为已弃用？我这里只能推测，但是没有办法可以管理自己的buffer，而且不能直接访问stringstream的字符串，所以这个模板是没有好的办法的。委员会肯定会对填补这一空白的新提案持开放态度（即控制缓冲区），但不赞成使用 strstream 可能是禁忌。

# java - int 的哈希码

> ID：11890805
> 
> 赞同：31
> 
> 时间：2012-08-09T19:43:32.947
> 
> 标签：java, int, hashcode, primitive

什么是原始类型的哈希码，例如 int？

例如，假设 num 是一个整数。

```
int hasCode = 0;

if (num != 0) {
  hasCode = hasCode + num.hashCode();
} 
```

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-09T19:48:20.873

取自`Integer.class`源代码：

```
/**
 * Returns a hash code for this {@code Integer}.
 *
 * @return  a hash code value for this object, equal to the
 *          primitive {@code int} value represented by this
 *          {@code Integer} object.
 */
public int hashCode() {
    return value;
} 
```

`value`整数的值在哪里。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-08-09T19:45:59.980

对于`hashCode`of`int`最自然的选择是使用它`int`本身。`hashCode`一个更好的问题是a使用什么，`long`因为它不适合`int`-size 的哈希码。你最好的来源——以及所有`hashCode`相关问题——将是[Effective Java](http://www.oracle.com/technetwork/java/effectivejava-136174.html)。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-09T19:44:23.850

没有可用`hashCode()`的原始类型方法`int`。

`Integer`是 Wrapper 类类型并`hashcode()`返回一个`int`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-15T14:18:37.337

该`java.lang.Integer.hashCode()`方法返回原始值的哈希码值，`int`但表示为`Integer`对象。

```
/**
 * Returns a hash code value for an Integer,
 * equal to the primitive int value it represents.
 */
public class IntegerDemo {

    public static void main(String[] args){
        Integer i = new Integer("20");
        System.out.println("Value = " + i.hashCode());
    }

}` 
```

**结果：**

> 值 = 20

源码链接：[http ://www.tutorialspoint.com/java/lang/integer_hashcode.htm](http://www.tutorialspoint.com/java/lang/integer_hashcode.htm)

# php - 如何将二维数组与自身进行比较以获得唯一值？

> ID：11890806
> 
> 赞同：0
> 
> 时间：2012-08-09T19:43:36.293
> 
> 标签：php, arrays, email, multidimensional-array, unique

我的问题是我从二维对象数组中抓取了一些用户的电子邮件，但没有得到重复或没有抓取它们。他们每个人都需要向他们发送一封电子邮件，但不超过 1 封。

我当前的代码回显电子邮件：

```
for ($row = 0; $row < count($results); $row++){
    for($col = 0; $col < count($results[$row]); $col++){
         foreach($results[$row][$col]->result() as $user){
               echo "<p>".$user->email."</p>";
         }
    }
} 
```

如果有帮助，我正在使用 CodeIgniter 框架。我查找了 array_diff() 函数和 array_unique() 但 array_unique() 不会采用二维数组，或者至少文档说它不是为此而设计的。有什么建议么？

每个 $results[$row] 本身都是独一无二的，但问题是一个 $row 可能与另一个具有相同的电子邮件地址，我不希望这样。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:52:01.607

可能的解决方案是（*如果您只有要比较的电子邮件地址*）是组成一维数组，其中`key`将表示`original key`（*具有该电子邮件地址的数组的键*）并且`value`是它`email address`本身。

然后，应用于`array_unique()`该*一维*数组，然后仅使用数组统一后留下的键将该数组解析回所需结构*的多维*数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:00:53.710

如果您要从数据库中获取电子邮件列表，请按以下方式添加`distinct`到您的查询中：

```
$query = "SELECT DISTINCT email FROM emailTable"; //Add other fields to select as needed

// Add this piece to order them. Not sure if you'd need it or not
$query .= " ORDER BY email ASC";

$result = query_db($query); 
```

然后你知道每个在你的数组`$row`中都是唯一的`$result`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T20:01:26.597

让我们试试这个：

```
$existing_emails = array();
for ($row = 0; $row < count($results); $row++){
    for($col = 0; $col < count($results[$row]); $col++){
        foreach($results[$row][$col]->result() as $user){
            if( ! isset( $existing_emails[ $user->email ] ) ) {
                $existing_emails[ $user->email ] = 1;
                echo "<p>".$user->email."</p>";
            }
        }
    }
} 
```

我们将保留一个关联数组来记住到目前为止我们已处理的电子邮件，因此我们不再向它们发送任何内容。

# excel - 将excel文本框的内容抓取到保持换行的字符串中

> ID：11890807
> 
> 赞同：1
> 
> 时间：2012-08-09T19:43:50.713
> 
> 标签：excel, vba

我是该网站的新用户，也是 VBA 的新用户。

我只是想将多个文本框（来自许多不同的工作表）的内容放入一张工作表中。

现在，我一直坚持将信息从单个文本框中获取到变量中。

此时，我只希望它保留换行符（换行、输入、返回等）。

即使我可以复制/粘贴信息，此时我什至无法通过 VBA 访问文本框。

如果有人能帮忙，那就太好了！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:03:24.767

这是如何开始的？

以下代码将提取文本框中的文本并将其打印到即时视图。

```
Sub ExtractTextFromShapes()

Dim shp As Shape

For Each shp In ActiveSheet.Shapes

    If shp.Type = msoTextBox Then Debug.Print shp.TextFrame.Characters.Caption

Next

End Sub 
```

您可以轻松更换

`Debug.Print shp.TextFrame.Characters.Caption`

和

`strText = shp.TextFrame.Characters.Caption`

# mysql - 一对多加入mysql

> ID：11890809
> 
> 赞同：1
> 
> 时间：2012-08-09T19:43:51.673
> 
> 标签：mysql

我有两张桌子。一张桌子看起来像

```
ORDER_ID | SHOPPER_NAME | DATE
-------------------------------
001A     | Marianna     | 08/09/2012
002A     | Jason        | 80/08/2012 
```

和另一个包含订单信息的表格

```
ORDER_ID | DATA_CODE   | DATA_VALUE
----------------------------------
001A     | MILK_MONEY  | 1.20
001A     | NUM_EGGS    | 22
002A     | TOTAL_SPENT | 32.43
001A     | TOTAL_SPENT | 42.13 
```

我需要获取特定订单的几个数据代码。如何在一行中选择 SHOPPER_NAME、MILK_MONEY（DATA_VALUE，其中 DATA_CODE = 'MILK_MONEY'）、TOTAL_SPENT 和 NUM_EGGS？我让它在我正在做 3 个连接的地方工作，比如

```
SELECT SHOPPER_NAME,
       MILK.DATA_VALUE,
       EGGS.DATA_VALUE,
       TOTAL.DATA_VALUE
FROM GROCERIES G
JOIN ORDER_INFO MILK ON MILK.ORDER_ID=G.ORDER_ID
JOIN ORDER_INFO EGGS ON EGGS.ORDER_ID=G.ORDER_ID
JOIN ORDER_INFO TOTAL ON TOTAL.ORDER_ID=G.ORDER_ID 
```

然而，这开始看起来很难看，在同一张表上进行多个连接感觉不正确。有没有更有效的方法来做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:49:02.710

```
SELECT SHOPPER_NAME,
       (select sum(DATA_VALUE) from ORDER_INFO where DATA_CODE  = 'MILK_MONEY' and ORDER_ID = G.ORDER_ID) as 'MilkValue'
       (select sum(DATA_VALUE) from ORDER_INFO where DATA_CODE  = 'NUM_EGGS' and ORDER_ID = G.ORDER_ID) as 'EggsValue'
       (select sum(DATA_VALUE) from ORDER_INFO where DATA_CODE  = 'TOTAL_SPENT' and ORDER_ID = G.ORDER_ID) as 'TotalSpentValue'
FROM GROCERIES G 
```

用于`subquerys`获取每个总和（我不知道是否有多个列，或者是否有牛奶、鸡蛋等的总数；在这种情况下，删除`sum's`）每个总和将用于每个`Order_Id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T21:05:55.600

您可以在第二张表上使用一个数据透视表来对其进行一些非规范化，或者您可以通过对其进行一些非规范化来更改您的数据库架构。在堆栈溢出时查找 MySQL PIVOT 以获取更多示例，但类似以下内容：

```
SELECT * FROM 
(SELECT ORDER_ID, DATA_CODE, DATA_VALUE FROM tablename
PIVOT (sum(DATA_VALUE) FOR DATA_CODE IN ([MILK_MONEY], [NUM_EGGS], [TOTAL_SPENT])) pvt 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-09T19:48:41.050

```
SELECT g.SHOPPER_NAME, oi.* from GROCERIES g JOIN ORDER_INFO oi on oi.ORDER_ID=G.ORDER_ID 
```

# objective-c - 为什么 NSString stringWithString 返回指向复制字符串的指针？

> ID：11890814
> 
> 赞同：4
> 
> 时间：2012-08-09T19:44:15.717
> 
> 标签：objective-c, nsstring

我正在尝试将一个`NSString`值从一个复制`NSMutableArray`到一个新变量中。`NSString stringWithString`正在返回`NSString`与我的数组中的对象具有相同内存地址的一个。为什么？

```
#import <Foundation/Foundation.h>

int main(int argc, const char * argv[])
{

    @autoreleasepool {

        NSMutableArray *arr = [NSMutableArray arrayWithObject:@"first"];

        NSLog(@"string is '%@' %p", [arr objectAtIndex:0], [arr objectAtIndex:0]);

        // copy the string
        NSString *copy = [NSString stringWithString:[arr objectAtIndex:0]];
        NSLog(@"string is '%@' %p", copy, copy);

    }
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T19:57:13.580

1) 每当您使用`@""`语法创建字符串时，框架都会自动缓存该字符串。`NSString`是一个非常特殊的类，但框架会处理它。当您`@"Some String"`在应用程序的多个地方使用时，它们都将指向内存中的相同地址。只有当你使用类似的东西时`-initWithData:encoding`，字符串才会被缓存。

2）其他答案建议您应该`-copy`改用，但`-copy`如果对象是可变的，则只会创建对象的副本。（如 NSMutableString）
当您发送`-copy`到不可变对象（如 NSString）时，它与发送`-retain`返回对象本身相同。

```
NSString *originalString = @"Some String";
NSString *copy = [originalString copy];
NSString *mutableCopy1 = [originalString mutableCopy];
NSString *mutableCopy2 = [mutableCopy copy];
NSString *anotherString = [[NSString alloc] initWithString:originalString]; 
```

--> `originalString`, `copy`, `mutableCopy2` and `anotherString` will all point to the same memory address, only `mutableCopy1` points do a different region of memory.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T19:49:21.460

由于`NSString`实例是不可变的，因此该`+stringWithString:`方法只是返回具有递增引用计数的输入字符串。

如果您*真的*想强制创建一个新的相同字符串，请尝试：

```
NSString * copy = [NSString stringWithFormat:@"%@", [arr objectAtIndex:0]]; 
```

但是，这样做没有什么意义，除非您出于其他原因需要指针是唯一的......

# vim - 在 Vim 中运行 :ls 后的符号是什么意思？

> ID：11890817
> 
> 赞同：36
> 
> 时间：2012-08-09T19:44:25.003
> 
> 标签：vim

在 Vim 中运行 list buffers 命令 ( `:ls`) 后，某些缓冲区前面显示的符号是什么意思？我知道百分号 ( `%`) 表示当前可见的缓冲区。但是，我也看到了井号 ( `#`)，但我无法弄清楚这意味着什么。谷歌搜索已被证明是徒劳的。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-08-09T19:46:07.170

见[`:help :ls`](http://vimdoc.sourceforge.net/htmldoc/windows.html#:ls)。

井号标记*备用缓冲区*。这对于在两个缓冲区之间切换很有用：它是您在使用 eg 时将切换到的缓冲区`:b#`。这是唯一与*最近使用*的 vim 缓冲区类似的东西，没有插件。

您还知道`:ls`哪些缓冲区有未保存的修改：`+`.

# sql - A 有多少个 B 和 C？

> ID：11890821
> 
> 赞同：6
> 
> 时间：2012-08-09T19:44:42.080
> 
> 标签：sql, database, count

我有这个表：

```
A:
id
1
2

B:
id a_id
1  1
2  1
3  1

C:
id a_id
1  1
2  1
3  2 
```

我需要这个结果：

```
A, CountB, CountC
1,      3,      2
2,      0,      1 
```

这个尝试不能正常工作：

```
SELECT 
    A.id, COUNT(B.id), COUNT(C.id)
FROM
    A
        LEFT JOIN
    B ON A.id = B.a_id
        LEFT JOIN
    C ON A.id = C.a_id
GROUP BY A.id 
```

不使用相关查询的sql语句如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T19:48:17.803

您的以下变体应该有效：

```
SELECT A.id, COUNT(distinct B.id), COUNT(distinct C.id)
FROM A LEFT JOIN
     B
     ON A.id = B.a_id LEFT JOIN
     C
     ON A.id = C.a_id
GROUP BY A.id 
```

但是，有些人（比如我自己）觉得使用 count distinct 是一种逃避。问题是来自 B 和来自 C 的行相互干扰，在连接中相乘。因此，您也可以独立进行每个连接，然后将结果放在一起：

```
select ab.id, cntB, cntC
from (select a.id, count(*) as cntB
      from A left outer join
           B
           on A.id = B.a_id
      group by a.id
     ) ab join
     (select a.id, count(*) as cntC
      from A left outer join
           C
           on A.id = C.a_id
      group by a.id
     ) ac
     on ab.id = ac.id 
```

只是计数，第一种形式很好。如果您需要进行其他汇总（例如，对一个值求和），那么您通常需要拆分为组件查询。

# python - 此代码中的 if/else 语法有什么问题？

> ID：11890825
> 
> 赞同：0
> 
> 时间：2012-08-09T19:45:00.160
> 
> 标签：python, syntax, python-2.7

为什么这段代码不起作用？是缩进错误还是代码错误？

```
print "Welcome to the English to Pig Latin translator!"
original = raw_input('Enter a word.')
if len(original) > 0:
    print original
else print "empty": 
```

任何建议，将不胜感激。我正在尝试通过 Codecademy 学习 Python。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T19:45:37.280

```
else print "empty":
    ^             ^ 
```

需要在您打印的字符串`:`之后`else`而*不是*在您打印的字符串之后，即

```
else: print "empty"
    ^              ^ 
```

所以，你有`:`，但在错误的地方:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T19:48:27.780

您要么需要将冒号移到`else`:

```
if len(original) > 0:
    print original
else: print "empty" 
```

或者，如果您愿意，可以使用[条件表达式](http://docs.python.org/reference/expressions.html#conditional-expressions)：

```
print original if len(original) > 0 else "empty" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T16:41:19.327

你做了什么：

```
 print "Welcome to the English to Pig Latin translator!"
    original = raw_input('Enter a word.')
    if len(original) > 0:
        print original
    else print "empty": 
```

你需要做什么：

```
 print("Welcome to the English to Pig Latin translator!")
    original = raw_input('Enter a word.')
    if len(original) > 0:
        print("original")
    else:
        print("empty") 
```

你错过了括号，在错误的地方放了一个冒号，最后一点没有进入另一行。希望这可以帮助 ：）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T19:50:07.007

本教程提供了您需要的所有类型语句的优秀示例：

[http://docs.python.org/tutorial/controlflow.html#if-statements](http://docs.python.org/tutorial/controlflow.html#if-statements)

```
if condition_1:
    (execute)
elif condition_2:
    (execute)
else:
    (execute) 
```

# mysql - libmemcached 路径？

> ID：11890826
> 
> 赞同：2
> 
> 时间：2012-08-09T19:45:05.763
> 
> 标签：mysql, memcached, libmemcache, libmemcached

尝试遵循这些说明：（http://dev.mysql.com/doc/refman/5.1/en/ha-memcached-interfaces-mysqludf.html）

```
shell> tar zxf memcached_functions_mysql-1.1.tar.gz
shell> cd memcached_functions_mysql-1.1
shell> # If memcached library is not found, set LDFLAGS=-Llibrary_directory before next command.
shell> ./configure --with-mysql=/usr/local/mysql/bin/mysql_config 
```

当我运行时：

```
sudo ./configure --with-mysql=/usr/lib64/mysql/mysql_config 
```

我在输出结束时得到这个：

```
checking for libmemcached >= 0.17... configure: error: libmemcached not found 
```

所以我尝试按照上面的说明设置 LDFLAGS 但不知道“library_directory”路径。

我怎样才能找到它？

更新1：根据下面的回复。libmemcached 已安装：

```
sudo yum install libmemcached
Loaded plugins: downloadonly, replace, rhnplugin, security
epel                                                                                                       | 3.7 kB     00:00     
ius                                                                                                        | 2.2 kB     00:00     
rackspace-rhel-x86_64-server-5.6.z-common                                                                  |  871 B     00:00     
rhel-x86_64-server-5.6.z                                                                                   | 1.3 kB     00:00     
Excluding Packages in global exclude list
Finished
Setting up Install Process
Package libmemcached-0.31-1.1.el5.x86_64 already installed and latest version
Nothing to do 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:03:40.103

你错过了`libmemcached-devel`，它可能也需要标题。

# node.js - 使用 node.js 托管多个站点

> ID：11890827
> 
> 赞同：3
> 
> 时间：2012-08-09T19:45:06.673
> 
> 标签：node.js, webserver

我目前正在学习 node.js 并喜欢它。然而，我注意到它似乎真的只适合一个站点。所以它非常适合托管 mydomain.com，但是如果我想用它构建一个真正的完整 Web 服务器怎么办。换句话说，我想托管 mydomain.com、example.com、yourdomain.com 等。有哪些可用的解决方案（模块）？我正在考虑简单地从请求对象中解析 url 并简单地从适当的目录中读取。例如，如果我收到对 example.com 的请求，然后从 example_com 目录读取，或者如果我收到来自 mydomain.com 的请求，则从 mydomain_com 目录读取。这里的问题是我不知道这将如何影响性能和可伸缩性。

我已经研究了[多节点](https://github.com/kriszyp/multi-node)，但我还没有完全遵循流程的想法（我是节点初学者）。

欢迎任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T20:22:24.900

您可以通过几种不同的方式做到这一点。一种方法是通过检查向哪个域发出请求，然后在您的应用程序中路由，将其直接写入您的 Web 应用程序，但除非您的应用程序非常基础，否则这可能会使其相当臃肿并且变得混乱。如果您正在编写一个博客平台，在该平台上，所有域中的所有内容都几乎相同，则可能是进行此类操作的好时机。关键区别可能在于您如何查询数据以显示正确的数据。

在这种情况下，您可能会使用请求来查看正在访问的博客。

如果您只想在同一台服务器上托管几个不同的域，都使用端口 80（就像大多数网站一样），您需要将每个请求代理到不同的进程。您可以使用 nginx 甚至节点本身来执行此操作。这一切都归结为最适合您的需求。[bouncy](https://github.com/substack/bouncy/)是一种快速设置的方法，它是一个 nodejs 模块，并且有一些非常令人印象深刻的基准测试。nginx（[使用 nginx 的代理](http://blog.noort.be/2011/03/07/node-js-on-nginx.html)）可能是最广泛使用的方法，因为许多 nodejs 服务器无论如何都使用 nginx 来提供静态内容。

[http://blog.noort.be/2011/03/07/node-js-on-nginx.html](http://blog.noort.be/2011/03/07/node-js-on-nginx.html) [https://github.com/substack/bouncy/](https://github.com/substack/bouncy/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T21:58:41.513

您可以使用 connect 的`vhost`中间件（也可以在 express 中使用）根据`Host:`标头将请求分派到单独的请求处理程序。这假设所有事情都由同一端口上的同一节点进程处理；如果你真的需要单独的进程，那么关于使用 nginx 作为反向代理的建议可能是要走的路。

# javascript - 如何使用嵌套的两个 .each() 函数选择多个元素？

> ID：11890832
> 
> 赞同：1
> 
> 时间：2012-08-09T19:45:15.390
> 
> 标签：javascript, jquery

好吧，伙计们，正如所承诺的，这是真正的交易，首先是示例 html：

```
<li data-foo="bar">
    <span id="a"></span>
    <ul>
        <li>
            <span id="1"></span>
            <ul>
                <li>
                    <span id="b"></span>
                </li>
            </ul>   
        </li>

        <li>
            <span id="2"></span>
            <ul>
                <li>
                    <span id="c"></span>
                </li>
            </ul>   
        </li>

    </ul>

</li>

<li data-foo="bar">
    <span id="d"></span>
    <ul>
        <li>
            <span id="3"></span>
            <ul>
                <li>
                    <span id="e"></span>
                </li>
            </ul>   
        </li>

        <li>
            <span id="4"></span>
            <ul>
                <li>
                    <span id="f"></span>
                </li>
            </ul>   
        </li>

    </ul>

</li> 
```

**我想让窗口弹出“12”，然后弹出“34”** ......所以这是我的嵌套函数尝试：

```
<script>
    var poptext = "";

    $('li[data-foo=bar]').each(

    function () {

        $(this li span).each(function () {
            poptext = poptext + $(this).attr("id");
        }

        alert(poptext);
        poptext = "";

        );

    }

    );
</script> 
```

这似乎不起作用，我认为 Jquery 可能会与多个“this”关键字混淆？开始时这些跨度的选择器也可能有问题。

多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:50:26.803

您的代码中有语法错误，也`$(this li span)`应该是`$('li span', this)`您的逻辑关闭，您没有过滤掉带有字母 id 的跨度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T19:55:54.803

我认为您正在寻找直接后代选择器：`>`

像这样使用：

```
$('li[data-foo=bar]').each(function () {
     var poptext = "";        
     $(this).find('> ul > li > span').each(function () {
         poptext = poptext + $(this).attr("id");
     });
     alert(poptext);
}); 
```

只会选择左侧前一个表达式的直接子节点。

一个更冗长但可读的版本可能是：

```
$(this).children('ul').children('li').children('span') // selects the same 
```

在此处查看实际操作：http: [//jsfiddle.net/xYgJg/](http://jsfiddle.net/xYgJg/)

# java - 使用可从资源绘制的位图初始化位图变量不起作用 - 使用 ANDROID

> ID：11890838
> 
> 赞同：0
> 
> 时间：2012-08-09T19:45:47.293
> 
> 标签：java, android, bitmap, android-canvas, android-resources

我使用以下代码来初始化我的位图变量：

```
Bitmap bitmap = ((BitmapDrawable)this.model.gameView.context.getResources().getDrawable(R.drawable.pic1)).getBitmap(); 
```

当我尝试记录该位图的宽度时，该日志甚至不会为该调用输出任何内容。

我知道它正在到达那条线，因为我跟踪了代码。

此外，当我尝试为位图绘制 canvas.draw 时，屏幕上没有绘制任何内容。

我用矩形绘制的所有东西都可以正常工作。

我的图片资源是PNG。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:18:55.137

为您的位图类尝试类似的方法。

```
public class DrawBitmap extends View
{
    Bitmap bitmap;

    public DrawBitmap(Context content)
    {
        super(content);

        bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.pic1);
    }

    @Override
    protected void onDraw(Canvas canvas)
    {
        super.onDraw(canvas);
        canvas.drawColor(Color.BLACK);//whatever color you want, make sure it's not the same as your image
        canvas.drawBitmap(bitmap, (canvas.getWidth()), 0, null);
    }
} 
```

主班

```
public class Main extends Activity 
{

    DrawBitmap myView;

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        myView = new DrawBitmap(this);
        setContentView(myView);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T19:55:08.847

尝试使用 BitmapFactory.decodeResource 查看本主题中的答案： [如何将 Drawable 转换为位图？](https://stackoverflow.com/questions/3035692/how-to-convert-a-drawable-to-a-bitmap)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T20:19:34.977

刚刚想通了。它与我使用的位图加载方法无关。这是我的一个逻辑错误。我的代码意外地遇到了我的位图变为空的情况，它试图在画布上绘制空资源。

# javascript - 使用 Backbone 路由器查看更改不断返回到主页

> ID：11890839
> 
> 赞同：0
> 
> 时间：2012-08-09T19:45:47.517
> 
> 标签：javascript, backbone.js, marionette

我似乎无法解决这个简单的问题。

我有一个 Backbone/Marionnette 应用程序，我将路由器定义为：

```
app.utils.AppRouter = Backbone.Marionette.AppRouter.extend({

initialize: function(){

    this.route("", "home", function(){
        console.log("In home!");
        app.layout.content.show(new app.views.BrowseRestaurantsLayout());
    });

    this.route("account", "account", function(){
        console.log("In account!");
        app.layout.content.show(new app.views.AccountView());
    });
}
}); 
```

在我的代码的其他地方，我需要导航到`#account`页面，所以我调用：

```
 app.router.navigate('account', {trigger:true}); 
```

我可以看到 URL 更改为`#account`，我的`AccountView`页面确实出现了一会儿，然后消失，被主页替换。

当我触发更改时，控制台显示：

```
In account! 
In home! 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T04:27:06.163

你检查过你的模板吗？我有一个类似的问题，发现问题是我链接中的href。

```
 <a href=#"></a> 
```

在临时将 URL 切换到我真正想要的 URL 后，它导致路由器将我送回 root。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T20:05:21.693

您的主路由可能是在您的帐户路由之后调用的包罗万象。

当你改变路线时会发生什么？

```
this.route("/", "home", function(){
    console.log("In home!");
    app.layout.content.show(new app.views.BrowseRestaurantsLayout());
}); 
```

或者可能是路线的顺序。*最后*尝试添加家庭路由器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T21:10:42.357

我不确定这是否能解决任何问题，但是您配置路由器的方式很奇怪。我认为不需要 Marionette 的 appRouter，因为您没有使用它的功能，而且我不会在初始化方法中配置路由。以这种方式配置路由器会更“类似于骨干网”：

```
 app.utils.AppRouter = Backbone.Router.extend({

  routes: {
    "": "home",
    "account": "account"
  },

  home: function(){
    console.log("In home!");
    app.layout.content.show(new app.views.BrowseRestaurantsLayout());
  },

  account: function(){
    console.log("In account!");
    app.layout.content.show(new app.views.AccountView());
  }
}); 
```

您定义路线的方式可能与此有关。

# python - Django - 将 js 变量传递给 Django 视图

> ID：11890840
> 
> 赞同：3
> 
> 时间：2012-08-09T19:45:48.477
> 
> 标签：python, django, google-maps-api-3

我的问题与 Google Maps JavaScript API 有关。更具体的自动完成功能。

我已将自动完成功能作为搜索栏添加到我的测试站点，这工作正常，但现在我想将选择的参数传递给 Django 视图。在这里我被困住了。

这是我的模板中的内容：

```
<script src="https://maps.googleapis.com/maps/api/js?sensor=false&libraries=places"></script>
<script type="text/javascript">
   function initialize() {
      var input = document.getElementById('searchTextField');
      var autocomplete = new google.maps.places.Autocomplete(input);
   }
   google.maps.event.addDomListener(window, 'load', initialize);
   google.maps.event.addListener(autocomplete, 'place_changed', function() {
   var place = autocomplete.getPlace();
   });
</script>

<form method="post" action="">{% csrf_token %}
    <input id="searchTextField" type="text" placeholder="Enter a location" autocomplete="on">
    <input type="submit" value="Search" class="postfix button"/>
</form> 
```

在我看来，这是：

```
def homepage(request):
    if request.method == 'POST':
        location = request.POST
else:
    location = ''
return render_to_response('homepage.html', {'location':location}, context_instance = RequestContext(request)) 
```

我想要做的是将变量'place'传递给我的Django视图中的变量'location'（var place应该包含纬度和经度，我想在Geodjango中进一步使用）。`request.POST`给出以下内容：但这`<QueryDict: {u'csrfmiddlewaretoken': [u'4xp3nNwzeITb1zHhkBkSGlZSPtGwmuMB']}>`我不能使用。

是否可以将 var place 的内容传递给 django 视图？

感谢您的反馈！

编辑：我目前使用 geopy 的解决方法：

模板：

```
<input id="searchTextField" name="searchTextField" type="text" placeholder="Enter a location" autocomplete="on"> 
```

看法：

```
if request.method == 'POST':
    location = request.POST.get('searchTextField')
    gn = geocoders.Google()  
    place, (lat, lng) = gn.geocode(location) 
```

仍在寻找访问`var place`. `script`这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T21:51:05.887

首先`name`向您的搜索输入添加一个属性。假设您将其`searchTextField`称为`id`. 然后你可以做`request.POST.get('searchTextField')`。

# python - Python/PyQuery：找不到 vcvarsall.bat？

> ID：11890846
> 
> 赞同：2
> 
> 时间：2012-08-09T19:46:01.080
> 
> 标签：python, windows, pyquery

我有 Python 2.7，我正在尝试使用 PyQuery，所以对于测试，我只输入了“import PyQuery”，但出现错误：

```
Traceback (most recent call last):
  File "C:\Users\Jacob\Documents\dupes.py", line 1, in <module>
    import pyquery
  File "C:\Python27\lib\site-packages\pyquery-1.2.1-py2.7.egg\pyquery\__init__.py", line 12, in <module>
    from .pyquery import PyQuery
  File "C:\Python27\lib\site-packages\pyquery-1.2.1-py2.7.egg\pyquery\pyquery.py", line 8, in <module>
    from lxml import etree
ImportError: No module named lxml 
```

所以我去命令提示符并尝试安装lxml，但我得到了这个：

```
Building lxml version 2.3.5.
Building without Cython.
ERROR: 'xslt-config' is not recognized as an internal or external command,
operable program or batch file.

** make sure the development packages of libxml2 and libxslt are installed **

Using build configuration of libxslt
error: Setup script exited with error: Unable to find vcvarsall.bat 
```

我真的不明白出了什么问题或我应该做什么......有人可以帮忙吗？

谢谢。

**编辑：**

为了回应评论，我使用了简单的安装...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T19:57:11.450

从安装说明`lxml`：

```
easy_install --allow-hosts=lxml.de,*.python.org lxml 
```

在 MS Windows 上，以上将安装我们提供的二进制构建。如果还没有最新版本的二进制构建，请在 PyPI 中搜索包含它们的最后一个版本，并将该版本传递给 easy_install，如下所示：

```
easy_install --allow-hosts=lxml.de,*.python.org lxml==2.2.2 
```

[编辑]

好的，`2.2.2`就是一个例子。我去找你，试试：

```
easy_install --allow-hosts=lxml.de,*.python.org lxml==2.3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:27:34.357

除非您的 Windows 环境设置正确（适用于您的 Python 版本的适当的 Visual Studio 版本等等），否则您应该下载二进制鸡蛋并安装它们。我知道 setuptools（并且可能分发）支持在 Windows 上安装二进制可执行包（仅限基于 distutils 的可执行文件 - 具有蓝色背景和旧点矩阵 Python 徽标的那些；抱歉，但我还没有在 Windows 上完成 Python几个月）。Pip 没有（可能是您正在/正在使用的）。

但要回答您的问题，批处理文件 vcvarsall.bat 用于设置从命令行构建 Visual Studio 项目/解决方案（通常使用任何 Visual Studio 工具）所需的环境变量。默认情况下它不在您的 PATH 中，并且由于 pip 试图使用它来正确构建 lxml，因此它失败了。

我的建议：除非您知道如何使用 Visual Studio 命令行工具，否则最好在 Windows 上使用二进制包。

# javascript - Backbone.js Collection 过滤前 10 个模型

> ID：11890849
> 
> 赞同：1
> 
> 时间：2012-08-09T19:46:13.423
> 
> 标签：javascript, backbone.js, backbone.js-collections

我的 Collection 获取了几条记录，我只需要显示其中的前 10 条记录。我尝试过

```
 this.collection.each(function(){
        if (count == 10) break;
        //pass model to view
   }); 
```

不幸的是， **break**不适用于 underscore.js 的 each() API 请参阅此处：[如何在 underscore.js 中破坏 _.each 函数](https://stackoverflow.com/questions/8779799/how-to-break-the-each-function-in-underscore-js)

如何编写过滤器以仅从集合中提取前 10 名

```
 this.collection.filter(); 
```

更新：collection.first(10) 为我获取过滤列表。但是，我仍然需要将 .each() 链接到此集合以处理集合项。collection.first() 不允许链。请参阅我选择的答案以获取解决方案。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-09T19:52:57.887

例如

```
this.collection.first(10) 
```

然后，如果您需要使用每个模型，例如：

```
 var collection = new Backbone.Collection([{id:1}, {id:2}, {id:3}, {id:4}, {id:5}],{model: Backbone.Model});

    var newCollection = new Backbone.Collection(collection.first(2));

    newCollection.each(function(model){
      alert(JSON.stringify(model.toJSON()));
    }); 
```

请参阅[jsfiddle](http://jsfiddle.net/X8JNE/1)。请注意，还有另一种方法可以使用本[主题中所述的](https://stackoverflow.com/questions/8240382/get-only-the-first-20-items-in-a-backbone-collection)[下划线链方法](http://documentcloud.github.com/underscore/#chain)。

查看[Backbone doc](http://backbonejs.org/#Collection-Underscore-Methods)和[Underscore doc](http://documentcloud.github.com/underscore/#first)。

# ruby-on-rails - 导轨。虚拟属性（来自父模型）查询

> ID：11890853
> 
> 赞同：1
> 
> 时间：2012-08-09T19:46:37.387
> 
> 标签：ruby-on-rails, ruby, activerecord

我有三个模型：帐户，成员和孩子。

```
Member belongs to Account
Child belongs to Member 
```

成员具有 account_id 属性 子级**没有 account_id**属性

所以我可以这样做...

```
Member.where(:account_id => current_user.account.id)

c = Child.last
c.member.account_id 
```

在索引操作中，我想列出属于特定帐户的所有子项。我不想在表格中添加额外的`account_id`列`children`。

当然，我不能这样做……

```
Child Model
def account_id
  self.member.account_id
end

Children Controller
Child.where(:account_id => current_user.account.id) 
```

**有没有办法列出属于特定帐户的所有孩子而无需添加`account_id`属性？**

顺便说一句，我在现有查询中有这个......

```
@children = Child.search(params[:search]).order(sort_column + ' ' + sort_direction).page(params[:page]).per(10) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:42:51.663

从 Child 类开始，可以这样做：

```
Child.includes(:member).where(:'members.account_id' => current_user.account.id) 
```

这可用于修改您现有的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:36:32.560

```
class Account < ActiveRecord::Base
  has_many :members
  #This is the line you were looking for
  has_many :children, :through => :members
end

class Member < ActiveRecord::Base
  belongs_to :account
  has_many :children, :class_name => "Child"
end

class Child < ActiveRecord::Base
  belongs_to :member
end 
```

现在假设您有一个 accounts 实例，您可以通过以下方式访问它的所有子实例：

`account.children`

# node.js - Heroku 多个 Web 进程

> ID：11890856
> 
> 赞同：3
> 
> 时间：2012-08-09T19:46:41.250
> 
> 标签：node.js, heroku

我正在使用 node.js 和 heroku，并且希望运行多个 web 进程。在 Procfile 中，我看起来像这样：

```
web: node web.js
web: node differentWeb.js 
```

但是，当我运行它时，它只会运行两者中的最后一个。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-09T20:37:43.877

Heroku 上的应用程序只能有一个名为的进程`web`来获取路由的 HTTP 请求。如果您需要另一个 Web 进程，那将是 Heroku 上的另一个应用程序。

# html - 如何制作始终位于顶部的标题？

> ID：11890859
> 
> 赞同：0
> 
> 时间：2012-08-09T19:46:48.930
> 
> 标签：html, header, position, fixed

我想制作一个像[http://www.chacha.com](http://www.chacha.com)这样的标题（不动，大约那么宽和那么高，并且能够在其中放置 div，并且还必须是图像）

我从一个空白的 html 文档和一个空白的 css 页面开始，所以我目前还没有编写任何代码。

我现在已经连续两天尝试这样做了，所以我非常感谢任何人可以提供的任何帮助。

我有 gimp 所以如果有人能给我一个完美的标题和完美的背景尺寸的图像尺寸，我会更加感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T19:50:58.900

CSS：

```
#header {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 10px;
  background: url(yourimage.png) repeat-x;
}

<!--html -->
<div id="header"></div> 
```

这应该给你一个起点，如果没有确切地看到布局应该是什么，我不能告诉你更多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T20:00:16.510

您正在寻找的 CSS 属性是`position: fixed`将元素相对于视口定位的属性。这是很好的定位细分：[https ://developer.mozilla.org/en-US/docs/CSS/position](https://developer.mozilla.org/en-US/docs/CSS/position)

在这种特定情况下，您所拥有的是一个样式大致如下的元素：

```
#header_id {
    position: fixed;
    width: 100%;
    height: 35px;
} 
```

您不必设置高度，但除非固定元素中有内容，否则如果没有指定高度，它将折叠。他们似乎还`drop-shadow`为元素添加了一个整洁的浮动效果。

如果你想在里面放一张图片，你可以把`<img>`里面的 header 元素，或者用它作为`background-image`CSS 中的 url 并定位它`background-position`（另见：[https ://developer.mozilla.org/en-US/ docs/CSS/background-position](https://developer.mozilla.org/en-US/docs/CSS/background-position)虽然如果你想对这个属性做任何太具体的事情，底部的兼容性表很重要）。

您可以对任何块级元素（或任何带有`display:block`集合的元素）执行此操作。在您的示例中，他们使用的是 HTML5`<header>`标签；如果不适合您的页面， a`<div>`也会起作用。`<header>`

我建议将 Firebug 插件与 Firefox（或其他现代浏览器的类似开发人员控制台）一起使用——您可以右键单击页面上的元素并从下拉菜单中选择“检查元素”，然后查看标记和样式以查看其他网站的构建方式。当您浏览互联网并看到一些东西并想“这是一个巧妙的技巧，它是如何工作的？”时非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-23T15:48:20.813

全宽固定接头

```
 header { 
    width:100%;
    background:green;
    height:60px;
    margin:-8px;
    position:fixed;
} 
```

对于非全宽固定标题
创建一个 div 并设置宽度和高度（您也可以将其设置为向左或向右`float:left, float:right`）然后在此 div 中将代码放在上面但没有`margin:-8px;`并将宽度更改为您的 div 具有的宽度。这是一个测试

# android - 获取在 Android 的媒体播放器中播放的当前歌曲的详细信息

> ID：11890860
> 
> 赞同：0
> 
> 时间：2012-08-09T19:47:00.063
> 
> 标签：android, android-intent, audio-player, android-music-player

我目前正在使用类似于下面的方法来检索信息，但是我不确定如何获得该流派。有谁知道流派的额外字符串是什么，或者是否有额外的字符串？谢谢。

[当前播放音乐的曲目信息](https://stackoverflow.com/questions/10510292/how-to-get-current-music-track-info)

```
public class CurrentMusicTrackInfoActivity extends Activity 
{

 public static final String SERVICECMD = "com.android.music.musicservicecommand";

@Override
public void onCreate(Bundle savedInstanceState) 
{
super.onCreate(savedInstanceState);
setContentView(R.layout.main);

com.sec.android.app.music.player.service.CorePlayerService

IntentFilter iF = new IntentFilter();
iF.addAction("com.android.music.metachanged");
iF.addAction("com.android.music.playstatechanged");
iF.addAction("com.android.music.playbackcomplete");
iF.addAction("com.android.music.queuechanged");

registerReceiver(mReceiver, iF);
}

private BroadcastReceiver mReceiver = new BroadcastReceiver() 
{

@Override
public void onReceive(Context context, Intent intent)
{
String action = intent.getAction();
String cmd = intent.getStringExtra("command");
Log.v("tag ", action + " / " + cmd);
String artist = intent.getStringExtra("artist");
String album = intent.getStringExtra("album");
String track = intent.getStringExtra("track");
Log.v("tag",artist+":"+album+":"+track);
Toast.makeText(CurrentMusicTrackInfoActivity.this,track,Toast.LENGTH_SHORT).show(); 
}
};

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T14:06:17.827

事实证明，没有额外的流派通过，只有上面的 3 和 id。我能够看到使用以下代码传递的附加内容：

```
Bundle b = intent.getExtras();
        Set<String> set = b.keySet();
        Iterator it = set.iterator();
        while(it.hasNext()==true){
            Toast.makeText(getApplicationContext(),""+it.next(), Toast.LENGTH_SHORT).show();
        } 
```

# javascript - 谷歌地图标记被执行动画压扁

> ID：11890862
> 
> 赞同：0
> 
> 时间：2012-08-09T19:47:07.933
> 
> 标签：javascript, google-maps-api-3, backbone.js, marionette

当我添加一个标记时`animation: google.maps.Animation.DROP`，标记被压扁（它的宽度小于正常值），同时执行放置动画。

这仅在执行动画时发生。动画完成后，标记会恢复到正常大小。

一些澄清：这是在 Backbone.Marionette.ItemView 中执行的。

相关代码为：

```
// For each model add a marker
_.each(this.model.models, function (model) {
    var coordinates = model.get('coordinate'),
        position = new google.maps.LatLng(coordinates.latitude, coordinates.longitude),
        marker;
    // Don't add the same marker twice.
    if (!this.markers[model.get('id')]) {
        marker = new google.maps.Marker({
            position: position,
            title: model.get('name'),
            map: this.map
        });
        // Save the marker
        this.markers[model.get('id')] = marker;
    }
    // Extend the bounds of the map
    bounds.extend(position);
}, this);
this.map.fitBounds(bounds); 
```

# objective-c - Objective C 代码是否有 github markdown 语言标识符？

> ID：11890864
> 
> 赞同：43
> 
> 时间：2012-08-09T19:47:27.707
> 
> 标签：objective-c, github, markdown

在官方[github 风格的 Markdown 文档](http://github.github.com/github-flavored-markdown/)中，它们展示了我们如何使用栅栏来标记代码块，并且我们可以选择提供语言标识符，例如

```
```ruby
require 'redcarpet'
markdown = Redcarpet.new("Hello World!")
puts markdown.to_html
``` 
```

Objective C 有语言标识符吗？我已经搜索并找不到参考。

此外，是否有可以在 github markdown 中使用的所有受支持语言标识符的列表？

* * *

## 回答 #1

> 赞同：78
> 
> 时间：2012-08-09T19:52:07.003

标识符是`objective-c`。

在这里您可以找到完整列表： [http ://coapp.org/reference/garrett-flavored-markdown.html](http://coapp.org/reference/garrett-flavored-markdown.html)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-08-16T19:28:52.960

标识符是

```
objc 
```

在此处查看此示例，作者获取代码突出显示的工作：[https ://raw.githubusercontent.com/dchohfi/KeyValueObjectMapping/master/README.md](https://raw.githubusercontent.com/dchohfi/KeyValueObjectMapping/master/README.md)

这也是另一个例子：[https ://raw.githubusercontent.com/github/objective-c-style-guide/master/README.md](https://raw.githubusercontent.com/github/objective-c-style-guide/master/README.md)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-28T08:52:59.550

如果您的其他解决方案不起作用，请尝试在 highlight.js 和 prism.js 中工作的**objectivec**

# sql - 如何在 SQL Server 的历史表中存储历史记录

> ID：11890868
> 
> 赞同：39
> 
> 时间：2012-08-09T19:47:45.517
> 
> 标签：sql, sql-server

我有 2 张桌子，`Table-A`并且`Table-A-History`.

*   `Table-A`包含当前数据行。
*   `Table-A-History`包含历史数据

我想在 中包含我的数据的最新行`Table-A`，并`Table-A-History`包含历史行。

我可以想到两种方法来实现这一点：

1.  每当有新数据行可用时，将当前行从`Table-A`移至`Table-A-History`并使用最新数据更新该`Table-A`行（通过`insert into select`或`select into table`）

    或者

2.  每当有新数据行可用时，更新`Table-A`的行并将新行插入`Table-A-History`.

关于性能，方法 1 还是 2 更好？有没有更好的不同方法来实现这一点？

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-10-02T18:42:25.667

基本上，您希望跟踪/审核对表的更改，同时保持主表的大小。

有几种方法可以解决这个问题。下面讨论每种方式的优缺点。

1 -**使用触发器审计表。**

如果您要审核表（插入、更新、删除），请查看我的如何取消不需要的事务 - SQL 星期六幻灯片，带代码 - [http://craftydba.com/?page_id=880](http://craftydba.com/?page_id=880)。如果您选择，填充审计表的触发器可以保存来自多个表的信息，因为数据保存为 XML。因此，如有必要，您可以通过解析 XML 来取消删除操作。它跟踪谁和什么做出了改变。

或者，您可以将审计表放在它自己的文件组上。

```
Description:
    Table Triggers For (Insert, Update, Delete)
    Active table has current records.
    Audit (history) table for non-active records.

Pros:
    Active table has smaller # of records.
    Index in active table is small.
    Change is quickly reported in audit table.
    Tells you what change was made (ins, del, upd)

Cons:
    Have to join two tables to do historical reporting.
    Does not track schema changes. 
```

2 -**有效约会记录**

如果您永远不会从审计表中清除数据，为什么不将该行标记为已删除，而是永远保留它呢？许多系统，如 people soft 使用有效约会来显示记录是否不再有效。在 BI 世界中，这称为类型 2 维表（缓慢变化的维度）。请参阅数据仓库研究所的文章。[http://www.bidw.org/datawarehousing/scd-type-2/](http://www.bidw.org/datawarehousing/scd-type-2/)每条记录都有一个开始和结束日期。

所有活动记录的结束日期均为空。

```
Description:
    Table Triggers For (Insert, Update, Delete)
    Main table has both active and historical records.

Pros:
    Historical reporting is easy.
    Change is quickly shown in main table.

Cons:
    Main table has a large # of records.
    Index of main table is large.
    Both active & history records in same filegroup.
    Does not tell you what change was made (ins, del, upd)
    Does not track schema changes. 
```

3 -**更改数据捕获（企业功能）。**

Micorsoft SQL Server 2008 引入了变更数据捕获功能。虽然这会在事后使用 LOG 阅读器跟踪数据更改 (CDC)，但它缺少诸如谁和什么进行了更改之类的信息。MSDN 详细信息 - [http://technet.microsoft.com/en-us/library/bb522489(v=sql.105).aspx](http://technet.microsoft.com/en-us/library/bb522489(v=sql.105).aspx)

此解决方案取决于运行的 CDC 作业。sql 代理的任何问题都会导致数据显示延迟。

请参阅变更数据捕获表。 [http://technet.microsoft.com/en-us/library/bb500353(v=sql.105).aspx](http://technet.microsoft.com/en-us/library/bb500353(v=sql.105).aspx)

```
Description:
    Enable change data capture

Pros:
    Do not need to add triggers or tables to capture data.
    Tells you what change was made (ins, del, upd) the _$operation field in 
    <user_defined_table_CT>
    Tracks schema changes.    

Cons:
    Only available in enterprise version.
    Since it reads the log after the fact, time delay in data showing up.
    The CDC tables do not track who or what made the change.
    Disabling CDC removes the tables (not nice)!
    Need to decode and use the _$update_mask to figure out what columns changed. 
```

4 -**更改跟踪功能（所有版本）。**

Micorsoft SQL Server 2008 引入了更改跟踪功能。与 CDC 不同，它带有所有版本；但是，它带有一堆 TSQL 函数，您必须调用它们才能弄清楚发生了什么。

它旨在通过应用程序将一个数据源与 SQL 服务器同步。TechNet 上有一个完整的同步框架工作。

[http://msdn.microsoft.com/en-us/library/bb933874.aspx](http://msdn.microsoft.com/en-us/library/bb933874.aspx) [http://msdn.microsoft.com/en-us/library/bb933994.aspx](http://msdn.microsoft.com/en-us/library/bb933994.aspx) [http://technet.microsoft.com/en-我们/图书馆/bb934145(v=sql.105).aspx](http://technet.microsoft.com/en-us/library/bb934145(v=sql.105).aspx)

与 CDC 不同，您指定在清除之前数据库中的更改持续多长时间。此外，插入和删除不记录数据。更新仅记录更改了哪些字段。

由于您正在将 SQL Server 源同步到另一个目标，因此可以正常工作。除非您编写定期作业以找出更改，否则这对审计不利。

您仍然必须将该信息存储在某处。

```
Description:
    Enable change tracking

Cons:
    Not a good auditing solution 
```

前三个解决方案将适用于您的审计。我喜欢第一个解决方案，因为我在我的环境中广泛使用它。

真挚地

约翰

**演示文稿中的代码片段（汽车数据库）**

```
-- 
-- 7 - Auditing data changes (table for DML trigger)
-- 

-- Delete existing table
IF OBJECT_ID('[AUDIT].[LOG_TABLE_CHANGES]') IS NOT NULL 
  DROP TABLE [AUDIT].[LOG_TABLE_CHANGES]
GO

-- Add the table
CREATE TABLE [AUDIT].[LOG_TABLE_CHANGES]
(
  [CHG_ID] [numeric](18, 0) IDENTITY(1,1) NOT NULL,
  [CHG_DATE] [datetime] NOT NULL,
  [CHG_TYPE] [varchar](20) NOT NULL,
  [CHG_BY] [nvarchar](256) NOT NULL,
  [APP_NAME] [nvarchar](128) NOT NULL,
  [HOST_NAME] [nvarchar](128) NOT NULL,
  [SCHEMA_NAME] [sysname] NOT NULL,
  [OBJECT_NAME] [sysname] NOT NULL,
  [XML_RECSET] [xml] NULL,
 CONSTRAINT [PK_LTC_CHG_ID] PRIMARY KEY CLUSTERED ([CHG_ID] ASC)
) ON [PRIMARY]
GO

-- Add defaults for key information
ALTER TABLE [AUDIT].[LOG_TABLE_CHANGES] ADD CONSTRAINT [DF_LTC_CHG_DATE] DEFAULT (getdate()) FOR [CHG_DATE];
ALTER TABLE [AUDIT].[LOG_TABLE_CHANGES] ADD CONSTRAINT [DF_LTC_CHG_TYPE] DEFAULT ('') FOR [CHG_TYPE];
ALTER TABLE [AUDIT].[LOG_TABLE_CHANGES] ADD CONSTRAINT [DF_LTC_CHG_BY] DEFAULT (coalesce(suser_sname(),'?')) FOR [CHG_BY];
ALTER TABLE [AUDIT].[LOG_TABLE_CHANGES] ADD CONSTRAINT [DF_LTC_APP_NAME] DEFAULT (coalesce(app_name(),'?')) FOR [APP_NAME];
ALTER TABLE [AUDIT].[LOG_TABLE_CHANGES] ADD CONSTRAINT [DF_LTC_HOST_NAME] DEFAULT (coalesce(host_name(),'?')) FOR [HOST_NAME];
GO

--
--  8 - Make DML trigger to capture changes
--

-- Delete existing trigger
IF OBJECT_ID('[ACTIVE].[TRG_FLUID_DATA]') IS NOT NULL 
  DROP TRIGGER [ACTIVE].[TRG_FLUID_DATA]
GO

-- Add trigger to log all changes
CREATE TRIGGER [ACTIVE].[TRG_FLUID_DATA] ON [ACTIVE].[CARS_BY_COUNTRY]
  FOR INSERT, UPDATE, DELETE AS
BEGIN

  -- Detect inserts
  IF EXISTS (select * from inserted) AND NOT EXISTS (select * from deleted)
  BEGIN
    INSERT [AUDIT].[LOG_TABLE_CHANGES] ([CHG_TYPE], [SCHEMA_NAME], [OBJECT_NAME], [XML_RECSET])
    SELECT 'INSERT', '[ACTIVE]', '[CARS_BY_COUNTRY]', (SELECT * FROM inserted as Record for xml auto, elements , root('RecordSet'), type)
    RETURN;
  END

  -- Detect deletes
  IF EXISTS (select * from deleted) AND NOT EXISTS (select * from inserted)
  BEGIN
    INSERT [AUDIT].[LOG_TABLE_CHANGES] ([CHG_TYPE], [SCHEMA_NAME], [OBJECT_NAME], [XML_RECSET])
    SELECT 'DELETE', '[ACTIVE]', '[CARS_BY_COUNTRY]', (SELECT * FROM deleted as Record for xml auto, elements , root('RecordSet'), type)
    RETURN;
  END

  -- Update inserts
  IF EXISTS (select * from inserted) AND EXISTS (select * from deleted)
  BEGIN
    INSERT [AUDIT].[LOG_TABLE_CHANGES] ([CHG_TYPE], [SCHEMA_NAME], [OBJECT_NAME], [XML_RECSET])
    SELECT 'UPDATE', '[ACTIVE]', '[CARS_BY_COUNTRY]', (SELECT * FROM deleted as Record for xml auto, elements , root('RecordSet'), type)
    RETURN;
  END

END;
GO

--
--  9 - Test DML trigger by updating, deleting and inserting data
--

-- Execute an update
UPDATE [ACTIVE].[CARS_BY_COUNTRY]
SET COUNTRY_NAME = 'Czech Republic'
WHERE COUNTRY_ID = 8
GO

-- Remove all data
DELETE FROM [ACTIVE].[CARS_BY_COUNTRY];
GO

-- Execute the load
EXECUTE [ACTIVE].[USP_LOAD_CARS_BY_COUNTRY];
GO 

-- Show the audit trail
SELECT * FROM [AUDIT].[LOG_TABLE_CHANGES]
GO

-- Disable the trigger
ALTER TABLE [ACTIVE].[CARS_BY_COUNTRY] DISABLE TRIGGER [TRG_FLUID_DATA]; 
```

** 审计表的外观 **

![在此处输入图像描述](../Images/aa4ec563e355819e8599e21f45ae8dff.png)

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-08-09T20:22:12.187

记录更改是我通常使用基表上的触发器来记录日志表中的更改。日志表有额外的列来记录数据库用户、操作和日期/时间。

```
create trigger Table-A_LogDelete on dbo.Table-A
  for delete
as
  declare @Now as DateTime = GetDate()
  set nocount on
  insert into Table-A-History
    select SUser_SName(), 'delete-deleted', @Now, *
      from deleted
go
exec sp_settriggerorder @triggername = 'Table-A_LogDelete', @order = 'last', @stmttype = 'delete'
go
create trigger Table-A_LogInsert on dbo.Table-A
  for insert
as
  declare @Now as DateTime = GetDate()
  set nocount on
  insert into Table-A-History
    select SUser_SName(), 'insert-inserted', @Now, *
      from inserted
go
exec sp_settriggerorder @triggername = 'Table-A_LogInsert', @order = 'last', @stmttype = 'insert'
go
create trigger Table-A_LogUpdate on dbo.Table-A
  for update
as
  declare @Now as DateTime = GetDate()
  set nocount on
  insert into Table-A-History
    select SUser_SName(), 'update-deleted', @Now, *
      from deleted
  insert into Table-A-History
    select SUser_SName(), 'update-inserted', @Now, *
      from inserted
go
exec sp_settriggerorder @triggername = 'Table-A_LogUpdate', @order = 'last', @stmttype = 'update' 
```

日志记录触发器应始终设置为最后触发。否则，后续触发器可能会回滚原始事务，但日志表已经更新。这是一种令人困惑的状况。

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2017-05-02T02:17:58.487

最新版本的 SQL Server（2016+ 和 Azure）具有临时表，可提供所需的确切功能，作为一流的功能。 [https://docs.microsoft.com/en-us/sql/relational-databases/tables/temporal-tables](https://docs.microsoft.com/en-us/sql/relational-databases/tables/temporal-tables)

Microsoft 的某个人可能会阅读此页面。:)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-09T19:51:01.397

方法 3 怎么样：`Table-A`对`Table-A-History`. 插入`Table-A-History`并让适当的过滤逻辑生成`Table-A`。这样你只插入一个表。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-08-09T20:00:14.443

尽管它会占用更多空间，但拥有包含最新记录的历史记录表也会让您省去编写报告和查看更改是如何发生的以及何时发生的痛苦。在我看来，一些值得思考的事情。

就性能而言，我希望它们是相同的。但是，您肯定不想从非历史表中删除记录（选项 1 的“移动”），因为您在两个表之间使用了参照完整性，对吗？

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-09T20:00:36.187

我更喜欢方法1
此外，我还将在历史表中维护当前记录，
这取决于需要。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-09T20:13:02.823

选项 1 没问题。但是你也有方法4:)

1.  将新记录插入到您的表中，

2.  使用 mysql 调度程序将旧记录移至常规基础上的存档表。您可以在负载最小的时间安排数据归档，例如在夜间。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-10-23T14:35:23.543

您可以像这样简单地创建过程或作业来克服此问题：

```
 create procedure [dbo].[sp_LoadNewData]
 AS
INSERT INTO [dbo].[Table-A-History]
 (
 [1.Column Name], [2.Column Name], [3.Column Name], [4.Column Name]
 )    
 SELECT [1.Column Name], [2.Column Name], [3.Column Name], [4.Column Name]
 FROM dbo.[Table-A] S

 WHERE NOT EXISTS
 (
 SELECT  * FROM [dbo].[Table-A-History] D WHERE D.[1.Column Name] =S.[1.Column Name]
 ) 
```

注意：[1.Column Name]是表格的通用列。

# java - 选中复选框时出现下拉菜单

> ID：11890878
> 
> 赞同：-1
> 
> 时间：2012-08-09T19:48:22.663
> 
> 标签：java, drop-down-menu, checkbox, seam

我正在使用 Seam 制作 Java/HTML 程序。我试图在检查`<h:selectOneMenu>`a 时显示 a `<h:selectBooleanCheckbox>`。我通过在复选框中使用 "onclick="form.submit()" 并将下拉列表放入 中来做到这一点`<s:div rendered>`，但是每当页面重新加载时，下拉列表使用的变量将重置为顶部选择。我很确定是因为`<s:div>`。有谁知道我怎样才能让它在下拉列表中保持正确的选择？谢谢。

这是复选框和下拉菜单的代码：

```
<h:selectBooleanCheckbox id="checkbox" value="#{printLabel.code}" label="barcode" onclick="changeDropdowns()"/>
<br />
<s:div rendered="#{printLabel.code}">
    <h:outputLabel id="locationLabel" value="&#160;&#160;&#160;Location"/>
    <h:selectOneMenu id="locationDrop" value="#{printLabel.codeLoc}">
        <f:selectItems value="#{printLabel.getBarcodeTypes()}" />
    </h:selectOneMenu> 
</s:div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:11:05.087

如果你想用 ajax 来做，你可以这样做：可能是其他事件然后 onclick

```
<h:selectBooleanCheckbox id="checkbox" value="#{printLabel.code}" label="barcode" >
        <a4j:support event="onclick" reRender="parentdiv" />

</<h:selectBooleanCheckbox>
<br />
<s:div id="parentdiv">
<s:div rendered="#{printLabel.code}">
    <h:outputLabel id="locationLabel" value="&#160;&#160;&#160;Location"/>
    <h:selectOneMenu id="locationDrop" value="#{printLabel.codeLoc}">
        <f:selectItems value="#{printLabel.getBarcodeTypes()}" />
    </h:selectOneMenu> 
</s:div>
</s:div> 
```

添加标签库

```
xmlns:a4j="http://richfaces.org/a4j" 
```

# ajax - 在当前页面的灯箱或框架中加载链接、href、超链接、url，并刷新整个页面

> ID：11890889
> 
> 赞同：0
> 
> 时间：2012-08-09T19:48:52.667
> 
> 标签：ajax, facebook, html, lightbox, frame

我是 AJAX 新手，

我想要一个 javascript 来让所有链接（包括网页、内部链接、外部链接）在点击时加载到灯箱中。就像 Facebook，当你点击照片时，它会给你一个框架，而不会将你重定向到照片页面。

总的来说，我希望我的用户点击我网站的任何链接，不要重定向到需要刷新整个页面的新页面。我希望链接按需加载到框架中，也称为 AJAX 对吗？

其实我只是想知道这种技术叫什么？？任何谷歌搜索词？搜索查询？？

有没有推荐的文章或教程来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:56:26.553

[AJAX](https://en.wikipedia.org/wiki/Ajax_%28programming%29)：异步 JavaScript 和 XML。您的示例不是 AJAX，而是使用 JavaScript 进行*事件绑定*，从而导致发生操作以响应用户在浏览器中所做的事件。

您可以使用 jQuery 将事件绑定到页面上某种类型的所有链接。确切的实现将取决于您的 HTML 标记。

例如，如果您有多个包含在链接标签中的图像：

```
<a href="image1.jpg" class="image_link"><img src="image1.jpg" /></a>
<a href="image2.jpg" class="image_link"><img src="image2.jpg" /></a> 
```

您可以拥有类似于以下内容的 jQuery（请务必在页面中加载 jQuery）：

```
<script>
$('.image_link').click(function(event) {
    event.preventDefault(); // stops it from doing normal link action

    // and then down here you'd need JS for your lightbox library
});
</script> 
```

Smashing Magazine 有一篇文章可能对您有所帮助：[现代网页设计中的模态窗口](http://www.smashingmagazine.com/2009/05/27/modal-windows-in-modern-web-design/)。

# iphone - 游戏开始前提示提示

> ID：11890891
> 
> 赞同：0
> 
> 时间：2012-08-09T19:49:03.643
> 
> 标签：iphone, ios, uialertview

如何在游戏开始前添加显示指令的警报：

请参见下面的代码：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    if (questions && configDictionary) {

        [questionLabel setText:[[questions objectAtIndex:currentQuestonIndex] objectForKey:@"question"]];
        NSArray *answers = [[questions objectAtIndex:currentQuestonIndex] objectForKey:@"answers"];
        [answerLabel0 setText:[answers objectAtIndex:0]];
        [answerLabel1 setText:[answers objectAtIndex:1]];
        [answerLabel2 setText:[answers objectAtIndex:2]];
        [answerLabel3 setText:[answers objectAtIndex:3]];
        [pointsPerAnswerLabel setText:[NSString stringWithFormat:@"+%d points", [[configDictionary objectForKey:kPointsPerCorrectAnswer] intValue]]];
        [currentQuestionNumberLabel setText:[NSString stringWithFormat:@"question %d", currentQuestonIndex+1]];
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T19:52:25.050

使用`UIAlertView`：

```
 UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Instructions" 
    message:@"Your Instructions..." delegate:self cancelButtonTitle:@"Dismiss" 
    otherButtonTitles:nil, nil]; 

    [alert show]; 
```

如果您想在每次应用启动时提醒用户，请将其放在

```
 - (void)applicationDidFinishLaunching:(UIApplication *)application {
    } 
```

**编辑**

你说你想在按下关闭按钮后开始游戏。所以利用`UIAlertView delegate`：

```
- (void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex {

    if (buttonIndex == 0){

        //Start your game!

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:52:53.033

```
UIAlertView *message = [[UIAlertView alloc] initWithTitle:@"How to play"
                                                  message:@"Answer the questions correctly to get points blablabla..."
                                                 delegate:nil
                                        cancelButtonTitle:@"OK"
                                        otherButtonTitles:nil];
[message show]; 
```

# php - WeBid：没有正确计算夏令时的时区

> ID：11890894
> 
> 赞同：3
> 
> 时间：2012-08-09T19:49:13.573
> 
> 标签：php, timezone, dst

我目前正在使用一个开源应用程序：WeBid（可[在此处](http://www.webidsupport.com/)获得）

这是问题：

*   用户有一个存储在 DB 中的首选时区
*   该站点的默认时区存储在数据库中
*   所有数据库存储的日期都存储在“GMT-0”

该应用程序没有正确计算 DST（夏令时），因为它使用以下代码：

（包括/functions_global.php）

```
$this->ctime = time() + (($this->SETTINGS['timecorrection'] + gmdate('I')) * 3600);
$this->tdiff = ($this->SETTINGS['timecorrection'] + gmdate('I')) * 3600; 
```

gtpotyf 解释说：

> gmdate('I') -> 如果 DST 处于活动状态，则返回 1，如果不活动，则返回 0。但是，由于 gmdate 始终使用 GMT(+0) 并且该时区没有 DST，因此它将始终返回 0。
> 
> 使用 date('I') 而不是 gmdate('I') 会更好，但仍然不正确，因为它使用服务器的时区而不是用户的时区。

WeBid的最新版本没有最终修正，请帮我解决这个问题。

[来源](http://www.webidsupport.com/forums/showthread.php?4911-Date-and-time-problems&p=24530&viewfull=1#post24530)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-16T07:45:14.890

为了正确分类时区，您需要做很多事情。

将您的服务器设置为 UTC，以便 PHP`time`和`date`函数返回 UTC 时间戳。（除了相关的功能，如`strftime`.

根据您的数据库，您也可以将其时区设置为 UTC。MySQL 关于该主题的文档在[这里](https://dev.mysql.com/doc/refman/5.5/en/time-zone-support.html)。

如果还没有，您需要将存储在其中的日期时间迁移到 UTC。（我不确定您所说的 GMT-0 是什么意思。）

让用户选择 PHP 的 DateTimeZone 类支持的“欧洲/伦敦”格式的时区。

经过一些研究，我将以下时区数组放在一起以在下拉框中呈现给用户，因为我不希望重复（例如，阿姆斯特丹和布鲁塞尔位于同一时区。）我不会声称它不过要完美。根据您的用户群，您可能需要更详细地调查某些时区。

```
$timezones = array(
        'Pacific/Midway' => '(UTC-11:00) Midway Island, Samoa',
        'Pacific/Honolulu' => '(UTC-10:00) Hawaii-Aleutian',
        'Pacific/Marquesas' => '(UTC-09:30) Marquesas Islands',
        'Pacific/Gambier' => '(UTC-09:00) Gambier Islands',
        'America/Anchorage' => '(UTC-09:00) Alaska',
        'America/Ensenada' => '(UTC-08:00) Tijuana, Baja California',
        'Etc/GMT+8' => '(UTC-08:00) Pitcairn Islands',
        'America/Los_Angeles' => '(UTC-08:00) Pacific Time (US & Canada)',
        'America/Denver' => '(UTC-07:00) Mountain Time (US & Canada)',
        'America/Chihuahua' => '(UTC-07:00) Chihuahua, La Paz, Mazatlan',
        'America/Dawson_Creek' => '(UTC-07:00) Arizona',
        'America/Belize' => '(UTC-06:00) Saskatchewan, Central America',
        'America/Cancun' => '(UTC-06:00) Guadalajara, Mexico City, Monterrey',
        'Chile/EasterIsland' => '(UTC-06:00) Easter Island',
        'America/Chicago' => '(UTC-06:00) Central Time (US & Canada)',
        'America/New_York' => '(UTC-05:00) Eastern Time (US & Canada)',
        'America/Havana' => '(UTC-05:00) Cuba',
        'America/Bogota' => '(UTC-05:00) Bogota, Lima, Quito, Rio Branco',
        'America/Caracas' => '(UTC-04:30) Caracas',
        'America/Santiago' => '(UTC-04:00) Santiago',
        'America/La_Paz' => '(UTC-04:00) La Paz',
        'Atlantic/Stanley' => '(UTC-04:00) Falkland Islands',
        'America/Campo_Grande' => '(UTC-04:00) Brazil',
        'America/Goose_Bay' => '(UTC-04:00) Atlantic Time (Goose Bay)',
        'America/Glace_Bay' => '(UTC-04:00) Atlantic Time (Canada)',
        'America/St_Johns' => '(UTC-03:30) Newfoundland',
        'America/Araguaina' => '(UTC-03:00) UTC-3',
        'America/Montevideo' => '(UTC-03:00) Montevideo',
        'America/Miquelon' => '(UTC-03:00) Miquelon, St. Pierre',
        'America/Godthab' => '(UTC-03:00) Greenland',
        'America/Argentina/Buenos_Aires' => '(UTC-03:00) Buenos Aires',
        'America/Sao_Paulo' => '(UTC-03:00) Brasilia',
        'America/Noronha' => '(UTC-02:00) Mid-Atlantic',
        'Atlantic/Cape_Verde' => '(UTC-01:00) Cape Verde Is.',
        'Atlantic/Azores' => '(UTC-01:00) Azores',
        'Europe/Dublin' => '(UTC) Irish Standard Time : Dublin',
        'Europe/Lisbon' => '(UTC) Western European Time : Lisbon',
        'Europe/London' => '(GMT) Greenwich Mean Time : London, Belfast',
        'Africa/Abidjan' => '(GMT) Monrovia, Reykjavik',
        'Europe/Amsterdam' => '(UTC+01:00) Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna',
        'Europe/Belgrade' => '(UTC+01:00) Belgrade, Bratislava, Budapest, Ljubljana, Prague',
        'Europe/Brussels' => '(UTC+01:00) Brussels, Copenhagen, Madrid, Paris',
        'Africa/Algiers' => '(UTC+01:00) West Central Africa',
        'Africa/Windhoek' => '(UTC+01:00) Windhoek',
        'Asia/Beirut' => '(UTC+02:00) Beirut',
        'Africa/Cairo' => '(UTC+02:00) Cairo',
        'Asia/Gaza' => '(UTC+02:00) Gaza',
        'Africa/Johannesburg' => '(UTC+02:00) Johannesburg, Harare, Pretoria',
        'Asia/Jerusalem' => '(UTC+02:00) Jerusalem',
        'Europe/Athens' => '(UTC+02:00) Athens',
        'Europe/Minsk' => '(UTC+02:00) Minsk',
        'Asia/Damascus' => '(UTC+02:00) Syria',
        'Europe/Moscow' => '(UTC+03:00) Moscow, St. Petersburg, Volgograd',
        'Africa/Addis_Ababa' => '(UTC+03:00) Nairobi',
        'Asia/Tehran' => '(UTC+03:30) Tehran',
        'Asia/Dubai' => '(UTC+04:00) Abu Dhabi, Muscat',
        'Asia/Yerevan' => '(UTC+04:00) Yerevan',
        'Asia/Kabul' => '(UTC+04:30) Kabul',
        'Asia/Yekaterinburg' => '(UTC+05:00) Ekaterinburg',
        'Asia/Tashkent' => '(UTC+05:00) Tashkent',
        'Asia/Kolkata' => '(UTC+05:30) Chennai, Kolkata, Mumbai, New Delhi',
        'Asia/Katmandu' => '(UTC+05:45) Kathmandu',
        'Asia/Dhaka' => '(UTC+06:00) Astana, Dhaka',
        'Asia/Novosibirsk' => '(UTC+06:00) Novosibirsk',
        'Asia/Rangoon' => '(UTC+06:30) Yangon (Rangoon)',
        'Asia/Bangkok' => '(UTC+07:00) Bangkok, Hanoi, Jakarta',
        'Asia/Krasnoyarsk' => '(UTC+07:00) Krasnoyarsk',
        'Asia/Hong_Kong' => '(UTC+08:00) Beijing, Chongqing, Hong Kong, Urumqi',
        'Asia/Irkutsk' => '(UTC+08:00) Irkutsk, Ulaan Bataar',
        'Australia/Perth' => '(UTC+08:00) Perth',
        'Australia/Eucla' => '(UTC+08:45) Eucla',
        'Asia/Tokyo' => '(UTC+09:00) Osaka, Sapporo, Tokyo',
        'Asia/Seoul' => '(UTC+09:00) Seoul',
        'Asia/Yakutsk' => '(UTC+09:00) Yakutsk',
        'Australia/Adelaide' => '(UTC+09:30) Adelaide',
        'Australia/Darwin' => '(UTC+09:30) Darwin',
        'Australia/Sydney' => '(UTC+10:00) Sydney, Canberra, Brisbane',
        'Australia/Hobart' => '(UTC+10:00) Hobart',
        'Asia/Vladivostok' => '(UTC+10:00) Vladivostok',
        'Australia/Lord_Howe' => '(UTC+10:30) Lord Howe Island',
        'Etc/GMT-11' => '(UTC+11:00) Solomon Is., New Caledonia',
        'Asia/Magadan' => '(UTC+11:00) Magadan',
        'Pacific/Norfolk' => '(UTC+11:30) Norfolk Island',
        'Asia/Anadyr' => '(UTC+12:00) Anadyr, Kamchatka',
        'Pacific/Auckland' => '(UTC+12:00) Auckland, Wellington',
        'Etc/GMT-12' => '(UTC+12:00) Fiji, Kamchatka, Marshall Is.',
        'Pacific/Chatham' => '(UTC+12:45) Chatham Islands',
        'Pacific/Tongatapu' => '(UTC+13:00) Nuku Alofa',
        'Pacific/Kiritimati' => '(UTC+14:00) Kiritimati'
    ); 
```

当日期从您的数据库中出来时，需要将它们从 UTC 转换为用户的时区。

```
$timestamp = time(); // or a timestamp from your DB

# create server and user timezone objects
$fromZone = new DateTimeZone('UTC'); // UTC
$toZone = new DateTimeZone($userTimezone); // Europe/London, or whatever it happens to be

$time = date('Y-m-d H:i:s', $timestamp);
$dt = new DateTime($time, $fromZone);
echo $dt->format('Y-m-d H:i:s'); // Still UTC

$dt->setTimezone($toZone);
echo $dt->format('Y-m-d H:i:s'); // Converted 
```

您需要通过 WeBid 应用程序并修改适当的部分以正确转换。

* * *

所以，使用上面的代码，你需要几个函数来做这样的事情：

```
function getConvertedDateTimeObject($timestamp, $userTimezone){
    # create server and user timezone objects
    $fromZone = new DateTimeZone('UTC'); // UTC
    $toZone = new DateTimeZone($userTimezone); // Europe/London, or whatever it happens to be

    $time = date('Y-m-d H:i:s', $timestamp);
    $dt = new DateTime($time, $fromZone);
    $dt->setTimezone($toZone);
    return $dt;
}

function getUserTimestamp($timestamp, $userTimezone){
    $dt = getConvertedDateTimeObject($timestamp, $userTimezone);
    return $dt->getTimestamp();
}

function getUserOffset($timestamp, $userTimezone){
    $dt = getConvertedDateTimeObject($timestamp, $userTimezone);
    return $dt->getOffset();
} 
```

然后在你的课上：

```
$this->ctime = getUserTimestamp(time(), $userTimezone); // I assume you have access to the user's timezone?
$this->tdiff = getUserOffset(time(), $userTimezone); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-18T09:35:15.197

bcmcfc 答案的替代解决方案（这几乎说明了一切）：

从 WeBid 中删除任何时区支持（至少禁用任何自定义）并将所有内容保存为 UTC（如果还没有的话）。

修改界面以使用 Javascript 显示日期和时间戳。`Date`浏览器将根据浏览器或操作系统的设置正确地转换一个 unix 时间戳（不要忘记乘以 1000，Javascript期望毫秒，而不是 PHP 中的秒）。

例如，不要输出 2012-08-18 09:33:43，而是输出直接从数据库中获取的`<script>document.write(new Date(1345282423*1000).toString());</script>`where ，或者使用.`1345282423``strtotime`

您只需要更改显示日期和时间戳的功能，并禁用时区自定义（强制 UTC/GMT）（不要忘记`date_default_timezone_set("UTC");`）。

这对我来说似乎微不足道。

# underscore.js - 如何使用 Underscore.js 获取累积和数组？

> ID：11890897
> 
> 赞同：5
> 
> 时间：2012-08-09T19:49:24.547
> 
> 标签：underscore.js

我有一个`array = [1,2,3,4,5]`并且想使用[underscore.js获得累积和](http://underscorejs.org/)*数组*。

我想要的结果是：

```
[1,3,6,10,15] 
```

我希望*数组*不是累积和 15 作为值。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-09T19:57:38.750

你可以这样做 [`_.reduce()`](http://underscorejs.org/#reduce)：

```
_.reduce([1, 2, 3, 4, 5], function (acc, n) { acc.push( (acc.length > 0 ? acc[acc.length-1] : 0) + n); return acc }, []) 
```

更易读的版本在这里：

```
var prefixSum = function (arr) {
    var builder = function (acc, n) {
        var lastNum = acc.length > 0 ? acc[acc.length-1] : 0;
        acc.push(lastNum + n);
        return acc;
    };
    return _.reduce(arr, builder, []);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T20:09:31.747

[`_.map()`](http://underscorejs.org/#map)也是一种选择：

```
_.map(array,function(num,i){ if(i > 0) array[i] += array[i-1]; }); 
```

[**jsFiddle 演示**](http://jsfiddle.net/Tz63M/)

*请注意，这会编辑原始数组，并且在技术上`_.map`不是应该做的*

如果您想要一个创建新数组的非破坏性版本：

```
var array = [1,2,3,4,5];
var cumulative = 0;
var sums = _.map(array,function(num){ 
    cumulative += num;
    return cumulative;
}); 
```

[**jsFiddle 演示**](http://jsfiddle.net/pgRnC/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-05T10:17:40.263

使用[`_.reduce()`](http://underscorejs.org/#reduce)

```
return _.reduce(
    array
    , (acc, _) => { 
        acc.push(_ + acc.slice(-1)[0])    // adding previous to current
        return acc
    }
    , [0]                                 // init acc with 0
).slice(1)                                // loose 0 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2020-04-06T12:11:58.457

[1, 2, 3, 4, 5].map((c,i,a) => c + (a[i-1] || 0));

# c# - 如何将消息广播到集线器类中的多个客户端组

> ID：11890899
> 
> 赞同：0
> 
> 时间：2012-08-09T19:49:43.957
> 
> 标签：c#, asp.net, signalr

目前我正在尝试将我的中心类中的消息广播到组列表，`List<string> groups`. 我将如何向这些组中的每一个广播这些消息，我不知道这是否是使用`foreach`或`for`循环的最佳方法

```
foreach(string group in groups){
   Clients[group].sendMessage(message);
} 
```

如果你有很多组，我认为这不是最有效的方式，每个组只有 1 个用户，因为我将他们的用户名作为他们的组

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T21:27:09.810

至少在 SignalR v0.5.2 中，使用 foreach 循环是实现所需目标的唯一方法。也许未来的版本包括一种在一次呼叫中向多个组广播的方法，但我不会太担心循环（请记住 SignalR 中的所有内容都是异步的，所以广播也是如此）。

# c# - 如何从为目录列表打开的目录中获取文件？

> ID：11890909
> 
> 赞同：2
> 
> 时间：2012-08-09T19:50:23.937
> 
> 标签：c#, asp.net, ftp, file-permissions

假设一个网站已经为其文件夹之一设置了目录列表权限，我可以在网络浏览器上看到文件[如图所示]。有没有办法将此文件夹中的文件获取到数组中？

![在此处输入图像描述](../Images/766898fe266c5f464b88a0e7c39dbcdf.png)

总之，我需要使用一种`DirectoryInfo.GetFiles("C:/");`对 URL 执行操作的方法。

编辑：我宁愿使用一种方法而不是获取网络响应并解析结果。这就像一个后门，以防万一没有替代方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T20:07:16.973

此代码将帮助您获取 html

```
 WebRequest request = WebRequest.Create("http://yourwebsite/yourwebdirectory/");
             var webResponse=request.GetResponse();
             Stream dataStream = webResponse.GetResponseStream(); 
             StreamReader reader = new StreamReader(dataStream); 
             string responseFromServer = reader.ReadToEnd(); 
             Console.WriteLine(responseFromServer); 
             reader.Close();
             webResponse.Close(); 
```

获得 html 后，您可以对其进行解析以获取文件名

# c# - 将呈现的 HTML 写入文件

> ID：11890913
> 
> 赞同：1
> 
> 时间：2012-08-09T19:50:35.040
> 
> 标签：c#, asp.net, html

我有一个显示用户可以编辑的表格的网络应用程序。在编辑过程中，原始表格的各种内部 HTML 被用户所做的编辑所取代。用户完成后，我想将生成的表格保存在 .html 文件中，这样我就可以将其包含在 PowerPoint 幻灯片中，而无需重新创建它。基本上我想在编辑后捕获 .aspx 文件并将其写入文件。

任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T20:29:58.187

> 基本上我想按原样捕获 .aspx 文件

因为您声明“捕获 ASPX”，所以我假设数据编辑保存在某处（内存/数据库）。这意味着可以直接覆盖`Render()`控件/页面的方法并将输出流重定向（或复制）到文件。

## 例子

```
protected override void Render( HtmlTextWriter writer ) {
    using( HtmlTextWriter htmlwriter = new HtmlTextWriter( new StringWriter() ) ) {

        base.Render( htmlwriter );
        string renderedContent = htmlwriter.InnerWriter.ToString();

        // do something here with the string, like save to disk
        File.WriteAllText( @"c:\temp\foo.html", renderedContent );

        // you could also Response.BinaryWrite() the data to the client 
        // so that it could be saved on the user's machine.

        // and/or write it out to the output stream as well
        writer.Write( renderedContent );
    }
} 
```

## 顺序

*   用户输入数据
*   您将结果存储在某处
*   您使用最新的内容重新渲染控件
*   捕获控件的输出并将其写入文件

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T20:00:58.450

如果您在客户端执行此操作，则可以使用 jquery 执行此类操作

[http://jsfiddle.net/BAVzC/3/](http://jsfiddle.net/BAVzC/3/)

然后，您可以将粘贴复制到文本文件中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T20:25:17.253

只是一些指针。

您可以使用 html 等 jquery 函数获取页面部分的整个内部[html](http://api.jquery.com/html/)

您可以使用 ajax 将其发送到您的服务器。

您可以编写一个 http 处理程序来在服务器上接收它。由于您只打算将其保存为固定格式的 html 文件，因此不需要其他任何内容。我不会使用页面来避免创建所有控件的额外开销，并且除非您设置`ValidateRequest`为“false”，否则页面将不会接收 html 输入。

# servicestack - 服务堆栈将 RPC 迁移到 REST 问题

> ID：11890915
> 
> 赞同：3
> 
> 时间：2012-08-09T19:50:42.310
> 
> 标签：servicestack

试图与管理团队一起推销从传统的 ASP.Net /SOAP Web 服务迁移到 ServiceStack。

我正在努力解决一些 RPC'ish 问题。要求是我支持 SOAP（甚至是反手），希望在 REST 上销售我的服务消费者。

以一个名为“ReplaceItem”的服务为例，它基本上需要：

1.  关闭项目编号
2.  更换项目编号
3.  店铺编号
4.  一堆其他替换项目数据

我应该创建一个 ReplacementItem DTO 吗？似乎如果我有许多此类函数，我将拥有大量的 DTO，而不是大量的 RPC 方法。另外，在这种情况下，“id”是什么，我将使用什么 REST 方法？

我知道 REST/SS 为我提供了用于域级别结构（如 Items/Customers/etc）的基本 CRUD 功能，但是我如何处理 SS 中的非 CRUD 方法。

我也遇到了构成某个服务的主键的多个参数的问题。几乎所有库存表都由项目编号和商店编号构成。我宁愿不要在服务客户端上创建一些复合字符串。我该如何处理？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T05:49:13.250

ServiceStack 提倡一种类似于 SOA 的基于消息的设计，这种设计是最优的，并[为远程服务提供了许多自然的好处](https://github.com/ServiceStack/ServiceStack/wiki/Advantages-of-message-based-web-services)。

我最初的想法看起来像

1.  POST {CloseItemNumber} /item/1/close
2.  发布 {ItemNumber} /item/1?replace=true
3.  发布 {ItemNumber} /item/1
4.  POST {ItemNumber} /item/1 即相同的 DTO/服务不同的值。

在哪里`ItemNumber`和`CloseItemNumber`是单独的请求 DTO 和服务。

### 设计服务 API

我更喜欢围绕“资源/名词”来构建我的服务，并将我的服务 API 设计为对它们应用操作的操作。

如果该操作需要比存储资源 DTO 更多的信息，我将创建一个带有附加元数据的单独服务。

即以下是我如何将亚马逊的“RPC”服务转换为更加 REST-ful：

```
https://ec2.amazonaws.com/?Action=AttachVolume
&VolumeId=vol-4d826724
&InstanceId=i-6058a509
&Device=/dev/sdh
&AUTHPARAMS 
```

进入我更喜欢写它的方式：

```
POST https://ec2.amazonaws.com/volumes/vol-4d826724/attach 
FormData: InstanceId=i-6058a509&Device=/dev/sdh&AUTHPARAMS 
```

仍然会使用显式的**AttachVolume** Request DTO。

我用来展示 WCF RPC 和 ServiceStack 粗粒度基于消息的方法之间的差异的另一个示例是：[https ://gist.github.com/1386381](https://gist.github.com/1386381)

### RPC-chatty 和基于消息的 API 之间的区别：

这是 WCF 鼓励的典型 API：

```
public interface IService
{
  Customer GetCustomerById(int id);
  Customer[] GetCustomerByIds(int[] id);
  Customer GetCustomerByUserName(string userName);
  Customer[] GetCustomerByUserNames(string[] userNames);
  Customer GetCustomerByEmail(string email);
  Customer[] GetCustomerByEmails(string[] emails);
} 
```

这是我们在 ServiceStack 中鼓励的基于消息的等效 API：

```
public class Customers {
   int[] Ids;
   string[] UserNames;
   string[] Emails;
}

public class CustomersResponse {
   Customer[] Results;
} 
```

注意：如果您希望相同的服务同时支持 SOAP 和基于 REST 的 API，则需要[稍微不同地构建服务](https://github.com/ServiceStack/ServiceStack/wiki/SOAP-support)，以克服 SOAP 通过 HTTP POST 隧道传输所有操作的限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T07:59:19.793

在决定从 1 个健谈的 RPC api 切换到 REST api 时，我仍然遇到的问题是，我发现自己没有几个易于维护的功能，而是有两种解决方案：

1.  增加 DTO 和服务，使服务的内部代码变得繁琐和复杂，或者
2.  将管理服务的所有代码放入单个路由（OnGet）中，但这样我必须解析不同的参数以“发现”已请求哪些参数（以简化而不是具有多个具有预定义参数的简单函数我现在有只有一个函数必须确定哪些参数是有意义的……但这很难维护——现在代码对我来说更复杂了）。

在解决 GetCustomerById、GetCustomersByEmails 等的建议解决方案中，对我来说，重点是，我们现在必须根据填充的参数动态构造查询，而不是简单的查询——这会使代码变得棘手且难以维护——不得不管理多个参数的可能组合 - 有些组合也不可能。

对此感到有点难过，因为我真的一点也不喜欢 WCF。混合 WCF 和 REST 似乎是复杂性的总和——对我来说是最糟糕的（定义 REST api 的复杂性 + WCF 的复杂性）。

我的感受是共享的还是我错过了什么？

# javascript - 可选参数 javascript 技巧

> ID：11890922
> 
> 赞同：1
> 
> 时间：2012-08-09T19:51:08.610
> 
> 标签：javascript, jquery, arguments

我正在尝试执行以下操作：

```
eventService.emit = function(name, optionalArg1, optionalArg2,... ){
    $rootScope.$broadcast(name, optionalArg1, optionalArg2,...);
}; 
```

具有无限数量的可选参数。（广播“定义”：$broadcast(string, args...)）

我想

```
eventService.emit =$rootScope.$broadcast; 
```

会起作用，但不起作用（$broadcast 函数可以访问 $rootscope 属性）和

```
eventService.emit = function(){
    $rootScope.$broadcast(arguments);
}; 
```

似乎不起作用

谢谢您的帮助

原始代码：

```
services.factory('eventService', function($rootScope, $http){
    var eventObject = {};

    eventObject.emit = function(name){

       $rootScope.$broadcast(name);

    };
    return eventObject;
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T19:54:34.877

你可以试试

```
eventService.emit = function(){

    $rootScope.$broadcast.apply($rootScope, arguments); //you can change "this" to whatever you need
}; 
```

在这里，您正在使用参数“array”中的参数执行 $rootScope.$broadcast（它不是真正的数组，但行为类似），并在函数中使用 this（参数）作为 this。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T20:07:23.457

您可以使用`apply()`（[此处的](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)文档）：

```
eventService.emit = function(name, optionalArg1, optionalArg2,... )
{
    $rootScope.$broadcast.apply(this, arguments);
}; 
```

[1]：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T19:54:42.687

当我想要很多选择时，我会这样做：

```
function myFunction(options){
 if( options["whateverOptionYouWant"] != undefined ){
  //TODO: implement whatever option you want
 }
 if( options["whateverOTHEROptionYouWant"] != undefined ){
  //TODO: implement whatever OTHER option you want
 }
} 
```

依此类推，我需要尽可能多的选项。

像这样称呼它：

```
myFunction({ whateverOptionYouWant: "some option variable" });
myFunction();
myFunction({ 
 whateverOptionYouWant: "some option variable", 
 whateverOTHEROptionYouWant: "some other variable"}); 
```

# javascript - 谷歌地图拖动标记问题

> ID：11890924
> 
> 赞同：2
> 
> 时间：2012-08-09T19:51:14.670
> 
> 标签：javascript, jquery, events, google-maps, marker

当他/她拖动标记时，我想提醒用户地图上的新位置。显然，当我拖动我的标记时，听众甚至不会触发。我希望我的用户能够选择在地图上放置标记并能够拖动它。单击并拖动地图的另一侧可以更改标记位置，但是当我尝试添加用于拖动地图的侦听器以弹出菜单警报时，它不起作用。谢谢

```
var LatLng = new google.maps.LatLng(lat,lng);
        var marker;
        var mapOptions = {
          center: LatLng,
          zoom: 16,
          minZoom:12,
          maxZoom:18,
          panControl:false,
          scrollwheel: false,
          rotateControl:false,
          streetViewControl:false,
          keyboardShortcuts:false,
          mapTypeControl: false,
          scaleControl: false,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        var Gmap = new google.maps.Map($('#map_canvas').get(0),mapOptions);

        // adding pointer by clicking on mac
        google.maps.event.addListener(Gmap, 'click', function(e) {
            if (marker) {
                marker.setPosition(e.latLng);
            }else{
                marker = new google.maps.Marker({
                    position: e.latLng,
                    map: Gmap,
                    draggable:true
                });
            }

              Gmap.panTo(marker.getPosition());

        });

         google.maps.event.addListener(marker, 'dragend', function() {
             alert('Show something here');
        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T21:32:11.980

侦听器不起作用，因为当您定义侦听器时，标记未定义。您需要将其放置在定义标记的功能块中：

```
google.maps.event.addListener(Gmap, 'click', function(e) {
    if (marker) {
        marker.setPosition(e.latLng);
    } else {
        marker = new google.maps.Marker({
            position: e.latLng,
            map: Gmap,
            draggable:true
        });

        google.maps.event.addListener(marker, 'dragend', function() {
             alert('Show something here');
        });
    }

    Gmap.panTo(marker.getPosition());
}); 
```

在[此处查看](http://jsfiddle.net/DonamiteIsTNT/rQe76/)实际情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:00:42.773

我可以让你试试这个吗

```
google.maps.event.addListener(marker, 'dragend', function () {
    updateMarkerStatus('Drag ended');
    geocodePosition(marker.getPosition());
    alert('Show something here');
}); 
```

您还可以使用 firefox 在您的 javascript 中放置一个“Break”，以便您可以查看 javascript 函数是否已被触发。相关信息可以在[这里找到](http://www.sweetvision.com/2007/04/15/debugging-javascript-in-firefox-with-firebug/)

# sql-server - SQL Server 是否支持哈希索引？

> ID：11890929
> 
> 赞同：2
> 
> 时间：2012-08-09T19:51:33.910
> 
> 标签：sql-server, database-indexes

SQL Server B 树中的所有索引都在吗？
当然主键和外键应该是基于哈希的索引？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T19:59:25.050

并非 SQL Server 中的所有索引都是 B-tree 索引（SQL Server 2012 添加了[列存储索引](http://msdn.microsoft.com/en-us/library/gg492088.aspx)，这有点不同），但那里还没有基于哈希的索引这样的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T19:59:12.220

这是一篇非常直截了当的文章，解释了 SQL Server 中的所有索引都是 b 树索引：

[http://msdn.microsoft.com/en-us/library/ms177443(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms177443(v=sql.105).aspx)

我认为如果您想更深入地了解特定 RDBMS 实现的细节，您可以尝试发布到[http://dba.stackexchange.com](http://dba.stackexchange.com)

# javascript - 如何比较 JavaScript 中的两个日期格式为 2011-jan-21

> ID：11890930
> 
> 赞同：0
> 
> 时间：2012-08-09T19:51:45.340
> 
> 标签：javascript, html

好吧，我知道这个问题在互联网上被问了一千次，但我是一个菜鸟，对 Javascript 函数不太了解。我想比较两个日期。输入格式 = "2011-jan-21"

这是我想出来的，请帮助！我将非常感激，因为我需要紧急让它工作。

```
 function compareDates() {
            var startDate=document.getElementById("startDate").value;
            var endDate = document.getElementById("endDate").value;
                months = {'jan': '01', 'feb': '02', 'mar': '03', 'apr': '04', 'may': '05',
                'jun': '06', 'jul': '07', 'aug': '08', 'sep': '09', 'oct': '10', 'nov': '11',
                'dec': '12'};
                split = startDate.split('-');
                var newStartDate = [split[2], months[split[1]], split[0]].join(',');

                split = endDate.split('-');
                var newEndDate = [split[2], months[split[1]], split[0]].join(',');

                var myDate=new Date();
                myDate.setFullYear(startDate);
                console.log(newStartDate);

                var myDateEnd=new Date();
                myDateEnd.setFullYear(endDate);

             if (myDate < myDateEnd) {
                alert ("Error !");
             }
        }

<form method="POST" id="myForm" onsubmit="compareDates()">
        <input id="startDate" />
        <input id="endDate" />
        <input type="Submit" />

    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:55:19.553

只需将字符串传递给`Date`构造函数。**容易**得多。

```
var startDate = new Date(document.getElementById("startDate").value);
var endDate = new Date(document.getElementById("endDate").value); 
```

现在您已经有了两个[成熟的`Date`实例](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date)，您可以随意使用它们。

```
function compare()
{
    var startDate = new Date(document.getElementById("startDate").value);
    var endDate = new Date(document.getElementById("endDate").value);

    if (startDate.getTime() > endDate.getTime())
    {
        alert ("Error !");
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T19:58:35.033

如果您只想对它们进行比较，我什至不会费心将它们编码为日期，因为年、月和日字段已经按最重要到最不重要的顺序排列。如果您可以按照给定的顺序解析出年份、月份（以数字形式；0-origin 或 1-origin 都可以，只要您保持一致）和日期，那么您可以计算一个 integer `i = (year * 10000)+(month * 100)+day`。

鉴于两个日期都如此转换，您可以使用正常的相等和排序运算符（==、<、>= 等），正如您所期望的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T21:00:14.600

你可以使用：

```
if (myDate.getTime() < myDateEnd.getTime()) 
{
    alert ("Error !");
} 
```

# c# - 使用 Linq，如何查询与逗号分隔的 ID 列表匹配的记录？

> ID：11890936
> 
> 赞同：3
> 
> 时间：2012-08-09T19:52:06.503
> 
> 标签：c#, linq-to-sql

我有一个从查询字符串中获得的以逗号分隔的记录 ID 列表。我需要使用这些 ID 返回所有记录（来自 SQL Server 数据库）。在 Linq 中做到这一点的最佳方法是什么？

我认为它最终将被转换为“WHERE id IN (1,2,3,...)”形式的 SQL 语句，并且由于该查询包含与我开始时相同的逗号分隔列表，将其解压缩为 int 数组然后让 Linq 再次将其转换回来似乎很可惜。但如果这是唯一的方法，那很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T20:05:40.360

正如您所暗示的，首先将其转换为数组是最简单的。

```
string csv = "1,2,3";
IEnumerable<int> ids = csv.Split(',').Select( str => int.Parse(str));

var records = db.Records.Where( rec => ids.Contains(rec.id) ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T20:10:39.333

使用 Dynamic Linq 避免不必要的转换

```
.Where("MyColumn.Contains(@0)", myArray) 
```

[动态 Linq - String.Split](https://stackoverflow.com/questions/4127781/dynamic-linq-string-split)

[如何在动态 linq 查询中使用“包含”或“喜欢”？](https://stackoverflow.com/questions/2455659/how-to-use-contains-or-like-in-a-dynamic-linq-query)

# c# - 断开连接后重新连接到 COM

> ID：11890940
> 
> 赞同：1
> 
> 时间：2012-08-09T19:52:25.173
> 
> 标签：c#, serial-port, reconnect

在另一端的设备突然断开连接后，我无法重新连接到 COM 端口。只有关闭并重新打开应用程序才能再次连接。

这是我的连接功能：

```
public bool connectTurboPump()
    {
        try
        {
            if (TPumpSerialPort != null && TPumpSerialPort.IsOpen == true)
                return true;

            DataRow dr = tblTPump.Rows[0];

            Types.Connection TPumpConnection = new Types.Connection();
            TPumpConnection.PORT = dr["port"].ToString();
            TPumpConnection.BAUD_RATE = Convert.ToInt32(dr["baud"]);
            TPumpConnection.PARITY = (Parity)Enum.Parse(typeof(Parity), dr["parity"].ToString(), true);
            TPumpConnection.DATA_BITS = Convert.ToInt32(dr["dataBits"]);
            TPumpConnection.STOP_BITS = (StopBits)Enum.Parse(typeof(StopBits), dr["stopBits"].ToString(), true);
            TPumpConnection.HANDSHAKE = (Handshake)Enum.Parse(typeof(Handshake), dr["handshake"].ToString(), true);

            TPumpSerialPort = new SerialPort(TPumpConnection.PORT, TPumpConnection.BAUD_RATE, TPumpConnection.PARITY, TPumpConnection.DATA_BITS, TPumpConnection.STOP_BITS);
            TPumpSerialPort.Handshake = TPumpConnection.HANDSHAKE;
            TPumpSerialPort.Open();
            TPumpSerialPort.NewLine = "\r";
            TPumpSerialPort.ReadTimeout = 10000;
            TPumpSerialPort.WriteTimeout = 10000;

            if (TPumpSerialPort.IsOpen != true)
                return false;

            return true;
        }
        catch { return false; }
    } 
```

这是我的重新连接功能：

```
public bool reconnectTurboPump(int attempts = 3)
    {
        try
        {
            if (TPumpSerialPort != null && TPumpSerialPort.IsOpen == true)
            {
                TPumpSerialPort.Close();
                TPumpSerialPort.Dispose();
            }

            int i = 1;
            while (true)
            {
                Log(string.Format("Reconnecting Turbo Pump attempt {0}", i));

                if (connectTurboPump())
                    break;

                if (i == attempts)
                    return false;

                i++;
            }

            return true;
        }
        catch (Exception ex)
        {
            Log(string.Format("Could not reconnect to Turbo Pump: {0}", ex.Message));
            return false;
        }
    } 
```

如果有人可以提供帮助，我将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-10T12:44:32.273

如果这是一个真正的串行端口连接，这没有多大意义。没有“连接”状态，串口是非常简单的设备，没有建立连接的底层协议。

如果这实际上是一个*模拟*串行端口的 USB 设备，那么您确实会遇到这种问题。当您在使用端口时拔下 USB 连接器时，模拟串行端口的驱动程序总是会变得非常闷闷不乐。USB设备实际上*有*一个连接协议，协商是由驱动完成的。他们最典型的做法是让端口消失，这往往会给用户代码带来无法恢复的心脏病发作。行为是非常不可预测的，并且因驱动程序而异。没有办法解决这个问题，将连接器粘在端口上，永远不要认为拔掉它会解决代码中的任何问题，即使这是你唯一可以用 USB 做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-10T09:41:04.587

按照 Thomas 的建议，我将重新连接脚本更改为以下内容。现在在测试中。

```
 public bool reconnectTurboPump(int attempts = 3)
    {
        try
        {
            //if (TPumpSerialPort != null && TPumpSerialPort.IsOpen == true)
            if (TPumpSerialPort != null)
            {
                TPumpSerialPort.Close();
                TPumpSerialPort.Dispose();
            }

            int i = 1;
            while (true)
            {
                Log(string.Format("Reconnecting Turbo Pump attempt {0}", i));

                Thread.Sleep(2000);

                if (connectTurboPump())
                    break;

                if (i == attempts)
                    return false;

                i++;
            }

            return true;
        }
        catch (Exception ex)
        {
            Log(string.Format("Could not reconnect to Turbo Pump: {0}", ex.Message));
            return false;
        }
    } 
```

# ruby-on-rails - rails - 多态关联 - 一对一 - 表单提交的嵌套字段名称错误

> ID：11890946
> 
> 赞同：1
> 
> 时间：2012-08-09T19:52:51.933
> 
> 标签：ruby-on-rails, polymorphic-associations

我有用户，它可以是三种类型之一：管理员、学生、教师。每个人都有其他属性。我正在尝试像这样一对一的多态关联：

**用户**

```
class User < ActiveRecord::Base
    belongs_to :identity, :polymorphic => true
    accepts_nested_attributes_for :identity, :allow_destroy => true

    attr_accessible :email, :login, :remember_token, 
                    :password_confirmation, :password, :role
end 
```

**学生**

```
class Student < ActiveRecord::Base
    attr_accessible :field

    has_one :user, :as => :identity
end 
```

**控制器**

```
def new
     @user = User.new
end
def create
    @user = User.new(params[:user]) # It fails here.
    @user.identita.build
    ...
end 
```

**看法**

```
<%= form_for(@user) do |f| %>
    <%= f.label :login %><br />
    <%= f.text_field :login %>

    <%= f.fields_for [:identity, Student.new] do |i| %>  
    <%= i.label :field %><br />
    <%= i.textfield_select :field  %>
    <% end %>
<% end %> 
```

当我提交这个视图（更复杂，但这是核心）时，它会像这样发送哈希：

```
{"utf8"=>"✓",
 "authenticity_token"=>"...",
 "user"=>{"login"=>"...",
 "student"=> {"field"=>"..."}
} 
```

因此它在控制器中的标记线上失败：

```
ActiveModel::MassAssignmentSecurity::Error in UsersController#create
Can't mass-assign protected attributes: student 
```

我究竟做错了什么？像 :as=>"student" 或扭曲现实？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T20:19:50.127

首先，修复：

```
<%= f.fields_for [:identity, Student.new] do |i| %> 
```

至：

```
<%= f.fields_for :identity, Student.new do |i| %> 
```

其次，你正试图`accepts_nested_attributes_for`在一段`belongs_to`关系中使用。这是不支持的行为 AFAIK。也许尝试将其移至`Student`模型：

```
class Student < ActiveRecord::Base
  attr_accessible :field

  has_one :user, :as => :identity
  accepts_nested_attributes_for :user, :allow_destroy => true
end 
```

并制作这样的视图：

```
<%= form_for(Student.new) do |i| %>
  <%= i.fields_for :user, @user do |f| %>  
    <%= f.label :login %><br />
    <%= f.text_field :login %>
  <% end %>
  <%= i.label :field %><br />
  <%= i.textfield_select :field  %>
<% end %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:15:11.890

来自[attr_accessible 的文档](http://apidock.com/rails/ActiveRecord/Base/attr_accessible/class)

> attr_accessible 只会设置此列表中的属性，**以分配给** 您可以使用直接编写器方法**的其余属性。**

因此，一旦您使用`attr_accessible`了 ，另一个属性将自动成为受保护的属性。

# javascript - 制作一个防止存储在浏览器历史记录中的网页

> ID：11890948
> 
> 赞同：0
> 
> 时间：2012-08-09T19:52:56.857
> 
> 标签：javascript, jquery, firefox, google-chrome, browser

出于安全原因：

如何防止网页链接存储在历史记录中？

此外，如何防止给定链接的大部分缓存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T20:04:51.973

虽然我没有给你一个具体的答案，但我想你可能会发现这篇文章很有帮助：[http](http://css-tricks.com/website-escape/) ://css-tricks.com/website-escape/描述的用例是一个帮助家庭暴力受害者的网站. 在评论中，您会看到许多其他人发现的隐藏网站访问痕迹等的技巧。在防止网站进入浏览器历史记录方面，我不知道有什么好的方法，但也许最好的选择是关于浏览器本身提供的各种隐私模式的用户教育（即 Chrome 的隐私浏览或 Safari 中的类似功能）。

# java - 将整数附加到用户名末尾的最佳方法？

> ID：11890951
> 
> 赞同：0
> 
> 时间：2012-08-09T19:52:58.767
> 
> 标签：java

我正在研究一个从“帐户请求”表单（如“名字”、“姓氏”、“电子邮件”等）获取参数的 Java 类。

Java 类首先从表单中获取参数。然后它使用名字和姓氏字符串初始化用户名，如下所示：

```
 String userName = firstName.substring(0,1).toLowerCase() + lastName.toLowerCase(); 
```

例如，“Jake Smith”的用户名是 jsmith。

之后，它会检查数据库中是否存在此“用户名”。显然，“Jake Smith”和“John Smith”将创建相同的用户名“jsmith”。考虑到这一点，我只想将数字（从 1 开始）附加到任何匹配的用户名。

如何在每个冲突的用户名末尾附加一个唯一的数字（从 1 开始，每个额外的冲突增加 1）？

显然，一个更优雅的解决方案是允许用户指定他们的用户名，但这就是模拟客户端希望项目完成的方式。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T20:00:37.953

您可以使用[`String.format`](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#format%28java.lang.String,%20java.lang.Object...%29)，例如：

```
String.format("%s%d", username, i++); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T19:56:38.420

如果不太可能发生冲突，那么您可以循环直到唯一，每次都盯着 1 并添加 1 例如：

```
i=0;
String usernameToTry=username;
while (notUnique(usernameToTry)) {
    i++;
    usernameToTry=username+i;
} 
```

如果可能发生冲突，那么您可能会发现这种方法不能令人满意，因为每次循环迭代都会访问数据库（检查是否唯一）的性能损失。例如，如果您已经有 jsmith100，那么在提出 jsmith101 之前，您不想检查 100 次。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T19:57:09.990

使用 a[`StringBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html)构造新字符串并[`StringBuilder#toString`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html#toString%28%29)获取它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-09T20:01:20.263

这是一个使用 Map 来跟踪 id 的简单方法。

```
class UniqueUsername {
    private static Map<String, Integer> ids = new HashMap<String, Integer>();

    public static String getUniqueUsername(String username) {
        if (!ids.containsKey(username)) {
            ids.put(username, new Integer(0));
            return username;
        }
        ids.put(username, ids.get(username)+1);
        return username + ids.get(username);
    }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-09T20:05:15.357

一个“愚蠢”的解决方案，但如果它只是为了测试......

```
private String getUsername(){

    String userName = firstName.substring(0,1).toLowerCase() + lastName.toLowerCase();
    int i=1;
    while(usernameExists(userName)){
        userName = userName.replaceAll("\\d+$","") + i++;
    }
    return userName;
} 
```

考虑到`userName`最后没有数字。

# google-apps-script - Google 应用脚本 - sheet.getCharts() 和趋势图

> ID：11890952
> 
> 赞同：0
> 
> 时间：2012-08-09T19:53:02.927
> 
> 标签：google-apps-script

由于 Google 电子表格不支持动态范围（例如 A:A），我需要能够使用 App Script 更新趋势图的范围。不幸的是，Sheet 对象的 getCharts() 方法不返回趋势图的条目。可以通过脚本访问趋势图吗？我已经验证以下代码适用于其他图表类型。

```
function expandCharts() {
  var sheet = SpreadsheetApp.getActiveSheet()
  var charts = sheet.getCharts();

  for (var i in charts) {
    var chart = charts[i];
    var ranges = chart.getRanges();
    var builder = chart.modify();
    for (var j in ranges) {
      var range = ranges[j];

      builder.removeRange(range);
      var newRange = expandRange(range, 5);
      builder.addRange(newRange);
    }

            builder.setOption('title', 'Last updated ' + new Date().toString());
    sheet.updateChart(builder.build());
  }
}

function expandRange(range) {
  var s = range.getSheet()
  var startCol = range.getColumn();
  var lastRow = s.getLastRow();
  var startRow = 1;  
  var numCols = range.getNumColumns();

  range = s.getRange(1, startCol, lastRow, numCols);  
  return range;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T03:49:25.717

看不到自己的方法。图表服务也不允许您创建趋势图表。[https://developers.google.com/apps-script/class_charts](https://developers.google.com/apps-script/class_charts)

编辑：“并非所有图表类型都受支持” [https://developers.google.com/apps-script/class_charts_charttype](https://developers.google.com/apps-script/class_charts_charttype)

# c# - 有人可以建议一个在线解决方案来在开发团队和 beta 测试人员之间进行交流吗

> ID：11890953
> 
> 赞同：1
> 
> 时间：2012-08-09T19:53:04.317
> 
> 标签：c#, c++, asp.net, windows, visual-studio

我想知道是否有人可以建议第三方解决方案来执行以下操作？

我是一名开发人员/自由职业者。我需要一个在线解决方案，让 beta 测试人员和其他开发人员在我们的小团队之间来回交流错误报告、提交功能请求（来自“内部”beta 测试人员，而不是软件用户）。最好是可以从两端更新的系统：开发人员 - 测试人员，也可以保留所有此类通信的历史记录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:57:21.093

我有一个本地邮箱的网络表单，当有要阅读的内容时（这意味着：当未读收件箱消息计数从 0 变为 1 时），它会触发将邮件发送到我的个人帐户。当消息需要回答时，我会向用户发送一封电子邮件（用户需要在注册时提供有效的电子邮件）。

在极端情况下，我会在用户下次登录或（如果已经登录）请求页面时将个人消息作为简单的 javascript 警报弹出。如果我需要确保他/她会阅读它，我会使用确认方法并在加载的每个页面中继续显示它，直到按下接受按钮。

您可以在网页上设置一个免费的在线聊天小程序来补充它。看看这个，例如：[http ://www.phpfreechat.net/demo](http://www.phpfreechat.net/demo)

Facebook 也很好用（即时消息，发布给所有人）。

带有 RSS 的博客（任何 CMS：wordpress、drupal... 包括许多模块，只需几个向导步骤即可在一分钟内建立博客）也是传达新闻和更新的好方法。

论坛（例如 phpBB）很容易设置，但更难维护（重复的帖子、没有结构的分散信息等……在我看来，它的资源效率低于其他系统）。

wiki 是常见问题解答和用户手册的一个很好的解决方案。你可以在这里阅读更多关于它的信息：http: [//www.wikihow.com/Start-a-Wiki](http://www.wikihow.com/Start-a-Wiki)

专门的问答网站也是一个好主意，因为人们会投票选出最有趣和最有用的话题，但它与论坛有相同的缺点，尽管它们（在我看来）更容易处理。有许多预先准备好的 Q&A 开源项目，几乎可以在 stackexchange 网络上找到所有功能，可以在一分钟内部署。我特别喜欢这个：[http ://www.question2answer.org/](http://www.question2answer.org/)

bugtracker 技术性很强，但它对有经验的用户来说是一种魅力（如果你的 beta 测试人员属于程序员社区，那就别再三思了：尽快让它上线！）。我喜欢 bugzilla，但你有很多不同的可供选择。可以在维基百科上找到错误跟踪系统的比较：[http ://en.wikipedia.org/wiki/Comparison_of_issue-tracking_systems](http://en.wikipedia.org/wiki/Comparison_of_issue-tracking_systems)

最后，但同样重要的是，不要放弃部署调查，它们非常适合对项目的弱点和强项以及用户体验和期望（添加/改进和修复的功能）进行统计。像surveymonkey.com 这样的一些网站使这变得非常容易。

# c++ - OpenCV的拜耳转换使用什么算法？

> ID：11890955
> 
> 赞同：6
> 
> 时间：2012-08-09T19:53:05.960
> 
> 标签：c++, c, opencv, cuda, gpu

我想实现一个 GPU Bayer 到 RGB 图像转换算法，我想知道 OpenCV`cvtColor`函数使用什么算法。查看源代码，我看到似乎是可变数量的梯度算法和可能是双线性插值的基本算法？有没有人有这方面的经验可以与我分享，或者可能知道从 Bayer 转换为 BGR 格式的 GPU 代码？

源代码在`imgproc/src/color.cpp`. 我正在寻找它的链接。`Bayer2RGB_`并且`Bayer2RGB_VNG_8u`是我正在查看的功能。

编辑：这是源代码的链接。

[http://code.opencv.org/projects/opencv/repository/revisions/master/entry/modules/imgproc/src/color.cpp](http://code.opencv.org/projects/opencv/repository/revisions/master/entry/modules/imgproc/src/color.cpp)

我已经实现了一个双线性插值算法，但它似乎并不适合我的目的。图片看起来不错，但我想从中计算 HOG 特征，在这方面它似乎不太合适。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-09T20:04:30.147

如果您指定 VNG 版本，则默认为 4way 线性插值或可变数量的渐变。

有关详细信息，请参阅 ..\modules\imgproc\src\color.cpp。

我向opencv提交了一个简单的线性CUDA Bayer->RGB(A)，如果它被接受了还没有遵循，但它应该在错误跟踪器中。它基于[Cuda Bayer/CFA 去马赛克示例](https://stackoverflow.com/questions/8072305/cuda-bayer-cfa-demosaicing-example)中的代码。

这是如何在您自己的代码中使用 cv::GPU 的示例。

```
/*-------RG ccd  BGRA output ----------------------------*/
 __global__ void bayerRG(const cv::gpu::DevMem2Db in, cv::gpu::PtrStepb out)  
{ 
    // Note called for every pair, so x/y are for start of cell so need x+1,Y+1 for right/bottom pair
    // R G 
    // G B 

    // src
    int x = 2 * ((blockIdx.x*blockDim.x) + threadIdx.x);
    int y = 2 * ((blockIdx.y*blockDim.y) + threadIdx.y);

    uchar r,g,b;        

    // 'R'
    r = (in.ptr(y)[x]);
    g = (in.ptr(y)[x-1]+in.ptr(y)[x+1]+(in.ptr(y-1)[x]+in.ptr(y+1)[x]))/4;
    b = (in.ptr(y-1)[x-1]+in.ptr(y-1)[x+1]+(in.ptr(y+1)[x-1]+in.ptr(y+1)[x+1]))/4;  
    ((uchar4*)out.ptr(y))[x] = make_uchar4( b,g,r,0xff);

    // 'G' in R 
    r = (in.ptr(y)[x]+in.ptr(y)[x+2])/2;
    g = (in.ptr(y)[x+1]);
    b = (in.ptr(y-1)[x+1]+in.ptr(y+1)[x+1])/2;
    ((uchar4*)out.ptr(y))[x+1] = make_uchar4( b,g,r,0xff);

    // 'G' in B
    r = (in.ptr(y)[x]+in.ptr(y+2)[x])/2;
    g = (in.ptr(y+1)[x]);
    b = (in.ptr(y+1)[x-1]+in.ptr(y+1)[x+2])/2;
    ((uchar4*)out.ptr(y+1))[x] = make_uchar4( b,g,r,0xff);

    // 'B' 
    r = (in.ptr(y)[x]+in.ptr(y)[x+2]+in.ptr(y+2)[x]+in.ptr(y+2)[x+2])/4;;
    g = (in.ptr(y+1)[x]+in.ptr(y+1)[x+2]+in.ptr(y)[x+1]+in.ptr(y+2)[x+1])/4;
    b = (in.ptr(y+1)[x+1]);
    ((uchar4*)out.ptr(y+1))[x+1] = make_uchar4( b,g,r,0xff);    
} 

/* called from */
extern "C" void cuda_bayer(const cv::gpu::DevMem2Db& img, cv::gpu::PtrStepb out)
{
    dim3 threads(16,16);    
    dim3 grid((img.cols/2)/(threads.x), (img.rows/2)/(threads.y));  

    bayerGR2<<<grid,threads>>>(img,out);    
    cudaThreadSynchronize();
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-14T08:29:51.050

据我所知，它正在使用自适应同质定向去马赛克。在 Hirakawa 的论文和网络上的许多其他来源中进行了解释。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-13T09:55:35.723

目前，据我所知，最好的 debayer 是 DFPD（具有后验决策的定向过滤），如[本文](http://elynxsdk.free.fr/ext-docs/Demosaicing/todo/Menon_Andriani_IEEE_T_IP_2007.pdf)所述。该论文的解释性很强，您可以在 Matlab 上轻松地对这种方法进行原型设计。这是一篇[博客文章](http://blog.cuvilib.com/2014/06/12/dfpd-debayer-on-gpu/)，比较了基于线性方法的 DFPD 与 debayer 的结果。您可以明显看到伪影、颜色和清晰度的改进。

# django - 带有表单的 500 错误页面上的 Django CSRF

> ID：11890958
> 
> 赞同：3
> 
> 时间：2012-08-09T19:53:18.487
> 
> 标签：django, forms, csrf

我得到了一个包含表单的 500 错误页面，但是当抛出 500 错误页面时，不会生成 CSRF 令牌。在 500 错误页面上生成 CSRF 令牌以使表单发布工作的最佳方法是什么？我应该只定义自己的自定义 500 错误视图吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:30:07.440

好的，我尝试定义自定义 500 视图并工作，对于任何有同样问题的人，这里是如何：

定义自定义 500 错误视图

```
from django.shortcuts import render

def server_error(request):
    vars = {}
    return render(request, '500.html', vars, status=500) 
```

然后在主 urls.py 添加：

```
handler500 = 'your_app.views.errors.server_error' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-02T21:09:42.360

您必须在 ajax 请求中传递令牌

```
 var data = {
                            errorresponse: errorresponse,
                            'csrfmiddlewaretoken': '{{ csrf_token }}',
                            }

                            $.ajax({
                                type: "POST",
                                url: "/your-target-url/",  
                                data: data,  // this passes data context into view
                                success: function(data) { 
```

# java - 用户发起事件的最后时间

> ID：11890959
> 
> 赞同：2
> 
> 时间：2012-08-09T19:53:22.853
> 
> 标签：java, swing

我正在维护一个相当大的摇摆应用程序，我必须添加一个超时功能，基本上如果用户在一定时间内没有与应用程序交互，应用程序应该采取特定操作（例如关闭）。

由于这个应用程序已经编写好了，让每个鼠标监听器/键盘监听器/任何类型的输入监听器扩展/实现一个特定的类/接口来存储用户启动事件的最后一次发生将是一项不可逾越的任务.

Swing 是否已经为这样的事情内置了某种实用程序？除了更改所有鼠标/键盘侦听器之外，实现此功能的好方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T19:57:52.533

```
// the event mask; adjust as desired
long eventMask = 
    AWTEvent.KEY_EVENT_MASK |
    AWTEvent.MOUSE_EVENT_MASK |
    AWTEvent.MOUSE_MOTION_EVENT_MASK |
    AWTEvent.INPUT_METHOD_EVENT_MASK;

// install a listener for receiving global events
Toolkit.getDefaultToolkit().addAWTEventListener(yourListenerInstance, eventMask); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-09T19:57:44.957

这似乎相关，但是我没有尝试过。

[http://tips4java.wordpress.com/2009/08/30/global-event-listeners/](http://tips4java.wordpress.com/2009/08/30/global-event-listeners/)

它侧重于 AWTEventListener 的使用，以及与 KeyboardFocusManager 的挂钩。

# c# - 如何避免向数据表中添加重复行

> ID：11890960
> 
> 赞同：2
> 
> 时间：2012-08-09T19:53:22.520
> 
> 标签：c#, datatable, sqldatareader

我正在使用 SqlDataReader 将逐行添加到数据表中，如下所示：

```
while (reader.Read())
{
    dataTable.LoadDataRow(reader.CurrentRow(), LoadOption.PreserveChanges);
} 
```

这可行，但**我需要能够避免向 dataTable 添加重复的行**。我希望能够使用 dataTable 中的 Contains 或 Find 方法，但我找不到将 reader.CurrentRow() 中的 object[] 转换为 DataRow 进行比较而不将其添加到数据表的方法。

我已经研究了创建对象 [] 的哈希集的选项，然后在最后一次将它们全部添加到数据表中，但我忘记了默认对象 IEqualityComparer 仅比较引用。

有没有一种可行的方法来做到这一点，而无需在最后删除重复项？

如果删除重复项是唯一的方法，那么最好的方法是什么？

编辑：我将数据库中的不同行拆分为代码中的单独数据表。查询结果中的每一行*都是*不同的，但每一行的部分不是。不幸的是，我需要完全按照我的问题来做，因为查询的结果已经不同了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T20:30:53.967

You didn't provide a ton of detail, but I hope this is comprehensive.

If you need a single column to be unique, then in your Columns collection in your datatable, specify the column like this:

```
 DataTable appeals = new DataTable("Appeals");
 appeals.Columns["PriorAppealNumber"].Unique = true;
 DataColumn keyField = new DataColumn("AppealNumber", typeof(string));
 appeals.Columns.Add(keyField); 
```

If the uniqueness needs to span multiple rows, this is the method:

```
 var myUniqueConstraint = new UniqueConstraint( new DataColumn[] {appeals.Columns[0], appeals.Columns[1], appeals.Columns[2]} );
 appeals.Constraints.Add(myUniqueConstraint); 
```

That will enforce the constraints BEFORE you try to commit back to the source database.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T20:20:13.053

最简单的方法是真正确保根本没有重复的行——如果你正在查询关系数据库的使用`DISTINCT`——这将只返回唯一的行。

# ios - UIWebView didFinishLoad 没有触发

> ID：11890962
> 
> 赞同：2
> 
> 时间：2012-08-09T19:53:36.047
> 
> 标签：ios, uiwebview

我试图登录到一个 gmail 表单，然后检查链接以查看他是否已登录。这是代码。

```
- (IBAction)loginToForm:(id)sender {
    NSString *zname= username.text;
    NSString *passwordEnter= password.text;
    [webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"document.getElementsByName('Email')[0].value = '%@';",zname]];
    [webView stringByEvaluatingJavaScriptFromString:[NSString stringWithFormat:@"document.getElementsByName('Passwd')[0].value = '%@';",passwordEnter]];
    [webView stringByEvaluatingJavaScriptFromString:@"document.getElementsByName('signIn')[0].click();"];
}

- (void)webViewDidFinishLoad:(UIWebView *)webView{
    NSString *returnData = [webView stringByEvaluatingJavaScriptFromString:@"window.location"];
    NSLog(@"%@",returnData);
    if([returnData rangeOfString:@"ServiceLogin"].location != NSNotFound){
        success=YES;
        NSLog(@"YES"); 
    }else{
        NSLog(@"NO");
    }
} 
```

但是， webViewDidFinishLoad 不会触发。有什么帮助吗？多谢你们！

# css - CSS 文本阴影/缩进

> ID：11890965
> 
> 赞同：1
> 
> 时间：2012-08-09T19:53:43.047
> 
> 标签：css

有谁知道样式的 CSS 或 tut 来制作这种类型的文本阴影/缩进？

谷歌搜索 css 文本阴影/缩进没有提出它......

我无法内联发布图像，所以这是直接链接：http: [//i.minus.com/ibr0BdDsx0IaBT.png](http://i.minus.com/ibr0BdDsx0IaBT.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T19:56:27.897

它的 CSS 应该是这样的：

```
text-shadow: -1px -1px rgba(0, 0, 0, 0.6); 
```

链接：[http ://www.w3schools.com/cssref/css3_pr_text-shadow.asp](http://www.w3schools.com/cssref/css3_pr_text-shadow.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T19:57:46.843

```
text-shadow: 2px 2px 2px #000; 
```

意义

```
text-shadow: x-position y-position shadow-size shadow-color; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T20:00:18.523

如果您查看屏幕截图来自 FireBug 的页面，您可能会发现效果是由以下内容制成的：

```
#footer-wrap #footer .foot-col {
    text-shadow: 0 1px 0 #FFFFFF;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T11:31:44.603

完整的 CSS3 shadow tut 和许多示例 - [http://bit.ly/WKd65x](http://bit.ly/WKd65x)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-12T07:01:35.327

这可能对你有用

```
<!DOCTYPE html>
<html>
<head>
<style>
h1 {
    color: white;
    text-shadow: 1px 1px 2px black, 0 0 25px blue, 0 0 5px darkblue;
}
</style>
</head>
<body>

<h1>Text-shadow effect!</h1>

<p><b>Note:</b> Internet Explorer 9 and earlier versions, do not support the text-shadow property.</p>

</body>
</html> 
```

这是来源：[CSS文本和字体属性](https://www.brotsky.tv/2014/10/04/building-a-website-part-7-css-text-font-properties/)

# python - Django：“用户”对象没有属性“用户”

> ID：11890970
> 
> 赞同：3
> 
> 时间：2012-08-09T19:53:57.020
> 
> 标签：python, django

我的网站有一个警报系统。当发生特定操作时，系统会在以下模型中记录警报：

```
class Alert(models.Model):
    title = models.CharField(max_length=60)
    read = models.BooleanField #if this is a new alert of not
    for_user = models.ForeignKey(User) #which user will see it
    link = models.CharField(max_length=100) 
```

许多功能需要检查用户拥有的警报数量（主要是在站点的警报选项卡旁边显示新警报的数量）。因此，我创建了这个函数：

```
@login_required()
def get_alertnum(user):
    alert_objects = Alert.objects.filter(read = False, for_user=user)
    num = 0
    for n in alert_objects:
        num += 1
    return num 
```

此函数访问的内容：

```
@login_required()
def posting_draft(request):
    user = request.user
    user_drafts = Draft.objects.filter(user = user)
    drafts = dict()
    for d in user_drafts:
        drafts[d.title] = d.id
    alertnum = get_alertnum(user)
    return render_to_response('posting_draft.html', {'STATIC_URL':STATIC_URL, 'draft_l' : drafts, 'selected':"dr", alertnum: alertnum}) 
```

但我收到以下错误：

```
Environment:

Request Method: GET
Request URL: http://127.0.0.1:8000/posting/drafts

Django Version: 1.4
Python Version: 2.7.3
Installed Applications:
('django.contrib.auth',
 'django.contrib.contenttypes',
 'django.contrib.sessions',
 'django.contrib.sites',
 'django.contrib.messages',
 'django.contrib.staticfiles',
 'Knights',
 'django.contrib.admin')
Installed Middleware:
('django.middleware.common.CommonMiddleware',
 'django.contrib.sessions.middleware.SessionMiddleware',
 'django.contrib.auth.middleware.AuthenticationMiddleware',
 'django.contrib.messages.middleware.MessageMiddleware')

Traceback:
File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/contrib/auth/decorators.py" in _wrapped_view
  20\.                 return view_func(request, *args, **kwargs)
File "/Users/Mike/Desktop/Main/Django-Development/BBN/Knights/views.py" in posting_draft
  245\.     alertnum = get_alertnum(user)
File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/contrib/auth/decorators.py" in _wrapped_view
  19\.             if test_func(request.user):
File "/Library/Python/2.7/site-packages/Django-1.4-py2.7.egg/django/utils/functional.py" in inner
  185\.         return func(self._wrapped, *args)

Exception Type: AttributeError at /posting/drafts
Exception Value: 'User' object has no attribute 'user' 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-09T19:59:58.310

您需要从 get_alertnum() 函数中删除 @login_required() 装饰器。装饰器假定第一个参数是一个请求对象并试图访问用户属性。

您还可以通过以下方式简化和加速该功能：

```
def get_alertnum(user):
    return Alert.objects.filter(read=False, for_user=user).count() 
```

下面是count方法的解释。

[https://docs.djangoproject.com/en/dev/ref/models/querysets/#count](https://docs.djangoproject.com/en/dev/ref/models/querysets/#count)

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-02-18T12:01:14.140

`@login_required`当您在课堂上使用装饰器时也会弹出此错误。供班级装饰使用`@method_decorator(login_required)`。[在基于类的视图文档](https://docs.djangoproject.com/en/1.9/topics/class-based-views/intro/)中查看更多信息。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-09T20:04:41.580

`@login_required`装饰器仅适用于第一个参数是请求的函数。您的堆栈跟踪是因为它尝试像使用`user`对象一样使用该对象`request`，但它不起作用。 *（正如另一个答案指出的那样，`user`对象没有`.user`属性）*

也许`get_alertnum()`可以先检查`user.is_authenticated()`，`0`如果用户未通过身份验证则返回。

例如：

```
def get_alertnum(user):
    if not user.is_authenticated():
        return 0
    else:
        return Alerts.objects.filter(read=False, for_user=user).count() 
```

# c++ - 使用 PostMessage 模拟按键仅适用于某些应用程序？

> ID：11890972
> 
> 赞同：3
> 
> 时间：2012-08-09T19:54:04.290
> 
> 标签：c++, winapi, keypress

我解决这个问题的方法仅在几个程序中是正确的。为什么不是通用的？

适用于：

*   火狐
*   Visual Studio 文本编辑器

不幸的是，在某些情况下什么都没有发生（即使我在执行程序之前单击文本框区域）：

*   谷歌浏览器*   记事本

GetLastError 总是返回 0，即使使用 SendMessage 而不是 PostMessage。你能指出我的错误吗？

```
#include <Windows.h>
#include <iostream>

int main()
{
    HWND hCurrentWindow;

    Sleep(5000);

    hCurrentWindow = GetForegroundWindow();

    std::cout<<"GO!!!\n";

    for(int i=0; i<500; i++) //simulate 500 keystrokes of 'E'.
        {
            PostMessage(hCurrentWindow,WM_KEYDOWN,0x45,NULL);
            PostMessage(hCurrentWindow,WM_KEYUP,0x45,NULL);
        }

    std::cout<<GetLastError()<<std::endl;

    system("Pause");
    return 0;
} 
```

**马克西姆斯建议后更新**

```
#include <Windows.h>
#include <iostream>

int main()
{
    HWND hCurrentWindow;

    Sleep(5000);

    hCurrentWindow = GetForegroundWindow();

    if(!hCurrentWindow)
        std::cout<<"Failed get set the window handle\n";

    std::cout<<"GO!!!\n";

    for(int i=0; i<500; i++)
        {
            PostMessage(hCurrentWindow,WM_KEYDOWN,0x45,0x45);
            PostMessage(hCurrentWindow,WM_KEYUP,0x45,0x45);
        }

    std::cout<<GetLastError()<<std::endl;

    system("Pause");
    return 0;
} 
```

效果没有区别。

**在 Rob Kennedy 的评论和 Hans Passant 的回答之后更新**

```
#include <Windows.h>
#include <iostream>

int main()
{
    HWND hCurrentWindow;
    DWORD procID;
    GUITHREADINFO currentWindowGuiThreadInfo;

    Sleep(5000);

    hCurrentWindow = GetForegroundWindow();

    if(!hCurrentWindow)
        std::cout<<"Failed get main the window handle\n";

    GetWindowThreadProcessId(hCurrentWindow,&procID); 
    GetGUIThreadInfo(procID,&currentWindowGuiThreadInfo);               
    hCurrentWindow = currentWindowGuiThreadInfo.hwndFocus;

    if(!hCurrentWindow)
        std::cout<<"Failed get the child window handle\n";

    std::cout<<"GO!!!\n";

    for(int i=0; i<500; i++)
        {
            PostMessage(hCurrentWindow,WM_KEYDOWN,0x45, MapVirtualKey(0x45,MAPVK_VK_TO_VSC));
            PostMessage(hCurrentWindow,WM_KEYUP,0x45, MapVirtualKey(0x45,MAPVK_VK_TO_VSC));
        }

    std::cout<<GetLastError()<<std::endl;

    system("Pause");
    return 0;
} 
```

现在，每次都发送“透明”消息。GetLastError() 说：

> ERROR_INVALID_WINDOW_HANDLE
> 
> ```
> 1400 (0x578)
> 
> Invalid window handle. 
> ```

**GetLastError() “已修复”**

```
int main()
{
    HWND hCurrentWindow;
    DWORD procID;
    GUITHREADINFO currentWindowGuiThreadInfo;

    Sleep(5000);

    hCurrentWindow = GetForegroundWindow();

    if(!hCurrentWindow)
        std::cout<<"Failed get main the window handle\n";

    GetWindowThreadProcessId(hCurrentWindow,&procID); 
    GetGUIThreadInfo(procID,&currentWindowGuiThreadInfo);               
    hCurrentWindow = currentWindowGuiThreadInfo.hwndFocus;

    if(!hCurrentWindow)
        std::cout<<"Failed get the child window handle\n";

    std::cout<<"GO!!!\n";

    for(int i=0; i<500; i++)
        {

            if(!PostMessage(hCurrentWindow,WM_KEYDOWN,0x45, MapVirtualKey(0x45,MAPVK_VK_TO_VSC))) std::cout<<GetLastError()<<std::endl;
            if(!PostMessage(hCurrentWindow,WM_KEYUP,0x45, MapVirtualKey(0x45,MAPVK_VK_TO_VSC)))   std::cout<<GetLastError()<<std::endl;
        }

    system("Pause");
    return 0;
} 
```

...输出`1400`一千次。除此之外，什么都没有改变。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-10T12:21:24.903

当您将消息发布到错误的窗口时，这当然会发生。记事本肯定是这种情况。它不只有一个窗口，你可以用 Spy++ 看到。GetForegroundWindow() 为您返回一个顶级窗口，即记事本的框架窗口。在该框架窗口内，它有一个*子*窗口，一个 EDIT 控件。该窗口需要获取消息。

您需要跳过几圈才能获得该窗口，GetFocus() 函数返回具有焦点的窗口，但仅当您从拥有该窗口的进程中调用它时才有效。当您在进程外执行此操作时，您必须首先调用 GetWindowThreadProcessId() 以获取拥有前台窗口的线程的 ID。然后你必须调用GetGUIThreadInfo()，它返回的GUITHREADINFO.hwndFocus就是你需要的窗口句柄。

这仍然不是没有麻烦，您无法控制进程的键盘状态。换句话说，Shift、Ctrl 和 Alt 键以及任何死键（如某些键盘布局上的 Alt+Gr）的状态。倾向于发送 WM_CHAR 用于键入键。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T02:47:31.500

要记住的另一件事是，您不能总是假设目标应用程序以相同的方式处理用户输入。例如，他们可能使用[GetAsyncKeyState()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646293%28v=vs.85%29.aspx)代替，导致您发布的消息完全没有效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T20:04:05.847

你发`lParam==NULL`。它包含当前不工作的应用程序可能需要的密钥扫描码。

此外，您的代码不会检查*GetForegroundWindow()*的返回值。它可能是**NULL**。

最后，省略**WM_CHAR**，这是键盘循环的重要组成部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-18T17:20:53.360

在某些情况下，在发送 KeyDown 和 KeyUp 之间需要任何[延迟。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686298%28v=vs.85%29.aspx)我通过在 KeyDown 之后添加 100 毫秒的暂停解决了我的类似情况

```
 {
        PostMessage(hCurrentWindow,WM_KEYDOWN,0x45, MapVirtualKey(0x45,MAPVK_VK_TO_VSC));
        Sleep(100);
        PostMessage(hCurrentWindow,WM_KEYUP,0x45, MapVirtualKey(0x45,MAPVK_VK_TO_VSC));
    } 
```

# css - 将类分配给动态内容

> ID：11890974
> 
> 赞同：0
> 
> 时间：2012-08-09T19:54:04.600
> 
> 标签：css

`<p>`我有 php 在标签中生成内容。我有两个要使用的类。

看起来像：

```
foreach ($record as $r){
   print "<p>" . $r['content'] . "</p>";
} 
```

一类被称为`readmore`。我想将它分配给任何带有`<a href>`. 另一个叫做`list01`. 我想将它分配给任何`<ul>`标签。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:59:58.700

为您的段落添加一个类，以便您可以将其与其他段落区分开来，然后使用此 CSS：

```
.myParagraphClass a
{
    /* Your readmore styles go here */
}

.myParagraphClass ul
{
    /* Your list01 styles go here */
} 
```

您不需要直接使用类来定位这些元素，因为您可以通过它们与段落的父子关系来定位它们

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:40:03.690

您可以使用多种方法来解决此问题，添加类将在您的 PHP 中或在 Javascript/Jquery 加载 DOM 之后完成。

只使用 CSS（而且你不关心 ie6）你可以：

```
p > a 
{ 
    /* <a> Styles here */
}

p > ul
{
    /* <ul> styles */
} 
```

或者也许只针对最后`<a>`一个`<p>`

```
p a:last-child
{
    /* Last child styles */
} 
```

# javascript - 通过 $("#formname").submit(); 重复提交表单

> ID：11890980
> 
> 赞同：1
> 
> 时间：2012-08-09T19:54:40.673
> 
> 标签：javascript, php, jquery, duplicates, submission

我有一行 HTML 下拉列表，每当用户选择其中一个选项时，它都会通过提交表单的类调用 jQuery 函数。

```
<form id="workorderform" action="saveworkorder.php" method="post">
    <select name="applicationtype" class="checkvalueonchange savevalueonchange">
         <option></option>
         <option value="Uplift" <?php echo ($wo['applicationtype']=='Uplift')?'selected':''; ?>>Uplift</option>
     </select> 
 </form> 
```

`savevalueonchange`班级呼吁

```
$(".savevalueonchange").change(function() {
    autoSave(); 
}); 
```

然后调用

```
function autoSave() {
    if($("#wostatus").val()=='open'){
         $("#workorderform").submit();
    }
 } 
```

将信息发布到`saveworkorder.php`

```
//remove existing chargecodes
$sql = "DELETE FROM workorderchargecodes WHERE compresscoid = '".trim($_REQUEST['formid'])."'";
mssql_query($sql, $dbconn);
//now save chargecodes  
$code_prefix = 'code_';
foreach($_POST as $thisPostKey => $thisPostValue) {
    if((substr($thisPostKey, 0, strlen($code_prefix)))==$code_prefix) {
        if(trim($thisPostValue)!=''):
             $exists=false;
            $sql = "SELECT * FROM workorderchargecodes WHERE compresscoid='".trim($_REQUEST['formid'])."' AND code='".substr($thisPostKey, strlen($code_prefix), strlen($thisPostKey))."'";
            $res = mssql_query($sql, $dbconn);
            while($arr = mssql_fetch_assoc($res)){
                $exists=true;
            } 
            if($exists==false){
                $sql = "INSERT INTO workorderchargecodes (
                    compresscoid,
                    code,
                    time
                    ) VALUES (
                    '".trim($_REQUEST['formid'])."',
                    '".substr($thisPostKey, strlen($code_prefix), strlen($thisPostKey))."',                         '".$thisPostValue."'
            )";
                mssql_query($sql, $dbconn);
            }   
        endif;
    }
} 
```

如您所见，我在将代码插入数据库之前从数据库中选择代码，并且不知何故仍会收到重复的费用代码。我已经搞砸了几个月了，它仍然在发生。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T12:03:11.187

尝试添加`return false;`您的**autosave()**，如下所示：

```
function autoSave() {

   if($("#wostatus").val()=='open'){

       $("#workorderform").submit();

       return false;  // add here
   }
} 
```

它将阻止提交两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T12:06:16.833

```
<form id="workorderform" action="saveworkorder.php" method="post" onsubmit="return false;">
    <select name="applicationtype" class="checkvalueonchange savevalueonchange">
         <option></option>
         <option value="Uplift" <?php echo ($wo['applicationtype']=='Uplift')?'selected':''; ?>>Uplift</option>
     </select> 
 </form> 
```

使用此表格

它使用`obsubmit="return false;"`

# javascript - 如何让即兴 jquery 暂停当前函数执行？

> ID：11890981
> 
> 赞同：0
> 
> 时间：2012-08-09T19:54:41.223
> 
> 标签：javascript, jquery, modal-dialog, impromptu

如何让 Impromptu jquery 像 Javascript 的本机“警报”函数一样暂停当前函数的执行？ [http://trentrichardson.com/Impromptu/](http://trentrichardson.com/Impromptu/)

当前脚本执行在后台继续，而我的对话框正在显示！

还是那个图书馆不可能？推荐？

更新：我想暂停脚本执行，因为我的代码被 select 元素的 onchange 事件调用，**我希望用户决定是否保存他的工作**（通过对话框）

但问题是，在显示对话框后，onchange 函数继续运行并开始在我的 tinymce 编辑器中加载新内容（因为选择已更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T19:57:51.067

他们在 github 页面上有一个示例。我敢打赌，简单地复制和粘贴他们的代码就可以了。

[https://github.com/trentrichardson/jQuery-Impromptu/blob/master/demo.html](https://github.com/trentrichardson/jQuery-Impromptu/blob/master/demo.html)

# c - 嵌套结构的访问元素

> ID：11890983
> 
> 赞同：0
> 
> 时间：2012-08-09T19:54:45.480
> 
> 标签：c, struct

在 C 中，是否可以将一个结构嵌套在另一个结构中？我将如何访问内部结构的字段？以结构体`kinfo_proc`为例：

```
struct kinfo_proc {
  struct  extern_proc kp_proc;      /* proc structure */
  struct  eproc {
    struct  proc *e_paddr;    /* address of proc */
    struct  session *e_sess;  /* session pointer */
    struct  _pcred e_pcred;   /* process credentials */
    struct  _ucred e_ucred;   /* current credentials */
    struct   vmspace e_vm;    /* address space */
    pid_t e_ppid;     /* parent process id */
    pid_t e_pgid;     /* process group id */
    short e_jobc;     /* job control counter */
    dev_t e_tdev;     /* controlling tty dev */
    pid_t e_tpgid;    /* tty process group id */
    struct  session *e_tsess; /* tty session pointer */
#define WMESGLEN  7
    char  e_wmesg[WMESGLEN+1];  /* wchan message */
    segsz_t e_xsize;    /* text size */
    short e_xrssize;    /* text rss */
    short e_xccount;    /* text references */
    short e_xswrss;
    int32_t e_flag;
#define EPROC_CTTY  0x01  /* controlling tty vnode active */
#define EPROC_SLEADER 0x02  /* session leader */
#define COMAPT_MAXLOGNAME 12
    char  e_login[COMAPT_MAXLOGNAME]; /* short setlogin() name */
#if CONFIG_LCTX
    pid_t e_lcid;
    int32_t e_spare[3];
#else
    int32_t e_spare[4];
#endif
  } kp_eproc;
}; 
```

我将如何尝试获取新创建的 kinfo_proc 实例的 e_ppid？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-09T19:59:53.897

您将创建类似：

```
struct kinfo_proc test1;
test1.kp_eproc.e_ppid /// Access it like this. 
```

# c# - C# WinForm .Visible 和图像更改问题

> ID：11890986
> 
> 赞同：1
> 
> 时间：2012-08-09T19:55:10.160
> 
> 标签：c#, winforms, windows-ce

我正在尝试在 C# 中为 WinCE 6.0 创建一个 WinForm 菜单系统。

这个菜单系统的总体思路是在屏幕底部有几个图片框作为按钮。这些允许在一般设置（屏幕亮度、语言等）、日期/时间设置和其他系统特定设置之间进行切换。还有一些图片框充当屏幕中间的按钮，以及为用户定义选项的标签。

所以，简单的例子。默认情况下，进入设置菜单会带您进入常规设置：

```
labelTitle.Text = "General";
labelOption1.Text = "Brightness";
picOption1Left.Image = bmpDown;
picOption1Right.Image = bmpUp; 
```

点击亮度旁边的向下箭头，将降低屏幕亮度；向上箭头将提高亮度。

点击屏幕底部的日期/时间选项按钮会将这些字段更改为以下内容：

```
labelTitle.Text = "Date and Time";
labelOption1.Text = "Time";
picOption1Left.Visible = false;
picOption2Right.Image = bmpInput; 
```

此设置仅使用一张图像。点击输入图像将允许用户通过虚拟键盘或其他可能的方式输入时间。

这就是基本概念。问题是，在切换图像和/或在真假之间切换 .Visible 值最终会导致设备停止和崩溃。到目前为止，我的故障排除让我认为这是某种内存问题。

为什么我会通过切换可见性或更改与资产关联的图像来消耗内存（足以使设备崩溃）？经过测试，这两个功能都会导致崩溃。以这种方式编程菜单系统有什么不好的吗？有没有更好的方法来实现这个目标？由于嵌入式设备将受到更多限制，我是否应该考虑使用其他语言进行编程？我感谢您对此事的任何想法和/或建议。

谢谢！

# c++ - C++ 接口——我有什么选择？

> ID：11890995
> 
> 赞同：0
> 
> 时间：2012-08-09T19:55:59.713
> 
> 标签：c++, interface

回到 C++ 的世界，并尝试接口。我可以找到很多在线示例，但其中 99% 都是微不足道的“一体式文件”。

接口可以分为 3 种基本类型 - 接口，其中 (all|some|zero) 函数必须在具体子类中被覆盖（在 c++ 中，all|some|zero 纯虚函数）。

是否可以在单个头文件中实现这 3 个中的任何一个？（没有 .cpp 双胞胎）为什么/为什么不呢？如何？如果没有，我对 .h/.cpp 对有哪些选择？

我见过的一些选项是：虚拟析构函数，受保护的析构函数，内联析构函数，带有实现的纯虚拟析构函数，......我的头在旋转！

编辑：意味着纯虚拟，而不是虚拟虚空

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T20:16:01.530

*   如果你让你的接口纯虚拟，如果你忘记在你的具体类中实现一个方法，编译器会报错。
*   如果有些方法具有一些合理的默认实现，您可以提供它，但这只是一种方便。
*   如果将析构函数设为虚拟，则可以`delete`通过其接口指针来获取对象，而不需要具体的对象指针。

Herb Sutter 对接口有一些有趣的想法，这些想法与我们大多数人实现接口的方式直接不一致：[http ://www.gotw.ca/publications/mill18.htm](http://www.gotw.ca/publications/mill18.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:10:38.673

**阅读这篇很棒的互联网智慧**： http: [//www.parashift.com/c++-faq-lite/dtors.html](http://www.parashift.com/c++-faq-lite/dtors.html)

1) 你永远不需要 .cpp 文件，你可以在 .h 中编写所有程序，但这样做是很糟糕的风格，并且不可避免地会减慢你的编译速度。

```
MyClass : public MyInterface {
    public:
    virtual void myFunction() {
        // override and implemenht
    }
}; 
```

2) 继承类时，您不必担心将析构函数声明为虚拟，但您需要确保要继承的类具有虚拟析构函数。否则你可能会面临内存泄漏。据我所知，这对于只有纯虚函数的接口类是没有必要的。

内联的析构函数对您没有任何影响。

将析构函数声明为 void 应该会给您一个编译器错误:)。

*编辑：* 关于 3 种类型的界面，我感觉你有点困惑，这妨碍了你的谷歌搜索。

接口通常是一个没有定义函数的类，您必须继承并实现所有函数。

具有某些功能但仍具有一些纯虚的类通常称为抽象类。

当必须重写“零”函数时，这既不是接口也不是抽象类，它只是一个普通的旧类，您可以继承并做任何事情。

查看 C++ 常见问题解答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-09T20:19:22.950

调用所有函数必须被具体子类覆盖的接口`interface`

调用某些函数必须被具体子类覆盖的接口`abstract class`

调用必须由具体子类覆盖零函数的接口`class`。

您可以在头文件中实现虚拟成员函数。但是它们不会内联，因为它们必须有地址才能放入虚拟表中。

> ......我的头在旋转！

为了让它旋转得更多，您还可以拥有`pure virtual destructor`. 当您想要拥有抽象类但没有真正有用的方法来放置纯虚拟时，这是有用的技巧：

```
class A
{
public:
    virtual ~A() = 0;
};

A::~A() {}

class B : public A
{
public:
    ~B() {}
}; 
```

A类实现了析构函数，但还是不能直接实例化，因为它是接口。然而，在销毁`B`编译器时，必须遵守协议并调用 ~A()。这就是为什么你必须实施它

# c++ - 编译器会排除未使用的模板代码吗？

> ID：11890996
> 
> 赞同：6
> 
> 时间：2012-08-09T19:56:01.423
> 
> 标签：c++, compiler-construction

当您使用具有多种方法（如向量）的模板并编译代码时，编译器会丢弃未使用方法中的代码吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-09T21:05:23.633

除非使用模板，否则不会实例化模板，因此实际上没有要丢弃的代码。

标准说 (14.7.1/10)

> 实现不应隐式实例化不需要实例化的类模板的函数模板、成员模板、非虚拟成员函数、成员类或静态数据成员。如果虚拟成员函数不会被实例化，则未指定实现是否隐式实例化类模板的虚拟成员函数。在默认参数中使用模板特化不应导致模板被隐式实例化，除非类模板可以在需要其完整类型以确定默认参数的正确性时被实例化。在函数调用中使用默认参数会导致默认参数中的特化被隐式实例化。

因此，如果您可以避免使模板的成员函数为虚拟，编译器将不会为它们生成任何代码（如果编译器足够聪明，这也可能适用于虚拟函数）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-09T19:58:44.393

这取决于您的优化级别。在更高的优化设置下，是的，死代码消除很可能会发生。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-09T19:58:59.163

编译器、优化器和链接器可以省略和/或减少该信息。每个成熟的工具都可能具有特定于死代码消除的选项。

使用模板，代码可能不会真正创建在第一时间（除非实例化）。

当然，并非所有情况都会在每种情况下都被删除，但是（rtti 是一个沉默的杀手）。使用构建设置进行一些谨慎和测试可以帮助您减少二进制大小和死代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-09T20:01:21.480

智能编译器最有可能将其排除在外。很久以前，当我玩 Borland C++ Builder 时，我认为它并没有丢弃未使用的模板类方法。虽然无法确认

# arm - 使用 ARM NEON 内部函数添加 alpha 和置换

> ID：11890997
> 
> 赞同：5
> 
> 时间：2012-08-09T19:56:10.947
> 
> 标签：arm, neon, intrinsics, cortex-a8

我正在开发一个 iOS 应用程序，它需要相当快地从 RGB -> BGRA 转换图像。如果可能，我想使用 NEON 内在函数。有没有比简单地分配组件更快的方法？

```
void neonPermuteRGBtoBGRA(unsigned char* src, unsigned char* dst, int numPix)
{
    numPix /= 8; //process 8 pixels at a time

    uint8x8_t alpha = vdup_n_u8 (0xff);

    for (int i=0; i<numPix; i++)
    {
        uint8x8x3_t rgb  = vld3_u8 (src);
        uint8x8x4_t bgra;

        bgra.val[0] = rgb.val[2]; //these lines are slow
        bgra.val[1] = rgb.val[1]; //these lines are slow 
        bgra.val[2] = rgb.val[0]; //these lines are slow

        bgra.val[3] = alpha;

        vst4_u8(dst, bgra);

        src += 8*3;
        dst += 8*4;
    }

} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T06:04:17.847

ARMCC 反汇编也不是那么快：

*   它没有使用最合适的说明

*   它将 VFP 指令与 NEON 指令混合在一起，每次都会导致巨大的打嗝

试试这个 ：

```
 mov r2, r2, lsr #3
  vmov.u8, d3, #0xff
loop:
  vld3.8 {d0-d2}, [r0]!
  subs r2, r2, #1
  vswp d0, d2
  vst4.8 {d0-d3}, [r1]!
  bgt loop

  bx lr 
```

我建议的代码也没有完全优化，但进一步的“真正”优化会严重损害可读性。所以我停在这里。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-10T14:31:23.233

这取决于编译器。例如，当我用 armcc (5.01) 编译上面的代码并将其反汇编时，我得到的结果是这样的（我只是将循环放在循环之外，并将 alpha 赋值移到循环之外）

```
 18:   f420440d    vld3.8  {d4-d6}, [r0]!
  1c:   e2822001    add r2, r2, #1  ; 0x1
  20:   eeb01b45    fcpyd   d1, d5
  24:   eeb00b46    fcpyd   d0, d6
  28:   eeb02b44    fcpyd   d2, d4
  2c:   f401000d    vst4.8  {d0-d3}, [r1]!
  30:   e1520003    cmp r2, r3
  34:   bafffff7    blt 18 <neonPermuteRGBtoBGRA_armcc+0x18> 
```

如果我用 gcc (4.4.3) 编译代码并再次反汇编我得到，

```
 40:   f967 040f   vld3.8  {d16-d18}, [r7]
  44:   46d6        mov lr, sl
  46:   ecca 0b06   vstmia  sl, {d16-d18}
  4a:   9d02        ldr r5, [sp, #8]
  4c:   ed8d 8b1a   vstr    d8, [sp, #104]
  50:   3718        adds    r7, #24
  52:   e8be 000f   ldmia.w lr!, {r0, r1, r2, r3}
  56:   f108 0801   add.w   r8, r8, #1  ; 0x1
  5a:   c50f        stmia   r5!, {r0, r1, r2, r3}
  5c:   eddd 0b24   vldr    d16, [sp, #144]
  60:   e89e 0003   ldmia.w lr, {r0, r1}
  64:   edcd 0b16   vstr    d16, [sp, #88]
  68:   eddd 0b22   vldr    d16, [sp, #136]
  6c:   edcd 0b18   vstr    d16, [sp, #96]
  70:   e885 0003   stmia.w r5, {r0, r1}
  74:   ed9d 0b26   vldr    d0, [sp, #152]
  78:   9d03        ldr r5, [sp, #12]
  7a:   ed8d 0b14   vstr    d0, [sp, #80]
  7e:   cd0f        ldmia   r5!, {r0, r1, r2, r3}
  80:   46ae        mov lr, r5
  82:   465d        mov r5, fp
  84:   c50f        stmia   r5!, {r0, r1, r2, r3}
  86:   e89e 000f   ldmia.w lr, {r0, r1, r2, r3}
  8a:   e885 000f   stmia.w r5, {r0, r1, r2, r3}
  8e:   9501        str r5, [sp, #4]
  90:   465d        mov r5, fp
  92:   2100        movs    r1, #0
  94:   2220        movs    r2, #32
  96:   4620        mov r0, r4
  98:   f7ff fffe   bl  0 <memset>
  9c:   cd0f        ldmia   r5!, {r0, r1, r2, r3}
  9e:   4625        mov r5, r4
  a0:   c50f        stmia   r5!, {r0, r1, r2, r3}
  a2:   f8dd c004   ldr.w   ip, [sp, #4]
  a6:   e89c 000f   ldmia.w ip, {r0, r1, r2, r3}
  aa:   e885 000f   stmia.w r5, {r0, r1, r2, r3}
  ae:   ecd4 0b08   vldmia  r4, {d16-d19}
  b2:   f946 000f   vst4.8  {d16-d19}, [r6]
  b6:   3620        adds    r6, #32
  b8:   45c8        cmp r8, r9
  ba:   dbc1        blt.n   40 <memset+0x40> 
```

armcc 的执行时间快了 10 倍。

如果我用 gcc（内联汇编）编译 armcc 为函数生成的汇编代码（看起来现在 alpha 又回到了循环中:)）

```
 void neonPermuteRGBtoBGRA_gas(unsigned char* src, unsigned char* dst,
    int numPix) {
    asm(
            "        ASR      r3,r2,#31\n"
            "        VMOV.I8  d1,#0xff\n"
            "        ADD      r2,r2,r3,LSR #29\n"
            "        ASR      r3,r2,#3\n"
            "        MOV      r2,#0\n"
            "        CMP      r3,#0\n"
            "        BLE      end\n"
            "loop:\n"
            "        VLD3.8   {d4,d5,d6},[r0]!\n"
            "        ADD      r2,r2,#1\n"
            "        CMP      r3,r2\n"
            "        VMOV.F64 d3,d5\n"
            "        VMOV.F64 d2,d6\n"
            "        VMOV.F64 d5,d1\n"
            "        VMOV.F64 d0,d4\n"
            "        VST4.8   {d2,d3,d4,d5},[r1]!\n"
            "        BGT      loop\n"
            "end:\n"
            );
  } 
```

我也得到了与 gcc 相同的执行时间。

最后我建议你要么反汇编你的二进制文件，然后检查编译器是否产生你想要的或者使用汇编。

顺便说一句，如果你想进一步提高这个函数的执行时间，我建议你看看

1.  arm的PLD（预加载数据）指令
2.  利用循环中所有可能的霓虹灯指令，例如循环展开（您会注意到实际上带宽将是从内存中加载数据的时间）

# .htaccess - .htaccess 带有或不带斜杠的重定向路径

> ID：11890998
> 
> 赞同：0
> 
> 时间：2012-08-09T19:56:12.913
> 
> 标签：.htaccess, redirect

给定以下路径： [http ://www.testsite.com/some/path/](http://www.testsite.com/some/path/)

我想将其重定向到 [http://www.testing.com/new/stuff/](http://www.testing.com/new/stuff/)

无论路径是否有斜杠，如何让 .htaccess 执行该重定向？

## 编辑

我试过这个：

```
RedirectMatch 301 /some/path(.*) /new/stuff/$1 
```

但是，它会导致以下重定向

[http://www.testing.com/new/stuff/?/some/path](http://www.testing.com/new/stuff/?/some/path)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T20:54:56.927

> 如何在不向新路径附加任何内容的情况下从一条路径重定向到另一条路径。我只希望它转到'/new/stuff/'，最后什么都没有，不管'/some/path'之后有什么，如果有的话

只需`$1`从您`RedirectMatch`的目标中删除。您还应该包括`^`URI 的开头：

```
RedirectMatch 301 ^/some/path(.*) /new/stuff/ 
```

# c# - 重新调整到列表 在 C# 中

> ID：11890999
> 
> 赞同：1
> 
> 时间：2012-08-09T19:56:13.053
> 
> 标签：c#, vb6

据我了解，Redim 类似于`List<T>`. 我可以使用帮助确保从这个 VB6 到 C# 的正确转换：

```
Private Sub ParseString(sInput As String, sWords() As String, lCount As Long, sDel As String)      
    '   Parses a delimited input string (sInput) on a single
    '   delimiter and returns the parsed words back in a
    '   string array sWords().
    '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
    '
    ' INPUTS:
    '   sInput - string to be parsed.
    '   sDel   - Delimiter character.
    '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
    ' OUTPUTS:
    '   sWords() - dynamic string array containing the parsed words.
    '
    '   lCount   - long, returning the number of words parsed
    '
    ' NOTES:
    '   If this subroutine is passed an empty string, it will
    '   return a lCount of 0 with one element in sWords().
    '''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''''
    Dim lWordStart As Long
    Dim lWordEnd As Long
    Dim sTemp As String
    Dim lParsedArraySize As Long
    Dim lDelLen As Long
    '    Dim lStartM As Long
    '    Dim lEndM As Long
    Dim lLength As Long

    lDelLen = Len(sDel)
    lLength = Len(sInput)

    If sInput = "" Then
       ReDim sWords(1 To 1) As String
       lCount = 0
       sWords(1) = ""
       Exit Sub
    End If
    lParsedArraySize = 50
ReDim sWords(1 To lParsedArraySize) As String

    lWordStart = 1
    lCount = 1

    Do
        lWordEnd = InStr(lWordStart, sInput, sDel)
        If lWordEnd = 0 Then
            sTemp = Mid$(sInput, lWordStart)

            If lCount > lParsedArraySize Then
            ReDim Preserve sWords(1 To lCount) As String
            End If
            sWords(lCount) = sTemp
            Exit Do
        Else
            sTemp = Mid$(sInput, lWordStart, lWordEnd - lWordStart)
            'If sTemp <> "" Then
            If lCount > lParsedArraySize Then
                lParsedArraySize = lParsedArraySize + 50
                ReDim Preserve sWords(1 To lParsedArraySize) As String
            End If
            sWords(lCount) = sTemp
            lCount = lCount + 1
            'End If
            lWordStart = lWordEnd + lDelLen
        End If
    Loop

    If lCount < lParsedArraySize Then
    ReDim Preserve sWords(1 To lCount) As String
    End If 
```

我应该如何将此 If 语句转换为 C#？到目前为止，我已经...

```
private void ParseString(string sInput, List<string> sWords, int lCount, string sDel)
{
    int lWordStart;
    int lWordEnd;
    string sTemp;
    int lParsedArraySize;
    int lDelLen;
    //int lStartM;
    //int lEndM;
    int lLength;

    lDelLen = sDel.Length;

     lLength = sInput.Length;

    if(String.IsNullOrEmpty(sInput))
    {

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-09T20:01:41.353

您的函数调用似乎正在修改数组。如果是这样，这是您需要做的：

编辑：既然您提供了一些额外的细节，我认为您需要两个输出。

```
private void ParseString(string sInput, out List<string> sWords, out int lCount, string sDel)
{
    int lWordStart;
    int lWordEnd;
    string sTemp;
    int lParsedArraySize;
    int lDelLen;
    int lLength;

    lDelLen = sDel.Length;

    lLength = sInput.Length;

    // We are required to set all the output values in this function call    
    sWords = new List<string>();
    lCount = 0;

    if (String.IsNullOrEmpty(sInput)) {
        sWords.Add(""); // Now, sWords[0] will equal "" - this may not be exactly what
        // your VB code expects, but since all C# arrays begin with zero it's the
        // closest approximation.  Alternatively, you could add two items so that
        // sWords[1] would still return the correct value.
        return;
    }
    lParsedArraySize = 50;

    // I'm assuming there's more code down here that does more work ;)
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T20:11:02.780

`ReDim`不一样`List`。 `ReDim`允许您修改数组的大小。这允许您使用数组来*模拟列表的可变大小行为*`ReDim`。

看起来您的逻辑正在测试输入是否为空并将该值分配给第一个输出元素。它似乎也首先清除列表（数组）。一种方法是：

```
if (sWords == null) {
  sWords = new List<string>(); // Ensure the list is not null
}
else {
  sWords.Clear()      // Clear the list if it was provided
} 

// Add an empty string to the list if the input was empty.
if (String.IsNullOrEmpty(sInput)) {
  sWords.Add(String.Empty);
  return;
} 
```