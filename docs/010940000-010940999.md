# StackOverflow 问答 10940000-10940999

# javascript - Underscore.js 根据值重新构造对象

> ID：10940002
> 
> 赞同：0
> 
> 时间：2012-06-07T21:15:37.733
> 
> 标签：javascript, underscore.js, handlebars.js

我正在使用 underscore.js，当然任何解决方案都可以，但我有一个看起来像这样的对象：

```
{ '4f871d4967e04': 
   [ { _id: 4f871d4adaf6fa492f000001,
       product_id: 4f871d43daf6fa4e2f000002,
       width: '300',
       height: 300,
       group: '4f871d4967e04' },
     { _id: 4f871d4adaf6fa492f000004,
       product_id: 4f871d43daf6fa4e2f000002,
       width: '150',
       height: 150,
       group: '4f871d4967e04' },
     { _id: 4f871d4bdaf6fa492f000007,
       product_id: 4f871d43daf6fa4e2f000002,
       width: '100',
       height: 100,
       group: '4f871d4967e04' },
     { _id: 4f871d4bdaf6fa492f00000a,
       product_id: 4f871d43daf6fa4e2f000002,
       width: '75',
       height: 75,
       group: '4f871d4967e04' } ],
  '4f871d51200de': 
   [ { _id: 4f871d51daf6faf42e000001,
       product_id: 4f871d43daf6fa4e2f000002,
       width: '300',
       height: 300,
       group: '4f871d51200de' },
     { _id: 4f871d52daf6faf42e000004,
       product_id: 4f871d43daf6fa4e2f000002,
       width: '150',
       height: 150,
       group: '4f871d51200de' },
     { _id: 4f871d53daf6faf42e000007,
       product_id: 4f871d43daf6fa4e2f000002,
       width: '100',
       height: 100,
       group: '4f871d51200de' },
     { _id: 4f871d53daf6faf42e00000a,
       product_id: 4f871d43daf6fa4e2f000002,
       width: '75',
       height: 75,
       group: '4f871d51200de' } ] } 
```

我想把它变成这样：

```
{"4f871d4967e04" : {
 "300" : {
    _id : '',
  }
 "150" : {
    _id : '',
  }
 "100" : {
    _id : '',
  }
 "75" : {
    _id : '',
  }
}, "4f871d4967e04" : {
 "300" : {
    _id : '',
  }
 "150" : {
    _id : '',
  }
 "100" : {
    _id : '',
  }
 "75" : {
    _id : '',
  }
} 
```

这样我可以遍历每个“组”并简单地使用`this["300"]`来获得我想要的大小。我在 Handlebar 的模板中遍历这个，所以我受限于我可以检查的条件。

任何建议都会非常有帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T22:22:20.270

显而易见的简单 JavaScript 方法可能是最快的：

```
var want = { };
var k, i, o;
for(k in data) {
    want[k] = { };
    for(i = 0; i < data[k].length; ++i) {
        o = data[k][i];
        want[k][o.width] = o;
    }
} 
```

`data`只需逐个键循环遍历主对象 ( ) 并使用内部循环将数组重新排列为宽度→对象映射表。

您想出的任何东西都可能是变相的嵌套循环。下划线版本看起来像这样：

```
var want = _(data).reduce(function(outer, v, k) {
    outer[k] = _(v).reduce(function(inner, o) {
        inner[o.width] = o;
        return inner;
    }, { });
    return outer;
}, { }); 
```

这几乎是代替`for`循环设置的原始嵌套循环。[`reduce`](http://documentcloud.github.com/underscore/#reduce)您几乎只能`reduce`在此处使用，因为大多数下划线函数确实希望将所有内容都转换为数组。你可以使用[`each`](http://documentcloud.github.com/underscore/#each)：

```
var want = { };
_(data).each(function(v, k) {
    var inner = { };
    _(v).each(function(o) {
        inner[o.width] = o;
    });
    want[k] = inner;
}); 
```

`reduce`但这与使用临时变量的方法相同。您可能会想出其他方法，但它们可能只是这个主题的更多变体。

演示：http: [//jsfiddle.net/ambiguous/ffcUC/2/](http://jsfiddle.net/ambiguous/ffcUC/2/)

* * *

如果您想将数据发送到 Handlebars 模板中，例如：

```
{{#each images}}<img src="../{{this.300._id}}" />{{/each}} 
```

然后你只想要上面产生的值。但在这种情况下，您可以调整循环以节省一些工作：

```
var want = [ ];
var k, i, o;
for(k in data) {
    o = { };
    for(i = 0; i < data[k].length; ++i) {
        o[data[k][i].width] = data[k][i];
    }
    want.push(o);
}
return want; 
```

或切换到`reduce`内部[`map`](http://documentcloud.github.com/underscore/#map)：

```
var index_by_height = function(o) {
    return _(o).reduce(function(memo, i) {
        memo[i.height] = i;
        return memo;
    }, { });
};
return _.chain(data)
        .values()
        .map(index_by_height)
        .value(); 
```

演示：http: [//jsfiddle.net/ambiguous/tsx7z/](http://jsfiddle.net/ambiguous/tsx7z/)

# javascript - 让 CPU Bound 的 JavaScript 感觉响应灵敏——网络工作者？

> ID：10940008
> 
> 赞同：2
> 
> 时间：2012-06-07T21:16:07.373
> 
> 标签：javascript, cpu-usage, web-worker

我正在编写一个 CPU 密集型 javascript 应用程序。我遇到了一个问题，有时在 CPU 密集型计算发生时 UI 被锁定。我知道解决这个问题的标准方法是调用`setTimeout`并让事件循环响应 UI 事件。但是，这对我不起作用，这就是原因。

当页面加载时，javascript vm 需要对数据块进行大量解析和分析。这是真正的背景资料，我正在调用`setTimeout`运行每个块。但是，这意味着用户在完成所有块（对于大文件可能长达 10 秒）和每次保存之前都会获得非常不稳定的 UI 体验。这是不可接受的。

我能想到 2 个解决方案，但我都不喜欢：

1.  对块更细化，从而为事件循环提供更多运行机会。但是，我不喜欢这样，因为 cpu 代码已经相当复杂，但它通常运行良好。在整个 cpu 绑定代码中调用`setTimeout`会使它变得更加复杂
2.  在服务器上做更多的工作。但是，我正在运行节点服务器，这只会将问题从客户端推送到服务器，并增加带宽增加的问题。

在传统的基于线程的 VM 上解决此问题将是微不足道的。我应该为 Javascript 做什么？

* * *

更新：

有几点我忘了说：

*   我们不关心旧版浏览器，所有用户都需要使用现代的 Firefox、Chrome、Opera、Safari、IE 等。
*   我们最初的原型将客户端和服务器放在一起，但应该没有什么可以阻止我们迁移到远程服务器。
*   数据存在于客户端（嗯......显然，如果客户端和服务器是同一台机器，但即使我们移动到远程服务器也是如此）。

Webworkers 可能是解决方案，但它们看起来仍然不稳定。有没有人有他们的经验？它们稳定吗？哪些现代浏览器不能很好地支持它们？他们有什么普遍的问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T21:25:06.687

根据此应用程序是否会公开，您必须决定是否可以使用 Web Workers、进一步拆分数据或进行服务器端处理。对于现实世界的应用程序，真正的解决方案是在服务器上进行大量计算，因为您不能指望用户拥有最新的处理器，它可能只是一个上网本，可能只会咳嗽几次然后崩溃。

当您可以确定用户拥有支持它的最新浏览器时，Web Workers 将是一种解决方案，但是如果不是这样，则无法像大多数 HTML5 一样对其进行填充。

根据我对您的应用程序的了解，我会说您应该将预先计算的数据发送给客户端。此外，Node.js 不擅长进行核心计算，因此您可能需要查看服务器上的不同数据处理选项。另外，我认为带宽不会成为问题，因为无论如何您都必须向客户端提供初始数据。处理后的数据有多大？

# c - 带有后增量的垃圾值

> ID：10940009
> 
> 赞同：-1
> 
> 时间：2012-06-07T21:16:12.043
> 
> 标签：c

问题 1

```
int x;
if (x++)
  {
    printf ("\nASCII value of X is smaller than that of x");
  } 
```

在`x`这里分配了一个垃圾值？？

问题2：

```
main ()
{
  int i;
  for (i = 0; i++ < 10;)
    {
      printf ("%d\n", i);
    }
} 
```

谁能解释一下它是如何`i++ < 10`工作的？我的意思是它应该以 9 结尾，为什么是 10

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T21:58:33.007

1.  的值`x`是*不确定*的，并且可能是陷阱表示，在这种情况下， 的行为`x++`是未定义的。

2.  表达式`i++` *计算*为`i`;的当前值 作为*副作用*， in 的值`i`会增加。因此，如果`i`== 1，则表达式`i++`将计算为 1，并且作为副作用`i`将设置为 2。

[章节和诗句](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf)：

> ### 6.5.2.4 后缀递增和递减运算符
> 
> ...
> 2 后缀`++`运算符的结果是操作数的值。**得到结果后，操作数的值递增**。（也就是说，将相应类型的值 1 添加到其中。）有关约束、类型和转换以及操作对指针的影响的信息，请参阅加法运算符和复合赋值的讨论。更新操作数存储值的副作用应发生在前一个序列点和下一个序列点之间。

强调我的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T21:24:00.150

在第一个问题中，您声明 x

```
int x; 
```

但是您没有分配它，这会保留一些内存来保存 x 的值，但不会将其初始化为已知值。这真是一件坏事。然后你阅读它，增加它，并可能做一些事情。

```
if ( x++ ) {
  printf ( "\nascii value of X is smaller than that of x" ) ;
} 
```

由于您在阅读它之前不知道它的价值，因此不可能对您的 if 语句是否会打印任何内容做出有根据的猜测。

在您的第二个问题（每个问题一个问题）中，您读取 i 的值，然后将其递增，然后对读取的值进行比较。后增量基本上意味着“在我读取*后*增加值”，因此将存储新值，然后对旧值进行比较，下面的 printf 语句将打印“当前，新”值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T21:21:03.847

问题1：是的

问题2：是的。如果 i 小于 10，则 i 加 1 然后进行比较。

# c# - Visual Web Developer 中的文本框 KeyDown 事件

> ID：10940012
> 
> 赞同：0
> 
> 时间：2012-06-07T21:16:20.617
> 
> 标签：c#, event-handling, keydown, visual-web-developer

我正在尝试为 Visual Web Developer 中的文本框实现 KeyDown 事件。我正在使用 C#。我知道如何在 Windows 窗体中执行此操作，但该技术不能移植到 VWD。我想在用户按 Enter 时捕获文本框中的文本。

任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:41:56.223

听起来您可能想大致了解一下 Web 表单。快速总结：由于网页都是客户端，因此您必须明确告诉它何时与发生所有主要提升的服务器对话。

所以你有html表单标签：

```
<form>
</form> 
```

所有重要的文本框和其他表单控件都介于两者之间。然后你需要一个提交按钮，在正常情况下，这是将表单提交到服务器进行处理的唯一方法。（“回车”键也激活了提交键。）。提交总是会重新加载页面或导致移动到下一页，具体取决于指定的操作。

ASP.NET 确实为您处理了很多页面事件等。但是，您现在可能已经注意到，当您右键单击文本框并查看可用事件时，您只有少数几个，例如“textchanged”。这是因为当您实际上没有向服务器提交表单时，您需要 AJAX 在不重新加载页面的情况下为您调用服务器。文本框上的“textchanged”事件仍将由 AJAX 驱动——这只是 Microsoft 为您内置的。您将需要查看 jQuery 或 ASP.Net AJAX 库。

你说你想“存储”结果——是为了稍后在页面上产生新的行为吗？那是AJAX。在完成整个应用程序的同时，它是为了长寿吗？那可以等到提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-18T15:52:10.550

实际上 textChanged 方法等待 Enter 键被击中。

# r - R- 仅对特定列进行平方

> ID：10940013
> 
> 赞同：6
> 
> 时间：2012-06-07T21:16:20.620
> 
> 标签：r

给定一个带有时间戳的数据集和后面的几列数据

```
data=
           hour          V1           V2          V3
1 2012-01-19 08:00:00  0.04551064  0.002851064  0.01842553
2 2012-01-19 09:00:00 -0.05305000 -0.052266667 -0.07455000
3 2012-01-19 10:00:00 -0.07518333 -0.101333333 -0.10670000
4 2012-01-19 11:00:00 -0.09195000 -0.099383333 -0.11176667
5 2012-01-19 12:00:00 -0.07743333 -0.074000000 -0.09106667
6 2012-01-19 13:00:00 -0.10978333 -0.096200000 -0.11343333 
```

我想平方列 V1-V3 给我这个

```
data_sq=
         hour                V1           V2           V3
1    2012-01-19 08:00:00  0.002071218 8.128565e-06 0.0003395002
2    2012-01-19 09:00:00  0.002814303 2.731804e-03 0.0055577025
3    2012-01-19 10:00:00  0.005652534 1.026844e-02 0.0113848900
4    2012-01-19 11:00:00  0.008454803 9.877047e-03 0.0124917878
5    2012-01-19 12:00:00  0.005995921 5.476000e-03 0.0082931378
6    2012-01-19 13:00:00  0.012052380 9.254440e-03 0.0128671211 
```

至于现在我只是使用

```
data_sq<-data^2 
```

得到平方根。但它破坏了时间戳，所以我必须用一些非常尴尬的东西把它放回去

```
data_sqd<-cbind(data_sq,data$hour) 
```

我试过了

```
data_sq<-(data[,c(2:4)]^2 
```

但我也丢失了时间戳

那么如何保持我的时间戳列完整并指定我想要平方的列？对于缺乏可重复的数据，我深表歉意，但我希望这是一个足够简单的问题，我可以摆脱它:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T21:35:04.507

一步解决方案：

```
data_sq <- transform(data, V1=V1^2, V2=V2^2, V3=V3^2) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-07T21:27:08.140

```
data_sq <- data # try not to use data, it's a function in base
data_sq[,2:4] <- data[,2:4]^2 # subsetting was off but you were close! 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-07T21:27:16.013

您只需要替换 2:4 列，而不是整个对象；例如：

```
data_sq[, 2:4] <- data[, 2:4]^2 
```

# c# - 项目到项目在同一解决方案中引用特定版本

> ID：10940019
> 
> 赞同：1
> 
> 时间：2012-06-07T21:16:36.880
> 
> 标签：c#, .net, vb.net, visual-studio-2010

我正在开发可插入的应用程序。插件通过 Assembly.LoadFrom() 加载。在我的解决方案中，我有 4 个项目。一个 WPF、2 个 DLL 和另一个作为应用程序插件的 DLL。插件项目引用其他 DLL 之一。

当我构建解决方案并运行时，我在尝试使用插件 dll 时遇到错误，因为它需要引用项目的旧版本。我必须清理并重建插件项目以使其正常运行。

所以我假设参考的特定版本设置为 true。但是属性窗口中没有特定的版本选项。

所以现在如果我对引用的程序集进行更改并更改版本号，我将不得不清理和重建插件，即使我认为我没有更改该项目中的任何内容。我可以预见我会忘记做这一步。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T23:13:48.187

本来预计

IPlugin - > 插件

WPF -> IPlugin -> (LoadFrom 插件)

这样他们只有在 IPlugin 改变时才需要重建所有内容

无论您如何工作，LoadFrom 中加载的内容的消费者都不应依赖于实现。

# iphone - iPhone 应用程序中的联系表

> ID：10940024
> 
> 赞同：0
> 
> 时间：2012-06-07T21:17:04.970
> 
> 标签：iphone, forms, asihttprequest

我想从我的 iPhone 应用程序中获取联系表。我在服务器上有一个contact.php 脚本，我需要将数据从我的应用程序传递到服务器。有人告诉我使用 ASIHTTPRequest 框架，但我需要有关将 UITextField 的值发送到服务器的代码的帮助。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T23:07:31.083

检查我以前 SO Post 中的答案和示例。[关联](https://stackoverflow.com/questions/10923868/how-to-implement-login-functionality-to-native-iphone-app/10923919#comment14248980_10923919)

这描述了使用`ASIHTTPRequest`框架将`POST`变量添加到服务器端脚本。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:37:45.807

试试这个，

```
ASIHTTPRequest *_request = [[[ASIHTTPRequest alloc] initWithURL:url] autorelease];
[_request setDelegate:self];
[_request setRequestMethod:@"POST"];
NSMutableData *data = [[NSMutableData alloc] initWithData:[textField.text dataUsingEncoding:NSUTF8StringEncoding]];
[_request appendPostData:data];
[_request start];
[data release]; 
```

ASIHTTPRequest 的代表

```
- (void)requestFinished:(ASIHTTPRequest *)request 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T23:56:52.897

好的，想通了。我使用 ASIHTTPRequest 框架连接到我的 Web 服务器并调用了 sendForm 操作

```
-(IBAction)sendForm:(id)sender {

 NSURL *url = [NSURL URLWithString:@"http://myurl/mail.php"];
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
[request setPostValue:[name text] forKey:@"name"];
[request setPostValue:[email text] forKey:@"email"];

 [request setDelegate:self];
 [request startSynchronous];
} 
```

# xcode4.3 - 使用 xcode 工作区拥有多个具有依赖关系的项目

> ID：10940025
> 
> 赞同：2
> 
> 时间：2012-06-07T21:17:14.860
> 
> 标签：xcode4.3, workspace

我正在尝试在工作区中使用具有两个项目的工作区，并在另一个项目中访问 ViewControllers。我认为截图最能描述正在发生的事情。我正在导入`DirectoryViewController.h`到`AppDelegate.h`测试项目的文件中，并且`DirectoryViewController`来自 AssociationLibrary。当我开始输入`DirectoryViewController`导入内容时，自动完成功能为我提供了 的选项`DirectoryViewController`，但随后我收到了**未找到文件**的警告。有人有这方面的经验吗？

![在此处输入图像描述](../Images/fd019ee429b86cb5852b2bfd645d0a04.png)

# android - 无法关闭飞行模式

> ID：10940028
> 
> 赞同：0
> 
> 时间：2012-06-07T21:17:25.593
> 
> 标签：android, mode, airplane

我创建了一个带有按钮的应用程序，该按钮允许打开和关闭飞行模式。打开飞行模式时工作正常。但奇怪的是，飞行模式在关闭时似乎保持打开状态。

如果我在关机后检查手机设置，它们表明飞行模式已关闭。但是飞行模式图标仍然显示在手机的顶部栏中，按住手机的电源按钮显示飞行模式仍然处于开启状态。

不知道为什么设置仍然打开时会显示为关闭？

这是我用来关闭它的代码 - 我已经调试过，它肯定会遇到这个问题。mContext 是我用来保存上下文的变量，它被传递到设置类中，然后该类具有用于关闭和打开飞行模式的方法：

```
System.putInt(mContext.getContentResolver(),
android.provider.Settings.System.AIRPLANE_MODE_ON, 0);
this.airplaneOn = false;
Intent intent = new Intent(Intent.ACTION_AIRPLANE_MODE_CHANGED);
intent.putExtra("state", 0);
mContext.sendBroadcast(intent); 
```

这是我用来检查飞行模式状态的代码 -

```
public boolean isAirplaneOn() {
  int airplaneMode = 0;
  try {
    airplaneMode = System.getInt(mContext.getContentResolver(),
  android.provider.Settings.System.AIRPLANE_MODE_ON);
    } catch (SettingNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    if (airplaneMode == 1) {
        this.airplaneOn = true;
    } else {
        this.airplaneOn = false;
    }
    return airplaneOn;
} 
```

在这两种情况下，this.airplaneOn 都是一个私有布尔值，用于存储飞行模式的状态。

我可以在这里做一些愚蠢的事情，还是检查这个设置有点不可靠？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T02:37:33.763

我已经成功执行了以下代码：

```
public static boolean isFlightModeEnabled(Context context) {
    return Settings.System.getInt(context.getContentResolver(),
        Settings.System.AIRPLANE_MODE_ON, 0) == 1;
}

public static void toggleFlightMode(Context context) {
    boolean isEnabled = isFlightModeEnabled(context);

    Settings.System.putInt(context.getContentResolver(), Settings.System.AIRPLANE_MODE_ON, isEnabled ? 0 : 1);

    Intent intent = new Intent(Intent.ACTION_AIRPLANE_MODE_CHANGED);
    intent.putExtra("state", !isEnabled);
    context.sendBroadcast(intent);
} 
```

我在我的代码和你的代码之间看到的唯一区别是，在你的 putInt() 中你硬编码了 0。

要注意的另一件事是根据文档，[ACTION_AIRPLANE_MODE_CHANGED](http://developer.android.com/reference/android/content/Intent.html#ACTION_AIRPLANE_MODE_CHANGED)是

`This is a protected intent that can only be sent by the system.`

我过去没有遇到过这个问题，但也许你的设备更新了，并且执行了一些我已经成功使用的旧手机没有执行的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T02:20:56.320

Use a boolean instead of 0/1 for your intent, ie: intent.putExtra("state", true). The code in the other post should work properly.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-31T06:03:54.150

参考以下代码：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    IntentFilter intentFilter = new IntentFilter("android.intent.action.SERVICE_STATE");

    BroadcastReceiver receiver = new BroadcastReceiver() {
          @Override
          public void onReceive(Context context, Intent intent) {
                Log.d("AirplaneMode", "Service state changed");
                Toast.makeText(getApplicationContext(), "Service state changed", Toast.LENGTH_LONG).show();
                boolean isEnabled = isAirplaneModeOn(context);
            /*   setSettings(context, isEnabled?1:0);
                Intent intent_mode = new Intent(Intent.ACTION_AIRPLANE_MODE_CHANGED);
               intent_mode.putExtra("state", !isEnabled);
                context.sendBroadcast(intent_mode);*/

                if(isEnabled==true)
                { setSettings(context, isEnabled?1:0);
                    Toast.makeText(getApplicationContext(), "Flight mode on", Toast.LENGTH_LONG).show();
                    Settings.System.putInt(getContentResolver(), Settings.System.AIRPLANE_MODE_ON, 0);
                    Intent newIntent = new Intent(Intent.ACTION_AIRPLANE_MODE_CHANGED);
                    newIntent.putExtra("state", false);
                    sendBroadcast(newIntent);
                }
                else
                { setSettings(context, isEnabled?1:0);
                    Toast.makeText(getApplicationContext(), "Flight mode off", Toast.LENGTH_LONG).show();
                }

          }

        @SuppressLint("NewApi")
        private void setSettings(Context context, int value) {
            // TODO Auto-generated method stub

            if (Build.VERSION.SDK_INT < Build.VERSION_CODES.JELLY_BEAN_MR1) {
                Settings.System.putInt(
                          context.getContentResolver(),
                          Settings.System.AIRPLANE_MODE_ON, value);
            } else {
                Settings.Global.putInt(
                          context.getContentResolver(),
                          Settings.Global.AIRPLANE_MODE_ON, value);
            }       

        }

        @SuppressLint("NewApi")
        public boolean isAirplaneModeOn(Context context) {
        if (Build.VERSION.SDK_INT < Build.VERSION_CODES.JELLY_BEAN_MR1) {
            return Settings.System.getInt(context.getContentResolver(), 
                    Settings.System.AIRPLANE_MODE_ON, 0) != 0;          
        } else {
            return Settings.Global.getInt(context.getContentResolver(), 
                    Settings.Global.AIRPLANE_MODE_ON, 0) != 0;
        }       
    }
    };

    registerReceiver(receiver, intentFilter);

}
//permissions needed: 
```

// //

# c# - 有没有办法为 ASP.Net 2.0 中的 *.asmx 方法映射虚拟目录？

> ID：10940030
> 
> 赞同：0
> 
> 时间：2012-06-07T21:17:28.870
> 
> 标签：c#, asp.net, vb.net, json, asmx

不久前，我设法让 WebServices 从 ASPX 的代码隐藏中返回 JSON 和 XML。

今天，我需要迁移现有的**ASMX** WebService 以返回 JSON 而不是 XML（这很容易完成）。我的问题在测试新方法时变得很明显。

在 ASMX 的代码隐藏中，我创建了一个新方法来返回 JSON 而不是 XML。该方法有效，因为它返回预期的 JSON，但是新例程破坏了代码隐藏中的每个 XML 返回方法（它们都抛出“ `System.NotSupportedException: The type System.Collections.Hashtable is not supported because it implements IDictionary.`”，这是意外的，因为返回类型都定义为`XmlDocument`）。

如果我简单地注释掉返回 JSON 的方法，返回 XML 的方法会正常运行。取消注释 JSON-returning 方法会再次破坏 XML-returning 方法。

虽然我在任何地方都找不到任何支持文档，但这种行为让我相信在 ASP.Net 2.0 中，返回 JSON 的方法不能与返回 XML 的方法共存于同一模块中。

这导致我尝试将子类中的方法分开，如下所示：

```
<WebService(Namespace:="http://tempura.org/")> _
<WebServiceBinding(ConformsTo:=WsiProfiles.BasicProfile1_1)> _
<ScriptService()> _
<Global.Microsoft.VisualBasic.CompilerServices.DesignerGenerated()> _
Public Class MyWebServices
    Inherits System.Web.Services.WebService

    <ScriptService()> _
    Public Class xml
        Inherits System.Web.Services.WebService

        <WebMethod()> _
        <ScriptMethod(ResponseFormat:=ResponseFormat.Xml)> _
        Public Function MethodName As XmlDocument
            ...
        End Function
    End Class

    <ScriptService()> _
    Public Class json
        Inherits System.Web.Services.WebService

        <WebMethod()> _
        <ScriptMethod(ResponseFormat:=ResponseFormat.Json)> _
        Public Function MethodName As Hashtable
            ...
        End Function
    End Class
End Class 
```

我的想法是我可以通过以下方式之一调用服务：

*   `~/MyWebServices.asmx/xml/MethodName`
*   `~/MyWebServices.asmx/xml.MethodName`
*   `~/MyWebServices.asmx/json/MethodName`
*   `~/MyWebServices.asmx/json.MethodName`

不幸的是，这不起作用，给出了 404-Not Found 错误。

我可以简单地将所有返回 JSON 的方法放入不同的 ASMX 中，但我希望有更好的方法。

我的问题是：

*   有没有办法完成`~/MyWebServices.asmx/xml/MethodName`和`~/MyWebServices.asmx/json.MethodName`？我喜欢在虚拟路径中按返回类型分隔函数的想法。
*   如果做不到这一点，有没有办法让返回 JSON 的方法与返回 XML 的方法共存于同一个模块中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:24:11.943

我惊讶地发现您对这个限制是正确的，但是它仅适用于 .asmx 脚本服务。通常，您仍然可以使用 ASP.NET 2.0+ 返回所需的任何类型（和组合）的内容类型。

我发现这篇文章解释了这些限制并澄清了对 ASMX/JSON 的误解： [http://encosia.com/asmx-and-json-common-mistakes-and-misconceptions/](http://encosia.com/asmx-and-json-common-mistakes-and-misconceptions/)。相关摘录说：

> “正如我之前提到的，一个规定是，如果请求正确，这些 ScriptServices 只会返回 JSON 序列化结果。否则，即使是标记有该属性的服务也会返回 XML 而不是 JSON。我只能假设这是部分原因对于 ASMX 服务无法使用 JSON 响应的误解。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-11T16:38:52.070

向@smartcaveman +1 尝试。

对此的解决方案是一种不同的（我认为总体而言更好）的方法。我没有显式返回`XMLDocument`(XML) 或`HashTable`(JSON)，而是编写了一个自定义返回对象，如下所示：

```
<WebService(Namespace:="http://tempura.org/")> _
<WebServiceBinding(ConformsTo:=WsiProfiles.BasicProfile1_1)> _
<ScriptService()> _
<Global.Microsoft.VisualBasic.CompilerServices.DesignerGenerated()> _
Public Class MyWebServices
    Inherits System.Web.Services.WebService

    <WebMethod()> _
    <ScriptMethod()> _
    Public Function MethodName As CustomReturnObject
        ...
    End Function

End Class 
```

我确保实现了自定义返回对象`IXmlSerializable`，现在框架根据调用者返回 XML**或JSON。**

如果调用者指定 a `contentType`of `application/xml`，则返回 XML。

如果调用者指定 a `contentType`of `application/json`，则返回 JSON。

我认为这种方法更好，因为我不必按返回类型组织 WebServices，也不必为我编写的每个 WebService 维护两个单独的方法（一个 XML，一个 JSON）。

谢谢你至少看。

# zend-framework2 - 简单 ZF2 应用程序中允许的内存大小耗尽

> ID：10940034
> 
> 赞同：0
> 
> 时间：2012-06-07T21:17:44.330
> 
> 标签：zend-framework2, zend-framework-mvc, zend-framework-modules

我刚刚使用 Zend Framework 2 创建了一个非常简单的单模块应用程序。

我已经设置了自动加载、路由等，但是当尝试连接到这个测试应用程序时，我等待了几分钟，然后我回到了一个空白页面。

apache错误日志说：

```
Fatal error: Allowed memory size of 134217728 bytes exhausted (tried to allocate 33817602 bytes) in C:\Program     Files\626Suite\application\library\Zend\ServiceManager\ServiceManager.php on line 339 
```

或者

```
Fatal error: Allowed memory size of 134217728 bytes exhausted (tried to allocate 49141298 bytes) in C:\Program Files\626Suite\application\library\Zend\ServiceManager\ServiceManager.php on line 301 
```

或者

```
Fatal error: Allowed memory size of 134217728 bytes exhausted (tried to allocate 179873796 bytes) in C:\Program Files\626Suite\application\library\Zend\ServiceManager\Di\DiServiceFactory.php on line 106 
```

但我真的不明白这里出了什么问题，没有什么可以解释为一个简单的“hello world”控制器使用 128MB 的内存。

我也可以发布我的配置，如果它有用的话，就这么说吧。

知道什么可能导致这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-09T17:33:41.943

回答自己，因为，最后，我发现了问题：

主视图正在调用未定义的路由，因此触发了异常，并且内存溢出是由 XDebug 引起的，它没有正确配置并且试图生成太多输出以致耗尽所有可用内存。

正确配置 XDebug 解决了问题，并且正确显示了异常，而不是白屏。

# c# - 出现错误“System.IndexOutOfRangeException”。为什么？

> ID：10940037
> 
> 赞同：6
> 
> 时间：2012-06-07T21:18:15.300
> 
> 标签：c#, asp.net, sql

我有以下网络服务：

```
using (SqlCommand cmd = new SqlCommand(@"SELECT r.NAME, s.NAME FROM REGION r LEFT OUTER JOIN STADT s ON s.REGION_ID = r.ID ORDER BY r.NAME", con))
{
    con.Open();
    using (SqlDataReader rdr = cmd.ExecuteReader())
    {
        while (rdr.Read())
        {
            if (rdr["r.NAME"] != DBNull.Value && rdr["s.NAME"] != DBNull.Value)
            {
                stadtObject.Add(new STADT()
                {
                    RegionName = rdr["r.NAME"].ToString(),
                    StadtName = rdr["s.NAME"].ToString()
                });
            }
        }
    }
} 
```

[我在SQL Server Management Studio](https://en.wikipedia.org/wiki/SQL_Server_Management_Studio)中测试了 SQL 语句，它的工作就像一个魅力。但是，如果我在浏览器中调用该方法，则会出现错误：

```
System.IndexOutOfRangeException: r.NAME
   at System.Data.ProviderBase.FieldNameLookup.GetOrdinal(String fieldName)
   at System.Data.SqlClient.SqlDataReader.GetOrdinal(String name)
   at System.Data.SqlClient.SqlDataReader.get_Item(String name)
   at StadtHelper.Stadt() in C:\Users\Yeah\Documents\Visual Studio 2010\Projects\WebService1\WebService1\StadtHelper.cs:line 31
   at WebService1.Service1.Stadt() in C:\Depp\Ushi\Documents\Visual Studio 2010\Projects\WebService1\WebService1\Service1.asmx.cs:line 77 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-07T21:19:28.230

在 DataReader 中选择 r.Name 时，它​​只读取***字段***名称 - Name。选择字段时，它不包括表说明符（r. 和 s.）

它找不到“r.Name”或“s.Name”，因为在评估时，阅读器只是返回两列，都只是命名为“Name”所以在搜索 r.Name 时，运行时会说“r.Name”。名称不在有效列名列表中”（表现为 IndexOutOfRange 异常）。

如果您希望能够按名称访问它，则必须使用 AS 语句为查询的不同字段名称提供生成的内存结果：

我认为我说得不好，但从本质上讲，您的代码应该这样修改：

```
using (SqlCommand cmd = new SqlCommand(@"SELECT r.NAME AS rName, s.NAME AS sName FROM REGION r LEFT OUTER JOIN STADT s ON s.REGION_ID = r.ID ORDER BY r.NAME", con))
{
    con.Open();
    using (SqlDataReader rdr = cmd.ExecuteReader())
    {
        while (rdr.Read())
        {
            if (rdr["rNAME"] != DBNull.Value && rdr["sNAME"] != DBNull.Value)
            {
                stadtObject.Add(new STADT()
                {
                    RegionName = rdr["rNAME"].ToString(),
                    StadtName = rdr["sNAME"].ToString()
                });
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T21:23:22.757

它不喜欢别名 r，这当然会给您带来潜在的问题，因为您的列名不是唯一的。

尝试类似：

`Select r.Name as RName, s.Name as SName`...

然后`rdr["RName"]`和`rdr["SName"]`将是观众。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T21:21:31.110

表名不能用于限定 ; 中的字段名`SqlDataReader`。在您的情况下，字段名称是`"NAME"`.

为避免命名冲突，您应该重命名投影中的列：

```
SELECT r.NAME AS RegionName, s.NAME AS StateName FROM REGION r … 
```

然后，使用新名称访问字段：

```
if (rdr["RegionName"] != DBNull.Value && rdr["StateName"] != DBNull.Value) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T21:25:20.100

数据阅读器不知道 r.NAME 是什么，因为实际返回的列是 NAME 和 NAME。您可以使用别名来区分两者，如下所示：

```
SELECT r.NAME as REGION_NAME, s.NAME as STADT_NAME FROM REGION r LEFT OUTER JOIN STADT s ON s.REGION_ID = r.ID ORDER BY r.NAME 
```

然后通过别名访问返回的数据：

```
if (rdr["REGION_NAME"] != DBNull.Value && rdr["STADT_NAME"] != DBNull.Value)
                    {
                        stadtObject.Add(new STADT()
                        {
                            RegionName = rdr["REGION_NAME"].ToString(),
                            StadtName = rdr["STADT_NAME"].ToString()
                        });
                    } 
```

# c - 如何让控制台应用程序接收 100,000 个整数的输入

> ID：10940043
> 
> 赞同：1
> 
> 时间：2012-06-07T21:18:29.667
> 
> 标签：c, input, io, cmd

我有一个简单的 C 控制台应用程序，我正在尝试使用 100,000 的输入对其进行测试。但该程序每次只接收大约 4,096 个字符。这是一个简单的输入示例：

```
1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1    //Up to 100,000 
```

如果我每次手动输入一个数字，它就可以工作，但我只想将输入（100,000 个空格分隔的数字）粘贴到控制台中。

PS：对不起，我的英文不太好

编辑：是的，我使用的平台是 Windows cmd。而且我已经尝试过“属性>选项>缓冲区大小”。

代码示例：

```
int a[100000],i;
for(i=0;i<100000;i++)
    scanf("%i",&a[i]); 
```

测试打印画面： ![在此处输入图像描述](../Images/723538412ca401cebcb8cadeeff660ee.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:20:41.303

您可以使用 100K 整数创建一个文件，然后将其通过管道传输到您的应用程序。例如：

```
cat myInput.txt | myApp 
```

或在 Windows 中：

```
type myInput.txt | myApp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T21:46:22.213

标准 IO 例程（例如`printf()`和`scanf()`）使用[缓冲](http://en.wikipedia.org/wiki/Data_buffer)来提高性能并提供一些很好的标准化例程（例如`fgets()`一次读取一行）。进行函数调用通常比进行系统调用要快得多；如果您要编写一个使用系统调用一次读取一个字节数据的应用程序，它的运行速度将比一次读取 1024 个字节或更大的应用程序慢得多。

这几乎总是一件美妙的事情。

但这确实意味着您需要仔细编写应用程序。您不能简单地发出一个单一`read()`样式的函数来一次读取所有数据。（可用数据量也可能明显大于机器上可用的内存和交换空间量，因此即使可以，它也不是在所有用例中都非常可靠。）

处理输入流的应用程序往往有一个类似这样的循环：

```
int c;
while ((c = getc()) != EOF) {
    /* handle the character c */
} 
```

或者

```
char buffer[1024];
while (fgets(buffer, sizeof buffer, F)) {
    /* handle buffer */
} 
```

第一种情况很方便，因为您永远不必担心跨两个或更多“缓冲区”的输入 - 但第一种情况确实意味着`sscanf()`类似的工具无法帮助您解析数字。第二种情况确实允许您`sscanf()`在解析时使用，但您必须准备好输入跨越两个缓冲区。如果缓冲区只有 8 个字节，则更容易发现：`buffer[8]`并且您希望读取 32 字节的 MD5sum 或`double`需要超过 8 个字符来表示的 a `1234567890`：。第一次读取将获得前八个字节，第二次读取将获得接下来的两个字节，您必须构造您的数字。

# jquery - jQuery 复制和附加 tr 与选择一样多

> ID：10940044
> 
> 赞同：0
> 
> 时间：2012-06-07T21:18:36.960
> 
> 标签：jquery

*HTML：*

```
<table id="mytable">
<tr>
    <td>
        <select name="antal_tidspunkter" id="antal_tidspunkter">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>
    </td>
</tr>
<!-- These three <tr>s below should be duplicated to under each other -->
<tr>
    <td>This should be duplicated</td>
</tr>
<tr>
    <td>This too</td>
</tr>
<tr>
    <td>Hey, me too!</td>
</tr>
<!-- Above should be duplicated as of many you select in the select -->
</table> 
```

*JavaScript：*

```
$(document).ready(function(){
    $('#antal_tidspunkter').change(function(){
        //
    });
});​ 
```

*这是示例：http:* [//jsfiddle.net/PMXmY](http://jsfiddle.net/PMXmY)

我想这样做，当您将选择器更改为 2 时，它应该会出现当前 3 tr 的副本，因此总共 6 tr ..

我已经为选择器编写了 jquery change() 处理程序，但是我该怎么做才能复制三个 tr 并将它们附加在下面。

因此，当您选择 3 时，它应该出现总共 9 `<tr>`，如下所示：http: [//jsfiddle.net/PMXmY/2/](http://jsfiddle.net/PMXmY/2/)（这不起作用我刚刚在 html 中手动复制了 tr）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:16:11.123

这个解决方案怎么样？

```
$("#antal_tidspunkter").on("change", function() {
    $("#mytable tr:gt(3)").remove();
    for (var i = 1; i < this.value; i++) {
        $("#mytable tr:not(:first):lt(3)").clone().appendTo("#mytable");
    }
});​ 
```

如果您不需要每次更改时都删除克隆的行，只需删除第二行即可。

**演示：http:** [//jsfiddle.net/PMXmY/16/](http://jsfiddle.net/PMXmY/16/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:26:23.123

```
$(document).ready(function(){
    $('#antal_tidspunkter').change(function(){
        // get the number selected and subtract one to 
        // get the number of clones you need to append
        var num = parseInt($(this).val()) - 1;

        // the target to which the items will be appended
        var target = $('#mytable');

        //loop that will run as many times as the number that was selected
        for(i =0; i < num; i++) {
            //loop to clone and append only the first three tr's
            for(j = 1; j <=3; j++) {                
                // find the tr, clone it and append it to the target
                target.find('tr').eq(j).clone().appendTo(target);

            }
        }
    });
});​ 
```

[**演示**](http://jsfiddle.net/PMXmY/15/)

*注释代码以便您理解它。*

# php - PHP单淘汰赛桌

> ID：10940047
> 
> 赞同：2
> 
> 时间：2012-06-07T21:18:44.830
> 
> 标签：php, html-table

我浏览了其他几篇与此类似的帖子，但找不到任何适合我正在寻找的东西......

我已经设法硬编码了一个 8 支球队锦标赛括号表，但我真的想要一种方法来根据输入的球队数量使用 for/if 语句来绘制表格。

这是使用 colspans 和 rowspans 对表格进行硬编码以创建空格的代码（在您说使用 CSS 而不是表格之前，我不太了解 CSS，但对表格很有信心）：

```
<table border='1' cellspacing='1' cellpadding='1'>
<tr><td colspan='2' width='120'><b>Round 1</b></td></td><td colspan='2' width='120'><b>Round 2</b></td></td><td colspan='2' width='120'><b>Final</b></td><td width='120'><b>Winner</b></td></tr>
<tr><td colspan='2'>&nbsp;</td><td colspan='2' rowspan='2'></td><td colspan='2' rowspan='4'></td><td rowspan='8'></td></tr>
<tr><td>Group 1</td><td width='20'></td></tr>
<tr><td align='center'>Score 1</td><td></td><td>Round 1 Winner</td><td width='20'></td></tr>
<tr><td>Group 2</td><td></td><td rowspan='3' align='center'>Score 5</td><td></td></tr>
<tr><td colspan='2'></td><td></td><td>Round 2 Winner</td><td width='20'></td></tr>
<tr><td>Group 3</td><td></td><td></td><td rowspan='7' align='center'>Score 7</td><td></td></tr>
<tr><td align='center'>Score 2</td><td></td><td>Round 1 Winner<td></td><td></td></tr>
<tr><td>Group 4</td><td></td><td colspan='2' rowspan='3'></td><td></td></tr>
<tr><td colspan='2'></td><td></td><td>Champion</td></tr>
<tr><td>Group 5</td><td></td><td></td><td rowspan='8'></td></tr>
<tr><td align='center'>Score 3</td><td></td><td>Round 1 Winner</td><td></td><td></td></tr>
<tr><td>Group 6</td><td></td><td rowspan='3' align='center'>Score 6</td><td></td><td></td></tr>
<tr><td colspan='2'></td><td></td><td>Round 2 Winner</td><td></td></tr>
<tr><td>Group 7</td><td></td><td></td><td colspan='2' rowspan='3'></td></tr>
<tr><td align='center'>Score 4</td><td></td><td>Round 1 Winner</td><td></td></tr>
<tr><td>Group 8</td><td></td><td colspan='2'></td></tr>
</table> 
```

这是它产生的：

![图片1](../Images/32e73c3b48ac8cea84f31466fede2c52.png)

到目前为止，这是我尝试使用 for 和 if 语句创建上述内容的尝试，我已经到了在第一列中列出团队名称的地步，但从这一点开始我无法弄清楚我需要做什么...... .

```
<?php
echo "<table border='1' cellspacing='1' cellpadding='1'>";
$num_teams = 8;
$nRounds = floor(log($num_teams,2));
$max_rows = $num_teams*2;
for ($row = 0; $row <= $max_rows; $row++)
{
    echo "<tr>";
    if ($row == 0)
    {
        for ($i = 1; $i <= $nRounds+1; $i++)
        {
            if($i < $nRounds)
            {
                echo "<td width='120'><b>Round ".$i."</b></td>";
                echo "<td width='20'></td>";
            }
            elseif($i == $nRounds)
            {
                echo "<td width='120'><b>Final</b></td>";
                echo "<td width='20'></td>";
            }
            else
            {
                echo "<td width='120'><b>Winner</b></td>";
            }
        }       
    }
    elseif($row == 1)
    {
        $rowwhitespace = ($nRounds*2)+1;
        echo "<td colspan='".$rowwhitespace."'>&nbsp;</td>";
    }
    else
    {
        $rowwhitespace = ($nRounds*2);
        for ($i = 1; $i <= $num_teams; $i++)
        {
            if($i == $row/2)
            {
                echo "<td>Group ".$i."</td>";
                echo "<td colspan='".$rowwhitespace."'></td>";
            }
        }
    }
    echo "</tr>";
}
echo "</table>";
?> 
```

这就是它的样子：

![图片2](../Images/29faa07c748fb250e0ca0194925bc8b3.png)

最终，团队名称、分数和获胜者将从数据库中提取，因此一旦我能够正确布局结构，就需要将其合并。

我还希望它可以扩展到 64 个团队，并根据那么多团队自动绘制表格，而无需使用手动硬编码表格，因为为 16,32 和 64 个团队创建表格需要很长时间。再加上考虑对多达 64 个团队进行双重淘汰，这将使手动编码这项艰巨的工作！

对此的任何指示或帮助将不胜感激！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T17:21:04.483

**编辑：**

好吧，我决定在凌晨 2 点之前解决这个问题。调试大约花了半个小时。我知道我没有更多的跨越，但我不想再花时间尝试做到这一点，因为它需要更多地调整数学公式以正确获得这些公式。截图如下。如果您需要任何解释，请告诉我。

```
<?php

function is_player($round, $row, $team) {
    return $row == pow(2, $round-1) + 1 + pow(2, $round)*($team - 1);
}

$num_teams = 16;
$total_rounds = floor(log($num_teams, 2)) + 1;
$max_rows = $num_teams*2;
$team_array = array();
$unpaired_array = array();
$score_array = array();

for ($round = 1; $round <= $total_rounds; $round++) {
    $team_array[$round] = 1;
    $unpaired_array[$round] = False;
    $score_array[$round] = False;
}

echo "<table border=\"1\" cellspacing=\"1\" cellpadding=\"1\">\n";
echo "\t<tr>\n";

for ($round = 1; $round <= $total_rounds; $round++) {

    echo "\t\t<td colspan=\"2\"><strong>Round $round</strong></td>\n";

}

echo "\t</tr>\n";

for ($row = 1; $row <= $max_rows; $row++) {

    echo "\t<tr>\n";

    for ($round = 1; $round <= $total_rounds; $round++) {
        $score_size = pow(2, $round)-1;
        if (is_player($round, $row, $team_array[$round])) {
            $unpaired_array[$round] = !$unpaired_array[$round];
            echo "\t\t<td>Team</td>\n";
            echo "\t\t<td width=\"20\">&nbsp;</td>\n";
            $team_array[$round]++;
            $score_array[$round] = False;
        } else {
            if ($unpaired_array[$round] && $round != $total_rounds) {
                if (!$score_array[$round]) {
                    echo "\t\t<td rowspan=\"$score_size\">Score</td>\n";
                    echo "\t\t<td rowspan=\"$score_size\" width=\"20\">$round</td>\n";
                    $score_array[$round] = !$score_array[$round];
                }
            } else {
                echo "\t\t<td colspan=\"2\">&nbsp;</td>\n";
            }
        }

    }

    echo "\t</tr>\n";

}

echo "</table>\n";

?> 
```

![8支球队](../Images/bc4ef6fde56ef28d422330b367040302.png)

![16支球队](../Images/66837fd42ea5fc64f23cae45ff67a1e3.png)

干杯

* * *

原文：我没有时间编写脚本，但从数学上讲，它应该遵循某种模式。如果你假设球队总是 2 的力量（所以你总是可以有一个冠军）和 4 排在开始的第一轮开始所以你有

```
1| Empty Row
2| Team 1
3|    Score
4| Team 2 
```

然后我们可以在数学上进行以下操作：

设`$round`为轮数，`$row`为行号`$team`，为该轮中的团队号（稍后会解释）。

打印团队`$row = [2^($round-1) + 1] + [2^($round)]*$team`以了解此公式，您需要将其绘制出来，但基本上因为团队是 2 的幂，并且您使用 4 行（2 的幂）来表示第一轮中的每个“游戏”，我们可以连续将事情分解并以数学方式解决打印团队的行#。所以公式表明，对于`$team`轮数中的球队`$round`将在行中列出`$row`球队的数量总是除以 2，因为一半的球队被淘汰。正如您在代码中所做的那样，总轮数只是团队总数的 2 个基数。下一个分数发布在每对团队之间，因此确定还不错。

当然，最大的问题是您需要打印一个表格，该表格在打印时需要按行而不是按列。最好的方法是有一个目标公式，然后测试你所在的行和列是否满足只需要一个简单函数来测试的方程（当你生成你知道的列总数时，因为你知道有多少回合）。

我希望这有助于引导您实现我正在尝试设置的目标。如果我有时间，我会尝试稍后做点什么。干杯。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T07:56:43.590

最快和最简单的方法是将您手动编码的 html 保存到某种模板文件中。比方说，`tournament-table.html`。

接下来，将保存的模板文件中的动态数据的每个实例更改为模板标签，例如：

*   第 1 组 => {#group1-name}
*   第 2 组 => {#group2-name}
*   分数 1 => {#score1-name}
*   冠军 => {#champion-name}

您的模板看起来像这样：

```
<tr><td>{#group1-name}</td><td width='20'></td></tr>
<tr><td align='center'>{#score1-name}</td><td></td><td>{#round1-winner}</td><td width='20'></td></tr> 
```

接下来，要填写数据，您只需将模板加载到变量中并对其进行字符串替换：

*   要加载数据，您可以执行以下操作：

    ```
    $raw_template = file_get_contents('/path/to/your/template/tournament-table.html'); 
    ```

*   将需要的数据填入变量中：

    ```
    //do the needed queries
    //after that, fill variable with query and processes result
    $group1_name = "Group 1";
    $group2_name = "Group 2";
    $Score1_name = "Score 1"; 
    ```

*   下一步是执行字符串替换：

    ```
    $raw_template = str_replace('{#group1-name}', $group1_name, $raw_template, 1); 
    ```

*   最后，回显结果：

    ```
    echo $raw_template; 
    ```

# ruby-on-rails - 响应发送到浏览器后在 Rails 中执行代码

> ID：10940049
> 
> 赞同：5
> 
> 时间：2012-06-07T21:19:00.290
> 
> 标签：ruby-on-rails, garbage-collection

使用 Rails 3.0.7、REE 1.8.7。

在将响应发送到浏览器后，我想在 Rails 中运行代码（特别是垃圾收集）。

有没有办法修补 Rails/Rack/something 以便在控制器将响应发送到浏览器后立即调用 GC.start ？

*注意：这不是我想使用delayed_job 或resque 的情况。我已经知道这些工具，它们不适合这个用例。*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T16:03:45.137

[乘客的这一行补丁允许您在请求之间运行 GC](https://github.com/wbharding/passenger/commit/58dae4baf153de30dbfae5cf0e0c38bc653b366d)。实施后，我们看到我们的 GC 执行时间（由 NewRelic 报告）下降了大约 40%。个别结果可能会有所不同。:)

感谢[这篇文章](http://www.williambharding.com/blog/uncategorized/rails-3-performance-abysmal-to-good-to-great/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T22:05:37.353

您可以在 Merb 中执行此操作，但 Rails 本身不允许您执行此操作。如果您只需要调用垃圾收集器，只需在请求完成后启动一个新线程并调用 GC。这样您就不会延迟对用户的响应并得到您想要的。

```
Thread.new do 
  GC.start
end 
```

如果您真的需要这样做，您可能应该考虑两件事，创建更少的对象或在运行更好的垃圾收集器的**JRuby上运行。**

# yii - 在哪里可以找到 zii 和 zii jui 小部件的文档？

> ID：10940050
> 
> 赞同：1
> 
> 时间：2012-06-07T21:19:00.993
> 
> 标签：yii, widget

我正在尝试使用 Yii 的 zii 和 zii jui 小部件扩展。不幸的是，我发现有关小部件（例如 CJuiAutoComplete、CJuiDatePicker 等）的文档很少。我想要一个可以传递给小部件的所有参数的列表，这些参数是必需的，以及它们是如何使用的。例如，“名称”字段是什么，它是必需的，字段的预期格式是什么？'attribute'、'value'、'showAnim'、'options' 和 'htmlOptions' 呢？我已经根据几个例子猜到了其中一些，但我想对这些领域有一个很好的了解。另外，如何为自动完成搜索设置动画？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:55:46.763

每个`CJuiXXXX`小部件都是一个 jQuery UI 小部件，这意味着您可以在[jQuery UI 站点](http://jqueryui.com/demos)上找到每个小部件的完整文档。

CJuiDatepicker 是[datePicker](http://jqueryui.com/demos/datepicker/)， CJuiAutoComplete 是[autoComplete](http://jqueryui.com/demos/autocomplete/)等等。

*   `name`将呈现为`name`输入的值`<input type="text" name="NAME">`
*   `value`是元素的初始值
*   `showAnim`数组中的所有内容`options`都是特定插件的选项。有关每个插件的可用选项列表，请查看 jQuery UI 站点。
*   `htmlOptions`就是这样，将在 HTML 中呈现的选项。例如，如果`htmlOptions`数组是，`array('class'=>'blue', 'style'=>'color:red;', 'id'=>'element')`那么 HTML 元素将有一个`blue`css 类，它的 id 的显式`color:red`样式`element`。

# php - 没有 AJAX 的 HTML5 拖放是否可能？

> ID：10940051
> 
> 赞同：2
> 
> 时间：2012-06-07T21:19:16.063
> 
> 标签：php, javascript, jquery, html, file-upload

我尝试制作一个没有 ajax 的 HTML5 上传器，因为我必须创建一个带有输入名称的目录。我试着让它像正常人一样工作

```
<input type="file" /> 
```

但是当它是正常上传时，我无法获得 $_FILES 中的 tmp_name。我可以只使用文件的 mozFullPath 上传吗？有我的代码，dropzone 运行良好。

```
<script>
    var filesUploaded = new Array();

    var dropZoneElement = document.getElementById("dropZone");

    dropZoneElement.addEventListener('dragleave', onDragLeave, false);
    dropZoneElement.addEventListener('dragenter', onDragEnter, false);
    dropZoneElement.addEventListener('dragover', onDragOver, false);
    dropZoneElement.addEventListener('drop', onDrop, false);

    function onDragLeave(event) {
        event.preventDefault();
        event.stopPropagation();
        //you can remove a style from the drop zone

    }

    function onDragEnter(event) {
        event.preventDefault();
        event.stopPropagation();
        //you can add a style to the drop zone
    }

    function onDragOver(event) {
        event.preventDefault();
        event.stopPropagation();
        event.dataTransfer.effectAllowed = "copy";
        event.dataTransfer.dropEffect = "copy";
    }

    function onDrop(event) {
        event.preventDefault();
        event.stopPropagation();
        console.log(event.dataTransfer);
        onFilesSelected(event.dataTransfer.files);
    }

    function onFilesSelected(files) {
        var dropZoneElement = document.getElementById("dropZone");
        for (var i=0; i<files.length; i++) {
            filename = files[i]['name'];
            filesrc = files[i]['mozFullPath'];
            filesize = files[i]['size'];
            filetype = files[i]['type'];
            filesUploaded[i] = filesrc;

            var span = document.createElement("span");
            span.setAttribute('class','fileUpload');
            dropZoneElement.appendChild(span);
            var reader = new FileReader();
            reader.onload = function (files) {
                span.innerHTML = '<i class="icon-file"></i> ' + filename;
            };
            reader.readAsDataURL(files[i]);
        }

    }
</script> 
```

谢谢大家的建议和帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:42:26.310

不要在意这一切。只需使用`FormData`它，它将负责构建正确的标头，这意味着您将拥有正确的`$_FILES`变量服务器端。

```
var datas = new FormData( 'form-name' );
filesUploaded.forEach( function( file, index ) {
    datas.append( 'file' + index, file );
} ); 
```

但是随后，您将被迫通过 XHR 发送数据，其内容如下：

```
xhr.send( datas ); 
```

手动构造 DOM 文件输入元素似乎是不可能的。不过，您没有理由不使用 AJAX。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T03:03:37.893

如果不使用`XMLHttpRequest`适当的序列化程序（例如[`FormData`](https://developer.mozilla.org/en/XMLHttpRequest/FormData).

如果您不想要 AJAX，则需要 Flash/Java 或使用：

```
<input name="myfiles[]" type="file" multiple="multiple" /> 
```

# android - 获取未通过 Google Play 安装的应用程序的堆栈跟踪

> ID：10940053
> 
> 赞同：1
> 
> 时间：2012-06-07T21:19:23.067
> 
> 标签：android, stack-trace, crash-reports

我通过电子邮件将我的应用程序发送给了几个用户。它可以很容易地安装在几个测试用户设备上。

现在，我需要从应用程序崩溃中获取堆栈跟踪，类似于可用于通过 Google Play 销售的应用程序的跟踪。

有没有“舒服”的可能？

虽然我有自己的日志并将其写入日志文件，以便测试用户可以向我发送我自己创建的日志，但我自己当然无法捕获所有崩溃情况。

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T21:43:38.713

您应该查看 ACRA [http://code.google.com/p/acra/](http://code.google.com/p/acra/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T21:57:29.437

看看[https://www.zubhium.com/](https://www.zubhium.com/) 添加一些代码到你的应用程序，给你的朋友 URL，他们可以测试它。您可以获得完整的报告、对安装的控制等。

> 为您的用户提供 Android 测试版分发、实时崩溃分析和支持平台的平台。
> 
> Zubhium 实时崩溃报告器在您的测试版或市场应用程序中发现、跟踪崩溃。（支持离线崩溃报告）。我们的平台通过详细的细节分析崩溃。通过在两分钟内嵌入两行轻量级 SDK 来启用自动崩溃报告。

# eclipse - Eclipse 格式化程序中的冲突规则，希望将大括号与方法/类/等放在同一行，但不想加入其他换行符

> ID：10940060
> 
> 赞同：1
> 
> 时间：2012-06-07T21:19:37.417
> 
> 标签：eclipse

我正在努力将我们的代码库格式化为更统一的编码约定，其中一项更改是要求左大括号与类、方法等在同一行。这在 eclipse 中很容易配置，但我也想要设置格式化程序不加入已经换行的行，以便格式化程序不会破坏自定义换行符。不幸的是，这会覆盖大括号规则，所以旧代码的格式如下

```
int foo()
{
    return 0;
} 
```

格式化程序未触及，因为固定大括号需要加入换行符。解决这个问题的最佳方法是什么？我是否需要为我们的初始批量格式找到另一个格式化程序，然后我们将简单地对未来的提交强制执行策略？

# c# - 保存使用 SaveFileDialog 动态创建的 Word 文档？

> ID：10940064
> 
> 赞同：1
> 
> 时间：2012-06-07T21:20:00.560
> 
> 标签：c#, winforms, ms-word

我有将文本写入 Word 文档（非 XML）并将其保存到文件的代码。现在，我正在尝试对其进行修改，以便创建文档，然后提示用户保存文档。

这是创建 Word 文档的代码：

```
object miss = System.Reflection.Missing.Value;
object Visible = true;
object start1 = 0;
object end1 = 0;
Microsoft.Office.Interop.Word.Application WordApp = new Microsoft.Office.Interop.Word.Application();
Document aDocument = WordApp.Documents.Add(ref miss, ref miss, ref miss, ref miss);
Range rng = aDocument.Range(ref start1, ref miss);

try
{
    rng.Font.Name = "Georgia";
    rng.InsertAfter("Report Header!");
    object filename = @"C:\Users\test.doc";

    aDocument.SaveAs(ref filename, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, ref miss);
    object saveChanges = Microsoft.Office.Interop.Word.WdSaveOptions.wdPromptToSaveChanges;
    object originalFormat = Microsoft.Office.Interop.Word.WdOriginalFormat.wdWordDocument;
    object routeDocument = true;
    ((_Document)aDocument).Close(saveChanges, originalFormat, routeDocument); //to close the document process (winword.exe)
    //WordApp.Visible = true;
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message);
} 
```

这按预期工作；它创建一个 Word 文档并为用户打开它。我一直在阅读Microsoft 提供的有关使用 SaveFileDialog 保存文件的[链接](http://msdn.microsoft.com/en-us/library/aa984409%28v=vs.71%29.aspx)，但我不完全确定如何将其应用于我的情况。由于 SaveFileDialog 提供了要写入的流对象，我应该从 Word 文件中读取并将其写入流吗？如果是这种情况，我不确定如何编码，但这似乎是一种迂回的方式。有没有办法将创建的 Word 文档直接传递给 SaveFileDialog？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T21:27:16.777

SaveFileDialog 可以简单地用于为您的用户提供一个选择文件夹和名称的界面。然后由您来保存文件。

```
SaveFileDialog saveFileDialog1 = new SaveFileDialog();
saveFileDialog1.Filter = "Word document|*.doc";
saveFileDialog1.Title = "Save the Word Document";
if(DialogResult.OK == saveFileDialog1.ShowDialog())
{
    string docName = saveFileDialog1.FileName;
    if(docName.Length > 0)
    {
        object oDocName = (object)docName;
        aDocument.SaveAs(ref oDocName, ref miss, ref miss, ref miss, ref miss, ref miss,  
                     ref miss, ref miss, ref miss, ref miss, ref miss, ref miss, 
                     ref miss, ref miss, ref miss, ref miss); 
        WordApp.Visible = true; 
    }
} 
```

您在问题中提到的方法由 MSDN [in this article](http://msdn.microsoft.com/en-us/library/sfezx97z.aspx)记录，但在您的情况下，让 MSWORD 应用程序对其文件进行保存操作更为实用。

# c# - 从 ASP.NET 执行 SSIS 包时出错

> ID：10940066
> 
> 赞同：2
> 
> 时间：2012-06-07T21:20:08.970
> 
> 标签：c#, asp.net, ssis, integration

我们在部署网站时从 ASP.NET 运行 SSIS 包时遇到问题。我们将包加载到 MSDB 的集成服务服务器中。当我们从 SQL Server Management Studio 中尝试该包时，它运行正常。当我从 Visual Studio 执行代码时，服务器中加载的包运行正常。将页面部署到服务器时会出现问题：没有捕获异常并且没有记录错误，但是包没有执行。我们只是在 Windows 事件查看器中看到一条错误消息：“包”失败。”。ASP.NET 页面运行对 SQL Server 以及源 Excel 文件所在的共享具有“sysadmin”访问权限的帐户的模拟。

下面是调用 SSIS 包的代码：

```
 public void executePkg(string pkgAddr, string pkgServer, int periodID)
    {
        logger.Info(string.Format("Execution of SSIS Package '{0}' in server '{1}' started.", pkgAddr, pkgServer));
        string pidvar = "User::periodid";
        string pkgLocation;
        Package pkg;
        Application app;
        DTSExecResult pkgResults;
        app = new Application();
        pkgLocation = pkgAddr;
        try
        {
            pkg = (Package)app.LoadFromSqlServer(pkgAddr, pkgServer, null, null, null);
            Variables vars = pkg.Variables;
            int varCount = vars.Count;
            bool varExist = vars.Contains(pidvar);
            pkg.VariableDispenser.LockOneForWrite(pidvar, ref vars);
            vars[pidvar].Value = periodID;
            pkg.Variables[pidvar].Value = periodID;
            vars.Unlock();
            pkgResults = pkg.Execute();
        }
        catch (Exception ex)
        {
            logger.Error(ex.Message);
        }
    } 
```

任何帮助，将不胜感激。

注意：只是一个小的更正，ASP.NET 不再模拟，而是 AppPool 使用服务帐户运行。两种情况下的行为相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:32:52.030

开发盒和服务器的架构有区别吗？

请务必注意，如果您在 32 位环境中开发包并希望在 64 位环境中运行该包，则连接管理器需要兼容 64 位。某些连接管理器（例如 Excel）只能在 32 位环境中工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:26:26.637

我不确定这个问题的确切答案，但是，我有一些值得检查的建议。SSIS 包是安装到 SQL Server DB 还是文件系统，因为每个都需要不同的方式来访问包。

[http://consultingblogs.emc.com/jamiethomson/archive/2006/02/20/ssis_3a00_-deploy-to-file-system-or-sql-server.aspx](http://consultingblogs.emc.com/jamiethomson/archive/2006/02/20/ssis_3a00_-deploy-to-file-system-or-sql-server.aspx)

希望这是解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-11T19:15:06.793

您的主要问题似乎是缺少错误报告。

第一的：

您的 SSIS 包是否启用了错误日志记录？我打开它，只是为了 OnError 事件。这将在数​​据库中创建一个名为 sysssislog 的表，并在那里写入错误（以及您选择的任何其他日志）。

[https://technet.microsoft.com/en-us/library/ms138020%28v=sql.105%29.aspx](https://technet.microsoft.com/en-us/library/ms138020%28v=sql.105%29.aspx)

值得注意的是：当我这样做时，SSIS 会创建一个名为 domain\username.sysssislog 的表，而不是 dbo.sysssislog。如果您的包这样做，您只需要删除错误命名的表并创建 dbo.sysssislog 以便包可以在那里写入错误。

第二：

由于您使用对象模型来执行您的包，因此您可以从包中捕获错误并对其进行处理。对于调试，我只是在消息窗口中弹出它们，以便查看问题所在。

我就是这样做的，但我不确定它是否上油：

```
 Dim errReport As String
            Dim errors As DtsErrors = pkg.Errors

            Dim errItem As Boolean = errors.Contains(0)

            errReport = "No Error"
            If (errItem) Then
                Dim firstEItem As DtsError = errors(0)
                Dim ex As New Exception("The file could not be loaded. Please submit a helpdesk ticket.")
                Throw ex
                errReport = "The following error occurred: " + firstEItem.Description
            End If

            MsgBox(errReport, MsgBoxStyle.OkOnly, pkgResults.ToString) 
```

我希望这有帮助。

# c++ - 内存位置异常的 C++ bad_alloc

> ID：10940067
> 
> 赞同：3
> 
> 时间：2012-06-07T21:20:17.923
> 
> 标签：c++, visual-studio-2010, opengl, openscenegraph

> **OSGP.exe 中 0x758cd36f 处的未处理异常：Microsoft C++ 异常：内存位置 0x0028ef70 处的 std::bad_alloc..**

我正在尝试在 Visual Studio 中执行以下代码。但是，我一直遇到上述异常。我添加了一个 try catch 来帮助我捕捉错误，但似乎无济于事。我相信问题与输出窗口中的以下内容有关

```
First-chance exception at 0x758cd36f in OSGP.exe: Microsoft C++ exception: std::bad_alloc at memory location 0x0019f2f4..
First-chance exception at 0x758cd36f in OSGP.exe: Microsoft C++ exception: std::bad_alloc at memory location 0x0019ec84..
First-chance exception at 0x758cd36f in OSGP.exe: Microsoft C++ exception: [rethrow] at memory location 0x00000000..
The thread 'Win32 Thread' (0x16dc) has exited with code 0 (0x0).
The program '[448] OSGP.exe: Native' has exited with code 0 (0x0).** 
```

这是代码：

```
#include <osgDB/ReadFile>
#include <osgViewer/Viewer>
#include <new>

#include "stdafx.h"

using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{ 
    int flag = false;
    osgViewer::Viewer viewer;
     osg::ref_ptr<osg::Node> root;
    try
    { 
        root = osgDB::readNodeFile("cessna.osg");
        viewer.setSceneData(root.get()); 
    }
    catch(bad_alloc)
    { 
        if (flag) cout << "a bad_alloc exception just occured"; 
    }
    return viewer.run(); 
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-07T21:52:54.177

当程序没有足够的内存来完成请求的操作时，通常会抛出 std::bad_alloc。

可能出现的问题：

*   cessna.org 太大，无法在您运行它的机器上处理
*   cessna.org 中的错误数据/逻辑导致它尝试分配无限量的内存

但是根据给出的信息是不可能说的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-26T17:39:44.023

我应该通过披露我的编码专业知识可以被慷慨地描述为新手来限定此响应。

我正在运行的一些代码也有类似的错误。原因似乎是当我像这样声明一个新数组时：

```
path_chr = new char [path.size()+1]; 
```

我在我的代码中多次这样做（数百万次？）。看来我最终内存不足。修复是在我完成后删除变量。

```
delete [] path_chr; 
```

之后就再也没有问题了。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-28T01:53:46.993

如果在对象的构造函数中传递了指向无效内存的指针，也可能会抛出错误的分配。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-08-27T07:34:38.117

将解决方案平台 x86 更改为 x64。RAM 为 16Gb，但 x86 的视觉寻址仅 4Gb 块 [![配置管理器](../Images/1640ae36554e16c1e5d822030baab784.png)](https://i.stack.imgur.com/3VsI6.png)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-17T10:03:45.670

我发现当您尝试读取数组末尾之后会发生这种情况。也就是说，如果您尝试访问的元素多于数组中存在的元素数量。

# c# - C#和Python之间的进程间通信

> ID：10940068
> 
> 赞同：3
> 
> 时间：2012-06-07T21:20:27.557
> 
> 标签：c#, python, interprocess, redirectstandardoutput, python-3.1

我可以理解关于这个话题有很多问题，但没有一个能真正解决我的问题。所以在这里我展示了我的代码，我希望在这里指出我的错误。

我有一个用 C# 编写的程序，它将调用一个 python 可执行文件/文件。第一个要求是我通过输入流将一个参数传递给 python 文件。这是我能做到的。我现在面临的真正问题是，我必须查看我的 python 文件是否正在打印“请输入参数_x”，我必须在我的 C# 代码中读取这个输出并检查它是否是参数_x，然后只将参数值写入输入流。下面是 C# 和 Python 的代码片段。

**C#代码如下：**

```
using System;
using System.IO;
using System.Diagnostics;
using System.ComponentModel;

namespace ConsoleApplication
{
    class Program
    {
        static void Main(string[] args)
        {
            //Create a new process object
            Process myProcess = new Process();

            //Provide the start information for the process
            myProcess.StartInfo.FileName = "python.exe";
            myProcess.StartInfo.Arguments = "mytestpython.py";
            myProcess.StartInfo.UseShellExecute = false;
            myProcess.StartInfo.RedirectStandardInput = true;
            myProcess.StartInfo.RedirectStandardOutput = true;

            StreamReader myStreamReader;
            StreamWriter myStreamWriter;

            //Invoke the process from current process
            myProcess.Start();

            myStreamReader = myProcess.StandardOutput;

            //Read the standard output of the spawned process.
            string myString = myProcess.StandardOutput.ReadToEnd();
            Console.WriteLine(myString);

            if (myString.Contains("argument_x"))
            {
                myStreamWriter = myProcess.StandardInput;
                String argument = "argument_value";
                myStreamWriter.WriteLine(argument);
            }

           myProcess.WaitForExit();
           myStreamWriter.Close();
           myStreamReader.Close();
           myProcess.Close();
      }
   }
} 
```

**mytestpython.py**文件中的 python 程序如下所示：

```
import sys
import getpass
prompt_string = "Please enter argument_x"
if sys.stdin.isatty():
    reqd_arg = getpass.getpass(prompt=prompt_string)
else:
    print(prompt_string)
    reqd_arg = sys.stdin.readline().rstrip() 
```

请帮帮我，因为我觉得我已经正确编写了 90% 的代码，中间有一个小错误。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T21:29:09.037

当你这样做时`myProcess.StandardOutput.ReadToEnd();`，它会尝试读取到 Python 程序的 stdout 的末尾，这意味着它将等待 Python 程序完成执行并关闭其 stdout 流，但它永远不会这样做，因为它正在等待来自 C# 程序的输入。这会导致死锁。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T22:35:01.450

`ReadToEnd()`当父进程等待子进程完成时很有用。在交互式进程通信的情况下，您应该真正考虑使用异步通信，查看[此处](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.beginoutputreadline.aspx)`BeginOutputReadLine`的 MSDN 文档以获取帮助

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T18:25:46.260

我修改了 C# 代码以接受 CLI 参数并在提示符下传递密码，如下所示：

```
 using System;
    using System.Collections;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.IO;
    using System.Diagnostics;
    using System.ComponentModel;

    namespace Stub
    {
      class Program
        {
          static void Main(string[] args)
            {
            // Declare variables and initialize
            string passWord = string.Empty;
            string processArgs = getArguments(args); //Call getArguments method

            Console.Write("Please enter the system password : ");
            passWord = readPassword(); //call readPassword method

            Process p = new Process();

            p.StartInfo.FileName = "myexe.exe";
            p.StartInfo.Arguments = processArgs;
            p.StartInfo.WorkingDirectory = "my_working_directory";

            p.StartInfo.UseShellExecute = false;
            p.StartInfo.RedirectStandardInput = true;
            p.StartInfo.RedirectStandardOutput = true;

            p.Start();
            StreamWriter sw = p.StandardInput;
            StreamReader sr = p.StandardOutput;

            writePassword(sr, sw, "password", passWord);

            sw.Close();
            sr.Close();
            p.WaitForExit();
            p.Close();
    }

    static string getArguments(string[] args)
    {
        StringBuilder procArgs = new StringBuilder();
        foreach (string arg in args)
        {
            procArgs.Append(arg);
            procArgs.Append(" ");
        }
        return procArgs.ToString();
    }

    static void writePassword(StreamReader sr, StreamWriter sw, string keyWord, string passWord)
    {
        string mystring;            
        do
        {
            mystring = sr.ReadLine();
        } while (!mystring.Contains(keyWord));
        if (mystring.Contains(keyWord))
            sw.WriteLine(passWord);
        else
            sw.WriteLine("\r\n");
    }

    static string readPassword()
    {
        string pass = string.Empty;
        ConsoleKeyInfo key;

        do
        {
            key = Console.ReadKey(true);
            if (key.Key != ConsoleKey.Backspace)
            {
                pass +=key.KeyChar;
                Console.Write("*");
            }
            else
            {
                if (pass.Length > 0)
                {
                    pass = pass.Substring(0, (pass.Length - 1));
                    Console.Write("\b \b");
                }
            }
        } while (key.Key != ConsoleKey.Enter);

        return pass;
    }
} 
```

}

然后在 Python 中做一个小的修改：

```
 import sys
    import getpass
    prompt_string = "Please enter password"
    if sys.stdin.isatty():
        reqd_arg = getpass.getpass(prompt=prompt_string)
    else:
        print(prompt_string)
        sys.stdout.flush()
        reqd_arg = sys.stdin.readline().rstrip() 
```

瞧……那行得通！

# android - 无法调用第二个 Activity

> ID：10940085
> 
> 赞同：1
> 
> 时间：2012-06-07T21:21:56.263
> 
> 标签：android

大家好，提前感谢您的任何回答。

我遇到的问题是我的第二个活动“Calander.class”没有从我的主要活动“ShiftSelection”中调用。我一般是编码和 android 新手，我只是想学习基础知识，但这个问题真的难倒我。我已将 Activity 添加到 Manifest 文件中，并认为我正确调用了 Intent，但是在运行我的 Button 的应用程序 onClick 时，它应该调用第二个 Activity 并没有做任何事情。

我究竟做错了什么？非常抱歉，如果这是一个简单的答案，但我向您保证，我已经尝试了很多小时，但尝试了不同的事情，但都失败了。

我的第一个活动和清单文件的代码如下。

```
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.RadioButton;
import android.widget.RadioGroup;

 public class ShiftSelection extends Activity{

    Button openButton;
    RadioGroup shiftSelection; 

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.shiftselection);    

    shiftSelection = new RadioGroup(this);

    RadioButton shiftPattern1 = new RadioButton(this); //shiftPattern1 = 4 shift 
    shiftPattern1.setText("4 shift");
    shiftPattern1.setChecked(true);
    shiftPattern1.setId(01);

    RadioButton shiftPattern2 = new RadioButton(this); //shiftPattern2 = 6     shift        
    shiftPattern2.setText("4 shift");
    shiftPattern2.setId(02);        

    shiftSelection.addView(shiftPattern1);
    shiftSelection.addView(shiftPattern2);        

    Button openButton = new Button(this);
    openButton.setText("open");
    openButton.setOnClickListener(new OnClickListener() {

          @Override
           public void onClick(View v) {
              Intent intent = new Intent(getApplicationContext(), Calander.class);
              int genderID = shiftSelection.getCheckedRadioButtonId();

            switch(genderID){

            case 01:
             intent.putExtra("shiftPattern", "1");
             break;

            case 02:
             intent.putExtra("shiftPattern", "2");
             break;
             }
             startActivity(intent);
             }

          });

    }

} 
```

和清单文件

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
  package="com.examples"
  android:versionCode="1"
  android:versionName="1.0">
<application android:icon="@drawable/icon" android:label="@string/app_name">
    <activity android:name=".ShiftSelection"
              android:label="@string/app_name">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
        </activity>
        <activity android:name=".Calander">
        </activity>              
</application>
</manifest> 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T21:43:41.653

在您的意图中`getApplicationContext()`，尝试使用它而不是

```
Intent intent = new Intent (this, Calendar.class); 
```

也许这对你有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T21:24:57.717

你得到你的按钮不正确。通过这样做，您将 onClick 侦听器分配给一个永远不可见的按钮。

而不是做

```
Button openButton = new Button(this); 
```

您应该尝试通过以下方式在现有布局中找到按钮

```
Button openButton = (Button)findViewById(R.id.openButton); 
```

替换`R.id.openButton`为您在`R.layout.shiftselection`布局文件中分配按钮的任何 ID

你现在做的方式是创建一个新按钮，然后永远不会将它附加到布局，所以它永远不会显示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T23:53:09.727

另一个可能有帮助的想法：使用按钮视图的 onClick 属性。您可以将其设置为应用程序范围内的*任何*方法的名称，尽管在与视图关联的 Activity 中使用方法是最常见的。方法签名是

公共无效*方法名*（视图 v）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T06:23:08.950

试试这个

```
Intent intent = new Intent(ShiftSelection.this, Calander.class); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T19:05:01.567

我得到了三个你需要的变化 2 活动和 1 清单

* * *

**在ShiftSelection.java** Activity中替换此代码

```
Button openButton = new Button(this); 
```

到

```
Button openButton = (Button)findViewById(R.id.button1); 
```

并更改此行（相同活动的 onClick 方法）

```
Intent intent = new Intent(getApplicationContext(), Calander.class); 
```

到

```
Intent intent = new Intent(ShiftSelection.this, Calander.class); 
```

* * *

那么你的**shiftselection.xml**应该有一个像这样的按钮

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
    <Button android:id="@+id/button1" 
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content" 
    android:text="Button Open"></Button>
</LinearLayout> 
```

* * *

最后最重要的是，您需要像这样在**AndroidManifest.xml**文件中为这两个活动创建条目。

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.examples"
      android:versionCode="1"
      android:versionName="1.0">
    <uses-sdk android:minSdkVersion="8" />
    <application android:icon="@drawable/icon" android:label="@string/app_name">

        <activity android:name=".ShiftSelection"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name=".Calander"
                  android:label="@string/app_name">
            <intent-filter>                
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>
</manifest> 
```

* * *

让我知道您是否仍然无法执行此操作。

# cookies - 为 cookie 设置消息框

> ID：10940086
> 
> 赞同：0
> 
> 时间：2012-06-07T21:22:01.373
> 
> 标签：cookies

嗨，我需要一些帮助来设置一个消息框，告诉查看者我的网站使用 cookie，这是由于新的欧盟法律规定必须征得他们的许可才能保存 cookie。我以前从未手动设置过 cookie，而且我很难找到我想要/需要的东西。

基本上，当查看者第一次查看站点时，顶部会出现一个框，说明站点使用 cookie，他们可以查看 cookie 的作用，接受或不接受。

我已经准备好了盒子，我现在需要的是一个脚本，如果查看者单击是并接受，那么 cookie 将永远记住这一点，除非他们从浏览器中删除 cookie，还有一个脚本，如果他们单击否，它将记住并且不会在该会话的剩余时间中显示。

我希望这是有道理的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-11T17:49:50.380

执行此操作的一种方法如下。

* * *

1) 创建一个 JavaScript 方法来检查**是否启用了 cookie**以及**用户是否已经接受了它们**：

```
var cookieLaw = {
 setCookies : function (showCookieMsg) {
  if(navigator.cookieEnabled == true) {
   if(document.cookie.indexOf('cookie-permission') == -1) {
    showCookieMsg();
   }
  }
 }, 
```

2) 如果启用了 cookie 但未接受**，则会显示一条消息**：

```
 showMessage : function () {
  $('body').append('<div id="cookie-message">[your_cookie_message]<a id="continue-link" href="#">X Don't show this message again.</a></div>');
  $('#cookie-message').fadeIn();
  $('#continue-link').click(function() {
   $('#cookie-message').fadeOut();
   document.cookie = "cookie-permission=accepted; expires=Thu, 31 Jan 2030 23:59:59 UTC; path=/";
  });
 }
}; 
```

3）当页面准备好时**执行代码：**

```
jQuery(document).ready(function() {
 cookieLaw.setCookies(cookieLaw.showMessage);
}; 
```

4）通过添加**使消息不可见：**

```
#cookie-message {display:none;} 
```

到您的 CSS 文件和其他格式（如果需要）。

* * *

请记住，此方法针对启用了 JavaScript 的浏览器。对于非 JS 浏览器，需要添加一些服务器端代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T13:36:40.923

尝试这个：

```
javascript.alert("By continuing to browse our site, you accept to our use of cookies.") 
```

# tridion - 在 Tridion 2011 中部署 PDF 的最简单方法

> ID：10940088
> 
> 赞同：5
> 
> 时间：2012-06-07T21:22:16.777
> 
> 标签：tridion, tridion-2011

我有哪些选项可以部署一组将通过基于分类 API 的搜索页面进行搜索的 PDF？我唯一的选择是：

1）通过组件演示将每个PDF添加到页面

2) 编写一个 C# TBB 来输出它们。

我不喜欢选项 1，因为指向 pdf 的链接只会在用户搜索它们时显示。所以我只剩下选项2了，对吗？只需添加一个带有 TBB 的页面，其唯一目的是发布 PDF 和元数据？

更新：

我添加了一个带有以下行的 DWT TBB（注意额外的 @@），以及我的 PDF 发布。

关联

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-06-08T00:49:21.407

这种功能的一个不错的选择是构建一个支持“发布为动态组件”的组件模板 (CT)，这将创建一个动态组件演示 (DCP)。然后将您的 PDF 所基于的模式添加到新 CT 的链接模式字段中。

让您的 PDF 真正部署的最简单方法是制作一个 DWT 模板构建块，如下所示：

```
<a href="" tridion:href="@@Component.ID@@" tridion:type="binary">link</a> 
```

并将其添加到您的新复合模板中，然后是默认完成操作 TBB。

然后您可以直接发布 PDF 组件，二进制文件将被部署，多媒体组件上的任何元数据都将被放置在代理数据库中，以便使用分类和代理 API 进行查询。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-07T22:09:24.133

您可以将每个 PDF 发布为动态组件演示文稿。每个 PDF 多媒体组件都需要定义一些元数据字段来保存您的分类查找数据（即关键字）。然后，您的搜索页面将使用 Content Delivery Taxonomy API 检索与搜索关键字匹配的 PDF。

# stringtemplate - 转义 StringTemplate 属性/属性名称中的点？

> ID：10940090
> 
> 赞同：1
> 
> 时间：2012-06-07T21:22:29.433
> 
> 标签：stringtemplate

我有以下地图，其中包含一些要在模板中使用的属性

```
Map<String,String> attributes = new HashMap<String,String>();
attributes.put("attr1.val","foo"); 
attributes.put("attr2.val","bar"); 
```

在模板中，如果我这样引用它们：

```
<b>$attr1.val$: $attr2.val$</b> 
```

StringTemplate 假定我正在取消引用 attr1 上的属性。转义点 ( `$attr1\.val$`) 似乎也不起作用。该文档似乎没有提供有关如何或是否可能的线索。

我是否只需将分隔符更改为点以外的内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T22:27:53.850

浏览手册，这包含在[困难的属性名称](http://www.antlr.org/wiki/display/ST/StringTemplate+3.0+Printable+Documentation#StringTemplate30PrintableDocumentation-Difficultpropertynames)下：

> 由于与内置关键字冲突或因为它们与字符串模板使用的 ID 规则不匹配，某些属性名称会导致解析错误。这些难以处理的属性名称可以通过引用属性名称并结合间接属性构造来处理：
> 
> $person.("first")$ --- 内置关键字
> 
> $person.("1")$ --- 不符合 ID 的名称

处理地图时很可能会出现难以命名的属性。映射键可以使用任意字符串定义，包括用于定义模板本身的空格和语法字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:25:49.487

我想更改分隔符将是最简单的。StringTemplate 在 $'s 中没有转义机制。

# sql - SqlDataAdapter.Update 在 sql 表中将双精度截断为整数

> ID：10940095
> 
> 赞同：0
> 
> 时间：2012-06-07T21:22:46.433
> 
> 标签：sql, ado.net

我正在处理 a 中的数据`DataTable`，然后调用`SqlDataAdapter.Update()`将数据放回 SQL DB。它主要工作 - 除了我可以在我调用之前看到，`Update()`某些列中的数字`DataTable`有小数部分，但是在`Update()`我查看 SQL 表并且数字的小数部分被删除之后，值是所有整数。

原件`DataTable`由 创建`SqlDataAdpater.Fill()`，并`SqlCommandBuilder`用于创建默认的更新/插入/删除命令。填充的 select 语句`DataTable`只包含一个 SQL 表。相关的 SQL 表列数据类型是`decimal`，我确认是 中列的类型`DataTable`。

关于我在这里缺少什么的任何建议？感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:05:43.433

[根据要求，我的评论作为答案：]

查看`DataAdapter`'s`UpdateCommand`的参数集合，看看[`Scale`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.scale.aspx)这个字段有什么。我假设它是 0 而不是 2（你的小数位数）。然后相应地更改它。

# sql - OrientDB GraphED - SQL 在两个（选择顶点 RID）之间插入边？或非常大的进口替代方法

> ID：10940097
> 
> 赞同：3
> 
> 时间：2012-06-07T21:22:53.340
> 
> 标签：sql, graph-theory, orientdb, bulkinsert, vertices

例如，OrientDB Graph 中的两个简单顶点：

```
orientdb> CREATE DATABASE local:/databases/test admin admin local graph;       
Creating database [local:/databases/test] using the storage type [local]...
Database created successfully.
Current database is: local:/graph1/databases/test
orientdb> INSERT INTO V (label,in,out) VALUES ('vertexOne',[],[]);                                                                                                                 
Inserted record 'V#6:0{label:vertexOne,in:[0],out:[0]} v0' in 0.001000 sec(s).
orientdb> INSERT INTO V (label,in,out) VALUES ('vertexTwo',[],[]);
Inserted record 'V#6:1{label:vertexTwo,in:[0],out:[0]} v0' in 0.000000 sec(s). 
```

有没有办法通过只知道它们的“标签”而不是它们的“RID”来在这两个顶点之间创建一条边？

例如（不起作用）：

```
orientdb> INSERT INTO E (label, in, out) VALUES ('is_connected_to', (SELECT @rid FROM V WHERE label = 'vertexOne'), (SELECT @rid FROM V WHERE label = 'vertexTwo'));
Inserted record 'E#7:0{label:is_connected_to,in:null,out:null} v0' in 0.001000 sec(s). 
```

我已经尝试将“FLATTEN”作为一种潜在的解决方法。没运气：

```
orientdb> INSERT INTO E (label, in, out) VALUES ('is_connected_to', (SELECT FLATTEN(@rid) FROM V WHERE label = 'vertexOne'), (SELECT FLATTEN(@rid) FROM V WHERE label = 'vertexTwo'));
Inserted record 'E#7:1{label:is_connected_to,in:null,out:null} v0' in 0.001000 sec(s). 
```

创建的边在`null`和之间`null`。没有骰子。

我希望为此使用 OrientDB SQL，因为我有大量的连接导入并且 SQL 方法似乎更快。

但是，如果这是不可能的，关于批量导入边缘（大约 2M）的替代方案有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-02T13:42:39.490

[SQLCreateEdge](http://code.google.com/p/orient/wiki/SQLCreateEdge)可能是你想要做的：

```
create edge from
(select from V where label = 'vertexOne')
to
(select from V where label = 'vertexTwo')
set label = 'is_connected_to' 
```

但是，对于非常大的连接导入，我建议[SQLCreateLink](http://code.google.com/p/orient/wiki/SQLCreateLink)。[此处](http://code.google.com/p/orient/wiki/ImportFromRDBMS)建议使用此宝石。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-14T23:38:08.490

批量边缘插入可以作为[SQL Bath](https://orientdb.com/docs/2.2/SQL-batch.html)

```
begin;
  CREATE EDGE E FROM #34:3349  TO #32:3349;
  CREATE EDGE E FROM #41:10971 TO #33:3348;
commit retry 100; 
```

# .net - 带有后台工作人员的进度条

> ID：10940102
> 
> 赞同：1
> 
> 时间：2012-06-07T21:23:35.457
> 
> 标签：.net, vb.net, vb.net-2010

我希望对我的背景工作者有所帮助，因为我无法让它工作。基本上我有一个执行一些任务的后台工作人员，但我正在尝试实现一个进度条和一个标签。我将进度条的最大值设置为 10，然后随着每个任务的移动而更新它，我也在考虑一个带有进度条的标签，它将显示进度，即

```
Pb value = 2
20% completed

Pb value = 6
60% completed 
```

等等。

到目前为止，我有这个用于编码。

更新*感谢您的帮助。

所以只是一个简单的问题，do work 事件会是这样吗？

```
Private Sub BGWorker_DoWork(ByVal sender As Object, _
                            ByVal e As DoWorkEventArgs) _
                            Handles BGWorker.DoWork
  For i as Integer = 1 to 2
    'My task code 1
    BGWorker.ReportProgress(i)
  Next

 For i as Integer = 3 to 4
    'My task code 2
    BGWorker.ReportProgress(i)
  Next

 For i as Integer = 5 to 6
    'My task code 3
    BGWorker.ReportProgress(i)
  Next

 For i as Integer = 7 to 8
    'My task code 4
    BGWorker.ReportProgress(i)
  Next

 For i as Integer = 9 to 10
    'My task code 5
    BGWorker.ReportProgress(i)
  Next
End Sub 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T23:12:34.263

与其尝试设置进度条值`DoWork`（不在 UI 线程上运行），不如让 BackGroundWorker “报告”它的进度：

```
Private Sub BGWorker_DoWork(ByVal sender As Object, _
                            ByVal e As DoWorkEventArgs) _
                            Handles BGWorker.DoWork
  For i as Integer = 1 to 10
    BGWorker.ReportProgress(i)
  Next
End Sub 
```

然后在您的`ProgressChanged`事件中，您可以设置进度条的值：

```
Private Sub BGWorker_ProgressChanged(ByVal sender As Object, _
                                     ByVal e As ProgressChangedEventArgs) _
                                     Handles BGWorker.ProgressChanged
  Me.Pb1.Value = e.ProgressPercentage
End Sub 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T21:43:57.953

你有几个问题：

1.  你的代码不会编译。
2.  您不会在`BackgroundWorker`任何地方创建。
3.  您尚未分配`ProgressChanged`事件处理程序。
4.  您根本不处理任何事件。

您必须执行所有这些操作才能使用`BackgroundWorker`. 一个很好的初学者教程位于[http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/cc221403%28v=vs.95%29.aspx)

# javascript - 如何使用 JavaScript 在 DOM 节点上查找事件侦听器

> ID：10940104
> 
> 赞同：22
> 
> 时间：2012-06-07T21:23:42.123
> 
> 标签：javascript

我仍然无法相信这是不可能的，但有没有办法循环遍历 dom 并查看使用“addEventListener”附加的所有事件处理程序。[这篇文章](https://stackoverflow.com/questions/446892/how-to-find-event-listeners-on-a-dom-node)和许多其他人说不。

如果是这样的话，那么像 Chrome 的检查器或 Firebug 这样的应用程序如何显示它们，它们会做什么？我猜他们可能会以某种方式增强 dom 的方法，以便他们可以跟踪绑定的内容。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-07-04T09:08:36.210

Chrome 的控制台有一个方法可以帮助您检查 dom 节点是否注册了任何事件监听器，例如检查附加到文档节点的事件监听器使用：

[https://developers.google.com/chrome-developer-tools/docs/commandline-api#geteventlistenersobject](https://developers.google.com/chrome-developer-tools/docs/commandline-api#geteventlistenersobject)

```
getEventListeners(document); 
```

您可以递归地遍历所有 dom 节点，并在需要时找到所有附加的事件处理程序。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-08T05:31:48.140

当然，浏览器内部有一个事件监听器列表，但它不会暴露给页面级 JavaScript。例如，Firebug（或[Eventbug](http://www.softwareishard.com/blog/category/eventbug/)）可能使用[nsIEventListenerInfo](https://developer.mozilla.org/en/XPCOM_Interface_Reference/nsIEventListenerInfo)。

话虽如此，这个旧答案仍然成立：
[如何在 DOM 节点上找到事件侦听器？](https://stackoverflow.com/a/447106/27862)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-30T17:53:16.310

在 Chrome v53 控制台上，我尝试过：

```
getEventListeners(document); 
```

返回：

```
__proto__: Object 
```

和子元素，不是我要找的。

所以我试过：

```
getEventListeners(window); 
```

返回

```
Object {beforeunload: Array[1], load: Array[1]} 
```

这就是我要找的。所以我认为正确的做法是：

```
getEventListeners(myDomElement): 
```

其中**myDomElement**是通过getElementById 等标准方法获得的目标**对象......**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-15T03:29:39.913

使用以下函数获取已注册事件的 json；

`getEventListeners(node_name);`where`node_name`可以是元素名称或其 id。

# iphone - 硬币对象不遵循功能集

> ID：10940105
> 
> 赞同：0
> 
> 时间：2012-06-07T21:23:45.297
> 
> 标签：iphone, objective-c, cocos2d-iphone

我有一个不遵循 randomPoint 方法的 NSMutableArray（命名为硬币）。当我进入 iOS 模拟器时，硬币没有出现（因为没有图像），它们停留在屏幕的中心，而不是随机分配的点。这就是制作新硬币的方法：

```
if ([coins count] == 0){

    CGSize windowSize = [CCDirector sharedDirector].winSize;
    CGPoint randomPointOnScreen = ccp((float)(arc4random() % 100) / 100 * windowSize.width, (float)(arc4random() % 100) / 100 * windowSize.height);

   randomCoinType = arc4random() % kNumberOfCoinTypes + 1; // I have this because my files are named like "coin.1.png" and such 
```

kNumberOfCoinTypes 被定义为 10 给我一个数字 1-10。这是应该制造硬币的相应空隙：

```
-(void)createCoinsAt:(CGPoint)position withCointype:(int)type{

NSString *imageFile;

switch (type) {

    case 1:

        imageFile = @"coin.1.png";
        break;

    case 2:
        imageFile = @"coin.2.png";
        break;

    case 9:
    case 3:
        imageFile = @"coin.3.png";
        break;

    case 7:
    case 8:
    default:
    case 4:
        imageFile = @"coin.4.png";
        break;

    case 5:
        imageFile = @"coin.5.png";
        break;

    case 6:
        imageFile = @"coin.6.png";
        break;

      }

Coins *c = [Coins spriteWithFile:imageFile];
//Coins *c = [Coins spriteWithFile:[NSString stringWithFormat:@"coin.%d.png", arc4random() % 5 + 1 ]];

c.type = type;
c.position = position;
c.velocity = ccp(0,0);
[coins addObject:c];
[self addChild:c z:2]; 
```

}

我在一个命令之后有多个案例，因为我不知道如何使一个数字比另一个数字出现得更频繁。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T16:21:45.560

您显示的代码一切正常。你的问题可能在你的`Coin`课堂上。

在课堂上检查的事项`Coin`：

*   设置`velocity`为 {0,0} 是否会无意中更改`position`？
*   `CCSprite`你重写了哪些方法？确保调用`super`这些方法。

其他要尝试的事情：

*   您可以仅使用该类`coin.1.png`在随机点显眼地出现吗？`CCSprite`如果不...
    *   确保将物理`coin.1.png`文件正确添加到您的项目中。
    *   检查父对象：它们是否被标记为不可见？他们被添加到场景中了吗？

* * *

更新：避免子类化 CCSprite

```
@interface Coin : NSObject 

@property (nonatomic, retain) CCSprite *sprite;
@property (nonatomic, assign) CGPoint velocity; 
@property (nonatomic, assign) int type;
@end 
```

--

```
-(void)createCoinAt:(CGPoint)position withCointype:(int)type{

    NSString *imageFile;
    ...
    //imageFile switch statement here
    ...
    Coin *c = [[Coin alloc] init];

    c.sprite = [CCSprite spriteWithFile:imageFile];
    c.sprite.position = position;
    c.type = type;
    c.velocity = ccp(0,0);
    [coins addObject:c];
    [parentNode addChild:c.sprite z:2]; //make sure to add to correct parent CCNode
} 
```

-- 一旦给硬币一个速度：

```
//duration assumes velocity is pixels-per-second
CCAction *moveSprite = [CCRepeatForever actionWithAction:[CCMoveBy actionWithDuration:1.0 position:c.velocity]];
[c.sprite runAction:moveSprite]; 
```

一旦硬币消失/死亡/无论如何：

```
[c.sprite stopAllActions];
[c.sprite removeFromParentAndCleanup:YES];
c.sprite = nil;
[coins removeObject:c]; 
```

# javascript - 示例 ?

> ID：10940107
> 
> 赞同：0
> 
> 时间：2012-06-07T21:23:49.393
> 
> 标签：javascript, html, iframe

任何工作示例

`<iframe src= "view-source:http://www.abc.com"></iframe>`

视图源的主要用例是什么？是否有任何网站正在使用或利用视图源功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:33:09.923

`view-source:`在所有浏览器中都不相同。我认为只有 Chrome 使用它。

您可以使用代理来执行此操作。在您的服务器上，制作一个获取网站然后将其输出为文本的脚本。

PHP 示例：

```
<?php
    header('Content-type: text/plain');
    $url = $_GET['url'];
    echo file_get_contents($url);
?> 
```

然后你可以这样做：

```
<iframe src="http://mysite.com/path/to/proxy.php?url=http://www.abc.com"></iframe> 
```

# android - 防止应用长时间运行后重启

> ID：10940111
> 
> 赞同：0
> 
> 时间：2012-06-07T21:24:10.677
> 
> 标签：android

我正在编写一个程序，该程序在后台连续记录音频，并将用该数据不断填充缓冲区，以便对其执行处理。

所以这部分程序有效；即使设备处于睡眠模式，该应用程序也会在后台运行。但是，经过一段时间（可能是 1 或 2 小时？）后，应用程序将突然停止运行，甚至可能重新启动。

使用 AsyncTask 的扩展来执行连续的音频录制和处理。有没有办法让这个程序无限期地运行，它的程序是什么？它无限期地运行直到一个点；除非用户请求，否则我不希望它关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T23:50:55.467

乌尔克。请不要使用 AsyncTask！相反，请使用 IntentService，它在后台的单独线程上运行。在正常情况下不应将其关闭，即使设备处于睡眠状态也是如此。基本上，只要它的主要方法 onHandleIntent() 正在运行，它就会运行，并且会一直运行到它完成所有语句为止。

# asterisk - 星号发起响应说成功排队但仅此而已

> ID：10940113
> 
> 赞同：2
> 
> 时间：2012-06-07T21:24:35.687
> 
> 标签：asterisk

我曾经使用预先配置的星号来拨打电话（使用 AMI）。当我这样做时，来自 origin 的响应曾经有通道和唯一的 id 信息。现在我正在尝试构建一个新的 Asterisk。一切都已设置，但是当我调用时，只有响应具有的信息是“呼叫成功排队”。

是否有隐藏在某处的“显示响应的额外信息”之类的选项？

你可以找到我得到的两种不同的回应。

这个是旧的，包含一些有价值的信息。

```
Response: Success
ActionID: 6bf11dfb-4e6c-4eb4-85cd-6c8b8026019f
Message: Originate successfully queued

Event: Newchannel
Privilege: call,all
Channel: SIP/1030-000058aa
State: Down
CallerIDNum: &lt;unknown&gt;
CallerIDName: &lt;unknown&gt;
Uniqueid: 1339103821.22750

Event: Newcallerid
Privilege: call,all
Channel: SIP/1030-000058aa
CallerID: 05359348602
CallerIDName: &lt;Unknown&gt;
Uniqueid: 1339103821.22750
CID-CallingPres: 0 (Presentation Allowed, Not Screened)

Event: ExtensionStatus
Privilege: call,all
Exten: 1030
Context: ext-local
Status: 8

Event: Newstate
Privilege: call,all
Channel: SIP/1030-000058aa
State: Ringing
CallerID: 05359348602
CallerIDName: &lt;unknown&gt;
Uniqueid: 1339103821.22750

Event: Newstate
Privilege: call,all
Channel: SIP/1030-000058aa
State: Up
CallerID: 05359348602
CallerIDName: &lt;unknown&gt;
Uniqueid: 1339103821.22750

Event: ExtensionStatus
Privilege: call,all
Exten: 1030
Context: ext-local
Status: 1 
```

这是新的，什么也没说

```
Response: Success
ActionID: 98518f9a-c7cb-4b63-8de4-e185f57508d8
Message: Originate successfully queued 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T00:55:09.840

您没有提供有关您发送的实际操作（其参数）的太多信息，但我会采取（长？）拍摄。我认为您可能正在发送异步发起操作，但您确实想要同步行为。

“异步发起操作”意味着星号将接受命令，但将异步调用，然后通过稍后到达的*事件*通知您它是否成功。

因此，就您而言，星号只是让您知道命令已到达，并且*最终*将发出呼叫。在这种情况下，您应该侦听具有发起调用的操作的 actionid 的传入事件，并在那时做出反应。

但是，如果您想以同步方式了解呼叫是否真的被应答（即：获取星号以在呼叫具有拨号状态之前不响应您的操作），请尝试将发起操作的异步参数设置为 false。

请参阅：[https](https://wiki.asterisk.org/wiki/display/AST/ManagerAction_Originate) ://wiki.asterisk.org/wiki/display/AST/ManagerAction_Originate 。请注意“异步”参数，这就是您要寻找的。

这也在这里描述：[http ://www.voip-info.org/wiki/view/Asterisk+Manager+API+Action+Originate](http://www.voip-info.org/wiki/view/Asterisk+Manager+API+Action+Originate)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-27T08:48:27.323

我在使用 Async: true 时遇到了关于没有接收到 OriginateResponse 的相同问题，问题原来是经理用户帐户的权限。

AMI 用户帐户需要具有写入权限“all”或写入权限“call”（originate 不够）。像这样的东西：

```
[username]
secret=hello
deny=0.0.0.0/0.0.0.0
permit=127.0.0.1/255.255.255.0
read=orignate,call
write=originate,command,system,call 
```

# php - php5：将一个查询中的列馈送到另一个查询并显示输出

> ID：10940115
> 
> 赞同：-1
> 
> 时间：2012-06-07T21:24:38.247
> 
> 标签：php, sql

我正在尝试编写连接到两个不同数据库的 PHP 代码。

在第一个数据库上，我运行查询并获得一列（例如列输出：1,2,3,4,5），现在我需要将 1,2,3,4,5 输入到第二个 SQL 查询中像这样的声明：

```
select key from table where foo = '1','2','3','4','5' 
```

如何在 PHP 中完成？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:42:08.907

仅使用 SQL 代码，您就可以做到这一点

```
SELECT * FROM `table_1` WHERE `foo` IN (SELECT `bar` from `table_2`) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:31:30.827

看起来您正在寻找[MySQL IN 子句](http://www.tutorialspoint.com/mysql/mysql-in-clause.htm)

这与 PHP 没有任何关系，或者我真的不明白你的意思。反正：

```
$query1 = $db->query("SELECT values FROM table");
$results = $db->fetchResults();

$query2 = $db2->query("SELECT x FROM foo WHERE y IN (".implode(',', $results).")");
$results = $db2->fetchResults(); 
```

这些伪代码行（未经验证）应该可以帮助您入门。

# java - 如何修复 RadioButton 的宽度，因此小部件不会依赖于文本大小

> ID：10940118
> 
> 赞同：1
> 
> 时间：2012-06-07T21:24:49.433
> 
> 标签：java, android

我有一个水平 RadioGroup 和 RadioButtons

```
<RadioGroup xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:checkedButton="@+id/tab_messages"
            android:background="@drawable/bg_tabbar"

            android:layout_marginBottom="6dp"
            android:layout_marginTop="6dp"
        >

    <RadioButton
            android:id="@+id/tab_messages"
            style="@style/Tab"
            android:text="long long long text"
            />
    <RadioButton
            android:id="@+id/tab_contacts"
            style="@style/Tab"
            android:text="shorter"

            />
    <RadioButton
            android:id="@+id/tab_search"
            style="@style/Tab"
            android:text="short short"
            />
    <RadioButton
            android:id="@+id/tab_settings"
            style="@style/Tab"
            android:text=";("

            />

</RadioGroup>

<style name="Tab" >
        <item name="android:layout_width">wrap_content</item>
        <item name="android:layout_height">wrap_content</item>
        <item name="android:padding">3dp</item>
        <item name="android:layout_margin">1dp</item>
        <item name="android:gravity">center</item>
        <item name="android:textColor">#ffffff</item>
        <item name="android:drawablePadding">-6dp</item>
        <item name="android:textSize">12dp</item>
        <item name="android:button">@android:color/transparent</item>
        <item name="android:drawableTop">@android:drawable/btn_radio</item>
    </style> 
```

我得到了这个（截图）：[http ://c.kurganec.ru/p/jv8Ppzq.png](http://c.kurganec.ru/p/jv8Ppzq.png)

似乎 layout_weight 参数不像我预期的那样工作。我希望标签的大小相同（显示宽度的 1/4） 可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T22:05:00.270

试试这个

```
<RadioGroup xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:checkedButton="@+id/tab_messages"
            android:layout_marginBottom="6dp"
            android:layout_marginTop="6dp"
            >
    <RadioButton
            android:id="@+id/tab_messages"
            style="@style/Tab"
            android:layout_weight="1" android:text="long long long text" android:layout_width="1dip"/>
    <RadioButton
            android:id="@+id/tab_contacts"
            style="@style/Tab"
            android:text="shorter"
            android:layout_weight="1" android:layout_width="1dip"/>
    <RadioButton
            android:id="@+id/tab_search"
            style="@style/Tab"
            android:text="short short"
            android:layout_weight="1" android:layout_width="1dip"/>
    <RadioButton
            android:id="@+id/tab_settings"
            style="@style/Tab"
            android:text=";("
            android:layout_weight="1" android:layout_width="1dip"/>
</RadioGroup> 
```

# javascript - 为什么 Pinterest 代码会更改浏览器中显示的页面（URL）？

> ID：10940124
> 
> 赞同：1
> 
> 时间：2012-06-07T21:25:41.537
> 
> 标签：javascript, pinterest

所以我花了很长时间试图找到一个 Pinterest Pin It 按钮，它有一个计数器，当我点击它时，我可以从页面中选择任何图像。

Pinterest 提供的 Pinterest 代码要求您指定要共享的特定图像，但它有一个计数。

Pinterest 浏览器按钮可以在页面上使用，并会弹出一个 javascript 窗口，允许用户在页面上选择任何合适的图像，但它没有计数。

我一直在玩耍和寻找，并且非常接近。我有这段代码，这是我自己的一些代码，还有一些我在其他网站上找到的代码：

```
<a class='pin-it-button' count-layout='horizontal' href='http://pinterest.com/pin/create/button/?url={Encoded URL of Current Page}'>Pin It</a>
<a href='javascript:void(run_pinmarklet())' style='margin-left:-93px; width:43px; height:20px; display:inline-block;'/></a>
<script src='http://assets.pinterest.com/js/pinit.js' type='text/javascript'/>
<script type='text/javascript'>
function run_pinmarklet() {
var e=document.createElement('script');
e.setAttribute('type','text/javascript');
e.setAttribute('charset','UTF-8');
e.setAttribute('src','http://assets.pinterest.com/js/pinmarklet.js?r=' + Math.random()*99999999);
document.body.appendChild(e);
}
</script> 
```

这样做基本上是通过使用计数按钮来作弊，然后将允许用户选择图像和元素的代码直接放在原始按钮的顶部。用户认为他正在单击 Pin It 按钮，但正在单击运行 javascript run_pinkarklet() 的按钮。

这可行，但是在我获得弹出窗口以选择图像并且我确实选择了图像之后，它然后被插入到弹出窗口中以完成固定，这可行-但同时在主页浏览器重新加载。它不会重新加载原始页面，但会重新加载当前文件夹的主 URL。

示例-假设我要固定的页面是： [http ://www.example.com/folder1/page1.php](http://www.example.com/folder1/page1.php)

它重新加载到 - [http://www.example.com/folder1/](http://www.example.com/folder1/)

我找不到任何方法来停止重新加载或让它至少重新加载源页面。

我已经在最新的 Chrome 和 Firefox 上确认了这种行为。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-09T16:44:22.790

[Pinterest 的小部件构建器](http://business.pinterest.com/en/widget-builder#do_pin_it_button)现在支持任何图像选项。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-31T12:21:19.190

在 onclick 事件中将 URL 值设置为 cookie 变量。您可以访问 cookie 值，使用 cookie 值并重定向页面。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-16T07:56:06.980

javascript:void((function(){var%20e=document.createElement('script');e.setAttribute('type','text/javascript');e.setAttribute('charset','UTF-8' );e.setAttribute('src','http://assets.pinterest.com/js/pinmarklet.js?r='+Math.random()*99999999);document.body.appendChild(e)}) ());

# apache-cayenne - 使用反向工程对象时 Apache Cayenne 中的 NoSuchFieldException

> ID：10940129
> 
> 赞同：0
> 
> 时间：2012-06-07T21:25:57.193
> 
> 标签：apache-cayenne

从远程客户端查询选择到 apache cayenne 服务器时，我遇到以下问题。

出于测试目的，我只从一张表中生成了一个独立的类。我生成了客户端类（超类和子类）和服务器类。我启动了服务器，如 cayenne 教程中所示。日志告诉我一切都很好。现在我尝试与客户端连接，如 cayenne 教程中所示：

```
 ClientConnection connection = new HessianConnection(
            "http://localhost:8080/hdlist_cayeene_javafx/cayenne-service");
    DataChannel channel = new ClientChannel(connection);
    ObjectContext context = new CayenneContext(channel);

    SelectQuery select = new SelectQuery(Source.class);
    List<Source> sources= context.performQuery(select);
    System.out.println(sources); 
```

说到这条线：

```
 List<Source> sources= context.performQuery(select); 
```

然后我得到一个像这样的异常： java.lang.NoSuchFieldException: id at java.lang.Class.getDeclaredField(Class.java:1899) at org.apache.cayenne.reflect.FieldAccessor.lookupFieldInHierarchy(FieldAccessor.java:156) at org.apache.cayenne.reflect.FieldAccessor.lookupFieldInHierarchy(FieldAccessor.java:165) at org.apache.cayenne.reflect.FieldAccessor.prepareField(FieldAccessor.java:103) at org.apache.cayenne.reflect.FieldAccessor.(FieldAccessor .java:49) 在 org.apache.cayenne.reflect.PersistentDescriptorFactory.createAccessor(PersistentDescriptorFactory.java:355) 在 org.apache.cayenne.reflect.PersistentDescriptorFactory.createAttributeProperty(PersistentDescriptorFactory.java:147)

关于它的疯狂之处在于，当我清空“源”表时，一切正常，我毫无例外地得到一个空列表。

我也不清楚我可以查询我的类集中的所有 10 个对象，并且异常总是命中所选类的第一个属性。如果我研究这些课程，那么该领域就在那里。它们位于 cayenne 建模器生成的抽象类中，并且具有异常给出的确切名称。

这是客户端上的源类：

```
public abstract class _Source extends PersistentObject {

public static final String ID_PROPERTY = "id";
public static final String NAME_PROPERTY = "name";

protected Long id;
protected String name;

public Long getId() {
    if(objectContext != null) {
        objectContext.prepareForAccess(this, "id", false);
    }

    return id;
}
public void setId(Long id) {
    if(objectContext != null) {
        objectContext.prepareForAccess(this, "id", false);
    }

    Object oldValue = this.id;
    this.id = id;

    // notify objectContext about simple property change
    if(objectContext != null) {
        objectContext.propertyChanged(this, "id", oldValue, id);
    }
}

public String getName() {
    if(objectContext != null) {
        objectContext.prepareForAccess(this, "name", false);
    }

    return name;
}
public void setName(String name) {
    if(objectContext != null) {
        objectContext.prepareForAccess(this, "name", false);
    }

    Object oldValue = this.name;
    this.name = name;

    // notify objectContext about simple property change
    if(objectContext != null) {
        objectContext.propertyChanged(this, "name", oldValue, name);
    }
} 
```

}

这是相应的服务器类：

```
public abstract class _Source extends CayenneDataObject {

public static final String ID_PROPERTY = "id";
public static final String NAME_PROPERTY = "name";

public static final String ID_PK_COLUMN = "ID";

public void setId(Long id) {
    writeProperty("id", id);
}
public Long getId() {
    return (Long)readProperty("id");
}

public void setName(String name) {
    writeProperty("name", name);
}
public String getName() {
    return (String)readProperty("name");
} 
```

}

我在 Jetty WebServer 上使用 Cayenne Server 和 Client 3.0RC3，如 cayenne 教程中所示。

有谁知道为什么会发生这种异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T08:15:57.430

客户端查询中使用的“Source”类是否真的是服务器版本，而不是客户端？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-13T07:59:09.207

否决票

所以我自己发现了：此错误的最常见原因是您忘记向服务器提供客户端实体，如 cayenne 教程中所述：

[https://cwiki.apache.org/CAYDOC12/remote-object-persistence-tutorial-webservice.html](https://cwiki.apache.org/CAYDOC12/remote-object-persistence-tutorial-webservice.html)

```
"As of version 1.2, both client and server persistent classes need to be present on the server (client of course only needs client classes). This is a minor inconvenience that will be addressed in the future releases." 
```

因此，只需创建共享项目并在客户端和服务器项目中执行 maven 依赖项

祝你好运

# iphone - 将 UISlider 的值保存到数组不起作用

> ID：10940132
> 
> 赞同：0
> 
> 时间：2012-06-07T21:26:04.733
> 
> 标签：iphone, ios, nsarray, uislider

我实际上试图将用户设置保存在 plist 中，以便我可以从任何地方访问它们。但是当将 UISlider 值保存到我的数组时，我总是会收到消息

> 将“float”发送到不兼容类型“id”的参数；

数组看起来像这样：

```
NSArray *value = [[NSArray alloc] initWithObjects: [theGradeSlider value], [theBackgroundSound isOn], [theButtonSound isOn], nil]; 
```

我也尝试过使用 MSMutableArray 但这也不起作用....

* * *

另一种解决方案

我尝试使用 NSUserDefaults 知道它并且它有效。

保存设置（应插入 viewDidUnload 或 viewDidDiassappear）：

```
NSUserDefaults *settings = [[NSUserDefaults alloc] initWithUser:@"User"];

[settings setFloat:theGradeSlider.value forKey:@"theGradeSlider"];
[settings setBool:theBackgroundSound.on forKey:@"theBackgroundSound"];
[settings setBool:theButtonSound.on forKey:@"theButtonSound"];
[settings synchronize]; 
```

加载设置（应插入 viewDidLoad 或 ViewDidAppear）：

```
NSUserDefaults *settings = [[NSUserDefaults alloc] initWithUser:@"User"];

theGradeSlider.value = [settings floatForKey:@"theGradeSlider"];
theBackgroundSound.on = [settings boolForKey:@"theBackgroundSound"];
theButtonSound.on = [settings boolForKey:@"theButtonSound"]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T21:32:34.573

这里的问题是您放入数组的值不是对象。为了做到这一点（尽管我建议使用字典而不是数组），您需要`NSNumber`为每个创建对象。

```
NSNumber *sliderValueObj = [NSNumber numberWithFloat: [theGradeSlader value]];
NSNumber *backgroundSoundObj = [NSNumber numberWithBool: [theBackgroundSound isOn]];
NSNumber *buttonSoundObj = [NSNumber numberWithBool: [theButtonSound isOn]];

NSArray *value = [[NSArray alloc] initWithObjects: sliderValueObj,backgroundSoundObj,buttonSoundObj, nil]; 
```

或者

```
NSDictionary *dict = [[NSDictionary alloc] initWithObjectsAndKeys: sliderValueObj, @"slider",
                      backgroundSoundObj, @"backgroundSound",
                      buttonSoundObj, @"buttonSound",
                      nil]; 
```

为了更好的形式，使用内容作为键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:58:30.933

您应该使用`NSNumber`该类将值存储到数组中。特别是方法是`-numberWithFloat:`和`-numberWithBool`。

```
NSArray *value = [[NSArray alloc] 
         initWithObjects:[NSNumber numberWithFloat:[theGradeSlider value]], 
                         [NSNumber numberWithBool:[theBackgroundSound isOn]], 
                         [NSNumber numberWithBool:[theButtonSound isOn]], nil]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T21:55:10.940

这是真的，您不能将基元存储在数组中。您最好将它们保存`NSNumber`为`NSUserDefaults`. 这就是它的用途。

# macos - 如何从我的 Mac 使用 C# 进行开发？

> ID：10940134
> 
> 赞同：2
> 
> 时间：2012-06-07T21:26:19.633
> 
> 标签：macos, monodevelop

我有一台虚拟 Windows 7 机器，它位于工作服务器上的云中。我使用瘦客户端访问桌面，效果很好。当我在工作时，我不知道我的桌子下面没有一个巨大的桌面。

我还有一台 MacBook Pro。

我映射了我的 dev 文件夹并将其安装到我的 Mac 桌面。像 Monodevelop 这样的东西会打开我的 c# 解决方案吗？在我的 Windows 机器上，我可以右键单击要构建的解决方案，我可以在 Mac 上做类似的事情吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T21:55:18.837

我开发跨平台。对于 Mono，C# 是最普遍的语言之一。但是，如果您的目标应用程序仅是 Windows，我不建议您花时间在使其与 Mono 一起使用所涉及的复杂性上。

我使用 VMWare Fusion 并将 Windows 作为 VM 运行，并为其上的项目提供完整的工作解决方案 - 包括 Visual Studio 和 SQL Server。然后我根据需要在我的 OS X 和 Windows 桌面之间滑动。如果您的作品具有适用于 Windows 和开发软件的正确许可证，则此方法最有效。它可以通过未使用的 Windows 许可证和 VS 和 SQL Server 的免费版本以便宜的方式完成。

# javascript - regex.test V.S. string.match to know if a string matches a regular expression

> ID：10940137
> 
> 赞同：331
> 
> 时间：2012-06-07T21:26:25.027
> 
> 标签：javascript, regex, performance

Many times I'm using the string `match` function to know if a string matches a regular expression.

```
if(str.match(/{regex}/)) 
```

Is there any difference between this:

```
if (/{regex}/.test(str)) 
```

They seem to give the same result?

* * *

## 回答 #1

> 赞同：507
> 
> 时间：2012-06-07T21:26:26.090

## Basic Usage

First, let's see what each function does:

*regexObject*.**[test](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/RegExp/test)**( *String* )

> Executes the search for a match between a regular expression and a specified string. Returns *true* or *false*.

*string*.**[match](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/match)**( *RegExp* )

> Used to retrieve the matches when matching a string against a regular expression. Returns an array with the matches or `null` if there are none.

Since `null` evaluates to `false`,

```
if ( string.match(regex) ) {
  // There was a match.
} else {
  // No match.
} 
```

* * *

## Performance

Is there any difference regarding performance?

**Yes**. I found this short note in the [MDN site](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/match):

> If you need to know if a string matches a regular expression regexp, use regexp.test(string).

Is the difference significant?

The answer once more is **YES**! This [jsPerf](http://jsperf.com/test-vs-match-regex) I put together shows the difference is **~30% - ~60%** depending on the browser:

![test vs match | Performance Test](../Images/9da42a60d0ebc3d3e6dbaaaae055cf1a.png)

## Conclusion

Use `.test` if you want a faster boolean check. Use `.match` to retrieve all matches when using the `g` global flag.

* * *

## 回答 #2

> 赞同：158
> 
> 时间：2014-01-27T04:53:57.327

Don't forget to take into consideration the global flag in your regexp :

```
var reg = /abc/g;
!!'abcdefghi'.match(reg); // => true
!!'abcdefghi'.match(reg); // => true
reg.test('abcdefghi');    // => true
reg.test('abcdefghi');    // => false <= 
```

This is because Regexp keeps track of the lastIndex when a new match is found.

# javascript - Javascript/JQuery Datagrid 在数据表中显示/编辑/输入

> ID：10940141
> 
> 赞同：0
> 
> 时间：2012-06-07T21:26:33.617
> 
> 标签：javascript, jquery, arrays, json, datagrid

Javascript/JQuery Datagrid 在表格中显示/编辑/输入数据

我希望查看与 JS/JQuery 一起使用的最佳数据网格

我想将它与 JSON 和数组一起使用......

网格越亮越好（尺寸越小）

越紧凑越好（最好只导入 1 个 *.js 文件）

应该在行/列系统中显示数据并具有处理行和列的工具（获取/设置行/列/单元格中的数据，隐藏/显示行/列，高亮行/列/单元格/范围，选择行/ coll/cell/range，在行/col/cell/range 等中返回数组 os 数据）如果您知道网格应该具有的更多设施（在数据网格中或多或少是标准的），请评论...

免费使用或更好...开源！我一直在关注 JQueryGrid 的进展，但需要很长时间才能使用......

THX，泽

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-25T17:56:57.103

我不是 100% 得到你想要的，但也许看看这个开源 JavaScript 库：[EditableGrid](http://www.editablegrid.net/)它有你问的大部分内容......我猜

# php - php-regex 未编译

> ID：10940142
> 
> 赞同：1
> 
> 时间：2012-06-07T21:26:45.090
> 
> 标签：php, regex, preg-replace-callback

当我运行以下内容时：

```
$MATH_REGEX = '/(?=(?<!\\)\$).(.+?)(?<!\\)\$/';
preg_replace_callback($MATH_REGEX, function ($match) {
        $latex_code = $match[0];
        return lx($latex_code); //lx is defined elsewhere
    }, "Test string $a=b$ ."); 
```

我明白了：

```
$ php 测试.php
PHP 警告：preg_replace_callback(): Compilation failed: missing ) at offset 26 in /home/sbird/public_html/faith/lib/view.php on line 26

```

我的正则表达式有什么问题？

编辑：

```
$ php --版本
带有 Suhosin-Patch (cli) 的 PHP 5.3.2-1ubuntu4.15（构建时间：2012 年 5 月 4 日 00:38:52）
版权所有 (c) 1997-2009 PHP 集团
Zend Engine v2.3.0，版权所有 (c) 1998-2010 Zend Technologies

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:30:26.683

你正在逃避`(`：

```
/(?=(?<!\\)\$).(.+?)(?<!\\)\$/
                 here:  ^^^ 
```

传递的结果字符串`preg_replace_callback`如下所示：

```
php > $MATH_REGEX = '/(?=(?<!\\)\$).(.+?)(?<!\\)\$/';
php > echo $MATH_REGEX;
/(?=(?<!\)\$).(.+?)(?<!\)\$/
                       ^^ !!! 
```

# gwt - 如何在 eclipse helios 中安装 mavenGWT 插件

> ID：10940145
> 
> 赞同：-1
> 
> 时间：2012-06-07T21:26:54.623
> 
> 标签：gwt, maven

我有很多谷歌但找不到任何东西，我们如何在我们的 eclipse 中安装 mavenGwt 插件，我也设法下载这个 mavenGWt 插件，但是我怎样才能将它放入我的 eclipse 并将我的 archtype 定义为 mavengwt

或者是否有任何用于 mavenGwt 的 eclipse 插件，我可以从 Install-new software in eclipse 下载

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:40:07.503

除了 M2Eclipse（与任何 Maven 项目一起工作）和可能的 Eclipse 的 Google Plugin（添加与 GWT 相关的功能，无论您是否使用 Maven；并且还自动配置您的 Maven 项目）之外，您在 Eclipse 中不需要任何特殊的东西作为 Eclipse 中的 GWT 项目，如果它们依赖`com.google.gwt:gwt-user`并使用`org.codehaus.mojo:gwt-maven-plugin plugin`)。

# windows-8 - Blend for Visual Studio - 在设计模式下显示应用栏

> ID：10940149
> 
> 赞同：2
> 
> 时间：2012-06-07T21:27:07.160
> 
> 标签：windows-8, windows-runtime, blend, winjs, appbar

使用 Blend for Visual Studio 2012 RC 时，如何在设计模式下查看**应用栏？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T21:46:22.993

默认情况下，对于**Split App**，您必须取消对默认注释掉的 AppBar 的注释。

改变这个：

```
<!-- <div id="appbar" data-win-control="WinJS.UI.AppBar">
        <button data-win-control="WinJS.UI.AppBarCommand" data-win-options="{id:'cmd', label:'Command', icon:'placeholder'}"></button>
  </div> --> 
```

对此：

```
 <div id="appbar" data-win-control="WinJS.UI.AppBar">
        <button data-win-control="WinJS.UI.AppBarCommand" data-win-options="{id:'cmd', label:'Command', icon:'placeholder'}"></button>
  </div> 
```

然后右键单击**Live DOM 窗格**`appbar`中的并选择**Activate AppBar**。

 ****[感谢 Matt Hidinger](http://www.matthidinger.com/)分享这个有用的技巧。****

# cassandra - 为什么我不能将此复合列名称作为字节插入 CQL blob？

> ID：10940158
> 
> 赞同：2
> 
> 时间：2012-06-07T21:27:27.267
> 
> 标签：cassandra, cql, pelops

我有一个 CQL 3 CF

```
CREATE TABLE entries (
  id text,
  va text,
  ts bigint,
  idxc blob,
  PRIMARY KEY (id, va, ts)
); 
```

有了 pelops，我得到一个 Bytes( [0, 4, 0, 0, 0, 4, 0, 0, 8, 0, 0, 1, 55, -56, -41, 6, 14, 0, 0, 16, 65, 50, 82, 97, 84, 85, 95, 82, 72, 71, 115, 69, 89, 115, 100, 49, 0, 0, 8, 0, 4, -63, - 24, -121, -16, 35, -80, 0, 0, 2, 105, 103, 0]) 这个例外：

```
org.scale7.cassandra.pelops.exceptions.InvalidRequestException: (String didn't validate.)[ks][entries][aKey:1339104364078000:idxc] failed validation
    at org.scale7.cassandra.pelops.exceptions.IExceptionTranslator$ExceptionTranslator.translate(IExceptionTranslator.java:47) 
```

我可以用同样的方法插入其他字节数组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T04:44:53.477

Pelops 可能还不支持 cql3 样式的复合主键。（实际上，列元数据应该只与复合列名称的最后一个组成部分匹配。）我建议与 Pelops 开发人员联系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T19:06:41.153

让我们结束这一点： 结论：CQL 3 仍处于测试阶段，不要指望它不会出现故障。

我现在使用旧式模式定义没有问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T14:08:57.387

我没有与 Pelops 合作过，所以这是在黑暗中拍摄，但请确认您正在向您的 mutator 传递一个 byte[] （我注意到您的 OP 中有一个大写 B），如果没有，请尝试转换为 byte [] 在通话中。如果您传递的内容没有方法签名，则它可能正在接受它的 toString() 版本并继续前进。

# c - 使用多个本地 ip 之一的 C DNS 查询

> ID：10940159
> 
> 赞同：-1
> 
> 时间：2012-06-07T21:27:31.407
> 
> 标签：c, linux, dns

我们的系统上有多个本地 IP。我们需要使用众多本地 IP 之一执行 DNS 查询（MX、NX 查找）。

我怎样才能做到这一点？例如，我找到了函数`res_init`and `res_send`，但他们不能这样做。有什么建议么？

据我[了解](https://stackoverflow.com/questions/10937511/c-socket-multiple-local-ips)，我需要使用该`bind`函数将套接字附加到本地 IP 之一。我必须使用`getaddrinfo`DNS 查找吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:50:31.197

要进行 DNS 查找，请使用`getaddrinfo`.

[这](http://linux.die.net/man/3/getaddrinfo)是手册页，[这](http://beej.us/guide/bgnet/output/html/singlepage/bgnet.html)是我使用的很棒的 UNIX/Linux/Winsock 编程指南。很棒的部分`getaddrinfo`，以及其他所有内容。

# qt - 使用 while 循环更新标签时，QT 表单按钮在 QT 表单上不起作用

> ID：10940160
> 
> 赞同：0
> 
> 时间：2012-06-07T21:28:01.447
> 
> 标签：qt, qt-creator

我在 QT 中创建了 GUI 应用程序。它有一些按钮和一个标签。该程序在一个while循环中顺序地从视频文件中获取图像，并通过刷新将它们显示在标签上。启动时，按钮工作正常，但是当我单击播放按钮并开始视频显示时，其他按钮无法单击，如果我坚持单击它们，程序没有响应并停止工作。即使我想了很多，我也无法弄清楚。我认为不需要代码来显示这个问题，但如果你要求，我可以发布它的相关部分

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T21:54:01.540

问题是当你的`while()`循环正在执行时，你永远不会将控制权返回给事件循环。事件循环调度排队的重绘事件等。您可能希望在计时器触发的插槽中一次执行一张图像，如下所示：

```
class Gui {
Q_OBJECT
...
protected slots:
  void openFile(const QString &);
  void nextImage();
protected:
  QTimer imageTimer;
};

void Gui::Gui(...)
{
   ...
   connect(imageTimer, SIGNAL(timeout()), SLOT(nextImage());
   ...
}

void Gui::openFile(const QString & fileName)
{
   const int imagePeriod = 1000/25; // [ms], set to 25 frames per second
   ...
   imageTimer.start(imagePeriod);
}

void Gui::nextImage()
{
   QImage p;
   // read image from the file onto the image
   ui.label->setPixmap(p);
   // no need to call update() on the label!
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:33:43.840

为什么要在标签上显示图像？

您可能需要一个线程来读取和循环播放视频。这样其他输入仍然可以处理，并且不会使您的应用程序崩溃。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T22:04:38.573

如果您使用的是 Repaint 方法，而不是使用 repaint 方法，您可以使用

```
 QCoreApplication::processEvents(); 
```

它必须解决你的问题。

# javascript - 带有 URL 链接且没有重复的旋转横幅

> ID：10940167
> 
> 赞同：2
> 
> 时间：2012-06-07T21:28:24.433
> 
> 标签：javascript, random, rotation, banner

不幸的是，我对 JS 的经验很少，所以请耐心等待：p

我正在尝试在网站上旋转横幅。我希望能够将横幅放在不同的位置，并且不显示重复。如果横幅在一个数组中也会很棒，因此添加更多的旋转会很简单。

这是我一直试图开始工作但收效甚微的代码。它已通过记事本保存到 rotate.js

```
script type="text/javascript">

link = new Array
image = new Array

link[1]="www.audio-philia.co.uk"
image[1]="www.hificornershop.co.uk/nodups/audiophilia.gif"

link[2]="www.emporiumhifi.com"
image[2]="www.hificornershop.co.uk/nodups/emporiumhifi.gif"

link[3]=""
image[3]=""

link[4]=""
image[4]=""

link[5]=""
image[5]=""

link[6]=""
image[6]=""

link[7]=""
image[7]=""

link[8]=""
image[8]=""

link[9]=""
image[9]=""

link[10]=""
image[10]=""

rnd = (Math.round((Math.random()*9)+1))

document.write('<a href="' + link[rnd] + '" target="_blank">'); 
document.write('<img src="' + image[rnd] + '" border="0"></a>');

value = array.splice(rnd,1)[0]; // remove the selected number from the array and get it in another variable

logosElement.innerHTML += (value);
}

</script> 
```

然后我会将以下内容复制到我希望显示横幅的区域#

`<img src='rotate.js?i=0'>image #1 <img src='rotate.js?i=1'>image #2 <img src='rotate.js?i=2'>image #3`

ETC

如果特定页面上每个横幅位置的“i”值不同，则不会有重复。我在 php 中有一个非常相似的脚本工作，我真的很想在 JS 中工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T21:43:35.290

你采取的方法对你没有帮助。我建议您在 HTML 源代码中用 div 替换您的 img 标签：

```
<div class="myImage" id="image1"></div>
<div class="myImage" id="image2"></div>
<div class="myImage" id="image3"></div> 
```

然后在您的 rotate.js 文件中，您可以执行以下操作：

```
window.onload = function() {
    //Find all images with class myImage
    var images = document.getElementsByClassName('myImage');
    var total  = images.length;

    //Looping through all the elements found
    for (var i = 0; i < total; i++) {
        //Retrieve array index from the id
        var index = images[i].id.subtring(4);
        //Add the html to the element
        images[i].innerHTML = '<a href="'+link[index]+'"><img src="'+image[index]+'" /></a>';
    }
} 
```

该类`myImage`用于轻松检索所有要处理的 div，id 用于了解要在 div 中显示的图像。

**对于数组：** 我建议您对横幅使用 Javascript 对象。Javascript 对象的定义如下：`{}`，它们具有如下示例中的属性：

```
var banners = array();

//Image and link are properties
//push is the function to add an element to an array without specifying the index
banners.push({image:your_url, link:your_url});
//The first banner can then be accessed 
banners[0];
//To access its image
banners[0].image;
//Or
banners[0]['image']; 
```

**例子**

旋转.js 文件

```
var banners = array(); //The first element pushed in the array is at the index 0
banners.push({link: 'www.audio-philia.co.uk', image: 'hificornershop.co.uk/nodups/audiophilia.gif', alt: 'My Image alt'}); 
//Repeat the push for every images

window.onload = function() {
//Find all images with class myImage
var images = document.getElementsByClassName('myImage');
var total  = images.length;

//Looping through all the elements found
for (var i = 0; i < total; i++) {
    if (banners.length == 0) {
          break;//No more banners can't display anymore            
    }
    //Retrieve a random banner 
    var rnd = Math.floor((Math.random()*banners.length));
    //Add the html to the element
    images[i].innerHTML = '<a href="'+banners[rnd].link+'"><img src="'+banners[rnd].image+'" alt="'+banners[rnd].alt+'" /></a>';
    banners.splice(rnd, 1);
} 
```

}​</p>

HTML

```
<div class="myImage"></div>
<div class="myImage"></div>
<div class="myImage"></div>
<!-- The script should be just before the end of the body tag if possible -->
<script type="text/javascript" src="www.hificornershop.co.uk/bannercode/rotate.js"></script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-09T13:19:34.317

你可以以此为基础

```
<script>
        var links = ["http://www.abc.com","http://www.def.com","http://www.ghi.com"];
        var images = ["http://www.abc.com/1.gif","http://www.def.com/2.gif","http://www.ghi.com/3gif"];
        var i = 0;
        var renew = setInterval(function(){
            if(links.length == i){
                i = 0;
            }
            else {
            document.getElementById("bannerImage").src = images[i]; 
            document.getElementById("bannerLink").href = links[i]; 
            i++;

        }
        },10000);
        </script>

<a id="bannerLink" href="http://www.abc.com" onclick="void window.open(this.href); return false;">
<img id="bannerImage" src="http://www.abc.com/1.gif" width="694" height="83" alt="some text">
</a> 
```

# android - 异常更新游戏到 cocos2d-x v2.0

> ID：10940170
> 
> 赞同：3
> 
> 时间：2012-06-07T21:29:03.173
> 
> 标签：android, java-native-interface, shared-libraries, cocos2d-x

我正在研究linux + eclipse。

我已经按照 wiki 提供的步骤更新了我的代码。

1º我创建了一个新的eclipse项目。2º 我运行 hello world 并且它有效。3º 我将旧代码放在类和资源上。4º 我用新文件更新了 appdelegate.cpp .h 和 jni/Android.mk。5º它编译正确。

6º 从 Eclipse 发射我得到以下异常：

```
试图加载 lib /data/data/org.piero.game/lib/libgame.so
致命信号 11.

```

出了点问题，但我不知道发生了什么。

相同的代码适用于 xcode 项目。
我没有得到 CCLOG 消息 con Appdelegate 构造函数，也没有在 main.cpp 上的 Java_org_cocos2dx_lib_Cocos2dxRenderer_nativeInit 上。

日志猫：

```
---- 日志测试运行 HELLO WORLD ------
06-13 18:29:07.189: D/dalvikvm(11613): 试图加载 lib /data/data/piero.corporation.nyan/lib/libgame.so 0x40f87190
06-13 18:29:07.199: D/dalvikvm(11613): 添加共享库 /data/data/piero.corporation.nyan/lib/libgame.so 0x40f87190
06-13 18:29:07.269：W/apk 路径（11613）：/data/app/piero.corporation.nyan-2.apk
06-13 18:29:07.409：D/SurfaceView（11613）：pckname = pipero.corporation.nyan
06-13 18:29:07.809: D/libEGL(11613): 加载 /system/lib/egl/libGLES_android.so
06-13 18:29:07.859: D/libEGL(11613): 加载 /system/lib/egl/libEGL_mali.so
06-13 18:29:07.919: D/libEGL(11613): 加载 /system/lib/egl/libGLESv1_CM_mali.so
06-13 18:29:07.929: D/libEGL(11613): 加载 /system/lib/egl/libGLESv2_mali.so
-  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - - 好的  -  -  -  -  -  - ------------------

---- LOG TEST RUNNING TEST 将 android 文件更改为我的 ------
06-13 18:36:31.789: D/dalvikvm(12046): 试图加载 lib /data/data/piero.corporation.nyan/lib/libgame.so 0x40f8de18
06-13 18:36:31.799: A/libc(12046): 致命信号 11 (SIGSEGV) 在 0x00000030 (code=1)
-  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  -  - - 失败  -  -  -  -  - ----------------

```

我尝试在另一台平板电脑（Android 3.2）中编译，我遇到了同样的问题。这次的日志是：

06-12 15:16:16.610：I/DEBUG：* * 06-12 15:16:16.610：I/DEBUG：构建指纹：'asus/WW_epad/TF101:3.2.1/HTK75/WW_epad-8.6.5.13- 20110925:user/release-keys' 06-12 15:16:16.610: I/DEBUG: pid: 1183, tid: 1183 >>> pipero.corp.test

所以，信号 11 SEGV_MAPERR，我认为这是编译的问题，找到了库，但程序无法正确加载它。JNI 不执行 jni_Onload。

有什么想法？？？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T20:09:01.923

在您的项目文件夹中，仔细检查 lib 文件是否实际上在您的 android libs 文件夹中。

[cocos2d-x root]/[game_name]/android/libs

里面应该有一个名为 libgame.so 的文件。

如果编译正常，应该会生成 .so 文件。编译时，我发现在 Eclipse 中“刷新”项目很有帮助，以便 Eclipse 重新扫描目录以查找任何新文件/修改以打包到 APK 文件中进行部署。

我相信您可以在 Eclipse 中启用一个选项来自动检测文件系统更改，但我不确定该选项在哪里。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T20:25:23.600

当你收到致命信号 11 时，也许你想看看[这个](http://www.bitwizard.nl/sig11/)。这是一个分段错误，访问未分配的内存位置，通常是由于编程错误。

祝你好运，但由于有些人对新版本没有问题，最有可能的情况是你有一个旧版本没有问题的编程错误。

# python - 使用python从文本中读取一列

> ID：10940173
> 
> 赞同：0
> 
> 时间：2012-06-07T21:29:32.050
> 
> 标签：python

```
EXPERIMENT : KSAS1201 SG CLIMAT CHANGE
DATA PATH : C:\DSSAT45\Sorghum\
TREATMENT 1 : N.American SGCER045

@     VARIABLE                              SIMULATED     MEASURED
  --------                                 -------     --------
  Panicle Initiation day (dap)                   62          -99
  Anthesis day (dap)                            115          -99
  Physiological maturity day (dap)              160          -99
  Yield at harvest maturity (kg [dm]/ha)       8478          -99
  Number at maturity (no/m2)                  32377          -99
  Unit wt at maturity (g [dm]/unit)           .0262          -99 
```

嗨，我有像上面这样的文本文件。如果可能的话，我想知道如何只读取列（比如下面模拟和测量的整个列），如果可能的话，我还想知道如何使用 python 在 Excel 文件中导入这些列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-04T21:17:15.820

将列读入列表的简单方法（假设标题始终为 6 行）：

```
simulated = []
measured = []

with open('input.file') as f:
    for l in f.readlines()[6:]:
        l = l.split()
        simulated.append(l[-2])
        measured.append(l[-1])

print simulated
print measured 
```

给出：

```
['62', '115', '160', '8478', '32377', '.0262']
['-99', '-99', '-99', '-99', '-99', '-99'] 
```

请注意，列表仍然包含数字的字符串表示形式。解析为数字：

```
simulated.append(float(l[-2]))
measured.append(int(l[-1])) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-04T21:27:20.747

Theodros 为阅读文件给出了很好的答案。要将其导入 excel，您可以将其保存为 csv（使用`csv`模块），也可以尝试使用`xlwt`模块（可从 PyPi 获得）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-04T22:42:08.650

```
from itertools import islice

with open('some.file') as fin:
    for line in islice(fin, 6, None):
        desc, simulated, measured = ' '.join(line.split()).rsplit(' ', 2)
        # do any necessary conversions 
```

然后查看`xlwt`/`csv`或 XML 或其他任何内容，以便可以将其读回其他内容...

# java - 我能否找到所有可能在 Groovy 代码块中抛出的（已检查）异常？

> ID：10940175
> 
> 赞同：4
> 
> 时间：2012-06-07T21:29:43.337
> 
> 标签：java, exception, groovy

我正在对一个 Groovy 应用程序进行维护，该应用程序的错误处理明显不合标准——`catch (Exception e) {}`到处都有无数的实例。我想实现更细粒度的异常处理，但为了做到这一点，我需要知道给定的处理程序块可以捕获哪些异常——并且由于 Groovy 不遵循 Java 的检查异常规则，这很重要。

如果我为这个应用程序提供了一个强大的测试平台，我会简单地删除所有处理程序，然后对其进行测试，直到我有一个全面的方法列表，它可能会失败——但不幸的是，这段代码是一个相当混乱的分布式应用程序的一部分，它主要存在于生产，并且依赖于定制硬件，因此为它创建一个测试平台比我目前拥有的资源要大得多。

所以，我想知道是否有任何快捷方式（甚至是具有正确魔法的特定 IDE），我可以通过它分析代码并获取给定语句可能抛出的所有可能异常的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:21:06.283

如果您可以假设所有实例`catch (Exception ex) {}`都放在那里，因为它们是从 Java 代码中移植的（当程序员懒得处理它们时）*并且*程序员从来没有打算让流程继续，您应该能够替换所有实例该代码与：

```
catch (Exception ex) {
  throw new RuntimeException(ex);
} 
```

如果不这样做，我不知道您将如何有效地更改代码库而不知道它应该如何工作（或者有测试知道它应该如何工作）。即使有一个工具可以枚举所有可能的已检查异常，您如何在不知道应用程序会以何种方式崩溃的情况下知道要处理哪些异常以及要重新抛出哪些异常？

# ms-access - 访问 odbc 调用失败

> ID：10940176
> 
> 赞同：1
> 
> 时间：2012-06-07T21:29:44.683
> 
> 标签：ms-access, odbc

我正在使用 Access 2003 和这条线

```
Set MySQLConn = wrkODBC.OpenConnection("ODBC;DSN=agcat;DESC=MySQL ODBC 3.51 Driver DSN;DATABASE=agcat;SERVER=agcat;UID=odbcuser;PASSWORD=xxxxxxxx;PORT=3306;OPTION=3;STMT=;") 
```

现在抛出错误（`odbc call failed`），我不知道为什么。任何代码都没有改变，这在以前一直有效。

今天发生的唯一不同是我从两个表中删除了记录。

谢谢！

# reporting-services - RDLC tablix colspan 等效

> ID：10940178
> 
> 赞同：5
> 
> 时间：2012-06-07T21:29:51.440
> 
> 标签：reporting-services, rdlc, ssrs-tablix

它们是 RDLC 标记的某种 colspan 等价物吗？我当然尝试了 colspan，然后报告没有在设计视图中呈现，反序列化错误。项目和 zipfile 比要显示的单列长得多。

![在此处输入图像描述](../Images/a09a9eebe5b6181db2f10e844cb53ebb.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-08T11:44:38.270

答案是选择所有单元格，右键单击并选择合并单元格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-03T01:35:26.920

要使用标记执行此操作，请尝试：

```
<TablixCell>
  <CellContents>
    <Rectangle Name="Rectangle1">
    ...
    </Rectangle>
    <ColSpan>2</ColSpan>
  </CellContents>
</TablixCell> 
```

# jquery - 渲染后更改 Fullcalendar 事件源

> ID：10940182
> 
> 赞同：10
> 
> 时间：2012-06-07T21:30:21.517
> 
> 标签：jquery, fullcalendar, fullcalendar-1

我一直在使用 FullCalendar v1.5.3 来替换 MS SharePoint。

我正在尝试重新呈现日历事件的源。例如，当页面默认加载时，这是 ajax 调用

> /日历/事件/feedTasks?start=1338094800&end=1341118800&_=1339103302326

我们使用选择框将事件源更改为仅显示任务（从不同的表中提取），因此在选择后，ajax 调用更改为：

> /日历/事件/feedEvents?start=1338094800&end=1341118800&_=1339103302326

这行得通。但是，它不仅会更改当前日历事件源，还会创建一个重复的日历表（`div class="fc-content" div`在当前表的基础上创建一个新表）。

这是我到目前为止所拥有的：

```
$("#TaskSelector").change(onSelectChange);   
    function onSelectChange(){
        $('#calendar').fullCalendar({
            events: '/calendar/events/' + $('#TaskSelector').val()
        });
    }
}); 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-08T00:09:49.040

有一些方法被调用`removeEventSource()`，`addEventSource()`允许您调整源列表。我有类似的情况，我需要在月视图中隐藏一个源，但在其他上下文中显示它，我发现在 eventSources 数组中删除和重新添加元素是实现此目的的最干净的方法。

```
 var fcSources = {
        courses: {
                    url: base+'accessfm/calendar/courses',
                    type: 'GET',
                    cache: true,
                    error: function() { alert('something broke with courses...'); },
                    color: 'purple',
                    textColor: 'white',
                    className: 'course'
                },
        requests: {
                    url: base+'accessfm/calendar/requests',
                    type: 'GET',
                    cache: true,
                    error: function() { alert('something broke with requests...'); },
                    textColor: 'white',
                    className: 'requests'
                },
        loads:  {
                    url: base+'accessfm/calendar/loads',
                    type: 'GET',
                    cache: true,
                    error: function() { alert('something broke with loads...'); },
                    color: 'blue',
                    textColor: 'white',
                    className: 'loads'
                }
    };
<snip>
    $('#fullcalendar').fullCalendar({
        header: {
                    left: 'title',
                    center: 'agendaDay,agendaWeek,month',
                    right: 'today prev,next'
                },
        defaultView: 'agendaWeek',
        firstDay: 1,
        theme: true,
        eventSources: [ fcSources.courses, fcSources.requests, fcSources.loads ],
        viewDisplay: function(view) {
            if (lastView != view.name){ // view has been changed, tweak settings
                if (view.name == 'month'){
                    $('#fullcalendar').fullCalendar( 'removeEventSource', fcSources.loads )
                                      .fullCalendar( 'refetchEvents' );;
                }
                if (view.name != 'month' && lastView == 'month'){
                    $('#fullcalendar').fullCalendar( 'addEventSource', fcSources.loads );
                }
            }
            lastView = view.name;
        }
    }); 
```

不要只是复制/粘贴此代码，因为它不能完全解决您的问题。但是你应该能够从中获得一些想法。调整`fcSources`散列以适合您的来源，然后仅使用其中一个来源实例化您的 fullCalendar 对象，并使用`removeEventSource`and`addEventSource`方法交换它。

还要注意使用`refetchEvents()`- 这是确保正确重新渲染显示所必需的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-02T14:22:03.707

谢谢你的例子:)

我无法使这个（在上面的代码中的事件数组）对我有用，但我想出了另一种使用您提供的代码添加事件源的方法。

这是我的逻辑：

我的主要事件来源是这个（这是来自 Fullcalendar 的默认示例的事件来源）：

```
events: function(start, end, callback) {
            $.ajax({
                type: 'POST',
                url: 'myurl',
                dataType:'xml',
                crossDomain: true,
                data: {
                    // our hypothetical feed requires UNIX timestamps
                    start: Math.round(start.getTime() / 1000),
                    end: Math.round(end.getTime() / 1000),                  
                    'acc':'2',                      
                },
                success: function(doc) {                            
                    var events = [];
                    var allday = null; //Workaround
                    var Editable = null; //Workaround  
                    $(doc).find('event').each(function() 
                    {                       
                        if($(this).attr('allDay') == "false") //Workaround 
                                allday = false; //Workaround 
                        if($(this).attr('allDay') == "true") //Workaround 
                                allday = true; //Workaround
                        if($(this).attr('editable') == "false") //Workaround 
                                Editable = false; //Workaround 
                        if($(this).attr('editable') == "true") //Workaround 
                                Editable = true; //Workaround                       

                        events.push({
                            id: $(this).attr('id'),
                            title: $(this).attr('title'),
                            start: $(this).attr('start'),
                            end: $(this).attr('end'),                       
                            allDay: allday,
                            editable: Editable
                        });                             
                    }); 

                    //calendar.fullCalendar( 'addEventSource', othersources.folgas );
                    //calendar.fullCalendar( 'addEventSource', othersources.ferias );       
                    //calendar.fullCalendar('refetchEvents');               
                    callback(events);
                }
            });     
        } 
```

现在我需要它来添加更多源并在日历之外执行此操作（在 fullcalendar 示例中的日期变量旁边）我创建了一个类似于上面代码的变量，但使用类似于我的主要的 ajax 调用：）

```
var othersources = {

   anothersource: {               
            events: function(start, end, callback) {
            $.ajax({
                type: 'POST',
                url: 'myurl',               
                data: {
                    // our hypothetical feed requires UNIX timestamps
                    start: Math.round(start.getTime() / 1000),
                    end: Math.round(end.getTime() / 1000),                  
                    'acc':'7',                      
                },          
                success: function(doc) {    

                    var events = [];
                    var allday = null; //Workaround
                    var Editable = null; //Workaround  
                    $(doc).find('event').each(function() 
                    {                       
                        if($(this).attr('allDay') == "false") //Workaround 
                                allday = false; //Workaround 
                        if($(this).attr('allDay') == "true") //Workaround 
                                allday = true; //Workaround
                        if($(this).attr('editable') == "false") //Workaround 
                                Editable = false; //Workaround 
                        if($(this).attr('editable') == "true") //Workaround 
                                Editable = true; //Workaround                       

                        events.push({
                            id: $(this).attr('id'),
                            title: $(this).attr('title'),
                            start: $(this).attr('start'),
                            end: $(this).attr('end'),                       
                            allDay: allday,
                            editable: Editable
                        });                             
                    });                         

                    callback(events); //notice this
                }
            });     

        },                
            cache: true,
            //error: function() { alert('something broke with courses...'); },
            color: 'green', //events color and stuff
            textColor: 'white',
            //className: 'course'
       }     
 } 
```

以下代码与上面类似，是日历属性的一部分（在日历变量中）：

```
 eventSources: [ othersources.anothersource ],           

viewDisplay: function(view) {    
        if (view.name == 'month'){
       // alert(view.name);
            //calendar.fullCalendar( 'addEventSource', othersources.folgas );
            calendar.fullCalendar( 'addEventSource', othersources.anothersource );
            //calendar.fullCalendar('refetchEvents'); //Notice i'm not doing the refetch events. And its working for me. but i'm calling thi elsewhere, every time i make an action. So you must figure it out ;)           
        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-07T02:00:27.083

这是一个老问题，但我遇到了类似的问题，RET 的回答真的很有帮助，基于我用一个重置的计数器修补了它，以确保它不会添加重复的事件源

```
 count = 0;
fcSources = [wholePlan, allActivities];

//calendar initialization {
viewRender: function(view) {

        if (view.name == 'agendaWeek' || view.name == 'month') {
            $('#fullcal').fullCalendar('removeEventSource', fcSources.allActivities);

            if (count > 0) {
                $('#fullcal').fullCalendar('addEventSource', fcSources.wholePlan);
            }

            count = 0;
        }

        if (view.name == 'agendaDay' && count == 0) {
            $('#fullcal').fullCalendar( 'addEventSource', fcSources.allActivities );
            $('#fullcal').fullCalendar('removeEventSource', fcSources.wholePlan);

            count += 1;
   }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-08-11T14:04:56.623

两天后我得到它，这是我的代码：

```
 $("#search").on("keypress", function(evt){
        if(evt.keyCode == 13) {
            var term = $(this).val();
            $.post(route_search, 
                            {
                                term: term,
                                async: false
                            },
                            function(data) {
                                var parsed = $.parseJSON(data);
                                $('#calendar').fullCalendar('removeEvents');
                                $('#calendar').fullCalendar( 'addEventSource', parsed );
                            }
            );               
        }
    }); 
```

有一个搜索输入，当用户按下回车键时，一个 ajax 帖子被发送到控制器，控制器返回一个数组 os json 值（事件）。（对不起我糟糕的英语）

# triggers - 我需要在applescript中设置两个自变量并检查它们是否都发生

> ID：10940184
> 
> 赞同：0
> 
> 时间：2012-06-07T21:30:39.283
> 
> 标签：triggers, controller, applescript

我正在使用一个名为“MidiPipe”的程序来使用 midi 控制器来触发我的 mac 上的操作。

基本上我需要发生的是当我同时按下我的midi控制器上的两个键时，我需要一个动作发生，但消息是分开进来的。我需要将一条消息设置为变量，然后将其设置为侧面检查是否有另一条消息进入，然后检查它们是否是正确的消息组合。如果是，我需要采取行动。这是我的 Alist 的图像，当我按下键 21 和 24 时，它基本上是我的 midi 控制器的输入。此外，这里是我目前拥有的代码，但它不起作用。

[http://pastebin.com/sD7vxVpg](http://pastebin.com/sD7vxVpg)

[http://i.imgur.com/EQTB7.png](http://i.imgur.com/EQTB7.png)

谢谢阅读

〜弗兰克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T14:20:04.280

它会是这样的：

```
property lastSecondItemis21 : false --item 2 of last message 

on runme(message)
    if (item 1 of message = 144) and (item 2 of message = 21) and (item 3 of message > 0) then
        set lastSecondItemis21 to true
    else if lastSecondItemis21 then
        set lastSecondItemis21 to false
        if (item 1 of message = 144) and (item 2 of message = 24) and (item 3 of message > 0) then
            --<do action>
        end if
    end if
end runme 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T14:21:15.400

这是给你的一个想法。我们将创建一个保持打开状态的 applescript 应用程序。此应用程序将一直运行。这个例子有 2 个可以使用的变量，key1 和 key2。每当我要求应用程序“运行”时，它会告诉我两个变量的状态......在这种情况下它们是否有值。

因此，要尝试这个示例，您需要做的第一件事就是将此代码保存为保持打开的应用程序。我将我的应用程序称为“stayOpenApp”。

```
property key1 : missing value
property key2 : missing value

on run
    if key1 is not missing value and key2 is not missing value then
        set theMessage to "Both keys have values."
    else if key1 is not missing value then
        set theMessage to "Only key 1 has a value."
    else if key2 is not missing value then
        set theMessage to "Only key 2 has a value."
    else
        set theMessage to "Neither key has a value."
    end if

    tell me to activate
    display dialog theMessage
end run

on quit
    -- reset the variables before quitting
    set key1 to missing value
    set key2 to missing value
    continue quit
end quit

on runMe()
    tell me to run
end runMe

on setKey1(theValue)
    set key1 to theValue
end setKey1

on getKey1()
    return key1
end getKey1

on setKey2(theValue)
    set key2 to theValue
end setKey2

on getKey2()
    return key2
end getKey2 
```

您会注意到它具有 2 个变量作为属性。脚本底部是每个变量的 getter 和 setter。这允许外部小程序获取变量的值或设置变量的值。要遵循此示例，请创建以下单独的 applescript 并运行它...

```
tell application "stayOpenApp" to launch 
```

该代码将让 stayOpenApp 启动。现在我们可以随时运行这段代码来让 stayOpenApp 告诉我们变量的状态......

```
tell application "stayOpenApp" to runMe() 
```

如果在某些时候我们想改变一个变量的状态，我们可以使用这个......

```
tell application "stayOpenApp" to setKey1(1) 
```

现在，如果您再次使用 runMe() 检查变量的状态，您会注意到变化。

因此，使用这些技术，您可以将信息传递给正在运行的 applescript 的变量并检查变量的状态。我希望这能给你一些关于如何解决你的问题的想法。祝你好运。

# python - 使用 python gdata.contacts.client 检索一个联系人

> ID：10940187
> 
> 赞同：1
> 
> 时间：2012-06-07T21:30:42.040
> 
> 标签：python, google-app-engine, google-api, gdata, google-contacts-api

我尝试检索联系人`gdata.contacts.client`：

授权：

```
class ModifyMe(webapp.RequestHandler):

    @login_required
    def get(self):
        """print contacts"""
        current_user = users.get_current_user()
        access_token_key = 'access_token_%s' % current_user.user_id()
        token = gdata.gauth.ae_load(access_token_key)
        gcontacts_client = gdata.contacts.client.ContactsClient(source = SETTINGS['APP_NAME'])
        gcontacts_client = token.authorize(gcontacts_client) 
```

根据API文档，我试过这个：

```
 contact = gcontacts_client.GetContact('https://www.google.com/m8/feeds/contacts/yohann%40mail.info/base/2e091c5e9b3d60b4') 
```

但我有这个错误：

```
Traceback (most recent call last):
  File "/base/data/home/apps/s~yoyocontacts/2.359462823193148133/main.py", line 246, in PrintContact
    contact = gd_client.GetContacts('https://www.google.com/m8/feeds/contacts/yohann%mail.info/base/2e091c5e9b3d60b4')
  File "/base/data/home/apps/s~yoyocontacts/2.359462823193148133/gdata/contacts/client.py", line 201, in get_contacts
    desired_class=desired_class, **kwargs)
  File "/base/data/home/apps/s~yoyocontacts/2.359462823193148133/gdata/client.py", line 640, in get_feed
    **kwargs)
  File "/base/data/home/apps/s~yoyocontacts/2.359462823193148133/gdata/client.py", line 319, in request
    RequestError)
RequestError: Server responded with: 400, 
```

好的，再试一次：

```
 contact = gcontacts_client.GetContact('www.google.com/m8/feeds/contacts/yohann%40mail.info/base/2e091c5e9b3d60b4') 
```

另一个错误：

```
Traceback (most recent call last):
  File "/base/data/home/apps/s~yoyocontacts/2.359462880270555204/main.py", line 246, in PrintContact
    contact = gd_client.GetContact('www.google.com/m8/feeds/contacts/yohann%40lepage.info/base/2e091c5e8b3760b4')
  File "/base/data/home/apps/s~yoyocontacts/2.359462880270555204/gdata/contacts/client.py", line 89, in get_contact
    desired_class=desired_class, **kwargs)
  File "/base/data/home/apps/s~yoyocontacts/2.359462880270555204/gdata/client.py", line 652, in get_entry
    desired_class=desired_class, **kwargs)
  File "/base/data/home/apps/s~yoyocontacts/2.359462880270555204/gdata/client.py", line 267, in request
    uri=uri, auth_token=auth_token, http_request=http_request, **kwargs)
  File "/base/data/home/apps/s~yoyocontacts/2.359462880270555204/atom/client.py", line 119, in request
    http_request.method, str(http_request.uri)))
MissingHost: No host provided in request GET https://Nonewww.google.com/m8/feeds/contacts/yohann%40mail.info/base/2e091c5e8b3760b4 
```

等一下 ！https://**无**www.google.com/m8/feeds/contacts/yohann%40mail.info/base/2e091c5e8b3760b4

如何解决这种行为？为什么https:// 和 uri 之间**没有 None ？**

PS：`feed_groups = gd_client.GetGroup(group_url)`像魅力一样工作......

PS : [Source file](https://raw.github.com/2xyo/google-contacts/master/main.py)源文件函数 ModifyMe

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:03:03.127

我认为您使用了错误的网址，正确的网址如下所示：

```
https://www.google.com/m8/feeds/contacts/<email>/base/<contactId> 
```

您请求联系的用户的电子邮件地址在哪里`<email>`（显然，您必须有权访问这些联系人）。此字段还可以采用值“默认”来替换当前已验证用户的电子邮件地址。

`contactId`是 API 返回的联系人标识符。我认为你做对了。

另外，确保协议是`https`和不是`http`。

# ruby-on-rails - rails中的令牌输入不起作用

> ID：10940189
> 
> 赞同：0
> 
> 时间：2012-06-07T21:31:16.070
> 
> 标签：ruby-on-rails, ruby-on-rails-3, jquery, jquery-tokeninput

我正在尝试在字段上运行 tokeninput 插件。

首先，本教程主要是围绕从另一个关联模型添加 id。我不想这样做，而只是使用我自己的模型（表）中的一个字段，称为`tags`.

目前，当我键入它时，它会执行 /notes/tags.json ajax 调用，但没有返回任何内容，我做得对吗？

控制器：

```
class NotesController < ApplicationController
  helper_method :sort_column, :sort_direction
  respond_to :html, :json

  def index
    @notes = Note.search(params[:search]).order(sort_column + " " + sort_direction).paginate(:per_page => 5, :page => params[:page])
    @tag = Note.where('tag LIKE ?', "%#{params[:q]}%")
  end 
```

模型：

```
class Note < ActiveRecord::Base
  attr_accessible :name, :tag

  def self.search(search)
    if search
      where('name LIKE ?', "%#{search}%")
    else
      scoped
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T06:45:31.050

好的：这是一个使用 jquery 自动完成的粗略但可行的示例

[https://github.com/glennmartinez/QaBase/pull/1](https://github.com/glennmartinez/QaBase/pull/1)

步骤如下：

*   创建响应 json 请求的路由（我劫持了 index 操作）
*   `data-autocomplete-source`在文本字段的属性中声明路径或数据本身，例如：`<%= f.text_area :my_token_field, 'data-autocomplete-source' => features_path`
*   创建附加到引用 ID 的字段的 javascript（检查 html 源代码）
*   提交表单并检查记录器中的 post-request-hash 并运行`before_save`您需要的任何转换以使字段工作。

使用 TOKENINPUT 并遵循[http://railscasts.com/episodes/258-token-fields](http://railscasts.com/episodes/258-token-fields) 并查看插件页面上的示例，它希望您的数据采用这种格式

```
[
  {"id":"856","name":"House"},
  {"id":"1035","name":"Desperate Housewives"},
  ...
] 
```

您可以通过引用 ID 中的不同内容来创建相同的哈希值 .. 例如

```
Notes.all.map { |n| {:id => n.tag, :name => n.name } }.to_json 
```

这将产生类似的东西：

```
[
  {"id":"tagname","name":"House"},
  {"id":"othertagname","name":"Desperate Housewives"},
  ...
] 
```

然后，您可以告诉响应字段按标签名称搜索表。

当然，您需要在这些上创建某种唯一性，以便仅管理返回 1 条记录。

我希望这有帮助。

# mysql - Mysql查询不起作用 - 按日期排序

> ID：10940191
> 
> 赞同：1
> 
> 时间：2012-06-07T21:31:25.883
> 
> 标签：mysql

我正在尝试从类型为 varchar(255) 的表 desc（格式 mm/dd/yyyy）中订购记录。

按日期排序

```
SELECT *, DATE_FORMAT(date,'%m/%d/%Y') AS reldate FROM table ORDER BY reldate DESC 
```

这不起作用。对于 date = 03/28/2009，reldate 返回为 NULL。我是 mysql 的初学者，所以我真的不知道如何解决这个问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:35:41.607

（我可能误解了您的问题。日期列是日期还是 varchar？我的回答是基于假设它是 varchar，这是我所理解的。）

我认为您所追求的功能是[STR_TO_DATE](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_str-to-date)，而不是 DATE_FORMAT。DATE_FORMAT 实际上与您想要的相反；它从日期变为字符串，而您试图从字符串变为日期。

更大的问题是，为什么这些数据首先在 VARCHAR 列中？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:36:22.157

您可能必须先转换`date`为`datetime`类型，然后才能在该函数中使用它。尝试：

```
SELECT *, DATE_FORMAT(CAST(`date` AS DATETIME),'%m/%d/%Y') AS reldate
FROM table ORDER BY reldate DESC 
```

我会像我一样`date`在查询中的字段周围放置反引号，以避免任何可能的保留字冲突。
正如其他人所提到的，这个字段首先应该是一个`datetime`列类型。

# entity-framework - POCO vs POCO Proxy vs STE - 哪个是我们现在做事方式最接近的匹配？

> ID：10940193
> 
> 赞同：0
> 
> 时间：2012-06-07T21:31:32.717
> 
> 标签：entity-framework

作为代码现代化计划的一部分，我试图找出一种方法来使用实体框架来增强（并最终替换）我们自己开发的 ORM。ORM 本身比上一步的直接 SQL 调用迈出了一大步，但现在其余的基础设施已经启动，我想开始逐步淘汰它。

为此，我试图弄清楚如何通过实体框架构建类，以便它们的行为类似于当前 ORM 的行为方式。理想情况下，在重新设计类时不需要任何代码更改，并且我们将获得诸如延迟加载和易于生成/更新类以匹配数据库的特性。

当前的 ORM 实际上是用于构建 SQL 语句的非常精美的包装器。 `Part p = new Part(12345);`将执行`select * from parts where partID = 12345`，然后取回它返回的 DataRow 并使用反射来填充对象上的字段。当它保存时，它做的事情几乎相同 - 它获取所有字段并使用它来更新数据行，然后将其写回数据库。通常，当我们期望它被编辑时，它也会锁定数据库中的行。有点笨拙，但它有效。

我试图找出一种方法来使用实体框架和模板以不需要持久数据上下文的方式自动生成我们的类。当前方法允许我们在需要的地方创建对象，根据需要传递它们，并且知道当它们更新时，数据库将更新以匹配该对象。我看过很多东西（根据标题），但我不知道我们可以使用哪种方法，以便在对象库之外不需要上下文。

有人可以指出我正确的方向吗？

* * *

**编辑：** 我可能要求太多，或者试图将一个方形钉子挤进一个圆孔。让我通过将其精简到最低限度来简化我正在寻找的内容。

有什么方法可以构造它，这样我就可以拥有一个在 a 之外有效的 CRUD 类型的对象`using (var context = new Context()) {}`，以便我可以将它传递给不相关的代码？我不在乎是否需要将它放回上下文中以加载/保存它，只要它在它之外工作。

如果使用 EF 无法做到这一点，那么该场景的正确设计模式是什么：一个表单打开另一个表单并传入一个 Invoice。第二种形式采用该 Invoice，引导用户为其输入付款，并生成一个新的 Payment 对象。第一种形式采用该 Payment 对象并基于它对 Invoice 进行进一步处理。然后，一切都立即提交到数据库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T07:56:39.463

POCO、带有代理的 POCO 或 STE 都不符合您的架构。所有这些实体类型的重点是使您的实体持久性无知，但您的实体实现持久性。最接近您的模型的是旧数据集。

EF 的中心点是上下文。如果你想保留你的架构，每个实体都必须处理自己的上下文。那是 EF 反模式。EF 希望您有上下文并使用上下文来获取和持久化实体 - 大多数 EF 功能都依赖于这种模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T19:46:04.917

如果您使用 POCO 并关闭上下文的代理生成（或者如果您在处理上下文之前分离它们），那么您的实体将在 using context 子句之外有效。

如果您的对象具有需要在 using 上下文子句之外有效的集合属性，则需要在查询中使用 include 或在离开 using 上下文子句之前填充其他查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T14:31:52.257

如果您真的想使用 EF 进行延迟加载，那么您当然需要创建 EF DbContext/Object Context。我想通过删除不相关的代码（例如持久性逻辑）将您当前的类转换为 POCO 类并不是什么大不了的事。我鼓励您通过一个服务层来抽象您的持久层，该服务层执行操作 EF 上下文的工作，例如，您的表单调用服务层，服务层创建上下文实例并持久化/检索数据。

# ruby-on-rails - Omniauth + Pow 问题

> ID：10940194
> 
> 赞同：1
> 
> 时间：2012-06-07T21:32:04.777
> 
> 标签：ruby-on-rails, facebook, ruby-on-rails-3, omniauth, rack-pow

我对[Pow](http://pow.cx/)和 Omniauth 有一个奇怪的问题。Omniauth（Facebook 登录）在使用 localhost:3000 时工作正常，但在使用 Pow（appname.dev）时，事情变得很可疑。

如果用户在数据库中不存在，则通过重定向并正确创建用户，因为它们应该存在。然而，在此之后，他们被重定向到 root_path 并且没有登录。他们的记录按预期保存在数据库中，但没有发生登录。同样，这只发生在 Pow（和 lvh.me）上，而不是 localhost。

有任何想法吗？

我正在使用[Devise/Omniauth](https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview)方法进行登录，控制器代码如下所示：

```
 def facebook

    @user = User.find_for_facebook_oauth(request.env["omniauth.auth"], current_user)

    if @user.persisted?
      flash[:notice] = I18n.t "devise.omniauth_callbacks.success", :kind => "Facebook"
      sign_in_and_redirect @user, :event => :authentication
    else
      session["devise.facebook_data"] = request.env["omniauth.auth"]
      redirect_to new_user_registration_url
    end
  end 
```

再次，用户被持久化，但在使用 POW 时不会出现 flash 通知或 sign_in。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T23:02:34.537

检查会话是否被设置为可能会阻止它（例如在您的情况下需要清除浏览器 cookie。）

# coldfusion - Coldfusion中带有2个破折号的评论与3个破折号之间的区别

> ID：10940195
> 
> 赞同：5
> 
> 时间：2012-06-07T21:32:09.613
> 
> 标签：coldfusion, comments

使用 3 而不是 2 破折号的评论有什么区别？

示例`<!--comment here-->`vs`<!---comment here--->`
如果破折号和文本之间有空格，人们是否会发现它更具可读性，例如
`<!-- comment here -->`

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-07T21:36:08.940

两个破折号表示一个 html 注释。html 注释*中的*内容包含在 CF 页面的输出中，即可以在 html 源代码中查看。

三个破折号表示 ColdFusion 注释。ColdFusion 编译器会忽略注释中包含的任何内容，并且*不*包含在 html 输出中。

# java - 如何在 OSGI 中使用 JSF 组件库

> ID：10940199
> 
> 赞同：4
> 
> 时间：2012-06-07T21:32:57.630
> 
> 标签：java, jsf, primefaces, osgi

我对使用 JSF 和组件库有一个非常具体的问题。

我测试了使用 Primefaces 构建 WAB（OSG-fied WAR）包。事实证明，在使用 OSGI 时集成 JSF 和 Primefaces 存在问题。

有几种方法可以集成 JSF 和 Primefaces，我想问一下如何实现：

1.  我可以将 Primefaces.jar 构建为 OSGI 包。我可以将 Java 方法导出为服务，但是我想我不能在单独的 OSGI 包中使用 xml 配置文件等。这是正确的还是我错了？

2.  是否可以使用集成的 Primefaces 组件制作 Mojarra 的自定义构建。如果我设法做到这一点，我可以简单地将修改后的 Mojarra 部署为 Glassfish 模块构建一个非常简单和高效的使用。如果有人设法做到这一点，你会分享一些关于它的信息吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-11T14:49:03.420

在 Glassfish 中部署`Primefaces.jar`为 OSGI 包。从 复制标签声明`primefaces-p.taglib.xml`。并查看本[教程](http://simonmartinelli.blogspot.com/2009/09/create-custom-jsf-facelet-component.html)如何创建自定义标签。我不确定，但您还需要将 JS、css 和图片复制/粘贴到您的捆绑包中。

# c# - 从另一个用户控件添加 TabItem

> ID：10940200
> 
> 赞同：0
> 
> 时间：2012-06-07T21:33:01.920
> 
> 标签：c#, wpf, class

我被困在一个非常基本的事情上。

外壳窗口上有两个用户控件。第一个基本上有一个功能区控件。第二个控件基本上有一个选项卡控件。

单击功能区上的按钮时，如何添加新的选项卡项？包括 Shell 在内的所有视图共享同一个命名空间。

在**Ribbon.xaml 中**

```
<UserControl x:Name="RibbonControl" ... > 
```

在**WorkSpace.xaml中**

```
<UserControl x:Name="WorkSpaceControl" ... > 
```

在**Shell.xaml 中**

```
<RibbonWindow  x:Name="ShellWindow" ... >
    ...
    <Views:RibbonRegion x:Name="RibbonControl" />
    <Views:WorkspaceRegion  x:Name="WorkSpaceControl" />
    ...
</RibbonWindow> 
```

在**Ribbon.xaml.cs 中**

```
namespace Application.Views
{
  public partial class RibbonControl: UserControl
   {

    private void Button_Click(object sender, RoutedEventArgs e)
    {

        //This throws the error that name is not available in current context.
        WorkSpaceControl.AddDataTab("Hede");   

        //This doesn't throw error. But I think because the tab control
        //has already initialized, it doesn't add the tab neither.
        TabRegion su = new TabRegion();
        su.AddDataTab("Hede");

    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T19:51:32.753

睡个好觉后，答案如下：

```
Shell MainFrm = (Shell)App.Current.MainWindow;
MainFrm.WorkSpaceControl.AddDataTab("Something"); 
```

# objective-c - 在 TabBar 控制的 iOS 应用程序的第二个选项卡中进行交互时，将 RemoteControlEvents 接收到第一个选项卡

> ID：10940201
> 
> 赞同：3
> 
> 时间：2012-06-07T21:33:04.230
> 
> 标签：objective-c, first-responder, resignfirstresponder, remote-control, avqueueplayer

我正在开发一个带有标签栏控制器的 iOS 应用程序。在第一个选项卡中，我放置了一个 AVQueuePlayer 实例以开始播放来自网络的音乐。我完成了所有编码以允许通过远程控制事件播放和暂停事件。但是只有当我停留在第一个选项卡时，我才能接收远程控制事件。当我切换到其他选项卡时，第一个选项卡没有收到远程控制事件。

当我将以下行放在第一个选项卡视图控制器中时，即使我留在第二个选项卡中，我也可以接收到第一个选项卡的远程控制事件。

```
- (BOOL)canResignFirstResponder
{
    return NO;
} 
```

但是我在其他视图中有一些文本字段，用户必须与之交互。通过不在第一个选项卡中辞职第一响应者，我无法在其他选项卡中输入文本。

请帮助我，当我的用户在第二个选项卡中与应用程序交互时，如何处理远程控制事件以控制第一个选项卡中的 AVQueuePlayer 实例？

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T22:01:30.883

好的。我自己想出来的。

我在实现文件的开头为 avqueueplayer 创建了一个全局变量。在 viewDidLoad 方法中分配并启动了 AVQueuePlayer。创建了一个类方法来处理播放和暂停事件中的操作。并在其他视图控制器中调用该类方法来直接处理来自这些视图控制器的远程控制事件。这是我编码的示例：

```
//playerView header file

@interface playerView : UIViewController

+ (void)togglePlayPause;

@end

//playerView Implementation File

#import "playerView.h"

@interface playerView ()
@end

@implementation playerView

AVQueuePlayer *player;

- (void)viewDidLoad
{
[super viewDidLoad];
player = [[AVQueuePlayer alloc] initWithPlayerItem:[AVPlayerItem playerItemWithURL: someurl]];
}

+ (void) togglePlayPause
{
    if (player.rate == 1.0)
    {
        [player pause];
    }
    else if ((player.rate == 0.0) && ([player status]!= 2))
    {
        [player play];
    }
}

// include all other methods to handle remote control events as laid in apple documentation

@end

//otherView Implementation file

#include "playerView.h"

@interface otherView ()

@end

@implementation otherView

// include all other methods to handle remote control events as laid in apple documentation

- (void) remoteControlReceivedWithEvent: (UIEvent *) receivedEvent
{

    if (receivedEvent.type == UIEventTypeRemoteControl) {

        switch (receivedEvent.subtype) {
            case UIEventSubtypeRemoteControlTogglePlayPause:
                [playerView togglePlayPause];
                break;
            default:
                break;
        }
    }
}

@end 
```

对于苹果文档中规定的处理远程控制事件的所有其他方法，请参阅：

[iOS 事件处理指南 - 多媒体远程控制](http://developer.apple.com/library/ios/#documentation/EventHandling/Conceptual/EventHandlingiPhoneOS/RemoteControl/RemoteControl.html)

# asp.net-mvc-3 - MVC3 - 查询字符串 NULL

> ID：10940205
> 
> 赞同：0
> 
> 时间：2012-06-07T21:33:36.213
> 
> 标签：asp.net-mvc-3

感谢您阅读本文。

想要将查询字符串中的数据传递给操作；网址

MyController/MyAction?lob=a

试过这个：

```
[HttpGet]
public ActionResult MyAction()
{
        var model = new SModel();
        model.lob = Request.QueryString["lob"];
        return View(model);
}

[HttpGet]
public ActionResult MyAction(string lob)
{
        var model = new SModel();
        model.lob = lob;
        return View(model);
}

[HttpGet]
public ActionResult MyAction(FormCollection values)
{
        var model = new SModel();
        model.lob = values["lob"];
        return View(model);
} 
```

“lob”始终为空。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T22:01:11.657

您的控制器中应该只有一个 MyAction 方法。

您还可以删除`[HttpGet]`

```
public ActionResult MyAction(string lob)
{
    var model = new SModel();
    model.lob = lob;
    return View(model);
} 
```

如果您想为 post 提供第二个 MyAction，请将其添加`[HttpPost]`到其中，以便控制器可以确定要使用的方法。

# c# - 调用 ManagementScope.Connect() 时如何解决 UnauthorizedAccessException

> ID：10940208
> 
> 赞同：2
> 
> 时间：2012-06-07T21:33:54.137
> 
> 标签：c#, .net-4.0, wmi, access-denied, dcom

我正在寻找从系统中收集有关远程 WMI 调用失败原因的更多信息的想法。

[用户需要哪些权限/权限才能在远程计算机上拥有 WMI 访问权限中](https://serverfault.com/questions/28520/which-permissions-rights-does-a-user-need-to-have-wmi-access-on-remote-machines)的详细步骤？很有帮助，但要么我不小心错过了一些东西，要么需要为我的环境配置更多东西。

当我运行 .NET 4.0 C# 代码（下面的代码段）时，我看到以下异常：

> System.UnauthorizedAccessException 发生消息=访问被拒绝。（来自 HRESULT 的异常：0x80070005 (E_ACCESSDENIED)）
> Source=System.Management StackTrace：在 System.Management.ThreadDispatch.Start() 在 System.Management.ManagementScope.Initialize() 在 System.Management.ManagementScope.Connect() 在 MyNamespace。 MyClass.GetWmiInfo() 在...

这是发生错误的代码。调用[Connect()](http://msdn.microsoft.com/en-us/library/system.management.managementscope.connect.aspx)时会引发异常。

```
var scope = new ManagementScope("\\\\HOSTNAME\\root\\cimv2")
{
    Options =
    {
        Impersonation = ImpersonationLevel.Impersonate,
        Password = "password",
        Username = "domain\\username"
    }
};

scope.Connect(); 
```

代码在 Windows 7 计算机上运行，​​WMI 连接的目标是 Windows XP 计算机。*注意：如果我颠倒这两个角色，我会看到类似的问题。*

我没有看到目标计算机的安全日志中记录了任何错误。

如果我将正在使用其凭据的用户添加到目标计算机上的管理员组，则调用`Connect()`成功，因此问题似乎确实是由于尚未授予的权限或访问权限造成的。

通常，当我遇到拒绝访问错误时，我将能够在日志中找到提供更多详细信息的条目，或者能够运行**regmon**或**filemon**来捕获一些有用的信息。但是有了这个 WMI / DCOM 错误，我不知道在哪里可以找到更多信息。

任何建议都非常感谢！

**更新：**我使用[WBEMTest.exe](http://technet.microsoft.com/en-us/library/cc180684.aspx)进行了测试，发现访问也被拒绝，除非我以管理员身份运行。我正在尝试继续使用此工具以进一步隔离问题。

# java - Asynch WebService 回调机制可以用于 Java 和 .NET 客户端吗？

> ID：10940210
> 
> 赞同：1
> 
> 时间：2012-06-07T21:34:03.887
> 
> 标签：java, web-services, soap, architecture, axis2

我对支持回调机制的 Async WebService (Java) 有疑问。

我阅读了一些链接，这看起来很有希望： [http ://axis.apache.org/axis2/java/core/docs/jaxws-guide.html#Async](http://axis.apache.org/axis2/java/core/docs/jaxws-guide.html#Async)

Java 和 .NET 客户端都可以使用 WebService 回调机制吗？

回调处理程序如何“真正”被回调。

服务如何知道客户的位置（或地址）......？我想这涉及到一些 ws-addressing 魔术......但它不是 ws-addressing Java 规范吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T22:31:57.827

WS-addressing 有一组独立于实现的参数。您可以将 WS-addressing/异步 Web 服务与 .NET、Java EE 和其他语言/平台一起使用。阅读更多关于[http://www.w3.org/Submission/ws-addressing](http://www.w3.org/Submission/ws-addressing)

# mysql - Mysql，每个关系的最大日期

> ID：10940212
> 
> 赞同：0
> 
> 时间：2012-06-07T21:34:13.010
> 
> 标签：mysql, date, max, each, relation

我有 2 张桌子：

money_change：

```
id_change | id_factor | d_change | date
--------------------------------------------- 
1           5           0.10       2012-06-07
2           6           0.11       2012-06-07
3           5           0.12       2012-06-09
4           6           0.11       2012-06-10
5           8           1.09       2012-06-03 
```

金钱因素：

```
id_factor | money_base | money_change
--------------------------------------
5           'Dollar'     'Yen' 
6           'Dollar'     'Euro'
7           'Euro'       'Dollar'
8           'Euro'       'Yen' 
```

我正在尝试进行查询，以返回货币对美元的最新变化。我的意思是结果：

```
id_factor | d_change | date
--------------------------------------
5           0.12       2012-06-09
6           0.11       2012-06-10 
```

我可以知道个别因素的最后日期：

```
SELECT MAX( date )
FROM money_change
WHERE id_factor = 6 
```

但是您可能知道每个“美元”因素的最后日期？我试过这样的事情：

```
SELECT id_factor, d_change, date
FROM money_change c
INNER JOIN money_factor f
ON f.id_factor = c.id_factor
LEFT JOIN (
    SELECT MAX(date) AS date
    FROM money_change
) AS Last
ON c.dRegistro = Last.date
WHERE money_base = "Dollar" 
```

但我回来了：

```
id_factor | d_change | date
--------------------------------------
5           0.10       2012-06-07
6           0.11       2012-06-07
5           0.12       2012-06-09
6           0.11       2012-06-10 
```

我想我需要在子查询中输入“位置”，但是对于每个因素来说都是动态的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:42:45.007

试试这个查询：

```
SELECT
    t.id_factor,
    t.d_change,
    t.date
FROM
(
    SELECT
         mc.id_factor,
         mc.d_change,
         mc.date
    FROM
        money_change mc
    INNER JOIN
        money_factor mf USING(id_factor)
    WHERE
        mf.money_base = "Dollar"
    ORDER BY
        mc.date DESC
) t
GROUP BY
    t.id_factor 
```

# git - git：更有效的方法来做到这一点

> ID：10940213
> 
> 赞同：2
> 
> 时间：2012-06-07T21:34:14.290
> 
> 标签：git, workflow, git-svn

这是我使用 git-svn 的正常工作流程：

1.  为问题创建分支
2.  在分支上做一些工作后提交
3.  结帐大师
4.  svn 变基
5.  结帐分行
6.  变基大师
7.  结帐大师
8.  合并分支
9.  提交

我的目标是让我的历史保持直线，并尽量减少合并带来的麻烦。

有没有办法用更少的步骤做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T12:06:44.967

你在这里有两件事不一致。为了使您的历史保持在一条直线上，您需要重新设置基准。但是，变基意味着您必须在不同的代码库之上重新应用更改。这会引发一连串的冲突解决方案，您可能需要*为每一个变基的提交执行这些*解决方案。

我唯一能帮助你的是，如果你已经重新设置基准，你知道你将有一个快进合并。在这种情况下，您无需签出该分支即可将其向前移动。因此，要更新参考，您可以：

```
git push . my-branch:master 
```

这将更新 master 以指向 my-branch 指向的位置，并且仅在它可以快速转发时才有效。不幸的是，它在这里对您没有帮助，因为您需要在分支上执行所需的操作。

回到您的工作流程问题，与简单合并相比，您将遇到更多冲突问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T13:12:45.957

没有必要在中间做你的变基，当然也不需要交换到主分支来这样做。我的工作流程达到了同样的效果，因此是：

1.  为问题创建一个分支：（如果我已经在我感兴趣的分支上`git checkout -b issue remotes/trunk`，可以省略）。`remotes/trunk`

2.  做一些工作，然后提交。

3.  将其直接推送到 Subversion 存储库：`git svn dcommit`. 仅当您编辑的文件已更改时，此操作才会失败。如果他们有，你会得到一个错误，所以做一个`git svn rebase`然后再试`git svn dcommit`一次。

    请注意，无需先将其合并到您的主分支中。

4.  签出主分支：`git checkout master`.

5.  重新设置主分支：`git svn rebase`.

    （可选）删除问题分支；master 和 issue 分支现在应该是相同的，就像之后`git svn dcommit`一样。`git svn rebase`

您可以`git svn`从任何分支执行命令；系统将根据父 Subversion 分支计算出提交或变基的位置。如果你想检查它感兴趣的 Subversion 分支，运行`git svn dcommit --dry-run`

特别是，master 分支并没有什么特别之处。事实上，我经常忽略它并跳过上面的步骤 4-5。我只是从一个问题分支交换到另一个问题分支，并且从不费心将主分支带到 Subversion 提示。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-18T15:59:51.370

你可以试试[SubGit](http://subgit.com/ "子Git")而不是 git-svn。

SubGit 是一个服务器端解决方案。它允许 Git 访问您的 Subversion 存储库以及 Subversion 访问 Git 存储库。必须将 SubGit 安装到 Subversion 存储库中，即基本上添加必要的钩子，在每次推送和提交时进行转换：

```
$ subgit configure $SVN_REPOS
$ # Adjust $SVN_REPOS/conf/subgit.conf 
$ #     to specify your branches and tags
$ # Adjust $SVN_REPOS/conf/authors.txt 
$ #     to introduce svn author names to their git counterparts
$ subgit install $SVN_REPOS 
```

之后，在 $SVN_REPOS/.git 有一个 Git 存储库，它与 Subversion 对应物不断同步。当为这个 Git 存储库配置远程访问时（例如通过[git-http-backend](http://schacon.github.com/git/git-http-backend.html)），可以使用任何 Git 工作流和任何具有现有 Subversion 存储库的 Git 客户端。

对于您的情况，它看起来像这样：

```
$ git checkout -b foo
$ git commit
$ git checkout master
$ git merge foo or git rebase foo
$ git push 
```

更多细节：

*   SubGit 在合并跟踪、行尾、mime 类型支持等方面比 git-svn 优越得多；
*   SubGit 是一个带有一些免费选项的商业工具；
*   我是 SubGit 开发人员之一。

# c++ - :: 的无效使用 - C++ 禁止使用没有类型的向量

> ID：10940218
> 
> 赞同：1
> 
> 时间：2012-06-07T21:34:44.027
> 
> 标签：c++, vector, iterator

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-07T21:38:07.783

There is no declaration of `std::vector` in scope for your class. You need a `#include <vector>`.

# objective-c - 移动 UIView 时遇到问题

> ID：10940222
> 
> 赞同：0
> 
> 时间：2012-06-07T21:34:50.700
> 
> 标签：objective-c, xcode, ios5

以下文件将一系列形状加载到 UIViewController 中。每个形状随机放置在屏幕上。我可以使用下面的代码来水平改变图像的形状，但是我无法在 UIView 上移动图像的 x 和 y 坐标。如何将形状移动到屏幕上的不同位置？下面改变了 UIView 的宽度：

```
 [UIView animateWithDuration:0.5f animations:^{[[timer userInfo] setBounds:CGRectMake(0, 0, 100, 5)];}]; 
```

视图控制器.h

```
#import <UIKit/UIKit.h>
#import "Shape.h"

@interface ViewController : UIViewController

@end 
```

视图控制器.m

```
#import "ViewController.h"

@implementation ViewController

UIView *box;
int screenHeight;
int screenWidth;
int x;
int y;
Shape * shape;
- (void)viewDidLoad
{
    CGRect screenRect = [[UIScreen mainScreen] bounds];
    screenHeight = screenRect.size.height;
    screenWidth = screenRect.size.width;
    box = [[UIView alloc] initWithFrame:CGRectMake(0, 0, 5, 5)];     
    [self.view addSubview:box];
    for (int i = 0; i<3; i++) {
        x = arc4random() % screenWidth;
        y = arc4random() % screenHeight;
        shape =[[Shape alloc] initWithX:x andY:y];
        [box addSubview:shape];     
        [NSTimer scheduledTimerWithTimeInterval:0.01 target:self selector:@selector(moveTheShape:) userInfo:shape repeats:YES];     
    }
}
-(void) moveTheShape:(NSTimer*)timer
{
    //[UIView animateWithDuration:0.5f animations:^{[[timer userInfo] setBounds:CGRectMake(100, 0, 100, 5)];}];
    [UIView animateWithDuration:0.5f animations:^{[[timer userInfo] setBounds:CGRectMake(0, 0, 100, 5)];}];
}
@end 
```

形状.h

```
#import <UIKit/UIKit.h>

@interface Shape : UIView; 

- (id) initWithX: (int)xVal andY: (int)yVal;

@end 
```

形状.m

```
#import "Shape.h"

@implementation Shape 

- (id) initWithX:(int )xVal andY:(int)yVal {
    self = [super initWithFrame:CGRectMake(xVal, yVal, 5, 5)];  
    self.backgroundColor = [UIColor redColor];  
    return self;
}

@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:59:35.110

在您的 moveTheShape 方法中，您需要设置框架，而不是边界，并将 CGRectMake 中的 x 和 y 值设置为 0 以外的值。

您可以像这样在 moveTheShape 方法中获取原始 x 和 y 值：

```
 -(void) moveTheShape:(NSTimer*)timer {
        CGRect frame = [timer.userInfo frame];
        float frameX = frame.origin.x;
        float frameY = frame.origin.y;
        NSLog(@"X component is:%f   Y component is:%f",frameX,frameY);
        [UIView animateWithDuration:0.5f animations:^{[[timer userInfo] setFrame:CGRectMake(200, 100, 5, 5)];}];
    } 
```

# android - 是否可以在 Android DownloadManager 中提交 cookie

> ID：10940223
> 
> 赞同：13
> 
> 时间：2012-06-07T21:34:50.827
> 
> 标签：android, cookies, download

我正在使用 android `DownloadManager`API 从我学校的服务器下载文件。我有权通过登录访问这些文件，但我无法弄清楚如何使用我`DownloadManager.Request`的下载代码提交 cookie。`dm`是一个全局的`DownloadManager`，并且`url`是一个 php 下载脚本，它重定向到一个文件，通常是 pdf/doc/etc。

```
dm = (DownloadManager) getSystemService(DOWNLOAD_SERVICE);
Request request = new Request(Uri.parse(url));
dm.enqueue(request);

Intent i = new Intent();
i.setAction(DownloadManager.ACTION_VIEW_DOWNLOADS);
startActivity(i); 
```

这工作正常，但我下载了一个 html 文件，这是我学校网站的登录页面。显然我需要以某种方式提交用户的会话 cookie，但我在文档中看不到任何这样做的方法。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-06-07T21:51:42.100

Cookie 是通过 HTTP 标头（恰当地命名为“Cookie”）发送的，幸运的是，DownloadManager.Request[具有](http://developer.android.com/reference/android/app/DownloadManager.Request.html#addRequestHeader%28java.lang.String,%20java.lang.String%29)添加您自己的标头的方法。

所以你想要做的是这样的：

```
Request request = new Request(Uri.parse(url)); 
request.addRequestHeader("Cookie", "contents");
dm.enqueue(request); 
```

当然，您必须将“内容”替换为实际的 cookie 内容。CookieManager类对于获取[站点](http://developer.android.com/reference/android/webkit/CookieManager.html)的当前 cookie 应该很有用，但如果失败，另一种选择是让您的应用程序发出登录请求并获取返回的 cookie。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-02-29T19:15:28.277

您可以使用 CookieManager 检索 cookie，如下所示（我使用 webview）：

```
 webView.setWebViewClient(new WebViewClient() {
        @Override
        public void onPageFinished(WebView view, String url) {
            super.onPageFinished(view, url);

            String cookieString = CookieManager.getInstance().getCookie(url);

        }
    });

    //Enable Javascript
    webView.getSettings().setJavaScriptEnabled(true);
    //Clear All and load url
    webView.loadUrl(URL_TO_SERVE); 
```

然后将其传递给 DownloadManager：

```
 //Create a DownloadManager.Request with all the information necessary to start the download
    DownloadManager.Request request = new DownloadManager.Request(Uri.parse(url))
            .setTitle("File")// Title of the Download Notification
            .setDescription("Downloading")// Description of the Download Notification
            .setNotificationVisibility(DownloadManager.Request.VISIBILITY_VISIBLE)// Visibility of the download Notification
            .setDestinationUri(Uri.fromFile(file))// Uri of the destination file
            .setAllowedOverMetered(true)// Set if download is allowed on Mobile network
            .setAllowedOverRoaming(true);
    request.addRequestHeader("cookie", cookieString);
    /*request.addRequestHeader("User-Agent", cookieString);*/
    DownloadManager downloadManager = (DownloadManager) getSystemService(DOWNLOAD_SERVICE);
    downloadID = downloadManager.enqueue(request);// enqueue puts the download request in the queue. 
```

# perl - Gdata包perl问题

> ID：10940224
> 
> 赞同：19
> 
> 时间：2012-06-07T21:34:58.390
> 
> 标签：perl, excel, r

我正在尝试按照这个简单的 2 分钟视频教程将 Excel 电子表格作为数据框导入 R：[http ://www.screenr.com/QiN8](http://www.screenr.com/QiN8)

我遵循了每个步骤，包括在我的 Win 7 PC 上下载和安装 Strawberry Perl（32 位），将 R 指向我的工作目录，并在 R 中输入以下命令：

```
Spreadsheet <- read.xls("targetspreadsheet.xls") 
```

我收到此错误：

> findPerl(verbose = verbose) 中的错误：找不到 perl 可执行文件。使用 perl= 参数来指定正确的路径。file.exists(tfn) 中的错误：“文件”参数无效

更新：

我重置了我的机器并将路径设置为 Perl：

```
perl <- "C:/strawberry/perl/bin/perl.exe" 
```

然后我输入了这个命令：

```
DF <- read.xls("spreadsheet.xls", perl = perl) 
```

命令行返回此错误：

> xls2sep 中的错误（xls，工作表，详细 = 详细，...，方法 = 方法，：中间文件 'C:\Users\AEID\AppData\Local\Temp\RtmpoXMywa\file18e45ed513c.csv' 丢失！另外：警告消息: 运行命令 '"C:\STRAWB~1\perl\bin\perl.exe" "C:/Users/AEID/Documents/R/win-library/2.15/gdata/perl/xls2csv.pl" "GFT_show_wip_report(42 ).xls" "C:\Users\AEID\AppData\Local\Temp\RtmpoXMywa\file18e45ed513c.csv" "1"' 在 file.exists(tfn) 中有状态 2 错误：'file' 参数无效

我究竟做错了什么？

在此先感谢您的帮助！

AME

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-08-27T17:18:22.523

使用它加载gdata包后`library(gdata)`清楚地说：

> gdata：read.xls() 将无法读取 Excel XLS 和 XLSX 文件 gdata：除非 'perl=' 参数用于指定 gdata：有效 perl 解释器的位置。

因此，您需要有效的 perl 解释器的 PATH。使用 windows，就像这里的情况一样，您需要检查属性以找到所需的 perl 解释器。

```
#set the PATH to perl interpreter
perl <- "C:/strawberry/perl/bin/perl5.18.2.exe"

try1file <- read.xls("my.one.filename.xls", perl = perl) 
```

对于多个 xls 文件：

```
> length(list.files())
[1] 65

try65files <- lapply(list.files(), ..., perl = perl) 
```

如果`verbose = TRUE`, 在每个文件的末尾，它将显示：

```
Loading 'F65.xls'...
Done.
Orignal Filename: F65.xls
Number of Sheets: 1
Writing sheet number 1 ('Sheet1') to file 'C:\Users\FRANKL~1.JOH\AppData\Local\Temp\RtmpeKs3fi\file13dc750950e4.csv'
Minrow=0 Maxrow=32 Mincol=0 Maxcol=16
  (Ignored 0 blank lines.)
0 
Done.
Reading csv file  “C:\Users\FRANKL~1.JOH\AppData\Local\Temp\RtmpeKs3fi\file13dc750950e4.csv” ...
Done. 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-09T10:07:27.450

正如其他一些答案所说的那样，问题是 perl.exe 丢失了。就我而言，它在从以下位置安装后起作用： [http://www.activestate.com/activeperl/downloads](http://www.activestate.com/activeperl/downloads) 然后指向它：

```
 read.xls("bla.xlsx", perl = "C:\\Perl64\\bin\\perl.exe") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-27T04:21:04.260

在我运行以下脚本并重新启动 PC 后，问题就消失了：

```
library(gdata)
installXLSXsupport(perl = 'C:\\strawberry\\perl\\bin\\perl.exe') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-30T10:53:26.273

我最近`gdata`在 Windows 10 下使用软件包和 Strawberry Perl 软件遇到了同样的问题。我的解决方案如下：（1）卸载旧版本的草莓 Perl——如果你尝试在旧版本上安装新版本，它说它不可升级，（2）安装从这个[链接](http://strawberryperl.com/releases.html)下载的新版本`C:/Strawberry/`，（3）添加`C:/Strawberry/perl/bin/perl.exe`到环境变量窗口的用户变量中的“路径”。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-01-29T15:26:19.110

我自己遇到了这个问题，终于找到了罪魁祸首。在我的初始代码中，我正在处理一个有 4 张纸的 excel 文件，并且在第 4 张纸上运行 - read.xls(con, perl=prl, sheet=4)。我的新 xlxs 文件有一张，导致错误。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-26T12:04:10.490

我也遇到了同样的问题，并且一直在与“xls2sep 中的错误”作斗争 1 小时。重新安装草莓，不行。

我终于发现excel文件坏了。“xls2sep 中的错误”似乎意味着文件已损坏。

宁

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-03-02T21:56:11.107

R 正在搜索 xls 或 xlsx 文件，但没有找到它。因此，设置您的 Excel 文件所在的工作目录（例如`setwd("C:\....")`）并运行以下任何脚本格式：

```
read.xls("Potato.xls", perl = "C:\\Strawberry\\perl\\bin\\perl.exe")
read.xls("Tomato.xls", perl = "C:\\Strawberry\\perl\\bin\\perl.exe")
read.xls("Potato.xlsx", perl = "C:/Strawberry/perl/bin/perl.exe")
read.xls("Tomato.xlsx", perl = "C:/Strawberry/perl/bin/perl.exe") 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-12-10T06:39:55.100

你可以试试这个语法：

```
T<-read.xls("Template.xlsx", perl = "C:\\Perl\\bin\\perl.exe") 
```

我在这里找到了这个解决方案

[http://cran.r-project.org/web/packages/gdata/INSTALL](http://cran.r-project.org/web/packages/gdata/INSTALL)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-01-08T21:39:39.903

确保您的路径变量未命名为“perl”。我将其重命名为 prl 并成功！

这不起作用：

```
perl <- "C:/Strawberry/perl/bin/perl.exe"
excel_gdata <- read.xls(url_xls, perl)

Error in findPerl(verbose = verbose) : 
  perl executable not found. Use perl= argument to specify the correct path.
Error in file.exists(tfn) : invalid 'file' argument 
```

这行得通！

```
prl <- "C:/Strawberry/perl/bin/perl.exe"
excel_gdata <- read.xls(url_xls, prl) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-02-03T18:58:36.327

就我而言，我收到了类似的消息：

```
Error in xls2sep(xls, sheet, verbose = verbose, ..., method = method,  : 
  Intermediate file 'C:\Users\dddd\AppData\Local\Temp\Rtmp6DG4Cr\file1ce018647411.csv' missing!
In addition: Warning message:
running command '"C:\Perl64\bin\PERL52~1.EXE" "C:/Users/dddd/Documents/R/win-library/3.4/gdata/perl/xls2csv.pl"  "D:/dddd/mlj/Results/xxxx.xlsx" "C:\Users\dddd\AppData\Local\Temp\Rtmp6DG4Cr\file1ce018647411.csv" "1"' had status 13 
Error in file.exists(tfn) : invalid 'file' argument 
```

我通过关闭 Excel 表找到了解决方案，Excel 和 R 无法同时打开该表。

# java - 如何在 Java 中的不同程序中接收信息并将信息发送到控制台？

> ID：10940226
> 
> 赞同：0
> 
> 时间：2012-06-07T21:35:22.540
> 
> 标签：java, console-application

如何在 Java 中的不同程序中接收信息并将信息发送到控制台？我试图从中接收控制台的程序是用[Torque](http://www.garagegames.com/)制作的。我不知道这是否有区别。我一直在阅读不同的主题，但似乎都在告诉我需要它的程序。由于缺乏有关该主题的信息，我目前没有任何代码。如果你能帮助我，谢谢你的帮助和时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:39:44.757

这是一个特定于操作系统的问题......如何将标准输出从一个进程传输到另一个进程的标准输入......

Unix 通常使用管道符号 (|) 来执行此操作，如下所示：

```
$ ls | wc 
```

这会从 ls 获取输出并将其发送到 wc 的输入...如果此信息没有帮助，请考虑扩展您的问题并使其更具体。你试过什么？

# java - Java 程序查找所有低于 2,000,000 的素数之和（Project Euler）

> ID：10940229
> 
> 赞同：0
> 
> 时间：2012-06-07T21:35:30.280
> 
> 标签：java

我正在尝试解决 Project Euler 的第 10^个问题，但由于某种原因，我无法正确解决。我在编程和 Java 方面真的很陌生，所以我不明白为什么它不起作用。问题的重点是找出所有低于 2,000,000 的素数之和。

```
/*  The sum of the primes below 10 is 2 + 3 + 5 + 7 = 17.

    Find the sum of all the primes below two million.
*/  

public static void main(String[] args){

    long n = 1;
    long sum = 0;
    long limit;

    System.out.println("Enter the limit of n: ");
    limit = TextIO.getlnLong(); //TextIO is another input method
    while (limit <= 0){
        System.out.println("Enter the limit of n (must be positive): ");
        limit = TextIO.getlnLong();

    }       

    while (n < limit){ 
        n++;
        if (n % 2 != 0 && n % 3 != 0 && n % 5 != 0 && n % 7 != 0 && n != 1 || n == 2 || n == 3 || n == 5 || n == 7){ //this is my prime checking method, might be flawed

            sum = sum + n;  
            System.out.println(+sum);
        } //end if

    }//end while

    System.out.println("The sum of the primes below 2,000,000 is: " +sum);

} //end of main 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T21:39:54.120

如需*有效*的素数检查方法，请阅读[埃拉托色尼筛](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T21:40:09.123

你的主要方法坏了。如果一个数在 2 和该数的平方根之间没有任何除数，则该数是素数。13*13 将通过您的主要检查功能。

```
for i to sqrt(n):
   if(n % i == 0):
       OH NO NOT PRIME DO SOMETHING HERE?
if something is prime
   add some stuff 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-12T21:23:18.443

这里有 2 个比普通解决方案更好的解决方案：

**1）遍历奇数**（唯一的偶素数已经在总和中）并检查它们是否是素数：

```
private static boolean isOddPrime(int x) {
    for ( int i = 3 ; i*i <= x ; i+=2 ){ 
        if ( x % i == 0 ) {
            return false;
        }
    }
    return true;
}

private static void sumOfPrimes1(int n) {       
    long sum = 2;
    for ( int i = 3 ; i < n ; i+=2 ) {
        if ( isOddPrime(i) ) {
            sum+=i;
        }
    }
    System.out.println(sum); 
} 
```

**2)**使用**埃拉托色尼筛**

```
private static void sumOfPrimes2(int n) {
    boolean notPrimes[] = new boolean[n];   // default = false
    for ( int i = 2 ; i*i < n ; i++ ) {
        if ( !notPrimes[i] ) {
            for ( int j = i*i ; j < n ; j+=i ){
                notPrimes[j] = true;
            }
        }
    }
    long sum = 2 ;
    for ( int i = 3 ; i < n ; i+=2 ) {
        if ( !notPrimes[i] ) {
            sum+=i;
        }
    }
    System.out.println(sum);
} 
```

我使用“notPrimes”（复合）而不是“primes”作为数组，只是为了利用 Java 中的默认布尔值是`false`.

**性能**：

```
n           |    2000000        8000000       16000000
------------+-------------------------------------------
Solution 1  |    1309 ms        8574 ms       22757 ms
Solution 2  |    119 ms         696 ms        1624 ms 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-10-02T13:37:03.767

[http://www.counton.org/explorer/primes/checking-if-a-number-is-prime/](http://www.counton.org/explorer/primes/checking-if-a-number-is-prime/)

检查数字 N 是否为素数的一个捷径是，我们不必依次尝试从 2 到 N（2、3、4、5、6 ...... N。

exp ：因为 3 是 18 的因数，并且 18/3=6，所以 18=3x6。我们只需要测试较小的数字 3，看看它是不是 18 的因数，而不是 6。同样，5 是 20 的因数，20=5x4，所以我们只需要测试较小的数 4 作为因数。但是如果我们不知道一个数的因数怎么办？因此，测试一个数字是否为素数意味着我们只需要测试“较小”的因素。但是较小的因素在哪里停止而较大的因素从哪里开始呢？这里的原理是：假设一个数是 N 的因数，并且它小于数 N 的平方根，那么第二个因数必须大于平方根。我们可以通过上面的例子看到这一点：对于 18，我们只需要测试直到 18 的平方根即 4.243 的数字，即最多 4！这比测试 17 以内的所有数字要快得多！！25岁，

```
public static void main(String[] args) {
    long sum = 0;
    for (int i = 2; i < 2000000; i++) {
        if (isPrime(i)) {
            sum += i;
        }
    }
    System.out.println(sum);
}

// check if a number is prime
private static boolean isPrime(int number) {
    int sqrt = (int) Math.sqrt(number);
    boolean isPrime = true;

   // test up to square root of the number
   for (int i = 2; i <= sqrt; i++) {
        if (number % i == 0) {
            isPrime = false;
            break;
        }
    }
    return isPrime;
} 
```

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-11-02T17:54:34.257

```
public static void main(String args[])
{
  long n = 1;
  long sum = 0;
  long limit=Integer.parseInt(args[0]);

  while (n < limit)
  {
    n++;
    if(n % 2 != 0 && n % 3 != 0 && n % 5 != 0 && n % 7 != 0 && n != 1 || n == 2 || n == 3 || n == 5 || n == 7)
    {
      sum = sum + n;
    }
  }

    System.out.println("The sum of the prime numbers = " +sum);
 } 
```

# javascript - 在给定 URL 的情况下获取网页的标题

> ID：10940241
> 
> 赞同：4
> 
> 时间：2012-06-07T21:36:27.100
> 
> 标签：javascript

有没有任何方法可以返回给定 URL 的网页标题？

我不是说可以从doing中得到的当前页面的标题`document.title`，我的意思是得到另一个网页的标题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T21:38:50.043

您无法访问此站点，因为该站点位于不同的域中。那将是对[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)的安全违规。

否则，您可以将另一个网页加载到隐藏中`iframe`并使用它：

```
document.getElementById('myIframe').contentWindow.document.title; 
```

其实我是半说谎。这样做是违反安全的，但 IE 有一个错误，您可以通过 VBScript 访问内容。不确定这是否已经修补。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T21:38:16.897

不。

你不能。

并非没有一些额外的 API

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T21:39:50.140

也许 ajax 可以做到这一点，但通过原始工具，你不能！（js是客户端！）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-11-11T10:11:51.427

是的，您可以，而且非常简单。

```
chrome.topSites.get(function(info){ //fetching the top sites visited in chrome
    var xyz=document.getElementsByClassName('urclassname');
    for(var i=0;i<info.length;i++) {
       console.log(info[i]);  //check the data fetched by info
       xyz[i].setAttribute("urclassattribute",info[i].title); //set the title of the fetched url
    }
}); 
```

假设我最常访问的网站是 Facebook，因此 console.log(info[i]) 将在浏览器控制台中给出如下值：

目的

标题：“（3）Facebook”网址：“ [https://www.facebook.com/](https://www.facebook.com/) ” **原型** ：构造函数：ƒ Object() hasOwnProperty：ƒ hasOwnProperty() isPrototypeOf：ƒ isPrototypeOf() propertyIsEnumerable：ƒ propertyIsEnumerable() toLocaleString： ƒ toLocaleString() toString : ƒ toString() valueOf : ƒ valueOf() **defineGetter** : ƒ **defineGetter** () **defineSetter** : ƒ **defineSetter** () **lookupGetter** : ƒ **lookupGetter** () **lookupSetter** : ƒ **lookupSetter** () get **proto** : ƒ **proto** () set **proto** : ƒ**原型**()

所以基本上你得到了网站的标题。

# android - Android状态栏通知中的自定义内容

> ID：10940245
> 
> 赞同：0
> 
> 时间：2012-06-07T21:36:59.377
> 
> 标签：android, notifications

我正在尝试从另一个活动中的文本视图中获取内容以显示在通知栏消息中。它有效，但不正确。来自 textview 的字符串确实显示在通知中，我通过捆绑来自其他活动的 textview 的信息来做到这一点，然后让通知管理器获取捆绑包。当启动另一个活动时会出现问题，它会触发通知，因为活动中的最后一块代码进行捆绑和发送，这会导致通知触发，忽略设置的触发时间。所以我的问题是**让通知从另一个活动中获取字符串的最佳和最简单的方法是什么？**这是活动，这就是问题所在。它自己触发通知：

```
 import java.io.IOException;

import android.app.Activity;
import android.app.NotificationManager;
import android.content.Intent;
import android.database.SQLException;
import android.os.Bundle;
import android.widget.TextView;

public class DBTest2 extends Activity {

String scrNote;
TextView showBV;
NotificationManager nm;
DBAdapter dba;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.dbtest_2);
    showBV = (TextView) findViewById(R.id.getBK_TV);

    nm = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
    //---cancel the notification---
    try{
    nm.cancel(getIntent().getExtras().getInt("uID"));
    } catch (Exception e) {
        System.out.println("Error when cancelling: "+e.toString());
    }
    //---END cancel the notification---

    //---- SHOW IN NOTIFICATION------

    scrNote = showBV.getText().toString();
    Bundle moveScrNote = new Bundle();
    moveScrNote.putString("mSN", scrNote);
    Intent toNoteBody = new Intent(DBTest2.this, DisplayNotifications.class);
    toNoteBody.putExtras(moveScrNote);
    startActivity(toNoteBody);

    //---- END   SHOW IN NOTIFICATION------

}

} 
```

这是通知管理器：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //---get the notification ID for the notification; 
    // passed in by the MainActivity---
    int uID = getIntent().getExtras().getInt("uniqueID");

    //---PendingIntent to launch activity
    Intent noteI = new Intent("com.vee.search01.DBTEST2");
    noteI.putExtra("uniqueID", uID);

    PendingIntent herroIntent = 
        PendingIntent.getActivity(this, 0, noteI, 0);

    nm = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
    long fireTime = System.currentTimeMillis();
    String noteTitle = "Notification Title";

    Bundle getNoteBody = getIntent().getExtras();
    String gotNoteBody = getNoteBody.getString("mSN");
    String noteBody = gotNoteBody;

    Notification note = new Notification(R.drawable.noteicon, noteTitle, fireTime);
    note.setLatestEventInfo(this, noteTitle, noteBody, herroIntent);
    note.defaults |= Notification.DEFAULT_SOUND;
    note.defaults |= Notification.FLAG_SHOW_LIGHTS;
    nm.notify(uID, note);
    finish();
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T23:47:26.557

在活动之间传输内容的最佳方式是通过 Intent 中的附加内容发送。

如果您从 Activity A 发出通知，并且想在 Activity B 中处理它，则在 A 中创建通知并插入包含 Intent 的 PendingIntent 以启动 B。当通知显示并且用户单击它时，B 应该被辞退了。

如果要将通知文本从 B 发送到 A，请使用单独的 Intent。

如果您尝试将通知 Intent 的文本发送到 B 并显示通知，请将文本放入 Intent 的附加内容中。

此外，如果您使用的是平台的最新版本，请阅读通知的参考文档。它已被弃用，有利于通过 Notification.Builder 创建通知。一个优点是您可以将通知设置为自动取消，因此您不必在代码中取消它。

# python - 使用 python 图像库将原始二进制 8 位无符号文件转换为 16 位无符号文件

> ID：10940247
> 
> 赞同：0
> 
> 时间：2012-06-07T21:37:08.723
> 
> 标签：python, grayscale, python-imaging-library

我有一个图像文件，它是一个灰度 8 位无符号整数原始二进制文件，我需要将其转换为 16 位文件并将其保存为原始二进制文件。从 16 点到 8 点相对容易，因为您只是在切断信息，但我很好奇如何才能走另一条路。

具体来说，我有一个图像将进入用 C++ 编写的处理器，而处理器只需要 16 位无符号整数图像文件，所以我需要将我的 8 位文件转换为 16 位文件。我一直在使用 Python Imaging Library 进行一些处理，但找不到这个特定的函数。

**更新**：

我遵循了 cgohlke 的建议，并且有以下看起来合乎逻辑的代码，但由于以下错误，它不接受我的“最终”变量：

```
Traceback (most recent call last):
  File "C:\Users\Patrick\workspace\colorCorrect\src\editGrayscale.py", line 36, in <module>
    u1 = np.fromfile(final, 'uint8')
TypeError: file() argument 1 must be encoded string without NULL bytes, not str 
```

我的代码：

```
import Image
import numpy as np

fileName = raw_input("Enter a file name: ")
saveFile = raw_input("Enter a new save file name: ")

with open(fileName, 'rb') as f:
    im = Image.fromstring('L', (3032, 2016), f.read()) # also try 'L;16B', 'I;16', and 'I;16B'
    changed = im.point(lambda i: i/.4)    

final = changed.tostring()

np.arange(256).astype('uint8').tofile(final)

u1 = np.fromfile(final, 'uint8')
u2 = u1.astype('uint16')
u2 *= 257  # scale to full 16 bit range
u2.tofile(saveFile) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:58:27.447

```
import numpy as np

# create example file
np.arange(256).astype('uint8').tofile('uint8_file.bin')

# read example file and convert to uint16
u1 = np.fromfile('uint8_file.bin', 'uint8')
u2 = u1.astype('uint16')
u2 *= 257  # scale to full 16 bit range
u2.tofile('uint16_file.bin') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T22:11:02.763

struct 模块可以让你进行这种转换，虽然你需要自己处理文件的读取和写入，但如果你将它存储在“数据”中，这应该可以工作：

```
 import struct

    uint8 = 'B'
    uint16 = 'H'

    data = struct.pack(uint16 * len(data),
                       *struct.unpack(uint8 * len(data), data)) 
```

添加 '>' 或 '<' 将让您控制您的 16 位流是 little-endian 还是 big-endian，即

```
 data = struct.pack('>' + uint16 * len(data),
                       *struct.unpack(uint8 * len(data), data)) 
```

将使其成为大端。

# sorting - 在 SSRS 报告中排序覆盖组排序

> ID：10940248
> 
> 赞同：3
> 
> 时间：2012-06-07T21:37:12.620
> 
> 标签：sorting, reporting-services, ssrs-grouping

我是 SSRS (2005) 的新手，正在创建我的第一份报告。我需要创建一个基于组的运行值，但已排序或其他字段。例如，从下面的数据

```
|Employee| Day |Hours|Salary|
|E1      | 1.1 |  5  |  5   |
|E2      | 1.2 |  6  |  6   |
|E3      | 1.3 |  7  |  7   |
|E2      | 2.1 |  6  |  12  |
|E1      | 2.2 |  5  |  10  |
|E3      | 2.3 |  7  |  14  |
|E3      | 3.1 |  7  |  21  |
|E2      | 3.2 |  6  |  18  | 
```

我将工资计算为按员工分组的工作时间的运行值，这很好。问题是我希望报告在 Day 列中进行排序。如果我在员工组中使用 Day 作为排序条件，则报表按员工分组，但在组内，数据按 Day 列排序。

有没有办法构建报告，然后最终在日期列上对报告进行排序？如果我不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-16T15:12:42.637

AFAIK 这是不可能的：您不能同时在一个列（例如员工）上分组*并*在不同的列上过滤整个表。

我能看到的唯一选项可以接近你想要的：

*   对员工进行分组，创建一个运行总和，然后忘记在 SSRS 中进行排序。导出报告后**在 Excel 中排序。**
*   **计算 SQL 查询中的运行总计，**并使其成为常规字段。报表现在可以按天排序，不再需要分组。

# javascript - 在后台运行：Javascript 中的线程？

> ID：10940260
> 
> 赞同：0
> 
> 时间：2012-06-07T21:38:24.757
> 
> 标签：javascript, multithreading

我有一系列用户按顺序看到的表单。当用户提交表单时，它会提交到一个 PHP 文件，该文件将根据提交的值执行一些繁重的工作，这可能需要 10 秒或更长时间才能运行，而且我不希望我的用户在去之前必须等待下一个表格。

由于我真的不需要等待 PHP 完成（我不需要它的结果才能继续），是否可以在提交时将用户重定向到下一页，并在后台提交表单所以它不会减慢用户的速度吗？

我听说 Javascript setTimeout() 可以模拟线程。这是使它并行运行的选项吗？

我的 JS 函数`goNext()`将用户重定向到下一页（但不提交）。那么这样的事情会起作用吗？

```
$('#submitButton').click(function() {
    setTimeout(submitForm(), 1);
    goNext();
});

function submitForm() {
    $('#form').submit();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:42:23.993

每个 HTTP 请求都会收到响应。因此，为了表明您的请求有效，您需要从服务器获得良好的响应（200）。

为了执行您的建议，我认为您应该在服务器端处理此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:44:40.447

使用 ajax 异步处理表单。我知道像 jQuery 这样的库也允许你有一个回调，它会在数据返回时被调用。你也可以在没有库的情况下做到这一点，但是拥有一个库可以简化事情。

从他们的网站：

```
$.ajax({
  url: 'ajax/test.html',
  success: function(data) {
    $('.result').html(data);
    alert('Load was performed.');
  }
}); 
```

（调用默认是异步的）

如果没有库，您可以执行以下操作：

```
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    alert('Ajax returned';
    }
  }
xmlhttp.open("GET", "some_url.txt",true);
xmlhttp.send(); 
```

`xmlhttp.onreadystatechange=`是您设置“回调”功能的地方，但使用纯 JavaScript，您可能想要检查就绪状态是否实际上是成功就绪状态（如示例中所示）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T21:47:37.863

不，这行不通。当用户离开页面（例如通过提交表单）时，javascript 被终止，并且下一个页面加载创建一个新的 javascript 上下文。您不能仅使用 javascript 在请求中保留变量或计时器。

您可以为此使用 ajax，前提是所有事情都发生在同一页面上，使用 ajax 调用发送表单数据并等待处理完成，但如果用户在 ajax 调用等待时意外关闭页面或导航离开，则处理中止。

更好的解决方案是将上传、处理和报告部分分离*在服务器上*；这可以像这样构建：

*   在服务器上设置任务队列。传统的选择是数据库表；进程为需要处理的每个上传添加一条记录，并对其进行更改以指示状态（新、工作、完成）。
*   上传处理程序只是读取上传的文件并将其添加到任务队列中。完成后，用户可以安全地离开。
*   运行一个 cron 作业或工作进程，它会定期查看是否有新任务要处理；如果是这样，它会选择一个（将其状态设置为“工作”），处理它，并在完成后更新它。
*   同时，您的 Web 应用程序会记住作业的 ID，并轮询服务器以了解其状态。一旦它更改为“完成”，它就会通知用户（如果您毕竟需要反馈）。Ajax 为此提供了最流畅的方式，否则用户将不得不不时刷新以查看他们上传的状态。

# jquery - 淡入内容，然后淡出，然后淡入新内容

> ID：10940262
> 
> 赞同：2
> 
> 时间：2012-06-07T21:38:37.067
> 
> 标签：jquery

我正在尝试做的事情：

```
#leftSide          #rightSide (display:none)
 _______________ _______________________________________________
|               |                                               |
| category      |                                               |
|  -link        |                                               |
|  -link        |                                               |
|               |                                               |
| category      |                                               |
|  -link        |                                               |
|  -link        |                                               |
|               |     1\. content fades in on link click         |
|               |     2\. new link click fades out old content   |
|               |     3\. new content fades in                   |
|               |                                               |
|               |                                               |
|               |click -> fade in -> click -> fade out + fade in|  
|               |                                               |
|               |                                               |
|_______________|_______________________________________________| 
```

每次我点击一个类别中的链接时，我想淡入`#rightSide`该链接的内容，然后如果我点击一个新链接，旧的内容会淡出，新的内容会淡入等等。链接。

到目前为止，我的工作方式是点击一个链接，说 div 淡入，然后我点击第二个链接，然后第二个 div 淡入正下方，而不是淡出旧的 div 并淡入新的.

```
<body>
    <script>
        $(document).ready(function() {

            $('#div_1, #div_2').addClass('js');
            $('a[rel^=div]').click(function(){
                $('#' + this.rel).fadeIn();
            });

        });
    </script>
    <!--CONTAINER-->
    <div id="container">
        <!--LEFTSIDE-->
        <div id="leftSide">
            <div class="logo"></div>
            <div class="portfolio">
                <h1>blog</h1>
                <h1>portfolio</h1>
                    <ul>
                        <li><a href="#" rel="div_1">Link 1</a></li>
                        <li><a href="#" rel="div_2">Link 2</a></li>
                    </ul>
                <h1>photography</h1>
                    <ul>
                        <li>test</li>
                        <li>another</li>
                    </ul>
            </div>
        </div>
        <!--RIGHTSIDE-->
        <div id="rightSide">
            <div id="div_1">Div 1</a>
            <div id="div_2">Div 2</a>
        </div>
    </div>
    <!--CONTAINER-->
</body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T21:50:05.510

## *[演示 jsBin](http://jsbin.com/ijuveh/edit#javascript,html,live)*

```
$('#div_1, #div_2').addClass('js');

$('.portfolio a').click(function(e){

  e.preventDefault();                      // prevent dafault anchor behav.

  var rel = $(this).attr('rel');           // grab our rel
  $('#'+rel).fadeIn().siblings('div').fadeOut();

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:49:57.157

尝试这个：

```
$(document).ready(function(){
    $('#div_1, #div_2').addClass('js');
    $('a[rel^=div]').click(function(){
        $('#' + this.rel).filter(":hidden").fadeIn().siblings(":visible").fadeOut();
    });
}); 
```

如果您单击已经激活的链接，它不会淡出，它会同时淡入和淡出新旧链接。

确保您的 div 按照 jfriend00 的建议绝对定位，以便它们彼此重叠。否则，您必须先淡出，然后在淡出完成后淡入。

```
$(document).ready(function(){
    $('#div_1, #div_2').addClass('js');
    $('a[rel^=div]').click(function(){
        var new = $('#' + this.rel).filter(":hidden");
        if (new.length) {
            new.siblings(":visible").fadeOut().promise().done(function(){
                new.fadeIn();
            });
        }
    });
}); 
```

**注意：**只使用两个脚本之一，不能同时使用。

# php - 在 ORM 模型中处理脏状态的最佳方法

> ID：10940265
> 
> 赞同：5
> 
> 时间：2012-06-07T21:38:57.347
> 
> 标签：php, model-view-controller, oop, orm

我不希望有人说*“你不应该重新发明轮子，使用开源 ORM”*；我有即时需求，无法切换。

我正在做一个支持缓存的小 ORM。即使不支持缓存，我仍然需要这个功能，以知道何时将对象写入存储。模式是 DataMapper。

这是我的方法：

*   我想避免运行时自省（即猜测属性）。
*   我不想使用 CLI 代码生成器来生成 getter 和 setter（实际上我使用的是 NetBeans，使用 ALT+INSERT）。
*   我希望模型最接近 POPO（普通的旧 PHP 对象）。我的意思是：私有属性，每个属性的“硬编码”getter 和 setter。

我有一个抽象类，称为`AbstractModel`所有模型都继承。它有一个`isDirty()`名为 is_dirty 的私有（如果需要，也可以受到保护）属性调用的公共方法。它必须返回真或假，具体取决于自加载以来对象数据是否发生变化。

**问题是：**`"is_dirty"`有没有办法在每个 setter 中不编码就可以提高内部标志`$this->is_dirty = true`？`$this->attr = $value`我的意思是：除了业务逻辑需要更改代码外，我大多数时候都希望使用 setter 。

其他限制是我不能依赖，`__set`因为在具体模型类上，属性已经作为私有存在，所以`__set`永远不会在 setter 上调用。

有任何想法吗？接受来自其他 ORM 的代码示例。

我的一个想法是修改 NetBeans 设置器模板，但我认为应该有一种方法可以在不依赖 IDE 的情况下做到这一点。

我的另一个想法是创建设置器，然后用下划线或其他内容更改私有属性的名称。这样，setter 会调用`__set`并在那里有一些代码来处理`"is_dirty"`标志，但这有点打破了 POPO 的概念，而且很丑陋。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-11T23:57:57.427

> [**注意力！**
> 在过去的一个月里，我对这个主题的看法发生了一些变化。虽然答案 where 仍然有效，但在处理大型对象图时，我建议改用 Unit-of-Work 模式。您可以在[**此答案中找到它的简要说明**](https://stackoverflow.com/a/13505933/727208)]

我有点困惑*what-you-call-Model*与ORM 的关系。这有点令人困惑。特别是因为在 MVC 中，*模型*是一个层（至少，[我是这么理解](https://stackoverflow.com/a/5864000/727208)的，而且你的*“模型”*似乎更像是 [域对象](http://c2.com/cgi/wiki?DomainObject)）。

我将假设您拥有的是如下所示的代码：

```
 $model = new SomeModel;
  $mapper = $ormFactory->build('something');

  $model->setId( 1337 );
  $mapper->pull( $model );

  $model->setPayload('cogito ergo sum');

  $mapper->push( $model ); 
```

而且，我将假设*what-you-call-Model*有两种方法，设计器供数据映射器使用：`getParameters()`和`setParameters()`. 并且您`isDirty()`在 mapper 存储*what-you-call-Model*的状态和调用之前调用`cleanState()`- 当 mapper 将数据拉入*what-you-call-Model*时。

> [顺便说一句，如果您有更好的建议来获取数据映射器的值而不是`setParameters()`and `getParameters()`，请分享，因为我一直在努力想出更好的东西。在我看来，这就像封装泄漏。]

这将使数据映射器方法看起来像：

```
 public function pull( Parametrized $object )
  {
      if ( !$object->isDirty() )
      {
          // there were NO conditions set on clean object
          // or the values have not changed since last pull
          return false; // or maybe throw exception
      }

      $data = // do stuff which read information from storage

      $object->setParameters( $data );
      $object->cleanState();

      return $true; // or leave out ,if alternative as exception
  }

  public static function push( Parametrized $object )
  {
      if ( !$object->isDirty() )
      {
          // there is nothing to save, go away
          return false; // or maybe throw exception
      }

      $data = $object->getParameters();
      // save values in storage
      $object->cleanState();

      return $true; // or leave out ,if alternative as exception
  } 
```

> [代码片段`Parametrized`中是接口的名称，应该实现哪个对象。在这种情况下，方法`getParameters()`和`setParameters()`。它有一个奇怪的名字，因为在 OOP 中，这个`implements`词的意思是***has-abilities-of***，而`extends`意思***是 is-a***。]

**到目前为止，您应该已经拥有类似的所有内容...**

* * *

现在这里是`isDirty()`and`cleanState()`方法应该做的：

```
 public function cleanState()
  {
      $this->is_dirty = false;
      $temp = get_object_vars($this);
      unset( $temp['variableChecksum'] );
      // checksum should not be part of itself
      $this->variableChecksum = md5( serialize( $temp ) );
  }

  public function isDirty()
  {
      if ( $this->is_dirty === true )
      {
          return true;
      }

      $previous = $this->variableChecksum;

      $temp = get_object_vars($this);
      unset( $temp['variableChecksum'] );
      // checksum should not be part of itself
      $this->variableChecksum = md5( serialize( $temp ) );

      return $previous !== $this->variableChecksum;
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T21:51:32.933

我会做一个代理来设置，例如：

```
class BaseModel {

   protected function _set($attr, $value) {
      $current = $this->_get($attr);
      if($value !== $current) {
         $this->is_dirty = true;
      }

      $this->$attr = $value;
   }
} 
```

然后每个子类将通过调用来实现其设置器，`_set()`并且永远不会直接设置属性。此外，您始终可以将更多特定于类的代码注入每个子类`_set`，并在需要时调用`parent::set($attr, $processedValue)`。然后，如果您想使用魔术方法，您可以将那些代理到代理到的属性方法`_set`。我想这不是很流行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-18T16:56:28.130

虽然这篇文章很旧，但是当 isDirty() 发生时如何使用事件通知侦听器？我会用事件来解决这个问题。

# jaxb - JAXB - @XmlMixed 用于读取 @XmlValue 和 @XmlElement 的用法

> ID：10940267
> 
> 赞同：3
> 
> 时间：2012-06-07T21:39:06.597
> 
> 标签：jaxb

我看到在这里发布了一个类似的问题，但它并没有帮助我解决问题，所以我在这里发布我的问题，看看是否有人可以修改我的代码以使其工作。

问题：如何访问混合内容字符串值并将其保存在 setPhrase(String value) 方法中？

标题.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<tt xmlns="link1" xmlns:prefix2="link2" prefix1:att1="att1">
    <head>
        <styling>
            <style prefix1:att1="att1" prefix2:att2="att2" prefix2:att3="att3" prefix2:att4="att4" />
        </styling>
        <layout />
    </head>
    <body xmlns:prefix3="link3">
        <div prefix1:att1="att1" prefix1:att2="att2">
            <prefix3:info att1="att1" att2="att2" />
            <p att1="att1" att2="att2" att3="att3">
                <prefix3:status att1="att1" att2="att2" />
                Hello World.
            </p>
        </div>
    </body>
</tt> 
```

标题.java：

```
package com;

import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlElementRef;
import javax.xml.bind.annotation.XmlElementRefs;
import javax.xml.bind.annotation.XmlMixed;
import javax.xml.bind.annotation.XmlRootElement;
import javax.xml.bind.annotation.XmlType;

@XmlRootElement(name = "p")
@XmlType(propOrder = { "att1", "att2", "att3", "phrase", "subelement"})
public class Caption {
    private String  att1;
    private String  att2;
    private String  att3;
    private String  phrase;
    private Subelement subelement = new Subelement();

   @XmlMixed
   public void setPhrase(String value)
   {
      this.phrase = value;
   }
   public String getPhrase()
   {
      return phrase;
   }

   @XmlElementRefs({@XmlElementRef(name = "subelement", type = Subelement.class)})
   @XmlMixed
   public void setSubelement(Subelement subelement )
   {
      this.subelement = subelement;
   }
   public Subelement getSubelement()
   {
      return subelement;
   }

   @XmlAttribute
   public void setAtt1( String att1 )
   {
      this.att1 = att1;
   }
   public String getAtt1()
   {
      return att1;
   }

   @XmlAttribute
   public void setAtt2( String att2 )
   {
      this.att2 = att2;
   }
   public String getAtt2()
   {
      return att2;
   }

   @XmlAttribute
   public void setAtt3( String att3 )
   {
      this.att3 = att3;
   }
   public String getAtt3()
   {
      return att3;
   }
} 
```

在使用 JAXB unmarshall 和 marshall 之后，我能够将所有内容转换为对象并保存 accerling，但实际的短语“Hello World.”除外。我知道我必须对这个复杂的元素使用某种@XmlMixed，但我无法弄清楚。

我当前的 output.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<tt xmlns="link1" xmlns:prefix2="link2" prefix1:att1="att1">
    <head>
        <styling>
            <style prefix1:att1="att1" prefix2:att2="att2" prefix2:att3="att3" prefix2:att4="att4" />
        </styling>
        <layout />
    </head>
    <body xmlns:prefix3="link3">
        <div prefix1:att1="att1" prefix1:att2="att2">
            <prefix3:info att1="att1" att2="att2" />
            <p att1="att1" att2="att2" att3="att3">
                <prefix3:status att1="att1" att2="att2" />
            </p>
        </div>
    </body>
</tt> 
```

愿望输出.xml：（与caption.xml相同）

```
<?xml version="1.0" encoding="UTF-8"?>
<tt xmlns="link1" xmlns:prefix2="link2" prefix1:att1="att1">
    <head>
        <styling>
            <style prefix1:att1="att1" prefix2:att2="att2" prefix2:att3="att3" prefix2:att4="att4" />
        </styling>
        <layout />
    </head>
    <body xmlns:prefix3="link3">
        <div prefix1:att1="att1" prefix1:att2="att2">
            <prefix3:info att1="att1" att2="att2" />
            <p att1="att1" att2="att2" att3="att3">
                <prefix3:status att1="att1" att2="att2" />
                Hello World.
            </p>
        </div>
    </body>
</tt> 
```

提前感谢任何帮助我可以访问此值并将其保存在 setPhrase(String value) 方法中。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-19T10:42:16.620

我会尝试用一个例子来回答你的问题：

**输入.xml**

我们将在此示例中使用以下 XML 文档。该`root`元素具有混合内容。具有混合内容意味着文本节点可以与元素混合出现。由于可以出现多个文本节点，因此一元属性并不适合。

```
<?xml version="1.0" encoding="UTF-8"?>
<root>
    <root/>
    Hello
    <root/>
    World
    <root/>
</root> 
```

**演示**

下面的代码将用于读取 XML 到对象的形式，然后将其写回 XML。

```
package forum10940267;

import java.io.File;
import javax.xml.bind.*;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Root.class);

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        File xml = new File("src/forum10940267/input.xml");
        Root root = (Root) unmarshaller.unmarshal(xml);

        Marshaller marshaller = jc.createMarshaller();
        marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);
        marshaller.marshal(root, System.out);
    }

} 
```

**用例 #1 - 一个包含混合内容的列表**

`@XmlMixed`最常用于另一个注释，因此结果`List`包含元素和文本内容。这样做的一个优点是可以保持顺序，以便文档可以往返。

```
package forum10940267;

import java.util.*;
import javax.xml.bind.annotation.*;

@XmlRootElement
public class Root {

    private List<Object> mixedContent = new ArrayList<Object>();

    @XmlElementRef(name="root", type=Root.class)
    @XmlMixed
    public List<Object> getMixedContent() {
        return mixedContent;
    }

    public void setMixedContent(List<Object> mixedContent) {
        this.mixedContent = mixedContent;
    }

} 
```

**输出**

输出与输入匹配。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<root>
    <root/>
    Hello
    <root/>
    World
    <root/>
</root> 
```

**用例 #2 - 混合内容的单独列表**

您还可以为文本内容引入单独的列表属性。

```
package forum10940267;

import java.util.*;
import javax.xml.bind.annotation.*;

@XmlRootElement
public class Root {

    private List<Object> mixedContent = new ArrayList<Object>();
    private List<String> text;

    @XmlElementRef(name="root", type=Root.class)
    public List<Object> getMixedContent() {
        return mixedContent;
    }

    public void setMixedContent(List<Object> mixedContent) {
        this.mixedContent = mixedContent;
    }

    @XmlMixed
    public List<String> getText() {
        return text;
    }

    public void setText(List<String> text) {
        this.text = text;
    }

} 
```

**输出**

输出不再匹配输入。

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<root>
    <root/>
    <root/>
    <root/>

    Hello

    World

</root> 
```

**用例 #3 - 文本内容的字符串属性**

由于文本节点可以在混合内容中多次出现，因此非列表属性不适合，并且看起来好像`@XmlMixed`注释被忽略了。

```
package forum10940267;

import java.util.*;
import javax.xml.bind.annotation.*;

@XmlRootElement
public class Root {

    private List<Object> mixedContent = new ArrayList<Object>();
    private String text;

    @XmlElementRef(name="root", type=Root.class)
    public List<Object> getMixedContent() {
        return mixedContent;
    }

    public void setMixedContent(List<Object> mixedContent) {
        this.mixedContent = mixedContent;
    }

    @XmlMixed
    public String getText() {
        return text;
    }

    public void setText(String text) {
        this.text = text;
    }

} 
```

**输出**

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<root>
    <root/>
    <root/>
    <root/>
</root> 
```

# objective-c - iOS 中的亚马逊产品广告 API 签名

> ID：10940271
> 
> 赞同：14
> 
> 时间：2012-06-07T21:39:31.230
> 
> 标签：objective-c, ios, amazon-web-services, amazon, amazon-product-api

我正在尝试在我的 iOS 应用程序中访问亚马逊的产品广告 API。创建签名似乎是困难的部分。在本页面：

[http://docs.amazonwebservices.com/AWSECommerceService/latest/DG/rest-signature.html](http://docs.amazonwebservices.com/AWSECommerceService/latest/DG/rest-signature.html)

它说“使用 SHA256 哈希算法计算符合 RFC 2104 的 HMAC”。Amazon 还提供了一个 java 类来为您执行此操作：

[http://docs.amazonwebservices.com/AWSECommerceService/latest/DG/AuthJavaSampleSig2.html](http://docs.amazonwebservices.com/AWSECommerceService/latest/DG/AuthJavaSampleSig2.html)

有人知道我如何在 Objective-C 中做到这一点吗？我查看了 AWS iOS SDK，但它似乎不包括产品广告 API。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-28T08:44:42.510

实际上，AWS iOS SDK DID 有一个静态方法来处理所有身份验证情况。也许你应该看一眼`AmazonAuthUtils.h`：

```
+(NSString *)HMACSign:(NSData *)data withKey:(NSString *)key usingAlgorithm:(CCHmacAlgorithm)algorithm;
+(NSData *)sha256HMac:(NSData *)data withKey:(NSString *)key; 
```

您可以在文档中找到它：http: [//docs.amazonwebservices.com/AWSiOSSDK/latest/Classes/AmazonAuthUtils.html](http://docs.amazonwebservices.com/AWSiOSSDK/latest/Classes/AmazonAuthUtils.html)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-07-03T13:21:50.670

只是为 camelcc 的出色观察添加一点。这确实适用于签署对亚马逊产品广告 API 的请求。我不得不弄乱一点才能让它工作。

安装 SDK 并安装`#import <AWSiOSSDK/AmazonAuthUtils.h>`

首先，您必须按照亚马逊文档将请求字符串组织成正确的顺序。我发现这个页面在解释如何订购请求方面非常有用

[http://skilldrick.co.uk/2010/02/amazon-product-information-via-amazon-web-services/](http://skilldrick.co.uk/2010/02/amazon-product-information-via-amazon-web-services/)

注意字符串中需要换行符，我的无符号字符串看起来像这样

`@"GET\necs.amazonaws.com\n/onca/xml\nAWSAccessKeyId=<ACCESS_KEY_ID>&AssociateTag=<ASSOCIATE_ID>&Keywords=harry%20potter&Operation=ItemSearch&SearchIndex=Books&Service=AWSECommerceService&Timestamp=2012-07-03T10%3A52%3A21.000Z&Version=2011-08-01"`

任何地方都没有空格，但`\n`在正确的地方有字符。把这个转换成`NSData`这样

`NSData *dataToSign = [unsignedString dataUsingEncoding:NSUTF8StringEncoding];`

然后打电话

`[AmazonAuthUtils HMACSign:dataToSign withKey:SECRET_KEY usingAlgorithm:kCCHmacAlgSHA256]`

这会将您的签名作为`NSString`. 您需要对此进行 URL 编码（即用 %0x 符号交换非法/不安全字符（即 '=' 转换为 '%3D'））

完成后，将其粘贴在您的请求中，希望您一切顺利！

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-04-29T09:21:09.027

查看我的亚马逊产品广告客户[https://github.com/m1entus/RWMAmazonProductAdvertisingManager](https://github.com/m1entus/RWMAmazonProductAdvertisingManager)

一些带有请求序列化的代码：

```
NSString * const RWMAmazonProductAdvertisingStandardRegion = @"webservices.amazon.com";
NSString * const RWMAmazonProductAdvertisingAWSAccessKey = @"AWSAccessKeyId";
NSString * const RWMAmazonProductAdvertisingTimestampKey = @"Timestamp";
NSString * const RWMAmazonProductAdvertisingSignatureKey = @"Signature";
NSString * const RWMAmazonProductAdvertisingVersionKey = @"Version";
NSString * const RWMAmazonProductAdvertisingCurrentVersion = @"2011-08-01";

NSData * RWMHMACSHA256EncodedDataFromStringWithKey(NSString *string, NSString *key) {
    NSData *data = [string dataUsingEncoding:NSASCIIStringEncoding];
    CCHmacContext context;
    const char *keyCString = [key cStringUsingEncoding:NSASCIIStringEncoding];

    CCHmacInit(&context, kCCHmacAlgSHA256, keyCString, strlen(keyCString));
    CCHmacUpdate(&context, [data bytes], [data length]);

    unsigned char digestRaw[CC_SHA256_DIGEST_LENGTH];
    NSUInteger digestLength = CC_SHA256_DIGEST_LENGTH;

    CCHmacFinal(&context, digestRaw);

    return [NSData dataWithBytes:digestRaw length:digestLength];
}

NSString * RWMISO8601FormatStringFromDate(NSDate *date) {
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setTimeZone:[NSTimeZone timeZoneWithName:@"GMT"]];
    [dateFormatter setDateFormat:@"YYYY-MM-dd'T'HH:mm:ss'Z'"];
    [dateFormatter setLocale:[[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"]];

    return [dateFormatter stringFromDate:date];
}

NSString * RWMBase64EncodedStringFromData(NSData *data) {

#if __IPHONE_OS_VERSION_MAX_ALLOWED >= 70000
    return [data base64EncodedStringWithOptions:0];
#else
    return [data base64Encoding];
#endif

}

//http://docs.aws.amazon.com/AWSECommerceService/latest/DG/rest-signature.html

- (NSURLRequest *)requestBySerializingRequest:(NSURLRequest *)request
                               withParameters:(id)parameters
                                        error:(NSError * __autoreleasing *)error
{
    NSParameterAssert(request);

    NSMutableURLRequest *mutableRequest = [request mutableCopy];

    if (self.accessKey && self.secret) {
        NSMutableDictionary *mutableParameters = [parameters mutableCopy];
        NSString *timestamp = RWMISO8601FormatStringFromDate([NSDate date]);

        if (!mutableParameters[RWMAmazonProductAdvertisingAWSAccessKey]) {
            [mutableParameters setObject:self.accessKey forKey:RWMAmazonProductAdvertisingAWSAccessKey];
        }
        mutableParameters[RWMAmazonProductAdvertisingVersionKey] = RWMAmazonProductAdvertisingCurrentVersion;
        mutableParameters[RWMAmazonProductAdvertisingTimestampKey] = timestamp;

        NSMutableArray *canonicalStringArray = [[NSMutableArray alloc] init];
        for (NSString *key in [[mutableParameters allKeys] sortedArrayUsingSelector:@selector(compare:)]) {
            id value = [mutableParameters objectForKey:key];
            [canonicalStringArray addObject:[NSString stringWithFormat:@"%@=%@", key, value]];
        }
        NSString *canonicalString = [canonicalStringArray componentsJoinedByString:@"&"];
        canonicalString = CFBridgingRelease(CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault,
                                                                                    (__bridge CFStringRef)canonicalString,
                                                                                    NULL,
                                                                                    CFSTR(":,"),
                                                                                    kCFStringEncodingUTF8));

        NSString *method = [request HTTPMethod];

        NSString *signature = [NSString stringWithFormat:@"%@\n%@\n%@\n%@",method,self.region,self.formatPath,canonicalString];

        NSData *encodedSignatureData = RWMHMACSHA256EncodedDataFromStringWithKey(signature,self.secret);
        NSString *encodedSignatureString = RWMBase64EncodedStringFromData(encodedSignatureData);

        encodedSignatureString = CFBridgingRelease(CFURLCreateStringByAddingPercentEscapes(kCFAllocatorDefault,
                                                                                           (__bridge CFStringRef)encodedSignatureString,
                                                                                           NULL,
                                                                                           CFSTR("+="),
                                                                                           kCFStringEncodingUTF8));

        canonicalString = [canonicalString stringByAppendingFormat:@"&%@=%@",RWMAmazonProductAdvertisingSignatureKey,encodedSignatureString];

        mutableRequest.URL = [NSURL URLWithString:[[mutableRequest.URL absoluteString] stringByAppendingFormat:mutableRequest.URL.query ? @"&%@" : @"?%@", canonicalString]];

    } else {
        if (error) {
            NSDictionary *userInfo = @{NSLocalizedDescriptionKey: NSLocalizedStringFromTable(@"Access Key and Secret Required", @"RWMAmazonProductAdvertisingManager", nil)};
            *error = [[NSError alloc] initWithDomain:RWMAmazonProductAdvertisingManagerErrorDomain code:NSURLErrorUserAuthenticationRequired userInfo:userInfo];
        }
    }

    return mutableRequest;

} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2017-06-24T23:27:32.440

感谢此页面上的所有答案。这对我有用（Swift 3.0）：

播客文件：

```
pod 'AWSAPIGateway', '~> 2.4.7' 
```

SWIFT代码

```
static let kAmazonAccessID = "BLAH BLAH BLAH"
static let kAmazonAccessSecretKey = "BLAH BLAH BLAH"

static let kAmazonAssociateTag = "BLAH BLAH BLAH"
private let timestampFormatter: DateFormatter

init() {
    timestampFormatter = DateFormatter()
    timestampFormatter.timeZone = TimeZone(identifier: "GMT")
    timestampFormatter.dateFormat = "YYYY-MM-dd'T'HH:mm:ss'Z'"
    timestampFormatter.locale = Locale(identifier: "en_US_POSIX")
}

private func signedParametersForParameters(parameters: [String: String]) -> [String: String] {
    let sortedKeys = Array(parameters.keys).sorted(by: <)

    let query = sortedKeys.map { String(format: "%@=%@", $0, parameters[$0] ?? "") }.joined(separator: "&")

    let stringToSign = "GET\nwebservices.amazon.com\n/onca/xml\n\(query)"

    let dataToSign = stringToSign.data(using: String.Encoding.utf8)
    let signature = AWSSignatureSignerUtility.hmacSign(dataToSign, withKey: AmazonAPI.kAmazonAccessSecretKey, usingAlgorithm: UInt32(kCCHmacAlgSHA256))!

    var signedParams = parameters;
    signedParams["Signature"] = urlEncode(signature)

    return signedParams
}

public func urlEncode(_ input: String) -> String {
    let allowedCharacterSet = (CharacterSet(charactersIn: "!*'();:@&=+$,/?%#[] ").inverted)

    if let escapedString = input.addingPercentEncoding(withAllowedCharacters: allowedCharacterSet) {
        return escapedString
    }

    return ""
}

func send(url: String) -> String {
    guard let url = URL(string: url) else {
        print("Error! Invalid URL!") //Do something else
        return ""
    }

    let request = URLRequest(url: url)
    let semaphore = DispatchSemaphore(value: 0)

    var data: Data? = nil

    URLSession.shared.dataTask(with: request) { (responseData, _, _) -> Void in
        data = responseData
        semaphore.signal()
    }.resume()

    semaphore.wait(timeout: .distantFuture)

    let reply = data.flatMap { String(data: $0, encoding: .utf8) } ?? ""
    return reply
} 
```

这是向亚马逊询问产品价格的功能：

```
public func getProductPrice(_ asin: AmazonStandardIdNumber) -> Double {

    let operationParams: [String: String] = [
        "Service": "AWSECommerceService",
        "Operation": "ItemLookup",
        "ResponseGroup": "Offers",
        "IdType": "ASIN",
        "ItemId": asin,
        "AWSAccessKeyId": urlEncode(AmazonAPI.kAmazonAccessID),
        "AssociateTag": urlEncode(AmazonAPI.kAmazonAssociateTag),
        "Timestamp": urlEncode(timestampFormatter.string(from: Date())),]

    let signedParams = signedParametersForParameters(parameters: operationParams)

    let query = signedParams.map { "\($0)=\($1)" }.joined(separator: "&")
    let url = "http://webservices.amazon.com/onca/xml?" + query

    let reply = send(url: url)

    // USE THE RESPONSE
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-02-21T10:06:53.933

P-double 职位缺少几个步骤。

在构造无符号字符串之前，您需要获取正确的时间戳值。

```
NSTimeZone *zone = [NSTimeZone defaultTimeZone];                //get the current application default time zone
NSInteger interval = [zone secondsFromGMTForDate:[NSDate date]];//sec Returns the time difference of the current application with the world standard time (Green Venice time)

NSDate *nowDate = [NSDate dateWithTimeIntervalSinceNow:interval];
NSDateFormatter * formatter = [[NSDateFormatter alloc] init];

[formatter setTimeZone:[NSTimeZone systemTimeZone]];// get current date/time
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setTimeZone:[NSTimeZone systemTimeZone]];

// display in 12HR/24HR (i.e. 11:25PM or 23:25) format according to User Settings
[dateFormatter setDateFormat:@"yyyy'-'MM'-'dd'T'HH':'mm':'ss'Z'"];
NSString *currentTime = [dateFormatter stringFromDate:nowDate];

NSString* encodedTime = (NSString *)CFBridgingRelease(CFURLCreateStringByAddingPercentEscapes(NULL, (__bridge CFStringRef) currentTime,NULL, CFSTR("!*'();:@&=+$,/?%#[]"),kCFStringEncodingUTF8));

NSString* unsignedString = [NSString stringWithFormat:@"GET\nwebservices.amazon.com\n/onca/xml\nAWSAccessKeyId=AKIAI443QEMWI6KW55QQ&AssociateTag=sajjmanz-20&Condition=All&IdType=ASIN&ItemId=3492264077&Operation=ItemLookup&ResponseGroup=Images%%2CItemAttributes%%2COffers&Service=AWSECommerceService&Timestamp=%@&Version=2011-08-01", encodedTime]; 
```

一旦日期被 url 友好编码，其余的步骤就像一个魅力。

最后，我还使用上面列出的 CFURLCreateStringByAddingPercentEscapes 对 AmazonAuthUtils HMACSign 消息调用生成的字符串进行编码。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-03-14T03:14:18.833

未经亚马逊明确书面同意，在 iOS 应用程序中使用亚马逊的产品广告 API 是不“合法的”（根据亚马逊自己的指南），我错了吗？

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-10-12T15:29:41.910

**斯威夫特 2.0**

这是一个将为 Swift 签名一组参数的函数。请注意，此代码需要安装`Alamofire`和`AWSCore`Cocoapods。您还需要添加`#import <CommonCrypto/CommonCrypto.h>`到您的 Objective-C 桥接头标头，否则`kCCHmacAlgSHA256`将找不到。

```
private func signedParametersForParameters(parameters: [String: String]) -> [String: String] {
    let sortedKeys = Array(parameters.keys).sort(<)

    var components: [(String, String)] = []
    for key in sortedKeys {
        components += ParameterEncoding.URLEncodedInURL.queryComponents(key, parameters[key]!)
    }

    let query = (components.map { "\($0)=\($1)" } as [String]).joinWithSeparator("&")

    let stringToSign = "GET\nwebservices.amazon.com\n/onca/xml\n\(query)"
    let dataToSign = stringToSign.dataUsingEncoding(NSUTF8StringEncoding)
    let signature = AWSSignatureSignerUtility.HMACSign(dataToSign, withKey: kAmazonAccessSecretKey, usingAlgorithm: UInt32(kCCHmacAlgSHA256))!

    let signedParams = parameters + ["Signature": signature]

    return signedParams
} 
```

它是这样称呼的：

```
let operationParams: [String: String] = ["Service": "AWSECommerceService", "Operation": "ItemLookup", "ItemId": "045242127733", "IdType": "UPC", "ResponseGroup": "Images,ItemAttributes", "SearchIndex": "All"]
let keyParams = ["AWSAccessKeyId": kAmazonAccessID, "AssociateTag": kAmazonAssociateTag, "Timestamp": timestampFormatter.stringFromDate(NSDate())]
let fullParams = operationParams + keyParams

let signedParams = signedParametersForParameters(fullParams)

Alamofire.request(.GET, "http://webservices.amazon.com/onca/xml", parameters: signedParams).responseString { (response) in
    print("Success: \(response.result.isSuccess)")
    print("Response String: \(response.result.value)")
} 
```

最后，timestampFormatter 声明如下：

```
private let timestampFormatter: NSDateFormatter

init() {
    timestampFormatter = NSDateFormatter()
    timestampFormatter.dateFormat = AWSDateISO8601DateFormat3
    timestampFormatter.timeZone = NSTimeZone(name: "GMT")
    timestampFormatter.locale = NSLocale(localeIdentifier: "en_US_POSIX")
} 
```

您可以使用/修改以满足您的需要，但所有必要的东西都应该在那里。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-01-22T13:01:45.220

除了使用现代 OS X 中已弃用的 CommonCrypto，您还可以使用 SecTransforms：

```
CFErrorRef error = NULL;

SecTransformRef digestRef = SecDigestTransformCreate(kSecDigestHMACSHA2, 256, &error);
SecTransformSetAttribute(digestRef, kSecTransformInputAttributeName, (__bridge CFDataRef)self, &error);
SecTransformSetAttribute(digestRef, kSecDigestHMACKeyAttribute, (__bridge CFDataRef)key, &error);

CFDataRef resultData = SecTransformExecute(digestRef, &error);
NSData* hashData = (__bridge NSData*)resultData;

CFRelease(digestRef); 
```

# node.js - 如何在nodejs中读取以utf-16编码的文件？

> ID：10940273
> 
> 赞同：28
> 
> 时间：2012-06-07T21:39:37.983
> 
> 标签：node.js, utf-16

我必须使用 nodejs 读取以 UTF-16 编码的文件（以块的形式，因为它非常大）。文件中的数据将进入 mongodb，因此我需要将其转换为 utf-8。从谷歌搜索来看，这似乎是 Node 不支持的，我将不得不自己从缓冲区转换原始数据。但我也认为应该有更好的方法，我只是没有找到它。有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2014-10-31T14:15:07.513

用or替换`utf8`读取文本文件时的正常值：`utf16le``ucs2`

```
var fileContents = fs.readFileSync('import.csv','utf16le') 
```

或者：

```
var fileContents = fs.readFileSync('import.csv','ucs2') 
```

此外，对于任何在互联网上搜索的人：任何人在解析的文件中出现额外的 �（问号）字符，这可能是您的问题的原因。以 UTF16/UCS2 格式读取文件，多余的字符将消失。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-06-07T23:41:16.573

Node 支持 UCS-2，即 JavaScript 支持的 UTF-16 子集。尝试使用它。

请参阅此[拉取请求](https://github.com/joyent/node/pull/644)。

# ruby - rubyzip/zippy - 就地解压

> ID：10940276
> 
> 赞同：1
> 
> 时间：2012-06-07T21:39:49.093
> 
> 标签：ruby, ruby-on-rails-3, zip, rubyzip

我认为很简单，但似乎找不到有用的东西。使用 ruby​​zip 或 zippy。

我需要将“path/to/my/file.zip”提取到“path/to/my/file”

两种宝石的文档都非常少。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-07T21:53:48.173

为什么不直接调用**gunzip**过程？

```
system("gunzip -S '.zip' file.jpeg.zip") 
```

无需使用/安装任何 gem。

# django - 缩略图标签失败：（sorl-thumbnail 11.12）

> ID：10940281
> 
> 赞同：1
> 
> 时间：2012-06-07T21:39:58.003
> 
> 标签：django, sorl-thumbnail, sentry

我在生产环境中不断收到来自 sorl-thumbnail 的奇怪错误（使用 Sentry 作为记录器）。他们都只是说`Thumbnail tag failed:`（这非常有帮助），而且他们都来自三个模块之一。

奇怪的是，它实际上并没有影响网站。页面加载正常，甚至缩略图加载正常。这真的只是一个问题，因为我厌倦了看到错误出现在我的 Sentry 仪表板的列表中。但是，我无法弄清楚为什么会产生错误，或者如何修复它们。我开始怀疑它们是否不仅仅是标准行为与过于冗长的日志记录混合在一起，因为就像我说的那样，对网站没有明显的影响。

也许这里的某个人可以更清楚地了解它，所以这里是堆栈跟踪。

**更新#1**

对于来自 的那个`sorl.thumbnail.engines.pil_engine._orientation`，我找到了以下可能的候选人：[http ://blog.yawd.eu/2012/fix-sorlthumbnail-engines-pil-orientation-error/](http://blog.yawd.eu/2012/fix-sorlthumbnail-engines-pil-orientation-error/)

## 来自`sorl.thumbnail.images.deserialize_image_file`：

```
Thumbnail tag failed:

Stacktrace (most recent call last):

  File "sorl/thumbnail/templatetags/thumbnail.py", line 49, in render
    logger.error('Thumbnail tag failed:', exc_info=sys.exc_info())

  File "sorl/thumbnail/templatetags/thumbnail.py", line 97, in _render
    file_, geometry, **options

  File "sorl/thumbnail/base.py", line 65, in get_thumbnail
    default.kvstore.get_or_set(source)

  File "sorl/thumbnail/kvstores/base.py", line 46, in get_or_set
    cached = self.get(image_file)

  File "sorl/thumbnail/kvstores/base.py", line 25, in get
    return self._get(image_file.key)

  File "sorl/thumbnail/kvstores/base.py", line 127, in _get
    return deserialize_image_file(value)

  File "sorl/thumbnail/images.py", line 31, in deserialize_image_file
    data = simplejson.loads(s)

  File "simplejson/__init__.py", line 428, in loads
    return _default_decoder.decode(s)

  File "simplejson/decoder.py", line 402, in decode
    obj, end = self.raw_decode(s, idx=_w(s, 0).end())

  File "simplejson/decoder.py", line 420, in raw_decode
    raise JSONDecodeError("No JSON object could be decoded", s, idx) 
```

## 来自`sorl.thumbnail.images.read`：

```
Thumbnail tag failed:

Stacktrace (most recent call last):

  File "sorl/thumbnail/templatetags/thumbnail.py", line 49, in render
    logger.error('Thumbnail tag failed:', exc_info=sys.exc_info())

  File "sorl/thumbnail/templatetags/thumbnail.py", line 97, in _render
    file_, geometry, **options

  File "sorl/thumbnail/base.py", line 56, in get_thumbnail
    source_image = default.engine.get_image(source)

  File "sorl/thumbnail/engines/pil_engine.py", line 12, in get_image
    buf = StringIO(source.read())

  File "sorl/thumbnail/images.py", line 121, in read
    return self.storage.open(self.name).read()

  File "django/core/files/storage.py", line 33, in open
    file = self._open(name, mode)

  File "django/core/files/storage.py", line 159, in _open
    return File(open(self.path(name), mode)) 
```

## 来自`sorl.thumbnail.engines.pil_engine._orientation`：

```
Thumbnail tag failed:

Stacktrace (most recent call last):

  File "sorl/thumbnail/templatetags/thumbnail.py", line 49, in render
    logger.error('Thumbnail tag failed:', exc_info=sys.exc_info())

  File "sorl/thumbnail/templatetags/thumbnail.py", line 97, in _render
    file_, geometry, **options

  File "sorl/thumbnail/base.py", line 61, in get_thumbnail
    thumbnail)

  File "sorl/thumbnail/base.py", line 86, in _create_thumbnail
    image = default.engine.create(source_image, geometry, options)

  File "sorl/thumbnail/engines/base.py", line 15, in create
    image = self.orientation(image, geometry, options)

  File "sorl/thumbnail/engines/base.py", line 26, in orientation
    return self._orientation(image)

  File "sorl/thumbnail/engines/pil_engine.py", line 31, in _orientation
    exif = None

  File "PIL/JpegImagePlugin.py", line 381, in _getexif
    info.load(file)

  File "PIL/TiffImagePlugin.py", line 382, in load
    raise IOError, "not enough data" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-12T16:16:32.597

我在本地工作时遇到了这个问题。在我运行管理命令后它似乎停止了：

```
python manage.py thumbnail clear 
```

其次是

```
python manage.py thumbnail cleanup 
```

# php - MYSQL读写不同的表

> ID：10940282
> 
> 赞同：0
> 
> 时间：2012-06-07T21:40:01.480
> 
> 标签：php, mysql, forms

我有一个将表单数据通过电子邮件发送到电子邮件地址的表单。我也想将此信息存储到数据库中。我遇到的问题是我从一个表 online_rental_db 中提取信息，以便可以将其中的信息发送给我们。我还想将表单信息存储到另一个表 online_rental_request 中。

```
<?php

$rentID = $_POST['current_id'];

$db=mysql_connect ("localhost","test","test") or die(mysql_error());
mysql_select_db("rentals");

$table="online_rental_db";
$sql = "SELECT * FROM $table WHERE ID=$rentID";
$query = mysql_query($sql) or die(mysql_error());
$rentals = mysql_fetch_assoc($query);
$description = ucwords(strtolower($rentals['Description']));
$image = $rentals['Image'];
$download = $rentals['PDF'];
$bytes =  filesize($rentals['PDF']);
$ID = $rentals['ID'];
$CTGID = $rentals['CTGID'];
$category = $rentals['Category'];
$model = $rentals['model']; 
```

我试过在 $sql 上使用来做

```
$sql = "SELECT * FROM $table WHERE ID=$rentID INSERT INTO online_rental_request (name, email, id, description, model, category) VALUES ('$_POST[name]','$_POST[email]','$rentID','$description','$model','$category')"; 
```

但它给了我一个sql错误！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T22:18:53.680

怎么样

```
$sql = "INSERT INTO online_rental_request (name, email, id, description, model, category) SELECT '$_POST[name]','$_POST[email]', id, description, model, category  FROM $table WHERE ID=$rentID "; 
```

所以它的格式是：

```
INSERT INTO online_rental_request (name, email, id, description, model, category) 
SELECT 
   '$_POST[name]',
   '$_POST[email]', 
   id, 
   description, 
   model, 
   category 
FROM $table 
WHERE ID=$rentID 
```

这样您就可以指定名称和电子邮件，但可以插入信息`$table`并将其插入`online_rental_request`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T22:27:41.583

如果您打算直接从 online_rental_db 表插入到 online_rental_request 表中，您应该执行以下操作：

```
$name = mysql_escape_string($_POST['name']);
$email = mysql_escape_string($_POST['email']);
$sql = "INSERT INTO online_rental_request (name, email, id, description, model, category) SELECT '$name', '$email', id, description, model, category FROM $table WHERE ID=$rentID"; 
```

顺便说一句，您不应该忘记转义用户提交的值。你应该做这个：

```
$rentID = mysql_escape_string($_POST['current_id']); 
```

或者，更好的 $rentID = (int)$_POST['current_id'];

# css - 有没有办法设置字体以应用于整个电子邮件？

> ID：10940284
> 
> 赞同：1
> 
> 时间：2012-06-07T21:40:04.383
> 
> 标签：css, html-email

我一直在尝试将字体应用于整个电子邮件（由表格组成）。

将字体系列放在 <body> 标记的“样式”中不起作用，将其放在 <table> 或 <tbody> 标记中也不起作用，在表格周围放置 <font> 标记也不起作用。

做这个的最好方式是什么？我需要在每个 <td> 中使用 font-family 内联样式，还是在所有内容周围使用 <font> 标记？真的没有办法在电子邮件范围内声明字体吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-02T12:05:25.653

您需要在每个`<td>`. 许多电子邮件客户端会自动重置`<td>`.

所以像`<td style='font-family: Arial'>`.

您也可以在标题中执行此操作，但有些客户会忽略这一点（看看您的前景 2013-2016）Body{ font-family: Arial !important }

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T21:46:23.847

在您的 html/电子邮件中添加一些样式

```
<style type="text/css">
    td {font...;}
</style> 
```

或通用使用 * 而不是 td

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T21:46:30.790

您应该能够将 应用于`font-family`table 元素，并且所有`td`元素都将继承该属性，如下所示：

```
<table style="font-family: Courier">
<tr><td>Foo</td></tr>
<tr><td>Bar</td></tr>
</table>​ 
```

[**演示**](http://jsfiddle.net/buaLR/5/)

`td`如果任何指定它自己的`font-family`将覆盖继承的值，这当然不起作用。

# imagemagick - imagemagick -colorspace Gray 将图像一分为三

> ID：10940286
> 
> 赞同：0
> 
> 时间：2012-06-07T21:40:13.917
> 
> 标签：imagemagick

我在 AMI EC2 上运行 ImageMagick 6.7.7-6。我在命令行上执行的 shell 脚本中执行以下命令：

```
convert orig.jpg -colorspace Gray final.jpg 
```

或者

```
convert orig.jpg -type Grayscale final.jpg 
```

预期的结果是将图像变成灰度图像。我得到的结果完全不同。它被分成三张图像，里面还有少量的颜色？！？

原始文件.jpg：

![在此处输入图像描述](../Images/baf020dce8cbed116cfb64dfc523c5f0.png)

最终.jpg：

![在此处输入图像描述](../Images/9c2173be2496ce570748fde10226bfa6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T19:27:40.390

我无法解释这里发生了什么。您的命令都适用于我和我在 Mac OS X 上的 ImageMagick 版本（6.7.8-0 2012-07-12 Q16）。

这就是为什么我认为您在您的 IM 版本中遇到了错误。

你的 IM 版本是什么？

# javascript - HTML Mobile - 强制软键盘隐藏

> ID：10940287
> 
> 赞同：58
> 
> 时间：2012-06-07T21:40:22.323
> 
> 标签：javascript, html, ipad, tablet

我正在为一家优惠券公司开发前端网站，我有一个页面，用户只需要输入电话号码和花费的美元。我们想出了一个有趣的 Javascript 内置屏幕键盘，它易于使用且速度快。但是，我正在寻找一种解决方案来阻止软键盘在用户集中注意力并在这些字段中输入文本/数字时弹出。

我知道 HTML5 提出的“号码/电话/电子邮件”类型属性。但是，冒着听起来很疯狂的风险，我真的只想使用我的屏幕键盘。

注意：该网站主要针对平板电脑。

谢谢。

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2014-03-19T20:43:16.780

Scott S 的回答非常有效。

我正在为移动设备编写一个基于网络的电话拨号盘，每次用户在键盘上按下一个数字（由表格中的 td span 元素组成）时，都会弹出软键盘。我还希望用户不能点击正在拨打的号码的输入框。这实际上一枪解决了这两个问题。使用了以下内容：

```
<input type="text" id="phone-number" onfocus="blur();" /> 
```

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2012-06-07T22:20:33.320

由于软键盘是操作系统的一部分，通常情况下，您将无法隐藏它——同样，在 iOS 上，隐藏键盘会使元素失去焦点。

但是，如果您`onFocus`在输入上使用该属性，然后`blur()`立即进行文本输入，则键盘将自行隐藏，并且该`onFocus`事件可以设置一个变量来定义哪个文本输入是最后聚焦的。

然后更改您的页面键盘以仅更改最后聚焦的（使用变量检查）文本输入，而不是模拟按键。

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2016-09-08T09:19:00.527

对于更多的读者/搜索者：

正如[Rene Pot在](https://stackoverflow.com/users/249710/rene-pot)[这个话题](https://stackoverflow.com/a/7610923)上指出的那样，

> 通过将属性`readonly`（或`readonly="readonly"`）添加到输入字段，您应该可以防止任何人在其中输入任何内容，但仍然可以在其上启动点击事件。

使用这种方法，您可以避免弹出“软”键盘并仍然启动点击事件/通过任何屏幕键盘填充输入。

该解决方案也适用于通常已经实现控制的日期时间选择器。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2021-06-09T16:25:19.443

我很困惑为什么没有人提出这个......也许我误解了这个问题但是，

```
<input inputmode="none" /> 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-05-09T16:29:07.327

这些答案还不错，但它们的局限性在于它们实际上不允许您输入数据。我们有一个类似的问题，我们使用条形码阅读器将数据输入到字段中，但我们想抑制键盘。

这是我放在一起的，效果很好：

[https://codepen.io/bobjase/pen/QrQQvd/](https://codepen.io/bobjase/pen/QrQQvd/)

```
<!-- must be a select box with no children to suppress the keyboard -->
input: <select id="hiddenField" /> 
<span id="fakecursor" />

<input type="text" readonly="readonly" id="visibleField" />
<div id="cursorMeasuringDiv" />

#hiddenField {
  height:17px; 
  width:1px;
  position:absolute;
  margin-left:3px;
  margin-top:2px;
  border:none;
  border-width:0px 0px 0px 1px;
}

#cursorMeasuringDiv {
  position:absolute;
  visibility:hidden;
  margin:0px;
  padding:0px;
}

#hiddenField:focus {
  border:1px solid gray;  
  border-width:0px 0px 0px 1px;
  outline:none;
  animation-name: cursor;
  animation-duration: 1s;
  animation-iteration-count: infinite;
}

@keyframes cursor {
    from {opacity:0;}
    to {opacity:1;}
}

// whenever the visible field gets focused
$("#visibleField").bind("focus", function(e) {
  // silently shift the focus to the hidden select box
  $("#hiddenField").focus();
  $("#cursorMeasuringDiv").css("font", $("#visibleField").css("font"));
});

// whenever the user types on his keyboard in the select box
// which is natively supported for jumping to an <option>
$("#hiddenField").bind("keypress",function(e) {
  // get the current value of the readonly field
  var currentValue = $("#visibleField").val();

  // and append the key the user pressed into that field
  $("#visibleField").val(currentValue + e.key);
  $("#cursorMeasuringDiv").text(currentValue + e.key);

  // measure the width of the cursor offset
  var offset = 3;
  var textWidth = $("#cursorMeasuringDiv").width();
  $("#hiddenField").css("marginLeft",Math.min(offset+textWidth,$("#visibleField").width()));

}); 
```

当您单击该`<input>`框时，它会模拟该框中的光标，但实际上会将焦点放在一个空`<select>`框上。选择框自然允许按键支持跳转到列表中的元素，因此只需将按键重新路由到原始输入并偏移模拟光标即可。

这不适用于退格、删除等……但我们不需要这些。您可能可以使用 jQuery 的触发器将键盘事件直接发送到某个地方的另一个输入框，但我们不需要为此烦恼，所以我没有这样做。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-10-16T09:04:48.160

示例我是如何做到的

```
var MaxLength = 8;
    $(document).ready(function () {
        $('#MyTB').keyup(function () {
            if ($(this).val().length >= MaxLength) {
               $('#MyTB').blur();
             //  $('#MyTB2').focus();
         }
          }); }); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-08-27T13:32:37.950

我正在使用 Android 4.0.3 与 Honeywell Dolphin 70e 上的软键盘作斗争。我不需要键盘，因为输入来自内置条形码阅读器通过“scanwedge”设置为生成关键事件。

我发现早期答案中描述的技巧是：

```
input.blur();
input.focus(); 
```

有效，但只有一次，就在页面初始化时。它将焦点放在输入元素上，而不显示软键盘。它在以后不起作用，例如在条形码后缀中的 TAB 字符导致输入元素上的 onblur 或 oninput 事件之后。

要读取和处理大量条形码，您可以使用与 TAB (9) 不同的后缀，例如 8，浏览器不会解释它。在这种情况`input.keydown`下，用于`e.keyCode == 8`检测要处理的完整条码。

这样，您在输入元素中使用焦点初始化页面，隐藏键盘，所有条形码都转到输入元素，并且焦点永远不会离开该元素。当然，页面不能有其他输入元素（如按钮），因为那样您将无法返回隐藏软键盘的条形码输入元素。

也许在单击按钮后重新加载页面可能能够隐藏键盘。因此，使用 ajax 快速处理条形码，并使用带有 PostBack 的常规 asp.net 按钮来处理按钮单击并重新加载页面以将焦点返回到隐藏键盘的条形码输入。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-06-17T07:13:52.370

我面临同样的问题，即使焦点在文本框中，我也可以通过添加一个 css 属性来隐藏 android 键盘

```
<input type="text" style="pointer-events:none" /> 
```

它工作正常......

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-08-14T18:53:16.270

我无法使用提供的一些建议。

就我而言，我使用 Google Chrome 来显示 Oracle APEX 应用程序。有一些非常具体的输入字段允许您开始输入值，并且随着您的输入变得更加具体，值列表将开始显示和减少。从可用选项列表中选择项目后，焦点仍将位于输入字段上。

我发现我的解决方案很容易通过引发如下自定义错误的自定义事件来完成：

```
throw "throwing a custom error exits input and hides keyboard"; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-06-09T11:57:53.037

这可能会帮助其他只想禁用软键盘的人。我设法不是通过 javascript 而是通过安装一个名为[Null Keyboard的新键盘布局来禁用软键盘](https://play.google.com/store/apps/details?id=com.wparam.nullkeyboard&hl=de&gl=US)

# android - 我应该以多快的速度刷新应用中的广告？

> ID：10940288
> 
> 赞同：-1
> 
> 时间：2012-06-07T21:40:48.423
> 
> 标签：android, admob, ads

我为 android 构建了一个免费应用程序，并且我正在使用 AdMob 来投放我的广告，有人对我应该多快刷新广告有任何建议吗？它是一个记分员，所以人们一次使用它 10-20 分钟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T21:49:56.773

最大允许频率可帮助您确定有多少人在使用该应用程序，并增加您展示某些人想要点击的内容的机会。

# regex - OCLinEcore 和 Regex 创建有效的 IPv4 字符串

> ID：10940289
> 
> 赞同：2
> 
> 时间：2012-06-07T21:40:56.020
> 
> 标签：regex, ipv4, ocl, ecore

我有一个 Ecore 模型，我正在尝试添加一些 OCL 约束。

当我尝试创建一个有效 IPv4 形式的属性（字符串）时，我的问题就出现了。我想我应该使用正则表达式，但我完全不知道如何在 OCLinEcore 上使用正则表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-25T14:37:02.070

从 Eclipse Juno 开始，您可以在 OCL 中使用正则表达式。调用它的函数是matches(regex)，就像在Java中一样。

```
context Packet
inv ValidIPv4 : ip.matches('\b([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\b') 
```

资料来源：[http ://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.ocl.doc%2Fhelp%2FCompleteOCLTutorial.html](http://help.eclipse.org/juno/index.jsp?topic=%2Forg.eclipse.ocl.doc%2Fhelp%2FCompleteOCLTutorial.html)

如果您有以前版本的 Eclipse，那么我建议在您的 Ecore 元素上添加 Java 约束，然后通过生成的 Java 模板代码验证您的元素。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T21:43:58.417

至于正则表达式部分：

```
\b([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})\b 
```

匹配 0.0.0.0 到 999.999.999.999 如果您知道数据不包含无效 IP 地址，请使用此快速简单的正则表达式。4 个数字中的每一个都存储在一个捕获组中，因此您可以访问它们以进行进一步处理。

# jquery - jquery - 放置 youtube api 脚本的位置

> ID：10940290
> 
> 赞同：0
> 
> 时间：2012-06-07T21:40:56.287
> 
> 标签：jquery, youtube-api

我有 API youtube 功能，试过了，它在 JsFiddle 上工作正常

但是后来我尝试放入 jquery 块

```
<script type="text/javascript"> 
    $(document).ready(function(){
        // youtube API script here but doesn' t works
    });
</script> 
```

但它不像以前那样有效，我做错了什么吗？我将如何放置 API 脚本以使其工作？

[这是我来自 JsFiddle 的实际代码](http://jsfiddle.net/dtjmsy/VSa9k/14/)

谢谢

# python - Django Johnny-Cache TypeError

> ID：10940291
> 
> 赞同：0
> 
> 时间：2012-06-07T21:40:57.890
> 
> 标签：python, django, caching, memcached, django-cache

我无法弄清楚这一点，并且在谷歌搜索后找不到解决方案。我正在为我的 Django 应用程序实现缓存。

我采取的步骤是：

1.  brew install libmemcache，它也安装了 memcache

2.  点安装 pylibmc

3.  pip install -e hg+https://jmoiron@bitbucket.org/jmoiron/johnny-cache，安装没有错误。

4.  将此添加到我的 settings.py

    ```
    CACHES = {
        'default': {
            'BACKEND': 'johnny.backends.memcached.PyLibMCCache',
            'LOCATION': ['127.0.0.1:11211'],
            'JOHNNY_CACHE': True,
        }
    }
    JOHNNY_MIDDLEWARE_KEY_PREFIX = 'product'

    MIDDLEWARE_CLASSES = (
        'johnny.middleware.LocalStoreClearMiddleware',
        'johnny.middleware.QueryCacheMiddleware',
        ...
    } 
    ```

现在，每当我浏览时，在控制台中我都可以看到存储在 memcache 中的东西，但是一旦 memcached get 出现，`Caught TypeError while rendering: cannot concatenate 'str' and 'tuple' objects`就会被抛出。不管正在运行什么命令，错误都在`/env/pfenv/lib/python2.7/site-packages/django/db/backends/mysql/compiler.py in resolve_columns, line 12`.

还有另一个关于此的 SO 问题，但选择的答案是仅使用项目的不同分支，该分支尚未更新，其更改实际上几乎立即合并到主存储桶中。pypi 版本（我也尝试过）来自他们声称破坏了事情的提交之前，并且那个版本给了我同样的错误。这个项目每两周左右更新一次，我想从他们发布的其他错误修复中受益。

这应该很容易实现，我在这里做错了什么？

## 更新

提交了一个[错误报告](https://bitbucket.org/jmoiron/johnny-cache/issue/66/typeerror-on-get)，其中还包括堆栈跟踪，以防万一这不是我做过的事情。

## 更新 2

实际上回去刷新了缓存，关闭了 johnny-cache，并尝试了使用 pylibmc 的 vanilla django 缓存设置。不工作，每一页都出现同样的错误。用 python-memcache 尝试过，同样的事情。不知道在这里寻找什么。完全关闭缓存，该网站工作得很好。**有点需要缓存。**

## 更新 3

显然，这个相同的来源由一位同事检查并以相同的方式安装。我不知道有什么区别或者还有什么可以解决的。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-15T16:50:51.383

这实际上从未在我的机器上修复过，仍然不确定问题是什么。但它可以在我们的部署服务器和同事开发环境中正常工作。我只是要留下答案，因为我的设置有问题，我假设数据库有问题，因为我遇到了与此相关的其他随机问题。

# gcc - gcc-4.7 配置安装后缀

> ID：10940294
> 
> 赞同：2
> 
> 时间：2012-06-07T21:41:32.917
> 
> 标签：gcc, compiler-construction, configuration

我在构建 gcc 时遇到了一些问题，安装后我**需要**让 gcc 复制所有带有后缀的内容。所有的可执行文件最后都必须有 -4.7，这样我的默认编译器就不会被搞砸了。有我可以使用的配置变量吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T18:08:35.630

GCC 的配置脚本有一个选项：`--program-suffix`，所以运行类似：

```
./configure --program-suffix="-4.7" 
```

另请参阅`./configure -h`。

# python - 在 SLES 11 上安装 Python 2.7

> ID：10940296
> 
> 赞同：15
> 
> 时间：2012-06-07T21:41:53.103
> 
> 标签：python, python-2.7, suse

有没有人能够在 SLES 11 SP1 上成功安装 Python 2.7？如果是这样，怎么做？我尝试了几种安装方法，如下所示：

1.  尝试从源代码构建——结果证明这非常乏味，超出了我的耐心和技能水平。
2.  尝试使用 PythonBrew，但它放弃了错误。
3.  尝试从 OpenSuse 11 存储库安装 RPM，但由于依赖性问题而无法完成。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-07-07T02:07:31.837

从源代码构建是最合适的答案。您的耐心将带来可观的回报。

像下面这样的脚本就足够了（[信用](https://github.com/bngsudheer/bangadmin/blob/master/linux/centos/6/x86_64/build-python-27.sh)）：

```
#!/bin/bash
# Install Python 2.7.12 alternatively
zypper install -t pattern sdk_c_c++ -y
zypper install readline-devel openssl-devel gmp-devel ncurses-devel gdbm-devel zlib-devel expat-devel libGL-devel tk tix gcc-c++ libX11-devel glibc-devel bzip2 tar tcl-devel tk-devel pkgconfig tix-devel bzip2-devel sqlite-devel autoconf db4-devel libffi-devel valgrind-devel -y

mkdir tmp
cd tmp
wget https://www.python.org/ftp/python/2.7.12/Python-2.7.12.tgz
tar xvfz Python-2.7.12.tgz
cd Python-2.7.12
./configure --prefix=/opt/python2.7 --enable-shared
make
make altinstall
echo "/opt/python2.7/lib" >> /etc/ld.so.conf.d/opt-python2.7.conf
ldconfig
cd ..
cd ..
rm -rf tmp 
```

...如果您遇到有关证书链的错误并且您确信您的流量没有被拦截，您可以使用`--no-check-certificate`命令行选项`wget`. 这可能是必要的，因为 SLES11 已经足够老，以至于它的`openssl`库可能不支持`python.org`的网络服务器所期望的 TLS 功能。如果您使用该选项，请对照[https://www.python.org/downloads/release/python-2712/](https://www.python.org/downloads/release/python-2712/)检查 tarball 的签名（必要时使用非 SLES11 浏览器）。

# knockout.js - 淘汰赛计算总和

> ID：10940302
> 
> 赞同：7
> 
> 时间：2012-06-07T21:43:23.060
> 
> 标签：knockout.js, knockout-mapping-plugin

我从 WCF 接收数据并将其绑定到表。我在这个论坛上得到了帮助，添加了一些计算字段，一切都很完美。我想在此表的页脚添加总计。我的页面的一个简单版本可以在[http://jsfiddle.net/qeUHd/3/](http://jsfiddle.net/qeUHd/3/)看到。基本上我想学习如何将一个字段添加到我的 ViewModel 中，这是我的示例“金额”中另一个字段的总和的结果。任何帮助将不胜感激。 [http://jsfiddle.net/qeUHd/3/](http://jsfiddle.net/qeUHd/3/)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-07T22:15:33.893

在您的小提琴中，您将数据集映射到 self.model，因此 self.model 是[observableArray](http://knockoutjs.com/documentation/plugins-mapping.html)。既然是这种情况，我只需要把一个[计算值](http://knockoutjs.com/documentation/computedObservables.html)放在一起就可以得到你的总数。

[http://jsfiddle.net/qeUHd/5/](http://jsfiddle.net/qeUHd/5/)

```
self.total = ko.computed(function(){
    var total = 0;
    for(var p = 0; p < self.model().length; ++p)
    {
        total += self.model()[p].Amount();
    }
    return total;
}); 
```

然后确保绑定到它。

```
<td data-bind="text: total"> 
```

你做事有点落后，但我认为这是由于你接收数据的方式，所以我处理了它并继续前进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-10T12:42:36.267

虽然我通常会建议并支持将这些类型的计算字段放入视图模型中（因为它们通常属于它们所在的位置），但有时您在处理数据时很难添加额外的计算属性。例如，如果您在视图中对数据进行分组。在这种情况下，您仍然可以显示总计，但将计算移至视图：

```
<td data-bind="text: $data.reduce(function(x,y) { return x + y.Amount(); }, 0)"></td> 
```

# javascript - 是否可以通过 javascript 一键触发两个或更多事件？

> ID：10940304
> 
> 赞同：0
> 
> 时间：2012-06-07T21:43:36.630
> 
> 标签：javascript, jquery, html, triggers

我目前正在为网站访问者制作一个临时下载页面。

该页面包含一个表格，访问者填写表格后，网站会将他们带到pdf下载页面。

在下载页面，有一些pdf文件的下载链接（我只是用了一个标签而已）。但是，我想对这些链接进行 onclick 事件，一旦它们被点击，页面将自动刷新或重定向到其他页面。

```
<a href="/file.pdf" onClick="window.location.reload()">The File</a> 
```

我也尝试过jquery方式。

```
<a href="/file.pdf" id="FileDownload">The File</a>
<script>
   $("#FileDownload").click(function(){
         location.reload();
   });
</script> 
```

但是所有这些都不起作用。各位高手有什么好的想法吗，非常感谢。

PS如果我想在文件开始下载后添加倒计时，然后在倒计时完成时重新加载页面。

看起来已经问了几个问题......提前非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T21:56:29.403

这有效：

[http://jsbin.com/imikit/5](http://jsbin.com/imikit/5)

超时时间必须设置为大于提供文件的服务器的响应时间，否则 javascript 不会触发。因此，将其设置为较高的值。

```
<a href="http://ipv4.download.thinkbroadband.com/1GB.zip" id="download">The File</a>

$('#download').click(function() {
  setTimeout(function() {
    window.location = 'http://www.google.com/';
  }, 1000);
}); 
```

或者

```
<a href="http://ipv4.download.thinkbroadband.com/1GB.zip" id="download" target="_blank">The File</a>

$('#download').click(function() {
  window.location = 'http://www.google.com/';
}); 
```

一旦下载开始，大多数浏览器都会关闭新打开的窗口。

* * *

Lighttpd 2 的[mod_upload](http://demo.lighttpd.net/progress/)可能值得一看。不幸的是，目前还没有稳定版本的 Lighttpd 2。

* * *

您可以尝试将 cookie 与下载一起发送，然后使用 javascript 检测它。这将在发送标头之后设置，或者在发送正文之后设置。（测试一下）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T21:47:57.703

您有两个`onClick`参数选项：

1.  在可以有一个的每一行之间添加分号

2.  编写一个函数来完成所有任务，并`onClick`调用该方法。

其他人可能会在 jQuery 方面提供帮助，但我认为应该是类似的。

所有这些方法都会触发尽可能多的事件。

对于倒计时，请尝试该`setTimeout()`功能。

编辑：看到评论后，尝试`<a href="file.pdf" target="_blank" onClick="window.location.reload()">Click Here</a>`. 这将在弹出窗口中打开链接并重新加载当前链接 - 您可能需要 setTimeout() 进行重新加载，以便在 reload() 事件触发之前打开链接。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T21:54:08.330

您可以做的一件事是在新窗口中打开下载，然后重定向页面。

```
<a href="/file.pdf" id="FileDownload">The File</a>
<script>
   $("#FileDownload").click(function(e){
       e.preventDefault();
       window.open(this.href);
       location.reload();
   });
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T21:58:54.240

当您单击链接时，默认操作是跟随它，添加 onClick 代码不会改变它。

尝试： `onClick="windows.location.reload();return false;"`

这将解决第一部分。

至于第二部分（下载完成时的计数器/重定向）使用这个插件[http://johnculviner.com/post/2012/03/22/Ajax-like-feature-rich-file-downloads-with-jQuery-File- Download.aspx](http://johnculviner.com/post/2012/03/22/Ajax-like-feature-rich-file-downloads-with-jQuery-File-Download.aspx)下载文件并使用 successCallback 进行重定向：

```
$.fileDownload('/file.pdf', {
    successCallback: function () { 
         windows.location.reload();
    }
}); 
```

# android - Android Listview Listitem 状态颜色

> ID：10940308
> 
> 赞同：2
> 
> 时间：2012-06-07T21:43:42.913
> 
> 标签：android, android-listview, drawable, background-color, listitem

我有以下问题：我为 Android 按钮制作了一个自定义状态选择器。他们按预期工作。当我希望将相同的状态应用于 ListView 项目行时，问题就开始了。

所以我在适配器中设置了样式，现在我发现列表框视图项上的相同状态看起来不同。它更像是默认样式和我要设置的颜色之间的混合。当我长按该项目或释放该项目时，我注意到它首先消失为默认颜色（蓝色），然后变为透明。

我想我确实错过了一些州/州组合，但我不知道是哪个。我尝试了很多，还有来自 StackOverflow 的示例，但没有任何效果。希望这里有人遇到同样的挑战并且有正确的覆盖。下面是我的可绘制选择器。

提前致谢！

**XML:**

```
<selector xmlns:android="http://schemas.android.com/apk/res/android"
android:exitFadeDuration="@android:integer/config_mediumAnimTime"
android:enterFadeDuration="@android:integer/config_shortAnimTime"
> 

    <item   android:state_window_focused="false" 
        android:state_enabled="true"
        android:drawable="@android:color/transparent" />

<item   android:state_window_focused="false" 
        android:state_enabled="false"
        android:drawable="@android:color/transparent" />

<item   android:state_window_focused="false" 
        android:state_focused="true" 
        android:drawable="@android:color/transparent" />

<item   android:state_pressed="true"
        android:drawable="@android:color/holo_green_light" />

<item   android:state_focused="true"
        android:state_pressed="false"
        android:state_enabled="true"
        android:drawable="@android:color/holo_green_light" />

<item   android:drawable="@android:color/transparent" />
</selector> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:09:53.567

在触摸模式下，当您不按下某个项目时，没有选择或聚焦之类的东西。

但是你可以解决它。您需要为列表设置选择模式（单个或多个，默认为.none），然后`state_activated`在您的选择器中使用。

# c# - DataBinding 反转了我的 ObservableCollection 的顺序？

> ID：10940310
> 
> 赞同：0
> 
> 时间：2012-06-07T21:43:57.093
> 
> 标签：c#, data-binding, binding, observablecollection

我有以下自定义可观察集合（代码部分来自 Dean Chalk 的博客[http://www.deanchalk.me.uk/post/Thread-Safe-Dispatcher-Safe-Observable-Collection-for-WPF.aspx](http://www.deanchalk.me.uk/post/Thread-Safe-Dispatcher-Safe-Observable-Collection-for-WPF.aspx)和略有改动）：

```
public class ThreadSaveObservableCollection <T> : IList<T>, INotifyCollectionChanged  {

    private IList<T> collection;
    private Dispatcher uiDispatcher;
    private ReaderWriterLock rwLock;

    public ThreadSaveObservableCollection () {

        collection = new List<T>();
        rwLock = new ReaderWriterLock();
        uiDispatcher = Dispatcher.CurrentDispatcher;
    }

    public void Insert (int index, T item) {

        if (Thread.CurrentThread == uiDispatcher.Thread) {

            insert_(index, item);
        } else {

            uiDispatcher.BeginInvoke(new Action<int, T>(insert_), DispatcherPriority.Normal, new object[] {index, item});
        }
    }

    private void insert_ (int index, T item) {

        rwLock.AcquireWriterLock(Timeout.Infinite);

        collection.Insert(index, item);
        CollectionChanged(this, new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Add, item));

        rwLock.ReleaseWriterLock();
    }

    public IEnumerator<T> GetEnumerator () {

        rwLock.AcquireReaderLock(Timeout.Infinite);

        IEnumerator<T> enumerator = collection.GetEnumerator();

        rwLock.ReleaseReaderLock();

        return enumerator;
    }

    System.Collections.IEnumerator System.Collections.IEnumerable.GetEnumerator () {

        rwLock.AcquireReaderLock(Timeout.Infinite);

        IEnumerator<T> enumerator = collection.GetEnumerator();

        rwLock.ReleaseReaderLock();

        return enumerator;
    }

    public event NotifyCollectionChangedEventHandler CollectionChanged;

    ... // the remaining methods of the IList<> interface

} 
```

此外，我有一个 ViewModel 包含此类的实例：

```
public class ViewModel {

    private ThreadSaveObservableCollection<string> Collection {get; set;}

    public ViewModel () {
        Collection = new ThreadSaveObservableCollection<string>();
    }

    public void Insert (string item) {

        Collection.Insert(0, item);
    }

} 
```

我在代码隐藏中应用数据绑定，因为我动态创建了名称为“LogList”的相应 WPF 控件（一个普通的 List 控件）：

```
wpfContainer.LogList.ItemsSource = viewModel.Collection; 
```

除了 wpf 列表控件中的项目顺序相对于 ViewModel 的 Collection 对象中的项目相反的事实之外，一切都工作得很好。

使用语句 Collection.Insert(0, intem) 我希望将新项目添加到列表的顶部，但我得到的结果与使用 Collection.Add(item) 的结果相同。

当我在运行时进入代码时，我可以验证我的 Collection 中的项目的顺序是否正确，但在 wpf 列表控件内部的表面上，顺序被改变了，即颠倒了。

我做错了什么？

我想问题必须在数据绑定周围的某个地方找到，因为它是将我的 ObservableCollection 与 wpf 控件连接起来的“线”，并且似乎正确的顺序正在进入线路并且不正确的顺序正在离开它。

也许它与 IList 接口的 GetEnumerator() 方法有关，因为 wpf 控件的 ItemSource 属性正在等待 Enumerator ？

我不知道，我真的被困住了......

预先感谢您的任何帮助 ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:55:42.410

你可以尝试这样做：

[http://msdn.microsoft.com/en-us/library/ms653208.aspx](http://msdn.microsoft.com/en-us/library/ms653208.aspx)

```
CollectionChanged(this, new NotifyCollectionChangedEventArgs(NotifyCollectionChangedAction.Add, new List<object>() { item }, 0)); 
```

我认为这个事件是问题所在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T22:02:12.563

关于您的代码的几个注意事项：

*   命名：ThreadSafe，不是 ThreadSave
*   竞争条件：您正在获取一个调用 .GetEnumerator 的锁。然后释放锁，并返回那个枚举数。这是不安全的，如果线程条件正确，会在运行时抛出异常。您应该在这里做的是在锁定时创建列表的副本，然后将枚举数返回到该副本。
*   ReaderWriterLock 有一些已知的性能、可伸缩性和容易出错的使用（例如重入）问题。请改用[ReaderWriterLocksSlim](http://msdn.microsoft.com/en-us/library/system.threading.readerwriterlockslim.aspx)。
*   这里的整个想法是将所有操作编组到 UI 线程。如果一切都发生在 UI 线程上，则根本不需要任何锁定。

[最后，我建议使用现有的线程安全 ObservableCollections](http://www.deanchalk.me.uk/post/Thread-Safe-Dispatcher-Safe-Observable-Collection-for-WPF.aspx)之一，而不是重新发明轮子。

# javascript - 如何在raphaeljs中使用attr的stroke-dasharray，stroke-linecap，stroke-linejoin

> ID：10940316
> 
> 赞同：16
> 
> 时间：2012-06-07T21:44:14.197
> 
> 标签：javascript, svg, raphael

谁能给我一个实际使用这些属性的示例：stroke-dasharray、stroke-linecap、stroke-linejoin 我尝试使用它们，但我不太了解它们值的文本结构。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-14T19:05:19.847

Phrogz 的回答非常适合普通的 SVG，但是这个问题也被标记为**Raphael**，其中的情况相似，但略有不同。Raphael 中笔画设置的好例子并不多，所以这里有一个完整的现场演示。

它有示例记录如何在**Raphael.js**`stroke-dasharray`中使用（虚线和虚线）、`stroke-linejoin`（笔触角样式）和`stroke-linecap`（路径笔触帽样式）。

 **## [链接到 jsfiddle 现场演示](http://jsfiddle.net/2rwna/167/)

* * *

用于**`.attr({'stroke-dasharray': option})`**Raphael 中的虚线，带有以下选项之一（*没有数字，与纯 SVG 不同*）：

```
["", "-", ".", "-.", "-..", ". ", "- ", "--", "- .", "--.", "--.."] 
```

![在此处输入图像描述](../Images/b76c9f76b10513c8079ed34c38496a51.png)

* * *

用于**`.attr({'stroke-linejoin': option})`**Raphael 中的圆角、斜角或尖角（斜接）*（与 SVG 相同，但继承除外）*：

```
["bevel", "round", "miter"] 
```

![在此处输入图像描述](../Images/848763f2963443387b976a07823b234b.png)

您还可以`.attr({'stroke-miterlimit': decimal})`根据笔划宽度和斜接（锐角）连接变钝的角度设置哪个控制截止点。[与 SVG stroke-miterlimit 相同，因此适用 SVG 文档](https://developer.mozilla.org/en-US/docs/SVG/Attribute/stroke-miterlimit)。可以在上面的 jsfiddle 中看到跨浏览器的变化（例如 Windows 上的 Chrome 和 Firefox 之间）

![在此处输入图像描述](../Images/e53463bb558e0ce92b90014a211e413c.png)

* * *

用于**`.attr({'stroke-linecap': option})`**控制描边 raphael 路径末端的大写：

```
["butt", "square", "round"] 
```

![在此处输入图像描述](../Images/18dc800fdba12aa9d1c18f5779c75404.png)

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2012-06-08T04:54:19.760

## [`stroke-linecap`](http://www.w3.org/TR/SVG/painting.html#StrokeLinecapProperty)

*   法律价值：`butt`| `round`| `square`|`inherit`
*   [例子](http://www.w3.org/TR/SVG/images/painting/linecap.svg)
    ![上面例子的截图](../Images/35f4cc746f22710b91a214466fb33857.png)

* * *

## [`stroke-linejoin`](http://www.w3.org/TR/SVG/painting.html#StrokeLinejoinProperty)

*   法律价值：`miter`| `round`| `bevel`|`inherit`
*   [例子](http://www.w3.org/TR/SVG/images/painting/linejoin.svg)
    ![上面例子的截图](../Images/1ce9aeef55a3869a42fe84cf9d797eee.png)

* * *

## [`stroke-dasharray`](http://www.w3.org/TR/SVG/painting.html#StrokeDasharrayProperty)

*   合法值：以逗号或空格分隔的长度或百分比列表，
    例如`"100 20 0 20"`
*   [示例](http://phrogz.net/tmp/canvas_dashed_line.html)（使用上述值）
    ![在此处输入图像描述](../Images/22c2cba12d04fc26479e7ba6056b8fef.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-07-18T06:40:11.457

请注意，此答案仅涵盖`stroke-dasharray`并且是对 Phrogz 答案的补充。
Raphael 没有`stroke-dasharray`像 user568458 所说的那样提供很大的设置自由度，因为我需要它像其他 svg 创建者一样工作，所以我做了一些调整`raphael.js`以适应所有可能的`stroke-dasharray`值。

```
addDashes = function (o, value, params) {
        var nvalue = dasharray[Str(value).toLowerCase()];
        if (nvalue!==undefined) {
            var width = o.attrs["stroke-width"] || "1",
                butt = {round: width, square: width, butt: 0}[o.attrs["stroke-linecap"] || params["stroke-linecap"]] || 0,
                dashes = [],
                i = nvalue.length;
            while (i--) {
                dashes[i] = nvalue[i] * width + ((i % 2) ? 1 : -1) * butt;
            }
            $(o.node, {"stroke-dasharray": dashes.join(",")});
        }else{
            $(o.node, {"stroke-dasharray": Str(value).toLowerCase()});
        }
    } 
```

`dasharray`替换文件中定义对象的位置下方的先前代码。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-01-13T19:21:01.440

如果您想以标准 SVG 方式在 Raphael 线对象上应用虚线，这对我来说效果很好；而我没有像拉斐尔那样使用句号和连字符的运气。

```
myLine.attr({stroke:'green'}).node.setAttribute('stroke-dasharray', '10,10'); 
```

参数（`10,10`在本例中）是长度、间隙，您可以根据需要对其进行迭代。就像`5, 5, 1, 5`是带有点的短破折号。

参考：[https ://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-dasharray](https://developer.mozilla.org/en-US/docs/Web/SVG/Attribute/stroke-dasharray)**

# spotify - libspotify API：通过给定艺术家姓名获取艺术家 URI 的任何简单方法？

> ID：10940317
> 
> 赞同：0
> 
> 时间：2012-06-07T21:44:32.280
> 
> 标签：spotify

要通过给定的艺术家名称获取艺术家 URI，我能想到的唯一方法是

1.  *搜索艺术家：$艺术家名称*；
2.  将输入 $artistname 与搜索结果中的艺术家姓名进行比较。
3.  如果 2\. 匹配，则获取艺术家 URI。

有没有更简单的方法来获取艺术家 URI？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T01:22:53.543

一言以蔽之：不。恐怕 API 不能那样工作。

# css - 创建新的文本对齐类以分隔帖子和侧边栏文本对齐样式

> ID：10940320
> 
> 赞同：1
> 
> 时间：2012-06-07T21:44:42.197
> 
> 标签：css, text, alignment

我试图在我的博客文章中证明文章内容文本的合理性。我在 style.css 表中搜索了#content 部分，将段落文本更改为“align:justify”，但是我找不到这样的部分。所以我使用 firebug 检查页面，发现文本属性在单独的样式表（text.css）上。所以我打开了那个样式表并改变了段落文本的对齐方式来证明。但是，这改变了整个页面上的文本，包括侧边栏文本。所以我用 Firebug 检查了侧边栏，发现侧边栏文本摘录段落类没有像通常那样分开。帖子内容文本和侧边栏摘录文本都在同一个类下，所以当我将其更改为 justify 时，它们都会更改。我猜我需要为侧边栏创建一个不同的类，有人能指出我正确的方向吗？谢谢！

```
p {
padding: 5px 0;
margin: 0 0 5px;
text-align: left;
color:#666; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:50:38.377

侧边栏很可能有某种 div，如果您不想使用特定的类，您可以找到侧边栏 div 的名称并使用

```
#sidebar #content p{
   text-align:justify;
} 
```

确保您针对要更改的区域中的特定内容

**编辑：**

查看您的源代码后，您似乎应该能够`p`使用

```
.srp-widget-container p{
   /*your styles here*/
 } 
```

在 960.css

# uitableview - UIView 开始动画不起作用

> ID：10940321
> 
> 赞同：-1
> 
> 时间：2012-06-07T21:44:45.037
> 
> 标签：uitableview, uiview, uiviewanimation

当在 uiview 中存在的 uitableview 中点击一个单元格但没有执行用户点击它时应该在单元格上执行的“flash”时，我使用此代码。

```
-(IBAction)labelTap:(UIGestureRecognizer *)sender
{
    if(sender.state != UIGestureRecognizerStateRecognized)
        return;

    UIView *tappedview=[sender.view hitTest:[sender locationInView:sender.view] 
                                  withEvent:nil];

    UIView *contentview1=tappedview.superview.superview;

    [UIView beginAnimations:nil context:NULL];
    [UIView setAnimationDuration:0.3];
    [contentview1 setAlpha:0];
    [contentview1 setAlpha:1];
    [UIView commitAnimations];

} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T22:12:40.640

试试这个有效！

```
 UIView *contentview1=tappedview.superview;
[contentview1 setAlpha:0];
    [UIView animateWithDuration:0.3f
                     animations:^(void) 
    {
        // Animate the flash on tap

        [contentview1 setAlpha:1];

    }
    completion:^(BOOL finished) 
    {
        NSLog(@"Done! Now show the pop up");
    )]; 
```

# git - 我可以使用 Git 进行只有 FTP 访问的开发吗

> ID：10940324
> 
> 赞同：0
> 
> 时间：2012-06-07T21:45:03.257
> 
> 标签：git, version-control, ftp

我在任何时候都在几十个小型企业网站上做自由职业。通常他们的设置需要本地数据库和其他服务器配置，所以我必须直接在他们的服务器上开发和测试。

目前，我通过 FTP（使用 Transmit）安装客户端的服务器，并直接在其服务器上的站点开发副本上进行更改和测试，并在我对它们的工作感到满意时将文件复制到实时版本。

如果没有 shell 访问（有些甚至是基于 Windows 的服务器），有没有一种方法可以让 Git 进入我的工作流程以维护网站的版本历史？

**编辑：**由于我将他们的 web 文件夹作为卷安装在我的机器上，我可以使用他们的开发子文件夹作为我的 git 暂存目录吗？我可以进行更改并直接测试它们，然后无需任何额外步骤即可提交。

将 Git 的隐藏文件放在 web 路径中会是一个安全问题吗？文件是远程的这一事实会导致 Git 运行缓慢吗？假设我是唯一在服务器上开发的人，这似乎是一个合理的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T22:11:07.140

如果不需要在客户端机器上保留存储库的克隆：由于您似乎只在本地处理和测试您的更改，您应该为您的（本地）开发机器上的每个客户端设置一个 git 存储库，该存储库将提供服务跟踪您的更改。然后，一旦您进行了更改/提交/测试，就回退到您当前使用 FTP 复制更改的方式。您将立即获得源代码控制的好处，如果有任何理由在这些机器上克隆存储库，您以后可以随时在客户端机器上设置 git 共享。真正重要的是让您的项目进入*任何*存储库。

否则，如果您必须在客户端机器上进行 repo 克隆，则有一个快速的替代方法：git installs 通常支持`git-daemon`它允许客户端/服务器 TCP 访问存储库。虽然没有身份验证，所以最好只在本地网络上使用；因此，在您的情况下，这确实不是一个可行的解决方案。

更好的解决方案是在客户端 Windows 机器上设置某种 ssh 服务器，然后配置跨 ssh 的 git 访问。有几个商业产品试图在 Windows 上实现这个交钥匙：[WindowsGit](http://windowsgit.com/)、[GitStack](http://gitstack.com/)。两者都是付费软件。

如果你环顾四周，你会发现一些自己做这件事的教程。[这](http://www.timdavis.com.au/git/setting-up-a-msysgit-server-with-copssh-on-windows/)是一个。

这并不涉及在 Windows 以外的平台上设置 ssh 访问，但通常在 Windows 上设置 ssh 是一项艰巨的任务。

自然，任何解决方案最初都需要对客户端机器进行**一些**访问以至少设置 git。

# c# - 当我的应用程序不会迁移时，我应该关心文化吗？

> ID：10940325
> 
> 赞同：2
> 
> 时间：2012-06-07T21:45:26.647
> 
> 标签：c#, winforms, resharper, cultureinfo

ReSharper 想要改变这一点：

```
platypusID = DuckbillValues[i - 1].ToString(); 
```

..对此：

```
platypusID = DuckbillValues[i - 1].ToString(CultureInfo.InvariantCulture); 
```

由于我的应用程序仅在美国使用的可能性很大，因此我将默认以下哪一项：

```
1) Smart
2) Dumb
3) Neither smart nor dumb
4) Smart, but not for that reason
5) Dumb, but not for that reason 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T21:50:31.227

> 因为我的应用程序很有可能只在美国使用

即使您的应用程序仅在美国使用，如果您针对大量受众，用户总是有机会自定义他们的区域设置或使用不同的区域进行系统设置。

`InvariantCulture`无论您是用户做什么，使用都是安全的。鉴于这是设置“id”，我个人很可能会强迫文化这样做`InvariantCulture`，以保证我以后不会得到奇怪的结果。

这也使得将来支持其他地区变得更加容易......您永远不知道您的代码以后会发生什么，无论是在这个应用程序中还是在其他应用程序中。

另外 - 由于您使用的是 ReSharper，它已经警告您这一点。你已经在那里了。遵守良好的编码标准实际上比忽略警告更容易，这使得很难想到不指定文化的原因。

# tree - jstree 稳定版：如何在刷新树之前检查是否有子节点？

> ID：10940326
> 
> 赞同：0
> 
> 时间：2012-06-07T21:45:35.733
> 
> 标签：tree, refresh, jstree, remove-if

如果没有孩子，我只想刷新树..即：

```
 $.jstree._reference("#f").get_checked(-1, true).each(function(index,element)
    {
    $("f").jstree("remove",'#'+$(element).attr("id"));  
    });

    $.jstree._reference($("#{$id[$k]}")).refresh(-1); 
```

现在，每当我使用复选框插件完成删除节点时，这都会触发刷新树，但我希望我不需要每次都查看加载，但前提是没有节点......当这种情况发生时被重新创建，所以我只需要担心在发生这种情况时触发事件。

非常欢迎任何帮助！

谢谢 ，

J.P-

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:51:32.133

```
 <?
        case "remove":
                    $.jstree._reference("#{$id[$k]}").get_checked(-1, true).each(function(index,element){
                    $("#{$id[$k]}").jstree("remove",'#'+$(element).attr("id"));     

                    // only refresh if we are taking the first node displayed... it's going to recreate it in the backend.
                        if( $(element).attr("id") ==  $("div.jstree > ul > li").first().attr("id") )
                        { 
                        $.jstree._reference($("#{$id[$k]}")).refresh(-1);           
                        }

                    });
        break;

        ?> 
```

# jsp - 将重定向发送到 JSP 中的相对路径？

> ID：10940329
> 
> 赞同：11
> 
> 时间：2012-06-07T21:46:02.067
> 
> 标签：jsp, redirect, send, relative-path

```
response.sendRedirect("../seja/izpisknjig.jsp"); 
```

我在其中执行这一行的文件是 index.jsp。目录结构如下所示。
项目
--index.jsp
seja
--izpisknjig.jsp

如何形成重定向到 izpisknjig.jsp 的相对路径。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-06-07T22:03:47.117

最可靠的方法是创建一个包含上下文路径的域相关 URL。

```
response.sendRedirect(request.getContextPath() + "/seja/izpisknjig.jsp"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-21T13:07:26.657

您可以使用**JSP taglib**进行重定向。

index.jsp 文件的内容：

```
<jsp:forward page="../seja/izpisknjig.jsp" /> 
```

如果 project 和 seja 位于您的 webapp 上下文的根目录（即[http://host:port/context/project](http://host:port/context/project)）

index.jsp 文件的内容：

```
<jsp:forward page="/seja/izpisknjig.jsp" /> 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-06-07T22:50:37.400

你可能想多了。你可以直接生成一些 javascript 来重定向到你喜欢的任何地方。

```
 document.location = "MyPage.php?action=DoThis"; 
```

# php - 如何在 php mysql 中获取结果的所有行？

> ID：10940332
> 
> 赞同：5
> 
> 时间：2012-06-07T21:46:12.413
> 
> 标签：php, mysql, json

在我的表中，我有 2 条记录`companyid = 1`，但是当我运行下面的 php 时，`companyid = 1`它只返回第一个！
如何获取所有记录？

php文件：

```
if (isset($_GET["companyid"])) {
$companyid = $_GET['companyid'];

// get a product from products table
$result = mysql_query("SELECT * FROM `products`         
                        WHERE companyid = $companyid;");

if (!empty($result)) {      

    if (mysql_num_rows($result) > 0) {

   while($row = mysql_fetch_assoc($result)){
      $product = array();
      $product["pid"] = $row["pid"];
      $product["productname"] = $row["productname"];        
    }

   $response["product"] = array();

       array_push($response["product"], $product);

        // success
       $response["success"] = 1;

   echo json_encode($response);

    } else {
        // no product found
        $response["success"] = 0;
        $response["message"] = "No product found";

        // echo no product JSON
        echo json_encode($response);
    }
} else {
    // no product found
    $response["success"] = 0;
    $response["message"] = "No product found";

    // echo no users JSON
    echo json_encode($response);
}
} else {
$response["success"] = 0;
$response["message"] = "Required field(s) is missing";

// echoing JSON response
echo json_encode($response);
} 
```

使用`mysql_fetch_array`情况也一样。当我使用它`{"product":[{"pid":"12371","productname":"test"}],"success":1}` 运行没有参数的查询时，它返回所有行.. `select * from table``mysql_fetch_array`

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-03-18T18:54:23.313

正如 NikiC 指出的那样，您不应该再使用 mysql_ 函数，您可以在 PDO 和 mysqli 中获取整个数组，这是使用[mysqli->fetch_all](http://www.php.net/manual/en/mysqli-result.fetch-all.php)函数获取所有行的示例，希望对您有所帮助！

```
//Database Connection
$sqlConn =  new mysqli($hostname, $username, $password, $database);

//Build SQL String
$sqlString = "SELECT * FROM my_table";

//Execute the query and put data into a result
$result = $sqlConn->query($sqlString);

//Copy result into a associative array
$resultArray = $result->fetch_all(MYSQLI_ASSOC);

//Copy result into a numeric array
$resultArray = $result->fetch_all(MYSQLI_NUM);

//Copy result into both a associative and numeric array
$resultArray = $result->fetch_all(MYSQLI_BOTH); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-07T21:50:18.463

```
while ($row = mysql_fetch_assoc($result)) {
    echo $row["userid"];
    echo $row["fullname"];
    echo $row["userstatus"];
}

mysql_free_result($result); 
```

[php.net/mysql_fetch_assoc](http://php.net/mysql_fetch_assoc)

我建议你使用 PDO 而不是 mysql_

```
if (!empty($result)) { 
```

可能`is_resource($result)`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-07T21:48:46.257

您需要遍历结果以提取所有行：

```
while($row = mysql_fetch_assoc($result)){
//Do stuff 
} 
```

附带说明一下，您应该至少使用 mysqli 或 PDO 而不是 mysql_* 函数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-06-19T14:26:58.660

我坚信使用 Doctrine 进行批处理或使用 MySQL（PDO 或 mysqli）进行任何类型的迭代只是一种错觉。

@dimitri-k 提供了一个很好的解释，特别是关于工作单元。问题是未引导：“ **$query->iterate()** ”，它并没有真正迭代数据源。它只是一个围绕已经**完全获取**的数据源**的 \Traversable 包装器。**

 **一个例子表明即使完全从图片中删除 Doctrine 抽象层，我们仍然会遇到**内存问题**：

```
echo 'Starting with memory usage: ' . memory_get_usage(true) / 1024 / 1024 . " MB \n";

$pdo  = new \PDO("mysql:dbname=DBNAME;host=HOST", "USER", "PW");
$stmt = $pdo->prepare('SELECT * FROM my_big_table LIMIT 100000');
$stmt->execute();

while ($rawCampaign = $stmt->fetch()) {
    // echo $rawCampaign['id'] . "\n";
}

echo 'Ending with memory usage: ' . memory_get_usage(true) / 1024 / 1024 . " MB \n"; 
```

**输出：**

```
Starting with memory usage: 6 MB 
Ending with memory usage: 109.46875 MB 
```

在这里，令人失望的**getIterator()**方法：

```
namespace Doctrine\DBAL\Driver\Mysqli\MysqliStatement

/**
 * {@inheritdoc}
 */
public function getIterator()
{
    $data = $this->fetchAll();

    return new \ArrayIterator($data);
} 
```

您可以使用我的小库来**实际**使用 PHP Doctrine 或 DQL 或纯 SQL 流式处理繁重的表。但是你觉得合适：[https ://github.com/EnchanterIO/remote-collection-stream](https://github.com/EnchanterIO/remote-collection-stream)**

# browser - 如何从我的程序安装浏览器扩展

> ID：10940337
> 
> 赞同：1
> 
> 时间：2012-06-07T21:46:39.763
> 
> 标签：browser, google-chrome-extension, browser-extension

我想将一个扩展与我的可执行文件捆绑在一起，如果他们有 chrome 或 firefox，我希望它自动将其添加到用户浏览器中。是否有一个目录可以让我删除包含 chrome 扩展名的 .crx 文件，并且 chrome 会自动使用它？我应该为firefox做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T14:01:46.443

如果你想简化一些事情，你可以使用[Crossrider](http://www.crossrider.com)并获得一个安装程序，它将在 IE、Firefox 和 Chrome 上安装你的扩展程序。此安装程序也可以在静默模式下运行，因此您可以从可执行文件中运行它而不会中断正常流程。为此，您首先必须打开一个新用户并将您的扩展程序代码复制到 Crossrider（无论如何这可能是一个好主意，因为您的应用程序将拥有一个支持所有浏览器的代码）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T00:37:28.350

**对于铬：**

您可以将其放入注册表或将其放入 external-extensions.json 文件 ( `%localappdata%/Google/Chrome/Application/chrome_xx.xxx.xxx.xxx/Extensions/`)。

我自己从来没有做过，但它都记录在官方频道上： [http ://code.google.com/chrome/extensions/external_extensions.html](http://code.google.com/chrome/extensions/external_extensions.html)

还有一种通过 Group-Policy 安装它的方法，但这三种方法都不是跨平台的 AFAIK。

**对于火狐：**

我不知道。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T00:45:19.133

我的建议是：

*   **一定要通过浏览器本身**，
*   **不要试图偷偷摸摸把它强加给用户**

原因如下：

*   浏览器**旨在**明确明确地征求用户的*许可。*
*   这是我知道的唯一跨平台方式（而且它已经需要分叉，所以这甚至不是完全跨平台的）。

我只是建议分叉一个浏览器并将扩展的文件或下载 URL 作为参数传递，以便它会*自动请求用户的许可*并*开始安装过程*。

例如，只需调用它（在 linux 上，如果`google-chrome`在你的 上`PATH`）：

```
google-chrome PATH_TO_FOLDER_OR_URL_PREFIX/myextension.xpi 
```

或者：

```
google-chrome PATH_TO_FOLDER_OR_URL_PREFIX/myextension.crx 
```

或者对于火狐：

```
firefox PATH_TO_FOLDER_OR_URL_PREFIX/myextension.xpi 
```

# javascript - 如何订阅 jQuery 中的方法？

> ID：10940338
> 
> 赞同：0
> 
> 时间：2012-06-07T21:46:39.890
> 
> 标签：javascript, jquery

我想做这样的事情。

```
var foo = function() {
    this.run = function() {
        alert('got');
    }
    this.init = function() {
        this.run();
    }
    this.init();
};

window.onload = function() {
    var f = new foo();
    $(f).bind('run', function() { // this doesn't work
        alert('ran!');
    });
};​ 
```

但它不起作用。如何订阅另一个对象的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T21:52:23.930

您不能将事件处理程序直接绑定到函数 - 您将它们绑定到事件！您将需要在 run() 中触发自定义事件：

```
this.run = function() {
    // Trigger an event called "run"
    $(this).triggerHandler('run');

    // ...
}; 
```

现在您可以像以前一样订阅此事件：

```
var f = new foo();
$(f).on('run', function() { ... }); // "bind" is fine as well 
```

这适用于绑定处理程序后触发的事件，因此在构造函数中触发的事件很可能不会被捕获。

# javascript - 用户刷新页面时重新提交 HTML 表单 - 我如何阻止这种情况发生？

> ID：10940339
> 
> 赞同：1
> 
> 时间：2012-06-07T21:46:51.780
> 
> 标签：javascript, html, jsp

在用户提交一个 html 表单（使用 method="post"）后，它会将他们带回到他们所在的页面（但其中一些数据已更改）。如果用户刷新页面，则再次提交表单。在我的应用程序中，这可能会创建一个非法状态（因为表单数据是在没有经过验证的情况下提交的）。

如何防止用户刷新页面时提交表单？

以下是一些示例代码，可让您对正在发生的事情有一个基本的了解：

```
<script type="javascript">
function verifyForm() {
//do stuff
}
...
<form onsubmit="return verifyForm();" method="post">
<input name="testing" type="text" size="8" />
<input name="save" type="submit value="Submit Form" />
</form> 
```

然后在 JSP 控制器中：

```
public class myController implements Controller
{ 
@Override
public ModelAndView handleRequest(HttpServletRequest request, HttpServletResponse response) throws Exception
{
// do stuff with the form data received in the request
}
} 
```

有几个地方我可能可以解决这个问题：在 html 页面本身，或者在控制器中（在 jsp 中使用 MVC 模式）。到目前为止，我发现[这个问题](https://stackoverflow.com/questions/9220942/why-a-form-would-automatically-resubmitted-when-the-page-is-refreshed)似乎几乎适用于我的问题，但似乎并不完全是在问同样的事情（我也没有使用 PHP）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:48:57.070

您需要使用 PRG 模式：Post/Redirect/Get。

在这里阅读：[http ://en.wikipedia.org/wiki/Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:49:13.717

规范的解决方案是在每次成功的 POST 后重定向。浏览器将使用 GET 执行重定向，因此不会发布任何内容；如果重新加载，只会重复 GET 请求，而不是初始 POST。

# ios - 并发调度队列在 Xcode 4 Debug Navigator 中显示为串行

> ID：10940341
> 
> 赞同：1
> 
> 时间：2012-06-07T21:46:53.910
> 
> 标签：ios, xcode, grand-central-dispatch

我正在创建一个调度队列，例如

```
_dispatchQueue = dispatch_queue_create("dispatch_queue_tag", DISPATCH_QUEUE_CONCURRENT); 
```

也试过：

```
_dispatchQueue = dispatch_queue_create("dispatch_queue_tag", NULL);
dispatch_set_target_queue(_dispatchQueue, dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0)); 
```

当我调试应用程序时，Xcode 会显示这一点：

![在此处输入图像描述](../Images/513df3ba066b75824f75c86298eeb7eb.png)

它是 Xcode 中的错误，还是正在创建的队列真的是串行的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T17:58:56.783

我看到这个问题在 iOS6 上运行，但是如果我扩展队列，它里面有几个线程......我认为队列确实是并发的，尽管有标签（如果使用 iOS 4.3 或更高版本）。似乎是一个错误。

# firefox - updateURL 和 updateLink 在我的插件中不起作用

> ID：10940342
> 
> 赞同：0
> 
> 时间：2012-06-07T21:46:57.073
> 
> 标签：firefox, firefox-addon, firefox-addon-sdk

我正在阅读[cfx 工具文档](https://addons.mozilla.org/en-US/developers/docs/sdk/latest/dev-guide/cfx-tool.html)，关于如何创建插件并使其自动更新。不幸的是，当我使用这一行将我的插件编译为 xpi 文件时：

```
cfx xpi --update-link "http://mypage.com/firefox/latest"
        --update-url "http://mypage.com/firefox/update_rdf" 
```

我总是抱怨生成的 xpi 文件与 Firefox 12.0 不兼容。当我删除`--update-link`和`--update-url`参数时，xpi 文件有效。我错过了什么吗？

我看到了[这个答案](https://stackoverflow.com/questions/4247192/firefox-add-on-doesnt-work-with-tag-emupdateurl/4253956#4253956)，但不幸的是，该解决方案对我不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:02:50.563

你应该做的两件事：

1.  确保您使用的是最新版本的附加 SDK。附加组件 SDK 1.7 声明附加组件与 Firefox 12 和 13 兼容，以前的版本没有。
2.  确保将生成的`update.rdf`文件上传到`http://mypage.com/firefox/update_rdf`，那里可能有一个较旧的文件。此文件还包含扩展的兼容性信息，Firefox 比`install.rdf`扩展内部更信任此信息（这有助于将扩展标记为与较新的 Firefox 版本兼容，而无需实际更新扩展包）。

# d3.js - d3.js 树形图也可以绘制内部节点

> ID：10940348
> 
> 赞同：0
> 
> 时间：2012-06-07T21:47:41.370
> 
> 标签：d3.js, treemap

这个问题一般是关于 Mike Bostock 非常令人兴奋的[d3.js 库](http://d3js.org/)，更具体地说是关于树形图。注意：treemap 似乎有两个版本，[“talk version”](http://mbostock.github.com/d3/talk/20111018/treemap.html)和[“example version”](http://mbostock.github.com/d3/ex/treemap.html)。我的问题与具有缩放功能的“谈话版”有关。

我的问题更像是一个愿望：扩展树形图以容纳和显示多个内部节点以及多级缩放有多困难？例如，单击以降低一级，并单击选项以提高一级。也许为了保持整洁，只绘制更深一层的节点——当你放大时，更深的层次被解决了。

这是我的天上掉馅饼的愿望——我不熟悉 javascript，现在不能接受这个——但它在视觉/UI 级别上似乎是可行的。我确实注意到 mbostock[在这里评论说](https://stackoverflow.com/questions/10011130/d3-js-treemap-just-paint-leaf-nodes)树图只显示叶节点，但我不知道这是设计约束还是[SMOP](http://en.wikipedia.org/wiki/Small_matter_of_programming)。

任何有兴趣这样做的人？可能是为了佣金？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T22:57:49.550

在我发布这个问题的第二天，作者似乎在他的网站上发布了一个几乎完全准确的答案。不管这个问题是否提示了改编，我很高兴尝试一下！

他称其为“[可缩放树形图](http://bost.ocks.org/mike/treemap/)”。他还指出了网络上的其他几个例子。

谢谢，姆博斯托克！

# c# - 从线程调用的 ActiveX DLL

> ID：10940349
> 
> 赞同：1
> 
> 时间：2012-06-07T21:47:45.987
> 
> 标签：c#, python, multithreading, dll, activex

我有一个 ActiveX (COM) DLL，它可以进行 Windows 系统调用（例如 ReadFile() 和 WriteFile()）。我的 GUI（在 Python 或 C# 中）在主 GUI 线程中创建 DLL 的实例。但是，为了从线程调用它，必须在每个线程中创建一个新的 DLL 实例，无论使用 C# 还是 Python。（作为旁注，可以从 C# 中的线程调用原始实例，但这会阻塞主线程；在 Python 中这样做会使 GUI 崩溃。）有没有办法避免在线程中创建 DLL 的新实例？

需要使用原始 DLL 实例的原因：DLL 允许连接到 HID 微控制器。DLL 提供了一个选项，只允许微控制器使用一个独占句柄。如果 GUI 设计者选择此选项（在某些情况下这是必需的），则第二个 DLL 实例将无法按预期工作，因为只有一个 DLL 实例可以建立连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T16:22:53.647

我没有使用过 Phyton，但对于 C#，我建议创建一个帮助类，其中包含 ActiveX 作为静态公共属性。让主线程创建 ActiveX，然后所有线程根据需要从那里访问它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T13:41:34.383

当你制作一个 ActiveX/COM 组件时，你可以为你的组件指定线程模型，它可以是例如“compartmentalized”。根据您的选择，ActiveX/COM 负责序列化请求。

如果您多次“打开”和 ActiveX/COM 组件（取决于线程模型？）实际上只会创建一个实例。

我假设您使用 win32com.client.Dispatch(".") 来“打开”您的 ActiveX/COM 组件。

另外，不要忘记 pythoncom.CoInitialize() 和 CoUninitialize() 对调用。

谷歌上那些实际做了什么。

如果您无法更改给定的 ActiveX/COM 组件并且其线程模型不可接受，则可以将所有“出站”调用包装在一个具有监视器“接口”的专用 Python 线程中。

这是我曾经遇到类似情况时编写的代码的大纲：

```
class Driver(threading.Thread):
    quit = False  # graceful exit
    con = None
    request = None
    response = None

    def __init__(self, **kw):
        super(Driver, self).__init__(**kw)
        self.setDaemon(True)  # optional, helps termination
        self.con = threading.Condition()
        self.request = None
        self.response = None

    def run(self):
        pythoncom.CoInitialize()
        handle = win32com.client.Dispatch("SomeActiveX.SomeInterface")
        try:
            with self.con:
                while not self.quit:
                    while not self.request: self.con.wait()                    # wait for work
                    method, args = self.request
                    try: self.response = getattr(handle, method)(*args), None  # buffer result
                    except Exception, e: self.response = None, e               # buffer exception
                    self.con.notifyAll()                                       # result ready
        finally:
            pythoncom.CoUninitialize()

    def call(method, *args):
        with self.con:
            while self.request: self.con.wait()       # driver is busy
            self.request = method, args
            self.con.notifyAll()                      # driver can start
            while not self.response: self.con.wait()  # wait for driver
            rv, ex = self.response
            self.request = self.response = None       # free driver
            self.con.notifyAll()                      # other clients can continue
            if ex: raise ex
            else: return rv 
```

# google-chrome - 如何出售我的 Google Chrome 扩展程序？

> ID：10940357
> 
> 赞同：19
> 
> 时间：2012-06-07T21:48:44.480
> 
> 标签：google-chrome, google-chrome-extension, licensing

我为 Google Chrome 开发了一个扩展程序，但如果我在 Chrome 网上应用店中托管该应用程序，则没有通过该扩展程序获利的选项。对我来说，这是一个完全错过的市场部分，因为我相信开发人员会喜欢提出创造性的应用程序并为他们创造收入！

不过，我似乎找不到任何可以让我出售此扩展程序的替代网站/市场。我知道 Firefox 正在建立一个应用商店来与 Google 和其他基于 HTML5 的应用商店竞争，但这也对我没有太大帮助。

有什么办法可以吗。

1.  在我自己的服务器或其他应用市场上托管我的扩展程序？

2.  为某种类型的支付网关提供许可，以防止用户下载`.crx`和非法分发它的副本？

我有一个很棒的小应用程序，我不想免费赠送它。有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-11T19:31:51.187

谷歌表示，[销售扩展程序](https://developers.google.com/chrome/web-store/faq#faq-extensions-01)的能力“即将推出”。在那之前，您始终可以[自行托管](https://code.google.com/chrome/extensions/hosting.html)或将您的扩展程序转换为打包应用程序（请参阅 Google 的[销售打包应用程序](https://developers.google.com/chrome/web-store/faq#faq-app-02)说明，​​这与扩展程序基本相同，但在主屏幕上添加了一个图标。）

**编辑**

“新”打包应用程序（自从`manifest_version: 2`. 扩展用于浏览器交互（操作选项卡、cookie、历史记录等），而应用程序则更接近于独立程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-10T16:43:34.607

据我所知，付费扩展没有替代市场。

无论如何，您始终可以在自己的服务器上托管扩展程序： [http ://code.google.com/chrome/extensions/hosting.html](http://code.google.com/chrome/extensions/hosting.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-11T18:08:23.883

我感谢大家的帮助。我认为付费延期会有市场。Mozilla 正在为 HTML5 应用程序开发市场，Facebook 正在为 HTML5 应用程序推出市场，但没有任何扩展或附加组件正在运行。

大多数扩展，就像我的一样，为用户的网络体验提供了节省时间和效率的服务。

效率是始终可以并且应该始终被货币化的东西。有这么多简约的 chrome 和 firefox 扩展的部分原因是因为开发人员没有动力去构建免费的综合解决方案。

如果我托管自己的扩展程序（我完全有能力这样做），有什么办法可以防止用户公开共享我的扩展程序？也许保持扩展“未打包”，这样人们就不能只是通过电子邮件相互发送 crx 文件并公开分享它？

我正在考虑的另一个选项将包括一个登录屏幕，用户必须在其中注册一个帐户，然后在他们在线支付插件费用后获得访问权限。有没有办法将该登录信息合并到插件中？

想法？

# java - 删除重复代码

> ID：10940360
> 
> 赞同：3
> 
> 时间：2012-06-07T21:48:48.740
> 
> 标签：java

我的问题是-

我有两个字符串变量`site_inclusion`和`site_exclusion`. 如果`site_inclusion`有一个值，那么我不在乎值`site_exclusion`包含什么。也就是说，`site_inclusion`覆盖`site_exclusion`. 但是，如果 `site_inclusion`is`null`并且`site_exclusion`具有值，那么我想检查`site_exclusion`.

更准确地说：

1.  如果`site_inclusion`和`site_exclusion`都`null`设置`useTheSynthesizer`为`true`;
2.  如果`site_inclusion`不是`null`，它与设置为的`regexPattern`then匹配。而且我不在乎.`useTheSynthesizer``true``site_exclusion`
3.  if `site_inclusion`is `null`and `site_exclusion`is not`null`和`site_exclusion`不匹配`regexPattern`then 设置`useTheSynthesizer`为 true。

我写了下面的代码，但不知何故，**我**在 if/else 循环中重复了一些东西。任何满足我条件的代码改进都将不胜感激。

```
String site_inclusion = metadata.getSiteInclusion();
String site_exclusion = metadata.getSiteExclusion();

// fix for redundant data per site issue
if(site_inclusion != null && site_inclusion.matches(regexPattern)) {
    useTheSynthesizer = true;
} else if(site_exclusion != null && !(site_exclusion.matches(regexPattern))) {
    useTheSynthesizer = true;
} else if(site_inclusion == null && site_exclusion == null ) {
    useTheSynthesizer = true;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T21:57:22.610

1.  你真的不需要最后一次`null`测试。
2.  我（个人）觉得`if(test == true) flag = true`发表声明的风格很差。你可以简单地说`flag = test`。

我的建议是：

```
if(site_inclusion != null)
{
    useTheSynthesizer = site_inclusion.matches(regexPattern);
}
else if(site_exclusion != null)
{
    useTheSynthesizer = ! site_exclusion.matches(regexPattern);
}
else
{
    useTheSynthesizer = true;
} 
```

您也可以在 oneliner 中执行此操作：

```
useTheSynthesizer = site_inclusion != null ? site_inclusion.matches(regexPattern) : (site_exclusion != null ? ! site_exclusion.matches(regexPattern) : true); 
```

但我觉得那种读起来很讨厌。

`useTheSynthesizer`（注意，我做了其他假设`false`。这在您的代码或解释中并不明确，但我认为这个假设是安全的。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T22:08:15.353

我会这样做：

```
 boolean useTheSynthesizer;

    if (siteInclusion == null && siteExclusion == null) {
        useTheSynthesizer = true;
    }
    else if (siteInclusion == null) {
        useTheSynthesizer = ( ! siteExclusion.matches(regexPattern) );
    }
    else {
        useTheSynthesizer = siteInclusion.matches(regexPattern);
    } 
```

我还从您的变量名称中删除了下划线，因为它们不符合 java 命名约定（而且它们是可怕的 IMO）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T22:05:33.153

你可以这样做。基本上，我将所有条件提取为小方法并制作为 OR 条件。

```
 String site_inclusion = metadata.getSiteInclusion();
    String site_exclusion = metadata.getSiteExclusion();
        if(isInclusionAndExclusionNull(site_inclusion, site_exclusion) || isSiteExclusionMatches(site_exclusion, regexPattern) || isSiteInclusionMatches(site_inclusion, regexPattern)) {
            useTheSynthesizer = true;
        }

private static boolean isInclusionAndExclusionNull(String site_inclusion,
            String site_exclusion) {
        return site_inclusion == null && site_exclusion == null;
    }    
    private boolean isSiteExclusionMatches(String site_exclusion,
                String regexPattern) {
            return site_exclusion != null && !(site_exclusion.matches(regexPattern));
        }

        private  boolean isSiteInclusionMatches(String site_inclusion,
                String regexPattern) {
            return site_inclusion != null && site_inclusion.matches(regexPattern);
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T22:09:42.013

您可以有 2 种方法来灵活处理包含和排除，如下所示。

```
callingMethod() {
  boolean useTheSynthesizer = processSiteInclusions(site_inclusion, regexPattern);

  if (useTheSynthesizer == false) {
     useTheSynthesizer = processSiteExclusions(site_inclusion, regexPattern);
  }

  if (useTheSynthesizer == false) {
    useTheSynthesizer = true;
  }
}

private boolean processSiteInclusions(site_inclusion, regexPattern) {
   boolean useSynthesizer = false;

   if (site_inclusion != null && !site_inclusion.matches(regexPattern))
      useSynthesizer = true;

   return useSynthesizer;
}

private boolean processSiteExclusions(site_exclusion, regexPattern) {
   boolean useSynthesizer = false;

   if (site_exclusion != null && !site_inclusion.matches(regexPattern))
      useSynthesizer = true;

   return useSynthesizer;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T22:23:55.000

您好，我认为您可以使用类似 OR 的方法来改进它，而不仅仅是 AND 或尝试类似 swicht case 的方法。

无论如何，您可以创建一些测试变量的函数，并且可以从主模块中编写出令人困惑的代码。

例如，您可以在一个名为的函数中编写此代码`boolean TestingVariable ( String X, String Y);`

例如： boolean TesteingVariable (String X, String Y){

```
 if(X != null && X.matches(regexPattern)) {
      return true;
  } else if(Y != null && !(Y.matches(regexPattern))) {
      return = true;
  } else if(X == null && Y == null ) {
      return = true;
  }
}; 
```

这样，您的最终主模块代码将是这样的，您将避免主代码中的混淆代码：

```
String site_inclusion = metadata.getSiteInclusion();
String site_exclusion = metadata.getSiteExclusion();

// fix for redundant data per site issue
useTheSynthesizer = TesteingVariable (site_inclusion ,site_exclusion); 
```

我认为你应该`regexPattern`在函数中输入变量。

对不起我的英语，我希望你能理解所有，它对你有帮助。

# eclipse - Eclipse Web 编辑器在使用 <> 括号时非常慢

> ID：10940365
> 
> 赞同：3
> 
> 时间：2012-06-07T21:49:05.493
> 
> 标签：eclipse, performance, jsp, editor

这非常令人沮丧。我正在编辑 GSP（或 JSP）文件，每次打开 html 括号 <> eclipse 变得非常慢（每个字符 1 秒）。 **我到处搜索**，禁用所有验证，禁用内容辅助，删除自动关闭标签。对缓慢没有影响。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-08-13T21:43:53.970

可能是因为您的处理器或激活了无用的插件。

我建议您使用[Netbeans 7.3](https://netbeans.org/downloads/)。（对我来说）是 Web 项目的最佳 IDE。

Netbeans 具有与 Eclipse 几乎相同的插件，例如 HTML5 项目、Java Web 以及自动完成模式。

# api - 关于简单但安全的应用到应用身份验证的建议

> ID：10940369
> 
> 赞同：1
> 
> 时间：2012-06-07T21:49:19.453
> 
> 标签：api, session, authentication, kerberos

**精确**

App1 应该对 AuthApp 的查询进行身份验证：安全且简单的最佳方式是什么？

**细节**

我们正在将集成应用程序的一部分移动到一组专用的、独立的应用程序中，每个应用程序都专注于一个主要领域，以便在我们的主要应用程序之间共享服务。

该计划的一个特别重要的部分是用户身份验证和联系方式应通过中央“AuthApp”进行管理。

例如，当用户登录时，现有应用程序将充当 AuthApp 的代理。现有应用程序（例如 App1）将询问 AuthApp 用户（例如 User1）是否提供了正确的登录详细信息。

目前 App1 和 AuthApp 共享同一个局域网，通过 https 进行通信。这些因素在未来可能会发生变化，无论如何我们有兴趣知道人们认为 App1 应该向 AuthApp 验证其查询的最佳方式是什么，假设 App1 至少使用 UUID 向 AuthApp 注册。

哪个更好？

```
A.1 App1    : /token/<app1token>/user/<userid>/checkok
A.2 Authapp : response : whatever 
```

或这个：

```
B.1 App1    : /login/token (POST : passphrase)
B.2 AuthApp : response : session uuid
B.3 App1    : /token/<session_uuid>/user/<userid>/checkok 
```

由于我们将在应用程序和 AuthApp 之间进行大量活动，因此我们希望保持简单，并且我很想知道有关如何最好地做到这一点的任何想法。

我猜理想是一种类似于 Kerberos 可再生票证的机制——尽管我们热衷于避免 Kerberos 的开销和复杂性。

# recursion - F#用实际值替换变量导致无限循环（递归函数）

> ID：10940370
> 
> 赞同：1
> 
> 时间：2012-06-07T21:49:23.163
> 
> 标签：recursion, f#, infinite-loop

我最近开始使用 F# 并实现了一个非常基本的递归函数，它代表了埃拉托色尼筛法。我想出了以下工作代码：

```
static member internal SieveOfEratosthenesRecursive sequence accumulator =
    match sequence with
    | [] -> accumulator
    | head::tail -> let rest = tail |> List.filter(fun number -> number % head <> 0L)
                    let newAccumulator = head::accumulator
                    Prime.SieveOfEratosthenesRecursive rest newAccumulator 
```

这个函数并不是真正的内存效率，所以我试图消除变量“rest”和“newAccumulator”。我想出了以下代码

```
static member internal SieveOfEratosthenesRecursive sequence accumulator =
    match sequence with
    | [] -> accumulator
    | head::tail -> tail    |> List.filter(fun number -> number % head <> 0L) 
                            |> Prime.SieveOfEratosthenesRecursive (head::accumulator) 
```

据我了解，我读过的教程 Prime.SieveOfEratosthenesRecursive 将被调用，过滤后的*尾部*作为第一个参数，由*head::accumulator*组成的列表作为第二个参数。但是，当我尝试使用减少的变量使用来运行代码时，程序会陷入无限循环。为什么会发生这种情况，我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T21:53:58.127

> 据我了解，我已阅读 Prime.SieveOfEratosthenesRecursive 的教程将被调用，过滤后`tail`的参数为第一个参数，列表由`head::accumulator`第二个参数组成。

你有这个倒退。

在第一个版本中，您将通过`rest`then `newAccumulator`；在第二个版本中，您实际上是通过`newAccumulator`then `rest`。即，您已经转换了论点。

`Prime.SieveOfEratosthenesRecursive (head::accumulator)`是一个部分函数应用程序，您将在其中应用`(head::accumulator)`作为第一个参数 ( `sequence`)。此部分函数应用程序产生一个一元函数（期望`accumulator`），您将（通过`|>`）传递给该函数，该函数在您的代码的第一个版本中被调用`rest`。

更改`SieveOfEratosthenesRecursive`的参数顺序是最简单的解决方案，但我也会考虑类似以下惯用语：

```
static member internal SieveOfEratosthenesRecursive sequence accumulator =
    match sequence with
    | [] -> accumulator
    | head::tail ->
        tail
        |> List.filter(fun number -> number % head <> 0L) 
        |> Prime.SieveOfEratosthenesRecursive <| (head::accumulator) 
```

或者

```
static member internal SieveOfEratosthenesRecursive sequence accumulator =
    let inline flipzip a b = b, a
    match sequence with
    | [] -> accumulator
    | head::tail ->
        tail
        |> List.filter(fun number -> number % head <> 0L) 
        |> flipzip (head::accumulator)
        ||> Prime.SieveOfEratosthenesRecursive 
```

* * *

FWIW，在这里消除`rest`和`newAccumulator`命名变量不会对您的内存使用产生丝毫影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T22:06:16.323

第二个函数中的最后一次调用相当于：

```
Prime.SieveOfEratosthenesRecursive newAccumulator rest 
```

您可以在其中切换两个参数的位置。由于`newAccumulator`每次递归调用后都会变大，因此您永远不会达到空列表的基本情况。

经验法则是将最频繁变化的参数放在最后：

```
let rec sieve acc xs =
    match xs with
    | [] -> acc
    | x::xs' -> xs' |> List.filter (fun y -> y % x <> 0L) 
                    |> sieve (x::acc) 
```

上面的函数可以使用`function`关键字来缩短：

```
let rec sieve acc = function
    | [] -> acc
    | x::xs' -> xs' |> List.filter (fun y -> y % x <> 0L) 
                    |> sieve (x::acc) 
```

使用 pipe ( `|>`) 运算符只会使函数更具可读性，它根本不会影响内存使用。

# java - 可选地使用 String.split()，在分隔符的最后一次出现处拆分字符串

> ID：10940371
> 
> 赞同：5
> 
> 时间：2012-06-07T21:49:51.290
> 
> 标签：java, regex, string, split, tokenize

我有一个与这个正则表达式匹配的字符串：`^.+:[0-9]+(\.[0-9]+)*/[0-9]+$`它可以很容易地可视化为`(Text):(Double)/(Int)`. 我需要把这个字符串分成三个部分。通常这很容易，除了`(Text)`可能包含冒号，所以我不能拆分任何冒号 - 而是*最后一个*冒号。

这`.*`是贪婪的，所以它已经做了一个非常巧妙的工作，但这不会作为 String.split() 的正则表达式工作，因为它会吃掉我`(Text)`作为分隔符的一部分。理想情况下，我想要一些可以返回带有三个字符串的 String[] 的东西。我不使用 String.split() 100% 没问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T21:55:38.157

我不喜欢正则表达式（只是在开玩笑，但我不太擅长）。

```
String s = "asdf:1.0/1"
String text = s.substring(0,s.lastIndexOf(":"));
String doub = s.substring(s.lastIndexOf(":")+1,text.indexOf("/"));
String inte = s.substring(text.indexOf("/")+1,s.length()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T22:00:08.873

为什么不直接使用正则表达式？

```
Pattern p = Pattern.compile("^(.*):([\\d\\.]+)/(\\d+)$");
Matcher m = p.matcher( someString );
if (m.find()) {
  m.group(1); // returns the text before the colon
  m.group(2); // returns the double between the colon and the slash
  m.group(3); // returns the integer after the slash
} 
```

或类似的。该模式`^(.*):([\d\.]+)/(\d+)$`假设您实际上在所有三个位置都有值，并且在双位置只允许一个句点/句号，因此您可能需要根据您的规范对其进行调整。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T22:02:01.657

`String.split()`通常用于更简单的场景，其中分隔符和格式更加一致，并且您不知道要拆分多少元素。

您的用例需要一个普通的旧正则表达式。您知道字符串的格式，并且知道要收集三个值。尝试类似以下的操作。

```
Pattern p = Pattern.compile("(.+):([0-9\\.]+)/([0-9]+)$");
Matcher m = p.matcher(myString);
if (m.find()) {
    String myText = m.group(1);
    String myFloat = m.group(2);
    String myInteger = m.group(3);
} 
```

# installation - 有什么好的windows安装程序？

> ID：10940378
> 
> 赞同：2
> 
> 时间：2012-06-07T21:50:24.610
> 
> 标签：installation, windows-installer

我正在为我公司的软件编写安装程序。规格非常严格：不需要管理员权限，如果它还包括自动更新功能，那就太好了，有一个漂亮的 UI（与普通的 Windows 向导 UI 不同），小而快，健壮......

我查看了 Advanced Installer，除了具有良好的 UI 之外，它满足了一切。（它显示了超级老旧的经典 MSI 安装程序 UI）。我们希望有一些更用户友好的东西。

考虑到这些限制，您对我应该关注的安装人员有什么建议吗？

PS：接下来我正在阅读有关 Google 的 Omaha，然后可能是 NSIS 和 InnoSetup / WIX ......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T22:26:13.550

这个问题非常主观。但是 Office 2007、2010、Visual Studio 2012（又名 VS11）都是使用[WiX](http://wix.codeplex.com/)开发的。该软件是完全开源的，您可以查看最新的每周发布，以查看具有非常漂亮 UI 的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T21:54:11.350

Amm .. 我不明白你是想自己开发还是使用其他软件，但如果你这样做，我认为这`Install creator pro`对你有好处。

# debugging - nodejs中的会话访问问题？

> ID：10940379
> 
> 赞同：0
> 
> 时间：2012-06-07T21:50:30.337
> 
> 标签：debugging, node.js, routing

我已修改[https://github.com/jimpick/everyauth-example-password/blob/master/server.js](https://github.com/jimpick/everyauth-example-password/blob/master/server.js)以使用 mysql 登录。

我想访问会话

```
authenticate(function(login, password) {
        var errors = [];
        var user = [];
        userModule.CheckUserLogin(login, password, function(err, results) {
            if(results.length > 0) {
                req.session.login = login;
                return user;
            }
            else {
                if(!user) return ['Login failed'];
            }
        });
        return user;
    }) 
```

我在底部有这个代码

var app = express.createServer(

```
 express.bodyParser()
  , express.static(__dirname + "/public")
  , express.cookieParser()
  , express.session({ secret: 'htuayreve' })
  , everyauth.middleware()
);

app.configure(function() {
    app.set('view engine', 'jade');
});

app.get('/', function(req, res) {
    res.render('home', { users: JSON.stringify(usersByLogin, null, 2) });
}); 
```

如果我从下到上粘贴应用程序代码，那么everyayth 的路由不起作用。我想简单地知道如何访问`req.session.login` 内部everyauth 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:18:40.573

您无法从您的`authenticate`函数访问会话。支持访问经过身份验证的用户信息的everyauth 方法是让您为`findUserById`everyauth 提供一个函数，该函数将根据用户ID 查找用户记录，该用户ID 在身份验证期间存储在会话中。完成此操作后，您可以通过`req.user`.

[请参阅everyauth 网站](http://everyauth.com/)上的“访问用户”部分。

# android - 在 Android 中将 DNS 解析添加到网络堆栈

> ID：10940384
> 
> 赞同：1
> 
> 时间：2012-06-07T21:50:49.543
> 
> 标签：android, google-chrome, webkit

有人可以指出我在 Android 浏览器中用于 DNS 预取的代码吗？我希望能够将 DNS 解析添加到操作系统。是否可以使用 Android 应用程序执行此操作，或者我需要更改源代码或内核？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:59:16.437

静态 DNS 条目存储在 /etc/hosts 中。您可以通过应用程序更改此设置，就像广告拦截器所做的那样，但设备需要植根。

# javascript - 高度自动 - 调整浏览器大小时显示隐藏内容

> ID：10940386
> 
> 赞同：1
> 
> 时间：2012-06-07T21:51:14.783
> 
> 标签：javascript, jquery, html, css

这是我正在开发的网站，如果我不够具体，请原谅我，我对此很陌生。

[http://daniel.grocock.me/portnew](http://daniel.grocock.me/portnew)

为#introexpand div 设置段落高度，并具有一个调整大小功能，用于检查浏览器调整大小时#introexpand 是否需要适合更大或更小的区域。

```
function resize() {
    $("#introexpand").css("height", "auto").show();
    var pHeight = $("#introexpand p:first").height() + 15;
    $("#introexpand").css("height", pHeight);
} 
```

因此，我在重置高度之前将 pHeight 设置为自动并显示一秒钟，以便获得正确的高度。

现在的问题是，当我调整浏览器的大小时，#introexpand div 会在单击链接 span.learnmore 之前弹出。

如果我从 CSS 中删除自动高度，它似乎可以修复它，但是单击时会出现 #introexpand div 剂量功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:58:54.327

你可以让这个函数在 onresize-handler ( [jQuery](http://api.jquery.com/resize) ) 中运行，但是用 CSS 解决起来更简单：

```
#introexpand {
    padding-bottom: 15px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T00:11:06.430

为什么不以不同的方式处理这个问题。与其尝试计算需要的高度，不如`#introexpand`让它始终是自动的，并`display:none;`在您单击 时切换`span.learnmore`。

为此，您需要`position:relative`从.`#introexpand``position:absolute``#introexpand p`

完成此操作后，只需默认设置`#introexpand`为`display:none`然后打开`click`，`span.learnmore`您可以`.show()`选择`div`或使用[`.slideToggle()`](http://api.jquery.com/slideToggle/)它以获得更高级的东西。

我只是认为你试图让它变得比它需要的更复杂。

# xss - 在每个页面上显式设置 document.domain

> ID：10940392
> 
> 赞同：0
> 
> 时间：2012-06-07T21:51:56.577
> 
> 标签：xss

在您网站的每个页面上设置 document.domain 是一个好主意。例如，如果您的网站是“www.example.com”。但您也可以使用“en.example.com”、“fr.example.com”和“www.example.com:8444”。当您必须处理 xss 问题时，所有这些域都使您难以使用。那么在所有页面上明确设置 document.domain = 'example.com' 是不是一个糟糕的主意？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-09T21:09:35.747

这取决于。这意味着任何其他子域都可以这样做，因此如果出现信任级别较低的子域（例如 ads.example.com 或survey.example.com），它可能会回来咬你。

# apache-camel - 使用骆驼通过 SMPP 发送短信

> ID：10940400
> 
> 赞同：1
> 
> 时间：2012-06-07T21:52:30.903
> 
> 标签：apache-camel

使用 Camel 通过 SMPP 发送 SMS 的最佳策略是什么？我应该使用 ProducerTemplate 吗？

我是骆驼新手，所以我不确定我的策略是否是最好的。

在我收到短信后的应用程序中，我必须发回另一条带有一些计算内容的短信。

我创建了一个 看起来像这样的**路由 smsIn**

```
from "uri=smpp ..."
unmarshal ref="bindyDataFormat"
to "uri=bean:myBean 
```

和**一条 smsOut**路线

```
from "uri=direct:smsOut"
to "uri=smpp ..." 
```

smsIn 路由接收短信，在 pojo 中转换其内容（csv 数据）并将该 pojo 发送到 myBean。

在 myBean 中，我进行一些处理，然后调用 ProducerTemplate 将我计算的消息发送到端点“direct:smsOut”。

我使用 producerTemplate 的原因是我必须在标题 (CamelSmppDestAddr) 和 Exchange 的正文中从我的 pojo 中设置一些信息。

我已经用 logica SMSC 模拟器进行了测试，这似乎工作正常，但想听听您对此解决方案的看法吗？

可靠性、事务性如何？在尝试将其发送到 SMSC 之前，我应该存储我的消息吗？我应该将其存储在数据库中，然后将其发布到队列中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T04:58:21.627

我不确定为什么你有一个生产者模板，你可以只建立路由（假设你从你的 bean 返回一些东西或者把一个 Exchange 作为参数）。

```
<from uri="smpp: ..."/>
  <bean ref="bean:myBean"/>
  <to uri="jms:queue:myQueue"/> 
```

然后不使用直接，而是使用事务性和持久性的 JMS 队列。假设您的 smpp 呼叫失败，则该消息将消失。使用这样的队列并确保其事务性，您可以确保在路由的这个阶段不会丢失数据。

```
 <from uri="jms:queue:myQueue"/>
   <transactional/>
   <to uri="smpp.."/> 
```

我建议使用 Apache ActiveMQ 作为 JMS 中间件。实际上，如果你下载 ActiveMQ，你会得到骆驼捆绑，所以你实际上可以从 ActiveMQ 运行你的骆驼路由。

您可能希望根据您想要发生的事情来调整重试和错误处理的发生方式（永远每秒重试一次？，重试五次，然后放入错误队列？等等）。阅读本页：[Camel 中的事务错误处理](http://camel.apache.org/transactionerrorhandler.html)

有关更深入的信息和更多的调整，您可能还想阅读以下内容： [Transactional Client](http://camel.apache.org/transactional-client.html)

# python - 比较列表 - 删除 id = id 和 date > date 的列表

> ID：10940401
> 
> 赞同：0
> 
> 时间：2012-06-07T21:52:41.013
> 
> 标签：python, list, duplicates

我有一个列表列表

```
[['Id', 'fname', 'lname', 'gender', 'startdate'],
['100', 'John', 'Jackson', 'M', '08/09/2000'],
['101', 'Jenny', 'Hobbs', 'F', '01/13/1995'],
['100', 'John', 'Jackson', 'M', '08/09/1995']] 
```

我想删除 ID == ID AND St​​artDate < StartDate 的重复列表。保留具有最近开始日期的唯一 ID 的列表。

```
[['Id', 'fname', 'lname', 'gender', 'startdate'],
['100', 'John', 'Jackson', 'M', '08/09/2000'],
['101', 'Jenny', 'Hobbs', 'F', '01/13/1995']] 
```

任何帮助都会很棒

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T22:00:15.830

在按日期顺序对行进行排序后，按 ID 将行填充到字典中。您自己唯一需要做的就是在使用它之前删除标题。

```
import time

data = [['100', 'John', 'Jackson', 'M', '08/09/2000'],
['101', 'Jenny', 'Hobbs', 'F', '01/13/1995'],
['100', 'John', 'Jackson', 'M', '08/09/1995']]

data = sorted(data, key=lambda x:time.strptime(x[4], '%m/%d/%Y'))   # sort data in ascending date order

keys = [x[0] for x in data]
print keys

d = dict(zip(keys,data))                 # add to dictionary ... most recent values overwrite older ones

print d.values() 
```

生成输出：

```
[['100', 'John', 'Jackson', 'M', '08/09/2000'], ['101', 'Jenny', 'Hobbs', 'F', '01/13/1995']] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T22:32:53.483

类似于@Maria Zverina，但更结构化：

```
import time

data = [
    ['100', 'John', 'Jackson', 'M', '08/09/2000'],
    ['101', 'Jenny', 'Hobbs', 'F', '01/13/1995'],
    ['100', 'John', 'Jackson', 'M', '08/09/1995']
]

# sort by date, ascending
data.sort(key=lambda d: time.strptime(d[4], "%m/%d/%Y"))

# load into a dict, key on ID, later data overwrites earlier
latest = dict((d[0], d) for d in data)

# return to list, sorted by ID
data = sorted(latest.itervalues(), key=lambda d: int(d[0])) 
```

返回

```
# most recent data for each ID, sorted by ID:
[
    ['100', 'John', 'Jackson', 'M', '08/09/2000'],
    ['101', 'Jenny', 'Hobbs', 'F', '01/13/1995']
] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T22:15:03.240

这是另一个解决方案。我只是在找到它们时将它们放入一组中。该`orig`变量包含列表的原始列表，并且`res`是删除重复的列表列表。

```
mod_set  = set()
res = list()
for x in orig:
    if x[0] not in mod_set:
            res.append(x)
            mod_set.add(x[0]) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T22:26:56.627

这是一个小脚本来做你想做的事：

```
import time

mylist = [['100', 'John', 'Jackson', 'M', '08/09/2000'],
['101', 'Jenny', 'Hobbs', 'F', '01/13/1995'],
['100', 'John', 'Jackson', 'M', '08/09/1995']]

dict = {} 
for sublist in mylist: 
   id,fname,lname,gender,startdate = sublist 
   if not id in dict: 
      dict[id] = [fname,lname,gender,startdate] 
   else: 
      olddate = dict[id][3] 
      if time.strptime(startdate,'%d/%m/%Y') > time.strptime(olddate,'%d/%m/%Y'): 
         dict[id] = [fname,lname,gender,startdate] 

print dict

Output: {'100': ['John', 'Jackson', 'M', '08/09/2000'], '101': ['Jenny', 'Hobbs', 'F', '01/13/1995']} 
```

最后`dict`将包含指向最新记录的唯一 ID。

# mysql - 通过固定列表对 MySQL 中的项目进行排序？

> ID：10940402
> 
> 赞同：44
> 
> 时间：2012-06-07T21:52:45.373
> 
> 标签：mysql, sql

我将有一个要订购的固定项目列表，直到我运行查询时我才会知道，因为有一个随机化步骤。

我想要以下内容：

假设`is_launch_set`将返回 1、3、7、11，但已随机分配到以下位置：

```
SELECT * FROM items WHERE is_launch_set=1 ORDER BY id values (3,11,7,1); 
```

关于如何实现这一目标的任何想法？我在想也许是`find_in_set`但不太确定。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-06-07T21:54:45.427

您可以使用以下任一方法来做到这一点：

```
ORDER BY FIND_IN_SET(id, '3,11,7,1') 
```

或者

```
ORDER BY FIELD(id, 3, 11, 7, 1) 
```

或者

```
ORDER BY CASE id WHEN 3 THEN 0
                WHEN 11 THEN 1
                 WHEN 7 THEN 2
                 WHEN 1 THEN 3
                        ELSE 4
         END 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-20T21:43:18.170

在 mys sql 8.0 中，它仅按第一列排序 - 在这种情况下为 3：

```
ORDER BY FIND_IN_SET(id, '3,11,7,1') 
```

在这个例子中，它起作用了，但有好处。你会看到最后 3 个，然后是 11，然后是 7，以此类推。

```
ORDER BY FIELD(id, 3, 11, 7, 1) 
```

如果您选择此示例，您将首先看到 1，然后是 7，然后是 11，以此类推。

```
ORDER BY FIELD(id, 3, 11, 7, 1) DESC 
```

# symfony1 - 如何使用 sfGuard 插件在 symfony 1.4 中为用户权限编写条件 if

> ID：10940403
> 
> 赞同：0
> 
> 时间：2012-06-07T21:52:48.340
> 
> 标签：symfony1, if-statement, symfony-1.4

我正在尝试编写一个条件来检查特定参数和用户凭据。如果用户没有两个凭据之一并传递了正确的参数，他们将被转发到安全登录屏幕。

这就是我所做的工作：

```
if ($request->getParameter('profile_type') == 'foo' && !$this->getUser()->isAdmin())  {
      return $this->redirect('sfGuardAuth/secure');
    } 
```

但是我添加了一个新的用户组，所以我需要这样的东西：

```
if ($request->getParameter('profile_type') == 'foo' && (!$this->getUser()->isAdmin() || !$this->getUser()->isFaculty())  {
      return $this->redirect('sfGuardAuth/secure');
    } 
```

因此，如果您不是管理员或教职员工，您将获得重定向。

这是语法还是逻辑问题？

**更新**

这是有效的，但在逻辑上似乎是错误的

```
if (($request->getParameter('profile_type') == 'foo') && (!$this->getUser()->isAdmin() && !$this->getUser()->isFaculty())) {
            return $this->redirect('sfGuardAuth/secure');
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:06:01.133

```
(!$this->getUser()->isAdmin() || !$this->getUser()->isFaculty()) 
```

应该

```
!($this->getUser()->isAdmin() || $this->getUser()->isFaculty()) 
```

更新，有更多解释：如果两者都返回 false，则要重定向用户，如果两者都是`isAdmin`，`isFaculty`则不重定向。

如果两者都是假的：

`!(false || false)`== `!false`== `true`=> 重定向
`!(true || false)`== `!true`== `false`=> 没有重定向

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T21:43:59.677

只是为了回答这个问题，这就是我要工作的内容：

```
if (($request->getParameter('profile_type') == 'foo') && (!$this->getUser()->isAdmin() && !$this->getUser()->isFaculty())) {
            return $this->redirect('sfGuardAuth/secure');
    } 
```

我不确定 OR/AND 运算符如何工作以获得所需的结果，但它确实有效，所以这是一个不错的折衷方案。

# javascript - 如何从 iframe 中获取当前 iframe 偏移量？

> ID：10940414
> 
> 赞同：3
> 
> 时间：2012-06-07T21:54:19.750
> 
> 标签：javascript, jquery, internet-explorer-7, offset

我希望安全限制（跨站点脚本）会阻止我这样做，但我认为询问不会受到伤害。我正在处理一个页面，该页面可能嵌入到来自不同域的另一个页面中。我对 iframe 一无所知，除了我可以预测 src 属性的一部分。我可以检测到它是否被嵌入，但我真的需要知道它嵌入的偏移量。

我正在我的页面中进行一些位置计算（在这种情况下嵌入在 iframe 中）。无论它是否嵌入在所有当前浏览器中，它都很好用，但在 IE 7 中给我带来了问题。出于某种原因，jQuery 在 IE 7 中给我的偏移量与嵌入 iframe 偏移量的确切量不同。在这种情况下，如果我能得到补偿，我可以补偿它。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-22T15:43:45.377

你可以用 JavaScript 做到这一点。

父框架

```
<html>
<body>
    <iframe src="childFrame.html"></iframe>
</body>
</html> 
```

儿童框架

```
<html>
<body>
   Child Frame
</body>
<script type="text/javascript">
    alert(document.parentWindow.document.body.innerHTML);
</script>
</html> 
```

关键位在这里“document.parentWindow.document.body”。现在您有了父正文，您可以访问 HTML 并获取所需的任何属性。

反过来，您可以使用 iframe 上的 Sandbox 属性。查看下面的链接。不建议将此属性用于生产代码。

[http://www.w3schools.com/tags/tag_iframe.asp](http://www.w3schools.com/tags/tag_iframe.asp)

# c# - 哪个更可取：“const”或“static readonly”？

> ID：10940415
> 
> 赞同：1
> 
> 时间：2012-06-07T21:54:39.113
> 
> 标签：c#, static, resharper, constants, readonly

> **可能重复：**
> [C#：静态只读 vs const](https://stackoverflow.com/questions/755685/c-static-readonly-vs-const)

在这种情况下哪个更可取（没有双关语）：“const”或“static readonly”？

在阅读更好或在某处被推荐（很可能在 StackOverflow 上）之后，我将一些 const 声明更改为 static readonly 。

现在 ReSharper 想要改变：

```
private static readonly int NUMBER_OF_QUARTER_HOURS = 96; 
```

到：

```
private const int NUMBER_OF_QUARTER_HOURS = 96; 
```

我应该提交还是“抽铁”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T21:56:27.217

const 如果您在编译时间之前知道该值。

# django - Django 1.4 的 Django 分页

> ID：10940416
> 
> 赞同：1
> 
> 时间：2012-06-07T21:54:43.580
> 
> 标签：django, pagination, django-pagination

django-pagination 的文档对于 1.4 来说已经过时了。关注它们时，我没有收到错误，但分页不起作用。分页页面计数器加载，但没有分页。这是我所拥有的：

settings.py 这里：

```
TEMPLATE_CONTEXT_PROCESSORS = (
"django.contrib.auth.context_processors.auth",
"django.core.context_processors.debug",
"django.core.context_processors.i18n",
"django.core.context_processors.media",
"django.core.context_processors.static",
"django.core.context_processors.tz",
"django.core.context_processors.request",)

MIDDLEWARE_CLASSES = (
    'django.middleware.common.CommonMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'pagination.middleware.PaginationMiddleware',
)
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',     
    'django.contrib.admin',       
    'django.contrib.admindocs',
    'photologue',
    'pagination',
) 
```

gallery_detail.html 这里：

```
{% extends "photologue/root.html" %}
{% load pagination_tags %}
{% block title %}{{ object.title }}{% endblock %}

{% block content %}

<h1>Gallery {{ object.title }}</h1>
<h2>Originally published {{ object.date_added|date:"l, F jS, Y" }}</h2>
{% if object.description %}<p>{{ object.description }}</p>{% endif %}
<div class="photo-gallery">

<table border="0" cellspacing="0" cellpadding="0">
  <tr>
    {% autopaginate object.public 10 %}
    {% for photo in object.public %}
    <td><div class="gallery-photo">
        <a href="{{ photo.get_absolute_url }}"><img src="{{ photo.get_thumbnail_url }}" alt="{{ photo.title }}"/></a>
    </div></td>  
    </tr>
</table>
    {% endfor %}
    {% paginate %}
</div>
<p><a href="{% url pl-gallery-list 1 %}">View all galleries</a></p>

{% endblock %} 
```

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:15:04.020

你的问题到底是什么，我不确定你在问什么。

我认为 django-pagination 已经两年左右没有维护了。我记得尝试过，但它不起作用，所以我切换到[django-endless-pagination](http://django-endless-pagination.readthedocs.org/en/latest/)并且没有任何问题。您可能需要考虑检查/尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T14:59:53.323

有几个项目可能应该在模板中更正。尝试以下一项或两项：

A. 解决方案可能有效，但可能不是您想要的。

```
<div class="photo-gallery">

<table border="0" cellspacing="0" cellpadding="0">
  <tr>
    {% autopaginate object.public 10 %}
    {% for photo in object.public %}
    <td><div class="gallery-photo">
        <a href="{{ photo.get_absolute_url }}"><img src="{{ photo.get_thumbnail_url }}" alt="{{ photo.title }}"/></a>
    </div></td>  
    {% endfor %}
    {% paginate %}
    </tr>
</table>
</div> 
```

B. 解决方案 - 如果 A 不起作用，试试这个。

```
<div class="photo-gallery">

<table border="0" cellspacing="0" cellpadding="0">
    {% autopaginate object.public 10 %}
  <tr>
    {% for photo in object.public %}
    <td><div class="gallery-photo">
        <a href="{{ photo.get_absolute_url }}"><img src="{{ photo.get_thumbnail_url }}" alt="{{ photo.title }}"/></a>
    </div></td>  
    {% endfor %}
    </tr>
    {% paginate %}
</table>    
</div> 
```

# css - 如何在div内浮动图像

> ID：10940422
> 
> 赞同：6
> 
> 时间：2012-06-07T21:55:14.070
> 
> 标签：css, position, css-float

我有这个html：

```
<div class="speaker-list">
    <div class="view-content">
        <div class="views-row views-row-1 views-row-odd views-row-first">   
            <div class="views-field views-field-title">
                <span class="field-content">
                    <a href="/speaker/keith-anderson">Keith Anderson</a>
                </span>
            </div>  
            <div class="views-field views-field-field-job-title">
                <div class="field-content">VP, Digital Advisory</div>
            </div>  
            <div class="views-field views-field-field-company">
                <div class="field-content">RetailNet Group</div>
            </div>  
            <div class="views-field views-field-title-1">
                <span class="field-content">
                    <a href="/session/store">Store of the Future</a>
                </span>
            </div>  
            <div class="views-field views-field-field-headshot">
                <div class="field-content">
                    <div id="file-53" class="file file-image file-image-jpeg contextual-links-region"> 
                        <div class="content">
                            <img typeof="foaf:Image" src="/kanderson.jpg" width="180" height="180" alt="" />
                        </div>
                    </div>
                </div>
             </div>
        </div>
    </div>
</div> 
```

它是由 Drupal 视图动态生成的，所以我根本无法更改输出 html。我需要处理这里的东西。这是期望的结果：

![在此处输入图像描述](../Images/518a348eafccc9bc1cfaeff99e1f6faf.png)

头像上没有任何样式，这就是它的样子： ![在此处输入图像描述](../Images/b9836f68d1f1483de5c5f63cda0bad06.png)

我试图设置图像的样式以强制它浮动到文本的左侧：

```
.view-speaker-list div.view-content div.views-row div.views-field
div.field-content div.file-image div.content img {
    border: 1px solid #666;
    float: left;
    position: relative; /* tried with and without position (inc. absolute) */
    left: 30px;
} 
```

显然我做错了什么，因为这是我得到的（相对位置）： ![在此处输入图像描述](../Images/d6c87c0cc7da650f99c56d90018307de.png)

并具有绝对位置： ![在此处输入图像描述](../Images/ea08e953142ad480c79c20a7f9dc0813.png)

我还尝试将浮点数放在包含图像的“最上层”div 类上，在 div 上没有位置：

```
.view-speaker-list div.view-content div.views-row
div.views-field-field-headshot {
    float: left;
} 
```

它给出与位置相同的结果：相对截图。

我哪里错了？如果我可以控制 html，我会以不同的方式进行操作，但我不确定如何处理所有这些嵌套的 div。

**编辑为@WEX 添加新的屏幕截图**

这是我尝试使用重新排序的 html 的代码时的样子 - [http://jsfiddle.net/mPa7z/](http://jsfiddle.net/mPa7z/)

![在此处输入图像描述](../Images/c773ce3b1b2d72306bf0e4308764318e.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T22:13:50.543

我将尝试解释“正确”的使用方式，`float`以便您了解为什么您的方式不起作用。

在您的帖子中，您尝试将图像应用于`float: left`周围`<div>`的图像，但该技术仅在您浮动的元素高于您想要环绕它的所有元素时才有效。这“可能”解决了您的问题，但是如果您尝试使用它来创建两个不同的列，则该技术存在缺陷-如果右侧的文本高于浮动元素，则右侧的文本将在其下方换行. 因此，您必须在非浮动元素周围添加另一个容器，以确保它不会换行。这解决了你的问题，但如果你甚至不能编辑你的标记并没有真正的帮助！

我认为我在下面发布的技术效果更好，并解决了您的问题：http: [//jsfiddle.net/Wexcode/AQQwX/](http://jsfiddle.net/Wexcode/AQQwX/)

```
.view-content { 
    position: relative;
    min-height: 180px;
    padding: 0 0 0 180px; }
.views-row { padding: 20px 0 0 20px; }
.views-field-field-headshot {
    position: absolute;
    top: 0;
    left: 0; }​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T12:33:36.943

如果您可以在 Drupal 中访问视图本身，*则可以对元素重新排序*。登录 Drupal 后，打开视图（在 Drupal 7 中：Structure > Views > Viewname），查找“Fields”并单击“add”旁边的三角形，会弹出一个弹出窗口，然后单击“rearrange”。然后，您可以将照片字段拖到视图中的第一项，然后调整 CSS 以将图像浮动到左侧。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T12:27:52.393

艾美奖，

与其尝试爆头`float:left`，你是否考虑过制作其他人`float:right`？这将给人的印象是图像向左浮动，而无需以任何方式更改标记。

```
div.speaker-list div.views-row > div.views-field {
    float:right;
    clear:both;
}
div.speaker-list div.views-row > div.views-field.views-field-field-headshot {
    float:none;
    clear:none;
} 
```

上面的 CSS 应该适用于该特定配置，而不会更改任何其他 Drupal 生成的标记。为了确保其他 CSS 不会干扰，我已经应用了尽可能多的特异性。由于爆头将返回到 contains 中`<div>`，因此您不需要更改它的大小，除非商店太大（如果不查看您的数据我不知道）。最后，CSS 很简洁，因此您可以在每个元素的基础上添加您需要的任何其他样式。

希望这可以帮助，

模糊逻辑

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-07T22:11:07.550

当您可以在页面的其他位置放置一些代码时，您可以使用 jQuery 来控制 HTML。然后您可以对 DOM 树进行修改。

但我不明白为什么你不能编辑 HTML。Drupal 不是开源的吗？您应该能够使用 FTP 找到该文件并对其进行操作。

# ios - 我的撇号变成了‘Äô

> ID：10940423
> 
> 赞同：1
> 
> 时间：2012-06-07T21:55:17.777
> 
> 标签：ios, xcode, cocoa, apostrophe

我正在尝试在 didRegisterForRemoteNotificationsWithDeviceToken 中将 iOS 设备名称与 deviceToken 一起发送到我的服务器。我的设备中有一个撇号，请求字符串显示为 ....&name=John+Doe,Äôs+iPhone ...我试过用“”替换“'”和用“”替换“‚Äô”..但都没有修复它..我假设我需要转换编码？

```
NSString *string = [[UIDevice currentDevice] name];
output-> John Doe‚Äôs iPhone 
```

**编辑**

输出来自 NSLog(string);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T23:54:00.093

你不应该使用`NSLog`这样的用户提供的字符串。 `NSLog`需要一个格式字符串作为它的第一个参数。如果它包含格式说明符，它可能会使您的应用程序崩溃，并且如果由不受信任的来源提供，则可能会暴露安全漏洞。

您的编码问题似乎是 LLDB 中的错误。切换到 GDB 解决了这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T22:35:41.207

等等，你在做什么`NSLog(string)`？你需要`NSLog(@"%@", string)`

# core-data - Core Data + GCD 用于复杂后台数据处理的方法

> ID：10940424
> 
> 赞同：0
> 
> 时间：2012-06-07T21:55:18.057
> 
> 标签：core-data, grand-central-dispatch, nsmanagedobjectcontext

当在后台线程中调用的方法需要许多不同的 s 时，如何使用 Core Data 和 GCD `NSManagedObject`？您作为调用者可能不知道子调用中需要哪些对象？

考虑一个复杂的下载、解析和保存过程，其中包含许多托管对象、日期、状态等的辅助方法。当您使用 GCD 启动后台线程时，`NSManagedObjectContext`将需要一个新线程，这是肯定的。但是您无法判断每个子方法将需要哪些托管对象。那么，您是否需要将上下文传递给每个辅助方法，例如只是为了`NSDate`区分？

有没有一种简单的方法不会破坏代码行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T14:06:07.873

一种可以满足不破坏代码的要求的方法可能是在各种后台线程中接收您的数据并将其全部编码到字典中。如果使用 JSON 作为传输格式，那将是很少的代码行。

然后你可以将它全部传递给主线程上的一个块来创建托管对象并将其插入到托管对象上下文中。同样，与单线程解决方案相比，这不会带来太多开销。

# asp.net-mvc-3 - 用于 ASP.NET MVC3 的 Azure 和 Rotativa PDF 打印

> ID：10940431
> 
> 赞同：2
> 
> 时间：2012-06-07T21:55:44.877
> 
> 标签：asp.net-mvc-3, azure, pdf-generation

我正在为 ASP.NET MVC 应用程序使用[Rotativa PDF 打印从 html 内容生成 pdf。](http://letsfollowtheyellowbrickroad.blogspot.dk/2012/02/rotativa-how-to-print-pdf-in-aspnet-mvc.html)这在标准 IIS 上单独运行 MVC 应用程序时非常有用；pdf几乎立即生成。

但是，当 MVC 应用程序在 Azure 中部署为 Web 角色（在本地开发环境和 cloudapp.net 上）时，生成 pdf 打印文件最多需要 45 秒，并且似乎也无法显示内容资源（链接已损坏） . 有些事情似乎不对，不应该花那么长时间。

pdf 生成本身是使用 wkhtmltopdf 工具完成的，该工具将 html 内容转换为 PDF。wkhtmltopdf 是一个可执行文件，通过使用 Process.Start 执行，它再次被 MVC 应用程序调用。

```
 /// <summary>
    /// Converts given URL or HTML string to PDF.
    /// </summary>
    /// <param name="wkhtmltopdfPath">Path to wkthmltopdf.</param>
    /// <param name="switches">Switches that will be passed to wkhtmltopdf binary.</param>
    /// <param name="html">String containing HTML code that should be converted to PDF.</param>
    /// <returns>PDF as byte array.</returns>
    private static byte[] Convert(string wkhtmltopdfPath, string switches, string html)
    {
        // switches:
        //     "-q"  - silent output, only errors - no progress messages
        //     " -"  - switch output to stdout
        //     "- -" - switch input to stdin and output to stdout
        switches = "-q " + switches + " -";

        // generate PDF from given HTML string, not from URL
        if (!string.IsNullOrEmpty(html))
            switches += " -";

        var proc = new Process
                       {
                           StartInfo = new ProcessStartInfo
                                           {
                                               FileName = Path.Combine(wkhtmltopdfPath, "wkhtmltopdf.exe"),
                                               Arguments = switches,
                                               UseShellExecute = false,
                                               RedirectStandardOutput = true,
                                               RedirectStandardError = true,
                                               RedirectStandardInput = true,
                                               WorkingDirectory = wkhtmltopdfPath,
                                               CreateNoWindow = true
                                           }
                       };
        proc.Start();

        // generate PDF from given HTML string, not from URL
        if (!string.IsNullOrEmpty(html))
        {
            using (var sIn = proc.StandardInput)
            {
                sIn.WriteLine(html);
            }
        }

        var ms = new MemoryStream();
        using (var sOut = proc.StandardOutput.BaseStream)
        {
            byte[] buffer = new byte[4096];
            int read;

            while ((read = sOut.Read(buffer, 0, buffer.Length)) > 0)
            {
                ms.Write(buffer, 0, read);
            }
        }

        string error = proc.StandardError.ReadToEnd();

        if (ms.Length == 0)
        {
            throw new Exception(error);
        }

        proc.WaitForExit();

        return ms.ToArray();
    } 
```

有没有人对可能导致问题和降低性能的原因有任何想法？

兄弟。

米

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-11T23:58:12.200

我找到了根本原因。生成的 pdf 中损坏的 url 导致性能下降。由于负载平衡，Azure 在 URL 中包含端口号，因此我需要将 URL 转换为没有端口号的“公共”url。

# javascript - 通过 Javascript 将上传的文件发送到 API 的 IE6 兼容方式

> ID：10940434
> 
> 赞同：0
> 
> 时间：2012-06-07T21:55:50.443
> 
> 标签：javascript, internet-explorer-6

现在用户必须通过两种方式向我的应用程序发送数据：通过浏览器或通过我们的 API 上传 CSV 文件。

在这两种情况下使用 API 将大大减少重复。有没有办法他们可以使用现有的上传表单，而不是将 CSV 存储在服务器上，而是通过 Javascript 处理并发送到 API？

不幸的是，该解决方案必须与 IE6 兼容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T22:01:05.670

IE6 无法做到这一点（在我看来，甚至没有理由尝试这个）。
可能的解决方法：

*   将上传表单嵌入到 iframe 中（丑陋）
*   使用 FlashPlayer 9+/JavaApplet 执行上传（需要插件），但这也使您可以在发送数据之前对其进行处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T22:02:33.453

不幸的是，不，这在 IE6 中是不可能的。在 HTML5 中读取本地文件是可能的，但 IE 还有很长的路要走……

此外 - 不需要将 CSV 存储在服务器上。您可以在 servlet 中动态处理 CSV 并使用 API 来存储数据，而无需将 CSV 存储在服务器上。

# html - 表单元素具有相同的宽度，但未显示对齐

> ID：10940435
> 
> 赞同：1
> 
> 时间：2012-06-07T21:55:56.910
> 
> 标签：html, css

我有以下两个表单字段。它们具有相同的宽度，因此它们应该对齐显示，并且除了 Google Chrome 之外它们都是如此。在谷歌浏览器中，文本区域的宽度稍大一些。请帮我修复它。谢谢

```
 <input name="phone" type="text" id="phone"  style=" font-family: Verdana; color:#FFFFFF; font-size: 13px;background-color: #0E0E0F; border: 1px solid #740086; width:385px;  margin-bottom:10px;" size="38" value="Phone #" onfocus="if(this.value==this.defaultValue)this.value='';" onblur="if(this.value=='')this.value=this.defaultValue;"/>
   <textarea
    name="message"
    cols="38"
    rows="12"
    id="message"
    style="font-family:Verdana; color:#FFFFFF; font-size:13px; background-color:#0E0E0F; border:1px solid #740086; width:38px; margin-bottom:10px;overflow:hidden;"
    onFocus="if(this.value==this.defaultValue)this.value='';"
    onBlur="if(this.value=='')this.value=this.defaultValue;">
Message 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T22:31:40.523

在您发布的代码中，您的文本区域有一个`width:38px;`您的意思是必须`width:385px;`匹配输入字段的宽度吗？您可能还想包含一个[reset.css](http://meyerweb.com/eric/tools/css/reset/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T03:18:40.903

我怀疑元素样式中的`textarea`38px 是一个拼写错误，应该是 385px，否则在所有支持 CSS 的浏览器上，您会将该区域缩小。`input`而且我怀疑在实际代码中，有些东西会导致and`textarea`元素之间出现换行符；否则很难比较它们的宽度。

Chrome 上 textarea 稍宽的原因是[基于 WebKit 的浏览器的浏览器样式表](http://trac.webkit.org/browser/trunk/Source/WebCore/css/html.css)，`textarea`元素有 2px 的填充。如果您使用 Chrome 的 Inspect element 工具（通过右键单击）并在那里查看“Metrics”，您可以看到这一点。

明显的解决方案是`textarea { padding: 0; }`。但是由于填充实际上很有用，因此设置可能会更好

```
textarea, input { padding: 2px; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T22:31:47.383

您似乎正在使用`size`属性调整输入元素的大小并`cols`在您的文本区域中使用。

您还定义了两种样式：`width:385px`和`width:38px`（不等式可能是您的问题）。我不确定哪个需要 predence ( `size`or `cols`)，但为什么不避免混淆并`width`为两个元素设置 equal an 并删除`size`and `row`/`col`定义？

# mule - 异常是否通过组件绑定传播？

> ID：10940437
> 
> 赞同：2
> 
> 时间：2012-06-07T21:56:09.317
> 
> 标签：mule

使用下面的 Mule 配置和 Java 代码，我无法让 Mule 通过组件绑定传播异常。如何让远程服务上抛出的异常传播到调用组件？骡 EE 3.2.2

谢谢

**骡子配置**

```
<mule ...>
    <flow name="Test">
    <vm:inbound-endpoint path="Test" exchange-pattern="request-response" />
    <component class="foo.Component">
        <binding interface="foo.Interface" method="bar">
                <vm:outbound-endpoint path="Interface.bar"
                    exchange-pattern="request-response" />
        </binding>
        </component>
    </flow>

    <flow name="Interface.bar">
        <vm:inbound-endpoint path="Interface.bar" 
            exchange-pattern="request-response" />
        <scripting:component>
            <scripting:script engine="groovy">
                throw new Exception();
            </scripting:script>
        </scripting:component>
    </flow>
</mule> 
```

**Java 代码**

组件.java

```
package foo;

public class Component {

    private Interface theInterface;

    public void foo(final String unused) throws Exception {
        theInterface.bar();
    }

    public void set(final Interface anInterface) {
        theInterface = anInterface;
    }

} 
```

接口.java

```
package foo;

public interface Interface {

    String bar() throws Exception;

} 
```

**司机**

```
package foo;

import org.junit.Test;
import org.junit.runner.RunWith;
import org.mockito.runners.MockitoJUnitRunner;
import org.mule.api.MuleException;
import org.mule.api.client.MuleClient;
import org.mule.tck.junit4.FunctionalTestCase;

@RunWith(MockitoJUnitRunner.class)
public class ATest extends FunctionalTestCase {

    @Test(expected = Exception.class)
    public void willItThrowException() throws MuleException {
        final MuleClient client = muleContext.getClient();
        client.send("vm://Test", "", null, RECEIVE_TIMEOUT);
    }

    @Override
    protected String getConfigResources() {
        return "app/mule-config.xml";
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T22:05:22.670

异常不会通过消息交换作为“抛出的异常”传播，而是作为运行中消息的异常有效负载传播。

因此，调用的响应`vm://Interface.bar`应该是一条消息，该消息的异常有效负载设置为您抛出的异常。因为绑定将主要负载绑定到接口，所以无法从组件访问它。

一种选择是在`Interface.bar`流中添加一个响应转换器，它将异常有效负载（如果有）复制到主有效负载并允许 bar() 返回 Object（有时它是一个字符串，有时是一个异常）。或者使用 String 并将返回错误的约定定义为 String。

# javascript - 可以使用 Javascript 访问客户端的网络（有意）

> ID：10940442
> 
> 赞同：0
> 
> 时间：2012-06-07T21:56:27.447
> 
> 标签：javascript, forms, cross-domain, screen-scraping

我最近在我的路由器中发现了一个[漏洞](http://lastyearswishes.com/blog/view/4fcff51b4aa5d8385420c706)，基本上可以让我获得 root 访问权限。捕获？有一个`nonce`随机生成的隐藏表单值，必须发送它才能工作，这使得很难“轻松”完成

所以基本上我想在javascript中做这样的事情：

1.  得到`http://192.168.1.254/blah`
2.  使用正则表达式或类似的方法来提取 nonce 值
3.  将 nonce 值放入当前页面的隐藏字段中
4.  通过 POST 提交表单以`http://192.168.1.254/blah`完成我要发送的 nonce 值和其他表单值。

仅使用 HTML 和 Javascript 是否有可能？我对“必须在本地保存 HTML 文件然后打开”之类的东西持开放态度，我认为这是绕过跨域策略的一种方式。

但无论如何，这有可能吗？我希望它至少能够在 Firefox 和 Chrome 上运行。观众是那些有一定技术知识的人。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:09:37.770

*编辑：我已经重写了这个，因为我原来的答案不正确。*

由于您可以对本地文件进行 AJAX 调用，因此您可以这样做。

“AJAX 页面”是发出请求的页面。“请求的页面”是不言自明的。

1.  **您的计算机上**有您的 AJAX 页面。AJAX 页面**从您的计算机调用请求的页面，该页面与它自身位于同一文件夹中**。

2.  您指示用户**从他们的路由器获取请求的页面**并将**其放在与 AJAX 页面相同的文件夹中**。

3.  跨域策略现在不再适用，因为两个文件都在同一个文件夹中。

4.  您的页面可以有一个 POST 表单，其中`action`（目标页面）**是跨域的，应该没有限制**。

如果您可以在页面上运行 PHP 代码，请尝试使用[cURL](http://php.net/manual/en/book.curl.php)。这可以进行跨域请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T22:19:08.603

这不能从常规 HTML 页面完成。同源策略将阻止您连接到路由器。（将页面保存在本地没有帮助；几年前浏览器开始严格限制本地页面的功能。）

如果你真的想通过浏览器实现这一点，你可以编写一个[扩展](http://code.google.com/chrome/extensions/index.html). 来源限制不适用于浏览器扩展。

# sql-server - SQL Server - 嵌套查询需要 40 分钟才能运行

> ID：10940444
> 
> 赞同：0
> 
> 时间：2012-06-07T21:56:30.130
> 
> 标签：sql-server, tsql, select

我有一个从 SQL Server 2012 数据库运行的非常大的网络论坛应用程序（自 2001 年以来大约有 2000 万个帖子）。数据文件大小约为 40GB。

我在表格中添加了适当字段的索引，但是这个查询（显示每个论坛中帖子的日期范围）大约需要 40 分钟才能运行：

```
SELECT
    T2.ForumId,
    Forums.Title,
    T2.ForumThreads,
    T2.ForumPosts,
    T2.ForumStart,
    T2.ForumStop

FROM
    Forums
    INNER JOIN (

    SELECT
        Min(ThreadStart) As ForumStart,
        Max(ThreadStop) As ForumStop,
        Count(*) As ForumThreads,
        Sum(ThreadPosts) As ForumPosts,
        Threads.ForumId
    FROM
        Threads
        INNER JOIN (

            SELECT
                Min(Posts.DateTime) As ThreadStart,
                Max(Posts.DateTime) As ThreadStop,
                Count(*) As ThreadPosts,
                Posts.ThreadId
            FROM
                Posts
            GROUP BY
                Posts.ThreadId

        ) As P2 ON Threads.ThreadId = P2.ThreadId

    GROUP BY
        Threads.ForumId

) AS T2 ON T2.ForumId = Forums.ForumId 
```

我怎样才能加快速度？

更新：

这是估计的执行计划，从右到左：

```
[Path 1]

Clustered Index Scan (Clustered) [Posts].[PK_Posts], Cost: 98%
Hash Match (Partial Aggregate), Cost: 2%
Parallelism (Repartition Streams), Cost: 0%
Hash Match (Aggregate), Cost 0%
Compute Scalar, Cost: 0%
Bitmap (Bitmap Create), Cost: 0%

[Path 2]

Index Scan (NonClustered) [Threads].[IX_ForumId], Cost: 0%
Parallelism (Repartition Streams), Cost: 0%

[Path 1 and 2 converge into Path 3]

Hash Match (Inner Join), Cost: 0%
Hash Match (Partial Agregate), Cost: 0%
Parallelism (Repartition Streams), Cost: 0%
Sort, Cost: 0%
Stream Aggregate (Aggregate), Cost: 0%
Compute Scalar, Cost: 0%

[Path 4]
Clustered Index Seek (Clustered) [Forums].[PK_Forums], Cost: 0%

[Path 3 and 4 converge into Path 5]

Nested Loops (Inner Join), Cost: 0%
Paralleism (Gather Streams), Cost: 0%
SELECT, Cost: 0% 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:02:09.603

您是否尝试过将这 2 个派生表放入 #temp 表中？SQL Server 将从它们获取统计信息（单列），您也可以在它们上放置索引。

此外，乍一看索引视图可能会有所帮助，因为您有很多聚合。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T22:17:20.357

这样的事情怎么样？无论如何，你明白了......

```
SELECT f.ForumID,
f.Title,
MIN(p.[DateTime]) as ForumStart,
MAX(p.[DateTime]) as ForumStop,
COUNT(DISTINCT f.ForumID) as ForumPosts,
COUNT(DISTINCT t.ThreadID) as ForumThreads
FROM Forums f
INNER JOIN Threads t
ON f.ForumID = t.ForumID
INNER JOIN Posts p
ON p.ThreadID = p.ThreadID
GROUP BY f.ForumID, f.Title 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T22:23:01.100

当您这样做时，索引可能会起作用`SELECT FROM`，但子查询的结果不会被索引。加入他们可能会扼杀表演。

正如巴克利建议的那样，我会尝试将中间结果存储在 #temp 表中，并在执行最终查询之前添加索引。

但是外部`SELECT`不包括线程特定的信息。看起来查询只是按论坛选择最小/最大日期。如果是这样，您可以获得按论坛分组的最小/最大/计数帖子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T22:09:02.980

你真的需要聚合两次吗？这个查询会给你同样的结果吗？

```
SELECT 
T2.ForumId, 
Forums.Title, 
T2.ForumThreads, 
T2.ForumPosts, 
T2.ForumStart, 
T2.ForumStop  
FROM 
    Forums 
INNER JOIN (  
    SELECT
         Min(ThreadStart) As ForumStart,
         Max(ThreadStop) As ForumStop,     
         Count(*) As ForumThreads,     
         Sum(ThreadPosts) As ForumPosts,     
         Threads.ForumId 
    FROM     
        Threads     
    INNER JOIN (          
                SELECT             
                    Posts.DateTime As ThreadStart,             
                    Posts.DateTime As ThreadStop,             
                    Count(*) As ThreadPosts,             
                    Posts.ThreadId         
                FROM             
                    Posts         
                 ) As P2 ON Threads.ThreadId = P2.ThreadId  
    GROUP BY     
        Threads.ForumId  
    ) AS T2 ON T2.ForumId = Forums.ForumId 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-08T21:18:40.700

如果您通过将 ForumId 添加到 Posts 表来进行非规范化，您将能够直接从 Posts 表中查询所有统计信息。使用正确的索引，这可能会表现得很好。当然，这将需要对您的代码进行一些小改动，以便在插入 Posts 表时包含 ForumId ......

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-25T13:14:01.517

我在数据库中添加了更多索引，它大大加快了速度。执行时间现在约为 20 秒 (!!)。我承认很多添加的索引都是猜测（或者只是随机添加）。

# c++ - 使用 Cocoa 和 C++ 时刷新屏幕数据的正确方法是什么？

> ID：10940446
> 
> 赞同：2
> 
> 时间：2012-06-07T21:56:40.177
> 
> 标签：c++, objective-c, macos, cocoa

我正在使用 Cocoa 作为图形界面的 OS X 应用程序。但我的主要算法是用 C++ 编写的。该界面仅显示了 NSTextFields 和 NSLevelIndicator 中算法的一些值。

屏幕需要实时刷新来自算法的数据。

我所做的是一个 NSThread，它从算法中读取数据并放在屏幕上。但我认为这不是正确的方法。

你有什么建议？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T22:55:46.560

通常，您应该只从主线程更新 GUI。您可以使用如下代码向主线程提交一些工作：

```
dispatch_async(dispatch_get_main_queue(), ^{
    [myTextField setStringValue:@"a new string"];
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T08:42:18.450

您可以使用几种方法：

*   在主线程上使用重复的 NSTimer 从算法中获取值，然后显示它们
*   正如 Ken Thomases 所写，使用算法中的 dispatch_async
*   使用算法中的 performSelectorOnMainThread
*   让算法将通知发布到 NSNotificationCenter

# image - 将位图从资源文件加载到图像

> ID：10940447
> 
> 赞同：1
> 
> 时间：2012-06-07T21:57:05.017
> 
> 标签：image, delphi, resources, bitmap, load

如何从资源文件加载图像 bmp 并将其加载到 image1.Picture 中？我试过这个：

```
{$R resource.res}
procedure TForm1.Image1MouseDown(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer);
var
 BitMap1 : TBitMap;
begin
  BitMap1 := TBitMap.Create;
  try
    BitMap1.LoadFromResourceName(HInstance,'down');
    Image1.Picture(BitMap1);
  finally
    BitMap1.Free;
  end;
end; 
```

但不起作用。谢谢！

* * *

我创建了一个文件。rc：

```
DOWN BMP DOWN.BMP 
```

我用 brcc32.exe 编译：

```
brcc32.exe resource.rc 
```

我实现了资源：

```
{$R resource.res} 
```

但找不到文件bmp。

* * *

它不起作用，总是一个错误，但是我发现了另一个代码：

```
procedure TForm1.Image1MouseDown(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer);
begin
   Image1.Picture.Bitmap.Handle := LoadBitmap(hInstance, 'DOWN');
end; 
```

但是当我点击图片时消失了，为什么？谢谢

这是代码：

```
unit Unit1;

interface

uses
  Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
  Dialogs, StdCtrls, XPMan, ExtCtrls;

type
  TForm1 = class(TForm)
    XPManifest1: TXPManifest;
    Image1: TImage;
    procedure Image1MouseDown(Sender: TObject; Button: TMouseButton;
      Shift: TShiftState; X, Y: Integer);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}
{$R RESOURCE.RES}

procedure TForm1.Image1MouseDown(Sender: TObject; Button: TMouseButton; Shift: TShiftState; X, Y: Integer);
begin
   Image1.Picture.Bitmap.Handle := LoadBitmap(hInstance,'DOWN');
end;

end. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T22:45:30.453

您必须首先正确地创建资源。下面的示例（通用 Delphi，因为您没有指定版本）。

文件：（`Resource.rc`可怕的名称，顺便说一句，和一个可怕的资源名称）

```
DOWN BITMAP DOWN.BMP 
```

然后在代码中包含该文件供编译器处理：

```
{$R resource.res resource.rc}

procedure TForm1.Image1MouseDown(Sender: TObject; Button: TMouseButton; 
  Shift: TShiftState; X, Y: Integer);
var
 BitMap1 : TBitMap;
begin
  BitMap1 := TBitMap.Create;
  try
    BitMap1.LoadFromResourceName(HInstance,'DOWN');
    Image1.Picture.Assign(Bitmap1);;
  finally
    BitMap1.Free;
  end;
end; 
```

如果您的 Delphi 版本不支持上述`{$R }`指令，只需删除该`resource.rc`部分，然后首先从项目文件夹中的命令提示符编译资源：

```
brcc32 resource.rc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-18T09:52:13.410

在 Delphi 10 或更高版本中，您可以通过***Project Menu Project > Resources and Images创建资源***

[http://docwiki.embarcadero.com/RADStudio/Tokyo/en/Resources_and_Images](http://docwiki.embarcadero.com/RADStudio/Tokyo/en/Resources_and_Images)

# excel - 对象变量或未设置块 -

> ID：10940455
> 
> 赞同：7
> 
> 时间：2012-06-07T21:58:12.213
> 
> 标签：excel, vba

所以，我有一个工作表，我想在其中搜索 Range("A:A") 中的 Range("M" & i) 的值。但是，当我尝试运行此代码时，它返回错误：“运行时错误'91'：对象变量或未设置块。当我单击调试时，它发现错误

```
 SearchIn = Range("A:A") 
```

我确实谷歌了互联网和这个网站（找到了一些东西），但我仍然无法解决这个问题。有人有线索吗？

```
Sub Find_Replace()

Dim i As Integer
Dim SearchIn As Range
Dim SearchedObject As Range
Dim FinalCell As Range
Dim SumCell As Range

i = 5
SearchIn = Range("A1:A740")
StartSearch = Range("A" & i)
FinalCell = Range("N" & i)

Do While i <= 740

SearchedObject = SearchIn.Find(What:="M" & i, After:=StartSearch, LookIn:=xlValues,          LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:=False, SearchFormat:=False)

If SearchedObject.Value = Range("M" & i).Value Then FinalCell = FinalCell.Value + SearchedObject.Offset(0, 5).Value

Loop

End Sub 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-07T22:04:20.707

分配范围时，您必须使用`SET`

```
Sub Find_Replace()
    Dim i As Integer
    Dim SearchIn As Range
    Dim SearchedObject As Range
    Dim FinalCell As Range
    Dim SumCell As Range

    i = 5

    Set SearchIn = Range("A1:A740")
    Set StartSearch = Range("A" & i)
    Set FinalCell = Range("N" & i)

    Do While i <= 740

        Set SearchedObject = SearchIn.Find(What:="M" & i, After:=StartSearch, _
        LookIn:=xlValues, LookAt:=xlPart, SearchOrder:=xlByRows, _
        SearchDirection:=xlNext, MatchCase:=False, SearchFormat:=False)

        If Not SearchedObject Is Nothing Then
            If SearchedObject.Value = Range("M" & i).Value Then _
            FinalCell.Value = FinalCell.Value + SearchedObject.Offset(0, 5).Value
        End If
    Loop
End Sub 
```

**编辑**：还建议使用完整路径，否则搜索将始终发生在活动表中

例如

```
Set SearchIn = Sheets("Sheet1").Range("A1:A740") 
```

对其他人也是如此。

# linux - TCP 流量生成器

> ID：10940456
> 
> 赞同：-2
> 
> 时间：2012-06-07T21:58:17.243
> 
> 标签：linux, networking, tcp, ip, simulation

我正在寻找 TCP 流量生成器。问题是我不想像 Iperf 那样简单地发送 TCP 流量。我希望能够配置标志和其他标头字段，并且我想对传入的数据包做出反应，例如 TCP SYN。因此，例如，如果 TCP SYN 到达，我想发送一个 TCP FIN 数据包。

我更喜欢 Linux 工具，但如果该工具仅在其他操作系统下运行也可以。

我研究了hping3，它看起来很有希望。但我想在选择它之前研究其他工具。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-12T11:49:31.633

[SendIP](http://www.earth.li/projectpurple/progs/sendip.html)可以生成 TCP 数据包，带有操作 SYN/FIN 位以及其他字段的选项。

这种问题确实属于[Server Fault](https://serverfault.com/)。

# java - Java 中的 Pig UDF：错误 1070

> ID：10940463
> 
> 赞同：0
> 
> 时间：2012-06-07T21:58:42.533
> 
> 标签：java, hadoop, user-defined-functions, apache-pig

我正在尝试在 Java 中构建我的第一个 Pig UDF，并且在使用 Eclipse 构建时无法调用该函数（我的类路径中有 pig 0.10.0 jar 文件）。源文件在，类文件由Eclipse`/com/foo/bar/pig/IsInternal.java`放入。`/bin/com/foo/bar/pig/IsInternal.class`

我的代码如下所示：

```
package com.foo.bar.pig;

// ... imports ...

public class IsInternal extends FilterFunc {
    public Boolean exec(Tuple input) throws IOException {
        // ... code here ...
        return true; // or false
    }
} 
```

编译后，我`jar -cf PiggyBank.jar BiggyBank`从项目目录外运行，将其全部打包到 JAR 中。当我运行 Pig 时，我在 grunt shell 中尝试以下操作：

```
REGISTER /full/path/to/PiggyBank.jar
DEFINE isInternal com.foo.bar.pig.IsInternal();

A = LOAD '/some/file/in/hdfs' USING PigStorage();
B = FILTER A BY isInternal($1); 
```

那时我收到以下错误：

```
ERROR 1070: Could not resolve com.foo.bar.pig.IsInternal using imports: [, org.apache.pig.builtin, org.apache.pig.impl.builtin.] 
```

Java 代码本身很好（我已经对其进行了测试），并且我尝试在 DEFINE 中使用不同的类路径，但没有任何运气。我在网上没有找到任何帮助。我将如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:13:04.120

我对手工包装成 .jar 感到有些不安。您可以尝试放入 Eclipse 项目并从那里导出吗？

另外，你能确认一下jar的目录结构吗？它应该是这样的：`PiggyBank.jar/com/foo/bar/pig/IsInternal.class`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T05:46:11.050

这个错误看起来像你没有修复你的 UDF 的类路径路径错误我也有同样的问题你[在这个](http://simmantwidevision.blogspot.in/2013/06/pig-udf-basic-tutorial.html)链接中我解释了如何修复上述错误。希望它会帮助你。

# php - Zend Framework 真的是一个框架还是一个库？

> ID：10940466
> 
> 赞同：2
> 
> 时间：2012-06-07T21:58:46.733
> 
> 标签：php, zend-framework, frameworks, terminology

库可以描述为*您可以调用*的功能的集合。

框架可以描述为预制程序，您可以在其中插入自己的代码。然后，框架会在正确*的位置为您调用代码。*

在我的许多 PHP 应用程序中，我更多地将 Zend 用作库，我正在创建“框架”并使用 Zend 提供的库作为库。

Zend 框架真的是一个库吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T22:03:54.967

它可以是一个或两个。Zend 是一个 MVC 框架，但是可以独立于框架本身调用许多组件。

例如，我刚刚阅读[了使用 Yii1.1 和 PHP5 进行敏捷 Web 应用程序开发，其中](https://rads.stackoverflow.com/amzn/click/com/1847199585)有一章展示了如何使用 Zend 框架/库创建 XML 提要。所以我的 Yii 框架将 Zend 引用为一个库。它有很棒的对象和功能，所以为什么不尽可能将它们用作库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T22:03:43.803

Zend 是一个框架，但它是模块化的，因此可以用作库。

如果您使用推荐的 Zend 结构创建一个成熟的 MVC 应用程序，您将使用它作为一个框架。

如果您在单页 Web 脚本中调用 Zend::dosomting()，则说明您没有使用该框架。

我很欣赏 Zend 为您提供的灵活性。像 cakephp 这样的所谓快速应用程序框架在较大的项目中会很快崩溃。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T22:05:19.913

你使用它的方式看起来像是一个库，但这并不意味着它不是一个框架。它可以为您处理几乎所有事情，但如果您只使用它的功能的零碎部分，它更像是一个库。

一个也蛮大的。如果你只使用它的一部分，你可能想要将它局部化。

# python - scikit-learn CART 字符串数据

> ID：10940483
> 
> 赞同：3
> 
> 时间：2012-06-07T22:00:24.460
> 
> 标签：python, machine-learning, scikit-learn

你能用字符串数据训练 DecisionTreeClassifier 吗？

当我尝试使用字符串数据时，我得到一个 ValueError: could not convert string to float

`clf = DecisionTreeClassifier()
clf.fit([['asdf', '1'], ['asdf', '0']], ['2', '3'])`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T13:34:11.413

您需要将字符串值特征转换为 NumPy 数组中的数字特征；[`DictVectorizer`](http://scikit-learn.org/stable/modules/generated/sklearn.feature_extraction.DictVectorizer.html)为你做。

```
samples = [['asdf', '1'], ['asdf', '0']]
# turn the samples into dicts
samples = [dict(enumerate(sample)) for sample in samples]

# turn list of dicts into a numpy array
vect = DictVectorizer(sparse=False)
X = vect.fit_transform(samples)

clf = DecisionTreeClassifier()
clf.fit(X, ['2', '3']) 
```

记住`vect.transform`在将这些样本转换为字典后，在测试样本上使用。

# php - 当安全模式打开时，如何使用 php 创建隐藏文件

> ID：10940496
> 
> 赞同：0
> 
> 时间：2012-06-07T22:01:21.083
> 
> 标签：php, filesystems

我在本地使用windows，我想用php隐藏或创建一个隐藏文件。

我该怎么做？

**不使用 sistem() 或 exec() 因为 safe_mode 开启**

编辑：解析特定目录

http.conf：

```
< Directory "D:/xampp/htdocs/specific/directory">
  php_admin_flag safe_mode off 
< /Directory> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T22:06:46.107

您需要使用`system()`来修改服务器上的文件。

参见：[PHP windows 创建隐藏文件](https://stackoverflow.com/questions/4935614/php-windows-create-hidden-files)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T22:08:55.977

没有`system()`或`exec()`因为 PHP 没有执行此操作的功能，您将无法执行此操作。使用 system 非常简单，例如：

```
$file = 'myfile.txt';
system('attrib +h ' . escapeshellarg($file)); 
```

# xcode - 转换为目标 c 弧没有做任何事情

> ID：10940497
> 
> 赞同：1
> 
> 时间：2012-06-07T22:01:23.300
> 
> 标签：xcode, xcode4.2, automatic-ref-counting

在 XCode 4.2 中，当我尝试`Edit -> Refactor -> Convert to Objective-C ARC ...`转换后出现数百个错误。我使用 git 将代码重置为以前的无 ARC 自我，并且编译得很好。

我只是再次尝试`Edit -> Refactor -> Convert to Objective-C ARC ...`，它提供了完全零更改的更改预览。我的代码中都有 deallocs 和 release，XCode 说“目标当前使用 ARC”

我怎样才能让 XCode 4.2 意识到这个项目*没有*使用 ARC？

![XCode 的屏幕截图声称带有 dealloc() 的文件正在使用 ARC](../Images/ec0d6b13c33b8ab692a0a660177973dd.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T02:19:24.823

I was able to solve it by doing a git reset then Convert to ARC without selecting the problematic library.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-08T00:44:50.820

我不确定您的转换过程中哪里出了问题，但我建议您按照[本教程](http://www.raywenderlich.com/5677/beginning-arc-in-ios-5-part-1)进行操作，看看您的步骤有何不同。

我希望它有帮助:)

# java - 是否可以在 Android/dalvik 的 Java 类中覆盖本机方法？

> ID：10940502
> 
> 赞同：9
> 
> 时间：2012-06-07T22:02:30.223
> 
> 标签：java, android, overriding, easymock, native-methods

我正在`TestMe`使用 EasyMock 对一个类进行单元测试，它的一个方法（比如`method(N n)`）需要一个类型的参数，`N`该参数具有本机方法（比如`nativeMethod()`）。

```
class TestMe {
    void method(N n) {
        // Do stuff

        n.nativeMethod();

        // Do more stuff
    }
} 
```

`method()`需要`N.nativeMethod()`在某个时候调用，而我遇到的问题是我的 Easymock 模拟对象 N 无法覆盖本机方法。我不拥有 N 类，但我可以`TestMe`以任何必要的方式进行重构。

我决定创建自己的类`FakeN extends N`，它覆盖`nativeMethod`什么都不做：

```
class FakeN extends N {
    FakeN(int pointer) {
        super(pointer);
    }

    @Override
    public void nativeMethod(Object o) {
        // super.nativeMethod() is an actual native method defined as:
        // public native void nativeMethod(Object o)
        //
        // IGNORE
    }
} 
```

但是虽然编译器没有抱怨，但当我运行测试时，它似乎`N.nativeMethod()`是被调用的版本而不是`FakeN`s 版本。

这里有我可以使用的解决方法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T22:33:15.050

这些`native`方法可以像任何其他方法一样被覆盖，除非它们被声明`final`。只要确保您`TestMe.method(N n)`使用`FakeN`.

# performance - localhost Redis Db 的往返费用是多少？是可以忽略的吗？

> ID：10940503
> 
> 赞同：1
> 
> 时间：2012-06-07T22:02:32.370
> 
> 标签：performance, redis

我计划在 Windows 上使用 Redis。

服务器将包括 Redis Db 和 IIS。

延迟可以忽略吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T22:31:01.600

```
 RedisClient rc = new RedisClient("localhost");
        Stopwatch sw = Stopwatch.StartNew();
        for (int i = 0; i < 100000; i++)
        {
            rc.Ping();
        }
        sw.Stop();
        Console.WriteLine(sw.ElapsedMilliseconds);
        Console.ReadLine(); 
```

64 位窗口 7 i-5 2500K @3.9 GHz

100000 Ping 5.2 秒。我认为使用服务器的以太网卡得分会更好。

# visual-studio-2010 - 发生未处理的异常 xaml 单击此处重新加载

> ID：10940505
> 
> 赞同：1
> 
> 时间：2012-06-07T22:02:39.133
> 
> 标签：visual-studio-2010, xaml, exception, designer

Visual Studio 2010，我能够在设计器中查看 xaml。现在，我单击的每个 xaml 都会给我异常，并且没有关于导致异常的原因的信息。我尝试重新启动我的电脑，问题仍然存在。我觉得我一定错过了什么？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T15:44:20.593

我安装了 Visual Studio Service Pack 1，现在问题已解决。谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T20:03:42.840

通常在使用自定义复杂样式时，我发现设计人员在呈现 XAML 时遇到了困难，而不管服务包如何。要记住的事情

# php - mysql查询中可能的语法错误？

> ID：10940513
> 
> 赞同：-2
> 
> 时间：2012-06-07T22:04:11.703
> 
> 标签：php, mysql, sql, syntax

我对一次调用多个表的查询仍然很陌生，这是我的旧查询字符串，

```
$sql = "SELECT id,category,title,seo_url,product_line,look_for_terms,image,rating FROM sphinx_index WHERE id IN ($entry_ids) ORDER BY rating DESC"; 
```

这是我试图开始工作的新人，

```
$sql = "SELECT a.id, a.category, a.title, a.seo_url, a.product_line, a.look_for_terms, a.image, a.rating a.status, c.username FROM sphinx_index a, entry b, users c WHERE a.id IN ($entry_ids) AND b.user_id = c.id ORDER BY a.rating DESC"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:08:00.893

那里没有真正的问题，但如果你想看看 MySQL 是怎么想的：执行它并获取错误。

```
$result = mysql_query($query);

if($result === false)
{
    echo mysql_error();
} 
```

反正下次再具体点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T22:12:06.767

在您的 SQL 请求中，表 a 未与 b 或 c 连接，这看起来很奇怪；这种连接很少有意义。例如，您可能会错过 WHERE 中的这个附加子句：

```
AND a.id = c.id 
```

但很难猜出您的表在做什么，以及将 a 与其他 2 个表连接的正确方法是什么。

# blast - 我在 blast 上安装了一个，并且正在使用本地微生物数据库来运行 BLAST 搜索。“blastn”工作

> ID：10940515
> 
> 赞同：2
> 
> 时间：2012-06-07T22:04:37.390
> 
> 标签：blast

我已经在我的 Linux 机器上安装了 BLAST+ 以及微生物数据库的本地副本。“blastn”适用于类似的查询

```
blastn -query query.txt -db 16SMicrobial 
```

但是，blastp 失败，例如

```
blastp -query query_protein.txt -db 16SMicrobial 
```

给

> BLAST 数据库错误：在搜索路径 [..../databases] 中找不到蛋白质数据库 [16SMicrobial] 的别名或索引文件

我的数据库目录有这些文件-

> 16SMicrobial.nhr 16SMicrobial.nnd 16SMicrobial.nog 16SMicrobial.nsi 16SMicrobial.nin 16SMicrobial.nni 16SMicrobial.nsd 16SMicrobial.nsq

我的`.ncbirc`文件有

```
[NCBI]
DATA=.../databases

[BLAST]
BLASTDB=.../databases 
```

请问有什么问题吗？

# inno-setup - 从 Inno Pascal 设置 DestDir？

> ID：10940518
> 
> 赞同：5
> 
> 时间：2012-06-07T22:04:43.570
> 
> 标签：inno-setup

我想将文件安装在不同的文件夹中，具体取决于用户是选择为所有用户安装还是只为当前用户安装。

我添加了使用 CreateInputOptionPage() 来创建一个带有两个单选按钮的选项页面。

但是，我的安装程序现在到处都是重复的行，比如这两行：

```
Source: {#ProjectRootFolder}\License.txt; DestDir: {userdocs}\{#MyAppName}; Check: NOT IsAllUsers
Source: {#ProjectRootFolder}\License.txt; DestDir: {commondocs}\{#MyAppName}; Check:IsAllUsers 
```

有没有更优雅的方式来完成上述操作？例如，Pascal 代码可以创建一个像 #define 这样的变量，以便我可以使用它来代替上面的 {userdocs} 和 {commondocs} 吗？

更多细节：

上面的 IsAllUsers() 函数调用此代码：

```
function IsAllUsers: Boolean;
begin
#ifdef UPDATE
  Result := AllUsersInRegistryIsTRUE;
#else
  Result := AllUsersOrCurrentUserPage.Values[1]; // wizard page second radio button
#endif
end; 
```

和：

```
function AllUsersInRegistryIsTRUE: Boolean;  // True if preceding install was to all users' documents 
var
  AllUsersRegValue: AnsiString;
begin
  if RegQueryStringValue(HKEY_LOCAL_MACHINE, 'Software\MyApp', 'AllUsers', AllUsersRegValue) then
    Result := (UpperCase(AllUsersRegValue) = 'YES')
  else
    Result := FALSE;
end; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-08T00:33:33.397

会有这样的西装吗？

```
[Files]
Source: {#ProjectRootFolder}\License.txt; DestDir: {code:GetDir}\{#MyAppName};

...

[Code]
var
  OptionsPage: TInputOptionWizardPage;

procedure InitializeWizard;
begin
  OptionsPage := CreateInputOptionPage(wpUserInfo, 
              'please select', 'the kind of installation', 'and continue..', 
              True, False);
  OptionsPage.Add('All users');
  OptionsPage.Values[0] := True;
  OptionsPage.Add('This user');
end;

function GetDir(Dummy: string): string;
begin
  if OptionsPage.Values[0] then
    Result := ExpandConstant('{commondocs}')
  else
    Result := ExpandConstant('{userdocs}');
end; 
```

# css - css 样式在 ssl 上消失

> ID：10940525
> 
> 赞同：1
> 
> 时间：2012-06-07T22:05:32.687
> 
> 标签：css, html, internet-explorer

当通过 SSL 连接时，特定样式将从样式表中删除。我想不出任何押韵或理由，但它始终是相同的风格。或许值得注意的是，要使用 display:none; 隐藏的元素；可见。列表样式也恢复为默认浏览器设置，并且一些背景图像（不是全部）也被删除。所有 URI 路径都是相对的——既来自页头，也来自样式表本身。

例如，以下工作...

```
body { background: url(../images/bg-yellowstripes.jpg) repeat 0 0; } 
```

但是，下一行没有...

```
#masthead { background: url(../images/bg-header.jpg) repeat-x 0 100%; } 
```

任何人都有这方面的经验，可以帮助页面正确显示并避免 IE 混合内容警告？顺便说一句，只影响 Internet Explorer。Firefox、Safari、Chrome 都正常呈现页面，没有任何 SSL 警告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T19:52:25.003

听起来您正在使用绝对路径加载 CSS 文件。例如，如果您有一个将通过 HTTP 和 HTTPS 提供服务的站点，则应该使用相对路径。

**绝对：（**不要这样做，通过 SSL 查看时 IE 会给出安全警告）

```
<link rel="stylesheet" href="http://mydomain.com/css/style.css" /> 
```

**相对的：**

```
<link rel="stylesheet" href="/css/style.css" /> 
```

如果样式来自另一个域（例如 CDN），请使用双斜杠而不是指定协议。这将导致路径继承在发出 CSS 请求时请求页面的协议。

```
<link rel="stylesheet" href="//otherdomain.com/css/style.css" /> 
```

另外，使用 IE 开发者工具。他们会准确地告诉您哪些网络资源正在从哪个 SSL 页面加载，而不是哪个 SSL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-28T14:59:54.493

以及相对路径结构，如果它是 IE9 及以下，则客户端中存在内存限制，如果样式表太大，它将停止加载它们。如果您正在缓存一堆文件，我可以看到这种情况

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-29T12:46:04.430

如果您从另一个 URL（例如：fonts.googleapis.com）加载字体，请检查您的 CSS 中的序言。确保路径还指定：路径中的“HTTPS”。这个简单的更改立即解决了我的 CSS over HTTPS 问题。

旧序言：@import url(' [http://fonts.googleapis.com/css?family=Roboto](http://fonts.googleapis.com/css?family=Roboto) ...等)

更正的序言：@import url(' [https://fonts.googleapis.com/css?family=Roboto](https://fonts.googleapis.com/css?family=Roboto) ...等)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-29T19:42:22.360

尝试在 CSS 背景路径中添加引号，如下所示：

```
body { background: url('../images/bg-yellowstripes.jpg') repeat 0 0; } 
```

另外，我已经阅读了该`background`属性需要值的特定顺序（颜色 url Xpos Ypos 重复）。所以它会是这样的：

```
body { background: url('../images/bg-yellowstripes.jpg') 0 0 repeat; } 
```

除此之外，当我将它们加载到网站`http://`上时，我的样式也被丢弃了一次。`https://`但由于您使用的是相对路径，我猜这是另外一回事。

可能是缓存问题。

# php - 文件上传仅适用于某些图像 (class.upload.php)

> ID：10940527
> 
> 赞同：0
> 
> 时间：2012-06-07T22:05:36.197
> 
> 标签：php, image-uploading

我尝试过使用 PHP 上传图片的原生方式，但我的朋友建议我使用 class.upload.php 库，结果仍然与以前相同。我只能上传某些图像而没有那个小图标，这意味着浏览器找不到图像，但奇怪的是，当我将“无效”图像下载到我的计算机时，它们很好。大约 50% 的图像确实有效，但其余的只是显示它们应该具有的适当大小，但没有图像。这是我的代码（我的 html 表单有一个名为的文件输入类型`filename`：

```
$handle = new upload($_FILES['filename']);

if ($handle->uploaded)   
{
   if ($file_src_size < 20000)
   {
        $handle->file_new_name_body = "test";  
        $handle->image_convert = 'jpg';
        $handle->process('/');  

        echo "<img src = \"test.jpg\" />";
    }
    else echo "Files must be 20 kb or under";
}
else echo "Upload failed, please try again"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:30:18.807

您可以下载图像并在本地重新显示它们的事实表明问题不在于上传脚本。另一个问题可能是图像未正确保存以供网络查看。例如，一个文件以 .jpg 结尾并且可以在本地查看并不意味着它可以被浏览器识别。许多浏览器无法查看 CMYK jpeg。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-16T01:39:20.983

当出现问题时，您需要调试代码，只有有权访问您计算机的人才能告诉您原因。

1）您使用的库有错误检测代码

```
if ($handle->processed) {
       echo 'image resized';
       $handle->clean();
} else {
   echo 'error : ' . $handle->error;
} 
```

2）您应该能够查看处理后的图像数据，并找出浏览器无法将其解析为图像的原因。如果您可以为无效图像提供 URL，我将能够告诉您它有什么问题。

3) 调用“process('/');”将文件写入根目录 不好。您应该创建一个目录来保存来自其他人的文件，以避免在某些人上传名为“index.php”的图像时出现潜在问题。

# java - 在 Android 上清除内部存储中的文件内容

> ID：10940530
> 
> 赞同：0
> 
> 时间：2012-06-07T22:05:51.437
> 
> 标签：java, android, logging

我有一个日志记录类，用于写入应用程序内部存储空间中的文件。每当日志文件超过大小限制时。为了清除内容，我将关闭当前的 FileOutputStream 并使用写入模式创建一个新流并将其关闭。有没有更好的方法来实现这一点：

```
public final void clearLog() throws IOException {
        synchronized (this) {
            FileOutputStream fos = null;
            try {
                // close the current log file stream
                mFileOutputStream.close();

                // create a stream in write mode
                fos = mContext.openFileOutput(
                        LOG_FILE_NAME, Context.MODE_PRIVATE);
                fos.close();

                // create a new log file in append mode
                createLogFile();
            } catch (IOException ex) {
                Log.e(THIS_FILE,
                        "Failed to clear log file:" + ex.getMessage());
            } finally {
                if (fos != null) {
                    fos.close();
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T22:08:25.400

您也可以一无所有地覆盖您的文件。

**更新**：

[getFilesDir ()](http://developer.android.com/reference/android/content/ContextWrapper.html#getFilesDir%28%29)似乎有更好的选择看看这个问题[How to delete internal storage file in android?](https://stackoverflow.com/questions/3554722/how-to-delete-internal-storage-file-in-android)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-13T07:54:11.133

将空数据写入文件：

```
String string1 = "";
        FileOutputStream fos ;
        try {
            fos = new FileOutputStream("/sdcard/filename.txt", false);
            FileWriter fWriter;

            try {
                fWriter = new FileWriter(fos.getFD());

                fWriter.write(string1);
                fWriter.flush();
                fWriter.close();
            } catch (Exception e) {
                e.printStackTrace();
            } finally {
                fos.getFD().sync();
                fos.close();
            }
        } catch (Exception e) {
            e.printStackTrace();
        } 
```

在这段代码中：

```
fos = new FileOutputStream("/sdcard/filename.txt", false); 
```

`FALSE`- 用于编写新内容。If `TRUE`- 文本附加到现有文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-03T17:51:54.163

```
public void writetofile(String text){ // text is a string to be saved    
   try {                               
        FileOutputStream fileout=openFileOutput("mytextfile.txt", false); //false will set the append mode to false         
        OutputStreamWriter outputWriter=new OutputStreamWriter(fileout);  
        outputWriter.write(text);  
        outputWriter.close();  
        readfromfile();  
        Toast.makeText(getApplicationContext(), "file saved successfully",  
                Toast.LENGTH_LONG).show();  
        }catch (Exception e) {  
            e.printStackTrace();  
    }  
} 
```

# list - 带有冒泡计数的可可左列表

> ID：10940532
> 
> 赞同：1
> 
> 时间：2012-06-07T22:06:18.283
> 
> 标签：list, cocoa, categories

我正在寻找的是一个带有左表视图的 Cocoa 组件，其中您有组（类别），其中包含圆形气泡内的项目数。我最近在一些应用程序中看到了这种视图。

它是某种可可组件还是我必须自定义？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T22:52:05.223

我认为您指的是Apple所谓的“源列表”或“源视图”。请参阅[SourceView 示例代码](http://developer.apple.com/library/mac/#samplecode/SourceView/Introduction/Intro.html)。

# perl - perl中创建链接列表中NEXT的含义

> ID：10940533
> 
> 赞同：1
> 
> 时间：2012-06-07T22:06:19.067
> 
> 标签：perl, linked-list

所以我正在尝试使用 Perl 学习链接列表。我正在阅读Jon Orwant 的[*用 Perl 掌握算法。*](http://shop.oreilly.com/product/9781565923980.do)在书中，他解释了如何创建链表。我了解其中的大部分内容，但我只是无法理解`NEXT`代码片段倒数第二行中的命令/索引/键。

```
$list=undef;
$tail=\$list;

foreach (1..5){
  my $node = [undef, $_ * $_];
  $$tail = $node;
  $tail = \${$node->[NEXT]}; # The NEXT on this line? 
} 
```

他想在那里做什么？

是`$node`一个标量，它存储了未命名数组的地址？此外，即使我们取消引用`$node`，我们是否应该通过索引号（例如 (0,1)）来引用各个元素。如果我们确实`NEXT`用作键，是`$node`对哈希的引用吗？我很迷茫。

用简单的英语表达的东西将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T22:24:17.903

`NEXT`是一个常量，在脚本前面声明过。它包含一个整数值，表示当前节点的成员元素的索引，该成员元素引用*下一个*节点。

在这种方案下，每个节点都是一个小的匿名数组。这个匿名数组的一个元素包含有效负载，另一个包含指向下一个节点的引用。

如果您查看该章中的一些较早的示例，您将看到以下声明：

```
use constant NEXT    => 0;
use constant VAL     => 1; 
```

So`$node->[NEXT]`与 ; 同义`$node->[0]`，其中包含对链表链中下一个节点的引用，而; 与;`$node->[VAL]`同义。`$node->[1]`当前节点中存储的值（或有效负载）。

我将评论您提供的代码片段：

```
foreach (1..5){
  my $node = [undef, $_ * $_];    # Create a new node as an anon array.

  # Set the previous node's "next node reference" to point to this new node.
  $$tail = $node;                 

  # Remember a reference to the new node's "next node reference" element.
  # So that it can be updated when another new element is added on next iteraton.
  $tail = \${$node->[NEXT]}; # The NEXT on this line? 
} 
```

顺便说一句，很棒的书。我有几本算法书籍，这些年来，那本仍然是我的最爱。

**更新：**我同意这本书不是当前惯用 Perl 或当前“最佳实践”Perl 的模型，但我确实认为它是一个很好的资源，可以帮助您了解如何使用 Perl 应用经典算法。我仍然会时不时地回顾它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T22:35:10.787

`NEXT`是一个常量，在前一页声明，包含一个数字。它被用于访问数组 ref 而不仅仅是常规数字，`$node`因此读者知道该 slot 是存储链表中下一个元素的位置。

这是一种使用数组引用来存储列表以外的东西的技术。与使用哈希引用相比，该技术旨在节省内存和 CPU 时间。实际上，它并没有太大的性能差异，而且使用起来很尴尬。这本书关于如何编写 Perl 代码的想法有点过时了。请改用哈希引用。

```
my $list;
my $tail = \$list;
foreach my $num (1..5) {
    my $node = { data => $num };
    $$tail = $node;
    $tail = \$node->{next};
} 
```

# python - 在Python中按索引从列表中删除元素的简洁方法

> ID：10940534
> 
> 赞同：5
> 
> 时间：2012-06-07T22:06:22.267
> 
> 标签：python, optimization

我有一个字符列表和索引列表

```
myList = ['a','b','c','d']
toRemove = [0,2] 
```

我想在一次手术中得到这个

```
myList = ['b','d'] 
```

我可以做到这一点，但有没有办法更快地做到这一点？

```
toRemove.reverse()
for i in toRemove:
    myList.pop(i) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T22:09:57.390

简洁的答案

```
>>> myList = ['a','b','c','d']
>>> toRemove = [0,2]
>>> 
>>> [v for i, v in enumerate(myList) if i not in toRemove]
['b', 'd']
>>> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-07T22:16:13.677

您可以像其他答案所建议的那样使用列表理解，但为了使其真正更快，我建议您使用 a`set`作为您要删除的索引集。

```
>>> myList = ['a','b','c','d']
>>> toRemove = set([0,2])
>>> [x for i,x in enumerate(myList) if i not in toRemove]
['b', 'd'] 
```

根据 toRemove 中的每个元素检查 myList 中的每个元素是 O(n*m)（其中 n 是 myList 的长度，m 是 toRemove 的长度）。如果使用 a `set`，则检查成员资格是 O(1)，因此整个过程变为 O(n)。但请记住，除非 toRemove 非常大（比如超过一千个），否则速度上的差异不会很明显。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-07T22:29:17.877

如果你愿意，你可以使用`numpy`.

```
import numpy as np

myList = ['a','b','c','d']
toRemove = [0,2]

new_list = np.delete(myList, toRemove) 
```

结果：

```
>>> new_list
array(['b', 'd'], 
      dtype='|S1') 
```

请注意，这`new_list`是一个`numpy` `array`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T22:10:56.147

单线：

```
>>>[myList[x] for x in range(len(myList)) if not x in [0,2]]
['b', 'd'] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T22:15:10.840

你可以编写一个函数来为你做这件事。

```
def removethese(list, *args):
    for arg in args:
        del list[arg] 
```

然后做

```
mylist = ['a', 'b', 'c', 'd', 'e']
removethese(mylist, 0, 1, 4) 
```

我的列表现在是 ['c', 'd']

# ios - 模态框隐藏然后重新打开后，模态框上的 iframe 中的 Youtube 在 iOS Safari 中不起作用

> ID：10940537
> 
> 赞同：5
> 
> 时间：2012-06-07T22:06:40.960
> 
> 标签：ios, iframe, youtube, embed, modal-dialog

我有一个网络应用程序，它使用通过 iframe 嵌入到模态对话框窗口中的 Youtube 视频。在 iPad 3、iOS 5.1 上的 Safari 中，视频在第一次加载时可以正常播放。但是，如果模态框被隐藏然后重新打开，视频将无法再播放。播放器将显示，但它只是一个没有控件的黑色空间。YouTube 水印仍然出现，并且可以点击。

Safari 控制面板中的播放按钮将从停止的位置播放视频的音频，但播放器仍然不会显示任何视频。音频播放结束后会出现“相关视频”建议图片，然后可以正常播放视频。

有谁知道是什么导致了这种行为？嵌入在所有主要桌面浏览器中都按预期工作，并且第一次在 iOS 中很好。只有当它在 iOS Safari 中重新打开时才会失败。

# xslt - XSLT：xsi:schemaLocation 未显示在 XML 上

> ID：10940541
> 
> 赞同：4
> 
> 时间：2012-06-07T22:06:54.197
> 
> 标签：xslt

我正在尝试进行转换，但我遇到了 xsi:schemaLocation 未显示在 XML 结果中的问题。我已经搜索了为什么会发生这种情况，但我似乎无法找到它。请帮忙

输入 XML

```
<asx:abap version="1.0" xmlns:asx="http://www.sap.com/abapxml">
<asx:values>
    <_--5CCLASS_--3DZCL_T4_NOM_--5CTYPE_--3DTT_SAP_REQ>
        <item>
            <TECHNICAL_KEY>00006000000000326391</TECHNICAL_KEY>
            <TSCARRIER>CPL</TSCARRIER>
            <MATERIAL>V2</MATERIAL>
            <PIPELINE_CYCLE>45</PIPELINE_CYCLE>
            <PIPELINE_SEQUENCE>1</PIPELINE_SEQUENCE>
            <CYCLE_YEAR>2012</CYCLE_YEAR>
            <SCD/>
            <NOM_NUMBER>CITV2451</NOM_NUMBER>
            <DATE_TIME>2012-06-20T00:00:00</DATE_TIME>
            <CREATE_DATE_TIME>2012-06-06T18:01:18</CREATE_DATE_TIME>
            <TOTAL_ITEMS>1 </TOTAL_ITEMS>
            <T4NOMNR/>
            <ITEM_NUMBER>0000000010</ITEM_NUMBER>
            <ITEM_DETAIL_CHANGE_CODE/>
            <PIPELINE_EVENT>Delivery</PIPELINE_EVENT>
            <PIPELINE_EVENT_AFFECT>Decrease</PIPELINE_EVENT_AFFECT>
            <QUANTITY>25000.00</QUANTITY>
            <UOM>BR</UOM>
            <LOCATION>AHT</LOCATION>
            <LOCATION_PARTNER>AHT</LOCATION_PARTNER>
            <CONTRACT_PARTNER/>
            <SUPPLIER/>
            <TANKAGE_PARTNER>KM1</TANKAGE_PARTNER>
            <CONSIGNEE_PARTNER>CIT</CONSIGNEE_PARTNER>
            <CONS_SUPPLIER>Consignee</CONS_SUPPLIER>
            <TRANSPURIND>Add</TRANSPURIND>
            <VERSION>1</VERSION>
            <PARTROLEIND>Shipper</PARTROLEIND>
            <SHIPPARTID>CIT</SHIPPARTID>
            <PART_IDENTIFIER>AssignedByCarrier</PART_IDENTIFIER>
            <PROD_IDENTIFIER>AssignedByMarketplace</PROD_IDENTIFIER>
            <PART_TANKAGE>Tankage</PART_TANKAGE>
            <CARRIER_STRING>Carrier</CARRIER_STRING>
            <SHIPNOMNRSTRING>ShipperNominationNumber</SHIPNOMNRSTRING>
        </item>
    </_--5CCLASS_--3DZCL_T4_NOM_--5CTYPE_--3DTT_SAP_REQ>
</asx:values> 
```

XSLT 代码

```
 <?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns="http://www.api.org/pidXML/v1.2" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:pidx="http://www.api.org/pidXML/v1.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.api.org/pidXML/v1.2 https://www.transport4.com/xml/schemas/PipelineNominationCreateV1-3.xsd">
    <xsl:template match="/">
        <xsl:element name="pidx:PipelineNominationCreate">
            <xsl:attribute name="pidx:documentIdentifier"><xsl:value-of select="//TECHNICAL_KEY"/></xsl:attribute>
            <xsl:attribute name="pidx:transactionPurposeIndicator"><xsl:value-of select="//TRANSPURIND"/></xsl:attribute>
            <xsl:attribute name="pidx:version"><xsl:value-of select="//VERSION"/></xsl:attribute>
            <xsl:element name="pidx:PipelineNominationCreateProperties">
                <xsl:element name="pidx:CreatedByPartner">
                    <xsl:element name="pidx:PartnerInformation">
                        <xsl:attribute name="partnerRoleIndicator"><xsl:value-of select="//PARTROLEIND"/></xsl:attribute>
                        <xsl:element name="pidx:PartnerIdentifier">
                            <xsl:attribute name="partnerIdentifierIndicator"><xsl:value-of select="//PART_IDENTIFIER"/></xsl:attribute>
                            <xsl:value-of select="//SHIPPARTID"/>
                        </xsl:element>
                    </xsl:element>
                    <xsl:element name="pidx:EventDateTime">
                        <xsl:value-of select="//CREATE_DATE_TIME"/>
                    </xsl:element>
                </xsl:element>
                <xsl:element name="pidx:PartnerInformation">
                    <xsl:attribute name="partnerRoleIndicator"><xsl:value-of select="//PARTROLEIND"/></xsl:attribute>
                    <xsl:element name="pidx:PartnerIdentifier">
                        <xsl:attribute name="partnerIdentifierIndicator"><xsl:value-of select="//PART_IDENTIFIER"/></xsl:attribute>
                        <xsl:value-of select="//SHIPPARTID"/>
                    </xsl:element>
                </xsl:element>
                <xsl:element name="pidx:PartnerInformation">
                    <xsl:attribute name="partnerRoleIndicator"><xsl:value-of select="//CARRIER_STRING"/></xsl:attribute>
                    <xsl:element name="pidx:PartnerIdentifier">
                        <xsl:attribute name="partnerIdentifierIndicator"><xsl:value-of select="//PART_IDENTIFIER"/></xsl:attribute>
                        <xsl:value-of select="//TSCARRIER"/>
                    </xsl:element>
                </xsl:element>
                <xsl:element name="pidx:ProductInformation">
                    <xsl:element name="pidx:ProductIdentifier">
                        <xsl:attribute name="assigningOrganization"><xsl:value-of select="//PROD_IDENTIFIER"/></xsl:attribute>
                        <xsl:value-of select="//MATERIAL"/>
                    </xsl:element>
                </xsl:element>
                <xsl:element name="pidx:PipelineCycle">
                    <xsl:value-of select="//PIPELINE_CYCLE"/>
                </xsl:element>
                <xsl:element name="pidx:PipelineCycleYear">
                    <xsl:value-of select="//CYCLE_YEAR"/>
                </xsl:element>
                <xsl:element name="pidx:PipelineSequence">
                    <xsl:value-of select="//PIPLELINE_SEQUENCE"/>
                </xsl:element>
                <xsl:element name="pidx:PipelineSCD">
                    <xsl:value-of select="//SCD"/>
                </xsl:element>
                <xsl:element name="pidx:ReferenceInformation">
                    <xsl:attribute name="referenceInformationIndicator"><xsl:value-of select="//SHIPNOMNRSTRING"/></xsl:attribute>
                    <xsl:element name="pidx:ReferenceNumber">
                        <xsl:value-of select="//NOM_NUMBER"/>
                    </xsl:element>
                    <xsl:element name="pidx:Description">
                    </xsl:element>
                </xsl:element>
            </xsl:element>
            <xsl:element name="pidx:PipelineNominationCreateDetails">
                <xsl:for-each select="//item">
                    <xsl:element name="pidx:PipelineNominationCreateLineItem">
                        <xsl:element name="pidx:LineItemNumber">
                            <xsl:value-of select="ITEM_NUMBER"/>
                        </xsl:element>
                        <xsl:element name="pidx:LineItemNominationQuantity">
                            <xsl:element name="pidx:Quantity">
                                <xsl:value-of select="QUANTITY"/>
                            </xsl:element>
                            <xsl:element name="pidx:UnitOfMeasureCode">
                                <xsl:value-of select="UOM"/>
                            </xsl:element>
                        </xsl:element>
                        <xsl:element name="pidx:PartnerInformation">
                            <xsl:attribute name="partnerRoleIndicator"><xsl:value-of select="CONS_SUPPLIER"/></xsl:attribute>
                            <xsl:element name="pidx:PartnerIdentifier">
                                <xsl:attribute name="partnerIdentifierIndicator"><xsl:value-of select="//PART_IDENTIFIER"/></xsl:attribute>
                                <xsl:value-of select="CONSIGNEE_PARTNER"/>
                            </xsl:element>
                        </xsl:element>
                        <xsl:element name="pidx:PartnerInformation">
                            <xsl:attribute name="partnerRoleIndicator"><xsl:value-of select="PART_TANKAGE"/></xsl:attribute>
                            <xsl:element name="pidx:PartnerIdentifier">
                                <xsl:attribute name="partnerIdentifierIndicator"><xsl:value-of select="//PART_IDENTIFIER"/></xsl:attribute>
                                <xsl:value-of select="TANKAGE_PARTNER"/>
                            </xsl:element>
                        </xsl:element>
                        <xsl:element name="pidx:ScheduleStartDateTime">
                            <xsl:value-of select="DATE_TIME"/>
                        </xsl:element>
                        <xsl:element name="pidx:ScheduleRequestDateTime">
                    </xsl:element>
                        <xsl:element name="pidx:PipelineEventInformation">
                            <xsl:element name="pidx:PipelineEvent">
                                <xsl:value-of select="PIPELINE_EVENT"/>
                            </xsl:element>
                            <xsl:element name="pidx:PipelineEventVolumeAffect">
                                <xsl:value-of select="PIPELINE_EVENT_AFFECT"/>
                            </xsl:element>
                        </xsl:element>
                        <xsl:element name="pidx:CustodyLocationInformation">
                            <xsl:element name="pidx:CustodyLocationIdentifier">
                                <xsl:attribute name="identifierIndicator"><xsl:value-of select="//PART_IDENTIFIER"/></xsl:attribute>
                                <xsl:value-of select="LOCATION_PARTNER"/>
                            </xsl:element>
                        </xsl:element>
                        <xsl:element name="pidx:ReferenceInformation">
                            <xsl:attribute name="referenceInformationIndicator">
                        </xsl:attribute>
                            <xsl:element name="pidx:ReferenceNumber">
                        </xsl:element>
                            <xsl:element name="pidx:Description">
                        </xsl:element>
                        </xsl:element>
                        <xsl:element name="pidx:Comment">
                        </xsl:element>
                    </xsl:element>
                </xsl:for-each>
            </xsl:element>
            <xsl:element name="pidx:PipelineNominationCreateSummary">
                <xsl:element name="pidx:TotalLineItems">
                    <xsl:value-of select="//TOTAL_ITEMS"/>
                </xsl:element>
            </xsl:element>
        </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

缺少 schemaLocation 的结果 XML

```
 <?xml version="1.0" encoding="iso-8859-1"?>
<pidx:PipelineNominationCreate xmlns:pidx="http://www.api.org/pidXML/v1.2" xmlns="http://www.api.org/pidXML/v1.2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" pidx:documentIdentifier="00006000000000326391" pidx:transactionPurposeIndicator="Add" pidx:version="1">
    <pidx:PipelineNominationCreateProperties>
        <pidx:CreatedByPartner>
            <pidx:PartnerInformation partnerRoleIndicator="Shipper">
                <pidx:PartnerIdentifier partnerIdentifierIndicator="AssignedByCarrier">CIT</pidx:PartnerIdentifier>
            </pidx:PartnerInformation>
            <pidx:EventDateTime>2012-06-07T15:55:35</pidx:EventDateTime>
        </pidx:CreatedByPartner>
        <pidx:PartnerInformation partnerRoleIndicator="Shipper">
            <pidx:PartnerIdentifier partnerIdentifierIndicator="AssignedByCarrier">CIT</pidx:PartnerIdentifier>
        </pidx:PartnerInformation>
        <pidx:PartnerInformation partnerRoleIndicator="Carrier">
            <pidx:PartnerIdentifier partnerIdentifierIndicator="AssignedByCarrier">CPL</pidx:PartnerIdentifier>
        </pidx:PartnerInformation>
        <pidx:ProductInformation>
            <pidx:ProductIdentifier assigningOrganization="AssignedByMarketplace">V2</pidx:ProductIdentifier>
        </pidx:ProductInformation>
        <pidx:PipelineCycle>45</pidx:PipelineCycle>
        <pidx:PipelineCycleYear>2012</pidx:PipelineCycleYear>
        <pidx:PipelineSequence/>
        <pidx:PipelineSCD/>
        <pidx:ReferenceInformation referenceInformationIndicator="ShipperNominationNumber">
            <pidx:ReferenceNumber>CITV2451</pidx:ReferenceNumber>
            <pidx:Description/>
        </pidx:ReferenceInformation>
    </pidx:PipelineNominationCreateProperties>
    <pidx:PipelineNominationCreateDetails>
        <pidx:PipelineNominationCreateLineItem>
            <pidx:LineItemNumber>0000000010</pidx:LineItemNumber>
            <pidx:LineItemNominationQuantity>
                <pidx:Quantity>25000.0</pidx:Quantity>
                <pidx:UnitOfMeasureCode>BR</pidx:UnitOfMeasureCode>
            </pidx:LineItemNominationQuantity>
            <pidx:PartnerInformation partnerRoleIndicator="Consignee">
                <pidx:PartnerIdentifier partnerIdentifierIndicator="AssignedByCarrier">CIT</pidx:PartnerIdentifier>
            </pidx:PartnerInformation>
            <pidx:PartnerInformation partnerRoleIndicator="Tankage">
                <pidx:PartnerIdentifier partnerIdentifierIndicator="AssignedByCarrier">KM1</pidx:PartnerIdentifier>
            </pidx:PartnerInformation>
            <pidx:ScheduleStartDateTime>2012-06-20T00:00:00</pidx:ScheduleStartDateTime>
            <pidx:ScheduleRequestDateTime/>
            <pidx:PipelineEventInformation>
                <pidx:PipelineEvent>Delivery</pidx:PipelineEvent>
                <pidx:PipelineEventVolumeAffect>Decrease</pidx:PipelineEventVolumeAffect>
            </pidx:PipelineEventInformation>
            <pidx:CustodyLocationInformation>
                <pidx:CustodyLocationIdentifier identifierIndicator="AssignedByCarrier">AHT</pidx:CustodyLocationIdentifier>
            </pidx:CustodyLocationInformation>
            <pidx:ReferenceInformation referenceInformationIndicator="">
                <pidx:ReferenceNumber/>
                <pidx:Description/>
            </pidx:ReferenceInformation>
            <pidx:Comment/>
        </pidx:PipelineNominationCreateLineItem>
    </pidx:PipelineNominationCreateDetails>
    <pidx:PipelineNominationCreateSummary>
        <pidx:TotalLineItems>1 </pidx:TotalLineItems>
    </pidx:PipelineNominationCreateSummary>
</pidx:PipelineNominationCreate> 
```

任何帮助，将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-08T01:48:03.283

您已经`xsi:schemaLocation`在 XSLT 文档中进行了定义，但是您在 XSLT 中的任何地方都没有尝试在 XML 文档中创建它。它不会自动添加到您的输出文档中。您将需要创建它。

`xsi:schemaLocation`您可以像这样从 XSLT 文档中复制属性：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" 
  xmlns="http://www.api.org/pidXML/v1.2" 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
  xmlns:pidx="http://www.api.org/pidXML/v1.2" 
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
  xsi:schemaLocation="http://www.api.org/pidXML/v1.2 https://www.transport4.com/xml/schemas/PipelineNominationCreateV1-3.xsd">
    <xsl:template match="/">
        <xsl:element name="pidx:PipelineNominationCreate">
            <xsl:copy-of select="document('')/*/@xsi:schemaLocation"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T22:29:19.543

您是否尝试过`xsi:schemaLocation`在 XSLT 中显式地添加/复制属性，就像添加/复制任何其他属性一样？例如，在该行之后

```
<xsl:element name="pidx:PipelineNominationCreate"> 
```

尝试添加这个：

```
<xsl:copy-of select="/node()/@*[local-name()='schemaLocation']"/> 
```

`schemaLocation`这应该从原始文档的根节点复制任何属性（不管它们的命名空间前缀）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-08T08:27:00.920

就像其他人所说的那样，该属性不存在于输出中，因为您没有尝试将其放在那里。

您是否知道，如果您使用文字结果元素，您的代码可能不会那么冗长？例如，这个：

```
<xsl:element name="pidx:PipelineNominationCreate">
            <xsl:attribute name="pidx:documentIdentifier"><xsl:value-of select="//TECHNICAL_KEY"/></xsl:attribute>
            <xsl:attribute name="pidx:transactionPurposeIndicator"><xsl:value-of select="//TRANSPURIND"/></xsl:attribute>
            <xsl:attribute name="pidx:version"><xsl:value-of select="//VERSION"/></xsl:attribute>
            <xsl:element name="pidx:PipelineNominationCreateProperties">
                <xsl:element name="pidx:CreatedByPartner">
                    <xsl:element name="pidx:PartnerInformation">
                        <xsl:attribute name="partnerRoleIndicator"><xsl:value-of select="//PARTROLEIND"/></xsl:attribute>
                        <xsl:element name="pidx:PartnerIdentifier">
                            <xsl:attribute name="partnerIdentifierIndicator"><xsl:value-of select="//PART_IDENTIFIER"/></xsl:attribute>
                            <xsl:value-of select="//SHIPPARTID"/>
                        </xsl:element>
                    </xsl:element>
                    <xsl:element name="pidx:EventDateTime">
                        <xsl:value-of select="//CREATE_DATE_TIME"/>
                    </xsl:element>
                </xsl:element> 
```

可以这样重写：

```
<pidx:PipelineNominationCreate 
  pidx:documentIdentifier="{//TECHNICAL_KEY}"
  pidx:transactionPurposeIndicator="{//TRANSPURIND}"
  pidx:version="{//VERSION}">
  <pidx:PipelineNominationCreateProperties>
     <pidx:CreatedByPartner>
        <pidx:PartnerInformation partnerRoleIndicator="{//PARTROLEIND}">
            <pidx:PartnerIdentifier 
                partnerIdentifierIndicator="{//PART_IDENTIFIER}">
                <xsl:value-of select="//SHIPPARTID"/>
            </pidx:PartnerIdentifier>
        </pidx:PartnerInformation>
        <pidx:EventDateTime>
            <xsl:value-of select="//CREATE_DATE_TIME"/>
        </pidx:EventDateTime> 
```

这更具可读性。

# jquery - jScrollPane 正在剪切我的隐藏内容

> ID：10940542
> 
> 赞同：1
> 
> 时间：2012-06-07T22:06:55.130
> 
> 标签：jquery, css, scrollbar, jscrollpane, jquery-jscrollpane

我正在研究[http://goo.gl/dB4Zw](http://goo.gl/dB4Zw)

当您单击链接“opsirnije”时，将显示隐藏的 div 'content-readmore'。

现在的问题是，当您单击第二个链接“opsirnije”时，一半的内容没有显示出来。

几个小时以来，我没有找到任何解决方案，除了当我从 .jspContainer 中删除“位置：相对”以及 .content-readmore 上没有“显示：无”时，它部分工作。

div '.content-readmore' 必须隐藏，直到有人点击名为 'opsirnije' 的链接，因此我使用 $('.content-readmore').css({display: 'none'}) 隐藏它。当我没有这条线时，滚动条正常工作（它显示内容而不剪切）。

选项 'autoReinitialise' 设置为 true，但没有帮助。

问题一定出在我的 CSS 代码中，但我找不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T22:31:55.613

您是否设置了`.article`单击“opsimije”时的高度？可能是 jScrollPane 做的。无论哪种方式，这都是你的问题所在。`.article`有些东西正在使用内联样式设置高度。

```
<div class="article" style="height: 395px;"> 
```

快速修复是像这样覆盖 CSS 中的高度：

```
.article { height:auto !important; } 
```

或者你可以弄清楚是什么设置了高度并在那里修复它。

# ios - Core Data - 轻量级迁移和多个核心数据模型文件 (xcdatamodel)

> ID：10940545
> 
> 赞同：17
> 
> 时间：2012-06-07T22:07:31.117
> 
> 标签：ios, core-data, core-data-migration

从由两个单独的 xcdatamodel 文件定义的存储迁移时，我在执行轻量级迁移时遇到问题。

在我的应用程序 1.0 版中，我将模型分解为分析模型、模型 A 以及模型 B 中的所有其他内容。编译时，模型将组合在一起，一切顺利。

在开发新版本 1.1 时，我通过向模型 B 添加新模型版本并将该新版本设置为活动来升级模型 B。

从 1.0 升级到 1.1 时会出现此问题。似乎 Core Data 检查磁盘上的模型存储（由 1.0 版创建）并查找描述它的模型，但无法找到定义整个存储的 SINGLE 模型（模型 A 仅涵盖分析，模型 B 涵盖其他所有内容），因此它会引发“找不到源存储模型”错误。

有没有人找到一种解决方案来分离模型，但仍然允许升级 + 轻量级迁移工作，而无需定义自定义迁移的额外麻烦？

这是用于加载模型的代码片段：

```
 NSArray *modelNames = [NSArray arrayWithObjects:@"model-A", @"model-B", nil];
    NSMutableArray *models = [NSMutableArray array];
    for (NSString *name in modelNames)
    {
        LogInfo(@"loading model %@", name);
        NSURL *modelURL = [[NSBundle mainBundle] URLForResource:name withExtension:@"momd"];
        NSManagedObjectModel *model = [[[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL] autorelease];
        [models addObject:model];
    }

    // combine all the separate models into one big one
    objectModel = [[NSManagedObjectModel modelByMergingModels:models] retain];

    NSURL *documentsDirectory = [NSURL fileURLWithPath:[SuperFileManager documentsDirectory] isDirectory:YES];
    NSURL *storeURL = [documentsDirectory URLByAppendingPathComponent:@"database.sqlite"];
    NSError *error = nil;

    coordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:objectModel];
    NSDictionary *options = [NSDictionary dictionaryWithObjectsAndKeys:
                                                  [NSNumber numberWithBool:YES], NSMigratePersistentStoresAutomaticallyOption,
                                                  [NSNumber numberWithBool:YES], NSInferMappingModelAutomaticallyOption,
                                                  nil];

    if (![coordinator addPersistentStoreWithType:NSSQLiteStoreType
                                   configuration:nil
                                             URL:storeURL
                                         options:options
                                           error:&error])
    {
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T02:41:09.780

在参加了 WWDC 2012 实验室并与 Core Data 团队会面后，您似乎被迫将所有模型信息放在单个 xcdatamodel 中。CoreData 不够智能，无法将其现有存储区作为创建它且仍在磁盘上的存储区的组合进行检查。正如 C. Roald 所指出的，您可以对旧的 xcdatamodel 文件进行一些处理，但很遗憾 Core Data 没有更优雅地处理这个问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-07T00:11:52.490

我也遇到了这个问题。我花了几个小时试图弄清楚 WTF - 非常令人沮丧。

我相信解决这个问题的最简单方法是：

1.  选择您要保留的模型——比如 ModelB——并根据已发布的版本为其创建一个新版本。我将发布版本 ModelBv1 和新版本 ModelBv1_merge 称为。

2.  在文本编辑器（即`ModelA.xcdatamodeld/ModelAv1.xcdatamodel/contents`和`ModelB.xcdatamodeld/ModelBv1_merge.xcdatamodel/contents`）中打开 ModelAv1 和 ModelBv1_merge 的内容 XML 文件，然后手动合并 XML。架构非常简单——只需复制`<entity>`元素并合并`<elements>`元素（到 _merge 内容文件中）就可以了。

3.  打开新 ModelBv2 的内容文件，然后再次将 ModelA 内容合并到其中。

4.  从项目文件中删除 ModelA。

在 Xcode 中检查 ModelBv1_merge 和 ModelBv2 看起来很正常，并且包含您期望的所有内容（旧模型 A 和模型 B 的联合）。构建，你应该完成。

（我认为这有一个警告“只要两个内容文件都是由相同版本的 Xcode 编写的”，但我认为如果你有一个旧的内容文件，它应该很容易通过在某处进行微不足道的更改来让 Xcode 重写它。 )

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-06-10T15:43:40.220

我有一个场景，我的应用程序模型是通过合并多个模型获得的，并且我设法以这种方式进行了一种自动轻量级迁移：

```
NSError* error = nil;
NSURL *documentsDirectory = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
NSURL *storeURL = [documentsDirectory URLByAppendingPathComponent:@"db.sqlite"];
NSString* storePath = [storeURL path];
NSLog(@"Store URL: %@", storeURL);
if( [[NSFileManager defaultManager] fileExistsAtPath:storePath] ){
    // Load store metadata (this will contain information about the versions of the models this store was created with)
    NSDictionary *storeMeta = [NSPersistentStoreCoordinator metadataForPersistentStoreOfType:nil URL:storeURL error:&error];
    if(storeMeta){
        // Get the current model, merging all the models in the main bundle (in their current version)
        NSManagedObjectModel* model=[NSManagedObjectModel mergedModelFromBundles:nil];
        // If the persistent store is not compatible with such a model (i.e. it was created with a model obtained merging old versions of "submodels"), migrate
        if(![model isConfiguration:nil compatibleWithStoreMetadata:storeMeta]){

            // Load the old model
            NSManagedObjectModel*oldModel = [NSManagedObjectModel mergedModelFromBundles:nil forStoreMetadata:storeMeta];

            // Compute the mapping between old model and new model
            NSMappingModel* mapping = [NSMappingModel inferredMappingModelForSourceModel:oldModel destinationModel:model error:&error];
            if(mapping){
                // Backup old store
                NSURL* storeBackupURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:[NSString stringWithFormat:@"db.sqlite.%@.bck", [NSDate new]]];
                BOOL done = [[NSFileManager defaultManager] moveItemAtURL:storeURL toURL:storeBackupURL error:&error];
                if(done){
                    // Apply the mapping
                    NSMigrationManager* migrationManager = [[NSMigrationManager alloc] initWithSourceModel:oldModel destinationModel:model];
                    BOOL done = [migrationManager migrateStoreFromURL: storeBackupURL
                                                                 type: NSSQLiteStoreType
                                                              options: nil
                                                     withMappingModel: mapping
                                                     toDestinationURL: storeURL
                                                      destinationType: NSSQLiteStoreType
                                                   destinationOptions: nil
                                                                error: &error];
                    if(done){
                        NSLog(@"Store migration successful!!!");
                    }
                }
            }
        }
    }
}

if(error){
    NSLog(@"Migration error: %@", error);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-18T15:22:57.783

升级 Core Data 模型的最佳方式是添加一个版本。如果你不这样做，你将在崩溃、更新危险和类似的事情中丧生。

添加新版本实际上非常容易。您选择数据模型文件并选择“编辑器 > 添加模型版本”。这将使您能够基于以前的模型添加新的数据库版本。然后您需要将当前数据模型设置为最新：[http ://cl.ly/2h1g301b0N143t0b1k2K](http://cl.ly/2h1g301b0N143t0b1k2K)

安装新版本时，iOs 将自动迁移数据（至少在我的情况下）。

希望这可以帮助。

# javascript - 显示/隐藏多个 div

> ID：10940546
> 
> 赞同：3
> 
> 时间：2012-06-07T22:07:31.490
> 
> 标签：javascript, html, css

向此脚本添加另一个类的最佳方法是什么：

```
<script type="text/javascript">
    $(document).ready(function(){
     $('.carlocation').hide();
      $('#parking-options').change(function() {
        $('.carlocation').hide();
        $('#' + $(this).val()).show();
     });
    });
</script> 
```

我对显示这些类的相同 ID 很好，我只是不确定如何向这个脚本添加另一个类。除了`'.carlocation' , '.insertclass' or '.carlocation .insertclass'`破坏脚本之外什么也没做。

谢谢！

编辑 - 标记的其余部分。

我希望 .carlocation 和 .car-position 作为两个隐藏的 div 开始，但在选择“自助泊车”时的第一个下拉菜单中显示其他两个选项。

```
<li>
                    <label for="select-choice-0" class="select">Parking Method:</label>
                    <select name="select-choice-15" id="parking-options" data-theme="b" data-overlay-theme="d" data-native-menu="false" tabindex="-1">
                       <option value="">Select One</option>
                       <option value="self">Self Parking</option>
                       <option value="auto">Valet Parking</option>
                    </select>
                </li>
                <li>
                    <div id="self" class="carlocation">
                    <h1>Enter Car Location:</h1>
                    <label for="select-choice-0" class="select">Floor:</label>
                    <select name="select-choice-15" id="location-floor" data-theme="b" data-overlay-theme="d" data-native-menu="false" tabindex="-1">
                       <option value="">Floor Select</option>
                       <option value="f1">F1</option>
                       <option value="f2">F2</option>
                       <option value="f3">F3</option>
                       <option value="f4">F4</option>
                    </select>
                    </div>
                </li>
                <li>
                <div id="self" class="car-position">
                <label for="select-choice-0" class="select">Row:</label>
                <select name="select-choice-15" id="position-row" data-theme="b" data-overlay-theme="d" data-native-menu="false" tabindex="-1">
                       <option value="">Row Select</option>
                       <option value="1">1</option>
                       <option value="2">2</option>
                       <option value="3">3</option>
                       <option value="4">4</option>
                       <option value="5">5</option>
                       <option value="6">6</option>
                       <option value="7">7</option>
                </select>
                <li> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T22:10:49.047

用 CSS 隐藏你的元素：

```
.carlocation, .car-position {
    display: none;
} 
```

从两个 div 中删除重复的“self”id，并将“self”值添加到两个 div 的 class 属性中：

```
<li>
    <div class="self carlocation">
        <!-- ... -->
    </div>
</li>
<li>
    <div class="self car-position">
        <!-- ... -->
    </div>
</li> 
```

*旁注：*您的第二个 div 缺少结束标记。

然后绑定到表单的 change 事件：

```
$("#parking-options").on("change", function(){
    $("div.self").toggle( $(this).val() === "self" );
});​​​​​​​​​​ 
```

这将所有 div 的可见性`.self`基于选择的值为“self”。如果选择“self”，则所有`div.self`项目都将变为可见。否则，它们将被隐藏。

小提琴：http: [//jsfiddle.net/jonathansampson/5KJV5/](http://jsfiddle.net/jonathansampson/5KJV5/)

或者您可以将它们滑入视图：

```
$("#parking-options").on("change", function(){
    $(this).val() === "self"
        ? $("div.self").slideDown()
        : $("div.self").slideUp();
});​ 
```

小提琴：http: [//jsfiddle.net/jonathansampson/5KJV5/2/](http://jsfiddle.net/jonathansampson/5KJV5/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T22:23:01.897

您的 jQuery 选择器可以通过在选择器的引号内创建一个逗号分隔列表来与多个类（或任何其他元素）交互，换句话说：

```
$('.carlocation, .insertclass, .anotherclass').hide(); 
```

编辑：请注意，在某些情况下区分大小写可能是一个问题，因此“.insertclass”并不总是与“.insertClass”相同 - 请参阅[$(.someClass) 之类的 JQuery 类选择器区分大小写？](https://stackoverflow.com/questions/2580029/jquery-class-selectors-like-someclass-are-case-sensitive)更多。

看起来您最初可能因为没有将所有选择器都放在相同的引号中而被挂断了。在类之间有一个空格`'.carlocation .insertclass'`实际上是在说“选择一个具有类“insertclass”的元素，它是一个具有类“carlocation”的元素的*子元素*

如果您要与同一组元素进行多次交互，则可以通过将它们分配给变量来优化代码：

```
var $myselection = $('.carlocation, .insertclass, .anotherclass'); 
```

（请注意，将“$”放在变量名中只是有助于提醒您它是一个 jQuery 对象，您可以随意命名它）。

您现在可以在 $myselection 上使用任何普通的 jQuery 方法：

```
$myselection.hide();
$myselection.show(); 
```

或稍后使用它（只要变量在您正在寻找的范围内可访问，这在您的初始示例中不会成为问题）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T22:25:51.743

要选择多个选择器，试试这个 -

```
$("selector1,selector2") 
```

它肯定会起作用。有关更多信息，请访问[jQuery 选择器参考。](http://api.jquery.com/category/selectors)

# web-services - SOA 和 Web 服务以及 ESB

> ID：10940552
> 
> 赞同：4
> 
> 时间：2012-06-07T22:08:09.030
> 
> 标签：web-services, soa, esb

我想了解几点：

1.  using-SOA 是否意味着我正在使用 Web 服务？（或反之亦然？）

2.  如果我通过 CXF 使用 Web 服务，我需要 ESB 吗？像 MULE 这样的 ESB 在带有 Web 服务的架构中的优势是什么？

3.  如果我用 Java 发布我的 Web 服务，这是否意味着任何拥有我的 WSDL 的客户都可以使用我的服务，即使他/她使用 .NET 或 Java 以外的其他东西？ESB 可以处理吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-08T14:33:38.763

using-SOA 是否意味着我正在使用 Web 服务？（反之亦然？） - SOA 是一个概念，而 Web 服务是 SOA 的一种实现。可以有很多方法来实现它，但最常见的一种是 Web 服务。

*   如果我通过 CXF 使用 Web 服务，我需要 ESB 吗？像 MULE 这样的 ESB 在带有 Web 服务的架构中的优势是什么？

ESB 是 SOA 中的主要组件。它是主要的集成中心。

下图将使您对 SOA 和 ESB 有更多的了解。（免责声明：我为 WSO2 工作，这是让您清楚了解 SOA 和 ESB 的图表之一）

[http://4.bp.blogspot.com/_yO8q3CIhuZs/S-Zq88vkJlI/AAAAAAAAAak/QAJeDVXVL_4/s1600/wso1.png](http://4.bp.blogspot.com/_yO8q3CIhuZs/S-Zq88vkJlI/AAAAAAAAAak/QAJeDVXVL_4/s1600/wso1.png)

*   如果我用 Java 发布我的 Web 服务，这是否意味着任何拥有我的 WSDL 的客户都可以使用我的服务，即使他/她使用 .NET 或 Java 以外的其他东西？ESB 可以处理吗？

如果您谈论的是 Web 服务，这意味着它们独立于编程语言。当然 ESB 可以处理它，并且它可以处理许多其他协议，因为它是集成中心。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-10T14:17:15.160

不幸的是，仅使用特定技术并不能作为您正在执行 SOA 的具体证据，正如 Kasun Indrasiri 在其他回复中所说，**SOA 是一种概念**，一种**可以**使用来自不同供应商的各种工具来实现的技术。

如果您正在按照[SOA 原则](http://www.soaprinciples.com)设计服务，那么您可能会使用 SOA，即使您使用的工具不具备其他现代平台中存在的所有功能。

在我看来，如果您的公司没有数百万美元的预算来购买软件许可证，您仍然可以使用当前工具从 SOA 中受益。

# c# - Web.Config 键值

> ID：10940558
> 
> 赞同：2
> 
> 时间：2012-06-07T22:08:36.257
> 
> 标签：c#, web-config

我想知道如何在字符串中为 web.config 文件中的 vaue 字段留出一个空格。例如`<add key="number" value="0001 " />`

我想在上面的值字段中的“1”之后输入一个空格，我尝试直接在值字段上输入一个空格，但这不会发生。

请分享您的意见/回复。

大家好，抱歉不清楚..这就是我想要的，我在 web.config 文件中添加以下内容''我在文本框中使用它作为前缀，一旦用户点击特定键，上面在文本框中输入前缀，允许用户只为净少数数字添加后缀。

所以在我的代码中

```
Tbx.text=app.DeploymentConfigurations["number"]; 
```

但我希望在 0001 之后也有一个空格作为前缀。我如何在键值中给出它。

* * *

注意：我不希望空间被硬编码。我已经这样做了。空间现在是一项要求，但以后可能会改变。因此，如果我在我的应用程序设置中包含空间会更好，这样用户只需在配置文件而不是代码上更改它。谢谢你们

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T23:11:10.097

没有看到更多代码，很难知道发生了什么。根据 D Stanley 的回答，这对我有用。

但是，由于您正在处理用户输入，因此最好还是强制执行前缀服务器端；一些选项包括：

1）将前缀放在用户无法编辑的单独文本框或标签中，放在用户可编辑的内容前面。这应该消除您的前缀被用户输入的可能性。

2）你可以格式化你的文本服务器端；也不需要硬编码，很简单：

```
<add key="Prefix" value="0001" />
<add key="Separator" value=" " /> 
```

然后，您可以执行以下操作：

```
string overall = String.Format("{0}{1}{2}", ConfigurationManager.AppSettings["Prefix"], ConfigurationManager.AppSettings["Separator"], userInputtedText); 
```

然后，用户当然可以删除空格或将其更改为不同的字符或独立于其他任何字符的字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T22:32:36.463

您使用的是标准 AppSettings 元素还是一些自定义设置提供程序？这对我有用：

应用程序配置：

```
<appSettings>
  <add key="Test" value="123456 "/>
</appSettings> 
```

代码：

```
string setting = ConfigurationManager.AppSettings["Test"];
Debug.Assert(setting.Length==7);  // returns true 
```

从 web.config 中拉出字符串后是否有东西修剪字符串？您如何使用该设置作为前缀？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T22:23:01.447

为什么不在代码中添加空格？

```
Tbx.text=app.DeploymentConfigurations["number"] + " "; 
```

由于您的要求要求您在配置中有空间，请尝试以下操作：

```
<add key="number" value="0001&#x20;" /> 
```

`&#x20;`是 unicode 中的空格字符。

除此之外，请使用魔术字符串：

```
<add key="number" value="0001{_}" /> 
```

然后在代码中替换：

```
Tbx.text=app.DeploymentConfigurations["number"].Replace("{_}", " "); 
```

这将允许您控制配置中空间的位置，同时仍能实现您正在寻找的结果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T22:26:32.240

这种行为实际上是原始 XML 解析的一部分，如下所述：

*   [如何在 XSLT 中元素的开始标记中保留空格](https://stackoverflow.com/questions/4617993/how-to-preserve-whitespace-within-an-elements-opening-tag-in-xslt)
*   [保留属性空白](https://stackoverflow.com/questions/260436/preserving-attribute-whitespace-in-xslt)

我刚刚使用@Kyle 建议验证了如下设置，它确实有效，因此凯尔建议可以用作答案：

在您的代码中，我认为最好的方法如下：

```
string s = app.DeploymentConfigurations["number"];
Tbx.text= s.PadRight(s.Length + 1); 
```

这将为您的价值增加 1 个空间。

# vaadin - com.vaadin.event.ListenerMethod$MethodException

> ID：10940559
> 
> 赞同：0
> 
> 时间：2012-06-07T22:08:36.187
> 
> 标签：vaadin

我有两个类 DocumentManagertwoApplication.java 和 DocumentEditor.java （代码如下）。当我点击“编辑”按钮时，我需要一些帮助来解决我得到的这个错误

com.vaadin.event.ListenerMethod$MethodException：在 com.example.documentmanagertwo.DocumentmanagertwoApplication$1 中调用方法 buttonClick 失败。在 com.vaadin.event.ListenerMethod.receiveEvent(ListenerMethod.java:532) 在 com.vaadin.event.EventRouter.fireEvent(EventRouter.java:164) 在 com.vaadin.ui.AbstractComponent.fireEvent(AbstractComponent.java:1219 ) at com.vaadin.ui.Button.fireClick(Button.java:550) at com.vaadin.ui.Button.changeVariables(Button.java:217) at com.vaadin.terminal.gwt.server.AbstractCommunicationManager.changeVariables( AbstractCommunicationManager.java:1455) 在 com.vaadin.terminal.gwt.server.AbstractCommunicationManager.handleVariableBurst(AbstractCommunicationManager.java:1399) 在 com.vaadin.terminal.gwt.server.AbstractCommunicationManager.handleVariables(AbstractCommunicationManager.handleVariables)

///////////////////////////////////////// ////////////////////////////////// DocumentManager两个应用代码如下：

```
FilesystemContainer docs = new FilesystemContainer (new File("C:\\Users\\MYRA\\Desktop\\Docx4java\\docs"));
Table selector = new Table (null, docs);
Label viewer = new Label ("Select a doc", Label.CONTENT_RAW);
Button edit = new Button ("edit");

@Override
public void init() {
    final Window mainWindow = new Window("Documentmanagertwo Application", new VerticalSplitPanel());
    VerticalLayout lo = new VerticalLayout();
    Label label = new Label("Hello Vaadin user");
    mainWindow.addComponent(label);
    mainWindow.addComponent(selector);
    lo.addComponent(viewer);
    lo.addComponent(edit);
    mainWindow.addComponent(lo);
    setMainWindow(mainWindow);

    edit.addListener(new Button.ClickListener (){

        private static final long serialVersionUID = -3024072268109652498L;

        public void buttonClick(ClickEvent event ) {

            Window dialog = new Window ("Edit Selected", 
                    new DocumentEditor(viewer.getPropertyDataSource()));
            dialog.setModal(true);
            mainWindow.addWindow (dialog);

        }

    });

    selector.setImmediate(true);
    selector.setSizeFull();
    selector.setSelectable(true);
    selector.addListener(new Property.ValueChangeListener()  {

        /**
         * 
         */
        private static final long serialVersionUID = 1L;

        public void valueChange(ValueChangeEvent event) {
            viewer.setPropertyDataSource(new TextFileProperty((File) selector.getValue()));
        }

    });
} 
```

}

///////////////////////////////////////// /////////////////////////////////DocumentEditor.java 代码如下：//// ///////////////////////////////////////// //////////////////////////

```
@AutoGenerated
private AbsoluteLayout mainLayout;

@AutoGenerated
private Button button_1;

@AutoGenerated
private RichTextArea richTextArea_1;

/*- VaadinEditorProperties={"grid":"RegularGrid,20","showGrid":true,"snapToGrid":true,"snapToObject":true,"movingGuides":false,"snappingDistance":10} */

/*- VaadinEditorProperties={"grid":"RegularGrid,20","showGrid":true,"snapToGrid":true,"snapToObject":true,"movingGuides":false,"snappingDistance":10} */

/**
 * 
 */
private static final long serialVersionUID = 2788446877665474591L;
/**
 * The constructor should first build the main layout, set the
 * composition root and then do any custom initialization.
 *
 * The constructor will not be automatically regenerated by the
 * visual editor.
 */
public DocumentEditor(Property document) {
    buildMainLayout();
    setCompositionRoot(mainLayout);

    // TODO add user code here
    richTextArea_1.setPropertyDataSource(document);
    richTextArea_1.setWriteThrough(false);

    button_1.addListener(new Button.ClickListener()  {

        private static final long serialVersionUID = 1L;

        public void buttonClick(ClickEvent event ) {
            richTextArea_1.commit();
            getApplication().getMainWindow().removeWindow(getWindow());
        }
    });

}

@AutoGenerated
private AbsoluteLayout buildMainLayout() {
    // common part: create layout
    mainLayout = new AbsoluteLayout();
    mainLayout.setImmediate(false);
    mainLayout.setWidth("100%");
    mainLayout.setHeight("100%");
    mainLayout.setMargin(false);

    // top-level component properties
    setWidth("100.0%");
    setHeight("100.0%");

    // richTextArea_1
    richTextArea_1 = new RichTextArea();
    richTextArea_1.setImmediate(false);
    richTextArea_1.setWidth("572px");
    richTextArea_1.setHeight("360px");
    mainLayout.addComponent(richTextArea_1, "top:0.0px;left:-2.0px;");

    // button_1
    button_1 = new Button();
    button_1.setCaption("Save");
    button_1.setImmediate(false);
    button_1.setWidth("-1px");
    button_1.setHeight("-1px");
    mainLayout.addComponent(button_1, "top:360.0px;left:500.0px;");

    return mainLayout;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T06:49:31.720

异常的根本原因是 `Caused by: java.lang.ClassNotFoundException: com.example.documentmanagertwo.DocumentEditor`

这意味着 JVM 无法找到或加载给定的类。

DocumentEditor 是否从不在类路径上的库中导入任何类或路径？这通常是导致此问题的原因。

编译的类在类路径中吗？我会尝试清理和重建我的项目。

# javascript - 导航离开时 JQuery Mobile 不会更新或重新发布数据

> ID：10940565
> 
> 赞同：1
> 
> 时间：2012-06-07T22:09:18.080
> 
> 标签：javascript, jquery, mobile

我在页脚上有三个标签：主页、促销和活动。我已经实现了通知徽章，这样当数据库中加载新的促销时，移动页面的页脚显示 1，如果插入更多，数字会实时增加。现在，比如说，如果我从主页开始，我会在促销和活动选项卡上看到实时通知。但是，当我导航到事件选项卡时，通知就会消失，但是如果我单击返回主页选项卡，通知就会显示出来。我已经分别尝试了“pageinit”和“pageshow”，以及其他stackoverflow问题中建议的测试警报消息。每次单击选项卡时都会显示警报消息。但是，当我尝试使用 append 或 html 进行修改时，它不会向我输出通知徽章。我尝试将 id 添加到 data-role=page for home，促销和事件，警报出现，但附加或 html 函数没有给我预期的结果。我在这里缺少什么？

```
 <div data-role="page">

         <div data-role="header">
            ........
         </div>

         <div data-role="content">
                 .......
         </div>

        <div data-role="footer" data-position="fixed" >
             <div data-role="navbar" >
                 <ul>
                                   <!---- The notification badge from jquery script get appended in these IDs----->
                                 **<li><div id="home"></div>...........</li>**
                                 **<li><div id="promotion"></div>......</li>**
                                 **<li><div id="event"></div>..........</li>**
             </div>
        </div>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T20:56:03.057

我想如果我的第一个页面是主页，JQuery Mobile 会将其存储在其历史记录中，并且访问的任何其他页面都将是 ajax 调用。而且，我一直在它们所属的页面中保存通知徽章。例如。如果要添加新促销，则将其附加到promotion.mobile.erb，如果要添加新事件，则将其附加到event.mobile.erb 中的div 元素。只有当我的当前页面是主页时，我才能看到它。这是我之前的问题。

我是如何解决的？我从 application.mobile.erb 中删除了页脚和页面元素，并将页面 ID 添加到主页、促销和活动页面。然后，我在通知标记所在的 div 元素中添加了不同的 id。

*   对于 home_page 中的 div 元素，我添加了 0 （您可以选择任何使其独一无二的东西）
*   对于promotion_page 中的div 元素，我添加了1 和
*   对于 event_page 中的 div 元素，我在下面的代码中添加了 2 ...

    ```
    <div data-role="footer" data-position="fixed" >
         <div data-role="navbar" >
             <ul>
                               <!---- The notification badge from jquery script get appended in these IDs----->
                             **<li><div id="home0"></div>...........</li>**
                             **<li><div id="promotion0"></div>......</li>**
                             **<li><div id="event0"></div>..........</li>**
         </div>
    </div> 
    ```

现在，当任何实时通知出现时，将其添加到promotion0 或event0 div 中，这样每当我们离开时，我们都可以从该div 中获取旧徽章，并使用pageinit 将其重新发布到导航页面div 元素中，如下面的例子...

```
 $('#promo_page').live('pageinit',function(event){
        $('#promotion2').badger(oldBadge0);
        $('#event2').badger(oldBadge_e0);
    }); 
```

# ios - iOS 上的 Facebook API；检测用户是否在不触发对话框的情况下登录？

> ID：10940566
> 
> 赞同：0
> 
> 时间：2012-06-07T22:09:23.253
> 
> 标签：ios, facebook

我有一个通过 Facebook 的 API 使用 Facebook Connect 的 iOS 应用程序。

如果我在用户通过身份验证后在 Facebook 对象上调用 isSessionValid 方法，它会按预期返回 true。如果我在应用程序默认值中存储和检索访问令牌和到期日期，我还可以在应用程序启动时使其返回 true。

我正在寻找一种方法来确定，在刚安装该应用程序的用户首次启动该应用程序时，他们是否已登录 Facebook。我想在不触发权限对话框的情况下执行此操作。可能吗？

这个想法是根据用户是否登录 Facebook 来定制第一个屏幕。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T22:39:07.817

我相信您可以在 Facebook.m 中调用 isSessionValid 方法来执行此操作

```
- (BOOL)isSessionValid {
return (self.accessToken != nil && self.expirationDate != nil
        && NSOrderedDescending == [self.expirationDate compare:[NSDate date]]);

  } 
```

使用您的 Facebook 对象

# forms - Qooxdoo：如何在复杂表单上进行表单验证？

> ID：10940568
> 
> 赞同：0
> 
> 时间：2012-06-07T22:09:31.897
> 
> 标签：forms, validation, qooxdoo

我有这个表格：

[https://github.com/totty90/production01_server/blob/master/node_modules/production/client/production/source/class/production/views/insertWorkAsManager/Index.js](https://github.com/totty90/production01_server/blob/master/node_modules/production/client/production/source/class/production/views/insertWorkAsManager/Index.js)

[https://github.com/totty90/production01_server/tree/master/node_modules/production/client/production/source/class/production/views/insertWorkAsManager](https://github.com/totty90/production01_server/tree/master/node_modules/production/client/production/source/class/production/views/insertWorkAsManager)

它不完全是一个简单的形式，甚至还不是一个形式。这只是一堆小部件，但我想提前对各个字段进行验证。你建议怎么做？因为我不能直接在我的“表单”中应用表单示例。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-23T07:37:44.247

qooxdoo 支持对 from 和 from 中的项目进行验证。这提供了验证您想要的一切的机会。您可以基于单个字段或组合进行检查。查看以下演示，其中展示了大部分功能：

[http://demo.qooxdoo.org/2.0.1/demobrowser/index.html#ui~FormValidator.html](http://demo.qooxdoo.org/2.0.1/demobrowser/index.html#ui~FormValidator.html)

# javascript - 如何在信息窗口（Google Maps API v3）中填充下拉列表？

> ID：10940573
> 
> 赞同：2
> 
> 时间：2012-06-07T22:09:55.477
> 
> 标签：javascript, drop-down-menu, google-maps-api-3, infowindow, domready

我有两个数组：一个用于文章名称，另一个用于每篇文章的 url 链接。我正在尝试使用文章名称填充信息窗口中的下拉列表，并在选择时链接到每篇文章。

似乎链接可能与使用`onchange`事件有关，否则我正在使用`"domready" eventListener`访问`<select>`元素的 id 标签。

这是我到目前为止的相关代码，但它**不起作用**：

```
function setDropDownList(mapMarker, names, links)
{
    // event listener for dropdown list in the map markers' infowindow
    google.maps.event.addListener(mapMarker, "domready", function()
    {
        var articles = document.getElementById("select");

        var nextArticle, nextOption;

        for(var i = 0; i < names.length; i++)
        {
            nextArticle = names[i];
            nextOption = new Option(nextArticle);

            /* add the new option to the option list
             ("null" for IE5, "-1" for all other browsers) */
            try
            {
                articles.add(nextOption, -1);
            }
            catch(e)
            {
                articles.add(nextOption, null);
            }
        }
    });
} // end of function setDropDownList 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T23:39:26.917

由于我在放置标记后调用 setDropDownList 函数，因此我删除了该侦听器并添加了一个以在单击标记时显示信息窗口。

**演示** [http://jsfiddle.net/yV6xv/10/](http://jsfiddle.net/yV6xv/10/)

进行选择时如何处理 onchange 事件取决于您。现在，它会通过一条消息和一个虚拟链接发出警报。

```
function setDropDownList(mapMarker, mapInfoWindow, names, links)
{

        var articles = document.getElementById("select");
        articles.onchange = function() {
          alert("Going to link " + links[this.options.selectedIndex]);
        };
        var nextArticle, nextOption;

        for(var i = 0; i < names.length; i++)
        {
            nextArticle = names[i];
            nextOption = new Option(nextArticle);

            /* add the new option to the option list
             ("null" for IE5, "-1" for all other browsers) */
            try
            {
                articles.add(nextOption, -1);
            }
            catch(e)
            {
                articles.add(nextOption, null);
            }
            mapInfoWindow.setContent(document.getElementById("select"));

            google.maps.event.addListener(mapMarker, 'click', function() {
              mapInfoWindow.open(map, this);
            });
    }
} // end of function setDropDownList 
```

我应该补充一点，这`map`是全球性的。

```
 var map;
  var mapOptions = { center: new google.maps.LatLng(0.0, 0.0), zoom: 2,
    mapTypeId: google.maps.MapTypeId.ROADMAP };

  function initialize() {
    map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
    var mymarker = new google.maps.Marker({
      map:map,
      position:new google.maps.LatLng(0,0)
    });

    var mynames = ["-- Choose an article --", "How to Launch a Fireball", "The Trinity of Magic", "Defending Against the Hax"];
var mylinks = ["to current page itself #", "http://fireball", "http://trinity", "http://hax"];

    var myinfowindow = new google.maps.InfoWindow();
    setDropDownList(mymarker, myinfowindow, mynames, mylinks);
  } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-09T20:37:48.200

这是我的解决方案，在我的情况下，我需要在 infowindow 的属性中创建整个选项列表`content`，而不是在 html 中。

因此，我没有引用`id`html select 元素，而是简单地将选项列表连接为字符串，循环添加每个选项（*我仍然不理解`"domready"`eventListener，因为它不适用于这种方法*）。

我没有`.onchange = function(){...`对链接使用@Lilina 的优雅，而是使用`window.location.href = this.options[this.selectedIndex].value`，将每个选项的 value 属性设置为等于其 url 链接。

这是代码：

```
function setDropDownList(mapRef, mapMarker, markerInfoWindow, names, links)
{
    var articles = markerInfoWindow.content;
    articles += "<select onchange = \"window.location.href = this.options[this.selectedIndex].value;\">";
    articles += "<option>&nbsp;&mdash;&nbsp;select an article&nbsp;&mdash;&nbsp;</option>";

    var nextArticle, nextArticleLink;

    for(var i = 0; i < names.length; i++)
    {
        nextArticle = names[i];
        nextArticleLink = links[i];

        articles += "<option value = " + nextArticleLink + ">" + nextArticle + "</option>";

        // setting each info window for each map marker with the function below
        setInfoWindow(mapRef, mapMarker, markerInfoWindow);
    }

    articles += "</select>";
    markerInfoWindow.setContent(articles);
} // end of function setDropDownList 
```

# c# - XmlWriter.WriteNode() 不会为任何元素写入标签

> ID：10940576
> 
> 赞同：1
> 
> 时间：2012-06-07T22:10:22.647
> 
> 标签：c#, sql-server, xml

我正在开发一个尝试编写 XML 数据的 C#.NET 程序

从 SQL Server 返回，将由 XmlReader 访问

方法返回`SqlCommand.ExecuteXmlReader()`。

SqlCommand 查询文本为“ `SELECT ... FOR XML, ELEMENTS`”。

该代码使用 XmlWriter.WriteNode() 方法将 XML 数据从 XmlReader 复制到 XmlWriter。

**但是 XmlWriter.WriteNode() 不会为任何元素写入开始标记和结束标记；它只为元素写入文本内容。**

显然，我的意图是为元素编写标签和文本。我已经包含了 SELECT Query 和 WriteNode() 方法的代码和输出。以下。

有没有人解释为什么 XmlWriter.WriteNode() 不写标签而只写文本数据？

**C＃：**

```
protected void Page_Load(object sender, EventArgs e)
{

    XmlDocument xmlDocument = new XmlDocument();
    XPathNavigator xPathNavigator = xmlDocument.CreateNavigator();

    string connectionStr = "Data Source=.\\SQLEXPRESS;"
                                    +
                          "Initial Catalog=AdventureWorks;"
                                    +
                          "Integrated Security=True";

    using (SqlConnection sqlConnection = new SqlConnection(connectionStr))
    {
        SqlCommand sqlCommand
            = new SqlCommand("SELECT TOP 1  ContactID, " +
                             "              Title, " +
                             "        FirstName, MiddleName, LastName, " +
                             "              Suffix, " +
                             "              EmailAddress, Phone "
                                    +
                             "  FROM Person.Contact AS Contact "
                                    +
                             "  FOR XML AUTO, ELEMENTS ",         
                             sqlConnection);
        sqlConnection.Open();

        using (XmlWriter xmlWriter = xPathNavigator.PrependChild())
        {
            xmlWriter.WriteStartElement("Contacts");

            using (XmlReader xmlReader = sqlCommand.ExecuteXmlReader())
            {

                xmlWriter.WriteNode(xmlReader,
                                    true);
            }    

            xmlWriter.WriteEndElement();
        }                  
    }        

    Response.ContentType = "text/xml";
    xmlDocument.Save(Response.Output);
} 
```

SQL Server Management Studio 中返回的结果集：

```
<Contact>
  <ContactID>1</ContactID>
  <Title>Mr.</Title>
  <FirstName>Gustavo</FirstName>
  <LastName>Achong</LastName>
  <EmailAddress>gustavo0@adventure-works.com</EmailAddress>
  <Phone>398-555-0132</Phone>
</Contact> 
```

.aspx 输出：

1 Gustavo Achong 先生 gustavo0@adventure-works.com 398-555-0132

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T23:18:35.850

尝试不将 XML 作为 SQL XML 实体返回，而是在数据集中作为字符串返回，然后打印字符串，这样 CDATA 就不会被剥离。

# mysql - 需要将时间戳字段日期与 varchar 字段时间结合起来

> ID：10940577
> 
> 赞同：1
> 
> 时间：2012-06-07T22:10:30.357
> 
> 标签：mysql, database, datetime

我试图找出解决数据库架构问题的方法。

在第 1 列中存储了一个 ymd H:i:s 日期（时间戳字段）

```
col1 = 2009-11-12 00:00:00 
```

在第 2 列中存储时间（varchar）

```
col2 = 15:48 
```

我认为将其存储在一列中会比单独存储更有效，因此我试图将第 3 列设为日期时间字段

```
col3 = 2009-11-12 15:48:00 
```

除非保持原样就好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:16:54.847

[`Addtime`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_addtime)应该做你需要的

```
mysql> select addtime('2012-05-05 00:00:00', '11:12');
+-----------------------------------------+
| addtime('2012-05-05 00:00:00', '11:12') |
+-----------------------------------------+
| 2012-05-05 11:12:00                     |
+-----------------------------------------+
1 row in set (0.00 sec) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T22:17:31.447

是的，绝对使用一个字段，如果需要，您可以稍后从中获取日期或时间。我相信您可以运行以下查询以使用正确的日期时间更新 col3。

```
UPDATE tablename
SET col3 = CAST(LEFT(col1, 10) + " " + col2 + ":00", DATETIME) 
```

如果您没有任何东西可以访问这些旧字段（col1 和 col2），那么为了清楚起见，您应该删除它们。如果你这样做了，决定是否为相同的数据维护两个字段将是一件棘手的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T22:19:53.413

与其他答案相反...我不会立即建议合并这些列。

考虑如何查询列 - 根据我的经验，高效查询比磁盘空间效率更重要 - 因此，如果您想根据日期（忽略时间）和/或时间（忽略日期）选择行你会希望这些在单独的列中。虽然您可以从日期时间列中获取日期，但如果您有*很多*行，那么在运行查询之前对每一行执行此操作将非常低效。（例如......考虑这个[SO问题](https://stackoverflow.com/questions/10334483/mysql-right-join-query-speed-issues-involving-calendar-table/10336054#10336054)）

# matlab - 如何在 Gauss Seidel 中计算迭代矩阵

> ID：10940581
> 
> 赞同：1
> 
> 时间：2012-06-07T22:10:50.717
> 
> 标签：matlab, matrix, linear-algebra

我正在尝试通过 Gauss-Seidel 迭代方法解决一个系统。但我也想收到使用的迭代矩阵作为答案。我有这个方法

```
function [x0,iter] = gaussSeidel(A,b,iterMax,tol)

D = diag(diag(A));
Lower = -tril(A,-1);
Upper = -triu(A,1);
M = D - Lower;
N = Upper;
n = size(A);
n = n(1);
x0 = ones(n,1);
iter = 1;
for i = 1:1:iterMax
    iter = i;
    x = M\(N*x0+b);
    normC = norm(x-x0,inf);
    x0 = x;

    if normC <tol
        break
    end
end 
```

我想知道迭代矩阵**((D-Lower)^(-1))*Upper**中的内容，但为此我必须计算逆矩阵，而且计算成本很高，是否有另一种获取值的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T14:21:19.447

"\" 是一种通过取逆来求解线性常系数系统的优化方法。如果你想看看系数矩阵的逆是什么，那么你必须使用

```
inv(A) 
```

代替

```
A\b 
```

没有出路！或者，如果您只处理逆矩阵的*第 N*列，那么您也可以使用

```
I=eye(n);
A\I(:,N); 
```

# c# - 表格单元格的 Visual Web Developer 下拉菜单

> ID：10940590
> 
> 赞同：0
> 
> 时间：2012-06-07T22:11:51.263
> 
> 标签：c#, events, event-handling, visual-web-developer

我创建了一个显示表格的网页。表格中的大部分单元格都已填写，但其中一些需要用户输入。我想知道是否有某种方法可以将 onClick 事件与这些数据单元格相关联，以显示单元格可能条目的下拉列表。我用谷歌搜索和搜索，但我没有想出任何东西。所以我什至不确定这是可能的。

任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T22:31:22.657

与其尝试让数据单元格本身创建列表，不如在每个表格单元格中放置一个 ASP.Net 下拉框，弄乱设置，使其与表格单元格大小相等，然后填充下拉框的内容页面加载上的下拉框。

编辑：见 MSDN 页面：http: [//msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.dropdownlist.dropdownlist.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.dropdownlist.dropdownlist.aspx)

那里有一个非常好的 page_load 示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T22:39:00.443

我很确定您将不得不使用某种客户端脚本来完成此操作。由于您已将 c# 标记为服务器端语言，因此我假设您使用的是 gridview，因此类似这样

```
protected void GridView1_RowCreated(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
        for (int i = 0; i < e.Row.Cells.Count; i++)
            e.Row.Cells[i].Attributes.Add("onclick", "getDropDown");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-02T02:22:41.937

这个问题是通过在 span 中放置占位符然后替换 innerHTML 来解决的：

```
<span id="s2" runat="server"><asp:PlaceHolder ID="p2" runat="server"></asp:PlaceHolder></span> 
```

# django - 子类化 Django UpdateCacheMiddleware 和 FetchFromCacheMiddleware 的技术

> ID：10940592
> 
> 赞同：7
> 
> 时间：2012-06-07T22:12:03.863
> 
> 标签：django, caching, django-views, middleware

我已经使用`UpdateCacheMiddleware`和`FetchFromCacheMiddleware`MiddleWare 来启用站点范围的匿名缓存，并取得了不同程度的成功。

最大的问题是中间件只缓存匿名用户的第一个请求。由于在第一个响应中设置了 session_id cookie，因此该匿名用户的后续请求不会因为标题上的视图级别缓存不同而命中缓存。

我的网页在匿名用户之间没有显着差异，只要它们确实不同，我可以通过 Ajax 处理。因此，我决定尝试子类化 Django 的缓存中间件，以不再在 Header 上有所不同。相反，它因匿名用户和登录用户而异。因为我使用的是 Auth 后端，并且该处理程序发生在从缓存中获取之前，所以它似乎工作。

```
class AnonymousUpdateCacheMiddleware(UpdateCacheMiddleware):

    def process_response(self, request, response):
        """
        Sets the cache, if needed.
        We are overriding it in order to change the behavior of learn_cache_key().
        """

        if not self._should_update_cache(request, response):
            # We don't need to update the cache, just return.
            return response
        if not response.status_code == 200:
            return response

        timeout = get_max_age(response)
        if timeout == None:
            timeout = self.cache_timeout
        elif timeout == 0:
            # max-age was set to 0, don't bother caching.
            return response
        patch_response_headers(response, timeout)
        if timeout:
            ######### HERE IS WHERE IT REALLY GOES DOWN #######
            cache_key = self.learn_cache_key(request, response, self.cache_timeout, self.key_prefix, cache=self.cache)
            if hasattr(response, 'render') and callable(response.render):
                response.add_post_render_callback(
                    lambda r: self.cache.set(cache_key, r, timeout)
                )
            else:
                self.cache.set(cache_key, response, timeout)
        return response

    def learn_cache_key(self, request, response, timeout, key_prefix, cache=None):
        """_generate_cache_header_key() creates a key for the given request path, adjusted for locales.

            With this key, a new cache key is set via _generate_cache_key() for the HttpResponse

            The subsequent anonymous request to this path hits the FetchFromCacheMiddleware in the
            request capturing phase, which then looks up the headerlist value cached here on the initial response.

            FetchFromMiddleWare calcuates a cache_key based on the values of the listed headers using _generate_cache_key
            and then looks for the response stored under that key.  If the headers are the same as those
            set here, there will be a cache hit and the cached HTTPResponse is returned.
        """

        key_prefix = key_prefix or settings.CACHE_MIDDLEWARE_KEY_PREFIX
        cache_timeout = self.cache_timeout or settings.CACHE_MIDDLEWARE_SECONDS
        cache = cache or get_cache(settings.CACHE_MIDDLEWARE_ALIAS)

        cache_key = _generate_cache_header_key(key_prefix, request)

        # Django normally varies caching by headers so that authed/anonymous users do not see same pages
        # This makes Google Analytics cookies break caching;
        # It also means that different anonymous session_ids break caching, so only first anon request works
        # In this subclass, we are ignoring headers and instead varying on authed vs. anonymous users
        # Alternatively, we could also strip cookies potentially for the same outcome

        # if response.has_header('Vary'):
        #     headerlist = ['HTTP_' + header.upper().replace('-', '_')
        #                   for header in cc_delim_re.split(response['Vary'])]
        # else:
        headerlist = []

        cache.set(cache_key, headerlist, cache_timeout)
        return _generate_cache_key(request, request.method, headerlist, key_prefix) 
```

负责从缓存中检索页面的 Fetcher 看起来像这样

```
class AnonymousFetchFromCacheMiddleware(FetchFromCacheMiddleware):

    def process_request(self, request):
        """
        Checks whether the page is already cached and returns the cached
        version if available.
        """
        if request.user.is_authenticated():
            request._cache_update_cache = False
            return None
        else:
            return super(SmarterFetchFromCacheMiddleware, self).process_request(request) 
```

很明显，有很多抄袭`UpdateCacheMiddleware`。我想不出一个更好的钩子来使这个更清洁。

这通常看起来是一个好方法吗？有什么明显的问题浮现在脑海中？

谢谢，本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-16T06:15:09.297

您可以通过暂时删除不需要的变化字段来解决此问题`response['Vary']`：

```
from django.utils.cache import cc_delim_re

class AnonymousUpdateCacheMiddleware(UpdateCacheMiddleware):
    def process_response(self, request, response):
        vary = None
        if not request.user.is_authenticated() and response.has_header('Vary'):
                vary = response['Vary']
                # only hide cookie here, add more as your usage
                response['Vary'] = ', '.join(
                    filter(lambda v: v != 'cookie', cc_delim_re.split(vary))
        response = super(AnonymousUpdateCacheMiddleware, self).process_response(request, response)
        if vary is not None:
            response['Vary'] = vary
        return response 
```

Also, set `CACHE_MIDDLEWARE_ANONYMOUS_ONLY = True` in settings to prevent cache for authenticated users.

# c# - 如果第一个服务正在响应对它的调用，则调用另一个 Web 服务的 Web 服务具有不同的行为

> ID：10940594
> 
> 赞同：0
> 
> 时间：2012-06-07T22:12:21.717
> 
> 标签：c#, wcf

我编写了一个通过 WCF 提供 REST api 的 C# Windows 服务。该服务需要调用另一个同样使用 REST api 的 Web 服务。我的服务可以与其他服务完美通信，除非有人拨打了我的服务并且它当前正在响应。我写了一个简单的测试：

```
public void TestConnection()
{
    WebChannelFactory<IOtherService> wf = new WebChannelFactory<IOtherService>(otherURI);
    IOtherService service = wf.CreateChannel();
    service.Test();
}

[ServiceContract]
public interface IOtherService
{
    [WebGet(UriTemplate = "services/account?username=testuser&password=d625a4de623dce36af2b75102eaf0ce7&locale=en-US", ResponseFormat = WebMessageFormat.Json, RequestFormat = WebMessageFormat.Json)]
    [OperationContract]
    AccountServiceInfo Test();
} 
```

通常，当我调用 TestConnection 时，它可以正常工作，但是当有人调用我的服务要求我调用 TestConnection 时，其他服务会看到 POST 而不是 GET 并返回 400。有谁知道为什么会这样或我该如何解决？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T05:56:25.207

当在 WCF 服务中使用`WebChannelFactory`已经有.`OperationContext``WebChannelFactory`

```
public void TestConnection()
{
    var wf = new WebChannelFactory<IOtherService>(otherURI);
    var service = wf.CreateChannel();
    using ((IDisposable)service)
    using (new OperationContextScope((IContextChannel)service))
    {
      service.Test();
    }
} 
```

[http://blogs.msdn.com/b/pedram/archive/2008/07/19/webchannelfactory-inside-a-wcf-service.aspx](http://blogs.msdn.com/b/pedram/archive/2008/07/19/webchannelfactory-inside-a-wcf-service.aspx)

# android - 三星 Galaxy S II 上的零星 UnknownHostException

> ID：10940595
> 
> 赞同：1
> 
> 时间：2012-06-07T22:12:31.093
> 
> 标签：android, httpclient

在测试应用程序时，我不断收到仅在一台设备上偶尔出现的错误：GT-I9100（欧洲）三星 Galaxy S II。这些错误不会发生在任何其他设备上，甚至 SPH-D710 (Sprint) 三星 Galaxy S II 也不会发生。

应用程序使用的 URL 不会改变。它们与我可以在网络浏览器中输入的内容相同，或者与应用程序的 iOS 和桌面版本使用的相同。但有时他们会抛出 UnknownHostException，有时不会。

这是我正在使用的代码的经过严格清理的版本：

```
AndroidHttpClient client = AndroidHttpClient.newInstance(activity.getString(R.string.user_agent));
HttpPost httpPost = new HttpPost("http://" + subdomainId + ".website.com/doSomething.aspx");

  try {
    // Add your data
    List<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();
    nameValuePairs.add(new BasicNameValuePair("parameter1", value1));
    nameValuePairs.add(new BasicNameValuePair("parameter2", value2));
    httpPost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

    // Execute HTTP Post Request
    HttpContext httpContext = new BasicHttpContext();
    HttpResponse response = client.execute(httpPost, httpContext);

  ... ... 
```

三星 Galaxy S II 是否有任何可能导致此问题的怪癖？它运行的是 Android 2.3.6。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-14T16:02:11.857

正如其他人所说，这可能是由不存在的互联网连接引起的。

也许尝试像这样添加请求重试处理程序..

```
 HttpRequestRetryHandler retryhandler = new DefaultHttpRequestRetryHandler(6, true);

    httpClient.setHttpRequestRetryHandler(retryhandler); 
```

这样，如果互联网瞬间中断，httpclient 可以处理它。如果您有任何传输错误，[这里apache 还建议重试](http://hc.apache.org/httpclient-3.x/exception-handling.html)

> 通常传输异常是非致命的，可以通过重试失败的方法来恢复。

所以我建议无论如何使用重试处理程序是一个好习惯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-14T15:50:28.873

UnknownHostException 可能由不可靠或不存在的 Internet 连接引起。你应该有一个 try/catch 块来捕获这些并执行任何必要的步骤来解决问题（也许要求用户检查他们的互联网连接）。

我猜欧洲版本有更多问题的原因是因为它在这里没有服务（假设你在美国工作）？

# multithreading - 从同一个 SQL 表读取的同一应用程序的 C#2 个实例，每行处理一次

> ID：10940599
> 
> 赞同：1
> 
> 时间：2012-06-07T22:12:48.393
> 
> 标签：multithreading, sql-server-2008, c#-4.0, ado.net

我正在.Net 4.0 中用 C# 编写一个 Windows 服务来实现以下功能：
在每晚的设定时间，应用程序连接到 SQL Server，打开一个用户表，并为每条记录检索用户的 IP 地址，进行 WCF 调用到用户的 PC 以确定它是否可用于交易并将记录插入到状态表中（带有 y/n 和错误，如果有的话）。

处理完所有用户后，该应用程序将读取 State 表中 IsPcAvailable = true 的每条记录，从另一个表中检索该用户的报告列表，并为每个报告从 Enterprise doc 存储库中获取报告，通过调用用户的 PC WCF 并将报告推送到他们的硬盘上，然后将状态表更新为成功。

如果在 1 个应用服务器上运行单线程，则上述场景很容易编写代码；但由于冗余和性能，将至少有 2 个应用服务器同时执行完全相同的事情。

那么如何确保每个用户只在用户表中处理一次，然后是状态表（同样的问题）作为获取报告并将它们推送到全国各地的 PC 是一个漫长的过程。最佳情况下，应用程序应该是多线程的，例如，在 2 台服务器上运行 10 个线程来处理所有用户。

我更喜欢 C# 解决方案，因为我不是数据库专家 :) 我发现最接近我的问题的是：
[SQL Server Process Queue Race Condition](https://stackoverflow.com/questions/939831/sql-server-process-queue-race-condition) - 它使用 SQL 代码
和实体框架的多线程问题，我很可能是否必须向下一层并使用 ADO.net？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:22:18.320

我建议使用[http://rusanu.com/2010/03/26/using-tables-as-queues/](http://rusanu.com/2010/03/26/using-tables-as-queues/)上的技术，这对你来说是一本很好的读物。

这是fifo的一些sql

```
create procedure usp_dequeueFifo
as
  set nocount on;
  with cte as (
    select top(1) Payload
      from FifoQueue with (rowlock, readpast)
    order by Id)
  delete from cte
    output deleted.Payload;
go 
```

一个用于堆（顺序无关紧要）

```
create procedure usp_dequeueHeap 
as
  set nocount on;
  delete top(1) from HeapQueue with (rowlock, readpast)
      output deleted.payload;      
go 
```

这读起来很漂亮，几乎是诗

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T22:26:36.170

您可以简单地让每个应用程序服务器轮询一个公用表 (work_queue)。您可以使用公用表表达式来读取/更新行，这样您就不会让它们互相踩踏。

```
;WITH t AS
(
    SELECT TOP 1 * 
    FROM work_queue WHERE NextRun <= GETDATE()
    AND IsPcAvailable = 1
)
UPDATE    t  WITH (ROWLOCK, READPAST)
SET
     IsProcessing = 1,
     MachineProcessing = 'TheServer'
OUTPUT INSERTED.* 
```

现在，您可以在应用程序中使用生产者线程定期检查未处理的记录。一旦该线程完成它的工作，它会将项目推入 a`ConcurrentQueue`并且消费者线程可以处理可用的工作。您可以自己将消费者线程的数量设置为最佳水平。一旦消费者线程完成，它就简单地设置`IsProcessing = 0`为显示 PC 已更新。

# c# - C# XNA Windows Phone 7 游戏：如何知道按下了哪些对象

> ID：10940603
> 
> 赞同：0
> 
> 时间：2012-06-07T22:13:23.677
> 
> 标签：c#, xna, touch

假设我有多个相互重叠的对象，如果我单击其中一个，从 TouchPanel.GetState() 返回的坐标将无法告诉我选择了哪个对象。该对象不一定是最顶层的。在这种情况下，我是否组织对象列表以便按 Z 值排序并从上到下比较矩形。这是正确的方法吗？或者是否有任何 UI 框架提供某种组件来继承，以便在发生外部事件时对象会有回调？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-11T15:38:22.497

如果您使用的是 XNA 游戏库，您将不得不使用 Z 值来确定选择了哪个对象。

XNA 的 TouchPanel.GetState() 只会返回手指在屏幕上的位置，它不会告诉你它正在与哪些对象发生碰撞。您必须自己进行所有碰撞检查，您可以通过 Z 或分层顺序来决定要选择哪个对象。

对于 2D 对象，没有任何特定的 Z 顺序应用于它们（因为它们是 2D，而不是 3D），因此您需要向对象的类添加一个属性来处理它。

然后，当您触摸一个位置时，您可以收集该位置碰撞的所有对象，并根据它的 z 顺序选择您想要的任何对象。

希望有帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-11T17:56:54.807

这个 XNA 示例应该可以帮助您入门：

[http://create.msdn.com/en-US/education/catalog/sample/picking](http://create.msdn.com/en-US/education/catalog/sample/picking)

正如 Nick Funk 所说，您拥有 2D 触摸坐标，那么只需将上述示例应用到您的游戏并使用这些坐标即可。

# java - 如何使用 GATE ANNIE 查找单词 sysnonyms？

> ID：10940605
> 
> 赞同：3
> 
> 时间：2012-06-07T22:14:01.587
> 
> 标签：java, gate

我一直致力于信息提取，并且能够运行standAloneAnnie.java [http://gate.ac.uk/wiki/code-repository/src/sheffield/examples/StandAloneAnnie.java](http://gate.ac.uk/wiki/code-repository/src/sheffield/examples/StandAloneAnnie.java)

我的问题是，我如何使用 GATE ANNIE 来获得类似的词，比如如果我输入 (dine) 会得到类似 (food, eat, Dinner, restaurant) 的结果？

更多信息：
我正在做一个项目，我被分配开发一个简单的网页来获取用户输入并传递给 GATE 组件，这些组件将对查询进行标记并返回每个短语的语义分组，以便提出一些建议。

例如，用户输入“我想在吉隆坡吃晚饭”，系统会将其分解为（搜索：晚餐 - 必填：餐厅，晚餐，吃，食物 - 地点：吉隆坡。

默认情况下，ANNIE 有 15 个注释，请参阅演示 [http://services.gate.ac.uk/annie/](http://services.gate.ac.uk/annie/) 现在我已经将所有内容都实现为演示，但我的问题是。我可以使用 GATE ANNIE 来做到这一点，我的意思是是否可以根据它们的类型（名词、动词）找到同义词或组词？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T11:05:21.090

Plain vanilla ANNIE 不支持这种东西，但有第三方插件，例如 Phil Gooch 的[WordNet Suggester](http://vega.soi.city.ac.uk/~abdy181/software/#wordnet)可能会有所帮助。或者，如果您的域受到相当严格的限制，您只需创建自己的相关术语的地名词典列表和一些简单的 JAPE 规则，即可获得更好的结果。如果您以前没有做过很多这方面的工作，您可能会发现[GATE Wiki](http://gate.ac.uk/wiki/)上提供的培训材料很有用。

# iphone - CAGradientLayer 不自动调整大小

> ID：10940606
> 
> 赞同：2
> 
> 时间：2012-06-07T22:14:29.183
> 
> 标签：iphone, objective-c, ios, ipad

我在 UIImageView 上添加了一个 CAGradientLayer。我已将 UIImageView 上的自动调整大小掩码设置为跨边界灵活（灵活的高度、宽度等）。但是，当 UIImageView 调整大小时，我在 imageView 顶部添加的渐变层不会调整大小。为什么是这样？这是代码：

```
CAGradientLayer *imgOverlay = [CAGradientLayer layer];
        CGColorRef startBlueColor = [UIColor colorWithRed:23/255.f green:171/255.f 
                                                     blue:219/255.f alpha:0.8].CGColor; 
        CGColorRef endBlueColor = [UIColor colorWithRed:23/255.f green:171/255.f 
                                                   blue:219/255.f alpha:0.5].CGColor;     
        imgOverlay.colors = [NSArray arrayWithObjects:
                             (id) startBlueColor,
                             (id) endBlueColor,
                             nil];

        imgOverlay.locations = [NSArray arrayWithObjects:
                                [NSNumber numberWithFloat:0.0],
                                [NSNumber numberWithFloat:1.0],
                                nil];

        imgOverlay.startPoint = startPoint;
        imgOverlay.frame = self.backgroundImageView_.bounds;
        imgOverlay.endPoint = endPoint;
        self.imageOverlay = imgOverlay;
        [self.backgroundImageView_.layer addSublayer:self.imageOverlay]; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-07T22:31:04.373

CALayer 不支持在 iOS 上自动调整大小。您必须在 layoutSubviews 或任何适当的地方手动实现调整大小。

# javascript - 如何在 JavaScript 中删除数组中的特定元素

> ID：10940607
> 
> 赞同：27
> 
> 时间：2012-06-07T22:14:41.307
> 
> 标签：javascript, arrays, object

如果我有数组，例如：

```
a = ["a", "b", "c"] 
```

我需要类似的东西

```
a.remove("a"); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-07T22:18:45.693

```
var newArray = [];
var a=["a","b","c"];
for(var i=0;i<a.length;i++)
    if(a[i]!=="a") 
        newArray.push(a[i]); 
```

从较新版本的 JavaScript 开始：

```
var a = ["a","b","c"];
var newArray = a.filter(e => e !== "a"); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-07T22:17:14.723

```
remove = function(ary, elem) {
    var i = ary.indexOf(elem);
    if (i >= 0) ary.splice(i, 1);
    return ary;
} 
```

提供您的目标浏览器支持[`array.indexOf`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf)，否则使用该页面上的后备代码。

如果您需要删除*所有*相等的元素，请`filter`按照 Rocket 的建议使用：

```
removeAll = function(ary, elem) {
    return ary.filter(function(e) { return e != elem });
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T22:17:59.900

如果您使用的是现代浏览器，则可以使用[`.filter`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/filter).

```
Array.prototype.remove = function(x){
    return this.filter(function(v){
        return v !== x;
    });
};

var a = ["a","b","c"];
var b = a.remove('a'); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-12-10T05:58:13.140

我想出了一个简单的解决方案来从数组中省略必要的元素：

```
<script>
    function myFunction()
    {
        var fruits = ["One", "Two", "Three", "Four"];

        <!-- To drop the element "Three"-->
        <!-- splice(elementid, number_of_element_remove) -->
        fruits.splice(2, 1);

        var x = document.getElementById("demo");
        x.innerHTML = fruits;
    }
</script> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-11-29T14:04:54.460

```
let xx = ['a','a','b','c'];  // Array
let elementToRemove = 'a';  // Element to remove
xx =xx.filter((x) => x != elementToRemove) // xx will contain all elements except 'a' 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-07T22:26:27.030

如果您不介意额外的有效负载（大约 4 kB 压缩和 gzip 压缩），您可以使用[Underscore.js 库的 without 功能](http://underscorejs.org/#without)：

```
_.without(["a", "b", "c"], "a"); 
```

[Underscore.js](https://en.wikipedia.org/wiki/Underscore.js)会给你这个功能+很多非常方便的功能。

# json - Sencha touch 2 加载存储和关联存储与嵌套 JSON

> ID：10940609
> 
> 赞同：4
> 
> 时间：2012-06-07T22:14:51.497
> 
> 标签：json, associations, sencha-touch-2, store

我已经开始创建一个 Sencha Touch 2 应用程序，它定义了两个模型，更改和配置。更改属于配置。这两种型号也都有商店设置。在更改存储中，我有一个代理设置来请求以 JSON 格式返回的数据。JSON 数据有一个带有嵌套配置的更改。Change 加载得很好，但是当我尝试从 Change 实例中获取关联的 Configuration 时，它不起作用。

我已经定义了这样的模型：

更改型号：

```
Ext.define('Changes.model.Change', {
    extend: 'Ext.data.Model',
    xtype: 'changemodel',

    config: {
        fields: [ 
            {name:'id', type:'int'},
            {name:'changeId', type:'string'},
            {name:'briefDescription', type:'string'},
            {name:'configuration_id', type:'int'}
        ],
        associations: [{
            type:'belongsTo', 
            model:'Changes.model.Configuration',
            primaryKey: 'id',
            foreignKey: 'configuration_id',
            associationKey: 'configurations'
        }],
    },
}); 
```

配置型号：

```
Ext.define('Changes.model.Configuration', {
    extend: 'Ext.data.Model',
    xtype: 'configurationmodel',
    config: {
        fields: [
             { name: 'id', type: 'int'},
             { name: 'longName', type: 'string' },
             { name: 'ciName', type: 'string' },
            ],
        hasMany: {model: 'Change', name: 'changes'}
    }
}); 
```

每个模型都有一个商店。

更改存储：

```
Ext.define('Changes.store.Changes', {
    extend: 'Ext.data.Store',
    requires: 'Changes.model.Change',
    config: {
        model: 'Changes.model.Change',  
        proxy: {
            type: 'ajax',
            url: 'services/changes.php',
            reader: {
                type: 'json',
                rootProperty: 'changes'
            }
        },
        sorters: [{ property: 'briefDescription', direction: 'ASC'}],
    }
}); 
```

配置存储：

```
Ext.define('Changes.store.Configurations', {
    extend: 'Ext.data.Store',
    requires: ['Ext.data.proxy.LocalStorage'],
    config: {
        model: 'Changes.model.Configuration',
        grouper: {
                sortProperty: "ciName",
                direction: "DESC",
                groupFn: function (record) {
                    return record.get('ciName')[0];
                }
           },
        proxy: {
            type: 'ajax',
            url: 'services/configurationItems.php',
            reader: {
                type: 'json',
                rootProperty: 'configurationItems'
            }
        }
    }
}); 
```

我返回的 JSON`services/changes.php`如下所示：

```
{
    "success": true,
    "changes": [
        {
            "id": 1,
            "changeId": "XYZ19178263",
            "briefDescription": "Loaded from Proxy",
            "configuration_id": 3,
            "configurations": [
                {
                    "id": "3",
                    "longName": "999-99_-_windows_7_desktop.Computer.Windows",
                    "ciName": "999-99_-_windows_7_desktop"
                }
            ]
        }
    ]
} 
```

在浏览器的控制台中，我可以发出以下命令：

```
Changes.myStore = Ext.getStore('Changes');
Changes.myStore.load();
Changes.record = Changes.myStore.findRecord('id', '1');
Changes.record.getAssociatedData() 
```

最后一个命令将返回一个内部带有配置对象的对象，但所有字段值都会显示`null`，除了`id`似乎设置为随机值的字段值：

```
Object
Configuration: Object
ciName: null
id: "ext-record-11"
longName: null 
```

谁能看到为什么`Configuration`我的 JSON 中的嵌套实例没有被保存？JSON 中的嵌套`Configuration`实例是否应该自动添加到`Configurations`存储中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-14T21:22:41.520

可悲的是，这只是行不通。看来是框架的一个缺点。您无法加载和保存关联（聚合/嵌套）对象。您需要展平结构，然后自己在代码中关联对象。

因此，例如...您的 JSON 将是...

```
{
"success": true,
"changes": [
    {
        "id": 1,
        "changeId": "XYZ19178263",
        "briefDescription": "Loaded from Proxy"
    }
] 
```

}

第二个 JSON 文件/响应如下：

```
 {

    "success": true,
    "configurations": [
                {
                    "id": "3",
                    "longName": "999-99_-_windows_7_desktop.Computer.Windows",
                    "ciName": "999-99_-_windows_7_desktop",
                    "change_id": 1
                }
            ]
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T07:48:16.537

Tinashe 的回答不正确。您当然可以获得嵌套模型。

但是，您的关联与 JSON 相关。

```
 "changes": [
        {
            "id": 1,
            "changeId": "XYZ19178263",
            "briefDescription": "Loaded from Proxy",
            "configuration_id": 3,
            "configurations": [
                {
                    "id": "3",
                    "longName": "999-99_-_windows_7_desktop.Computer.Windows",
                    "ciName": "999-99_-_windows_7_desktop"
                }
            ]
        }
    ] 
```

意味着一个变化有很多配置，但你是说它属于它。这是正确的 JSON：

```
 "changes": [
        {
            "id": 1,
            "changeId": "XYZ19178263",
            "briefDescription": "Loaded from Proxy",
            "configuration_id": 3,
            "configuration": 
                {
                    "id": "3",
                    "longName": "999-99_-_windows_7_desktop.Computer.Windows",
                    "ciName": "999-99_-_windows_7_desktop"
                }

        }
    ] 
```

无论哪种方式，您都需要在关系上设置 getterName（如果您也喜欢 setterName）：

```
associations: [{
            type:'belongsTo', 
            model:'Changes.model.Configuration',
            primaryKey: 'id',
            foreignKey: 'configuration_id',
            associationKey: 'configuration',
            getterName:'getConfiguration'
        }] 
```

然后在 store 加载之后，你可以调用 myChangeModel.getConfiguration();

# asp.net - ASP.NET 成员资格提供程序/密码泄漏

> ID：10940611
> 
> 赞同：2
> 
> 时间：2012-06-07T22:15:03.290
> 
> 标签：asp.net, .net, security

给定一个使用默认 ASP.NET Membership Provider 的站点，并且成员密码格式配置为使用散列，并且散列算法是 SHA1（默认值；LinkedIn 使用的相同），并且假设成员数据库被破坏，是否有任何额外的可以采取哪些措施来进一步减少对所述数据的利用？

从快速查看成员模式来看，密码似乎使用了盐键。这个措施够吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T22:31:46.543

**简而言之**：对于存储密码，您永远不应该使用 MD5、SHA1、SHA256、SHA512、SHA-3 等... **bcrypt**是存储密码的唯一安全方法。

* * *

*以下是上述肯定的原因：*

自从我不久前的问题

> [这是在数据库中加盐和存储密码的方法吗？](https://stackoverflow.com/questions/5431354)

我开始使用[BCrypt](http://derekslager.com/blog/posts/2007/10/bcrypt-dotnet-strong-password-hashing-for-dotnet-and-mono.ashx)作为我的密码哈希码，从我一直阅读的内容来看，即使你掌握了 users 表，也很难从中获得存储密码的纯文本。

我在我的[自定义会员提供程序](https://stackoverflow.com/questions/5701673)中使用它，所以我可以托管我自己的密码。

来自博客文章：

> **为什么选择 BCrypt？**最流行的密码存储方案基于快速散列算法，例如**MD5**和**SHA-1**。BCrypt 是一种计算成本高的自适应散列方案，它利用**Blowfish 分组密码**。它非常适合密码存储，因为其缓慢的初始化时间严重限制了暴力破解密码尝试的有效性。它增加了多少开销是可配置的（即自适应部分），因此测试密码候选所需的计算资源可以随着硬件功能的进步而增长。

从 codahale.com，您还可以阅读**[如何安全地存储密码](http://codahale.com/how-to-safely-store-a-password/)**......

顺便说一句，[BCrypt 项目在 Codeplex](http://bcrypt.codeplex.com/)

# php - 在 PHP 中获取发布的文件名

> ID：10940620
> 
> 赞同：1
> 
> 时间：2012-06-07T22:15:34.723
> 
> 标签：php

我正在使用 php 获取已发布数据的值。

我在用：

```
if (isset($_POST['fieldname'])) {
$field1 = $_POST['fieldname'];
} 
```

这可以正常工作，我可以使用以下方法返回值：

```
echo $field1; 
```

我的问题是有一个名为 ul_image 的字段，其中包含图像的名称并且用于上传。

我试过了：

```
if (isset($_POST['ul_image'])) {
$field2 = $_POST['ul_image'];
}

echo $field2; 
```

但这什么也没返回。

我没有想法，所以有人有什么建议吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T22:17:56.390

文件数据包含在`$_FILES['ul_image']`. 它包含一个带有以下键的数组：（`name`原始文件名）、`type`（MIME 类型）、`size`（文件大小以字节为单位）、`tmp_name`（服务器上的临时路径）、`error`（任何错误）。

然后永久存储文件使用`move_uploaded_file($_FILES['ul_image']['tmp_name'], $destination)`. 原因是增加了安全性；此功能确保黑客没有操纵您的脚本来移动服务器上的任意文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T22:18:23.223

如果输入类型是“文件”，它会在 $_FILES 数组中结束，而不是在 $_POST 数组中。然后，您必须找到一种方法将图像实际获取到您的服务器 - 或任何地方。

从这里开始阅读：http: [//nl3.php.net/move_uploaded_file](http://nl3.php.net/move_uploaded_file)

# sql - 如何查询多对多关系并使用Group By？

> ID：10940621
> 
> 赞同：0
> 
> 时间：2012-06-07T22:15:41.293
> 
> 标签：sql, sql-server

我有以下架构，并希望使用`group`by 来按 TypeName 获取成员数： ![在此处输入图像描述](../Images/7f4ba4639fbd1441100b99fe94c9e443.png)

我编写了返回所有结果的查询：

```
Select *
from Members
join MemberType on Members.MemberID = MemberType.MemberID
join Types on Types.TypeID = MemberType.TypeID
Group by MemberType.TypeID 
```

![在此处输入图像描述](../Images/f9546bd993b6d5cd87246acc399d4de6.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:21:49.103

group by 表示一个聚合函数，例如 count、avg、min、max 等。带有 group by 的查询的 select 语句只能包含 group by 中表示的聚合函数和列。您的查询将不起作用，因为您选择了所有列并仅按一个分组。

根据您的回复 - 您希望拥有

```
select count(*), typename
from.....
group by typename 
```

# c# - 使用 move() 修改 ObservableCollection？

> ID：10940622
> 
> 赞同：2
> 
> 时间：2012-06-07T22:15:41.400
> 
> 标签：c#, wpf, observablecollection

我有一个与修改绑定到 UI 中的 ListBox 的 ObservableCollection 中的各个项目有关的问题。

UI 中的用户可以多选项目，然后将它们放在特定索引处以重新排序。

因此，如果我有项目 {0,1,2,3,4,5,6,7,8,9}，用户可以选择项目 2、5、7（按此顺序）并选择将它们放在索引 3 ，所以集合现在变成了，

{ **0,1,3,2,5,7,4,8,9** }

我现在的工作方式就像我控件上的 ondrop() 方法内部一样，我执行以下操作：

```
foreach (Item item in draggedItems)
{
   int oldIndex = collection.IndexOf(item.DataContext as MyItemType);
   int newIndex = toDropIndex;

  if (newIndex == collection.Count)
  {
         newIndex--;
  }

  if (oldIndex != newIndex)
  {
     collection.Move(oldIndex, newIndex);                                     
  } 
```

}

但问题是，如果我将项目放在开始拖动第一个项目的索引之前，则顺序会颠倒......所以集合变成，

{0,1,3, **7, 5, 2** , 4, 8,9}

如果我在索引 3 之后删除它可以正常工作，但如果我在 3 之前删除它，那么顺序就会颠倒。

现在，我可以做一个简单的删除，然后在我想要的索引处插入所有项目，但是“移动”对我来说具有将选择保留在 ui 中的优势（删除基本上取消选择列表中的项目..） ....所以我需要使用 move 方法，

我上面的方法有什么问题以及如何解决？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T22:35:49.090

```
foreach (Item item in draggedItems)
{
    int oldIndex = collection.IndexOf(item.DataContext as MyItemType);
    int newIndex = Math.Min(toDropIndex, (collection.Count - 1));

    if (oldIndex == newIndex)
        continue;

    collection.Move(oldIndex, newIndex);

    if (oldIndex > newIndex)
        toDropIndex++;
} 
```

这应该可以帮助你。您需要增加 toDropIndex 以便将每个项目移动到最后一个项目的前面。否则，您只需将 2 移动到索引 3，然后将 5 移动到索引 3（将 2 推到索引 4），然后将 7 移动到索引 3（将 2 推到索引 5，将 5 推到索引 4）。相反，这会将 2 放在索引 3 处，将 5 放在索引 4 处，将 7 放在索引 5 处。该`Math.Min()`函数将确保您永远不会超出范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T22:24:44.987

我认为当您之前插入它们时，您应该使用 newIndex - 1。尝试看看它是否有效。

LE：实际上，我认为是+1

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T22:25:42.123

我推测这是因为您没有增加每个项目的“放置索引”，因此选择顺序（2、5、7）中的每个项目都被插入到索引“3”处，这将以相反的顺序显示它们。

添加;

```
newIndex++; 
```

在循环的每次迭代中。

或者，反向枚举您的集合；

```
for (int i = draggedItems.Count; i >= 0; i--)
{
    . . . 
} 
```

# c# - MTOM + basicHttpBinding

> ID：10940624
> 
> 赞同：0
> 
> 时间：2012-06-07T22:15:58.890
> 
> 标签：c#, wcf

我继承了一个配置了 basicHttpBinding 的 WCF 服务 (1)，它与另一个配置了 basicHttpBinding 的 WCF 服务 (2) 通信。我正要涉及另一个 WCF 服务 (3)，因此我从 (2) 复制了绑定配置部分，因此 (1) 现在也可以与 (3) 通信。(1) 到 (2) 工作得很好，但是 (1) 到 (3) 炸弹由于配置错误。

(2) 的绑定配置将 messageEncoding 设置为“Mtom”，从我读到的内容仅适用于 wsHttpBinding。当我在 (3) 的配置中留下 messageEncoding="Mtom" 时，我得到配置异常。如果我把它拿出来，或者把它从“Mtom”改为“Text”，那么从（1）到（3）的通信就可以了。

WCF 服务 (1) 和 (2) 都配置了 basicHttpBinding，但都将 messageEncoding 设置为“Mtom”。

我不想破坏我不完全理解的东西，但我也不想在我的 web.config 中留下不必要的（或不正确的）配置。在这种情况下是否只是忽略了 Mtom，因为这两个服务的配置方式相同，并且默认情况下返回到 Text？Mtom 是否以任何方式适用于 basicHttpBinding？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:27:47.930

basicHttpBinding 也可以支持 mtom，所以你的服务使用了 mtom。您可以验证是否将提琴手放在中间并查看有效负载。

# wordpress - the_post_thumbnail 不起作用

> ID：10940629
> 
> 赞同：3
> 
> 时间：2012-06-07T22:16:20.450
> 
> 标签：wordpress, wordpress-theming

我对 wordpress 不是很熟悉，但我一直在努力将我的布局写成一个主题，这样我就可以使用 wordpress 平台。由于某种原因，我无法使 the_post_thumbnail 功能正常工作。我已经加了

```
add_theme_support( 'post-thumbnails' ); 
```

到我的functions.php文件，是的，我确实设置了特色图片并包含the_post_thumbnail(); 在循环。

我究竟做错了什么？我甚至通过实际函数发现它在引用 wp_get_attachment_image_src() 函数时在 wp_get_attachment_image() 函数中的 $image 变量存在问题。$image 是空的，当我猜它不应该是。它得到的 post_thumbnail id 很好，所以我知道它知道有一个图像集。它只是不会显示该死的东西。

我正在从头开始为自己编写一个自定义主题，所以 functions.php 只有 add_theme_support( 'post-thumbnails' ); 如果你好奇的话，现在就在里面。

编辑：

这是我的循环：

```
<?php if (have_posts()) : ?>
  <?php while (have_posts()) : the_post(); ?>
    <div class="home-entry clearfix" id="post-<?php the_ID(); ?>">

      <a href="<?php the_permalink() ?>" rel="bookmark" >
        <?php
        if (has_post_thumbnail()) {
          the_post_thumbnail(); 
        } else {
          echo '<img class="home-thumb trans-border" src="' . catch_first_image() . '" width="200px" height="150px" title="' . the_title() . '" />';
        }
        ?>
      </a>

      <div class="home-post">
        <div class="home-meta">Posted <?php the_time('M j, Y'); ?> - <?php the_category(' , ') ?> - <?php comments_popup_link('No Comments', '1 Comment', '% Comments'); ?></div>
        <h2 class="post-title">
          <a href="<?php the_permalink(); ?>" title="Permanent Link to <?php the_title_attribute(); ?>" rel="bookmark" class="title"><?php the_title(); ?></a>
          <a class="read" href="<?php the_permalink(); ?>" title="Read More">Read More</a>
        </h2>

        <div class="home-excerpt">
          <?php the_excerpt(); ?>
        </div>
      </div>

    </div>

  <?php endwhile; ?>    
  <?php echo paginate_links() ?> 
<?php else : ?>
  <h2>Nothing Found</h2>
<?php endif; ?> 
```

继续：

所以我去找了一个具有特色图像支持的主题，并准确地复制了循环的那部分，但仍然没有：

```
<?php if(has_post_thumbnail()) {
echo '<span class="thumbnail"><a href="'; the_permalink(); echo'">';the_post_thumbnail(array(100,100)); echo '</a></span>';

 } else {

                  $image = evlget_first_image(); 

                    if ($image):
                  echo '<span class="thumbnail"><a href="'; the_permalink(); echo'"><img src="'.$image.'" alt="';the_title();echo'" /></a></span>';
                   endif;
           } ?> 
```

那到底是什么？我很混乱...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T01:48:58.627

您的图像是否本地存储在您的服务器/本地机器上？如果没有，the_post_thumbnail() 将无法工作，因为它无法根据 URL 检索图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T22:27:55.543

这个函数会自己回显。

解决方法：去掉函数前面的回声。

检查[这个](http://codex.wordpress.org/Function_Reference/the_post_thumbnail)

# javascript - 提交时，X 秒后，如果窗口模糊

> ID：10940630
> 
> 赞同：0
> 
> 时间：2012-06-07T22:16:23.367
> 
> 标签：javascript, jquery, window, onblur

我试图确定提交 3 秒后窗口是否失去焦点。

目前我有这个：

```
$("input").on("submit",function(){
$(window).blur(function(){
  console.log(a);
})
}); 
```

但是这个，无论你什么时候按下提交，如果你点击窗口外或者最小化窗口都会`console.log`触发`a`。

这就是我想要实现的目标：

1.  用户提交表单
2.  在 3 秒内，如果窗口失去焦点，执行 console.log(a);
3.  3 秒后，如果窗口失去焦点，**则什么也不做。**
4.  如果用户在同一会话中再次提交，请从步骤 1 开始重复。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T22:27:29.123

尝试这个：

```
$("#form").on("submit",function(){
    var blurFunc = function() {
        console.log(a);
    }

    $(window).blur(blurFunc);
    setTimeout(function() { $(window).unbind('blur', blurFunc); }, 3000);
}); 
```

该`setTimeout`调用将在 3 秒后解除与模糊事件的绑定，导致该事件不触发。

有关更多信息，`setTimeout`请参见此处：[http ://www.elated.com/articles/javascript-timers-with-settimeout-and-setinterval/](http://www.elated.com/articles/javascript-timers-with-settimeout-and-setinterval/)

或者，您可以执行以下操作：

```
$("#form").on("submit",function(){
    var submitted = true;

    var blurFunc = function() {
        if(submitted) {
            console.log(a);
        } 
    }

    $(window).blur(blurFunc);
    setTimeout(function() { submitted = false; }, 3000);
}); 
```

# css - 边框未扩展元素的宽度

> ID：10940632
> 
> 赞同：0
> 
> 时间：2012-06-07T22:16:37.827
> 
> 标签：css

虽然我记得有一个可以正确设置的 css，它可以让我设置边框，但它不会扩大元素的大小。例如，如果我将宽度设置为 100，并且将边框设置为一个 1，则元素宽度变为 102。

它们是保持元素为 100 的属性吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T22:21:36.503

您可以使用`outline`不占用任何空间的 ：

```
outline: 1px solid black; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-07T22:22:48.077

你在想`box-sizing: border-box`。

规范：[http ://www.w3.org/TR/css3-ui/#box-sizing](http://www.w3.org/TR/css3-ui/#box-sizing)

```
#whatever {
    -webkit-box-sizing: border-box;
       -moz-box-sizing: border-box;
            box-sizing: border-box;
} 
```

实际使用信息：[http ://html5please.com/#box-sizing](http://html5please.com/#box-sizing)

浏览器支持：[http ://caniuse.com/css3-boxsizing](http://caniuse.com/css3-boxsizing)

# grammar - 上下文无关语言中的“免费”在概念上是什么意思？

> ID：10940633
> 
> 赞同：3
> 
> 时间：2012-06-07T22:16:54.130
> 
> 标签：grammar, context-free-grammar

> **可能重复：**
> [什么是上下文无关语法？](https://stackoverflow.com/questions/6713240/what-is-a-context-free-grammar)

我无法理解上下文无关语法或语言中“免费”的概念含义？什么是免费的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T11:56:31.170

上下文无关与上下文相关。虽然上下文相关语法具有以下形式的规则

```
αAβ → αγβ 
```

上下文无关的规则符合

```
A → γ 
```

即，A 可导出到 γ，与 α 和 β 的上下文无关（自由）。

[关于乔姆斯基层次结构](http://en.wikipedia.org/wiki/Chomsky_hierarchy)的维基百科文章更详细地解释了它。

# ruby-on-rails - 带有 S3 的回形针 - 未定义的方法

> ID：10940649
> 
> 赞同：1
> 
> 时间：2012-06-07T22:18:56.563
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, amazon-s3, paperclip

我正在尝试在我的 Rails 3.2 应用程序中将 Paperclip gem 与 A​​mazon S3 一起使用。但是，当我添加 :storage => :s3 和 S3 信息并生成表单时，就会出现问题。

**错误：**

```
undefined method `photo' for #<PlacePhoto:0x007fdbbd1e75a8> 
```

提取的源代码（第 78 行附近）：

```
75:   <% end %>
76: 
77:   <%= f.simple_fields_for :place_photos do |photo| %>
78:     <%= photo.input :photo %>
79:     <%= photo.input :description,
80:       :label => "Photo label",
81:       :input_html => { :class => 'span4', :rows => 2 } %> 
```

**模型：**

```
class PlacePhoto < ActiveRecord::Base
  has_attached_file :photo, 
    :styles => { :medium => "300x300#", :thumb => "100x100#" },
    :storage => :s3,
    :s3_credentials => "#{RAILS_ROOT}/config/s3.yml",
    :path => "/:style/:id/:filename"
  attr_accessible :description, :photo

  belongs_to :place

  validates_attachment :photo,
    :presence => true,
    :content_type => { :content_type => /image/ },
    :size => { :in => 0..2.megabytes }
end 
```

**移民**

```
class CreatePlacePhotos < ActiveRecord::Migration
  def change
    create_table :place_photos do |t|
      t.text :description
      t.integer :place_id
      t.has_attached_file :photo

      t.timestamps
    end
  end
end 
```

我使用以下文章来实现 S3：[http](http://doganberktas.com/2010/09/14/amazon-s3-and-paperclip-rails-3/) ://doganberktas.com/2010/09/14/amazon-s3-and-paperclip-rails-3/ 。我做了捆绑安装，rake db:migrate 并重新启动了服务器。

有趣的是，当模型缺少 S3 信息时，不会出现错误并且正在生成表单：

**型号（其他版本）：**

```
class PlacePhoto < ActiveRecord::Base
  has_attached_file :photo, 
    :styles => { :medium => "300x300#", :thumb => "100x100#" }
  attr_accessible :description, :photo

  belongs_to :place

  validates_attachment :photo,
    :presence => true,
    :content_type => { :content_type => /image/ },
    :size => { :in => 0..2.megabytes }
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-13T22:07:30.987

通过更改解决的问题：

```
:s3_credentials => "#{RAILS_ROOT}/config/s3.yml", 
```

到

```
:s3_credentials => "#{Rails.root}/config/s3.yml", 
```

# mysql - 多个日期期间

> ID：10940652
> 
> 赞同：0
> 
> 时间：2012-06-07T22:19:12.603
> 
> 标签：mysql, period

在我的 MySQL 数据库中，我有一个存储日期期间的表。每个期间行都有定义期间开始和期间结束日期的 PSTART 和 PEND 列。如何创建一个查询来检查一个特定的日期是否在这些时间段内？期数不固定！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:28:04.237

```
SELECT * FROM periods WHERE [a date] BETWEEN PSTART AND PEND 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T22:27:51.480

根据您到目前为止的问题，这应该为您提供日期介于`PSTART`和之间的所有行`PEND`- 您可以根据您对包容性/排他性的要求进行修改：

```
SELECT * FROM table WHERE date>=PSTART AND date<=PEND 
```

# java - 从未选择多个 OP 代码的 Java SocketChannel register()

> ID：10940654
> 
> 赞同：3
> 
> 时间：2012-06-07T22:19:47.220
> 
> 标签：java, selector, nio, socketchannel

我用 Java 构建了一个基于 Selector 的系统，它可以接受多个客户端。它在 OP_ACCEPT 下注册了一个 ServerSocketChannel，它接受（）传入的连接并再次向选择器注册生成的 SocketChannel。这是那一点：

```
ServerSocketChannel insock = ServerSocketChannel.open();
    insock.configureBlocking(false);
    insock.socket().bind(new InetSocketAddress(6789));

    Selector sel = Selector.open();
    SelectionKey joinchannel = insock.register(sel, SelectionKey.OP_ACCEPT);

    System.out.println("Ready to accept incoming connections.");

    while (true) {
        int ready = sel.selectNow();
        if (ready == 0)
            continue;
        Set<SelectionKey> selectedKeys = sel.selectedKeys();
        Iterator<SelectionKey> keyIterator = selectedKeys.iterator();
        while (keyIterator.hasNext()) {
            SelectionKey key = keyIterator.next();
            if(key.isAcceptable()){
                SocketChannel newConnection = insock.accept();
                System.out.println("New client "+newConnection+" connected.");
                newConnection.configureBlocking(false);
                newConnection.register(sel, SelectionKey.OP_READ).attach(new DGPlayer());
            } 
```

如果我为 OP_READ 注册新的 SocketChannel，则可以正常工作。isReadable() 检查成功，读取数据。这是那一点：

```
else if(key.isReadable()){
                ByteBuffer buf = ByteBuffer.allocate(1024);
                int trans = ((SocketChannel)key.channel()).read(buf); buf.flip();
                byte[] ba = new byte[buf.remaining()]; buf.get(ba);
                String msg = new String(ba, 0, ba.length, Charset.forName("UTF-8"));

                if(trans > 0){
                    DGPlayer client = (DGPlayer) key.attachment();
                    System.out.println(client.name+": "+msg.trim());
                }
            }
                //              else if(key.isWritable()){
//                  ByteBuffer buf = ByteBuffer.allocate(48);
//                  buf.clear();
//                  buf.put(((String)key.attachment()).getBytes());
//                  buf.flip();
//                  
//                  SocketChannel target = ((SocketChannel)key.channel());
//                  while(buf.hasRemaining()) {
//                      target.write(buf);
//                  }
//                  
//                  key.attach(null);
//              } 
```

但是，如果我为 OP_READ|OP_WRITE 注册 SocketChannel，则什么也不会发生。据我所知，选择器永远不会找到可读（）或可写（）的通道。唯一的变化是注册频道以获得 WRITE 权限。

知道为什么会这样吗？

编辑 - 为了完成，这里有一些客户端代码：

```
while (true) {
        int readyChannels = sel.select();
        if (readyChannels == 0)
            continue;

        Set<SelectionKey> selectedKeys = sel.selectedKeys();
        Iterator<SelectionKey> keyIterator = selectedKeys.iterator();

        while (keyIterator.hasNext()) {
            SelectionKey key = keyIterator.next();

            if (key.isReadable()) {
                ByteBuffer buf = ByteBuffer.allocate(1024);
                int trans = ((SocketChannel)key.channel()).read(buf); buf.flip();
                byte[] ba = new byte[buf.remaining()]; buf.get(ba);
                String msg = new String(ba, 0, ba.length, Charset.forName("UTF-8"));

                if(msg.trim().length() != 0)
                    System.out.println("Response from server: "+msg.trim());
            }
            else if(key.isWritable() && messages.size() > 0){
                String message = messages.remove();
                ByteBuffer buf = ByteBuffer.allocate(48);
                buf.clear();
                buf.put(message.getBytes(Charset.forName("UTF-8")));

                buf.flip();

                int written = outsock.write(buf);
                while(buf.hasRemaining()){
                    outsock.write(buf);
                }

                System.out.println("Wrote '"+message+"' to server");
            }
            keyIterator.remove();
        }
    } 
```

（客户端为 OP_READ|OP_WRITE 注册服务器）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-07T22:46:28.750

一般来说，`OP_WRITE`如果您没有任何东西可以主动写入，那么注册一个频道是个坏主意。大多数通道大部分时间都可以写入，因此每次调用`Selector.select`都会返回而不会阻塞并消耗资源。最好[`SelectionKey.interestOps`](http://docs.oracle.com/javase/7/docs/api/java/nio/channels/SelectionKey.html#interestOps%28int%29)在准备好向通道写入内容时添加写入标志，并在完成后删除该标志。

# php - php5：如何创建表单并将表单条目输入到mysql查询中？

> ID：10940658
> 
> 赞同：-1
> 
> 时间：2012-06-07T22:20:10.663
> 
> 标签：php, mysql

在php5中我只需要创建一个用户可以输入abc，def等的表单，这个用户条目应该去mysql查询和显示信息，这怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:39:27.833

我认为这个网站可以帮助你做你正在寻找的东西，然后你可以继续：http: [//blazonry.com/scripting/linksdb/insert_data.php](http://blazonry.com/scripting/linksdb/insert_data.php)

# php - 在 MySQL、PHP 或一般情况下排序时，字符的优先级是什么？

> ID：10940660
> 
> 赞同：5
> 
> 时间：2012-06-07T22:20:22.070
> 
> 标签：php, javascript, mysql, windows, linux

**问题：** 在 MySQL、PHP 或 Linux 和 Windows 操作系统上进行排序时，我在哪里可以找到字符的优先级？

**例如**，每个人都知道在 MySQL 中对字符串执行升序排序时***a***在***b之前。***但是其他角色呢？美元符号***$***是否在星号*******之前？感叹号前面有空格吗？ETC...

什么决定了排序顺序？它是否使用底层 ascii / UTF-8 值？不同的技术有区别吗？

需要考虑的技术：

1.  数据库 - MySQL / SQL / SQLite / Oracle / 等
2.  编程语言（用于字符串排序功能） - PHP / Javascript / ASP.NET / Visual C# / Python / Ruby / Objective C
3.  操作系统（即按文件名排序文件）- Windows / Linux / MacOS / iOS / Android

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:27:58.940

字符表示为从无符号整数类型到特定字形的映射。特定映射由字符集定义。

因此，当您比较字符时，您实际上是在比较表示特定字符​​集中字符的整数。

例如，Java`String`根据它们的 unicode 表示来比较 s。[来源](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html#compareTo%28java.lang.String%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T22:28:57.877

在数据库术语中，这称为排序规则，大多数字符集都有一个默认值。如果您使用的是 unicode，您可能会在这里查看：[http ://www.unicode.org/reports/tr10/tr10-24.html](http://www.unicode.org/reports/tr10/tr10-24.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-07T22:29:43.290

当考虑其他语言时，它变得更加有趣。

Ä 和 ö 是在荷兰语和德语中带有重音符号的字母，但在瑞典字母表中是“真正的”字母（在 Z 之后，分别不在 A 和 B/O 和 L 之间）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-07T22:36:35.390

1.  数据库 - 排序规则，如果没有设置排序规则，则整数字符值
2.  编程语言 - 语言环境或整数字符值或用户定义的函数（通常默认情况下所有 3 个选项都可用）
3.  操作系统 - 语言环境

# php - 为什么这个基础课不起作用？

> ID：10940666
> 
> 赞同：-3
> 
> 时间：2012-06-07T22:21:29.353
> 
> 标签：php, class

我不明白为什么我的课不工作。它不返回任何东西。有什么错误吗？

```
class User  {

public $first_name;
public $last_name;

public function full_name() {
if(isset($this->first_name) && isset($this->last_name)) {
    return $this->first_name . " " . $this->last_name;
 } else {
    return "No name!";
 }
}

public  function assign () {

$this->first_name = "Name";
$this->last_name =  "Surname";
 }

}

$user = new User();
$user->assign();
$user->full_name();

?> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-07T22:23:09.683

您是否忘记“回显”返回值？

```
echo $user->full_name(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T22:24:09.073

您正在返回，而不是打印。

尝试打印返回值：

```
echo $user->full_name(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T22:23:47.090

尝试`empty()`函数而不是`isset()`.

# c++ - Matlab Coder 与手动编码？

> ID：10940669
> 
> 赞同：45
> 
> 时间：2012-06-07T22:21:42.457
> 
> 标签：c++, c, matlab, matlab-deployment

将来阅读本文的人的一些背景知识（以防它未锁定）。我倾向于使用高级语言进行编程以首先理解问题。在涵盖了所有可能的极端情况之后，我继续将代码翻译成 C++（或 C）。

我编写的大部分代码都包含数学，所以 MATLAB 是我使用的语言（我的替代语言是 Python）。无论如何，然后我将代码从 MATLAB 手动翻译成 C++。

有谁知道使用 MATLAB Coder 是否有任何优势/劣势？这是一种新产品，而且非常昂贵，但除了节省翻译时间之外，还有其他好处吗？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-06-07T23:52:21.510

**免责声明**

这是一篇非常有主见的帖子，基于我对一个特定项目的经验。我没有使用过最新版本的编码器，但我对将 matlab 代码转换为 C++ 的等效产品（嵌入式编码器）有经验，该产品包含在以前的 Real Time Workshop 产品中。这些意见仍应适用。你的旅费可能会改变。

**早期福利...**

在我的情况下，嵌入式编码器用于制作适合大型音频应用程序一部分的处理块。处理块的任务是实时处理恒定的样本缓冲区流。我在 matlab 中制作了原始算法，转换工具使将早期原型转换为可以编译为本机代码并在实时应用程序中使用的东西变得相当简单。假设转换后的代码在数值上与原始代码相同，并且在转换过程中没有人为错误的可能性（假设 Mahworks 工程师具有超人的能力），这也很好。

**在这个非常早期的原型设计阶段之后，好处就结束了……**

问题 1：浪费时间的接口

随着算法越来越复杂，我开始越来越担心如何将matlab接口编码到函数中，以便在转换后很容易与C++框架接口（我想实时监控内部状态） . 这最终开始使用与实际算法开发本身一样多的时间，从而违背了使用这种工具的目的。我本可以将算法分解成更小的块，然后使用 C++ 将它们粘合在一起，但是我会失去对完整算法进行直接仅 Matlab 比较的能力。

问题 2：并非所有功能都受支持或完全支持

编码器支持[Matlab 语言的一个子集](http://www.mathworks.com/help/coder/language-supported-for-code-generation.html)。在某些情况下，支持的功能在某些方面受到限制。例如，在我正在开发的应用程序中，我希望能够实时修改过滤器的特性。我不能使用标准的 Matlab 过滤器原型设计函数，因为代码生成工具不允许使用可变参数调用过滤器原型设计函数。尽管我们拥有信号处理工具箱许可证，但我最终还是花时间阅读了 DSP 书籍来开发自己的实现。

问题 3：自动生成的代码效率低下

我对接口问题感到沮丧，并用 C++ 手工编写了算法。对于我的应用程序，手写代码比转换后的代码有 75% 的性能提升。根据您的应用程序、可能使用的转换工具的版本以及您对分析器的喜爱程度，性能差异会非常不同。转换工具本身是一个复杂的产品，需要学习许多设置。尝试弄清楚如何调整设置和 matlab 代码以提高性能会花费更多时间，而这些时间可能会花在手动编码上。

**我没有使用转换工具，因为...**

我现在更喜欢测试*辅助*的方法。我在 Matlab 中编写了一个原型并进行了调整，直到我确定它的行为也符合我的要求。然后我在 C++ 中思考并以对该语言更自然的方式重新编码算法。然后，我制作了一个与我的 C++ 代码交互的 mex 文件，以便我可以根据我信任的 matlab 等效项对其进行测试。对于我工作的问题空间，这是一种更有效的（人和机器）完成工作的方法。

总之，这只是一位用户的意见。也许（正如对您原始帖子的评论中所建议的那样）您应该注册试用以了解您的相处方式。但是，如果您有点 C++ 忍者，通过构建 mex 文件进行测试不需要附加产品的昂贵许可证，它会让您成为更好的开发人员。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T22:48:07.643

如果您在 MATLAB 中编写更容易，那么价值将在很大程度上取决于您对时间的重视程度。

比较 MATLAB 和 C 或 C++ 的性能非常复杂。在大多数情况下，C 或 C++ 会更快，但在某些线性代数应用程序中，MATLAB 可能会执行得最快。我记得一位教授声称他的 FORTRAN 应用程序运行速度比 MATLAB 中的同类应用程序慢。有很多关于这方面的案例研究 - 我建议您查看比较谷歌出现的速度的不同研究，并将它们与您正在做的决定进行比较。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-01-25T17:15:41.613

这都是关于过程的。

在我工作的地方，我们为 Simulink 模型及其依赖项开发了一个很好的管理方案。然后我开发了一个脚本来进行自动编码步骤，一个同事在 IDE 中开发了项目文件，这样在运行我的脚本时，所有源文件都被分派到适当的文件夹结构中，并且可以在 IDE 中轻松编译项目，其他人也部署了一个包装器代码来连接自动编码的软件。

诀窍（恕我直言）是尽可能早地使您的流程自动化。通过这样做，您可以开发非常复杂的模型，然后在几个小时内创建用于生产的 C 代码。您可以随心所欲地更新模型，但代码易于维护。

缺点是设置这个过程既不简单也不完全通用（一种尺寸不适合大多数人）。

此外，您确实应该进行一些测试，以验证生成的代码确实代表了您拥有的模型。这不能保证，虽然我认为 Matlab Coder 非常可靠，但它并非没有错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-29T16:34:00.167

正如上面所说，这取决于您的应用程序。我试图转换（通信系统的）解码器，它给出了准确的结果，但对于大量比特，它比它自己的 MATLAB 版本慢。所以我的结论是手动将 MATLAB 代码转换为 C。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-07T22:53:23.593

优势：

1.  有很多复杂的数学函数可用。
2.  对于与核心数学编程相关的。

坏处：

1.  与 C#、java、python 等其他现代语言相比，它并不流行。你的名字。
2.  由于您编写 matlab 代码，因此您往往主要专注于解决复杂的数学问题。另一种语言也用于绘图、Web 开发和数学等各种任务（它肯定没有像 matlab 这样丰富的数学函数）

我知道的另一个好处：由于它针对技术编程进行了优化，因此在该领域编写应用程序时可能会有更好的性能。性能非常可靠，看看这个问题，它提供了[一些有用的信息](https://stackoverflow.com/questions/2133031/is-matlab-faster-than-python)。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-10-07T09:46:04.180

我认为 MATLAB 比普通的 C 编码有很多限制。我同意有这么多可以直接使用的内置块，但是如果您在 MATLAB 中编写代码，那么与 C 代码相比，它将花费近 5 倍的时间，因为从定义变量到执行循环、切换案例，它非常耗时在 MATLAB 建模中

假设您已经使用 Simulink 创建了一个模型，但是当您再次尝试添加一些东西时，这非常耗时，但在 C 语言中这只是 2 分钟的任务。

下一个问题是您不能像在其他编程语言中那样注释掉任何模型。

对于一个大型项目，有时 MATLAB 会崩溃、出错，有时会挂起，并且在 stateflow 中进行仿真就像是一团糟。

最后我只说一件事，只有在你有足够的耐心的情况下才使用 MATLAB 建模（stateflow+simulink）。

# scala - 类定义认为设置变量是一个单元？

> ID：10940678
> 
> 赞同：1
> 
> 时间：2012-06-07T22:22:38.433
> 
> 标签：scala

写出一个 Scala 类，这里的问题是编译器认为代码是一个没有返回正确值的单元。这是一种用于在类中设置属性的方法：

```
def setObject(`object`:StripeObject):StripeObject = {
    this.`object` = `object`
  } 
```

错误是：`type mismatch; found : Unit required: com.stripe.StripeObject`

完整的课程是：

```
case class EventData(var previousAttributes: HashMap[String,Object], var `object`:StripeObject) extends StripeObject {

  def getPreviousAttributes = {
    previousAttributes
  }

  def setPreviousAttributes(previousAttributes: HashMap[String, Object]) = {
    this.previousAttributes = previousAttributes
  }

  def getObject = {
    `object`
  }

  def setObject(`object`:StripeObject):StripeObject = {
    this.`object` = `object`
  }
} 
```

如何确保它不返回单位？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T22:35:58.940

在 Java 中，setter 通常用`void`返回类型定义：

```
public void setObj(StripeObject name); 
```

Scala 的等价物是`Unit`，它也是赋值表达式的值。因此，在 Scala 中，您将编写一个 setter 作为以下之一（它们都是等价的，第一个是最惯用的）：

```
def setObj(obj: StripeObject) {
  this.obj = obj
}

def setObj(obj: StripeObject): Unit = {
  this.obj = obj
}

def setObj(obj: StripeObject) = this.obj = obj 
```

不过，这只是 setter 的约定，如果需要，您可以轻松地返回该值：

```
def setObj(obj: StripeObject): StripeObject = {
  this.obj = obj
  obj
} 
```

这有点不寻常，但不太可能引起问题，即使对于期待`Unit`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T22:33:51.287

在你看到的每一种情况下

```
whatever = something 
```

将其替换为

```
whatever = something ; whatever 
```

你会没事的。分配*确实*返回`Unit`。因此，只需重述您想要返回的内容。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-07T22:27:14.353

我花了一些时间来解决这个问题，但在 Scala 中，赋值不会像在 Java 中那样返回值。不知道他们为什么这样做，但他们做到了。这是一些示例代码，您可以在 Scala 控制台中看到它：

```
scala> var number = 30
number: Int = 30

scala> var otherNumber = number = 40
otherNumber: Unit = () 
```

所以你需要**`object`**在方法中返回。此外，避免在代码中像这样使用语言关键字，即使这是可能的，它也会使代码更难阅读。

# python - 向先前定义的函数添加功能的优雅方式

> ID：10940685
> 
> 赞同：1
> 
> 时间：2012-06-07T22:23:29.780
> 
> 标签：python, decorator

## 如何将两个功能组合在一起

我有一个类控制一些硬件：

```
class Heater()
    def set_power(self,dutycycle, period)
       ...
    def turn_on(self)
       ...
    def turn_off(self) 
```

还有一个连接到数据库并处理实验的所有数据记录功能的类：

```
class DataLogger()
    def __init__(self)
        # Record measurements and controls in a database
    def start(self,t)
        # Starts a new thread to acquire and record measuements every t seconds 
```

现在，在我的程序 recipe.py 中，我想做类似的事情：

```
 log = DataLogger()

        @DataLogger_decorator
        H1 = Heater()

        log.start(60)

        H1.set_power(10,100)
        H1.turn_on()
        sleep(10)
        H1.turn_off()
        etc 
```

数据记录器记录 H1 上的所有操作。我可以更改任何涉及的类，只是寻找一种优雅的方式来做到这一点。理想情况下，硬件功能与数据库和 DataLogger 功能保持分离。理想情况下，DataLogger 可重复用于其他控制和测量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T22:37:02.740

对于这种情况，我更喜欢将 DataLogger 作为 BaseClass 或 Mixin 用于其他类，而不是尝试做某种装饰器魔术（这对我来说并没有真正点击作为使用装饰器的 Pythonic 方式）

例如：

```
class DataLogger(object):
  def __init__(self):
      # do init stuff

  def startlog(self, t):
      # start the log 

class Heater(DataLogger):
   def __init__(self):
      # do some stuff before initing your dataLogger
      super(Heater, self).__init__() # init the DataLogger
   #other functions 
```

这样你就可以这样做：

```
h1 = Heater()
h1.startlog(5)
h1.do_other_stuff() 
```

将其用作现有类的 mixin 的示例：

```
class DataLoggerMixin(object): 
  def __init__(self):
    # do your init things
    super(DataLogger, this).__init__()  # this will trigger the next __init__ call in the inheritance chain (i.e. whatever you mix it with)

class Heater(object):
    """ Here's a heater you have lying around that doesn't do data logging.  No need to change it."""

# add a new child class with 2 lines, that includes the DataLoggerMixin as the first parent class, and you will have a new class with all the DataLogging functionality and the Heater functionality. 
class LoggingHeater(DataLoggerMixin, Heater):
    """ Now its a data logging heater """
    pass  # no further code should be necessary if you list DataLoggerMixin first in the base classes. 

>>> logging_heater = LoggingHeater()
>>> logging_heater.start_log(5)
>>> logging_heater.do_heater_stuff() 
```

在 python 中成功使用 mixins 的关键是了解方法解析顺序 (MRO)，特别是对于 super，如何在多重继承情况下工作。请参阅[协作](https://stackoverflow.com/questions/6098970/are-mixin-class-init-functions-not-automatically-called-in-python)多重继承。

```
____________________________________________________________________ 
```

***替代方法：使用包装类***

如果 Mixin 方法不适用于您的方案，另一种选择是使用 DataLogger 作为要记录的对象的包装类。基本上，Data Logger 将接受一个对象在其构造函数中进行登录，如下所示：

```
class DataLogger(object)
  def __init__(self, object_to_log)
    self.object = object_to_log   # now you have access to self.object in all your methods.
    # Record measurements and controls in a database
  def start(self,t)
    # Starts a new thread to aqcuire and reccord measuements every t secconds 
```

我不确定完成了哪种类型的日志记录或监控，以及您是否需要访问正在记录的对象，或者它是否是独立的。如果前者，大概是 Heater、Valve 等都实现了 DataLogger 关心的相同功能，那么无论它们是什么类，您都可以为它们记录。（这是 Python 等动态语言的一个方便的核心功能，称为“鸭子类型”，您可以在其中对不同的类型进行操作，只要这些类型实现了您关心的功能或属性。“如果它像鸭子一样嘎嘎叫...... ")

您的代码可能看起来更像这样，使用包装类方法：

```
h1 = Heater() 
log = DataLogger(h1)
log.start(60)
h1.set_power(10,100)
h1.turn_on()
sleep(10)
h1.turn_off() 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-07T23:37:45.057

您可以装饰 Heater 并提供 Logger 作为装饰器的参数：

```
# define the primitive logger

class Logger(object):
    def log(self, func, args, kwargs):
        print "Logging %s %r %r" % (func, args, kwargs)

# define the decorator
# since it accepts an argument, it's essentially a decorator generator
# which is supposed to return the actual decorator
# which in turn adds a logger call to each method of the class

def with_logger(logger):

    def method_wrapper(cls):

        def wrap(name, fun):
            def _(self, *a, **kw):
                logger.log(name, a, kw)
                return fun(self, *a, **kw)
            return _

        for k in dir(cls):
            v = getattr(cls, k)
            if not k.startswith('__') and callable(v):
                setattr(cls, k, wrap(k, v))
        return cls

    return method_wrapper

# create a logger...

my_logger = Logger()

# ...and pass it to the decorator

@with_logger(my_logger)
class Heater(object):
    def set_power(self,dutycycle, period):
        pass
    def turn_on(self):
        pass
    def turn_off(self):
        pass

# let's test!

h = Heater()
h.set_power(100, 200)
h.turn_on()
h.turn_off() 
```

# mysql - Mysql只提取字母字符

> ID：10940687
> 
> 赞同：1
> 
> 时间：2012-06-07T22:23:54.347
> 
> 标签：mysql, character, extract, alphabetical

我有一列包含字母和数字的混合。我需要从列中获取第一组字母字符。一旦遇到整数，我就不再想要了..例如：

取 5 行：

*   S123J90
*   SF91K88
*   JK12K99
*   X129PL9
*   ABCD123

我需要这 5 行中的以下数据

*   小号
*   顺丰
*   JK
*   X
*   A B C D

我发现很多关于嵌套 REPLACE 查询的讨论，但我确定那里有更好的选择吗？

注意：所有行至少以一个字母字符开头

* * *

更新：我使用了这个函数的修改[http://www.rummandba.com/2011/02/mysql-function-to-remove-non.html](http://www.rummandba.com/2011/02/mysql-function-to-remove-non.html)如下

```
DROP FUNCTION IF EXISTS remove_non_alpha_char_f //
CREATE FUNCTION remove_non_alpha_char_f (prm_strInput varchar(255))
RETURNS VARCHAR(255)
DETERMINISTIC
BEGIN
  DECLARE i INT DEFAULT 1;
  DECLARE v_char VARCHAR(1);
  DECLARE v_parseStr VARCHAR(255) DEFAULT ' ';

WHILE (i <= LENGTH(prm_strInput) )  DO 

  SET v_char = SUBSTR(prm_strInput,i,1);
  IF v_char REGEXP  '^[A-Za-z ]+$' THEN  #alpha

        SET v_parseStr = CONCAT(v_parseStr,v_char);  
        SET i = i + 1;
  ELSE
    SET i=256;
  END IF;

END WHILE; 
RETURN trim(v_parseStr);
END 
```

注意：我已经为这个答案重新编码了函数，所以语法可能已经失效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:34:04.453

您可以使用 SUBSTRING()、LENGTH() 创建一个递归函数，检查每个字符是否按字母顺序排列，然后将其添加到结果中。

一旦它到达字符串的末尾或碰到一个数字，就让它退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T22:30:19.540

对于每一行，请尝试以下操作：

```
$split = preg_split("/\d/", $your_str); 
```

你想`$split[0]`从数组中得到`$split`.

注意这是 PHP - @Pablo 是正确的，你真的需要 MySQL 来为你做这件事吗？

# html - 如何在浏览器不扩展视口的情况下将元素推送到屏幕外？

> ID：10940689
> 
> 赞同：16
> 
> 时间：2012-06-07T22:24:02.227
> 
> 标签：html, css

有时能够将东西滑出视口以隐藏它们是很好的，例如在制作可隐藏的侧边栏或面板时。但是当我将某些东西推过窗口的右边缘或下边缘时，浏览器（在我的例子中是 Chrome）会自动向它添加滚动条。用户现在可以滚动到我试图隐藏的元素。（[JSFiddle 示例](http://jsfiddle.net/Codemonkey/3dLTT/2)）

我可以通过设置 body 元素来移除滚动条`overflow-x: hidden`，但这会带来很多其他副作用。例如，用户仍然可能不小心点击并拖动到屏幕边缘。用户现在看到了“隐藏”元素，如果他们不知道浏览器是如何工作的，也可能会被卡住。（[JSFiddle 示例](http://jsfiddle.net/Codemonkey/3dLTT/1)）

如何在不遇到这些弊端的情况下实现这种“消失在屏幕外”的效果？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-07T22:24:03.240

我发现解决此问题的最佳方法是将元素放置在相同大小的不可见包装中。包装器应该有`overflow: hidden`并且元素应该被推到包装器的边缘之外，而不是在`<body>`.

这个解决方案的诀窍是实际上没有任何东西离开屏幕，因此浏览器不会尝试增加视口大小来补偿。相反，包装器位于屏幕边缘，侧边栏位于其中。将包装器视为不透明贴图。

包装器还必须调整为 0，这样它就不会在文档顶部不可见，并且可能会抓取不适合它的点击。

这是实践中解决方案的示例。我使用 jQuery 来操作 CSS，但任何 JavaScript 库（或没有）都可以解决问题。请注意，除非侧边栏包装器按比例缩小，否则“点击器”div 将不可点击。

```
$('.sidebar-inner').on('click', function() {
    $(this).css('right', -250);
    $(this).closest('.sidebar-outer').css('width', 0);
});

$('.clicker').on('click', function() {
    alert('CLICKED!');
});
```

```
body
{
    background-color: red;
    font: 12pt sans-serif;
}

.sidebar-outer
{
    position: absolute;
    top: 0px;
    right: 0px;
    bottom: 0px;
    width: 250px;

    -webkit-transition: width 0.2s ease-out;
    -moz-transition: width 0.2s ease-out;
    transition: width 0.2s ease-out;

    overflow: hidden;
    z-index: 999;
}

.sidebar-inner
{
    position: absolute;
    top: 0px;
    right: 0px;
    bottom: 0px;
    width: 250px;
    padding: 10px;
    box-sizing: border-box;

    -webkit-transition: right 0.2s ease-out;
    -moz-transition: right 0.2s ease-out;
    transition: right 0.2s ease-out;

    background-color: cornflowerblue;
    cursor: pointer;
}

.clicker
{
    position: absolute;
    width: 50px;
    height: 50px;
    top: 10px;
    right: 10px;
    padding: 10px;

    background-color: green;
    cursor: pointer;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
<div class="sidebar-outer">
    <div class="sidebar-inner">
        Click to hide
    </div>
</div>

<div class="clicker">Click me!!</div>
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-04-15T08:45:24.760

一个简单的解决方案（诚然并不总是可行）是设置`position:fixed`在侧边栏而不是`position:absolute`.

## [小提琴](http://jsfiddle.net/3dLTT/100/)

```
$('.sidebar').on('click', function() {
  $(this).css('right', -250);
});
```

```
.sidebar {
  position: fixed;
  top: 0px;
  right: 0px;
  bottom: 0px;
  width: 250px;
  -webkit-transition: right 0.2s ease-out;
  -moz-transition: right 0.2s ease-out;
  transition: right 0.2s ease-out;
  cursor: pointer;
  background-color: cornflowerblue;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="sidebar">
  Click to hide
</div>
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-02T08:46:18.633

把不可见的东西包裹起来是个坏主意，因为你应该知道为什么要把它移到屏幕外，这不仅仅是为了隐藏，如果只是为了隐藏，会有很多好方法去做。要移出屏幕，最大的好处是当您在 iframe 中处理大图片、视频或其他组件（如 News Feed）时。这将为它缓存渲染，做出显着有效的改进。

# google-chrome - Google Chrome 上的 JavaScript 和 Scriptable NPAPI 插件字符串数据

> ID：10940692
> 
> 赞同：0
> 
> 时间：2012-06-07T22:24:15.013
> 
> 标签：google-chrome, plugins, npapi

我创建了一个简单的可编写脚本的 npapi 插件。在 FireFox 上的 JavaScript 和插件之间传递字符串可以正常工作。但是如果字符串包含连字符 (-) 符号，它将在 Google chrome 上生成一些额外的随机字符。例如，在我的 JavaScript 代码中，我有

`plugin.method("a-b");`

在我的 npapi 代码上，我有

```
bool ScriptablePluginObject::Invoke(NPIdentifier name, const NPVariant *args, uint32_t argCount, NPVariant *result) {

  char* outString = args[0].value.stringValue.UTF8Characters;
  char* npOutString = (char *)NPN_MemAlloc(strlen(outString) + 1);
  strcpy(npOutString, outString);
  STRINGZ_TO_NPVARIANT(npOutString, *result);

  return true;
} 
```

在 Firefox 上，它返回“ab”，在 Chrome 上，我会看到带有一些额外随机符号的“ab*[-..”。我尝试将 npplugin.dll 放在 Mozilla 下的“插件”目录中或使用 Chrome 扩展教程（http://code.google.com/chrome/extensions/npapi.html），这两种方式都给了我同样奇怪的行为。代码用xulrunner-10.0.2.en-US.win32.sdk编译，使用xulrunner-1.9.0.17.en-US.win32.sdk也有同样的问题。

有没有人有任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T03:16:35.917

您的问题是您假设它是标准的以 NULL 结尾的 C 字符串。在实践中，NPAPI 字符串通常是 C 字符串并以 NULL 结尾，但不能保证会是这种情况。如果您查看[npapi-sdk 项目中的 npruntime.h 头文件，](http://code.google.com/p/npapi-sdk/source/browse/trunk/headers/npruntime.h#85)您会看到 NPString 有一个 UTF8Length 成员；这不仅仅是为了装饰。您应该始终使用它来确定 UTF8 字符串的长度（以字节为单位）。

重申一下 smorgan 在下面的评论中所说的话，这意味着您不能使用 strcpy、strlen 或任何其他 C 字符串函数来访问它；NPString 是一个字节+长度对，因此您需要使用字节+长度方法访问它。

例如：

```
bool ScriptablePluginObject::Invoke(NPIdentifier name, const NPVariant *args, uint32_t argCount, NPVariant *result) {

  char* outString = args[0].value.stringValue.UTF8Characters;
  int outLen = args[0].value.stringValue.UTF8Length;
  char* npOutString = (char *)NPN_MemAlloc(outLen + 1);
  memcpy(npOutString, outString, outLen);
  // Make this NULL terminated
  npOutString[outLen] = NULL;
  STRINGZ_TO_NPVARIANT(npOutString, *result);

  return true;
} 
```

请注意，您还应该检查以确保 NPVariant 实际上是一个字符串，否则这很容易在您的脸上爆炸。

# apache - mod_proxy，mod_ssl，带有 SSLProxyEngine 到内部 F5...内部 F5 向 apache 发送 TCP RESET

> ID：10940697
> 
> 赞同：0
> 
> 时间：2012-06-07T22:25:24.283
> 
> 标签：apache, mod-ssl

我们有以下网络架构：

面向公众的 F5 -> [HTTPS] -> 带有 mod_ssl 的 Apache HTTPD 服务器 -> [使用带有 mod_proxy + SSLProxyEngine 的反向代理 HTTPS 连接] -> 面向内部的 F5 -> 各种 WebLogic 服务器和 IIS 服务器

注意：中间的 Apache 关闭了 SSLEngine。它只是一个 SSL 客户端，它使用 SSLProxyEngine 使用 mod_proxy/mod_ssl 与面向内部的 F5 建立 HTTPS 连接。

我们通过两个不同的虚拟 IP 进行连接。

到 IIS 服务器的流量，没问题。到 Weblogic 服务器的流量，我们只收到一个虚拟 IP 的 502 错误。

我们运行 tcpdump 然后在 apache 服务器上重现了该问题。这和错误日志都显示内部 F5 发送了意外的 TCP 重置数据包。

有没有人经历过只有一个 VIP 发生的这种情况？我非常确信这一切都是基于 F5 的不良行为。你会同意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-10T07:20:06.663

由于唯一存在问题的部分是 f5 -> weblogic 服务器（VIP 之一）之间，请提供有关它的更多详细信息。包含 weblogic 服务器的 f5 池是否显示服务器处于健康状态？大多数通信是否正常工作，但在某个超时后只有某些失败？您可以直接访问 weblogic 服务器而没有任何问题吗？

# web-services - SOAP http 绑定示例

> ID：10940699
> 
> 赞同：0
> 
> 时间：2012-06-07T22:25:49.157
> 
> 标签：web-services, soap

我想了解soap http绑定。我的印象是，在使用 jax-ws 时，我总是在肥皂信封内向服务器发送任何请求并获得肥皂响应。

但是阅读soap1.2对GET和POST的http绑定的支持，我看到可以用http绑定描述wsdl中的webservice，服务请求和响应以简单的xml文档返回。

在stockpricequote下面的webService中，可以通过Soap 1.1、Soap 1.2、HTTP get和HTTP post访问webservice

[http://www.visualwebservice.com/wsdl/ws.cdyne.com/delayedstockquote.asmx%3Fwsdl](http://www.visualwebservice.com/wsdl/ws.cdyne.com/delayedstockquote.asmx%3Fwsdl)

有人可以向我指出一个带有 Soap http 绑定代码的 Web 服务示例，我可以在其中请求和接收没有 SOAP 标头的响应吗？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-06-08T00:29:25.773

你可以在这里找到一个例子：http: [//www.w3schools.com/webservices/default.asp](http://www.w3schools.com/webservices/default.asp)

# comments - 我可以在我的 facebook 应用页面中显示在我的网站上发布的评论，使用 fb 评论插件吗？

> ID：10940707
> 
> 赞同：1
> 
> 时间：2012-06-07T22:26:16.217
> 
> 标签：comments, facebook-comments

我在这里看到了这个问题：[如何将 Facebook 的评论框链接到特定的 Facebook 页面或应用程序](http://facebook.stackoverflow.com/questions/4504584/how-do-i-link-facebooks-comments-box-to-a-specific-facebook-page-or-application)

但那是从 2010 年开始，我认为这可能是一种新的方式来做到这一点。

基本上在 facebook 应用页面上显示我网站上的评论和喜欢（如果可能的话）

谢谢

劳拉

# javascript - 如何通过索引选择表格单元格？

> ID：10940714
> 
> 赞同：10
> 
> 时间：2012-06-07T22:26:48.863
> 
> 标签：javascript, html

我知道有一种访问顺序元素的方法，但我不确定如何通过索引访问它们。有没有办法做到这一点？

我正在寻找类似的东西：

```
document.getElementById('table1').cell[1] 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-07T22:29:17.307

要通过其行索引和该行中的单元格索引访问单元格，您可以使用：

```
var rowIndex = 0;
var cellIndex = 1;
document.getElementById('table1').rows[rowIndex].cells[cellIndex]; 
```

这将访问第一行（索引 0）中的第二个单元格（索引 1）

如果您只想使用单元格索引（而不是跟踪行）并让它遍历每行中的单元格，您可以这样做，但前提是每行具有相同数量的单元格。以下代码将访问表中的第四个单元格（索引 3），无论它位于第 0、1 还是 3 行；只要每行具有相同数量的单元格：

```
var cellIndex = 3;
var table = document.getElementById('table1');
var num_columns = table.rows[0].cells.length;
var cell = table.rows[Math.floor(cellIndex/num_columns)].cells[cellIndex % num_columns]; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T22:38:17.913

表的[`.rows`集合](http://msdn.microsoft.com/en-us/library/ie/ms537484%28v=vs.85%29.aspx)提供对行的访问。行的`.cells`集合提供对该行单元格的访问。两者都使用从零开始的索引并具有`.length`属性。所以：

```
var table = document.getElementById('table1');

alert(table.rows.length);                // number of rows
alert(table.rows[2].cells.length);       // number of cells in row 3

alert(table.rows[2].cells[5].innerHTML); // contents of 6th cell in 3rd row 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-07T22:30:47.023

要通过 id 将查询限制为元素的树，您可以使用`querySelector`：

```
document.getElementById('table1').querySelector('#cell1'); 
```

但是，当您可以简单地做时，这只是多余的

```
document.getElementById('cell1'); 
```

**编辑**：为了更好地响应 OP 的请求，可以通过这种方式顺序访问表格的单元格：

```
document.getElementById('table1').tBodies[i].rows[j].cells[k]; 
```

这将选择表的第-th 行的`k`-th 单元格。如果您的表格只有一个元素（像往常一样），或者您想从它们的 中独立访问单元格，则可以省略该部分。`j``i``<tbody>``<tbody>``.tBodies[i]`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-07T22:33:22.103

```
document.querySelector('table td'); //Done. IE8 and above supported.
                                    //Only the first one will be selected. 
```

```
document.querySelector('#table1 td'); //First cell in #table1

document.querySelector('#table1 td:nth-child(3)'); //Third cell in #table1
document.querySelectorAll('#table1 td')[2];        //or this 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-07T22:31:36.113

给`<td>`单元格一个 id：

```
<td id="mycell"> 
```

然后您可以使用以下方法访问 DOM 对象`getElementById()`：

```
document.getElementById('mycell'); 
```

# .net - 可以在 Unity3D 中使用 lua 代码

> ID：10940715
> 
> 赞同：5
> 
> 时间：2012-06-07T22:26:52.950
> 
> 标签：.net, lua, unity3d

我们需要在 Unity 应用程序中使用一些用 Lua 编写的特定库。
除了用 C#/JS 完全重写之外，还有什么可能的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T23:04:47.417

如果您的目标是网络播放器，则不会。Web 播放器构建在沙箱中运行，无法加载外部代码，因此除了用 C# 编写 Lua 解释器（！）可能是个例外，你不走运。

如果您的目标是桌面构建或移动设备，那么您可以包含[外部插件](http://unity3d.com/support/documentation/Manual/Plugins.html)并通过脚本调用它们。这意味着您可以导入 Lua 并告诉它运行您的 Lua 脚本。

然而，这可能仍然比它的价值更麻烦，因为您必须自己加载和初始化 Lua 运行时，因此您最好只重写代码。

请注意，对于桌面平台，需要 Pro 许可证。对于移动平台（iOS/Android），您可能需要跳过一些步骤才能真正将您的 Lua 脚本文件加载到 Lua 运行时中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-18T08:40:02.903

这是单声道[https://github.com/NLua](https://github.com/NLua)的 lua 解决方案， 您可以更改一些代码，让其在 unity3d 中工作。我这样做了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-22T22:38:48.020

Lua 框架可能与您相关：[https ://www.assetstore.unity3d.com/en/#!/content/30055](https://www.assetstore.unity3d.com/en/#!/content/30055)

从他们的网站：

> Lua 框架建立在 MoonSharp 的强大功能之上，MoonSharp 是 Lua 语言的现代且免费的 .NET 实现。与以前的 .NET 到 Lua 的桥梁（如 LuaInterface、NLua 或 UniLua）不同，MoonSharp 提供了非常直观的用户体验，具有快速的学习曲线、快速的性能、定期更新、支持最新的 Lua 5.2，并支持 Unity 的 .NET Mono 实现开箱即用的语言，适用于所有 Unity 版本和许可证，包括 iOS。

# extjs - FieldSet 中的 ExtJS 4 列布局

> ID：10940719
> 
> 赞同：1
> 
> 时间：2012-06-07T22:27:15.063
> 
> 标签：extjs, extjs4

我认为我的示例代码应该导致两个文本区域水平相邻，如下所示：

```
[textfield] [textfield] 
```

不是：

```
[textfield]
[textfield] 
```

[http://jsfiddle.net/aKCfh/](http://jsfiddle.net/aKCfh/)

我忘记了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T23:03:50.710

您没有包含 ExtJS 样式表

这是一个链接：

[http://extjs.cachefly.net/ext-4.1.0-gpl/resources/css/ext-all-gray.css](http://extjs.cachefly.net/ext-4.1.0-gpl/resources/css/ext-all-gray.css)

# android - 如何防止在 Android 片段/活动中意外退出应用程序？

> ID：10940725
> 
> 赞同：0
> 
> 时间：2012-06-07T22:27:52.193
> 
> 标签：android, android-fragments, android-activity, android-event, back-stack

如何防止在 Android 中意外退出应用程序？

IE：当他/她按下后退按钮并到达 BackStack 中的最后一个活动时，显示一个 toast 以询问用户是否要使用 onBackPressed() 方法退出。

此外，它需要与片段的 backStacks 一起使用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T22:27:52.770

通过覆盖主要活动的 onBackPressed() 方法可以轻松实现此功能。在此示例中，当用户按下后退按钮时，应用程序将显示 4 秒钟的 toast，在此时间新的后退按钮会立即终止应用程序。

[参考](http://www.androiduipatterns.com/2011/03/back-button-behavior.html)

您可以将它放在扩展 Activity 的 BaseActivity 中，如下所示：

```
public class BaseActivity extends Activity{

    private Toast toast;
    private long lastBackPressTime = 0;
    . . .

    /**
     * Prevent accidental app exit by requiring users to press back twice when
     * the app is exiting w/in 4sec
     */
    @Override
    public void onBackPressed() {
      if (this.lastBackPressTime < System.currentTimeMillis() - 4000) {
        toast = Toast.makeText(this, "Press back again to close this app", 4000);
        toast.show();
        this.lastBackPressTime = System.currentTimeMillis();
      } else {
        if (toast != null) {
        toast.cancel();
      }
      super.onBackPressed();
     }
    }
    . . . 
} 
```

**编辑：添加片段回溯兼容性**

为了用于检测应用程序仅使用片段的 bacstack 中的最后一个片段，我强烈建议将您的 dispatchKeyEvents 放在 BaseActivity 类中并像这样实现上述方法：

```
public class BaseActivity extends Activity {

    public boolean dispatchKeyEvent(KeyEvent event) {
        int backCount = getFragmentManager().getBackStackEntryCount();
        int action = event.getAction();
        int keyCode = event.getKeyCode();

        FragmentManager fm = getFragmentManager();

    . . .

        case KeyEvent.KEYCODE_BACK :
                if (action == KeyEvent.ACTION_DOWN && backCount == 0) {
                    onexitNotify();
                }else {
                    fm.popBackStack();
                }
                return true;

            default :
                return super.dispatchKeyEvent(event);
        }
    }

/**
 * Prevent accidental app exit by requiring users to press back twice when
 * the app is exiting w/in 8sec
 */
    private Toast toast;
    private long lastBackPressTime = 0;

    public void onexitNotify() {
        if (this.lastBackPressTime < System.currentTimeMillis() - 8000) {
            toast = Toast.makeText(this, "Press back again to close this app", 8000);
            toast.show();
            this.lastBackPressTime = System.currentTimeMillis();
        } else {
            if (toast != null) {
                toast.cancel();
            }
            super.onBackPressed();
        }
    }
} 
```

*如果您使用的是 2.0+，onBackPressed() 会简化所需的代码量，因此不需要 onKeyDown()。

根据 androd 模式推荐：

> 一些应用程序在即将退出时提示用户。这似乎在游戏应用中尤为常见。在正常应用中不推荐这种做法。确认提示会破坏用户的正常工作流程。即使在使用此选项的游戏中也应非常仔细地考虑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T23:39:00.407

您可以在应用程序的主要活动中检查何时按下后退键。然后，您可以向用户显示警报对话框以确认退出。

```
public boolean onKeyDown(int keyCode, KeyEvent event) {
    //Handle the back button
    if(keyCode == KeyEvent.KEYCODE_BACK) {          
        checkExit();             
        return true;
    }       
    else {
        return super.onKeyDown(keyCode, event);
    }

}

private void checkExit()
{
    AlertDialog.Builder builder = new AlertDialog.Builder(this);        
    builder.setMessage("Are you sure you want to exit?")
           .setCancelable(false)
           .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {

                   //take actions here accordingly as the user has pressed yes
               }
           })
           .setNegativeButton("No", new DialogInterface.OnClickListener() {
               public void onClick(DialogInterface dialog, int id) {
                    dialog.cancel();
               }
           });      
    AlertDialog alert = builder.create();
    alert.show();       
} 
```

# validation - 修改 flash.message 中的消息

> ID：10940728
> 
> 赞同：0
> 
> 时间：2012-06-07T22:27:54.703
> 
> 标签：validation, grails

我有一个方法可以进行一些验证，它会返回错误代码，具体取决于错误的类型。所以在控制器中，当我进行验证并返回所需的错误代码时，我想显示特定于该代码的错误消息。但是所有的消息总是“类似信息”，蓝色的闪光消息。如果我想要红色的、类似错误的 Flash 消息怎么办？我一直在研究文档一段时间，但无法弄清楚。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T23:49:24.790

您可以将任何您想要的内容放入`flash`范围，所以我倾向于将“类似信息”的消息放入`flash.message`并将“类似错误”的消息放入`flash.error`. 然后在我看来，我测试每个：

```
<g:if test="${flash.message}"><div class="message">${flash.message}</div></g:if>
<g:if test="${flash.error}"><div class="error">${flash.error}</div></g:if> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T22:52:47.573

当我想完成此任务时，我通常会执行以下操作：

```
flash.message = "you screwed up"
flash.error = true
redirect action: "foo" 
```

然后在普惠制

```
<g:if test="${flash.error && flash.message}">
   <div class="error">${flash.message}</div>
</g:if> 
```

# c# - 从 Windows 窗体应用程序发送电子邮件

> ID：10940732
> 
> 赞同：1
> 
> 时间：2012-06-07T22:28:13.027
> 
> 标签：c#, vb.net, winforms, smtpclient

我正在构建一个 Windows 窗体应用程序，它应该在远程/隔离机器上运行，并通过电子邮件向管理员发送错误通知。我已经尝试使用`System.Net.Mail`类来实现这一点，但我遇到了一个奇怪的问题：

**1.**我收到一条错误消息：

```
System.IO.IOException: Unable to read data from the transport connection: 
An existing connection was forcibly closed by the remote host.--->
System.Net.Sockets.SocketException: An existing connection was forcibly closed by 
the remote host at System.Net.Sockets.Socket.Receive(Byte[] buffer, Int32 offset, 
Int32 size, SocketFlags socketFlags) at System.Net.Sockets.NetworkStream.
Read(Byte[] buffer, Int32 offset, Int32 size) 
```

**2.**我尝试嗅探网络活动，看看出了什么问题。所以事情是这样的：

```
i) The DNS lookup for my SMTP server's hostname works
ii) My application connects to the SMTP server and sends "EHLO MY-HOSTNAME"
iii) SMTP server responds back with it's usual
iv) My application sends "AUTH login abcdxyz" and receives an acknowledgement packet 
```

此时，似乎 SMTP 服务器似乎没有请求密码，或者我的机器在 SMTP 服务器请求密码之前关闭了与 SMTP 服务器的连接。

我尝试过使用不同的 SMTP 端口和 SMTP 主机。此外，我尝试禁用我的防火墙和 AV，但没有运气。在使用 PuTTY 连接到我的 SMTP 服务器并发出与我的应用程序相同的命令序列（从数据包嗅探器中挑选）时，一切正常，我能够发送电子邮件。

这是我正在使用的代码：

```
Imports System.Net
Imports System.Net.Mail

Public Function SendMail() As Boolean

     Dim smtpClient As New SmtpClient("smtp.myserver.com", 587) 'I tried using different hosts and ports
     smtpClient.UseDefaultCredentials = False
     smtpClient.Credentials = New NetworkCredential("username@domain.com", "password")
     smtpClient.EnableSsl = True 'Also tried setting this to false

     Dim mm As New MailMessage
     mm.From = New MailAddress("username@domain.com")
     mm.Subject = "Test Mail"
     mm.IsBodyHtml = True
     mm.Body = "<h1>This is a test email</h1>"
     mm.To.Add("someone@domain.com")

     Try
          smtpClient.Send(mm)
          MsgBox("SUCCESS!")
     Catch ex As Exception
          MsgBox(ex.InnerException.ToString)
     End Try

     mm.Dispose()
     smtpClient.Dispose()

     Return True

End Function 
```

有什么建议吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-11T09:08:08.893

在 C# 中，它的工作方式如下：

```
public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();
    }

    private void btnTest_Click(object sender, RoutedEventArgs e)
    {
        MailAddress from = new MailAddress("Someone@domain.topleveldomain", "Name and stuff");
        MailAddress to = new MailAddress("Someone@domain.topleveldomain", "Name and stuff");
        List<MailAddress> cc = new List<MailAddress>();
        cc.Add(new MailAddress("Someone@domain.topleveldomain", "Name and stuff"));
        SendEmail("Want to test this damn thing", from, to, cc);
    }

    protected void SendEmail(string _subject, MailAddress _from, MailAddress _to, List<MailAddress> _cc, List<MailAddress> _bcc = null)
    {
        string Text = "";
        SmtpClient mailClient = new SmtpClient("Mailhost");
        MailMessage msgMail;
        Text = "Stuff";
        msgMail = new MailMessage();
        msgMail.From = _from;
        msgMail.To.Add(_to);
        foreach (MailAddress addr in _cc)
        {
            msgMail.CC.Add(addr);
        }
        if (_bcc != null)
        {
            foreach (MailAddress addr in _bcc)
            {
                msgMail.Bcc.Add(addr);
            }
        }
        msgMail.Subject = _subject;
        msgMail.Body = Text;
        msgMail.IsBodyHtml = true;
        mailClient.Send(msgMail);
        msgMail.Dispose();
    }
} 
```

不要忘记`using System.Net.Mail;`

我认为在 VB 中它是这样工作的，这是代码，它可能有一些错误，我不经常在 vb.net 中编写：

```
Private Sub btnTest_Click(ByVal sender As System.Object, ByVal e As System.Windows.RoutedEventArgs)
    Dim _from As New MailAddress("Someone@domain.topleveldomain", "Name and stuff")
    Dim _to As New MailAddress("Someone@domain.topleveldomain", "Name and stuff")
    Dim cc As New List(Of MailAddress)
    cc.Add(New MailAddress("Someone@domain.topleveldomain", "Name and stuff"))
    SendEmail("Wan't to test this thing", _from, _to, cc)
End Sub

Protected Sub SendEmail(ByVal _subject As String, ByVal _from As MailAddress, ByVal _to As MailAddress, ByVal _cc As List(Of MailAddress), Optional ByVal _bcc As List(Of MailAddress) = Nothing)

    Dim Text As String = ""
    Dim mailClient As New SmtpClient("Mailhost")
    Dim msgMail As MailMessage
    Text = "Stuff"
    msgMail = New MailMessage()
    msgMail.From = _from
    msgMail.To.Add(_to)
    For Each addr As MailAddress In _cc
        msgMail.CC.Add(addr)
    Next
    If _bcc IsNot Nothing Then
        For Each addr As MailAddress In _bcc
            msgMail.Bcc.Add(addr)
        Next
    End If
    msgMail.Subject = _subject
    msgMail.Body = Text
    msgMail.IsBodyHtml = True
    mailClient.Send(msgMail)
    msgMail.Dispose()
End Sub 
```

不要忘记导入`System.Net.Mail`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-06-05T11:33:54.357

```
SendMail.CS Page

using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Net;
using System.Net.Mail;

namespace SendMailUsingWindowsForms
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            try
            {

                //Sending the email.
                //Now we must create a new Smtp client to send our email.

                SmtpClient client = new SmtpClient("smtp.gmail.com", 25);   //smtp.gmail.com // For Gmail
                                                                            //smtp.live.com // Windows live / Hotmail
                                                                            //smtp.mail.yahoo.com // Yahoo
                                                                            //smtp.aim.com // AIM
                                                                            //my.inbox.com // Inbox

                //Authentication.
                //This is where the valid email account comes into play. You must have a valid email account(with password) to give our program a place to send the mail from.

                NetworkCredential cred = new NetworkCredential("*******@gmail.com", "........");

                //To send an email we must first create a new mailMessage(an email) to send.
                MailMessage Msg = new MailMessage();

                // Sender e-mail address.
                Msg.From = new MailAddress(textBox1.Text);//Nothing But Above Credentials or your credentials (*******@gmail.com)

                // Recipient e-mail address.
                Msg.To.Add(textBox2.Text);

                // Assign the subject of our message.
                Msg.Subject = textBox3.Text;

                // Create the content(body) of our message.
                Msg.Body = textBox4.Text;

                // Send our account login details to the client.
                client.Credentials = cred;

                //Enabling SSL(Secure Sockets Layer, encyription) is reqiured by most email providers to send mail
                client.EnableSsl = true;

                //Confirmation After Click the Button
                label5.Text = "Mail Sended Succesfully";

                // Send our email.
                client.Send(Msg);

            }
            catch
            {
                // If Mail Doesnt Send Error Mesage Will Be Displayed
                label5.Text = "Error";
            }
        }

    }
} 
```

发送邮件设计 ![在此处输入图像描述](../Images/447e7fc9113a86f8361bbf346c4dc22a.png)

![在此处输入图像描述](../Images/d1d2950f93e22084b5eb4612edd9fe3b.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T22:41:55.000

尝试使用这个：

```
 public SmtpClient client = new SmtpClient();
    public MailMessage msg = new MailMessage();
    public System.Net.NetworkCredential smtpCreds = new System.Net.NetworkCredential("mail", "password");

    public void Send(string sendTo, string sendFrom, string subject, string body)
    {
        try
        {
            //setup SMTP Host Here
            client.Host = "smtp.gmail.com";
            client.Port = 587;
            client.UseDefaultCredentials = false;
            client.Credentials = smtpCreds;
            client.EnableSsl = true;

            //converte string to MailAdress

            MailAddress to = new MailAddress(sendTo);
            MailAddress from = new MailAddress(sendFrom);

            //set up message settings

            msg.Subject = subject;
            msg.Body = body;
            msg.From = from;
            msg.To.Add(to);

            // Enviar E-mail

            client.Send(msg);

        }
        catch (Exception error)
        {
            MessageBox.Show("Unexpected Error: " + error);
        }
    } 
```

不要忘记致电：

```
using System.Net.Mail;
using System.Windows.Forms; 
```

# putty - 腻子与 WinSCP

> ID：10940733
> 
> 赞同：23
> 
> 时间：2012-06-07T22:28:20.663
> 
> 标签：putty, winscp

我是 Putty 和 WinSCP 的新手。那么有人可以告诉我这两者之间有什么区别吗？我应该什么时候使用每个。

谢谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-07T22:31:11.003

WinSCP 用于与服务器之间的文件传输，而 PuTTY 用于直接与服务器交互。Putty 只是服务器的命令行界面。WinSCP 是一个使用安全 FTP 的文件传输应用程序。

# ruby - rbenv 不改变 ruby 版本

> ID：10940736
> 
> 赞同：337
> 
> 时间：2012-06-07T22:28:47.263
> 
> 标签：ruby, rbenv

我根据 github 的说明安装了 rbenv。我正在运行 OSX，但我已经在 Ubuntu 12.04 VM 上尝试过这个并得到了相同的结果。以下是我尝试更改 ruby​​ 版本时在终端中得到的内容：

```
rbenv versions
* 1.9.3-p0 (set by /Users/user/.rbenv/version)
1.9.3-p125

rbenv global
1.9.3-p0

rbenv rehash

ruby -v
ruby 1.8.7 (2011-12-28 patchlevel 357) [universal-darwin11.0]

which ruby
/usr/bin/ruby 
```

任何人都知道为什么 rbenv 没有像它认为的那样切换 ruby​​ 版本？本地目录中也没有 .rbenv 文件会导致 ruby​​ 版本默认为 1.8.7

```
rbenv local
rbenv: no local version configured for this directory 
```

* * *

## 回答 #1

> 赞同：660
> 
> 时间：2012-08-27T22:40:21.840

检查 PATH 是否包含`$HOME/.rbenv/shims`和`$HOME/.rbenv/bin`

```
$ env | grep PATH 
```

如果使用 bash，请检查 ~/.bash_profile 中是否包含以下内容；如果使用 zsh，请检查 ~/.zshenv

```
export PATH="$HOME/.rbenv/bin:$PATH"
eval "$(rbenv init -)" 
```

注意：确保它是 ~/.bash_profile 中的最后一个设置。我遇到了一个问题，我安装了一个更新我的 .bash_profile 并重置 PATH 的程序。

最后，确保您的`$HOME`文件夹中没有`.ruby-version`您可能在文件夹中创建的`$ rbenv local <ruby-version>`文件`$HOME`。这样做`$ rbenv global <ruby-version>`会修改`$HOME/.rbenv/version`文件，并且`.ruby-version`文件夹中存在的`$HOME`文件将覆盖由`$HOME/.rbenv/version`.

从文档：

> 选择 Ruby 版本 当你执行一个 shim 时，rbenv 通过从以下源中读取它来确定使用哪个 Ruby 版本，顺序如下：

> RBENV_VERSION 环境变量（如果指定）。您可以使用 rbenv shell 命令在当前 shell 会话中设置此环境变量。

> 通过搜索您正在执行的脚本的目录及其每个父目录找到的第一个 .ruby-version 文件，直到到达文件系统的根目录。

> 通过搜索当前工作目录及其每个父目录直到到达文件系统的根目录，找到第一个 .ruby-version 文件。您可以使用 rbenv local 命令修改当前工作目录中的 .ruby-version 文件。

> 全局 ~/.rbenv/version 文件。您可以使用 rbenv 全局命令修改此文件。如果全局版本文件不存在，rbenv 假定您想使用“系统”Ruby——即，如果 rbenv 不在您的路径中，将运行任何版本。

* * *

## 回答 #2

> 赞同：135
> 
> 时间：2013-04-25T13:57:36.317

我通过将以下内容添加到我的来解决此问题`~/.bash_profile`：

```
#PATH for rbenv
export PATH="$HOME/.rbenv/shims:$PATH" 
```

这是[https://github.com/sstephenson/rbenv](https://github.com/sstephenson/rbenv)中记录的内容。

据我所知，**没有** `~/.rbenv/bin`目录，@rodowi 在帖子中提到过。

* * *

## 回答 #3

> 赞同：93
> 
> 时间：2013-07-15T23:41:26.460

这可能是一个老问题，但谷歌把我带到了这里，为了后代，我想我会分享。

在上述许多推荐的解决方案之后，我的问题仍然存在。像 OP 一样，我安装了 rbenv，然后安装了 ruby​​ 版本，但我的笔记本电脑默认为 system。我忽略的是，当我跑步时：

```
[~/.rbenv] $ rbenv versions
* system (set by /Users/alphadogg/.rbenv/version)
  2.0.0-p247 
```

IOW，它仍然默认为系统。一个快速

```
[~/.rbenv] $ rbenv local 2.0.0-p247 
```

将其切换到新版本。

* * *

## 回答 #4

> 赞同：64
> 
> 时间：2016-08-31T00:29:47.123

第一步是找出哪个 ruby​​ 被调用：

```
$ which ruby 
```

你的系统说：

```
/usr/bin/ruby 
```

这不是 rbenv 使用的 shim，它（在 MacOS 上）应该如下所示：

```
/Users/<username>/.rbenv/shims/ruby 
```

垫片实际上是一个脚本，其作用类似于重定向到您设置的 ruby​​ 版本。

我建议您取消设置项目特定的“本地”版本和 shell 特定的“shell”版本，并使用在 ~/.rbenv/version 中的纯文本文件中确定的“全局”版本设置进行测试在您的情况下将只是版本号“1.9.3”。

```
$ rbenv global 1.9.3
$ rbenv local --unset
$ rbenv shell --unset 
```

您可以`ls -laG`在项目文件夹（而不是主文件夹）的根目录中进行操作，以确保那里不再有“.ruby-version”文件。

您可以使用`rbenv versions`来确定设置为使用哪个版本的 rbenv（以及设置该版本的文件的位置和名称）：

```
$ rbenv versions 
```

在您正确设置路径之前，这些都不重要。

使用它来确保您的 *MacOS 会服从您：

```
$ rbenv init - 
```

其次是：

```
$ which ruby 
```

为了确保它看起来像：

```
/Users/<username>/.rbenv/shims/ruby 
```

然后运行它以将该行添加到您的配置文件中，以便每次打开新的终端窗口时都会运行它：

```
$ echo 'eval "$(rbenv init -)"' >> ~/.bash_profile 
```

还有其他方法可以修改路径，请随意替换其中任何一种，而不是运行 rbenv init。

注意：重新安装 Rails：

```
$ gem install rails 
```

如果您尝试运行 Ruby on Rails，那么您需要先让这一切正常运行，然后再次安装 rails gem。之前的 Rails 安装会使用硬编码路径指向错误的 ruby​​，并且其他一些东西会在错误的位置，所以只需重新安装 gem。

PS 如果您的 MacOS 不服从您（* 上面提到的），那么您可能必须找到另一种方法来修改您的路径，但这不太可能成为问题，因为“Mac 可以正常工作”；）

* * *

## 回答 #5

> 赞同：28
> 
> 时间：2012-08-18T18:47:39.730

我刚刚发现了同样的问题。我所做的是卸载 rbenv（通过自制软件）并重新安装它。我还添加了

```
if which rbenv > /dev/null; then eval "$(rbenv init -)"; fi 
```

当我重新安装 rbenv 时进入 ~/.bash_profile。现在完美运行。

* * *

## 回答 #6

> 赞同：27
> 
> 时间：2017-02-02T12:55:12.400

在我的情况下，改变`~/.zshenv`没有奏效。我不得不在里面做出改变`~/.zshrc`。

我刚刚补充说：

```
# Include rbenv for ZSH
export PATH="$HOME/.rbenv/bin:$PATH"
eval "$(rbenv init -)" 
```

在顶部`~/.zshrc`，重新启动 shell 并注销。

检查它是否有效：

```
➜  ~ rbenv install 2.4.0
➜  ~ rbenv global 2.4.0
➜  ~ rbenv global
2.4.0
➜  ~ ruby -v
ruby 2.4.0p0 (2016-12-24 revision 57164) [x86_64-darwin16] 
```

* * *

## 回答 #7

> 赞同：17
> 
> 时间：2016-08-31T06:26:51.080

运行此命令

将 rbenv 添加到 bash 以便在每次打开终端时加载

```
echo 'if which rbenv > /dev/null; then eval "$(rbenv init -)"; fi' >> ~/.bash_profile
source ~/.bash_profile 
```

这将解决您的问题[参考](https://gorails.com/setup/osx/10.10-yosemite)

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2021-06-24T22:38:57.130

我在**MacBook Pro Catalina OS**和**MacBook Pro Big Sur**上使用**rbenv**设置**Ruby**时遇到了这个问题。

 ********这是我修复的方法**：

首先运行以下命令来初始化 rbenv：

```
rbenv init 
```

这会给你一些关于做什么的指导。基本上，您必须打开`~/.zshrc`文件并将其添加到文件`eval "$(rbenv init -)"`中。您可以通过运行以下命令来完成此操作：

```
echo 'eval "$(rbenv init -)"' >> ~/.zshrc 
```

接下来，运行以下命令来设置您的 ruby​​ 版本：

```
rbenv local your-desired-ruby-version 
```

就我而言，我想要的 ruby​​ 版本是 3.0.1，所以它是：

```
rbenv local 3.0.1 
```

完成后，使用**Command + Q**退出终端，然后打开一个新终端，这次是运行命令：

```
ruby -v 
rbenv versions 
```

你会看到你想要的 ruby​​ 版本已经为你设置好了。

就这样。

**我希望这有帮助**

* * *

## 回答 #9

> 赞同：8
> 
> 时间：2019-02-16T18:38:39.053

如果您使用的是**bash**，请转到

```
~/.bash_profile 
```

并添加以下行（如果它不存在）

```
if which rbenv > /dev/null; then eval "$(rbenv init -)"; fi 
```

如果您使用的是 Zsh，请转到

```
~/.zshrc 
```

并在 .zshrc 文件的末尾添加相同的代码行。

然后只需重新启动您的终端，现在应该没问题了。

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2014-01-26T13:41:53.853

`rbenv help shell`

“通过在 shell 中设置 'RBENV_VERSION' 环境变量来设置特定于 shell 的 Ruby 版本。此版本覆盖本地应用程序特定版本和全局版本。应该是与 rbenv 已知的 Ruby 版本匹配的字符串。特殊版本字符串 'system ' 将使用您的默认系统 Ruby。运行 rbenv 版本' 以获取可用 Ruby 版本的列表。”

如果 rbenv 安装正确， ruby​​ -v 将对应

`rbenv shell 1.9.3-p125`

* * *

## 回答 #11

> 赞同：5
> 
> 时间：2017-08-29T23:52:12.360

跑：

```
rbenv init 
```

在我运行之后，当我设置我的本地 rbenv 版本时：

```
rbenv local 2.4.0 
```

然后我`ruby -v`和我的`rbenv local`版本重合了。

注意：您可能还想退出您所在的目录，然后再回到它，我注意到这对我来说是必要的，以便让事情正常工作。

* * *

## 回答 #12

> 赞同：5
> 
> 时间：2017-01-21T00:27:43.467

鱼壳用户

```
set --universal fish_user_paths $fish_user_paths ~/.rbenv/shims/ 
```

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2017-01-15T12:22:07.463

我有同样的问题，但由 Homebrew 引起：

```
[~]$ rbenv version
2.3.0 (set by /Users/user/.rbenv/version)
[~]$ ruby -v
ruby 2.3.3p222 (2016-11-21 revision 56859) [x86_64-darwin16]
[~]$ which ruby
/usr/local/bin/ruby 
```

不知何故，我也通过 Homebrew 安装了 Ruby，并且 Homebrew 路径在我的`$PATH`. 跑步`brew uninstall ruby`为我修好了。

* * *

## 回答 #14

> 赞同：4
> 
> 时间：2016-01-07T15:03:41.963

至于我最简单的使用方法`rbenv`是`zsh`添加`rbenv`到`.zshrc`配置中的插件部分。就我而言，它看起来类似于：

```
# Which plugins would you like to load? (plugins can be found in ~/.oh-my-zsh/plugins/*)
# Custom plugins may be added to ~/.oh-my-zsh/custom/plugins/
# Example format: plugins=(rails git textmate ruby lighthouse)
# Add wisely, as too many plugins slow down shell startup.
plugins=(git bower rails ruby rbenv gulp npm node nvm sublime) 
```

之后安装、切换、使用 ruby​​ 版本在`rbenv`.

请注意在进行更改后重新启动您的终端会话。

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2012-11-02T11:46:59.650

当我出现这些症状时，问题是我试图切换到的新 Ruby 版本的安装在中途失败，而我没有注意到。解决方法是删除并重新安装它。

（这意味着即使 ruby​​ 1.9.3 出现在可用版本的 rbenv 列表中，它在 rbenv 假设它的路径上没有可执行文件。由于 rbenv 试图通过添加一个位置来更改您的 ruby​​ 版本您的路径，如果它前面的位置实际上没有任何内容，您的操作系统将很乐意继续搜索您的默认路径并找到您的系统版本，在我的情况下就像问题的 1.8.7。）

* * *

## 回答 #16

> 赞同：3
> 
> 时间：2012-07-29T11:17:05.567

我遇到了同样的问题。通过使用 运行`rbenv global`命令来解决此问题`sudo`。我认为这是许可问题。

更新：我终于找到了解决方案。我的 Mac 上有一个相同的文件“版本”，位于`/usr/local/Cellar/rbenv/0.3.0/`. 我认为它偶尔是错误创建的。你应该删除它。

* * *

## 回答 #17

> 赞同：3
> 
> 时间：2017-04-30T05:37:20.050

确保你的最后一行`.bash_profile`是：

```
export PATH="$HOME/.rbenv/bin:$PATH"
eval "$(rbenv init -)" 
```

* * *

## 回答 #18

> 赞同：3
> 
> 时间：2020-03-26T02:40:53.150

接受的答案建议添加以下内容：

```
export PATH="$HOME/.rbenv/bin:$PATH" 
```

这在 OP 引用的 Mac OSX 上不起作用。事实上，如果你通过 安装 rbenv `brew install rbenv`，这在 Mac OSX 中确实是唯一的安装方法，因为`curl -fsSL https://github.com/rbenv/rbenv-installer/raw/master/bin/rbenv-installer | bash`在 OSX 中会失败，那么 rbenv 可执行文件将安装在：

```
$ which rbenv
/usr/local/bin/rbenv 
```

然而，即使在 OSX 中，rbenv 根目录仍将保留在 $HOME 目录中：

```
~ viggy$ rbenv root
/Users/viggy/.rbenv 
```

这是什么意思？这意味着当您安装 rubies 时，它们将安装在 .rbenv 下的给定主目录中：

```
$ rbenv install 2.6.0
$ ls ~/.rbenv/versions
2.6.0 
```

现在，brew 安装完成了一些您必须在 Linux 中手动执行的工作。例如，在 Linux 中，您必须手动安装 ruby​​-build 作为插件：

```
$ mkdir -p "$(rvbenv root)/plugins"
$ git clone https://github.com/rbenv/ruby-build.git "(rbenv root)"/plugins/ruby-build 
```

这已经通过自制软件安装完成。在自制软件安装中必须完成一个重要步骤，就像在 Linux 安装中一样。您必须将 rbenv 垫片添加到您的路径中。为了做到这一点，当你的 shell 启动时，你必须评估以下命令（这反过来会将 rbenv 垫片添加到 $PATH 的开头）：

```
$ vim ~/.bash_profile
eval "$(rbenv init -)"
$ source ~/.bash_profile 
```

现在，当您运行时`echo $PATH`，您将看到 rbenv 垫片：

```
$ echo $PATH
/Users/viggy/.rbenv/shims: 
```

现在检查您的 ruby​​ 版本，它将反映已安装的 rbenv ruby​​：

```
ruby -v
ruby 2.6.0p0 
```

* * *

## 回答 #19

> 赞同：2
> 
> 时间：2013-12-14T01:19:32.373

这发生在我重新安装后`rbenv`。显然我的`.ruby-version`主目录中有一个文件，指定了一个不再存在的版本。删除文件后，一切正常。

* * *

## 回答 #20

> 赞同：1
> 
> 时间：2020-12-26T21:46:15.143

有很多误导性的答案有效。我认为值得一提的是[`rbenv`README](https://github.com/rbenv/rbenv#homebrew-on-macos)中的步骤。

1.  `$ brew install rbenv`
2.  `$ rbenv init` **并按照**它给您的说明进行操作。这就是我得到的：

```
~ $ rbenv init
# Load rbenv automatically by appending
# the following to ~/.bash_profile:

eval "$(rbenv init -)" 
```

我更新了我的`~/.bash_profile`...

3.  关闭终端并再次打开它
4.  通过运行验证它是否正常工作：

```
$ curl -fsSL https://github.com/rbenv/rbenv-installer/raw/master/bin/rbenv-doctor | bash 
```

5.  现在只需安装您想要的版本：`rbenv install <version>`

* * *

## 回答 #21

> 赞同：1
> 
> 时间：2020-12-31T10:12:02.137

Linux / Ubuntu 用户第 1 步：

```
$ rbenv versions
  system
  2.6.0
* 2.7.0 (set by /home/User/Documents/sample-app/.ruby-version) #Yours will be different
  2.7.2 
```

第2步：

```
$ nano /home/User/Documents/sample-app/.ruby-version 
```

第 3 步：

```
$ ruby -v
ruby 2.7.2p137 (2020-10-01 revision 5445e04352) [x86_64-linux] 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2014-03-03T06:37:46.960

我在安装 rbenv 之前忘记删除 rvm。我删除了 rvm 并重新安装了 rbenv，但系统仍然没有使用 rbenv 指定为全局的 Ruby 版本。我尝试关闭终端，但只有在我重新启动整台机器后才有效。

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2012-11-21T07:03:22.630

您可以尝试使用[chruby](https://github.com/postmodern/chruby#readme)吗？chruby 不依赖 shims，而是只修改`PATH`, `GEM_HOME`, `GEM_PATH`.

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2012-06-21T20:35:24.173

奇怪`rbenv`的是，版本没有设置`.rbenv`文件。

检查：`ls -ltra`--> 以查看 a`rbenv`是否已写入。

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2020-11-06T19:42:27.060

这里的所有其他答案都为各种情况提供了很好的建议，但有一种更简单的方法。

rbenv 文档将我们指向 rbenv-doctor 诊断工具，该工具将快速验证您系统上所有这些潜在的缺陷：

```
curl -fsSL https://github.com/rbenv/rbenv-installer/raw/master/bin/rbenv-doctor | bash 
```

当一切顺利时，你会看到：

```
$ curl -fsSL https://github.com/rbenv/rbenv-installer/raw/master/bin/rbenv-doctor | bash                                     <aws:hd-pmp-developer>
Checking for `rbenv' in PATH: /usr/local/bin/rbenv
Checking for rbenv shims in PATH: OK
Checking `rbenv install' support: /usr/local/bin/rbenv-install (ruby-build 20201005)
Counting installed Ruby versions: 1 versions
Checking RubyGems settings: OK
Auditing installed plugins: OK 
```

现在，如果我们打破其中一个期望（例如删除 rbenv-install），该工具将直接指出问题所在，并提供如何修复它的链接：

```
$ mv /usr/local/bin/rbenv-install rbenv-install-GONE

$ curl -fsSL https://github.com/rbenv/rbenv-installer/raw/master/bin/rbenv-doctor | bash                                     
Checking for `rbenv' in PATH: /usr/local/bin/rbenv
Checking for rbenv shims in PATH: OK

===> Checking `rbenv install' support: not found <===
  Unless you plan to add Ruby versions manually, you should install ruby-build.
  Please refer to https://github.com/rbenv/ruby-build#installation

Counting installed Ruby versions: 1 versions
Checking RubyGems settings: OK
Auditing installed plugins: OK 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2021-03-29T18:05:51.460

将 eval "$(rbenv init -)" 添加到我的 mac 上的 .bash_profile 解决了这个问题。rbenv local ruby​​ -v 给了集合

* * *

## 回答 #27

> 赞同：-2
> 
> 时间：2021-12-16T13:44:50.157

我建议不要使用 rbenv 有几个问题。

1.  安装 ruby​​ 后，它不附带捆绑版本
2.  大多数时候在运行 bundle install 时会创建 bundler 版本拾取问题

为了减少这么多的努力，我建议使用 rvm，让生活更轻松。按照此链接安装 rvm [https://nrogap.medium.com/install-rvm-in-macos-step-by-step-d3b3c236953b](https://nrogap.medium.com/install-rvm-in-macos-step-by-step-d3b3c236953b)******

# jakarta-ee - 基于表单的身份验证，但在 Java EE 6 中使用自定义身份验证方法

> ID：10940738
> 
> 赞同：4
> 
> 时间：2012-06-07T22:29:13.477
> 
> 标签：jakarta-ee, servlets, java-ee-6, web.xml, jaas

**简短版：**在纯 Java EE 6 中，是否有类似[Spring 的 Authentication Processing Filter 之](http://static.springsource.org/spring-security/site/docs/2.0.x/reference/form.html)类的东西，它可以自定义基于表单的身份验证？

**长版：**我正在开发一个纯 Java EE 6 Web 应用程序（JSF2、CDI），它**必须**独立于稍后使用的具体 Java EE 6 容器。

访问受限的 JSF2 页面存储在子文件夹*/pages*中。在我的 web.xml 中，我定义了以下内容来限制对这些页面的访问：

```
<login-config>
    <auth-method>FORM</auth-method>
    <realm-name>??????????</realm-name>
    <form-login-config>
        <form-login-page>/login.jsf</form-login-page>
        <form-error-page>/access_denied.jsf</form-error-page>
    </form-login-config>
</login-config>

<security-constraint>
    <display-name>pages_auth</display-name>
    <web-resource-collection>
        <web-resource-name>pages</web-resource-name>
        <url-pattern>/pages/*</url-pattern>
    </web-resource-collection>
    <auth-constraint>
        <role-name>AuthenticatedUser</role-name>
    </auth-constraint>
</security-constraint>

<security-role>
    <role-name>AuthenticatedUser</role-name>
</security-role> 
```

如“？？？”所示 在上面的代码中，我不能使用像 JDBC 这样的预定义领域之一，因为要使用的认证是非常自定义的（讨厌的细节：凭据是根据丑陋的遗留系统检查的）并且需要一些 Java 编码。

我希望我可以创建一个新的类来实现*一些*接口，覆盖*一些*身份验证方法，参数“login”和“password”返回一个布尔值来表示成功的身份验证。

然而，在阅读了几个小时的主题之后，我完全迷失了:-(我需要实现一个 JAAS LoginModule 和 Realm 吗？这对我来说看起来很复杂。或者还有另一种标准的 Java EE 6 方法吗？或者我需要采用实现 ServletFilter 的方式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T14:56:35.970

在领域名称标签中，您需要将您在容器中创建的领域名称放入其中。这不是领域类型，它只是您选择的领域名称。

我有一个使用 JBoss AS 的应用程序，并以我的配置为例：

web.xml

```
<realm-name>weblog-jaas-realm</realm-name> 
```

独立的.xml

```
<security-domain name="weblog-jaas-realm">
    <authentication>
        <login-module code="Database" flag="required">
            [...]
        </login-module>
    </authentication>
</security-domain> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-22T06:34:22.263

我最终使用了[Spring Security](http://static.springsource.org/spring-security/site/reference.html)。似乎使用 Java EE 6 库，实现自定义身份验证提供程序并不容易。当然，您可以使用 servlet 过滤器从头开始实现所有内容，但在我看来这太容易出错了。Spring Security 似乎是一个很好的解决方案，尽管它为我的 web 应用程序添加了许多库，我希望我可以不用这些库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-18T13:01:26.257

与其考虑编写自己的自定义领域，当然也不必考虑使用 servlet 过滤器，不如使用适当的 JAAS`LoginModule`实现相当容易地实现这一点。我们已经在许多不同的 Java EE 容器（包括 Tomcat、WebLogic 和 WebSphere）上非常成功地做到了这一点。

虽然 JAAS 清楚地定义了 API，使您的`LoginModule`实现可移植，但您会发现在每个容器中配置 JAAS 的方式是不同的，您可能不得不设置适当的主体名称和角色主体实现映射以使其工作。

# excel - 使用 VBA 将某些数据向右移动

> ID：10940743
> 
> 赞同：0
> 
> 时间：2012-06-07T22:29:37.520
> 
> 标签：excel, list, vba, move

在列表中，我想将非“P”项目移到同一张纸上的右侧。然后我需要将“P”项向下复制以匹配右侧的项数。请参阅示例以进行说明。

[右键单击链接并保存示例文件](http://goobee.info/stuff/example.xlsx)

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T00:57:55.380

```
Sub MoveP()
' Move non P rows to right,
' starting with the row of the P above it,
' and add P info on each row

' If you want to backup before starting uncomment next two rows of code
'    Sheets("Raw Data").Select
'    Sheets("Raw Data").Copy Before:=Sheets(1)

Dim maxRows as Integer
Dim emptyRowsToStopAt
Dim emptyRows
Dim cell1Text As String
Dim currentRightRow As Integer
Dim currentPRow As Integer

maxRows = 150 ' change this if you want to process more (or less)
emptyRowsToStopAt = 5
currentRightRow = 0
currentPRow = 0

For i = 2 To maxRows

    If emptyRows > emptyRowsToStopAt Then 
       Exit For
    End If

    cell1Text = Cells(i, 1)
    Dim startsWithP As Boolean
    startsWithP = InStr(1, cell1Text, "P")

    If startsWithP Then
        currentPRow = i
        currentRightRow = currentPRow ' we start with the same line

        emptyRows = 0

    ElseIf IsEmpty(Cells(i, 1)) Or Cells(i, 1) = "" Then
    '    ' its an empty cell
        emptyRows = emptyRows + 1

    Else ' its a non P entry
        emptyRows = 0
        'copy info from left to correct line on right
        Range(Cells(i, 1), Cells(i, 11)).Select
        Selection.Cut
        Range(Cells(currentRightRow, 13), Cells(currentRightRow, 13)).Select
        ActiveSheet.Paste

        ' duplicate PRow to left (when non-p was not copied to PRow)
        ' -- see note below: only 3 cells duplicated
        If currentPRow <> currentRightRow Then ' not on the original P Row
            ' copy p heading
            Range(Cells(currentPRow, 1), Cells(currentPRow, 3)).Select 
            ' only first 3 cells copied
            ' change '3' to '11' if you want all
            Selection.Copy

            ' past p heading on current row
            Range(Cells(i, 1), Cells(i, 1)).Select
            ActiveSheet.Paste
        End If ' non p row copied to originally non p row

        ' and mark current row as written
        currentRightRow = currentRightRow + 1
    End If
Next

Call CleanupPtable

End Sub

Sub CleanupPtable()
'
' Clean up the P table Macro
' Adapted from macro recorded 08/06/2012 by pashute
'
    Range(Cells(1, 1), Cells(1, 11)).Select
    Selection.Copy
    Range("M1").Select
    ActiveSheet.Paste

    ' yellow column
    Columns("L:L").Select
    Selection.Interior.ColorIndex = 36

    ' yellow column lines
    Columns("L:L").Select
    ' Selection.Borders(xlDiagonalDown).LineStyle = xlNone
    ' Selection.Borders(xlDiagonalUp).LineStyle = xlNone
    With Selection.Borders(xlEdgeLeft)
        .LineStyle = xlContinuous
        .Weight = xlThin
        .ColorIndex = xlAutomatic
    End With
    With Selection.Borders(xlEdgeTop)
        .LineStyle = xlContinuous
        .Weight = xlThin
        .ColorIndex = xlAutomatic
    End With
    With Selection.Borders(xlEdgeBottom)
        .LineStyle = xlContinuous
        .Weight = xlThin
        .ColorIndex = xlAutomatic
    End With
    With Selection.Borders(xlEdgeRight)
        .LineStyle = xlContinuous
        .Weight = xlThin
        .ColorIndex = xlAutomatic
    End With
    '   With Selection.Borders(xlInsideVertical)
    '    .LineStyle = xlContinuous
    '    .Weight = xlThin
    '    .ColorIndex = xlAutomatic
    ' End With
    With Selection.Borders(xlInsideHorizontal)
       .LineStyle = xlContinuous
       .Weight = xlThin
       .ColorIndex = xlAutomatic
    End With

    ' yellow column width
    Selection.ColumnWidth = 2.43

    ' Automatic filters to all fields
    Rows("1:1").Select
    Selection.AutoFilter

    ' autofit
    Cells.Select
    Cells.EntireColumn.AutoFit

End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T02:36:17.370

试试这个：

```
Sub HTH()
    Dim vArray As Variant
    Dim rCell As Range

    Application.ScreenUpdating = False

    For Each rCell In Worksheets("Raw Data").UsedRange.Resize(, 1)
        With rCell
            If UCase(Left(.Value, 1)) = "P" Then
                vArray = .Resize(, 11).Value
            ElseIf IsNumeric(.Value) And Not IsEmpty(.Value) Then
                .Offset(-1, 12).Resize(, 11).Value = .Resize(, 11).Value
                If IsNumeric(.Offset(1).Value) And Not IsEmpty(.Offset(1).Value) Then
                    .Resize(, 11).Value = vArray
                Else
                    .Resize(, 11).Value = ""
                End If
            End If
        End With
    Next      

    Application.ScreenUpdating = True

End Sub 
```

我以为您可以手动复制标题，但如果您需要自动复制标题，请添加：

```
With Worksheets("Raw Data")
    .Cells(1, "M").Resize(, 11).Value = .Cells(1, 1).Resize(, 11).Value
End With 
```

如果您需要中间的黄色突出显示，请添加：

```
 With Columns("L:L").Interior
    .Pattern = xlSolid
    .Color = 65535
 End With 
```

# ios - 从开发机器到 iOS 设备的数据文件

> ID：10940749
> 
> 赞同：1
> 
> 时间：2012-06-07T22:30:32.703
> 
> 标签：ios, io, device, data-files

随着模拟器的开发，我的应用程序创建了几个数据文件。他们的位置是通过这个函数获得的：

```
NSString *pathInDocumentDirectory(NSString *fileName) {
    NSArray *documentDirectories = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, 
                                                                       NSUserDomainMask, 
                                                                       YES);    
    NSString *documentDirectory = [documentDirectories objectAtIndex: 0];
    return [documentDirectory stringByAppendingPathComponent: fileName];  
} 
```

现在设备上需要这些文件，因为应用程序的测试正在从模拟器转移到实际设备。我的印象是，我保存这些文件的位置使它们成为捆绑包的一部分，因此它们将在构建时位于设备上。显然情况并非如此，因为文件不存在于设备上，但存在于我的开发机器上的目录中。如何将数据文件从我当前的工作环境传输到设备？当程序编写这些文件时，如何使这些文件自动从模拟器传输到设备？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T00:30:34.620

*   您可以在您的应用程序中启用 iTunes 文件共享，这将使您能够从 iTunes 将文件添加到 Documents 目录。

    您需要做的就是将布尔键添加`UIFileSharingEnabled`到您的 Info.plist 并将其设置为`true`or `YES`（如果您不希望用户拥有此访问权限，请确保在提交之前禁用此功能）。有关更多信息，请查看本[教程](http://www.raywenderlich.com/1948/how-integrate-itunes-file-sharing-with-your-ios-app)。

**或者**

*   您可以使用[PhoneDisk](http://www.macroplant.com/phonedisk/)将文件复制到应用程序的 Documents 目录中。

# ios - 无法推送视图控制器

> ID：10940756
> 
> 赞同：1
> 
> 时间：2012-06-07T22:31:19.083
> 
> 标签：ios, view, pushviewcontroller

我试图将一个简单的视图推送到我当前的视图上，但它似乎不起作用。

在我的应用程序委托中，我做了：

```
self.window.backgroundColor = [UIColor whiteColor];
__firstVC = [[FirstPageViewController alloc]initWithNibName:nil bundle:nil];
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:__firstVC];
[self.window addSubview:[navController view]];
[self.window makeKeyAndVisible]; Return YES; 
```

然后在我的第一个视图控制器中：

```
SecondPageViewController *secondView = [[SecondPageViewController alloc] init];
    [secondView setTitle:@"What do you want?"];
    [self.navigationController pushViewController:secondView animated:YES]; 
```

但似乎什么也没发生。我在 secondviewcontroller 的 init 中放了一个 nslog 语句，我可以看到，但没有视图。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T23:15:45.417

您的导航控制器没有所有者。当您到达应用程序委托中的 didFinishLaunchingWithOptions 方法的末尾时，导航控制器将被释放。与其将其视图添加到窗口，不如将其设置为根视图控制器：

```
self.window.rootViewController = navController; 
```

编辑：我猜上面的陈述可能不正确，具体取决于您是否使用 ARC。如果没有 ARC，您只会泄漏导航控制器，这可能会很好，因为您将在应用程序的整个生命周期中使用它。

# java - 在 .form 项目中使用 .java 类中的方法

> ID：10940758
> 
> 赞同：2
> 
> 时间：2012-06-07T22:31:27.683
> 
> 标签：java, swing, netbeans, jdbc

我已经成功创建了一个提供数据库连接并返回连接对象的 Java 类。我需要使用这个连接对象

1.  从数据库中检索信息（我已经知道该怎么做）
2.  我需要在按钮控件后面的动作事件源代码中使用

不幸的是，我正在使用 NetBeans 和一些自动生成的代码来构建 GUI，我的问题很简单：

创建类时，需要实例化它，然后调用方法。我在哪里可以在我的表单中实例化这个类？我是在主程序中执行它，因为它是所有程序的入口点，还是我在按钮代码后面执行它。我是新手，请谅解。

当我创建项目时，我也创建了一个主类，然后我向它添加了一个表单。然后我创建了一个不同的项目，它是一个类库并将其添加到我的项目中。我如何将两者联系在一起？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T17:50:16.040

听起来 NetBeans GUI 编辑器使情况变得模糊。您可以通过将其限制为单个面板来驯服它，如本[示例](https://stackoverflow.com/a/2561540/230513)所示。的默认[布局](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)是，所以`JFrame`有添加面板的效果。您可以将其他面板（可能具有不同布局的面板）添加到其他区域。`BorderLayout``f.add(new NewJPanel())``CENTER`

附录：另请注意，生成的`ActionListener`通常调用具有这样签名的方法，其中`xxx`是生成的控件的名称：

```
private void xxxActionPerformed(java.awt.event.ActionEvent evt) {} 
```

这些方法在类*内部*但*在*生成的代码折叠之外，因此可以根据需要对其进行编辑。

# c++ - 从 C++ 中的另一个程序重定向标准输出

> ID：10940765
> 
> 赞同：3
> 
> 时间：2012-06-07T22:31:59.537
> 
> 标签：c++, stdout

我正在编写单元测试，因此无法更改我正在测试的文件中的代码。我正在测试的代码在 cout 中有消息，我试图将这些消息重定向到文件中以检查以确保程序输出正确的消息。有没有人有办法在另一个不会导致延迟的程序中重定向标准输出？我已经尝试过 freopen() ，这导致我的程序由于某种原因挂起。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T22:40:04.587

你可以用它创建一个`filebuf`then replace`cout`的streambuf：

```
{
  std::filebuf f;
  f.open("output.txt", std::ios::out);
  std::streambuf* o = std::cout.rdbuf(&f);
  std::cout << "hello" << std::endl;  // endl will flush the stream
  std::cout.rdbuf(o);
} 
```

您需要再次恢复`cout`的原始流缓冲区（或将其设置为空指针），否则在刷新和销毁全局流时它可能会崩溃，因为它`filebuf`已经超出范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T23:40:35.213

您可以使用“open()”和“dup2()”。您可以使用下面提供的助手。如何使用它们的示例：

```
void
code_to_test ()
{
    std::cout << "Here we go" << std::endl;
    std::cerr << "Danger danger" << std::endl;
}

run_test(code_to_test); 
```

`run_test`助手调用重定向，并运行测试代码。

```
template <typename TEST> void
run_test (TEST t, bool append = false) {
    flush_output();
    Redirect o(1, "/tmp/test_stdout", append);
    Redirect e(2, "/tmp/test_stderr", append);
    t();
    flush_output();
} 
```

`flush_output`助手刷新流。

```
void flush_output () {
    fflush(stdout);
    fflush(stderr);
    std::cout.flush();
    std::cerr.flush();
} 
```

该类`Redirect`影响构造函数中的重定向。它在析构函数中恢复原始描述符。

```
class Redirect
{
    int m_what;
    int m_old_what;
public:
    Redirect (int what, std::string where, bool append = false)
        : m_what(what), m_old_what(dup(what)) {
        int flags = O_CREAT|O_WRONLY;
        if (append) flags |= O_APPEND;
        int f = open(where.c_str(), flags, 0660);
        dup2(f, m_what);
        close(f);
    }
    ~Redirect () {
        dup2(m_old_what, m_what);
        close(m_old_what);
    }
}; 
```

# drupal - 如何根据角色设置图像样式？

> ID：10940766
> 
> 赞同：0
> 
> 时间：2012-06-07T22:32:01.407
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-theming

嗨，我的网站上有 100 张图片。

我有一种图像样式，可以高质量地显示我的所有照片。我有另一种图像样式，它显示我的图像质量低，上面有水印。

我想要的是，如果某个角色的匿名用户所有图像都将是低质量的并且带有水印。如果用户具有不同的角色或站点管理员，他们会以原始/高质量查看所有图像。

我什至不知道从哪里开始。

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T04:19:48.040

您应该跟踪这些图像所在的块的 DIV。

将条件放入检查用户权限的代码中并应用相应的 DIV。我很久以前就为一个项目做过类似的事情。

# android - 未调用 ChildBrowser 的 onLocationChange 方法

> ID：10940768
> 
> 赞同：0
> 
> 时间：2012-06-07T22:32:11.980
> 
> 标签：android, facebook, cordova, childbrowser

我正在为 phonegap 使用 Facebook 插件。登录成功时，我正在使用 ChildBrowser 打开外部 url。当我调用 openExternal 但未调用 onLocationChange 时，指定的网页可以正常打开。如果您能告诉我代码有什么问题，那就太好了。代码如下..

```
 init:function(){

    // Begin Authorization
    var authorize_url = "http://graph.facebook.com/oauth/authorize?";
     authorize_url += "client_id=" + my_client_id;
     authorize_url += "&redirect_uri=" + my_redirect_uri;
     authorize_url += "&display=" + my_display;
     authorize_url += "&scope=publish_stream,offline_access"

     // Open Child browser and ask for permissions
     client_browser = ChildBrowser.install();

    if (client_browser != null) {
         alert("In the init section " + client_browser); 

         client_browser.onLocationChange = function(loc){
             alert("Log location = " + loc);

         };             

         window.plugins.childBrowser.openExternal(authorize_url);

     }

} 
```

我也试过

```
window.plugins.childBrowser.onLocationChange = function(loc){
         alert("In the client_browser section ");  
         Facebook.facebookLocChanged(loc);
     }; 
```

但这也行不通。任何帮助/建议将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T02:09:32.773

openExternal 打开 Android Web 浏览器，在这种情况下不会调用 onLocationChanged 事件。您需要使用 showWebPage 来获取 onLocationChanged 事件。

# java - 如何在 Java 中覆盖以前的 FileWriter 内容

> ID：10940770
> 
> 赞同：0
> 
> 时间：2012-06-07T22:32:34.903
> 
> 标签：java, filewriter, bufferedwriter

嗨，我有 3 个类，第一类和第二类是计算，第三类是我将前 2 个类的数据保存到文本文件的地方。我正在尝试重用我的方法，该方法使用 FileWriter 和 BufferedWriter 将计算值从第一类和第二类写入文本文件。

所以我有这样的事情：
1）第一类进行计算
2）然后使用第三类 writeDetected 将其保存在文本文件中
3）第二类进行计算
4）然后使用第三类再次使用 writeDetected

一切正常，除非我想保存我在第二堂课中所做的计算。文本文件中的内容包含之前的（一级计算）+二级计算。我想要的是一个具有一级计算的文件和另一个具有二级计算的文件。关于我应该如何做到这一点的任何想法？

# 编辑：

只是为了说明这一点：
它应该看起来像这样
class 1 {1,2,3,4}
class 2 {5,6,7,8}

我目前拥有的是
1 类 {1,2,3,4}
2 类 {1,2,3,4,5,6,7,8}

这是我的代码：

```
public void writeDetected(){
    Scanner getFileName = new Scanner(System.in);

    //Enter file name here for first class then after calculation of  
    // 2nd class enter another file name
    String getInp = getFileName.nextLine();
    try{
        FileWriter theFile = new FileWriter(getInp);
        BufferedWriter readBuf = new BufferedWriter (theFile); 
        String convDoubleToString;

        for (Double getVal: detected){
            convDoubleToString = getVal.toString();

            readBuf.write(convDoubleToString);
            readBuf.newLine();
        }

        readBuf.close();

    }

    catch (IOException e){
        System.out.println(e);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T04:41:26.107

试试这个，

`path`从发送`calling method as Argument`到`Parameters of the called` `method`，这样您就可以将文件内容写入您想要的任何文件（`Here`被调用的方法将是`writeMyFile(String path)`）

例如：

```
public void writeMyFile(String path){

Scanner scan = new Scanner(System.in);

File f = new File(path);

FileWriter fr = new FileWriter(f);

BufferedWriter br  = new BufferedWriter(fr);

while(true){  // its a continuos loop, so better handle it the way u want it

 br.write(new Scanner(System.in).nextLine());

 } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T04:29:29.033

我会在方法中添加一个字符串输入变量并传入要写入的文件名。那或者您可以创建文件对象并将它们作为输入参数传递。我自己使用了一个字符串，然后传入要写入的文件名。

# objective-c - iPad应用程序中如何处理大图

> ID：10940773
> 
> 赞同：0
> 
> 时间：2012-06-07T22:32:56.327
> 
> 标签：objective-c, image, ipad

我有几个背景是整个 ipad 屏幕 (1024x768) 的尺寸，所以我问自己如何将它们包含到我的项目中。我应该将它们填充到精灵表上还是单独包含它们或从网络加载它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T01:16:54.760

如果您的应用程序小于 10MB，我会将它们作为每个文件单独包含在项目中。

我不会使用精灵表。使用 PNG 编码，Sprite 表不会为您提供太多空间优势，并且不适合图像不经常更改的应用程序（它会使您的内存占用更大）。

如果您的应用接近或超过 10MB 应用商店安装超过 3G 限制，我会在项目中包含默认背景，并使用 SDWebImage 等框架按需加载其余部分。

# nhibernate - Fluent NHibernate 中的多个 UniqueKeys

> ID：10940775
> 
> 赞同：2
> 
> 时间：2012-06-07T22:33:10.643
> 
> 标签：nhibernate, fluent-nhibernate, nhibernate-mapping, fluent-nhibernate-mapping, sharp-architecture

我有一个场景，我需要定义两个多列唯一约束，如下所示：

```
public class UserMap : IAutoMappingOverride<User>
{
    public void Override(AutoMapping<User> mapping)
    {
        mapping.Map(x => x.UserName)
               .UniqueKey("UQ_User_UserName_Client");
        mapping.Map(x => x.LoweredEmail)
               .UniqueKey("UQ_User_Email_Client");
        mapping.References(x => x.Client)
               .UniqueKey("UQ_User_UserName_Client")
               .UniqueKey("UQ_User_Email_Client");
    }
} 
```

这样做的原因是我需要每个客户的用户名和电子邮件都是唯一的。生成的 SQL 如下所示：

```
create table Users (
   Id UNIQUEIDENTIFIER not null,
   UserName NVARCHAR(256) not null,
   LoweredEmail NVARCHAR(256) not null,
   Email NVARCHAR(256) not null,
   ClientId UNIQUEIDENTIFIER null,
   primary key (Id),
   unique (UserName),
   unique (LoweredEmail, ClientId)
) 
```

这不是预期的效果。如何创建以下 SQL？

```
create table Users (
   Id UNIQUEIDENTIFIER not null,
   UserName NVARCHAR(256) not null,
   LoweredEmail NVARCHAR(256) not null,
   Email NVARCHAR(256) not null,
   ClientId UNIQUEIDENTIFIER null,
   primary key (Id),
   unique (UserName, ClientId),
   unique (LoweredEmail, ClientId)
) 
```

我不确定这是否是 Fluent 或 NHibernate 的问题/限制。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T23:51:38.260

`UniqueKey`多次调用会覆盖之前的值。

相反，使用逗号分隔的唯一键列表：

```
mapping.Map(x => x.UserName)
       .UniqueKey("UQ_User_UserName_Client");
mapping.Map(x => x.LoweredEmail)
       .UniqueKey("UQ_User_Email_Client");
mapping.References(x => x.Client)
       .UniqueKey("UQ_User_UserName_Client, UQ_User_Email_Client") 
```

# image - 使用 .htaccess 生成动态图像

> ID：10940786
> 
> 赞同：0
> 
> 时间：2012-06-07T22:34:13.320
> 
> 标签：image, .htaccess, dynamic

我需要通过 .htaccess 使用动态图像生成，以防请求的图像不存在但我不清楚一件事.....如果我在 .htaccess 中使用以下代码：

```
# Images 
RewriteCond     %{SCRIPT_FILENAME}      !-f
RewriteCond     %{SCRIPT_FILENAME}      !-d
RewriteRule     ^static/images/([-\w]+)/([0-9]+)/([\.-\w]+)$   image_handler.php?area=$1& id=$2&filename=$3 [NC,QSA,L] 
```

仅当从地址栏请求该图像的 url 时才会生成图像（希望这是有道理的），并且我认为如果在 HTML 中调用图像它应该可以工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:53:44.830

从 Web 服务器的角度来看，响应通过直接在浏览器的地址栏上输入 URL 发出的请求或响应浏览器看到资源被`<img>`标记引用并执行的请求之间没有区别获取它的请求。（这里唯一的区别是一个会设置一个 HTTP referer 标头，而另一个不会，但这与您的情况无关）

这两种情况都会产生您想要的结果，即让网络服务器重写请求并传递给 PHP 脚本处理程序，该处理程序将（希望）返回您的图像。所以你的假设是正确的。

尝试通过其他方式（例如服务器端脚本）访问那些“虚拟图像”是行不通的。您使用这些规则执行的操作是让您的 Web 服务器将来自 HTTP 的请求解释`static/images/`为应该由您指定的程序提供服务的请求。然后它将使用所述程序的输出来满足请求（在这种情况下`image_handler.php`）。这些图像永远不会存储或复制到服务器的磁盘或类似的东西上（当然，除非你让脚本这样做）。所以在服务器端，试图在磁盘上的任何位置查找这些图像是行不通的，假设的相应目录结构甚至可能不存在。

在客户端（通过 HTML、Javascript），它们的行为应该就像您处理静态资源一样（缓存考虑除外，因为我们不知道您的脚本在这方面是如何处理的）。

# java - 同一文件中 XML 和 Java 的 Sublime Text 2 语法高亮显示？

> ID：10940789
> 
> 赞同：0
> 
> 时间：2012-06-07T22:34:37.210
> 
> 标签：java, xml, custom-action, sublimetext, sublimetext2

我有一个采用 XML 文件的专有应用程序，可以使用 XML 文件中的嵌入式 Java 代码来执行某些操作。我在 ST2 中打开了 XML 文件，但我只获得了 XML 代码的语法高亮显示，Java 代码只是白色的。如果我将语法从视图菜单切换到 Java，Java 代码会正确突出显示。有没有办法在同一个文件中突出显示两种语言的语法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:41:54.323

注意的两个链接：

*   [如何在 tmLanguage 文件中添加另一个要解析为嵌入式 JS 的标签？](https://stackoverflow.com/questions/7693272/how-do-i-add-another-tag-to-be-parsed-as-embedded-js-in-a-tmlanguage-file)
*   [http://sublimetext.userecho.com/topic/27384-nested-syntax-highlighting/](http://sublimetext.userecho.com/topic/27384-nested-syntax-highlighting/)

我做了一些嵌入式语法工作，但没有你描述的那么复杂，所以我不相信我的工作是相关的。

# jakarta-ee - 使用 OpenEJB @ApplicationComposer 为 junit 测试中的测试方法设置用户凭据

> ID：10940791
> 
> 赞同：4
> 
> 时间：2012-06-07T22:34:45.457
> 
> 标签：jakarta-ee, junit, ejb, openejb

当我使用 @ApplicationComposer 配置测试时，它不会在我的企业 bean 中创建具有适当属性的 SessionContext。无论我在配置中添加什么，它总是使用 PropertiesLogin。

我总是得到

```
javax.ejb.EJBException: User not found for login guest 
```

例外。这是我的 junit 测试类和示例 bean。

```
@RunWith(ApplicationComposer.class)
public class OpenEJBTest {
  @EJB
  UserUtil uu;

   @Configuration
   public Properties properties() {
    Properties p=new Properties();
    p.put(Context.INITIAL_CONTEXT_FACTORY, "org.apache.openejb.client.LocalInitialContextFactory");
    p.put(Context.SECURITY_PRINCIPAL, "test");
    p.put(Context.SECURITY_CREDENTIALS, "test");
    p.put("openejb.authentication.realmName", "mylogmodule");
    return p;
   }
   @Test
   public void testSth() {
    uu.getUserlogin();
   } 
```

}

```
@Stateless
public class UserUtilBean implements UserUtil {
    @Resource
    private SessionContext ctx;

    public String getUserLogin() {
        return ctx.getCallerPrincipal().getName();
    }
} 
```

我尝试使用自定义 LogModule（在 login.config 中定义的 mylogmodule）、默认模块（PropertiesLogin）、在测试方法中使用 Properties 启动 InitialContext，但没有成功。感谢您的任何建议。

# c# - ReSharper 减少广告荒谬？

> ID：10940792
> 
> 赞同：-1
> 
> 时间：2012-06-07T22:34:50.390
> 
> 标签：c#, resharper

这是一个有趣的：

Resharper 想要改变这个：

```
var lc = new LoginCredentials();
lc.Username = "CesarChavez";
lc.Password = "CesarChavez"; 
```

...进入这个：

```
var lc = new LoginCredentials {Username = "CesarChavez", Password = "CesarChavez"}; 
```

...但是对于后者，“lc”似乎是多余的-它没有在任何地方引用...？？？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-07T22:38:35.180

它也没有在您的第一个代码块中使用。它假设（并且理所当然地）您将`lc`在某个时候使用，否则整个块毫无意义。

# facebook - 使用从 Facebook API 请求返回的错误代码是否安全？

> ID：10940794
> 
> 赞同：0
> 
> 时间：2012-06-07T22:35:06.493
> 
> 标签：facebook, facebook-graph-api

这样做是否安全：

```
FB.api('/me/{something}', function(response) {
    if (response.error) {
        if (response.error.code === some_code) {
            // do something
        } else {
            // do some other things
        }
    }
}, 'post'); 
```

我在任何地方都找不到记录的那些错误代码。Facebook 是否曾在未通知的情况下更改错误代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:37:15.890

*只有当它是已发布 API*的一部分时它才是安全的。否则，如果没有记录错误代码，那么您就只能靠自己了。

API 可以更改，但不会在*没有通知*的情况下发生这种情况。

# php - 预订表格有效，但未提供反馈

> ID：10940800
> 
> 赞同：0
> 
> 时间：2012-06-07T22:35:55.157
> 
> 标签：php, javascript

我有一个表格，人们可以在其中预订给定活动的座位。
它实际上是一个 WordPress 插件。当有人发送他的预订时，会正确发送电子邮件通知，并相应地更新活动预订状态。
问题是预订表格没有提供任何反馈。
一旦您点击“立即预订”，图形就会继续加载，并且不会显示任何反馈，例如“预订发送成功”或“您的表单中有错误”，即使预订已正确保存并通过电子邮件通知双方。
我想这是一个 JavaScript 问题，Firebug 控制台没有显示任何错误......
所以这里是预订表格的代码源：

```
$('#em-booking-form').submit( function(e){
e.preventDefault();
var em_booking_doing_ajax = false;
$.ajax({
    url: EM.bookingajaxurl,
    data:$('#em-booking-form').serializeArray(),
    dataType: 'jsonp',
    type:'post',
    beforeSend: function(formData, jqForm, options) {
        if(em_booking_doing_ajax){
            alert(EM.bookingInProgress);
            return false;
        }
        em_booking_doing_ajax = true;
        $('.em-booking-message').remove();
        $('#em-booking').append('<div id="em-loading"></div>');
    },
    success : function(response, statusText, xhr, $form) {
        $('#em-loading').remove();
        $('.em-booking-message').remove();
        $('.em-booking-message').remove();
        //show error or success message
        if(response.result){
            $('<div class="em-booking-message-success em-booking-message">'+response.message+'</div>').insertBefore('#em-booking-form');
            $('#em-booking-form').hide();
            $('.em-booking-login').hide();
            $(document).trigger('em_booking_success', [response]);
        }else{
            if( response.errors != null ){
                if( $.isArray(response.errors) && response.errors.length > 0 ){
                    var error_msg;
                    response.errors.each(function(i, el){ 
                        error_msg = error_msg + el;
                    });
                    $('<div class="em-booking-message-error em-booking-message">'+error_msg.errors+'</div>').insertBefore('#em-booking-form');
                }else{
                    $('<div class="em-booking-message-error em-booking-message">'+response.errors+'</div>').insertBefore('#em-booking-form');                           
                }
            }else{
                $('<div class="em-booking-message-error em-booking-message">'+response.message+'</div>').insertBefore('#em-booking-form');
            }
        }
        $('html, body').animate({ scrollTop: $("#em-booking").first().offset().top - 50 }); //sends user back to top of form
        //run extra actions after showing the message here
        if( response.gateway != null ){
            $(document).trigger('em_booking_gateway_add_'+response.gateway, [response]);
        }
        if( !response.result && typeof Recaptcha != 'undefined'){
            Recaptcha.reload();
        }
    },
    complete : function(){
        em_booking_doing_ajax = false;
        $('#em-loading').remove();
    }
});
return false;   
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T06:48:49.927

如果您将数据类型设置为`json`而不是`jsonp`.

通常，当您需要对另一个域进行 AJAX 查询时，您会使用 jsonp，而在这种情况下您没有这样做。

# c# - 如何获取控件的设置事件？

> ID：10940810
> 
> 赞同：1
> 
> 时间：2012-06-07T22:36:38.440
> 
> 标签：c#, events, controls

可以通过 C# 代码获取设置为 Control 的方法/委托列表？让我更好地解释一下..例如。

假设一些定义是这样的：

```
foo.Click += (a, b) => { ... }
//..
foo.Click += (A,B) => { ... } 
```

还有一个神奇的方法：

```
var baa = foo.GetEvents("Click"); 
```

退货

`baa[0]`指着`(a, b) => { ... }`

`baa[1]`指着`(A,B) => { ... }`

我的风景：我制作并动态添加事件到循环内的一些控件。我希望根据布尔值控制索引一的事件，将通过使用 control.Click -= baa[1] 或类似的东西来删除。我希望这对你来说很清楚。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T22:44:31.573

不，没有办法做到这一点。事件的重点是隐藏支持委托字段（严格来说，可能根本没有支持字段），以便您只能订阅或取消订阅事件。

这样做的原因是订阅者（也称为观察者模式中的“观察者”）不应该知道其他订阅者，更不用说取消订阅它们了。如果你的邻居取消了你对你最喜欢的杂志的订阅，你会怎么说？;)

* * *

编辑：实际上，有*一种*方法可以做到这一点，但它丑陋且不可靠。假设您知道类如何存储其事件处理程序（通常是委托字段，但在 Windows 窗体中不同），您可以对私有成员使用反射来检索事件处理程序。

# ruby - 如何将字符串的长度加在一起？

> ID：10940811
> 
> 赞同：0
> 
> 时间：2012-06-07T22:36:40.327
> 
> 标签：ruby

我正在尝试编写一个程序，该程序分别获取我的名字、中间名和姓氏的长度，然后最后将字母总数相加。我的答案一直是 666 而不是 18。这是我编写的代码。

```
puts 'What is your first name?'

firstName = gets.chomp
realFirstName = firstName.length.to_i

puts 'What is your middle name?'

middleName = gets.chomp
realMiddleName = middleName.length.to_i

puts 'What is your last name?'

lastName = gets.chomp
realLastName = lastName.length.to_i

puts 'Did you know there are ' + realFirstName.to_s + realMiddleName.to_s + realLastName.to_s + ' letters in your name?' 
```

只是想知道我哪里出错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T22:43:12.210

由于您在最后一行将整数转换回字符串，因此您正在连接*strings*，而不是添加数字。你正在做的是：

```
"6" + "6" + "6"  #=> "666" 
```

只是不要打电话`to_s`给数字，而是先把它们加起来：

```
letters_count = realFirstName + realMiddleName + realLastName
puts "Did you know there are #{letters_count} letters in your name?" 
```

我还使用了*字符串插值*来使其更易于阅读。

`to_i`调用之后也不需要调用`length`，因为`length`已经返回一个整数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T23:15:58.187

### 什么地方出了错

你没有添加任何东西。+ 运算符实际上是一种在字符串和数字上表现不同的方法。在您的情况下， realFirstName.to_s 和朋友正在将 Fixnum 对象（可以添加）转换为 String 对象（使用相同的运算符进行连接）。使用#to_i 和#to_s 并没有错，但如果你在错误的时间进行转换，你可能会遇到麻烦。

### 什么会做对

String#length 将返回字符串中的字符数。由于它返回 Fixnum，并且 Fixnum#+ 方法执行加法，因此如果在转换为字符串之前调用它，它将按照您期望的方式运行。这两个例子应该是等价的。

```
# Adding the Fixnum objects.
letter_count = realFirstName + realMiddleName + realLastName
puts "Did you know there are #{letter_count} letters in your name?"

# Adding the String lengths.
letter_count = realFirstName.length + realMiddleName.length + realLastName.length
puts "Did you know there are #{letter_count} letters in your name?" 
```

In this example, we add up all the Fixnum objects, then interpolate the result into our string. Note that #{} does an implicit #to_s for you, so you don't have to do it yourself.

### An Advanced Ruby Idiom for the Adventurous

Whether or not this is clearer (it probably isn't), you'll probably run across a lot more examples like the following in real-world Ruby code.

```
puts "Did you know there are %d letters in your name?" %
  [firstName, middleName, lastName].map(&:length).reduce(:+) 
```

Ruby can be a brain-bender, but it's fun!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T22:42:31.517

你不需要在每个学期之后写 .to_s 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T22:47:51.510

那是因为该上下文中的加号用于连接。像你一样`"something" + "else"`。

您可以通过创建不同的变量轻松解决它

```
size = realFirstName + realMiddleName+ realLastName

puts 'Did you know there are ' + size.to_s + ' letters in your name?' 
```

或者做插值

```
puts "Did you know there are #{realFirstName + realMiddleName + realLastName}  letters in your name?" 
```

请注意，使用插值需要双引号，无需调用`to_s`

在第一种情况下，您也可以使用插值。

要了解加号为什么会发生这种情况：Ruby 中的加号是一个实际调用方法的运算符，在您的情况下，它是在字符串中调用的。如果你这样做`1 + "asd`了，它会给出一个错误，因为 + 方法需要一个 Fixnum 作为参数。string 中的 + 方法需要一个字符串。

# objective-c - iOS效率文件保存效率

> ID：10940813
> 
> 赞同：2
> 
> 时间：2012-06-07T22:36:51.343
> 
> 标签：objective-c, ios, xcode, filehandle

我正在开发我的 iOS 应用程序，我的目标是一点一点地保存从 Internet 接收的文件。我当前的设置是我有一个`NSMutableData`对象，并在收到文件时向它添加一些数据。收到最后一个“数据包”后，我将其写入`NSData`文件并完成该过程。我有点担心这不是理想的方法，因为移动设备中 RAM 的限制，并且接收大文件会有问题。

我的下一个想法是实现一个`NSFileHandle`，以便当文件到达时，它将被保存到磁盘，而不是虚拟内存。

在速度和效率方面，您认为哪种方法在 iOS 设备上运行得很好。我目前正在使用第一种`NSMutableData`方法。是否值得更改我的应用程序以使用`NSFileHandle`?

在此先感谢，古维

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:40:22.330

如果您正在下载的数据是无限的（即没有最大文件大小），那么值得您花一些时间将一些代码放入您的下载和保存方案中以将数据从“ `NSMutableData`”对象刷新到文件在某个临界点（例如 2K、10K、1Meg 等）。然后当内存中的数据对象再次填满时附加到该文件上。

由于 iDevice 没有物理硬盘驱动器（嗯，我的意思是一个旋转的盘片，并且会消耗额外的能量来启动旋转和读写头），因此仅写入这些字节也可能是值得的直接到文件句柄。我不相信它会在功耗方面花费任何额外费用。更大的功耗是在网络通信中（蜂窝通信是耗电的，WiFi 连接稍微少一点）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T22:41:16.360

取决于你下载的文件有多大。如果您要立即使用该文件，那么第一个选项将是最好的，看起来好像它会先保存到 RAM，然后再保存到磁盘，然后再将所有文件加载到 RAM 中。但是，如果它是一个非常大的文件，即使它会被使用以便 iPhone 可以在后台处理它，也可能值得将它保存到磁盘。这主要取决于您，只需运行一些测试，看看使用该应用程序时的感觉。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T23:05:40.427

您可以尝试使用 AFNetworking 及其[Streaming Request](https://github.com/AFNetworking/AFNetworking#streaming-request)：

```
NSURL *url = aUrl;
NSString *path = aPath;
NSURLRequest *request = [NSURLRequest requestWithURL:url];

AFHTTPRequestOperation *operation = [[AFHTTPRequestOperation alloc] initWithRequest:request];
operation.outputStream = [NSOutputStream outputStreamToFileAtPath:path append:YES];
[operation start]; 
```

# c++ - STL 的 set 的 insert 方法是否复制传递对象的值？

> ID：10940816
> 
> 赞同：1
> 
> 时间：2012-06-07T22:37:11.000
> 
> 标签：c++, stl, insert, set

我有这样的 C++ 代码（请不要问为什么它看起来这么难看；）——你必须相信，由于代码的更多部分，它确实有意义）：

```
IntSet temp;
SuperSet superSet;
for (uint i = 0; i < noItems; i++) {
        temp.insert(i);
        superSet.insert(temp);
        temp.clear();
} 
```

它用于准备 `noItems`整数集合（`IntSet`，每个包含一个整数值）并将其插入到其他集合（`SuperSet`）。两个集合定义如下：

```
typedef unsigned int DataType;
typedef std::set<DataType> IntSet;
typedef std::set<IntSet> SuperSet; 
```

对我来说，这段代码不应该按预期工作，因为在插入之后`temp`我`superSet`正在清除`temp`，并且我发现它`insert`得到了一个引用作为它的参数`pair<iterator,bool> insert ( const value_type& x );`：（[http://www.cplusplus.com/reference/stl/设置/插入/](http://www.cplusplus.com/reference/stl/set/insert/)）

因此，作为上述代码的结果，我应该得到一个`SuperSet`只包含 clear`IntSet`的。但是“不幸的是”这段代码有效——所有`IntSet`的都充满了正确的值……所以我的问题是——STL集合中的insert方法在它的主体中真正做了什么？它只是复制通过引用传递给它的对象吗？传递对象或原始类型之间的这种方法的行为有什么区别？

谢谢您的回答！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:46:09.207

`insert()`传递参数时采用引用参数以避免复制。但是当将项目存储在集合中时，它会创建一个副本。这就是为什么`clear()`can 在这种情况下工作的原因。此外，在这两种情况下都是如此，因此即使您“重用” `temp`，也会有单独的副本`superSet`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T02:05:20.007

您对按值`SuperSet`存储的声明，`IntSet`因此插入新元素的唯一方法是制作副本。由于制作了副本，因此对原件的更改`IntSet`将不会反映在副本中。

这特别适用于您传递`temp`的方式，`superSet`但在 C++11 中，您的使用变得低效。通过声明一个局部变量用作临时变量，您可以通过强制进行复制来防止使用移动语义。

```
SuperSet superSet;

for (DataType i = 0; i < noItems; i++)
{
    superSet.insert(IntSet(&i, &i + 1));
} 
```

折扣优化编译器将创建一个临时的`IntSet`并用单个元素初始化它。因为编译器知道这是一个临时的，它可以使用移动构造函数插入值。这将对`IntSet`传递的内容进行浅拷贝并将其值重置为默认状态（即指向 nullptr 的指针），从而导致*move*。

# java - Java SQL 优化

> ID：10940818
> 
> 赞同：2
> 
> 时间：2012-06-07T22:37:21.303
> 
> 标签：java, sql

我正在尝试将 SQL 数据库与 Java 程序一起使用。我制作了一个 7 列宽和 250 万行的表格（我需要构建的下一个表格将是大约 2 亿行）。我有两个问题：构建 SQL 表太慢（大约 2,000 行/分钟）和搜索数据库太慢（如果可能，我需要在一秒钟内找到超过 1 亿行，目前需要一分钟以上）。我尝试创建一个 csv 文件并导入它，但[我无法让它工作](https://stackoverflow.com/questions/10926768/sql-importing-large-csv-out-of-memory-error)。

我在我的电脑（i5 + 6gb ram）上使用 xampp 和 phpMyAdmin。我正在测试三种方法：createTable()、writeSQL() 和 searchSQL()。

创建表：

```
public static void createTable() {
    String driverName = "org.gjt.mm.mysql.Driver";
    Connection connection = null;
    try {
        Class.forName(driverName);

    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    String serverName = "localhost";
    String mydatabase = "PokerRanks4";
    String url = "jdbc:mysql://" + serverName + "/" + mydatabase;                                                                        
    String username = "root";
    String password = "";

    try {
        connection = DriverManager.getConnection(url, username, password);
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    ///////////////
    String table = "CREATE TABLE ranks(deckForm bigint(10) NOT NULL,rank0 int(2) NOT NULL,rank1 int(2) NOT NULL,rank2 int(2) NOT NULL,rank3 int(2) NOT NULL,rank4 int(2) NOT NULL,rank5 int(2) NOT NULL,PRIMARY KEY (deckForm),UNIQUE id (deckForm),KEY id_2 (deckForm))";
    try {
        Statement st = connection.createStatement();
        st.executeUpdate(table);
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    ///////////////

    try {
        connection.close();
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

写SQL（）：

```
public static void writeSQL() {
    String driverName = "org.gjt.mm.mysql.Driver";
    Connection connection = null;
    try {
        Class.forName(driverName);

    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    String serverName = "localhost";
    String mydatabase = "PokerRanks4";
    String url = "jdbc:mysql://" + serverName + "/" + mydatabase;                                                                        
    String username = "root";
    String password = "";

    try {
        connection = DriverManager.getConnection(url, username, password);
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    /////////////// Prepared Statement with Batch   
    PreparedStatement statement = null;
    String sql = "INSERT INTO ranks VALUES (? ,0, 0, 0, 0, 0, 0)";      
    long start = System.currentTimeMillis();
    try {
        statement = connection.prepareStatement(sql);
        for (int i = 0; i < 100; i++) {
            for (int j = 0; j < 100; j++) {
                statement.setLong(1, (i*100 + j));
                statement.addBatch();
            }
            System.out.println(i);
            statement.executeBatch();
        }
    } catch (Exception e) {
        e.printStackTrace();
    } finally {
      if (statement != null) {
        try {
          statement.close();
        } catch (SQLException e) {
        } // nothing we can do
      }
      if (connection != null) {
        try {
          connection.close();
        } catch (SQLException e) {
        } // nothing we can do
      }       
    }
    System.out.println("Total Time: " + (System.currentTimeMillis() - start) / 1000 );
    ///////////////

} 
```

搜索SQL（）：

```
public static void searchSQL() {
    String driverName = "org.gjt.mm.mysql.Driver";
    Connection connection = null;
    try {
        Class.forName(driverName);

    } catch (ClassNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    String serverName = "localhost";
    String mydatabase = "PokerRanks2";
    String url = "jdbc:mysql://" + serverName + "/" + mydatabase;                                                                        
    String username = "root";
    String password = "";

    try {
        connection = DriverManager.getConnection(url, username, password);
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

    /////////////// Option 1, Prepared Statement
    ResultSet rs = null;
    PreparedStatement pstmt = null;
    String query = "SELECT rank0, rank1, rank2, rank3, rank4, rank5 FROM ranks WHERE deckForm = ?";
    long start = System.currentTimeMillis();
    try {
        pstmt = connection.prepareStatement(query);             
        for (int i = 0; i < 100000; i++) {              
            pstmt.setLong(1, 1423354957);
            rs = pstmt.executeQuery();
            while (rs.next()) {             
                int[] arr = {rs.getInt(1), rs.getInt(2), rs.getInt(3), rs.getInt(4), rs.getInt(5), rs.getInt(6)};               
            }
        }
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }                       
    System.out.println("Total Time: " + (System.currentTimeMillis() - start) / 1000 );
    ///////////////

    /*
    /////////////// Option 2
    Statement st = null;
    long start = System.currentTimeMillis(); 
    try {
        st = connection.createStatement();
        ResultSet rs = null;
        long deckForm = 1012213456;             
        for (int i = 0; i < 100000; i++) {          
            rs = st.executeQuery("SELECT rank0, rank1, rank2, rank3, rank4, rank5 FROM ranks WHERE deckForm = " + deckForm);
            while (rs.next()) {
                int[] arr = {rs.getInt(1), rs.getInt(2), rs.getInt(3), rs.getInt(4), rs.getInt(5), rs.getInt(6)}; 
            }
        }
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }        
    System.out.println("Total Time: " + (System.currentTimeMillis() - start) / 1000 );
    ///////////////
    */

    try {
        connection.close();
    } catch (SQLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
} 
```

抱歉这么久。我已经尝试了我能想到的一切来加快速度，但我无法弄清楚。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:15:21.463

好吧，您可以进行一些改进：

1.  每次要搜索、写入或创建连接时，都应使用池连接和数据源。
2.  通过执行解释计划优化您的查询，并优化您的表关系和索引。
3.  您可以使用存储过程并调用它们。

好吧，这就是我可以提供的全部帮助，当然还有更多提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T22:50:10.620

至于插入速度，您需要在插入之前禁用所有索引，并在完成后重新启用它们。有关提高批量插入速度的大量详细信息，请参阅[插入语句的速度。](http://dev.mysql.com/doc/refman/5.0/en/insert-speed.html)

查询速度可能受 CPU 和磁盘速度的限制。您可能不得不在问题上投入更多的硬件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T23:18:30.967

> 建 SQL 表太慢（大约 2000 行/分钟）

所以插入大量行的观点肯定有用`Heap table`，它是基本表，也被命名为通常由创建的持久页面数组`CREATE TABLE`，它对搜索无效，因为你的意思是搜索很慢但插入非常有效因为它将行添加到找到的第一个空闲位置或表的末尾。但另一方面，搜索效率非常低，因为不能保证项目/行的类型。

> 搜索数据库太慢（如果可能的话，我需要在一秒钟内找到超过 1 亿行，目前需要一分钟以上）

因此，为此您应该创建有效搜索的表。如果您使用，那么它提供了许多物理实现的结构，`Oracle`例如`Index organized tables`，-索引/哈希/排序哈希...... 我不确定，但也有集群表，我不知道确切，我不知道想告诉你最糟糕的事情。我并不是说 MySQL 像 Oracle 那样不好或更糟，只是没有提供一些物理实现技术，例如`Data clustering``Clustered tables``SQL Server``MySQL``Oracle`

* * *

所以，我的意思是很难对这种方法提出一些建议，但是您认真思考和研究有关数据库系统的物理实现的一些东西，查看关系代数以优化您的语句，您应该创建哪些类型的表，**@duffymo 的**意思正确的是，您可以`EXPLAIN PLANE FOR`根据要优化的结果来解释您的查询执行计划。还有如何使用`indexes`，它是强大的数据库构建，但每个索引都意味着对数据库的任何修改都需要更多的操作，因此可以重新考虑为哪个属性创建索引等。

通过 Google，您可以找到许多关于数据建模、物理实现等有用的文章。

问候男人，我祝你好运

# php - php 如果在 javascript 中

> ID：10940826
> 
> 赞同：2
> 
> 时间：2012-06-07T22:37:59.470
> 
> 标签：php, javascript, jquery, cakephp, typeahead

我正在尝试使用 bootstrap typehead 插件。

这个想法是：

1.  我有制造商选项
2.  我有一个模型选项
3.  只有选择了制造商选项后，才会启用模型选项。
4.  模型选项由制造商过滤。

CakePHP 控制器向我发送了一个包含制造商和模型的“findall”数组（我将其称为 Variety 而不是 Model 用于命名约定）

```
model_source = [];
$('#manufacturer').typeahead({
        source: [
            <?php
                foreach($manufacturers as $manufacturer):
                    if($manufacturer['Manufacturer']['bow'] == true):
            ?>
                "<?php echo $manufacturer['Manufacturer']['manufacturer']; ?>",
            <?php
                    endif;
                endforeach;
            ?>
        ]
    });
    $('#manufacturer').live("change", function(){
        if($(this).val()){
            $('#model').attr('disabled', false);
            manufacturer = $(this).val();
            <?php
                foreach($varieties as $model):
                    if($model['Variety']['bow'] == true):
            ?>
                model_source.push("<?php if($model['Variety']['manufacturer_id'] == "+manufacturer+"){echo $model['Variety']['model'];}else{ continue; } ?>");
            <?php
                    endif;
                endforeach;
            ?>
        }else{
            $('#model').attr('disabled', true);
        }
    }); 
```

我遇到的问题是我尝试做的地方

```
 model_source.push("<?php if($model['Variety']['manufacturer_id'] == "+manufacturer+"){echo $model['Variety']['model'];}else{ continue; } ?>"); 
```

如果我将制造商变量硬编码为一行 PHP，那么它就可以工作（没有 else 语句，这也给我带来了问题，我在控制台上收到了 ILEGAL 错误）

知道为什么当我将 php 字符串与 javascript 变量连接起来时它不起作用吗？！

[http://jsfiddle.net/mmoscosa/Y6hEA/](http://jsfiddle.net/mmoscosa/Y6hEA/)

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T22:43:06.677

您的 javascript 变量恰好位于`<?php ?>`标签之间。您不能在**if**语句中使用 javascript 制造商变量。PHP 是服务器端，JavaScript 是客户端。

# javascript - 是否可以通过函数调用重绘 DIV 的内容？

> ID：10940829
> 
> 赞同：1
> 
> 时间：2012-06-07T22:38:20.173
> 
> 标签：javascript, html

这里只是一个业余爱好者/爱好者 - 这应该是我和朋友一起玩棋盘游戏的工具。游戏使用的塑料滑块太松而不可靠，因此我想将该功能复制为网页，以便在玩游戏时在智能手机上使用。

它从表单（在另一页上）中获取角色的名称并将其提供给下面的表单。根据名称，它从 switch 语句中选择正确的属性集（为了简单起见，我删除了所有情况，除了两种情况），运行一个 for 循环以在列表中显示属性并将“当前”值突出显示为绿色。两个按钮应该增加或减少数组计数器（“速度”），并重新运行使用新突出显示值绘制数组的函数。innerHTML 旨在用新结果重绘 div（“speeddiv”）。

现在 chrome 中的 javascript 控制台告诉我 speedcounter() 和字符是未定义的。我怀疑这与我正在使用的函数的范围和变量通过 innerhtml 丢失有关。我想要做的就是找到一种方法来轻松重绘/替换统计计数器，这样当您在 div 中按下 + 或 - 按钮时，突出显示的数字似乎会上下移动。我只处理下面的“速度”属性，所以我可以先让它工作。

```
<!DOCTYPE html>
<html>
<body>
<style type="text/css">
html, body { height: 100%; width: 100%; margin: 0; }
#dossier {height: 10%; text-align: center; background: #808080}
#container {height: 90%; width: 100%; background: #000000; overflow: hidden; float: left}
#stats {height: 100%; width: 100%; float: left; position: relative}
#speeddiv, #mightdiv, #sanitydiv, #knowledgediv {width: 25%; height: 100%; text-align: center; float: left; position: relative; overflow: hidden}
#speeddiv {background: #0000FF}
#mightdiv {background: #FF0000}
#sanitydiv {background: #FFFF00}
#knowledgediv {background: #00FF00}
</style>

<?php $character = $_GET["character"]; ?>

<script type="text/javascript">

 var character = "<?php echo $character ?>";
 var sp;
 var speed;

 function speedcounter() {
  var spx;
  document.write('   <h2>Speed</h2></br>');
  document.write('<input type="button" onclick="addspeed();" value="+"><br />');   

  for (spx=8; spx>=0; spx--) {
   if (spx == speed) { 
   document.write('<font color=#00FF00>');
   }
   document.write(sp[spx]); 
   document.write('<font color=#000000><br />');
  }
  document.write ('<input type="button" onclick="remspeed();" value="-">'); 
 }

function addspeed() {
 if (speed < 8) {
  speed++;
  document.getElementById("speeddiv").innerHTML = "<script type="text/javascript">speedcounter();<\/script>";
 }
}

function remspeed() {
 if (speed > 0) {
  speed--;
  document.getElementById("speeddiv").innerHTML = "<script type="text/javascript">speedcounter();<\/script>";
 }
}

switch (character) {
 case "brandon":

 sp=["0","3","4","4","4","5","6","7","8"];
 mt=["0","2","3","3","4","5","6","6","7"];
 sn=["0","3","3","3","4","5","6","7","8"];
 kn=["0","1","3","3","5","5","6","6","7"];

 speed=3;
 might=4;
 sanity=4;
 knowledge=3;

 break;

 case "flash":

 sp=["0","4","4","4","5","6","7","7","8"];
 mt=["0","2","3","3","4","5","6","6","7"];
 sn=["0","1","2","3","4","5","5","5","7"];
 kn=["0","2","3","3","4","5","5","5","7"];

 speed=5;
 might=3;
 sanity=3;
 knowledge=3;

 break;
 }

</script>

<div id="dossier">
 <script type="text/javascript">
  document.write(character);
 </script>
</div>
<div id="container">
 <div id="stats">
  <div id="speeddiv">
   <script type="text/javascript">
    speedcounter();
   </script>
  </div>
  <div id="mightdiv">
   <h2>Might</h2></br></br>
  </div>
  <div id="sanitydiv">
   <h2>Sanity</h2></br></br>
  </div>
  <div id="knowledgediv">
   <h2>Knowledge</h2></br></br>
  </div>
 </div>
</div>

</script>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:52:40.900

我已经根据您发布的代码创建了一个 jsfiddle [http://jsfiddle.net/amelvin/bwwce/](http://jsfiddle.net/amelvin/bwwce/) - 在那里以交互方式处理它可能会有所帮助。

我认为您的问题是 document.write 发生了什么；[关于 document.write 的部分](http://javascript.crockford.com/script.html)解释说 document.write 的作用不是很可预测。

使用 jquery 之类的 javascript 库将元素插入网页而不是 document.write - [jquery 中的 html() 方法](http://api.jquery.com/html/)（以及其他方法）允许您根据按钮按下、添加或删除等事件动态且可预测地操作页面的任何方面按钮或 div。

# javascript - 当图层重叠时，悬停对象在背景/前景元素上出现两次

> ID：10940832
> 
> 赞同：2
> 
> 时间：2012-06-07T22:38:52.607
> 
> 标签：javascript, jquery

请查看此示例：http: [//jsfiddle.net/AAd9b/1/](http://jsfiddle.net/AAd9b/1/)

每次我将鼠标悬停在这个对象上时，重叠的对象都会打开两次，我该如何让它只消失一次并一直呆在那里，直到我将所有东西都鼠标移出？所以不管你是在背景还是前景对象上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T23:00:52.297

`.hover()`接受两个参数：`handlerIn`和`handlerOut`. `fadeIn`如果您只提供一个回调，则会在两个事件上调用它，因此您需要查看事件类型以确定您是`fadeOut`

[http://api.jquery.com/hover/](http://api.jquery.com/hover/)

你可能正在寻找这个：

```
$('.someclass').hover(
    function() {
        //-- mouseenter
    },
    function() {
        //-- mouseleave
    }
); 
```

您的元素在鼠标下闪烁的原因是因为它触发了`mouseleave`事件`$('.someclass')`（因为从技术上讲，鼠标确实离开了该对象）。这是一个棘手的场景。当鼠标悬停在您的`<p>`...或一些花哨的 CSS 技巧时，可能会涉及取消绑定和重新绑定事件。

或者试试这个：http: [//jsfiddle.net/UBdgz/](http://jsfiddle.net/UBdgz/)

HTML：

```
<div class="wrapper">
    <div class="someclass">
        <a href="#">Hover Me</a>

    </div>
    <p>Only Once!</p>
</div> 
```

JS：

```
var handleHover = function(evt) {
    switch (evt.type) {
        case 'mouseenter':
            $("p").fadeIn();
            break;
        case 'mouseleave':
            $("p").fadeOut();
            break;
    }
}
$(".wrapper").bind('mouseenter mouseleave', handleHover); 
```

# html - CSS 位置：Img 到 div 的中间

> ID：10940833
> 
> 赞同：1
> 
> 时间：2012-06-07T22:38:54.903
> 
> 标签：html, css

我的页面中有一个 div 元素和一个箭头，我正试图到达 div 的右侧中间。这是代码： HTML：

```
<div id="popup">
   <p>
      This is the inside of a div element.
   </p>
</div>
<div id="image"></div> 
```

CSS：

```
#popup {  
    background-color: whiteSmoke;
    width:500px;
    margin:0px auto;
    margin-top:100px;
}
#image {
    background-image:url('/images/jquerys penis.png');
    border:1px solid black;
    width:30px;
    height:30px;
    float:right;
} 
```

我正在开发的网站：[site.brycemckenney.com/jquery.html](http://site.brycemckenney.com/jquery.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:54:43.770

我不得不稍微修改你的标记：http: [//jsfiddle.net/Wexcode/y7jTb/](http://jsfiddle.net/Wexcode/y7jTb/)

HTML：

```
<div id="popup">
    <p>This is the inside of a div element.</p>
    <div id="image"></div>
</div> 
```

CSS：

```
#popup {  
    width: 500px;
    white-space: nowrap;
    margin: 0 auto; }
#popup * { white-space: normal; }
#popup p { 
    background-color: whiteSmoke;
    vertical-align: middle;
    display: inline-block; }
#image {
    background: url('http://site.brycemckenney.com/images/jquerys%20penis.png') 0 0 no-repeat;
    border: 1px solid black;
    width: 30px;
    height: 30px;
    vertical-align: middle;
    display: inline-block; }​ 
```

此解决方案取决于`display: inline-block;`、`white-space: nowrap`和`vertical-align: middle;`。如果您需要帮助理解我刚刚发布的任何内容，请随时提问。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-07T22:43:31.523

在#image 样式上添加：

```
width: 30px;
margin: auto; 
```

# html - history.pushState 不会触发“popstate”事件

> ID：10940837
> 
> 赞同：24
> 
> 时间：2012-06-07T22:39:19.557
> 
> 标签：html, history.js

为什么

```
$(function () {
  $(window).bind('popstate', function () {alert('pop');});

  window.history.pushState(null, '', '/foo');
}); 
```

不警觉`pop`？

注意：在最新的 chrome 上进行测试

--

根据[MDN](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history#The_popstate_event)：

> 每次活动历史条目更改时，都会向窗口发送一个 popstate 事件。如果被激活的历史条目是由对 pushState 的调用创建的或受对 replaceState 的调用的影响，则 popstate 事件的 state 属性包含历史条目的 state 对象的副本。

那么为什么我的`pushState`不触发`popstate`事件呢？

* * *

## 回答 #1

> 赞同：52
> 
> 时间：2016-05-27T20:52:22.243

您可以在每次调用时手动触发`popstate`事件。`window``history.pushState()`

```
history.pushState(state, '', url);

var popStateEvent = new PopStateEvent('popstate', { state: state });
dispatchEvent(popStateEvent); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-08T10:41:08.097

您引用的段落有点模棱两可。阅读同一页面上的[示例](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history#Example)，很明显 popstate 仅在用户单击后退按钮时触发，而不是在脚本调用时触发`pushState()`。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2014-10-10T21:48:34.897

您正在阅读 MDN 的“指南页面”，这并不意味着规范。

考虑阅读 MDN 的[“文档页面”来`WindowEventHandlers.onpopstate`](https://developer.mozilla.org/en-US/docs/WindowEventHandlers.onpopstate)代替：

> 请注意，仅调用 history.pushState() 或 history.replaceState() 不会触发 popstate 事件。**popstate 事件只能通过执行浏览器操作来触发，**例如单击后退按钮（或在 JavaScript 中调用 history.back()）。并且仅当用户在同一文档的两个历史条目之间导航时才会触发该事件。

另一种未记录的触发方式`popstate`是直接操纵`window.location`对象。

```
// this also triggers popstate 
window.location.hash = "#some-new-hash" 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-09-14T03:37:37.317

我的解决方案：

```
var url = "http://awesome.website.net/route/to/paradise";
window.history.pushState({}, "", url);
window.history.pushState({}, "", url); // yes twice
window.history.back(); 
```

它将通过“popstate”事件触发软导航，并且没有 HTTP 请求。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-13T17:59:39.700

我也遇到了这个......我认为只有在数据对象的顶层有与之前状态不同的东西时才会触发该事件。

试试这个：

```
var data = {rand: Math.random()};
window.history.pushState(data, '', '/foo'); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2017-02-09T06:36:36.300

文档[https://developer.mozilla.org/en-US/docs/Web/Events/popstate](https://developer.mozilla.org/en-US/docs/Web/Events/popstate)说：

> 请注意，仅调用`history.pushState()`or`history.replaceState()`不会触发 popstate 事件。popstate 事件将通过执行浏览器操作来触发，例如单击后退或前进按钮（或调用`history.back()`或`history.forward()`在 JavaScript 中）。

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2018-11-21T03:54:27.503

不知道你在哪里试图实现，但如果你只是想让你的 popState 事件处理程序启动，你可以简单地将它提取到如下函数中：

```
function popStateHandler(event) {
     // Event handling Code here
}
window.onpopstate = popStateHandler; 
```

然后你可以在 pushState 之后简单地调用你的 popStateHandler。

# jquery-ui - jquery ui自动完成传递一个变量

> ID：10940839
> 
> 赞同：0
> 
> 时间：2012-06-07T22:39:29.143
> 
> 标签：jquery-ui, jquery-ui-autocomplete

我正在使用 jquery UI 来获取朋友姓名和 ID 的建议，但问题是我无法使用自动完成 json 函数传递用户 ID。

```
 $(function() {

    function split( val ) {
        return val.split( /,\s*/ );
    }
    function extractLast( term ) {
        return split(term).pop();
    }

    $( "#recipient" )
        // don't navigate away from the field on tab when selecting an item
        .bind( "keydown", function( event ) {
            if ( event.keyCode === $.ui.keyCode.TAB &&
                    $( this ).data( "autocomplete" ).menu.active ) {
                event.preventDefault();
            }
        })
        .autocomplete({
            source: function( request, response ) {
             var attm= $('.USERID').val();
                $.getJSON( "modules/messages/sql.php", {
                    term: extractLast( request.term ),

                }, response );
            },
            search: function() {
                // custom minLength
                var term = extractLast( this.value );
                if ( term.length < 2 ) {
                    return false;
                }
            },
            focus: function() {
                // prevent value inserted on focus
                return false;
            },
            select: function( event, ui ) {
                var terms = split( this.value );
                // remove the current input
                terms.pop();
                // add the selected item
                terms.push( ui.item.value );
                // add placeholder to get the comma-and-space at the end
                terms.push( "" );
                this.value = terms.join( ", " );
                                 var prollNos = $('#recipientid').val()
            $('#recipientid').val(prollNos + ui.item.id + ", ");
                return false;
            }
        });
}); 
```

我试图在其中传递一个：`$('.USERID').val()`作为用户 ID，任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T08:28:49.750

我通过 GET 实现了类似的目标。我使用 jquery-ui-autocomplete，作为我使用的源：`"source.php?param=something"`. 所以我的源页面得到的最终请求是`"source.php?param=something&term=blabla"`

# javascript - 在页面重新加载时保留下拉选择

> ID：10940840
> 
> 赞同：1
> 
> 时间：2012-06-07T22:39:30.037
> 
> 标签：javascript, jquery, html, html-select, url-parameters

我在这样的页面上有一个选择列表：

```
<select name='elements'>
    <option value='water'>Water</option>
    <option value='fire'>Fire</option>
    <option value='air'>Air</option>
</select> 
```

**编辑**：当用户进行选择时，当前页面会刷新，但是如何在页面刷新后保持用户的选择在列表中可见？换句话说，我不希望列表回滚到其默认选定值。

请帮忙

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-07T23:13:28.947

这是一个仅限 Javascript 的解决方案。

```
 <select name='elements' id='elements' onChange='window.location="yoururl.html?value=" + this.value;'>
     <option value='water'>Water</option>
     <option value='fire'>Fire</option>
     <option value='air'>Air</option>
 </select> 
```

然后你使用[这个](http://www.netlobo.com/url_query_string_javascript.html)函数来查看`value`参数是否被设置并获取它，你可以使用 jQuery 将它设置为`selected`.

```
$("#elements option[value='" + result_of_gup + "']").attr("selected","selected") ; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-07T22:42:57.427

```
 <select name='elements' onChange='window.location="yoururl.php?value=" + this.value;'>
     <option value='water'>Water</option>
     <option value='fire'>Fire</option>
     <option value='air'>Air</option>
 </select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-08T02:50:32.973

在没有 jQuery 的情况下这样做：

然后创建`window.location.getParameter()`函数（参见**[Anatoly Mironov](https://stackoverflow.com/users/632117/anatoly-mironov)**的**[此处](https://stackoverflow.com/questions/901115/get-query-string-values-in-javascript/8812157#8812157)**）：

```
<select name='elements' id='elements' onChange='window.location="yoururl.html?elements=" + this.selectedIndex;'>
   <option value='water'>Water</option>
   <option value='fire'>Fire</option>
   <option value='air'>Air</option>
</select>

<script type="text/javascript">
  els = document.getElementById('elements');
  selIndex = window.location.getParameter('elements') || 0;
  els[selIndex].selected = true;​
</script> 
```

为了方便参考，我在下面重现了Anatoly的优秀`.getParameter`功能：

```
window.location.getParameter = function(key) {
    function parseParams() {
        var params = {},
            e,
            a = /\+/g,  // Regex for replacing addition symbol with a space
            r = /([^&=]+)=?([^&]*)/g,
            d = function (s) { return decodeURIComponent(s.replace(a, " ")); },
            q = window.location.search.substring(1);

        while (e = r.exec(q))
            params[d(e[1])] = d(e[2]);

        return params;
    }

    if (!this.queryStringParams)
        this.queryStringParams = parseParams(); 

    return this.queryStringParams[key];
}; 
```

# bash - Bash：将关联数组发送到函数

> ID：10940842
> 
> 赞同：1
> 
> 时间：2012-06-07T22:39:56.703
> 
> 标签：bash, hashtable

> **可能重复：**
> [如何将关联数组作为参数传递给 Bash 中的函数？](https://stackoverflow.com/questions/4069188/how-to-pass-an-associative-array-as-argument-to-a-function-in-bash)

我声明我的哈希数组：

```
declare -A some_array 
```

我声明了我的功能：

```
some_function() {
  ..
} 
```

如何将数组作为参数发送给函数以便访问它？

我知道我可以将它用作全局变量，但是当我有很多想要与某些函数一起使用的哈希数组时，这不是出路。

如果没有办法做到这一点，我该如何分配给另一个哈希数组值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:42:17.990

将其作为全局变量访问（只需在函数内按名称引用它）。Bash 中没有传递数组。有一些尴尬的技术试图做到这一点，但我建议避免混乱。

其他选项包括用 Python 或 Perl 等支持传递数组、散列或其引用的语言编写整个脚本。

在 Bash 4.3 或更高版本中，您可以使用[名称引用](https://stackoverflow.com/a/55170447/26428)，但有一些[注意事项](https://mywiki.wooledge.org/BashFAQ/048#The_problem_with_bash.27s_name_references)。

# html - 对框架集有任何固有的不良影响吗？

> ID：10940846
> 
> 赞同：0
> 
> 时间：2012-06-07T22:40:15.027
> 
> 标签：html, frameset

我有一个客户希望通过框架集显示他们的网站，例如：

```
<frameset rows="100%,*" border="0">
  <frame src="http://www.real-site-address.com" frameborder="0" />
  <frame frameborder="0" noresize />
</frameset> 
```

我反对它的唯一论点是它会阻止任何东西在网站内部被添加书签。我认为（不确定）它也破坏了后退/前进按钮。

是否有其他原因导致这不受欢迎？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T02:58:57.130

问题中提到的论点足以反对这种对框架的使用，但除此之外，还有欺骗方面。以这种方式使用框架的想法是使站点的地址看起来与其真实地址不同。出于各种原因，这个想法经常会向用户透露，他们可能会感到被欺骗并可能认为该网站是业余的（因为它使用廉价的技巧而不是适当的托管。

屏幕阅读器软件在框架方面存在特殊问题，可以通过说例如“页面有两个框架”并通过阅读框架的标题或名称来解决这些问题，让用户选择一个框架。这不会成功，特别是如果没有合适的名称可以使用，那么它们只能被称为“框架一”和“框架二”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-10T11:24:06.913

就像你提到的：深度链接的丢失。例如，不可能共享指向某篇文章的链接，这反过来又会损害您的链接受欢迎程度和页面排名评级。

因此，访客统计变得更加困难，甚至部分不可能。换句话说，尝试从 SEO 角度说服他们。这对 CEO 来说总是很有效。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-07T22:44:57.907

我唯一能想到的是你需要设置一个特定的文档类型。只要确保您正确使用它：[http ://reference.sitepoint.com/html/frameset](http://reference.sitepoint.com/html/frameset)

# jquery - Jquery加载功能在移动浏览器中不起作用

> ID：10940849
> 
> 赞同：0
> 
> 时间：2012-06-07T22:40:22.623
> 
> 标签：jquery, android, html, mobile

因此，我尝试使用加载功能将 div 的内容从一个网页拉到我们移动页面上的 div 中。在我的桌面浏览器上，一切都很好。代码完美地提取了我需要的所有信息。但由于某种原因，在我的 android 浏览器上进行测试时，它并没有提取信息。相反，屏幕左下方有一些文字显示“正在加载”，但没有加载任何内容。这是我在网站上使用的代码片段：

```
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>

<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>

<script>$(document).ready(function(){ $('#newevents').load('http://www.kobebistro.com/5/special.php #events'); });</script> 
```

您可以查看[完整的站点/源代码](http://www.kobebistro.com/5/mobile/events2.html)

最近几天我一直卡住。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T22:53:58.133

问题（至少为什么您会看到“加载”文本）是由于 jQuery Mobile 的 CSS 文件未添加到您的页面。您在底部看到的“正在加载”文本实际上是 jQuery Mobile 页面转换/加载。

将以下样式表链接添加到页面顶部：

```
<link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css" />
<script src="http://code.jquery.com/jquery-1.6.4.min.js"></script>
<script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script> 
```

或者，使用以下 CSS 规则隐藏现有样式表：

```
.ui-loader {
    display: none;
} 
```

我已经设置了一个适用于我的示例，适用于桌面（在 Firefox 和 Chrome 上测试）和 Android 移动浏览器（2.3）：
[http ://www.jonwarner.net/stackoverflow/10940849/mobile/index.htm](http://www.jonwarner.net/stackoverflow/10940849/mobile/index.htm)

我还建议您通过以下页面解剖检查页面创建：http:
[//jquerymobile.com/demos/1.1.0/docs/pages/page-anatomy.html](http://jquerymobile.com/demos/1.1.0/docs/pages/page-anatomy.html)

~~如果您使用以下代码，您会看到任何警报吗？~~

 ~~```
<script>$(document).ready(function(){ alert('document ready called'); });</script> 
```~~ 

从上面继续，考虑添加一个回调并检查响应：

```
$("#newevents").load("http://www.kobebistro.com/5/special.php#events", function(response, status, xhr) {
  alert(JSON.stringify(xhr));
}); 
```

JSFiddle 设置希望能帮助您解决问题：

~~[http://jsfiddle.net/X3B6t/1/](http://jsfiddle.net/X3B6t/1/)~~

# javascript - 如何获取 jQuery 事件处理程序返回值

> ID：10940853
> 
> 赞同：2
> 
> 时间：2012-06-07T22:40:56.180
> 
> 标签：javascript, jquery

我有一个链接`id="something"`：

**html**

```
<a id="something" onclick="getReturnValue()"> Something </a> 
```

**javascript**

```
function getReturnValue(){
  //some validation
  if(validation fails){
    return false;
  }else{
    return true;
  }
} 
```

我需要在使用时获取返回值：

```
$("#something").click(); 
```

如何获取事件的返回值？

html 标签中已经提到了 onclick 功能。我想使用：

```
$("#something").click(); 
```

并从中我想获得返回值。

由于我必须在多个地方使用它，我不想`getReturnValue()`一次又一次地编写方法，例如：

```
click(function(){ getReturnValue() }) 
```

我需要这样做

```
if($("#something").click() == true){
  form.submit();
} 
```

click() 将调用 getReturnValue() 来进行一些验证。如果验证失败，它会返回 false，我不需要提交表单。如果验证为真，我需要提交表单

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T15:48:45.627

要进行一些表单验证，您可以执行以下操作：

```
$('#myForm').submit(function(e) {
    if () {//Validation rules failed
        e.preventDefault(); //Prevent browsers from submitting
    }
    //Form is valid do nothing and let the form submit
}); 
```

现在在您的按钮上：

```
$("#something").click(function() {$('#myForm').submit();//Calls function from above}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-18T04:59:44.900

您可以做的是创建一个 jQuery 事件对象并将其传递给单击处理程序。

```
var e = jQuery.Event('click');
$('#something').click(e)

if (e.validResult) {
    //action
} 
```

如果验证成功，您必须稍微修改单击处理程序以获取事件对象并设置`validResult`属性。

```
function getReturnValue(e) {
    //some validation
    if (valid) {
        e.validResult= true;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-20T13:28:24.407

这是有关如何访问的示例**`return data from event handler`**。

```
var a;
$(document).on('a', function(e){
    $(document).trigger(a = $.Event('sum', {datas: e.datas}));
});
$(document).on('sum', function(e){
    return e.datas;
});
$(document).trigger($.Event('a', {datas: [1,2,3]}));
console.log(a.result);//[1,2,3] 
```

你用你的目的改变它。在这里查看[https://api.jquery.com/event.result/](https://api.jquery.com/event.result/)了解更多详情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-07T22:44:36.020

```
$("#something").click(function() {
    var x = getReturnValue();
}); 
```

这就是你想要的？

LE：这意味着你改变了

```
<a id="something"> Something </a> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-07T22:45:52.577

您正在尝试在单击事件上运行两个不同的函数，也许您需要删除内联代码 (onclick="func()") 并将其放入您的脚本中

```
$("#something").click(
  function(){
    var returnValue = getReturnValue();
  }
); 
```

虽然我不太明白你的问题...

# encryption - 校验和的可视化表示算法（例如 SHA）

> ID：10940854
> 
> 赞同：4
> 
> 时间：2012-06-07T22:41:02.200
> 
> 标签：encryption, cryptography, sha, ascii-art

我想为 SHA 校验和生成类似[VisualHostKey的东西。](http://unsyncopated.com/wiki/OpenSSH%20VisualHostKey%20Image%20Generation%20Algorithm%20Hackery)但它应该适用于任何十六进制校验和。

生成的工件可能是 ASCII 艺术、2D 调色板，或者只是 PNG 中的一些随机垃圾。我个人喜欢 VisualHostKey 方法，但我愿意接受建议。

这个想法是能够仅使用人眼快速识别两个校验和是否相同。当面对一堆数字时，快速找到你要找的那个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-21T21:07:07.540

您可以只使用实际的 OpenSSH VisualHostKey 代码，该代码位于[OpenSSH 源代码](http://www.openssh.com/ftp.html)文件中的`key_fingerprint_randomart()`函数中。该算法相当简单，可以将任何字节数组作为输入。在 OpenSSH 中，输入是密钥的加密哈希；你也可以这样做。`key.c`

（正如 OpenSSH 源代码中定义的那样，该函数还接受一个指向密钥结构本身的指针，但这仅用于在图片顶部打印密钥的类型和大小。）

事实上，由于代码是免费许可的，所以让我在这里附上一份副本。这是从 OpenSSH 6.1 中提取的`$OpenBSD: key.c,v 1.99 2012/05/23 03:28:28 djm Exp $`：

```
/*
 * Copyright (c) 2000, 2001 Markus Friedl.  All rights reserved.
 * Copyright (c) 2008 Alexander von Gernler.  All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions
 * are met:
 * 1\. Redistributions of source code must retain the above copyright
 *    notice, this list of conditions and the following disclaimer.
 * 2\. Redistributions in binary form must reproduce the above copyright
 *    notice, this list of conditions and the following disclaimer in the
 *    documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR
 * IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
 * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.
 * IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT,
 * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT
 * NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF
 * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

/*
 * Draw an ASCII-Art representing the fingerprint so human brain can
 * profit from its built-in pattern recognition ability.
 * This technique is called "random art" and can be found in some
 * scientific publications like this original paper:
 *
 * "Hash Visualization: a New Technique to improve Real-World Security",
 * Perrig A. and Song D., 1999, International Workshop on Cryptographic
 * Techniques and E-Commerce (CrypTEC '99)
 * sparrow.ece.cmu.edu/~adrian/projects/validation/validation.pdf
 *
 * The subject came up in a talk by Dan Kaminsky, too.
 *
 * If you see the picture is different, the key is different.
 * If the picture looks the same, you still know nothing.
 *
 * The algorithm used here is a worm crawling over a discrete plane,
 * leaving a trace (augmenting the field) everywhere it goes.
 * Movement is taken from dgst_raw 2bit-wise.  Bumping into walls
 * makes the respective movement vector be ignored for this turn.
 * Graphs are not unambiguous, because circles in graphs can be
 * walked in either direction.
 */

/*
 * Field sizes for the random art.  Have to be odd, so the starting point
 * can be in the exact middle of the picture, and FLDBASE should be >=8 .
 * Else pictures would be too dense, and drawing the frame would
 * fail, too, because the key type would not fit in anymore.
 */
#define FLDBASE         8
#define FLDSIZE_Y       (FLDBASE + 1)
#define FLDSIZE_X       (FLDBASE * 2 + 1)
static char *
key_fingerprint_randomart(u_char *dgst_raw, u_int dgst_raw_len, const Key *k)
{
        /*
         * Chars to be used after each other every time the worm
         * intersects with itself.  Matter of taste.
         */
        char    *augmentation_string = " .o+=*BOX@%&#/^SE";
        char    *retval, *p;
        u_char   field[FLDSIZE_X][FLDSIZE_Y];
        u_int    i, b;
        int      x, y;
        size_t   len = strlen(augmentation_string) - 1;

        retval = xcalloc(1, (FLDSIZE_X + 3) * (FLDSIZE_Y + 2));

        /* initialize field */
        memset(field, 0, FLDSIZE_X * FLDSIZE_Y * sizeof(char));
        x = FLDSIZE_X / 2;
        y = FLDSIZE_Y / 2;

        /* process raw key */
        for (i = 0; i < dgst_raw_len; i++) {
                int input;
                /* each byte conveys four 2-bit move commands */
                input = dgst_raw[i];
                for (b = 0; b < 4; b++) {
                        /* evaluate 2 bit, rest is shifted later */
                        x += (input & 0x1) ? 1 : -1;
                        y += (input & 0x2) ? 1 : -1;

                        /* assure we are still in bounds */
                        x = MAX(x, 0);
                        y = MAX(y, 0);
                        x = MIN(x, FLDSIZE_X - 1);
                        y = MIN(y, FLDSIZE_Y - 1);

                        /* augment the field */
                        if (field[x][y] < len - 2)
                                field[x][y]++;
                        input = input >> 2;
                }
        }

        /* mark starting point and end point*/
        field[FLDSIZE_X / 2][FLDSIZE_Y / 2] = len - 1;
        field[x][y] = len;

        /* fill in retval */
        snprintf(retval, FLDSIZE_X, "+--[%4s %4u]", key_type(k), key_size(k));
        p = strchr(retval, '\0');

        /* output upper border */
        for (i = p - retval - 1; i < FLDSIZE_X; i++)
                *p++ = '-';
        *p++ = '+';
        *p++ = '\n';

        /* output content */
        for (y = 0; y < FLDSIZE_Y; y++) {
                *p++ = '|';
                for (x = 0; x < FLDSIZE_X; x++)
                        *p++ = augmentation_string[MIN(field[x][y], len)];
                *p++ = '|';
                *p++ = '\n';
        }

        /* output lower border */
        *p++ = '+';
        for (i = 0; i < FLDSIZE_X; i++)
                *p++ = '-';
        *p++ = '+';

        return retval;
} 
```

除了参数之外，它似乎对其余的 OpenSSH 代码没有显着的依赖关系，该`const Key *k`参数仅在一行中用作`key_type()`and`key_size()`函数（或宏？）的参数。非标准类型`u_char`and`u_int`似乎只是 and 的别名`unsigned char`，`unsigned int`并且该`xcalloc()`函数似乎只是标准的替换或包装器`calloc()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-25T21:59:38.963

通常这是通过制作某种接受种子的图像生成函数来完成的。然后你散列一些数据，然后用结果播种你的图像生成器。这将防止它在 PNG 中制造随机垃圾，并为您提供一些可区分的东西。

# python - 字符串列表：查找特定字符

> ID：10940855
> 
> 赞同：2
> 
> 时间：2012-06-07T22:41:11.617
> 
> 标签：python, python-2.7

假设我有以下列表，其中只有字符串。

```
appliances = ['blender', 'microwave', 'oven', 'toaster'] 
```

如何生成一个由列表组件的元素组成的新列表，该列表仅包含其中包含字母 v 的字符串？运行后，新列表如下所示：

```
short = ['oven', 'microwave'] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T22:42:38.283

试试这个：

```
short = [x for x in appliances if 'v' in x] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T22:44:43.390

您需要的工具是列表推导（[http://docs.python.org/tutorial/datastructures.html#list-comprehensions](http://docs.python.org/tutorial/datastructures.html#list-comprehensions "列表推导")）和`in`运算符（[http://docs.python.org/reference/expressions.html#in](http://docs.python.org/reference/expressions.html#in "`in` 运算符")） .

# jsf - 咆哮素面3.2

> ID：10940860
> 
> 赞同：0
> 
> 时间：2012-06-07T22:41:42.730
> 
> 标签：jsf, primefaces, growl

我使用 JSF 2.0 和 primefaces 3.2。我在使用 Growl 时遇到问题，当我单击按钮时，我看不到任何咆哮声。这是我的代码：

*demarrageArretServices.xhtml*：

```
 <p:growl id="gr" showDetail="true" /> 
   <p:panel header="Etat du service Postfix" style="width:375px;height:200px;top:20px;left:20px;position:absolute;border-color:#66CCCC;border-style:solid;border-width:3px;">  
         <p:graphicImage value="/images/stop.png" style="top:4px;left:310px; position: absolute;width:30px;height:30px;"/>    
         <p:graphicImage value="/images/start.png" style="top:4px;left:340px; position: absolute;width:30px;height:30px;"/>
         <h:outputLabel value="Ce service est " style="top:70px;left:20px;position:absolute;font-size:17px;" />

         <p:commandLink id="ajax1" update="et1,bt1" actionListener="#{servicesBean.consulterEtatPostfix()}" style="top:70px;left:140px;position:absolute;font-size:17px;" >  
              <h:outputText value="actuellement" />  
         </p:commandLink>
         <h:outputText id="et1" value="#{servicesBean.etatPostfix}" style="font-style:italic;font-weight:bold;color:#66CCCC;top:68px;left:260px;position:absolute;font-size:19px;"/>

         <h:outputLabel value="Vous pouvez changer son état en cliquant" style="top:110px;left:20px;position:absolute;font-size:17px;" />
         <h:outputLabel value="sur" style="top:160px;left:20px;position:absolute;font-size:17px;" />

         <p:commandButton id="bt1" value="#{servicesBean.boutonPostfix}" actionListener="#{servicesBean.changerEtatPostfix()}" update="gr" style="top:150px;left:70px;position:absolute;font-size:16px;width:100px;height:35px;" />    

   </p:panel>

   <p:panel header="Etat du service Cyrus-Imap" style="width:375px;height:200px;top:170px;left:220px;position:absolute;border-color:#66CCCC;border-style:solid;border-width:3px;">
         <p:graphicImage value="/images/stop.png" style="top:4px;left:310px; position: absolute;width:30px;height:30px;"/>    
         <p:graphicImage value="/images/start.png" style="top:4px;left:340px; position: absolute;width:30px;height:30px;"/>
         <h:outputLabel value="Ce service est" style="top:70px;left:20px;position:absolute;font-size:17px;" />

          <p:commandLink id="ajax2" update="et2,bt2" actionListener="#{servicesBean.consulterEtatCyrus()}" style="top:70px;left:140px;position:absolute;font-size:17px;" >  
              <h:outputText value="actuellement" />  
         </p:commandLink>
         <h:outputText id="et2" value="#{servicesBean.etatCyrus}" style="font-style:italic;font-weight:bold;color:#66CCCC;top:68px;left:260px;position:absolute;font-size:19px;"/>

         <h:outputLabel value="Vous pouvez changer son état en cliquant" style="top:110px;left:20px;position:absolute;font-size:17px;" />
         <h:outputLabel value="sur" style="top:160px;left:20px;position:absolute;font-size:17px;" />

         <p:commandButton id="bt2" value="#{servicesBean.boutonCyrus}" actionListener="#{servicesBean.changerEtatCyrus()}" update="gr" style="top:150px;left:70px;position:absolute;font-size:16px;width:100px;height:35px;" />    

   </p:panel>
        </h:form> 
```

*服务Bean.java*：

```
import javax.faces.application.FacesMessage;  
import javax.faces.context.FacesContext;
public void changerEtatPostfix ()
    {

        if (boutonPostfix.equals("arrêter"))
        {
            executerCommande ("rcpostfix stop");
            FacesMessage msg = new FacesMessage("Succès", "Postfix est arrêté ");    
            FacesContext.getCurrentInstance().addMessage(null, msg);
        }
        else
        {   
            executerCommande ("rcpostfix start");
            FacesMessage msg = new FacesMessage("Succès", "Postfix est démarré");    
            FacesContext.getCurrentInstance().addMessage(null, msg );
        }
    }
public void changerEtatCyrus ()
    {

        if (boutonCyrus.equals("arrêter"))
        {
            executerCommande ("rccyrus stop");
            FacesMessage msg = new FacesMessage("Succès", "Cyrus-IMAP est arrêté ");    
            FacesContext.getCurrentInstance().addMessage(null, msg);
        }

        else
        {
            executerCommande ("rccyrus start");
            FacesMessage msg = new FacesMessage("Succès", "Cyrus-IMAP est démarré");    
            FacesContext.getCurrentInstance().addMessage(null, msg);
        }
    }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T08:28:32.863

您要么需要从命令按钮更新咆哮组件，要么可以使用在每次 ajax 请求/响应后`autoUpdate=true`更新的属性：`p:growl`

```
<p:growl id="messages" autoUpdate="true"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T03:05:49.890

确保您在表单标签内

```
<h:form id="form">
    <p:growl id="gr" showDetail="true" /> 

...

</h:form> 
```

# php - sql LIKE 遇到问题

> ID：10940861
> 
> 赞同：1
> 
> 时间：2012-06-07T22:41:45.357
> 
> 标签：php, mysql, sql

我有以下查询：

```
SELECT * FROM `alerts` WHERE `title` LIKE `%template%` 
```

这应该返回至少 3 个标题包含“模板”一词的结果，但我收到以下错误：-

# 1054 - 'where 子句'中的未知列'%template%'

据我所知，它的语法正确并调用了正确的列名。我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T22:42:30.750

`%template%`对:使用单引号

```
SELECT * FROM `alerts` WHERE `title` LIKE '%template%' 
```

# python - 标准库中是否有对 Python inspect.getcallargs 的逆操作？

> ID：10940871
> 
> 赞同：5
> 
> 时间：2012-06-07T22:42:36.307
> 
> 标签：python

有没有办法从返回值返回`inspect.getcallargs(func)`到`*args, **kw`实际可用于调用的对`func`？

用例：假设我正在编写一个装饰器，并且我想通过名称更改函数的特定参数。这是执行此操作的一些代码的开头：

```
@fix_x
def a(x):
    print x

@fix_x
def b(**q):
    print q['x']

def fix_x(func):
    def wrapper(*args, **kw):
        argspec = inspect.getargspec(func)
        callargs = inspect.getcallargs(func, *args, **kw)
        if 'x' in callargs:
            callargs['x'] += 5
        elif 'x' in callargs[argspec.keywords]:
            callargs[argspec.keywords]['x'] += 5
        # ...and now I'd like a simple way to call func with callargs...? 
```

（实际上，在构建它们和想要与它们通话之间，我正在对 callargs 做一些更精细的事情，但这应该让我知道我在寻找什么。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T22:49:55.257

不，目前没有很好的方法来做到这一点，但是它正在为 Python 3.3 工作！

请参阅[PEP 362 -- 函数签名对象](http://www.python.org/dev/peps/pep-0362/)以了解此新功能将如何工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T05:43:01.320

我已经编写了自己的代码来（或多或少）做到这一点。它`ArgSpec.make_call_args`位于[https://github.com/codemage/wmpy](https://github.com/codemage/wmpy)

语义略有不同；也就是说，它仍然会将任何未知的 args 分流到 **kw，而不是接受以 **kw 参数命名的单独条目字典，但如果我需要，这很容易更改。

稍加努力，这可能会变成[PEP 362](http://www.python.org/dev/peps/pep-0362/)到 Python 2.7 的相当完整的“反向移植”（用引号引起来，因为它显然不会共享代码）。它不执行仅关键字参数，但无论如何这些在 2.x 中都不存在，因此不会影响 API 的完整性，并且检查模块提供所有其他重要的机制。

# entity-framework - 单元测试 EF - 如何从 BL 中提取 EF 代码？

> ID：10940873
> 
> 赞同：2
> 
> 时间：2012-06-07T22:42:44.123
> 
> 标签：entity-framework, unit-testing

关于一件事，我已经阅读**了很多**（数十篇帖子）：

**如何对包含实体框架代码的业务逻辑代码进行单元测试。**

我有一个 3 层的 WCF 服务：

*   服务层
*   业务逻辑层
*   数据访问层

我的业务逻辑将***DbContext***用于所有数据库操作。我所有的实体现在都是 POCO（以前是 ObjectContext，但我改变了它）。

我已经[在这里](https://stackoverflow.com/a/5610685/1335129)和[这里阅读了](https://stackoverflow.com/a/6768712/1335129)**Ladislav Mrnka 的**回答， 了解我们不应该**模拟**\ 伪造*DbContext*的原因。

 ***他说： *“这就是为什么我认为处理上下文/Linq-to-entities 的代码应该包含在集成测试中并针对真实数据库工作的原因。”*

并且： *“当然，您的方法在某些情况下有效，但单元测试策略必须在所有情况下都有效 - 要使其有效，您必须将 EF 和 IQueryable 完全从您的测试方法中移出。”*

我的问题是 - 你是如何做到这一点的？？？

```
public class TaskManager
{
    public void UpdateTaskStatus(
        Guid loggedInUserId,
        Guid clientId,
        Guid taskId,
        Guid chosenOptionId,
        Boolean isTaskCompleted,
        String notes,
        Byte[] rowVersion
    )
    {
        using (TransactionScope ts = new TransactionScope())
        {
            using (CloseDBEntities entities = new CloseDBEntities())
            {
                User currentUser = entities.Users.SingleOrDefault(us => us.Id == loggedInUserId);
                if (currentUser == null)
                    throw new Exception("Logged user does not exist in the system.");

                // Locate the task that is attached to this client
                ClientTaskStatus taskStatus = entities.ClientTaskStatuses.SingleOrDefault(p => p.TaskId == taskId && p.Visit.ClientId == clientId);
                if (taskStatus == null)
                    throw new Exception("Could not find this task for the client in the database.");

                if (taskStatus.Visit.CustomerRepId.HasValue == false)
                    throw new Exception("No customer rep is assigned to the client yet.");
                TaskOption option = entities.TaskOptions.SingleOrDefault(op => op.Id == optionId);
                if (option == null)
                    throw new Exception("The chosen option was not found in the database.");

                if (taskStatus.RowVersion != rowVersion)
                    throw new Exception("The task was updated by someone else. Please refresh the information and try again.");

                taskStatus.ChosenOptionId = optionId;
                taskStatus.IsCompleted = isTaskCompleted;
                taskStatus.Notes = notes;

                // Save changes to database
                entities.SaveChanges();
            }

            // Complete the transaction scope
            ts.Complete();
        }
    }
} 
```

在附加的代码中，有一个来自我的业务逻辑的函数的演示。该函数有几次到数据库的“旅行”。我不明白如何将 EF 代码从这个函数*剥离*到一个单独的程序集中，以便我能够对这个函数进行**单元测试**（通过注入一些假数据而不是 EF 数据），并**集成测试**程序集包含“EF 函数”。

拉迪斯拉夫或其他人可以帮忙吗？

**[编辑]**

这是我的业务逻辑中的另一个代码示例，我不明白如何从我的测试方法中“移动 EF 和 IQueryable 代码”：

```
public List<UserDto> GetUsersByFilters(
    String ssn, 
    List<Guid> orderIds, 
    List<MaritalStatusEnum> maritalStatuses, 
    String name, 
    int age
)
{
    using (MyProjEntities entities = new MyProjEntities())
    {
        IQueryable<User> users = entities.Users;

        // Filter By SSN (check if the user's ssn matches)
        if (String.IsNullOrEmusy(ssn) == false)
            users = users.Where(us => us.SSN == ssn);

        // Filter By Orders (check fi the user has all the orders in the list)
        if (orderIds != null)
            users = users.Where(us => UserContainsAllOrders(us, orderIds));

        // Filter By Marital Status (check if the user has a marital status that is in the filter list)
        if (maritalStatuses != null)
            users = users.Where(pt => maritalStatuses.Contains((MaritalStatusEnum)us.MaritalStatus));

        // Filter By Name (check if the user's name matches)
        if (String.IsNullOrEmusy(name) == false)
            users = users.Where(us => us.name == name);

        // Filter By Age (check if the user's age matches)
        if (age > 0)
            users = users.Where(us => us.Age == age);

        return users.ToList();
    }
}

private   Boolean   UserContainsAllOrders(User user, List<Guid> orderIds)
{
    return orderIds.All(orderId => user.Orders.Any(order => order.Id == orderId));
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T10:08:18.903

如果你想对你的类进行**单元测试**`TaskManager`，你应该使用*存储库设计模式*并将诸如 UserRepository 或 ClientTaskStatusRepository 的存储库注入到这个类中。然后，您将使用这些存储库并调用它们的方法，而不是构造`CloseDBEntities`对象，例如：

```
User currentUser = userRepository.GetUser(loggedInUserId);
ClientTaskStatus taskStatus = 
    clientTaskStatusRepository.GetTaskStatus(taskId, clientId); 
```

如果你想对你的类进行**集成测试**`TaskManager`，解决方案要简单得多。您只需要`CloseDBEntities`使用指向测试数据库的连接字符串初始化对象即可。如何实现这一点的一种方法是将`CloseDBEntities`对象注入到`TaskManager`类中。

您还需要在每次集成测试运行之前重新创建测试数据库，并用一些测试数据填充它。这可以使用[Database Initializer](http://www.codeguru.com/csharp/article.php/c19999/Understanding-Database-Initializers-in-Entity-Framework-Code-First.htm)来实现。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-18T16:24:52.003

这里有几个误解。

第一：**存储库模式**。它不仅仅是用于单元测试的 DbSet 的外观！**该存储库是与域驱动设计的****聚合**和**聚合根**概念密切相关的模式**. 聚合是一组相互保持一致的相关实体。我的意思是业务一致性，而不仅仅是外键有效性。例如：一个客户下了 2 个订单，应该得到 5% 的折扣。因此，我们应该以某种方式管理与客户实体相关的订单实体数量与客户实体的折扣属性之间的一致性。对此负责的节点是聚合根。它也是唯一可以从聚合外部直接访问的节点。存储库是一个实用程序，用于从某些（可能是持久的）存储中获取聚合根。**

 **一个典型的用例是创建一个 UoW/Transaction/DbContext/WhateverYouNameIt，从存储库中获取**一个**聚合根实体，在其上调用一些方法或通过从根遍历 Commit/SaveChanges/Whatever 访问其他一些实体。看，它与你的样品有多大不同。

第二：**业务逻辑**。我已经向您展示了一个示例：一位客户下了 2 个订单，应该获得 5% 的折扣。相反：您的第二个代码示例不是业务逻辑。这**只是一个查询**。这段代码的职责是**从存储中获取一些数据**。在这种情况下，其背后的存储技术**确实**很重要。所以我会在这里推荐集成测试，而不是在与存储交互时假装存储无关紧要是这个功能的唯一目的。

我还将把它封装在已经建议的**查询对象中。**然后 - 可以模拟这样的查询对象。不仅仅是它背后的 DbContext。整个QO。

第一个代码示例要好一些，因为它可能涉及一些业务逻辑，但这很难识别。这将我们引向第三个问题。

第三：**贫血领域模型**。您的域看起来不太面向对象。你有一些愚蠢的实体和交易脚本。有7个参数！那是纯粹的过程编程。

此外，在您的 UpdateTaskStatus 用例中 - 什么是聚合根？在你回答这个问题之前，首先是最重要的问题：你到底想做什么？那是……嗯……标记用户在被访问时完成的当前任务？比，也许客户实体中应该有一个方法 Visit() ？这个方法应该有这样的东西。CurrentTaskStatus.IsCompleted = true？那只是一个随机的猜测。如果我错过了，那将清楚地表明另一个问题。领域模型应该使用普遍存在的语言——对于程序员和企业来说是通用的。您的代码没有通用语言所赋予的那种表达能力。我只是不知道带有 7 个参数的 UpdateTaskStatus 中发生了什么。

如果您在实体中放置适当的表达方法来执行业务操作，这也将强制您根本不在那里使用 DbContext，因为您需要您的实体保持对持久性的无知。然后嘲笑的问题就消失了。您可以测试纯业务逻辑而无需担心持久性。

所以最后一句话：首先重新考虑你的模型。首先使用通用语言使您的 API 富有表现力。

*PS：请不要把我当成权威。我可能完全错了，因为我刚刚开始学习 DDD。******

# linq-to-xml - Linq-to-xml where or 子句

> ID：10940874
> 
> 赞同：1
> 
> 时间：2012-06-07T22:42:46.417
> 
> 标签：linq-to-xml, where-clause

我正在尝试在 xml 文件中查询搜索词的两个属性。

我有这个：

```
<?xml version="1.0" encoding="utf-8" ?>
<Products>
  <item ProductName="Golf Shirt" Content="This is a nice breathable shirt for golf." />
  <item ProductName="Bowling Ball" Content="This is a colorful 8-lbs ball." />
  <item ProdcutName="Tee Shirt" Content="100% cotton tee-shirt." />
</Products> 
```

我想查询搜索词的 ProductName 和 Content 属性值。

这是我的查询表达式：

```
var results = from node in _xDoc.Descendants("Item")
    where node.Attribute("Content").Value.Contains(searchTerm)
    where node.Attribute("ProductName").Value.Contains(searchTerm)
    select new SearchModel()
    {
    Name = node.Attribute("ProductName").Value,
    Url = "the url",
    Group = "Products"
    }; 
```

如果我的搜索词是“衬衫”，我应该返回“高尔夫衬衫”和“T 恤”，但我什么也得不到。我认为这是因为双重“where”子句正在创建和“and”表达式，我需要一个“or”表达式。如果我删除其中一个“where”子句，它就会起作用。

我试着放一个“||” 在第一个“where”子句之后，但这会产生错误。

如何为 Linq-to-Xml 实现“或 where”子句？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T22:48:42.927

你有没有尝试过这样的事情：

```
where ((string)node.Attribute("Content")).Contains(searchTerm) || ((string)node.Attribute("ProductName")).Contains(searchTerm) 
```

?

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T23:03:32.903

我想到了。这是我的解决方法。

```
var results = _xDoc.Descendants("Item")
    .Where(c => 
        (
            c.Attribute("ProductName").Value.ToLower().Contains(searchTerm.ToLower()) ||
            c.Attribute("Content").Value.ToLower().Contains(searchTerm.ToLower())
        )
     )
    .Select(c => new SearchModel()
         {
             Name = c.Attribute("ProductName").Value,
             Url = "the url",
             Group = "Products"
         }); 
```

# php - 如果在php中匹配条件，如何过滤数组递归

> ID：10940877
> 
> 赞同：0
> 
> 时间：2012-06-07T22:43:02.217
> 
> 标签：php, recursion, multidimensional-array

假设我有一个数组

```
array
   array
     key1 = 'hello im a text'
     key2 = true;
     key3 = '><><';
    array
      array
         key1 = 'hello another text'
         key2 = 'im a text too'
         key3 = false;
         array
            key1 = ')(&#'
    array
    key1 = 'and so on' 
```

我怎样才能从上面的数组中得到类似下面的东西？

数组 1 => '你好，我是一个文本'; 2 => '你好另一个文本; 3 => '我也是一个文本'; 4 => '等等';

继承人我做了什么

```
$found = array();
function search_text($item, $key)
{
    global $found;
    if (strlen($item) > 5)
    {
        $found[] = $item;
    }
}
array_walk_recursive($array, 'search_text');
var_dump($found); 
```

但不知何故它不起作用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T23:01:38.137

尝试类似的事情：

```
function array_simplify($array, $newarray=array()) { //default of $newarray to be empty, so now it is not a required parameter
    foreach ($array as $i) { 
        if (is_array($i)) { //if it is an array, we need to handle differently
            $newarray = array_simplify($i, $newarray); // recursively calls the same function, since the function only appends to $newarray, doesn't reset it
            continue; // goes to the next value in the loop, we know it isn't a string
        }
        if (is_string($i) && strlen($i)>5) { // so we want it in the one dimensional array
            $newarray[] = $i; //append the value to $newarray
        }
    }
    return $newarray; // passes the new array back - thus also updating $newarray after the recursive call
} 
```

我的笔记：我没有测试过这个，如果有错误，请告诉我，我会尝试修复它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T23:13:03.577

像这样的东西应该工作，

作为我使用的条件

```
if(is_string($son)) 
```

为了获得一些结果，您可以根据需要进行调整

```
$input = <your input array>;
$output = array();

foreach($input AS $object)
{
    search_text($object,$output);
}

var_dump($output);

function search_text($object, &$output)
{
    foreach($object AS $son)
    {
        if(is_object($son))
        {
            search_text($son, $output);
        }
        else
        {
            if(is_string($son))
            {
                $output[] = $son;
            }
        }
    }
} 
```

描述：

`search_text`获取 2 个参数：`$object`和结果数组`$output`。

它检查 foreach 对象的属性是否为对象。

如果是，则需要检查该对象本身，

否则`search_text`检查输入是否为字符串，如果是则将其存储到`$output`数组中

# http - 什么时候设置 HTTP cookie？

> ID：10940879
> 
> 赞同：0
> 
> 时间：2012-06-07T22:43:09.197
> 
> 标签：http, cookies, browser

浏览器是在接收到 header 之后还是在接收到 body 之后设置 cookie？这与在请求正文中发送大文件时相关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T22:47:46.833

我认为浏览器会在处理响应标头时设置 cookie，因为 cookie 信息就在其中。接收标头，然后在处理 html 后设置 cookie 没有多大意义。

# c# - 将字节数组转换为字符串并打印到控制台

> ID：10940883
> 
> 赞同：78
> 
> 时间：2012-06-07T22:43:24.103
> 
> 标签：c#

```
public void parse_table(BinaryReader inFile)
{
    字节[] idstring = inFile.ReadBytes(6);
    Console.WriteLine(Convert.ToString(idstring));
}

```

这是一个简单的片段：读取文件的前 6 个字节并将其转换为字符串。

但是控制台显示`System.Byte[]`。

也许我使用了错误的类进行转换。我应该使用什么？它最终将解析以 UTF-8 编码的文件名，我计划使用相同的方法来读取所有文件名。

* * *

## 回答 #1

> 赞同：92
> 
> 时间：2012-06-07T22:48:27.860

其实是：

```
 Console.WriteLine(Encoding.Default.GetString(value)); 
```

或专门针对 UTF-8：

```
 Console.WriteLine(Encoding.UTF8.GetString(value)); 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2013-11-15T21:55:50.007

我处于困境，我有一个带**符号**字节数组 ( `sbyte[]`) 作为测试类的输入，`byte[]`为了简单起见，我想用普通字节数组 () 替换它。我通过谷歌搜索来到这里，但汤姆的回答对我没有用。

我写了一个辅助方法来打印给定的初始化程序`byte[]`：

```
public void PrintByteArray(byte[] bytes)
{
    var sb = new StringBuilder("new byte[] { ");
    foreach (var b in bytes)
    {
        sb.Append(b + ", ");
    }
    sb.Append("}");
    Console.WriteLine(sb.ToString());
} 
```

你可以像这样使用它：

```
var signedBytes = new sbyte[] { 1, 2, 3, -1, -2, -3, 127, -128, 0, };
var unsignedBytes = UnsignedBytesFromSignedBytes(signedBytes);
PrintByteArray(unsignedBytes);
// output:
// new byte[] { 1, 2, 3, 255, 254, 253, 127, 128, 0, } 
```

输出是有效的 C#，然后可以将其复制到您的代码中。

为了完整起见，这里是`UnsignedBytesFromSignedBytes`方法：

```
// http://stackoverflow.com/a/829994/346561
public static byte[] UnsignedBytesFromSignedBytes(sbyte[] signed)
{
    var unsigned = new byte[signed.Length];
    Buffer.BlockCopy(signed, 0, unsigned, 0, signed.Length);
    return unsigned;
} 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2017-07-07T00:32:29.750

我在我的代码库中使用了这个简单的代码：

```
static public string ToReadableByteArray(byte[] bytes)
{
    return string.Join(", ", bytes);
} 
```

要使用：

```
Console.WriteLine(ToReadableByteArray(bytes)); 
```

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2016-07-22T06:11:04.477

这只是 Jesse Webbs 代码的更新版本，它没有附加不必要的尾随`,`字符。

```
public static string PrintBytes(this byte[] byteArray)
{
    var sb = new StringBuilder("new byte[] { ");
    for(var i = 0; i < byteArray.Length;i++)
    {
        var b = byteArray[i];
        sb.Append(b);
        if (i < byteArray.Length -1)
        {
            sb.Append(", ");
        }
    }
    sb.Append(" }");
    return sb.ToString();
} 
```

此方法的输出将是：

```
new byte[] { 48, ... 135, 31, 178, 7, 157 } 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2018-05-02T07:52:40.260

```
 byte[] bytes = { 1,2,3,4 };

 string stringByte= BitConverter.ToString(bytes);

 Console.WriteLine(stringByte); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-11-16T14:06:19.060

**对于 linq 和字符串插值的一些乐趣：**

```
public string ByteArrayToString(byte[] bytes)
{
    if ( bytes == null ) return "null";
    string joinedBytes = string.Join(", ", bytes.Select(b => b.ToString()));
    return $"new byte[] {{ {joinedBytes} }}";
} 
```

**测试用例：**

```
byte[] bytes = { 1, 2, 3, 4 };
ByteArrayToString( bytes ) .Dump();
ByteArrayToString(null).Dump();
ByteArrayToString(new byte[] {} ) .Dump(); 
```

**输出：**

```
new byte[] { 1, 2, 3, 4 }
null
new byte[] {  } 
```

# facebook - 添加 Facebook 应用程序时“redirect_uri 不属于应用程序”

> ID：10940886
> 
> 赞同：1
> 
> 时间：2012-06-07T22:43:32.637
> 
> 标签：facebook

我正在尝试使用 url 将 Facebook 选项卡添加到页面：

[https://www.facebook.com/dialog/pagetab?app_id=256000XXXXXXX&display=popup&next=https://www.facebook.com/mypage](https://www.facebook.com/dialog/pagetab?app_id=256000XXXXXXX&display=popup&next=https://www.facebook.com/mypage)

但我得到了错误：

API 错误代码：191 API 错误描述：指定的 URL 不属于应用程序 错误消息：redirect_uri 不属于应用程序。

在我的设置中，所有 URL 都是正确的，包括应用程序域。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:51:14.990

Facebook 一定改变了一些东西，因为使用 url 'https://www.facebook.com/mypage' 不再有效。我需要使用“https://www.facebook.com”。

# objective-c - 表格单元格视图中的 IBAction 不会被触发

> ID：10940892
> 
> 赞同：1
> 
> 时间：2012-06-07T22:44:51.387
> 
> 标签：objective-c, nstableview, ibaction

我正在制作我的第一个 Mac OS X 应用程序，但遇到了一个问题。

我在链接到 NSArrayController 的窗口上创建了一个 NSTableView ，我想在停止编辑文本字段单元格后调用一个方法。所以我选择在结束编辑时调用一个动作，如下图所示：

![在此处输入图像描述](../Images/04b0b3bb8b720c00e6fd8e1511789df0.png)

之后，我为它创建了一个 IBAction：

它在我的 AppDelegate.h 中生成了这段代码：

```
- (IBAction)stopEditingHeaderNameCell:(id)sender; 
```

然后我在 AppDelegate.m 中编辑了 IBAction，以便在编辑单元格时显示 NSLog 消息：

```
- (IBAction)stopEditingHeaderNameCell:(id)sender
{
    NSLog(@"test");
} 
```

但是，当我通过按 Enter 或单击另一个元素来停止编辑单元格时，什么也没有发生。我已经尝试将此 IBAction 应用于 NSTextField 并且它运行良好，但是当应用于此文本字段单元格时它不会调用 IBAction。

谁能帮我解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T00:25:57.317

这不是您对表格视图中的文本字段单元格执行此操作的方式。您需要让您的应用委托表的委托（您可以在 IB 中连接它），然后实现 controlTextDidEndEditing:。当您结束编辑（通过跳出单元格或单击另一行或另一列）时，将调用此方法。

# javascript - 鼠标滚轮事件检测目前在 Firefox 中不起作用

> ID：10940896
> 
> 赞同：3
> 
> 时间：2012-06-07T22:45:13.013
> 
> 标签：javascript, jquery, mousewheel

出于某种原因，我在尝试识别 Firefox 中的鼠标滚轮事件时遇到了麻烦。这适用于 IE、Chrome、Safari、Opera，但不适用于 FF。我在 DOMMouseScroll 上附加了一个事件侦听器，它应该在 FF 中被识别。

[小提琴演示](http://jsfiddle.net/YU4JM/)

```
$(document).unbind('mousewheel DOMMouseScroll').on('mousewheel DOMMouseScroll', function(e) {
    var evt = event || e || window.event;
    var delta = evt.detail < 0 || evt.wheelDelta > 0 ? 1 : -1;

    if (delta < 0) {
        // scroll down
    } else {
        // scroll up
    }
}); 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-07T23:04:43.657

您的代码在控制台中生成错误。该行：

```
var evt = event || e || window.event; 
```

是不正确的; 范围内没有“事件”变量。您可以直接使用“e”。jQuery 代码将确保您的处理程序将事件参数作为参数获取。或者：

```
$(document).unbind('mousewheel DOMMouseScroll').on('mousewheel DOMMouseScroll', function(evt) {
    var delta = evt.detail < 0 || evt.wheelDelta > 0 ? 1 : -1;

    if (delta < 0) {
        // scroll down
    } else {
        // scroll up
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-02-13T16:06:28.707

这段代码救了我的命.. 适用于 Chrome、Firefox、Edge、Internet Explorer、Opera...

```
window.addEventListener('wheel', function(event){
if(event.deltaY < 0){
// wheeled up
}
else {
// wheeled down
}
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-02T23:52:20.350

这似乎适用于 Safari、Chrome 和 Firefox（我没有在 IE 中测试过）：

```
// For Chrome
window.addEventListener('mousewheel', mouseWheelEvent);

// For Firefox
window.addEventListener('DOMMouseScroll', mouseWheelEvent);

function mouseWheelEvent(e) {
  var delta = e.wheelDelta ? e.wheelDelta : -e.detail;
}
```

来自： http: [//www.h3xed.com/programming/javascript-mouse-scroll-wheel-events-in-firefox-and-chrome](http://www.h3xed.com/programming/javascript-mouse-scroll-wheel-events-in-firefox-and-chrome)

# maven - 在嵌入式 tomcat 中热部署战争 maven 项目

> ID：10940897
> 
> 赞同：0
> 
> 时间：2012-06-07T22:45:16.240
> 
> 标签：maven, hotdeploy, maven-tomcat-plugin

我有 Maven 战争项目。

我知道就地。它部署到给定的服务器。但我想部署在嵌入式 tomcat 上，不想每次都重新启动。说啊

第一次运行部署

然后更改一些java类并说重新部署。全部在嵌入式tomcat中。

这可能吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T01:34:27.183

[Tomcat Maven 插件](http://tomcat.apache.org/maven-plugin-2/run-mojo-features.html)可以帮助解决这个问题吗？

您可以使用命令来使用它`tomcat:run`

[本页](http://tomcat.apache.org/maven-plugin-2/index.html)描述了如何设置您的 POM/设置以更轻松地调用插件（使用前缀与必须在命令行上使用插件的完整 groupId/artifactId）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T13:50:53.517

也许你可以看看可执行的 war/jar 功能，请参阅[http://tomcat.apache.org/maven-plugin-2/executable-war-jar.html](http://tomcat.apache.org/maven-plugin-2/executable-war-jar.html) 这样将生成一个包含 tomcat 类的简单 jar。您将能够简单地运行：java -jar pathtofile.jar。

# android - 将声音加载到要随机播放的数组中

> ID：10940900
> 
> 赞同：1
> 
> 时间：2012-06-07T22:45:29.973
> 
> 标签：android, andengine

我正在尝试将 9 个声音文件加载到一个数组中，以便在我的精灵执行动画时可以以某个值（1 到 9）播放它们。

到目前为止，我已经使用 AndEngine SoundFactory 创建了声音。

```
this.mGrondin1 = SoundFactory.createSoundFromAsset(this.mEngine.getSoundManager(), getApplicationContext(), "Earn my pay.wav");
this.mGrondin2 = SoundFactory.createSoundFromAsset(this.mEngine.getSoundManager(), getApplicationContext(), "Spaghetti code.wav");
this.mGrondin3 = SoundFactory.createSoundFromAsset(this.mEngine.getSoundManager(), getApplicationContext(), "Business major.wav");
this.mGrondin4 = SoundFactory.createSoundFromAsset(this.mEngine.getSoundManager(), getApplicationContext(), "Microsoft code.wav");
this.mGrondin5 = SoundFactory.createSoundFromAsset(this.mEngine.getSoundManager(), getApplicationContext(), "How I would do it.wav");
this.mGrondin6 = SoundFactory.createSoundFromAsset(this.mEngine.getSoundManager(), getApplicationContext(), "Not efficient.wav");
this.mGrondin7 = SoundFactory.createSoundFromAsset(this.mEngine.getSoundManager(), getApplicationContext(), "Flying Blind.wav");
this.mGrondin8 = SoundFactory.createSoundFromAsset(this.mEngine.getSoundManager(), getApplicationContext(), "Minus two.wav");
this.mGrondin9 = SoundFactory.createSoundFromAsset(this.mEngine.getSoundManager(), getApplicationContext(), "Turn off your life.wav"); 
```

现在我想将它们全部加载到一个易于访问的形式中，比如一个数组。我怎样才能做到这一点？

**更新** 我没有创建一大堆声音并尝试将它们加载到一个数组中，而是简单地创建了一个声音数组并将所有文件加载到其中。

```
 for (int i = 0; i < arSounds.length; i++) {
            this.arSounds[i] = SoundFactory.createSoundFromAsset(
                    this.mEngine.getSoundManager(),
                    getApplicationContext(), "Grondin" + (i + 1) + ".wav");
        } 
```

这会将它们全部加载到 arSounds 数组中。然后对于随机播放我做了

```
 Random gen;
    arSounds[gen.nextInt(8)].play(); 
```

# ruby-on-rails - Mongoid：从两个集合中查询并按日期排序

> ID：10940904
> 
> 赞同：0
> 
> 时间：2012-06-07T22:45:57.797
> 
> 标签：ruby-on-rails, mongodb, pagination, mongoid

我目前在 Rails 应用程序中有以下控制器方法：

```
def index
  @entries = []
  @entries << QuickPost.where(:user_id.in => current_user.followees.map(&:ff_id) << current_user.id)
  @entries << Infographic.where(:user_id.in => current_user.followees.map(&:ff_id) << current_user.id)
  @entries.flatten!.sort!{ |a,b| b.created_at <=> a.created_at }

  @entries = Kaminari.paginate_array(@entries).page(params[:page]).per(10)
end 
```

我意识到这非常低效，所以我正在寻找一种更好的方法来实现相同的目标，但我是 MongoDB 的新手，想知道最好的解决方案是什么。

有没有办法在 MongoDB 中跨两个集合进行排序的 limit() 查询或 MapReduce 函数？我猜没有，但在这种情况下肯定会节省很多精力！

我目前在想我有两个选择：

1.  创建一个主 'StreamEntry' 类型模型，并让 Infographic 和 QuickPost 都继承自该模型，以便将两种数据类型存储在同一个集合中。这个问题是我有现有数据，我不知道如何将它从旧集合移动到新集合。
2.  使用 Streama (https://github.com/christospappas/streama) 之类的东西创建一个单独的 Stream/ActivityStream 模型。我在这里看到的问题是，它需要大量的前期工作，并且由于隐私设置和项目的编辑/删除，流需要经常重建。

有没有我忽略的选项？我是否过度设计了上述选项？对于这种情况，有哪些最佳实践？

任何信息将不胜感激，到目前为止我真的很喜欢 MongoDB，并希望避免在未来陷入这样的陷阱。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-08T08:32:42.157

继承解决方案很好，但是当继承的模型很接近时。例如 ：

```
class Post < BasePost
  field :body, type: String
end
class QuickPost < BasePost
end
class BasePost
  field :title, type: String
  field :created_at, type: Time
end 
```

但是当模型增长或差异太大时，您的第二个解决方案会更好。

```
class Activity
  include Mongoid::Document

  paginates_per 20

  field :occurred_at, :type => Time, :default => nil
  validates_presence_of :occurred_at

  belongs_to :user
  belongs_to :quick_post
  belongs_to :infographic

  default_scope desc(:occurred_at)
end 
```

例如：

```
class QuickPost
  include Mongoid::Document
  has_one :activity, :dependent => :destroy
end 
```

依赖销毁使活动在 QuickPost 被销毁时被销毁。您可以使用 has_many 并进行调整。

要创建活动，您可以创建一个观察者：

```
class ActivityObserver < Mongoid::Observer
  observe :quick_post, :infographic

  def after_save(record)
    if record.is_a? QuickPost
      if record.new_record?
        activity = record.build_activity
        activity.user = record.user
        # stuff when it is new
      else
        activity = record.activity
      end
      activity.occurred_at = record.occurred_at
      # common stuff
      activity.save
    end
  end
end 
```

# api - 可发现 URL 的 Flattr API 调用

> ID：10940905
> 
> 赞同：0
> 
> 时间：2012-06-07T22:46:03.603
> 
> 标签：api, url, flattr

你知道如何为可发现的 URL 进行 API 调用吗？我可以做类似的事情：

```
http://flattr.com/submit/auto?url='PUT_URL_HERE' 
```

没有任何额外的数据，如 user_id 等？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T13:25:47.337

Flattr API 中有一个端点来查找有关 URL 的信息。端点是[https://api.flattr.com/rest/v2/things/lookup](https://api.flattr.com/rest/v2/things/lookup)。`url`您使用包含您想了解更多信息的 URL的附加参数执行 GET 请求。

例子：

请求>
`GET /rest/v2/things/lookup?url=http://smgt.me`

回应>
`HTTP/1.1 302 Redirect
Location: https://api.flattr.com/rest/v2/things/435836
{"message":"found","location":"https:\/\/api.flattr.com\/rest\/v2\/things\/435836"}`

在查找资源中，您还可以找到有关自动提交 URL 的信息。[有关开发文档中查找资源的](http://developers.flattr.net/api/resources/things/#check-if-a-thing-exists)更多信息。另一方面，如果您想尝试 Flattr 一个 URL（常规 URL 和自动提交 URL），您可以查看[flattr 资源文档](http://developers.flattr.net/api/resources/flattrs/#flattr-a-url)。更多关于[自动提交 URL](http://developers.flattr.net/auto-submit/)的信息也可以在开发者文档中找到。

# wordpress - 如何在 Wordpress 中回复 100% 的 the_post？

> ID：10940907
> 
> 赞同：3
> 
> 时间：2012-06-07T22:46:13.893
> 
> 标签：wordpress, loops

所以我查询帖子，我取回所有匹配的内容，然后执行我的循环 - 但我想在每个循环上执行某种 print_r 类型的事情，这样我就可以看到 100% 的数据正在被获取。我这里完全脑残了..救命！

这是我的查询，然后是我的循环：

```
<?php query_posts('post_type=property'); ?>

<?php while (have_posts()) : the_post(); ?>
<?php endwhile; ?> 
```

只是无法弄清楚如何回显通过循环的每次迭代获取的 100% 的内容？

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-07T22:50:37.650

它必须使用循环吗？如果没有，那么我会尝试：

```
<? $posts_array = get_posts('post_type=property');
print_r($posts_array); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T14:41:24.160

在你的循环内

`print_r($post);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-08-30T12:07:24.463

我喜欢将以下内容添加到我想要查看输出的任何单个 php 页面的顶部...

```
<?php global $post; var_dump($post);die;?> 
```

并在循环中：-

```
the_post();
global $post; 
print_r($post); 
```

# windows-phone-7 - 在 Windows Phone 7 中使用待办事项列表

> ID：10940911
> 
> 赞同：1
> 
> 时间：2012-06-07T22:46:41.043
> 
> 标签：windows-phone-7

有什么方法可以使用 WP7 中的内置待办事项列表吗？我注意到，如果您在日历中显示您的待办事项，那么`Appointments.SearchASync()`它们也会带来它们，但没有主题或注释，这使得它几乎毫无用处。

我可以将我的手机链接到的在线服务也提供了一个开放的 API，这也是一个有效的解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T05:17:21.047

检查[日历（Live Connect API）](http://msdn.microsoft.com/en-us/library/live/hh826523.aspx)

我担心，目前，您无法通过 SDK 在 Windows Phone 7 中创建或编辑待办事项列表。

# bash - 为 Suricata 创建一个 Bash 初始化脚本

> ID：10940914
> 
> 赞同：3
> 
> 时间：2012-06-07T22:47:20.983
> 
> 标签：bash, init, intrusion-detection

我在我的 Fedora 14 系统上运行旧版本的“1.1”Suricata。它是通过 yum 安装的，因此由于我读过的一些问题，它没有可用的初始化脚本。是否有一种简单的方法可以在通用初始化脚本中包含以下内容，以便 suricata 在系统启动时自动启动。

感谢您的任何帮助/指导。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-07T22:57:43.303

试试这个大小：“称它为 suricata 并将其放在 /etc/init.d 目录中

```
#!/bin/bash
#
# Init file for suricata
#
#
# chkconfig: 345 52 48
# description: Network Intrusion Detection System
#
# processname: Suricata
# pidfile: /var/run/suricata.pid

source /etc/rc.d/init.d/functions

### Read configuration
[ -r "$SYSCONFIG" ] && source "$SYSCONFIG"

RETVAL=0
prog="suricata"
desc="Suricata IDS"

start() {
    echo -n $"Starting $desc ($prog): "

    daemon suricata -c /etc/suricata.yaml -i eth0 
    RETVAL=$?
    echo
    [ $RETVAL -eq 0 ] && touch /var/lock/subsys/$prog
    return $RETVAL
}

stop() {
    echo -n $"Shutting down $desc ($prog): "
    killproc $prog
    RETVAL=$?
    echo
    [ $RETVAL -eq 0 ] && rm -f /var/lock/subsys/$prog
    return $RETVAL
}

restart() {
    stop
    start
}

case "$1" in
  start)
    start
    ;;
  stop)
    stop
    ;;
  restart)
    restart
    ;;
  reload)
    reload
    ;;
  condrestart)
    [ -e /var/lock/subsys/$prog ] && restart
    RETVAL=$?
    ;;
  status)
    status $prog
    RETVAL=$?
    ;;
  *)
    echo $"Usage: $0 {start|stop|restart|reload|condrestart|status}"
    RETVAL=1
esac

exit $RETVAL 
```

根据您的系统，我没有运行 Fedora 14，您可能需要提供 suricata 二进制文件的绝对路径。我的是 /usr/local/bin/suricata

您还应该考虑更新或至少从源代码编译，这为您提供了一个 make install-full 选项，现在可以为您完成所有这些工作，包括安装 init 脚本。您可以从[suricata open info sec 网站下载它](http://www.openinfosecfoundation.org/index.php/download-suricata)

# python - 控制标记选项等的matplotlib工具栏？

> ID：10940915
> 
> 赞同：0
> 
> 时间：2012-06-07T22:47:25.463
> 
> 标签：python, matplotlib

我 100% 确定，在过去，我见过一个带有按钮的 matplotlib 工具栏，该工具栏会弹出一个对话框，允许标记样式、线条颜色等以交互方式更改绘图。

这似乎非常有用，但它绝对不在[此处](http://matplotlib.sourceforge.net/users/navigation_toolbar.html)记录的当前标准工具栏中，我不记得我当时使用的是什么！

有没有人有什么想法？！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T11:56:21.447

正如 bmu 所说，在[Spyder](http://code.google.com/p/spyderlib/)中是可能的（据我所知，默认情况下是这样）。工具栏上有一个额外的按钮（绿色勾号），您可以在此处看到：

![在此处输入图像描述](../Images/75471985b8f6399d343a365a6c96502d.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T06:38:44.307

这个选项必须在 matplotlib 中的某个地方。当我使用带有工具栏的 matplotlib 小部件进行 GUI 时，“图形选项”按钮可用。如果我只使用 plot 命令，则缺少该按钮。编辑：我发现[http://matplotlib.1069221.n5.nabble.com/How-to-modify-the-navigation-toolbar-easy-in-a-matplotlib-figure-window-td39172.html](http://matplotlib.1069221.n5.nabble.com/How-to-modify-the-navigation-toolbar-easily-in-a-matplotlib-figure-window-td39172.html)。如果您将 matplotlibrc 中的后端更改为 Qt4Agg（“后端：Qt4Agg”），则会显示该按钮。

# jquery - JQuery 向上滑动悬停菜单

> ID：10940916
> 
> 赞同：0
> 
> 时间：2012-06-07T22:47:26.357
> 
> 标签：jquery, menu, hoverintent

我需要帮助让红色框下方的菜单向上滑动而不是向下滑动。 [http://www.radiofriendly.freehosting.com/jquery/menu.html](http://www.radiofriendly.freehosting.com/jquery/menu.html)

这是一个工作示例。只需将鼠标悬停在蓝色横幅下方的菜单上。 [https://partner.microsoft.com/germany/partner](https://partner.microsoft.com/germany/partner)

谁能告诉我我需要在js中修改什么才能实现这一点。请尽可能具体。我是 Jquery 的新手。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T23:28:35.660

我修改了jQuery菜单代码：

```
如果（opts.orientation == '水平'）{
        $this.find('.'+opts.dropDownClass).css('left', '0px').css('top', buttonHeight);
      }

```

对这个...

```
如果（opts.orientation == '水平'）{
        $this.find('.'+opts.dropDownClass).css('left', '0px').css('bottom', buttonHeight);
      }

```

然而，我没有看到@sachleen 做了什么改变。可能有更好的方法，我自己对 jQuery 很陌生。

# coldfusion - 在coldfusion中阻止垃圾邮件机器人

> ID：10940930
> 
> 赞同：0
> 
> 时间：2012-06-07T22:49:15.863
> 
> 标签：coldfusion, coldfusion-9, bots, spam, robot

我阻止了大量的机器人，除了来自搜索引擎的机器人，然后只允许 2 秒的会话管理。

但是，垃圾邮件机器人仍然能够绕过这些措施并创建大量“杀死”服务器的请求。

我已经阅读了这个网站上的其他文章，但似乎没有一个直接回答这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T00:02:55.783

我发现[CFSPAMProtect](http://cfformprotect.riaforge.org/)在阻止自动表单填充器方面非常有用。

它的垃圾邮件/垃圾邮件测试基于多项指标的总分，包括页面停留时间、鼠标移动（通过 JS）以及不应填写的经典隐藏表单字段（但由愚蠢的机器人填写） .

您可以分配自己的权重并通过电子邮件监控垃圾邮件捕获量，以便您定制事情。

它可以独立运行，也可以链接到一些第三方垃圾邮件工具，例如 Akismet。到目前为止，我发现它本身就足够了。

它是一个自定义标签，也很容易在现有表单中实现，这很好。

搏一搏...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T16:35:52.440

机器人的行为可能比人类快。您可以计算他们填写表格需要多长时间。任何不到一两秒的东西都是机器人。

机器人可能没有打开 JavaScript。你可以利用它来发挥你的优势。

您可以通过 css 隐藏一个链接（或不给它任何文本），该链接将机器人带到 bot.cfm 页面，然后可以设置会话值。

有一些开源项目，但我不记得它们的名字了。

CF10 新增了验证功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-09T00:49:42.777

Ben Nadel 在他的博客中写了一些关于蜘蛛/机器人的有用文章。

[http://www.bennadel.com/blog/1083-ColdFusion-Session-Management-And-Spiders-Bots.htm](http://www.bennadel.com/blog/1083-ColdFusion-Session-Management-And-Spiders-Bots.htm)

[http://www.bennadel.com/blog/154-ColdFusion-Session-Management-Revisited-User-vs-Spider-III.htm](http://www.bennadel.com/blog/154-ColdFusion-Session-Management-Revisited-User-vs-Spider-III.htm)

对于表单，我使用 <cfimage> 创建验证码图像。我发现将验证码短语填充到会话变量中可能会导致问题（但我不记得问题是什么）。因此，我现在使用 <cfencrypt> 在表单本身中包含一个加密短语。操作页面解密该短语并将其与用户在验证码表单字段中输入的内容进行比较。

# c# - Crystal 在 SetDataSource 中报告错误

> ID：10940940
> 
> 赞同：9
> 
> 时间：2012-06-07T22:50:19.137
> 
> 标签：c#, visual-studio-2010, crystal-reports-2008

我在 VS 2010 sap crystalreports 中遇到问题，使用 c# 制作 Windows 应用程序。

我使用以下代码收到以下错误：

```
 CrystalReport1 cr1 = new CrystalReport1();
 cr1.SetDataSource(dt1); //Error 
```

```
无法加载文件或程序集“file:///C:\Program Files (x86)\SAP BusinessObjects\Crystal Reports for .NET Framework 4.0\Common\SAP BusinessObjects Enterprise XI 4.0\win64_x64\dotnet1\crdb_adoplus.dll”或一个其依赖项。该系统找不到指定的文件。
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-08T03:49:30.597

尝试通过将 useLegacyV2RuntimeActivationPolicy 属性添加到您的 .config 文件来使用[此解决方案](http://social.msdn.microsoft.com/Forums/en/vscrystalreports/thread/5ae1b14e-ad6f-4093-baa2-a5d65a8a0bf0)

```
<startup useLegacyV2RuntimeActivationPolicy="true"> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-08T10:57:36.650

```
 <startup useLegacyV2RuntimeActivationPolicy="true" >
    <supportedruntime version="v4.0" sku=".NETFramework,Version=v4.0" />
 </startup> 
```

在 app.config 中添加此代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-07T22:54:30.087

您可能需要安装水晶报表运行时文件。您应该能够进行谷歌搜索以找到它们。错误消息非常明确地告诉您问题是缺少 .dll。阅读 ;）

编辑：尝试在您的机器上找到 crdb_adoplus.dll 并将其复制到应用程序目录。

# django - 使用环境变量测试 Django 视图

> ID：10940941
> 
> 赞同：2
> 
> 时间：2012-06-07T22:50:20.780
> 
> 标签：django, unit-testing

我开始为依赖于几个环境变量的 Django 应用程序编写测试。当我在 shell 中测试它时，我可以导入 os 并指定变量，我的测试工作得很好。但是，当我将它们放入tests.py 时，我仍然得到一个关键错误，因为没有找到这些变量。这是我的测试的样子：

```
from django.utils import unittest
from django.test.utils import setup_test_environment
from django.test.client import Client
import os

os.environ['a'] = 'a'
os.environ['b'] = 'b'

class ViewTests(unittest.TestCase):
    def setUp(self):
        setup_test_environment()

    def test_login_returning_right_template(self):
        """ get / should return login.html template """
        c = Client()
        resp = c.get('/')
        self.assertEqual(resp.templates[0].name, 'login.html') 
```

这是初始化这些变量的错误位置吗？我尝试在 setUp 上执行此操作，但结果相同 - 找不到它们。关于如何在运行测试套件之前初始化环境变量的任何建议？谢谢！卢卡

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-08T14:30:02.293

您不应该在您的观点中转达 os.envior。如果必须，请在 settings.py 中执行

```
MY_CUSTOM_SETTING = os.environ.get('a', 'default_value') 
```

在视图中使用设置变量：

```
from django.conf.settings import MY_CUSTOM_SETTING
print MY_CUSTOM_SETTING 
```

然后在您的测试中，您可以设置此设置：

```
from django.test import TestCase

class MyTestCase(TestCase):

    def test_something(self):
        with self.settings(MY_CUSTOM_SETTING='a'):
            c = Client()
            resp = c.get('/')
            self.assertEqual(resp.templates[0].name, 'login.html') 
```

# php - JQuery POST 值不更新数据库

> ID：10940944
> 
> 赞同：0
> 
> 时间：2012-06-07T22:50:35.640
> 
> 标签：php, ajax, jquery, wordpress

这是一个相对简单的 wordpress 插件，允许用户对列表中的项目进行投票。下面的代码应该执行以下操作：

1.  添加简码操作 [Working]
2.  创建表单以允许用户将新值发布到列表中（由短代码显示）[工作]
3.  处理表单值 [工作中]
4.  创建 Javascript 和 JQuery 以在某些点击时重新加载页面 [工作中]
5.  执行更新数据库的 AJAX 回调函数。**[不工作]**

JQuery 有一个成功函数，由事件触发。但是，没有新的值被发送到数据库，这让我相信其中一个有问题：A) POST 函数传递的变量，B) 检索 POST 值的 PHP，或 C) 对 AJAX 的调用功能。

我永远不知道在 JQuery 的 AJAX 函数中将引号和冒号放在哪里。我相信我正在尝试通过 POST 将“对象文字”传递给回调函数。我不知道为什么这不起作用。

代码如下：

```
/*
*
*
SHORTCODE
*
*
*/

add_shortcode('list-up-down', 'cb_lud_scfunc');

function cb_lud_scfunc() {
global $wpdb;
$cb_lud_prefix = $wpdb->prefix;
$cb_lud_table = $cb_lud_prefix . 'cb_list_up_down';
$cb_lud_homeurl = home_url();
$cb_lud_upimg = plugins_url('list-up-down/images/up-arrow.png', _FILE_);
$cb_lud_downimg = plugins_url('list-up-down/images/down-arrow.png', _FILE_);
$cb_lud_sample_query = $wpdb->query('SELECT * FROM '.$cb_lud_table);
$cb_lud_field1_name = $wpdb->get_col_info('name',1);
$cb_lud_field2_name = $wpdb->get_col_info('name',2);

/*
CREATE THE FORM
*/
//Create the form to allow users to add records
    $cb_lud_sc_form = '
        <form id="list-up-down-form" name="list-up-down-form" action="" method="post">
        <table border="0">
            <tr>
                <td><h2>'.$cb_lud_field1_name.':</h2><input id="field1_input" name="field1_input" type="text"></input></td>
                <td><h2>'.$cb_lud_field2_name.':</h2><input id="field2_input" name="field2_input" type="text"></input></td>
                <td valign="bottom"><input name="add_record" type="submit" value="Add Record" /></td>
            </tr>
        </table>
        </form>
        ';

/*
DEFINE HOW THE FORM HANDLES THE INPUT(S)
*/
$field1_data = htmlspecialchars($_POST['field1_input'], ENT_QUOTES);
$field2_data = htmlspecialchars($_POST['field2_input'], ENT_QUOTES);
$up_votes = 0;
$down_votes = 0;
$new_data = array(
    $cb_lud_field1_name => $field1_data,
    $cb_lud_field2_name => $field2_data,
    'up_votes' => $up_votes,
    'down_votes' => $down_votes,
    );
$format = array('%s', '%s', '%f', '%f');

if (isset($field1_data) && !empty($field1_data) && isset($field2_data) &&!empty($field2_data)) {
    $wpdb->insert(
        $cb_lud_table, $new_data, $format
    );
}

/*
DISPLAY THE LIST
*/          
//Get the list from the database, and set the variables for display in the output.
$get_list = $wpdb->get_results('SELECT entry_ID, '.$cb_lud_field1_name.' AS "field1", '.$cb_lud_field2_name.' AS "field2", up_votes, down_votes, up_votes - down_votes AS "total_votes"
    FROM '.$cb_lud_table.'
    GROUP BY entry_ID
    ORDER BY total_votes DESC
    ',OBJECT);

//Check if list is null, and if so, set a variable to display a warning. Otherwise, display the list.
if (empty($get_list)) {
    $cb_lud_sc_output .= "<em>Warning: You don't seem to have any records for this list. Why don't you add some now?</em>";
    $cb_lud_sc_output .= $cb_lud_sc_form;
    return $cb_lud_sc_output;
}
else {
    $cb_lud_sc_output .= $cb_lud_sc_form;
    $cb_lud_sc_output .= '</br>';
    $cb_lud_sc_output .= '<table id="cb_lud_list" border="1" cellpadding="10">';
    $cb_lud_sc_output .= '<tr><td align="center"><strong><a id="sort-by-field1" href="">'.$cb_lud_field1_name.'<a></strong></td><td align="center"><strong>'.$cb_lud_field2_name.'</strong></td><td align="center"><strong>Score</strong></td><td align="center"><strong>Vote Up/Down</strong></td></tr>';
        foreach ($get_list as $list_items) {
            $cb_lud_sc_output .= '<tr class="line-items-rows"><td>'.stripslashes($list_items->field1).'</td><td>'.stripslashes($list_items->field2).'</td><td>'.$list_items->total_votes.'</td><td><form id="up-down-arrows-form" action="" method="post"><input class="up-arrow" name="arrow-up-ID-'.$list_items->entry_ID.'" type="image" src="'.$cb_lud_upimg.'" value="'.$list_items->entry_ID.'"/>&nbsp;<input class="down-arrow" name="arrow-down-ID-'.$list_items->entry_ID.'" type="image" src="'.$cb_lud_downimg.'" value="'.$list_items->entry_ID.'"/></form></td></tr>';
            }
    $cb_lud_sc_output .= '</table>';
    return $cb_lud_sc_output;
}
};
/*
END SHORTCODE
*/

/*
*
*
JQUERY/AJAX for SHORTCODE
*
*
*/

/*
CREATE THE JAVASCRIPT/JQUERY
*/
//Create the function that triggers on shortcode.
add_action('cb_lud_scfunc', 'wp_enqueue_scripts');

function cb_lud_scripts(){

function cb_lud_action_javascript() {
?>
<script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js'></script>
<script type='text/javascript' >

$(document).ready(function(){
//JQuery for the submission of a new list item.
    $('input.[class$="-arrow"]').click(function(e){
        e.preventDefault(); //put e in function.
        var ajaxurl = '<?php echo admin_url('admin-ajax.php'); ?>';

        if ($(this).hasClass('up-arrow')) {
            var arrowdirection = 'up';
            var entry = $(this).val();
        }
        else if ($(this).hasClass('down-arrow')) {
            var arrowdirection = 'down';
            var entry = $(this).val();
        }

        var data = {
            action: 'cb_lud_arrow_action',
            arrow: arrowdirection,
            entryID: entry
        };

        $.ajax ({
            type: 'POST',
            url: ajaxurl,
            data: data,
            success: function(){
                alert('Thanks for the vote!'); //for debug. Alert is showing! Still not submitting data to database though.
                $('.line-items-rows').fadeOut('fast').delay(1000).fadeIn('fast');
            }
        });
});
});

</script>
<?php
//End Javascript function.  
}

//Call the javascript function
cb_lud_action_javascript();

/*
*
CREATE THE AJAX
*
*/

/*
ARROW CALLBACK
*/

if( is_admin() )
{
add_action('wp_ajax_cb_lud_arrow_action', 'cb_lud_arrow_callback');
add_action('wp_ajax_nopriv_cb_lud_arrow_action', 'cb_lud_arrow_callback');

}
else{
function cb_lud_arrow_callback(){       
    //Redefine basic variables
    global $wpdb;
    $cb_lud_prefix = $wpdb->prefix;
    $cb_lud_table = $cb_lud_prefix . 'cb_list_up_down';

    //New variables from POST
    $cb_lud_entry_id = $_POST['entry'];
    $cb_lud_arrow_direction = $_POST['arrowdirection'];

    if ($cb_lud_arrow_direction == 'up') {
        $wpdb->query('UPDATE '.$cb_lud_table.' SET up_votes=up_votes+1
        WHERE entry_ID='.$cb_lud_entry_id.'');
    }

    else if ($cb_lud_arrow_direction == 'down') {
        $wpdb->query('UPDATE '.$cb_lud_table.' SET down_votes=down_votes+1
        WHERE entry_ID='.$cb_lud_entry_id.'');
    }

die(); // this is required to return a proper result
}       
}
}
add_action('wp_enqueue_scripts','cb_lud_scripts'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T23:35:41.187

一个可行的解决方案是在 JQuery 脚本中将“ajaxurl”设置为页面 url：

```
var ajaxurl = '<?php echo the_permalink(); ?>'; 
```

然后将ajax中的url设置为相同：

```
var data = {
            action: 'cb_lud_arrow_action',
            arrow: arrowdirection,
            entryID: entry
        };
$.ajax ({
            type: 'POST',
            url: ajaxurl,
            data: data,
            success: function(data){
                alert('Thanks for the vote!'); //for debug. Alert is showing! Still not submitting data to database though.
                $('.line-items-rows').fadeOut('fast').delay(1000).fadeIn('fast');
            }
        }); 
```

这似乎有效，因为我希望 JQuery 仅在显示短代码时调用操作函数。因此，我将 JQuery 函数连接到简码中，以便它只在存在简码的页面上触发。

现在这些值正在更新到数据库中。

# mysql - mysql 合并一张表中的记录

> ID：10940948
> 
> 赞同：0
> 
> 时间：2012-06-07T22:50:38.250
> 
> 标签：mysql, select, join

我有一个使用 test# 作为主键的表。这是该表的样子：

```
Test# Name VerbalScore readingScore    Notes
  1   Bobby  92                       Good job
  2   Bobby                  40       You Suck Bobby 
```

问题是我想查看并能够查看同一个名字何时有多个口头分数（因此能够查看该人是否多次参加相同的测试）。

我想要某种选择语句来从上表中得到这个结果：

```
1   Bobby   92   40   Good job, You Suck Bobby 
```

那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T23:00:37.450

我不完全确定我理解“查看何时有多个口头分数”的意思，但是使用 mysql 5+，尝试

```
SELECT
   Name,
   GROUP_CONCAT(VerbalScore),
   GROUP_CONCAT(readingScore),
   GROUP_CONCAT(Notes)
FROM
   myTable
GROUP BY
   Name; 
```

[GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)是 mysql 特定的分组函数。

# c++ - C++11 初始化地图

> ID：10940951
> 
> 赞同：13
> 
> 时间：2012-06-07T22:50:50.433
> 
> 标签：c++, map, c++11

我正在尝试使用 C++11 语法初始化 STL 映射，但这似乎不起作用。初始化后，当我尝试访问元素时，它会尝试调用 Foo 的私有构造函数。我错过了什么？如果我使用它，它会起作用。我想知道是否可以使用 operator[] 来访问初始化值...

```
#include <map>
#include <string>

class Foo{
public:
    int a, b;
    Foo(int a_, int b_){
        a = a_;
        b = b_;
    }

private:
    Foo(){};
};

int main(){

    std::map<std::string, Foo> myMap = { {"1", Foo(10,5)}, {"2", Foo(5,10)} };
    int b  = myMap["1"].b;    // it tries to call private constructor of Foo.
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-06-07T22:58:52.457

在`operator[]`地图上使用 时，您可以使用运算符从地图中获取值或将值分配到地图中。为了将值分配到映射中，映射必须构造其值类型的对象，并通过引用返回它，以便您可以使用`operator=`覆盖现有对象。

因此，该类型必须是默认可构造的，以便可以创建一个新对象供您分配。

在运行时，如果键已经存在，则不会调用构造函数，但是编译器无法知道您是否会使用`operator[]`来访问不存在的值，因此它要求构造函数是公共的。

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-07T22:56:57.057

`operator[]`of map 要求类型是默认可构造的，因为如果不存在，它会创建一个新条目。

您可以`at()`改用，如果条目不存在则抛出：

```
int b  = myMap.at("1").b; 
```

# ios - 在没有服务提供商的情况下测试 GPS

> ID：10940955
> 
> 赞同：0
> 
> 时间：2012-06-07T22:51:11.043
> 
> 标签：ios

虽然我发现了一个针对 android 的问题（http://stackoverflow.com/questions/3189188/gps-location-without-service），但我找不到适用于 iOS 的问题，所以我想我会问的。特别是因为它似乎在 Android 中是可能的（见链接）。

我想知道是否有没有服务提供商的情况下获得位置。例如，我可以使用较旧的 iPhone 3GS，但显然不想支付任何费用来测试我的位置服务代码。

我在想，既然位置应该可以通过 WIFI 确定，那么唯一的区别可能就是 GPS 精度的提高。也许这就足够了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T22:57:52.020

你担心什么费用？如果是移动数据收费，那么只需关闭移动数据 - gps 仍然可以正常工作！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-09T23:11:41.943

实际上，我通过在 Apple 的 devforums 上发帖得到了答案。

基本上，定位服务独立于 GPS - 无论设备如何，API 都是相同的。

这是有道理的。从本质上讲，与实际基于 GPS 的位置的唯一区别是精度。

# jquery - 函数多次触发，因为第一个函数很慢

> ID：10940958
> 
> 赞同：0
> 
> 时间：2012-06-07T22:51:42.163
> 
> 标签：jquery, ajax, autocomplete

我正在尝试实现 jQuery 自动完成功能。

自动完成调用需要 500 毫秒来加载列表。在这 500 毫秒内，如果用户输入更多字符，自动完成功能会再次触发，从而导致重复列表。

如何将呼叫限制为仅发生一次？

-

在 Javascript 方面：

```
$(document).ready(function(){
    var url = "localhost/index.php?page=user&choice=getlist";
    $("#list").autocomplete({json_url:url,height:6});
}); 
```

在 PHP 方面：

```
$arr[] = array(//filled with array data );

print json_encode($arr); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T00:37:11.270

事实证明，我只需将 .js 文件中的参数“json_cache”移动到回调函数之外即可解决此问题。

# javascript - 从jquery中的iframe源访问组件？

> ID：10940959
> 
> 赞同：0
> 
> 时间：2012-06-07T22:51:47.437
> 
> 标签：javascript, jquery, iframe

我觉得这是我想念的简单的东西，但到目前为止我还没有找到解决方案。我有点像网络菜鸟，所以如果这个问题已经在某个地方得到了回答，我很抱歉，我错过了。

下面是我正在尝试做的一个示例。我在“example.php”中有输入（button_hide）和 div（box）组件，这是我想访问并在其上执行 jquery 功能的 iframe 的来源。

我在某处看到内容是从 iframe 访问它的方式，但这似乎不起作用。

任何帮助是极大的赞赏！

```
<iframe id="iframe" height="450" width="100%" frameBorder="0" src="example.php" />
<script>
$(document).ready(function(){

  $('#iframe').contents().find('#box').slideUp();
  var hideButton = $('#iframe').contents().find('#button_hide');

  hideButton.click(function(){
    alert('Hi');  
  });

});
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T23:00:08.620

您应该尝试使用[http://api.jquery.com/load-event/](http://api.jquery.com/load-event/)方法而不是准备好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-07T23:07:06.013

```
<iframe id="iframe" height="450" width="100%" frameBorder="0" src="example.php" />
<script>
$(document).ready(function(){

$('#iframe #box').slideUp();
var hideButton = $('#iframe #button_hide')

hideButton.click(function(){
alert('Hi');  
});

});
</script> 
```

这会奏效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-11T17:15:54.257

这最终成为 jquery 库无法正确导入的问题。感谢你的回答。

# javascript - SEO 和在同一页面上将重定向与 HREF 混合

> ID：10940960
> 
> 赞同：0
> 
> 时间：2012-06-07T22:51:52.453
> 
> 标签：javascript, redirect, seo, href

我目前工作的电子商务网站有几个办事处/网站（澳大利亚、加拿大、欧洲等），我们正在努力改造该网站，使其更符合 SEO 并提高我们在 Google 上的排名。最初我们有一个 Jquery 对话框弹出，询问用户他们的发货国家（通过下拉菜单），然后我们会确定商品将从哪个站点发货并将它们重定向到适当的站点文件夹（http://www. mydomain.com/en-ca 等）通过 Javascript

建议我们出于 SEO 目的更改此设置，并通过将它们包裹在 href 标记中列出我们运送到的所有国家/地区，并摆脱初始对话框。自从更改以来，我们的客户不小心进入了错误的站点，并在由于各个站点的库存差异而无法订购他们想要的东西时发起投诉。

我们现在正在考虑做一个门户页面，它是上述解决方案的混合版本。将我们的办公地点列为一个简单的 href，然后在其下方有一个“如果您的国家/地区未列出，请从下拉列表中选择它”，这将通过 javascript 将它们重定向到正确的站点。

我的问题是，将 javascript 与 href 一起重定向会损害我们的 SEO 吗？Google 的爬虫是否会查看下拉列表、看到重定向并停止其跟踪并拒绝爬取网站的其余部分？

我们几乎可以运送到世界任何地方，但根据用户的运送国家/地区，商品将来自哪个办公室并不明显。（例如，我们的加拿大地点就是包罗万象。如果有人说来自新西兰，那么他们应该在我们的澳大利亚办事处，但如果他们来自中国，他们会去我们的加拿大办事处。）

所有“站点”都在同一个域下，但在虚拟文件夹、mydomain.com/en-ca、mydomain.com/en-au 等下，并且共享相同的代码。（显然每个显示的股票会有所不同，货币也会相应改变）

[编辑] 在页眉的右上角，它表示发货国家，这将是用户选择的国家，不一定是用户所在的站点。这样做的目的是，如果用户选择中国并看到以加元为单位的价格，他们可以从正在显示的运输国家/地区看到它们位于正确的站点上。我们通过 javascript 函数跟踪他们的选择，以便在重定向之前设置 cookie，但后来我们更改了代码，将每个国家/地区作为带有查询字符串的 href，最终将设置发货国家/地区 cookie 以跟踪他们的选择。

最初该网站被编码为默认为加拿大，如果未设置发货国家 cookie，我们将向他们显示一个弹出窗口，要求他们选择。（一位外部顾问告诉我们要摆脱这个，因为谷歌将无法抓取该网站，尽管我不知道为什么会这样）自从摆脱最初的弹出窗口以来，我们已经有几个来自客户的投诉，他们没有意识到默认情况下他们在加拿大网站上，因为现在它并不那么明显（我们仍然显示运输国家，但它不像最初弹出窗口的原始设计那样直接）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-08T00:36:27.660

为什么需要使用 javascript 重定向？您可以将带有 href 的链接标签列表放入正确的站点。

您还可以使用地理定位功能来尝试检测用户位置。

另一种解决方案是将所有人送到加拿大商店，当他们第一次到达时打开一个弹出窗口询问他们的位置。然后，Google Bot 将首先看到加拿大商店。

# ruby-on-rails - 嵌入在 ruby 哈希中的平均值

> ID：10940976
> 
> 赞同：3
> 
> 时间：2012-06-07T22:53:58.997
> 
> 标签：ruby-on-rails, ruby, arrays, hash

我有一个嵌入式哈希，我需要计算平均值。我已经成功地将它们分组（来自未分组），但发现平均值对我不起作用

这是示例哈希数据

```
myhash = {"2011-02-15"=>[["2011-02-15", 10], ["2011-02-15", 60]], 
          "2011-02-22"=>[["2011-02-22", 22]], 
          "2011-02-28"=>[["2011-02-28", 110],["2011-02-28", 70]]} 
```

这是我对它们进行分组的方式（它们过去只是 {k => v} 未分组）

```
@r = @myhash.group_by(&:first) 
```

我从这个线程中尝试了两种解决方案（[在 Ruby 中平均数组中的集合的最佳方法是什么？](https://stackoverflow.com/questions/880268/whats-the-best-way-in-ruby-to-average-sets-in-an-array)），但都没有奏效。

好问题。我希望按日期对结果进行平均，这样我就可以这样提供它们。

```
[{"2012-02-15" => 35"}, {"2012-02-22" => 22"}, {"2012-02-28" => 90"}] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-07T23:08:53.237

```
Hash[myhash.map { |k,v| [k, v.map(&:last).inject(:+) / v.size] }]
#=> {"2011-02-15"=>35, "2011-02-22"=>22, "2011-02-28"=>90} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T01:57:07.300

在 Rails 中，`Array`类有一个`sum`方法。您可以按如下方式使用它：

**方法一**

```
{}.tap{ |h| myhash.each{ |date, list| h[date] = list.sum(&:last)/list.size} 
```

**方法二**

```
Hash[myhash.map{ |date, list| [date, list.sum(&:last)/list.size] }] 
```

# git - 如何从标签创建新分支？

> ID：10940981
> 
> 赞同：673
> 
> 时间：2012-06-07T22:55:08.527
> 
> 标签：git, git-branch, git-tag

我想从现有标签创建一个新的主分支。说我有一个标签`v1.0`。如何从此标签创建新分支？

* * *

## 回答 #1

> 赞同：1080
> 
> 时间：2012-06-07T22:57:40.197

哇，这比我想象的要容易：

```
git checkout -b newbranch v1.0 
```

* * *

## 回答 #2

> 赞同：127
> 
> 时间：2014-10-16T05:41:00.017

如果您只是想创建一个新分支而不立即更改它，您可以执行以下操作：

```
git branch newbranch v1.0 
```

* * *

## 回答 #3

> 赞同：98
> 
> 时间：2018-10-25T14:38:00.917

我使用以下步骤从标签创建新的修补程序分支。

**句法**

```
git checkout -b <New Branch Name> <TAG Name> 
```

步骤来做到这一点。

1.  `git checkout -b NewBranchName v1.0`
2.  更改 pom / release 版本
3.  阶段变化
4.  `git commit -m "Update pom versions for Hotfix branch"`
5.  最后将您新创建的分支推送到远程存储库。

```
git push -u origin NewBranchName 
```

我希望这会有所帮助。

* * *

## 回答 #4

> 赞同：18
> 
> 时间：2017-07-10T05:22:09.720

我已经解决了以下问题 1\. 从您的分支获取标签 2\. 编写以下命令

```
Example: git branch <Hotfix branch> <TAG>
    git branch hotfix_4.4.3 v4.4.3
    git checkout hotfix_4.4.3 
```

或者您可以使用其他命令

```
git checkout -b <Hotfix branch> <TAG>
-b stands for creating new branch to local 
```

一旦你准备好你的修补程序分支，是时候将该分支移动到 github，你可以通过编写下面的命令来做到这一点

```
git push --set-upstream origin hotfix_4.4.3 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2019-01-15T09:31:04.483

*如果我们想从同名*的标签创建分支，情况就会变得有点问题。

在这种情况下，以及在类似情况下，重要的是要知道：分支和标签实际上是目录中的单行文本文件`.git/refs`，我们可以使用下面的路径明确引用它们`.git`。分支在这里被称为“头”，让我们的生活更简单。

因此，`refs/heads/master`是`master`分支的真实、明确的名称。并且`refs/tags/cica`是名为 的标签的确切名称`cica`。

`cica`从名为的标签创建一个名为的分支的正确命令`cica`是：

```
git branch cica refs/tags/cica 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2020-07-28T20:28:18.587

在简单的用例中唯一适用于我的解决方案示例，我在分叉上，我想从主项目存储库（此处为上游）上的标记中签出新分支

```
git fetch upstream --tags 
```

给我吗

```
From https://github.com/keycloak/keycloak
   90b29b0e31..0ba9055d28  stage      -> upstream/stage
 * [new tag]    11.0.0     -> 11.0.0 
```

然后我可以从此标签创建一个新分支并在其上结帐

`git checkout -b tags/<name> <newbranch>`

```
git checkout tags/11.0.0 -b v11.0.0 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-04-02T06:54:05.137

我的分支列表（现在只有**master**）

[![分支列表](../Images/8e4fdded36d539199974cf3669453c53.png)](https://i.stack.imgur.com/Ncp23.png)

我的标签列表（有三个标签）

[![标签列表](../Images/30e67d424eda08909c0f3f0f940d4557.png)](https://i.stack.imgur.com/r1ugn.png)

从**opus_codec**标签切换到新的分支**功能/编解码器**

 **```
git checkout -b feature/codec opus_codec 
```

[![切换到分支](../Images/6e9babcdf3c34ac224b3d820343a6860.png)](https://i.stack.imgur.com/FesiL.png)**

# xcode - 任何人都可以让 Buck 和 Yacktman 编写的 Cocoa 设计模式中的代码工作吗？

> ID：10940982
> 
> 赞同：-2
> 
> 时间：2012-06-07T22:55:37.560
> 
> 标签：xcode, cocoa-design-patterns

我正在阅读 Buck 和 Yacktman 的《Cocoa Design Patterns》一书，看起来他们的示例代码已经过时了。当我尝试运行它时，xcode 说：“运行目标我的 Mac 64 位对于运行该方案无效。” 有没有一种简单的方法可以让代码运行？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-26T23:09:37.047

答案是将Build Settings中的Base SDK改为Latest Mac OS X

# django - Tastypie 有生成 API 密钥的辅助函数吗？

> ID：10940983
> 
> 赞同：10
> 
> 时间：2012-06-07T22:55:41.380
> 
> 标签：django, tastypie

我要做的是每当用户请求 API 密钥时——无论用户是否已经生成了一个——系统都会生成一个全新的密钥。

我知道，无论何时调用`ApiKey.objects.create()`都会为没有生成的用户生成一个 API 密钥。但是，如果用户*确实*有一个，那么尝试调用该`.create()`方法会引发错误。

在这种情况下，我认为最好编写自己的密钥生成器。但是，我现在希望这里的某个人可能知道一个帮助函数，它可以让我生成一个随机的 API 密钥，然后让我自己手动将它保存到数据库中。

有人可能知道任何这样的辅助功能吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-12-15T21:11:58.517

或者，您可以使用 sweetpie 的内置命令：

```
python manage.py backfill_api_keys 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-07T23:27:27.450

我想到了。

首先，您尝试获取用户的 API 密钥。如果存在，则不会抛出错误。要重新生成，请将检索到的用户密钥的值设置为`None`，然后保存密钥。

如果抛出错误，则只需创建一个新密钥。

```
try:
    api_key = ApiKey.objects.get(user=someuser)
    api_key.key = None
    api_key.save()

except ApiKey.DoesNotExist:
    api_key = ApiKey.objects.create(user=someuser) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-07T23:38:07.553

是的，生成密钥的代码被定义为一个[`ApiKey.generate_key()`](https://github.com/toastdriven/django-tastypie/blob/master/tastypie/models.py#L49)可以直接使用的实例方法。

这是一个更简单的版本，它消除了用户是否已经存在的一些猜测并`ApiKey.generate_key()`直接使用，而不是隐式 through `ApiKey.save()`，我相信这可以更清楚地了解要完成的工作：

```
api_key = ApiKey.objects.get_or_create(user=someuser)
api_key.key = api_key.generate_key()
api_key.save() 
```

**更新：**

因此，最短的版本是：

```
return ApiKey.objects.get_or_create(user=someuser)[0].key 
```

这将生成一个新密钥或返回一个现有密钥。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-12-28T07:51:41.353

根据 Filip Dupanović 的回答，我的工作代码是这样的：

```
user = get_user_model().objects.get(email="some@email.com")
api_key = ApiKey.objects.get_or_create(user=user)
api_key[0].key = api_key[0].generate_key()
api_key[0].save() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-08T07:08:56.290

它总是太容易使用内置功能。`Tastypie`使用`create_api_key`Tastypie ApikeyAuthentication` 的 " "生成 Api 密钥`s`。

您只需导入“ `create_api_key`” `tastypie.models` ，然后按您的`django-signal`要求或按您的要求调用它。

IE

```
signals.post_save.connect(create_api_key, sender=User) 
```

在以下位置进行了详细且更容易的解释：

[http://django-tastypie.readthedocs.org/en/latest/authentication.html#apikeyauthentication](http://django-tastypie.readthedocs.org/en/latest/authentication.html#apikeyauthentication)

# asp.net - 在哪里存储加密密钥 MVC 应用程序

> ID：10940985
> 
> 赞同：11
> 
> 时间：2012-06-07T22:55:47.230
> 
> 标签：asp.net, asp.net-mvc-3, encryption, encryption-symmetric

我正在使用一个 AES 加密/解密类，它需要一个键值和向量值来加密和解密 MVC3 应用程序中的数据。

在保存记录时，我将数据加密，然后存储在数据库中。当我检索记录时，我正在控制器中解密并将未加密的值传递给视图。

关注的不是在数据穿越网络时保护数据，而是在数据库受到损害时保护它。

我读过很多帖子说不要把加密密钥放在你的代码中。

好的，那么它们应该保存在哪里？文件系统？另一个数据库？

寻找一些方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-08T09:34:05.807

常识说，如果入侵者可以访问您的数据库，他们很可能也可以访问您的文件系统。这真的取决于你。一方面，您可以尝试隐藏它。在配置文件中，在文件系统中某处的普通文件中，使用应用程序中的另一个密钥对其进行加密......等等。

配置文件是一个合乎逻辑的答案，但为什么要冒险 - 混合它。随意将密钥与多级加密混合 - 一个需要记录本身的某些内容并且对每条记录都是唯一的，另一个需要配置值，第三个需要特定于应用程序的值，也许第四个来自隐藏的库在您的应用程序的参考范围内？这样，即使某一层以某种方式受到损害，您也会有其他几个保护它。

是的，它增加了开销。是的，它相对昂贵。但是，如果您拥有用户信用卡详细信息等敏感数据，是否值得？你打赌它是。

我在我的一个个人宠物项目中使用了类似的加密和散列技术，该项目高度关注安全性并受到严格控制。这取决于您在任何时候需要显示多少数据 - 例如，我的一次只能获取 10 条记录，很可能甚至更少。

... 指定混合的含义：加密一次。然后使用不同的密钥和建议的不同算法再次加密该数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T09:38:16.297

我会使用**受 ACL 保护的注册表项**，因此只有运行您的应用程序池的帐户才能读取它们。

# php - CMS 应用程序中的 foreach 语句失败，错误消息显示参数无效

> ID：10940986
> 
> 赞同：1
> 
> 时间：2012-06-07T22:55:56.283
> 
> 标签：php

在我正在处理的 CMS 中，我使用 foreach 语句来显示返回的数据库结果。

但是每次页面加载我都会收到一条错误消息，说我使用的 foreach 语句有一个无效的参数

这是声明

```
 <?php foreach ( $presults as $post ) {  ?>

        <!-- Post Frames -->

            <div class="outerPost_frame">

                <div class="postScreen"> 

                    <!--post date hidden show on hover -->
                    <span class="date_">
                        <p><?php echo date('j F', $post->date) ?></p>
                    </span>

                    <!-- post title -->
                    <span class="name_">
                        <p><?php echo htmlspecialchars($post->name) ?></p>
                    </span>

                    <span class="content_">
                        <?php echo $results['post']->content ?>
                    </span>    

                </div>
            </div>

    <?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-07T22:58:37.840

尝试将 $presults 转换为数组。

```
<?php foreach ( (array) $presults as $post ) {  ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T00:33:48.397

你如何设置你的阵列，可能是个问题，但我们需要一个错误消息来确定。

试试这个

```
<?php foreach ( $presults as $post ) {  ?>

    <!-- Post Frames -->

        <div class="outerPost_frame">

            <div class="postScreen"> 

                <!--post date hidden show on hover -->
                <span class="date_">
                    <p><?php echo date('j F', $post[date]) ?></p>
                </span>

                <!-- post title -->
                <span class="name_">
                    <p><?php echo htmlspecialchars($post[name]) ?></p>
                </span>

                <span class="content_">
                    <?php echo $post[content] ?>
                </span>    

            </div>
        </div>

<?php } ?> 
```

# asp.net - 404 处理 - 本地 ASP.Net (C# 4) 和远程服务器 (live) 之间的区别

> ID：10940987
> 
> 赞同：1
> 
> 时间：2012-06-07T22:56:10.477
> 
> 标签：asp.net, error-handling, http-status-code-404

我面临一个问题：我确实想用 ASP.Net 进行 URL 重写

它使用我的本地设置可以完美运行，但是一旦在服务器上它就无法按预期工作。

**当地的**

对 /unavailable-file.aspx 的请求在 Application_Error (Global.asax.cs) 中运行良好，然后被重定向到 /404.aspx 对 /unavailable-random-folder 或任何其他文件的请求在 Application_Error (Global.asax.cs) 中运行良好asax.cs)，然后被重定向到 /404.aspx

**远程** 对 .aspx 文件的任何请求都将在 Application_Error 中被捕获 每个其他请求（.jpg、文件夹等）根本不会被捕获并引发默认的 404 页面错误

我的问题：

昨天我正在将我的新网站安装到服务器上，我看到 Application_BeginRequest 甚至没有在我的服务器上被触发，而每次（对于请求的每个文件或文件夹）都是在我的本地计算机（使用 Visual Studio）中。我必须创建一个 HttpModule，现在我成功地触发了事件……**但不是针对非 .aspx 请求。**

一切似乎都绑定在 URL 上：当它以 .aspx 结尾时，它被正确管理，而当它不是时，它根本没有被管理。

即使对于非 aspx 页面，我应该怎么做才能捕获每个 Application_BeginRequest？

我在我的 web.config 中有它来尝试将 404 错误强制到我的页面中：

```
<customErrors mode="On"
  defaultRedirect="404.aspx">
  <error statusCode="404" redirect="404.aspx"/>
</customErrors> 
```

但正如我所说，只要它不是以 .aspx 结尾的请求，它就不会被重定向，并且我会收到默认的 ASP.Net 404 错误。

（如果可以提供帮助，我的主机是“reliablesite”，并且我的 404 错误设置指向管理器内的 404.aspx 页面（共享主机），它不会改变任何东西）

我希望一切都能像在本地模式下一样工作。

如果您对如何解决该问题有任何提示，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T23:06:19.240

在开发 Web 服务器中，每个请求都由 aspx 引擎处理，仅此而已。在实时服务器中，不同的文件类型由不同的引擎处理。

要使实时服务器对每个请求都使用 aspx 引擎，您必须在 IIS 中更改网站的配置。

相关：[ASP.net web.config 没有捕获所有 404](https://stackoverflow.com/questions/6552935/asp-net-web-config-doesnt-catch-all-404s)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-08T00:35:51.410

当你有一个共享环境时，这里给出了这个问题的解决方案：

1.  在共享环境设置中激活 ASP.Net 集成管道（自 IIS 7 起可用）
2.  将此添加到 web.config：

    ```
    <system.webServer>
    <modules runAllManagedModulesForAllRequests="true">
      <add name="RedirectHttpModule" type="RedirectHttpModule" />
    </modules>
    </system.webServer> 
    ```

例如，其中 RedirectHttpModule 是处理 Application_BeginRequest 的自定义模块。

“runAllManagedModulesForAllRequests”意味着将对 Web 应用程序的所有请求调用所有托管模块。

# .net - 如何配置 Simple Injector IoC 以使用 RavenDB

> ID：10940988
> 
> 赞同：5
> 
> 时间：2012-06-07T22:56:20.507
> 
> 标签：.net, asp.net-mvc-3, inversion-of-control, ravendb, simple-injector

我在 MVC 3 Web 应用程序中将[Simple Injector](http://simpleinjector.codeplex.com)用于 IOC。我正在使用[RavenDB](http://ravendb.net)进行数据存储。在 mvc 3 应用程序中使用 RavenDB 有几个注意事项。我已经搜索了一些关于如何连接 IoC 以使用 RavenDB，但还没有找到如何连接简单注入器以使用 RavenDB。谁能解释如何连接简单的注入器以在 MVC 3 Web 应用程序中使用 RavenDB？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-07T22:56:21.210

根据[RavenDb 教程](http://www.geekbeing.com/2012/01/21/raven-db-tutorial)，您的应用程序只需要一个`IDocumentStore`实例（我假设每个数据库）。A`IDocumentStore`是线程安全的。它生成`IDocumentSession`实例，它们代表RavenDB[中的一个工作单元](http://martinfowler.com/eaaCatalog/unitOfWork.html)，这些**不是**线程安全的。因此，您不应**在**线程之间共享会话。

如何设置容器以与 RavenDb 一起使用主要取决于应用程序设计。问题是：你想给消费者注入什么？，`IDocumentStore`还是`IDocumentSession`？

当您使用 时`IDocumentStore`，您的注册可能如下所示：

```
// Composition Root
IDocumentStore store = new DocumentStore
{
    ConnectionStringName = "http://localhost:8080"
 };

store.Initialize();

container.RegisterSingle<IDocumentStore>(store); 
```

消费者可能看起来像这样：

```
public class ProcessLocationCommandHandler
    : ICommandHandler<ProcessLocationCommand>
{
    private readonly IDocumentStore store;

    public ProcessLocationCommandHandler(IDocumentStore store)
    {
        this.store = store;
    }

    public void Handle(ProcessLocationCommand command)
    {
        using (var session = this.store.OpenSession())
        {
            session.Store(command.Location);

            session.SaveChanges();
        }            
    }
} 
```

因为`IDocumentStore`是注入的，所以消费者自己负责管理会话：创建、保存和处置。这对于小型应用程序非常方便，或者例如在将 RavenDb 数据库隐藏在[存储库](http://martinfowler.com/eaaCatalog/repository.html)后面时，您可以`session.SaveChanges()`在方法内部调用`repository.Save(entity)`。

但是，我发现这种类型的工作单元使用对于大型应用程序来说是有问题的。因此，您可以做的是将其`IDocumentSession`注入消费者。在这种情况下，您的注册可能如下所示：

```
IDocumentStore store = new DocumentStore
{
    ConnectionStringName = "http://localhost:8080"
};

store.Initialize();

// Register the IDocumentSession per web request
// (will automatically be disposed when the request ends).
container.RegisterPerWebRequest<IDocumentSession>(
    () => store.OpenSession()); 
```

请注意，您需要[Simple Injector ASP.NET Integration NuGet 包](http://nuget.org/packages/SimpleInjector.Integration.Web)（或将*SimpleInjector.Integration.Web.dll*包含在您的项目中，默认下载中包含）才能使用`RegisterPerWebRequest`扩展方法。

现在的问题变成了，在哪里打电话`session.SaveChanges()`？

有一个关于根据 Web 请求注册作品单元的问题，它也解决了关于`SaveChanges`. 请仔细看看这个答案：[每个 Web 请求一个 DbContext……为什么？](https://stackoverflow.com/a/10588594/264697). 当您将单词替换为`DbContext`和`IDocumentSession`时`DbContextFactory`，`IDocumentStore`您将能够在 RavenDb 的上下文中阅读它。请注意，在使用 RavenDb 时，业务交易或一般交易的概念可能并不那么重要，但老实说我不知道​​。这是你必须自己找出来的。

# android - 静态单例未在活动中初始化。有什么问题？

> ID：10940994
> 
> 赞同：1
> 
> 时间：2012-06-07T22:57:37.823
> 
> 标签：android, nullpointerexception

我正在尝试追踪一个新的空指针异常，该异常出现在我的 ACRA 日志中并且我无法重现。以下是相关代码：

```
public class MyApplication extends Application {
   public void onCreate() {
       DataManager.instance().initializeData(this);
   }
}

public class DataManager {
    private static DataManger instance = new DataManger();
    private List<DataModel> dataModels;
    private List<I_Callback> callbacks = new ArrayList<I_Callback>();
    private boolean isInitialized = false;

    private DataManager(){}

    public static DataManager instance() {
       return instance;
    }

    public void initializeData(Context context) {
        new DataManagerInitializer().execute(context);
    }

    public void setDataModels(List<DataModel> models) {
        dataModels = models;
    }

    public void synchronized registerInitializeCallbacks(I_Callback callback) {
        if (isInitialized) {
             callback.executeCallback();
        } else {
             callbacks.add(callback);
        }
    }

    public void synchronized setInitialized() {
        isInitialized = true;
        for (I_Callback callback:callbacks) {
             callback.executeCallback();
        }
        callbacks.clear();
    }
}

public class DataManagerInitializer extends AsyncTask<Context, Void, Void>{
    protected Void doInBackground(Context... contexts){
        List<DataModel> dataModels = new ArrayList<DataModel>();
        /*various code to create DataModel objects and add to dataModels list*/
        DataManager.instance().setDataModels(dataModels);
        return null;
    }

    protected void onPostExecute(Void result) {
        DataManager.instance().setInitialized();
    }
}

public class ActivityA extends Activity implements I_Callback{
     public void onCreate(Bundle savedInstanceState) {
        setContentView(R.layout.graphical_layout);
        DataManager.instance().registerInitializeCallbacks(this);
     }

     public void executeCallback() {
        /* wire up button to call Activity B */
     }
}

public class ActivityB extends Activity {
     public void onCreate(Bundle savedInstanceState) {
         List<DataModel> dataModels = DataManager.instance().getDataModels();

         /* The following line of code throws a null pointer exception 
            in the stack trace*/
         for (int i=0; i < dataModels.size(); i++){
              /* do something with the data model */
         }
     }
} 
```

为了更简单地分解上述内容，启动应用程序，启动数据管理器单例的初始化。ActivityA（主要活动）启动并等待数据管理器完成初始化，然后才允许任何操作、连接任何事件等。从 ActivityA，如果不执行回调方法就无法到达 ActivityB，而 ActivityB 只能从活动A。DataManager 中数据模型列表为空的唯一方法是它没有被初始化，但我很难看到这是怎么可能的。关于我的空指针如何发生的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-07T23:02:33.613

```
private static DataManger instance = new DataManger();

...

public static DataManager instance() {
   return instance;
} 
```

是哪里出了问题。所以你的`instance`变量正在被垃圾收集。因为它在声明时被实例化，所以它没有被适当地重新实例化。所以，试试这个：

```
private static DataManger instance = null;

...

public static DataManager instance() {
    if (instance == null){
        instance = new DataManager();
    } 
    return instance;
} 
```

这将确保调用`instance()`（通常调用`getInstance()`，但这只是约定）将返回数据管理器的有效单个实例。尽量避免用它们的声明来实例化全局变量，以避免这个特定的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-07T23:15:44.540

让我们假设：

```
you are interacting with the Activity B 
```

按主页按钮：

```
start playing with other apps (consuming memory) 
```

在某些时候，so 需要内存，它会开始垃圾收集对象，包括你的“实例”。

如果在您启动应用程序时发生这种情况，框架将恢复活动 B 并且将发生 npe。

如果它为空，您需要重新创建实例（在活动 B 中）。

# google-app-engine - Web2py 是否支持 Google App Engine 投影查询？

> ID：10940995
> 
> 赞同：1
> 
> 时间：2012-06-07T22:57:38.230
> 
> 标签：google-app-engine, google-cloud-datastore, web2py

我在使用 Web2py 和 Google App Engine 方面取得了不错的进展，但现在我必须决定如何在不浪费 GAE 资源的情况下存储图像！

我有一张“桌子”来存放产品。每个产品最多可以有 12 个图片。

当我请求产品页面时，可以说：/product/7484/

我只需要产品信息，没有图片，但是 GAE 引擎从数据存储中获取所有字段！我认为使用 Google [App Engine Projection Queries](https://developers.google.com/appengine/docs/python/datastore/queries#Query_Projection)可以解决这个问题，我只会获取我需要的字段！

Web2py 有可能吗，还是我必须更改我的数据库才能将图像存储在另一个“表”上？

我只需要在浏览器请求它们时获取每个图片字段...但是现在，请求的每张图片都会导致从数据库中获取整个产品实体！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-09T05:21:04.350

我们将其作为主干中的实验性功能。也许你可以帮助我们测试它。没有什么特别的，只是照常做：

```
db(query).select(db.table.field1, db.table.field2, etc.) 
```

除非查询通过 id 选择单个记录，否则 select 的参数将转换为投影查询。不幸的是，GAE 不支持 get_by_id() 的投影。

感谢 Christian (howesc) 在您请求该功能后的 24 小时内完成了这项工作。如果您可以帮助测试，请加入我们的 web2py google 组。

# sencha-touch - sencha touch - 从另一个框架移植的自定义 html 模板

> ID：10940999
> 
> 赞同：1
> 
> 时间：2012-06-07T22:57:48.853
> 
> 标签：sencha-touch, extjs, sencha-touch-2, sencha-architect

之前对这个应用的尝试是在 jqtouch 中完成的，效果非常好。我很难弄清楚如何最好地使用煎茶触摸来做到这一点。

我的情况在这张图片中得到了最好的描述 ![图片](../Images/5a80058c89c57aceec6aa1f31f484d95.png) 这只是一个应该填充轮播的项目，因此使用不同的数据重用它是最重要的（没有硬编码的 html）。

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-23T08:32:11.690

终于解决了它认为我应该在这里更新它

```
Ext.define('mobuy.view.myCarousel', {
    extend: 'Ext.carousel.Carousel',
    alias: 'widget.myCarousel',
    config: {
        myitems: 0,
    },

    updateMyItems: function(newItem) {

        var localCarouselItems = [];

        Ext.each(newItems, function(item){
            localCarouselItems.push({
                xtype:'localItem',
                data:item.data
            });
        });

        this.setItems(localCarouselItems);
        this.setActiveItem(0);
    }
}) 
```

这基本上是在调用 setMyItems 并为这些项目中的每一个设置数据（与 xtemplate 或其他任何内容一起使用）时，从商店创建一个 localItem 类型的新项目数组。

如果有人需要更多详细信息，请询问，我会更新我的答案。