# StackOverflow 问答 10515000-10515999

# javascript - 如何在 JavaScript 中使用 Math.random 进行测试？

> ID：10515000
> 
> 赞同：8
> 
> 时间：2012-05-09T11:16:20.740
> 
> 标签：javascript, unit-testing

我有一个函数可以在最小值和最大值之间选择一个随机值。因此，当我进行测试时，我测试该值是否介于最小值和最大值之间。但是在我的应用程序中出现一些失败的地方，测试通过了一些时间，有时由于随机性而失败。

`Math.random()`覆盖/模拟以返回 0 和 1 并测试我的值是否与最大值或最小值相同是个好主意吗？还是有更好的方法来测试 JavaScript 中的随机性？

这是将用于创建随机数的函数：

```
function constrain(min, max){
    return Math.round(Math.random() * (max - min) + min)
} 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-09T12:45:46.593

[SinonJS](http://sinonjs.org/)是一个 JavaScript模拟[框架](http://en.wikipedia.org/wiki/Mock_object)，它集成了所有主要的 JavaScript 单元测试框架。适配器将负责“还原”您在测试期间创建的任何存根/模拟。

```
// Stub out Math.random so it always returns '4' (chosen by fair dice roll)
sinon.stub(Math, 'random').returns(4);

// Double check that it worked.
equal(Math.random(), 4, "http://xkcd.com/221/"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T11:32:42.820

最好，您的测试中根本不应该有[随机](http://www.xkcd.com/221/)元素。您应该为您的方法提供已知值，以便您可以确定结果是否正是您所期望的。

如果您有随机值，您将不得不多次测试该方法，并且您仍然不确定您是否获得了您想要的确切结果，只是您得到了正确范围内的结果。

例如，如果您在代码中使用当前日期 ( `new Date()`)，那么您应该在测试时为您的方法提供已知日期，否则您的测试将仅显示该方法现在有效。明天可能会失败。

* * *

### 编辑：

但是，我可以立即告诉您，您的方法效果不佳。您应该使用该`floor`方法而不是`round`，否则最低和最高值的出现频率将是其他值的一半：

```
function constrain(min, max){
  return Math.floor(Math.random() * (max - min + 1) + min)
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T11:23:03.817

通常，您的测试应该通过您的非确定性代码的所有可能值。也许在您的测试中有一个循环，您可以在其中进行 100 次测试。这将在不更改应用程序代码的情况下捕获更多故障。你的建议也是一种选择。

# jquery - 使用希伯来语文本从 ASP 中的表单发送的电子邮件的编码问题

> ID：10515002
> 
> 赞同：2
> 
> 时间：2012-05-09T11:16:23.313
> 
> 标签：jquery, asp-classic, cdo.message

我正在使用`CDO.Message`ASP Classic 网站上的联系表单向网站所有者发送电子邮件。该网站是希伯来语的，我已经用`UTF-8`.

我的问题是，在 Outlook 2007 中，从表单发送的希伯来语出现乱码。电子邮件中的其他希伯来语文本（即硬编码文本）正确显示。

我在 Outlook 2010 和 Gmail 在线查看了这些电子邮件，所有希伯来语看起来都很好。

当然，我的客户有 Outlook 2007，而且不太可能很快改变。

有谁知道我该如何解决这个问题？

这是发送电子邮件的脚本：

```
Const CdoReferenceTypeName = 1
Dim objCDO, objBP
Set objCDO = Server.CreateObject("CDO.Message")
objCDO.Configuration.Fields.Item ("http://schemas.microsoft.com/cdo/configuration/sendusing") = 2 
objCDO.Configuration.Fields.Item ("http://schemas.microsoft.com/cdo/configuration/smtpserver") = "localhost"
objCDO.Configuration.Fields.Item ("http://schemas.microsoft.com/cdo/configuration/smtpserverport") = 25 
objCDO.Configuration.Fields.Item ("http://schemas.microsoft.com/cdo/configuration/smtpusessl") = False 
objCDO.Configuration.Fields.Item ("http://schemas.microsoft.com/cdo/configuration/smtpconnectiontimeout") = 60

objCDO.Configuration.Fields.Item ("http://schemas.microsoft.com/cdo/configuration/smtpauthenticate") = 1 'basic (clear-text) authentication
objCDO.Configuration.Fields.Item ("http://schemas.microsoft.com/cdo/configuration/sendusername") = "aaaa@bbbbb.co.il"
objCDO.Configuration.Fields.Item ("http://schemas.microsoft.com/cdo/configuration/sendpassword") = "123456"
objCDO.Configuration.Fields.Update

objCDO.MimeFormatted = True
objCDO.To = email_to        
objCDO.Bcc = email_bcc
objCDO.From = email_from        

objCDO.Subject = email_subject      

objCDO.HTMLBody = email_body
objCDO.HTMLBodyPart.charset = "utf-8"
objCDO.BodyPart.charset = "utf-8"                                   

objCDO.Send 
```

表单是通过 jquery malsup 表单插件提交的：

```
$('#contact_form').submit(function() {
    if (myvalidator.isValid()) {
        $(this).ajaxSubmit(function() { 
            $('#form_holder').html('thanks'); 
        });
    }
    return false;
}); 
```

该表格也有一个附件，因此发送如下：

```
<form action="inc_contact_send.asp" method="post" enctype="multipart/form-data" id="contact_form"> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T12:34:50.827

尝试移动：

```
objCDO.BodyPart.charset = "utf-8" 
```

向上几行，使其在分配到`HTMLBody`. `email_body`在调试时检查内容以确保它包含您期望的 HTML可能也是值得的。

# haskell - Haskell HXT 泡菜

> ID：10515003
> 
> 赞同：3
> 
> 时间：2012-05-09T10:27:16.340
> 
> 标签：haskell

我刚刚使用**XML的“** **hxt** ”包编写了一个简单的程序：

 **```
module Main(main,pickle)    where

import qualified    Text.XML.HXT.Arrow.Pickle   as HXT.Arrow.Pickle
import qualified    Text.XML.HXT.Arrow.Pickle.Xml   as HXT.Arrow.Pickle.Xml
import qualified    Text.XML.HXT.Core       as HXT.Core
import qualified    System.Environment

newtype Subject = MkSubject Int deriving (Read, Show)

instance HXT.Arrow.Pickle.XmlPickler Subject    where
    xpickle = xpSubject

xpSubject :: HXT.Arrow.Pickle.Xml.PU Subject
xpSubject   = HXT.Arrow.Pickle.xpElem "Subject" . HXT.Arrow.Pickle.xpWrap (
    MkSubject,
    \(MkSubject x)  -> x
 ) . HXT.Arrow.Pickle.xpAttr "Topic" $ HXT.Arrow.Pickle.xpPrim

pickle :: String -> IO ()
pickle srcFilePath = HXT.Core.runX (
    HXT.Core.xunpickleDocument xpSubject [
        HXT.Core.withValidate HXT.Core.yes,
        HXT.Core.withTrace maxBound,
        HXT.Core.withRemoveWS HXT.Core.yes,
        HXT.Core.withPreserveComment HXT.Core.yes
    ] srcFilePath
 ) >> return ()

main :: IO ()
main    = pickle =<< fmap head System.Environment.getArgs 
```

**在OpenSuSE-11.4**上编译它，使用**ghc-7.4.1**可以正常工作：

```
$ ghc Main.hs
[1 of 1] Compiling Main             ( Main.hs, Main.o )
Linking Main ... 
```

在示例 XML 文件上运行会导致*无限循环*：

```
$ ./Main subject.xml 
-- (1) readDocument: start processing document "subject.xml"
-- (2) setDefaultBaseURI: new default base URI is "file:///home/al/Documents/Software/Haskell/Test/"
-- (2) setBaseURI: new base URI is "file:///home/al/Documents/Software/Haskell/Test/"
-- (2) setBaseURI: new base URI is "file:///home/al/Documents/Software/Haskell/Test/subject.xml"
-- (2) getURIContents: reading "file:///home/al/Documents/Software/Haskell/Test/subject.xml"
-- (2) read file "/home/al/Documents/Software/Haskell/Test/subject.xml" (strict input = False)
-- (2) decodeDocument: encoding is "ISO-8859-15"
-- (1) getXmlContents: content read and decoded for "file:///home/al/Documents/Software/Haskell/Test/subject.xml"
-- (1) getXmlContents'

content of: subject.xml
=======================

---XTag "/"
   |   "version"="1.0"
   |   "encoding"="ISO-8859-15"
   |   "transfer-MimeType"="text/xml"
   |   "transfer-Status"="200"
   |   "transfer-Message"="OK"
   |   "transfer-URI"="file:///home/al/Documents/Software/Haskell/Test/subject.xml"
   |   "source"="subject.xml"
   |   "transfer-Encoding"="ISO-8859-15"
   |
   +---XText "<?xml version=\"1.0\" encoding=\"ISO-8859-15\"?>\n\n<!-- An example of the specification in XML, of the problem-parameters -->\n\n<Subject Topic=\"test\"/>\n\n<!-- End -->\n\n"

-- (1) readDocument: "subject.xml" (mime type: "text/xml" ) will be processed
-- (2) checkUndefinedEntityRefs: looking for undefined entity refs
-- (2) checkUndefinedEntityRefs: looking for undefined entity refs done
-- (1) readDocument: "subject.xml" processed
<!-- An example of the specification in XML, of the problem-parameters -->
<Subject Topic="test"/>
<!-- End -->

content of: subject.xml
=======================

---XTag "/"
   |   "version"="1.0"
   |   "encoding"="ISO-8859-15"
   |   "transfer-MimeType"="text/xml"
   |   "transfer-Status"="200"
   |   "transfer-Message"="OK"
   |   "transfer-URI"="file:///home/al/Documents/Software/Haskell/Test/subject.xml"
   |   "source"="subject.xml"
   |   "transfer-Encoding"="ISO-8859-15"
   |
   +---XCmt " An example of the specification in XML, of the problem-parameters "
   |
   +---XTag "Subject"
   |   |   "Topic"="test"
   |
   +---XCmt " End "

fatal error: document unpickling failed
xpPrim: reading string "test" failed
context:    Main: <<loop>> 
```

当然，这是我第一次使用“ **hxt** ”，我怀疑这是一个根本性的错误……但打包的示例代码表现出相同的行为：

```
$ cd ~/.cabal/packages/hackage.haskell.org/hxt/9.2.2/hxt-9.2.2/examples/arrows/pickle
$ make
ghc -Wall -O2  --make -o pickleTest PickleTest.hs
[1 of 1] Compiling Main             ( PickleTest.hs, PickleTest.o )
Linking pickleTest ...
make: *** No rule to make target `PickleTestWithNamespaces.hs', needed by `pickleTestWithNamespaces'.  Stop.

$ ./pickleTest 
### Error in:   0:pickle/unpickle tests with example programs:0:0
<<loop>>
### Error in:   0:pickle/unpickle tests with example programs:0:1
<<loop>>
### Error in:   0:pickle/unpickle tests with example programs:0:2
<<loop>>
### Error in:   0:pickle/unpickle tests with example programs:0:3
<<loop>>
### Error in:   0:pickle/unpickle tests with example programs:0:4
<<loop>>
### Error in:   0:pickle/unpickle tests with example programs:0:5
<<loop>>
### Error in:   0:pickle/unpickle tests with example programs:1:0
<<loop>>
### Error in:   0:pickle/unpickle tests with example programs:1:1
<<loop>>
### Error in:   0:pickle/unpickle tests with example programs:1:2
<<loop>>
### Error in:   0:pickle/unpickle tests with example programs:1:3
<<loop>>
### Error in:   0:pickle/unpickle tests with example programs:1:4
<<loop>>
### Error in:   0:pickle/unpickle tests with example programs:1:5
<<loop>>
### Error in:   0:pickle/unpickle tests with example programs:2:0
<<loop>>
### Error in:   0:pickle/unpickle tests with example programs:2:1
<<loop>>
### Error in:   0:pickle/unpickle tests with example programs:2:2
<<loop>>
### Error in:   0:pickle/unpickle tests with example programs:2:3
<<loop>>
### Error in:   0:pickle/unpickle tests with example programs:2:4
<<loop>>
### Error in:   0:pickle/unpickle tests with example programs:2:5
<<loop>>
Cases: 18  Tried: 18  Errors: 18  Failures: 0
Counts {cases = 18, tried = 18, errors = 18, failures = 0} 
```

我怀疑这是一些不匹配的包：

```
$ ghc-pkg list
/usr/local/lib/ghc-7.4.1/package.conf.d
   Cabal-1.14.0
   array-0.4.0.0
   base-4.5.0.0
   bin-package-db-0.0.0.0
   binary-0.5.1.0
   bytestring-0.9.2.1
   containers-0.4.2.1
   deepseq-1.3.0.0
   directory-1.1.0.2
   extensible-exceptions-0.1.1.4
   filepath-1.3.0.0
   ghc-7.4.1
   ghc-prim-0.2.0.0
   haskell2010-1.1.0.1
   haskell98-2.0.0.1
   hoopl-3.8.7.3
   hpc-0.5.1.1
   integer-gmp-0.4.0.0
   old-locale-1.0.0.4
   old-time-1.1.0.0
   pretty-1.1.1.0
   process-1.1.0.1
   rts-1.0
   template-haskell-2.7.0.0
   time-1.4
   unix-2.5.1.0
/home/al/.ghc/x86_64-linux-7.4.1/package.conf.d
   HTTP-4000.2.3
   HUnit-1.2.4.2
   QuickCheck-2.4.2
   cpphs-1.13.3
   dotgen-0.4.1
   hashable-1.1.2.3
   haskell-lexer-1.0
   haskell-src-exts-1.13.0
   hlint-1.8.28
   hscolour-1.19
   html-1.0.1.2
   hxt-9.2.2
   hxt-charproperties-9.1.1
   hxt-regex-xmlschema-9.0.4
   hxt-unicode-9.0.2
   mtl-2.1
   network-2.3.0.13
   parallel-3.2.0.2
   parsec-3.1.2
   primes-0.2.1.0
   random-1.0.1.1
   regex-base-0.93.2
   regex-posix-0.95.1
   syb-0.3.6
   text-0.11.2.0
   transformers-0.3.0.0
   uniplate-1.6.7
   unordered-containers-0.2.1.0
   xhtml-3000.2.0.5
   zlib-0.5.3.3 
```

感谢您提前提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:12:16.673

尝试在没有优化/规则的情况下安装 hxt，看看是否仍然出现错误。

如果没有，你遇到了这个错误：[http ://hackage.haskell.org/trac/ghc/ticket/2722](http://hackage.haskell.org/trac/ghc/ticket/2722)**

# c# - 将 Dapper 查询映射到对象集合（它本身有几个集合）

> ID：10515005
> 
> 赞同：5
> 
> 时间：2012-05-09T11:16:37.697
> 
> 标签：c#, dapper, multi-mapping

我想执行单个查询（或具有多个结果集的存储过程）。我知道如何使用 Dapper 进行多重映射，但我无法排序如何将两个集合映射到同一个父级。基本上，给定这个对象定义......

```
class ParentObject
{
    string Name { get; set; }
    ICollection<ChildObjectOne> ChildSetOne {get;set;}
    ICollection<ChildObjectTwo> ChildSetTwo { get; set; }
}

class ChildObjectOne
{
    string Name { get; set; }
}

class ChildObjectTwo
{
    int id { get; set; }
    string LocationName { get; set; }
} 
```

我希望能够运行以某种方式产生的 Dapper 查询：

```
IQueryable<ParentObject> result = cnn.Query(
          // Some really awesome dapper syntax goes here
); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T13:45:22.473

不确定您是否不想使用 MultiMapping，但以下是它如何适用于您的情况。据我所知并在 SO 上阅读，不可能用简单的`Query`.

```
 static void Main(string[] args)
        {
            var sqlParent = "SELECT parentId as Id FROM ParentTable WHERE parentId=1;";
            var sqlChildOneSet = "SELECT Name FROM ChildOneTable;"; // Add an appropriate WHERE
            var sqlChildTwoSet = "SELECT Id, LocationName FROM ChildTwoTable;"; // Add an appropriate WHERE

            var conn = GetConnection() // whatever you're getting connections with
            using (conn)
            {
                conn.Open();
                using (var multi = conn.QueryMultiple(sqlParent + sqlChildOneSet + sqlChildTwoSet))
                {
                    var parent = multi.Read<ParentObject>().First();
                    parent.ChildSetOne = multi.Read<ChildOne>().ToList();
                    parent.ChildSetTwo = multi.Read<ChildTwo>().ToList();
                }
            }
        } 
```

嵌套对象和 dapper 的类似问题：

[https://stackoverflow.com/search?q=nested+objects+%2B+dapper](https://stackoverflow.com/search?q=nested+objects+%2B+dapper)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-18T23:15:45.390

`IEnumerable<TReturn> Query<TFirst, TSecond, TThird, TReturn>(this IDbConnection cnn, string sql, Func<TFirst, TSecond, TThird, TReturn> map);`在这种情况下，可以使用该方法实现具有一对多关系的对象。但是，您需要对实体进行一些更改才能获得足够的信息。

这里有一些类似问题的SO线程。

[如何使用 Dapper 映射嵌套对象列表](https://stackoverflow.com/a/21781732/2076531)

[扩展功能，让它更干净](https://stackoverflow.com/a/22415591/2076531)

[Dapper.Net 示例 - 映射关系](https://www.tritac.com/blog/dappernet-by-example/)

```
public class ParentObject
{
    public ParentObject()
    {
        ChildSetOne = new List<ChildObjectOne>();
        ChildSetTwo = new List<ChildObjectTwo>();
    }
    // 1) Although its possible to do this without this Id property, For sanity it is advisable.
    public int Id { get; set; }
    public string Name { get; set; }
    public ICollection<ChildObjectOne> ChildSetOne {get; private set;}
    public ICollection<ChildObjectTwo> ChildSetTwo { get; private set; }
}

public class ChildObjectOne
{
    // 2a) Need a ParentId
    public int ParentId { get; set; }
    public string Name { get; set; }
}

public class ChildObjectTwo
{
    // 2b) This ParentId is not required but again for sanity it is advisable to include it.
    public int ParentId { get; set; }
    public int id { get; set; }
    public string LocationName { get; set; }
}

public class Repository
{
    public IEnumerable<ParentObject> Get()
    {
        string sql = 
            @"SELECT 
                p.Id, 
                p.Name, 
                o.Name, 
                o.ParentId, 
                t.Id, 
                t.LocationName, 
                t.ParentId 
            FROM 
                Parent p 
                    LEFT JOIN ChildOne o on o.ParentId = p.Id 
                    LEFT JOIN ChildTwo t on t.ParentId = p.Id 
            WHERE 
                p.Name LIKE '%Something%'";

        var lookup = new Dictionary<int, ParentObject>();
        using (var connection = CreateConnection())
        {

            connection.Query<ParentObject, ChildObjectOne, ChildObjectTwo, ParentObject>(
                sql, (parent, childOne, childTwo) =>
                {
                    ParentObject activeParent;

                    if (!lookup.TryGetValue(childOne.ParentId, out activeParent)) 
                    {
                        activeParent = parent;
                        lookup.add(activeParent.Id, activeParent);
                    }

                    //TODO: if you need to check for duplicates or null do so here
                    activeParent.ChildSetOne.Add(childOne);

                    //TODO: if you need to check for duplicates or null do so here
                    activeParent.ChildSetTwo.Add(childTwo);

                });   
        }
        return lookup.Values;
    }
} 
```

# interrupt - gpio pin未在linux中导出

> ID：10515014
> 
> 赞同：0
> 
> 时间：2012-05-09T11:16:59.180
> 
> 标签：interrupt, gpio

我尝试了以下方法在 linux 用户空间中导出 gpio：

*   在内核配置中，

    ```
    Device Drivers --->
          --- GPIO Support
                [*] /sys/class/gpio/... (sysfs interface) 
    ```

*   GPIO=9

    ```
    echo $GPIO >/sys/class/gpio/export 
    ```

*   `used gpio_export(9)`在我的代码中

*   试图导出所有的gpio。但是没有导出gpio。

在 sysfs 中导出 gpio 引脚时我缺少什么 ..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-18T07:56:30.033

您是否通过“gpio_request”请求了 GPIO？调用 gpio_export 应该将 GPIO 导出到 sysfs 以进行控制。

# objective-c - 基于 NSObject 的类的 iOS JSON 序列化

> ID：10515015
> 
> 赞同：18
> 
> 时间：2012-05-09T11:17:07.620
> 
> 标签：objective-c, ios, json, serialization, nsobject

我想对我自己的自定义类进行 JSON 序列化。我在 Objective-C / iOS5 中工作。我想做以下事情：

```
Person* person = [self getPerson ]; // Any custom object, NOT based on NSDictionary
NSString* jsonRepresentation = [JsonWriter stringWithObject:person ];
Person* clone = [JsonReader objectFromJson: jsonRepresentation withClass:[Person Class]]; 
```

似乎 NSJSONSerialization （和其他几个库）要求“人”类基于 NSDictionary 等。我想要一些可以序列化我想要定义的任何自定义对象的东西（在合理范围内）。

让我们想象一下 Person.h 看起来像这样：

```
#import <Foundation/Foundation.h>
@interface Person : NSObject 
@property NSString* firstname;
@property NSString* surname;
@end 
```

我希望为实例生成的 JSON 看起来类似于以下内容：

```
{"firstname":"Jenson","surname":"Button"} 
```

我的应用程序使用 ARC。我需要一些可以使用对象进行序列化和反序列化的东西。

非常感谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-09T14:17:26.583

这是一个棘手的问题，因为您可以放入 JSON 的唯一数据是直接的简单对象（想想 NSString、NSArray、NSNumber……），而不是自定义类或标量类型。为什么？如果不构建各种条件语句来将所有这些数据类型包装到这些类型的对象中，解决方案将类似于：

```
//at the top…
#import <objC/runtime.h>

    NSMutableDictionary *muteDictionary = [NSMutableDictionary dictionary];

    id YourClass = objc_getClass("YOURCLASSNAME");
    unsigned int outCount, i;
    objc_property_t *properties = class_copyPropertyList(YourClass, &outCount);
    for (i = 0; i < outCount; i++) {
        objc_property_t property = properties[i];
        NSString *propertyName = [NSString stringWithCString:property_getName(property) encoding:NSUTF8StringEncoding];
        SEL propertySelector = NSSelectorFromString(propertyName);
        if ([classInstance respondsToSelector:propertySelector]) {
            [muteDictionary setValue:[classInstance performSelector:propertySelector] forKey:propertyName];
        }
    }
    NSError *jsonError = nil;
    NSData *jsonData = [NSJSONSerialization dataWithJSONObject:muteDictionary options:0 error:&jsonError]; 
```

这很棘手，尽管因为我之前说过。如果您有任何标量类型或自定义对象，那么整个事情就会崩溃。如果实现这样的事情真的很重要，我建议考虑投入时间并查看 Ricard 的链接，这些链接允许您查看有助于将值包装到 NSDictionary 安全对象中的条件语句的属性类型。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-05-27T09:37:14.817

现在您可以使用[JSONModel](https://github.com/icanzilb/JSONModel)轻松解决这个问题。JSONModel 是一个基于 Class 对对象进行一般序列化/反序列化的库。您甚至可以使用基于非 nsobject 的属性，例如`int`,`short`和`float`. 它还可以满足嵌套复杂的 JSON。

**反序列化示例**。通过参考您的示例，在头文件中：

```
#import "JSONModel.h"

@interface Person : JSONModel 
@property (nonatomic, strong) NSString* firstname;
@property (nonatomic, strong) NSString* surname;
@end 
```

在实现文件中：

```
#import "JSONModelLib.h"
#import "yourPersonClass.h"

NSString *responseJSON = /*from somewhere*/;
Person *person = [[Person alloc] initWithString:responseJSON error:&err];
if (!err)
{
   NSLog(@"%@  %@", person.firstname, person.surname):
} 
```

**序列化示例**。在实现文件中：

```
#import "JSONModelLib.h"
#import "yourPersonClass.h"

Person *person = [[Person alloc] init];
person.firstname = @"Jenson";
person.surname = @"Uee";

NSLog(@"%@", [person toJSONString]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-29T09:49:21.767

也许这可以帮助[JLObjectStrip](https://github.com/joshuaLareta/JLObjectStrip)。

它与 jacob 所说的相同，但它甚至会迭代到类的属性。这将为您提供字典/数组，然后只需使用 sbjson/jsonkit 或您喜欢的任何东西来构建您的 json 字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-29T03:44:15.313

试试这个[BWJSONMatcher](https://github.com/BurrowsWang/BWJSONMatcher)

这真的很简单也很方便。

```
...
NSString *jsonString = @"{your-json-string}";
YourValueObject *dataModel = [YourValueObject fromJSONString:jsonString];

NSDictionary *jsonObject = @{your-json-object};
YourValueObject *dataModel = [YourValueObject fromJSONObject:jsonObject];
...
YourValueObject *dataModel = instance-of-your-value-object;
NSString *jsonString = [dataModel toJSONString];
NSDictionary *jsonObject = [dataModel toJSONObject];
... 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-11-25T04:28:37.143

我为我的对象所做的是我有一个名为“toDict”的方法，它返回一个 nsdictionary。在这种方法中，我将我需要/想要的所有属性设置到字典中，例如

```
[user setObject:self.first_name forKey:@"first_name"];
[user setObject:self.last_name forKey:@"last_name"];
[user setObject:self.email forKey:@"email"]; 
```

# android - GO Locker 的 USER_PRESENT 意图

> ID：10515021
> 
> 赞同：11
> 
> 时间：2012-05-09T11:17:47.443
> 
> 标签：android, android-intent

我的应用程序侦听 USER_PRESENT 意图。但是，自定义锁屏替换，例如 WidgetLocker 和 GO Locker 不会/不能发送这个受保护的广播。

WidgetLocker 通过广播它自己的自定义意图来解决这个问题（例如`com.teslacoilsw.widgetlocker.intent.UNLOCKED`，[请参阅此处](http://teslacoilsw.com/widgetlocker/#developers)）。GO Locker 是否提供类似的意图？我无法找到有关此的任何信息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T22:18:59.600

我希望你不介意我这么晚才在这个线程中发布这个，但我需要做同样的事情并找到他们正在使用的 Intent 操作：

*   com.jiubang.goscreenlock.unlock
*   com.jiubang.goscreenlock.appunlock
*   com.jiubang.goscreenlock.close

请注意，我只设法让第一个工作。我从未见过其他两个被 GO Locker 解雇，但第二个看起来可以在某些情况下使用。最后一个似乎有点不祥/不清楚，所以使用它需要您自担风险。

如果有人对我是如何找到这些感兴趣的，那就是通过使用 apktool 反编译 GO Locker APK 并在 smali 文件中查找包名称模式（感谢您无法混淆字符串文字！）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-26T04:52:15.593

您使用的是哪个版本的 GO Locker？把 .apk 文件发给我，我可能会帮助你，因为我以前也遇到过类似的问题。`wenqs27@gmail.com`

我正在使用 Go Locker 1.35.1，意图应该`com.gau.go.launcherex_action_send_togolock` 是由`com.jiubang.goscreenlock.service.KeyguardReciever`

希望对你有帮助~

# android - Android 中 AsyncTask 上的 OutOfMemory

> ID：10515023
> 
> 赞同：1
> 
> 时间：2012-05-09T11:18:05.543
> 
> 标签：android, android-asynctask, httpclient, out-of-memory

使用此代码时出现 OutOfMemory 异常：

```
 class ApiTask extends AsyncTask<URI, Void, String> {

    private Exception exception;

    protected void onPreExecute() {
        dialog = ProgressDialog.show(DownloadedActivity.this, "", 
                "Contacting Server...", true);
    }

    protected String doInBackground(URI... uri) {
        try {

            HttpClient client = new DefaultHttpClient();
            HttpGet request = new HttpGet();
            try {
                request.setURI(uri[0]);
                return client.execute(request, new BasicResponseHandler());
            } catch (Exception e) {
                e.printStackTrace();
            }

            return "Error";

        } catch (Exception e) {
            this.exception = e;
            return "Error";
        }
    }

    @Override
    protected void onPostExecute(String result) {
        dialog.dismiss();
        processJSON(result);
        updateListView();
        result = null;
        System.gc();
           }
          } 
```

当我在刷新方法中第二次运行此代码时会发生错误，这让我怀疑内存泄漏。响应是一个大型 JSON 对象。我希望找出我做错了什么我尝试了一些事情，但它看起来像响应留在内存中。

这是 logcat 错误：

```
05-09 13:45:13.764: E/AndroidRuntime(2438): Uncaught handler: thread AsyncTask #2 exiting due to uncaught exception
05-09 13:45:13.784: E/AndroidRuntime(2438): java.lang.RuntimeException: An error occured while executing doInBackground()
05-09 13:45:13.784: E/AndroidRuntime(2438):     at android.os.AsyncTask$3.done(AsyncTask.java:200)
05-09 13:45:13.784: E/AndroidRuntime(2438):     at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
05-09 13:45:13.784: E/AndroidRuntime(2438):     at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
05-09 13:45:13.784: E/AndroidRuntime(2438):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
05-09 13:45:13.784: E/AndroidRuntime(2438):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
05-09 13:45:13.784: E/AndroidRuntime(2438):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
05-09 13:45:13.784: E/AndroidRuntime(2438):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
05-09 13:45:13.784: E/AndroidRuntime(2438):     at java.lang.Thread.run(Thread.java:1096)
05-09 13:45:13.784: E/AndroidRuntime(2438): Caused by: java.lang.OutOfMemoryError
05-09 13:45:13.784: E/AndroidRuntime(2438):     at java.lang.String.<init>(String.java:513)
05-09 13:45:13.784: E/AndroidRuntime(2438):     at org.apache.http.util.CharArrayBuffer.toString(CharArrayBuffer.java:261)
05-09 13:45:13.784: E/AndroidRuntime(2438):     at org.apache.http.util.EntityUtils.toString(EntityUtils.java:141)
05-09 13:45:13.784: E/AndroidRuntime(2438):     at org.apache.http.util.EntityUtils.toString(EntityUtils.java:146)
05-09 13:45:13.784: E/AndroidRuntime(2438):     at org.apache.http.impl.client.BasicResponseHandler.handleResponse(BasicResponseHandler.java:76)
05-09 13:45:13.784: E/AndroidRuntime(2438):     at org.apache.http.impl.client.BasicResponseHandler.handleResponse(BasicResponseHandler.java:59)
05-09 13:45:13.784: E/AndroidRuntime(2438):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:657)
05-09 13:45:13.784: E/AndroidRuntime(2438):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:627)
05-09 13:45:13.784: E/AndroidRuntime(2438):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:616)
05-09 13:45:13.784: E/AndroidRuntime(2438):     at com.nelissen.couchforwarder.couch.DownloadedActivity$ApiTask.doInBackground(DownloadedActivity.java:382)
05-09 13:45:13.784: E/AndroidRuntime(2438):     at com.nelissen.couchforwarder.couch.DownloadedActivity$ApiTask.doInBackground(DownloadedActivity.java:1)
05-09 13:45:13.784: E/AndroidRuntime(2438):     at android.os.AsyncTask$2.call(AsyncTask.java:185)
05-09 13:45:13.784: E/AndroidRuntime(2438):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
05-09 13:45:13.784: E/AndroidRuntime(2438):     ... 4 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-19T15:27:01.113

我发现 AsyncTask 和 Activity 有点“松散地联系在一起”......所以也许 AsyncTask 不完全......死了！哈哈 :D

尝试阅读此链接：[Android AsyncTask for Long Running Operations](https://stackoverflow.com/questions/12797550/android-asynctask-for-long-running-operations?rq=1)

无论如何，在我的代码 onRefresh 中我都杀了他们！

```
public void onRefresh(View view){ // this is a method inside the Activity about to be killed            
    downloadXmlTaskObject = null; // Garbage Collectible 
    finish();                // Finish the Activity
    Intent intent = getIntent(); // get the intent of the Activity
    startActivity(intent);  // and Create a new Activity        
} 
```

我不知道它是否符合您的要求..您可以创建一个 Activity 仅用于下载或解析等目的。然后将它们都杀死！祝你好运！^_^

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:32:37.213

我确信这是由于您在代码中编写的句子而发生的：

```
return client.execute(request, new BasicResponseHandler());  // inside doInBackground 
```

我建议您为此创建另一个 AsyncTask 并在 onPostExecute() 方法中执行这个新的 AsyncTask。

另一个可能是由于`processJSON(result);`，这可能是一个耗时的过程。

# javascript - 在JS中查找语言的unicode字符集

> ID：10515025
> 
> 赞同：4
> 
> 时间：2012-05-09T11:18:17.257
> 
> 标签：javascript, unicode, internationalization

如何在 Java 脚本中找到有关 Unicode 字符（例如它所属的字符集）的信息？

例如

```
00e9  LATIN SMALL LETTER E WITH ACUTE
0bf2  TAMIL NUMBER ONE THOUSAND 
```

我知道一种使用该`unicodedata`库在 python 中查找有关 Unicode 代码点详细信息的方法。有没有办法在 JS 中找到这些信息？

PS：我正在使用它进行 chrome 扩展开发，所以使用他们的 API 的解决方案也很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-13T15:01:56.183

英语文本以拉丁文、通用文和继承文体的代码点为主，在某些语料库中，还有希腊文。

例如，PubMed Open Access 集合是所有英语文本的一个非常大的集合，其中填充了非 ASCII 代码点。其中 90% 仅由 36 个不同的代码点占，如下所示：

```
rank  percent cumulative  code glyph  GC=??   Name
---------------------------------------------------------------------
   1  18.553%  18.553%  U+02013 ‹–›  GC=Pd    EN DASH
   2   7.422%  25.974%  U+000A0 ‹ ›  GC=Zs    NO-BREAK SPACE
   3   7.033%  33.007%  U+000B1 ‹±›  GC=Sm    PLUS-MINUS SIGN
   4   5.461%  38.469%  U+02212 ‹−›  GC=Sm    MINUS SIGN
   5   4.196%  42.664%  U+02003 ‹ ›  GC=Zs    EM SPACE
   6   3.682%  46.346%  U+003BC ‹μ›  GC=Ll    GREEK SMALL LETTER MU
   7   3.619%  49.965%  U+003B2 ‹β›  GC=Ll    GREEK SMALL LETTER BETA
   8   3.568%  53.534%  U+003B1 ‹α›  GC=Ll    GREEK SMALL LETTER ALPHA
   9   3.426%  56.959%  U+0200A ‹ ›  GC=Zs    HAIR SPACE
  10   3.221%  60.181%  U+000B0 ‹°›  GC=So    DEGREE SIGN
  11   2.931%  63.112%  U+02009 ‹ ›  GC=Zs    THIN SPACE
  12   2.620%  65.732%  U+02019 ‹’›  GC=Pf    RIGHT SINGLE QUOTATION MARK
  13   2.506%  68.238%  U+02032 ‹′›  GC=Po    PRIME
  14   2.441%  70.679%  U+000D7 ‹×›  GC=Sm    MULTIPLICATION SIGN
  15   2.042%  72.722%  U+0201D ‹”›  GC=Pf    RIGHT DOUBLE QUOTATION MARK
  16   2.039%  74.761%  U+0201C ‹“›  GC=Pi    LEFT DOUBLE QUOTATION MARK
  17   1.536%  76.296%  U+00394 ‹Δ›  GC=Lu    GREEK CAPITAL LETTER DELTA
  18   1.415%  77.712%  U+000B5 ‹µ›  GC=Ll    MICRO SIGN
  19   1.337%  79.049%  U+003B3 ‹γ›  GC=Ll    GREEK SMALL LETTER GAMMA
  20   1.210%  80.259%  U+000E9 ‹é›  GC=Ll    LATIN SMALL LETTER E WITH ACUTE
  21   1.152%  81.410%  U+02014 ‹—›  GC=Pd    EM DASH
  22   1.135%  82.546%  U+02018 ‹‘›  GC=Pi    LEFT SINGLE QUOTATION MARK
  23   0.998%  83.543%  U+000A9 ‹©›  GC=So    COPYRIGHT SIGN
  24   0.710%  84.253%  U+02265 ‹≥›  GC=Sm    GREATER-THAN OR EQUAL TO
  25   0.600%  84.853%  U+000F6 ‹ö›  GC=Ll    LATIN SMALL LETTER O WITH DIAERESIS
  26   0.599%  85.452%  U+000B7 ‹·›  GC=Po    MIDDLE DOT
  27   0.597%  86.049%  U+02022 ‹•›  GC=Po    BULLET
  28   0.594%  86.644%  U+0223C ‹∼›  GC=Sm    TILDE OPERATOR
  29   0.573%  87.217%  U+003BA ‹κ›  GC=Ll    GREEK SMALL LETTER KAPPA
  30   0.569%  87.785%  U+000FC ‹ü›  GC=Ll    LATIN SMALL LETTER U WITH DIAERESIS
  31   0.493%  88.278%  U+02264 ‹≤›  GC=Sm    LESS-THAN OR EQUAL TO
  32   0.440%  88.718%  U+000AE ‹®›  GC=So    REGISTERED SIGN
  33   0.433%  89.152%  U+000E4 ‹ä›  GC=Ll    LATIN SMALL LETTER A WITH DIAERESIS
  34   0.422%  89.573%  U+02020 ‹†›  GC=Po    DAGGER
  35   0.407%  89.980%  U+003B4 ‹δ›  GC=Ll    GREEK SMALL LETTER DELTA 
```

检测这些的一种方法是使用 Unicode 正则表达式，该表达式表示字符必须来自拉丁文、希腊文、通用或继承脚本。

在这个语料库中，前四个包含超过 99% 的代码点。然而，在这个数据集中也有很多超低频码点不在这四种文字（*例如*西里尔文、韩文、假名、韩文等）之外。如果您将输入限制在前面列出的四个超常见脚本中，您会将它们作为误报丢弃。该数据集中有 239 个此类不同的代码点，其中最常见的前 50 个代码点如下：

```
rank  percent cumulative  code glyph  GC=??   Name
---------------------------------------------------------------------
 295   0.002%  99.828%  U+00424 ‹Ф›  GC=Lu    CYRILLIC CAPITAL LETTER EF
 381   0.001%  99.916%  U+0043A ‹к›  GC=Ll    CYRILLIC SMALL LETTER KA
 454   0.000%  99.949%  U+00413 ‹Г›  GC=Lu    CYRILLIC CAPITAL LETTER GHE
 491   0.000%  99.959%  U+0AD6D ‹국›  GC=Lo    HANGUL SYLLABLE GUG
 499   0.000%  99.961%  U+003EC ‹Ϭ›  GC=Lu    COPTIC CAPITAL LETTER SHIMA
 513   0.000%  99.965%  U+00406 ‹І›  GC=Lu    CYRILLIC CAPITAL LETTER BYELORUSSIAN-UKRAINIAN I
 528   0.000%  99.968%  U+00416 ‹Ж›  GC=Lu    CYRILLIC CAPITAL LETTER ZHE
 534   0.000%  99.969%  U+00430 ‹а›  GC=Ll    CYRILLIC SMALL LETTER A
 539   0.000%  99.970%  U+0041F ‹П›  GC=Lu    CYRILLIC CAPITAL LETTER PE
 545   0.000%  99.971%  U+00421 ‹С›  GC=Lu    CYRILLIC CAPITAL LETTER ES
 553   0.000%  99.972%  U+0D55C ‹한›  GC=Lo    HANGUL SYLLABLE HAN
 555   0.000%  99.972%  U+00404 ‹Є›  GC=Lu    CYRILLIC CAPITAL LETTER UKRAINIAN IE
 566   0.000%  99.974%  U+0C5B4 ‹어›  GC=Lo    HANGUL SYLLABLE EO
 567   0.000%  99.974%  U+0041A ‹К›  GC=Lu    CYRILLIC CAPITAL LETTER KA
 568   0.000%  99.974%  U+0041B ‹Л›  GC=Lu    CYRILLIC CAPITAL LETTER EL
 571   0.000%  99.975%  U+0B2C8 ‹니›  GC=Lo    HANGUL SYLLABLE NI
 575   0.000%  99.975%  U+0AE4C ‹까›  GC=Lo    HANGUL SYLLABLE GGA
 578   0.000%  99.976%  U+00428 ‹Ш›  GC=Lu    CYRILLIC CAPITAL LETTER SHA
 579   0.000%  99.976%  U+00454 ‹є›  GC=Ll    CYRILLIC SMALL LETTER UKRAINIAN IE
 585   0.000%  99.977%  U+00418 ‹И›  GC=Lu    CYRILLIC CAPITAL LETTER I
 587   0.000%  99.977%  U+0B2E4 ‹다›  GC=Lo    HANGUL SYLLABLE DA
 600   0.000%  99.978%  U+00440 ‹р›  GC=Ll    CYRILLIC SMALL LETTER ER
 610   0.000%  99.980%  U+00457 ‹ї›  GC=Ll    CYRILLIC SMALL LETTER YI
 614   0.000%  99.980%  U+0C74C ‹음›  GC=Lo    HANGUL SYLLABLE EUM
 623   0.000%  99.981%  U+0BD80 ‹부›  GC=Lo    HANGUL SYLLABLE BU
 624   0.000%  99.981%  U+0C545 ‹악›  GC=Lo    HANGUL SYLLABLE AG
 625   0.000%  99.981%  U+0C778 ‹인›  GC=Lo    HANGUL SYLLABLE IN
 640   0.000%  99.982%  U+0C5D0 ‹에›  GC=Lo    HANGUL SYLLABLE E
 641   0.000%  99.983%  U+0C744 ‹을›  GC=Lo    HANGUL SYLLABLE EUL
 645   0.000%  99.983%  U+00438 ‹и›  GC=Ll    CYRILLIC SMALL LETTER I
 664   0.000%  99.984%  U+0041C ‹М›  GC=Lu    CYRILLIC CAPITAL LETTER EM
 665   0.000%  99.984%  U+00436 ‹ж›  GC=Ll    CYRILLIC SMALL LETTER ZHE
 674   0.000%  99.985%  U+0C774 ‹이›  GC=Lo    HANGUL SYLLABLE I
 678   0.000%  99.985%  U+00431 ‹б›  GC=Ll    CYRILLIC SMALL LETTER BE
 679   0.000%  99.986%  U+00435 ‹е›  GC=Ll    CYRILLIC SMALL LETTER IE
 689   0.000%  99.986%  U+0B300 ‹대›  GC=Lo    HANGUL SYLLABLE DAE
 690   0.000%  99.986%  U+0BD84 ‹분›  GC=Lo    HANGUL SYLLABLE BUN
 691   0.000%  99.986%  U+0C678 ‹외›  GC=Lo    HANGUL SYLLABLE OE
 696   0.000%  99.987%  U+005DB ‹כ›  GC=Lo    HEBREW LETTER KAF
 703   0.000%  99.987%  U+0B85C ‹로›  GC=Lo    HANGUL SYLLABLE RO
 711   0.000%  99.988%  U+0041D ‹Н›  GC=Lu    CYRILLIC CAPITAL LETTER EN
 712   0.000%  99.988%  U+004D9 ‹ә›  GC=Ll    CYRILLIC SMALL LETTER SCHWA
 725   0.000%  99.988%  U+0B294 ‹는›  GC=Lo    HANGUL SYLLABLE NEUN
 726   0.000%  99.988%  U+0B9CC ‹만›  GC=Lo    HANGUL SYLLABLE MAN
 727   0.000%  99.988%  U+0C11C ‹서›  GC=Lo    HANGUL SYLLABLE SEO
 728   0.000%  99.989%  U+0C2B5 ‹습›  GC=Lo    HANGUL SYLLABLE SEUB
 729   0.000%  99.989%  U+0C601 ‹영›  GC=Lo    HANGUL SYLLABLE YEONG
 741   0.000%  99.989%  U+00441 ‹с›  GC=Ll    CYRILLIC SMALL LETTER ES
 742   0.000%  99.989%  U+00444 ‹ф›  GC=Ll    CYRILLIC SMALL LETTER EF
 743   0.000%  99.989%  U+004B0 ‹Ұ›  GC=Lu    CYRILLIC CAPITAL LETTER STRAIGHT U WITH STROKE 
```

在这 239 个不同的 trans-ASCII 码点中，其中 59 个也在 Unicode 的基本多语言平面之外，因此任何处理都必须能够处理 Unicode 的全部范围。除了其中一个之外，所有这些都是数学字母。这些是其中的前 20 名：

```
rank  percent cumulative  code glyph  GC=??   Name
---------------------------------------------------------------------
 227   0.004%  99.660%  U+1D49E ‹›  GC=Lu    MATHEMATICAL SCRIPT CAPITAL C
 240   0.003%  99.704%  U+1D4AF ‹›  GC=Lu    MATHEMATICAL SCRIPT CAPITAL T
 252   0.003%  99.738%  U+1D4AE ‹›  GC=Lu    MATHEMATICAL SCRIPT CAPITAL S
 275   0.002%  99.791%  U+1D49F ‹›  GC=Lu    MATHEMATICAL SCRIPT CAPITAL D
 279   0.002%  99.799%  U+1D4B3 ‹›  GC=Lu    MATHEMATICAL SCRIPT CAPITAL X
 289   0.002%  99.818%  U+1D4A9 ‹›  GC=Lu    MATHEMATICAL SCRIPT CAPITAL N
 291   0.002%  99.821%  U+1D4AB ‹›  GC=Lu    MATHEMATICAL SCRIPT CAPITAL P
 292   0.002%  99.823%  U+1D4A2 ‹›  GC=Lu    MATHEMATICAL SCRIPT CAPITAL G
 313   0.001%  99.854%  U+1D49C ‹›  GC=Lu    MATHEMATICAL SCRIPT CAPITAL A
 316   0.001%  99.858%  U+1D53C ‹›  GC=Lu    MATHEMATICAL DOUBLE-STRUCK CAPITAL E
 341   0.001%  99.884%  U+1D4AA ‹›  GC=Lu    MATHEMATICAL SCRIPT CAPITAL O
 430   0.000%  99.941%  U+1D4A5 ‹›  GC=Lu    MATHEMATICAL SCRIPT CAPITAL J
 450   0.000%  99.948%  U+1D4A6 ‹›  GC=Lu    MATHEMATICAL SCRIPT CAPITAL K
 458   0.000%  99.950%  U+1D4B1 ‹›  GC=Lu    MATHEMATICAL SCRIPT CAPITAL V
 461   0.000%  99.951%  U+1D4B2 ‹›  GC=Lu    MATHEMATICAL SCRIPT CAPITAL W
 468   0.000%  99.953%  U+1D4B4 ‹›  GC=Lu    MATHEMATICAL SCRIPT CAPITAL Y
 469   0.000%  99.954%  U+1D4B5 ‹›  GC=Lu    MATHEMATICAL SCRIPT CAPITAL Z
 500   0.000%  99.962%  U+1D4B0 ‹›  GC=Lu    MATHEMATICAL SCRIPT CAPITAL U
 518   0.000%  99.966%  U+1D4AC ‹›  GC=Lu    MATHEMATICAL SCRIPT CAPITAL Q
 560   0.000%  99.973%  U+1D54A ‹›  GC=Lu    MATHEMATICAL DOUBLE-STRUCK CAPITAL S 
```

其他语料库会有所不同。你必须知道你的数据集。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T11:39:32.670

不幸的是，这几乎是不可能的。很难定义每种语言使用哪些字符。（例如，英语肯定会使用 \u0000 到 \u007F 之外的许多字符，例如在许多源自法语的单词中的破折号和“é”。您在哪里划定界限。）在 CLDR 数据库中为语言定义了一些字符集合，但那里的选择可能会受到质疑。对于许多语言，集合是如此庞大和稀疏（就 Unicode 编码空间而言），以至于它们的任何正则表达式都会很长。

所以硬编码范围甚至是不够的；你需要一组范围加上单个字符。

也许最重要的问题是：你会用这个做什么？这些技术需要据此进行评估。总的来说，JavaScript 在国际化方面非常原始且有限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T12:26:36.293

正则表达式中有强大的 Unicode 支持：[http ://www.regular-expressions.info/unicode.html](http://www.regular-expressions.info/unicode.html)

但是这些特性仅在 es6 之后才在 JavaScript 中得到支持。即使在 Chrome 中也没有实现。也许，它会在您完成代码时实现。

此外，即使是英语，事情也不是那么简单：café、naïve、coördinator。

# java - java android 套接字连接

> ID：10515026
> 
> 赞同：1
> 
> 时间：2012-05-09T11:18:18.067
> 
> 标签：java, android, sockets, connection

我有一个套接字连接问题，我正在尝试将我的 android 手机与 arduino 板连接，并且板没问题 这是具有固定 IP 地址和端口号的服务器，我正在尝试从 android 发送一个字符串，它根本不会做，如果有人能在我的代码中看到一个错误，或者可能是一种检查它是否进入线程的方法，因为它应该有任何帮助

这是主要活动中的代码

```
 chcklighKitc = (CheckBox) findViewById(R.id.chcklighKitc);
    chcklighKitc.setOnClickListener(new OnClickListener(){

public void onClick(View v) {

    if (chcklighKitc.isChecked()) {
        Thread threadClient= new Thread(new ClientThread());
        threadClient.start();
        Toast.makeText(AndroidKitchenLightActivity.this,
           "Socket is send!", Toast.LENGTH_LONG).show(); 
```

这是ClientThread中的代码

```
public void run() {
    String serverIpAddr= "161.53.168.112";
    Socket socket;
    final int serverPort = 8888;

    String str="1";
    try {
        InetAddress serverAddr = InetAddress.getByName(serverIpAddr);
        socket = new Socket(serverAddr, serverPort);

         PrintWriter out = new PrintWriter(new BufferedWriter(new OutputStreamWriter(socket.getOutputStream())), true);
                                        // where you issue the commands
                                           out.println(str);
                                           out.flush();

      } catch (UnknownHostException e1) {
         e1.printStackTrace();
      } catch (IOException e1) {
         e1.printStackTrace();
      } catch (Exception e){
          Log.e("ClientActivity", "S: Error", e);
      } 
```

# php - 策划新闻点播系统

> ID：10515027
> 
> 赞同：0
> 
> 时间：2012-05-09T11:18:26.247
> 
> 标签：php, mysql

考虑到一个名为 的表中有数千条新闻`sn_news`，其中一些新闻可能同时可供`X`客户使用，但有不同的`id`，我想知道如何实现新闻排序功能！

在其面板中显示客户端 Y 的 X 新闻，如下所示：

```
ID          Category            Title
_______     __________________  ____________________________________________
1572709     Futbol Earthquakes  Lluvia de goles en San José
1568657     Eventos Locales     Maná rayó el sol de la Bahía
1562970     Deportes Locales    SJ Earthquakes vence a RSL, es líder
1546516     Locales             La magia de la música en la niñez
1546513     Locales             80 Años de Fotografía mexicana en SFMOMA
1546511     Locales             Clases gratis de diseño solar en West Valley College
1546507     Locales             Javier Sicilia visitó   12 de abril de 2012     Locales (noticias cliente)
1546504     Locales             Celebrando el español a través de la poesía
1546502     Locales             The National Hispanic University Receives Commendation from San Jose City Council
1546498     Locales             Clases de costura en el CET
1546497     Locales             Centro del Este de San José al servicio de la comunidad
1546481     Educacion           Ayuda en español para elegir universidad
1546479     Educacion           Aumentan programas de idiomas en escuelas públicas de California
1546478     Educacion           Program uses visual arts as a better way to learn English
1546477     Educacion           Niño hispano de 4 años es pintor
1546473     Educacion           Perspectivas en el Sistema Educativo 2012 
```

订购新闻的最佳方式是什么？

*   用 Y 改变新的 id X？
*   添加一个名为 的新字段，`news_order`如果客户端有 20 条新闻，它将包含根据字段排序的从 1 到 20 的数字`id`，因此排序将始终在该字段上完成？
*   还有什么办法吗？

希望我解释一下自己，如果没有，请告诉我！！

## 更新

所以只是为了澄清一些事情，这不是我的应用程序，我没有构建它并且是一个真正的 * *** * 代码我只需要“更新”它并添加一些新功能。该应用程序相对简单，但由于代码和一些数据库结构是很久以前实现的，从未得到“改进”，现在是后果。

有一个日期字段，这就是检索新闻时它们的排序方式（抱歉错误）。

与不同的重复消息`id`是因为应用程序的工作方式，它很复杂但合乎逻辑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T11:34:19.590

除了唯一标识符之外，您不应将 ID 字段用于其他任何内容。将它用于任何类型的功能，包括排序，都是不好的做法。

添加“sort_order”字段是正确的解决方案。

我仍然想知道您是否也没有发布日期的字段。如果您正在处理新闻，它似乎应该在某个地方。如果您有发布日期，那么最合适的做法是按该日期订购（大概使用“DESC”）。

但我也必须想知道，就像评论中的“最低点”一样，为什么你有不同客户的重复条目。适当的解决方案是为客户创建一个表，为新闻创建一个表，然后使用一个中间表将它们绑定在一起。但这超出了您的问题范围，因此我将其保留。

# javascript - 这种类型的img链接有插件吗？

> ID：10515028
> 
> 赞同：0
> 
> 时间：2012-05-09T11:18:39.347
> 
> 标签：javascript, jquery, image, animation, jquery-plugins

我在说这是什么类型的 JQ 插件？

[http://www.gravitatedesign.com/web-design-portfolio#filter=](http://www.gravitatedesign.com/web-design-portfolio#filter=) *

如果您单击顶部的链接

```
All Work
Featured Work
Design
CMS
Animation
Branding
Client List 
```

图像在站点周围动画。你怎么做这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:20:01.063

在我看来，这就像同位素。 [http://isotope.metafizzy.co/](http://isotope.metafizzy.co/)

# java - 使用 CSS 和 JAVA 生成 PDF

> ID：10515029
> 
> 赞同：4
> 
> 时间：2012-05-09T11:18:45.790
> 
> 标签：java, css, pdf, itext

我正在生成一个由多个表格组成的 PDF，我想知道是否有某种方法可以让我知道表格大小是否会超过 PDF 页面大小。我正在使用这些信息来决定我是以纵向还是横向模式生成 PDF。有可能得到这个尺寸吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-02T06:26:54.343

> *知道表格大小是否会超过 PDF 页面大小*

*   表格大小由您的 XHTML 表格内容（行、列、页眉、页脚等）以及您的 CSS 文档（宽度、高度和边框属性）确定。
*   渲染引擎 (ITextRenderer) 只知道您的表格大小，以及它在应用 CSS 后是否适合页面，作为将 XHTML 转换为渲染输出的过程的一部分。
*   因此，如果您要查询`ITextRenderer`此信息，则需要：

    1.  创建一个`ITextRenderer`实例，传入你`Document`的 via `renderer.setDocument()`，然后应用 CSS via `renderer.layout()`，导致所有布局计算基于原始页面方向发生
    2.  以某种方式查询以确定表格是否适合页面
    3.  如果没有，请在纵向/横向之间切换。但这意味着更改为新的 CSS，设置不同的页面形状：
        1.  选择一个适合新页面方向的新 CSS 并将其设置在您的文档中
        2.  创建一个新`ITextRenderer`实例，传入您`Document`的 via `renderer.setDocument()`，然后应用 CSS via `renderer.layout()`，从而根据新的页面方向进行所有布局计算。
        3.  通过创建 PDF 输出`renderer.createPDF()`。

**问题：**

*   这是低效且不优雅的处理。
*   这是以错误的方式做事。控制页面布局应该是设计过程的一部分，并且应该反映在 (a) 生成的内容 (XHTML) 和 (b) 格式 (CSS) 中。如果正确完成，则无需执行渲染时魔术来重新格式化整个页面。
*   在步骤 (2) 中，没有简单的查询界面可以简单地告诉您表格是否适合页面。相反，您必须查询格式化的输出块，并尝试自己确定表格在哪里以及它是否适合页面。例如：

    ```
     BlockBox root = renderer.getRootBox();
     List  pageList = root.getLayer().getPages() 
     PageBox page = (PageBox)pageList.get(2);
     List childBoxList = page.getChildren();
     Box childBox = (Box)childBoxList.get(0);
     // etc... until you locate your table 
    ```

*   在步骤 (4) 中，ITextRenderer 期望您的 CSS 从您的 XHTML 文档中链接。这意味着您首先需要修改您的 XHTML 源代码，然后您需要将它重新提交给 ITextRenderer。

**建议的替代方案：**

*   使用 2 个场景进行线框/草图设计 - 一个用于纵向，一个用于横向
*   确定2个场景下元素/行/列的大小
*   确定使用每个场景的条件逻辑，纵向 v 横向。例如，如果我的行数是 X，列数是 Y - 然后使用横向，...
*   现在创建两个 CSS 文件
*   现在，当您生成 XHTML 时，使用条件逻辑链接到正确的 CSS

# android - 扩展列表视图：单击后在内部显示文本输入

> ID：10515030
> 
> 赞同：0
> 
> 时间：2012-05-09T11:18:47.923
> 
> 标签：android, android-layout, android-sdk-2.3

我正在开发一个有列表视图的 UI。每行有 2 个信息。一个是产品名称，另一个是堆叠在一起的产品 ID。所以每一行有2行数据。

我想用这个做什么：

一旦用户单击每一行，它将进一步展开并显示一个输入和一个微调器。所以它基本上是用于输入数量和计量单位。

请让我知道这是否可以实现，如果我可以参考一些例子。

我需要的更像

Taskos 待办事项列表 | 任务列表 [https://play.google.com/store/apps/details?id=com.taskos&hl=en](https://play.google.com/store/apps/details?id=com.taskos&hl=en)

我所需要的只是该类别不可扩展。只有项目是可扩展的。我只需要一个这样的应用程序的例子，然后我就可以把它向前推进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:14:12.263

我*认为*可以做到...您需要将额外的小部件放在行布局中，填充它们并在创建列表时隐藏它们，然后在您的 onListItemCLick 中取消隐藏它们。

请注意，我不知道这是否可行，但这似乎是合理的，这也是我为实现目标所做的努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:42:19.637

[listView](http://developer.android.com/reference/android/widget/ListView.html)无法展开。但是您可以使用[expandablelistView](http://developer.android.com/reference/android/widget/ExpandableListView.html)

但是你想要的那种功能不能用这种方式完成（我猜。）。

您可以使用

```
registerForContextMenu("your list View"); 
```

注册您的列表视图

```
onCreateContextMenu 
```

对于您想要在您的情况下执行的那种操作，它与**EditText**和**Spinner**的对话框有来自用户的输入

# ocaml - 如何呈现 big_int？

> ID：10515033
> 
> 赞同：2
> 
> 时间：2012-05-09T11:19:00.203
> 
> 标签：ocaml, bignum

我正在使用`big_int`类型。我查看了 OCaml 的库`Pervasives`。

例如：在`Int32`

```
let t = 5l
Printf.printf "%ld" t 
```

如果我想声明它是一个，我`t`该如何定义？`%?d``big_int`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T11:33:19.380

下面是一个顶级会话。如果您使用编译器，该`#load`指令将成为命令行链接选项：

```
# #load "nums.cma" ;;
# let t = Big_int.big_int_of_int 5 ;;
val t : Big_int.big_int = <abstr>
# Printf.printf "%s" (Big_int.string_of_big_int t) ;;
5- : unit = () 
```

对于不适合本机的数字，请`int`使用`Big_int.big_int_of_string`. 示例：`Big_int.big_int_of_string "99999999999999999999999"`。

完整的函数列表在[这里](http://caml.inria.fr/pub/docs/manual-ocaml/libref/Big_int.html)。

最后，该`Big_int`模块相当陈旧且笨拙。该界面可以追溯到 caml-light，其中的模块系统是初级的。这就是为什么每个函数名都重复“big_int...”的原因。如果您现在正在选择一个大型整数库，我会推荐[Zarith](http://forge.ocamlcore.org/projects/zarith)，它是现代且高效的。Zarith 的缺点是它是一个单独的下载（目前）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-27T17:43:19.710

OCaml 有几个现代“大数字”库，所有接口都是关于 GNU MP：

1.  我自己的 mlgmp，它作为 libgmp-ocaml 随许多 Linux 发行版一起提供。
2.  来自 Bertrand Jeannet 的 mlgmpidl（注意：mlgmp 和 mlgmpidl 都向 ocamlfind 声明自己是 Gmp 包，因此发生了奇怪的冲突）。
3.  扎瑞斯

ZArith 更好有两个原因：

1.  它在分配 GNU MP 对象之前尽可能多地尝试对机器整数执行计算。
2.  它在 OCaml 堆内分配 GNU MP 对象，这与普通的分配方案相反`malloc()`，它不太适合函数式编程。

# web-services - 无法从命名空间“urn:Magento”导入绑定“Mage_Api_Model_Server_V2_HandlerBinding”以进行 magento 集成

> ID：10515037
> 
> 赞同：0
> 
> 时间：2012-05-09T11:19:25.667
> 
> 标签：web-services, c#-4.0

当我们使用 webreference 时，我们得到了错误。错误是

无法从命名空间“urn:Magento”导入绑定“Mage_Api_Model_Server_V2_HandlerBinding”</p>

请帮助我们

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-14T13:02:40.317

我们在管理员运行的命令提示符下执行下面的 url

C:\Program Files\Microsoft SDKs\Windows\v7.0A\bin>wsdl.exe /language:cs /out:MagentoService.cs /n:MagentoService [http://domain.com/magento16/index.php/api/ v2_soap/?wsdl](http://domain.com/magento16/index.php/api/v2_soap/?wsdl)

并且我们将 WS-i Compliance 设置为 YES（您需要转到 System / Configuration /Core Api 上的 Magento BackEnd）

在此之后它已创建代理类，然后我们更新 Web 引用，它将执行而不会出错。我们通过调用对象来访问 web 服务

我们使用了 magento 1.6.2.0 版本。对于 magento 版本 1.7.0，它会给出相同的错误

问候

桑加梅什·阿拉利

# c# - .NET DbProviderFactory 和 Singleton

> ID：10515038
> 
> 赞同：1
> 
> 时间：2012-05-09T11:19:26.740
> 
> 标签：c#, design-patterns, singleton, dbproviderfactories

我正在尝试使用 System.Data.Common 中的 DbProviderFactory、DbConnection 和其他抽象类构建通用连接类

我注意到 DbProviderFactory 和 DbConnection 都有创建命令的方法。

如果我打算实现单例模式，建议在哪个对象上（在 DbProviderFactory 对象或 DbConnection 对象上）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:21:48.113

您使用该类为您选择的连接器`DbProviderFactories`生成一个。`DBProviderFactory`使用它和您的连接字符串，您可以创建一个`DbConnection`. 有了这个`DbConnection`，您可以创建您的`DbCommand`并使用`DbProviderFactory`来创建您的`Parameter`并添加它们。没有必要单例。

# c++ - 注册表：删除系统内每个本地用户的键

> ID：10515042
> 
> 赞同：0
> 
> 时间：2012-05-09T11:19:38.597
> 
> 标签：c++, winapi, registry

我有一个特定的注册表项（由我们的软件创建），有时需要在每个本地用户帐户上删除它。因此，我尝试加载用户配置单元，然后使用 SHDeleteKey（因为密钥不为空）来完成工作。但是，SHDeleteKey 始终返回 LSTATUS 2 (ERROR_FILE_NOT_FOUND)。

每个用户的注册表项放在 HKCU\Software\XYZ 下

首先，我在我的代码中设置了所需的权限，这似乎有效（返回 val 为 TRUE）：

```
 (...)
HANDLE th;
LUID rsto;
LUID bckp;
TOKEN_PRIVILEGES tp;
TOKEN_PRIVILEGES tp2;
OpenProcessToken(GetCurrentProcess(), TOKEN_ADJUST_PRIVILEGES | TOKEN_QUERY, &th);
LookupPrivilegeValue(NULL, SE_RESTORE_NAME, &rsto);
LookupPrivilegeValue(NULL, SE_BACKUP_NAME, &bckp);
tp.PrivilegeCount = 1;
tp.Privileges[0].Attributes = SE_PRIVILEGE_ENABLED;
tp.Privileges[0].Luid = rsto;
tp2.PrivilegeCount = 1;
tp2.Privileges[0].Attributes = SE_PRIVILEGE_ENABLED;
tp2.Privileges[0].Luid = bckp;
BOOL p = AdjustTokenPrivileges(th, 0, &tp, 1024, 0, 0);
BOOL p2 = AdjustTokenPrivileges(th, 0, &tp2, 1024, 0, 0);
    (...) 
```

然后我使用 RegloadKey 加载用户配置单元。std::string 连接包含相应 ntuser.dat 文件的路径。username 是本地用户帐户名。所以 hive 应该在 HKEY_USERS\username 下加载：

```
 (...)
DWORD result = RegLoadKey(HKEY_USERS, username.c_str(), connection.c_str());
return result == ERROR_SUCCESS;
    (...) 
```

现在，我尝试删除：

```
 (...)
    k = username + "\\Software\\XYZ";
    result = SHDeleteKey(HKEY_USERS, k.c_str()); 
```

现在结果的值为 2。但密钥存在。

我究竟做错了什么？先感谢您...

**更新信息**：我意识到问题需要在 RegLoadKey 的某个地方。当我通过命令行加载配置单元时（REG.exe load "HKU\username" ...），我可以在 regedit.exe 中的 HKEY_USERS 下看到节点“username”。所有子节点都加载到该节点下。当我在 RegLoadKey 之后暂停我的程序时，节点“用户名”也显示在 HKEY_USERS 下，但该节点显示为空，因此没有可用的子节点。这怎么可能发生？这个问题快把我逼疯了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T05:20:45.463

今天再次查看我的代码，我刚刚看到我加载了“ntuser.BAT”而不是“ntuser.DAT”（两个文件都存在）。

我真的很抱歉浪费了你的时间。：-/

# php - 如何使用codeigniter将表单值插入mysql数据库

> ID：10515046
> 
> 赞同：4
> 
> 时间：2012-05-09T11:19:44.057
> 
> 标签：php, codeigniter

我是 Codeigniter 的新手。如何使用 codeigniter 将表单值存储在 mysql 中，任何人都可以帮助我...您是否可以提供任何链接...。提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-09T11:44:27.423

让我以一种简单的方式澄清你...

这将是你的控制器

```
class Site extends CI_Controller
{
function index()
{
$this->load->view('form.php');// loading form view
}

function insert_to_db()
{
$this->load->model('site_model');
$this->site_model->insert_to_db();
$this->load->view('success');//loading success view
}
} 
```

这将是您的意见。在创建视图之前，转到 autoload.php 并自动加载 url 帮助程序和数据库类。在你的 config.php 中设置 config['base_url'] = "path to your site"; 表单.php

```
<form action="<?php echo base_url();?>index.php/site/insert_into_db" method="post">
Field 1 = <input type = 'text' name='f1'>
Field 2 = <input type = 'text' name='f2'>
Field 3 = <input type = 'text' name='f3'>
<input type='submit'>
</form> 
```

成功.php

```
<b>Your data has been inserted!!!</b> 
```

在您的模型中，您需要以这种方式提取这些表单数据并插入到数据库中

site_model.php

```
class Site_model extends CI_Model
{
function insert_into_db()
{
$f1 = $_POST['f1'];
$f2 = $_POST['f2'];
$f3 = $_POST['f3'];
$this->db->query("INSERT INTO tbl_name VALUES('$f1','$f2','$f3')");
}
} 
```

在这种情况下，您的数据库有三个字段...根据您的要求修改查询

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T11:23:53.243

CodeIgniter 手册非常有帮助。

查看[数据库快速入门](http://codeigniter.com/user_guide/database/examples.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T11:22:25.957

通过[Database Class](http://codeigniter.com/user_guide/database/index.html)。它具有用于操作数据库的所有功能。如果您真的想学习 codeigniter，请花几个小时阅读[用户指南](http://codeigniter.com/user_guide/)。

# asp.net-mvc - 在查看 ASP.NET MVC 站点之前，您将如何“强制”用户填写个人资料？

> ID：10515047
> 
> 赞同：2
> 
> 时间：2012-05-09T11:19:51.030
> 
> 标签：asp.net-mvc, redirect, asp.net-membership, profile

在我的用户第一次注册后，我希望他们必须填写网站内的个人资料页面。我已经设置好了，如果他们之前没有填写过个人资料，它会在登录期间重定向他们，但是如果他们在网站内输入另一个 url，他们目前可以在重定向后自由地去任何他们想要的地方。

当用户尝试访问我网站上的任何页面直到他们完成个人资料时，要求他们访问个人资料页面的最佳方式是什么？

这是最好的做法：'如果（！用户已验证） - 重定向到配置文件页面'放置在每个控制器的顶部？有没有更优雅的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-10T21:49:06.203

从实现自定义动作过滤器（IActionFilter）开始：

```
public class ProfileRequiredActionFilter : IActionFilter
{
    #region Implementation of IActionFilter

    public void OnActionExecuting(ActionExecutingContext filterContext)
    {
        //TODO: Check if the Authenticated User has a profile.

        //If Authenicated User doesn't have a profile...
        filterContext.Result = new RedirectResult("Path-To-Create-A-Profile");
    }

    public void OnActionExecuted(ActionExecutedContext filterContext)
    {
    }

    #endregion
} 
```

然后在 Global.asax的***RegisterGlobalFilters***方法中全局注册 Action Filter ...

```
public static void RegisterGlobalFilters(GlobalFilterCollection filters)
{
    filters.Add(new ProfileRequiredActionFilter());
} 
```

注意：如果您不希望全局应用此过滤器，则可以创建一个 ActionFilterAttribute 并将其应用于控制器和/或操作方法...

```
public class ProfileRequiredAttribute : ActionFilterAttribute
{
    #region Implementation of IActionFilter

    public override void OnActionExecuting(ActionExecutingContext filterContext)
    {
        base.OnActionExecuting(filterContext);

        //TODO: Check if the Authenticated User has a profile.

        //If Authenicated User doesn't have a profile...
        filterContext.Result = new RedirectResult("Path-To-Create-A-Profile");
    }

    #endregion
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T11:28:22.583

您可以创建一个 Base 控制器并让您的所有其他控制器继承自该控制器。然后在其中有一个 OnActionExecuting 方法，例如......

```
protected override void OnActionExecuting(ActionExecutingContext context)
{
    base.OnActionExecuting(context);

    // If the user has not filled out their profile, redirect them
    if(CurrentUser != null && !CurrentUser.IsVerified)
    {
        context.Result = new RedirectResult("/User/Profile/" + CurrentUser.ID);
    }
} 
```

# iphone - 使用变量设置按钮标签

> ID：10515050
> 
> 赞同：3
> 
> 时间：2012-05-09T11:20:01.950
> 
> 标签：iphone, objective-c, ios

我有一个包含某些对象的 json 数组：名字、姓氏、唯一 ID。我能够解析它们并将它们保存在字典中，还可以检查它们是否为 NULL 条件。

我创建了一个表格，可以在其中显示名称。此外，我在每一行中也有一个按钮，并且我已经标记了它们。我想要的是，当我单击按钮时，我能够在控制台中看到从服务器获取的唯一 ID。我需要将此唯一 ID 传递给下一个视图，因为使用此唯一 ID 将帮助我在服务器上显示与该 ID 对应的视图。

[点击这里看看我到目前为止做了什么](https://stackoverflow.com/questions/10443425/xcode-parsing-json-array-to-uitableview-solved)

我通过将其添加到我的 viewDidLoad 方法进行了一些更改：

```
 for(NSDictionary *items in infos)
      {
          ....
          ....
         for(int i =0; i < len; i++)
          {
             ...
             ...
             ...

             for(NSDictionary *newItems in infoArray)
               {
                ...
                ...

                NSString *folks_IdRcv = [[items objectForKey:strr]objectForKey:@"folks_id"];
                NSLog(@"FolksID = %@", folks_IdRcv);

                NSString *folksIDString = [NSString stringWithFormat:@"%@", folks_IdRcv, nil];
                NSLog(@"folkid_display=%@", folksIDString);

                if((fName && lName && email_Id && number_id) && displayName && folksIDString != NULL)
                     {

                        ...
                        ...                            
                        [folksIDArray insertObject:folksIDString atIndex:ii];
                NSLog(@"FolksID String Name = %@", [folksIDArray objectAtIndex:(ii)]);
                ii++;
                                }
                              }
                           }
                        } 

NSMutableArray *nArray = [[NSMutableArray alloc]initWithCapacity:len];

for(int j =0; j<len ;j++)
   {

      ...
      ... 
      [nArray addObject:[folksIDArray objectAtIndex:j]];
      NSLog(@"FID Element=%@", nArray);
}

self.infos = mArray;   
[super viewDidLoad];
} 
```

对于这个特定的代码，我得到以下响应：

```
FID Element=(
400386528950544,
162622322666106,
643171434889706
) 
```

现在，我有一个表格视图，其中每一行都有一个按钮，并且我能够在每一行中显示名字和姓氏。我现在想要的是，每当我单击按钮时，该特定名称的唯一 ID 应该保存在标签中，以便我可以在按钮单击操作时将该 ID 发送到服务器。

请帮帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T11:36:37.453

在这里，我假设您可以制作唯一 id 数组的数组，并且该数组应在 .h 文件中声明或应为类成员。比使用以下代码。

```
-(IBAction)buttonClicked1:(id *)sender{
  NSString *UIDString = [uidarray objectAtIndex:[sender tag]]; // uidarray is  unique id  array 
  NSLog(@"uid for particular button=%@", UIDString);// this will give you kid for button that you tapped or clicked.
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T11:45:18.823

我对您的要求有一个想法……在 TableView 委托方法中……

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
{
.............your another code........
UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    CGRect frame = CGRectMake(0.0, 0.0, 14, 14);
    button.frame = frame;   // match the button's size with the image size

    [button setBackgroundImage:image forState:UIControlStateNormal];

    // set the button's target to this table view controller so we can interpret touch events and map that to a NSIndexSet
    [button addTarget:self action:@selector(checkButtonTapped:event:) forControlEvents:UIControlEventTouchUpInside];
    button.backgroundColor = [UIColor clearColor];
    cell.accessoryView = button;    
    return cell;
} 
```

粘贴此方法后...

```
- (void)checkButtonTapped:(id)sender event:(id)event
{
    NSSet *touches = [event allTouches];
    UITouch *touch = [touches anyObject];
    CGPoint currentTouchPosition = [touch locationInView:Yourtableview];
    NSIndexPath *indexPath = [Yourtableview indexPathForRowAtPoint: currentTouchPosition];
    if (indexPath != nil)
    {
        [self tableView: Yourtableview accessoryButtonTappedForRowWithIndexPath: indexPath];
    }
} 
```

以及在tableview的accessoryButtonTappedForRowWithIndexPath Delegate方法中......

```
- (void)tableView:(UITableView *)tableView accessoryButtonTappedForRowWithIndexPath:(NSIndexPath *)indexPath
{

       NSMutableDictionary *item = [self.arrTypes objectAtIndex:indexPath.row];//sel.arrTypes is Array Data..use your Data here and
        .......  do somthing here which you want  ......
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T11:49:02.153

标签是一种方式，另一种方式是发件人超级视图。参考下面的代码（不需要设置标签）

```
- (IBAction)clickedButton:(id)sender 
{

    UIButton *button = (UIButton *)sender;

    UITableViewCell *cell = (UITableViewCell *)button.superview;

    UITableView *tableView = (UITableView *)cell.superview;

    NSIndexPath *indexPath = [tableView indexPathForCell:cell];

     NSString* id = [Array objectAtIndex:indexPath.row];
} 
```

如果您使用的是标签，请确保标签必须是唯一的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T11:24:29.067

用这个`UIButton* btn`......

```
btn.tag. 
```

当按下按钮时

```
UIButton *button = (UIButton*)sender;
thetatosendserver = button.tag 
```

# c++ - 将浮点数输入字符串流时出现“浮点无效操作”

> ID：10515051
> 
> 赞同：3
> 
> 时间：2012-05-09T11:20:07.083
> 
> 标签：c++, floating-point-exceptions

我有一段简单的代码，它从 FORTRAN 生成的 REAL 数组中提取一个浮点数，然后将其插入到流中进行记录。虽然这适用于前 30 个案例，但在 31 日它会因“浮点无效操作”而崩溃。

代码是：

```
int FunctionDeclaration(float* mrSwap)
{
...
float swap_float;
stringstream message_stream;
...
swap_float = *(mrSwap+30-1);
...
message_stream.clear();
message_stream <<  30 << "\t" << swap_float << "\tblah blah blah \t"; 
```

调试时，崩溃前实例的 swap_float 的值（在上面的最后一行）是 1711696.3 - 除了比到目前为止的大多数值大得多之外，它没有什么特别的地方。

我也尝试用 cerr 替换 message_stream，并遇到了同样的问题。迄今为止，我一直认为 cerr 几乎是坚不可摧的——一个简单的浮子怎么能摧毁它？

**编辑：**

感谢评论：我已经添加了mrSwap的声明。mrSwap 大约有 200 长，所以我离结束还有很长的路要走。它在我的控制之外填充，并且*可能*不会填充单个条目 - 但据我所知，这只是意味着 swap_float 将设置为随机浮点数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T11:57:08.547

> 单个条目可能不会被填充 - 但据我所知，这只是意味着 swap_float 将被设置为随机浮点数？

坚决不。IEEE 浮点数中的某些位模式表示无效的数字——例如，溢出算术运算的结果，或无效的结果（例如 0.0/0.0）。这里令人费解的是，调试器显然接受该数字为有效，而`cout`没有。

Try getting the bit layout of `swap_float`. On a 32-bit system:

```
int i = *(int*)&swap_float; 
```

Then print `i` in hexadecimal, and let us know what you see.

**Updated to add:** From Mike's comment, i=1238430338, which is 49D0F282 in hex. This is a valid floating-point number, equal to exactly 1711696.25\. So I don't know what's going on, I'm afraid. The only thing I can suggest is that maybe the compiler is loading the invalid floating-point number directly from the `mrSwap` array into the floating-point register bank, without going through `swapFloat`. So the true value of `swapFloat` is simply not available to the debugger. To check this, try

```
int j = *(int*)(mrSwap+30-1); 
```

and tell us what you see.

**再次更新添加：**另一种可能性是延迟浮点陷阱。浮点协处理器（这些天内置在 CPU 中）由于某些非法操作而产生浮点中断，但直到尝试*下一个*浮点操作时才会注意到该中断。所以这个崩溃可能是*之前*的浮点运算的结果，它可能在任何地方。祝你好运……

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-02T15:27:05.213

我只是添加此答案以突出显示上述 TonyK 答案中的正确解决方案 - 因为我们做了几个循环，答案已被编辑，并且由于评论中有几个要点，实际答案可能不会立即显现。所有的功劳都应该归功于 TonyK 的解决方案。

**“另一种可能性是延迟浮点陷阱。浮点协处理器（这些天内置在 CPU 中）由于某些非法操作而产生浮点中断，但直到下一次浮点时才会注意到中断点操作被尝试。所以这个崩溃可能是之前的浮点操作的结果，它可能在任何地方。**- 托尼克

这确实是问题所在：在我使用 IsSame 的比较中，另一个值是 NaN（在这种情况下这是一个有效值），尽管它很高兴地从 swap_float 中减去它，但它在表示将下一个操作报告为错误。我不得不说我完全没有意识到这是可能的——我认为如果它有效，它就会有效。

# wcf - WCF 服务监听器

> ID：10515064
> 
> 赞同：0
> 
> 时间：2012-05-09T11:21:06.660
> 
> 标签：wcf

我需要创建一个 WCF 服务，它将等待（侦听）从网站发送的对象，当收到对象时，它必须联系另一个服务并发送一些数据。任何人都可以至少帮我一些起始代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T02:44:08.060

这里没有给你代码[，而是一个视频。](http://weblogs.asp.net/dwahlin/archive/2007/02/03/video-creating-a-service-with-windows-communication-service-wcf.aspx)它展示了如何完成公开一个简单的服务。您可以复制他的代码并学习一些您正在做的事情。

一旦你有一个服务**暴露=监听**，你可以编写代码让它**消费=联系另一个服务**。这将在您的公开服务被调用时触发的方法中发生。调用第二个服务并为其提供数据。

如果数据是网站发送给您的服务的对象。比你可以跳过一个步骤，只需从网站上打电话:)

另请阅读以下链接。即使你不明白这一切也没关系。我也不是第一次阅读它们。

[http://msdn.microsoft.com/en-us/library/bb332338.aspx](http://msdn.microsoft.com/en-us/library/bb332338.aspx)

[http://msdn.microsoft.com/en-us/library/ms734712.aspx](http://msdn.microsoft.com/en-us/library/ms734712.aspx)

[http://msdn.microsoft.com/en-us/library/cc668810.aspx](http://msdn.microsoft.com/en-us/library/cc668810.aspx)

# ruby-on-rails - 单页导轨上的多个表单

> ID：10515070
> 
> 赞同：1
> 
> 时间：2012-05-09T11:21:35.480
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我正在 Rails 3.2 中构建一个 Web 应用程序，其中我有一个人模型，它有多个与之关联的地址。现在我正在尝试通过此人的编辑窗口添加新地址。

要创建页面布局，我使用 bootstrap。

我创建了一个简单的编辑视图，我能够编辑一个人的所有详细信息，并且它有一个简单的表格，显示与其关联的地址。此视图是使用 simple_form_for 创建的，并且没有将远程标记设置为 true。

在表格下方有一个按钮，可以远程加载新地址的视图，这是通过以下代码完成的：

```
=link_to 'Add new address', new_address_path(:addressable_id => @person.id, :addressable_type => @person.class.name), :data => {:toggle => "modal", :target => "#newAddressWindow"}, :remote => true, :class => 'btn'

.modal#newAddressWindow{:style => "display: none;"} 
```

这将通过以下代码从引导程序在模式对话框中加载一个新表单：

地址控制器：

```
def new
    @address = Address.new

    @address.addressable_type = params[:addressable_type]
    @address.addressable_id = params[:addressable_id]

    respond_to do |format|
      format.html
      format.json { render json: @address }
      format.js
    end
end 
```

地址/new.js.erb

```
if ($("#newAddressWindow").is(':empty')) {
    $("#newAddressWindow").append(
        "<%= escape_javascript(render :partial => 'form') %>"
    );
} 
```

地址/_form.html.haml

```
= simple_form_for(@address, :remote => true) do |f|
  .modal#myModal
    .modal-header
      %button.close{:href => "#", :data => {:dismiss => "modal"}}x
      %h3 Adres
    .modal-body
      = f.input :postal_code
      = f.input :number
      = f.input :city
      = f.input :addressable_id, :as => :hidden
      = f.input :addressable_type, :as => :hidden
    .modal-footer
      %a.btn{:href => "#", :data => {:dismiss => "modal"}} Close
      = f.button :submit, :class => "btn-primary" 
```

现在我想要的是提交地址并在人的表格中显示新提交的地址。但是当我按下提交按钮时，地址的创建操作被称为正常的 html 调用，正如我从服务器日志中看到的那样，由于表单中的远程，我希望它是对服务器的 ajax 调用。提交后，服务器还会将地址的创建页面重定向给我。

这是我在服务器日志中看到的：

> 在 2012-05-09 13:10:14 +0200 开始 POST "/addresses" for 84.107.25.142 由 AddressesController#create as HTML 处理
> 
> 参数：{"utf8"=>"✓", "authenticity_token"=>"WBBKxMftlsvHF5B6zgJw/wtBdF4IibquJQ6HrM6b0cQ=", "address"=>{"postal_code"=>"5", "number"=>"6", "city "=>"7", "addressable_id"=>"2", "addressable_type"=>"Person"}, "commit"=>"创建地址"}

这是地址控制器的创建动作

```
def create
  @address = Address.new(params[:address])
  respond_to do |format|
    format.html
    format.json { render json: @address }
    format.js
  end
end 
```

# salesforce - 根据 Salesforce 中的角色创建视图

> ID：10515071
> 
> 赞同：0
> 
> 时间：2012-05-09T11:21:44.167
> 
> 标签：salesforce

如果我将两个用户分配给两个角色，比如说 CSM 和销售代表。如果我是销售代表，并且我转到活动选项卡并单击直接邮件视图以查看直接邮件类型的记录，我将获得一个结果集。现在，如果 CSM 用户试图通过再次单击 Direct mail 视图访问相同的视图，他应该能够访问不同的集合，即不同类型的直接邮件记录集。我如何做到这一点。这是我现在任务的重中之重。在此先感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T20:49:00.443

You could create two views with the same name then make them each visible to the appropriate set of users.

You need to create two **Views**, one that corresponds to each of the groups. For simplicity, you can name the Views the same thing so long as the Unique Name is, obviously, unique. I would recommend something like `Direct_Mail_Sales` and `Direct_Mail_CSM` for the unique names.

Set up the criteria for the views however you'd like.

When you get to the bottom of the configuration for each view, make sure to select "Visible to certain **groups of users**" and select the corresponding **Role** from the list. This will make sure that the view is only visible to the appropriate role.

Since The views have the same name, it will appear to the end user to be the same view.

# c++ - 宏字符串：#define __T(x) x 是什么意思？和 __T(#x)？

> ID：10515073
> 
> 赞同：4
> 
> 时间：2012-05-09T11:21:48.380
> 
> 标签：c++, c, visual-c++

这是什么意思？

```
#define __T(x)  x 
```

只返回x？

我正在使用以前从未见过的语法查看代码：

```
#define CREATE_ENCODER(CODEC) \
strcpy(codecName, __T(#CODEC); \
pCodec = new CODEC##VideoEncoder();
if(parFileName) \
{  pEncoderParams = new CODEC##EncoderParams; \
} 
```

# 有什么用？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-09T11:22:34.573

是的，该定义被简单地替换为传递的值。如果您想在编译时确定是否要通过转换函数（`#define __T(x) translate(x)`）传递值（），则通常使用这种定义`#define __T(x) x`。

`#`对传递的值进行字符串化：http: [//gcc.gnu.org/onlinedocs/cpp/Stringizing.html](http://gcc.gnu.org/onlinedocs/cpp/Stringizing.html)并且
`##`是连接运算符：http: [//gcc.gnu.org/onlinedocs/cpp/Concatenation.html](http://gcc.gnu.org/onlinedocs/cpp/Concatenation.html)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-09T11:37:43.063

实际上 __T 用于将字符串转换为 wchar_t* 或 char*，在 tchar.h 中你有：

```
#define __T(x)      L ## x 
```

在启用 UNICODE 时使用，并且

```
#define __T(x)      x 
```

当它被禁用时

如果要在 UNICODE 和非 UNICODE 编译上编译您的代码，请使用：

TCHAR* sz = __T("我的文字");

大多数 WINAPI 函数使用 TCHAR* 或其某些形式

其实我更喜欢 _T() 版本，从来不知道 __T 版本存在，在 tchar.h 的底部你定义了它：

```
#define _T(x)       __T(x)
#define _TEXT(x)    __T(x) 
```

回到你的例子：

```
strcpy(codecName, __T(#CODEC)); \ 
```

相当于：

```
strcpy(codecName, "CODEC"); \ 
```

在非 unicode 构建上，以及

```
strcpy(codecName, L"CODEC"); \ 
```

在 UNICODE 构建

非常重要！！：使用 _T 或 __T 并不足以确保您的代码是 UNICODE 兼容的。它将更容易调用 WINAPI 函数。您必须准备代码以使用 UNICODE。

# javascript - 可以在 JQuery 方法链上调用 JQuery 插件，还是需要在选择器之后直接调用它？

> ID：10515074
> 
> 赞同：2
> 
> 时间：2012-05-09T11:21:48.377
> 
> 标签：javascript, jquery-plugins, jquery-selectors, jquery

我很难让我的文本区域自动垂直扩展。

我有一些代码可以帮助使 textarea 自动垂直扩展，并且由于某种原因，当我清除所有 JS 并提供一个参考 textarea 的选择器时它可以工作，例如`$('textarea').autoGrow()`；

在方法链上调用插件会阻止它工作。例如

```
micropostBox.hide().removeClass("micropost_content")
.addClass("micropost_content_expanded").show().autoGrow(); 
```

我建立了插件代码工作，因此将我所有的工作代码复制到同一页面并将`autoGrow`代码应用到我的`textarea`但它似乎没有响应。我注意到我使用的代码的插件使用了 bind 和 unbind 方法。在我的代码中，我使用了 on 和 off 方法`JQuery`，想知道这是否是我的自动调整大小`textarea`不起作用的原因？

这是代码：http: [//jsfiddle.net/erU5J/101/](http://jsfiddle.net/erU5J/101/)

**自动增长插件js代码**

```
$(function($) {
    $.fn.autoGrow = function() {
        return this.each(function() {
            var txtArea = $(this);
            var colsDefault = txtArea.attr('cols');
            var rowsDefault = txtArea.attr('rows');

            var updateSize = function() {
                var linesCount = 0;
                var lines = txtArea.attr('value').split('\n');

                for (var i = lines.length - 1; i >= 0; --i) {
                    linesCount += Math.floor((lines[i].length / colsDefault) + 1);
                }

                if (linesCount >= rowsDefault) {
                    txtArea.attr('rows', linesCount + 1);
                }
                else {
                    txtArea.attr('rows', rowsDefault);
                }
            };
            txtArea.unbind('.autoGrow').bind('keyup.autoGrow', updateSize).bind('keydown.autoGrow', updateSize).bind('change.autoGrow', updateSize);
        });
    };
}); 
```

**我的js代码**

```
$(function() {

    $("div.microposts").on("focus", "textarea#micropostBox", function() {

        var micropostForm = $(this).parent(),
            micropostBox = micropostForm.find('textarea#micropostBox'),
            micropostButton = micropostForm.find("input#micropostButton"),
            xButton = micropostForm.find("div.xButton");

        micropostBox.prop('rows', 7);
        micropostForm.find('div#micropostOptions').removeClass('micropostExtraOptions');
        micropostForm.find('div#postOptions').show();
        $.trim(micropostBox.val()) == '' ? micropostButton.addClass("disabledMicropostButton").show()

        :

        micropostButton.prop('disabled', false);

        micropostBox.hide().removeClass("micropost_content").addClass("micropost_content_expanded").show().autoGrow();

        xButton.show();
        micropostButton.prop('disabled', true);

        micropostBox.off().on("keypress input change", function() {

            micropostButton.prop({
                disabled: !$.trim($(this).val()) != ''
            });

            $.trim($(this).val()) != '' ? micropostButton.removeClass("disabledMicropostButton").addClass("activeMicropostButton")

            :

            micropostButton.removeClass("activeMicropostButton").addClass("disabledMicropostButton");

        });

        xButton.on('click', function() {

            micropostBox.removeClass("micropost_content_expanded").addClass("micropost_content");
            micropostForm.find('div#micropostOptions').addClass('micropostExtraOptions');
            micropostBox.val("");
            micropostForm.find('div#postOptions').hide();
            xButton.hide();
            micropostButton.hide();
            micropostBox.removeAttr('style');
            micropostBox.prop('rows', 0);
            micropostForm.find('.imagePreview > img').remove();
            micropostForm.find('.imagePreview').hide();

        });

    });

});

$(function() {

    $('div.microposts').on('click', 'li#addImage', function() {

        var form = $(this).parents('form#new_micropost'),
            fileField = form.find('input#micropost_image');

        fileField.trigger('click');
    });

});

$(function() {

    $('input#micropost_image').change(function(evt) { //.off() make sautoresize work
        var image = evt.target.files[0],
            form = $(this).parents('form#new_micropost'),
            imagePreviewBox = form.find('div.imagePreview'),
            reader = new FileReader();

        reader.onload = function(evt) {
            var resultdata = evt.target.result,
                img = new Image();

            img.src = evt.target.result;
            imagePreviewBox.show().prepend(img);

        };

        reader.readAsDataURL(image);

    });
});​ 
```

**文本区域**

```
 <textarea class="micropost_content" cols="40" id="micropostBox" name="micropost[content]" placeholder="" rows="0"></textarea> 
```

最好在 jsfiddle 上查看一个工作示例。我的目标是在使用 textarea 中的图像上传按钮将图像添加到页面之前和之后自动调整 textarea 的大小。

亲切的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T11:24:09.423

这取决于插件调用之前的方法是否返回了包含需要附加插件的元素的 jQuery 对象。

以下是一些返回和不返回您开始使用的元素的方法示例：

```
$('element')           //get an element
    .contents()        //get an elements contents
    .wrapAll('<div>')  //wrapAll contents with div and returns the contents, not wrapper
    .parent()          //the wrapper
    .parent()          //the element
    .myPlugin()        //we attach a plugin to element

$('<div>')
    .appendTo('body')  //appendTo returns the same element, the div
    .myPlugin()        //attaches to the div

$('element')           //get an element
    .text()            //get its text
    .myPlugin()        //chaining isn't possible since text() returns a string 
```

更好地阅读 jQuery 中每个方法的文档及其返回的内容。有些 DOM 方法通常返回相同的元素，有些不返回，有些不返回元素而是返回值。

综上，可以在链后附加插件吗？是的，这取决于。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:32:55.200

参考 jQuery 的文档

[http://docs.jquery.com/Plugins/Authoring#Maintaining_Chainability](http://docs.jquery.com/Plugins/Authoring#Maintaining_Chainability)

# ruby - 无法将符号转换为整数 + Rails 3.2 嵌套属性

> ID：10515078
> 
> 赞同：3
> 
> 时间：2012-05-09T11:22:00.737
> 
> 标签：ruby, ruby-on-rails-3, forms, nested-attributes

我正在做一个简单的项目来测试 Rails 3.2 的嵌套属性。但是，我在尝试提交表单时遇到了这种错误：

```
can't convert Symbol into Integer 
```

**post.rb 和 comment.rb**

```
class Post < ActiveRecord::Base
  attr_accessible :title, :comments_attributes
  has_many :comments

  accepts_nested_attributes_for :comments
  validates_presence_of :title
end

class Comment < ActiveRecord::Base
  attr_accessible :comment, :author

  belongs_to :post

  validates_presence_of :comment
  validates_presence_of :author
end 
```

**post_controller.rb**

```
def new
  @post = Post.new
  @post.comments.build

  respond_to do |format|
    format.html # new.html.erb
    format.json { render json: @post }
  end
end 
```

**_form.html.erb**

```
<%= form_for(@post) do |f| %>
  <% if @post.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@post.errors.count, "error") %> prohibited this post from being saved:</h2>

      <ul>
      <% @post.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :title %><br />
    <%= f.text_field :title %>
  </div>

  <%= f.fields_for :comments_attributes do |builder| %>
    <fieldset>
        <%= builder.label :comment %><br />
        <%= builder.text_field :comment %><br />

        <%= builder.label :author %><br />
        <%= builder.text_field :author %>
    </fieldset>
  <% end %>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

**参数**

```
{"utf8"=>"✓",
 "authenticity_token"=>"gNA0mZMIxkA+iIJjw8wsddcKxvmzaFnrgiHvFw1OrYA=",
 "post"=>{"title"=>"Dummy Title",
 "comments_attributes"=>{"comment"=>"Dummy Comment",
 "author"=>"Dummy Author"}},
 "commit"=>"Create Post"} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T12:48:15.697

我同意没有堆栈跟踪和创建方法很难排除故障的评论，但话虽如此，这看起来很奇怪：

```
 <%= f.fields_for :comments_attributes do |builder| %> 
```

这些字段适用于您的`comment`对象，对吗？与 post 对象相反`comment_attributes`（后者在这里没有意义，至少在第一次阅读时）。

您可以尝试更改`:comments_attributes`为`:comments`.

# java - NFC 从 Android 2.3.3 接收 NDEF 标签

> ID：10515080
> 
> 赞同：0
> 
> 时间：2012-05-09T11:22:15.147
> 
> 标签：java, android, nfc, android-beam, ndef

我一直在开发一个通过 Android Beam 发送 NDEF 消息的 Android 应用程序和一个接收它们的桌面应用程序。

一切都按预期工作；但是，我个人认为 Android Beam 的“Tab to Beam”屏幕过于间接。我知道无法抑制“Beam-Screen”。我不想创建一个应用程序，它能够从我的 Android 手机接收简单的 NDEF 标签（使用 NfcAdapter.enableForegroundNdefPush() 发送）。

谁能给我一些线索来实现这一目标？有我可以使用的包吗？我尝试使用 .net，但没有 API。我更喜欢java。

硬件：4.0.4 安卓。ACR122 nfc 读取器/写入器。

任何建议都会对我有所帮助。

在此先感谢 MB

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T16:03:42.447

回答我自己的问题：

[http://code.google.com/p/ismb-npp-java/wiki/NppFromACR122ToPhone](http://code.google.com/p/ismb-npp-java/wiki/NppFromACR122ToPhone)

这对我有用！它不是很稳定，但它可以工作......我创建了一个 GUI 并融合了两个主要类。我现在可以通过一个应用程序发送和接收。

谨防！ics（冰淇淋三明治）在识别简单的 NDEF 动作方面存在问题。我用的是 2.3.3。

[http://www.nfcrumors.com/12-16-2011/ice-cream-sandwich-bug-nfc-tag/](http://www.nfcrumors.com/12-16-2011/ice-cream-sandwich-bug-nfc-tag/)

如果您想在 Android 4.0.x 中使用 NFC，您应该使用 Android Beam（来自 google），它更容易实现。

问候

# android - Android c2dm 注册失败

> ID：10515087
> 
> 赞同：-2
> 
> 时间：2012-05-09T11:22:48.660
> 
> 标签：android, registration, android-c2dm

C2DM 需要多少天才能激活注册？我收到了一封电子邮件，表明这需要一天左右的时间，但是当我尝试注册设备时，我不断收到“身份验证失败”的消息。

我绝对确定我没有在代码、配置或发件人电子邮件中犯任何错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:42:12.180

要回答您的问题，从您收到电子邮件的那一刻起，最多需要 1 天，最多 2 天（我没有听说需要更长时间的案例）。如果超过 2 天过去了，问题可能是由于您，而不是 Google 服务器。

谷歌具体解释了什么`AUTHENTICATION_FAILED`意思： [看看这里。](https://developers.google.com/android/c2dm/#handling_reg)确保您使用正确的凭据。

仅供参考，避免说你对你的代码 100% 肯定，并发布有意义的代码片段，以防万一。

# coldfusion - 使用 CF 9 脚本如何同时上传文件和重命名？

> ID：10515089
> 
> 赞同：0
> 
> 时间：2012-05-09T11:23:03.357
> 
> 标签：coldfusion, coldfusion-9

使用 CF 9 脚本如何同时上传文件和重命名？

下面是我到目前为止工作的一个例子，但我无法动态获取图像上传的文件扩展名。

```
local.results=fileUpload("D:\wwwroot\imageStore\#local.hash#.#cffile.serverFileExt#","image","","makeUnique"); 
```

cffile.serverFileExt = 错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:48:17.140

serverFileExt 值在上传完成后才可用。您需要上传文件，然后从结果结构中获取服务器文件扩展名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T13:50:10.543

文件上传后，您可以使用 fileMove 在脚本中重命名。

[文件移动](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-6d9d.html)

# jquery - 使用 JQ 格式化文本 + 创建元素

> ID：10515091
> 
> 赞同：0
> 
> 时间：2012-05-09T11:23:04.810
> 
> 标签：jquery

我有两段 jquery 代码，它们完全分开工作，但在一起 - 不。

基本上，有一些代码可以生成 textareas（具有不同的 id），以及允许格式化 textareas 中的文本的代码。当 textarea 中的文本加粗时，它需要保持这样，当我生成第二个 textarea 并将其加粗时，它也需要保持粗体。这里是：

```
<button id="bold">B</button>
<button id="add_txt">Add txtarea</button> 

<div id="vk_main">

</div>

var c = 0;
$.activeEl = $();

$('#add_txt').on('click', function() {
    var $div = $('<textarea id="ta_' + (c) + '">Text here.</textarea>');
    $('#vk_main').append($div);
});

$("textarea").focus(function() {
    $.activeEl = $(this);
});

$("#bold").click(function() {
    $("textarea").css("font-weight", "");
    $.activeEl.css("font-weight", "bold");
}); 
```

工作示例：http: [//jsfiddle.net/JohnnyNT/qhjJs/](http://jsfiddle.net/JohnnyNT/qhjJs/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T11:32:28.407

如果您更改具有焦点的文本区域的样式，请尝试此[http://jsfiddle.net/qhjJs/3/](http://jsfiddle.net/qhjJs/6/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T11:28:15.720

您在`activeEl`变量上存在范围问题。试着把它放在一些命名空间上，比如 jQuery 对象：

```
var c = 0;
$.activeEl = $();

$('#add_txt').on('click', function() {
    var $div = $('<textarea id="ta_' + (c) + '">Text here.</textarea>');
    $('#vk_main').append($div);
});

$("textarea").focus(function() {
    $.activeEl = $(this);
});

$("#bold").click(function() {
    $("textarea").css("font-weight", "");
    $.activeEl.css("font-weight", "bold");
});​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T11:29:09.057

尝试这个：

```
$("textarea").live("focus",function() {
   $.activeEl = $(this);
});

$("#bold").click(function() {
    $.activeEl.css("font-weight", "bold");
}); 
```

[http://jsfiddle.net/qhjJs/5/](http://jsfiddle.net/qhjJs/5/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T11:33:30.897

在为 textarea 绑定焦点事件时，该元素将不存在。

你应该做这个：

```
$("textarea").live('focus', function() {
    activeEl = $(this);
}); 
```

[http://jsfiddle.net/YqvWg/](http://jsfiddle.net/YqvWg/)

# javascript - 创建新视图时调用渲染函数

> ID：10515092
> 
> 赞同：1
> 
> 时间：2012-05-09T11:23:06.400
> 
> 标签：javascript, backbone.js

我正在查看这个示例[Introduction to Backbone.js Part 2](http://www.joezimjs.com/javascript/introduction-to-backbone-js-part-2-views-video-tutorial/)。

在这个例子中，当我点击按钮时，渲染函数被调用：

```
events: {
    "click button": "render"
}, 
```

加载模型时如何调用渲染函数？

```
var view = new View({ model: model }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:34:39.420

您只需将以下行添加`this.render();`到视图类中的初始化函数中

```
initialize: function()
{
    this.template = $('#list-template').children();
    this.render();
}, 
```

# c# - 当客户端设置为未来的日期时间与服务器时，是否有最大时间戳有效性持续时间

> ID：10515093
> 
> 赞同：1
> 
> 时间：2012-05-09T11:23:11.687
> 
> 标签：c#, wcf, nettcpbinding

我们在自定义绑定上设置安全性，如下所示：

```
var lSecurity = lCustomBinding.Elements.Find<TransportSecurityBindingElement>();
                lSecurity.LocalClientSettings.DetectReplays = false;
                lSecurity.LocalServiceSettings.DetectReplays = false;
                lSecurity.LocalClientSettings.TimestampValidityDuration = TimeSpan.FromDays(7);
                lSecurity.LocalServiceSettings.TimestampValidityDuration = TimeSpan.FromDays(7);
                lSecurity.LocalClientSettings.MaxClockSkew = TimeSpan.FromDays(7);
                lSecurity.LocalServiceSettings.MaxClockSkew = TimeSpan.FromDays(7); 
```

现在我们发现，如果我们通过将客户端设置回从现在到 7 天的任何时间来测试上述内容，它就可以工作。但是，当我们将客户端设置为未来 9 小时以上的时间时，我们会遇到异常。

我们唯一发现的是另一个线程末尾的一些晦涩的引用：

[http://social.msdn.microsoft.com/Forums/en/wcf/thread/7c3a7a7e-b9a5-4198-9a29-c6d4e408d36d](http://social.msdn.microsoft.com/Forums/en/wcf/thread/7c3a7a7e-b9a5-4198-9a29-c6d4e408d36d)

有人有什么想法吗？

**更新：** 我们得到的异常现在添加在下面。似乎服务器拒绝了客户端消息：

```
System.ServiceModel.Security.MessageSecurityException occurred
  Message=An unsecured or incorrectly secured fault was received from the other party. See the inner FaultException for the fault code and detail.
  Source=mscorlib
  StackTrace:
    Server stack trace: 
       at System.ServiceModel.Channels.SecurityChannelFactory`1.SecurityRequestChannel.ProcessReply(Message reply, SecurityProtocolCorrelationState correlationState, TimeSpan timeout)
       at System.ServiceModel.Channels.SecurityChannelFactory`1.SecurityRequestChannel.Request(Message message, TimeSpan timeout)
       at System.ServiceModel.Security.SecuritySessionSecurityTokenProvider.DoOperation(SecuritySessionOperation operation, EndpointAddress target, Uri via, SecurityToken currentToken, TimeSpan timeout)
       at System.ServiceModel.Security.SecuritySessionSecurityTokenProvider.RenewTokenCore(TimeSpan timeout, SecurityToken tokenToBeRenewed)
       at System.IdentityModel.Selectors.SecurityTokenProvider.RenewToken(TimeSpan timeout, SecurityToken tokenToBeRenewed)
       at System.ServiceModel.Security.SecuritySessionClientSettings`1.ClientSecuritySessionChannel.RenewKey(TimeSpan timeout)
       at System.ServiceModel.Security.SecuritySessionClientSettings`1.ClientSecuritySessionChannel.SecureOutgoingMessage(Message& message, TimeSpan timeout)
       at System.ServiceModel.Security.SecuritySessionClientSettings`1.ClientSecurityDuplexSessionChannel.Send(Message message, TimeSpan timeout)
       at System.ServiceModel.Channels.ClientReliableChannelBinder`1.DuplexClientReliableChannelBinder`1.OnSend(TDuplexChannel channel, Message message, TimeSpan timeout)
       at System.ServiceModel.Channels.ReliableChannelBinder`1.Send(Message message, TimeSpan timeout, MaskingMode maskingMode)
       at System.ServiceModel.Channels.SendReceiveReliableRequestor.OnRequest(Message request, TimeSpan timeout, Boolean last)
       at System.ServiceModel.Channels.ReliableRequestor.Request(TimeSpan timeout)
       at System.ServiceModel.Channels.ClientReliableSession.Open(TimeSpan timeout)
       at System.ServiceModel.Channels.ClientReliableDuplexSessionChannel.OnOpen(TimeSpan timeout)
       at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
       at System.ServiceModel.Channels.ServiceChannel.OnOpen(TimeSpan timeout)
       at System.ServiceModel.Channels.CommunicationObject.Open(TimeSpan timeout)
       at System.ServiceModel.Channels.ServiceChannel.CallOpenOnce.System.ServiceModel.Channels.ServiceChannel.ICallOnce.Call(ServiceChannel channel, TimeSpan timeout)
       at System.ServiceModel.Channels.ServiceChannel.CallOnceManager.CallOnce(TimeSpan timeout, CallOnceManager cascade)
       at System.ServiceModel.Channels.ServiceChannel.EnsureOpened(TimeSpan timeout)
       at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
       at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
       at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)
    Exception rethrown at [0]: 
       at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
       at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
       at CompuLoan.Maintenance.IMaintenanceService.IsLicensed(String pHardwareId, Boolean pUseLicense)
       at CompuLoan.Maintenance.MaintenanceServiceClient.IsLicensed(String pHardwareId, Boolean pUseLicense) in C:\Development\compuloan\Source\CompuLoan\Service References\Maintenance\Reference.cs:line 5156
       at CompuLoan.App.IsLicensed(Boolean pUseLicense) in C:\Development\compuloan\Source\CompuLoan\App.xaml.cs:line 365
  InnerException: System.ServiceModel.FaultException
       Message=The security context token is expired or is not valid. The message was not processed.
       InnerException: 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T11:10:43.050

这是会话密钥的到期，与时间戳不同。例如，您关闭建立安全上下文（或不使用 CreateSecureConversationSecurity），您不应该得到此异常。

否则尝试增加其他值，例如 InactivityTimeout、IssedCookieLifetime、NegotiationTimeout、SessionKeyRenewalInterval 和 SessionKeyRolloverInterval。

如果您在服务器上打开 WCF 跟踪并查看错误的确切堆栈跟踪，也许我们可以深入了解确切的属性。

# android - Android 自定义启动器应用程序

> ID：10515096
> 
> 赞同：0
> 
> 时间：2012-05-09T11:23:16.913
> 
> 标签：android, launcher

我正在开发一个自定义启动器应用程序。我想获取诸如“*我的设备上安装了多少个摄像头、消息或浏览器应用程序*”之类的信息，可以是默认应用程序还是第三方应用程序？如果对此有任何想法，请建议我。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T11:28:04.227

您可以使用`PackageManager`来了解已安装的应用程序。但是，您没有可靠的方法来确定其中哪些是“相机”或“消息”或“浏览器”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:29:14.727

要获得所需的信息，您需要使用`PackageManager`class 以及它提供的任何其他内容。例如，以下代码检索可用“应用程序”列表，即在各自的 AndroidManifest 文件中使用 Launch Intent 定义的活动 - 以及包含它们的 .app 文件、启动器标签和图标等。

```
PackageManager pm = getPackageManager();
Intent intent = new Intent(Intent.ACTION_MAIN, null);
String _label, _class, _src;
Drawable _icon;

for (ResolveInfo rInfo : pm.queryIntentActivities(intent, PackageManager.PERMISSION_GRANTED)) {
    if (pm.getLaunchIntentForPackage(rInfo.activityInfo.packageName) == null) {
        continue;
    }
    _class = rInfo.activityInfo.packageName;
    _label = rInfo.activityInfo.loadLabel(pm).toString();
    _src = rInfo.activityInfo.applicationInfo.sourceDir;
    _icon = rInfo.activityInfo.loadIcon(pm);

    Log.d("PackageList", "label: " + _label + ", package: " + _class + ", sourceDir: " + _src + ", icon: " + (_icon == null ? "blank" : "present"));
} 
```

# android - 获取未读邮件计数 gmail

> ID：10515097
> 
> 赞同：2
> 
> 时间：2012-05-09T11:23:26.913
> 
> 标签：android

关于 SO 的问题之一中提到的 Gmail.java 链接已损坏。

我的代码是

```
String account="abc.xyz@gmail.com";
      Uri LABELS_URI = Uri.parse("content://gmail-ls/unread/");
      Log.d("pavan","label "+LABELS_URI );
      Uri ACCOUNT_URI = Uri.withAppendedPath(LABELS_URI, account);
      Log.d("pavan","label "+ACCOUNT_URI );
      ContentResolver contentResolver= this.getContentResolver();
      Log.d("pavan","contentResolver "+contentResolver );
      Cursor cursor = contentResolver.query(ACCOUNT_URI, null, null, null, null); 
```

但是 contentResolver 行抛出错误，logcat 说：找不到 gmail-ls 的提供者信息。

任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:26:45.850

如果满足您的需求，请使用[Android Gmail API 。](https://developers.google.com/gmail/android/)否则，Gmail 应用程序[将不再支持访问](http://commonsware.com/blog/2011/08/08/gmail-gone-risk-undocumented-apis.html)，例如您正在执行的操作。

# java-me - 为 J2me 应用程序设置权限的替代方法

> ID：10515098
> 
> 赞同：2
> 
> 时间：2012-05-09T11:23:38.857
> 
> 标签：java-me, midp, j2mepolish, jsr82

目前我正在使用 jad 设置 http 和蓝牙权限。

但我对这种方法有疑问。部分手机不支持蓝牙 API，因此手机不支持蓝牙 API，因此不允许安装该应用程序。

有没有其他设置这些权限的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-25T07:34:32.110

这是解决方案：

```
MIDlet-Permissions-Opt: javax.microedition.io.Connector.bluetooth.client 
```

这是您可以指定可选权限的方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-10T11:35:11.587

如果手机没有蓝牙 API，则 Java 虚拟机没有 javax.bluetooth 包。因此，手机可能不允许您安装该应用程序。

在不使用 javax.bluetooth 包的情况下创建另一个版本的应用程序，然后再次尝试安装。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-09T17:03:11.317

您根本不必指定这些权限。没有它们，MIDlet 将正常工作。

# android - 安卓地图不显示

> ID：10515099
> 
> 赞同：2
> 
> 时间：2012-05-09T11:23:46.503
> 
> 标签：android, map

我正在尝试制作一个示例地图应用程序，但地图没有像这样出现在屏幕上：

![我的屏幕上的地图](../Images/48b020c1896cdf235ad8b28dcdbb98bd.png)

我正在关注这个[例子](http://www.vogella.com/articles/AndroidLocationAPI/article.html)，但我不明白出了什么问题，所以我的地图看起来像这样？

我添加了这样的 API 密钥：

```
keytool -list -alias androiddebugkey -keystore debug.keystore \
        -storepass android -keypass android 
```

所有 GPS 和 Internet 权限均已添加，并且设备已连接到 Internet。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T11:24:42.873

任何一个：

*   你错了`android:apiKey`，或者

*   您没有`INTERNET`权限，或

*   您的设备或模拟器无法访问 Internet

    或者，为地图创建新的 apikey 并检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T11:27:54.870

如果您遵循您发布的示例，您应该已经将 INTERNET 权限添加到您的代码中，因此它是您的 android:apiKey 或您使用的模拟器没有互联网访问权限，因此请检查一下

如果 apiKey 有问题，这应该解决 [http://informationideas.com/news/2008/11/06/getting-android-emulator-working-with-google-maps-api-key/](http://informationideas.com/news/2008/11/06/getting-android-emulator-working-with-google-maps-api-key/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-08T11:32:47.010

您可能在调试时使用不同的证书对 apk 进行签名，而不是在导出时使用它。所以你必须有两个来自谷歌的 API 密钥，或者你必须使用相同的证书对其进行签名，否则不会使用正确的证书哈希生成 apikey。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T11:38:57.117

[看到这个](http://android-example-code.blogspot.in/p/map-api-in-android.html)完整的例子

还将以下代码添加到**mains.xml**

```
<com.google.android.maps.MapView
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/mapview"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:apiKey="----YOUR KEY----"
        android:clickable="true" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-12-06T00:39:36.313

使用服务器 API 密钥而不是 android API 密钥。

# html - Opa : 将数据添加到

> ID：10515101
> 
> 赞同：0
> 
> 时间：2012-05-09T11:24:02.513
> 
> 标签：html, head, opa

如何使用 Oap 将特定的标记（如元、脚本等）添加到 html 文档的 head 部分？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:15:08.327

如果您想完全控制您的页面，可以使用`Resource.full_page` [http://doc.opalang.org/value/stdlib.core.web.resource/Resource/full_page](http://doc.opalang.org/value/stdlib.core.web.resource/Resource/full_page)

阅读其他功能的资源模块文档：http: [//doc.opalang.org/module/stdlib.core.web.resource/Resource](http://doc.opalang.org/module/stdlib.core.web.resource/Resource)

# symfony-1.4 - 如何在项目中获取不安全页面的 url？

> ID：10515107
> 
> 赞同：0
> 
> 时间：2012-05-09T11:24:33.087
> 
> 标签：symfony-1.4

我想在我的 symfony1.4 项目中编写一个程序，它可以返回/给出不安全页面的 url，我该怎么写？

我使用凭据保护操作，并使用 sfDoctrineGuard 来确保安全。

如果用户未获得任何页面的授权，则该页面会显示来自 sfwebresponse 的 401 代码。

我为每个动作都提供了凭据。我的第一个问题是

1.  现在我如何测试这些操作是否安全。
2.  我想生成一个报告，其中包含每个页面的 url 和相应的 url 是否安全？

我的 routing.yml 如下：

```
annual_performance_appraisal_details:
  class: sfDoctrineRouteCollection
  options:
    model:                AnnualPerformanceAppraisalDetails
    module:               AnnualPerformanceAppraisalDetails
    prefix_path:          /AnnualPerformanceAppraisalDetails
    column:               id
    with_wildcard_routes: true

annual_performance_appraisal:
  class: sfDoctrineRouteCollection
  options:
    model:                AnnualPerformanceAppraisal
    module:               AnnualPerformanceAppraisal
    prefix_path:          /AnnualPerformanceAppraisal
    column:               id
    with_wildcard_routes: true

apa_question_answer:
  class: sfDoctrineRouteCollection
  options:
    model:                ApaQuestionAnswer
    module:               ApaQuestionAnswer
    prefix_path:          /ApaQuestionAnswer
    column:               id
    with_wildcard_routes: true 
```

在我的第二（2）个问题中，我想要一份如下报告：

网址：...../AnnualPerformanceAppraisalDetails
SecurityReport：401（需要授权）

网址：...../AnnualPerformanceAppraisal
SecurityReport：401（需要授权）或 403 Forbidden

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T12:54:47.813

**关于 1**您可以检查页面的状态代码。您将需要一个明确的 url 列表来测试。

你可能可以写这样的东西：

```
$secured_urls=array('default/index','myModule/index',...);
foreach ($secured_urls as $url) {
    $browser->get($url)
        ->with('response')
        ->begin()
        ->isStatusCode(401)
        ->end();
} 
```

**大约 2**您是否尝试根据测试结果构建该报告？

# javascript - 如何通过预加载快速加载网页中的图像并在加载图像时显示活动指示器

> ID：10515110
> 
> 赞同：-1
> 
> 时间：2012-05-09T11:24:43.490
> 
> 标签：javascript, html

我有网页我希望该图像应该使用预加载器快速加载，它显示我搜索过的活动指示器但没有得到正确的东西有没有简单的方法来做到这一点谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:31:31.553

您可以使用 javascript/jquery 预加载图像。您需要做的是从 javascript 创建一个带有 'src' 的 'img' 并将其发送到 DOM。

您可以在这里找到更多信息：http: [//jquery-howto.blogspot.com/2009/02/preload-images-with-jquery.html](http://jquery-howto.blogspot.com/2009/02/preload-images-with-jquery.html)

# attributes - HTMLPurifier 允许属性

> ID：10515111
> 
> 赞同：1
> 
> 时间：2012-05-09T11:24:45.383
> 
> 标签：attributes, htmlpurifier

我在使 HTMLPurifier 不过滤标签属性时遇到了麻烦，但直到现在都没有成功，而且我快疯了。

```
 $config = HTMLPurifier_Config::createDefault();
    $config->set('Core.Encoding', 'UTF-8');
    $config->set('Core.CollectErrors', true);
    $config->set('HTML.TidyLevel', 'medium');
    $config->set('HTML.Doctype', 'XHTML 1.0 Transitional');
    $config->set('URI.DisableExternalResources', false);

    $config->set('HTML.Allowed', 'table[border|width|style],tbody,tr,td,th,img[style|src|alt],span[style],p[style],ul,ol,li,strong,em,sup,sub');

    $PHTML = new HTMLPurifier($config);
    echo htmlspecialchars($PHTML->purify($html));

    // The input string:
    "Some <span style="text-decoration: underline;">cool text</span> <img src="http://someurl.com/images/logo.png" alt="" />.

    // The output string:
    "Some <span>cool text</span> <img src="%5C" alt="" />. 
```

我想允许在 HTML.Allowed 选项中定义的指定元素的给定属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-04-30T05:25:45.940

有点晚的建议，但我遇到了与 HTMLPurifier 剥离*样式*属性类似的问题，即使它们是在**HTML.Allowed**设置中配置的。

我找到的解决方案要求您还配置**CSS.AllowedProperties**，它看起来有点像这样：

```
$config->set('CSS.AllowedProperties', 'text-align,text-decoration,width,height'); 
```

将此与 HTML.Allowed 结合使用：

```
$config->set('HTML.Allowed', 'img[src|alt|style],span[style]'); 
```

我希望其他人觉得这很有用，[您可以在此处阅读有关 CSS.AllowedProperties 的更多信息](http://htmlpurifier.org/live/configdoc/plain.html#CSS.AllowedProperties)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T17:15:38.010

关闭魔术引号。（注意 %5C）

# jsf - JSF 导航中的 URL 应更改

> ID：10515114
> 
> 赞同：0
> 
> 时间：2012-05-09T11:25:11.730
> 
> 标签：jsf, myfaces

我使用 Apache Myfaces 2.1（使用 JSF 1.x）制作了一个 Login.xhtml

当我在 login.xhtml 上提供了我的用户名和密码并且有一个提交按钮时。

当我单击再见按钮时，控件转到 wsListing.xhtml 但浏览器中的 URL 保持不变

```
http://hostid:8080/TestClient/faces/login.xhtml 
```

我希望将其更改为

```
http://hostid:8080/TestClient/faces/wsListing.xhtml 
```

**我已经附上了相同的代码，请给我一些解决方案，我是 JSF 的新手。**

**登录.xhtml**

```
 <?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui" xmlns:lang="en">
<f:view>
    <head>
<title>Test Client Login</title>
    </head>
    <h:form id="loginForm">
        <table>
        <tr>
                <h:outputLabel for="username">
                    <h:outputText id="usernameLabel" value="Enter Username:" />
                </h:outputLabel>
                <h:inputText id="username" value="#{loginBean.username}"
                    required="true">
                    <f:validateLongRange minimum="1" maximum="500" />
                </h:inputText>
        </tr>
        <tr>        
                <h:outputLabel for="password">
                    <h:outputText id="passwordLabel" value="Enter Password:" />
                </h:outputLabel>
                <h:inputText id="password" value="#{loginBean.password}"
                    required="true">
                    <f:validateLongRange minimum="1" maximum="500" />
                </h:inputText>
        </tr>
        <tr>    

        <h:commandButton id="goodbyeCommand" type="submit" value="Goodbye"
            action="#{loginBean.goodbye}" immediate="true" />

        </tr>   
</table>
    </h:form>
</f:view>

</html> 
```

**登录Bean.java**

```
package com.example;

/**
 * Managed Bean for Login
 * 
 */
public class LoginBean {

    private String username;
    private String password;
    public String getUsername() {
        return username;
    }
    public void setUsername(String username) {
        this.username = username;
    }
    public String getPassword() {
        return password;
    }
    public void setPassword(String password) {
        this.password = password;
    }
    public String goodbye() {
        return "success";
    }
} 
```

**面孔-config.xml**

```
<?xml version="1.0"?>
<faces-config version="1.2" xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-facesconfig_1_2.xsd">
<managed-bean>
        <description>Login Bean</description>
        <managed-bean-name>loginBean</managed-bean-name>
        <managed-bean-class>com.example.LoginBean</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
    </managed-bean>
<navigation-rule>
        <description>Navigation from the hello page.</description>
        <from-view-id>/login.xhtml</from-view-id>
        <navigation-case>
            <from-outcome>success</from-outcome>
            <to-view-id>/wsListing.xhtml</to-view-id>
        </navigation-case>
    </navigation-rule>
</faces-config> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:13:50.000

您需要发送重定向。添加`<redirect />`到`<navigation-case />`.

```
<navigation-case>
    <from-outcome>success</from-outcome>
    <to-view-id>/wsListing.xhtml</to-view-id>
    <redirect />
</navigation-case> 
```

* * *

**与具体问题无关**，MyFaces 2.1 是 JSF 2.1 实现。你为什么要强制 webapp 在 JSF 1.2 模式下运行？您错过了很多 JSF 2.x 的优势。

# c# - 从 IP 地址或 COM 端口获取数据？

> ID：10515115
> 
> 赞同：0
> 
> 时间：2012-05-09T11:25:11.777
> 
> 标签：c#, .net, sockets, serial-port, cardreader

我只是要超越极限，问你一个非常具体的问题。我办公室里有一个读卡器设备连接到以太网卡。下面是这个读卡器程序的配置窗口截图（随程序分发）。

![在此处输入图像描述](../Images/1b86c03baa12777d31d12d2774836ccf.png)

有一个IP地址，一个端口，上面写着COM3，还有波特率。分布式程序运行良好。它从设备中获取数据。

我的问题是，如何从该设备获取数据？我必须建立一个套接字连接吗？

注意：在分布式程序的文件夹中没有关联的 DLL。只有 VB6 程序 DLL。（顺便说一下，分布式程序是用VB6开发的）。

谢谢你的想法。

**更新 ：**

这是我的最终代码。

```
 byte[] b = null;
    TcpClient client = new TcpClient("10.1.2.100", 5005);
    client.SendBufferSize = 6550000;
    NetworkStream stream = client.GetStream();
    MemoryStream ms = new MemoryStream();

    int count = 0;
    do
    {
        byte[] buffer = new byte[1024];
        count = stream.Read(buffer, 0, 1024);
        ms.Write(buffer, 0, count);
    } while (stream.CanRead && count > 0);
    b = ms.ToArray(); 
```

但是 NetworkStream 的 DataAvailable 属性是假的..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:30:26.957

如果该程序未在将设备链接到其 COM 端口的计算机上运行，​​则必须通过 TCP/IP 访问它（鉴于您问题中的信息）。

因此，如果您在端口 5005 上访问 IP 10.1.2.100，您应该能够与设备通信。

# ios - NSTimer v/s CFRunLoopTimer

> ID：10515119
> 
> 赞同：3
> 
> 时间：2012-05-09T11:25:39.830
> 
> 标签：ios, nstimer, cfrunloop

我的问题是哪个更好用？

由于**NSTimer**反过来使用**CFRunLoopTimer**对象。什么比其他更好，我在我搜索过的任何网站上都没有得到任何关于它的信息，但什么也没有，我从**Apple 的文件**中获得了关于这两个文件的文件，但在阅读它们后，我不理解或不清楚`what to use NSTimer or CFRunLoopTimer?` 任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T08:20:19.343

从文档：

> CFRunLoopTimer 与其 Cocoa Foundation 对应的 NSTimer 是“免费桥接”的。

翻译：

没关系，所以`NSTimer`除非你对 CF 代码有深入了解，或者想要做一些时髦的东西/将非对象数据与你的计时器相关联，否则请使用它。

# asp.net - Mailchimp ASP.NET VB 使用 PerceptiveMCAPI 列出订阅分组

> ID：10515121
> 
> 赞同：4
> 
> 时间：2012-05-09T11:26:04.707
> 
> 标签：asp.net, vb.net, mailchimp, perceptivemcapi

嗨，当我的客户订阅我的邮件列表时，请有人帮我对他们进行分组...这是我到目前为止所拥有的，没有`GROUPING`选项可以工作...

```
 Dim newlistSubscribeParms As New listSubscribeParms()
            newlistSubscribeParms.apikey = "xxx"
            newlistSubscribeParms.id = "xxx"
            newlistSubscribeParms.email_address = txtEmailAddress.Text
            newlistSubscribeParms.double_optin = False
            newlistSubscribeParms.email_type = EnumValues.emailType.html
            newlistSubscribeParms.replace_interests = True
            newlistSubscribeParms.send_welcome = False
            newlistSubscribeParms.update_existing = True
            newlistSubscribeParms.merge_vars.Add("FNAME", txtFirstName.Text)
            newlistSubscribeParms.merge_vars.Add("LNAME", txtLastName.Text)
            newlistSubscribeParms.merge_vars.Add("GROUPINGS", "??")

            Dim newlistSubscribeInput As New listSubscribeInput(newlistSubscribeParms)
            Dim subscribeSuccess = cmd.Execute(newlistSubscribeInput) 
```

我在此列表中有一个名为“ `Audience`”的主要组，在该组中的 4 个子组中，我希望此代码将客户添加到“ `Quote Request Customers`”子组...

我正在使用 PerceptiveMCAPI

我已经查看了文档并一直在四处寻找，我正在努力让任何工作正常进行。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-04T15:34:16.710

我现在已经解决了这个问题！

看到这段代码，是用C#写的，希望你能看懂：

```
//from page 12 of "PerceptiveMCAPI Documentation"
                    /*
                        listSubscribe
                            Merge_vars are defined as Dictionary<string, object> where:
                            • If the string name is Groupings, the object value expected is of type: List<interestGroupings>
                            • If the object type is DateTime, the value is converted to an acceptable api string equivalent
                            • if the object type is Dictionary<string, object> (used for address array), the Key‐Value pairs are
                              formated as required
                            • Any other object type is passed to the api as‐is.
                    */

                //first association of groups for father group "DataGenerazioneContatto"
                List<string> _groups_for_DataGenerazioneContatto = new List<string>();
                _groups_for_DataGenerazioneContatto.Add(DateTime.Now.ToShortDateString());  //today

                //second association of groups for father group "TipoMail"
                List<string> _groups_for_TipoMail = new List<string>();
                _groups_for_TipoMail.Add("Generica");   //choose ONE or MORE from "Generica" & "Personale"
                _groups_for_TipoMail.Add("Personale");

                List<interestGroupings> _listGroupings = new List<interestGroupings>();
                _listGroupings.Add(new interestGroupings { name = "DataGenerazioneContatto", groups = _groups_for_DataGenerazioneContatto });
                _listGroupings.Add(new interestGroupings { name = "TipoMail", groups = _groups_for_TipoMail });

                listSubscribeParms _listSubscribeParms = new listSubscribeParms();
                _listSubscribeParms.apikey = apikey;    //your MailChimp apikey
                _listSubscribeParms.id = _listID;       //the ID of the selected MailChimp List
                _listSubscribeParms.email_address = "emailTest2@from.it";
                _listSubscribeParms.double_optin = false;
                _listSubscribeParms.email_type = EnumValues.emailType.html;
                _listSubscribeParms.replace_interests = true;
                _listSubscribeParms.send_welcome = false;
                _listSubscribeParms.update_existing = true;
                _listSubscribeParms.merge_vars.Add("FNAME", "NameTest2");
                _listSubscribeParms.merge_vars.Add("LNAME", "SurnameTest2");
                _listSubscribeParms.merge_vars.Add("GROUPINGS", _listGroupings);

                listSubscribe _listSubscribe = new listSubscribe(new listSubscribeInput(_listSubscribeParms));
                listSubscribeOutput _listSubscribeOutput = _listSubscribe.Execute(); 
```

在你的情况下（在 c# 中）它应该是：

```
 List<string> _groups_for_Audience = new List<string>();
  _groups_for_Audience.Add("Quote Request Customers");  //you can add more than one

  List<interestGroupings> _listGroupings = new List<interestGroupings>();
  _listGroupings.Add(new interestGroupings { name = "Audience", groups = _groups_for_Audience });

  newlistSubscribeParms.merge_vars.Add("GROUPINGS", _listGroupings ); 
```

# scala - 如何在 play 2.0 模板中格式化数字/日期？

> ID：10515123
> 
> 赞同：8
> 
> 时间：2012-05-09T11:26:07.373
> 
> 标签：scala, playframework-2.0

我在 play 2.0 模板系统上有点挣扎；我有一个方法可以返回 scala 中的“Int”，我想使用“#,###”模式对其进行格式化。

我试过了`@order.itemCount().format("#,###")`，`@( order.item.count() format "#,###" )`但没有爱。

我不确定在播放模板语法中是否有这个技巧，或者我是否只需要学习如何在 Scala 中做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T11:40:02.940

最直接的方法是使用[Java 的字符串格式化](http://docs.oracle.com/javase/7/docs/api/java/util/Formatter.html)：

```
scala> val n = 1000000
n: Int = 1000000

scala> "%,d".format(n)
res0: String = 1,000,000 
```

这也将正确处理本地化：

```
scala> String.format(java.util.Locale.ITALY, "%,d", n: java.lang.Integer)
res1: java.lang.String = 1.000.000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-15T16:37:39.367

这个如何：

```
<td>@("%.2f".formatLocal(lang().toLocale(), variable.getAverage()))</td> 
```

# c - 跟踪内存分配

> ID：10515127
> 
> 赞同：1
> 
> 时间：2012-05-09T11:26:37.933
> 
> 标签：c, memory-management

是否有任何方法可以跟踪 C 程序的每个步骤分配、重新分配和释放了多少内存？我的意思是一步一步地在程序中进行所有分配，而不是错误、内存泄漏或类似的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:07:49.287

是的，有办法做到这一点。我只知道一种方法。它称为[Pin](http://www.pintool.org/)。理想情况下，您可以将 a 附加`pin tool`到二进制文件，然后它将可以访问所有内存访问和内容。它不需要对源代码进行任何修改。

这将需要您进行一些编程来编写 Pin 工具。pin 工具本质上是代码，您可以在其中指定要在程序运行中监视哪些参数以及如何监视。它非常灵活。但请注意，它有一点学习曲线。因此，只有当您有时间学习它时，这才是理想的。但如果你立竿见影，它可能不足以满足你的目的。

另请注意，`Pin`默认情况下会提供一些您可能感兴趣的工具，或者您可以修改这些工具以满足您的需要。您可能想要查看的一些工具（在我的脑海中）是： 1\. Pinatrace 1\. MallocTrace

我可能拼错了什么。但是有很多东西可能会给你你想要的东西！

另一个可行的解决方案是@happydave 提到的解决方案，我不推荐的解决方案是重新定义`malloc`and`free`函数，这样当您调用 malloc/free 时，它​​会记录您感兴趣的参数。唯一的原因我推荐 Pin 而不是重新定义 malloc 是当您有时间并且将来您希望为您的跟踪器添加更多功能时。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T11:59:13.540

在 MFC 环境中的窗口上 DEBUG_NEW 是一种方法。

[http://msdn.microsoft.com/en-us/library/aa297313%28v=vs.60%29.aspx](http://msdn.microsoft.com/en-us/library/aa297313%28v=vs.60%29.aspx)

另一个是使用标准文件和行号重新定义 alloc 系列函数。

```
 #define malloc(size) custom_malloc(size, __FILE__, __LINE__) 
```

详细示例在 [http://www.almostinfinite.com/memtrack.html](http://www.almostinfinite.com/memtrack.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T11:46:44.780

一种常见的方法是使用宏覆盖 malloc/free：

`#define malloc(size) custom_malloc(size, __FILE__, __LINE__)`

然后，您可以让 custom_malloc 执行正常的 malloc，并将分配信息转储到文件（或您想要对其执行的任何操作）。

要跟踪 free 中释放了多少内存，一种选择是在每个 malloc 调用上分配一个额外的字段来存储分配的大小，然后您可以检查何时释放。或者您可以将 malloc/free 指针转储到文件，然后编写脚本进行后处理并将它们排列起来。这在一定程度上取决于您想对这些信息做什么。

# html - html5 / jQuery Slider - 滑动到相关答案（带有后退按钮）

> ID：10515130
> 
> 赞同：1
> 
> 时间：2012-05-09T11:26:55.853
> 
> 标签：html

我必须使用 jQuery 在 HTML5 中创建一个页面，其中所有问题都将以表格的形式出现。通过点击一个特定的问题 - 它的答案应该会出现滑动；关闭该答案后，滑块应返回并出现问题。

这怎么可能？我应该使用`<div>`值还是从中获取`XML`？请指导您的建议和教程。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:02:41.370

这是有关如何执行此操作的原始示例：

**[演示 jsBin](http://jsbin.com/ivohaf/edit#javascript,html,live)**

你需要这个 HTML 结构：

```
<div class="slider_container"> <!-- overflow:hidden; -->
<div class="slider">  <!-- position:absolute;width:loooot; -->

  <div class="box">
      <h2>Questions</h2>
      <ul class="goto">
        <li>Question 1</li>
        <li>Question 2</li>
        <li>Question 3</li>
        <li>Question 4</li>
      </ul>
  </div>
  <div class="box"><h2>ANSWER 1<span class="back">&lt; back</span></h2>box text...</div>
  <div class="box"><h2>ANSWER 2<span class="back">&lt; back</span></h2>box text...</div>
  <div class="box"><h2>ANSWER 3<span class="back">&lt; back</span></h2>box text...</div>
  <div class="box"><h2>ANSWER 4<span class="back">&lt; back</span></h2>box text...</div>

</div>
</div> 
```

这个基本的jQuery：

```
var galW = 600; // set here the 'slider container' width

$('ul.goto li').on('click',function(e){
  e.preventDefault();
  var thisIndex = $(this).index()+1;  
  $('.slider').stop(1).animate({left: -(galW*thisIndex)}, 1000);  
});

$('span.back').on('click',function(){
  $('.slider').stop(1).animate({left: 0}, 1000); 
}); 
```

我们在这里所做的是：获取被点击元素的索引*N*`li` +1。
+1 因为我们已经在查看第一个框（带有问题），但所有其他`.box`元素的索引将 +1。

在我们得到这个数字之后，我们只是以“速度”（时间）1000 为滑块设置动画，做一些简单的数学运算：我们将得到的索引*N*乘以“视口”宽度。

要返回，我们只需将`.slider`背部动画到`left:0px`（或只是'0'）位置。

如果你不明白我使用的一些方法，你可以在这里找到它们：http: [//api.jquery.com/](http://api.jquery.com/)

（**请**下次在提出您的问题时表现出一些努力，以便我们可以查看您的一些代码。谢谢！编码愉快）

# asp.net - 视频编辑 ASP.Net

> ID：10515133
> 
> 赞同：0
> 
> 时间：2012-05-09T11:27:09.877
> 
> 标签：asp.net

****概述：* ***

制作多媒体网站。主要关注点是单击并将视频剪辑从任何计算机文件立即拖动到网站。必须非常简单且用户友好。通过创建效果，剪切/斜线视频部分，添加动画，填充效果，标题，视频的不同字体等来编辑视频。我们不希望用户下载软件，一切都必须在网站上完成。

这在 asp.net 中是否可行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T11:36:38.187

asp.net 本身无法做到这一点。

您将需要来自多个来源的帮助：

*   第三方库将上传的视频从 mpg、flash、mov 转换为您将使用的任何内容。
*   防病毒软件在文件转换之前扫描文件
*   Silverlight 在线编辑视频

但是是的，asp.net 可以支持下划线网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:39:49.463

是的，与大多数事情一样，它是可能的，但我不确定你是否意识到你在谈论的一大段编码。有许多在线视频编辑器（YouTube 是最著名的），但您将面临巨大的问题，例如多个编解码器和相互转换以及上传视频和下载的编辑内容的带宽问题。

看看一些在线视频编辑器：

[http://savedelete.com/10-best-and-free-online-video-editing-software.html](http://savedelete.com/10-best-and-free-online-video-editing-software.html)

然后考虑创建工具需要多少预算。您可能希望对 silverlight 或 adobe air 使用更多的客户端方法，但您仍然面临大量编码才能正确执行此操作。您还需要利用第三方和开源库来实际编辑视频。

祝项目顺利。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T11:31:39.637

您可以使用[Silverlight](http://www.microsoft.com/silverlight/)。它在客户端运行，可以托管在 asp.net 中。

# iphone - 如何在应用内购买中更改应用图标？

> ID：10515135
> 
> 赞同：2
> 
> 时间：2012-05-09T11:27:26.477
> 
> 标签：iphone, ios, app-store, in-app-purchase

通过 InApp Purchase 购买完整版后，甚至可以从演示图标更改为完整版图像吗？或者我应该用 lite/full 图标制作两个版本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T11:31:02.480

请参考 [https://stackoverflow.com/a/45602449/195186](https://stackoverflow.com/a/45602449/195186)

这仅在 iOS 10.3 之前是正确的：

> 不，这是不可能的。图标是固定的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-08-10T00:06:31.450

UIApplication 有一个新的实例方法，可以做你想做的事。Apple 文档详细说明了完成此操作所需的操作：[https ://developer.apple.com/documentation/uikit/uiapplication/2806818-setalternateiconname](https://developer.apple.com/documentation/uikit/uiapplication/2806818-setalternateiconname)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T11:35:13.720

这是不可能的，因为 iOS 应用程序在沙箱中运行，因此无法写入（虽然它们可以读取）图标所在的应用程序包。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-01T08:01:27.833

1) 在 info.plist 中设置关键*图标文件*，其值为**../Documents/icon.png**。2) 添加关键*图标已经包含*值为**YES**的光泽效果 3) 在第一次启动时将图片移动到**/Documents/icon.png**

第二次启动后图标应用程序将被更改！

如果您更改 Documents 文件夹中的 icon.png 需要为刷新 Icon 应用程序进行呼吸。

# java - 使用 Dom 解析会产生类型不匹配

> ID：10515137
> 
> 赞同：3
> 
> 时间：2012-05-09T11:27:39.127
> 
> 标签：java, xml, parsing, dom, reflection

给定以下代码，在 Eclipse 下，我收到类型不匹配错误：

```
package xmlInterface;

import javax.swing.text.*;
import org.w3c.dom.*;
import org.w3c.dom.Document;

import gameManage.round;

import java.io.File;

import javax.lang.model.element.Element;

import javax.swing.text.Segment;
import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import com.sun.org.apache.bcel.internal.classfile.Method;

        public void writeToXml(round[] games) throws ParserConfigurationException
        {

                       int i;
                // build a doucument by the parser
                       DocumentBuilderFactory document = DocumentBuilderFactory.newInstance();
                       DocumentBuilder docBuilder = document.newDocumentBuilder();

                       Document doc = docBuilder.newDocument();
                       Element rootElement = doc.createElement("GameOut");
...
...
...
} 
```

我在 Eclipse 中收到以下错误：

```
Type mismatch: cannot convert from org.w3c.dom.Element to javax.lang.model.element.Element 
```

谁能解释一下我该如何解决这个问题？

谢谢杰森

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T11:30:01.480

我想你弄错了进口。不是

```
import javax.lang.model.element.Element; 
```

但

```
import org.w3c.dom.Element; 
```

不要使用带 * 的 import

```
org.w3c.dom.* 
```

否则您可能会遇到一些“隐藏”错误，因为您编码的最后一个“元素”导入 (javax.lang.model.element.Element) 将隐藏导入中包含的 org.w3c.dom.Element org.w3c.dom.* 行。

# c++ - 包含抽象基类的 ptr_map 的映射对象

> ID：10515143
> 
> 赞同：5
> 
> 时间：2012-05-09T11:28:02.163
> 
> 标签：c++, abstract-class, stdmap, boost-ptr-container

我有一个`boost::ptr_map`将抽象基类（例如[VectorWrapperBase](https://gist.github.com/2643718)）存储为值，这允许我将字符串映射到不同类型的向量。

```
boost::ptr_map<std::string, VectorWrapperBase> memory_map;
//...
memory_map.insert(str_key, new VectorWrapper<T>()); 
```

这似乎有效。但是，当我`memory_map`作为另一个类的成员并尝试将该类存储在 中时`std::map`，编译失败。

```
class AgentMemory {
  //...
  private:
    boost::ptr_map<std::string, VectorWrapperBase> memory_map;
};

std::map<std::string, AgentMemory> agent_map;
//...
agent_map.insert(std::pair<std::string, AgentMemory>(agent_name, AgentMemory())); 
```

最后一行失败：

```
/SOMEPATH/boost_1_48_0/boost/ptr_container/clone_allocator.hpp:34
   error: cannot allocate an object of abstract type ‘xyz::VectorWrapperBase’ 
```

作为 C++ 的新手，这令人费解。

我*怀疑*错误是由于地图插入复制了`AgentMemory`涉及克隆`ptr_map`. 而且由于我的`VectorWrapper`对象不可[克隆](http://www.boost.org/doc/libs/1_39_0/libs/ptr_container/doc/tutorial.html#cloneability)，因此引发了错误。

我的问题是：

*   为什么我会收到错误消息？（我的怀疑是否接近实际发生的事情？）
*   我该如何解决这个问题？

为了解决编译错误，我考虑了以下内容，但没有太多 C++ 经验，无法决定哪个更合适：

1.  删除纯说明符 ( `= 0`) 所以`VectorWrapperBase`不再是抽象的
    *   这感觉就像一个黑客，因为`VectorWrapperBase`不应该被实例化
2.  使 VectorWrappers 可[克隆](http://www.boost.org/doc/libs/1_39_0/libs/ptr_container/doc/tutorial.html#cloneability)
    *   [这似乎可行](https://gist.github.com/2644367)，但在我的用例中，只有空容器被分配给顶级地图，因此内部的 VectorWrappers`ptr_map`永远不需要被克隆。因此，可克隆性只是为了安抚编译器而不反映实际使用情况。
3.  忘记`ptr_map`并使用`std::map`and`shared_ptr`代替。
    *   我不太喜欢这个解决方案，因为我希望矢量包装器的生命周期与地图的生命周期相关联。我也有点担心（也许是不必要的？）`shared_ptr`在大量多线程应用程序中广泛使用的潜在开销。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:04:50.920

该声明

```
agent_map.insert(std::pair<std::string, AgentMemory>(agent_name, AgentMemory())); 
```

将调用 的默认构造函数`AgentMemory`，而后者又将调用 的默认构造函数`boost::ptr_map<std::string, VectorWrapperBase>`，后者将尝试调用抽象基类的不存在的构造函数`VectorWrapperBase`。

因此，您必须确保每个包装或继承类型的构造`VectorWrapperBase`函数都应始终构造一个具体的派生类。在您的情况下，选项 3（到派生类的共享指针的映射）可能是明智的，但这取决于您的代码的更大上下文。

# wordpress - 用于主题消息的 Wordpress 仪表板 RSS 提要

> ID：10515147
> 
> 赞同：1
> 
> 时间：2012-05-09T11:28:08.340
> 
> 标签：wordpress, rss, wordpress-theming

我创建了一个 wordpress 主题，需要在仪表板上放置一个 RSS 提要，这样我就可以在最后的提要中添加消息，并且它将出现在全球主题的每次安装中。我猜我只需要创建一个订阅我选择的 rss 提要的 rss 提要仪表板小部件。有什么东西可以做到这一点吗？我似乎找不到任何东西，似乎它应该是一个非常标准的功能。

# .net - .NET 反射的问题

> ID：10515149
> 
> 赞同：1
> 
> 时间：2012-05-09T11:28:12.920
> 
> 标签：.net, reflection

.NET 反射的一些问题在这里......

我有一个在 .NET 中使用反射的场景：我有一个类 ClassA，它从另一个类 ClassA_Base 继承了一个方法。两者都在同一个程序集中。有问题的方法需要一个参数，一个接口，IInterfaceA，它在另一个程序集中。现在，当我使用带有 .dll 路径的 LoadFrom 方法的反射加载 ClassA 时，当我尝试使用该方法时，我得到一个 MissingMethodException，当我在 Visual Studio 中断线并查看基类方法。有趣的是，基类也有一些返回 IInterfaceA 的属性，这些属性出现了！我想知道这个问题可能是什么？

```
ClassA : ClassA_Base
{
}

ClassA_Base
{
   SomeMethod(IInterfaceA obj); //Doesn't show up
   IInterfaceA SomeProperty{ get; } //Shows up
} 
```

这是使用 F# 实现的，但我相信该行为与任何其他 .NET 语言实现相同。

提前致谢 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:51:04.587

通过反射，您仅检索在当前类上实现的方法。这意味着基类中的东西不会出现。如果您想找到一个方法，只需在基类上查找它，然后您就可以在子类上调用它。

接口的东西出现的原因是它仍然在具体类上实现。（而不是只在基地实施）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:38:38.603

代替默认值`Type.GetMethod`，传递一个`BindingFlags`值。像这样的东西：

```
typeof(ClassA).GetMethod("SomeMethod",
                         BindingFlags.Instance | BindingFlags.NonPublic | BindingFlags.Public,
                         null,
                         new Type[] { typeof(IInterfaceA) },
                         null); 
```

抱歉，我不知道如何将其翻译为 F#。

# objective-c - +(void)initialize 方法中的 alloc-init 对象以多次重用它们

> ID：10515151
> 
> 赞同：1
> 
> 时间：2012-05-09T11:28:17.707
> 
> 标签：objective-c, ios, code-reuse, lazy-initialization

我`NSDateFormatter`多次使用一个对象（为特定目的定制）。由于我不是 objc 专家，因此我想出了三种不同的方法来处理它。

在第一个中，我创建了一个`NSDateFormatter`类别并在那里自定义了代码。这是一种常见的方法，但每次我创建这样一个对象时，它都会放在主自动释放池中。我认为这种行为对非 ARC 和 ARC 代码都有效。

在第二个中，我重写了该`+(void)initialize`方法并将自定义代码放在那里。这里有一个简单的例子：

```
static NSDateFormatter* dateFormatter = nil;

+(void)initialize
{
    dateFormatter = [[NSDateFormatter alloc] init];
    // other code here
} 
```

最后，我通过如下属性设置了第三种方法，使用延迟加载实例化：

```
-(NSDateFormatter)dateFormatter
{
    if(dateFormatter) return dateFormatter;        
    // alloc-init here
} 
```

说到这里，我想知道哪种方法最适合多次处理对象，以及`+(void)initialize`以这种方式使用是否正确。

先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T11:42:22.413

后面两种方法都是正确的，但相信你想把它们放在一起！

```
static NSDateFormatter *sharedInstance = nil;

+ (NSDateFormatter *)sharedInstance {
    if (sharedInstance == nil) {
        sharedInstance = [[NSDateFormatter alloc] init];
    }
    return sharedInstance;
} 
```

注意：这样的类称为单例。[阅读更多](http://en.wikipedia.org/wiki/Singleton_pattern)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T13:49:16.370

本质上，我最喜欢的模式是 mindw0rk 已经给出的模式（我对他的答案投了赞成票）。它的优点是您可以将方法放在一个类别中`NSDateFormatter`。我会稍微修改一下：

```
+ (NSDateFormatter *)sharedInstance {
    static NSDateFormatter *sharedInstance = nil;
    if (sharedInstance == nil) {
        sharedInstance = [[NSDateFormatter alloc] init];
    }
    return sharedInstance;
} 
```

这样您就不会`sharedInstance`在不先初始化的情况下无意中引用它。

如果您有多个共享实例，则可以使用不同的方法来获取每个实例，例如

```
+ (NSDateFormatter *)dateFormatterForFoo {
    static NSDateFormatter *sharedInstance = nil;
    if (sharedInstance == nil) {
        sharedInstance = [[NSDateFormatter alloc] init];
    }
    return sharedInstance;
}

+ (NSDateFormatter *)dateFormatterForBar {
    static NSDateFormatter *sharedInstance = nil;
    if (sharedInstance == nil) {
        sharedInstance = [[NSDateFormatter alloc] init];
    }
    return sharedInstance;
} 
```

或者，如果每个自定义日期格式化程序都有自己的子类，它们都可以实现`+sharedInstance`以返回正确类的对象。

或者你可以有一个日期格式化字典：

```
+ (NSDateFormatter *)customisedFormatterForKey: (NSString*) key {
    static NSDictionary *sharedInstances = nil;
    if (sharedInstance == nil) {
        sharedInstance = [[NSDictionary alloc] initWithObjectsAndKeys: ....];
    }
    return [sharedInstance objectForKey: key];
} 
```

我对这种方法有一些意见`-initialize`。

你必须小心使用`-initialize`. 它在第一次使用该类之前被调用一次。如果您从不使用该类，它将永远不会被调用。因此，要使您的代码正常工作，您必须确保在开始使用共享实例**之前**`NSDateFormatter`发送消息或实例。请注意，**向 dateFormatter 本身发送消息不算数**。这是因为它开始了，因此没有类。`NSDateFormatter` **`dateFormatter`**`nil`****

# java - JVM指令栈式架构的优势

> ID：10515154
> 
> 赞同：8
> 
> 时间：2012-05-09T11:28:34.930
> 
> 标签：java

为什么 Java 虚拟机被设计为没有寄存器来保存中间数据值？相反，每件事都在堆栈上工作。拥有基于堆栈的架构而不是寄存器有什么特别的优势吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-06-19T07:42:52.683

我不得不恭敬地不同意以前的答案。

存在表达式堆栈的假设并不比存在寄存器更好。通常注册机不能直接执行栈操作码，栈机也不能直接执行注册操作码。它们必须被映射。

EJP 说*“如果主机有一个堆栈，**就像他们一样，那就没什么可做的了**”*。这是一个错误的说法。提出所有机器都具有能够执行计算的堆栈显示了对堆栈机器的真正含义的混淆。

1.  基于堆栈的机器在“表达式堆栈”的顶部有一个带有隐式操作数的指令集。不是通用堆栈。通用堆栈不是堆栈机器制造的。他们可以保存/恢复值。所有平台都有。但他们不能执行计算。
2.  基于寄存器的机器使用指令流中编码的显式虚拟寄存器的操作数执行典型的操作码。这些虚拟机仍然具有通用堆栈和操作码来保存和恢复寄存器。您不能*将*堆栈计算操作映射到数据堆栈。核心指令集的操作数是寄存器、内存地址或立即数（在操作码中编码）。

因此，将一种机器架构的操作码映射到另一种机器架构肯定不仅仅是“无事可做”。除非您在具有本机 Java 操作码加速的芯片上，否则最好不要假设。

我不认为堆栈机器是可移植性的好选择。我是说有“一些事情要做”来将指令从堆栈映射到寄存器*或*寄存器到堆栈。两者都是可能的。

然而，很多谈话都是学术性的。在*实践*中，2014年流行的平台是注册。甚至基于堆栈的“处理器”通常也是在寄存器芯片顶部实现的软芯片。请参阅 Java Card 3 规范并查看实现并找出实际使用的处理器。我会把它留作练习。

除非我们正在为一个非常特定的平台设计 VM（例如，我们被要求设计一个只能在 GreenSpaces 处理器上运行的 JVM，但我认为这不会发生），否则我假设上下文是通用应用程序、嵌入式应用程序、机顶盒、固件控制器、玩具，甚至智能卡。对于所有这些，我看到了 8-32 位处理器，如 ARM，无论是使用的还是可用的。主流的 JVM 是用 C 编写的。C 使得设计具有虚拟堆栈或虚拟寄存器操作码的解释器成为可能。在 90 年代，有很多关于直接支持 JVM 操作码的基于堆栈的 Java 处理器的讨论。2014 年，我们在基于寄存器的硬件上看到了这些实现，

对于*一般应用程序*，基于堆栈的 VM 在实践中肯定不会映射到堆栈。这些机器都使用基于寄存器的主要指令；堆栈操作用于保存和恢复寄存器或调用堆栈，而不是进行计算、逻辑或分支。堆栈虚拟机 JIT 到机器的本机指令集，无论是堆栈还是寄存器指令集。*根据Hennessy And Patterson 的“计算机架构一种定量方法”*，自 1980 年以来，几乎所有新的处理器架构都已注册。这意味着寄存器-寄存器、寄存器-内存或寄存器立即指令集。在没有基于堆栈的添加的机器上，您不能在堆栈上添加 2 个值。在 x86 上，用于 ADD 操作的基于堆栈的操作码可能转换为：

```
push a
push b
add 
```

到本机寄存器代码：

```
mov eax, [addra]
mov ebx, [addrb]
add eax, ebx 
```

其次，无论操作码流是堆栈还是寄存器，JIT 都可以将其编译为本机代码。所以VM模型的选择简单来说就是软件模型。注册机也是虚拟的。它们不编码任何本机寄存器信息，操作码中的寄存器是虚拟符号。

现在在设计 Java 时，考虑的是小操作码和 8 位处理器兼容性。基于堆栈的操作码小于寄存器操作码。所以这是有道理的。我确定我在某处读到，除了简单之外，这是 James Gosling 为 Oak（Java 的原始名称）选择它的主要原因之一。我只是没有参考。在这方面，我同意 Péter Török 的观点。

*   堆栈操作码有明显的好处。码流通常更小/更密集。关于 JVM 和 CLR，观察到的基于堆栈的字节码可能比其他机器小 15-20%。堆栈字节码可以很容易地以 <= 8 位编码。（Forth 机器可以有 20 个左右的操作码）。opstream 更容易编码/解码。尝试为 Java 然后为 x86 编写汇编程序或反汇编程序。
*   注册操作码有明显的好处。对表达式进行编码的操作码更少 = 更好的 IPC = 解释器中的高级分支更少。它还可以直接将少量寄存器（8 到 16 个）映射到几乎每个现代处理器。由于更好的缓存引用局部性，使用寄存器可以实现更高的吞吐量。相反，堆栈机器使用大量的内存带宽。

在 VM 中，寄存器字节码通常使用大型虚拟寄存器集，需要更大的字节码。在大多数真实硬件上，寄存器通常以大约 3 位（Intel x86）到 5 位（Sparc）编码，因此密度可能因 VM 到 VM 或 CPU 到 CPU 或 VM 到 CPU 不同。Dalvik 使用 4 到 16 位来表示寄存器，而 Parrot 在所有操作码上使用每个寄存器 8 位（至少我使用的 v2 字节码格式）。Dalvik 实现了更好的平均密度。根据我构建它们的经验，很难在 8 位字节码内构建通用寄存器机器，除非您严格遵守原语并使用小型寄存器文件。这可能看起来不直观，但通常单个操作码实际上具有多个具有不同寄存器类型的编码。

最后一点：当 JIT 出现时，许多软核优化可能会消失。

我认为堆栈机器更好地映射到硬件的论点的主要例外是它忽略了 JVM 运行的位置和/或技术的发展方向。在 Chuck Moore 之外，我不知道有任何人设计基于堆栈的处理器（IGNITE 和 GreenSpaces GA144），并且大多数新开发是寄存器机器。堆栈机器的论点主要是学术性的。对于每个 8 位堆栈处理器参数，我可以向您展示几个带有 C 编译器的寄存器机器（带有寄存器的 Hitachi H8、带有寄存器的 ARM926、Intel 8051）。与 Java 相比，您可能更可能在纯堆栈处理器上使用 Forth 进行编写。对于一个新平台，使用便宜的 ARM 处理器更有意义，其中有 C 编译器、完整的 JVM 等。这些运行寄存器指令集。

*   ARM926 / ARM926EJ-S - [http://www.arm.com/products/processors/classic/arm9/arm926.php](http://www.arm.com/products/processors/classic/arm9/arm926.php)
*   H8 - [http://en.wikipedia.org/wiki/H8_Family](http://en.wikipedia.org/wiki/H8_Family)

那么，如果这是真的呢？有关系吗？根据我的经验，我的观点是“不像人们想象的那样多”。请记住，字节码只是一种中间表示。一台机器的纯解释核心通常是一块垫脚石、一座桥梁、一个默认的故障安全核心。最终目的地是最终的版本 2，它具有对本机性能的 JITter。因此，许多做过一两次的人持有的观点是，保持核心尽可能简单并转向 JIT 是有意义的，在那里将 90% 的优化都花在了那里。调整 interpeted 核心的任何浪费精力都可以被视为过早的优化。另一方面，如果您不计划 JITter，或者由于内存限制而导致 JIT 不切实际，则在虚拟内核上进行优化，或者在芯片上实现 VM。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-09T11:30:22.990

Java 从一开始就被设计为可移植的。但是，如果它依赖于运行它的平台上存在的某些寄存器，那么如何保持字节码的可移植性呢？特别是考虑到它最初是打算在机顶盒上运行的，机顶盒的处理器架构与主流 PC 非常不同。

只有运行时 JVM 才真正知道可用的寄存器和其他硬件特定的东西。然后 JIT 编译器可以（并且将）在适用时针对这些进行优化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-28T22:37:38.893

在设计虚拟机时，设置堆栈比设置一组虚拟寄存器要容易得多。如果主机有一个堆栈，就像他们一样，没有什么可做的，如果它有寄存器，你仍然可以将它们用于其他东西：临时等。另一方面，如果主机没有寄存器，只有一个堆栈，并且您围绕寄存器设计您的VM，您手上有一个主要的实现问题，因为您必须使用本机堆栈，其方式会干扰其作为虚拟堆栈的使用。

# c# - Powershell/C#：导入和调用嵌套模块

> ID：10515156
> 
> 赞同：1
> 
> 时间：2012-05-09T11:28:48.663
> 
> 标签：c#, powershell, powershell-2.0

这就是我在 ListBox 中加载嵌套模块的方式。

```
public partial class Form1 : Form
    {
        readonly PowerShell _ps = PowerShell.Create();
        public Form1()
        {
            InitializeComponent();

            _ps.AddScript("Import-Module MyModules");
            _ps.AddScript("(Get-Module MyModules).NestedModules");
            Collection<PSObject> psObjects = _ps.Invoke();

            foreach (var psObject in psObjects)
            {
                listBox1.Items.Add(psObject);
            }
} 
```

现在，如果用户选择了一个特定的模块，我想执行同样的。

这似乎不起作用[尽管应该加载模块并且它应该识别命令] -

```
_ps.AddCommand(listBox1.SelectedItem.ToString()).Invoke(); 
```

**例外：**

> 术语“MyModule1”未被识别为 cmdlet、函数、脚本文件或可运行程序的名称。检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。

我假设模块现在已经加载到内存中，我只需要调用它。（注意这里的模块名和命令名是一样的）

***///////////////////////////////////////// ///////////////////////////////////////// ///////////////////////////////////////// /////////////***

**更新：** 也试过这个，即从路径显式加载模块->>没有运气-

```
 var path = ((PSModuleInfo) (((PSObject) (listBox1.SelectedItem)).ImmediateBaseObject)).Path;
    path=path.Replace("system32", "SysWOW64");

    _ps.AddCommand("Import-Module");
    _ps.AddParameter(path);
    _ps.Invoke(); 
```

**更新后的异常：** [虽然模块存在，但在 ISE x86 shell 中运行良好]

> 找不到与参数名称“C:\Windows\SysWOW64\WindowsPowerShell\v1.0\Modules\MyModules\MyModule1\MyModule1.psm1”匹配的参数。

***///////////////////////////////////////// ///////////////////////////////////////// ///////////////////////////////////////// /////////////***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:55:39.767

终于明白了：-

而不是这样做 -

```
_ps.AddCommand(listBox1.SelectedItem.ToString()).Invoke(); 
```

**做这个 -**

```
_ps.AddScript(listBox1.SelectedItem.ToString()).Invoke(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:15:28.910

包含什么`listBox1.SelectedItem`？

如果只是名称`MyModule1`是用`$env:PSModulePath`?

我怀疑它不在模块搜索路径中，而是在模块中加载了相对路径`MyModules`。因此，您需要将`Import-Module`完整路径（或者，如果您可以控制当前目录，则为相对路径）传递给模块的主文件（`.psd1`或`.psm1`适用`.dll`）。

# jquery - 如何在 jqModal 弹出窗口中禁用覆盖

> ID：10515158
> 
> 赞同：1
> 
> 时间：2012-05-09T11:28:51.373
> 
> 标签：jquery, jqmodal

我正在使用[jqModal](http://dev.iceburg.net/jquery/jqModal/#examples)插件。我需要禁用外部覆盖并使弹出窗口稳定。因此，在单击“关闭”按钮之前，弹出窗口应该始终显示。

到目前为止我尝试过的代码（注释的选项无法产生预期的效果）：

```
$(document).ready(function() {
    $('#dialog').jqm(
        /* {
        overlay : 100%,
        modal : false
        }*/
    );
});​​​​ 
```

[http://jsfiddle.net/3J5wW/1/](http://jsfiddle.net/3J5wW/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:03:58.360

根据评论关闭此线程。要禁用覆盖模式退出事件 jqModal 必须有 2 个设置：

```
overlay : 50, // Overlay opacity value 1-100, 0 will disable overlay all together
modal   : true 
```

[小提琴的](http://jsfiddle.net/armababy/3J5wW/3/ "at fiddle")完整示例

# string - KMP失效函数的应用

> ID：10515159
> 
> 赞同：5
> 
> 时间：2012-05-09T11:28:52.840
> 
> 标签：string, algorithm

很多关于 KMP 的文章都提到了 KMP 本身的故障函数有大量的应用。

一个这样的应用程序是找到最小的字符串，当连接 k 次时给出原始字符串（句点）。

但我找不到其他的。还有哪些问题涉及 KMP 失效功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T05:24:33.717

KMP 计算字符串的所有前缀的**边界**，它们本身就是字符串算法中的一个关键概念。（计算整个单词的边界本身并不简单，KMP（失效函数）就是这样做的标准！）

*s*的边框就是任何既是*s*的前缀又是后缀的单词。

正如您正确注意到的，计算边界能力的一个突出应用是计算最小字符串 w 的可能性，使得对于给定字符串*s的某些自然 k* *w* ^k = *s*。这称为 s 的**原根**。

 ***其原因是字符串的边界和句点之间的对偶性。字符串*s*的**句**点是任何不长于*s 的字符串**w*，因此*s*是字符串 wwww 的前缀*……*例如，***abc***是***abcabcab***的句点。事实证明，单词的边界和句点之间存在 1:1 的对应关系；在上面的示例中，请注意***abcab***是 abcabcab 的***边框***。一般来说，只要*w*是*s 的*一个周期，那么在移除*w之后从**s*中剩下的字符串*************从一开始（*w* ^-1 *s*）就是 s 的*边界*。类似地，如果*w*是*s*的边界，那么当您删除后缀*w时，从**s*中剩余的单词就是*s*的句点。*************

 ***句点是分析字符串属性的重要工具。例如，它们用于在字符串中查找重复（运行）的算法中；有关概述，请参阅[本文。](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=3&ved=0CFYQFjAC&url=http://www.mimuw.edu.pl/~rytter/MYPAPERS/Crochemore-Ilie-Rytter.pdf&ei=pN8pUJGaMYiriQLJ_YCAAg&usg=AFQjCNGwzSajRkMu3uGYN6eskLeFspRTyQ&sig2=bp1qD6484y63D-geG-xTIA&cad=rja)******

# asp.net-mvc-3 - 关闭对话框 mvc3

> ID：10515160
> 
> 赞同：2
> 
> 时间：2012-05-09T11:28:56.190
> 
> 标签：asp.net-mvc-3, dialog

我有一个对话框，里面有一个 CKEditor。但我无法让它在 partialView 上触发 HTTPPost。

```
 <form method="post" action="@Url.Action("Description")">
@Html.CKEditor("text", (string)ViewBag.BodyText, "toolbar:'Full'", new { cols = 2000, rows = 5000 })
<p>
<input type="submit"  value="@Resources.Resources.ProjectCreateDescriptionSave" onclick="@Html.CKEditorSubmitButtonUpdateFunction();" class="close"/>
</p>
</form> 
```

它需要 class="close" 但如果它在输入中，它会关闭但不会触发 httppost。但是，如果我删除 class="close" 它就完美了。有没有办法将它们结合起来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:55:09.913

我认为您的点击事件有误。

```
onclick="@Html.CKEditorSubmitButtonUpdateFunction();" 
```

应该读

```
onclick="CKEditorSubmitButtonUpdateFunction();" 
```

`CKEditorSubmitButtonUpdateFunction()`您的 javascript 函数的名称在哪里。不需要附加的@Html 部分。

编辑：真的你不应该在那里需要一个 onclick 事件吗？您的表单处理 post 事件`action="@Url.Action("Description")"`

# javascript - 引用更多具有相同属性名称的表中的列

> ID：10515163
> 
> 赞同：1
> 
> 时间：2012-05-09T11:28:58.863
> 
> 标签：javascript, sqlite, firefox-addon

*在Javascript*中使用*SQLite*数据库时，您将使用以下语句从表*T*的数据库列中获取*标题*。

 ***```
while (statement.executeStep())
{
  title = statement.row.title;
} 
```

*如果标题*来自两个表*T1*和*T2*，您将如何引用它？它们都具有标题属性，并且在*SQL*语句中我使用点表示法，如下所示：

```
select T1.title, T2.title from ... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T11:41:45.407

您可以尝试在 SQL 查询中给它们起不同的名称：

```
SELECT T1.title as title1, T2.title as title2 FROM ... 
```

希望这可以帮助。***

# java - 为什么命令行实用程序在通过 java 程序调用时会挂起？

> ID：10515168
> 
> 赞同：3
> 
> 时间：2012-05-09T11:29:34.040
> 
> 标签：java, linux, barcode-scanner, runtime.exec, processbuilder

我需要您在以下任务中的建议和指导。我正在使用带有命令行实用程序的 libdmtx，它读取 ECC200 数据矩阵条形码的图像文件，读取它们的内容，并将解码的消息写入标准输出。我想在 linux 平台上的 java 程序中使用这个命令行实用程序。我正在使用 ubuntu linux。我已经在我的 linux 机器上安装了 libdmtx。当我调用命令时

dmtxread -n /home/admin/ab.tif

在 linux 终端上，它立即给出图像中条形码的解码值。

当我要使用我的 java 程序调用此命令时，代码会在执行命令时出现问题，并且 dotn 会给出输出。看起来程序正在处理或挂起。

以下是我的 java 代码，它调用以下命令

```
import java.io.BufferedReader;
import java.io.File;
import java.io.IOException;
import java.io.InputStreamReader;

public class Classtest {

    public static void getCodes(){

        try 
        { 
            Process p; 
            String command[]=new String[3];
            command[0]="dmtxread";
            command[1]="-n";
            command[2]="/home/admin/ab.tif";

            System.out.println("Command : "+command[0]+command[1]+command[2]);
            p=Runtime.getRuntime().exec(command);  //I think hangs over here.

            BufferedReader reader=new BufferedReader(new InputStreamReader(p.getErrorStream()));
            String line=reader.readLine();
            if(line==null){
                reader=new BufferedReader(new InputStreamReader(p.getInputStream()));
                line=reader.readLine();
                System.out.print("Decoded      :- "+line);
            }else{
                System.out.print("Error      :- "+line);
            }
            System.out.println(p.waitFor());

        }catch(IOException e1) {
            e1.getMessage();
            e1.printStackTrace();
        }catch(InterruptedException e2) {
            e2.getMessage();
            e2.printStackTrace();
        } 

    }
    public static void main(String args[]){
        getCodes();
    }

} 
```

请告诉我的朋友我的代码哪里出错了。

我参考了以下文章，但没有得到任何帮助

[http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html?page=1](http://www.javaworld.com/javaworld/jw-12-2000/jw-1229-traps.html?page=1)

请朋友们指导一下！谢谢！

这是我使用 ProcessBuilder 类的新代码，该代码也提供与上述代码相同的输出，即它挂在 Process process = pb.start();

```
public class Test {

public static void main(final String[] args) throws IOException, InterruptedException {
    //Build command 
    List<String> commands = new ArrayList<String>();
    commands.add("dmtxread");
    commands.add("-n");
    commands.add("/home/admin/ab.tif");
    System.out.println(commands);

    //Run macro on target
    ProcessBuilder pb = new ProcessBuilder(commands);
    pb.redirectErrorStream(true);
    Process process = pb.start();

    //Read output
    StringBuilder out = new StringBuilder();
    BufferedReader br = new BufferedReader(new InputStreamReader(process.getInputStream()));
    String line = null, previous = null;
    while ((line = br.readLine()) != null){
        System.out.println(line);
    }

    //Check result
    if (process.waitFor() == 0)
        System.out.println("Success!");
    System.exit(0);

    //Abnormal termination: Log command parameters and output and throw        ExecutionException
    System.err.println(commands);
    System.err.println(out.toString());
    System.exit(1);
} 
```

}

请指导我解决这个问题。感谢您！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T11:47:31.957

readLine 会阻塞，直到它从错误流中接收到新行。因此，如果没有输出，您的程序将无法通过第一个 readLine。

为简单起见，我建议您使用 a`ProcessBuilder`而不是`Runtime.exec()`，它可以让您合并两个 InputStream，如下所示：

```
ProcessBuilder builder = new ProcessBuilder(cmd,arg0,arg1);
builder.redirectErrorStream(true);
Process process = builder.start(); 
```

所以，现在你可以从一个中读取。

或者，您可以使用单独的线程来使用两个 InputStream。

希望有帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T11:42:08.577

您的流消费代码非常混乱。您尝试从 stderr 读取一行，然后放弃该读取器，然后尝试从 stdout 读取一行。

1.  如果程序没有向 stderr 打印任何内容，您将在第 2 行挂起。
2.  如果程序向 stderr 发送**了太多**东西以至于它填满了它的缓冲区，那么程序本身就会阻塞，而你的 Java 会阻塞在`waitFor`.
3.  这两个都适用于标准输出。

您链接的那篇文章详细介绍了使用流程输出流的正确方法。接受这个建议，没有人能给你比这更好的建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T11:37:29.543

我不确定您的程序到底发生了什么以及它挂在哪里（您可以使用调试器或跟踪输出来检查），但这是可能的情况：

假设程序要输出 2 行文本。或者只有一行但进入标准错误。您的代码仅从标准输出读取*1 行*，然后等待进程退出。这意味着子程序可能会等待读者阅读下一行，因此它会一直等待，`write`直到有人解除管道阻塞——永远。

当你从命令行运行`dmtxread`时，输出管道上没有阻塞，所以程序运行得很好。

# decorator - 生态装饰器

> ID：10515170
> 
> 赞同：0
> 
> 时间：2012-05-09T11:29:51.567
> 
> 标签：decorator, eclipse-emf

我有一个生成的 Ecore 模型 - 工作得很好。

我现在要做的是，以编程方式创建模型实例并加载它：

```
EARepository repository = EaadapterFactory.eINSTANCE.createEARepository();
repository.setFile(f);
repository.load(); 
```

现在我可以调用类似的方法

```
repository.getName(); 
```

工作正常！

我的问题：我想自定义`getName()`现在的行为！。我想在这里设置一个装饰器，就像 genmodel 一样。例如，`getName()`如果没有设置值，该方法应该返回“没有设置值”。

是否可以在`getName()`这里自定义 的行为方法，例如设置装饰器？！

原因：我想保持模型的原始行为。但在我的一个用例中，模型的行为应该有点不同。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T07:25:18.620

通常，您应该使用生成的项目提供程序来生成您在 UI 中看到的标签。即，有一个生成的 EARepositoryItemProvider 带有您专门用于此目的的 getText 方法。

# java - 音频格式转换

> ID：10515174
> 
> 赞同：6
> 
> 时间：2012-05-09T11:30:00.500
> 
> 标签：java, audio, javasound

我在转换 WAV 文件的音频格式时遇到问题。

我正在用麦克风录制声音，声音以以下格式录制：PCM_SIGNED 44100.0 Hz，16 位，单声道，2 字节/帧

我想将上述格式转换为 ULAW 8000.0 Hz、8 位、单声道、1 字节/帧

我正在使用以下代码，

```
InputStream is = request.getInputStream(); 
            AudioInputStream ais = AudioSystem.getAudioInputStream(is);
            AudioFormat oldFormat = ais.getFormat();
            AudioFormat newFormat = new AudioFormat(AudioFormat.Encoding.ULAW, 8000, 8, 1, 1, 8000, false) ;
AudioInputStream lowResAIS = AudioSystem.getAudioInputStream(newFormat, ais); //Getting the below Exception on this line 
```

我收到以下错误，

java.lang.IllegalArgumentException：不支持的转换：ULAW 8000.0 Hz，8 位，单声道，1 字节/帧，来自 PCM_SIGNED 44100.0 Hz，16 位，单声道，2 字节/帧，little-endian

谁能帮我解决这个问题！！！

万分感谢！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T11:37:06.653

你看过[文档](http://docs.oracle.com/javase/6/docs/api/javax/sound/sampled/AudioSystem.html)了吗？

> **抛出**：IllegalArgumentException - 如果不支持转换#see #getTargetEncodings(AudioFormat)

并非每个系统都会安装足够的编解码器来转换为您要求的特定格式。你已经假设你的，但它抛出异常，因为它不能转换为那种格式。

您可以使用`getTargetEncodings`以编程方式检查给定格式的适用性，而不依赖于异常，然后可以在您想要的输出格式不可用时采取适当的措施（例如，回退到另一种格式，向用户提供反馈，这是不可能等）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-18T19:48:58.423

这门课可能会对你有所帮助。我在[这里](http://thorntonzone.com/manuals/Compression/Fax,%20IBM%20MMR/MMSC/mmsc/uk/co/mmscomputing/sound/)找到它：

```
package uk.co.mmscomputing.sound;

import java.io.*;

public class CompressInputStream extends FilterInputStream{

  /*
    Convert mono PCM byte stream into A-Law u-Law byte stream

    static AudioFormat alawformat= new AudioFormat(AudioFormat.Encoding.ALAW,8000,8,1,1,8000,false);
    static AudioFormat ulawformat= new AudioFormat(AudioFormat.Encoding.ULAW,8000,8,1,1,8000,false);

    PCM 8000.0 Hz, 16 bit, mono, SIGNED, little-endian
    static AudioFormat pcmformat = new AudioFormat(8000,16,1,true,false);

  */

  static private Compressor alawcompressor=new ALawCompressor();
  static private Compressor ulawcompressor=new uLawCompressor();

  private Compressor compressor=null;

  public CompressInputStream(InputStream in, boolean useALaw)throws IOException{
    super(in);
    compressor=(useALaw)?alawcompressor:ulawcompressor; 
  }

  public int read()throws IOException{
    throw new IOException(getClass().getName()+".read() :\n\tDo not support simple read().");
  }

  public int read(byte[] b)throws IOException{
    return read(b,0,b.length);
  }

  public int read(byte[] b, int off, int len)throws IOException{
    int     i,sample;
    byte[]  inb;

    inb=new byte[len<<1];          // get 16bit PCM data
    len=in.read(inb);
    if(len==-1){return -1;};

    i=0;
    while(i<len){
      sample   = (inb[i++]&0x00FF);
      sample  |= (inb[i++]<<8);
      b[off++]=(byte)compressor.compress((short)sample);
    }
    return len>>1;
  }
}

abstract class Compressor{
  protected abstract int compress(short sample);    
}

/*
    Mathematical Tools in Signal Processing with C++ and Java Simulations
        by  Willi-Hans Steeb
            International School for Scientific Computing
*/

class ALawCompressor extends Compressor{

  static final int cClip = 32635;

  static final int[] ALawCompressTable ={
    1,1,2,2,3,3,3,3,
    4,4,4,4,4,4,4,4,
    5,5,5,5,5,5,5,5,
    5,5,5,5,5,5,5,5,
    6,6,6,6,6,6,6,6,
    6,6,6,6,6,6,6,6,
    6,6,6,6,6,6,6,6,
    6,6,6,6,6,6,6,6,
    7,7,7,7,7,7,7,7,
    7,7,7,7,7,7,7,7,
    7,7,7,7,7,7,7,7,
    7,7,7,7,7,7,7,7,
    7,7,7,7,7,7,7,7,
    7,7,7,7,7,7,7,7,
    7,7,7,7,7,7,7,7,
    7,7,7,7,7,7,7,7
  };

  protected int compress(short sample){
    int sign;
    int exponent;
    int mantissa;
    int compressedByte;

    sign = ((~sample) >> 8) & 0x80;
    if(sign==0){ sample *= -1;}
    if(sample > cClip){ sample = cClip; }
    if(sample >= 256){
      exponent = ALawCompressTable[(sample >> 8) & 0x007F];
      mantissa = (sample >> (exponent + 3) ) & 0x0F;
      compressedByte = 0x007F & ((exponent << 4) | mantissa);
    }else{
      compressedByte = 0x007F & (sample >> 4);
    }
    compressedByte ^= (sign ^ 0x55);
    return compressedByte;
  }
}

class uLawCompressor extends Compressor{

  static final int cClip = 32635;
  static final int cBias = 0x84;

  int[] uLawCompressTable ={
    0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,
    4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
    5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,
    5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,
    6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
    6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
    6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
    6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
    7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
    7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
    7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
    7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
    7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
    7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
    7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
    7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7
  };

  protected int compress(short sample){
    int sign;
    int exponent;
    int mantissa;
    int compressedByte;

    sign = (sample >> 8) & 0x80;
    if(sign!=0){ sample *= -1;}
    if(sample > cClip){ sample = cClip; }
    sample += cBias;

    exponent = uLawCompressTable[(sample >> 7) & 0x00FF];
    mantissa = (sample >> (exponent + 3)) & 0x0F;
    compressedByte = ~(sign | (exponent << 4) | mantissa);
    return compressedByte&0x000000FF;
  }
} 
```

# python - 正则表达式替换python中分隔符之间的文本

> ID：10515176
> 
> 赞同：1
> 
> 时间：2012-05-09T11:30:06.817
> 
> 标签：python, regex

对于以下情况，我需要修复位于分隔符之间的一些文本：
案例 1：（`{12345}`大括号之间的数字）应该变为`item_12345`（添加了“item_”，删除了大括号）。
情况2：（`[999]`方括号之间的数字）应该变成`total_999`

所以这个字符串：`{242424} from X [100] bulks, linked to {57575757} from Y for [500] units` 应该是这样的：`item_242424 from X total_100 bulks, linked to item_57575757 from Y for total_500 units`

这怎么能用正则表达式来完成？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T11:37:19.560

这应该让你开始：

```
s = '{123} and [456]'

s = re.sub(r'\{(.+?)\}', r'foo_\1', s)
s = re.sub(r'\[(.+?)\]', r'bar_\1', s)

print s 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T11:50:24.593

```
>>> import re
>>> curly = re.compile('\{([0-9]+)\}')
>>> square = re.compile('\[([0-9]+)\]')
>>> s = "{242424} from X [100] bulks, linked to {57575757} from Y for [500]"
>>> re.sub(square, lambda x: 'total_'+x.group(1), re.sub(curly, lambda x: 'item_
'+x.group(1),s))
'item_242424 from X total_100 bulks, linked to item_57575757 from Y for total_50
0' 
```

# java - Java 负数乘法

> ID：10515181
> 
> 赞同：2
> 
> 时间：2012-05-09T11:30:27.673
> 
> 标签：java, multiplication

在正常的数学术语中，-1756046391 * -1291488517 将等于 2267913749295792147。

当我在 java 中输入完全相同的等式时，我得到答案：-1756046391 * -1291488517 = 19。

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T11:32:38.217

溢出。

查看 Integer.MAX_VALUE。Java 中的 Integer 是 32 位 2s 补码值。您不能超过 MAX_VALUE。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-09T11:38:06.033

在处理非常大的数字时，您需要确保您使用的数据类型足够大以存储该数字。在java中，你有这些原始数字类型：

```
type:                      min:                      max:
byte                       -128                       127
short                    -32768                     32767
int              -2,147,483,648             2,147,483,647
long -9,223,372,036,854,775,808 9,223,372,036,854,775,807 
```

如您所见，您的号码刚好适合`long`. 但是您一定会对此进行处理，因此您可能应该改用`BigInt`该类：

[http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html](http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T11:33:54.810

像其他人所说的那样使用 long，或者如果这对您的应用程序来说还不够，请考虑使用`BigInteger`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T11:32:50.310

发布您用来重现此内容的确切代码。

您很可能使用整数。使用 long，因为 2267913749295792147 太大而无法放入 int。

# iphone - iOS AVPlayer 串流音乐问题

> ID：10515182
> 
> 赞同：5
> 
> 时间：2012-05-09T11:30:35.813
> 
> 标签：iphone, ios, ipad, avplayer

我遇到了一些非常奇怪的问题`AVPlayer`。我有一个非常简单的音乐播放器（它从 iTunes 商店流式传输样本音乐）在模拟器（iPhone 和 iPad 与 iOS 5.1）上正确使用它，但它在真实设备上表现异常。

在装有 iOS 5.1.1 的 iPad 2 上，即使我将耳机连接到设备，它也能正常播放。但是一旦我断开它们，它就不会通过扬声器播放声音（即使我再次连接它们，我也可以听这首歌）。

在安装了 iOS 5.1 的 iPhone 4 上，它似乎根本无法通过扬声器播放，但我可以通过耳机听音乐。虽然它似乎没有通过扬声器播放，但我不时能听到很短的音乐播放（并且可以确认它实际上正在播放，因为我的 UI 相应地响应）虽然它似乎是随机的。

我正在使用`AVPlayer`它，因为它似乎符合要求。我应该使用另一个库吗？我需要手动路由声音吗？为什么我会遇到这些类型的问题？我是否正确使用音频会话？

媒体.h：

```
#import <Foundation/Foundation.h>
#import <AVFoundation/AVFoundation.h>
#import <AudioToolbox/AudioToolbox.h>

#define NOT_PLAYING -1

@protocol MediaDelegate <NSObject>
@optional
- (void) didEndPlayingAtIndex:(int) index;
- (void) startedToPlayAtIndex:(int) index;
- (void) stoppedToPlayAtIndex:(int) index;
- (void) startedToPlayAtIndex:(int) to fromIndex:(int) from;
- (void) pausedAtIndex:(int) index;
@end

@interface Media : NSObject <AVAudioSessionDelegate>

@property (nonatomic, assign) int currentItem;
@property (nonatomic, strong) NSURL *url;
@property (nonatomic, strong) AVPlayer *player;
@property (nonatomic, assign) id<MediaDelegate> delegate;

- (void) toggle:(int) index;
- (void) stop;

@end 
```

媒体.m：

```
#import "Media.h"

@implementation Media

@synthesize currentItem;
@synthesize player;
@synthesize delegate;
@synthesize url;

- (id)init
{
    self = [super init];
    if (self) {
        NSError *activationError = nil;
        NSError *setCategoryError = nil;
        AVAudioSession *session = [AVAudioSession sharedInstance];
        session.delegate = self;
        [session setActive:YES error:&activationError];
        [session setCategory:AVAudioSessionCategoryPlayback error:&setCategoryError];

        if(activationError || setCategoryError)
            NSLog(@"ERROR: %@, %@",activationError,setCategoryError);

        self.currentItem = NOT_PLAYING;
    }
    return self;
}

- (void)dealloc{
    NSError *activationError = nil;
    [[AVAudioSession sharedInstance] setActive:NO error:&activationError];

    if(activationError)
        NSLog(@"ERROR: %@",activationError);

    [self.player removeObserver:self forKeyPath:@"status"];
}

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context
{    
    switch (player.status) {
        case AVPlayerItemStatusReadyToPlay:
            [self.player play];
            if([self.delegate respondsToSelector:@selector(startedToPlayAtIndex:)])
                [self.delegate startedToPlayAtIndex:self.currentItem];
            break;
        default:
            break;
    }
}

- (void) toggle:(int) index{
    if (self.currentItem == NOT_PLAYING) {
        self.player = [AVPlayer playerWithPlayerItem:[AVPlayerItem playerItemWithURL:self.url]];
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(didEnd:)
                                                     name:AVPlayerItemDidPlayToEndTimeNotification 
                                                   object:self.player];
        self.currentItem = index;
        [self.player addObserver:self forKeyPath:@"status" options:0 context:nil];
    }
    else {
        if (self.currentItem == index) {
            [self.player pause];
            if([self.delegate respondsToSelector:@selector(stoppedToPlayAtIndex:)])
                [self.delegate stoppedToPlayAtIndex:index];
            self.currentItem = NOT_PLAYING;
            [self.player removeObserver:self forKeyPath:@"status"];
            self.player = nil;
            [[NSNotificationCenter defaultCenter] removeObserver:self];
        }
        else{
            [self.player replaceCurrentItemWithPlayerItem:[AVPlayerItem playerItemWithURL:self.url]];
            if([self.delegate respondsToSelector:@selector(startedToPlayAtIndex:fromIndex:)])
                [self.delegate startedToPlayAtIndex:index fromIndex:self.currentItem];
            self.currentItem = index;
        }
    }
}

- (void) stop{
    [self.player pause];
    if([self.delegate respondsToSelector:@selector(stoppedToPlayAtIndex:)])
        [self.delegate stoppedToPlayAtIndex:self.currentItem];
}

-(void) didEnd:(id)sender{
    if([self.delegate respondsToSelector:@selector(didEndPlayingAtIndex:)])
        [self.delegate didEndPlayingAtIndex:self.currentItem];
    self.currentItem = NOT_PLAYING;
    [self.player removeObserver:self forKeyPath:@"status"];
    self.player = nil;
    [[NSNotificationCenter defaultCenter] removeObserver:self];
}

#pragma mark - AVAudioSession delegate

-(void)beginInterruption{
    NSLog(@"Interruption");
    if(self.currentItem != NOT_PLAYING){
        [self.player pause];
        if([self.delegate respondsToSelector:@selector(pausedAtIndex:)])
            [self.delegate pausedAtIndex:self.currentItem];
    }
}

-(void)endInterruption{
    NSLog(@"Ended interruption");
    if(self.currentItem != NOT_PLAYING){
        [self.player play];
        if([self.delegate respondsToSelector:@selector(startedToPlayAtIndex:)])
            [self.delegate startedToPlayAtIndex:self.currentItem];
    }
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-07T15:07:18.653

您的音频路由正确似乎有问题。我建议添加一个音频路由更改侦听器回调。首先声明一个方法：

```
void audioRouteChangeListenerCallback(void *inUserData, AudioSessionPropertyID inPropertyID, UInt32 inPropertyValueSize, const void *inPropertyValue); 
```

然后在您的 init 方法中添加一个回调：

```
// Prevent from audio issues when you pull out earphone
AudioSessionAddPropertyListener(kAudioSessionProperty_AudioRouteChange, audioRouteChangeListenerCallback, (__bridge void *)(self)); 
```

最后，添加一个回调实现：

```
void audioRouteChangeListenerCallback(void *inUserData, AudioSessionPropertyID inPropertyID, UInt32 inPropertyValueSize, const void *inPropertyValue) {
    if (inPropertyID != kAudioSessionProperty_AudioRouteChange) {
        return;
    }

    CFDictionaryRef routeChangeDictionary = inPropertyValue;
    CFNumberRef     routeChangeReasonRef  = CFDictionaryGetValue(routeChangeDictionary, CFSTR(kAudioSession_AudioRouteChangeKey_Reason));
    SInt32          routeChangeReason;
    CFNumberGetValue(routeChangeReasonRef, kCFNumberSInt32Type, &routeChangeReason);

    if (routeChangeReason == kAudioSessionRouteChangeReason_OldDeviceUnavailable) {
        // Headset is unplugged..
        NSLog(@"Headset is unplugged..");
        // Delayed play: 0.5 s.
        dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 0.5f * NSEC_PER_SEC), dispatch_get_main_queue(), ^{
            [CORE.player play]; // NOTE: change this line according your current player implementation
            NSLog(@"resumed play");
        });
    }
    if (routeChangeReason == kAudioSessionRouteChangeReason_NewDeviceAvailable) {
        // Headset is plugged in..
        NSLog(@"Headset is plugged in..");
    }
} 
```

希望这有帮助！至少对其他人来说，这将是有用的提示。

# google-docs - Google Picker 身份验证流程

> ID：10515189
> 
> 赞同：1
> 
> 时间：2012-05-09T11:31:26.563
> 
> 标签：google-docs, google-docs-api, google-picker

有人可以帮我弄清楚如何从 Google Picker 中选择 Google Document 的内容。在早期版本的 Google Picker 中，有一个“accessToken”概念，我们可以使用它下载文档内容，但是由于 Picker 中的 Google Docs 文档对“accessToken”的支持被删除（响应 json 字符串中没有 accessToken 参数）现在可以实现了吗？？？。身份验证流程现在如何工作？

顺便问一下，Google Picker 的新文档什么时候准备好，以便我们清楚地了解流程是如何工作的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T14:47:11.913

新流程已由 Google Drive 团队记录。文档在这里：[https](https://developers.google.com/drive/integrate-open) ://developers.google.com/drive/integrate-open 。

您只需从 Google API 控制台获取一个适当范围的 AppID，而不是为每个文档获取一个令牌。请参阅：[https ://developers.google.com/console/help/](https://developers.google.com/console/help/)

获得 ID 后，将其与使用 setAppId 方法的 Picker 实例相关联。瞧！

# java - 将 TreeSet 元素的顺序更改为自定义输出

> ID：10515190
> 
> 赞同：0
> 
> 时间：2012-05-09T11:31:30.727
> 
> 标签：java, sorting, treeset

我知道 TreeSet 以排序方式存储对象。但是有没有办法可以自定义订单？

例如，如果我有一个 treeSet：

```
 TreeSet t1 = new TreeSet();
    t1.add("c");
    t1.add("d");
    t1.add("a"); 
```

现在如果我遍历它>

```
 Iterator it1 =t1.iterator();

    while(it1.hasNext()){
      Object o1 = it1.next();
      System.out.println(o1);
    } 
```

我将始终得到订单：`a>c>d`，但是我希望它返回与我在其中添加元素相同的订单，即`c>d>a`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T11:32:21.760

用[`LinkedHashSet`](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedHashSet.html)它，

`TreeSet`对元素进行排序，对于字符串，它根据自然顺序进行排序（这是其比较器的实现方式），如果要管理插入顺序，则需要用户`LinkedHashSet`

如果您不需要唯一性（集合的功能），那么就去`List`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T15:59:07.917

既然你提到必须使用 TreeSet，我就想到了这样的事情：

```
 Set<String> result = new TreeSet<String>(new Comparator<String>(){
    @Override
    public int compare(String arg0, String arg1) {
        return returnCode(arg0).compareTo(returnCode(arg1));
    }
 }); 
```

在哪里：

```
private Integer returnCode(String p){
        int code = 0;
        String id = p.toLowerCase();
        if ("a".equalsIgnoreCase(id)) code = 3;
        else if ("b".equalsIgnoreCase(id)) code = 2;
        else if ("c".equalsIgnoreCase(id)) code = 1;
        //etc
        return new Integer(code);
 } 
```

所以基本上你正在实现你自己的比较器，它只不过是为插入的字符串分配某些整数值（我假设你已经知道了）。

注意：如果您没有在 returnCode() 方法中捕获该选项，此解决方案将不起作用。我假设您已经知道输入到 TreeSet 的数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-22T18:07:59.280

这要容易得多：

```
TreeSet treeSetObj = new TreeSet(Collections.reverseOrder()); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-06-30T17:04:44.957

我有一个很好的答案。这是我的第一个。

```
import java.util.*;
class M
{
public static void main(String args[])
{
    TreeSet<String> t=new TreeSet<>(new MyComparator());

    t.add("c");
    t.add("d");
    t.add("a");

    System.out.println(t);//[c,d,a] not [a,c,d] ....your answer

 }
 }

class MyComparator implements Comparator
{
public int compare(Object o1,Object o2)
{
    String i1=(String)o1;
    String i2=(String)o2;
    return +1; //Store elements as they come
} 
```

}

基本上 +1 确实按它们出现的顺序存储元素。

永远记住，如果我写return +1，它意味着按照它们来的顺序存储元素。如果我写 return -1 这意味着以相反的顺序存储元素。

# c# - 使用 Json.Net 序列化声明为新的继承属性不起作用

> ID：10515195
> 
> 赞同：3
> 
> 时间：2012-05-09T11:31:47.947
> 
> 标签：c#, serialization, json.net

[Json.Net](http://json.codeplex.com/)在子类中序列化被覆盖的属性没有问题。

```
public override ICollection<Person> Persons { get; set; } 
```

但是如果我尝试`new`在属性上使用，序列化会失败。也不例外；`Persons`只是从不序列化。

```
public new ICollection<Person> Persons { get; set; } 
```

为什么是这样？

（这个例子没有多大意义，我知道。这只是一个例子。后面的目标是能够改变属性的数据类型`public new ICollection<PersonDto> Persons { get; set; }`）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-10T06:41:35.943

我发现了一种更简单的方法来解决这个问题，而无需创建自定义`JsonConverter`

如果将属性放在属性`JsonProperty`上，它会起作用。

```
[JsonProperty]
public new ICollection<PersonDto> Persons { get; set; } 
```

我不知道为什么 Json.Net 需要这里的属性。通常它会序列化所有没有用`JsonIgnore`. 如果有人知道，欢迎您发表评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:22:13.177

如果你想这样做是因为你想指定如何将`Person`序列化为 JSON，我认为更好的解决方案是使用自定义`JsonConverter`. 转换器可能看起来像这样：

```
class PersonConverter : JsonConverter
{
    public override void WriteJson(
        JsonWriter writer, object value, JsonSerializer serializer)
    {
        var person = (Person)value;
        serializer.Serialize(
            writer,
            new
            {
                Name = person.LastName,
                Age = (int)(DateTime.Now - person.BirthDate).TotalDays / 365
            });
    }

    public override object ReadJson(
        JsonReader reader, Type objectType, object existingValue,
        JsonSerializer serializer)
    {
        throw new NotImplementedException();
    }

    public override bool CanConvert(Type objectType)
    {
        return objectType == typeof(Person);
    }
} 
```

然后你可以像这样使用它：

```
JsonConvert.SerializeObject(yourObject, new PersonConverter()) 
```

# asp.net - 在 ASP.NET 中保存 UICulture 的最佳方法是什么？

> ID：10515197
> 
> 赞同：2
> 
> 时间：2012-05-09T11:32:06.410
> 
> 标签：asp.net, localization, webforms

我正在开发双语 ASP.NET 应用程序，我想知道帽子是在整个应用程序中存储 UICulture 和 Culture 值的最佳方式吗？

*   饼干。
*   会议。
*   请求参数。
*   或者是其他东西。

**更新：** 我想让相同的 ASPX 表单成为双语页面，到目前为止我得到的答案是制作一个单独的页面并使其可以被子域访问，我现在真正在做的是使用 Session，但我现在想知道用户资源文件的最佳做法是使页面双语而不创建另一个副本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T11:40:13.727

通常，这取决于您的特定用例。

然而，大多数情况下，您可能希望为每个页面和语言设置不同的**URL**，以便搜索引擎对其进行正确索引。例如 URL 是这样的：

*   [http://en-us.example.com/index.htm](http://en-us.example.com/index.htm)
*   [http://www.example.com/en-us/index.htm](http://www.example.com/en-us/index.htm)
*   [http://www.example.com/index.htm?l=en-us](http://www.example.com/index.htm?l=en-us)

我更喜欢前两个选项。

*或者，您可以在用户首次*访问您的网站时根据他们的浏览器语言重定向用户（但请确保用户仍然可以浏览其他语言）。

* * *

更新：*这并不意味着您必须制作与语言一样多的网站版本。*

如果您有每种语言的子域：

*   将每个子域指向您的站点
*   在页面的代码隐藏中，您覆盖该`InitializeCulture`方法（您可以为所有页​​面使用基类以使其保持干燥）
*   在覆盖的`InitializeCulture`方法中设置适当的区域性
*   创建资源文件
*   使用页面中的资源 - 将根据文化显示正确的翻译。

如果您决定不使用子域但在 URL 中包含文化名称，则可以使用**URL 重写**从每个 URL 指向同一页面。

一些可以帮助您入门的代码：

```
protected override void InitializeCulture() {
    // Identify the culture and replace the hardcoded values below
    // (Use Request.Url.xxx for example)
    Thread.CurrentThread.CurrentUICulture = new CultureInfo("en", false);
    Thread.CurrentThread.CurrentCulture = new CultureInfo("en-US", false);
    base.InitializeCulture();
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-09T11:39:34.703

您始终可以使用 URL 重写来存储用户选择的文化偏好。不是特别确定这是如何在 ASP.Net 中实现的，但是在 MVC 中使用路由表很容易。

为了说明，您的 url 看起来像这样：[http://example.org/en-gb/Action](http://example.org/en-gb/Action) 作为一种解决方案，这消除了会话的开销、有人在浏览器中关闭了 cookie 的可能性以及难看的生成的 QueryString。

我将尝试以如何进行 url 重写的示例返回。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-09T11:47:57.403

最佳实践是为每种语言创建子域\单独的站点，并使用其自己的单独 IIS 网站。对于需要双字节的亚洲语言尤其如此。

你会在 yahoo、google 等平台上看到这种做法：

*   [http://www.google.cn/](http://www.google.cn/)
*   [http://es.yahoo.com/](http://es.yahoo.com/)
*   等等。

# c# - C# 将 DataGridView 中的更改提交到 DataTable

> ID：10515199
> 
> 赞同：2
> 
> 时间：2012-05-09T11:32:10.757
> 
> 标签：c#, datagridview, datatable

我需要一个包含一个 DataGridView 表单和一个 DataTable 的代码或项目示例，这样我就可以编辑 DataGridView 单元格，然后所有更改都会自动提交到 DataTable 中。另外，如何手动创建具有 DataGridView 相同列的 DataTable？

我尝试手动创建具有相同列的 DataGridView 和 DataTable，然后设置 DataGridView.DataSource = DataTable，**但保存到表中的数据为空**（无论如何新行数是正确的，但值无效）。

试图用谷歌搜索它 - 所有的示例和问题都是关于保存到数据库中的，但我不需要数据库，我只需要一个简单的 DataTable 和 DataGridView 绑定。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T11:42:50.793

无法从`DataGridView`列中自动创建表（**编辑**要完善这一点：有一些方法可以自动创建数据库结构 - ORM 在这里是一个很好的关键字 - 但我想这不是你需要的）。反之亦然：创建表并将其分配给`DataGridView`作为其数据源的表。然后网格应该显示相应的列。

“存储”数据表中的值仅在您“告诉”列，即它们与基础表的哪个字段相关时才有效。即：您需要创建表列（它有一个名称），并且在创建`DataGridView`列时，您需要将列名分配给列的`DataPropertyName`属性。

最简单的方法：创建一个类型化的数据集（使用“添加到项目”对话框添加一个新的“数据集”），在数据集的设计器中手动创建一个表，将数据集的一个实例拖到表单中并将其分配为数据源到您的`DataGridView`. 其他一切都应该自动出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T11:43:45.437

我希望你这个来自 codeproject 的链接可能会有所帮助：

[http://www.codeproject.com/Questions/80935/save-datagrid-data-to-database](http://www.codeproject.com/Questions/80935/save-datagrid-data-to-database)

[http://www.codeproject.com/Articles/12846/Auto-Saving-DataGridView-Rows-to-a-SQL-Server-Data](http://www.codeproject.com/Articles/12846/Auto-Saving-DataGridView-Rows-to-a-SQL-Server-Data)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-10T16:07:18.160

如果您的 DataTable 设置为 dataGridView 的 DataSource，则 dataGridView 中的内容将反映 DataTable 中的数据，反之亦然。因此，如果您对 dataGridView 进行更改，这些更改已经在 DataTable 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-19T06:26:00.747

转换`DatagridView`为`DataTable`.
在 C#.NET 中：

```
DataTable dt = ((DataView)this.dataGridView1.DataSource).Table; 
```

VB.NET：

```
Dim dt As DataTable = CType(Me.dataGridView1.DataSource,DataView).Table 
```

# sql - 为什么 SQL 错误不显示错误来源？

> ID：10515200
> 
> 赞同：3
> 
> 时间：2012-05-09T11:32:19.073
> 
> 标签：sql, oracle, debugging, oracle-sqldeveloper

在Oracle SQL developer中执行SQL代码时，是否可以找到发生错误的行或列？

例如，假设您正在运行一个非常简单的代码行

```
SELECT * FROM employeesTbl WHERE active = 1 
```

但是由于某种原因，active 是 VARCHAR 并且有人在此字段中输入了“;！/asd02”。

你只会得到一个 ORA- 错误，但它不会告诉你是哪一行导致的。

有人知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T11:44:57.647

这背后的原因是一般开发人员对 sql、pl/sql 等的支持真的很糟糕。一个结果是 pl/sql 中的异常概念确实被打破了，（oracle）sql 中的异常几乎是无用的，并且几乎没有希望它在任何 rdbms 中更好。

我认为这一切背后的原因是数据库是持久的野兽（双关语）。许多公司和开发人员不时更改首选的主要开发语言（C、C++、VB、Java、C#、Groovy、Scala ..）。但是他们很少更改数据库，可能是因为您仍然拥有旧数据库而没有机会迁移它们。

这反过来意味着大多数 DB 开发人员只知道一个合理的数据库系统，所以他们看不到其他系统中的可能性。因此，使数据库系统对开发人员更加可用几乎没有压力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T12:24:50.980

*多*行可能包含错误。为了使系统保持一致（作为“基于集合”的语言），它应该返回*所有*包含错误的行 - 并非所有行错误都可能由*相同*的错误引起。

但是，计算整个错误集的计算成本可能很高——并且系统“知道”这个查询的任何进一步计算无论如何*都会*导致失败——所以当其他查询可以成功运行时，它表示资源浪费。

我同意将这种类型的报告作为一个**选项**打开会很好（尤其是在非生产环境中），但似乎没有数据库供应商这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T11:42:00.633

您会收到一个错误，因为该字段是一个字符并且您假设它是一个数字。哪个，你不应该这样做。如果您希望该字段是数字，那么您*必须*有一个数字字段！这是一般规则，所有非字符列都应该是正确的数据类型以避免此类问题。

我不确定为什么 Oracle 不告诉您是哪一行导致了错误，在物理上可以使用[`rowid`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/pseudocolumns008.htm#SQLRF00254)您在此处的简单选择中的 。如果您要连接表格或使用转换功能`to_number`，如果可能的话，这将变得更加困难。

我想 Oracle 不想只部分实现某些东西，尤其是当这不是 Oracle 错误而是编码错误时。

要解决问题，请创建以下函数：

```
create or replace function is_number( Pvalue varchar2 
      ) return number is
    /* Test whether a value is a number. Return a number
       rather than a plain boolean so it can be used in
       SQL statements as well as PL/SQL.
       */

   l_number number;

begin

   -- Explicitly convert.
   l_number := to_number(Pvalue);

   return 1;

exception when others then
   return 0;

end;
/ 
```

运行以下命令以查找您的问题行：

```
SELECT * FROM employeesTbl WHERE is_number(active) = 0 
```

或者忽略它们：

```
SELECT *
  FROM ( SELECT *
           FROM employeesTbl
          WHERE is_number(active) = 1 )
WHERE active = 1 
```

# c++ - 在 Visual C++ 中测试双精度

> ID：10515205
> 
> 赞同：0
> 
> 时间：2012-05-09T11:32:30.503
> 
> 标签：c++, .net, windows

我正在用 Visual C++ 设计一个 gui，并且有一个文本框，用户可以在其中输入值，以便执行计算。如何验证输入以确保它可以转换为*双精度*值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T11:46:07.667

`std::string`在任何有一个字段并希望检查它是否包含 a 的C++ 环境中`double`，您可以简单地执行以下操作：

```
#include <sstream>

std::istringstream iss(string_value);
double double_value;
char trailing_junk;
if (iss >> double_value && !(iss >> trailing_junk))
{
    // can use the double...
} 
```

如前所述，这将拒绝类似`"1.234q"`或`"-13 what?"`但接受周围的空白，例如`" 3.9E2 "`. 如果您想拒绝空格，请尝试`#include <iomanip>`then `if (iss >> std::noskipws >> double_value && iss.peek() == EOF) ...`。

您也可以使用旧式 C API 来执行此操作：

```
double double_value;
if (sscanf(string_value.c_str(), "%lf%*c", &double_value) == 1) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T11:42:17.050

您不能将字符串“转换”为双精度，只能*将*其转换。 [strtod](http://msdn.microsoft.com/en-us/library/kxsfc1ab%28v=vs.71%29.aspx)函数将返回一个指针，该指针指向转换停止的字符串中的字符，因此您可以决定进一步做什么。因此，您可以使用此功能进行转换和检查。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T11:46:33.083

我推荐[Boost 的 lexical_cast](http://www.boost.org/doc/libs/1_49_0/doc/html/boost_lexical_cast.html)，如果转换失败，它会抛出异常。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T11:49:27.527

如前所述， strtod(3) 就是答案。

```
bool is_double(const char* str) {
    char *end = 0;
    strtod(str, &end);
    // Is the end point of the double the end of string?
    return end == str + strlen(str);
} 
```

* * *

为了解决@Ian Goldby 的担忧，如果刺痛末尾的空白是一个问题，那么：

```
bool is_double(const char* str) {
    char *end = 0;
    strtod(str, &end);
    // Is the end point of the double plus white space the end of string?
    return end + strspn(end, " \t\n\r") == str + strlen(str);
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-09T11:53:54.550

由于这似乎是一个与 C++ CLI 相关的问题，并且您在文本框中的字符串可能是一个 .NET 字符串，您可能需要检查静态[Double::Parse](http://msdn.microsoft.com/en-us/library/7yd1h1be.aspx#Y0)方法。有关更便携的解决方案，请参阅其他答案...

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T11:45:06.063

只需将其转换为双精度值。如果成功，则输入有效。

真的，您不应该编写自己的规则来决定什么是有效的。您永远不会得到与执行实际转换的库函数完全相同的规则。

我最喜欢的方法是使用 sscanf()，并检查返回值以确保恰好转换了一个字段。为了获得额外的积分，请使用 %n 参数来检查是否没有剩余非空白字符。

# facebook - 尝试发布内置读取操作时出错

> ID：10515215
> 
> 赞同：0
> 
> 时间：2012-05-09T11:33:01.753
> 
> 标签：facebook, facebook-graph-api, facebook-timeline

我一直在尝试将文章对象的读取操作发布到时间轴，但我无法克服此错误：

url 处的消息 (#3502) 对象...具有 og：“网站”类型。属性 'article' 需要 og:type 'article' 的对象。现在我确信我的元标记是正确的，并且 og:type 是“文章”，而不是“网站”。

这是文章[http://fb.idebate.eu/article2.php](http://fb.idebate.eu/article2.php)的链接。

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:51:00.907

在针对[Facebook Open Graph Debugger](https://developers.facebook.com/tools/debug)测试您的文章时，它返回以下错误：

> 解析器不匹配的元数据：
> 
> 此元数据的解析器结果与输入元数据不匹配。这可能是由于数据以一种意外的方式排序、为一个属性提供了多个值而只期望一个值、或者给定属性的属性值不匹配造成的。

在您的页面中，您已经定义了两次文章描述：

```
<meta property="og:description" content="A Farewell To Arms" /> 
<meta property="og:description" content="quote" /> 
```

尝试删除其中一项描述，看看是否能解决您的问题。

# sql - 选择 table.* 作为 prefix_[table.columname]，这可能吗？（或容易？）

> ID：10515218
> 
> 赞同：0
> 
> 时间：2012-05-09T11:33:11.450
> 
> 标签：sql, sql-server

`MainTable`并且`SubTable`有很多列。

```
SELECT Sub.*, Main.* FROM 
(
SELECT * FROM [SubTable]
) Sub
LEFT OUTER JOIN [MainTable] main
ON Sub.MainID = Main.ID 
```

此查询返回每个表的每一列。

中的某些列与fe中的某些列或许多其他列`SubTable`具有相同的名称。`MainTable``created``modified`

SQL Server 中有没有办法做类似的事情（不列出每一列）：

```
Select Sub.* as sub_[subcolumnname], Main.* as main_[columnname] 
```

我很难找到我想要的术语，这使得几乎不可能用谷歌搜索它。

欢迎任何建议，提前谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T11:35:31.003

您只能使用动态 sql 执行此类操作：[http ://www.techrepublic.com/blog/datacenter/generate-dynamic-sql-statements-in-sql-server/306](http://www.techrepublic.com/blog/datacenter/generate-dynamic-sql-statements-in-sql-server/306)

# php - 我将如何创建愿望清单？

> ID：10515228
> 
> 赞同：0
> 
> 时间：2012-05-09T11:33:59.513
> 
> 标签：php

我正在制作一个显示大量物品的网站，类似于 eBay 列出物品的方式。对于每个项目，都有一个按钮可让您将其保存到“愿望清单”中，还有一个链接可将您带到一个页面，该页面列出了您的愿望清单上的所有项目。

我将如何实施呢？我目前正在使用 Javascript cookie 并将 URL 中的值传递给 PHP 以获取并显示愿望清单中的项目。感觉必须有一种更简单/更好的方法来做到这一点。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:41:02.567

存储愿望清单的最佳方式是仅数据库。你可以通过一些ajax来做到这一点。

或者，如果您不想存储在数据库中，则将其存储在会话中。我个人认为这次会议将是最好的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:38:57.027

我不确定您的意思是什么`I was using javascript cookies, passing the values in the url`，但除非您想将愿望清单保存到 Db，否则 cookie 将是一个不错的选择。

另一种方法是在您向列表中添加某些内容时向服务器执行 ajax 请求，让服务器端代码在会话中为您保存该项目。然后，当您要显示列表时，可以读取会话。

此外，HTML5 为您提供[本地存储](http://diveintohtml5.info/storage.html)。也许对您的浏览器支持太有限，但值得一试。

# http - 下载页面时我的 node.js 代码错误是怎么来的？

> ID：10515229
> 
> 赞同：0
> 
> 时间：2012-05-09T11:34:01.410
> 
> 标签：http, url, node.js, tcp

```
 var request = require('request');
    var url = 'http://pinterest.com';
    request({ 
        'method':'GET',
        'url':url,
    }, function(err, response, body){

    }); 
```

当我点击这个时，我得到：

```
[TypeError: Cannot read property 'url' of undefined]
TypeError: Cannot read property 'url' of undefined
    at new Cookie (/home/user/project/src/node_modules/request/vendor/cookie/indeprojectx.js:45:20)
    at /home/user/project/src/node_modules/request/main.js:434:33
    at Array.forEach (native)
    at Request.<anonymous> (/home/user/project/src/node_modules/request/main.js:428:46)
    at Request.emit (events.js:67:17)
    at IncomingMessage.<anonymous> (/home/user/project/src/node_modules/request/main.js:393:16)
    at IncomingMessage.emit (events.js:88:20)
    at HTTPParser.onMessageComplete (http.js:137:23)
    at Socket.ondata (http.js:1137:24)user 
```

注意：我在 EC2 上。出于某种原因，这不适用于 pinterest.com。它适用于 Google.com 和 yahoo.com。我可以 CURL pinterest.com 就好了。

# c# - 如何在 METRO 应用程序中使用 GoToState 和 DataTemplate

> ID：10515230
> 
> 赞同：3
> 
> 时间：2012-05-09T11:34:08.087
> 
> 标签：c#, xaml, visualstatemanager

在我的 Page.Resources 我有 DataTamplate：

```
<DataTemplate x:Key="gridviewQuestStyle">
        <Button Content="{Binding QuestNumb}" Style="{StaticResource buttonQuestStyle}"> 
            <VisualStateManager.VisualStateGroups>
                <VisualStateGroup x:Name="questionStates">                        
                    <VisualState x:Name="Right">
                        <Storyboard>
                            <ColorAnimation Storyboard.TargetName="BackgroundBrush" Storyboard.TargetProperty="Color" To="LightGreen" />
                        </Storyboard>
                    </VisualState>
                    <VisualState x:Name="Wrong">
                        <Storyboard>
                            <ColorAnimation Storyboard.TargetName="BackgroundBrush" Storyboard.TargetProperty="Color" To="Red" />
                        </Storyboard>
                    </VisualState>
                </VisualStateGroup>
            </VisualStateManager.VisualStateGroups>

            <Button.Background>
                <SolidColorBrush x:Name="BackgroundBrush" Color="Black"/>
            </Button.Background>
        </Button>
    </DataTemplate> 
```

然后我创建 GridView：

```
<GridView Grid.Row="0" x:Name="GridView_ButtonsQuest"
    ItemTemplate="{StaticResource gridviewQuestStyle}"
    ItemsSource="{Binding Questions}" >
</GridView> 
```

问题是一个列表：

```
public class Question
{
    public string QuestNumb { get; set; }
    public string QuestText { get; set; }
} 
```

我的应用程序的逻辑是：

```
 if(isAnswerRight)
{
  VisualStateManager.GoToState(???, "Right", false);
}
else
{
  VisualStateManager.GoToState(???, "Wrong", false);
} 
```

请解释一下，我在 GoToState 方法的第一个参数中需要什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:28:15.297

如果 VisualState 切换出现在 Page 或 UserControl 的 .cs 文件中（不在 MVVM 视图模型中）。将名称属性应用到 GridView

```
<GridView Grid.Row="0" x:Name="GridView_ButtonsQuest"
    ItemTemplate="{StaticResource gridviewQuestStyle}"
    ItemsSource="{Binding Questions}" 
    x:Name="myStateChanges" >
</GridView> 
```

然后将其粘贴在 GoToState() 方法中。

```
if(isAnswerRight)
{
  VisualStateManager.GoToState(this.myStateChanges, "Right", false);
}
else
{
  VisualStateManager.GoToState(this.myStateChanges, "Wrong", false);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T16:12:07.917

Listview 也有同样的问题。可以使用 ItemContainerGenerator 和 VisualTreeHelper 访问模板内的 Control

```
foreach (var item in GridView_ButtonsQuest.Items)
{
    var gridItem = (GridViewItem)MyList.ItemContainerGenerator.ContainerFromItem(item);
    var wrap1 =VisualTreeHelper.GetChild(gridItem , 0);
    var wrap2 = VisualTreeHelper.GetChild(wrap1 , 0);
   ... 
```

我使用 xmalspy 来找出控件包含多少层。应该可以构建一些执行此递归的东西。

我遇到的下一个问题是您不能将 GoToState 与网格或按钮一起使用。但是有人花时间开发了一个支持它的 ExtendedVisualStateManager，请参阅[http://social.msdn.microsoft.com/Forums/en-GB/winappswithcsharp/thread/24dc19ff-15ed-4170-b3c3-d313728b642b](http://social.msdn.microsoft.com/Forums/en-GB/winappswithcsharp/thread/24dc19ff-15ed-4170-b3c3-d313728b642b)

然后你可以写 ExtendedVisualStateManager.GoToElementState(...)

# websphere - 如何将安全角色映射到 websphere 自由配置文件中的 ldap 组

> ID：10515232
> 
> 赞同：2
> 
> 时间：2012-05-09T11:34:19.897
> 
> 标签：websphere, websphere-liberty

我有使用 MS Active Directory 的自由配置文件身份验证。但我无法设置角色映射到组。

我在 web.xml 中创建了一个安全角色：

```
<security-role>
    <description>Users who are authorized to do update and insert operations</description>
    <role-name>AuthorizedUser</role-name>
</security-role> 
```

对于带有 wmm 的完整 WAS，我已将角色映射到 ibm-application-bnd.xml 中的一个组，该组有效：

```
<security-role name="AuthorizedUser" >
    <group name="mygroup" access-id="group:defaultWIMFileBasedRealm/CN=mygroup,OU=myorg,DC=mydomain,DC=AD,DC=myco,DC=com"/>
</security-role> 
```

但这不适用于自由配置文件。
我需要更改访问 ID 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T20:04:45.563

accessId 必须使用与您的用户注册表配置的域名完全相同的域名。例如，如果您的注册表是这样配置的：

```
<ldapRegistry realm="myLDAPRealm"/> 
```

那么您的 accessId 值必须具有相同的值

```
<security-role name="AuthorizedUser" >
    <group name="mygroup" access-id="group:myLDAPRealm/..."/>
</security-role> 
```

LDAP 注册表的默认领域名称是“LdapRegistry”，作为参考，基本注册表的默认领域名称是“BasicRegistry”。

正如 AJ_R 指出的那样，您可以完全删除 access-id 字段并让 access-id 自动生成。通常情况下，不需要手动指定 access-id 值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T11:53:03.907

问题是“memberOf”中的 b/c 'o' != 'O'，我认为这在 TWAS 中不区分大小写。

自定义 MS 活动目录 groupMemberIdMap 修复了组搜索：

`<activedFilters groupMemberIdMap="memberOf:member"/>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-15T13:32:13.417

配置 MS Active 目录时是否使用了相同的 realmName (defaultWIMFileBasedRealm)？您还可以尝试删除访问 ID（仅使用组名）并让自由服务器使用为注册表定义的 relamName 生成它，看看是否有帮助。

# iphone - 如何在编辑文本时更改 uiimageview 在 textview 中的位置

> ID：10515233
> 
> 赞同：0
> 
> 时间：2012-05-09T11:34:35.073
> 
> 标签：iphone, uiimageview, uitextview

我正在制作一个应用程序，我必须将图像放在 uitextview 中。我面临的问题是，当我在两个图像中间写文字时，我该如何相应地移动图像。任何示例代码将不胜感激。

![在此处输入图像描述](../Images/cc3f889a94d834c4f75d663c750890a8.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:39:19.980

在这里，我为您提供一张图片的示例代码。

```
- (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text;
{
if ( [text isEqualToString:@"\n"] ) {

}
else
{
    NSString *yourstring = [[NSString alloc]init];
    yourstring = textView.text;
    CGSize s = [yourstring sizeWithFont:[UIFont systemFontOfSize:15] //define your textview font size
                      constrainedToSize:CGSizeMake(self.view.bounds.size.width - 40, MAXFLOAT)  // - 40 For cell padding
                          lineBreakMode:UILineBreakModeWordWrap];   
    CGRect frame = CGRectMake(0.0f, s.height+10, 320.0f, 20);//use YourImageView. height and width 
    YourImageView.frame=frame;
}
return YES;
} 
```

希望对你有帮助..

# hibernate - Hibernate 巨量查询优化

> ID：10515246
> 
> 赞同：3
> 
> 时间：2012-05-09T11:35:19.617
> 
> 标签：hibernate, optimization

我刚刚负责一个应用程序，其目标是提取大量数据（从包含 10,000,000 行的表中提取多达 100,000 行）。不幸的是，提取是用Java + Hibernate编写的，性能相对较差。使用 Java + Hibernate 提取 100,000 行大约需要 1 分 30 秒。[使用Talend](http://www.talend.com/)进行相同的提取大约需要 30 秒（少 3 倍）。

以下是代码的示例：

```
Launcher.initStatelessSession();
Launcher.beginStatelessTransaction();

//Creation of the Criteria crit, no join, only a single table is read.
int fetchSize = 1000;
crit.setFetchSize(fetchSize);
crit.setCacheable(false);
crit.setReadOnly(true);

ScrollableResults result = crit.scroll(ScrollMode.FORWARD_ONLY);
// Most of the time is spent from HERE ...
while (result.next()) {
   // Some code but insignificant time compared to the result.next().
   // I replaced this code with continue; and the speed did not really change.
}
// ... to HERE 
```

关于可以加快此查询的优化的任何想法？目前，没有计划放弃 Hibernate 去做其他事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:55:30.637

我不知道 talend 是什么，但我怀疑它是某种数据库 gui 工具？

在这种情况下，可能的原因是休眠使对象脱水，即检查检索到的对象是否不在会话中，创建一个实例并填充所有属性（可能与其他引用的实体）。

使用分析器更详细地了解实际情况

所有这些都假设您实际上执行了相同的 sql 语句。如评论中所述，根据您的标准和您的映射休眠可能会创建非常“有趣”的选择语句。

# php - 如何使用 Imagick 创建画布效果？

> ID：10515251
> 
> 赞同：1
> 
> 时间：2012-05-09T11:35:50.870
> 
> 标签：php, imagemagick, imagick

我正在尝试使用 Imagick php 类在照片上复制画布纹理样式效果，如在标题“纹理”下看到的：

[http://www.imagemagick.org/Usage/photos/](http://www.imagemagick.org/Usage/photos/)

使用命令行可以这样实现：

```
composite texture_fabric.gif  pagoda_sm.jpg \
            -tile   -compose Hardlight    photo_texture.jpg 
```

但是我使用 ImageMagick 的 'Imagick' php 类，我似乎无法弄清楚如何平铺纹理。

我试过了：

```
$im = new Imagick("source.jpg")
$img2 = new Imagick("texture.gif");
$im->compositeImage($img2, imagick::COMPOSITE_HARDLIGHT, 0, 0); 
```

但我最终得到的只是在左上角的源图像上合成的纹理图像。

如何在链接中重新创建效果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:48:16.123

查看 imagick php 有[http://php.net/manual/en/imagick.textureimage.php](http://php.net/manual/en/imagick.textureimage.php) 您可能无法使用 Imagick 做您想做的事情，因为它的选项有限。一点横向思考：制作一个与图像大小相同的画布，然后将纹理平铺在上面，然后合成它？

您可以使用（未​​经测试）：

```
exec("composite texture_fabric.gif pagoda_sm.jpg -tile -compose Hardlight photo_texture.jpg"); 
```

# html - 图像的垂直和水平对齐

> ID：10515252
> 
> 赞同：1
> 
> 时间：2012-05-09T11:35:52.360
> 
> 标签：html, css, image, alignment

我有一个占位符（正在建设中）网站，其中只有一张带有徽标的图像。我与边距水平对齐：0 auto。但是我怎么知道另外水平对齐图像。或者一句话：我如何将图像完全集中。

[看这里看直播：fiddle](http://jsfiddle.net/egxa2/)

问候， 博多

编辑：对于 1:2（高度到宽度）图像使用：

```
#wrapper img
{
    position: absolute;
    top: 50%;
    left: 50%;
    width: 799px;
    height: 404px;
    margin: -202px -399px 0;
    border: 1px solid black;
} 
```

就像在链接的线程中一样:)

感谢您的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:47:28.260

这会做到的

```
img#logo {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 100px;
    height: 100px;
    margin-left: -50px;
    margin-top: -50px;
} 
```

[http://jsfiddle.net/DxByM/](http://jsfiddle.net/DxByM/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T11:48:07.167

嗯..你试过吗？

```
<div class='placeholder'>
   <img src='../images/myimage'>
</div> 
```

以及该标记的 css

```
.placeholder
{
position : absolute;
top : 50%;
left : 50%;
width : 200px; /* Width of the image in question */
height : 200px;/* height of the image in question */
margin : -100px 0px 0px -100px;
} 
```

这应该将您的图像带到页面的中心。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T11:43:55.640

有一个 div 来保存具有以下规则的图像：

```
margin-left: auto;
margin-right: auto;
margin-top:200px;  <!-- Will depend on your image -->
width:[your-image-width]px; 
```

将您的图像居中

# ios4 - 在 iOS 模拟器和设备中测试 NSFileProtectionComplete

> ID：10515253
> 
> 赞同：7
> 
> 时间：2012-05-09T11:35:56.527
> 
> 标签：ios4, encryption, ios-simulator, ios5

我在 coreData 应用程序中为我的 - (NSPersistentStoreCoordinator *)persistentStoreCoordinator 编写了这段代码。我使用 xCode 的 Master-Detail Application 模板来创建应用程序...

```
- (NSPersistentStoreCoordinator *)persistentStoreCoordinator
{
    if (__persistentStoreCoordinator != nil) {
        return __persistentStoreCoordinator;
    }

    NSURL *storeURL = [[self applicationDocumentsDirectory] URLByAppendingPathComponent:@"Notes2.sqlite"];

    NSError *error = nil;
    __persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc] initWithManagedObjectModel:[self managedObjectModel]];
    if (![__persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeURL options:nil error:&error]) {

        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }    

    NSString *urlString = [storeURL absoluteString];
    NSDictionary *fileAttributes = [NSDictionary dictionaryWithObject:NSFileProtectionComplete forKey:NSFileProtectionKey];
    if (![[NSFileManager defaultManager] setAttributes:fileAttributes ofItemAtPath:urlString error:&error]) 
    {
        // Handle error
    }

    return __persistentStoreCoordinator;
} 
```

如何测试并知道我的 sqlite 是否打开了 NSFileProtectionComplete？

我锁定了模拟器，但是当我在 Finder 中双击文件时，该文件仍然可读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-09-13T17:27:23.397

iTunes 不会从设备中复制文件，除非它有您的密码或该设备之前已被信任；这就是它能够解密数据的方式。

在 Xcode 8 及更早版本中，模拟器使用主机文件系统，而 macOS 目前不支持与 iOS 相同的按文件加密，因此在 macOS 上，您无法在模拟器中进行测试。

# ocaml - 如何在我的 CIL 模块中访问给 cilly 的文件

> ID：10515254
> 
> 赞同：3
> 
> 时间：2012-05-09T11:36:03.450
> 
> 标签：ocaml, static-analysis, c-intermediate-language

我在 CIL（C 中间语言）中添加了一个新功能。我可以使用执行我的新模块

```
$cilly --dotestmodule --save-temps -D HAPPY_MOOD -o test test.c 
```

现在，在我的 testmodule 中，我想为 test.c 文件调用 Cfg.computeFileCFG。但我不知道如何访问我模块中的 test.c 文件。

我尝试使用 Cil.file。但它说“未绑定值 Cil.file”。

我的代码：

```
open Pretty
open Cfg
open Cil

module RD = Reachingdefs

let () = Cfg.computeFileCFG Cil.file

let rec fact n = if n < 2 then 1 else n * fact(n-1)
let doIt n = fact n

let feature : featureDescr =
  { fd_name = "testmodule";
    fd_enabled = ref false;
    fd_description = "simple test 1240";
    fd_extraopt = [];
    fd_doit = (function (f: file) -> ignore (doIt 10));
    fd_post_check = true;
  } 
```

请告诉我如何计算 test.c 文件的 Cfg。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T17:21:53.693

我不是 CIL 专家，但这里有几点意见：

*   CIL 在线文档[指出](http://www.cs.berkeley.edu/~necula/cil/api/Cil.html#TYPEfile)这`Cil.file`是一种 Ocaml 类型。**将类型**作为参数传递给函数**可能**不是您想要做的。
*   您的特征描述符中的函数似乎将`fd_doit`您要处理的文件作为其参数`f`；
*   根据[Cilly](http://www.cs.berkeley.edu/~necula/cil/cilly.html)手册，类型`f`为`Cil.file`. 方便的是，这[似乎](http://www.cs.berkeley.edu/~necula/cil/api/Cfg.html)是函数所需的参数类型`computeFileCFG`。

希望你能从这里拿走它。祝你好运！

# ria - 使用 WCF Ria Services Link 时，ria 服务配置在哪里？

> ID：10515258
> 
> 赞同：0
> 
> 时间：2012-05-09T11:36:20.973
> 
> 标签：ria, silverlight-5.0

我们目前从 Silverlight 客户端设置**WCF RIA 服务链接**，我目前正在寻找配置文件来更改一些 wcf 设置。那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T08:38:29.753

您需要向服务端点添加适当的设置和行为。

以下是增加 maxItemsInObjectGraph 的端点行为示例：

```
<endpointBehaviors>
    <behavior name="ClientMaxItemsInObjectGraphBehavior">
        <dataContractSerializer maxItemsInObjectGraph="2147483647"/>
    </behavior>
</endpointBehaviors> 
```

`behaviorConfiguration=`在这样的端点中使用它来引用它：

```
<endpoint contract="AssemblyName.IContactName" 
    address="http://localhost:50101/MyService.svc"
    behaviorConfiguration="ClientMaxItemsInObjectGraphBehavior"
    binding="wsHttpBinding" 
    bindingConfiguration="WSHttpBinding_Default"
    name="MyServiceEndpoint">
</endpoint> 
```

大多数其他设置与例如引用的服务绑定有关`bindingConfiguration=`：

```
<system.serviceModel>
    <bindings>
        <wsHttpBinding>
            <binding name="WSHttpBinding_Default"
            maxBufferPoolSize="2147483647" 
            maxReceivedMessageSize="2147483647"
                      <readerQuotas maxDepth="32" 
                            maxStringContentLength="2147483647" 
                            maxArrayLength="16384"
                            maxBytesPerRead="4096" 
                            maxNameTableCharCount="16384" />
            </binding> 
```

研究匹配的类和属性可能比研究配置文件更容易。配置很快就会变得混乱，但它们只是在运行时反映属性的层次结构，因此从类文档向后工作可以帮助您了解各种设置的去向。

# iphone - 如何在子视图中调用 IBAction？

> ID：10515259
> 
> 赞同：-1
> 
> 时间：2012-05-09T11:36:22.707
> 
> 标签：iphone, objective-c, ibaction

当我尝试在根视图中调用 IBAction 时它可以工作，但是当我在 subView 应用程序中调用时会崩溃。

代码：

```
- (IBAction)webButton:(id)sender {

  NSLog(@"doesn't print log");

} 
```

这是关闭崩溃：[http ://dl.dropbox.com/u/77033905/urlInSafariCrashesUp.png](http://dl.dropbox.com/u/77033905/urlInSafariCrashesUp.png)

感谢帮助

更新：示例代码：[http ://dl.dropbox.com/u/77033905/IBActionSubView.zip](http://dl.dropbox.com/u/77033905/IBActionSubView.zip)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T12:24:23.227

当您创建 SubViewController 时，`sub`指向它的变量是该方法的本地变量，`addSubViewButton:`并且将在该方法结束时被释放。您需要保持对该控制器的强引用，以便在使用它之前不会释放它。

# java - “查询返回了多个结果集”的解决方案是什么

> ID：10515260
> 
> 赞同：7
> 
> 时间：2012-05-09T11:36:26.970
> 
> 标签：java, postgresql, resultset

我得到错误：

```
ERROR [NewsDAO] findAll(): org.postgresql.util.PSQLException: Multiple ResultSets were returned by the query. 
```

我正在使用 postgresql-8.4-703.jdbc4.jar。

我的代码如下所示：

```
private static StringBuilder findAllQuery = new StringBuilder();

    {
    findAllQuery.append("SELECT * FROM news;");
}

    public List<News> findAll() {
    Statement stm = null;
    ResultSet rs = null;

    List<News> results = new ArrayList<News>();
    if (obtainConnection()) {
        try {
            stm = con.createStatement();
            rs = stm.executeQuery(findAllQuery.toString());
            while(rs.next())
                results.add(setInObject(rs));
        } catch (Exception e) {
            logger.error("findAll(): " + e);
        } finally {
            logger.info("Zamknalem");
            closeConnection();
        }
    }
    return results;
}
    public News setInObject(ResultSet rs) throws SQLException {
    News news = new News();
    news.setId(rs.getInt("id"));
    news.setTitle(rs.getString("title"));
    news.setDescription(rs.getString("description"));
    //TODO: timestamp
    news.setDate(rs.getDate("date"));
    User user = new User();
    user.setId(rs.getInt("user_id"));
    news.setUser(user);
    news.setActive(rs.getBoolean("active"));
    return news;
} 
```

我不知道为什么我会收到这个错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-09T11:39:55.067

中必须有[多个 select 语句](http://archives.postgresql.org/pgsql-jdbc/2007-05/msg00053.php)。`findAllQuery.toString()`

***编辑***

正如 JB Nizet 指出的那样，您应该尝试从语句中删除分号。Postgresql JDBC 驱动程序在分号上分割语句，因此它可能发出两条语句。

# java - 如何在父级上停止 JProgressBar？

> ID：10515262
> 
> 赞同：2
> 
> 时间：2012-05-09T11:36:36.403
> 
> 标签：java, swing, jframe, jpanel, jprogressbar

我正在开发一个使用 JprogressBar 的应用程序，当我在做某事时，进度条正在运行。我还在那里添加了转义功能。当任何人点击键盘的 Escape 按钮时，焦点 Jpanel/Jdialog/JFrame 就会被释放。它工作正常。我的问题是 JprogressBar 没有停止。我想这样做，如果任何 Jpanel/Jdialog/JFrame 通过转义按钮关闭，那么如果它的父级有 JProgressBar，那么它应该被停止。我怎样才能做到这一点？所有Jpanel/Jdialog/JFrame的父级可以不一样吗？

**我的逃生功能如上：**

```
public static void setDisposeOnEsc(JComponent c, final Object promptControl) {
        Action escape = new AbstractAction() {

            {
                putValue(NAME, "escape");
            }

            public void actionPerformed(ActionEvent e) {
                    JComponent source = (JComponent) e.getSource();
                    try {
                        Window window = SwingUtilities.getWindowAncestor(source);
                        window.dispose();
                    } catch (Exception ex) {
                    }
                    try {
                        Dialog dialog = (Dialog) source.getFocusCycleRootAncestor();
                        dialog.dispose();
                    } catch (Exception ex) {
                    }
                    try {
                        JFrame jFrame = (JFrame) source.getFocusCycleRootAncestor();
                        jFrame.dispose();
                    } catch (Exception ex) {
                    }   
            }
        };
        Object name = escape.getValue(Action.NAME);
c.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(KeyStroke.getKeyStroke("ESCAPE"),name);
        c.getActionMap().put(name, escape);
    } 
```

**我想这样做，如果通过上述方法处理的任何 Jpanel/Jdialog/JFrame，那么如果它的父级有 JprogressBar 并且正在运行，那么它应该被停止。**

我的英语不太好，所以请忽略语法错误。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T00:49:40.600

我不完全确定我理解，但你可以使用类似的东西

```
public static <T extends Component> List<T> findAllChildren(JComponent component, Class<T> clazz) {

    List<T> lstChildren = new ArrayList<T>(5);
    for (Component child : component.getComponents()) {

        if (clazz.isInstance(child)) {

            lstChildren.add((T) child);

        }

        if (child instanceof JComponent) {

            lstChildren.addAll(findAllChildren((JComponent)child, clazz));

        }

    }

    return Collections.unmodifiableList(lstChildren);

} 
```

要找到对 JProgressBar 的所有引用，您可以从那里做您想做的事...

# c# - 使用 json 对象将数据加载到网格中

> ID：10515266
> 
> 赞同：1
> 
> 时间：2012-05-09T11:36:39.143
> 
> 标签：c#, asp.net, visual-studio-2010, dhtmlx

我已经使用 DHTMLX 创建了一个网格。我使用 linq 从数据库中检索了数据。我能够在输出中显示数据。但是这些没有加载到网格中。现在我想将数据加载到网格中使用 JSON 对象。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-08-13T13:46:49.820

这是有关您的问题的在线示例。我认为它必须帮助你：

[http://www.dhtmlx.com/docs/products/dhtmlxGrid/samples/12_initialization_loading/09_init_grid_json.html](http://www.dhtmlx.com/docs/products/dhtmlxGrid/samples/12_initialization_loading/09_init_grid_json.html)

JSON语法是下一个：

```
data = {
    rows: [{
        id: 1001,
        data: ["100", "A Time to Kill", "John Grisham", "12.99", "1", "05/01/1998"]
        }, {
        id: 1002,
        data: ["1000", "Blood and Smoke", "Stephen King", "0", "1", "01/01/2000"]
        }, {
        id: 1003,
        data: ["-200", "The Rainmaker", "John Grisham", "7.99", "0", "12/01/2001"]
        }, {
        id: 1004,
        data: ["350", "The Green Mile", "Stephen King", "11.10", "1", "01/01/1992"]
        }
    } 
```

# r - 如何将公式应用于R中的向量？

> ID：10515270
> 
> 赞同：2
> 
> 时间：2012-05-09T11:36:54.740
> 
> 标签：r

不是第一次，我想答案很简单。但是寻找 R 解决方案通常是一项艰苦的工作，两小时后可能是时候问某人了……

我正在使用一个非线性公式（这只是第一个工作，它实际上很快就会变成非线性的）并且为了测试我的初始值，我想简单地计算一系列 x 值的值。

这是一些代码：

```
x <- c(1,2,3,4,5,6,7,8,9,10,11,12) #etc
y <- c(NA,332,248,234,84,56,26,24,27,33,37,25) #etc
# This is my formula I shall soon expand
fEst <- y ~ 1 / (x / a + 1) * b
# Initial value
a <- 800
# Initial value based on inverted formula and second measure
b <- y[2] * (x[2] / a + 1)

# Can i use my formula fEst to do this step?
p <- 1 / (x / a + 1) * b 
```

关键是我正在研究这个公式 - 每次更改两次似乎很奇怪......

我发现的是一个包 nls2 ，其中可能有这样的事情和一个函数 apply.a.formula ，它似乎是另一个包中的一个元素 - 但由于这是一个非常基本的函数使用，我猜 R 基础包已经具备相应的功能。只是……在哪里？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T11:49:47.557

我在查找您尝试过的途径和 Gabor 发布的解决方案时遇到了[这个线程。](http://www.mail-archive.com/r-help@r-project.org/msg95650.html)请注意，这`apply.a.formula()`是一个虚构的函数名称，线程中的 OP 正在寻找一个真正的函数。

使用 Gabor 在线程中提供的示例，这是使用**nls2**包的解决方案：

```
## your data
x <- c(1,2,3,4,5,6,7,8,9,10,11,12) #etc
y <- c(NA,332,248,234,84,56,26,24,27,33,37,25) #etc
# This is my formula I shall soon expand
fEst <- y ~ 1 / (x / a + 1) * b
# Initial value
a <- 800
# Initial value based on inverted formula and second measure
b <- y[2] * (x[2] / a + 1)

## install.packages("nls2", depend = TRUE) if not installed
require(nls2)
fitted(nls2(fEst, start = c(a = a, b = b), alg = "brute")) 
```

最后一行给出：

```
R> fitted(nls2(fEst, start = c(a = a, b = b), alg = "brute"))
 [1] 332.4145 332.0000 331.5866 331.1741 330.7627 330.3524 329.9430 329.5347
 [9] 329.1273 328.7210 328.3157 327.9113
attr(,"label")
[1] "Fitted values" 
```

这与给出的基本相同`1 / (x / a + 1) * b`：

```
R> 1 / (x / a + 1) * b
 [1] 332.4145 332.0000 331.5866 331.1741 330.7627 330.3524 329.9430 329.5347
 [9] 329.1273 328.7210 328.3157 327.9113 
```

从评论中，Carl Witthoft 指出，如果您想概括这样的方程，`1 / (x / a + 1) * b`那么函数可能是一种封装运算的有用方法，而无需`1 / (x / a + 1) * b`每次都输入。例如

```
myeqn <- function(a, b, x) { 1 / (x / a + 1) * b }

R> myeqn(a, b, x)
[1] 332.4145 332.0000 331.5866 331.1741 330.7627 330.3524 329.9430 329.5347
[9] 329.1273 328.7210 328.3157 327.9113 
```

# parsing - yacc 的德摩根定律

> ID：10515272
> 
> 赞同：2
> 
> 时间：2012-05-09T11:36:57.823
> 
> 标签：parsing, logic, yacc

A 有一个用 yacc 编写的简单语法，它从逻辑表达式构建一棵树，由子表达式和 AND (&&)、OR (||) 和 NOT (!) 运算符组成。这里就不提供语法本身了，因为它没有什么特别之处，它类似于无数的 YACC 教程示例。

但是，我需要解析这些逻辑表达式，以便根据德摩根定律为 NOT 运算符扩展所有括号。例如，我需要处理表达式

```
!( ( A && B ) || C ) ) 
```

作为

```
( !A || !B ) && !C 
```

是否可以通过修改现有的 yacc 语法来实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:49:48.490

在构建 AST 时，可以在 YACC 的**not** (!) 运算符的归约操作中执行此操作。您可以在语义操作中编写任何您想要的代码。您可以编写代码检查子节点是否具有所需的形状，如果是，则可以编写代码来检查子节点，而不是“盲目地”组装树节点而**不是**来自其子节点（您会在此类缩减操作中找到的常用代码），构造每个的德摩根等效树。执行此操作的代码有点混乱，因为它必须在树上爬上爬下，匹配节点并重新排列子树，但它只是很糟糕而且还不错。请注意，德摩根定律可以说适用于形状都像 ( A && B ) || C ) 和 ( A || B && C))，所以你要处理两个主要的子情况。

我同意伦的观点；您通常不会在解析器中执行此操作。它的目的是让您为更复杂的活动进行设置，除非 DeMorganizing 是唯一目的，否则在解析完成后您将需要其他代码来处理各种不同的 AST，那么为什么不将所有处理留到那里呢？

按照这个想法，我[最近关于消除配置死代码的 SO 答案](https://stackoverflow.com/a/10411631/120163)简化了符号布尔逻辑；它展示了一种使用模式匹配源到源转换来转换布尔逻辑 AST 的方法。这种方法避免了讨厌的树检查/黑客代码。如何使用该技术编写实现德摩根定律的*可读*转换应该是显而易见的（事实上我们过去曾做过儿子）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:13:21.037

这不是你应该在 yacc 语法本身中做的事情。您应该对语法构造的 AST 进行后处理以执行此类缩减。

你的语法*应该*产生某种形式的[AST——](http://en.wikipedia.org/wiki/Abstract_syntax_tree)你想遍历结构并寻找与形状匹配的东西`!((A && B)|| C)`并将其就地转换为`(!A || !B) && C`.

如果您需要有关此方面的更多指导，添加更多信息或提出更多问题可能会很有用。

**编辑**：如果您需要任何帮助，您*应该*提供您的语法。这听起来像是一项家庭作业，所以我希望这不是您不提供代码的唯一原因。帮助我们帮助您。我们不知道你在你的语法动作中做了什么，那么我们怎么能猜到我们能为你做些什么呢？

# java - 服务器线程挂起

> ID：10515275
> 
> 赞同：0
> 
> 时间：2012-05-09T11:37:17.813
> 
> 标签：java, client-server

我使用线程为客户端提供服务，但是当我删除命令`handler.out.flush`（在服务器类上）时，线程挂起。我试过在谷歌上搜索，但仍然没有帮助。我认为问题出在通信套接字上，但我仍然没有找到正确的解决方案。

我想做一个简单的登录和注册功能，所以我使用了 2 类`Server`和`MysqlConn`. 该类`Server`通过套接字从客户端接收传入数据（用户配置文件 - 用户名、密码等）。收到后，将数据发送到`MysqlConn`课堂。类的功能`MysqlConn`是检查数据并访问我的 sql 数据库以匹配它们。如果数据和数据库匹配，则登录过程成功。

客户端发送的数据格式为：

```
"login."+"name."+ "password." +"\n"; 
```

以下是`Server`课堂内容：

```
public class Server {     

public static void main(String[] args)throws IOException, InstantiationException, 
IllegalAccessException {

    ServerSocket servsocket = null;
    Socket sock = null;         

    try {
        servsocket = new ServerSocket(28000);
        while(true){
        sock = servsocket.accept();
        System.out.println(servsocket.isBound());

        ChatThread thread = new ChatThread(sock); 
        String portnum = Integer.toString(sock.getPort());
        thread.run(portnum);                
        }
    } catch (IOException ioe) {

    } 
    finally{
            try {
                servsocket.close();
                } catch (IOException ioe) {

                }
            }       
    }
   } 

class ChatThread extends Thread{
    static Vector<ChatThread> chatthread = new Vector<ChatThread>(10);

    private BufferedReader in;
    private PrintWriter out;        

    public ChatThread (Socket socket) throws IOException {

        in  = new BufferedReader(
              new InputStreamReader(socket.getInputStream()));
        out = new PrintWriter(
              new OutputStreamWriter(socket.getOutputStream())); }

    public void run(String portnum){
        String line;
        synchronized(chatthread) {
        chatthread.addElement(this); }
        try {
        line = in.readLine()+portnum;
        String[] teksmasuk = line.split("\\.");

        for(int i = 0; i < chatthread.size(); i++) {
                synchronized(chatthread) {
                ChatThread handler =
                (ChatThread)chatthread.elementAt(i);
                handler.out.println(line + "\r");
                handler.out.flush();
                if 
   (teksmasuk[0].contentEquals("reg")||teksmasuk[0].contentEquals("login")

    ||teksmasuk[0].contentEquals("logout")) {
                    if(teksmasuk[0].contentEquals("reg")){
                         }
                    else 
    if(teksmasuk[0].contentEquals("login")){
                         }

                MysqlConn sqlcon = new MysqlConn();
                String hasil = sqlcon.register(line);

                }                   
                else{           

                }
                }

                }           
        } catch(IOException ioe) {

        ioe.printStackTrace();
        } catch (InstantiationException e) {

            e.printStackTrace();
        } catch (IllegalAccessException e) {

            e.printStackTrace();
        } catch (ClassNotFoundException e) {

            e.printStackTrace();
        }
        finally {
            synchronized(chatthread) {
            chatthread.removeElement(this);
            }
        }
 }                                              
} 
```

`MysqlConn`班级：

```
 public class MysqlConn{
String dbn = "chat_db";
 String URL = "jdbc:mysql://localhost/"+dbn ;
 String usr = "root";
 String pwd = ""; 
 private String result;
 boolean checkname  = false;
 boolean checkemail     = false;
 boolean checkpass  = false;
 private Connection con = null;
private String dbnama;
private String dbpass;   

 public String register(String line) throws InstantiationException, 
 IllegalAccessException, IOException, ClassNotFoundException{

         String[] messagein = 
 line.split("\\.");

         MysqlConn regs = new MysqlConn();
         regs.login(messagein);
         return result;            
  }

  public void login (String[] messagein) throws InstantiationException, 
  IllegalAccessException{
     if(messagein[0].contentEquals("login")) {
         try {
             Class.forName("com.mysql.jdbc.Driver").newInstance();
             con = DriverManager.getConnection(URL,usr,pwd);
             Statement statement = 
    con.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE,ResultSet.CONCUR_UPDATABLE);
             ResultSet rslset = statement.executeQuery("select * from user"); 
             int rs = statement.executeUpdate("update user set port="+ 
    "'"+messagein[3] +"'" + "where nama  = " 
                     + "'" + messagein[1] + "'" + "and password = " + "'" 
   +messagein[2] +"'" );

             MysqlConn regs = new MysqlConn();
             regs.check_status_login(messagein);

            } catch (ClassNotFoundException e) {
                System.out.println("Error #1:" + e.getMessage());
                System.exit(0);
            } catch(SQLException e){
                System.out.println("Error #2:" + e.getMessage());
                System.exit(0);
            }
      }
  }

  public void check_status_login (String[] messagein) throws InstantiationException, 
  IllegalAccessException, ClassNotFoundException{
     try {
         Class.forName("com.mysql.jdbc.Driver").newInstance();
         con = DriverManager.getConnection(URL,usr,pwd);
         Statement statement = 
    con.createStatement(ResultSet.TYPE_SCROLL_INSENSITIVE,ResultSet.CONCUR_UPDATABLE);
         ResultSet rslset = statement.executeQuery("select * from user");              

         while(rslset.next()) {
             String dbname  = rslset.getString("nama");
             String dbpass = rslset.getString("password");                   
             if((messagein[1].contentEquals(dbnama))){

                 + messagein[1]+ "\r" + "Password from database: "+dbpass + "\r" + 
                 "Password from client: "+ messagein[2]+ "\n");
                 checknama = true;
             }
             else if (messagein[2].contentEquals(dbpass)){
                    checkpass = true;
             }
    }
         } catch (SQLException e1) {
         + e1);
    }
     if (!checknama){
         hasil = "gagal";
     }
     else if (!checkpass)
     {
         hasil = "gagal";
     }
     else {
         hasil = "login sukses";}
    }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:00:08.083

Java[文档](http://docs.oracle.com/javase/6/docs/api/java/io/PrintWriter.html)清楚地表明您用于 PrintWriter 的构造函数不会导致自动刷新。这意味着您需要调用 flush 来手动将数据从打印机中发送出去。或者你可以做

```
out = new PrintWriter( new OutputStreamWriter(socket.getOutputStream()) , true ); 
```

启用自动冲洗。无论如何，我通常更喜欢手动刷新流。

至于您关于“应用程序卡住”的问题，您需要提供更多信息，例如连接了多少客户端以及系统挂起之前究竟发生了什么

# linq-to-xml - 通过 Linq to XML 移除节点它是如何工作的

> ID：10515280
> 
> 赞同：0
> 
> 时间：2012-05-09T11:37:44.613
> 
> 标签：linq-to-xml

以下片段删除了包含“Name”元素的“DpsRecord”元素，该元素的值包含“JOSE”。但是，我不明白在将 Linq 查询应用于 root 并获取 dpsRecords（查询左侧）然后在 dpsRecords 中删除之后，元素也会在 root 中删除。

```
XElement root = XElement.Load("input.xml");
IEnumerable<XElement> dpsRecords = from elem in
                        root.Elements("DpsRecord")
                        where (((string)elem.Element("Name")).Contains("JOSE"))              
                        select elem;
foreach (XElement elem in dpsRecords)
{
   elem.Remove();
}
root.Save("output.xml"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T11:46:39.417

那么 Remove 方法[http://msdn.microsoft.com/en-us/library/system.xml.linq.xnode.remove.aspx](http://msdn.microsoft.com/en-us/library/system.xml.linq.xnode.remove.aspx)会从其父节点中删除它被调用的节点。

另请注意，您不需要 foreach，您可以执行`dspRecords.Remove()`.

# .net - KeyPress 事件阻止 DataGridView .net 中的 KeyUp 事件

> ID：10515285
> 
> 赞同：1
> 
> 时间：2012-05-09T11:38:14.337
> 
> 标签：.net, winforms, datagridview, c#-3.0, keyboard-events

我想在 DataGridView 中将 30 个完整的苹果分配给 10 个人。
DataGridView 位于将 KeyPreview 设置为 true 的表单中。人员的姓名显示在设置为只读的 DataGridViewTextBoxColumn( *Column1 ) 中。*然后将整数输入到空的 DataGridViewTextBoxColumn( *Column2* ) 中。当一个键被释放时，总和被计算/重新计算，如果 column2 的总和为 30，则启用表单 OK 按钮（*否则禁用*）。

问题在于keyEvents。如果绑定 KeyPress 事件，则不会触发 KeyUp。

```
 // Bind events to DataGridViewCell
    private void m_DataGridView_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
    {
        if (e.Control != null)
        {
            e.Control.KeyUp -= m_DataGridView_KeyUp;
            e.Control.KeyPress -= m_DataGridView_KeyPress;
            e.Control.KeyUp += m_DataGridView_KeyUp;
            e.Control.KeyPress += m_DataGridView_KeyPress;
        }
    }

    //Only accept numbers
    private void m_GridView_KeyPress(object sender, KeyPressEventArgs e)
    {
        if ((e.KeyChar >= 48 && e.KeyChar <= 57) || e.KeyChar == 8)
        {
            e.Handled = false;
        }
        else
        {
            e.Handled = true;
        }
    }

   // Sum the apples in column2
   private void m_DataGridView_KeyUp(object sender, DataGridViewCellEventArgs e)
    {
        if (e.ColumnIndex == 1 && e.RowIndex > 0)
        {
            int count = 0;
            int parser = 0;

            foreach (DataGridViewRow item in this.m_DataGridView.Rows)
            {
                if (item.Cells[1].Value != null)
                {
                    int.TryParse(item.Cells[1].Value.ToString(), out parser);
                    count += parser;
                }
            }

            //make the ok button enabled
            m_buttonDividedApplen.Enabled = (count == 30);
        }
    } 
```

这个故事问题变得越来越陌生。如果我切换单元格，则会触发 keyup 事件。有时keyup会触发一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:15:02.497

每次编辑控件触发时，您都会将处理程序重新附加到同一事件，我相信这永远不会改变。

我认为，如果您单步执行代码，您会注意到 KeyPress 事件的触发与您编辑单元格的次数成正比。尝试先删除处理程序：

```
 e.Control.KeyUp -= m_DataGridView_KeyUp;
    e.Control.KeyPress -= m_DataGridView_KeyPress; 
```

然后重新附加：

```
 e.Control.KeyUp += m_DataGridView_KeyUp;
    e.Control.KeyPress += m_DataGridView_KeyPress; 
```

并查看 KeyUp 是否触发。

# c++ - 交叉编译到 x86 时出现 libboost-system 链接器错误

> ID：10515297
> 
> 赞同：4
> 
> 时间：2012-05-09T11:39:00.237
> 
> 标签：c++, linux, boost, linker

我正在尝试在 Ubuntu 11.04 x64 上构建一个 32 位应用程序。由于 libboost 的链接器错误，我在构建时遇到了一些问题。build 语句包含`-lboost_system`在其中，但是当我尝试构建时，我得到了一堆：

> CommunicationModule.cpp:(.text+0x68c1): undefined reference to`boost::system::generic_category()`
> 
> CommunicationModule.cpp:(.text+0x68d7): undefined reference to`boost::system::system_category()`

我在谷歌上找到的所有东西都说我需要链接到 boost_system 库。我发现的一个地方说尝试直接链接到它，但是当我这样做时`locate boost_system`结果是空的。当我尝试执行时，`sudo apt-get install libboost-system-dev`它告诉我它已经安装了。我在这里有点不知所措。该库已安装，但没有被定位找到？

谁能告诉我我需要做什么才能正确链接到 boost::system？我对 linux 和编译器的复杂性相当陌生，所以这里的任何帮助将不胜感激。

**更新：**

这是输出`dpkg -L libboost-system1.42-dev`：

```
/. 
/usr 
/usr/share 
/usr/share/doc
/usr/share/doc/libboost-system1.42-dev
/usr/share/doc/libboost-system1.42-dev/copyright
/usr/share/doc/libboost-system1.42-dev/NEWS.Debian.gz
/usr/share/doc/libboost-system1.42-dev/README.Debian.gz 
/usr/lib
/usr/lib/libboost_system.a
/usr/lib/libboost_system-mt.so
/usr/lib/libboost_system-mt.a 
/usr/lib/libboost_system.so 
```

有没有我可以用来直接链接到其中之一的标志？我尝试使用`-L /usr/lib/libboost_system.so`and`-L /usr/lib/libboost_system-mt.so`并没有解决这个问题。与仅添加`/usr/lib/libboost_system.a`and`/usr/lib/libboost_system-mt.a`到构建语句相同。

这是编译行：

```
g++ -m32 -Wl,-O1 -o UTNaoTool [.o files] -L/usr/lib32 -lqglviewer-qt4 -lqwt-qt4 -lboost_system -lboost_thread -lQtXml -lQtOpenGL -lQtGui -lQtNetwork -lQtCore -lGLU -lpthread 
```

**更新 2：**

我下载了 boost 1.49 并为 32 位构建了所有内容，这似乎有所帮助。很多错误消失了，但现在我仍然有这些：

> CommunicationModule.cpp:(.text+0x68c1): undefined reference to boost::system::get_generic_category()

请注意，功能不同。所以我所有的错误都与未定义的引用`get_system_category()`和`get_generic_category()`现在有关。我尝试将 a 添加`-lboost_filesystem`到 build 命令，但这并没有解决这个问题，并且我确保它引用了我在构建时构建的 32 位库`libboost_system`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:12:40.603

查看我自己的安装，似乎 libboost-system-dev 没有安装库。用来`dpkg`告诉我安装了什么，`libboost-system-dev`我得到：

```
$ dpkg -L  libboost-system-dev
/.
/usr
/usr/share
/usr/share/doc
/usr/share/doc/libboost-system-dev
/usr/share/doc/libboost-system-dev/copyright
/usr/share/doc/libboost-system-dev/changelog.gz 
```

闲逛，我认为您需要安装`libboost-system1.48.1`（或其他版本）。

```
sudo apt-get install libboost-system1.XX.Y 
```

您还可以使用该命令搜索库`find`，例如，在下面搜索`/usr`所有以 开头的文件`libboost_system`：

```
find /usr -name "libboost_system*" 
```

**编辑**：由于您是从 64 位操作系统交叉编译到 32 位操作系统，因此您需要 32 位版本的 boost 库。我很想设置一个小型 32 位虚拟机来执行此操作，而不是交叉编译所有依赖项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:11:33.037

I had the same problem with boost_serialization here is what i found out after couple of googling..

first this library need to be compiled separately : so after downloading the boost library ,extract it and execute **sudo ./bootstrap.sh'** then **sudo ./b2 --with-system**

after this step you should be find a result when executing **locate boost_system**

then to link it manually I did: both should work

g++ boostexample.cpp -o run /PATH/libboost_serialization.a

g++ boostexample.cpp -o run -L/PATH/ -lboost_serialization

well this is a little work around and I'm still looking for how to link the library properly

I hope this helped :)

# java - 实现 useDelimiter 方法

> ID：10515298
> 
> 赞同：0
> 
> 时间：2012-05-09T11:39:02.127
> 
> 标签：java

我有以下代码，请记住我刚刚开始学习一门语言，并且一直在寻找相当简单的练习。欢迎编码礼仪和批评。

```
import java.util.*;
import java.io.*;

public class Tron
{
    public static void main(String[] args) throws Exception
    {
        int x,z,y = 0;
        File Tron= new File("C:\\Java\\wordtest.txt");
        Scanner word = new Scanner(Tron);
        HashMap<String, Integer> Collection = new HashMap<String, Integer>();
        //noticed that hasNextLine and hasNext both work.....why one over the other?
        while (word.hasNext())
        {
            String s = word.next();
            Collection.get(s);
            if (Collection.containsKey(s))
            {
                Integer n = Collection.get(s);
                n = n+1;
                Collection.put(s,n);
                //why does n++ and n+1 give you different results
            }else
            {
                Collection.put(s,1);
            }       
        }
        System.out.println(Collection);

    }   
} 
```

如果不使用，`useDelimiter()`我会根据我拥有的文件获得所需的输出：

```
Far = 2, ran = 4, Frog = 2, Far = 7, fast = 1, etc... 
```

插入`useDelimiter`方法如下

```
Scanner word = new Scanner(Bible);
word.useDelimiter("\\p{Punct} \\p{Space}"); 
```

提供以下输出，如下所示的文本文件中所示。

> 的
> 
> 青蛙青蛙
> 
> 跑了
> 
> 跑跑跑
> 
> 快，快，快
> 
> 很远很远很远很远很远很远

`useDelimiter`如果应该考虑标点符号新行等，为什么输出会有这样的差异？可能很简单，但又是第一次尝试一个程序。提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T11:46:14.497

`word.useDelimiter("\\p{Punct} \\p{Space}")`您实际上是在告诉扫描仪查找由标点符号后跟*空格*和*另一个*空白字符组成的分隔符。您可能希望拥有*其中一个（并且只有一个）*，这可以通过类似的方式来实现

```
word.useDelimiter("\\p{Punct}|\\p{Space}"); 
```

或*至少其中一个*，看起来像

```
word.useDelimiter("[\\p{Punct}\\p{Space}]+"); 
```

### 更新

@Andrzej 很好地回答了您的代码注释中的问题（我忘记了），但是他错过了我想在这里扩展/直接放在这里的一个小细节。

> 为什么 n++ 和 n+1 会给你不同的结果

这显然与线有关

```
 n = n+1; 
```

我的预感是你尝试的替代方案是

```
 n = n++; 
```

这确实给出了令人困惑的结果（即最终结果是`n`不*增加*的）。

原因是`n++`（通过其规范名称的*后缀增量运算符*）增加了的值，`n`但*表达式的结果是原始值`n`！*所以正确的使用方法很简单

```
 n++; 
```

结果等价于`n = n+1`。

这是[一个带有代码示例的线程](https://stackoverflow.com/questions/5413548/java-prefix-postfix-of-increment-decrement-operators-need-help-with-example)，希望能帮助您更好地理解这些运算符的工作原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:58:44.037

Péter 对正则表达式的看法是正确的，您匹配的是一个非常具体的序列，而不是一类字符。

我可以从您的来源评论中回答问题：

> 注意到 hasNextLine 和 hasNext 都可以工作......为什么一个在另一个之上？

该类`Scanner`被声明为实现`Iterator<String>`（以便它可以在任何需要提供字符串的任意事物的情况下使用）。因此，由于`Iterator`接口声明了一个`hasNext`方法，所以 Scanner 需要使用完全相同的签名来实现它。另一方面，`hasNextLine`是 Scanner 自行实施的一种方法。

实现接口的类同时声明“通用命名”接口方法和更特定于域的方法并不完全不寻常，它们都做同样的事情。（例如，您可能希望将玩游戏的客户端实现为`Iterator<GameCommand>`- 在这种情况下，您*必须*声明`hasNext`，但可能希望有一个调用的方法`isGameUnfinished`执行*完全相同*的操作。）

也就是说，这两种方法并不相同。 `hasNext`如果扫描仪有另一个*令牌*要返回，则`hasNextLine`返回 true，而如果扫描仪有另一*行输入*要返回，则返回 true。

我希望如果您在一个不以换行符结尾的文件上运行扫描程序，并使用除一个标记之外的所有标记，那么`hasNext`将返回`true`而`hasNextLine`将返回 false。（如果文件以换行符结尾，那么这两种方法的*行为*将相同 - 因为当且仅当并非所有行都已被消耗时才会有更多标记 - 但它们在*技术上*并不相同。）

> 为什么 n++ 和 n+1 会给你不同的结果

这很简单。

`n + 1`只返回一个比 的当前值大一的值`n`。而`n++` **将 n 设置为大一**，然后返回该值。

因此，如果`n`当前为 4，则两个选项都将*返回*5；不同之处在于，如果您调用， 的值`n`仍为 4，`n + 1`但如果您调用 ，则值为 5 `n++`。

一般来说，避免使用`++`操作符是明智的，除非在它被用作样板的情况下（例如在`for`索引上的循环中）。多花两三个字符，甚至多行一行，来更清楚、更明确地表达你的意图，这是一个很小的代价，几乎总是值得做的。

# php - 如何在类与其子类之一的实例之间找到子类的路径？

> ID：10515302
> 
> 赞同：0
> 
> 时间：2012-05-09T11:39:14.380
> 
> 标签：php, inheritance

我正在开发一个 PHP 项目，其中很多类在类树中是高级别的，即它们有很多父类。

在某种程度上，考虑有一个类`Food`，它有很多子类和子子类等。我想`getFoodClasses()`在类`Food`中实现一个方法，它给我一个导致当前实例的所有子类的数组，即类`Food`和当前实例之间的树，包括后者。类`Food`本身及其所有超类不应包含在结果中。

示例：如果一个子类`Food`是`Vegetable`，它有一个子类`Fruit`，然后有一个子类`Banana`，那么 on 的结果`(Banana) $b->getFoodClasses()`需要产生 `array('Vegetable', 'Fruit', 'Banana')。

所以，

```
class Food extends SomeBaseClass
{
  public function getFoodClasses()
  {
    /* Here goes the magic! */
  }

}

class Vegetable extends Food      {}
class Fruit     extends Vegetable {}
class Banana    extends Fruit     {}

$b = new Banana;
print_r($b->getFoodClasses()); 
```

结果是：

```
Array
(
    [0] => Vegetable
    [1] => Fruit
    [2] => Banana
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:37:27.223

我最终得到了这个功能。

```
/**
 * Calculates the widget path between this class and the current instance.
 * @return array An array with all subclasses in the path between this class and the current instance.
 */
public function getFoodClasses()
{
   $reflClass = new ReflectionClass(get_class($this));
   $classes   = array();

   while ($reflClass->getName() != __CLASS__)
   {
      $classes[] = $reflClass->getName();
      $reflClass = $reflClass->getParentClass();
   }

   return $classes;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:11:01.287

在不使用反射的情况下，您仍然可以使用一些简单的 php 函数来实现这一点。

```
class Food
{
  public function getFoodClasses()
  {
    $class = get_class($this);

    $classes = array($class);
    while (($parentClass = get_parent_class($class)) && $parentClass != "Food")
    {
      array_unshift($classes, $parentClass); // Push onto the beginning because your example shows parents before children.
      $class = $parentClass;
    }
    return $classes;
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T12:49:25.283

仅供参考；这段代码实际上有效（从香蕉开始，到食物）。

```
<?php
class Food
{
  public function getFoodClasses()
  {

  }
}

class Vegetable extends Food      {}
class Fruit     extends Vegetable {}
class Banana    extends Fruit     {}

$banana = new Banana;

$class = new ReflectionClass( get_class( $banana ) );

$parents = array( );

while( $parent = $class->getParentClass( ) ) {
    $parents[] = $parent->getName( );
    $class = $parent;
}

var_dump( $parents ); 
```

# java - 如何在 GWT NumberFormat 中将 SPACE 指定为千位分隔符

> ID：10515307
> 
> 赞同：1
> 
> 时间：2012-05-09T11:39:29.480
> 
> 标签：java, gwt

如何在 GWT NumberFormat 中将 SPACE 指定为千位分隔符。

我正在使用 GWT 的 NumberFormat 类来格式化我的数字。有一个要求将 1000 与 SPACE 分开。无法绕过它，所以需要帮助。

所以 1000000000 应该是 1000 000 000.00

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:40:12.040

如果要求是由于本地化，那么您可能只需要选择适当的语言环境。

以*fr*为例：

```
<extend-property name="locale" value="fr" />
<set-property name="locale" value="fr" />
<set-property-fallback name="locale" value="fr" /> 
```

# javascript - rails 3.2.3 - javascript - application.js - link_to_remove_fields

> ID：10515308
> 
> 赞同：0
> 
> 时间：2012-05-09T11:39:29.980
> 
> 标签：javascript, ruby-on-rails-3.2, link-to-function

我正在尝试从 Ryan 的“railscasts episode-197”中实现 link_to_remove_fields 的想法。

我的 javascript 文件似乎有问题“

我的 application.html.erb 文件包含 javascript: <%= javascript_include_tag "application" %>

我将以下函数添加到 application.js 文件中：

```
function remove_fields(link) {
 $(link).previous("input[type=hidden]").value = "1";
 $(link).up(".fields").hide();
} 
```

我在 application_helper.rb 文件中有以下代码：

```
def link_to_remove_fields(name, f)
  f.hidden_field(:_destroy) + link_to_function(name, "remove_fields(this)")
end 
```

在我的 _form 中，我有：

```
<%= f.label :entry, "Descriptions" %><br />
<%= f.text_area :entry, :rows => 3 %>
<%= link_to_remove_fields "remove", f %><br />
<%= f.hidden_field :user_id, :value => current_user.id %> 
```

当我启动 Rails 服务器并导航到我正在处理的页面时，会出现“删除”链接，但是当我单击它时没有任何反应。

所以我有一种预感，javascript 代码没有被调用？

有任何想法吗？

多谢你们！

亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T09:24:02.820

你能确定你的js代码没有被触发吗？请查看调试工具中的 firebug 或 chromes build

# gwt - GWT 库创建

> ID：10515311
> 
> 赞同：1
> 
> 时间：2012-05-09T11:39:34.810
> 
> 标签：gwt

我有一个 gwt 库，我通过以下方式将其包含到我的其他项目中：

```
inherits name="org.mylib.Mylib" /> 
```

库项目中的所有类都在 org.mylib.client* 下

这工作正常。

但是，我添加了包含我想要包含在库中的类的包，即在 GWT 客户端代码中调用。

如果我不将类放在 org.mylib.client 下，它会起作用吗？

在 GWT 客户端代码中可用的包如：`x.io`等。`x.nio`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:15:37.747

它们需要是 Java 源文件，而不仅仅是类。您可能是这个意思，但是您问题的那一部分是模棱两可的。

假设它们是源，您确实需要将它们包含在您已向 GWT 声明的包中包含源。通过继承具有此功能的模块，或通过自己将其添加到主模块中。简而言之，在某个地方你需要这个：

`<source path="/mySourcePath" />`

此pckage`/mySourcePath`的源位置在哪里。`x.io`

# iphone - 我无法在 EasyTableView 委托方法中访问我的变量

> ID：10515312
> 
> 赞同：0
> 
> 时间：2012-05-09T11:39:38.623
> 
> 标签：iphone, objective-c, uitableview

我使用扩展 UITableView 的“ [EasyTableView ”。](https://github.com/alekseyn/EasyTableView)我遇到如下问题：

```
- (void)viewDidLoad
    {
        NSArray *array = [[NSArray alloc] initWithObjects:@"14.jpg",nil];
        photos = array;
        [array release];
        [photos objectAtIndex:0];  //this "photos" can be access
    } 
```

但是当我尝试访问委托方法中的“照片”时：

```
- (void)easyTableView:(EasyTableView *)easyTableView setDataForView:(UIView *)view forIndexPath:(NSIndexPath *)indexPath {

    NSInteger r = [indexPath row]; // r = 0
    NSString *imagePath = [photos objectAtIndex:r];  //this line cause : reason: '-[CALayer objectAtIndex:]: unrecognized selector sent to instance 

    } 
```

为什么访问照片的结果不同？我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:44:52.550

使用照片作为财产

```
@property (nonatomic, retain) NSMutableArray* photos; 
```

并在实施中

```
@synthesize photos = photos; 
```

现在可以在委托中访问它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:45:24.587

该`photos`变量没有保留您分配给它的数组。当它被释放时，内存被重新用于指向一个 CALayer 对象。如果照片是保留财产，您应该使用它`self.photos = array;`来进行分配。如果它只是一个简单的变量，那么直接分配它而不是使用`array`.

# ruby-on-rails-3 - Rails i18n：更改 de.errors.format:"%{attribute} %{message}" 无效

> ID：10515313
> 
> 赞同：7
> 
> 时间：2012-05-09T11:39:43.070
> 
> 标签：ruby-on-rails-3, validation, internationalization, format, formtastic

我们为我们的应用程序使用一些自写的验证。这些不使用已翻译的内容之一，例如“空”或“无效”。它们以默认方式“%{attribute} %{message}”格式化

但是，我们的客户要求将它们格式化为“%{attribute} **:** %{message} **.** ”，只是添加了一些标点符号。

这些是客户 i18n 中的错误消息：

```
errors:  
  models: 
    foo:
      attributes:
        bar:
          steak_missing: sie haben Ihr Schnitzel vergessen
          beer_missing: sie haben Ihr Bier vergessen 
```

导致丑陋：

```
Bar sie haben Ihr Schnitzel vergessen 
```

由于这些可以被链接起来，我们需要让它们像这样：

```
Bar: sie haben Ihr Schnitzel vergessen, sie haben Ihr Bier vergessen. 
```

在基础 i18n 中进行了更改：

```
 errors: &errors
    format: ! "%{attribute}: %{message}." 
```

显示没有任何效果。也没有完全删除或其他任何东西。我们正在使用**formtastic**及其**语义**错误，它是否为（默认）错误消息提供了自己的 i18n？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T14:13:22.637

如果我正确理解了您的问题 - 您在表单中使用了类似的内容：

```
<%= f.semantic_errors :bar %> 
```

要改变`semantic_errors`行为，您可以修改此方法。为此，只需添加`{RAILS_ROOT}/config/initializers/semantic_errors_patch.rb`包含内容的文件：

```
Formtastic::Helpers::ErrorsHelper.class_eval do
  def semantic_errors(*args)
    html_options = args.extract_options!
    args = args - [:base]

    full_errors = args.inject([]) do |array, method|
      attribute = localized_string(method, method.to_sym, :label) || humanized_attribute_name(method)
      errors = Array(@object.errors[method.to_sym]).to_sentence
      errors.present? ? array << [attribute, errors].join(": ") : array ||= []
    end
    full_errors << @object.errors[:base]
    full_errors.flatten!
    full_errors.compact!

    return nil if full_errors.blank?

    html_options[:class] ||= "errors"
    template.content_tag(:ul, html_options) do
      Formtastic::Util.html_safe(full_errors.map { |error| template.content_tag(:li, Formtastic::Util.html_safe(error)) }.join)
    end
  end
end 
```

此补丁适用于`formtastic 2.2.1`和`rails 3.2.13`。

此补丁将为两个错误生成下一个字符串：

> 酒吧：sie haben Ihr Schnitzel vergessen 和 sie haben Ihr Bier vergessen。

如果有更多错误，它将产生类似：

> 金额：不是数字，不能为空，且太短（最少2个字符）

您可以在此行上更改此行为：

```
errors = Array(@object.errors[method.to_sym]).to_sentence 
```

`@object.errors[method.to_sym]``errors`- 是产生最终字符串的错误集合。

# android - Android：二进制转PDF

> ID：10515315
> 
> 赞同：0
> 
> 时间：2012-05-09T11:39:53.063
> 
> 标签：android

我正在尝试在 Android 设备上显示普通的 PDF 文档。我很乐意这样做。

我面临的实际问题是，1\. PDF 文档以二进制格式保存在后端 2\. 当我从我的 Android 应用程序中获取这些文件时，我得到二进制内容 3\. 我想将此二进制格式/内容转换为一种格式我可以在我的 Android 应用程序中显示为 PDF 文档

他们有什么方法可以实现这一目标吗？

请帮助...提前谢谢...

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-07-23T07:34:08.020

你可以试试这个

```
public class MyPdfViewActivity extends Activity {

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    WebView mWebView=new WebView(MyPdfViewActivity.this);
    mWebView.getSettings().setJavaScriptEnabled(true);
    mWebView.getSettings().setPluginsEnabled(true);
    mWebView.loadUrl("https://docs.google.com/gview?embedded=true&url="+LinkTo);
    setContentView(mWebView);
  }
}
```

[正如在这里](https://stackoverflow.com/a/20603862/3844201)回答的Shylendra Madda

# c - 实现会话管理

> ID：10515319
> 
> 赞同：0
> 
> 时间：2012-05-09T11:39:59.063
> 
> 标签：c, session, session-management

我正在实现会话管理，目前正在数据库中存储 4 种类型的信息：

1.  用户身份
2.  session_id（哈希）
3.  插入时间（用于超时）
4.  持久性（如果用户有持久性 cookie）

用户可以使用不同的设备打开多个会话。如果用户注销，我怎么知道我应该删除哪些会话？

什么独特的信息通常与我已经获得的信息一起存储？IP 地址并不能真正起作用，因为它可以共享。我应该存储浏览器信息，但如果相同怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:02:07.640

您应该只使用单个会话 ID/哈希来识别会话。

当用户登录时（例如使用用户名/密码），您将告诉他们他们的会话 id/hash 是什么。

当用户浏览时，他们会在每次页面加载时告诉您他们的会话 id/hash。这就是你如何知道它是一个现有的登录用户，而不是一些随机的新用户。

当用户尝试注销时，他们仍会告诉您他们的会话 ID/哈希。您可以使用它来查找和删除正确的单个会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-29T14:48:57.190

您必须存储`Last access time` `Last Modify Time`Session 以计算 Session Timeout 的空闲时间。

要识别用户会话，您必须存储浏览器 ID。浏览器 ID 和用户 ID 映射将引导您确定您必须删除的用户会话。

# android - 带有 SSO 的 Android Facebook - 接口未实现错误

> ID：10515321
> 
> 赞同：0
> 
> 时间：2012-05-09T11:40:06.667
> 
> 标签：android, facebook, interface, integration, single-sign-on

我正在尝试使用 SSO 并在某些文本上使用 onClickListener 更新我的状态，当我单击 post_badge_text 时，我收到一个未实现的接口处理程序错误。

这是该课程的来源。

```
import com.facebook.android.BaseDialogListener;
import com.facebook.android.Facebook;
import com.facebook.android.R;
import com.facebook.android.Utility;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.content.SharedPreferences.Editor;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.EditText;
import android.widget.ImageView;
import android.widget.TextView;
import android.widget.Toast;

import com.facebook.android.Facebook.*;

public class SocialSharing extends Activity{

private static final String APP_ID = "286529654765268";
//private static final String[] PERMISSIONS = new String[] {"publish_stream"};
private static final String TOKEN = "access_token";
private static final String EXPIRES = "expires_in";
private static final String KEY = "facebook-credentials";
private Facebook facebook = new Facebook(APP_ID);
private EditText edittext;
private ImageView badge;
private TextView post_badge_text;
private TextView update_status_text;
private TextView post_achievement_text;
private TextView tweet_badge_text;
private TextView invite_friends_text;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.socialsharing);

    //Make references to all our views
    edittext = (EditText) findViewById(R.id.edittext);
    badge = (ImageView) findViewById(R.id.badge);
    post_badge_text = (TextView) findViewById(R.id.post_badge_text);
    update_status_text = (TextView) findViewById(R.id.update_status_text);
    post_achievement_text = (TextView) findViewById(R.id.post_achievement_text);
    tweet_badge_text = (TextView) findViewById(R.id.tweet_badge_text);
    invite_friends_text = (TextView) findViewById(R.id.invite_friends_text);

    if(restore(facebook, getApplicationContext())){
    //authorize the user. 
    facebook.authorize(this, new DialogListener() {
        @Override
        public void onComplete(Bundle values) {
            Toast.makeText(getApplicationContext(), "Successfully Logged In to facebook!", Toast.LENGTH_LONG).show();
        }

        @Override
        public void onCancel() {}

        @Override
        public void onFacebookError(com.facebook.android.FacebookError e) {
            e.printStackTrace();
                        if(facebook.isSessionValid()){
                Toast.makeText(getApplicationContext(), "Successfully Logged in to Facebook!", Toast.LENGTH_LONG).show();
            }
            else{
                Log.e("FACEBOOK FAIL", "Facebook has epicly failed with an error in onCreate in Social Sharing or you are logged in already");
            }
        }

        @Override
        public void onError(com.facebook.android.DialogError e) {
            // TODO Auto-generated method stub

        }
    });
    } else { save(facebook, getApplicationContext()); }

    /*
     * callback for the feed dialog which updates the profile status
     */
    class UpdateStatusListener extends BaseDialogListener {

        public void onComplete(Bundle values) {
            final String postId = values.getString("post_id");
            if (postId != null) {
                new UpdateStatusResultDialog(SocialSharing.this, "Update Status executed", values)
                        .show();
            } else {
                Toast toast = Toast.makeText(getApplicationContext(), "No wall post made",
                        Toast.LENGTH_SHORT);
                toast.show();
            }
        }
    }

    //check for clicks
    post_badge_text.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
             Bundle params = new Bundle();
             params.putString("caption", getString(R.string.app_name));
             params.putString("description", getString(R.string.app_desc));
             params.putString("picture", Utility.HACK_ICON_URL);
             params.putString("name", getString(R.string.app_action));

             Utility.mFacebook.dialog(SocialSharing.this, "feed", params, new UpdateStatusListener());
             String access_token = Utility.mFacebook.getAccessToken();
             Log.e("accessToken", "access Token is " + access_token);
             System.out.println(access_token);

        }
    });

}

@Override
public void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    facebook.authorizeCallback(requestCode, resultCode, data);
}

/*
 * Save the access token and expiry date so you don't have to fetch it each
 * time
 */

public static boolean save(Facebook session, Context context) {
    Editor editor = context.getSharedPreferences(KEY, Context.MODE_PRIVATE).edit();
    editor.putString(TOKEN, session.getAccessToken());
    editor.putLong(EXPIRES, session.getAccessExpires());
    return editor.commit();
}

/*
 * Restore the access token and the expiry date from the shared preferences.
 */
public static boolean restore(Facebook session, Context context) {
    SharedPreferences savedSession = context.getSharedPreferences(KEY, Context.MODE_PRIVATE);
    session.setAccessToken(savedSession.getString(TOKEN, null));
    session.setAccessExpires(savedSession.getLong(EXPIRES, 0));
    return session.isSessionValid();
}

} 
```

这是我得到的错误：

```
05-09 12:31:22.300: E/Handler(12860): Failed to handle callback; interface not implemented, callback:android.view.View$PerformClick@40d37250
05-09 12:31:22.300: E/Handler(12860): java.lang.NullPointerException
05-09 12:31:22.300: E/Handler(12860):   at org.jujitsu.app.com.SocialSharing$2.onClick(SocialSharing.java:114)
05-09 12:31:22.300: E/Handler(12860):   at android.view.View.performClick(View.java:3538)
05-09 12:31:22.300: E/Handler(12860):   at android.view.View$PerformClick.run(View.java:14330)
05-09 12:31:22.300: E/Handler(12860):   at android.os.Handler.handleCallback(Handler.java:607)
05-09 12:31:22.300: E/Handler(12860):   at android.os.Handler.dispatchMessage(Handler.java:92)
05-09 12:31:22.300: E/Handler(12860):   at android.os.Looper.loop(Looper.java:154)
05-09 12:31:22.300: E/Handler(12860):   at android.app.ActivityThread.main(ActivityThread.java:4974)
05-09 12:31:22.300: E/Handler(12860):   at java.lang.reflect.Method.invokeNative(Native Method)
05-09 12:31:22.300: E/Handler(12860):   at java.lang.reflect.Method.invoke(Method.java:511)
05-09 12:31:22.300: E/Handler(12860):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
05-09 12:31:22.300: E/Handler(12860):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
05-09 12:31:22.300: E/Handler(12860):   at dalvik.system.NativeStart.main(Native Method) 
```

我真的被这个错误困住了......任何帮助都会很棒。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T14:02:49.627

它现在固定了。这是我的代码中的一个小错误，我没有注意到。出于某种原因，一个覆盖在类中而不是方法中。

# php - 在 PHP 中重新排列多维数组

> ID：10515326
> 
> 赞同：3
> 
> 时间：2012-05-09T11:40:30.723
> 
> 标签：php, codeigniter, multidimensional-array, pyrocms

我有一个需要重新排列的数组。我正在为 pyrocms 构建语音服务器状态小部件。

*   我用于查询语音服务器-> [https://github.com/Austinb/GameQ](https://github.com/Austinb/GameQ)
*   我用于模板-> [https://github.com/BorisMoore/jsrender](https://github.com/BorisMoore/jsrender)

我创建了一个静态表！www.i.stack.imgur.com/4a3Am.png

我得到一个数组返回，它看起来像这样：

```
Array (
"Ventrilo" => Array (
    "name" => "The Evil Teddys",
    "phonetic" => "The Evil Teddys",
    "comment" => "",
    "auth" => "1",
    "maxclients" => "20",
    "voicecodec" => "0,GSM 6.10",
    "voiceformat" => "3,44 KHz, 16 bit",
    "uptime" => "25799604",
    "platform" => "Linux-i386",
    "version" => "3.0.3",
    "channelcount" => "7",
    "teams" => Array (
        "0" => Array (
                "cid" => "846",
                "pid" => "0",
                "prot" => "0",
                "name" => "<TET>",
                "comm" => ""
            ),
        "1" => Array (
                "cid" => "847",
                "pid" => "0",
                "prot" => "0",
                "name" => "#ISOLATIECEL",
                "comm" => ""
            ),
        "2" => Array (
                "cid" => "848",
                "pid" => "0",
                "prot" => "0",
                "name" => "Relax Take It Easy",
                "comm" => ""
            ),
        "3" => Array (
                "cid" => "849",
                "pid" => "846",
                "prot" => "0",
                "name" => "Foodfightkitchen",
                "comm" => ""
            ),
        "4" => Array (
                "cid" => "850",
                "pid" => "846",
                "prot" => "0",
                "name" => "WOW",
                "comm" => ""
            ),
        "5" => Array (
                "cid" => "851",
                "pid" => "849",
                "prot" => "0",
                "name" => "Bad Company",
                "comm" => ""
            ),
        "6" => Array(
                "cid" => "852",
                "pid" => "850",
                "prot" => "0",
                "name" => "The G Channel",
                "comm" => ""
            )
    ),
    "clientcount" => "3",
    "players" => Array (
        "0" => Array (
                "admin" => "1",
                "cid" => "846",
                "phan" => "0",
                "ping" => "18",
                "sec" => "345345",
                "name" => "Shorty*",
                "comm" => ""
            ),
        "1" => Array (
                "admin" => "1",
                "cid" => "851",
                "phan" => "0",
                "ping" => "20",
                "sec" => "11988",
                "name" => "Swifty",
                "comm" => ""
            ),
        "2" => Array (
                "admin" => "1",
                "cid" => "846",
                "phan" => "0",
                "ping" => "30",
                "sec" => "678674",
                "name" => "The1one12",
                "comm" => ""
            )
    ),
    "gq_online" => "0",
    "gq_address" => "172.0.0.1",
    "gq_port" => "3812",
    "gq_prot" => "ventrilo",
    "gq_type" => "ventrilo"
) 
```

我希望我的最终结果是这样的：

*cid = 频道 ID*

*pid = 父 ID*

```
Array (
"Ventrilo" => Array (
    "name" => "The Evil Teddys",
    "phonetic" => "The Evil Teddys",
    "comment" => "",
    "auth" => "1",
    "maxclients" => "20",
    "voicecodec" => "0,GSM 6.10",
    "voiceformat" => "3,44 KHz, 16 bit",
    "uptime" => "25799604",
    "platform" => "Linux-i386",
    "version" => "3.0.3",
    "channelcount" => "7",
    "teams" => Array (
        "0" => Array (
                "cid" => "846",
                "pid" => "0",
                "prot" => "0",
                "name" => "<TET>",
                "comm" => "",
                "players" => Array (
                    "0" => Array (
                            "admin" => "1",
                            "cid" => "846",
                            "phan" => "0",
                            "ping" => "18",
                            "sec" => "345345",
                            "name" => "Shorty*",
                            "comm" => "vet verwacht je niet"
                        ),
                    "1" => Array (
                            "admin" => "1",
                            "cid" => "846",
                            "phan" => "0",
                            "ping" => "30",
                            "sec" => "678674",
                            "name" => "The1one12",
                            "comm" => "grappig !"
                        )
                ),
                "teams" => Array(
                    "0" => Array (
                            "cid" => "849",
                            "pid" => "846",
                            "prot" => "0",
                            "name" => "Foodfightkitchen",
                            "comm" => "",
                            "players" => Array (),
                            "teams" => Array(
                                "0" => Array (
                                        "cid" => "851",
                                        "pid" => "849",
                                        "prot" => "0",
                                        "name" => "Bad Company",
                                        "comm" => "",
                                        "players" => Array (
                                                "0" => Array (
                                                        "admin" => "1",
                                                        "cid" => "851",
                                                        "phan" => "0",
                                                        "ping" => "20",
                                                        "sec" => "11988",
                                                        "name" => "Swifty",
                                                        "comm" => "nu nog Dynamisch"
                                                    )
                                        ),
                                        "teams" => Array(

                                        )
                                    )
                            )
                        ),
                    "1" => Array (
                            "cid" => "850",
                            "pid" => "846",
                            "prot" => "0",
                            "name" => "WOW",
                            "comm" => "",
                            "players" => Array (),
                            "teams" => Array(
                                "0" => Array(
                                        "cid" => "852",
                                        "pid" => "850",
                                        "prot" => "0",
                                        "name" => "The G Channel",
                                        "comm" => "",
                                        "players" => Array (),
                                        "teams" => Array(

                                        )
                                    )
                            )
                        )
                )
            ),
        "1" => Array (
                "cid" => "847",
                "pid" => "0",
                "prot" => "0",
                "name" => "#ISOLATIECEL",
                "players" => Array (),
                "teams" => Array(

                )
            ),
        "2" => Array (
                "cid" => "848",
                "pid" => "0",
                "prot" => "0",
                "name" => "Relax Take It Easy",
                "comm" => "",
                "players" => Array (),
                "teams" => Array(

                )
            )
    ),
    "clientcount" => "3",
    "gq_online" => "1",
    "gq_address" => "213.163.76.130",
    "gq_port" => "3812",
    "gq_prot" => "ventrilo",
    "gq_type" => "ventrilo"
) 
```

我怎样才能做到这一点？我已经尝试了很多事情，但最终结果却一无所获。

我现在拥有的。

```
$teamArrayConverted['teams'] = convertTeamArray($serverstatus['teams']);
    unset($serverstatus['players'], $serverstatus['teams']);
$results = array_merge_recursive($serverstatus, $teamArrayConverted);

    function convertTeamArray ($array) {
    // First, convert the array so that the keys match the ids
    $reKeyed = array();
    foreach ($array as $item) {
        $reKeyed[(int) $item['cid']] = $item;
    }
    //print_r($reKeyed);    
    // Next, use references to associate children with parents
    foreach ($reKeyed as $id => $item) {
        if (isset($item['pid'], $reKeyed[(int) $item['pid']])) {
          $reKeyed[(int) $item['pid']]['teams'][] =& $reKeyed[$id];
        }
    }
    //print_r($reKeyed);
    // Finally, go through and remove children from the outer level
    foreach ($reKeyed as $id => $item) {
        if ($item['pid'] != '0') {
          //print_r($reKeyed[$id]);
          unset($reKeyed[$id]);
        }
    }
    return array_values($reKeyed);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T09:13:17.383

它的工作原理是这样的：

1.  您可以通过它的数字 id 来识别每个节点，并将其存储在哈希中，以便可以通过它的 id 访问它。
2.  您采用新的哈希并插入所有元素，包括。他们的孩子根据需要。

代码的详细讨论在这里：[Converting an array from one to multi-dimensional based on parent ID values](https://stackoverflow.com/a/7768445/367456)：

```
// key the array by id
$keyed = array();
foreach($array as &$value)
{
    $keyed[$value['id']] = &$value;
}
unset($value);
$array = $keyed;
unset($keyed);

// tree it
$tree = array();
foreach($array as &$value)
{
    if ($parent = $value['parent_id'])
        $array[$parent]['children'][] = &$value;
    else
        $tree[] = &$value;
}
unset($value);
$array = $tree;
unset($tree);

var_dump($array); # your result 
```

将名称替换为您所拥有的变量名称和键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:23:05.723

根据当前数组中的 pid 创建一个数组，您可以使用该数组根据 id 循环遍历子项。

```
$arr = array(...definition from your post....);
foreach($arr["teams"] as $team)
    $teamchildren[$team[pid]][]=$team;
print_r($teamchildren); 
```

现在您可以遍历 $teamchildren[0] 数组并递归调用函数来构建每个团队下的嵌套团队结构

相同的概念可以应用于玩家，但在这种情况下将父级更改为`cid`

（以上代码未经测试）

# android - 如何在android上执行后台进程时显示视图

> ID：10515327
> 
> 赞同：0
> 
> 时间：2012-05-09T11:40:34.017
> 
> 标签：android, multithreading, web-services, view, android-activity

我有一个小问题，我不知道该怎么做。我创建了一个应用程序，它通过 xml Web 服务提取信息。数据被解析并插入到本地 sqlite 数据库中。到目前为止一切正常。由于数据的大小（根据提取的信息而有所不同），我打算插入一个带有进度条和微调器的加载屏幕，以通知用户采取了行动。好吧，可以这么说，它计划以这种方式工作。

我的问题是，一旦工作完成，它就会显示出来，而不是bevor。这就是我的做法：

```
Handler phHandle = new Handler(){
        @Override
        public void handleMessage(Message msg){
            int progress = msg.arg1;
            pb.setProgress(progress);
        }
    };
    class firstInitHandler implements Runnable{
          private Handler phHandle;
          public void setHandle(Handler h){
              this.phHandle = h;
          }
          public void run(){
                try {
                    firstInit i = new firstInit();
                    i.doInit(this.phHandle);
                    if(i.isResult())
                    i.doParse();
                    if(i.isData()){
                        i.doTasks();
                        i.doEquipment();
                        i.doUser();
                        i.doCompany();
                        i.doForms();
                        i.doSysconfig();
                    }
                } catch (NullPointerException e) {
                    e.printStackTrace();
                }
          }
    }
    firstInitHandler h = new firstInitHandler();
    h.setHandle(phHandle);
    h.run(); 
```

这是方法的一部分。到目前为止，它的工作原理。处理信息的线程在 sdk 的任务管理器中可见。我还可以看到在调试系统工作时在 logcat 上创建的状态消息。但是屏幕保持空白，仅在任务完成后才显示。我有点困惑，不知道从哪里开始让等待屏幕工作。

我欢迎任何帮助。

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-11T12:06:02.137

您可以使用 AsyncTask 来顺利工作....

在您的活动中定义 AsyncTask ....

然后您可以通过这种方式从 onclick 或 onCreate 内部调用 AsyncTask

```
new loading().execute(); 
```

AsyncTask 类将如下所示。

*   基本概念是在 onPerExecute() 中初始化进度对话框。
*   在 DoInBackground() 中执行解析等繁重的工作（非 UI）。
*   然后关闭 onPostExecute() 中的对话框。

*   您不能在 DoinBackGround 中进行 UI 更改，但可以在 OnPre / OnPostExecute() 中进行。

课程如下。

```
 private class loading extends AsyncTask'<'String, Integer, Boolean>

{

ProgressDialog dialog ;
                @Override
                protected void onPostExecute(Boolean result) {
                    // TODO Auto-generated method stub
                    super.onPostExecute(result);
                    if(result==true) 
                    {  

                     dialog.dismiss();

                    }

                }

                @Override
                protected void onPreExecute() {
                    // TODO Auto-generated method stub
                    super.onPreExecute();

                   dialog = new ProgressDialog(current.this);
                            dialog.setMessage("Loading...");
                            dialog.show();

                }

                @Override
                protected void onProgressUpdate(Integer... values) {
                    // TODO Auto-generated method stub
                    super.onProgressUpdate(values);
                }

                @Override
                protected Boolean doInBackground(String... params) {
                    // TODO Auto-generated method stub

                    try {
                        firstInit i = new firstInit();
                        i.doInit(this.phHandle);
                        if(i.isResult())
                        i.doParse();
                        if(i.isData()){
                            i.doTasks();
                            i.doEquipment();
                            i.doUser();
                            i.doCompany();
                            i.doForms();
                            i.doSysconfig();
                        }
                    } catch (NullPointerException e) 
                       {
                        e.printStackTrace();
                        return false;
                        }
                     return true;

                }

            } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:01:58.467

您是否尝试过查看 Android 开发者资源？

[这](http://developer.android.com/guide/topics/ui/dialogs.html)是[对话教程](http://developer.android.com/guide/topics/ui/dialogs.html)。此页面上显示了一个进度对话框示例，或者您可以跳到特定的进度对话框部分，其中显示了所有可能的命令、用法等。

希望这是你需要的。

# objective-c - 是否允许在 iOS 应用中呈现动态表单？

> ID：10515330
> 
> 赞同：0
> 
> 时间：2012-05-09T11:40:41.133
> 
> 标签：objective-c, ios, titanium-mobile

在一个应用程序中，我需要从远程下载一个 xml（要呈现的表单的元数据），然后相应地呈现一个表单。我想知道苹果指南是否允许这样做，因为到目前为止我在 HIG 指南中没有遇到任何这样的事情。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:46:18.507

我认为它是允许的（我认为没有任何理由拒绝此类应用程序）。在我的一些应用程序中，我根据某些条件呈现表单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T11:46:44.173

是的，只要您动态呈现的内容，就指导方针而言是可以的。您可以将此与让 UIWebView 从 Web 加载动态内容进行比较。

# c# - C# - 实体框架 - 加入方法

> ID：10515331
> 
> 赞同：1
> 
> 时间：2012-05-09T11:40:51.433
> 
> 标签：c#, entity-framework, entity-framework-4

我有一个名为“PublicUserOfferingSignUp”的表，其中包含以下列。

*   ID
*   PublicUserId - PublicUser.Id 的外键
*   提供 ID
*   已创建

我的应用程序正在使用实体框架，但我不知道如何从 PublicUserOfferingSignUp 表加入 PublicUser 表。

我想获取 PublicUserOfferingSignUp 记录列表，但按 PublicUser 表的 Name 列排序。

目前我有这个....

```
return DataBase.PublicUserOfferingSignUps.Join(PublicUser, 
```

但我似乎无法解决，任何想法....

史蒂文

任何人都可以帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T11:46:36.230

类似的东西

```
DataBase.PublicUserOfferingSignUps.Join(Database.PublicUsers, 
    puosu => puosu.PublicUserId,//PublicUserOfferingSignUps key
    pu => pu.Id,//PublicUser key
    (puosu, pu) => new {
        publicUsersOfferingSignUp = puosu,//we take all data from PubliUserOfferingSignUps
        puName = pu.Name//and Name from PublicUser
        })
.OrderBy(x => x.puName)//we order by PublicUser Name
.Select(x => x.publicUsersOfferingSignUp );//we take only the PublicOfferingSignUps 
```

编辑：正如@M.Schenkel 注意到的那样，拥有一个会更容易

```
public virtual PublicUser PublicUser {get;set;} 
```

在你的`PublicUserOfferingSignUp`模型中

那么查询将是

```
DataBase.PublicUserOfferingSignUps
.OrderBy(puosu => puosu.PublicUser.Name); 
```

更容易，不是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:46:12.767

当您使用实体框架时，公共用户应该是您的 PublicUserOfferingSignUp-entity 的一个属性。如果没有，您可以编写一个 LINQ 查询来加入它们。例如：

```
var result = from pu in context.PublicUserOfferingSignUp
join u in context.PublicUser on u.id equals pu.PublicUserId 
select pu; 
```

（此代码未经测试，但应该给你的想法）。

# ruby - 机架应用程序：无法激活机架，已激活

> ID：10515336
> 
> 赞同：2
> 
> 时间：2012-05-09T11:41:24.470
> 
> 标签：ruby, rubygems, passenger, rack, dreamhost

我有一个在 Dreamhost 上运行的 Sinatra Rack 应用程序。

目前，我每 15 分钟对应用程序进行一次 croning 并记录其输出。90% 的时间应用程序加载正常，但大约 10% 的时间我收到以下错误：http: [//jsfiddle.net/dBrUa/embedded/result/](http://jsfiddle.net/dBrUa/embedded/result/)

**无法为 ["sinatra-1.3.2"] 激活 rack (~> 1.3, >= 1.3.6, runtime)，已经为 [] 激活 rack-1.2.1**

这应该是什么原因？为什么会意外发生？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T14:50:57.183

您有两个不同版本的 Rack，如果您卸载旧版本，它可能会正常工作。

```
$ sudo gem uninstall rack 
```

它将显示所有已安装的机架版本，如果您发现存在两个或更多版本的机架，则卸载除机架 >= 1.3.6 之外的所有机架

# c# - 允许对 App_Data 的请求

> ID：10515338
> 
> 赞同：5
> 
> 时间：2012-05-09T11:41:36.517
> 
> 标签：c#, asp.net, iis, web-config

我想允许用户请求位于 App_Data 文件夹中的文件。这是错误：

> 错误摘要
> 
> HTTP 错误 404.8 - 未找到
> 
> 请求过滤模块被配置为拒绝 URL 中包含 hiddenSegment 部分的路径。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T12:13:11.767

无法`App_Data`直接访问文件夹，因为它用作 Web 应用程序的数据存储，出于存储数据的安全原因，您只能使用连接字符串从中访问数据库。

网络配置

```
<connectionStrings>
    <add name="AddressBookConnectionString" connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\myDB.mdf;Integrated Security=True;User Instance=True" providerName="System.Data.SqlClient"/>
</connectionStrings> 
```

检查这个[http://www.codeproject.com/Articles/31557/A-Beginner-s-Guide-to-ASP-NET-Application-Folders#h](http://www.codeproject.com/Articles/31557/A-Beginner-s-Guide-to-ASP-NET-Application-Folders#h)

**UPDATE**
以编程方式，我们可以访问 Web 应用程序中的任何文件并将其写入响应：

```
public class FileAccessHandler:IHttpHandler
{
    public FileAccessHandler()
    {
        //
        // TODO: Add constructor logic here
        //
    }

    public bool IsReusable
    {
        get { return false; }
    }

    public void ProcessRequest(HttpContext context)
    {
        String FileName = Path.GetFileName(context.Request.PhysicalPath);
        String AssetName = HttpContext.Current.Request.MapPath(Path.Combine(HttpContext.Current.Request.ApplicationPath, "App_Data/" + FileName));

        if (File.Exists(AssetName))
        {
            context.Response.ContentType = "image/jpeg";
            context.Response.BinaryWrite(File.ReadAllBytes(AssetName));
            context.Response.End();
        }
    }
} 
```

[下载：App_Data 访问示例](https://docs.google.com/open?id=0ByNSdMMJ6S0GamJ4NDdtdWlmMEE)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-11-01T11:51:50.227

不建议这样做，因为应用程序数据适用于应用程序文件，但这可以通过在配置中添加以下行来完成

```
 <system.webServer>
    <security>
      <requestFiltering>
        <hiddenSegments>
          <remove segment="app_data" />
        </hiddenSegments>
      </requestFiltering>
    </security>
  </system.webServer> 
```

# wpf - 分层数据模板问题

> ID：10515340
> 
> 赞同：0
> 
> 时间：2012-05-09T11:41:48.157
> 
> 标签：wpf, hierarchicaldatatemplate

我需要一些有关 HierarchicalDataTemplate 的帮助...我正在尝试构建一个 TreeView 来显示一些这样的分层数据：

*   规则集 <- (根) -RuleA
    *   规则B
        *   规则C
        *   规则A ...
    *   规则D

RuleA, ... 派生自具有

*   类型
*   RuleBase[] 规则

规则集有

*   姓名
*   列表

据我所知，我的代码：

```
<TreeView x:Name="ruleSetTree" Margin="0,10,0,0" ItemsSource="{Binding Path=SelectedTypeRuleSet>
            <TreeView.ItemTemplate>
                <HierarchicalDataTemplate  DataType="{x:Type engine:RuleSet}">
                    <HierarchicalDataTemplate.ItemTemplate>
                        <HierarchicalDataTemplate x:Name="leafTemplate"
                              ItemsSource="{Binding Path=Rules}" 
                              DataType="{x:Type engine:RuleBase}">
                            <TextBlock Text="{Binding Path=Name}"/>
                        </HierarchicalDataTemplate>
                    </HierarchicalDataTemplate.ItemTemplate>
                    <TextBlock x:Name="hierarchyItem" Text="{Binding Path=TargetType}"/>
                </HierarchicalDataTemplate>
            </TreeView.ItemTemplate>
 </TreeView> 
```

我现在看到的是 RuleSet 的名称。TreeView 的切换按钮被隐藏。我将一个 xml 反序列化到我的 RuleSet 模型中以获取此 TreeView 的数据。RuleSet 填写正确...有人可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:38:15.740

第一个没有`ItemsSource`指定`HierarchicalDataTemplate`。你不应该把它绑定到你的`List`属性上`RuleSet`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T23:20:28.523

为什么要将另一个分层数据模板嵌套到现有模板中？那可能是错误。特别是因为您没有在第一个数据模板中指定 ItemSource。如果所有节点都是类型`RuleSet`，您可以这样做：

```
<TreeView x:Name="ruleSetTree" Margin="0,10,0,0" ItemsSource="{Binding Path=SelectedTypeRuleSet>
        <TreeView.ItemTemplate>
            <HierarchicalDataTemplate DataType="{x:Type engine:RuleSet}"
                                      ItemsSource="{Binding Path=Rules}">
                <StackPanel>
                    <TextBlock Text="{Binding Path=Name}"/>
                    <TextBlock Text="{Binding Path=TargetType}"/>
                </StackPanel>
            </HierarchicalDataTemplate>
        </TreeView.ItemTemplate>
</TreeView> 
```

**更新：** 这是一个更新版本，应该符合您的要求。但是，如果所有子节点都是类型，这只是有效的`RuleBase`

```
<UserControl.Resources>
        <HierarchicalDataTemplate x:Key="RuleBaseTemplate"
                                  ItemsSource="{Binding Rules}">
            <TextBlock Text="{Binding Name}"/>
        </HierarchicalDataTemplate>

        <HierarchicalDataTemplate x:Key="RuleSetTemplate" 
                                  ItemsSource="{Binding Rules}" 
                                  ItemTemplate="{StaticResource RuleBaseTemplate}">
            <StackPanel>
                <TextBlock Text="{Binding Name}"/>
                <TextBlock Text="{Binding TargetType}"/>
            </StackPanel>
        </HierarchicalDataTemplate>
</UserControl.Resources>
<!-- rest of the code -->
<TreeView x:Name="ruleSetTree" Margin="0,10,0,0" 
          ItemsSource="{Binding SelectedTypeRuleSet}"
          ItemTemplate="{StaticResource RuleSetTemplate}"/> 
```

# java - Servlet getRequestDispatcher.forward() 工作不清楚

> ID：10515341
> 
> 赞同：0
> 
> 时间：2012-05-09T11:41:48.293
> 
> 标签：java, servlets

我有 2 个 servlet，它们在里面映射`web.xml`：

```
 <url-pattern>/archiving/archive</url-pattern>
    <url-pattern>/archiving/reportgenerator</url-pattern> 
```

从 servlet`archive`我调用第二个 servlet：

```
request.getRequestDispatcher("/reportgenerator").forward(request, response); 
```

但是有错误：

```
NOT_FOUND
RequestURI=/reportgenerator 
```

似乎在 URL 中我们在“ */reportgenerator* ”之前丢失了“ */archiving* ”。

 *但是，如果我在以下位置添加“ */archiving* ” `reaquestDispatcher`：

```
request.getRequestDispatcher("/archiving/reportgenerator").forward(request, response); 
```

然后我得到这个错误：

```
NOT_FOUND
RequestURI=/archiving/archiving/reportgenerator 
```

为什么 servlet 在第二种情况下重复“ */archiving* ”路径，但不要先粘贴它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:44:53.573

更改此行

```
request.getRequestDispatcher("/archiving/reportgenerator").forward(request, response); 
```

到

```
request.getRequestDispatcher("../archiving/reportgenerator").forward(request, response); 
```

看看这是否有帮助。*

# android - Asynctask tcpsocket Android

> ID：10515343
> 
> 赞同：1
> 
> 时间：2012-05-09T11:41:53.863
> 
> 标签：android, sockets, android-asynctask

我有一个服务器正在运行，当我发送一个 httpget 时，我得到一个图像。我想在 android 中显示这张图片，所以我使用 asynctask 来下载文件。当我每次打开一个 tcp scoket 时它都有效，但是当我想在按下按钮时打开套接字并在按下另一个按钮时关闭它，而不是不断地制作新的套接字。

这是我使用的代码：

```
public class DroidCommV1Activity extends Activity {
    Socket nsocket; //Network Socket
    public Handler mHandler;
    ImageView ivResponse;
    Button get, stop;
public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    mHandler = new Handler();

    setContentView(R.layout.main);
    get = (Button) findViewById(R.id.buttonGet);
    ivResponse = (ImageView) findViewById(R.id.ivResponse);
    stop = (Button) findViewById(R.id.buttonStop);
    get.setOnClickListener(getlistener);
    stop.setOnClickListener(stopListener);

}

private OnClickListener getlistener = new OnClickListener() {
public void onClick(View v) {
        SocketAddress sockaddr = new InetSocketAddress("192.168.1.67", 8080);
        nsocket = new Socket();
    try {
         nsocket.connect(sockaddr, 5000);
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } //10 second connection timeout
    mHandler.removeCallbacks(mUpdateTimeTask);
    mHandler.postDelayed(mUpdateTimeTask, 1000);

}
};

 private Runnable mUpdateTimeTask = new Runnable() {
   public void run() {
          new NetworkTask().execute();
       mHandler.postAtTime(this, SystemClock.uptimeMillis() + 2000);
   }
};
  private OnClickListener stopListener = new OnClickListener() {

    public void onClick(View v) {
         mHandler.removeCallbacks(mUpdateTimeTask);
          try {
            nsocket.close();

        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        }
};

  public class NetworkTask extends AsyncTask<Void, byte[], Integer> {

      InputStream nis; //Network Input Stream
      OutputStream nos; //Network Output Stream
    Bitmap mp;
    @Override
    protected void onPreExecute() {

    }

    @Override
    protected void onPostExecute(Integer test) {
                ivResponse.setImageBitmap(mp);     
    }

    @Override
    protected Integer doInBackground(Void... params) {

        try {

                nis = nsocket.getInputStream();
                nos = nsocket.getOutputStream();
                nos.write("GET / HTTP/1.1\r\n\r\n".getBytes());
                nos.flush();
                mp = BitmapFactory.decodeStream(nis);

        } catch (IOException e) {
            e.printStackTrace();
            Log.i("AsyncTask", "doInBackground: IOException");

        } catch (Exception e) {
            e.printStackTrace();
            Log.i("AsyncTask", "doInBackground: Exception");

        } finally {
             try {
                nis.close();
                  nos.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }

            Log.i("AsyncTask", "doInBackground: Finished");
        }
        return 1;
    }    
  } 
```

我收到以下错误：

```
 threadid=13: thread exiting with uncaught exception (group=0x40015560)
 FATAL EXCEPTION: AsyncTask #4
 java.lang.RuntimeException: An error occured while executing doInBackground()
 at android.os.AsyncTask$3.done(AsyncTask.java:200)
 at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:274)
 at java.util.concurrent.FutureTask.setException(FutureTask.java:125)
 at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:308)
 at java.util.concurrent.FutureTask.run(FutureTask.java:138)
 at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1088)
 at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:581)
 at java.lang.Thread.run(Thread.java:1019)
 Caused by: java.lang.NullPointerException
 at      com.droidcomm.v1.DroidCommV1Activity$NetworkTask.doInBackground(DroidCommV1Activity.java:230)
  at com.droidcomm.v1.DroidCommV1Activity$NetworkTask.doInBackground(DroidCommV1Activity.java:1)
  at android.os.AsyncTask$2.call(AsyncTask.java:185)
  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:306)
  ... 4 more 
```

# android - 加载ListView时如何在Android ListView的第一行显示图像？

> ID：10515346
> 
> 赞同：0
> 
> 时间：2012-05-09T11:42:00.493
> 
> 标签：android, listview

有一个`ListView`和list_row xml，其中包含`LinearLayout`背景图像。要求是在加载数据时在第一行显示图像。`ListView`然后在点击行时显示和隐藏图像`ListView`。

```
ViewGroup vg = (ViewGroup) ListView.getAdapter().getView(0, null, null);
TableRow selectedRow = (TableRow) vg.getChildAt(0);
LinearLayout ll = (LinearLayout) selectedRow.getChildAt(0);
ll.setVisibility(View.VISIBLE); 
```

我使用了上面的源代码并尝试这样做。但这不起作用并且不返回任何空对象。显示和隐藏部分正在使用`ItemClickListner`。但是我需要在加载数据时显示图像。我尝试在适配器类中执行此操作，并且能够显示图像。但是当点击其他行时无法隐藏它。`ListView`如何解决此问题？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:51:04.327

为此，我建议您使用`ListView.addHeaderView(v)`方法。它将允许您添加一个视图作为 ListView 的标题（它将始终位于其他列表项的顶部）。之后，当您实现**ItemClickListner**时，只需调用`ListView.removeHeaderView(v)`以从列表中删除该标题视图。

# regex - 我们可以使用 DFA 来解析 Context-Free Grammar 指定的正则语言并生成解析树吗？

> ID：10515351
> 
> 赞同：1
> 
> 时间：2012-05-09T11:42:09.707
> 
> 标签：regex, context-free-grammar, regular-language, dfa, parse-tree

众所周知，DFA 可用于验证常规语言中的字符串。

示例 1\. L=ac(b)*bcb|ad(b)*bb。DFA 可以验证字符串“acbbbcb”是否正确。

此外，有时，常规语言可以用 CFG 表示。

示例 2。

*   S -> "a" A "b"
*   A -> "c" B "c" | “D b
*   B -> "b" B | “乙”

上述CFG生成的语言就是例1中的正则表达式。

这意味着，我们可以使用 DFA 来验证此 CFG 生成的（常规）字符串。但是，我们如何生成相应的解析树呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:26:53.983

所有常规语言都有一个 CFG。

由于 DFA 除了接受/拒绝之外没有任何输出，因此严格来说它不能构建解析树。但是，我不明白为什么不能为每种语言至少有一些 DFA，这些 DFA 可以通过生成树的副作用来增强（假设语法是明确的）。这可能需要构建 DFA 以反映语法的结构，因此不一定是最小的。

如果语法不明确，那么正如 Gunther 所写，DFA 可能不足以用于树构建目的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T20:56:29.307

*   S -> "a" A "b"
*   A -> "c" B "c" | “D b
*   B -> "b" B | “乙”

我认为这可以通过以下方式实现：

想象一下，你有几页纸。在每一页纸上，都有一条生产规则。最上面的论文有规则 S -> "a" A "b"。并且有两种过渡：一种是从“A”到下一页纸，另一种是从下一页纸到这个“A”。

在该方案中，当发生从下一页到当前页的返回转换时，我们知道使用了下一页中的产生式。

这样，DFA 就可以生成解析树。但是，这个 DFA 更像是一棵“树”而不是“图”。

这个方案可能并不完全正确。如果您发现任何问题，请告诉我。

# jquery - Jquery 函数正在使用按钮，但不适用于 div

> ID：10515353
> 
> 赞同：0
> 
> 时间：2012-05-09T11:42:15.073
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs, jquery-tabs

我正在动态创建选项卡。我创建了一个按钮**removeTabs**来删除选项卡。它工作正常，但是当我尝试使用 div * *x* * 时它不起作用..

html

```
<!DOCTYPE html>
<html>
    <head>
        <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
        <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>
    <script>
        $(document).ready(function() {
            $("#tabs").tabs();
        });
    </script>
</head>
<body style="font-size:62.5%;">
    <div id="tabs">
        <ul>
        </ul>
    </div>
    <input type='button' id='addTab' value='Add Tab'>
    <input type='button' id='removeTab' value='RemoveTab'>
</body>
</html> 
```

JS：

```
$(function() {
    var index = 0;
    index++;

    $("#addTab").live ('click',function() {
        index++;
        var title = 'Tab.....  ' + index + ' <p title="close" id="removeTab" style="cursor: pointer; display: inline" >x</p>';
        var url = '#fragment-'+index;
        addTab(url,title,index);
    });

    function addTab(url, title, index) {    
        $('#tabs').tabs("add",url,title,[index]);
    }

    $('#removeTab').live('click',function() {
        var $tabs = $('#tabs').tabs();
        var selected = $tabs.tabs('option', 'selected');
        alert(selected);
        $('#tabs').tabs("remove" , [selected] );        
    });
}); 
```

**​当我点击x**时它不起作用

 **JS 小提琴：http: [//jsfiddle.net/6VrwD/23/](http://jsfiddle.net/6VrwD/23/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:23:05.730

您不能拥有多个具有相同 id 的元素。尝试使用特定的类，例如`add-tab`and `remove-tab`。

***编辑1：***

我看起来好像您的问题与`<p>`在锚点中呈现标签的选项卡有关。您可能可以通过`X`在锚点之后添加*然后*绑定点击事件来摆脱困境。

***编辑2：***

我第一次遇到 jqueryui 选项卡 :) --- 根据这个例子，你似乎需要一个 tabTemplate：http: [//jqueryui.com/demos/tabs/#manipulation](http://jqueryui.com/demos/tabs/#manipulation)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:10:28.300

我会为此使用该`tabTemplate`选项，就像在他们提供的演示中一样：

```
$(document).ready(function() {
    $("#tabs").tabs({
        tabTemplate: "<li><a href='#{href}'>#{label}</a> <p title='close' id='removeTab' style='cursor:pointer;display:inline'>x</p></li>"
    });
}); 
```

...然后稍微调整其余的 JS：

```
$(function() {
    var index = 0;
    index++;

    $("#addTab").live('click', function() {
        index++;
        var title = 'Tab.....  ' + index;
        var url = '#fragment-' + index;

        addTab(url, title, index);

    });

    function addTab(url, title, index) {

        $('#tabs').tabs("add", url, title, [index]);
    }

    $('#removeTab').live('click', function() {
        var $tabs = $('#tabs').tabs();
        var selected = $tabs.tabs('option', 'selected');
        alert(selected);
        $('#tabs').tabs("remove", [selected]);
    });
});​ 
```

**示例：http:** [//jsfiddle.net/andrewwhitaker/6VrwD/27/](http://jsfiddle.net/andrewwhitaker/6VrwD/27/)

此外，您可能希望在生成的选项卡上使用类而不是 id。在一个页面上拥有多个具有相同`id`属性的元素是无效的，并且可能会导致问题。**

# jsf - 如何在两个 p:selectOneRadios 中独占选择一个单选按钮

> ID：10515358
> 
> 赞同：2
> 
> 时间：2012-05-09T11:42:28.490
> 
> 标签：jsf, jsf-2, primefaces, radio-button

**JSF 2.0，Primefaces 3.1.1**

我有两个 p:selectOneRadio 组件：

```
 <p:selectOneRadio id="radio1" value="#{inningBean.lastDeliveryType}">  
        <f:selectItem itemLabel="Wide" itemValue="1" />
        <f:selectItem itemLabel="No Ball" itemValue="2" />
        <f:selectItem itemLabel="Normal" itemValue="3" />
   </p:selectOneRadio> 

   <p:selectOneRadio id="radio2" value="#{inningBean.lastDeliveryRunsScored}">  
        <f:selectItem itemLabel="1" itemValue="1" />
        <f:selectItem itemLabel="2" itemValue="2" />
        <f:selectItem itemLabel="3" itemValue="3" />
   </p:selectOneRadio>

   <p:commandButton /> 
```

我希望当用户单击按钮时，选择每个 selectOneRadio 中的第一个单选按钮（不向服务器提交请求）。就像用户自己在每个 p:selectOneRadio 中选择第一个单选按钮一样，我只想用 javascript 来做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T22:57:24.473

您可以使用 jQuery 轻松完成此操作。看看这些选择器：

*   [输入](http://api.jquery.com/input-selector/)
*   [姓名](http://api.jquery.com/attribute-equals-selector/)
*   [第一的](http://api.jquery.com/first-selector/)

在[prop()](http://api.jquery.com/prop/)函数上。

现在说重点：

为了更好地操作元素，请在您的wrapping上`ids`使用。`prependId="false"``form``p:selectOneRadio`

您不想重新加载页面，因此`ajax="true"`在`p:commandButton`.

```
<p:commandButton value="select" ajax="true" onclick="selectRadios()" update="@form"/> 
```

如果您`id`为`p:selectOneRadio`primefaces 指定，则将其用作呈现的 HTML 页面的`name`属性。`input type="radio"`当然，如果你不在元素上使用`prependId="false"`，`form`primefaces 会添加`forms` `id`到无线电`name`属性中，所以看起来像`name="formId:radio1"`. 有了`prependId="false"`它`name="radio1"`。

现在，当您知道您的单选按钮具有特定性时，`name`您可以使用简单的功能选择由此指定的每个组中的**第一个：**`name`

```
function selectRadios(){
               jQuery('input[name=radio1]:first').prop('checked', true);
               jQuery('input[name=radio2]:first').prop('checked', true);
            }; 
```

所以整个代码看起来像这样：

```
<script type="text/javascript">
            function selectRadios(){
               jQuery('input[name=radio1]:first').prop('checked', true);
               jQuery('input[name=radio2]:first').prop('checked', true);
            };
</script>

<h:form id="formID" prependId="false">  
            <p:selectOneRadio id="radio1" value="#{testBean.radio1}">  
                <f:selectItem itemLabel="Wide" itemValue="1" />
                <f:selectItem itemLabel="No Ball" itemValue="2" />
                <f:selectItem itemLabel="Normal" itemValue="3" />
            </p:selectOneRadio> 

            <p:selectOneRadio  id="radio2" value="#{testBean.radio2}">  
                <f:selectItem itemLabel="1" itemValue="1" />
                <f:selectItem itemLabel="2" itemValue="2" />
                <f:selectItem itemLabel="3" itemValue="3" />
            </p:selectOneRadio>
            <p:commandButton value="select" ajax="true" onclick="selectRadios()" update="@form"/>
</h:form> 
```

**注意**`p:selectOneRadio`：如果您不想通过以下方式更新整体，也可以单独更新每个`form`：`update="radio1 radio2"`

## 编辑

我不知道如何`radio button`在 primefaces 中选择 a （使用主题时）而不`request`制作 a ，因为单击`radio button` **GET** `request`后将获得相关的**UI 图标**（至少在第一次单击时）。如果您对此感到满意，请继续阅读。

由于您不想制作经典`HTTP request`，也不想`AJAX request`更改您的类型`commandButton`：

```
<p:commandButton type="button" value="Default select" id="selButtonId" onclick="selectRadios();" /> 
```

并使用此`js`功能触发点击`radio button`：

```
function selectRadios(){
               jQuery('[for=radio1\\:0]').click();
               jQuery('[for=radio2\\:0]').click();
            }; 
```

`ID`of`radio button`将用作`label`+ *:x*，其中*x*是`button`. （0 是第一个）。这是使用`click()`功能的正确方法，因为您想单击`label`按钮**本身**，而不是单击[此处](https://stackoverflow.com/a/3077102/1317692)。

**注意：** Primefaces 3.1.1 版与不支持元素[刷新方法](http://docs.jquery.com/UI/Button#method-refresh)的jQuery 1.6.x 版捆绑在一起（从 1.8 版开始支持）。`button`否则你可以使用：

```
 function selectRadios(){
       jQuery('input[name=radio1]:first').prop('checked', true).button("refresh");
       jQuery('input[name=radio2]:first').prop('checked', true).button("refresh");
    }; 
```

所以恕我直言，上面写的就是你在你的情况下所能做的。我不知道是否有其他`button` `refresh`方法可以替代。如果我错了，肯定会有人纠正我。

问候

# c - 初始化从整数生成指针，而无需在指针和整数之间进行强制转换和比较

> ID：10515365
> 
> 赞同：0
> 
> 时间：2012-05-09T11:42:55.687
> 
> 标签：c, pointers, null

我的代码片段包含（36 和 37 是行号）：

```
36     char* colon_unit = extract_colon_unit( zPath, path, &p_index);
37     if (colon_unit == NULL) 
```

在编译期间，我收到警告：

> ac：36：警告：初始化使指针从整数而不进行强制转换

当我删除指针时，

```
char colon_unit = extract_colon_unit( zPath, path, &p_index ); 
```

表明：

> ac:37: 警告：指针和整数之间的比较

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T11:53:02.087

这意味着该函数`extract_colo_unit()`返回一个字符 (char) 而不是字符指针 ( `char*`)。当您将数据类型更改`colon_unit`为 char 时，您将不会收到第一个错误，因为现在变量和分配的值都具有相同的类型。

但是，当您将`colon_unit`NULL 与 NULL 进行比较时，您就是在比较一个字符，即`colon_unit`与一个指针进行比较。也就是说，NULL 被定义为`(void*)0`，所以你在第 37 行得到第二个错误。

解决方案完全取决于您的逻辑以及从此函数返回 NULL 的含义。但如果是错误情况或没有有效值的情况，它只返回 0 而不是 NULL，并在第 37 行与 0 进行比较。

# windows-phone-7 - WP7 Bing Maps 基于图钉集合位置的缩放级别

> ID：10515367
> 
> 赞同：0
> 
> 时间：2012-05-09T11:42:58.137
> 
> 标签：windows-phone-7, bing-maps

关于使用以下代码段的快速问题：

```
var locations = CurrentItems.Select(model => model.Location);
map.SetView(LocationRect.CreateLocationRect(locations)); 
```

如此答案中所建议： [缩放以显示必应地图中的所有位置](https://stackoverflow.com/questions/4308582/zoom-to-show-all-locations-in-bing-maps)

我正在异步检索地理坐标列表，并使用 ObservableCollection 将它们绑定到 Bing 地图；使用以下命令将结果数据复制到主 UI 线程：

```
Deployment.Current.Dispatcher.BeginInvoke( ()=> {...} ) 
```

我的问题是，我无法在 Dispatcher 中引用地图控件（或者我可以吗？？），那么如何使用以下方法将新的 Pushpin 位置应用于地图：

```
map.SetView(LocationRect.CreateLocationRect(locations)); 
```

谢谢，S。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T12:50:11.967

因为`Map`归根结底，`DependencyObject`它却有它自己的来源`Dispatcher`。你可以这样做；

```
map.Dispatcher.BeginInvoke(() => map.SetView(LocationRect.CreateLocationRect(locations))); 
```

此外，值得注意的是，您只需要`BeginInvoke()`在`CheckAccess()`返回 false 时调用。（`CheckAccess`带有`EditorBrowsable(EditorBrowsableState.Never)`属性标记，因此它不会显示在智能感知中，您必须手动输入）。常见的模式是；

```
if (map.Dispatcher.CheckAccess() == false) {
  map.Dispatcher.BeginInvoke(() => map.setView(LocationRect.CreateLocationRect(locations)));
} else {
  map.SetView(LocationRect.CreateLocationRect(locations));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-24T19:43:05.333

我也许你会发现这篇文章很有用。要绑定地图视图和 ViewModel，所描述的方法使用 DependecyPropety：[http](http://sveiberg.wordpress.com/2012/06/24/5/) ://sveiberg.wordpress.com/2012/06/24/5/ 。

# android-emulator - 多标记解析

> ID：10515369
> 
> 赞同：1
> 
> 时间：2012-05-09T11:43:08.650
> 
> 标签：android-emulator

我正在测试第一个应用程序（请参阅[http://developer.android.com/training/basics/firstapp/starting-activity.html](http://developer.android.com/training/basics/firstapp/starting-activity.html)）

在某个时刻，我卡住了..它显示：

此行有多个标记 - MyFirstActivity 无法解析为变量 - EXTRA_MESSAGE 无法解析或不是字段

（见标题显示信息）

// 我在这里找到了上面给出的错误信息

```
String message = intent.getStringExtra(MyFirstActivity.EXTRA_MESSAGE); 
```

我该如何解决这个问题？谢谢你

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-19T05:20:09.340

你还没有定义`MyFirstActivity`and `EXTRA_MESSAGE`。

您是否`public final static String EXTRA_MESSAGE = "com.example.myapp.MESSAGE";`按照教程中的说明添加？检查这`MyFirstActivity`也是您的活动的名称。

# java - Java - Swing GUI 窗口顺序

> ID：10515370
> 
> 赞同：0
> 
> 时间：2012-05-09T11:43:16.077
> 
> 标签：java, windows, swing

在下面的代码中，为什么“我的应用程序”窗口是最前面的窗口？main方法先构造这个窗口吧？那么生成“我的窗口”JFrame 时不应该在后面吗？

```
public class MyApp extends JFrame {
public MyApp() { 
super();
setSize(300,600); 
setTitle("My Application"); 
setVisible(true);
}
public static void main(String[] args) { 
MyApp application = new MyApp(); 
JFrame window = new JFrame(); 
window.setSize(600,300); 
window.setTitle("My Window"); 
window.setVisible(true);
} 
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T11:46:53.497

这只是未定义的行为；不能保证*任何一个*窗口总是在前面。当我运行您的代码（Mac OS X、Java 6）时，“我的窗口”出现在前面，但我毫不怀疑您正确地描述了系统上发生的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T11:47:30.333

1) 你不能将一个 JFrame`toFront()`移到另一个上`JFrame`

2）不要创建多个，`JFrame`这还有另一个问题`Top-Level Container`，`toFront``toBack`

3）你已经看到`JDialog`或`JWindow`作为另一个窗口

*   与`parent`_`JFrame`

*   `setModal`如果需要的话

*   with`ModalityTypes`是必需的

# c# - 如何实现将查询映射到单个存储过程的 .NET 数据库层？

> ID：10515373
> 
> 赞同：0
> 
> 时间：2012-05-09T11:43:42.500
> 
> 标签：c#, .net, database, linq

我有一个带有单点入口的数据库 - 一个用于发出请求的存储过程，例如：

```
request("SELECT", "CLIENT", etc...) 
```

该过程尚未定义，但根据我的数据库人员告诉我的内容，这可能是它的样子。我将能够传递操作名称（在本例中为 SELECT）、表名（在本例中为 CLIENT）并以某种形式接收结果。（据我了解，此实现背后的原因是控制向数据库发出的查询的执行和报告）

我想知道如何为这样的数据库实现一个数据库层？

我正在考虑实现自定义 Linq 提供程序，但也许有更好的方法/模式？

# jquery - 使用 jQuery 切换附加/删除视频

> ID：10515377
> 
> 赞同：0
> 
> 时间：2012-05-09T11:43:56.133
> 
> 标签：jquery

我想知道是否有人可以帮助我-我正在尝试使用jQuery在单击带有“切换”类的按钮时将视频加载到页面中。第二次单击时，我希望删除视频-有效地在附加和删除之间切换。

这是到目前为止的代码 - 就目前而言，切换按钮只是继续添加更多视频实例。我意识到到目前为止还没有切换功能，并希望有人能阐明实现这一目标的最佳方法。我还在学习 jQuery :)

```
$(function(){
    $('.toggle').click(function(e) {
    e.preventDefault();
    var content = '<video id="my_video"><source src="animation.mp4" type="video/mp4"/></video>';
    $('#videowrapper').append(content);
    _V_('my_video', {'controls': true});
    });
}); 
```

非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T11:48:03.657

```
 $('.toggle').click(function(e) {
    e.preventDefault();
    if ($('#my_video').length) {
        $('#my_video').remove();
    }
    else {
        var content = '<video id="my_video"><source src="animation.mp4" type="video/mp4"/></video>';
        $('#videowrapper').append(content);
        _V_('my_video', {'controls': true});
    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T11:48:04.980

```
$(function(){
    $('.toggle').click(function(e) {
        e.preventDefault();
        if ($("#my_video").length) {
            $("#my_video").remove();
        }else{
            var content = '<video id="my_video"><source src="animation.mp4" type="video/mp4"/></video>';
            $('#videowrapper').append(content);
            _V_('my_video', {'controls': true});
        }
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T11:47:47.670

添加检查是否已经有视频播放，如果是则删除它。

```
$(function(){
    $('.toggle').click(function(e) {
    e.preventDefault();
    var content = '<video id="my_video"><source src="animation.mp4" type="video/mp4"/>    </video>',
        search = $('video#my_video').length;
    if(search > 0) {
        $('video#my_video').remove();
    } else {
        $('#videowrapper').append(content);
        _V_('my_video', {'controls': true});
    }
    });
}); 
```

像这样的东西就足够了。

感谢您对我投反对票，我不小心按了制表符来腾出空格，这将我的注意力转移到了发布按钮上，然后我按了 Enter，因为我想要一个新行，它在我完成之前发布了我的帖子：P

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T11:48:01.060

```
 $('#videowrapper').html(content); 
```

# ruby-on-rails - 使用正则表达式红宝石验证电话号码

> ID：10515381
> 
> 赞同：9
> 
> 时间：2012-05-09T11:44:07.293
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1

我正在尝试验证电话号码是否为数字：-

这是我的用户.rg

```
 number_regex = /\d[0-9]\)*\z/

 validates_format_of :phone, :with =>  number_regex, :message => "Only positive number without spaces are allowed" 
```

这是我的 view.html.haml

```
%li
   %strong=f.label :phone, "Phone Number"
   =f.text_field :phone, :placeholder => "Your phone number" 
```

这是控制器

```
def edit_profile
        @user = current_user
        request.method.inspect
        if request.method == "POST"
            if @user.update_attributes(params[:user])
                sign_in(@user, :bypass => true)
                flash[:success] = "You have updated your profile successfully"
                redirect_to dashboard_index_path
            else
                flash[:error] = "Profile could not be updated"
                render :action => "edit_profile"
            end
        end  
    end 
```

当我第一次在文本字段中输入数字时，它会正确验证，但如果我输入正确的格式，然后尝试输入错误的格式，它会跳过验证，并且我会收到一条消息，说明配置文件已成功更新，但是不保存错误值（带字母）。

这里可能是什么问题？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-09T12:40:23.943

我用这个，:with =>“没问题”。

```
validates :phone,:presence => true,
                 :numericality => true,
                 :length => { :minimum => 10, :maximum => 15 } 
```

如果你想要一条消息，**（不是按摩）**，试试这个，

```
 validates :phone,   :presence => {:message => 'hello world, bad operation!'},
                     :numericality => true,
                     :length => { :minimum => 10, :maximum => 15 } 
```

还要检查[这个](https://stackoverflow.com/questions/5078990/validates-presence-vs-validates-presence-of-using-rails-3)问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T12:48:46.203

尝试这个：

```
 validates_format_of :phone, :with =>  /\d[0-9]\)*\z/ , :message => "Only positive number without spaces are allowed" 
```

# c++ - 数组基指针和它的地址是一样的。为什么？

> ID：10515382
> 
> 赞同：1
> 
> 时间：2012-05-09T11:44:16.123
> 
> 标签：c++, c

考虑以下程序。

```
#include <stdio.h>

int main()
{
  int a[10]={0};

  printf("%p %p\n", a, &a);
  printf("%d %d\n", *a, *(&a));

  return 0;
} 
```

a 和 &a 是一样的。但是 *a 和 *(&a) 不是。我没有答案了。请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T11:45:17.900

`a[i]`是一样的`*(a + i)`。所以第一个元素与数组本身的地址相同。

您将在 SO 上的另一个问题中找到更详细的解释：[数组的地址为何等于它在 C 中的值？](https://stackoverflow.com/questions/2528318/c-how-come-an-arrays-address-is-equal-to-its-value)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:07:44.677

数组的地址是您在 C 中早期学习的内容之一。缓冲区的地址是其第一个元素的地址。如果是

```
printf("%d %d\n", *a, *(&a)); 
```

`*a`取 a 的值。

`*(&a)`首先是a的地址，然后是该地址。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char szBuffer[100];
char *pBufferPtr = NULL;

int main(int argc, char *argv[])
{
    pBufferPtr = szBuffer;

    printf("%s %i\n %s %i\n %s %i\n", 
            "szBuffer's address: ", (int ) szBuffer,
            "&szBuffer[0]'s address: ", (int ) &szBuffer[0],
            "pBufferPtr's address: ", (int ) pBufferPtr);

    printf("\n%s\n", "Program ended.");

    return 0;
} 
```

正如我多年前了解到的，有时对指针的最佳处理是编写过去称为“存根”代码的代码，然后在调试器中检查或使用“打印”(printf) 语句。更棘手的是当您想要修改指针指向的内容而不是其内容时。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T12:29:15.567

没有“数组基指针”，即没有指向数组的指针变量。数组的名称是指数*组本身*。因此你不能取一个地址`a`，而是`&a`作为一个特例来处理。

当您在表达式中使用数组的名称时，它*会衰减*为指向数组第一个元素的指针。但是，`&`和`sizeof`运营商是*例外*。

ANSI C 指定表示`&a`数组本身的地址，其类型是“指向数组的指针”，而不是“指向数组元素的指针”。

在 ANSI 之前的编译器中， &a 会导致警告。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T12:06:47.777

`a`并且`&a`具有相同的值，但它们是不同的类型：`int *`和`int **`. 编译代码时应该会收到警告。

如果您添加这样的额外内容，您的第二行将起作用`*`：

```
printf("%d %d\n", *a, **(&a)); 
```

这确实是有道理的：如果`*a`取消引用`a`并给出数组的第一个元素，并且`&a`意味着获取 的地址`a`，则`*(&a)`获取 的地址`a`，取消引用*该*，然后再次返回`a`。

# java - JSF 到 JQuery 组件集成

> ID：10515384
> 
> 赞同：1
> 
> 时间：2012-05-09T11:44:25.837
> 
> 标签：java, jquery, jquery-ui, jsf, richfaces

由于任何 JSF 页面都在服务器端转换为等效的 HTML 并发送到客户端进行渲染，而客户端的 JQuery 获取 HTML 并重新呈现它。

从理论上讲，应该可以将 JSF 生成的 HTML 包装到 JQuery 中，如果是这样，我想知道它是如何完成的。如果可能，特别使用 RichFaces 作为 JSF 实现。

```
<rich:dataTable id="table">          
  <rich:column>

  </rich:column>
</rich:dataTable> 
```

上面的 JSF 片段被转换成它的等效 HTML 就是这样

```
<table id="table">
  <tr>
    <td></td>
  </tr>
</table> 
```

难道不应该做这样的事情吗

```
<script type="text/javascript">
   $(document).ready(function () {
     $('#table').dataTable();
}
</script> 
```

我已经尝试过了，但它似乎不起作用。

因此，如果有人有任何提示，我将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T11:53:33.787

混合 JSF 和 jquery 是可行的，但有一些问题。

JSF 正在接管你的 id，所以如果 table 是一个 id 为“form”的表单，那么 html 中的实际元素 id 将默认为“form:table”。我认为 jquery 在选择器中的冒号可能有问题，因此您可以用一个类标记您的表并通过该类进行选择：

```
<rich:dataTable styleClass="my-table">          
  <rich:column>

  </rich:column>
</rich:dataTable> 
```

并将选择器设置为：

```
<script type="text/javascript">
   $(document).ready(function () {
     $('.my-table').dataTable();
}
</script> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T11:52:43.920

JSF 组件的 Id 是通过将层次结构中容器的 Id 与 : 分隔符组合起来生成的。不是所有的容器都算数，我不记得确切的规则。

通常一些 JSF 库有一些客户端 API 来获取我不知道的 Richfaces 的组件 ID。

无论如何，如果您想使用基于 jQuery 的 JSF，请查看 primefaces。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-15T14:07:49.820

这个问题可能是由 Prototype.js 组成的 Jquery 和富面孔组件引起的“$”名称间距冲突。尝试使用 jQuery.noconflict() 方法。我有一个类似的问题，使 jquery 与richfaces 一起工作 jquery.noconflict() 成功了..

```
<script type="text/javascript">
  $.noConflict();
  jQuery(document).ready(function($) {
 // Code that uses jQuery's $ can follow here.
 });
// Code that uses other library's $ can follow here.
</script> 
```

祝你好运！

# sql - SQL 不是自动递增的

> ID：10515387
> 
> 赞同：3
> 
> 时间：2012-05-09T11:44:49.773
> 
> 标签：sql, sql-server, tsql, auto-increment

我在 C# 应用程序中触发了以下 SQL。

一切正常，但 ID 表不会自动递增。它为第一个条目创建值 1，然后由于无法创建 unquie ID 而不允许其他插入。

这是SQL：

```
CREATE TABLE of_mapplist_raw (
    id          integer PRIMARY KEY NOT NULL,
    form_name   varchar(200) NOT NULL,
    form_revi   varchar(200) NOT NULL,
    source_map  varchar(200),
    page_num    varchar(200) NOT NULL,
    fid         varchar(200) NOT NULL,
    fdesc       varchar(200) NOT NULL
)"; 
```

我敢肯定这是一个小学生的错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T11:46:14.470

你需要指定它的种子和增量。（另外，我不认为有`integer`关键字......）

```
id  [int] IDENTITY(1,1) NOT NULL, 
```

第一个值是种子

第二个是增量之间的增量

`A Question you might ask :`

> 增量之间的增量？我为什么需要那个？它总是1 ....??

好吧 - 是的，也不是。有时你想在行之间留下一个间隙——这样你以后可以在……之间插入行，特别是如果它的聚集索引是由那个键组成的……而且速度很重要……所以你可以预先设计它以留下间隙。

*ps 很高兴听到观察者的其他情况。*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T11:47:22.050

您需要提及身份。

```
id  int IDENTITY(1,1) NOT NULL 
```

# sql - Oracle 相当于 Postgres 的 DISTINCT ON？

> ID：10515391
> 
> 赞同：28
> 
> 时间：2012-05-09T11:44:57.110
> 
> 标签：sql, oracle, postgresql

在 postgres 中，您可以使用 查询组中的第一个值`DISTINCT ON`。**如何在 Oracle 中实现这一点？**

从 postgres 手册：

> SELECT DISTINCT ON ( expression [, ...] ) 只保留给定表达式计算结果为相等的每组行的第一行。DISTINCT ON 表达式使用与 ORDER BY 相同的规则进行解释（见上文）。请注意，除非使用 ORDER BY 确保所需的行首先出现，否则每组的“第一行”是不可预测的。

例如，对于给定的表：

```
 col1 | col2 
------+------
 A    | AB
 A    | AD
 A    | BC
 B    | AN
 B    | BA
 C    | AC
 C    | CC 
```

升序排序：

```
> select distinct on(col1) col1, col2 from tmp order by col1, col2 asc;
 col1 | col2 
------+------
 A    | AB
 B    | AN
 C    | AC 
```

降序排序：

```
> select distinct on(col1) col1, col2 from tmp order by col1, col2 desc;
 col1 | col2 
------+------
 A    | BC
 B    | BA
 C    | CC 
```

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-05-09T11:45:15.377

通过使用函数或使用or函数[`first_value()`](http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions059.htm)之一，可以在 Oracle 中复制相同的效果。[`rank()`](http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions129.htm#SQLRF00690)[`row_number()`](http://docs.oracle.com/cd/B28359_01/server.111/b28286/functions144.htm#SQLRF06100)

这两种变体也适用于 Postgres。

**`first_value()`**

```
select distinct col1, 
first_value(col2) over (partition by col1 order by col2 asc)
from tmp 
```

`first_value`给出分区的第一个值，但对每一行重复它，因此有必要结合使用它`distinct`来为每个分区获取单行.

**`row_number()`/`rank()`**

```
select col1, col2 from (
  select col1, col2, 
  row_number() over (partition by col1 order by col2 asc) as rownumber 
  from tmp
) foo
where rownumber = 1 
```

在此示例中替换`row_number()`为产生相同的结果。`rank()`

这个变体的一个特点是它可以用于获取给定分区的**前 N**​​行（例如“最后 3 个更新”），只需更改`rownumber = 1`为`rownumber <= N`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-15T06:57:33.313

如果您有两个以上的字段，则使用 beerbajays answer 作为子查询（注意按 DESC 顺序）：

```
select col1,col2, col3,col4 from tmp where col2 in
(
select distinct 
first_value(col2) over (partition by col1 order by col2 DESC) as col2
from  tmp
--WHERE you decide conditions
) 
```

# android - ListView.OnItemClickListener 中的 IllegalStateException

> ID：10515398
> 
> 赞同：0
> 
> 时间：2012-05-09T11:45:16.983
> 
> 标签：android, cursor, android-listview, sqliteopenhelper

我的主要活动中有一个列表视图，当我们单击它时显示一个人的详细信息，我有两个类

EmployeeList.java - [http://pastebin.com/5vPMKrCQ](http://pastebin.com/5vPMKrCQ)

DatabaseHelper.java - [http://pastebin.com/NS7RR8E6](http://pastebin.com/NS7RR8E6)

我的 logcat 中有以下异常。

```
05-09 16:58:10.278: E/CursorWindow(23310): Failed to read row 0, column -1 from a CursorWindow which has 2 rows, 3 columns.

05-09 16:58:10.368: E/AndroidRuntime(23310): java.lang.IllegalStateException: Couldn't read row 0, col -1 from CursorWindow.  Make sure the Cursor is initialized correctly before accessing data from it. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:14:14.730

```
Cursor cursor = db.rawQuery("select * from employee_directory where _id " + id);

    if (null != cursor&&cursor.moveToFirst()) {

            String title= cursor.getString(cursor.getColumnIndex(DatabaseHelper.TITLE));

            String membername= currsor.getString(cursor.getColumnIndex(DatabaseHelper.MEMBER_NAME));

        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:04:17.237

可能是您在从数据库中将值放入游标后还没有完成**cursor.moveToFirst() 。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T12:08:25.427

试试下面的代码

```
 setOnItemLongClickListener(new AdapterView.OnItemLongClickListener() {

                    @Override
                    public boolean onItemLongClick(AdapterView<?> parent, View v,
                            int position, long id) {
//Your logic
                    }
                } 
```

# iphone - iPhone，存储大量照片？

> ID：10515399
> 
> 赞同：0
> 
> 时间：2012-05-09T11:45:17.807
> 
> 标签：iphone, objective-c, ios, ipad, photo

在我的应用程序中，我有一些地方可以让用户拍照并将其放入列表中，从技术上讲，用户可以永远继续添加照片。

那么保存、存储和加载用户拍摄的照片的最佳方式是什么？考虑到，可能有数百个。此外，一次加载它们可能也不是一个聪明的主意，但是说有一个滚动视图，向下滚动，当到达底部时，它可以再加载 20 个，然后再加载 20 个，等等。

任何帮助，非常感谢，谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:23:14.987

只需决定*您*要存储照片的位置、内置照片库或应用程序文档文件夹或两者兼而有之（为了方便用户观看、删除、同步等，我会选择照片库）。如果你选择文件夹，别忘了支持删除...磁盘空间是用户的问题。

如果您选择仅存储在照片库中并希望稍后从应用程序中访问照片，则必须保存已保存图像的 url。[这个答案](https://stackoverflow.com/a/4458451/53313)告诉你它是如何工作的。

在滚动视图中加载照片需要一些优化，即在内存中加载所有照片不是一个好主意，而只加载可见的照片。正如另一个答案所说，重新使用单元格`UITableView`可能是一个解决方案，但我认为，`UITableView`对于典型的 iPhone 表，调整和自定义它`UITableViewCells`是不值得的，如果唯一的原因是内存使用。

我会继续`UIScrollView`对代理的方法做出反应，以加载新内容并删除旧内容。如果你想要一个非分页`UIScrollView`，你应该使用`scrollViewDidScroll`它，它经常被触发，所以可能需要另一个优化 - 测试它。寻呼`UIScrollView`对我来说似乎更容易。只需对`scrollViewDidEndDecelerating`加载和删除内容做出反应。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T11:47:39.337

使用tableview，如果你使用dequecell方法，它将加载它管理内存和jst可见行加载到内存中

在这里阅读更多表格视图

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)

# jquery - 使用 jquery 将 url 传递到另一个页面

> ID：10515403
> 
> 赞同：0
> 
> 时间：2012-05-09T11:45:46.260
> 
> 标签：jquery

我将创建两个页面。

第一页将是 home.html 在此页面上，我将有一个链接移至第 2 页 layout.html 并从那里触发 url 这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:50:56.013

要重定向到另一个页面，请使用`window.location.href = "http://my/href.com";`. 如果您想在页面加载时执行此操作，请尝试以下操作：

```
$(function() {
    window.location.href = "http://my/url/layout.html";
}); 
```

如果您想在访问第二页时打开另一个窗口或选项卡，请尝试以下操作：

```
$(function() {
    window.open("http://my/url/layout.html");
}); 
```

这将在新窗口（或选项卡，基于您无法控制的用户设置）中打开您的链接。

抱歉，如果这没有用，但这是我能做的最好的事情，而无需您更具体地说明您要达到的目标。

# linux - 算术表达式：期望 EOF：“008 +1”

> ID：10515407
> 
> 赞同：1
> 
> 时间：2012-05-09T11:46:11.197
> 
> 标签：linux, bash, shell, scripting

我的脚本 ./make_shift_ln_o_dummy.sh：

```
for i in  `seq -w 0 272`
do
y=0
x=1
echo $i
y=$(($i +$x))
echo $y
done 
```

我的输出带有错误消息：算术表达式：期望 EOF：“008 +1”

```
000
1
001
2
002
3
003
4
004
5
005
6
006
7
007
8
008
./make_shift_ln_o_dummy.sh: 25: arithmetic expression: expecting EOF: "008 +1" 
```

为什么会这样？我做错了什么？我应该如何将其更改为 272 的输出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T12:09:23.110

*为什么会这样？*

bash 表达式求值器看到前导`0`并假定八进制常量将跟随但`8`不是有效的八进制数字。

4.2 版`bash`给出了更有用的诊断：

```
$ echo $((007 + 1))
8
$ echo $((008 + 1))
bash: 008: value too great for base (error token is "008") 
```

[上面anubhava](https://stackoverflow.com/a/10515557/282912)的答案给出了“如何解决”，这就是我赞成它的原因。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T14:37:16.040

008 是八进制数。您可以指定要在算术表达式中使用以 10 为底的数字：

```
y=$((10#$i +$x)) 
```

[http://www.gnu.org/software/bash/manual/bashref.html#Shell-Arithmetic](http://www.gnu.org/software/bash/manual/bashref.html#Shell-Arithmetic)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T11:53:54.003

不需要在`seq`这里使用。您可以像这样使用 bash 算术功能：

```
for ((i=0; i<272; i++))
do
   y=0
   x=1
   printf "%03d\n" $i
   y=$(($i + $x))
   printf "%03d\n" $y
done 
```

# sql - 如何在数字前面加上零以及格式化它

> ID：10515412
> 
> 赞同：1
> 
> 时间：2012-05-09T11:46:20.507
> 
> 标签：sql, oracle

我有一个以列 node_id 为数字的表，其中，

```
node_id
0
2000
300300300
400400400 
```

我想要得到的是将此数字转换为字符串，并在右边每第三个数字后添加“-”。所以预期的输出是，

```
node_id
000-000-000
000-002-000
300-300-300
400-400-400 
```

这是我正在使用的查询，

```
select TO_CHAR( lpad(t1.node_id,9,'0'), '999G999G999', 'NLS_NUMERIC_CHARACTERS="-"'), node_id from table t1; 
```

我得到的输出是，

```
node_id
0
2-000
300-300-300
400-400-400 
```

我的问题是我还需要在每条记录前面加上“0”，使总长度为 11。我尝试在 lpad 周围立即添加 to_char，以便将 lpad 输出转换为 varchar，但这也给出了相同的输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T11:49:24.967

只需将格式掩码更改为：

```
'099G999G999' 
```

（注意前导“0”）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:30:11.337

在任何数据库中添加 0 的替代方法如下：

```
right('000000000000' || cast(<val> to varchar(100)), <numdigits>) 
```

当然，有些数据库使用“concat()”或“+”而不是“||” 用于连接。

# forms - progress 4gl - 表格和框架

> ID：10515414
> 
> 赞同：0
> 
> 时间：2012-05-09T11:46:27.233
> 
> 标签：forms, frame, progress-4gl

我是进度 4gl 的新手。我坚持框架和形式的概念。 任何人都可以通过一个例子

来解释***表格和框架的使用**4gl**吗？***

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-10T12:04:16.780

框架是您要显示的内容的集合。存在与过程和迭代块相关联的隐式未命名帧。

或者您可以使用 DEFINE FRAME 显式创建一个框架。

您还可以在许多语句中使用 WITH FRAME 短语来创建命名框架。一种这样的语句是 FORM 语句。FORM 语句可以方便地在一个地方（通常在程序的顶部）组织框架的布局。稍后在程序中的 UPDATE、DISPLAY 和其他语句在工作时可能会引用 FORM 所描述的 FRAME。

事件驱动代码（GUI 的东西）通常通过指定它们与哪个框架相关联来限定对小部件（控件）和事件的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-09T07:50:22.360

定义框架不能启动它的范围，而 Form 启动了该框架的范围。

# jquery - Jquery 动画在 IE7 中正常工作，但在 IE8 中不能正常工作？

> ID：10515431
> 
> 赞同：1
> 
> 时间：2012-05-09T11:47:18.563
> 
> 标签：jquery, jquery-plugins, internet-explorer-8, internet-explorer-7, scrollto

——请温柔一点。

在同一页面上，我有[https://github.com/Wilto/Dynamic-Carousel](https://github.com/Wilto/Dynamic-Carousel)和我用 jquery 和 jquery scrollto 制作的自定义脚本：

```
$('#bio_link').click(function(event){
    if (event.preventDefault)  {
        event.preventDefault();
    } else {
       event.returnValue = false;
    }
    $('#bio').slideDown('slow', function() {
        $.scrollTo('#bio', 300);
    });
}); 
```

Wilto Dynamic-Carousel 在包括 IE7 在内的所有浏览器中都能正常工作，但在 IE8 中却不行：图像发生变化但没有动画。scrollto 在您第二次单击它时工作正常，但在第一次尝试时它只是跳到它应该去的地方而没有任何动画。

有任何想法吗？

也许它会有所帮助：它在兼容模式下的 IE8 中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T19:33:28.427

IE8 特定的 CSS 一定是问题所在。查找以下内容：

*   `position:static`
*   `style=`在的父元素上`#bio`

# php - 如何正确终止 zend 框架中的会话？

> ID：10515439
> 
> 赞同：9
> 
> 时间：2012-05-09T11:47:46.060
> 
> 标签：php, zend-framework, session

这就是我设置会话的方式

```
$this -> sess = new Zend_Session_Namespace('user');
$this -> sess -> username = "Bob";
$this -> sess -> admin = "1"; 
```

这就是我杀死它的方式

```
setcookie("mycookiename",md5(rand(10,1200)),time() - (60 * 60),"/",".site.com");
$_SESSION = array();
session_destroy();
$this -> _redirect('/'); 
```

但它仍然将 $this->sess->admin 保持为 '1' ...用户名消失了，但 admin 保持不变。删除与客户端关联的所有会话的正确方法是什么？

如果我做

```
$this->sess->admin = 0; 
```

然后它可以工作，但我怀疑这是我持有的每个会话变量的正确方法。

我也试过

```
setcookie("mycookiename",md5(rand(10,1200)),time() - (60 * 60),"/",".site.com");
Zend_Session::namespaceUnset($this->sess); 
```

它没有用，它没有关闭任何会话。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-09T12:01:57.137

要删除与客户端关联的**所有会话，请使用以下命令：**

```
\Zend_Session::destroy( true ); 
```

这将删除整个会话，并向客户端发送标头请求以删除与会话关联的任何 cookie。您也可以将此方法的参数设置为 false 以不删除用户 cookie。但请注意：

> Zend_Session::destroy(true) 必须在 PHP 发送 HTTP 头之前调用，或者必须启用输出缓冲。它将破坏与当前会话关联的所有持久数据。但是，PHP 中的变量不会受到影响，因此您的命名空间会话（Zend_Session_Namespace 的实例）仍然是可读的。

要删除这些，请使用以下方法：

```
$ns = 'auth'
$namespace = new \Zend_Session_Namespace( $ns );
$namespace->unsetAll(); 
```

[请参阅此处了解更多信息](http://framework.zend.com/manual/en/zend.session.global_session_management.html)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-09T12:02:46.403

销毁特定会话

```
Zend_Session::namespaceUnset('user'); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-05-09T11:53:39.753

您可以使用

```
Zend_Session::destroy($remove_cookie = true, $readonly = true); 
```

见[手册](http://framework.zend.com/manual/en/zend.controller.response.html#zend.controller.response.usage)

# java - 使用 Eclipse Indigo 构建 Jar 文件

> ID：10515440
> 
> 赞同：2
> 
> 时间：2012-05-09T11:47:46.590
> 
> 标签：java, eclipse, jar, mysql-connector

我在 Eclipse 3.7 (Indigo) 上有这个项目，并计划构建 *.jar。我将通过文件 > 导出 > Java.Runnable JAR 文件 > 命名 jar 文件的文件名 > 完成来构建项目。运行 jar 文件时总是返回错误。

```
Could not find the main class: [package nmame].[Class name of Main class (PSVM) is located].
Program will exit. 
```

此外，MySQL 连接器 5.1 作为 JDBC 使用的引用库包含在内。

如何解决并能够构建一个 jar 文件，该 jar 文件在 Eclipse 上作为 Java 应用程序运行？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T11:51:53.267

当您导出项目时，请尝试选择选项：

> 将所需的库复制到生成的 jar 旁边的子文件夹中

![截屏](../Images/2361c95db35a77f663637fb13e16f455.png)

这将创建一个包含所需依赖库的 lib 文件夹..

*您还必须为程序选择一个有效的启动配置，以确保创建 MANIFEST 文件并正确填充 MAin 类属性。*

当您运行生成的 jar 时，您应该使用以下命令行运行它（阅读 MANIFEST.MF）：

```
java -jar yourjar.jar 
```

或在命令行中指定 Main 类：

```
java yourjar.jar MainClass 
```

# c# - 为字符串列表生成所有组合

> ID：10515449
> 
> 赞同：17
> 
> 时间：2012-05-09T11:48:11.850
> 
> 标签：c#, math, combinations

我想生成一个字符串列表的所有可能组合的列表（它实际上是一个对象列表，但为简单起见，我们将使用字符串）。我需要这个列表，以便我可以在单元测试中测试每个可能的组合。

例如，如果我有一个列表：

```
 var allValues = new List<string>() { "A1", "A2", "A3", "B1", "B2", "C1" } 
```

我需要`List<List<string>>`所有组合，例如：

```
 A1
  A2
  A3
  B1
  B2
  C1
  A1 A2
  A1 A2 A3
  A1 A2 A3 B1
  A1 A2 A3 B1 B2
  A1 A2 A3 B1 B2 C1
  A1 A3
  A1 A3 B1
  etc... 
```

递归函数可能是获得所有组合的方法，但它似乎比我想象的要难。

任何指针？

谢谢你。

编辑：两种解决方案，有或没有递归：

```
public class CombinationGenerator<T>
{
    public IEnumerable<List<T>> ProduceWithRecursion(List<T> allValues) 
    {
        for (var i = 0; i < (1 << allValues.Count); i++)
        {
            yield return ConstructSetFromBits(i).Select(n => allValues[n]).ToList();
        }
    }

    private IEnumerable<int> ConstructSetFromBits(int i)
    {
        var n = 0;
        for (; i != 0; i /= 2)
        {
            if ((i & 1) != 0) yield return n;
            n++;
        }
    }

    public List<List<T>> ProduceWithoutRecursion(List<T> allValues)
    {
        var collection = new List<List<T>>();
        for (int counter = 0; counter < (1 << allValues.Count); ++counter)
        {
            List<T> combination = new List<T>();
            for (int i = 0; i < allValues.Count; ++i)
            {
                if ((counter & (1 << i)) == 0)
                    combination.Add(allValues[i]);
            }

            // do something with combination
            collection.Add(combination);
        }
        return collection;
    }
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-09T12:03:32.653

您可以手动输入，使用 n 位二进制数自然对应于 n 元素集的子集这一事实。

```
private IEnumerable<int> constructSetFromBits(int i)
{
    for (int n = 0; i != 0; i /= 2, n++)
    {
        if ((i & 1) != 0)
            yield return n;
    }
}

List<string> allValues = new List<string>()
        { "A1", "A2", "A3", "B1", "B2", "C1" };

private IEnumerable<List<string>> produceEnumeration()
{
    for (int i = 0; i < (1 << allValues.Count); i++)
    {
        yield return
            constructSetFromBits(i).Select(n => allValues[n]).ToList();
    }
}

public List<List<string>> produceList()
{
    return produceEnumeration().ToList();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T11:51:02.287

如果您想要所有变体，请查看这个项目以了解它是如何实现的。

[http://www.codeproject.com/Articles/26050/Permutations-Combinations-and-Variations-using-CG](http://www.codeproject.com/Articles/26050/Permutations-Combinations-and-Variations-using-C-G)

[但是您可以使用它，因为它在CPOL](http://www.codeproject.com/info/cpol10.aspx)下是开源的。

例如：

```
var allValues = new List<string>() { "A1", "A2", "A3", "B1", "B2", "C1" };
List<String> result = new List<String>();
var indices = Enumerable.Range(1, allValues.Count);
foreach (int lowerIndex in indices)
{
    var partVariations = new Facet.Combinatorics.Variations<String>(allValues, lowerIndex);
    result.AddRange(partVariations.Select(p => String.Join(" ", p)));
}

var length = result.Count;  // 1956 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T11:51:24.717

在下面的帖子中完成了类似的任务：

[列出字符串/整数的所有排列](https://stackoverflow.com/questions/756055/listing-all-permutations-of-a-string-integer)

希望这有帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-15T07:02:10.377

另一种递归解决方案。从`AllCombinations`下面的代码中，您将获得所有可能的组合。逻辑：

1.  从一个元素开始。
2.  用它生成所有可能的组合。
3.  移动到下一个元素并再次从第 2 步开始。

代码：

```
public class Combination<T>
{
    private IEnumerable<T> list { get; set; }
    private int length;
    private List<IEnumerable<T>> _allCombination;

    public Combination(IEnumerable<T> _list)
    {
        list = _list;
        length = _list.Count();

        _allCombination = new List<IEnumerable<T>>();
    }

    public IEnumerable<IEnumerable<T>> AllCombinations
    {
        get
        {
            GenerateCombination(default(int), Enumerable.Empty<T>());

            return _allCombination;
        }
    }

    private void GenerateCombination(int position, IEnumerable<T> previousCombination)
    {
        for (int i = position; i < length; i++)
        {
            var currentCombination = new List<T>();
            currentCombination.AddRange(previousCombination);
            currentCombination.Add(list.ElementAt(i));

            _allCombination.Add(currentCombination);

            GenerateCombination(i + 1, currentCombination);

        }
    }
} 
```

# python - Python中的Python

> ID：10515455
> 
> 赞同：-3
> 
> 时间：2012-05-09T11:48:18.660
> 
> 标签：python

我有两个 python 脚本。第一个 python 脚本调用第二个。但是秒 python 脚本应该使用第一个脚本中的一个变量来给出所需的结果。我知道我可以简单地将第二个脚本中的那几个代码写到第一个脚本中。但我很好奇如何以这种方式做到这一点。肿瘤坏死因子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:20:15.140

第二个脚本可以导入第一个：

脚本 A：

```
def something():
    foo = 'bar'
    return foo 
```

脚本 B：

```
import A

var = A.something() 
```

**或者：**

脚本 A：

```
def something():
    foo = 'bar' 
```

脚本 B：

```
import A

var = A.something().foo 
```

# jquery - Yii：CGridView 上 AJAX 操作的动态更新 ID

> ID：10515456
> 
> 赞同：2
> 
> 时间：2012-05-09T11:48:20.087
> 
> 标签：jquery, ajax, grid, widget, yii

我正在使用 Yii 1.1 来实现主详细信息订单-订单-详细信息网格到目前为止，我得到了他的： ![在此处输入图像描述](../Images/a43204cff4e0995a879967613f45dfe8.png) -基本上当我单击详细信息图标（左图标）时-它使用 ajax 加载带有 oder 详细信息的详细信息网格（我为此使用了一个名为 EAjaxLinkColumn 的组件 - 默认情况下，链接列不支持 ajax）

这是我的代码：

```
<?php     $this->widget('zii.widgets.grid.CGridView', array(
        'id'=>'main-orders-grid',
        'dataProvider'=>$model->search(),
        'filter'=>$model,
        'columns'=>array(

    array (
    'class'=>'EAjaxLinkColumn',
    'header'=>'Details',
    'url'=>Yii::app()->createUrl('mainOrdersDetails/detailview'),
    'imageUrl'=>Yii::app()->request->baseUrl.'/images/zoom_in.png',

          //linkAjaxOptions and linkAjaxOptionsExpression are merged together, so only put the ones
          //that actually need to be evaluated in the latter
          'linkAjaxOptions' => array(
             'type' => 'POST',
             /*'dataType' => 'json',       */
             'update'=>'#id_view',
          ),
          //In this expression, the variable $row the row number (zero-based); 
          //$data the data model for the row; and $this the column object.
          'linkAjaxOptionsExpression' => array(
             'data' => array(
               'id' => '$data->id' //note that $data->id is an expression so must be quoted
             ),
          ),

    ),    

            'id',   
            'storageF.name',
            'date_added',
            'order_number',
            'expected_ship_date',
            'shipped_date',
            'shipping_costs',
            'personF.user',
            'date_to_pay',
            'paid_integraly',
            'paid_partialy',        
            array(
                'class'=>'CButtonColumn',
            ),
        ),
    )); ?> 
```

我想要的是在每一行下面加载它的细节。好吧，我不知道该怎么做..因为 CGridView 小部件对于像我这样在 Yii 中的初学者来说非常奇怪现在它总是加载到同一个 div 中..注意

'linkAjaxOptions' => 数组（'type' => 'POST', 'update'=>'#id_view', ),

首先更新选项是静态的。我想使用 ID #id_view_1 #id_view_2 然后以某种方式在每个主行下方插入这些空行

也许我可以直接使用 Jquery 而不会使 CGrid 的选项复杂化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:37:58.750

我想你想要这个。（将更新属性从 linkAjaxOptions 移动到 linkAjaxOptions 就像在 linkAjaxOptions 我们可以使用特殊变量 $data 和 $row

```
<?php     $this->widget('zii.widgets.grid.CGridView', array(
        'id'=>'main-orders-grid',
        'dataProvider'=>$model->search(),
        'filter'=>$model,
        'columns'=>array(

    array (
    'class'=>'EAjaxLinkColumn',
    'header'=>'Details',
    'url'=>Yii::app()->createUrl('mainOrdersDetails/detailview'),
    'imageUrl'=>Yii::app()->request->baseUrl.'/images/zoom_in.png',

          //linkAjaxOptions and linkAjaxOptionsExpression are merged together, so only put the ones
          //that actually need to be evaluated in the latter
          'linkAjaxOptions' => array(
             'type' => 'POST',
             /*'dataType' => 'json',       */
          ),
          //In this expression, the variable $row the row number (zero-based); 
          //$data the data model for the row; and $this the column object.
          'linkAjaxOptionsExpression' => array(
             'data' => array(
               'id' => '$data->id' //note that $data->id is an expression so must be quoted
             ),

             'update'=>'\'#id_view_\'.$data->id',//or you can use '\'#id_view_\'.$row'; according to your needs
          ),

    ),    

            'id',   
            'storageF.name',
            'date_added',
            'order_number',
            'expected_ship_date',
            'shipped_date',
            'shipping_costs',
            'personF.user',
            'date_to_pay',
            'paid_integraly',
            'paid_partialy',        
            array(
                'class'=>'CButtonColumn',
            ),
        ),
    )); ?> 
```

# python - 如何使用 C 库刷新 Python 程序中的内存？

> ID：10515458
> 
> 赞同：2
> 
> 时间：2012-05-09T11:48:25.937
> 
> 标签：python, windows, opencv, memory-leaks, c-libraries

Python 程序的功能是通过网络摄像头找到最亮的光线并将 X、Y 坐标发送到 arduino 程序。这是用相机跟随太阳。

问题是内存会增加，直到程序冻结。我试图在使用后删除所有变量。但它仍然使用太多内存。

操作系统：Windows 7

我怎样才能找到泄漏并阻止它？

这是python代码：

```
import cv
import traceback
import serial

try:
    cv.NamedWindow("CameraFeed", 1)
    capture = cv.CaptureFromCAM(0)
    cv.NamedWindow("Altered", 1)

except:
    cv.DestroyWindow("CameraFeed")
    cv.DestroyWindow("Altered")
    traceback.print_exc()

ser = serial.Serial("COM15",9600)

def repeat():
    imga = cv.QueryFrame(capture)
    img = cv.CreateImage(cv.GetSize(imga),8,3)
    cv.Smooth(imga, img, cv.CV_BLUR, 3)     

    thresholded_img =  cv.CreateImage(cv.GetSize(img), 8, 1)
    del(img)

    minv = cv.Scalar(250,250,250, 0)
    maxv = cv.Scalar(255,255,255, 0)
    cv.InRangeS(imga, minv, maxv, thresholded_img) 
    del(minv)
    del(maxv)        
            #determine the objects  moments and check that the area is large  
            #enough to be our object
    moments = cv.Moments(cv.GetMat(thresholded_img,1), 0) 
    area = cv.GetCentralMoment(moments, 0, 0)

            #there can be noise in the video so ignore objects with small areas 

    if(area > 10000):

                #determine the x and y coordinates of the center of the object 
                #we are tracking by dividing the 1, 0 and 0, 1 moments by the area 
            x = cv.GetSpatialMoment(moments, 1, 0)/area 
            y = cv.GetSpatialMoment(moments, 0, 1)/area 
            del(moments)
            del(area)
                #print 'x: ' + str(x) + ' y: ' + str(y) + ' area: ' + str(area) 

                #create an overlay to mark the center of the tracked object 
            overlay = cv.CreateImage(cv.GetSize(imga), 8, 3) 

            cv.Circle(imga, (int(x), int(y)), 5, (255, 0, 0), 20) 
            cv.Add(imga, overlay, imga)
            del(overlay)
                #add the thresholded image back to the img so we can see what was  
                #left after it was applied 
            cv.Merge(thresholded_img, None, None, None, imga)

            print 'X: ',x
            print 'Y: ',y
            print ' '
            if x < 300:
                print "left"    
            if x > 340:
                print "Right"
            if y < 210:
                print "Up"
            if y > 250:
                print "Down"

            ser.write('%03i%03i\r\n'% (int(x),int(y))) 

    else:
            ser.write('%03i%03i\r\n'% (320,240)) 

    cv.ShowImage("CameraFeed", thresholded_img)
    cv.ShowImage("Altered", imga)
    del(imga)
    del(thresholded_img)

try:
    while True:
        repeat()
        if cv.WaitKey(10) == 13:
            break
except:
    cv.DestroyWindow("CameraFeed")
    cv.DestroyWindow("Altered")
    ser.close()
    traceback.print_exc()

cv.DestroyWindow("CameraFeed")
cv.DestroyWindow("Altered")
ser.close()
del(serial)
exit() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T21:09:37.373

这是 GetMat 的一个已知错误 -> [http://code.opencv.org/issues/1579](http://code.opencv.org/issues/1579)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:43:08.920

代码看起来正确（[例如如何做](http://luugiathuy.com/2011/02/setup-opencv-for-python/)）。不需要删除变量；返回时将全部删除`repeat()`。

我的猜测是您正在使用的 OpenCV 版本中存在错误。尝试不同的版本。如果行为发生在最新版本而不是旧版本中，请考虑报告错误。

# sql-server-2005 - SQL Server 2005 触发器更新远程服务器

> ID：10515464
> 
> 赞同：0
> 
> 时间：2012-05-09T11:49:08.227
> 
> 标签：sql-server-2005, triggers, msdtc

我创建了一个更新远程 SQL Server 2005 数据库表的触发器。如果它是手动查询，则代码可以工作，但不能在触发器中工作，因为它试图将其放在事务中并且由于 MSDTC 而失败。

我们的内部服务器对远程服务器有适当的访问权限，但是远程服务器没有对内部服务器的访问权限，这会导致触发器失败吗？

我得到的错误是：

> 链接服务器“LinkServer”的 OLE DB 提供程序“SQLNCLI10”返回消息“合作伙伴事务管理器已禁用其对远程/网络事务的支持。”。消息 7391，级别 16，状态 2，第 1 行 由于链接服务器“LinkServer”的 OLE DB 提供程序“SQLNCLI10”无法开始分布式事务，因此无法执行操作。

我已经查看了这个并按照建议设置了所有内容，但没有快乐？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:19:02.590

如果远程服务器因任何原因不可用怎么办？

您通常应该避免在触发器中执行超出*数据库*的任何操作，更不用说*服务器*了。问题是触发器中发生的所有事情都*必须*是原始事务的一部分，如果触发器中出现任何问题，该事务将被回滚。

通常，如果在到达远程资源时出现间歇性问题（可能是同一服务器/实例上的不同数据库，或者真正远程的东西），您通常不希望发生这种情况。

您是否考虑过将此活动与例如[Service Broker](http://msdn.microsoft.com/en-us/library/ms166043%28v=sql.90%29.aspx)脱钩？

# ios - 如何在 iOS 应用程序上实现 Apple 推送通知服务？

> ID：10515468
> 
> 赞同：3
> 
> 时间：2012-05-09T11:49:22.433
> 
> 标签：ios, xcode, push-notification, apple-push-notifications

是否有任何示例项目显示如何集成`APNS`，`IPhone`以及如何获取 deviceToken？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-09T12:08:20.403

您需要遵循几个简单的步骤：

1.  在您的应用程序委托的 didFinishLaunchingWithOptions 中，您应该注册远程通知。请注意，Apple 的文档建议在每次应用运行时进行注册，因为令牌可能会不时更改。你可以通过调用来做到这一点：

    ```
    [[UIApplication sharedApplication] registerForRemoteNotificationTypes:UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound]; 
    ```

2.  注册远程通知后，将调用您的应用程序委托中已传递令牌的方法，您需要在您的应用程序委托中实现此方法并将令牌发送到您的服务器（这将向您发送通知）。该方法将如下所示：

    ```
    - (void)application:(UIApplication *)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData *)deviceToken{

        NSLog(@"device token is: %@",deviceToken);
        [server sendToken:deviceToken];
    } 
    ```

你也应该实现这个：

```
 -(void)application:(UIApplication *)application didFailToRegisterForRemoteNotificationsWithError:(NSError *)error{} 
```

1.  收到通知后，您需要处理它们。处理接收到的通知的场景很少（应用程序在后台或前台等），如果应用程序在前台接收通知时处理通知的方法应该在应用程序委托中实现。就是这个：

    ```
    -(void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo{
        NSLog(@"received notification");
        //handle the notification here
    } 
    ```

要了解有关 userInfo 结构的更多信息并涵盖所有不同的场景，请仔细阅读[http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)。这只是事情的要旨:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-06-19T17:27:17.477

这是关于 - 如何在 iOS 中启用和发送推送通知的简要文档。

**启用推送通知**

设置推送通知的第一步是在 Xcode 8 中为您的应用启用该功能。只需转到目标的项目编辑器，然后单击 Capabilities 选项卡。查找 Push Notifications 并将其值切换为 ON：

[![在此处输入图像描述](../Images/47b9be21d07e15048d2f10dde1c7bba8.png)](https://i.stack.imgur.com/n1r9x.png)

**切换能力**

Xcode 应该显示两个复选标记，表明该功能已成功启用。在幕后，Xcode 在开发者中心创建一个 App ID 并为您的应用启用推送通知服务。

**注册设备**

需要唯一标识设备才能接收推送通知。

安装您的应用程序的每台设备都由 APN 分配一个唯一的设备令牌，您可以使用它在任何给定时间推送它。一旦设备被分配了一个唯一的令牌，它应该被保存在你的后端数据库中。

示例设备令牌如下所示：

```
5810F4C8C2AF5F7 F7 D6AF71A 22745D0FB50DED 665E0E882 BC5370D9CF0A F19E16 
```

要为当前设备请求设备令牌，请打开 AppDelegate.swift 并将以下内容添加到 didFinishLaunchingWithOptions 回调函数中，在 return 语句之前：

```
// iOS 10 support
if #available(iOS 10, *) {  
    UNUserNotificationCenter.current().requestAuthorization(options:[.badge, .alert, .sound]){ (granted, error) in }
    application.registerForRemoteNotifications()
}
// iOS 9 support
else if #available(iOS 9, *) {  
    UIApplication.shared.registerUserNotificationSettings(UIUserNotificationSettings(types: [.badge, .sound, .alert], categories: nil))
    UIApplication.shared.registerForRemoteNotifications()
}
// iOS 8 support
else if #available(iOS 8, *) {  
    UIApplication.shared.registerUserNotificationSettings(UIUserNotificationSettings(types: [.badge, .sound, .alert], categories: nil))
    UIApplication.shared.registerForRemoteNotifications()
}
// iOS 7 support
else {  
    application.registerForRemoteNotifications(matching: [.badge, .sound, .alert])
} 
```

在 iOS 10 中，引入了一个名为 UserNotifications 的新框架，必须导入该框架才能访问 UNUserNotificationCenter 类。

将以下导入语句添加到 AppDelegate.swift 的顶部：

```
import UserNotifications 
```

接下来，转到您的目标的项目编辑器，然后在 General 选项卡中，查找 Linked Frameworks and Libraries 部分。

单击 + 并选择 UserNotifications.framework：

[![在此处输入图像描述](../Images/0c4afab05826fb2dbfa131b4f2704af5.png)](https://i.stack.imgur.com/kQPQ5.png)

接下来，在 AppDelegate.swift 中添加以下回调，当 APNs 成功注册或注册设备以接收通知失败时将调用该回调：

```
// Called when APNs has assigned the device a unique token
func application(_ application: UIApplication, didRegisterForRemoteNotificationsWithDeviceToken deviceToken: Data) {  
    // Convert token to string
    let deviceTokenString = deviceToken.reduce("", {$0 + String(format: "%02X", $1)})

    // Print it to console
    print("APNs device token: \(deviceTokenString)")

    // Persist it in your backend in case it's new
}

// Called when APNs failed to register the device for push notifications
func application(_ application: UIApplication, didFailToRegisterForRemoteNotificationsWithError error: Error) {  
    // Print the error to console (you should alert the user that registration failed)
    print("APNs registration failed: \(error)")
} 
```

由您来实现将令牌保留在应用程序后端的逻辑。在本指南的后面部分，您的后端服务器将连接到 APN 并通过提供相同的设备令牌来发送推送通知，以指示哪些设备应该接收通知。

请注意，由于各种原因，设备令牌将来可能会更改，因此请使用本地键值存储 NSUserDefaults 将令牌保存在本地，并且仅在令牌更改时更新您的后端，以避免不必要的请求。

对 AppDelegate.swift 进行必要的修改后，在物理 iOS 设备上运行您的应用程序（iOS 模拟器无法接收通知）。查找以下对话框，然后按 OK 以允许您的应用接收推送通知：

**警报对话框**

在一两秒钟内，Xcode 控制台应该会显示您设备的唯一令牌。复制它并保存以备后用。

[![在此处输入图像描述](../Images/1ea78a0ea2cacf4e67e6dfc02342786e.png)](https://i.stack.imgur.com/6tWAa.jpg)

**准备接收通知**

在 AppDelegate.swift 中添加以下回调，当您的应用收到后端服务器发送的推送通知时将调用该回调：

```
// Push notification received
func application(_ application: UIApplication, didReceiveRemoteNotification data: [AnyHashable : Any]) {  
    // Print notification payload data
    print("Push notification received: \(data)")
} 
```

请注意，只有当用户单击或滑动以与锁定屏幕/通知中心的推送通知进行交互时，或者当设备收到推送通知时您的应用程序已打开时，才会调用此回调。

开发与通知交互时执行的实际逻辑取决于您。例如，如果您有一个消息应用程序，“新消息”推送通知应该打开相关的聊天页面并导致消息列表从服务器更新。在 messenger 应用示例中，使用数据对象，该对象将包含您从应用程序后端发送的任何数据，例如聊天 ID。

重要的是要注意，如果您的应用程序在收到推送通知时打开，用户将根本看不到通知，您可以通过某种方式通知用户。这个 StackOverflow 问题列出了一些可能的解决方法，例如显示类似于股票 iOS 通知横幅的应用内横幅。

**生成 APNs 身份验证密钥**

在开发者中心打开 APNs Auth Key 页面，然后单击 + 按钮创建一个新的[APNs Auth Key](https://developer.apple.com/account/ios/certificate/key)。

[![在此处输入图像描述](../Images/129c3c359f8011bc6afc0d68a639a44a.png)](https://i.stack.imgur.com/FSE22.png)

在下一页中，选择 Apple Push Notification Authentication Key (Sandbox & Production)，然后单击页面底部的继续。

[![在此处输入图像描述](../Images/e12c3d978c40624e76467511f9a4ba0d.png)](https://i.stack.imgur.com/poiOD.png)

然后，Apple 将生成一个`.p8`包含您的 APNs Auth Key 的密钥文件。

[![在此处输入图像描述](../Images/a6e056e9231a5e5febe19f9ae80bbd17.png)](https://i.stack.imgur.com/tu9xF.png)

将密钥文件下载`.p8`到您的计算机并保存以备后用。此外，请务必在某处写下密钥 ID，因为稍后连接 APN 时将需要它。

**发送推送通知**

现在，看这里就明白了，APNS 流程：[iOS Push Notifications 是如何工作的？](https://stackoverflow.com/questions/17262511/how-do-ios-push-notifications-work/44636812#44636812)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-05T05:29:50.607

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {
 // Register for Push Notitications, if running on iOS 8
if ([[[UIDevice currentDevice] systemVersion] floatValue] >= 8.0){
    [[UIApplication sharedApplication] registerUserNotificationSettings:[UIUserNotificationSettings settingsForTypes:(UIUserNotificationTypeSound | UIUserNotificationTypeAlert | UIUserNotificationTypeBadge) categories:nil]];
    [[UIApplication sharedApplication] registerForRemoteNotifications];
 }else{
    [application registerForRemoteNotificationTypes:(UIRemoteNotificationTypeAlert | UIRemoteNotificationTypeBadge | UIRemoteNotificationTypeSound)];
}
  return YES;
}
#pragma mark
#pragma mark -- Push Notification Delegate Methods
- (void)application:(UIApplication *)application didRegisterUserNotificationSettings:   (UIUserNotificationSettings *)notificationSettings{
//register to receive notifications
[application registerForRemoteNotifications];
}
-(void)application:(UIApplication*)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken{
// Prepare the Device Token for Registration (remove spaces and < >)
 NSString* devToken = [[[[deviceToken description]
              stringByReplacingOccurrencesOfString:@"<"withString:@""]
             stringByReplacingOccurrencesOfString:@">" withString:@""]
            stringByReplacingOccurrencesOfString: @" " withString: @""];
NSLog(@"My token is: %@", devToken);
}
-(void)application:(UIApplication*)application didFailToRegisterForRemoteNotificationsWithError:(NSError*)error{
//  NSLog(@"Failed to get token, error: %@", error);
}

- (void)application:(UIApplication *)application didReceiveRemoteNotification:(NSDictionary *)userInfo{
NSLog(@"%s..userInfo=%@",__FUNCTION__,userInfo);
/**
 * Dump your code here according to your requirement after receiving push
 */
 } 
```

# java - 在浏览器上实现显示shell脚本日志

> ID：10515472
> 
> 赞同：0
> 
> 时间：2012-05-09T11:49:27.353
> 
> 标签：java, shell, unix, jenkins

我有几个可以在 Unix 机器终端上运行的 shell 脚本。

我需要能够从浏览器运行这些并显示连续日志，例如 jenkins 如何更新构建日志输出。

关于如何实现这一点的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T15:11:25.733

根据脚本的复杂性，您可以简单地使用“构建自由风格的软件项目”设置 jenkins 作业，然后添加构建步骤“执行 shell”。然后，您可以在 shell 中添加您的命令。

如果您只希望手动执行各种命令，您还可以将此作业设置为参数化，例如使用字符串参数（名称 cmd）并执行 shell 可以包含 ${cmd} - 这将使您完全灵活。

# html - HTML 非 SGML 字符编号 3

> ID：10515474
> 
> 赞同：1
> 
> 时间：2012-05-09T11:49:29.960
> 
> 标签：html, w3c, w3c-validation

目前我将一个网站建立在 HTMl 中，但我遇到了一些我以前从未遇到过的错误。这是关于非 SGML 字符号 3。但问题是它表明我的空格是一个错误。我该如何解决这个问题？

网址：[http ://htmlhelp.com/cgi-bin/validate.cgi?url=http%3A%2F%2Frasure.nl%2Fvca%2F&warnings=yes&input=yes](http://htmlhelp.com/cgi-bin/validate.cgi?url=http%3A%2F%2Frasure.nl%2Fvca%2F&warnings=yes&input=yes)

我希望有人可以为我解决这个问题并有一个解决方案！

提前致谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T11:52:56.113

看起来你`0x03`之前有一个控制字符`<br/>`。使用十六进制编辑器查看源代码，您会看到：

```
0000260: 6464 6c65 4c65 6674 223e 0a09 0909 0909  ddleLeft">......
0000270: 0956 4341 2062 6173 6973 033c 6272 2f3e  .VCA basis.<br/>
0000280: 5643 4120 564f 4c0a 0909 0909 093c 2f64  VCA VOL......</d 
```

请注意(" ")`03`之前的右侧，`3c`(" " `<`) 之后的右侧。`62 61 73 69 73``basis`

# ruby-on-rails - 制作 RoR 教程时出现 RSpec 错误

> ID：10515476
> 
> 赞同：1
> 
> 时间：2012-05-09T11:49:30.507
> 
> 标签：ruby-on-rails, specifications

我在测试 RoR 教程中的代码时遇到错误，请帮助解决这些问题，清单如下。可能是 Gemfile 中规范的错误版本。

失败：

```
 1) PagesController GET 'home' should have the right title
     Failure/Error: response.should have_selector("title", :content => "Home")
     NoMethodError:
       undefined method `has_selector?' for #<ActionController::TestResponse:0x007fb3d4d2d108>
     # ./spec/controllers/pages_controller_spec.rb:14:in `block (3 levels) in <top (required)>'

  2) PagesController GET 'contact' should have the right title
     Failure/Error: response.should have_selector("title", :content => "Contact")
     NoMethodError:
       undefined method `has_selector?' for #<ActionController::TestResponse:0x007fb3d280b370>
     # ./spec/controllers/pages_controller_spec.rb:26:in `block (3 levels) in <top (required)>'

  3) PagesController GET 'about' should have the right title
     Failure/Error: response.should have_selector("title", :content => "About")
     NoMethodError:
       undefined method `has_selector?' for #<ActionController::TestResponse:0x007fb3d2b96e90>
     # ./spec/controllers/pages_controller_spec.rb:38:in `block (3 levels) in <top (required)>'

  4) PagesController GET 'help' should have the right title
     Failure/Error: response.should have_selector("title", :content => "Help")
     NoMethodError:
       undefined method `has_selector?' for #<ActionController::TestResponse:0x007fb3d28a19d8>
     # ./spec/controllers/pages_controller_spec.rb:50:in `block (3 levels) in <top (required)>'

Finished in 0.1005 seconds
8 examples, 4 failures

Failed examples:

rspec ./spec/controllers/pages_controller_spec.rb:12 # PagesController GET 'home' should have the right title
rspec ./spec/controllers/pages_controller_spec.rb:24 # PagesController GET 'contact' should have the right title
rspec ./spec/controllers/pages_controller_spec.rb:36 # PagesController GET 'about' should have the right title
rspec ./spec/controllers/pages_controller_spec.rb:48 # PagesController GET 'help' should have the right title 
```

宝石文件：

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'

gem 'sqlite3'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

group :test, :development do
  gem "rspec-rails", "~> 2.10.1"
end 
```

pages_controller_spec.rb 清单：

```
require 'spec_helper'

describe PagesController do
  render_views

  describe "GET 'home'" do
    it "should be successful" do
      get 'home'
      response.should be_success
    end

    it "should have the right title" do
      get 'home'
      response.should have_selector("title", :content => "Home")
    end
  end

  describe "GET 'contact'" do
    it "should be successful" do
      get 'contact'
      response.should be_success
    end

    it "should have the right title" do
      get 'contact'
      response.should have_selector("title", :content => "Contact")
    end
  end

  describe "GET 'about'" do
    it "should be successful" do
      get 'about'
      response.should be_success
    end

    it "should have the right title" do
      get 'about'
      response.should have_selector("title", :content => "About")
    end
  end

  describe "GET 'help'" do
    it "should be successful" do
      get 'help'
      response.should be_success
    end

    it "should have the right title" do
      get 'help'
      response.should have_selector("title", :content => "Help")
    end
  end
end 
```

我不明白出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:11:03.963

如果你不想使用 webrat，你可以使用

```
response.body.should include 'Contact</h1>' 
```

而不是

```
response.should have_selector("title", :content => "Contact") 
```

我同意，这有点不干净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T22:13:26.083

重新编辑您的 GEMFILE 并输入

```
gem 'webrat' 
```

接着

类型

```
bundle install 
```

# php - 如何使用来自谷歌的外部托管 jquery 覆盖核心 jquery 文件

> ID：10515477
> 
> 赞同：6
> 
> 时间：2012-05-09T11:49:34.660
> 
> 标签：php, jquery, yii, google-api

在 Yii 中，目前 jquery 的所有依赖项都在加载 jquery 的本地版本，我相信它是 1.6.*，未缩小。

类似于以下内容：

```
<script src="/assets/2343/js/jquery.js"></script> 
```

我想更新核心 jquery 依赖以使用[google的 jquery 1.7.*](https://developers.google.com/speed/libraries/devguide)

基本上我想包括

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"> 
```

每当 jquery 是依赖项时，在我所有页面的底部。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-05-09T12:07:37.363

经过更多的谷歌搜索和环顾四周，我找到了答案：

在配置中，在“组件”下

```
'clientScript'=>array(
  'packages'=>array(
    'jquery'=>array(
      'baseUrl'=>'http://ajax.googleapis.com/ajax/libs/jquery/',
        'js'=>array('1.7.2/jquery.min.js'),
      )
    ),
  ),
), 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-05-09T12:25:35.937

[在 yii 的文档中](http://www.yiiframework.com/doc/guide/1.1/en/topics.performance#minimizing-script-files)还看到了另一种方法：

> 例如，我们可以包含来自 Google 服务器而不是我们自己的服务器的 jquery.js。为此，我们首先将 scriptMap 配置如下，

```
$cs=Yii::app()->clientScript;
$cs->scriptMap=array(
 'jquery.js'=>false,
 'jquery.ajaxqueue.js'=>false,
 'jquery.metadata.js'=>false,
 ......
); 
```

> 通过将这些脚本文件映射为 false，我们可以防止 Yii 生成包含这些文件的代码。相反，我们在页面中编写以下代码以明确包含来自 Google 的脚本文件，

```
<head>
<?php echo CGoogleApi::init(); ?>

<?php echo CHtml::script(
 CGoogleApi::load('jquery','1.3.2') . "\n" .
 CGoogleApi::load('jquery.ajaxqueue.js') . "\n" .
 CGoogleApi::load('jquery.metadata.js')
 );
?>
......
</head> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T09:13:47.397

第一次谷歌点击：[http ://www.yiiframework.com/wiki/259/serve-jquery-and-jquery-ui-from-google-s-cdn/](http://www.yiiframework.com/wiki/259/serve-jquery-and-jquery-ui-from-google-s-cdn/)

除了覆盖 clientScript 配置，您可能还想覆盖 widgetFactory 配置：

```
 <?php
  return array(
  // other config
  'components'=>array(
    'clientScript'=>array(
      'packages'=>array(
        'jquery'=>array(
          'baseUrl'=>'//ajax.googleapis.com/ajax/libs/jquery/1/',
          'js'=>array('jquery.min.js'),
        )
      ),
      // other clientScript config
    ),
    'widgetFactory'=>array(
      'widgets'=>array(
        'CJui<WidgetName>'=>array( // where <WidgetName> is the name of the JUI Widget (Tabs, DatePicker, etc.). Each CJuiWidget used must be declared
          'scriptUrl'=>'//ajax.googleapis.com/ajax/libs/jqueryui/1/',
          'theme'=>JUI-THEME,
          'themeUrl'=>'//ajax.googleapis.com/ajax/libs/jqueryui/1/themes/',
        ),
        // Repeat for other CJuiWidgets
      ),
    ),
    // other component config
  ),
  // other config
); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-09T02:43:19.170

我知道，这个线程相当古老。但由于我刚刚有一个 encoutner，我认为提及这一点很重要。

在 Yii 的最新版本中，我从 1.1.11 快速转发到当前版本，包机制不仅实现了，而且得到了改进。它以前存在，但现在它实际上已经到了一个点，最初声明和勾选的将 jquery 部分设置为的方法`false`将不再起作用。不过，我发现了如何解决它！

```
$cs->packages["jquery"] = [
    "basePath"=>Yii::app()->cdn->basePath,
    "baseUrl"=>Yii::app()->cdn->baseUrl,
    "js"=>["js/jquery-1.11.1.js"]
]; 
```

这直接取自我的代码，但说明了我是如何做到的。基本上，我在包列表中添加了一个 jQuery 条目。当 Core 脚本被解析时，这个列表在实际的 CoreScripts*之前被搜索。*因此，这将首先被选中，您可以通过这种方式添加您的个人版本的 jQuery。

我希望它有帮助！

# objective-c - 在下载多个文件之前检查文件大小

> ID：10515479
> 
> 赞同：0
> 
> 时间：2012-05-09T11:49:39.883
> 
> 标签：objective-c, ios, nsurlconnection, uiprogressview

我目前正在将更新功能实现到我正在构建的应用程序中。它使用 NSUrlConnection 和 NSURLConnectionDelegate 下载文件并将它们保存到用户设备。

目前，1 个更新项下载多个文件，但我想使用 1 个 UIProgressView 显示多个文件的下载。所以我的问题是，我如何获得我要下载的所有文件的预期内容长度？我知道我可以获得传递给 didReceiveResponse 方法的 NSURLResponse 对象的 expectedContentLength ，但这仅适用于正在下载的文件。

任何帮助深表感谢。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:03:10.633

在您的服务器上拥有某种信息文件怎么样，它实际上为您提供了总字节数。您可以先加载它，然后再加载文件。然后，您可以从总量中减去每个文件的加载量。

另一种方法是首先连接到所有文件，并在收到响应后取消连接。添加所有文件的预期字节，然后将其用作在加载文件时显示总进度的基础。

#1 的缺点：您必须手动跟踪字节。

#2 的缺点：您将收到双倍的请求，即使它们在响应后被取消。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:06:40.700

使用广泛用于此目的的 ASIhttp 开源框架，在这里你只需要设置 progressview 委托..所以它会不断更新你的进度视图

试试这个 [http://allseeing-i.com/ASIHTTPRequest/](http://allseeing-i.com/ASIHTTPRequest/)

# objective-c - 为通用应用程序加载 nib 文件

> ID：10515481
> 
> 赞同：0
> 
> 时间：2012-05-09T11:49:44.093
> 
> 标签：objective-c, ios, cocoa-touch, nib

我是一个通用应用程序，如何以编程方式创建和加载 nib 文件？如何连接新 nib 文件中的对象插座？或者每次我必须检查设备是 iPhone 还是 iPad 并相应地放置对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:56:11.203

You need to create separate xib for iPhone and iPad, like- ViewA, ViewA~iPad and you have to load conditionally-

```
ViewA *myView;
if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
     myView = [[ViewA alloc] initWithNibName:@"ViewA" bundle:nil];
}
else {
    myView = [[ViewA alloc] initWithNibName:@"ViewA~iPad" bundle:nil];
} 
```

If you want to create some view programatically, then you have to deal with their frames using the same if-else conditions.

# html - how to apply style to 'title' attribute of 'td' tag

> ID：10515490
> 
> 赞同：7
> 
> 时间：2012-05-09T11:50:07.353
> 
> 标签：html, css

I have the following code with me, and would like to customize the style of the 'title' attribute. Is there any way to do it. Thanks in advance.

```
<td title="Sample Title">test</td> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-24T15:14:33.287

This may not have been possible many years ago - but now yes you can style the Title attribute, See [here](http://www.css3.info/tooltips-with-css3/) . This should work in IE7+, Safari 3+, Firefox 2.0+.

Some custom styling and positioning may be required to suite your own design.

Just to make sure this link does not go dead, the suggested code in this article to style the title attribute is:

```
<div title="Tooltip text for first div"></div> <div title="Tooltip text for second div"></div>

div:before{ content:attr(title); display:none; }

div:hover::before{ width:200px; display:block; background:yellow; border:1px solid black; padding:8px; margin:25px 0 0 10px; }

div:hover{ z-index:10; position:relative; } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-09T11:52:57.587

Not directly.

You can do it with:

*   JavaScript code: [see here](http://sixrevisions.com/tutorials/javascript_tutorial/create_lightweight_javascript_tooltip/)

*   a library: [see here](http://bassistance.de/jquery-plugins/jquery-plugin-tooltip/)

*   a little workaround with CSS [see here](http://sixrevisions.com/css/css-only-tooltips/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-04-12T09:54:55.047

This won't style the TD but it's a quick work around that may be what you're looking for:

```
<td><a title="Sample Title">test</a></td> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T11:52:24.043

In short, you cannot style the `title` attribute. Its up to the browser how the title is rendered when displayed.

However, jQuery provides javascript alternatives which should give you the solution you are after:

[http://jquery.bassistance.de/tooltip/demo/](http://jquery.bassistance.de/tooltip/demo/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T11:52:20.097

No. Different browsers display the title tooltip differently, and there is no way to style it using css. If you must style it, you need to look for an alternative, such as using [jQuery to display custom tooltips](http://bassistance.de/jquery-plugins/jquery-plugin-tooltip/).

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T11:52:48.740

The "title" attribute is supported by the browser, typically as a tooltip. There is no standard way with CSS to format that popup.

I'd suggest that if you have a requirement for a specially formatted tooltip that you use the onmouseover() attribute and generate the popup yourself. As others have pointed out, you could use jQuery, if you want to add support for that to your code. For a lighter-weight solution than jQuery, see [SkinnyTip](http://www.ebrueggeman.com/skinnytip)

# c# - HTML 字符串编码

> ID：10515492
> 
> 赞同：0
> 
> 时间：2012-05-09T11:50:10.677
> 
> 标签：c#, mvchtmlstring

我需要在不使用 introp dll 的情况下从 C# 导出 ppt。我能够做到这一点，但是当我`"<b>Krishna</b><br/><strong>Ram</strong>"`在任何幻灯片中附加一些 HTML 字符串时，它显示的是相同的文本，而不是呈现的文本。有什么可以帮助我的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:50:46.450

看来PPT目前不支持直接在PPT中进行HTML渲染。您必须将幻灯片放映导出为 HTML，或使用内置格式，如对以下问题的回答所示：[以编程方式将字体格式应用于 PowerPoint 文本](https://stackoverflow.com/questions/965551/apply-font-formatting-to-powerpoint-text-programatically)。

```
Set tr = ActiveWindow.Selection.SlideRange.Shapes(1).TextFrame.TextRange
        With tr
            .Text = "Hi There Buddy!"
            .Words(1).Font.Bold = msoTrue 
```

有关 C# 和 Office 2010 中的设置的想法，请参见[Font Members](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.powerpoint.font_members.aspx)。

您应该能够自己测试我的断言，通过使用[HttpServerUtility.HtmlEncode 方法](http://msdn.microsoft.com/en-us/library/w3te6wfz.aspx)对文本进行 HTML 编码：

> `String TestString = "This is a <Test String>.";`
> 
> `String EncodedString = Server.HtmlEncode(TestString);`

# iphone - iPhone中的字符串到日期转换

> ID：10515493
> 
> 赞同：1
> 
> 时间：2012-05-09T11:50:12.627
> 
> 标签：iphone, nsdate, nsdateformatter

我从这里参考了以前的例子。但是空值仍然存在问题。

字符串值为 :==> strDate = "09-05-2012 00:00:00"

我希望输出为：==> 2012 年 5 月 9 日

我的代码：

```
NSString *strDateFormat;//[strDate substringWithRange:NSMakeRange(0, 10)];
strDateFormat = [NSString stringWithFormat:@"%@", strDate];

NSDateFormatter *df = [[NSDateFormatter alloc] init];

NSDate *disDate = [df dateFromString:strDateFormat];
[df setDateFormat:@"MMM dd, yyyy"];

strDateFormat = [df stringFromDate:disDate];

lblDate.text = [NSString stringWithFormat:@"%@", strDateFormat];

[df release]; 
```

它给出（空）值。因为 disDate 具有 (null) 值。

为什么 disDate 设置为零..？任何解决方案..？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T11:57:56.303

```
-(NSString*)getStringWithFormat:(NSString*)pStrDate fromFormat:(NSString*)pFromFormat toFormat:(NSString*)pToFormat
{
    NSDateFormatter *dtFormatter = [[[NSDateFormatter alloc] init] autorelease];
    [dtFormatter setDateFormat:pFromFormat];
    NSDate *fromFormatDate = [dtFormatter dateFromString:pStrDate];
    [dtFormatter setDateFormat:pToFormat];
    return [dtFormatter stringFromDate:fromFormatDate];
} 
```

并这样称呼它

```
NSString *strDate = [self getStringWithFormat:@"09-05-2012 00:00:00" fromFormat:@"dd-MM-yyyy HH:MM:SS" toFormat:@"MMM dd, yyyy"]; 
```

这是通用功能，您可以将其用于任何格式，只需在参数中传递该格式即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T12:02:30.090

您还必须告诉格式化程序在读取字符串时期望什么格式。

```
NSString *string = @"09-05-2012 00:00:00";
NSDateFormatter *formatter = [[[NSDateFormatter alloc] init] autorelease];
[formatter setDateFormat:@"yyyy-MM-dd HH:mm:ss"];
NSDate *date = [formatter dateFromString:string];
[formatter setDateFormat:@"MMM dd, yyyy"];
NSString *formattedString = [formatter stringFromDate:date]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T11:52:32.983

你还没有设置格式化程序模式

```
 NSDateFormatter *df = [[NSDateFormatter alloc] init];
    [df setFormatterBehavior:NSDateFormatterBehavior10_4];
    [df setDateFormat:@"MMM dd, yyyy"];
    NSDate *convertedDate = [df dateFromString:origDate];
    [df release]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T11:54:14.177

```
NSString *strDateFormat; //[strDate substringWithRange:NSMakeRange(0, 10)];

strDateFormat = [NSString stringWithFormat:@"%@", strDate];

NSDateFormatter *df = [[NSDateFormatter alloc] init];

[df setDateFormat:@"MMM dd, yyyy"];
 // ###### Set dateformat also here according to strDateFormat 

NSDate *disDate = [df dateFromString:strDateFormat];

[df setDateFormat:@"MMM dd, yyyy"];

strDateFormat = [df stringFromDate:disDate];

lblDate.text = [NSString stringWithFormat:@"%@", strDateFormat];

[df release]; 
```

# java - 谁能告诉我为什么所有 Rects 都会触发相同的 Activity

> ID：10515504
> 
> 赞同：0
> 
> 时间：2012-05-09T11:50:49.613
> 
> 标签：java, android

* *MyImage 类扩展视图并实现 ontouchListener ** `enter code here`

公共类 MyImage 扩展视图实现 OnTouchListener {

```
Bitmap orignal;
Bitmap scaled;
Matrix m;
Context ctext;
ArrayList<Rect> rect; 
```

**我有四个矩形，所有矩形都用于移动到 diff diff Activity** Rect rectangle0; 矩形矩形1；矩形矩形2；矩形矩形3; 矩形矩形4；私人 int X_POSITION; 私人int Y_POSITION；

```
public MyImage(Context context) {
    super(context);

    ctext = context;

}

@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    // TODO Auto-generated method stub
    super.onMeasure(widthMeasureSpec, heightMeasureSpec);

}

@Override
public View findFocus() {
    // TODO Auto-generated method stub
    return super.findFocus();
}

@Override
public boolean isPressed() {
    // TODO Auto-generated method stub
    return super.isPressed();

}

@Override
public boolean isSelected() {
    // TODO Auto-generated method stub
    return super.isSelected();

}

@Override
public boolean onTouchEvent(MotionEvent event) {

     X_POSITION = (int)event.getX();
     Y_POSITION = (int)event.getY();

    System.out.println(X_POSITION + "\t" +Y_POSITION); 
```

**这里发生的问题我不知道为什么所有矩形都会触发相同的活动以及如何解决它以便所有矩形触发不同的活动**

```
 switch (event.getAction()) {

    case MotionEvent.ACTION_DOWN:

        Intent i = new Intent(ctext , SelecterImage.class);
        ctext.startActivity(i);

    } 
```

返回真；

```
}

@Override
public void onDraw(Canvas canvas) {
    Paint paint = new Paint();

    int X_WIDTH = canvas.getWidth();
    int Y_HEIGHT = canvas.getHeight() / 2;

    System.out.println(X_WIDTH + "\n" + Y_HEIGHT);

    Paint rectanglePaint = new Paint();
    rectanglePaint.setARGB(255, 0, 0, 0);
    rectanglePaint.setStrokeWidth(2);
    rectanglePaint.setColor(Color.BLUE);

    rectangle0 = new Rect(10, 420, 60, 380);
    rectangle1 = new Rect(70, 420, 120, 380);

    rectangle2 = new Rect(130, 420, 180, 380);
    rectangle3 = new Rect(190, 420, 240, 380);
    rectangle4 = new Rect(250, 420, 300, 380);

    canvas.drawRect(rectangle0, rectanglePaint);

    canvas.drawRect(rectangle1, rectanglePaint);

    canvas.drawRect(rectangle2, rectanglePaint);

    canvas.drawRect(rectangle3, rectanglePaint);

    canvas.drawRect(rectangle4, rectanglePaint);

    scaled = Bitmap.createScaledBitmap(orignal, X_WIDTH, Y_HEIGHT, false);

    canvas.drawBitmap(scaled, 0, 0, paint);

}

void setBitmap(Bitmap bitmap) {
    // TODO Auto-generated method stub

    orignal = bitmap;

}

@Override
public boolean onTouch(View v, MotionEvent event) {
    return false;
    // TODO Auto-generated method stub

}   

} 
```

**强文本**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:27:02.377

首先确保 onTouchEvent 正常工作（实际上会像你一样返回 X 和 Y），然后

```
@Override 
public boolean onTouchEvent(MotionEvent event) { 

    X_POSITION = (int)event.getX(); 
    Y_POSITION = (int)event.getY(); 

    if (event.getAction == MotionEvent.ACTION_DOWN)
    {
        if (rectangle0.contains(X_POSITION,Y_POSITION))
        {
           Intent i = new Intent(ctext , Activity1.class); 
           ctext.startActivity(i); 
        }
        else if (rectangle1.contains(X_POSITION,Y_POSITION))
        {
           Intent i = new Intent(ctext , Activity2.class); 
           ctext.startActivity(i); 
        }

        ....

    } 
} 
```

# asp.net-mvc - 如何在 MVC 中使用 EF 克隆 Entity 对象及其所有关联的实体值

> ID：10515515
> 
> 赞同：2
> 
> 时间：2012-05-09T11:51:16.470
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, linq-to-entities, clone

我有一个与其他实体具有“一对多”关联的实体“玩家”。当我克隆我的 Player 行之一时，与 Player 关联的实体不会被克隆。但 Player 数据行被克隆。我也需要关联值来克隆。我怎样才能做到这一点？

这是我的存储库中的代码

```
public Player CreateTemplate(Player player)
{
db.Detach(player);
Player.EntityKey = null;
db.AddToPlayer(player);
db.SaveChanges();
return player;
} 
```

这是我的动作方法：

```
public ActionResult CreatePlayerTemplate(int id)
{
var player = MyRepository.GetPlayerdByID(id);
MyRepository.CreateTemplate(player);
return View();
} 
```

更新：这是我检索的方式`Player`：

```
 public Player GetPlayerByID(int id)
    {
        return db.Player.SingleOrDefault(x => x.Id == id);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T11:56:42.540

您还需要分离所有关联的实体，因为上面的分离方法只分离播放器。

您还需要确保将这些实体中的每一个的 PK 清空，以确保您不会执行重复的密钥插入

```
public Player CreateTemplate(Player player)
{
   db.Detach(player);
   foreach(var thing in player.Things)
   {
      context.Detach(thing);
      thing.EntityKey = null;
   }
   Player.EntityKey = null;
   db.AddToPlayer(player);
   db.SaveChanges();
   return player;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T12:49:28.277

替代的，有点老套的方法 - 使用映射工具，如[AutoMapper](http://automapper.org/)

为参与克隆的每个实体定义自映射，并配置为忽略实体键

```
Mapper.CreateMap<Player, Player>()
.ForMember(x => x.EntityKey, y => y.Ignore());

Mapper.CreateMap<SomeOtherEntity, SomeOtherEntity>()
.ForMember(x => x.EntityKey, y => y.Ignore()); 
```

然后只是克隆实体

```
var clonnedPlayer = Mapper.Map<Player>(originalPlayer); 
```

此外，通过这种方式，您可以配置不克隆类似查找的表以不复制查找数据

# c - 在没有 LD_PRELOAD 的情况下在用户级别拦截系统调用

> ID：10515517
> 
> 赞同：0
> 
> 时间：2012-05-09T11:51:21.047
> 
> 标签：c, linux, gcc, x86-64, system-calls

在我的程序中，我想在同一进程中拦截用户级别的每个系统调用（我不想使用单独的进程，例如`ptrace`或工具`strace`）。我也不想使用 LD_PRELOAD。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T12:11:21.070

Use C macros. It works like this:

1.  Create a header file which defines a macro for each system call that you want to track. Example: `open()`

    ```
    #define open(path,flags,mode)  mySpecialOpen(path,flags,mode) 
    ```

2.  Create a library which contains the `mySpecial*()` functions which forward the calls to the syscall. Compile the library without the header file.

3.  Compile your code (and all libraries that you use) with the header file above. Link with the library.

# java - 如何配置nutch 1.4？

> ID：10515521
> 
> 赞同：1
> 
> 时间：2012-05-09T11:51:42.673
> 
> 标签：java, nutch

我正在使用此命令来抓取一些 URL：

```
./bin/nutch crawl urls/urls -dir crawl -depth 2 
```

它显示以下错误：

```
Could not find or load main class org.apache.nutch.crawl.Crawl 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-11T03:04:26.053

见这里[http://www.params.me/2011/07/apache-nutch-13-setup.html](http://www.params.me/2011/07/apache-nutch-13-setup.html)

这些步骤对我有用。如果您遇到任何问题，请告诉我。

# iphone - 在电子邮件正文中附加 NSMutableArray 数据？

> ID：10515522
> 
> 赞同：0
> 
> 时间：2012-05-09T11:51:50.157
> 
> 标签：iphone, ios, xcode, nsmutablearray, mfmailcomposeviewcontroller

我是 Iphone 编程新手。我的数组存储 UIlabel 以及属性。对于 Exp、Text、TextColor、背景颜色等。现在我想在电子邮件正文中发送所有数组数据。这是我的代码。

```
 NSUserDefaults *userDefault=[NSUserDefaults standardUserDefaults];
    NSData *myDecodedObject = [userDefault objectForKey: [NSString 
            stringWithFormat:@"sample"]];
    NSArray *arr= [[NSArray alloc] init];
    arr= [NSKeyedUnarchiver unarchiveObjectWithData:myDecodedObject]; 
    NSString *string = [arr componentsJoinedByString:@"\n"];
    NSString *emailBody = string;
    NSLog(@"Testing %@", string);
    [mailer setMessageBody:emailBody isHTML:NO];
    [self presentModalViewController:mailer animated:YES];
    [mailer release]; 
```

我的数组显示存储在其中的所有对象并显示字节。此时我的数组包含 5 个 UIlabel。现在我想在电子邮件正文中发送所有这些 UIlabel。但是 NSLog 我看到了这个。

测试UILabel：0x8123760；帧 = (135.5 136; 99 30); 文本 = 'Fddddddddddddddsaafgghjkl ...'; clipsToBounds = YES; 隐藏=是；层=CALayer：0x8161590

UILabel: 0x81619b0; 帧 = (148 323; 69 15); 文本 = 'Xxxxxxxxxxx'; clipsToBounds = YES; 层=CALayer：0x8161a50

UILabel: 0x8161b70; 帧 = (140 341; 56 19); 文本 = 'Xxxxxxx'; clipsToBounds = YES; 层=CALayer：0x81618f0

UILabel: 0x8161d70; 帧 = (69.5 121.5；99 145)；文本 = 'Fddddddddddddddsaafgghjkl ...'; clipsToBounds = YES; 隐藏=是；层=CALayer：0x8161e00

UILabel: 0x8161f10; 帧=（108 321；99 145）；文本 = 'Fddddddddddddddsaafgghjkl ...'; clipsToBounds = YES; 层=CALayer：0x8161f80

未在电子邮件中看到任何数据。所以请建议在电子邮件中发送数组数据的最佳方法是什么。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T11:55:16.680

使用 MFmailComposer 的 addDataAttachements 方法从数组中添加数据

```
 NSData *data = [NSKeyedArchiver archivedDataWithRootObject:arr1];
       NSLog(@"Testing %@", data);
      [controller addAttachmentData:data mimeType:@"application/octet-stream";  
      fileName:nil] 
```

# jquery - Internet Explorer 未加载 js 文件

> ID：10515523
> 
> 赞同：1
> 
> 时间：2012-05-09T11:51:52.617
> 
> 标签：jquery, html, internet-explorer

我在一家在多个国家设有部门的公司工作。在我们当地的部门，我们可以将自己的东西放在网站上，但有很多限制。我在 html 和 jquery 中创建了一个订单表格，所有内容都在一个文件中。当我在 Internet Explorer、Opera 或 Firefox 中从 C:\ 运行此文件时，它完全可以正常工作。

输入对我们本地网站施加的限制：我不能在 html 页面中输入超过 20 000 个字符。我在我们的本地网站上测试了表单的早期版本，它可以工作，它包含 html 和 jquery，但它远低于 20 000 个字符。现在，仅 HTML 部分就有 15 000 个字符，而 jquery 有 75 000 个字符。因此，将 HTML 和 javascript 放在单独的文件中是有意义的。

输入另一个限制：我无法将 .js 文件上传到我们的本地服务器。我想我可以说服总部的人让我这样做，但要说服他们需要一些时间。同时我想找到一些解决方法来发布一个功能表单，这样我们的客户就可以开始试用订单表单，当他们看到一个工作演示时，更容易说服总公司。

[https://gist.github.com/](https://gist.github.com/)是一个任何人都可以输入一些 javascript 并制作可访问的 javascript 的地方。我首先在 Opera 上进行了尝试，它成功了，但由于某种原因，它在 Internet Explorer 中无法正常工作。我尝试了很多不同的东西，直到我最终创建了一个像这样的完全基本的 HTML 页面（插入一个头部以使其在浏览器中工作）：

```
<HTML>
<body>
<style type="text/css">
</style>
  <SCRIPT src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"     type="text/javascript"></SCRIPT>

  <FORM enctype="application/x-www-for m-urlencoded" NAME="orderForm" id="orderForm"    ACTION="" METHOD="get">
  <input type="button" id="TestButton" onclick="TestFunction()" value="some value">
<SCRIPT  src="https://raw.github.com/gist/2643863/30916820b71be3f9b89ad41ef060a2dd784b620e/VerySimpleTest.js" type="text/javascript"></SCRIPT>
<!--SCRIPT src="simpleSCRIPTtest.js"></SCRIPT-->
</form>
</body>
</HTML> 
```

我在本地访问 .js 文件和从 Gist 页面之间交替访问，因此是注释的 SCRIPT 行。脚本是这样的：

```
function TestFunction() {
  alert("This works!");
} 
```

在 Opera 中，它在本地和 Gist 都可以正常工作。在本地加载脚本时，它在 IE 中运行良好，但是当我尝试使用 Gist 页面作为脚本源并按下按钮时，我收到错误消息“属性 'TestFunction' 的值为 null 或未定义，而不是函数对象”。

如果由我决定，我会告诉我们所有的客户使用 Opera 或 Chrome，但恐怕这不是一个选择。有谁知道为什么这在 IE 中不起作用？如果是这样，是否知道如何创建一个我的 HTML 页面可以访问的外部 .js 文件，该文件适用于 IE、Opera、Chrome 和 Firefox？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:58:27.223

我们看不到文档类型，因此如果这不是 HTML5，则需要在 simpleSCRIPTtest.js 的脚本标签中包含 type="text/javascript" 属性。

# c# - 如何限制组合框添加重复值？

> ID：10515527
> 
> 赞同：1
> 
> 时间：2012-05-09T11:52:14.483
> 
> 标签：c#

我有一个用于向组合框添加值的类（一个用于显示，另一个用于隐藏）

```
public class ComboBoxItem
    {
        string displayValue;
        string hiddenValue;

    //Constructor
    public ComboBoxItem(string displayVal, string hiddenVal)
    {
        displayValue = displayVal;
        hiddenValue = hiddenVal;
    }

    //Accessor
    public string HiddenValue
    {
        get
        {
            return hiddenValue;
        }            
    }
    //Override ToString method
    public override string ToString()
    {
        return displayValue;
    } 
```

使用此类我将值添加到组合框

```
cmbServerNo.Items.Add(new ComboBoxItem(strIPAddress, iConnectionID.ToString())); 
```

但我想限制我使用以下方法的重复值

```
foreach (KeyValuePair<int, Object> ikey in m_lstConnectionID)
            {
                if (!cmbServerNo.Items.Contains(strIPAddress))
                {
                    cmbServerNo.Items.Add(new ComboBoxItem(strIPAddress, iConnectionID.ToString()));
                }
            } 
```

但它猜它添加了 strIpAddress 和 ConnectionID 所以当我检查它包含它时失败。如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T11:59:57.453

您可以使用 LINQ 的`Any`扩展方法：

```
if (!cmbServerNo.Items.Any(x => x.ToString() == strIPAddress))
{
    cmbServerNo.Items.Add(new ComboBoxItem(strIPAddress,
                                           iConnectionID.ToString()));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:38:52.633

您可以使用 HashSet ( [MSDN](http://msdn.microsoft.com/en-us/library/bb359438.aspx) )

```
HashSet<String> items = new HashSet<String>();
foreach (KeyValuePair<int, Object> ikey in m_lstConnectionID)
            {
                if (!items.Contains(strIPAddress))
                {
                    items.Add(strIPAddress);
                    cmbServerNo.Items.Add(new ComboBoxItem(strIPAddress, iConnectionID.ToString()));
                }
            } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T12:58:47.587

如果要使用`Items.Contains`ListBox 或 ComboBox 中的函数，对象需要实现`IEquatable`接口。

像这样的东西：

```
public class ComboBoxItem : IEquatable<ComboBoxItem> {
  // class stuff

  public bool Equals(ComboBoxItem other) {
    return (this.ToString() == other.ToString());
  }

  public override bool Equals(object obj) {
    if (obj == null)
      return base.Equals(obj);

    if (obj is ComboBoxItem)
      return this.Equals((ComboBoxItem)obj);
    else
      return false;
  }

  public override int GetHashCode() {
    return this.ToString().GetHashCode();
  }
} 
```

现在`Items.Contains`应该像这样工作：

```
// this should be added:
ComboBoxItem addItem = new ComboBoxItem("test", "test item");
if (!cb.Items.Contains(addItem)) {
  cb.Items.Add(addItem);
}

// this should not be added:
ComboBoxItem testItem = new ComboBoxItem("test", "duplicate item");
if (!cb.Items.Contains(testItem)) {
  cb.Items.Add(testItem);
} 
```

# jsf-2 - 如何从 Rich:orderingList 中获取选定的值？

> ID：10515530
> 
> 赞同：2
> 
> 时间：2012-05-09T11:52:20.583
> 
> 标签：jsf-2, richfaces

我正在使用 Richfaces 4，并尝试获取丰富的选定项目：orderingList。我想要这些，以便我可以通过按下“删除”按钮将它们从列表中删除。所以因为我有这个：

```
<rich:orderingList id="categoriesList" listHeight="100px"
    listWidth="300px" value="#{selectionBean.availableCategories}"
    selection="${selectionBean.selectedCategories}"
    valueChangeListener="#{selectionBean.takeSelection}" >
    <a4j:ajax event="click" render="categoriesList" execute="@this" />
</rich:orderingList> 
```

以及 @ViewScoped 支持 bean 中的函数，我从这里[https://community.jboss.org/message/561295](https://community.jboss.org/message/561295)改编：

```
private List<String> availableCategories;

private List<String> selectedCategories;

...............................

public void takeSelection(AjaxBehaviorEvent event) {
    System.out.println("ABE In takeSelection...");

    System.out.println(" Trying to find component with offering elements...");
    UIComponent component = event.getComponent();
    System.out.println(" Found: " + (component == null ? "<null>" : (component.getClass().getName() + " - " + component.getId())));
    if(component != null) {
        System.out.println( " Component that fired the event: " + component.getClass().getSimpleName() + " - " + component.getId());
        UIOrderingList orderingList = (UIOrderingList) component;

        System.out.println(" selectedCategories are "+ selectedCategories);
    }
    System.out.println(type + " Leaving takeSelection");
} 
```

问题是当我单击列表选择一个项目时，虽然我看到发送了一个 Ajax 请求，但 selectedCategories 列表没有更新，也没有调用 takeSelection 方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T21:11:01.893

几个问题，以便更好地理解您的问题。

这样做的目的是什么：

```
<a4j:ajax event="click" render="categoriesList" execute="@this" /> 
```

**为什么要在每次**单击时呈现 orderingList，因为它假设仅在单击“删除”按钮时才被修改？

为什么：

```
selection="${selectionBean.selectedCategories}" 
```

以“$”符号而不是“#”开头？（不应该阻塞）。

最后，我在组件上找不到“选择”属性。参见[VDL](http://docs.jboss.org/richfaces/latest_4_X/vdldoc/rich/orderingList.html)。你确定语法吗？

问候

# c# - 定时器在错误的时间间隔触发

> ID：10515532
> 
> 赞同：1
> 
> 时间：2012-05-09T11:52:29.283
> 
> 标签：c#, timer

我正在尝试根据这篇文章抽象 system.threading.timer：http: [//www.derickbailey.com/CommentView,guid,783f22ad-287b-4017-904c-fdae46719a53.aspx](http://www.derickbailey.com/CommentView,guid,783f22ad-287b-4017-904c-fdae46719a53.aspx)

但是，似乎计时器是根据错误的参数触发的

在下面的课程中，我们有这一行

```
timer = new System.Threading.Timer(o => TimerExecute(), null, 1000, 30000); 
```

这应该意味着在开始前等待 1 秒，然后每 30 秒触发一次

但是，代码每秒钟触发一次

我做错了什么

```
 public interface ITimer
    {
        void Start(Action action);
        void Stop();
    }

    public class Timer : ITimer, IDisposable
    {
        private TimeSpan timerInterval;
        private System.Threading.Timer timer;
        private Action timerAction;

        private bool IsRunning { get; set; }

        public Timer(TimeSpan timerInterval)
        {
            this.timerInterval = timerInterval;
        }

        public void Dispose()
        {
            StopTimer();
        }

        public void Start(Action action)
        {
            timerAction = action;
            IsRunning = true;
            StartTimer();
        }

        public void Stop()
        {
            IsRunning = false;
            StopTimer();
        }

        private void StartTimer()
        {
            timer = new System.Threading.Timer(o => TimerExecute(), null, 1000, Convert.ToInt32(timerInterval.TotalMilliseconds));
        }

        private void StopTimer()
        {
            if (timer != null)
            {
                timer.Change(Timeout.Infinite, Timeout.Infinite);
                timer.Dispose();
                timer = null;
            }
        }

        private void TimerExecute()
        {
            try
            {
                StopTimer();
                timerAction();
            }
            finally
            {
                if (IsRunning)
                    StartTimer();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T12:00:08.143

每次触发 TimerExecute 时，您都会重新启动计时器。并且由于它重新启动良好，它将在 1 秒后再次触发。所以我会将 TimerExecute 重写为此。

还有你的 try catch 或 try finally 方法，确保你确实发现了问题并以某种方式处理它们，而不仅仅是忽略它。

```
private void TimerExecute()
    {
        try
        {
            timerAction();
        }
        catch
        {
            //todo
        }
    } 
```

# ruby-on-rails - 为什么即使 rake assets:precompile 失败，Heroku 仍会继续部署？

> ID：10515533
> 
> 赞同：4
> 
> 时间：2012-05-09T11:52:29.863
> 
> 标签：ruby-on-rails, ruby-on-rails-3, heroku

在 heroku 上部署时，即使 rake assets:precompiles 失败，heroku 也会继续部署。

为什么它是默认行为？如果 rake assets:precompile 失败，有没有办法阻止 heroku 部署版本？谢谢。

```
 -----> Writing config/database.yml to read from DATABASE_URL
   -----> Preparing app for Rails asset pipeline
          Running: rake assets:precompile
          rake aborted!
          The line was indented 2 levels deeper than the previous line.
          (in /tmp/build_3tgkcip2wq2qv/app/assets/stylesheets/master.css.sass)

          Tasks: TOP => assets:precompile:primary
          (See full trace by running task with --trace)
          Precompiling assets failed, enabling runtime asset compilation
          Injecting rails31_enable_runtime_asset_compilation
          Please see this article for troubleshooting help:
          http://devcenter.heroku.com/articles/rails31_heroku_cedar#troubleshooting
   -----> Rails plugin injection
          Injecting rails_log_stdout
          Injecting rails3_serve_static_assets
   -----> Discovering process types
          Procfile declares types      -> (none)
          Default types for Ruby/Rails -> console, rake, web, worker
   -----> Compiled slug size is 52.9MB
   -----> Launching... done, v163 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:32:21.923

因为即使资产编译失败，应用程序也能够处理不涉及资产的请求，fx 服务于 REST xml 或 json 请求。

# c# - ASP 登录控件重置按钮

> ID：10515541
> 
> 赞同：0
> 
> 时间：2012-05-09T11:52:55.760
> 
> 标签：c#, asp.net, .net, login-control

我有一个登录控件，并且通过将其转换为模板来添加一个重置按钮。我还尝试使用 Find Control Method 清空文本。但我无法清空文本框。下面的 HTML 和 Codebehind

代码：

```
 <asp:Login ID="lgnLogin" runat="server" MembershipProvider = "myCustomProvider" OnAuthenticate = "lgnLogin_Authenticate" DisplayRememberMe = "false" TitleText = "" UserNameLabelText = "Username" >
    <LayoutTemplate>
        <table cellpadding="1" cellspacing="0" style="border-collapse:collapse;">
            <tr>
                <td>
                    <table cellpadding="0">
                        <tr>
                            <td align="right">
                                <asp:Label ID="UserNameLabel" runat="server" AssociatedControlID="UserName">Username</asp:Label>
                            </td>
                            <td>
                                <asp:TextBox ID="UserName" runat="server"></asp:TextBox>
                                <asp:RequiredFieldValidator ID="UserNameRequired" runat="server" 
                                    ControlToValidate="UserName" ErrorMessage="User Name is required." 
                                    ToolTip="User Name is required." ValidationGroup="lgnLogin">*</asp:RequiredFieldValidator>
                            </td>
                        </tr>
                        <tr>
                            <td align="right">
                                <asp:Label ID="PasswordLabel" runat="server" AssociatedControlID="Password">Password:</asp:Label>
                            </td>
                            <td>
                                <asp:TextBox ID="Password" runat="server" TextMode="Password"></asp:TextBox>
                                <asp:RequiredFieldValidator ID="PasswordRequired" runat="server" 
                                    ControlToValidate="Password" ErrorMessage="Password is required." 
                                    ToolTip="Password is required." ValidationGroup="lgnLogin">*</asp:RequiredFieldValidator>
                            </td>
                        </tr>
                        <tr>
                            <td align="center" colspan="2" style="color:Red;">
                                <asp:Literal ID="FailureText" runat="server" EnableViewState="False"></asp:Literal>
                            </td>
                        </tr>
                        <tr>
                            <td align="right" colspan="2">
                                <asp:Button ID="resetButton" runat="server" Text="Reset" 
                                    onclick="resetButton_Click"/>
                            </td>
                            <td align="right" colspan="2">
                                <asp:Button ID="LoginButton" runat="server" CommandName="Login" Text="Log In" 
                                    ValidationGroup="lgnLogin" />
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    </LayoutTemplate>
</asp:Login> 
```

代码隐藏：

```
protected void resetButton_Click(object sender, EventArgs e)
    {
        TextBox username =  (TextBox)lgnLogin.FindControl("UserName");
        TextBox passsword = (TextBox)lgnLogin.FindControl("Password");

        username.Text = "";
        passsword.Text = "";

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:00:56.553

您是否尝试过 HTML 重置？

[http://www.echocho.com/htmlforms13.htm](http://www.echoecho.com/htmlforms13.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:11:39.270

无论如何，密码应该在回发时自动清除，但用户名存储在控件 ViewState 中，并在事件触发后重新填充文本框，因此您还需要像这样清除用户名字段 -

```
lgnLogin.UserName = ""; 
```

那应该做你想做的事。

# java - Xsd 验证错误

> ID：10515545
> 
> 赞同：0
> 
> 时间：2012-05-09T11:53:12.480
> 
> 标签：java, xml, xsd, validation

我对嵌套的 xsd 文件有疑问。我有这 3 个文件：Company.xsd Product.xsd 和 Person.xsd。

公司.xsd

```
<?xml version="1.0"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
        targetNamespace="http://www.company.org"
        xmlns="http://www.company.org"
        elementFormDefault="qualified">

<xsd:include schemaLocation="Person.xsd"/>
<xsd:include schemaLocation="Product.xsd"/>

<xsd:element name="Company">
    <xsd:complexType>
        <xsd:sequence>
            <xsd:element name="Person" type="PersonType" 
                         maxOccurs="unbounded"/>
            <xsd:element name="Product" type="ProductType"
                         maxOccurs="unbounded"/>
        </xsd:sequence>
    </xsd:complexType>
</xsd:element> 
```

产品.xsd

```
<?xml version="1.0"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
        elementFormDefault="qualified">

<xsd:complexType name="ProductType">
    <xsd:sequence>
       <xsd:element name="Type" type="xsd:string"/>
    </xsd:sequence>
</xsd:complexType>   
</xsd:schema> 
```

人物.xsd

```
<?xml version="1.0"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
        elementFormDefault="qualified">

<xsd:complexType name="PersonType">
    <xsd:sequence>
       <xsd:element name="Name" type="xsd:string"/>
       <xsd:element name="SSN" type="xsd:string"/>
    </xsd:sequence>
</xsd:complexType>   
</xsd:schema> 
```

我尝试验证这个简单的 XML 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<Company>
<Person>
    <Name>Test</Name>
    <SSN>test</SSN>
</Person>
<Product>
    <name>Test</name>
</Product>
</Company> 
```

但我有这个错误：cvc-elt.1：找不到元素“公司”的声明。

你知道为什么吗？？

有人能帮我吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:05:58.497

首先，您的测试 XML 有错误。这个：

```
<Product>
   <name>Test</name>
</Product> 
```

应该

```
<Product>
   <Type>Test</Type>
</Product> 
```

此外，您的 XML 标记缺少命名空间声明。如果没有命名空间声明，则假定标记根本不属于任何命名空间。由于您的架构将标签放在特定的命名空间中（使用 URI `http://www.company.org`），因此您的 XML 需要执行相同的操作才能进行验证。

例如，您可以在`<Company>`标签中这样做：

```
<?xml version="1.0" encoding="UTF-8"?>

<Company xmlns="http://www.company.org">
   ....
</Company> 
```

在此之后，一切都验证正常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:03:59.837

您需要包含一个命名空间：

```
<Company xmlns="http://www.company.org">
... <!-- rest of XML ---> 
```

您的 XML 中也有一些错误，但是一旦您从验证器获得更合理的输出，就应该很简单地修复它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-20T11:16:17.997

[此示例](http://java-by-ash.blogspot.com/2012/07/xml-schema-validation.html)将向您展示如何使用 JAXP 解析根据您的 XSD 模式来验证 XML 文件。

# itextsharp - 如何通过 Itextsharp 在 PDF 的页脚中添加页码

> ID：10515548
> 
> 赞同：15
> 
> 时间：2012-05-09T11:53:27.897
> 
> 标签：itextsharp, itext

我在 ASP.NET 代码中使用 iTextSharp DLL。我正在将数据提取到数据集中并将数据集添加到 PDF 表中。

如果我的数据集有 100 多行，则将 100 行添加到 PDF 表中，并在 PDF 文件中创建 3 或 4 页。

如何在每个页面中添加页脚？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-10T10:54:21.313

您需要从 PdfPageEventHelper 类继承并覆盖下面代码片段中显示的方法：

```
Document doc = new Document(PageSize.A4.Rotate());        

using (MemoryStream ms = new MemoryStream())
{
  PdfWriter writer = PdfWriter.GetInstance(doc, ms);
  PageEventHelper pageEventHelper = new PageEventHelper();
  writer.PageEvent = pageEventHelper;
}

 public class PageEventHelper : PdfPageEventHelper
    {
        PdfContentByte cb;
        PdfTemplate template;

        public override void OnOpenDocument(PdfWriter writer, Document document)
        {
            cb = writer.DirectContent;
            template = cb.CreateTemplate(50, 50);
        }

        public override void OnEndPage(PdfWriter writer, Document document)
        {
            base.OnEndPage(writer, document);

            int pageN = writer.PageNumber;
            String text = "Page " + pageN.ToString() + " of ";
            float len = this.RunDateFont.BaseFont.GetWidthPoint(text, this.RunDateFont.Size);

            iTextSharp.text.Rectangle pageSize = document.PageSize;

            cb.SetRGBColorFill(100, 100, 100);

            cb.BeginText();
            cb.SetFontAndSize(this.RunDateFont.BaseFont, this.RunDateFont.Size);
            cb.SetTextMatrix(document.LeftMargin, pageSize.GetBottom(document.BottomMargin));
            cb.ShowText(text);

            cb.EndText();

            cb.AddTemplate(template, document.LeftMargin + len, pageSize.GetBottom(document.BottomMargin));
        }

        public override void OnCloseDocument(PdfWriter writer, Document document)
        {
            base.OnCloseDocument(writer, document);

            template.BeginText();
            template.SetFontAndSize(this.RunDateFont.BaseFont, this.RunDateFont.Size);
            template.SetTextMatrix(0, 0);
            template.ShowText("" + (writer.PageNumber - 1));
            template.EndText();
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-01T05:03:27.780

您必须继承 pageeventhepler 才能将页码添加到动态生成的 pdf 页面。

```
public void printPdf()
{
    Document doc = new Document(PageSize.A4.Rotate());
    using (MemoryStream ms = new MemoryStream())
    {
        PdfWriter writer = PdfWriter.GetInstance(doc, ms);
        PageEventHelper pageEventHelper = new PageEventHelper();
        writer.PageEvent = pageEventHelper;
    }
}

public class PageEventHelper : PdfPageEventHelper
{
    PdfContentByte cb;
    PdfTemplate template;

    public override void OnOpenDocument(PdfWriter writer, Document document)
    {
        cb = writer.DirectContent;
        template = cb.CreateTemplate(50, 50);
    }

    public override void OnEndPage(PdfWriter writer, Document document)
    {
        base.OnEndPage(writer, document);

        int pageN = writer.PageNumber;
        String text = "Page " + pageN.ToString() + " of ";
        float len = this.RunDateFont.BaseFont.GetWidthPoint(text, this.RunDateFont.Size);

        iTextSharp.text.Rectangle pageSize = document.PageSize;

        cb.SetRGBColorFill(100, 100, 100);

        cb.BeginText();
        cb.SetFontAndSize(this.RunDateFont.BaseFont, this.RunDateFont.Size);
        cb.SetTextMatrix(document.LeftMargin, pageSize.GetBottom(document.BottomMargin));
        cb.ShowText(text);

        cb.EndText();

        cb.AddTemplate(template, document.LeftMargin + len, pageSize.GetBottom(document.BottomMargin));
    }

    public override void OnCloseDocument(PdfWriter writer, Document document)
    {
        base.OnCloseDocument(writer, document);

        template.BeginText();
        template.SetFontAndSize(this.RunDateFont.BaseFont, this.RunDateFont.Size);
        template.SetTextMatrix(0, 0);
        template.ShowText("" + (writer.PageNumber - 1));
        template.EndText();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-22T08:23:23.193

这是另一种方法，在每个页面上制作模板，然后在 onCloseDocument 更新这些模板查看下面的代码我正在使用 iTextSharp 7

```
 class PDFBackgroundHelper : PdfPageEventHelper
{

    private PdfContentByte cb;
    private List<PdfTemplate> templates;
    //constructor
    public PDFBackgroundHelper()
    {
        this.templates = new List<PdfTemplate>();
    }

    public override void OnEndPage(PdfWriter writer, Document document)
    {
        base.OnEndPage(writer, document);

        cb = writer.DirectContentUnder;
        PdfTemplate templateM = cb.CreateTemplate(50, 50);
        templates.Add(templateM);

        int pageN = writer.CurrentPageNumber;
        String pageText = "Page " + pageN.ToString() +" of ";
        BaseFont bf = BaseFont.CreateFont(BaseFont.HELVETICA, BaseFont.CP1252, BaseFont.NOT_EMBEDDED);
        float len = bf.GetWidthPoint(pageText, 10);
        cb.BeginText();
        cb.SetFontAndSize(bf, 10);
        cb.SetTextMatrix(document.LeftMargin, document.PageSize.GetBottom(document.BottomMargin));
        cb.ShowText(pageText);
        cb.EndText();
        cb.AddTemplate(templateM, document.LeftMargin + len, document.PageSize.GetBottom(document.BottomMargin));
    }

    public override void OnCloseDocument(PdfWriter writer, Document document)
    {
        base.OnCloseDocument(writer, document);
        BaseFont bf = BaseFont.CreateFont(BaseFont.HELVETICA, BaseFont.CP1252, BaseFont.NOT_EMBEDDED);
        foreach (PdfTemplate item in templates)
        {
            item.BeginText();
            item.SetFontAndSize(bf, 10);
            item.SetTextMatrix(0, 0);
            item.ShowText("" + (writer.PageNumber));
            item.EndText();
        }

    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-02T13:02:59.803

如果您只需要一个简单的页码，那么这可以完成工作：

```
public class PageHeaderFooter : PdfPageEventHelper
{
    private readonly Font _pageNumberFont = new Font(Font.HELVETICA, 8f, Font.NORMAL, Color.BLACK);

    public override void OnEndPage(PdfWriter writer, Document document)
    {
        AddPageNumber(writer, document);
    }

    private void AddPageNumber(PdfWriter writer, Document document)
    {
        var text = writer.PageNumber.ToString();

        var numberTable = new PdfPTable(1);
        var numberCell = new BorderlessPdfPCell(new Phrase(text, _pageNumberFont)) {HorizontalAlignment = Element.ALIGN_RIGHT};

        numberTable.AddCell(numberCell);
        numberTable.TotalWidth = 50;
        numberTable.WriteSelectedRows(0, -1, document.Right - 80, document.Bottom + 20, writer.DirectContent);
    }
} 
```

你这样使用它：

```
var stream = new MemoryStream();
var document = new Document(PageSize.A4, 20, 20, 30, 30);

var pdfWriter = PdfWriter.GetInstance(document, stream);
pdfWriter.PageEvent = new PageHeaderFooter();
// rest of PDF generation 
```

# shell - 我们如何检查 shell 脚本的命令行参数是否在引号内？

> ID：10515554
> 
> 赞同：1
> 
> 时间：2012-05-09T11:53:42.703
> 
> 标签：shell, batch-file

如何为以下批处理命令获取相应的 shell 命令：

```
 if %1 EQU %~1 (
        echo ERROR ! The username must be within quotes.
    ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:41:34.037

Bash 中的引号是句法的，而不是字面的，所以它们在脚本中根本看不到。AFAIK 绝对没有办法让脚本知道参数是否或如何被引用，因为在脚本接收参数时任何引号都有效地消失了。

如果您想检查参数是否包含空格或其他特殊字符，使其“适合”*在 Bash*中引用，您可以检查“Bash-quoted”字符串是否等于原始字符串：

```
[[ "$1" = "$(printf %q "$1")" ]] 
```

如果你想检查参数是否被*字面*引用，你可以做一个简单的检查，比如

```
[[ "$1" =~ ^\".*\"|\'.*\'$ ]] 
```

也就是说，你为什么需要这个？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:07:30.107

使用 bash，试试这个：

```
if [[ -z "$1" ]]; then
    echo ERROR ! The username must be within quotes.
fi 
```

# iphone - Facebook Post通过iOS sdk，有时会错过图片

> ID：10515555
> 
> 赞同：0
> 
> 时间：2012-05-09T11:53:52.810
> 
> 标签：iphone, objective-c, facebook, facebook-graph-api

我通过以下代码发布到用户的 Facebook 提要。

70 - 90 % 的情况下，它与图像一起发布得很好，但有时它被发布但没有图像并且没有任何错误。

谁能解释可能是什么原因？

```
[params setObject:@"1234"  forKey:@"name"];
[params setObject:@"1234"  forKey:@"caption"];
[params setObject:@"description" forKey:@"description"];
[params setObject:item.itemURL forKey:@"link"];
[params setObject:item.itemPictureURL forKey:@"picture"];
[params setObject:facebook.accessToken forKey:@"access_token"];
[facebook requestWithGraphPath:@"/me/feed" andParams:params andHttpMethod:@"POST" andDelegate:self]; 
```

虽然图像位于指定的图片 url。

谢谢 -

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:01:42.353

发生这种情况是因为 url 调用，即通过 web 加载图像或任何 web 调用都是异步的，它也在另一个线程上而不是在主线程上，所以有时调用是在调用 fb 之后进行的，所以图像在那时。所以您需要先加载所需的图像，并在调用时检查图像是否可用以在 FB 上发布

# vb.net - 将控件绑定到设置文件

> ID：10515556
> 
> 赞同：2
> 
> 时间：2012-05-09T11:53:53.820
> 
> 标签：vb.net, data-binding, settings

我希望能够相互独立地控制多组设置。我最初使用的是 My.Settings，但是手动回滚某些设置同时保存其他设置的工作量太大。

我认为我的解决方案是使用多个设置文件，并且我曾经有过这似乎可行的时刻，但我所取得的任何成功都是周期性和暂时的。

目前我在项目的根目录中有两个设置文件；在代码中，我可以正常访问设置，但在许多情况下，我想将单个设置绑定到控件。这*应该*是直截了当的，我记得当我使用单个内置设置文件时它可以工作。

但是，当我使用两个新的设置文件时，它不起作用。在*Formatting & Advanced Binding*对话框中，我选择*Add New Project Data Source*，浏览到我的项目，然后进入根命名空间，然后我看到我的表单/类/设置文件。当我选择这两个设置文件并单击“确定”时，对话框将被关闭，而我无法选择将控件绑定到的单个设置。

当我启用*Project > Show All Files*时，我可以看到绑定已经创建；*我在My Project > Datasources*下有两个*.datasource*文件。

 *有什么原因我不能绑定到这些设置文件吗？如果不是，为什么我不能通过数据绑定对话框访问它们？

计划 B 是创建一个对象以充当控件和设置文件之间的中介，但如果可以的话，我宁愿避免这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:45:42.527

我对设置文件或自定义设置文件的数据绑定没有问题，我添加了一个名为“其他”的属性：

```
Public Sub New()
  InitializeComponent()

  TextBox1.DataBindings.Add("Text", My.Settings, "Test")
  TextBox2.DataBindings.Add("Text", custom.Default, "other")
End Sub 
```

我发现自定义设置文件的唯一“障碍”是它不会像默认设置`My.Settings`那样自动写入设置文件。我将此添加到我的表单中：

```
Protected Overrides Sub OnFormClosing(ByVal e As FormClosingEventArgs)
  custom.Default.Save()

  MyBase.OnFormClosing(e)
End Sub 
```

然后设置仍然存在。*

# cruisecontrol.net - 条件块在巡航控制中不起作用

> ID：10515560
> 
> 赞同：0
> 
> 时间：2012-05-09T11:54:02.023
> 
> 标签：cruisecontrol.net, cruisecontrol

我在我的 ccnet.config 文件中使用以下代码

```
<tasks>
  <conditional>
    <conditions>
      <compareCondition>
        <value1>${Target1}</value1>
        <value2>D:\QAT_Publish</value2>
        <evaluation>equal</evaluation>
      </compareCondition>
    </conditions>
    <tasks>         
      <buildpublisher>
        <sourceDir>D:\QATV2Demo</sourceDir>
        <publishDir>D:\QAT_Publish</publishDir>
        <useLabelSubDirectory>true</useLabelSubDirectory>
      </buildpublisher>
           </tasks>
    <elseTasks>

        <buildpublisher>
          <sourceDir>D:\QATV2Demo</sourceDir>
          <publishDir>D:\QAT_Publish1</publishDir>
          <useLabelSubDirectory>true</useLabelSubDirectory>
        </buildpublisher>

    </elseTasks>
  </conditional>
<tasks> 
```

但是这个孔块根本没有执行。

请告诉我在这里犯了什么错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-14T23:43:56.507

你的条件不应该是：

```
<compareCondition>
     <value1>$(Target1)</value1>
     <value2>D:\QAT_Publish</value2>
     <evaluation>equal</evaluation>
</compareCondition> 
```

? 对变量使用花括号是一种 NAnt 构造——CC.NET 通常使用圆括号。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-10T09:51:16.287

我没见过真的。

请尝试一下，如果还有其他问题，请告诉我。

# .net - 到 LINQ 还是不到 LINQ：关于 LINQ to Entity/SQL/Object

> ID：10515568
> 
> 赞同：1
> 
> 时间：2012-05-09T11:54:50.840
> 
> 标签：.net, sql, linq, entity-framework

我有一个场景导致进程运行时间很长，我怀疑这是我们对 LINQ to Entity 的使用。

**背景：** 项目使用 LINQ To Entity and Repository 模式将数据暴露给我们的逻辑层。这就是它的现状，并且不会改变。

**ISSUE：** 出现了一个特定场景，需要从输入和其他表中选择相交数据。为了优化这一点，我首先在数据库中查询我打算用于获取相交数据的 ID 数组。我还有另一个整数数组可以在我的 LINQ 表达式中使用。然后，我使用 LINQ where 和 contains 方法构建一个表达式以从相关表中选择数据。这需要很长时间才能执行。差不多一分钟。

为了解决这个问题，我尝试了几种几乎都花费相同时间的 LINQ 技术。为方便起见，以下是我的一些方法的示例。

```
// FYI: tableTotalsIds contains 14,856 IDs as an example, built from a repository call
var tableTotalsIds = tableTotals.Select(s => s.Id).ToArray();
int[] ages = {25, 26, 27};

Expression<Func<TotalAgeCounts, bool>> ageFilter = 
    af => af.TableTotalsId != null &&
          tableTotalsIds.Contains(af.TableTotalsId.Value) &&
          ages.Contains(af.Age);

var directStartTime = DateTime.Now;
var directFetch = _ctx.TotalAgeCounts.Where(ageFilter).ToList();
var directBenchMark = DateTime.Now.Subtract(directStartTime).TotalSeconds;

var repositoryStartTime = DateTime.Now;
var repositoryFetch = _totalAgeCountsRepository
    .SelectAll(new Specification<TotalAgeCounts>(ageFilter));
var repositoryBenchMark = DateTime.Now.Subtract(repositoryStartTime).TotalSeconds; 
```

在所有情况下，查询时间大约需要 1 分钟。让我大吃一惊的是 .Contains() 方法中使用了大量的 tableTotalsIds，但我不知道其他 LINQ 方法可以实现这一点。

在 LINQ 中是否有更优化的方法来执行此操作？

目前，我正在考虑将此查询作为简单的连接放回数据库，并在此处跳过 LINQ 瓶颈。但首先我会尝试将未过滤的数据拉入内存，然后使用 LINQ 将数据连接在一起，看看效率如何。

我感兴趣的是其他人如何在不重写应用程序架构的情况下克服类似的瓶颈。

**解决方案**

正如评论者指出的那样，由于我的 .ToArray() 没有发生 LINQ 优化。问题变得更深了，因为我正在使用我们的存储库实现来构建 tableTotalsIds，它已经将结果转换为 IList，失去了进一步的 LINQ/SQL 优化。只是不使用我们的 Repository 实现来构建 tableTotalsIds 并直接查询 dataContext，将结果保留为 IQueryable 解决了问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T12:42:38.383

您正在调用的事实`ToArray` 导致过滤记录被拉出数据库，只是作为查询的一部分再次注入。这会阻止查询优化器充分利用它已经拥有所需内容的事实。正如您在评论中指出的那样，删除 Tolist/toarray 有所帮助。

至于存储库模式，你没有理由不能使用它。您只是不需要为每个类都建立一个单独的存储库；仅适用于您要查询的重要根对象。

在这种情况下，您的助手表信息可以在同一个查询中汇总；存储库模式不要求您为其创建单独的存储库。

# ruby - 如何对 Resque perform 方法或 Resque Job 类进行基准测试？

> ID：10515569
> 
> 赞同：2
> 
> 时间：2012-05-09T11:54:55.270
> 
> 标签：ruby, ruby-on-rails-3, benchmarking, resque

我正在使用 Resque、Resque-Status 和 Resque-Retry 来处理 bkg 作业。以下是一个示例作业。它对 4​​-5 个模型执行查询。现在我想尝试使用[Sidekiq](https://github.com/mperham/sidekiq)，它的速度超过了 Resque。

但在此之前，我想在我的 rails 应用程序中对我的以下工作进行基准测试，以便稍后验证哪个表现最佳。

```
class BkgJob < Resque::JobWithStatus
  extend Resque::Plugins::Retry
  @retry_limit = 3
  @retry_delay = 60

  @queue = :critical

  def perform
    worker_id, station_id, ids = options['worker_id'], options['station_id'], options['ids']
    human_worker = Worker.find(human_worker_id)
    station = Station.find(station_id)
    .....
    .....
  end
end 
```

那么，问题是如何对上述工作类或执行方法进行基准测试？我真的是基准测试的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-17T08:44:06.740

对于 Resque 或 Sidekiq，您在后台运行的作业的性能几乎相同。但是，Sidekiq 从队列中挑选作业的速度要快得多，并且与 Resque 相比内存效率要高得多。

对后台作业进行基准测试仍然是一个好主意，但我想说您应该只对 perform 方法本身进行基准测试，而不是对排队和执行作业的整个过程进行基准测试。您可以执行以下操作（RSpec 示例）：

```
require 'benchmark'

describe 'performance' do
  it 'takes time' do
    options = {'worker_id': 123, 'station_id': 456, 'ids': [1,2,3]}
    puts Benchmark.realtime do
       100.times { BkgJob.new(options).perform }
    end
  end
end 
```

# c# - 发送 SOAP 请求，从哪里开始？

> ID：10515573
> 
> 赞同：9
> 
> 时间：2012-05-09T11:55:08.247
> 
> 标签：c#, .net, soap

我需要向 URL 发送 SOAP 请求。但我发现这比我想象的要难。

我必须发送的请求是：

```
string bla = "" +
"<?xml version='\"1.0\" encoding=\"UTF-8\"?>" +
    "<soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\">" +
        "<soap:Body>" +
            "<ns1:sendNotificationResponse" +
              "xmlns=\"http://notification.services.adyen.com\"" +
              "xmlns:ns2=\"http://common.services.adyen.com\">" +
            "<notificationResponse>[accepted]</notificationResponse>" +
            "</sendNotificationResponse>" +
        "</soap:Body>" +
    "</soap:Envelope>"; 
```

我得到了一个 URL：[https ://ca-test.adyen.com/ca/services/Notification?wsdl](https://ca-test.adyen.com/ca/services/Notification?wsdl)

问题是，我不确定如何从这里继续。我可以简单地向该 URL 发送请求吗？还是我必须先以某种方式导入 WSDL？

我在网上找到了很多例子，但我无法真正理解其中的大部分。有些甚至已经过时了，因为它们仍在使用：**Microsoft.Web.Services3**

所以简而言之，我对我在这里到底要做什么以及如何做有点一无所知。我只是想发送那个'SOAP'消息......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T12:15:55.147

您可以通过将服务引用添加到您在问题中提供的端点 URL 来执行此操作。然后，您可以像调用普通方法一样调用 Web 方法，就在客户端对象之外。下面一步一步来：

1.  右键单击引用，选择添加服务引用
2.  输入 URL 以添加服务参考
3.  在代码中实例化新客户端并使用如下：

> ```
> ServiceReference1.NotificationPortTypeClient client = new ServiceReference1.NotificationPortTypeClient(); 
> client.sendNotification(...); 
> ```

**编辑**

更详细地查看 Web 服务，看起来您在问题中包含的 SOAP 请求是在您调用该方法时将由 url 发回的响应 - 而不是您将发送到 Web 服务的请求调用该方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T11:59:10.920

在 Visual Studio 中添加 Web 服务引用不是更容易吗？你得到的是“存根”类，它允许你使用普通的类和方法与 Web 服务进行通信——你不需要关心正在发送的 SOAP 消息等等。

要添加此类引用，您可以选择“添加服务引用”上下文菜单项。根据服务类型，您需要按下服务参考对话框左下方的按钮（在德语中，这称为“Erweitert”，翻译为“增强”或“扩展”）。下一个对话框的“兼容性”部分左下方还有一个按钮，用于添加“.NET 2.0 样式的 Web 服务参考”。

两者之一应该可以帮助您。

如果您需要手动发送请求，您可以向 Web 服务的 URL 发送一个 POST 请求，并将 XML 代码添加为请求正文。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-11T11:53:07.120

关于“如何发送soap消息”：取决于使用的协议（http，jms，甚至smtp），SOAP消息甚至可以从命令行，通过telnet，curl等即时发送。

所以关于你的问题：对不起，通用答案，但这取决于使用的 ws-framework。

关于 WSDL：WSDL 充当实现的合同/基础，因此在您的情况下（假设您的 SOAP 消息根据 WSDL 中的模式已经有效）显式使用 WSDL 并不是真正必要的。

# android - click URL causes Force Close error in ListView when using SimpleAdapter

> ID：10515578
> 
> 赞同：1
> 
> 时间：2012-05-09T11:55:29.170
> 
> 标签：android, android-layout, android-intent

i'm a begginner of android.Shortly what i'm doing is using a simpleAdapater to show a web URL list for practice purpose. however, when i click on the URL,it cause a forceclose error. the logcat shows that

```
android.util.AndroidRuntimeException: Calling startActivity() from outside of an Activity  context requires the FLAG_ACTIVITY_NEW_TASK flag. Is this really what you want? 
```

i already found out some similar problems about this kind of exception.one possible solution is that add the flag before calling startActivity method.for example:

```
intent.addFlag(FLAG_ACTIVITY_NEW_TASK); 
```

unfortunately,the click event of the web URL is responsed by system automatically. so how can i resolve this problem in my case? And can anyone explain why this problem occured when using simpleAdapter but not ArrrayAdapter?

here is the main code:

```
public class RSSContentActivity extends ListActivity
{
private SimpleAdapter   simpleAdapter;
private ListView        lv;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);

    lv = getListView();
    simpleAdapter = new SimpleAdapter(getApplicationContext(), getData(),
            R.layout.rss_content_item, new String[]
            {"item_link" }, new int[]
            {R.id.rss_item_content});
    lv.setAdapter(simpleAdapter);

}

private List<Map<String, Object>> getData()
{

    List<Map<String, Object>> list = new ArrayList<Map<String, Object>>();

    Map<String, Object> map = new HashMap<String, Object>();
        map.put("item_link",
            "http://www.bom.gov.au/vic/warnings/coastalwind.shtml");
    list.add(map);

    map = new HashMap<String, Object>();
    map.put("item_link",
            "http://www.bom.gov.au/cgi-bin/wrap_fwo.pl?IDV36050.html");
    list.add(map);

    map = new HashMap<String, Object>();
        map.put("item_link", "http://www.bom.gov.au/products/IDY21000.shtml");
    list.add(map);

    return list;
}
} 
```

here is the rss_item_content.xml file:

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/rss_item_content"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:autoLink="web"
android:padding="10dp"
android:textAppearance="?android:attr/textAppearanceMedium"  >
</TextView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-15T13:43:44.993

最终，我自己解决了这个问题。想法是，与其要求系统处理链接，不如手动完成整个过程。这是解决方案：

一、删除布局文件中的autolink属性

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/rss_item_content"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="10dp"
android:textAppearance="?android:attr/textAppearanceMedium"  >
</TextView> 
```

然后实现一个继承自SimpleAdapter的adapater类，重写getView方法，将链接文本变为web链接外观，手动处理点击事件

```
public class RSSContentAdapter extends SimpleAdapter
{
    private Context context;
public RSSContentAdapter(Context context, List<? extends Map<String, ?>> data, int resource,String[] from, int[] to)
{
    super(context, data, resource, from, to);
    this.context=context;
}

@Override
public View getView(int position, View convertView, ViewGroup parent)
{
    View view = super.getView(position, convertView, parent);

     if (view != null)
    {
        TextView link = (TextView) view.findViewById(R.id.rss_item_content);
        if (link != null)
        {
            String linkText = link.getText().toString();
            SpannableString sp = new SpannableString(linkText);

            // set the link text to a link appearance and rewrite the onClick method
            sp.setSpan(new URLSpan(linkText){
                @Override
                public void onClick(View widget)
                {                       
                    //linkText
                    String linkText=((TextView)widget).getText().toString();

                    Log.d(getClass().toString(), "onClick");

                    //send URL to web browser
                    Uri uri = Uri.parse(linkText);
                    Intent it = new Intent(Intent.ACTION_VIEW,uri);

                    it.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);//add the flag to avoid force close error

                    context.startActivity(it);

                }

            }, 0, linkText.length(), Spanned.SPAN_EXCLUSIVE_EXCLUSIVE);

            link.setText(sp);

            MovementMethod m = link.getMovementMethod();
            if ((m == null) || !(m instanceof LinkMovementMethod))
            {
                if (link.getLinksClickable())
                {
                    link.setMovementMethod(LinkMovementMethod.getInstance());
                }
            }
        }
    }
    return view;
} 
```

}

最后一步相当简单。只需在活动中使用这个新的适配器。

```
lv = getListView(); 
listAdapter = new
RSSContentAdapter(getApplicationContext(), getData(),
    R.layout.rss_content_item, new String[] { "item_link" }, new int[] {
    R.id.rss_item_content }); 
lv.setAdapter(listAdapter); 
```

但是，我仍然想知道为什么会出现这个问题。有没有人有任何想法？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-04T07:14:07.463

尝试：

```
simpleAdapter = new SimpleAdapter(this, ...

getApplicationContext() -> this 
```

# caching - 在 Oracle Weblogic server 10.3.4 上配置 Coherence Cache 时出错

> ID：10515580
> 
> 赞同：1
> 
> 时间：2012-05-09T11:55:35.980
> 
> 标签：caching, weblogic, portal, oracle-coherence

我正在尝试在 Oracle Web Logic Server 10.3.4 上配置 Coherence 3.7，但是当我尝试使用 eclipse 在服务器上运行应用程序时，出现以下错误。

> <2012 年 5 月 9 日下午 4:28:23 IST>，任务“14”的 ID 为“1336561103127”。错误是：'weblogic.application.ModuleException：不存在启用存储的节点>对于服务 DistributedSessions' weblogic.application.ModuleException：在 weblogic.servlet.internal.WebAppModule.activateContexts(WebAppModule.java 中不存在服务 DistributedSessions 的启用存储的节点:1497) 在 weblogic.servlet.internal.WebAppModule.activate(WebAppModule.java:438) 在 weblogic.application.internal.flow.ModuleStateDriver$2.next(ModuleStateDriver.java:375) 在 weblogic.application.utils.StateMachineDriver.nextState (StateMachineDriver.java:52) 在 weblogic.application.internal.flow.ModuleStateDriver.activate(ModuleStateDriver.java:95) 被截断。请参阅日志文件以获取完整的堆栈跟踪原因：com.tangosol。1) 截断。查看日志文件以获取完整的堆栈跟踪
> 
> <2012 年 5 月 9 日下午 4:28:23 IST> <2012 年 5 月 9 日下午 4:28:23 IST> 应用程序“_auto_generated_ear_”。> <2012 年 5 月 9 日下午 4:28:23 IST> nMissingStorage(PartitionedCache.CDB :32) 在 com.tangosol.coherence.component.util.daemon.queueProcessor.service.grid.partitionedService.PartitionedCache$BinaryMap.s>endStorageRequest(PartitionedCache.CDB:11) 在 com.tangosol.coherence.component.util.daemon .queueProcessor.service.grid.partitionedService.PartitionedCache$BinaryMap.a>ddIndex(PartitionedCache.CDB:11) at com.tangosol.coherence.component.util.daemon.queueProcessor.service.grid.partitionedService.PartitionedCache$ViewMap.add> com.tangosol.coherence.component.util.SafeNamedCache.addIndex(SafeNamedCache.CDB:1) 处的索引（PartitionedCache.CDB:1）被截断。查看日志文件以获取完整的堆栈跟踪

我检查了缓存启动脚本并在其中启用了本地存储，但它仍然不起作用。有人可以为我提供在 Weblogic Server（在 Web 控制台和应用程序中）上配置一致性缓存的正确步骤，或者建议我收到此错误的可能原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T15:20:46.623

这可能发生在几种不同的情况下。启用存储的节点未连接到禁用存储的节点（在您的情况下为 WebLogic），或者启用存储的节点未启用 SESSION 本地存储。确认集群在运行时包含启用存储的节点，并确认缓存服务器已使用以下选项启动：

`-Dtangosol.coherence.session.localstorage=true`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-21T23:46:39.283

您必须在 Weblogic Server 安装中指定一些 JVM 参数。转到环境-> 服务器并选择您的服务器。在选项卡配置中选择选项卡启动服务器并使用以下 JVM 参数填写参数字段

```
-Dtangosol.coherence.cacheconfig=session-cache-config.xml -Dtangosol.coherence.distributed.localstorage=true -Dtangosol.coherence.session.localstorage=true 
-Dtangosol.coherence.cluster=CoherenceCluster 
-Dtangosol.coherence.clusteraddress=231.1.3.4 
-Dtangosol.coherence.clusterport=7744 
```

这对我有用，我有完全相同的错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-12T19:12:04.257

我有这个问题。两个本地存储系统参数都设置为 true。问题是我的缓存配置没有加载，因此该“服务器”节点根本不知道请求的缓存服务。

因此，如果您遇到此问题，请检查您的缓存配置是否正在加载（“Loaded cache configuration from ...”）。

# java - 如何将负十进制数转换为二进制数并在 Java 中使用移位运算符

> ID：10515583
> 
> 赞同：0
> 
> 时间：2012-05-09T11:55:44.333
> 
> 标签：java, bit-shift

我有这个演示程序，它显示了java中移位运算符的概念。但我不清楚这个程序是如何生成这个答案的。所以请建议我如何做到这一点。

```
public class Operator {
    public static void main(String[] args) {
        int s = -10;
        s = s >>2;
        System.out.println("value of i=" + s);
    }

} 
```

**输出：**

i=-3 的值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:00:03.460

11110110 [2] >> 2 == 11111101 [2] == -3 [10]

这是一个*符号扩展*的右移操作——当它右移时，它不会在左边插入零，而是复制最高位的值。其余的解释是关于有符号整数的二进制补码表示。

通常，将负整数右移一个`n`位置会产生除以 2 ^n并从中减去 1 的效果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:02:37.380

Java 使用[二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)来表示负整数。因此，`-10`十进制是`1111111111110110`二进制的。

`>>`是[符号扩展右移运算符](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.19)。这意味着如果最高位（即符号位）`1`在第一个操作数中，那么它也在`1`结果中。

向右移动`1111111111110110`两个位置得到`1111111111111101`，它是`-3`十进制的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T12:03:13.290

您可以将以下两行添加到您的程序中以稍微清理一下：

```
System.out.println(Integer.toBinaryString(-10));
System.out.println(Integer.toBinaryString(-3));

//Output:
11111111111111111111111111110110
11111111111111111111111111111101
                            --^ 
```

`>> 2`意味着将两个位置的二进制表示`-10`向右移动（屈服`-3`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-21T14:08:31.267

```
public void decimalToBinaryUsingBitManipulation(int value)
{
    if (value == 0)
        return;
    decimalToBinaryUsingBitManipulation(value >>> 1);
    System.out.print(value & 1);
} 
```

# vb.net - Early binding of Microsoft.Office.Interop.Word.WordBasic call in VB.NET

> ID：10515585
> 
> 赞同：0
> 
> 时间：2012-05-09T11:55:46.860
> 
> 标签：vb.net, com, ms-word, late-binding

I'm trying to call this code in VB.NET with "option strict on":

```
Dim application As word.Application = New word.Application
application.WordBasic.DisableAutoMacros(1) 
```

The WordBasic object is dynamic, there is no type library available.
Now the compiler will complain, because late binding is not allowed.

Is there a workaround?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:44:09.047

是的，自 VS2008 以来，这在 vb.net 中被破坏了，这是 Linq 和 Option Infer 强国的受害者。

使其早期绑定太棘手了，有太多版本的 VBA 浮动。值得注意的是，我无法让反射工作，这通常是进行后期绑定的早期绑定方式:) 最好的办法是将此代码放在单独的源代码文件中，这样您就可以使用 Option Strict Off 进行编译.

# plugins - Dynamics CRM 4 Delete Plugin not running

> ID：10515586
> 
> 赞同：0
> 
> 时间：2012-05-09T11:55:47.827
> 
> 标签：plugins, dynamics-crm, dynamics-crm-4

I Have a plugin that should run on delete of a custom entity that wont run.

Plugin is registered with Plugin Registrtion Tool setting:

*   Message - Delete
*   Primary Entity - myCustomEntity
*   Secondary Entity - none
*   Filetering Attributes - All Attributes
*   Plugin - the one i want to run
*   Run in user Context - calling user
*   Execurion Order - 1
*   Pre Stage
*   Synchronous
*   Step Deployment - Server
*   Trigeting Pipeline - Parent

with an image called Target registerd as a pre-image.

there are no errors logged on the server and debuging in visual studio with a breakpoint on the first statements in the constructor and execute methods does not result in it entering debug.

any idea what i have done wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:12:28.347

Figured it out, i had this line

```
if (context.InputParameters.Properties.Contains(ParameterName.EntityMoniker) &&
           context.InputParameters.Properties[ParameterName.EntityMoniker] is Moniker) 
```

which is how it works for MessageName.SetStateDynamicEntity, changed to

```
if (context.InputParameters.Properties.Contains(ParameterName.Target) &&
           context.InputParameters.Properties[ParameterName.Target] is Moniker) 
```

and it works now.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-16T15:23:02.510

如果您不清楚在`InputParameters`给定消息的 PropertyBag 中可能需要哪些参数，您可以查看 SDK 中的相应*MessageNameRequest*类并查看该对象的实例属性（例如，`DeleteRequest`该类只有一个`Target`属性（类型`TargetDelete`）。

# sql - 直接选择成分层用户类型

> ID：10515588
> 
> 赞同：3
> 
> 时间：2012-05-09T11:55:56.817
> 
> 标签：sql, oracle, plsql, user-defined-types

是否可以直接选择分层用户类型？

想象一下这样的表结构：

```
PARENT
------
ID
NAME

CHILD
-----
ID
PARENT_ID
NAME 
```

此外，我有这样的用户类型：

```
create or replace type child_item as object
(
  ID NUMBER(10),
  NAME VARCHAR(255)
);

create or replace type children_table as table of child_item;

create or replace type parent_item as object
(
  ID NUMBER(10),
  NAME VARCHAR(255),
  CHILDREN CHILDREN_TABLE
);

create or replace type parent_table as table of parent_item; 
```

还有这样的声明：

```
select * from parent p inner join child c on p.id = c.parent_id; 
```

现在，我希望该语句的结果位于 type 的对象中`parent_table`。`FOR`如果不使用复杂的循环，这是否可能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T13:03:22.357

您可以使用[COLLECT](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions031.htm#SQLRF06304)：

```
SELECT parent_item(p.ID, 
                   p.NAME, 
                   CAST(COLLECT(child_item(c.id, c.NAME)) AS children_table))
  FROM PARENT p
 INNER JOIN child c ON p.id = c.parent_id
 GROUP BY p.ID, p.NAME 
```

这将返回一个列表`PARENT_ITEM`，您可以将其批量收集到`PARENT_TABLE`.

您可以在外部查询中再次使用 COLLECT 来直接获取 PARENT_TABLE：

```
SELECT CAST(COLLECT(parents) AS parent_table)
  FROM (SELECT parent_item(p.ID, 
                           p.NAME, 
                           CAST(COLLECT(child_item(c.id, c.NAME)) 
                             AS children_table)
                          ) parents
          FROM PARENT p
         INNER JOIN child c ON p.id = c.parent_id
         GROUP BY p.ID, p.NAME) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:43:29.917

使用`CAST(MULTISET())`：

```
with data as (
select p.id pid,p.name pname,cast(multiset(select c.id,c.name 
from child c where c.parent_id=p.id) AS children_table) ct
from parent p
)
select cast(multiset(select pid,pname,ct from data) as parent_table) 
from dual; 
```

# android - 动态添加删除控件形式linearlayout

> ID：10515589
> 
> 赞同：6
> 
> 时间：2012-05-09T11:55:58.067
> 
> 标签：android, android-linearlayout

我有 3 个布局，我需要在单击按钮时访问某些布局并从中删除控件，并在其中知道如何实现这一点，这是我使用的代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="0.20"
        android:orientation="horizontal" >

        <Button
            android:id="@+id/backbutton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Back" />

        <Button
            android:id="@+id/backbutton"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="next" />
    </LinearLayout>
    <!-- the two columns part -->

    <LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="0.80"
        android:orientation="horizontal" >

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="0.80" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="First Name" />
        </LinearLayout>

        <LinearLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:layout_weight="0.20" >

            <TextView
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:text="second Name" />
        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-09T12:11:59.357

在 Android 上从父级移除视图：

```
View myView = findViewById(R.id.my_view);
ViewGroup parent = (ViewGroup) myView.getParent();
parent.removeView(myView); 
```

Android 删除所有子视图：

```
LinearLayout formLayout = (LinearLayout)findViewById(R.id.formLayout);
formLayout.removeAllViews(); 
```

在 Android 上向父级添加视图：

```
Button myButton = new Button(getApplicationContext());
myButton.setLayoutParameters(new LinearLayout.LayoutParams(
                                     LinearLayout.LayoutParams.FILL_PARENT,
                                     LinearLayout.LayoutParams.FILL_PARENT));

myLayout.addView(myButton); 
```

您可以使用：

```
LinearLayout.LayoutParams.FILL_PARENT 
```

或者

```
LinearLayout.LayoutParams.WRAP_CONTENT 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T12:03:45.787

添加`andoird:id="@+id/linerlayout_1"`之后，您可以使用该方法在代码中轻松访问此视图`findviewbyid()`。

例如：将它放在按钮的 onclicklistener 方法中。

```
LinearLayout ll = (LinearLayout) findViewById(R.id.linerlayout);
ll.setVisibility(View.GONE); // this row will hide the entire linerlayout
ll.addView(someView); //this row will add the specified View f.e.: TextView
ll.removeView(otherView); // this row will remove the view 
```

您也可以通过 xml 属性管理视图可见性`android:visibility`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T12:01:45.380

查看 View 类的 setVisibility 方法。它允许您非常简单地使视图从 UI 中出现或消失。

在您的按钮的点击侦听器中，只需添加`view.setVisibility(View.GONE)`即可使任何布局或小部件消失。您可以通过调用使其重新出现`view.setVisibility(View.VISIBLE)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T12:00:36.600

动态添加或删除视图的示例：

```
TextView tv = new TextView(this);

        tv.setWidth(LayoutParams.WRAP_CONTENT);

        LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
                LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
        params.gravity = Gravity.RIGHT;
        tv.setLayoutParams(params);
        tv.setTextAppearance(this, R.style.darkTextNormal);
        tv.setBackgroundResource(R.color.lightBlue);
        tv.setTextSize(16);

yourLinearLayout.addView(tv); 
```

// 或者

```
yourLinearLayout.removeView(tv); 
```

# java - java source file with all possible syntactic constructions

> ID：10515593
> 
> 赞同：1
> 
> 时间：2012-05-09T11:56:16.697
> 
> 标签：java

Are there any java source code files with as much as possible of syntactic constructions? Some sort of test files for java compiler. I need that file for testing java source code parser.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:01:47.720

查看[Java Compatibility Kit](http://openjdk.java.net/groups/conformance/docs/JCK6bUsersGuide/html/p3.html) ，作为Java 标准的特殊[技术兼容性工具包。](http://jcp.org/en/resources/tdk)

# python - 如何在 Python 中实现多维数组或记录数组？

> ID：10515597
> 
> 赞同：0
> 
> 时间：2012-05-09T11:56:49.903
> 
> 标签：python, arrays, records

我在计算机科学课上学习了关于多维数组和数组记录的理论，但我不确定如何在 Python 中实现这一点。我正在考虑使用一组记录，因为它可以让我在一个记录中拥有不同的数据类型，但同时我认为多维数组也可以在 Python 中学习。

我用谷歌搜索了一下，我找到了 numpy，但我不确定我会使用 numpy 中的哪个函数。我看到一个带有元组的，但我并不热衷于使用它，因为元组不能被修改。

我正在使用 Python 3.2，但我也不介意使用 Python 2.7。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T11:59:56.273

取决于你想如何与他们互动。考虑使用[Numpy](http://numpy.scipy.org/)。具体来说，看看[N-Dimensional array](http://docs.scipy.org/doc/numpy/reference/arrays.ndarray.html)。它为操作和比较提供了丰富的 API。

如果 numpy 感觉有点矫枉过正，您可以使用简单的元组/列表来实现多数组。

```
multi_array = [
    [1, 2, 3, 4, 5],
    [6, 7, 8, 9, 10]
]

>>> multi_array[0][0]
>>> multi_array[1][4] 
```

例如，要转换`multi_array`为 numpy `ndarray`：

```
import numpy as np
np.ndarray((2, 5), buffer=np.array(multi_array), dtype=int) 
```

请注意， ndarray 期望它是第一个参数 a `shape`。这意味着您需要在创建数组之前知道数组的维度。更改 ndarray 的尺寸称为“重塑”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:00:56.507

不确定“记录”是什么意思，但您可以使用列表列表来表示二维数组。阅读[文档](http://docs.python.org/tutorial/datastructures.html)以了解更多信息。

# php - 将mysql表内容从一台服务器复制到另一台服务器

> ID：10515598
> 
> 赞同：5
> 
> 时间：2012-05-09T11:56:50.190
> 
> 标签：php, mysql, database-metadata

如何将表从服务器**A**数据库**db1**复制到服务器**B**数据库**db2**？

我能够将表从一个数据库复制到服务器内的另一个数据库，但不能跨服务器。

```
CREATE TABLE recipes_new LIKE production.recipes; 
INSERT recipes_new SELECT * FROM production.recipes; 
```

我所做的一切都是为了减少服务器负载，以便我可以将表信息复制到另一台服务器并在那里运行我的查询......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T12:03:47.747

您可以使用[mysqldump](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)转储表并将转储的文件导入其他服务器：

```
mysqldump - root -p db1 tabletoexp > table.sql 
```

另一方面：

```
mysql -u root -p db2 < table.sql 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:02:39.013

如果大小很小，您可以导出整个数据库，否则您只能导出数据库的结构。当您在phpmysql中选择Db时，有一个称为export的链接。

单击它，将其保存到一个文件中。并在其他服务器中导入相同的文件。

# sonarqube - 声纳 3.0 安装错误

> ID：10515599
> 
> 赞同：1
> 
> 时间：2012-05-09T11:56:52.420
> 
> 标签：sonarqube

我已将 Sonar 3.0 安装到我的服务器机器上，但会生成此错误代码..

```
STATUS | wrapper  | 2012/05/09 15:05:31 | --> Wrapper Started as Console
STATUS | wrapper  | 2012/05/09 15:05:31 | Launching a JVM...
INFO   | jvm 1    | 2012/05/09 15:05:31 | Wrapper (Version 3.2.3) http://wrapper.tanukisoftware.org
INFO   | jvm 1    | 2012/05/09 15:05:31 |   Copyright 1999-2006 Tanuki Software, Inc.  All Rights Reserved.
INFO   | jvm 1    | 2012/05/09 15:05:31 | 
INFO   | jvm 1    | 2012/05/09 15:05:31 | 2012-05-09 15:05:31.792:INFO::Logging to STDERR via org.mortbay.log.StdErrLog
INFO   | jvm 1    | 2012/05/09 15:05:31 | 2012-05-09 15:05:31.823:INFO::jetty-6.1.25
INFO   | jvm 1    | 2012/05/09 15:05:31 | 2012-05-09 15:05:31.933:INFO::NO JSP Support for /, did not find org.apache.jasper.servlet.JspServlet
2012.05.09 15:05:32 INFO  o.s.c.p.Database  Create JDBC datasource
2012.05.09 15:05:32 ERROR o.s.s.p.Platform  Error resolving class . Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'Integer'.  Cause: java.lang.ClassNotFoundException: Cannot find class: Integer
org.apache.ibatis.builder.BuilderException: Error resolving class . Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'Integer'.  Cause: java.lang.ClassNotFoundException: Cannot find class: Integer
    at org.apache.ibatis.builder.BaseBuilder.resolveClass(BaseBuilder.java:69) ~[mybatis-3.0.6.jar:3.0.6]
    at org.apache.ibatis.builder.xml.XMLStatementBuilder.parseStatementNode(XMLStatementBuilder.java:40) ~[mybatis-3.0.6.jar:3.0.6]
    at org.apache.ibatis.builder.xml.XMLMapperBuilder.buildStatementFromContext(XMLMapperBuilder.java:108) ~[mybatis-3.0.6.jar:3.0.6]
    at org.apache.ibatis.builder.xml.XMLMapperBuilder.configurationElement(XMLMapperBuilder.java:98) ~[mybatis-3.0.6.jar:3.0.6]
    at org.apache.ibatis.builder.xml.XMLMapperBuilder.parse(XMLMapperBuilder.java:75) ~[mybatis-3.0.6.jar:3.0.6]
    at org.sonar.core.persistence.MyBatis.loadMapper(MyBatis.java:136) ~[sonar-core-3.0.jar:na]
    at org.sonar.core.persistence.MyBatis.start(MyBatis.java:87) ~[sonar-core-3.0.jar:na]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.7.0_04]
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[na:1.7.0_04]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[na:1.7.0_04]
    at java.lang.reflect.Method.invoke(Unknown Source) ~[na:1.7.0_04]
    at org.picocontainer.lifecycle.ReflectionLifecycleStrategy.invokeMethod(ReflectionLifecycleStrategy.java:110) ~[picocontainer-2.14.1.jar:na]
    at org.picocontainer.lifecycle.ReflectionLifecycleStrategy.start(ReflectionLifecycleStrategy.java:89) ~[picocontainer-2.14.1.jar:na]
    at org.picocontainer.injectors.AbstractInjectionFactory$LifecycleAdapter.start(AbstractInjectionFactory.java:84) ~[picocontainer-2.14.1.jar:na]
    at org.picocontainer.behaviors.AbstractBehavior.start(AbstractBehavior.java:169) ~[picocontainer-2.14.1.jar:na]
    at org.picocontainer.behaviors.Stored$RealComponentLifecycle.start(Stored.java:132) ~[picocontainer-2.14.1.jar:na]
    at org.picocontainer.behaviors.Stored.start(Stored.java:110) ~[picocontainer-2.14.1.jar:na]
    at org.picocontainer.DefaultPicoContainer.potentiallyStartAdapter(DefaultPicoContainer.java:1009) ~[picocontainer-2.14.1.jar:na]
    at org.picocontainer.DefaultPicoContainer.startAdapters(DefaultPicoContainer.java:1002) ~[picocontainer-2.14.1.jar:na]
    at org.picocontainer.DefaultPicoContainer.start(DefaultPicoContainer.java:760) ~[picocontainer-2.14.1.jar:na]
    at org.sonar.api.platform.ComponentContainer.startComponents(ComponentContainer.java:70) ~[sonar-plugin-api-3.0.jar:na]
    at org.sonar.server.platform.Platform.startDatabaseConnectors(Platform.java:150) ~[classes/:na]
    at org.sonar.server.platform.Platform.init(Platform.java:99) ~[classes/:na]
    at org.sonar.server.platform.PlatformLifecycleListener.contextInitialized(PlatformLifecycleListener.java:33) [classes/:na]
    at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548) [jetty-6.1.25.jar:6.1.25]
    at org.mortbay.jetty.servlet.Context.startContext(Context.java:136) [jetty-6.1.25.jar:6.1.25]
    at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1272) [jetty-6.1.25.jar:6.1.25]
    at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517) [jetty-6.1.25.jar:6.1.25]
    at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:489) [jetty-6.1.25.jar:6.1.25]
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) [jetty-util-6.1.25.jar:6.1.25]
    at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130) [jetty-6.1.25.jar:6.1.25]
    at org.mortbay.jetty.Server.doStart(Server.java:224) [jetty-6.1.25.jar:6.1.25]
    at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50) [jetty-util-6.1.25.jar:6.1.25]
    at org.sonar.application.JettyEmbedder.start(JettyEmbedder.java:72) [sonar-application-3.0.jar:na]
    at org.sonar.application.StartServer.main(StartServer.java:48) [sonar-application-3.0.jar:na]
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:1.7.0_04]
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source) ~[na:1.7.0_04]
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source) ~[na:1.7.0_04]
    at java.lang.reflect.Method.invoke(Unknown Source) ~[na:1.7.0_04]
    at org.tanukisoftware.wrapper.WrapperSimpleApp.run(WrapperSimpleApp.java:240) [wrapper-3.2.3.jar:3.2.3]
    at java.lang.Thread.run(Unknown Source) [na:1.7.0_04]
Caused by: org.apache.ibatis.type.TypeException: Could not resolve type alias 'Integer'.  Cause: java.lang.ClassNotFoundException: Cannot find class: Integer
    at org.apache.ibatis.type.TypeAliasRegistry.resolveAlias(TypeAliasRegistry.java:93) ~[mybatis-3.0.6.jar:3.0.6]
    at org.apache.ibatis.builder.BaseBuilder.resolveAlias(BaseBuilder.java:93) ~[mybatis-3.0.6.jar:3.0.6]
    at org.apache.ibatis.builder.BaseBuilder.resolveClass(BaseBuilder.java:67) ~[mybatis-3.0.6.jar:3.0.6]
    ... 40 common frames omitted
Caused by: java.lang.ClassNotFoundException: Cannot find class: Integer
    at org.apache.ibatis.io.ClassLoaderWrapper.classForName(ClassLoaderWrapper.java:173) ~[mybatis-3.0.6.jar:3.0.6]
    at org.apache.ibatis.io.ClassLoaderWrapper.classForName(ClassLoaderWrapper.java:72) ~[mybatis-3.0.6.jar:3.0.6]
    at org.apache.ibatis.io.Resources.classForName(Resources.java:235) ~[mybatis-3.0.6.jar:3.0.6]
    at org.apache.ibatis.type.TypeAliasRegistry.resolveAlias(TypeAliasRegistry.java:89) ~[mybatis-3.0.6.jar:3.0.6]
    ... 42 common frames omitted
INFO   | jvm 1    | 2012/05/09 15:05:32 | 2012-05-09 15:05:32.603:WARN::Failed startup of context org.mortbay.jetty.webapp.WebAppContext@1526c5f{/,file:/D:/sonar-3.0/war/sonar-server}
INFO   | jvm 1    | 2012/05/09 15:05:32 | org.apache.ibatis.builder.BuilderException: Error resolving class . Cause: org.apache.ibatis.type.TypeException: Could not resolve type alias 'Integer'.  Cause: java.lang.ClassNotFoundException: Cannot find class: Integer
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at org.apache.ibatis.builder.BaseBuilder.resolveClass(BaseBuilder.java:69)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at org.apache.ibatis.builder.xml.XMLStatementBuilder.parseStatementNode(XMLStatementBuilder.java:40)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at org.apache.ibatis.builder.xml.XMLMapperBuilder.buildStatementFromContext(XMLMapperBuilder.java:108)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at org.apache.ibatis.builder.xml.XMLMapperBuilder.configurationElement(XMLMapperBuilder.java:98)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at org.apache.ibatis.builder.xml.XMLMapperBuilder.parse(XMLMapperBuilder.java:75)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at org.sonar.core.persistence.MyBatis.loadMapper(MyBatis.java:136)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at org.sonar.core.persistence.MyBatis.start(MyBatis.java:87)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at java.lang.reflect.Method.invoke(Unknown Source)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at org.picocontainer.lifecycle.ReflectionLifecycleStrategy.invokeMethod(ReflectionLifecycleStrategy.java:110)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at org.picocontainer.lifecycle.ReflectionLifecycleStrategy.start(ReflectionLifecycleStrategy.java:89)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at org.picocontainer.injectors.AbstractInjectionFactory$LifecycleAdapter.start(AbstractInjectionFactory.java:84)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at org.picocontainer.behaviors.AbstractBehavior.start(AbstractBehavior.java:169)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at org.picocontainer.behaviors.Stored$RealComponentLifecycle.start(Stored.java:132)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at org.picocontainer.behaviors.Stored.start(Stored.java:110)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at org.picocontainer.DefaultPicoContainer.potentiallyStartAdapter(DefaultPicoContainer.java:1009)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at org.picocontainer.DefaultPicoContainer.startAdapters(DefaultPicoContainer.java:1002)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at org.picocontainer.DefaultPicoContainer.start(DefaultPicoContainer.java:760)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at org.sonar.api.platform.ComponentContainer.startComponents(ComponentContainer.java:70)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at org.sonar.server.platform.Platform.startDatabaseConnectors(Platform.java:150)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at org.sonar.server.platform.Platform.init(Platform.java:99)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at org.sonar.server.platform.PlatformLifecycleListener.contextInitialized(PlatformLifecycleListener.java:33)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at org.mortbay.jetty.handler.ContextHandler.startContext(ContextHandler.java:548)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at org.mortbay.jetty.servlet.Context.startContext(Context.java:136)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1272)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:489)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at org.mortbay.jetty.handler.HandlerWrapper.doStart(HandlerWrapper.java:130)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at org.mortbay.jetty.Server.doStart(Server.java:224)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at org.sonar.application.JettyEmbedder.start(JettyEmbedder.java:72)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at org.sonar.application.StartServer.main(StartServer.java:48)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at java.lang.reflect.Method.invoke(Unknown Source)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at org.tanukisoftware.wrapper.WrapperSimpleApp.run(WrapperSimpleApp.java:240)
INFO   | jvm 1    | 2012/05/09 15:05:32 |   at java.lang.Thread.run(Unknown Source)
INFO   | jvm 1    | 2012/05/09 15:05:32 | 2012-05-09 15:05:32.603:INFO::Started SelectChannelConnector@0.0.0.0:9000 
```

我在自己的笔记本电脑上安装了 Sonar，然后我没有遇到任何问题。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-03T16:18:17.337

是的，正如您所猜测的，这与您系统的字符编码有关。

您可以通过将以下 Java 附加参数添加到 conf/wrapper.conf 来解决该问题

```
wrapper.java.additional.3=-Duser.language=en 
```

# extjs4 - 如何将存储值分配给隐藏字段

> ID：10515600
> 
> 赞同：0
> 
> 时间：2012-05-09T11:57:04.113
> 
> 标签：extjs4

我有一个模型和商店，我需要为商店中的隐藏字段分配一个值。

```
Ext.define('loginUser', {
            extend: 'Ext.data.Model',
            fields: [               
                { name: 'id', mapping: 'Provider.id' },
                { name: 'name', mapping: 'Provider.name' }
            ]
        });

loggedUser = Ext.create('Ext.data.Store', {
            model: 'loginUser',
            autoLoad: true,
            proxy: {
                type: 'ajax',
                url : url+'/lochweb/loch/users/getLoggedUser',
                reader: {
                 type: 'json',
                 root: 'Users'
                }                   
            }

        }); 
```

我需要将存储值分配给隐藏字段，如下所示，

```
CProvider = new Ext.create('Ext.ux.form', {
   items: [{
      xtype:'hidden',                       
      name:'clearingHouseID',                       
      store:loggedUser
      value:id
   }]
}); 
```

但该值未分配给隐藏值。有没有办法将它的存储值分配给隐藏字段？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T22:04:42.770

您可以使用表单的 loadRecord 函数将记录绑定到表单。这些方面的东西：

```
loggedUser.on('load', function (store, records, success) {
    if (success && records.length === 1) {
       CProvider.loadRecord(records[0]);
    }    
}); 
```

然后将表单字段更改为模型中要存储在隐藏字段中的字段名称。

```
CProvider = new Ext.create('Ext.ux.form', {
   items: [{
      xtype:'hidden',                       
      name:'name',                       
      store:loggedUser
      value:id
   }]
}); 
```

隐藏字段只能存储您正在加载到表单中的模型的一个字段的值。

# php - 贝宝集成 - 添加到购物车按钮

> ID：10515604
> 
> 赞同：1
> 
> 时间：2012-05-09T11:57:14.180
> 
> 标签：php, mysql, html, paypal

我正在制作一个电子商务网站，目前正在尝试使用 Paypal 实现我的购物车。

我有一个通过以下代码创建的产品表：

```
<?php
    while($row=mysql_fetch_array($result)) {
    ?>
    <tr>
    <td><?php echo $row['name'] ?></td>
    <td><?php echo $row['description'] ?></td>
    <td>£<?php echo $row['price'] ?></td>
    <td><?php echo $row['stockLevel'] ?></td>
    <td><!--Add to cart button will go here--></td>
    </tr>

    <?php
    }
    ?> 
```

这是通过我的表格并获取组件详细信息并通过表格显示它们。现在使用 Paypal 添加到购物车按钮，您必须手动输入产品的详细信息（例如输入产品名称、价格等），然后 Paypal 在其网站上为您生成它，这样您就可以复制/粘贴 HTML。我想知道是否有一种方法可以做我现在正在做的事情，即我通过数据库填充表，同时还创建一个链接到该组件的 Paypal 按钮，这样我就不必创建单独的每个组件的按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T22:09:30.950

对于那些想知道我是如何做到的人：

您只需`<?php echo $row['name'] ?>`在“名称”是您的特定列的地方进行操作。我所缺少的只是一个回声。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:54:25.103

贝宝提供添加到购物车按钮在网站上完整的代码...检查下面的链接。

[https://www.paypal.com/cgi-bin/webscr?cmd=p/xcl/web-accept-to-sc-button-outside](https://www.paypal.com/cgi-bin/webscr?cmd=p/xcl/web-accept-to-sc-button-outside)

# powershell - 如何使用 PowerShell 一次加载和处理一个文件

> ID：10515606
> 
> 赞同：1
> 
> 时间：2012-05-09T11:57:27.420
> 
> 标签：powershell, foreach, directory-structure

我得到了以下脚本来加载大约十万个 .doc 文件并在它们上运行一个程序。根据输出，文件被分组到文件夹中。我在一个文件很少的本地目录上测试了脚本，它按预期工作。

但是当从大量文件加载时，脚本会打印“Loading Files....”并停留在那里。脚本似乎正在等待它从语料库中加载所有文件。如果是这种情况，有没有办法一次加载和处理一个文件？

如果您也可以评论效率方面，那就太好了。

```
$path = "\\Storage\100kCorpus"
$filter = "*.doc"
$count = 0
Write-Host "Loading files....";
$files = @(get-childitem -recurse -path $path -filter $filter)
Write-Host "files loaded";
foreach ($file in $files) {
    $count ++
    Write-Host "$file.FullName";
    $out = & "D:\Test\doc\Verify.exe" /i:$file.FullName 
    $failed_file_location="D:\Test\doc\2875555\$out";
    if (($out -ne "passed") -and !(Test-Path -path $failed_file_location )){
        [IO.Directory]::CreateDirectory($failed_file_location)
        Copy-Item $file $failed_file_location
    }
}

Write-Host "There are $count files with the pattern $filer in folder $path" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T12:05:12.637

如果您通过管道输出 的输出`get-childitem`，而不是将其保存到数组中，它将按照您想要的方式工作，即

```
get-childitem -recurse -path $path -filter $filter | % {
    $file = $_
    $count ++
    # etc ...
} 
```

请注意，这`$file = $_`只是为了您不必过多地修改脚本。

效率方面我没什么好说的，除了这样你也避免了将所有文件对象存储到一个数组（`$files`）中，所以这个版本至少避免了不必要的操作。

# expression-blend - Expression Blend 的自定义编辑器

> ID：10515607
> 
> 赞同：0
> 
> 时间：2012-05-09T11:57:29.340
> 
> 标签：expression-blend

Expression Blend 带有一堆颜色、渐变、集合等编辑器。是否可以扩展表达式混合以支持自定义编辑器？例如，您可能需要为现有类型（如 TimeSpans）或全新类型提供自定义编辑器。

我在 msdn 上找不到任何东西，但我也找不到任何关于它的讨论 - 所以我基本上只是希望我的期望得到证实，这不受支持。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T14:22:46.653

我不确定这是否直接符合您的问题，但您可以在您的行为等中设置值属性编辑，如果这是您正在寻找的。

[http://msdn.microsoft.com/en-us/library/microsoft.windows.design.propertyediting%28VS.100%29.aspx](https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2010/bb548204(v=vs.100))

[http://msdn.microsoft.com/en-us/library/bb514507%28VS.100%29.aspx](https://docs.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2010/bb514507(v=vs.100))

# android - google.ads.AdView 在三星 Galaxy Note 中没有占据整个屏幕的宽度

> ID：10515608
> 
> 赞同：3
> 
> 时间：2012-05-09T11:57:50.783
> 
> 标签：android, admob, adview

我`google.ads.AdView`在屏幕底部的应用程序中显示一个。一切正常。但唯一的问题是它在显示时不会占用屏幕的整个宽度`Samsung galaxy note`，但是在显示时`Nexus s`它会占用屏幕的整个宽度。

为什么会发生这种情况，有没有办法解决这个问题？

**我放置的 XML 布局`google.ads.AdView`是：**

```
<LinearLayout
    android:id="@+id/bottom_control_bar"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:orientation="horizontal" >

    <com.google.ads.AdView
        android:id="@+id/adView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        ads:adSize="BANNER"
        ads:adUnitId="a14e5222d46c63d"
        ads:loadAdOnCreate="true" >
    </com.google.ads.AdView>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-09T12:52:00.433

AdView 的宽度取决于属性 adSize。[您可以在https://developers.google.com/mobile-ads-sdk/docs/admob/android/banner#banner_size](https://developers.google.com/mobile-ads-sdk/docs/admob/android/banner#banner_size)中检查此属性的各种值。`SMART_BANNER`如果您使用的是 AbMob v6.0.0 或更高版本，则可以使用该常量。

```
 <com.google.ads.AdView android:id="@+id/adView"
                     android:layout_width="wrap_content"
                     android:layout_height="wrap_content"
                     ads:adUnitId="yourAdUnitId"                         
                     ads:adSize="SMART_BANNER"
                     ads:loadAdOnCreate="true"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:31:11.393

我有两个建议。首先尝试将宽度设置为 match_parent。如果 addmob 无法做到这一点，那么我建议您将其与 layout_gravity="center" 居中，这样它看起来不那么愚蠢:)

# javascript - 在非 IE 浏览器中访问 API 方法

> ID：10515610
> 
> 赞同：0
> 
> 时间：2012-05-09T11:57:56.803
> 
> 标签：javascript

我在表格 td 标记内的 aspx 页面中有一个设备，如下所示

```
<td style="text-align: left;" colspan="2">
       <object id="Myobject" style="left: 0px; top: 0px" height="0" width="0"                                     classid="CLSID:6283f7ea-608c-11dc" name="Myobject" >
       </object>
</td> 
```

该对象有许多可以在 IE 6,7 和 9 中访问的方法。它会抛出错误“不支持对象方法”或“Google Chrome/Mozilla 中找不到对象方法

我如何访问这些方法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:00:33.057

There is a distact lack of any data associated with that `<object>`. Presumably, however, it is an ActiveX control.

ActiveX controls are not supported by any browser other then Internet Explorer on Windows.

In short, you can't.

# symfony - 如何防止 Symfony2 转义 html

> ID：10515612
> 
> 赞同：4
> 
> 时间：2012-05-09T11:58:41.943
> 
> 标签：symfony, symfony-forms

我正在使用 symfony2 开发一个网站，并且在后台我想添加一个 html 代码来包含一个播放器。我正在使用`raw`带有 twig 的函数来获取 html，但问题是当我输入 html 代码时 Symfony 正在转义引号。我怎样才能避免这种情况并让 symfony 记录原始 html？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T21:44:25.697

我找到了解决方案。实际上它与 symfony 无关，只是因为 magic_quotes。我在 htaccess 中禁用了它们，一切都很好。

# objective-c - 以编程方式更改 UISegmentedControl 标题

> ID：10515614
> 
> 赞同：2
> 
> 时间：2012-05-09T11:58:45.033
> 
> 标签：objective-c, xcode, uisegmentedcontrol

如何以编程方式更改 UISegmentedControl 标题？请你帮助我好吗？

```
@synthesize filterControl; //UISegmentedControl

- (void)viewDidLoad
{
    [super viewDidLoad];

    filterControl = [[UISegmentedControl alloc] initWithItems:[NSArray arrayWithObjects:@"ALL",@"PROFIT",@"LOSS", nil]]; //not working

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-24T18:50:45.400

只需使用

```
-setTitle:(NSString*)title forSegmentAtIndex:(NSUInteger)index; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-24T05:18:01.407

可以`sectionTitles`直接改。

经常错过的是 call `setNeedsDisplay()`。

Swift 中的代码：

```
segmentedControl.sectionTitles = ["All", "Profit", "Loss"]
segmentedControl.setNeedsDisplay() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-28T06:57:43.107

```
 [filterControl setTitle:@"All" forSegmentAtIndex:0];
 [filterControl setTitle:@"PROFIT" forSegmentAtIndex:1];
 [filterControl  setTitle:@"LOSS" forSegmentAtIndex:2]; 
```

尝试这个。希望它对你有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-05-09T06:56:47.683

> 更新 ：

***使用下面的简单代码以编程方式设置 UISegmentControl 标题；***

```
- (void)viewDidLoad {

    [super viewDidLoad];

     [self.segmentControl setTitle:@"Love It" forSegmentAtIndex:0];
     [self.segmentControl setTitle:@"Hate It" forSegmentAtIndex:1];        
     [self.segmentControl setTitle:@"Ehh" forSegmentAtIndex:2];
} 
```

*// 注意：这里 self.segmentControl = filterControl*

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-07T13:07:11.020

***斯威夫特5***

要更改 HmSegment 控件的标题字体和大小，您必须使用 titleTextAttributes 属性。

```
segmentedControl.titleTextAttributes = [NSAttributedString.Key.font: UIFont(name: "Poppins-Medium", size: 16.0) as Any]
segmentedControl.setNeedsDisplay() 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-05-09T12:00:54.307

您是否已将 filterControl 作为子视图添加到其父视图中？

# asp.net-mvc - 架构决策：ASP.NET MVC & Entity Framework

> ID：10515623
> 
> 赞同：2
> 
> 时间：2012-05-09T11:59:28.560
> 
> 标签：asp.net-mvc, asp.net-mvc-3, entity-framework, architecture, n-tier-architecture

我遇到了一个架构决策问题：我们即将构建一个新的应用程序，并且我们已经决定我们将使用**ASP.NET MVC**和**实体框架**（可能首先是数据库）。在最初的情况下，我们只会为普通浏览器构建一个 Web 应用程序，但将来我们可能会添加移动应用程序。（SOA？）

我现在的问题是构建应用程序架构的最佳方式是什么？

这是正确的吗？

1.  Mvc项目
    *   模型
    *   看法
    *   控制器
2.  DAL项目
    *   包含 edmx 和 T4 模板

我一直在寻找示例、模式和最佳实践，但似乎找不到合适的东西。

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-09T12:11:24.763

我通常构建解决方案的方式（适用于 NuGet 的*编辑）*

1.  网站 (MVC)
    *   控制器
    *   意见
    *   内容（脚本、CSS、图像等）
2.  演示模型（对于简单的项目，这将嵌入到网站中）
    *   查看模型
    *   模型映射器
3.  商业逻辑
    *   规则
    *   本地扩展（Web 和常规）
4.  数据（如果复杂，请为每个上下文/存储库/模型使用单独的子文件夹）
    *   存储库
    *   实体模型
    *   数据上下文和配置
5.  Web 库（可能作为可通过本地 NuGet 获得的单独解决方案）
    *   扩展（到 MVC/Web 类）
    *   助手类 = 属性
6.  通用库（可能作为可通过本地 NuGet 获得的单独解决方案）
    *   扩展
    *   助手类

依赖关系沿着这个结构向上流动，即上面的东西可能会引用下面的东西，但反之则不然。每个项目我也会有一个单独的测试项目。在某些情况下，我会为使用 NuGet 打包并托管在本地存储库中的 Web/常规类使用外部共享库。

对于移动设备，如果您通过网络访问，我会使用 jQuery Mobile 和移动感知视图引擎将其直接构建到网站中。如果您正在考虑本地化，那么我将添加一个 WebAPI 层，该层可能会或可能不会与网站共享相同的视图模型以进行 API 交付，并在此结构之外针对 API 开发移动应用程序。API 很可能有自己的模型，并位于业务层之上的单独堆栈中。在我当前的项目中，我们将数据放在单独的解决方案中，并在单独的解决方案中开发 API 和网站，通过 NuGet 包共享模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T12:10:44.280

听起来您的团队还没有足够的信息来做出决定。我知道这就是你在这里问这个问题的原因，但你不应该依赖你得到的任何答案。ASP.NET MVC 和 EF对您来说***可能***是一个很好的解决方案，但您不应该选择它，除非您至少完成过 Nerd Dinner 或[Music Store](http://www.asp.net/mvc)教程。

完成此操作后，您将能够回答自己有关架构的问题，并且可能还会发现一些其他问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T12:11:59.880

基本策略可能包含以下内容：

*   数据项目
    *   英孚模型
    *   实体/T4代
*   逻辑项目
    *   申请规则
    *   与数据呈现无关的逻辑
*   现场项目
    *   表示/聚合逻辑（在控制器/视图中）
    *   意见
    *   脚本/资产
    *   模型（仅用于控制器和视图之间的通信）
*   移动项目
    *   与站点相同的东西，但针对移动目标

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T16:34:45.393

首先，您必须决定您希望如何实现您网站的移动版本。基本上你有两个选择：

*   为您的移动页面创建单独的视图/控制器。这种解决方案是最昂贵的，但也是最灵活的。（查看 MVC 4 中的移动支持）
*   为您的网站创建响应式布局 ( [http://jquerymobile.com/](http://jquerymobile.com/) ) 通常我更喜欢这个选项。

通常我使用3个项目

*   达尔
    *   包含 Edmx、T4 模板
*   服务
    *   具有 CRUD 操作的服务类（我没有使用存储库，因为它们太过分了）
    *   查看模型
*   网络
    *   控制器，视图，...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T12:03:37.377

我认为您选择了正确的应用程序架构，我们也在我们的一个项目中使用了相同的应用程序架构......

```
MvcProject
Model
View
Controller

DAL project
Holds edmx and T4 templates 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T12:13:36.297

请记住，最佳架构与预算和时间表直接相关。

MVC 将比普通的 asp.net 花费更多：

*   MVC 强制开发人员始终使用 3 层
*   MVC 开发人员更昂贵且更难获得

当您说 DAL 项目时，我假设您的意思是常规的 asp.net。如果是这种情况，那么：

*   ASP.NET 开发比 MVC 更快
*   ASP.NET 网站将允许您使用更复杂的第三方网格等。
*   在美国广泛可用的人才

在移动开发方面，您为网站选择什么并不重要。您的移动应用程序应使用设备的本地语言（IOS、Android 等）开发。然后您通过 SSL 和 JSON 与应用程序通信。

# iphone - 如何使图像视图的大小适合其父视图

> ID：10515624
> 
> 赞同：0
> 
> 时间：2012-05-09T11:59:42.140
> 
> 标签：iphone, objective-c, uiview, imageview

我有一个 UIView，我想添加一个图像作为它的子视图（[view addSubview:imageView]）。我想知道如何设置 imageView 的大小以适应 UIView 的大小（通过编程）。默认情况下，图像太大而无法显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:18:05.140

当孩子在其父母的视图中工作时，它应该使用父母的边界而不是父母的框架。

```
imageView.frame = self.bounds.frame 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:01:56.267

您可以将图像视图的框架设置为视图，例如 -

```
imageView.frame = self.view.frame 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T12:01:58.860

用这个

```
[imageView setFrame:CGRectMake(self.view.origin.x, self.view.origin.y, elf.view.bounds..size.width, self.view.bounds.size.height)]; 
```

# c# - 在 aspx 页面上填充多个文本框，直到遍历通用列表

> ID：10515625
> 
> 赞同：1
> 
> 时间：2012-05-09T11:59:47.967
> 
> 标签：c#, asp.net, loops, generic-list

在循环遍历通用列表并填充它可以填充的所有空文本框之前，在 aspx 页面上填充固定数量的文本框的好方法是什么？

我现在有以下内容，但如果列表中的答案较少，那么会有文本框出现 outOfBoundException。

```
else if(!IsPostBack) {
    Groups group = new Groups();
    List<Answers> AnswerList = new List<Answers>();
    //Get the group since the session isn't null
    group = group.getGroupbyId(int.Parse(Session["group_Id"].ToString()));
    //Get the list of answers of the group
    AnswerList = Answers.retrieveAnswersBygroupIdandPageNumber(group.Group_Id, pageNumberLab);

    if (AnswerList.Count != 0) {
        while (TextAnswerNumber < AnswerList.Count) {
            ContentPlaceHolder cph = (ContentPlaceHolder)Master.FindControl("ContentPlaceHolder1");

            foreach (Control control in cph.Controls) {
                if (control is Panel) {
                    Panel panel = (Panel)control;
                    foreach (Control controlInPanel in panel.Controls) {

                    //If the control is a textbox
                    if (controlInPanel is TextBox && controlInPanel.ID.Contains("txtAnswer")) {
                        //And if the control ID containst txtAnswer                                    
                        //IMPORTANT: If next programmer adds another textbox for an answer textbox the ID must be in the form txtMember*".
                        TextBox answerTextBox = (TextBox)controlInPanel;
                        // Check if the textbox is empty

                        if (answerTextBox.Text == "") {
                            //If it is, fill it with the answer that group filled in when it previously answered this question.
                            answerTextBox.Text = AnswerList[TextAnswerNumber].Answer;
                            answerTextBox.ReadOnly = true;
                            TextAnswerNumber++;
                        }
                    }
                }
            }
        }
    }
}
            } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:15:20.260

在 AnswerList 上做一个 foreach

```
else if(!IsPostBack) { 
    Groups group = new Groups(); 
    List<Answers> AnswerList = new List<Answers>(); 
    //Get the group since the session isn't null 
    group = group.getGroupbyId(int.Parse(Session["group_Id"].ToString())); 
    //Get the list of answers of the group 
    AnswerList = Answers.retrieveAnswersBygroupIdandPageNumber(group.Group_Id, pageNumberLab); 

    if (AnswerList.Count != 0) { 
        foreach(Answer ans in AnswerList) { 
            ContentPlaceHolder cph = (ContentPlaceHolder)Master.FindControl("ContentPlaceHolder1"); 

            foreach (Control control in cph.Controls) { 
                if (control is Panel) { 
                    Panel panel = (Panel)control; 
                    foreach (Control controlInPanel in panel.Controls) { 

                    //If the control is a textbox 
                    if (controlInPanel is TextBox && controlInPanel.ID.Contains("txtAnswer")) { 
                        //And if the control ID containst txtAnswer                                     
                        //IMPORTANT: If next programmer adds another textbox for an answer textbox the ID must be in the form txtMember*". 
                        TextBox answerTextBox = (TextBox)controlInPanel; 
                        // Check if the textbox is empty 

                        if (answerTextBox.Text == "") { 
                            //If it is, fill it with the answer that group filled in when it previously answered this question. 
                            answerTextBox.Text = ans.Answer; 
                            answerTextBox.ReadOnly = true; 
                        } 
                    } 
                } 
            } 
        } 
    } 
} 
            } 
```

# c# - 相交碰撞纹理上的 XNA 矩形叠加

> ID：10515628
> 
> 赞同：1
> 
> 时间：2012-05-09T12:00:00.557
> 
> 标签：c#, xna, textures

全部。

我们试图让一些相交碰撞工作，但问题体验是矩形没有覆盖纹理上的校正。

纹理是一个 20x340 像素的图像。在纹理的类（`Net`）中，我们有一个`Rectangle`用作碰撞盒（`SetCollisionBox`方法）。`Game`我们在类中（方法下）定义了以下内容`LoadContent()`。

```
g_Net = new Net("Net1");
g_scene.Place(g_Net, new Vector3(8, 100, 1));
g_Net.SetCollisionBox(new Rectangle((int)g_Net.Position.X, (int)g_Net.Position.Y, 20, 340)); 
```

我们遇到的问题是 Rectangle 被绘制在纹理（*Net*）上方并且调整高度确实使它更加对齐，但是只有上面可以与带有 a 的球对象碰撞`g_Ball.ballRectIntersect(g_Net.netRect)`。`netRect`是班级的公共成员`Rectangle`，`Net`并且是班级`ballRect`的等价物`Ball`。

所以我的问题是如何让`Rectangle`叠加层正确出现在纹理上，以便碰撞与整个网络纹理相对应？有没有更好的方法来放置这个叠加层？

非常感谢您提前。

干杯。

*   山姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T20:39:10.943

我假设您的纹理是 2D 的，因为您说的是 Texture，并且您使用的是 Rectangle 而不是 BoundingBox。

在这种情况下，这很容易回答。

要设置碰撞属性，请按照以下步骤操作。假设位置是我们的纹理位置，纹理是我们加载的纹理。

```
Rectangle boundingRect = new Rectangle(position.X, position.Y, position.X + texture.Width, position.Y + texture.Height); 
```

此外，如果您的游戏是 2D 游戏，则不应使用 Vector3 来存储位置，除非您被迫这样做。尝试使用 Vector2，它会为您节省一些内存。

干杯!

# xmlstarlet - xmlstarlet 计数逗号分隔

> ID：10515629
> 
> 赞同：0
> 
> 时间：2012-05-09T12:00:03.090
> 
> 标签：xmlstarlet

需要计算集群地址（服务器数量），请参见下面的 xml。谁能帮我。我尝试了很多东西，但我无法让它工作。

cluster-address 中的服务器用逗号分隔。

```
<name>WeblogicCluster</name>
<multicast-address>1.1.1.1.1</multicast-address>
<cluster-messaging-mode>unicast</cluster-messaging-mode>
<cluster-address>server1.domain.com,server2.domain.com</cluster-address>
<weblogic-plugin-enabled>true</weblogic-plugin-enabled>
<frontend-host>server.domain.com</frontend-host> 
```

在bash中我像这样解决了它，但是希望在xmlstarlet中做到这一点，有什么想法吗？

```
#!/bin/sh
address="$(xmlstarlet sel -N d=http://xmlns.oracle.com/weblogic/domain -t -v "/d:domain/d:cluster/d:cluster-address" config.xml 2>/dev/null)"
number=`echo ${address//","/" "} | wc -w`
echo $number 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T02:18:31.893

```
`xml sel -N d=http://xmlns.oracle.com/weblogic/domain -t -v \
 "[count](http://www.w3.org/TR/xpath/#function-count)([str:split](http://www.exslt.org/str/functions/split/index.html)(/d:domain/d:cluster/d:cluster-address, ','))" \
 config.xml` 
```

# javascript - in Iphone safari browser, getting error message while loading javascript whcih contains href

> ID：10515632
> 
> 赞同：-1
> 
> 时间：2012-05-09T12:00:15.470
> 
> 标签：javascript, html, mobile-safari

in IPhone safari browser, i am loading html page which contains href.ie,

```
function getxxxx(link) {
            var call1 = document.getElementById('CALL1');
            if (call1 && call1.innerHTML) {
                  link.href = "tel:" + call1.innerHTML;
                  alert(link.href);
                  return true;
            }
            return false;
      } 
```

I’m invoking the script like this,

```
<tr>
      <td><a class="statuscontent" href="#"
                        onclick="getxxxx(this)">
            <div class="imageContainer1">Call</div>
      </a></td>
      <td>
            <div id="CALL1" class="statuscontent"><%=custCareNumber1%></div>
      </td>
</tr> 
```

while loading this page in I Phone safari browser,getting the error "ahref"tel+188828600000">+188828600000". In other browsers or other phones like android are working fine.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:30:01.097

尝试`call1.text`代替innerHTML

# javascript - what's wrong with my simple script?

> ID：10515637
> 
> 赞同：1
> 
> 时间：2012-05-09T12:00:24.380
> 
> 标签：javascript

I am trying to write a very simple script and can't figure out the issue there. the function of the script should be displaying the inner html of each list element but it keeps showing only the last one which is 'Orange'

here is what i have in my html:

```
<ul id='mylist'>
  <li>Red</li>
  <li>Green</li>
  <li>Black</li>
  <li>Orange</li>
</ul> 
```

and below is that script:

```
var x = document.getElementById('mylist');
var z = x.getElementsByTagName('li');

for (i = 0; i < z.length; i++) {    
    var res = z[i].innerHTML;
    z[i].setAttribute('onclick','alert(res)');
} 
```

I probably need to add a closure here but i am not sure if i really need to and how to add it

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:08:07.423

尝试这个：

```
var x = document.getElementById('mylist');
var z = x.getElementsByTagName('li');

for (var i = 0; i < z.length; i++) {
    (function(i) {
        var res = z[i].innerHTML;
        z[i].onclick = function() {
            alert(res)
        };
    })(i);
}​ 
```

[http://jsfiddle.net/sssonline2/UYEa9/](http://jsfiddle.net/sssonline2/UYEa9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:12:10.507

Try this by making res as a identifier instead of string string constant [Demo on JsFiddle](http://jsfiddle.net/dBpnv/)

```
var x = document.getElementById('mylist');
var z = x.getElementsByTagName('li');

for(i=0;i<z.length;i++){
      var res = z[i].innerHTML;  
      z[i].setAttribute('onclick',"alert('"+res+"');");

}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T12:15:06.230

一个简单的解决方案

HTML

```
<ul id="test-list">
    <li>One</li>
    <li>Two</li>
    <li>Three</li>
</ul> 
```

JavaScript

```
var x = document.getElementById( 'test-list' );
var li = x.getElementsByTagName( 'li' );

for( var i = 0; i < li.length; i++ ) {
    li[i].onclick = function() {
        alert( this.innerHTML );
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T12:10:25.550

这可以通过另一种方式完成

```
var lis = document.getElementsByTagName('li');
for (var i = 0; i < lis.length; i++) {  
        lis[i].addEventListener('click', 
            function() {
                console.log('asd');
                alert(this.innerHTML);
            }
            , false);
} 
```

[在 JSFiddle 上试试](http://jsfiddle.net/2TNjM/)

[根据 MDN，](https://developer.mozilla.org/en/DOM/element.addEventListener#Why_use_addEventListener.3F)使用 addEventListener 是当前推荐的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-12-22T19:47:26.237

首先，确保你有一个结束`</ul>`标签：

```
<ul id="test-list">
  <li>One</li>
  <li>Two</li>
  <li>Three</li>
</ul> 
```

其次，使用`onclick`DOM 对象的属性或`addEventListener()`：

```
var x = document.getElementById('mylist');
var z = x.getElementsByTagName('li');

for(i=0;i<z.length;i++){
  z[i].onclick = function() {
    alert(this.innerHTML); // In this scope, "this"
  };                      // means the element that was clicked
} 
```

或者

```
var x = document.getElementById('mylist');
var z = x.getElementsByTagName('li');

for(i=0;i<z.length;i++){
  z[i].addEventListener('click', function() {
    alert(this.innerHTML); // In this scope, "this"
  });                      // means the element that was clicked
} 
```

如果必须使用`setAttribute()`，则需要非常小心范围。的最后一个值`res`是`orange`，这就是浏览器记住的。当您单击该元素时，浏览器会检查它的当前值`res`并发出警报。如果你使用

```
setAttribute('onclick', 'alert"' + res '")'); 
```

它将`res`在循环的当前迭代中获取值`for`并将其注入到字符串中。

# iphone - iPhone - 从纬度和经度获取城市名称

> ID：10515639
> 
> 赞同：16
> 
> 时间：2012-05-09T12:00:34.417
> 
> 标签：iphone, objective-c, ios, google-maps

我想在我的 iPhone 应用程序中获取我当前的城市名称。

我目前正在使用 CLLocationManager 获取纬度和经度，然后将坐标传递给 CLGeocoder。

```
 CLGeocoder * geoCoder = [[CLGeocoder alloc] init];
    [geoCoder reverseGeocodeLocation:location completionHandler:^(NSArray *placemarks, NSError *error) {
        for (CLPlacemark * placemark in placemarks) {
            UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Current City" message:[NSString stringWithFormat:@"Your Current City:%@",[placemark locality]] delegate:self cancelButtonTitle:@"OK" otherButtonTitles:@"Cancel", nil];
            [alert  show];
        }  
    }]; 
```

这在 iOS 5.0 中运行良好，但在 iOS 4.3 中无法运行。

作为替代方案，我开始使用 Google Web 服务

```
-(void)findLocationFor:(NSString *)latitudeStr 
          andLontitude:(NSString *)longtitudeStr{
    if ([self connectedToWiFi]){
        float latitude  = [latitudeStr floatValue];
        float longitude = [longtitudeStr floatValue];
        NSMutableDictionary *parameters = [NSMutableDictionary dictionaryWithObjectsAndKeys: 
                                           [NSString stringWithFormat:@"%f,%f", latitude, longitude], @"latlng", nil];
        NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:[NSURL URLWithString:@"http://maps.googleapis.com/maps/api/geocode/json"]];
        [parameters setValue:@"true" forKey:@"sensor"];
        [parameters setValue:[[NSLocale currentLocale] objectForKey:NSLocaleLanguageCode] forKey:@"language"];
        NSMutableArray *paramStringsArray = [NSMutableArray arrayWithCapacity:[[parameters allKeys] count]];

        for(NSString *key in [parameters allKeys]) {
            NSObject *paramValue = [parameters valueForKey:key];
            [paramStringsArray addObject:[NSString stringWithFormat:@"%@=%@", key, paramValue]];
        }

        NSString *paramsString = [paramStringsArray componentsJoinedByString:@"&"];
        NSString *baseAddress = request.URL.absoluteString;
        baseAddress = [baseAddress stringByAppendingFormat:@"?%@", paramsString];
        [request setURL:[NSURL URLWithString:baseAddress]];

        NSError        *error    = nil;
        NSURLResponse  *response = nil;
        NSData *returnData = [NSURLConnection sendSynchronousRequest:request returningResponse:&response error:&error];
        if (response == nil) {
            if (error != nil) {
            }
        }
        else {
            NSDictionary *responseDict = [returnData objectFromJSONData];
            NSArray *resultsArray = [responseDict valueForKey:@"results"]; 
            NSMutableArray *placemarksArray = [NSMutableArray arrayWithCapacity:[resultsArray count]];
            for(NSDictionary *placemarkDict in resultsArray){
                NSDictionary *coordinateDict = [[placemarkDict valueForKey:@"geometry"] valueForKey:@"location"];

                float lat = [[coordinateDict valueForKey:@"lat"] floatValue];
                float lng = [[coordinateDict valueForKey:@"lng"] floatValue];

                NSMutableDictionary *dict = [[NSMutableDictionary alloc] init];
                [dict setObject:[NSString stringWithFormat:@"%.f",lat] forKey:@"latitude"];
                [dict setObject:[NSString stringWithFormat:@"%.f",lng] forKey:@"longitude"];
                [dict setObject:[placemarkDict objectForKey:@"formatted_address"] forKey:@"address"];

                [placemarksArray addObject:dict];
                [dict release];
            }
            NSDictionary *placemark = [placemarksArray objectAtIndex:0];
        }
    }
} 
```

但是我得到的响应太长了，这意味着我仍然无法获取城市名称，因为在某些情况下，此 Web 服务会提供有关坐标的所有其他信息，期望城市名称。

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-05-09T12:32:12.730

根据文档[CLGeocoder](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html)在 iOS5 下不起作用。您需要采取另一条路线来同时支持 iOS4 和 iOS5。

您可以查看[MKReverseGeocoder](http://developer.apple.com/library/ios/DOCUMENTATION/MapKit/Reference/MKReverseGeocoder_Class/Reference/Reference.html)，但它在 iOS5 中已被弃用，但仍可达到目的。为了确认，您可以检查[所谓的问题](https://stackoverflow.com/questions/7809142/clgeocoder-and-backward-compatibility)

```
+(NSString *)getAddressFromLatLon:(double)pdblLatitude withLongitude:(double)pdblLongitude
{
    NSString *urlString = [NSString stringWithFormat:@"http://maps.google.com/maps/geo?q=%f,%f&output=csv",pdblLatitude, pdblLongitude];
    NSError* error;
    NSString *locationString = [NSString stringWithContentsOfURL:[NSURL URLWithString:urlString] encoding:NSASCIIStringEncoding error:&error];
    locationString = [locationString stringByReplacingOccurrencesOfString:@"\"" withString:@""];
    return [locationString substringFromIndex:6];
} 
```

您可以使用此功能从纬度、经度获取地址。您可以根据需要进行更改。我们把它作为 Class 方法，所以我们可以直接使用它作为

```
NSString *strAddressFromLatLong = [CLassName getAddressFromLatLon:37.484848 withLongitude:74.48489]; 
```

**编辑**

请停止使用上述功能，因为它已停止在评论中报告（未经我测试）。我建议开始使用[SVGeocoder](https://github.com/samvermette/SVGeocoder)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-02-12T22:41:20.853

我正在使用它并获取邮政编码和城市名称。修改了 Janak 添加的方法。

```
- (void) getAddressFromLatLon:(CLLocation *)bestLocation
{
    NSLog(@"%f %f", bestLocation.coordinate.latitude, bestLocation.coordinate.longitude);
    CLGeocoder *geocoder = [[CLGeocoder alloc] init] ;
    [geocoder reverseGeocodeLocation:bestLocation
                   completionHandler:^(NSArray *placemarks, NSError *error)
    {
        if (error){
            NSLog(@"Geocode failed with error: %@", error);
            return;
        }
        CLPlacemark *placemark = [placemarks objectAtIndex:0];
        NSLog(@"placemark.ISOcountryCode %@",placemark.ISOcountryCode);
        NSLog(@"locality %@",placemark.locality);
        NSLog(@"postalCode %@",placemark.postalCode);

    }];

} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-08-24T09:54:54.033

这个对我有用 ：）

```
CLGeocoder *ceo = [[CLGeocoder alloc]init];
CLLocation *loc = [[CLLocation alloc]initWithLatitude:26.93611 longitude:26.93611];

[ceo reverseGeocodeLocation: loc completionHandler:
 ^(NSArray *placemarks, NSError *error) {
     CLPlacemark *placemark = [placemarks objectAtIndex:0];
     NSLog(@"placemark %@",placemark);
     //String to hold address
     NSString *locatedAt = [[placemark.addressDictionary valueForKey:@"FormattedAddressLines"] componentsJoinedByString:@", "];
     NSLog(@"addressDictionary %@", placemark.addressDictionary);

     NSLog(@"placemark %@",placemark.region);
     NSLog(@"placemark %@",placemark.country);  // Give Country Name
     NSLog(@"placemark %@",placemark.locality); // Extract the city name
     NSLog(@"location %@",placemark.name);
     NSLog(@"location %@",placemark.ocean);
     NSLog(@"location %@",placemark.postalCode);
     NSLog(@"location %@",placemark.subLocality);

     NSLog(@"location %@",placemark.location);
     //Print the location to console
     NSLog(@"I am currently at %@",locatedAt);
 }]; 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-05-09T12:41:31.240

```
//Place below parser code where you are reading latlng and place your latlng in the url
NSXMLParser *parser = [[NSXMLParser alloc]initWithContentsOfURL:[NSURL URLWithString:@"http://maps.googleapis.com/maps/api/geocode/xml?latlng=40.714224,-73.961452&sensor=false"]];
[parser setDelegate:self];
[parser parse];

// Below are the delegates which will get you the exact address easyly
-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{    
    if([elementName isEqualToString:@"formatted_address"]){
        got = YES; //got is a BOOL
    }
}

-(void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    if(got){
        NSLog(@"the address is = %@",string);
    }
}

-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{
}

//what we are doing is using xmlparser to parse the data which we get through the google map api copy above link and use in browser you will see the xml data brought 
```

对不起我的英语不好希望它会帮助你

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2015-04-20T14:50:09.730

在此处尝试此请求，您将找到有关当前位置、街道/城市/地区名称、门牌号的所有数据，但您只需粘贴此请求即可。

```
NSString *urlString = [NSString stringWithFormat:@"http://maps.googleapis.com/maps/api/geocode/json?latlng=%f,%f&sensor=false",pdblLatitude, pdblLongitude];
NSError* error;
NSString *locationString = [NSString stringWithContentsOfURL:[NSURL URLWithString:urlString] encoding:NSASCIIStringEncoding error:&error];

NSData *data = [locationString dataUsingEncoding:NSUTF8StringEncoding];
id json = [NSJSONSerialization JSONObjectWithData:data options:0 error:nil];

NSDictionary *dic = [[json objectForKey:kResults] objectAtIndex:0];
NSString *cityName = [[[dic objectForKey:@"address_components"] objectAtIndex:1] objectForKey:@"long_name"]; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-01-02T07:30:04.117

```
- (void)reverseGeocode:(CLLocation *)location {
CLGeocoder *geocoder = [[CLGeocoder alloc] init];
[geocoder reverseGeocodeLocation:location completionHandler:^(NSArray *placemarks, NSError *error) {
    NSLog(@"Finding address");
    if (error) {
        NSLog(@"Error %@", error.description);
    } else {
        CLPlacemark *placemark = [placemarks lastObject];
        self.myAddress.text = [NSString stringWithFormat:@"%@", ABCreateStringWithAddressDictionary(placemark.addressDictionary, NO)];
    }
}];
} 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2015-04-21T02:40:09.417

这很好，对我有用。

我使用 CLLocationManager 获取纬度和经度，然后将坐标传递给 CLGeocoder。

```
import @corelocation  and for getting city,country #import <AddressBook/AddressBook.h>
    -(void)locationManager:(CLLocationManager *)manager didUpdateLocations:(NSArray *)locations
    {
    CLLocation *location=[locations lastObject];
        CLGeocoder *geocoder=[[CLGeocoder alloc]init];

        CLLocationCoordinate2D coord;
        coord.longitude = location.coordinate.longitude;
        coord.latitude = location.coordinate.latitude;
        // or a one shot fill
        coord = [location coordinate];
        NSLog(@"longitude value%f", coord.longitude);
        NSLog(@"latitude value%f", coord.latitude);
        [geocoder reverseGeocodeLocation:location completionHandler:^(NSArray *placemarks, NSError *error) {
            CLPlacemark *placemark = placemarks[0];
            NSDictionary *addressDictionary = [placemark addressDictionary];
            city = addressDictionary[(NSString *)kABPersonAddressCityKey];
            stateloc = addressDictionary[(NSString *)kABPersonAddressStateKey];
            country = placemark.country;

            NSLog(@"city%@/state%@/country%@",city,stateloc,country);
           [self getImagesFromServer:city];

        }];

        [self stopSignificantChangesUpdates];

    }

- (void)stopSignificantChangesUpdates
{
    [self.locationManager stopUpdatingLocation];
    self.locationManager = nil;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-08-05T20:18:44.150

我改进了@Constantin Saulenco 很好的答案- json 结果并不总是以相同的顺序排列-所以城市并不总是在同一个索引中-这个函数将搜索正确的。也添加了国家。

```
NSString *urlString = [NSString stringWithFormat:@"http://maps.googleapis.com/maps/api/geocode/json?latlng=%f,%f&sensor=false",location.coordinate.latitude, location.coordinate.longitude];
NSError* error;
NSString *locationString = [NSString stringWithContentsOfURL:[NSURL URLWithString:urlString] encoding:NSASCIIStringEncoding error:&error];

NSData *data = [locationString dataUsingEncoding:NSUTF8StringEncoding];
id json = [NSJSONSerialization JSONObjectWithData:data options:0 error:nil];

NSDictionary *dic = [[json objectForKey:@"results"] objectAtIndex:0];
NSArray* arr = [dic objectForKey:@"address_components"];
//Iterate each result of address components - find locality and country
NSString *cityName;
NSString *countryName;
for (NSDictionary* d in arr)
{
    NSArray* typesArr = [d objectForKey:@"types"];
    NSString* firstType = [typesArr objectAtIndex:0];
    if([firstType isEqualToString:@"locality"])
        cityName = [d objectForKey:@"long_name"];
    if([firstType isEqualToString:@"country"])
        countryName = [d objectForKey:@"long_name"];

}

NSString* locationFinal = [NSString stringWithFormat:@"%@,%@",cityName,countryName]; 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-06-30T21:24:57.927

我找到了这段代码，它对我有用： [https](https://gist.github.com/flyworld/4222448) ://gist.github.com/flyworld/4222448 。

只需更改`placemark.ISOcountryCode`为`placemark.locality`.

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-12-15T14:33:14.233

请检查波纹管功能

```
func getDataCity(tmpLat:Double,tmpLong:Double) {

    let tmpCLGeocoder = CLGeocoder.init()
    if tmpLat > 0 , tmpLong > 0
    {
        let tmpDataLoc = CLLocation.init(latitude: tmpLat, longitude: tmpLong)

        tmpCLGeocoder.reverseGeocodeLocation(tmpDataLoc, completionHandler: {(placemarks,error) in

            guard let tmpPlacemarks = placemarks else{
                return
            }
            let placeMark = tmpPlacemarks[0] as CLPlacemark

            guard let strLocality = placeMark.locality else{
                return
            }
            // strLocality is your city
            guard let strSubLocality = placeMark.subLocality else{

                return
            }
            // strSubLocality is your are of city
        })
    }
} 
```

# git - 无法推送到 github 网站

> ID：10515640
> 
> 赞同：0
> 
> 时间：2012-05-09T12:00:34.587
> 
> 标签：git

我正在尝试在 github 上使用 Jekyll，但似乎无法推送更新文件。我是 git 新手，推送到我制作的 repo 没有问题，但是在尝试推送到我的网站时，我不断收到以下错误：

> 你不能推动`git://github.com/anthonybrown/anthonybrown.github.com.git`
> 使用`git@github.com:anthonybrown/anthonybrown.github.com.git`

我已经尝试这样做 3 天了，并且有一个页面。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T12:02:33.790

您需要将 git-remote 的 URL 更改为正确的 URL。

更改 URL 的命令是这样的（假设远程名为`origin`）：

```
git remote set-url origin git@github.com:anthonybrown/anthonybrown.github.com.git 
```

如果遥控器有不同的名称而您不知道，请查看`git remote`.

当然，您也可以简单地编辑`.git/config`并用正确的网址替换旧`git://...`网址，但由于有一个命令，所以没有理由这样做。

# ipad - 两个相同的 UIView removefromsuperview 报错

> ID：10515644
> 
> 赞同：0
> 
> 时间：2012-05-09T12:00:41.337
> 
> 标签：ipad, uiview, uiviewcontroller

我正在尝试删除单击按钮时初始化的 UIView。我已经单击了该按钮两次，因此出现了两个相同的 UIView。我可以删除第一个没问题，但是当我尝试用相同视图的第二个做同样的事情时，什么也没发生？我认为这是因为它是重复的，它没有注册它的存在，因为它认为它已被删除......这是我的代码：

```
- (void)createStamp13 {
    //--EDIT--//
    stampV13Array = [[NSMutableArray alloc] initWithCapacity:3];
    [stampV13Array addObject:stampV13];

    stampV13 = [[UIView alloc] initWithFrame:CGRectMake(200, 300, 172, 330)];
    //[firstPage addSubview:stampV13];
    [firstPage addSubview:(UIView*)[stampV13Array objectAtIndex:0];
    //--//
    stampV13.backgroundColor = [UIColor clearColor];
    stampThirteen = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"exclaim_r.png"]];
    stampThirteen.frame = CGRectMake(0, 0, 172, 330);
    [stampV13 addSubview:stampThirteen];
} 
```

那是我创建它时的按钮功能。这是删除功能：

```
- (void)removeImage5:(id)sender{
    NSLog(@"Delete StampV13");
    if (stampV13) {
    [self.stampV13 removeFromSuperview];
    }
} 
```

我希望我的解释是有道理的，我会很感激任何帮助！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:09:23.093

`stampV13`是单个变量，一次只能指向一个对象。如果您调用`createStamp13`两次，该变量将丢失它指向的第一个对象。要拥有这些视图的多个副本，请将它们的引用保存在一个数组而不是一个变量中，并对所有数组元素执行任何您需要的操作。

一些额外的细节：

*   将属性添加到您的 .h 文件中，例如`@property (strong, nonatomic) NSMutableArray *stampV13Array;`并合成它。
*   `stampV13Array`在包含`createStamp13`代码的类的“init ...”方法中进行初始化。（具体的方法取决于您如何创建该类的对象。）
*   `createStamp13`将方法的第一行更改为`UIView *stampV13 = [[UIView alloc] initWithFrame:CGRectMake(200, 300, 172, 330)];`.
*   在方法的末尾添加一行将视图放入数组中：`[self.stampV13Array addObject:stampV13];`.

之后，您需要在过去使用的任何地方引用数组的成员`stampV13`。

# c++ - 获取像素颜色最快的方法？

> ID：10515646
> 
> 赞同：8
> 
> 时间：2012-05-09T12:00:45.673
> 
> 标签：c++, bitblt, getpixel

我正在尝试为 Windows 应用程序制作一个自动点击器。它运作良好，但速度非常慢！我目前正在使用“getPixel”方法，它每次调用时都会重新加载一个数组。

这是我当前的代码：

```
hdc = GetDC(HWND_DESKTOP);
bx = GetSystemMetrics(SM_CXSCREEN);
by = GetSystemMetrics(SM_CYSCREEN);
start_bx = (bx/2) - (MAX_WIDTH/2);
start_by = (by/2) - (MAX_HEIGHT/2);
end_bx = (bx/2) + (MAX_WIDTH/2);
end_by = (by/2) + (MAX_HEIGHT/2);

for(y=start_by; y<end_by; y+=10)
{   
    for(x=start_bx; x<end_bx; x+=10)
    {
        pixel = GetPixel(*hdc, x, y);
        if(pixel==RGB(255, 0, 0))
        {
            SetCursorPos(x,y);
            mouse_event(MOUSEEVENTF_LEFTDOWN, 0, 0, 0, 0);
            Sleep(50);
            mouse_event(MOUSEEVENTF_LEFTUP, 0, 0, 0, 0);
            Sleep(25);
        }
    }
} 
```

所以基本上，它只是扫描屏幕中的一个像素范围，如果它检测到一个红色按钮，它就会启动一个鼠标事件。

我知道还有其他方法可以获取像素颜色，例如 bitblt。但是我已经进行了一些研究，但我不明白我应该怎么做才能扫描颜色阵列。我需要一些可以非常快速地扫描屏幕的东西才能抓住按钮。

请你帮助我好吗？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-09T12:59:11.327

我找到了一种明显比 GetPixel 更快的完美方法：

```
HDC hdc, hdcTemp;
RECT rect;
BYTE* bitPointer;
int x, y;
int red, green, blue, alpha;

while(true)
{
    hdc = GetDC(HWND_DESKTOP);
    GetWindowRect(hWND_Desktop, &rect);
            int MAX_WIDTH = rect.right;
        int MAX_HEIGHT = rect.bottom;

    hdcTemp = CreateCompatibleDC(hdc);
    BITMAPINFO bitmap;
    bitmap.bmiHeader.biSize = sizeof(bitmap.bmiHeader);
    bitmap.bmiHeader.biWidth = MAX_WIDTH;
    bitmap.bmiHeader.biHeight = MAX_HEIGHT;
    bitmap.bmiHeader.biPlanes = 1;
    bitmap.bmiHeader.biBitCount = 32;
    bitmap.bmiHeader.biCompression = BI_RGB;
    bitmap.bmiHeader.biSizeImage = MAX_WIDTH * 4 * MAX_HEIGHT;
    bitmap.bmiHeader.biClrUsed = 0;
    bitmap.bmiHeader.biClrImportant = 0;
    HBITMAP hBitmap2 = CreateDIBSection(hdcTemp, &bitmap, DIB_RGB_COLORS, (void**)(&bitPointer), NULL, NULL);
    SelectObject(hdcTemp, hBitmap2);
    BitBlt(hdcTemp, 0, 0, MAX_WIDTH, MAX_HEIGHT, hdc, 0, 0, SRCCOPY);

    for (int i=0; i<(MAX_WIDTH * 4 * MAX_HEIGHT); i+=4)
    {
        red = (int)bitPointer[i];
        green = (int)bitPointer[i+1];
        blue = (int)bitPointer[i+2];
        alpha = (int)bitPointer[i+3];

        x = i / (4 * MAX_HEIGHT);
        y = i / (4 * MAX_WIDTH);

        if (red == 255 && green == 0 && blue == 0)
        {
            SetCursorPos(x,y);
            mouse_event(MOUSEEVENTF_LEFTDOWN, 0, 0, 0, 0);
            Sleep(50);
            mouse_event(MOUSEEVENTF_LEFTUP, 0, 0, 0, 0);
            Sleep(25);
        }
    }
} 
```

我希望这可以帮助别人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:56:02.737

简单的答案是，如果这是您坚持使用的方法，那么就没有太多需要优化的地方了。正如其他人在评论中指出的那样，您可能应该使用不同的方法来定位要单击的区域。例如，看看使用 FindWindow。

如果你不想改变你的方法，那么至少在每次完整的屏幕扫描后让你的线程休眠一段时间。

# r - 使用 R 创建值班表（又名时间表、时间表等）

> ID：10515648
> 
> 赞同：1
> 
> 时间：2012-05-09T12:00:49.857
> 
> 标签：r, scheduling

只是好奇，感觉一周内为几个人创建一个值班名单似乎是一项“仅限人类”的任务，不知道这是否可以自动化？R中是否有任何可用的软件包？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:26:57.167

有一个专门用于处理这类任务的数学分支：调度。尽管这些技术更常用于例如调度大型钢厂，但它也可以应用于更小的问题。看看我发现的一些链接`Rseek.org`：

*   [http://tolstoy.newcastle.edu.au/R/e17/help/12/03/8488.html](http://tolstoy.newcastle.edu.au/R/e17/help/12/03/8488.html)

# javascript - extJs 门户内数据网格的 extJs livesearchpanel

> ID：10515650
> 
> 赞同：1
> 
> 时间：2012-05-09T12:00:56.490
> 
> 标签：javascript, extjs, extjs-mvc

我正在研究一个 Extjs 门户示例，并从[GitHub 上的 extjs4-mvc-portal](https://github.com/MMCarlosE/extjs4-mvc-portal)下载了该示例。

我已经成功地将 Eclipse 与 Tomcat 集成并添加了 XML 网格面板。我想添加一个[类似于此 Live Search Grid Example](http://dev.sencha.com/deploy/ext-4.0.0/examples/grid/live-search-grid.html)的“livesearchpanel” 。

这个例子被分成不同的部分，比如 store、portlet，我很困惑在哪里添加 CSS 文件和 JavaScript 文件来集成 livesearchpanel。

当我在 portlet 部分中添加时，发生了以下错误

> 加载资源失败：服务器响应状态为 404（未找到）

```
Ext.define('ExtMVC.view.portlet.livegrid', {
    extend: 'Ext.ux.LiveSearchGridPanel',
    alias: 'widget.livegrid',

height: 300,

/**
 * Custom function used for column renderer
 * @param {Object} val
 */
change: function(val) {
    if (val > 0) {
        return '<span style="color:green;">' + val + '</span>';
    } else if (val < 0) {
        return '<span style="color:red;">' + val + '</span>';
    }
    return val;
},

/**
 * Custom function used for column renderer
 * @param {Object} val
 */
pctChange: function(val) {
    if (val > 0) {
        return '<span style="color:green;">' + val + '%</span>';
    } else if (val < 0) {
        return '<span style="color:red;">' + val + '%</span>';
    }
    return val;
},

initComponent: function(){

    var store = Ext.create('ExtMVC.store.lives');

    Ext.apply(this, {
        height: this.height,
        store: store,
        stripeRows: true,
        columnLines: true,
        columns: [{
            text     : 'Company',
            flex     : 1,
            sortable : false, 
            dataIndex: 'company'
        },
        {
            text     : 'Price', 
            width    : 75, 
            sortable : true, 
            renderer : 'usMoney', 
            dataIndex: 'price'
        },
        {
            text     : 'Change', 
            width    : 75, 
            sortable : true, 
            dataIndex: 'change',
           // renderer: change
        },
        {
            text     : '% Change', 
            width    : 75, 
            sortable : true, 
            dataIndex: 'pctChange',
            //renderer: pctChange
        },
        {
            xtype    : 'datecolumn',
            text     : 'Last Updated', 
            width    : 85, 
            sortable : true, 
            dataIndex: 'lastChange'
        }]
    });

    this.callParent(arguments);
  }
}); 
```

我已经在 extjs/src/grid/ 的 src 部分尝试了 EXT.ux.LiveSearchGridPanel.js， `extend: 'Ext.grid.LiveSearchGridPanel',`也更改了 `extend: 'Ext.grid.Ext.ux.LiveSearchGridPanel'，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T08:49:20.890

好的问题解决了............我只是将ux文件夹加入到extjs / src。

谢谢

# c - 由于缺少调试信息，无法使用 eclipse 调试 C/C++ 代码

> ID：10515653
> 
> 赞同：3
> 
> 时间：2012-05-09T12:00:59.110
> 
> 标签：c, eclipse, makefile, eclipse-cdt, debug-mode

我正在尝试使用*eclipse Galileo IDE*在 mint Linux 中调试**C**项目。当我尝试在*DEBUG*模式下运行项目时，进程终止，因为它说 - 缺少调试信息。

 **在 Eclipse 控制台中出现以下消息

```
No source available for "main() " 

and 

Reading symbols from /home/project/netconf/target/bin/netconfd...(no debugging symbols found)...done. 
```

我正在使用自定义构建命令

> make DEBUG=1 STATIC=1 [eclipse >project >properties > c/c++ build > builder settings]

*它在RELEASE*模式下构建并运行良好。

我能够使用命令终端的普通命令行构建，使用相同的构建选项构建相同的应用程序

```
> sudo make DEBUG=1 STATIC=1 
```

现在我可以启动命令行*gdb session*，因为生成了调试信息，但是这样调试非常困难。

* * *

我需要知道是否有任何其他设置需要更改，以便我可以在 eclipse 中开始调试。
提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:11:10.270

Add -d (or probably -g) to your command line. I think DEBUG=1 is defining a macro rather than generating debug info**

# email - 使用 procmail 将电子邮件转发到另一个帐户并保留副本

> ID：10515655
> 
> 赞同：8
> 
> 时间：2012-05-09T12:01:17.237
> 
> 标签：email, copy, forward, procmail

我尝试使用 procmail 将所有传入电子邮件的副本发送到另一个电子邮件帐户（它们都在同一服务器上，例如 email1 和 email2 帐户）。

我的 .procmailrc 在 email1 帐户中：

```
:0c
! email2 
```

据我所知，这也应该在 email1 帐户中保留一份副本。但是该文件夹中没有电子邮件。（转发的电子邮件正确出现在 email2 帐户中。）

我怎么解决这个问题？

注意：.forward 文件包含：

```
| "/usr/bin/procmail" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-11T09:36:44.043

这对我有用（非常感谢 Tripleee）：
首先，我也必须设置 DEFAULT 变量。（它的默认值是 $ORGMAIL，而 ORGMAIL 的默认值是 /var/mail/$LOGNAME，如 procmailrc 手册环境变量默认值部分所述。）
其次，我必须将尾随 / 设置为 DEFAULT 和 MAILDIR。（如果没有尾随 /，procmail 使用 mbox 格式并在指定目录中创建一个 mbox 文件，如 msg.oqs。）

所以完整的.procmailrc：

```
DEFAULT=$HOME/Maildir/
MAILDIR=$HOME/Maildir/

:0c
! email2 
```

如果您想调试，请在 MAILDIR 之后写入这些行：

```
LOGFILE=$HOME/procmail.log
LOGABSTRACT=yes
VERBOSE=yes 
```

# c# - 从网站（外部 URL）保存/下载产品数据（图像和与产品相关的所有数据）

> ID：10515656
> 
> 赞同：0
> 
> 时间：2012-05-09T12:01:32.443
> 
> 标签：c#, javascript, asp.net, sql-server

我有一个页面（外部 URL），其中包含产品图像和一些文本，如颜色、类别、价格、品牌、尺寸、形状等。我想知道如何保存/下载产品数据（图像和所有与产品）从网站（外部 URL）转换成文件（可能是 excel、access、flat、csv、xml...等）？

有没有其他方法可以做到这一点？

# jaxb - WSImport 为多个 Dynamics CRM 4.0 WSDL 生成冲突的 XMLType

> ID：10515659
> 
> 赞同：9
> 
> 时间：2012-05-09T12:01:40.513
> 
> 标签：jaxb, jax-ws, dynamics-crm, dynamics-crm-4, wsimport

我目前正在使用 Dynamics CRM 4.0 网络服务。`Java/JAX-WS`我做的第一件事是根据 web 服务的 WSDL使用 wsimport 生成正确的类。在生成类时，我遇到了一些错误：

```
[ERROR] A class/interface with the same name
"com.microsoft.schemas.crm._2007.webservices.RetrieveResponse" is already in use. Use a class customization to resolve this conflict.
  line 979 of file://src/main/webapp/WEB-INF/classes/META-INF/wsdl/CrmServiceWsdl.wsdl

[ERROR] (Relevant to above error) another "RetrieveResponse" is generated from here.
  line 12274 of file://src/main/webapp/WEB-INF/classes/META-INF/wsdl/CrmServiceWsdl.wsdl 
```

第 979 行告诉我们：

```
<s:element name="RetrieveResponse">
    <s:complexType>
      <s:sequence>
        <s:element name="RetrieveResult" type="s3:BusinessEntity" />
      </s:sequence>
    </s:complexType>
  </s:element> 
```

第 12274 行给了我们：

```
<s:complexType name="RetrieveResponse">
    <s:complexContent mixed="false">
      <s:extension base="tns:Response">
        <s:sequence>
          <s:element ref="s3:BusinessEntity" />
        </s:sequence>
      </s:extension>
    </s:complexContent>
  </s:complexType> 
```

两个部分都在同一个命名空间中。两者都将作为 RetrieveResponse.class 生成，因此它们正在碰撞。我找到了这个问题的解决方案，它是 JAX-B 绑定 xml 文件：

```
<bindings node="//xsd:complexType[@name='RetrieveResponse']">
  <jaxb:class name="RetrieveResponseType"/>
</bindings> 
```

这有效（不确定这是否是正确的方法..？）..

因此，在此之后，我成功地创建了一些对 web 服务的调用，这太棒了！

现在问题来了：动态 crm 中的一些业务实体使用类*Picklist*。可以使用元数据服务查询此类实体：http: [//msdn.microsoft.com/en-us/library/bb890248.aspx](http://msdn.microsoft.com/en-us/library/bb890248.aspx)

所以接下来我要做的就是再次为元数据服务生成类，基于它的 WSDL。生成的类的结果与我们不同。例如，它生成一个类“com.microsoft.schemas.crm._2007.webservices.ExecuteResponse”。但是这个类也存在于 CrmService 生成的类的完全相同的包中。两者的区别在于：

元数据服务执行响应：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
    "response"
})
@XmlRootElement(name = "ExecuteResponse")
public class ExecuteResponse {

   @XmlElement(name = "Response")
   protected MetadataServiceResponse response;
etc... 
```

CrmService 执行响应：

```
@XmlAccessorType(XmlAccessType.FIELD)
@XmlType(name = "", propOrder = {
    "response"
})
@XmlRootElement(name = "ExecuteResponse")
public class ExecuteResponse {

   @XmlElement(name = "Response", required = true)
   protected ResponseType response;
etc... 
```

现在这个类只是一个例子（另一个例子是**CrmAuthenticationToken**），它**几乎**是另一个类的完全相同的副本。为了能够使用相同的类，我在 CrmService 类中添加了一个包后缀（显示为*前缀*.）。所以现在当我尝试调用 CrmService 时，我得到以下异常：

```
Two classes have the same XML type name "{http://schemas.microsoft.com/crm/2007/CoreTypes}CrmAuthenticationToken". Use @XmlType.name and @XmlType.namespace to assign different names to them.
this problem is related to the following location:
    at com.microsoft.schemas.crm._2007.coretypes.CrmAuthenticationToken
    at public com.microsoft.schemas.crm._2007.coretypes.CrmAuthenticationToken *prefix*.com.microsoft.schemas.crm._2007.coretypes.ObjectFactory.createCrmAuthenticationToken()
    at *prefix*.com.microsoft.schemas.crm._2007.coretypes.ObjectFactory
this problem is related to the following location:
    at *prefix*.com.microsoft.schemas.crm._2007.coretypes.CrmAuthenticationToken
    at public javax.xml.bind.JAXBElement *prefix*.com.microsoft.schemas.crm._2007.webservices.ObjectFactory.createCrmAuthenticationToken(*prefix*.com.microsoft.schemas.crm._2007.coretypes.CrmAuthenticationToken)
    at *prefix*.com.microsoft.schemas.crm._2007.webservices.ObjectFactory 
```

我个人认为他们将具有相同名称的不同类放在同一个包结构中很奇怪。这意味着您永远不能同时使用 2 个 Web 服务。

这是微软的一个 WSimport 错误还是我的一个愚蠢的错误？希望有人可以帮助我解决这个问题！

谢谢你的时间！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-20T18:43:43.920

这是微软的不一致加上 wsimport 有点难以使用。

PickList 和 CRMAuthenticationToken 听起来像自定义数据类型，您希望这些可以在服务之间重用。您还希望某些特定于 CRM 的实体（例如，客户或企业或地址）在服务之间得到重用。

在 Microsoft 方面，他们为不同的服务定义不同的这些是不礼貌的。这使得很难接受一项服务的答案并将其发送到另一项服务。

如果服务共享一个或多个通用模式，您可以先使用 xjc 编译这些模式。然后，您可以向 wsimport 提供一个所谓的剧集文件，告诉它使用这些类而不是生成新的类。请参阅[地铁指南](http://metro.java.net/2.2.1/guide/ch03.html#compiling-multiple-wsdls-that-share-a-common-schema)。这真是一个谜，我可以从经验告诉你，我遇到了错误 JAXB-829，xjc 忘记在剧集文件中生成 if-exists 属性。

我要做的是，将每个 wsdl 编译到自己的包中，并将生成的类视为简单的非智能数据传输对象。如果我想将刚刚从一项服务中检索到的对象发送到另一项服务，我会在两者之间进行转换。如果这导致代码非常笨拙，或者如果您希望向某些实体添加逻辑，我建议您为要共享的实体编写自己的适当模型类，并在 Web 服务中编写与 DTO 对象之间的转换器您希望与它们一起使用的软件包。

# log4j - Log4j 不适用于 Jboss 7 AS

> ID：10515667
> 
> 赞同：2
> 
> 时间：2012-05-09T12:02:06.607
> 
> 标签：log4j, jboss7.x

我已经用我的自定义 log4j 配置了我的 EJB 这是我的 log4j xml 文件

```
<appender name="sptLogs" class="org.apache.log4j.DailyRollingFileAppender">

    <param name="File" value="D:/temp/logs/sm-ent/support.log" />

    <layout class="org.apache.log4j.PatternLayout">

        <!-- <param name="ConversionPattern" value="%m%n" /> -->

        <param name="ConversionPattern"    value="%d{DATE} %5p %c{1}:%L - %m%n" />

    </layout>

    <filter class="org.apache.log4j.varia.LevelRangeFilter">

        <param name="LevelMin" value="INFO" />

        <param name="LevelMax" value="FATAL" />

    </filter>

</appender>

<appender name="appLogs" class="org.apache.log4j.RollingFileAppender">

    <param name="File" value="D:/temp/logs/sm-ent/app.log" />

    <!--

    <param name="File" value="/usr/local/2-tomcat_integration/webapps/SanMarWebService/logs/app.log"/>

     -->

    <param name="Threshold" value="DEBUG"/>

    <param name="Append" value="true" />

    <param name="maxFileSize" value="5MB" />

    <param name="maxBackupIndex" value="20" />

    <layout class="org.apache.log4j.PatternLayout">

    <!--  <param name="ConversionPattern" value="%d %-4r [%t] %-5p %c %x - %m%n" /> -->

        <param name="ConversionPattern" value="%d{DATE} %-5p %-15c{1}:%M() %m%n"/>

    </layout>

    <filter class="org.apache.log4j.varia.LevelRangeFilter">

        <param name="LevelMin" value="DEBUG" />

        <param name="LevelMax" value="FATAL" />

    </filter>

</appender>

<appender name="errorfile" class="org.apache.log4j.RollingFileAppender">

    <param name="maxFileSize" value="500KB" />

    <param name="maxBackupIndex" value="20" />

    <param name="File" value="D:/temp/logs/sm-ent/errors.log" />

    <!--

    <param name="File" value="/usr/local/2-tomcat_integration/webapps/SanMarWebService/logs/errors.log" />

    -->

    <layout class="org.apache.log4j.PatternLayout">

        <param name="ConversionPattern"    value="%d{DATE} %5p %c{1}:%L - %m%n" />

    </layout>

    <filter class="org.apache.log4j.varia.LevelRangeFilter">

        <param name="LevelMin" value="error" />

        <param name="LevelMax" value="fatal" />

    </filter>

</appender>

<logger name="com.sanmar">

    <level value="DEBUG"/>

      <appender-ref ref="sptLogs"/>

</logger>

<root>

    <level value="TRACE" />

    <appender-ref ref="appLogs" />

    <appender-ref ref="errorfile" />

</root> 
```

我正在使用 spring 使用这样的 spring bean 来初始化 LOG4J

```
 class="org.springframework.beans.factory.config.MethodInvokingFactoryBean">

    <property name="targetClass"

        value="org.springframework.util.Log4jConfigurer" />

    <property name="targetMethod" value="initLogging" />

    <property name="arguments">

        <list>           

                 <value>D:\temp\properties\sm-enterprise-log4j.xml</value>                                   

        </list>

    </property>

</bean> 
```

但我得到了错误

```
15:57:39,667 ERROR [stderr] (EJB default - 1) java.lang.ClassCastException: org.apache.log4j.DailyRollingFileAppender cannot be cast to org.apache.log4j.Appender

15:57:39,668 ERROR [stderr] (EJB default - 1)     at org.apache.log4j.xml.DOMConfigurator.parseAppender(DOMConfigurator.java:238)

15:57:39,670 ERROR [stderr] (EJB default - 1)     at org.apache.log4j.xml.DOMConfigurator.findAppenderByName(DOMConfigurator.java:171)

15:57:39,670 ERROR [stderr] (EJB default - 1)     at org.apache.log4j.xml.DOMConfigurator.findAppenderByReference(DOMConfigurator.java:184)

15:57:39,671 ERROR [stderr] (EJB default - 1)     at org.apache.log4j.xml.DOMConfigurator.parseChildrenOfLoggerElement(DOMConfigurator.java:502)

15:57:39,672 ERROR [stderr] (EJB default - 1)     at org.apache.log4j.xml.DOMConfigurator.parseCategory(DOMConfigurator.java:415)

15:57:39,672 ERROR [stderr] (EJB default - 1)     at org.apache.log4j.xml.DOMConfigurator.parse(DOMConfigurator.java:919)

15:57:39,673 ERROR [stderr] (EJB default - 1)     at org.apache.log4j.xml.DOMConfigurator.doConfigure(DOMConfigurator.java:790)

15:57:39,673 ERROR [stderr] (EJB default - 1)     at org.apache.log4j.xml.DOMConfigurator.doConfigure(DOMConfigurator.java:696)

15:57:39,674 ERROR [stderr] (EJB default - 1)     at org.apache.log4j.xml.DOMConfigurator.configure(DOMConfigurator.java:821)

15:57:39,675 ERROR [stderr] (EJB default - 1)     at org.springframework.util.Log4jConfigurer.initLogging(Log4jConfigurer.java:69)

15:57:39,676 ERROR [stderr] (EJB default - 1)     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

15:57:39,676 ERROR [stderr] (EJB default - 1)     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)

15:57:39,677 ERROR [stderr] (EJB default - 1)     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)

15:57:39,677 ERROR [stderr] (EJB default - 1)     at java.lang.reflect.Method.invoke(Method.java:597)

15:57:39,678 ERROR [stderr] (EJB default - 1)     at org.springframework.util.MethodInvoker.invoke(MethodInvoker.java:273)

15:57:39,678 ERROR [stderr] (EJB default - 1)     at org.springframework.beans.factory.config.MethodInvokingFactoryBean.doInvoke(MethodInvokingFactoryBean.java:162)

15:57:39,679 ERROR [stderr] (EJB default - 1)     at org.springframework.beans.factory.config.MethodInvokingFactoryBean.afterPropertiesSet(MethodInvokingFactoryBean.java:152)

15:57:39,679 ERROR [stderr] (EJB default - 1)     at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1514)

15:57:39,680 ERROR [stderr] (EJB default - 1)     at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1452)

15:57:39,681 ERROR [stderr] (EJB default - 1)     at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:519)

15:57:39,682 ERROR [stderr] (EJB default - 1)     at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:456)

15:57:39,683 ERROR [stderr] (EJB default - 1)     at org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:294)

15:57:39,683 ERROR [stderr] (EJB default - 1)     at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:225)

15:57:39,684 ERROR [stderr] (EJB default - 1)     at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:291)

15:57:39,684 ERROR [stderr] (EJB default - 1)     at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:193)

15:57:39,685 ERROR [stderr] (EJB default - 1)     at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:567)

15:57:39,686 ERROR [stderr] (EJB default - 1)     at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:913)

15:57:39,686 ERROR [stderr] (EJB default - 1)     at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:464)

15:57:39,687 ERROR [stderr] (EJB default - 1)     at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:139)

15:57:39,688 ERROR [stderr] (EJB default - 1)     at org.springframework.context.support.ClassPathXmlApplicationContext.<init>(ClassPathXmlApplicationContext.java:93)

15:57:39,688 ERROR [stderr] (EJB default - 1)     at com.sanmar.service.ServiceFactory.getApplicationContext(ServiceFactory.java:26)

15:57:39,689 ERROR [stderr] (EJB default - 1)     at com.sanmar.service.ServiceFactory.getValidationService(ServiceFactory.java:37)

15:57:39,689 ERROR [stderr] (EJB default - 1)     at com.sanmar.service.integration.webservice.ejb.ValidationServiceBean.performValidationInventoryService(ValidationServiceBean.java:27)

15:57:39,690 ERROR [stderr] (EJB default - 1)     at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)

15:57:39,691 ERROR [stderr] (EJB default - 1)     at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)

15:57:39,691 ERROR [stderr] (EJB default - 1)     at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)

15:57:39,692 ERROR [stderr] (EJB default - 1)     at java.lang.reflect.Method.invoke(Method.java:597)

15:57:39,692 ERROR [stderr] (EJB default - 1)     at org.jboss.as.ee.component.ManagedReferenceMethodInterceptorFactory$ManagedReferenceMethodInterceptor.processInvocation(ManagedReferenceMethodInterceptorFactory.java:72)

15:57:39,693 ERROR [stderr] (EJB default - 1)     at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)

15:57:39,694 ERROR [stderr] (EJB default - 1)     at org.jboss.invocation.WeavedInterceptor.processInvocation(WeavedInterceptor.java:53)

15:57:39,694 ERROR [stderr] (EJB default - 1)     at org.jboss.as.ee.component.interceptors.UserInterceptorFactory$1.processInvocation(UserInterceptorFactory.java:36)

15:57:39,695 ERROR [stderr] (EJB default - 1)     at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)

15:57:39,695 ERROR [stderr] (EJB default - 1)     at org.jboss.as.jpa.interceptor.SBInvocationInterceptor.processInvocation(SBInvocationInterceptor.java:47)

15:57:39,696 ERROR [stderr] (EJB default - 1)     at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)

15:57:39,696 ERROR [stderr] (EJB default - 1)     at org.jboss.invocation.InitialInterceptor.processInvocation(InitialInterceptor.java:21)

15:57:39,697 ERROR [stderr] (EJB default - 1)     at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)

15:57:39,697 ERROR [stderr] (EJB default - 1)     at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)

15:57:39,698 ERROR [stderr] (EJB default - 1)     at org.jboss.as.ee.component.interceptors.ComponentDispatcherInterceptor.processInvocation(ComponentDispatcherInterceptor.java:53)

15:57:39,699 ERROR [stderr] (EJB default - 1)     at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)

15:57:39,699 ERROR [stderr] (EJB default - 1)     at org.jboss.as.ejb3.component.pool.PooledInstanceInterceptor.processInvocation(PooledInstanceInterceptor.java:51)

15:57:39,700 ERROR [stderr] (EJB default - 1)     at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)

15:57:39,700 ERROR [stderr] (EJB default - 1)     at org.jboss.as.ejb3.tx.CMTTxInterceptor.invokeInOurTx(CMTTxInterceptor.java:228)

15:57:39,701 ERROR [stderr] (EJB default - 1)     at org.jboss.as.ejb3.tx.CMTTxInterceptor.required(CMTTxInterceptor.java:304)

15:57:39,701 ERROR [stderr] (EJB default - 1)     at org.jboss.as.ejb3.tx.CMTTxInterceptor.processInvocation(CMTTxInterceptor.java:190)

15:57:39,702 ERROR [stderr] (EJB default - 1)     at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)

15:57:39,702 ERROR [stderr] (EJB default - 1)     at org.jboss.as.ejb3.remote.EJBRemoteTransactionPropogatingInterceptor.processInvocation(EJBRemoteTransactionPropogatingInterceptor.java:80)

15:57:39,703 ERROR [stderr] (EJB default - 1)     at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)

15:57:39,704 ERROR [stderr] (EJB default - 1)     at org.jboss.as.ejb3.component.interceptors.CurrentInvocationContextInterceptor.processInvocation(CurrentInvocationContextInterceptor.java:41)

15:57:39,704 ERROR [stderr] (EJB default - 1)     at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)

15:57:39,705 ERROR [stderr] (EJB default - 1)     at org.jboss.as.ejb3.component.interceptors.LoggingInterceptor.processInvocation(LoggingInterceptor.java:59)

15:57:39,705 ERROR [stderr] (EJB default - 1)     at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)

15:57:39,706 ERROR [stderr] (EJB default - 1)     at org.jboss.as.ee.component.NamespaceContextInterceptor.processInvocation(NamespaceContextInterceptor.java:50)

15:57:39,707 ERROR [stderr] (EJB default - 1)     at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)

15:57:39,707 ERROR [stderr] (EJB default - 1)     at org.jboss.as.ee.component.TCCLInterceptor.processInvocation(TCCLInterceptor.java:45)

15:57:39,708 ERROR [stderr] (EJB default - 1)     at org.jboss.invocation.InterceptorContext.proceed(InterceptorContext.java:288)

15:57:39,708 ERROR [stderr] (EJB default - 1)     at org.jboss.invocation.ChainedInterceptor.processInvocation(ChainedInterceptor.java:61)

15:57:39,709 ERROR [stderr] (EJB default - 1)     at org.jboss.as.ee.component.ViewService$View.invoke(ViewService.java:165)

15:57:39,709 ERROR [stderr] (EJB default - 1)     at org.jboss.as.ejb3.remote.protocol.versionone.MethodInvocationMessageHandler.invokeMethod(MethodInvocationMessageHandler.java:300)

15:57:39,710 ERROR [stderr] (EJB default - 1)     at org.jboss.as.ejb3.remote.protocol.versionone.MethodInvocationMessageHandler.access$200(MethodInvocationMessageHandler.java:64)

15:57:39,710 ERROR [stderr] (EJB default - 1)     at org.jboss.as.ejb3.remote.protocol.versionone.MethodInvocationMessageHandler$1.run(MethodInvocationMessageHandler.java:194)

15:57:39,711 ERROR [stderr] (EJB default - 1)     at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)

15:57:39,712 ERROR [stderr] (EJB default - 1)     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)

15:57:39,712 ERROR [stderr] (EJB default - 1)     at java.util.concurrent.FutureTask.run(FutureTask.java:138)

15:57:39,713 ERROR [stderr] (EJB default - 1)     at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)

15:57:39,713 ERROR [stderr] (EJB default - 1)     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)

15:57:39,714 ERROR [stderr] (EJB default - 1)     at java.lang.Thread.run(Thread.java:619)

15:57:39,714 ERROR [stderr] (EJB default - 1)     at org.jboss.threads.JBossThread.run(JBossThread.java:122)

15:57:39,715 ERROR [stderr] (EJB default - 1) log4j:ERROR Could not parse url [file:D:/temp/properties/sm-enterprise-log4j.xml].

15:57:39,715 ERROR [stderr] (EJB default - 1) java.lang.NullPointerException 
```

我正在使用 jboss 模块并使用 log4j-1.2.16 模块进行日志记录。任何人都可以帮助我在配置或什么方面做错了什么。我试过使用 jboss-deployment-structure.xml 文件

```
<deployment>

    <exclusions>

        <module name="org.apache.log4j" />

    </exclusions>

</deployment>

<sub-deployment name="BusinessComponent-1.1.jar">

    <exclusions>

        <module name="org.apache.log4j" />

    </exclusions>

</sub-deployment>

<sub-deployment name="sanmar-services-impl-1.1.jar">

    <exclusions>

        <module name="org.apache.log4j" />

    </exclusions>

</sub-deployment> 
```

但没有运气。

我在 jboss 社区讨论中的原始帖子的链接是 [https://community.jboss.org/thread/199439?tstart=0](https://community.jboss.org/thread/199439?tstart=0)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T16:35:14.670

这将在 JBoss 7.2.x 中修复，但尚未发布。因此，对于旧版本，您需要[排除](https://docs.jboss.org/author/display/AS71/How+To#HowTo-HowdoIuselog4j.propertiesorlog4j.xmlinsteadofusingtheloggingsubsystemconfiguration%3F)服务器 log4j 库。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-21T21:11:37.060

更多的图书馆将不得不被排除在外。在这里找到了一个有效的排除集

[http://tinyapps.blogspot.com/2013/01/getting-logback-and-slf4j-to-work-in.html](http://tinyapps.blogspot.com/2013/01/getting-logback-and-slf4j-to-work-in.html)

```
<?xml version="1.0" encoding="UTF-8"?>
<jboss-deployment-structure xmlns="urn:jboss:deployment-structure:1.2">
    <deployment>
        <!-- Exclusions allow you to prevent the server from automatically adding some dependencies -->
        <exclusions>
            <module name="org.apache.commons.logging" />
            <module name="org.apache.log4j" />
            <module name="org.jboss.logging" />
            <module name="org.jboss.logging.jul-to-slf4j-stub" />
            <module name="org.jboss.logmanager" />
            <module name="org.jboss.logmanager.log4j" />
            <module name="org.slf4j" />
            <module name="org.slf4j.impl" />
        </exclusions>
    </deployment>
</jboss-deployment-structure> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-05T10:34:31.933

我在 EAP 6.0 和 AS 7 中遇到了同样的问题，但建议的解决方案不起作用（在 EAP 6.2 和 AS 7.1.1 中完美运行）。
在 jboss-deployment-structure.xml 文件中，您不必排除 log4j 之类的库，您只需包含应用程序需要从 JBOSS 获得的依赖项。
如果您的应用程序不需要库，您可以编写：

```
<?xml version="1.0" encoding="UTF-8"?>
<jboss-deployment-structure xmlns="urn:jboss:deployment-structure:1.1">
    <deployment>
        <dependencies>
        </dependencies>
    </deployment>
</jboss-deployment-structure> 
```

# actionscript-3 - 如何使符号在某个帧处自行移除？

> ID：10515673
> 
> 赞同：0
> 
> 时间：2012-05-09T12:02:28.463
> 
> 标签：actionscript-3, movieclip

我正在努力做一件简单的事情，我有一个对象通过创建和添加一个在 Flash 中完成的简单动画来生成烟雾轨迹。一切正常，但我似乎找不到一种简单的方法在播放动画后让烟雾自行消失，如果我在`this.parent.removeChild(this);`动画的最后一帧添加类似的东西，应用程序就会崩溃`Cannot access a property or method of a null object reference.`

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T12:07:55.963

即使对象不再被渲染，动画也会继续播放，在对象的第二次调用`this.parent.removeChild(this);`不再是任何对象的父级时，停止动画解决了问题

谢谢你弗兰克赫姆斯

```
this.parent.removeChild(this);
this.stop(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-14T08:51:31.543

在您的主影片剪辑中，将以下代码分配给一个按钮（显示按钮）：

* * *

```
var swfLoader:Loader = new Loader();
stage.addChild(swfLoader);

var swfURL:URLRequest = new URLRequest("yourchildSWF.swf");

swfLoader.contentLoaderInfo.addEventListener(Event.COMPLETE, loadComplete);
swfLoader.load(swfURL);

    function loadComplete(e:Event):void 
        {
            //swfLoader.x = (stage.stageWidth-swfLoader.width)/2; //for center align
            //swfLoader.y = (stage.stageHeight-swfLoader.height)/2; //for center align

            swfLoader.contentLoaderInfo.removeEventListener(Event.COMPLETE, loadComplete); 
            swfLoader.content.addEventListener(MouseEvent.CLICK, function(e:Event) 
                {
                    swfLoader.unload();                                 
                } ); 

        } 
```

* * *

您的孩子 swf 中必须有一个按钮。当按下它时，swf 将被关闭。（创建一个符号作为关闭按钮的按钮）

*   不需要子 swf 中的任何代码。

# java - 如何在没有 Eclipse 的情况下在 Java 中导入类？

> ID：10515677
> 
> 赞同：1
> 
> 时间：2012-05-09T12:02:36.873
> 
> 标签：java, macos, class, import, lwjgl

很抱歉，这似乎是一个基本问题，但我需要有关导入类的帮助。我下载了轻量级 Java 游戏库 (LWJGL)，但我不知道如何安装它。当我尝试测试时，它不起作用。

我有一个文件夹，我在其中提取了基本的 LWJGL 文件。我现在有这样的设置：

generic_folder/libs/lwjgl-2.8.3

我也有这个测试，我从 LWJGL wiki 上的教程中复制粘贴：它位于 generic_folder 中。当我尝试使用 javac 时，它显示 DisplayExample.java:1: package org.lwjgl 不存在。

```
import org.lwjgl.LWJGLException;
import org.lwjgl.opengl.Display;
import org.lwjgl.opengl.DisplayMode;

public class DisplayExample {

public void start() {
    try {
    Display.setDisplayMode(new DisplayMode(800,600));
    Display.create();
} catch (LWJGLException e) {
    e.printStackTrace();
    System.exit(0);
}

// init OpenGL here

while (!Display.isCloseRequested()) {

    // render OpenGL here

    Display.update();
}

Display.destroy();
}

public static void main(String[] argv) {
    DisplayExample displayExample = new DisplayExample();
displayExample.start();
} 
```

}

我必须将文件放在某个位置还是什么？请帮忙。谢谢！

编辑：对不起。我是 Java 新手。请慢一点。另外，LWJGL 是一个库，所以我没有在其中放置任何文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T12:05:21.403

您需要指定一个类路径（最好使用`-cp`开关），以便`java`/`javac`知道在哪里可以找到您需要访问的 .jar 文件。它通常如下所示：

对于编译：

```
javac -cp .:libs/lwjgl-2.8.3/jar/lwjgl.jar your-java-files 
```

运行：

```
java -cp .:libs/lwjgl-2.8.3/jar/lwjgl.jar your-class-file 
```

（请注意，如果您使用的是 Windows，我认为`:`应该替换为`;`.）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:06:35.770

最简单的方法是将 LWJGL 文件夹设置为 CLASSPATH 环境。例如

设置 CLASSPATH=${PATH_TO}/generic_folder/libs/lwjgl-2.8.3

那应该这样做。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T12:05:21.840

调用时需要将该 jar 添加到类路径中`javac`，如下所示：

```
javac -cp generic_folder/libs/lwjgl-2.8.3.jar path/to/java/file/DisplayExample.java 
```

我假设这`lwjgl-2.8.3` *实际上*是一个 jar 文件。你从来没有在你的问题中指定。

当您尝试运行您的示例时，您必须再次将 jar 添加到您的类路径中：

```
java -cp generic_folder/libs/lwjgl-2.8.3.jar path/to/java/file/DisplayExample 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T12:10:02.347

运行 javac 时，需要告诉它 jar 文件在哪里。您可以设置 CLASSPATH 环境变量或将位置传递给 java 编译器。后者更好，因为如果您开始第二个 java 项目，您可能不需要 lwjgl。

要直接告诉 java 编译器，您可以执行类似的操作

```
javac -classpath generic_folder/libs/lwjgl-2.8.3/lwjgl.jar DisplayExample.java 
```

类路径可以指向包含类的 jar 文件，也可以指向包含 unjared 类文件的顶级目录。如果未压缩的类位于 generic_folder/libs/lwjgl-2.8.3/classes 中，您将指向 generic_folder/libs/lwjgl-2.8.3/classes，而不是 generic_folder/libs/lwjgl-2.8.3/org/lwjgl

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-20T18:27:22.527

```
javac -classpath external.jar myClass.java 
```

有关更多信息-> [https://stackoverflow.com/a/5112638/5790669](https://stackoverflow.com/a/5112638/5790669)

# javascript - 谷歌地图 MarkerClusterer v3 返回标记集群

> ID：10515686
> 
> 赞同：1
> 
> 时间：2012-05-09T12:03:00.917
> 
> 标签：javascript, google-maps, markerclusterer

我目前正在使用 Google Maps MarkerClusterer v3 (http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/docs/reference.html)，到目前为止，我对该功能印象深刻.

但是，我现在希望在我的地图中添加一个附加功能。当用户将鼠标悬停在标记列表上时，标记图像会发生变化。这在标记未聚类时效果很好，但由于我也在使用聚类器，因此我需要能够返回特定标记所属的聚类。

有谁知道这是否可能？我检查了 API 文档，但找不到返回集群数组的方法。

本质上，这是我需要做的伪代码：

```
function changeClusterIcon(the_marker)
{
    var clusters = _CLUSTERER.getClusters();
    var clusters_length = clusters.length;
    var marker_pos = the_marker.getPosition().toString();

    for(var i = 0; i < clusters_length; i++)
    {
        var this_cluster = clusters[i];
        var the_markers = this_cluster.markers.length;

        for(var j = 0; j < the_markers; j++) 
        {
            var this_marker = this_cluster.markers[i];
            if(this_marker.getPosition().toString() == marker_pos)
            {
                return this_cluster;
            }
        }
    }

    return false;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-13T18:03:20.317

该`MarkerClusterer`库不提供检索集群的方法。但是有一个库的增强版本[MarkerClustererPlus](http://code.google.com/p/google-maps-utility-library-v3/wiki/Libraries#MarkerClustererPlus)，它提供了更多的功能。使用 MarkerClustererPlus [^(api-doc)](http://google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.9/docs/reference.html)，您可以使用该`MarkerClusterer.getClusters()`函数来检索`Array`类`Cluster`实例。然后，您可以使用该`Cluster.getMarkers()`函数来检索其中`Array`的一个标记`Cluster`。有了这个，您应该拥有前进所需的一切。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-09T05:35:26.737

您的功能几乎是正确的，这里是正确的版本：

```
function changeClusterIcon(the_marker)
{
var clusters = _CLUSTERER.getClusters();
var clusters_length = clusters.length;
var marker_pos = the_marker.getPosition().toString();

for(var i = 0; i < clusters_length; i++)
{
    var this_cluster = clusters[i];
    var the_markers = this_cluster.markers_.length;

    for(var j = 0; j < the_markers; j++) 
    {
        var this_marker = this_cluster.markers_[j];
        if(this_marker.getPosition().toString() == marker_pos)
        {
            return this_cluster;
        }
    }
}

return false;
} 
```

所以**markers**属性应该被称为**markers_**并且第二个foreach使用**j**而不是**i**。

# android - 我的闹钟在一段时间内没有保持静音？

> ID：10515687
> 
> 赞同：1
> 
> 时间：2012-05-09T12:03:01.523
> 
> 标签：android, android-service, alarmmanager

我在每 30 分钟运行一次的 ServiceActivity 的 onStart 部分中使用以下代码：

```
 @Override
    public void onStart(Intent intent, int startId) {
        super.onStart(intent, startId);

        Calendar ct = Calendar.getInstance();
        ct.setTimeInMillis(System.currentTimeMillis());
        int Hour = ct.get(Calendar.HOUR_OF_DAY);
        int Minute = ct.get(Calendar.MINUTE);
        System.out.println("Hour and Minute in Calender is: "+Hour+":"+Minute);

        myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
        SILENCE = myPrefs.getBoolean("silence", false);

        int sHour = myPrefs.getInt("start_hour", 01);
        int sMinute = myPrefs.getInt("start_minute", 00);
        int eHour = myPrefs.getInt("end_hour", 02);
        int eMinute = myPrefs.getInt("end_minute", 00);

        System.out.println("======== SILENCE PERIOD ==========");
        System.out.println("The Start Time is: "+sHour+":"+sMinute);
        System.out.println("The END Time is: "+eHour+":"+eMinute);
        System.out.println("==================================");

        Calendar currentTime = new GregorianCalendar();
        currentTime.set(Calendar.HOUR_OF_DAY, Calendar.HOUR_OF_DAY);
        currentTime.set(Calendar.MINUTE, Calendar.MINUTE);
        currentTime.set(Calendar.SECOND, Calendar.SECOND);
        currentTime.set(Calendar.DATE, Calendar.DATE);
        currentTime.set(Calendar.MONTH, Calendar.MONTH);

        Calendar start_time = new GregorianCalendar();
        start_time.set(Calendar.HOUR_OF_DAY, sHour);
        start_time.set(Calendar.MINUTE, sMinute);
//      start_time.set(Calendar.SECOND, Calendar.SECOND);
//      start_time.set(Calendar.DATE, Calendar.DATE);
//      start_time.set(Calendar.MONTH, Calendar.MONTH);

        Calendar end_time = new GregorianCalendar();
        end_time.set(Calendar.HOUR_OF_DAY, eHour);
        end_time.set(Calendar.MINUTE, eMinute);
//      end_time.set(Calendar.SECOND, Calendar.SECOND);
//      end_time.set(Calendar.DATE, Calendar.DATE);
//      end_time.set(Calendar.MONTH, Calendar.MONTH);

        System.out.println(start_time.getTimeInMillis()+" < "+System.currentTimeMillis()+" && "+System.currentTimeMillis()+ " > "+end_time.getTimeInMillis());

        if(!SILENCE){
            System.out.println("SILENCE in if is :"+SILENCE);
            fireAlarm(Hour, Minute);
        }else{

            System.out.println("SILENCE in else is: "+SILENCE);

            if(((((start_time.getTimeInMillis() <= System.currentTimeMillis())) && ((System.currentTimeMillis() <= end_time.getTimeInMillis()) )))){
                System.out.println("You are in Silent mode");
                Toast.makeText(getApplicationContext(), "Ship's Clock is Silent", Toast.LENGTH_SHORT).show();
            }
            else{
                fireAlarm(Hour, Minute);
            }
        }
    } 
```

现在，问题是，当 startHour 和 EndHour 是同一天的时间时，它工作得很好。但是，当我将 10:00 PM 作为 startHour 并将 8:00 AM 作为 EndHour 时，它不会在那段时间保持沉默。

那么逻辑或代码有什么问题？

# performance - Drools - 更快地创建 KnowledgeBuilder？

> ID：10515692
> 
> 赞同：1
> 
> 时间：2012-05-09T12:03:20.197
> 
> 标签：performance, dynamic, rules, drools

我有一个用例，我需要为一次性使用动态创建规则。规则是动态的，在更糟糕的情况下，每个迭代/请求可能会有所不同。因此，我无法存储它们。

我目前对 Drools 的理解是，你需要创建一个 KnowledgeBuilder，然后添加规则。

我正在创建知识库，如下所示。

```
private KnowledgeBase readKnowledgeBase() throws Exception { 
long t1 = System.currentTimeMillis(); 
    KnowledgeBuilder kbuilder = KnowledgeBuilderFactory.newKnowledgeBuilder();   
long t11 = System.currentTimeMillis(); 

    kbuilder.add( org.drools.io.ResourceFactory.newByteArrayResource(getRule()), ResourceType.DRL); 

long t2 = System.currentTimeMillis(); 

    KnowledgeBuilderErrors errors = kbuilder.getErrors(); 
    if (errors.size() > 0) { 
        for (KnowledgeBuilderError error: errors) { 
            System.err.println(error); 
        } 
        throw new IllegalArgumentException("Could not parse knowledge."); 
    } 
long t3 = System.currentTimeMillis(); 

    KnowledgeBase kbase = KnowledgeBaseFactory.newKnowledgeBase(); 
long t4 = System.currentTimeMillis(); 

    kbase.addKnowledgePackages(kbuilder.getKnowledgePackages()); 
long t5 = System.currentTimeMillis(); 

    Collection<KnowledgePackage> kpackages = kbase.getKnowledgePackages(); 
            for (KnowledgePackage knowledgePackage : kpackages) { 
                    System.out.println("Package -------- " + knowledgePackage.getName()); 
                    Collection<Rule> rules = knowledgePackage.getRules(); 
                    for (Rule rule : rules) { 
                            System.out.println("****" + rule.getName()); 
                    } 
            } 
long t6 = System.currentTimeMillis(); 

System.out.println( (t11-t1) + " " + (t2-t11) + " " + ( t3-t2) + " " + ( t4-t3) + " " + ( t5-t4) + " " + ( t6-t5)+ " " ); 

    return kbase; 
} 
```

根据时序日志，代码仅在这两个操作中占用大部分时间（超过 80%）。有没有办法让它更快？或者有没有办法实现我的用例？

```
KnowledgeBuilder kbuilder = KnowledgeBuilderFactory.newKnowledgeBuilder();   
kbuilder.add( org.drools.io.ResourceFactory.newByteArrayResource(getRule()), ResourceType.DRL); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T01:27:51.600

以下调用将实际编译您的代码，即它调用 JDT java 编译器：

kbuilder.add(org.drools.io.ResourceFactory.newByteArrayResource(getRule()), ResourceType.DRL);

除非您使用内部 API，否则无法避免这种情况，实际上使用起来非常复杂。

有一个中间步骤是使用描述符构建器 API 生成规范模型。它将为您节省几个周期，但并不多，因为最繁重的操作是 java 编译。Descr Builder API 的使用示例：

[https://github.com/droolsjbpm/drools/blob/master/drools-compiler/src/test/java/org/drools/lang/api/DescrBuilderTest.java](https://github.com/droolsjbpm/drools/blob/master/drools-compiler/src/test/java/org/drools/lang/api/DescrBuilderTest.java)

# windows-phone-7 - 隐藏触摸键盘

> ID：10515696
> 
> 赞同：1
> 
> 时间：2012-05-09T12:03:39.453
> 
> 标签：windows-phone-7, keyboard, windows-phone-7.1

点击文本框时是否可以不显示系统键盘？我创建了自定义键盘并且只能使用文本块，因此我不能只删除部分句子。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T12:26:05.730

如果您设置`IsReadOnly`为，`true`那么用户仍然可以选择 a 中的文本`TextBox`进行复制粘贴，并且操作系统在选择时不会显示软件输入键盘。不过，您仍然可以更改`TextBox`直通代码的内容。例如;

```
<TextBox x:Name="ExampleTextBox"
         IsReadOnly="True"
         Text="Initial Content" 
         GotFocus="ExampleTextBox_GotFocus"
         /> 
```

在你的代码后面；

```
private void ExampleTextBox_GotFocus(object sender, System.Windows.RoutedEventArgs e) {
  ExampleTextBox.Text += " ... focused!";
} 
```

将阻止用户通过软件键盘输入文本，但每次将焦点放在`TextBox`. 人为的例子，但你明白了。

我建议的唯一另一件事是重新设计`TextBox`. 默认情况下，何时`IsReadOnly`设置`TextBox`将提供用户无法修改的视觉提示。这不是这里的情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:06:09.950

如果用户触摸键盘，键盘将获得焦点。

作为开发人员，您唯一的选择就是抓住它并调用 this.focus 将焦点从文本框移开。

然而，这将意味着默认键盘弹出并隐藏的地方会闪烁。

我知道这一点，因为我有一个键盘应用程序。没有其他办法。

# windows-phone-7 - 将 OpenID 与 PhoneGap 和 Window Phone 7 一起使用

> ID：10515701
> 
> 赞同：12
> 
> 时间：2012-05-09T12:03:52.620
> 
> 标签：windows-phone-7, cordova, openid

有没有人使用 PhoneGap 在 Windows Phone 7 上成功实现 OpenID？

另一篇文章建议使用 ChildBrowser（[在 PhoneGap 平台上使用 OpenID](https://stackoverflow.com/questions/5348291/using-openid-on-a-phonegap-platform)）。但是当我查看适用于 Windows Phone 7 的 ChildBrowser 插件（[GitHub 链接](https://github.com/phonegap/phonegap-plugins/tree/master/WindowsPhone/ChildBrowser)）时，它的状态似乎非常糟糕。

编辑： ChildBrowser 似乎没有问题，我只是以错误的方式下载了文件。但我仍然有兴趣学习在此设置中实现 OpenID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-11T00:36:22.310

我可以通过以下方式解决它：

1）当用户点击 Google、Facebook、Twitter 等时，我在 InAppBrowser（PhoneGap 原生功能，无需插件）中打开一个链接（ [http://www.mywebsite.com/login/google ）。](http://www.mywebsite.com/login/google)

2) 当链接打开时，我的服务器会重定向到 Google.com，用户会看到 Google 登录页面。

3) 用户通过 Google 进行身份验证，Google 使用令牌重定向到我的服务器。

4) 现在我的服务器使用该令牌创建一些帐户、日志、执行更多操作，然后重定向到包含我的手机应用程序所需信息的 url。

例如 - 它重定向到[http://mywebsite.com/login/google/successful?token=](http://mywebsite.com/login/google/successful?token=) <>&query-string-parameters

5) InAppBrowser 正在侦听 URL 更改，当它找到具有上述模式的 URL 时，它会接管，剥离 URL，解析与 URL 一起发送的信息，然后关闭 InAppBrowser。

# r - ggplot2 极坐标图箭头

> ID：10515703
> 
> 赞同：6
> 
> 时间：2012-05-09T12:03:56.347
> 
> 标签：r, ggplot2, coordinates, plotrix

我可以轻松地使用 ggplot2 绘制如下图：

![1](../Images/ca79136a9a6327dfa154c9a472eaf7b6.png)

实际上，对于我的数据，如下所示：

```
度数
1 120 0.50
2 30 0.20
3 -120 0.20
4 60 0.50
5 150 0.40
6 -90 0.14
7 -60 0.50
8 0 0.60

```

第一列是度数（从 -180 到 180 或从 0 到 360），第二列是相应的值。所以我想用箭头从（0,0）到我的每个数据点绘制一个图形点，但圆坐标如下：

[![2](../Images/09765ff7426c61f0a1774378c0929c89.png)](https://i.stack.imgur.com/z4VKv.gif)
[（来源：[matrixlab-examples.com](http://www.matrixlab-examples.com/image-files/polar_plots_1.gif)）]

我尝试使用以下代码：

```
base <- ggplot(polar, aes(x=degree, y=value))
p <- base + coord_polar()
p <- p + geom_segment(aes(x=0, y=0, xend=degree, yend=value ),      arrow=arrow(length=unit(0.3,"cm")) )
print(p) 
```

它产生了一个极坐标图，但我没有得到从 (0,0) 到我的数据点的直箭头。

我也尝试使用 plotrix 包来绘制这个图。它的工作原理如下：

[3 http://rgm2.lab.nig.ac.jp/RGM_results/plotrix:polar.plot/polar.plot_001_med.png](http://rgm2.lab.nig.ac.jp/RGM_results/plotrix:polar.plot/polar.plot_001_med.png)

我无法在此图中导入箭头。

如何使用 plotrix 包添加箭头，或者如何使用 ggplot2 绘制它？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-09T13:47:00.933

设置数据（来自`dput`）：

```
polar <- structure(list(degree = c(120L, 30L, -120L, 60L, 150L, -90L, 
-60L, 0L), value = c(0.5, 0.2, 0.2, 0.5, 0.4, 0.14, 0.5, 0.6)), .Names = c("degree", 
"value"), class = "data.frame", row.names = c(NA, -8L)) 
```

你可以很容易地得到直线——你只需要确保你的线段从`degree`0 开始：

```
library(ggplot2)
base <- ggplot(polar, aes(x=degree, y=value))
p <- base + coord_polar()
p+ geom_segment(aes(y=0, xend=degree, yend=value)) 
```

![在此处输入图像描述](../Images/b8a3c2765038e8a2806da473fbdfc6f6.png) 但是，添加箭头会使它看起来可能存在错误（？）——在计算箭头的角度时没有考虑坐标变换：

```
library(grid)
p+ geom_segment(aes(y=0, xend=degree, yend=value) ,
                arrow=arrow(length=unit(0.3,"cm"))) 
```

![在此处输入图像描述](../Images/4457903558475a1b60e17825374b99c9.png) 您可以（在某种程度上）通过绘制自己的箭头来解决这个问题：

```
awid <- 2
p + geom_segment(aes(y=0, xend=degree, yend=value))+
    geom_segment(aes(y=value-0.05,yend=value,x=degree-awid/value,xend=degree))+
    geom_segment(aes(y=value-0.05,yend=value,x=degree+awid/value,xend=degree)) 
```

![在此处输入图像描述](../Images/7c89aa6fa4d003bff9f37401e1ae2048.png)

如果你仔细观察，你会发现箭头不是完全笔直的（如果你放大，效果会更明显`awid`）。

# swing - java swing GUI中滚动窗格的滚动条（其中有一个textArea）没有正确显示

> ID：10515706
> 
> 赞同：1
> 
> 时间：2012-05-09T12:04:05.490
> 
> 标签：swing, scrollbar, jscrollpane

我创建了一个具有以下顺序的 Swing Frame，JFrame > JPanel > JScrollPane > JTextArea。我正在使用卡片布局将 JPanel 加载到 JFrame 中。

我的问题是滚动条显示不正确（如图所示）。![在此处输入图像描述](../Images/74c837d47bd4566ce350b5236e5758f0.png)

我的代码如下：

```
 jTextArea1 = new javax.swing.JTextArea();
    jScrollPane1 = new javax.swing.JScrollPane(jTextArea1);

    jTextArea1.setColumns(15);
    jTextArea1.setEditable(false);
    jTextArea1.setFont(new java.awt.Font("SansSerif", 0, 12)); // NOI18N
    jTextArea1.setRows(3);

    JScrollBar verticalScrollBar = jScrollPane1.getVerticalScrollBar();
    verticalScrollBar.setValue(0);
    jTextArea1.setCaretPosition(0);

    jScrollPane1.setPreferredSize(new java.awt.Dimension(632, 425));

//Group Layout
javax.swing.GroupLayout layout = new javax.swing.GroupLayout(this);
    this.setLayout(layout);
    layout.setHorizontalGroup(layout
            .createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(
                    layout.createSequentialGroup()
                            .addGroup(
                                    layout.createParallelGroup(
                                            javax.swing.GroupLayout.Alignment.LEADING)
                                            .addComponent(
                                                    jPanelBottomPanel,
                                                    javax.swing.GroupLayout.PREFERRED_SIZE,
                                                    javax.swing.GroupLayout.DEFAULT_SIZE,
                                                    javax.swing.GroupLayout.PREFERRED_SIZE)
                                            .addComponent(
                                                    jLabelImageLogoSAGUpgradeUtility,
                                                    javax.swing.GroupLayout.PREFERRED_SIZE,
                                                    javax.swing.GroupLayout.DEFAULT_SIZE,
                                                    javax.swing.GroupLayout.PREFERRED_SIZE)

                            )
                            .addGap(0, 0, Short.MAX_VALUE))
            .addGroup(
                    layout.createSequentialGroup()
                            .addGroup(
                                    layout.createParallelGroup(
                                            javax.swing.GroupLayout.Alignment.LEADING)
                                            .addGroup(
                                                    layout.createSequentialGroup()
                                                    .addContainerGap()
                                                    .addComponent(jPanelStartInstaller,
                                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                                        javax.swing.GroupLayout.PREFERRED_SIZE,
                                                        javax.swing.GroupLayout.PREFERRED_SIZE)
                                                    .addContainerGap()
                                                    )
                                            .addGroup(
                                                    layout.createSequentialGroup()
                                                            .addGap(10, 10,
                                                                    10)
                                                            .addComponent(
                                                                    jCheckBox1)
                                                            .addGap(0,
                                                                    0,
                                                                    Short.MAX_VALUE))
                                            .addGroup(
                                                    javax.swing.GroupLayout.Alignment.LEADING,
                                                    layout.createSequentialGroup()
                                                            .addContainerGap()
                                                            .addGroup(
                                                                    layout.createParallelGroup(
                                                                            javax.swing.GroupLayout.Alignment.LEADING,
                                                                            false)
                                                                            .addGroup(
                                                                                    layout.createSequentialGroup()
                                                                                            .addGap(0,
                                                                                                    0,
                                                                                                    0)
                                                                                            .addComponent(
                                                                                                    jScrollPane1,
                                                                                                    javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                                    0,
                                                                                                    Short.MAX_VALUE))
.addGap(5)
                                                                            .addComponent(
                                                                                    jPanel5,
                                                                                    javax.swing.GroupLayout.PREFERRED_SIZE,
                                                                                    javax.swing.GroupLayout.DEFAULT_SIZE,
                                                                                    javax.swing.GroupLayout.PREFERRED_SIZE))))
                                                                                    .addContainerGap())
    );
    layout.setVerticalGroup(layout
            .createParallelGroup(javax.swing.GroupLayout.Alignment.LEADING)
            .addGroup(
                    javax.swing.GroupLayout.Alignment.TRAILING,
                    layout.createSequentialGroup()
                            .addComponent(jLabelImageLogoSAGUpgradeUtility,
                                    javax.swing.GroupLayout.PREFERRED_SIZE,
                                    javax.swing.GroupLayout.DEFAULT_SIZE,
                                    javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addGap(8, 8, 8) 
                            .addComponent(jPanel5,
                                    javax.swing.GroupLayout.PREFERRED_SIZE,
                                    javax.swing.GroupLayout.DEFAULT_SIZE,
                                    javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addPreferredGap(
                                    javax.swing.LayoutStyle.ComponentPlacement.RELATED)
                            .addComponent(jScrollPane1,
                                    javax.swing.GroupLayout.PREFERRED_SIZE,
                                    javax.swing.GroupLayout.PREFERRED_SIZE,
                                    javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addPreferredGap(javax.swing.LayoutStyle.ComponentPlacement.RELATED, 0, Short.MAX_VALUE)
                            .addComponent(jPanelStartInstaller,
                                    javax.swing.GroupLayout.PREFERRED_SIZE,
                                    javax.swing.GroupLayout.PREFERRED_SIZE,
                                    javax.swing.GroupLayout.PREFERRED_SIZE)
                            .addComponent(jCheckBox1)
                            .addComponent(jPanelBottomPanel,
                                    javax.swing.GroupLayout.PREFERRED_SIZE,
                                    javax.swing.GroupLayout.DEFAULT_SIZE,
                                    javax.swing.GroupLayout.PREFERRED_SIZE)
                            )); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:09:47.007

对于您的评论，

> *...如果是 Nibus 的外观和感觉，那么我需要更改代码的外观和感觉...*

你需要这个，

```
UIManager.setLookAndFeel ("com.sun.java.swing.plaf.windows.WindowsLookAndFeel"); 
```

也看看这个：[如何设置外观](http://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/plaf.html)

# visual-studio - VS/MSBUILD：复制子项目的输出文件，不添加对exe的引用

> ID：10515708
> 
> 赞同：4
> 
> 时间：2012-05-09T12:04:17.050
> 
> 标签：visual-studio, msbuild, project-reference

我有一个解决方案，它由主应用程序`MainProject`和几个插件项目`Plugin1`等`Plugin2`组成。它们中的每一个都构建在 Visual Studio 中的一个单独项目中。

为了构建解决方案，我希望将插件的所有文件复制到主应用程序的输出目录中。但我不想`MainProject.exe`包含对插件 dll 的显式引用（它们是动态加载的）。因此定义项目引用`MainProject`是行不通的。

我可以使用构建后步骤“手动”复制文件（如[C# - Copy dlls to the exe output directory when using dependency injection without references? 中所述](https://stackoverflow.com/questions/4606670/c-sharp-copy-dlls-to-the-exe-output-directory-when-using-dependency-injection)），但因为每个插件可能有多个文件，它们也会不时更改此解决方案的维护相当繁琐（特别是因为我确实有不同的构建配置，它们每个都生成不同的文件）。此外，我想轻松选择应该为某个构建复制哪些插件。

执行此操作的最佳方法是什么，可能涉及自定义 MSBuild 配置更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-07T05:26:33.010

请参阅此链接： http: [//msdn.microsoft.com/en-us/library/bb629394%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/bb629394%28v=vs.100%29.aspx) 在主项目上调用 MSBuild 时，如果您可以传递以下内容：

```
msbuild /p:CustomBeforeMicrosoftCommonTargets=[your custom msbuild file];PluginList=PathToPlugin1.csproj,PathToPlugin2.csproj 
```

在您的自定义 msbuild 文件中，诸如 GatherInfo 之类的目标将为您提供每个插件项目的输出文件的路径。有关示例，请参阅此问题：[https ://stackoverflow.com/questions/23346782/how-to-identify-files-needed-to-build-a-wix-project](https://stackoverflow.com/questions/23346782/how-to-identify-files-needed-to-build-a-wix-project)

# ruby - 为什么要返回枚举数？

> ID：10515710
> 
> 赞同：10
> 
> 时间：2012-05-09T12:04:19.687
> 
> 标签：ruby, arrays, enumerator

我很好奇为什么 ruby​​ 返回一个 Enumerator 而不是一个 Array ，因为 Array 似乎是一个明显的选择。例如：

```
'foo'.class
# => String 
```

大多数人认为 String 是一个字符数组。

```
'foo'.chars.class
# => Enumerator 
```

那么为什么 String#chars 返回一个 Enumerable 而不是一个数组呢？我假设有人对此进行了很多思考并决定 Enumerator 更合适，但我不明白为什么。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T12:10:36.527

如果你想要一个数组，调用`#to_a`. `Enumerable`和之间的区别在于`Array`，一个是懒惰的，另一个是渴望的。这是良好的旧内存（懒惰）与 cpu（渴望）优化。显然他们选择了懒惰，也是因为

```
str = "foobar"
chrs = str.chars
chrs.to_a # => ["f", "o", "o", "b", "a", "r"]
str.sub!('r', 'z')
chrs.to_a # => ["f", "o", "o", "b", "a", "z"] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-09T12:15:43.393

1.  抽象 - 某些东西可能是 Array 的事实是您在许多用例中不关心的实现细节。对于那些你这样做的人，你总是可以调用`.to_a`Enumerable 来获得一个。

2.  效率 - 枚举器是懒惰的，因为 Ruby 不必一次构建整个元素列表，而是可以根据需要一次构建一个。因此，实际上只计算了您需要的数字。当然，这会导致每个项目的开销增加，所以这是一个权衡。

3.  可扩展性 -`chars`返回 Enumerable 的原因是因为它本身是作为枚举器实现的；如果您将一个块传递给它，该块将每个字符执行一次。这意味着不需要 eg `.chars.each do ... end`; 你可以做`.chars do ... end`。这使得在字符串的字符上构造操作链变得容易。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T15:03:20.097

这完全符合 1.9 的精神：尽可能返回枚举数。String#bytes、String#lines、String#codepoints，还有像 Array#permutation 这样的方法都返回一个枚举器。

在 ruby​​ 1.8 String#to_a 中产生了一系列行，但该方法在 1.9 中消失了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T13:05:26.180

'大多数人认为字符串是一个字符数组'......只有当你像 C 或其他语言一样思考时。恕我直言，Ruby 的面向对象比这要先进得多。大多数`Array`操作往往`Enumerable`更像，所以这样可能更有意义。

数组非常适合随机访问不同的索引，但字符串很少被特定索引访问。（如果您尝试访问特定索引，我怀疑您可能正在做学业）

如果您尝试检查每个字符，则 Enumerable 有效。使用 Enumberable，您可以访问`map`、`each`、`inject`等。对于替换，还有字符串函数和正则表达式。

坦率地说，我想不出现实世界需要一系列字符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T12:09:04.920

也许`string`红宝石中的 a 是可变的？然后拥有一个`Array`并不是一个明显的选择——例如，长度可能会改变。但是你仍然想列举字符......

此外，您真的不想传递字符串字符的*实际*存储空间，对吧？我的意思是，我不记得太多 ruby​​（已经有一段时间了），但如果我正在设计界面，我只会分发`.chars`方法/属性/其他内容的“副本”。现在...你想每次都分配一个新数组吗？或者只是返回一个知道如何枚举字符串中字符的小对象？因此，保持隐藏的实现。

所以不行。大多数人不认为字符串是一个字符数组。大多数人认为字符串是字符串。具有由库/语言/运行时定义的行为。有了一个实现，你只需要知道什么时候你想用抽象带以下的东西变得讨厌和私有。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T12:13:06.000

实际上**'foo'.chars**将 str 中的每个字符传递给给定的块，如果没有给出块，则返回一个枚举器。

核实 ：

```
irb(main):017:0> 'foo'.chars
=> #<Enumerable::Enumerator:0xc8ab35 @__args__=[], @__object__="foo", @__method__=:chars>
irb(main):018:0> 'foo'.chars.each {|p| puts p}
f
o
o
=> "foo" 
```

# teamcity - Teamcity 电子邮件仅显示 10 处更改，如何显示更多更改

> ID：10515718
> 
> 赞同：1
> 
> 时间：2012-05-09T12:05:04.163
> 
> 标签：teamcity

构建成功后的 Teamcity 通知电子邮件仅显示 10 处更改。我想知道如何在 teamcity 中进行配置以显示更多更改。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-19T03:35:34.043

您可以创建`internal.properties`in config 文件夹，并包含以下属性，

`teamcity.notification.template.update.interval`- 系统重读模板的频率（整数，以秒为单位，默认 60）

`teamcity.notification.includeDebugInfo`- 在模板处理错误的情况下将调试信息包含到消息中（布尔值，默认为 false）

`teamcity.notification.maxChangesNum`- 电子邮件中列表的最大更改数（整数，默认 10）

`teamcity.notification.maxCompilationDataSize`- 包含在电子邮件消息中的编译错误数据的最大大小（以字节为单位）（整数，默认 20480）

`teamcity.notification.maxFailedTestNum`- 在电子邮件消息中列出的最大失败测试数（整数，默认 50）

`teamcity.notification.maxFailedTestStacktraces`- 电子邮件消息中的最大测试堆栈跟踪数（整数，默认 5）

`teamcity.notification.maxFailedTestDataSize`- 包含在单个电子邮件消息中的失败测试输出数据的最大大小（以字节为单位）（整数，默认 10240）

更多细节见，[https://confluence.jetbrains.com/display/TCD9/Configuring+TeamCity+Server+Startup+Properties](https://confluence.jetbrains.com/display/TCD9/Configuring+TeamCity+Server+Startup+Properties)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-17T18:09:43.447

恕我直言，似乎 TC 并没有明确支持开箱即用的默认设置。换句话说，很多事情显然是可配置的，但没有文档，向他们的董事会提出的查询也不会收到回复。相反，解决方案似乎是假设所有模板文件都可以随意编辑以提供所需的结果。

这个问题就是一个例子。一位用户对如何查找/编辑通知模板给出了一般性的回答； [http://devnet.jetbrains.net/thread/293800](http://devnet.jetbrains.net/thread/293800) TeamCity 5.1 电子邮件模板 :: JetBrains 开发者社区 devnet.jetbrains.net/thread/2938002011 年 2 月 7 日 – 我将开始在我们的项目中使用 TeamCity。... getViewChangesUrl(bean.build)}'>${modNum} 更改<@plural modNum/> ...

请注意，他引用了“modNum”值，这是我们有问题的项目。它的默认设置似乎是每个开箱即用设置 10。（我认为我们看不到那部分。）我可以通过分配一个新值来轻松更改它。

在我的文件 [ServerConfigsPath]\config_notifications\email\common.ftl 中，我现在有了；

```
 ```
<!-- was  #assign modNum=bean.modificationsNumber/ --> 
```

<#assign modNum=100/> 
我希望这对您或其他新手有所帮助。我喜欢！//对不起，代码间距，我看不出如何正确...
```

# python - Tkinter 画布更新速度在程序过程中降低

> ID：10515720
> 
> 赞同：3
> 
> 时间：2012-05-09T12:05:14.960
> 
> 标签：python, performance, tkinter

以下 python 程序创建一个 Tkinter`Canvas`对象并在其上绘制随机矩阵。它还测量进行 10 次后续更新所需的时间。正如您从下面的输出中可以看到的那样，这个时间在程序过程中持续且显着地增长。这种行为的原因是什么，我该如何解决？

```
from Tkinter import Tk, Canvas
import time
import numpy as np

window = Tk()
nRows = 30
nCols = 30
CELL_SIZE = 10
canvas = Canvas(window, width=CELL_SIZE*nRows,
                height=CELL_SIZE*nCols)
canvas.pack()
def drawbox(m):
    for y in range(nRows):
        for x in range(nCols):
            if m[y][x]:
                color = '#00FF00'
            else:
                color = '#000000'
            canvas.create_rectangle(CELL_SIZE*x,
                                    CELL_SIZE*y,
                                    CELL_SIZE*x+CELL_SIZE,
                                    CELL_SIZE*y+CELL_SIZE,
                                    fill=color,
                                    outline="#000000", width=1)
count = 0
timeStart = time.time()
while(True):
    board = np.random.rand(nRows, nCols) > 0.5
    if count % 10 == 0:
        print '%.1f seconds'%(time.time() - timeStart)
        timeStart = time.time()
        count = 0
    count += 1
    drawbox(board)
    canvas.after(5)
    canvas.update() 
```

这是输出

```
0.0 seconds
1.7 seconds
4.1 seconds
6.3 seconds
8.7 seconds 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:57:37.513

每次`drawbox`在您的程序中调用时，您都会创建一组新的矩形，然后将它们绘制在旧矩形的顶部。随着时间的推移，您正在绘制越来越多的矩形（尽管它看起来不像，因为新矩形是在旧矩形上方绘制的）。另请注意，以您的程序编写方式，您正在消耗内存。

解决此问题的方法是在第一次复飞时创建矩形，然后在后续通过时使用`canvas.itemconfig(rectangle_id,fill=color)`. 我已经在你的`drawbox`下面发布了一个（丑陋的）修改来完成这个。

```
def drawbox(m,_rectangles={}):
    if(_rectangles):
        myrectangles=_rectangles
    else:
        myrectangles={}

    for y in range(nRows):
        for x in range(nCols):
            if m[y][x]:
                color = '#00FF00'
            else:
                color = '#000000'
            if(not _rectangles):
                cid=canvas.create_rectangle(CELL_SIZE*x,
                                            CELL_SIZE*y,
                                            CELL_SIZE*x+CELL_SIZE,
                                            CELL_SIZE*y+CELL_SIZE,
                                            fill=color,
                                            outline="#000000", width=1)
                myrectangles[(y,x)]=cid
            else:
                canvas.itemconfig(_rectangles[(y,x)],fill=color)

    if(not _rectangles):
      _rectangles.update(myrectangles) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T12:58:44.960

您在每次更新时创建新项目。画布显示您之前添加的所有矩形，因此变得越来越慢（每次更新创建 900 个矩形，30 个之后您的场景中有 27,000 个对象......）

为避免这种情况，您可以创建一次矩形，然后只更新它们的颜色。

你可以在顶层：

```
rectangles = [ [ canvas.create_rectangle (CELL_SIZE*x, CELL_SIZE*y,
                    CELL_SIZE*x+CELL_SIZE, CELL_SIZE*y+CELL_SIZE,
                    fill="#000000",outline="#000000", width=1) 
                 for x in range(nCols)] for y in range(nRows)] 
```

在drawbox中：

```
canvas.itemconfig(rectangles[y][x], fill=color) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T13:16:18.930

众所周知，您添加的项目越多，画布就越慢（尽管它通常可以处理 1000 个或 10 个 1000 个而没有太多问题）。你有几个问题。正如其他答案所指出的那样，一个是您不断创建越来越多的对象。通过重用现有对象并更新它们的坐标和颜色，您应该会看到速度的显着提高。

第二个问题是你的无限循环和你的睡眠（`canvas.after(5)`）。有一种更好的方法可以实现这种效果，而不会产生令人讨厌的 GUI 一次冻结 5 毫秒的副作用。

您需要做的就是创建一个函数来绘制或更新对象，然后将一个事件放入队列中，以便在一段时间后再次调用它自己。然后它将自动更新，而无需您显式创建循环。

例如：

```
def redraw():
    board = np.random.rand(nRows, nCols) > 0.5
    drawbox(board)
    canvas.after(100, redraw) 
```

# c++ - 在 C++ 中，可以在运行时设置/更改类属性 - 公共、私有或受保护吗？

> ID：10515723
> 
> 赞同：2
> 
> 时间：2012-05-09T12:05:22.620
> 
> 标签：c++, class, attributes, runtime

是否可以在 C++ 语言中在运行时更改类属性。例如如下：

```
class base
{
    public:
        //public members

    private : 
        //private members
};

class derived1 : attribute base
{
    public:
        //public members
        base::<base method name> //so that it an be made accessible from the main - outside the class.

    private:
        //private members
}; 
```

属性-public、private、protected 可以在运行时动态更改吗？

Rgds，软软的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T12:10:00.120

是编译器确保您不访问`private`成员。一旦编译器完成其工作并生成二进制代码，所有有关隐私的信息都会丢失。

所以不，你不能在运行时改变它。

我不知道你为什么想要这个，但是如果你希望某些函数能够在某些时候被调用，而不是其他的，你可以有一个变量来定义它们是否可以被调用。然后，在该函数的顶部：

```
int Class::function(...)
{
    if (!function_is_allowed)
        return OPERATION_NOT_ALLOWED;
    ...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T12:06:25.717

不，不能修改访问级别，尽管有一些技巧可以绕过它们。

请参阅此答案 - [https://stackoverflow.com/a/6886432/673730](https://stackoverflow.com/a/6886432/673730)

如果您正在寻找类似于 Java 反射的东西，您可以通过在运行时修改其访问级别来访问私有成员，那么没有。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T14:56:56.320

您不能更改类的访问修饰符。故事结局。

*免责声明：几乎所有东西都有黑客攻击，包括这个。不要使用它们。*

当被问及为什么要这样做时，根据您在问题中的评论，看起来您正在尝试做的是根据类的其他运行时属性控制对类的运行时属性的访问。例如，也许只有当's >= 42时才能访问 a `Character`'s 。`Powers``Character``Level`

这不是关于 C++ 语法机制的技术问题，而是[业务逻辑](http://en.wikipedia.org/wiki/Business_logic)问题。您将在程序及其算法的设计中找到这个问题的答案——而不是一些技术性的 C++ 技巧。

类通常用于建模事物。在你的情况下，游戏中的一个角色。也许这个角色有一个等级和一个权力列表（我将简单地表示为`string`s）。

在这种情况下：

```
class Character
{
public:
  int level_;
  vector<string> powers_;
}; 
```

...是您的角色模型的简单表示。现在，如果您想`powers_`在运行时根据 的值控制对 的访问`level_`，您可以使用[访问器方法](http://en.wikipedia.org/wiki/Method_%28computer_programming%29#Accessor_and_mutator_methods)：

```
class Character
{
public:
  int level_;
  vector<string> Powers() const 
  {
    if( level_ >= 42 )
      return powers_;
    else
      return vector<string>();
  }
private:
  vector<string> powers_;
}; 
```

现在，只有当角色的等级足够高时，您才能获得角色的力量。

这仍然是一个高度简单化的例子，上面的代码不是生产质量的。然而，想法就在那里——在实现程序的业务逻辑时，您的重点应该放在您编写的算法上，而不是 C++ 的技术性或您使用的任何语言。

# c# - 在代码中更改虚拟路径和启用/禁用站点

> ID：10515725
> 
> 赞同：0
> 
> 时间：2012-05-09T12:05:37.317
> 
> 标签：c#, iis-7, asp.net-4.0

我正在开发一个包含三个 Web 服务和一个网站的 Web 项目。我的源代码存储在 TFS 中以进行版本控制，并且我经常需要在同一代码的多个不同分支中工作。这些分支定期合并，并且都以相同的方式设置。他们都使用 WebDev.WebServer 作为默认主机。这很好，因为它使其他团队成员不必不断更改 IIS 中的设置以切换到正确的文件夹。
好吧，你猜怎么着？
我想迁移到 IIS 并且仍然能够为每个分支使用相同的配置。这将导致冲突，因为每次切换分支时我都需要更改这些项目的虚拟文件夹。我还需要能够关闭这些 IIS 站点以启用 WebDev。手动，这有点工作，我是一名程序员。这需要自动化...
我的想法是创建一个在本地主机上运行的小型 Web 应用程序，我可以使用它来更改虚拟文件夹和/或打开/关闭 IIS 站点。听起来很简单，所以我只需要两件事：

1.  如何在代码中将 IIS 站点的虚拟文件夹从一个位置更改为另一个位置？
2.  如何在 IIS 中打开和关闭站点？

很简单，对吧？那么，第三点：您还有其他我可以使用的建议吗？

哦，其他开发人员也在从事同一个项目。并非所有人都将使用 IIS 来运行它。因此我无法更改这些项目的配置文件。我必须通过 IIS 来管理它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:17:24.580

就个人而言，我会在这种情况下使用 Powershell。

```
$websitePath = "IIS:\\Sites\Path to your website in iis"
$fullWebSiteFilePath = "file path to your content"

if(-not (test-path $websitePath))
{
    new-item $websitePath -physicalPath $fullWebSiteFilePath -type Application
}
else
{
    Set-ItemProperty $websitePath -name physicalPath -value $fullWebSiteFilePath 
} 
```

使用一点 jigerry pokery，您可以从 xml 文件中读取不同的配置，然后调用将 xml 文件名作为参数传递的 shell 脚本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-10T06:25:25.247

要以编程方式管理 IIS7，您可以从[`ServerManager`](http://msdn.microsoft.com/en-us/library/microsoft.web.administration.servermanager.aspx)类开始。

# php - jquery php 图片上传使用 http://valums.com/ajax-upload/

> ID：10515729
> 
> 赞同：0
> 
> 时间：2012-05-09T12:06:08.510
> 
> 标签：php, jquery, ajax, image

[我正在寻找http://valums.com/ajax-upload/](http://valums.com/ajax-upload/)中给出的 jquery php 图片上传。我尝试了上述网站中给出的代码。但它不工作。作为我的新手..我尝试了下面的代码。

```
<?php
$uploaddir = 'c:\xampp\htdocs\ajax-upload\server\uploads\';
$uploadfile = $uploaddir . basename($_FILES['file']['name']);

if (move_uploaded_file($_FILES['file']['tmp_name'], $uploadfile)) {
  echo "success";
} else {
  // WARNING! DO NOT USE "FALSE" STRING AS A RESPONSE!
  // Otherwise onSubmit event will not be fired
  echo "error";
}
?> 
```

这是我的 html 代码

```
<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="fileuploader.css" rel="stylesheet" type="text/css">
    <style>
        body {font-size:13px; font-family:arial, sans-serif; width:700px; margin:100px auto;}
    </style>
</head>
<body>
    <p><a href="http://github.com/valums/file-uploader">Back to project page</a></p>

    <p>To upload a file, click on the button below. Drag-and-drop is supported in FF, Chrome.</p>
    <p>Progress-bar is supported in FF3.6+, Chrome6+, Safari4+</p>

    <div id="file-uploader-demo1">
        <noscript>
            <p>Please enable JavaScript to use file uploader.</p>
            <!-- or put a simple form for upload here -->
        </noscript>
    </div>

    <script src="fileuploader.js" type="text/javascript"></script>
    <script>
        function createUploader(){
            var uploader = new qq.FileUploader({
                element: document.getElementById('file-uploader-demo1'),
                action: '../server/upload.php',
                debug: true
            });
        }

        // in your app create uploader as soon as the DOM is ready
        // don't wait for the window to load
        window.onload = createUploader;
    </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:10:28.867

在php更改中：

```
$uploaddir = 'c:\xampp\htdocs\ajax-upload\server\uploads\'; 
```

到

```
$uploaddir = 'server/uploads'; 
```

在javascript更改中：

```
action: 'http://localhost/ajax-upload/server/upload.php', 
```

到

```
action: 'server/upload.php', 
```

如果您正在运行的 php 文件位于 ajax-upload 文件夹中。

# android - 当用户按下主页按钮或返回按钮而不停止|退出|提交活动时如何保持活动2

> ID：10515730
> 
> 赞同：0
> 
> 时间：2012-05-09T12:06:09.733
> 
> 标签：android

我有两个活动（A，B）：

A：歌曲按钮 B（WebView）：歌曲播放列表 - 从 URL 嵌入

我的问题是，当用户去 B 开始播放音乐并且用户回到 A 而不停止音乐（音乐正在 B 中播放）...但是当用户再次去 B 时，B 中的 WebView 是新的，而旧 B 是还在播放音乐。那么，怎样才能让用户可以去老B停止音乐呢？

我真的坚持了一个多星期:((

我非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:26:59.553

您可以在意图上使用以下标志

```
myIntent.setFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP); 
```

在创建活动 B 时。有关此的更多信息，请查看以下链接 [http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_SINGLE_TOP](http://developer.android.com/reference/android/content/Intent.html#FLAG_ACTIVITY_SINGLE_TOP)

# c# - 从 SQL 获取大量数据时从 WPF 中的 COM 上下文错误转换

> ID：10515733
> 
> 赞同：0
> 
> 时间：2012-05-09T12:06:17.253
> 
> 标签：c#, sql, wpf, timeoutexception

我正在处理`wpf`应用程序。此应用程序用于显示报告。为此，我有两个选项卡：一个选项卡用于选择列`listview`和其他过滤器，第二个选项卡显示`sql`表中的结果。对于动态查询，我在服务器端进行查询并将其作为参数传递到存储过程中，我正在使用执行方法执行它。

**问题 ：**

如果我从总共 170 列中选择一些列，它工作正常，但是当我选择列表视图中的所有列并尝试转到其他选项卡时，它仍保留在同一选项卡上并引发异常：

```
The CLR has been unable to transition from COM context 0xc40048 to COM context
0xc401b8 for 60 seconds. 
```

有数千行为此获取。

***问题 ：***

*1.）我如何使查询的执行速度更快。*

*2.）使表格更快地填充数据的步骤。*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T12:17:04.433

在尝试的 COM 上下文转换期间检测到死锁时，将激活 contextSwitchDeadlock 托管调试助手 (MDA)。

症状

最常见的症状是从托管代码对非托管 COM 组件的调用不返回。另一个症状是内存使用量随着时间的推移而增加。

原因

最可能的原因是单线程单元 (STA) 线程未泵送消息。STA 线程要么正在等待而不发送消息，要么正在执行冗长的操作，并且不允许消息队列发送。

内存使用量随时间增加的原因是终结器线程尝试在非托管 COM 组件上调用 Release 并且该组件未返回。这可以防止终结器回收其他对象。

默认情况下，Visual Basic 控制台应用程序的主线程的线程模型是 STA。如果 STA 线程通过公共语言运行库或第三方控件直接或间接使用 COM 互操作性，则会激活此 MDA。要避免在 Visual Basic 控制台应用程序中激活此 MDA，请将 MTAThreadAttribute 属性应用于 main 方法或修改应用程序以泵送消息。

当满足以下所有条件时，此 MDA 可能被错误激活：

· 应用程序从 STA 线程直接或通过库间接创建 COM 组件。

· 应用程序在调试器中停止，用户要么继续应用程序，要么执行单步操作。

· 未启用非托管调试。

要确定 MDA 是否被错误地激活，请禁用所有断点，重新启动应用程序，并允许它在不停止的情况下运行。如果 MDA 没有被激活，很可能最初的激活是错误的。在这种情况下，请禁用 MDA 以避免干扰调试会话。

解析度

遵循关于 STA 消息泵送的 C​​OM 规则。

要避免出现这些错误弹出窗口，请从 Visual Studio 窗口的“调试”菜单中选择“异常”，然后在“异常对话框”中选择“托管调试助手异常节点”。然后选择 ContextSwitchDeadlock 并从 Thrown 列中删除选择。

![在此处输入图像描述](../Images/5ef94787363cfbfad23b796cd78f2cdf.png)

如何快速执行：

有很多方法可以做到这一点

在表上创建缺失的索引。

在此表上创建索引视图。

您还可以根据数据范围对表进行分区。

将此表放在其他磁盘上，以便数据读取/写入会很快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:32:11.240

一些想法：

*   使用[`BackgroundWorker`](http://msdn.microsoft.com/en-us/library/system.componentmodel.backgroundworker.aspx)类并[使用`Dispatcher`WPF 中](http://msdn.microsoft.com/en-us/magazine/cc163328.aspx)的。
*   对结果进行分页 - 您还可以创建[无限滚动效果](http://www.codinghorror.com/blog/2012/03/the-end-of-pagination.html)
*   使用 DataReader 而不是 DataSet
*   隐藏/禁用选项卡 2 上的控件呈现，绑定数据，重新启用控件。在 WinForms 中，您将使用`SuspendLayout`/`ResumeLayout`
*   更改 UI - 我无法想象人类如何处理 170 列……也许您可以提供更好（通常更简单）的数据表示

最终，您需要确定性能问题在调用堆栈中的**哪个位置。**Visual Studio 调试器应该对此有所帮助，但您可能需要使用其他一些工具。使用 SQL Profiler 分析您的存储过程/SQL Server 行为。对于网络连接，请尝试[使用 WireShark 之](http://www.wireshark.org/)类的方法。

**编辑：**添加了 Dispatch/BackgroundWorker 链接---您仍然需要知道超时发生的位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T12:19:56.893

好吧，如果你想让你的数据库调用更高效，我建议你试试 Enterprise Library，目前的版本是 5.0。与我们的应用程序配合得很好。

[http://msdn.microsoft.com/en-us/library/ff648951.aspx](http://msdn.microsoft.com/en-us/library/ff648951.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T12:34:49.330

我个人建议您在 SQL 级别而不是在应用程序本身过滤结果，尽管这里有几个答案也会提高您在应用程序端的性能，应该遵循它们。

有关使用 SQL 分页的示例代码，请参阅[T-SQL：使用 ROW_NUMBER() 进行分页](http://blogs.x2line.com/al/archive/2005/11/18/1323.aspx)。

# android - SQLite 中的更改会自动反映在 MySQL 中吗？

> ID：10515738
> 
> 赞同：0
> 
> 时间：2012-05-09T12:06:40.327
> 
> 标签：android, mysql, service, sqlite

我是使用服务的新手。在我的应用程序中，我想在后台运行服务。我在 MySQL 服务器和 SQLite 中创建相同的数据库。如果我更改 SQLite 数据库表中的某些数据，是否意味着它也应该自动将更改存储在 MySQL 服务器中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T14:16:19.297

回答您的问题：**不**，它不会自动将 SQLite 中所做的更改反映到 MySQL 中。

为什么？因为您基本上有 2 个不同的数据库，尽管它们具有相同的名称（并且可能具有相同的结构）。为了让它们通信和同步，你需要实现某种通信机制。

正如*eggyal*在上述评论中向您建议的那样，请看[这里](https://stackoverflow.com/questions/6511402/how-to-sync-sqlite-database-on-android-phone-with-mysql-database-on-server)，因为那里解释了此类问题的解决方案。

# silverlight - silverlight 插件 DateTime.Now 是否会导致不可靠的数据或安全问题？

> ID：10515742
> 
> 赞同：0
> 
> 时间：2012-05-09T12:06:53.323
> 
> 标签：silverlight, ria

假设您在 ProjectBus 上创建了一个实体类，名称为*Person* ，这是我们的函数；

```
 Person p=new Person(){Name=Dummy Smith,LastLoginDate=DateTime.Now,....};
    personEntityService.Persons.Add(p);
    personEntityService.SubmitChanges(); 
```

我认为**我们相信客户端的日期时间**，因为**我们得到了客户日期**。

如果一项操作具有**财务**或**病理上的重要性**，客户可能会欺骗我们。否则我们可能会造成客户的损失。

所以我要求最佳实践。

我们应用的一种解决方案是在登录过程中获取服务器日期时间并查看服务器和客户端之间的差异。（或在您的交易桥上的任何交易之前）如果日期时间差异不适用，则拒绝操作并抛出***您的日期错误***！

或者我们可能不使用 DateTime 函数。在客户端代码上，它们将填写在服务器端。对于这种情况，我们需要使用 db 默认字段或（和）我们管理域服务类的提交 ops.etc。

那么什么是正式的，在 Silverlight 富 Internet 应用程序中管理日期字段的首选方式。

任何评论将不胜感激。

# java - Struts 2：将表单字段的值从 jsp 发送到操作类

> ID：10515748
> 
> 赞同：2
> 
> 时间：2012-05-09T12:07:37.033
> 
> 标签：java, javascript, jsp, struts2

我知道它一定很简单，但我仍然无法弄清楚。

我在 jsp 页面上有一个链接。

单击此链接时，我希望打开另一个选项卡（浏览器）。

这个新页面的视图是由动作类定义的，它需要一个表单字段值。

我面临的问题是，如果不提交表单，我无法将表单字段的值传递给操作类。并且提交表单也会改变原始 jsp 的视图，这违背了打开新选项卡的整个目的。

所以我需要一种在不重置原始jsp页面视图的情况下将表单字段值获取到操作类的方法。

我遇到的一种方法是 URL 重写，但这是我最后的选择。

请提出一些建议！

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:25:04.000

首先，我想指出当前可能（据我所知）强制出现一个新选项卡，这取决于用户的浏览器和他们在[此处](https://stackoverflow.com/questions/3970746/html-how-to-force-open-links-in-a-new-tab)看到的设置以获取更多信息。

现在回答您的问题，因为链接无法（单独）发送表单数据，您有 2 个选项：

1.  您可以使用指向要发送数据的 URL 的表单“提交”按钮，并将 target="_blank" 添加到表单中，这将在提交表单时打开一个新页面。
2.  您可以将 javascript 事件添加到您的链接，以便在按下它时将输入的值附加到 URL 并使用该 URL 打开一个新窗口。

我个人会选择第一个选项。

这是选项一的简单示例，它在您提交时不会删除输入值...

```
<html>
  <body>
    <form action="test1.html" method="post" target="_blank">
      <input type="text" name="bob" />
      <input type="submit" value="Hello"/>
    </form>
  </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T14:48:34.307

您可以进行 ajax 调用，或者使用其中的 get 参数动态构建链接 url。

# javascript - Flexslider (jQuery)：暂停自动动画

> ID：10515750
> 
> 赞同：2
> 
> 时间：2012-05-09T12:07:43.033
> 
> 标签：javascript, jquery, html, flexslider

我正在使用出色的 jQuery 插件[Flexslider](http://www.woothemes.com/flexslider/)在网页上创建轮播。除了一件事之外，这一切都完美无缺：我希望滑块在用户单击页面上其他位置的给定链接时自动停止动画。

这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-09T22:05:05.300

当单击页面上其他位置的特定链接时，您希望滑块停止。假设链接具有“some-link”类，并且还假设您的 flexslider 具有“flexslider”类，在这种情况下，您可以使用以下 JS 片段：

`$('.some-link').click(function() { $('.flexslider').flexslider("pause"); });`

您需要确保代码位于 a`$(document).ready(function() { ... })`中，或者脚本位于页面上的 html 下方，该页面具有“some-link”类的链接。否则，添加该点击事件的选择器将不匹配任何内容（因为它还不存在）。

顺便说一句，@Guern 的解决方案包含有关如何实际暂停 flexslider 的最重要信息，但您的问题是要求再迈出一步。尽管已经 2 岁了，但我现在正在回答这个问题，因为它出现在谷歌搜索中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T17:30:13.910

当然有可能。
在此示例中，当您单击幻灯片时它会停止，只需将单击事件绑定到您喜欢的页面链接。

```
$('.flexslider .slides > li').click(function() {
    $('.flexslider').flexslider("pause");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T12:08:22.797

在该 jQuery 插件的函数列表中，有：

```
slider.pause()                //Function: Pause slider slideshow interval 
```

不确定，但我认为您可以使用此功能来停止效果，如下所示：

```
$(#elm).flexslider().pause(); 
```

您可以在其网页上的高级选项卡中查看包含 flexslider 插件属性的列表。

# drupal - Drupal 7 - 打印和电子邮件页面

> ID：10515751
> 
> 赞同：0
> 
> 时间：2012-05-09T12:07:43.507
> 
> 标签：drupal, drupal-7, drupal-modules

我正在使用“打印机、电子邮件和 PDF 版本”模块（Drupal 7）。它的功能是打印页面和通过电子邮件转发页面内容。当我通过电子邮件将页面分享给另一个人时，该消息被剪辑在收件箱中并报告为网络钓鱼，也没有显示图像。

我们必须从管理员端配置任何东西。？为什么会出现这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:01:03.447

出于安全原因，电子邮件客户端通常配置为默认不显示图像（例如：隐藏攻击性图像、阻止恶意/有害图像等）。请参阅[https://security.stackexchange.com/questions/7489/why-would-someone-want-to-block-images-in-email](https://security.stackexchange.com/questions/7489/why-would-someone-want-to-block-images-in-email)。

同样，如果电子邮件客户端检测到您的电子邮件的*发件人*地址与发送它的实际服务器不匹配，那么您的电子邮件可能会被标记为网络钓鱼电子邮件。请参阅[http://drupal.org/node/336038#comment-4735232](http://drupal.org/node/336038#comment-4735232)。

考虑使用[SMTP 身份验证模块](http://drupal.org/project/smtp)之类的模块，这样如果您使用的是 Gmail 地址，您就可以通过 smtp 服务器（例如 Google 的服务器）发送电子邮件。

# django - 尝试在共享主机中安装 django-cms

> ID：10515752
> 
> 赞同：2
> 
> 时间：2012-05-09T12:07:44.327
> 
> 标签：django, django-cms

我可以在没有 shell 访问权限的共享主机中安装 django-cms（来自 www.django-cms.org）吗？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-16T17:34:51.393

真正的问题是：“我可以在共享主机中运行 Django 吗？”。django-cms 只是一个包，它需要 Django 运行，而 Django 可能会成为你的限制因素，而不是 django-cms。

所以，答案是响亮的“也许”。从技术上讲，如果您在 virtualenv 中运行所有 Python 包，包括 Django 和 django-cms，则不需要 root/sudo 权限。*但是*，这是一个很大的但是，假设您的共享主机提供使您可以使用 virtualenv。如果他们完全支持 Python *，*你应该很好，但即便如此，谁知道呢。

但是，共享主机通常不适合 Django 之类的东西。即使你可以让它运行，性能肯定是一个问题。如今，真的*没有*理由不直接跳到 VPS。您可以在 Rackspace 以大约 11 美元/月的价格购买自己的小型 VPS。这很便宜 - 可能比您为共享托管支付的便宜。

只需实现飞跃，停止生活在有限的共享环境中。它值得每一分钱。

# android - 原因：android.database.sqlite.SQLiteException：无法将只读数据库从版本 0 升级到 1

> ID：10515754
> 
> 赞同：7
> 
> 时间：2012-05-09T12:07:47.497
> 
> 标签：android, android-sqlite

尝试创建 SQLite 数据库时出现以下 LogCat 异常：

> 原因：android.database.sqlite.SQLiteException：无法将只读数据库从版本 0 升级到 1

这是我的代码：

```
import static android.provider.BaseColumns._ID;
import static org.inetizen.university_timetable.Constants.DAY_OF_WEEK;
import static org.inetizen.university_timetable.Constants.DURATION;
import static org.inetizen.university_timetable.Constants.MODULE_CODE;
import static org.inetizen.university_timetable.Constants.ROOM;
import static org.inetizen.university_timetable.Constants.START_TIME;
import static org.inetizen.university_timetable.Constants.TABLE_NAME;
import static org.inetizen.university_timetable.Constants.TYPE_OF_SESSION;
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;

public class TimeTableData extends SQLiteOpenHelper {
private static final String DATABASE_NAME = "timetable.db";
private static final int DATABASE_VERSION = 1;

/** Create a helper object for the TimeTable database **/
public TimeTableData(Context ctx) {
    super(ctx, DATABASE_NAME, null, DATABASE_VERSION);
}

@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL("CREATE TABLE " + TABLE_NAME + " (" +_ID
            + " INTEGER PRIMARY KEY AUTOINCREMENT " + MODULE_CODE
            + " TEXT NOT NULL " + DAY_OF_WEEK + " TEXT NOT NULL "
            + START_TIME + " INTEGER NOT NULL " + DURATION
            + " INTEGER NOT NULL " + TYPE_OF_SESSION + " TEXT NOT NULL "
            + ROOM + " TEXT NOT NULL )");
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
    onCreate(db);
}
} 
```

这是我的 LogCat：

> ```
> 05-09 12:32:04.525: I/Database(601): sqlite returned: error code = 1, msg = near       "module_code": syntax error
> 05-09 12:32:04.525: E/Database(601): Failure 1 (near "module_code": syntax error) on   0x252588 when preparing 'CREATE TABLE table_name (_id INTEGER PRIMARY KEY AUTOINCREMENT     module_code TEXT NOT NULL day_of_week TEXT NOT NULL start_time INTEGER NOT NULL duration     INTEGER NOT NULL type_of_session TEXT NOT NULL room TEXT NOT NULL );'.
> 05-09 12:32:04.535: E/SQLiteOpenHelper(601): Couldn't open timetable.db for writing (will try read-only):    
> 05-09 12:32:04.535: E/SQLiteOpenHelper(601): android.database.sqlite.SQLiteException: near "module_code": syntax error: CREATE TABLE table_name (_id INTEGER PRIMARY KEY AUTOINCREMENT module_code TEXT NOT NULL day_of_week TEXT NOT NULL start_time INTEGER NOT NULL duration INTEGER NOT NULL type_of_session TEXT NOT NULL room TEXT NOT NULL );
> 05-09 12:32:04.535: E/SQLiteOpenHelper(601):    at android.database.sqlite.SQLiteDatabase.native_execSQL(Native Method)
> 05-09 12:32:04.535: E/SQLiteOpenHelper(601):    at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1727)
> 05-09 12:32:04.535: E/SQLiteOpenHelper(601):    at org.inetizen.university_timetable.TimeTableData.onCreate(TimeTableData.java:26)
> 05-09 12:32:04.535: E/SQLiteOpenHelper(601):    at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:106)
> 05-09 12:32:04.535: E/SQLiteOpenHelper(601):    at android.database.sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java:158)
> 05-09 12:32:04.535: E/SQLiteOpenHelper(601):    at org.inetizen.university_timetable.TimeTable.getClasses(TimeTable.java:57)
> 05-09 12:32:04.535: E/SQLiteOpenHelper(601):    at org.inetizen.university_timetable.TimeTable.onCreate(TimeTable.java:46)
> 05-09 12:32:04.535: E/SQLiteOpenHelper(601):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
> 05-09 12:32:04.535: E/SQLiteOpenHelper(601):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
> 05-09 12:32:04.535: E/SQLiteOpenHelper(601):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
> 05-09 12:32:04.535: E/SQLiteOpenHelper(601):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
> 05-09 12:32:04.535: E/SQLiteOpenHelper(601):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
> 05-09 12:32:04.535: E/SQLiteOpenHelper(601):    at android.os.Handler.dispatchMessage(Handler.java:99)
> 05-09 12:32:04.535: E/SQLiteOpenHelper(601):    at android.os.Looper.loop(Looper.java:123)
> 05-09 12:32:04.535: E/SQLiteOpenHelper(601):    at android.app.ActivityThread.main(ActivityThread.java:4627)
> 05-09 12:32:04.535: E/SQLiteOpenHelper(601):    at java.lang.reflect.Method.invokeNative(Native Method)
> 05-09 12:32:04.535: E/SQLiteOpenHelper(601):    at java.lang.reflect.Method.invoke(Method.java:521)
> 05-09 12:32:04.535: E/SQLiteOpenHelper(601):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
> 05-09 12:32:04.535: E/SQLiteOpenHelper(601):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
> 05-09 12:32:04.535: E/SQLiteOpenHelper(601):    at dalvik.system.NativeStart.main(Native Method)
> 05-09 12:32:04.545: D/AndroidRuntime(601): Shutting down VM
> 05-09 12:32:04.545: W/dalvikvm(601): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
> 05-09 12:32:04.555: E/AndroidRuntime(601): FATAL EXCEPTION: main
> 05-09 12:32:04.555: E/AndroidRuntime(601): java.lang.RuntimeException: Unable to start activity ComponentInfo{org.inetizen.university_timetable/org.inetizen.university_timetable.TimeTable}: android.database.sqlite.SQLiteException: Can't upgrade read-only database from version 0 to 4: /data/data/org.inetizen.university_timetable/databases/timetable.db
> 05-09 12:32:04.555: E/AndroidRuntime(601):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
> 05-09 12:32:04.555: E/AndroidRuntime(601):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
> 05-09 12:32:04.555: E/AndroidRuntime(601):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
> 05-09 12:32:04.555: E/AndroidRuntime(601):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
> 05-09 12:32:04.555: E/AndroidRuntime(601):  at android.os.Handler.dispatchMessage(Handler.java:99)
> 05-09 12:32:04.555: E/AndroidRuntime(601):  at android.os.Looper.loop(Looper.java:123)
> 05-09 12:32:04.555: E/AndroidRuntime(601):  at android.app.ActivityThread.main(ActivityThread.java:4627)
> 05-09 12:32:04.555: E/AndroidRuntime(601):  at java.lang.reflect.Method.invokeNative(Native Method)
> 05-09 12:32:04.555: E/AndroidRuntime(601):  at java.lang.reflect.Method.invoke(Method.java:521)
> 05-09 12:32:04.555: E/AndroidRuntime(601):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
> 05-09 12:32:04.555: E/AndroidRuntime(601):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
> 05-09 12:32:04.555: E/AndroidRuntime(601):  at dalvik.system.NativeStart.main(Native Method)
> 05-09 12:32:04.555: E/AndroidRuntime(601): Caused by: android.database.sqlite.SQLiteException: Can't upgrade read-only database from version 0 to 4: /data/data/org.inetizen.university_timetable/databases/timetable.db
> 05-09 12:32:04.555: E/AndroidRuntime(601):  at android.database.sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java:170)
> 05-09 12:32:04.555: E/AndroidRuntime(601):  at org.inetizen.university_timetable.TimeTable.getClasses(TimeTable.java:57)
> 05-09 12:32:04.555: E/AndroidRuntime(601):  at org.inetizen.university_timetable.TimeTable.onCreate(TimeTable.java:46)
> 05-09 12:32:04.555: E/AndroidRuntime(601):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
> 05-09 12:32:04.555: E/AndroidRuntime(601):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
> 05-09 12:32:04.555: E/AndroidRuntime(601):  ... 11 more
> 05-09 12:32:07.325: I/Database(611): sqlite returned: error code = 1, msg = near "module_code": syntax error
> 05-09 12:32:07.325: E/Database(611): Failure 1 (near "module_code": syntax error) on 0x119778 when preparing 'CREATE TABLE table_name (_id INTEGER PRIMARY KEY AUTOINCREMENT module_code TEXT NOT NULL day_of_week TEXT NOT NULL start_time INTEGER NOT NULL duration INTEGER NOT NULL type_of_session TEXT NOT NULL room TEXT NOT NULL );'.
> 05-09 12:32:07.335: E/SQLiteOpenHelper(611): Couldn't open timetable.db for writing (will try read-only):
> 05-09 12:32:07.335: E/SQLiteOpenHelper(611): android.database.sqlite.SQLiteException: near "module_code": syntax error: CREATE TABLE table_name (_id INTEGER PRIMARY KEY AUTOINCREMENT module_code TEXT NOT NULL day_of_week TEXT NOT NULL start_time INTEGER NOT NULL duration INTEGER NOT NULL type_of_session TEXT NOT NULL room TEXT NOT NULL );
> 05-09 12:32:07.335: E/SQLiteOpenHelper(611):    at android.database.sqlite.SQLiteDatabase.native_execSQL(Native Method)
> 05-09 12:32:07.335: E/SQLiteOpenHelper(611):    at android.database.sqlite.SQLiteDatabase.execSQL(SQLiteDatabase.java:1727)
> 05-09 12:32:07.335: E/SQLiteOpenHelper(611):    at org.inetizen.university_timetable.TimeTableData.onCreate(TimeTableData.java:26)
> 05-09 12:32:07.335: E/SQLiteOpenHelper(611):    at android.database.sqlite.SQLiteOpenHelper.getWritableDatabase(SQLiteOpenHelper.java:106)
> 05-09 12:32:07.335: E/SQLiteOpenHelper(611):    at android.database.sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java:158)
> 05-09 12:32:07.335: E/SQLiteOpenHelper(611):    at org.inetizen.university_timetable.TimeTable.getClasses(TimeTable.java:57)
> 05-09 12:32:07.335: E/SQLiteOpenHelper(611):    at org.inetizen.university_timetable.TimeTable.onCreate(TimeTable.java:46)
> 05-09 12:32:07.335: E/SQLiteOpenHelper(611):    at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
> 05-09 12:32:07.335: E/SQLiteOpenHelper(611):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
> 05-09 12:32:07.335: E/SQLiteOpenHelper(611):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
> 05-09 12:32:07.335: E/SQLiteOpenHelper(611):    at android.app.ActivityThread.access$2300(ActivityThread.java:125)
> 05-09 12:32:07.335: E/SQLiteOpenHelper(611):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
> 05-09 12:32:07.335: E/SQLiteOpenHelper(611):    at android.os.Handler.dispatchMessage(Handler.java:99)
> 05-09 12:32:07.335: E/SQLiteOpenHelper(611):    at android.os.Looper.loop(Looper.java:123)
> 05-09 12:32:07.335: E/SQLiteOpenHelper(611):    at android.app.ActivityThread.main(ActivityThread.java:4627)
> 05-09 12:32:07.335: E/SQLiteOpenHelper(611):    at java.lang.reflect.Method.invokeNative(Native Method)
> 05-09 12:32:07.335: E/SQLiteOpenHelper(611):    at java.lang.reflect.Method.invoke(Method.java:521)
> 05-09 12:32:07.335: E/SQLiteOpenHelper(611):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
> 05-09 12:32:07.335: E/SQLiteOpenHelper(611):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
> 05-09 12:32:07.335: E/SQLiteOpenHelper(611):    at dalvik.system.NativeStart.main(Native Method)
> 05-09 12:32:07.345: D/AndroidRuntime(611): Shutting down VM
> 05-09 12:32:07.345: W/dalvikvm(611): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
> 05-09 12:32:07.355: E/AndroidRuntime(611): FATAL EXCEPTION: main
> 05-09 12:32:07.355: E/AndroidRuntime(611): java.lang.RuntimeException: Unable to start activity ComponentInfo{org.inetizen.university_timetable/org.inetizen.university_timetable.TimeTable}: android.database.sqlite.SQLiteException: Can't upgrade read-only database from version 0 to 4: /data/data/org.inetizen.university_timetable/databases/timetable.db
> 05-09 12:32:07.355: E/AndroidRuntime(611):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
> 05-09 12:32:07.355: E/AndroidRuntime(611):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
> 05-09 12:32:07.355: E/AndroidRuntime(611):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
> 05-09 12:32:07.355: E/AndroidRuntime(611):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
> 05-09 12:32:07.355: E/AndroidRuntime(611):  at android.os.Handler.dispatchMessage(Handler.java:99)
> 05-09 12:32:07.355: E/AndroidRuntime(611):  at android.os.Looper.loop(Looper.java:123)
> 05-09 12:32:07.355: E/AndroidRuntime(611):  at android.app.ActivityThread.main(ActivityThread.java:4627)
> 05-09 12:32:07.355: E/AndroidRuntime(611):  at java.lang.reflect.Method.invokeNative(Native Method)
> 05-09 12:32:07.355: E/AndroidRuntime(611):  at java.lang.reflect.Method.invoke(Method.java:521)
> 05-09 12:32:07.355: E/AndroidRuntime(611):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
> 05-09 12:32:07.355: E/AndroidRuntime(611):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
> 05-09 12:32:07.355: E/AndroidRuntime(611):  at dalvik.system.NativeStart.main(Native Method)
> 05-09 12:32:07.355: E/AndroidRuntime(611): Caused by: android.database.sqlite.SQLiteException: Can't upgrade read-only database from version 0 to 4: /data/data/org.inetizen.university_timetable/databases/timetable.db
> 05-09 12:32:07.355: E/AndroidRuntime(611):  at android.database.sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java:170)
> 05-09 12:32:07.355: E/AndroidRuntime(611):  at org.inetizen.university_timetable.TimeTable.getClasses(TimeTable.java:57)
> 05-09 12:32:07.355: E/AndroidRuntime(611):  at org.inetizen.university_timetable.TimeTable.onCreate(TimeTable.java:46)
> 05-09 12:32:07.355: E/AndroidRuntime(611):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
> 05-09 12:32:07.355: E/AndroidRuntime(611):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
> 05-09 12:32:07.355: E/AndroidRuntime(611):  ... 11 more 
> ```

有关如何解决异常的任何建议？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T12:50:13.830

您使用的 SQL 语法看起来不正确，您缺少逗号。试试这个：

`db.execSQL("CREATE TABLE " + TABLE_NAME + " (" +_ID + " INTEGER PRIMARY KEY AUTOINCREMENT, " + MODULE_CODE + " TEXT NOT NULL, " + DAY_OF_WEEK + " TEXT NOT NULL, " + START_TIME + " INTEGER NOT NULL, " + DURATION + " INTEGER NOT NULL, " + TYPE_OF_SESSION + " TEXT NOT NULL, " + ROOM + " TEXT NOT NULL)");`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T12:37:10.217

你可以试试**getWritableDatabase()**。愿此链接对您有所帮助。

[http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#getWritableDatabase%28%29](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#getWritableDatabase%28%29)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T12:50:17.843

您没有显示您的 db.open 方法...我敢打赌您没有将数据库打开为可写的。它应该看起来像这样：

```
public GroceryDB open() throws SQLException {
    mDBHelper = new DBHelper(mCtx);
    mDb = mDBHelper.getWritableDatabase();
    return this;
} 
```

# php - 自发布日期以来的时间

> ID：10515755
> 
> 赞同：0
> 
> 时间：2012-05-09T12:07:48.383
> 
> 标签：php, time, rss

在一个新项目中，我正在使用 PHP 读取并显示在页面上的 rss。我想做的一件事是显示自帖子发布以来已经过去了多少时间，但我找不到这样做的方法，这是我当前的代码，希望有人能帮助我！

```
echo "<div id=\"left\">";
    $rss1 = new DOMDocument();
    $rss1->load('http://www.macfan.nl/macfan.rss');
    echo '<h2>MacFan</h2>';
    $feed = array();
    foreach ($rss1->getElementsByTagName('item') as $node) {
        $item = array ( 
            'title' => $node->getElementsByTagName('title')->item(0)->nodeValue,
            'link' => $node->getElementsByTagName('link')->item(0)->nodeValue,
            'date' => $node->getElementsByTagName('pubDate')->item(0)->nodeValue,
            );
        array_push($feed, $item);
    }
    $limit = 5;
    for($x=0;$x<$limit;$x++) {
        $title = str_replace(' & ', ' &amp; ', $feed[$x]['title']);
        $link = $feed[$x]['link'];
        $date = date('F d', strtotime($feed[$x]['date']));
        echo '<p><a href="'.$link.'" title="'.$title.'">'.$title.'</a></p>';
        echo "<p class=\"small\">$date</p>";
    }
echo "</div>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:17:38.897

您可以比较 unix 时间戳；

```
$seconds_between_now_and_then=(time()-strtotime($feed[$x]['date'])); 
```

然后你可以看到它相距多远。以下这些可以帮助您使其更具可读性：

```
$minutes_between_now_and_then=$seconds_between_now_and_then/60;
$hours_between_now_and_then=$minutes_between_now_and_then/60;
$days_between_now_and_then=$minutes_between_now_and_then/24;

echo 'Seconds:'.$seconds_between_now_and_then.'<br />';
echo 'Minutes:'.$minutes_between_now_and_then.'<br />';
echo 'Hours:'.$hours_between_now_and_then.'<br />';
echo 'Days:'.$days_between_now_and_then; 
```

# jquery - 在 iframe 中拖动以滚动

> ID：10515759
> 
> 赞同：1
> 
> 时间：2012-05-09T12:07:57.517
> 
> 标签：jquery, html, mootools, iscroll4

全部

我想让 iPhone 风格的拖动以在**iframe**中滚动功能。这是我的示例代码

```
<iframe src="http://www.css-tricks.com" width="360" height="500" id="dynFrame"></iframe>​ 
```

小提琴： http: [//jsfiddle.net/ajaypatel_aj/P​​gujJ /](http://jsfiddle.net/ajaypatel_aj/PgujJ/)

你可以在这里看到垂直滚动条来滚动页面，我想通过向上或向下拖动来滚动页面。

我试过 iScroll 但它不适用于 iframe。也从这个尝试

1.  [https://github.com/inuyaksa/jquery.nicescroll](https://github.com/inuyaksa/jquery.nicescroll)

2.  [http://mootools.net/demos/?demo=Drag.Scroll](http://mootools.net/demos/?demo=Drag.Scroll)

先谢谢了。

# javascript - 异步 JavaScript 静态函数变量

> ID：10515762
> 
> 赞同：0
> 
> 时间：2012-05-09T12:08:06.200
> 
> 标签：javascript, node.js, asynchronous

javascrip（nodejs服务器）中的“静态”函数有问题。

```
User.create = function(data, _callback){        
    var node = db.createNode(data);
    var _user = new User(node);
    _user.save(function(err){
        if(err) return callback(err, null);
        _user.index(function(err){
            if(err) return callback(err, null);
            callback(null, _user);  
        })
    })
}; 
```

如果我调用这个函数两次，内部回调函数中的 _user 变量会采用新值，它似乎会覆盖函数 var 而不是分配一个新值。

我需要调用此函数来分配一个新变量，因此它等待保存和索引函数完成而不更改 _user 变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:11:44.120

JavaScript 变量确实是函数范围的，因此`var _user`在后续运行中不定义新变量不会有任何解释。

查看代码，我会对您的 User 构造函数中发生的事情更加怀疑 - 也许它包含一些范围界定或其他逻辑问题，导致在后续调用中创建相同的用户。类似的“嫌疑人”将是`data`传入的参数，以及`db.createNode()`. 只建议这些领域，因为更有可能是程序问题在起作用，而不是 JavaScript 不遵守规则 :)

另外，我注意到您的`User.create`函数接受一个名为 的参数`_callback`，但后来调用`callback`. 我不知道这是否是您示例中的拼写错误，或者您是否不小心从示例中未显示的更高范围调用回调，但这可能会产生奇怪的行为。

# jquery - jQuery Mobile + Photoswipe，用 ajax 加载画廊？

> ID：10515764
> 
> 赞同：0
> 
> 时间：2012-05-09T12:08:20.077
> 
> 标签：jquery, jquery-mobile, photoswipe

我正在使用 jquery mobile 创建一个网站，几乎一切都很好。但我有一个小问题，它与Photoswipe（[http://www.photoswipe.com/](http://www.photoswipe.com/)）有关。

**这就是发生的事情：**

我有几个不同的案例页面按类别划分。当我进入一个案例站点时，我可以单击图库，图像会显示出来并且效果很好。但是，如果我从这个案例页面直接转到另一个案例页面并尝试打开那个画廊。什么都没发生。但是，如果我不直接转到另一个案例页面并转到（没有画廊）之间的页面，然后转到一个新案例。画廊将开放。我使用 jquery 移动标准 ajax 处理，因此每个页面都加载了 ajax，并且与`<head>`.

图库图片是用 PHP 和 MySQL 加载的，但 id`<ul>`始终相同；＃画廊。

是否与此有关，当直接在具有相同 id 的画廊的页面之间移动时。它搞砸了什么？这是我的代码：

**Javascript：**

```
(function(window, $, PhotoSwipe){
            $(document).ready(function(){

                $('div.gallery-page')
                    .live('pageshow', function(e){

                        var 
                            currentPage = $(e.target),
                            options = {},
                            photoSwipeInstance = $("ul.gallery a", e.target).photoSwipe(options,  currentPage.attr('id'));

                        return true;

                    })

                    .live('pagehide', function(e){

                        var 
                            currentPage = $(e.target),
                            photoSwipeInstance = PhotoSwipe.getInstance(currentPage.attr('id'));

                        if (typeof photoSwipeInstance != "undefined" && photoSwipeInstance != null) {
                            PhotoSwipe.detatch(photoSwipeInstance);
                        }

                        return true;

                    });

});     
}(window, window.jQuery, window.Code.PhotoSwipe));

$('div:jqmData(role="page")').live('pageinit',function(){

    var options = {
        jQueryMobile: true
    };
    $("#Gallery a").photoSwipe(options);

}); 
```

**HTML**

```
<ul id="Gallery" class="gallery">
<li><a href="01.jpg" rel="external"><img src="01.jpg" alt="1" /></a></li>
<li><a href="02.jpg" rel="external"><img src="02.jpg" alt="2" /></a></li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-23T10:47:10.570

将类名“gallery”替换为“gallery-page”。

# c# - 在多个 XML 文件中搜索字符串

> ID：10515767
> 
> 赞同：3
> 
> 时间：2012-05-09T12:08:33.663
> 
> 标签：c#, asp.net, xml, .net-3.5

我有一个包含 400k+ XML 文档的文件夹，还有更多，每个文件都以“ID”.xml 命名，每个文件都属于一个特定的用户。在 SQL 服务器数据库中，我将 XML 文件中的“ID”与用户 ID 匹配，这是我将 XML 文档与用户互连的地方。用户可以附加无限数量的 XML 文档（但假设最多 >10k 文档）

所有 XML 文档都有一些共同的元素，但结构可能会有所不同。

现在，每个用户都需要在属于她的 XML 文档中进行搜索，而到目前为止我所尝试的（遍历每个文件并使用流式阅读器读取它）太慢了。我不在乎，如果它读取并匹配整个文件的属性等等，或者只是每个元素中的文本。首先应该返回的是一个包含文件名中 ID 的列表。

如果有的话，这里最快和最聪明的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:17:43.013

我认为[LINQ-to-XML](http://msdn.microsoft.com/en-us/library/bb387098.aspx)可能是您想要的方向。

假设您知道所需标签的名称，您将能够搜索这些特定元素并返回值。

```
var xDoc = XDocument.Load("yourFile.xml");

var result = from dec in xDoc.Descendants()
             where dec.Name == "tagName"
             select dec.Value; 
```

`results`然后将包含`IEnumerable`名称与“tagName”匹配的任何 XML 标记的值

查询也可以这样写：

```
var result = from dec in xDoc.Decendants("tagName")
             select dec.Value; 
```

或这个：

```
var result = xDoc.Descendants("tagName").Select(tag => tag.Value); 
```

输出是相同的，只是根据元素名称进行过滤的不同方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T12:18:10.050

您必须打开每个包含相关数据的文件，如果您不知道哪些文件包含它，则必须打开所有可能匹配的文件。因此，唯一的性能提升将在解析例程中。

在解析 Xml 时，如果需要速度，您可以使用 ，`XmlReader`因为它比其他解析器执行得更好（大多数在查询之前读取整个 Xml 文件）。它是只转发的事实不应该成为这种情况的限制。

如果解析时间与磁盘 I/O 一样长，您可以尝试并行解析文件，这样一个线程可以等待读取文件，而另一个线程解析加载的数据。不过，我不认为你可以在那里取得*那么*大的胜利。

还有什么是“太慢”，什么是可以接受的？许多文件的这种解决方案会随着时间的推移而变慢吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T12:10:51.497

Use LINQ to XML.

Check out [this](http://msdn.microsoft.com/en-us/library/bb387098.aspx) article. over at msdn.

```
XDocument doc = XDocument.Load("C:\file.xml"); 
```

And don't forget that reading so many files will always be slow, you may try writing a multi-threaded program...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-09T12:31:08.500

如果我理解正确，您不想为特定用户打开每个 xml 文件，因为无论您使用 linq to xml 还是其他方法都太慢了。您是否考虑过在 xml 文件和关系数据库（标签）（连同 xml ID）中保存一些值。在这种情况下，您可以先在 DB 中搜索一些值，然后只选择包含搜索值的 xml 文件？

例如：ID、tagName1、tagName2 xmlDocID、value1、value2

我的另一个问题是，您为什么选择将 xml 文档存储在文件系统中。如果您使用的是 SQL Server 2005/2008，它对存储、搜索 xml 列（甚至在 xml 中索引某些值）有很好的支持

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-09T12:26:34.867

*您是否只是在某处*寻找内容中包含特定字符串的文件？

**警告 - 不是纯 .NET 解决方案。如果这让您感到害怕，请坚持使用其他答案。:)**

如果这就是您正在做的事情，另一种选择是让[grep](http://gnuwin32.sourceforge.net/packages/grep.htm)之类的东西为您完成繁重的工作。使用“-l”参数来说明您只对文件名感兴趣并且您是赢家。（更多使用示例，请参见此[链接](http://www.cyberciti.biz/faq/howto-use-grep-command-in-linux-unix/)）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-09T12:47:28.993

[LB](https://stackoverflow.com/users/932418/l-b)已经提出了一个有效的观点。在这种情况下，Lucene.Net（或任何索引器）是必须的。它会在所有搜索中为您提供稳定（非常快速）的性能。处理大量任意数据是索引器的主要优点之一。

或者有什么理由，你为什么不使用 Lucene？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-11T12:20:16.190

Lucene.NET（和 Lucene）支持增量索引。如果您可以每隔一段时间重新打开索引进行阅读，那么您可以整天将文档添加到索引中——您的搜索将与您上次重新打开索引进行搜索时保​​持同步。

# java - 如何让两个类共享相同的变量定义

> ID：10515769
> 
> 赞同：11
> 
> 时间：2012-05-09T12:08:37.917
> 
> 标签：java, xml, swing, oop

我真正需要的是能够在接口中声明常规变量并在两个类中实现该接口，我不必在每个类中重新声明它们（即 class.data.variables 而不是 class.variables） . 有什么方法可以让我以不同的方式实现相同的目标？

提供更多细节。本质上，我创建了一个小型绘图程序，将 JLabels 放在 JScrollPane 上的 JPanel 上。因为我对这些 JLabel 有一个特定的设计（即它们不只是用于绘制它们代表此应用程序的航空公司对象），所以我有一个扩展 JLabel 并将我的应用程序特定变量添加到它的类。最终，我用这些变量读写了一个 XML 文件，这样他们就可以加载和保存他们的设计。由于我不能将这个扩展类用于我的 XML 定义，因为它对父类尖叫，即使我告诉它有 NONE 作为访问器（我读到有一个错误），我必须创建一个相同的类并将值复制回来来回保存和加载。

因此，如果我可以创建一个包含额外数据声明的类（例如 CellDataRecord.java）并让该类在两个地方（JLabel 扩展和 XML 数据）都使用，而不必使用 XML 之类的东西，那就太好了。数据.CellDataRecordXXX。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T12:16:45.717

您可以通过继承或使用接口来做到这一点，其中变量在父类中设置为常量。由于您正在扩展 JLabel，因此您应该在两个类上实现接口：

```
public interface MyInterface {
    int someint = 9;
}

public class MyClass1 extends JLabel implements MyInterface {
    //this class has access to `someint`
}

public class MyClass2 extends JLabel implements MyInterface {
    // also has access to `someint`
} 
```

# 编辑

由于您希望能够从不同的类更改相同的变量，因此您必须确保您没有更改副本并且正在更改相同的变量，因此您应该`volatile`在变量上使用关键字来向 java 指示所有线程都应该检查更新之前的值。

现在您需要有一个单独的类，以便可以从其他类中创建实例来获取值。您必须使用`static`关键字来确保为所有类实例保留一份副本。

```
public class MyVariableWrapper {
    public static volatile int some_var = 9;
    public void updateSomeVar(int newvar) {
         some_var = newvar;
    }
    public int getSomeVar() { return some_var; }
} 
```

现在其他两个类只是这样做：

```
public class MyClass1 extends JLabel {
    MyVariableWrapper myVariableWrapper;
    MyClass1() {
        super();
        myVariableWrapper = new MyVariableWrapper();
        // now I have access to `some_var`
    }
}

public class MyClass2 extends JLabel {
    MyVariableWrapper myVariableWrapper;
    MyClass2() {
        super();
        myVariableWrapper = new MyVariableWrapper();
        // now I have access to the same `some_var` as MyClass1
    }

    // this is a wrapper method for your convenience
    // since you don't like the excess code when accessing the variable
    public int getSomeVar() {
        return myVariableWrapper.some_var;
        // or myVariableWrapper.getSomeVar();
    }
    public void setSomeVar(int newvar) {
        myVariableWrapper.some_var = newvar;
        // or myVariableWrapper.setSomeVar(newvar);
    }
} 
```

现在你可以这样做：

```
MyClass2 myClass2 = new MyClass2();
System.out.println(""+myClass2.getSomeVar()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:14:12.707

我不确定我是否 100% 理解您的问题，但从您描述的前几行开始，您可以定义一个抽象类并让您的类扩展它，而不是实现接口。这样，您将能够在抽象类中定义属性，并且这些属性对所有子类都是通用的。

# iphone - NSMutableDictionary initWithContentsOfFile - null

> ID：10515770
> 
> 赞同：0
> 
> 时间：2012-05-09T12:08:47.250
> 
> 标签：iphone, ios

我正在尝试使用 .plist 的内容创建一个 NSMutableDictionary。我有以下代码：

```
NSString *myFile = [[NSBundle mainBundle] pathForResource:@"words" ofType:@"plist"];
NSMutableDictionary* myDict = [[NSMutableDictionary alloc]initWithContentsOfFile:myFile];
NSObject *randomWord = [myDict objectForKey:@"Item 6"];
NSLog(@"%@", randomWord); 
```

myFile 和 myDict 已填充（不为空），但当要打印 randomWord（或 myDict ）时，它会打印“（null）”。

我到处都看过。我究竟做错了什么？

编辑：

```
self    MainViewController *const   0x068c0d60
myDict  NSMutableDictionary *   0x0000586c
myFile  NSString *  0x068c31f0 
```

和 NSLog：

```
2012-05-10 12:26:22.302 project2[681:f803] (null) 
```

所以似乎 myFile 和 myDict 已填充，但 randomWord 不是？

编辑#2：

NSLog(@"%@", myDict) 打印：

```
2012-05-10 14:15:17.016 project2[2641:f803] (null) 
```

所以你是对的，myDict 是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:12:40.040

remove space here in item 6

```
[myDict objectForKey:@"Item6"]; 
```

and if this not works try this one

```
NSString *path = [[NSBundle mainBundle] pathForResource:@"words" ofType:@"plist"];
NSData* data = [NSData dataWithContentsOfFile:path];
NSMutableArray* array = [NSPropertyListSerialization propertyListFromData:data
                                                         mutabilityOption:NSPropertyListImmutable
                                                                   format:NSPropertyListXMLFormat_v1_0
                                                         errorDescription:NULL];
if (array) {
  NSMutableDictionary* myDict = [NSMutableDictionary dictionaryWithCapacity:[array count]];
  for (NSDictionary* dict in array) {
    State* state = [[State alloc] initWithDictionary:dict];
    [myDict setObject:state forKey:state.name;
    [state release];
  }
  NSLog(@"The count: %i", [myDic count]);
} else {
  NSLog(@"Plist does not exist");
} 
```

# python - Bash：使用 Python 函数 Ceil - 如何计算两个变量乘积的 ceil？

> ID：10515773
> 
> 赞同：1
> 
> 时间：2012-05-09T12:09:10.863
> 
> 标签：python, bash

我尝试运行以下代码，该代码位于 Bash 脚本中。

```
NUMBER=600
LOSS_RATE=0,3
TOT_PKT=100

test=$(python -c "from math import ceil; print ceil($NUMBER * 500.0)")
test2=$(python -c "from math import ceil; print ceil($NUMBER * $LOSS_RATE)")
echo $test
echo $test2 
```

我打印出以下内容：

```
Traceback (most recent call last):
  File "<string>", line 1, in <module>
TypeError: ceil() takes exactly one argument (2 given)
300000.0 
```

第一个 Python 命令被执行，但第二个导致给定的 TypeError。我该怎么做才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:12:55.767

Python 使用`.`小数点作为`,`参数分隔符。因此，如果您使用`LOSS_RATE=0.3`一切都应该可以正常工作：

```
> NUMBER=600
> LOSS_RATE=0.3
> python -c "from math import ceil; print ceil($NUMBER * $LOSS_RATE)"
180.0 
```

~~问题在于 shell 脚本。`echo`而不是`python -c`代码，你会看到它：~~

 ~~```
> echo "from math import ceil; print ceil($NUMBER * $LOSS_RATE)"
from math import ceil; print ceil(600 * ) 
```~~ 

~~你从不定义`LOSS_RATE`. 但是，这会导致 SyntaxError。由于您收到不同的错误，因此听起来像是`LOSS_RATE`设置为包含逗号的内容。~~

# javascript - 如何在弹出窗口中保存 background.html 的选项？

> ID：10515777
> 
> 赞同：0
> 
> 时间：2012-05-09T12:09:34.740
> 
> 标签：javascript, jquery, google-chrome-extension

我有一个问题，我还不能解决。我有一个带有菜单和选项卡的弹出页面，还有一个设置选项卡。在设置选项卡上，我**将**一些项目保存到本地存储，其中之一是用于桌面通知的 notification_time。

**注意**：我没有选项页面！

我的扩展有这个弹出窗口和一个背景页面，它的功能是通过桌面通知提醒用户。我每隔 5,10,30 分钟，1,2 小时等显示一次通知。这个时间应该可以在弹出页面的选项菜单中选择。问题是，如果保存了 5 分钟，例如当我更新到 10 分钟时，background.html 并没有更新自己！我几乎重写了 20 次代码，但找不到解决方案。这是一个代码示例和一个打印屏幕，可以清楚地了解我的问题。

![在此处输入图像描述](../Images/ec5f740b462fbd26c52750e545b5b583.png)

**弹出**：

```
$("#save_settings").click(function(){
        var bgp = chrome.extension.getBackgroundPage();
        localStorage.setItem("notifynumber",$("#notifynumber").val());

        if($("#notify").attr('checked')){
            localStorage.setItem('chbox','true');
        } else {
            localStorage.setItem('chbox','false');
        }

        if($("#notif_time_select :selected").val()!="default"){
            bgp.setTime(parseInt($("#notif_time_select :selected").val()));
        }

        if($("#org_select :selected").val()!="default"){
            localStorage.setItem('org',$("#org_select :selected").val().replace(/%20/g," "));
        }
    }); 
```

**注意**：save_settings 是一个按钮，在选项卡上有一个复选框（如果选中则允许通知，否则禁用）。有两个 html 选择标签，一个用于选择一些数据（org = 组织），一个用于选择时间。`"#notif_time_select"`是 html 选择标签，我选择 5,10,30 分钟等...

所以，每当我点击保存按钮时，我都会将复选框状态保存到本地存储，并从后台页面调用一个函数，以节省时间。：`bgp.setTime(parseInt($("#notif_time_select :selected").val()));`

**背景页面：**

为了节省时间，我使用函数 setTime：

```
var time = 300000; // default
function setTime(time){
    this.time=time;
    console.log("time set to: "+this.time);
} 
```

之后，我使用 setInterval 定期显示通知

```
setInterval(function(){         
                howmanyOnline("notify",function(data){
                    if(data>localStorage.getItem("notifynumber")){
                        if (!window.webkitNotifications) { // check browser support
                            alert('Sorry , your browser does not support desktop notifications.');
                        }
                        notifyUser(data); // create the notification
                    }
                    if(localStorage.getItem('tweet')=='true'){
                        if(data>localStorage.getItem("notifynumber")){
                            sendTweet(data,localStorage.getItem('org'),localStorage.getItem('ck'),localStorage.getItem('cs'),localStorage.getItem('at'),localStorage.getItem('ats'));
                        }
                    }
                });
    },time); 
```

setInterval 中的代码工作正常，唯一的问题是，

```
},time); 
```

更新不好。如果我更改设置以每 10 分钟显示一次通知，它会保持 5 分钟。唯一的方法是重新启动整个扩展。如何在不重新启动整个扩展程序的情况下更新 setInterval 的频率？谢谢吉姆

* * *

如果我也将 notif_time 保存到 localStorage 会怎样，并且在后台设置一个监听器来监听 localStorage 的变化。有没有办法监听特定的 localStorage 项目的变化？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T15:04:53.823

现在，`setInterval`仅在您的应用程序加载时运行一次。如果您希望间隔以新的时间间隔触发，您应该使用`clearInterval`然后重新调用`setInterval`.

```
// set a new time, wipe out the old interval, and set a new interval
function setTime(t) {
    window.time = t;
    clearInterval(notifInterval);
    notifInterval = setInterval(makeNotification, time);
}

// set first interval
notifInterval = setInterval(makeNotification, time);

function makeNotification() {
    // do what you need to make a notification
} 
```

这里，`notifInterval`是对区间的引用，由 返回`setInterval`，用于清除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T16:15:30.483

您问题中的源代码未完成，但我猜您调用了 setInterval() ，然后在后台页面中修改了 window.time 。
您的 window.time 不是一个对象，而是一个数值，并且 setInterval() 在调用后无法“看到” window.time 的变化。

尝试这个：

```
function onTimeout() {
    // do your notification.

    setTimeout(onTimeout, time);
}

setTimeout(onTimeout, time); 
```

# android - Android：填充黄色与触摸图像成比例

> ID：10515779
> 
> 赞同：1
> 
> 时间：2012-05-09T12:09:40.750
> 
> 标签：android, gesture

![在此处输入图像描述](../Images/6a846b97d0911d81682d81d23d7a37ee.png)

我有一个表盘或图像，如图所示，每当我以顺时针方式移动手指时，子环所覆盖的部分就会变成黄色。我试图通过手势覆盖来应用这个场景，但不满足要求。

欢迎任何想法。请协助我并提前感谢。

# coffeescript - 课堂上的 Coffeescript setInterval

> ID：10515780
> 
> 赞同：3
> 
> 时间：2012-05-09T12:09:44.053
> 
> 标签：coffeescript, setinterval

我上周开始编写咖啡脚本，因为我正在编写一个以咖啡脚本为标准的新 Play20 网站。我想每 5 分钟更新一次班级中的 getData 函数，但 setInterval 函数没有绑定到我的班级。只有第一次调用 getData，因为“this”对象仍然可以访问，因为 setUpdateInterval() 函数是从构造函数中调用的。

但是在第一次调用之后，setInterval 与 Widget 实例不再有任何联系，并且不知道 this.getData() 函数是什么（以及如何到达它）。

有人知道该怎么做吗？

这是我的代码：

```
class Widget
  constructor: (@name) ->
    this.setUpdateInterval()

  getData: ->
    console.log "get Data by Ajax"

  setUpdateInterval: (widget) ->
    setInterval( this.getData(), 3000000 ) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T12:18:23.997

现在这里需要一些 Javascript 魔法。[参考](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Function/bind#With_setTimeout)

```
class Widget
  constructor: (@name) ->
    this.setUpdateInterval()

  getData: ->
    console.log "get Data by Ajax"

  setUpdateInterval: (widget) ->
    callback = @getData.bind(this)
    setInterval( callback, 3000000 ) 
```

这几乎适用于所有浏览器（猜猜哪个不是），因此必须以不同的方式绑定该函数。一些咖啡脚本的魔法：

```
callback = => @getData 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T12:12:29.990

问题是您正在执行该函数，而不是传递对它的引用。

现在，听起来您还需要保留实例的范围。 `do`并且`=>`可以提供帮助。

```
 setUpdateInterval: (widget) ->
    setInterval (do =>
      @getData), 3000000
    true 
```

编译为

```
Widget.prototype.setUpdateInterval = function(widget) {
      var _this = this;
      setInterval((function() {
        return _this.getData;
      })(), 3000000);
      return true;
    }; 
```

您会注意到代码执行了一个自调用函数，该函数返回一个函数，该函数在 周围创建一个闭包`this`，并将其锁定在回调的范围内（as `_this`）

另请注意，您不需要将小部件传递给该方法（您没有在任何地方使用它），并且您可以在构造函数中调用此函数来设置间隔。不管你做什么，你只想调用这个方法一次。您可以将函数的内容放入构造函数中。

最后，由于 coffeescript 从所有函数返回最后一条语句的值，我`true`在其中抛出一个，但这可能没有必要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-04T15:07:19.340

这在节点中也很方便。这是塔斯答案的变体。

```
class Widget
  constructor: (@options = {}) ->
    @options.interval ?= 1000
    @setInterval()

  timer: ->
    console.log 'do something'

  setInterval: ->
    cb = @timer.bind @
    setInterval cb, @options.interval

w = new Widget() 
```

# sql - 列出列中具有相同值的所有行 - SQL

> ID：10515781
> 
> 赞同：1
> 
> 时间：2012-05-09T12:09:44.357
> 
> 标签：sql, list, duplicates

嗨，我有一个如下表，有两列，1.CODE，2.Description

```
Code    Description 
DRU0001 ABCM 
DRU0002 ABCM 
DRU0003 ABCM 
DRU0004 ABCM 
DRU0005 ABVD 
DRU0006 ABVD 
DRU0007 ABVD 
DRU0008 ABVD 
DRU0009 AC 
DRU0010 AC 
DRU0011 ACE (1 day) 
DRU0012 ACE (1 day) 
DRU0013 ACE (1 day) 
DRU0014 ACE (3 day) IV 
DRU0015 ACE (3 day) IV 
DRU0016 ACE (3 day) IV 
DRU0017 ACE (3 day) IV 
```

我想要的是一个 SQL 代码，它将列出所有具有“ABCM”描述的行

```
select code, Description from Tables.Tables_OD8  WHERE Description ='ABCM' 
```

但上面的 sql 只显示一行，而不是所有 4 行的描述 'ABCM'

```
Code    Description 
DRU0001 ABCM 
DRU0002 ABCM 
DRU0003 ABCM 
DRU0004 ABCM 
```

任何帮助都非常感谢

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:14:28.223

您的 SQL 对于您尝试执行的任务是正确的，因此可能的罪魁祸首是您的数据：其他描述可能包含尾随空格。

要验证，请运行以下查询：

```
select code, '"'+Description+'"' from Tables.Tables_OD8 
```

`+`这假设一个用于连接的 RDBMS ；一些数据库使用`||`而不是`+`

```
select code, '"'||Description||'"' from Tables.Tables_OD8 
```

要解决此问题，请使用

```
select code, Description from Tables.Tables_OD8  WHERE Description LIKE 'ABCM%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:17:23.957

```
SELECT code FROM table WHERE description LIKE '%ABCM%' 
```

这是你问的吗？

# ios - 在视图中提交表单后如何关闭 UIWebView？

> ID：10515782
> 
> 赞同：0
> 
> 时间：2012-05-09T12:09:46.777
> 
> 标签：ios, uiwebview

我有一个 UIWebView，它显示一个包含反馈表单的网页。在该视图中提交表单后，我想删除此 UIWebView。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:32:39.777

您通常通过在 Web 视图上设置委托来注册有趣的回调来实现这类事情。

不要忘记在处理 web 视图之前将代理设为 nil，否则您可能会遇到崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T13:41:10.023

在 UIWebView 的委托中，在 webView:shouldStartLoadWithRequest:navigationType: 中搜索由表单提交触发的 url。如果存在，请设置一个标志值。

然后，在您的委托的 webViewDidFinishLoad: 方法中，如果设置了标志，则删除 webView。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T13:42:20.167

好吧，您还没有明确分配您的 webview 或不熟悉您的代码。我想您想从 UIWebView 返回到以前的视图，在这种情况下，您可以简单地通过 UINavigationController 推送包含 webview 的视图控制器并获取返回到后退按钮的视图或在 webviewDidStartLoad 和 webViewDidFinishLoad 中设置一个标志，并在 DidFinish 部分中设置标志时删除视图，否则请详细说明您的问题。

# android - 什么是 Android 中的 ANR 对话框？

> ID：10515791
> 
> 赞同：0
> 
> 时间：2012-05-09T12:10:36.917
> 
> 标签：android

我想知道 android 应用程序中的 ANR 对话框以及它何时发生以及如何删除它。请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T12:13:37.670

> ANR - 应用程序没有响应。

当应用程序的主线程被阻塞太久时会出现此对话框，例如，当您在此线程上休眠或执行长连接时。

通过将繁重的操作转移到其他线程来避免它。关于实现该方法的方法有一篇很棒的文章[——Painless Threading](http://android-developers.blogspot.co.il/2009/05/painless-threading.html)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T12:12:16.463

It will happen when you spend too much time on the main application thread. To avoid ANR errors, ensure any long-running work occurs on a background thread.

# python - What is the Go equivalent of Python's "is" operator?

> ID：10515796
> 
> 赞同：3
> 
> 时间：2012-05-09T12:11:01.953
> 
> 标签：python, reference, go, instance

How do I determine whether 2 variables refer to the same instance in Go? More specifically, that a mutation to the value of one variable would effect the value of the other variable also.

To further refine the question: How would I determine when 2 variables would satisfy the "is" operator per CPython:

```
a is b 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T12:25:39.253

编辑：我不确定你想要什么。如果是关于变量的相等性或变量值的同一性。这个答案是针对第二个的（“2 个变量指的是同一个值的实例”）。如果我误解了，我会删除这个答案。

`==`是你想要的，我想。

如果 a 和 b 的类型是指针，则`a==b`意味着 a 和 b 是指向相同值的指针。

以下程序打印`false`：

```
package main

import "fmt"

type test struct {
    a int
}

func main() {

    b := &test{2}
    c := &test{2}
    fmt.Println(c == b)

} 
```

虽然这打印`true`：

```
 b := &test{2}
    c := b
    fmt.Println(c == b) 
```

c==b 是改变 ca 改变 ba 的充分条件

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-09T18:29:44.363

在 Python 中，*所有*值都是对象的引用（即指针）。您永远无法将对象本身作为值。运算符比较`is`两个值，它们是指针，用于指针相等；而`==`运算符比较两个这样的指针，以确定所指向对象的相等性。

在 Go 中，它有点复杂。Go 有指针，以及其他非指针类型（布尔、数字类型、字符串、数组、切片、结构、函数、接口、映射、通道）。要求非指针类型的指针相等是没有意义的。（这意味着什么？它会完成什么？）

所以为了和 Python 一样，让我们​​把所有的值都放在指针后面，所以所有的变量都是指针。（在许多 Go 库中都有一个创建指针类型的“New”函数的约定；并且这些方法也对指针类型进行操作；因此这与该约定兼容。）Go 中的（如果`a`和`b`是指针）将`a == b`比较两个这样的指针是否相等；`*a == *b`如果它们具有可比性，您可以使用它们来比较基础值。

Go 还有几种非指针引用类型：切片、映射、函数和通道。频道是可比较`==`的，它们是否是同一个频道。但是，切片、映射和函数不能进行比较；不过可以使用反射。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T12:31:09.830

在非接口和非函数类型的情况下，可以比较指针是否相等。非指针类型不能共享实例，OTOH。

# android - 如何从 url 中检索图像

> ID：10515800
> 
> 赞同：0
> 
> 时间：2012-05-09T12:11:13.273
> 
> 标签：android, listview, imageview

我正在研究 API。我们提供了图片的网址。我必须在使用自定义适配器的列表活动中显示来自该 URL 的图像。如何设置图像抛出 url？我在里面呆了将近两天。我在我的活动中使用了图像视图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:24:46.027

在您的活动中尝试以下代码，您将获得 Bitmap 对象，使用 setImageBitmap(Bitmap bmt) 您可以做到。

方法：

```
public Bitmap getBitmap(String url) {
            Log.d("getBitmap", "getBitmap");
            Bitmap bm = null;
            try {
                URL aURL = new URL(url);
                URLConnection conn = aURL.openConnection();
                conn.connect();
                InputStream is = conn.getInputStream();
                BufferedInputStream bis = new BufferedInputStream(is);
                bm = BitmapFactory.decodeStream(new FlushedInputStream(is));
                bis.close();
                is.close();
            } catch (Exception e) {
                e.printStackTrace();
            } finally {

            }
            return bm;
        } 
```

内部类：

```
class FlushedInputStream extends FilterInputStream {
        public FlushedInputStream(InputStream inputStream) {
            super(inputStream);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:54:57.737

[看到这个](http://android-example-code.blogspot.in/p/download-store-and-read-images-from.html)完整的例子

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-16T06:41:27.567

使用此代码从文件中获取位图图像，

```
Bitmap bitmapImage = BitmapFactory.decodeFile(//File path);
    imageView.setImageBitmap(bitmapImage); 
```

您可以通过以下方法从 uri 获取文件，

```
private File getFileFromUri(Uri uri) throws IOException {
    Cursor cursor = managedQuery(uri, null, null, null, null);
    if (cursor.getCount() == 0) {
        throw new IOException(String.format("cannot find data from %s",
                uri.toString()));
    } else {
        cursor.moveToFirst();
    }

    String filePath = cursor.getString(cursor
            .getColumnIndex(Video.VideoColumns.DATA));

    File file = new File(filePath);
    cursor.close();
    return file;
} 
```

希望这对你有帮助

# php - 我应该如何对这个数组进行排序？

> ID：10515802
> 
> 赞同：1
> 
> 时间：2012-05-09T12:11:17.437
> 
> 标签：php, arrays, sorting

我目前正在尝试在我的系统中实现消息传递功能。我现在的目标是有一个 jQuery 弹出对话框，它显示已向其他人发送消息的用户的名称，然后单击该人的名称将显示新消息。我已经完成了弹出对话框位，所以我的下一步是从数据库中获取和排序消息。

我现在所做的是从数据库中检索新消息。我不确定如何继续，因为我的未读消息数组多次包含发件人 id 的元素。我不想遍历我的未读消息，然后一次又一次地获取相同的发件人 ID，因此一次又一次地从数据库中检索他们的详细信息。

这是我的数组的一个示例：

```
array(8) {
  [6]=>
  array(7) {
    ["id"]=>
    string(2) "52"
    ["useridfrom"]=>
    string(3) "330"
    ["useridto"]=>
    string(3) "139"
    ["message"]=>
    string(10) "test"
    ["format"]=>
    string(1) "0"
    ["timecreated"]=>
    string(10) "1336561645"
    ["messagetype"]=>
    string(6) "direct"
  }
  [7]=>
  array(7) {
    ["id"]=>
    string(2) "53"
    ["useridfrom"]=>
    string(3) "330"
    ["useridto"]=>
    string(3) "139"
    ["message"]=>
    string(8) "bye"
    ["format"]=>
    string(1) "0"
    ["timecreated"]=>
    string(10) "1336561648"
    ["messagetype"]=>
    string(6) "direct"
  }
  [1]=>
  array(7) {
    ["id"]=>
    string(2) "30"
    ["useridfrom"]=>
    string(3) "329"
    ["useridto"]=>
    string(3) "139"
    ["message"]=>
    string(243) "Hi Bob"
    ["format"]=>
    string(1) "0"
    ["timecreated"]=>
    string(10) "1330942044"
    ["messagetype"]=>
    string(6) "direct"
  }
  [3]=>
  array(7) {
    ["id"]=>
    string(2) "42"
    ["useridfrom"]=>
    string(3) "243"
    ["useridto"]=>
    string(3) "139"
    ["message"]=>
    string(4) "test"
    ["format"]=>
    string(1) "0"
    ["timecreated"]=>
    string(10) "1335517653"
    ["messagetype"]=>
    string(6) "direct"
  }
  [4]=>
  array(7) {
    ["id"]=>
    string(2) "46"
    ["useridfrom"]=>
    string(3) "241"
    ["useridto"]=>
    string(3) "139"
    ["message"]=>
    string(8) "sdsdfsdf"
    ["format"]=>
    string(1) "0"
    ["timecreated"]=>
    string(10) "1336139572"
    ["messagetype"]=>
    string(6) "direct"
  }
  [5]=>
  array(7) {
    ["id"]=>
    string(2) "47"
    ["useridfrom"]=>
    string(3) "241"
    ["useridto"]=>
    string(3) "139"
    ["message"]=>
    string(13) "8528528285285"
    ["format"]=>
    string(1) "0"
    ["timecreated"]=>
    string(10) "1336143958"
    ["messagetype"]=>
    string(6) "direct"
  }
array(8) {
  [6]=>
  array(7) {
    ["id"]=>
    string(2) "52"
    ["useridfrom"]=>
    string(3) "330"
    ["useridto"]=>
    string(3) "139"
    ["message"]=>
    string(10) "test"
    ["format"]=>
    string(1) "0"
    ["timecreated"]=>
    string(10) "1336561645"
    ["messagetype"]=>
    string(6) "direct"
  }
  [7]=>
  array(7) {
    ["id"]=>
    string(2) "53"
    ["useridfrom"]=>
    string(3) "330"
    ["useridto"]=>
    string(3) "139"
    ["message"]=>
    string(8) "bye"
    ["format"]=>
    string(1) "0"
    ["timecreated"]=>
    string(10) "1336561648"
    ["messagetype"]=>
    string(6) "direct"
  }
  [1]=>
  array(7) {
    ["id"]=>
    string(2) "30"
    ["useridfrom"]=>
    string(3) "329"
    ["useridto"]=>
    string(3) "139"
    ["message"]=>
    string(243) "Hi Bob"
    ["format"]=>
    string(1) "0"
    ["timecreated"]=>
    string(10) "1330942044"
    ["messagetype"]=>
    string(6) "direct"
  }
  [3]=>
  array(7) {
    ["id"]=>
    string(2) "42"
    ["useridfrom"]=>
    string(3) "243"
    ["useridto"]=>
    string(3) "139"
    ["message"]=>
    string(4) "test"
    ["format"]=>
    string(1) "0"
    ["timecreated"]=>
    string(10) "1335517653"
    ["messagetype"]=>
    string(6) "direct"
  }
  [4]=>
  array(7) {
    ["id"]=>
    string(2) "46"
    ["useridfrom"]=>
    string(3) "241"
    ["useridto"]=>
    string(3) "139"
    ["message"]=>
    string(8) "sdsdfsdf"
    ["format"]=>
    string(1) "0"
    ["timecreated"]=>
    string(10) "1336139572"
    ["messagetype"]=>
    string(6) "direct"
  }
  [5]=>
  array(7) {
    ["id"]=>
    string(2) "47"
    ["useridfrom"]=>
    string(3) "241"
    ["useridto"]=>
    string(3) "139"
    ["message"]=>
    string(13) "8528528285285"
    ["format"]=>
    string(1) "0"
    ["timecreated"]=>
    string(10) "1336143958"
    ["messagetype"]=>
    string(6) "direct"
  }
  [2]=>
  array(7) {
    ["id"]=>
    string(2) "10"
    ["useridfrom"]=>
    string(3) "138"
    ["useridto"]=>
    string(3) "139"
    ["message"]=>
    string(54) "Hi Emma thank you for submitting your homework - Jenny"
    ["format"]=>
    string(1) "0"
    ["timecreated"]=>
    string(10) "1309122193"
    ["messagetype"]=>
    string(6) "direct"
  }
} 
```

到目前为止，这是我在 PHP 中所做的：

```
$m = new Messaging();
$json = $m->getUnreadMessages($uid);

/** sort messages by useridfrom **/
uasort($json, array($m, 'messageCompare'));

foreach($json as $j)
{
 //do sorting of messages here ??
}

echo json_encode($json);
exit; 
```

我想理想情况下，我想从中创建一个新数组，其中键是 useridfrom （发件人），然后是他们的消息，然后与时间创建的每条消息相关联。做这个的最好方式是什么？

提前致谢。

**编辑**

正如您从数组示例中看到的那样，存在重复的 useridfrom 元素，其中 useridfrom = 241 两次。这意味着用户 241 已经发送了两条消息，如果 241 个元素中有 3 个 userid，那么这意味着他/她发送了 3 条消息。我的目标是将两个用户标识组合在一起作为数组中的键，因此没有重复项，然后与该键相关联，我们拥有所有消息（消息）和创建消息的时间（创建时间）。

```
 [4]=>
  array(7) {
    ["id"]=>
    string(2) "46"
    ["useridfrom"]=>
    string(3) "241"
    ["useridto"]=>
    string(3) "139"
    ["message"]=>
    string(8) "sdsdfsdf"
    ["format"]=>
    string(1) "0"
    ["timecreated"]=>
    string(10) "1336139572"
    ["messagetype"]=>
    string(6) "direct"
  }
  [5]=>
  array(7) {
    ["id"]=>
    string(2) "47"
    ["useridfrom"]=>
    string(3) "241"
    ["useridto"]=>
    string(3) "139"
    ["message"]=>
    string(13) "8528528285285"
    ["format"]=>
    string(1) "0"
    ["timecreated"]=>
    string(10) "1336143958"
    ["messagetype"]=>
    string(6) "direct"
  }

 [1]=>
  array(7) {
    ["id"]=>
    string(2) "30"
    ["useridfrom"]=>
    string(3) "329"
    ["useridto"]=>
    string(3) "139"
    ["message"]=>
    string(243) "Hi Bob"
    ["format"]=>
    string(1) "0"
    ["timecreated"]=>
    string(10) "1330942044"
    ["messagetype"]=>
    string(6) "direct"
  } 
```

因此，从这个例子中，它应该导致一系列类似 mariomario 所建议的内容：

```
array{
  ['241'] => array(
   [0] => array(time=>'time1', message => "hello i am 241"),
   [1] => array(time=>'time2', message => "nice to meet you"),
),
['330'] => array(
       [0] => array(time=>'time1', message => "hello i am 330"),
       [1] => array(time=>'time2', message => "goodbye"),
    )
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:28:05.277

你不会做这样的事吗

```
$newArray = array()

foreach($json as $j)
{
 $array[$j['useridfrom']][] = array('time'=>$j['timecreated'],
'message'=>$j[message]);
} 
```

他们你将有一个这样的数组：

```
array{
  ['user1'] => array(
   [0] => array(time=>'time1', message => message1),
   [1] => array(time=>'time2', message => message2),
),
['user2'] => array(
       [0] => array(time=>'time1', message => message1),
       [1] => array(time=>'time2', message => message2),
    )
} 
```

但也许我理解你不正确。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T13:12:28.043

编辑：

经过一番思考，我会这样做：

```
$data = array();

foreach ($json as $j) {
    if (!array_key_exists($j['useridfrom'], $data)) {
        $data[$j['useridfrom']] = array();
    }
    if (!array_key_exists($j['useridto'], $data[$j['useridfrom']])) {
        $data[$j['useridfrom']][$j['useridto']] = array();
    }
    $data[$j['useridfrom']][$j['useridto']][] = array(
        'message' => $j['message'],
        'timestamp' => $j['timecreated']  
    );
} 
```

保持您的数据如此有序，`ORDER BY timecreated DESC`并且在时间之后将您想要订购的所有内容连接起来。

这应该像这样净一个数组：

```
'sender1' => (
    'recipient1' = (
        (
            'message' => 'MESSAGE HERE',
            'timecreated' => 'TIME HERE'
        ),
        (
            'message' => 'ANOTHER MESSAGE HERE',
            'timecreated' => 'ANOTHER TIME HERE'
        )
    ),
    'recipient2' = (
        (
            'message' => 'MESSAGE HERE',
            'timecreated' => 'TIME HERE'
        )
    )
),
'sender2' => (
) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T12:24:21.720

在 PHP 中使用 array_multisort：

[http://php.net/manual/en/function.array-multisort.php](http://php.net/manual/en/function.array-multisort.php)

# haskell - Type "motherfunction" of some sort

> ID：10515805
> 
> 赞同：2
> 
> 时间：2012-05-09T12:11:26.313
> 
> 标签：haskell

The Haskell adventure continues.

At the moment, i am trying to construct my own Fraction type in Haskell that suits my needs. It's basically just a type Fraction{ n:: Int , d:: Int} and a lot of functions , most of them are of type x->Fraction

So what i wanna do now is making sure that fractions can only be positive, or negative in the numerator, positive in denominator, by converting any other possibilities to one of those.

```
 --e.g
      (Fraction (3 (-5))->Fraction (-3) 5
   --and
      (Fraction (-3) (-5))->Fraction 3 5 
```

every time some function x->Fraction would return one of those. I assume there must be a smarter way to do this than modifying every x->Fraction function one by one. My guess would be already at the Fraction Type definition.

I haven't been programming for that long so i might not be completely up to beat on the technical terms.

Thanks for reading, and thanks if you answer

**EDIT**

I decided to go with the Eq Instance solution, and just added that if Signum numerator*Signum denominator doesn't match , return false, to the guard. I had to make that anyways to divide num. and den. with HCD before comparing

The smart-constructor that i originally asked for, is also gonna be used in my Matrix nXn (Q) Module that I'm making on the same time :)

Great answers. Thanks.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T12:31:00.097

您可以使用[智能构造函数](http://www.haskell.org/haskellwiki/Smart_constructors)来确保对您的类型的这些约束，并通过不导出数据构造函数来隐藏它们。智能构造函数本质上是一个保证类型系统无法强制执行的约束的函数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-05-09T12:26:20.590

我实际上会让这些值保持原样并继续计算，但如果你真的想要：将定义`Fraction`放在一个单独的模块中，不要导出它的构造函数。相反，导出一个类似的函数`makeFraction :: Int -> Int -> Fraction`，它负责你的“转换”。

现在，模块之外的每个人都只能按照您想要的方式构建分数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-09T12:31:08.333

我想一个想法是保持内部表示不变。也就是说，在您对数字进行运算之前，您不会关心分子和分母的实际符号。

例如，如果您想比较两个分数数，这将通过派生 Eq 类的实例来完成（这当然需要对[类型类](http://en.wikibooks.org/wiki/Haskell/Classes_and_types)有一点了解），您可以简单地检查一下

```
signum d1 * signum n1 == signum d2 * signum n2 
```

除了检查值。

请注意，在处理分数时还需要检查其他方面。例如：

```
Fraction 6 2 == Fraction 3 1 
```

另一种方法是添加一个单独的符号字段并使用[自然](http://www.haskell.org/tutorial/moretypes.html)数之类的东西作为分子和分母。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-05-09T14:20:25.003

如果您真的在使用`Int`而不是`Integer`，那么类型系统（和实现）可以解决这个特定问题而无需任何技巧或隐藏。该类型`Word`表示正机器整数：

```
Prelude Data.Word> [minBound,maxBound] :: [Word]
[0,18446744073709551615]
Prelude Data.Word> [minBound,maxBound] :: [Int]
[-9223372036854775808,9223372036854775807] 
```

所以你可以写：

```
import Data.Word

data Fraction = Int :/ Word deriving Show

fi = fromIntegral

instance Eq Fraction where
  (i :/ w) == (j :/ v) = i * fi v == j * fi w

instance Num Fraction where
  fromInteger n = fromInteger n :/ 1
  (i :/ w) * (j :/ v) = (i * j) :/ (w * v)
  (i :/ w) + (j :/ v) = i * fi v + j * fi w :/ w * v 
  (i :/ w) - (j :/ v) =  (i :/ w) + (negate j :/ v)
  negate (i :/ w) = (negate i:/ w)
  abs (i :/ w) = (abs i :/ w)  
  signum (i :/ w) = (signum i :/ 1) 
```

通过严格和拆包，您将获得更多类似机器编号的行为：

```
 data Fraction = {-#UNPACK#-} !Int :/ {-#UNPACK#-} !Word deriving Show 
```

# django - Django: MySQL no such table: aidata.django_session

> ID：10515808
> 
> 赞同：7
> 
> 时间：2012-05-09T12:11:32.700
> 
> 标签：django, django-models

I'm running Django 1.4 on Windows 7 in Pycharm and I installed WAMP because I need to have my data in a MySQL table.

This is from setting.py

```
DATABASES = {
  'default': {
    'ENGINE': 'django.db.backends.mysql',
    'NAME': 'aidata',
    'USER': 'root'
   }
} 
```

From installed_apps I uncommented:

```
'django.contrib.sessions' 
```

Running *`manage.py syncdb`* does not create any tables ( even models) in my mysqldb.

I get the error when trying to acces `/admin/`

```
 DatabaseError at /admin/
(1146, "Table 'aidata.django_session' doesn't exist") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T13:36:05.147

1.  仔细检查数据库凭据
2.  确保在中间件中取消注释此行：

    MIDDLEWARE_CLASSES = ( .... 'django.contrib.sessions.middleware.SessionMiddleware', )

3.  然后尝试`python manage.py syncdb`。

4.  如果您仍然有问题发布任何输出

## 编辑——下一个检查：

1.  你有一个“django_content_type”表吗？
2.  如果是这样，该表是否有“会话”记录？
3.  如果是这样，请删除会话记录并尝试`python manage.py syncdb`

## 编辑——第 3 步：

现在我猜，发布您的设置文件，以便我可以进行有意义的故障排除尝试

1.  如果您有一个正在运行的服务器，请停止您的服务器
2.  进入您的文件浏览器并删除 settings.pyc 文件
3.  尝试`python manage.py syncdb`

我的想法是带有 sqlLite 信息的 pyc 文件可能会被缓存并且不会重新生成

## 编辑——第 4 步：

您的 settings.py 中的所有内容对我来说都不错。帮我试试？创建一个新的 django 项目，不要启用管理员或添加您的应用程序我只想知道您的 django 安装中的所有内容是否从头开始工作

1.  django-admin.py 启动项目测试站点
2.  进行数据库配置/设置
3.  python manage.py syncdb

让我知道模型是否正确创建

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-25T02:09:12.783

我遇到了同样的问题，对我来说（2013 年 9 月中旬运行 django 1.7 开发主干）它有助于

1.  删除所有南迁移（`[app]/migration`）-目录
2.  `INSTALLED_APPS`从settings.py 中删除南

这可能是由于 django v1.7 中向集成迁移系统的转变，但我在这里推测。

# gwt - How to create CellTree with MVP pattern

> ID：10515811
> 
> 赞同：1
> 
> 时间：2012-05-09T12:11:36.343
> 
> 标签：gwt

As suggested in gwt documentation, I try to follow the MVP design pattern while creating my application. When using simple tree, the [example](https://developers.google.com/web-toolkit/articles/mvp-architecture) in the documentation is straight forwards and makes good example of MVP and gwt. In the example the view is created and the data is given to the view to display. As far as I understand this is exactly the way to keep view, model and presenter separated.

With CellTree, the data populating happens inside the TreeViewModel's data provider. Data provider cannot be taken outside the cell tree and therefore I need to do all data populating inside the cell tree, which is in the view. Now, the view needs to know about the model and the MVP patter is broken. I wan't to dynamically populate data to the cell tree prior to showing it to user, I need to edit the data in cell tree and save it later for different format.

My question goes how to implement CellTree, or in general Cell widgets, in MVP design patter?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T17:01:10.367

我已经将 CellTable 与 MVP 一起使用。

用户界面：

```
<g:HTMLPanel>
    <g:ScrollPanel>
        <p1:CellTable ui:field="cellTable" width="100%" styleName="style.cellTable" height="100%" />
    </g:ScrollPanel>
</g:HTMLPanel> 
```

查看界面：

```
public interface SomeCellListView extends IsWidget {
    void setPresenter(Presenter listener);

      // Method to set the CellTable data
    void setCellList(ArrayList<ObjectDTO> list);

    public interface Presenter {
        void goTo(Place place);
        void doSomething(int id);
    }
} 
```

查看实施：

```
 public class SomeCellListViewImpl extends Composite implements SomeCellListView {

... all Ui Binder stuff here

@UiField(provided = true)
CellTable<ObjectDTO>cellTable = new CellTable<ObjectDTO>();

SomeCellListViewImpl(){
    TextColumn<ObjectDTO> someColumn= new TextColumn<ObjectDTO>(){
        @Override
        public String getValue(ObjectDTO o) {
            return o.getSomeFieldValue();
        }
    };
    cellTable.addColumn(someColumn, "column1");

    ... add other columns here
}

// This method is called from Presenter to set CellTable data
public void setCellList(ArrayList<ObjectDTO> list) {
    cellTable.setRowCount(list.size(), true);
    cellTable.setRowData(0, list);
} 
```

}

活动（或演示者）：

// 在构造函数中设置视图和服务（从 ClientFactory 获取视图）

公共无效开始（AcceptsOneWidget containerWidget，EventBus eventBus）{

```
// Make RPC call
this.service
.getCellList(new AsyncCallback<ArrayList<ObjectDTO>>(){

    @Override
    public void onFailure(Throwable caught) {
        view.setError("Error fetching details");
    }

    @Override
    public void onSuccess(ArArrayList<ObjectDTO> result) {
        view.setCelllist(result);
    }

});
view.setPresenter(this);
containerWidget.setWidget(view.asWidget()); 
```

}

在这里，视图已经由 ClientFactory 创建。View 仅包含 CellTable 的布局。创建视图时不加载数据。当启动一个 Activity（又名 Presenter）时，会调用“start”方法。这里我们通过 RPC 来获取 Cell 数据，并在视图中调用一个方法来设置数据。

我没有用过细胞树。但是您一般都询问了 Cell 小部件。因此想到分享这个。希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-12T02:27:15.020

我对 OP 有同样的问题。我阅读了 MVP 教程第二部分，然后尝试在我的应用程序中使用 CellTable，同时仍然保留 MVP 架构师。但我对此感到困惑：本教程使用 Presenter 之类的语法，但为什么只使用 Presenter ？

# actionscript-3 - Actionscript 3 - Toggling visible status of a Movie Clip

> ID：10515812
> 
> 赞同：0
> 
> 时间：2012-05-09T12:11:41.147
> 
> 标签：actionscript-3, flash, actionscript, flash-cs5

I have a MovieClip of instance name BeachMovie.

On the same frame I have another MovieClip, inside this MovieClip is actionscript that will play sounds and toggle pictures on and off. It is also used so that when pressed the .visible status of BeachMovie is toggled on and off.

How can I communicate with BeachMovie MovieClip when the actionscript to do it is used (and is needed) within another Movieclip?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:34:45.193

理想情况下，您的实例名称应以小写字母开头。

尝试

```
this.parent.beachMovie.visible = false;

or MovieClip(root).beachMovie.visible = false; 
```

# java - Java - Printing a class

> ID：10515820
> 
> 赞同：1
> 
> 时间：2012-05-09T12:12:10.963
> 
> 标签：java, arrays, methods, tostring

If I have an array of objects which have a toString method and I print the array using a for loop (e.g.: simply `array[i]` to reach the objects and carry out `System.out.println(array[i])`) will the toString method be invoked automatically? It seems to be but I just want to check this is what is going on.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T12:13:31.827

**是的，它会的。**

事实上，与隐式调用相比，这样做的好处`.toString()`是可以在不引发异常的情况下处理空值。如果`array[i]`是`null`，`then System.out.println(array[i])`将打印`null`where `System.out.println(array[i].toString())`will throw a `NullPointerException`。

这是因为`System.out.println(object)`方法调用`System.out.print(object)`哪个调用`String.valueOf(object)`哪个又调用`object.toString()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:15:41.967

是的，它肯定会。

下面是一些关于工作方式`println(Object)`和`print(Object)`方法的 API 描述。

[println(对象)](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/PrintStream.html#println%28java.lang.Object%29)

[打印（对象）](http://docs.oracle.com/javase/1.5.0/docs/api/java/io/PrintStream.html#print%28java.lang.Object%29)

# opengl - Load bmp file as texture using auxDIBImageLoad in OpenGL

> ID：10515823
> 
> 赞同：0
> 
> 时间：2012-05-09T12:12:20.923
> 
> 标签：opengl, graphics, 3d

I am learning OpenGL NeHe Production.When I read lesson22 Bump-Mapping、Multi-texture,I got a problem.

When I load logo bmp file,I need to load two bmp files:one stores color information ,and another stores alpha information. here is the two bmp files: OpenGL_Alpha.bmp: ![enter image description here](../Images/6f8cd57e7b09185a0aee847e11a54d19.png)

and OpenGL.bmp : ![enter image description here](../Images/223d7902709bad312d9814d6e90301e8.png)

Here is the code:

```
if (Image=auxDIBImageLoad("Data/OpenGL_ALPHA.bmp")) {
            alpha=new char[4*Image->sizeX*Image->sizeY];
            for (int a=0; a<Image->sizeX*Image->sizeY; a++)
                    alpha[4*a+3]=Image->data[a*3]; //???????
            if (!(Image=auxDIBImageLoad("Data/OpenGL.bmp"))) status=false;
            for (a=0; a<Image->sizeX*Image->sizeY; a++) {
                    alpha[4*a]=Image->data[a*3];//??????????                         
                    alpha[4*a+1]=Image->data[a*3+1];             
                    alpha[4*a+2]=Image->data[a*3+2];                     
            }

            glGenTextures(1, &glLogo);  

            glBindTexture(GL_TEXTURE_2D, glLogo);
            glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MAG_FILTER,GL_LINEAR);
            glTexParameteri(GL_TEXTURE_2D,GL_TEXTURE_MIN_FILTER,GL_LINEAR);
            glTexImage2D(GL_TEXTURE_2D, 0, GL_RGBA8, Image->sizeX, Image->sizeY, 0, GL_RGBA, GL_UNSIGNED_BYTE, alpha);
            delete alpha; 
```

}

My question is :why the index of Image->data is a*3???

Could someone interpret for me ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T12:20:58.407

> 我正在学习 OpenGL NeHe Production。当我阅读第 22 课时凹凸贴图

为什么？NeHe 教程已经非常过时了，其中概述的凹凸贴图技术也完全过时了。它已被基于着色器的法线贴图取代超过 13 年（直到 2003 年使用纹理组合器代替着色器）。

此外，您应该使用更适合纹理的图像文件格式（带 alpha 通道），而不是 BMP。喜欢：

*   TGA
*   PNG
*   开放式EXR

此外，各种压缩的 DX 纹理格式也是多种应用程序的不错选择。

> 我的问题是：为什么 Image->data 的索引是 a*3 ？？？

提取 RGB DIB 的红色通道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:24:08.450

这是通道偏移量。RGB 数据存储为三个连续字节。这里'a'代表哪个像素（3字节组，一个用于R，一个用于G，一个用于B）。

将 a*3 视为指向 3 个字节数组的指针：

```
char* myPixel = Image->data + (a*3);

char red   = myPixel[0];
char green = myPixel[1];
char blue  = myPixel[2]; 
```

# javascript - Switch between two textareas only when pressing Tab button

> ID：10515830
> 
> 赞同：3
> 
> 时间：2012-05-09T12:12:39.433
> 
> 标签：javascript, jquery

Normally when a user is visiting a web page and pressing TAB button on a keyboard, the selection moves from one element to another starting from the begining of the page.

I am looking for a solution to switch between two particular text areas by pressing TAB button on a keyboard with an initial focus on the first one when web page is loaded? All other elements on the page have to be ignored for this TAB key press event.

How can I achive this?

Thanx for your help!

= Update =

I have managed to make it work under Firefox 12.0 . IE and Chrome do not work properly. Asuming the text area IDs are #ICCID and #MSISDN, the Jquery looks like this:

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    <script type="text/javascript">
        $(function() {
            $(document).ready(function() {
            $("#ICCID").focus();
            });

            var $inp = $('.cls');

            $inp.bind('keydown', function(e) {
                var key = e.which;
                if (key == 9) {

                    e.preventDefault();
                    var nxtIdx = $inp.index(this) + 1;                  
                    $(".cls:eq(" + nxtIdx + ")").focus();

                //Simulate Enter after TAB
                var textInput = $("#MSISDN").val();
                var lines = textInput .split(/\r|\r\n|\n/);
                if (lines > 1) {

                    $("#MSISDN").on("keypress", function(e) {
                    if (e.keyCode == 9) {
                    var input = $(this);
                    var inputVal = input.val();
                    setTimeout(function() {
                    input.val(inputVal.substring(0,inputVal.length) + "\n");
                          }, 1);
                       }
                    });
                }

                }
                if (key == 9) {

                    e.preventDefault();
                    var nxtIdx = $inp.index(this) - 1;
                    $(".cls:eq(" + nxtIdx + ")").focus();

                //Simulate Enter after TAB
                $("#ICCID").on("keypress", function(e) {
                if (e.keyCode == 9) {
                var input = $(this);
                var inputVal = input.val();
                setTimeout(function() {
                input.val(inputVal.substring(0,inputVal.length) + "\n");
                      }, 1);
                   }
                });

                }
            });
        });
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:17:45.307

使用 jQuery 捕捉 keydown 动作，确定哪个 textarea 有焦点，然后使用 focus() 方法将焦点设置到另一个 textarea。

假设您的文本区域有 id="textarea1" 和 id="textarea2"。首先，您可以通过以下方式在页面加载时将焦点设置到第一个文本区域： `$('#textarea1').focus();`

```
$("body").keypress(function(e) {
    var code = (e.keyCode ? e.keyCode : e.which);
    switch(code)
    {
        case 9:
            if($("#textarea1").focus()){
                //First one has focus, change to second one
                $("#textarea2").focus();
            }
            else if($("#textarea2").focus()) {
                //Second one has focus, change to first one
                $("#textarea1").focus();
            }

    }
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-18T11:51:53.337

好的，我已经为我的任务找到了解决方案！它还包括在 TAB 键事件之后模拟 ENTER 键，因此用户无需按 ENTER 即可转到新行。通过 IE9、FF12、Chrome 18.0.x 测试

这里是：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<!-- Switching between ICCIDs and MSISDNs textareas + simulating ENTER key pressing after the TAB key event - START -->
    <script type="text/javascript">
            $(function() {
                $(document).ready(function() {
                $("#ICCID").focus();
                });

                var $inp = $('.cls');

                $inp.bind('keydown', function(e) {
                    var key = e.which;
                    if (key == 9) {

                        e.preventDefault();
                        var nxtIdx = $inp.index(this) + 1;                  
                        $(".cls:eq(" + nxtIdx + ")").focus();

                    //Simulate Enter after TAB
                    var textInput = $("#MSISDN").val();
                    var lines = textInput .split(/\r|\r\n|\n/);
                    if (lines > 1) {

                        $("#MSISDN").on("keyup", function(e) {
                        if (e.keyCode == 9 || e.which  == 9) {
                        var input = $(this);
                        var inputVal = input.val();
                        setTimeout(function() {
                        input.val(inputVal.substring(0,inputVal.length) + "\r\n");
                              }, 1);
                           }
                        });
                    }

                    }
                    if (key == 9) {

                        e.preventDefault();
                        var nxtIdx = $inp.index(this) - 1;
                        $(".cls:eq(" + nxtIdx + ")").focus();

                    //Simulate Enter after TAB
                    $("#ICCID").on("keyup", function(e) {
                    if (e.keyCode == 9 || e.which  == 9) {
                    var input = $(this);
                    var inputVal = input.val();
                    setTimeout(function() {
                    input.val(inputVal.substring(0,inputVal.length) + "\r\n");
                          }, 1);
                       }
                    });

                    }
                });
            });
    </script>
    <!-- Switching between ICCIDs and MSISDNs textareas + simulating ENTER key pressing after the TAB key event -  END --> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T12:29:30.750

这个怎么样....我觉得我工作很无聊..

[http://jsbin.com/uqalej/3/](http://jsbin.com/uqalej/3/)

HTML：

```
<input/>
<textarea id="t1"></textarea>
<textarea id="t2"></textarea>
<input/>

<button onClick='window.toggleBetween=true;'>Init</button>
<button onClick='window.toggleBetween=false;'>Destroy</button> 
```

JS：

```
var d = document,
    t1 = d.getElementById("t1"),
    t2 = d.getElementById("t2"),

    nodeType, nodeTypes = [],
    i, iLen,
    y, yLen;

nodeTypes.push( d.getElementsByTagName("textarea") );
nodeTypes.push( d.getElementsByTagName("input") );
nodeTypes.push( d.getElementsByTagName("select") );

i = 0;
iLen = nodeTypes.length;
for ( ; i < iLen; i++ ) {
  nodeType = nodeTypes[i];
  y = 0;
  yLen = nodeType.length;
  for ( ; y < yLen; y++ ) {
    if ( nodeType[y] != t1 && nodeType[y] != t2 ) {
      nodeType[y].onfocus = function() {
        if ( window.toggleBetween )
          t1.focus();
      };
    }
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T12:18:18.230

在页面加载时使用 javascript：

```
document.getElementById("textarea1").focus();
document.getElementById('textarea1').tabIndex="1";
document.getElementById('textarea2').tabIndex="2"; 
```

# c++ - 使用 boost-spirit 解析的大型结构

> ID：10515834
> 
> 赞同：2
> 
> 时间：2012-05-09T12:12:55.383
> 
> 标签：c++, boost-spirit

我可以编译在[此页面](http://www.boost.org/doc/libs/1_41_0/libs/spirit/example/qi/employee.cpp)上找到的员工示例代码。

如果我用另外 8 个字符串扩展结构，如下所示：

```
struct employee
{
    int age;
    std::string surname;
    std::string forename;
    std::string a1;
    std::string a2;
    std::string a3;
    std::string a4;
    std::string a5;
    std::string a6;
    std::string a7;
    std::string a8;
    double salary;
}; 
```

（当然我也扩展了 BOOST_FUSION_ADAPT_STRUCT 和语法），然后当我尝试编译时出现以下错误：

```
../include/boost/fusion/container/vector/convert.hpp:26:13: error: invalid use of incomplete type ‘struct boost::fusion::detail::as_vector<12>’
../include/boost/fusion/container/vector/detail/as_vector.hpp:26:12: error: declaration of ‘struct boost::fusion::detail::as_vector<12>’ 
```

我发现如果我的结构有 > 10 个项目，就会发生这种情况。两个问题：

1.  为什么会有这个限制？
2.  我该如何解决它？

欢迎任何意见。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-09T16:10:19.673

定义`FUSION_MAX_VECTOR_SIZE`为您想要的任何上限，查看`boost/fusion/container/vector/limits.hpp`默认定义。`boost/fusion/container/vector.hpp`然后有条件地包括取决于上限的预处理源。

# session - 当他第一次使用经典asp登录时如何将新用户导航到不同的页面

> ID：10515836
> 
> 赞同：0
> 
> 时间：2012-05-09T12:12:57.560
> 
> 标签：session, authentication, asp-classic, vbscript, session-cookies

我使用的是经典的 ASP，管理员和其他用户只有一个登录表单。我能够在管理员和用户登录时将他们重定向到不同的页面，但是对于新用户，我希望他们在他第一次登录时进入身份验证页面。我该如何解决。我对会话不是很好，事实上我使用会话变量将用户和员工导航到不同的页面。会话是否也将参与其中..??。

这就是我用来将用户和管理员导航到不同页面的方法

```
Session("Username")=request.form("user_name")
    if request.Form("sub_but") <> "" then
    sql = "SELECT * FROM Users WHERE UserName='"&request.form("user_name")&"' AND Password='"&request.form("pwd")&"'"
    rs.open sql, con, 1, 2  
     if rs.EOF then

        response.Write("<script language='javascript'>{attention_emp();}</script>")
            else
       if(rs("UserName"))= "vppl-1" then
       response.Redirect ("admin.asp")
    else
          Response.Redirect ("leave.asp")
    end if 

    end if
    rs.close
    end if 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T23:45:01.670

不要为此使用会话变量，使用简单的 cookie，如果 cookie 或用户不存在，则将它们重定向到身份验证表单。会话变量仅在浏览器打开时保留，下次它们消失时。

但这是在 IIS 服务器上，只需在站点上激活 NTLM（Windows 身份验证），然后您就可以使用简单的 Request.ServerVariables("AUTH_USER"); 控制访问并从中检索用户甚至他的访问权限；这称为单面登录，这意味着一旦用户登录，他不需要再次登录，windows 会为您提供身份验证，这意味着用户很开心 8>)。您只需在包含该站点的地图上授予 ntfs 权限，瞧，您就拥有了基本的安全性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-09T12:16:57.763

我会在您的 user_table 中设置一个布尔值，默认情况下为 false。然后您检查您的代码是否为假，如果是则重定向到身份验证页面并将布尔值设置为真。

# android - Android lyout 将按钮粘在一起

> ID：10515837
> 
> 赞同：0
> 
> 时间：2012-05-09T12:13:01.407
> 
> 标签：android, android-layout, button

这是我的布局

```
 <LinearLayout
    android:id="@+id/toolbar"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_below="@id/image"
    android:layout_gravity="bottom"
    android:layout_marginTop="5dp"
    >

    <Button
        android:layout_weight="1.0"
        android:id="@+id/button1"
        style="@style/ActionButtonText"
        android:background="@drawable/action_button_left"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:text="Button" >
    </Button>

    <Button
        android:layout_weight="1.0"
        android:id="@+id/button1"
        style="@style/ActionButtonText"
        android:background="@drawable/action_button_center"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:text="Button" >
    </Button>

    <Button
        android:layout_weight="1.0"
        android:id="@+id/button1"
        style="@style/ActionButtonText"
        android:background="@drawable/action_button_center"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:text="Button" >
    </Button>

    <Button
        android:layout_weight="1.0"
        android:id="@+id/button1"
        style="@style/ActionButtonText"
        android:background="@drawable/action_button_right"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:text="Button" >
    </Button> 
```

这就是他们的样子

![在此处输入图像描述](../Images/85819753cdff6b206682ee1e1bd73055.png)

我想做的是消除按钮之间的间隙，使它们看起来像这样粘在一起

![在此处输入图像描述](../Images/8f70fbfee491007c582b715a09a28b30.png)

我玩过填充和边距，但无法正常工作。我怎样才能实现它？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:26:09.280

![在此处输入图像描述](../Images/eb973deaaf24f9265767d934dc832ee9.png)

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/toolbar"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_gravity="bottom"
    android:layout_marginTop="5dp" >

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="1.0"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:text="Button" >
    </Button>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="-10dp" <------ it will work....( minus 10)
        android:layout_weight="1.0"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:text="Button" >
    </Button>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="-10dp"
        android:layout_weight="1.0"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:text="Button" >
    </Button>

    <Button
        android:id="@+id/button1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="-10dp"
        android:layout_weight="1.0"
        android:focusable="false"
        android:focusableInTouchMode="false"
        android:text="Button" >
    </Button>

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:19:26.290

将 android:orientation="horizo​​ntal" 添加到您的 LinearLayout

# java - 爪哇玩！框架 1.2.4：使用 selenium 从 Mockmail 中提取链接值

> ID：10515838
> 
> 赞同：3
> 
> 时间：2012-05-09T12:13:03.660
> 
> 标签：java, selenium, playframework

您好，我正在尝试测试模拟邮件发送带有链接的电子邮件的场景，用户将点击链接，他将成为经过验证的用户。这是我的模拟邮件输出：

```
14:52:04,664 INFO  ~ From Mock Mailer
    New email received by
    From: Admin@xxx.com.tr
    ReplyTo: Admin@xxx.com.tr
    To: "xxx@hotmail.com" <xxx@hotmail.com>
    Subject: Verification 
    text/html; charset=UTF-8: <html>
    <body>
        <p>Click here to verify your password: <a href="http://localhost:9000/usercontroller/verifyforgotpassword?uuid=6aaf15da-75ca-44f4-9d3d-c9056d33e142"/></p>
    </body>
</html> 
```

这是我的硒代码：

```
#{selenium}
open('/usercontroller/forgotpassword')
type('userid','stat-011032')
click('btnLogin')
storeLastReceivedEmailBy('xxx@hotmail.com', 'email')
store('javascript{/Subject:\s+(.*)/.exec(storedVars["email"])[1]}', 'subject')
assertEquals('Verification', '$[subject]')
#{/selenium} 
```

我可以从电子邮件中提取主题值，但我不知道如何从邮件正文的标签中提取链接。

感谢您的帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T15:11:53.243

使用此命令

```
store('javascript{/http:[^\s]+/.exec(storedVars["email"])[0]}', 'confirmationUrl')
open($[confirmationUrl]) 
```

希望能帮助到你 ：）

# jquery - mouseenter/mouseleave 事件在目标动画并在鼠标指针下方通过时不会触发

> ID：10515842
> 
> 赞同：4
> 
> 时间：2012-05-09T12:13:16.030
> 
> 标签：jquery, mouse, mouseenter, mouseleave, animated

我这里有这个例子来说明情况：http: [//jsfiddle.net/nubrF/40/](http://jsfiddle.net/nubrF/40/)

如果您将鼠标放在动画元素的路径上，您可以观察到只有在 Firefox（而不是 IE、Chrome 或 Safari）中，当目标元素通过您的鼠标指针“下方”时才会触发事件。

我其实有两个问题：

1.  这是正常的浏览器行为吗？

2.  您推荐什么方法以某种方式模拟这些事件并在目标元素通过鼠标指针时得到通知？

我应该提到我已经考虑过鼠标的 pageX 和 pageY 以及页面中元素的位置，但是这个解决方案看起来很复杂而且不是很干净。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-09T12:45:06.470

是的，这是正常行为。一种解决方法可能是放弃 mouseleave/mouseenter 并将 mousemove 事件绑定到文档。从那里，获取页面上的鼠标指针位置以及动画元素的 offset()、with() 和 height()。如果从 mousemove 事件保存的最后一个点落在该区域内，则您的鼠标位于元素中。

每次动画更新时，您都需要对其进行测试，您可以使用[animate step function](http://api.jquery.com/animate/)进行测试。

例如

```
function myAnimateStepFunc(e,fx) {
    var $e = $(fx.elem);
    var p = $e.offset();
    var isin = false;
    if(lastx >= p.left && lasty >= p.top) {        
        isin =(lastx < p.left + $e.width() && lasty < p.top + $e.height());           
    }

... 
```

这可能就足够了，尽管您可以将其扩展为然后触发自己针对动画元素的 mouseleave/mouseenter 事件。

请注意，您需要将 mousemove 绑定到整个页面，因为您需要更新鼠标在页面上移动的任何位置的 lastx 和 lasty 位置，而不仅仅是在动画的包含 div 内。

# maven - 如何在不使用 Assert 的情况下在确定的火灾报告中写一些东西？

> ID：10515843
> 
> 赞同：1
> 
> 时间：2012-05-09T12:13:23.193
> 
> 标签：maven, selenium, junit4, surefire

我正在使用 Junit 和 Maven 以及 selenium。对于报告，我使用的是surefire插件。我的要求是使用失败消息更新万无一失的报告。可以使用它来完成，`Assert`但它会中止测试用例。但我不想中止它，只想报告它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:28:20.907

您可以使用 maven.test.failure.ignore 属性（命令行上的系统属性），例如：

```
mvn -Dmaven.test.failure.ignore=true 
```

或者在构建过程中忽略失败，您可以使用[maven-surefire-plugin 的配置：](http://maven.apache.org/plugins/maven-surefire-plugin/test-mojo.html)

```
<configuration>
  .
  <testFailureIgnore>true</testFailureIgnore>
  .
</configuration> 
```

# c# - 如何在 c# 中上传之前知道确切的文件大小

> ID：10515844
> 
> 赞同：-4
> 
> 时间：2012-05-09T12:13:24.527
> 
> 标签：c#, asp.net, file, c#-4.0, file-upload

我给用户一个字段，他可以上传任何
图像文件我想检查文件不
应该大于 350kb ....如何在 c#

```
 HttpPostedFileBase file = Request.Files[0];
                string mynewpath = Request.PhysicalApplicationPath + "Upload\\";
                if (file.ContentLength > 0)
                {
                    // here i want to check that if file size is more then 350kb then i will give error 

                    string[] extarray = new string[] { "image/jpeg", "image/jpg","image/png", "image/gif" };
                    var isallowedfile = extarray.Contains(file.ContentType);
                    if (!isallowedfile)
                    {
                        ModelState.AddModelError("", "Only image files (.jpeg , .gif , .png ) are accepted, please browse a image file");
                        return View("SurveyOptions", model);
                    }
                    string filename = Guid.NewGuid() + Path.GetFileName(file.FileName);
                    file.SaveAs(mynewpath + filename);
                } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:29:07.313

1.  在较旧的浏览器中，在上传文件之前无法获取文件大小，解决方法是嵌入隐藏`flash(actionscript)`元素以获取文件大小

2.  在最新的浏览器中，您可以使用`HTML5 File API`读取文件大小

检查基于 jquery filedrop 插件（[https://github.com/weixiyen/jquery-filedrop](https://github.com/weixiyen/jquery-filedrop)）`HTML5 file API`

--新泽西州

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:21:50.160

你应该使用这样的东西：

```
HttpPostedFile MyFile;
int FileLen;
System.IO.Stream MyStream;
MyFileCollection = Request.Files;
MyFile = MyFileCollection[0];
FileLen = MyFile.ContentLength; 
```

FileLen 是您文件的大小！将它与您想要的任何大小进行比较。. .

如果你想在客户端获取文件，据我所知，你可以使用 html 文件上传器来做到这一点：

```
function validateFile()
{
var strFileName = document.form1.file1.value;
var strExtName = strFileName.substring(strFileName.lastIndexOf('.')).toLowerCase();
alert(strFileName);
alert(strExtName);
var objFSO = new ActiveXObject("Scripting.FileSystemObject");
var e = objFSO.getFile(strFileName);
var fileSize = e.size;
//file size limit for 10mb
if (fileSize > 10485760){
alert("maximum size of uploaded file should be less than 10 MB.");
return false; 
}
else
return true;
}

<input type ="file" id="file1" name="file1" contentEditable="false" onchange="validateFile();" /> 
```

# regex - 使用正则表达式从 Javadoc 中提取 Java 类名

> ID：10515851
> 
> 赞同：1
> 
> 时间：2012-05-09T12:13:51.367
> 
> 标签：regex, ant

问题如下：我有一个 Javadoc 生成的 HTML 文件，其中包含 Java 类名和一些附加信息，如下所示：

```
{@link ml.foo.bar.BazAccEd} (Text) Some text
{@link ml.foo.bar.BazAccGrp} (Text) Some text BazAccGrpList
{@link ml.foo.bar.BazAccEdOrGroup} (Text) Some text {@link.ml.foo.bar.BazAccEdList} 
```

我需要从中提取（使用 Ant 正则表达式功能）Java 类的短名称，并且仅在它们是链接的一部分的地方，插入逗号代替原始普通文本，以便上面的示例产生

```
BazAccEd
BazAccGrp
BazAccEdOrGroup, BazAccEdList 
```

它可能并不太复杂，但我没有遇到正确的正则表达式，它只会解析链接并从中提取正确的数据。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T12:29:03.330

鉴于您提供的输入，这应该有效。它通过捕获句点和右花括号之间的文本来工作：

```
\.([A-Za-z\d_]+)(?=})(?:.+\.([A-Za-z\d_]+)(?=}))* 
```

这将返回两个捕获的组`\1`和`\2`. 为了使逗号替换正常工作，您必须检查`\2`. `\1`如果是这样，请在和之间插入一个逗号`\2`。

解释：

```
\.([A-Za-z\d_]+)(?=}) # look for a period, characters, and lookahead for closing curly brace. Capture the characters
(?:          # open a non-capturing group
.+           # gobble up characters until ...
\.([A-Za-z\d_]+)(?=}) # ... you find the same thing as in the first line above
)*           # make the non-capturing group optional 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:28:07.943

您可以使用该正则表达式。

{@link[ .][a-zA-Z] *.[a-zA-Z]* .[a-zA-Z] *.([AZa-z0-9]* )}

# objective-c - iOS：在画布上动态绘图（上下文）

> ID：10515853
> 
> 赞同：0
> 
> 时间：2012-05-09T12:14:00.040
> 
> 标签：objective-c, ios, math, cgcontext

我目前正在制作一个应用程序，该应用程序将某个标志网络绘制到屏幕上（在 CGContextRef 上）。到目前为止一切都很好，但现在我发现自己处于无法解决这个问题的境地：

我试图动态地绘制一个对象，只知道它所在的线（具有起点和终点的 x 和 y 坐标）。有了这些，我找到了线的中间，这是应该绘制符号的地方。有了这些信息，我找到了线的角度（顶部为 0）。这是我现在掌握的信息：

```
CGPoint firstLocation;
CGPoint secondLocation;
CGPoint middleLocation;

double x1 = firstLocation.x;
double y1 = firstLocation.y;
double x2 = middleLocation.x;
double y2 = middleLocation.y;

float a = (atan2(y2-y1, x2-x1) * (180/M_PI)) - 90; 
```

我查看了在 CGRect 上使用一些变换函数（如 CGAffineTransform），但这似乎不起作用，因为我需要围绕它的中心旋转矩形，而 CGRect 只会围绕它的原点旋转。

我想使用上述信息创建以下符号：

![图片](../Images/8bdb2ef5b6aadf664388a127c312b320.png)

任何帮助表示赞赏，如果您需要更多信息，请告诉我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T13:00:21.953

在我的应用程序中，我做了类似的事情。我有一条在绘制之前添加变换的路径。变换将路径移动到中点，对其进行旋转，然后将其移回：

```
// Rotate the path such that it points to the end coordinate
CGAffineTransform t = CGAffineTransformTranslate(
  CGAffineTransformRotate(
    CGAffineTransformMakeTranslation(middleLocation.x, middleLocation.y), 
    -a), 
  -middleLocation.x, -middleLocation.y);
CGMutablePathRef path = CGPathCreateMutable();
CGPoint points[8] = { ... these are the 8 points in my path ... };
CGPathAddLines(path, &t, points, 8); 
```

您不必使用`CGPathAddLines`，这只是我构建路径的最简单方法。所有`CGPathAdd...`功能都可以进行转换。

如果您不使用`CGPath`，则可以通过执行`CGContextTranslateCTM`和在上下文本身中进行类似的转换`CGContextRotateCTM`。

# javascript - 如何实现类似 facebook 的头像上传？

> ID：10515854
> 
> 赞同：1
> 
> 时间：2012-05-09T12:14:06.780
> 
> 标签：javascript, jquery, facebook, file-upload

在 facebook 上，如果您单击编辑图片，您会得到一个提供选项的菜单`Upload photo`。我想在我的网站上实现类似的东西。我希望在单击 后出现浏览器的文件上传对话框`Upload photo`，并且我希望在用户选择图片后自动提交它。这应该如何实施？

一位同事建议了一个隐藏的div，它有一个file类型的输入字段，并在用户点击时自动触发点击事件`Upload photo`，然后，`change`在file字段上监听事件，并使用jquery提交表单。你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:19:38.947

我会研究一个文件上传插件，例如[plupload](http://www.plupload.com/)。Plupload 有几个很好的功能，专门用于上传图像，例如：

1.  将图像质量降低到原始图像的特定百分比
2.  如果可能，将图像调整为特定尺寸

另外，我很确定 plupload 有一个内置选项，可以在用户选择图像后自动提交。

# gwt - GWT 面板和小部件

> ID：10515859
> 
> 赞同：1
> 
> 时间：2012-05-09T12:14:24.390
> 
> 标签：gwt

下面总结一下 GWT 面板和小部件之间的基本关系是否安全？

*   GWT 面板被转换为可以包含子面板或/和子小部件的父 DOM 节点。
*   一个 GWT 小部件被翻译成一个独立的叶子 DOM 节点。
*   GWT RootPanel 必须单独充当所有其他面板和小部件的根容器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T14:12:36.837

这是 GWT 层次结构：

![GWT 层次结构](../Images/3c68303ab0753fb438d3bf37a827fb9c.png)

面板也是一个小部件。面板是可以包含其他小部件和面板的小部件。通常它们用于布局，并且很少有直接与它们关联的数据 -例如，[DisclosurePanel可以在标题中包含数据，而 TabPanel 的选项卡中。](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/user/client/ui/DisclosurePanel.html)有些基于 HTML`table`元素（例如[Horizo​​ntalPanel](http://google-web-toolkit.googlecode.com/svn/javadoc/2.4/com/google/gwt/user/client/ui/HorizontalPanel.html)），有些基于 tag `div`。

**RootPanel**是包含其他小部件的面板。此面板位于包含层次结构的顶部。默认它包含主机页面的标签`body`。RootPanel 可以包含任意数量的小部件，这些小部件将以其自然的 HTML 顺序排列。

请参阅[文档](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T14:06:23.497

每个 GWT Widget 实例都有一个元素（可通过调用 访问`getElement()`），而面板只是一种 Widget——它们仍然有一个基本元素。大多数 Widget 构建更多内容来完成它们的工作（例如：CheckBox 是 a`span`与 an`input`和 a `label`），并且面板也可能需要多个元素。

小部件被附加到其他小部件不仅因为这是 DOM 需要排列的方式，而且还用于跟踪从 DOM 中附加和分离小部件。除此之外，这使得只有在实际附加时才连接事件处理程序成为可能，并在不再是页面的一部分时取消连接它们。

RootPanel 是一个特殊的小部件，它表示现有元素，可以是主体本身，也可以是具有给定 ID 的元素。可能有多个 RootPanel，但它们不应该嵌套。（也就是说，可能只有一个 RootLayoutPanel，一种专门的 RootPanel，它还处理将浏览器大小信息传递给子布局面板）。

这可能与您所追求的想法相同，但我想澄清一下，Widget 通常不仅仅是一个 DOM 节点。

# asp.net-mvc - MVC 智能感知

> ID：10515861
> 
> 赞同：4
> 
> 时间：2012-05-09T12:14:33.153
> 
> 标签：asp.net-mvc, vb.net, visual-studio, intellisense

创建示例 MVC3 应用程序时没有任何智能感知。

![在此处输入图像描述](../Images/617ea1fc73f3bca1c3b610a791df761e.png)

配置文件很好，项目编译并在运行时正常工作......

安装了 MVC3 和 MVC4，每个都一样。

安装了 VS2010 和 VS11（并排运行良好），同样的事情......没有智能感知。

错误：未声明“ViewData”。由于其保护级别，它可能无法访问。未声明“网址”。由于其保护级别，它可能无法访问。“部分”不是“System.Web.WebPages.Html.HtmlHelper”的成员。“ActionLink”不是“System.Web.WebPages.Html.HtmlHelper”的成员。

'ActionLink' 错误应该是 Mvc 库不应该吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T13:58:40.947

你不用担心。它是视觉工作室的一个报告问题。在最新的升级中它不存在。我也面临同样的问题。

# javascript - JS/jQuery 获取 HTTPRequest 请求标头？

> ID：10515862
> 
> 赞同：24
> 
> 时间：2012-05-09T12:14:47.103
> 
> 标签：javascript, ajax, header, request, request-headers

在 xhr 对象中使用 getAllResponseHeaders 可以在 ajax 调用后获取所有响应标头。但是我找不到获取请求标头字符串的方法，这可能吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-09T13:29:06.980

如果这是出于调试目的，那么您可以只使用 Firebug 或 Chrome 开发人员工具（以及 IE 中调用的任何功能）来检查从浏览器到服务器的网络流量。

另一种方法是使用类似这个脚本的东西：

```
$.ajax({
    url: 'someurl',
    headers:{'foo':'bar'},
    complete: function() {
        alert(this.headers.foo);
    }
}); 
```

但是我认为只有已经定义的标头`headers`可用（不确定如果标头被更改会发生什么（例如在 beforeSend 中）。

你可以阅读更多关于 jQuery ajax 的信息： http: [//api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

**编辑：**如果您只想捕获 XMLHttpRequest 上对 setRequestHeader 的所有调用的标头，那么您可以包装该方法。这有点像 hack，当然您需要确保在任何请求发生之前运行下面的函数包装代码。

```
// Reasign the existing setRequestHeader function to 
// something else on the XMLHtttpRequest class
XMLHttpRequest.prototype.wrappedSetRequestHeader = 
  XMLHttpRequest.prototype.setRequestHeader; 

// Override the existing setRequestHeader function so that it stores the headers
XMLHttpRequest.prototype.setRequestHeader = function(header, value) {
    // Call the wrappedSetRequestHeader function first 
    // so we get exceptions if we are in an erronous state etc.
    this.wrappedSetRequestHeader(header, value);

    // Create a headers map if it does not exist
    if(!this.headers) {
        this.headers = {};
    }

    // Create a list for the header that if it does not exist
    if(!this.headers[header]) {
        this.headers[header] = [];
    }

    // Add the value to the header
    this.headers[header].push(value);
} 
```

现在，一旦在`XMLHttpRequest`实例上设置了标题，我们就可以通过检查`xhr.headers`例如

```
var xhr = new XMLHttpRequest();
xhr.open('get', 'demo.cgi');
xhr.setRequestHeader('foo','bar');
alert(xhr.headers['foo'][0]); // gives an alert with 'bar' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T22:35:38.417

您可以使用 Sinon 的 FakeXMLHttpRequest 替换浏览器的 XHR。[本文档](http://cjohansen.no/en/javascript/sinon_js_0_6_0_fake_xmlhttprequest_and_improved_test_framework_integration)中描述了如何使用它进行测试，但我很确定您可以使用该模块进行调试。

你需要做的是：

```
var requests;
this.xhr = sinon.useFakeXMLHttpRequest();
this.xhr.onCreate = function(xhr) {
    requests.push(xhr);
} 
```

然后稍后，您可以通过以下方式检查`requests`数组的标题：

```
console.log(requests[0].requestHeaders); 
```

访问您的请求标头。

# c# - Web 服务传递值错误 (asmx)

> ID：10515868
> 
> 赞同：0
> 
> 时间：2012-05-09T12:15:18.487
> 
> 标签：c#, web-services, visual-studio-2008

我有一个网络服务

```
[WebMethod]
public void Insert(int node, int date, int time, int rtt)
{

    string query = "INSERT INTO pingresult (node, date, time, rtt) VALUES('"+node+"', '"+date+"', '"+time+"', '"+rtt+"')";

    if (this.OpenConnection() == true)
    {              
    MySqlCommand cmd = new MySqlCommand(query, connection);
    cmd.ExecuteNonQuery();        
    this.CloseConnection();
    }
} 
```

当我尝试使用该方法时

```
public void Main(string[] args)
{
    int node, date, time, rtt;
    PingService.Service1 s1 = new ConsoleApplication1.PingService.Service1();          

    node = 1;
    date = 090512;
    time = 1720;
    rtt = 2222;

    s1.Insert(node,date,time, rtt);           
 } 
```

我得到了这个错误
**没有重载方法'插入'需要'4'参数**

任何的想法？[我在这里](https://stackoverflow.com/questions/1320207/webservice-c-sharp-constructor-does-not-allow-arguments)

寻找解决方案，但我真的不知道这意味着什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T02:52:08.630

我发现了我的愚蠢错误，我没有在客户端更新我的 Web 参考，我在[这里](https://stackoverflow.com/questions/9392247/no-overload-for-the-method-xyz-with-out-parameters-take-4-arguments)找到了答案，感谢那些提供建议的人。

# java - 减少项目中的日志库数量

> ID：10515870
> 
> 赞同：5
> 
> 时间：2012-05-09T12:15:30.673
> 
> 标签：java, logging

我正在研究的项目正在使用几个开源框架。每个框架都使用一些日志库。我的问题是最终交付物包含 log4j（在两个不同版本中）、带有 logback 的 slf4j，当然还有常见的日志记录。我正在寻找如何减少库数量的解决方案，我可以在 maven 的 pom 文件中排除日志库并将 slf4j 配置为“拦截”日志消息吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-09T13:24:14.937

Slf4j 在[其手册](http://www.slf4j.org/manual.html)中有一些关于如何做到这一点的信息。

我认为您正在寻找的是从您的所有 Maven 依赖项中排除并加载`log4j`包。它们旨在替换and并且包含适当的和类来替换, , 和朋友。这不会减少库，但会将所有日志输出通过. 除非您摆脱对这些类的使用（显然），否则您无法减少对包装器或原始类的依赖。`commons-logging`[`log4j-over-slf4j`](http://search.maven.org/#artifactdetails%7Corg.slf4j%7Clog4j-over-slf4j%7C1.6.4%7Cjar)[`jcl-over-slf4j`](http://search.maven.org/#artifactdetails%7Corg.slf4j%7Cjcl-over-slf4j%7C1.6.4%7Cjar)`log4j``commons-logging``org.apache.log4j``org.apache.commons.logging``Logger``Log``sl4fj``slf4j`

如果您希望使用一个日志记录包，那么正确的方法可能是切换到使用`commons-logging`被设计为日志记录委托器的包，然后使用`slf4j-jcl`挂钩到`commons-logging`.

对于后代，您可以通过这种方式为每个需要的依赖项排除依赖项`log4j`。

```
<dependency>
    <groupId>.../groupId>
    <artifactId>...</artifactId>
    <version>...</version>
    <exclusions>
        <exclusion>
            <groupId>log4j</groupId>
            <artifactId>log4j</artifactId>
        </exclusion>
    </exclusions>
</dependency> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T12:19:55.337

[看一下这个](http://www.slf4j.org/legacy.html)

**编辑**更仔细地阅读您的问题。slf4j 为非 slf4j 项目添加了一个遗留桥梁。但是您仍然需要在运行时路径上提供依赖的 jar。这只是不重复别人工作的代价。

我的意思是考虑一下，您拥有所有那些本质上需要在 jvm 中链接的完全限定符号。一些简单的伏都教可以让你到处走走，包括依赖库。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T12:24:05.850

看看[pax-logging](http://team.ops4j.org/wiki/display/paxlogging/Pax+Logging)。它引入了几乎所有你能想到的日志框架接口（正确的包名和类等）*，但*它没有实现它们。相反，它将这些外观链接到 log4j 后端。

换句话说，您的项目继续使用它们原来的日志框架，但这些（透明地）移交给了 log4j。这样你的日志输出是一致的，并且只在一个地方配置。

# netbeans - NetBeans 远程连接

> ID：10515872
> 
> 赞同：6
> 
> 时间：2012-05-09T12:15:32.827
> 
> 标签：netbeans

我正在尝试设置 netBeans 远程项目，但我遇到了很多麻烦。我已经从远程服务器启动了一个 PHP 应用程序，在最后一个确认步骤中它向我抛出了错误。

> 没有可供下载的文件。尝试在远程配置中检查被动模式。

在日志输出中，它在那里失败：

```
> 215 UNIX 类型：L8
> 港口 192,168,5,217,196,73
> 500 非法 PORT 命令。

```

有人在设置远程连接时遇到同样的问题吗？请帮忙。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-08-28T16:14:13.387

要建立 FTP 连接，请选择以下任一选项：

*   关闭 Windows 防火墙。
*   为被动模式 FTP 服务器配置 Windows 防火墙，如下所示：

    1.  打开管理员命令提示符。
    2.  单击开始 > 所有程序 > 附件。
    3.  右键单击命令提示符，然后单击以管理员身份运行。
    4.  运行以下命令：

        ```
        netsh advfirewall firewall add rule name=FTPService action=allow service=ftpsvc protocol=TCP dir=in 
        ```

    5.  禁用有状态 FTP 过滤，以便防火墙不会阻止任何 FTP 流量：

        ```
        netsh advfirewall set global StatefulFTP disable 
        ```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-03-09T05:56:35.383

每当有人在寻找如何将 netbeans 设置为被动模式时，这似乎是最佳答案。尽管对于那些使用 Mac OS 和 Netbeans 的人总是“将 ftp 设置为被动模式”，但您似乎永远找不到它。

1.  右键单击项目
2.  选择属性
3.  选择运行配置
4.  选择管理
5.  在左栏中选择 your_ftp_connection
6.  向下滚动

![NetBeans FTP 连接](../Images/bfe86b4ae488f76c3f6126e19b61c6ca.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-13T14:30:04.593

我解决此问题的唯一方法是切换到使用 SFTP。这显然需要您设置对服务器的 SFTP（通过 SSH 的 FTP）访问。

在运行配置中，当它要求您提供远程连接时：

1.  点击“管理”
2.  点击“添加...”
3.  选择 SFTP 作为连接类型
4.  填写其余详细信息，就好像它是正常的 FTP 连接一样。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-09T13:22:58.690

将普通的 FTP Netbeans 连接转换为被动模式为我解决了这个问题。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-05-20T07:59:19.770

请检查**被动模式**；我也遇到过同样的问题；检查后；解决这个问题。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-17T19:26:15.210

没有办法在 OSX 中找到被动模式。这是一个 Netbeans 错误......所以我将无法使用我的 Mac 在 netbeans 上进行开发。已经尝试下载最新版本。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-10-16T19:04:36.810

对我来说，解决方案是在客户端检查**被动模式**并在服务器端执行以下操作

在 /etc/vsftpd.conf

```
pasv_enable=Yes
pasv_max_port=10100
pasv_min_port=10090 
```

然后在终端

```
iptables -I INPUT -p tcp --destination-port 10090:10100 -j ACCEPT
service iptables save
service vsftpd restart 
```

# javascript - 使用 JavaScript 关闭窗口

> ID：10515873
> 
> 赞同：0
> 
> 时间：2012-05-09T12:15:34.947
> 
> 标签：javascript, window

我有一个带有按钮（1）的窗口（1）。如果我单击该按钮，则会出现另一个窗口（2）。它还有一个按钮 (2)。如果我单击按钮 (2)，则会出现弹出窗口。如果我在弹出窗口上按“确定”，如何关闭窗口 (2)？我正在使用 JavaScript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:19:14.710

```
// store reference to window
var window2 = window.open(...);

// close window via reference, put this in your OK button handler
window2.close(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:25:37.893

[在此处阅读有关窗口管理的信息。](http://www.infimum.dk/HTML/JSwindows.html#ref_2_5)

> 你不能根据浏览器的安全保证来做，有些动作不允许在没有用户干预的情况下直接通过javascript进行管理。

[从这里](https://stackoverflow.com/questions/979696/window-opener-close-issue-for-javascript)得到这个/stackoverflow/

# facebook - Facebook 页面选项卡应用程序 - 不会将“signed_request”发送到画布 URL，但可以与安全画布 URL 一起使用

> ID：10515877
> 
> 赞同：1
> 
> 时间：2012-05-09T12:15:42.200
> 
> 标签：facebook, facebook-graph-api, https

我有一个 Facebook Page-Tab 应用程序。我已经从应用设置页面指定了 Canvas URL 和 Secure Canvas URL。

如果用户在 https 上登录 facebook，iframe 会加载正确的安全画布并且一切正常。

如果用户在 http 上登录 facebook，则 iframe 会加载非安全画布，但不会传递 signed_request 参数。我需要它来检测用户是否喜欢该页面。

我环顾四周，发现了类似的问题，但没有真正的解决方案。任何提示？

谢谢

# c# - 如何以编程方式添加 SSRS 列

> ID：10515879
> 
> 赞同：1
> 
> 时间：2012-05-09T12:15:46.947
> 
> 标签：c#, .net, reporting-services

我有一个名为 EmployeeTypes 的表，其中包含员工类型，现在我想使用 SSRS 创建一个报告，该报告将具有以下内容：

```
 EmployeeType1      EmployeeType2     EmployeeType3
            4                  23                2 
```

其中数字是员工人数。

问题是我如何以编程方式生成列，因为 EmployeeTypes 表可以有许多类型并按时间扩展？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:43:55.657

听起来您正在寻找交叉表报告，使用的数据集如`select count(*), employee_type from employee_table group by employee_type`.

您可以使用报表向导创建“矩阵”报表类型（与“表格”报表类型相对）。该向导将引导您完成获得所需内容的步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:19:53.877

这是一个示例：

[http://www.codeproject.com/Articles/11254/SQL-Reporting-Services-with-Dynamic-Column-Reports](http://www.codeproject.com/Articles/11254/SQL-Reporting-Services-with-Dynamic-Column-Reports)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T12:18:56.600

SSRS 报告由 XML 文件（.RDL 或 .RDLC 文件）定义。您可以通过直接修改 XML 以编程方式生成列。不是为了胆小的人，而是人们这样做，而且可以做到。

# java - 将 jdouble 转换为 c 类型的 double

> ID：10515886
> 
> 赞同：7
> 
> 时间：2012-05-09T12:16:08.643
> 
> 标签：java, c, java-native-interface

如何将`jdouble`java 类型变量转换为`double`c 类型的变量？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-09T12:17:52.483

你不必这样做，它只是一个像这样的 typedef：

```
typedef double jdouble; 
```

所以不需要转换，一旦你有了 a`jdouble`你就可以把它当作`double`.

[例如，请参见Standford](http://www-stat.stanford.edu/~naras/java/course/lec5/lec5.html#NWlec7-CodS-1)的此代码示例：

```
JNIEXPORT jdouble JNICALL Java_Summer_sum__DD
(JNIEnv *env, jobject jobj, jdouble j1, jdouble j2) {
    return j1 + j2;
} 
```

添加是直接使用`jdouble`值完成的，相信编译器会弄清楚如何生成所需的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-02T16:53:11.430

不需要转换。我使用了一个简单的静态演员表。

```
jfieldID varPtr = env->GetFieldID(dataClass, "var", "D");
jdouble jdoubleVar = env->GetDoubleField(dataClass, varPtr);

double varDouble = static_cast<double>(jdoubleVar); 
```

# java - encodeRedirectURL 生成警告

> ID：10515887
> 
> 赞同：2
> 
> 时间：2012-05-09T12:16:16.427
> 
> 标签：java, servlets, urlencode

我正在使用静态分析工具来查找错误并报告以下代码的警告

```
response.sendRedirect(response.encodeRedirectURL(redirectToXXX)); 
```

警告说：

> 此代码直接将 HTTP 参数写入 HTTP 标头，从而导致 HTTP 响应拆分漏洞。

但是当我这样做时：

```
redirectToXXX= java.net.URLEncoder.encode(redirectToXXX.toString(),"ISO-8859-1");
response.sendRedirect(response.encodeRedirectURL(redirectToXXX)); 
```

警告消失。

我不明白的是，`encodeRedirectURL`它应该在必要时对 url 进行编码，那么为什么它会生成警告，并在使用 URLEncoder.encode 编码时删除警告。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:42:53.257

我相信在第二种情况下，警告会消失，因为`URLEncoder.encode`删除了您从请求中获取的参数中可能包含的 CR 和 LF。

您可能需要阅读[本文](http://www.securiteam.com/securityreviews/5WP0E2KFGK.html)以了解 HTTP 响应拆分漏洞的背景。
我还相信，由于调用`URLEncoder.encode`返回一个新对象，FindBugs 不会将该变量重新转换为 HTTP 请求内容，因此它认为它是安全的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:38:11.037

我认为您`redirectToXXX`包含回车或换行。请删除它，然后重试。

# javascript - 将两个选择器与一个 jQuery 对象结合起来

> ID：10515888
> 
> 赞同：12
> 
> 时间：2012-05-09T12:16:31.123
> 
> 标签：javascript, jquery, html, jquery-selectors

我有两个带有 id 的 div:`#addNew_tab`和`#sendCom_tab`.
我想点击其中任何一个来触发相同的 jQuery`click()`函数。

我在想类似的事情：

```
$("#addNew_tab", "#sendCom_tab").click(function(){
      //do stuff
}); 
```

但这不起作用。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-05-09T12:17:27.723

```
$("#addNew_tab, #sendCom_tab").click(function(){
      //do stuff
}); 
```

更改自：

```
$("#addNew_tab", "#sendCom_tab") 
```

到：

```
$("#addNew_tab, #sendCom_tab") 
```

* * *

选择器内的逗号（`"a, b")`表示第一个加第二个；就像 CSS 选择器一样
（嗯，它是一个 CSS 选择器......）

> **jQuery（选择器）**
> 
> 描述：接受一个包含**CSS 选择器**的字符串，然后用于匹配一组元素。

它等于：

```
$("#addNew_tab").add("#sendCom_tab")... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:17:25.333

```
function doStuff() {
    // do stuff
}

$("#addNew_tab").click(doStuff);
$("#sendCom_tab").click(doStuff); 
```

# python - Python/Django：数据库模型中字段“类型”的同义词（保留的内置符号）

> ID：10515891
> 
> 赞同：26
> 
> 时间：2012-05-09T12:16:45.953
> 
> 标签：python, django, model

我创建了一个 django 项目。它包含一个具有**“类型”属性**的模型类。我认为“类型”是描述该字段最合适的术语，因为它定义了条目的类型。

```
class Vehicle(models.Model):
    TYPE = (
        (u'car', u'Car'),
        (u'motorcycle', u'Motorcycle'),
        (u'airplane', u'Airplane'),
    )

    type = models.CharField(max_length=100, choices=TYPE) 
```

我不太喜欢“种类”或“类别”，因为它们不像“类型”那么通用。

## 问题

```
Assignment to reserved built-in symbol: type 
```

1.  这是一个警告，那么这是一个问题吗？
2.  如果是，我有什么选择？
3.  您对“类型”一词有什么好的替代方法吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-09T12:31:21.937

我不同意其他答案。没有必要改变这一点。

在我看来，混淆的风险很小，因为除非通过实例，否则您永远不会访问该属性。`my_vehicle.type`不容易与 (eg) 混淆`type(my_vehicle)`。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-05-09T12:20:55.880

1.  [拥有一个隐藏 python 内置](http://docs.python.org/library/functions.html)函数之一的变量名总是一个坏主意 。它会使阅读您的代码的人感到困惑，他们希望 type 意味着特定的东西。对其他用户来说，它的可读性不如可读性重要，它还可以消除语法高亮。
2.  重命名变量。（这真的是最好的办法——你可以离开它，但现在重命名它很容易）
3.  有很多[潜在的选择](http://thesaurus.com/browse/type?s=t)，也许是`classification`或`category`。我知道你说你不喜欢`category`，但我看不出它有什么不一般的地方？

对于您的特定应用程序来说，这可能是过大的杀伤力（需要了解更多），但 django 确实支持[模型继承](https://docs.djangoproject.com/en/dev/topics/db/models/#model-inheritance)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T12:22:05.837

好吧，警告或错误，我会避免总是冒像您这样的情况的风险:) 在我看来，您可以做的更好的事情是更改变量名称而不会失去任何意义或凝聚力。如果仅用于该特定类别，您可以将其称为“v_type”，意思是车辆类型的缩写。如果您要扩展该类，您将使用另一种车辆类型对其进行扩展，因此在您的情况下“v_type”将适合。

# javascript - 点击事件未触发

> ID：10515898
> 
> 赞同：0
> 
> 时间：2012-05-09T12:17:05.980
> 
> 标签：javascript, backbone.js, backbone-events, backbone-views

我已经环顾了一段时间，但无法找到任何暗示这是什么原因的东西。

我的代码：

```
var faqView = Backbone.View.extend({
    tagName: 'div',
    id: 'faq-list',
    initialize: function() {
        var view = this;
        this.collection = new faqCollection();
        this.collection.fetch({
            success: function(collection, response) {
                collection.each(function(faq){
                    view.$el.append(_.template($('script#faq_item').html(),{faq: faq.attributes}));
                });
            },
            error: function(collection, response) {
                view.$el.html("<p>Unable to get the FAQ items.<br>Please try again later.</p>");
            }
        });
    },
    render: function() {
        this.$el.appendTo('div#container');

        return this;
    },
    events: {
        'click h3': 'toggleAnswer'
    },
    toggleAnswer: function(event) {
        console.log(this);
        console.log(event);
    }
});

var router = Backbone.Router.extend({
    routes: {
        "faq": "faq",
        "*other": "defaultRoute"
    },
    faqView: {},
    initialize: function() {
        this.faqView = new faqView();
    },
    defaultRoute: function() {
        this.resetPage();
    },
    faq: function() {
        this.resetPage();
        $('body').addClass('page-faq');
        this.faqView.render();
    },
    resetPage: function() {
        $('body').removeClass('page-faq');
        this.faqView.remove();
    }
}); 
```

上面的代码作为最后一项包含在`<body>`. HTML如下。

```
<body>
    <div id="container">
    </div>
    <script type="text/template" id="faq_item">
        <h3 class="contracted"><span>{{faq.question}}</span></h3>
        <p style="display: none;">{{faq.answer}}</p>
    </script>
    <script type="text/javascript" src="./js/models.js"></script>
    <script type="text/javascript" src="./js/views.js"></script>
    <script type="text/javascript" src="./js/collection.js"></script>
    <script type="text/javascript" src="./js/router.js"></script>
    <script type="text/javascript">
        //<![CDATA[
            $(function() {
                var app = new router;
                Backbone.history.start();
            });
        //]]>
    </script>
</body> 
```

所有必需的元素都存在（据我所知），我没有手动设置`el`视图的属性。我不知道为什么单击 时事件没有绑定/触发`<h3>`。

**编辑**如果我不使用路由器并自行创建视图，则不会引发错误并且该功能有效。例如

```
var app = new faqView();
app.render(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T21:02:17.973

你的问题出在你的路由器上。实际上就在这里：

```
resetPage: function() {
    $('body').removeClass('page-faq');
    this.faqView.remove();
} 
```

[`View#remove`](http://documentcloud.github.com/backbone/#View-remove)默认情况下只是视图上的[jQuery`remove`](http://api.jquery.com/remove/)`el`，并且：

> [...] 方法从 DOM 中取出元素。[...] 所有与元素相关的绑定事件和 jQuery 数据都被移除

所以一旦你`this.faqView.remove()`，[`delegate`](http://api.jquery.com/delegate/)驱动视图事件的处理程序就消失了。

通常的方法是根据需要创建和销毁视图，而不是创建视图并将其缓存以备后用。你的路由器应该看起来更像这样：

```
var router = Backbone.Router.extend({
    routes: {
        "faq": "faq",
        "*other": "defaultRoute"
    },
    defaultRoute: function() {
        this.resetPage();
    },
    faq: function() {
        this.resetPage();
        $('body').addClass('page-faq');
        this.view = new faqView();
        this.view.render();
    },
    resetPage: function() {
        $('body').removeClass('page-faq');
        if(this.view)
            this.view.remove();
    }
}); 
```

演示：http: [//jsfiddle.net/ambiguous/aDtDT/](http://jsfiddle.net/ambiguous/aDtDT/)

你也可以尝试[`detach`](http://api.jquery.com/detach/)在一个被覆盖的`remove`方法中搞乱，`faqView`但实际上没有必要一直都有一个`faqView`around 的实例：当你需要它时创建它，不需要它时删除它。

# c# - 在我的 IRC 客户端中使用命令

> ID：10515903
> 
> 赞同：2
> 
> 时间：2012-05-09T12:17:24.690
> 
> 标签：c#, client, irc

我目前正在尝试制作一个简单的 IRC Gui 客户端。我使用 SmartIrc4net 作为基础，因为它似乎是所有这些中最支持的，在这里找到：http: [//www.codeproject.com/Articles/8323/SmartIrc4net-the-C-IRC-library](http://www.codeproject.com/Articles/8323/SmartIrc4net-the-C-IRC-library)

现在我遇到的问题是动作命令。例如，要让自己成为一名操作员，您可以输入

/oper 管理员密码或更改主机，将是 /sethost mynewhost

我的问题是，当我通过 TextBox 传递该值时，而不是让我成为管理员或更改我的主机。我的输入只是在聊天中显示为文本。

这是我的代码：

```
 string[] serverlist;
        serverlist = new string[] { "mydomain.com" };
        int port = 6667;
        string channel = "#MyChannel#";
        try
        {
            irc.Connect(serverlist, port);
            irc.Login("SmartIRC", "SmartIrc4net Test Bot");
            irc.RfcJoin(channel);

                irc.SendMessage(SendType.Message, channel, "/oper admin mypass");
                irc.SendMessage(SendType.Action, channel, "/sethost mynewhost");

            irc.Listen(); 
```

但是当我传递这些值时，它所做的只是显示我在聊天中输入的内容，而没有真正让我操作或更改我的 sethost。

无论如何，我真的可以让它将命令传递给 IRC 服务器，而不仅仅是在聊天中显示原始文本吗？

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:28:23.267

这是因为您正在显式发送消息。IRC 本身没有 的概念`/commands`，这都是在客户端完成的。您正在做的只是发送一条带有特定文本的消息，该文本恰好以`/`. 即服务器收到的是

```
PRIVMSG #channel :/oper admin mypass 
```

代替

```
OPER admin mypass 
```

您只需要找出一种将原始 IRC 命令发送到服务器的方法。但是，您链接到的页面并没有提供太多关于该部分的文档。但从层数来看，这应该在第 2 层或第 1 层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:29:06.273

除了 SendMessages 之外，还有很多选项。

您有 Oper 的示例 irc.RfcOper(username, pasword)。

如果你想为它不支持的东西发送原始数据命令，例如sethost，你可以直接发送一个WriteLine。

irc.WriteLine("sethost mynewhost")

打开 IrcCommands.cs 以查看命令列表，打开 Rfc2812.cs 以查看它们是如何传输的。

但是，我建议您阅读或至少查看您可以在此处找到的 Rfc2812 标准[https://www.rfc-editor.org/rfc/rfc2812](https://www.rfc-editor.org/rfc/rfc2812)

# python - 在 python 中使用朴素贝叶斯进行文档分类

> ID：10515907
> 
> 赞同：2
> 
> 时间：2012-05-09T12:17:33.963
> 
> 标签：python, nltk, document-classification

我正在做一个在 python 中使用朴素贝叶斯分类器进行文档分类的项目。我也使用了 nltk python 模块。文档来自路透社数据集。我执行了诸如词干提取和停用词消除之类的预处理步骤，并继续计算索引词的 tf-idf。我使用这些值来训练分类器，但准确度很差（53%）。我应该怎么做才能提高准确性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-15T09:47:17.933

可能有帮助的几点：

*   不要使用停止列表，它会降低准确性（但请删除标点符号）
*   查看单词特征，仅以前 1000 个为例。降低维度会大大提高你的准确性；
*   使用二元组和一元组 - 这会提高一点准确性。

您还可以找到其他加权技术，例如`log(1 + TF) * log(IDF)`提高准确性。祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:29:50.253

分类器无法正常工作的原因可能有很多，并且有很多方法可以对其进行调整。

*   你用足够多的正面和负面的例子来训练它吗？
*   你是如何训练分类器的？您是否将每个单词都作为特征赋予它，或者您是否还添加了更多特征来训练它（例如文本的长度）？
*   你到底想分类什么？指定的分类是否有与之相关的特定词？

所以这个问题相当广泛。也许如果您提供更多详细信息，您可以获得更多相关建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-01T01:00:18.157

如果您使用的是 nltk 朴素贝叶斯分类器，那么您实际上可能使用的是*平滑多元伯努利*朴素贝叶斯文本分类。如果您的特征提取函数映射到所有浮点值的集合（听起来可能是因为您使用 tf-idf）而不是所有布尔值的集合，这可能是一个问题。

如果您的特征提取器返回 tf-idf 值，那么我认为 nltk.NaiveBayesClassifier 将检查是否为真

```
tf-idf(word1_in_doc1) == tf-idf(word1_in_class1) 
```

而不是适用于 tf-idf 的任何连续分布的适当问题。

这可以解释你的低准确率，特别是如果一个类别在你的训练集中出现 53% 的时间。

您可能想查看在 scikit-learn 中实现的多项朴素贝叶斯分类器。

有关多项式和多元伯努利分类器的更多信息，请参阅[这篇非常易读的论文](http://www.cs.cmu.edu/~knigam/papers/multinomial-aaaiws98.pdf)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-08-11T15:12:49.253

就像 Maus 所说的那样，NLTK 朴素贝叶斯（NB）使用伯努利模型加上平滑来控制特征条件概率==0（对于训练中分类器未看到的特征）平滑的常用技术是拉普拉斯平滑，您可以在其中添加1 到条件概率的分子，但我相信 NLTK 将 0.5 添加到分子。NLTK NB 模型使用布尔值并基于它计算其条件，因此使用 tf-idf 作为特征不会产生好的甚至有意义的结果.

如果您想留在 NLTK 中，那么您应该使用单词本身作为特征和二元组。查看 Jacob Perkins 撰写的关于在 NLTK 中使用 NB 进行文本处理的文章：http: [//streamhacker.com/tag/information-gain/](http://streamhacker.com/tag/information-gain/)。这篇文章很好地解释和演示了一些你可以做的事情来预处理你的数据；它使用来自 NLTK 的电影评论语料库进行情感分类。

还有另一个用于文本处理的 Python 模块，称为 scikit-learn，其中包含各种 NB 模型，例如 Multinomial NB，它使用每个单词的频率而不是每个单词的出现来计算其条件概率。

以下是一些关于 NB 以及多项式和伯努利模型如何工作的文献：http: [//nlp.stanford.edu/IR-book/html/htmledition/naive-bayes-text-classification-1.html](http://nlp.stanford.edu/IR-book/html/htmledition/naive-bayes-text-classification-1.html)；使用网页上的上一个/下一个按钮浏览文献。

# php - 在 strstr 匹配上显示图像

> ID：10515908
> 
> 赞同：0
> 
> 时间：2012-05-09T12:17:36.083
> 
> 标签：php, string

尝试仅为 Android 用户显示图像，但我不想对其使用任何重定向。

到目前为止，我有这个，但它使用 header() 重定向。

```
if (strstr($_SERVER['HTTP_USER_AGENT'],"Android")) {
        header("Location: app.png");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-09T12:20:52.410

您可以使用[readfile](http://php.net/manual/en/function.readfile.php)在页面中输出图像。确保也发送正确的标题。

例如：

```
if(strstr($_SERVER['HTTP_USER_AGENT',"Android")) 
{
 header('content-type: application/png'); //Let the client know its a png.
 readfile('app.png');
} 
```

这样，使用 Android 向您的页面发出的任何请求都将返回原始图像。如果您想“强制”客户端下载图像，请`content-disposition`同时发送标头。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:20:56.570

这取决于你想做什么。如果您想在 HTML 文档中显示图像，为什么不使用这种代码呢？

```
if (strstr($_SERVER['HTTP_USER_AGENT'],"Android")) {
    echo '<img src="app.png"/>';
} 
```

# php - CakePHP 漂亮的 URL 重定向

> ID：10515909
> 
> 赞同：1
> 
> 时间：2012-05-09T12:17:37.967
> 
> 标签：php, cakephp, pretty-urls

由于我的托管公司的政策，我在 CakePHP 中使用了漂亮的 url（没有 Apache mod 重写）。我的主页在：

[http://stthomasedu.org/index.php/home](http://stthomasedu.org/index.php/home)

如何重定向流量

'http://stthomasedu.org/' 到 'http://stthomasedu.org/index.php/home' ？

我试图编辑 index.php

```
header("Location:http://stthomasedu.org/index.php/home"); 
```

但它不起作用，每次我必须手动输入 URL “http://stthomasedu.org/index.php/home”

有任何想法吗？

已解决：在 C-PANEL 中，我可以选择将我的所有流量重定向到（http://stthomasedu.org）任何位置（现在我将其设置为[http://stthomasedu.org/index.php/home](http://stthomasedu.org/index.php/home)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:41:47.823

由于您使用的是 Apache，因此您可以将[这些行](http://enarion.net/web/htaccess/redirect-domain-to-file/)添加到`.htaccess`：

```
RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_URI} ^$
RewriteCond %{HTTP_HOST} ^stthomasedu.org$
RewriteRule ^$ http://stthomasedu.org/index.php/home [L,R=301] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:21:06.757

你记得在你的 header() 调用之后退出吗？

```
header('Location: /index.php/home');
exit; 
```

# objective-c - 签署永远的应用程序

> ID：10515919
> 
> 赞同：0
> 
> 时间：2012-05-09T12:18:05.700
> 
> 标签：objective-c, ios, xcode

我正在尝试增加我的应用程序部署的工作流程。从构建到签名再到将其安装到应用程序上，最多可能需要 40 分钟。有人可以给我什么建议：

1) 加快编译时间 2) 加快归档过程 3) 加快代码签名

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T13:57:03.813

作为参考，我的 2009 年初配备 8GB RAM 的 2.93GHz C2D iMac 可以在大约 15-20 分钟内归档和签署 2GB 应用程序。我的 2011 年末 1.8GHz i7 MacBook Air 可以更快地完成它。一个 500MB 的应用程序 40 分钟似乎太慢了，除非有其他东西让你的系统陷入困境。尝试使用磁盘工具检查您的磁盘，并使用活动监视器查看正在运行的其他内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T13:19:15.810

很少更改的代码可以导入到库中（也许在其他项目的帮助下不会产生很多目标），这大大提高了编译速度，而签名和归档通常比构建本身更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T13:28:32.297

要考虑的事情是资源的大小。任何资源（例如视频或图像）是否可以压缩并仍然可用？是否有大量文件可以压缩成 zip 文件，然后在首次启动时解压缩？还要检查并确保您在构建过程中没有任何长时间运行的自定义脚本。在您确定资源或构建配置设置不是问题之后，如果您在较旧的硬件上运行，我建议您购买更快的计算机（更多 RAM 和**处理能力）。**

# path-finding - McCabe 的复杂性度量和独立路径

> ID：10515921
> 
> 赞同：1
> 
> 时间：2012-05-09T12:18:16.490
> 
> 标签：path-finding, metrics, code-metrics, cyclomatic-complexity, unstructured-loop

```
int maxValue = m[0][0];         
for (int i = 0; i < N; i++) 
{               
    for (int j = 0; j < N; j++) 
    {                    
        if ( m[i][j] >maxValue )        
        {                 
            maxValue = m[i][j];     
        }                     
    }                    
}                   
cout<<maxValue<<endl;           

int sum = 0;                
for (int i = 0; i < N; i++)     
{                   
    for (int j = 0; j < N; j++)     
    {                    
        sum = sum + m[i][j];            
    }                    
} 
cout<< sum <<endl; 
```

对于上面的代码，如果我们绘制这样的流程图，![流程图](../Images/95b21226e3c0a01d29ef1a511e42ae06.png)基本独立路径将遵循六个
路径 1：1 2 3 10 11 12 13 19
路径 2：1 2 3 10 11 12 13 14 15 18 13 19
路径 3：1 2 3 10 11 12 13 14 15 16 17 15 18 13 19
路径 4：1 2 3 4 5 9 3 10 11 12 13 19
路径 5：1 2 3 4 5 6 8 5 9 3 10 11 12 13 14 15 16 17 15 18 13 19
路径 6： 1 2 3 4 5 6 7 8 5 9 3 10 11 12 13 14 15 16 17 15 18 13 19

所以这里的问题是根据给定的代码路径 2、3、4 无法测试（注意循环中的“N”）。那么没有基本集合中给出的实际执行路径可以吗？...或者根据macabe复杂性指标，我们是否必须更改上面给出的代码。因为我的一位导师说我们必须更改代码，他也说存在非结构化循环，所以我们必须更改代码。（我也没有看到非结构化循环）但我的感觉是，如果我们更改代码，实际输出可能与预期输出不同。所以请有人解释一下

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-10T09:37:10.303

1) McCabe 的复杂度可以计算为决策点的数量 + 1。在您的情况下，有 5 个决策点（节点 3、5、6、13 和 15），这意味着代码片段的 McCabe 复杂度为 5+1 = 6\. 就 McCabe 复杂性而言，6 绝不是太高：当然，*考虑到实现必须提供的功能*，人们仍然可以争辩说它太高了。

2) McCabe 的复杂性与方法/过程的可测试性有关，但与特定路径的可测试性无关。路径可以是可行的（= 存在强制执行通过该路径的变量值）或不可行，但 McCabe 的复杂性很高兴地没有意识到这种复杂性。如果您真的想研究路径的可行性，请记住问题通常是无法确定的，但有许多实用的数据流分析算法可用。

3）*如果我们更改代码实际输出可能与预期输出不同*当然，您不能引入任意更改并希望结果相同。然而，这可能是你的导师想要的，有一种方法可以重组你的代码，这样产生的输出保持不变，并且 McCabe 的复杂性降低了。例如，想想你是否真的需要将计算最大值和总和的任务分开。

# facebook - 获取 Facebook 错误 11

> ID：10515924
> 
> 赞同：2
> 
> 时间：2012-05-09T12:18:22.323
> 
> 标签：facebook, api, blackberry, deprecated

我在 Eclipse 和 FB jar 库（FacebookBlackBerrySDK-v0.8.25.jar）中使用 BBplugin 5.0 版我收到错误 API 错误代码：11 API 错误描述：此方法已弃用错误消息：Display=wap 对话框已被已弃用。您可以通过禁用“july_2012”迁移来临时启用它们。它们将在 2012 年 7 月 1 日永久停止工作。

[http://supportforums.blackberry.com/t5/Java-Development/FaceBook-API-error-code-11-Method-Deprecated/td-p/1671793](http://supportforums.blackberry.com/t5/Java-Development/FaceBook-API-error-code-11-Method-Deprecated/td-p/1671793)

我检查了这个链接..但它没有给出解决方案

我只尝试了 2012 年 7 月的迁移解决方案我还没有尝试过解决方案 display=wap into display=touch

因为我不知道它在哪里

在模拟器上运行时出现以下错误

[http://tinypic.com/view.php?pic=191m3o&s=6](http://tinypic.com/view.php?pic=191m3o&s=6)

```
import com.blackberry.facebook.ApplicationSettings;
import com.blackberry.facebook.Facebook;
import com.blackberry.facebook.FacebookException;
import com.blackberry.facebook.inf.User;

import net.rim.device.api.ui.Field;
import net.rim.device.api.ui.FieldChangeListener;
import net.rim.device.api.ui.component.ButtonField;
import net.rim.device.api.ui.component.Dialog;
import net.rim.device.api.ui.component.EditField;
import net.rim.device.api.ui.container.MainScreen;

public class MyScreen extends MainScreen implements FieldChangeListener{

    private User user;
    String NEXT_URL = "http://www.facebook.com/connect/login_success.html";
    String APPLICATION_ID = "My App id"
    String APPLICATION_SECRET = "My Application Secret";

    String[] PERMISSIONS = Facebook.Permissions.ALL_PERMISSIONS;
    private Facebook fb;
    private ApplicationSettings as;
    private String id="";
    private EditField ef;

    private ButtonField bf;

    public MyScreen(String id ) {

        //      this.user = user;
        this.id = id;

        ef = new EditField("Hi", " ");
        bf = new ButtonField("Publish");
        bf.setChangeListener(this);
        add(ef);
        add(bf);

    }

    private void FBPost(){

        ApplicationSettings as = new ApplicationSettings(NEXT_URL, APPLICATION_ID, APPLICATION_SECRET, PERMISSIONS);
        Facebook fb = Facebook.getInstance(as);

        as = new ApplicationSettings(NEXT_URL, APPLICATION_ID, APPLICATION_SECRET, PERMISSIONS);
        fb = Facebook.getInstance(as);
        try {

            user = fb.getCurrentUser();
            String result = user.publishStatus(ef.getText());

            if ((result != null) && !result.trim().equals("")) {
                Dialog.inform("Publish Success.");
            } else {
                Dialog.inform("Publish Failed.");
            }
        } catch (FacebookException e) {
            // TODO Auto-generated catch block
            Dialog.inform("Exception in myscreen");
            e.printStackTrace();
        }

    }

    public void fieldChanged(Field field, int context) {

        if(field==bf){

            String text = ef.getText();
            FBPost();

        }

    }
} 
```

以上是我的代码请查看

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T14:11:59.213

检查您在 Facebook 上的应用设置。并在迁移中禁用最后三个选项（2012 年 7 月的重大更改，包括带有状态的签入，2012 年 8 月的重大更改）。希望对您有所帮助:)

# google-app-engine - 从 GWT 客户端读取的 AppEngine Datastore 过多

> ID：10515928
> 
> 赞同：0
> 
> 时间：2012-05-09T12:18:43.753
> 
> 标签：google-app-engine, google-cloud-datastore, gwt-rpc

我遇到了与 Google AppEngine 数据存储区和 GWT 客户端相关的问题。

我从 Eclipse（使用 GPE）中的模板项目“Android Connected AppEngine”开始，并通过实现在 Google I/O 上展示的这个（ [http://code.google.com/p/cloud-tasks-io/](http://code.google.com/p/cloud-tasks-io/) ）项目进行了改进2011 ( [http://bradabrams.com/2011/05/google-io-session-overview-android-app-engine-a-developers-dream-combination/](http://bradabrams.com/2011/05/google-io-session-overview-android-app-engine-a-developers-dream-combination/) )。

实施项目后，我将应用程序部署在 AppEngine 和我的 Android 设备上。

问题是从 GWT 客户端读取的数据存储区的数量非常大（1/秒）。我能做些什么呢？我的 GWT 客户端源代码与上面的 CloudTasksIO 项目中的源代码完全相同。

下面是来自应用程序仪表板和日志的 2 个屏幕截图。所有请求都来自我的浏览器。

谢谢。

![我的日志](../Images/9a84f3fe9938c449572b42526686b332.png)

![仪表板](../Images/72f964b84a7989fb010acd5f604c80dc.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-12T08:26:49.443

[`This`](http://code.google.com/p/cloud-tasks-io/source/browse/trunk/CloudTasks-AppEngine/src/com/cloudtasks/client/CloudTasksWidget.java#296)是一个调度程序，它调用一个查询数据存储区的方法，并设置为重复间隔`DELAY_MS`，设置为 1000 [`here`](http://code.google.com/p/cloud-tasks-io/source/browse/trunk/CloudTasks-AppEngine/src/com/cloudtasks/client/CloudTasksWidget.java#214)。

如果您只是按照示例进行操作，则可以增加轮询时间以减少数据存储读取。对于一个真实的项目，您可能希望用户手动请求更新、打开一个频道或使用某种彗​​星解决方案，允许您将更新推送到客户端。

# jquery - Rails 删除 simple_form 中关联的多对多条目

> ID：10515929
> 
> 赞同：1
> 
> 时间：2012-05-09T12:18:46.497
> 
> 标签：jquery, ruby-on-rails-3.1, simple-form

所以我的表格中有这个：

```
= simple_form for @dvd do |f|
  = f.simple_fields_for :dvd_genre do |genre_form|
    = genre_form.input :genre 
```

`dvd.rb`与流派的关系：

```
has_many :dvd_genre2title, :foreign_key => 'dogTag'
has_many :dvd_genre, :through => :dvd_genre2title 
```

dvd_genre.rb：

```
has_many :genre2title, :foreign_key => 'pId' # junction table
has_many :dvd, :through => :genre2title 
```

dvd_genre2title.rb：

```
set_primary_key 'dogTag, pId'
belongs_to :dvd_genre, :foreign_key => 'pId' 
belongs_to :dvd, :foreign_key => 'dogTag' 
```

使用上面的表格，我可以在输入文本字段中获得与特定 dvd 相关的每种类型的列表，我可以在其中更改它们。伟大的。

但我还希望能够做的是有一个删除关联的小按钮，最好是通过 jquery ajax，这样我们就不必提交表单来终止关联。它基本上会删除：

```
DELETE FROM dvd_genre2title WHERE dogTag = @dvd.dogTag AND pId = @genre.id 
```

或者类似的东西。

我对jquery或ajax一无所知，但我很确定这可以完成，只是不知道如何。

帮助表示赞赏。

# jqgrid - JqG rid - 在一个单元格中显示两个文本框

> ID：10515931
> 
> 赞同：0
> 
> 时间：2012-05-09T12:18:55.883
> 
> 标签：jqgrid

是否可以在 JqGrid 的一个单元格中显示两个可编辑的文本框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:46:10.640

抱歉，您的问题评论中的问题描述仍然不包含任何示例，这些示例说明了*为什么*您必须在一个单元格中显示两个文本框。此外，您仍然没有回答这个问题：您使用哪种编辑模式？

问题如下：如果您使用某些软件产品，您可以使用它的许多标准功能。在这种情况下，实现会很短，您可以编写非常好的解决方案编写非常小的代码。如果您是另一方的人，请尝试按照您最初的想象，即一切看起来应该如何，您可以花费很多时间并编写大量代码。从将使用您的站点的用户的角度来看，结果几乎与简单解决方案中的相同。真的需要吗？

例如，如果您将使用[表单编辑，您可以轻松地从](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:form_editing)*隐藏*列中显示其他文本框、复选框或文本区域。`editable: true`jqGrid 自动为所有具有属性的隐藏列创建控件。因此，在这种情况下，您需要做的只是在表单中显示隐藏字段`$.show`（如在[答案](https://stackoverflow.com/a/3405961/315935)中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-18T05:19:44.083

[我在“ trirand.com/blog/jqgrid/jqgrid.html#](http://www.trirand.com/blog/jqgrid/jqgrid.html#) ”中使用了相同的概念；在行编辑 --> 自定义编辑，JqGrid 演示示例中，它在一个单元格上显示三个按钮。

# animation - 将动画添加到从 3D 扫描仪 Kinect 获取的头部和手臂（网格）

> ID：10515936
> 
> 赞同：0
> 
> 时间：2012-05-09T12:19:04.453
> 
> 标签：animation, 3dsmax

我用[了 ReconstructMe](http://reconstructme.net/)

扫描我的前半身（手臂和头部）。我得到的结果是一个 3d 网格。我在 3dsmax 中打开它们。我现在需要做的是为 3d 手臂和头部添加动画/运动。

1.  我认为 ReconstructMe 创建了一个网格。在添加动画之前，我是否需要将该网格转换为 3d 对象？如果是这样，该怎么做？
2.  我需要将头部和手臂分开来为它们添加不同的动画吗？怎么做？

我是 3ds max 的初学者。我正在使用 3ds max 2012，学生版。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-13T11:50:07.100

通常，您会设置骨骼，并使用皮肤或体格修改器将网格链接到骨骼，然后根据需要为骨骼设置动画。

您可以有 1 个网格或单独的网格，具体取决于您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T22:16:10.900

对于设置索具，最好利用这样的教程 [http://www.digitaltutors.com/11/training.php?pid=332](http://www.digitaltutors.com/11/training.php?pid=332)

我发现 Digital Tutors 非常简洁和详细，如果您有足够的耐心，任何人都可以掌握这些概念。根据您喜欢的运动，骨骼的某些部分将需要 FK（正向运动学）或 IK（反向运动学）或在手臂肘等区域的 FK/IK 控制的混合。

角色的某些其他部分也希望能够使用 CAT 控件。在整个装配过程中，要维护的最大基础或理论是层次结构和正确设置控件/链接的过程。

此外，您的网格拓扑需要正确，当从外部源扫描时，您将获得 a. 很多三角形或b。不良边缘流，在装配过程之前，请确保花时间将扫描的拓扑结构调整到它应该处于的正确状态。

# javascript - Javascript原型：对同一个类使用多个名称

> ID：10515947
> 
> 赞同：0
> 
> 时间：2012-05-09T12:19:46.460
> 
> 标签：javascript

```
function test(){
}

test.prototype.doSomething = function () {  
return true;
} 
```

在这个例子中，我可以访问 test.doSomething(); 但是只要输入 t.doSomething(); 就很酷了。是否可以为我的班级测试定义类似别名的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:20:59.787

在另一个变量中引用它。`test`仍将存在。只是变量`t`引用了它。

```
var t = test;
test.doSomething(); //test does something
t.doSomething();    //t does the same thing 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:30:24.763

@Joseph 的答案是正确的，但是您的函数可以通过[关键字](http://pivotallabs.com/users/pjaros/blog/articles/1368-javascript-constructors-prototypes-and-the-new-keyword)`test`作为[构造`new`](http://pivotallabs.com/users/pjaros/blog/articles/1368-javascript-constructors-prototypes-and-the-new-keyword)函数调用也毫无价值：

```
var t = new test();
t.doSomething(); 
```

# python - 在哪里可以找到 python-interpreter 错误代码？

> ID：10515953
> 
> 赞同：2
> 
> 时间：2012-05-09T12:20:04.230
> 
> 标签：python

我有一个与 PHP 应用程序通信的 python 应用程序。现在，我在两边都定义了错误代码，以便它们匹配（即我们可以检测 PHP 中的 python 端故障并做出相应的反应）。

我的问题来自 python 是一种解释语言，原因如下：如果代码有语法问题，那么解释器将返回错误代码。但是这些解释器错误代码将与应用程序错误无法区分。

我不负责 python 代码，但我被要求能够检测最终的 python 解释器故障，以便我可以使用 PHP 通知最终用户。

因此，我需要在出现故障时找到解释器返回码的列表。我在谷歌、python 文档和手册页上都找不到这些信息。

有人知道/知道在哪里可以找到这些信息吗？（另外，如果您对如何解决这个问题有任何其他想法，我很乐意听到他们）

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:23:17.697

最好的解决方案是设置一个始终以特定代码退出的[异常挂钩。](http://docs.python.org/library/sys.html#sys.excepthook)

```
import sys
def excepthook(type, value, traceback):
    sys.exit(X) # X is your exit code
sys.excepthook = excepthook 
```

语法错误应该是无关紧要的——你为什么要在生产中放置一个包含语法错误的脚本？

`1`但无论如何，如果发生未捕获的异常并且`0`一切正常，Python 总是以非零代码退出（显然总是）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:22:56.007

我相信这可能是你需要的。它将错误代码映射到它们各自的字符串消息。

[http://docs.python.org/library/errno.html](http://docs.python.org/library/errno.html)

具体来说：

[http://docs.python.org/library/os.html#os.strerror](http://docs.python.org/library/os.html#os.strerror)

# scala - 通过 Play 减少 Heroku 的 slug 大小！2.0 & 斯卡拉

> ID：10515954
> 
> 赞同：4
> 
> 时间：2012-05-09T12:20:07.647
> 
> 标签：scala, deployment, heroku, playframework, playframework-2.0

我有一个特定的问题，但希望解决方案对于类似问题可能是通用的。

我[有戏！框架 2.0](http://www.playframework.org)项目，使用 Scala。

我正在尝试将新版本部署到[Heroku](http://www.heroku.com)。

然而，对于这个项目，部署失败，因为[slug](http://devcenter.heroku.com/articles/slug-size)太大（101MB）。

现在[这个应用程序很简单](http://github.com/flurdy/shoppinglist)，所以很可能是配置问题。当前部署的版本是/正在使用 Play！2.0-RC3 和我尝试部署的是使用 2.0 版。这可能是个问题？

我曾尝试使用 . [slugignore](https://devcenter.heroku.com/articles/slug-compiler#ignoring_files_with_)文件，忽略 .ivy2、项目/启动等，但无济于事。

关于如何减少蛞蝓大小的任何其他建议？何时使用 Play 2.x 和 Scala？

[这是 git push 输出](https://gist.github.com/2644086)（不包括 Selenium 依赖项可能是一个开始）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:46:13.110

只需按照本页底部的说明进行操作[即可](http://www.playframework.org/documentation/2.0.1/ProductionHeroku)。您只需 fork [https://github.com/heroku/heroku-buildpack-scala并按照](https://github.com/heroku/heroku-buildpack-scala)**Finetunig**部分中的说明将 bin/compile 脚本更改为结尾。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-09T13:03:53.320

**编辑：**根据@JamesWard 的评论，截至本文发表时，代码位于 buildpack 存储库中，但尚未上线。我想它很快就会发布:)

我看到你的申请是几个月前开始的。尝试删除 Heroku 应用程序并从头开始重新创建它。

Heroku 的 buildpack 已经包含 Fynn 列出的减少 slug 大小的更改（昨天测试过），但如果您的应用程序较旧，则可能是未添加更改。当然，您可以修改您的 buildpack，但重新创建应用程序可能更简单。

# jquery - CSS 在可滚动页面上显示距离顶部 20px 的弹出窗口

> ID：10515955
> 
> 赞同：1
> 
> 时间：2012-05-09T12:20:08.363
> 
> 标签：jquery, css, popup, scroll

我有一个带有 2 个 div 的页面 - 左右。左 div 是固定的，右 div 是可滚动的。我在左 div 上有一个按钮，单击时会显示一个弹出窗口（在右 div 上）。现在我希望该弹出窗口始终显示在距页面顶部 20px 的位置，即使用户在右侧 div 上向下滚动也是如此。

目前我正在使用以下代码来定位我的 div：

```
function showPopup()
{
    $('#popup').fadeIn('slow');
    //centering  
    $("#popup").css({  
    "width":'300',
    "height":'300',
    "position": "absolute",  
    "left": 280 ,
    "top":20
    });
} 
```

这将始终在距页面绝对顶部 20px 处显示弹出窗口。因此，如果用户在右侧 div 上向下滚动，他将无法看到弹出窗口（除非他一直向上滚动）。

请指导我如何在相对于当前滚动位置的顶部 20px 处显示 div。

如果需要更多解释或代码，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:22:00.407

如果您将位置从 更改`absolute`为`fixed`您应该能够实现您想要的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:22:40.173

尝试`position:fixed;`不会移动的元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-09T12:30:36.187

position:fixed 应该为您解决问题：

```
function showPopup()
    {
        $('#popup').fadeIn('slow');
        //centering  
        $("#popup").css({  
        "width":'300',
        "height":'300',
        "position": "fixed",  
        "left": 280 ,
        "top":20
        });
    } 
```

# c# - 导入 XML 时什么是 null？

> ID：10515960
> 
> 赞同：0
> 
> 时间：2012-05-09T12:20:19.630
> 
> 标签：c#, xml, visual-studio-2010, nullreferenceexception

我正在尝试从 xml 文件导入数据并按顺序对它们进行排序，但是当我运行它时，我得到“对象引用未设置为对象的实例”。这是我正在使用的代码片段。

```
XElement data = XElement.Load("blockData.xml");

var sortedElements = 
from c in data.Element("BLOCKS").Elements("BLOCK")
orderby (string)c.Element("X") descending,
        (string)c.Element("Y") descending,
        (string)c.Element("Z") descending
        select new
        {
            name1 = (string)c.Element("NAME"),
            X1 = (string)c.Element("X"),
            Y1 = (string)c.Element("Y"),
            Z1 = (string)c.Element("Z")
        };
 foreach (var r in sortedElements)
 Console.WriteLine("X:{0} Y:{1} Z:{2} Name:{3}",
          r.X1, r.Y1, r.Z1, r.name1); 
```

以及 XML 文件中包含的内容的示例

```
<BLOCKS>
  <BLOCK>
   <NAME>B1</NAME>
   <X>0</X>
   <Y>0</Y>
   <Z>0</Z>
  </BLOCK>
</BLOCKS> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:29:27.143

尝试：

```
var sortedElements = 
from c in data.Root.Elements("BLOCK") 
```

因为 BLOCKS 是 XML 的根。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-10T07:41:39.230

在接受了你们中的一些人的建议并研究了类似这样的其他问题之后，我发现您需要显式访问节点的值，如下所示，以克服空引用异常的问题

```
var sortedElements =
    from c in data.DescendantsAndSelf("BLOCKS").Elements("BLOCK")
    orderby 
         c.Element("X").Value descending,
         c.Element("Y").Value descending,
         c.Element("Z").Value descending
    select new
    {
        name1 = (string)c.Element("NAME"),
        X1 = (string)c.Element("X"),
        Y1 = (string)c.Element("Y"),
        Z1 = (string)c.Element("Z")
    };
    foreach (var r in sortedElements)
    Console.WriteLine("X:{0} Y:{1} Z:{2} Name:{3}",
           r.X1, r.Y1, r.Z1, r.name1); 
```

以及将根元素添加到 XML 文件

```
<root>

    <BLOCKS> . . . </BLOCKS>

</root> 
```

# jquery - 超大的jquery插件额外字段

> ID：10515961
> 
> 赞同：0
> 
> 时间：2012-05-09T12:20:30.257
> 
> 标签：jquery, fullscreen, custom-fields, supersized

谁能帮我看看如何在超大的 jquery 插件中为图像添加额外的字段？

目前，您有以下选项：

```
{image : 'IMAGE_PATH', title : 'IMAGE_TITLE', thumb : 'IMAGE_THUMB', url : 'LINK_URL'}, 
```

我想添加两个额外的字段。类别和描述。

```
{image : 'IMAGE_PATH', title : 'IMAGE_TITLE', thumb : 'IMAGE_THUMB', url : 'LINK_URL', description : 'IMAGE_DESCRIPTION', category : 'IMAGE_CATEGORY'}, 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T12:27:22.737

尝试这个：

```
var obj = {image : 'IMAGE_PATH', title : 'IMAGE_TITLE', thumb : 'IMAGE_THUMB', url : 'LINK_URL'}
obj.category = 'IMAGE_CATEGORY';
obj.description = 'DESCRIPTION'; 
```

[http://jsfiddle.net/f4F2B/2/](http://jsfiddle.net/f4F2B/2/)

# android - android中的tablelayout删除tablerow

> ID：10515963
> 
> 赞同：0
> 
> 时间：2012-05-09T12:20:40.040
> 
> 标签：android, tablelayout, tablerow

```
 final TableLayout table = (TableLayout) findViewById(R.id.tableLayout);
    TableRow row = new TableRow(this);

    TextView t2 = new TextView(this);
    t2.setText("test");
    row.addView(t2);

    Button bu = new Button(this);
    bu.setBackgroundResource(R.drawable.del);
    bu.setOnClickListener(new Button.OnClickListener() {

        @Override
        public void onClick(View v) {

            //I need to delete the tablerow
                            //how to do?

        }

    });
    row.addView(bu);

    table.addView(row, new TableLayout.LayoutParams(WC, WC)); 
```

** 我想删除 bu.setOnClickListener 中的 tablerow 如何做 removeViewAt() ，我找不到 indexId **

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:24:17.107

使用[removeView](http://developer.android.com/reference/android/view/ViewGroup.html#removeView%28android.view.View%29)删除 tablerow 为：

```
table.removeView(row); 
```

**注意：**如果他们没有唯一的 id，那么使用：

```
table.removeView(rowIndex); 
```

并通过使用`removeViewAt`

```
for(int i = 0, j < table.getChildCount(); i < j; i++){ 
    // then, you can remove the the row you want... 
    // for instance... 
    TableRow row = getChildAt(i); 
    if( something you want to check ) { 
        removeViewAt(i); 
        // or... 
        removeView(row); 
    } 
} 
```

# linux - Bash循环中的计数器增量不起作用

> ID：10515964
> 
> 赞同：141
> 
> 时间：2012-05-09T12:20:49.880
> 
> 标签：linux, bash, shell, scripting, counter

我有以下简单的脚本，我正在运行一个循环并想要维护一个`COUNTER`. 我无法弄清楚为什么计数器没有更新。是因为创建了子shell吗？我怎样才能解决这个问题？

```
#!/bin/bash

WFY_PATH=/var/log/nginx
WFY_FILE=error.log
COUNTER=0
grep 'GET /log_' $WFY_PATH/$WFY_FILE | grep 'upstream timed out' | awk -F ', ' '{print $2,$4,$0}' | awk '{print "http://domain.com"$5"&ip="$2"&date="$7"&time="$8"&end=1"}' | awk -F '&end=1' '{print $1"&end=1"}' |
(
while read WFY_URL
do
    echo $WFY_URL #Some more action
    COUNTER=$((COUNTER+1))
done
)

echo $COUNTER # output = 0 
```

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2012-05-09T12:30:31.163

首先，您没有增加计数器。更改`COUNTER=$((COUNTER))`为`COUNTER=$((COUNTER + 1))`或`COUNTER=$[COUNTER + 1]`将增加它。

其次，正如您推测的那样，将子shell 变量反向传播给被调用者会比较棘手。子shell 中的变量在子shell 之外不可用。这些是子进程的本地变量。

解决它的一种方法是使用临时文件来存储中间值：

```
TEMPFILE=/tmp/$$.tmp
echo 0 > $TEMPFILE

# Loop goes here
  # Fetch the value and increase it
  COUNTER=$[$(cat $TEMPFILE) + 1]

  # Store the new value
  echo $COUNTER > $TEMPFILE

# Loop done, script done, delete the file
unlink $TEMPFILE 
```

* * *

## 回答 #2

> 赞同：93
> 
> 时间：2012-10-18T19:17:53.897

```
COUNTER=1
while [ Your != "done" ]
do
     echo " $COUNTER "
     COUNTER=$[$COUNTER +1]
done 
```

TESTED BASH: Centos, SuSE, RH

* * *

## 回答 #3

> 赞同：49
> 
> 时间：2014-10-06T09:41:20.507

```
COUNTER=$((COUNTER+1)) 
```

is quite a clumsy construct in modern programming.

```
(( COUNTER++ )) 
```

looks more "modern". You can also use

```
let COUNTER++ 
```

if you think that improves readability. Sometimes, Bash gives too many ways of doing things - Perl philosophy I suppose - when perhaps the Python "there is only one right way to do it" might be more appropriate. That's a debatable statement if ever there was one! Anyway, I would suggest the aim (in this case) is not just to increment a variable but (general rule) to also write code that someone else can understand and support. Conformity goes a long way to achieving that.

HTH

* * *

## 回答 #4

> 赞同：17
> 
> 时间：2012-05-09T12:23:37.233

尝试使用

```
COUNTER=$((COUNTER+1)) 
```

代替

```
COUNTER=$((COUNTER)) 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2012-05-09T13:59:04.353

Instead of using a temporary file, you can avoid creating a subshell around the `while` loop by using process substitution.

```
while ...
do
   ...
done < <(grep ...) 
```

By the way, you should be able to transform all that `grep, grep, awk, awk, awk` into a single `awk`.

Starting with Bash 4.2, there is a `lastpipe` option that

> runs the last command of a pipeline in the current shell context. The lastpipe option has no effect if job control is enabled.

```
bash -c 'echo foo | while read -r s; do c=3; done; echo "$c"'

bash -c 'shopt -s lastpipe; echo foo | while read -r s; do c=3; done; echo "$c"'
3 
```

* * *

## 回答 #6

> 赞同：12
> 
> 时间：2012-05-09T14:17:02.807

I think this single awk call is equivalent to your `grep|grep|awk|awk` pipeline: please test it. Your last awk command appears to change nothing at all.

The problem with COUNTER is that the while loop is running in a subshell, so any changes to the variable vanish when the subshell exits. You need to access the value of COUNTER in that same subshell. Or take @DennisWilliamson's advice, use a process substitution, and avoid the subshell altogether.

```
awk '
  /GET \/log_/ && /upstream timed out/ {
    split($0, a, ", ")
    split(a[2] FS a[4] FS $0, b)
    print "http://example.com" b[5] "&ip=" b[2] "&date=" b[7] "&time=" b[8] "&end=1"
  }
' | {
    while read WFY_URL
    do
        echo $WFY_URL #Some more action
        (( COUNTER++ ))
    done
    echo $COUNTER
} 
```

* * *

## 回答 #7

> 赞同：12
> 
> 时间：2013-07-22T13:06:41.050

```
count=0   
base=1
(( count += base )) 
```

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2015-11-05T04:59:46.243

minimalist

```
counter=0
((counter++))
echo $counter 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2017-05-18T18:58:07.613

This is all you need to do:

```
$((COUNTER++)) 
```

Here's an excerpt from *Learning the bash Shell*, 3rd Edition, pp. 147, 148:

> *bash* arithmetic expressions are equivalent to their counterparts in the Java and C languages.[9] Precedence and associativity are the same as in C. Table 6-2 shows the arithmetic operators that are supported. Although some of these are (or contain) special characters, there is no need to backslash-escape them, because they are within the $((...)) syntax.

..........................

> The ++ and - operators are useful when you want to increment or decrement a value by one.[11] They work the same as in Java and C, e.g., *value*++ increments value by 1\. This is called *post-increment*; there is also a *pre-increment*: ++*value*. The difference becomes evident with an example:

```
$ i=0
$ echo $i
0
$ echo $((i++))
0
$ echo $i
1
$ echo $((++i))
2
$ echo $i
2 
```

See [http://www.safaribooksonline.com/a/learning-the-bash/7572399/](http://www.safaribooksonline.com/a/learning-the-bash/7572399/)

* * *

## 回答 #10

> 赞同：3
> 
> 时间：2020-01-16T18:13:16.173

There were two conditions that caused the expression `((var++))` to fail for me:

1.  If I **set bash to strict mode** (`set -euo pipefail`) and if I start my **increment at zero** (0).

2.  Starting at one (1) is fine but zero causes the increment to return "1" when evaluating "++" which is a non-zero return code failure in strict mode.

I can either use `((var+=1))` or `var=$((var+1))` to escape this behavior

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-01-14T02:32:31.123

This is a simple example

```
COUNTER=1
for i in {1..5}
do   
   echo $COUNTER;
   //echo "Welcome $i times"
   ((COUNTER++));    
done 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2020-01-22T15:01:25.957

Source script has some problem with subshell. First example, you probably do not need subshell. But We don't know what is hidden under "Some more action". The most popular answer has hidden bug, that will increase I/O, and won't work with subshell, because it restores couter inside loop.

Do not fortot add '\' sign, it will inform bash interpreter about line continuation. I hope it will help you or anybody. But in my opinion this script should be fully converted to AWK script, or else rewritten to python using regexp, or perl, but perl popularity over years is degraded. Better do it with python.

Corrected Version without subshell:

```
#!/bin/bash
WFY_PATH=/var/log/nginx
WFY_FILE=error.log
COUNTER=0
grep 'GET /log_' $WFY_PATH/$WFY_FILE | grep 'upstream timed out' |\
awk -F ', ' '{print $2,$4,$0}' |\
awk '{print "http://example.com"$5"&ip="$2"&date="$7"&time="$8"&end=1"}' |\
awk -F '&end=1' '{print $1"&end=1"}' |\
#(  #unneeded bracket
while read WFY_URL
do
    echo $WFY_URL #Some more action
    COUNTER=$((COUNTER+1))
done
# ) unneeded bracket

echo $COUNTER # output = 0 
```

Version with subshell if it is really needed

```
#!/bin/bash

TEMPFILE=/tmp/$$.tmp  #I've got it from the most popular answer
WFY_PATH=/var/log/nginx
WFY_FILE=error.log
COUNTER=0
grep 'GET /log_' $WFY_PATH/$WFY_FILE | grep 'upstream timed out' |\
awk -F ', ' '{print $2,$4,$0}' |\
awk '{print "http://example.com"$5"&ip="$2"&date="$7"&time="$8"&end=1"}' |\
awk -F '&end=1' '{print $1"&end=1"}' |\
(
while read WFY_URL
do
    echo $WFY_URL #Some more action
    COUNTER=$((COUNTER+1))
done
echo $COUNTER > $TEMPFILE  #store counter only once, do it after loop, you will save I/O
)

COUNTER=$(cat $TEMPFILE)  #restore counter
unlink $TEMPFILE
echo $COUNTER # output = 0 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-05-09T12:26:40.147

看来您没有更新`counter`脚本，请使用`counter++`

# jquery - jQuery 操作仅一次（JSF，Primefaces）

> ID：10515968
> 
> 赞同：0
> 
> 时间：2012-05-09T12:20:56.370
> 
> 标签：jquery, jsf, primefaces

我有一个要修改字体大小的 DataTable。用户可以使用 selectOneMenue 组件设置字体大小。

现在，如果我用 jQuery 更新它，这只发生在第一次。如果我想通过 selectOneMenue 更改字体大小，则字体大小设置为默认值，如果我进行刷新 (F5)，则字体大小将成功更改。但我不想要这种行为。

所以我在脚本部分添加了 reload() 函数。如果我这样做，如果我想重新加载，我总是会收到这条 Firefox 消息.....然后它会以默认大小呈现表格，并在呈现正确的字体大小后不久。所以最终产品没问题，但我不希望出现这个必须提交的 firefox 消息，我还想关闭使用默认字体大小的表格的预渲染。

现在我有这个代码

```
<script>
        jQuery(document)
                .ready(
                        function() {
                            jQuery('#dtSummary')
                                    .css('cssText',
                                            'font-size:#{summaryBean.selectedFont}px !important');

                        });

        function changeFont() {
            document.getElementById("dtSummary").style.fontSize = "#{summaryBean.selectedFont}px !important;}";
            window.location.reload(true);
        }
    </script>

<h:form id="form" prependId="false">
        <h:panelGroup>
            <h:panelGrid columns="3" styleClass="rainstar-form-inline"
                columnClasses="rainstar-form-column-left rainstar-form-column-right">

                <p:selectOneMenu id="targ" effect="fade"
                    styleClass="rainstar-input-small2"
                    value="#{summaryBean.selectedFont}"
                    valueChangeListener="#{summaryBean.selectionFont_change}"
                    onchange="changeFont()">
                    <f:selectItems value="#{summaryBean.fontCollection}" />
                    <p:ajax update="dtSummary" />
                </p:selectOneMenu>
            </h:panelGrid>
            <p:commandButton value="#{msg.button_print}" icon="ui-icon-print"
                styleClass="rainstar-button-right"
                action="#{summaryBean.generatePdf()}" ajax="false" />

            <p:dataTable id="dtSummary" styleClass="rainstar-form-margin-top"
                value="#{summaryBean.eintragList}"
                selection="#{summaryBean.selectedEintrag}" selectionMode="multiple"
                var="eintrag" rowKey="#{eintrag.it1}">

                <p:column id="header" styleClass="ui-state-default">
                    <div class="ui-dt-c">#{eintrag.it1}</div>
                </p:column>

                <p:column styleClass="rainstar-table-item"
                    headerText="#{tableBundleBean.summary_table_nozzles} [mm]">
                    <h:outputText value="#{eintrag.it2}" />
                </p:column>

            </p:dataTable>

        </h:panelGroup>

    </h:form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:35:53.550

你在这里真的不需要jquery。尝试：

```
<p:column styleClass="rainstar-table-item"
          headerText="#{tableBundleBean.summary_table_nozzles} [mm]">
   <h:outputText value="#{eintrag.it2}" style="font-size:#{summaryBean.selectedFont}px !important"/>
</p:column> 
```

例如，如果您出于性能原因想要避免服务器往返和渲染，那么 Jquery 将是有意义的。在这种情况下，selectMenu 小部件不应导致页面刷新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:46:47.310

我不太确定将为您的选择框生成哪个 ID，但假设它会获得 id 'targ'，类似以下的内容应该可以工作：

```
$(document).ready(
  changeFontSize
)

function changeFontSize() {
  $('#dtSummary').css('fontSize', $('.targ').val() + 'px !important');
} 
```

# javascript - 从javascript中的匿名函数访问类成员

> ID：10515973
> 
> 赞同：2
> 
> 时间：2012-05-09T12:21:06.560
> 
> 标签：javascript, function, scope, anonymous

我知道当我需要访问类成员函数时，我必须在 JS 类中保留对*this的引用。*但是，我目前正在努力处理以下（简化的）代码：

```
function MySimpleClass(p, arr) {
this.proxy = p;
this.contentArray = arr;

this.doStuff = function(callback) {
    var self = this;

    // at this point this.contentArray holds data

    this.proxy.calculate(function(data) {

        // inside the anonymous function this.contentArray is undefined

        var el = self.contentArray[0]; // <-- will fail
        // do something with el

        callback.call(this, data); 
    });
}} 
```

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:33:27.017

您的班级的此示例代码正在运行：

```
var c = new MySimpleClass({calculate: function(f) {f()}}, [1,2]);
c.doStuff(function(){alert("hi");}) 
```

我假设您的代码不起作用，因为您还在代理类本身中定义了一个“自我”变量。您可以通过将班级中的“self”重命名为任意名称来检查：“selfXXX”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:38:06.840

在这个匿名函数上发送 contentArray 作为参数，而不是只发送 'data' 怎么样？

# android - 不同平台的rssi值差异

> ID：10515977
> 
> 赞同：0
> 
> 时间：2012-05-09T12:21:10.847
> 
> 标签：android, rssi

目前我正在使用 Rssi 进行门定位。我使用 inSSIDer 程序和我的 android 手机我自己的程序使用 WifiManager 获得不同的 rssi 值。

我想知道为什么笔记本电脑的 rssi 值和 android 手机的 rssi 值有这么大的差异？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T20:10:49.577

因为 RSSI 没有以任何绝对方式定义，不同的 Wi-Fi 适配器和不同的 Wi-Fi 驱动程序和不同的 Wi-Fi 框架可以以不同的方式报告值。正如 IEEE 802.11 标准所说，RSSI 值只能“以相对方式”使用，这意味着您应该只使用它来比较使用相同适配器完成的测量 - 不要使用它来比较使用不同适配器完成的测量。

# android - 集成和自动化 iOS、Android 和 Blackberry 的构建过程

> ID：10515981
> 
> 赞同：2
> 
> 时间：2012-05-09T12:21:50.080
> 
> 标签：android, ios, blackberry, build, continuous-integration

哪些工具可用于自动化针对 iOS（Objective C）、Android（Android 的 Java SDK）、Blackberry（BB 的 Java SDK）开发的原生移动应用程序的构建过程？

1.  请分享您对版本控制系统、构建脚本工具、集成的想法。
2.  是否可以为所有平台设置一个自动构建过程？
3.  设备上的自动部署怎么样。这可以实现吗？
4.  自动执行单元测试
5.  请分享任何案例研究的链接，可能相关的文件。

提前致谢。

# c# - c# / LINQ - 在一段时间内平均每天、每周和每月的查询次数

> ID：10515984
> 
> 赞同：1
> 
> 时间：2012-05-09T12:21:55.603
> 
> 标签：c#, linq

我有以下 LINQ 查询：

```
model.TotalEnquiries = enquiriesDbContext.Enquiries.Where(x => x.CustomerAccountNumber == formModel.CustomerAccNo)
                   .Where(x => x.EnquiryDate >= startDate).Where(x => x.EnquiryDate <= endDate).Count(); 
```

这很好用，因为它会在 2 个指定的时间段之间返回一个值，比如 60，但我想做的是找到这段时间内每天、每周和每月的平均查询数，是否有可能林克？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-09T12:24:56.787

好吧，鉴于您自己指定了时间段，这很容易：

```
var averagePerDay = total / (endDate - startDate).TotalDays; 
```

编辑：我看到您正在更改球门柱...如果您想*在一个查询中*获得不同日期范围的平均值，那么这将很棘手。就个人而言，除非有大量数据，否则我可能会获取适当范围内的所有查询日期，然后在本地处理它，这可能比尝试最小化 SQL 查询的数量同时仍然保持智能更容易.

在任意时期按月平均在概念上很棘手：（比如说）2 月 16 日到 4 月 7 日期间有多少个月？涉及三个不同的月份长度。

当然，您的意思可能是“按天平均，按月分组”（例如，1 月按天平均，2 月按天平均”等），这完全不同。这就是为什么您需要精确地了解需求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T12:26:59.133

您需要使用 GROUP BY 按天对条目进行分组，[在此处](http://msdn.microsoft.com/en-us/library/bb384063.aspx)记录（带有示例）

否则，您将需要通过 SUM/COUNT 进行平均，这使您对分布、趋势等的了解较少。

# php - PHP动态图片

> ID：10515985
> 
> 赞同：4
> 
> 时间：2012-05-09T12:21:58.103
> 
> 标签：php, codeigniter

我接管了一个 CodeIgniter PHP 站点，该站点动态生成调整大小的图像和缩略图。

`img`以下是网站中生成 100 x 100 像素缩略图的标记示例：

```
<img src="/media/image/ImageName.jpg/100/100" /> 
```

这是通过使用帮助程序生成的：

```
echo img('media/image/ImageName.jpg/100/100'); 
```

媒体控制器中的图像函数有一些逻辑，它首先检查一个缓存文件夹，然后提供缓存的图像（如果存在）。

看起来这仍然不是一种优雅的方法，看看 SilverStripe 等其他 PHP 框架的做法，最好是这样做：

```
echo img_link('ImageName.jpg', 100, 100); 
```

帮助程序中的这个新`img_link`函数将首先检查缓存的图像并将链接直接写入图像文件或生成新图像并将直接链接传递给 html。

我的想法是，如果 PHP 服务于每一个`img`使用这种类型的代码

```
$this->output->set_content_type('jpeg')->set_output(file_get_contents($file_path)); 
```

它总是效率低下。

有人想吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T12:35:50.797

我同意，我已经完全按照您的建议完成了（如果链接已经缓存，则直接编写链接）并且效果很好。

我唯一认为你会被抓住的情况是，如果你的 html 被缓存并且你已经删除了缓存的图像，那么到图像文件的直接链接现在被破坏了。

就我而言，我从来没有删除缓存的图像，所以还没有删除。

我认为这是一个问题的唯一其他情况是您是否有私人图像。在这种情况下，php 需要在显示图像之前首先检查谁有权限，您不能只将缓存文件作为直接链接提供，因为人们可以共享该直接链接，并且安全性将不再适用。

如果您确实需要这样做，并且您能够在 apache 上安装模块（假设您使用的是 apache），那么有一个模块“x-sendfile”可以让您将文件传递过程移交给 apache，而不是通过php。这对于 php 可能超时的大文件等很有用

# windows-phone-7 - WP7 MVVMCross 检测 ViewModels 中的 RequestClose 或 BackKeyPressed

> ID：10515990
> 
> 赞同：2
> 
> 时间：2012-05-09T12:22:12.923
> 
> 标签：windows-phone-7, mvvmcross

我有两种看法。我从一个导航到另一个，在另一个我调用 RequestClose 或使用返回键。如何在第一个 ViewModel 中检测到这些事件？

问候，丹

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:03:03.967

默认情况下，MvvmCross 框架不会告诉您有关此事件的信息。

你需要想办法让 ViewModel 知道它需要做某事。

你如何做到这一点取决于你正在寻找的实际事件是什么。

例如：

*   如果第二个 ViewModel 更改了底层模型中的一些数据，那么这可能会通过来自数据层的事件传递回第一个 ViewModel。

*   如果第二个 ViewModel 以某种方式改变了一些更短暂的东西（更少的模型），那么你可能会实现某种消息传递机制（使用 TinyMessenger 之类的东西）来允许 ViewModel 进行通信。

你能再说说你的活动是什么吗？

* * *

更新......作为一个例子，这是我可能为 facebook 做的事情的类型 - [https://github.com/slodge/facebookExample](https://github.com/slodge/facebookExample)（WP7 只签入！）

# python - Qt：曲线编辑器或类似的东西？

> ID：10515992
> 
> 赞同：1
> 
> 时间：2012-05-09T12:22:21.500
> 
> 标签：python, qt, pyqt, curve, curve-fitting

我在 Python 应用程序中通过 PyQt 使用 Qt4.8。一切正常 :-) 但我需要向用户展示某种曲线编辑器，这些小部件常见于图像编辑程序中，用于调整对比度或颜色或类似的东西。

所以我基本上需要一个小部件，它显示一条带有轴和类似东西的曲线，用户应该能够将点“拖放”到曲线上并调整曲线。

我以为我可以为此使用 matplotlib，但据我所知，它不提供任何“编辑”功能......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-04T05:25:01.750

我用OpenGL小部件写了一个Qt曲线编辑器，你可以试试。

[http://www.shannap.com/qt-curve-editor-en.html](http://www.shannap.com/qt-curve-editor-en.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:33:45.670

您可能想要的是 qwt 工具箱。这就像 Qt 的 matplotlib。

[http://qwt.sourceforge.net/](http://qwt.sourceforge.net/)

它具有各种简洁的绘图和图形功能。尽管如果不创建自己的子类，您将无法获得所需的确切内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T17:56:24.950

你可以用 matplotlib 做曲线编辑器。例如，请参阅此 YouTube 视频：[http ://www.youtube.com/watch?v=nCv_MhaeFo8](http://www.youtube.com/watch?v=nCv_MhaeFo8)

然后检查事件处理示例： http: [//matplotlib.sourceforge.net/examples/event_handling/index.html](http://matplotlib.sourceforge.net/examples/event_handling/index.html)

# symfony - Symfony2 Doctrine Parser 错误仅与 DQL

> ID：10515994
> 
> 赞同：0
> 
> 时间：2012-05-09T12:22:37.503
> 
> 标签：symfony, doctrine-orm

我只有 DQL 有一个奇怪的错误，存储库查询有效。当我移动到 prod 环境时，这两个查询都在 localhost 中工作：

```
 $entity = $em->getRepository('PanasonicTestEtAvisBundle:Review')->findAll(); 
```

这行得通。

```
 $entity = $em->createQuery('SELECT t.id FROM PanasonicTestEtAvisBundle:Review t')->getResult(); 
```

这失败并出现以下错误：

```
Parse error: syntax error, unexpected $end in /home/sites_web/client/xxx/vendor/doctrine/lib/Doctrine/ORM/Query/Parser.php on line 1660 
```

第 1660 行有：

```
if ($this->_isAggregateFunction($this->_lexer->lookahead['type'])) {
            return $this->AggregateExpression();
        } else {
            return $this->FunctionDeclaration();
        } 
```

我的日志：

```
[2012-05-09 14:04:49] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Component\HttpKernel\EventListener\ProfilerListener::onKernelRequest". [] []
[2012-05-09 14:04:49] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Bundle\FrameworkBundle\EventListener\RouterListener::onEarlyKernelRequest". [] []
[2012-05-09 14:04:49] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Bundle\FrameworkBundle\EventListener\SessionListener::onKernelRequest". [] []
[2012-05-09 14:04:49] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Component\Security\Http\Firewall::onKernelRequest". [] []
[2012-05-09 14:04:49] security.DEBUG: Read SecurityContext from the session [] []
[2012-05-09 14:04:49] security.DEBUG: Reloading user from user provider. [] []
[2012-05-09 14:04:49] security.DEBUG: Username "user" was reloaded from user provider. [] []
[2012-05-09 14:04:49] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Bundle\FrameworkBundle\EventListener\RouterListener::onKernelRequest". [] []
[2012-05-09 14:04:49] request.INFO: Matched route "review_edit" (parameters: "_controller": "Panasonic\TestEtAvisBundle\Controller\BOReviewController::editAction", "id": "1", "productid": "1", "_route": "review_edit") [] []
[2012-05-09 14:04:49] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Bundle\AsseticBundle\EventListener\RequestListener::onKernelRequest". [] []
[2012-05-09 14:04:49] event.DEBUG: Notified event "kernel.request" to listener "Knp\Bundle\PaginatorBundle\Subscriber\SlidingPaginationSubscriber::onKernelRequest". [] []
[2012-05-09 14:04:49] event.DEBUG: Notified event "kernel.controller" to listener "Symfony\Bundle\FrameworkBundle\DataCollector\RequestDataCollector::onKernelController". [] []
[2012-05-09 14:04:49] event.DEBUG: Notified event "kernel.controller" to listener "Sensio\Bundle\FrameworkExtraBundle\EventListener\ControllerListener::onKernelController". [] []
[2012-05-09 14:04:49] event.DEBUG: Notified event "kernel.controller" to listener "Sensio\Bundle\FrameworkExtraBundle\EventListener\ParamConverterListener::onKernelController". [] []
[2012-05-09 14:04:49] event.DEBUG: Notified event "kernel.controller" to listener "Sensio\Bundle\FrameworkExtraBundle\EventListener\TemplateListener::onKernelController". [] []
[2012-05-09 14:04:49] event.DEBUG: Notified event "kernel.controller" to listener "Acme\DemoBundle\ControllerListener::onKernelController". [] []
[2012-05-09 14:04:49] event.DEBUG: Notified event "kernel.controller" to listener "JMS\SecurityExtraBundle\Controller\ControllerListener::onCoreController". [] [] 
```

我最终需要使用 DQL 来获取与 knp 分页包和连接等一起使用的查询......任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T05:30:33.120

结果在使用 CuteFTP 将文件传输到服务器时，1 个或多个文件没有完全传输，因此导致了这个奇怪的错误。它现在应该正常工作。

# jquery - 如何停止使用 Jquery 的链接的反向传播

> ID：10515999
> 
> 赞同：0
> 
> 时间：2012-05-09T12:23:01.410
> 
> 标签：jquery, events

如何停止调用父绑定？

例子：

```
<div id="test">
    <a href="#" id="link" onclick="alert('testing')">TEST</a>
</div> 
```

```
$('#test').on('click',function(){
   alert('I dont want it to fire it up!');        
}) 
```

如果我单击#link，我只想触发#link 中的onclick，而不是#test 上的事件

感谢您的回复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-09T12:25:16.200

使用[stopPropagation](http://api.jquery.com/event.stopPropagation/)

```
 event.stopPropagation(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T12:27:40.723

`return false`在您的事件处理程序中执行 a将防止传播。不幸的是，它也会阻止链接的默认行为；例如，在您的情况下加载`<page url here>#`：

```
<a href="#" id="link" onclick="alert('testing'); return false;">TEST</a> 
```

# 编辑

[jQuery.event](http://api.jquery.com/category/events/event-object/)对象包含一个有趣的属性，在冒泡事件的情况下，该属性`target`将包含接收到实际点击的元素。如果有意义，您可以使用它：

```
$('#test').on('click', function(e) {
    if ($(e.target).is("#link")) {
        alert('#link was clicked; comment out this alert to ignore it');
    }
    else {
        alert('you clicked me but you did not click #link');
    }
}); 
```

# [小提琴](http://jsfiddle.net/salman/gFp2G/)

顺便说一句，我想知道混合内联和无障碍事件处理程序是否有理由？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T12:25:06.200

[`stopPropagation()`](http://api.jquery.com/event.stopPropagation/)防止事件传播。但是，您必须将事件传递给事件处理程序才能执行此操作。

```
$('#test').on('click',function(e){
    e.stopPropagation();
}) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-09T12:34:05.550

stopPropagation() 是 jQuery 内外的有效 javascript 函数。jQuery 有助于支持 IE，但您也可以只使用 cancelBubble 来支持 IE。

```
document.getElementById('link').onclick = function(e) {
  if (e && e.stopPropagation) e.stopPropagation(); else window.event.cancelBubble = true;
} 
```