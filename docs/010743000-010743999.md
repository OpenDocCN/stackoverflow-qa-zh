# StackOverflow 问答 10743000-10743999

# rest - 如何在 CXF 中基于 JAX-RS 的服务的 RequestHandler 中获取参数名称和值

> ID：10743000
> 
> 赞同：2
> 
> 时间：2012-05-24T18:09:15.750
> 
> 标签：rest, cxf, jax-rs

我正在 CXF 中创建一个基于 JAX-RS 的 Web 服务，我想获取传递给`RequestHandler`注册为`<jaxrs:provider>`.

我想要处理程序中的参数名称和相应的值，这是我的代码：

```
public class SampleRequestHandler implements RequestHandler {

@Override
public Response handleRequest(Message arg0, ClassResourceInfo arg1) {
    OperationResourceInfo resourceInfo = arg0.getExchange().get(OperationResourceInfo.class);
    String name = resourceInfo.getMethodToInvoke().getName();

    return null;
    }
} 
```

我的基于 JAX-RS 的服务：

```
@Service("bookService")
@Path("/bookstore")
public class BookStore {

    @POST
    @Path("/books")
    @Produces({ "application/xml" })
    @Consumes({ "application/xml" })
    public Book addBook(Book book) {
        return book;
    }

} 
```

以及我`beans.xml`注册处理程序和宁静服务的地方：

```
<context:component-scan base-package="com.tutorial.cxf.jaxrs.service"/>

<bean id="sampleHandler" class="com.tutorial.cxf.jaxrs.interceptors.SampleRequestHandler"/>
<jaxrs:server id="restContainer" address="/">
    <jaxrs:serviceBeans>
        <ref bean="bookService"/>
    </jaxrs:serviceBeans>
    <jaxrs:providers>
        <ref bean="sampleHandler"/>
    </jaxrs:providers>
</jaxrs:server> 
```

有人已经处理过这个案子了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-25T17:01:48.583

尝试采用以下方法时遇到了同样的问题：

```
List<Parameter> params = ori.getParameters(); 
```

它只返回参数的名称（在方法中声明的名称）而不是值。

[CXF](http://cxf.apache.org/docs/jax-rs-filters.html#JAX-RSFilters-OverridingrequestURI,queryandheaders)官方文档只展示了一点点，但正如解释的那样，您始终可以获取消息的 QUERY_STRING 值并对其进行解析。

您可以在处理程序/过滤器中执行以下操作：

```
String queryString = (String) arg0.get(Message.QUERY_STRING);
MultivaluedMap<String, String> queryMap = JAXRSUtils.getStructuredParams(queryString, "&", false, false); 
```

并在对 queryMap 集合进行循环之后。该地图将包含您的所有查询参数，即使是未在 BookStore 类的 Rest 方法中声明的参数。

# ruby - 初始化哈希的最小值和最大值

> ID：10743004
> 
> 赞同：-1
> 
> 时间：2012-05-24T18:09:31.507
> 
> 标签：ruby

```
class Airplane
  attr_reader :weight, :aircraft_type
  attr_accessor :speed, :altitude, :course

  def initialize(aircraft_type, options = {})
    @aircraft_type  = aircraft_type.to_s 
    @course = options[:course.to_s + "%"] || rand(1...360).to_s + "%" 
  end 
```

如何使用`initialize`从 1 到 360 的散列的最小和最大允许值？

例子：

```
airplane1 = Airplane.new("Boeing 74", course: 200)
p radar1.airplanes
=> [#<Airplane:0x000000023dfc78 @aircraft_type="Boeing 74", @course="200%"] 
```

但是，如果我将课程值设置为 370，则飞机 1 不应该工作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T18:27:00.927

我认为你的意思是你不想让人们通过类似的东西，如果它是无效`{course: '9000%'}`的`options`，你想出错。如果是这种情况，您可以测试它是否在范围内：

```
def initialize(aircraft_type, options = {})
  @aircraft_type  = aircraft_type.to_s 
  allowed_range = 1...360
  passed_course = options[:course]
  @course = case passed_course
    when nil
      "#{rand allowed_range}%"
    when allowed_range
      "#{passed_course}%"
    else 
      raise ArgumentError, "Invalid course: #{passed_course}"
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T18:33:30.330

我敢肯定这可以重构，但这就是我想出的

```
class Plane

  attr_reader :weight, :aircraft_type
  attr_accessor :speed, :altitude, :course

  def initialize(aircraft_type, options = {})
    @aircraft_type = aircraft_type.to_s 
    @course = options[:course] || random_course
    check_course  
  end

  def check_course
   if @course < 1 or @course > 360
      @course = 1
      puts "Invalid course. Set min"
     elsif @course > 360
      @course = 360
      puts "Invalid course. Set max"
     else
      @course = @course
     end
   end

   def random_course
    @course = rand(1..360)
   end

end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T18:34:31.470

`course`是一个角度，不是吗？它不应该是它`0...360`的有效范围吗？为什么最后的“％”？为什么使用字符串而不是整数？

无论如何，这就是我要写的：

```
@course = ((options[:course] || rand(360)) % 360).to_s + "%" 
```

# asp.net - 如何加密 web.config 连接字符串

> ID：10743008
> 
> 赞同：0
> 
> 时间：2012-05-24T18:09:55.833
> 
> 标签：asp.net, iis-7, web-config, connection-string

我正在尝试在我的 web.config 中加密连接字符串。我遵循了微软的指导方针，但它不起作用。[http://msdn.microsoft.com/en-us/library/ff650304.aspx#paght000006_step3](http://msdn.microsoft.com/en-us/library/ff650304.aspx#paght000006_step3)

在我得到“加密配置部分成功！”之后 在命令提示符下。我从 web.config 中删除了“connectionStrings”部分，并将新添加的“connectionStrings”与加密数据一起保存。

我有两个用于 Entity Framework 的 MSSQL 数据库连接字符串，但在运行时编译时出现错误，提示“**在配置中找不到指定的命名连接，不打算与 EntityClient 提供程序一起使用，或者无效。** ”

当您打开模型 edmx 文件并从数据库更新模型时。Visual Studio 显示错误消息“**无法使用提供程序 RSAProtectedConfigurationProvider 解密......无法打开 RSA 密钥容器。”**

```
 <connectionStrings configProtectionProvider="RsaProtectedConfigurationProvider">
      <EncryptedData Type="http://www.w3.org/2001/04/xmlenc#Element"
        xmlns="http://www.w3.org/2001/04/xmlenc#">
        <EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#tripledes-cbc" />
        <KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
          <EncryptedKey xmlns="http://www.w3.org/2001/04/xmlenc#">
            <EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#rsa-1_5" />
            <KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
              <KeyName>Rsa Key</KeyName>
            </KeyInfo>
            <CipherData>
              <CipherValue>..........</CipherValue>
            </CipherData>
          </EncryptedKey>
        </KeyInfo>
        <CipherData>
          <CipherValue>........</CipherValue>
        </CipherData>
      </EncryptedData>
    </connectionStrings> 
```

-------- 解决了，下面回答。------

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T18:24:17.897

看起来创建密钥的帐户与运行应用程序的帐户不同。您是否确保适当的帐户可以访问密钥存储？从你发的那篇文章...

> 授予对 ASP.NET 应用程序标识的访问权 a.如果您不确定要使用哪个标识，请使用以下代码从网页中检查标识：

```
using System.Security.Principal;

protected void Page_Load(object sender, EventArgs e)
{
    Response.Write(WindowsIdentity.GetCurrent().Name);
} 
```

> 默认情况下，Windows Server 2003 上的 ASP.NET 应用程序使用 NT Authority\Network Service 帐户运行。打开 .NET 命令提示符，并使用以下命令授予此帐户对 NetFrameworkConfigurationKey 存储的访问权限：aspnet_regiis -pa "NetFrameworkConfigurationKey" "NT Authority\Network Service"
> 
> 如果命令成功运行，您将看到以下输出：添加 ACL 以访问 RSA 密钥容器...成功！
> 
> 您可以在以下文件夹中检查文件的 ACL：
> 
> \Documents and Settings\All Users\Application Data\Microsoft\Crypto\RSA\MachineKeys
> 
> 您的 RSA 密钥容器文件是此文件夹中具有最新时间戳的文件。

此外，[这些简单的命令似乎适用](https://stackoverflow.com/questions/1335413/entity-framework-encrypt-connection-string)于 EF/Linq-to-Entities

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T18:42:38.123

当你运行 aspnet 命令时，加密的数据应该替换“connectionStrings”，如果没有，那么它就失败了。aspnet_regiis -pe "connectionStrings" -app "/" -location "子文件夹" -site "2"

我运行了该命令，但事实证明我不需要 -location 并且这是不正确的。

我应该知道，当密码值 XML 字段如此小时。

但是，这两个命令可以解决问题...

aspnet_regiis -pe "connectionStrings" -app "/" -site "2"

aspnet_regiis -pa "NetFrameworkConfigurationKey" "IIS APPPOOL\MyApp"

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-30T05:45:10.727

在发布项目的服务器上运行此代码

```
string provider = "RSAProtectedConfigurationProvider";
string section = "connectionStrings";

protected void Page_Load(object sender, EventArgs e)
{

}
protected void btnEncrypt_Click(object sender, EventArgs e)
{
   Configuration confg = WebConfigurationManager.OpenWebConfiguration(Request.ApplicationPath);
   ConfigurationSection configSect = confg.GetSection(section);
   if (configSect != null)
   {
      configSect.SectionInformation.ProtectSection(provider);
      confg.Save();
   }
}

protected void btnDecrypt_Click(object sender, EventArgs e)
{
   Configuration config = WebConfigurationManager.OpenWebConfiguration(Request.ApplicationPath);
   ConfigurationSection configSect = config.GetSection(section);
   if (configSect.SectionInformation.IsProtected)
   {
      configSect.SectionInformation.UnprotectSection();
      config.Save();
   }
} 
```

**在此链接中：http:** [//www.codeproject.com/Tips/304638/Encrypt-or-Decrypt-Connection-Strings-in-web-confi](http://www.codeproject.com/Tips/304638/Encrypt-or-Decrypt-Connection-Strings-in-web-confi)

```
<connectionStrings configProtectionProvider="RsaProtectedConfigurationProvider">
<EncryptedData Type="http://www.w3.org/2001/04/xmlenc#Element"
xmlns="http://www.w3.org/2001/04/xmlenc#">
<EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#tripledes-cbc" />
<KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
<EncryptedKey xmlns="http://www.w3.org/2001/04/xmlenc#">
<EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#rsa-1_5" />
<KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
<KeyName>Rsa Key</KeyName>
</KeyInfo>
<CipherData>
<CipherValue>WagJ9DDjWTNc1nmYVNQXaQqXalQzXaiCHAOtUJvTWBRZiuT6UK1fBElM80PnL6dC5Umb8qvfHdkSMgoMW9CJzwOTZ0zTy17JBGZqRQmlfW2G9LacoWIil0UrxjhgmJmRXhwXHFpdGwEVl7AoQGVlJGabXuChutaTxmfGOoUbCr0=</CipherValue>
</CipherData>
</EncryptedKey>
</KeyInfo>
<CipherData>
<CipherValue>qry5qnr3qxOgyoNPeP7OKEiHpr/PPTsaeQ2mYUsSK7cg4Kkl9uPO4RyUXgBIkgCTsjbObqLlyndcSBnYyek6bxG/IBL82G1R5J1ci8i1eyt8kIDqouzYOx5vtouErld4z1L+7WGf9Wg37QAH5RiiEfkCHndJJq3dTqjxnnXZSno6NgbxSXDfqzwE/eKDVhGV3oaTQSfjVmO8e5a9wvREYeeyasDhojx8J2mdy7/Q9rEIpv98RTiRxA==</CipherValue>
</CipherData>
</EncryptedData>
</connectionStrings> 
```

# java - 排序对象 HashMap（不是按键）

> ID：10743013
> 
> 赞同：0
> 
> 时间：2012-05-24T18:10:18.580
> 
> 标签：java, sorting, hashmap

所以我在 HashMap 中有几个对象：`private HashMap <String,Object> hmap;`

我想要做的是通过对象的变量（双）对这些对象进行排序。我该怎么做？我想我需要使用比较器，但我不知道如何使用它们。我应该将对象发送到数组吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T18:20:34.310

我想您需要在单独的列表中进行排序。您将需要以下内容：

```
List<Object> values = new ArrayList<Object>();
values.addAll(hmap.values());
Collections.sort( values, new Comparator<Object>(){ 
 public int compare(Object o1,
                   Object o2){
    //do specific comparison here
 }); 
```

# bash - 使用 bash set -e 时如何显示最后一个失败的命令？

> ID：10743026
> 
> 赞同：20
> 
> 时间：2012-05-24T18:11:21.510
> 
> 标签：bash

我正在使用`set -e`在第一个错误时停止执行脚本。

问题是这并没有告诉我出了什么问题。

如何更新 bash 脚本，以便它显示最后一个失败的命令？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-05-24T20:04:58.960

代替`set -e`，使用 ERR 陷阱；您可以传入`$BASH_LINENO`以获取发生错误的特定行号。[我在https://stackoverflow.com/a/185900/14122](https://stackoverflow.com/a/185900/14122)的回答中提供了一个利用这一点的脚本

总结一下：

```
error() {
   local sourcefile=$1
   local lineno=$2
   # ...logic for reporting an error at line $lineno
   #    of file $sourcefile goes here...
}
trap 'error "${BASH_SOURCE}" "${LINENO}"' ERR 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-03-15T10:19:42.773

1.  制作 err.sh

    ```
    set -e
    trap 'echo "ERROR: $BASH_SOURCE:$LINENO $BASH_COMMAND" >&2' ERR 
    ```

2.  将它 ( `. err.sh`) 包含在所有脚本中。

3.  替换任何

    `... | while read X ; do ... ; done`

    和

    `while read X ; do ... ; done < <( ... )`

    在您的脚本中让陷阱在错误消息中提供正确的行号/命令

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T18:17:50.330

你试过`--verbose`吗？

```
bash --verbose script.sh 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T19:39:43.257

您不能单独使用`set -e`，因为处理将在任何错误后立即停止。查看 Bash 参考手册的[Set Builtin 部分](http://www.gnu.org/software/bash/manual/bashref.html#The-Set-Builtin)，了解有关 -x 和 -v 选项的更多信息，您可以使用它们进行调试。

就像是：

```
set -e
set -v 
```

将在任何错误时退出，同时在读取时向您显示每个输入行。但是，它不会只显示错误所在的行。为此，您需要进行自己的显式错误检查。

例如：

```
set +e
if false; then
    real_exit_status=$?
    echo 'Some useful error message.' >&2
    exit $real_exit_status
fi 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T21:02:24.263

`set -ex`将在执行时显示（所有）行，并在第一个返回非零的命令处停止（不作为`if/while/until`构造的一部分）。

# c - C管道初始化错误

> ID：10743029
> 
> 赞同：0
> 
> 时间：2012-05-24T18:11:33.227
> 
> 标签：c, pipe

我正忙于一项任务，但我被困住了。我得到错误，我不明白我做错了什么。

所以我主要生了三个孩子。在第一个和第二个之间我有一个管道（`pipe12`）。在第二个和第三个之间我有一个管道（`pipe23`）。现在，当第一个孩子 ( `reader`) 准备好阅读时，它会关闭`pipe12`，但第二个孩子的阅读没有得到`EOF`. 其次，当第二个孩子想写信时`pipe23`，孩子崩溃了。

我想我在管道的初始化中做错了什么，但是什么？

这是家长

```
for(childnr=2; childnr>=0;childnr--)
{
    tasks[childnr].pid=fork();
    if(tasks[childnr].pid==-1)
    {
        printf("fork error\n");
        exit(1);
    }
    else if(tasks[childnr].pid==0)
    {
        switch(childnr)
        {
            case 0:
                close(pipe12[0]);
                close(pipe23[0]);
                close(pipe23[1]);
                reader();
                break;
            case 1:
                close(pipe12[1]);
                close(pipe23[0]);
                tokenizer();
                break;
            case 2:
                close(pipe12[0]);
                close(pipe12[1]);
                close(pipe23[1]);
                evaluator();
                break;
            default:
                printf("childnr error\n");                      //errorhandling
        }           
    }
    else
        close(tasks[childnr].errorpipe[1]);
}
close(pipe12[0]);
close(pipe12[1]);
close(pipe23[0]);
close(pipe23[1]);
... continue with the parent 
```

这是第一个孩子：

```
void reader(void)
{   
    atexit(*reader_exit);
    if((readfile = fopen(calculatorfile,"r"))==NULL)
    {
        printf("R send error to errorHandler");     //errpipe!
        exit(0);
    }
    char line[50];
    const char *valid_characters = "0123456789 +-/*\n";
    while(fgets ( line, sizeof line, readfile ) != NULL)
    {
        printf("R reading ...%s",line);
        char *c = line;
        while(*c)
        {
            if(!strchr(valid_characters,*c))
            {
                printf("R invalid character: %c in %s",*c,line);
                line[0]=0;
                break;
            }
            c++;
        }
        write(pipe12[1],line,sizeof line);
    }
    exit(0);
}

void reader_exit(void)
{
    printf("R reader exit\n");
    fclose(readfile);
    close(pipe12[1]);
    close(tasks[childnr].errorpipe[1]);
} 
```

第二个孩子：

```
void tokenizer(void)
{
    atexit(*tokenizer_exit);
    char buffer[50];
    while(read(pipe12[0],buffer,sizeof buffer)!=EOF)
    {
        printf("T %s",buffer);
        char *token = strtok(buffer," ");
        while(token!=NULL)
        {
            printf("T %s\n",token);
            write(pipe23[1],token,sizeof token);
            token = strtok(NULL, " ");
        }
        sleep(2);
    }
    exit(0);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:09:40.907

您的主要问题是`read()`在 EOF 上返回 0，而不是 -1 或 EOF。

您的代码应该有如下循环：

```
while (read(pipe12[0], buffer, sizeof buffer) > 0) 
```

* * *

我建议避免使用`atexit()`;注册的功能。他们强迫你使用全局变量。让您的主要子函数进行自己的清理。这将更容易实施评论中提出的建议：

> 您可以通过将文件描述符传递给阅读器来提高阅读器的通用性，并且与标记器和评估器类似：
> 
> ```
> reader(pipe12[1])
> tokenizer(pipe12[0], pipe23[1]);
> evaluator(pipe23[0]); 
> ```
> 
> 对于读者，您可能也应该传递文件名：
> 
> ```
> reader(calculatorfile, pipe12[1]); 
> ```

* * *

这段代码几乎可以工作：

```
#include <stdio.h>
#include <unistd.h>
#include <sys/wait.h>
#include <stdlib.h>     /* atexit() */
#include <string.h>

static int pipe12[2];
static int pipe23[2];

struct task
{
    pid_t pid;
};
static struct task tasks[5];

static void evaluator(int i_fd);
static void tokenizer(int i_fd, int o_fd);
static void reader(char const *file, int o_fd);

int main(void)
{
    pipe(pipe12);
    pipe(pipe23);
    for (int childnr=2; childnr>=0;childnr--)
    {
        tasks[childnr].pid=fork();
        if (tasks[childnr].pid==-1)
        {
            printf("fork error\n");
            exit(1);
        }
        else if (tasks[childnr].pid==0)
        {
            switch (childnr)
            {
                case 0:
                    close(pipe12[0]);
                    close(pipe23[0]);
                    close(pipe23[1]);
                    reader("data-file", pipe12[1]);
                    break;
                case 1:
                    close(pipe12[1]);
                    close(pipe23[0]);
                    tokenizer(pipe12[0], pipe23[1]);
                    break;
                case 2:
                    close(pipe12[0]);
                    close(pipe12[1]);
                    close(pipe23[1]);
                    evaluator(pipe23[0]);
                    break;
                default:
                    printf("childnr error\n");                      //errorhandling
                    break;
            }           
        }
    }
    close(pipe12[0]);
    close(pipe12[1]);
    close(pipe23[0]);
    close(pipe23[1]);

    printf("Parent waiting...\n");
    while (wait(0) != -1)
        ;
    printf("Brats are all dead!\n");
    return(0);
}

static void reader(char const *file, int o_fd)
{   
    FILE *fp;
    if ((fp = fopen(file, "r"))==NULL)
    {
        printf("R send error to errorHandler");     //errpipe!
        exit(0);
    }
    char line[50];
    const char *valid_characters = "0123456789 +-/*\n";
    while (fgets(line, sizeof(line), fp) != NULL)
    {
        printf("RI %s", line);
        char *c = line;
        while (*c)
        {
            if (!strchr(valid_characters, *c))
            {
                printf("R invalid character: %c in %s\n", *c, line);
                line[0] = '\0';
                break;
            }
            c++;
        }
        if (line[0] != '\0')
        {
            printf("RO %s", line);
            write(o_fd, line, strlen(line));
        }
    }
    close(o_fd);
    fclose(fp);
    printf("Reader exiting\n");
    exit(0);
}

static void tokenizer(int i_fd, int o_fd)
{
    char buffer[50];
    int nbytes;
    while ((nbytes = read(i_fd, buffer, sizeof(buffer))) > 0)
    {
        buffer[nbytes] = '\0';
        printf("TI %*s\n", nbytes, buffer);
        char *token = strtok(buffer, " \n");
        while (token!=NULL)
        {
            printf("TO %s\n", token);
            write(o_fd, token, strlen(token));
            token = strtok(NULL, " ");
        }
        sleep(2);
    }
    printf("Tokenizer exiting\n");
    exit(0);
}

static void evaluator(int i_fd)
{
    char buffer[50];
    int nbytes;
    while ((nbytes = read(i_fd, buffer, sizeof(buffer))) > 0)
    {
        printf("EI %*s\n", nbytes, buffer);
        buffer[nbytes] = '\0';
        char *token = strtok(buffer, " ");
        while (token!=NULL)
        {
            printf("EO %s\n", token);
            token = strtok(NULL, " ");
        }
        sleep(2);
    }
    close(i_fd);
    printf("Evaluator exiting\n");
    exit(0);
} 
```

给定一个数据文件，其中包含：

```
123 456
123 + 234 * 547 / 987 - 1 
```

该程序的一次运行产生了：

```
Parent waiting...
RI 123 456
RO 123 456
RI 123 + 234 * 547 / 987 - 1
RO 123 + 234 * 547 / 987 - 1
Reader exiting
TI 123 456

TO 123
TO 456

EI 123
EO 123
TI 123 + 234 * 547 / 987 - 1
EI 456

TO 123
TO +
TO 234
TO *

TO 547
TO /
EO 456

TO 987
TO -
TO 1

EI 123+234*547/987-1

EO 123+234*547/987-1

Tokenizer exiting
Evaluator exiting
Brats are all dead! 
```

请注意，读取的数据`read()`必须显式以 null 终止；读取的数据`fgets()`没有。还要注意基本调试是如何进行的；回显所有输入，也回显下一个程序的所有输出。这使得查看可能存在问题的位置变得容易（或者至少更容易）。在极端情况下，最好写到`stderr`，或者`fflush()`在每个 之后写`printf()`。有许多细节是次优的，例如`printf()`仅使用单个字符串参数。此代码中的任务结构是多余的。管道数组可以是修改后的代码中的局部变量。

# android - Eclipse 可视化编辑器中的自定义 Android 视图

> ID：10743030
> 
> 赞同：11
> 
> 时间：2012-05-24T18:11:33.280
> 
> 标签：android, eclipse, android-layout, adt, visual-editor

在我的应用程序中，我经常依赖自定义构建视图，例如以下示例。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical" 
android:background="@color/light_grey"
android:layout_height="match_parent" 
android:layout_width="fill_parent" >

<TextView 
 style="@style/CardTitle" 
 android:id="@+id/card_title"
 android:layout_height="wrap_content" 
 android:layout_width="fill_parent"      
 />  

<com.whiterabbit.cards.ui.AspectRatioImageView
    android:id="@+id/card_picture"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:adjustViewBounds="true"
    android:layout_marginLeft="30dip"
    android:layout_marginRight="30dip"       
    android:src="@drawable/boss"
    />

<ListView 
    android:id="@+id/card_properties" 
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content"

/> 
```

问题是，我不知道它是否会正确显示，直到我在真实设备或模拟器上运行它。此外，如果我发现有问题，我将不得不对其进行更改并再次部署应用程序以查看更改是否按预期工作。

这可能是一个漫长而无聊的过程，特别是如果应用程序需要一些交互才能到达您要检查的活动。

使用可视化编辑器不起作用，因为它无法加载自定义视图。

是否有另一种方法可以检查视图的显示方式，而无需在整个应用程序中运行？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-05-24T19:22:02.147

您可以在自定义视图中执行此操作：

```
if(!isInEditMode()){
   // Your custom code that is not letting the Visual Editor draw properly
   // i.e. thread spawning or other things in the constructor
} 
```

[http://developer.android.com/reference/android/view/View.html#isInEditMode()](http://developer.android.com/reference/android/view/View.html#isInEditMode%28%29)

这允许您从 ADT 插件 XML 查看器中隐藏代码，并希望向您显示一个布局！

> View.isInEditMode()
> 
> 指示此视图当前是否处于编辑模式。当在开发人员工具中显示时，视图通常处于编辑模式。例如，如果此视图是由可视化用户界面构建器绘制的，则此方法应返回 true。如果子类的正常行为可能会干扰宿主环境，则子类应检查此方法的返回值以提供不同的行为。例如：类在其构造函数中生成一个线程，绘图代码依赖于特定于设备的功能等。此方法通常在自定义小部件的绘图代码中检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T18:40:14.057

您可以创建一个框架活动，该活动仅加载您想要查看的视图并使用足够的数据填充它以使其显示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-16T08:56:34.160

我正在使用 Android Studio，所以我不确定这个答案是否适用于您的情况。

我认为您可以在自定义视图中覆盖 onDraw 方法，例如保持内部图像的纵横比：

```
@Override
protected void onDraw(Canvas canvas) {
    super.onDraw(canvas);
    // TODO: consider storing these as member variables to reduce
    // allocations per draw cycle.
    int paddingLeft = getPaddingLeft();
    int paddingTop = getPaddingTop();
    int paddingRight = getPaddingRight();
    int paddingBottom = getPaddingBottom();

    int w = getWidth() - paddingLeft - paddingRight;
    int h = getHeight() - paddingTop - paddingBottom;

    w = w<h ? w : h;
    h = w;

    // Draw the example drawable on top of the text.
    if (dieDrawable != null) {
        dieDrawable.setBounds(paddingLeft, paddingTop,
        paddingLeft + w, paddingTop + h);
        dieDrawable.draw(canvas);
    }
} 
```

此方法在模拟器和设计器中都运行。

它也适用于任何重绘视图的事件（onSizeChanged、onLayout 等...）

# django - 按什么顺序对我的中间件路径匹配要求进行排序？

> ID：10743033
> 
> 赞同：0
> 
> 时间：2012-05-24T18:11:50.527
> 
> 标签：django, django-views

我创建了一个中间件，它允许我使用字典列表为我的任何视图指定一些访问规则。这些字典中的每一个都如下所示：

```
REQUIREMENTS=(
    {'viewname':'addtag',
     'permissions':'can_add_tags'},
    {'regex':re.compile(r'^somestart'),
    'user_check':lambda request:request.user.username=='sam'}
) 
```

然后，在我的中间件中，我尝试找出哪些要求与当前请求匹配。为此，我过滤了完整的 REQUIREMENTS，并在过滤器函数中使用此代码检查路径是否匹配：

```
def process_request(self,request):

    def path_matches(self,req):
        path_matches = False

        if  (req.has_key('url') and req['url'] == request.path ) or\
            (req.has_key('regex') and req['regex'].search(request.path)) or\
            (req.has_key('viewname') and resolve(request.path).url_name==req['viewname']):
            path_matches=True

        return path_matches

    requirements = filter(path_matches,REQUIREMENTS)
    # now use the returned requirements to determine if a user
    # matches the requirement and 
```

我现在的问题是：我应该按什么顺序使用支票？很明显，对 url 的检查是最快的，所以这必须是第一个。但接下来的问题是，是否应该首先遵循正则表达式搜索或 django 的 url 解析功能。

由于我现在没有任何性能问题，这更像是一个学术问题。如果有人有更好的解决方案来解决这个问题，那就更好了。

* * *

**编辑：**

为了对给定的答案做出反应：我想做的是创造一种可能性，将多个外部应用程序的视图限制在一个文件中。所以装饰器不是一种选择，只要我不想做这样的事情：

```
from ext_app1 import view1,view2
from ext_app2 import view3

@permission_required('can_do_stuff')
def view1_ext(*args,**kwargs):
    return view1(args,kwargs) 
```

这将导致每次我更改权限时都重写 url 规范。我想避免这种情况。此外，我的解决方案允许 user_check 函数对用户进行检查，如下所示：

```
def check_user(user):
    if len(Item.objects.get(creator=user,datetime=today)) > 3:
        return False
    return True 
```

这将是一种简单的方法，即限制用户每天可以上传多少项目。（好的，这也可以使用 user_passes_test ）。

另一件事是，有时我只想在请求是 POST 或请求包含某个键：值对时才检查权限（比如`'action':'delete'`应该需要权限，而`'action':'change'`任何人都应该允许）。这也可以使用自定义装饰器来完成，但是一旦我需要新的检查，我就需要一个新的装饰器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:08:20.060

如果您使用 Django 的内置[用户身份验证和权限系统](https://docs.djangoproject.com/en/dev/topics/auth/)( `django.contrib.auth`)，那么您应该考虑使用它提供的视图装饰器而不是中间件。这些为您提供了几个优势：

*   一起更改的代码在同一个地方，也就是说，与更改其他权限相比，更改视图代码时更可能需要更改特定视图的权限。
*   您不必自己编写大量代码，这使您的项目更小且更易于维护。

对于简单的情况，您可以使用[`login_required`](https://docs.djangoproject.com/en/dev/topics/auth/#the-login-required-decorator)and[`permission_required`](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.decorators.permission_required)装饰器，对于更复杂的条件，[`user_passes_test`](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.decorators.user_passes_test)装饰器允许您检查用户是否通过了您想要指定的任何条件。

对于视图函数，代码看起来像这样（[示例来自文档](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.decorators.permission_required)）：

```
from django.contrib.auth.decorators import permission_required

@permission_required('polls.can_vote')
def my_view(request):
    ... 
```

如果您使用的是[基于类的视图](https://docs.djangoproject.com/en/dev/topics/class-based-views/)，那么它看起来会有些不同（同样，此[示例取自文档](https://docs.djangoproject.com/en/dev/topics/class-based-views/#id1)）：

```
from django.contrib.auth.decorators import login_required
from django.utils.decorators import method_decorator
from django.views.generic import TemplateView

class ProtectedView(TemplateView):
    template_name = 'secret.html'

    @method_decorator(login_required)
    def dispatch(self, *args, **kwargs):
        return super(ProtectedView, self).dispatch(*args, **kwargs) 
```

如果你有充分的理由不使用 Django 的权限系统，那么你仍然可以采用类似的方法。[装饰器](https://github.com/django/django/blob/master/django/contrib/auth/decorators.py)的[代码`django.contrib.auth`](https://github.com/django/django/blob/master/django/contrib/auth/decorators.py)可以很容易地用作您自己的装饰器的基础。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T18:46:25.800

您可能正在寻找[user_passes_test 装饰器](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.decorators.user_passes_test)。

您可以装饰您需要的视图，而不是使用中间件。

代码将如下所示：

```
from django.contrib.auth.decorators import user_passes_test

@user_passes_test(lambda user: user.has_perm('model.can_add_tags') \
                                and user.username == 'sam')
def my_view(request):
    ... 
```

# c# - 使用什么游戏引擎/平台来编写一次并到处部署？

> ID：10743038
> 
> 赞同：-3
> 
> 时间：2012-05-24T18:11:59.537
> 
> 标签：c#, vb.net, visual-studio-2010, visual-studio

基本上，我想设计一个策略游戏，其中大部分游戏将花费在菜单区域并做出“决定”（如大亨风格的游戏），但是仍然会有一些图形，我更喜欢 3D，但是如果不可能，可以诉诸2D。图形不是用户控制的，但移动对象将是玩家做出的“决定”的结果。

我真的只想写一次，并让它在以下平台上运行：

```
Windows Desktop
iOS (iPhone, iPod, iPad)
Android Phones (not strictly required) 
```

（任何其他平台都只是一个奖励，但至少，我真正想要的只是 Windows 桌面和 iOS [iPhone、iPod、iPad]）。

现在，我不想学习objective-c 或任何其他我将来可能用不上的语言，我真的只想能够在Visual Studio（VB.Net 或C#，因为我可以转换从 vb.net 到 c# 我只会在 vb.net 中编写它）。

是否可以在 vb.net/c# 中编写并部署到所有这些平台？我听说过 MonoTouch，所以我可以从 vb 转换为 c#，但是这看起来很简单还是很难做到？我是否必须学习并用另一种语言写作才能进行调整以使其在 iPhone 或 Android 上运行？那么，使用 MonoTouch，我还能使用 XNA，还是需要在 Visual Studio 中学习/使用不同的引擎？

或者，如果我不能在 VB.NET 或 Visual Studio 中完成这一切，我应该学习什么编程语言和/或图形引擎才能编写一次并在任何相关的地方部署？（所以，不要对 Linux、Mac 或其他较少使用的操作系统大惊小怪）。

现在，我还没有学习 XNA，但我想知道我是否应该或需要，或者我是否应该学习另一种引擎和语言。基本上，我真的不知道我需要学习/知道什么才能编写一次并部署在 Windows 桌面、iOS（iDevice）甚至 Android 上。所以，我的问题真的是，我需要在编程语言和游戏/图形引擎方面学习什么。现在我知道 VB.NET 并且更愿意使用我所知道的，但如果不可能，那么准备学习另一种语言和引擎组合以能够实现我想要的，如果这是我需要做的，我想知道我需要学习什么语言和引擎。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T18:17:34.270

[Unity3D](http://unity3d.com/unity/publishing/)是一个不错的选择。它允许您开发游戏，并从单一来源发布到 PC、Mac、iOS、Android 和其他平台。

它确实支持 C# 开发（这是您列出的一个选项），尽管它通常是通过他们自己的编辑器而不是在 Visual Studio 中处理的。话虽如此，他们确实[支持 Visual Studio 作为](http://answers.unity3d.com/questions/25671/how-to-set-visual-studio-2010-as-default-script-ed.html)项目的代码编辑器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T18:23:21.673

我从未尝试过（但我尝试了 MonoTouch - 它就像一个魅力），但[MonoGame](https://monogame.codeplex.com/)可能是您的解决方案。

它是带有 XNA 的 C#，用于在任何地方进行部署。对于 MonoTouch，有一种使用 VisualStudio 的相当老套的方法——但对我来说，这是使用 MonoDevelop 的好方法（顺便说一句，这是一个非常好的 OpenSource-IDE）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-24T18:20:16.557

C# 是由 Microsoft 发明的，用于他们的产品，XNA 和 Visual Studios 再次成为 Microsoft 开发工具，如果您希望将其放置在多个平台上，考虑 Java 或 C++ 可能不会那么令人头疼。也如上所述，去寻找这个信息，经过大约 5 分钟的搜索，它更容易获得

# windows - Making use of all available RAM in a Haskell program?

> ID：10743041
> 
> 赞同：8
> 
> 时间：2012-05-24T18:12:08.427
> 
> 标签：windows, haskell, memory-management, ghc, heap-memory

I have 8 GB of RAM, but Haskell programs seemingly can only use 1.3 GB.

I'm using this simple program to determine how much memory a GHC program can allocate:

```
import System.Environment
import Data.Set as Set

main = do
         args <- getArgs
         let n = (read $ args !! 0) :: Int
             s = Set.fromList [0..n]
         do
           putStrLn $ "min: " ++ (show $ findMin s)
           putStrLn $ "max: " ++ (show $ findMax s) 
```

Here's what I'm finding:

*   running `./mem.exe 40000000 +RTS -s` succeeds and reports `1113 MB total memory in use`
*   running `./mem.exe 42000000 +RTS -s` fails with `out of memory error`
*   running `./mem.exe 42000000 +RTS -s -M4G` errors out with `-M4G: size outside allowed range`
*   running `./mem.exe 42000000 +RTS -s -M3.9G` fails with `out of memory error`

Monitoring the process via the Windows Task Manager shows that the max memory usage is about 1.2 GB.

My system: Win7, 8 GB RAM, Haskell Platform 2011.04.0.0, ghc 7.0.4.

I'm compiling with: `ghc -O2 mem.hs -rtsopts`

How can I make use of all of my available RAM? Am I missing something obvious?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T21:21:25.820

目前，在 Windows 上，GHC 是 32 位 GHC - 我认为 Windows 的 64 位 GHC 应该在 7.6 到来时可用。

这样做的一个结果是，在 Windows 上，您不能使用超过`4G - 1BLOCK`内存，因为允许作为大小参数的最大值是`HS_WORD_MAX`：

```
decodeSize(rts_argv[arg], 2, BLOCK_SIZE, HS_WORD_MAX) / BLOCK_SIZE; 
```

对于 32 位字，`HS_WORD_MAX = 2^32-1`.

这解释了

> 运行 ./mem.exe 42000000 +RTS -s -M4G 使用 -M4G 出错：大小超出允许范围

因为`decodeSize()`解码`4G`为`2^32`.

在升级您的 GHC 后，此限制也将继续存在，直到最终发布适用于 Windows 的 64 位 GHC。

作为 32 位进程，用户模式虚拟地址空间限制为 2 或 4 GB（取决于`IMAGE_FILE_LARGE_ADDRESS_AWARE`标志的状态），参见[Windows 版本的内存限制](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366778%28v=vs.85%29.aspx)。

现在，您正在尝试构造一个`Set`包含 4200 万个 4 字节`Int`的 s。A`Data.Set.Set`每个元素有五个字的开销（构造函数、大小、左右子树指针、指向元素的指针），因此`Set`将占用大约 0.94 GiB 的内存（1.008 'metric' GB）。但是该进程使用了​​大约两倍或更多（它需要用于垃圾收集的空间，至少是活动堆的大小）。

在我的 64 位 linux 上运行程序，输入 21000000 （以弥补两倍大`Int`的 s 和指针），我得到

```
$ ./mem +RTS -s -RTS 21000000
min: 0
max: 21000000
  31,330,814,200 bytes allocated in the heap
   4,708,535,032 bytes copied during GC
   1,157,426,280 bytes maximum residency (12 sample(s))
      13,669,312 bytes maximum slop
            2261 MB total memory in use (0 MB lost due to fragmentation)

                                    Tot time (elapsed)  Avg pause  Max pause
  Gen  0     59971 colls,     0 par    2.73s    2.73s     0.0000s    0.0003s
  Gen  1        12 colls,     0 par    3.31s   10.38s     0.8654s    8.8131s

  INIT    time    0.00s  (  0.00s elapsed)
  MUT     time   12.12s  ( 13.33s elapsed)
  GC      time    6.03s  ( 13.12s elapsed)
  EXIT    time    0.00s  (  0.00s elapsed)
  Total   time   18.15s  ( 26.45s elapsed)

  %GC     time      33.2%  (49.6% elapsed)

  Alloc rate    2,584,429,494 bytes per MUT second

  Productivity  66.8% of total user, 45.8% of total elapsed 
```

但`top`仅报告`1.1g`内存使用 -`top`并且可能是任务管理器，仅报告实时堆。

所以似乎`IMAGE_FILE_LARGE_ADDRESS_AWARE`没有设置，您的进程被限制为 2GB 的地址空间，而 4200 万`Set`需要更多 - 除非您指定的最大或建议的堆大小更小：

```
$ ./mem +RTS -s -M1800M -RTS 21000000
min: 0
max: 21000000
  31,330,814,200 bytes allocated in the heap
   3,551,201,872 bytes copied during GC
   1,157,426,280 bytes maximum residency (12 sample(s))
      13,669,312 bytes maximum slop
            1154 MB total memory in use (0 MB lost due to fragmentation)

                                    Tot time (elapsed)  Avg pause  Max pause
  Gen  0     59971 colls,     0 par    2.70s    2.70s     0.0000s    0.0002s
  Gen  1        12 colls,     0 par    4.23s    4.85s     0.4043s    3.3144s

  INIT    time    0.00s  (  0.00s elapsed)
  MUT     time   11.99s  ( 12.00s elapsed)
  GC      time    6.93s  (  7.55s elapsed)
  EXIT    time    0.00s  (  0.00s elapsed)
  Total   time   18.93s  ( 19.56s elapsed)

  %GC     time      36.6%  (38.6% elapsed)

  Alloc rate    2,611,793,025 bytes per MUT second

  Productivity  63.4% of total user, 61.3% of total elapsed 
```

将最大堆大小设置为低于它自然会使用的大小，实际上让它适应的空间几乎不超过 所需的空间`Set`，代价是 GC 时间稍长，并建议堆大小`-H1800M`让它完成

```
1831 MB total memory in use (0 MB lost due to fragmentation) 
```

因此，如果您指定的最大堆大小低于 2GB（但足够大`Set`以适应），它应该可以工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T18:26:38.820

[默认堆大小是无限制](http://hackage.haskell.org/trac/ghc/ticket/923)的。

在 64 位 Windows XP 机器上使用 GHC 7.2，我可以通过显式设置更大的堆大小来分配更高的值：

```
$ ./A 42000000  +RTS -s -H1.6G
min: 0
max: 42000000
  32,590,763,756 bytes allocated in the heap
   3,347,044,008 bytes copied during GC
     714,186,476 bytes maximum residency (4 sample(s))
       3,285,676 bytes maximum slop
            1651 MB total memory in use (0 MB lost due to fragmentation) 
```

和

```
$ ./A 42000000  +RTS -s -H1.7G
min: 0
max: 42000000
  32,590,763,756 bytes allocated in the heap
   3,399,477,240 bytes copied during GC
     757,603,572 bytes maximum residency (4 sample(s))
       3,281,580 bytes maximum slop
            1754 MB total memory in use (0 MB lost due to fragmentation) 
```

甚至：

```
$ ./A 42000000  +RTS -s -H1.85G
min: 0
max: 42000000
  32,590,763,784 bytes allocated in the heap
   3,492,115,128 bytes copied during GC
     821,240,344 bytes maximum residency (4 sample(s))
       3,285,676 bytes maximum slop
            1909 MB total memory in use (0 MB lost due to fragmentation) 
```

也就是说，我最多可以分配 Windows XP [2G 进程限制](http://mi.eng.cam.ac.uk/~sb517/public/largememory.pdf)。我想在 Win 7 上你不会有这么低的限制——这个表[建议 4G 或 192G——](http://msdn.microsoft.com/en-us/library/aa366778%28VS.85%29.aspx#physical_memory_limits_windows_7)只要你需要多少就要求多少（并使用更新的 GHC）。

# performance - Variable declaration performance on loops in Actionscript 3

> ID：10743042
> 
> 赞同：5
> 
> 时间：2012-05-24T18:12:10.430
> 
> 标签：performance, actionscript-3, low-level

Despite all known blogs about this issue i always doubt some results and my personal tests shows that the well-said standard isn't the best.

Declaring variables inside the loop, to keep them close to its scope and make it faster to be reached by the method but allocating more memory or declaring outside the ***for*** scope to save memory allocation but increase processing to iterate in a distant instance.

My results shows that method B is faster(sometimes), i want to know the background around this.

results vary and im not a bit-brusher guru.

So what you guys think about it?

***Method A***

```
var object:Object = new Object();
var loop:int = 100000
for (var i:int = 0; i < loop; i++)
{
    object = new Object();
    object.foo = foo;
    object.bar = bar;
} 
```

OR

***Method B***

```
var loop:int = 100000
for (var i:int = 0; i < loop; i++)
{
    var object:Object = new Object()
    object.foo = foo;
    object.bar = bar;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-24T18:23:01.937

AS3 编译器将所有变量声明移动到称为变量提升的方法的顶部。变量的最小范围是一个完整的方法。您的方法 B 等效于以下内容：

```
var loop:int = 100000;
var i:int;
var object:Object;
for (i = 0; i < loop; i++) {
    object = new Object();
    object.foo = foo;
    object.bar = bar;
} 
```

请注意，它只会向上移动声明，而不是与 this 关联的赋值。这就是您可以在使用后声明变量的原因。例如试试这个代码：

```
trace(a);
var a:int = 10;
trace(a); 
```

这将编译。这是因为这段代码相当于：

```
var a:int;
trace(a);
a = 10;
trace(a); 
```

这也是您将使用以下代码收到重复变量声明警告的原因：

```
for (var i:int = 0; i < m; i++) {

}
for (var i:int = 0; i < n; i++) { // i is already declared once

} 
```

AS3、JS中变量作用域的概念与C、C++、Java等不同。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-05-24T18:18:32.637

tldr; 它们在语义上是等效的并且执行相同。

在*两种*情况下都只调用了*一个*变量。ActionScript 与 JavaScript 一样，“提升”声明。也就是说，实际上*只是一个函数范围的注解*。这与 C 和 Java 不同，后者在第二种情况下*将*创建一个新的范围（以及新的变量）。`object`*`var`*

 ***但是，AS 没有区别。引擎*有效地将*第二个代码与第一个代码相同。（话虽如此，我更喜欢“`var`靠近”它的使用位置，同时理解它与范围无关并且与*性能无关*。）

请参阅[Action Script 3.0：变量](http://help.adobe.com/en_US/ActionScript/3.0_ProgrammingAS3/WS5b3ccc516d4fbf351e63e3d118a9b90204-7f9d.html)，尤其是 Scope 部分：

> 变量的范围是代码中可以通过词法引用访问变量的区域... 在 ActionScript 3.0 中，**变量总是被分配给声明它们的函数或类的范围。**

快乐编码。***

# tabs - IntelliJ: Specify per-project tab size

> ID：10743043
> 
> 赞同：24
> 
> 时间：2012-05-24T18:12:18.707
> 
> 标签：tabs, intellij-idea

Is there a way to set the tab size in IntelliJ for a single file only, or at most for a single project?

I use a tab size of 3 for all my code; however, I'm collaborating on a project with an author who prefers a tab size of 4\. Is there a way to set the tab size to 4 for only those files that are part of this project?

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-24T18:18:19.083

`Settings`通过导航到`File`->打开对话框`Settings`。在`Project Settings [yourproject]`对话框的左侧，导航到`Code Style`-> `General`。可在该`Tab size`窗格中配置，您提供的值仅适用于名为 的项目`yourproject`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-09T06:23:20.257

对于那些找不到的人`project specific setting`

新闻`Command + ,`将为您提供所需的偏好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T18:15:30.103

您可以为项目设置全局格式并“重新格式化代码”以符合每个人的首选风格。

问题将出在您的版本控制系统上。如果您可以在 3 到 4 个空格之间来回加油，您将永远无法看到有意义的变化。

最好确定一个标准并坚持下去。

我不清楚私人项目的想法。这取决于您的版本控制系统。如果可以签入和签出代码以使选项卡大小不会影响提交，那么我会说您可以独立。如果您通过添加已编译的 3rd 方 JAR 来共享公共代码，那么我会说您可以独立。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-12T08:49:25.773

这不是您问题的确切答案，但 IntelliJ 目前（4/2013）可以“仅”处理每种语言的选项卡设置，这是 - 老实说 - 完全可以，因为语言和文件类型通常是“相同的” . 所以这你解决了你的问题。

您可以在文件 -> 设置 -> 项目设置 -> 代码样式 -> >您的语言中找到设置。

# javascript - How to use mouselockAPI?

> ID：10743046
> 
> 赞同：4
> 
> 时间：2012-05-24T18:12:24.760
> 
> 标签：javascript, firefox

I have Firefox nightly, Opera next, and Google Chrome, but I can't test the mouselock API on them (why?). I downloaded a special version of FF nightly, which should support it, but it also doesn't support.

May be an error with my computer?

Thanks in advance,

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:01:13.200

[https://developer.mozilla.org/en/API/Pointer_Lock_API](https://developer.mozilla.org/en/API/Pointer_Lock_API)

任何浏览器都不支持指针锁。

# android - Android Map overlay gives null pointer exception

> ID：10743050
> 
> 赞同：0
> 
> 时间：2012-05-24T18:12:52.330
> 
> 标签：android, google-maps, mapactivity

I'm storing my latitude and longitude in content provider as a real type.

When I retrieve it using a cursor, I use `.getDouble`, which means now this is a double.

This method accepts lat and long in only int type `newGeoPoint ( latitude, longitude )`

When I tried converting lat and lon from double to int, I get java null pointer exception.

This is what I tried Int(latitude * 1E6); Can you shed some light on this?

**Update**

I converted this double value to string then passed it to toast, I'm getting the values in toast. Now the problem is, how do I convert from double to int with out losing the float part.

Thanks in advance!!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-01T13:32:05.030

乘法后尝试强制转换：

```
int longitude = (int) (longitudeInDouble * 1E6) 
```

# javascript - W/webcore(2733): Can't get the viewWidth after the first layout

> ID：10743051
> 
> 赞同：1
> 
> 时间：2012-05-24T18:12:52.397
> 
> 标签：javascript, android, html, css

I have three web Views next to one another, for display of seperate spinners. I get this error somtimes, which causes problems in window rendering.

heres my xml...

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:orientation="vertical">
   <LinearLayout 

    android:orientation="horizontal" 
    android:layout_height="300dp"
    android:layout_width="match_parent"
    android:gravity="center">

        <WebView
            android:id="@+id/measure_view" 
            android:background="#77000000"
            android:layout_height="match_parent" 
            android:layout_width="160dp"
            android:focusable="true"/>

        <WebView
            android:id="@+id/input_view" 
            android:background="#77000000"
            android:layout_height="match_parent" 
            android:layout_width="160dp"
            android:focusable="true"/>
        <WebView
            android:id="@+id/output_view" 
            android:background="#77000000"
            android:layout_height="match_parent" 
            android:layout_width="160dp"
            android:focusable="true"/>

    </LinearLayout> 
```

Any thoughts?

Thanks, Nathaniel.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T13:21:16.753

对于有此问题的任何人：

根据我的发现，在创建 webview 时会发生一些线程，并且某些变量（例如宽度）正在跨线程引用。这是引用代码“不完美”的原因，因为有时数据在渲染时不可用。

看这个：

[代码](http://www.java2s.com/Open-Source/Android/android-core/platform-frameworks-base/android/webkit/WebViewCore.java.htm)

和 ctrl-f 错误“无法获取 viewWidth”的文本......你会看到我在说什么。

这里一个有趣的延续是我使用了多个 webviews - 这可能使这个问题更加复杂。另一个有趣的方面是，在我的代码中失败的 webview 总是第一个加载内容的，尽管它并不总是失败。

我的解决方案是让事情第一次失败，然后重新渲染失败的 web 视图。

希望这可以帮助。

纳撒尼尔。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T18:26:27.017

不加载时会发生什么？您在 logcat 中收到错误消息吗？

加载数据后，尝试这样做：

```
webView.refreshDrawableState(); 
```

# mysql - insert variable into mysql table does not work

> ID：10743055
> 
> 赞同：1
> 
> 时间：2012-05-24T18:13:20.193
> 
> 标签：mysql, variables, insert

I'm trying to insert a variable into mysql table, but it does not do what i want (no error, it simply does not work)

```
$string = 'this is an example';
mysql_query("insert into tablename (columnname) values ????"); 
```

Anyone can help me how to insert `$string` into table tablename? I tried replacing `????` with `($string)`, `(".$string.")`, `$string`, but all of them does not insert the `$string` variable into the database.

Thanks in advance!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T18:29:55.877

You can use \" (an escaped quotation mark) to include quotes inside your query, like so:

```
$string = 'this is an example';
mysql_query("insert into tablename (columnname) values (\"$string\")"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T18:16:34.487

您忘记了引号 ( `'`)，您应该使用双引号作为字符串分隔符。

```
$string = "test abc";
mysql_query("insert into t (col) values ('$string')"); 
```

# ssrs-2008 - 使用计算成员传递参数 - MDX

> ID：10743059
> 
> 赞同：0
> 
> 时间：2012-05-24T18:13:27.143
> 
> 标签：ssrs-2008, mdx

我正在尝试使用计算成员构建带有参数的查询。

我已经为“硬编码”的司法计数创建了计算成员，并且我创建的参数不会影响每个组的总数。

但是，我需要使用工作参数列出每个总计数。如果所选司法类型没有值，则应显示零计数。

我确定有一个简单的方法，但我对 MDX/SSRS 相当陌生。任何帮助是极大的赞赏！

这是查询：

```
WITH 

Member  [Measures].[Jud] as
        (
        [Dim Foreclosure Loan].[Judicial Flag].[1],
        [Dim Foreclosure Loan].[FCL Stage].&[Sale Held],
        [Measures].[Loan Count]
        )
Member  [Measures].[Non-Jud] as
        (
        [Dim Foreclosure Loan].[Judicial Flag].[0],
        [Dim Foreclosure Loan].[FCL Stage].&[Sale Held],
        [Measures].[Loan Count]
        )
Member  [Measures].[Total] as
        (
        [Dim Foreclosure Loan].[Judicial Flag],
        [Dim Foreclosure Loan].[FCL Stage].&[Sale Held],
        [Measures].[Loan Count]
        )
--------------------------------    Query Begins    --------------------------------
SELECT NON EMPTY
        {
        ([Dim Date].[Calendar].[Day].Members)
        } ON ROWS,
        NON EMPTY 
        ({
        ([Measures].[Jud]),
        ([Measures].[Non-Jud]),
        ([Measures].[Total])
        }) ON COLUMNS
        FROM ( SELECT ( STRTOSET(@DimForeclosureLoanJudicialFlag, CONSTRAINED) ) ON COLUMNS
        FROM [Foreclosure])
        WHERE 
        (IIF( STRTOSET(@DimForeclosureLoanJudicialFlag, CONSTRAINED).Count = 1,
        STRTOSET(@DimForeclosureLoanJudicialFlag, CONSTRAINED),
        [Dim Foreclosure Loan].[Judicial Flag].currentmember)
        )CELL PROPERTIES VALUE 
```

**更新**：需要有关提供的 iif 语句的帮助；请参阅下面的评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T21:38:03.603

我不是 100% 清楚你在问什么，但如果我要重申它，我认为这就是你想要做的。我想你想在列上看到 Jud、Non-Jud 和 Total。我认为您正在尝试使用该参数来选择特定的司法标志。不清楚的是参数值是否限制为 1 和 2，如您为度量显示的那样，或者是否存在一个层次结构，其中 1 和 2 有子级。我将假设第一个，因为它最简单解释一下，我们可以从那里开始。

您需要为司法标志 1 和 2 设置措施以考虑`WHERE`条款中的内容。现在它们是硬编码的，这告诉 SSAS 忽略`WHERE`子句中的任何内容。您需要通过`IIF`在 Measure 定义中包含一个语句来有条件地使用它。您应该返回一个`NULL`值作为 False 条件，以便 SSAS 可以以最佳方式执行查询，然后使用 format_string 属性填充零来代替`NULL`（这比在 False 条件中使用 0 来提高性能）。但是，您`NON EMPTY`在列上的关键字将消除该`WHERE`子句中未包含的司法标志，因此您需要将其删除。将其保留在行上，以便仅显示具有 Jud 或 Non-Jud 值的日期。

根据我对您要执行的操作的猜测，这是对您的查询的尝试：

```
WITH 
  MEMBER [Measures].[Jud] AS 
  iif(
        [Dim Foreclosure Loan].[Judicial Flag].CurrentMember is 
            [Dim Foreclosure Loan].[Judicial Flag].[1], 
            (
              [Dim Foreclosure Loan].[Judicial Flag].[1]
             ,[Dim Foreclosure Loan].[FCL Stage].&[Sale Held]
             ,[Measures].[Loan Count]
            ),
            NULL), format_string="#;#;0;0"
  MEMBER [Measures].[Non-Jud] AS 
  iif(
        [Dim Foreclosure Loan].[Judicial Flag].CurrentMember is 
            [Dim Foreclosure Loan].[Judicial Flag].[0], 
            (
              [Dim Foreclosure Loan].[Judicial Flag].[0]
             ,[Dim Foreclosure Loan].[FCL Stage].&[Sale Held]
             ,[Measures].[Loan Count]
            ),
            NULL), format_string="#;#;0;0" 
  MEMBER [Measures].[Total] AS 
    (
      [Dim Foreclosure Loan].[Judicial Flag]
     ,[Dim Foreclosure Loan].[FCL Stage].&[Sale Held]
     ,[Measures].[Loan Count]
    ) 
SELECT 
  NON EMPTY 
    {
      [Dim Date].[Calendar].[Day].MEMBERS
    } ON ROWS
 , 
    {
      [Measures].[Jud]
     ,[Measures].[Non-Jud]
     ,[Measures].[Total]
    } ON COLUMNS
FROM 
(
  SELECT 
    StrToSet
    (@DimForeclosureLoanJudicialFlag
     ,CONSTRAINED
    ) ON COLUMNS
  FROM [Foreclosure]
)
WHERE 
  IIF
  (
      StrToSet
      (@DimForeclosureLoanJudicialFlag
       ,CONSTRAINED
      ).Count
    = 1
   ,StrToSet
    (@DimForeclosureLoanJudicialFlag
     ,CONSTRAINED
    )
   ,[Dim Foreclosure Loan].[Judicial Flag].CurrentMember
  )
CELL PROPERTIES VALUE, FORMATTED_VALUE; 
```

# c++ - WIN32 Socket API: Canceling Send/Recv on socket using event-based completion notification

> ID：10743065
> 
> 赞同：2
> 
> 时间：2012-05-24T18:13:41.023
> 
> 标签：c++, sockets, recv, cancellation, overlapped-io

using socket with the overlapped operation selected the event-based completion notification; Have 2 events, one for data, the other to cancel long send/recv:

```
 HANDLE events[] = { m_hDataEvent, m_hInterruptEvent }; 
```

then calling WSASend,

```
 WSASend(m_Socket, &DataBuf, 1, NULL, 0, &SendOverlapped, NULL); 
```

followed by

```
 WSAWaitForMultipleEvents(2, events, FALSE, INFINITE, FALSE); 
```

which is setup to return on any one event signaled. Now assume send is in progress, and m_hInterruptEvent is signaled. WSAWaitForMultipleEvents returns, technically the function calling send can return as well and delete internally allocated buffers.

What is not clear to me, the WSASend may still be working in background, and deleting buffers will cause data corruption in best case.

**What would be the proper way to stop the background Send/Receive, if the socket needs to be used for something else immediately?**

*I looked at the CancelIO(), but the MSDN never mentions it in relation to Sockets, does it work with file based IO only?*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:59:40.953

发送后尝试取消它是没有意义的。即使你成功了，你也会遇到问题，因为接收应用程序不会知道传输被中断。您的新消息将被误认为是旧消息的结尾。

如果您觉得需要取消长发送，您可能应该查看您的应用程序设计。

*   发送块并检查块之间的取消。确保您有办法与接收方沟通传输已取消。
*   关闭套接字以取消。同样，确保客户端有办法知道这是一个中断的传输（例如，如果客户端提前知道总长度，他们将识别出中断的传输）。
*   只需等待它在后台成功，不要担心。如果您有紧急消息，请为它们使用单​​独的连接。

对于您的特定问题***“停止后台发送/接收的正确方法是什么，如果套接字需要立即用于其他用途”***，答案是：**套接字很便宜 - 只需使用两个**- 一个用于慢速传输其他用于紧急消息。

# c# - C#中的XML序列化数组

> ID：10743067
> 
> 赞同：7
> 
> 时间：2012-05-24T18:13:49.300
> 
> 标签：c#, .net, xml

我无法弄清楚这一点，我有一个看起来像这样的 xml 表

```
<root>
  <list id="1" title="One">
    <word>TEST1</word>
    <word>TEST2</word>
    <word>TEST3</word>
    <word>TEST4</word>
    <word>TEST5</word>
    <word>TEST6</word>   
  </list>
  <list id="2" title="Two">
    <word>TEST1</word>
    <word>TEST2</word>
    <word>TEST3</word>
    <word>TEST4</word>
    <word>TEST5</word>
    <word>TEST6</word>   
  </list>
</root> 
```

我正在尝试将其序列化为

```
public class Items
{
  [XmlAttribute("id")]
  public string ID { get; set; } 

  [XmlAttribute("title")]
  public string Title { get; set; }   

  //I don't know what to do for this
  [Xml... something]
  public list<string> Words { get; set; }   
}

//I don't this this is right either
[XmlRoot("root")]
public class Lists
{
  [XmlArray("list")]
  [XmlArrayItem("word")]
  public List<Items> Get { get; set; }
}

//Deserialize XML to Lists Class
using (Stream s = File.OpenRead("myfile.xml"))
{
   Lists myLists = (Lists) new XmlSerializer(typeof (Lists)).Deserialize(s);
} 
```

我对 XML 和 XML 序列化真的很陌生，任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-24T18:30:20.347

如果您将类声明为，它应该可以工作

```
public class Items
{
    [XmlAttribute("id")]
    public string ID { get; set; }

    [XmlAttribute("title")]
    public string Title { get; set; }

    [XmlElement("word")]
    public List<string> Words { get; set; }
}

[XmlRoot("root")]
public class Lists
{
    [XmlElement("list")]
    public List<Items> Get { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T18:26:27.363

如果您只需要将 XML 读入对象结构，则使用 XLINQ 可能更容易。

像这样定义你的类：

```
public class WordList
{
  public string ID { get; set; } 
  public string Title { get; set; }   
  public List<string> Words { get; set; }   
} 
```

然后阅读 XML：

```
XDocument xDocument = XDocument.Load("myfile.xml");

List<WordList> wordLists =
(
    from listElement in xDocument.Root.Elements("list")
    select new WordList
    {
        ID = listElement.Attribute("id").Value,
        Title = listElement.Attribute("title").Value,
        Words = 
        (
            from wordElement in listElement.Elements("word")
            select wordElement.Value
        ).ToList()
    }
 ).ToList(); 
```

# php - PHP Using Exchange 2007 to Display Calendar on Website with Real Time Updates

> ID：10743068
> 
> 赞同：0
> 
> 时间：2012-05-24T18:13:57.257
> 
> 标签：php, exchange-server, exchangewebservices

I'm trying to use PHP to grab calendar information from Exchange 2007 to display the calendar on a webpage. I've figure out how to do all of this with EWS but I was wondering if there is a way to get updates to the calendar in real time so that they are changed on the website instantly. Can Exchange trigger my script whenever a change is made or do I need to poll Exchange at regular intervals? If the latter, is that going to tie up resources?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T14:04:54.200

不，您需要使用内置同步功能轮询交换服务器。由于同步是增量的，因此不会产生那么多开销。您只需按您需要的任何时间间隔（当然是在合理范围内）轮询服务器。请参阅此答案以获取更多信息：

[PHP - 将 MySQL 联系人与 Exchange 同步](https://stackoverflow.com/questions/10317212/php-syncing-mysql-contacts-with-exchange/10346124#10346124)

# adobe - 如何使用 ExtendScript 以编程方式清除 InDesign 中的文本选择？

> ID：10743073
> 
> 赞同：3
> 
> 时间：2012-05-24T18:14:15.643
> 
> 标签：adobe, textselection, extendscript, adobe-indesign

我已经使用 ExtendScript 以编程方式在 InDesign 中选择了一些文本：

```
app.findGrepPreferences = NothingEnum.nothing;
app.findGrepPreferences.appliedFont = myFont;
var matches = app.activeDocument.findGrep();
if(matches.length > 0) {
  matches[0].select();
} 
```

我现在如何取消选择它？有没有这样的功能，比如`app.clearSelections();`或类似的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T09:35:30.367

尝试：

```
app.activeDocument.select(NothingEnum.NOTHING); 
```

# java - Java Applet java.security.AccessControlException 错误

> ID：10743077
> 
> 赞同：1
> 
> 时间：2012-05-24T18:14:27.500
> 
> 标签：java, accesscontrolexception

我有一个 java 小程序，有时会在尝试加载它时出错，但并非总是如此。我在本地机器上运行 JRE 1.7.0_03。该小程序在 IE 版本 9.0.8112.16421 上的 Web 应用程序中运行。仅当用户不是计算机上的管理员时才会发生该错误。我们怀疑错误是由 java.security.AccessControlException 引起的。针对此问题报告了一个 Oracle 错误[http://bugs.sun.com/view_bug.do?bug_id=6995087](http://bugs.sun.com/view_bug.do?bug_id=6995087)。有没有办法可以解决这个问题，或者我可以做些什么来解决这个问题？

# javascript - 将提交按钮与按 Enter 键集成以获取评论框

> ID：10743090
> 
> 赞同：0
> 
> 时间：2012-05-24T18:15:29.533
> 
> 标签：javascript, jquery, html, forms, this

我在我的页面中使用了 10 个评论框。该按钮工作正常，但现在我想添加功能，当我按下回车按钮时，会自动提交文本。

如何在不更改太多代码的情况下添加此功能。我正在将 bsubmit 类与 On click 事件绑定。（有10个评论框）

```
 <div class="addcomment" style="display: block; ">
<input class="commentadd" type="text" name="comment" value="Enter Comment" onfocus="if(this.value=='Enter Comment')this.value='';">
<button class="bsubmit" type="button">Submit</button></div> 
```

事件代码

```
 $(document).ready(function() {

$(function() {
$(".bsubmit").live("click", function() {
var id = $(this).parent().parent().attr("id");
var comm= document.getElementById(id).getElementsByClassName("commentadd")[0].value;

  $.ajax({
   type: "POST",
   url: "comment.php",
.
.
. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T18:17:44.380

```
$('body').on('keyup','input.commentadd', function(e) {
  // e.which is monitoring the key pressed 
  // and 13 is code for enter key
  if(e.which == 13 && $.trim(this.value).length) {
    $(this).next(".bsubmit").click(); // triggering click event on button
  }
}); 
```

**[演示](http://jsfiddle.net/FrAw8/7/)**

# iphone - 无法在 iPhone 应用程序中使用自定义字体

> ID：10743093
> 
> 赞同：4
> 
> 时间：2012-05-24T18:15:45.717
> 
> 标签：iphone, ios, xcode, fonts, truetype

我的 iPhone 应用程序中有 3 个 .ttf 文件。它们代表这 3 种字体：

*   哥谭圆角书
*   哥谭圆形中等
*   Gotham 圆角粗体

我把它们都放在了我的 .plist 中，但是当我这样做时只有 2 个出现：

```
NSLog(@"%@",[UIFont fontNamesForFamilyName:@"Gotham Rounded"]); 
```

这是记录的内容：

```
"GothamRoundedMedium-Regular",
"GothamRoundedBook-Regular" 
```

这里出了什么问题？截图如下。

![在此处输入图像描述](../Images/6ea33d5ae4c9b43da696d0ba9ad37df8.png)

![在此处输入图像描述](../Images/74d436cd94de6151e6d20038602eacd1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T18:29:40.350

It might be due to the reason that you haven't included `gothamroundedbold.ttf` in your target as in image. Select assistance navigator Check the membership of the font file that is missing. In my case it is checked and in your case it should be unchecked.
![enter image description here](../Images/310a34a2873c6e065d68d6339a384531.png) `

# .net - Castle nVelocity 和 whitspace 狼吞虎咽

> ID：10743102
> 
> 赞同：0
> 
> 时间：2012-05-24T18:16:21.627
> 
> 标签：.net, nvelocity

我正在使用 Castle nVelocity 创建模板来生成一些文本文件。我发现，如果我在模板中执行以下操作，我的输出行会在结果文件中缩进，就像在模板中一样。

```
#foreach( $row in $report.Rows )
    Output this row: ${row}
#end 
```

为了得到我想要的输出，我必须像这样编写我的模板：

```
#foreach( $row in $report.Rows )
Output this row: ${row}
#end 
```

有没有办法告诉 nVelocity 吞噬空白，以便该行不会在输出中缩进，但这样我就可以将它缩进模板中以提高可读性？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T22:02:08.323

不，您不能使用开箱即用的功能来做到这一点。

研究使用 TransformationFilter [http://docs.castleproject.org/MonoRail.Advanced-Topics.ashx#Transformation_Filters_14](http://docs.castleproject.org/MonoRail.Advanced-Topics.ashx#Transformation_Filters_14)它将允许您在数据流发送到客户端之前对其进行操作。

# php - 如何以编程方式标记订单失败 - Magento

> ID：10743105
> 
> 赞同：1
> 
> 时间：2012-05-24T18:16:29.330
> 
> 标签：php, magento

我只想知道一个属性是什么，当它设置时会将订单标记为失败，以便`failureAction()`被`app/code/core/Mage/Checkout/controller/OnepageController.php`调用。

我有一个 Observer.php，其中我正在为成功付款创建发票，并为失败的付款保存订单`pending_payment`状态并希望将它们重定向到购物车页面，并在顶部显示错误消息。

这一切都很好。只是对于不成功/失败的付款，以及使用pending_payment 状态保存订单n 将它们重定向到带有错误消息的购物车页面，我还想保留/保存购物车免于变空。

但没有运气

观察者.php

```
 public function implementOrderStatus($event)
 {
    $order = $event->getEvent()->getOrder(); 
    if ($this->_getPaymentMethod($order) == 'mypaymentmodule') 
    {
                $quote = Mage::getModel('sales/quote')->load($order->getQuoteId());
        if($order->getPayment()->getCcTransId() == NULL)
        {
            $order->cancel();
            $order->setStatus('canceled');
            $order->save();
            $quote->setIsActive(1)->save();
            /*$state = 'pending_payment';
            $status = 'pending_payment';
            $comment = 'Payment transaction failed due to incorrect AVS/CVD details.';
            $isNotified = false;
            $order->setState($state,$status,$comment,$isNotified)->save();
            $order->setCanSendNewEmailFlag(false);*/

            Mage::getSingleton('checkout/session')->addError('Sorry, either of your card information (billing address or card validation digits) dint match. Please try again');                 

            Mage::app()->getFrontController()->getResponse()->setRedirect('checkout/cart/')->sendResponse();
        }
       else
       {
           if ($order->canInvoice())

            $this->_processOrderStatus($order);
       }
    }
    return $this;
} 
```

但`$quote->setIsActive(true)->save()`似乎没有奏效。任何有关如何在保存“已取消”状态的订单后避免购物车变空的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:54:25.787

你也许应该看看`./app/code/core/Mage/Sales/Model/Order.php`。在那里你会发现一个订单的几个常量，它们可用于设置订单的状态，如下所示：

```
<?php
// [...] all your code within your custom action or script

//load your order by order_id (or by increment_id, if you like to, here, it's your order id
$order = Mage::getModel('sales/order')->load($your_order_id);
$order->setState(Mage_Sales_Model_Order::STATE_CANCELED); //or whatever distinct order status you'd like
$order->save(); 
```

在`failureAction`控制器操作中没有任何作用，如果你想手动调用它，你可以使用它构建它的 url`Mage::getUrl()`

# c++ - Ambiguous string::operator= 调用隐式转换为 int 和 string 的类型

> ID：10743106
> 
> 赞同：9
> 
> 时间：2012-05-24T18:16:32.017
> 
> 标签：c++, string, implicit-conversion, overload-resolution, conversion-operator

给定以下程序：

```
#include <iostream>
#include <string>
using namespace std;
struct GenericType{
   operator string(){
      return "Hello World";
   }
   operator int(){
      return 111;
   }
   operator double(){
      return 123.4;
   }
};
int main(){
   int i = GenericType();
   string s = GenericType();
   double d = GenericType();
   cout << i << s << d << endl;
   i = GenericType();
   s = GenericType(); //This is the troublesome line
   d = GenericType();
   cout << i << s << d << endl;
} 
```

它可以在 Visual Studio 11 上编译，但不能在 clang 或 gcc 上编译。它遇到了麻烦，因为它想隐式地从 a 转换为 a `GenericType`，`int`但`char`它也可以返回 a `string`，因此存在歧义（`operator=(char)`并且`operator=(string)`两者都匹配`GenericType`）。

但是，复制构造函数很好。

我的问题是：如何在不修改 main 内容的情况下解决这种歧义？我需要做些什么来修改`GenericType`以处理这种情况？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T18:29:56.860

I believe that gcc and clang are correct.

There are two `operator=` overloads in play:

```
string& operator=(string const& str); // (1)
string& operator=(char ch);           // (2) 
```

Both of these `operator=` overloads require a user-defined conversion from your argument of type `GenericType`. **(1)** requires the use of the conversion to `string`. **(2)** requires the use of the conversion to `int`, followed by a standard conversion to `char`.

The important thing is that both overloads require a user-defined conversion. To determine whether one of these conversions is better than the other, we can look to the overload resolution rules, specifically the following rule from C++11 §13.3.3.2/3 (reformatted for clarity):

> User-defined conversion sequence `U1` is a better conversion sequence than another user-defined conversion sequence `U2` if
> 
> 1.  they contain the same user-defined conversion function or constructor or aggregate initialization and
>     
>     
> 2.  the second standard conversion sequence of `U1` is better than the second standard conversion sequence of `U2`.

Note that an *and* joins the two parts of the rule, so both parts must be satisfied. The first part of the rule is not satisfied: the two user-defined conversion sequences use different user-defined conversion functions.

Therefore, neither conversion is better, and the call is ambiguous.

[I don't have a good suggestion on how to fix the problem without changing the definition of `main()`. Implicit conversions are usually not a good idea; they are sometimes very useful, but more frequently they are likely to cause overload ambiguities or other weird overloading behavior.]

There was a gcc bug report in which this problem was described, and resolved as by design: [compiler incorrectly diagnoses ambigous operator overload.](http://gcc.gnu.org/bugzilla/show_bug.cgi?id=14830)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-03T12:42:54.487

> 我的问题是：如何在不修改 main 内容的情况下解决这种歧义？

创建自己的类，该类`string`没有歧义，`operator=`然后没有。`using``std`

显然这不是一个很好的解决方案，但它可以工作并且`main`不必改变。

我认为您无法以任何其他方式获得您想要的行为。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-30T21:00:17.477

我相信 GCC 是错误的。在 Bjarne Stroustrup 的《The C++ Programming Language》一书中，有一整章专门讨论运算符重载。在第 11.4.1 节中，第一段是这样说的：

“如果存在赋值运算符 X::operator=(Z) 使得 V 为 Z 或存在 V 到 Z 的唯一转换，则将 V 类型的值赋值给 X 类的对象是合法的。初始化被处理等价的。”

在您的示例中，GCC 接受“string s = GenericType();” 然而拒绝“s = GenericType();”，所以它显然没有像初始化一样对待赋值。那是我的第一个线索，在 GCC 中出现了问题。

GCC 在分配中报告了 3 个将 GenericType 转换为字符串的候选对象，都在 basic_string.h 中。一是转换正确，一是报告无效，三是造成歧义。这是导致歧义的 basic_string.h 中的运算符重载：

```
/**
*  @brief  Set value to string of length 1.
*  @param  c  Source character.
*
*  Assigning to a character makes this string length 1 and
*  (*this)[0] == @a c.
*/
basic_string& operator=(_CharT __c) { 
    this->assign(1, __c); 
    return *this;
} 
```

这不是有效的转换~~，因为它接受的操作数与传递给它的对象类型不匹配。在任何地方都没有尝试分配给 char ，因此这种转换根本不应该是一个候选者，更不用说导致歧义的一个候选者。GCC 似乎将模板类型与其成员中的操作数类型混为一谈。~~

编辑：我不知道将整数分配给字符串实际上是合法的，因为整数可以转换为可以分配给字符串的字符（尽管字符串不能初始化为字符！） . GenericType 定义了到 int 的转换，从而使该成员成为有效的候选者。但是，我仍然认为这不是一个有效的转换，原因是使用这种转换会导致两个用户定义的赋值隐式转换，首先从 GenericType 到 int，然后从 int 到 string。正如同一本书 11.4.1 中所述，“只有一个级别的用户定义的隐式转换是合法的”。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-06-19T20:50:21.170

此解决方案有效

```
#include <iostream>
#include <string>
#include <type_traits>
using namespace std;
struct GenericType{

   operator string(){
      return "Hello World";
   }

   template <typename T, typename = std::enable_if_t <
                                    std::is_same<T, double>::value ||
                                    std::is_same<T, int>::value>>
   operator T(){
      return 123.4;
   }
};
int main(){
   int i = GenericType();
   string s = GenericType();
   double d = GenericType();
   cout << i << s << d << endl;
   i = GenericType();
   s = GenericType();
   d = GenericType();
   cout << i << s << d << endl;
} 
```

还有一个更通用的解决方案。我认为您不需要为每种算术类型创建运算符，因为隐式转换可以解决问题。

```
// ...

template <typename T, typename = std::enable_if_t 
    <std::is_arithmetic<T>::value && !std::is_same<T, char>::value>>
operator T() const
{
    return std::stod("123.4");
}

//... 
```

# java - 我无法使用 java 连接到我的数据库

> ID：10743108
> 
> 赞同：0
> 
> 时间：2012-05-24T18:16:44.167
> 
> 标签：java, database

```
Connection conn = null;
Statement stmt=null;
ResultSet rset=null;
String jdbc_url="jdbc:oracle:thin:hr/hr@bassam-desktop:1521:XE";
String query="";
try
{
    DriverManager.registerDriver(new oracle.jdbc.OracleDriver());
    conn=DriverManager.getConnection(jdbc_url);
    stmt=(Statement) conn.createStatement();
    query="select first_name" +"from employees"+"where employeed_id=100";
    rset=stmt.executeQuery(query);
    System.out.println(rset.getString(1));

}
catch(SQLException | NumberFormatException e)
        {
            System.out.println("result error");
        }
finally{
    try{
        rset.close();
        stmt.close();
        conn.close();

    }
    catch(Exception e)
    {
        System.out.println("Error in closing");
    }
} 
```

我在结果窗口中同时出现两个错误，这是什么问题？hr密码是正确的，我的主机名是正确的，是不是你在windows xp中右击“我的电脑”后从“计算机名”得到的那个？

编辑：使用 e.getMessage() 后，我得到了这个..

`result error, ResultSet.next was not called`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T18:33:40.663

您在评论中添加的异常错误消息告诉您出了什么问题：

> 结果错误，未调用 ResultSet.next

在访问结果集的第一行之前，您忘记调用 ResultSet.next()：

```
if (rset.next()) {
    System.out.println(rset.getString(1));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T18:33:00.643

```
 ResultSet rset = stmt.executeQuery();
 while(rset.next()){
     //Code that works with results
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T18:24:26.403

因为您使用的是 Netbeans IDE，所以您可以尝试使用他们的[内置工具](http://netbeans.org/kb/docs/ide/oracle-db.html)进行连接。这应该可以帮助您获得`jdbc_url`正确的结果（这几乎可以肯定是问题所在）。另外，不要忘记下载并包含在您的类路径中[`ojdbc6.jar`](http://www.oracle.com/technetwork/database/enterprise-edition/jdbc-112010-090769.html)（如果您不包含它，这肯定是问题）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T18:24:37.800

e 变量表示异常。尝试打印 e.getMessage() 或使用 e.printStackTrace() 打印堆栈跟踪以更好地了解问题。

# meteor - 何时或如何在 Meteor 应用程序中使用 this.flush()

> ID：10743109
> 
> 赞同：4
> 
> 时间：2012-05-24T18:16:47.677
> 
> 标签：meteor

我试图了解何时可以在 Meteor 应用程序中使用 this.flush() 。

文档说明了以下内容

> 调用内部发布函数。将所有待处理的设置、未设置和完成消息发送到客户端。

如果我的发布功能是这样的

```
Meteor.publish('myCollection', function(myid){
    return MyCollection.find({_id: myid});
}); 
```

我会使用 this.flush() 吗？

什么样的情况下会使用 this.flush() ？

谢谢小号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:36:33.310

在该用例中不需要，因为`Meteor.publish`自动处理如何将 Mongo 游标转换为每个订阅客户端的适当命令`set`的详细信息。`unset`

如果您编写一个自定义发布来管理它自己的`set`和`unset`，您可以使用它`flush`来将所有待处理的更改推送到客户端。您将在此处找到该技术的示例：[Meteor 文档中的消息计数示例如何工作？](https://stackoverflow.com/questions/10565654/how-does-the-messages-count-example-in-meteor-docs-work)

# hadoop - 如何在单个 Hadoop 作业中输出到多个 Cassandra 列族？

> ID：10743113
> 
> 赞同：1
> 
> 时间：2012-05-24T18:17:00.057
> 
> 标签：hadoop, cassandra

Cassandra 数据模型经常需要更新多个列族以支持单个“写入”（即更新双向索引的两侧）。当作业配置仅允许指定单个输出列族时，如何使用 Hadoop 执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T11:50:23.320

这可以通过使用以下位置提供的补丁修补 Cassandra 1.1 来实现：

[https://issues.apache.org/jira/browse/CASSANDRA-4208](https://issues.apache.org/jira/browse/CASSANDRA-4208)

一旦你有了这个，而不是`ConfigHelper.setOutputColumnFamily()`，你会打电话给`ConfigHelper.setKeyspace()`. 然后，您可以使用 MultipleOutputs API 在作业配置中指定输出 CF，如下所示：

```
MultipleOutputs.addNamedOutput(job, "ColumnFamily1", ColumnFamilyOutputFormat.class, ByteBuffer.class, List.class);
MultipleOutputs.addNamedOutput(job, "ColumnFamily2", ColumnFamilyOutputFormat.class, ByteBuffer.class, List.class); 
```

当您准备好输出时，只需引用命名的 CF 作为您的输出名称：

```
output.write("ColumnFamily1", key, Collections.singletonList(mutation)); 
```

在哪里`output`是对 reducer 中 MultipleOutputs 实例的引用。

# css - IFrame，如何共享 css 文件

> ID：10743115
> 
> 赞同：2
> 
> 时间：2012-05-24T18:17:07.670
> 
> 标签：css, caching, iframe

我刚刚加入了一个使用 sap netweaver 生成网站的项目。

到目前为止，人们一直在单独开发他们的 DCP，因此我现在有 20 个 DCP 可以连接在一起并设计风格。

从根本上讲，每个 DCP 都是一个 IView/IFrame。

我们目前有 20 个 css 文件，难以维护和快速更改，因此我希望使用 scss 生成 1 个 css 文件以使一切正常。

那部分工作正常，但是我遇到了一个问题，因为每个 IFrame 都会呈现自己，每个 IFrame 都会加载一个 css 文件，所以我会收到 20 次对我的新 css 文件的调用。

有没有办法在父视图和 IFrame 之间共享 css 文件，或者至少设置它以便 css 文件下载一次，而其他 19 个只使用缓存版本？

干杯

杰森

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T18:53:38.470

```
<script type="text/javascript">
  $(document).ready(function() {
  //pulling all <style></style> css of parent document
  if (parent) {
        var oHead = document.getElementsByTagName("head")[0];
        var arrStyleSheets = parent.document.getElementsByTagName("style");
        for (var i = 0; i < arrStyleSheets.length; i++)
            oHead.appendChild(arrStyleSheets[i].cloneNode(true));
    }
 //pulling all external style css(<link href="css.css">) of parent document
    $("link[rel=stylesheet]",parent.document).each(function(){
        var cssLink = document.createElement("link")
        cssLink.href = "http://"+parent.document.domain+$(this).attr("href");
        cssLink .rel = "stylesheet";
        cssLink .type = "text/css";
        document.body.appendChild(cssLink);
    });   
  });
</script> 
```

它将能够继承外部样式表中定义的css以及父文档标签中定义的css。

# image-processing - 什么是 MS Office 对比算法？

> ID：10743116
> 
> 赞同：2
> 
> 时间：2012-05-24T18:17:13.963
> 
> 标签：image-processing, ms-office

有谁知道 MS Office 使用什么公式对图像应用对比度调整？

它看起来像二次函数，但我找不到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-01T16:44:45.447

不太确定他们使用什么公式。我怀疑你会发现，因为没有开源，但这里是我用于对比度调整的代码：

```
function(im, contrast=10){
   # Get c-value from contrast
   c = (100.0 + contrast) / 100.0
   # Apply the contrast
   im = ((im-0.5)*c)+0.5
   # Cap anything that went outside the bounds of 0 or 1 
   im[im<0] = 0
   im[im>1] = 1
   # Return the image
   return(im)
} 
```

这对我来说真的很好。

**笔记**

这假设您的像素强度值在 0 到 1 的范围内。如果在 255 范围内，请更改线条`im = ((im-0.5*255)*c)+0.5*255`和`im[im>255] = 255`

上面的函数是R语言的

祝你好运

# php - 使用 PHP 从 XML 获取属性键

> ID：10743117
> 
> 赞同：3
> 
> 时间：2012-05-24T18:17:22.937
> 
> 标签：php, domdocument

我需要解析一个 xml 文件以显示基于键值的属性。例如，在下面的文件中，我想为每个会话提取 realTimeIid 和电子邮件，但是我很难让我的代码工作，因为每个 varValue 有多个具有相同属性的元素。

```
<?xml version="1.0" encoding="UTF-8" ?> 
<Report account="7869" start_time="2012-02-23T00:00:00+00:00" end_time="2012-02-23T15:27:59+00:00" user="twilson" more_sessions="false">
 <Session id="ID742247692" realTimeID="4306650378">
  <VarValues>
   <varValue id="ID2051978" source="PreChat" sourceName="null" time="2012-02-23T00:07:07+00:00" name="identifier">Andy</varValue> 
   <varValue id="ID2051979" source="Internal" sourceName="null" time="2012-02-23T01:09:42+00:00" name="DisconnectedBy">VisitorClosedWindow</varValue> 
   <varValue id="ID2055925" source="PostChat" sourceName="null" time="2012-02-23T01:09:53+00:00" name="send_transcript">yes</varValue> 
   <varValue id="ID2055926" source="Operator" sourceName="null" time="2012-02-23T01:13:17+00:00" name="email">address1@myexample.com</varValue> 
   <varValue id="ID2073144" source="PreChat" sourceName="null" time="2012-02-23T00:07:07+00:00" name="survey0373014">a group, team or business</varValue> 
   <varValue id="ID2074007" source="Operator" sourceName="null" time="2012-02-23T01:13:17+00:00" name="survey99630314">Pricing</varValue> 
   <varValue id="ID2075240" source="Operator" sourceName="null" time="2012-02-23T01:13:17+00:00" name="survey99630317">No</varValue> 
   <varValue id="ID2075243" source="Operator" sourceName="null" time="2012-02-23T01:13:17+00:00" name="survey99630320">Dont Know</varValue> 
   <varValue id="ID2083900" source="PostChat" sourceName="null" time="2012-02-23T01:09:53+00:00" name="survey99630223">none of the above</varValue> 
   <varValue id="ID2119346" source="Internal" sourceName="null" time="2012-02-23T00:06:20+00:00" name="LP_Visitor_Category">0</varValue> 
   <varValue id="ID2329945" source="PreChat" sourceName="null" time="2012-02-23T00:07:07+00:00" name="survey23360124">55379</varValue> 
  </VarValues>
 </Session>
 <Session id="ID742247695" realTimeID="4306650379">
  <VarValues>
   <varValue id="ID2051978" source="PreChat" sourceName="null" time="2012-02-23T00:04:37+00:00" name="identifier">Aram</varValue> 
   <varValue id="ID2051979" source="Internal" sourceName="null" time="2012-02-23T00:26:39+00:00" name="DisconnectedBy">RepStoppedChat</varValue> 
   <varValue id="ID2055926" source="Operator" sourceName="null" time="2012-02-23T00:46:39+00:00" name="email">address2@myexample.com</varValue> 
   <varValue id="ID2073144" source="PreChat" sourceName="null" time="2012-02-23T00:04:37+00:00" name="survey0373014">a group, team or business</varValue> 
   <varValue id="ID2074007" source="Operator" sourceName="null" time="2012-02-23T00:46:39+00:00" name="survey99630314">Turn Time</varValue> 
   <varValue id="ID2075240" source="Operator" sourceName="null" time="2012-02-23T00:46:39+00:00" name="survey99630317">No</varValue> 
   <varValue id="ID2075243" source="Operator" sourceName="null" time="2012-02-23T00:46:39+00:00" name="survey99630320">Likely</varValue> 
   <varValue id="ID2119346" source="Internal" sourceName="null" time="2012-02-23T00:04:23+00:00" name="LP_Visitor_Category">0</varValue> 
   <varValue id="ID2329945" source="PreChat" sourceName="null" time="2012-02-23T00:04:37+00:00" name="survey23360124">07452</varValue> 
  </VarValues>
 </Session>
</Report> 
```

这是我使用 DOMDocument 的代码。我想要的结果应该返回两行，如下所示。

```
Sessionid|email
4306650378 address1@myexample.com
4306650379 address2@myexample.com 
```

我只想要电子邮件地址，而不是 varValue->getAttribute('name') 下的所有其他元素和属性。问题在于它返回所有属性，我不知道如何仅查找电子邮件并获取后续值。

```
 $doc = new DOMDocument();
  $doc->load( 'C:/Dev/report.xml' );

  $sessions = $doc->getElementsByTagName( "Session" );
  foreach( $sessions as $session )
  {

  $sessionid = $session->getAttribute( 'realTimeID' );

  $values = $session->getElementsByTagName( "VarValues" );
  foreach( $values as $value)

  {   

  $varValues = $value->getElementsByTagName( "varValue" );
  foreach( $varValues as $other )

  {

  $email = $other->getAttribute('name');

  echo "$sessionid- $email\n"; 
  }}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T18:42:53.417

我一直发现[SimpleXML](http://www.php.net/manual/en/simplexml.examples-basic.php)非常易于使用：

```
<?php

$xml_string = <<<XML
<?xml version="1.0" encoding="UTF-8" ?> 
<Report account="7869" start_time="2012-02-23T00:00:00+00:00" end_time="2012-02-23T15:27:59+00:00" user="twilson" more_sessions="false">
 <Session id="ID742247692" realTimeID="4306650378">
  <VarValues>
   <varValue id="ID2051978" source="PreChat" sourceName="null" time="2012-02-23T00:07:07+00:00" name="identifier">Andy</varValue> 
   <varValue id="ID2051979" source="Internal" sourceName="null" time="2012-02-23T01:09:42+00:00" name="DisconnectedBy">VisitorClosedWindow</varValue> 
   <varValue id="ID2055925" source="PostChat" sourceName="null" time="2012-02-23T01:09:53+00:00" name="send_transcript">yes</varValue> 
   <varValue id="ID2055926" source="Operator" sourceName="null" time="2012-02-23T01:13:17+00:00" name="email">address1@myexample.com</varValue> 
   <varValue id="ID2073144" source="PreChat" sourceName="null" time="2012-02-23T00:07:07+00:00" name="survey0373014">a group, team or business</varValue> 
   <varValue id="ID2074007" source="Operator" sourceName="null" time="2012-02-23T01:13:17+00:00" name="survey99630314">Pricing</varValue> 
   <varValue id="ID2075240" source="Operator" sourceName="null" time="2012-02-23T01:13:17+00:00" name="survey99630317">No</varValue> 
   <varValue id="ID2075243" source="Operator" sourceName="null" time="2012-02-23T01:13:17+00:00" name="survey99630320">Dont Know</varValue> 
   <varValue id="ID2083900" source="PostChat" sourceName="null" time="2012-02-23T01:09:53+00:00" name="survey99630223">none of the above</varValue> 
   <varValue id="ID2119346" source="Internal" sourceName="null" time="2012-02-23T00:06:20+00:00" name="LP_Visitor_Category">0</varValue> 
   <varValue id="ID2329945" source="PreChat" sourceName="null" time="2012-02-23T00:07:07+00:00" name="survey23360124">55379</varValue> 
  </VarValues>
 </Session>
 <Session id="ID742247695" realTimeID="4306650379">
  <VarValues>
   <varValue id="ID2051978" source="PreChat" sourceName="null" time="2012-02-23T00:04:37+00:00" name="identifier">Aram</varValue> 
   <varValue id="ID2051979" source="Internal" sourceName="null" time="2012-02-23T00:26:39+00:00" name="DisconnectedBy">RepStoppedChat</varValue> 
   <varValue id="ID2055926" source="Operator" sourceName="null" time="2012-02-23T00:46:39+00:00" name="email">address2@myexample.com</varValue> 
   <varValue id="ID2073144" source="PreChat" sourceName="null" time="2012-02-23T00:04:37+00:00" name="survey0373014">a group, team or business</varValue> 
   <varValue id="ID2074007" source="Operator" sourceName="null" time="2012-02-23T00:46:39+00:00" name="survey99630314">Turn Time</varValue> 
   <varValue id="ID2075240" source="Operator" sourceName="null" time="2012-02-23T00:46:39+00:00" name="survey99630317">No</varValue> 
   <varValue id="ID2075243" source="Operator" sourceName="null" time="2012-02-23T00:46:39+00:00" name="survey99630320">Likely</varValue> 
   <varValue id="ID2119346" source="Internal" sourceName="null" time="2012-02-23T00:04:23+00:00" name="LP_Visitor_Category">0</varValue> 
   <varValue id="ID2329945" source="PreChat" sourceName="null" time="2012-02-23T00:04:37+00:00" name="survey23360124">07452</varValue> 
  </VarValues>
 </Session>
</Report>
XML;

$xml_object = simplexml_load_string($xml_string);

foreach($xml_object->Session as $session) {
    $sessionid = $session['realTimeID'];
    foreach($session->VarValues->varValue as $varValue) {
        if($varValue['name'] == 'email') {
            $email = (string) $varValue;
            echo $sessionid.'- '.$email."\n";
            break;
        }
    }
}

?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T18:35:04.250

使用 xpath 可能是一个更简单的解决方案。例如，请参阅下面的此链接

[点击这里](http://www.php.net/manual/en/simplexmlelement.attributes.php)

谢谢。

# sitecore - 编辑工作流状态后不会重置？

> ID：10743121
> 
> 赞同：1
> 
> 时间：2012-05-24T18:17:33.027
> 
> 标签：sitecore, sitecore6, sitecore-workflow

我已经实现了一个与[这个](http://sitecoreblog.alexshyba.com/2010/09/publish-to-pre-production-web-database.html)*相同*的站点核心工作流程；基本上我有两个数据库（暂存网络和生产网络）和每个数据库的两个批准状态，其中一个是最终的，另一个是半决赛。

这对新项目很有用，但是当我更改已经处于“已批准生产”状态的项目中的字段时，它不会像预期的那样重置回草稿。

有什么想法可能导致这种情况吗？

# bash - #arr[*] 在 bash 中是什么意思？

> ID：10743123
> 
> 赞同：1
> 
> 时间：2012-05-24T18:17:42.180
> 
> 标签：bash

我遇到了一个包含如下代码的脚本：

```
arr=($p)
np=${#arr[*]} 
```

p 是一串整数对：“0,1 2,4 3,5”等。首先，我不是 100% 确定 () 在第一行中做了什么，但我认为它只是扭转了局面成各种关联数组？那也可能不正确....但更重要的是，我对第二行的作用完全不知所措。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T18:21:31.343

第一个中的括号将结果转换为一个数组，它将被分配从 0 开始的索引并根据`IFS`（默认情况下包括空格）进行拆分。给出数组中元素的`${#arr[*]}}`数量。

# jquery - 主干.js 从模型中的嵌套数组填充集合

> ID：10743124
> 
> 赞同：0
> 
> 时间：2012-05-24T18:17:43.350
> 
> 标签：jquery, backbone.js, callback, backbone-relational

这是我正在尝试做的事情：我首先加载一个活动站点用户列表，每个用户都与一个电影列表相关联。当我点击一个用户时，我希望他的电影列表出现在下一个菜单上。但是，我没有在初始 JSON 请求中为每个用户加载完整的电影列表，而是尝试使用与骨干关系打包的 model.fetchRelated("key") 选项进行一些延迟加载。

在我看来，我有一个事件监听器：

```
events: {
    'click .username': 'showMovies'
},
showMovies: function(event){
    event.preventDefault();
    this.model.select();
} 
```

在我的模型中，我有一个选择功能：

```
select: function(){
    this.set({selected: true});
    this.fetchRelated("movies");
    var usermovies = new UserMovieCollection(); 
    usermovies.add(this.get("movies"));     
} 
```

问题是 this.fetchRelated("movies") 是一个异步事件，所以当调用 'add' 时，实际上并没有加载电影。所以我想知道我的选择是什么。我的一个想法是以某种方式将其包装到 jQuery 的延迟对象中......基本上，使用回调。不过，我不确定如何执行此操作，并且我不确定使用回调形式是否真的是很好的 Backbone 设计。

有谁知道我如何使用回调或某些（首选）系统来实现这一点？谢谢！

编辑：

我已经设法使用延迟来获得它，但我仍然想知道是否有没有延迟的更好的骨干解决方案。

```
select: function(){
        var model = this; 
        var usermovies = new UserMovieCollection();
        $.when(this.fetchRelated("movies")).then(function(){
            console.log(model.get("movies"));
        });
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T03:32:54.063

稍微浏览一下文档，看起来可能有一个可以绑定的事件？

```
var user = new User({ name: 'User 1' } );
user.bind( 'add:movies', function( model, coll ) {
    // Maybe this will work?
}); 
```

我对 Backbone.Relational 不太熟悉，所以这可能有效，也可能无效......

祝你好运！

# php - 如何在jqGrid中设置数据源

> ID：10743133
> 
> 赞同：0
> 
> 时间：2012-05-24T18:18:46.220
> 
> 标签：php, jquery, mysql, jqgrid

我正在尝试使用 jqGrid，但遇到了致命错误

> 致命错误：C:\xampp\htdocs\psnm\grid\grid.php:8 中未捕获的异常“PDOException”和消息“无效的数据源名称”堆栈跟踪：
> 
> # 0 C:\xampp\htdocs\psnm\grid\grid.php(8): PDO->__construct('localhost', 'root', '') #1
> 
> C:\xampp\htdocs\psnm\electionadmin.php(40): include('C:\xampp\htdocs...') #2 {main} 在 C:\xampp\htdocs\psnm\grid\grid 中抛出。第 8 行的 php

第 8 行`grid.php`是

```
$conn = new PDO("localhost",root,""); 
```

我的服务器在`localhost`我的数据库名称是`psnm`，用户是`root`，没有密码，任何人都可以帮我找出问题...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T18:26:58.763

PDO 的构造函数需要 dsn 作为第一个参数。看下面的语法：

```
PDO::__construct() ( string $dsn [, string $username [, string $password [, array $driver_options ]]] ) 
```

请查阅 PHP[手册](http://www.php.net/manual/en/pdo.construct.php)以获取更多信息。

# java - Java InputStreamReader & UTF-8 字符集

> ID：10743139
> 
> 赞同：0
> 
> 时间：2012-05-24T18:19:07.040
> 
> 标签：java, utf-8, character, inputstreamreader

我使用 InputStreamReader 传输压缩图像。InflaterInputStream 用于图像的解压

```
InputStreamReader infis =
   new InputStreamReader(
      new InflaterInputStream( download.getInputStream()), "UTF8" );
do {
   buffer.append(" ");
   buffer.append(infis.read());
} while((byte)buffer.charAt(buffer.length()-1) != -1); 
```

但是所有非拉丁字符都变成“？” 并且图像已损坏[http://s019.radikal.ru/i602/1205/7c/9df90800fba5.gif](http://s019.radikal.ru/i602/1205/7c/9df90800fba5.gif)

随着未压缩图像的传输，我使用 BufferedReader 并且一切正常

```
BufferedReader is =
   new BufferedReader(
      new InputStreamReader( download.getInputStream())); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T18:40:42.193

Reader/Writer 类旨在处理文本（基于字符的）输入/输出。

压缩图像是二进制的，您需要使用 InputStream/OutputStream 或 nio 类来传输二进制数据。

下面给出了使用 InputStream/OutputStream 的示例。此示例将接收到的数据存储在本地文件中：

```
 BufferedInputStream bis = null;
    BufferedOutputStream bos = null;
    try {

        bis = new BufferedInputStream(download.getInputStream());
        bos = new BufferedOutputStream(new FileOutputStream("c:\\mylocalfile.gif"));

        int i;
        // read byte by byte until end of stream
        while ((i = bis.read()) != -1) {
            bos.write(i);
        }
    } finally {
        if (bis != null)
            try {
                bis.close();
            } catch (IOException ioe) {
                ioe.printStackTrace();
            }
        if (bos != null)
            try {
                bos.close();
            } catch (IOException ioe) {
                ioe.printStackTrace();
            }
    } 
```

# java - 如何在 Java 中处理自定义的、可选择的行类

> ID：10743144
> 
> 赞同：2
> 
> 时间：2012-05-24T18:20:10.843
> 
> 标签：java, swing, graphics, awt, paintcomponent

我有一个应用程序，我希望用户能够将鼠标悬停和/或右键单击在 JPanel 上绘制的线条。我完全希望我会将该行作为处理所有行为的对象的一部分来实现，但我有一个更基本的问题，即如何实现下图中显示的行。先上图：

![两个机箱之间的箭头](../Images/6551801268943e0d8acc1a157cb6dc6e.png)

我可以毫无问题地自己画线，但它目前只是`paintComponent()`在 parent 的覆盖调用中完成`JPanel`。我对如何处理这个问题有一个初步的想法：

```
public class ChassisLink extends JComponent implements MouseListener
{
  //Rectangle  to handle mouse-over and right-click for each segment?
    public ChassisLink()
{
    initializeLink();
}

private void initializeLink()
{
    //Init stuff
}

@Override
public void paintComponent(Graphics g)
{
    super.paintComponent(g);
                //Paint the line(s)
}
        //MouseListener events...
//When mouse-over on the line, display a tooltip
//When right clicking, display a different dialog
} 
```

我认为我无法理解的问题是如何进行鼠标悬停或单击点检查。我是否使用矩形并检查鼠标当前是否包含在该矩形中，而只是忽略箭头的三角形部分？我对此非常乐观。然后我的问题变成了如何在包含机箱对象的现有 JPanel 之上显示这些链接对象；听起来像是 a 的候选人`JLayeredPane`，但是在那条道路上有任何确认吗？

无论如何，我很感激人们能给我的任何意见。如果有些模糊，请随时要求进一步解释。

谢谢，

-富有的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T18:23:24.603

你在正确的轨道上。我建议使用 Area 而不是 Rectangle - 你也可以通过这种方式获得箭头，并且 Area 使用 AffineTransforms 非常容易操作。

# mfc - 确定文件是二进制文件还是文本文件

> ID：10743146
> 
> 赞同：1
> 
> 时间：2012-05-24T18:20:28.113
> 
> 标签：mfc, text-files, binaryfiles

[有没有办法使用文件管理功能](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364229%28v=vs.85%29.aspx)或 MFC确定文件是二进制文件还是文本文件？

在[文件管理功能](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364229%28v=vs.85%29.aspx)中，GetFileType 似乎无法区分二进制文件和文本文件。与[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365740%28v=vs.85%29.aspx)的 dwFileAttributes 属性相同。

在 MFC 中，我尝试查看[CFile::GetStatus()](http://msdn.microsoft.com/en-us/library/fa0hc0ht%28v=vs.80%29.aspx)，但 m_attribute 没有说明文件是二进制文件还是文本文件。

有谁知道使用这两个库之一的方法？谢谢你。

（我想知道，因为我正在尝试创建一个递归遍历目录的函数。我重写了文本文件（使用 CStdioFile）并在这里和那里替换了一些单词......但它似乎搞砸了我的任何图像有在目录中。我也希望能够复制图像......但我需要一种区分二进制文件和文本文件的方法，以便我可以区别对待它们。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:52:20.307

据我所知，没有简单的 API 可以做到这一点，MFC 或其他方式。但是，在这些类似的问题中有很多有用的想法：

[如何区分“二进制”和“文本”文件？](https://stackoverflow.com/questions/567757/how-do-i-distinguish-between-binary-and-text-files)

[如何将文件内容识别为 ASCII 或二进制](https://stackoverflow.com/questions/277521/how-to-identify-the-file-content-is-in-ascii-or-binary)

# objective-c - 无法将图像存储在 NSMutableArray 中

> ID：10743155
> 
> 赞同：0
> 
> 时间：2012-05-24T18:21:34.133
> 
> 标签：objective-c, uiimage, nsmutablearray, xcode4.3

我正在尝试将图像保存在 NSMutable 数组中，但它不工作

这就是我正在做的

```
[imagesList addObject:[UIImage imageNamed:@"b.png"]]; 
```

执行此行后，我注意到对象的数量仍然为 0 有什么原因吗？

谢谢

我在几个方面重复了这段代码：

在全球范围内，我声明：

```
NSMutableArray *imagesList;
NSUserDefaults *imagesHistory; 
```

在我的 viewdidload 方法中，我写道：

```
imagesHistory=[NSUserDefaults standardUserDefaults];  //imagesHistory is created globallt as NSUserDefault imagesHistory
[imagesHistory setObject:imagesList forKey:@"images history"];

UIImage *image;
image=[UIImage imageNamed:@"b.png"];

[imagesList addObject:image];
imagesHistory=[NSUserDefaults standardUserDefaults];
[imagesHistory setObject:imagesList forKey:@"images history"]; 
```

在 didFinishLaunchingWithOptions 我写：（即使我在添加字符串时不需要这样做......）

```
 imagesList = [[NSMutableArray alloc] init]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T18:47:47.890

不管它是否是全局变量，您仍然需要为对象调用`alloc`和`init`SOMEWHERE。如果您打算在整个应用程序中使用它，那么`appDidFinishLaunchingWithOptions`添加这个调用是一个不错的地方：

```
imagesList = [[NSMutableArray alloc] init]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T01:01:10.053

您的空数组是否被保留？如果您没有使用自动引用计数，则很有可能您正在使用以下内容初始化数组

```
imagesList = [[NSMutableArray alloc] init]; 
```

但它没有被保留。您需要保留空数组，以便将其附加到您的代码中。

```
imagesList = [[[NSMutableArray alloc] init] retain]; 
```

只是不要忘记在您完成后释放数组，在`viewDidUnload`合适的地方或任何地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T20:19:27.587

`imagesList`尝试添加对象后，您正在分配/初始化。`imageList`在向其中添加任何内容之前，您需要分配/初始化。

为了确保它在那里，尝试这样的事情：

`if (!imagelist) imageList = [[NSMutableArray alloc] init];`

如果它存在，并且您仍然遇到此问题，则您可能正在分配/初始化一个新的 NSMutableArray 并`imageList`在添加对象后将其分配给它。这意味着旧数组将被丢弃，您将得到一个包含零项的新数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-30T05:14:08.853

尝试`UIImageView *image; image=[UIImage imageNamed:@"b.png"];`

另外，`@property(nonatomic,retain)`使用“强”而不是“保留”

# python - 在 Google App Engine 上访问 Win32 dll？

> ID：10743158
> 
> 赞同：0
> 
> 时间：2012-05-24T18:21:59.333
> 
> 标签：python, winapi, google-app-engine, licensing

**背景：**

我在一家大公司的一个小团队工作，目前我正在为我每年更新的一套混合 .Net 和 Win32 产品改进许可系统。每个产品都引用一个用于产品验证的 win32 .dll。我只有许可模块的二进制文件和头文件（所以没有哈希算法）。不知何故，客户能够在我们的网站上购买软件并通过邮件收到带有序列号的磁盘。密钥或特定产品等磁盘和密钥可以轻松共享。

**目标：**

*   修改哈希输入，使键现在基于主要版本号（完成）。
*   使用 App Engine 实现网络服务（它只是我，所以我不想维护任何硬件），用户可以购买通过电子邮件自动生成和交付的序列。
*   使用现有的许可模块或复制哈希/API（我希望发送串行密钥的人继续这样做，除非可能对其工作流程进行微小更改，例如添加版本号）。

**问题：**

*   有没有办法将这个 win32 库写在一个 python 模块中并在谷歌的 App Engine 上使用它？
*   是否有任何工具可以发现正在使用的散列算法？库导出`generatekey`函数？

非常感谢任何其他意见或建议。

干杯，

汤姆

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T18:33:15.310

不，App Engine 的 python 运行时只支持纯 python 模块。包装的本机代码模块将不起作用。

# haskell - 编译错误：“'do' 构造中的最后一条语句必须是表达式”

> ID：10743162
> 
> 赞同：0
> 
> 时间：2012-05-24T18:22:28.367
> 
> 标签：haskell, dining-philosopher

以下是我就餐哲学家的代码，并产生一个编译错误，说“'do' 构造中的最后一条语句必须是一个表达式：mVar2 <- newEmptyMVar mVar3” 有人可以帮我解决这个错误并让这个程序工作吗？谢谢你

```
import Control.Concurrent
import Control.Concurrent.MVar
import System.Random

takefork :: Int -> forks -> IO ()
takefork n forks = takeMVar (forks!!n)

releasefork :: Int -> forks -> IO ()
releasefork n forks = putMVar (forks!!n)

philosopher :: [Int]
philosopher = [1,2,3,4,5]

forks :: [MVar] -> [Int]
forks = do
    takefork n ( philosopher - 1)
    threadDelay delay
    let delay = 100000
    takefork n philosopher
    putStrLn("Philosopher" ++ philosopher ++ "has started eating")
    releasefork n philosopher
    releasefork n ( philosopher - 1)
    ptStrLn ("Philosopher" ++ philosopher ++ "has stopped eating")
    forks

main :: IO ()
main = do
    mVar1 <- newEmptyMVar
    mVar2 <- newEmptyMVar
    mVar3 <- newEmptyMVar
    mVar4 <- newEmptyMVar
    mVar5 <- newEmptyMVar
    let mVar = [mVar1, mVar2, mVar3, mVar4, mVar5]
    sequence_ [ forkIO forks (mVar philosopher) ] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T19:30:00.287

你的代码有很多问题。

您报告的错误消息表明您可能混合了空格和制表符。摆脱制表符，只使用空格。

* * *

您可能编写这个程序是为了练习编写 Haskell 程序，而不是为了娱乐和盈利而运行该程序。因此，我们不想简单地为您提供一个有效的 Dining Philosophers 实现，我们希望帮助您编写*您的*实现。

我无法从您的代码中看出您期望它如何工作。

我将重点关注最后一行：

```
sequence_ [ forkIO forks (mVar philosopher) ] 
```

`sequence_ :: [IO a] -> IO ()`--- 给出`sequence_`一个 i/o 动作列表，它（返回一个 i/o 动作）按顺序执行每个动作。从 中`[...]`，您似乎正在尝试给它一个列表，但只有一个元素。这可能不是你的意思。

`forkIO :: IO () -> IO ThreadID`--- 给出`forkIO`一个 i/o 动作，它（返回一个 i/o 动作）启动在一个新线程中运行的 i/o 动作，给你那个线程的 id。

这里有两个问题：

*   `forks`是一个函数，而不是一个 i/o 动作（它甚至不是一个返回 i/o 动作的函数，尽管您可能是认真的）
*   你给出`forkIO`第二个参数 ( `(mVar philosopher)`)，但它只需要一个参数

`mVar philosopher`本身没有任何意义：（`mVar :: [MVar a]`它是一个 MVar 列表，我还没有弄清楚 MVar 应该包含什么类型）但是您将它视为一个函数，将其`philosopher`作为参数传递。

这时，一个灯泡在我头顶闪烁。你想`forks`用参数`mVar`和`philosopher`？

```
sequence_ [ forkIO (forks mVar philosopher) ] 
```

不过，我们仍在对单个操作进行排序。也许您希望依次调用`forks`每个元素？`philosopher`

```
sequence_ $ map (\n -> forkIO (forks mVar n)) philosopher 
```

我们可以将其简化为

```
mapM_ (\n -> forkIO (forks mVar n)) philosopher 
```

这与您给出的类型不匹配`forks :: [MVar] -> [Int]`。但这可能是错误的，因此您接下来需要修复该功能。

# python - 排序对象字典

> ID：10743163
> 
> 赞同：3
> 
> 时间：2012-05-24T18:22:34.500
> 
> 标签：python

我有一个对象字典，其中键是简单的字符串，值是具有一些属性的数据对象。我想根据字典值中的属性对字典进行排序。我用它来根据字典值进行排序

```
sorted = dict.values()
sorted.sort(key = operator.attrgetter('total'), reverse=True) 
```

这会产生一个排序的值列表（这是预期的），并且我从字典中丢失了我的原始键（自然）。我想将键和值一起排序......我怎样才能做到这一点？任何帮助将不胜感激？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-24T18:25:28.067

使用`.items()`（或其迭代器版本`iteritems`）而不是`.values()`获取`(key, value)`元组列表。

```
items = sorted(dct.iteritems(), key=lambda x: x[1].total, reverse=True) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T18:26:39.850

使用`items`而不是`values`- 并且只使用 lambda 来影响排序键本身，因为不会有现成`operator` 的：

```
sorted = dict.items()
sorted.sort(key = lambda item: item[1].total, reverse=True) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T18:26:43.337

你会想使用`.items()`而不是`.values()`，例如：

```
def keyFromItem(func):
    return lambda item: func(*item)

sorted(
    dict.items(), 
    key=keyFromItem( lambda k,v: (v['total'], k) )
) 
```

以上将首先根据总数排序，对于总数相等的项目，将按字母顺序对它们进行排序。它将`(key,value)`成对返回项目，您可以这样做`[x[1] for x in sorted(...)]`来获取值。

# c# - 你如何将 ObservableCollection 放入 Textblock

> ID：10743164
> 
> 赞同：0
> 
> 时间：2012-05-24T18:22:37.430
> 
> 标签：c#, wpf, xaml, observablecollection, hierarchicaldatatemplate

我需要将 my`ObservableCollection<ValidationMessage>`放入我的`TextBlock`. 这是我的代码。现在它正在显示项目和子项目，但在消息显示它的位置`System.Collections.ObjectModel.ObservableCollection'1[ValidationWPF.DataSources.‌​ValidationMessages]`。

我认为这是因为它不能`ObservableCollection`放入`TextBlock`.

XAML：

```
<UserControl x:Class="ValidationWPF.ValidationUserControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"
             xmlns:local="clr-namespace:ValidationWPF.DataSources"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <UserControl.Resources>
        <DataTemplate x:Key="Messages">
            <TextBlock Text="{Binding Message}"/>
        </DataTemplate>

    </UserControl.Resources>
    <Grid x:Name="LayoutRoot" Background="White">

        <telerik:RadTreeView x:Name="radTreeView" Margin="8">
            <telerik:RadTreeView.ItemTemplate>

                <HierarchicalDataTemplate ItemsSource="{Binding SubItems}">
                    <TextBlock Text="{Binding item}" />
                </HierarchicalDataTemplate>

            </telerik:RadTreeView.ItemTemplate>
        </telerik:RadTreeView>

    </Grid>
</UserControl> 
```

验证消息类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ValidationWPF.DataSources
{
    public class ValidationMessage
    {
        public ValidationMessage(string Message)
        {
            this.Message = Message;
        }

        public string Message
        {
            get;
            set;
        }

    }
} 
```

验证项类：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Collections.ObjectModel;

namespace ValidationWPF.DataSources
{
   public class ValidationItem : ObservableCollection<ValidationItem>
    {
        public ValidationItem()
        {
            SubItems = new ObservableCollection<ValidationItem>();

        }

        public ObservableCollection<ValidationMessage> Message
        {
            get;
            set;
        }

        public string item
        {
            get;
            set;
        }

        public IList<ValidationItem> SubItems
        {
            get;
            set;
        }

        public static IList<ValidationItem> GetItems(string name)
        {
            var Validation = new ObservableCollection<ValidationItem>();

            var item = new ValidationItem();
            item.item = "Customer";

            var subItem = new ValidationItem();
            subItem.item = "Name";
            item.SubItems.Add(subItem);

            var Message = new ValidationItem();
            Message.item = new ObservableCollection<ValidationMessage>().ToString();
            subItem.SubItems.Add(Message);

            Validation.Add(item);

            return Validation;

        }
    }
} 
```

谢谢您的帮助！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T19:36:19.350

问题是 的`Text`属性`TextBlock`是一个字符串，而你给它一个`ObservableCollection`. WPF 知道转换两者的唯一方法是调用`ObservableCollection.ToString()`，它返回类的完整类型名称。

解决方法是`ObservableCollection`通过创建一个实现[System.Windows.Data.IValueConverter](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)的类将您的转换为字符串。这使您可以控制转换。

你可以像这样实现它：

```
using System.Globalization;
using System.Text;
using System.Windows.Data;

namespace ValidationWPF.DataSources
{
    class CollectionConverter : IValueConverter
    {
        object Convert(object value, Type targetType,object parameter,CultureInfo culture)
        {
            ObservableCollection<ValidationMessage> messages = (ObservableCollection<ValidationMessage>)value;

            var sb = new StringBuilder();
            foreach(var msg in messages)
            {
                sb.AppendLine(msg.Message);
            }

            return sb.ToString();
        }

        object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
        {
            return null;
        }
    }
} 
```

您可以在 XAML 文件中像这样使用它：

```
<UserControl x:Class="ValidationWPF.ValidationUserControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"
             xmlns:local="clr-namespace:ValidationWPF.DataSources"
             mc:Ignorable="d"
             d:DesignHeight="300" d:DesignWidth="300">
    <UserControl.Resources>
        <local:CollectionConverter x:Key="CollectionConverter" />

        <DataTemplate x:Key="Messages">
            <TextBlock Text="{Binding Message, Converter={StaticResource CollectionConverter}}"/>
        </DataTemplate>
    </UserControl.Resources>
    ...
</UserControl> 
```

现在 WPF 将`CollectionConverter.Convert()`在需要填充您的`TextBlock`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T19:32:58.127

我最终以一种不同且更清洁的方式进行操作。

XAML：

```
<UserControl x:Class="ValidationWPF.ValidationUserControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:telerik="http://schemas.telerik.com/2008/xaml/presentation"
             xmlns:local="clr-namespace:ValidationWPF.DataSources"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <UserControl.Resources>
        <!--<local:CollectionConverter x:Key="CollectionConverter"/>
            <DataTemplate x:Key="Messages">
            <TextBlock Text="{Binding Message}"/>
        </DataTemplate>--> 

    </UserControl.Resources>
    <Grid x:Name="LayoutRoot" Background="White">

        <telerik:RadTreeView x:Name="radTreeView" Margin="8" ItemsSource="{Binding Errors}">
            <telerik:RadTreeView.ItemTemplate>
                 <HierarchicalDataTemplate ItemsSource="{Binding SubItems}" >
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition/>
                            <RowDefinition/>
                        </Grid.RowDefinitions>
                        <TextBlock Text="{Binding Description}"/>

                        <ListBox Grid.Row="1" ItemsSource="{Binding Messages}">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <TextBlock Text="{Binding Message}"/>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </Grid>

                </HierarchicalDataTemplate>

            </telerik:RadTreeView.ItemTemplate>
        </telerik:RadTreeView>

    </Grid>
</UserControl> 
```

验证消息类：

```
 using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;

    namespace ValidationWPF.DataSources
    {
        public class ValidationMessage
        {
            public ValidationMessage(string name, string Message)
            {
                this.Message = Message;
                this.PropertyName = name;
            }

            public string Message
            {
                get;
                set;
            }

            public string PropertyName { get; set; }

        }
    }

VALIDATIONVIEWMODEL CLASS:

    using System;
    using System.Collections.Generic;
    using System.Linq;
    using System.Text;
    using System.Collections.ObjectModel;

    namespace ValidationWPF.DataSources
    {
        public class ValidationViewModel
        {
            public ValidationViewModel()
            {
                this.Errors = new ObservableCollection<ValidationItem>();

                ValidationItem item = new ValidationItem();
                item.Description = "Customer";

                ValidationMessage msg = new ValidationMessage("FirstName", "First name is required");
                item.Messages.Add(msg);

                this.Errors.Add(item);

                ValidationItem item2 = new ValidationItem();
                item2.Description = "Order";

                msg = new ValidationMessage("Quantity", "Quantity must be greater than zero");
                item2.Messages.Add(msg);

                item.SubItems.Add(item2);

            }

            public ObservableCollection<ValidationItem> Errors { get; set; }
        }
    } 
```

验证用户控制类：

```
 public partial class ValidationUserControl : UserControl
    {
        public ValidationUserControl()
        {
            InitializeComponent();
            this.DataContext = new ValidationViewModel();

        }

    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T19:33:44.850

你说的对。TextBlock 尝试将属性值视为字符串，而 ObservableCollection.ToString 将返回您所看到的内容。

您可以做的是添加一个新属性，将 ObservableCollection 的所有消息组合成一个字符串。像这样的东西：

```
public string MessagesCombined  
{
   get { return string.Join(Environment.NewLine, Message.Select(m => m.Message)); } 
} 
```

这会将 ObservableCollection 中的所有消息组合成一个字符串，每个项目由换行符分隔。（您可能需要对我的代码进行一些修改，我正在编写此代码而无需访问编译器......）。

# wordpress - wp-admin 和 wp-login.php - 非管理员用户的 404 错误（wordpress + htaccess）

> ID：10743171
> 
> 赞同：0
> 
> 时间：2012-05-24T18:23:21.933
> 
> 标签：wordpress, apache, .htaccess, hide, http-status-code-404

出于安全原因，我尝试在我的网站上将这些痕迹隐藏为 wordpress。有谁知道如何使用 htaccess 创建规则，根据该规则，如果第三方用户（具有不同的 ip）访问 wp-admin 和 wp-login.php，他会重定向到 /404.php ...我已经见过第三方插件（？）来解决这个问题，但我不想在CMS上创建额外的负载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T18:35:41.593

您可以像这样在 .htaccess 中使用简单的重定向

```
Redirect 301/wp-admin/ http://www.yourwebsite.com/404.php 
```

但是，如果您要完全隐藏 wordpress，则需要一些技术工作……我在我的工作中所做的是搜索 wp-include 和 wp-content 文件夹中的每个文件以及包含wp-login.php 和 /wp-admin/ *somefolder*单词，并将所有内容更改为文件或文件夹，以您选择的名称，没人能猜到。尽管您必须非常小心，以免在那里更改重要代码...

# ios - Box2D 对象在应该销毁它卡在其间的对象时卡住

> ID：10743173
> 
> 赞同：0
> 
> 时间：2012-05-24T18:23:33.620
> 
> 标签：ios, cocos2d-iphone, box2d

我正在使用 Cocos2D 和 Box2D 进行一些物理游戏。偶尔会出现一个问题，即我的“球/子弹/毁灭者”物体卡在两个“目标”物体之间，并且需要很长时间才能出来。

这是愚蠢的，因为子弹和目标物体之间的碰撞应该会破坏目标。（通常，当然，这很好用。）

[它并没有像这个问题](https://stackoverflow.com/questions/9451746/box2d-circular-body-stuck-in-corners)那样进入睡眠状态，因为它在两个物体之间的微小空间中疯狂地振动。

我将子弹作为 Box2D 中的“子弹”对象。

物体在前一帧中是否有一些最小距离才能算作碰撞？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T18:44:30.430

诀窍在于，对于给定的联系人“集群”，Box2D 联系人监听器调用（按此顺序）：

```
BeginContact()
PreSolve() // As many times as necessary
PostSolve() // As many times as necessary
EndContact() 
```

默认情况下，我只获取联系人，`EndContact()`这意味着在评估其效果之前会发生一系列快速碰撞。我将我的`destroy`-type 代码移入`PostSolve()`，一切都很好。

# java - SurfaceView 背景减慢 onDraw 20-30 ms

> ID：10743180
> 
> 赞同：0
> 
> 时间：2012-05-24T18:24:08.960
> 
> 标签：java, android, surfaceview, android-canvas

我使用以下代码在 surfaceCreated() 中设置了背景图像：

```
 Bitmap background = BitmapFactory.decodeResource(getResources(), R.drawable.untitled);
    float heightScale = ((float)background.getHeight())/(float)this.getHeight();
    float widthScale = (float)background.getWidth()/(float)this.getWidth();
    float scale = heightScale > widthScale ? widthScale : heightScale;
    int newWidth = Math.round((float)background.getWidth()/scale);
    int newHeight = Math.round((float)background.getHeight()/scale);
    scaled = Bitmap.createScaledBitmap(background, newWidth, newHeight, true); 
```

缩放为受保护的位图。在 onDraw() 函数期间，我有这个：

```
 canvas.drawBitmap(scaled, 0, 0, null); // draw the background 
```

与使用此功能相比，这会使我的绘图速度减慢 20-30 毫秒：

```
canvas.drawColor(Color.Black); 
```

有没有办法解决？加速后台onDraw函数？我注意到如果我不设置背景，应用程序将不会清除我绘制的精灵。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:51:22.353

嗯......这是你如何做到的：

您创建一个布局并将该布局设置为内容视图。然后将表面视图添加到布局中，然后将表面视图像素格式设置为透明，如下所示：

```
 panel = new Panel(this, getNewHandler());   
    ((LinearLayout)findViewById(R.id.panellinear)).addView(panel);
    SurfaceHolder p;
    panel.setZOrderOnTop(true);    // necessary
    p = panel.getHolder();
    p.setFormat(PixelFormat.TRANSPARENT) 
```

（对我来说，面板是扩展 SurfaceView 的东西）

# .net - 如何在我的组合框中对数据进行排序

> ID：10743194
> 
> 赞同：4
> 
> 时间：2012-05-24T18:25:19.223
> 
> 标签：.net, vb.net

我的组合框1 中有数据，想知道是否可以按字母顺序对组合框中的数据进行排序？

我花了很长时间试图通过搜索论坛找到答案，但找不到任何东西，我非常感谢您的帮助..

```
With ComboBox2
  .DisplayMember = "Name"
  .ValueMember = "FullName"
  .DataSource = New IO.DirectoryInfo("Path").GetFiles() _
  .Select(Function(fi) New With {.Name = _
          IO.Path.GetFileNameWithoutExtension(fi.FullName), fi.FullName}) _
  .ToArray()
End With 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T18:30:55.530

将`.Sorted`属性设置为`TRUE`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T18:53:43.007

首先对数据进行排序，然后将其绑定到组合框。

```
With ComboBox1
  .DisplayMember = "Name"
  .ValueMember = "FullName"
  .DataSource = New IO.DirectoryInfo("C:\asdf").GetFiles() _
  .Select(Function(fi) New With {.Name = _
          IO.Path.GetFileNameWithoutExtension(fi.FullName), fi.FullName}) _
  .OrderBy(Function(fi) CType(fi.Name, Integer)) _
  .ToArray()
End With 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T19:48:52.743

您可以在设置数据源的位置添加一个 .orderby LINQ 谓词吗？

```
.DataSource = unsorted.Select( ... ).OrderBy(Function(x) x.name).ToArray() 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-10T11:25:55.730

选择组合框的属性“数据源”并单击三个点，将显示一个查询，然后按升序对字段进行排序保存所有并重新启动数据库，祝你好运，，

瓦利德

# windows-server-2008 - 重新启动服务器后无法登录到 sql server 2008 R2

> ID：10743206
> 
> 赞同：1
> 
> 时间：2012-05-24T18:26:28.353
> 
> 标签：windows-server-2008, sql-server-2008-r2

我将 Windows-server-2008 与 Microsoft SQL Server 2008 一起使用。

对此有很多问题，但互联网上没有解决它。问题是重新启动服务器后我无法连接到我的 SQL Server 2008 R2。我在服务器中放置了一些新内存，重新启动后，我的客户端/服务器应用程序不再工作，因为它无法访问数据库。所以我尝试进入 SQL Server Management Studio (SSMS)，并尝试使用管理员和另一个用户登录，但两者都不起作用。

当我登录时显示以下消息：

> 无法连接到（本地）
> 
> 建立与 SQL Server 的连接时发生与网络相关或特定于实例的错误。服务器未找到或无法访问。验证实例名称是否正确以及 SQL Server 是否配置为允许远程连接。（提供者：命名管道提供者，错误：40 - 无法打开与 SQL Server 的连接）（Microsoft SQL Server，错误：2）

我尝试了很多不同的东西，比如：

*   重启服务器
*   尝试从 Sql Server 配置管理器手动启动服务器
*   命名管道 - 已启用
*   TCP/IP - 启用
*   尝试按照以下文章中的说明创建新的系统用户或数据库用户：[单击此处](http://beyondrelational.com/modules/2/blogs/115/posts/11143/how-to-access-a-newly-installed-sql-server-2008-r2-instance-if-you-do-not-know-the-login-and-passwor.aspx)

有人能帮帮我吗？我真的很困惑，因为我需要上网。否则我必须重新安装数据库服务器，但我没有备份。（是否有一些带有设置/表/列备份的文件夹被存储并且可以从重新安装中导入？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T02:15:47.510

I was having the exact same problem. net start mssqlserver was giving me the blurb about a failed login attempt. The problem was that I had recently changed the password for the administrator account, and the new password didn't get updated in services.

Here's how I fixed it:

First locate SQL Server from the list here:

![enter image description here](../Images/b0daa0e0bc5a6389957f8d444d4dadc2.png)

Right click and select properties, and navigate to the Log On tab:

![enter image description here](../Images/aaa7ba34e4e1e78ef5911fc72a2a3d80.png)

Then I typed the new password, and like magic I was able to start SQL Server right through the services manager.

I also did this for any other processes which were marked as "stopped" even though Startup Type was marked as "automatic" (namely, SQL Server Agent).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T18:28:02.487

它是命名实例还是默认值？另外，这是本地实例吗？（我看到“（本地）”，但只是想确定一下。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T07:01:15.883

从 services.msc 启动 sql server 服务并尝试连接

# python - 处理 mysqldb 时支持 utf-8

> ID：10743207
> 
> 赞同：0
> 
> 时间：2012-05-24T18:26:29.583
> 
> 标签：python, python-2.7, mysql-python

当我在 mysql 中插入查询时，我执行以下操作：

`execute(query.encode('utf8'))`

我首先使字符串与 unicode 兼容，然后执行。

现在，当我再次将数据从 sql 检索到我的 python 代码时，我是否需要通过应用编码函数使其再次兼容 unicode？如果是，则 sql 返回行块，如何对所有行进行编码？

我使用`cursor.fetchall()`. 如何使行的每个元素都与 unicode 兼容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T18:41:18.593

第一步：阅读并理解这一点：[http://www.joelonsoftware.com/articles/Unicode.html](http://www.joelonsoftware.com/articles/Unicode.html) #IMPORTANT

现在您知道程序中的所有文本数据都应该是 unicode（并且您不会再将 unicode 数据误认为是 utf-8 编码的字符串，或者不再将“encode”与“decode”混淆）

您可以在创建 mysql 连接时指定要使用的编码 - 在此处指定：http: [//mysql-python.sourceforge.net/MySQLdb-1.2.2/ <-检查“](http://mysql-python.sourceforge.net/MySQLdb-1.2.2/) **init** ”中的“charset”参数“连接”模块的方法 - 它可以作为参数传递给`MySQLdb.connect`调用

从那里开始，从此连接中检索到的所有文本数据都将以 unicode 的形式呈现给 Python，将存储在数据库中的数据编码为 un​​icode 字符串。

# php - 谷歌地图 api3 出错

> ID：10743209
> 
> 赞同：0
> 
> 时间：2012-05-24T18:26:35.030
> 
> 标签：php, javascript, google-maps, google-maps-api-3

我正在尝试在我的网页中嵌入带有标记的谷歌地图。但是如果我使用以下代码，我会收到一条未定义的警报消息

```
var infowindow = null;
var geocoder;
$(document).ready(function () { initialize();  });

function codeAddress(address) {
    geocoder = new google.maps.Geocoder();
    geocoder.geocode( { 'address': address}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            //alert(results[0].geometry.location);
            return (results[0].geometry.location);
        } 
    });
}

function initialize() {
    default_location = codeAddress("<?php echo $location;?>");
    alert(default_location);
} 
```

取而代之的是，如果我在下面的 codeAdress 函数中执行警报，则它正确显示了纬度和经度。

```
var infowindow = null;
var geocoder;
$(document).ready(function () { initialize();  });

function codeAddress(address) {
    geocoder = new google.maps.Geocoder();
    geocoder.geocode( { 'address': address}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            alert(results[0].geometry.location);

        } 
    });
}

function initialize() {
    codeAddress("<?php echo $location;?>");
} 
```

有人可以确定问题所在吗？我是 javascripts 的新手

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T18:44:08.280

地理编码器调用是异步的，这意味着它需要一些时间才能返回，并且不遵循所写的顺序。这也意味着在第一位，函数在到达您的`return (results[0].geometry.location)`语句之前完成。所以`alert`没有什么可展示的。

除了在`geocode`请求中插入语句之外，您还可以编写回调模式来分离脚本逻辑。将位置作为参数传递的回调在`geocode`调用成功时执行。

[http://jsfiddle.net/3KXKm/](http://jsfiddle.net/3KXKm/)

```
 var infowindow = null;
  var geocoder = new google.maps.Geocoder();

  $(document).ready(function () { initialize();  });

  function codeAddress(address, callback) {
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        callback(results[0].geometry.location);
      } 
    });
  }

  function initialize() {
    codeAddress("Chicago, IL", function(default_location) {
      var map = new google.maps.Map(document.getElementById("map_canvas"),
        { center: default_location,
        zoom: 3, mapTypeId: google.maps.MapTypeId.ROADMAP });

      locations = ["Los Angeles", "Davis", "Truth or Consequences",
        "Ann Arbor", "Massachusetts"];

      for (var i = 0; i < locations.length; i++) {
        codeAddress(locations[i], function(latLng) {
          new google.maps.Marker({map:map, position:latLng});
        });
      }
    });
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T18:34:43.730

地理编码不会立即返回结果。这就是为什么您在代码的第一个版本中什么也得不到。因此，如果您想对地理编码结果做一些事情，您应该在回调函数中进行，就像在您的代码的第二个版本中一样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T18:36:27.067

您的

```
return (results[0].geography.location); 
```

只返回嵌套函数的值，不返回 codeAddress 函数的值。也许如果你告诉我们你想做什么，我们可以提供帮助。

# java - 如何获取文件路径？

> ID：10743214
> 
> 赞同：-1
> 
> 时间：2012-05-24T18:26:50.177
> 
> 标签：java, eclipse, jsp, url, tomcat

我正在开发一个 Eclipse Web 动态项目，并尝试访问存在于我的本地机器/服务器中的文件。

我正在寻找类似 CodeIgniter 中的“base_url()”的东西，它会自动指向服务器所在的目录。

我正在使用 Mac。

```
try{
          model.read(new FileInputStream(url),"");
      }catch(IOException e)
      {
          System.out.println("Exception caught"+e.getMessage());
      } 
```

这是我正在处理的代码的一部分，我试图提供正确的 URL 路径以供阅读。

在搜索 StackOverflow 和其他地方后，我遇到了这段代码：

```
String url = request.getRequestURL().toString().replace(request.getRequestURI().substring(1), request.getContextPath())
            +"/WebContent/WEB-INF/test.xml"; 
```

这似乎不起作用。

然后我尝试对路径目录进行硬编码，结果发现我不知道 Mac 文件系统是如何工作的：/

任何人都可以分享一些关于这一点的信息吗？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T18:34:48.633

`servlet`如果您使用的是 a或其他东西（如 WS），我不太了解，但是该`request`对象公开了一个名为的方法，该方法`getRealPath()`很好地提供了……文件系统中 servlet 上下文的真实路径。

所以你需要用这个来改变你的代码：

```
String url = this.getServletContext().getRealPath("")+"/test.xml"; 
```

它与操作系统无关，因为您肯定知道 java 是可移植的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T18:44:30.840

我想你想要的是

```
String path = getServletContext().getRealPath("/"); 
```

指向服务器中应用程序的 bas 目录

```
e.g. /opt/tomcat/webapps/MyApp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T18:47:43.863

我总是使用 getResourceAsStream 并将其从我的课程路径中吸走。平面文件名在 Web 应用程序内部存在问题。

# javascript - myObject.someFunc = function(){...}; 有什么区别？还是 javascript 中的 myObject.prototype.someFunc = function(){...}？

> ID：10743221
> 
> 赞同：2
> 
> 时间：2012-05-24T18:27:06.853
> 
> 标签：javascript

假设我在 javascript 中创建了一个对象。

```
var myObject = {}; 
```

有什么区别...

```
myObject.someFunc = function(){...}; 
```

和

```
myObject.prototype.someFunc = function(){...} 
```

在javascript中？

我无法理解差异或是否存在差异以及如何以及何时使用这些语法中的任何一种。

当我编写这样的代码时，似乎真的没有区别。

我正在寻找客户端（浏览器）和服务器端（如 node.js）的答案。

我想正确准确地编码，这真的很困扰我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T18:29:55.693

在这种情况下：

```
var myObject = {};
myObject.someFunc = function(){...}; 
```

您所做的只是创建一个普通对象，该对象恰好具有一个对函数的引用的属性。这通常仅用于*名称间距*，即将一整套函数组合在一个公共对象下的一个位置。

但是请注意，`var myObject = {}` *实际上并没有，`prototype`*因此您的第二个示例是不可能的。

对于具有原型的对象，它必须是构造函数的结果，即

```
function MyObject() {
    ...
}

MyObject.prototype.someFunc = function() { }

var myObject = new MyObject();
// myObject.someFunc can now be used 
```

原型是构造函数的属性——不是该类的任何*实例。*

如果您将函数放在原型上，则该函数对象仅存在一个实例，并且将由该类的所有实例共享。这比在每个实例上都有一个副本更节省内存。

无论代码是在浏览器中还是在服务器上，所有这些都适用——它仍然是同一种语言。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T18:31:16.420

`myObject.someFunc = function(){...}`是该函数的一次性实例，其返回值被分配给 myObject 的 someFunc 属性。

`myObject.prototype.someFunc = function(){}`实际上是创建一个可以在 myObject 上的任何位置调用的方法，并且每次都会更改相同的值实例。

```
myObject.prototype.someFunc = function(num){
    this.num_to_be_stored = num;
} 
```

将更改 num_to_be_stored 的值而不是 someFunc ，这是第一个实例中发生的情况。

编辑：对不起，清晨不清楚我想说什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T18:31:44.273

本质上，这表示一个静态方法（或仅附加到该对象的方法（在本例中为 myObject）：

```
myObject.someFunc = function () {...}; 
```

这表示附加到对象原型的方法（实例方法）：

```
myObject.prototype.someFunc = function () {...}; 
```

# php - 提交按钮未提交

> ID：10743224
> 
> 赞同：2
> 
> 时间：2012-05-24T18:27:14.653
> 
> 标签：php, html, css, submit

```
<div class = 'buttons'>
 <button type="submit" class="regular" name="save">
        <img src="elephant.png" alt=""/>
        Memory
 </button>
</div> 
```

这是提交按钮的代码

但是，当我尝试使用 php 验证表单时，按钮似乎没有提交

```
<?php if( isset($_POST['save']) && $_POST['save'])
{
$submit = $_POST['save'];
echo "lol";
}
else
{
echo "lola";

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T18:29:15.507

提交按钮仅适用于表单。尝试将整个内容包装在`form`标签中，然后重试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T18:35:11.917

发布表单时，您的提交按钮没有任何价值可发送。**该`<button>`元素*不会*将其元素的内容作为其提交值发送。**您仍然必须向`value`元素添加属性才能使其*具有*提交的值。既然你不这样做，它会发送一个空字符串，这会导致你的条件语句失败：

```
if( isset($_POST['save']) && $_POST['save']) 
```

由于`$_POST['save']`是空的，第二部分返回 false ，因此它进入你的`else`块。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-12-23T16:03:24.673

这是您想要的代码：

```
<form name="myForm" action="<?php echo $_SERVER['PHP_SELF']; ?>" method="post">
<div class="buttons">
 <button type="submit" class="regular" name="save" value="Save">
        <img src="elephant.png" alt="Elephant" />
        Memory
 </button>
</div>
</form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T18:35:29.557

如前所述，您的代码缺少包装。虽然提交按钮作为按钮可能在没有表单的情况下工作，但捕获 _POST 数据肯定不会。

此外，您的图像按钮解决方案可能会更好，可能是这样的：

```
<style type="text/css">
    input[type="submit"] {background: url('elephant.png') right no-repeat; padding: 10px; padding-left: 30px; font-size: 14px; font-weight: bold;} /* or call this .regular */
</style>
<?
if ($_POST['save']) { // the trigger
    echo '<h1>Cooking with fire now!</h1>';
}
?>
<form method="POST" action="">
    <div class="buttons">
        <input type="submit" name="save" value="Memory" class="regular" />
    </div>
</form> 
```

*   注意`class = "buttons"`带空格的，是不正确的语法！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T18:35:34.280

*   您应该在`<form method="post" action="path/to/your/php/processing/file">`和`</form>`标签中包含您的代码
*   将您的按钮代码替换为`<input type="submit" class="regular" name="save" />`
*   从 if 的条件中删除`isset($_POST['save']) &&`部分，因为您没有`value`为按钮设置。

# java - 安卓版 LuaJava？

> ID：10743225
> 
> 赞同：3
> 
> 时间：2012-05-24T18:27:32.673
> 
> 标签：java, android, android-ndk, lua, luajava

是否可以在 android 应用程序中使用 LuaJava？

LuaJava 项目目录包含适用于 Windows 和 Linux 的 makefile。为Android创建一个并使用NDK编译并不会太难，但我只想知道它是否可行。

**编辑** 我正在使用 Lua 引擎。我想知道我是否可以从 Lua 调用 Java 函数/创建 Java 对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-19T20:15:29.820

你可以从 AndroLua 开始：[https ://github.com/mkottman/AndroLua](https://github.com/mkottman/AndroLua)

从主页：

*   它包括 LuaJava，因此您可以访问（几乎）Android API 提供的所有内容
*   因为在软键盘上编写代码可能很困难，所以您可以使用 TCP 从您的计算机上传代码连接到它

# java - 如何从设备的菜单中隐藏应用程序图标？

> ID：10743226
> 
> 赞同：1
> 
> 时间：2012-05-24T18:27:43.277
> 
> 标签：java, android

我有以下问题 - 我需要我的用户不能在他的菜单上看到我的应用程序图标，只能在他安装的程序列表中。是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T18:36:23.063

在你的`AndroidManifest.xml`

删除以下行（告诉 android 在启动器中显示应用程序）：

`<category android:name="android.intent.category.LAUNCHER" />`

# ruby-on-rails - Rails - 使用 fields_for 使用与 new/edit 相同的表单

> ID：10743229
> 
> 赞同：0
> 
> 时间：2012-05-24T18:28:02.797
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-attributes, fields-for

我有5个模型，

1.  人
2.  人车
3.  汽车（有很多轮胎）
4.  person_car_tire
5.  轮胎（属于汽车）

所以我有这个视图_form.html.erb

```
<%= form_for(@person) do |f| %>
  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div>

  <% Car.all.each do |c|%>
  <div class="field">
    <%= f.fields_for(:person_cars) do |ff|%>
      Car Name:   <%= ff.check_box :car_id %>|<%= c.car_name%>
      <% c.tires.each do |b|%>
      <div class="field">
        <%= ff.fields_for(:person_car_tires) do |fff|%>
          Tire: <%#= fff.check_box :tire_id%>|<%= b.tire_name%>
        <%end%>
      </div>
      <%end%>
    <%end%>
  </div>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

当我保存它时它工作得很好，当我想使用这个表单进行编辑时，问题就来了，因为它在视图中重复了每辆车的数据 4 次。我一直在搜索允许额外选项的字段，所以我做了：

```
<%= form_for(@person) do |f| %>

  <div class="field">
    <%= f.label :name %><br />
    <%= f.text_field :name %>
  </div>
  <div>

  <% @person.cars.each do |c|%>
  <div class="field">
    <%= f.fields_for(:person_cars, c) do |ff|%>
      Actividad:   <%= ff.check_box :car_id %> | <%= c.car.name%>
      <% c.person_car_tires.each do |t|%>
      <div class="field">
        <%= ff.fields_for(:person_car_tires, t) do |fff|%>
          Tarea: <%#= fff.check_box :tire_id%>|<%#= t.tire.name%>
        <%end%>
      </div>
      <%end%>
    <%end%>
  </div>
  <%end%>

  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

现在它可以工作了，但只显示我在新动作中选择的汽车和轮胎。不是我想要的（因为如果我使用第一个表单，它会在视图中复制复选框）。

如何对这两个操作使用相同的表单？

希望可以有人帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T05:54:56.663

您可以对新建和编辑使用相同的 _form 部分。您只需要将设置为不同值的局部变量传递给此表单。基本上，无论有什么不同，都将其作为参数（局部变量）抽象为这个类似函数的部分。

# ruby-on-rails - 在 Rails 中创建具有关系的唯一行

> ID：10743232
> 
> 赞同：0
> 
> 时间：2012-05-24T18:28:14.577
> 
> 标签：ruby-on-rails, activerecord

这是我当前的数据库设置：[https ://gist.github.com/8dfad988528fc9fbc394](https://gist.github.com/8dfad988528fc9fbc394)

我只想在不存在类似主机的情况下创建主机（匹配 :host 和 :port），然后我想将该主机的关系添加到关系表中。

多个用户可以拥有一个主机，或者一个主机可以属于多个用户。我当前的数据库设置工作正常并创建了关系，我只是不确定如何在 Rails 中优雅地执行此操作。到目前为止，我已经通过手动将值输入数据库进行了测试，如下所示：

```
@host = Host.find_or_create_by_host(host: params[:host], port: params[:port])
@user = User.find(1)
@user.relation.create(user_id: @user.id, host_id: @host.id) 
```

有没有更好的方法来做到这一点，如果有，那会是什么。

## 解决方案

```
@host = Host.where(host: params[:host], port: params[:port]).first_or_create
@host.users << User.find(1) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T18:45:17.437

你可以做

```
host.users << User.find(1) 
```

应该就是这样:-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T18:43:58.750

只需使用它，ActiveRecord 就会处理关系：

```
@host = Host.find_or_create_by_host(host: params[:host], port: params[:port])
@user = User.find(1)
@user.hosts << @host
@user.save 
```

# ruby-on-rails - 如何将应用程序布局打包到 Ruby gem 中？

> ID：10743234
> 
> 赞同：4
> 
> 时间：2012-05-24T18:28:30.873
> 
> 标签：ruby-on-rails, layout, view, gem, gemspecs

我正在开发一个包含三个不同应用程序的项目。他们应该共享一些模型和外部布局。为避免代码重复，我尝试将应用程序布局 ( `project_name/app/views/layouts/application.html.haml`) 提取到 gem 中。

我按照以下步骤操作：

1.  创建基础 gem 结构`bundle gem common`
2.  将布局文件放在里面`common/app/views/layouts/application.html.haml`
3.  编写了 Gemspec 描述符

    ```
    # -*- encoding: utf-8 -*-
    require File.expand_path('../lib/common/version', __FILE__)

    Gem::Specification.new do |gem|
      gem.authors       = ["Arthur Alkmim"]
      gem.email         = ["myemail@here"]
      gem.description   = %q{Common project files}
      gem.summary       = %q{Common project files, including layout and migrations}
      gem.homepage      = ""

      gem.files         = `git ls-files`.split($\)
      gem.executables   = gem.files.grep(%r{^bin/}).map{ |f| File.basename(f) }
      gem.test_files    = gem.files.grep(%r{^(test|spec|features)/})
      gem.name          = "common"
      gem.require_paths = ["lib"]
      gem.version       = Common::VERSION
    end 
    ```

4.  提交更改

5.  `gem build common.gemspec`（成功的）
6.  `rake install`（成功的）
7.  放入`gem 'common'`项目 Gemfile

但是该项目仍然不会加载应用程序布局。我应该怎么做才能告诉我的项目必须通过 gem 加载布局文件？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T01:05:27.693

您是否已将 gem 添加到 Rails Gemfile 以将其包含在您的应用程序中？

您可以使用 path 选项来指定开发中的相对路径。例如

```
gem 'common', :path => "../path/to/gem" 
```

不要忘记然后运行`bundle install`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T16:01:35.113

我解决了它。我更改`application.html.haml`为`common.html.haml`并将相关的布局调用放在 ApplicationController 中。似乎 Rails 不允许我将 application.html 布局打包在 gem 中，但其他布局还可以。如果有人提出更好的解决方案（更少的解决方法），请发布！

# java - 生成器模式中的重复

> ID：10743236
> 
> 赞同：3
> 
> 时间：2012-05-24T18:28:52.840
> 
> 标签：java, dry

我正在使用构建器模式（如 Joshua Bloch's 中所解释的那样`Effective Java`）来做一些事情，并且涉及到一个特别烦人的重复：

```
public class Foo {
    private String name;
    private int age;

    public static class Builder implements IBuilder {
        private String name;
        private int age;

        Builder name(String value) {
            name = value;
            return this;
        }

        Builder age(int value) {
            age = value;
            return this;
        }

        Foo build() {
           return new Foo(this);
        }
    }

    private Foo(Builder builder) {
        name = builder.name;
        age = builder.age;
    }
} 
```

它很小，但很烦人。我必须在每个类中声明变量。我尝试使用字段创建一个类并扩展该类，但出现错误：`{variable_name} has private access in {class_name}`.

有没有办法在不公开变量的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:47:13.697

如果您的构建器纯粹是为了捕获一堆状态（而不是进行任何中间计算），您可以通过定义构建器接口来解决重复问题，然后编写一个 Java 代理生成器。

如果您要这样做，则不能依赖外部类访问构建器（内部）类的私有字段。要解决这个问题，您还需要为每个字段定义访问器。例如：

```
public class Foo {
  public interface Builder extends IBuilder {
    Builder name(String name);
    String name();

    Builder age(int age);
    int age();
    ...
  }

  public static Builder builder() {
    return BuilderFramework.newInstance(Builder.class);
  }

  public Foo(Builder builder) {
    ...
  }
} 
```

`Map`或者，您的构建器可以以或类似的结构公开所有字段。使用该路由，您的界面只需要链接设置器。但是您放弃了对构造函数中所有字段使用情况的编译时检查。恕我直言，妥协太大了。

# oracle - 运行时错误 - 命名查询未知 - Nibernate、Oracle、C#

> ID：10743239
> 
> 赞同：1
> 
> 时间：2012-05-24T18:28:58.907
> 
> 标签：oracle, stored-procedures, fluent-nhibernate, nhibernate-mapping, runtime-error

我在 Stackoverflow 和其他地方查看了许多示例和问题/答案。我不明白为什么我的 C# 看不到 Oracle SP。任何帮助，将不胜感激。

基本目标——

我有一个 Oracle SP（如下所示），它在返回参数 #1 中返回一个游标，并在 #2 和 #3 中给出了两个字符串参数。

我从 C# 调用 SP，试图将返回的结果集放入类 ExtractCoastalSurvey1SP 的 C# 列表中。（如下图）

我的代码在 Nhibernate 命令 GetNamedQuery 上崩溃了。

Oracle SP、NHibernate 映射 XML 文件、NHibernate 映射代码、调用代码和运行时错误转储都在下面。

如果您需要更多信息，请告诉我 - gmail.com 上的 sblalock。

谢谢您的帮助。解决这个问题，在我眼中提升为神！干杯，有一个祝福的一天！

M.斯科特·布莱洛克

## 运行时错误

```
Named query not known: PROC_MASSANDABUNDANCE Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: NHibernate.MappingException: Named query not known: PROC_MASSANDABUNDANCE

Source Error:

Line 7257:////query.SetParameter("SPECIESCODE_IN", "6186020202");
Line 7258: Line 7259: IQuery query = Session.GetNamedQuery("PROC_MASSANDABUNDANCE"); Line 7260: query.SetParameter("PROJECTCODE_IN", "P94"); Line 7261: query.SetParameter("SPECIESCODE_IN", "6186020202");

Source File: C:\Visual Studio 2008\Projects\SEAMAP\SEAMAP\SEAMAP\Service\DBRepository.cs Line: 7259

Stack Trace:

[MappingException: Named query not known: PROC_MASSANDABUNDANCE] NHibernate.Impl.AbstractSessionImpl.GetNamedQuery(String queryName) +509 SEAMAP.Services.DBRepository.ExtractCoastalSurvey1Collection(String[] _AreaArray, String _LatitudeRangeBegin, String _LatitudeRangeEnd, String _YearRangeBegin, String _YearRangeEnd, String _Season, String _State, String _DepthZone, String[] _SelectedMonthArray, String[] _SelectedYearArray, String[] _SelectedScientificNamesArray, String[] _SelectedCommonNamesArray, String[] _SelectedACCSPGridArray) in C:\Visual Studio 2008\Projects\SEAMAP\SEAMAP\SEAMAP\Service\DBRepository.cs:7259 SEAMAP.Controllers.ReportsController.ExtractCoastalSurvey(ExtractCoastalSurveyParameters _model) in C:\Visual Studio 2008\Projects\SEAMAP\SEAMAP\SEAMAP\Controllers\ReportsController.cs:277 lambda_method(ExecutionScope , ControllerBase , Object[] ) +140 System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters) +17 System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary2 parameters) +178 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary2 parameters) +24 System.Web.Mvc.<>c_DisplayClassd.b_a() +52 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func1 continuation) +254 System.Web.Mvc.<>c__DisplayClassf.<InvokeActionMethodWithFilters>b__c() +19 System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList1 filters, ActionDescriptor actionDescriptor, IDictionary2 parameters) +192 System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +314 System.Web.Mvc.Controller.ExecuteCore() +105 System.Web.Mvc.ControllerBase.Execute(RequestContext requestContext) +39 System.Web.Mvc.ControllerBase.System.Web.Mvc.IController.Execute(RequestContext requestContext) +7 System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__4() +34 System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21 System.Web.Mvc.Async.<>c__DisplayClass81.b__7(IAsyncResult _) +12 System.Web.Mvc.Async.WrappedAsyncResult`1.End() +59 System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +44 System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.EndProcessRequest(IAsyncResult result) +7 System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +8699438 System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +155 
```

## 来自甲骨文

```
PROCEDURE PROC_MASSANDABUNDANCE 
(p_recordset OUT SYS_REFCURSOR,PROJECTCODE_IN IN VARCHAR2, SPECIESCODE_IN IN VARCHAR2) AS 

BEGIN

OPEN p_recordset FOR

SELECT * FROM TABLE;

END PROC_MASSANDABUNDANCE; 
```

## 映射.HMB.XML 文件

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" namespace="SEAMAP" assembly="SEAMAP" >

  <sql-query name="PROC_MASSANDABUNDANCE" Callable="true">
     <query-param name="PROJECTCODE_IN" type="string" />
     <query-param name="SPECIESCODE_IN" type="string" />

    <return class="SEAMAP.Models.ExtractCoastalSurvey1SP" />

    { call PROC_MASSANDABUNDANCE(:PROJECTCODE_IN :SPECIESCODE_IN) } 

  </sql-query>

</hibernate-mapping> 
```

## C# 代码

## 映射代码

```
 private static ISessionFactory CreateSessionFactory()
    {
        return Fluently.Configure()
               .Database(OracleClientConfiguration.Oracle10
               .ConnectionString(c => c.FromConnectionStringWithKey(connString))
               .ShowSql())
               .ExposeConfiguration(c => c.SetProperty("current_session_context_class", "web"))
               .Mappings(m => m.FluentMappings.AddFromAssemblyOf<Project>())
               .Mappings(m => m.HbmMappings.AddFromAssemblyOf<Project>())
               .BuildSessionFactory();
    } 
```

## 调用代码

```
 IQuery query = Session.GetNamedQuery("PROC_MASSANDABUNDANCE");
                    query.SetParameter("PROJECTCODE_IN", "P94");
                    query.SetParameter("SPECIESCODE_IN", "6186020202");

                    return query.List<ExtractCoastalSurvey1SP>(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T18:32:49.097

当您将模式名称附加到过程时会发生什么？如 [schema].[procedure]。

对于我在 C# 应用程序中的打包代码，我总是将光标放在最后，但这对于 fluent-nhibernate 可能不是强制性的

# java - Only some users reporting "Resource Not Found" error. Does this make sense?

> ID：10743241
> 
> 赞同：35
> 
> 时间：2012-05-24T18:29:00.853
> 
> 标签：java, android, jodatime, crittercism

I am seeing a a couple of errors coming up on Crittercism (Crash reporting service) for my published Android app. The trace is the following:

```
0   java.io.IOException: Resource not found: "org/joda/time/tz/data/ZoneInfoMap" ClassLoader: dalvik.system.PathClassLoader@45908320
1    at org.joda.time.tz.ZoneInfoProvider.openResource(ZoneInfoProvider.java:211)
2    at org.joda.time.tz.ZoneInfoProvider.<init>(ZoneInfoProvider.java:123)
3    at org.joda.time.tz.ZoneInfoProvider.<init>(ZoneInfoProvider.java:82)
4    at org.joda.time.DateTimeZone.getDefaultProvider(DateTimeZone.java:462)
5    at org.joda.time.DateTimeZone.setProvider0(DateTimeZone.java:416)
6    at org.joda.time.DateTimeZone.<clinit>(DateTimeZone.java:115)
7    at org.joda.time.chrono.GregorianChronology.<clinit>(GregorianChronology.java:71)
8    at org.joda.time.chrono.ISOChronology.<clinit>(ISOChronology.java:66)
9    at org.joda.time.base.BaseDateTime.<init>(BaseDateTime.java:61)
10   at org.joda.time.DateTime.<init>(DateTime.java:155) 
```

Searching shows this this is usually a compiling problem (Usually that the Joda Time Library was not added to the build path or something), but then why would only about 4 users out of a couple thousand see this error?

My only guess is that someone is trying to decompile the app to pirate it (Its a fairly popular paid app), and sees this error when they incorrectly re-compiled. In that case I am glad they are seeing errors and I dont need to worry about this.

The other weird thing is that the code causing the problem was surrounded by a try/catch, which didnt seem to catch it:

```
try {
    DateTime dt = new DateTime();
    DateTimeFormatter fmt = ISODateTimeFormat.dateTime();
    return fmt.print(dt);
} catch (Exception e) {
    //Report issue to Analytics service
} 
```

Which to me, makes it seem even more unlikely that this error would show up on Crittercism, since it should've been caught. Can anyone explain this?

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2015-03-07T17:32:43.043

如果您错过初始化，可能会发生这种情况：

```
JodaTimeAndroid.init(this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-29T23:54:27.250

我从一个流行的免费应用程序中看到类似的、不常见的报告。到目前为止我还没有复制它。网络上散布着[各种](http://joda-interest.219941.n2.nabble.com/java-io-IOException-Resource-not-found-quot-org-joda-time-tz-data-ZoneInfoMap-td7572448.html) [关于](https://community.oracle.com/thread/1314018?start=0)这个[问题的参考资料，但并非都涉及 Android。](http://sourceforge.net/p/joda-time/discussion/337835/thread/2798a578/)

一条线索：ZoneInfoMap 是原始 jar 中的资源文件，而不是类。因此，如果各种应用程序市场中的任何一个都在剥离非类信息（例如 unjar 然后 re-jar），ZoneInfoMap 将是一个候选者。同样，如果任何类加载器实用程序对于非类资源存在安全性或愚蠢性问题，ZoneInfoMap 将是一个候选者。

另一个角度：有问题的运行时环境是否可以在类路径的早期有自己的 joda-time jar，一个缺少 /data/ 段的 jar？

底线：这似乎是 Android 狂野西部的另一个例子，我学会了忽略它，直到我找到一个复制品。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-12T13:47:16.143

我也遇到了同样的问题，在谷歌上进行了大量的挖掘搜索后，我想通了。ZoneInfoMap 文件是通过使用以下参数运行 jodaTime (ZoneInfoCompiler) 创建的：

```
 -dst src\org\joda\time\tz\data src\org\joda\time\tz\src\africa 
src\org\joda\time\tz\src\antarctica src\org\joda\time\tz\src\asia 
src\org\joda\time\tz\src\australasia src\org\joda\time\tz\src\backward 
src\org\joda\time\tz\src\etcetera src\org\joda\time\tz\src\europe 
src\org\joda\time\tz\src\northamerica src\org\joda\time\tz\src\pacificnew 
src\org\joda\time\tz\src\southamerica src\org\joda\time\tz\src\systemv 
```

这会将所有时区添加到 jodaTimer，如果您也知道如何创建更多时区，我相信您可以创建更多时区，如果您不需要所有时区，则不必包括所有时区。

为什么它因该错误而崩溃是因为它正在寻找一个不存在的文件。不确定为什么 try catch 不起作用，但我怀疑这与 jodaTimer 是一个 JAR 库（至少我的库是）这一事实有关？

不确定这是否是它的意思，或者是否有更好的解决方案，但这就是我所做的，它现在对我来说非常有效。

帮助我得出这个结论的参考资料：http: [//joda-interest.219941.n2.nabble.com/How-to-run-Joda-time-s-test-Resource-Not-Found-exception-td5913668.html](http://joda-interest.219941.n2.nabble.com/How-to-run-Joda-time-s-test-Resource-Not-Found-exception-td5913668.html) [http://sourceforge.net/p/joda-time/discussion/337835/thread/2798a578/](http://sourceforge.net/p/joda-time/discussion/337835/thread/2798a578/)

我希望这有帮助。

# rest - 为 Microsoft SkyDrive 创建非基于 Web 视图的登录屏幕

> ID：10743243
> 
> 赞同：1
> 
> 时间：2012-05-24T18:29:08.290
> 
> 标签：rest, ios5, user-interface, oauth-2.0

我正在尝试实现如下所示的登录视图，以允许用户登录他们的 Microsoft Live 帐户，然后允许应用程序下载他们的 SkyDrive 数据。

![登录页面示例](../Images/85e1959d83514ca2ce280deadc16b2ed.png)

我一直在阅读[msdn](http://msdn.microsoft.com/en-us/library/live/hh826543.aspx#objective_c)上的 API 文档，并且似乎该文档以您为中心，使用我想避免的标准 Web UI 登录表单（如下图所示）。

![标准页面示例](../Images/58b1dc2f25c1fb5dc68ec467df528cb0.png)

因此，我正在寻找文档或实现自定义登录表单以登录到 Windows Live 以获取 SkyDrive 数据的示例。任何信息都会非常有帮助，因为我很困惑。

[注意：在github](https://github.com/liveservices/LiveSDK-for-iOS/issues/4)上也有一个关于同一主题的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:38:45.360

经过一番挖掘后，我发现微软只允许您通过他们的界面使用 OAuth 2.0 登录（如上图所示）。我最初想要的完全违背了他们的 SDK 的设计，并且不/不会被支持。

根据[github](https://github.com/liveservices/LiveSDK-for-iOS/issues/4)上发布的问题，最终可能会有一种方法允许通过 Skydrive iOS 应用程序进行身份验证。然而，到目前为止，只有一种方法可以通过他们的 SDK 或 API 进行身份验证。

这也在文档中说明：

```
Your app must initiate the sign-in process by contacting the Live Connect authorization web service. 
```

资源：

*   [文档](http://msdn.microsoft.com/en-us/library/live/hh826543.aspx)
*   [Github问题](https://github.com/liveservices/LiveSDK-for-iOS/issues/4)
*   [LiveSDK-iOS](https://github.com/liveservices/LiveSDK-for-iOS)

# ios - Monotouch UIView Appearance changing UITextField background colors, UIButton background colors, etc

> ID：10743246
> 
> 赞同：0
> 
> 时间：2012-05-24T18:29:18.560
> 
> 标签：ios, uiview, uiviewcontroller, xamarin.ios

I am trying to implement a custom appearance for UIView when contained in UIViewController.

```
var viewStyle = UIView.AppearanceWhenContainedIn(typeof(UIViewController));
viewStyle.BackgroundColor = UIColor.Blue; 
```

The result I get from doing this is something ugly, like this: ![messedUpView](../Images/95d0a8bb8ecd6151dedc6383e89755c6.png)

I tried adding code to change the UITextField/UIButton background by doing:

```
var txtBoxStyle = UITextField.AppearanceWhenContainedIn(typeof(UIViewController));
txtBoxStyle.BackgroundColor = UIColor.White;

var btnStyle = UIButton.AppearanceWhenContainedIn(typeof(UIViewController));
btnStyle.SetTitleShadowColor(UIColor.White, UIControlState.Normal);
btnStyle.SetTitleColor(UIColor.Black, UIControlState.Normal); 
```

but that doesn't help my result at all (the above image isn't updated from when I changed the button title color from white to black, you'll have to imagine the button's text as black instead of white). Anyone know how to get rid of that ugly blue in the (foreground or background?) of the UITextFields and UIButtons? Bonus if you can figure out why the Title's background is blue as well and how to fix that!

# c - 无法在 C 中使用 Libxml2 解析 XML

> ID：10743248
> 
> 赞同：1
> 
> 时间：2012-05-24T18:29:42.360
> 
> 标签：c, xml, libxml2

我是 libxml2 的新手并从一个示例开始，我不明白为什么我的示例代码没有读取某些标签。我以这种方式拥有我的 XML 文件。

```
<ACCOUNTS>
<ACCOUNT NO="123">
<STATE>GA</STATE>
<NAME>John</NAME>
</ACCOUNT>
<ACCOUNT NO="123">
<STATE>GA</STATE>
<NAME>Burgess</NAME>
</ACCOUNT>
</ACCOUNTS> 
```

这是我的示例代码：

```
void getReference (xmlDocPtr doc, xmlNodePtr cur) {
    xmlChar *uri;
    xmlChar *value;
    cur = cur->xmlChildrenNode;
    while (cur != NULL) {
        if ((!xmlStrcmp(cur->name, (const xmlChar *)"ACCOUNT"))) {
            uri = xmlGetProp(cur,(const xmlChar*) "NO");
            printf("uri: %s\n", uri);
            xmlFree(uri);
        }
        cur = cur->next;
    }
    return;
} 
```

当我调试时，我注意到它第一次进入 ACCOUNT 标签并获取值，然后转到下一个 ACCOUNT 标签，忽略 STATE 和 NAME 标签。这个程序有什么问题，这是正确的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T19:14:43.680

首先，我不是**libxml2**方面的专家。但是，您注意到您的代码从节点帐户转到下一个节点帐户。这是因为其他节点都在这些账户节点之下。为了到达这些*被遗忘*的子节点，您必须进入子节点层次结构。

如果你这样看，可能更容易理解：

```
<ACCOUNTS>
  <ACCOUNT NO="123">
    <STATE>GA</STATE>
    <NAME>John</NAME>
  </ACCOUNT>
  <ACCOUNT NO="123">
    <STATE>GA</STATE>
    <NAME>Burgess</NAME>
  </ACCOUNT>
</ACCOUNTS> 
```

如您所见，节点`state`和`name`在节点下`account`。因此，您必须先遍历每个子节点下的所有子节点，而不是转到下一个节点。

基本上（作为一个简单的补丁或快速解决方案），在你的 if 语句中，你必须用这个创建一个嵌套的 while：

```
subnode = cur->xmlChildrenNode;
while (subnode != NULL) {
    if ((!xmlStrcmp(subnode->name, (const xmlChar *)"STATE"))) {
        // more things...
    }
} 
```

希望这可以帮助。

# jquery - slide div offscreen, append content with ajax call, slide div onscreen

> ID：10743250
> 
> 赞同：1
> 
> 时间：2012-05-24T18:29:49.657
> 
> 标签：jquery, animation, onclick

I have a div which is centred on the page that contains text loaded through an jquery ajax call. When a button is clicked it refreshes the content of that `DIV`:

```
randomEntry = function() {
    $.ajaxSetup({
        cache: false
    });

    $('article#portraits').load('random.php');
    $('#refresh').click(function() {
        event.preventDefault();
        $('article#portraits').load('random.php');
    });
};​ 
```

What I would now like to do is animate the div when the button is pressed, in the following order:

1.  button is pressed
2.  div moves off screen from right to left
3.  div content is updated
4.  div with new content moves on screen from right to left.

[This example](https://stackoverflow.com/questions/4741880/slide-a-div-offscreen-using-jquery) illustrates the visual effect perfectly. I have looked at the code and am able to replicate the effect with two divs, each containing unique content, but am struggling to load the ajax call into the second div.

This is what I have so far – it's clearly incorrect, as the new content loads before the div begins to move (and doesn't come back!):

```
$('#refresh').click(function() {
    event.preventDefault();
    $('article#portraits').animate({ 'margin-left' : "-100%" },1500);
    $('article#portraits').load('random.php');
    $('article#portraits').animate({ 'margin-right': "-100%" }, 1500);
}; 
```

I suspect load() isn't the right function here, and that perhaps there needs to be a second empty div to load the content into, but I'm a bit stumped. A jsfiddle with the html/css [can be found here](http://jsfiddle.net/BGPed/). Many thanks.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T18:34:48.507

您需要使用[“完整”](http://api.jquery.com/animate/#complete) [回调](http://api.jquery.com/load/#callback-function)：

```
$('#refresh').click(function() {
    event.preventDefault();
    $('article#portraits').animate({ 'margin-left' : "-100%" },1500, function() {
        $('article#portraits').load('random.php', function() {
            $('article#portraits').animate({ 'margin-right': "-100%" }, 1500);
        );
    );
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T16:26:36.110

更仔细地查看我发布的[原始示例](https://stackoverflow.com/questions/4741880/slide-a-div-offscreen-using-jquery)以及@Blazemonger 的回答，以下内容似乎达到了预期的结果：

1.  将 random.php 加载到 #box1 中：

    ```
    randomEntry = function() {
        $.ajaxSetup({
        cache: false
        });
        $('#box1').load('random.php');
    };http://www.readability.com/mrfredhale/ 
    ```

2.  单击时将#box1 移出屏幕

    ```
    animateBox = function() {
        $('.box').click(function() {
            $(this).animate({
                left: '-50%'
            }, 500, function() {
                $(this).css('left', '150%');
                $(this).appendTo('article#portraits');
            }); 
    ```

3.  将 random.php 加载到 #box2 并将其移动到屏幕上。使用`$(this.next)`意味着当 #box2 处于焦点时 random.php 加载到 #box1 中，反之亦然。

    ```
     $(this).next().load('random.php').animate({
            left: '50%'
        }, 500);
        });
    }; 
    ```

# asp.net-mvc-3 - Validation using Html.Telerik().Upload() with MVC3

> ID：10743258
> 
> 赞同：-1
> 
> 时间：2012-05-24T18:30:10.693
> 
> 标签：asp.net-mvc-3, telerik

I am looking for sample code that would show how to set validation on the `Html.Telerik().Upload()` function so that the user can only upload `.jpg` files. I'd like to support just `.jpg` files.

Does anyone have any good examples or websites that I could use?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T04:32:51.917

请参阅以下代码。此代码只接受 jpeg/jpg、png 格式的图片。图像大小也限制为 100KB。

```
@(Html.Telerik().Upload()
        .Name("EmployeeImageUpload")
        .Multiple(false)
        .Async(async => async
        .Save("SaveEmployeeImage", "Employee")
        .AutoUpload(false)
        )
        .ClientEvents(events => events
        .OnLoad("onLoad")
        .OnSelect("onSelect")
        .OnSuccess("onSuccess")
        )
    )

<script type="text/javascript">

    function onLoad(e) {
        $(this).find("input").attr("accept", "image\/jpeg,image\/jpg,image\/png");
    }

    function onSelect(e) {

        if (e.files[0].size > 102400) {
            alert('Image Size Should Be <= 100KB');
            e.preventDefault();
            return false;
        }            

        var ext =e.files[0].extension.toLowerCase();
        if ($.inArray(ext, ['.jpeg', '.jpg', '.png']) == -1) {
            alert('Only Supported Extension are jpeg/jpg, png');
            e.preventDefault();
            return false;
        }
        return true;
    }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-15T12:13:41.560

不幸的是，由于浏览器**实现**`<input type="file" />`.

资料来源： [http ://www.telerik.com/community/forums/aspnet-ajax/upload/how-to-filter-out-unwanted-file-types-radupload.aspx](http://www.telerik.com/community/forums/aspnet-ajax/upload/how-to-filter-out-unwanted-file-types-radupload.aspx)

但是，还有另一种方法可以使用 html 和 javascript：

HTML

```
<input name="fileToUpload" type="file" onchange="check_file()" > 
```

javascript

```
function check_file(){
            str=document.getElementById('fileToUpload').value.toUpperCase();
    suffix=".JPG";
    suffix2=".JPEG";
    if(!(str.indexOf(suffix, str.length - suffix.length) !== -1||
                   str.indexOf(suffix2, str.length - suffix2.length) !== -1)){
    alert('File type not allowed,\nAllowed file: *.jpg,*.jpeg');
        document.getElementById('fileToUpload').value='';
    }
} 
```

来源：[https ://stackoverflow.com/a/6788623/1304064](https://stackoverflow.com/a/6788623/1304064)

# web-services - How to notify a caller of the HTTP post method upon request completion in REST

> ID：10743259
> 
> 赞同：2
> 
> 时间：2012-05-24T18:30:18.710
> 
> 标签：web-services, rest, post

I am implementing a REST webservice and I have a resource (http://localhost/createUser) which is a POST method and takes in a JSON user object.

Now at time t1, a caller calls this API with a JSON object. I make basic validations at time t1 and return response as sucessfull.

But at my backend, this person creation logic takes a while to "really create" and persist it to database - which will take some time - say at time t2 - the user creation is completed.

Now what are the ways for me to notify the caller that this User Creation has been "really successfull"? (or the user creation might fail in between t1 and t2, how to notify this to the caller of this API? what are the ways?)

One way I think of is, create a requestId for each such request and the caller keeps polling another GET API, like (http://localhost/status/requestId) which will give him the result for that request.

Is there any better way to do this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T18:48:55.290

要么在返回之前等待用户“真正”被创建，要么实现类似 getUser 的操作......它可能有一个“正在创建”与“已创建”的状态字段。在我看来，将每个调用映射到“requestId”似乎有点多。

# c++ - Do private elements in the base class add to the size of the derived class?

> ID：10743262
> 
> 赞同：1
> 
> 时间：2012-05-24T18:30:22.480
> 
> 标签：c++, inheritance

```
// inheritence experiment

#include"stdafx.h"
#include<iostream> 

using namespace std;

class base
{
private:
    int i;
};

class derived: public base
{
private:
    int j;
};

int main()
{
    cout << endl << sizeof(derived) << endl << sizeof(base);
    derived o1;
    base o2;
    cout << endl << sizeof(o1) << endl << sizeof(o2); 
} 
```

I'm getting this output:

> 8
> 4
> 8
> 4

why's that so? private data members of a base class aren't inherited into the derived class, so why I am getting 8 bytes for both, the size of derived and o1 ?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T18:31:41.727

Private members are inherited. You just cannot access them from your derived class.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T18:34:51.297

私有成员实际上在派生类中，它们只是在派生类中不可访问。private 关键字是为了防止从基类派生的程序员更改基类设计者不希望您更改的值，因为它可能会改变基类的功能。

在这里查看更深入的解释

[脆弱的基类](http://en.wikipedia.org/wiki/Fragile_base_class)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T20:36:25.597

```
class base {
public:
  base(int v) : m_value(v) { }
  int value() { return m_value; }
private:
  int m_value;
};

class derived : private base {
  derived(int v) : base(v) { }
  int value2() { return value(); }
};

int main()
{
  derived d(2);
  return d.value2();
} 
```

如果私有基类没有将值存储在某处，您希望这如何工作？

您对*“继承到派生类”一词*的选择让我认为您对继承的工作方式感到困惑。基类的成员不会继承或复制*到*派生类中*。*派生类包含基类型的实例，作为完整派生对象中的子对象，因此派生类（通常）至少与其基类的总和一样大。

考虑这段代码：

```
struct A {
private:
  int i;
};

struct B {
  int j;
};

struct derived : A, B {
  int k;
}; 
```

一个`A`对象在内存中以 的形式排列`int`，a 也是如此`B`。一个`derived`对象可以作为一个对象在内存中布局`A`，然后是一个`B`对象，然后是一个`int`，这意味着它是三个`int`s 的序列。基类成员是公共的还是私有的都不会影响这一点。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T18:32:22.940

当然它们是继承的——毕竟，基类的行为可能取决于它们的存在——它们只是不可访问！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T18:32:19.697

基类的继承方法仍然可以使用私有成员。他们必须在那里。

# css - This CSS works perfectly in Chrome but breaks in IE

> ID：10743267
> 
> 赞同：0
> 
> 时间：2012-05-24T18:30:47.167
> 
> 标签：css, internet-explorer, internet-explorer-9

This CSS arrow works fine in chrome but breaks in IE. What's the best way to figure out how to make it work in IE9?

```
<html>
<head>

<style>
.nav {
    padding: 0;
    width: 115px;
}

.box {
    width: 100px;
    height: 50px;
    background-color: green;
    float: left;
    padding: 0;
}

.arrow-right {
    width: 0;
    height: 0;
    border-top: 25px solid transparent;
    border-bottom: 25px solid transparent;
    border-left: 15px solid green;
    float: right;
    padding: 0;

}
</style>
</head>

<body>
<div>
<div class="nav">
<div class="box"></div>
<div class="arrow-right"></div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T18:43:14.053

可能是因为您没有 DOCTYPE，而 IE 以 quirks 模式呈现它。

```
<!DOCTYPE html> 
```

# java - oracle.ucp.jdbc.PoolDataSourceFactory 和 oracle.jdbc.ReadTimeout 不会取消查询

> ID：10743269
> 
> 赞同：0
> 
> 时间：2012-05-24T18:31:07.210
> 
> 标签：java, oracle, jdbc

我的查询运行时间超过了 oracle.jdbc.ReadTimeout 指定的值。它以 SQLRecoverableException 失败，这一切都很好。除了查询不能取消并且 Oracle 继续处理它。尝试捕获该异常并取消该语句失败，因为该语句已关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T18:59:57.357

这很愚蠢。查询超时应使用[Statement.setQueryTimeout()](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/Statement.html#setQueryTimeout%28int%29)设置，然后查询将被正确取消。基本上 setQueryTimeout 应该总是低于 oracle.jdbc.ReadTimeout 并且每个人都会很高兴。

# model - Ember.js ArrayProxy 模型数组

> ID：10743271
> 
> 赞同：5
> 
> 时间：2012-05-24T18:31:23.813
> 
> 标签：model, ember.js

# 目标

创建由 ArrayController (ArrayProxy) 管理的模型数组。要求

使用 ArrayController (ArrayProxy) 抽象封装 Model 的 Convert 对象数组，在插入到 ArrayProxy 时自动封装到 ArrayProxy 不要在访问时进行惰性转换

## 示例数据结构

```
App.AddressModel = Ember.Object.extend({
    address_name: null,
    address: null,
    printme: function() {
        console.log("Just making sure the array turned into an AddressModel");
    },
});

App.addressArray = Ember.ArrayProxy.create({
    transformFrom: function(item) {
    },
    transformTo: function(item) {
    },
    arrayContentWillChange: function(startIdx, removeAmt, addAmt) {
    },
}); 
```

## 试验失败

### 动态属性

IRC 频道中有人提到尝试动态属性。这导致了一个似乎是逻辑和经验证据的递归结果。毫无疑问，内容既是动态生成的变量，也是“触发/导出”变量。

### arrayContentWillChange

同样，一个看似递归的结果。在收到 arrayContentWillChange 通知后，我从给定的数组索引项生成一个 AddressModel。然后我将旧索引项设置为创建的模型，并再次触发 arrayContentWillChange 事件，重复……递归。

### 变换自 / 变换至

[https://github.com/emberjs/ember.js/pull/554#issuecomment-5401112](https://github.com/emberjs/ember.js/pull/554#issuecomment-5401112) tomdale 在上面的帖子中提到尝试使用 transformFrom 和 transformTo 来投射传入和/或传出数据。这些功能似乎不存在 [http://cloud.github.com/downloads/emberjs/ember.js/ember-0.9.8.js]。

### ArrayProxy 模型补丁

[https://github.com/emberjs/ember.js/pull/554](https://github.com/emberjs/ember.js/pull/554) tomdale 对这个问题的原始解决方案/帖子的建议似乎比 jedwood 引入的模型实现更好地概括，但是，在 Backbone.js 中通过以下方式处理这个问题使用特殊的模型变量，我发现它运行良好。

# 问题

如何扩展 ArrayProxy 以将要管理的所有传入对象转换为 AddressModel？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T19:22:43.620

我采用了 Tom Dale 提到的方法，它覆盖了该`replace`方法。它还为`content`属性注册了一个观察者，以确保内容是数组的类型化版本，请参阅[http://jsfiddle.net/pangratz666/XCLmE/](http://jsfiddle.net/pangratz666/XCLmE/)：

```
App.ModelArrayProxy = Ember.ArrayProxy.extend({
    modelType: Ember.required,

    _typedArray: function(objects) {
        var modelType = this.get('modelType');
        var array = objects.map(function(item) {
            // check if item is an instance of type
            if (!(item instanceof modelType)) {
                // create a new instance of type and pass the hash
                return modelType.create(item);
            }

            // just return the item, since it's already of type modelType             
            return item;
        });
        return array;
    },

    contentChanged: function() {
        if (!this.get('setTypedContent')) {
            var content = this.get('content');

            this.set('setTypedContent', true);
            this.set('content', this._typedArray(content));
            this.set('setTypedContent', false);
        }
    }.observes('content'),

    replace: function(idx, amt, objects) {
        this._super(idx, amt, this._typedArray(objects));
    }
}); 
```

这个 ModelArrayProxy 然后可以用作“正常” `ArrayProxy`：

```
// model declaration
App.AddressModel = Ember.Object.extend({
    ...
});

// create a proxy for given modelType
App.proxy = App.ModelArrayProxy.create({
    content: [],
    modelType: App.AddressModel
});

var myArray = [{
    address_name: 'address_name 1',
    address: 'address 1'},
{
    address_name: 'address_name 2',
    address: 'address 2'}];

// set content with "normal" objects
App.proxy.set('content', myArray);

// invoke 'log' on all items in array
App.proxy.forEach(function(item) {
    item.log();
});

// push a normal object
App.proxy.pushObject({
    address_name: 'address_name 3',
    address: 'address 3'
});

// push an instance of App.AddressModel
App.proxy.pushObject(App.AddressModel.create({
    address_name: 'address_name 4',
    address: 'address 4'

}));

// invoke 'log' on all items in array
App.proxy.forEach(function(item) {
    item.log();
});​ 
```

# properties - How can I reference a TestCase property from an AMF request TestStep script in soapUI?

> ID：10743273
> 
> 赞同：1
> 
> 时间：2012-05-24T18:31:44.047
> 
> 标签：properties, soapui

I have a Test Case called "testCaseOne"

It contains three Test Steps:

"AMFrequestOne"

"propertyTransfer"

"AMFrequestTwo"

"AMFrequestOne" creates a database object.

"propertyTransfer" sends the ResponseAsXml to a temporary property in "testCaseOne" called "tempProp".

I need to reference "tempProp" in a script inside of "AMFrequestTwo"

I've tried the following

def temp = testRunner.testCase.getPropertyValue( "tempProp" )

but I get the error "No such property: testRunner for class: Script6" (number increments with tries)

Is this because in an AMF request "Script is invoked with log, context, parameters and amfHeaders variables" and testRunner is not recognized?

I know it seems odd, but is it possible to do this? I'm unable to use a specific xpath property transfer between the two AMF Requests as it's possible for the structure to change and I'm not always looking for the same node.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-04T15:47:44.817

用过的

```
def temp = context.testCase.getPropertyValue( "tempProp" ) 
```

代替

```
def temp = testRunner.testCase.getPropertyValue( "tempProp" ) 
```

这很好用。

# javascript - Ajax post method not working

> ID：10743275
> 
> 赞同：4
> 
> 时间：2012-05-24T18:31:51.003
> 
> 标签：javascript, jquery, html, ajax, post

I am currently creating a website and am having trouble using AJAX to post my data. I have a button and when clicked the following code is processed...

```
var name = document.getElementById('name').innerHTML;
var text = document.getElementById('text').innerHTML; 

$.ajax({  
    type: "POST",  
    url: "php/post.php",  
    data: { postName: name, postText: text},  
    success: function() {  
        $('#paragraph').html("worked");    
    }  
}); 
```

This definitely opens the post.php page but it is not passing through the desired data. Am I doing something wrong?

Thanks in advance

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T18:34:04.390

What do the variables name and text contain? Rather than doing

```
var name = document.getElementById('name').innerHTML;
var text = document.getElementById('text').innerHTML; 
```

You can do:

```
var name = $("#name").val(); 
var text = $("#text").val(); 
```

You may need to pass the datatype object too:

```
$.ajax({  
type: "POST",  
url: "php/post.php",  
data: { postName: name, postText: text}, 
dataType: "json",
success: function() {  
    $('#paragraph').html("worked");    
}  
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T18:35:56.023

```
var name = $('#name').text();
var text = $('#text').text(); 

$.ajax({  
  type: "POST",  
  url: "php/post.php",  
  data: { postName: name, postText: text}, 
  dataType: 'json',
  success: function() {  
    $('#paragraph').html("worked");    
  }  
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T18:35:23.560

I guess you are not preventing the default button click behaviour. Probably you should use the `preventDefault` function on the button click to stop processing the default form posting. Also make sure you have the content present inside your form elements with the Id `name` and `text`

```
$(function(){  

    $("#yourButtonId").click(function(e){
    {
      e.preventDefault();
      var name = $('#name').html();
      var text = $('#text').html();

      if(name!="") 
      {    
         $.ajax({  
           type: "POST",  
           url: "php/post.php",  
           data: { postName: name, postText: text},  
           success: function() {  
              $('#paragraph').html("worked");    
           }   
         });  
       }
       else
       {
         alert("Why should i do ajax when content is empty!");
       }
    }); 

}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T18:38:42.753

```
var name = document.getElementById('name').value,
    text = document.getElementById('text').value, 
    postData = JSON.stringify({ postName: name, postText: text});
$.ajax({  
    type: "POST",  
    url: "php/post.php",  
    data: postData,
    success: function() {  
        $('#paragraph').html("worked");    
    }  
}); 
```

You will need to include a reference to `json2.js` for this to work in older browsers. You can download it here : [https://github.com/douglascrockford/JSON-js](https://github.com/douglascrockford/JSON-js)

# android - Multiple drawables on my curent location

> ID：10743276
> 
> 赞同：0
> 
> 时间：2012-05-24T18:31:56.417
> 
> 标签：android, map, location, drawable, overlayitem

I have a MapActivity where i get the current location and i pin a drawable on it. The thing is that when my location is changed ( onchangedlocation method ) there appears another pinpoint on the map but the first one does not disappear. Another problem is that onchangedlocation does not pin another drawable until i touch the screen. What should I do to appear instantly. I want to show with this drawable the current location of the car so it should move properly, like a GPS or something.

Here is my activity with which I add the pinpoint.

```
public class CustomPinpoint extends ItemizedOverlay<OverlayItem>{

private ArrayList<OverlayItem> pinpoints = new ArrayList<OverlayItem>();
private Context c;

public CustomPinpoint(Drawable defaultMarker) {
    super(boundCenter(defaultMarker));
    // TODO Auto-generated constructor stub
}
public CustomPinpoint(Drawable m, Context context) {
    // TODO Auto-generated constructor stub
    this(m);
    c = context;
}

@Override
protected OverlayItem createItem(int i) {
    // TODO Auto-generated method stub
    return pinpoints.get(i);
}

@Override
public int size() {
    // TODO Auto-generated method stub
    return pinpoints.size();
}

public void insertPinpoint(OverlayItem item){
    pinpoints.add(item);
    this.populate();
}
  } 
```

and I use this in my oncreate method :

```
 lm= (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        Criteria crit = new Criteria();

        towers = lm.getBestProvider(crit, false);
        final Location location = lm.getLastKnownLocation(towers);

        if(location != null){
            latit = (int) (location.getLatitude() *1E6);
            longi = (int) (location.getLongitude() *1E6);
            ourLocation = new GeoPoint(latit, longi);
            controller.animateTo(ourLocation);
            controller.setZoom(14);

            if//myItemizedOverlay.addItem(ourLocation, "myPoint1", "myPoint1");
            OverlayItem overlayItem = new OverlayItem(ourLocation, "What's up", "2nd String");
            CustomPinpoint custom = new CustomPinpoint(d, Map.this);
            custom.insertPinpoint(overlayItem);
            overlayList.add(custom);}
            map.setSatellite(false);
            map.setStreetView(true); 
```

and this is my onlocationchanged

```
 public void onLocationChanged(Location l) {
    // TODO Auto-generated method stub
    latit = (int) (l.getLatitude() *1E6);
    longi = (int) (l.getLongitude() *1E6);
    GeoPoint ourLocation = new GeoPoint(latit, longi);
    OverlayItem overlayItem = new OverlayItem(ourLocation, "What's up", "2nd String");
    CustomPinpoint custom = new CustomPinpoint(d, Map.this);
    custom.insertPinpoint(overlayItem);
    overlayList.add(custom);
} 
```

I thought that for the multiple drawables on my current location a solution would be to display only the last pinpoint(geopoint) added but I don't really know how to do this.

I would be very grateful if you could help me with both problems. Thank you !

PS: I would need the drawable looks like it is moving continuesly when the device is in a car or something which goes with some speed.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T19:23:02.580

```
 In the onlocationchaged method,add the following line,so that it will make your previous pin disappear..if(!mapOverlays.isEmpty()) 
 { 
 mapOverlays.clear(); 
 mapView.invalidate();} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T18:59:27.033

我在您的代码中没有看到 overlayList 的定义，但我想它必须是类型`ArrayList<OverlayItem>`

因此，在您使用overlayList.add(custom) 之前，您需要调用overlayList.clear()。这将只留下最新位置的标记。就更新显示而言，我认为它应该在您 .add 时执行此操作。我想您可以随时在地图视图上调用 .invalidate() 以查看是否有帮助

# php - how to get which session is from which browser in php when cookie is disabled in browser?

> ID：10743277
> 
> 赞同：0
> 
> 时间：2012-05-24T18:31:57.067
> 
> 标签：php, session, cookies

Suppose i have two systems in same network,and cookie is disabled in both system browser. Now i am trying to Login to online server. Here if i am saving session using session id on server-side How will it differentiate that which user has logged-in in which browser?

if i am having `<form>` on all the pages i can pass session id as hidden field. But it's not necessary to have a `<form>` in all the pages, so how to change the url in this case.

If i am using get it can be dangerous, any one can get the user details by tracing the url.

So how will it work?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T18:36:10.730

启用`session.use_trans_sid`和禁用`session.use_only_cookies`。`session.use_trans_sid`确保在使用之前了解它的工作原理。

# node.js - Encountering with exception fs.js:747 throw new Error('use fs.watch api instead');

> ID：10743278
> 
> 赞同：-6
> 
> 时间：2012-05-24T18:32:03.813
> 
> 标签：node.js, mongodb

While runing the following code on Node.js i am facing this exception fs.js:747 throw new Error('use fs.watch api instead');. **

*   node version 0.6.18 npm version is 1.1.21

** The code i am using is

```
**/*
 * Monitor remote server uptime.
 */

var mongoose   = require('mongoose');  
var express    = require('express');
var config     = require('config');
var socketIo   = require('socket.io');
var path       = require('path');
var monitor    = require('./lib/monitor');
var analyzer   = require('./lib/analyzer');
var CheckEvent = require('./models/checkEvent');
var Ping       = require('./models/ping');

// configure mongodb

mongoose.connect('mongodb://' + config.mongodb.user + ':' + config.mongodb.password + '@' + 
    config.mongodb.server +'/' + config.mongodb.database);

mongoose.connection.on('error', function (err) {
  console.error('MongoDB error: ' + err.message);
  console.error('Make sure a mongoDB server is running and accessible by this application')
});

if (config.autoStartMonitor) {
  m = monitor.createMonitor(config.monitor);
  m.start();
}

a = analyzer.createAnalyzer(config.analyzer);
a.start();

var app = module.exports = express.createServer();

// Site

app.configure(function(){
  app.use(app.router);

  // the following middlewares are only necessary for the mounted 'dashboard' app, 
  // but express needs it on the parent app (?) and it therefore pollutes the api

  app.use(express.bodyParser());
  app.use(express.methodOverride());
  app.use(express.cookieParser());
  app.use(express.session({ secret: 'qdfegsgkjhflkquhfskqdjfhskjdfh' }));
});

app.configure('development', function() {
  if (config.verbose) mongoose.set('debug', true);
  app.use(express.static(__dirname + '/public'));
  app.use(express.errorHandler({ dumpExceptions: true, showStack: true }));
});

app.configure('production', function() {
  var oneYear = 31557600000;
  app.use(express.static(__dirname + '/public', { maxAge: oneYear }));
  app.use(express.errorHandler());
});

// Routes

app.use('/api',       require('./app/api/app'));
app.use('/dashboard', require('./app/dashboard/app'));

app.get('/', function(reaq, res) {
  res.redirect('/dashboard/events');
});

// Sockets

var io = socketIo.listen(app);

io.configure('production', function() {
  io.enable('browser client etag');
  io.set('log level', 1);
});

io.configure('development', function() {
  if (!config.verbose) io.set('log level', 1);
});

CheckEvent.on('postInsert', function(event) {
  io.sockets.emit('CheckEvent', event.toJSON());
});

io.sockets.on('connection', function(socket) {
  socket.on('set check', function(check) {
    socket.set('check', check);
  });

  Ping.on('postInsert', function(ping) {
    socket.get('check', function(err, check) {
      if (ping.check == check) {
        socket.emit('ping', ping);
      }
    });
  });
});

// load plugins

path.exists('./plugins/index.js', function(exists) {
  if (exists) {![enter image description here][1]
    require('./plugins').init(app, io, config, mongoose);
  };
});

app.listen(config.server.port);
console.log("Express server listening on port %d in %s mode", config.server.port,     
app.settings.env); 
```

Any resolutions??

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-27T18:36:45.380

您似乎在 Windows 上运行，并且`fs.watchFile`在 Windows 上不支持使用它。

# android - 在 Android 上获取关系联系人字段

> ID：10743284
> 
> 赞同：5
> 
> 时间：2012-05-24T18:32:26.967
> 
> 标签：android, android-contacts

我正在使用 Android 联系人并尝试获取特定的数据。我已经可以获得电子邮件、电话号码、他们的姓名等。但是我很难获得关系字段。

[http://developer.android.com/reference/android/provider/ContactsContract.CommonDataKinds.Relation.html](http://developer.android.com/reference/android/provider/ContactsContract.CommonDataKinds.Relation.html)

所以我的目标是：给定一个特定的用户 ID（来自 Android 上的联系人数据库），找出他们的关系字段。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-10T12:34:53.510

这应该有效。这个想法是连接数据表中的搜索，但使用来自 CommonDataKinds 的东西。这是在 where 子句 ... 中完成的`Data.MIMETYPE == CommonDataKinds.Relation.CONTENT_ITEM_TYPE`。这将使您获得所有关系内容的行。

```
import android.database.Cursor;
import android.net.Uri;
import android.provider.ContactsContract.CommonDataKinds.Relation;
import android.provider.ContactsContract.Data;
import android.util.Log;
...
public void logCatTheRelation(long contactId){
    Uri uri = Data.CONTENT_URI;
    String where = String.format(
            "%s = ? AND %s = ?",
            Data.MIMETYPE,
            Relation.CONTACT_ID);

    String[] whereParams = new String[] {
               Relation.CONTENT_ITEM_TYPE,
               Long.toString(contactId),
    };

    String[] selectColumns = new String[]{
            Relation.NAME,
            // add additional columns here
    };

    Cursor relationCursor = this.getContentResolver().query(
            uri, 
            selectColumns, 
            where, 
            whereParams, 
            null);
    try{
        if (relationCursor.moveToFirst()) {
            Log.d("gizm0", relationCursor.getString(
                               relationCursor.getColumnIndex(Relation.NAME)));
        }
        Log.d("gizm0", "sadly no relation ... ");
    }finally{
        relationCursor.close();
    }
} 
```

# java - 使用 try 和 finally 的同步方法的行为

> ID：10743285
> 
> 赞同：2
> 
> 时间：2012-05-24T18:32:43.280
> 
> 标签：java, synchronized, try-finally

假设以下方法：

```
public synchronized void a(){
    try{
        System.out.println("a");
        return;
    }finally{
        System.out.println("a, finally");
    }
} 
```

我知道即使在 return 语句之后，finally 块仍然会被执行。甚至可以“覆盖”返回值！但我的问题是，该方法会在 return 语句之后还是 finally 之后解锁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T18:35:48.933

由于在块完成`return`之前不执行`finally`，并且因为整个方法是`synchronized`，所以直到`finally`块完成后才会释放锁。

如果您需要在异常而不是从方法返回时释放锁定，您可以将`synchronized`块嵌套在`try`/`finally`块中：

```
public void a(){
    try {
        synchronized (this) {
            System.out.println("a");
            return;
        }
    } finally{
        System.out.println("a, finally");
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T18:36:31.120

第一个 finally 将在 return 语句之前执行....

其次，只有当线程执行完完整方法时才会释放锁。即（直到该方法的结束大括号），此外，该锁是对象的，因此不仅是该方法，而且该方法中的所有同步方法类被锁定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T18:58:06.393

是的。它将等待从执行 finally 块执行后发生的函数返回。

# perforce - 我在哪里可以获得 P4Win 软件？

> ID：10743287
> 
> 赞同：0
> 
> 时间：2012-05-24T18:32:58.913
> 
> 标签：perforce

我喜欢 P4Win 而不是 P4V，但似乎 P4Win 在 perforce.com 中不可用。谁能告诉我在哪里可以买到 P4Win？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T10:16:50.143

是的，Perforce 已经停止了 P4Win，替代品是 P4V。他们发布的最新版本可从 perforce.com 获得：

[ftp://ftp.perforce.com/perforce/r08.1/bin.ntx86/p4winst.exe](ftp://ftp.perforce.com/perforce/r08.1/bin.ntx86/p4winst.exe)

当然，它可能无法正常运行，或者 perforce 服务器的某些较新功能（例如流）将不可用。

# asp.net - Asp.Net MVC3 - FormsAuthentication，浏览器关闭时如何使cookie过期？

> ID：10743289
> 
> 赞同：7
> 
> 时间：2012-05-24T18:33:04.793
> 
> 标签：asp.net, asp.net-mvc-3, authentication, cookies

我想**在浏览器关闭时使 FormsAuthentication 的 cookie 过期。** （我希望它像 PHP 会话一样工作）

这是位于模型（不是控制器）中的我的身份验证代码。

模型/Auth.cs

```
FormsAuthenticationTicket ticket = new FormsAuthenticationTicket(
    1,
    model.UserId,
    DateTime.Now,
    DateTime.Now.AddDays(1),
    true,
    model.UserId +" "+reader["lastname"],
    FormsAuthentication.FormsCookiePath);

string hash = FormsAuthentication.Encrypt(ticket);
HttpCookie cookie = new HttpCookie(FormsAuthentication.FormsCookieName, hash);

if (ticket.IsPersistent)
{
    cookie.Expires = ticket.Expiration;
}

HttpContext.Current.Response.Cookies.Add(cookie); 
```

网页配置

```
<authentication mode="Forms">
    <forms name="user" timeout="60" loginUrl="~/Auth/login" path="/"></forms>
</authentication>
<authorization>
    <deny users="?" />
</authorization> 
```

还有一个问题是，设置cookie超时有2次，

在机票上，

```
DateTime.Now.AddDays(1), 
```

并在 Web.config 文件中进行身份验证

```
<forms name="user" timeout="60" loginUrl="~/Auth/login" path="/"></forms> 
```

它们有多大不同，哪一个会影响实际的过期 cookie？

有谁知道，请指教。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T18:37:08.740

当浏览器关闭时，您不能使 cookie 过期。但是，您可以使 cookie 成为非持久性的，这意味着它不会保存 cookie，因此当您打开新浏览器时，它将有一个新的 cookie（但是请注意，大多数浏览器缓存非持久性的方式带有标签的 cookie，必须关闭整个浏览器才能将其清除）。

至于您的第二个问题，如果您不指定超时，则使用 web.config 条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T18:49:11.533

jQuery unload 事件可用于检测浏览器关闭。

但是在以下情况下也会触发此事件：用户单击链接离开页面，或在地址栏中键入新 URL。前进和后退按钮将触发事件。即使页面重新加载也会首先创建一个卸载事件。

[将事件处理程序绑定到“卸载”JavaScript 事件。](http://api.jquery.com/unload/)

回答您的第二个问题，即您在代码中设置的超时，并覆盖 web.config 条目。

# sharepoint - 如何使用 SharePoint Workflow 中的操作结果设置工作流变量？

> ID：10743295
> 
> 赞同：0
> 
> 时间：2012-05-24T18:33:34.233
> 
> 标签：sharepoint, sharepoint-2010, sharepoint-designer

我有一个正在处理 SharePoint 2010 的工作流，并且我构建了一个自定义操作，它有一个 ActionResult 的出站参数。

我希望能够将工作流变量设置为此出站参数的值。我看不到

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-11T15:56:45.460

关于为什么我不能将自定义操作的输出变量放入列表的问题是因为 .actions 文件中的 DesignerType 值不正确。

这是旧代码：

```
<FieldBind Field="Result" DesignerType="TextArea" Text="Action result message; returns OK on success" Id="3" /> 
```

这是正确的代码：

```
<FieldBind Field="Result" DesignerType="ParameterNames" Text="Action result message; returns OK on success" Id="3" /> 
```

一旦进行了更改，将输出变量设置为工作流变量就变得非常直观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-26T12:56:59.747

看看这篇[文章](http://office.microsoft.com/en-us/sharepoint-designer-help/collect-data-from-a-user-in-a-workflow-HA010209808.aspx)。您应该能够将该变量设置为工作流中的任何其他变量。

# sql - 如何编写 SQL 查询以从 ODBC 源中选择行？

> ID：10743299
> 
> 赞同：2
> 
> 时间：2012-05-24T18:33:49.077
> 
> 标签：sql, sql-server, odbc

我对 SQL 非常陌生，尤其是 MSSQL。我正在寻找一种从我已经设置到表中的 ODBC 数据源中选择某些行的方法。类似于以下内容：

```
SELECT 
<somecolumns>
INTO
<target_table>
FROM
[ODBC_data_source].sourcetable 
```

我还应该提到数据源已正确配置，我可以使用导入向导从中导入。我上面有什么可能，还是我需要寻找其他解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T18:53:02.373

你会经常访问这个数据源吗？如果是这样，您可能想考虑使用链接服务器：http: [//msdn.microsoft.com/en-us/library/ms188279.aspx](http://msdn.microsoft.com/en-us/library/ms188279.aspx)

如果它只是一次或非常罕见的事情，那么您可以使用 OPENROWSET 假设 ODBC 存在于服务器本身： http: [//msdn.microsoft.com/en-us/library/aa276850 (v=sql.80).aspx](http://msdn.microsoft.com/en-us/library/aa276850(v=sql.80).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T18:45:22.243

```
SELECT column1, column2
INTO new_table_name [IN externaldatabase]
FROM old_tablename 
```

好的，但是您想将某些 ROWS 拉入新表中。为此，只需添加一个 WHERE 子句：

```
SELECT column1, column2
INTO new_table_name [IN externaldatabase]
FROM old_tablename
WHERE Name in('Mark','Luke',etc) 
```

# vim - 快速修复窗口中的 Vim 文件路径

> ID：10743300
> 
> 赞同：9
> 
> 时间：2012-05-24T18:34:00.247
> 
> 标签：vim

我在 Vim 中创建了一个为我编译一些东西的函数。它看起来像这样：

```
function! MyFunc(mode)
  lcd ./build
  pwd
  let &makeprg='the_command some_script_file'
  let &errorformat='some format'.','
  let &errorformat.='%-G%.%#'
  silent make
  lcd ..
  cwindow
endfunction 
```

我通常在项目目录中打开vim，然后我可以运行这个函数，其中cd 进入build，构建它，然后cd 回来，所以我留在我的项目目录中。

但是，有时，当构建失败并打开 quickfix 窗口时，它会显示相对于我的项目目录的文件名（耶），但有时在同一个文件中，它会显示绝对路径。构建脚本的输出总是显示相对路径，vim 正确处理这两个路径，即它找到了正确的文件。

我怀疑路径处理是负责任的。我的问题是，有什么问题，有没有更好的方法来处理切换到构建目录并返回？我总是希望显示相对路径。

谢谢！！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T15:04:43.317

我认为这与`lcd`. 当从您的函数打开快速修复窗口时，它将从当前窗口继承本地目录。但是当从其他任何地方（或在运行您的函数之前）打开快速修复窗口时，它将保留全局工作目录。当不匹配时，Vim 必须显示绝对路径。

如果您确实需要使用`:lcd`，最好使用位置列表 ( `:lmake`)，因为它也是窗口本地的。但是我会首先尝试使用 global `:cd`，因为无论如何切换只是暂时的，而且到目前为止您并不关心恢复实际的原始值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-30T18:50:57.303

正如 Ingo 指出的那样，路径是相对于 quickfix 窗口的当前目录的，该目录是从前一个窗口继承的。

您可以`autocmd QuickFixCmdPre`在执行 make 之前使用它来设置正确的路径。

如果您使用[Project Root 插件](http://www.vim.org/scripts/script.php?script_id=4387)，请将以下内容添加到您的`.vimrc`：

```
augroup changeQfCmdDir
   au!
   autocmd QuickFixCmdPre make ProjectRootCD
augroup END 
```

，那么quickfix窗口的路径会在被a填充之前被修正`:make`（你也可以指定一些其他使用quickfix窗口的命令：）`grep,lgrep,cscope`。

# iphone - 'NSObject 没有可见的@interface ' 声明选择器 'pageControlPageDidChange:'

> ID：10743301
> 
> 赞同：3
> 
> 时间：2012-05-24T18:34:01.043
> 
> 标签：iphone, objective-c, ios, macos, delegates

我从[这篇文章](https://stackoverflow.com/questions/2942636/how-i-change-the-color-of-pagination-dots-of-uipagecontrol)中得到了这段代码，一切都很好，除了一件事，我有这个错误，我不知道如何修复。这是代码：

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event{

    CGPoint touchPoint = [[[event touchesForView:self] anyObject] locationInView:self];

    CGRect currentBounds = self.bounds;
    CGFloat x = touchPoint.x - CGRectGetMidX(currentBounds);

    if(x<0 && self.currentPage>=0){
        self.currentPage--;
        [self.delegate pageControlPageDidChange:self]; 
    }
    else if(x>0 && self.currentPage<self.numberOfPages-1){
        self.currentPage++;
        [self.delegate pageControlPageDidChange:self]; 
    }   
} 
```

错误是：

```
No visible @interface for 'NSObject<PageControlDelegate>' declares the selector 'pageControlPageDidChange:'. 
```

我试图用 ARC 运行这段代码，我删除了 dealloc 方法，在这里将 assign 更改为 weak：

```
@property (nonatomic, weak) NSObject<PageControlDelegate> *delegate; 
```

正如有人在答案中所写，但它仍然无法正常工作。

请帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T18:50:54.317

如果在您的标题中，您只有：

```
@protocol PageControlDelegate; 
```

您错过了协议的实际定义。在链接帖子的第一个代码块的底部，有这段代码包含缺少协议函数的声明：

```
@protocol PageControlDelegate<NSObject>
@optional
- (void)pageControlPageDidChange:(PageControl *)pageControl;
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T18:37:22.783

您需要导入声明 PageControlDelegate 协议的 .h 文件。

# ruby-on-rails - RSpec 请求规范中的存根控制器操作

> ID：10743306
> 
> 赞同：2
> 
> 时间：2012-05-24T18:34:12.733
> 
> 标签：ruby-on-rails, ruby, rspec

我正在为服务器错误编写一个 API 测试用例。我想存根控制器操作以引发错误以模拟服务器错误（500）。在请求规范中，`controller`未设置变量。

```
it "Should return 500 upon server error" do
  controller.stub(:index).and_raise(ArgumentError) 
  get "/users.json"
  response.code.should eq("500")
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-25T04:04:00.053

我最终使用`any_instance`.

```
it "Should return 500 upon server error" do
  UsersController.any_instance.stub(:index).and_raise(ArgumentError)
  get "/users.json"
  response.code.should eq("500")
  response.body.should have_json_path("error")
end 
```

**笔记：**

在请求规范中存根控制器方法没有意义。但是......在这种情况下，我使用请求规范套件作为接受标准。其中一项要求是确保所有错误代码和消息都与 API 设计相匹配。我能够诱导服务器引发 API 设计中指定的所有 HTTP 错误代码。唯一的边缘情况是`internal server error(i.e. 500)`. 我无法诱导控制器引发此错误。因为，我正在测试错误回复，并且由于此回复与异常的位置和来源无关，所以我决定将其存根。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T18:34:55.000

它实际上是一个实例变量：`@controller`.

# javascript - Unused css - how do you clean it up?

> ID：10743314
> 
> 赞同：22
> 
> 时间：2012-05-24T18:34:43.810
> 
> 标签：javascript, ruby-on-rails, css, optimization, frontend

Probably any experienced web developer would be familiar with this problem: over time your css files can grow pretty huge and ugly because of all the no longer used selectors, which might be pretty tricky to find. I'm working on a rails project where we tend to re-design things quite frequently, which leads to a tonne of deadweight css. What's the best way to find and remove it?

Now, I do know that there is a rails plugin called deadweight built specifically for that purpose. However, here's my problem with deadweight: first of all, it completely ignores selectors used in javascript. Next, it scans only those pages that you configure it to scan which means there's a risk of removing something that is used on pages that you didn't scan for some reason. Finally, it finds unused selectors only in compiled css (we use LESS) - matching these against the actual code is a bit too involved.

I have also tried [http://unused-css.com/](http://unused-css.com/) - they're great, but can't access localhost and, again, can only scan compiled CSS.

I really think there must be a better way of doing this. Actually, some time ago I decided to optimise one particular css file by grepping each selector in the entire project directory (emacs + rinari mode make it super-easy and super-fast), and each time I didn't see any html or css in the results I removed the style. Zero problems, worked like a charm. Obviously, I'm not going to do that for the entire site. However, I really don't believe that this couldn't be automated. Now, before I fire up my python and code this up, can anyone actually tell me if I'd be reinventing the wheel?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-10T17:33:29.187

Check out [uCSS library](https://github.com/operasoftware/ucss) from Opera Software.

It helps you to find unused CSS, as well as duplicate CSS. Also, you can get an overview of how many times each rule has been used in your markup. Several options are available by setting up a config file.

**Update:**

Another great alternative: [csscss](https://github.com/zmoazeni/csscss).

Written in Ruby and supports SASS, Less.

**Update:**

Another great alternative: [uncss](https://github.com/giakki/uncss).

It works across multiple files and supports Javascript-injected CSS.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T18:36:44.203

[Dust Me Selecters](http://www.sitepoint.com/dustmeselectors/) and/or [CSS Usage](https://addons.mozilla.org/en-us/firefox/addon/css-usage/) Firefox extensions can help you weed out unused CSS.

In Chrome's Developer Tools you can use the Web Page Performance tool to find unused CSS rules.

# c# - Gridview 中的 HyperLinkField 未显示列项目的链接

> ID：10743319
> 
> 赞同：0
> 
> 时间：2012-05-24T18:34:53.963
> 
> 标签：c#, asp.net, oracle, gridview

我今天有一个关于在 GridView 中使用 HyperLinkField 的问题。我几乎搜索了所有内容，但我尝试的所有内容都没有。我正在运行 ORACLE 数据库，下面的所有字段都是字符串类型，除了 RECORD_DATE 和 RECORD_TIME。它们属于“日期”类型。

这就是我所拥有的：

```
 <asp:HyperLinkField HeaderText="MODEL_NUMBER" DataTextField="MODEL_NUMBER" SortExpression="MODEL_NUMBER" DataNavigateUrlFields="MODEL_NUMBER, SERIAL_NUMBER, DEFECT_CODE, RECORD_DATE, RECORD_TIME"
                DataNavigateUrlFormatString="~/AllAudits.aspx?Model={0}&Serial={1}&Defect={2}&RecordDate={3}&RecordTime={4}" /> 
```

Visual Studio 对字符串没有任何抱怨，页面加载正常，一切正常，但它没有像应有的那样显示标记为“MODEL_NUMBER”的列的链接。

我试过了：

```
 NavigateUrl="~/AllAudits.aspx" 
```

这创建了一个链接，但我认为我没有能力通过它传递参数。

谁能指出我正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T18:51:31.460

它可能与您传递日期类型的方式有关。[该线程](http://forums.asp.net/t/1045143.aspx/1)似乎可以解决您遇到的问题。

# windows-7 - 如何从闪存驱动器使用 Windows 7 中的自动运行功能打开网页？

> ID：10743322
> 
> 赞同：3
> 
> 时间：2012-05-24T18:34:57.733
> 
> 标签：windows-7, autorun

我一直在尝试想出一种方法来自动运行托管在 USB 闪存驱动器上的一系列 HTML 页面。这些都是静态页面，并且都链接到我闪存驱动器根目录中的 index.html。

我尝试像这样设置一个 autorun.inf 文件：

```
[autorun]
open=index.html 
```

我也试过这个：

```
[autorun]
shellexecute=index.html 
```

我试过这个：

```
[autorun]
open=wscript.exe autorun.vbs 
```

其中 autorun.vbs 看起来像这样：

```
Call WScript.CreateObject("WScript.Shell").Run("index.html", 1) 
```

到目前为止，我还没有让应用程序出现在自动运行对话框中。我什至有一个更强大的 autorun.inf 类似于这个：

```
[autorun]
shellexecute=index.html
label=Test Application
action=Start Test Application
shell\start=Start Application
shell\start\command=index.html
shell=start 
```

我在许多不同的配置中切换了各种 shellexecute/open 命令。然后，我在研究过程中偶然发现了一个页面，上面写着“Windows 7 不再支持来自闪存驱动器的 autorun.inf”。但是我找不到其他有关此的信息。

有人有解决方案吗？我只想插入闪存驱动器并在没有其他用户输入的情况下打开网页。如果我必须处理具有“显示页面”按钮的自动播放对话框，那也可以。

编辑：我也试过这个链接：[Windows Autorun for an HTML file](https://stackoverflow.com/questions/2900867/windows-autorun-for-an-html-file)但它也不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T18:37:01.373

正如我的评论中所述，Windows 不再允许这样做。这是以前的 Stack Overflow 文章：

[从 USB 闪存驱动器自动运行程序](https://stackoverflow.com/questions/10304382/auto-running-a-program-from-usb-flash-drive)

还有一个：

[http://www.addictivetips.com/windows-tips/autorun-inf-does-not-work-in-windows-7-anymore/](http://www.addictivetips.com/windows-tips/autorun-inf-does-not-work-in-windows-7-anymore/)

要允许自动播放，请在此处编辑您的设置：

控制面板->所有控制面板项->自动播放

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-23T23:37:00.900

[Microsoft 的此链接](http://answers.microsoft.com/en-us/windows/forum/windows_7-hardware/autoplay-not-working-for-usb-flash-drive/304f3ddd-13a1-44a9-be5a-1e9f4c74b3a9 "自动播放不适用于 USB 闪存驱动器") *可能会*解决您的问题。如果链接失效，他们的解决方案复制如下：

* * *

**我建议您使用下面提到的任何一种方法，并检查您是否能够将可移动驱动器的自动播放功能用作 USB。**

1.  单击开始并在搜索框中键入 gpedit.msc 并按 Enter。
2.  现在浏览到计算机配置\管理模板\Windows组件\自动播放策略\关闭自动播放。
3.  将关闭自动播放的值更改为**禁用**。

您可以参考以下链接以获得更多帮助 -
更改自动播放设置 - [http://windows.microsoft.com/en-US/windows7/Change-AutoPlay-settings](http://windows.microsoft.com/en-US/windows7/Change-AutoPlay-settings)
自动播放问题疑难解答 - [http://windows.microsoft.com/ zh-CN/windows7/疑难解答-自动播放问题](http://windows.microsoft.com/en-US/windows7/Troubleshoot-AutoPlay-problems)

* * *

祝你好运！

# java - 启动 Eclipse 时出现 java.lang.ClassNotFoundException

> ID：10743325
> 
> 赞同：3
> 
> 时间：2012-05-24T18:35:07.933
> 
> 标签：java, eclipse, exception, reinstall

使用 dpkg (Ubuntu) 清除并重新安装 eclipse 后，会出现错误：

```
cat     /home/sergiy/.eclipse/org.eclipse.platform_3.7.0_155965261/configuration/1337883707989.log
!SESSION Thu May 24 21:21:48 EEST 2012 -----------------------------------------
!ENTRY org.eclipse.equinox.launcher 4 0 2012-05-24 21:21:48.242
!MESSAGE Exception launching the Eclipse Platform:
!STACK
java.lang.ClassNotFoundException: org.eclipse.core.runtime.adaptor.EclipseStarter
    at java.net.URLClassLoader$1.run(URLClassLoader.java:217)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:205)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:321)
            at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:619)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:577)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1410) 
```

这是 /usr/lib/eclipse/configuration/config.ini 文件：

```
#This configuration file was written by:     org.eclipse.equinox.internal.frameworkadmin.equinox.EquinoxFwConfigFileParser
#Wed Apr 04 13:29:31 UTC 2012
org.eclipse.update.reconcile=false
eclipse.p2.profile=PlatformProfile
osgi.instance.area.default=@user.home/workspace
osgi.framework=file\:plugins/org.eclipse.osgi_3.7.2.dist.jar
equinox.use.ds=true
eclipse.buildId=I20110613-1736
osgi.bundles=reference\:file\:org.eclipse.equinox.simpleconfigurator_1.0.200.dist.jar@1\:start
org.eclipse.equinox.simpleconfigurator.configUrl=file\:org.eclipse.equinox.simpleconfigurator/bundles.info
eclipse.product=org.eclipse.platform.ide
osgi.splashPath=platform\:/base/plugins/org.eclipse.platform
osgi.framework.extensions=
osgi.bundles.defaultStartLevel=4
eclipse.p2.data.area=@config.dir/../p2/
eclipse.application=org.eclipse.ui.ide.workbench
osgi.bundlefile.limit=100 
```

如何解决这个问题？提前致谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T18:45:41.587

第一个建议是**不要**从任何 Linux 包管理器或软件存储库安装 Eclipse。相反，只需从[http://www.eclipse.org/downloads/](http://www.eclipse.org/downloads/)获取它。linux 发行版安装的版本经常被修改（有人会说是被破坏了）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-30T20:58:27.407

有关完整说明，请参阅[https:](https://askubuntu.com/a/695401/407641) //askubuntu.com/a/695401/407641，...

**亮点**：

*   不要`sudo apt-get eclipse`，那个版本太***旧***了！
*   [请从http://www.eclipse.org/downloads](http://www.eclipse.org/downloads)下载并安装
*   做一个`~/Desktop/eclipse.desktop`文件。请注意，文件夹的完整路径`Desktop`将取决于您的 ubuntu 版本。

# sql-server-2008 - PK 索引/约束上的 SQL Server 过滤索引？

> ID：10743331
> 
> 赞同：1
> 
> 时间：2012-05-24T18:35:40.507
> 
> 标签：sql-server-2008, indexing, uniqueidentifier

我现在有一个零行的表，但一年内会增长到 4-5 百万。biglogid 使用“COMB GUID”来防止表/索引碎片化。添加行时，rowstate 的值为 1。但是，当不需要行时，它们将设置为 null（除了每年清理，业务规则外，不能删除任何内容）。由于这意味着最终会有比非空列更多的空列，因此行状态列被设为稀疏。

从表中选择将是“从 biglog 中选择 logtext，其中 biglogid=......并且 rowstate 不为空”，仅在它处于活动状态时才获取值。如果这是对表运行的唯一真正查询，那么使 PK 成为过滤索引是否有价值？如果是这样，那么 TSQL 语法是什么？

谢谢。

```
CREATE TABLE biglog(
    biglogid [uniqueidentifier] NOT NULL,
    logtext [varchar](400) NOT NULL,
    rowstate [tinyint] SPARSE  NULL,
 CONSTRAINT biglogpk PRIMARY KEY CLUSTERED 
(
    biglogid ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, FILLFACTOR = 85) ON [PRIMARY]
) ON [PRIMARY] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T18:54:18.473

您不能在 PK 上定义过滤索引。以下索引对您有用吗？

```
CREATE NONCLUSTERED INDEX MyIndex
    ON biglog(logtext)
    WHERE rowstate IS NOT NULL ; 
```

# jquery - jQuery：当父高度为0px时获取子元素的高度

> ID：10743337
> 
> 赞同：4
> 
> 时间：2012-05-24T18:35:50.757
> 
> 标签：jquery, height, parent-child

我有一个包含文本的 div，该文本仅在某些情况下显示在另一个 div 中。用于此的 HTML 很简单，如下所示：

```
<div id='parent'>
  <div id='child'>
    Some text inside child div
  </div>
</div> 
```

样式看起来像：

```
#parent{ display:none; height:0px; } 
```

使用 jQuery，如果 div 在父级之外，我想获取子级的高度。

以下 javascript 返回 0，我希望大约 15。

```
var child_height = $('#child').height();
alert(child_height); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T18:40:47.830

尝试所有这些并且工作正常：

```
console.log($('#child').outerHeight());

console.log($('#child').css('height'));

console.log($('#child').height()); 
```

根据您的编辑：

```
var height = $('#parent').css({visibility: 'hidden', display : 'block'}).find('#child').height();

$('#parent').css({visibility: 'hidden', display: 'none'});

console.log(height); 
```

**[演示](http://jsfiddle.net/zjpav/6/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T18:46:59.917

您可以暂时显示隐藏的父母，然后在以下情况下隐藏它们：

```
// .parents means it will search through all parents, not just first hidden
var hiddenParents = $("#child").parents(":hidden").show();
var childHeight = $("#child").height();
hiddenParents.hide();

alert(childHeight); 
```

[http://jsfiddle.net/zjpav/3/](http://jsfiddle.net/zjpav/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T18:39:55.470

```
var child_height = $('#child').outerHeight();
alert(child_height);​ 
```

[演示](http://jsfiddle.net/mprabhat/kj8mg/1/)

尽管在 FF 10 上，您的原始代码运行良好。

根据评论更新：

对于隐藏字段，它将返回零，您可以执行以下操作：

```
jQuery('#parent').css('display','block');
var child_height = $('#child').outerHeight();
alert(child_height);

child_height = $('#child').height();
alert(child_height);
jQuery('#parent').css('display','none'); 
```

[演示](http://jsfiddle.net/mprabhat/kj8mg/2/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T18:45:02.500

我注意到您说：“仅在某些情况下显示的另一个 div 内”。如果父 div 有`display: none;`（例如，如果您使用多个 jQuery 函数中的任何一个隐藏它，这就是它的最终结果），那么子 div 的高度将返回为 0。

# core-data - 在 MonoTouch 中使用 CoreData？

> ID：10743339
> 
> 赞同：2
> 
> 时间：2012-05-24T18:35:58.753
> 
> 标签：core-data, xamarin.ios

我已经看到在 Xcode 中有很多很棒的方法来设计你的 CoreData 模型——有没有办法在 MonoTouch 5 中使用这个和 CoreData？有教程或例子吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-25T13:35:42.710

也许不是您问题的直接答案，但可能是您的问题`are looking for:`

*   [Sqlite-net](https://github.com/praeclarum/sqlite-net)是一个开源的最小库，允许 .NET 和 Mono 应用程序将数据存储在 SQLite 3 数据库中。<-`the one you are using but for future reference`

*   [Vici CoolStorage](http://viciproject.com/wiki/projects/coolstorage/home)是一个完全类型化的对象关系映射库，适用于 .NET 3.5、Windows Phone、**MonoTouch**和 Mono for Android

*   [Catnap](https://github.com/timscott/catnap)是 .NET 的基本轻量级 ORM。它使用 ADO.NET API。该项目包括一个用于 Sqlite 的适配器，并使用 System.Data.Sqlite 和 Mono.Data.Sqlite 进行了测试。

*   [MonoTouch.SQLite](https://github.com/jstedfast/MonoTouch.SQLite)一个抽象的 UITableViewController 使显示 SQLite 表中的数据更简单。

*   [Entify](http://code.google.com/p/entify/)是桌面和移动应用程序的实体框架。它旨在成为稳定且易于使用的库，可以轻松地与任何应用程序一起部署。它具有可视化设计器，允许开发人员轻松快速地定义应用程序数据模型。

    *   只是一个旁注`entify`，如果它仍然有效，它就没有更新，`Apr 11, 2010`所以idk

我唯一能找到的`MonoTouch`就是`CoreData`这篇[博](http://www.sgmunn.com/2010/10/coredata_in_monotouch/)文。

希望这可以帮助。

亚历克斯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-02T16:39:03.340

[这是](http://api.xamarin.com/index.aspx?link=N:MonoMac.CoreData)Mono 中 CoreData 的文档。

[这篇博](http://sgmunn.com/blog/2010/10/coredata-in-monotouch/)文已有将近两年的历史，但我能找到在 Mono 中使用 CoreData 的唯一示例。

但是，与您的问题最相关的是，[此错误/请求](https://bugzilla.xamarin.com/show_bug.cgi?id=1940)用于将 Xcode 的工具集成到 Mono 中。它似乎还没有在开发中。

**编辑：** 您也可以`/Applications/Xcode.app/Contents/Developer/usr/bin/momc <source xcdatamodel> <absolute path to target>`用来生成`.momd`. 我仍在努力使其更好地集成 - 请参阅[此问题](https://stackoverflow.com/questions/12241014/generate-classes-from-coredata-model)。

# java - Maven 使用来自其他模块的资源？

> ID：10743342
> 
> 赞同：3
> 
> 时间：2012-05-24T18:36:08.300
> 
> 标签：java, maven

如何使用其他 Maven 模块的资源？我的目标是在特定的 Maven 模块中提供一个`AbstractImportClass`以及要导入的文件。并在扩展此类的其他模块中使用此模块。

假设`ModuleA`contains`src/main/java/MyAbstractImportClass.java`和`src/main/resources/MyImport.csv`

我现在想在`ModuleB`. 或者更确切地说，我将扩展它，使用 abstract-fileimport 和一些自定义函数。然后`ModuleC`还使用摘要的导入和一些自定义功能。

问题是：抽象类中的导入与`reader`and一起使用`InputStream`。当我只执行 ModuleA 时，一切都很好。

但是当我尝试通过 maven pom 包含模块，然后扩展模块以调用导入时，我就到达`NullPointerException`了使用阅读器的行。

很明显我不能以这种方式使用外部模块资源。

但是我怎么能利用它呢？

* * *

更新：

模块 A：

```
src/main/java/path/to/MyClassA.java
src/main/resources/path/to/test.txt

abstract class MyClassA {
    public static String TESTFILE = test.txt;

    List<String> doImport(String filename) {
        InputStream fileStream = resourceClass.getResourceAsStream(filename);
        //some precessing
        return list;
    }
} 
```

模块 B：

```
src/main/java/path/to/MyClassB.java

class MyClassB implements MyClassA {
    List<String> list = doImport(TESTFILE);
} 
```

如果我将 MyClassB 放在与 A 相同的目录中，那么一切正常。如果我在自己的模块中构建 B，我会得到 InputStream 的 NullPointer，这意味着找不到文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T03:28:17.383

You should check:

1.  Module B depend on Module A in pom.xml
2.  The passed in 'filename' parameter starts with a '/', that is to say, the 'filename' parameter is '/path/to/test.txt' other than 'path/to/test.txt'

You program should work if these two conditions is satisfield.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T03:33:52.267

我认为您的问题根本与 Maven 无关。[Class.getResourceAsStream()](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#getResourceAsStream%28java.lang.String%29)将相对路径解析为相对于您调用它的类对象。因此，如果您在抽象类中使用该方法，它的每个子类都可能在不同的地方寻找资源。

例如，给定三个类：

极好的：

```
package com.foo;
public class Super {
    { System.out.println(getClass().getResourceAsStream("test.properties")); }
} 
```

Sub1，Super 的子类：

```
package com.foo.bar;
import com.foo.Super;
public class Sub1 extends Super {} 
```

Sub2，另一个子类：

```
package com.foo.bar.baz;
import com.foo.Super;
public class Sub2 extends Super {} 
```

如果您创建一个 Super，它将查找类路径资源“/com/foo/test.properties”，因为这就是路径“test.properties”相对于类 com.foo.Super 的解析方式。如果您创建一个 Sub1，它将在“/com/foo/bar/test.properties”中查找，而对于 Sub2 实例，它将在“/com/foo/bar/baz/test.properties”中查找.

您可能希望使用资源的绝对路径而不是相对路径，或者让子类指定相对于它们自身的路径。这取决于您的设计以及您要实现的抽象类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T19:51:50.297

目前尚不清楚您的代码的作用。您能否提供您如何阅读资源的示例？如果你做得正确 - 通过从类路径中的资源文件获取 InputStream 应该没有问题。您可以首先检查 ModuleA.jar 中是否包含您的资源文件。

# c# - 用于排序 C# 的 Linq

> ID：10743344
> 
> 赞同：0
> 
> 时间：2012-05-24T18:36:19.393
> 
> 标签：c#, linq

天气很热，所以我的大脑不能很好地工作。用 LINQ 对此进行排序的最佳方法是什么？请注意，排序基于“C”进行，但适用于“M”

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace Compare
{
    public class M
    {
        public IList<C> Columns = new List<C>();
    }

    public class C
    {
        public bool SortByMe { get; set; }
        public string Guid { get; set; }
    }

    class Program
    {
        static void Main(string[] args)
        {
            IList<M> list = new List<M>();

            M one = new M();
            one.Columns.Add(new C() 
            {
                SortByMe = true,
                Guid = "5"
            });
            one.Columns.Add(new C()
            {                
            });
            one.Columns.Add(new C()
            {             
            });

            M two = new M();
            two.Columns.Add(new C()
            {             
            });
            two.Columns.Add(new C()
            {
                SortByMe = true,
                Guid = "2"
            });
            two.Columns.Add(new C()
            {             
            });

            M three = new M();
            three.Columns.Add(new C()
            {

            });
            three.Columns.Add(new C()
            {
                SortByMe = true,
                Guid = "100"
            });
            three.Columns.Add(new C()
            {

            });

            list.Add(one);
            list.Add(two);
            list.Add(three);

            //Then sort the M by the occurrence of a C with SortByMe true.

        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T18:43:17.123

您的意思是每个实例在其集合中`M`都有一个*实例* ，其属性为; 并且您想按这些元素的值对您的实例集合进行排序？`C``Columns``SortByMe``true``M``GUID``C`

```
list = list.OrderBy(m => m.Columns.Single(c => c.SortByMe).Guid).ToList(); 
```

请注意，由于`GUID`is `string`，您的排序将按字母顺序 ( `"100"`, `"2"`, `"5"`)，而不是数字。如果您希望它是数字，则需要输入`int.Parse`.

**编辑**：执行数字排序的版本：

```
list = list.OrderBy(m => int.Parse(m.Columns.Single(c => c.SortByMe).Guid)).ToList(); 
```

和逻辑等效的查询语法：

```
list =
(
    from m in list
    orderby
    (
        from c in m.Columns
        where c.SortByMe
        select int.Parse(c.Guid)
    ).Single()
    select m
).ToList(); 
```

您需要考虑到原始假设的任何失败——例如给定集合中的多个`C`元素设置为，或者一个不是有效整数的值——都会导致整个表达式失败。`Columns``SortByMe``true``GUID`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T18:44:17.173

```
 var query = from m in list
                    let c = m.First(x => x.SortByMe)
                    orderby c.Guid
                    select m; 
```

# android - android BitmapFactory.decodeByteArray() 图像类型？

> ID：10743349
> 
> 赞同：-1
> 
> 时间：2012-05-24T18:36:34.640
> 
> 标签：android, opencv, yuv, rgba, bitmapfactory

有人知道返回什么像素类型`BitmapFactory.decodeByteArray()`吗？

基本上我在相机预览回调中使用这个片段：

```
YuvImage img = new YuvImage(mLastFrame, ImageFormat.NV21, mPreviewSize.width, mPreviewSize.height, null);
ByteArrayOutputStream out = new ByteArrayOutputStream();
img.compressToJpeg(new Rect(0,0,mPreviewSize.width, mPreviewSize.height), 30, out);
return BitmapFactory.decodeByteArray(out.toByteArray(), 0, out.size()); 
```

我得到了一个很好的位图，我可以与 android 一起使用。但是如果我想将它与 OpenCV 一起使用，它就不起作用，并且由于 OpenCV 需要 ARGB_8888 类型，我猜，我从`decodeByteArray()`函数中得到了另一种类型。

谢谢，
弗拉德

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T18:44:44.333

您可以在结果上使用[Bitmap.getConfig()](http://developer.android.com/reference/android/graphics/Bitmap.html#getConfig%28%29)`Bitmap`并查看它是否是`ALPHA_8, RGB_565`等...

# php - 使用（和保存）各种图像文件类型？

> ID：10743351
> 
> 赞同：1
> 
> 时间：2012-05-24T18:36:42.193
> 
> 标签：php, image, crop

我正在编写一个裁剪图像的脚本。它正在处理jpgs。但是有没有办法让它适用于各种文件类型（bmp、png、gif）**而无需**通过各种 if 子句？

```
//create the crop
// Original image
$filename = 'uploads/'.$image_name;

$endname = 'uploads/thumbnails/'.$image_name;

// Get dimensions of the original image
list($current_width, $current_height) = getimagesize($filename);

// The x and y coordinates on the original image where we
// will begin cropping the image
$left = 0;
$top = 0;

// This will be the final size of the image (e.g. how many pixels
// left and down we will be going)
$crop_width = 200;
$crop_height = 200;

// Resample the image
$canvas = imagecreatetruecolor($crop_width, $crop_height);
$current_image = imagecreatefromjpeg($filename);
imagecopy($canvas, $current_image, 0, 0, $left, $top, $crop_width, $crop_height);
imagejpeg($canvas, $endname, 100); 
```

我尝试替换`imcreatefromjpeg`为，`imagecreate`但没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T18:42:43.460

[`imagecreatefromstring`](http://php.net/manual/en/function.imagecreatefromstring.php)自动检测文件类型，但它需要图像数据作为字符串，但你总是可以这样做

```
$current_image = imagecreatefromstring(file_get_contents($filename)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T18:42:06.847

`scr`- 对于您的源文件 `dest`- 对于结果文件

```
 $size = getimagesize($src); 

        // Detect file format from MIME-information, detected by getimagesize() function
        // And select proper imagecreatefrom()-function.
$format = strtolower(substr($size['mime'], strpos($size['mime'], '/')+1));
$icfunc = "imagecreatefrom" . $format;
if (!function_exists($icfunc)){
    echo "Function $icfunc doesn't exists!");
}

    //Here is the magic: We call function, which name is value of variable
$isrc = $icfunc($src);

    // Create new img
$idest = imagecreatetruecolor($width_dest, $height_dest);

    // Copy src img to dest img with resizing
imagecopyresampled(
    $idest, $isrc,  // dest & src img ident
    0,0,      // dest img (x,y) top left corner
    0,0,      // src img (x,y) top left corner
    $width_dest, $height_dest,
    $width_src, $height_src
); 
```

# perl - 将代理添加到 Perl 代码

> ID：10743354
> 
> 赞同：0
> 
> 时间：2012-05-24T18:36:55.447
> 
> 标签：perl, proxy

我正在尝试向我的 perl 代码添加代理，但我不确定这是否是正确的代码？

```
#!usr/bin/perl

{

use strict;
 use LWP::UserAgent;
use warnings;
 my $ua = new LWP::UserAgent(agent => 'Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/536.5 (KHTML, like Gecko) Chrome/19.0.1084.46 Safari/536.5');
 $ua->proxy([qw(http https)] => 'http://100.100.10.100:80');
 my $response = $ua->get("URL_IN_HERE");
 print $response->code,' ', $response->message,"\n";

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T18:51:09.410

在您的环境中（可能`~/.bashrc`或这样）：

```
export http_proxy=http://100.100.10.100:80 
```

在 Perl 代码中：

```
#!/usr/bin/perl

use warnings;
use strict;

use LWP::UserAgent;

my $ua = new LWP::UserAgent(agent => 'Mozilla/5.0');
$ua->env_proxy;
my $response = $ua->get("URL_IN_HERE");
print $response->code,' ', $response->message,"\n"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T02:01:06.497

请参阅下面的两个示例以了解如何...

* * *

如果您的代理`127.0.0.1`在端口上运行`8080`并且它支持`http`and `https`，则添加

`$ua->proxy(['http', 'https'], 'http://127.0.0.1:8080/');`到你的代码。

* * *

如果您的代理`proxy.mydomain.com`在端口上运行`80`并且它支持`http`and `ftp`，则添加

`$ua->proxy(['http', 'ftp'], 'http://proxy.mydomain.com:80/');`到你的代码。

* * *

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-19T16:56:23.963

尝试使用下一个代码:)

```
#!usr/bin/perl
use strict;
use LWP::UserAgent;
use warnings;
{
my $ua = LWP::UserAgent->new;
    $ua->proxy( 'http', "http://127.0.0.1:3128");  #Your proxy
    $ua->default_header("Connection" => "keep-alive");
 $ua->agent("Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.63 Safari/537.31");
 $ua->timeout (10);
 my $response = $ua->get("http://google.com"); #Website
 print $response->code,' ', $response->message,"\n";

} 
```

# telerik - 如何在 RadChart 中的数据点工具提示中格式化值？

> ID：10743363
> 
> 赞同：1
> 
> 时间：2012-05-24T18:37:38.167
> 
> 标签：telerik, number-formatting, radchart

我想在 ASP.NET RadChart 的工具提示中格式化数值的显示。例如，我希望文本显示为“1.0e5”，而不是显示 100000。对于坐标区，要设置的属性如下：

```
chart.InnerChart.PlotArea.YAxis.Appearance.CustomFormat = "0.##E+0"; 
```

chartSeries 上必须有一个类似的属性来类似地格式化工具提示，但到目前为止我还没有找到它。有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:24:59.837

对于图表中的每个 ChartSeriesItem，您可以通过以下方式设置 ToolTip：

```
e.SeriesItem.ActiveRegion.Tooltip = string.Format("{0:0.###e+0}", value); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T18:53:38.703

我不确定您使用的是哪个 RadChart。这是 ASP.Net MVC RadChart 的代码摘录。

```
.Tooltip(tooltip => tooltip
    .Visible(true)
    .Format("{0:0.##E+0}")
) 
```

# jquery-mobile - 无法使用 jQuery Mobile 显示 Google 地图？

> ID：10743364
> 
> 赞同：0
> 
> 时间：2012-05-24T18:37:43.230
> 
> 标签：jquery-mobile, google-maps-api-3

运行时，如果我单击索引页面底部的链接进入地图页面，我会短暂看到地图，占屏幕的四分之一，然后消失。我究竟做错了什么？

这是创建地图页面的索引页面的代码：

```
<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.css"/>
        <script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.1.0/jquery.mobile-1.1.0.min.js"></script>
        <script type="text/javascript" charset="utf-8" src="phonegap-1.4.1.js"></script>          
        <script type="text/javascript">
            function initialize(){
                if(!window.navigator.onLine){
                    alert("An internet connection is required to use the MetPetDB App. Please find a connection and reopen the app.");
                    var element = document.getElementById("mainPage");
                    element.parentNode.removeChild(element);
                    document.getElementById("mainBody").innerHTML = "<p>An internet connection is required to use this app.</p>";
                }
            }
        </script>
        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false">   </script> 
        <script type="text/javascript">
            // When map page opens get location and display map
            $('.page-map').live("pagecreate", function() {
                initializeMap(42,-73);
            });
            function initializeMap(lat,lng) {
                var latlng = new google.maps.LatLng(lat, lng);
                var myOptions = {
                    zoom: 8,
                    center: latlng,
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };
                var map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);
            }
        </script>
    </head>
    <body id="mainBody" onload="initialize()">
        <div id="mainPage" data-role="page" data-theme="e">
            <div data-role="header">
                <!-- <img src="headerlogo.png" />-->
                <br />
                <p style="text-align:center">To begin searching for samples, select one of the following search methods.</p>
            </div>
            <div data-role="content" style="height: 100%;">
                <a data-role="button" data-theme="a" href="useMyLocation.html">Use My Location</a>
                <a data-role="button" data-theme="a" href="InputCoordinates.html">Input Coordinates</a>
                <a data-role="button" data-theme="a" href="selectRegion.html">Select Region</a>
                <a href="dragMap.html">Testing</a>
           </div>
       </div>
    </body>  
</html> 
```

这是地图页面：

```
<!DOCTYPE html>
<html>
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no;" />
    </head>
    <body>
        <div data-role="page" data-theme="e" class="page-map" style="width:100%; height:100%;">
            <div data-role="header"><h1>Map Page</h1></div>
            <div data-role="content" style="width:100%; height:100%; padding:0;"> 
                <div id="map_canvas" style="width:100%; height:100%;"></div>
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:14:35.437

以下代码有效：[jsfiddle](http://jsfiddle.net/5hR9x/)

我拿了你的代码，简化了它（使用单页模板而不是多页模板，但只是为了让 jsfiddle 更容易）并将所有脚本移到头部。

还要小心 phonegap，你应该处理 onDeviceReady 事件，而不是 body onload 事件。即使这样，也有[另一种方法](http://www.neotericdesign.com/blog/checking-the-online-status-with-phonegap-jquery)可以检查您是否在线。

# javascript - 通过ajax asp.net问题接收json

> ID：10743366
> 
> 赞同：0
> 
> 时间：2012-05-24T18:37:46.640
> 
> 标签：javascript, asp.net, ajax, json, web-services

我正在尝试使用 ajax asp.net 接收 json 数据。我有一个带有网络方法的网络服务-

```
[WebMethod]
public List<Song> GetSongListByMood(string Mood)
{
    SongBL songbl = new SongBL();
    return songbl.GetSongListByMoodBL(Mood);
} 
```

我得到了javascript代码-

```
 $(document).ready(function () {
        var cssSelector = {
            jPlayer: "#jquery_jplayer_1",
            cssSelectorAncestor: "#jp_container_1"
        };
        var playlist = [];
        var options = {
            swfPath: "./js",
            supplied: "mp3"
        };
        var myPlaylist = new jPlayerPlaylist(cssSelector, playlist, options);
        $("#slider a").click(function () {
            var mood = $(this).text();
            var xhr = new XMLHttpRequest();
            var url = "AvironaService.asmx/GetSongListByMood";
            xhr.open("POST", url, true);
            xhr.onreadystatechange = function () {
                if (xhr.readyState == 4 && xhr.status == 200) {
                    var obj = JSON.parse(xhr.responseXML.text);
                    myPlaylist.playlist = obj;
                }
            };
            var contentType = "application/x-www-form-urlencoded"
            xhr.setRequestHeader("Content-Type", contentType);
            var qs = 'Mood=' + mood;
            xhr.send(qs);
        });}); 
```

现在基本上我想做的是使用 ajax 以 json 格式从服务器获取数据并将数据放入播放列表变量中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T18:43:17.570

您需要进行一些更改。

1.  更改您的方法以返回 a`string`而不是`List<Song>`.

2.  添加 using 语句`using System.Web.Script.Serialization`。

3.  创建一个实例`JavaScriptSerializer`并使用它来序列化您的对象并返回结果。

所以...

```
using System.Web.Script.Serialization;

[WebMethod]
[ScriptMethod(ResponseFormat=ResponseFormat.Json)]     
public string GetSongListByMood(string Mood)
{
    SongBL songbl = new SongBL();
    var jss = new JavaScriptSerializer();
    return jss.Serialize(songbl.GetSongListByMoodBL(Mood));
} 
```

更改您的 AJAX 代码以利用可用的 JQuery 方法：

```
$("#slider a").click(function () {
    $.ajax({
        "url" : "AvironaService.asmx/GetSongListByMood",
        "type" : "post",
        "data" : {"Mood" : $(this).text()},
        "dataType" : "json"
        "success" : function(data){
          myPlaylist.playlist = data;
        }
    });
}); 
```

# android - RTMP 安卓 aftek

> ID：10743369
> 
> 赞同：3
> 
> 时间：2012-05-24T18:37:59.060
> 
> 标签：android, video-streaming, red5, rtmp

我正在尝试从[http://www.aftek.com/afteklab/aftek-RTMP-library.shtml](http://www.aftek.com/afteklab/aftek-RTMP-library.shtml)实现库 以从 red5 服务器流式传输实时视频。

在服务器上，我使用的是 simpleBroadcaster，我想将它流式传输到 android 手机。

我的代码：

```
package com.cu.reader;

import java.nio.channels.FileChannel;
import java.util.Map;
import com.al.rtmp.client.RtmpClient;
import com.al.rtmp.client.RtmpStream;
import com.al.rtmp.client.RtmpStreamFactory;
import com.al.rtmp.client.data.MetaData;
import com.al.rtmp.client.data.RTMPData;
import com.al.rtmp.client.data.VideoCodec;
import com.al.rtmp.message.Metadata;
import android.app.Activity;
import android.os.Bundle;
import android.util.Log;

public class StreamreaderActivity extends Activity implements RtmpClient {
     RtmpStream stream = null;
     Boolean connected = false;
 String server = "rtmp://216.224.181.197/oflaDemo/";
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    stream = RtmpStreamFactory.getRtmpStream();
    stream.setClient(this);
    stream.connect(server);
}
@Override
public void streamCreated() {
    Log.i("stream","Connected!");       

    connected = true;
    stream.setPlayName("red5StreamDemo");
    stream.play();

}
@Override
public byte[] getWriteData(int length) {
    // TODO Auto-generated method stub
    return null;
}
@Override
public void invoke(String arg0, Object... arg1) {
    // TODO Auto-generated method stub
;   
}
@Override
public void onDataReceived(RTMPData rtmpData) {
    MetaData metaData = rtmpData.getMetaData();
    VideoCodec vc = metaData.getVideoCodec();
}
@Override
public void onError(Exception ex) {
    Log.e("ClientException", " Some exception occurred." + ex.getMessage());
    ex.printStackTrace();
}
@Override
public void onMetaDataReceived(Map map) {
    Log.i("code","METADATA:" + map);        

}
@Override
public void onResult(String method, Object... arg1) {
    Log.i("result","METADATA:" + method);       

}
@Override
public void onStatus(String code) {
    Log.i("code",code);     
}

} 
```

我总是在 onStatus 函数中接收 NetStream.Play.StreamNotFound 。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T09:30:08.540

您会收到 NetStream.Play.StreamNotFound 错误，因为 red5 应用程序上不存在此类流。

我做了快速 as3 测试来检查：

```
package {

import flash.display.Sprite;
import flash.events.AsyncErrorEvent;
import flash.events.IOErrorEvent;
import flash.events.NetStatusEvent;
import flash.media.Video;
import flash.net.NetConnection;
import flash.net.NetStream;

public class LearnWowzaClient extends Sprite {

    private var nc:NetConnection;
    private var video:Video = new Video();

    public function LearnWowzaClient() {

        nc = new NetConnection();
        nc.client = this;
        nc.addEventListener(NetStatusEvent.NET_STATUS, onNet);
        nc.connect("rtmp://216.224.181.197/oflaDemo/");
    }

    private function onNet(event:NetStatusEvent):void {
        trace(event);
        trace(event.info.code);
        switch (event.info.code) {
            case "NetConnection.Connect.Success":
                tryPlayStream();
                break;
        }
    }

    private function tryPlayStream():void {
        trace("playStream");
        var ns:NetStream = new NetStream(nc);
        ns.addEventListener(NetStatusEvent.NET_STATUS, onNetStatus);
        ns.addEventListener(IOErrorEvent.IO_ERROR, onIOError);
        ns.addEventListener(AsyncErrorEvent.ASYNC_ERROR, onAsyncError);

        ns.play("red5StreamDemo");
        video.attachNetStream(ns);
    }

    public function onBWCheck(parameter:Object = null):void {
        trace("onBWCheck p=" + parameter);
    }

    public function onBWDone(parameter:Object = null):void {
        trace("onBWDone p=" + parameter);
    }

    private function onIOError(event:IOErrorEvent):void {
        trace("onIOError");
    }

    private function onAsyncError(event:AsyncErrorEvent):void {
        trace("onAsyncError");
    }

    private function onNetStatus(event:NetStatusEvent):void {
        trace("onNetStatus   ", event.info.code);
    }
}
} 
```

我也收到 NetStream.Play.StreamNotFound 错误。你能显示red5应用程序代码吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-08T21:26:24.373

流不存在，正确。但为什么？可能是一两个原因：您没有创建直播流和 2) 因为您使用了错误的范围。除非您手动进行不同的配置（这不太可能），否则请使用 /live 中的“实时”广播器范围。

因此，发布到 rtmp://216.224.181.197/live/red5StreamDemo 并订阅完全相同的 mrl，在此示例中为 rtmp://216.224.181.197/live/red5StreamDemo。注意：为此，您需要创建一个“实时”流并将其提供给您的 RED5 服务器。您可以使用 avconv（又名 ffmpeg）来创建 rtmp 提要。

# iphone - 如何开发只支持英文的ipad app？

> ID：10743371
> 
> 赞同：0
> 
> 时间：2012-05-24T18:38:15.860
> 
> 标签：iphone, ios, ipad, translate

我正在尝试在 ipad 上开发一个应用程序。但是当我使用地理编码和 google api 时，我会看到其他语言的地名（即使这个地方在美国）。好像是在翻译英文。有没有办法让我的应用程序只有英语？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T18:47:00.350

我得到了它。就是这个

```
 NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
[defaults setObject:[NSArray arrayWithObjects:@"fr", nil] forKey:@"AppleLanguages"];
[defaults synchronize]; 
```

# php - 如果数组等于数组 PHP

> ID：10743372
> 
> 赞同：0
> 
> 时间：2012-05-24T18:38:20.687
> 
> 标签：php, arrays

有可能制作`if($array1[0]=>somevalue == $array2[0]=>somevalue){echo true;}else{echo false;}`吗？因为我不能让它工作，你能帮帮我吗？

示例： $array1([0] => 'Joe', [2] => 'Pairs'); $array2([0] => 'info' => array([0] => 'joe'));

```
foreach($array2->info as $info){
    foreach($array1 as $name){
        if($name == $info[0]){
             echo 'true';
           }
           else{
             echo 'false';
           }
      }
  } 
```

这是真正的代码，

数组：

```
 Array
(
[0] => SimpleXMLElement Object
    (
        [companyLocationInfo] => Array
            (
                [0] => SimpleXMLElement Object
                    (
                        [companyName] => AVIS
                        [name] => NYCC07
                        [line1] => 420 EAST 90TH STREET
                    )
                [2] => SimpleXMLElement Object
                    (
                        [companyName] => AVIS
                        [name] => NYCC06
                        [line1] => 310 EAST 64TH STREET
                    )
                [3] => SimpleXMLElement Object
                    (
                        [companyName] => AVIS
                        [name] => NYCC01
                        [line1] => 68 EAST 11TH STREET
                    )

            )

        [rates] => Array
            (
                [0] => SimpleXMLElement Object
                    (
                        [pickupDropoffLocations] => Array
                            (
                                [0] => SimpleXMLElement Object
                                    (
                                        [companyName] => AVIS
                                        [name] => NYCC07
                                    )
                            )
                        [vehicleRentalPrefType] => CCAR
                        [rateAmount] => 83.99
                        [rateCurrency] => USD
                    )
                [2] => SimpleXMLElement Object
                    (
                        [pickupDropoffLocations] => Array
                            (
                                [0] => SimpleXMLElement Object
                                    (
                                        [companyName] => AVIS
                                        [name] => NYCC06
                                    )
                            )
                        [vehicleRentalPrefType] => CCAR
                        [rateAmount] => 110.54
                        [rateCurrency] => USD
                    )
                [3] => SimpleXMLElement Object
                    (
                        [pickupDropoffLocations] => Array
                            (
                                [0] => SimpleXMLElement Object
                                    (
                                        [companyName] => AVIS
                                        [name] => NYCC01
                                    )
                            )
                        [vehicleRentalPrefType] => CCAR
                        [rateAmount] => 210.65
                        [rateCurrency] => USD
                    )

            )

    ) 
```

)

这是代码：

```
$results_array = array();

foreach($result[0]->rates as $rate) {
    foreach($result[0]->companyLocationInfo as $info) {
        if($info->name == $rate->pickupDropoffLocations[0]->name) {
            $results_array[] = array(
                'line1' => $info->line1,
                'name' => $info->locationDetails->name,
                'companyName' => $info->companyName,
                'vehicleRentalPrefType' => $rate->vehicleRentalPrefType
            );
        }
    }
}
print_r($results_array); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T18:46:00.793

你想要做的应该是可能的。如果上面的代码是您实际尝试运行的代码，那么您的第一个问题是您正在比较值`"Joe"`并且`"joe"`这些值不一样。

如果要进行不区分大小写的比较，请使用`if (strcasecmp($var1, $var2) == 0)`（如果两个字符串相同，则返回零，不考虑大小写）。

# php - 如何将数据值传递给表单？

> ID：10743376
> 
> 赞同：0
> 
> 时间：2012-05-24T18:38:54.900
> 
> 标签：php, mysql, forms

我有一个正在为梦幻足球网站开发的应用程序。如果你去这里：

[http://digitaldemo.net/kickass/a-results.php](http://digitaldemo.net/kickass/a-results.php)

您可以看到管理员在查看/编辑玩家时会看到什么。

更新 - - - - - - - - - - - - - - - - - - -

这是 a-results.php 上的相关代码，它呈现数据并*应将*数据传递到 qb-edit.php 上的表单：

```
<table cellspacing="0" cellpadding="5" border="1" width="560">
<tr style="text-align:center">
<td style="text-align:left ; width:175px">Player Name</td>
<td>Team</td>
<td>Pass Yds</td>
<td>Pass TDs</td>
<td>Int Thrown</td>
<td>Rush Yds</td>
<td>Rush TDs</td>
<td>Overall Pts</td>
<td>TFP</td>
</tr>
<?php
$result = mysql_query("SELECT ID, Player, Team, Pass_Yds, Pass_TDs, Int_Thrown, Rush_Yds, Rush_TDs, Overall_Pts, Total_Fantasy_Pts FROM ff_projections WHERE Position = 'QB' ORDER BY Pass_Yds DESC;");

while($row = mysql_fetch_array($result))
{
echo "<tr style=\"text-align:center\"><td style=\"text-align:left\">{$row['Player']}</td>";
echo "<td>{$row['Team']}</td>";
echo "<td>{$row['Pass_Yds']}</td>";
echo "<td>{$row['Pass_TDs']}</td>";
echo "<td>{$row['Int_Thrown']}</td>";
echo "<td>{$row['Rush_Yds']}</td>";
echo "<td>{$row['Rush_TDs']}</td>";
echo "<td>{$row['Overall_Pts']}</td>";
echo "<td>{$row['Total_Fantasy_Pts']}</td>";
echo "<td><form action=\"qb-edit.php\" method=\"post\"><input type=\"hidden\" name=\"ID\" value=\"". $row['ID'] ."\"><input type=\"submit\" name=\"submit\" value=\"Edit\"></form></td></tr>";
}
?>
</table> 
```

这是 qb-edit.php 的内容：

```
<?php
$posted_id = $_POST['ID'];
?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style>
body    { font-family:Arial, Helvetica, sans-serif ;
font-size:14px ;
}

.form   { width:350px ;
margin-auto ;
}

label   { clear:both ;
display:block ;
float:left ;
padding-right:8px ;
line-height:26px ;
}

input[type=text]    { float:right ;
width:163px ;
height:18px ;
margin:3px 0px ;
} 

input[type=text].short  { width:30px ;
margin-right:132px ;
}

input[type=submit]  { clear:both ;
float:left ;
margin-top:20px ;
margin-bottom:20px ;
}

select  { float:right ;
margin-right:118px ;
}
</style>
</head>

<body>

<div class="form">            
<?php 

echo $posted_id;

$result = mysql_query($connect, "SELECT * FROM ff_projections where ID='" . $posted_id . "'") or die ("Error in query");
if ($row = mysql_fetch_array($result)) {

echo "<form method='post' action='add_player.php'>";
echo "<label for='Player'>Player Name:</label> <input type='text' name='Player' value='" . $row['Player'] . "' />";
echo "<label for='Pass_Yds'>Pass Yds:</label> <input class='short' type='text' name='Pass_Yds' value='" . $row['Pass_Yds'] . "' />";
echo "<label for='Pass_TDs'>Pass TDs:</label> <input class='short' type='text' name='Pass_TDs' value='" . $row['Pass_TDs'] . "' />";
echo "<label for='Int_Thrown'>Int Thrown:</label> <input class='short' type='text' name='Int_Thrown' value='" . $row['Int_Thrown'] . "' />";
echo "<label for='Rush_Yds'>Rush Yds:</label> <input class='short' type='text' name='Rush_Yds' value='" . $row['Rush_Yds'] . "' />";
echo "<label for='Rush_TDs'>Rush TDs:</label> <input class='short' type='text' name='Rush_TDs' value='" . $row['Rush_TDs'] . "' />";
echo "<label for='Overall_Pts'>Overall Pts:</label> <input class='short' type='text' name='Overall_Pts' value='" . $row['Overall_Pts'] . "' />";
echo "<input type='submit' name='submit' value='Update Player' />";
echo "<input type='hidden' name='id' value='" . $row['ID'] . "' />";
echo "</form>";
}
?>
</div>

</body>
</html> 
```

我收到一条错误消息：

```
PHP Warning:  mysql_query() expects parameter 2 to be resource, string given in C:\\xampp\\htdocs\\kickass\\qb-edit.php on line 55, referer: http://localhost/kickass/a-results.php 
```

这是 qb-edit.php 的第 55 行：

```
$result = mysql_query($connect, "SELECT * FROM ff_projections where ID='" . $posted_id . "'") or die ("Error in query"); 
```

我要疯了，试图让这个工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T18:42:34.560

只需将他们的数据库记录的 ID 作为参数（可能作为隐藏字段）传递，然后在下一页使用它从数据库中提取他们的记录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T19:10:17.473

这个想法是您传递播放器的 ID（可以是 GET 或 POST 方法），我认为最好的方法是 POST，因为您可以将 ID 传递到 URL

例如：

**player_id = 1 Vince Young**如果您创建指向此页面的链接[http://digitaldemo.net/kickass/edit_player.php?id=1](http://digitaldemo.net/kickass/edit_player.php?id=1)它将显示编辑页面

**player_id = 2 Ryan Tannehill**如果您创建指向此页面的链接[http://digitaldemo.net/kickass/edit_player.php?id=2](http://digitaldemo.net/kickass/edit_player.php?id=2)它将显示编辑页面

等等等等

当然你必须考虑一些事情：

1.  您必须创建一个名为 edit_player 的 php 文件及其上的函数。
2.  您必须验证 SESSION['user'] 是否有权编辑播放器，如果您不检查是否有人可以打开浏览器副本并粘贴这样的链接：http://digitaldemo.net/kickass/edit_player .php?id=1 并且能够编辑您的帖子。
3.  如果我将使用某种 md5 算法来发送用户 ID，那么我将限制入侵者。

请查看此安全指南，它将帮助您保护您的网站：

[http://phpsec.org/projects/guide/](http://phpsec.org/projects/guide/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T22:57:30.023

你的错误是在这里引起的，我相信

"SELECT * FROM ff_projections where ID='" 。$posted_id 。"'"

您在 SELECT 之前开始了双引号，这很好，但是当您到达 ID= 时，您结束了那组引号删除双引号

所以换句话说

```
"SELECT * FROM ff_projections WHERE ID = '$posted_id'" 
```

代替

```
 "SELECT * FROM ff_projections where ID='" . $posted_id . "'" 
```

# winapi - Win32 api 在 f# 中调用 Error GetShortPathName

> ID：10743377
> 
> 赞同：5
> 
> 时间：2012-05-24T18:39:01.390
> 
> 标签：winapi, f#

我可以让这段代码在交互式环境中运行，但是当我从调试器或 .exe 文件运行代码时它会崩溃

忘记错误：检测到 FatalExecutionEngineError！运行时遇到致命错误。错误地址位于线程 0x1104 上的 0x6c9781b0。错误代码为 0xc0000005。此错误可能是 CLR 中的错​​误或用户代码的不安全或不可验证部分中的错误。此错误的常见来源包括 COM 互操作或 PInvoke 的用户封送错误，这可能会损坏堆栈。

使用.net 4.5

```
open System.IO
open System.Runtime.InteropServices
open System.Text

[<DllImport("kernel32.dll",CharSet = CharSet.Auto, SetLastError=true)>]
extern uint32 GetShortPathName(
    [<MarshalAs(UnmanagedType.LPWStr)>] string longpath, 
    [<MarshalAs(UnmanagedType.LPWStr)>] StringBuilder shortpath, 
    [<MarshalAs(UnmanagedType.U4)>] uint32  item)

let MakeShortName(longPath : string) =
    let sb =  StringBuilder()
    let currPath = longPath
    let item = 1024u

   // let blah = ""
    //win32 assigns shortPath
    let blah32 = GetShortPathName(currPath, sb, item)

    sb.ToString()

[<EntryPoint>]
let main argv = 

    let path = @"C:\dev\shortName\shortName"
    let shorty = MakeShortName path
    printfn "%s" shorty 
    let x = System.Console.ReadKey()

    0 
```

交互式环境

* * *

$ (me alt+进入上面两个函数)

val GetShortPathName : 字符串 * StringBuilder * uint32 -> uint32 val MakeShortName : 字符串 -> 字符串

$ MakeShortName @"C:\dev\shortName\shortName";; 验证它：字符串 = "C:\dev\SHORTN~1\SHORTN~1"

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T19:12:01.393

修复。

我只是吸@win 32

删除了元帅

查看解决方案：

```
open System.IO
open System.Runtime.InteropServices
open System.Text

[<DllImport("kernel32.dll",CharSet = CharSet.Auto, SetLastError=true)>]
extern int GetShortPathName(
    string longpath, 
    StringBuilder shortpath, 
    int  item)

let MakeShortName(longPath : string) =
    let sb =  StringBuilder()
    let currPath = longPath
    let item = 1024

   // let blah = ""
//win32 assigns shortPath
    let blah32 = GetShortPathName(currPath, sb, item)

    sb.ToString()

[<EntryPoint>]
let main argv = 

let path = @"C:\dev\shortName\shortName"
let shorty = MakeShortName path
printfn "%s" shorty 
let x = System.Console.ReadKey()

0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-19T18:53:01.677

Win32 函数可能需要最大大小的预分配缓冲区。对我来说，这段代码修复了崩溃：

```
let MakeShortName(longPath : string) =
    let maxSize = uint32 <| longPath.Length + 16
    let sb =  new StringBuilder("", int32 maxSize)
    let len = GetShortPathName(longPath, sb, maxSize)
    sb.ToString(0, int32 len) 
```

# iphone - UITableViewController 在重新启动应用程序之前并不总是与实际的 SQLite 数据库一致

> ID：10743378
> 
> 赞同：0
> 
> 时间：2012-05-24T18:39:02.367
> 
> 标签：iphone, ios5, transactions, sqlite

在我的“viewWillAppear”回调中，我尝试使用 SQLite 数据库中的数据填充 UITableViewController 以供用户查看。

但是，我注意到如果我切换到另一个选项卡，将新的数据行提交到 SQLite 并切换回 UITableViewController，它不会使用我刚刚添加到数据库的新行进行更新。我必须完全退出应用程序并导航回 UITableViewController 才能看到新行反映在表格视图上。

我如何解决这个问题（即，在来回切换多次后，如何强制在 UITableViewController 上始终显示 SQLite 中的最新信息？）

将不胜感激所有/任何建议。

这是代码：

```
- (void)viewWillAppear:(BOOL)animated
{
[super viewWillAppear:animated];
NSLog(@"viewwillappear");
//[[self tableView] reloadData];
int rc=-1;
if (databasePath == nil) {
    NSLog(@"database path is NIL. Trying to set it");
    databaseName = @"mymemories.sqlite";
    NSArray *documentPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDir = [documentPaths objectAtIndex:0];
    databasePath = [documentsDir stringByAppendingPathComponent:databaseName];
    return;
}
rc = sqlite3_open([databasePath UTF8String], &database);
if(rc == SQLITE_OK) {
    memoriesArray = [[NSMutableArray alloc]init ];
    sqlite3_stmt *statement = nil;

    NSString *fullQuery = @"SELECT * FROM memories";

    const char *sql = [fullQuery UTF8String];

    if(sqlite3_prepare_v2(database, sql, -1, &statement, NULL)!=SQLITE_OK)
        NSAssert1(0, @"Error preparing statement '%s'", sqlite3_errmsg(database));
    else
    {
        while(sqlite3_step(statement) == SQLITE_ROW)
        {
            NSString *place= [NSString stringWithUTF8String:(const char*)sqlite3_column_text(statement, 4)];
            //[User setName:[NSString stringWithUTF8String:(const char*)sqlite3_column_text(statement, 1)]];
            //[User setAge:[NSString stringWithUTF8String:(const char*)sqlite3_column_text(statement, 2)]];

            [memoriesArray addObject:place];
            //[currentUser release];
        }
    }
    sqlite3_finalize(statement);
    sqlite3_close(database);
} 
```

}

此外，如果这是相关的，这里是提交到 SQLite 数据库的代码：

```
 NSData * blob = [NSData dataWithContentsOfURL:recordedTmpFile];
int rc=-1;
rc = sqlite3_open([databasePath UTF8String], &database);

if(rc == SQLITE_OK) {
    sqlite3_exec(database, "BEGIN", 0, 0, 0);

    NSLog(@"Connected To: %@",databasePath);
    sqlite3_stmt *updStmt =nil; 
    const char *sql = "INSERT INTO memories (data,place) VALUES (?,?);";

    rc = sqlite3_prepare_v2(database, sql, -1, &updStmt, NULL);

    if(rc!= SQLITE_OK)
    {
        NSLog(@"Error while creating update statement:%@", sqlite3_errmsg(database));
    }
    sqlite3_bind_text( updStmt, 2, [[tags text] UTF8String], -1, SQLITE_TRANSIENT);
    rc = sqlite3_bind_blob(updStmt, 1, [blob bytes], [blob length] , SQLITE_BLOB);

    if((rc = sqlite3_step(updStmt)) != SQLITE_DONE)
    {
        NSLog(@"Error while updating: %@", sqlite3_errmsg(database));
        sqlite3_reset(updStmt);
    } 

    sqlite3_exec(database, "COMMIT", 0, 0, 0);
    //rc = sqlite3_reset(updStmt);

    sqlite3_close(database);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:15:42.963

假设您将 SQL 数据读入一个数组，然后使用该数组构建 UITableView，当您向 SQL 数据库添加一条记录时，您要么需要将它也添加到用于构建表的数组中，要么重新读取将数据库中的数据存入数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T23:47:06.447

作为对达伦答案的解释的延伸。

首先他的回答是正确的。其次，您需要使用 NSMutableArray 来确保一致性，这是您出错的地方，因为您不应该更新它

为确保一致性而应采取的步骤如下：

**将数据加载到表中**

*   在 viewDidLoad 中，调用您的 SQL 语句并将其加载到您的数组中
*   在 viewWillAppear 中确保您的数组包含数据，如果不显示没有返回结果的通知

**将数据保存到数据库**

*   更新对数组（或数据源）的更改
*   使用更新的数据源更新数据库以确保一致性
*   使用 4 种 UITableView 重新加载[方法之一更新表格](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)

过去，拥有数十年经验的同事向我推荐使用 NSMArray 来确保更新和应用程序加载之间的一致性是相当普遍的做法。

注意：您需要同步数据源以确保 1 个线程在任何时候都在访问它，否则您将遇到崩溃。

# vb.net - 使用 VB.Net 编码“ping”一个电子邮件地址

> ID：10743379
> 
> 赞同：2
> 
> 时间：2012-05-24T18:39:03.977
> 
> 标签：vb.net, email, ping, verify

VB.Net 中是否有办法“Ping”一个电子邮件地址，以查看该电子邮件是否是真实的，不会出现任何错误？

如果是，您能否展示实现此功能的 VB.Net 编码是什么样的？

我计划在需要客户电子邮件的应用程序中使用它，并且在电话接听者在保存客户详细信息之前将其输入表单时验证它会很好。

这是我们用来向客户表中的所有客户发送电子邮件促销的代码：

```
Private Sub RibbonButtonSendTestEmail_Click(sender As System.Object, e As System.EventArgs) Handles RibbonButtonSendTestEmail.Click

    Dim SmtpServer As New SmtpClient()
    Dim mail As New MailMessage()
    Dim strSqlStatement As String = "Select CustomerName, Email " & _
                               "From Customers "

    Using objSqlCommand As SqlCommand = New SqlCommand(strSqlStatement, ObjConnection)

        With objSqlCommand

            ' Open the SqlConnection before executing the query.
            '---------------------------------------------------
            Cursor = Cursors.WaitCursor

            ObjConnection.Open()

            Dim objDataReader As SqlDataReader = .ExecuteReader()

            ' Go through all the customers and send out the promotion emails.
            '----------------------------------------------------------------
            If objDataReader.HasRows Then

                SmtpServer.Host = TextBoxSMTPServer.Text
                SmtpServer.Port = TextBoxPort.Text

                If TextBoxUseSSL.Text = "Yes" Then
                    SmtpServer.EnableSsl = True
                Else
                    SmtpServer.EnableSsl = False
                End If

                If TextBoxUseDefaultCredentials.Text = "Yes" Then
                    SmtpServer.UseDefaultCredentials = True
                Else
                    SmtpServer.UseDefaultCredentials = False
                End If

                SmtpServer.Credentials = New Net.NetworkCredential(TextBoxUserName.Text, TextBoxPassword.Text)

                While objDataReader.Read()

                    Try
                        mail.To.Add(objDataReader("Email").ToString)
                        mail.From = New MailAddress(TextBoxEmailFrom.Text)
                        mail.Subject = "Promotion: " & TextBoxID.Text
                        mail.Body = "Dear " & objDataReader("CustomerName") & "," & vbCrLf & vbCrLf & TextBoxPromotionBodyText.Text

                        SmtpServer.Send(mail)

                    Catch exSMTP As SmtpException
                        MessageBox.Show("Sorry, I could not send an email for: " & _
                                    vbCrLf & objDataReader("CustomerName") & "." & vbCrLf & _
                                    "Please make sure it is correct.", _
                                    "Error")

                    Catch exFormat As FormatException
                        MessageBox.Show("Sorry, this customer's email is not properly formatted: " & _
                                    vbCrLf & objDataReader("CustomerName") & "." & vbCrLf & _
                                    "Please make sure it is correct.", _
                                    "Error")
                    End Try
                End While

                LabelEmail.Text = "Sent email promotions to the customers."
            End If

            objDataReader.Close()
            ObjConnection.Close()

            Cursor = Cursors.Default
        End With ' objSqlCommand
    End Using ' objSqlCommand
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T18:49:01.057

是的，这是完全可能的：

*1* **DNS 查找域的 MX 记录**

*   可能有多个，您可以选择任何人，尽管从技术上讲，偏好指标最低的那个是首选。

*2* **TCP 连接到邮件服务器（端口 25）**

*   问好：`HELO`
*   证明你的身份：`mail from:<test@example.com>`
*   说出你要写信给谁：`rcpt to<testaddress@example.com>`
*   此时服务器将回复一个响应，您将收到一条消息`OK`或`550`错误消息（如`The email account that you tried to reach does not exist`：）
*   断开连接，消息将被丢弃。

但是老兄，你想让 VB 代码做到这一点吗？您只需要一个 DNS 谈话片段和 TCP 连接构建片段（或者可能有一些 SMTP 库可以为您完成所有这些工作 - 或者为您提供灵感来自己解决这个问题）。不要忘记您可能会找到一个 C# 代码示例，并使用 Visual Studio 的转换工具将其切换到 VB。

**笔记**

许多域都有黑洞/捕获所有......前者将接受任何电子邮件地址，如果它无效则将其删除，后者将接受任何电子邮件地址并将它们转发到中央帐户（不保证会发生什么...... . 将发件人的地址卖给垃圾邮件发送者？）在这两种情况下，您都不会收到`550`邮件，因此您永远无法确定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T18:44:23.970

最可靠的方法是发送一封测试电子邮件，让收件人通过单击链接来验证收据，然后您阅读该链接并将电子邮件标记为活动。

您应该使用正则表达式对电子邮件的语法进行原始检查，但除此之外，验证电子邮件的*最可靠*方法是尝试发送并确认收据。

# android - 何时应该使用 LRUCache 回收位图？

> ID：10743381
> 
> 赞同：56
> 
> 时间：2012-05-24T18:39:08.950
> 
> 标签：android, bitmap, android-lru-cache

我正在使用`LRUCache`缓存存储在文件系统上的位图。我根据此处的示例构建了缓存：http: [//developer.android.com/training/displaying-bitmaps/cache-bitmap.html](http://developer.android.com/training/displaying-bitmaps/cache-bitmap.html)

问题是我在使用该应用程序时经常看到 OutOfMemory 崩溃。我相信当 LRUCache 驱逐一个图像为另一个图像腾出空间时，内存并没有被释放。

当图像被驱逐时，我添加了对 Bitmap.recycle() 的调用：

```
 // use 1/8 of the available memory for this memory cache
    final int cacheSize = 1024 * 1024 * memClass / 8;
                mImageCache = new LruCache<String, Bitmap>(cacheSize) {
                @Override
                protected int sizeOf(String key, Bitmap bitmap) {
                    return bitmap.getByteCount();
                }

                @Override
                protected void entryRemoved(boolean evicted, String key, Bitmap oldBitmap, Bitmap newBitmap) {
                    oldBitmap.recycle();
                    oldBitmap = null;
                }
            }; 
```

这修复了崩溃，但它也导致图像*有时*不会出现在应用程序中（只是图像应该存在的黑色空间）。任何时候发生这种情况，我都会在我的 Logcat: 中看到这条消息`Cannot generate texture from bitmap`。

快速的谷歌搜索显示，这是因为正在显示的图像已被回收。

那么这里发生了什么？如果我只是在它们被删除后回收它们，为什么回收的图像仍然在 LRUCache 中？实现缓存的替代方法是什么？Android 文档明确指出 LRUCache 是要走的路，但他们没有提到回收位图的必要性或如何这样做。

**已解决：** 如果它对其他人有用，则接受的答案所建议的解决此问题的方法是*不要*执行我在上面的代码示例中所做的事情（不要在`entryRemoved()`调用中回收位图）。

相反，当您完成 ImageView 时（例如`onPause()`在活动中，或在适配器中回收视图时）检查位图是否仍在缓存中（我在`isImageInCache()`缓存类中添加了一个方法），如果它是不，然后回收位图。否则，别管它。这修复了我的`OutOfMemory`异常并阻止了回收仍在使用的位图。

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-05-25T00:20:46.053

> 我相信当 LRUCache 驱逐一个图像为另一个图像腾出空间时，内存并没有被释放。

`Bitmap`在被回收或垃圾收集之前不会。

> 快速的谷歌搜索显示，这是因为正在显示的图像已被回收。

这就是为什么你不应该在那里回收。

> 如果我只是在它们被删除后回收它们，为什么回收的图像仍然在 LRUCache 中？

据推测，它们不在`LRUCache`. 它们位于`ImageView`仍在使用`Bitmap`.

> 实现缓存的替代方法是什么？

为了便于讨论，我们假设您正在使用小部件中的`Bitmap`对象`ImageView`，例如在`ListView`.

当你完成了 a `Bitmap`（例如， a 中的行`ListView`被回收），你检查它是否还在缓存中。如果是，你别管它。如果不是，你就是`recycle()`它。

缓存只是让您知道哪些`Bitmap`对象值得持有。缓存无法知道是否`Bitmap`仍在某处使用。

顺便说一句，如果您使用 API 级别 11+，请考虑使用[`inBitmap`](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inBitmap). `OutOMemoryErrors`当分配无法完成时触发。最后我检查了一下，Android 没有压缩垃圾收集器，所以你可以得到一个`OutOfMemoryError`由于碎片（想要分配比最大的单个可用块更大的东西）。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2014-04-04T07:10:20.953

面对同样的情况，感谢@CommonsWare 的讨论。在此处发布完整的解决方案，以帮助更多人来这里解决相同的问题。欢迎编辑和评论。干杯

```
 When should I recycle a bitmap using LRUCache? 
```

*   正是当您的位图既不在缓存中也不被任何 ImageView 引用时。

*   为了维护位图的引用计数，我们必须扩展 BitmapDrawable 类并向它们添加引用属性。

*   这个 android 示例有确切的答案。 [显示位图.zip](http://developer.android.com/downloads/samples/DisplayingBitmaps.zip)

我们将在下面了解详细信息和代码。

```
(don't recycle the bitmaps in the entryRemoved() call). 
```

不完全是。

*   在 entryRemoved 委托中，检查 Bitmap 是否仍被任何 ImageView 引用。如果不。自己在那里回收。

*   反之亦然，在接受的答案中提到，当视图即将被重用或被转储时，检查它的位图（如果视图被重用，则为前一个位图）是否在缓存中。如果它在那里，别管它，否则回收它。

*   这里的关键是我们需要在这两个地方检查我们是否可以回收位图。

我将解释我使用 LruCache 为我保存位图的具体情况。并在 ListView 中显示它们。并在不再使用位图时调用回收。

**上面提到的示例的RecyclingBitmapDrawable.java**和**RecyclingImageView.java**是我们这里需要的核心部分。他们处理事情很漂亮。他们的**setIsCached**和**setIsDisplayed**方法正在做我们需要的事情。

代码可以在上面提到的示例链接中找到。但也要在答案底部发布文件的完整代码，以防将来链接断开或更改。对覆盖 setImageResource 进行了小修改，以检查先前位图的状态。

--- 这里是你的代码 ---

所以你的 LruCache 管理器应该看起来像这样。

**LruCacheManager.java**

```
package com.example.cache;

import android.os.Build;
import android.support.v4.util.LruCache;

public class LruCacheManager {

    private LruCache<String, RecyclingBitmapDrawable> mMemoryCache;

    private static LruCacheManager instance;

    public static LruCacheManager getInstance() {
        if(instance == null) {
            instance = new LruCacheManager();
            instance.init();
        } 

        return instance;
    }

    private void init() {

        // We are declaring a cache of 6Mb for our use.
        // You need to calculate this on the basis of your need 
        mMemoryCache = new LruCache<String, RecyclingBitmapDrawable>(6 * 1024 * 1024) {
            @Override
            protected int sizeOf(String key, RecyclingBitmapDrawable bitmapDrawable) {
                // The cache size will be measured in kilobytes rather than
                // number of items.
                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB_MR1) {
                    return bitmapDrawable.getBitmap().getByteCount() ;
                } else {
                    return bitmapDrawable.getBitmap().getRowBytes() * bitmapDrawable.getBitmap().getHeight();
                }
            }

            @Override
            protected void entryRemoved(boolean evicted, String key, RecyclingBitmapDrawable oldValue, RecyclingBitmapDrawable newValue) {
                super.entryRemoved(evicted, key, oldValue, newValue);
                oldValue.setIsCached(false);
            }
        };

    }

    public void addBitmapToMemoryCache(String key, RecyclingBitmapDrawable bitmapDrawable) {
        if (getBitmapFromMemCache(key) == null) {
            // The removed entry is a recycling drawable, so notify it
            // that it has been added into the memory cache
            bitmapDrawable.setIsCached(true);
            mMemoryCache.put(key, bitmapDrawable);
        }
    }

    public RecyclingBitmapDrawable getBitmapFromMemCache(String key) {
        return mMemoryCache.get(key);
    }

    public void clear() {
        mMemoryCache.evictAll();
    }
} 
```

您的 ListView/GridView 适配器的**getView()**应该看起来像往常一样正常。就像您使用 setImageDrawable 方法在 ImageView 上设置新图像一样。它在内部检查前一个位图的引用计数，如果不在 lrucache 中，它将在内部调用它的回收。

```
@Override
    public View getView(int position, View convertView, ViewGroup parent) {
        RecyclingImageView imageView;
        if (convertView == null) { // if it's not recycled, initialize some attributes
            imageView = new RecyclingImageView(getActivity());
            imageView.setLayoutParams(new GridView.LayoutParams(
                    GridView.LayoutParams.WRAP_CONTENT,
                    GridView.LayoutParams.WRAP_CONTENT));
            imageView.setScaleType(ImageView.ScaleType.FIT_CENTER);
            imageView.setPadding(5, 5, 5, 5);

        } else {
            imageView = (RecyclingImageView) convertView;
        }

        MyDataObject dataItem = (MyDataObject) getItem(position);
        RecyclingBitmapDrawable  image = lruCacheManager.getBitmapFromMemCache(dataItem.getId());

        if(image != null) {
            // This internally is checking reference count on previous bitmap it used.
            imageView.setImageDrawable(image);
        } else {
            // You have to implement this method as per your code structure.
            // But it basically doing is preparing bitmap in the background
            // and adding that to LruCache.
            // Also it is setting the empty view till bitmap gets loaded.
            // once loaded it just need to call notifyDataSetChanged of adapter. 
            loadImage(dataItem.getId(), R.drawable.empty_view);
        }

        return imageView;

    } 
```

这是你的**RecyclingImageView.java**

```
/*
 * Copyright (C) 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.example.cache;

import android.content.Context;
import android.graphics.drawable.Drawable;
import android.graphics.drawable.LayerDrawable;
import android.util.AttributeSet;
import android.widget.ImageView;

/**
 * Sub-class of ImageView which automatically notifies the drawable when it is
 * being displayed.
 */
public class RecyclingImageView extends ImageView {

    public RecyclingImageView(Context context) {
        super(context);
    }

    public RecyclingImageView(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    /**
     * @see android.widget.ImageView#onDetachedFromWindow()
     */
    @Override
    protected void onDetachedFromWindow() {
        // This has been detached from Window, so clear the drawable
        setImageDrawable(null);

        super.onDetachedFromWindow();
    }

    /**
     * @see android.widget.ImageView#setImageDrawable(android.graphics.drawable.Drawable)
     */
    @Override
    public void setImageDrawable(Drawable drawable) {
        // Keep hold of previous Drawable
        final Drawable previousDrawable = getDrawable();

        // Call super to set new Drawable
        super.setImageDrawable(drawable);

        // Notify new Drawable that it is being displayed
        notifyDrawable(drawable, true);

        // Notify old Drawable so it is no longer being displayed
        notifyDrawable(previousDrawable, false);
    }

    /**
     * @see android.widget.ImageView#setImageResource(android.graphics.drawable.Drawable)
     */
    @Override
    public void setImageResource(int resId) {
        // Keep hold of previous Drawable
        final Drawable previousDrawable = getDrawable();

        // Call super to set new Drawable
        super.setImageResource(resId);

        // Notify old Drawable so it is no longer being displayed
        notifyDrawable(previousDrawable, false);
    }

    /**
     * Notifies the drawable that it's displayed state has changed.
     *
     * @param drawable
     * @param isDisplayed
     */
    private static void notifyDrawable(Drawable drawable, final boolean isDisplayed) {
        if (drawable instanceof RecyclingBitmapDrawable) {
            // The drawable is a CountingBitmapDrawable, so notify it
            ((RecyclingBitmapDrawable) drawable).setIsDisplayed(isDisplayed);
        } else if (drawable instanceof LayerDrawable) {
            // The drawable is a LayerDrawable, so recurse on each layer
            LayerDrawable layerDrawable = (LayerDrawable) drawable;
            for (int i = 0, z = layerDrawable.getNumberOfLayers(); i < z; i++) {
                notifyDrawable(layerDrawable.getDrawable(i), isDisplayed);
            }
        }
    }

} 
```

这是你的**RecyclingBitmapDrawable.java**

```
/*
 * Copyright (C) 2013 The Android Open Source Project
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package com.example.cache;

import android.content.res.Resources;
import android.graphics.Bitmap;
import android.graphics.drawable.BitmapDrawable;

import android.util.Log;

/**
 * A BitmapDrawable that keeps track of whether it is being displayed or cached.
 * When the drawable is no longer being displayed or cached,
 * {@link android.graphics.Bitmap#recycle() recycle()} will be called on this drawable's bitmap.
 */
public class RecyclingBitmapDrawable extends BitmapDrawable {

    static final String TAG = "CountingBitmapDrawable";

    private int mCacheRefCount = 0;
    private int mDisplayRefCount = 0;

    private boolean mHasBeenDisplayed;

    public RecyclingBitmapDrawable(Resources res, Bitmap bitmap) {
        super(res, bitmap);
    }

    /**
     * Notify the drawable that the displayed state has changed. Internally a
     * count is kept so that the drawable knows when it is no longer being
     * displayed.
     *
     * @param isDisplayed - Whether the drawable is being displayed or not
     */
    public void setIsDisplayed(boolean isDisplayed) {
        //BEGIN_INCLUDE(set_is_displayed)
        synchronized (this) {
            if (isDisplayed) {
                mDisplayRefCount++;
                mHasBeenDisplayed = true;
            } else {
                mDisplayRefCount--;
            }
        }

        // Check to see if recycle() can be called
        checkState();
        //END_INCLUDE(set_is_displayed)
    }

    /**
     * Notify the drawable that the cache state has changed. Internally a count
     * is kept so that the drawable knows when it is no longer being cached.
     *
     * @param isCached - Whether the drawable is being cached or not
     */
    public void setIsCached(boolean isCached) {
        //BEGIN_INCLUDE(set_is_cached)
        synchronized (this) {
            if (isCached) {
                mCacheRefCount++;
            } else {
                mCacheRefCount--;
            }
        }

        // Check to see if recycle() can be called
        checkState();
        //END_INCLUDE(set_is_cached)
    }

    private synchronized void checkState() {
        //BEGIN_INCLUDE(check_state)
        // If the drawable cache and display ref counts = 0, and this drawable
        // has been displayed, then recycle
        if (mCacheRefCount <= 0 && mDisplayRefCount <= 0 && mHasBeenDisplayed
                && hasValidBitmap()) {

            Log.d(TAG, "No longer being used or cached so recycling. "
                        + toString());

        getBitmap().recycle();
    }
        //END_INCLUDE(check_state)
    }

    private synchronized boolean hasValidBitmap() {
        Bitmap bitmap = getBitmap();
        return bitmap != null && !bitmap.isRecycled();
    }

} 
```

# java - Java - eclipse中的错误：赋值的左侧必须是变量

> ID：10743384
> 
> 赞同：2
> 
> 时间：2012-05-24T18:39:29.143
> 
> 标签：java, eclipse

这是我的代码的一小部分。我的项目是模拟整个学校系统。添加教师、课程等。我所有的班级成员都是私人的，所以我创建了 setter 和 getter 方法。我尝试给“teachersNum”一个值，这必须是自动的（不是来自键盘）。所以如果它是第一位老师等，我想给它赋值1。我希望你能理解。对不起我的英语不好。

```
public void addTeachersList(Teachers teachers) {
   if(this.teachersSize<100){
     this.teachersList[this.teachersSize] = teachers;
     this.teachersList[this.teachersSize].getTeacherNum() = this.teachersSize -1;
     this.teachersSize++;
   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T18:42:04.047

你必须调用一个setter：

```
this.teachersList[this.teachersSize].setTeacherNum(this.teachersSize-1); 
```

调用 getter getTeacherNum 只是给你数字，它不是对该属性的引用。

尽管我必须说，使用`List`实现而不是数组确实会帮自己一个忙。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T18:42:45.640

在这一行

```
this.teachersList[this.teachersSize].getTeacherNum() = this.teachersSize -1; 
```

`getTeacherNum()`返回一个值。你不能分配给它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T18:49:04.157

你这里有问题

```
this.teachersList[this.teachersSize].getTeacherNum() = this.teachersSize -1; 
```

.getTeacherNum() 将返回一个值，该值必须存储在左侧的变量中。

例如：

temp = .getTeacherNum();

并且最好使用静态变量来保持教师的数量，因此每次创建教师时，他/她都会得到一个与前一个不同的 nos

例如：

```
 xxxx001
 xxxx002
 xxxx003 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-12-21T21:33:14.133

你这里有问题

```
this.teachersList[this.teachersSize].getTeacherNum() = this.teachersSize -1; 
```

`.getTeacherNum()`将返回一个值，该值必须存储在左侧的变量中。

例如：`temp = .getTeacherNum()`;

并且最好使用静态变量来保持教师的数量，因此每次创建教师时，他/她都会得到一个与前一个不同的 nos

例如：

```
xxxx001
xxxx002
xxxx003 
```

# java - 字符串数组拆分字符串后抛出 ArrayIndexOutOfBoundsException

> ID：10743387
> 
> 赞同：-2
> 
> 时间：2012-05-24T18:39:40.640
> 
> 标签：java, string, gwt, split

我正在尝试使用 GWT 开发基于 Web 客户端的在线游戏。

游戏机制现在工作得很好，我真的很想继续我的开发计划的下一步，但现在我坚持使用我创建的一个简单的编码/解码函数来将我的客户端数据存储到一个字符串中.

我采取的步骤并不复杂。在运行时，我的服务器创建游戏对象的“ImageStates”以在我的客户端的画布上绘制。每个 ImageState 包含许多层，其中包含必须在什么特定时间在什么地方绘制的详细信息等。

我尝试了 ObjectInput/OutputStream，结合了 GZip-Compression 和 ByteInputStreams，但我找不到前两个的任何 GWT 实现，所以我不得不考虑另一种解决方案并遇到了 gwt-lzma。

我的目标是将这些细节编码为单个字符串，在服务器上对其进行压缩，将压缩后的数据发送到客户端，在那里解压缩并解码，以便客户端可以“读取”它。为此，我创建了一个编码和一个解码函数：

编码器：

```
public static String encodeImageStateContainer(HashMap<String,HashMap<Long,ImageState>> imageStateContainer){
    StringBuilder mainStringBuilder = new StringBuilder();

    Iterator<Entry<String,HashMap<Long,ImageState>>> imageStateContainerIterator = imageStateContainer.entrySet().iterator();
    while(imageStateContainerIterator.hasNext()){
        Entry<String,HashMap<Long,ImageState>> tempImageStateManagerMetadata = imageStateContainerIterator.next();

        HashMap<Long,ImageState> tempImageStateManager = tempImageStateManagerMetadata.getValue();

        if(tempImageStateManager.size() > 0){

            if(mainStringBuilder.length() > 0){
                mainStringBuilder.append('}');  //Divisor between Image State Managers
            }

            mainStringBuilder.append(tempImageStateManagerMetadata.getKey());
            mainStringBuilder.append('|');  //Divisor between Name and following Data

            StringBuilder subOneStringBuilder = new StringBuilder();            

            Iterator<Entry<Long,ImageState>> tempImageStateManagerIterator = tempImageStateManager.entrySet().iterator();
            while(tempImageStateManagerIterator.hasNext()){
                Entry<Long,ImageState> tempImageStateMetaData = tempImageStateManagerIterator.next();

                if(subOneStringBuilder.length() > 0){
                    subOneStringBuilder.append(')');    //Divisor between Image Objects
                }

                subOneStringBuilder.append(tempImageStateMetaData.getKey());
                subOneStringBuilder.append('-');    //Divisor between Object Id and Image State Data

                StringBuilder subTwoStringBuilder = new StringBuilder();
                ImageState tempImageState = tempImageStateMetaData.getValue();
                subOneStringBuilder.append(tempImageState.getFirstFrameId());   //1\. => First Frame Id
                subOneStringBuilder.append(';');    //Divisor between Image State data types
                subOneStringBuilder.append(tempImageState.getFramesPerLayer()); //2\. => Total Frame Count
                subOneStringBuilder.append(';');
                subOneStringBuilder.append(tempImageState.getMinumimScaleFactor()); //3\. => Minimum Scale Factor
                subOneStringBuilder.append(';');

                ImageStateLayer[] tempImageStateLayers = tempImageState.getImageStateLayers();
                for(int layerId = 0; layerId < tempImageStateLayers.length; ++layerId){

                    if(subTwoStringBuilder.length() > 0){
                        subTwoStringBuilder.append('/');    //Divisor between Image State Layers
                    }

                    //Frame Arrays
                    String[] imageNativePath = tempImageStateLayers[layerId].getImageNativePath();
                    short[] offsetX = tempImageStateLayers[layerId].getOffsetX();
                    short[] offsetY = tempImageStateLayers[layerId].getOffsetY();
                    short[] orientation = tempImageStateLayers[layerId].getOrientation();

                    //Finalization Arrays
                    byte[] imagePathChange = tempImageStateLayers[layerId].getImagePathChange();
                    byte[] offsetXChange = tempImageStateLayers[layerId].getOffsetXChange();
                    byte[] offsetYChange = tempImageStateLayers[layerId].getOffsetYChange();
                    byte[] orientationChange = tempImageStateLayers[layerId].getOrientationChange();

                    //Image Path Data
                    StringBuilder subThreeStrignBuilder = new StringBuilder();
                    for(int imagePathId = 0; imagePathId < imageNativePath.length; ++imagePathId){

                        if(subThreeStrignBuilder.length() > 0){
                            subThreeStrignBuilder.append('#');  //Divisor between Frame Data Sets
                        }

                        subThreeStrignBuilder.append(imageNativePath[imagePathId]);
                        subThreeStrignBuilder.append(',');  //Divisor between Frame Data Set Data
                        subThreeStrignBuilder.append(imagePathChange[imagePathId]);
                    }

                    subTwoStringBuilder.append(subThreeStrignBuilder.toString());
                    subTwoStringBuilder.append('[');    //Divisor between Frame Data Types

                    //OffsetX Data
                    subThreeStrignBuilder = new StringBuilder();
                    for(int offsetXId = 0; offsetXId < offsetX.length; ++offsetXId){

                        if(subThreeStrignBuilder.length() > 0){
                            subThreeStrignBuilder.append('#');  //Divisor between Frame Data Sets
                        }

                        subThreeStrignBuilder.append(offsetX[offsetXId]);
                        subThreeStrignBuilder.append(',');  //Divisor between Frame Data Set Data
                        subThreeStrignBuilder.append(offsetXChange[offsetXId]);
                    }

                    subTwoStringBuilder.append(subThreeStrignBuilder.toString());
                    subTwoStringBuilder.append('[');    //Divisor between Frame Data Types

                    //OffsetY Data
                    subThreeStrignBuilder = new StringBuilder();
                    for(int offsetYId = 0; offsetYId < offsetY.length; ++offsetYId){

                        if(subThreeStrignBuilder.length() > 0){
                            subThreeStrignBuilder.append('#');  //Divisor between Frame Data Sets
                        }

                        subThreeStrignBuilder.append(offsetY[offsetYId]);
                        subThreeStrignBuilder.append(',');  //Divisor between Frame Data Set Data
                        subThreeStrignBuilder.append(offsetYChange[offsetYId]);
                    }

                    subTwoStringBuilder.append(subThreeStrignBuilder.toString());
                    subTwoStringBuilder.append('[');    //Divisor between Frame Data Types

                    //Orientation Data
                    subThreeStrignBuilder = new StringBuilder();
                    for(int orientationId = 0; orientationId < orientation.length; ++orientationId){

                        if(subThreeStrignBuilder.length() > 0){
                            subThreeStrignBuilder.append('#');  //Divisor between Frame Data Sets
                        }

                        subThreeStrignBuilder.append(orientation[orientationId]);
                        subThreeStrignBuilder.append(',');  //Divisor between Frame Data Set Data
                        subThreeStrignBuilder.append(orientationChange[orientationId]);
                    }

                    subTwoStringBuilder.append(subThreeStrignBuilder.toString());

                }
                subOneStringBuilder.append(subTwoStringBuilder.toString());             
            }
            mainStringBuilder.append(subOneStringBuilder.toString());
        }
    }

    return mainStringBuilder.toString();
} 
```

解码器：

```
public static HashMap<String,HashMap<Long,ImageState>> decodeImageStateContainer(String data){      

    String[] imageStateManagerArray = data.split("\\}");
    HashMap<String,HashMap<Long,ImageState>> imageStateManagerContainer = new HashMap<String,HashMap<Long,ImageState>>(imageStateManagerArray.length);

    for(int managerId = 0; managerId < imageStateManagerArray.length; ++managerId){
        String[] tempImageStateData = imageStateManagerArray[managerId].split("\\|");

        HashMap<Long,ImageState> tempImageStateManager = new HashMap<Long,ImageState>();
        imageStateManagerContainer.put(tempImageStateData[0], tempImageStateManager);

        String[] tempImageStateManagerObjects = tempImageStateData[1].split("\\)");

        for(int objectId = 0; objectId < tempImageStateManagerObjects.length; ++objectId){
            String[] tempImageObjectData = tempImageStateManagerObjects[objectId].split("\\-");

            long imageObjectId = Long.parseLong(tempImageObjectData[0]);
            String[] imageStateMetaData = tempImageObjectData[1].split("\\;");              
            ImageState tempImageState = new ImageState(Integer.parseInt(imageStateMetaData[1]), Integer.parseInt(imageStateMetaData[0]), Integer.parseInt(imageStateMetaData[2]));
            tempImageStateManager.put(imageObjectId, tempImageState);

            String[] tempImageStateLayerMetaData = imageStateMetaData[3].split("\\/");
            ImageStateLayer[] tempImageStateLayers = new ImageStateLayer[tempImageStateLayerMetaData.length];

            for(int layerId = 0; layerId < tempImageStateLayerMetaData.length; ++layerId){
                String[] layerElements = tempImageStateLayerMetaData[layerId].split("\\[");     

                String[] imageNativePathDetails = layerElements[0].split("\\#");
                String[] offsetXDetails = layerElements[1].split("\\#");
                String[] offsetYDetails = layerElements[2].split("\\#");
                **String[] orientationDetails = layerElements[3].split("\\#");**

                //Image Path Data
                String[] imageNativePaths = new String[imageNativePathDetails.length];
                byte[] imagePathChange = new byte[imageNativePathDetails.length];
                for(int id = 0; id < imageNativePathDetails.length; ++id){                      
                    String[] imagePathDetailElements = imageNativePathDetails[id].split("\\,");
                    imageNativePaths[id] = imagePathDetailElements[0];
                    imagePathChange[id] = Byte.parseByte(imagePathDetailElements[1]);
                }

                //OffsetX Data
                short[] offsetX = new short[offsetXDetails.length];
                byte[] offsetXChange = new byte[offsetXDetails.length];
                for(int id = 0; id < offsetXDetails.length; ++id){
                    String[] offsetXDetailElements = offsetXDetails[id].split("\\,");
                    offsetX[id] = Short.parseShort(offsetXDetailElements[0]);
                    offsetXChange[id] = Byte.parseByte(offsetXDetailElements[1]);
                }

                //OffsetY Data
                short[] offsetY = new short[offsetYDetails.length];
                byte[] offsetYChange = new byte[offsetYDetails.length];
                for(int id = 0; id < offsetYDetails.length; ++id){
                    String[] offsetYDetailElements = offsetYDetails[id].split("\\,");
                    offsetY[id] = Short.parseShort(offsetYDetailElements[0]);
                    offsetYChange[id] = Byte.parseByte(offsetYDetailElements[1]);
                }

                //Orientation Data
                short[] orientation = new short[orientationDetails.length];
                byte[] orientationChange = new byte[orientationDetails.length];
                for(int id = 0; id < orientationDetails.length; ++id){
                    String[] orientationDetailElements = orientationDetails[id].split("\\,");
                    orientation[id] = Short.parseShort(orientationDetailElements[0]);
                    orientationChange[id] = Byte.parseByte(orientationDetailElements[1]);
                }

                //Create the Layer and Add it to the Array
                tempImageStateLayers[layerId] = new ImageStateLayer(imageNativePaths,new short[][]{offsetX,offsetY,orientation}, new byte[][]{imagePathChange,offsetXChange,offsetYChange,orientationChange});

            }

            //Connect the Reference to the layers with the Image State
            tempImageState.setImageStateLayers(tempImageStateLayers);

        }           

    }       

    return imageStateManagerContainer;
} 
```

现在我的问题：如果我在服务器上对其进行编码并在之后直接解码它大约需要三个编码周期，直到我在解码器中的这个特定位置得到一个 IndexOutofBoundsException，最后一行是错误似乎是根据的行堆栈跟踪：

```
for(int layerId = 0; layerId < tempImageStateLayerMetaData.length; ++layerId){
                String[] layerElements = tempImageStateLayerMetaData[layerId].split("\\[");     

                String[] imageNativePathDetails = layerElements[0].split("\\#");
                String[] offsetXDetails = layerElements[1].split("\\#");
                String[] offsetYDetails = layerElements[2].split("\\#");
                String[] orientationDetails = layerElements[3].split("\\#"); 
```

我不会说我是专家，但是在测试了编码器之后，我可以肯定地说它生成的字符串总是有效的，我得到这个错误的字符串也是完整的。我的解码功能一定有问题，但我不知道它可能是什么。

正如我所说，前三个周期被正确编码和解码，并且要编码的数据没有显着变化。编码字符串不可能导致字符串数组小于 4 个元素。基本上，据我了解我的代码，此错误不存在。

我认为这可能是某种内存分配问题阻止了字符串被正确拆分，但这只是一个笨拙的程序员的想法。

任何帮助都深表感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T12:26:07.693

我找到了解决问题的方法：

在编码时，我将数字类型打印到我的字符串中。在选择我的分隔符符号时，我没有采用负值，导致在考虑数字之前有一个“-”，这导致当我尝试按“-”拆分时，我的字符串不受控制地拆分。我用另一个字符替换了减号，现在一切正常！

# database - 从组合框选择填充 MS Access 表单（要填充的可变行数）

> ID：10743388
> 
> 赞同：1
> 
> 时间：2012-05-24T18:39:44.847
> 
> 标签：database, ms-access, vba

这是我的表格的一般架构（不完整）

```
 Employees(**EMPiD**, FirstName, Lastname, cell, name)

   Trainers(**TrainerName**, Specialty)

   EmployeeTrainingCompleted(**EMPID,TypeTraining,** TrainerName, Score, Comments)

   Training(**TypeTraining,PositionTitle**) //this one is fishy, and likely subject to change, but irrelevent to this question

   Position(**PositionTitle**,Description,StartingPay) 
```

我正在使用 Access 2010 表单，该表单允许用户从组合框中选择特定员工的“姓名”字段（这是从 fname、lname 计算的字段）并查看所有已完成的培训、培训师姓名、评论，得分，等等。

我已经完成了针对单个培训实例执行此操作的表格，但我希望有一个表格可以为每个员工动态显示不确定数量的行（因为员工完成了不同数量的培训课程）。

我是 Microsoft Access 的新手，我想知道是否有一种简单的方法可以做到这一点。

感谢您的输入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T08:55:24.973

虽然 MySQL 和 Oracle 在数据库方面很有用，但它们对 RAD 方面毫无用处。Access 实际上是一个 RAD 工具，通常但并非总是使用 Jet/ACE 数据库作为后端 ( [https://stackoverflow.com/tags/ms-access/info](https://stackoverflow.com/tags/ms-access/info) )。

要大致了解您可以使用 Access 做什么，请查看 Northwind 示例数据库，您可以在 Access 2010 中的新建 --> 示例模板 --> Northwind 中找到该数据库，或者如果您打算使用 Web 部署，[http://blogs.office.com/b/microsoft-access/archive/2010/07/19/northwind-2010-web-database-is-now-available.aspx](http://blogs.office.com/b/microsoft-access/archive/2010/07/19/northwind-2010-web-database-is-now-available.aspx)。

称这些“数据库”具有误导性，因为它们包含的内容比您在数据库中发现的要多得多。在这种情况下，请查看“客户和订单”下的“订单详细信息”表单。

我不确定 Northwind 的 2010 版本，但早期版本过去常常带有警告，即您应该忽略任何代码，只使用它们来了解您可以使用 MS Access 做什么。对于代码，请考虑这些书籍[MS Access 2003 - 学习高级 VBA 的好书](https://stackoverflow.com/questions/1457865/ms-access-2003-good-book-on-learning-advanced-vba)。

# ios5 - C4 中的动画蒙版

> ID：10743391
> 
> 赞同：4
> 
> 时间：2012-05-24T18:39:58.987
> 
> 标签：ios5, c4

我知道可以像这样在 C4 中创建图层蒙版：

```
object.layer.mask = anotherObject.layer; 
```

是否有使用动画蒙版的已知方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T19:12:14.557

是的。您可以通过几种不同的方式为蒙版设置动画。

首先，如果您使用基本形状作为其图层将成为蒙版的对象，您可以像往常一样为它们设置动画，这将成为动画蒙版。

这可以对 C4 中的任何可见对象（即形状、电影、图像等）进行。

例如：

```
object.layer.mask = aShape.layer;

aShape.animationDuration = 1.0f;
aShape.origin = CGPointMake(x, y); 
```

以上也可以用图像来完成。使用图像时，图像的任何清晰部分都会在您的`original`对象中变得透明。

此外，还有一种未记录的动画图像方法，它是实验性的，仅在最新模板中可用。

使用它看起来像：

```
NSArray *imageNamesArray = [NSArray arrayWithObjects:@"imageName01.png",...,nil];

C4Image *animatedImage = [C4Image animatedImageWithNames:imageNamesArray];

object.layer.mask = animatedImage.mask; 
```

本质上，这种方法创建了一个*动画 gif*风格的图像......但是，由于这种方法是全新的/实验性的，因此无法控制图像之间的过渡速度。

# c# - 如何使用 C# 显示 UAC 提示以将文件保存到受限位置？

> ID：10743396
> 
> 赞同：8
> 
> 时间：2012-05-24T18:40:23.820
> 
> 标签：c#, file-io, permissions, uac

当用户从我的应用程序中保存文件时，他们目前无法保存到受限位置（如 C:）。我认为这是一个很好的限制，但我想提供一个 UAC 提示来提升权限并允许用户在受限区域中保存。

我已经看到很多关于这个主题的答案，这些答案涉及使用“runas”生成一个具有提升权限的新进程。此外，这似乎可以通过冒充另一个用户来完成。据我了解，这两种方法都需要用户提供用户凭据。

我想要做的基本上就是 Windows 本身所做的。当您尝试在 Windows 7 中将文件复制到 C:\ 时（假设您已将 UAC 设置为其默认级别），您会收到以下提示：

![UAC 提示](../Images/e1f8e896a2d1e193d89b1893b0d9a03a.png)

一旦您单击带有 UAC 防护罩的 Continue 按钮，该文件将被复制到 C:\，而不会提示您输入凭据（假设您以管理员权限登录）。

如何在我的应用程序中为管理员用户复制此行为？他们不应该冒充任何其他用户，因为他们已经拥有管理员权限。任何人都可以提供有关 Windows 在此过程中执行的操作的详细信息吗？他们是否生成了具有提升权限的新 explorer.exe 进程？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T18:47:17.437

您需要做 Windows 所做的事情。并生成一个新进程，该进程将以提升的权限运行。这里没有捷径。进程启动时分配的令牌决定了进程拥有什么权限。该过程开始后无法更改该令牌。如果你需要提升，你需要一个新的过程。

> 我已经看到很多关于这个主题的答案，这些答案涉及使用“runas”生成一个具有提升权限的新进程。此外，这似乎可以通过冒充另一个用户来完成。据我了解，这两种方法都需要用户提供用户凭据。

不，事实并非如此。如果当前用户不是管理员，则 UAC 对话框将提示输入具有管理员权限的用户的新凭据。这就是*跨肩*UAC 对话。另一方面，如果当前用户是管理员，那么他们只会获得*同意*对话框。这是安全桌面上显示的对话框，只要求您单击继续。

Windows 组件可以做而您不能做的一件事是在不向您显示同意对话框的情况下启动提升的进程。这仅在 Windows 7 上发生（不在 Vista 上），并且仅当您在 Windows 7 中添加的新*默认*设置中具有 UAC 设置时。这就是资源管理器能够显示问题中包含的对话框然后开始的方式在不显示同意 UAC 对话框的情况下进行复制的提升过程。只有 Windows 组件被授予该能力。

但最重要的是，您需要启动一个运行提升的新进程。使用`runas`动词是规范的做法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-24T18:48:23.257

[编程提升特权/UAC](http://archive.msdn.microsoft.com/elevatedprivilegeuac)

> 以超过要求的权限运行应用程序是违反最小权限原则的，并且可能存在潜在的安全漏洞。为了保护这一点，Windows Vista 引入了用户帐户控制 (UAC)，通过以降低的权限（作为普通用户）运行应用程序来保护操作系统，即使当前用户以管理员身份登录。越来越多的 XP/2K 用户也使用普通用户帐户进行日常使用。首先阅读 UAC Demystified 以全面了解 UAC。
> 
> **开发人员容易犯两个常见错误：**
> 
> *   请求最终用户以管理员权限运行应用程序，即使这不是必需的，大多数情况下是因为糟糕的设计实践。这些应用程序要么吓跑最终用户，要么可能存在安全漏洞。
> *   不要要求最终用户运行提升的应用程序，而是尝试执行需要管理员权限的操作。这些应用程序只是在 Windows Vista 或 Windows XP/2K 普通用户帐户下中断。
> 
> 可下载的示例代码演示了如何对提升的权限/UAC 进行编程。提供了 WPF 和 Windows 窗体示例应用程序。为以下场景运行应用程序以查看差异：
> 
> *   普通用户，Windows XP/Windows Vista：显示 UAC 盾牌图标。点击“Save to C:\”会显示“Run As”对话框，要求用户输入管理员密码才能继续；
> *   管理员，禁用 UAC 的 Windows XP/Windows Vista：隐藏 UAC 盾牌图标。点击“Save to C:\”完成，没有任何对话框；
> *   管理员，启用 UAC 的 Windows Vista：显示 UAC 盾牌图标。单击“保存到 C:\”会显示对话框，询问用户是否允许继续。

[下载链接](http://archive.msdn.microsoft.com/elevatedprivilegeuac/Release/ProjectReleases.aspx?ReleaseId=3104)

调用提升的执行（首先测试管理员）：

```
private void SaveToRootFolder_Click(object sender, EventArgs e)
    {
        string fileName = @"C:\Test.txt";
        if (App.IsAdmin)
            DoSaveFile(textBox1.Text, textBox2.Text, fileName);
        else
        {
            NameValueCollection parameters = new NameValueCollection();
            parameters.Add("Text1", textBox1.Text);
            parameters.Add("Text2", textBox2.Text);
            parameters.Add("FileName", fileName);
            string result = Program.ElevatedExecute(parameters);
            if (!string.IsNullOrEmpty(result))
                MessageBox.Show(result);
        }
    } 
```

提升执行：

```
internal static string ElevatedExecute(NameValueCollection parameters)
    {
        string tempFile = Path.GetTempFileName();
        File.WriteAllText(tempFile, ConstructQueryString(parameters));

        try
        {
            ProcessStartInfo startInfo = new ProcessStartInfo();
            startInfo.UseShellExecute = true;
            startInfo.WorkingDirectory = Environment.CurrentDirectory;
            Uri uri = new Uri(Assembly.GetExecutingAssembly().GetName().CodeBase);
            startInfo.FileName = uri.LocalPath;
            startInfo.Arguments = "\"" + tempFile + "\"";
            startInfo.Verb = "runas";
            Process p = Process.Start(startInfo);
            p.WaitForExit();
            return File.ReadAllText(tempFile);
        }
        catch (Win32Exception exception)
        {
            return exception.Message;
        }
        finally
        {
            File.Delete(tempFile);
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-27T23:51:44.170

一个有限的选项，仅在移动、重命名、复制和删除文件时有用：

[SH文件操作](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762164%28v=vs.85%29.aspx)

如果您尝试通过此函数执行文件操作，Windows 将向用户提供提升提示。

请注意，这样做有一些缺点：

*   这仅适用于移动、重命名、复制和删除。以这种方式保存新文件需要保存到临时目录，然后将其移动到所需位置。这不能解决“保存文件对话框”不允许您选择受 UAC 保护的位置作为目标的问题。
*   如果目标目录不存在（对于移动或复制），SHFileOperation 可以提示用户是否应该创建目标目录。但是，它不会要求提升权限来执行此操作，因此在受 UAC 保护的位置下会失败。解决方法是在临时位置手动创建不存在的目录，然后将它们移动/复制到目标位置。这将提供 UAC 提示。
*   如果用户在“移动/复制”对话框中选择“跳过”或“取消”，或者用户在 UAC 提示符下选择“否”，您需要制定应急计划。

# queue - 有效地调度变量大小的工作项

> ID：10743399
> 
> 赞同：1
> 
> 时间：2012-05-24T18:40:41.107
> 
> 标签：queue, scheduling

（我还在[math.stackexchange.com](https://math.stackexchange.com/questions/149286/scheduling-variables-sized-work-items-efficiently)上发布了这个问题，因为我不确定它应该属于哪里。）

我有一个具有以下输入的系统：

*   要完成的工作项目集。这些是可变大小的。它们不必按任何特定顺序完成。
*   有关过去完成工作项所需时间的历史数据。然而，过去的表现并不能保证未来的成功！也就是说，一旦我们开始实际执行一个工作项，我们可能会发现它比以前花费的时间更长或更短。
*   可能有我以前从未见过的工作项目，因此没有历史数据。
*   工作项进一步具有“并行”或“串行”的“分类”。
*   一组能够拾取工作项并对其进行处理的“代理”。代理的数量是固定的并且是预先知道的。代理一次只能处理一个工作项。
*   代理对其执行工作项的一组“服务器”。服务器具有不同的功能。具体来说，它们能够同时处理不同数量的代理。

**规则：**

*   如果服务器正在用于执行“串行”工作项，则它不能同时用于执行任何其他工作项。
*   如果服务器不用于执行任何“串行”工作项，它可以同时处理尽可能多的代理，所有代理都执行“并行”工作项。
*   有一些工作项必须针对特定服务器执行（尽管任何代理都可以这样做）。如果重要的话，这些工作项是“并行的”。（现在可能更容易忽略此规则！）

**要求：**

鉴于上述输入和规则，我需要“尽快”执行这组工作项。由于我们不知道一个工作项需要多长时间才能完成，我们不可能希望预先得出一个完美的解决方案（我想），所以“尽可能快”意味着不要像只使用一个代理那样明显地做一些愚蠢的事情一个一个地执行每个工作项！

从历史上看，我有一个非常简单的循环算法，并简单地按历史持续时间降序对工作项进行排序，以便更快地安排运行时间最长的工作项，并且希望在周期结束时我能够保留所有代理和服务器相当好地加载了短期工作项。这导致利用率图呈现出非常好的“方形”形状，在周期结束时没有长期工作项的长尾。

然而，这种历史算法​​要求我预先配置代理和服务器的数量，并将工作项预先分配给“池”，并将池分配给服务器，以及许多其他可怕的东西。我现在需要支持动态数量的代理和服务器，而无需重新配置。（请注意，在一个周期内服务器的数量是固定的——即数量只会在周期之间变化——但代理的数量可能会在周期的中间增加或减少。）

完成所有工作项后，我们会记录每个工作项进入下一个周期并从头开始重新开始的时间！

# actionscript-3 - 将 BlazeDS 与 Flash CS5.5 或 6 一起使用

> ID：10743403
> 
> 赞同：1
> 
> 时间：2012-05-24T18:40:49.323
> 
> 标签：actionscript-3, apache-flex, air, blazeds, flash-cs5.5

[官方](http://en.wikipedia.org/wiki/BlazeDS)规定，BlazeDs 只能与“Flex 和 AIR”一起使用。这条评论本身就令人费解，因为 Flex 是一组 Actionscript 开发工具，而 AIR 是 Fl​​ash 可以运行的“模式”。

最终，我开始了一个新项目，我想将 BlazeDS 用于基于 Flash CS5.5（或 CS6）的项目。这可能吗？过去有人用过这个组合吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T19:08:42.717

如果您真的阅读[了您链接到的文章](http://en.wikipedia.org/wiki/BlazeDS)，您很快就会发现将 BlazeDS 与任何可以与 Web 套接字通信的技术一起使用是绝对可以的——它的消息格式 ( [AMF3](http://en.wikipedia.org/wiki/Action_Message_Format#AMF3) ) 是一个开放标准。

所以是的，它可以与 Flash（或者更确切地说，纯 ActionScript）一起使用，但它比使用 MXML 稍微方便一些，在 MXML 中一切都由框架设置，因为它需要更多的“幕后”配置才能能够运行所有必要的远程处理部分。当然，您仍然需要[Flex SDK](http://www.adobe.com/devnet/flex/flex-sdk-download.html) - 没有办法解决这个问题。

使用 Flash IDE 设置 Flex SDK 后，您必须手动初始化所​​需的 Flex 远程处理类，然后才能访问 BlazeDS 服务。[此博客文章](http://www.rialvalue.com/blog/2010/03/27/using-blazeds-from-a-flash-or-as3-only-project/)中有一个示例类，其中包含所有必需的调用和一些附加信息。

我还写了一篇详尽的教程，介绍如何连接和工作 RemoteObject，以及在[我的博客](http://cloud-nine.de/2012/blaze1/)上设置一个简单的“Hello World”Web 服务。我写的文章系列旨在与 FDT 和 RobotLegs 2 一起使用，但至少第一部分（设置 Java WAR 项目以部署为 Web 服务）应该对您有所帮助。

最后，我建议您重新考虑使用 Flash 作为您的主要 IDE——根据我的经验，它......好吧，坦率地说，除了动画和设置资产库之外，它很*糟糕（请原谅我的法语）。*如果您不想为更好的 IDE 付费，您应该考虑使用[FlashDevelop](http://www.flashdevelop.org/)（除非您使用的是 Mac - 不支持 OS X）。或者也许试试[FDT](http://fdt.powerflasher.com/) - 即使您不购买 Max 许可证，它的编码也更加方便。

# javascript - 强制 IE 清除图像

> ID：10743405
> 
> 赞同：1
> 
> 时间：2012-05-24T18:41:02.217
> 
> 标签：javascript, html, internet-explorer, caching, internet-explorer-7

我有一个弹出窗口中的图像标签。此弹出窗口显示取决于用户单击内容的图像。弹出窗口关闭（这只是隐藏弹出窗口，它不会从 DOM 中删除任何内容），然后单击一个新项目，然后重新显示弹出窗口，并将图像的 src 属性更改为新的。

我遇到的问题是，在 IE 中，它会保留旧图像，直到下载新图像。通常这不是问题，但图像是对处理程序的调用，可能需要几秒钟。通过将 src 属性设置为空，然后将其设置为处理程序，我能够在 IE8 和 IE9 中解决此问题。这在插入新图像之前正确清除了图像。

但是，此解决方案在 IE7 中不起作用。我打算使用一个小的透明 gif 作为 src 而不是空的，这样它就会快速换出图像，然后开始加载下一个。我将在页面中添加一个图像标签，以便将其缓存在用户浏览器中，从而使图像加载接近即时。这听起来像是一个好的解决方案吗？有没有我忽略的主要缺点或警告？

这很hacky，我真的很想要一种更优雅的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T18:53:42.230

从 DOM 中移除 IMG 标签并在交换 SRC 之前重新插入它。

或者，您可以使用[数据 URI](http://dopiaza.org/tools/datauri/)并使用编码为 Base64 的空白图像。

# php - PHP 4 到 PHP 5 - isset 检查布尔 if 语句

> ID：10743406
> 
> 赞同：0
> 
> 时间：2012-05-24T18:41:08.273
> 
> 标签：php, migration, php4

**场景**：我们正在将应用程序从 PHP 4 转换为 PHP 5。该应用程序需要能够在 PHP 4 上工作一段时间，这意味着还不能使用 PHP 5 特定的元素。我们只是试图确保应用程序在两个平台上都能正常工作。

应用程序中有很多这样的条件：

```
if ($variable) { // do something } 
```

其中一些变量最终根本没有被定义，我们正在努力减少错误的数量（有很多错误）。

为了解决这些错误，我们在各个区域添加检查，如下所示：

```
if (!isset($variable)) $variable = ""; 
```

或者

```
if (!empty($variable)) { // do something } 
```

**问题**：有谁知道修复这些错误的更简单方法。问题是这些变量被跨文件使用（通过包含）并且定义变量可能会改变该文件中的逻辑流程，如果它执行类似的检查（if (!isset($variable)) { // do something }) .

这个问题的重点是减少跟踪这些变量的每个单独使用的错误和时间消耗。目前，我们要么彻底检查变量在做什么（这可能需要很长时间），要么我们正在做一个“一劳永逸”/希望它的固定方法来纠正。

-- 编辑 -- 有没有人知道像 cppcheck for php 这样的程序可以以某种方式引用这些变量或创建某种可以找到错误并链接可能引用的链接？（我希望这是有道理的。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T11:32:02.120

AFAIK 有一个代码检查器，可以查找未初始化的变量，它可以正常工作。您可以处理它的消息，它被称为[PHP Mess Detector](http://phpmd.org/)，其中一条规则涵盖未初始化的变量。然而，这永远不可能是完美的。

另一种方法是跟踪错误消息并使用它们来定位代码中的位置。我过去做过，效果很好，只需在迭代中进行并保留警告日志即可。

您还可以在请求开始时使用白名单并导入列入白名单的变量。未列入白名单的提交需要导致访问冲突错误才能使其正常工作，因此这种方式比跟踪警告更有效，尽管它可能会使您的应用程序更安全。

另请参阅：

*   [PHP 语法检查预源代码控制](https://stackoverflow.com/q/8869209/367456)
*   [E_NOTICE ?== E_DEBUG，使用更复杂的 error_handler 避免 isset() 和 @](https://stackoverflow.com/questions/4158486/e-notice-e-debug-avoiding-isset-and-with-more-sophisticated-error-handl)
*   [isset() 和 empty() 使代码难看](https://stackoverflow.com/q/1960509/367456)

# .net - .Net 异步页面声明默认设置为 true，这是否存在性能问题？

> ID：10743408
> 
> 赞同：0
> 
> 时间：2012-05-24T18:41:23.790
> 
> 标签：.net, sitecore, httphandler

我有一个电子商务网站，当客户单击“下订单”时，在最终结帐页面上，我想使用 SmtpClient SendAsync 发送订单确认电子邮件：

```
SmtpClient client = new SmtpClient();
client.SendAsync(mailMessage, null); 
```

但看来我需要将“异步”页面声明设置为 true：http: [//msdn.microsoft.com/en-us/library/ydy4x04a.aspx](http://msdn.microsoft.com/en-us/library/ydy4x04a.aspx)

如果我的结帐页面有自己的 .aspx 页面，我对此没有任何问题，但是因为我使用的是 Sitecore CMS，所以整个网站只有一个 .aspx 页面（相反，该网站有很多 .ascx 控制哪个 Sitecore分配给 .aspx)。

因此，因为我只有一个 .aspx 页面，所以此设置更改将应用​​于整个站点。这有任何性能问题吗？我问的唯一原因是因为默认设置为 false。

# c++ - 使用模板更精确的诊断错误消息？

> ID：10743410
> 
> 赞同：5
> 
> 时间：2012-05-24T18:41:33.377
> 
> 标签：c++, templates, diagnostics

模板的编译错误通常是晦涩难懂的，除非一个人非常精通模板，否则不容易破译。很多时候，专家级程序员也可能会被这些弄糊涂。我敢肯定，我们大多数人都曾多次感受到它的压力。

据我了解，C++ 标准仅要求实现为格式错误的程序提供诊断，但不要求提供诊断消息的*方式*或*内容。*
但是，标准委员会是否制定了任何指导方针来克服这个不容易破译诊断的问题（尤其是在模板的情况下）。这甚至有过讨论吗？此外，主流实现是否正在或已计划解决此问题？

这个问题非常开放，可供讨论，但由于 SO C++ 社区是最活跃的 C++ 社区之一，我相信某处的某个人至少对此有所了解。此外，一些标准委员会成员（我知道）积极参与 C++ 标签，我希望他们可能有一些关于这方面的信息，如果等。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T18:54:44.737

你在问两个不同的问题。

首先，是的，主流实现正在为此做一些事情。它可能不是 g++ 或 msvc 的首要任务，但它们并不是唯一的主流实现。这是 clang 背后的设计目标之一（参见[http://clang.llvm.org/diagnostics.html](http://clang.llvm.org/diagnostics.html)），至少在某些时候英特尔将更好的模板错误列为 ic++ 优于 msvc 的卖点。

其次，标准委员会的人对此进行了详细讨论，并且大多同意概念是答案的重要组成部分，这实际上意味着自从概念从 C++11 标准中删除后，它就被推迟到了未来。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T18:46:42.927

这绝对是一个问题，尤其是当人们开始用元类做一些棘手的事情时。我知道的唯一有一点帮助的工具是[stlfilt](http://www.bdsoft.com/tools/stlfilt.html)，它“简化和/或重新格式化冗长的 C++ 错误和警告消息，重点是与 STL 相关的诊断”

# forms - Symfony2 表单 - 选中所有复选框的实体字段

> ID：10743411
> 
> 赞同：1
> 
> 时间：2012-05-24T18:41:34.057
> 
> 标签：forms, symfony

我有一个没有类的表格

```
class ProfilesSearchType extends AbstractType {

    public function buildForm(FormBuilder $builder, array $options)
    {
        $builder
                ->add('disabilityType', 'entity', array(
                    'class' => 'AldenXyzBundle:DisabilityType',
                    'property' => 'name',
                    'multiple' => true,
                    'expanded' => true,
                ))
        ;
    } 
```

在控制器中调用

```
public function listAction()
{
    $form = $this->createForm(
        new \Alden\XyzBundle\Form\Type\ProfilesSearchType(), array());
    if (isset($_GET['profile_search']))
    {
        $form->bindRequest($request);
        $d = $form->getData();
        // some stuff here
    }
    return array(
        'form' => $form->createView()
    );
} 
```

如何将disabilityType中的所有复选框设置为默认选中？类定义是（我删除了setter和getter）

```
class DisabilityType {

    /**
     * @var integer $disabilityTypeId
     *
     * @ORM\Column(name="disability_type_id", type="integer", nullable=false)
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="IDENTITY")
     */
    private $disabilityTypeId;

    /**
     * @var string $name
     *
     * @ORM\Column(name="name", type="string", length=50, nullable=false)
     */
    private $name;

    /**
     * @var Profile
     *
     * @ORM\ManyToMany(targetEntity="Profile", mappedBy="disabilityType")
     */
    private $profile;

    public function __construct()
    {
        $this->profile = new \Doctrine\Common\Collections\ArrayCollection();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-28T06:30:13.997

我在控制器中添加

```
$disabilityDegree = $this->getDoctrine()->
    getRepository("AldenXyzBundle:DisabilityDegree")->findAll();
$form = $this->createForm(new \Alden\XyzBundle\Form\Type\ProfilesSearchType(), array(
        'disabilityType' => new \Doctrine\Common\Collections\ArrayCollection($disabilityType),
            )
    ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T08:32:14.543

你必须用所有的disabilityType初始化你的表格

你可以这样做：

```
$disabilities = $this->getDoctrine()->getRepository("AldenXyzBundle:DisabilityType")-  >findAll();
$form = $this->createForm(new \Alden\XyzBundle\Form\Type\ProfilesSearchType(), $disabilities); 
```

# git - 以最少的努力在多台计算机之间同步代码

> ID：10743417
> 
> 赞同：6
> 
> 时间：2012-05-24T18:41:53.807
> 
> 标签：git, svn, version-control

我希望能够在多台计算机上同步源代码和整个项目（准确地说是 3 台）。我尝试过使用 git，但一直无法获得无忧无虑的体验，可能是因为我从来没有投入太多精力。所以，理想情况下我想要的是：

*   能够将文件夹及其所有子文件夹添加到“同步”列表中。基本上，一旦我添加了一个文件夹进行同步，它应该会自动添加所有文件并在多台计算机上同步它们，就像 Dropbox。
*   尽量少做手工。我不想在每次创建新项目时推送多个文件并进行设置。
*   版本控制不是我关心的问题之一，但很受欢迎。

现在，如果您建议我使用 git/svn，请参考我上面的观点，以向我展示它对我的用处。虽然我不想花很多时间做同步部分，但如果值得付出努力，我会的。

我认为这并不重要，但我使用 Eclipse、Aptana 和 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T19:13:26.287

[DirSync Pro](http://dirsyncpro.org/)可能是一个很好的解决方案，跨平台和开源。

对于更前沿的软件，您可以尝试[SparkleShare](http://sparkleshare.org/)。

最后[在 LifeHacker 上看到这篇文章](http://www.lifehacker.com.au/2012/03/ask-lh-how-can-i-sync-my-files-without-storing-them-online/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T20:02:47.020

我有（几乎）同样的情况。我最终在一台（所谓的“主”）计算机上获得了标准的 Windows 共享，并将共享文件夹用作具有**“离线文件”**的网络驱动器。

即使您已断开连接，您也可以使用文件的内容，如果您连接在同一网络中，那么您的“主”同步会自动完成。

报告冲突，必须手动解决。

但是，**根本没有版本控制**，**只有 windows**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T22:44:36.803

你试过[http://www.sugarsync.com](http://www.sugarsync.com)

它类似于保管箱，但您可以将一台计算机上的任何文件夹映射到另一台计算机（或多台计算机）上的任何文件夹。它是免费的，但不能在 Linux 上运行，只能在 Windows 和 Mac OS X 上运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T19:18:57.127

您可能需要检查双向同步器[Unison](http://www.cis.upenn.edu/~bcpierce/unison/)

# php - Htaccess 全局重写规则

> ID：10743424
> 
> 赞同：1
> 
> 时间：2012-05-24T18:42:26.270
> 
> 标签：php, .htaccess, variables

我不知道如何解释这个问题，所以标题有点含糊！

好吧，我走了，我正在我网站上的图片/专辑页面上工作，一切都很好。但我想像任何好的图片网站一样添加下一张/上一张图片功能。我想传递不同的选项来按变量整理专辑。

现在图片上的 url 是`http://localhost/photo/174/picture-name/`，我想在这个上添加一些参数，这样 url 看起来像`http://localhost/photo/174/picture-name/album:5/sort:name/`。

在 .htaccess 的帮助下，我想提取变量`album`和`sort`.`But the little catch is that I would still want to be able to get to the page with only this url`http://localhost/photo/174/picture-name/``

现在我的 .htaccess 文件看起来像这样：

```
RewriteEngine on

RewriteRule ^photo/([A-Za-z0-9]+)/(.*)/$ photo.php?pic_id=$1 
```

我尝试在其中添加这一行，但没有成功。

```
RewriteRule ^(.*)/album:([A-Za-z0-9]+)/sort:([A-Za-z0-9]+)/$ &album=$2&sort=$3 
```

希望有人给我解答

祝你有美好的一天

乔里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T18:59:40.193

你的意思是这样的吗？

```
RewriteRule ^photo/([A-Za-z0-9]+)/[^/]+/album:([A-Za-z0-9]+)/sort:([A-Za-z0-9]+)/$ photo.php?pic_id=$1&album=$2&sort=$3 
```

您还需要更改原始规则：

```
RewriteRule ^photo/([A-Za-z0-9]+)/([^/]*)/?$ photo.php?pic_id=$1 
```

因为您所拥有的将与带有参数的 URI 相匹配

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T19:00:48.503

我猜你在谈论这个，你的例子是不正确的：

```
RewriteRule ^photo/(.*)/.*/album:(.*)/sort:(.*)/$ photo.php?pic_id=$1&album=$2&sort=$3 
```

（为简单起见，我替换了一些表达式）。

在这里，[http://mydomain.com/photo/174/picture-name/album:5/sort:name/](http://mydomain.com/photo/174/picture-name/album:5/sort:name/)被重写为[http://mydomain.com/photo.php?pic_id=174&album=5&sort=name](http://mydomain.com/photo.php?pic_id=174&album=5&sort=name)。

# mysql - MySQL - 使用 COUNT 选择返回 NULL 行

> ID：10743428
> 
> 赞同：0
> 
> 时间：2012-05-24T18:42:36.067
> 
> 标签：mysql

**这有效**

```
SELECT DISTINCT  b.b_id 
FROM             b INNER JOIN c 
ON               b.b_id=c.b_id  
WHERE            c.active='yes' AND b.featured='no' 
```

**当结果应该返回 0 行时，这将返回一个 count = 0 的空行**

```
SELECT DISTINCT  b.b_id, COUNT(c.c_id) AS count
FROM             b INNER JOIN c 
ON               b.b_id=c.b_id  
WHERE            c.active='yes' AND b.featured='no' 
```

难道我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T18:48:25.080

我认为您想要 a`left join`而不是 an ，因为当给定记录`inner join`没有匹配记录时，您希望返回计数 0 而不是丢失的行。`c``b`

此外，您应该`group by`在使用聚合函数时包含 a，例如`count`.

```
SELECT
    b.b_id,
    COUNT(DISTINCT c.c_id) AS count
FROM 
    b 
    LEFT JOIN c 
        ON b.b_id=c.b_id  
        AND c.active='yes' 
WHERE b.featured='no'
GROUP BY b.b_id 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T18:49:23.630

尝试`DISTINCT` *放入* `COUNT()`：

```
SELECT b.b_id, COUNT(DISTINCT c.c_id) AS count
FROM b
JOIN c ON b.b_id=c.b_id  
WHERE c.active='yes' 
AND b.featured='no'
GROUP BY 1 
```

顺便说一句，请考虑像这样格式化您的 SQL，恕我直言，这更具可读性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T18:58:54.383

我想尝试使用 GROUP BY 而不是 DISTINCT。

```
 SELECT b.b_id, COUNT(c.c_id) AS count
    FROM 
    b INNER JOIN c 
    ON 
    b.b_id=c.b_id  
    WHERE 
    c.active='yes' 
    AND 
    b.featured='no'
    GROUP BY b.b_id 
```

# java - 在具有多个模块的 Maven 项目中使用 Proguard

> ID：10743431
> 
> 赞同：4
> 
> 时间：2012-05-24T18:42:39.120
> 
> 标签：java, maven, obfuscation, vaadin, proguard

我无法制作 Proguard Maven 插件来混淆 Web 项目中的文件。我在 Stackoverflow 上尝试了一些解决方案 - 没有运气。

我的实际应用程序是使用 Maven 打包的基于 Vaadin 的应用程序，但我现在创建了一个示例演示项目**[https://github.com/taskadapter/projectX](https://github.com/taskadapter/projectX)**来说明问题。我的最终目标是创建一个 Web 应用程序 WAR 文件，其中所有 maven 模块（例如“util”）和 Web 应用程序代码（例如“SomeImportantHiddenClass”）都经过混淆处理。

构建失败：

> [proguard] 错误：输入不包含任何类。您是否指定了正确的“-injars”选项？

我看到了[http://maksim.sorokin.dk/it/2010/08/23/obfuscating-several-jars-in-one-single-maven-build-with-proguard/](http://maksim.sorokin.dk/it/2010/08/23/obfuscating-several-jars-in-one-single-maven-build-with-proguard/)，但这对我来说没有意义。如果我在项目中的每个 maven 模块上分别运行 proguard 插件，那么如果同一个项目中的其他模块都“搞砸”了，它们将如何找到所需的类？

我假设我需要将 proguard 执行添加到 root pom.xml 或我的 web 模块，这实际上将东西打包到一个 WAR 文件中（参见 GitHub 上的项目）。

“injar”选项允许将 Jars 添加到混淆过程中，但我希望插件能够找到我的模块并混淆它们**，而无需**我对“../util/target/util.jar”之类的“injar”值进行硬编码。

加上 proguard 文档没有说明“injars”选项，它只描述了“injar”配置参数。在这种情况下，它们都不起作用。

我还看到[Proguard 说它找不到任何类](https://stackoverflow.com/questions/8845406/proguard-is-saying-it-cant-find-any-classes)，但我不确定将所有类从“web”maven 模块移动到一个单独的模块是正确的解决方案，并且不确定它是否能正常工作。我会继续努力...

# mysql - 从以前的最新记录中选择一列

> ID：10743433
> 
> 赞同：0
> 
> 时间：2012-05-24T18:42:42.037
> 
> 标签：mysql, html, sql, xhtml

考虑以下 MySQL 表：

应用程序（包含所有用户的所有应用程序）

```
unique_id |  user_id  |  date_of_application  |  date_ended  | score  |  status
--------------------------------------------------------------------------------
1            user_a          2010-09-09          2010-12-24     1.2      Ended
2            user_a          2011-03-03          2011-06-06     1.3      Ended
3            user_a          2011-08-08          **2011-10-10     1.0**      Ended

4            user_b          2010-09-09          2010-12-24     2.2      Ended
5            user_b          2011-03-03          **2011-06-06     1.5**      Ended

6            user_a          2012-01-01                                  Active
7            user_b          2012-01-02                                  Active
8            user_c          2012-01-03                                  Active
9            user_d          2012-01-04                                  Active 
```

期望的结果：

```
user_id  |  date_of_application  |  score  |  status
------------------------------------------------------
user_a          2011-01-01           **1.0**      Active
user_b          2011-01-02           **1.5**      Active

user_c          2011-01-03           10       Active
user_d          2011-01-04           10       Active 
```

解释; 我想选择/显示所有**status = 'Active' 的**记录。此外，那些不是第一次申请的用户（user_a 和 user_b）的分数将设置为**前一个，最新**的分数（参见申请表中的粗体部分），**状态为“已结束”。**另一方面，首次使用的用户（user_c 和 user_d）的分数将设置为 10。

注意/重申：

*   假设“已结束”应用程序/记录的分数始终为**正**而不为**空**
*   **user_c**和**user_d**是**首次**申请者
*   随着时间的推移，**应用程序表将有相同用户的多条记录，****但**用户一次只能有一个“活动”应用程序/记录

我有以下开始；这个（或类似的查询）给了我分数列的 NULL 或 0 值

```
 SELECT userid_, date_of_application, status,
score = 
(
     SELECT score 
     FROM applications
     WHERE status = 'Ended' AND 
           date_of_application = (SELECT MAX(date_of_application)
                                  FROM applications
                                  WHERE status='Ended')
)

FROM applications

WHERE 
status = 'Active'

ORDER BY 
score ASC,
date_of_application ASC 
```

我在这里想念什么？
TIA。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T18:57:04.220

考虑到您希望分数以最新为基础。试试这个 -

```
SELECT apps.user_id, apps.date_of_application, apps.status,
       IFNULL(
              (SELECT app.score 
              FROM applications app
              WHERE  app.user_id = apps.user_id
              AND app.status = 'Ended' 
              ORDER BY app.date_ended DESC
              LIMIT 1), 10) AS score
FROM applications apps
WHERE  apps.status = 'Active'
ORDER BY apps.score ASC,
         apps.date_of_application ASC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T18:53:18.587

它应该工作：

```
SELECT user_id, date_of_application, status, coalesce(latest.score, 10) score
FROM applications
LEFT OUTER JOIN 
  (SELECT user_id, score 
   FROM applications a
   WHERE status = 'Ended' AND 
         date_of_application = (SELECT MAX(date_of_application)
                                FROM applications
                                WHERE status='Ended' AND user_id = a.user_id)) latest 
                                  ON latest.user_id = applications.user_id
WHERE status = 'Active'
ORDER BY date_of_application ASC 
```

# jakarta-ee - JavaEE6 启用/禁用 webfilter 无需重新编译

> ID：10743442
> 
> 赞同：2
> 
> 时间：2012-05-24T18:43:09.980
> 
> 标签：jakarta-ee, annotations, java-ee-6, servlet-filters

我正在将应用程序迁移到新的 JavaEE6 标准。在创建新过滤器时，注释非常容易使用。我只需要在我的 POJO 类中添加一个 @WebFilter 注释，它就可以很好地工作。

让我感到困惑的是：所有带有注释的过滤器都会由容器自动加载。有时这是不希望的。我可以创建一组过滤器，不同的 webapp 会选择只使用这些过滤器的子集。所以我的问题是：有没有一种简单的方法可以根据不同的部署启用/禁用过滤器，同时仍然允许我为每个过滤器类使用简单的 WebFilter 注释？

我在此顶部搜索时发现了这篇文章： [Dynamically registering WebFilter with Java EE 6](http://blog.eisele.net/2011/06/dynamically-registering-webfilter-with.html)

但是这篇文章似乎建议不要在每个过滤器类上使用注释，并通过直接引用每个过滤器类的 ServletContextListener 加载它们。这似乎不是一个最佳解决方案。

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T21:14:57.427

那是不可能的。

最好的办法是通过检查某些`web.xml`上下文参数、VM 参数或指示不应使用过滤器的环境变量来扩展过滤器。

例如

```
@Override
public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
    if ("true".equals(System.getProperty("com.example.DISABLE_FILTER"))) {
        chain.doFilter(request, response);
        return;
    }

    // Original filter code here.
} 
```

可以通过提供 VM 参数来禁用它`-Dcom.example.DISABLE_FILTER=true`。

# c# - 如何在 SQL Server 2008 中从 SQL 作业运行 C# 控制台应用程序？

> ID：10743443
> 
> 赞同：1
> 
> 时间：2012-05-24T18:43:10.327
> 
> 标签：c#, .net, sql, sql-server-2008

我想尝试从 SQL Job 运行我的 C# 控制台应用程序。所以为了测试它，我简单地创建了一个控制台应用程序并使用 C# 和 SMO，编写了几行代码来创建一个数据库。我可以成功运行它并按预期在 SQL Server 中创建一个数据库。

然后在 IDE 中，我点击了，`Build-->Publish myProject to E:\myFolder\MakeNewDB24`因为那是我的 SQL Server 所在的位置。

上述操作将以下文件复制到指定位置，即 E:\myFolder\MakeNewDB24

*   申请文件
*   安装程序
*   我的项目.application

然后我打开我的 SQL Server，通过 `rt. clicking Jobs Folder-->New Job`. 我填写了一般的所有信息。在 Steps 中，我在 Command 下，

```
\\mySQLServer\myFolder\MakeNewDB24\setup.exe

Type: Operating System(CmdExec)
Run as: SQL Server Agent Service Account 
```

我跑了这份工作。当我查看历史时，结果显示为“成功”，

```
Executed as user: mySQLServer\SYSTEM. The step did not generate any output.  Process Exit Code 0\.  The step succeeded. 
```

当时我很开心。但是当我去检查应该创建的数据库时，它不可用，这意味着 SQL JOb 没有完成创建我的数据库的工作。

我不知道我在这里错过了什么？如果有人知道这方面的知识，请与我分享。我真的很想看到我的 SQL 作业完成这项工作。我使用 SQL 作业的原因是因为我所有的自动化任务都从这里开始。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:03:10.240

您的问题几乎肯定与权限有关。您需要检查用于运行 SQL Server 代理作业的用户 ID。我的猜测是它在某处没有权限。

您的作业返回成功的原因是，如果 CMD 作业成功启动 CMD 可执行文件，它们总是返回成功。它与您的代码是否成功无关。

在我不必担心安全性的环境中，我养成了给所有东西管理员权限的不幸习惯，所以我不必担心在哪里需要什么权限。祝你好运。

# php - PHP MySQL 查询提交按钮

> ID：10743444
> 
> 赞同：0
> 
> 时间：2012-05-24T18:43:14.050
> 
> 标签：php, mysql

我已经构建了以下查询

```
if ((isset($_POST["MM_insert"])) && ($_POST["MM_insert"] == "form1")) {
$insertSQL = sprintf("INSERT INTO selection (student_id, id_project, level_of_want) 
VALUES ((SELECT id FROM users WHERE Username = ".$_SESSION['MM_Username']." ), %s, %s)",
GetSQLValueString($_POST['Project_id'], "int"),
GetSQLValueString($_POST['Want'], "text"));

mysql_select_db($database_projectsite, $projectsite);
$Result1 = mysql_query($insertSQL, $projectsite) or die(mysql_error());
} 
```

student_id 来自表中比较的会话信息。

id_project 来自应包含当前 id 的隐藏字段，level_of_want 来自两个提交按钮。选择一个时，该值将应用于数据库。以下是表格中的外观。

```
<input type="submit" name="Want[]" id="Want_0" value="Really Want" />
      <input type="submit" name="Want[]" id="Want_1" value="Partially Want" />
    </p>
    <p>
      <input name="Project_id" type="hidden" id="Project_id" value="<?php echo $row_Test['Project_id']; ?>" />
    </p> 
```

但是，当我执行此操作时，不会将任何信息应用于数据库，选择按钮时也不会显示错误消息。有没有人有任何可能的线索知道什么是错的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T18:53:14.127

我猜是因为“SELECT id”返回一个空的结果集

尝试以下操作：

```
SELECT id FROM users WHERE Username = '".$_SESSION['MM_Username']."' 
```

注意双引号周围的额外单引号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T18:58:46.123

弥敦道，

在您的提交输入中看到的是一个数组

```
<input type="submit" name="Want[]" id="Want_0" value="Really Want" />
<input type="submit" name="Want[]" id="Want_1" value="Partially Want" /> 
```

所以获得价值应该是

```
GetSQLValueString($_POST['Want'][0], "text")); 
```

汤姆兹

# ms-access - VB sxript 在 MS Access 2010 中制作问卷表格

> ID：10743449
> 
> 赞同：0
> 
> 时间：2012-05-24T18:43:18.480
> 
> 标签：ms-access, vbscript, ms-access-2007, vba, ms-access-2010

您好，我只想知道如何在访问中制作一个连续的问卷调查表，一旦所有问题都被填写，它将更新所有表格。但在它到达页面末尾之前，用户将能够在表单之间来回编辑。

所以它会是这样的：

1.  共有 30 个表格
2.  一个表格只更新表中的1-3个字段
3.  用户完成一个表单后，该表单将关闭并打开另一个表单。
4.  用户将能够返回到以前的表单并对其进行编辑。
5.  它仅可用的按钮 2 个按钮后退箭头和下一个箭头（保存数据并移动到另一个表单并关闭当前表单）
6.  最后一个表格将保存所有数据。
7.  当用户完成所有问题时，表单将允许从第一个问题重新打开，并将在表中插入全新的用户数据行。

我所做的是

1.  我创建了一个带有框和标签的表单，直接连接到表格，因此它会实时更新。所以用户可以来回编辑它
2.  “下一步”按钮，使用宏关闭和打开新表单。
3.  使用以下 VB 代码更新表格的最终形式：

    ```
    Private Sub Close_Click()

      CurrentDb.Execute "INSERT INTO Demographics(vid, cid, dobd, gend, heght, heght2,         wgt, wgt2, lschool, secschl, qualify, hqlify, army, abranch )" & _
      "VALUES('" & vid1 & "','" & cid1 & "','" & dobd1 & "','" & gend1 & "','" & heght1 &  "','" & heght21 & "','" & wgt1 & "','" & wgt21 & "','" & lschool & "','" & secschl1 & "','"  & qualify1 & "','" & hqilfy1 & "','" & army1 & "','" & abranch1 & "')"

      cmdClear_Click
      cmdClose_Click
    End Sub

    Private Sub cmdClose_Click()
      DoCmd.Close 
    End Sub

    Private Sub cmdClear_Click()
      vid1 = ""
      cid1 = ""
      dobd1 = ""
      gend1 = ""
      heght1 = ""
      heght21 = ""
      wgt1 = ""
      wgt21 = ""
      lschool1 = ""
      secschl = ""
      qualify = ""
      hqlify = ""
      army = ""
      abranch = ""

    End Sub

    Private Sub Form_Current()
    End Sub 
    ```

* * *

问题：

1.  上面的最后一页脚本根本不会将数据插入表中。
2.  如果我对表中的列进行索引，它可以将数据插入表中，但如果我进行了大量更新，它最终会变得混乱

我的问题：

1.  谁能建议我正确的 VB 脚本来执行此连续表单活动，而不是按表单更新整个表格。
2.  如何创建一个类似于 access 2003 的表单，在该表单上我可以创建仅允许用户登录的交换机，以及仅针对管理员对数据库的特殊登录访问，因此它会像一个应用程序。（我使用 Access 2010 .accdb 文件）

很抱歉这篇长文，只是想确保一切都清楚，任何答案将不胜感激。先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:02:41.493

关于你的第一个问题：

这是绑定表格可以证明很方便的情况之一。

您可以使用`INSERT INTO`，但您需要为每个表单生成不同的查询以避免错误。但是，如果您将所有表单设置为绑定到同一个表，则表单字段可以直接与表交互，而无需大量代码。

尝试以下示例，使用 3 个表单（尽管您可以轻松地将其扩展到 30 个表单）。

每个表格都有：

1.  隐藏字段，*ctlID*（绑定到表的 ID 字段）
2.  任意数量的其他字段，绑定到表中的匹配字段
3.  一个“下一步”按钮，*cmdNext*（或者在最后一个表单的情况下，*cmdFinish*）

您可以使用`WhereCondition`参数 of`DoCmd.OpenForm`来跨多个表单继续引用同一记录。

这是代码：

```
' Form1 code:
Private Sub Form_Load()
    DoCmd.GoToRecord , , acNewRec
End Sub

Private Sub cmdNext_Click()
    Dim iID As Long
    iID = Me.ctlID.Value

    DoCmd.Close acForm, Me.Name
    DoCmd.OpenForm "Form2", , , "ID = " & iID
End Sub

' Form2 code:
Private Sub cmdNext_Click()
    Dim iID As Long
    iID = Me.ctlID.Value

    DoCmd.Close acForm, Me.Name
    DoCmd.OpenForm "Form3", , , "ID = " & iID
End Sub

' Form3 code:
Private Sub cmdFinish_Click()
    DoCmd.Close acForm, Me.Name
End Sub 
```

# haskell - 行尾的 Parsec 问题

> ID：10743450
> 
> 赞同：2
> 
> 时间：2012-05-24T18:43:21.200
> 
> 标签：haskell, parsec

我有一个 Parsec 解析器，我主要以应用风格编写。在一种情况下（我唯一一次使用`sepBy`）我的`eol`解析器有问题。首先，几个定义：

```
eol =   try (string "\n\r")
    <|> try (string "\r\n")
    <|> string "\n"
    <|> string "\r"
    <?> "eol"

betaLine = string "BETA " *> (StrandPair <$> p_int <*> p_int <*> p_int <*> (p_int *> p_direction) <*> p_exposure) <* eol 
```

注意：`betaLine`完美运行（为简洁起见，我省略了`p_int`等的定义：

```
*HmmPlus> parse betaLine "beta" "BETA 6 11 5 24 -1 oiiio\n"
Right (StrandPair {firstStart = 6, secondStart = 11, pairLength = 5, parallel =   Antiparallel, exposure = [Exposed,Buried,Buried,Buried,Exposed]}) 
```

这个其他解析器会出现问题，`hmmMatchEmissions`：

```
 hmmMatchEmissions     = spaces *> (V.fromList <$> sepBy p_logProb spaces) <* eol <?> "matchEmissions"

*HmmPlus> parse hmmMatchEmissions "me" "      2.61196  4.43481  2.86148  2.75135  3.26990  2.87580  3.69681\n"
Left "me" (line 2, column 1):
unexpected end of input 
```

现在，如果我`<* eol`从解析器定义中删除，并`\n`从行中删除，它确实有效：

```
*HmmPlus> parse hmmMatchEmissions "me" "      2.61196  4.43481  2.86148  2.75135  3.26990  2.87580  3.69681"
Right (fromList [NonZero 2.61196,NonZero 4.43481,NonZero 2.86148,NonZero 2.75135,NonZero 3.2699,NonZero 2.8758,NonZero 3.69681]) 
```

那么，为什么在但不是`eol`的情况下工作？`betaLine``hmmMatchEmissions`

我会注意到这是我唯一使用的地方`sepBy`；这可能是一个线索吗？

更新：我做了以下事情，现在失败了：/

```
reqSpaces = many1 (oneOf " \t")

optSpaces = many (oneOf " \t")

hmmMatchEmissions = optSpaces *> (V.fromList <$> sepBy1 p_logProb reqSpaces) <* eol <?> "matchEmissions" 
```

这是失败的：

```
*HmmPlus> parse hmmMatchEmissions "me" "  0.123  0.124\n"
Left "me" (line 1, column 10):
unexpected "0"
expecting eol 
```

我会注意到第`0`10 列中的意外是`0.124`令牌的第一个字符。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T19:42:00.247

问题似乎是您的`p_logProb`解析器消耗了空格。所以，这就是解析过程中发生的事情：

```
 0.123  0.124\n
[]               optSpaces
  [-----]        p_logProb
         {       trying reqSpaces
         {       trying eol
                 failure: expecting eol 
```

解析器应该只使用它解析的`p_logProb`东西，即实际数字。这将导致预期的解析：

```
 0.123  0.124\n
[]               optSpaces
  [---]          p_logProb
       []        reqSpaces
         [---]   p_logProb
              {  trying reqSpaces
              #  eol 
```

# java - 如何在 Web 应用程序中获取 unix 命令行？

> ID：10743455
> 
> 赞同：0
> 
> 时间：2012-05-24T18:44:02.910
> 
> 标签：java, unix, web-applications, command

这就是我正在做的事情。我在 Unix 机器上有某些日志文件。这些文件在 10-100 MB 的范围内。我正在构建的是有一个 Web 应用程序，其中我可以有 unix 命令行，我可以在其中键入我的命令，如 grep、ls 等，然后命令给出的输出可以显示在表/gridview 中网络应用程序。这可能吗？我正在寻找可能在 Java 中的解决方案。我唯一不能使用的是微软堆栈。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T18:47:54.187

您是否尝试过此处列出的 Web SSH 客户端：[http ://en.wikipedia.org/wiki/Web-based_SSH](http://en.wikipedia.org/wiki/Web-based_SSH)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T18:51:43.110

java[运行时](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Runtime.html)可以帮助你。它将允许您创建进程并在进程内执行命令并返回结果。

# javascript - 重新排列瓷砖

> ID：10743468
> 
> 赞同：2
> 
> 时间：2012-05-24T18:44:36.947
> 
> 标签：javascript, jquery, html, css, jquery-ui-sortable

我有两组瓷砖，如下图所示。每个图块都是一个 DIV。

![在此处输入图像描述](../Images/722a7547323c599bb41657fd0174edd4.png)

我希望能够将磁贴拖到组内的新位置或相邻组内的新位置。

和windows 8类似，我也希望能够将组中的一个磁贴拖到两个组之间的空间中，为磁贴创建一个新组。

![在此处输入图像描述](../Images/6e88b259159d9f73ec4e03b1fa6edac3.png)

这是我能够做到的程度 - 我能够创建一个可拖动排序的单个组。

```
<div class="demo">
    <ul id="sortable">
        <li class="ui-state-default">1</li>
        <li class="ui-state-default">2</li>
        <li class="ui-state-default wide">3</li>
        <li class="ui-state-default">4</li>
        <li class="ui-state-default">5</li>
    </ul>
</div> 
```

[http://jsfiddle.net/psivadasan/FmWCx/](http://jsfiddle.net/psivadasan/FmWCx/)

感谢任何帮助。谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T18:47:33.363

我过去做过类似的事情，这就是我实现它的方式：http: [//jsfiddle.net/dazefs/vGYVX/](http://jsfiddle.net/dazefs/vGYVX/)

```
<div style="background-color:Gray">

<ul id="sortable">
    <li>
      <span style="background-color:yellow">
         Item 1
       </span>

     </li>
    <li>
     <span style="background-color:red">
       Item 2
     </span>

    </li>
    <li>
      <span style="background-color:green">
     Item 3
     </span>

  </li>
    <li>
    <span style="background-color:Blue">
           Item 4
     </span>
     </li>
   </ul>

<ul id="sortable2" style="width:60%">
<li>
    <span style="background-color:yellow">
        Item 5
    </span>
</li>
    <li>
    <span style="background-color:red">
        Item 6
    </span>
</li>
    <li>
    <span style="background-color:green">
        Item 7
    </span>
   </li>
    <li>
       <span style="background-color:Blue">
          Item 8
       </span>
   </li>
</ul>

 </div> 
```

```
$(function () {
    $("#sortable, #sortable2").sortable({
        connectWith: "#sortable2, #sortable",
        receive: function (event, ui) {
             alert('item has been sorted');
         }
    });

    //})
}); 
```

**要实现 3 个瓦片组：**

[http://jsfiddle.net/dazefs/XRdz6/](http://jsfiddle.net/dazefs/XRdz6/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T18:56:56.403

小提琴：http: [//jsfiddle.net/iambriansreed/A8NYw/](http://jsfiddle.net/iambriansreed/A8NYw/)

```
$(function() {
    $("#sortable1,#sortable2")
        .sortable({ connectWith: ".sortable"})
        .disableSelection();
});​ 
```

# sql - ROLLBACK TRANSACTION请求在sql server中没有对应的BEGIN TRANSACTION错误

> ID：10743472
> 
> 赞同：6
> 
> 时间：2012-05-24T18:44:53.117
> 
> 标签：sql, transactions

我收到错误“ROLLBACK TRANSACTION 请求没有相应的 BEGIN TRANSACTION”。如果任何删除语句的行数为零，我正在尝试回滚事务。下面给出的是我的代码。我究竟做错了什么？请帮忙

```
alter procedure delete_staff(@staffID varchar(10))
as
declare @tempvar varchar(50), @staffName varchar(50), @jobTitle varchar(50), @dept varchar(50)
begin transaction trans1
        declare @rc1 int
        declare @rc2 int
        declare @rc3 int
        select @tempvar = left(@staffID,1) from Staff
        delete from staff where staffID = @staffID
        set @rc1=@@rowcount
        delete from Login where userID = @staffID 
        set @rc2=@@rowcount
        begin
        if(@tempvar='S')
                begin
                delete from Specialist where specialistID = @staffID    
                set @rc3=@@rowcount
                end
        else if(@tempvar='H')
                begin
                delete from Helpdesk_Operator where helpdesk_OperatorID = @staffID
                set @rc3=@@rowcount
                end
        commit transaction trans1
        end
        if(@rc1=0 or @rc2=0 or @rc3=0)
        begin
        rollback transaction trans1
        end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T18:50:18.730

如果您提交事务，则不能进行回滚。做一个或另一个：

```
if(@rc1=0 or @rc2=0 or @rc3=0)
begin
  rollback transaction trans1
end else begin
  commit transaction trans1
end 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T18:47:55.777

你有`commit transaction trans1`权利在你的 if 语句之前进行回滚。在您检查计数之前，将始终提交事务。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-09-18T12:32:32.480

如果您的事务在您实际进入提交语句之前已经提交，则会发生这种情况。您可以在您的“COMMIT TRANSACTION”语句之前给出条件“If (@@TRANCOUNT>0)”。

例如：

```
 BEGIN TRANSACTION
  SELECT 0--Statements To Excecute
  ROLLBACK
  IF(@@TRANCOUNT>0)
  COMMIT TRANSACTION 
```

或者

```
 BEGIN TRY
  BEGIN TRANSACTION
  SELECT 0 --Statements To Excecute     
  COMMIT TRANSACTION
  END TRY
  BEGIN CATCH
  IF(@@TRANCOUNT>0)
  ROLLBACK
  END CATCH 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T18:48:47.140

我相信`commit transaction trans1`总是受到打击，因此您将无法从那时起回滚。

# php - 如何清理包含有效 UTF8 字符的 XML 属性的表单字段？

> ID：10743473
> 
> 赞同：6
> 
> 时间：2012-05-24T18:44:54.647
> 
> 标签：php, xml, sanitization

我已经为此苦苦挣扎了一段时间。我有一个多语言 Web 应用程序，可以在某些时候输出 XML。该 XML 可以包含任何语言，因此我的清理方法是禁止插入某些破坏 XML 的字符。那并在 CDATA 中尽可能多地包装，但我在属性中有大量内容。我不想禁止特殊字符，因为括号、句点、破折号、刻度和撇号等完全有效的字符一直都在使用并且它们有效。

去除所有会破坏 XML 属性的字符但保持语言完整的最佳方法是什么？

**更新：**
我发现：[http](http://en.wikipedia.org/wiki/CDATA#CDATA-type_attribute_value) ://en.wikipedia.org/wiki/CDATA#CDATA-type_attribute_value ，这表明我可以使用 DTD 将属性描述为 CDATA 部分；然而，这似乎不是真的。

```
<?xml version="1.0" ?> 
<!DOCTYPE foo [
  <!ELEMENT foo EMPTY>
  <!ATTLIST foo a CDATA #REQUIRED>
]>
<foo a="&bull;"><![CDATA[ &bull; ]]> </foo> 
```

任何验证者都会抱怨公牛不是属性中的实体。如果您删除该属性，它将是有效的。另外我听说模式是要走的路，所以如果像上面这样的事情是可能的，但使用 XML 模式，那就太棒了。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-09T22:07:32.940

这是有效的

```
<?xml version="1.0" ?> 
<!DOCTYPE foo [
  <!ELEMENT foo EMPTY>
  <!ATTLIST foo a CDATA #REQUIRED>
]>
<foo a="&amp;bull;"><![CDATA[ &bull; ]]> </foo> 
```

您可以将特殊字符转换为 html 实体

```
htmlentities($str); 
```

并与

```
html_entity_decode($str); 
```

见：[http ://www.php.net/manual/en/function.htmlentities.php](http://www.php.net/manual/en/function.htmlentities.php)

另见“html 元字符”

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-30T23:07:45.327

您需要做的就是将它们包装在`<!CDATA[ ]]>`标签中。你也可以抛出一个 htmlentities。

```
attr="<!CDATA[' . htmlentities($value) . ']]>" 
```

# css - 将条件 CSS 选择器应用于 magento 属性

> ID：10743484
> 
> 赞同：0
> 
> 时间：2012-05-24T18:45:31.183
> 
> 标签：css, magento, css-selectors

我正在尝试执行以下操作：

我已经为我的产品设置了许多 Magento 属性，我想在名为“颜色”的属性旁边显示一个图标，并将一个 alt 标签附加到这个图标/图像。我的主题将每个属性都设置为 dt 标签，因此我尝试应用的 css 如下：

```
dt[foo^="Color:"]{background: url(http://xyz.com/skin/frontend/default/default/images/warning.png) no-repeat 100% 0%;} 
```

这是标记： `<div class="white-box-inner">' '<dl class="attribute-list clearfix">``<dt class="first">Size:</dt>``<dd class="first">21</dd>` `<dt>Manufacturer:</dt>``<dd>Hat Designs</dd>``<dt>Color:</dt>` `<dd>Red</dd>``<dt>Fabric</dt>` `<dd>Felt</dd> </dl>` `</div>`

*   但是，这不会显示我想要出现的图标。
*   我也不确定如何通过 css 将 alt 标签与此图标关联。我宁愿不要弄乱模板文件。任何帮助表示赞赏。

谢谢。-TM值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:33:02.547

从您的标记看来，您正试图通过其内容选择一个元素。属性选择器仅按属性选择；他们不按内容选择。

本来会有一个`:contains()`伪类，但它从规范中删除了，所以你不能再使用 CSS 选择器来做到这一点。

[但是， jQuery 实现`:contains()`](http://api.jquery.com/contains-selector)了 ，因此您可以简单地使用 jQuery 添加一个类并设置该类的样式。

此外，您不能将 alt 文本或工具提示与 CSS 中的背景图像相关联。您将不得不通过 JavaScript 路线来实现这一点。

# html - 如何避免重叠 div 包含空格：nowrap 属性

> ID：10743488
> 
> 赞同：0
> 
> 时间：2012-05-24T18:45:49.187
> 
> 标签：html, css, overlapping

我想在列中分发一些链接。我使用这个CSS：

```
.cols{
    float: left;
    width: 25%; 
    white-space: nowrap;
} 
```

HTML：

```
<div class="CRMP_WP_QUICKADS_cols">
    text...
</div> 
```

图像显示了结果输出：

![在此处输入图像描述](../Images/ec00b1533264e644d9c2a0c7e24e6f13.png)

如何避免重叠？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T18:48:56.277

设置`overflow`为`hidden`截断任何超出`width`列的内容：

```
.cols {
 /* ... */
 overflow:hidden;
 text-overflow:ellipsis; /* Hint that some text is hidden */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T18:50:43.133

可能的解决方案：

*   您可以隐藏最后一部分：`overflow: hidden; text-overflow: ellipsis;`
*   您可以增加 div 的宽度

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T18:48:27.240

**3个选项**

1.  增加宽度
2.  删除 div 上的宽度声明（如果您希望它们扩展以适合文本）
3.  `overflow: hidden`如果要隐藏文本，请在 div 上设置

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T18:49:02.147

您必须增加`width`列数以补偿溢出的文本。

# python - 以特定格式从网页中提取信息

> ID：10743494
> 
> 赞同：1
> 
> 时间：2012-05-24T18:46:08.140
> 
> 标签：python, xpath, lxml

我正在尝试制作一个简单的 python 脚本来从[网页](http://mp3skull.com/mp3/linkin_park_faint.html)中提取某些链接。我能够成功提取链接，但现在我想提取更多信息，例如`bitrate,size,duration`该网页上给出的信息。

我正在使用下面的 xpath 来提取上述信息

```
>>> doc = lxml.html.parse('http://mp3skull.com/mp3/linkin_park_faint.html')
>>> info = doc.xpath(".//*[@id='song_html']/div[1]/text()")
>>> info[0:7]
['\n\t\t\t', '\n\t\t\t\t3.71 mb\t\t\t', '\n\t\t\t', '\n\t\t\t\t3.49 mb\t\t\t', '\n\t\t\t', '\n\t\t\t\t192 kbps', '2:41'] 
```

现在我需要的是，对于特定链接，我需要的信息以`tuple`like的形式生成`(bitrate,size,duration)`。

我上面提到的`xpath`生成所需的信息，但它是`ill-formatted`不可能用任何逻辑实现我所需的格式，至少我无法做到这一点。

那么，有没有办法以我的格式实现输出。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:11:59.910

我认为 BeautifulSoup 可以完成这项工作，它甚至可以解析格式错误的 HTML：

[http://www.crummy.com/software/BeautifulSoup/](http://www.crummy.com/software/BeautifulSoup/)

使用 BeautifulSoup 进行解析非常容易 - 例如：

```
import bs4
import urllib
soup = bs4.BeautifulSoup(urllib.urlopen('http://mp3skull.com/mp3/linkin_park_faint.html').read())

print soup.find_all('a') 
```

并且有很好的文档： [http ://www.crummy.com/software/BeautifulSoup/bs4/doc/](http://www.crummy.com/software/BeautifulSoup/bs4/doc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T19:04:54.653

你对正则表达式和 python 的 re 模块怎么样？

[http://docs.python.org/library/re.html](http://docs.python.org/library/re.html)可能是必不可少的。

就从数组中获取数据而言，`re.match(regex,info[n])`就足够了，就三元组而言，python 元组语法会处理它。只需使用 re.match 从您的信息数组的成员中匹配。

```
import re

matching_re = '.*'    # this re matches whole strings, rather than what you need
incoming_value_1 = re.match(matching_re,info[1])
# etc. 
var truple = (incoming_value_1, incoming_value_2, incoming_value_2 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T19:08:47.667

您实际上可以使用 XPath 去除所有内容：

```
translate(.//*[@id='song_html']/div[1]/text(), "\n\t,'", '') 
```

因此，对于您的其他问题，要么：

```
info[0, len(info)] 
```

完全，或：

```
info.rfind(" ") 
```

由于翻译会留下一​​个空格字符，但您可以将其替换为您想要的任何内容。

添加信息在[这里找到](http://www.astro.ufl.edu/~warner/prog/python.html)

# python-2.7 - Python中的奇怪符号

> ID：10743495
> 
> 赞同：3
> 
> 时间：2012-05-24T18:46:16.243
> 
> 标签：python-2.7

我正在研究 Python，并且一直在尝试转义序列`\v`和`\f`. 输出似乎给出了我放置这两个转义序列的奇怪符号。由于网站的一些垃圾邮件预防政策，我无法发布输出图像。有人可以就可能出现的问题提供任何想法。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T18:50:21.790

转义序列记录在这里：
[http ://docs.python.org/reference/lexical_analysis.html#string-literals](http://docs.python.org/reference/lexical_analysis.html#string-literals)

`\v`是垂直制表符
`\f`是换页

如果你在 REPL 中打印它们，你会得到十六进制值 ( `0c`)。
例子：

```
>>> '\f'
'\x0c' 
```

与其他一些约定一样，`\x`转义序列继承自 C。
参考： http: [//www.python.org/dev/peps/pep-0223/](http://www.python.org/dev/peps/pep-0223/)

另外：
如果您更喜欢 ASCII 代码而不是十六进制代码，您可以使用`ord()`：

```
>>> ord('\f')
12 
```

# java - 使用 String.replace() 替换斜杠，即“\”

> ID：10743497
> 
> 赞同：0
> 
> 时间：2012-05-24T18:46:30.993
> 
> 标签：java, string

我有一个字符串`C:\Users\temp\index.html`，想`"\"`用`"\\"`. 我尝试了以下方法：

```
 str= str.replace("\", "\\"); 
```

.. 但 Eclipse 一直建议我向 replace 方法添加参数。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T18:50:00.463

您需要转义斜杠字符：

```
str = str.replace("\\", "\\\\"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T18:55:36.723

```
String str="C:\Users\temp\index.html";
str = str.replace("\\", "\\\\");
System.out.println(str); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T19:06:54.817

尝试这个，

```
str = str.replace("\\", "\\\\"); 
```

因为“\”取消了在语言中具有特殊意义的符号的效果。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T18:49:52.813

你需要逃避你的`\`. 使用`\`角色逃脱。`\`必须同时逃避`\`和`"`。

```
str.replace("\\", "\\\\"); 
```

# java - 更好的比较字符串方法

> ID：10743498
> 
> 赞同：2
> 
> 时间：2012-05-24T18:46:32.197
> 
> 标签：java, string, apache-commons, string-comparison, levenshtein-distance

**我的问题是**比较两个字符串的最快（质量也很重要，但不太重要）的方法是什么？

我正在寻找比较两个字符串的最有效方法。我比较的一些字符串可能超过 5000 个字符。我正在将大约 80 个字符串的列表与另一个大约 200 个字符串的列表进行比较。它需要很长时间，即使我正在穿线它。我正在使用[`StringUtils.getLevenshteinDistance(String s, String t)`](http://commons.apache.org/lang/api/org/apache/commons/lang3/StringUtils.html#getLevenshteinDistance%28java.lang.CharSequence,%20java.lang.CharSequence%29)来自 Apache Commons 的方法。我的方法如下。有一个更好的方法吗？

```
private void compareMe() {
  List<String> compareStrings = MainController.getInstance().getCompareStrings();
  for (String compare : compareStrings) {
    int levenshteinDistance = StringUtils.getLevenshteinDistance(me, compare);
    if (bestScore > levenshteinDistance
          && levenshteinDistance > -1) {
      bestScore = levenshteinDistance; //global variable
      bestString = compare; //global variable
    }
  }
} 
```

这是两个字符串的示例，应该有一个很好的分数：

字符串 1：

```
SELECT 
CORP_VENDOR_NAME as "Corporate Vendor Name",
CORP_VENDOR_REF_ID as "Reference ID",
MERCHANT_ID as "Merchant ID",
VENDOR_CITY as "City",
VENDOR_STATE as "State",
VENDOR_ZIP as "Zip",
VENDOR_COUNTRY as "Country",
REMIT_VENDOR_NAME as "Remit Name",
REMIT_VENDOR_REF_ID as " Remit Reference ID",
VENDOR_PRI_UNSPSC_CODE as "Primary UNSPSC"
FROM DSS_FIN_USER.ACQ_VENDOR_DIM
WHERE VENDOR_REFERENCE_ID in 
(SELECT distinct CORP_VENDOR_REF_ID
FROM DSS_FIN_USER.ACQ_VENDOR_DIM
WHERE CORP_VENDOR_REF_ID = '${request.corp_vendor_id};') 
```

字符串 2：

```
SELECT 
CORP_VENDOR_NAME as "Corporate Vendor Name",
CORP_VENDOR_REF_ID as "Reference ID",
MERCHANT_ID as "Merchant ID",
VENDOR_CITY as "City",
VENDOR_STATE as "State",
VENDOR_ZIP as "Zip",
VENDOR_COUNTRY as "Country",
REMIT_VENDOR_NAME as "Remit Name",
REMIT_VENDOR_REF_ID as " Remit Reference ID",
VENDOR_PRI_UNSPSC_CODE as "Primary UNSPSC"
FROM DSS_FIN_USER.ACQ_VENDOR_DIM
WHERE VENDOR_REFERENCE_ID in 
(SELECT distinct CORP_VENDOR_REF_ID
FROM DSS_FIN_USER.ACQ_VENDOR_DIM
WHERE CORP_VENDOR_REF_ID = 'ACQ-169013') 
```

您会注意到唯一的区别是`'${request.corp_vendor_id};'`字符串末尾的 。这将导致它`26`从`LevenshteinDistance`方法中获得分数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T19:51:52.057

您应该考虑比较逻辑中可能的捷径，以避免一些计算。所以如果你想全局最小化 Levenshtein 距离，你甚至不需要计算它，如果字符串大小的差异高于你当前的最佳 Levenshtein 距离。

例如，如果您当前的最佳 Levenshtein 距离是 50，那么您可以避免比较大小为 100 和 180 的两个字符串，因为它们的 Levenshtein 距离至少为 80。

# java - 创建所有可能百分比的项目列表？

> ID：10743499
> 
> 赞同：2
> 
> 时间：2012-05-24T18:46:36.057
> 
> 标签：java, algorithm

我的目标是给程序一些项目（字符串）、一个范围和目标百分比，让它给我每个项目的所有可能百分比。例如，假设你去杂货店买了一篮苹果和梨，你想知道使用所有物品可以得到的所有百分比（不是一个完整的解决方案，我是手工完成的）： `{Apple:50, Pears:50}, {Apple:75, Pears:25}, {Apple:90, Pears:10},etc.`

如果我在 20-50 的范围内做同样的事情（意味着单个项目可以具有的最高值是 50%，最低是 20%），那么唯一的结果是：（ `{Apple:50, Pears:50}`因为只有 2 个项目并且不能超过 50 ％ 重量）

我认为它具有与背包问题相似的特征，但有一些很大的差异，因为没有与物品相关的值/重量（但就像背包问题试图将物品放入背包中一样，我正在尝试将值拟合到 target_percent, 100 %）。我也很难应用一般的动态编程思想，因为我不知道如何解决问题（典型的背包问题会建立结果，然后“缓存”结果以重用，但如果我有一个 X 列表项目，我需要在一个范围内使用所有 X 项目）。

我可以通过蛮力做到这一点，但我觉得它的效率不高，因为它只是尝试一切，所以我使用的界限根本没有被用来使其高效（例如，如果苹果是 75%，那么有没有理由 Pear 应该超过 25%..bounds 是列表、范围和 target_percent 的大小..我可能有 20-30 个列表项，范围为 5-20，或者可能有 50 个项目，范围为 1-5..或者介于两者之间的任何事情我都想尽可能快地获得多少完整的结果。我没有在问题中显示 target_percent 部分，因为一旦我了解如何解决问题，我就可以设置它，但基本上所有这些示例假设最多 100%，但有时您的篮子中可能已经有 20% 的橙子，看看如何使用苹果/梨来填满剩下的 80%）。

我的问题是，我该如何处理（我可以查找的任何想法逻辑、示例或代理问题）？动态编程是否适合这个问题，或者我不能把它分解成更小的问题（请记住，因为它总是包含列表中的所有项目，它没有建立）？如果有人能指出我正确的方向，我愿意研究任何可能有帮助的主题（花了 2 天时间试图弄清楚这一点，我只是不确定动态编程路线是否正确）。还有这类问题的名称（我查找了背包问题、整数分区、组合学，但似乎没有一个适合）？

这是我的（破碎的）蛮力方法（它实际上没有按预期工作，但可能让您了解蛮力方法）：

```
import java.util.ArrayList;
import java.util.Arrays;

public class brute_force_percent_returner {
    static String[] data = new String[]{"Apple", "Pears"};
    static int[] coeff = new int[data.length];
    static ArrayList<int[]> queue = new ArrayList<int[]>();

    public static void main(String[] args) {
        System.out.println("Starting");
        recursion(0,data);
        for (int[] item : queue) {
            for (int item2 = 0; item2<data.length; item2++) {
                System.out.print(data[item2] + " = " + item[item2] + " ");
            }
            System.out.println();
        }
    }

    private static void recursion(int k, String[] data2) {
        // this is not exactly working
        for (String item: data2) {
            for (int x = 0; x<5;x++) {
                int[] coeff_temp = Arrays.copyOf(coeff, coeff.length);
                coeff_temp[k] = x;
                queue.add(coeff_temp);
            }
        }
        if (k == data.length-1) {
            return;
        } else {
            recursion(k+1, data2);
        }
    }
} 
```

如果它有助于我试图创建的解决方案有点基于这个（这是一个背包问题，但对于大量变量来说似乎超级快，但在这种情况下，它的处理项目是列表中的项目，而在我的情况下该列表只是字符串）：

```
public class TurboAdder {
    private static final int[] data = new int[] { 5, 10, 20, 25, 40, 50 };

    private static class Node {
        public final int index;
        public final int count;
        public final Node prevInList;
        public final int prevSum;
        public Node(int index, int count, Node prevInList, int prevSum) {
            this.index = index;
            this.count = count;
            this.prevInList = prevInList;
            this.prevSum = prevSum;
        }
    }

    private static int target = 100;
    private static Node sums[] = new Node[target+1];

    // Only for use by printString.
    private static boolean forbiddenValues[] = new boolean[data.length];

    public static void printString(String prev, Node n) {
        if (n == null) {
            System.out.println(prev);
        } else {
            while (n != null) {
                int idx = n.index;
                // We prevent recursion on a value already seen.
                if (!forbiddenValues[idx]) {
                    forbiddenValues[idx] = true;
                    printString((prev == null ? "" : (prev+" + "))+data[idx]+"*"+n.count, sums[n.prevSum]);
                    forbiddenValues[idx] = false;
                }
                n = n.prevInList;
            }
        }
    }

    public static void main(String[] args) {
        for (int i = 0; i < data.length; i++) {
            int value = data[i];
            for (int count = 1, sum = value; count <= 100 && sum <= target; count++, sum += value) {
                for (int newsum = sum+1; newsum <= target; newsum++) {
                    if (sums[newsum - sum] != null) {
                        sums[newsum] = new Node(i, count, sums[newsum], newsum - sum);
                    }
                }
            }
            for (int count = 1, sum = value; count <= 100 && sum <= target; count++, sum += value) {
                sums[sum] = new Node(i, count, sums[sum], 0);
            }
        }
        printString(null, sums[target]);

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:07:48.743

我非常相信蛮力方法是最好的方法 - 至少，我会这样做（这绝不是同一件事......）。

这是尝试使用我正在使用的递归方法（尽管我没有用高值测试它`weightsNo`。这是基于您对权重的组合而不是对权重的排列感兴趣- 虽然切换相对简单。

```
public static Set<int[]> getPossiblePercentageWeights(int weightsNo, int min, int max){
  return recusiveFixWeight(weightsNo, 100, min, max);
}

private static Set<int[]> recusiveFixWeight(int weightsNo, int sum, int min, int max){
  Set<int[]> weightsSet = new LinkedHashSet<int[]>();
  if (weightsNo>2){
    for (int iWeight=min; iWeight<=max; iWeight++){
      Set<int[]> subSet = recusiveFixWeight(weightsNo-1, sum-iWeight, min, iWeight);
      for (int[] subWeights : subSet){
        int[] weights = new int[weightsNo];
        weights[0] = iWeight;
        System.arraycopy(subWeights, 0, weights, 1, subWeights.length);
        weightsSet.add(weights);
      }
    }
  } else {
    int iMax = Math.min(max, sum/weightsNo);
    for (int iWeight=min; iWeight<=iMax; iWeight++){
      int jWeight = sum-iWeight;
      if (jWeight>=min && jWeight<=max){
        weightsSet.add(new int[]{iWeight,jWeight});
      }
    }
  }
  return weightsSet;
} 
```

也就是说，在查看结果后，看起来应该有一种算法来确定给定 a 和 的 weightSet 数量，`weightsNo`并且从那里用可能的值填充它们应该相当简单。也就是说，我目前无法完全弄清楚。（或者实际上，它是否会比蛮力方法更快......）`min``max`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T22:06:38.290

这听起来像家庭作业，所以我不太愿意帮助你太多，但这里有一个方法。

要定义范围，请制作几个哈希映射，例如

```
lower bounds = {apples  => 20, pears => 40,  oranges => 0}
upper bounds = {apples  => 50, pears => 100, oranges => 30} 
```

如果您考虑一下，每个最终（有效）组合至少都具有由下限映射定义的内容。所以称之为基本组合。

接下来，找出可以添加到基本组合中的每种类型的理论最大值。这只是另一张地图

```
{apples  => 30, pears => 60,  oranges => 30} 
```

计算可以添加到基本地图的总项目数，即 100 - 所有下限值的总和，在示例中为 40。

现在，您需要生成组合。您可能会发现递归是最简单的方法。我将使用伪代码和硬编码的东西来演示剩余的算法以提高清晰度，尽管您需要编写它的通用递归版本。

```
totalItemsToAdd = 40 //as calculated via baseCombo.sumOfEntries()

for (i=0; i<maxApples; i++) {
    combo = clone the base combination
    combo.apples += i;
    remainingItemsToAdd = totalItemsToAdd - i;
    if (remainingItemsToAdd > 0) {
        for (j=0; j<maxPears; j++) {
            combo.pears += j;
            // and so on, recursively
        }
    }

    results.append(combo)
} 
```

请注意它是如何通过跟踪每个组合可能还有多少项目来仅生成有效组合的。所以，这不是蛮力，它实际上会做最少的工作来生成一组组合。

# javascript - 附加到 getJSON 中的字符串

> ID：10743501
> 
> 赞同：0
> 
> 时间：2012-05-24T18:46:39.833
> 
> 标签：javascript, jquery

谁能看到这段代码的问题？当返回 'out' 时，它的值为 ""。我不知道为什么，也许这与我不知道的 getJSON 函数有关。

我正在尝试将 URL 传递给此函数，让它在 URL 上执行 getJSON，并将结果（我也在格式化）添加到文本字符串中。我希望它们都在一个文本字符串中，所以我可以用正则表达式解析字符串。任何帮助表示赞赏，谢谢！

```
function getSearch(url) {
var out = '';   // output variable

$.getJSON(url, function(data) {
    for(var i = 0; i < numResults; i++) {
        out += '<p class="hash_list">' + '<a href="http://www.twitter.com/' + data.results[i].from_user + '">' + data.results[i].from_user + '</a>: ' + data.results[i].text + '</p>';
    }
});

return out;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T18:51:34.610

AJAX 是**异步**的。

您需要使用回调函数返回值，方法相同`getJSON`：

```
function getSearch(url, callback) {
    $.getJSON(..., function() { 
        ...
        callback(...);
    });
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T18:57:47.117

ajax 是异步的，您拥有的代码将在 ajax 请求完成之前返回。有几种方法可以重构代码。

您可以传入一个回调函数，该函数在请求完成后执行。

```
function getSearch(url, callback) {
   $.getJSON(url, function(data) {
     var out = '';    
     // btw what is numResults ?? 
     for(var i = 0; i < numResults; i++) {
        out += '<p class="hash_list">' + '<a href="http://www.twitter.com/' + data.results[i].from_user + '">' + data.results[i].from_user + '</a>: ' + data.results[i].text + '</p>';
     }
     if( typeof callback === 'function' ) callback( out ); 
   });
} 
```

然后你会使用这样的功能。

```
getSearch('test.php', function(out){ 
   // here you can use the out variable 
}); 
```

或者，您可以使用 jquery deferreds 返回一个 Promise 并在解决 deferred 时将 out 变量作为参数的一部分传递。这是一个例子

```
function getSearch() 
{    
    var deferred = $.Deferred(); 
    $.getJSON(url, function(data) {
     var out = '';    
     // btw what is numResults ?? 
     for(var i = 0; i < numResults; i++) {
        out += '<p class="hash_list">' + '<a href="http://www.twitter.com/' + data.results[i].from_user + '">' + data.results[i].from_user + '</a>: ' + data.results[i].text + '</p>';
     }
     deferred.resolve( out ); // resolve the request and pass in the out argument.  
   });

    return deferred.promise(); // return a promise 
}

$.when( getSearch() ).then(function( out ){  // the out variable will get passed in
     console.log( out );
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T18:57:42.183

`$.getJSON`是异步的。这意味着`out`在 AJAX 调用完成之前返回。

您不能从 AJAX 调用返回任何内容，您需要将`out`回调中处理的所有代码添加到`$.getJSON`.

我建议将回调传递给您的函数。像这样的东西：

```
function getSearch(url, callback) {
    var out = '';
    $.getJSON(url, function(data) {
        for(var i = 0; i < numResults; i++) {
            out += '<p class="hash_list">' + '<a href="http://www.twitter.com/' + data.results[i].from_user + '">' + data.results[i].from_user + '</a>: ' + data.results[i].text + '</p>';
        }
        if(typeof callback === 'function'){
            callback(out); // call your callback with data
        }
    });
} 
```

现在，您不再期待 的返回值`getSearch`，而是向它发送回调。

```
getSearch('http://example.com/myurl', function(data){
    // this function will get called sometime in the future,
    // once $.getJSON is done, "data" will be the "out" from the AJAX call
}); 
```

# javascript - node.js 和 jquery web 的 UI

> ID：10743504
> 
> 赞同：4
> 
> 时间：2012-05-24T18:46:52.553
> 
> 标签：javascript, jquery, html, node.js

1.  `node.js`（考虑到 Web 应用程序）是否有任何首选的 UI 框架？或者这是使用的正交问题`node.js`？
2.  jQuery 不错，jQuery UI 是 jQuery 引擎最常用的 UI 框架吗？你能指点我其他的选择吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T20:19:04.487

1）Node不关心UI，它都是服务器端。

2) Jquery UI 可能是最常用的带有 jQ​​uery 引擎的 UI 框架，虽然我没有数据来支持它。

[Kendo UI](http://www.kendoui.com/)是建立在 jQuery 之上的另一个很好的 UI。

[jQuery 工具](http://jquerytools.org/)我听说过好东西，但从未使用过。它也建立在 jQuery 之上（显然）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-16T23:47:08.433

NodeJS 被认为是一种服务器端解决方案，但这并没有阻止人们尝试为 UI 制作独立的解决方案。一个这样的解决方案是“ [Node Webkit](https://github.com/rogerwang/node-webkit) ”，它提供了一个基于 webkit 的应用程序，该应用程序利用 nodejs 编写“客户端”应用程序。

如果您希望以与 JQuery 相同的方式使用 NodeJS，那么您正在寻找适合该工作的错误工具。NodeJS 应该被视为基于 JS 的应用程序的应用程序框架。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T20:14:21.680

[Node.js](http://nodejs.org/)不是客户端 Web 应用程序，它是服务器的 javascript 运行时。它没有图形用户界面。

对于 jQuery UI 的替代品，您可以查看[jQuery Plugins vs UI vs some alternative](https://stackoverflow.com/q/2001902/1048572)。

# java - Java 语言规范和 VM 规范的早期版本是否可以在线获得？

> ID：10743512
> 
> 赞同：5
> 
> 时间：2012-05-24T18:47:41.477
> 
> 标签：java, jls

[Oracle 在http://docs.oracle.com/javase/specs/](http://docs.oracle.com/javase/specs/)上有最新版本的 java 规范，但我找不到旧版本。这些存档在任何地方吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-01T01:43:58.650

如果您仍然感兴趣 - 我刚刚遇到了同样的问题，并使用 waybackmachine 找到了旧规格，例如，JLS 第一版在这里：

[http://web.archive.org/web/20041208124545/http://java.sun.com/docs/books/jls/first_edition/html/index.html](http://web.archive.org/web/20041208124545/http://java.sun.com/docs/books/jls/first_edition/html/index.html)

下载 PDF 版本失败，但我可以显示在线 HTML 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T18:50:31.400

是的，请查看[Oracle Java 存档](http://www.oracle.com/technetwork/java/archive-139210.html)。你应该能够在那里找到你需要的一切。

# r - 将数据框的每个摘要行展开为类型计数

> ID：10743514
> 
> 赞同：1
> 
> 时间：2012-05-24T18:47:41.773
> 
> 标签：r, dataframe

我有一个看起来像这样的数据框，有两个关键列，然后是三种不同类型的事物的计数。

```
 Year Month Urban Suburban Rural
1    1     1    11       12    13
2    1     2    21       22    23 
```

我想扩展每一行，以便它列出类型作为一个因素，然后是该类型中的数字，所以是这样的：

```
 Year Month     Type Number
1    1     1    Urban     11
2    1     1 Suburban     12
3    1     1    Rural     13
4    1     2    Urban     21
5    1     2 Suburban     22
6    1     2    Rural     23 
```

有没有无痛的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T19:01:52.137

这正是`reshape`和`reshape2`包的设计目的：

```
require(reshape2)
x <- read.table(text = "Year Month Urban Suburban Rural
1    1     1    11       12    13
2    1     2    21       22    23")

#Specify the variables that are your ID variables. The others will form your "long" data
x.m <- melt(x, id.vars = c("Year", "Month"))
#-----  
Year Month variable value
1    1     1    Urban    11
2    1     2    Urban    21
3    1     1 Suburban    12
... 
```

[统计软件杂志上](http://www.jstatsoft.org/v21/i12)有一篇论文，这是一个很好的起点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T19:02:03.007

```
dat <- read.table(text=" Year Month Urban Suburban Rural
 1    1     1    11       12    13
 2    1     2    21       22    23
 ", header=TRUE)

reshape(dat, direction="long", idvar=1:2, varying=names(dat)[3:5], times=names(dat)[3:5], v.names="Number", timevar="Type")
             Year Month     Type Number
1.1.Urban       1     1    Urban     11
1.2.Urban       1     2    Urban     21
1.1.Suburban    1     1 Suburban     12
1.2.Suburban    1     2 Suburban     22
1.1.Rural       1     1    Rural     13
1.2.Rural       1     2    Rural     23 
```

（请注意，该`reshape`功能在标准包中，而不是在 reshape 或 resshape2 包中。）

# objective-c - EXC_BAD_ACCESS 在多个设备上使用 iCloud

> ID：10743517
> 
> 赞同：4
> 
> 时间：2012-05-24T18:47:47.453
> 
> 标签：objective-c, ios, exc-bad-access, icloud

我正在使用 iCloud 创建一个应用程序。但我有一些问题。它使用 NSFileWrapper 在 iCloud 上创建目录，然后在 NSFileWrapper 目录中创建 NSData（容器）文件。我正在使用此代码将 NSFileWrapper 转换为 NSMutableArray：

```
NSFileWrapper *MyWrapper=[[[MyDocument data] fileWrappers] objectForKey:@"myFile.doh"];
    NSData *MyData=[NSData dataWithData:[MyWrapper regularFileContents]];
    NSMutableArray *MyList=[NSPropertyListSerialization propertyListFromData:MyData mutabilityOption:NSPropertyListMutableContainers format:nil errorDescription:nil]; 
```

它仅在创建此容器的设备上正常工作。在其他设备上，此代码的结果是 BAD_ACCESS（在代码的第二行，我开始对数据进行处理）。调试时，函数“regularFileContents”返回具有正确数据大小的正确对象，但是当我尝试读取此数据时，会发生 BAD_ACEESS(code=10)。

我正在使用 ARC，所以这不是内存管理的错误。

问题可能出在某些项目/代码符号设置中？有任何想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T05:07:28.247

我也遇到了这个问题，经过大量实验后，我发现即使外部包装器已经下载了内部内容，但实际上还没有下载，这会导致对 regularFileContents 的调用失败。

我一直在 MyWrapper 上调用*startDownloadingUbiquitousItemAtURL*，一旦完成，错误就消失了。这是一种检查文件下载状态的方法（假设您知道 MyWrapper 的 url）并在尚未下载时开始下载。

```
-(BOOL)downloadFileIfNotAvailable:(NSURL*)fileURL
{
    NSNumber *isInCloud = nil;

    if ([fileURL getResourceValue:&isInCloud forKey:NSURLIsUbiquitousItemKey error:nil])
    {
        if ([isInCloud boolValue]) {
            NSNumber *isDownloaded = nil;
            if ([fileURL getResourceValue:&isDownloaded forKey:NSURLUbiquitousItemIsDownloadedKey error:nil])
            {
                if ([isDownloaded boolValue])
                {
                    return YES;
                }

                NSError *error = nil;
                [[NSFileManager defaultManager] startDownloadingUbiquitousItemAtURL:fileURL error:&error];

                if (error)
                {
                    NSLog(@"Download Failed :: %@", error);
                }

                return NO;
            }
        }
    }

    return YES;
} 
```

# jquery - jQuery 如果表在 2 个条件下连续超过 2 个 td

> ID：10743520
> 
> 赞同：0
> 
> 时间：2012-05-24T18:47:54.950
> 
> 标签：jquery, html-table

如果可能，我正在尝试在“if”语句中组合 2 个条件。

我想首先检查屏幕宽度，然后查看表格的一行或第一行中是否有超过 2 个 td。如果有做一些功能。

这是我作为宽度的第一部分，但我将如何添加需要满足​​的其他条件？

```
var width = parseInt($(window).width());
if (width<=610) {  
//Need to add the other condition that is a table has more than 2 td's in a row

} 
```

这是我要运行的真实代码。如果超过 2 列，请参阅我的评论以执行。

```
var width = parseInt($(window).width());
if (width<=610) {   

    //Need to figure out how execute this if there are more than 2 columns in the table???
    $('.content table').replaceWith(function() {

    var $th = $(this).find('th'); // get headers
    var th = $th.map(function() {
        return $(this).text();
    }).get(); // and their values

    $th.closest('tr').remove(); // then remove them

    var $d = $('<div>', { 'class': 'responsive-table' });

    $('tr', this).each(function(i, el) {
        var $div = $('<div>', {'class': 'box grey-bg'}).appendTo($d);
        $('td', this).each(function(j, el) {
            var n = j + 1;
            var $row = $('<div>', {
                //'class': 'row-' + n
                'class': 'row'
            });
            $row.append(
            $('<span>', {
                //'class': 'label-' + n,
                'class': 'label',
                text: th[j]
            }), ' : ', $('<span>', {
                //'class': 'data-' + n,
                'class': 'data',
                text: $(this).text()
            })).appendTo($div);
        });
    });
    return $d;  
    }); 

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:03:53.297

```
function checkResult() {
    $("#IDOfYourTable tr").each(function() {
        if ((($this).find("td").size() > 1) || (($this).find("th").size() > 1))
            return true;
    });
    return false;
} 
```

在你的 if 子句中使用这个函数。

更正的代码：

```
var width = parseInt($(window).width());
var that = undefined;
function checkResult() {
    if (width <= 610) {
        $(".content table tr").each(function() {
            if (($(this).find("td").size() > 2) || ($(this).find("th").size() > 2))
            {
                if ((that == undefined) || (that[0] != this)) {
                that = $(this);
    var $th = $(this).find('th'); // get headers
    var th = $th.map(function() {
        return $(this).text();
    }).get(); // and their values

    $th.closest('tr').remove(); // then remove them

    var $d = $('<div>', { 'class': 'responsive-table' });

    $('tr', this).each(function(i, el) {
        var $div = $('<div>', {'class': 'box grey-bg'}).appendTo($d);
        $('td', this).each(function(j, el) {
            var n = j + 1;
            var $row = $('<div>', {
                //'class': 'row-' + n
                'class': 'row'
            });
            $row.append(
            $('<span>', {
                //'class': 'label-' + n,
                'class': 'label',
                text: th[j]
            }), ' : ', $('<span>', {
                //'class': 'data-' + n,
                'class': 'data',
                text: $(this).text()
            })).appendTo($div);
        });
    });
            }
        }
                                    });
    }
}
checkResult();                                    

​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T18:53:44.823

试试下面，假设您只想获取表格的列数..

```
var width = parseInt($(window).width());
var tableColCount = $('#tableID tr:first').find('td').length;

if (width<=610 && tableColCount  > 2) {  
  //Your code

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T22:26:58.050

```
//Need to figure out how execute this if there are more than 2 columns in the table???
function foo(that) {
    that.find("tr").each(function(){
        if ($(this).find("td").size() > 2)
            that.addClass("strip-these");  
            return;
    });
}

$('.content table').each(function() {
    foo($(this));
});
console.log($(".strip-these"));
$('.strip-these').each(function() {
    $('tr', this).each(function() {
        var length = $('td', this).length;
        console.log(length);
        if (length > 2) {
            // code
            $('.strip-these').replaceWith(function() {

                var $th = $(this).find('th'); // get headers
                var th = $th.map(function() {
                    return $(this).text();
                }).get(); // and their values
                $th.closest('tr').remove(); // then remove them
                var $d = $('<div>', {
                    'class': 'responsive-table'
                });

                $('tr', this).each(function(i, el) {
                    var $div = $('<div>', {
                        'class': 'box grey-bg'
                    }).appendTo($d);
                    $('td', this).each(function(j, el) {
                        var n = j + 1;
                        var $row = $('<div>', {
                            //'class': 'row-' + n
                            'class': 'row'
                        });
                        $row.append(
                        $('<span>', {
                            //'class': 'label-' + n,
                            'class': 'label',
                            text: th[j]
                        }), ' : ', $('<span>', {
                            //'class': 'data-' + n,
                            'class': 'data',
                            text: $(this).text()
                        })).appendTo($div);
                    });
                });
                return $d;
            });

        }
    });
});​ 
```

# jquery - jQuery倒计时没有正确倒计时

> ID：10743535
> 
> 赞同：1
> 
> 时间：2012-05-24T18:48:43.117
> 
> 标签：jquery, datetime, date, counter

嘿，我已经将代码发布到我正在使用的倒计时计数器上。可以在此处的 JSFiddle 页面上找到它：http: [//jsfiddle.net/QVwGt/](http://jsfiddle.net/QVwGt/)

正如您在该页面上看到的那样，计时器从**95**开始（以秒为单位），然后开始**94、93、92、91、90、85、84、83、82、81、80、75、74 等。**

它应该从**59, 58, 57**开始，一直到**00**然后再从**59 开始**。它曾经在剩下 XXX 天时这样做，但现在自从它进入 2 位数天后，它开始这样做，我查看了代码，但无法找到问题的根源。

就目前而言，即使从 95 开始，它也确实保持了 59 秒滴答的速度（在计算机时钟指针上观看）。但从 95 开始看起来并不好 :o)

任何帮助都可以很好地解决这个问题！:o)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T18:54:14.413

```
digits[c].__max = ((c-1) % 2 == 0) ? 5: 9; 
```

你在这里注释掉了正确的代码

```
digits[c].__max = (c % 2 == 0) ? 5: 9; 
```

[http://jsfiddle.net/QVwGt/2/](http://jsfiddle.net/QVwGt/2/)

基本上， c 是您的迭代器。因此，在这种情况下，您正在寻找最大为 9 的第二个数字，以及最大为 5 的第一个数字。请记住，您的迭代器是基于 0 的，而您正在考虑基于 1。

换句话说，`0 % 2 == 0`但`1 % 2 != 0`你看着它，看到`1 % 2 != 0`和`2 % 2 == 0`

如果这样写会更清楚：

```
digits[c].__max = ((c + 1) % 2 == 0) ? 9: 5; 
```

# apache-flex - 在 MenuBar 的菜单中更改背景颜色 (Flex 4.6)

> ID：10743545
> 
> 赞同：0
> 
> 时间：2012-05-24T18:49:10.807
> 
> 标签：apache-flex, menu, flex3, menubar

在 Flex 中，火花皮肤很棒。自定义组件需要几分钟时间。Mx 组件非常难以处理。我花了 2 天的时间来了解如何更改菜单栏组件中菜单的背景。当我找到完成它的正确方法时（[http://goo.gl/Tu5Wc](http://goo.gl/Tu5Wc)），它根本不起作用。我创建了非常简单的应用程序来演示我的问题：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx"
               creationComplete="application1_creationCompleteHandler(event)">

    <fx:Script>
        <![CDATA[
            import mx.collections.XMLListCollection;
            import mx.events.FlexEvent;
            private var menubarXML:XMLList =
                <>
                    <menuitem label="Client">
                        <menuitem label="Profile"/>
                        <menuitem label="Documents"/>
                    </menuitem>
                    <menuitem label="Others">
                        <menuitem label="Profile"/>
                        <menuitem label="Documents"/>
                    </menuitem>
                </>;
            [Bindable]
            public var menuBarCollection:XMLListCollection;
            protected function application1_creationCompleteHandler(event:FlexEvent):void
            {
                menuBarCollection = new XMLListCollection(menubarXML);

            }

        ]]>
    </fx:Script>

    <fx:Style>
        @namespace mx "library://ns.adobe.com/flex/mx";
        mx|MenuBar.myStyle {
            backgroundColor: #ff0000;
        }
    </fx:Style>
    <mx:MenuBar height="30" labelField="@label" dataProvider="{menuBarCollection}" menuStyleName="myStyle"/>
</s:Application> 
```

有人可以解释为什么菜单背景仍然是白色的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T20:32:28.627

菜单栏会渲染一个列表...只需在 CSS 上设置一种适用于列表的样式（它不会使用 ctrl+bar 显示）。

```
mx|MenuBar{
    color:#BBBBBB;
    backgroundColor: #333333;
    contentBackgroundColor: #333333;
} 
```

只是它！这很容易：D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T11:49:27.143

您可以为此更改CSS...

以下是创建 CSS 并在当前项目中使用的链接...

[http://examples.adobe.com/flex2/consulting/styleexplorer/Flex2StyleExplorer.html](http://examples.adobe.com/flex2/consulting/styleexplorer/Flex2StyleExplorer.html)

选择菜单栏并开始创建您自己的风格。为其他组件设置样式也很有用..

祝你今天过得愉快 - ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-28T22:21:21.750

这是我带来的解决方案。

我创建了一个自定义 MenuItemRenderer，并在 updateDisplayList 函数中添加了以下几行：

```
 this.graphics.clear();
        this.graphics.beginFill(BACKGROUND_COLOR);
        this.graphics.drawRect(-1, -1, unscaledWidth +1, unscaledHeight+2);
        this.graphics.endFill();

        if (Menu(listData.owner).isItemHighlighted(listData.uid)) { 
            this.graphics.clear();
            this.graphics.beginFill(0xb4c5d6);
            this.graphics.drawRect(0,0, unscaledWidth -2, unscaledHeight-1);
            this.graphics.endFill();        
        } 
```

第一部分用于背景，第二部分用于翻转效果。

然后我简单地扩展了标准的 MenuBar 组件并重写了 getMenuAt 函数，如下所示：

```
 override public function getMenuAt(index:int):Menu
    {
        var menu:Menu = super.getMenuAt(index);
        menu.itemRenderer = new ClassFactory(CustomMenuItemRenderer);
        return menu;

    } 
```

可能这不是最好的解决方案，但它是我能想出的唯一一个。我想听听任何可以使它变得更好的人。

谢谢！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-13T21:43:40.583

我想，我找到了更好的选择。

我没有在我的应用程序中使用 mx 列表。所以我只是用这个：

```
mx|List
{
    backgroundColor:#666666;
} 
```

无论如何，我认为您可以使用继承将此 CSS 仅用于您的菜单。

# jquery - 尝试使用负边距删除 CSS 图像网格上的细线

> ID：10743547
> 
> 赞同：1
> 
> 时间：2012-05-24T18:49:12.803
> 
> 标签：jquery, css, html

恐怕这就是我对盒子模型的理解不足的地方。如果您在 Mac 上查看此页面（在 PC 上似乎没有），则图像之间有一条细线。它让我的客户发疯，想知道是否有人可以帮助我了解如何使这些图像 100% 相互对接 - 所以图像之间没有可见的线条。希望这是有道理的。

[http://mkmultimedia.net/labs/mcafee/site/crew.html](http://mkmultimedia.net/labs/mcafee/site/crew.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:08:05.673

我和安迪一样，也在 Firefox (PC) 上看到它（一些图像下方的细线）。我建议删除`margin-bottom: -2px`和设置`li`元素的高度`.crew-fade`和`.crew`（`height: 110px`图像高度）。这似乎为我解决了问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T19:18:23.093

问题出在我的 CSS 重置中：身体有`line-height: 1`.
我将其更改为零并去掉了 LI 上的 -2px 边距。

# c# - SmtpException - 操作已超时

> ID：10743548
> 
> 赞同：4
> 
> 时间：2012-05-24T18:49:23.497
> 
> 标签：c#, smtp

这是我的代码：

```
SmtpClient client = new SmtpClient();
client.UseDefaultCredentials = true;

using (client as IDisposable)
{
    foreach (MailAddress addr in Addresses)
    {
        if (addr != null) 
        {
            try 
            {
                message.To.Clear();
                message.To.Add(addr);
                client.Send(message);
            }
            catch (Exception ex) 
            {
                Log(ex);
            }
            i++;
        }
    }
} 
```

每 100 秒，我记录一条消息说

> 操作已超时。

这是客户端设置还是在实际邮件服务器上？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T19:04:05.657

当您无法连接到 SMTP 服务器时会出现问题，这就是出现此超时消息的原因。因此，当您的客户端无法连接到您的 SMTP 服务器时，此消息会出现在您的客户端上：

100 秒是默认值，如下所述：http: [//msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.timeout.aspx](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.timeout.aspx)

为什么会出现这个问题可能有几个问题，即您需要修复的错误 SMTP 地址、SMTP 拒绝、端口设置、SSL 配置等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-28T18:56:25.160

我也正在经历这个超时。问题似乎是我试图发送的电子邮件只有一个电子邮件地址，但重复了 30 多次（这是一个开发环境，其中真正的收件人电子邮件地址更改为开发人员）。减少这个数字（大约 20 个）解决了这个问题。显然，这是我自己的 SMTP 服务器特有的问题，但如果其他所有方法都失败，则需要查看收件人列表。

# javascript - 在javascript中定义对象

> ID：10743551
> 
> 赞同：1
> 
> 时间：2012-05-24T18:49:43.893
> 
> 标签：javascript, node.js, pug

我用express和jade为sum 3个数字写了一些脚本......

在 index.jade 我有 3 个字段和提交按钮：

```
!!! 5
html
  head
    title Test
  body
    form(name='form1', method='post', action='')
      label(for='1')
      input#1(type='text', name='1')
      label(for='2')
      input#2(type='text', name='2')
      label(for='3')
      input#3(type='text', name='3')
      input(name='submit', type='button', value='submit') 
    span #{result} 
```

在服务器端（js code-node.js）我有这个代码：

```
var express = require('express');
        app = express.createServer();

app.configure(function(){
    app.set('views', __dirname + '/views');
    app.set('view engine', 'jade');
    app.use(express.bodyParser());
    app.use(express.methodOverride());
    app.use(app.router);
    app.use(express.static(__dirname + '/public'));
});
app.use(express.bodyParser());
    app.get('/', function(req, res){
     res.render('index');
    });

    app.post('/', function(req, res){
      var i = req.param('1', null);
      var j = req.param('2', null);
      var k = req.param('3', null);
      var r = i+j+k;
      res.render('index', {result:r});

    });
app.listen(3010); 
```

但是每次我通过节点 app.js 启动 js 文件时，我都会提示该对象未定义，并且玉文件中有一些错误：

如何在 app.js 文件中定义对象？

错误：

```
ReferenceError: C:\Users\PC\glowing-frost-5319/views/index.jade:14
    12\. '      input#3(type=\'text', name='3')
'
    13\. '      input(name=\'submit', type='button', value='submit') 
'
    14\. '    #{result}'

result is not defined
    at Object.<anonymous> (eval at <anonym... etc. 
```

任何人都可以告诉我如何定义对象结果以及如何在 index.jade 页面上显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:25:09.507

我认为您需要将第二个参数中的结果传递给您`get`路线中的渲染方法（就像您已经在`post`路线中所做的那样）。

试试这个：

```
app.get('/', function(req, res){
    res.render('index', {result: ''});
}); 
```

这将使`result`变量在您的视图中可用（在本例中值为空字符串）。

# regex - 正则表达式：从字符串中提取 3 个特定数字 | 例子

> ID：10743552
> 
> 赞同：1
> 
> 时间：2012-05-24T18:49:47.403
> 
> 标签：regex

给定以下 2 行字符串，例如：

```
May 22 00:46:38.340  prod-lab03c-rd1 fpc4 XETH(4/2): %PFE-6: Link 0 XFP: Low Rx power warning set
[May 24 11:24:28.299 LOG: Notice] MIC(0/1) link 1 SFP receive power low  warning set 
```

我想将以下数字存储在 3 个变量中：

```
[1] the 1st number after the "(", it could be 1 or more digits
[2] the 1st number after the "/", it could be 1 or more digits
[3] the first number after the "(L|l)ink" word, it could be 1 or more digits 
```

你能帮我解决这个问题吗？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T18:55:14.697

要获得第一个之后的第一个数字`(`，我们可以使用`.*\((\d+)`. 然后要得到 之后的第一个数字`/`，我们可以使用`/(\d+)\)`. 然后获取 "link": 之后的第一个数字`[lL]ink (\d+)`。我们把这些放在一起得到

```
^.*\((\d+)/(\d+)\).*[lL]ink (\d+) 
```

这三个数字将在三个组中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T18:52:58.897

这在这里有效

```
\((.*?)/(.*?)\).*?[Ll]ink (\d+) 
```

给你的输入它会回馈

```
group 1  group 2 group 3
4        2       0
0        1       1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T19:08:01.867

Perl 中经过完整测试的示例：

```
#!/usr/bin/env perl

use strict;
use warnings;

my @a;

$a[0] = "May 22 00:46:38.340  prod-lab03c-rd1 fpc4 XETH(4/2): %PFE-6: Link 0 XFP: Low Rx power warning set\n";
$a[1] = "[May 24 11:24:28.299 LOG: Notice] MIC(0/1) link 1 SFP receive power low  warning set";

foreach (@a) {
    print "\$1=$1|\$2=$2|\$3=$3\n" if m!\((\d+)/(\d+)\).*?(?:L|l)ink\s+(\d+)!;
} 
```

输出 ：

```
$1=4|$2=2|$3=0
$1=0|$2=1|$3=1 
```

# ruby-on-rails-3 - Rails 3: Pass options to model method

> ID：10743554
> 
> 赞同：0
> 
> 时间：2012-05-24T18:49:55.750
> 
> 标签：ruby-on-rails-3, rails-models

This is my Model (Subscription) Method:

```
 def activation_codes(options = {})
    if options[:first]
      self.group.group_codes.first
    else
      self.group.group_codes
    end
  end 
```

I am trying to call to this method in this fashion:

```
sub = Subscription.where(:subscription_limit => -1).first
sub.activation_codes {:first} 
```

For some reason the `else`is being evaluated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:30:18.667

You need to pass `Hash` to method `activation_codes` in order to make it work as expected, like:

```
sub.activation_codes({:first => 'some value'}) 
```

but you're currently passing `Symbol` instead.

# ruby-on-rails - 重新加载 JavaScript

> ID：10743556
> 
> 赞同：1
> 
> 时间：2012-05-24T18:49:58.043
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想在应用程序在服务器上运行时发生更改后重新加载 JS 文件。有任何想法吗？

# android - 如何在eclipse中导入示例Actionbarsherlock项目并使用它们

> ID：10743562
> 
> 赞同：4
> 
> 时间：2012-05-24T18:50:15.170
> 
> 标签：android, actionbarsherlock

我想导入一些ABS工具包自带的示例项目，如何在Eclipse中导入和使用。我使用 Github 插件下载了 ABS 库。如果我通过正常的导入向导给出目录路径，它会说没有找到 Android 项目。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T19:16:47.690

不要使用导入菜单向导。创建一个新的 Android 项目并选择“来自现有源”选项。此外，请确保您从 Workspace 目录之外加载它（意思是，不要将源代码复制到 Workspace 的任何级别的目录中）。

跟随这个人，你会被设置：

[http://www.youtube.com/watch?v=avcp6eD_X2k](http://www.youtube.com/watch?v=avcp6eD_X2k)

# algorithm - SWI Prolog 中的刽子手游戏

> ID：10743564
> 
> 赞同：1
> 
> 时间：2012-05-24T18:50:18.010
> 
> 标签：algorithm, prolog

我正在尝试在 SWI Prolog 中制作一个简单的刽子手游戏。
既然我们让这个程序运行，你能帮我用以下方法增强程序吗：

***1）***通过跟上到目前为止已经猜到的字母。如果用户猜到了一个已经猜到的字母，程序应该说“你猜到了！” 然后继续游戏。

***2）***最后，添加一个计数器，计算错误猜测的次数，并在达到一定数量时退出游戏。程序应该告诉用户他们输了，显示这句话的真正含义，然后终止。重复的猜测不应被视为错误。

**我要感谢迄今为止帮助过我的所有人。这对我来说意义重大。**

我为您提供代码和注释。

```
% This top-level predicate runs the game.  It prints a 
% welcome message, picks a phrase, and calls getGuess.

% Ans = Answer
% AnsList = AnswerList

hangman:- 
    getPhrase(Ans), 
    !, 
    write('Welcome to hangman.'),
    nl,
    name(Ans,AnsList), 
    makeBlanks(AnsList, BlankList), 
    getGuess(AnsList,BlankList).

% Randomly returns a phrase from the list of possibilities.

getPhrase(Ans):-
    phrases(L), 
    length(L, X), 
    R is random(X), 
    N is R+1, 
    getNth(L, N, Ans).

% Possible phrases to guess.

phrases(['a_picture_is_worth_a_thousand_words','one_for_the_money','dead_or_alive','computer_science']).

% Asks the user for a letter guess.  Starts by writing the 
% current "display phrase" with blanks, then asks for a guess and
% calls process on the guess.

getGuess(AnsList, BlankList):- 
    name(BlankName, BlankList), 
    write(BlankName), 
    nl,  
    write('Enter your guess, followed by a period and return.'), 
    nl, 
    read(Guess),
    !, 
    name(Guess, [GuessName]), 
    processGuess(AnsList,BlankList,GuessName).

% Process guess takes a list of codes representing the answer, a list of codes representing the current
% "display phrase" with blanks in it, and the code of the letter that was just guessed.  If the guess
% was right, call substitute to put the letter in the display phrase and check for a win.  Otherwise, just
% get another guess from the user.

processGuess(AnsList,BlankList,GuessName):- 
    member(GuessName,AnsList), 
    !,
    write('Correct!'),
    nl, 
    substitute(AnsList, BlankList, GuessName, NewBlanks), 
    checkWin(AnsList,NewBlanks).

processGuess(AnsList, BlankList,_):-
    write('Nope!'),
    nl,
    getGuess(AnsList, BlankList).

% Check to see if the phrase is guessed.  If so, write 'You win' and if not, go back and get another guess.

checkWin(AnsList, BlankList):- 
    name(Ans, AnsList), 
    name(BlankName, BlankList), 
    BlankName = Ans, 
    !, 
    write('You win!').

checkWin(AnsList, BlankList):- 
    !,
    getGuess(AnsList, BlankList).

% getNth(L,N,E) should be true when E is the Nth element of the list L. N will always
% be at least 1.

getNth([H|T],1,H).

getNth([H|T],N,E):-
    N1 is N-1,
    getNth(T,N1,E1),
    E=E1.

% makeBlanks(AnsList, BlankList) should take an answer phrase, which is a list
% of character codes that represent the answer phrase, and return a list
% where all codes but the '_' turn into the code for '*'.  The underscores
% need to remain to show where the words start and end.  Please note that 
% both input and output lists for this predicate are lists of character codes.
% You can test your code with a query like this:
% testMakeBlanks:- name('csc_is_awesome', List), makeBlanks(List, BlankList), name(Towrite, BlankList), write(Towrite). 

makeBlanks(AnsCodes, BlankCodes) :-
  maplist(answer_blank, AnsCodes, BlankCodes).

answer_blank(Ans, Blank) :-
  Ans == 0'_ -> Blank = Ans ; Blank = 0'* .

% substitute(AnsList, BlankList, GuessName, NewBlanks) Takes character code lists AnsList and BlankList, 
% and GuessName, which is the character code for the guessed letter.  The NewBlanks should again be a 
% character code list, which puts all the guesses into the display word and keeps the *'s and _'s otherwise.
% For example, if the answer is 'csc_is_awesome' and the display is 'c*c_**_*******' and the guess is 's', the 
% new display should be 'csc_*s_***s***'.
% You can test your predicate with a query like this:
% testSubstitute:- name('csc_is_awesome', AnsList), name('c*c_**_*******', BlankList), name('s',[GuessName]), substitute(AnsList, BlankList, GuessName, NewBlanks),
%    name(Towrite, NewBlanks), write(Towrite). 

% Also, since the predicate doesn't deal directly with character codes, this should also work:
% substitute(['c','s','c'],['c','*','c'],'s',L).  L should be ['c','s','c'].

substitute(AnsCodes, BlankCodes, GuessName, NewBlanks) :-
     maplist(place_guess(GuessName), AnsCodes, BlankCodes, NewBlanks).

place_guess(Guess, Ans, Blank, Display) :-
    Guess == Ans -> Display = Ans ; Display = Blank. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T20:06:21.020

[maplist](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%27A.2%27,swi%28%27/doc/Manual/apply.html%27%29%29) /3 和 maplist/4 将他们的第一个参数（适当数量的谓词）应用于其他参数列表的所有元素，那么你的 makeBlanks 可能是：

```
makeBlanks(AnsCodes, BlankCodes) :-
  maplist(answer_blank, AnsCodes, BlankCodes).

answer_blank(Ans, Blank) :-
  Ans == 0'_ -> Blank = Ans ; Blank = 0'* . 
```

并替代：

```
substitute(AnsCodes, BlankCodes, GuessName, NewBlanks) :-
     maplist(place_guess(GuessName), AnsCodes, BlankCodes, NewBlanks).

place_guess(Guess, Ans, Blank, Display) :-
    Guess == Ans -> Display = Ans ; Display = Blank. 
```

**编辑**：

关于额外的请求：1）可以用额外的谓词来解决：

```
alreadyGuessed(Guess, AnsCodes) :-
   memberchk(Guess, AnsCodes). 
```

while 考虑 2)`getGuess`并`processGuess`一起创建一个循环，当不再发生调用时它将终止。删除 checkWin 的最后一条规则，添加一个参数作为计数器来跟踪失败的猜测，并扩展 processGuess 以发出失败信号：

```
processGuess(AnsList, BlankList, _, CountFailed) :-
  (   CountFailed == 5
  ->  format('Sorry, game over. You didn\'t guess (~s)~n', [AnsList])
  ;   write('Nope!'),
      CountFailed1 is CountFailed + 1,
      getGuess(AnsList, BlankList, CountFailed1)
  ). 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T01:46:41.180

为什么要砍这么多？查看可能对您有用的 SWI 库谓词：memberchk/2、format/2 和 nth1/3。

# c# - 查找并用新行替换 ASCII 字符

> ID：10743571
> 
> 赞同：2
> 
> 时间：2012-05-24T18:50:37.670
> 
> 标签：c#, .net, string, replace

我正在尝试查找字符串中每个出现的 ASCII 字符并将其替换为新行。这是我到目前为止所拥有的：

```
public string parseText(string inTxt)
{
    //String builder based on the string passed into the method
    StringBuilder n = new StringBuilder(inTxt);
    //Convert the ASCII character we're looking for to a string
    string replaceMe = char.ConvertFromUtf32(187);
    //Replace all occurences of string with a new line
    n.Replace(replaceMe, Environment.NewLine);
    //Convert our StringBuilder to a string and output it
    return n.ToString();
} 
```

这不会添加新行，并且字符串都保留在一行上。我不确定这里有什么问题。我也试过这个，但结果相同：

```
n.Replace(replaceMe, "\n"); 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-24T18:53:04.840

`char.ConvertFromUtf32`，虽然正确，但不是基于 ASCII 数值读取字符的最简单方法。（`ConvertFromUtf32`主要用于位于 BMP 之外的 Unicode 代码点，这会导致代理对。这不是您在英语或大多数现代语言中遇到的情况。）相反，您应该使用`(char)`.

```
char c = (char)187;
string replaceMe = c.ToString(); 
```

当然，您可以在代码中将带有所需字符的字符串定义为文字：`"»"`.

然后您`Replace`将简化为：

```
n.Replace("»", "\n"); 
```

最后，在技术层面上，ASCII 仅涵盖值在 0-127 范围内的字符。字符 187 不是 ASCII；但是，它对应`»`于 ISO 8859-1、Windows-1252*和*Unicode，它们是迄今为止最流行的编码。

**编辑**：我刚刚测试了您的原始代码，发现它确实有效。您确定结果保留在一行上吗？调试器在单行视图中呈现字符串的方式可能存在问题：

![没有换行符？](../Images/b0cd56a7599180ba44217a25fce8c775.png)

请注意，尽管显示为文字，但这些`\r\n`序列实际上*确实代表换行符。*您可以从多行显示中检查这一点（通过单击放大镜）：

![换行符！](../Images/fe2545f46c606d5a612ccb92b58dd6c4.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T18:55:27.300

[`StringBuilder.Replace`](http://msdn.microsoft.com/en-us/library/93tx8bdw.aspx)`StringBuilder`用所做的更改返回一个新的。奇怪，我知道，但这应该有效：

```
StringBuilder replaced = n.Replace(replaceMe, Environment.NewLine);

return replaced.ToString(); 
```

# apache - Hostmonster apache fcgi 上的 Redmine 2：Rails 应用程序无法正常启动

> ID：10743577
> 
> 赞同：2
> 
> 时间：2012-05-24T18:50:59.320
> 
> 标签：apache, .htaccess, redmine, fastcgi, hostmonster

**在配置**部分之前，我一直按照[安装说明](http://www.redmine.org/projects/redmine/wiki/RedmineInstall)在 hostmonster 上安装 redmine 2。运行 domain.com/redmine 时总是出现 500 错误

 **```
Rails application failed to start properly 
```

**我在log/production.log**中没有任何关于此错误的日志。这是文件：

```
OpenIdAuthentication.store is nil. Using in-memory store.
Creating scope :open. Overwriting existing method Version.open.
Creating scope :active. Overwriting existing method User.active.
DEPRECATION WARNING: The InstanceMethods module inside ActiveSupport::Concern will be no longer included automatically. Please define instance methods directly in CollectiveIdea::Acts::NestedSet::Model instead. (called from include at /home1/iptechin/rails_apps/redmine200/lib/plugins/awesome_nested_set/lib/awesome_nested_set/awesome_nested_set.rb:58)
DEPRECATION WARNING: The InstanceMethods module inside ActiveSupport::Concern will be no longer included automatically. Please define instance methods directly in CollectiveIdea::Acts::NestedSet::Model instead. (called from include at /home1/iptechin/rails_apps/redmine200/lib/plugins/awesome_nested_set/lib/awesome_nested_set/awesome_nested_set.rb:58)
Creating scope :open. Overwriting existing method Issue.open.
Migrating to Setup (1)
Migrating to IssueMove (2)
Migrating to IssueAddNote (3)
Migration lines...........................etc.........
Migrating to AddAuthSourcesFilter (20120301153455)
Migrating to ChangeRepositoriesToFullSti (20120422150750)
OpenIdAuthentication.store is nil. Using in-memory store.
Creating scope :open. Overwriting existing method Version.open.
Creating scope :active. Overwriting existing method User.active.
DEPRECATION WARNING: The InstanceMethods module inside ActiveSupport::Concern will be no longer included automatically. Please define instance methods directly in CollectiveIdea::Acts::NestedSet::Model instead. (called from include at /home1/iptechin/rails_apps/redmine200/lib/plugins/awesome_nested_set/lib/awesome_nested_set/awesome_nested_set.rb:58)
DEPRECATION WARNING: The InstanceMethods module inside ActiveSupport::Concern will be no longer included automatically. Please define instance methods directly in CollectiveIdea::Acts::NestedSet::Model instead. (called from include at /home1/iptechin/rails_apps/redmine200/lib/plugins/awesome_nested_set/lib/awesome_nested_set/awesome_nested_set.rb:58)
Creating scope :open. Overwriting existing method Issue.open. 
```

我的 redmine 应该与 fcgi 一起使用，所以这是我的**public/.htaccess**：

```
# General Apache options
<IfModule mod_fastcgi.c>
    AddHandler fastcgi-script .fcgi
</IfModule>
<IfModule mod_fcgid.c>
AddHandler fcgid-script .fcgi
</IfModule>
<IfModule mod_cgi.c>
AddHandler cgi-script .cgi
</IfModule>
Options +SymLinksIfOwnerMatch +ExecCGI

RewriteEngine On

RewriteRule ^$ index.html [QSA]
RewriteRule ^([^.]+)$ $1.html [QSA]
RewriteCond %{REQUEST_FILENAME} !-f
<IfModule mod_fastcgi.c>
RewriteRule ^(.*)$ dispatch.fcgi [QSA,L]
</IfModule>
<IfModule mod_fcgid.c>
RewriteRule ^(.*)$ dispatch.fcgi [QSA,L]
</IfModule>
<IfModule mod_cgi.c>
RewriteRule ^(.*)$ dispatch.cgi [QSA,L]
</IfModule>

ErrorDocument 500 "<h2>Application error</h2>Rails application failed to start properly" 
```

这是我的**public/dispatch.fcgi**：

```
#!/usr/bin/env ruby

require File.dirname(__FILE__) + '/../config/boot'
require File.dirname(__FILE__) + '/../config/environment'

class Rack::PathInfoRewriter
  def initialize(app)
    @app = app
  end

  def call(env)
    env.delete('SCRIPT_NAME')
    parts = env['REQUEST_URI'].split('?')
    env['PATH_INFO'] = parts[0]
    env['QUERY_STRING'] = parts[1].to_s
    @app.call(env)
  end
end

Rack::Handler::FastCGI.run Rack::PathInfoRewriter.new(RedmineApp::Application) 
```

有没有配置错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:00:41.883

是否安装了所有正确的宝石？

这是我的 dispatch.fcgi ：

```
 #!/usr/bin/ruby
   #
   # You may specify the path to the FastCGI crash log (a log of unhandled
   # exceptions which forced the FastCGI instance to exit, great for debugging)
   # and the number of requests to process before running garbage collection.
   #
   # By default, the FastCGI crash log is RAILS_ROOT/log/fastcgi.crash.log
   # and the GC period is nil (turned off).  A reasonable number of requests
   # could range from 10-100 depending on the memory footprint of your app.
   #
   # Example:
   #   # Default log path, normal GC behavior.
   #   RailsFCGIHandler.process!
   #
   #   # Default log path, 50 requests between GC.
   #   RailsFCGIHandler.process! nil, 50
   #
   #   # Custom log path, normal GC behavior.
   #   RailsFCGIHandler.process! '/var/log/myapp_fcgi_crash.log'
   #
   require File.dirname(__FILE__) + "/../config/environment"
   require 'fcgi_handler'

   RailsFCGIHandler.process! 
```

和我的 .htaccess

```
# General Apache options
<IfModule mod_fastcgi.c>
    AddHandler fastcgi-script .fcgi
</IfModule>
<IfModule mod_fcgid.c>
#   AddHandler fcgid-script .fcgi
</IfModule>
<IfModule mod_cgi.c>
#   AddHandler cgi-script .cgi
</IfModule>
# For security reasons, Option followsymlinks cannot be overridden.
#Options +FollowSymLinks +ExecCGI
Options +SymLinksIfOwnerMatch +ExecCGI

# If you don't want Rails to look in certain directories,
# use the following rewrite rules so that Apache won't rewrite certain requests
#
# Example:
#   RewriteCond %{REQUEST_URI} ^/notrails.*
#   RewriteRule .* - [L]

# Redirect all requests not available on the filesystem to Rails
# By default the cgi dispatcher is used which is very slow
#
# For better performance replace the dispatcher with the fastcgi one
#
# Example:
#   RewriteRule ^(.*)$ dispatch.fcgi [QSA,L]
RewriteEngine On

# If your Rails application is accessed via an Alias directive,
# then you MUST also set the RewriteBase in this htaccess file.
#
# Example:
#   Alias /myrailsapp /path/to/myrailsapp/public
#   RewriteBase /myrailsapp

Options -MultiViews
PassengerResolveSymlinksInDocumentRoot on
#Change to your environment
RailsEnv production

RewriteBase /
RewriteRule ^$ index.html [QSA]
RewriteRule ^([^.]+)$ $1.html [QSA]
RewriteCond %{REQUEST_FILENAME} !-f
<IfModule mod_fastcgi.c>
    RewriteRule ^(.*)$ dispatch.fcgi [QSA,L]
</IfModule>
<IfModule mod_fcgid.c>
    RewriteRule ^(.*)$ dispatch.fcgi [QSA,L]
</IfModule>
<IfModule mod_cgi.c>
    RewriteRule ^(.*)$ dispatch.cgi [QSA,L]
</IfModule>

# In case Rails experiences terminal errors
# Instead of displaying this message you can supply a file here which will be rendered instead
#
# Example:
#   ErrorDocument 500 /500.html

ErrorDocument 500 "<h2>Application error</h2>Rails application failed to start properly"
#RewriteCond %{HTTP_HOST} ^redmine.acme-tech.net$ [OR]
#RewriteCond %{HTTP_HOST} ^www.redmine.acme-tech.net$
#RewriteRule ^(.*)$ "http\:\/\/127\.0\.0\.1\:12018\/$1" [P,L] 
```

希望能帮助到你

gj。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-28T13:39:11.420

这是一个宝石路径问题。由于[没有加载这样的文件——Rails 3.2 中的 bundler/setup with Passenger](https://stackoverflow.com/questions/10499364/no-such-file-to-load-bundler-setup-in-rails-3-2-with-passenger)我在 /public/.htaccess 中添加了这一行：

```
SetEnv GEM_PATH /path-to-ruby-gems/ruby/gems 
```**

# c# - 如何从加密字符串中检索 IV，然后使用 AES128 解密该字符串

> ID：10743581
> 
> 赞同：0
> 
> 时间：2012-05-24T18:51:20.540
> 
> 标签：c#, encryption

我对加密知之甚少，但我的目标本质上是解密字符串。我已获得 AES(128) 密钥。

但是，我必须从加密字符串中检索 IV，即前 16 位。

这是salesforce的文档以获取更多信息（如果我解释的内容不正确）

> 使用指定的算法和私钥加密 blob *clearText 。*当您希望 Salesforce 为您生成初始化向量时，请使用此方法。它存储为加密 blob 的前 128 位（16 个字节）

[http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_classes_restful_crypto.htm](http://www.salesforce.com/us/developer/docs/apexcode/Content/apex_classes_restful_crypto.htm) (encryptWithManagedIV)

为了检索 IV，我尝试过这样的事情（虽然我不相信这是正确的）：

```
public string retrieveIv()
        {
            string iv = "";
            string input = "bwZ6nKpBEsuAKM8lDTYH1Yl69KkHN1i3XehALbfgUqY=";
            byte[] bytesToEncode = Encoding.UTF8.GetBytes(input);

            for(int i = 0; i <= 15; i++){
                iv += bytesToEncode[i].ToString(); ;
            }

            return iv;
        } 
```

（只需忽略输入是硬编码且未参数化的事实；更易于测试）

然后使用此[问题](https://stackoverflow.com/questions/202011/encrypt-decrypt-string-in-net "问题")的最佳答案来解密字符串

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T18:56:29.243

IV 不应该表示为字符串 - 它应该是字节数组，根据[`AesManaged.IV`property](http://msdn.microsoft.com/en-us/library/system.security.cryptography.aesmanaged.iv.aspx)。

此外，使用`Encoding.UTF8`几乎肯定是错误的。我怀疑你想要：

```
public static byte[] RetrieveIv(string encryptedBase64)
{
    // We don't need to base64-decode everything... just 16 bytes-worth
    encryptedBase64 = encryptedBase64.Substring(0, 24);

    // This will be 18 bytes long (4 characters per 3 bytes)
    byte[] encryptedBinary = Convert.FromBase64String(encryptedBase64);
    byte[] iv = new byte[16];

    Array.Copy(encryptedBinary, 0, iv, 0, 16);
    return iv;
} 
```

# f# - 序列的自动枚举

> ID：10743590
> 
> 赞同：5
> 
> 时间：2012-05-24T18:51:47.140
> 
> 标签：f#, sequences

是否有标准函数来枚举像 Python 的[enumerate()](http://docs.python.org/library/functions.html#enumerate)一样工作的 F# 序列？

从头开始编写非常容易：

```
let enumerate (sq : seq<'T>) = seq {
    let rec loop (e : IEnumerator<'T>) index = seq {
        if e.MoveNext() then 
            yield (index, e.Current)
            yield! loop e (index+1) 
    }

    use enum = sq.GetEnumerator()
    yield! loop enum 0
    } 
```

但我不想重新发明轮子。

PS：也，我试过了

```
let seasons = ["Spring"; "Summer"; "Fall"; "Winter"]
for x in Seq.zip [0..100000] seasons do
    printfn "%A" x 
```

但这`[0..10000]`部分看起来很难看。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T18:54:52.650

我想也许你想要`Seq.mapi`或`Seq.iteri`。

[http://msdn.microsoft.com/en-us/library/ee340431.aspx](http://msdn.microsoft.com/en-us/library/ee340431.aspx)

[http://msdn.microsoft.com/en-us/library/ee370541](http://msdn.microsoft.com/en-us/library/ee370541)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-18T00:17:32.960

这就是你想要的：

```
module Seq =
    let inline enumerate source = Seq.mapi (fun i x -> i,x) source

> ["a"; "b"] |> Seq.enumerate;;
val it : seq<int * string> = seq [(0, "a"); (1, "b")] 
```

或 FSharpx 的 Hot 'n Spicy：

```
let enumerate source = Seq.mapi (curry id) source 
```

好吧，实际上，在 FSharpx 中，它已经可以作为`Seq.index`.

# jquery - tinyscrollbar 轴 X 在 tinyscrollbar 轴 Y 内

> ID：10743593
> 
> 赞同：1
> 
> 时间：2012-05-24T18:51:58.163
> 
> 标签：jquery, tinyscrollbar

我有垂直滚动的 DIV1 (#scrollbar1)。我想在 DIV1 (#scrollbar1) 内包含一个 DIV2 (#scrollbar2)，其中滚动是水平的。我都使用 Tinyscrollbar 插件。

代码例如：

```
<script type="javascript">
     $('#scrollbar1').tinyscrollbar(); /* DIV1 */

     var scr2 = $('#scrollbar2'); /* DIV2 */
     if(src2.length > 0) {
          src2.tinyscrollbar({ axis: x });
     }
     $('#scrollbar2').
</script>

<!-- HTML -->
<div id="scrollbar1">     <!-- here is the DIV1 -->
<div class="scrollbar"><div class="thumb"></div></div>
<div class="viewport">
<div class="overview">

     <div id="scrollbar2">     <!-- here is the DIV2 -->
     <div class="scrollbar"><div class="thumb"></div></div>
     <div class="viewport">
     <div class="overview">

          CONTENT 

     </div><!-- .overview -->
     </div><!-- .viewport -->
     </div><!-- #scrollbar2 -->

</div><!-- .overview -->
</div><!-- .viewport -->
</div><!-- #scrollbar1 --> 
```

这可能吗 ？

# jquery - 将变量从 JQuery Ajax 发送到 ASP 并返回

> ID：10743595
> 
> 赞同：0
> 
> 时间：2012-05-24T18:52:37.687
> 
> 标签：jquery, ajax, asp-classic

我有一个包含各种 docId 的列表。当要提交信息时，将调用一个 JQuery 函数，然后收集所有列表值。然后，我需要通过 Ajax 将这些列表值发送到经典 ASP 页面，在该页面中对这些值进行格式化，然后将其发送回原始页面，然后填充文本区域。这是我的 JQuery 代码：

```
$("#create").click(function() {

    var strDocIDs = $.map($('.doc_list:visible').find('li[value]'), function(li) { return $(li).attr("value") }).join(",");
    alert(strDocIDs);

    $.ajax({
           type: "GET",
           url: "newslettercreate_action.asp",
           data: { strDocIDS: strDocIDs },
           success: function(result) {
               var newsletter_string = $(result);
               $("#scratch").val(newsletter_string);
               }
        }); 
}); 
```

还有我的 ASP 代码：

```
result = Request("strDocIDs") 
```

我返回到我的文本区域的信息是：

```
[object Object] 
```

我的表单方法当前设置为 POST。我使用提交按钮还是使用传统按钮来触发该功能是否重要？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T18:57:08.837

因为您将响应包装在其中`$`，它变成了 and `object`。如果您的 ASP 页面返回一些内容，则删除该行即可。

而且我相信您可能希望通过调用 thte`preventDefault`方法来停止按钮单击的默认行为

```
$(function(){

   $("#create").click(function(e) {
      e.preventDefault();

      var strDocIDs = $.map($('.doc_list:visible').find('li[value]'), function(li) { return $(li).attr("value") }).join(",");
      alert(strDocIDs);

       $.ajax({
           type: "GET",
           url: "newslettercreate_action.asp",
           data: { strDocIDS: strDocIDs },
           success: function(result) {              
              $("#scratch").val(result);
            }
       });
   });

}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T18:57:29.623

的结果`$(result)`是一个 jQuery 结果对象。当您尝试将其设置为 时`.val()`，JavaScript 引擎会将其序列化为`[object Object]`.

所以问题是，`result`应该包含什么？是文字吗？JSON？HTML？该问题的答案将推动注入它的正确方法。

如果它只是一个字符串，那么应该这样做：

```
$("#scratch").val(result); 
```

# javascript - 为什么某些函数调用在 JavaScript 中被称为“非法调用”？

> ID：10743596
> 
> 赞同：120
> 
> 时间：2012-05-24T18:52:38.677
> 
> 标签：javascript, invocation

例如，如果我这样做：

```
var q = document.querySelectorAll;

q('body'); 
```

我在 Chrome 中收到“非法调用”错误。我想不出任何理由为什么这是必要的。一方面，并​​非所有本机代码功能都如此。事实上我可以这样做：

```
var o = Object; // which is a native code function

var x = new o(); 
```

一切正常。特别是我在处理文档和控制台时发现了这个问题。有什么想法吗？

* * *

## 回答 #1

> 赞同：194
> 
> 时间：2012-05-24T18:53:29.630

这是因为您丢失了函数的“上下文”。

你打电话时：

```
document.querySelectorAll() 
```

该函数的上下文是`document`，并且可以`this`通过该方法的实现来访问。

当您只是调用时`q`，不再有上下文 - 它是“全局”`window`对象。

`querySelectorAll`尝试使用的实现，`this`但它不再是一个 DOM 元素，它是一个`Window`对象。该实现尝试调用对象上不存在的 DOM 元素的某些方法，`Window`而解释器不出所料地调用了错误。

要解决此问题，请`.bind`在较新版本的 Javascript 中使用：

```
var q = document.querySelectorAll.bind(document); 
```

这将确保所有后续调用`q`都具有正确的上下文。如果你还没有`.bind`，使用这个：

```
function q() {
    return document.querySelectorAll.apply(document, arguments);
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-08-07T12:12:49.560

在我的情况下，由于将未声明的变量作为参数传递而发生非法调用。确保在传递给函数之前声明变量。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2018-05-08T03:42:31.357

你可以这样使用：

```
let qsa = document.querySelectorAll;
qsa.apply(document,['body']); 
```

# c++ - 类的只读成员变量

> ID：10743597
> 
> 赞同：4
> 
> 时间：2012-05-24T18:52:47.093
> 
> 标签：c++, c++11

受此[答案](https://stackoverflow.com/a/5424521/939266)的启发，我将以下解决方案用于只读成员变量：

```
template <class T, class OWNER>
class readonly
{
    friend OWNER;

public:
    explicit readonly(const T &t) : m_t(t)
    {
    }

    ~readonly()
    {
    }

    operator const T&() const
    {
        return m_t;
    }

private:
    T& operator =(const T &t)
    {
        m_t = t; 
        return m_t;
    }

    T m_t;
}; 
```

效果很好，为了稍微优化性能，我这样使用它：

```
class A
{
public:
    A()
    {
    }

    ~A()
    {
    }

#ifdef _DEBUG     // DON'T USE THIS SWITCH, SEE ANSWERS BELOW!
    readonly<int, A> m_x, m_y;
#else
    int m_x, m_y;
#endif
}; 
```

但是，我很想消除检查我们是否在进行调试或发布构建的预编译器开关......有没有人看到使用宏或聪明的模板技巧的解决方案？

编辑：我已经在一个循环中检查了性能，它使用 VS2010 会产生大约 15~20% 的开销。它不会产生相同的代码，启用自动内联。

编辑#2：我创建了一个单元测试，消除了所有其他的东西。我已经没有性能损失了，太好了，毕竟没有问题。谢谢您的帮助！而且我已经修复了构造函数，很好的调用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T18:56:13.030

您的优化是无用的，将产生完全相同的代码。所有这些`readonly`都是微不足道的，并且将被内联，消除了使用原始 T 可能产生的任何开销。因此，解决方案是不修复不存在的问题，`readonly<int, A>`而不管这是否是调试构建，都只使用。

正如@MooingDuck 所指出的，您应该将构造函数更改为使用 init 列表（并且可能也使其显式）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T18:56:03.563

使用辅助元函数：

```
template< typename T, typename Owner >
struct make_read_only
{
#ifdef _DEBUG
    typedef readonly< T, Owner > type;
#else
    typedef T type;
#endif
}; 
```

并将您的成员声明更改为：

```
make_read_only< int, A >::type; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T19:26:37.887

你的方法对我来说是一个很大的问题：它可以在 DEBUG 和 RELEASE 模式下生成不同的代码。在这里我考虑的不是*性能*，而是*语义*。如果优化器无法生成等效的二进制文件，我会感到惊讶。

在 DEBUG 版本中，每当使用元素时都需要用户定义的转换，但在 RELEASE 中，该转换被丢弃，这反过来可以启用不同的用户定义的转换，并导致在成员属性时选择不同的重载作为参数传递给函数。

虽然可能不是一种常见的情况，但如果您确实遇到了它，您将在尝试确定为什么应用程序在 RELEASE 中始终失败但您无法使用您的 DEBUG 版本对其进行调试时会遇到很多调试痛苦......

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T18:56:45.560

const 修饰符没有性能方面的问题。给定一个好的优化器，你的调试和发布版本将产生相同的代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-01T01:10:39.630

这是一个稍微不同的看法。如果您想要一个只读变量但不希望客户端必须更改他们访问它的方式，请尝试使用这个模板类：

```
template<typename MemberOfWhichClass, typename primative>                                       
class ReadOnly {
    friend MemberOfWhichClass;
public:
    inline operator primative() const                 { return x; }

    template<typename number> inline bool   operator==(const number& y) const { return x == y; } 
    template<typename number> inline number operator+ (const number& y) const { return x + y; } 
    template<typename number> inline number operator- (const number& y) const { return x - y; } 
    template<typename number> inline number operator* (const number& y) const { return x * y; }  
    template<typename number> inline number operator/ (const number& y) const { return x / y; } 
    template<typename number> inline number operator<<(const number& y) const { return x <<y; }
    template<typename number> inline number operator>>(const number& y) const { return x >> y; }
    template<typename number> inline number operator^ (const number& y) const { return x ^ y; }
    template<typename number> inline number operator| (const number& y) const { return x | y; }
    template<typename number> inline number operator& (const number& y) const { return x & y; }
    template<typename number> inline number operator&&(const number& y) const { return x &&y; }
    template<typename number> inline number operator||(const number& y) const { return x ||y; }
    template<typename number> inline number operator~() const                 { return ~x; }

protected:
    template<typename number> inline number operator= (const number& y) { return x = y; }       
    template<typename number> inline number operator+=(const number& y) { return x += y; }      
    template<typename number> inline number operator-=(const number& y) { return x -= y; }      
    template<typename number> inline number operator*=(const number& y) { return x *= y; }      
    template<typename number> inline number operator/=(const number& y) { return x /= y; }      
    template<typename number> inline number operator&=(const number& y) { return x &= y; }
    template<typename number> inline number operator|=(const number& y) { return x |= y; }
    primative x;                                                                                
}; 
```

使用示例：

```
class Foo {
public:
    ReadOnly<Foo, int> x;
}; 
```

现在你可以访问 Foo.x，但你不能改变 Foo.x！请记住，您还需要添加按位和一元运算符！这只是一个让您入门的示例

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-06-11T08:35:56.953

我更喜欢这两种解决方案。

第一个使用**private**和**inline**：

```
class A
{
    public:
        inline int GetI();
        {
            return i;
        }

    private:
        int i;
} 
```

第二个使用**const**和**const_cast**：

```
class A
{
    public:
        const int I;

        void SetI(int newI)
        {
            //Verify newI or something.

            const_cast<int>(I) = newI;
        }
} 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2012-05-24T18:58:27.183

我不是 100% 确定，但看起来不可能用模板来做到这一点。因为模板无法读取预处理器变量。为了使您的代码更具可读性，您可以定义像 READONLY_INT 这样的宏并在其他 .h 文件中声明它。

# php - 组合两个 PHP 对象（类）

> ID：10743600
> 
> 赞同：1
> 
> 时间：2012-05-24T18:53:00.203
> 
> 标签：php, class, object

我正在开发一个需要许多单独的对象（类）才能协同工作的项目。我已经想出了解决问题的方法，但我只是想听听其他观点，因为我觉得我错过了一些东西。

所以本质上，我有一个访问者和一个位置类，每个都被初始化并存储在一个变量中，例如 $visitor 和 $location; 两者都具有访问者独有的数据和页面调用中引用的位置。

我想要/需要做的基本上是建立一个“桥梁”，这样我就可以调用一个会影响这两个对象的方法。例如，我希望能够调用 $bridge->favorite(); 除了增加该位置的收藏夹数量外，它还将将该收藏夹引用添加到访问者的个人资料中。

我现在所做的基本上是架起了一座桥梁：

```
$bridge = new Bridge($locationclass, $visitorclass);
$bridge->favorite(); 
```

所以它本质上用最喜欢的方法调用了我拥有的另一个类“bridge”，然后将使用已经设置的两个类。我认为这是一个不错的解决方案，但我觉得我错过了一个更好的解决方案。

所有输入将非常有帮助，感谢您的宝贵时间！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T18:56:45.303

如果你需要做这种事情，那就意味着你的应用程序设计得不好。

要回答您的示例，您只需将位置添加到访问者最喜欢的地方即可。
如果您想计算某个位置被添加到收藏夹的次数，请**计算**有多少访问者将其添加到收藏夹中。不要存储两次相同的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T18:59:40.607

```
class Bridge{

private $classes;

function  construct($classes)
{
 $this->classes  = $classes;
}

function _call($name,$params)
{
  foreach($classes as $class)
  {
    if(method_exists($class,$name)){
     return call_user_method_array($name,$class,$params);
    }
  }else{
   ...
  }
} 
```

# javascript - 页面独立加载，但在其他页面下的 iframe 中挂起

> ID：10743609
> 
> 赞同：0
> 
> 时间：2012-05-24T18:53:30.893
> 
> 标签：javascript, jquery, iframe

如果您在浏览器中键入地址，此页面[http://pagelinks.mxhoste.com/readings_page.php会独立加载。](http://pagelinks.mxhoste.com/readings_page.php)但是当我将它作为 iframe 加载到`.load()`另一个页面下时它会挂起：

这是[http://pagelinks.mxhoste.com/readings.php](http://pagelinks.mxhoste.com/readings.php)我有一个 iframe 来加载页面。

```
<iframe src="readings_page.php" scrolling="no" style="position: relative; top:-25px; width:97.5%; height:95.2%; border:10px solid #404040; overflow:hidden;"></iframe>
<script>
    document.title = "PageLinks | Daily Readings";
    $("#menu ul li").removeClass("active");
    $("#menu ul li:eq(1)").addClass("active");
    show_alerts();
</script> 
```

该代码本身也会加载到浏览器中。仅当我单击按钮将文件加载到另一个页面元素中时，它才会挂起

```
$(#page).load('readings.php'); 
```

这是该元素的 html：

```
<div id="page"> 

</div> 
<style>
#page {
    font-family:"Arial", Helvetica, sans-serif;
    font-size:0.8em;
    width: 778px;
    height: 435px;
    padding-top: 0px;
    padding-left: 0px;
    padding-right: 0px;
    background-color: #404040;
    margin: 0 auto;
    position: relative;
    top: 30px;
}
</style> 
```

有没有不同的方法来加载 readings.php 来解决这个问题？换句话说，将页面 readings_page.php 加载到我的主页上的 div 中的最佳方法是什么。我使用 iframe 的方法挂起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T18:57:33.667

当 DOM 准备好时，将您的 readings_page.php 加载到您的 readings.php 中：

```
$(document).ready(function(){
  // DOM is ready now
  $(#page).load('readings.php');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T19:00:32.510

如果框架只需要在用户执行操作后显示，请考虑在页面加载时加载内容（并在页面加载时隐藏框架或包含框架的 div）。

如果您需要在页面加载后立即看到它，那么我建议您在发送之前尝试在服务器端合并两个页面的源，而不是让用户的浏览器发出单独的 HTTP 请求。

# c - 填充如何在结构中工作？

> ID：10743619
> 
> 赞同：4
> 
> 时间：2012-05-24T18:54:13.413
> 
> 标签：c

这个程序的输出是28。我不明白是怎么回事？根据我的说法，这应该是 32（4+4+4+4+12）+4（保持对齐）=32。请解释显示输出28的原因？？

```
struct test{
    char c;
    int d;
    int x;
    int y;
    long double p;
    }t1;

printf("%d",sizeof(t1)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T18:57:50.037

也许您的“长双精度”实际上与双精度（8 字节）相同，如果您使用的是 32 位处理器，则对齐方式为 4 字节。

4+4+4+4+8 = 24

是什么`sizeof(long double)`？

**编辑：**

我使用了 GCC`__builtin_offset_of()`并`__alignof__`进行了调查。解释结构大小的实际答案是：

4+4+4+4+12 = 28

`sizeof(long double)`是 12。

不需要填充，因为`__alignof__(long double)`是 4 和。有趣的是，`__alignof__(double)`是 8。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T19:44:38.987

在 64 位系统上，大小为 char - 1 字节（不是 4 字节） int - 4 字节长 double - 12 字节

所以总共是 1+4+4+4+12+padding = 28 字节！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T20:01:58.043

据此，gcc 32 位模式下的长双精度数（使用[或](http://en.wikipedia.org/wiki/Data_structure_alignment)`gcc -m32`与生成 32 位输出的 gcc 一起使用，无论您的平台实际是什么）仅 4 字节对齐。不过，查阅 gcc 手册以验证这一点可能会很好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T20:52:32.573

这对我来说似乎是正确的。紧跟在 p 之后的字段将是 4 字节对齐的，因此不需要在结构的末尾进行填充。

4+4+4+4+12=28

在我的系统上，输出是 32，但在我的系统上，sizeof(long double) 是 16。（x86_64，LLVM3）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T20:53:48.933

28`sizeof`输出当然是正确的 = 1 字节用于 char，3 字节填充，3 x 4 int 和 12 字节用于 long double（96 位大小但 80 位精度），总共 28 个字节。

请记住，即使您在 x86-64 机器上编译，您也可能使用 mingw32 为 x86-32 机器编译，这会有所不同。

Mingw32 对`long double`.

# java - ConcurrentHashMap：避免使用“putIfAbsent”创建额外的对象？

> ID：10743622
> 
> 赞同：41
> 
> 时间：2012-05-24T18:54:25.490
> 
> 标签：java, synchronization, thread-safety, concurrenthashmap

我正在为多线程环境中的键聚合多个值。密钥是事先不知道的。我以为我会做这样的事情：

```
class Aggregator {
    protected ConcurrentHashMap<String, List<String>> entries =
                            new ConcurrentHashMap<String, List<String>>();
    public Aggregator() {}

    public void record(String key, String value) {
        List<String> newList =
                    Collections.synchronizedList(new ArrayList<String>());
        List<String> existingList = entries.putIfAbsent(key, newList);
        List<String> values = existingList == null ? newList : existingList;
        values.add(value);
    }
} 
```

我看到的问题是，每次运行此方法时，我都需要创建一个新的 an 实例`ArrayList`，然后我将其丢弃（在大多数情况下）。这似乎是对垃圾收集器的无理滥用。有没有更好的、线程安全的方法来初始化这种结构而不必使用`synchronize`该`record`方法？我对让该方法不返回新创建的元素的决定感到有些惊讶`putIfAbsent`，并且除非需要（可以这么说），否则缺乏一种推迟实例化的方法。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-05-24T19:00:53.140

Java 8 引入了一个 API 来解决这个确切的问题，提供了一个单行解决方案：

```
public void record(String key, String value) {
    entries.computeIfAbsent(key, k -> Collections.synchronizedList(new ArrayList<String>())).add(value);
} 
```

对于 Java 7：

```
public void record(String key, String value) {
    List<String> values = entries.get(key);
    if (values == null) {
        entries.putIfAbsent(key, Collections.synchronizedList(new ArrayList<String>()));
        // At this point, there will definitely be a list for the key.
        // We don't know or care which thread's new object is in there, so:
        values = entries.get(key);
    }
    values.add(value);
} 
```

这是填充`ConcurrentHashMap`.

特殊方法[`putIfAbsent(K, V))`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ConcurrentMap.html#putIfAbsent%28K,%20V%29)会将您的值对象放入，或者如果另一个线程在您之前获得，那么它将忽略您的值对象。无论哪种方式，在调用之后`putIfAbsent(K, V))`，`get(key)`线程之间都保证是一致的，因此上面的代码是线程安全的。

唯一浪费的开销是，如果某个其他线程同时为同一个键添加了一个新条目：您最终*可能会*丢弃新创建的值，但只有在没有条目*并且*您的线程丢失，这通常很少见。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-09-01T05:31:56.067

从 Java-8 开始，您可以使用以下模式创建 Multi Maps：

`public void record(String key, String value) { entries.computeIfAbsent(key, k -> Collections.synchronizedList(new ArrayList<String>())) .add(value); }`

ConcurrentHashMap 文档（不是通用合同）指定 ArrayList 只会为每个键创建一次，在为新键创建 ArrayList 时延迟更新的初始成本很小：

[http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html#computeIfAbsent-K-java.util.function.Function-](http://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ConcurrentHashMap.html#computeIfAbsent-K-java.util.function.Function-)

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-05-24T21:28:08.460

最后，我对@Bohemian 的回答进行了轻微修改。他提出的解决方案用调用覆盖了`values`变量`putIfAbsent`，这产生了我之前遇到的同样问题。似乎工作的代码如下所示：

```
 public void record(String key, String value) {
        List<String> values = entries.get(key);
        if (values == null) {
            values = Collections.synchronizedList(new ArrayList<String>());
            List<String> values2 = entries.putIfAbsent(key, values);
            if (values2 != null)
                values = values2;
        }
        values.add(value);
    } 
```

它不像我想要的那样优雅，但它比`ArrayList`在每次调用时创建一个新实例的原始版本要好。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-07-05T18:21:09.980

根据 Gene 的回答创建了两个版本

```
public  static <K,V> void putIfAbsetMultiValue(ConcurrentHashMap<K,List<V>> entries, K key, V value) {
    List<V> values = entries.get(key);
    if (values == null) {
        values = Collections.synchronizedList(new ArrayList<V>());
        List<V> values2 = entries.putIfAbsent(key, values);
        if (values2 != null)
            values = values2;
    }
    values.add(value);
}

public  static <K,V> void putIfAbsetMultiValueSet(ConcurrentMap<K,Set<V>> entries, K key, V value) {
    Set<V> values = entries.get(key);
    if (values == null) {
        values = Collections.synchronizedSet(new HashSet<V>());
        Set<V> values2 = entries.putIfAbsent(key, values);
        if (values2 != null)
            values = values2;
    }
    values.add(value);
} 
```

它运作良好

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2016-07-22T14:58:58.423

这是一个我也在寻找答案的问题。该方法`putIfAbsent`实际上并没有解决额外的对象创建问题，它只是确保这些对象中的一个不会替换另一个。但是线程之间的竞争条件会导致多个对象实例化。我可以为这个问题找到 3 个解决方案（并且我会遵循这个优先顺序）：

1-如果您使用的是 Java 8，实现这一目标的最佳方法可能`computeIfAbsent`是`ConcurrentMap`. 您只需要给它一个将同步执行的计算函数（至少对于`ConcurrentHashMap`实现而言）。例子：

```
private final ConcurrentMap<String, List<String>> entries =
        new ConcurrentHashMap<String, List<String>>();

public void method1(String key, String value) {
    entries.computeIfAbsent(key, s -> new ArrayList<String>())
            .add(value);
} 
```

这是来自的javadoc `ConcurrentHashMap.computeIfAbsent`：

> 如果指定的键尚未与值关联，则尝试使用给定的映射函数计算其值并将其输入到此映射中，除非为空。整个方法调用以原子方式执行，因此每个键最多应用一次该函数。在计算过程中，其他线程对该映射的某些尝试更新操作可能会被阻塞，因此计算应该简短而简单，并且不得尝试更新该映射的任何其他映射。

2- 如果你不能使用 Java 8，你可以使用`Guava`'s `LoadingCache`，这是线程安全的。你给它定义了一个加载函数（就像`compute`上面的函数一样），你可以确定它会被同步调用。例子：

```
private final LoadingCache<String, List<String>> entries = CacheBuilder.newBuilder()
        .build(new CacheLoader<String, List<String>>() {
            @Override
            public List<String> load(String s) throws Exception {
                return new ArrayList<String>();
            }
        });

public void method2(String key, String value) {
    entries.getUnchecked(key).add(value);
} 
```

3-如果您也不能使用 Guava，您可以随时手动同步并进行双重检查锁定。例子：

```
private final ConcurrentMap<String, List<String>> entries =
        new ConcurrentHashMap<String, List<String>>();

public void method3(String key, String value) {
    List<String> existing = entries.get(key);
    if (existing != null) {
        existing.add(value);
    } else {
        synchronized (entries) {
            List<String> existingSynchronized = entries.get(key);
            if (existingSynchronized != null) {
                existingSynchronized.add(value);
            } else {
                List<String> newList = new ArrayList<>();
                newList.add(value);
                entries.put(key, newList);
            }
        }
    }
} 
```

我对所有这 3 个方法以及非同步方法做了一个示例实现，这会导致额外的对象创建： http: [//pastebin.com/qZ4DUjTr](http://pastebin.com/qZ4DUjTr)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-09-01T05:42:09.727

Java 1.7.40 处理空数组列表创建问题的内存浪费（还有 GC 等）。不要担心创建空数组列表。参考：http: [//javarevisited.blogspot.com.tr/2014/07/java-optimization-empty-arraylist-and-Hashmap-cost-less-memory-jdk-17040-update.html](http://javarevisited.blogspot.com.tr/2014/07/java-optimization-empty-arraylist-and-Hashmap-cost-less-memory-jdk-17040-update.html)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-07-07T11:05:28.843

具有`putIfAbsent`最快执行时间的方法，在竞争激烈的环境中比“lambda”方法快 2 到 50 倍。**Lambda 不是这种“powerloss”背后的原因，问题是在 Java-9 优化之前computeIfAbsent 内部的强制同步。**

基准：

```
import java.util.Random;
import java.util.concurrent.ConcurrentHashMap;
import java.util.concurrent.ExecutorService;
import java.util.concurrent.Executors;
import java.util.concurrent.TimeUnit;
import java.util.concurrent.atomic.AtomicInteger;
import java.util.concurrent.atomic.AtomicLong;

public class ConcurrentHashMapTest {
    private final static int numberOfRuns = 1000000;
    private final static int numberOfThreads = Runtime.getRuntime().availableProcessors();
    private final static int keysSize = 10;
    private final static String[] strings = new String[keysSize];
    static {
        for (int n = 0; n < keysSize; n++) {
            strings[n] = "" + (char) ('A' + n);
        }
    }

    public static void main(String[] args) throws InterruptedException {
        for (int n = 0; n < 20; n++) {
            testPutIfAbsent();
            testComputeIfAbsentLamda();
        }
    }

    private static void testPutIfAbsent() throws InterruptedException {
        final AtomicLong totalTime = new AtomicLong();
        final ConcurrentHashMap<String, AtomicInteger> map = new ConcurrentHashMap<String, AtomicInteger>();
        final Random random = new Random();
        ExecutorService executorService = Executors.newFixedThreadPool(numberOfThreads);

        for (int i = 0; i < numberOfThreads; i++) {
            executorService.execute(new Runnable() {
                @Override
                public void run() {
                    long start, end;
                    for (int n = 0; n < numberOfRuns; n++) {
                        String s = strings[random.nextInt(strings.length)];
                        start = System.nanoTime();

                        AtomicInteger count = map.get(s);
                        if (count == null) {
                            count = new AtomicInteger(0);
                            AtomicInteger prevCount = map.putIfAbsent(s, count);
                            if (prevCount != null) {
                                count = prevCount;
                            }
                        }
                        count.incrementAndGet();
                        end = System.nanoTime();
                        totalTime.addAndGet(end - start);
                    }
                }
            });
        }
        executorService.shutdown();
        executorService.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS);
        System.out.println("Test " + Thread.currentThread().getStackTrace()[1].getMethodName()
                + " average time per run: " + (double) totalTime.get() / numberOfThreads / numberOfRuns + " ns");
    }

    private static void testComputeIfAbsentLamda() throws InterruptedException {
        final AtomicLong totalTime = new AtomicLong();
        final ConcurrentHashMap<String, AtomicInteger> map = new ConcurrentHashMap<String, AtomicInteger>();
        final Random random = new Random();
        ExecutorService executorService = Executors.newFixedThreadPool(numberOfThreads);
        for (int i = 0; i < numberOfThreads; i++) {
            executorService.execute(new Runnable() {
                @Override
                public void run() {
                    long start, end;
                    for (int n = 0; n < numberOfRuns; n++) {
                        String s = strings[random.nextInt(strings.length)];
                        start = System.nanoTime();

                        AtomicInteger count = map.computeIfAbsent(s, (k) -> new AtomicInteger(0));
                        count.incrementAndGet();

                        end = System.nanoTime();
                        totalTime.addAndGet(end - start);
                    }
                }
            });
        }
        executorService.shutdown();
        executorService.awaitTermination(Long.MAX_VALUE, TimeUnit.DAYS);
        System.out.println("Test " + Thread.currentThread().getStackTrace()[1].getMethodName()
                + " average time per run: " + (double) totalTime.get() / numberOfThreads / numberOfRuns + " ns");
    }

} 
```

结果：

```
Test testPutIfAbsent average time per run: 115.756501 ns
Test testComputeIfAbsentLamda average time per run: 276.9667055 ns
Test testPutIfAbsent average time per run: 134.2332435 ns
Test testComputeIfAbsentLamda average time per run: 223.222063625 ns
Test testPutIfAbsent average time per run: 119.968893625 ns
Test testComputeIfAbsentLamda average time per run: 216.707419875 ns
Test testPutIfAbsent average time per run: 116.173902375 ns
Test testComputeIfAbsentLamda average time per run: 215.632467375 ns
Test testPutIfAbsent average time per run: 112.21422775 ns
Test testComputeIfAbsentLamda average time per run: 210.29563725 ns
Test testPutIfAbsent average time per run: 120.50643475 ns
Test testComputeIfAbsentLamda average time per run: 200.79536475 ns 
```

# python - pymongo 已安装但导入失败

> ID：10743630
> 
> 赞同：1
> 
> 时间：2012-05-24T18:55:13.233
> 
> 标签：python, pymongo, centos5

CentOS 5.8 附带 Python 2.4.3。我使用命令安装了 pymongo： sudo pip install pymongo （在安装 python-pip 后使用 easy_install 安装 pip ...典型的 CentOS 后，开箱即用没有任何效果）。

安装似乎工作，我收到消息：

```
 Successfully installed pymongo
    Cleaning up... 
```

然后，当我运行 import pymongo 时，我得到了这个：

ImportError：没有名为 pymongo 的模块

我遵循标准的 pymongo 安装程序，所以 pymongo 绝对不能在 CentOS 上运行。任何人都知道使此工作的解决方法吗？似乎又一次，需要一个 hack 来使 CentOS 支持所有其他 Linux 发行版开箱即用的基本功能......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T00:07:56.127

Since you didn't specify you need to use the default CentOS Python install, I would highly recommend using virtualenv to get the support you want. CentOS requires that old version of Python, and we have to work around it at my business as well.

Grab the latest Python, and build from source. Make sure any SSL devel libraries are installed through Yum.

```
./configure --prefix=/home/user/custompython
make && make install 
```

Grab virtualenv.py from [https://raw.github.com/pypa/virtualenv/master/virtualenv.py](https://raw.github.com/pypa/virtualenv/master/virtualenv.py) and run that script from your custom python install

```
/home/user/custompython/bin/python virtualenv.py -P /home/user/custompython/bin/python /home/user/pythonENV
export PYTHON_HOME=/home/user/pythonENV/
export PATH=/home/user/pythonENV/bin/:$PATH
pip install pymongo 
```

Of course, adding the path modifications to .bashrc is helpful. Now you can install anything you want without worrying about the very old 2.4.3 that CentOS ships with. This is the exact setup I have with our CentOS 5.8 system, and it is very helpful.

# python - 如何删除从此正则表达式中找到的字符？

> ID：10743631
> 
> 赞同：0
> 
> 时间：2012-05-24T18:55:13.207
> 
> 标签：python, regex

```
str = "<test>0</test>"
print re.search("<.*?>", str).group()
print re.search(">.*?<", str).group()
>> <text>
>> >0< 
```

我怎样才能得到它，以便生成的文本是“测试”和“0”，而不包括我在正则表达式中用作标记的两个字符？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T18:59:47.573

您不应该使用正则表达式来解析 XML/HTML，请参阅[murgatroid99 的评论](https://stackoverflow.com/questions/10743631/how-to-remove-characters-found-from-this-regex/10743693#comment13959783_10743631)。

话虽如此，这里是您如何使用正则表达式获得此示例所需的结果。使用捕获组：

```
>>> s = "<test>0</test>"
>>> print re.search(r"<(.*?)>", s).group(1)
test
>>> print re.search(r">(.*?)<", s).group(1)
0 
```

请注意，您不应将`str`其用作变量名，因为它会掩盖内置类型。

捕获组的替代方法是[lookbehind和lookahead](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CGAQFjAA&url=http://www.regular-expressions.info/lookaround.html&ei=AYa-T-LzC-zaiQKN1oTdBw&usg=AFQjCNH50o6T1e3LK70EJqezzZTLsRPRhw&sig2=4ovQjBEilRPEuSOWtBdCwQ)：

```
>>> print re.search(r"(?<=<).*?(?=>)", s).group()
test
>>> print re.search(r"(?<=>).*?(?=<)", s).group()
0 
```

使用原始字符串文字 ( `r"..."`) 对这些来说不是特别必要的，但是在编写正则表达式时最好养成使用它们的习惯，以确保正确处理反斜杠。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T19:02:16.053

您应该将所需的文本放在反向引用中，并且可以使用 re.sub 替换该字符串。

顺便说一句，您可以在 1 个正则表达式中执行此操作：

```
"<\([^>]\)*>" 
```

我没有测试它，但它应该可以工作，只需用反向引用 (\1) 替换字符串。

编辑：我很抱歉，我没有意识到你也想要标签中的文字..

# php - Codeigniter：我应该如何构建我的聊天插件，以便它可以加载到其他页面中？

> ID：10743633
> 
> 赞同：0
> 
> 时间：2012-05-24T18:55:20.533
> 
> 标签：php, jquery, codeigniter, codeigniter-2

我已经构建了一个聊天插件，其中包含一个 chat.php 控制器、chat_model.php、chat_view.php 和 chat.js。我还使用 jQuery 向控制器执行 AJAX 请求。

聊天可以作为自己的网页正常工作（带有专用的控制器 + 视图），但最终我希望聊天能够在其他控制器中运行和访问，并且能够以更独立/模块化的方式在其他网页中查看。我只是不确定构造它的 MVC 方式会是什么样子。

我应该将聊天控制器转换为库，以便其他控制器可以访问它吗？如果是这样，这对我的 AJAX 请求意味着什么？我是否能够向库文件发出 AJAX 请求，还是仍需要保留一个（较小的）聊天控制器作为这些 AJAX 请求和库之间的中间人？

如果不是库，有没有办法更模块化地使用控制器，它们可以合作并被其他控制器调用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T07:10:11.540

您需要将聊天控制器更改为库类构造函数并将模型更改为该聊天库的类主体，并在您的应用程序中自动加载该库，然后在要显示聊天的控制器中获取聊天视图，并将其分配给在当前控制器视图中使用的变量。像：

```
class myChat {

    public __construct(){
        // controller codes here
    }

    public saveChatMessage($message){
        // model codes here
    }

} 
```

那么对于意见，

```
//in any controller you want to display the chat
$this->load->view("controller.php");
$this->load->view("chat.php"); 
```

或者

```
$data["chatview"] = $this->load->view("chat.php","",true);
$this->load->view("controller.php",$data); 
```

对于后端 AJAX 响应者，您需要一个控制器以基于 URL 的格式访问它们。

# javascript - InDesign：如何将多个 XML 元素放入单个文本字段中

> ID：10743634
> 
> 赞同：1
> 
> 时间：2012-05-24T18:55:27.180
> 
> 标签：javascript, xml, scripting, textfield, adobe-indesign

InDesign 脚本 Javascript

我想将多个 XML 元素放入单个文本字段中。

不幸的是，placeXML( using ) 只接受 Story、PageItem、Graphic、Movie 或 Sound。

我想也许我可以使用转换创建一个带有两个子元素的单个 XML 元素，然后标记文本字段以具有子元素的标签并放置父元素，但这对我也不起作用。

有任何想法吗？

# javascript - 为什么数据表在我的表格顶部添加行？

> ID：10743644
> 
> 赞同：0
> 
> 时间：2012-05-24T18:56:16.770
> 
> 标签：javascript, jquery, datatables

> **可能重复：**
> [使用 jquery 数据表插件，是否 fnAddAdd() 将行添加到 html tabld 的顶部或底部](https://stackoverflow.com/questions/1923856/using-jquery-datatable-plugin-does-fnaddadd-add-rows-to-the-top-or-bottom-of)

我正在尝试在我的应用程序中使用数据表并查看动态添加行的示例。它有效但很奇怪。它在我现有的行上方添加行。我怎样才能解决这个问题？

事实上，请看这个演示页面：

[http://datatables.net/examples/api/add_row.html](http://datatables.net/examples/api/add_row.html)

然后单击“单击以添加新行”。你会看到 1.1, 1.2, 1.3, 1.4 被添加到 allan, allan, allan, allan 行的上方。

我如何告诉数据表在艾伦下方而不是上方添加该行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T11:20:11.427

我对发布在以下位置的答案感到非常惊讶：

[使用 jQuery DataTables 插件，fnAddData() 是否将行添加到 html 表格的顶部或底部？](https://stackoverflow.com/questions/1923856/using-jquery-datatable-plugin-does-fnaddadd-add-rows-to-the-top-or-bottom-of)

并且不知道为什么它被接受。

@fbfcn 的答案也可能是从那里引用的。我不确定！

事实上，如果您`false`作为第二个参数传递，则不会添加任何行本身！

正确答案和唯一需要的更改是将“ `bSort`”参数设置为 false。设置它，你就完成了！

回答它以供将来参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T19:06:29.427

add new row 函数有一个可选的布尔值，表示表格是否被重绘。因此，您在演示中看到的内容按第 1 列排序，当添加新项目时，结果将被重新排序。如果您传递 false ，则重绘将不会发生并且会按照您的预期运行，但不会被排序。您可以通过降序对第 1 列进行排序然后添加行来查看正在发生的情况。

```
$(this).fnAddData(data, false); 
```

从[API](http://datatables.net/api)：

```
Input parameters:   
{array|object}: The data to be added to the table. This can be:
                1D array of data - add a single row with the data provided
                2D array of arrays - add multiple rows in a single call
                object - data object when using mDataProp
                array of objects - multiple data objects when using mDataProp
{bool} [default=true]: redraw the table or not 
```

# c# - 直接在图像上绘制

> ID：10743645
> 
> 赞同：2
> 
> 时间：2012-05-24T18:56:19.547
> 
> 标签：c#, wpf

我从 WPF 开始，我对 Winforms 有很好的了解。

我想要做的是获取一堆图像图块并将它们拼接在一起以创建一个更大的图像，我将在图像控件中显示该图像。

在 Winforms 我会这样做

```
Bitmap map = new Bitmap(800,800);
using (Graphics g=Graphics.FromImage(map))
{

    for (int x = 0; x<8; x++)
    for (int y = 0; y<8; y++)
    {
        g.DrawImage(bmp[x,y],x*100,y*100);
    } 
}

pictureBox1.Image=map; 
```

我没有测试这是否会编译，但我希望你能明白我的要求。

我只是在寻找有关如何执行此操作的基本了解，以便我可以使用它并弄清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:05:04.760

引用 System.Drawing 命名空间

完全按照问题中的描述在位图上绘制。

```
Bitmap map = new Bitmap(800,800);
using (Graphics g=Graphics.FromImage(map))
{

    for (int x = 0; x<8; x++)
    for (int y = 0; y<8; y++)
    {
        g.DrawImage(bmp[x,y],x*100,y*100);
    } 
}
Image.Source=ConvertBitmap(map); 
```

然后使用它来将 Bitmap 转换为 BitmapSource

```
public static BitmapSource ConvertBitmap(System.Drawing.Bitmap source)
    {
        return System.Windows.Interop.Imaging.CreateBitmapSourceFromHBitmap(
                      source.GetHbitmap(),
                      IntPtr.Zero,
                      Int32Rect.Empty,
                      System.Windows.Media.Imaging.BitmapSizeOptions.FromEmptyOptions());
    } 
```

# actionscript-3 - AS3 - 接球

> ID：10743648
> 
> 赞同：0
> 
> 时间：2012-05-24T18:56:28.440
> 
> 标签：actionscript-3, flash

我正在制作一个小应用程序，您可以在其中拖放球。当你用这个球击中一个球体时，你会得到一个点，球会移动到一个随机坐标。我的问题是，在你第一次击中球体后，它会改变位置，但你可以再次击中它。这是代码（没有拖放）

```
ball.addEventListener(Event.ENTER_FRAME, hit);

var randX:Number = Math.floor(Math.random() * 540);
var randY:Number = Math.floor(Math.random() * 390);

function hit(event:Event):void
{
if (ball.hitTestObject(s)){ //s is the sphere
    s.x = randX + s.width;
    s.y = randY + s.width;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:01:30.730

似乎您的`randX`和`randY`变量只会被评估一次。

因此，如果球的命中测试返回 true，球体的 x/y 坐标将第一次改变，但不会再改变。试试这个怎么样：

```
function hit(event:Event):void
{
    if (ball.hitTestObject(s))
    {
        //s is the sphere
        s.x = Math.floor(Math.random() * 540) + s.width;
        s.y = Math.floor(Math.random() * 390) + s.height; // note I changed width to height
    }
} 
```

# macos - matplotlib右键单击缩放不起作用

> ID：10743654
> 
> 赞同：1
> 
> 时间：2012-05-24T18:56:56.727
> 
> 标签：macos, matplotlib, zooming, x11, right-click

在交互模式下运行 matplotlib 时，按住鼠标右键拖动时，图形应该会缩放。这对我不起作用。如果我在按住选项键的同时用鼠标左键拖动它会缩放。

有谁知道如何让鼠标右键用于缩放？系统首选项中的 matplotlib、ipython、x11 设置是否存在问题？

这是对事物应该如何工作的描述（在“平移/缩放”下查看）： http: [//matplotlib.sourceforge.net/users/navigation_toolbar.html](http://matplotlib.sourceforge.net/users/navigation_toolbar.html)

我在 OSX 10.5.8 上运行 Enthought python 发行版 7.2.2 64 位。matplotlib 图显示在 X11 窗口中，后端是 TkAgg。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-17T09:53:01.150

在 TkAgg 后端，鼠标按钮编号是硬编码的，因此没有简单的 rc 设置可以更改。我确实注意到 tkagg 后端中有一些特殊情况代码（〜第 351 行）：

```
 if sys.platform=='darwin':
        # 2 and 3 were reversed on the OSX platform I
        # tested under tkagg
        if   num==2: num=3
        elif num==3: num=2 
```

鉴于您的问题，这看起来非常可疑。也许值得打开一个[matplotlib 问题](https://github.com/matplotlib/matplotlib/issues/new)，并提供一些关于您正在使用的鼠标类型的详细信息（加上原始问题中的所有细节，很好地放在一起，问题）。

# c# - 事件处理程序无法执行

> ID：10743655
> 
> 赞同：1
> 
> 时间：2012-05-24T18:56:58.510
> 
> 标签：c#, .net, windows-phone-7

我的 WP-7 应用程序出现问题。当我从云中读取时，我有一个事件 - OpenReadCompletedEventHandler，但是当事件发生时，EventHandler 无法执行。

这是我的功能：

```
public void SetCategories()
    //set the Companies table from Shret.net DataBase
    {
        try
        {
            WebClient webClient = new WebClient();
            Uri uri = new Uri("http://api.sherut.net/?method=Category");
            webClient.OpenReadCompleted += new OpenReadCompletedEventHandler(webClient_OpenReadCompleted);

            try
            {
                webClient.OpenReadAsync(uri);
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }
    void webClient_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
    {
        DataContractJsonSerializer serializer = null;
        try
        {
            serializer = new DataContractJsonSerializer(typeof(Categories));
            var categories = (Categories)serializer.ReadObject(e.Result);
            //  foreach (Company c in companies.data)

            //  MessageBox.Show(c.Name + " " + c.CompanyID+" "+c.CompanyGUID);
            //לכתוב לבסיס נתונים באפליקציה
            BuildCategoriesDB(); //build the local data base
            AddCategoriesData(categories);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    } 
```

它从云端读取，但不会进入处理程序：webClient_OpenReadCompleted

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:42:00.317

检查以确保正在创建和“抛出”事件。

# android - 需要 Android 数据库帮助

> ID：10743660
> 
> 赞同：-2
> 
> 时间：2012-05-24T18:57:13.213
> 
> 标签：android, android-listview, textview, android-database

我有一个活动，它有两个编辑文本字段：一个用于标题，另一个用于故事。
两个文本字段的条目保存在数据库中，数据库也有`ROW_ID`,`TITLE_ID`和`STORY_ID`。条目显示在*列表视图*中。
当一个项目被长按时，我得到与该项目对应的*行 ID 。*
我应该如何从中获得`TITLE_ID`和`STORY_ID`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:08:14.143

您可以在数据库中查询与 ROW_ID 对应的 TITLE_ID 和 STORY_ID。

发布您拥有的代码，我们将能够提供更具体的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T19:42:23.900

比如说，你有 item 的相应行 id，它在变量**rid**中被长时间点击。然后运行以下查询：

```
 String q = "SELECT * FROM TABLE_NAME where(ROW_ID like '"+rid+"')";
  Cursor c = db.rawQuery(q, null); //  db is a object of SQLiteDatabase type 
```

然后检索**TITLE_ID**和**STORY_ID** ，如：

```
 if(c.getCount() == 0)
              {                   
                 //No entry found
              }
              else  {
                  c.moveToFirst();
                  do {
                      String titleid = c.getString(c.getColumnIndex("TITLE_ID")); 
                      String storyid = c.getString(c.getColumnIndex("STORY_ID"));
                      } while (c.moveToNext());                 
            c.close(); 
```

* * *

然后随意使用它们:)

# objective-c - 如何检查两个给定的 b2Body 对象是否正在接触？

> ID：10743661
> 
> 赞同：0
> 
> 时间：2012-05-24T18:57:28.557
> 
> 标签：objective-c, cocos2d-iphone, box2d

我知道如何在更新循环中检查碰撞 - 但我需要查看两个物体是否在 box2D 中接触或重叠。我有指向这些对象的指针，我不想在更新时检查。

我仍在学习 Box2D，如果这是一个愚蠢的问题，我深表歉意。我已经尝试解决这个问题一个小时左右，但我没有任何运气。

看起来您可以使用`b2TestOverlap`or来执行此操作`b2CollideCircles`（因为对象是 b2CircleShapes）。如果其中任何一个是正确的策略，您可以从给定的身体中获得形状，我应该使用什么作为变换值？如果这些不是要走的路，**我如何检查两个给定的 b2Body 对象是否重叠或接触**。

更新：这是我通过 LearnCocos2D 获得的代码：

```
 -(BOOL)isTouchingCentre:(b2Body*)bodyToTest{
    //body is a b2Body object
        bool overlap = b2TestOverlap(body->GetFixtureList()->GetShape(), bodyToTest->GetFixtureList()->GetShape(), body->GetTransform(), bodyToTest->GetTransform());
        return overlap;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:40:41.207

不确定 b2TestOverlap 的细节，但我会试一试。假设它们只有一种形状，您可以从身体中获取必要的信息：

```
body->GetTransform();
body->GetFixtureList()->GetShape(); 
```

# jquery - 使用 Jquery 在 div 中加载页面

> ID：10743668
> 
> 赞同：0
> 
> 时间：2012-05-24T18:58:04.290
> 
> 标签：jquery, dynamic

我正在尝试将 aspx 页面加载到 Div 中。第一次，我在页面中有一个静态链接，并为锚标记的 onclick 事件编写了一个函数，类似于下面的代码

更新我的信息

JS函数导航是

```
 function Navigate(URL) {
    $("#contentManagement").load(URL, { name: 'TNR Xtranet' }, 
       function (content) { 
        $(this).hide().fadeIn("slow"); return false; 
    });
    $("#content").hide();
 } 
```

在 UpdateINfo.aspx 页面后面的代码中，我执行了 Response.write("HTML String")

第二次我尝试在上面的锚标记中使用相同的 UpdateInfo.aspx 页面，但也传递了一些查询字符串参数。这里的参数格式都很好，控件转到 UpdateInfo.asps 页面，但是当页面完成加载时，我似乎得到了一个空页面，而不是 Response.Write 中的内容。

我在这上面花了 3 个多小时，我束手无策。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:00:57.773

几件事。

1.  您生成的 HTML 格式是否正确？

2.  你可以在没有“return false;”的情况下尝试吗？我似乎可以确定它，但它给了我从前的许多悲伤。

让我知道它是怎么回事。

# ubuntu - Ubuntu CLI 批量查找 CP

> ID：10743670
> 
> 赞同：1
> 
> 时间：2012-05-24T18:58:08.510
> 
> 标签：ubuntu, find, command-line-interface, cp

```
find /www/ -iname ".htaccess" -exec cp {} {}_cp \; 
```

将复制所有 .htaccess 文件并将它们重命名为 .htaccess_cp 但我想做的是复制站点上的所有 .htaccess 文件并将它们放在一个目录中。问题是他们都需要有一个不同的名字，否则他们只会互相覆盖。理想情况下，我希望他们拥有父目录的文件名。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:06:12.337

你可以尝试这样的事情：

```
find /www -name '.htaccess' -exec bash -c 'newfile=${1}_cp; if [[ ! -e $newfile ]]; then
   cp "$1" "$newfile"
else 
   count=1 
   while true; do 
      if [[ ! -e ${1}_cp.$count ]]; do 
         cp "$1" "${1}_cp.$count" 
         break
      else 
         ((count++))
      fi
   done 
fi' -- {} \; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T20:01:30.203

也许是这样的：

```
for file in $(find /www/ -iname ".htaccess"); do  
    new_file_name=$(echo $file | sed 's#/#_#g')
    cp $file $new_file_name
done 
```

# matlab - MATLAB - 避免循环以基于其他向量的元素创建矩阵

> ID：10743671
> 
> 赞同：3
> 
> 时间：2012-05-24T18:58:09.513
> 
> 标签：matlab

假设我有`x,y,z`长度为 的向量`n,m,l`。我想`Q`使用这些向量的元素创建一个单元矩阵。天真地可以这样使用 for 循环：

```
for i = 1:n
    for j = 1:m
        for k = 1:l
            Q{i,j,k} = someFunction(x(i), y(j), z(k));
        end
     end
end 
```

的每个元素`Q`都是一个向量。

有没有更优雅（可能更慢）的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T19:14:12.897

```
x=[1 2 3 4];
y=[5 6];
z=[7 8 9];
[X Y Z]=meshgrid(x,y,z);
someFunc = @(a,b,c)[a b c]; #% test function; use whatever you want
Q = arrayfun(someFunc,X,Y,Z,'UniformOutput',false);
Q{1,1,1} #% output: [1 5 7] 
```

如果 someFunction 在别处定义，使用`arrayfun(@someFunction,X,Y,Z);`它来获取它的句柄。（`arrayfun`使用参数的每个元素作为您提供的函数句柄的参数 - 它和相关的 cellfun 是避免循环的关键。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T19:13:10.680

With`someFunction`是这样设计的，那么它看起来是不可能的。

您应该更改`someFunction`为采用矩阵并返回一个矩阵。那么问题就变成了`someFunction`使用矩阵运算编写特定的内容。尽管对原始问题的通用解决方案似乎是不可能的，但当您考虑特定功能（就像我在这里建议的那样）时，它是可能的。

# jquery - HTML 列表框换行文本

> ID：10743676
> 
> 赞同：1
> 
> 时间：2012-05-24T18:58:33.260
> 
> 标签：jquery, css, html, listbox

我有代码

```
 <select name="d" ><option value="sdf" class="test1">How to wrap the big line text How to wrap the big line text How to wrap the big line text How to wrap the big line text How to wrap the big line text How to wrap the big line text  text How to wrap the big line text How to wrap the big line text </option></select> 
```

我需要将文本包装在列表框中。我们该怎么做？？我在 CSS Wrap 文本中尝试过 .. 它不起作用。

请帮帮我

问候迪彭

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:07:12.043

您无法使用自动换行 - 您可能希望[在选择列表中查看此自动换行选项](https://stackoverflow.com/questions/3587942/word-wrap-options-in-a-select-list)

此外，您可以使用无序列表模拟整个下拉列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T19:04:34.933

试试这个方法，

```
style="word-wrap:break-word;width:100%;"

 <select name="d" style="word-wrap:break-word;width:100%;"><option value="sdf" class="test1">How to wrap the big line text How to wrap the big line text How to wrap the big line text How to wrap the big line text How to wrap the big line text How to wrap the big line text  text How to wrap the big line text How to wrap the big line text </option></select>​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-04T05:48:01.007

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title> limited text</title>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js">
</script>

<script>

$(document).ready(function(){
    var l=$(".main div").text();
    var store=new Array();
    var i=0;
    $(".main div").each(function(){
    l=$(this).text().length;
    store[i]=$(this).text();
    i++;
    if(l>200){

        var a=$(this).text().slice(0,190);  
        $(this).text(a);
        var d=$(this).addClass("after");                
        }           
        });

    $(".main div").click(function(){        
            var id=$(this).attr("id");
            $(this).text(store[id-1]);
            var d=$(this).removeClass("after");
        });
    });

</script>

<style>
.main div { width:500px;word-wrap:break-word; background-color:#9CF; margin:5px; border:2px solid black}
.after:after{content:"...";}

</style>

</head>

<body>

<div class="main">
<div id="1">The oldest classical Greek and Latin writing had little or no spaces between words or other ones, and could be written in boustrophedon (alternating directions). Over time, text direction (left to right) became standardized, and word dividers and terminal punctuation became common. The first way to divide sentences into groups was the original paragraphos, similar to an underscore at the beginning of the new group.[3] The Greek paragraphos evolved into the pilcrow (¶), which in English manuscripts in the Middle Ages can be seen inserted inline between sentences. The hedera leaf (e.g. ☙) has also been used in the same way.</div>
<div id="2">In ancient manuscripts, another means to divide sentences in into paragraphs was a line break (newline) followed by an initial at the beginning of the next paragraph. An initial is an oversize capital letter, sometimes outdented beyond the margin of text. This style can be seen, for example, in the original Old English manuscript of Beowulf. Outdenting is still used in English typography, though not commonly.[4] Modern English typography usually indicates a new paragraph by indenting the first line. This style can be seen in the (handwritten) United States Constitution from 1787\. For additional ornamentation, a hedera leaf or other symbol can be added to the inter-paragraph whitespace, or put in the indentation space.</div>
<div id="3">A second common modern English style is to use no indenting, but add vertical whitespace to create "block paragraphs". On a typewriter, a double carriage return produces a blank line for this purpose; professional typesetters may put in an arbitrary vertical space by adjusting leading. This style is very common in electronic formats, such as on the World Wide Web and email.</div>
<div id="4">How such documented are actually stored depends on the file format. For example, HTML uses the <p> tag as a paragraph container. In plaintext files, there are two common formats. Pre-formatted text will have a newline at the end of every physical line, and two newlines at the end of a paragraph, creating a blank line. An alternative is to only put newlines at the end of each paragraph, and leave word wrapping up to the application that displays or processes the text (if it is even necessary).</div>enter code here
</div>
<p> click on any paragraph...</p>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-01-24T10:28:20.163

**我们可以使用 asp:DataList 控件代替 Listbox**

```
<div style="width:200px;height:200px;overflow-y:scroll">
            <asp:DataList ID="DataList1" runat="server" DataSourceID="[nameofthedatasource]" OnSelectedIndexChanged="DataList1_SelectedIndexChanged" RepeatLayout="Flow" ShowFooter="False"  BorderColor="Black" GridLines="Vertical">
                <AlternatingItemStyle  BackColor="Green" ForeColor="Maroon" />
                <ItemTemplate >
                    <asp:LinkButton style="padding:0;margin:0;background-color:transparent;width:200px;word-wrap:break-word;text-decoration:none;height:auto" ID="btnNested" runat="server"  Text='<%# Eval("path") %>'/>
                  </ItemTemplate>
                <SelectedItemStyle BackColor="Yellow" ForeColor="Navy" />
    </asp:DataList>
        </div> 
```

将 [nameofthedatasource] 替换为任何数据源或删除属性并在代码隐藏中以编程方式设置它

将 [path] 替换为要绑定的属性名称

# ios - 需要通过 iOS SDK 在我的服务器上使用 JSON 对用户进行身份验证

> ID：10743677
> 
> 赞同：0
> 
> 时间：2012-05-24T18:58:36.257
> 
> 标签：ios, ios5

我现在只在 iOS 应用程序上工作了几个星期，所以请耐心等待。我希望我的应用程序的第一个屏幕是使用电子邮件地址和密码登录。我设置了视图，但是我不确定存储身份验证的最佳方式是什么。

身份验证本身将在服务器端处理。当用户输入他们的电子邮件和密码时，它将运行连接到我的服务器并在失败与否时返回 JSON。如果成功，我会返回我需要的任何东西。

问题是，我应该存储哪些信息以及存储在哪里？我应该将他们的用户 ID 和密码存储为 md5 字符串吗？然后每次我调用服务器时，我都可以传递他们的用户 ID 和 md5 字符串来验证他们是否有访问权限。这样做有意义吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T19:34:17.493

是的，您应该将凭据存储在设备上。这样，当服务器上的会话过期时，可以立即重新验证用户。（请记住，这比每次都强制用户登录更不安全，因为如果用户丢失了他的手机，任何找到它的人都可以访问他的帐户。）

只需将电子邮件地址和密码存储在 SQLite 表、plist、文本文件或您想要的任何内容中。最好对密码进行加密，即使没有其他应用程序能够访问您存储密码的文件。

**编辑：**

顺便说一句，您不必每次请求都将凭据传递给服务器。我不知道您在服务器端使用什么，但您可以将其设置为使用会话，因此他们的用户将在必须重新验证之前停留一段时间。这是我用来发送凭据的一些代码：

```
NSURLConnection *connection;
NSString *url = [NSString stringWithFormat:@"http://example.com/service/authenticate.ashx"];
NSString *username = [self.usernameField.text stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSString *password = [self.passwordField.text stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding];
NSMutableString* requestURL = [[NSMutableString alloc] initWithString:url];
NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL: [NSURL URLWithString: [NSString stringWithString:requestURL]]];
[request setHTTPMethod: @"POST"];
[request setValue:@"application/x-www-form-urlencoded" forHTTPHeaderField:@"content-type"];
[request setHTTPBody:[[NSString stringWithFormat:@"username=%@&password=%@", username, password] dataUsingEncoding:NSUTF8StringEncoding]];
connection = [[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

该 NSURLConnection 对象将管理 cookie 并使用户保持登录状态，因此您可以使用它继续向服务器发送请求，直到会话到期。

# javascript - 使用 jQuery 创建丰富的客户端体验时如何避免锁定我的 HTML 结构？

> ID：10743682
> 
> 赞同：1
> 
> 时间：2012-05-24T18:59:09.983
> 
> 标签：javascript, jquery, html, dom

我现在已经发生过 3 次这种情况，我觉得是时候学会如何避免这种情况了。

通常，我构建 HTML。一旦我对结构和视觉设计感到满意，我就开始使用 jQuery 来连接事件和其他东西。

问题是，有时客户想要一个小的更改，甚至是需要我更改 HTML 的中等更改，这会导致我的 javascript 代码中断，因为它依赖于不再存在的 HTML 选择器。

每次创建网站时，如何避免陷入这个坑？有什么我应该读的文章吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T19:05:43.763

让你的选择器不那么脆弱。

*   不要按索引、下一个兄弟、直接子等使用选择器
*   使用类，因此即使您必须更改标签名称和元素在 HTML 中的位置，选择器仍然可以工作
*   不要在没有指定选择器的情况下使用 parent() 或 child()。确保您寻找具有特定班级的父母或孩子

有时，根据返工量，您必须更新脚本。让它们尽可能地解耦，但总会有一些耦合，它是脚本和 HTML 之间的接口。这就像无需更改接口即可更改实现。有时您需要需要新界面的新行为。

我认为帮助您的最佳方式是让您展示需要更改 jQuery 代码的 HTML 更改的小示例。然后，我们可以向您展示如何在更新 HTML 时尽量减少对 JS 的更改

# html - 将 HTML 文本同步并突出显示为音频

> ID：10743683
> 
> 赞同：8
> 
> 时间：2012-05-24T18:59:12.590
> 
> 标签：html, html5-audio

如有必要，我可以更详细地解释，但本质上我需要做的是将 CSS 更改为与音轨同步的 HTML 文本 - 即，与音频播放同步突出显示单词/短语。我还需要通过单击文本来控制音频播放。我有很好的 HTML/CSS 印章，但我对原始 js 的能力并不强，所以我希望有一个 jQuery 方法。我希望有人能引导我朝着最好的方向前进。

提前谢谢了，

svs

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-24T23:13:15.477

为了便于使用，我建议将 jQuery 和[Popcorn.js](http://popcornjs.org/)组合用于任何想要将媒体与 HTML 集成的地方，反之亦然。有关示例，请参阅此[jsfiddle 帖子](http://jsfiddle.net/thisgeek/At3xg/)。

作为记录，如果 jsfiddle 消失了，下面是代码：

HTML

```
<audio id="greeting" src="https://dl.dropboxusercontent.com/u/17154625/greeting.ogg" controls></audio>

<div id="text">
   <span id="w1" class="word" data-start="1.0">Hello</span>,
   and <span id="w2" class="word" data-start="2.0">welcome</span>
   to Stack <span id="w3" class="word" data-start="3.0">Overflow</span>.
   Thank you for asking your question.
</div>​ 
```

CSS

```
.word {
   color: red;
}
.word:hover, .word.selected {
    color: blue;
    cursor: pointer;
}​ 
```

JS

```
var pop = Popcorn("#greeting");

var wordTimes = {
    "w1": { start: 1, end: 1.5 },
    "w2": { start: 1.9, end: 2.5 },
    "w3": { start: 3, end: 4 }
};

$.each(wordTimes, function(id, time) {
     pop.footnote({
        start: time.start,
        end: time.end,
        text: '',
        target: id,
        effect: "applyclass",
        applyclass: "selected"
    });
});

pop.play();

$('.word').click(function() {
    var audio = $('#greeting');
    audio[0].currentTime = parseFloat($(this).data('start'), 10);
    audio[0].play();
});​ 
```

# java - 来自可运行 JAR 文件的“兼容性降低”（2 个问题：不透明度和 JSlider）

> ID：10743686
> 
> 赞同：2
> 
> 时间：2012-05-24T18:59:27.370
> 
> 标签：java, jar, opacity, jslider

我有一个扑克游戏项目，当打包成一个可运行的 JAR 文件时有两个问题。

问题1：在基本GUI的界面上有一个JSlider。通常，我可以单击滑块左侧或右侧的滑块按钮来移动滑块。

当我从 eclipse 启动游戏时，它运行良好，但是一旦我从 jar 文件运行程序，这个动作就没有任何作用。

问题2：不时解锁成就并显示在屏幕上。此成就图像位于颜色为 (x,x,x,0) 的 JFrame 上，因此它应该是半透明的。同样在这里，从 Eclipse 运行它没有问题，而从 JAR 文件运行它时，背景是黑色的。

我现在的问题是：这是怎么造成的？这与 JDK/JRE 版本有什么关系吗？还是有其他影响？在我的另一个（和更旧的）笔记本上，Java 版本完全相同，在我的朋友 Apple Notebook 上，一切正常，jar 文件也一样。

cmd 说： java -version java version "1.7.0_03" Java(TM) SE Runtime Environment (build 1.7.0_03-b05) Java HotSpot(TM) 64-Bit Server VM (build 221-b02, mixed mode)

# windows-phone-7 - WP7 - 必应地图 - 将地图转换为 png

> ID：10743688
> 
> 赞同：-3
> 
> 时间：2012-05-24T18:59:35.837
> 
> 标签：windows-phone-7, png, bing-maps

我有以下问题：

WP7 中有一个用于 Bing 地图的 API。

问题是有什么东西可以从数据图中生成图像。类似于 MapTiler 的东西。太糟糕了 MapTiler 是用于网络的。但我相信这是同一个概念。

给定一张地图，以图像格式返回相同的地图。

你认为呢？您知道在 WP7 中执行此操作的任何库吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T19:01:09.827

你最好的选择可能是在屏幕上加载地图并 [在 Windows Phone 7 SDK 中截取它的 RenderTargetBitmap](https://stackoverflow.com/questions/8266715/rendertargetbitmap-in-windows-phone-7-sdk)

# linux - Linux 和 cocos2d: 'cc1plus': execvp: No such file or directory

> ID：10743692
> 
> 赞同：3
> 
> 时间：2012-05-24T18:59:43.837
> 
> 标签：linux, cocos2d-iphone, g++, cocos2d-android, cocos2d-x

我正在尝试在 linux 上为 android 构建一个 cocos2d 示例应用程序，但出现以下错误：

```
stefanos@stefanos-MS-7250:~/cocos2d-1.0.1-x-0.11.0/Test1/android$ ./build_native.sh

    make: Entering directory `/home/stefanos/cocos2d-1.0.1-x-0.11.0/Test1/android'                                                                                                      
    Gdbserver      : [arm-linux-androideabi-4.4.3] libs/armeabi/gdbserver                                                                                                               
    Gdbsetup       : libs/armeabi/gdb.setup                                                                                                                                             
    Compile++ thumb  : cocos2d <= CCConfiguration.cpp  

arm-linux-androideabi-g++: error trying to exec 'cc1plus': execvp: No such file or directory                                                                           

make: *** [obj/local/armeabi/objs-debug/cocos2d/CCConfiguration.o] Error 1                                                                                                          
make: Leaving directory `/home/stefanos/cocos2d-1.0.1-x-0.11.0/Test1/android'                                                                                                       
stefanos@stefanos-MS-7250:~/cocos2d-1.0.1-x-0.11.0/Test1/android$ 
```

我正在运行 Ubuntu，我安装了 gcc ， g++

**已解决：** 使用 ndk 的 r6 版本构建良好

在这里下载：http://dl.google.com/android/ndk/android-ndk-r6-linux-x86.tar.bz2

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T07:40:37.490

尝试更新 cocos2d-x [2.0 版本](http://www.cocos2d-x.org/news/56)，今天已经发布，使用[NDK 8](http://developer.android.com/sdk/ndk/index.html)。你一定过时了。

使用最新版本更好，1.0 有很多 Android 的 bug。其中一个带有内存管理器，在商店中发布游戏是非常糟糕的。

# extjs - 如何设置外部网格过滤器默认值？

> ID：10743695
> 
> 赞同：4
> 
> 时间：2012-05-24T18:59:53.853
> 
> 标签：extjs, filter, grid

我有一个使用 ext 3.4 网格过滤器插件的可排序网格。我想默认活动列来过滤真实值。需要非活动记录的用户可以删除过滤器。如何指定默认筛选列和值？

提前致谢！

```
colModel: new Ext.grid.ColumnModel({
    defaults: {
        sortable: true
        // How do I specify a default filter value
        //
        // Only show active records unless the user changes the filter...
    },
    columns: [{
        dataIndex:'f_uid',
        id:'f_uid',
        header:'ID',
        hidden:true
    }, {
        dataIndex:'f_name',
        id:'f_name',
        header:'Name',
    }, {
        xtype:'booleancolumn',
        dataIndex:'f_active',
        id:'f_active',
        header:'Active',
        filterable:true,
        trueText:'Active',
        falseText:'Inactive'
    }] 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-27T23:09:31.780

我意识到这是一个老问题，但我花了一段时间才找到解决方案，因此我想我会分享。

1) 可以使用过滤器中的 value 属性设置过滤器。

```
filter: {
          type: 'LIST',
          value: ['VALUE TO FILTER']
        } 
```

2) 为了初步过滤数据，使用 store 中的 filterBy() 方法。这可以在 onRender 事件处理程序中定义。

```
this.getStore().load({
    scope:this,
    callback: function() {
        // filter the store 
        this.getStore().filterBy(function(record, id) {
            // true will display the record, false will not
            return record.data.DATA_TO_FILTER == 'VALUE TO FILTER ';
        });
    }
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T19:46:49.073

答案在 Filter.js 源代码中。列定义中的过滤器对象可用于配置默认行为。

```
}, {
        xtype:'booleancolumn',
        dataIndex:'f_active',
        id:'f_active',
        header:'Active',
        trueText:'Active',
        falseText:'Inactive',
        filterable:true,
        filter: {
            value:1,    // 0 is false, 1 is true
            active:true // turn on the filter
        }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-27T04:30:40.200

我遇到了同样的问题，我发现@John 的答案是正确的，我可以让它与示例一起工作[http://dev.sencha.com/deploy/ext-4.0.0/examples/grid-filtering/grid- filter-local.html](http://dev.sencha.com/deploy/ext-4.0.0/examples/grid-filtering/grid-filter-local.html)，对于 grid-filter-local.js，只需添加如下代码：

```
grid.getStore().load({
    scope:this,
    callback: function() {
        // filter the store 
        grid.getStore().filterBy(function(record, id) {
            // true will display the record, false will not
            return record.data.size === 'small';
        });
    }
}); 
```

在原始代码*store.load()*之前，并擦掉*store.load()*。然后它只会在第一次加载网页时显示大小等于“小”的记录。干杯!

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-26T12:24:56.933

我制作了一个通用帮助类，允许您在列定义中设置任何默认值。 [https://gist.github.com/Eccenux/ea7332159d5c54823ad7](https://gist.github.com/Eccenux/ea7332159d5c54823ad7)

这应该适用于远程和静态存储。请注意，这也适用于 filterbar 插件。

所以你的列项目是这样的：

```
{
    header: 'Filename',
    dataIndex: 'fileName',
    filter: {
        type: 'string',
        // filename that starts with current year
        value: Ext.Date.format(new Date(), 'Y'),
        active:true
    }
}, 
```

然后在您的窗口组件中，您只需添加以下内容：

```
initComponent: function() {
    this.callParent();

    // apply default filters from grid to store
    var grid = this.down('grid');
    var defaultFilters = Ext.create('Ext.ux.grid.DefaultFilters');
    defaultFilters.apply(grid);
}, 
```

# objective-c - 在一个简单的应用程序中使用大量 xib 有什么问题吗？

> ID：10743698
> 
> 赞同：1
> 
> 时间：2012-05-24T19:00:15.730
> 
> 标签：objective-c, xcode, macos, cocoa

我正在编写一个相当简单的应用程序。整个应用程序主要由一个窗口组成，上面有 4 个工具栏选项卡。

我是一个有代码的组织怪胎，所以我尝试拥有大量的小代码文件，而不是一两个大文件。

我目前有 5 个视图。一个用于窗口本身。然后是四个，每个选项卡一个。我的问题是，拥有这么多 xib 有什么问题吗？是否有任何性能下降或需要注意的警告？

**编辑**

这是一个适用于 Mac OS X 而不是 iOS 的应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-21T19:33:11.177

在我使用多个 XIB 与单个 XIB 的实验中，它确实略微降低了性能，但是性能下降很小，甚至不明显。

# actionscript-3 - Flex，AS3 中奇怪的 NumberFormatter 行为

> ID：10743699
> 
> 赞同：2
> 
> 时间：2012-05-24T19:00:19.283
> 
> 标签：actionscript-3, apache-flex, numberformatter

我在 AS3 中使用 NumberFormatter 时遇到了这种奇怪的行为。

重要的是要了解我需要使用`NumberBaseRoundType.UP`，因为我需要`NumberBaseRoundType.DOWN`在申请信用时使用。

考虑到值为 2 的舍入精度，我猜 NumberFormatter 不应该改变我的数字。在下面的示例中，2.43 格式化后变为 2.44..！

所以这`Math.pow(...)`不是我正在寻找的解决方案 PLUS，我很想了解这是什么以及为什么会发生这种情况。谢谢！

```
var roundUp:NumberFormatter = new NumberFormatter();
roundUp.rounding = NumberBaseRoundType.UP;
roundUp.precision = 2;

trace(roundUp.format(2.41)); // Output : 2.41
trace(roundUp.format(2.42)); // Output : 2.42
trace(roundUp.format(2.43)); // Output : 2.44 <-- ???
trace(roundUp.format(2.44)); // Output : 2.44
trace(roundUp.format(2.45)); // Output : 2.46 <-- ???
trace(roundUp.format(2.46)); // Output : 2.46 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:39:20.927

这不是一个完整的答案。但是要从您使用的 NumberFormatter 类开始（它来自什么包）。有些源是可用的，有些包含在播放器本身中并且不可访问，但是在查看 4.6 框架中 Spark 中包含的 on 时，它包含了这个类级别的注释，它提供了一些见解：

```
/**
 *  The NumberFormatter class provides locale-sensitive formatting
 *  and parsing of numeric values. It can format <code>int</code>,
 *  <code>uint</code>, and <code>Number</code> objects.
 *
 *  <p>This class is a wrapper class around the 
 *  flash.globalization.NumberFormatter class. 
 *  Therefore, the locale-specific formatting
 *  is provided by the flash.globalization.NumberFormatter.
 *  However, this NumberFormatter class can be used in MXML declarations,
 *  uses the locale style for the requested Locale ID name, and has
 *  methods and properties that are bindable.  
 *  </p>
 *
 *  <p>The flash.globalization.NumberFormatter class use the
 *  underlying operating system for the formatting functionality and
 *  to supply the locale-specific data. On some operating systems, the
 *  flash.globalization classes are unsupported, on these systems this wrapper
 *  class provides fallback functionality.</p>
 *
 *  @mxml <p>The <code>&lt;s:NumberFormatter&gt;</code> tag inherits all of the tag 
 *  attributes of its superclass and adds the following tag attributes:</p>
 *
 *  <pre>
 *  &lt;s:NumberFormatter 
 *    <strong>Properties</strong>
 *    negativeNumberFormat="<i>locale and OS dependent</i>"
 *  /&gt;
 *  </pre>
 *
 *  @includeExample examples/NumberFormatterExample1.mxml
 *  @includeExample examples/NumberFormatterExample2.mxml
 *
 *  @see flash.globalization.NumberFormatter
 * 
 *  @langversion 3.0
 *  @playerversion Flash 10.1
 *  @playerversion AIR 2.5
 *  @productversion Flex 4.5
 */ 
```

最终，尽管它声明播放器以某种方式使用底层操作系统来实现格式化。这当然是一个奇怪的问题，但如果以前从未发现过并且没有发布解释或至少是错误报告，如果它实际上是 Flash 播放器中的问题，我会感到惊讶。有关您的 SDK 版本和播放器版本的更多详细信息可能会有所帮助，您是否尝试过摆弄其中任何一个结果是否有任何变化？

另外，根据您要实现的目标，您可以通过编写自己的类来处理此案例的格式化来解决此问题，如果这只是您需要处理的一种情况，如果它更像是一个系统广泛使用的东西，需要 NumberFormatter 类的更多功能，我可以理解想要解决根本问题。

# javascript - 将 Ajax 与 rails 一起使用

> ID：10743701
> 
> 赞同：-1
> 
> 时间：2012-05-24T19:00:29.610
> 
> 标签：javascript, jquery, ruby-on-rails, ajax

这可能是一个初学者问题（我是 Rails 3 的新手），但是一旦用户单击链接、启动 $.post 调用并在服务器端进行一些更改，我就会尝试使用 Ajax。

在 _share 部分，我有：

```
%a.fbbutton.twitterbutton{:id => "twitter"}       (href="javascript:window.open(%22http://twitter.com/share?text=Does anyone know a #{@branch.title} @branchly%21&url=http%3A%2F%2Fwww.branch.ly/branches/#{@branch.id}%22,%22Share%22,%22width=500,height=250,scrollbars=yes%22)" class="twitter button" onclick="submitWithAjax();") Tweet 
```

函数 SubmitwithAjax() 在 application.js 文件中：

```
function submitWithAjax() {
$.post('background_forward', $(this).serialize(), null, "script");  
     return false; } 
```

在我的路线中，我有：

```
match 'background_forward', :to => "branches#background_forward" 
```

我只需要让 submitwithAjax 函数转到我服务器中的特定方法。将不胜感激一些帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:39:15.520

到目前为止，您的 js 很好，现在您只需要在`BranchesController`响应 POST 的 上添加正确的操作，并在您的 routes.rb 中注册该方法（我相信默认情况下它是 GET）。

# meteor - 如何删除或移除 Session 变量？

> ID：10743703
> 
> 赞同：42
> 
> 时间：2012-05-24T19:00:32.853
> 
> 标签：meteor

Meteor 有一个 Session，它在客户端上提供了一个全局对象，您可以使用它来存储任意一组键值对。使用它来存储列表中当前选定项目之类的内容。

它支持 Session.set、Session.get 和 Session.equals。

如何删除会话名称、值对？我找不到 Session.delete(name) 吗？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2013-10-31T01:35:36.140

[注意：此答案适用于 Meteor 0.6.6.2 到至少 1.1.0.2]

[编辑：更新还解释了如何在不破坏反应性的情况下做到这一点。感谢@DeanRadcliffe、@AdnanY、@TomWijsman 和@MikeGraf！]

数据存储在里面`Session.keys`，它只是一个对象，所以你可以手动删除键：

```
Session.set('foo', 'bar')
delete Session.keys['foo']

console.log(Session.get('foo')) // will be `undefined` 
```

要删除所有键，您可以简单地将一个空对象分配给`Session.keys`：

```
Session.set('foo', 'bar')
Session.set('baz', 'ooka!')
Session.keys = {}

console.log(Session.get('foo')) // will be `undefined`
console.log(Session.get('baz')) // will be `undefined` 
```

这是最简单的方法。如果您想确保正确处理任何反应性依赖项，请确保您还执行@dean-radcliffe 在第一条评论中建议的操作。用于`Session.set()`先将键设置为未定义，然后手动删除它们。像这样：

```
// Reset one value
Session.set('foo', undefined)
delete Session.keys.foo

// Clear all keys
Object.keys(Session.keys).forEach(function(key){ Session.set(key, undefined); })
Session.keys = {} 
```

`Session.keyDeps.foo`和中的东西仍然会有一些残留物`Session.keyValueDeps.foo`，但这不应该妨碍。 

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-24T22:43:31.823

`Session.set('name', undefined)`或者`Session.set('name', null)`应该工作。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-03-02T07:09:41.213

使用 delete Session.keys['foo'] 的缺点是如果会话密钥包含一个数组，您的模板将不会热重载。例如，如果你正在做

```
Template.mytempl.helpers({
    categories: function() {
        return Session.get('srch-categories')
    }
}) 
```

并在您的模板中

```
{{#if categories}}
    {{#each categories}}
        {{this}}
    {{/each}}
{{/if}} 
```

而categories是一个数组，如果你删除session key，你的模板会继续显示categories的最后一个值。

# regex - 匹配外来字符的模式

> ID：10743704
> 
> 赞同：0
> 
> 时间：2012-05-24T19:00:42.307
> 
> 标签：regex, pattern-matching

在这里我做了一个正则表达式，其中 _pattern 是团队列表，_name 是我想查找它是否匹配 _pattern 的关键字。

结果显示匹配。我想知道为什么可能因为关键字与_pattern 完全不同。我怀疑它与 é 符号有关。

```
string _pattern = "Ipswich Town F.C.|Ipswich Town Football Club|Ipswich|The Blues||Town|The Tractor Boys|Ipswich Town";
string _name = "Estudiantes de Mérida";
regex = new Regex( @"(" + _pattern + @")", RegexOptions .IgnoreCase );

Match m = regex. Match (_name );
if (m . Success)
{
   var g = m. Groups [1 ]. Value;
   break ;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:03:46.470

它与 é 符号无关。让我们回顾一些事情..

是不是有2个| 在您提出的问题中：

```
The Blues||Town 
```

此外，该点在正则表达式中具有特殊含义，因此您应该将其转义

```
meaIpswich Town F\.C\. 
```

替代方案应该用括号括起来：

```
(Ipswich Town F.C.)|(Ipswich Town Football Club)|(Ipswich)| 
```

以下 java 行中的括号不是必需的

```
regex = new Regex( @"(" + _pattern + @")" 
```

Aneway，它匹配的原因不是有效的正则表达式。我认为这与您对 java API 的使用有关。

我会为您的目的重写的正则表达式是：

```
^((Ipswich Town F\.C\.)|(Ipswich Town Football Club)|(Ipswich)|(The Blues)|(Town)|(The Tractor Boys)|(Ipswich Town))$ 
```

如您所见，存在一些差异。

# ajax - Ajax 网站无法正确加载谷歌地图

> ID：10743706
> 
> 赞同：1
> 
> 时间：2012-05-24T19:00:45.007
> 
> 标签：ajax, google-maps

我为我的网站使用了一个 ajax 插件 (smartAjax)，在我的一个页面上，我有谷歌地图。在不使用 ajax 的情况下一切正常，但是一旦我将谷歌地图与 ajax 结合使用，谷歌地图就不再正确加载。

您可以在这里查看：http: [//mark-i-mark.com/lab/eys/public/ajax1.html](http://mark-i-mark.com/lab/eys/public/ajax1.html)

一切看起来都很棒，但是当单击顶部菜单中的“时间表和费用”，然后单击“我们的概念”时，它会带您回到地图，地图不再出现。如果您刷新页面，您可以看到它的短暂闪烁，但它没有正确加载。

这是关于地址的，如地址栏中所示，因为如果您删除最后一部分（#ajax1.html），地图就会正确显示。

有谁知道我可能做错了什么？我很高兴有任何建议。

欢呼;-)

# emacs - Emacs：在 LaTeX 模式下填充段落时关闭缩进

> ID：10743708
> 
> 赞同：1
> 
> 时间：2012-05-24T19:00:48.143
> 
> 标签：emacs

当我使用 emacs 编辑乳胶文档时，段落填充 (Esc-q) 并没有达到我想要的效果。例如，类似：

```
The component \vn{%vec} is not similar to 
```

当我使用填充时，我得到：

```
The component \vn{%vec} is not
                  % similar to 
```

也就是说，emacs 将“%”作为注释字符并相应地填充段落。但是，“\vn”是我的一个宏，它在 texttt 模式下设置文本，而这里的“%”只是一个常规的可打印字符，所以段落填充做错了。

所以我想要的是段落填充与文本模式相同。也就是说，没有缩进，也没有添加额外的字符。但是我不想每次我想要段落填充时都必须在文本模式和乳胶模式之间切换。有没有办法做到这一点？

谢谢您的帮助。 - 大卫

PS：是的，我知道如果行尾有真正的注释，那么测试模式填充将无法正确执行。但我从来没有在行尾放评论，所以这永远不会打扰我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T18:38:24.863

我找到了解决方案。我把它放在我的 init.el 文件中：

```
(add-hook 'latex-mode-hook        '(lambda() (setq comment-start nil)))
(add-hook 'tex-mode-hook          '(lambda() (setq comment-start nil)))

(add-hook 'latex-mode-hook        '(lambda() (setq fill-indent-according-to-mode nil)))
(add-hook 'tex-mode-hook          '(lambda() (setq fill-indent-according-to-mode nil))) 
```

我喜欢 emacs，但文档（或缺少文档）有时会让我发疯...... :)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T19:12:47.807

你可以试试：

```
(setq comment-start nil) 
```

来处理这种特殊情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T13:36:59.740

您要解决的问题`latex-mode`是真正问题的症状-天真地将“％”之后的代码标记为注释。

安装[auctex-mode 能](http://www.gnu.org/software/auctex/)解决您的问题吗？

# objective-c - 你如何让一个块成为一个类的成员？

> ID：10743713
> 
> 赞同：0
> 
> 时间：2012-05-24T19:01:16.637
> 
> 标签：objective-c, objective-c-blocks

我创建了一个类，它是 NSURLConnection 的包装器，并且类传递块的用户在连接的各个阶段被调用。包装类如下所示，为简洁起见：

```
typedef void (^ConnectionFinishedWithErrorBlock)(NSError* error);

@interface MYHTTPConnection : NSObject <NSURLConnectionDelegate>
@property (copy, nonatomic)     ConnectionFinishedWithErrorBlock   theErrorBlock;
@property (strong, nonatomic)   NSURLConnection *connection;

- (void) establishConnectionForURL:(NSURL*) url 
      andConnectionFinishedWithErrorBlock: (ConnectionFinishedWithErrorBlock) errorBlock;
@end 
```

到目前为止，我一直将它与声明为内联的块一起使用，即

```
[self.httpConnection establishConnectionForURL: url
            andConnectionFinishedWithErrorBlock:^(NSError* error)
            {
                ...
            }]; 
```

但是现在我遇到了一种情况，即我有一个很长的错误处理块，并且将其所有代码内联会变得混乱（因为 API 需要此处未显示的其他块）。

我知道我可以做这样的事情：

```
void (^httpConnectionFinishedWithError)(NSError*) = 
^(NSError* error) 
{
} 
```

然后通过 httpConnectionFinishedWithError 来建立ConnectionForURL。但是 httpConnectionFinishedWithError 包含对 self 的调用。当块被声明为内联时，对 self 的调用很好，但在如上所述完成时则不行，因为显然这会产生编译错误。

所以我想知道该块是否/如何成为调用类的块属性？（我之前已经使用块作为类的属性，就像在上面的 MYHTTPConnection 类中所做的那样，它工作正常，但是在这种情况下，我无法获得正确的语法来添加传递给的块作为属性建立连接ForURL调用类）。

或者，httpConnectionFinishedWithError 可以只调用另一个函数，但在那种情况下，我必须将 self 作为参数传递，在这种情况下，我将如何在块中获取 self ？

还有其他更优雅的解决方案吗？

非常感谢

编辑：更新以显示编译错误的示例

```
void (^httpConnectionFinishedWithError)(NSError*) = 
^(NSError* error) 
{
    self.boolProperty = NO; // here
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T19:12:40.333

如果你使用 ARC，你可以定义一个引用 self 的弱变量：

`__weak ClassOfSelf *_self = self;`

并在块中使用它。如果您不使用 ARC，我相信您想使用`__block`而不是弱。在这两种情况下，块都不会保留自身，因此您可以避免保留循环。

我知道在类中存储/使用块的最好方法是首先对它进行 typedef：

`typedef void (^HttpConnectionFinishedWithError)(NSError*);`

然后为块存储创建一个实例变量：

`HttpConnectionFinishedWithError httpCompletionBlock;`

在您的 init 中，您创建块并将其分配给实例变量。只需记住先复制块，以便将其移动到堆中（块在堆栈上创建，这意味着它们在创建它们的范围消失后消失）：

```
- (id) init{
  if (self = [super init]){
    __weak id _self = self; //or use class of self instead of id
    httpCompletionBlock = [^(NSError *err){
      .....code here, use _self instead of self
    } copy];
  }
  return self;
} 
```

（使用 ARC 的示例）

现在`httpCompletionBlock`可以在课堂上正常使用。只要您使用`_self`而不是`self`在块代码中创建保留循环，**并且**您不直接引用块内的任何实例变量。请记住引用`_iVar`与`self->_iVar`. 因此该块将捕获`self`. 而是使用：`_self->_iVar`或创建一个属性/获取方法来访问实例变量。

如果您使用的是 ARC，但针对的是 iOS 4，则不能使用`__weak`，因为它不可用，也不能使用`__block`，因为它不会阻止块保留 ARC 下的变量。相反，您可以使用`__unsafe_unretained`. 请记住，如果变量引用的对象是dealloc'd ，`__unsafe_unretained`则无法解析......所以它是不安全的。`nil`你需要小心你如何使用它。例如，如果你传递另一个对象这个块`self`并被释放。对 _self 的任何引用都会导致错误。解决此问题的一种方法是创建一个内联“中间”块，该块将仅在需要该块时才保留 self 。例如，不要直接传递块，而是执行以下操作：

```
self.httpConnection establishConnectionForURL: url andConnectionFinishedWithErrorBlock:^(NSError* error)
            {
                httpCompletionBlock(error);
            }]; 
```

在上面的例子中，`httpcompletionBlock`是一个实例变量，所以`self`get 被本地范围内的块捕获。您现在可以放心，`self`直到`httpCompletionBlock`执行完之后才会消失。您仍然避免了保留循环，因为只有内联块保留`self`，而不是存储块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T17:32:11.797

使用属性的另一种方法是从方法中返回块，如下所示：

```
-(ConnectionFinishedWithErrorBlock)connectionFinishedWithErrorBlock {
    return ^(NSError* error) {
        self.boolProperty = NO;
    };
}

[self.httpConnection establishConnectionForURL:url
           andConnectionFinishedWithErrorBlock:[self connectionFinishedWithErrorBlock]]; 
```

没有保留周期，因为您的类没有保留块的实例。`httpConnection`回调后不会处理块并且您的对象会泄漏存在一些风险。如果您不拥有任何东西`httpConnection`，请确保您了解其语义并在 Instruments 中进行测试以确保它不会泄漏连接完成块。

# c# - 如何从 Java 调用 .NET dll

> ID：10743715
> 
> 赞同：5
> 
> 时间：2012-05-24T19:01:27.710
> 
> 标签：c#, java, dll

我有这段代码来创建一个简单的 .NET `.dll`。它只返回一个`int`.

但是，它在 Java 中不起作用。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace ReturnINT
{
    public class ReturnINT
    {

        public static int RetornaInteiro ()
        {
            try
            {
                int number = 2;

                return number;
            }
            catch (Exception)
            {
                return 1;
            }
        }
    }
} 
```

如何从 Java 中调用该方法？

**当我使用 JNI 时，我在 java 中出现此错误：**

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: Dll.RetornaInteiro()V
      at Dll.RetornaInteiro(Native Method)
      at Dll.main(Dll.java:27) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-06-19T22:28:38.997

检查[http://www.javanet.com](http://www.javonet.com)以及。使用 one-jar 文件，您可以加载此 dll 并按如下方式调用：

```
Javonet.AddReference("your-lib.dll");
int result = Javonet.getType("ReturnINT").Invoke("RetornaInteiro"); 
```

Javonet 将在 .NET 进程中自动加载您的库，并允许您访问其中包含的任何类和类型。接下来，您可以获取您的类型并调用静态方法。方法结果和参数在 JAVA 和 .NET 类型之间自动转换。例如，您可以像这样传递字符串或布尔参数

```
Boolean arg1 = true;
String arg2 = "test";
Javonet.getType("ReturnINT").Invoke("MethodWithArguments",arg1,arg2); 
```

它们将被自动翻译。

此外，您还可以创建类型的实例、订阅事件、设置/获取属性和字段、处理异常甚至传递值类型参数。查看文档以获取更多详细信息：

[http://www.javanet.com/quick-start-guide/](http://www.javonet.com/quick-start-guide/)

PS：我是 Javonet 团队的成员。因此，请随时向我询问有关本机集成和我们产品的任何详细问题。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T19:19:08.663

可以直接调用：http: [//jni4net.sourceforge.net/](http://jni4net.sourceforge.net/)

或者您可以将其称为可执行文件。

# ruby - 如何列出 https 服务器上目录中的文件

> ID：10743717
> 
> 赞同：0
> 
> 时间：2012-05-24T19:01:38.330
> 
> 标签：ruby, http

我已经与一个相当大的 https 服务器建立了连接，如果我知道它们的名称和位置，我就可以下载文件。

但是，我想做的是通过 https 文件服务器搜索并且只提取 html 文件。我知道如何在普通目录中执行此操作，但是**有没有办法在 https 文件服务器中列出文件和目录，**有点像你会做的`ls`or `dir`？

我一般不熟悉http服务器，因此感谢您的解释。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:50:15.473

要列出文件，或者能够使用该列表中的 HTTP 访问它们，您必须有一个 CGI 或某种插件，它将为您提供可用目录的列表。

这不是默认允许的，因为它可能是系统上的主要安全漏洞。想象一下，如果他们可以浏览`/etc`*nix 系统上的层次结构并检索密码信息，或者通过数据库文件等，可能会导致问题。

因此，默认情况下不允许浏览文件系统。您可以启用多种不同的方式，具体取决于 HTTPd 服务器和随它提供的模块或已添加的模块。

编写这样的界面也不是那么难，但最好依靠预先构建的轮子，而不是重新发明自己的轮子。

# gwt - GWT 在 localhost 上工作，但在远程 tomcat 上显示 404

> ID：10743724
> 
> 赞同：0
> 
> 时间：2012-05-24T19:01:58.007
> 
> 标签：gwt, tomcat, deployment

我使用 eclipse 的 GWT 工具包来编译我的项目。我将它部署在我的本地主机中，它可以工作。但是当我将它上传到远程tomcat时，它显示404。我`GWT.getHostPageBaseURL()`用来获取主机URL。在本地 tomcat 中，url 是`localhost:8080/M/M.html`. 在远程tomcat中，它是`http://p.i.edu:8080/M/M.html`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-17T03:21:14.457

我有同样的问题。更糟糕的是，我的项目 delopyed 根本无法启动。当我通过 tomcat 管理器检查它时，我得到如下负面信息：失败 - 上下文路径/GwtTest 的应用程序无法启动失败 - 遇到异常 org.apache.catalina.LifecycleException: 无法启动组件 [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/GwtTest]]

几天前，我成功地将一个类似的（没有任何更改只是由 Eclipse 创建）部署到同一个远程 tomcat。我仔细检查了项目文件，现在确认原因在web.xml中。我在其中定义了一个servlet，但远程tomcat似乎是未知的。将服务器类的内容更改为任何（甚至错误）后， 404 消失了，但是 servlet 不能工作！在本地 Windows Tomcat 上，servlet 工作正常！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T19:55:39.520

您可以使用：

```
GWT.getModuleBaseUrl(); 
```

它将返回您正在寻找的完整网址。我希望这能解决你的问题。

# asp.net-mvc - IIS 6 无扩展 URL

> ID：10743725
> 
> 赞同：0
> 
> 时间：2012-05-24T19:01:59.720
> 
> 标签：asp.net-mvc, iis-6

我正在尝试在我的服务器（Server 2003、IIS6）上的一个站点上进行一些域重定向，但是 .Net 4 的无扩展 URL 功能在重定向之前一直在使用该 eurl.axd/GUID。[我在这里](https://stackoverflow.com/questions/3086066/asp-net-mvc-eurl-axd-errors)找到了一些相关信息。

我只想禁用此功能，如此处所述[，](http://blogs.msdn.com/b/tmarq/archive/2010/06/18/how-to-disable-the-asp-net-v4-0-extensionless-url-feature-on-iis-6-0.aspx)但我很确定这会影响我也在 IIS 中设置的 MVC .Net 站点（因为 MVC 使用无扩展名 URL）。

有人可以帮助我找到其他选择吗？有没有办法通过 IHttpModule 从 URL 中删除 eurl.axd/GUID？我找不到任何人这样做或类似的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:16:11.460

好吧，我似乎自己解决了一些问题。最初，我将两个网站都设置在同一个应用程序池下的 IIS 中。我将它们分成不同的应用程序池，确保它们都设置为 .Net 4，然后一切都开始工作了。现在，当用户从一个域重定向到另一个域时，eurl.axd/GUID 不会**被**附加到 URL 的末尾。

# c# - 如何使用 vb.net 电子邮件发送画布图像

> ID：10743729
> 
> 赞同：0
> 
> 时间：2012-05-24T19:02:14.540
> 
> 标签：c#, asp.net, vb.net, html

我使用canvg将SVG转换为画布到图像，然后在vb.net客户端我将图像转换为bytearray（）并将其保存到我的服务器上的文件夹中，以便我可以通过电子邮件附加：

```
 Protected Sub Button1_Click(ByVal sender As Object, ByVal e As EventArgs) Handles Button1.Click
    Dim path = Server.MapPath("PDFs\")
    Dim fileNameWithPath As String = path + DateTime.Now.ToString().Replace("/", "-").Replace(" ", "-").Replace(":", "") + ".jpeg"
    Dim fs As FileStream = New FileStream(fileNameWithPath, FileMode.Create)
    Dim bw As BinaryWriter = New BinaryWriter(fs)
    Dim ByteArray() As Byte = Convert.FromBase64String(hfChartImg.Value)
    bw.Write(ByteArray)
    bw.Close()

    Dim file As String = fileNameWithPath
    Dim message As New MailMessage()
    message.From = New MailAddress("****************")
    message.To.Add(New MailAddress("***************"))
    message.Subject = "new image "
    message.Body = "this is the apak chart img"
    Dim data As New Attachment(file)
    message.Attachments.Add(data)
    Dim client As New SmtpClient()
    client.Host = "smtp.gmail.com"
    client.Credentials = New NetworkCredential("***************", "*******")
    client.EnableSsl = True
    client.Port = 587
    client.Send(message)
End Sub 
```

此代码工作正常，它发送图像。

实际上我不需要将此图像保存到我的服务器我只是想发送而不保存，这就是我到目前为止所做的

```
 Protected Sub emailSend_Click(ByVal sender As Object, ByVal e As EventArgs) Handles emailSend.Click
    Dim customerChoice As String = DropDownList1.Text
    Select Case customerChoice
        Case "pdf"
            MsgBox("select pdf ")
        Case "image"
            Dim imageFile As MemoryStream = New MemoryStream()
            Dim bw As BinaryWriter = New BinaryWriter(imageFile)
            Dim bytearray() As Byte = Convert.FromBase64String(hfChartImg.Value)
            bw.Write(bytearray) 
```

我离做我想做的事还很远吗？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:05:47.047

你正在尝试写

```
Dim data As New Attachment(New MemoryStream(ByteArray), "SomeName") 
```

# ruby-on-rails - 使用 IO.popen 从 Ruby 中的子进程返回哈希

> ID：10743732
> 
> 赞同：0
> 
> 时间：2012-05-24T19:02:22.907
> 
> 标签：ruby-on-rails, ruby, io, popen

我在我的 Ruby 脚本中使用 IO.popen("cmd") 来运行 Ironruby 子例程。在我的 Ironruby 脚本中，我获取了一些数据并将其存储在哈希中。在我的 Ruby 脚本中，我使用 x=IO.popen("Iron ruby​​ script") 来检索哈希。问题是，我似乎无法让哈希显示在我的 Ruby 脚本中。我试过 x.gets、x.read 等。

使用 IO.popen 从该管道获取哈希的最佳方法是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:10:30.323

在子过程中：

```
require "yaml"
puts YAML.dump(theHash) 
```

在父级中：

```
require "yaml"
x=IO.popen(...)
theHash=YAML.load(x.read) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T19:34:48.600

Ruby 附带 dRuby，一个用于 Ruby 的分布式对象系统。在这种情况下，这可能是矫枉过正。演示：

```
#test1.rb
require 'drb/drb' # in standard lib

the_hash = Hash[:key1,'value1',:key2, 'value2']
DRb.start_service("druby://localhost:8787", the_hash)
DRb.thread.join

#test2.rb
require 'drb/drb'

DRb.start_service
p DRbObject.new_with_uri("druby://localhost:8787")
#=>{:key1=>"value1", :key2=>"value2"} 
```

# facebook - Adobe Muse 上的 Facebook 社交插件错误

> ID：10743734
> 
> 赞同：0
> 
> 时间：2012-05-24T19:02:30.407
> 
> 标签：facebook, muse

有什么方法可以将 Facebook 社交插件添加到 Adob​​e Muse 网站以显示 Facebook 页面的活动源，而无需登录 Facebook？（它适用于 Twitter，而无需登录，那么我怎样才能让它适用于 Facebook？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T17:40:48.867

要清楚你想要做什么：

您是否尝试使用 Facebook 提供的“活动提要”小部件？[https://developers.facebook.com/docs/reference/plugins/activity/](https://developers.facebook.com/docs/reference/plugins/activity/)

这不会显示您的 Facebook 页面活动提要，但会显示您网站中发生的活动，如下所述：*当用户与**您网站上的内容**交互时，活动提要显示故事，例如喜欢、观看、阅读、播放或任何自定义操作.*

如果你想要的是显示墙贴，你可能需要做更多这样的事情：[http ://www.nouveller.com/web-design/how-to-easily-display-a-facebook-page-在您的网站上供稿/](http://www.nouveller.com/web-design/how-to-easily-display-a-facebook-page-feed-on-your-website/)

# c# - 多线程软件设计

> ID：10743736
> 
> 赞同：1
> 
> 时间：2012-05-24T19:02:42.330
> 
> 标签：c#, multithreading, synchronization, locking, singleton

问题，假设我有线程 A 和线程 B，这两个都需要访问单例对象及其属性。

目前单例看起来如下。

```
public class Singleton{

        #region fields
        private static Singleton singletonObject;
        private double value1= 0;
        private double value2= 0;
        private double value3= 0;
        private double value4= 0;
        private object locker = null;
        #endregion

        // private constructor. This will avoid creating object using new keyword
        private Singleton() {
            locker = new object();
        }

        // public method which will be called
        public void GetName() {
            Console.WriteLine("singleton Object");
        }
        public static Singleton Instance() {
            // this object will be used with lock, so that it will be always one thread which will be executing the code
            object instanceLocker = new object();
            // put a lock on myObject. We won't be able to use singleTonObject becuase it will be null. lock is to make the object thread safe.
            // lock can't be worked with null objects.
            lock (instanceLocker) {
                // check whether the instance was there. If it's not there, then create an instance.
                if (singletonObject == null) {
                    singletonObject = new Singleton();

                }
            }
            return singletonObject;
        }

        public double Value1 { get { lock (locker) { return value1; } } set { lock (locker) { value1= value; } } }
        public double Value2 { get { lock (locker) { return value2; } } set { lock (locker) { value2= value; } } }
        public double Value3 { get { lock (locker) { return value3; } } set { lock (locker) { value3= value; } } }
        public double Value4 { get { lock (locker) { return value4; } } set { lock (locker) { value4= value; } } }

    } 
```

我的问题。除了具有线程安全属性，还有更好的方法吗？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T19:05:41.890

目前您的代码已完全损坏。您正在创建一个新对象以在*每次通话*期间锁定。没有其他线程会知道它，所以它完全没有意义。

不要费心试图以聪明的方式修复它。只需在静态变量初始化器中初始化它：

```
private static Singleton singletonObject = new Singleton(); 
```

很好很简单。

有关在 C# 中实现单例模式（包括`Lazy<T>`在 .NET 4 中使用）的更多信息，请参阅[我关于该主题的文章](http://csharpindepth.com/Articles/General/Singleton.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T19:31:40.547

除了您为每次调用创建一个新对象来锁定之外，还有另一个基本问题：即使您确实拥有相同的对象，您仍然没有真正保护任何东西。

沿着您初始化`Value1`为 9 的路线某处：

```
Singleton.Instance().Value1 = 9; 
```

现在假设您有两个线程执行此代码：

```
public void Foo()
{
    Singleton.Instance().Value1++;

    if(Singleton.Instance().Value1==10.0)
    {
         Singleton.Instance().Value2 = 20.0;
    }
    else
    {
         Singleton.Instance().Value3 = 30.0;
    }
} 
```

线程 A 调用`Value1++`并将 value1 递增到 10.0 线程 B 调用`Value1++`，现在 value1 为 11.0 线程 A 检查 value1 是否为 10.0 -> 返回 false！线程 A 设置`Value3`为 30 线程 B`Value3`也设置为 30。

这只是一个非常简单的示例，其中锁定属性不会保护您，因为外部代码无法保证读取或写入内容的顺序。执行线程 A 和线程 B 可能有许多其他顺序，这将导致完全不同的结果。

这种行为可能没问题，因为您可以让`Singleton`类的用户负责确保类外的正确操作，但这通常是您应该注意的。简单地锁定属性不会消除读/写争用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T19:12:04.837

您使用的是 .NET 4.0 吗？您可以将 ConCurrent 集合用于线程安全活动，而不是锁定。

# spring-roo - Spring ROO 中 1 字节 UTF-8 序列的字节 1 无效

> ID：10743738
> 
> 赞同：0
> 
> 时间：2012-05-24T19:02:52.027
> 
> 标签：spring-roo

大家好！

请任何人帮助使用新的 Spring ROO (1.2.1.RELEASE [rev 6eae723]) - 我最初使用的是 Spring-roo-1.2.0.M1。现在我有奇怪的错误，并且没有堆栈跟踪（顺便说一句，Spring Roo 的日志在哪里？felix.log.level 设置为 4）：

```
Welcome to Spring Roo. For assistance press TAB or type "hint" then hit ENTER.
Created SRC_MAIN_WEBAPP\WEB-INF\i18n\application.properties
Updated SRC_MAIN_WEBAPP\WEB-INF\i18n\application.properties
Undo manage SRC_MAIN_WEBAPP\WEB-INF\i18n\application.properties
Undo create SRC_MAIN_WEBAPP\WEB-INF\i18n\application.properties
Invalid byte 1 of 1-byte UTF-8 sequence. 
```

它停止并且在那之后什么也不做。1.20 一切正常...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T07:52:14.267

在我的情况下，我使用 UTF-8 表的注释，在清除 DB 后，roo 工作没有错误；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-06T00:48:38.680

你用的是 Mac 吗？我在 Mac 上遇到了同样的错误，并通过在 ROO_OPTS 中设置 file.encoding 来解决它。

```
$ ROO_OPTS=-Dfile.encoding=UTF-8 roo.sh 
```

# iphone - 在 iOS 上，我们可以从 UIScreen 对象获取主 UIWindow 对象吗？

> ID：10743740
> 
> 赞同：0
> 
> 时间：2012-05-24T19:03:11.320
> 
> 标签：iphone, ios, uiview, uiwindow, uiscreen

说，如果我们已经有了`aScreen`指向主屏幕的点，通过

```
UIScreen *aScreen = [UIScreen mainScreen]; 
```

我们可以`UIWindow`从这个`UIScreen`对象到达主要对象吗？（他们有任何联系吗？也就是说，而不是使用`[UIApplication sharedApplication].keyWindow`）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:27:08.777

A`UIWindow`知道它被分配到哪个屏幕，但`UIScreen`不知道`UIWindows`它在使用什么。这就是为什么标准模式是将主窗口保存为 ApplicationDelegate 的属性，因此您将获得对它的引用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T19:24:13.160

不。

该应用程序有一个窗口列表，通常只有一个。每个窗口都有一个`screen`属性来指示它当前所在的位置。屏幕对象保存有关物理设备的信息。

似乎在 OSX 上受到启发`NSScreen`，没有每个屏幕的窗口列表。每个应用程序都有窗口，每个窗口都知道屏幕所在的位置。

# javascript - 事件处理程序分配和内存泄漏

> ID：10743744
> 
> 赞同：3
> 
> 时间：2012-05-24T19:03:23.463
> 
> 标签：javascript

我了解 JavaScript 中循环引用的概念以及避免使用它们以防止内存泄漏的重要性，但我无法找到任何有关将作为闭包或原型成员的函数分配给事件处理程序如何影响垃圾收集的信息。

例如，假设我写了以下任一项：

```
var o = {};
o.var = 10000000;
o.func = function() { /*Do something that does not involve o.var*/ };

function p() { }
p.prototype.var = 100000;
p.prototype.func = function () { /*Do something that does not involve p.var*/ }; 
```

...然后继续执行以下任一操作：

```
var div = document.getElementByID('div');
div.onclick = o.func;

var instance_of_p = new p();
var div = document.getElementByID('div');
div.onclick = instance_of_p.func; 
```

将 func() 分配给 DOM 事件处理程序会阻止 GC 收集整个对象吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:15:23.817

是的。阅读这个关于 gc 如何在 JavaScript 中工作的[优秀答案。](https://stackoverflow.com/a/4324162/1048572)在您的情况下，`o`它仍然在全局或闭包范围内可用，因此不会被收集。它仍然可用于该功能，尽管可能无法使用。

BTW：[循环引用没有问题](https://stackoverflow.com/a/7347255/1048572)。

# c# - 模运算符 % 中的 C# 错误

> ID：10743745
> 
> 赞同：7
> 
> 时间：2012-05-24T19:03:34.933
> 
> 标签：c#, .net, math, modulo

解决了一个错误，我有了一些有趣的发现。

此过程的结果

```
 static void Main(string[] args)
    {
        int i4 = 4;
        Console.WriteLine("int i4 = 4;");
        Console.WriteLine("i4 % 1 = {0}", i4 % 1);

        double d4 = 4.0;
        Console.WriteLine("double d4 = 4.0;");
        Console.WriteLine("d4 % 1 = {0}", d4 % 1);
        Console.WriteLine("-----------------------------------------------------------");
        int i64 = 64;
        double dCubeRootOf64 = Math.Pow(i64, 1.0 / 3.0);
        Console.WriteLine("int i64 = 64;");
        Console.WriteLine("double dCubeRootOf64 = Math.Pow(i64, 1.0 / 3.0) = {0}", dCubeRootOf64);
        Console.WriteLine("dCubeRootOf64 = {0}", dCubeRootOf64);
        Console.WriteLine("dCubeRootOf64 % 1 = {0} ??????????????  Why 1\. ??????????", dCubeRootOf64 % 1);

        Console.ReadLine();
    } 
```

是

```
int i4 = 4;
i4 % 1 = 0
double d4 = 4.0;
d4 % 1 = 0
-----------------------------------------------------------
int i64 = 64;
double dCubeRootOf64 = Math.Pow(i64, 1.0 / 3.0) = 4
dCubeRootOf64 = 4
dCubeRootOf64 % 1 = 1 ??????????????  Why 1\. ?????????? 
```

`int 4 % 1 = 0` - 正确的

`double 4.0 % 1 = 0`- 正确的

但错误在于：

**Math.Pow(64, 1.0 / 3.0) % 1 = 1**

64的立方根是4。为什么在这种情况下`4 % 1 = 1`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-24T19:08:03.020

`Math.Pow(64, 1.0 / 3.0)`返回`3.9999999999999996`。
显示时四舍五入`4`。

取模 1 返回`0.99999999999999956`，显示时类似地四舍五入`1`。

您可以通过添加查看真实值`.ToString("R")`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T19:12:00.250

`dCubeRootOf64 % 1 = 1`返回 1 而不是 0；导致`Math.Pow(i64, 1.0 / 3.0)`返回`3.9999999999999996`和 `3.9999999999999996 % 1`返回`0.99999999999999956`依次舍入为 1。

因此结果1。

# php - 如何在 1 个 http 请求下上传多个文件

> ID：10743746
> 
> 赞同：5
> 
> 时间：2012-05-24T19:03:37.110
> 
> 标签：php, javascript, html, file-upload, xmlhttprequest

使用 HTML5 分块，我可以用较小的部分进行文件上传。但是当它开始使用多个 http POST 请求时问题就开始了，这将导致计算机速度变慢，或者可能崩溃。反正有没有在一个http请求下分割文件..所以如果我有5个文件，即使我使用html5分割块，它也只有5个http请求

eg：如果我上传5个文件，每个文件将被分割成1mb块，所以如果第一个文件是10mb，那么它将变成10个1mb块。问题是，每个块都将在 1 个 http 请求下，所以只有第一个文件将是 10 个 HTTP 请求。想象一下，如果我有 1gb 的文件，它将变成 1000 个 HTTP 请求并降低计算机的速度。

这是示例代码：

```
 //Prepare element progress after the page load completely
        var uploaders = [];
        var totalChunks = 0;
        var progress;
        var bars;
        $(document).ready(function() {
            //progress = document.querySelector('progress');
            //bars = document.querySelector('#bars'); 
        });        

        //function for after the button is clicked, slice the file 
        //and call upload function
        function sendRequest() {       
            //clean the screen
            //bars.innerHTML = '';

            var file = document.getElementById('fileToUpload');   

            for(var i = 0; i < file.files.length; i++) {      
                var blob = file.files[i];         
                var originalFileName = blob.name;
                var filePart = 0

                const BYTES_PER_CHUNK = 10 * 1024 * 1024; // 10MB chunk sizes.
                const SIZE = blob.size;

                var start = 0;
                var end = BYTES_PER_CHUNK;

                totalChunks = Math.ceil(SIZE / BYTES_PER_CHUNK);

                while( start < SIZE ) {                    
                    if (blob.webkitSlice) {
                        //for Google Chrome
                        var chunk = blob.webkitSlice(start, end); 
                    } else if (blob.mozSlice) {
                        //for Mozilla Firefox
                        var chunk = blob.mozSlice(start, end);
                    }       

                    uploadFile(chunk, originalFileName, filePart, totalChunks, i);
                    filePart++;
                    start = end;
                    end = start + BYTES_PER_CHUNK;
                }
            }                
        }

        function uploadFile(blobFile, fileName) {
            var fd = new FormData();
            fd.append("fileToUpload", blobFile);

            var xm = $.ajax({
                url: "upload.php"+"?"+"file1="+fileName,
                type: "POST",
                data: fd,
                processData: false,
                contentType: false,
            });               
        }

        function uploadFile(blobFile, fileName, filePart, totalChunks, divBarsSelector) {
            if(filePart == 0) {
                bars = document.querySelector('#bars' + divBarsSelector);  
            }

            var progress = document.createElement('progress');
            progress.min = 0;
            progress.max = 100;
            progress.value = 0;
            bars.appendChild(progress);   

            var fd = new FormData();
            fd.append("fileToUpload", blobFile);

            var xhr = new XMLHttpRequest();                
            xhr.open("POST", "upload.php"+"?"+"file="+fileName + filePart, true);

            xhr.onload = function(e) {
                //make sure if finish progress bar at 100%
                progress.value = 100;

                //counter if everything is done using stack
                uploaders.pop();

                if (!uploaders.length) {
                    bars.appendChild(document.createElement('br'));
                    bars.appendChild(document.createTextNode('DONE :)'));
                    //mergeFile(fileName, totalChunks);
                }                  
            };

            // Listen to the upload progress for each upload.   
            xhr.upload.onprogress = function(e) {;
                if (e.lengthComputable) {
                    progress.value = (e.loaded / e.total) * 100;
                }
            };                 

            uploaders.push(xhr);
            xhr.send(fd);
        } 
```

接收的服务器部分是upload.php

```
$target_path = "uploads/";
$tmp_name = $_FILES['fileToUpload']['tmp_name'];
$size = $_FILES['fileToUpload']['size'];
$name = $_FILES['fileToUpload']['name'];

$originalName = $_GET['file'];

print_r("*******************************************\n");
print_r($originalName);
print_r("\n");
print_r($_FILES);
print_r("\n");
print_r("*******************************************\n");
$target_file = $target_path . basename($name);

//Result File
$complete = $originalName;
$com = fopen("uploads/".$complete, "ab");
error_log($target_path);

if ( $com ) {
    // Read binary input stream and append it to temp file
    $in = fopen($tmp_name, "rb");
    if ( $in ) {
        while ( $buff = fread( $in, 1048576 ) ) {
            fwrite($com, $buff);
        }   
    }
    fclose($in);
    fclose($com);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-29T13:54:22.853

在阅读了您评论中的动机后，我想指出一些“误解”。首先，*不*建议拆分文件然后一次上传所有拆分的部分。拆分文件的全部意义在于*不*绕过 PHP 上传限制（如果适用，*应该*更改该限制，并且*可能*是一个真正的解决方案*），而是通过按顺序执行不同的部分，这样可以最大限度地减少客户端计算机上的负载，特别是如果您正在考虑上传 1GB 的内容。无论哪种方式，都没有理由将文件拆分并接下来将其合并到一个请求中（尽管这在理论上使用 XMLHttpRequest2 是可能的，但如果您可以使用 XMLHttpRequest2，那么您不应该担心拆分文件的任何一种方式，因为它提供了必要的控件来干净地上传多个文件）。

*请注意，如果您这样做，您必须确保您的 php 内存设置正确设置（以防止 php 在将其写入临时文件之前尝试将其完全加载到内存中，但这不应该发生在最近我相信默认设置的 PHP 版本）。（我觉得有必要补充一点，我已经有几年没有使用 PHP 和 PHP 上传了，所以我可能会误以为最后的评论）

无论哪种方式，将文件分块到大约 5-25MB（取决于您期望连接有多好 :P ）+ 顺序上传（如果 XMLHttpRequest2 可用，加上一个不错的进度条，否则每个块都有一个进度条）似乎是一个明智的方式去同时防止浏览器过载。（哦，如果您需要支持较旧的浏览器，我*真的*建议您研究 Flash 上传器，因为尽管 Apple 宣扬 Flash 是邪恶的，但在大多数（过时的）计算机上，它会提供迄今为止最好的体验）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-31T13:18:17.960

Java 上传器 [即 JumpLoader] - 我不是说“使用它们”，而是要了解它们是如何工作的。到目前为止，我见过的最佳上传实践是：1）将文件拆分为特定大小的块，2）按顺序上传块（另外通过提供块的哈希，如果数据是敏感的），3）在服务器端合并块（但如果您正在使用它们，请通过哈希验证数据完整性）。

因此，您将绕过 PHP 的`max_upload_size`限制。否则，我个人认为为什么有人应该首先将数据拆分成块没有任何好处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-04T05:30:32.183

尝试这个：

```
<script type="text/javascript">
    //Prepare element progress after the page load completely
    var uploaders = [];
    var totalChunks = 0;
    var progress;
    var bars;
    $  (document).ready(function() {
        //progress = document.querySelector('progress');
        //bars = document.querySelector('#bars');
    });        

    //function for after the button is clicked, slice the file
    //and call upload function
    function sendRequest() {
        //clean the screen
        //bars.innerHTML = '';

        var file = document.getElementById('fileToUpload');   

        for(var i = 0; i < file.files.length; i++) {
            var blob = file.files[i];
            var originalFileName = blob.name;
            var filePart = 0

            const BYTES_PER_CHUNK = 10 * 1024 * 1024; // 10MB chunk sizes.
            const SIZE = blob.size;

            var start = 0;
            var end = BYTES_PER_CHUNK;

            totalChunks = Math.ceil(SIZE / BYTES_PER_CHUNK);

            while( start < SIZE ) {
                if (blob.webkitSlice) {
                    //for Google Chrome
                    var chunk = blob.webkitSlice(start, end);
                } else if (blob.mozSlice) {
                    //for Mozilla Firefox
                    var chunk = blob.mozSlice(start, end);
                }       

                uploadFile(chunk, originalFileName, filePart, totalChunks, i);
                filePart++;
                start = end;
                end = start + BYTES_PER_CHUNK;
            }
        }
    }

    function uploadFile(blobFile, fileName) {
        var fd = new FormData();
        fd.append("fileToUpload", blobFile);

        var xm = $  .ajax({
            url: "upload.php"+"?"+"file1="+fileName,
            type: "POST",
            data: fd,
            processData: false,
            contentType: false,
        });
    }

    function uploadFile(blobFile, fileName, filePart, totalChunks, divBarsSelector) {
        if(filePart == 0) {
            bars = document.querySelector('#bars' + divBarsSelector);
        }

        var progress = document.createElement('progress');
        progress.min = 0;
        progress.max = 100;
        progress.value = 0;
        bars.appendChild(progress);   

        var fd = new FormData();
        fd.append("fileToUpload", blobFile);

        var xhr = new XMLHttpRequest();
        xhr.open("POST", "upload.php"+"?"+"file="+fileName + filePart, true);

        xhr.onload = function(e) {
            //make sure if finish progress bar at 100%
            progress.value = 100;

            //counter if everything is done using stack
            uploaders.pop();

            if (!uploaders.length) {
                bars.appendChild(document.createElement('br'));
                bars.appendChild(document.createTextNode('DONE :) '));
                //mergeFile(fileName, totalChunks);
            }
        };

        // Listen to the upload progress for each upload.
        xhr.upload.onprogress = function(e) {;
            if (e.lengthComputable) {
                progress.value = (e.loaded / e.total) * 100;
            }
        };                 

        uploaders.push(xhr);
        xhr.send(fd);
    }
</script> 
```

# coldfusion - ColdFusion：如何使用查询数据动态填充 livecycle pdf 部分

> ID：10743756
> 
> 赞同：1
> 
> 时间：2012-05-24T19:04:48.053
> 
> 标签：coldfusion, cfpdf, cfpdfform

我有一个模板 PDF，其中有一个部分将像表格一样布局。数据将来自查询。所以这个表将是动态的，行数未知。

如何使用 ColdFusion 完成此任务？它是使用 LiveCycle 创建模板和创建此部分的组合，因此它是动态的，然后使用 CFPDF 填充它。

现在我正在使用填充静态字段。

```
<cfpdfform source="Template.pdf"
   destination="Template2.pdf" action="populate">
   <cfpdfsubform name="form1">
    <cfpdfformparam name="pdf_controlNum" value="123">
    <cfpdfformparam name="pdf_ReportDate" value="05/01/2012">
   </cfpdfsubform>
</cfpdfform> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T21:01:58.857

我找到了解决方案。这是在这个论坛：

[http://www.experts-exchange.com/Software/Server_Software/Web_Servers/ColdFusion/Q_26528588.html](http://www.experts-exchange.com/Software/Server_Software/Web_Servers/ColdFusion/Q_26528588.html)

在线程的底部是这样的：

2 关键点 1\. 在 cf 中你需要在 cfpdfform 中设置 overwritedata=”yes” 2\. pdf 需要是动态 pdf。

希望这对其他人有帮助。我没有如何写博客，但如果你知道一个，请告诉我。确实很方便。

```
<cfpdfsubform name="details">    
  <cfpdfsubform name="Table1">
    <cfloop from="1" to="#getClientOrderDetails.recordCount#" index="i">            
      <cfpdfsubform name="Row1" index = "#i#">  
      <cfpdfformparam name="pdfDescription" value="#getClientOrderDetails.ItemDescription[i]#">
        <cfpdfformparam name="pdfItemQuantity" value="#getClientOrderDetails.ItemQuantity[i]#">
        <cfpdfformparam name="pdfItemUnitPrice" value="#getClientOrderDetails.ItemUnitPrice[i]#"> 
      </cfpdfsubform>
    </cfloop> 
   </cfpdfsubform>
 </cfpdfsubform> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T23:09:28.633

您只是想创建一个 PDF 文件吗？如果是这样，您还必须在 cfdocument 之后调用样式表

```
<cfdocument 
format="pdf" 
filename = "pdf_file_path\#pdf_controlNum#_#pdf_ReportDate#.pdf"
overwrite = "yes"
marginBottom = ".2"
marginLeft = ".4"
marginRight = ".4"
marginTop = ".2">

<style type="text/css">@import "pdf.css";</style>

QUERY RESULTS TABLES AND CODING HERE ETC

</cfdocument> 
```

# javascript-events - 从谷歌应用程序获取电脑日期？

> ID：10743761
> 
> 赞同：1
> 
> 时间：2012-05-24T19:05:28.310
> 
> 标签：javascript-events

在尝试了很多谷歌搜索后，我找不到与这个问题相关的任何东西。我想要的是获取我的电脑日期而不是谷歌的服务器日期。我确实尝试使用 URLFetchApp 发出 HTTP 请求，希望可以执行一些 javascript，然后我可以有一个不错的 pc 日期作为响应，但这并不是那么简单。我现在真的不知道如何取得一些进展，所以你可以给一些提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:09:08.450

当然。你将需要这个：

（1）在app端设置一个URI来获取数据

(2) 在客户端使用一点点 javascript 来捕获 Date，并将其转换为 JSON。

(3) 将该 JSON 发送到 URI。

如果您可以让客户端启动它，例如在您的页面加载时，这将容易得多，但*可以*通过让服务器端请求它来完成。

如何处理此问题的详细信息在某种程度上取决于您使用的 Javascript 库等。我喜欢 jQuery，这将使第二步类似于`jQuery.toJSON(new Date())`.

# html - word-wrap break-word 在这个例子中不起作用

> ID：10743763
> 
> 赞同：91
> 
> 时间：2012-05-24T19:05:40.923
> 
> 标签：html, css

我无法使用此示例进行自动换行...

```
<html>
<head></head>
<body>

<table style="table-layout:fixed;">
<tr>
<td style="word-wrap: break-word; width:100px;">ThisStringWillNotWrapThisStringWillNotWrapThisStringWillNotWrapThisStringWillNotWrapThisStringWillNotWrapThisStringWillNotWrapThisStringWillNotWrapThisStringWillNotWrapThisStringWillNotWrap</td>
</tr>
</table>

</body></html> 
```

我记得读过必须指定布局（我这样做了），但除此之外，我不确定我必须做什么才能让它工作。我真的希望它可以在 Firefox 中使用。谢谢。

编辑：在 Chrome 19 和 Firefox 12 中失败，它在 IE8 中工作。我尝试了 doctype strict 和 transitional，但都没有奏效。

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-05-24T19:22:48.103

## *Mozilla 火狐*解决方案

添加：

```
display: inline-block; 
```

以你的风格`td`。

## **基于 Webkit 的浏览器（*Google Chrome*、*Safari*等）解决方案**

添加：

```
display: inline-block;
word-break: break-word; 
```

以你的风格`td`。

***注意：请*** 注意，就目前而言，`break-word`这不是 webkit 标准规范的一部分；因此，您可能有兴趣使用`break-all`。这个替代值提供了一个毫无疑问的激进解决方案。但是，它符合标准。

## ***歌剧*解决方案**

添加：

```
display: inline-block;
word-break: break-word; 
```

以你的风格`td`。

上一段以类似的方式适用于 Opera。

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2015-10-19T12:41:11.713

使用适用于所有浏览器的代码（[取自 css-tricks ）](https://css-tricks.com/snippets/css/prevent-long-urls-from-breaking-out-of-container/)

```
overflow-wrap: break-word;
word-wrap: break-word;

-ms-word-break: break-all;
/* This is the dangerous one in WebKit, as it breaks things wherever */
word-break: break-all;
/* Instead use this non-standard one: */
word-break: break-word;

/* Adds a hyphen where the word breaks, if supported (No Blink) */
-ms-hyphens: auto;
-moz-hyphens: auto;
-webkit-hyphens: auto;
hyphens: auto; 
```

* * *

## 回答 #3

> 赞同：48
> 
> 时间：2019-11-04T00:24:21.053

Work-Break 与 . 无关`inline-block`。

确保您指定`width`并注意父节点中是否有任何覆盖属性。确保没有`white-space: nowrap`.

看到[这个](https://codepen.io/ourway/pen/vYYdOay)代码笔

```
<html>

<head>
</head>

<body>
  <style scoped>
    .parent {
      width: 100vw;
    }

    p {
      border: 1px dashed black;
      padding: 1em;
      font-size: calc(0.6vw + 0.6em);
      direction: ltr;
      width: 30vw;
      margin:auto;
      text-align:justify;
      word-break: break-word;
      white-space: pre-line;
      overflow-wrap: break-word;
      -ms-word-break: break-word;
      word-break: break-word;
      -ms-hyphens: auto;
      -moz-hyphens: auto;
      -webkit-hyphens: auto;
      hyphens: auto;
    }

    }
  </style>
  <div class="parent">

    <p>
      Note: Mind that, as for now, break-word is not part of the standard specification for webkit; therefore, you might be interested in employing the break-all instead. This alternative value provides a undoubtedly drastic solution; however, it conforms to
      the standard.

    </p>

  </div>

</body>

</html>
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2021-04-09T11:09:44.373

```
max-width: 100px;
white-space: break-spaces; 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-09-11T13:05:27.413

这种属性组合对我有帮助：

```
display: inline-block;
overflow-wrap: break-word;
word-wrap: break-word;
word-break: normal;
line-break: strict;
hyphens: none;
-webkit-hyphens: none;
-moz-hyphens: none; 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-03-06T09:59:34.800

为了让智能中断（break-word）在不同的浏览器上运行良好，对我有用的是以下规则集：

```
#elm {
    word-break:break-word; /* webkit/blink browsers */
    word-wrap:break-word; /* ie */
}
-moz-document url-prefix() {/* catch ff */
    #elm {
        word-break: break-all; /* in ff-  with no break-word we'll settle for break-all */
    }
} 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-02-01T10:09:12.677

> 此代码也有效：

```
<html>
<head></head>
<body>

<table style="table-layout:fixed;">
<tr>
<td style="word-break: break-all; width:100px;">ThisStringWillNotWrapThisStringWillNotWrapThisStringWillNotWrapThisStringWillNotWrapThisStringWillNotWrapThisStringWillNotWrapThisStringWillNotWrapThisStringWillNotWrapThisStringWillNotWrap</td>
</tr>
</table>

</body></html>
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2020-09-18T13:32:26.500

*   `inline-block`在这种情况下没有用

解决方案

*   `word-break: normal|break-all|keep-all|break-word|initial|inherit;`
    对您的疑问的简单回答是在上面使用并确保`white-space: nowrap`无处使用。

为了更好地理解，请注意：

*   `word-wrap`/`overflow-wrap`用于中断溢出其容器的单词

*   `word-break`属性会在一行的末尾打断所有单词，即使是那些通常会换行并且不会溢出其容器的单词。

*   `word-wrap`是历史和非标准财产。它已重命名为`overflow-wrap`但仍然是别名，浏览器将来必须支持。许多浏览器（尤其是旧浏览器）不支持`overflow-wrap`并要求`word-wrap`作为后备（所有人都支持）。

*   如果你想取悦 W3C，你应该考虑在你的 CSS 中关联这两者。如果你不这样做，`word-wrap`单独使用就好了。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-02-01T10:18:33.420

`word-wrap`物业工作`display:inline-block`：

```
display: inline-block;
word-wrap: break-word;
width: 100px; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-09-17T05:55:31.210

只需将容器的宽度指定为 100，然后添加`display: block`.

```
<div class="parent"><span>dummy text dummy text dummy text dummy text </span></div>
.parent
{
width:100%;
display:block
} 
```

# mysql - 为什么我从 SQLTables 中获取 unicode 值？

> ID：10743765
> 
> 赞同：1
> 
> 时间：2012-05-24T19:05:42.530
> 
> 标签：mysql, odbc, pyodbc

我正在尝试通过 ODBC 从在 Ubuntu 上运行的 Python 程序连接到同一台机器上的 MySQL 机器。（我使用的是 ODBC 而不是 DB-API，因为我将使用不同的数据库引擎，并且我想要一种一致的方式来访问系统目录，例如 SQLTables。）

但是当我连接到我的 MySQL 数据库并运行 SQLTables 时，我的第一行得到了这个：

> （U '\ U0067007a \ U005f0061 \ U00690062 \ U006c006c \ U006e0069 \ U005f0067 \ U00750061 \ U006f0074 \ U0061006d \ U00690074 \ U006e006f \ U0063005f \ U00630063'，U'，U '\ U00750061 \ U00680074 \ U0067005f \ U006f0072 \ U00700075'，U '\U00410054\U004c0042', u'')

显然，这些是 unicode 值，但它们看起来像是用于非常高的代码点，而且果然，我无法将它们编码为 ASCII。我所有的表名都应该是 ASCII。

是否有一些我遗漏或错误的设置导致了这种情况？

我的 odbc.ini 是：

```
[ODBC Data Sources]
mu      = MySQL

[mu]
Description = MySQL Database Test
Driver = MySQL
Server = localhost
Database = ccc2
Port = 3306 
```

我的 odbcinst.ini 是

```
[MySQL]
Description = ODBC for MySQL
Driver = /usr/lib/odbc/libmyodbc.so
FileUsage = 1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:56:38.390

找到了。我需要在连接参数中指定 Charset=UTF8，如下所示：

```
[ODBC Data Sources]
mu      = MySQL

[mu]
Description = MySQL Database Test
Driver = MySQL
Server = localhost
Database = ccc2
Port = 3306
Charset = UTF8 
```

# c# - 虚拟打印机设备上下文

> ID：10743769
> 
> 赞同：0
> 
> 时间：2012-05-24T19:05:49.093
> 
> 标签：c#, gdi+, gdi

我正在尝试处理捕获窗口屏幕的东西，但它不适用于在 SSH 会话中启动的窗口。有没有办法让远程应用程序将内容打印到虚拟显示器/打印机以便可以捕获 gui？谢谢！

*我现在正在使用 PrintWindow 捕获图像*

威廉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T01:44:32.117

也许[CreateEnhMetaFile](http://msdn.microsoft.com/en-us/library/dd183498%28v=vs.85%29)作为 HDC 在这里可能会有所帮助`HDC deviceContext = CreateEnhMetaFile(NULL, NULL, size, NULL)`，然后是您要执行的代码`PrintWindow`。这在您的 SSH 会话中有效吗？

# c++ - 处理 Tab Control 的 WM_PAINT 事件还需要手动绘制项目吗？

> ID：10743771
> 
> 赞同：0
> 
> 时间：2012-05-24T19:06:00.417
> 
> 标签：c++, winapi, tabs, drawing, background-color

我在上面创建了一个选项卡控件和几个选项卡项。我希望我的选项卡控件（没有项目的区域）背景具有良好的外观。所以我使用 GradientFill 来绘制选项卡控件。但是这样做，选项卡项就会消失。这与父子窗口的情况不同。那么，如果我想更改选项卡控件的背景，我是否也应该绘制选项卡项？

这是代码：

```
switch(message) {
    case WM_PAINT:
        HDC hdc;
        PAINTSTRUCT ps;
        RECT rectTabControl;

        hdc = BeginPaint(hwnd, &ps);

        GetClientRect(hwnd, &rectTabControl);

        TRIVERTEX        vert[2] ;
        GRADIENT_RECT    gRect;

        vert [0] .x      = 0;
        vert [0] .y      = 0;
        vert [0] .Red    = 0x1000;
        vert [0] .Green  = 0x0000;
        vert [0] .Blue   = 0x0000;
        vert [0] .Alpha  = 0x0000;

        vert [1] .x      = rectTabControl.right;
        vert [1] .y      = rectTabControl.bottom; 
        vert [1] .Red    = 0xff00;
        vert [1] .Green  = 0x0000;
        vert [1] .Blue   = 0x0000;
        vert [1] .Alpha  = 0x0000;

        gRect.UpperLeft  = 0;
        gRect.LowerRight = 1;

        GradientFill(hdc,vert,2,&gRect,1,GRADIENT_FILL_RECT_H);

        EndPaint(hwnd, &ps);
        return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T22:24:33.363

“那么，如果我想更改选项卡控件的背景，我是否也应该绘制选项卡项？”

是的。

# java - 使用 .put 方法存根 (Mockito) 模拟 net.sf.ehcache.Cache (ehcache)

> ID：10743772
> 
> 赞同：8
> 
> 时间：2012-05-24T19:06:03.793
> 
> 标签：java, mocking, ehcache, mockito

我正在使用 EhCache 开发一个简单的缓存功能。有一个实现我的缓存接口（BECache）的通用基类：

```
public class EhCacheBase<K, V> implements BECache<K, V> {

private static CacheManager cacheManager;
private String cacheName;

public EhCacheBase(String cacheName) {
    this.cacheName = cacheName;
}

public void cache(K key, V value) {
    Cache cache = cacheManager.getCache(cacheName);
    if (cache == null) {
        throw new NullPointerException("Failed to obtain cache: " + cacheName);
    }
    Element element = new Element(key, value);
    cache.put(element);
} 
```

目的是将缓存定义如下：

```
public class ObjectCache extends EhCacheBase<String, Object>{

    public ObjectCache (String cacheName) {
       super(cacheName);
    }
} 
```

假设在 ehcache.xml 中定义了“cacheName”，我得到了一个很好的类来缓存某些对象。

我正在尝试为 'EhCacheBase.cache(...)' 方法编写一个测试，以确保检索缓存并放置一个值（使用 Mockito）：

```
private static final String CACHE_NAME = "testCache";
@Mock
private CacheManager cacheManager;
@Mock
private Cache cache;
private EhCacheBase<String, Object> ehCacheBase;

@Before
public void init() {
    MockitoAnnotations.initMocks(this);
    ehCacheBase = new EhCacheBase<String, Object>(CACHE_NAME);
    EhCacheBase.setCacheManager(cacheManager);
}

@Test
public void shouldRetrieveCacheAndPutOneValueInIt() {
    //given
    Object o = new Object();
    when(cacheManager.getCache(CACHE_NAME)).thenReturn(cache);

    //when
    ehCacheBase.cache("KEY", o);

    //then
    verify(cacheManager, times(1)).getCache(CACHE_NAME);
    verify(cache, times(1)).put(any(Element.class));
} 
```

当我运行测试时，我得到：

```
java.lang.NullPointerException
    at net.sf.ehcache.Cache.checkStatus(Cache.java:2731)
    at net.sf.ehcache.Cache.putInternal(Cache.java:1440)
    at net.sf.ehcache.Cache.put(Cache.java:1417)
    at net.sf.ehcache.Cache.put(Cache.java:1382)
    at org.fxoo.bookingengine.dao.dataproviders.caches.EhCacheBase.cache(EhCacheBase.java:24)
    at org.fxoo.bookingengine.dao.dataproviders.caches.EhCacheBaseTest.shouldCacheOneValue(EhCacheBaseTest.java:41)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)
    at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)
    at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:300)
    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:35)
    at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:115)
    at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:97)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.maven.surefire.booter.ProviderFactory$ClassLoaderProxy.invoke(ProviderFactory.java:103)
    at $Proxy0.invoke(Unknown Source)
    at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:150)
    at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcess(SurefireStarter.java:91)
    at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:69) 
```

似乎“缓存”模拟中的“放置”方法正在调用其他一些方法。但正如您可以在 Mockito 文档中看到的那样：

使用 doNothing() 将 void 方法设置为不执行任何操作。请注意，模拟上的 void 方法默认情况下什么都不做！但是，很少有 doNothing() 派上用场的情况：

顺便说一句，我试过：doNothing().when(cache).put(any(Element.class)); 它也没有帮助。

有什么想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-25T15:27:13.673

Cache.put 是最终的，所以如果你想模拟它，你需要使用[PowerMock 。](http://code.google.com/p/powermock/wiki/MockitoUsage13)

您的测试将如下所示：

```
@RunWith(PowerMockRunner.class)
@PrepareForTest(Cache.class)
public class EhCacheBaseTest {
    private static final String CACHE_NAME = "testCache";
    private CacheManager cacheManager;
    private Cache cache;
    private EhCacheBase<String, Object> ehCacheBase;

    @Before
    public void init() {
        // You can statically import mock method, but left it this way 
        // for clarity
        cacheManager = PowerMockito.mock(CacheManager.class);
        cache = PowerMockito.mock(Cache.class);
        ehCacheBase = new EhCacheBase<String, Object>(CACHE_NAME);
        EhCacheBase.setCacheManager(cacheManager);
    }

    @Test
    public void shouldRetrieveCacheAndPutOneValueInIt() {
        //given
        Object o = new Object();
        when(cacheManager.getCache(CACHE_NAME)).thenReturn(cache);

        //when
        ehCacheBase.cache("KEY", o);

        //then
        verify(cacheManager, times(1)).getCache(CACHE_NAME);
        verify(cache, times(1)).put(any(Element.class));
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-25T08:02:33.547

我向 Mockito Google Group（[此处](http://groups.google.com/group/mockito/browse_thread/thread/a2c232e35d757dfb)）发布了一个类似的问题。我得到了 Eric Lefevre-Ardant 的快速回复，解释了一切。net.sf.ehcache.Cache.put 方法是最终的，所以它不能被存根——Mockito 无法提供自己的实现。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-01-28T00:24:50.060

[PowerMock 不支持](https://code.google.com/p/powermock/wiki/MockitoUsage13)最新版本的 Mockito (1.10.19) 。

如果可能，另一种解决方案是对`net.sf.ehcache.Ehcache`接口而不是`net.sf.ehcache.Cache`实现进行编码，而不是使用 PowerMock。

Ehcache 接口可以很容易地用标准的 Mockito 模拟。

我已经改编了接受的答案的例子：

```
@RunWith(MockitoJUnitRunner.class)
public class EhCacheBaseTest {
    private static final String CACHE_NAME = "testCache";

    @Mock private Ehcache cache;
    @Mock private CacheManager cacheManager;

    private EhCacheBase<String, Object> ehCacheBase;

    @Before
    public void init() {
        ehCacheBase = new EhCacheBase<String, Object>(CACHE_NAME);
        EhCacheBase.setCacheManager(cacheManager);
    }

    @Test
    public void shouldRetrieveCacheAndPutOneValueInIt() {
        //given
        Object o = new Object();
        when(cacheManager.getEhcache(CACHE_NAME)).thenReturn(cache);

        //when
        ehCacheBase.cache("KEY", o);

        //then
        verify(cacheManager, times(1)).getEhcache(CACHE_NAME);
        verify(cache, times(1)).put(any(Element.class));
    }
} 
```

# iphone - ASIHTTPRequest 请求 responseHeaders objectForKey:@"Set-Cookie"

> ID：10743773
> 
> 赞同：0
> 
> 时间：2012-05-24T19:06:08.000
> 
> 标签：iphone, asihttprequest

我的代码

[[request responseHeaders] objectForKey:@"Set-Cookie"]

这些结果

曲奇名称1=1234；路径=/; httponly，cookiename2=1234；路径=/; httponly

**如何仅获取 cookiename1 的值？**

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:08:56.800

ASIHTTPRequest 我相信是一个死项目，也许考虑使用另一个？我真的很喜欢使用[AFNetworking](https://github.com/AFNetworking/AFNetworking/)

不过，你需要那个特定的 cookie 来做什么。我相信 Set-Cookie 下的 cookie 应该由图书馆自动为您设置。

如果您真的需要实际查看结果，它只是一个字符串，因此您必须进行一些字符串解析。正则表达式可能是最好的。我相信这个例子可能有效，但我不确定。我目前无法测试，事实上我目前什至没有可用的 Xcode。所以很可能有一些语法错误：

```
NSError *error = nil;
NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"cookiename1=*;" options:0 error:&error];
NSTextCheckingResult *result = [regex firstMatchInString:cookies options:0 range:NSRangeFromString(cookies)];
NSString *stringResult = [cookies substringWithRange:[result range]]; 
```

然后从那里你有来自 cookiename1=...; 的 cookie 你可以提取它。去掉结尾的分号，最后用“=”分割，就可以得到cookie的值了。

# mysql - 如何使用 MySQL 选择两个不同的数据集

> ID：10743776
> 
> 赞同：0
> 
> 时间：2012-05-24T19:06:17.750
> 
> 标签：mysql

我试图从同一个表中选择两个数据集，而不是做两个查询，我试图在一次调用中同时选择它们。

首先，我想：

```
SELECT COUNT(*) AS `total` FROM `Messages` WHERE `id` = '1'; 
```

第二个是：

```
SELECT COUNT(*) AS `total_read` FROM `Messages` WHERE `id` = '1' AND `read` = '1'; 
```

无论如何可以在一个查询中执行此操作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T19:09:21.240

```
SELECT
    COUNT(*) total,
    SUM(IF(read='1',1,0)) total_read
FROM Messages
WHERE id='1'; 
```

# android - 一段时间后Android长时间TCP套接字连接失败

> ID：10743780
> 
> 赞同：2
> 
> 时间：2012-05-24T19:06:41.493
> 
> 标签：android, sockets, networking, tcp, network-programming

我正在编写一个使用 TCP 套接字连接的客户端-服务器应用程序。在我的 android 项目中，Service 创建了一个用于侦听 TCP 套接字的线程。

一切似乎都很好。但是我遇到了一个问题。我的网络服务在后台运行良好；但是一段时间后（10-15 分钟..），当我尝试再次打开我的应用程序（主要活动）时，我无法从套接字连接中获得响应。它冻结或什么？我无法从套接字发送或获取 TCP 消息。这可能是什么原因？我正在使用手机，通过 3G 连接。

（此外，在模拟器中运行的应用程序没有这个问题；我假设它的连接是稳定的，长时间的）

谢谢你的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:16:31.043

由于电源优化以及连接（GPRS/HSDPA/Wifi）的变化，您的连接很可能会被断开。

为了保持连接，您的后台服务需要使用 PowerManager 类声明唤醒锁。这可以防止设备进入省电模式并因此断开您的插座。但请注意，这会显着降低设备的电池寿命。

此外，您需要处理中断打开连接的连接更改。Android 发送一个名为**android.net.conn.CONNECTIVITY_CHANGE**的广播消息来通知连接的变化。

根据您的用例，我会在设备处于睡眠模式时进行轮询，并且仅在设备正在积极使用或仅使用 C2DM 推送通知时建立连接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T19:31:21.187

当我在我的应用程序中遇到这样的事情时，通常是因为手机上的电源优化（不能被覆盖）。如果套接字空闲时间过长，它会自动关闭，需要重新打开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T21:35:22.603

您是否不时发送数据？就像实现心跳协议一样？如果你不是，你应该......或者它可能与套接字读/写超时有关

# jquery - AngularJS - 对象销毁后删除表格行

> ID：10743781
> 
> 赞同：6
> 
> 时间：2012-05-24T19:06:52.327
> 
> 标签：jquery, angularjs

我有一个 AngularJS 应用程序，它返回一个 json 对象列表，我遍历这些对象并将它们放入一个表中。

表格上的每个项目都有一个带有 ng-click 方法的“删除”按钮：

```
<td><a ng-click="testButton()" class="btn btn-danger btn-mini">Delete</a></td> 
```

我正在使用 ng-resource 来删除该对象-效果很好。

但是，我还希望能够隐藏（或删除）包含对象的行和删除后的删除按钮 - 最好使用**JQuery**。

这是我的销毁方法：

```
$scope.destroyThing = function() {
        $scope.thing= this.thing;
        $scope.thing.$destroy();
        $(this.thing).closest("tr").hide(); // something like this maybe
    } 
```

该方法很好地破坏了对象 - 它只是没有删除该行......所以我尝试记录单击按钮时返回的对象：

```
$scope.testButton = function() {
        console.log(this);
    } 
```

这似乎返回了角度范围对象本身 - 但我找不到访问它相关的任何 DOM 元素的方法。

这是一个屏幕截图，向您展示从 testButton 函数返回的对象 - 当然是通过单击按钮触发的：

![在此处输入图像描述](../Images/4ff5a63cf42050bf508706c19df16304.png)

**如何使用 JQuery 访问与 Angular 对象相关的 DOM 元素？**

## 编辑

这是完整的表格行：

```
<tr ng-repeat="franchise in franchises">
                <td ng-model="franchiseName">{{franchise.franchise_name}}</td>
                <td ng-model="franchiseNumber">{{franchise.franchise_number}}</td>
                <td><a class="btn btn-mini">Edit</a></td>
                <td><a ng-click="destroyFranchise()" class="btn btn-danger btn-mini">Delete</a></td>

            </tr> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-24T20:45:12.527

您不想从控制器访问 DOM。这违背了 Angular 的禅宗 :-D

使用`ng-hide`指令：

```
<td><a ng-click="hide()" ng-hide="isHidden">Delete</a></td> 
```

控制器只是更改模型值，即`ng-hide`绑定到（在本例中为`isHidden`属性）。

你如何填充表格？你在用`ng-repeat`吗？如果是这样，只需从重复的集合中删除项目就足够`ng-repeat`了，DOM 将自动更新。

查看 [http://www.youtube.com/watch?v=WuiHuZq_cg4](http://www.youtube.com/watch?v=WuiHuZq_cg4)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T18:34:36.887

虽然直接处理 DOM 不是 Angular 的方式，但对于来自 Google 的仍然需要这样做的人来说，将 DOM 元素传递给现有的 jQuery 插件或其他东西：

1.  使用[Angular-UI](http://angular-ui.github.com)的 jQuery Passthrough（推荐）
2.  编写一个[Angular 指令](http://docs.angularjs.org/guide/directive)并在其中包装 DOM 处理。一个起点：[jsfiddle](http://jsfiddle.net/mJ4sr/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T07:56:28.093

使您的 tableRowClicked 方法将行作为参数。

```
<tbody id= "table_row">
 <tr ng-repeat="row in rows" ng-click="tableRowClicked(row)">
    <td ng-repeat="col in row">{{col}}</td>
</tr> 
```

# asp.net-mvc-3 - 尝试使用电话号码集合扩展 ProDinner Chef 类

> ID：10743783
> 
> 赞同：0
> 
> 时间：2012-05-24T19:06:56.800
> 
> 标签：asp.net-mvc-3, prodinner

我正在尝试通过向 Chef 添加电话号码来扩展 ProDinner。

1.  ChefInput 视图模型：

    ```
    public class ChefInput :Input
    {  
        public string Name { get; set; }

        public ChefInput()
        {
            PhoneNumberInputs = new List<PhoneNumberInput>(){
                                new PhoneNumberInput()
                            };}

        public IList<PhoneNumberInput> PhoneNumberInputs { get; set; }
    } 
    ```

2.  PhoneInput 视图模型：

    ```
    public class PhoneNumberInput :Input
    {
        public string Number { get; set; }
        public PhoneType PhoneType { get; set; } <-- an enum in Core project
    } 
    ```

3.  厨师 Create.cshtml 文件：

    ```
     @using (Html.BeginForm())
       {

        @Html.TextBoxFor(o => o.Name)
        @Html.EditorFor(o => o.PhoneNumberInputs)
       } 
    ```

4.  EditorTemplate 文件夹中的 PhoneNumberInput.cshtml：

    ```
    @using (Html.BeginCollectionItem("PhoneNumberInputs"))
    {
        @Html.DropDownListFor(m => m, new SelectList(Enum.GetNames(typeof(PreDefPhoneType)))) 
        @Html.TextBoxFor(m => m.Number)
    } 
    ```

调试时，我在 Crudere 文件中的 Create 处停止它，Phone 集合为空。

有人有想法么？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:27:09.447

乔，

您没有显示您的控制器逻辑，但我有一种感觉，因为您没有填充`PhoneNumberInputs`ViewModel，所以您正在获取 null。据我所知，您所做的只是更新模型中的列表。确保您从数据库（使用适当的值）在您的控制器中填写此“列表”，并且我确信一切都会按计划工作。

[编辑] - 回答评论。不知道 prodinner 控制器等是什么样的，但也有以下几行：

```
public ActionResult Edit(int id)
{
    var viewModel = new ChefInput();
    viewModel.ChefInput =  _context.GetById<ChefModel>(id);
    viewModel.PhoneNumberInputs = _context.All<PhoneNumberInput>();
    return View(viewModel);
} 
```

正如我所说，不确定 prodinner 设置，但这就是我的意思。

# ruby-on-rails - 具有多对多关系的 Ruby On Rails 多重选择器

> ID：10743784
> 
> 赞同：0
> 
> 时间：2012-05-24T19:07:05.937
> 
> 标签：ruby-on-rails, ruby-on-rails-3, many-to-many, html-select

我有两个模型

**具有 has_and_belongs_to_many 的***项目：用户*****

 **和

**拥有 has_and_belongs_to_many 的***用户：projects*****

 **在项目视图中，我有一个带有选择器的表单，我想在其中尝试将多个用户分配给一个项目。

```
<%= select_tag("project[users]",  options_for_select(@users, @project_users), {:multiple=>true, :size=>6} )%> 
```

在我的项目控制器中，选择中使用的变量是

```
@project_users = @project.users.collect { |user| user.id}
@users = User.all.collect { |user| ["#{user.first_name} #{user.last_name}", user.id] } 
```

全力以赴

```
<select id="project_users" multiple="multiple" name="project[users][]" size="6">
   <option value="#<User:0x007f567cb7f078>">User1</option>
   <option value="#<User:0x007f567cb7e9c0>">User2</option>
</select> 
```

问题是这不等同于

```
@some_project << [User(#), User(#)] 
```

("注意 User(#) 代表类实例")

相反，它相当于

```
@some_project << ["1", "2"] 
```

问题是用户实例被转换为字符串，但没有再次返回到实例中。

哪个不起作用，并且会引发错误

```
ActiveRecord::AssociationTypeMismatch in ProjectsController#update
User(#70004716784160) expected, got String(#4266680) 
```

我怎样才能使它正常工作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T20:05:53.093

在您的用户模型中：

```
def full_name
  [first_name, last_name].join(" ")
end 
```

在您的控制器中

```
@users = User.all 
```

在您看来：

```
<%= select_tag('project[user_ids]', options_from_collection_for_select(@users, 'id', 'full_name'), { :multiple => true, :size => 6 }) %> 
```

然后你可以使用

```
@project.user_ids = params[:project][:user_ids] 
```

或者

```
@project.update_attributes(params[:project]) 
```

用于分配。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T19:46:46.223

您无法发送实例。它可以在表单的呈现和提交之间改变。转换为字符串是一种单向操作，因为它指的是对象的唯一 ID（如内存地址），而不是属性或数据库标识符！因为它不是 ActiveRecord 的一部分，而是 ruby​​ 的对象库。当表单的数据返回时，实例不在内存中，因此您无法将其转换回来，即使其他方式可能也是如此。

坚持简单的旧方式：

```
@project_users = @project.users.collect { |user| user.id}
@users = User.all.collect { |user| ["#{user.first_name} #{user.last_name}", user.id] } 
```

并且在提交数据时：

```
@users = params[:project][:users].map{|a| User.find(a) } 
```****

# mysql - 游戏的 MySQL 数据库结构：您认为哪种方法最好用？

> ID：10743786
> 
> 赞同：-1
> 
> 时间：2012-05-24T19:07:13.107
> 
> 标签：mysql, redundancy

我有一个游戏，当一个动作完成后，我需要给用户一个项目。每个项目都有一个唯一的 ID。每个动作也存储和描述在它们自己的表中。每个动作都有自己的奖励，但我希望一个动作能够提供不同数量的物品，可能没有。

到目前为止，我有三种方法：

1.  在每个操作行中为项目 ID 设置三列。缺点是当该行为没有给出三个项目时它会留下多余的空单元格，但好处是它很简单。
2.  仅设置一列包含多个由空格分隔的值。它比上面的冗余少一点，但它需要更多的处理来分离值。
3.  为奖励创建一个新表，并为每一行设置一个项目和该项目所针对的操作。然后，当动作完成时，它会调用奖励表中具有动作 id 的所有行。这几乎为零冗余，但需要额外的查询。

您认为哪种方法最好使用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:16:09.357

让每个项目都有一个项目 ID。然后一个项目的每个实例都会有一个唯一的实例 id。然后你可以存储同一个项目的多个实例，每个实例之间的唯一区别是实例 id。例如，一个球的项目 ID 为 5，一个键的项目 ID 为 6。

```
instance_id | item_id
1000          5
1001          5
1002          5
1023          6
1024          6
... 
```

# arrays - Rails 3动态转义查询错误的绑定变量数量

> ID：10743790
> 
> 赞同：0
> 
> 时间：2012-05-24T19:07:38.833
> 
> 标签：arrays, ruby-on-rails-3, dynamic

我有一个表格，用户可以使用许多不同类型的组合以多种方式进行过滤。对于我从用户那里获得的所有输入数据，从 SQL 中转义用户数据对我来说很重要，这会导致我现在遇到的问题。我有两个数组，它们是根据发送给动作的参数动态构建的，一个数组包含 SQL 子句，另一个包含要与其各自的原因配对的值……例如……

```
def results

  sql_clauses = Array.new
  sql_args = Array.new

  unless params[:elapsed_time].nil?
    sql_clauses << "elapsed_time = ?"
    sql_args << params[:elaped_time] 
  end
  unless params[:age_greater_than].nil?
    sql_clauses << "age > ?"
    sql_args << params[:age_greater_than]
  end
  .....
  @results = Model.where(sql_clauses.join(" and "), sql_args.join(", "))

end 
```

现在这将 sql_clauses 数组发送到 where 方法没有问题。但是它在第二个参数上爆炸了，因为它返回一个字符串，并且它期望单个变量与每个“？”相对应。出现在 sql_clauses 数组中的字段。我已经尝试了 KandadaBoggu 在[Comine arrays of conditions in rails](https://stackoverflow.com/questions/3251919/combine-arrays-of-conditions-in-rails)上提供的解决方案。虽然这些选项都不适合我，但这可能是因为我使用的是 2 个数组而不是 1 个。

有人知道我的问题的解决方案吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-27T19:08:52.383

在 Rails 3 中无需使用字符串来构建动态查询。ActiveRecord 方法（如 select、where、order、limit 等）返回 ActiveRecord::Relation 对象，这些对象可以链接起来而不会触发多个数据库调用：

```
cars = Car.where(:colour => 'black') # No database queries are generated here.
rich_ppls_cars = cars.order('cars.price DESC').limit(10) # Still no db queries. 
```

`.all`当我们调用、`.first`、`.last`或`.each`ActiveRecord::Relation 对象时，将查询数据库。

**示例代码**

假设您正在查询具有以下列的模型：

*   姓名
*   elapsed_time
*   年龄

你有一个看起来像这样的 params 哈希：

```
{ :elapsed_time => 34, :age_greater_than => 14, :max_rows => 20 } 
```

您的控制器操作可能如下所示：

```
def results
    query = ModelName.select([:name, :elapsed_time, :age])
    query = query.where(:elapsed_time => params[:elapsed_time])  if params[:elapsed_time].present?
    query = query.where('age > ?', params[:age_greater_than])  if params[:age_greater_then].present?
    query = query.limit(params[:max_rows])  if params[:max_rows].present?
    @dynamic_query = query
end 
```

*请注意，我正在使用`.present?`. 这可以防止我们将 params 哈希中的空白字符串误解为有效数据。*

**参考资料**

*   [Active Record 查询对象 V3](http://m.onkey.org/active-record-query-interface)
*   [ASCIIcast 202 - Rails 3 中的 Active Record 查询](http://asciicasts.com/episodes/202-active-record-queries-in-rails-3)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T20:57:04.433

尝试这样的事情：

```
def results
  sql_clauses = []
  sql_clauses << "elapsed_time = :elapsed_time" if params[:elapsed_time]
  sql_clauses << "age > :age_greater_than" if params[:age_greater_than]
  .....
  @results = Model.where(sql_clauses.join(" and "), params)
end 
```

[where](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)支持各种不同的构建条件语法。

如果您有很多可能的文件要包含，我会以某种方式制作一个映射字典，如下所示：

```
map = {
   :elapsed_time => "elapsed_time =",
   :age_greater_than => "age >"
} 
```

然后遍历`params`键并构建子句（如果它们存在于`map`.

# jquery - jQuery是复选框上的属性更新未触发更改事件

> ID：10743791
> 
> 赞同：7
> 
> 时间：2012-05-24T19:07:43.253
> 
> 标签：jquery, html, checkbox

我有几个复选框和一个状态框，它告诉您是否至少选中了一个复选框。

我还有一个选中 All/None 复选框，用于切换复选框，但它不会触发分配给每个复选框的更改事件，因此如果使用选中 All/None 复选框，则状态永远不会更新。

这是我的实现：

[http://jsfiddle.net/axl163/Fckvd/1/](http://jsfiddle.net/axl163/Fckvd/1/)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-05-24T19:09:10.330

```
function toggleChecked(status) {
    $(".chkbx").each( function() {
        $(this).prop("checked", status).change(); // you have to trigger the event
    });
} 
```

**[演示](http://jsfiddle.net/2ej3W/1/)**

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-24T19:09:32.617

通过脚本对输入元素的任何更改都不会触发`onchange`事件。

或者，您可以触发`change()`同时更新更改输入，如下所示，

```
$(this).prop("checked", status).change(); 
```

**完整代码：**

```
function toggleChecked(status) {
    $(".chkbx").each( function() {
        $(this).prop("checked", status).change();
    });
} 
```

也使用`.prop`代替`.attr`

[**演示**](http://jsfiddle.net/Fckvd/3/)

# mysql - MySQL初学者查询无知。更改表 id 值，使其再次按数字顺序放置所有内容

> ID：10743794
> 
> 赞同：0
> 
> 时间：2012-05-24T19:07:53.613
> 
> 标签：mysql, mysql-error-1064

```
 id  name            age
    2   Sandy Smith     21
    4   Alie Smith      19
    5   James Smith     11 
```

你好，我是编程新手，今年夏天我有空闲时间在网上看教程。我知道这是一个简单的问题，但我在网上搜索过，但找不到我需要的确切内容。

我删除了一行，所以现在我不再有“id 2 3 4 5”。我剩下 2、4、5"。我不知道 MySQL 查询将 alie smith 放置为 #3 并将 james smith 放置为 #4。请帮助我完成此查询。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:10:31.097

你不需要。主键的意义在于它是唯一的。ID 字段将自行自动递增。这样做的唯一方法是从 ID 列中删除主键属性，以便您可以手动控制它，插入正确的 id，然后打开键。阅读规范化数据库，它会更有意义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T19:37:13.287

如果您仍然有原始插入语句或可以重新创建它们，您可以执行`TRUNCATE TABLE [tablenamehere]`然后重新插入数据。如果您试图将表恢复到已知状态，可能会很方便。

# php - 如何防止文本框 php 脚本编码？

> ID：10743799
> 
> 赞同：1
> 
> 时间：2012-05-24T19:08:09.133
> 
> 标签：php

我有这个评论框，用户的每条评论我都会得到评论的内容并将其插入数据库。但是只要有一些破坏性的用户会进入或者 alert('Hello World'); . 它被检测到，它会导致网站出现异常。我怎样才能防止这个问题？或者如何忽略那个“TEXT”作为脚本的功能。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:07:24.967

您必须确保您输出的数据被解释为纯文本，而不是被解析为代码。这通常称为“数据清理”或“数据清理”。
您的问题评论中有所有线索。概括：

*   [清理用户输入](https://stackoverflow.com/questions/129677/whats-the-best-method-for-sanitizing-user-input-with-php)
    *   [`strip_tags()`](http://php.net/manual/en/function.strip-tags.php)
    *   [`htmlspecialchars()`](http://www.php.net/manual/en/function.htmlspecialchars.php)
*   [HTML 净化器](http://htmlpurifier.org/)
*   [合法的](http://www.bioinformatics.org/phplabware/internal_utilities/htmLawed/index.php)
*   [XSS 备忘单](http://ha.ckers.org/xss.html)

# jquery - jQuery删除/隐藏元素

> ID：10743801
> 
> 赞同：1
> 
> 时间：2012-05-24T19:08:18.293
> 
> 标签：jquery, html

我有一个选择标签，当它的值发生变化时，我想根据该新值从数据库中获取一些数据，然后将这些新数据放在一个新的 div 上，当用户单击它时，这个 div 包含一个关闭符号，新的 div 将隐藏，我使用 jquery 做到了，除了隐藏新 div 外，一切都运行良好，我的 jQuery 用于关闭新 div 运行良好，但现在不，我不认为我在 jQuery 中做错了，但我没有知道我的错误在哪里，你能帮我吗？

# jQuery代码

```
$(document).ready(function(){
$("#aqIoQuesSelector").on("change",function(){
        var IO = $("#aqIoQuesSelector").val();
        $("#aqSugInfo").html('<div class="closeSign1"></div>');
        $.getJSON("http://localhost/Mar7ba/InformationObject/giveContenfForIO/"+IO+"/TRUE",function(data){
            if(data.length>0){
                $("#aqSugInfo").css("text-align","right");
                for(var i=0;i<data.length;i++){
                    $("#aqSugInfo").append('<p><span class="aqoneContenSug">'+data[i]+'</span></p>');
                }
            }else{
                $("#aqSugInfo").append('<span class="successMessage">no suggesiont</span>');
            }
            $("#aqSugInfo").css("display","block");
        }); 
    });
});

$(document).ready(function(){
    $('.closeSign1').on('click', function() {
        $(this).parent().hide();
    });
}); 
```

$html代码#

```
<div id="addQuestion1" class="container">
    <ul>
        <li>
            <label class="Paragraph">Question</label>
            <p>
                <label>Text</label>
                <input id="aqQuestionText"type="text" class="longInput1"/>
            </p>
            <p>
                <label>Answer</label>
                <input id="aqQuestionAnswer"type="text" class="longInput1"/>
            </p>
            <p>
                <label>Is Existed ?</label>
                <input type="button" value="check" class="button1" id="aqQuestionSug"/>
            </p>
            <div id="aqSugQues" class="SuggestionsContainer">
                <div class="closeSign1"></div>
            </div>
        </li>
        <li>
            <p><label class="Paragraph">Choices</label></p>
            <p>
                <label>First Choice</label>
                <input type="text" class="longInput1" name="choice1"/>
            </p>
            <p>
                <label>Second Choice</label>
                <input type="text" class="longInput1" name="choice2"/>
            </p>
            <p>
                <label>Third Choice</label>
                <input type="text" class="longInput1" name="choice3"/>
            </p>
        </li>
        <li id="aqQuestionIoli">
            <label class="Paragraph">Question IO</label>
            <p>
                <label>Concept</label>
                <select class="ConceptSelector1"></select>
            </p>
            <p>
                <label>IO</label>
                <select id="aqIoQuesSelector"></select>
            </p>
            <p>
                <label>Info</label>
                <input type="text" class="longInput1"/>
            </p>
            <div id="aqSugInfo" class="SuggestionsContainer">
                <div class="closeSign1"></div>
            </div>
        </li>
        <li id="aqAnswerIoli">
            <label class="Paragraph">Answer IO</label>
            <p>
                <label>Concept</label>
                <select class="ConceptSelector1"></select>
            </p>
            <p>
                <label>IO</label>
                <select id="aqIoAnswerSelector"></select>
            </p>
        </li>
        <li>
            <label class="Paragraph">Hints</label>
            <p>
                <label>First Hint</label>
                <input type="text" class="longInput1"/>
            </p>
            <p>
                <label>Second Hint</label>
                <input type="text" class="longInput1"/>
            </p>
            <div id="aqSugHints" class="SuggestionsContainer">
                <div class="closeSign1"></div>
            </div>
        </li>
        <li>
            <label>Type</label>
            <select class="TypeSelector"></select>
        </li>
        <li>
            <input type="submit" value="save" class="button1"/>
        </li>
    </ul>
</div> 
```

注意这里用了三次 close 标志，第一次在 div`aqSugQues`有效，但在 div`aqSugInfo`和 div都无效`aqSugHints`

ajax 运行良好，我打印结果

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T19:18:54.410

这一行：

```
$("#aqSugInfo").html('<div class="closeSign1"></div>'); 
```

正在用没有单击事件绑定的新按钮替换 div 的内容，因此每次更新时，该按钮都会失去其绑定。

您可以尝试将动态内容包装在可以轻松删除的容器中，或者执行类似的操作

```
$("#aqSugInfo").children(':not(.closeSign1)').remove(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T19:12:43.830

如果是`$("#aqSugInfo")`你想隐藏，为什么不在代码中这么说呢？`$("#aqSugInfo").hide();`?

# c - C90 复合文字

> ID：10743804
> 
> 赞同：3
> 
> 时间：2012-05-24T19:08:26.250
> 
> 标签：c, standards, c99, ansi, c89

在 C99 中，如果`x`之前声明过并且是 type `v2`，那么我可以这样写：

```
x = (v2) { 1, 2 }; 
```

哪里`v2`是：

```
typedef struct {
    int x;
    int y;
} v2; 
```

我可以在 C90 中做类似的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T19:12:15.773

AFAIK，复合文字是在 C99 中准确引入的。但是，如果您使用的是 GCC，则此功能可作为扩展使用。引用[GCC 文档](http://gcc.gnu.org/onlinedocs/gcc/Compound-Literals.html)：

> ISO C99 支持复合文字。复合文字看起来像包含初始化程序的强制转换。它的值是强制转换中指定类型的对象，包含初始化器中指定的元素；它是一个左值。**作为扩展，GCC 支持 C90 模式和 C++ 中的复合文字**。

关于 GCC 的此功能的另一个注意事项：

> 作为 GNU 扩展，GCC 允许通过复合文字初始化具有静态存储持续时间的对象（这在 ISO C99 中是不可能的，因为初始化器不是常量）。如果复合文字和对象的类型匹配，则它的处理就像对象仅使用括号括起来的列表进行初始化一样。复合文字的初始化列表必须是常量。如果正在初始化的对象具有未知大小的数组类型，则大小由复合文字大小确定。
> 
> ```
> static struct foo x = (struct foo) {1, 'a', 'b'};
> static int y[] = (int []) {1, 2, 3};
> static int z[] = (int [3]) {1}; 
> ```
> 
> 以上几行等价于以下内容：
> 
> ```
> static struct foo x = {1, 'a', 'b'};
> static int y[] = {1, 2, 3};
> static int z[] = {1, 0, 0}; 
> ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T19:54:10.140

在没有编译器扩展的情况下，您可以在 C90 中获得的最接近的是：

```
{
    v2 temp = { 1, 2 };
    x = temp;
} 
```

您可以将其压缩为一行或用宏替换。（由于 C 没有卫生的宏，但是，当然，您必须小心声明变量的宏。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T19:11:26.413

不，这是 C99 功能。但是，一些编译器会允许它作为 C89 模式的扩展，例如 gcc。

# php - PHP函数每次将变量增加1

> ID：10743807
> 
> 赞同：11
> 
> 时间：2012-05-24T19:08:46.967
> 
> 标签：php, function, auto-increment, decision-tree, expert-system

我已经开始为一个关于生物的游戏编写一个 PHP 脚本，有 4 个是/否问题，我想做的是编写一个函数，该函数将显示 2 个表示是和否的按钮，然后每次运行时给出不同的名称函数，例如 yes1 和 no1，那么下次运行该函数时，按钮的名称将是 yes2 和 no2。

我已经尝试过这样做，但它不能正常工作，下面是我到目前为止所做的代码，任何帮助将不胜感激。

```
<?php
session_set_cookie_params(2592000);
session_start();
?>

<html>
<head>
<title>Creature Guessing Game</title>
</head>
<body>
<h1>Creature Guessing Game</h1>
<p> Welcome to the creature guessing game! </p>
<p>Click the button below to start or restart the game </p>

<form method="post" action="Creatures.php">
<input type="submit" name="start" value="Start Game" />
</form>
 <?php
 $questions = array('Does the creature live on land?', 'Does it have wings?', 'Does it live near water?', 'Can it fly?');
 function repeat()
 {
 $number = 0;
 $number++;
 echo "<form method ='post' action='Creatures.php'>
<input type='submit' name='yes'.$number value='Yes' />
<input type='submit' name='no'.$number value='No' />
</form>";

 }
//If form not submitted, display form.
if (!isset($_POST['start'])){
?>
<?php
} //If form is submitted, process input
else{ 
switch($_POST)
{
case yes1:
echo $questions[0];
repeat();
break;
case no1:
echo $questions[1];
repeat();
break;
case yes2:
echo $questions[2];
repeat();
break;
case no2:
$questions[3];
repeat();
}
}
?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-24T19:40:11.813

为此，您需要维护请求之间的状态。

```
 function repeat() {
      $number = $_SESSION['number'];
      $number++;
      echo "<form method ='post' action='Creatures.php'>
     <input type='submit' name='answer' value='Yes' />
     <input type='submit' name='answer' value='No' />
     </form>";
     $_SESSION['number'] = $number;
 } 
```

转变

```
 if($_POST['answer']=='Yes') {
      switch($_SESSION['number']) {
            case 1:
            break;
            case 2:
            break;
      }
   } else {
      switch($_SESSION['number']) {
            case 1:
            break;
            case 2:
            break;
      }
   } 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-01-19T05:05:06.327

我不同意接受的答案：这是一种无需会话即可进行的更简单方法：

```
function repeat() {
      static $number = 0;
      $number++;
      echo "<form method ='post' action='Creatures.php'>
     <input type='submit' name='answer' value='Yes' />
     <input type='submit' name='answer' value='No' />
     </form>";
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T19:37:26.937

您必须将“数字”存储在会话或 cookie 中，因为每次提交（重新加载）页面时它都会丢失该值。

# python - Ubuntu AMI 不加载用户数据

> ID：10743809
> 
> 赞同：9
> 
> 时间：2012-05-24T19:08:56.460
> 
> 标签：python, ubuntu, amazon-ec2, amazon-web-services, user-data

我正在尝试通过 boto 的 ec2.run_instances(..., user_data=USER_DATA) 将用户数据加载到 Ubuntu 12.04 LTS AMI（ami-a29943cb，但我尝试了其他一些无济于事）。同样，我在通过 AWS 控制台启动实例时手动提供用户数据也没有成功。/var/logs/syslog 中没有我尝试过的任何方法的结果或消息。

USER_DATA 类似于以下内容，作为字符串从文件中读取：

```
#!/usr/bin/env python

import boto

AWS_BOOTSTRAP_BUCKET  = ''
AWS_ACCESS_KEY_ID     = ''
AWS_SECRET_ACCESS_KEY = ''

# Pull processing script from S3.
print 'Bootstrapping started.....'
print 'Connecting to S3...'
s3     = boto.connect_s3(AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY)
bucket = s3.get_bucket(AWS_BOOTSTRAP_BUCKET)
print 'Downloading bootstrap file...'
key    = bucket.get_key('xxx')
key.get_contents_to_filename('xxx')

print 'Importing Bootstrap file...'
import xxx
xxx.process()

# Shut down the EC2 instance running this process.
print 'Shutting down this instance...'
import socket
desired_hostname = socket.gethostname()
ec2 = boto.connect_ec2(AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY)
reservations = ec2.get_all_instances()
for reservation in reservations:
    for instance in reservation.instances:
        if desired_hostname in instance.private_dns_name:
            instance.terminate() 
```

我还尝试将文件上传到公共 S3 存储桶并以这种方式加载它，再次无济于事：

```
#include
https://s3.amazonaws.com/bucket/file.py 
```

有人在这方面有什么建议吗？我完全误解了 user-data/cloud-init 的目的，还是只是在我尝试使用的 AMI 中损坏了该技术？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-05-24T22:40:28.373

如果没有错误消息，很难知道发生了什么，但您可以查看以下几个地方：

1.  该文件`/var/log/cloud-init.log`通常会包含在实例引导期间发生的任何错误（例如 boto 导入失败）。
2.  该目录`/var/lib/cloud/instance`将包含下载到实例的原始脚本和用户数据
3.  您可以通过右键单击实例来查看/编辑 AWS 控制台内的 USER_DATA，以查看 boto 是否正确填充它。

查看这些地方应该有助于提供清晰性。

我知道 Ubuntu 12.04 带有 boto 2.2.2：

```
root@vanilla-562c:/var/lib/cloud/instance# python
Python 2.7.3 (default, Apr 20 2012, 22:44:07) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import boto
>>> boto.__version__
'2.2.2' 
```

..但我想知道它是否真的可以在运行时在您的 PYTHONPATH 中访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-08-31T16:39:52.660

快速清单：

1 ) SSH 进入您的实例。
2 ) 继续运行`cat`并将`/var/log/cloud-init-output.log`其转储到一个不错的文本文件中。
3 ) 你会看到包含以下结构的多个块：

```
Dependencies Resolved

================================================================================
 Package                    Arch      Version               Repository     Size
================================================================================
Installing:

Transaction Summary
================================================================================
Install  X Package (+Y Dependent packages) 
```

每个块都是根据`user data`您提供给 EC2 实例的内容创建的（所有脚本都存储在 下`/var/lib/cloud/instance/scripts`）。

4) 搜索关键字，如`Failed`，或 。`Error``WARNING``/var/lib/cloud/instance/scripts/`

例如，如果出现以下错误：

```
/var/lib/cloud/instance/scripts/part-001: line 10: vncpasswd: command not found
cp: cannot stat '/lib/systemd/system/vncserver@.service': No such file or directory
sed: can't read /etc/systemd/system/vncserver@.service: No such file or directory
Failed to execute operation: No such file or directory
Failed to start vncserver@:1.service: Unit not found.
Loaded plugins: extras_suggestions, langpacks, priorities, update-motd
Cleaning repos: amzn2-core amzn2extra-docker amzn2extra-epel 
```

* * *

(*) 您还可以快速查看结尾`/var/log/cloud-init-output.log`或包含一般错误消息，这些消息将通知您在执行**用户数据**脚本`/var/log/cloud-init.log`时发生错误的事实。

 **`/var/log/cloud-init-output.log`上面错误中的结尾：

```
Is this ok [y/d/N]: Exiting on user command
Your transaction was saved, rerun it with:
 yum load-transaction /tmp/yum_save_tx.2020-08-31.15-14.VpTvV1.yumtx
Aug 31 15:14:00 cloud-init[3532]: util.py[WARNING]: Failed running /var/lib/cloud/instance/scripts/part-001 [1]
Aug 31 15:14:00 cloud-init[3532]: cc_scripts_user.py[WARNING]: Failed to run module scripts-user (scripts in /var/lib/cloud/instance/scripts)
Aug 31 15:14:00 cloud-init[3532]: util.py[WARNING]: Running module scripts-user (<module 'cloudinit.config.cc_scripts_user' from '/usr/lib/python2.7/site-packages/cloudinit/config/cc_scripts_user.pyc'>) failed
Cloud-init v. 19.3-3.amzn2 finished at Mon, 31 Aug 2020 15:14:00 +0000\. Datasource DataSourceEc2\.  Up 87.44 seconds 
```

和结束`/var/log/cloud-init.log`：

```
Aug 31 15:14:00 cloud-init[3532]: util.py[DEBUG]: Failed running /var/lib/cloud/instance/scripts/part-001 [1]
    Traceback (most recent call last):
      File "/usr/lib/python2.7/site-packages/cloudinit/util.py", line 910, in runparts
        subp(prefix + [exe_path], capture=False, shell=True)
      File "/usr/lib/python2.7/site-packages/cloudinit/util.py", line 2105, in subp
        cmd=args)
    ProcessExecutionError: Unexpected error while running command.
    Command: ['/var/lib/cloud/instance/scripts/part-001']
    Exit code: 1
    Reason: -
    Stdout: -
    Stderr: -
    cc_scripts_user.py[WARNING]: Failed to run module scripts-user (scripts in /var/lib/cloud/instance/scripts) 
```**

# java - Java泛型：在集合中添加错误的类型

> ID：10743810
> 
> 赞同：8
> 
> 时间：2012-05-24T19:08:59.883
> 
> 标签：java, generics, bounded-wildcard

谁能解释一下？

我有这几节课：

```
abstract class Animal {
    public void eat() {
        System.out.println("Animal is eating");
    }
}

class Dog extends Animal {
    public void woof() {
        System.out.println("woof");
    }
}

class Cat extends Animal {
    public void meow() {
        System.out.println("meow");
    }
} 
```

这是行动：

```
import java.util.ArrayList;
import java.util.List;

public class TestClass {

    public static void main(String[] args) {
        new TestClass().go();
    }

    public void go() {
        List<Dog> animals = new ArrayList<Dog>();
        animals.add(new Dog());
        animals.add(new Dog());
        doAction(animals);
    }

    public <T extends Animal> void doAction(List<T> animals) {

        animals.add((T) new Cat()); // why is it possible? 
                                    // Variable **animals** is List<Dog>, 
                                    // it is wrong, that I can add a Cat!

        for (Animal animal: animals) {
            if (animal instanceof Cat) {
                ((Cat)animal).meow();
            }
            if (animal instanceof Dog) {
                ((Dog)animal).woof();
            }
        }
    }
} 
```

此示例编译没有错误，输出为：

```
woof
woof
meow 
```

但是我怎样才能添加猫狗列表？猫是怎么变成狗的？

我使用：java版本“1.6.0_24”。OpenJDK 运行时环境 (IcedTea6 1.11.1) (6b24-1.11.1-4ubuntu3)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T20:13:18.703

好的，这是泛型的处理（任何使用强制转换的hackery在运行时都可能不安全，因为泛型通过[擦除](http://en.wikipedia.org/wiki/Type_erasure)工作）：

您可以分配以相同方式参数化的子类型，例如

```
List<Animal> l = new ArrayList<Animal>(); 
```

并且您可以添加属于此参数类型或其子类的项目，例如

```
l.add(new Cat());
l.add(new Dog()); 
```

但你只能得到参数的类型：

```
Animal a = l.get(0);
Cat c = l.get(0); //disallowed
Dog d = l.get(1); //disallowed 
```

现在，您可以使用通配符设置参数类型的上限

```
List<? extends Animal> l = new ArrayList<Animal>();
List<? extends Animal> l = new ArrayList<Cat>();
List<? extends Animal> l = new ArrayList<Dog>(); 
```

但您无法向此列表添加新项目

```
l.add(new Cat()); // disallowed
l.add(new Dog()); // disallowed 
```

在您的情况下，您有 a`List<T>`所以它有一个方法`add(T t)`，因此如果您转换为`T`. 但是`T`上面有类型，`Animal`所以你甚至不应该尝试添加到这个列表中，但它被视为具体类型，这就是它允许强制转换的原因。但是，这可能会抛出一个`ClassCastException`.

而且您只能检索上限类型的项目

```
Animal a = l.get(0);
Cat c = l.get(0); //disallowed
Dog d = l.get(1); //disallowed 
```

或者您可以设置下限参数类型

```
List<? super Animal> l1 = new ArrayList<Object>();
List<? super Animal> l1 = new ArrayList<Animal>();
List<? super Cat> l2 = new ArrayList<Animal>();
List<? super Cat> l2 = new ArrayList<Cat>();
List<? super Dog> l3 = new ArrayList<Animal>();
List<? super Dog> l3 = new ArrayList<Dog>(); 
```

您可以添加作为下限类型子类型的对象

```
l1.add(new Cat());
l1.add(new Dog());
l1.add(new Object()); //disallowed 
```

但检索到的所有对象都是 Object 类型

```
Object o = l1.get(0);
Animal a = l1.get(0); //disallowed
Cat c = l2.get(0); //disallowed
Dog d = l3.get(0); //disallowed 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T19:26:50.937

不要期望泛型执行运行时类型检查。在编译期间，Java 执行所有类型推断，实例化所有类型，......然后从代码中删除所有泛型类型的痕迹。在运行时，类型是 List，而不是 List<T> 或 List<Dog>。

主要问题是，为什么它允许您强制转换`new Cat()`为 type `T extends Animal`，并且只对未经检查的转换发出警告，这是有效的。类型系统的某些不健全的特性使得将这种可疑的类型合法化成为必要。

如果您希望编译器阻止向列表中添加*任何内容*，则应使用通配符：

```
public void doAction(List< ? extends Animal > animals) {
    animals.add(new Cat()); // disallowed by compiler
    animals.add((Animal)new Cat()); // disallowed by compiler

    for (Animal animal: animals) {
        if (animal instanceof Cat) {
            ((Cat)animal).meow();
        }
        if (animal instanceof Dog) {
            ((Dog)animal).woof();
        }
    }
} 
```

PS 循环体中可疑的向下转换是一个完美的例子，说明 Java 对于不相交的总和（变体）类型是多么蹩脚。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T19:21:15.420

这与类型擦除有关。该类型在运行时不保留。实际上，List 在运行时变成了类型对象的列表。这就是为什么您会收到编译器警告或应该在 animals.add((T) new Cat()); 上的原因。在编译时，Cat 确实扩展了 T 类型的 animal。但是，它不能强制此时 Dog 在列表中，因此会发出编译器警告。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T19:16:33.363

泛型仅适用于编译时安全。在您的情况下，编译器如何知道会发生不好的事情？它假定您的类型定义，并以此为基础。做更多的工作意味着编译器需要更精细的工作，但是有扩展的静态检查器和其他工具可以捕获这个预运行时。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T19:21:57.473

只要说有这样一个`T`演员可以成功就够了。至于编译后的代码，和你写的完全一样`animals.add((Animal)new Cat());`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-24T19:33:00.220

您的函数`doAction`由`T`扩展类的类型参数化`Animal`。所以它可以是类型的对象，也可以`Dog`是`Cat`. **您还应该注意形式参数**和**有效参数**
之间的区别。形式参数是您在定义方法时使用的参数，在您的情况下是（将其用作快捷方式）。有效参数是您在调用方法时“赋予”方法的参数，此处为。. 让我们来 看看。Animals 是一个列表，其中元素的类型是or ，所以没有错误，因为这是形式参数的类型。 ****`List <T>`
`List<Dog>`

`animals.add((T) new Cat())``doAction()``T``Dog``Cat`
所以这就是原因。这是使用参数化类的好处之一。****

# regex - 使用正则表达式路由传入请求（Web 服务器）

> ID：10743811
> 
> 赞同：0
> 
> 时间：2012-05-24T19:09:01.883
> 
> 标签：regex, node.js, httprequest

我正在考虑构建一个 Web 服务器，该服务器通过将 url 与定义 regEx 属性的服务列表中的 regex 匹配来路由请求 - 第一个匹配 url 的服务处理请求。

我正在寻求建议。有没有人做过这样的事情？使用这样的正则表达式听起来是个坏主意吗？如果是这样，可能的副作用是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:38:19.400

是的，这是个坏主意。你不需要重新发明轮子。对于 Web 服务器，您可能会有基本请求，/users/all/phones 或 /items/cool/ascending/top10.. 并且您不需要高级正则表达式。即使您需要，一个好的库 Express 也可以处理它们。看看[ExpressJS Routing](http://expressjs.com/guide.html#routing)，它已经设置好并且可能已经优化，所以你不需要为你自己的路由代码而烦恼。

# windows - 在 VBS 中执行 OpenLDAP 搜索

> ID：10743812
> 
> 赞同：0
> 
> 时间：2012-05-24T19:09:01.920
> 
> 标签：windows, vbscript, ldap

我正在尝试将 Thunderbird/Firefox 配置文件自定义脚本从 OS X 移植到 Windows 7。在 OS X 上它们非常简单，`ldapsearch -x -h ldap.place.edu uid="username"`用于从 OpenLDAP 服务器检索电子邮件地址、真实姓名等，然后将这些变量放入各种配置文件中在加载应用程序之前。

在 Windows 上这要复杂得多，我开始尝试使用 Windows Server 2003 附带的 search.vbs activedirectory/ldap 工具，但它不能正常工作，我还尝试简单地编写一个快速的 vbs 脚本来连接和查询，但我总是得到错误，服务器不会处理请求或者只是失败......这是我最新的vbs脚本，它完全失败了......

```
Dim oConn,oRS,vSearch,vCount,vMailList,vValue,vProblem,vMsg

vProblem = False

vSearch = "(uid=username)"

Set oConn = CreateObject("ADODB.Connection")
oConn.Provider = "ADsDSOObject"
oConn.Open "ADs Provider", "ou=people,dc=place,dc=edu"

Set oRS = oConn.Execute("<LDAP://ldap.place.edu/dc=edu/dc=place>;" & vSearch &_";cn,mail")

vCount = 1
While not oRS.EOF

   For Each vValue in oRS.Fields(0).value
      WScript.Echo vValue
   Next

vCount = vCount + 1
oRS.MoveNext
Wend 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-30T22:42:41.990

不久前想通了，完全忘记了这一点，所以就在这里。我意识到我正在尝试连接到匿名服务器，但提供了一个 DN，同时暗示了身份验证的密码级别，而不是我需要的简单版本。

```
'Server name
sRoot = "LDAP://server"    
Dim oDS: Set oDS = GetObject("LDAP:")
'Don't provide a DN for anonymous authentication, also &H0010 implies simple auth mode
Dim oAuth: Set oAuth = oDS.OpenDSObject(sRoot, "", "", &H0010)
Dim oConn: Set oConn = CreateObject("ADODB.Connection")
oConn.Provider = "ADSDSOObject"
oConn.Open "Ads Provider", sDN
Dim rs
'Execute query
Set rs = oConn.Execute("<" & sRoot & ">;(uid=testuser);cn,mail;subtree")
'retrieve values
z = rs.Fields.Item(0).Value
x = rs.Fields.Item(1).Value 
```

# jquery - 如何在灯箱 jQuery 上加载 JSP

> ID：10743818
> 
> 赞同：0
> 
> 时间：2012-05-24T19:09:30.470
> 
> 标签：jquery, jsp, jakarta-ee, lightbox

我想在灯箱上显示 JSP 页面。用于此目的的最佳 jQuery API 如何以及什么是最好的！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:34:48.750

你将无法做到这一点。来自灯箱网站：

> Lightbox 是一个简单的、不显眼的脚本，用于将图像叠加在当前页面的顶部。设置简单，适用于所有现代浏览器。

灯箱用于*图像*，而不是网页。粗略的等价物是 iframe，尽管我不建议使用它们。为您正在尝试做的事情想一个更合适的实现。

# javascript - 用户单击提交时的等待指示器

> ID：10743821
> 
> 赞同：0
> 
> 时间：2012-05-24T19:09:43.230
> 
> 标签：javascript, iphone, html, ios

我有一个带有 Web 视图的应用程序，我在其中显示反馈 HTML 页面，我只需要在用户触摸 HTML 提交按钮时显示等待指示符，并且最好还禁用 HTML 表单中的提交按钮。

iOS 端或 HTML/Javascript 端的解决方案都可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T19:16:43.437

提交 HTML 表单后，当前页面上的所有执行都会停止。您无法继续执行计时器脚本。

大多数浏览器已经显示忙碌指示符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T19:18:47.843

iOS 在 UIKit 中包含一个用于标准微调器的控件，称为`UIActivityIndicatorView`. [https://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIActivityIndi​​catorView_Class/Reference/UIActivityIndi​​catorView.html](https://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIActivityIndicatorView_Class/Reference/UIActivityIndicatorView.html)。您将分别调用实例的 startAnimating 和 stopAnimating 方法来开始和结束动画。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T19:21:38.413

如果您想在 iOS 中以编程方式创建活动指示器：

```
UIActivityIndicatorView *myIndicator = [[UIActivityIndicatorView alloc] initWithActivityIndicatorStyle:UIActivityIndicatorViewStyleWhiteLarge]];
myIndicator.center = CGPointMake(160, 240);
myIndicator.hidesWhenStopped = NO;
[self.view addSubview:myIndicator]; 
```

然后启动/停止它：

```
[myIndicator startAnimating];
[myIndicator stopAnimating]; 
```

如前所述，您不必禁用 HTML 表单提交按钮，该页面上没有进一步的执行。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-24T19:31:44.110

如果您有一个名称和 ID 为“myForm”的表单、一个 ID 为“myButton”的按钮（该按钮不能是类型或名称为“submit”）和一个 ID 为“waitMessage”的空 div，您可以在其中插入等待消息或 gif，然后你可以使用这样的东西：

```
var myButton1 = document.getElementById("myButton");

myButton1.onclick = function (){
   getElementById("waitMessage").innerHTML = "Whatever waiting message or html code you want";
   myButton1.disabled=true;
   document.forms["myform"].submit();
} 
```

# objective-c - 在窗口的拖动区域显示图像...如何单击图像仍然拖动窗口？

> ID：10743822
> 
> 赞同：0
> 
> 时间：2012-05-24T19:09:49.517
> 
> 标签：objective-c, xcode, cocoa, interface-builder

我正在使用 NSImageView 在 NSWindow 上显示图像。图像将位于用户通常可以拖动窗口的区域的顶部。

窗口的样式使得您可以拖动窗口并不容易......因此我需要这个小图像来表明您实际上*可以拖动窗口。*

不幸的是，我不知道如何点击图像拖动窗口！它需要这个。拖动窗口标题区域中的其他任何地方都可以正常工作。

如何使单击并按住图像拖动整个窗口？

如果您能告诉我如何在鼠标悬停在此图像上时为鼠标提供“拖动图标”光标，则可以加分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-25T01:11:54.213

我认为最简单的方法是继承 NSImageView 并将 YES 返回到 mouseDownCanMoveWindow（它继承自 NSView）。

```
-(BOOL)mouseDownCanMoveWindow {
    return YES;
} 
```

当鼠标进入图像视图时，您可以通过在 NSImageView 子类中像这样覆盖 resetCursorRects 来设置新光标（我不知道您所说的“拖动图标”光标是什么意思，因此本示例使用指向手形光标：

```
- (void)resetCursorRects {
    [self addCursorRect:self.bounds cursor:[NSCursor pointingHandCursor]];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T19:14:26.670

`NSImageView`s 有自己的鼠标处理。要更改视图的行为方式，您必须对`NSView`或进行子类化`NSImageView`。

# .net - 管理 XML 文档

> ID：10743823
> 
> 赞同：0
> 
> 时间：2012-05-24T19:09:51.383
> 
> 标签：.net, xml

我找不到一个简单的方法来做我所要求的。我有一个对象：

```
public class Item
{
    public string Name { get; set; }
} 
```

我想：

1）创建xml文档：

```
<?xml version="1.0" encoding="utf-8"?>
<Items>
  <Item Name="Item1"/>
  <Item Name="Item2"/>
</Items> 
```

2）读取xml文档：

```
for each NodeT node in MyXMLDocument
{
    Item i = new Item(node);
} 
```

3）管理xml文档，例如删除Item1并添加Item3（或更改属性值）

```
<?xml version="1.0" encoding="utf-8"?>
<Items>
  <Item Name="Item2"/>
  <Item Name="Item3"/>
</Items> 
```

我怎样才能尽可能简单地做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:19:24.920

使用 Linq 转 XML：

[MSDN - Linq 到 XML](http://msdn.microsoft.com/en-us/library/bb387061.aspx)

[LINQ 转 XML](http://www.codeproject.com/Articles/24376/LINQ-to-XML)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T19:23:46.063

在我看来，XML 序列化将是最简单的方法，尽管您必须`<items>`为`<ArrayOfItems>`

您可以将对象序列化为字符串，然后将它们保存到文件中：

```
string ToXml(object instance)
{
    XmlSerializer serializer = new XmlSerializer(instance.GetType());
    StringBuilder builder = new StringBuilder();

    using (StringWriter writer = new StringWriter(builder))
    {
        serializer.Serialize(writer, instance);
        return builder.ToString();
    }
} 
```

将它们从 XML 读回 .NET 对象只涉及调用`Deserialize`. 如果需要，您还可以使用属性自定义对象，允许您选择它们​​在 XML 中的显示方式。

# java - 使用 Java 从与属性名称匹配的 XML 文件中删除所有 xml 属性？

> ID：10743824
> 
> 赞同：8
> 
> 时间：2012-05-24T19:10:08.120
> 
> 标签：java, xml

我正在尝试使用 Java 从与属性名称匹配的 XML 文件中删除所有 xml 属性。我被困在这一点上。在这段代码的底部，我能够在循环时获取每个节点的属性值，但我不知道如何从节点中完全删除该属性。有任何想法吗？

```
import java.io.IOException;
import java.io.StringWriter;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.transform.OutputKeys;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerConfigurationException;
import javax.xml.transform.TransformerException;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.TransformerFactoryConfigurationError;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;

import org.w3c.dom.*;
import org.xml.sax.SAXException;

public class StripAttribute { 

  public static void main(String[] args) { 

    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance(); 
    factory.setNamespaceAware(true); 
    org.w3c.dom.Document doc = null;
    NodeList nodes = null;
    try {
      DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();  
      DocumentBuilder db = dbf.newDocumentBuilder(); 
      doc = db.parse("a.xml");
      nodes = doc.getChildNodes();
    }  catch (IOException e) {
      e.printStackTrace();
    } catch (ParserConfigurationException e) {
      e.printStackTrace();
    } catch (SAXException e) {
      e.printStackTrace();
    }
    for ( int i = 0; i < nodes.getLength(); i++ ) { 
      String id = nodes.item(i).getNodeValue();
      if ( id.equals("siteKey")) {
        Element el = ((Attr) nodes.item(i)).getOwnerElement(); 
        el.removeAttribute(id);
      }
    } 

    Transformer transformer;
    StreamResult result = null;
    try {
      transformer = TransformerFactory.newInstance().newTransformer();
      transformer.setOutputProperty(OutputKeys.INDENT, "yes");
      result = new StreamResult(new StringWriter()); 
      DOMSource source = new DOMSource(doc); 
      transformer.transform(source, result); 
    } catch (TransformerConfigurationException e) {
      e.printStackTrace();
    } catch (TransformerFactoryConfigurationError e) {
      e.printStackTrace();
    } catch (TransformerException e) {
      e.printStackTrace();
    } 
    String xmlString = result.getWriter().toString(); 
    System.out.println(xmlString); 
  } 
} 
```

这是我要转换的 XML 示例：

[https://gist.github.com/2784907](https://gist.github.com/2784907)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-24T19:17:41.450

尝试：

```
for ( int i = 0; i < nodes.getLength(); i++ ) { 
    String id = nodes.item(i).getNodeValue();
    if ( id.equals("siteKey")) {
        //doc.removeChild(nodes.item(i));
        Element el = ((Attr) nodes.item(i)).getOwnerElement(); 
        el.removeAttribute(id);
    }
} 
```

查询返回的节点似乎与文档分离，因此 getParentNode 为空。- 不，它们没有分离，我更新了代码。

我发现一篇[文章](http://www.ibm.com/developerworks/xml/library/x-xpathjava/index.html)说返回的节点`XPathExpression`仍然附加到文档中。

您是原始代码+上述更改：

```
public static void main(String[] args) throws Exception {

    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    factory.setNamespaceAware(true);
    Document doc = null;
    NodeList nodes = null;
    Set<String> ids = null;
    try {
        doc = factory.newDocumentBuilder().parse(new File("d:/a.xml"));

        XPathExpression expr = XPathFactory.newInstance().newXPath().compile("//@siteKey");
        ids = new HashSet<String>();
        nodes = (NodeList) expr.evaluate(doc, XPathConstants.NODESET);
    } catch (SAXException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (ParserConfigurationException e) {
        e.printStackTrace();
    } catch (XPathExpressionException e) {
        e.printStackTrace();
    }

    for (int i = 0; i < nodes.getLength(); i++) {
        String id = nodes.item(i).getNodeValue();
        if (id.equals("siteKey")) {
            Element el = ((Attr) nodes.item(i)).getOwnerElement();
            el.removeAttribute(id);
        }
    }

    int dupes = 0;
    for (int i = 0; i < nodes.getLength(); i++) {
        String id = nodes.item(i).getNodeValue();
        if (ids.contains(id)) {
            System.out.format("%s is duplicate\n\n", id);
            dupes++;
        } else {
            ids.add(id);
        }
    }

    System.out.format("Total ids = %d\n Total Duplicates = %d\n", ids.size(), dupes);

    Transformer transformer;
    StreamResult result = null;
    try {
        transformer = TransformerFactory.newInstance().newTransformer();
        transformer.setOutputProperty(OutputKeys.INDENT, "yes");
        result = new StreamResult(new StringWriter());
        DOMSource source = new DOMSource(doc);
        transformer.transform(source, result);
    } catch (TransformerConfigurationException e) {
        e.printStackTrace();
    } catch (TransformerFactoryConfigurationError e) {
        e.printStackTrace();
    } catch (TransformerException e) {
        e.printStackTrace();
    }

    String xmlString = result.getWriter().toString();
    System.out.println(xmlString);

} 
```

更新：

```
for (int i = 0; i < nodes.getLength(); i++) {
    String id = nodes.item(i).getNodeValue();
    Element el = ((Attr) nodes.item(i)).getOwnerElement();
    el.removeAttribute(id);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T00:20:36.693

这是解决问题的最终代码：

```
import java.io.File;
import java.io.IOException;
import java.io.StringWriter;
import java.util.HashSet;
import java.util.Set;

import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;
import javax.xml.transform.OutputKeys;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerConfigurationException;
import javax.xml.transform.TransformerException;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.TransformerFactoryConfigurationError;
import javax.xml.transform.dom.DOMSource;
import javax.xml.transform.stream.StreamResult;
import javax.xml.xpath.XPathConstants;
import javax.xml.xpath.XPathExpression;
import javax.xml.xpath.XPathExpressionException;
import javax.xml.xpath.XPathFactory;

import org.w3c.dom.*;
import org.xml.sax.SAXException;

public class StripAttributes { 

    public static void main(String[] args) throws Exception {

        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        factory.setNamespaceAware(true);
        Document doc = null;
        NodeList nodes = null;
        Set<String> ids = null;
        try {
            doc = factory.newDocumentBuilder().parse(new File("a.xml"));

            XPathExpression expr = XPathFactory.newInstance().newXPath()
                    .compile("//@siteKey");
            ids = new HashSet<String>();
            nodes = (NodeList) expr.evaluate(doc, XPathConstants.NODESET);
        } catch (SAXException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (ParserConfigurationException e) {
            e.printStackTrace();
        } catch (XPathExpressionException e) {
            e.printStackTrace();
        }

        for (int i = 0; i < nodes.getLength(); i++) {
            System.out.println("."); //progress indicator
            Element el = ((Attr) nodes.item(i)).getOwnerElement();
            if ( el.hasAttribute("siteKey") ) el.removeAttribute("siteKey");
        }

        int dupes = 0;
        for (int i = 0; i < nodes.getLength(); i++) {
            String id = nodes.item(i).getNodeValue();
            if (ids.contains(id)) {
                System.out.format("%s is duplicate\n\n", id);
                dupes++;
            } else {
                ids.add(id);
            }
        }

        System.out.format("Total ids = %d\n Total Duplicates = %d\n", ids
                .size(), dupes);

        Transformer transformer;
        StreamResult result = null;
        try {
            transformer = TransformerFactory.newInstance().newTransformer();
            transformer.setOutputProperty(OutputKeys.INDENT, "yes");
            result = new StreamResult(new StringWriter());
            DOMSource source = new DOMSource(doc);
            transformer.transform(source, result);
        } catch (TransformerConfigurationException e) {
            e.printStackTrace();
        } catch (TransformerFactoryConfigurationError e) {
            e.printStackTrace();
        } catch (TransformerException e) {
            e.printStackTrace();
        }

        String xmlString = result.getWriter().toString();
        System.out.println(xmlString);

    } 
} 
```

此外，这里是此代码的 Groovy 翻译的链接：

[https://gist.github.com/2789163](https://gist.github.com/2789163)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-09T01:17:30.320

```
NamedNodeMap attributes = node.getAttributes();
attributes.removeNamedItem(attName); 
```

# cocoa - NSTableView 未填充

> ID：10743826
> 
> 赞同：0
> 
> 时间：2012-05-24T19:10:14.930
> 
> 标签：cocoa, nsarray, nstableview

在过去的 7 个小时里，我一直试图让这个 NSTableView 填充。我正在尝试获取所有当前正在运行的应用程序的列表并将它们放入 NSTableView。最终，我想解析结果并将 PID 组织在一列中，将应用程序包组织在另一列中。我在“ return [listOfWindows objectAtIndex:row];”上收到 EXC_BAD_ACCESS 错误 我目前正在使用 Xcode 4.3.2 并运行 OS X Lion 10.7.4。提前谢谢大家！

```
@interface AppDelegate : NSObject <NSApplicationDelegate>
{
    IBOutlet NSMenu *statusMenu;
    IBOutlet NSButton *button;
    IBOutlet NSWindow *menuWindow;
    IBOutlet NSTableView *proTable;
    NSArray *listOfWindows;
    IBOutlet NSArrayController *arrayController;
    AppDelegate *mainMenu;
    NSWorkspace  *workSpace;

    NSStatusItem *statusItem;
}

@property (assign) IBOutlet NSWindow *window;

-(IBAction)loadConfig:(id)sender;
@end

#import "AppDelegate.h"
@implementation AppDelegate
@synthesize window = _window;

- (void) awakeFromNib
{   
[[NSDistributedNotificationCenter defaultCenter] addObserver:self
                                                                         selector:@selector(loadMenu:) 
                                                              name:@"WhiteBox"
                                                      object:nil];
[self addStatusItem];

 //[proTable setDataSource:self];

listOfWindows = [[NSWorkspace sharedWorkspace] runningApplications];
NSLog(@"index %@", listOfWindows);

int y = 0;
y = [listOfWindows count];
NSLog(@"y = %d", y);

[proTable setAllowsMultipleSelection:YES];   
    }

-(void)applicationWillTerminate
{
    NSLog(@"Will Terminate");
}

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{

}

-(void)applicationDidResignActive:(NSNotification *)notification
{
    NSLog(@"Resign Active");

}

-(void) addStatusItem
{
    //Create a variable length status item from the system statusBar
    statusItem = [[NSStatusBar systemStatusBar] statusItemWithLength:NSVariableStatusItemLength];
    [statusItem retain];

//Set a Title for it
[statusItem setTitle:@"Status Item"];

    //Set an Image and an alternate image
    //[statusItem setImage:[NSImage imageNamed:@"lnc"]];
    //[statusItem setAlternateImage: [NSImage imageNamed:@"status"]];

    //Add a Tool Tip
    [statusItem setToolTip:@"Status Item Tooltip"];

    //Choose to highlight the item when clicked
    [statusItem setHighlightMode:YES];

    //To Trigger a method on click use the following two lines of code
[statusItem setMenu:statusMenu];
    //[statusItem setAction:@selector(loadMenu:)];

}

-(IBAction)loadConfig:(id)sender
{

    if(! [menuWindow isVisible] )
    {
        [menuWindow makeKeyAndOrderFront:sender];
    } else {
        [menuWindow performClose:sender];
    }

}

- (NSInteger)numberOfRowsInTableView:(NSTableView *)tableView
{
    return [listOfWindows count];
}
- (id)tableView:(NSTableView *)tableView 
objectValueForTableColumn:(NSTableColumn *)tableColumn 
            row:(NSInteger)row
{
    return [listOfWindows objectAtIndex:row];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T00:34:34.090

我得到：-[NSRunningApplication copyWithZone:]: 运行代码时出现无法识别的选择器错误。这可以通过将 tableView:objectValueForTableColumn:row: 中的返回行更改为来解决

返回 [[listOfWindows objectAtIndex:row]localizedName];

NSRunningApplication 不符合 NSCopying，所以我不知道您是否可以将该类的实例放在表视图中。但是，您可以获取它的属性，如本地化名称、processIdentifier 和 bundleIdentifier。

我之前在使用不实现 NSCopying 的类时遇到过这个问题，我很高兴知道是否有人知道在表格视图或大纲视图中使用这些类的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T20:48:56.007

表视图的数据源是什么对象？我在您发布的实现[`NSTableViewDataSource`协议](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Protocols/NSTableDataSource_Protocol/Reference/Reference.html)的源代码中看不到任何对象。

此外，您是否尝试在各种数据源方法中设置断点以查看调试器是否在其中停止？如果没有，这通常是您的数据源未连接到表视图的好兆头。

# c++ - 提高 SQLite SELECT 性能

> ID：10743830
> 
> 赞同：1
> 
> 时间：2012-05-24T19:10:24.480
> 
> 标签：c++, c, visual-studio-2008, sqlite

我有一个程序可以在 SQL 查询中进行一些数学运算。SQLite 表中有数十万行（一些设备测量值），使用此查询，应用程序将这些测量值分成一组，例如 10000 条记录，并计算每组的平均值。然后它返回每个组的平均值。

查询如下所示：

```
SELECT strftime('%s',Min(Stamp)) AS DateTimeStamp, 
AVG(P) AS MeasuredValue, 
((100 * (strftime('%s', [Stamp]) - 1334580095)) / 
    (1336504574 - 1334580095)) AS SubIntervalNumber 
FROM LogValues 
WHERE ((DeviceID=1) AND (Stamp >=  datetime(1334580095, 'unixepoch')) AND 
    (Stamp <= datetime(1336504574, 'unixepoch'))) 
GROUP BY ((100 * (strftime('%s', [Stamp]) - 1334580095)) / 
    (1336504574 - 1334580095)) ORDER BY MIN(Stamp) 
```

这个请求中的数字被我的应用程序替换为一些值。我不知道我是否可以进一步优化这个请求（如果有人可以帮助我这样做，我真的很感激）..

可以使用 SQLite 命令行 shell (sqlite3.exe) 执行此 SQL 查询。在我的 Intel Core i5 机器上，需要 4 秒才能完成（数据库中有 100000 条记录正在处理中）。

现在，如果我使用 sqlite.h C 接口编写 C 程序，我将等待 14 秒以完成完全相同的查询。这个 C 程序在这 14 秒内“等待”第一个 sqlite3_step() 函数调用（任何随后的 sqlite3_step() 调用都会立即执行）。

我从[Sqlite 下载页面](http://www.sqlite.org/download.html "SQLite 下载页面")下载了 SQLite 命令行 shell 的源代码并使用 Visual Studio 2008 构建它。我运行它并执行了查询。又是 14 秒。

那么为什么从 sqlite 网站下载的预构建的命令行工具只需要 4 秒，而我构建的相同工具的执行时间要长 4 倍呢？

我正在运行 Windows 64 位。预建工具是一个 x86 进程。它似乎也没有经过多核优化——在任务管理器中，在查询执行期间，我只能看到一个核心繁忙，无论是由我构建的还是预构建的 SQLite shell。

有什么方法可以让我的 C 程序像预建的命令行工具一样快地执行这个查询？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:32:54.917

您是否在查询之前和之后记录时间戳？不看代码就很难知道你的程序被搁置在哪里。

# mysql - 当表具有 BIGINT 且唯一的列时，mysql LOAD DATA 出现问题

> ID：10743831
> 
> 赞同：1
> 
> 时间：2012-05-24T19:10:25.570
> 
> 标签：mysql, sql, load-data-infile

所以表模式看起来像：

```
field - type - index

'id' - INT - PRI
'event_id' - BIGINT(20) - UNI
co1 ... colN (no indexes) 
```

加载数据命令：

`LOAD DATA LOCAL INFILE 'my-file' REPLACE INTO TABLE mydb.mytable (event_id, col1 .. colN)`

并得到错误：

`ERROR 1062 (23000) at line 1: Duplicate entry '2147483647' for key 1`

“key 1”指的是“event_id”上的唯一键。

更多上下文： (1) 加载数据时表为空。(2) 当我在源文件中 grep 2147483647 时，我什么也得不到 (3) 2147483647 是整数最大值 (4) 我实际上并没有在 'id' 中插入任何值——它只是自动递增 (5) 我正在使用LOAD DATA 中的 'REPLACE' 关键字，所以即使有骗子，它应该知道如何处理它们？

这表明存在一些 int 溢出问题（即，我认为源数据或表中没有任何真正的欺骗），并且确实在 'my-file' 中为 'event_id' 的值都超过了整数最大限制. 但是，错误很奇怪，因为“event_id”列是 BIGINT。

作为临时修复，我删除了“event_id”上的唯一索引，并且 LOAD DATA 命令起作用了！'event_id' 中的值都很好，没有被截断或任何东西。所以处理这些值的表没有任何问题，但不知何故 LOAD DATA 正在检查唯一性，但作为一个整数？

有没有人遇到过类似的事情？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:14:18.633

所以这意味着“2147483647”已经存在于该数据库中标记为键的字段中。只需从该字段中删除密钥，就可以了！

编辑：如您的问题所述， event_id 是您的主键 - 您不能在主键中两次具有相同的值。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T19:26:22.007

问题不在于数据类型，

问题是你只有 2 个字段，一个是 PK，另一个是 UNIQUE，所以你不可能重复一个值。当您进行插入或加载数据时，它会尝试添加两次具有此值“2147483647”的条目，您有多种方法可以修复它。

*   第一个尝试使用文本编辑器打开文件并找到重复的值并修复它，如果它不起作用，请尝试使用 mysqldump 或 phpmyadmin 导出数据并在文本编辑器中编辑文件。

*   再次导出，如果问题仍然存在，请尝试通过其他方法（mysqldum 或 phpmyadmin）导出数据并重新导入

*   尝试重新创建一个没有主键的表，你可以使用这个

    创建表 big_int_test (select * from table1); 它将复制没有 PK、INDEXES 和 FK 的表。

*   您可以删除索引和 UNIQUE 键约束，导入数据，修复表（删除重复值）并重新创建 PK 和 UNIQUE KEY（这是一种疯狂但它可以工作）

# ruby - 设置 net-ssh 连接时出现 SUPPORTED_TYPE 错误

> ID：10743834
> 
> 赞同：2
> 
> 时间：2012-05-24T19:10:43.980
> 
> 标签：ruby, cygwin, net-ssh

有没有人以前见过这个错误？我无法在源代码中找到对 SUPPORTED_TYPE 的任何引用...

> 8/gems/net-ssh-2.5.1/lib/net/ssh/known_hosts.rb:33:in 'map' 来自 /usr/lib/ruby/gems/1.8/gems/net-ssh-2.5.1/ lib/net/ssh/known_hosts.rb:33:in `search_in' from /usr/lib/ruby/gems/1.8/gems/net-ssh-2.5.1/lib/net/ssh/known_hosts.rb:27:在 /usr/lib/ruby/gems/1.8/gems/net-ssh-2.5.1/lib/net/ssh/transport/algorithms.rb:237 的“search_for”中：在“prepare_preferred_algorithms！”中 来自 /usr/lib/ruby/gems/1.8/gems/net-ssh-2.5.1/lib/net/ssh/transport/algorithms.rb:120:in 'initialize' from /usr/lib/ruby/gems/ 1.8/gems/net-ssh-2.5.1/lib/net/ssh/transport/session.rb:79:在 /usr/lib/ruby/gems/1.8/gems/net-ssh-2.5 的“新”中。 1/lib/net/ssh/transport/session.rb:79：在 /usr/lib/ruby/gems/1.8/gems/net-ssh-2.5.1/lib/net/ssh.rb 的“初始化”中： 186：在 /usr/lib/ruby/gems/1 的“新”中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T21:48:32.780

更简单的解决方案是使用net-ssh 的[这个分叉版本](http://github.com/nessche/net-ssh)，它修复了这个问题（官方 net-ssh gem 的下一个版本也应该修复它），如此[处](https://github.com/net-ssh/net-ssh/pull/46)所述。

如果您在通过 capistrano（我今天有）部署时遇到这个问题，您可以通过 Gemfile 从 github安装[这个 net-ssh 版本](http://github.com/nessche/net-ssh)`bundle exec cap deploy`，然后使用.

放入 Gemfile `gem 'net-ssh', :git => 'git://github.com/nessche/net-ssh.git'`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T20:21:54.657

这个问题似乎是在 5 月 24 日对 net-ssh gem 的 2.5.0 或 2.5.1 更新中引入的。您可以在此处找到常量 SUPPORTED_TYPE：

[http://net-ssh.github.com/net-ssh/classes/Net/SSH/KnownHosts.html](http://net-ssh.github.com/net-ssh/classes/Net/SSH/KnownHosts.html)

我不知道所有细节，但到目前为止，已经有几个解决方案可以解决这个问题。一种是删除您的 known_hosts 文件（或您尝试从该文件连接的特定主机），并且您可能能够连接，直到该主机再次添加到 known_hosts - 如果它在，它将返回相同的错误在那里，出于某种原因。

我发现的第二个选项是恢复到 gem 的 2.4.0 版本。我已在以下位置提交了该问题的票证：

[http://net-ssh.lighthouseapp.com/projects/36253-net-ssh/tickets/58-nameerror-uninitialized-constant-netsshknownhostssupported_type](http://net-ssh.lighthouseapp.com/projects/36253-net-ssh/tickets/58-nameerror-uninitialized-constant-netsshknownhostssupported_type)

希望能帮助到你！

编辑：克拉里夫对此的解决方案看起来更容易接受。谢谢，克拉里夫！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-25T05:20:36.900

在遵循 github 上的问题并应用 clarif 建议之后，我想出了解决我的问题的方法。

[http://tinyurl.com/cxr2xa3](http://tinyurl.com/cxr2xa3)

# javascript - 基于滚动的jQuery淡入和淡出

> ID：10743837
> 
> 赞同：0
> 
> 时间：2012-05-24T19:10:56.483
> 
> 标签：javascript, jquery

我正在使用以下内容根据元素滚动的像素数将元素的不透明度从 0 更改为 1，并且效果很好。

```
$(window).scroll(function() {
  if ($(this).scrollTop() > 200) {
      $("#hook").stop().animate({
          opacity: 1
      }, 300);
  } else {
      $("#hook").stop().animate({
          opacity: 0
      }, 300);
  }
}); 
```

我想补充的是，“当用户滚动 500 像素或更多时，将其淡出。”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T19:18:35.487

我错过了什么吗？该代码存在 99%！[http://jsfiddle.net/AwnWe/2](http://jsfiddle.net/AwnWe/2)

```
$(window).scroll(function() {
  var scrollTop = $(this).scrollTop();
  console.log('Scroll ', scrollTop);
  if (scrollTop > 500 || scrollTop < 200) {
      $("#hook").stop().animate({
          opacity: 0
      }, 300);
  } else {
      $("#hook").stop().animate({
          opacity: 1
      }, 300);
  }
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T19:18:45.200

我想你可能会改变`$(this).scrollTop() > 200`为`$(this).scrollTop() > 200 && $(this).scrollTop() < 500`

# mysql - 用于 windows phone 远程数据库的 VB silverlight

> ID：10743839
> 
> 赞同：0
> 
> 时间：2012-05-24T19:11:04.827
> 
> 标签：mysql, vb.net, wcf, silverlight, windows-phone-7

我正在为 VB 上的 windows phone 编写一些应用程序

我想连接远程数据库以交换数据，但我不想使用 WCF（像这样：[WCF](http://studentguru.gr/b/dt008/archive/2010/12/02/querying-a-database-on-windows-phone-7-using-wcf.aspx)）`http://studentguru.gr/b/dt008/archive/2010/12/02/querying-a-database-on-windows-phone-7-using-wcf.aspx` ，但我想使用简单的 MySql，因为我可以轻松找到一些免费主机！对于 WCF 来说，不可能找到和测试那么容易:)

所以....你有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T09:29:19.993

您不能直接连接到远程服务器上的 MySQL 数据库。如果您不使用 WCF 作为中介，则必须使用等效的东西，例如 ODATA 或其他一些 Web/REST 服务。

# c++ - 生成均匀分布的点网格

> ID：10743840
> 
> 赞同：0
> 
> 时间：2012-05-24T19:11:09.523
> 
> 标签：c++, algorithm

我目前有一个生成点网格的算法。`lx`它以 x ( ) 的长度和 y ( )的长度的形式从用户那里获取输入，以及将点间隔的`ly`增量或增量 (`dx`和)。`dy`我需要这些点始终在 和定义的边界正方形**的边缘开始和**`lx`结束`ly`。我尝试了几种方法：

边界正方形的起始边缘定义为：

```
double startx = lx / -2.0, starty = ly / -2.0; 
```

* * *

我的第一种方法确定点数和轮数：

```
int numintervalx = round(lx / dx), numintervaly = round(ly / dy); 
```

* * *

我的第二种方法确定点数并使用大于点数的最接近的整数：

```
int numintervalx = ceil(lx / dx), numintervaly = ceil(ly / dy); 
```

* * *

我的第三种方法确定点数并使用小于点数的最接近整数：

```
int numintervalx = floor(lx / dx), numintervaly = floor(ly / dy); 
```

* * *

然后重新计算增量以适应边界框：

```
dx = lx / double(numintervalx);
dy = ly / double(numintervaly); 
```

* * *

然后将这些输入到一个`for`循环中，该循环自己生成点：

```
for (int i = 0; i <= numintervaly; i++)
  for (int j = 0; j <= numintervalx; j++)
  {
    double point[3] = {startx + dx * j, starty + dy * i, 0};
  } 
```

* * *

是否有另一种更准确的方法可以使实际网格更接近用户指定的网格，仍然总是在边缘开始和结束？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:42:49.607

将整数转换视为添加错误。在这种情况下，最小化转换为整数时添加的误差的方法是四舍五入。最坏的情况是，如果用户输入的值使得 lx/dx 为 something.5，这意味着舍入误差为 0.5。鉴于您的问题，这是您能做的最好的。

考虑将 numpoints 重命名为 numintervals 或其他内容，因为实际上您创建的点比 numpoints 多一个，这很奇怪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T19:17:12.900

要求用户分别为您提供 和 的值，它们是`lx`和`ly`的倍数。当然，这需要一些基本的输入验证，但它会保证实际的网格与用户指定的网格完全相同，点总是在边缘开始和结束。`dx``dy`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T19:30:39.193

您的输入显然不能保证与`lx`的整数倍兼容`dx`，因此您的问题。因此，您*必须*要求兼容的输入，理想情况下，将或者`nx`作为输入，或者`dx`在`lx`您的应用程序中更有意义。

或者，您可以仅将用户输入视为指南，即采取

```
nx = int(ceil(lx/dx));    // get suitable number of points
dx = lx/nx;               // set suitable spacing to fit range exactly 
```

# java - 映射 PostgreSQL text[][] 类型和 Java 类型

> ID：10743841
> 
> 赞同：1
> 
> 时间：2012-05-24T19:11:17.990
> 
> 标签：java, string, postgresql, jdbc, multidimensional-array

我有一个包含类型列的 Postgres 表`text[][]`。在 JDBC 代码中，我使用了一个字符串数组，但一个异常告诉我这两个不匹配。如果这些类型之间没有映射，您能否建议字符串数组使用 Postgres 类型？

这是代码：

```
String list = "'{";
        for(int i=0; i<array.length; i++) {
            list+=prodotti[i]+",";
        }
        list+="}'";

        preparedStm.setString(4, list); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:25:57.347

要了解多维 PostgreSQL 数组类型，请考虑[手册中的以下引用](https://www.postgresql.org/docs/current/arrays.html#ARRAYS-DECLARATION)：

> 当前的实现也不强制声明的维数。无论大小或维数如何，特定元素类型的数组都被认为是同一类型。因此，在其中声明数组大小或维数 `CREATE TABLE`只是文档；它不会影响运行时行为。

`text[]`在内部，types`text[][]`与 PostgreSQL 相同。**如果**该列实际上包含二维文本数组，则必须匹配 Java 中的维度。但它也可以包含 1 维或 3 维数组。PostgreSQL会允许它。

另请注意，`text`和`character varying`( `varchar`) 在 PostgreSQL 中是**不同的数据类型**（当`varchar`没有长度修饰符时，它们的作用基本相同）。首先阅读[手册中的字符类型](https://www.postgresql.org/docs/current/datatype-character.html)。

# playframework - Play 中的自动更新选项！框架

> ID：10743842
> 
> 赞同：2
> 
> 时间：2012-05-24T19:11:21.107
> 
> 标签：playframework

如何使用播放框架添加自动更新功能选项（如在 Youtube 和 Twitter 上）？

具体来说，如果我正在制作 Stackoverflow 克隆，我希望在无需刷新页面的情况下显示新问题。或者，在查看问题时，新答案会添加到列表中，而无需刷新整个页面。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T19:44:32.227

您有两个解决方案，在 Play 中都可能没有问题！

1.  使用AJAX发送一段时间的请求，检查显示页面是否有新事件以及使用ie。jQuery 更新所需元素的值。
2.  我可以看到 StackOverflow`websockets`用于更新投票计数器、通知编辑等。这是一个非常强大的功能，但请记住，旧浏览器可能会遇到一些问题。

# java - 使用 JDBC 检索 postgresql 数组

> ID：10743848
> 
> 赞同：3
> 
> 时间：2012-05-24T19:11:51.820
> 
> 标签：java, arrays, postgresql

我有一张这样的桌子

```
 list     |  id  | 
-----------+--------
 {930,23}  |  1   |
 {2012,1}  |  2   |
 {5943}    |  3   |
 {6148}    |  4   |
 {1003}    |  5   | 
```

现在，我想使用 JDBC 来检索第一列。我了解到我们可以使用 java.sql.Array 来做到这一点。（[http://docs.oracle.com/javase/tutorial/jdbc/basics/array.html#retrieving_array](http://docs.oracle.com/javase/tutorial/jdbc/basics/array.html#retrieving_array)），但是当我像这样声明 Array 对象时：

```
import java.sql.Array;

while(rs.next())
    Array arr; 
```

它发出编译错误：

```
[javac] /home/xxx.java:291: error: not a statement
[javac]             Array arr;
[javac]             ^
[javac] /home/xxx.java:291: error: ';' expected
[javac]             Array arr;
[javac]                  ^
[javac] /home/xxx.java:291: error: not a statement
[javac]             Array arr;
[javac]                   ^ 
```

Java 似乎无法识别数据类型 java.sql.Array。有谁知道为什么？非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T19:14:35.743

您应该在 while 语句中使用大括号：

```
while (rs.next()) {
    Array arr;  // Add more code here.
} 
```

# php - 为 PDF 创建安全文件托管服务器

> ID：10743850
> 
> 赞同：9
> 
> 时间：2012-05-24T19:11:58.200
> 
> 标签：php, pdf, ftp

我正在开发一个网站，允许客户登录并查看`PDFs`服务器上保存的各种内容。这些 PDF 对客户端来说是唯一的，并且不应该被未登录的人访问。将文件放到服务器上应该不是问题，我只是不确定如何将它们提供给最终用户。

我已经用提供的数据而不是文件来实现这种事情`SQL servers`，所以我不完全确定最有效的方法是什么。

该网站在 a 上`LAMP`，我的经验很少`PHP`（但如果框架或其他语言可以使这更容易，我可以学习它）。

我可能在我的头上，但我通常是，所以任何输入都会很棒。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-24T19:13:58.447

将文件放在 webroot 之外。然后使用 PHP 通过脚本传递文件。这样，没有人可以直接链接到文件并绕过您的控制。（当然要确保仅在验证用户有权检索该文件后执行此操作的脚本）。

示例 PHP：

```
<?php
    session_start();
    if (!isset($_SESSION['authenticated'])) {
        exit;
    }
    $file = '/path/to/file/outside/www/secret.pdf';

    header('Content-Description: File Transfer');
    header('Content-Type: application/octet-stream');
    header('Content-Disposition: attachment; filename=' . basename($file));
    header('Content-Transfer-Encoding: binary');
    header('Expires: 0');
    header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
    header('Pragma: public');
    header('Content-Length: ' . filesize($file));
    ob_clean();
    flush();
    readfile($file);
    exit;
?> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-24T19:16:51.900

简单的方法是为这些文件提供长随机文件名（例如，20 个随机字符）。从技术上讲，任何人都可以访问它们，但无法猜测 URL，因此只有获得授权的人才能访问。

或者，John Conde 已经概述了一种从 PHP 脚本提供文件的方法。它会导致轻微的性能损失，但会与您的代码一样安全。我唯一可以补充的是，如果您不能将它们放在 webroot 之外，那么您可以使用 .htaccess 来防止人们直接访问这些文件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-24T19:19:39.927

约翰发布了主要的正确方法，所以我添加了（可能是次要的）替代方案：从数据库中提供服务。只需为 PDF 设置一个 BLOB 列，然后从数据库中读取/存储文件数据。你最终会得到一张相当大的桌子，但它会起作用。服务它需要设置与`header()`John 发布的相同的 s，您只需从数据库而不是文件发送数据。

这样做的好处是不必确保您没有文件名冲突等。

# javascript - 使用 KineticJS 重置为默认位置

> ID：10743859
> 
> 赞同：1
> 
> 时间：2012-05-24T19:12:20.030
> 
> 标签：javascript, kineticjs

我的游戏中有以下圆圈。玩家将它们拖到游戏中的不同位置。当玩家选择，再次播放时，我希望形状回到 init 函数中指定的原始位置。我该怎么办？谢谢你。

```
stage = new Kinetic.Stage({
   container: "container",
   width: 900,
   height: 550
});

shapes = new Kinetic.Layer();

function init() {
  circle1 = new Kinetic.Circle({
     x: stage.getWidth() / 3.2,
     y: stage.getHeight() / 3.2,
     radius: radius,
     fill: "blue",
     stroke: "black",
     strokeWidth: 4,
     name: "circle",
     draggable: true
});  

shapes.add(circle1)
stage.add(shapes) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T19:16:58.260

将默认值存储在单独的变量中，然后用于[`.setPosition( x, y )`](http://kineticjs.com/api-docs.php#docsNode)重置它：

```
//store settings
var settings = {
     x: stage.getWidth() / 3.2,
     y: stage.getHeight() / 3.2,
     radius: radius,
     fill: "blue",
     stroke: "black",
     strokeWidth: 4,
     name: "circle",
     draggable: true
}; 

//use settings
circle1 = new Kinetic.Circle(settings);

//after move, reset using:
circle1.setPosition(settings.x,settings.y); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-25T03:04:18.567

您还可以像这样使用超级方便的 setAttrs 方法：

```
circle1.setAttrs(settings); 
```

干杯!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-29T22:37:24.727

我知道这个问题已经很老了，但我刚刚解决了这样的问题。

```
stage.removeChildren();
stage.setAttrs(stage.defaultNodeAttrs); 
```

stage.reset() 不再起作用，但这应该可以满足您的要求。

# sql - GROUP BY 的结果是否应该按照 SQL 标准进行排序？

> ID：10743862
> 
> 赞同：0
> 
> 时间：2012-05-24T19:12:42.073
> 
> 标签：sql

GROUP BY 的结果是否应该按照 SQL 标准进行排序？

许多数据库返回 GROUP BY 的排序结果，

但它是由 SQL92 或其他标准强制执行的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-24T19:20:11.650

No.`GROUP BY`对返回的行的顺序没有标准影响。这 `ORDER BY`就是设计要做的。

如果您得到某种由 a 返回的可重复或可预测的排序顺序`GROUP BY`，则说明您的 DBMS 中正在执行的操作未在标准中定义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T19:27:30.757

正如前面的回答所解释的，除了`ORDER BY`.

但是，为了计算`GROUP BY`，可能会发生索引扫描或内存排序（以创建存储桶），并且这样的索引扫描或排序意味着以排序顺序遍历数据。因此，特定数据库经常出现这样的行为并非偶然。但是，不要依赖它，因为使用不同的索引集，甚至只是不同的查询计划（可能只需少量插入和/或重新启动数据库服务器即可触发），行为可能会相当不同的。

另请注意，重新排序`ORDER BY`子句中的列列表将导致可靠地重新排序输出，而重新排序`GROUP BY`子句中的列列表可能没有任何效果。

使用看似“冗余”的 ORDER BY 没有性能成本。如果原始计划已经保证了排序输出，则查询计划可能是相同的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T19:53:30.827

嗯，对 GROUP BY 的输出进行排序不在标准中，因为有标准的分组算法不会按顺序产生结果。

其中最常见的是使用哈希表进行分组。

此外，在多线程服务器上，可以对数据进行排序，但结果将逐个处理器返回。不能保证最低阶的处理器是第一个返回数据的。

而且，在并行机器上，可以使用多种方法在处理器之间拆分数据。例如，所有以“a”结尾的字符串都可能会进入一个处理器。所有以“b”结尾的都到另一个。然后可以在本地对这些进行排序，但结果本身不会整体排序。

诸如 mysql 之类的保证在 group by 之后进行排序的数据库正在做出糟糕的设计决策。除了不符合标准之外，这样的数据库要么限制算法的选择，要么对排序施加额外的处理。

# android - 除了使用 LinearLayouts 和 layout_weight 之外，还有其他方法可以均匀分布视图吗？

> ID：10743866
> 
> 赞同：1
> 
> 时间：2012-05-24T19:12:49.720
> 
> 标签：android

现在，我在另一个也具有相同属性的视图中有带有 layout_weight 的视图，这导致外部视图以指数方式计算。我正在考虑在内部视图中嵌套另一组具有权重的视图，但这会导致最外层视图的计算次数超出我的预期。我只是将区域均匀地分开（组中的每个视图都具有相同的权重），但我希望所有内容都能正确缩放，无论屏幕的大小或 DPI 是多少。有没有其他方法可以在另一个视图中有效地拆分视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-26T07:54:39.000

DeeV 对[这个问题](https://stackoverflow.com/questions/10539268/making-two-linearlayouts-have-50-of-the-screen-each-without-using-layout-weight/10539489#10539489)的回答做得很好：

> `LinearLayout`用 a交换你的顶部`RelativeLayout`并将两个孩子与中心的 >invisible 对齐，`View`如下所示：

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/top"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

    <LinearLayout
      android:id="@+id/center_point"
      android:layout_width="0dp"
      android:layout_height="0dp"
      android:layout_centerInParent="true"/>

    <LinearLayout
      android:id="@+id/left_layout"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:layout_alignParentLeft="true"
      android:layout_alignRight="@+id/center_point>
    </Linearlayout>

    <LinearLayout
      android:id="@+id/right_layout"
      android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:layout_alignParentRight="true"
      android:layout_alignLeft="@+id/center_point>
    </Linearlayout>

</RelativeLayout> 
```

# java - 从 Tomcat servlet 到 MSSQL Server Express 2012 的查询问题

> ID：10743867
> 
> 赞同：0
> 
> 时间：2012-05-24T19:12:55.733
> 
> 标签：java, sql-server, tomcat, servlets

这是我的设置。在虚拟机 (Fusion) 中运行 MSSQL Server Express 2012。虚拟机在 OS X Lion Server 上运行。在 OS X Lion 上，Tomcat 7 服务器正在运行。我从独立的 java 中尝试以下代码：

```
static {
    try {
        Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }
}

private final static String host = "ip-address:1433";
private final static String database = "databasename";
private final static String user = "user";
private final static String passwd = "password";

public static void main(String[] args) {
    try {
        String connectionUrl = "jdbc:sqlserver://"+host+";database="+database+";integratedSecurity=true;";
        Connection con = DriverManager.getConnection(connectionUrl,user,passwd);
        PreparedStatement pstm = con.prepareStatement("select * from sektor");
        ResultSet res = pstm.executeQuery();
        while(res.next())
            System.out.println("Sektor: " +res.getString("sektornavn"));
    } catch (SQLException e) {
        System.out.println(e.getMessage());
    }
} 
```

这很有效，可以按预期打印表格的内容。现在使用相同的代码（仅将输出更改为来自 system.out 的响应）

```
static {
    try {
        Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
    } catch (ClassNotFoundException e) {
        e.printStackTrace();
    }
}

private final static String host = "ip-address:1433";
private final static String database = "databasename";
private final static String user = "user";
private final static String passwd = "password";

@Override
public void doGet(HttpServletRequest req, HttpServletResponse resp) throws ServletException, IOException {
    resp.setContentType("text/plain");
    resp.setCharacterEncoding("UTF-8");
    // Write response
    PrintWriter writer = resp.getWriter();
    try {
        String connectionUrl = "jdbc:sqlserver://"+host+";database="+database+";";
        writer.println("Connecting<br/>");
        Connection con = DriverManager.getConnection(connectionUrl,user,passwd);
        writer.println("Preparing statement<br/>");
        PreparedStatement pstm = con.prepareStatement("select * from sektor");
        writer.println("Executing statement<br/>");
        ResultSet res = pstm.executeQuery();
        while(res.next())
            writer.println("Sektor: " +res.getString("sektornavn")+"<br/>");
    } catch (SQLException e) {
        writer.println(e.getMessage());
    }
    writer.flush();
    writer.close();

} 
```

我遇到的问题是进入 pstm.executeQuery() 时 servlet 停止。我通过删除（注释掉）部分代码将其范围缩小到这一点，这表明它将创建一个连接（DriverManager.getConnection..）并准备语句。只有在添加 pstm.executeQuery() 时，servlet 才会响应。

我使用 Microsoft 的 JDBC 连接器，该 jar 可用于独立 java 和 servlet。我没有任何异常来帮助找到错误。

真正让我感到困惑的是，它会建立连接，但不会执行查询。非常欢迎所有建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T11:52:31.227

不知道它是否会有所帮助，但您是否考虑过使用[JTDS](http://jtds.sourceforge.net/) jdbc 驱动程序？我已经使用他的 jtds 驱动程序有一段时间了，我发现它比 MS jdbc 驱动程序问题少。我曾经发生过使用 MS 驱动程序无法解释的奇怪事情。

# event-handling - 单击 GXT 3 中的树处理程序？

> ID：10743869
> 
> 赞同：3
> 
> 时间：2012-05-24T19:13:08.217
> 
> 标签：event-handling, tree, gxt

当我单击或双击树中的节点时，我一直在通过[GXT3 的`Tree`API](http://dev.sencha.com/deploy/gxt-3.0.0-rc2/javadoc/gxt/com/sencha/gxt/widget/core/client/tree/Tree.html)寻找某种方式来执行操作，但我似乎找不到任何可行的方法。

我知道`TreeGrid`有一个`CellClickHandler`和`CellDoubleClick`处理程序，但似乎没有任何类似的`Tree`. `addHandler`有继承自的通用方法，`Widget`但这似乎适用于整个树，而不是特定节点。

有没有我忽略的东西，或者有不同/更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-13T20:06:02.393

将此用于单选

```
 tree.getSelectionModel().setSelectionMode(SelectionMode.SINGLE);
    tree.getSelectionModel().addSelectionHandler(new SelectionHandler<MenuView.MenuDto>() {

        public void onSelection(SelectionEvent<MenuDto> event) {
            MenuDto mnu = event.getSelectedItem();
            Info.display("Tree Handler", mnu.getDescripcion());
        }
    }); 
```

对于多项选择

```
 tree.getSelectionModel().addSelectionChangedHandler(new SelectionChangedHandler<MenuView.MenuDto>() {

        public void onSelectionChanged(SelectionChangedEvent<MenuDto> event) {
            List<MenuDto> mnus = event.getSelection();
            Info.display("Tree Handler", mnus.get(0).getDescripcion());
        }
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-18T17:59:14.917

另一种选择是覆盖 Tree 的 onDoubleClick（或 onClick）方法：

```
Tree tree = new Tree<MyModel, String>(store, valueProvider){            
    @Override
    protected void onDoubleClick(Event event) {
        TreeNode<MyModel> node = findNode(event.getEventTarget().<Element> cast());
        Info.display("Double Click", "You double clicked this node!");
        super.onDoubleClick(event);
   }
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-25T14:14:20.597

使用`TreePanel`的选择模型：

```
treePanel.getSelectionModel().addSelectionChangedListener(
        new SelectionChangedListener<BaseTreeModel>() {

            @Override
            public void selectionChanged(SelectionChangedEvent<BaseTreeModel> se) {

                BaseTreeModel selectedItem = se.getSelectedItem();

                // implement functionality
            }
        }
); 
```

请参阅[`TreePanel`API](http://dev.sencha.com/deploy/gxt-2.2.5/docs/api/com/extjs/gxt/ui/client/widget/tree/Tree.html)以获取参考。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-25T18:06:42.553

想通了。这可以通过使用单元格操作树来实现，可以在此处找到其实现：[http ://www.sencha.com/examples/#ExamplePlace:cellactiontree](http://www.sencha.com/examples/#ExamplePlace:cellactiontree)

# objective-c - 检查特定数据是否在核心数据中

> ID：10743871
> 
> 赞同：1
> 
> 时间：2012-05-24T19:13:11.610
> 
> 标签：objective-c, core-data, nsdictionary

这是问题。我有一个表，我在其中保存一些数据，这些数据是从 NSDictionaries 的 NSArray 中获取的，这些数据将具有要保存的属性。数组中的每个字典都是一个单独的实体，所以我循环字典并使用 insertNewObjectForEntityForName 保存它以创建不同的实体。

我需要刷新数据，但是何时保存数据正在复制 coredata 中已经存在的数据。我试图检查核心数据上是否存在 id

```
for(NSDictionary *exist in dic){
    if([[campaignDictionary objectForKey:@"element"] isEqualToString:@"id"]){
        idToCheck = [dic objectForKey:@"value"];
    }
}
if(table.campaign_id == idToCheck){
    return exist = YES;
} 
```

但是它没有检查其余数据，所以只有 id 没有被复制，有什么想法可以解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T20:30:35.693

我决定最好在插入新内容之前从 Coredata 中删除我的所有内容，谢谢！！

# visual-studio - Visual Studio 11“目标框架”不断恢复到 4

> ID：10743875
> 
> 赞同：4
> 
> 时间：2012-05-24T19:13:24.217
> 
> 标签：visual-studio, visual-studio-2012

每次我使用 VS 11 打开某个网站时，“目标框架”都会重置为 4.0 版，即使我之前已将其更改为 4.5。 ![在此处输入图像描述](../Images/5c4bbe60f08b2e1022ed229d4aa0ea14.png)

这是一个已知的错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T08:42:11.923

修改sln文件解决了

# php - EC2 使用 PHP 连接 RDS

> ID：10743877
> 
> 赞同：1
> 
> 时间：2012-05-24T19:13:28.127
> 
> 标签：php, amazon-ec2, amazon-web-services, amazon-rds

我知道这已经被问过了，但没有一个线程有一个对我有用的解决方案我
从 XAMPP（本地）成功连接到 RDS 我
也可以很好地与 mySql 工作台
连接从 EC2 连接时

出现错误：`Fatal error: Call to undefined function mysql_connect()`

这就是我的PHP 看起来像：

```
define("HOST", "mydatabase-starter.Pzw9yv81CmMJ.us-east-1.rds.amazonaws.com:3306");
define("DBUSER", "mydatabaseUser");
define("PASS", "**********");
define("DB", "mydatabase");

die("Going to connect now, wish me luck!");
$conn = mysql_connect(HOST, DBUSER, PASS) or die();
$db = mysql_select_db(DB) or die(); 
```

另外，RDS 的安全性是这样的！![在此处输入图像描述](../Images/bce13ff8902ac6b7480081ab5c5d36bf.png)
EC2 是一个灯栈，全新安装 apache 和 php，没有 mysql。
我究竟做错了什么？我还缺少其他服务吗？

更新：从 SSH，我可以通过以下方式连接到 RDS：
`sudo mysql -h mydatabase-starter.Pzw9yv81CmMJ.us-east-1.rds.amazonaws.com -P 3306 -u mydatabaseUser -p`

* 这将输出“现在开始连接，祝我好运！” 来自 PHP 文件
，但看起来连接在 EC2 上时没有发生

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-25T02:14:24.273

你需要 php-mysql。我猜你正在使用 Amazon Linux AMI 所以试试

```
sudo yum install php-mysql 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T01:13:56.847

这意味着您的 EC2 实例上未加载 MySQL 扩展。根据您的发行版，您必须安装它。

在 Debian / Ubuntu 上，您应该像这样运行命令：

```
$ sudo apt-get install php5-mysql 
```

# iphone - 我的页面在 PC 或 Mac 上加载正常，但在装有 iOS 5.1.1 的 iPad 或 iPhone 上完全消失

> ID：10743884
> 
> 赞同：0
> 
> 时间：2012-05-24T19:14:14.627
> 
> 标签：iphone, python, html, ios, ipad

从 4.2.1 升级到 ios 5.1.1 后，我的页面 www.zolkan.com 加载并立即消失，显示一个空白的灰色页面。一年多来，我没有更改页面上的任何内容。在将我的 iPhone 从 4.2.1 升级到 5.1.1 之前，它加载正常。我的 iPad 运行 5.0.1 也是如此……转到 5.1.1 后，页面加载并消失。

似乎只有动态页面（由 python CGI 生成）在这样做......其余的静态页面表现正常。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:17:25.317

在开发者模式下使用 safari 作为 iOS 设备来确定根本原因。在查看发生了什么之后，我敢打赌您的社交加载代码已经远程更改了某些内容，特别是错误控制台中警告的 fb-root 标记。从禁用社交网络的东西开始，然后开始调试。

更新：我刚刚在我的手机上禁用了 javascript 并打开了页面，所以它绝对是某个地方的 JS 错误。

# php - 文件超过 6Mb 的 PHP 上传类问题

> ID：10743890
> 
> 赞同：0
> 
> 时间：2012-05-24T19:14:44.960
> 
> 标签：php, image, class, upload

我正在制作一个相册，用户可以在其中上传自己的照片。我希望用户能够向网站发送任何大小的图片，如果超过 5Mb，则使用 php 上传类将其处理为 5Mb。

该文件的上传适用于任何小于 php.ini 文件中配置的图片大小，该文件为 30Mb。原始图片被上传到一个临时文件夹以进行处理。

我可以轻松地处理图片以创建拇指和主图片，但是当我想生成大文件（处理到 5Mb 供用户下载）时，它不起作用。

这是我用来处理图片的一段代码：

```
$handle = new upload("../".$path_picture_temp.$this->imgName);

    if ($handle->uploaded) {
      $handle->image_convert         = 'jpg';
      $handle->jpeg_size             = 5242880;
      $handle->process("../".$path_picture_full);
    }
    if ($handle->uploaded) {
      $handle->image_resize         = true;
      $handle->image_x              = 231;
      $handle->image_y              = 153;
      $handle->image_ratio_crop     = true;
      $handle->image_convert        = 'jpg';
      $handle->jpeg_quality         = 95;
      $handle->process("../".$path_picture_thumb);
    }
    if ($handle->uploaded) {
      $handle->image_resize         = true;
      $handle->image_x              = 1000;
      $handle->image_y              = 1000;
      $handle->image_ratio          = true;
      $handle->image_convert        = 'jpg';
      $handle->jpeg_quality         = 95;
      $handle->process("../".$path_picture_main);
    } 
```

当我上传一张低于 6Mb 的图片时，即使速度很慢，它也能正常工作，但如果我上传一张超过 6Mb 的图片，它就不起作用，它甚至不处理任何东西。

当我开始处理大图片的第一部分时，一切都适用于任何文件大小。有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:57:25.993

如果您使用 GD 和 imagcreatefromjpeg() 函数，这可能会解决您的问题： [PHP GD imagecreatefromjpeg cant handle big size image?](https://stackoverflow.com/questions/3381228/php-gd-imagecreatefromjpeg-cant-handle-big-size-image)

# powershell - 从文件加载 PowerShell 哈希表？

> ID：10743892
> 
> 赞同：18
> 
> 时间：2012-05-24T19:14:56.817
> 
> 标签：powershell

我有一个包含 PowerShell 对象表示法中的一些数据的文件：

```
@{ X = 'x'; Y = 'y' } 
```

我想将其加载到文件中的变量中。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-24T19:18:09.780

*（我在整理复制品时发现了它）*

```
PS> $content = ( Get-Content .\foo.pson | Out-String )
PS> $data = ( Invoke-Expression $content ) 
```

`Get-Content`返回一个包含文件中行的数组；用于将`Out-String`它们连接在一起。

`Invoke-Expression`然后运行脚本，并捕获结果。这对注入攻击是开放的，但在我的具体情况下没关系。

或者，如果您更喜欢 PowerShell 简洁：

```
PS> $data = gc .\foo.pson | Out-String | iex 
```

（我找不到更短的形式`Out-String`）

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-05-25T13:28:17.960

我用过 ConvertFrom-StringData。如果您想使用这种方法，您需要更改存储键/值对的方式，每个键/值对都在自己的行中并且没有引号：

```
#Contents of test.txt
X = x
Y = y

get-content .\test.txt | ConvertFrom-StringData

Name                           Value
----                           -----
X                              x
Y                              y 
```

ConvertFrom-StringData 是一个内置的 cmdlet。我在这里创建了相应的 ConvertTo-StringData 函数[http://poshcode.org/1986](http://poshcode.org/1986)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-05-24T23:43:37.163

如果你可以给这个文件扩展名`.ps1`，比如说，`data.ps1`那么它不能比这段代码更简单：

```
$data = <path>\data.ps1 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-18T14:45:49.827

正如@Chad 建议的那样，我在使用 ConvertFrom-StringData 时遇到了麻烦。如果你这样做：

```
$hash = get-content .\test.txt | ConvertFrom-StringData 
```

我发现我有一个对象数组而不是哈希表。事实上，我似乎有一组哈希表，每个都有一个条目。我确认了：

```
$hash.GetType() 
```

看起来您需要加入 slurped 输入文件的每一行，以确保它形成一个字符串供 ConvertFrom.. 使用：

```
$hash = ((get-content .\test.txt) -join '`n') | ConvertFrom-StringData 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2019-03-06T17:29:40.333

从 PowerShell 5.0 开始，您拥有

```
Import-PowerShellDataFile 
```

它从 .psd1 文件中导入值。因此，您唯一需要做的就是将文件重命名为 *.psd1

官方帮助在[这里](https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.utility/import-powershelldatafile?view=powershell-5.0)。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-07-06T12:33:32.833

这是一篇较旧的帖子，但是，这与您接受的解决方案有点不同，也许更“安全”，请记住不受信任的文件。

从您的笔记中，您有一个包含使用 Powershell 语法的哈希表的文件。鉴于该约束，您可以直接导入它：

```
$HashPath = ".\foo.pson"
# input file contents
$filecontent = Get-Content -Path $HashPath -Raw -ErrorAction Stop
# put the file in a script block
$scriptBlock = [scriptblock]::Create( $filecontent )
#check that the file contains no other Powershell commands
$scriptBlock.CheckRestrictedLanguage( $allowedCommands, $allowedVariables, $true )
#execute it to create the hashtable 
$hashtable = ( & $scriptBlock ) 
```

请注意，`$scriptBlock.CheckRestrictedLanguage`您可以将其替换为

```
$scriptBlock.CheckRestrictedLanguage([string[]]@(), [string[]]@(), $false) 
```

使用一个空的字符串列表，因此我们不允许任何 Powershell 命令。导入哈希表时，这正是我们想要的。最后一个是`allowEnvironmentVariables`所以我们在这个例子中用`$false`.

旁注，Powershell 模块（psd1 文件）只是一个哈希表，所以这个概念可以帮助你也拉入脚本块或其他东西。

参考：[https ://docs.microsoft.com/en-us/dotnet/api/system.management.automation.scriptblock.checkrestrictedlanguage?view=powershellsdk-1.1.0](https://docs.microsoft.com/en-us/dotnet/api/system.management.automation.scriptblock.checkrestrictedlanguage?view=powershellsdk-1.1.0)

# asp.net - 如何在 Visual Studio 中写入输出

> ID：10743893
> 
> 赞同：3
> 
> 时间：2012-05-24T19:15:20.403
> 
> 标签：asp.net, .net, visual-studio-2010

我正在尝试调试我的 asp.net 应用程序，并且在此问题上停留了太久。我想输出一个简单的“TEST”进行测试。

我努力了：

```
Console.WriteLine("TEST");
System.Diagnostics.Debug.WriteLine("TEST");
Console.Write("TEST"); 
```

我正在查看输出窗口。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T19:24:47.733

您在没有控制台的 Web 应用程序中运行此代码。使用`Trace.WriteLine`, 并正确配置它。例如，请参阅[此答案](https://stackoverflow.com/a/4004494/8446)。

# ruby - 如何使用 sqlite/sequel 选择星期一？

> ID：10743894
> 
> 赞同：2
> 
> 时间：2012-05-24T19:15:22.317
> 
> 标签：ruby, sqlite, sequel, dayofweek

在我的 SQLite-DB 中，我想在星期一选择所有条目。

我怎样才能用续集做到这一点？

一个测试示例：

```
require 'sequel'

DB = Sequel.sqlite()#'test.db')
DB.create_table(:days) do
    String :text
    Date  :start
end

Date.today.upto(Date.today + 30){|d|
  DB[:days].insert( :text => d.strftime("%Y-%m-%d day %w in week %W"), :start => d)
} 
```

如何选择所有星期一？

在本机[SQL 中，我可以这样做](https://stackoverflow.com/questions/602245/how-can-i-select-entries-for-a-given-weekday-using-sql)：

```
select * from days where strftime("%w", start) = "1" 
```

使用它，我可以定义一个视图并为其选择：

```
DB.run('create view mondays as select * from days where strftime("%w", start) = "1"')
p DB[:mondays].all 
```

但我想从 Sequel 中使用它。

我试过了

```
sel = DB[:days].filter{ start.strftime("%w", :start) == '1' }  
#NoMethodError

sel = DB[:days].filter{ Sequel::SQL::Function.new(:strftime, "%w", :start) == '1' }
#SELECT * FROM `days` WHERE (1 = 0) 
```

但没有成功。

还有其他解决方案吗？

我也在寻找一种可能性，可以按一天中的小时选择项目（所有项目都有时间戳，然后是 12:00-13:00 ...）我认为这是同样的问题，也是当天的解决方案week-selection 也将解决我的其他问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T19:54:13.650

以下是您的示例的问题：

```
sel = DB[:days].filter{ start.strftime("%w", :start) == '1' }  
#NoMethodError 
```

这使用了一个虚拟行，因此调用`start`返回一个`Sequel::SQL::Identifier`. 该`Sequel::SQL::Identifier#strftime`方法不存在，因此出现 NoMethodError。

```
sel = DB[:days].filter{ Sequel::SQL::Function.new(:strftime, "%w", :start) == '1' }
#SELECT * FROM `days` WHERE (1 = 0) 
```

这失败了，因为您正在使用`==`. Sequel 不会覆盖`==`，并且 ruby​​ 的默认`==`返回`false`。在 SQLite 上，Sequel 表示`false`为`(1 = 0)`.

这应该有效：

```
sel = DB[:days].filter{{strftime("%w", :start) => '1'}}
# SELECT * FROM `days` WHERE (strftime('%w', `start`) = '1') 
```

这在虚拟行块（外部 {}）内使用哈希（内部 {}）。在 Sequel 中，相等性由散列表示。

# c# - IIS 7.5 / WCF - net.tcp 状态未知

> ID：10743896
> 
> 赞同：2
> 
> 时间：2012-05-24T19:15:28.297
> 
> 标签：c#, wcf, iis, service, net.tcp

我试图让我的 WCF 服务使用`netTcpBinding`而不是`wsHttpBinding`，但我似乎无法让它工作。

我将`net.tcp`绑定添加到 IIS7.5，但状态为未知（*当我还删除 http 绑定时，它会通过站点放置一个大红色 X，我必须添加一个新的 http 绑定，然后才能再次访问任何设置*）。我已经在这里和谷歌上看过，但我只能找到两三个关于这个问题的帖子，没有任何真正的解决方案。

我有的：

*   WAS 服务正在运行，还有 Net.* 服务。
*   在 IIS 的高级设置中添加了 net.tcp。
*   已安装 WCF 非 http。

似乎有一个 TCP 侦听器正在运行，因为它在 netstat 中显示它正在侦听我指定的端口：809）并且我还收到了防火墙消息（*也尝试禁用防火墙/防病毒，但没有帮助*）。

WCF 测试客户端导致此错误：

> 错误：无法从 net.tcp://localhost:809/MyService.svc 获取元数据

我的 Web.config（主要从 MSDN 复制，正确的布局请看这里[http://pastebin.com/Ru8p0T9N](http://pastebin.com/Ru8p0T9N)）：

```
<services>
  <service behaviorConfiguration="MyBehavior" name="WCFService.MyService">
    <endpoint address="" binding="netTcpBinding" bindingConfiguration="Binding1" name="MyServiceEndpoint" contract="WCFService.MyService">
      <identity>
        <dns value="localhost" />
      </identity>
    </endpoint>
    <endpoint address="mex" binding="mexTcpBinding" bindingConfiguration="" name="MyServiceMexTcpBidingEndpoint" contract="IMetadataExchange" />
    <host>
      <baseAddresses>
        <add baseAddress="net.tcp://localhost:809/MyService.svc" />
      </baseAddresses>
    </host>
  </service>
</services>
<behavior name="MyBehavior">
  <serviceMetadata httpGetEnabled="false" />
  <serviceDebug includeExceptionDetailInFaults="true" />
</behavior>
<netTcpBinding>
  <binding name="Binding1"hostNameComparisonMode="StrongWildcard"sendTimeout="00:10:00"maxReceivedMessageSize="65536"transferMode="Buffered"portSharingEnabled="true">
    <security mode="Message">
      <transport clientCredentialType="None" />
      <message clientCredentialType="None" />
    </security>
  </binding>
</netTcpBinding> 
```

一切都很好，`wsHttpBinding`但不适用于`net.tcp`. 我从多个来源尝试了 Web.config 中的几种不同设置，但我一直遇到同样的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T21:10:25.910

您是否将 net.tcp 添加为 IIS 中的启用协议？管理网站 => 高级设置 => 启用协议（逗号分隔）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-01T16:38:52.820

对于有同样问题的人：正如我之前所说，我将应用程序池更改为 Classic 并且它不起作用（http 也不再起作用），但是当我将其更改回来并回收应用程序池时，它突然起作用了。

# perl - 从 Perl 的时间戳中查找年龄（以天为单位）

> ID：10743901
> 
> 赞同：-2
> 
> 时间：2012-05-24T19:15:58.380
> 
> 标签：perl, datetime

坦率地说，我根本不了解 Perl。由于某些原因，我必须使用 perl 解决问题。我尝试寻找快速解决方案，但找不到任何（我的错）

问题：我有一个文件，其中包含文件名列表和时间戳（即`2012-05-24T18:19:35.000Z`）。我需要解析确定其中哪些超过 90 天。

我只需要检查，我认为我已经准备好其他一切。当我用谷歌搜索时，一些人建议使用一些花哨的日期时间包，而一些建议是围绕使用 -M 的。

其实很迷茫。所有帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T19:28:40.970

此格式由[RFC3339](http://search.cpan.org/perldoc?DateTime%3a%3aFormat%3a%3aRFC3339)（相当具体）和[ISO8601](http://search.cpan.org/perldoc?DateTime%3a%3aFormat%3a%3aISO8601)（以及许多其他格式）定义。

```
use strict;
use warnings;
use feature qw( say );

use DateTime                  qw( );
use DateTime::Format::RFC3339 qw( );

my $limit_dt = DateTime->now->subtract( days => 90 );

my $format = DateTime::Format::RFC3339->new();
while (<>) {
   chomp;
   my ($timestamp, $filename) = split(' ', $_, 2);
   my $dt = $format->parse_datetime($timestamp);
   say($filename) if $dt < $limit_dt;
} 
```

例如，

```
$ cat data
2012-05-24T18:19:35.000Z new
2012-02-25T18:19:35.000Z old
2012-02-24T18:19:35.000Z ancient

$ perl script.pl data
ancient 
```

要忽略时间部分并仅检查日期部分是否超过 90 天，请改用以下内容：

```
my $limit_dt = DateTime->today( time_zone => 'local' )->subtract( days => 90 ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-24T19:51:45.760

该日期格式的优点是在其中两个字符串之间进行字典比较与进行日期时间比较（几乎）相同。因此，您只需将过去 90 天的日期转换为该格式，并进行字符串比较。

```
use POSIX 'strftime';
$_90_days_ago = strftime("%FT%T.000Z", gmtime( time-90*86400 ));

...
foreach $date (@your_list_of_dates) {
    if ($date lt $_90_days_ago) {
        print "$date was at least 90 days ago.\n";
    } else {
        print "$date is less than 90 days ago.\n";
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T19:29:23.827

像这样的东西应该工作：

```
#! perl -w

use strict;
use Time::Local;

# 90 times 24 hours of 60 minutes, 60 seconds
my $ninety_days = 24 * 60 * 60 * 90;
my $now = time;

# parse the time stamps in the file
while (<INPUTFILE>)
{
    chomp();

    if (/(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2})/)
    {
        my $year = $1;
        my $month = $2;
        my $day = $3;
        my $hour = $4;
        my $minute = $5;
        my $second = $6;

        # Looks like these are in GMT ("Z") so we'll use timegm
        my $time = timegm($second,$minute,$hour,$day,$month - 1,$year - 1900);

        if (($now - $time) > $ninety_days)
        {
            print "$_ is more than 90 days ago!
        }
    }
} 
```

（这只是基本的 - 它需要有关打开数据文件等的详细信息）

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-24T19:22:00.830

你应该看看这个 Perl 模块[https://metacpan.org/pod/Date::Manip](https://metacpan.org/pod/Date::Manip)

# javascript - 如何使用脚本在 mongodb 中创建用户？

> ID：10743905
> 
> 赞同：10
> 
> 时间：2012-05-24T19:16:18.243
> 
> 标签：javascript, mongodb

我正在设置mongodb，我们使用puppet来控制我们服务器的配置。

我已经按照我的需要设置了大多数东西，但是我需要在 mongo 数据库中创建用户。

我知道如何使用 mongo shell 来做到这一点，而且我知道我可以使用 javascript / a .js 使用命令来做到这一点

```
db.addUser("username", "password"[, readOnly]) 
```

但是，我一直无法找到在 javascript 中执行此操作所需的可靠示例。更重要的是，我需要能够使用某种 shell 脚本从命令行添加用户。

如果有人可以

a) 指出一些在 mongoDB 中使用 javascript 的可靠示例和

b）如何从命令行执行此操作？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-24T20:58:39.913

Mongo 的 cli 告诉你自己如何用一个 js 文件来使用它

```
$ mongo --help
MongoDB shell version: 2.0.3
usage: mongo [options] [db address] [file names (ending in .js)]
... 
```

**用法：mongo [选项] [数据库地址] [文件名（以.js结尾）]**

例如：

```
$ echo 'db.addUser("guest", "passwordForGuest", true);' > file.js
$ mongo mydb file.js
MongoDB shell version: 2.0.3
connecting to: mydb
{ "n" : 0, "connectionId" : 1, "err" : null, "ok" : 1 }
{
    "user" : "guest",
    "readOnly" : true,
    "pwd" : "b90ba46d452e5b5ecec64cb64ac5fd90",
    "_id" : ObjectId("4fbea2b013aacb728754fe10")
} 
```

**更新：**
**db.addUser 自 2.6 起已弃用**
[https://docs.mongodb.com/v2.6/reference/method/db.addUser/](https://docs.mongodb.com/v2.6/reference/method/db.addUser/)

改用`db.createUser`：

```
// file.js
db.createUser(
  {
    user: "guest",
    pwd: "passwordForGuest",
    roles: [ { role: "read", db: "mydb" } ]
  }
) 
```

`$ mongo mydb file.js`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-04-23T09:59:38.030

这是一个更简单优雅的解决方案：

```
echo 'db.addUser("<username>", "<password>");' | mongo <database> 
```

使用 MongoDB 2.4.8 测试

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-06-04T12:40:27.637

我知道 AD7six 已经给出了一个问题，但是当我尝试时，我获得了一个具有数据库身份验证“测试”的用户。
所以我在创建用户之前添加了一个命令来选择这个身份验证数据库。

```
db = db.getSiblingDB('myDataBase');
db.createUser(
 {
   user: "myUser",
   pwd: "myPwd",
   roles: [
    { role: "readWrite", db: "myDataBase" }
   ]
 }
); 
```

认证数据库和用户使用的数据库可以不同。命令 "getSiblingDB(dataBase)" (Javascript) 是 "use dataBase" (Shell) 的替代方法

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-05-24T19:37:05.500

[http://www.mongodb.org/display/DOCS/Scripting+the+shell](http://www.mongodb.org/display/DOCS/Scripting+the+shell)

或使用相关语言相关的 MongoDB 驱动程序使用您最喜欢的脚本语言编写脚本。

# asp.net-mvc - 模型绑定不起作用

> ID：10743908
> 
> 赞同：10
> 
> 时间：2012-05-24T19:16:39.367
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我有以下 POCO 课程：

```
public class Location
    {
        public int LocationId { get; set; }
        public string Name { get; set; }
        public string Street { get; set; }
        public string City { get; set; }
        public string State { get; set; }
        public string ZipCode { get; set; }
        public string Country { get; set; }
        public float? Latitude { get; set; }
        public float? Longitude { get; set; }
        public string PhoneNumber { get; set; }
        public string EmailAddress { get; set; }
        public string Website { get; set; }
        public virtual ICollection<Program> Programs { get; set; }
        public virtual ICollection<PlayerType> PlayerTypes { get; set; }
    }

public class PlayerType
    {
        public int PlayerTypeId { get; set; }
        public string Name { get; set; }
        public int SortOrder { get; set; }
        public bool IsActive { get; set; }
        public virtual ICollection<Location> Locations { get; set; }
    } 
```

和一个视图模型类

```
public class LocationViewModel
    {
        public Location Location { get; set; }
        public IList<PlayerType> SelectPlayerTypes { get; set; } 

        public LocationViewModel()
        {
            Location = new Location();
        }

    } 
```

在我的创建表单中，我将模型定义为

```
@model Locator.Models.LocationViewModel 
```

并具有如下字段：

```
div class="editor-label">
    @Html.LabelFor(model => model.Location.Name)
</div>
<div class="editor-field">
    @Html.EditorFor(model => model.Location.Name)
    @Html.ValidationMessageFor(model => model.Location.Name)
</div> 
```

在我的控制器中处理我的 POST

```
[HttpPost]
        public ActionResult Create(LocationViewModel location)
        {
            if (ModelState.IsValid) {
                locationRepository.InsertOrUpdate(location.Location);
                locationRepository.Save();
                return RedirectToAction("Index");
            }
            location.SelectPlayerTypes = golferTypeRepository.All.Where(p => p.IsActive).ToList();
            return View(location);
        } 
```

问题是我有一个 Location 对象，但没有一个属性可以设置为表单中输入的值。

我在这里做错了吗？

谢谢

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-05-25T06:25:36.353

这是问题所在：

```
[HttpPost]
public ActionResult Create(LocationViewModel location) 
```

你看到了吗？这是您的操作参数的名称：`location`.

现在看看你的视图模型，它有一个名为的属性`Location`：

```
public Location Location { get; set; } 
```

这会混淆模型绑定器。它不再知道您是否需要绑定`LocationViewModel`或其属性。

所以只需重命名以避免冲突：

```
[HttpPost]
public ActionResult Create(LocationViewModel model) 
```

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-05-15T08:15:46.793

只是为了提供另一个可能的原因：我花了几个小时在我的代码中寻找错误，而在我的情况下，活页夹不起作用的原因是使用具有公共字段而不是公共属性的模型：

```
public int CustomerName; 
```

它应该是：

```
public int CustomerName { get; set; } 
```

已经在 ASP.NET MVC 上工作了 3 年，我以前从未遇到过这种情况。希望它可以节省一些人的挫败感；）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-09-05T05:44:11.347

入党也晚了，但是在asp.net mvc 3年后，我发现禁用的输入没有发布，所以模型绑定器当然无法绑定它们。见[这里](http://www.w3schools.com/tags/att_input_disabled.asp)：

> “不会提交表单中的禁用元素”。

更好地使用`readonly="readonly"`而不是禁用。见[这里](https://stackoverflow.com/questions/2700696/how-do-i-submit-disabled-input-in-asp-net-mvc)。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2017-06-26T09:52:11.060

重申一下 Tod 所说的，模型绑定器需要 HTML 元素上的“名称”属性来映射属性。我正在手工制作一个快速测试表格，并且只使用“id”属性来识别我的元素。

当我添加“名称”属性时，一切都到位了。

```
<input type="text" id="Address" name="Address" /> 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-07-04T22:47:58.927

让我在这里补充一下模型绑定器无法正常工作的另一个原因。

我有一个带有属性的模型，在`ContactPhone`某个地方我决定将此属性的名称更改为`Phone`，然后当我尝试创建一个新实例时，这个属性的模型绑定突然停止工作。

问题出`Create`在我的控制器中的操作上。我使用了默认的 Visual Studio 脚手架，它创建了方法签名，如下所示：

```
public ActionResult Create([Bind(Include = "Id,ContactPhone, ...")] Customer customer)
{ ... } 
```

注意`Bind`属性，脚手架使用原始名称创建字段`ContactPhone`，因为这是一个字符串，所以它没有被重构。由于`Phone`未包含新字段，因此模型绑定程序忽略了它的值。

我希望这可以节省某人的时间。

祝你好运！

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-03-27T22:30:22.730

我的情况有点独特，但希望它对类似情况的人有所帮助。我让我的视图模型实现了 IValidatableObject，如果成功，此接口的 Validate 方法将返回 null。它必须返回一个空的 IEnumerable。因此绑定实际上正在发生但崩溃了。

基本上，当您遇到此问题时，请使用 Fiddler 查看发布的数据，确保发布的变量与视图模型上的属性（而不是字段！）匹配，并在视图模型构造函数上放置一个断点以确保路由引擎命中正确的 POST 方法。祝你好运！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-09-01T22:02:21.537

对于其他仍然遇到此问题的人，如果您在 post 方法中将参数命名为与您的属性之一相同，则默认模型绑定器也将失败。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2016-08-11T10:29:53.137

还有另一个原因：通常我使用内置的编辑器或显示器，并且永远不会遇到这个问题。但是在这种情况下，我需要一个半自定义控件。基本上是一个下拉菜单，其中包含许多选项的数据属性。

我在做什么，因为我的选择标签是：

```
<select name="@Html.IdFor(x => x.SubModel.ID)" id="@Html.IdFor(x => x.SubModel)" class="form-control select-control"> 
```

现在一切都在回传，在未经训练的人看来，一切都应该正常工作和绑定。但是 IdFor 助手使用下划线呈现子模型。模型绑定器不会将下划线解释为类层次结构指示符。应该将它们分开的是一个点。来自NameFor：

```
<select name="@Html.NameFor(x => x.SubModel.ID)" id="@Html.IdFor(x => x.SubModel)" class="form-control select-control"> 
```

NameFor 解决了我所有的问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-04-18T09:24:28.803

这拯救了我的一天。输入以下内容：

```
public ActionResult Edit(int masterId, ConclusionView conclusion) 
```

`ConclusionView`有一个属性`Conclusion`，所以我几乎失去了理智。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-05-23T19:19:02.680

我知道现在评论这个为时已晚。我所做的是在 ViewModel 中添加了无参数构造函数，一切都很棒。

# asp.net - 在不应呈现的控件上调用 PageLoad 和 OnPreRender

> ID：10743914
> 
> 赞同：0
> 
> 时间：2012-05-24T19:17:00.647
> 
> 标签：asp.net, pageload, server-tags

我正在使用这个过于简化的代码块：

```
<% if (MyCondition())
{ %>
<myUsedControl/>
<% }
else
{ %>
<myUnusedControl/>
<% } %> 
```

在我的 ascx 文件中。我假设当 ASP.Net 读取此页面时，如果 MyCondition() 返回 true，它将完全忽略 else 子句中的任何内容。情况并非如此，当我加载页面时，myUnusedControl 的 PageLoad 和 OnPreRendered 事件仍在被触发，即使 myUnusedControl 在浏览器显示页面时被正确隐藏。

为什么是这样？如何确保在呈现页面时完全忽略一大块 ascx 或 aspx？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:36:00.473

ASP.NET 无法推断`MyCondition()`不依赖于订阅的 PreRender 事件的执行。还有一种可能性是该方法具有不应执行两次的副作用，因此它应该只被调用一次，并且尽可能晚。还需要在事件周期中使所有控件保持最新；当页面中的不同组件尚未初始化而其他组件已触发其回发事件时，应如何工作？

在一个有点做作的例子中：

```
Boolean _condition;
Boolean MyCondition() {
    return _condition;
}

void MyContrivedPreRender(Object sender, EventArgs e) {
    _condition = true;
} 
```

```
<% if(MyCondition()) { %>
    <asp:Literal runat="server" Text="Hello world?"
                 OnPreRender="MyContrivedPreRender" />
<% } %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T20:04:51.433

您始终可以使用第二个控件创建一个重复页面，并将您的 if 条件分支放在管道中更早的位置，以控制加载哪个页面。

对于此示例，您始终可以手动将控件添加到后面代码中的控件集合中，并围绕它进行分支，而不是在 ascx/aspx 页面标记中注册控件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T20:32:45.350

根据页面 OnInit 中的条件 (LoadControl) 动态加载控件，并在所需的方法中使用该控件变量。

公共类 MyClass { MyUserControl _controlVariable ;

```
protected override void OnInit(EventArgs e)
{
     if (MyCondition())  
     { 
          _controlVariable  = Loadcontrol("control1.ascx");
     }

     else  
     { 
         _controlVariable  = Loadcontrol("control2.ascx");

     }
  }
} 
```

# php - 优化 MySQL/PHP 查询

> ID：10743915
> 
> 赞同：3
> 
> 时间：2012-05-24T19:17:02.300
> 
> 标签：php, mysql

我的数据库看起来像这样：

```
[foods]
foods_id, foods_name, groups_id, producers_id

[producers]
producers_id, producers_name

[groups]
groups_id, groups_name 
```

PHP：

```
<?php
$producers = mysql_query('SELECT p.producers_name,p.producers_id FROM foods as f,producers as p WHERE p.producers_id = f.producers_id AND f.groups_id = 1 GROUP BY p.producers_name');
    //list the producer...
    while($row = mysql_fetch_array($producers, MYSQL_ASSOC)){
        $foods = mysql_query('SELECT foods_id, foods_name FROM foods WHERE producers_id = '.$row['producers_id'].' ORDER BY foods_name ASC');       
        while($row2 = mysql_fetch_array($foods, MYSQL_ASSOC)){
            //list the foods under this producer...
        }
    }
?> 
```

目标：

```
PRODUCER A
   FOOD A
   FOOD B
   FOOD C
PRODUCER B
   FOOD D
   FOOD E
PRODUCER C
   FOOD F
... 
```

解决方案：

```
<?php
$res = mysql_query('SELECT f.foods_id, f.foods_name, p.producers_id, p.producers_name FROM foods f, producers p WHERE p.producers_id = f.producers_id AND f.groups_id = '.$_GET['g'].' ORDER BY p.producers_name ASC, f.foods_name ASC');       
$xproducers = array();
while($row = mysql_fetch_array($res , MYSQL_ASSOC)){
    if(!array_key_exists($row['producers_id'],$xproducers)){
        $xproducers[$row['producers_id']] = array('id'=>$row['producers_id'],'name'=>$row['producers_name'],'foods'=>array());
    }
    array_push($xproducers[$row['producers_id']]['foods'],array('id'=>$row['foods_id'],'name'=>$row['foods_name']));
}
?> 
```

这个解决方案对我来说已经足够快了，也许它并不完美，但它做得很好:) 感谢大家的大力帮助！

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:29:46.527

我不明白你为什么要先选择，这会得到相同的数据。

```
$res = mysql_query('SELECT f.foods_id, f.foods_name, p.producers_id, p.producers_name FROM foods f, producers p WHERE p.producers_id = f.producers_id AND f.groups_id = 1');       
    while($row = mysql_fetch_array($res , MYSQL_ASSOC)){
        $producers[$row['producers_id']][$row['foods_id']] = $row;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T19:20:19.737

我会做

```
mysql_query('SELECT producers_name, producers_id
FROM producers
WHERE producers_id IN
(SELECT producers_id FROM foods WHERE groups_id = 1)'); 
```

那应该工作得更快。

祝你好运！

# android - 带有 XML 布局的 android Surface View 并将按钮添加到 Canvas

> ID：10743919
> 
> 赞同：0
> 
> 时间：2012-05-24T19:17:35.583
> 
> 标签：android, android-layout, surfaceview, surfaceholder

所以我用画布做了一个表面视图，所以我可以做一些图形。有没有办法在画布上进行 xml 布局，所以我可以有按钮，屏幕上没有什么，或者有没有其他选项可以在画布上制作按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:37:17.710

是的，是的，您可以在布局上有按钮视图，但它们将存在于画布之外，但它们也可以覆盖画布。或者，您可以直接在表面上渲染自己的按钮，并通过编写自己的触摸检测的开销。如果您正在为游戏创建一个小框架（或类似“精灵”的游戏），那么开销就是您已经在做的事情。使这些按钮看起来与 Button 视图完全一样可能有点困难，但这是可能的。

这最终归结为关于更容易或更好实施的设计决策。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-25T04:21:43.933

您将必须创建一个包含该画布的课程。然后在 xml 布局中导入该类。

请参阅此示例：[FingerPaint 示例](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/graphics/FingerPaint.html)。

在上面的示例中，有一个 myView 类，其中包含要在其上绘制的画布。

你需要做的是：

首先在您的 xml 中创建任何布局，如下所示：

```
<RelativeLayout
        android:id="@+id/drawingLayout"     
        android:layout_width="wrap_content"     
        android:layout_height="wrap_content">

    </RelativeLayout> 
```

现在假设 main.xml 是您的主要 xml 布局文件，然后将该类添加到该布局中，如下所示：

```
 setContentView(R.layout.main);

    drawingLayout = (RelativeLayout)findViewById(R.id.drawingLayout);
    System.out.println("The Layout is: "+drawingLayout);
    myView = new MyView(this);
    drawingLayout.addView(myView); 
```

希望你明白了。如果没有，请告诉我。

享受。:))

# api - FB Graph 错误：“(#100) 用户必须在白名单中”

> ID：10743924
> 
> 赞同：4
> 
> 时间：2012-05-24T19:17:41.700
> 
> 标签：api, facebook-graph-api, facebook-opengraph

我打电话

```
https://graph.facebook.com/{the id of one of my app's actions} 
```

并获得以下响应正文：

```
{
  "error": {
    "message": "(#100) User must be on whitelist", 
    "type": "OAuthException", 
    "code": 100
  }
} 
```

我是相关应用的管理员。有人知道这个错误是什么意思吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-20T10:32:19.043

我今天收到了这个错误，问题是一些`fields were missing`. 所以，做`check your URL`，你在哪里发送请求。

就像在我的情况下，我不得不提出请求

```
https://graph.facebook.com/userID/myAppName/ 
```

相反，我要求

```
https://graph.facebook.com//myAppName/ 
```

那应该可以解决您的问题，就像我的问题一样：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-09T22:06:45.530

我也遇到了这个问题，虽然我不肯定我做了什么来解决它，但我认为它将操作链接到一个对象（“连接对象类型”表单字段）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-06-06T10:33:55.697

个人在请求**洞察**端点时遇到了这个问题：

```
https://graph.facebook.com/v2.9/<ad_id>/insights?fields=account_id,account_name,action_values,actions,ad_id,ad_name,adset_id,adset_name,app_store_clicks,buying_type,call_to_action_clicks,campaign_id,campaign_name,canvas_avg_view_percent,canvas_avg_view_time,canvas_component_avg_pct_view,clicks,cost_per_10_sec_video_view,cost_per_action_type,cost_per_estimated_ad_recallers,cost_per_inline_link_click,cost_per_inline_post_engagement,cost_per_total_action,cost_per_unique_action_type,cost_per_unique_click,cost_per_unique_inline_link_click,cpc,cpm,cpp,ctr,date_start,date_stop,deeplink_clicks,estimated_ad_recall_rate,estimated_ad_recallers,frequency,impressions,impressions_dummy,.... 
```

最后发现是**impressions_dummy**字段导致了问题，所以当从请求中删除它时，问题就解决了。

# mysql - 如何将一些数字集作为 ID 存储在数据库的列中，然后一个一个地获取它们？

> ID：10743926
> 
> 赞同：0
> 
> 时间：2012-05-24T19:18:04.270
> 
> 标签：mysql, database

我想将一些数字集作为文件 ID 存储在一列中，并在它们之后放置一个“，”以使它们分开。比如：8546, 5654, 2311, 7544, 6565, .... 但是在检索它们时，我想分别获取每个 ID。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:30:55.410

将数据存储在数据库列（mysql）中，并使用php中的explode函数从列中读取集合。但是，像这样存储数据并不是一个好主意，您必须将每个数据存储在单独的列中，您可以使用父表的 forain 键创建另一个表并将这些 id 存储在该表上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T19:31:57.630

您可能应该有另一个带有`id`s 的表，然后您可以从该表和该表中选择 id，如果您只想使用 MySQL 进行操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T19:32:36.740

如果只是mysql，试试正则表达式：

```
http://dev.mysql.com/doc/refman/5.1/en/regexp.html 
```

我不明白你在做什么或为什么要这样做，但这就是我会做的。使用某种类型的计数器来跟踪您所在的逗号，并在正则表达式之前添加计数器的数量。

这是如果它只是 mysql，如果你有 php、c#、java、python 或任何其他语言，你可以标记化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-24T19:34:48.787

这是可能的，但不建议 99%。

你可以做这个爆炸，IE：

```
insert into table1(id) values ("1,2,3,4,6,7,8,9") 
```

ID 字段不能是数字字段类型，可能 varchar 可能是一个不错的选择。对于 Mysql，这些值将是比数字更多的文本。

**但**

如果你这样做，你就错了，因为。

*   您不是在制作关系数据库。
*   您正在丢失索引，搜索会变慢。
*   你在你的代码中创建依赖，如果你想升级，添加新的东西，这根本不是一件容易的事。

请查看实体关系建模或 E/R 模型

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T20:14:38.190

如果您必须将此功能保留在数据库中，则可以使用过程。[这是一个](http://forge.mysql.com/tools/tool.php?id=4)拆分字符串并将其插入表中的示例。如果您想在一次调用中完成此操作，您需要在`TEMPORARY TABLE`过程中创建表，从中选择以从过程中返回结果，然后在退出之前将其删除。

*为了它对我有用，我需要删除 COMMENT 部分。*

# jquery-mobile - JQuery Mobile 表单提交自和至对话框

> ID：10743938
> 
> 赞同：2
> 
> 时间：2012-05-24T19:18:49.180
> 
> 标签：jquery-mobile, dialog

我打算使用一个对话框让用户登录到我的 jquery 移动应用程序。

基本功能是用户将输入用户名和密码。

*   如果不正确，对话框将保持打开状态。

*   如果正确，那么我将关闭对话框并将用户带到另一个页面。

我的问题是这样的。我注意到的一件事是，为了使我的对话框保持为对话框，我必须将包含“页面”的数据角色标记为对话框。但另一个问题是，每次我回帖时，位置哈希都会附加表单提交。因此，如果我两次错误地输入密码信息并决定关闭对话框，我将单击取消三次。

我的网址将开始如下所示：

```
/Mobile/jobs#&ui-state=dialog&ui-state=dialog&ui-state=dialog&ui-state=dialog&ui-state=dialog&ui-state=dialog 
```

我的问题是如何控制该行为，以使帖子不会导致将其他信息添加到位置哈希中？

# sms - gammu-smsd SQL Query Customization

> ID：10743944
> 
> 赞同：0
> 
> 时间：2012-05-24T19:19:15.923
> 
> 标签：sms, sms-gateway, gammu

I've a Problem with the gammu smsd-daemon. I wan't to customize some mysql querys to write something into my database.

I found this [http://wammu.eu/docs/manual/smsd/sql.html#gammu-smsd-sql](http://wammu.eu/docs/manual/smsd/sql.html#gammu-smsd-sql)

So I added this line to my config:

`[sql]`

`refresh_phone_state = "UPDATE`state`set`signal`='%2',`battery`='%1' WHERE`id`='1'"`

Then I killed all smsd Instances and restarted the smsd-daemon but the refresh_phone_state is always the same, my table state is never touched:

`May 24 18:43:01 debian gammu-smsd[2567]: Execute SQL: UPDATE`phones`SET`TimeOut`= (NOW() + INTERVAL 10 SECOND)+0,`Battery`= 0,`Signal`= 57 WHERE`IMEI`= '354483029016862'`

My config file is this: [http://pastie.org/pastes/3961819/text?key=kbkpmkalyybediaqxfb1a](http://pastie.org/pastes/3961819/text?key=kbkpmkalyybediaqxfb1a)

What did I wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-28T09:31:13.017

I figured out the Problem, I used gammu from the Debian Stable, so I had an older Version.

customization of the sql querys is since this version: `20101202 - 1.28.93`

# linq - LINQ OrderBy 不订购 .. 什么都没改变 .. 为什么？

> ID：10743948
> 
> 赞同：22
> 
> 时间：2012-05-24T19:19:39.933
> 
> 标签：linq, entity-framework, sql-order-by, iqueryable

知道为什么 LINQ OrderBy 在以下代码中不起作用，（没有错误，但方法不排序......）

首先我自己的类型

```
public class IQLinksView
    {
        public int id { get; set; }
        public int catid { get; set; }
        public int? viewed {get;set;}
        public string name {get;set;}
        public string desc {get;set;}
        public string url {get;set;}
        public string pic {get;set;}
        public string cat {get;set;}
    } 
```

然后查询：

```
IQueryable<IQLinksView> newView = 
              from links in this.emContext.tbl_otherlinks
              select new IQLinksView { id = links.pklinkid, catid =
              links.tbl_catgeory.pkcategoryid, viewed = links.linkviewed, name = links.linkname, 
              desc = links.linkdesc, pic = links.linkpicture,   url = links.linkurl, cat =
              links.tbl_catgeory.categoryname }; 
```

直到这里一切都很好:-)，但后来

```
newView.OrderBy(x => x.viewed); 
```

只是没有改变，...页面正在加载结果显示...但没有排序...嗅探

我有尝试（创建一个比较器对象......）：

```
newView.OrderBy(x => (Int32)x.viewed, new CompareIntegers()); 
```

同样的结果，没有排序......

我确实有解决方法，但只是想知道缺少什么....

任何建议将不胜感激：-)

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-05-24T19:20:52.843

不要丢弃返回值。`OrderBy`扩展方法*不会*改变输入。尝试：

```
newView = newView.OrderBy(x => x.viewed); 
```

`viewed`假设值是正确的，那没有理由不起作用。此外，请确保在任何会破坏排序的`OrderBy`操作（例如）之后。`Distinct`

快乐编码！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-01T11:12:36.520

[无跟踪查询](https://docs.microsoft.com/en-us/ef/core/querying/tracking#no-tracking-queries)

如果结果是只读结果，请考虑在 orderby() 之后使用 asnotracking()。

例子：

```
query = query.OrderByDescending(x => x.Rating).AsNoTracking(); 
```

# sql-server - VBS 错误，无法使用 WMI 服务执行查询？

> ID：10743949
> 
> 赞同：1
> 
> 时间：2012-05-24T19:19:42.987
> 
> 标签：sql-server, vbscript, wmi

我越来越`Incorrect Syntax Near ')'`

它引用的`oCN.Execute(sSQL)`那条线是接近尾声的。

从语法上讲，如果我删除其中的任何一行`For Each objItem in colItems`都不会引发错误。

是否不能使用 WMI 服务中的对象执行 SQL 查询？还是我在其他地方犯了错误？

我可以根据要求列出更多代码；我现在尽量保持简单。

```
Set oCN = CreateObject("ADODB.connection")
sCN =  "Provider=SQLOLEDB; Data Source=" & oRS("sql_server_instance") & ";Initial Catalog=master;Integrated Security=SSPI;"
oCN.Open sCN

'Gather disk information from WMI Service
Set oWMIService = GetObject("winmgmts:\\" & oRS("sql_server") & "\root\cimv2")
Set colItems = oWMIService.ExecQuery _
    ("Select * From Win32_Volume")

'Loop through all disks    
For Each objItem in colItems

sSQL="insert into HDS_DBA_DB.[dbo].[TEMP_disk_info_table] (drive_letter, capacity) " &_
"values('" & objItem.DriveLetter & "'," & objItem.Capacity & ")"

oCN.Execute(sSQL)

Next 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T19:34:19.943

似乎问题出在`objItem.Capacity`属性中，在插入之前检查该属性的值，因为该值可以为空，并且会产生不正确的 SQL 语句，例如

```
insert into HDS_DBA_DB.[dbo].[TEMP_disk_info_table] (drive_letter, capacity) values ('E:',) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T19:26:06.210

我相信在 ADODB.Connection 对象上使用 .Execute 是为了检索结果。

您是否尝试过使用 ADODB.Command 对象？

```
Set cmd = CreateObject("ADODB.Command")
cmd.ActiveConnection = oCN

cmd.CommandType = 1
cmd.CommandText = sSQL

cmd.Execute(); 
```

# jquery - JQuery UI Widget / Plugin: CamelCase 命名空间和/或插件名称

> ID：10743951
> 
> 赞同：0
> 
> 时间：2012-05-24T19:19:50.233
> 
> 标签：jquery, jquery-ui

创建 jQuery UI 小部件时，是否可以使命名空间和/或插件名称 CamelCase 或者约定全部小写..空格替换为下划线？

只是想知道可能性和约定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-25T06:07:44.023

可以使用您想要的任何约定，它只是一个名称。您甚至可以使用空格，但是您只能使用括号语法来调用它。我建议使用 camelCase（注意小写首字母和所有空格/破折号删除）

```
$(sel).myPlugin()
$(sel).MyPlugin()
$(sel).MYPLUGIN()
$(sel).MyPlUgIn()
$(sel)["My Superawsome Fantastic Plugin"]() 
```

# arduino - 从 Arduino 的 USB 端口发送串行数据

> ID：10743952
> 
> 赞同：5
> 
> 时间：2012-05-24T19:20:09.850
> 
> 标签：arduino

我正在使用带有 USB 主机屏蔽的 Arduino 兼容板通过其 USB 端口发送和接收串行数据。

对于任何初学者来说，这个精彩的视频解释了如何通过 USB 进行 Arduino 串行传输：[http ://www.youtube.com/watch?v=KYWCkdrCUKg](http://www.youtube.com/watch?v=KYWCkdrCUKg)

我使用的软件是我 PC 上的 Arduino 1.0，用于编写、编译和上传固件到 Arduino 板。我可以使用 Arduino 软件的“串行监视器”在 Arduino 和 PC 之间成功发送和接收串行数据。对于发送到 PC 的每个字节，Arduino 板的 TX 灯都会闪烁。到目前为止，一切都很好。

当我从 PC 上断开我的 Arduino 的 USB 电缆并连接到我自己的 USB 设备时，我的问题出现了——一个兼容 FTDI 的 USB 从设备。

（我的 Arduino 板现在有一个外部电源来提供 USB 电源。固件闪烁数字引脚 13 LED，所以我知道固件正在运行。我检查了从机上的 USB 引脚 1，所以我知道它得到了 5V。 )

但是现在，当相同的固件尝试向我的 USB 设备发送一些字节时，TX 灯不会闪烁，也没有任何传输。我在想也许 USB 数据 + 和数据线可能需要交换，但我不知道。任何人都可以提供一些建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-25T14:03:51.730

数字输出引脚 0 和 1 是串行的。尝试通过这些引脚对外部设备执行串行 RX/TX。

[Arduino 串行参考](http://arduino.cc/en/Reference/serial)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-28T19:00:24.750

TX LED 仅用于在用于上传屏蔽的 USB 端口上进行通信。HOST USB 适配器是不同引脚上的不同设备。您实际上可以同时连接它们，如[http://www.seeedstudio.com/wiki/index.php?title=Seeeduino_ADK_Main_Board上的图像所示](http://www.seeedstudio.com/wiki/index.php?title=Seeeduino_ADK_Main_Board)

在 Adb.h 中查看数据是如何实际发送到板上的。并根据您的需要将其剥离（因为 FTDI 不是主要宣传此额外端口的 Arduino 设备）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-06T11:08:55.603

如果您直接想使用 RX/TX 引脚与您的 PC 进行串行通信，您可能需要以下一些小部件：[http ://www.ebay.de/itm/6Pin-USB-2-0-zu-TTL -UART-Modul-Serieller-Wandler-CP2102-STC-Ersetzen-Ft232-V1N3-/262814438851?hash=item3d30f615c3:g:-LAAOSw4DJYgKa8](http://www.ebay.de/itm/6Pin-USB-2-0-zu-TTL-UART-Modul-Serieller-Wandler-CP2102-STC-Ersetzen-Ft232-V1N3-/262814438851?hash=item3d30f615c3:g:-LAAAOSw4DJYgKa8)

当您不想使用内部串行转 USB 驱动程序时，可以使用它们通过 USB 进行通信。

您使用的是 TTL 协议。

# java - 你如何在java中制作缩略图的分页列表/目录？

> ID：10743954
> 
> 赞同：1
> 
> 时间：2012-05-24T19:20:12.907
> 
> 标签：java, image, swing, pagination, thumbnails

我正在尝试创建一个带有缩略图及其文件名的分页列表的面板。该列表还需要按文件附带的各种元数据进行排序。缩略图为 120 像素宽 x 90 像素高。到目前为止，我有：

```
public void PhotoCatalog extends JPanel {
    private transient SortedList<PhotoMetadata> sortedThumbList;

    public void PhotoCatalog() {
        setLayout(new GridLayout(sortedThumbList % 3, 3));
        Iterator<PhotoMetadata> iterator = sortedThumbList.iterator();
        while (iterator.hasNext()) {
            Thumbnail thumbnail = new Thumbnail(iterator.next());
            JPanel panel = new JPanel(new BorderLayout());
            panel.add(thumbnail, BorderLayout.NORTH);
            panel.add(new JLabel(iterator.next().getFilename(), BorderLayout.SOUTH);
            this.add(panel);
        }
    }

    public class Thumbnail extends JPanel {
        BufferedImage thumbnail = null;

        public void Thumbnail(PhotoMetadata data) {
            try {
                thumbnail = ImageIO.read(new File(data.getFilename()));
            }
            catch (IOException e) {}
        }
        @Override
        public void paintComponent(Graphics g) {
            Graphics2D g2d = (Graphics2D) g;
            g2d.drawImage(thumbnail, 0, 0, null);
    }
} 
```

我需要整合实际列表才能进行排序和分页，但我不知道从哪里开始以及使用哪个列表。到目前为止，我的代码显示了一个尺寸不合适的黑色图像。

1) 如何让图像以正确的尺寸显示在目录中？2) 我如何集成一个可排序的列表来添加缩略图及其元数据？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-25T12:15:20.133

您的调用`drawImage()`可以具有将缩放图像的宽度和高度。您可以按排序顺序将每个添加`thumbnail`到 a中。[`JList`](http://docs.oracle.com/javase/tutorial/uiswing/components/list.html)A`JList`允许您更改图片的包装方式。将元数据放在每个`thumbnail`.

编辑：

> 可以`JList`支持分页吗？

是的，将列表添加到`JScrollPane`.

> 并且可以动态更新吗？

是的; 您可能希望`ListModel`通过覆盖的添加/插入方法来保持排序`DefaultListModel`。

# encryption - Symfony 2 代码加密

> ID：10743962
> 
> 赞同：1
> 
> 时间：2012-05-24T19:21:28.373
> 
> 标签：encryption, symfony

我正在寻找一种方法来保护 Symfony 的捆绑包/插件的代码。有什么方法可以使用 IonCube、Zend Guard 或 SourceGuardian 加密 php 代码（甚至只是操作）？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T09:34:57.743

没有机会加密 Symfony2 捆绑代码，但对于 Symfony1，有一个简单的技巧可以实现这一点。S1 正在扫描文件以查找其中的`class MyExampleClass`字符串，并基于此构建缓存信息。

要使加密的源文件与框架一起使用，您只需将`class MyExampleClass`作为注释添加到源文件。就像我提到不确定它是否适用于 S2 但我想它值得一试。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-25T07:33:28.080

您的程序应该可以工作：IonCube、Zend Guard 或 SourceGuardian

但是，如果您有时间并且对正则表达式很常用，您也可以自己编写。

用一些随机字符串替换相同的值、单词（函数名、变量、类等）并压缩代码，使之没有空行、空格。

只有 yml 文件、html 等应该保持不变。也可以使用一些困难的 shell 命令

```
cat *.php | regex(somereqex) | overwrite... 
```

# java - 这个在 JAVA 中使用的正则表达式有什么问题？

> ID：10743963
> 
> 赞同：0
> 
> 时间：2012-05-24T19:21:37.167
> 
> 标签：java, regex

在 JAVA 代码中使用以下正则表达式有什么问题：

```
 "(\\s[(]((\\w)*(\\s)*)*[)])" 
```

这是为了替换字符串中的模式，例如“(foo bar foo bar)”。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:42:03.007

首先，测试正则表达式的最佳方法是使用正则[表达式测试器](http://www.regextester.com/)

其次，获取[Regex Cheat Sheet的副本会很有帮助](http://www.addedbytes.com/cheat-sheets/regular-expressions-cheat-sheet/)

至于您的问题，因为括号是正则表达式中的保留字符，您需要使用 转义这些字符`\`，但在 Java 中，因为`\`是特殊字符，您必须转义两次 - 例如

```
\\(.*\\) 
```

这将匹配两个括号之间的任何内容。

要将其限制为仅匹配单词字符和空格，您可以使用：

```
\\((?:[\\w]|[\\s])*\\) 
```

为了解释这里发生了什么：

*   `(.)*`指示匹配与括号中的正则表达式匹配的任意数量的字符
*   `(?:.)*`因为括号意味着我们正在分组，所以我们补充`?:`说我们对组的内容不感兴趣
*   `[\\w]|[\\s]`指示匹配单词字符或空白字符

# javascript - 在数据表中动态添加行后，datatables-editable 插件不起作用

> ID：10743965
> 
> 赞同：1
> 
> 时间：2012-05-24T19:21:42.737
> 
> 标签：javascript, jquery, datatables, jeditable

我使用以下方法创建数据表：

```
 $('#purForm').dataTable({
        "bRetrieve": true,
        "bJQueryUI": true,
        "sDom": "<'row'<'span6'l><'span6'f>r>t<'row'<'span6'i><'span6'p>>",
        "bPaginate": false,
        "bAutoWidth": false,
        "bFilter": false

    }); 
```

然后进行编辑，我使用了 datatables 可编辑插件：

[http://code.google.com/p/jquery-datatables-editable/wiki/EditCell](http://code.google.com/p/jquery-datatables-editable/wiki/EditCell)

所以，基本上为了使它可编辑，我这样做：

```
$('#purForm').dataTable().makeEditable({
        sUpdateURL: function (value, settings) {
            return (value);
        }
    }); 
```

使可编辑后，我尝试使用动态添加一行：

```
 $('#purForm').dataTable().fnAddData(['', '', '', '', '', '']); 
```

但是可编辑不适用于这个动态添加的行，这是可以理解的，因为它可能没有使用 Jquery 的实时 api。我该如何纠正这个问题，以便它甚至适用于动态添加的行？

一个快速而肮脏的黑客将再次调用该函数：

```
$('#purForm').dataTable().makeEditable({
            sUpdateURL: function (value, settings) {
                return (value);
            }
        }); 
```

有没有更好的选择？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T17:25:05.027

这是一个已知的错误。使用带有数据表的 Jeditable 库，无法使用 fnAddData() 函数添加新行。

错误报告在这里：

[http://code.google.com/p/jquery-datatables-editable/issues/detail?id=57](http://code.google.com/p/jquery-datatables-editable/issues/detail?id=57)

作者似乎并不认为这是一个错误，除了复制看似复杂的私有函数的功能之外，并没有真正提供任何有用的帮助。如果您想看到更简单的方法，那么我强烈建议您对错误发表评论以通知作者。

仅供参考，要添加新行并使其可编辑，您需要创建一个自定义表单，然后通过表单中的字段提交行数据。请参阅此处的说明：

[http://code.google.com/p/jquery-datatables-editable/wiki/AddingNewRecords](http://code.google.com/p/jquery-datatables-editable/wiki/AddingNewRecords)

# php - 在php中提取json响应的正则表达式

> ID：10743967
> 
> 赞同：0
> 
> 时间：2012-05-24T19:21:57.073
> 
> 标签：php, regex

我是 php 新手，正在尝试使用 preg_match 编写一个正则表达式来提取我从 http get 获得的 href 值。响应看起来：

```
{"_links":{"http://a.b.co/documents":{"href":"/docs"}}} 
```

我只想提取 href 值并将其传递给我的下一个 api... 即 /docs。谁能告诉我如何提取这个？我一直在使用[http://www.solmetra.com/scripts/regex/index.php](http://www.solmetra.com/scripts/regex/index.php)来测试我的正则表达式 .. 从上一天开始就没有运气:(

请任何帮助将不胜感激。

谢谢，博士

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-24T19:24:08.887

不需要正则表达式。

使用[`json_decode()`](http://php.net/json_decode)然后访问该`href`属性。

例如：

```
$data = json_decode('{"_links":{"http://a.b.co/documents":{"href":"/docs"}}}', true);
echo $data['_links']['http://a.b.co/documents']['href']; 
```

**注意：**如果可能的话，我鼓励你清理你的 JSON。特别是钥匙。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T19:24:43.583

就像 HTML 解析一样，我建议不要使用正则表达式，而是使用 json 解析器然后读取值。查看 php.ini 中的 json_encode 和 json_decode 函数。

也就是说，如果您只需要 href 值，那么这里是一个正则表达式，可以在您给出的示例中执行此操作

```
preg_match('/"href":"([^"]+)"/',$string,$matches);
$matches[1];// this is the href 
```

只有当您确切地知道自己想要什么以及它将采用的格式时，Regex 才是正确的工具。通常无法准确预测来自其他方的 json 和 HTML。还有一些合法的 HTML 和 json 的例子不能用正则表达式正确解析，所以通常为它们使用专门的解析器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T19:25:08.620

不要使用正则表达式，使用`json_decode()`. JSON 是上下文无关语法的一个很好的例子，你甚至不应该尝试使用正则表达式进行解析。

这是 PHP.NET[关于使用`json_decode()`](http://php.net/manual/en/function.json-decode.php)这种事情的参考。

# flash - 使用 Cast 3D 错误 1046：Matrix 3D 是什么意思？

> ID：10743971
> 
> 赞同：1
> 
> 时间：2012-05-24T19:22:15.317
> 
> 标签：flash, ado

我正在尝试在 Flash 中使用 CAST3D，当我执行代码时，它给了我这个错误 1046：找不到类型或不是编译时常量：Matrix3D。当我单击编译器错误时，它会将我带到 CAST3D 的动作脚本，它是这样的：

public function get local(): Matrix3D { return this.geomgroup.transform; }

我已经在 flash 中安装了 library.swc 文件。我是 Flash 新手。这个问题有什么解决办法吗？非常感谢阿德里安·德·巴罗

```
public function blenderModel() 
    {
        setup3DScene();
    }
private function setup3DScene(): void
    {
        this.setupSandy();
        this.setupCast3D();
        this.setupControls();
        this.loadData();

        this.addEventListener(Event.ENTER_FRAME, this.handleEnterFrame);    
    }

    /**
     * initial setup for Sandy3D.
     */     
    public function setupSandy(): void
    {       
     // We create the camera
         camera = new Camera3D( 600, 400 );
         camera.near = 1;

         // We create the "group" that is the tree of all the visible objects
         var root:Group = new Group();

         // We create a Scene and we add the camera and the objects tree 
         scene = new Scene3D( "scene", this, camera, root );             
         scene.light = new Light3D(new Vector(0,0,1),100);
    }

    /**
     * initial setup for Cast3D.
     */     
    public function setupCast3D(): void
    {       
                    this.loaded = false;
        this.animator = new Cast3d(this.scene, this.camera);
        this.animator.animationType = Cast3d.ANIMATION_TYPE_BYFRAME; //  ANIMATION_TYPE_REAL; //
        this.animator.fps = 22;
        this.animator.autoRewind = false;                       
    }

    /**
     *  Function setups visual animation control 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:03:36.270

我不知道这个库，并且通过简要查看文档，我不是 100% 清楚它如何与 Papervision3D 或 Sandy3D 交互。但是，[教程页面](http://www.cast3d.org/tutorials)在单个 Cast3D swc 的下载链接旁边列出了以下要求：

*   使用渲染引擎 Sandy3D 或 Papervision3D 构建的 Flex 库 cast3d.swc 代码。

正如 Sunil 指出的那样，错误告诉您编译器找不到 Matrix3D 类。但是，我认为它是 Sandy3D 库中的 Matrix3D 类，而不是 Flash 播放器内置的版本。我认为您需要下载正确版本的 Sandy3D 并确保在您的编译器选项中正确引用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T20:01:35.570

错误是说您的编译器找不到[Matrix3D](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/geom/Matrix3D.html)类，该类内置于 Flash Player 10.0 及更高版本中。

您的项目的编译器设置是否可能指定 Flash 9，因此它不知道`Matrix3D`该类？

# android - 安卓：java.lang.NullPointerException

> ID：10743972
> 
> 赞同：0
> 
> 时间：2012-05-24T19:22:36.860
> 
> 标签：android, buzztouch

我目前有一个buzztouch android应用程序的问题我从google play创建的错误是

```
NullPointerException
in BT_viewUtilities.updateBackgroundColorsForScreen() 
```

我已将其范围缩小到以下代码，是否有人在代码中看到任何类型的错误。如果您需要其他东西，请询问，这将修复相当多的应用程序。谢谢

```
//updates a screens background colors and image...
public static void updateBackgroundColorsForScreen(final Activity theActivity, final          BT_item theScreenData){
BT_debugger.showIt(objectName + ":updateBackgroundColorsForScreen with nickname: \"" +     theScreenData.getItemNickname() + "\""); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-24T19:28:41.753

我不知道你的代码在做什么，但修复很简单：

```
//updates a screens background colors and image...
public static void updateBackgroundColorsForScreen(final Activity theActivity, final BT_item theScreenData){
     if(BT_debugger != null && theScreenData != null){
          BT_debugger.showIt(objectName + ":updateBackgroundColorsForScreen with nickname: \"" +     theScreenData.getItemNickname() + "\""); 
     } else {
         Log.e("YourApp", "Warning null var, command not completed");
     }
} 
```

要调试错误，您可以执行以下操作：

```
 //updates a screens background colors and image...
    public static void updateBackgroundColorsForScreen(final Activity theActivity, final BT_item theScreenData){
         if(BT_debugger != null){
             if(theScreenData != null){
                BT_debugger.showIt(objectName + ":updateBackgroundColorsForScreen with nickname: \"" +     theScreenData.getItemNickname() + "\""); 
             } else {
                Log.e("YourApp", "theScreenData was null, command not completed");
             }
         } else {
             Log.e("YourApp", "BT_debugger was null, command not completed");
         }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-24T19:24:25.790

theScreenData 或 BT_debugger 为空。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-24T19:28:13.690

我认为这是导致空点异常的行-theScreenData.getItemNickname()

# wpf - WPF 应用程序中的图像和 HTML

> ID：10743977
> 
> 赞同：2
> 
> 时间：2012-05-24T19:23:01.057
> 
> 标签：wpf, user-interface

我有一个 WPF 应用程序，其中有一列应显示以下内容之一：

1.  如果返回图像，则显示图像。

2.  如果返回 HTML 文本，则在单元格中呈现 HTML 表格。

有人可以告诉我我该怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T20:01:08.633

对于**HTML**，您可以参考此链接 - [http://pdgp.wordpress.com/2008/05/31/show-html-formatting-in-gridview-cells/](http://pdgp.wordpress.com/2008/05/31/show-html-formatting-in-gridview-cells/)

要显示**图像**，您可以参考这里 - [http://msdn.microsoft.com/en-us/library/2ab8kd75.aspx](http://msdn.microsoft.com/en-us/library/2ab8kd75.aspx)

希望这可以帮助。

**[Winforms DataGridView 更新]**

为了显示 HTML，唯一的选择是覆盖我想的 Paint 方法。或者，您可能会考虑托管一个**WebBrowserControl**。

如何：在 Windows 窗体 DataGridView 单元格中托管控件：-

[http://msdn.microsoft.com/en-us/library/7tas5c80.aspx](http://msdn.microsoft.com/en-us/library/7tas5c80.aspx)

# javascript - 在另一个 div 中加载 .ajax 后，我无法在我的 JStree 中选择一个节点

> ID：10743980
> 
> 赞同：0
> 
> 时间：2012-05-24T19:23:11.837
> 
> 标签：javascript, jquery, ajax, jstree

所以我有我的 JStree 内置`<div id="navtree">`，当一个节点被选中时，我通过 .ajax() 方法将一些内容加载到`<div id="tabs">`页面上的另一个地方：

```
$("#navtree")
  .jstree({
  "core" : { "animation" : 0 },
  "themes" : { "theme" : "classic", "dots" : true, "icons" : false },
  "ui" : { "select_limit" : 1 },
  "plugins" : [ "themes", "html_data", "ui" ]
})

.bind("select_node.jstree", function (event, data) {
  data.inst.toggle_node(data.rslt.obj);
  $("#main").css("display","none");
  var identifier = $.trim(data.rslt.obj.children("a").text());
  $.ajax({
    data : {target : identifier},
    type : "POST",
    url : data.rslt.obj.children("a").attr("href"),
    success : function(response) {
      $("#tabs").html(response);
      $("#tabs").tabs();
      $("#main").css("display","inline");
    }
  });
  $("#searchinput").val("") .focus();
  return false;
}); 
```

这一切都很好。

在这个新加载的内容中包含一些`<a class="searchlink">`标签，当单击这些标签时，我想以编程方式在我的 jstree 中选择一个节点。

使用 .on() 方法，我可以在单击这些`<a class="searchlink">`标签时触发警报：

```
$("body").on("click", "a.searchlink", function(event) {
  event.preventDefault();
  var $nodeid = "#" + $(this).text().replace(/\./g, "_");
  alert($nodeid);
  $("#navtree").jstree("select_node", $nodeid);
  //$(nodeid).trigger("select_node.jstree");
}); 
```

因为 .on() 会传播到添加到页面的所有未来元素，所以 alert() 向我显示了我想要选择的节点的正确 ID。

但是，无论我如何尝试（并且我已经尝试了所有我能想到的），我都无法让它在现有 jstree 中的节点上触发“select_node”事件，我怀疑它有一些东西要这些`<a class="searchlink">`标签是在 jstree 被实例化很久之后通过 .ajax() 调用添加到页面中的。

新信息：

每次单击`<a class="searchlink">`通过 .ajax() 加载的内容时，Firefox Web 开发人员控制台都会向我显示错误“$("#navtree").jstree 不是函数”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-10T17:43:49.567

不久前，当我试图通过单击树上的节点在同一屏幕上填充 div 时，我收到了类似的错误“$("#sometree").jstree is not a function”。原来加载到 div 上的页面再次加载 jquery，这导致了这个奇怪的问题。检查您通过 ajax 加载的内容是否有再次加载 jquery 的指令。

# c++ - 编译 c++ 代码时出现奇怪的输出。有任何想法吗？

> ID：10743982
> 
> 赞同：0
> 
> 时间：2012-05-24T19:23:12.770
> 
> 标签：c++

当我编译我的代码时，我得到一组错误，这些错误似乎与 .o 文件中的输出文件相关。我不确定为什么会发生这些错误。有任何想法吗？

```
/tmp/ccjPLJVV.o: In function `PubSub::~PubSub()':
Video_process.cpp:(.text._ZN6PubSubD2Ev[_ZN6PubSubD5Ev]+0x12): undefined reference to `vtable for PubSub'
/tmp/ccjPLJVV.o: In function `main':
Video_process.cpp:(.text.startup+0x34): undefined reference to `vtable for PubSub'
Video_process.cpp:(.text.startup+0xeb): undefined reference to `PubSub::run()'
/tmp/ccjPLJVV.o:(.rodata._ZTI13Video_process[typeinfo for Video_process]+0x10): undefined reference to `typeinfo for PubSub'
collect2: ld returned 1 exit status 
```

这本质上是我尝试编译时得到的输出。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:24:30.307

看来您有未实现的`virtual`方法。

```
class PubSub
{
    //virtual destructors, although pure
    //MUST have an implementation
    virtual ~PubSub() = 0 { } 

    /*virtual?*/ void Run(); // <--- have you implemented this one?
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-24T19:51:16.570

*这是来自链接器*的错误消息，而不是编译器。链接器在某些文件中找不到一些已声明但未定义的符号，它试图链接在一起以生成（很可能）可执行文件。解决方案是提供定义，即带有这些定义的（编译的）代码。该代码可能已经存在，您只需要“链接它”（告诉链接器在那里搜索符号）或可能不存在，在这种情况下您必须提供它......

例如，将定义类实现的文件添加`PubSub`到链接器/编译器命令行应该有助于...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-24T20:28:01.400

也许你已经实现了这个方法，但你还没有链接它。如果你使用 GCC，*-o*标志是你的朋友；编译 main.cpp 时必须指定所有类 .o 文件。

# macos - Mac Mini NAT 重定向

> ID：10743983
> 
> 赞同：0
> 
> 时间：2012-05-24T19:23:14.000
> 
> 标签：macos, networking, nat

我的情况如下：我正在开发的应用程序使用多个数据库服务器（MySQL）连接，我在本地工作，这些数据库服务器不允许来自任何地方的连接，所以我设置了一个本地测试服务器。如何将所有到这些服务器（端口 3306）的传出流量重定向到此本地服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T21:55:39.973

据我所知——即使我从未使用过它——你可以在 OSX 上使用 ipfw 工具来完成与使用 iptables 类似的任务（过滤、地址转换等）。在这里您可以找到更多提示： [OSX pfctl 手册页](https://developer.apple.com/library/mac/#documentation/Darwin/Reference/ManPages/man8/pfctl.8.html#//apple_ref/doc/man/8/pfctl)

# javascript - 这个js在没有url前缀的情况下中断是否有原因：www？

> ID：10743984
> 
> 赞同：0
> 
> 时间：2012-05-24T19:23:16.383
> 
> 标签：javascript, url, no-www

当我测试这个网站时，如果我使用不带前缀的 url：www.

如果我在那里有前缀，它工作正常。

我并不是真的在这个特定的网站问题上寻求帮助，但是 javascript 是否需要 url 前缀才能正常工作？当完整的网址不存在时，是否应该发生某些功能中断？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-24T19:28:48.100

[http://www.example.org](http://www.example.org)和[http://example.org](http://example.org)是两个非常不同的[域](http://en.wikipedia.org/wiki/Domain_name)。Javascript 需要一个引用现有站点的 URI 才能工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-24T19:29:29.040

听起来好像发生了其他事情。Javascript 不会因为您访问的网址没有 www 前缀而中断。

您的网络服务器可能会导致一些古怪的设置。如果你的 .htaccess 文件是 Apache，你可能会在你的 .htaccess 文件中有一些时髦的重写规则。或者它可能是 javascript 中的某个东西，它正在寻找一个硬编码的 url 或其他东西。

同样，答案是否定的。URL 上的前缀本身并不会阻止 Javascript 正常工作。

# .htaccess - 将 .htm 附加到任何带有或不带有扩展名的 url

> ID：10743985
> 
> 赞同：1
> 
> 时间：2012-05-24T19:23:25.463
> 
> 标签：.htaccess

我试图将 .htm 扩展名附加到没有任何扩展名的 url，但我没有任何结果 RewriteRule ^index.php$ - [L]

```
RewriteCond %{REQUEST_FILENAME}\.htm -f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^.*$ $1.htm [R=301,L] 
```

任何提示？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:29:51.590

$1 用于团体，你需要的是这样的：

```
RewriteRule ^(.*)$ $1.htm [R=301,L] 
```

但是要匹配没有扩展名的路径，您需要将表达式更改为更接近您的实际情况。例如这个：

```
http://domain.com/a.b.c.d 
```

d 是不是扩展？也许正确的表达式是 ^([^.]+)$ 来查找没有 . 特点。

# iphone - 照片应用程序，例如在缩放模式下使用手势识别器在滚动视图中滚动

> ID：10743986
> 
> 赞同：1
> 
> 时间：2012-05-24T19:23:26.640
> 
> 标签：iphone, ipad, uiscrollview, scroll, uigesturerecognizer

很长一段时间后，我带着一个问题来到SO，我还没有学到足够的东西:(。

我有一个`UIScrollView`里面有`UIImageView`它。的图像`UIImageView`是通过左右滑动来改变的。我知道覆盖触摸`UIScrollView`不是一个好的和有效的解决方案，所以我在`UIScrollView`覆盖边界的（而不是它的子视图）上添加了一个透明视图，`UIScrollView`并覆盖了它的触摸方法以更改滑动时的图像。

现在，在透明视图中添加捏合的帮助下，`gesture recognizer`我能够以`UIScrollView`编程方式缩放图像。到这里为止，我能够顺利地工作，但我还有另一个典型的功能。我必须用手指上下移动缩放的图像，这样我才能看到裁剪后的图像。我是在`UILongPressGestureRecognizer`添加到我的透明视图的帮助下完成的。在触摸持续时间为 1 秒后，我添加了一个`UIImageView`带有四向箭头图像的图像并添加了触摸位置。现在当我移动我的手指时，`fourwayarrow image`跟随我的手指，但滚动视图中的图像不跟随我的手指。它有点生涩，经常像我系了一根松紧带一样工作。所以最初我必须将字符串拉到某个阈值（直到那个点滚动视图不会移动），当它达到那个水平时，它突然开始失控。我在这里添加代码供大家查看。

如果您需要任何其他信息，请随时添加评论。

```
- (void) handleLongPress:(UILongPressGestureRecognizer *)longPressGestureRecognizer{
    CGPoint touchLocation = [longPressGestureRecognizer locationInView:self.transparentLayer];
    switch (longPressGestureRecognizer.state) {
        case UIGestureRecognizerStatePossible: break;
        case UIGestureRecognizerStateBegan:{
            if (fourWayArrowImageView == nil) {
                fourWayArrowImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"4wayarrow.png"]];
                [fourWayArrowImageView setBackgroundColor:[UIColor clearColor]];
            }
            _previousLocation.x = touchLocation.x;
            _previousLocation.y = touchLocation.y;
            [fourWayArrowImageView setCenter:touchLocation];
            [self.transparentLayer addSubview:fourWayArrowImageView];
        }
            break;
        case UIGestureRecognizerStateChanged:{
            float dx = (touchLocation.x - _previousLocation.x);
            float dy = (touchLocation.y - _previousLocation.y);
            CGPoint currentMaxOffset = [self currentMaxOffset];
            CGPoint currentOffset = [self.rotatableImageViewContainingScrollView contentOffset];
            float theScale = [self.rotatableImageViewContainingScrollView zoomScale];
            currentOffset.x -= (dx*theScale);
            currentOffset.y -= (dy*theScale);

            [fourWayArrowImageView setCenter:touchLocation];
            CGSize size = self.rotatableImageViewContainingScrollView.frame.size;
            [self.rotatableImageViewContainingScrollView scrollRectToVisible:CGRectMake(currentOffset.x, currentOffset.y, size.width, size.height) animated:YES];
            _prevMaxOffset = CGPointMake(currentMaxOffset.x, currentMaxOffset.y);
        }
            break;
        case UIGestureRecognizerStateCancelled:
        case UIGestureRecognizerStateFailed:
        case UIGestureRecognizerStateEnded: [fourWayArrowImageView removeFromSuperview]; break;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:34:33.650

找到了解决方案。其实我做错了。滚动后我没有更新以前的位置，在这种情况下滚动不应该是动画的。所以请看答案。顺便说一句，感谢所有付出时间的人：

```
- (void) handleLongPress:(UILongPressGestureRecognizer *)longPressGestureRecognizer{
    CGPoint touchLocation = [longPressGestureRecognizer locationInView:self.transparentLayer];
    switch (longPressGestureRecognizer.state) {
        case UIGestureRecognizerStatePossible: break;
        case UIGestureRecognizerStateBegan:{
            if (fourWayArrowImageView == nil) {
                fourWayArrowImageView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"4wayarrow.png"]];
                [fourWayArrowImageView setBackgroundColor:[UIColor clearColor]];
            }
            _previousLocation = CGPointMake(touchLocation.x, touchLocation.y);
            [fourWayArrowImageView setCenter:touchLocation];
            [self.transparentLayer addSubview:fourWayArrowImageView];
        }
            break;
        case UIGestureRecognizerStateChanged:{
            float dx = (touchLocation.x - _previousLocation.x);
            float dy = (touchLocation.y - _previousLocation.y);
            CGPoint currentMaxOffset = [self currentMaxOffset];
            CGPoint currentOffset = [self.rotatableImageViewContainingScrollView contentOffset];
            //float theScale = [self.rotatableImageViewContainingScrollView zoomScale];
            //currentOffset.x -= (dx*theScale);
            //currentOffset.y -= (dy*theScale);
            currentOffset.x -= (dx);
            currentOffset.y -= (dy);
            [fourWayArrowImageView setCenter:touchLocation];
            CGSize size = self.rotatableImageViewContainingScrollView.frame.size;
            [self.rotatableImageViewContainingScrollView scrollRectToVisible:CGRectMake(currentOffset.x, currentOffset.y, size.width, size.height) animated:NO]; //bool value in animated should be false.
            _prevMaxOffset = CGPointMake(currentMaxOffset.x, currentMaxOffset.y);
            _previousLocation = CGPointMake(touchLocation.x, touchLocation.y); // added this line in the answer.
        }
            break;
        case UIGestureRecognizerStateCancelled:
        case UIGestureRecognizerStateFailed:
        case UIGestureRecognizerStateEnded: [fourWayArrowImageView removeFromSuperview]; break;
    }
} 
```

因此，缩放模式下的滚动现在与照片应用程序完全一样。

希望这可以帮助

# android - Android上的Http持久连接和从wi-fi切换到蜂窝

> ID：10743987
> 
> 赞同：0
> 
> 时间：2012-05-24T19:23:28.513
> 
> 标签：android, linux, http, networking, tcp

我看到一些奇怪的行为/错误似乎只在从 wi-fi 切换到蜂窝网络时发生。其中之一是以下例外：

> java.net.SocketTimeoutException：在 org.apache.harmony.luni.platform.OSNetworkSystem.connectStreamWithTimeoutSocket(OSNetworkSystem.java:131) 的 org.apache.harmony.luni.platform.OSNetworkSystem.connectStreamWithTimeoutSocketImpl(Native Method) 处未连接套接字org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:247) at org.apache.harmony.luni.net.PlainSocketImpl.connect(PlainSocketImpl.java:535) at java.net.Socket.connect( Socket.java:1071) 在 org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnection.(HttpConnection.java:62) 在 org.apache.harmony.luni.internal.net.www.protocol .http.HttpConnectionManager$ConnectionPool.getHttpConnection(HttpConnectionManager.java:145) 在 org.apache.harmony.luni.internal.net.www.protocol.http.HttpConnectionManager.getConnection(HttpConnectionManager.java:67) 在 org.apache.harmony.luni.internal.net.www.protocol 的 org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnection.getHTTPConnection(HttpURLConnection.java:821)。 http.HttpURLConnection.connect(HttpURLConnection.java:807) 在 org.apache.harmony.luni.internal.net.www.protocol.http.HttpURLConnection.getOutputStream(HttpURLConnection.java:1150) 在 com.nexage.android.reports2。 AdReport2$ReportTask.run(AdReport2.java:492) 在 java.util.Timer$TimerImpl.run(Timer.java:290)getOutputStream(HttpURLConnection.java:1150) at com.nexage.android.reports2.AdReport2$ReportTask.run(AdReport2.java:492) at java.util.Timer$TimerImpl.run(Timer.java:290)getOutputStream(HttpURLConnection.java:1150) at com.nexage.android.reports2.AdReport2$ReportTask.run(AdReport2.java:492) at java.util.Timer$TimerImpl.run(Timer.java:290)

这可能是由以某种方式“卡住”的持久连接引起的吗？如果是这样，有没有办法重置连接？我知道 HTTP 应该是无状态的，而且我不知道有任何方法可以“重置”HTTP 连接，但我认为操作系统级别可能存在一些错误，即使连接是打开的，它也试图保持打开状态破碎的。

谢谢，我一直在尝试解决这个问题一个星期，但还没有任何线索！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:28:24.400

您是否检测到网络交换机并重新建立 HTTP 会话？当您切换网络类型时，您的 HTTP/TCP 连接将关闭，导致类似于您再次尝试使用它时看到的错误。

顺便说一句，持久的 HTTP 连接并不意味着当您断开网络连接时它将是持久的。这意味着在大多数情况下，您可以通过同一连接发送多个请求。

# matlab - MatLab - 理解 plot3 的输入

> ID：10743989
> 
> 赞同：2
> 
> 时间：2012-05-24T19:23:41.470
> 
> 标签：matlab, plot

`plot3`我对MatLab中的函数有一个简短的问题。

假设我写了以下内容：

```
x = [1 1 -1 1];
y = [4 4 4 4];
z = [-1 1 1 -1];

plot3(x,y,z) 
```

为什么 MatLab 然后绘制一个顶点在 (-1,4-1)、(1, 4, -1) 和 (1,4,1) 的三角形，而不是仅仅绘制点 (-1, 4, -1) , (1, 4, -1) 和 (1, 4, 1)？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T19:29:11.953

`plot`和的默认线型`plot3`是一条线，而不仅仅是点。如果您只想绘制点，请使用不同的样式：

```
plot3(x,y,z,'or'); #% plots red circles at each point 
```

# c# - ViewModels 开启对话

> ID：10743990
> 
> 赞同：1
> 
> 时间：2012-05-24T19:23:44.107
> 
> 标签：c#, mvvm

ViewModel 打开附加对话真的有什么问题吗？假设我有一个 MainView 和一个 MainViewModel。MainViewModel 是 MainView 的数据上下文，实际上并不知道或对 mainview 本身有任何依赖。

但是，在某些情况下，主视图需要打开会影响 ViewModel 数据的对话。例如，我可能想要显示一个对话并显示一些项目以允许用户从中进行选择。所以，我决定的是：

在我的 ViewModel 中，我有以下方法：`AddItem`、`EditItem`和`DeleteItem`。但是，为了提供要添加或编辑的项目，我需要在一些对话框中显示一个列表供用户选择。现在我让 ViewModel 这样做只是因为我不想为这些简单的任务实现额外的抽象级别。让 ViewModel 这样做意味着它可以向用户提供要显示的列表，并且当用户完成编辑或选择时，它可以轻松更新其成员集合/属性。

我应该被枪杀以解决这种方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-24T19:30:55.367

射击？不，但有充分的理由不这样做。

首先，它会破坏 ViewModel 的可测试性，因为现在有一个可视化组件。当您尝试针对它编写自动化单元测试时，您仍然必须与它进行交互。您可以将其模拟出来，但是当您调用 UI 方法时，这样做会变得更加困难。

其次，您的视图模型不应该关心显示的内容。当你开始组合这些东西时，会有一个真正的“关注点分离”问题。

第三，它只是有一种“代码味道”。

您可以采取一些措施来规避此问题。我建议的第一件事是**不要使用 dialogs**。对话框有它们的位置，但程序员倾向于过度使用它们。重新考虑您的设计，并尝试弄清楚如何在不打扰用户的情况下完成工作。

其次，考虑使用消息传递框架在视图模型和视图之间发送消息以导航到对话框（如果您绝对*必须*使用它们）。消息很容易模拟和/或编写单元测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-25T06:37:52.917

做到这一点的简单方法：使用**对话服务**- 易于使用，易于单元测试！

看到[这个](https://stackoverflow.com/questions/3801681/good-or-bad-practise-for-dialogs-in-wpf-with-mvvm)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-25T09:19:19.253

我总是使用 Seelctor 服务（只是一个基本的对话服务）来执行此操作 - 它是可测试的和可模拟的，并且使代码非常可靠。

```
class ViewModel
{
    public ICommand ShowListSelectorForCounterparties { get; set; }

    public IListSelectorService ListSelector { get; set; }

    public void OnExecuteShowCounterpartySelector()
    {
        this.Counterparty = this.ListSelector.Select<Counterparty>();
    }
} 
```

其中 IListSelectorService 可以在运行时实例化您的对话框，显示您的列表并返回所选项目。以这种方式运行它的主要好处是您的单元测试可以模拟 IListSelectorService。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-10T13:03:40.607

我不确定您是否仍在寻求任何帮助，但我在对话框方面采取的方法是让视图模型引发视图可以处理的事件。视图现在可以做任何它想要将数据获取到视图模型的操作，因此您可以毫无问题地在视图中显示对话框。您将对话框中的响应传递给事件的 EventArgs，以便视图模型拥有它正在寻找的数据以便继续。

例如：

```
Public Class View

   Private WithEvents _VM AS new ViewModel()

   Private Sub _VM_AddingItem(Sender AS Object, E AS ViewModel.ItemEventArgs)
      Dim Dialog As new SomeDialog()

      If Dialog.ShowDialog then 
         E.Item = Dialog.Item
      Else
         E.Cancel = True
      End If
   End Sub 

End Class

Public Class ViewModel 
   Public Sub AddItem(Item AS Object) 
       Do Some Work here 
    End Sub 

    Private Sub _AddItem() 
       Dim Args AS New ItemEventArgs()

       OnAddingItem(Args)

       If not Args.Cancel Then AddItem(Args.Item)
    End Sub 

    Protected Sub OnAddingItem() 
       RaiseEvent AddingItem(me, ItemEventArgs)
    End Sub

    Public Event AddingItem(Sender AS Object, E As ItemEventArgs)

    Public Class ItemEventArgs
       Public Property Item AS Object
       Public Property Cancel AS Boolean = false
    End Class
End Class 
```

然后只需将您的命令连接到`_AddItem`仅引发事件以收集该方法所需数据的私有`AddItem`方法。我希望这有帮助 ：）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-24T19:29:02.137

我认为 ViewModel 之间的通信没有任何问题。问题是他们是否开始访问视图或其他对话框，因为这会影响系统的可测试性。

如果您真的想要一个更松散耦合的系统，您可以使用某种消息传递系统进行通信，但我怀疑您在这里需要它:-)

# ruby-on-rails - 可以从 link_to 渲染部分内容吗？

> ID：10743993
> 
> 赞同：0
> 
> 时间：2012-05-24T19:23:50.180
> 
> 标签：ruby-on-rails, coffeescript, twitter-bootstrap, ruby-on-rails-3.2

我正在尝试使用 Twitter-Bootstraps 模式功能在 Ruby On Rails 中为我的 web 应用程序创建一个精美的登录表单。

这是我目前的表格。

**_login_form.html.erb**

```
<div class="modal hide" id="loginModal">
  <div class="modal-header">
    <button class="close" data-dismiss="modal">×</button>
    <h3>Sign in</h3>
  </div>
  <div class="modal-body">
    <%= simple_form_for(resource, :as => resource_name, :url => session_path(resource_name),:html => { :class => 'form-horizontal' }) do |f| %>
            <%= f.input :email, :required => false, :autofocus => true %>
            <%= f.input :password, :required => false %>
            <%= f.input :remember_me, :as => :boolean if devise_mapping.rememberable? %>
            <%= f.button :submit, "Sign in", :class => 'btn' %>
        <% end %>
  </div>
</div> 
```

这是我的咖啡脚本。

```
jQuery ($) ->
  $('#login').modal('show') 
```

无论如何可以从部分调用表单吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-24T19:30:16.223

您可以使用 Ajax 做到这一点：您的链接将触发 Ajax 调用。响应将是带有登录表单的模式，然后您必须将响应 HTML 附加到您的文档并显示模式。

否则，您可以简单地使用您的页面加载模式，这对用户来说会更快，因为他不必等待 Ajax 响应。

# magento - magento - 使用 magmi 导入可配置产品

> ID：10743998
> 
> 赞同：2
> 
> 时间：2012-05-24T19:24:06.760
> 
> 标签：magento, magmi

在发布这个问题之前，我已经尝试了一些方法来完成这项工作，但它没有。

这是csv结构：

```
|model - map to sku
|name
|price
|category - map to categories
|loc
|image - use image plugin - works fine
|description
|weight
|option_type
|option_value
|suggested_retail
|special_handling
|manufacturer
|manufacturer_code
|packaging
|in_stock
|last_updated
|active
|visibility : default mapper plugin, value: 'Catalog, Search'
|configurable_attributes : default mapper plugin, value: 'manufacturer,color' 
```

示例 csv 文件： http: [//pastebin.com/kRW2vQrY](http://pastebin.com/kRW2vQrY)。

所有简单的产品都可以正常导入，但可配置的产品则不然。我已经使用以下设置激活了可配置项目：

```
Perform simples/configurable link Yes
auto match simples skus before configurable Yes
Force simples visibility No 
```

**我想知道为什么它不起作用以及这个问题的解决方案？** 谢谢阅读 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-30T08:21:09.927

因为我通过编写自己的解析器来解决问题，将一些特定列从原始 csv 映射到 magmi 的 csv 结构。我还为可配置产品创建了另一个文件，其中包含新的两列：

```
 type : 'configurable'
  simples_skus: list of simple skus 
```

感谢阅读和讨论：）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-13T00:32:44.767

据我了解自动映射，它基于您为 configure_attributes 指定的属性（在您的情况下为制造商，颜色）。但是，您的 csv 结构似乎不包含颜色属性的值