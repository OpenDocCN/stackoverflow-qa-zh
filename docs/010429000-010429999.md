# StackOverflow 问答 10429000-10429999

# c++ - 在 C++ 程序中调用 dll 函数

> ID：10429001
> 
> 赞同：2
> 
> 时间：2012-05-03T09:53:02.657
> 
> 标签：c++

我创建了两个新的 C++ 项目。其中一个是 C++ .dll 项目，另一个是控制台应用程序项目。

对于 dll 程序，这是简单的代码（**.cpp 文件**）：

```
PIPESTOSPACES_API int npipesToSpaces=0;

PIPESTOSPACES_API int fnpipesToSpaces(void)
{
    return 42;
} 
```

我必须调用这些 dll 函数，我通过从我的 C++ 文件中导出函数以及在我的 C++ 控制台应用程序中的隐式链接来执行此操作。
如果有人能提到如何在 C++ 控制台应用程序中调用这些导出的 .dll 函数的步骤，那就太好了。我参考[了这个](http://www.codeguru.com/cpp/cpp/cpp_mfc/tutorials/article.php/c9855/DLL-Tutorial-For-Beginners.htm)页面来学习导出功能等。

编辑：我目前在 Visual Studio 2010 上使用 Visual C++ 处理所有这些东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T09:55:28.860

如果包含头文件，则可以直接调用该函数，因为您知道原型并导入库。

如果没有，您调用`LoadLibrary`，获取 dll 的句柄，`GetProcAddress`然后调用该函数作为回调。

# apache-flex - 在项目渲染器内滚动会导致一个空项目

> ID：10429005
> 
> 赞同：1
> 
> 时间：2012-05-03T09:53:24.790
> 
> 标签：apache-flex, mobile, scroll, itemrenderer

我正在开发一个移动应用程序。我有一个带有水平列表的视图，每个项目都有一个很长的描述，所以我需要一个垂直滚动来获取这些独立信息。我正在尝试将滚动添加为 itemRenderer 的子项。我不明白。有谁知道我在做什么坏事？我有一个继承 ItemRenderer 的类（我也尝试了 AsFusion 的 BaseRenderer，它似乎对移动应用程序具有更高的性能，结果相同）。这是我的代码中滚动的部分：

```
 override protected function createChildren():void
    {
        super.createChildren();
        scroller = new VScrollBar();
        scroller.percentHeight = 100;
        scroller.setStyle('right', 0);
        scrollGroup = new Group();
        scrollGroup.percentHeight = 100;
        scrollGroup.percentWidth = 100;
        super.addElement(scroller);
        super.addElement(scrollGroup);

        scroller.viewport = scrollGroup;
    } 
```

我也试过

```
 override protected function createChildren():void
    {
        super.createChildren();
        scroller = new Scroller();
        scroller.percentHeight = 100;
        scroller.percentWidth = 100;
        scrollGroup = new Group();
        scrollGroup.percentHeight = 100;
        scrollGroup.percentWidth = 100;
        super.addElement(scroller);
        super.addElement(scrollGroup);

        scroller.viewport = scrollGroup;
    } 
```

结果是一样的。列表中的一个空项。我可以更改页面（列表水平滚动的pagesnapping）并且下一项也是空的。如果我删除 addElement(scroller) 我可以完美地看到这些项目，但没有我真正需要的垂直滚动。所以问题出在滚动条上。知道我在做什么这么糟糕吗？请？我需要actionscript中的解决方案，我已经完成了更多的itemrenderers，我将进行继承，并且在actionscript中移动设备的性能更好。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:23:43.557

我从来没有在项目渲染器中使用过滚动条...但是您可能会查看[Scroller](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/Scroller.html)组件？像这样的东西：

```
<s:ItemRenderer>
    <s:Scroller width="100%" height="100%">
        <s:Group>
            <Your_components_here />
        </s:Group>
    </s:Scroller>
</s:ItemRenderer> 
```

不确定它的行为是否会有所不同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T07:24:10.517

我解决了，在 Grigorash Vasilij 的指导下，我注意到滚动条的内容没有显示，因为在组中内容大小为 0，私有可见变量为 false。所以滚动条的百分比大小不起作用，我在方法 updateDisplayList 中更新了它。

```
 override protected function updateDisplayList( unscaledWidth:Number, unscaledHeight:Number ):void
    {                       
        super.updateDisplayList( unscaledWidth, unscaledHeight );

        scroller.width = unscaledWidth;
        scroller.height = unscaledHeight;
        ...
    } 
```

之后，滚动条是水平的，然后水平滚动不起作用，如果需要的话，我想要一个verticalScroll在item Renderer中，所以在Scroller的构造函数之后我将滚动的horizo​​ntalPolicy设置为off。结果如下：

```
 override protected function createChildren():void
    {
        super.createChildren();
        scroller = new Scroller();
        scroller.percentHeight = 100;
        scroller.percentWidth = 100;
        scroller.setStyle("horizontalScrollPolicy", "off");
        scrollGroup = new Group();
        scrollGroup.percentHeight = 100;
        scrollGroup.percentWidth = 100;
        addChild(scrollGroup);
        scroller.viewport = scrollGroup;
        addChild(scroller);

    } 
```

我的类是[从 Asfusion 继承 BaseRenderer](http://www.asfusion.com/blog/entry/mobile-itemrenderer-in-actionscript-part-4)如果你继承 itemrenderer 使用 addElement 而不是 addChild。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T12:50:12.100

为了工作，卷轴需要一个实际的宽度和高度。您传递的组似乎实际上是空的，尽管它们确实有一个 set `percentWidth`。向其中添加内容。

如果您正在滚动文本，使用`TextArea`.

# c++ - 除了样式检查之外，是否有方便的工具来自动检查 C++ 编码约定？

> ID：10429007
> 
> 赞同：12
> 
> 时间：2012-05-03T09:53:29.517
> 
> 标签：c++, static-analysis

是否有好的工具可以自动检查 C++ 项目的编码约定，例如：

*所有抛出的对象必须是从 std::exception 派生的类（即`throw 42;`或`throw "runtime error";`将被标记为错误，就像`throw std::string("another runtime error");`或抛出任何其他非从 std::exception 派生的类型一样）*

最后，我正在寻找类似[Cppcheck](http://cppcheck.sourceforge.net/)的东西，但添加新检查的方法比破解检查工具的源代码更简单......甚至可能是带有漂亮的小 GUI 的东西，它允许您设置规则，将它们写入磁盘并使用 Eclipse 等 IDE 或[Jenkins](http://jenkins-ci.org/)等持续集成服务器中的规则集。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T10:46:59.480

我在当前项目中运行了许多静态分析工具，以下是一些关键要点：

*   我使用[Visual Lint](http://www.riverblade.co.uk/products/visual_lint)作为运行所有这些工具的单一入口点。VL 是 VS 运行第三方静态分析工具的插件，允许从报表到源代码的单击路由。除了支持在报告的不同级别错误之间进行选择的 GUI 之外，它还提供自动背景分析（告诉您在进行过程中已修复了多少错误）、单个文件的手动分析、彩色编码错误显示和图表工具。当您尝试添加新的静态分析工具时，VL 安装程序非常漂亮并且非常有用（如果您想使用 Google cpplint 并且没有预安装 Python，它甚至可以帮助您从 ActiveState 下载 Python！）。您可以在此处了解有关 VL 的更多信息：[http://www.riverblade.co.uk/products/visual_lint/features.html](http://www.riverblade.co.uk/products/visual_lint/features.html)

*   在可以使用 VL 运行的众多工具中，我选择了三个使用原生 C++ 代码的工具：cppcheck、Google cpplint 和 Inspirel Vera++。这些工具具有不同的功能。

*   Cppcheck：这可能是最常见的，我们都用过。所以，我会掩盖细节。可以说它捕获了错误，例如对非原始类型使用后缀增量，在应该使用 empty() 时使用 size() 发出警告，变量范围缩小，类定义中成员的名称限定不正确，初始化顺序不正确类成员、缺少初始化、未使用的变量等。对于我们的代码库，cppcheck 报告了大约 6K 错误。有一些误报（例如未使用的功能），但这些都被抑制了。您可以在此处了解有关 cppcheck 的更多信息：http: [//cppcheck.sourceforge.net/manual.pdf](http://cppcheck.sourceforge.net/manual.pdf)

*   [Google cpplint](http://code.google.com/p/google-styleguide/)：这是一个基于 python 的工具，用于检查您的源代码是否存在样式违规。可以在此处找到完成此验证的样式指南：http: [//google-styleguide.googlecode.com/svn/trunk/cppguide.xml](http://google-styleguide.googlecode.com/svn/trunk/cppguide.xml)（基本上是 Google 的 C++ 样式指南）。Cpplint 在我们的代码库中产生了大约 104K 的错误，其中大多数错误与空格（缺失或额外）、制表符、大括号位置等有关。一些可能值得修复的是：C 样式转换、缺少标题。

*   [Inspirel Vera++](http://www.inspirel.com/vera)：这是一个用于验证、分析和转换 C++ 源代码的可编程工具。这在功能上类似于 cpplint。可以在此处找到可用规则的​​列表：http: [//www.inspirel.com/vera/ce/doc/rules/index.html](http://www.inspirel.com/vera/ce/doc/rules/index.html)，可以在此处找到类似的可用转换列表：[http://www。启发.com/vera/ce/doc/transformations/index.html](http://www.inspirel.com/vera/ce/doc/transformations/index.html)。可以在此处找到有关如何添加自己的规则的详细信息：http: [//www.inspirel.com/vera/ce/doc/tclapi.html](http://www.inspirel.com/vera/ce/doc/tclapi.html)。对于我们的项目，Vera++ 发现了大约 90K 个问题（针对 20 条奇怪的规则）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-03T11:43:08.590

即将*到来*的状态：来自 Google 的 Manuel Klimek 正在 Clang 主线中集成 Google 开发的用于查询和转换 C++ 代码的工具。

*   工具基础设施已经布置好，它可能会填满，但它已经可以正常工作了。主要思想是它允许您定义操作并在所选文件上运行这些操作。

*   Google 创建了一组简单的 C++ 类和方法，以允许以友好的方式查询 AST：AST Matcher 框架，它正在开发中，最终将允许非常精确的匹配。

它目前需要创建一个可执行文件，但代码是作为库提供的，因此无需对其进行编辑，并且一次性转换工具可以在单个源文件中处理。

* * *

Matcher 的示例（[在此线程](http://clang-developers.42468.n3.nabble.com/Fwd-Patch-AST-Matcher-Framwork-and-an-example-tool-td3016371.html)`std::string`中找到）：目标是从（使用默认分配器）的结果中找到对 forms 的构造函数重载的调用`std::string::c_str()`，因为它可以用简单的副本代替。

```
ConstructorCall(
    HasDeclaration(Method(HasName(StringConstructor))),
    ArgumentCountIs(2),
    // The first argument must have the form x.c_str() or p->c_str()
    // where the method is string::c_str(). We can use the copy
    // constructor of string instead (or the compiler might share
    // the string object).
    HasArgument(
        0,
        Id("call", Call(
            Callee(Id("member", MemberExpression())),
            Callee(Method(HasName(StringCStrMethod))),
            On(Id("arg", Expression()))
        ))
    ),
    // The second argument is the alloc object which must not be
    // present explicitly.
    HasArgument(1, DefaultArgument())
) 
```

与 ad-hoc 工具相比，它非常有前途，因为它使用 Clang 编译器 AST 库，因此不仅可以保证无论使用的宏和模板内容多么复杂，只要您的代码编译它就可以分析；但这也意味着可以表达依赖于重载解析结果的复杂查询。

此代码从 Clang 库中返回实际的 AST 节点，因此程序员可以在源文件中精确定位位和尼特，并根据需要进行编辑以调整它。

已经讨论过使用文本匹配规范，但是认为从 C++ API 开始会更好，因为它会增加很多复杂性（和自行车脱落）。我希望 Python API 会出现。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-04T04:14:14.323

“风格检查器”的关键问题是风格就像艺术：每个人对什么是好的风格和什么不是好的风格都有不同的看法。这意味着风格检查器将始终需要根据当地的艺术品味进行定制。

要做到这一点，需要一个完整的 C++ 解析器，它可以访问符号定义、范围规则和理想的各种流分析。AFAIK，CppCheck 不提供准确的解析或符号表定义，因此它的错误检查不能既深入又正确。我认为 Coverity 和 Fortify 使用 EDG 前端提供了类似的东西。我不知道他们的工具是否提供对符号表或数据流分析的访问。铿锵而来。

您还需要一种编写样式检查的方法。我认为所有工具都提供对 AST 和符号表的访问，并且您可以自己编写检查代码，但要以熟悉 AST 为代价，这对于像 C++ 这样的大型语言来说很难。我认为 Coverity 和 Fortify 有一些类似 DSL 的方案来指定一些检查。

如果要*修复*样式不正确的代码，则需要可以修改代码表示的东西。Coverity 和 Fortify 不提供此 AFAIK。我相信 Clang 确实提供了修改 AST 和重新生成代码的能力。您仍然必须对 AST 结构有相当深入的了解才能编写树黑客逻辑并使其正确。

我们的[DMS 软件再造工具包](http://www.semanticdesigns.com/Products/DMS/DMSToolkit.html)及其[C++ 前端](http://www.semanticdesigns.com/Products/FrontEnds/CppFrontEnd.html)提供了这些功能中的大部分。使用其 C++ 前端，DMS 可以解析 ANSI C++11、GCC4（带有 C++11 扩展）和 MSVS 2010（带有 C++11 扩展）[2021 年 5 月更新：现在是完整的 C++17 和大部分C++20] 构建具有完整类型信息的 AST 和符号表。也可以询问任意表达式 AST 节点的类型。目前，DMS 计算 C++ 的控制流而不是数据流。

一个 AST API 允许您在程序上编写任意检查；或更改 AST 以解决问题，然后 DMS 的漂亮打印机可以重新生成完整的、可编译的源文本，其中包含注释和保留的文字格式信息（例如，数字的基数等）。你必须知道 AST 结构才能做到这一点，就像其他工具一样，但它更容易知道，因为它与 DMS C++ 语法规则同构。C++ 前端带有我们的 C++ 语法。[DMS 使用 GLR 解析器使这成为可能]。

此外，可以使用 DMS 的规则规范语言，使用 C++ 本身的表面语法来编写模式和转换。可以将 OP 的“不抛出非 STL 异常”编码为

```
 pattern nonSTLexception(i: IDENTIFIER):statement
   = " throw \i; " if ~derived_from_STD_exception(i); 
```

（元）引号内的内容是带有一些模式匹配转义的 C++ 源代码，例如，“\i”指的是占位符变量“i”，根据规则它必须是 C++ IDENTIFIER；整个“扔 \i;” 子句必须是 C++“语句”（C++ 语法中的非终结符）。规则本身主要表达要匹配的语法，但可以调用应用于匹配子树的语义检查（例如“~is_derived_from_STD_exception”）（在这种情况下，无论“\i”匹配什么）。

在编写这样的模式时，您不必知道 AST 的形状；模式知道它，它会自动匹配。如果您曾经编写过 AST walkers，您将体会到这是多么方便。

匹配知道 AST 节点，因此知道精确位置（文件/行/列），这使得生成具有精确位置信息的报告变得容易。

您需要向 DMS 添加一个自定义例程“inherits_from_STD_exception”，以验证传递给该例程的标识符树节点是（根据 OP 需要）从 std::exception 派生的类。这需要在符号表中找到“std::exception”，并验证标识符树节点的符号表条目是一个类声明，并从其他类声明传递继承（通过以下符号表链接），直到出现 std::exception找到符号表条目。

DMS 转换规则本质上是一对模式，“如果你看到*这个，就用**那个*替换它”。

我们已经为 COBOL 和 C++ 构建了几个带有 DMS 的自定义样式检查器。它仍然是相当多的工作，主要是因为 C++ 是一种非常复杂的语言，您必须仔细考虑检查的确切含义。

更棘手的检查和那些开始陷入深度静态分析的测试需要访问控制和数据流信息。DMS 现在为 C++ 计算控制流，我们正在研究数据流分析（我们已经为 Java、IBM Enterprise COBOL 和各种 C 方言完成了这项工作）。分析结果被绑定回 AST 节点，这样人们就可以使用模式来查找样式检查的元素，然后在需要时按照数据流将元素绑定在一起。

当使用 DMS （或者实际上使用任何其他以任何半准确方式处理 C++ 的工具）说完所有的事情时，编码额外或复杂的样式检查不太可能是“方便的”。您应该希望“可能具有良好的技术背景”。

# sql-server - 在 SQLCMD 中访问 SQL 语句的返回值

> ID：10429011
> 
> 赞同：18
> 
> 时间：2012-05-03T09:53:41.527
> 
> 标签：sql-server, batch-file, dos, sqlcmd

当我在 DOS 批处理文件中运行 SQL 语句时，我试图获取它的值...

```
sqlcmd -E -S DEVSERVER -Q "SELECT  COUNT(1) as [CaseCount] FROM Cases" 
```

我不是在这个[stackoverflow](https://stackoverflow.com/questions/5418690/return-value-of-sqlcmd)问题中的错误级别之后，而是在从数据库返回的实际计数之后，所以我可以做一些额外的逻辑。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-03T10:20:49.193

您可以使用`-o`sqlcmd 标志或使用标准`>`重定向器轻松地将执行结果保存到文本文件中。然后，您可以通过删除列标题 (flag `-h`) 并从 SQL Server ( `SET NOCOUNT ON`) 中删除行数来格式化此文件。

以下脚本将生成一个`result.txt`只有值`COUNT(1)`和换行符的文件：

```
SQLCMD -E -S devserver -Q "SET NOCOUNT ON; SELECT COUNT(1) FROM Cases" -h -1 
  > result.txt 
```

然后用 ... 读回该值

```
set /p value=< result.txt
echo %value% 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-05-03T10:30:52.740

`sqlcmd.exe`您可以通过使用`FOR`批处理命令调用来避免额外/临时文件：

```
for /F usebackq %%i in (`sqlcmd -E -S "devserver,4711" -h-1 -Q "SET NOCOUNT ON; SELECT COUNT(1) ..."`) do (
    set count=%%i
)

if not defined count (
    echo Failed to execute SQL statement 1>&2
) else (
    echo %count%
) 
```

一些注意事项：

*   如果从交互式`CMD.EXE`会话（即命令行）调用，请使用`%i`而不是`%%i`
*   该`-h-1`选项告诉`sqlcmd.exe`禁止列标题，因此输出实际上只有一行文本。
*   我在服务器上使用了一个虚构的端口 4711，以表明您需要将整个“服务器，端口”规范放在双引号中。否则，由于 CMD 的命令行解析规则，`sqlcmd`会将服务器和端口视为不同的参数并失败。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-11-11T16:21:40.910

@GerardoLima 的答案是 90%。您还需要评估输入值`set /a`以去除前导空格。

@Christian.K 的回答不需要这样做

```
SQLCMD -E -S devserver -Q "SET NOCOUNT ON; SELECT COUNT(1) FROM Cases" -h -1 > result.txt
set /p raw=< result.txt
echo '%raw%'
set /a value=%raw%
echo '%value%' 
```

我的输出是

```
'          0'
'0' 
```

# php - 如何从一个网站访问另一个网站的数据库

> ID：10429012
> 
> 赞同：2
> 
> 时间：2012-05-03T09:53:42.300
> 
> 标签：php, mysql, database

嗨，我在从我的一个站点到另一个站点访问数据库时遇到问题..

我有一个站点说 a.com，我想将数据库从这个站点复制到我的另一个站点，比如 b.com ...

我在两个站点中都使用 Cpanel。在站点 A.com 中，我创建了一个具有所需权限的用户，并在访问主机中添加了另一个网站 (b.com)。

现在要从 b.com 访问 a.com 数据库，我可以使用在 a.com 上创建的用户名和密码，但我不确定应该使用什么主机名。

网站 a.com 使用 localhost 作为主机名..我应该在 b.com 中使用什么..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:56:45.213

假设：

*   数据库被配置为在网络上公开（如果它被设计为只能在同一台机器上使用，那么它不应该是，首选 UNIX 套接字）
*   途中没有防火墙
*   数据库权限表将权限授予另一台服务器上的用户

…那么它将是运行数据库服务器的机器的 IP 地址。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T08:07:34.403

如果您无法连接到数据库，那么最好开发某种api。尝试 [在外部网站中使用此搜索 api，](https://stackoverflow.com/questions/10443398/search-api-to-use-in-external-websites)您可能会得到一些帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T09:56:27.630

您应该使用`a.com`, 或一个合适的 IP 地址/域名，它将正确地引导到数据库的连接。

但是，请注意您需要配置传入服务器以接受连接（即端口转发、防火墙等）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-17T10:51:09.363

我们可以使用以下`$.getJSON`函数从另一个站点获取数据`jQuery`

You can get detail information from [http://api.jquery.com/jQuery.getJSON](http://api.jquery.com/jQuery.getJSON/) sites....

# c# - 使用 C# 通过 URL 生成站点地图

> ID：10429013
> 
> 赞同：2
> 
> 时间：2012-05-03T09:53:45.257
> 
> 标签：c#, generator, sitemap

再会。我需要使用 C# 编写站点地图生成器。我已经为本地站点编写了生成器，您可以在其中输入项目（站点）的路径，我的程序将在此目录和子目录中找到所有网页，并将它们写入站点地图文件。

* * *

现在我需要做同样的事情，但对于 URL 路径。我输入的只是一个 URL 地址，我的程序必须找到该站点的所有网页并将它们写入站点地图。如何组织这样的页面搜索？或者可能有人做了类似的事情？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T10:09:32.550

您正在寻找的是网络爬虫或网站爬虫。本质上，他们所做的是获取您想要的任何网站的源代码，去除所有多余的 html 标签，但不去除超链接标签。这将留下一堆链接，程序将使用这些链接“爬行”到更多页面。这是它的工作原理的概述：（我不会给出任何代码，但我会深入介绍如何制作一个）

一个简单的网站：

```
<html>
<a href="www.somewebsite.com/link1.html">Link 1</a><br />
<a href="www.somewebsite.com/link2.html">Link 2</a><br />
<a href="www.somewebsite.com/link3.html">Link 3</a>
</html> 
```

我们的程序会得到源代码，但会删除所有无用的标签，留下：

```
<a href="www.somewebsite.com/link1.html">Link 1</a>
<a href="www.somewebsite.com/link2.html">Link 2</a>
<a href="www.somewebsite.com/link3.html">Link 3</a> 
```

然后它将只获取 href="" 属性，留下网站网址：

```
www.somewebsite.com/link1.html
www.somewebsite.com/link2.html
www.somewebsite.com/link3.html 
```

然后程序将获取每个网站的源代码，一遍又一遍地做同样的事情。您可以更进一步，删除所有使用 GET 请求的链接，即：

```
www.somewebsite.com/link1?id=1 
```

还有那些包含指向其他网站的链接。

一旦您访问了所有网站并获得了所有链接，您就可以将信息以树状格式（可能是 XML）存储。

希望这可以帮助！

# javascript - Spotify API 在播放器视图中抛出 TypeError

> ID：10429014
> 
> 赞同：0
> 
> 时间：2012-05-03T09:54:05.130
> 
> 标签：javascript, spotify

我正在尝试将播放器视图添加到我的应用程序中，因此我将获得封面和播放/暂停按钮。但是，当我尝试单击播放按钮时，API 会抛出 TypeError：

> 未捕获的类型错误：无法读取未定义的
> Album.get
> Object.defineProperties.playing.set
> Player.play.context的属性“长度”

错误代码似乎在 models.js 中，在线：641：

```
Album.prototype.get = function(index) {  
    if (index >= this.data.tracks.length) {  
        throw new RangeError("Index out of range");  
    }  
    return new Track(this.data.tracks[index]);  
}; 
```

我的代码如下所示：

```
var p = new views.Player(); 
p.context = track.album; 
document.getElementById('album-element').appendChild ( p.node ); 
```

这是 Spotify API 中的错误，还是一些未记录的事件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T01:08:16.060

track.album 中的 track 属性不会被填充。我不知道这是不是故意的。

一个解决方案是，如果您只想基于曲目创建播放器视图，获取该曲目对象中的专辑 uri，并基于它创建一个专辑对象，然后将其传递给视图的上下文。

```
models.Track.fromURI('spotify:track:5XZ72GmBONwRGYltKlg1jv', function(track) {
    models.Album.fromURI(track.album.uri, function(album) {
        var p = new views.Player(); 
        p.context = album; 
        document.getElementById('album-element').appendChild ( p.node );
    });
}); 
```

# java - 如何突出显示 GWT 文本框

> ID：10429019
> 
> 赞同：1
> 
> 时间：2012-05-03T09:54:20.187
> 
> 标签：java, gwt, highlight, gwt2, enter

`TextBox`当我按下“*输入*”键时，我需要突出显示。我有该事件的一段代码，`KeyPress`但我不知道如何突出显示文本框。

谁能帮我？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T10:03:03.677

在你的 CSS 中创建一个类，比如

```
.highlight input {
  background-color:#00FF00;
} 
```

然后在您的处理程序中动态添加类

```
someWidget.addStyleName("highlight"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T10:08:12.520

当您按下键时，文本框将突出显示，这是代码：

```
 @Override
    public void onKeyPress(KeyPressEvent event)
    {
       if (event.getNativeEvent().getKeyCode() == KeyCodes.KEY_ENTER) 
        {

         textBox.addStyleName("highlight");
        }
    } 
```

将此添加到您的 .css 文件中：

```
.highlight {
  border: 1px solid #FF0000;
  background-color:#FF0000;
} 
```

# ios - 是否允许在 iOS 上使用 RTSP，或者必须使用 Http Live Streaming 代替？

> ID：10429022
> 
> 赞同：0
> 
> 时间：2012-05-03T09:54:30.420
> 
> 标签：ios, rtsp, http-live-streaming

Apple Http Live Streaming Overview 文档明确指出，超过 10 分钟的流式视频不能逐步下载，必须使用 Http Live Streaming (HLS) 传输。它还指出 HLS 的延迟在 30 秒左右。

就我而言，我正在构建一个需要几乎实时接收直播视频的应用程序。因此，一方面我必须使用 HLS 进行实时流式传输，但速度不够快。另一方面，我不能使用其他任何东西，因为似乎不允许使用 HLS 以外的任何东西。我知道在 iOS 上可以使用 RTSP，但它会得到 App Store 的批准吗？

干杯，M。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:52:10.287

苹果不透明。知道应用程序是否会被拒绝或接受的唯一方法是提交它。

# grails - 当 hasMany 没有任何元素时，Grails 标准选择

> ID：10429023
> 
> 赞同：1
> 
> 时间：2012-05-03T09:54:38.600
> 
> 标签：grails, grails-orm, criteria

我有课程：

```
class Course{
   String name
   static hasMany = [
        studentGrades: StudentGrade
    ]
}

class StudentGrade{
    String name
    int grade
} 
```

如何在没有任何学生成绩的情况下制定获得课程的标准？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:01:01.493

您可以使用`isEmpty`标准方法：

```
def c = Course.createCriteria()
def results = c.list {
    isEmpty("studentGrades")
} 
```

有关更多信息，请参阅[文档](http://grails.org/doc/2.0.x/ref/Domain%20Classes/createCriteria.html)。

# git - 仅当文件夹不在其他文件夹中时才忽略文件夹

> ID：10429024
> 
> 赞同：1
> 
> 时间：2012-05-03T09:54:43.510
> 
> 标签：git

`bin`只有当它不是文件夹的一部分时，我才会忽略文件夹（在 .gitignore 中） `packages`。可能吗/？

**更新。**

我会排除以下情况：

```
packages/bin
packages/somefolder/bin
etc. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T09:57:56.663

您可以在您的`.gitignore`:

```
bin/
!packages/bin/
!packages/*/bin/
!packages/*/*/bin/ 
```

不幸的是 git 不支持`**`多个目录级别（或正则表达式匹配）的 glob，因此忽略`packages/whatever/bin`并且`packages/whatever/whatever/bin`您需要两个条目（等等以进行更深的嵌套）。

演示：

```
[adrian@hades:/tmp/gitignore:master]> git status
# On branch master
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#       foo/bar/bin/
#       foo/baz/bin/
#       packages/bin/
#       packages/xxx/bin/
#       packages/xxx/yyy/bin/
#       xxx/packages/bin/
nothing added to commit but untracked files present (use "git add" to track)

[adrian@hades:/tmp/gitignore:master]> cat > .gitignore
bin/
!packages/bin/
!packages/*/bin/
!packages/*/*/bin/

[adrian@hades:/tmp/gitignore:master]> git status
# On branch master
# Untracked files:
#   (use "git add <file>..." to include in what will be committed)
#
#       .gitignore
#       packages/bin/
#       packages/xxx/bin/
#       packages/xxx/yyy/bin/
nothing added to commit but untracked files present (use "git add" to track) 
```

# android - Android：如何在 CursorAdapter 的 newView() 方法中从 Cursor 中选择适当的元素

> ID：10429025
> 
> 赞同：0
> 
> 时间：2012-05-03T09:54:44.467
> 
> 标签：android

我想知道如何从光标中选择适当的元素，

**调用相应 CursorAdapter 对象的newView(Context context, Cursor cursor, ViewGroup parent)**方法，因为它没有参数指定位置，这与 ArrayAdapter 不同：

**getView(int position, View convertView, ViewGroup parent)** 方法：

从当前行中选取的数据是否由数据指针指向，或者换句话说，当调用 newView() 方法时，在 Cursor 中指向正确的行是 prommer 的责任吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:09:51.267

基于光标的适配器实现了该`getView`方法，该实现调用方法`newView()`并在将光标设置到正确位置**后**（使用getView 方法的参数）`bindView()`构建视图并设置数据。**`position`**

 **所以`Cursor`参数将指向方法中的正确行，`newView`因为`bindView`它已经被方法设置到那个位置`getView`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:57:38.187

根据您的要求形成您的光标。这意味着当您执行查询时，在其中添加一些条件，它将根据该条件返回游标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T09:59:19.143

您不需要光标适配器列表中视图的当前位置。导致 CursorAdapter 自动移动位置。但是，如果您仍然想获取行号，可以通过以下方法进行：

```
cursor.getPosition(); 
```**

# .net - Visual Studio 2010 在发布模式下构建 silverlight 应用程序时显示错误

> ID：10429028
> 
> 赞同：2
> 
> 时间：2012-05-03T09:55:00.153
> 
> 标签：.net, visual-studio-2010, silverlight

我有一个运行良好的 Silverlight 4 项目，但前提是我在 VS2010 的调试模式下构建/运行。如果我尝试在发布模式下构建，则会收到多个错误，例如 ..“找不到类型或命名空间名称 'Expander'”，我在这里遗漏了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T12:13:25.250

您使用的工具包都应该在发布项目时包含在内。

选择工具包，然后在“属性”选项卡中，有一个“复制到输出目录”选项，选择“始终复制”。

我希望能解决你的问题！

# c# - winrt中的azure acs身份验证

> ID：10429029
> 
> 赞同：1
> 
> 时间：2012-05-03T09:55:04.880
> 
> 标签：c#, azure, windows-8, windows-runtime, acs

我正在尝试使用 Azure ACS 在 winrt Metro 应用程序中对用户进行身份验证。我用一个简单的 webtoken 在 azure 中建立了一个依赖方。

在 Windows 8 上，我安装了 azure 工具包。当我从 winrt 云（通知 + acs）模板创建一个新项目并填写所有必要的参数时，我可以运行该应用程序，我得到实时 ID 登录屏幕，但是当我输入我的凭据时，我收到一条消息说“我们可以'不加载该页面”。

谁能帮我这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:54:52.063

使用“我填写所有必要的参数”，我假设您的意思是**Configuration.xml**文件包含您的 ACS 命名空间等的必要信息......

现在，填写此信息并配置 ACS 不足以使示例工作。如果您仔细查看**Configuration.xml**文件，您将看到以下元素：

```
<!--Relying party return Url. The bouncer service url that will parse the token from ACS.-->
<ReturnUrl>https://127.0.0.1/bouncer</ReturnUrl>

<!--Authentication End Url. The bouncer service url used to validate if the authentication process is done.-->
<EndUrl>https://127.0.0.1/bouncer/end</EndUrl> 
```

这些是来自 Azure 应用程序的 URL，您还需要运行这些 URL 才能使示例正常工作。在工具包中，您将找到以下目录：

**WATWindows.Setup.v1.2.4\Samples\Notifications.CSharp\Notifications.Backend**

为了能够运行示例应用程序，您需要首先启动这个后端应用程序。

您是否已经在**WATWindows.Setup.v1.2.4\Samples\Notifications.CSharp目录中运行了****SetupSample.cmd**脚本？

# css - 使用 css 嵌入字体

> ID：10429030
> 
> 赞同：0
> 
> 时间：2012-05-03T09:55:05.773
> 
> 标签：css, fonts

我正在尝试使用下面的 CSS 导入字体，它适用于 Firefox 和 IE，但不适用于 Chrome 不支持。你能帮我让它在 Chrome 中工作吗？

```
@font-face {
    font-family: "Fontin-Bold";
    src: url(fonts/Fontin-Bold.ttf);
    src: url(fonts/Fontin-Bold.eot);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:41:14.603

不同的浏览器有不同的需求，字体也不例外。这是一个完整的例子：

**CSS**

```
@font-face {
    font-family: 'UbuntuBold';
    src: url('ubuntu-bold-webfont.eot');
    src: url('ubuntu-bold-webfont.eot?#iefix') format('embedded-opentype'),
         url('ubuntu-bold-webfont.woff') format('woff'),
         url('ubuntu-bold-webfont.ttf') format('truetype'),
         url('ubuntu-bold-webfont.svg#UbuntuBold') format('svg');
    font-weight: normal;
    font-style: normal;

} 
```

您最好使用字体生成器，例如：[Font Squirrel](http://www.fontsquirrel.com/fontface/generator)

此外，您需要在字体文件夹上设置一个**.htaccess ，其类型如下：**

```
AddType application/vnd.ms-fontobject .eot
AddType font/ttf .ttf
AddType font/otf .otf 
```

* * *

**编辑：**

为了更好地解释**不同的字体格式** *VS* **不同的浏览器**：

*   Firefox 和 Safari 支持 TTF 或 OTF 格式；
*   Internet Explorer 支持 EOT 格式；
*   Firefox 3.6 支持新的 WOFF（网络字体文件的新格式建议）；
*   Google Chrome 和 iPhone 的 Safari 允许在 @font-face 中使用 SVG 文件；

# spring - Spring MVC 3：消费者是否应该消除请求映射的歧义？

> ID：10429031
> 
> 赞同：4
> 
> 时间：2012-05-03T09:55:11.517
> 
> 标签：spring, spring-mvc

我在 Spring MVC 3 应用程序中有两个请求映射，一个接受`json`and `xml`，另一个接受`application/x-www-form-urlencoded`数据。例子：

```
@RequestMapping(value={"/v1/foos"}, method = RequestMethod.POST, consumes={"application/json", "application/xml"})
public FooDTO createFoo(@RequestBody FooDTO requestDTO) throws Exception {
    ...
}

@RequestMapping(value={"/v1/foos"}, method = RequestMethod.POST, consumes="application/x-www-form-urlencoded")
public FooDTO createFooWithForm(@ModelAttribute FooDTO requestDTO) throws Exception {
    ...
} 
```

我希望不同的`consumes`参数使每个请求都是唯一的，尽管我得到了一个`java.lang.IllegalStateException: Ambiguous handler methods mapped...`.

应该`consumes`并使`produces`请求独一无二？有任何想法吗？

**编辑 1：**要为此添加权重，如果您`content-type`在标题中设置而不是使用`consumes`，这实际上可以工作并使它们独一无二：`headers="content-type=application/x-www-form-urlencoded`。也许有一个错误`consumes`？

**编辑 2：**我们使用的是 Spring 3.1.1.RELEASE。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-06T11:56:55.433

Marten Deinum 在 Spring 论坛（[这里](http://forum.springsource.org/showthread.php?127184-Is-consumes-supposed-to-disambiguate-request-mappings)）上解决了这个问题：

> 您应该同时更改 HandlerMapping 和 HandlerAdapter（使用 RequestMappingHandlerAdapter）。
> 
> 理论上，如果它不能随意注册问题，它应该可以工作。

这个问题的解决方案是在我的 servlet 配置中使用正确的 HandlerMapping 和 HandlerAdapter：

```
<bean class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping"/>
<bean class="org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter"/> 
```

谢谢马丁。

# css - 背景图像以及 CSS3 渐变

> ID：10429033
> 
> 赞同：0
> 
> 时间：2012-05-03T09:55:15.007
> 
> 标签：css, background-image

我的页面中有 a 的样式，`<div>`如下所示；

```
.maintab1{
background:rgb(0,65,135);
background:-moz-linear-gradient(-45deg,  rgba(0,65,135,1) 0%, rgba(30,127,201,1) 29%, rgba(53,154,255,1) 62%);
background:-webkit-gradient(linear, left top, right bottom, color-stop(0%,rgba(0,65,135,1)), color-stop(29%,rgba(30,127,201,1)), color-stop(62%,rgba(53,154,255,1)));
background:-webkit-linear-gradient(-45deg,  rgba(0,65,135,1) 0%,rgba(30,127,201,1) 29%,rgba(53,154,255,1) 62%);
background:-o-linear-gradient(-45deg,  rgba(0,65,135,1) 0%,rgba(30,127,201,1) 29%,rgba(53,154,255,1) 62%);
background:-ms-linear-gradient(-45deg,  rgba(0,65,135,1) 0%,rgba(30,127,201,1) 29%,rgba(53,154,255,1) 62%);
background:linear-gradient(-45deg,  rgba(0,65,135,1) 0%,rgba(30,127,201,1) 29%,rgba(53,154,255,1) 62%);
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#004187', endColorstr='#359aff',GradientType=1 );
} 
```

我想包含一个图像`image.png`作为背景图像以及 CSS3 渐变。

我检查了[这个stackoverflow问题](https://stackoverflow.com/questions/2504071/is-it-possible-to-combine-a-background-image-and-css3-gradients)和[这篇文章](http://www.heresonesolution.com/2010/09/using-a-css-gradient-and-a-background-image-on-the-same-element/)，最后得到了以下代码；

```
background-image:url(image.png), -moz-linear-gradient(-45deg,  rgba(0,65,135,1) 0%, rgba(30,127,201,1) 29%, rgba(53,154,255,1) 62%); 
```

并应用了所有其他属性并且工作正常。

但这在**IE8**中不起作用（仅在 IE8 和 FF3+ 中测试）并且相信不会在旧版本中起作用。渐变效果很好，但图像没有出现。

除了我已经提到的方式**之外**，有人可以告诉我显示背景图像和 CSS3 渐变的方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-01T11:39:47.640

您可以使用`background-image:`. 但这不适用于所有浏览器。更好的方法是将图像嵌套在一个`<div>`或一些选择器中，并为父选择器提供渐变样式。这真的有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:50:28.743

我做了一个快速的小提琴，只要我能在 IE7+ 中工作（我的 IE8 由于`filter`选项而显示正确的渐变。它回退到 IE7 中的图像。

[http://jsfiddle.net/MarkusK/HWLG9/](http://jsfiddle.net/MarkusK/HWLG9/)

我看不出您遇到的问题是什么，但这可能是由于开始：

```
background:rgb(0,65,135); 
```

但据我所知，它不应该使背景图像过亮，但您可能没有指向图像？

我试图从小提琴中删除过滤器，然后 IE8 显示图像就好了。

**编辑：**抱歉没有正确阅读您的问题。没有渐变会“填充”图像。您可以使用一些具有透明度的 rgba，但由于过滤器的工作原理，这在 IE8 中不起作用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-05-03T09:58:51.120

我总是向 中添加类，`html`以便您可以设置特定于浏览器的样式。

比你可以只定位`.ie8`或`.ie`使用渐变和img为IE制作一个额外的文件。

```
<!DOCTYPE html>
<!--[if lt IE 7 ]> <html lang="en" dir="ltr" class="ie6 ie"> <![endif]-->
<!--[if IE 7 ]> <html lang="en" dir="ltr" class="ie7 ie"> <![endif]-->
<!--[if IE 8 ]> <html lang="en" dir="ltr" class="ie8 ie"> <![endif]-->
<!--[if IE 9 ]> <html lang="en" dir="ltr" class="ie9"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!--> <html class="non-ie" lang="en" dir="ltr"> <!--<![endif]--> 
```

# google-visualization - 在谷歌图表中添加图标到标签

> ID：10429034
> 
> 赞同：3
> 
> 时间：2012-05-03T09:55:15.553
> 
> 标签：google-visualization

是否可以显示一个 png 图标，比如 16x16 像素，作为标签而不是标准文本？

我想制作一个条形图，在条形图的底部有一个象征标签的小图标。这是表的数据：

```
 var data = google.visualization.arrayToDataTable([
          ['Type', 'Amount'],
          ['ecological',  4],
          ['social',  3],
          ['natural',  660]
        ]); 
```

`type`我想用图标表示的-label。

如果条形图无法实现，那么饼图是否可以实现？

# java - Java OutOfMemoryException 无法创建新的本机线程

> ID：10429037
> 
> 赞同：0
> 
> 时间：2012-05-03T09:55:30.017
> 
> 标签：java, out-of-memory

我有一个用 jav 编写的服务器，在启动时运行在 100MB 的 RAM 左右（从查看进程资源管理器中获得的信息）。但是，当客户端连接到它以传输大文件时，RAM 使用量会上升到大约 160MB 左右，我收到以下错误。我尝试设置 -Xmx128m、-Xmx256m、-Xmx512m、-Xmx1024m 无济于事。我应该怎么做才能防止这种情况发生。这只发生在客户端尝试从服务器获取大文件时

```
java.lang.OutOfMemoryError: unable to create new native thread
java.lang.Thread.start0(Native Method)
java.lang.Thread.start(Unknown Source)
com.sun.jndi.ldap.Connection.<init>(Unknown Source)
com.sun.jndi.ldap.LdapClient.<init>(Unknown Source)
com.sun.jndi.ldap.LdapClient.getInstance(Unknown Source)
com.sun.jndi.ldap.LdapCtx.connect(Unknown Source)
com.sun.jndi.ldap.LdapCtx.<init>(Unknown Source)
com.sun.jndi.ldap.LdapCtxFactory.getUsingURL(Unknown Source)
com.sun.jndi.ldap.LdapCtxFactory.getUsingURLs(Unknown Source)
com.sun.jndi.ldap.LdapCtxFactory.getLdapCtxInstance(Unknown Source)
com.sun.jndi.ldap.LdapCtxFactory.getInitialContext(Unknown Source)
javax.naming.spi.NamingManager.getInitialContext(Unknown Source)
javax.naming.InitialContext.getDefaultInitCtx(Unknown Source)
javax.naming.InitialContext.init(Unknown Source)
javax.naming.ldap.InitialLdapContext.<init>(Unknown Source) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:37:47.840

问题是您无法创建另一个线程。这通常是因为您无法分配更多的堆栈空间，但在 32 位操作系统中通常存在操作系统限制，从而将此限制设置得更低。

当您收到此错误时，您有多少个线程？

你可以打印

```
System.out.println("thread.count=" + Thread.getAllStackTraces().size()); 
```

顺便说一句：增加堆大小可以*减少*为新线程创建堆栈空间的可用虚拟内存量。（这只是 32 位 JVM 上的问题）这似乎不是您的问题，但令人惊讶的是，在这种情况下，首先要尝试的是减少堆空间。

# c# - 如果模板中的最后一个字符是 $，则 NVelocity 合并失败

> ID：10429038
> 
> 赞同：2
> 
> 时间：2012-05-03T09:55:30.310
> 
> 标签：c#, nvelocity

我在使用 Castle NVelocity 时遇到了一个奇怪的问题......

如果模板字符串以 $ 字符结尾，则会引发以下异常：

> 词法错误：NVelocity.Runtime.Parser.TokenMgrError：第 1 行第 94 列的词法错误。遇到：之后：“”

如果我在字符串的末尾添加一个空格或任何其他字符，它会按预期工作。

有人有解决方法吗？

这是一些重现该问题的示例代码：

```
class Program
{
    static void Main(string[] args)
    {
        var result = Merge("The quick brown ${Animal} jumps over the lazy dog$", new List<KeyValuePair<string, string>>() { new KeyValuePair<string, string>("Animal", "fox") });

        Console.WriteLine("Success: {0}", result.Key);
        Console.WriteLine("Message: {0}", result.Value);
        Console.Read();
    }

    public static KeyValuePair<bool, string> Merge(string template, IList<KeyValuePair<string, string>> data)
    {
        var ret = new KeyValuePair<bool, string>(false, null);
        try
        {
            if (data != null)
            {
                var engine = new VelocityEngine();
                engine.Init();

                var context = new VelocityContext();
                foreach (var tokenData in data)
                {
                    context.Put(tokenData.Key, tokenData.Value);
                }

                var templateContent = template;

                var sb = new StringBuilder();
                var textWriter = new StringWriter(sb);

                engine.Evaluate(context, textWriter, String.Empty, templateContent);

                ret = new KeyValuePair<bool, string>(true, sb.ToString());
            }
        }
        catch (Exception ex)
        {
            ret = new KeyValuePair<bool, string>(false, ex.Message);
        }
        return ret;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:14:46.323

你有几个选择：

如果您对要合并的输入字符串没有影响，请确保它们没有尾随美元字符，至少在合并过程中没有：

例子：

```
bool dollarAtEnd = false;

if (input.EndsWith('$'))
{
   input += " "; 
   dollarAtEnd = true;
}

var result = Merge(input, ...);

if (dollarAtEnd)
{
   result = result.Substring(1, result.Length - 1);
} 
```

如果您可以控制输入字符串，但只要求其中一些以美元字符结尾，您可以执行以下操作：

例子：

```
"#set($dollar='$')The quick brown ${Animal} jumps over the lazy dog$dollar" 
```

或者将“美元”作为变量传递给 VelocityContext，而不是内联指定它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:14:39.757

`$`表示变量名的开头，如果要使用 $ 文字，则需要将其转义为`\$`.

[http://velocity.apache.org/engine/devel/user-guide.html#Getting_literal](http://velocity.apache.org/engine/devel/user-guide.html#Getting_literal)

# asp.net - 删除 URL 文件扩展名

> ID：10429039
> 
> 赞同：2
> 
> 时间：2012-05-03T09:55:30.530
> 
> 标签：asp.net, url, url-rewriting

我一直在探索“更漂亮”的 URL，我做的第一件事就是删除扩展名（例如 .aspx）。为此，我使用了 IIS 中的 URL 重写模块。

如果我访问，现在可以使用

```
http://www.mysite.com/folder/filename 
```

或者

```
http://www.mysite.com/folder/filename.aspx 
```

后者被重定向到第一个并加载页面。然后我尝试了以下方法：

```
http://www.mysite.com/folder/filename/ 
```

这打破了（正如我所料），但这似乎是糟糕的用户体验。也许作为一个经常上网的用户，我觉得没有斜线或斜线应该可以。我知道在最后有一个斜线的唯一方法是创建一个文件夹并使用默认`default.aspx`页面，如果可以的话，我想避免。

继续，我尝试添加一个与文件同名的目录，因此在上面的示例中，我创建了一个名为`filename`. 在这个目录中，我创建了一个默认的`default.aspx`. 现在，如果我尝试访问相同的 url `http://www.mysite.com/folder/filename`，我将被发送到该新文件夹的 default.aspx 页面，并在 URL 后附加一个斜杠`http://www.mysite.com/folder/filename/`。

这表明默认情况下，不带扩展名的 URL 会尝试访问目录，并且只有在未找到时 IIS 才会覆盖提供文件，因此从某种意义上说，尝试使用无扩展名的文件名来欺骗它似乎是一种黑客行为。

幸运的是，我可以完全控制文件和文件夹名称，所以我希望可以防止那里发生任何事故（尽管我必须小心）。所以我的问题是：有没有一种方法可以删除文件扩展名但仍然允许附加斜杠并仍然找到文件。如果可以的话，我不想在里面创建大量带有 default.aspx 的目录。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:30:42.933

我不完全确定 IIS 如何处理 mod_rewrite，但希望我在 linux 环境中应用的逻辑将帮助您解决问题。

在我的 .htaccess 文件中，我首先编写了两个适用于以下规则的条件；它表示如果以下 url 不是文件且不是目录，则将用户重定向到下一页。

但是，如果目录或文件存在，则始终优先。

`RewriteCond %{REQUEST_FILENAME} !-f`
`RewriteCond %{REQUEST_FILENAME} !-d`

`RewriteRule ^news/([^/]*)$ news.php?article_slug=$1 [L,QSA]`

该规则允许您需要的结构（文件夹/文件）或至少将其模拟为 url。

所以上面的例子会直接

[http://www.mysite.com/news/article-name](http://www.mysite.com/news/article-name) & [http://www.mysite.com/news/article-name/](http://www.mysite.com/news/article-name/)

使用 GET 变量 article_slug 到 news.php

让我知道这是否有任何帮助，或者我是否可以提供进一步的帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T08:33:11.377

最简单的方法是使用 ASP.NET 路由，我假设您正在谈论 Web 表单，对于您的示例来说这很简单：

1.  将 System.Web.Routing 引用添加到项目中
2.  在 Global.asax.cs 中使用路由（使用 System.Web.Routing;）
3.  在应用程序开始添加路由：

> ```
> protected void Application_Start(object sender, EventArgs e)
> {
>   RouteTable.Routes.MapPageRoute("", "Filename", "~/Filename.aspx");
> } 
> ```

就是这样。

以下是有关获胜表格路由的更多信息：

[http://msdn.microsoft.com/en-us/library/cc668201.aspx#adding_routes_to_a_web_forms_application](http://msdn.microsoft.com/en-us/library/cc668201.aspx#adding_routes_to_a_web_forms_application)

[http://msdn.microsoft.com/en-us/library/dd329551.aspx](http://msdn.microsoft.com/en-us/library/dd329551.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T08:54:49.263

IIS 重写（正确）将带有尾部斜杠的 URL 匹配为不同的 URL，而没有尾部斜杠。根据规则的实施方式，您可能需要

*   实施 2 条规则，一条用于处理从所有或特定 URLS 中添加（或删除）尾部斜杠，另一条用于处理将 URL 重写为 .aspx 页面。
*   您可能需要为带有和不带有斜杠的 URL 添加单独的映射

解决方案实际上取决于您匹配的位置和方式。

# json - corona lua中的json错误

> ID：10429040
> 
> 赞同：0
> 
> 时间：2012-05-03T09:55:33.293
> 
> 标签：json, lua, coronasdk

嗨，我找到了一个关于如何在 lua 中使用 post json 的教程。

这是代码：

```
http = require("socket.http")
crypto = require("crypto")
ltn12 = require("ltn12")
url = require("socket.url")
local json = require("json")

local commands_json = 
{

                ["message"] = "Hello",

}
print (commands_json)
local json = {}
json.api_key = "6_192116334"
json.ver = 1
json.commands_json = json.encode(commands_json)
json.commands_hash = crypto.digest(crypto.md5, json.commands_json .. 'hkjhkjhkjh')

local post = "api=" .. url.escape(Json.Encode(json))
local response = {}

local r, c, h = http.request {
    url = "http://127.0.0.1/?page=api",
    method = "POST",
    headers = {
        ["content-length"] = #post,
        ["Content-Type"] =  "application/x-www-form-urlencoded"
    },
    source = ltn12.source.string(post),
    sink = ltn12.sink.table(response)
}

local path = system.pathForFile("r.txt", system.DocumentsDirectory)
local file = io.open (path, "w")
file:write (Json.Encode(json) .. "\n")
file:write (post .. "\n")
file:write (response[1] .. "\n")
io.close (file)

json = Json.Decode(table.concat(response,''))
native.showAlert("hey", json.commands[1].tot_nbr_rows) 
```

现在我得到了这些错误：

```
Windows simulator build date: Dec  9 2011 @ 14:01:29

Copyright (C) 2009-2011  A n s c a ,  I n c .
        Version: 2.0.0
        Build: 2011.704
table: 0346D6D0
Runtime error
        ...nistrator\my documents\corona projects\json\main.lua:17: attempt to c
all field 'encode' (a nil value)
stack traceback:
        [C]: in function 'encode'
        ...nistrator\my documents\corona projects\json\main.lua:17: in main chun
k
Runtime error: ...nistrator\my documents\corona projects\json\main.lua:17: attem
pt to call field 'encode' (a nil value)
stack traceback:
        [C]: in function 'encode'
        ...nistrator\my documents\corona projects\json\main.lua:17: in main chun
k 
```

我不知道为什么我从`encode`.

任何人都可以帮助我处理我的情况吗？

提前致谢 ...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T12:30:21.907

这包括外部提供的 Json 代码，可能带有编码功能：

```
local json = require("json") 
```

这会丢弃旧`json`变量并将其替换为空表：

```
local json = {} 
```

这会尝试调用`json.encode`which 现在未定义，因为您`json`在上面重新定义为空表：

```
json.commands_json = json.encode(commands_json) 
```

解决方案是选择不同的变量名。

# ios - UIWebView：502 错误网关响应

> ID：10429041
> 
> 赞同：0
> 
> 时间：2012-05-03T09:55:35.357
> 
> 标签：ios, cocoa-touch, uiwebview

在测试我的应用程序时，我一直在加载带有一组 URL 的 UIWebViews 没有问题。现在我`502 Bad Gateway`在加载 UIWebView 时收到错误消息。

我使用的 URL 都来自同一个来源，并且都以：

`http://www.gijon.es/eventos/show/`

一些 URL 例如：

`http://www.gijon.es/eventos/show/21514-ciclo-ciencia-x-cine` `http://www.gijon.es/eventos/show/20611-mercado-ecologico-y-artesano`

*   我已经从我的浏览器测试了这些 URL，它们工作正常。
*   我已经测试过做一个日志，这实际上是创建请求之前的 URL。
*   我制作了一个 testApplication，只有一个 UIWebView 加载了这个 URL，但它以我的应用程序的方式失败了。
*   任何其他 URL 都可以`http://google.com`很好地加载。

我该如何调试这个问题？应该是远程服务器的问题吗？我的配置有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:12:48.680

该网站被配置为根据浏览器用户代理以不同方式处理请求。

因此，当您使用 UIWebView 访问它时，您将作为用户代理 iPhone 发送，这会将您带到站点上的不同页面。由于他们的网络服务器配置错误，您会看到 502 Bad Gateway 错误（可能他们正在运行 NginX）。

要验证这一点，请打开 Firefox，下载 User Agent Switcher 插件，选择 iPhone 3.0 作为用户代理，然后打开[http://www.gijon.es/eventos/show/21514-ciclo-ciencia-x-cine](http://www.gijon.es/eventos/show/21514-ciclo-ciencia-x-cine)

您将看到 502 bad gateway 错误

如果你想解决这个问题，你可以修改默认的 UIWebView 用户代理（将其设置为 safari 的东西）。[做到这一点的方法是here](https://stackoverflow.com/a/8666438/312312)

# c# - 使控件在启动时不可见（无值）/ DataTemplate 内的访问控制

> ID：10429047
> 
> 赞同：1
> 
> 时间：2012-05-03T09:55:59.360
> 
> 标签：c#, .net, wpf, xaml, binding

目前我有一个`LinearGradientBrush`显示为条形图。问题是在我的程序启动时（还没有来自数据绑定的值）我的屏幕上到处都是白条，因为`GradientBrush`它还没有值并将其显示为默认值。

在实际获得其数据绑定值之前，我究竟如何确保没有任何显示。

如何使它**不可见**，直到它获得价值？

代码`DataTemplate`及其`itemsControl`使用位置：

```
 <ItemsControl x:Name="icGrafiek"  
                Margin="0,0,0,0" 
                ItemsSource="{Binding Source={StaticResource Grafiek}}"
                ItemTemplate="{DynamicResource GrafiekItemTemplate}" 
                RenderTransformOrigin="1,0.5" Grid.RowSpan="6" Grid.Column="1"

<DataTemplate x:Key="GrafiekItemTemplate">
            <Grid>
                <Border Height="30" Margin="15" Grid.RowSpan="6">
                    <Border.Background>
                        <LinearGradientBrush StartPoint="0.0,0" EndPoint="1.0,0">
                            <GradientStopCollection>                               
                                <GradientStop Offset="0.0" Color="{Binding FillBar, UpdateSourceTrigger=PropertyChanged}" />
                                <GradientStop Offset="{Binding Value, UpdateSourceTrigger=PropertyChanged}"
                                              Color="{Binding FillBar, UpdateSourceTrigger=PropertyChanged}"/>

                                <GradientStop Offset="{Binding Value, UpdateSourceTrigger=PropertyChanged}"
                                              Color="Transparent"/>
                                <GradientStop Offset="1" Color="Transparent" />
                            </GradientStopCollection>
                        </LinearGradientBrush>
                    </Border.Background>
                </Border>
            </Grid>
        </DataTemplate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:11:50.750

在数据绑定之前隐藏条的一种方法是使用触发器根据某个值设置可见性。

在您的数据模板中：

```
<DataTemplate x:Key="GrafiekItemTemplate">
    <Grid x:Name="grid">
    ...
    </Grid>
    <DataTemplate.Triggers>
        <DataTrigger Binding="{Binding Path=Value}" Value="{x:Null}">
            <Setter TargetName="grid" Property="Visibility" Value="Collapsed" />
        </DataTrigger>
    </DataTemplate.Triggers> 
```

您可能必须为 DataTrigger 中的绑定路径使用与“Value”不同的值，但这应该可以帮助您入门。

# ruby-on-rails - AWS S3 Ruby url_for 响应标头（自定义文件名和文件类型）

> ID：10429050
> 
> 赞同：1
> 
> 时间：2012-05-03T09:56:17.893
> 
> 标签：ruby-on-rails, ruby, amazon-s3

我只是想知道这是一个错误，我的错误还是有人设法让它工作

```
>irb
>require 'aws/s3'
>AWS::S3::Base.establish_connection!( 
    :access_key_id    => key,
    :secret_access_key => secret)

>AWS::S3::S3Object.url_for(
   filename, 
   bucket, 
   :use_ssl => true,
   :response_content_type=>'text/plain',
   :response-content-disposition=>'attachment; filename=text.txt'
) 
```

这将吐出一个签名的网址

我可以从中获得一个 URL，但`:response_content_type`&`:response-content-disposition`选项似乎根本没有做任何事情。

这些记录在 [http://docs.amazonwebservices.com/AWSRubySDK/latest/AWS/S3/S3Object.html#url_for-instance_method](http://docs.amazonwebservices.com/AWSRubySDK/latest/AWS/S3/S3Object.html#url_for-instance_method)

有没有人幸运地为每个请求标头添加这些？还是我做错了？

**编辑**我想通了：如果有人遇到同样的问题 - 需要正确的 gem 而不是 'aws/s3' 它的 'aws-sdk' （有两个浮动的几乎相同的代码 - 我认为后者是旧版）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T10:49:47.420

`aws-s3`是旧版本的`aws-sdk`. 即使您交换`require`标头，它们之间的许多代码也可以正常工作。用于`aws-sdk`解决此问题。

# html - 使用 CSS3 的列之间的奇怪间隙

> ID：10429052
> 
> 赞同：0
> 
> 时间：2012-05-03T09:56:29.783
> 
> 标签：html, css

我的列之间有一个奇怪的间隙，应该删除。但是当我将 column-gap 设置为 0px 时，仍然存在 1px 的间隙。

在这里你可以看到它：

[http://onezeromany.com/results.html](http://onezeromany.com/results.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:05:01.693

删除宽度并且不设置不重复，我删除了宽度并禁用了背景重复。在我这样做之后，边界就消失了。

这门课看起来不像这样

```
.tile {
height: 310px;
background-position: center top;
} 
```

希望这就是它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T09:59:59.623

看起来 .tile 上的宽度与它有关

# magento - Magento - 如何将添加到购物车表单交换为我自己的表单

> ID：10429056
> 
> 赞同：0
> 
> 时间：2012-05-03T09:56:47.143
> 
> 标签：magento

我正在编写一个隐藏添加到购物车按钮和价格（产品视图）的模块，并在其位置（基于产品属性）显示一个简短的表单（联系我们之类的东西）。

因为有一个表格包含了产品视图页面上的大部分重要信息，所以我不能简单地用自己的表格注入我自己的 phtml 文件，因为那样会留下嵌套的表格。所以现在看起来我必须用我自己的覆盖整个目录/产品/view.phtml 文件才能更改表单操作。像这样：

```
<catalog_product_view>
    <reference name="product.info">
        <action method="setTemplate">
            <template>mycompany/mymodule/catalog/product/view.phtml</template>
        </action>
    </reference>    
</catalog_product_view> 
```

然后在我的视图文件中，我相应地更改表单操作。

```
$formAction = $this->getSubmitUrl($_product);
if($_product->getData("myattribute")){
    $formAction = $this->getBaseUrl().'mycontroller/';
}

<form action="<?php echo $formAction ?>" ...[snip] 
```

这似乎只是为了改变表单动作而过度杀伤力。

我看到它的方式有两个选择：

1) 将一些 javascript 添加到我的提交按钮 onclick 事件中，该事件将默认表单操作更改为转到我的控制器。这种方式劫持添加到购物车表单。（但如果禁用 javascript，这将有问题）

2）有一个观察者检查每个添加到购物车事件，看看它是否需要添加到购物车或应该处理我的表单。（如果需要，表格将显示在产品页面上）

（目前我没有考虑与自定义主题等集成......我只想一次解决一件事！-好吧，也许一只眼睛关注自定义主题......）

谁能提出更好或更有效的方法来实现这一目标？或者如果不是，您会推荐哪个选项，1 还是 2？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:21:49.753

在我看来，大规模的过度杀伤方法听起来是最好的方法。你得到了你想要的表单动作变化，它看起来对 Magento 友好。

如果您真的不想这样做，那么我建议您使用选项二。当他们访问您的网站时，您不想依赖启用 Javascript 的整个互联网（禁用此功能的人的总体百分比将非常小，但他们可能是您身边的一个巨大的刺）。

# sql - 通过一对已知值计算不同的行

> ID：10429057
> 
> 赞同：1
> 
> 时间：2012-05-03T09:56:52.697
> 
> 标签：sql, join, distinct

我什至不知道如何表达这个问题。我将给出示例内容和想要的输出，我正在寻找一个查询来做到这一点。

假设我有一个名为“标记”的表格，其中包含以下内容：

```
content_id | user_id
1          | 1
1          | 2
1          | 3
2          | 1
2          | 3
2          | 4
3          | 2
3          | 3
4          | 1
4          | 2
5          | 1
6          | 1
6          | 4 
```

我在 content_ids 之间有一个不对称的关系：

```
master_content_id | slave_content_id
1                 | 2
3                 | 4
5                 | 6 
```

对于每个“主”content_id（1、3 和 5），我想计算有多少不同的用户标记了主内容或从内容，但计算将两者标记为单个标记的人 - 这意味着在上面的示例中, content_id=1 由 user_id=1（作为 content_id=1 和 content_id=2）、按 user_id=2（作为 content_id=1）、按 user_id=3（作为 content_id=1 和 content_id=2）和按 user_id 计算=4（因为 content_id=2！）

我要进行的查询输出的一个示例是：

```
content_id | user_count
1          | 4          # users 1, 2, 3, 4
3          | 3          # users 1, 2, 3
5          | 2          # users 1, 4 
```

我不能假设相关的 content_ids 总是连续的奇数/偶数（即 66 可以是从机 58 的主机）

我正在使用 MySQL，不介意使用它对 SQL 的扩展（而是查询是 ANSI，或者至少可移植到大多数数据库）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T10:18:51.503

下面的查询对我有用。

我正在使用带有 a 的子查询`UNION ALL`来处理您的映射内容等于直接内容。

```
SELECT master_content_id AS content_id,
       COUNT(DISTINCT user_id) AS user_count
FROM (
  SELECT master_content_id, slave_content_id
    FROM relationship
  UNION ALL
  SELECT master_content_id, master_content_id
    FROM relationship
) r
JOIN flagged f ON ( f.content_id = r.slave_content_id )
GROUP BY master_content_id 
```

**结果：**

```
content_id  user_count
         1           4
         3           3
         5           2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T10:25:22.230

我认为这样的事情对你有用（虽然`GROUP_CONCAT`是 MySQL 特定的，但可以在其他 RDBMS 中实现类似的连接）

```
SELECT  COALESCE(Master_Content_ID, Content_ID) AS Content_ID,
        COUNT(DISTINCT User_ID) AS Users,
        CONCAT('#Users ', GROUP_CONCAT(DISTINCT User_ID ORDER BY User_ID)) AS UserList
FROM    Flagged
        LEFT JOIN MasterContent
            ON Content_ID = Slave_Content_ID
GROUP BY COALESCE(Master_Content_ID, Content_ID) 
```

此处的 SQL Fiddle 示例：[http ://www.sqlfiddle.com/#!2/d09be/2](http://www.sqlfiddle.com/#!2/d09be/2)

输出：

```
CONTENT_ID  USERS   USERLIST
1           4       #Users 1,2,3,4
3           3       #Users 1,2,3
5           2       #Users 1,4 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T10:24:59.410

从给出的示例中，这是否可以完成工作（我没有可用于测试的 MySQL）？

```
SELECT 
    ms.master_content_id,
    (SELECT COUNT(DISTINCT f.user_id) FROM flagged f WHERE
                      f.content_id = ms.slave_content_id OR
                      f.content_id = ms.master_content_id)
FROM
    master_slave ms 
```

最好*不要*有 DISTINCT，但我看不到绕过它的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T10:34:28.640

```
SELECT master_content_id      AS content_id
     , COUNT(*)               AS user_count
     , GROUP_CONCAT(user_id)  AS flagging_users
FROM 
  ( SELECT r.master_content_id 
         , f.user_id
    FROM relationship AS r
      JOIN flagged AS f
        ON f.content_id = r.master_content_id
  UNION 
    SELECT r.master_content_id
         , f.user_id
    FROM relationship AS r
      JOIN flagged AS f
        ON f.content_id = r.slave_content_id
  ) AS un
GROUP BY master_content_id 
```

# windows - 在未安装驱动程序的情况下查找显卡设备 ID

> ID：10429058
> 
> 赞同：1
> 
> 时间：2012-05-03T09:56:54.120
> 
> 标签：windows, hardware

我需要创建一个自动化过程，其中脚本在首次启动时检测显卡类型，然后安装适当的驱动程序，这些驱动程序将包含在映像中，然后再执行后续步骤。目标平台是 Win XP Pro。

我遇到了一些可以获取硬件信息的[WMI](http://social.msdn.microsoft.com/Forums/eu/csharplanguage/thread/d00cd10a-7638-4063-8781-1bca5051d1c2)代码，但由于它使用 PNPSignedDriver 类，我认为它需要安装驱动程序才能检测到设备。

我不能使用 devcon，因为它不可再分发。我是否正确地假设 WMI 在这里无法帮助我，如果是这样，我的其他选择是什么？

谢谢，

账单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:25:08.903

WMI 似乎确实是执行此操作的方法，如此[处](http://social.msdn.microsoft.com/forums/en-US/vcgeneral/thread/d6420012-e432-4964-8506-6f6b65e5a451)所示。我会在测试后确认。

编辑 - 不确定这是否可能，WMI 只能获取显示适配器的名称而不是卡的设备 ID，并且在安装驱动程序之前，这是通用的，如“视频控制器 (VGA)”。如果我找到办法，我会更新这个页面。

# wordpress - HTACCESS 从 URL 重定向，包括？到静态页面

> ID：10429059
> 
> 赞同：0
> 
> 时间：2012-05-03T09:56:59.297
> 
> 标签：wordpress, .htaccess, redirect

从我写的一个现已失效的教程中，我每天都会有几首热门歌曲。我没有让他们坐在 404 上，而是创建了一个页面，其中包含指向更多最新页面的链接，希望其他人可以提供帮助。

我正在尝试编辑我的 htaccess 以重新定向

我的网站是 WP 供电的，传入链接是

```
/tutorials/?p=3 
```

我希望它去：

```
/wiki/sorry-this-tutorial-no-longer-exists 
```

我努力了：

```
Redirect /tutorials/?p=3 http://domain.com/wiki/sorry-this-tutorial-no-longer-exists 
```

我得到的最接近的是

```
RedirectMatch 301 ^/tutorials/?(.*)  http://domain.com/wiki/sorry-this-tutorial-no-longer-exists 
```

但这当然会把 ...exists/?p=3 放在最后，这是行不通的

对血腥问号有帮助吗？（我尝试[用问号重写 htaccess url，](https://stackoverflow.com/questions/9254742/htaccess-url-rewrite-with-question-mark)但它不起作用？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:30:55.877

我相信这应该做你正在寻找的

```
RewriteEngine on
RewriteCond %{REQUEST_URI}  ^/tutorials/$
RewriteCond %{QUERY_STRING} ^p=3
RewriteRule ^(.*)$ http://domain.com/wiki/sorry-this-tutorial-no-longer-exists? [R=302,L] 
```

# php - 为什么 Paypal 交易详情数组返回为空？

> ID：10429061
> 
> 赞同：0
> 
> 时间：2012-05-03T09:57:12.777
> 
> 标签：php, paypal-ipn, paypal-sandbox

我在 Paypal 沙盒上创建了买家和卖家测试帐户。我还创建了一个 Paypal 按钮。

支付宝按钮：

```
<form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">
  <input type="hidden" name="cmd" value="_s-xclick">
  <input type="hidden" name="hosted_button_id" value="6M75NVDV8ZHR8">
  <input type="image" src="https://www.sandbox.paypal.com/en_US/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!">
  <img alt="" border="0" src="https://www.sandbox.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1">
</form> 
```

我已经启用了 IPN 并在那里设置了通知 URL。
在创建 Paypal 按钮时，我插入我的站点 URL 以实现成功交易。
*成功的交易和 IPN 通知共享同一个 URL。*

这是引用 URL 的 PHP 脚本：

```
<?php  
  // read the post from PayPal system and add 'cmd'  
  $req = 'cmd=_notify-validate';  
  print_r($_POST);

  foreach ($_POST as $key => $value) {  
    echo "loop";
    echo $value = urlencode(stripslashes($value));  
    echo $req .= "&$key=$value";  
  }

  // post back to PayPal system to validate  
  $header = "POST /cgi-bin/webscr HTTP/1.0\r\n";  
  $header.= "Content-Type: application/x-www-form-urlencoded\r\n";  
  $header.= "Content-Length: " . strlen($req) . "\r\n\r\n";  

  $fp = fsockopen('ssl://www.sandbox.paypal.com', 443, $errno, $errstr, 30); 

  if (!$fp) {  
    // HTTP ERROR  
  } else {  
    fputs ($fp, $header . $req);  

    while (!feof($fp)) {  
      $res = fgets ($fp, 1024);  
      if (strcmp ($res, "VERIFIED") == 0) {  
        echo " PAYMENT VALIDATED & VERIFIED! "; 
      }
      else if (strcmp ($res, "INVALID") == 0) {
        echo " PAYMENT INVALID & INVESTIGATE MANUALY!  ";
      }  
    }  
    fclose ($fp);  
  }
?> 
```

该`print_r`函数仅打印`Array()`，在 foreach 循环中不显示任何内容。

只有在`PAYMENT INVALID & INVESTIGATE MANUALLY!`页面上显示。

这里有什么问题？
因为我想在成功的交易中插入一些数据。

* * *

## 更新

这是我的帖子数组：

```
Array
(
)
DoDirectPayment failed: Array
(
    [TIMESTAMP] => 2012%2d05%2d03T12%3a54%3a08Z
    [CORRELATIONID] => 51176eef6a5
    [ACK] => Failure
    [VERSION] => 51%2e0
    [BUILD] => 2860716
    [L_ERRORCODE0] => 10527
    [L_ERRORCODE1] => 10563
    [L_ERRORCODE2] => 10562
    [L_ERRORCODE3] => 81234
    [L_SHORTMESSAGE0] => Invalid%20Data
    [L_SHORTMESSAGE1] => Invalid%20Data
    [L_SHORTMESSAGE2] => Invalid%20Data
    [L_SHORTMESSAGE3] => Invalid%20Parameter
    [L_LONGMESSAGE0] => This%20transaction%20cannot%20be%20processed%2e%20Please%20enter%20a%20valid%20credit%20card%20number%20and%20type%2e
    [L_LONGMESSAGE1] => This%20transaction%20cannot%20be%20processed%2e%20Please%20enter%20a%20valid%20credit%20card%20expiration%20month%2e
    [L_LONGMESSAGE2] => This%20transaction%20cannot%20be%20processed%2e%20Please%20enter%20a%20valid%20credit%20card%20expiration%20year%2e
    [L_LONGMESSAGE3] => ExpDate%20%3a%20Invalid%20Parameter
    [L_SEVERITYCODE0] => Error
    [L_SEVERITYCODE1] => Error
    [L_SEVERITYCODE2] => Error
    [L_SEVERITYCODE3] => Error
) 
```

我更改了 ipn.php 代码，现在我收到此错误：“无效的信用卡号”。

我已经使用预配置创建了买家帐户，它会随机生成信用卡号。

现在当我去添加/编辑信用卡时，我不能只编辑卡号地址和到期日。

并且也无法添加新信用卡，而是将此信用卡的错误分配给另一个 Paypal 帐户消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:04:52.973

print_r 将其输出回显到贝宝的脚本。您可能希望将其记录到文件中，以便稍后查看

# xml - XSD 对比

> ID：10429062
> 
> 赞同：0
> 
> 时间：2012-05-03T09:57:19.660
> 
> 标签：xml, xsd

我想要类似的东西：

```
<element>
  <complexType>
    <sequence>
      ...
    </sequence>
  </complexType>
</element> 
```

我真的需要 complexType 级别吗？或者有足够的：

```
<element>
  <sequence>
    ...
  </sequence>
</element> 
```

?

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:00:08.140

如果要重复使用 complexType，例如：

```
<element> 
  <complexType> 
    <sequence> 
      ... 
    </sequence> 
  </complexType> 
  <complexType> 
    <sequence> 
      ... 
    </sequence> 
  </complexType> 
</element> 
```

那么是的，你需要复杂类型

# web-services - 使用coldfusion网络服务

> ID：10429063
> 
> 赞同：0
> 
> 时间：2012-05-03T09:57:25.010
> 
> 标签：web-services, coldfusion

我正在尝试构建 Web 服务。这是我返回字符串的简单 Web 服务的代码。一开始我插入了一些来自[ben nadel](http://www.bennadel.com/blog/430-My-First-ColdFusion-Web-Service.htm.) 的代码，它会自动刷新存根文件，否则在传递参数时会出错。

```
<cfcomponent 
    displayname="BaseWebService"
    output = "false"
    hint="This handles core web service features">

    <cffunction
        name="Init"
        access="public"
        returntype="any"
        output="false"
        hint="Returns an initialized web service instance.">

        <cfreturn THIS />
    </cffunction>

    <cffunction
        name="RebuildStubFile"
        access="remote"
        returntype="void"
        output="false"
        hint="Rebuilds the WSDL file at the given url.">

        <cfargument name="Password" type="string" required="true" default="" />

        <cfif NOT Compare(ARGUMENTS.Password, "sweetlegs!")>
            <cfset CreateObject("java", "coldfusion.server.ServiceFactory"
                    ).XmlRpcService.RefreshWebService(
                        GetPageContext().GetRequest().GetRequestUrl().Append("?wsdl").ToString()) />
        </cfif>

        <cfreturn />
    </cffunction>

    <cffunction 
        name="easyService"
        access="remote"
        returntype="any"
        output="false">

        <cfargument name="anyOutput" type="string" default="this and that" />
        <cfargument name="xtype" type="string" required="yes" default="1" />        

            <cfif Compare(xtype, "1") EQ 0>
                <cfset anyVar = "one" />
            <cfelse>
                <cfset anyVar = "two" />

            </cfif>
        <cfreturn anyVar>       
    </cffunction>
</cfcomponent> 
```

在这里，我试图调用 web 服务。

```
<cfinvoke
    webservice="https://[...]/Components/Webservice.cfc?wsdl"
    method="RebuildStubFile">

    <cfinvokeargument 
        name="Password" 
        value="sweetlegs!" />
</cfinvoke>
<cfinvoke
    webservice="[...]/Components/Webservice.cfc?wsdl"
    method="easyService"
    returnVariable="anyVar" >

    <cfinvokeargument
        name="xtype"
        value="2" 
        omit="true">
</cfinvoke>

<cfdump var="#anyVar#"> 
```

可以调用我的 Web 服务组件的第一个方法，但第二个总是返回此错误消息：

```
coldfusion.xml.rpc.ServiceProxy$ServiceMethodNotFoundException: Web service operation     easyService with parameters {xtype={2}} cannot be found.
    at coldfusion.xml.rpc.ServiceProxy.invoke(ServiceProxy.java:149)
    at coldfusion.runtime.CfJspPage._invoke(CfJspPage.java:2301)
    at coldfusion.tagext.lang.InvokeTag.doEndTag(InvokeTag.java:454) 
```

如果我输入 web 服务的 url，通过添加

> ?method=easyService&xtype=2

它返回正确的值。但这就像使用 GET 方法传递值一样。

我一直在寻找几个小时，不知道问题出在哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T11:17:41.613

我认为在使用 WebService 调用时，您需要指定所有参数并在正确的参数上使用 omit="true" （而不是在 xtype 上）。

```
<cfinvoke
    webservice="[...]/Components/Webservice.cfc?wsdl"
    method="easyService"
    returnVariable="anyVar" >

    <cfinvokeargument
        name="anyOutput"
        value=""
        omit="true">

    <cfinvokeargument
        name="xtype"
        value="2">
</cfinvoke> 
```

# ruby-on-rails - Rails - 在控制器中组合语句的语法

> ID：10429070
> 
> 赞同：0
> 
> 时间：2012-05-03T09:57:47.023
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在努力将以下控制器动作写成一行。我很难弄清楚如何研究答案甚至是正确的术语，因为我是 Rails 和 Ruby 的新手。如何将以下内容写成一行？

```
Response.create(params[:response].values)
Response.create(:responseset_id => @responseset.id) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T09:59:25.930

`Response.create(params[:response].merge({:responseset_id => @responseset.id})`

回答以下反馈：

```
params[:response].each do |k,v|
  Response.create({:question_id => k, :response_set_id => @responseset.id}.merge(v))
end 
```

# java - URI 方案不是“文件”。无法从类路径读取文件

> ID：10429073
> 
> 赞同：2
> 
> 时间：2012-05-03T09:57:53.120
> 
> 标签：java, java-io, file-handling, vfs

我有 Java webapp，我正在尝试从 classpth 读取文件。

```
 if (fileName == null){
        fileName = Thread.currentThread().getContextClassLoader().getResource("config.properties");
    }
objFile = new File(fileName.toURI()); 
```

我的类路径中有 config.properties。WEB-INF/类。当我在本地检查时，它会给出：`fileName.toURI()`，它给我`file:/D:/dev/Tomcat_6_0/webapps/testApp/WEB-INF/classes/config.properties`。并且工作正常。

问题出在生产 linux 服务器上，我在那里得到了这条路径`vfsfile:/export/home/u/bin/jboss-5.1.0.BE/server/default/deploy/testApp.war/WEB-INF/classes/config.properties`。

我得到以下异常。

```
Caused by: java.lang.IllegalArgumentException: URI scheme is not "file"
    at java.io.File.<init>(File.java:366)
    at com.utils.ConfigLoader.loadConfigFilePath(ConfigLoader.java:87) 
```

处理 vfs 的解决方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T10:03:59.357

您不得尝试将资源从类路径转换为文件。如果它在 WAR/JAR 中，它甚至可能不是文件。File 类仅代表文件系统对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T10:13:25.933

由于您正在加载资源（它们可能是文件，也可能不是文件，想象一下这个属性文件打包到 jar/war 中），为什么不在`openStream()`URL 对象上使用呢？然后只需从返回的 BufferedStream 中读取内容即可！

# linked-list - OpenCL 中的链表

> ID：10429074
> 
> 赞同：0
> 
> 时间：2012-05-03T09:57:53.617
> 
> 标签：linked-list, opencl

我在一个数组中有 1000 个浮点数据。我想分成不同的班级，比如说4个班级。它们的大小是不可预测的。我可以轻松地将它们保存在 CPU 实现中的链表中，但在 OpenCL 内核中，有这样的机会吗？在我看来，这个问题有 3 个解决方案。首先，在类数中构造长度为 1000 的数组，这很耗费内存。其次，我分配了一个长度为 1000 的数组并将它们分成几部分。但是，我可能会将值从不同的索引传输并索引到不同的索引中，因为我不知道每个类的大小，它们可能超过我为每个类提供的大小。

第三，在我看来更好的是，我得到了两个长度相同的不同数组。其中一个存储数据，另一个存储指针。例如，在数据数组的第 i 个索引中，存储属于第 2 类的值。此外，在指向属于第二类的下一个数据的指针的第 i 个索引中。但这仅适用于原子类型（如 int、float、char 等）链表。

我是 OpenCL 的新手。我还不知道它的很多功能。如果有更好的方法，请不要与我和其他人分享。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T17:28:56.590

在 GPU 上使用指针通常是*非常*糟糕的主意。大部分数据驻留在全局内存中，为了快速获取它，应该合并访问。使用指针完全破坏了访问模式，使其本质上是随机的。它在 CPU 上也不是很好，因为它会导致很多缓存未命中，但是 CPU 具有更大的缓存和“更智能”的内部逻辑，因此它*通常*不是那么重要，但有时缓存感知内存访问模式可以将 CPU 应用程序的速度提高近数量级。在 GPU 上，合并全局内存访问是最重要的优化之一，而指针无法提供它。

如果您的内存不是非常短，我建议使用第一种方法并预分配足够大的数组以容纳所有数据。如果您真的内存不足，您可以使用纹理来存储您的数据和指针数组，但这取决于算法是否会提供任何好处。

# jquery - 在 iPad 上使用 JQuery-click()

> ID：10429076
> 
> 赞同：0
> 
> 时间：2012-05-03T09:57:59.487
> 
> 标签：jquery, ipad, jsf, freeze

这似乎很棘手。我的 iPad 死机了，这行代码似乎对此负责：

```
jQuery('#form_showAllUserHints').click(); 
```

与该事件相关的 HTML 在这里：

```
<input id="form_showAllUserHints" class="hidden" type="button" value="showUserHints" onclick="A4J.AJAX.Submit('form',event,{'oncomplete':function(request,event,data){prepareHintMessages();},'similarityGroupingId':'form_showAllUserHints','parameters':{'userPrefActionParamShow':'NEW_PATIENT_HINT','form_showAllUserHints':'form_showAllUserHints'} } );return false;" name="form_showAllUserHints"> 
```

如您所见，JavaServerFaces 生成的 Ajax-JavaScript-Code 应该从 JQuery-click()-Action 触发。如何在 iPad 上处理这个问题，我读到 iPad 不喜欢 click()-JQuery-Action？

有一些类似的情况，我尝试像这样只使用 iPad 的方式（我想没有 jQuery-touchstart()-function，我只是想展示我解决这个问题的计划）：

```
function clickShowAllUserHintsButton(){
var isiPad = navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPod/i) || navigator.userAgent.match(/iPad/i);
if (isiPad) {
    jQuery('#form_showAllUserHints').touchstart();// IPad-Bug: jQuery()-click geht nicht: http://www.mitch-solutions.com/blog/17-ipad-jquery-live-click-events-not-working
} else {
    jQuery('#form_showAllUserHints').click();// IPad-Bug: jQuery()-click geht nicht: http://www.mitch-solutions.com/blog/17-ipad-jquery-live-click-events-not-working
}
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:23:36.710

调用按钮的函数可能有特殊的原因`click()`，但不能直接调用绑定到按钮点击事件的函数吗？

所以而不是打电话

```
jQuery('#form_showAllUserHints').click(); 
```

你就不能打电话吗

```
A4J.AJAX.Submit('form',event,{'oncomplete':function(request,event,data){prepareHintMessages();},'similarityGroupingId':'form_showAllUserHints','parameters':{'userPrefActionParamShow':'NEW_PATIENT_HINT','form_showAllUserHints':'form_showAllUserHints'} } );return false; 
```

如果您需要单击按钮将按钮的值添加到表单请求中，您可以在调用该函数之前以编程方式将参数添加到表单的操作 URL。

# objective-c - 在textview中单击输入时如何关闭键盘

> ID：10429077
> 
> 赞同：-1
> 
> 时间：2012-05-03T09:57:59.577
> 
> 标签：objective-c

我是 iPhone 的初学者，我在 textview 上工作，当时单击键盘上的单击返回按钮的输入键时键盘不会关闭，但输入键出现在下一行。但是当我写一些东西并输入键并且该键盘直接关闭时，我有要求，所以请提供任何建议和源代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:00:30.173

在 TextView Delegate 中使用它-

```
 - (BOOL)textView:(UITextView *)textView shouldChangeTextInRange:(NSRange)range replacementText:(NSString *)text
 {

    if([text isEqualToString:@"\n"])
    {
       [textView resignFirstResponder];
       return NO;
    }

return YES;
} 
```

# python - 用 reduce() 理解复杂代码，Python

> ID：10429079
> 
> 赞同：0
> 
> 时间：2012-05-03T09:58:10.277
> 
> 标签：python, reduce

有人可以在以下示例中解释 reduce() 的结构：

```
def f2(list):
        return reduce(lambda string, item: string + chr(item), list, "") 
```

我知道 f2 将 int 列表转换为字符串，但我的问题是在这种情况下理解 reduce。我知道 reduce 的基本结构是**reduce(function, sequence[, initial])**但这让我有些困惑。有人可以解释**reduce(lambda string, item: string + chr(item), list, "")**并给我一些类似的例子吗？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T10:10:44.560

```
return reduce(lambda string, item: string + chr(item), list, "") 
```

大致翻译为

```
string = ""
for item in list:
    string = string + chr(item)
return string 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T10:21:50.640

Reduce 做了一些通常称为[fold](http://en.wikipedia.org/wiki/Fold_%28higher-order_function%29)的事情。例如，如果你有一个列表`ls = [a,b,c,d]`和一个二元运算`def plus(x,y): x + y`，那么`reduce(plus, ls)`被*折叠*到

```
plus(plus(plus(a, b), c), d) 
```

这等于

```
(((a+b)+c)+d) 
```

你`f2`正在做类似的事情，即附加字符串（在将它们从整数转换之后）：（我真的希望那些括号匹配......）

```
(((("" + chr(a)) + chr(b)) + chr(c)) + chr(d)) 
```

具有提供的初始值`""`（当折叠操作有两种不同的输入类型时需要）

@python专家：我不确定`reduce`是不是左折，对我来说似乎更自然。如果我错了，请告诉我。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T10:00:25.863

该代码适用`chr()`于列表的每个元素，并将结果连接成一个字符串。

该`reduce()`调用等效于以下内容：

```
return "" + chr(list[0]) + chr(list[1]) + ... + chr(list[list.length - 1]) 
```

是的`""`第三个参数`reduce()`。中的 lambda 函数

```
return reduce(lambda string, item: string + chr(item), list, "") 
```

为列表中的每个项目调用。它只是附加`chr(item)`到上一次迭代的结果。

有关 using 的更多示例`reduce()`，请参阅[在 python 中使用 reduce() 的有用代码](https://stackoverflow.com/questions/15995/useful-code-which-uses-reduce-in-python)

# javascript - 在 $.get 和 $.post 处理程序中全局捕获 javascript 错误

> ID：10429086
> 
> 赞同：2
> 
> 时间：2012-05-03T09:59:04.490
> 
> 标签：javascript, ajax, jquery

我`$(document).ajaxError()`用来捕获 ajax 调用中的服务器端和通信错误。

什么是在 ajax javascript 处理程序中全局捕获客户端错误（用于记录目的）的好方法？压倒一切`$.ajax()`？

例如

```
$.get("http://foo.com/", function(){
  alert(undefined.something); // I want this exception to be logged
}); 
```

我想避免为我所有的 ajax 处理程序编写单独的 try...catch...log。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:14:05.277

我唯一想到的就是绑定这样的`error`事件：

```
​$(window).error(function(e){
    if ($.active > 0) {
        // your error handling
    }
}); 
```

`$.active`显示活动 Ajax 请求的数量，因此即使请求返回成功但`undefined.something`成功处理程序中有问题也会触发错误。

**演示：http:** [//jsfiddle.net/KWX4k/](http://jsfiddle.net/KWX4k/)

**更新：**我的 DEMO 测试用例

I. 成功处理程序中存在问题的有效 Ajax 请求：

```
$.get("/", function() {
    undefined.something
}); 
```

​结果 *：*着火了！

二、在成功处理程序中没有问题的无效 Ajax 请求：

```
$.get("http://www.google.com/", function() {
    // undefined.something
}); 
```

*结果：*不开火。

三、代码中的简单未定义错误：

```
undefined.something 
```

*结果：*不开火。

所以，它似乎正在工作:)

但是，在这种方法中，我看到了一个小缺点。由于 Ajax 通常以异步方式使用，如果您有两个错误，事件将触发两次 - 在 Ajax 处理程序和调用此 Ajax 请求的方法中（即在调用 Ajax 之后立即放置）。但是，这种情况并不重要，因为 Ajax 请求之后的所有操作通常都转移到 Ajax 成功处理程序。

# php - 如何自动化数据收集而不是冻结在 10%

> ID：10429089
> 
> 赞同：0
> 
> 时间：2012-05-03T09:59:08.140
> 
> 标签：php, javascript, mysql, loops, for-loop

**是）我有的：**

*（如果需要，请查看或在 localhost 上触发：http: [//pastebin.com/virLR7dF](http://pastebin.com/virLR7dF)）*

*（看一下展示我的案例的图片：http: [//iv.pl/images/47143498348127804676.png](http://iv.pl/images/47143498348127804676.png)）*

我有一个 PHP 脚本可以抓取给定的网站，并将数据提取为变量：

```
$ID = "data"; //this is just an example
$name = "data";
$price = "data";
$image = "data"; 
```

脚本会将这些数据放入 MySQL 数据库中。

**怎么了？**

我可以使用 for 循环将其自动化，这样我就可以一次获得更多数据。但是，如果我循环它 1,000,000 次，我的脚本将在某个时候冻结，并且重新开始*（找到它中断的位置并从该点开始）*是有问题的。

**如何使用 PHP/JS 实现：**

**1.**收集 10 部分数据

**2.**停止并显示有关收集数据的信息

**3.**收集接下来的 10 部分数据

**4.**停止并在之前显示的信息中添加新信息

*****有一个 PAUSE 功能在下一部分收集后停止

*****在最后一部分收集后有一个恢复功能开始

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T08:01:04.460

输出缓冲可能会在 PHP 中帮助您

试试[ob_start](http://php.net/manual/en/function.ob-start.php) & [ob_flush](http://php.net/manual/en/function.ob-flush.php)

> **ob_start**此函数将打开输出缓冲。当输出缓冲处于活动状态时，不会从脚本发送输出（除了标题），而是将输出存储在内部缓冲区中。
> 
> **ob_flush**这个函数将发送输出缓冲区的内容（如果有的话）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T08:16:51.900

执行此操作时，有些事情可能会导致问题。

1) 循环内触发错误，脚本停止执行。

解决方案：将错误转化为可捕获的异常

2）你超过了时间限制。

解决方案：将时间限制设置为零

例子：

```
set_error_handler(function($errno, $errstr, $errfile, $errline) {
    if($errno != E_STRICT && $errno != E_DEPRECATED && $errno != E_NOTICE) {
      throw new Exception($errstr.' in '.$errfile.' on line '.$errline);
    }
    return false;
});

set_time_limit(0);

function my_loop_func() {
 // do what ever...
}

while(true) {
  try {
     my_loop_func();
  }
  catch(Exception $e) {
    // write some log message here might be good
  }
  sleep(10);
} 
```

# google-bigquery - 在大查询中插入引号

> ID：10429090
> 
> 赞同：1
> 
> 时间：2012-05-03T09:59:10.860
> 
> 标签：google-bigquery

我可以轻松上传由 ^ 分隔的文件 它看起来像......

CN^others^2012-05-03 00:02:25^^^^^Mozilla/5.0^通用网络浏览器^^^^^^^^

CN^others^2012-05-03 00:02:26^^^^^Mozilla/5.0^通用网络浏览器^^^^^^^^

但是如果我在某处有双引号，它会失败并显示错误消息......

行：1 / 字段：，右双引号 (") 和字段分隔符之间的数据：字段开头：遇到太多错误。限制为：0。

CN^others^2012-05-03 00:02:25^^^^^"Mozilla/5.0^通用网络浏览器^^^^^^^^

我经常获取带有“Mozilla 作为浏览器名称的文件，如何插入带有双引号的数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T17:58:24.693

引号可以用另一个引号转义。例如，字段：`This field has "internal quotes".`将变为`This field has ""internal quotes"".`

`sed 's/\"/\"\"/g'`应该做的伎俩。

请注意，为了导入包含带引号的换行符的数据，您需要在导入配置中将 allow_quoted_newlines 标志设置为 true。这意味着导入不能并行处理，因此可能比没有设置该标志的导入数据慢。

# jquery - 动态 jQuery 标识符在 IE8 中给出“对象不支持此属性或方法”，使用 jquery 1.7.2

> ID：10429097
> 
> 赞同：0
> 
> 时间：2012-05-03T09:59:39.797
> 
> 标签：jquery, internet-explorer, dynamic

有人知道，为什么这会在 IE8 中引发错误？

```
$(function(){
    function activateTab(name){
       identifier = '#' + name;
       container = $(identifier);
    }
}); 
```

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:07:44.657

应该可以正常工作，将您的代码包装在**$(document).ready**函数中，例如

```
$(document).ready(function() {  
  alert(activateTab("test"));
});
function activateTab(name){
   identifier = '#' + name;
   container = $(identifier);
   return container;
}
<div id="test">Tested</div> 
```

尝试：

```
$(function(){
    function activateTab(name){
       identifier = '#' + name;
       container = $(identifier);
        return container;
    }
    alert(activateTab("test"));
}); 
```

这对我来说也很好用

# ios - 尽管使用了（非原子，保留），为什么我必须保留属性？

> ID：10429099
> 
> 赞同：1
> 
> 时间：2012-05-03T09:59:41.903
> 
> 标签：ios, memory-management, xcode4.2

## 简洁版本：

我定义了一个属性，`(nonatomic, retain)`并假设该属性将被保留。但除非我`retain`在为属性分配字典时调用，否则应用程序会因`EXEC BAD ACCESS`错误而崩溃。

## 长版：

我有一个有字典的单身人士。标头是这样定义的

```
@interface BRManager : NSObject {
}

@property (nonatomic, retain) NSMutableDictionary *gameState;

+ (id)sharedManager;
- (void) saveGameState;

@end 
```

在实现文件中，我有一个在 init 中调用的方法。此方法从捆绑包中加载 plist，并在设备上的用户文档文件夹中制作一份副本。

```
- (void) loadGameState
{

    NSFileManager *fileManger=[NSFileManager defaultManager];
    NSError *error;
    NSArray *pathsArray = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES);
    NSString *doumentDirectoryPath=[pathsArray objectAtIndex:0];
    NSString *destinationPath= [doumentDirectoryPath stringByAppendingPathComponent:@"gameState.plist"];
    NSLog(@"plist path %@",destinationPath);    

    if (![fileManger fileExistsAtPath:destinationPath]){

        NSString *sourcePath=[[[NSBundle mainBundle] resourcePath]stringByAppendingPathComponent:@"gameStateTemplate.plist"];
        [fileManger copyItemAtPath:sourcePath toPath:destinationPath error:&error];

        gameState = [NSMutableDictionary dictionaryWithContentsOfFile:sourcePath];

    }else{
        gameState = [NSMutableDictionary dictionaryWithContentsOfFile:destinationPath];
    }

} 
```

现在这就是我认为这应该如何工作。在标题中，我使用（非原子，保留）定义了 gameState 属性。我假设（可能是错误的）“保留”意味着将保留 gameState 字典。但是，我的单例（saveGameState）中有另一种方法，当 AppDelegate -> ' `applicationWillResignActive`' 时调用它。

```
- (void) saveGameState
{
    NSArray *pathsArray = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES);
    NSString *doumentDirectoryPath=[pathsArray objectAtIndex:0];
    NSString *plistPath = [doumentDirectoryPath stringByAppendingPathComponent:@"gameState.plist"];
    [gameState writeToFile:plistPath atomically:YES];
} 
```

这会`EXEC BAD ACCESS`在`gameState`. 如果我修改 loadGameState 以保留 gameState 字典，则一切正常。例如：

```
gameState = [[NSMutableDictionary dictionaryWithContentsOfFile:sourcePath] retain]; 
```

我猜这是正确的行为，但为什么呢？`(nonatomic, retain)`并不意味着我认为的意思，或者这里有其他东西在起作用？

我还没有真正了解内存管理，所以我一直偶然发现这些东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T10:31:55.817

您必须使用访问器：

```
self.gameState = [NSMutableDictionary dictionaryWithContentsOfFile:sourcePath]; 
```

或（相当于）：

```
[self setGameState:[NSMutableDictionary dictionaryWithContentsOfFile:sourcePath]]; 
```

代替

```
gameState = [NSMutableDictionary dictionaryWithContentsOfFile:sourcePath]; 
```

它只设置 ivar 而没有任何属性概念。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:37:02.387

您在哪里将 gameState 声明为 ivar？我假设您在实施中这样做。

真正的问题是，在您的实现中，您直接访问 gameState 而实际上并没有调用您声明的属性。为此，您必须向自己发送适当的消息：

```
[self gameState]; // invokes the synthesized getter
[self setGameState:[NSMutableDictionary dictionaryWithContentsOfFile:sourcePath]]; // invokes the synthesized setter -- solves your problem 
```

或者

```
whatever = self.gameState; // invokes the getter
self.gameState = [NSMutableDictionary dictionaryWithContentsOfFile:sourcePath]; // invokes the synthesized setter -- solves your problem 
```

确保你有时间去探索[内存管理文献](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/ObjectiveC/Introduction/introObjectiveC.html)......这是一个非常基本的问题，根据 StackOverflow 的严格规则，我不应该回答。祝你好运！

# django - 获取多个分页器

> ID：10429112
> 
> 赞同：0
> 
> 时间：2012-05-03T10:00:39.110
> 
> 标签：django, django-templates, django-pagination

如果我包括，那么它在同一页上`paginator`打印多个。`paginator`因为我包括在`forloop`. 我该如何解决这个问题？请帮忙

```
----------------------
{% autopaginate recipes %}
{% for recipe in recipes %}
  {{ forloop.counter }}
{% endfor %}
----------- 
```

这是我的完整代码。

```
{% with followers=current_user.get_profile.get_following.all %}
    {% for follower in followers %}
        {% with recipes=follower.recipe_set.all %}
            {% for recipe in recipes %}
                {{ forloop.counter }}
            {% endfor %}
        {% endwith %}
    {% endfor %}
{% endwith %} 
```

结果-> `1 2 3 1 2 3 ...... 50`。应该是`53`。所以我可以轻松使用`paginator`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:30:06.080

[django-pagination](http://code.google.com/p/django-pagination/source/browse/trunk/setup.py)的 setup.py 文件中的文档字符串提到了以下内容，

> 1.  确定要分页的变量，并在迭代之前在该变量上使用 autopaginate 标记。这可以采用以下两种形式之一（使用规范`object_list` 作为示例变量）：
>     
>     
>     
>     `{% autopaginate object_list %}`
>     
>     
> 
> 这假设您希望每页有 20 个默认结果。如果您想指定自己的每页结果数量，可以这样指定：
> 
> ```
>  `{% autopaginate object_list 10 %}` 
> ```
> 
> 请注意，这将替换为当前页面的列表，因此您可以像往常一样`object_list`迭代。`object_list`
> 
> 1.  现在你想显示当前页面和可用页面，所以在使用自动分页后的某个地方，使用分页包含标签：
>     
>     
>     
>     `{% paginate %}`
>     
>     
> 
> 这不接受任何参数，但假设您已经调用了 autopaginate，因此请确保首先这样做。
> 
> 而已！您现在已经分页`object_list`并为站点的用户提供了一种在不同页面之间导航的方式——所有这些都无需触及您的视图。

那么，您在自动分页之后在哪里使用分页标签？您实际上不需要遍历食谱，无论您调用 paginate，autopaginate 都应该为您执行此操作。

# android - Android：如何更改代码中的布局

> ID：10429113
> 
> 赞同：0
> 
> 时间：2012-05-03T10:00:39.873
> 
> 标签：android, android-layout, view

我有布局的基本知识，到目前为止，在我的应用程序中，我总是为每个 Activity 设置一个静态布局。现在我试图创建一个带有基本框架（标题，一些按钮）和一个布局的单个活动，我需要在单击指定按钮后更改。

例子：

我有一个标题栏，它下面有一个线性布局，下面有 3 个按钮。单击 3 个按钮之一后，我更改了标题文本和按钮外观。但我还需要更改标题栏和按钮之间的线性布局。我不知道该怎么做，所以我在我的 main.xml 中做了线性布局，但是点击一个按钮后，我实际上需要它是一个表格布局（或列表视图），点击另一个按钮后我需要它成为相对布局。我希望你能得到这张照片。在所有情况下，我都需要在其中添加一些元素（表格行、一些视图等）

我的问题是，实现这一目标的最佳方法是什么？谢谢！

# windows-phone-7 - 什么 ID 从 Windows Phone 7 发送到 Exchange ActiveSync

> ID：10429114
> 
> 赞同：2
> 
> 时间：2012-05-03T10:00:51.260
> 
> 标签：windows-phone-7, activesync

当我的 WP7 手机连接到我的 EAS 服务器时，我可以看到它的设备 ID (B5B0EA77FE982C6EB38584985E98F221)。此 ID 与我可以通过 API 从设备获取的任何内容都不匹配。使用 DeviceExtendedProperties.TryGetValue("DeviceUniqueId", out uniqueId) 给了我完全不同的东西。有谁知道是否有可能从某些 API 调用中获得相同的 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T14:42:45.490

您是否考虑过检查它是否可能是您在 Exchange 服务器上的 UUID？

# python - Eclipse 的 PyDev 插件

> ID：10429119
> 
> 赞同：2
> 
> 时间：2012-05-02T23:34:30.087
> 
> 标签：python, ide

我刚刚为 Eclipse 安装了 PyDev 插件。一切似乎都配置正确，但我没有看到语法突出显示。D 你知道可能是什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T10:55:14.867

您可能没有使用 PyDev 编辑器打开文件。

确保窗口 > 首选项 > 常规 > 编辑器 > .py 文件的文件关联中的文件关联正确（应将其标记为由 Python 编辑器打开为默认选项）。

如果它仍然没有打开，您可以尝试右键单击该文件并选择“打开方式 > Python 编辑器”

另外，我建议您遵循[PyDev 入门指南](http://pydev.org/manual_101_root.html)

# javascript - 向元素添加事件

> ID：10429121
> 
> 赞同：1
> 
> 时间：2012-05-03T10:01:21.093
> 
> 标签：javascript

我是 javascript 的新手，以下代码来自 javascript 权威指南。

```
function addEvent(elem, evtType, func)
{
   if (elem && typeof(elem) == "object")
   {

      if (elem.addEventListener)
      {
         elem.addEventListener(evtType, func, false);
      }

      else
      {
         elem["on" + evtType] = func;
      }
   }
} 
```

为什么要添加

```
 if (elem.addEventListener)
  {
     elem.addEventListener(evtType, func, false);
  } 
```

但`window.onload`在每个浏览器下都可以正常工作。以下是我的测试示例。

```
<script type="text/javascript">
         window.onload=myFuntion();
        function myFuntion(){
            alert("test");
        }
    </script>
</head>

<body>

    <h1> testtste </h1>
</body> 
```

它在 IE ff 下工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:03:09.140

直接分配不可靠。

...而且您的代码无论如何都没有在加载时运行该功能。它立即运行它并将返回值 ( `undefined`)分配给`onload`对象。

如果我们解决这个问题，那么一个演示：

```
 <script type="text/javascript">
      window.onload=myFuntion;

      function myFuntion(){
            alert("test");
       }
  </script>
  <script type="text/javascript">
      window.onload=myOtherFunction;

      function myOtherFunction(){
            alert("test2");
       }
  </script> 
```

事件被覆盖。只有一个函数会触发。

…虽然权威指南中的例子不是很好。它退回到直接分配（这使得它变得毫无意义），而不是尝试允许多个事件绑定的旧专有 API（例如，用于 IE 8 及更低版本的[attachEvent ）。](http://msdn.microsoft.com/en-us/library/ie/ms536343%28v=vs.85%29.aspx)

# c# - 媒体库图片

> ID：10429123
> 
> 赞同：0
> 
> 时间：2012-05-03T10:01:29.870
> 
> 标签：c#, visual-studio-2010, windows-phone-7

我正在为 Windows Phone 使用 Visual Studio。我们可以在 windows phone 7 模拟器中看到存储在媒体库中的图像吗？这些文件是否有任何特定的文件位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:28:44.767

[如何：使用 Windows Phone 的照片选择器任务](http://msdn.microsoft.com/en-us/library/hh394019%28v=vs.92%29.aspx)

```
try
{
    photoChooserTask.Show();
}
catch (System.InvalidOperationException ex)
{
    MessageBox.Show("An error occurred.");
}

void photoChooserTask_Completed(object sender, PhotoResult e)
{
    if (e.TaskResult == TaskResult.OK)
    {
        MessageBox.Show(e.ChosenPhoto.Length.ToString());

        //Code to display the photo on the page in an image control named myImage.
        //System.Windows.Media.Imaging.BitmapImage bmp = new System.Windows.Media.Imaging.BitmapImage();
        //bmp.SetSource(e.ChosenPhoto);
        //myImage.Source = bmp;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T10:10:32.957

您是否尝试过使用[`MediaLibrary`](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.media.medialibrary_members.aspx)课程获取图像？或者您想访问应用程序之外的图像，即使用文件管理器管理图像？

```
MediaLibrary m = new MediaLibrary();
foreach (var p in m.Pictures)
{
    Debug.WriteLine(p.Name);
    Stream s = p.GetImage();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T10:06:48.180

如果要从图像库中选择图像，则有一个[照片选择器任务类](http://msdn.microsoft.com/en-us/library/microsoft.phone.tasks.photochoosertask%28v=vs.92%29.aspx)

```
 private void loadPhoto_Click(object sender, RoutedEventArgs e) 
    { 
        photoChooserTask.Show(); 
    } 
```

现在，这会打开一个可供选择的照片库。

# android - 调用显示 ProgressDialog 的新 Activity 后隐藏键盘

> ID：10429125
> 
> 赞同：6
> 
> 时间：2012-05-03T10:01:43.867
> 
> 标签：android, dialog, android-activity, progressdialog, android-input-method

我在使用屏幕键盘时遇到问题。我有一个`EditText`显示键盘的活动，以及一个转到第二个活动的按钮。第二个活动`ProgressDialog`在它的 上显示一个`onCreate()`，做一些事情，然后关闭`ProgressDialog`。问题是在`ProgressDialog`显示时，键盘也是如此。

我希望键盘在创建`ProgressDialog`. 我彻底搜索了 StackOverflow 和其他网站，但似乎没有任何东西适用于这种特殊情况。

我附上两张图片供您参考：

[![](../Images/fdffb64451c03cd8feca576cc3f36c26.png)](https://i.stack.imgur.com/zvEFZ.png) [![](../Images/bab68bbbf4f48c21d883c21dd48c946c.png)](https://i.stack.imgur.com/80Sk1.png)

这是第一个活动的代码：

```
public class FirstActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        findViewById(R.id.button1).setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View arg0) {
                Intent intent = new Intent(FirstActivity.this, SecondActivity.class);
                startActivity(intent);
            }
        });
    }
} 
```

这是第二个活动的代码：

```
public class SecondActivity extends Activity {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.second);

        // TODO: hide keyboard here

        final ProgressDialog dialog = ProgressDialog.show(this, "", "Please wait...", true, false, null);

        // in real code, here there is an AsyncTask doing stuff...
        new Handler().postDelayed(new Runnable() {
            @Override
            public void run() {
                dialog.dismiss();
            }
        }, 5000);
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-03T12:05:36.553

使用 phalt 发布的技术的变体解决：

```
InputMethodManager im = (InputMethodManager) this.getApplicationContext().getSystemService(Context.INPUT_METHOD_SERVICE);
im.hideSoftInputFromWindow(getWindow().getDecorView().getWindowToken(), InputMethodManager.HIDE_NOT_ALWAYS); 
```

此代码在`onCreate`//期间正常工作`onStart`，`onResume`因为不依赖于焦点视图来获取窗口令牌。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-05-03T10:06:22.087

将此代码写入“SecondActivity”活动的 manifest.xml 文件中。

```
<activity name="EditContactActivity"
    android:windowSoftInputMode="stateAlwaysHidden">
    ...
</activity> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T10:09:59.743

你也可以这样使用：

输入法管理器 imm;

在 onCreate() 方法中写下一行：

imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);

这行在按钮的onclick中：

imm.hideSoftInputFromWindow(arg0.getWindowToken(), 0);

例子：

```
public class FirstActivity extends Activity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    findViewById(R.id.button1).setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View arg0) {

            imm.hideSoftInputFromWindow(arg0.getWindowToken(), 0);
            Intent intent = new Intent(FirstActivity.this, SecondActivity.class);
            startActivity(intent);
        }
    });
}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-24T10:55:12.853

如果在片段类中

```
@Override
    public void onResume()
    {
        getActivity().getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);
        super.onResume();
        } 
```

如果在活动课上

```
 @Override
    public void onResume()
    {
        this.getWindow().setSoftInputMode(WindowManager.LayoutParams.SOFT_INPUT_STATE_ALWAYS_HIDDEN);
        super.onResume();
        FetchLocation fl = new FetchLocation(mContext, locationResult);
    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-05-03T10:34:03.803

你有没有尝试过：

```
InputMethodManager im = (InputMethodManager)
this.getApplicationContext().getSystemService(Context.INPUT_METHOD_SERVICE);

im.hideSoftInputFromWindow(this.getCurrentFocus().getWindowToken(),
InputManagerMethod.HIDE_NOT_ALWAYS); 
```

这是我在想要隐藏键盘的地方输入的代码。

# objective-c - Change UIViewController self.view frame

> ID：10429127
> 
> 赞同：4
> 
> 时间：2012-05-03T10:01:57.553
> 
> 标签：objective-c, ios, uiview, uiviewcontroller

I am trying to display a viewController xib view with its view displayed under a fixed header banner (0,0,320,44) which is an imageView added on Application window.

This is because I need it to stick on the screen while I navigate multiple view controllers. Its a requirement of the project I am doing.

So far I have tried:

*   Resizing the XIB view to the appropriate frame size (0,0,320,416), both with dot notation and setter.

*   Changing the frame in viewDidLoad with self.view.frame = CGRectMake(0, 44, 320, 416);

but it is not working. Any suggestion?

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-03T10:51:37.567

Set the frame in `viewWillAppear`

```
- (void)viewWillAppear:(BOOL)animated
{
     self.view.frame = CGRectMake(0, 44, 320, 416);
    [super viewWillAppear:animated];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-04-02T20:23:32.047

Just want to add a bit more. The reason for changing view of a UIViewController does not work in `viewDidLoad` is because of the call `[window makeKeyAndVisible]`, which is usually called after your `viewDidLoad`. This call will change the frame of the `window.rootViewController` to equal the window's frame. You can test this by changing the UIViewController's view.frame AFTER `[window makeKeyAndVisible]`, and the changes will stick.

`viewWillAppear` and `viewDidAppear` are called within `[window makeKeyAndVisible]` but after the view's frame got resized.

The caveat is that only the top most controller which is the `rootViewController` has its view's frame changed automatically. This DOES NOT affect any `childViewControllers` attached to the `rootViewController`.

# c# - .Net 中将字符串搜索到最大 1GB 的大文件/文件夹中最好和最快的技术是什么？

> ID：10429129
> 
> 赞同：0
> 
> 时间：2012-05-03T10:02:02.390
> 
> 标签：c#, algorithm, file-io

我想在可能有 500MB 空间的文本文件或文件夹中搜索一个字符串（每 5 到 10 分钟）。我想知道哪种技术可以有效地实现这种搜索。如果有任何不清楚的地方，请告诉我。我正在使用 csharp.net。

感谢和问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T10:19:27.837

首先要做的是写一些能达到你想要的结果的东西。

**然后使用分析器来确定什么是最耗时的！**

一旦你找到了耗时最长的部分，看看是否有任何方法可以改进它。

现在，根据您的问题，我可能可以确定花费时间最长的部分是将数据从硬盘驱动器传输到 RAM。如果每次搜索时文件包含不同的数据，那么这将定义搜索速度的上限。如果文件没有改变，那么有几种可能来提高上限。

但首先，找出什么是花时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:24:57.863

您可以使用 Windows 桌面搜索 API（请参阅[此处](https://stackoverflow.com/questions/870101/windows-desktop-search-via-c-sharp)）来执行搜索。

# android - 取消 AsyncTask 会停止启动方法

> ID：10429132
> 
> 赞同：0
> 
> 时间：2012-05-03T10:02:30.870
> 
> 标签：android, android-asynctask

```
 public void get(View view){     
                               try {
                               asPt = new ProgressTask().execute(null,null,null);  
                               Log.d("Watcher","Get finished");         
}
            catch (Exception e) {                       
                    e.printStackTrace();                
                    Log.e("Watcher","Get Exception");       
        }       
    } 
```

当我永远不会打印“完成”行`cancel(Boolean)`。`AsyncTask asPt`为什么？它也不会在此方法中捕获异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:07:06.337

请记住 cancel 什么都不做，因此您需要自己实现它，请参阅链接：[Android - Cancel AsyncTask Forcefully](https://stackoverflow.com/questions/4748964/android-cancel-asynctask-forcefully)

# c# - 绑定命令 MVVM

> ID：10429139
> 
> 赞同：0
> 
> 时间：2012-05-03T10:02:49.200
> 
> 标签：c#, mvvm, view

我有两种不同的观点，它们是：

```
GreeView 
DetailView 
```

每个都有自己的`ViewModel`，它们是：

```
GreeViewModel
DetailViewModel 
```

是否可以调用驻留在`DetailViewModel`from 的命令`GreeView`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T04:28:09.183

我找到了答案

[http://msdn.microsoft.com/en-us/library/ff921159%28v=pandp.20%29.aspx](http://msdn.microsoft.com/en-us/library/ff921159%28v=pandp.20%29.aspx)

# jquery - 使用 jQuery 切换多个块之一

> ID：10429140
> 
> 赞同：0
> 
> 时间：2012-05-03T10:02:51.773
> 
> 标签：jquery, toggle, slide

我有几个链接，应该像这样切换它们对应的 div...

```
 $('#link a').click(function() {
        $('#open').animate({width: 'toggle'});
      });

    $('#link2 a').click(function() {
        $('#open2').animate({width: 'toggle'});
      });

    $('#link3 a').click(function() {
        $('#open3').animate({width: 'toggle'});
      }); 
```

问题是如果您单击#link，然后单击#link2，两个框都保持打开状态。

所有的 '#open' div 共享同一个类，所以我使用了

```
$('#link1 a').click(function() {
        $('shared-class').hide();
        $('#open1').animate({width: 'toggle'});
      }); 
```

哪个确实有效，但它看起来很粗糙，因为 hide 没有滑入，如果我在类上使用了切换，它会混淆输出的顺序和输入的顺序，我不确定是否只有一种方法在 IF IT IS OUT 中滑动一个元素，希望这是有道理的，非常感谢任何帮助！

**编辑**

[http://jsfiddle.net/PEfHc/](http://jsfiddle.net/PEfHc/)

基本上如果我点击 1，所有其他的都不应该显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T12:00:46.477

你可以做这样的事情：

```
$('#link1 a').click(function(e) {
    e.preventDefault();
    $('.shared-class:visible').animate({width: 'toggle'});
    $('#open1').animate({width: 'toggle'});
}); 
```

就像在[这个小提琴中](http://jsfiddle.net/C4kTj/2/)

无论如何，这个需要分解，它只是为了演示目的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T10:15:51.410

肯定有更简单的方法来做这种事情，但无论如何：

```
$('a', '[id^="link"]').click(function(e) {
    e.preventDefault();
    var elm = $('#open'+$(e.target).parent().attr('id').replace('link', ''));
    $('[id^="open"]').not(elm).filter(':visible').animate({width: 'toggle'}, 1000);
    elm.animate({width: 'toggle'}, 1000);
});​ 
```

[小提琴](http://jsfiddle.net/Bpepn/)

# wpf - 如何使用多线程将用户控件添加到 ItemsControl？

> ID：10429141
> 
> 赞同：0
> 
> 时间：2012-05-03T10:02:52.243
> 
> 标签：wpf, multithreading, user-controls

我想使用多线程将 items(UserControl) 设置为 ItemsControl。我的代码喜欢这个

```
System.Threading.Thread thread = new System.Threading.Thread(new System.Threading.ThreadStart(SetItemsControl));
    thread.Start();

    void SetItemsControl()
    {
        IDictionary<string, object> list = GetUserControlList(); // this function return list of UserControl
        this.Dispatcher.BeginInvoke(System.Windows.Threading.DispatcherPriority.Normal,
            new Action(delegate()
            {
                mylistcontrol.ItemsSource = list;

            }));
    } 
```

它在我的用户控件的初始化功能处中断

> 调用线程必须是 STA，因为许多 UI 组件都需要这个。

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:15:50.443

正确的做法是更新绑定到的集合`ItemsControl.ItemsSource`。在这种情况下，您不会触及来自另一个线程的可视元素 - 您更新绑定到它的集合。正在更新的集合告诉绑定刷新，那是数据到达 UI 的时候，它已经发生在 UI 线程中，所以没关系。请注意，集合应该实现`INotifyCollectionChanged`接口才能做到这一点

# java - JNA C DLL 调试方法？

> ID：10429146
> 
> 赞同：6
> 
> 时间：2012-05-03T10:03:02.637
> 
> 标签：java, c, dll, jna

我有一个 DLL，它接受编码的字符串输入并对其进行解码。DLL 是在 Win7 64 位上使用 Codeblocks 和 mingw64 制作的。单独的 C 代码运行良好，但是当我通过 JNA 在 while 循环中使用相同的字符串运行它时，它可以正确解码大约 70% 的调用，其余的调用不正确。我想调试这种情况，但在 Java 代码将控制权交给 JNA 之后我不确定如何去做。或者，关于在哪里寻找的任何想法也会有所帮助。

C和JNA中的方法签名如下，

```
Java: int Decrypt_Blk(byte[] expkey, byte[] in, int size, byte[] out);  
C: __declspec (dllexport) int Decrypt_Blk (unsigned char *expkey, unsigned char *in, unsigned int insize, unsigned char *out); 
```

正确性由输出确定，例如，如果我使用字符串“helloworld”对其进行加密（我不会进入加密细节，因为它们无关紧要）然后将加密的输出传递给这个 DLL 方法，10 次中有 7 次我得到“HelloWorld”另外 3 次我会得到不正确和不同的字符。对于所有 10 次，我在同一个线程中使用同一个变量，在同一个循环中。3 次不正确的出现也是随机的，我唯一能注意到的是，第一次运行总是正确的次数与我测试的次数一样多，但不正确的运行发生在 1-10 次运行中的任何一次。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T15:29:48.267

在 Microsoft Visual C++ 中，从 DLL 项目的项目设置中，您可以选择调试选项卡。作为调试会话的可执行文件，提供 Java.exe 的完整路径。对于参数，提供命令行的其余部分以运行您的 Java 应用程序。在 C 代码中设置断点并启动调试会话。瞧！

# ruby - 如何在 Ruby 中获取两个日期之间的所有星期日？

> ID：10429156
> 
> 赞同：26
> 
> 时间：2012-05-03T10:03:37.593
> 
> 标签：ruby, ruby-on-rails-3

我正在处理一个表单，用户输入一个日期范围并从复选框列表中选择一周中的一天/几天，即周日、周一、周二、周三、周四、周五和周六。

提交表单后，我需要一种方法来获取基于所选日期输入的两个日期之间的日期列表，即两个给定日期之间的所有星期一和星期四。我已经浏览了文档，但无法指出如何有效地做到这一点，即 ruby​​ 方式。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2012-05-03T10:12:40.130

有趣的一个！:D

```
 start_date = Date.today # your start
 end_date = Date.today + 1.year # your end
 my_days = [1,2,3] # day of the week in 0-6\. Sunday is day-of-week 0; Saturday is day-of-week 6.
 result = (start_date..end_date).to_a.select {|k| my_days.include?(k.wday)} 
```

使用上面的数据，您将获得从现在到明年的所有周一/周二/周三的数组。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-03-06T18:29:53.613

另一种方法是将日期范围分组`wday`并选择一周中的哪一天：

```
datesByWeekday = (start_date..end_date).group_by(&:wday)
datesByWeekday[0] # All Sundays 
```

例如，要获得 2019 年 3 月的所有星期六：

```
> (Date.new(2019,03,01)..Date.new(2019,04,01)).group_by(&:wday)[0]
=> [Sun, 03 Mar 2019, Sun, 10 Mar 2019, Sun, 17 Mar 2019, Sun, 24 Mar 2019, Sun, 31 Mar 2019] 
```

[https://apidock.com/ruby/Date/wday](https://apidock.com/ruby/Date/wday)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-04-10T19:59:08.083

对速度很好奇，所以这就是我所做的。

这里有两种解决问题的方法：

*   使用范围和过滤器
*   找到第一天并添加到那`1.week`一天直到停止

对于范围解决方案，有多种使用范围的方法：

*   取所有日期并按工作日分组
*   在范围上运行选择功能
*   将范围转换为数组，然后运行选择

如何选择日期也很重要：

*   `include?`在要求的日期运行
*   查找两个数组之间的交集并检查是否为空

我制作了一个文件来测试所有这些方法。我叫它`test.rb`。我把它放在一个 Rails 应用程序的根目录下。我通过输入以下命令运行它：

*   `rails c`
*   `load 'test.rb'`

这是测试文件：

```
@days = {
  'Sunday' => 0, 'Monday' => 1, 'Tuesday' => 2, 'Wednesday' => 3,
  'Thursday' => 4, 'Friday' => 5, 'Saturday' => 6,
}
@start = Date.today
@stop = Date.today + 1.year

# use simple arithmetic to count number of weeks and then get all days by adding a week
def division(args)
  my_days = args.map { |key| @days[key] }
  total_days = (@stop - @start).to_i
  start_day = @start.wday
  my_days.map do |wday|
    total_weeks = total_days / 7
    remaining_days = total_days % 7
    total_weeks += 1 if is_there_wday? wday, remaining_days, @stop
    days_to_add = wday - start_day
    days_to_add = days_to_add + 7 if days_to_add.negative?
    next_day = @start + days_to_add
    days = []
    days << next_day
    (total_weeks - 1).times do
      next_day = next_day + 1.week
      days << next_day
    end
    days
  end.flatten.sort
end

def is_there_wday?(wday, remaining_days, stop)
  new_start = stop - remaining_days
  (new_start..stop).map(&:wday).include? wday
end

# take all the dates and group them by weekday
def group_by(args)
  my_days = args.map { |key| @days[key] }
  grouped = (@start..@stop).group_by(&:wday)
  my_days.map { |wday| grouped[wday] }.flatten.sort
end

# run the select function on the range
def select_include(args)
  my_days = args.map { |key| @days[key] }
  (@start..@stop).select { |x| my_days.include? x.wday }
end

# run the select function on the range
def select_intersect(args)
  my_days = args.map { |key| @days[key] }
  (@start..@stop).select { |x| (my_days & [x.wday]).any? }
end

# take all the dates, convert to array, and then select
def to_a_include(args)
  my_days = args.map { |key| @days[key] }
  (@start..@stop).to_a.select { |k| my_days.include? k.wday }
end

# take all dates, convert to array, and check if interection is empty
def to_a_intersect(args)
  my_days = args.map { |key| @days[key] }
  (@start..@stop).to_a.select { |k| (my_days & [k.wday]).any? }
end

many = 10_000
Benchmark.bmbm do |b|
  [[], ['Sunday'], ['Sunday', 'Saturday'], ['Sunday', 'Wednesday', 'Saturday']].each do |days|
    str = days.map { |x| @days[x] }
    b.report("#{str} division")       { many.times { division days }}
    b.report("#{str} group_by")       { many.times { group_by days }}
    b.report("#{str} select_include") { many.times { select_include days }}
    b.report("#{str} select_&")       { many.times { select_intersect days }}
    b.report("#{str} to_a_include")   { many.times { to_a_include days }}
    b.report("#{str} to_a_&")         { many.times { to_a_intersect days }}
  end
end 
```

**排序结果**

```
[] division               0.017671
[] select_include         2.459335
[] group_by               2.743273
[] to_a_include           2.880896
[] to_a_&                 4.723146
[] select_&               5.235843

[0] to_a_include          2.539350
[0] select_include        2.543794
[0] group_by              2.953319
[0] division              4.494644
[0] to_a_&                4.670691
[0] select_&              4.897872

[0, 6] to_a_include       2.549803
[0, 6] select_include     2.553911
[0, 6] group_by           4.085657
[0, 6] to_a_&             4.776068
[0, 6] select_&           5.016739
[0, 6] division          10.203996

[0, 3, 6] select_include  2.615217
[0, 3, 6] to_a_include    2.618676
[0, 3, 6] group_by        4.605810
[0, 3, 6] to_a_&          5.032614
[0, 3, 6] select_&        5.169711
[0, 3, 6] division       14.679557 
```

**趋势**

*   `range.select`略快于`range.to_a.select`
*   `include?`比`intersect.any?`
*   `group_by`快于`intersect.any?`但慢于`include?`
*   `division`什么都没有给出时速度很快，但传递的参数越多，速度就会显着减慢

**结论**

如果你结合`select`和`include?`，你有这个问题的最快和最可靠的解决方案

# windows - 获取文件所在目录的 Windows CMD 脚本

> ID：10429160
> 
> 赞同：4
> 
> 时间：2012-05-03T10:03:57.467
> 
> 标签：windows, cmd

我在一个文件夹中有一个可执行文件`VSTO.exe` 和一个`try.bat`文件。我想获取 bat 文件的文件夹路径并将该路径与`VSTO.exe`.

我的`try.bat`.

```
"%~fp0\VSTO.exe" /q 
```

但它创建了路径：“ `G:\test\try.bat\VSTO.exe"`。我想要一条路径`"G:\test\VSTO.exe"`

谁能告诉我我该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T10:40:20.460

```
"%~dp0\VSTO.exe" /q 
```

是准确的答案。

[如何使用 CMD 从文件路径中获取文件夹路径](https://stackoverflow.com/questions/659647/how-to-get-folder-path-from-file-path-with-cmd)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T10:13:48.933

试试这个

```
SET CURDIR=%CD%
"%CURDIR%\VSTO.EXE" /q 
```

%CD% 伪变量扩展到当前工作目录。
键入 SET /? 查看其他伪变量（最后一页）

# maven - Maven JBehave：编码故事 UTF8

> ID：10429163
> 
> 赞同：5
> 
> 时间：2012-05-03T10:04:02.447
> 
> 标签：maven, encoding, utf-8, jbehave, scenarios

我们设法使用 Eclipse 中的 JBehave 创建和运行具有国际化故事的测试。一切都很顺利。

但是当我们尝试使用 maven 插件运行它们时，我们无法对编码问题一无所知（例如，不是从故事中读取“scénario”，而是得到“Scénario”：显然是一个 UTF8 编码问题） .

是否有人找到了一种方法让 JBehave 使用 maven 插件以 UTF8 格式阅读故事？

我们已经尝试过的：

*   添加 -Dfile.encoding=UTF-8 选项
*   使用 UTF8 更改关键字文件
*   更改 ISO => 中的整个项目编码，它可以工作但不适合需要以 UTF8 显示消息的生产部分

我们的 Pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
...

<properties>
    <jbehave.version>3.6.5</jbehave.version>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <resource.encoding>UTF-8</resource.encoding>
</properties>

<build>

    <testOutputDirectory>target/classes</testOutputDirectory>
    <testResources>
        <testResource>
            <directory>src/test/resources</directory>
        </testResource>
        <testResource>
            <directory>src/test/story</directory>
        </testResource>
    </testResources>
    <plugins>
        ...
        <plugin>
            <artifactId>maven-eclipse-plugin</artifactId>
            <version>2.8</version>
            <configuration>
                <downloadSources>true</downloadSources>
                <downloadJavadocs>true</downloadJavadocs>
                <additionalBuildcommands>
                    <buildcommand>com.google.gdt.eclipse.core.webAppProjectValidator</buildcommand>
                </additionalBuildcommands>
                <additionalProjectnatures>
                    <projectnature>com.google.gwt.eclipse.core.gwtNature</projectnature>
                </additionalProjectnatures>
                <classpathContainers>
                    <classpathContainer>org.eclipse.jdt.launching.JRE_CONTAINER</classpathContainer>
                </classpathContainers>
                <additionalConfig>
                    <file>
                        <name>.settings/org.eclipse.core.resources.prefs</name>
                        <content>
                           <![CDATA[eclipse.preferences.version=1
                           encoding/<project>=UTF-8]]>
                        </content>
                    </file>
                </additionalConfig>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.jbehave</groupId>
            <artifactId>jbehave-maven-plugin</artifactId>
            <version>${jbehave.version}</version>
            <executions>
                <execution>
                    <id>run-stories-as-embeddables</id>
                    <phase>test</phase>
                    <configuration>
                        <scope>test</scope>
                        <includes>
                            <include>**/*Story.java</include>
                        </includes>
                        <ignoreFailureInStories>true</ignoreFailureInStories>
                        <ignoreFailureInView>false</ignoreFailureInView>
                    </configuration>
                    <goals>
                        <goal>run-stories-as-embeddables</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-dependency-plugin</artifactId>
            <executions>
                <execution>
                    <id>unpack-jbehave-site-resources</id>
                    <phase>generate-resources</phase>
                    <goals>
                        <goal>unpack</goal>
                    </goals>
                    <configuration>
                        <overwriteReleases>false</overwriteReleases>
                        <overwriteSnapshots>true</overwriteSnapshots>
                        <artifactItems>
                            <artifactItem>
                                <groupId>org.jbehave.site</groupId>
                                <artifactId>jbehave-site-resources</artifactId>
                                <version>3.1.1</version>
                                <type>zip</type>
                                <outputDirectory>
                                    ${project.build.directory}/jbehave/view
                                </outputDirectory>
                            </artifactItem>
                        </artifactItems>
                    </configuration>
                </execution>
                <execution>
                    <id>unpack-jbehave-reports-resources</id>
                    <phase>generate-resources</phase>
                    <goals>
                        <goal>unpack</goal>
                    </goals>
                    <configuration>
                        <overwriteReleases>false</overwriteReleases>
                        <overwriteSnapshots>true</overwriteSnapshots>
                        <artifactItems>
                            <artifactItem>
                                <groupId>org.jbehave</groupId>
                                <artifactId>jbehave-core</artifactId>
                                <version>${jbehave.version}</version>
                                <outputDirectory>
                                    ${project.build.directory}/jbehave/view
                                </outputDirectory>
                                <includes>
                                    **\/*.css,**\/*.ftl,**\/*.js
                                </includes>
                            </artifactItem>
                        </artifactItems>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build>

<dependencies>
    ...

    <!-- JBehave Dependencies -->
    <dependency>
        <groupId>org.jbehave</groupId>
        <artifactId>jbehave-core</artifactId>
        <version>${jbehave.version}</version>
    </dependency>

    <!-- Test Frameworks Dependencies -->
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.8.2</version>
        <scope>test</scope>
    </dependency>

    <dependency>
        <groupId>org.mockito</groupId>
        <artifactId>mockito-all</artifactId>
        <version>1.8.4</version>
        <scope>test</scope>
    </dependency>
</dependencies> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-14T16:25:58.863

我在子类化 org.jbehave.core.io.LoadFromClasspath 类方面取得了一些成功，我在配置中将其用作故事加载器，即

```
MostUsefulConfiguration().useStoryLoader(new LoadFromClasspathUtf8()); 
```

这是我的子类，具有正确的方法覆盖：

```
import java.io.IOException;
import java.io.InputStream;

import org.apache.commons.io.IOUtils;
import org.jbehave.core.io.InvalidStoryResource;
import org.jbehave.core.io.LoadFromClasspath;

public class LoadFromClasspathUtf8 extends LoadFromClasspath {

    public LoadFromClasspathUtf8(Class<?> loadFromClass) {
        super(loadFromClass);
    }

    public LoadFromClasspathUtf8(ClassLoader classLoader) {
        super(classLoader);
    }

    @Override
    public String loadResourceAsText(String resourcePath) {
        InputStream stream = resourceAsStream(resourcePath);
        try {
            return IOUtils.toString(stream, "UTF-8");
        } catch (IOException e) {
            throw new InvalidStoryResource(resourcePath, stream, e);
        }
    }
} 
```

我说“我取得了一些成功”，因为当我查看我的 jbehave 执行日志时，像 è、à、é 等重音的法语字符被替换为 ?，但是，jbehave 仍然正确地将其与使用常规的步骤匹配正则表达式解析器。我没有花时间去调查为什么会这样，但我很满意我的故事现在可以正常工作。

我还将 file.encoding 系统属性添加到我的插件配置中，以明确我打算使用 UTF-8 编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-12T16:25:09.117

这里也有同样的问题。即使将“-Dfile.encoding=UTF-8”参数添加到 MAVEN_OPTS，问题仍然存在。原来我的 ~/.mavenrc 文件中有这一行：

```
export MAVEN_OPTS="-Xmx1024m" 
```

发生的事情是 MAVEN_OPTS 变量在执行 JVM 之前被重置。

将 ~/.mavenrc 文件更改为：

```
export MAVEN_OPTS="$MAVEN_OPTS -Xmx1024m" 
```

问题解决了。运行时文件编码设置正确：

```
export MAVEN_OPTS="$MAVEN_OPTS -Dfile.encoding=UTF-8"
mvn clean integration-test 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T21:16:19.703

由于您的故事在“测试”上下文而不是“主要”（在另一个模块中） - 我认为当故事被复制到目标/测试类时可能会发生一些事情。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-16T18:52:06.783

我有完全相同的问题。默认情况下，JBehave 不支持平台编码。为了解决这个问题，你可以使用这个自定义的 StoryLoader，它尊重 file.encoding 系统属性：

```
import java.io.IOException;
import java.io.InputStream;
import java.nio.charset.Charset;

import org.apache.commons.io.IOUtils;
import org.jbehave.core.io.InvalidStoryResource;
import org.jbehave.core.io.LoadFromClasspath;

/**
 * @author cedric.vidal
 *
 */
public class FixedStoryLoader extends LoadFromClasspath {

    public String loadResourceAsText(String resourcePath) {
        InputStream stream = resourceAsStream(resourcePath);
        try {
            return IOUtils.toString(stream, platformCharset().name());
        } catch (IOException e) {
            throw new InvalidStoryResource(resourcePath, stream, e);
        }
    }

    public static Charset platformCharset() {
        String csn = System.getProperty("file.encoding");
        Charset cs = Charset.forName(csn);
        if (cs == null) {
            cs = Charset.forName("UTF-8");
        }
        return cs;
    }

} 
```

在 JBehave 配置中注册它：

```
new MostUsefulConfiguration().useStoryLoader(new FixedStoryLoader()); 
```

将您的 POM 配置为在所有相关插件中使用 UTF-8（m2eclipse 也将使用）：

```
<properties>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties> 
```

并告诉 JBehave Maven 插件也使用它（查找 systemProperties 块）：

```
 <plugin>
            <groupId>org.jbehave</groupId>
            <artifactId>jbehave-maven-plugin</artifactId>
            <version>${jbehave.core.version}</version>
            <executions>
                <execution>
                    <id>unpack-view-resources</id>
                    <phase>process-resources</phase>
                    <goals>
                        <goal>unpack-view-resources</goal>
                    </goals>
                </execution>
                <execution>
                    <id>embeddable-stories</id>
                    <phase>integration-test</phase>
                    <configuration>
                        <includes>
                            <include>${embeddables}</include>
                        </includes>
                        <excludes/>
                        <systemProperties>
                            <property>
                                <name>file.encoding</name>
                                <value>${project.build.sourceEncoding}</value>
                            </property>
                        </systemProperties>
                        <ignoreFailureInStories>true</ignoreFailureInStories>
                        <ignoreFailureInView>false</ignoreFailureInView>
                        <threads>1</threads>
                        <metaFilters>
                            <metaFilter/>
                        </metaFilters>
                    </configuration>
                    <goals>
                        <goal>run-stories-as-embeddables</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

# ember.js - 车把模板中的内联 javascript

> ID：10429164
> 
> 赞同：14
> 
> 时间：2012-05-03T10:04:15.473
> 
> 标签：ember.js, disqus, handlebars.js

有没有办法在 Handlebars 模板中包含内联脚本？

```
<script type="text/x-handlebars">
    I'm a row of type "foo"
    <script type="text/javascript">alert('hi');</script>
</script> 
```

当上述模板呈现时，内联脚本被删除。

我想要做的是在页面上包含 disqus 小部件。该小部件基本上是一些标记+ disqus 脚本。

该小部件将包含在我的应用程序的子视图中。子视图默认不可见，但根据我的 Ember 应用程序代码中的某些逻辑显示。​</p>

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-03T11:35:14.413

您必须将该小部件包装在自定义 Ember.View 中，以在包装视图的 didInsertElement 中处理实例化它并将其添加到 DOM。Ember 期望，尤其是在把手模板内部，能够完全控制 DOM 操作，它通过结合把手魔术和 Ember.View 创建来做到这一点。定义自定义视图后：

```
MyApp.DisqusView = Em.View.extend({
    didInsertElement: function() {
        // create widget and append it to this.$()
    }
}); 
```

您可以在车把模板中使用它：

```
{{view MyApp.DisqusView}} 
```

出于安全原因，您的视图不应*添加*Script 标签，而应直接执行任何 JS 以插入小部件。

# facebook - Facebook 登录在 Windows Phone 上授予权限后显示空白页面

> ID：10429165
> 
> 赞同：1
> 
> 时间：2012-05-03T10:04:22.260
> 
> 标签：facebook, mobile

我正在构建一个移动站点，用户必须能够使用他的 facebook 帐户登录，如[http://developers.facebook.com/docs/guides/mobile/web/](http://developers.facebook.com/docs/guides/mobile/web/)中所述。它适用于 Iphone 和 Android 设备，但不适用于 Windows Phone。这就是发生的事情：

1.  当我按下登录按钮时，我得到了 facebook 页面，我必须在其中授予使用我的 facebook 帐户的权限。
2.  在我给予承诺后，它会重定向到“ *https://www.facebook.com/dialog/permissions.request* ”并显示一个空白页面。在 Android 上调用“window.FB.login”回调（参见下面的代码），我可以在其中获取信息并重定向用户，但在 Windows Phone 上它只显示该空白页面。当我转到我的 Facebook 页面时，我的网站已在应用列表中注册。所以注册确实工作正常。

当我尝试登录示例页面时也会发生同样的事情：http: [//www.facebookmobileweb.com/hello/](http://www.facebookmobileweb.com/hello/)。

有谁知道如何让它在 Windows Phone 上运行？它甚至可能吗？因为我发现很多网站都会发生这种情况。

这是我的代码：（这再次适用于 Android 和 Iphone 设备）。

```
 var fbApi = {
      init: function () {
      $.getScript(document.location.protocol + '//connect.facebook.net/en_US/all.js', function () {
        if (window.FB) {
            window.FB.init({
                appId: MY_APP_ID,
                status: true,
                cookie: true,
                xfbml: false,
                oauth: true,
            });

        }
    });
    },
    login: function () {
    /// <summary>
    /// Login facebook button clicked
    /// </summary>
    log("login facebook button clicked");

    if (window.FB) {

        //Windows phone does not enter this method, Android and Iphone do
        window.FB.login(function (response) {

            if (response.status) {
                log('it means the user has allowed to communicate with facebook');

                fbAccessToken = response.authResponse.accessToken;
                window.FB.api('/me', function (response) {
                    //get information of the facebook user.
                    loginService.subscribeSocialUser(response.id, response.first_name, response.last_name, fbAccessToken, "", "FaceBook", fbSucces, fbFail);

                });
            } else {
                log('User cancelled login or did not fully authorize.');

            }
        },
        { scope: 'email'
        });
    }

}
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T14:01:37.993

我以这里描述的其他方式做到了：http: [//developers.facebook.com/docs/authentication/](http://developers.facebook.com/docs/authentication/)

# sql - 如何避免多次查询分页计数和数据检索？

> ID：10429166
> 
> 赞同：1
> 
> 时间：2012-05-03T10:04:25.440
> 
> 标签：sql, database, pagination

我有一个场景，我得到一个计数，然后将计数作为变量传递给类似的查询以获取分页记录。所以基本上我正在做一个完整的查询，通过内部创建完整的表来获取所有的计数，然后使用该计数来显示同一个表，每页 10 个。我有什么解决方案来避免这种多重查询？

像这样的东西是一种伪语言。

```
select count {big table}

select big table where records are between count and count+10 
```

有没有一种明智的方法可以在同一个查询中获取 COUNT 变量？

我想知道谷歌将如何处理搜索，它会首先找到所有记录还是只获取记录而不跟踪页面数？无法事先计算页码，因为它取决于用户发送的变量。

编辑：我在这里有一个类似的问题[https://dba.stackexchange.com/questions/161586/including-count-of-a-result-in-the-main-query](https://dba.stackexchange.com/questions/161586/including-count-of-a-result-in-the-main-query)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T11:12:28.970

关于谷歌，他们可能只生成请求数量的结果（如 10 个）并估计数量。估计的计数*非常*不精确。

您不能让 SQL Server 计算所有结果并仅获取其中的一个子集。有3种策略来解决这个问题：

*   执行计数和数据查询
*   在客户端执行无限数据查询并丢弃除十个结果之外的所有结果
*   对主键为行号的临时表执行无限数据查询。然后，您可以立即计数（获取最后一行）并通过单次搜索按行号选择任何子集

由于 SQL Server 可以使用不同的索引或丢弃连接，因此计算数据的成本会大大降低。

# rest - RESTEasy 映射“传统”Moodle REST 服务

> ID：10429169
> 
> 赞同：2
> 
> 时间：2012-05-03T10:04:49.150
> 
> 标签：rest, resteasy, moodle

我正在尝试使用 RESTEasy 客户端映射“旧版”REST 服务器。

这个 ws 的 url 映射如下：

[http://localhost/webservice/rest/server.php?wstoken=reallylongtokenhash&wsfunction=core_course_get_courses](http://localhost/webservice/rest/server.php?wstoken=reallylongtokenhash&wsfunction=core_course_get_courses)

端点始终是 server.php，调用的函数使用查询参数进行映射。

```
@POST
@Path("/server.php")
@Produces("application/json")
List<Map<String, Object>> getCourses(
          @QueryParam("wstoken") String token
        , @QueryParam("wsfunction") String function
        , @QueryParam("moodlewsrestformat") String format);

@POST
@Path("/server.php")
@Produces("application/json")
String createUser(
          @QueryParam("wstoken") String token
        , @QueryParam("wsfunction") String function
        , @QueryParam("moodlewsrestformat") String format
        , @Form User user); 
```

我这样称呼

```
private static void getCourses() {
    final MoodleRest client = ProxyFactory.create(MoodleRest.class, "http://localhost/webservice/rest/");
    final List<Map<String, Object>> s = client.getCourses(token, "core_course_get_courses", "json");
    System.out.println("s = " + s);
} 
```

让我们忽略一个事实，即“get_courses”方法是使用 POST 映射的，并且令牌是使用这篇文章中的 QueryParameter 传递的，是否可以避免在每个方法上传递函数和响应格式？我想使用注释来映射它。

我尝试使用直接写入@Path

/server.php?function=core_course_get_courses

但显然这不是正确的方法（另外，它不起作用，因为它被转义了）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-10T07:00:34.977

也许直接在您的方法中使用 HttpServletRequest 并“手动”解析请求参数会更好。我是说：

```
@POST
@Path("/server.php")
@Produces("application/json")
List<Map<String, Object>> getCourses(@Context HttpServletRequest request){
   //parse request.getParameters()
} 
```

# c++ - 检测由鼠标选择的 3D 网格的表面

> ID：10429172
> 
> 赞同：0
> 
> 时间：2012-05-03T10:05:01.040
> 
> 标签：c++, 3d

我有一个用于以 3D 显示对象的应用程序。现在我想改进我的应用程序。如果我双击我的一个区域，我想检索它们被逮捕和存在于该区域的表面，以便随后细分该区域。有可能收到吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:32:47.440

将视口上的单击转换为世界空间中的射线。

然后使用射线查询您的场景以查找相交对象（如果您有，则使用场景的八叉树基于轴对齐的边界框搜索）。

然后，如果您需要检测三角形，请针对场景查询找到的对象中的所有三角形测试光线。如有必要，您可以通过为对象的网格构建八叉树来优化此步骤。最接近射线原点的是命中点。

对于每个对象，您都可以将光线转换为它自己的局部坐标系。

# c# - 在GridView中按优先级显示数据

> ID：10429174
> 
> 赞同：0
> 
> 时间：2012-05-03T10:05:02.070
> 
> 标签：c#, database

我被一些事情困住了

我想从具有 id、priority 和 txt 等字段的表中检索记录。

```
id         priority    txt
5            1          Hello how are you? (recently added with the 1 priority)
3            1          I am fine
2            1          where are from 
4            2          Yes (recently added with the 2 priority)
1            2          No 
```

我想在网格视图中显示为（如果优先级与具有相同优先级的下一个相同，则最近添加的记录应该在顶部）我不想为此使用日期时间列。是否可以？通过（Sql 查询）或（C# 代码）

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:55:10.720

如果您正在寻找与上述完全相同的结果，请尝试查询

```
select id, priority, txt from table order by priority ASC, id DESC 
```

# database-design - 数据库架构 - 交友网站

> ID：10429183
> 
> 赞同：0
> 
> 时间：2012-05-03T10:05:41.320
> 
> 标签：database-design

我正在开发一个约会网站，该网站将基于用户将从列表中选择的许多个人领域。我有 43 个用户必须填写的不同字段 - 每个字段都有多个答案选项。

我有 3 个选项：

1.  构建所有硬编码的站点并在代码中设置所有字段及其选项 - 这将很难维护。

2.  我现在看到的另一个选项是为每个字段列表打开一个表格并用它的选项填充它。

3.  为每个字段列表打开一个表并保存其名称和 id 以及字段选项的另一个表，其中将包括字段 id 和选项的名称。

这些是我看到的选项 - 最好的方法是什么？还有其他我不知道的选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:09:35.013

创建一个带有 ID 和名称的表“FIELDS”和一个带有 ID、FIELD_ID 和选项名称的表“FIELD_OPTIONS”。

这将允许最大的灵活性。
例如，您可以将列“ALLOWS_MULTISELECT”添加到“FIELDS”表以允许选择多个选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T10:14:26.213

创建具有下拉选择选项的所有字段的基表。从这些基表中加载选择字段选项。然后制作另一个表，将每个人的数据保存为该表的一行。该人的数据表将具有与表单中的每个字段映射的列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T10:08:55.827

看起来你的目标最好是使用面向文档的数据库，比如 MongoDB，是否需要使用 SQL？

文件如下：

```
{
"question": <>,
"answers": ["1","2","3","AA"],
"correct": "1"
} 
```

# java - Android - 简化我的代码：多个按钮链接到一种方法

> ID：10429185
> 
> 赞同：0
> 
> 时间：2012-05-03T10:05:47.997
> 
> 标签：java, android, pdf, download, simplify

正如标题所说，我正在尝试获得简化代码的帮助。我有多个按钮，现在我测试时只有三个，但我计划有大约 30 个按钮选择。目前我有一段很长的代码，我认为可以使用数组来大幅缩短它？但我不确定如何正确实施。如果有人以前这样做过或有想法，请分享！谢谢大家！

```
public class myDL extends Activity { 

public static final int DIALOG_DOWNLOAD_PROGRESS = 0; 
private Button startBtn; 
private ProgressDialog mProgressDialog; 

/** Called when the activity is first created. */ 
@Override 
public void onCreate(Bundle savedInstanceState) { 
super.onCreate(savedInstanceState); 
setContentView(R.layout.filechoice); 
mProgressDialog = new ProgressDialog(myDL.this); 
mProgressDialog.setMessage("The file is now downloading, it will be saved on the SD card for future use.  Please use WiFi to avoid operator charges."); 
mProgressDialog.setIndeterminate(false); 
mProgressDialog.setMax(100); 
mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL); 

Button section = (Button) findViewById(R.id.section); 
section.setOnClickListener(new View.OnClickListener() { 

    public void onClick(View view) { 
        // TODO Auto-generated method stub 
        Intent section = new Intent(view.getContext(), 
                section.class); 
        startActivity(section); 

    } 
}); 

Button back = (Button) findViewById(R.id.back); 
back.setOnClickListener(new View.OnClickListener() { 

    public void onClick(View v) { 
        // TODO Auto-generated method stub 
        setResult(RESULT_OK); 
        finish(); 
    } 
}); 

secOne = (Button) findViewById(R.id.secOne); 
secOne.setOnClickListener(new OnClickListener() { 
    public void onClick(View v) { 
        startSecOne(); 
    } 

}); 
} 

private void startSecOne() { 
StartSecOne secOne = new StartSecOne(); 
secOne 
        .execute("www.website.com/document.pdf"); 

} 

class StartSecOne extends AsyncTask<String, Integer, String> { 

@Override 
protected void onPreExecute() { 
    super.onPreExecute(); 
    mProgressDialog.show(); 
} 

@Override 
protected void onProgressUpdate(Integer... progress) { 
    super.onProgressUpdate(progress); 
    mProgressDialog.setProgress(progress[0]); 
} 

@Override 
protected String doInBackground(String... aurl) { 

    String isFileThere = Environment.getExternalStorageDirectory() 
            + "/Android/Data/" 
            + getApplicationContext().getPackageName() 
            + "/files/test1.pdf"; 
    File f = new File(isFileThere); 

    if (f.exists()) { 
        showPdf(); 
    } else { 

        try { 

            URL url = new URL(aurl[0]); 
            URLConnection connection = url.openConnection(); 

            connection.connect(); 
            int fileLength = connection.getContentLength(); 
            int tickSize = 2 * fileLength / 100; 
            int nextProgress = tickSize; 

            Log.d( 

            "ANDRO_ASYNC", "Lenght of file: " + fileLength); 

            InputStream input = new BufferedInputStream( 
                    url.openStream()); 

            String path = Environment.getExternalStorageDirectory() 
                    + "/Android/Data/" 
                    + getApplicationContext().getPackageName() 
                    + "/files"; 
            File file = new File(path); 
            file.mkdirs(); 
            File outputFile = new File(file, "test1.pdf"); 

            OutputStream output = new FileOutputStream(outputFile); 

            byte data[] = new byte[1024 * 1024]; 
            long total = 0; 
            int count; 
            while ((count = input.read(data)) != -1) { 
                total += count; 
                if (total >= nextProgress) { 
                    nextProgress = (int) ((total / tickSize + 1) * tickSize); 
                    this.publishProgress((int) (total * 100 / fileLength)); 
                } 
                output.write(data, 0, count); 
            } 

            output.flush(); 
            output.close(); 
            input.close(); 
            mProgressDialog.dismiss(); 
            showPdf(); 

        } catch (Exception e) { 
        } 
    } 
    return null; 
} 
}
secTwo = (Button) findViewById(R.id.secTwo); 
secTwo.setOnClickListener(new OnClickListener() { 
    public void onClick(View v) { 
        startSecTwo (); 
    } 

}); 
} 

private void startSecTwo () { 
StartSecTwo secTwo = new StartSecTwo (); 
secTwo 
        .execute("www.website.com/document2.pdf"); 

} 

class StartSecTwo extends AsyncTask<String, Integer, String> { 

@Override 
protected void onPreExecute() { 
    super.onPreExecute(); 
    mProgressDialog.show(); 
} 

@Override 
protected void onProgressUpdate(Integer... progress) { 
    super.onProgressUpdate(progress); 
    mProgressDialog.setProgress(progress[0]); 
} 

@Override 
protected String doInBackground(String... aurl) { 

    String isFileThere = Environment.getExternalStorageDirectory() 
            + "/Android/Data/" 
            + getApplicationContext().getPackageName() 
            + "/files/test2.pdf"; 
    File f = new File(isFileThere); 

    if (f.exists()) { 
        showPdf(); 
    } else { 

        try { 

            URL url = new URL(aurl[0]); 
            URLConnection connection = url.openConnection(); 

            connection.connect(); 
            int fileLength = connection.getContentLength(); 
            int tickSize = 2 * fileLength / 100; 
            int nextProgress = tickSize; 

            Log.d( 

            "ANDRO_ASYNC", "Lenght of file: " + fileLength); 

            InputStream input = new BufferedInputStream( 
                    url.openStream()); 

            String path = Environment.getExternalStorageDirectory() 
                    + "/Android/Data/" 
                    + getApplicationContext().getPackageName() 
                    + "/files"; 
            File file = new File(path); 
            file.mkdirs(); 
            File outputFile = new File(file, "test2.pdf"); 

            OutputStream output = new FileOutputStream(outputFile); 

            byte data[] = new byte[1024 * 1024]; 
            long total = 0; 
            int count; 
            while ((count = input.read(data)) != -1) { 
                total += count; 
                if (total >= nextProgress) { 
                    nextProgress = (int) ((total / tickSize + 1) * tickSize); 
                    this.publishProgress((int) (total * 100 / fileLength)); 
                } 
                output.write(data, 0, count); 
            } 

            output.flush(); 
            output.close(); 
            input.close(); 
            mProgressDialog.dismiss(); 
            showPdf(); 

        } catch (Exception e) { 
        } 
    } 
    return null; 
} 
}

secThree = (Button) findViewById(R.id.secThree); 
secThree.setOnClickListener(new OnClickListener() { 
    public void onClick(View v) { 
        startSecThree (); 
    } 

}); 
} 

private void startSecThree () { 
StartSecThree secThree = new StartSecThree (); 
secThree 
        .execute("www.website.com/document3.pdf"); 

} 

class StartSecThree extends AsyncTask<String, Integer, String> { 

@Override 
protected void onPreExecute() { 
    super.onPreExecute(); 
    mProgressDialog.show(); 
} 

@Override 
protected void onProgressUpdate(Integer... progress) { 
    super.onProgressUpdate(progress); 
    mProgressDialog.setProgress(progress[0]); 
} 

@Override 
protected String doInBackground(String... aurl) { 

    String isFileThere = Environment.getExternalStorageDirectory() 
            + "/Android/Data/" 
            + getApplicationContext().getPackageName() 
            + "/files/test3.pdf"; 
    File f = new File(isFileThere); 

    if (f.exists()) { 
        showPdf(); 
    } else { 

        try { 

            URL url = new URL(aurl[0]); 
            URLConnection connection = url.openConnection(); 

            connection.connect(); 
            int fileLength = connection.getContentLength(); 
            int tickSize = 2 * fileLength / 100; 
            int nextProgress = tickSize; 

            Log.d( 

            "ANDRO_ASYNC", "Lenght of file: " + fileLength); 

            InputStream input = new BufferedInputStream( 
                    url.openStream()); 

            String path = Environment.getExternalStorageDirectory() 
                    + "/Android/Data/" 
                    + getApplicationContext().getPackageName() 
                    + "/files"; 
            File file = new File(path); 
            file.mkdirs(); 
            File outputFile = new File(file, "test3.pdf"); 

            OutputStream output = new FileOutputStream(outputFile); 

            byte data[] = new byte[1024 * 1024]; 
            long total = 0; 
            int count; 
            while ((count = input.read(data)) != -1) { 
                total += count; 
                if (total >= nextProgress) { 
                    nextProgress = (int) ((total / tickSize + 1) * tickSize); 
                    this.publishProgress((int) (total * 100 / fileLength)); 
                } 
                output.write(data, 0, count); 
            } 

            output.flush(); 
            output.close(); 
            input.close(); 
            mProgressDialog.dismiss(); 
            showPdf(); 

        } catch (Exception e) { 
        } 
    } 
    return null; 
} 
}

private void showPdf() { 
    // TODO Auto-generated method stub 
    mProgressDialog.dismiss(); 
    File file = new File(Environment.getExternalStorageDirectory() 
            + "/Android/Data/" 
            + getApplicationContext().getPackageName() 
            + "/files/test1.pdf"); 
    PackageManager packageManager = getPackageManager(); 
    Intent testIntent = new Intent(Intent.ACTION_VIEW); 
    testIntent.setType("application/pdf"); 
    List list = packageManager.queryIntentActivities(testIntent, 
            PackageManager.MATCH_DEFAULT_ONLY); 
    Intent intent = new Intent(); 
    intent.setAction(Intent.ACTION_VIEW); 
    Uri uri = Uri.fromFile(file); 
    intent.setDataAndType(uri, "application/pdf"); 
    startActivity(intent); 
} 

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T10:09:18.137

```
final OnClickLisener listener = new OnClickListener() {
     public void onClick(View v){
         switch(v.getId()){ 
         case R.id.zero:
            break;
         case R.id.one:
            break;
         case R.id.two:
            break;
         }
     }
}
final int[] btnIds = new int[]{R.id.one, R.id.two, R.id.zero};
for(int i = 0; i < btnIds.length; i++) {
    final Button btn = (Button)findViewById(btnIds[i]);
    btn.setOnClickListener(listener);
} 
```

# facebook - XFBMLlike按钮在like后消失

> ID：10429186
> 
> 赞同：0
> 
> 时间：2012-05-03T10:05:48.483
> 
> 标签：facebook, facebook-graph-api, facebook-like

我用 xfbml 创建了一些类似按钮。它工作了一个星期，但昨天幸运地停止工作。我不更改代码。

问题：当我单击“赞”按钮时，一切正常。刷新网站后，那些被点击的按钮就会消失。

这不是css问题，like div是空的。

iframe 嵌入工作正常。

[测试地点](http://fb.grtest.hu/wall/index2.php)

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T17:58:48.813

仅在我在线发布的新博客文章中存在相同问题。已经有 LIKES 的旧帖子似乎不受影响。这个星期一才注意到。

# ruby-on-rails - Rails 中的 Twitter 风格时间

> ID：10429188
> 
> 赞同：1
> 
> 时间：2012-05-03T10:05:50.550
> 
> 标签：ruby-on-rails, gem

我正在寻找一种能够将给定时间转换为“1 分钟前”、“刚刚”、“5 天前”等格式的 gem，

我曾经经历过这样的宝石，但无法再次找到它。

谁能帮我解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T10:09:34.223

Rails 包含内置的[DateHelper](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html)方法[time_ago_in_words](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-time_ago_in_words)、[distance_of_time_in_words](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-distance_of_time_in_words)和[distance_of_time_in_words_to_now](http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-distance_of_time_in_words_to_now)，它们提供了这种格式化方式。

# synchronization - Microsoft Sync 是否需要在两侧加载整个表进行比较？

> ID：10429200
> 
> 赞同：0
> 
> 时间：2012-05-03T10:06:33.997
> 
> 标签：synchronization, microsoft-sync-framework

我不确定是否能很好地理解 Microsoft Sync Framework 的场景。我有一个包含数千行的巨大数据库，在 2 个远程 SQL 服务器上是相同的。

当我同步时，它看起来像是检索了所有要比较的数据.. 后续更新呢？

谢谢约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:36:33.307

同步过程应该只检索增量更新，这意味着它应该只获取自上次同步以来发生的插入/更新/删除。

您是否第一次尝试同步具有相同行的两个数据库？

如果两个数据库在您配置数据库以进行同步时存在相同的行，则 Sync Framework 不知道这些现有行是相同的。所以它会将这些相同的行发送到另一个数据库。更改应用程序将在目标上失败，因为行已经存在，这将导致引发冲突。

# git - git push origin 被 fallthru 拒绝，钩子被拒绝：gitolite

> ID：10429201
> 
> 赞同：17
> 
> 时间：2012-05-03T10:06:35.733
> 
> 标签：git, gitolite, git-push

我在`git`使用 Gitolite 时遇到问题。
当我尝试这个时：

```
git push origin :refs/tags/deployment 
```

我收到此错误：

```
remote: D NAME/install.py repos michael DENIED by fallthru
remote: error: hook declined to update refs/tags/deployment
To gitolite@admin:repos
 ! [remote rejected] deployment (hook declined)
error: failed to push some refs to 'gitolite@admin:repos' 
```

我已授予组**`deploy`**[用户**`michael`**所属的] 删除 Gitolite 配置中的分支的权限：

```
@deply  =   michael

repo  repos

        RWD    =   @deply 
```

我看过这个帖子：“[无法推送Git。为什么？](https://stackoverflow.com/questions/9121005/unable-to-push-in-git-why) ”

但我没有使用任何我知道的钩子，也找不到任何其他可能相关的东西。

有什么我想念的吗？
有人遇到过这个吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-03T15:32:09.680

您需要`RW+`获得 ref 更改/删除权限

> RW+，用于“push -f”或允许删除引用（即销毁信息）

此外，如果您使用的是 V2，这可能适用：

> RWD 和 RW+D，用于 ref 删除。一旦你在 repo 中使用它，普通的 RW+ 就不能再删除 ref；它只能倒带

资料来源：

[http://sitaramc.github.com/gitolite/g2/conf.html](http://sitaramc.github.com/gitolite/g2/conf.html)

[http://sitaramc.github.com/gitolite/rules.html](http://sitaramc.github.com/gitolite/rules.html)

* * *

## 回答 #2

> 赞同：-6
> 
> 时间：2013-03-21T05:27:16.250

这对我有用，当没有其他方法时：

```
cd ~gitlab/gitlab
sudo -u gitlab -H bundle exec rake gitlab:gitolite:update_keys RAILS_ENV=production
sudo -u gitlab -H bundle exec rake gitlab:gitolite:update_repos RAILS_ENV=production 
```

# msbuild - 如何使用 Msbuild 任务创建 installsheild msp？

> ID：10429202
> 
> 赞同：0
> 
> 时间：2012-05-03T10:06:41.260
> 
> 标签：msbuild, installshield, msbuild-task

我正在通过手动步骤创建 installshield msp。

我知道有一个 msbuild 任务可以用来创建 msi。

但是，有没有办法使用 Msbuild 任务来创建它。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T23:58:26.917

您没有指定您使用的是哪个版本的 InstallShield，因此您可能会或可能不会使用它。如果您使用的是最新版本，则可以指定任务的`PatchConfiguration`属性`InstallShield`，如帮助主题[Microsoft Build Engine (MSBuild)](http://kb.flexerasoftware.com/doc/Helpnet/installshield18helplib/MSBuild.htm)中所述。

# .net - 在实体框架中实现“每个对象一个实例”

> ID：10429203
> 
> 赞同：0
> 
> 时间：2012-05-03T10:06:41.890
> 
> 标签：.net, entity-framework, design-patterns

我编写了一个分层的 .NET 4.0 应用程序。数据层是使用实体框架实现的，并且存在向调用者（即业务层）提供实体实例的存储库。当实体框架被两次询问某个实体时（例如通过键），它将返回相同的实例，因此我对实体所做的更改将反映在使用该实体的其他地方。但它并不是真正的缓存功能，因为没有过期策略，而且性能似乎没有太大提高，因为实体框架仍然会查询数据库，至少在许多情况下是这样。关键是要确保每个实体只有一个实例（每个上下文）。

在业务层中，实体被映射到在结构上可能与实体不同的业务对象。同样，与数据层中的存储库一样，有集中的访问点来获取业务对象的实例。我现在的目标是，在业务层中拥有与实体框架提供的相同功能，即“始终为某个对象返回相同的实例”。我想确保对应用程序中任何位置的某个业务对象的每次访问都将在同一个实例上工作。

开始编辑

情境意识很重要！与实体框架类似，每个业务对象实例的唯一性应该在每个上下文基础上提供，而不是严格在整个应用程序上提供。在业务层中还有上下文的概念，每个上下文都应该有自己的每个业务对象的实例。这个实例应该在使用上下文的任何地方重用。

我也在寻找一种解决方案，不需要为每个业务对象类实现。可能有数百个。我更喜欢框架代码中的解决方案，它对实现存储库的人尽可能透明。实体框架本身也不知道具体的实体类型，但实体框架仍然能够提供对实体模型开发人员透明的功能。

结束编辑

我的问题是：

*   这种“每个对象只有一个实例”行为有名称吗？谷歌搜索词是什么？
*   是否有参考、指南或最佳实践，或者是否有处理这个问题的设计模式？
*   .NET 中是否有有助于编写此类功能的类，甚至完全提供它？

谢谢和问候，彼得。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:13:41.270

是的，它有一个名字。它被称为[身份映射](http://martinfowler.com/eaaCatalog/identityMap.html)模式，通常它只是对象键/对象对的字典。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:37:25.690

这是可以为您提供方向的示例。考虑您有类用户（具有私有 ID 设置器）：

```
public class User
{
    public int Id { get; private set; }
    public string Name { get; set; }
} 
```

将所有用户存储在存储库中（我使用 Dictionary 进行快速访问）：

```
public class UserRepository
{
    private static UserRepository _instance = new UserRepository();
    Dictionary<int, User> _users = new Dictionary<int, User>();

    private UserRepository()
    {
    }

    public static UserRepository Instance
    {
        get { return _instance; }
    }

    public IEnumerable<User> FindAll()
    {
        return _users.Values;
    }

    public User FindById(int id)
    {
        return _users[id];
    }

    public void SaveOrUpdate(User user)
    {
        if (user.Id == 0)
        {
            int nextId = _users.Count + 1;
            PropertyInfo id = typeof(User).GetProperty("Id");
            id.SetValue(user, nextId, null);
            _users.Add(user.Id, user);
            return;
        }

        _users[user.Id] = user;
    }
} 
```

这里有趣的是：

*   存储库是单例的。因为您只需要存在一个用户集合/字典即可
*   当您在程序中创建用户时，其 ID 将为 0。因此您可以定义它是新用户，也可以定义为现有用户
*   反射用于设置私有属性值
*   单例实现和下一代 ID 很简单（仅用于快速示例）

现在你可以这样做：

```
UserRepository repository = UserRepository.Instance;
repository.SaveOrUpdate(new User() { Name = "Joe" }); 
```

在其他地方你可以得到相同的用户实例：

```
var otherRepository = UserRepository.Instance;
User user = otherRepository.FindById(1); 
```

# ios - 如何在 iOS 设备被锁定或在另一个应用程序上处理背景音频播放？

> ID：10429204
> 
> 赞同：26
> 
> 时间：2012-05-03T10:06:47.827
> 
> 标签：ios, audio, background, multitasking, locked

使用 OpenFrameworks 为 iOS 设计一个生成音乐系统，我需要提供一种模式，用户可以在以下情况下收听应用程序生成的音乐：

*   设备已锁定
*   用户使用另一个应用程序

一些应用程序，如 BLOOM 或闹钟，就是这样工作的，并向用户建议启用/禁用此功能的开关。

有什么建议吗？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-03T13:33:20.020

**播放背景音频**

> 连续播放或录制音频的应用程序（即使应用程序在后台运行时）可以注册以在后台执行这些任务。您可以从 Xcode 项目的 Capabilities 选项卡的 Background mode 部分启用音频支持。（您还可以通过在应用程序的 Info.plist 文件中包含带有音频值的 UIBackgroundModes 键来启用此支持。）在后台播放音频内容的应用程序必须播放可听内容而不是静音。

[Apple 参考“播放和录制背景音频”](https://developer.apple.com/library/ios/documentation/iPhone/Conceptual/iPhoneOSProgrammingGuide/BackgroundExecution/BackgroundExecution.html)

[确保屏幕锁定时音频继续播放](https://developer.apple.com/library/ios/qa/qa1626/_index.html)

为了启用/禁用此功能，我发现[Activating and Deactivating Your Audio Session](https://developer.apple.com/library/ios/documentation/Audio/Conceptual/AudioSessionProgrammingGuide/ConfiguringanAudioSession/ConfiguringanAudioSession.html#//apple_ref/doc/uid/TP40007875-CH2-SW23)，我自己没有尝试过，但它看起来像你需要的。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2013-02-01T07:21:16.203

您需要在 plist 文件中进行一些更改。

即 1) 将所需的后台模式设置为 App 播放音频

2）将应用程序不在后台运行设置为NO。

```
 NSError *setCategoryErr = nil;
 NSError *activationErr  = nil;
 [[AVAudioSession sharedInstance] setCategory: AVAudioSessionCategoryPlayback error:&setCategoryErr];
 [[AVAudioSession sharedInstance] setActive:YES error:&activationErr]; 
```

然后，你需要在 AppDelegate 中编写这么多代码

现在，您可以在手机屏幕锁定或进入后台时轻松运行音频。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-10-27T18:02:00.183

在 xCode 项目设置和代码中进行以下更改。

步骤 1) 在 Xcode 的 Navigator 中选择您的项目文件。然后，从 Capabilities 部分，打开 Background Modes 子部分。在为您提供背景模式列表后，勾选音频和 Airplay 开关。

stp 2) 使用以下 swift 代码，基本上你需要为你的应用设置音频会话。

```
var audioPlayer : AVAudioPlayer!

@IBAction func playButtonClicked(sender : AnyObject){

    let dispatchQueue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0)
    dispatch_async(dispatchQueue, {

        if let data = NSData(contentsOfFile: self.audioFilePath())
        {
            do{
                let session = AVAudioSession.sharedInstance()

                try session.setCategory(AVAudioSessionCategoryPlayback)
                try session.setActive(true)

                self.audioPlayer = try AVAudioPlayer(data: data)
                //self.audioPlayer.delegate = self
                self.audioPlayer.prepareToPlay()
                self.audioPlayer.play()
            }
            catch{
                print("\(error)")
            }
        }
    });
}

func audioFilePath() -> String{

    let filePath = NSBundle.mainBundle().pathForResource("mySong", ofType: "mp3")!
    return filePath
} 
```

此音频播放会话将播放您的应用程序播放，即使应用程序处于后台或手机处于静音模式或设备已锁定。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-18T07:43:06.457

看看这个教程。它有一些后台服务示例

[http://www.raywenderlich.com/29948/backgrounding-for-ios](http://www.raywenderlich.com/29948/backgrounding-for-ios)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-17T08:19:12.483

您需要在 plist 文件中进行一些更改。

1) 将必需的后台模式设置为应用播放音频

2）将应用程序不在后台运行设置为NO。

```
let dispatchQueue = DispatchQueue.global()
            dispatchQueue.async(execute: {
                    do{
                        let session = AVAudioSession.sharedInstance()

                        try session.setCategory(AVAudioSessionCategoryPlayback)
                        try session.setActive(true)

                        self.isObjectAllocate = true
                        if self.isPlayed == false{
                            self.playSound(soundName: "http://radio.zahraun.com:8000/live.m3u")
                            self.isPlayed = true
                            self.btnPlayAudio.setImage(#imageLiteral(resourceName: "pause") , for: .normal)

                        }else{
                            self.audioPlayer.pause()
                            self.isPlayed = false
                            self.btnPlayAudio.setImage(#imageLiteral(resourceName: "audioPlay"), for: .normal)
                        }
                    }
                    catch{
                        print("\(error)")
                    }
            }); 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-05-23T08:39:01.070

您也可以使用以下代码：

```
AVAudioSession *session = [AVAudioSession sharedInstance];
[session setCategory:AVAudioSessionCategoryPlayback error:NULL];

AVAudioSession *backgroundMusic = [AVAudioSession sharedInstance];

[backgroundMusic setCategory:AVAudioSessionCategoryPlayback error:NULL]; 
```

# hadoop - 在 hive 和 hadoop 流式 API 输出之间共享数据

> ID：10429207
> 
> 赞同：1
> 
> 时间：2012-05-03T10:06:52.133
> 
> 标签：hadoop, hive, hadoop-streaming

我有几个hadoop流API程序并使用以下输出格式生成输出：“org.apache.hadoop.mapred.SequenceFileOutputFormat”并且流API程序可以读取输入格式为“org.apache.hadoop.mapred.SequenceFileAsTextInputFormat”的文件。

输出文件中的数据如下所示。

```
val1-1,val1-2,val1-3
val2-1,val2-2,val2-3
val3-1,val3-2,val3-3 
```

现在我想用 hive 读取输出。我用这个脚本创建了一个表：

```
CREATE EXTERNAL 
TABLE IF NOT EXISTS table1
(
col1 int,
col2 string,
col3 int
)
PARTITIONED BY (year STRING,month STRING,day STRING,hour STRING)
ROW FORMAT DELIMITED
FIELDs TERMINATED BY '\t'
LINES TERMINATED BY '\n'
STORED AS INPUTFORMAT 'org.apache.hadoop.mapred.SequenceFileAsTextInputFormat'
OUTPUTFORMAT 'org.apache.hadoop.mapred.SequenceFileOutputFormat'
LOCATION '/hive/table1'; 
```

当我用查询查询数据时

```
select * from table1 
```

结果将是

```
val1-2,val1-3
val2-2,val2-3
val3-2,val3-3 
```

似乎第一列已被忽略。我认为 hive 只是使用值作为输出而不是键。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-09T00:36:06.300

你是对的。Hive 目前的限制之一是忽略序列文件格式中的键。到目前为止，我指的是 Hive 0.7，但我相信这也是 Hive 0.8 和 Hive 0.9 的限制。

为了避免这种情况，您可能必须创建一个新的输入格式，其中键为空，值是您当前键和值的组合。抱歉，我知道这不是您要找的答案！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-08T13:06:04.557

我认为它应该`fields terminated by ','`
代替。`fields terminated by '\t'`

# sql-server-2005 - 如何消除 SQL Server 2005 中的死锁？

> ID：10429211
> 
> 赞同：2
> 
> 时间：2012-05-03T10:07:01.353
> 
> 标签：sql-server-2005, deadlock, database-deadlocks

首先，我想知道 SQL Server 2005 中死锁的实际根本原因是什么。是因为当两个进程访问表中的同一行时？

无论如何，请考虑两个表`_Table_Now_`，并且`_Table_History_`两者都具有相同的结构。

假设有一列称为`NAME`。

因此，当一个进程尝试使用 in 更新记录时`NAME='BLUE'`，`_Table_Now_`首先，它需要将当前行`NAME='BLUE'`放入`_Table_History_`然后更新 `_Table_Now_`，并删除以前存在的行`_Table_History_`。

删除时发生死锁。我不明白为什么？

请指导我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:30:54.757

死锁基本上意味着当进程 A 依赖于进程 B 而进程 B 依赖于进程 A 时，所以 A 只会在 B 完成时开始\继续，而 B 只会在 A 完成时开始\继续

您可能遇到的是表（或行）锁定，因此 SQL 在更新表之前锁定该行，以确保在执行更新时没有其他进程尝试访问该行。

您能否更具体地说明您是如何进行插入\更新\删除的。在这种情况下，您不应该出现死锁。

仅供参考，不要使用`with (NOLOCK)`. 它会阻止锁定，但它通过告诉 SQL Server 读取未提交的数据来做到这一点，并且最终可能导致数据不一致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:42:59.423

当进程 A 等待进程 B 释放资源而进程 B 等待进程 A 释放资源时，就会发生死锁。

如果我正确理解更新的顺序，它是这样的：
1\. 读取 Table_Now 中的一行
2\. 更新 Table_History 中的一行
3\. 更新 Table_Now 中的一行
4\. 删除 Table_History 中的一行。

如果您不正确地使用事务或锁定，这可能是一个有风险的命令。

为避免死锁，对于每个进程，您应该执行：
1\. 开始事务（最好是表锁）
2\. 执行所有数据库操作
3\. 提交事务（或回滚，以防数据库更新时出现任何问题）

这将确保每个进程锁定两个表，执行所有操作然后退出。

如果您已经在使用事务，您使用的是什么范围和级别？如果没有，请引入交易。它应该可以解决问题。

# android - Android 中的 WindowManager$BadTokenException

> ID：10429213
> 
> 赞同：1
> 
> 时间：2012-05-03T10:07:13.983
> 
> 标签：android, android-alertdialog

首先，我很清楚发生此错误是因为我试图通过`Context`不是`Activity`.

但是没有任何解决方案。我的要求是；我`Dialog`在一个普通的 JAVA 类的方法中有一个自定义样式表。当我需要`Activity`加载`Dialog`.

在我的 Activity 类中，我有以下代码集；

```
HomeClass homeClass = new HomeClass();
homeClass.showSplashScreen(); 
```

然后在我的 HomeClass 中，我有以下代码集；

```
public void showSplashScreen() {        
 splashDialog = new Dialog(HomeActivity.getAppContext(), R.style.SplashScreen);
 splashDialog.setContentView(R.layout.splash_screen);
 splashDialog.setCancelable(false);
 splashDialog.show();
} 
```

通过保持这种设计，有什么办法可以摆脱**WindowManager$BadTokenException**

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:25:40.000

我将修改您的代码，这可能对您有帮助...

```
HomeClass homeClass = new HomeClass(this);
homeClass.showSplashScreen(); 
```

在您的 Home 类中.. 添加参数构造函数..

```
public class Home {
private Context context;
public Home(Context context){
this.context = context;
}
public void showSplashScreen() {        
splashDialog = new Dialog(context, R.style.SplashScreen);
 splashDialog.setContentView(R.layout.splash_screen);
 splashDialog.setCancelable(false);
splashDialog.show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:15:54.983

将您的活动传递给 showSplashScreen() 方法...

这样做..

```
HomeClass homeClass = new HomeClass();
homeClass.showSplashScreen(Your Actvity); 
```

在您的家庭课程中

```
public void showSplashScreen(Activity curActivity) {        
 splashDialog = new Dialog(curActivity, R.style.SplashScreen);
 splashDialog.setContentView(R.layout.splash_screen);
 splashDialog.setCancelable(false);
 splashDialog.show();
} 
```

# ruby-on-rails - ActiveRecord 查询的返回类型

> ID：10429217
> 
> 赞同：4
> 
> 时间：2012-05-03T10:07:25.300
> 
> 标签：ruby-on-rails, activerecord

如果我要从 ActiveRecord 调用中返回 Relation、Array 或其他类型，我会知道什么？我知道我可以在控制台中输入 .class 并弄清楚，但是调用本身是否有一些东西可以让我知道我在问什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:15:01.630

你知道，Rails 有时会对你撒谎——所有魔术师都会这样 :)

Rails 允许您通过链接`has_many`关联来构建复杂的查询。这个功能的核心是一堆 XXXAssociation (like `HasManyAssociation`) 类。例如，当您调用`.class`关联`has_many`时，实际上会应用您的调用`HasManyAssociation`。但这里是神奇的开始：

```
# collection_proxy.rb
instance_methods.each { |m| undef_method m unless m.to_s =~ /^(?:nil\?|send|object_id|to_a)$|^__|^respond_to|proxy_/ } 
```

Rails 取消定义（隐藏）`HasManyAssociation`实例方法（除了少数，正如您在正则表达式中看到的那样），然后使用委托并将`method_missing`您的调用传递给某个底层数组（如果您试图获取记录）或关联本身（如果您要链接您的关联）：

```
 delegate :group, :order, :limit, :joins, :where, :preload, :eager_load, :includes, :from,
           :lock, :readonly, :having, :pluck, :to => :scoped 

  delegate :target, :load_target, :loaded?, :to => :@association

  delegate :select, :find, :first, :last,
           :build, :create, :create!,
           :concat, :replace, :delete_all, :destroy_all, :delete, :destroy, :uniq,
           :sum, :count, :size, :length, :empty?,
           :any?, :many?, :include?,
           :to => :@association

  def method_missing(method, *args, &block)
    match = DynamicFinderMatch.match(method)
    if match && match.instantiator?
      send(:find_or_instantiator_by_attributes, match, match.attribute_names, *args) do |r|
        proxy_association.send :set_owner_attributes, r
        proxy_association.send :add_to_target, r
        yield(r) if block_given?
      end
    end

    if target.respond_to?(method) || (!proxy_association.klass.respond_to?(method) && Class.respond_to?(method))
      if load_target
        if target.respond_to?(method)
          target.send(method, *args, &block)
        else
          begin
            super
          rescue NoMethodError => e
            raise e, e.message.sub(/ for #<.*$/, " via proxy for #{target}")
          end
        end
      end

    else
      scoped.readonly(nil).send(method, *args, &block)
    end
  end 
```

所以，`HasManyAssociation`instance 自己决定要处理什么以及需要通过隐藏数组来完成什么 (`class`方法不是什么`HasManyAssociation`感兴趣的，所以它会在这个隐藏数组上调用。结果当然是`Array`，这有点欺骗）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T11:00:19.717

这是我的看法，我认为重要的是要知道。它主要来自记忆，并通过一些控制台实验从我的脑海中浮出水面，所以我确信如果它得到传递，它可以得到改进。欢迎评论和请求。

```
Derived ActiveRecord class --> Record Instance
  find

Derived ActiveRecord class | Relation --> Relation
  where, select, joins, order, group, having, limit, offset, a scope

Derived ActiveRecord class | Relation --> Record Instance
  find

Derived ActiveRecord class | Relation --> Result Array
  all

Result Array --> Array
  to_a 
```

所以重要的是，

*   您可以链接范围和查询方法，但仅限于 first 或 all。毕竟你不能调用更多的范围和查询方法。
*   当你调用 all 时，你会得到一个结果数组。Array 的一些方法被重新定义为作用于数据库，所以如果你想对返回的数组进行操作，调用 to_a。一个例子是 count，如果在 Result Array 上调用它，它将查询数据库，如果再次查询该数组，则该数组中有多少条记录。

# visual-studio-2010 - EF Power Tools Beta 2：“逆向工程师代码优先”引发的 System.MissingMethodException

> ID：10429218
> 
> 赞同：0
> 
> 时间：2012-05-03T10:07:26.050
> 
> 标签：visual-studio-2010, entity-framework

我安装了“Entity Framework Power Tools Beta 2”，我想简单地反向映射我的数据库模式。我在解决方案资源管理器中右键单击该项目，然后单击“实体框架-> 逆向工程代码优先”，指定连接属性，然后在输出窗口中出现以下错误。知道有什么问题吗？

```
System.MissingMethodException: Method not found: 'System.Xml.XmlReader System.Data.Common.DbProviderServices.GetConceptualSchemaDescription()'.
    at System.Data.Entity.Design.EntityStoreSchemaGenerator.GetProviderSchemaMetadataWorkspace(DbProviderServices providerServices, DbConnection providerConnection)
    at System.Data.Entity.Design.EntityStoreSchemaGenerator.CreateStoreSchemaConnection(String providerInvariantName, String connectionString)
    at System.Data.Entity.Design.EntityStoreSchemaGenerator..ctor(String providerInvariantName, String connectionString, String namespaceName)
    at Microsoft.DbContextPackage.Handlers.ReverseEngineerCodeFirstHandler.ReverseEngineerCodeFirst(Project project) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:15:36.033

看起来实体框架 2011 年 6 月 CTP 已安装在您的盒子上。你需要卸载它。在此处查看更多详细信息：http: [//blog.3d-logic.com/2012/04/11/entity-framework-zombie-aka-microsoft-entity-framework-june-2011-ctp/](http://blog.3d-logic.com/2012/04/11/entity-framework-zombie-a-k-a-microsoft-entity-framework-june-2011-ctp/)

# c# - 类到数据集/数据集到类

> ID：10429220
> 
> 赞同：2
> 
> 时间：2012-05-03T10:07:34.753
> 
> 标签：c#, database, dataset, dynamically-generated

现在我正在尝试创建一个动态处理数据库的数据库处理程序。假设我有一类字段类型“字符串、整数、布尔值、字符串”，并且想将此类转换为表格并将所有字段类型转换为数据集的“字段”？

我怎样才能做到这一点？

另外，我可以创建一些继承的类：“System.Data.DataSet”、“System.Data.DataTable”、“System.Data.DataRow”，以及某种适配器来处理它。

我知道当你进入设计模式并创建一个数据集时，当你查看它时，代码真的很难辨认。但是不应该通过使用这些对象并创建处理它们的类来动态“创建”数据库。它不会获得“设计器视图”，但是 Database.AddTable(new Table("Field1", "Field2, "Field3")) 应该与您在设计器模式下以图形方式执行的操作相同。

有任何想法吗？

主要思想是它很灵活，我可以采用任何类并将其转换为行表，该类的字段值的每个对象都作为数据库字段。

**更新**

这只是我在最后一个小时做的一个简单的课程，我的想法是否正确？**仍然需要能够将 DataSet 添加到 *.mdf / *.sdf 文件，我该怎么做？**

```
public class DataAccess
{

    SqlConnection connection;
    DataSet dataSet;

    public DataAccess(String databaseName, String connectionStr)
    {
        dataSet = new DataSet(databaseName);
        connection = new SqlConnection(connectionStr);
    }

    public void AddTable<T>(String tableName)
    {
        dataSet.Tables.Add(new DBTable<T>(tableName));
    }

    public void AddRow<T>(String tableName, T row)
    {
        ((DBTable<T>)dataSet.Tables[tableName]).AddRow<T>(row);
    }

    public List<C> GetRows<T, C>(String tableName, String columnName)
    {
        return ((DBTable<T>)dataSet.Tables[tableName]).GetRow<C>(columnName);
    }

    public String GetXML()
    {
        return dataSet.GetXml();
    }

    #region METHOD PROPERTIES

    public int ColumnCount(String tableName)
    {
        for (int i = 0; i < dataSet.Tables.Count; i++)
        {
            if (dataSet.Tables[i].TableName == tableName)
            {
                return dataSet.Tables[i].Columns.Count;
            }
        }

        return 0;
    }

    #endregion

}

public class DBTable<T> : System.Data.DataTable
{
    public DBTable(String tableName) : base(tableName)
    {

        PropertyInfo[] properties = typeof(T).GetProperties();

        for (int i = 0; i < properties.Length; i++)
        {
            try
            {
                AddColumn(properties[i].Name, properties[i].PropertyType);
            }
            catch { }
        }

    }

    private void AddColumn(String name, Type t)
    {
        this.Columns.Add(new DataColumn(name, t, null, MappingType.Attribute));
    }

    public void AddRow<T>(T obj)
    {
        PropertyInfo[] properties = typeof(T).GetProperties();

        if (properties.Length == this.Columns.Count)
        {

            bool valid = true;

            for (int i = 0; i < properties.Length; i++)
            {
                if (properties[i].PropertyType != this.Columns[i].DataType)
                {
                    valid = false;
                }
            }

            if (valid)
            {
                object[] p = new object[this.Columns.Count];

                for (int i = 0; i < properties.Length; i++)
                {
                    p[i] = properties[i].GetValue(obj, null);
                }

                this.Rows.Add(p);
            }
        }
    }

    public List<T> GetRow<T>(String columnName)
    {

        List<T> objects = new List<T>();

        for (int i = 0; i < this.Rows.Count; i++)
        {
            objects.Add((T)this.Rows[i][this.Columns[columnName]]);
        }

        return objects;

    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T10:11:29.927

Petapoco库[正是](http://www.toptensoftware.com/petapoco/)您要找的。您可以非常轻松地将数据从数据库保存和检索到 POCO 对象，反之亦然。

您可能需要查看通用列表和一些 LINQ 位：Petapoco 方法不使用`DataSet`也不使用`DataTable`对象。

正如 leppie 所说，这并不是问题的答案。因此，可以通过以下方式创建与类匹配的 DataTable 对象：

```
public static DataTable CreateDataTable<T>()
{
    var dt = new DataTable();

    var propList = typeof(T).GetMembers(BindingFlags.Public | BindingFlags.Instance | BindingFlags.DeclaredOnly);

    foreach(MemberInfo info in propList)
    {
        if(info is PropertyInfo)
            dt.Columns.Add(new DataColumn(info.Name, (info as PropertyInfo).PropertyType));
        else if(info is FieldInfo)
            dt.Columns.Add(new DataColumn(info.Name, (info as FieldInfo).FieldType));
    }

    return dt;
} 
```

如果您希望之后填写此表：

```
public static void FillDataTable<T>(DataTable dt, List<T> items)
{
    var propList = typeof(T).GetMembers(BindingFlags.Public | BindingFlags.Instance | BindingFlags.DeclaredOnly);

    foreach(T t in items)
    {
        var row = dt.NewRow();
        foreach(MemberInfo info in propList)
        {
            if (info is PropertyInfo)
                row[info.Name] = (info as PropertyInfo).GetValue(t, null);
            else if (info is FieldInfo)
                row[info.Name] = (info as FieldInfo).GetValue(t);
        }
        dt.Rows.Add(row);
    }
} 
```

如果您希望`DataTable`同时创建和填充对象，也可以将这两个功能混合在一个函数中。

# linux - 获取 DIMM 和 CPU 插槽信息

> ID：10429223
> 
> 赞同：3
> 
> 时间：2012-05-03T10:07:41.677
> 
> 标签：linux

我想在 Linux 中获取 PC 的 RAM 插槽 (DIMM) 和 CPU 插槽的数量。

在 Linux 中，有一个命令`dmidecode`，但该命令必须以`sudo`/root 权限运行。

任何人都可以告诉我另一种无需使用`sudo`/root 权限即可获得 DIMM 和 CPU 插槽的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T10:56:41.357

唯一有信息的是 SMBIOS/DMI，而获得它的唯一方法是通过`/dev/mem`.

如果您担心用户对 sudo 的权限过多，则可以添加特定权限以由特定用户运行 dmidecode：

sudoers 文件中的示例存根：

```
# Cmnd alias specification
Cmnd_Alias  DMI_COMMANDS = /usr/sbin/dmidecode -t memory

dmiuser ALL= NOPASSWD: DMI_COMMANDS 
```

这允许`dmiuser`帐户仅执行命令`dmidecode -t memory`（在这种情况下没有密码）。

# android - 使用 google maps v3 和 jQuery Mobile 在 Android 上进行地理定位

> ID：10429225
> 
> 赞同：0
> 
> 时间：2012-05-03T10:07:43.673
> 
> 标签：android, jquery-mobile, google-maps-api-3, geolocation

我遵循了本教程[http://www.mobiledevelopersolutions.com/home/start/twominutetutorials/tmt4part1](http://www.mobiledevelopersolutions.com/home/start/twominutetutorials/tmt4part1)，但我遇到了一个问题。地理位置在默认的 Android 浏览器上不起作用。它适用于 Chrome、IE 和 Android 版 Chrome。但不是默认的 Android 浏览器。

我想我必须把 { enableHighAccuracy: true } 放在我无法弄清楚的地方。

这是代码：

```
var mapdata = { destination: new google.maps.LatLng(51.3704888, 6.1723862) };

// Home page
$('#page-home').live("pageinit", function() {
    $('#map_square').gmap(
        { 'center' : mapdata.destination, 
          'zoom' : 12, 
          'mapTypeControl' : false, 
          'navigationControl' : false,
          'streetViewControl' : false 
        })
        .bind('init', function(evt, map) { 
            $('#map_square').gmap('addMarker', 
                { 'position': map.getCenter(), 
                  'animation' : google.maps.Animation.DROP
 });                                                                                                                                                                                                               
        });
    $('#map_square').click( function() { 
        $.mobile.changePage($('#page-map'), {});
    });
});

function fadingMsg (locMsg) {
    $("<div class='ui-overlay-shadow ui-body-e ui-corner-all fading-msg'>" + locMsg + "</div>")
    .css({ "display": "block", "opacity": 0.9, "top": $(window).scrollTop() + 100 })
    .appendTo( $.mobile.pageContainer )
    .delay( 2200 )
    .fadeOut( 1000, function(){
        $(this).remove();
   });
}

//Create the map then make 'displayDirections' request
$('#page-map').live("pageinit", function() {
    $('#map_canvas').gmap({'center' : mapdata.destination, 
        'mapTypeControl' : true, 
        'navigationControl' : true,
        'navigationControlOptions' : {'position':google.maps.ControlPosition.LEFT_TOP}
        })
    .bind('init', function() {
        $('.refresh').trigger('tap');        
    });
});

$('#page-map').live("pageshow", function() {
    $('#map_canvas').gmap('refresh');
});

// Request display of directions, requires jquery.ui.map.services.js
var toggleval = true; // used for test case: static locations
$('.refresh').live("tap", function() {

             // START: Tracking location with device geolocation
    if ( navigator.geolocation ) { 
        fadingMsg('Using device geolocation to get current position.');

        navigator.geolocation.getCurrentPosition  ( 
            function(position )  {
                $('#map_canvas').gmap('displayDirections', 
                { 'origin' : new google.maps.LatLng(position.coords.latitude, position.coords.longitude), 
                  'destination' : mapdata.destination, 'travelMode' : google.maps.DirectionsTravelMode.DRIVING},
                { 'panel' : document.getElementById('dir_panel')},
                      function (result, status) {
                          if (status === 'OK') {
                              var center = result.routes[0].bounds.getCenter();
                              $('#map_canvas').gmap('option', 'center', center);
                              $('#map_canvas').gmap('refresh')
                          } else {
                              alert('Unable to get route');
                          }
                      }
                   );         
                }, 
                function(){ 
                    alert('Unable to get location');
                    $.mobile.changePage($('#page-home'), {   }); 

                }); 
            } else {
                alert('Unable to get location.');
            }           
    // END: Tracking location with device geolocation
    $(this).removeClass($.mobile.activeBtnClass);
    return false;
});

// Go to map page to see instruction detail (zoom) on map page
$('#dir_panel').live("tap", function() {
    $.mobile.changePage($('#page-map'), {});
});

// Briefly show hint on using instruction tap/zoom
$('#page-dir').live("pageshow", function() {
    fadingMsg("Tap any instruction<br/>to see details on map");
}); 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:23:19.790

这就是您可能需要调用的方式。

```
navigator.geolocation.getCurrentPosition(successCallback,
                                         errorCallback,
                                         {maximumAge:Infinity, timeout:0, enableHighAccuracy: true }); 
```

当然，您可以在此处更改 maximumAge 和超时值，但这是您设置 enableHighAccuracy 的地方。因此，只需在您的 getcurrentposition 方法中将其指定为第三个参数。

编辑 ：

```
 navigator.geolocation.getCurrentPosition  ( 
        function(position )  {
            $('#map_canvas').gmap('displayDirections', 
            { 'origin' : new google.maps.LatLng(position.coords.latitude, position.coords.longitude), 
              'destination' : mapdata.destination, 'travelMode' : google.maps.DirectionsTravelMode.DRIVING},
            { 'panel' : document.getElementById('dir_panel')},
                  function (result, status) {
                      if (status === 'OK') {
                          var center = result.routes[0].bounds.getCenter();
                          $('#map_canvas').gmap('option', 'center', center);
                          $('#map_canvas').gmap('refresh')
                      } else {
                          alert('Unable to get route');
                      }
                  }
               );         
            }, 
            function(){ 
                alert('Unable to get location');
                $.mobile.changePage($('#page-home'), {   }); 

            }, 
    { enableHighAccuracy: true } ); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-16T02:36:30.217

既然你想使用地理定位，你有没有把传感器设置为真？因为如果你把它设置为假，它就不起作用了。

```
<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=true"></script> 
```

# debugging - 使用条件异常处理调试回原始错误，即重新抛出

> ID：10429229
> 
> 赞同：4
> 
> 时间：2012-05-03T10:08:09.310
> 
> 标签：debugging, matlab, error-handling

据我所知，在 Matlab 中，没有有条件地捕获异常的好方法（如果我错了，请纠正我）。唯一的方法是捕获异常，检查标识符，如果无法处理此特定错误，则重新抛出错误。这是可以接受的，虽然不方便。但是，当我使用 Matlabs 时`dbstop if error`，我最终会遇到问题`ME.rethrow()`。然后我无法回到导致*原始*错误`dbup`的地方。

 *```
function test_excc

try
    sub_test()
catch ME
    if strcmp(ME.identifier, 'test:notsobad')
        fprintf(1, 'Fine\n');
    else
        ME.rethrow();
    end
end

end

function sub_test
sub_sub_test();
end

function sub_sub_test()
if rand>0.5
    error('test:error', 'Noooo!');
else
    error('test:notsobad', 'That''OK');
end
end 
```

示例用法：

```
>> test_excc()
Error using test_excc>sub_sub_test (line 21)
Noooo!

Error in test_excc>sub_test (line 16)
sub_sub_test();

Error in test_excc (line 4)
    sub_test()

9           ME.rethrow();
K>> dbstack
> In test_excc at 9 
```

尽管 Matlab 桌面环境将整个堆栈跟踪打印回`sub_sub_test`，但调试器并没有让我有可能在此函数中向上堆栈跟踪和调试。

我知道`dbstop if caught error`。但是，这将调试到*任何*捕获的错误，如果软件大量使用异常，这可能会很多。我只想在未捕获的错误上停止，但我想在产生错误的地方停止——而不是在重新抛出错误的地方。

我的问题：

*   在 Matlab 中，如何有条件地捕获错误（基于错误标识符）并调试到最初引发错误的地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T11:14:35.297

我猜你不能这样做。一旦执行进入`catch`语句，`dbstack`就必须引用catch内部的那个位置，因此调试错误原因所需的信息会丢失。`ME.stack`会告诉您异常来自哪里，但这还不足以在该位置进行调试。

所以我怀疑你可以通过在 catch 中做一些聪明的事情来解决这个问题。查看 catch 的文档，似乎也没有办法执行 java-style `catch (ExceptionType ME)`。

通过以编程方式使用调试命令可能有一些 hacky 方法来解决这个问题。例如，`S = dbstatus`保存调试状态，如果有办法从保存的状态恢复，那么您可以将其附加到异常。但我找不到任何有据可查的方法来做到这一点。*

# java - 具有泛型优势的多值类型映射

> ID：10429230
> 
> 赞同：5
> 
> 时间：2012-05-03T10:08:11.287
> 
> 标签：java, generics, map, casting, compiler-errors

我想创建一个地图，它将提供泛型的好处，同时支持多种不同类型的值。我认为以下是泛型集合的两个主要优点：

*   编译时警告将错误的东西放入集合中
*   从集合中取出东西时无需强制转换

所以我想要的是一张地图：

*   它支持多个值对象，
*   检查放入地图的值（最好在编译时）
*   知道从地图获取时对象值是什么。

使用泛型的基本情况是：

```
Map<MyKey, Object> map = new HashMap<MyKey, Object>();
// No type checking on put();
map.put(MyKey.A, "A");  
map.put(MyKey.B, 10);
// Need to cast from get();
Object a = map.get(MyKey.A); 
String aStr = (String) map.get(MyKey.A); 
```

我找到了解决第二个问题的方法，方法是创建一个 AbstractKey，它由与此键关联的值类生成：

```
public interface AbstractKey<K> {
}
public enum StringKey implements AbstractKey<String>{
  A,B;  
}
public enum IntegerKey implements AbstractKey<Integer>{
  C,D;
} 
```

然后我可以创建一个 TypedMap，并覆盖 put() 和 get() 方法：

```
public class TypedMap extends HashMap<AbstractKey, Object> {
  public <K> K put(AbstractKey<K> key, K value) {
    return (K) super.put(key, value);
  }
  public <K> K get(AbstractKey<K> key){
    return (K) super.get(key);
  }
} 
```

这允许以下操作：

```
TypedMap map = new TypedMap();
map.put(StringKey.A, "A");
String a = map.get(StringKey.A); 
```

但是，如果我为键输入错误的值，我不会收到任何编译错误。相反，我`ClassCastException`在 get() 上获得了运行时。

```
map.put(StringKey.A, 10); // why doesn't this cause a compile error?
String a = map.get(StringKey.A); // throws a ClassCastException 
```

如果这个 .put() 可以给出编译错误，那将是理想的。作为当前的第二好，我可以`ClassCastException`在 put() 方法中抛出运行时。

```
// adding this method to the AbstractKey interface:
public Class getValueClass();

// for example, in the StringKey enum implementation:
public Class getValueClass(){
  return String.class;
}

// and override the put() method in TypedMap:
public <K> K put(AbstractKey<K> key, K value){
  Object v = key.getValueClass().cast(value);
  return (K) super.put(key, v);
} 
```

现在，在`ClassCastException`放入地图时会抛出 ，如下所示。这是更可取的，因为它允许更轻松/更快的调试来识别错误的键/值组合已放入 TypedMap 的位置。

```
map.put(StringKey.A, 10); // now throws a ClassCastException 
```

所以，我想知道：

*   为什么不会`map.put(StringKey.A, 10)`导致编译错误？
*   我如何调整此设计以在放置时获得有意义的编译错误，其中值不是键的关联泛型类型？

*   这是一个合适的设计来实现我想要的（见顶部）？（任何其他想法/评论/警告也将不胜感激......）

*   是否有替代设计可以用来实现我想要的？

编辑 - 澄清：

*   如果你认为这是一个糟糕的设计——你能解释一下为什么吗？
*   我使用 String 和 Integer 作为示例值类型 - 实际上，我有许多不同的键/值类型对，我希望能够使用它们。我想在一张地图中使用它们——这就是目标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T10:16:23.683

你在搞乱泛型并以一种糟糕的方式重载。您正在扩展`HashMap<AbstractKey, Object>`，因此您的类正在继承方法`Object put(AbstractKey k, Object v)`。在您的类中，您正在定义另一个`put`具有不同签名的方法，这意味着您只是重载该`put`方法，而不是覆盖它。

当您编写`map.put(StringKey.A, 10)`时，编译器会尝试找到符合参数类型的方法`put(StringKey, Integer)`。您的方法的签名不适用，但继承`put`的 's 确实 -`StringKey`兼容`AbstractKey`并`Integer`兼容`Object`. 因此，它将该代码编译为对`HashMap.put`.

解决此问题的方法：重命名`put`为某个自定义名称，例如`typedPut`.

顺便说一句，从经验中谈起您的方法非常有趣且引人入胜，但在现实生活中，这不值得麻烦。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T11:14:19.087

*第 29 条：考虑类型安全的异构容器。*—<a href="http://my.safaribooksonline.com/9780137150021?portal=informit" rel="nofollow">Joshua Bloch，*Effective Java，第二版，第 5 章：泛型*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T10:24:58.730

恕我直言，每个问题都来自原始设计的味道：想要将不同类型的值放入地图中。我会将您的 Integer 和 String 值包装成一个通用`Value`类型。像这样的东西：

```
public class Value {
    private enum Type {
        STRING, INTEGER;
    }

    private Type type;
    private Object value;

    private Value(Object value, Type type) {
        this.value = value;
        this.type = type;
    }

    public static Value fromString(String s) {
        return new Value(s, Type.STRING);
    }

    public static Value fromInteger(Integer i) {
        return new Value(i, Type.INTEGER);
    }

    public Type getType() {
        return this.type;
    }

    public String getStringValue() {
        return (String) value;
    }

    public Integer getIntegerValue() {
        return (Integer) value;
    }

    // equals, hashCode
} 
```

这样，您只需要一个`Map<SomeKey, Value>`，就可以安全地从地图中获取值：

```
Value v = map.get(someKey);
if (v.getType() == Type.STRING) {
    String s = v.getStringValue();
}
else if (v.getType() == Type.INTEGER) {
    Integer i = v.getIntegerValue();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T13:06:39.903

考虑一下：（感谢 Effective java）

```
public class TypedMap {

    private Map<AbstractKey<?>, Object> map = new HashMap<AbstractKey<?>, Object>();

    public <T> T get(AbstractKey<T> key) {
        return key.getType().cast(map.get(key));
    }

    public <T> T put(AbstractKey<T> key, T value) {
        return key.getType().cast(map.put(key, key.getType().cast(value)));
    }

    public static interface AbstractKey<K> {

        Class<K> getType();
    }

    public static enum StringKey implements AbstractKey<String> {

        A, B;

        public Class<String> getType() {
            return String.class;
        }
    }

    public static enum IntegerKey implements AbstractKey<Integer> {

        C, D;

        public Class<Integer> getType() {
            return Integer.class;
        }
    }
  } 
```

这会产生编译时错误

```
TypedMap map = new TypedMap();
TypedMap.AbstractKey<Integer> intKey = TypedMap.IntegerKey.C;
TypedMap.AbstractKey<String> strKey = TypedMap.StringKey.A;
map.put(strKey, "A");
map.put(intKey, 10);
map.put(strKey, 10); // this cause a compile error? 
```

# iphone - 正确处理 didReceiveMemoryWarning

> ID：10429235
> 
> 赞同：2
> 
> 时间：2012-05-03T10:08:33.147
> 
> 标签：iphone, objective-c, ios, cocoa-touch, memory-management

我的一个`UIViewController`有几个子视图控制器。它们是在界面构建器中构建的，通过将一个拖到`NSObject`左侧的“对象”部分，然后放入我自己`SpecialViewController`的“自定义类”中。通过此设置，`viewDidLoad`我将准备好视图和控制器。以下屏幕截图建议了工作流程：

![拖](../Images/a7a510398b885d3820cbf69f36c6d94f.png)

在我的实现中，我有：

```
@interface ParentController : UIViewController
{
     SpecialViewController *svc;
}
@property (nonatomic, retain) IBOutlet SpecialViewController *svc; 
```

据我了解，在此期间`didReceiveMemoryWarning`我应该释放自己的资源。然后`IBOutlets`在`viewDidUnload`.

我在模拟器中模拟低内存时崩溃，调试器在`didReceiveMemoryWarning`of `SpecialViewController`（其主体只是`[super didReceiveMemoryWarning];`）处暂停，并出现错误`EXC_BAD_ACCESS (code=1, address=0xe0000008)`。此时，父控制器是不可见的，因此可以安全地释放它。

父控制器也只包含`[super didReceiveMemoryWarning];`在`didReceiveMemoryWarning`. 我`IBOutlets`在这两个课程中都尝试过 niling。它没有帮助。

知道为什么会这样吗？

我的目标是带有 ARC 的 iOS 4 和 5。`SpecialViewController`是 的子类`UITableViewController`。

通过追踪，发现`ParentController didReceiveMemoryWarning`是之前调用的`SpecialViewController`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-07T13:47:38.073

似乎您在此处的视图控制器中有一个视图控制器。您选择创建这样的课程有什么特别的原因吗？根据我的经验，每个 UIViewController 都应该是一个单独的子类。基于您的错误出现在的事实`didReceiveMemoryWarning`，我认为问题出在其他地方。你能分享这个视图控制器的初始化代码吗？

如果您正在尝试 UIViewController Containment 之类的操作，您可能应该查看涵盖此过程的 WWDC 主题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-07T14:10:31.183

更新 iOS > 6.0：

> 在内存不足的情况下不再清除视图，因此永远不会调用此方法[[1]](https://developer.apple.com/documentation/uikit/uiviewcontroller/1621383-viewdidunload)。

* * *

视图控制器的`didReceiveMemoryWarning`默认实现会释放它们的视图；您的责任只是发布在`viewDidLoad`或中创建的任何其他视图`loadView`，以及对 IBOutlet 子视图的任何强引用。

你对另一个视图控制器有一个强引用，当视图再次可见时，它*不会*被重新创建。您不应该**使用**来`didReceiveMemoryWarning`释放您的`sec`实例变量；相反，依靠`SpecialViewController`'s`didReceiveMemoryWarning`实现来处理释放它的视图。

在实践中，我`didReceiveMemoryWarning`用来发布我的主视图 ( `self.view`) 并`viewDidUnload`用来发布在`viewDidLoad`. 我发现方法名称及其用途的平衡很直观。如果您在 中创建某些内容，请在`viewDidLoad`中发布它`viewDidUnload`。

# jenkins - 詹金斯 - 无法继续进行 MSBuild

> ID：10429238
> 
> 赞同：0
> 
> 时间：2012-05-03T10:08:44.043
> 
> 标签：jenkins

我与 Jenkins 一起工作了将近一天，以设置自动化发布 ASP.NET Web 应用程序。我已经在一台本地虚拟机中完成了它，但是当我尝试使用生产服务器时它不起作用。

任何人都可以帮助或建议我吗？这是控制台错误输出：

```
......
no change for **SVNpath**1 since the previous build
Path To MSBuild.exe: C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\MSBuild.exe
Executing command: cmd.exe /C C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\MSBuild.exe /t:rebuild D:\JenkinsInstall\jobs\ADDevelopmentPublishing\workspace\Web\ABC\ABC.csproj && exit %%ERRORLEVEL%%
[workspace] $ cmd.exe /C C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\MSBuild.exe /t:rebuild D:\JenkinsInstall\jobs\ADDevelopmentPublishing\workspace\Web\ABC\ABC.csproj && exit %%ERRORLEVEL%%

The command prompt has been disabled by your administrator.

Press any key to continue . . . 
Build step 'Build a Visual Studio project or solution using MSBuild.' marked build as failure
Finished: FAILURE
------------------ 
```

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:29:18.093

此行： `The command prompt has been disabled by your administrator`表示您不允许在服务器上启动批处理指令。

# objective-c - NSString 编码和 javascript

> ID：10429244
> 
> 赞同：0
> 
> 时间：2012-05-03T10:09:02.973
> 
> 标签：objective-c, ios

我在我的 iOS 应用程序中使用 javascript，如下所示：

```
NSString *responseString = [self.controller stringByEvaluatingJavaScriptFromString:@"go();"];
NSLog(@"responseString"); 
```

在控制台中我有这个：

```
commonly0X0P+0220220220220220220220220220220220220referred                   1              0x0p+0s                 nan2ET2iring2egulations 
```

我想要的文字是：

```
commonly referred to as the IET Wiring Regulations 
```

我该如何解决这个问题？谢谢

# iphone - 如何移动 tablview 行？

> ID：10429245
> 
> 赞同：0
> 
> 时间：2012-05-03T10:09:05.577
> 
> 标签：iphone

我正在制作一个我想在其中移动行的应用程序。所以我可以通过

[self.tableList setEditing:YES 动画:YES];

其中“ **tableList** ”是我的表的名称，但是每当我运行此行时。我无法获取通常位于右侧用于移动单元格的移动图标，而是获取用于删除左侧行的图标单元格的一侧。

请帮助我移动我的手机并询问您是否需要澄清我的问题。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:27:53.830

您需要实现以下两种方法

```
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath {

    return YES;

}

    - (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)sourceIndexPath toIndexPath:(NSIndexPath *)destinationIndexPath {

    //do code according to your requirements of app
 //if you do not write ant thing in the method then also your row will be moved.
        NSString *stringToMove = [[self.dataArray objectAtIndex:sourceIndexPath.row] retain];
        [self.dataArray removeObjectAtIndex:sourceIndexPath.row];
        [self.dataArray insertObject:stringToMove atIndex:destinationIndexPath.row];
        [stringToMove release];
        [tableView reloadData];

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:10:31.663

使用 aple 的这个链接并向下滚动到苹果如何移动或滚动行。欢呼:)

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)

– beginUpdates – endUpdates – insertRowsAtIndexPaths:withRowAnimation: – deleteRowsAtIndexPaths:withRowAnimation: – moveRowAtIndexPath:toIndexPath: – insertSections:withRowAnimation: – deleteSections:withRowAnimation: – moveSection:toSection:

– scrollToRowAtIndexPath:atScrollPosition:animated: – scrollToNearestSelectedRowAtScrollPosition:animated:

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T10:21:01.973

使用这两种方法进行行移动

```
 - (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath*)indexPath
 - (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)sourceIndexPath toIndexPath:(NSIndexPath *)destinationIndexPath 
```

# database - CakePhp 多租户 - 单个数据库与多个数据库

> ID：10429256
> 
> 赞同：3
> 
> 时间：2012-05-03T10:09:57.183
> 
> 标签：database, cakephp, saas

我们正在开发一个可供多家公司使用的 CakePHP 应用程序。我们希望确保我们的应用程序的性能、可扩展性、代码可管理性和安全性。

我们当前的测试版为每个客户创建了一个新数据库。当一家新公司加入该站点时，我们运行一个 SQL 脚本来创建一个空白数据库。这有以下优点： - 更好的安全性（公司用户相互分离） - 我们可以通过子域设置数据库（IE：monkey.site.com，使用 site_monkey 数据库） - 单一代码库。- 由于数据分散在较小的数据库中，SQL 查询的性能通常非常好。

现在不幸的是，这有很多缺点 - 可管理性：必须在所有现有数据库中更改数据库 - 创建 SQL 脚本的方法很笨拙，不像我们希望的那样可靠 - 我们希望允许用户从主页登录（EG . www.site.com) 但我们目前不能这样做，因为子域决定了要使用的数据库。- 我们希望有一个中心位置来保存指标/客户使用情况。

因此，对于我们的应用程序的数据库结构的最佳解决方案，我们感到困惑/不确定。

目前我们看到三个选项： - 保留多个数据库设计 - 将所有公司合并到一个数据库中，并通过“companyId”识别每个公司 - 某种拆分模型，其中某些表在“核心数据库”中，而其他表在客户特定的数据库。

你们能否就您认为我们应该如何最好地做到这一点提供一些宝贵的建议？任何反馈/信息将不胜感激。

非常感谢，

kSeudo

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-05T04:53:46.223

只是我的建议：

我认为最好将与客户相关的数据保存在不同的数据库中，将与身份验证相关的数据保存在一个通用数据库中。因此，当用户登录时，您应该有一个用户所属域的条目并重定向到该域并访问相应的数据库和数据。

再次关注数据库的更改，您需要分别实现每个数据库中的更改。我认为这也有一些好处。一些客户可能会根据他们的流程要求进行一些更改。因此，如果您为不同的客户保留单独的数据库，则可以轻松管理。

# php - PDO 提取表不工作

> ID：10429258
> 
> 赞同：1
> 
> 时间：2012-05-03T10:10:09.070
> 
> 标签：php, sql, pdo

我正在尝试使用以下脚本从表中获取用户数据

```
//if session detected connect to database using pdo
$db = getConnection();

$user = getUser();

//qry the databse
$stmt = $db->prepare("SELECT * FROM saved_holidays WHERE subscriberID = :email");
$stmt->bindParam(":email", $user);

echo "<br></br>
    <table border='2' align='left' width='700'>
    <th align='left'>HolidayID</th>
    <th align='left'>SubscriberID</th>
    <th align='left'>Link</th>
    <th align='left'>Published</th>
    <th align='left'>Title</th>
    <th align='left'>Description</th>
    <th align='left'>Saved</th>
    <br></br>
    <br></br>";

while($obj = $stmt->fetchObject())

{
    echo "<tr><td>".$obj->holidayID."</td><td>".$obj->subcriberID."</td><td>".$obj->link."</td><td>".
    $obj->pubDate."</td><td>".$obj->title ."<td>".$obj->dateSaved."</td><br/>\n"."</td></tr>";
}

echo "</table>
    <br></br>
    <br></br>"; 
```

我没有收到任何错误消息，但也没有收到期望的输出。我得到的只是表格标题，做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:29:16.847

好吧，你不执行你的查询。

```
$stmt->execute(); 
```

准备好查询并绑定所有参数/值后，您需要执行查询。

# c# - 使用自动生成的 Poco 实体

> ID：10429259
> 
> 赞同：1
> 
> 时间：2012-05-03T10:10:21.660
> 
> 标签：c#, .net, entity-framework, poco

我正在开发一个 asp.net 应用程序，我有以下场景：

我有一个带有我的表的 edmx 文件，我从“添加代码生成项”创建了我的 Poco 实体，我的问题只是我应该在哪里添加我的自定义方法（例如，checkIfEmailExists、AddUser 等），因为如果我添加了它们在我的 poco 实体中运行自定义工具或更新我的 edmx 文件时，实体会重新生成并且我丢失了所有方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T10:13:46.873

您的实体应该与某些业务逻辑或安全性分开。您应该创建一个类，例如 Security，您将在其中实现那些依赖于您的实体的方法，但您不应该将它们直接添加到您的实体中。

您创建的每个类都应尝试遵循单一职责原则。即使您的实体类可能只包含公共属性，您也应该首先考虑 AddUser 或 CheckIfEmailExists 是否真的属于这些类。如果他们不属于那里，则将他们分成自己的班级。如果您有强烈的论据将这些东西放入您的实体中，那么将这些方法放入这些实体中。

再说一次，AddUser 做了什么？如果您有一个类/表用户和另一个类/表 UserDetails，您会将 AddUser 作为前一个类/表还是后者的一部分？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T10:13:22.003

生成的类是[部分](http://msdn.microsoft.com/en-us/library/wa80x488%28v=vs.80%29.aspx)的——它包含类的一部分。您可以在别处创建另一个文件，遵循命名（即命名空间和类名和`partial`关键字）。执行新的自动生成时，不会重写此文件。您将自定义代码放在这里。这些文件由编译器“合并”。

# php - 在 OSX 上执行本地 Web 请求的 Crontab

> ID：10429264
> 
> 赞同：0
> 
> 时间：2012-05-03T10:10:33.593
> 
> 标签：php, zend-framework, crontab

对于本地网络请求（即“http://localhost:8888/MyProject/quickstart/public/mycontroller”），我需要每 10 分钟执行一次 cronjob。

我使用 Zend Framework(PHP) 来创建 Web 项目。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:19:59.397

创建一个`crontab`条目（[http://benr75.com/pages/using_crontab_mac_os_x_unix_linux](http://benr75.com/pages/using_crontab_mac_os_x_unix_linux)）并使用`curl`（[http://curl.haxx.se/download.html#MacOSX](http://curl.haxx.se/download.html#MacOSX)）运行类似：

`curl http://localhost:8888/MyProject/quickstart/public/mycontroller`

# c# - 处理 ISession 之外的延迟加载？

> ID：10429268
> 
> 赞同：0
> 
> 时间：2012-05-03T10:10:54.610
> 
> 标签：c#, nhibernate

我正在使用 NHibernate 在我的应用程序中进行数据库访问。我`ISession`的 s 没有持久性，我对此很满意，因为它使我更容易将我的应用程序分成不同的层。唯一的困难是以一种很好的方式处理延迟加载。

我有一个看起来像这样的模型类：

```
public class User {
    public virtual int Id { get; set; }
    public virtual string Name { get; set; }
    public virtual Country CountryOfBirth { get; set }
    public virtual Country CountryOfResidence {get; set; }
} 
```

目前，我已经`CountryOfBirth`设置`CountryOfResidence`为`fetch="join"`. 但是，由于我的数据库中的国家列表大部分是静态的，我想缓存这些值。我将`CountryOfBirth`属性更改为如下所示：

```
 Country countryOfBirth;
    public virtual Country CountryOfBirth{
        get
        {
            if (country is INHibernateProxy)
                countryOfBirth = CountryRepository.GetById(countryOfBirth.Id);
            return countryOfBirth;
        }
        set { countryOfBirth = value; }
    } 
```

但是，它需要我的 Model 类知道 NHibernate 正在使用它，这会破坏封装。

有没有更好的方法来实现这一目标？例如，如果 NHibernate 尝试加载代理并且会话已过期，是否有办法让 NHibernate 自动通过我的 Repository 类？

还是我应该使用不同的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:16:44.717

如果您想添加缓存功能，请查看 NHibernate L2 Cache。查看本教程[http://nhforge.org/blogs/nhibernate/archive/2009/02/09/quickly-setting-up-and-using-nhibernate-s-second-level-cache.aspx](http://nhforge.org/blogs/nhibernate/archive/2009/02/09/quickly-setting-up-and-using-nhibernate-s-second-level-cache.aspx)并搜索此主题。通过使用缓存，您不会使用任何 NH 代理、存储库等来污染您的模型。

# dreamweaver - Dreamweaver 服务器端包含导致无效标记

> ID：10429269
> 
> 赞同：0
> 
> 时间：2012-05-03T10:10:59.913
> 
> 标签：dreamweaver, markup, server-side-includes

我是 Wed Design 的新手，使用 Dreamweaver CS5.5（和无限量的谷歌搜索）尝试为我工作的小型企业创建一个小型 Intranet 站点。我正在尝试创建一个“新闻”页面，新闻页面将在其中查找“News_Item.htm”。我的想法是营销人员可以用word创建一篇文章然后保存为htm，我的页面将查找文件并将其插入页面。所以我有一个名为 content 的文件夹，htm 文件就在里面。在我的代码中我插入

```
<!--#include file="content/Group_News_Item.htm" --> 
```

这有两个效果；1.将几个标签标记为“无效标记”标记无效，因为它是重叠或未公开的标签（我知道包含文件已经这样做了，因为如果我删除那行代码，错误就会消失）。2\. Group_News_Item.htm 中的 jpeg 不显示在浏览器中，尽管它应该去的地方有一个空格，并且伴随的文本确实显示了。如果我将 Group_News_item.htm 移动到根目录并修改包含文件，它会解决丢失的 Jpeg 但仍然存在 Invalid Markup 错误。
我非常愿意接受建议，如果有更好的方法来完成这项任务，也许我应该放弃这种方法？由于我缺乏经验，我想尽可能简单。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T03:27:41.603

确保您的 #include 不在 html 标签之外。

还有，你有服务器吗？

检查您是否启用了服务器端包含 (SSI)。

另一种方法是使用类似 php 的东西，它也是服务器端的，这将是这样的：

```
<?php

    include('content/Group_News_Item.htm');

?> 
```

为此，您必须在其中一台服务器上运行它，在您的计算机上测试服务器，如[WAMP（适用于 windows）](http://www.wampserver.com/en/)和[LAMP（适用于 linux）](http://sourceforge.net/projects/lampas/)或 linux webhosting

希望这可以帮助

# android - Android设置椭圆形按钮只能在图像上点击

> ID：10429271
> 
> 赞同：1
> 
> 时间：2012-05-03T10:11:05.497
> 
> 标签：android, android-imageview

我试图找到一种方法如何在椭圆形按钮上设置可点击区域。正如您在下面的图片中看到的那样，Android 将按钮的图像/背景放在正方形中，如果我想要一个椭圆形按钮并单击背景透明的正方形，我仍然按下蓝色按钮，而不是绿色按钮. 我需要能够将该正方形设置为椭圆形……甚至是其他形状，这样我`onClickListener`只能在按下图像时使用。

我希望我解释正确！谁知道如何实现这一目标？

![在此处输入图像描述](../Images/cc0dc5a0dce8036508af51f38c7655af.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:18:00.707

我会这样做：创建自己的视图；在 onTouch 检查坐标是否在您想要的区域中，如果是，请调用 onClickListener

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T10:24:22.000

我认为您需要将 android:background="@null" 放入您的 ImageView 标记中...或将该图像裁剪为椭圆形然后将其放入 Resource..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T10:14:54.043

我想如果你的椭圆形按钮的背景是透明的。

它可以实现。

# python - Django 和 SaaS + Ztask 用于后台任务

> ID：10429274
> 
> 赞同：1
> 
> 时间：2012-05-03T10:11:19.523
> 
> 标签：python, django, saas, zeromq

我之前问过一个关于如何使用 Django [Django 和 SaaS 创建 SaaS 应用程序的问题。如何为每个 Django 站点使用单独的数据库？](https://stackoverflow.com/questions/9500142/django-and-saas-how-to-use-separate-database-for-each-django-site)

现在，当用户为自己创建一个新实例时，我只需为他创建一个新的 settings.py 文件，并为他的子域创建一个 apache 配置。现在当一个用户试图访问他的实例时，他只能看到他自己的数据库，所以我们完全分离了数据。

现在，在拥有这些独立数据库的同时尝试执行后台进程时会出现问题。后台进程应该特定于每个仅作用于该实例数据的实例。ZTask 守护进程需要一个设置文件来启动。问题是我是否必须为每个 Django 实例启动一个单独的 ztaskd 进程？或者我可以为所有实例启动一次 ztaskd 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:21:45.780

`ztaskd`在特定 Django 实例的上下文中工作，因此您不能为多个 Django 实例共享一个 ZTask 守护进程。

您应该`ztaskd`使用其本地设置为每个 Django 实例运行。基本上开始使用

```
python manage.py ztaskd --settings=clients.site_settings & 
```

记住每个实例都没有冲突`ZTASKD_URL`。对于本地`ztaskd`

```
ZTASKD_URL = 'ipc:///tmp/%s_ztask.sock' % SITE_NAME 
```

正如[您先前问题的答案中](https://stackoverflow.com/a/9500200/60711)所建议的那样是个好主意。

# javascript - 修改函数以链接到下一篇和上一篇文章

> ID：10429275
> 
> 赞同：1
> 
> 时间：2012-05-03T10:11:22.410
> 
> 标签：javascript, blogger

我的博客网站上有一个 JavaScript 按钮，可将您带到随机帖子。它的代码如下。有没有办法更改此代码以将用户带到下一个或上一个帖子？

```
<span class="ranlink" id="myLuckyPost"></span> 
<script type="text/javascript">
function showLucky(root) {
    var feed = root.feed;
    var entries = feed.entry || [];
    var entry = feed.entry[0];
    for (var j = 0; j < entry.link.length; ++j) {
        if (entry.link[j].rel == 'alternate') {
            window.location = entry.link[j].href;
        }
    }
}
function fetchLuck(luck) {
    script = document.createElement('script');
    script.src = '/feeds/posts/summary?start-index=' + luck + '&max-results=1&alt=json-in-script&callback=showLucky';
    script.type = 'text/javascript';
    document.getElementsByTagName('head')[0].appendChild(script);
}
function feelingLucky(root) {
    var feed = root.feed;
    var total = parseInt(feed.openSearch$totalResults.$t, 10);
    var luckyNumber = Math.floor(Math.random() * total);
    luckyNumber++;
    a = document.createElement('a');
    a.id = 'navlink';
    a.href = '#random';
    a.rel = luckyNumber;
    a.onclick = function () {
        fetchLuck(this.rel);
    };
    a.innerHTML = 'Random Song';
    document.getElementById('myLuckyPost').appendChild(a);
}
</script>
<script src="/feeds/posts/summary?max-results=0&alt=json-in-script&callback=feelingLucky"></script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:17:42.127

我不确定您的 URL 模式。但根据你的脚本，它必须与luckyNumber有关：

```
var luckyNumber = Math.floor(Math.random() * total); 
```

因此，将此随机数更改为下一篇/上一篇文章的相应编号将解决您的问题。

# oracle - Oracle中没有时间的日期类型

> ID：10429276
> 
> 赞同：23
> 
> 时间：2012-05-03T10:11:23.627
> 
> 标签：oracle, datetime, date, oracle10g

在 Oracle 10g 中，我在表中使用`DATE`类型时遇到了问题。我只想要我的`DATE`现场商店`DATE`，没有时间自动。

有这么多的解决方案，我知道它喜欢使用`TO_CHAR`and `TO_DATE`or`TRUNC`但我面临着我正在使用如此多的程序来插入或更新数据并且没有时间更新所有这些。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-05-03T10:39:43.567

最好的解决方案是：

1.  从您的 DATE 列中删除所有时间 ( `update yourtable set yourdatecolumn = trunc(yourdatecolumn)`)

2.  通过使用在列上放置检查约束，确保所有未来日期不包含时间部分`check (yourdatecolumn = trunc(yourdatecolumn))`

3.  调整所有 INSERT 和 UPDATE 语句，或者 - 如果你幸运的话 - 调整你的 API，只插入 TRUNCed 日期。

最简单的解决方案是：

1.  （可选）从 DATE 列中删除所有时间。

2.  创建一个前行插入或更新数据库触发器，该触发器设置`:new.yourdatecolumn := trunc(:new.yourdatecolumn);`

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2013-10-03T09:40:14.077

我这样用

插入：`Insert into table (name_date) values(to_date(current_date,'dd/mm/yyyy'));` 更新：`update table set name_date=to_date(current_date,'dd/mm/yyyy') where id=1;`

就这样...

# javascript - 如何使用附加组件构建器通过附加组件跟踪页面的 HTTP 响应

> ID：10429278
> 
> 赞同：0
> 
> 时间：2012-05-03T10:11:33.007
> 
> 标签：javascript, firefox-addon-sdk, content-script

我想创建一个附加组件来跟踪每个页面的 HTTP 响应。如何在我的 contentscriptFile 中包含此代码。除此之外，我还想跟踪元标记。这可以通过使用来完成，`document.getElementsByTagName('meta');`但这给出了当前页面的mets标签，而不是打开的页面。我如何通过附加构建器实现此功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:41:03.340

这不是可以在内容脚本中完成的事情，它没有那种特权（而且它的寿命太短了）。您需要将该代码放入您的扩展文件中，例如`main.js`. 有关一般方法，请参阅[Get PostData as in FireBug](https://stackoverflow.com/questions/6168729/get-postdata-as-in-firebug/6250221#6250221)。您需要为该`http-on-examine-response`主题注册一个观察者，可以使用[`observer-service`包](https://addons.mozilla.org/en-US/developers/docs/sdk/1.6/packages/api-utils/observer-service.html)（注意：低级 API，您将在此处留下附加 SDK 支持的 API）。

# facebook - 脸书| 处理 Like 按钮的点击

> ID：10429279
> 
> 赞同：0
> 
> 时间：2012-05-03T10:11:35.827
> 
> 标签：facebook

我想处理用户对 Like 按钮的点击。我将生成的代码从[Like 按钮文档页面](https://developers.facebook.com/docs/reference/plugins/like/)复制到另一个 页面，但是每次单击 Like 按钮时，什么都没有发生。

我已阅读与此问题相关的所有问题，但没有任何效果。我知道这个问题已经被问过很多次了，但是这个问题让我发疯了。

我正在使用火狐。

这是我的完整 HTML：

```
<!doctype html>
<html xmlns:fb="http://ogp.me/ns/fb#">
<head>
    <meta charset="utf-8">
    <title>Facebook Like Button</title>
</head>
<body>
<div id="fb-root"></div>
<script>
    window.fbAsyncInit = function () {
        FB.init({
            appId: 'MY_APP_ID', // App ID
            status: true, // check login status
            cookie: true, // enable cookies to allow the server to access the session
            xfbml: true  // parse XFBML
        });

        FB.Event.subscribe('edge.create', function () {
            alert('Like button is clicked');
        });
    };

    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=MY_APP_ID";
        fjs.parentNode.insertBefore(js, fjs);
    } (document, 'script', 'facebook-jssdk'));
</script>

   <fb:like href="http://www.bluelink.ws/" send="true" layout="button_count" width="450" show_faces="true"></fb:like>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:03:57.423

您保留了示例中的 MY_APP_ID，这需要是实际的应用程序 ID，而不是示例中的文本字符串。

在 chrome/firefox 中打开 JS 控制台以监视错误/控制台消息也是值得的。

并检查您在 Facebook Linter 中喜欢的 URL：[https](https://developers.facebook.com/tools/debug) ://developers.facebook.com/tools/debug以检查您的网站 OG 标签

# php - 哪一个是好的mysql或csv来读取php中的数据

> ID：10429280
> 
> 赞同：1
> 
> 时间：2012-05-03T10:11:49.117
> 
> 标签：php, mysql, database, optimization, csv

我有两个选项可以通过 CSV 或 mySql 读取数据。数据太大，即有 30000 行。有人可以根据时间告诉我哪一个最好。我正在使用语言 PHP。请根据时间和数据大小的比较告诉我最好的。IE。

行数：mysql 读取时间：CSV 读取时间

**1000** : **.07 秒**: **.6 秒**

**30000** : **.123 秒**: **30 秒**

有人可以帮我根据行数决定哪一个最好。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:14:43.220

如果您的数据集非常大，我会推荐一个基于 MySQL 的表，并正确放置索引。将大大加快您的获取时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T10:16:13.153

我会选择 mysql，因为它有更多的好处，你以后想对数据做任何其他事情...... PHP 读取的大文件可能最终在内存中，所以不是你想要的......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T10:17:35.340

这完全取决于数据。如果你的数据有关系，MySQL 会表现得更好。而且您不必存储冗余数据。如果数据没有关系，您可以使用 csv。

我建议你在这两种情况下都使用 MySQL。因为它将提供更快的搜索和其他优化。即使您的数据是 csv 友好的，MySQL 也有 csv 引擎，您可以在其中存储 csv 数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T10:17:53.360

只是一个建议：我没有数字......

如果您总是读取整个行块，那么您不需要从结果集中过滤掉一些行，那么最好从 csv 文件中直接读取行。

您只访问文件系统。

带分贝。您已通过 tcp/ip 将查询发送到 DBMS，然后 DBMS 访问文件系统并再次通过 tcp/ip 发送结果...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T10:17:45.297

使用 php 时，mysql 总是更好。无论是数据库支持还是其他任何形式，都比较合适。所以你应该用mysql。

# asp.net - Internet Explorer 7,8,9 中的 Superfish sf-navbar 问题

> ID：10429290
> 
> 赞同：0
> 
> 时间：2012-05-03T10:12:44.673
> 
> 标签：asp.net, dotnetnuke

我正在为我的 DNN 网站使用 Superfish 菜单，并通过在 superfish.js 中使用 jquery 将 sf-navbar 作为 ul 类应用。我认为这不是包含它的正确方法！但是，我还在 menudef.xml 中定义了 superfish-navbar.css。

第二个问题是当菜单在任何浏览器中加载时，它会在几秒钟内显示白色作为菜单中每个 li 项目的边框。我无法弄清楚这个问题来自哪里。

这是我网站的链接：[www.siddharthkpandey.co.uk/museum/newdesign.aspx](http://www.siddharthkpandey.co.uk/museum/newdesign.aspx)和[www.siddharthkpandey.co.uk/museum/newdesign/generalpage.aspx](http://www.siddharthkpandey.co.uk/museum/newdesign/generalpage.aspx)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-11T11:22:03.250

在 superfish.css 的第 62 行，您遇到`.sf-menu a`了问题所在。

这就是我跟踪它的方式：

1.  打开镀铬
2.  [禁用 chrome 中的 javascript](http://productforums.google.com/forum/#!topic/chrome/iVovbbwnu5E)
3.  去[http://www.siddharthkpandey.co.uk/museum/newdesign.aspx](http://www.siddharthkpandey.co.uk/museum/newdesign.aspx)
4.  右键单击菜单中的任何项目，然后单击无检查元素。

修复此问题后再次启用 javascript。如果您需要更多帮助，请告诉我。

# c - Linux 上的调制解调器安全

> ID：10429295
> 
> 赞同：0
> 
> 时间：2012-05-03T10:13:21.177
> 
> 标签：c, linux

如何将 C 程序加载到 USB MODEM (micromax) 中，以便每当我将其连接到任何 PC 时，它都会首先在机器上执行我的程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:18:22.217

# google-maps-api-3 - fusiontable 表格格式

> ID：10429297
> 
> 赞同：0
> 
> 时间：2012-05-03T10:13:23.677
> 
> 标签：google-maps-api-3, google-fusion-tables

我有一个包含大约 5000 行的 Excel 表。我使用 JavaScript API 在我的网页中查看位置列。用户还可以使用 SQL API 从我的网页查询结果。现在我不仅想显示这些查询结果在地图中也作为我网页中的表格。怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:21:23.493

使用[可视化 API](https://developers.google.com/fusiontables/docs/samples/gviz_datatable)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T01:21:12.850

我相信 Visualization API 有 500 行的限制。另一种选择是使用 Fusion Table 的 JSONP 支持。我在这些 SO 答案中发布了一些示例代码：

[https://stackoverflow.com/a/10343112/1211981](https://stackoverflow.com/a/10343112/1211981)

[https://stackoverflow.com/a/9778985/1211981](https://stackoverflow.com/a/9778985/1211981)

**更新：**

这是一个示例链接，可让用户将 FT 下载为 CSV。它有点长，并且 URL 编码用于在网页中显示。

[https://www.google.com/fusiontables/api/query?sql=SELECT%20program,platform,observables,obs_url%20FROM%202796211%20WHERE%20%27program%27%20=%20%27NERACOOS%27%20and %20%27data_provider%27%20=%20%27LISICOS%27](https://www.google.com/fusiontables/api/query?sql=SELECT%20program,platform,observables,obs_url%20FROM%202796211%20WHERE%20%27program%27%20=%20%27NERACOOS%27%20and%20%27data_provider%27%20=%20%27LISICOS%27)

还有一些代码展示了如何做到这一点。假设您的 where 子句是正确的。

```
 var queryUrlHead = 'https://www.google.com/fusiontables/api/query?sql=';
    var qry = "SELECT * FROM " + table_id " WHERE " + where;

    var enc_qry = encodeURI(queryUrlHead + qry);

    var csv_link = '<a target="_new" href="' + enc_qry + '">Download as CSV</a><br />';
    // this is jQuery
    $("#csv_link").text('');
    $("#csv_link").append(csv_link); 
```

# svn - 从 SVN 结帐文件夹运行时，Umbraco 抛出 stackoverflow 异常

> ID：10429307
> 
> 赞同：2
> 
> 时间：2012-05-03T10:13:52.157
> 
> 标签：svn, umbraco, stack-overflow, umbraco5

这可能听起来很傻，但是我的 umbraco 5.1 应用程序（从 5.0 升级后）只是抛出一个 stackoverflow 异常，并在从签出文件夹运行时使 IIS/IIS express 崩溃（带有 svn 隐藏项）

但是当我进行 svn 导出（以避免 svn 结构）并从导出的文件夹（没有 svn 隐藏文件夹等）运行时，它就像一个魅力。umbraco 会以某种方式与 SVN 文件夹结构作斗争吗？

我正在使用 Visual Studio 2010 Ultimate、SQL 2008，使用 Nuget 将我的应用程序从 Umbraco 5.0x 升级到 5.1，并尝试在 WIndows 2003/windows7 环境中运行，结果相同。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:11:26.047

升级到 svn 1.7（[发行说明](http://tortoisesvn.net/tsvn_1.7_releasenotes.html)），并利用“集中元数据存储”（1.7 中的默认值），在所有子文件夹中没有任何 .svn 文件夹，只有一个大文件夹。

它是新标准，您不必与那些**该死的**隐藏文件夹作斗争

# css - 浏览器后退按钮在溢出中的命名锚上不起作用：可见 div

> ID：10429308
> 
> 赞同：1
> 
> 时间：2012-05-03T10:13:56.323
> 
> 标签：css, button, overflow, anchor, back

我已经命名了锚点，它们正确地引导了我，但是当我按下浏览器的后退按钮时，它并没有把我带到屏幕顶部。我已将问题缩小到 css overflow: auto in #divScreen css 部分。

HTML (pastebin): [http://pastebin.com/aRvtBzCt](http://pastebin.com/aRvtBzCt) CSS (pastebin): [http://pastebin.com/Qkkiz98x](http://pastebin.com/Qkkiz98x)

任何人都知道发生了什么，以及如何解决？该问题在所有主要浏览器（firefox、chrome、opera）中都存在。

HTML：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml">    <head>      <link href="index2.css" rel="stylesheet" type="text/css"/>  </head> <body>      <div id="divScreen">            <div id="divFAQ" class="cCommonDivs">                               <span id="spanFAQTitle" class="cPagesTitle">Frequently Asked Questions</span>               <p></p>             <div id="divFAQQuestions" class="cBigLinks">                    <ul>                        <li><a href="#aQ1b" id="aQ1h">Q1</a><br/></li>                      <li><a href="#aQ2b" id="aQ2h">Q2</a><br/></li>                      <li><a href="#aQ3b" id="aQ3h">Q3</a><br/></li>                      <li><a href="#aQ4b" id="aQ4h">Q4</a><br/></li>                  </ul>               </div>              <p></p><hr/>                <div id="divFAQAnswers" class="cPagesText">                 <a class="cQuestion" id="aQ1b">Q1</a><br/>                  <div id="divAns1">                  <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>                   <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>                   <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>                   <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>                   </div>                  <a class="cQuestion" name="aQ2b" id="aQ2b">Q2</a><br/>                  <div id="divAns2">                  <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>                   <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>                   <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>                   </div>                  <a class="cQuestion" name="aQ3b" id="aQ3b">Q3</a><br/>                  <div id="divAns3">                  <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>                   <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>                   <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>                   </div>                  <a class="cQuestion" name="aQ4b" id="aQ4b">Q4</a><br/>                  <div id="divAns4">                  <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>                   <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>                   <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>                   <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>                   </div>              </div>          </div>      </div>              </body></html> 
```

CSS：

```
@charset "utf-8";

#divScreen {
    position: absolute;
    left: 0%;
    top: 0%;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: #bbbbbb;
    visibility: visible;
}

.cCommonDivs {
    position: absolute;
    left: 10%;
    top: 100px;
    width: 80%;
    overflow: auto;
    background-color: #4D7094;
    border: 3px solid #D5E5FF;
    border-color: #000000;  
    padding: 10px;
    font-family: verdana,helvetica,arial,sans-serif;
    font-size: 10pt;
    font-weight: bold;
    color: #FFFFFF;
    cursor: default;
    margin-left: -20px;
}

.cBigLinks a {
    font-family: Tahoma, Geneva, sans-serif;
    font-size: 12pt;
    font-weight: bold;
    color: #000000;
    text-decoration: none;
}

.cBigLinks a:hover {
    color: #FFFF00;
}

.cPagesTitle {
    font-family: Verdana, Helvetica, Arial, sans-serif;
    font-size: 20pt;
    font-weight: normal;
    color: #FFFF00;
}

.cPagesText {
    font-family: Tahoma, Geneva, sans-serif;
    font-size: 12pt;
    font-weight: normal;
    color: #FFFFFF;
}

.cQuestion {
    font-family: Verdana, Helvetica, Arial, sans-serif;
    font-size: 12pt;    
    font-weight: bold;
    color: #000000;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:54:02.040

后退按钮根本不旨在恢复到可滚动 div 中同一文件中的旧位置。

如果您想点击链接并让后退按钮将您带到旧位置，您有两种解决方案：

*   链接到不同的页面并使用 javascript 滚动 div（基于 URL 参数）

*   更难（尤其是维护）但有趣：使用历史 API 操作浏览器历史记录（参见[https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en/DOM/Manipulating_the_browser_history)）。此解决方案通常用于动态加载某些内容的 ajax 应用程序。请小心，因为您会遇到浏览器兼容性限制。

# java - 单击Java中的表格行时未调用自定义比较器的比较方法

> ID：10429310
> 
> 赞同：0
> 
> 时间：2012-05-03T10:14:06.447
> 
> 标签：java, swing, jtable, comparator, tablerowsorter

我创建了自定义比较器来比较第一行的值，但从未调用过“比较”方法。

```
tableSorter = new TableRowSorter<TableModel>(myTable.getModel());
tableSorter.addRowSorterListener(this);
tableSorter.setComparator(0, new Comparator<MyEntry>() {
    @Override
    public int compare(MyEntry arg0, MyEntry arg1) {
        return compareMyColumn(arg0,arg1);
    }
    });                           

scanResoultTable.setRowSorter(tableSorter); 
```

# iphone - 如何根据我的特定时间 iOS SDK 更改图像

> ID：10429312
> 
> 赞同：1
> 
> 时间：2012-05-03T10:14:12.783
> 
> 标签：iphone, objective-c, avfoundation, avassetwriter

我创建了一个带有图像数组的电影并将其保存到我的照片库中。

当我播放电影时，我的所有图像都会同时出现，这意味着如果在我的电影中保存了 10 张图像，当我开始播放电影时，我所有的 10 张图像都会在一秒钟内出现，但歌曲会继续播放。

这里我的问题是我想滑动我的图像，如：

前 3 秒第一张图片，接下来 3 秒 2 张图片

如何使用 AVMutableCompositionTrack 或其他东西创建该类型的电影。

我的示例代码是：

```
 CMTime nextClipStartTime = kCMTimeZero;

AVURLAsset* videoAsset = [[AVURLAsset alloc]initWithURL:video_inputFileUrl options:nil];
CMTimeRange video_timeRange = CMTimeRangeMake(kCMTimeZero,videoAsset.duration);
AVMutableCompositionTrack *a_compositionVideoTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeVideo preferredTrackID:kCMPersistentTrackID_Invalid];
//NSArray *myarray1 = [videoAsset tracksWithMediaType:AVMediaTypeVideo] ;
[a_compositionVideoTrack insertTimeRange:video_timeRange ofTrack:[[videoAsset tracksWithMediaType:AVMediaTypeVideo] objectAtIndex:0] atTime:nextClipStartTime error:nil];

//nextClipStartTime = CMTimeAdd(nextClipStartTime, a_timeRange.duration);

AVURLAsset* audioAsset = [[AVURLAsset alloc]initWithURL:audio_inputFileUrl options:nil];
CMTimeRange audio_timeRange = CMTimeRangeMake(kCMTimeZero, audioAsset.duration);
AVMutableCompositionTrack *b_compositionAudioTrack = [mixComposition addMutableTrackWithMediaType:AVMediaTypeAudio preferredTrackID:kCMPersistentTrackID_Invalid];
[b_compositionAudioTrack insertTimeRange:audio_timeRange ofTrack:[[audioAsset tracksWithMediaType:AVMediaTypeAudio] objectAtIndex:0] atTime:nextClipStartTime error:nil]; 
```

# c# - 从后台工作人员检索 GUI 数据

> ID：10429316
> 
> 赞同：0
> 
> 时间：2012-05-03T10:14:30.800
> 
> 标签：c#, backgroundworker

我有一个需要抓取的后台工作人员`comboBox1.SelectedItem`，但是它在不同的线程上，因此我无法“到达”GUI（因为 GUI 在主线程上）。

我该怎么做？

我尝试过使用委托，但这似乎不起作用。

```
private delegate string ReadComboDelegate(ComboBox c);

private string ReadComboBox(ComboBox c)
{
    if(c.InvokeRequired)
    {
        ReadComboDelegate del = new ReadComboDelegate(this.ReadComboBox);
        return (string) c.Invoke(del,c);
    }
    else
    {
        return c.Text;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:17:31.673

理想情况下，您应该将 SelectedItem（以及您可能需要的任何其他数据）传递给表示后台工作人员的方法。

如果那不可能，那么您可以使用**comboBox1.Invoke**方法与 UI 线程进行通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:50:41.357

您可以在 ReportProgress 调用期间读取组合框。

# c# - 下拉列表选择的值不起作用

> ID：10429322
> 
> 赞同：11
> 
> 时间：2012-05-03T10:14:49.973
> 
> 标签：c#, asp.net, drop-down-menu, selectedvalue

在我的 ASP.NET 项目中。我有两个下拉列表和一个复选框。选中复选框时， 的选定值`DropDownList1`必须与 的选定值相同`DropDownList2`。但`DropDownList1.SelectedValue`它不起作用。

这是我的代码：

```
protected void chkSameBAddress_CheckedChanged(object sender, EventArgs e)
{
    try
    {
        if (this.chkSameBAddress.Checked == true)
        {

          this.txtcSAddress1.Text=  this.txtcBAddress1.Text;
          this.txtcSAddress2.Text = this.txtcBAddress2.Text;
          this.txtcSAddress3.Text = this.txtcBAddress3.Text;
          this.txtcSAddress4.Text = this.txtcBAddress4.Text;
          this.txtcSCity.Text = this.txtcBCity.Text;
          this.txtcSPostCode.Text = this.txtcBPostCode.Text;
          this.txtcSState.Text = this.txtcBState.Text;

          this.ddlcSCountry.Items.FindByValue(ddlcBCountry.SelectedItem.Value).Selected = true;

        }

    }
    catch (Exception ex)
    {
        logger.Error(ex.Message);
        throw;

    }
} 
```

如上例所示，如果选中**chkSmaeBAddress ，则****ddlcSCountry**的选定值必须与**ddlcBCountry**选定的值相同。

 *** * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-05-03T11:52:46.853

您在哪里将数据绑定到这些下拉列表控件？它们应该只在页面的初始加载时绑定，如下所示。我怀疑您在每次页面加载时都绑定了它们，因此选定的值会消失。

```
protected void Page_Load(object sender, EventArgs e)
{

    if (!Page.IsPostBack)
    {
        //Please check if you are binding checkbox controls here. 
        //If not bring them in here
    }
} 
```

其他条件是 ddlcSCountry 和 ddlcBCountry 应该具有相同的值才能进行选择。否则`ddlcSCountry.Items.FindByValue(ddlcBCountry.SelectedItem.Value)`将为 null 并在尝试设置 Selected 属性时抛出错误

如果上述两个条件都可以，您的代码应该可以工作。

**编辑**对不起，我的注释代码应该是检查下拉列表控件的绑定而不是复选框。所以应该是

```
//Please check if you are binding both dropdown list controls here. 
//If not bind them within the if (!Page.IsPostBack) 
```

`if (this.chkSameBAddress.Checked == true)`在您的行中放置一个断点`CheckedChanged event`并查看它正在执行，然后运行时值...

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-01T03:57:19.773

公认的解决方案是最常见原因的明显解决方案，但是，还有一个更令人惊讶的问题可能导致此问题！

我的列表值来自数据库，并且这些值具有数据库值的换行符和回车符：`\r\n`. 这些值看起来像一个无辜的空间，但实际上它们不是！

我的解决方案是删除这些隐藏的 Char 值。希望能帮助到你。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T10:30:58.643

您确定要使下拉框相等吗？

利用

```
ddlcSCountry.SelectedIndex = ddlcSCountry.FindStringExact(ddlcBCountry.Text); 
```

这将选择列表中的匹配选项，而不仅仅是在字段中设置文本，当您的文本选项具有基础值时，这非常有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T10:30:12.733

确保将`chkSameBAddress.AutoPostBack`其设置为 true。如果已设置但仍无法正常工作，请考虑使用[UpdatePanel](http://msdn.microsoft.com/en-us/library/bb386454.aspx)控件或使用 JavaScript 将该逻辑移至客户端。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T10:20:04.490

试试这个选择

```
ddlcSCountry.Text=ddlcBCountry.SelectedItem.Value; 
```

它将选择需要的项目

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-18T22:53:51.120

确保在 DropDownList 的属性中将 AutoPostBack 设置为 true。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-22T02:12:42.057

我只是切换到使用`<select runat="server" id="test1"></Select>` 我只需要对后面的代码进行轻微修改，一切都会更好。**

# c# - 从 Linq To Sql 对象获取字段名称

> ID：10429324
> 
> 赞同：1
> 
> 时间：2012-05-03T10:14:50.270
> 
> 标签：c#, linq

我有一个 Linq 表达式，我想将它插入到 ADO.NET 数据表中。我想知道查询中的字段名称，以便设置数据表名称。这是我的代码示例：

```
var result=from item in context.table
           select new{
                field1=... ,
                field2=... ,
                field3=...
           }; 
```

我想做的是设置表名。

```
Datatable.Columns.Add("field1"); .. etc 
```

我尝试手动完成，但我相信应该有一个优雅的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T11:01:18.190

我的建议：

```
var result=from item in context.table
           select new{
                field1=... ,
                field2=... ,
                field3=...
           };

static IEnumerable<string> GetPropertyNames<T>(IEnumberable<T> lst) 
{
  foreach (var pi in typeof(T).GetProperties())
  {
    yield return pi.Name;
  }
}

var propnames = GetPropertyNames(result); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-28T07:51:06.477

这可能更简单一些;) ...

```
var fieldNames = (from p in query.GetType().GetProperties() select p.Name).ToArray(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-03T10:18:05.183

通过使用反射，您可以提取在 LINQ 表达式中创建的匿名类型的属性名称。

```
var result = from item in context.table
    select new {
         field1 = ... ,
         field2 = ... ,
         field3 = ... };

if (result.Any())
{
    Type t = result.First().GetType();
    foreach (PropertyInfo p in t.GetProperties())
    {
        // Get the name of the prperty
        Console.WriteLine(p.Name);
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T10:31:50.340

因为`select new`创建了一个匿名类型，所以我知道没有一个简短的优雅解决方案，但你可以做你想做的事。这里的想法是，您将获取查询返回的第一项，并使用匿名类型的类型信息，我们可以反映其属性并填充您的`DataTable`.

我们可以使用以下方法执行此操作，该方法采用 a`DataTable`和`Type`匿名类型的信息。

```
public static void FillColumns(DataTable table, Type anonymousType) {
    PropertyInfo[] properties = anonymousType.GetProperties();

    foreach (PropertyInfo property in properties) {
        table.Columns.Add(property.Name);
    }
} 
```

然后例如你可以做这样的事情

```
var result = from item in context.Table
            select new {
                field1 = item.f1,
                field2 = item.f2,
                field3 = item.f3
            };

if (result.Count() != 0) {
    DataTable table = new DataTable("Table");
    FillColumns(table, result.First().GetType());
} 
```

`DataTable`在这个简短的示例中，您将产生 3 列`field1`、`field2`和`field3`。
**编辑**已经投入时间，所以不妨发布完整的工作示例。

```
namespace ConsoleApplication1
{
    using System;
    using System.Collections.Generic;
    using System.Data;
    using System.Diagnostics;
    using System.Linq;
    using System.Reflection;

    #region Fake Database

    internal class DatabaseMock
    {
        private DatabaseMock() { 
            // Hides the default public constructor created by the compiler
            // Uses the factory pattern for creation instead
        }

        /// <summary>
        /// Creates a new instance of a database with three default items
        /// </summary>
        public static DatabaseMock Create() {
            DatabaseMock database = new DatabaseMock();

            List<ItemMock> items = new List<ItemMock>();
            items.Add(new ItemMock("item1"));
            items.Add(new ItemMock("item2"));
            items.Add(new ItemMock("item3"));

            database.Table = items;

            return database;
        }

        /// <summary>
        /// Gets the items in the database
        /// </summary>
        public IEnumerable<ItemMock> Table {
            get;
            private set;
        }
    }

    internal struct ItemMock
    {
        /// <summary>
        /// Initializes a new instance of the ItemMock class
        /// </summary>
        public ItemMock(string value) {
            _value = value;
        }

        private string _value;
        /// <summary>
        /// Gets the items value
        /// </summary>
        public string Value {
            get {
                return _value;
            }
        }
    }

    #endregion

    static class Program
    {
        /// <summary>
        /// Takes the specified DataTable and anonymous type information, and populates the table with a new DataColumn per anonymous type property
        /// </summary>
        public static void FillColumns(DataTable table, Type anonymousType) {
            PropertyInfo[] properties = anonymousType.GetProperties();

            foreach (PropertyInfo property in properties) {
                table.Columns.Add(property.Name);
            }
        }

        static void Main() {
            DatabaseMock database = DatabaseMock.Create();

            var query =
                from item in database.Table
                select new {
                    field1 = item.Value,
                    field2 = item.Value,
                    field3 = item.Value
                };

            if (query.Count() != 0) {
                DataTable table = new DataTable("Table");
                FillColumns(table, query.First().GetType());

#if DEBUG
                foreach (DataColumn column in table.Columns) {
                    Debug.WriteLine(column.ColumnName);
                }
#endif
            }
        }
    }
} 
```

# php - Apache Server mod_rewrite 开启时在 PHP 中解析 $_SERVER['REQUEST_URI'] 时出错

> ID：10429328
> 
> 赞同：1
> 
> 时间：2012-05-03T10:15:10.850
> 
> 标签：php, apache, mod-rewrite, request, uri

我正在尝试使用 Apache 的 mod_rewrite 来创建更好的 URL。我将所有内容重定向到单个 index.php 页面，解析 $_SERVER['REQUEST_URI'] 然后包含适当的页面。

RewriteRule 的代码如下：

```
Options +FollowSymLinks
RewriteEngine on
RewriteRule \b.*\b index.php 
```

我做了一个 url 类来处理 url 操作，里面有这个函数来获取 URL：

```
public function get_url(){
    $url = strtolower($_SERVER['REQUEST_URI']);
    $url = explode("/", $url);
    array_shift($url);
    print_r($url);
    return $url;
} 
```

它可以工作，但是有一个问题：当有 / 字符时，explode 函数会导致最后一个数组索引为空，这让我很困扰，并且在包含正确的页面时使事情变得更加复杂。这应该很容易解决，进行一些廉价的操作，例如：

```
$url = trim(str_replace(" ", "/", $url));
$url = explode(" ", $url); 
```

但是，每当我尝试以除上面所写之外的任何方式更改 $url 变量（它是 $_SERVER['REQUEST_URI'] 的副本）时，都会收到此错误：

> 页面未正确重定向
> 
> Firefox 检测到服务器正在以永远不会完成的方式重定向对该地址的请求。
> 
> 此问题有时可能是由禁用或拒绝接受 cookie 引起的。

我的猜测是 $_SERVER['REQUEST_URI'] 以某种方式通过引用传递，当我尝试操作字符串时，Apache 服务器找不到匹配项并且变得很糟糕，但我不知道为什么会发生这种情况（或者为什么用 / 分隔符爆炸是可以的，但将 / 字符更改为空格然后爆炸不是），或者更重要的是，如何修复它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:33:47.343

您遇到的问题根本与您的 PHP 无关。

您只需告诉 apache 一次又一次地重写该请求，这将导致您发布的 Firefox 声明。

为了避免在 index.php 已经解决时重写，您必须添加一个条件：

```
RewriteCond %{REQUEST_URI} ^!(index\.php.*)
RewriteRule \b.*\b index.php 
```

这样，该规则仅适用于 URI 不以“index.php”开头并且因此尚未被重写的情况

问候，

斯蒂芬

# struts - 为什么我们要在 STRUTS 的 Action 类中将 ActionForm 对象类型转换为我们的 java form bean 类？

> ID：10429330
> 
> 赞同：0
> 
> 时间：2012-05-03T10:15:27.447
> 
> 标签：struts, struts-1

我所知道的：我们创建的 actionformbean 是 ActionForm 的子类

现在假设我们创建... Struts action form bean: productbean.java Struts action class: productaction.java

在 productaction.java 的`execute()`方法中：- 我做了

```
{
productbean p1 = new productbean();
String n =p1.getName();   // calling the getter, that returns the product name 
} 
```

但是 n 为空，当写入数据库时

使用这个 in`execute`方法一切正常：

```
{
productbean p1 = (productbean)form; // downcasting of ActionForm object
String n = p1.getName(); 
} 
```

我的问题是，如果 actionclass 和 formbean 在同一个包中，为什么我们不能只创建一个 formbean 的对象并在 actionclass 中调用它的 getter 函数？为什么需要向下转换 ActionForm 对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:32:24.520

因为如果您创建一个新的 ProductBean 实例并从这个新实例中获取名称，您将始终获取 name 属性的默认值（通常为 null），而不是从`name`请求参数中提取的值，存储到 ProductBean Struts 创建并传递给`execute()`您的操作方法的实例。

当您的操作收到请求时，Struts 实例化表单 bean，用请求参数填充它，并使用表单 bean 调用您的操作。如果您创建另一个表单 bean 实例，它不会神奇地填充请求参数。

您正在执行的操作类似于以下内容：

*   请某人（Struts）在一张纸上写下他们的名字并给你这张纸
*   拿另一张白纸，阅读这张白纸上写的内容，并惊讶于没有找到 Struts 写的名字。

# java - 获取当前一周的所有天数？

> ID：10429331
> 
> 赞同：7
> 
> 时间：2012-05-03T10:15:31.283
> 
> 标签：java

我需要根据作为参数发送的哪一天来获取一周中所有天数（周一到周日）。

例如，
我经过 5 月 2 日，我得到一个数组 [30,1,2,3,4,5,6] 实际上是本周。
或者，我通过 5 月 16 日，我得到一个数组 [14,15,16,17,18,19,20]。

我尝试使用此代码，但它从今天起 7 天返回，这是我不想要的。

```
 //get which week of month
        Calendar now = Calendar.getInstance();
        now.set(mYear, mMonth, Integer.parseInt(extractedDay));
        int weekOfMonth = now.get(Calendar.WEEK_OF_MONTH);

        //get all days of clicked week
        SimpleDateFormat format = new SimpleDateFormat("MM/dd/yyyy");
        Calendar calendar = Calendar.getInstance();
        calendar.setFirstDayOfWeek(Calendar.MONDAY);
        calendar.set(mYear, mMonth, Integer.parseInt(extractedDay));

        String[] days = new String[7];
        for (int i = 0; i < 7; i++)
        {
            days[i] = format.format(calendar.getTime());
            calendar.add(Calendar.DAY_OF_MONTH, 1);
        } 
```

但这不是我需要的。我需要通过今天（星期四）并获得 5 月这一周的日期 - 4 月 30 日星期一到 5 月 6 日星期日。

**编辑**

我意识到我有一个代码可以检测一个月中的哪一周。有没有办法使用这些数据并设置星期一的日期？例如，我通过了 5 月 16 日，然后我检测到它是 5 月的第 3 周，并且我将变量`firstDayOfWeek`（一个新变量）设置为 5 月 14 日。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-03T10:46:32.823

您必须首先减去您选择的工作日，以便从一周的第一天开始。试试下面的代码：

```
public static void main(String[] args){
    Calendar now = Calendar.getInstance();

    SimpleDateFormat format = new SimpleDateFormat("MM/dd/yyyy");

    String[] days = new String[7];
    int delta = -now.get(GregorianCalendar.DAY_OF_WEEK) + 2; //add 2 if your week start on monday
    now.add(Calendar.DAY_OF_MONTH, delta );
    for (int i = 0; i < 7; i++)
    {
        days[i] = format.format(now.getTime());
        now.add(Calendar.DAY_OF_MONTH, 1);
    }
    System.out.println(Arrays.toString(days));

} 
```

今天，它输出：

[04/30/2012, 05/01/2012, 05/02/2012, 05/03/2012, 05/04/2012, 05/05/2012, 05/06/2012]

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-03T11:15:12.580

你的问题已经回答了，但我想补充一点。您的代码在两个方面存在问题：

1.  它使用各种数据类型作为初始日期（`mYear`is`int`和`exactDay`is `String`?）。
2.  它混合了结果的解析、格式化和生成。

这使您很难测试代码！

因此，我提出了一种不同的方法：

```
public class DaysOfCurrentWeek {
    public static void main(String[] args) {
        Date refDate = new Date();

        Date[] days = getDaysOfWeek(refDate, Calendar.getInstance().getFirstDayOfWeek());

        for (Date day : days) {
            System.out.println(day);
        }
    }

    private static Date[] getDaysOfWeek(Date refDate, int firstDayOfWeek) {
        Calendar calendar = Calendar.getInstance();
        calendar.setTime(refDate);
        calendar.set(Calendar.DAY_OF_WEEK, firstDayOfWeek);
        Date[] daysOfWeek = new Date[7];
        for (int i = 0; i < 7; i++) {
            daysOfWeek[i] = calendar.getTime();
            calendar.add(Calendar.DAY_OF_MONTH, 1);
        }
        return daysOfWeek;
    }
} 
```

代码是这样工作的：

1.  创建一个参考日期（在本例中仅使用`new Date()`）。
2.  打电话`getDaysOfWeek()`去做“肮脏的工作”。通过传递，`firstDayOfWeek`您可以自由选择`MONDAY`或`SUNDAY`作为一周的开始。在这个例子中，我只使用默认的日历。
3.  返回结果 - 未格式化，并作为`Date`. 这样，您可以让调用代码决定要做什么——打印它或做一些进一步的计算。

现在您可以简单地测试 getDaysOfWeek() 方法，而无需担心格式或参考日期是如何创建的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T10:26:16.550

您将需要在当前代码的某处使用这行代码：

```
calendar.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY); 
```

它至少应该在 for 循环之前。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T10:41:05.343

您需要在设置日期**后**设置日期

`calendar.set(mYear, mMonth, Integer.parseInt(extractedDay));` `calendar.set(Calendar.DAY_OF_WEEK, Calendar.MONDAY);`

# rest - 我可以使用 REST 服务来填充计算的 使用 SSJS 控制？

> ID：10429332
> 
> 赞同：2
> 
> 时间：2012-05-03T10:15:34.577
> 
> 标签：rest, xpages, xpages-ssjs

在 Xpage 上，我有这个组合框，它使用经典的 SSJS`@DbColumn`调用获取其值。但是，数据量有可能超过`@DbColumn`. 所以也许 REST 服务可能是我的解决方案，不是吗？

我发现了许多 CSJS 示例（重定向以显示 JSON 树，或使用客户端的 dojoStore），但没有一个示例会调用 REST 服务并使用 SSJS 代码在服务器上直接使用其 JSON 响应。这是无法做到的事情，还是如此简单以至于没有人费心举个例子？或者我可能完全偏离了我的 RESTful 想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T14:15:05.927

我同意 MarkyRoden 的观点，但只是为了给您提供@DbColumn() 的替代方案，您可以改用 SSJS。然后你不会得到“无限”的结果：

```
var lookupView:NotesView = database.getView("<LOOKUPVIEW>");
lookupView.getColumnValues(0) 
```

这相当于

```
@DbColumn( "","<LOOKUPVIEW>", 1 ); 
```

但会给你带来没有限制的完整结果。

希望这有助于
斯文

# android - 自定义视图显示在屏幕中央

> ID：10429333
> 
> 赞同：3
> 
> 时间：2012-05-03T10:15:36.573
> 
> 标签：android

我写了一个自定义视图类。

我已经在 Main Layout xml 上实现了自定义视图。并使用以下代码设置屏幕中心的参数

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
     android:background="@drawable/cs_background"
     android:id="@+id/layout"
     >

   <com.drawings.DrawingView
            android:id="@+id/drawingview"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_centerInParent="true"  
            /> 

 </RelativeLayout> 
```

在图形布局中，它正确显示在中心位置。但是当我在模拟器上执行时，它显示在左上角。

我尝试使用以下代码更改以编程方式实现布局。

```
RelativeLayout layout = new RelativeLayout(this);
        DrawingView  myView = new DrawingView(this);
        RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT, RelativeLayout.LayoutParams.WRAP_CONTENT);
        params.addRule(RelativeLayout.CENTER_IN_PARENT, RelativeLayout.TRUE);
        layout.addView(myView,params);
        setContentView(linearLayout); 
```

但它仍然显示在左上去核器上。

我的绘图视图类是，

```
import android.content.Context;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Path;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.view.View;

public class DrawingView extends View
{
    Context context;
    private Path mPath; 
    private Bitmap backgound;
    private Paint mPaint;
    private float mX,mY;

    private static final float TOUCH_TOLERANCE =4;

    public DrawingView(Context c)
    {
        super(c);
        context         = c;
        init();
    }
    public DrawingView (Context c, AttributeSet as)
    {
        super(c,as);
        context         = c;
        init();
    }

    private void init() 
    {
        mPath       = new Path();
        mPaint      = new Paint();
        mPaint.setAntiAlias(true);
        mPaint.setDither(true);
        mPaint.setColor(0xFFFF0000);
        mPaint.setStyle(Paint.Style.STROKE);
        mPaint.setStrokeJoin(Paint.Join.ROUND);
        mPaint.setStrokeCap(Paint.Cap.ROUND);
        mPaint.setStrokeWidth(12);
        backgound   = BitmapFactory.decodeResource(context.getResources(), R.drawable.cs_one);
    }

    @Override
    protected void onDraw(Canvas canvas) 
    {
        canvas.drawBitmap(backgound, 0, 0, null);
        if(!mPath.isEmpty())
            canvas.drawPath(mPath, mPaint);

        invalidate();
    }

    private void touch_start(float x, float y) 
    {
        mPath.moveTo(x, y);

    }
    private void touch_move(float x, float y) 
    {
        float dx = Math.abs(x - mX);
        float dy = Math.abs(y - mY);

        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE)
        {
            mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
        }
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) 
    {
        float x = event.getX();
        float y = event.getY();

        switch (event.getAction()) {
        case MotionEvent.ACTION_DOWN:
            touch_start(x, y);
            break;
        case MotionEvent.ACTION_MOVE:
            touch_move(x, y);
            break;
        case MotionEvent.ACTION_UP:
//          touch_up();
            break;
        }
        invalidate();
        return true;

    }

} 
```

问题是什么？以及如何在屏幕中央显示自定义视图。?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T10:33:31.610

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {

    this.setMeasuredDimension(backgound.getWidth(), backgound.getHeight());
} 
```

实施 onMeasure(int,int)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:57:58.130

更改

```
 RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.WRAP_CONTENT,
RelativeLayout.LayoutParams.WRAP_CONTENT); 
```

至

```
RelativeLayout.LayoutParams params = new RelativeLayout.LayoutParams(RelativeLayout.LayoutParams.FILL_PARENT,
RelativeLayout.LayoutParams.FILL_PARENT); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-30T14:54:34.160

您应该在自定义 View 类中实现

```
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) 
```

**在其中，您应该计算自定义视图的高度和宽度。如果您需要将自定义视图集中在父布局中 - 请确保：**

*   自定义视图高度！=父视图高度

和/或

*   自定义视图宽度！=父视图宽度

例如：

```
@Override
    protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {

        super.onMeasure(widthMeasureSpec, heightMeasureSpec);

        final int height = mCircleRadius * 2; //calculated
        final int width = getMeasuredWidth(); //parent width

        setMeasuredDimension(width, height);
    } 
```

现在您可以将 next 用于您的自定义视图：

```
android:layout_centerHorizontal="true"
android:layout_centerVertical="true" 
```

[![在此处输入图像描述](../Images/77c5856b48a2df68b8d843df83610971.png)](https://i.stack.imgur.com/7Ivh0.png)

PS你看，`android:layout_centerHorizontal="true"`没有效果。原因是在**onMeasure中使用****父宽度**而不是计算精确宽度。

# android - 如何将背景图像添加到 flex android 应用程序？

> ID：10429334
> 
> 赞同：0
> 
> 时间：2012-05-03T10:15:44.263
> 
> 标签：android, apache-flex

如何添加背景图片？我只是绑定到如下代码：

```
.bg{
backgroundImage:Embed(source="../../assets/Interaction-Screen_BG_pump.png");
}

<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
        xmlns:s="library://ns.adobe.com/flex/spark"
        actionBarVisible="true" enterFrame="view1_enterFrameHandler(event)"
        initialize="view1_initializeHandler(event)" menuKeyPressed="onMenu(event)"
        overlayControls="false" tabBarVisible="true" title="Interact"
                styleName="bg"
> 
```

但它不起作用。

还有，如何创建一个图像按钮？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T10:34:58.640

要将背景图像添加到 Flex 移动视图或应用程序，首先创建您的皮肤类（我们称之为“ViewBackgroundSkin.mxml”）：

```
<?xml version="1.0" encoding="utf-8"?>
<s:Skin xmlns:fx="http://ns.adobe.com/mxml/2009" 
    xmlns:s="library://ns.adobe.com/flex/spark">

<fx:Metadata>
    [HostComponent("spark.components.View")]
</fx:Metadata>

<s:states>
    <s:State name="disabled" />
    <s:State name="normal" />
</s:states>

<s:Rect id="backgroundRect" left="0" right="0" top="0" bottom="0"  >
    <s:fill>
        <s:BitmapFill source="@Embed('assets/images/BackgroundImage.png')"/>
    </s:fill>
</s:Rect>

<s:Group id="contentGroup" width="100%" height="100%" minWidth="0" minHeight="0" /> 
```

如果您希望图像平铺背景，请将 fillMode 设置为在 BitmapFill 上重复：

```
 <s:BitmapFill source="@Embed('assets/images/BackgroundImage.png')" fillMode="repeat" /> 
```

在您的 css 文件（我们称之为 MyStyle.css）中引用您的皮肤类：

```
s|View
{   
    skinClass: ClassReference("ViewBackgroundSkin");
} 
```

在您的视图中，将样式源设置为您的 css 文件：

```
<fx:Style source="MyStyle.css"/> 
```

或将样式添加到您的应用程序文件以设置整个应用程序的背景。

# tfs - TFS 2010 源代码控制权限历史\“更改者”

> ID：10429335
> 
> 赞同：2
> 
> 时间：2012-05-03T10:15:47.977
> 
> 标签：tfs

TFS 中是否有办法获取源代码控制中对象的*权限历史记录？*或者提取更改这些权限的个人的日志。

恰当的例子...我在 SDLC 的不同时期通过删除签入权限将用户锁定在某些源代码控制区域之外。只有少数 TFS 管理员有权管理源代码控制中对象的权限。不知何故，有些人正在获得对这些锁定对象的权限……有人正在添加他们的用户帐户。

我的 TFS 管理员都没有声称已经更改了权限……所以我要么有一个不拥有它的管理员……要么是其他类型的安全问题。

我需要能够审核权限历史记录，以查看谁更改了权限以及何时更改。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T16:09:18.667

目前 TFS 不保留安全更改日志。这是我们积压的东西。我建议您访问[TFS 用户语音网站](http://visualstudio.uservoice.com/forums/121579-visual-studio/category/30925-team-foundation-server)并投票支持此功能。

作为一种解决方法，您可以创建一个名为“almost-admins”的新组，然后授予该组除管理权限之外的所有权限。然后，您可以将除您自己以外的所有人移出管理员组并进入新的“几乎管理员”组。

# layout - RazorEngine - 使用布局和 Html.Raw

> ID：10429337
> 
> 赞同：7
> 
> 时间：2012-05-03T10:15:51.113
> 
> 标签：layout, razor, html-helper, razorengine

我想将以下 Razor 模板与[RazorEngine](https://github.com/Antaris/RazorEngine)一起使用：

```
@{
    Layout = null;
}

@Html.Raw(MyNamespace.MyClass.SomePropertyWithHtml) 
```

当我调用它时，我得到 2 个错误 - 一个抱怨它无法处理布局，另一个抱怨它不知道如何处理 Html 帮助程序。

这里还有其他问题和答案表明这在 v3 中是可能的，我正在使用 NuGet 上的当前包 - v3.0.8 - 但目前尚不清楚这是如何完成的。目前我这样称呼它：

```
string html = RazorEngine.Razor.Parse(File.ReadAllText(path)); 
```

其他答案建议首先使用 Razor.SetBaseTemplate，它不会出现在当前源代码或 git 上的 3.0 分支中。查看代码我看到引用布局和部分的代码，但布局代码似乎依赖于按名称解析模板，而我正在尝试做的甚至不需要解析模板 - 我只需要它来应对布局 = null。该代码还包括一个 MvcTemplateBase，它似乎在 Web 项目中提供了一个 HtmlHelper - 但它是该项目中的唯一类，并且在 Web 或核心项目中的任何地方都没有引用。

这个类似的问题： [RazorEngine issues with @Html](https://stackoverflow.com/questions/8561164/razorengine-issues-with-html)

只是指向主页的链接，说明您可以在那里找到更多信息 - 主页只是描述项目的简短句子。

那么，如何使用 RazorEngine v3.0 解析上述 Razor 视图？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-21T02:15:20.763

`Layout`属性和`Html`助手不是 的一部分，`TemplateBase`并且它的实现是(v3.4.1)`MvcTemplateBase`的最新版本的一部分似乎不完整（似乎没有初始化助手？）。您需要创建自己的基本模板来实现这些功能。`RazorEngine``InitHelpers`

如您所述，v3+ 版本不包含`Razor.SetBaseTemplate`方法。您可以在当前版本中设置基本模板类型，如下所示：

```
var config = new RazorEngine.Configuration.TemplateServiceConfiguration
    {
        BaseTemplateType = typeof(MyTemplateBase<>)
    };

using (var service = new RazorEngine.Templating.TemplateService(config))
{
    Razor.SetTemplateService(service);
    return MvcHtmlString.Create(Razor.Parse<TModel>(templateText, model));
} 
```

如果您需要初始化助手，`CreateInstance`在自定义实现中覆盖可能会有所帮助`IActivator`，可以提供给`TemplateServiceConfiguration`类似的`BaseTemplateType`：

```
var config = new RazorEngine.Configuration.TemplateServiceConfiguration
    {
        BaseTemplateType = typeof(MyTemplateBase<>),
        Activator = new MyActivator()
    }; 
```

# jquery - jquery删除创建的元素，包括孩子

> ID：10429340
> 
> 赞同：2
> 
> 时间：2012-05-03T10:15:54.213
> 
> 标签：jquery

我想遇到这种情况，如果有人悬停一个链接，则应该使用有关该链接的信息动态创建一个元素。

我知道有一些标准的 jquery 脚本可用，但是为了我对 jquery 的理解，我想自己制作。

我将显示这样的元素：

```
 $(".event-date").live("mouseover",function(e){
        var event = e || window.event; 
        event.preventDefault();
        $(this).append("<div id='showEventInfoWrap'><div id='closeEventInfo'>Close</div><div id='showEventInfo'></div></div>");
        $("#showEventInfo").load("event-info.php");
    }); 
```

我使用`live()`日历是因为日历显示在一个`<div>`元素中，当用户浏览月份时它会​​发生变化。

问题在于在以下情况下隐藏 div：a) 用户单击“关闭”链接；或 b) 用户悬停在出现的元素之外。

我尝试了以下任何一个选项，但它们都不起作用：

```
 $("#closeEventInfo").live("click",function(e){
        $(this).parent().attr("id").remove();
        $("#showEventInfoWrap").remove();
        $("#showEventInfoWrap").children().remove();
        $("#showEventInfoWrap").add("#closeEventInfo").add("#showEventInfo").remove();
    }); 
```

我也尝试过`empty()`，`remove()`但没有任何结果。

有人可能知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T10:17:49.210

```
$(this).parent().attr("id").remove(); 
```

引发错误，导致您的脚本终止。
`.attr()`使用单个参数返回一个字符串或`undefined`. 它不是 jQuery 对象，因此`.remove`没有定义。

*   如果要删除父元素，请使用：

    ```
    $(this).parent().remove(); 
    ```

*   如果要删除 ID 属性，请使用：

    ```
    $(this).parent().removeAttr("id"); 
    ```

`$("#showEventInfoWrap").remove();`将删除`#showEventInfoWrap`元素，*包括它*的子元素。

# jquery - 用于生成多色文本的 jQuery 插件，在悬停时会改变颜色

> ID：10429343
> 
> 赞同：0
> 
> 时间：2012-05-03T10:16:14.840
> 
> 标签：jquery, css, plugins, fonts, hover

我想为各种链接生成多色文本，从预先指定的颜色数组中随机分配颜色到单个字母，当将鼠标悬停在带有文本的 div 上时会发生变化。我在想一个 jQuery 插件/脚本将是要走的路。

我想知道是否存在这样的插件或近似值。

谢谢，

缺口

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:37:37.360

好的，我使用 jquery 编写了一个示例。

首先你的文字

```
<p id="example">Multi color me</p>​ 
```

然后是javascript：

```
$(document).ready(function() {
  var test = $("#example").text().split('');

    var result = "";
    var i = 0;
    for(i=0; i < test.length; i++) {
        result += "<span style='color:"+getColor()+"'>"+test[i]+"</span>";
    }
    $("#example").html(result);      
});

function getColor() {
    var colList = ['#00FF00', '#FF0000','#0000FF'];

    var i = Math.floor((Math.random()*colList.length));
  return colList[i];
}​ 
```

这是 jsFiddle[示例](http://jsfiddle.net/DZpyw/1/)

注意：我没有做悬停，但我猜你可以从这里拿它:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:24:56.797

你可以试试这个：

```
 $('a').on('hover', function( {
      $(this).css('color', getRandomColor());
     })
   );

function getRandomColor() {
  var myAwesomeColorList['#ccc', '#fff'];

  return myAwesomeColorList[Math.floor((Math.random()*myAwesomeColorList.length))]
} 
```

# regex - VBA：Regex 和 Dir() 函数问题

> ID：10429344
> 
> 赞同：1
> 
> 时间：2012-05-03T10:16:16.577
> 
> 标签：regex, vba, excel, directory

我使用 VBA 编写了一个简单的脚本。（我需要用excel优化一些工作）。

关于正则表达式的第一个问题：

正如我之前所说，我使用了 VBA。

简单的任务：获取模式匹配并捕获子匹配。

我的代码是：

```
Dim ResStr as Object
Dim LastStr as Object
Dim RE as Object

Set RE = CreateObject("vbscript.regexp") 'create a regex
With RE
    .MultiLine = False  'm-key
    .Global = False     'g-key
    .IgnoreCase = False 'i-key
    .Pattern = "[<]TD\s+class=gm[>](\d+\.\d+)[<][/]TD[>]" 'tag
End With

Set ResStr = RE.Execute(StrDollar)  'use regex  
Set LastStr = ResStr(0).SubMatches  'get submatch 
```

如何获得 LAST 匹配和 LAST 子匹配？（长度属性？）

关于 Dir 函数的第二个问题：

如何过滤文件？

我在msdn上看到了这段代码：

```
 ' Display the names in C:\ that represent directories.
   MyPath = "c:\"   ' Set the path.
   MyName = Dir(MyPath, vbDirectory)   ' Retrieve the first entry.
   Do While MyName <> ""   ' Start the loop.
     ' Use bitwise comparison to make sure MyName is a directory.
     If (GetAttr(MyPath & MyName) And vbDirectory) = vbDirectory Then
       ' Display entry only if it's a directory.
       Debug.WriteLine(MyName)
     End If   
     MyName = Dir()   ' Get next entry.
  Loop 
```

`If (GetAttr(MyPath & MyName) And vbDirectory) = vbDirectory Then`- 停止'msdn-guy'！你在开玩笑吗？它只有一种方法吗？

有没有办法制作普通的过滤器，而不是这种巨大的线法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T10:35:08.170

要获得所有匹配项、子匹配项、长度等，您将使用类似这样的内容 - 我添加了一个工作示例，其中包含一个更简单的模式来演示（即，将数字序列与非数字匹配）

您应该`Test`在假定已找到匹配项之前使用您的正则表达式以避免错误

```
Sub Test()
Dim RE As Object
Dim strSample As String
Dim ResStr As Object
Dim LastStr As Object
strSample = "123dd6789a"
Set RE = CreateObject("vbscript.regexp")    'create a regex
With RE
    .MultiLine = False  'm-key
    .Global = True     'g-key
    .IgnoreCase = False    'i-key
    .Pattern = "\d+([^\d])"
End With
If RE.Test(strSample) Then
    Set ResStr = RE.Execute(strSample)
    For Each LastStr In ResStr
        MsgBox "Match: " & LastStr & vbNewLine & "SubMatch: " & LastStr.submatches(0) & vbNewLine & "Position: " & LastStr.firstindex + 1 & vbNewLine & "Length: " & LastStr.Length
    Next
End If
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T10:30:07.760

**问题 1**

你可以试试这个：

```
Sub Test(StrDollar)
Dim LastStr As Object
Dim RE As New RegExp
Dim mt As Match

With RE
    .MultiLine = False  'm-key
    .Global = True     'g-key
    .IgnoreCase = False 'i-key
    .Pattern = "<TD\s+class=gm>(\d+\.\d+)</TD>" 'tag
    For Each mt In .Execute(StrDollar)
         Set LastStr = mt.SubMatches  'get submatch
    Next mt
End With

MsgBox LastStr(0)

End Sub 
```

* * *

**问题 2**

也许`dir()`函数无法根据扩展名制作文件列表。

[编辑]

```
Sub Test2(StrDollar)
Dim LastStr As Object
Dim RE As New RegExp
Dim mt As Match
Dim dic As New Scripting.Dictionary 'scripting runtime
Dim pos&

With RE
    .MultiLine = False  'm-key
    .Global = True     'g-key
    .IgnoreCase = False 'i-key
    .Pattern = "<TD\s+class=gm>(\d+\.\d+)</TD>" 'tag
    For Each mt In .Execute(StrDollar)
        pos = pos + 1
        dic.Add CStr(pos), mt.FirstIndex & "||" & mt.Value & "||" & mt.SubMatches(0)
    Next mt
End With

MsgBox dic.item(CStr(pos))

End Sub 
```

[/编辑]

# java - SSO 登录到 Gmail

> ID：10429346
> 
> 赞同：1
> 
> 时间：2012-05-03T10:16:25.993
> 
> 标签：java, javascript, google-api

我正在研究 Google Data api。我正在从用户那里获取凭据并显示他们的活动和会议。但我的要求是让他们登录 SSO。意味着一旦他们在我的应用程序中输入了他们的凭据，他们就会自动登录到 Gmail。

如何让他们的登录单点登录？

我正在使用 java 和 Javascript。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T14:12:23.480

这是您的要求吗？一旦 google 登录您的赞赏，他就会自动登录 google，反之亦然。
                如果这是您的要求，您可以使用 SAML 2.0 来实施 SSO。Google 成为 ID 提供者，而您的应用程序是服务提供者。当您想登录您的服务（您的应用程序）时，您将被**重定向**到谷歌登录页面，谷歌将在该页面对您进行身份验证，并在您的浏览器中设置必要的 cookie。然后下次您访问 gmail.com 时，它会看到 cookie 已设置并自动将您登录。反之亦然。

# java - FTPClient 的 isAvailable 和 is Connected 返回 true 但 storeFileStream 返回 null

> ID：10429347
> 
> 赞同：0
> 
> 时间：2012-05-03T10:16:37.077
> 
> 标签：java, ftp-client, apache-commons-net

我正在使用 Commons-net FTPClient 上传大量文件（大约 2000 个）。
我在每次上传之前使用`isAvailable()`&`isConnected()`方法检查连接，如果连接关闭则重新连接。
上传一些文件（变量）后`storeFileStream`返回`null`（这意味着“无法打开数据连接”作为javadoc），而`isAvailable()`两者`isConnected()`都是真的！
问题是什么？
如何检查数据连接的可用性？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T11:08:43.207

> 如何检查数据连接的可用性？

尝试使用它。TCP 中没有“拨号音”，因此名称为 like 的方法`isConnected()`只能告诉您（1）您是否曾经连接过，如果幸运的话，（2）您是否随后关闭了连接或遇到 I/O 错误。我不熟悉您提到的 API，但`isConnected()`JDK 类的方法除了 (1) 之外没有做任何事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-30T03:22:31.263

您也可以尝试调用`getReplyCode()`.

> 返回最后一个 FTP 回复的回复代码的整数值。您通常只会在连接到 FTP 服务器后使用此方法来检查连接是否成功，因为 connect 的类型为 void。

您可以从此[Wikipedia 链接查看这些代码的含义](http://en.wikipedia.org/wiki/List_of_FTP_server_return_codes)

# mysql - 批量插入 SQL 语句

> ID：10429348
> 
> 赞同：1
> 
> 时间：2012-05-03T10:16:43.700
> 
> 标签：mysql, batch-file, bulkinsert

我说要在 MySQL 数据库表中插入 100 行数据。
但我不想写所有 100`INSERT`条语句。
SQL中是否有任何批量插入语句？？？如果可能，请帮助提供代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T10:17:54.153

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T10:17:41.923

```
INSERT INTO tbl (col1, col2) VALUES ('val1', 'val2'), ('val3', 'val4'), ... 
```

下次请先阅读[文档](http://dev.mysql.com/doc/refman/5.5/en/insert.html)

# google-chrome - 自动重启 chrome

> ID：10429350
> 
> 赞同：-1
> 
> 时间：2012-05-03T10:16:47.980
> 
> 标签：google-chrome, flash, restart

我在电脑上运行一个巨大的 Flash 应用程序。电脑一直开机，大约一周后 chrome 崩溃（内存泄漏 - 程序太大而无法重新编码）。有没有办法每天在指定时间自动重启它？

问候鲁本

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:30:31.340

假设您使用的是 Windows，您可以使用 Windows 任务计划程序，并创建一个日常任务。您可以指定任务来运行程序或批处理脚本。

有关这方面的更多信息，请查看[http://support.microsoft.com/kb/308569](http://support.microsoft.com/kb/308569)

在 Linux/Unix 下，您可以使用 cronjob。

编辑：如果您使用批处理脚本，您还可以测试，如果 chrome 已经在运行。同样，此解决方案仅适用于 Windows（实际上我仅使用 Win7 对其进行了测试）。要测试一个应用程序（本例中的记事本），您可以使用以下代码：

```
tasklist /nh /fi "imagename eq notepad.exe" | find /i "notepad.exe" >nul && (
    echo Windows Media Player is running
) || (
    echo Windows Media Player is not running
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:33:17.113

这可以通过Javascript来实现。

```
 <script>

    /*
    Uncomment below line to test this.
    alert('We reloaded!');
    */

    /* Configure when to reload. */
    specified_time = [22,30]; /* [hours, minutes] */

    is_time_to_reload = function(){
        var current_time = new Date();

        return (
            (current_time.getHours() >= specified_time[0]) &&
            (current_time.getMinutes() >= specified_time[1])
        );
    }

    /* We might have just reloaded. This will avoid
         reloading again until the time comes tomorrow */
    if(is_time_to_reload()){
        var not_reload_again_today = true;
        var last_day_reloaded = (new Date()).getDay();
    }

    check_refresh = function(){
        var current_time = new Date();

        if (is_time_to_reload()){
            if (not_reload_again_today &&
                    current_time.getDay() == last_day_reloaded){
                return;
            } else {
                window.location.reload();
            }
        }
    }

    /* check once a minute. */
    setInterval(check_refresh, 60 * 1000); 

    </script> 
```

它也可以通过 HTML 来实现，但是您将无法控制重新加载时间。

```
 <head>
        <!-- refresh page every 86400 seconds. -->
        <meta http-equiv="refresh" content="86400" />
    </head> 
```

# google-maps - 在 Gmap 中使用地理位置的多个纬度和经度

> ID：10429352
> 
> 赞同：0
> 
> 时间：2012-05-03T10:16:52.423
> 
> 标签：google-maps

我想使用 Google Geo API 获取多个纬度和经度。实际上，我正在使用 GMap 模块来渲染一张地图，在该地图中我正在从数据库中获取企业列表地址，但现在我也想显示谷歌列表。例如：[http://maps.google.com/maps/geo?q=bars;near=chicago&radius=500&output=csv&key=](http://maps.google.com/maps/geo?q=bars;near=chicago&radius=500&output=csv&key=) ' 。$key 它返回单个纬度和经度，但我想要芝加哥附近的所有纬度和经度类型的酒吧。请帮助我。我将不胜感激您的意见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:26:47.547

地理编码器对邮政地址进行地理编码，而`bars;near=chicago`不是地址。您得到的结果是 for `q=something,Chicago`，这是地理编码器可以为您的查询管理的最近的结果。事实上，它甚至没有找到城市：结果是芝加哥大道，马萨佩夸纽约。

您要使用的是[Places API](https://developers.google.com/maps/documentation/places/)。这旨在根据位置返回某个类的结果。

# php - 如何使用 PEAR Soap 发送和 Mime 附件

> ID：10429353
> 
> 赞同：0
> 
> 时间：2012-05-03T10:16:57.683
> 
> 标签：php, soap, pear, mime

如何发送带有 Mime 附件的 Soap 请求？

现在我创建了一个 Soap_Attachment

```
$att = new SOAP_Attachment('contentID', $_FILES['uploaded_file']['type'] . '; charset=utf-8', $_FILES['uploaded_file']['tmp_name']) 
```

但是如何将此附件附加到我的请求中？我的要求是例如

```
$result = $soapClient->call('saveEmployeeXmlData', array(
    'id'    => 'a-key',
    'key'   => '12456865456845',
    'data'  => $xml
), $options); 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:31:16.167

您可以尝试以下方法

```
$soapClient->getProxy ();
$soapClient->setOpt ( 'Mime', true );
$soapClient->saveEmployeeXmlData ( array (
        'id' => 'a-key',
        'key' => '12456865456845',
        'data' => $att 
) ); 
```

# nsis - ExecWait 上的 NSIS _?=$INSTDIR 开关会在重新启动时删除卸载程序。

> ID：10429355
> 
> 赞同：1
> 
> 时间：2012-05-03T10:17:14.173
> 
> 标签：nsis

我有一个**NSIS 安装程序**，它调用卸载程序来卸载旧版本。

执行等待`$INSTDIR\uninstall.exe /S _?=$INSTDIR`。该`_?`开关用于使安装程序等待卸载完成。

它确实等到卸载完成。但是当我重新启动我的机器时，`uninstall.exe`不存在于`$INSTDIR`.

`$INSTDIR`卸载程序部分具有使用`/REBOOTOK`开关删除某些子目录的命令。

前任 ：`RmDir /r /REBOOTOK $INSTDIR\client`

这会导致uninstall.exe 在机器重新启动时被删除吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:28:24.403

/REBOOTOK 的全部意义在于删除正在使用的文件。但`RmDir /r /REBOOTOK $INSTDIR\client`不应该删除`$INSTDIR\uninstall.exe`，你确定你那里没有`RmDir /r /REBOOTOK $INSTDIR`电话吗？

无论您如何看待，在这里使用 /REBOOTOK 可能都不是一个好主意。用户重新启动后，$INSTDIR\client 中的所有文件都将被删除（旧安装和全新安装的文件）

请引用您的路径：

*   `ExecWait '"$INSTDIR\uninstall.exe" /S _?=$INSTDIR'`
*   `RmDir /r /REBOOTOK "$INSTDIR\client"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:49:29.413

`ExecWait`关于部署卸载程序的部分，该声明的立场是什么？

卸载程序可能会自行删除（或尝试删除），并且它与“新卸载程序”之间存在冲突，因为它与删除自身的方式有关：因为可执行文件在执行期间无法删除，而是将自身标记为删除在下次引导期间（如果您使用该`/REBOOTOK`选项）。之后，您将部署“新卸载程序”，如果它具有相同的名称，则在启动后将其删除。

您可以尝试使用该`VIAddVersionKey`语句来为新安装程序定义与以前不同的版本。然后安装后，检查它是新的还是以前的卸载程序。

如果您有一个 multi_sz 值，如果它被标记为在下次启动期间删除，则还要查看注册表，该`HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\PendingFileRenameOperations`值可能包含您的卸载程序的名称。

# jquery - Jquery - 键中带有哈希字符的 JSON 解析

> ID：10429357
> 
> 赞同：0
> 
> 时间：2012-05-03T10:17:23.373
> 
> 标签：jquery, json, hash

我正在制作一个用 jquery 解析 json 的脚本，但 json 中的相同键有一个哈希字符：

```
"image":[{"#text":"aaaaaaaaaaaaa","size":"bbbbbbbbbbbb"} 
```

所以javascript会产生错误

```
$.each(item, function(y,img){
     alert(y+" ----- "+img.#text+"  "+img.size);
}); 
```

我怎样才能避免它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T10:19:08.727

尝试使用`[]`符号访问对象成员：

```
alert(y + " ----- " + img['#text'] + "  " + img.size); 
```

# python - 字典格式化和defaultdict函数

> ID：10429362
> 
> 赞同：-2
> 
> 时间：2012-05-03T10:17:38.660
> 
> 标签：python, dictionary, mapping, defaultdict

我有一本格式为`{(a,b):c, (a2,b2):c2 and so on}`. 从这种格式来看， ,的键不止一个`a2`，`a`依此类推，每个`a`,然而,只出现一次，每个项目的值,都不同。我需要的是以这种格式制作字典值和单个整数键的字典：假设之前，并且是相同的值。`a2``b``b2``c``c2``{a:{b:c,b2:c2}}``a``a2`

干杯家伙（`defaultdict`如果可能的话使用）。在 Python 中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T11:17:30.990

如果 D 是输入字典，则

```
from collections import defaultdict
res = defaultdict(dict)
for (a,b),c in D.items():
    res[a][b] = c 
```

# javascript - 带有for循环的javascript用于在表单textarea中标记文本

> ID：10429365
> 
> 赞同：0
> 
> 时间：2012-05-03T10:17:43.200
> 
> 标签：javascript, jquery, for-loop, tagging

我有一个 javascript 用于在用户单击按钮时标记文本区域中的文本。现在我只让它为一个按钮工作。总共需要能够标记 8 个按钮，但我不想为每个按钮 id 一遍又一遍地重复相同的代码，所以我尝试了一个 for 循环，但这不起作用。我不太清楚为什么。

这些是按钮 ID：edit-button0、edit-button1、edit-button2、...、edit-button8

我在 for 循环中添加了一个警报来检查按钮 ID。

无论我稍后单击哪个按钮，它都会显示按钮 id 是 edit-button8，并且它会添加连接到该按钮的标签。

任何想法为什么这不起作用或我应该如何做。

```
/*globals document*/
(function ($) {
    "use strict";
    $(document).ready(function () {

            for (i=0;i<8;i++) {

                $("#edit-button"+i).click(function () {
                        alert("#edit-button"+i);
                        var tag = $("#edit-button"+i).attr("value");
                        var id = "protocol"; /* id of textarea */

                        var element  = document.getElementById(id); /* HTML element object */
                        var start    = element.selectionStart;      /* start pos of selection */
                        var end      = element.selectionEnd;        /* end pos of selection */
                        var text     = element.value;           /* whole text */

                        var prefix   = text.substring(0, start);    /* part before selection */
                        var selected = text.substring(start, end);  /* selected text */
                        var suffix   = text.substring(end);         /* part after selection */
                        /* insert tags in selection */
                        selected     = "["+tag+"]" + selected + "[/"+tag+"]";

                        /* update HTML object */
                        element.value      = prefix + selected + suffix; /* selected text */

                        element.selectionStart = start;                      /* new start pos */
                        element.selectionEnd   = start + selected.length;    /* new end pos */

                        return false;
                    });
            }
    });
})(jQuery); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:33:42.857

您可以给所有按钮一个类`.tagButtons`，然后`.each()`在 jQuery 中使用像这样循环它们

```
$('.tagButtons').each(function(){ 
     $(this).click(function(){

             var tag = $(this).attr("value");
             var id = "protocol"; /* id of textarea */  

             var element  = document.getElementById(id);                         
             var start    = element.selectionStart;     
             var end      = element.selectionEnd;       
             var text     = element.value;                                             
             var prefix   = text.substring(0, start);   
             var selected = text.substring(start, end);                             
             var suffix   = text.substring(end);    
             selected     = "["+tag+"]" + selected + "[/"+tag+"]";                                                    

             element.value      = prefix + selected + suffix;  

             element.selectionStart = start;                                   
             element.selectionEnd   = start + selected.length;    

             return false;

     });
}); 
```

**编辑 -**

作为替代方案并在将来提供帮助，我认为您的代码的问题是您的 for 循环。看一下[这个](http://jsfiddle.net/2p3AG/)jsFiddle 示例，以显示循环的外观。

# ibm-mq - 执行组的公共变量

> ID：10429376
> 
> 赞同：3
> 
> 时间：2012-05-03T10:18:02.470
> 
> 标签：ibm-mq, messagebroker

如果我创建一个环境变量，它将存在于执行组内的所有流中吗？我需要一个必须在同一执行组中的两个流之间共享的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:22:12.937

没有。环境变量为特定流设置了范围。如果要在两个流之间共享一个值，则必须将其作为消息传递或使用用户定义的属性 (UDP) 将其设置为执行组中的所有流。

# ruby-on-rails - Ruby On Rails：建议的宝石/开发堆栈

> ID：10429382
> 
> 赞同：2
> 
> 时间：2012-05-03T10:18:29.227
> 
> 标签：ruby-on-rails, ruby, gem, stack

我是**RoR**开发的新手，我正在寻找寻找*最佳社区宝石*的建议。

例如用于身份验证/授权？设计是一个好的组件吗？[https://github.com/plataformatec/devise](https://github.com/plataformatec/devise)

是否有任何宝石可以轻松地在视图中生成更丰富的 gui？

简而言之，一位经验丰富的 RoR 开发人员在创建新应用程序后安装了哪些 gem？

问候，贾科莫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T10:44:38.200

为了回答这个问题，[Ruby Toolbox](https://www.ruby-toolbox.com/)是查找 Ruby/Rails 项目（新旧项目）以及比较提供类似解决方案的 gem 的相对流行度的绝佳资源。虽然 Ruby 背后的积极开发文化为习惯阅读和编写 Ruby 的开发人员提供了支持，但我认为许多新开发人员对所有选项感到不知所措。

考虑到这一点，对于刚开始 Ruby/Rails 开发的人，我建议要么滚动你自己的授权/身份验证系统，要么遵循解释该过程的教程。[您可以在Michael Hartl 的 Rails 教程](http://ruby.railstutorial.org/chapters/modeling-users#top)中找到一个很好的教程来解释用户模型的基本结构，包括身份验证

同样，理解 Rails 视图可以像将常规的、旧的 HTML、CSS 和 Javascript 与一些 Ruby 变量结合起来一样简单，这很有价值，而无需依赖于 Bootstrap 之类的魔法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T10:26:54.190

是的，设计是非常好的宝石，有很多选项和灵活的身份验证。

看到这个[https://github.com/plataformatec/devise/wiki/Example-Applications](https://github.com/plataformatec/devise/wiki/Example-Applications)

对于视图中的 gui，您可以使用 bootstrap twitter gem。这很容易，您可以快速构建视图。

开发人员安装的 gem 取决于他们的需要。现在有更多 tah 1300 gem 可用...

继续编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T10:31:07.843

这在我几乎所有的应用程序中都是基本的。

```
gem 'devise'
gem "friendly_id", "~> 4.0.1"
gem 'omniauth-facebook'
gem "devise_mailchimp"

gem 'twitter-bootstrap-rails'
gem 'dragonfly', '~>0.9.11'
gem 'will_paginate'
gem 'will_paginate-bootstrap'
gem "mysql2", "~> 0.3.11"
gem 'thin' 
```

和更多。你也可以访问[http://railscasts.com/](http://railscasts.com/)你会在那里得到更多的想法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T11:30:33.977

对我帮助很大的是查看一堆[Railcasts](http://railscasts.com/)。您将对可能要使用的 gem 有一个很好的概述。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T11:32:41.247

你可以从 bbatsov 查看这个[Rails 风格指南](https://github.com/bbatsov/rails-style-guide)，它是一个社区驱动的指南，人们每天都在使用许多实践。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-20T21:01:49.027

这是我的宝石文件

你也可以看看[ruby​​-toolbox](https://www.ruby-toolbox.com/)

[![在此处输入图像描述](../Images/bcb52a724130cb4dbfb8762e46102957.png)](https://i.stack.imgur.com/uAwNh.png)

[![在此处输入图像描述](../Images/3f6c8d14e1b2bc2243a9309a49b17c05.png)](https://i.stack.imgur.com/mAXPC.png)

# javascript - 在执行之前测试是否格式正确的 javascript 表达式

> ID：10429383
> 
> 赞同：0
> 
> 时间：2012-05-03T10:18:41.563
> 
> 标签：javascript, validation, syntax

我有一个脚本，它接受用户输入，对该输入执行一些操作，然后执行修改后的输入。

**例子：**

用户输入“vbscipt 或 javascript”

我的脚本将其转换为：

```
var searchtest = "mystring.search('vbscript')>=0 || mystring.search('javascript')>=0"; 
```

并使用 eval(searchtest); 执行它

但是，如果用户输入“vbscript javascript”

我的脚本将其转换为

```
var searchtest = "mystring.search('vbscript')>=0 mystring.search('javascript')>=0"; 
```

（注意缺少||）当我调用eval（searchtest）时会导致错误；

有没有办法在执行之前测试 searchtest 字符串以确定它是否是有效的 javascript 表达式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:51:48.780

JavaScript eval 是邪恶的！

而不是像你正在做的那样转换用户输入，为什么不这样做：

```
// list of values considered valid
myString = ['javascript', 'vbscript', 'perl', 'python'];

function search (x) {
  // Returns true if x is a value an array (passed as `this`)
  return this.indexOf (x) >= 0;
}

function searchTest (userInput, myString, search) { 'use strict';

  function orClause (clause) {
    // caluse is a series of values separated by `or`, return true
    // if any search returns true for any of the values.
    clause = clause.split (/\s+or\s+/i); // split on 'or'
    while (clause.length) { // for each value
      if (search.apply (myString, [clause.shift ()])) {
        return true;
      }
    }
    return false; // no matches....
  }        

  userInput = userInput.split (/\s+and\s+/i); // split on 'and'

  // userInput is now an array of clauses each is either a value or 
  // a series of values separated by `or`. We pass each clause to
  // the orCaluse function and return true only if ALL returns are true. 
  while (userInput.length) { 
    if (!orClause (userInput.shift ())) { 
       return false; // and fails
    }
  }

  return true;  // All true so return true.
}

searchTest ('fred or javascript and python', myString, search), 
```

我假设您的表达式可以是`and`s 和`or`s 的序列，其中`and`s 优先

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:41:37.970

是的，您可以使用`eval`自身并捕获语法错误异常。但不要这样做！盲目地转换用户输入并使用 eval 验证准备执行的代码是许多 XSS 攻击的敞开大门。您应该严格验证用户输入，而不是验证转换后的字符串，以绝对确保转换将导致正确的代码仅限于您希望允许的精确操作。

# c# - C# 应用程序的有限内存使用

> ID：10429384
> 
> 赞同：1
> 
> 时间：2012-05-03T10:18:42.567
> 
> 标签：c#, visual-studio-2010

我有一个 C# 应用程序，我已编译为 64 位，它在 64 位计算机上运行，​​该计算机具有 32GB 的 RAM，并且正在运行 Windows Server 2008。当它运行时，该框在使用 9GB RAM 时达到峰值（当应用程序运行时为 5GB '不运行）。

我需要让这个应用程序使用更多 RAM。我一直在网上四处寻找，无法准确指出这种限制是如何造成的。我研究了页面文件的使用情况（尽管从我读到的内容来看，在这种情况下虚拟内存应该不是问题），默认情况下，页面文件大小当前设置为 32Gb 左右

谁能指出我正确的方向。我对 C# 和 Visual Studio 很陌生，所以我不确定自己在做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:34:50.203

您的应用程序可能只是没有分配和持有“足够”的内存。尝试分配 10 个 byte[] 每个 1GB。这将成功。这证明了 CLR 不是问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:05:42.797

我想你问错问题了。您的应用程序使用更多 RAM 并不会使其更快。您可能需要使用多线程或更好地使用 bcp 实用程序来拆分 CSV 加载任务。

# php - 应该将什么传递给 if() 以打印“Hello World”？

> ID：10429385
> 
> 赞同：8
> 
> 时间：2012-05-03T10:18:50.703
> 
> 标签：php, logic

应该将什么传递给 if() 以将输出打印为“Hello World”？[注意：它应该执行 else 块。]

```
if(?){

} else {
   echo "World";
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T10:22:04.073

我需要评估为假，并同时打印“Hello”。`printf`成功时返回输出字符串的长度，在布尔上下文中读取时评估**该长度。**`true`因此，反转将评估为 false，执行 else 块。

```
if(!printf("Hello ")){

} else {
   echo "World";
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T10:23:14.093

```
!printf("Hello ") 
```

默认情况下，'C' 中的 printf 返回 true。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T10:44:00.850

```
if(!printf("Hello "))
{}
else 
{
    echo "World";
} 
```

你可以这样做...

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-16T08:59:04.970

这个问题还有一个替代解决方案：

```
class test{ 
  function __construct()
  { 
     echo "Hello"; 
  } 
} 

if(!new test){ 
}else{ 
 echo "World"; 
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T10:33:10.590

如果理解逻辑结果，我的意思`TRUE-FALSE` 是任何导致真/假结果的条件都很重要，如果你可以使用

```
if(true){
echo 'this is executed';
}else{ 
echo "world";
} 
```

或者

```
 if(false){
echo 'this is executed';
}else{ 
echo "world";
} 
```

我希望这有效

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-03T10:21:34.513

任何计算结果为`FALSE`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-05-03T11:17:03.490

```
if(printf("Hello ")) {
}  
else{    
  echo "World";} 
```

我认为这已经足够了......对不起，如果没有

# iphone - 在 - iPhone 中的应用购买

> ID：10429390
> 
> 赞同：4
> 
> 时间：2012-05-03T10:19:03.577
> 
> 标签：iphone, objective-c, ios5, in-app-purchase

我开发了一个 iPhone 应用程序，它具有`three Levels`. 这些`three Levels`显示为`three tabs`单一视图。

*第一级是免费的。第 2 和第 3 被锁定。*

我阅读了一些教程，但不清楚哪种类型的 In-App-Purchase 适合我的应用程序。

因为如果我使用 Consumable 三个级别必须是三个不同的应用程序（但我在一个应用程序中有 3 个选项卡），如果我使用 Non-Consumable，一个应用程序应该只购买一次。

但是当用户想要`unlock the 2nd Level`，用户需要付款时，我有点困惑，如果我想向`2nd/3rd level`用户销售，那些`(2nd & 3rd) levels`必须是不同的应用程序。？

在这里，我想解锁一个选项卡（即；一个锁定的按钮。）。当用户单击按钮时，它应该与 Appstore 连接并进行交易。

如果成功，则应打开该级别。

*如果您有任何源代码，请告诉我。*

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:27:19.187

您应该使用 2 个非消耗性产品。一个用于Level2，一个用于Level3。通过这种方式，您可以确保您的用户每个级别只需支付一次费用。如果您愿意，级别可以有不同的价格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T10:31:28.950

您可以查看应用内购买。您可以参考以下参考。

[http://www.raywenderlich.com/2797/introduction-to-in-app-purchases](http://www.raywenderlich.com/2797/introduction-to-in-app-purchases)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T10:32:18.427

您不需要为每个级别设置单独的应用程序。您需要创建布尔值，这些值会根据购买级别的用户而变化，然后您需要将它们保存在您的应用程序中。同样在应用程序的全新安装时，您需要检查用户是否已经购买了一个级别，然后根据您返回的值启用/禁用级别。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T10:53:25.180

我发现有用的 2 个教程：

*   [http://troybrant.net/blog/2010/01/in-app-purchases-a-full-walkthrough/](http://troybrant.net/blog/2010/01/in-app-purchases-a-full-walkthrough/)

*   [http://www.raywenderlich.com/2797/introduction-to-in-app-purchases](http://www.raywenderlich.com/2797/introduction-to-in-app-purchases)

您需要的购买类型在很大程度上独立于 IAP 架构的其余部分 - 在 iTunes Connect 上创建购买产品时，您只需选择您想要的类型（正如其他人所说，非消耗品）。

# javascript - XSLT：从 XML 节点中的代码片段构造 HTML 文件

> ID：10429394
> 
> 赞同：1
> 
> 时间：2012-05-03T10:19:17.357
> 
> 标签：javascript, xslt

我想知道是否有人可以帮助我解决我遇到的棘手问题。可能在这里问不可能的问题，但有兴趣听到任何建议。

我有一个 XML 文件，其中一个节点包含页面的 HTML。我想获取该节点中的数据以及如何从中创建 HTML 文件。因此，从下面的示例 XML 中，我想转换并`cell[2]`从中选择节点`//dvm/rows/row`并将其放置在另一个文件中，以便我可以实际看到 HTML 标记显示的内容并显示为正确的网页而不是代码。

如果我把它和这样的 XSL 放进去，它会起作用吗？

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns="http://www.w3.org/1999/xhtml" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output indent="yes" method="html"/>
<xsl:template match="/">
    <xsl:value-of select="//dvm/rows/row/cell[2]" disable-output-escaping="yes"/>   
</xsl:template> 
</xsl:stylesheet> 
```

XML 是：

```
<dvm>
  <description>This is a DVM file</description>
  <columns>
    <column name="lang"/>
    <column name="text"/>
    <column name="code" qualifier="true" order="1"/>
    <column name="type" qualifier="true" order="2"/>
    <column name="subj"/>
    <column name="urem"/>
    <column name="vreq"/>
 </columns>
 <rows>
   <row>
     <cell>English(UK)</cell>
     <cell><![CDATA[<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"       
           "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
           <html xmlns="http://www.w3.org/1999/xhtml">
           <head>
              <title>My HTML File</title>
           </head>
           <body>
           <div class="text">
             <p>This is a line of text</p>
             <p>This is a line of text</p>
             <p>This is a line of text</p>  
           </div>
           </body>
           </html>]]>
     </cell>
     <cell>Code 1</cell>
     <cell>Text</cell>
     <cell>HTML Block 1</cell>
     <cell/>
     <cell/>
   </row>
 </rows>
</dvm> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:37:44.867

**您必须摆脱 CDATA 部分并将其包含的文本用作常规标记**。DOCTYPE 也应该被删除（它将由转换生成）：

```
<?xml-stylesheet type="text/xsl" href="delete_3.xsl" ?>
<dvm>
    <description>This is a DVM file</description>
    <columns>
        <column name="lang"/>
        <column name="text"/>
        <column name="code" qualifier="true" order="1"/>
        <column name="type" qualifier="true" order="2"/>
        <column name="subj"/>
        <column name="urem"/>
        <column name="vreq"/>
    </columns>
    <rows>
        <row>
            <cell>English(UK)</cell>
            <cell>
               <html xmlns="http://www.w3.org/1999/xhtml">
               <head>
                  <title>My HTML File</title>
               </head>
               <body>
               <div class="text">
                 <p>This is a line of text</p>
                 <p>This is a line of text</p>
                 <p>This is a line of text</p>
               </div>
               </body>
               </html>
      </cell>
            <cell>Code 1</cell>
            <cell>Text</cell>
            <cell>HTML Block 1</cell>
            <cell/>
            <cell/>
        </row>
    </rows>
</dvm> 
```

**然后生成包含在第二个`cell`元素中的 XHTML 的转换很简单**：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output doctype-public="-//W3C//DTD XHTML 1.0 Transitional//EN"
 doctype-system="http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/">
     <xsl:copy-of select="/*/rows/*/cell[2]/node()"/>
 </xsl:template>
</xsl:stylesheet> 
```

**现在我打开文件时：`c:\temp\delete\delete2.xml`使用 IE，结果是**：

```
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
   <head>
      <title>My HTML File</title>
   </head>
   <body>
      <div class="text">
         <p>This is a line of text</p>
         <p>This is a line of text</p>
         <p>This is a line of text</p>
      </div>
   </body>
</html> 
```

**这由浏览器显示为：**

我的 HTML 文件

这是一行文字

这是一行文字

这是一行文字

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:24:07.310

```
<xsl:value-of select="cell[2]" disable-output-escaping="yes" /> 
```

* * *

请注意，由于您`<cell>`包含 XHTML，因此实际上不需要 CDATA 部分。XHTML 和 XML 是兼容的，您可以在另一个内部传输一个，而无需先将其转换为字符串。

# orders - eBay API：GetOrders 调用不返回任何订单

> ID：10429408
> 
> 赞同：2
> 
> 时间：2012-05-03T10:20:32.597
> 
> 标签：orders, ebay-api

我已在沙盒 eBay 帐户中下达测试订单。

我无法从`GetOrders`API 调用中获取订单列表。

它重新运行成功消息，但未获取任何订单。

以下是 API 调用详细信息：

```
<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns="urn:ebay:apis:eBLBaseComponents" ><soap:Header><RequesterCredentials><eBayAuthToken>...</eBayAuthToken><Credentials><AppId>Clarion89-2b36-4da6-b073-00dafbcff12</AppId><DevId>f79169c1-f95b-4d23-9fe2-547504ffb827</DevId><AuthCert>...</AuthCert></Credentials></RequesterCredentials></soap:Header><soap:Body><GetOrdersRequest><DetailLevel>ReturnAll</DetailLevel><Version>527</Version><CreateTimeFrom>2012-04-02T09:52:27.000Z</CreateTimeFrom><CreateTimeTo>2012-05-03T09:52:27.000Z</CreateTimeTo><OrderRole>Seller</OrderRole><OrderStatus>Active</OrderStatus><ListingType>FixedPriceItem</ListingType></GetOrdersRequest></soap:Body></soap:Envelope> 
```

响应返回如下

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
 <soapenv:Body>
  <GetOrdersResponse xmlns="urn:ebay:apis:eBLBaseComponents">
   <Timestamp>2012-05-03T09:54:03.650Z</Timestamp>
   <Ack>Success</Ack>
   <Version>771</Version>
   <Build>E771_CORE_BUNDLED_14795207_R1</Build>
   <PaginationResult>
    <TotalNumberOfPages>0</TotalNumberOfPages>
    <TotalNumberOfEntries>0</TotalNumberOfEntries>
   </PaginationResult>
   <HasMoreOrders>false</HasMoreOrders>
   <OrderArray/>
   <OrdersPerPage>100</OrdersPerPage>
   <PageNumber>1</PageNumber>
   <ReturnedOrderCountActual>0</ReturnedOrderCountActual>
  </GetOrdersResponse>
 </soapenv:Body>
</soapenv:Envelope> 
```

请告诉我为什么我没有收到订单详情

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-19T16:12:14.877

首先我会使用更高的版本（我实际上使用 771 作为兼容级别）

当我开始为 api 编码时，我曾经在本宁遇到过类似的问题，然后我将 CreatedTime 过滤器切换到 NumberOfDays，这是从今天开始回顾的日子。

您使用什么语言拨打电话？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-29T12:40:55.557

根据存储在 ebay 上的订单检查您的请求参数。可能没有与您在调用中输入的参数匹配的订单。尝试输入最基本的请求参数，例如

```
<?xml version="1.0" encoding="utf-8"?>
<GetOrdersRequest xmlns="urn:ebay:apis:eBLBaseComponents">
<RequesterCredentials>
    <eBayAuthToken>[your authentication token]</eBayAuthToken>
</RequesterCredentials>
<CreateTimeFrom>2012-05-10T00:00:00.000Z</CreateTimeFrom>
<CreateTimeTo>2012-05-15T00:00:00.000Z</CreateTimeTo>
</GetOrdersRequest> 
```

您可以根据需要输入日期，但请确保使用 ebay 接受的日期格式。

# iphone - 我们可以在多个视图上添加单个手势并使其工作吗？

> ID：10429410
> 
> 赞同：2
> 
> 时间：2012-05-03T10:20:33.753
> 
> 标签：iphone, ios, uigesturerecognizer, uipangesturerecognizer

我正在研究 Pan Gesture 的样本。我很想知道我可以在两个视图上添加单个手势吗？

我的代码如下：

```
UIPanGestureRecognizer *panGesture = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(invokePanGesture:)];
[panGesture setMinimumNumberOfTouches:1];
[panGesture setMaximumNumberOfTouches:2];

[btnGreen addGestureRecognizer:panGesture];
[btnYellow addGestureRecognizer:panGesture]; 
```

我的处理程序方法如下：

```
- (void)invokePanGesture:(UIPanGestureRecognizer*)recognizer {
CGPoint translation = [recognizer translationInView:self.view];
recognizer.view.center = CGPointMake(recognizer.view.center.x + translation.x, 
                                     recognizer.view.center.y + translation.y);
[recognizer setTranslation:CGPointMake(0, 0) inView:self.view];
} 
```

现在的问题是手势识别器在我的案例中只考虑最后一个视图`btnYellow`作为它的视图。如果我创建两个单独的 GestureRecognizer 对象，它就可以工作。所以请让我明白：

1.  是否可以在多个视图中使用单个手势？

2.  如果是，那怎么办？

3.  如果是现在那为什么？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T10:29:23.917

[来自UIGestureRecognizer](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIGestureRecognizer_Class/Reference/Reference.html)的文档

**手势识别器在对特定视图**和所有该视图的**子视图**进行命中测试的触摸上进行操作。因此，它必须与该视图相关联。要建立这种关联，您必须调用 UIView 方法 addGestureRecognizer:。手势识别器不参与视图的响应者链。

*因此，总而言之，GestureRecognizer 可以对多个视图进行操作的唯一方法是识别器对其他视图的父视图进行操作。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T10:30:21.730

我不认为这是可能的。

请查看[https://stackoverflow.com/a/5567684/470964](https://stackoverflow.com/a/5567684/470964)。

另外[https://stackoverflow.com/a/7883902/470964](https://stackoverflow.com/a/7883902/470964)：也许它也是您问题的解决方案。我认为答案是 GestureRecognizer 只有一个视图属性，它将被设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T23:36:41.370

你不能只写你的 invokePanGesture 方法来同时对两个视图做同样的事情吗？

# hadoop - HBase“之间”过滤器

> ID：10429412
> 
> 赞同：1
> 
> 时间：2012-05-03T10:20:51.003
> 
> 标签：hadoop, hbase

我正在尝试使用过滤器列表检索范围内的行，但我没有成功。下面是我的代码片段。

我想检索 1000 到 2000 之间的数据。

HTable 表 = 新 HTable(conf, "TRAN_DATA");

```
 List<Filter> filters = new ArrayList<Filter>();

    SingleColumnValueFilter filter1 = new SingleColumnValueFilter(Bytes.toBytes("TRAN"),
              Bytes.toBytes("TRAN_ID"),
              CompareFilter.CompareOp.GREATER, new BinaryComparator(Bytes.toBytes("1000")));
    filter1.setFilterIfMissing(true);
    filters.add(filter1);

    SingleColumnValueFilter filter2 = new SingleColumnValueFilter(Bytes.toBytes("TRAN"),
              Bytes.toBytes("TRAN_ID"),
              CompareFilter.CompareOp.LESS,new BinaryComparator(Bytes.toBytes("2000")));

    filters.add(filter2);

    FilterList filterList = new FilterList(filters);

    Scan scan = new Scan();
    scan.setFilter(filterList);
    ResultScanner scanner1 = table.getScanner(scan);

    System.out.println("Results of scan #1 - MUST_PASS_ALL:");
    int n = 0;

    for (Result result : scanner1) {
        for (KeyValue kv : result.raw()) {
            System.out.println("KV: " + kv + ", Value: "
                    + Bytes.toString(kv.getValue()));
        {
            n++;

        }
    }
    scanner1.close(); 
```

尝试使用所有可能的方法
1\. SingleColumnValueFilter filter2 = new SingleColumnValueFilter(Bytes.toBytes("TRANSACTIONS"), Bytes.toBytes("TRANS_ID"), CompareFilter.CompareOp.LESS, new SubstringComparator("5000"));

1.  SingleColumnValueFilter filter2 = new SingleColumnValueFilter(Bytes.toBytes("TRANSACTIONS"), Bytes.toBytes("TRANS_ID"), CompareFilter.CompareOp.LESS, Bytes.toBytes("5000")); 以上方法都不起作用:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T18:45:19.977

这里肯定不存在的一件事是，在创建 FILTERLIST 时，您还必须指定 FilterList.Operator，否则不确定 filterlist 将如何处理多个过滤器。在你的情况下，它应该是这样的： -

```
FilterList filterList = new FilterList(FilterList.Operator.MUST_PASS_ALL, filters); 
```

看看这是否有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:34:34.413

看起来不错。检查您是否将它们保留为“1000”和“2000”，而不是 1000 和 2000 的 byte[]。

休息对我来说很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-02T16:28:35.283

1 FilterList 默认运算符是 Operator.MUST_PASS_ALL。你的代码没关系。
2 如果你把字符串作为字节放在hbase中，你的选择是错误的。
因为“1000”<“2”<“5000”

```
 Put put = new Put(rowKey_ForTest);
    put.add(ColumnFamilyName, QName1, Bytes.toBytes("2"));
    table.put(put);

    List<Filter> filters = new ArrayList<Filter>();
    SingleColumnValueFilter filter1 = new SingleColumnValueFilter(
            ColumnFamilyName, QName1, CompareOp.GREATER,
            new BinaryComparator(Bytes.toBytes("1000")));
    filters.add(filter1);

    SingleColumnValueFilter filter2 = new SingleColumnValueFilter(
            ColumnFamilyName, QName1, CompareOp.LESS, new BinaryComparator(
                    Bytes.toBytes("5000")));

    filters.add(filter2);

    FilterList filterList = new FilterList(filters);

    Scan scan = new Scan();
    scan.setFilter(filterList);

    List<String> resultRowKeys = new ArrayList<String>();
    ResultScanner resultScanner = table.getScanner(scan);
    for (Result result = resultScanner.next(); result != null; result = resultScanner
            .next()) {
        resultRowKeys.add(Bytes.toString(result.getRow()));
    }
    Util.close(resultScanner);

    Assert.assertEquals(1, resultRowKeys.size()); 
```

3 如果你把 int 作为字节，你的代码是错误的。您应该使用 Bytes.toBytes(int)，而不是 Bytes.toBytes(String)。

我的测试代码在[https://github.com/zhang-xzhi/simplehbase](https://github.com/zhang-xzhi/simplehbase)
上面 有很多关于 hbase 的测试。

或者您可以发布您的 put 代码，以便我们检查您是如何将数据保存到 hbase 的。
或者你可以调试它，检查你的值的格式。

看看能不能帮上忙。

# css - div 中的 CSS BaseLink 和附加链接

> ID：10429416
> 
> 赞同：0
> 
> 时间：2012-05-03T10:21:02.087
> 
> 标签：css, styles

我有以下结构：

```
<div class="boxLayer">
<a href="a.html"></a>
<div class="text">Result</div>
<div class="additionalLink"><a href="b.html"></a></div>
</div>

.boxLayer{
position: relative;
float:left;
height:28px;
width:100%;
border-top: 1px solid #cccccc;
background-color: #fff;
}

.boxLayer a {
display:block;
height:100%;
width: 100%;
background: white;
}

.boxLayer a:hover{
background-color: #ffeecc;
} 
```

这个想法是在该框的左侧显示一个带有文本的框，并在框的右侧显示一个附加链接。当我将鼠标悬停在框上时，会显示框的背景颜色，当我将鼠标悬停在文本或第二个链接上时也是如此。我设法创建了框，但是当我添加文本或链接时，没有显示框的悬停效果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:33:58.203

我不确定这会是你的答案

**请检查小提琴：**

```
.boxLayer {
    position: relative;
    height:auto;
    float:left;
    width:100%;
    border-top: 1px solid #cccccc;
    background-color: #fff;
}

.boxLayer:hover {
    background-color: #ffeecc;
}
```

```
<div class="boxLayer">
    <a href="a.html" class="firstLink"></a>
    <div class="text">Result</div>
    <div class="additionalLink"><a href="b.html">&nbsp;</a></div>
</div>
```

# excel - 执行宏后如何修复单元格格式，因为excel单元格丢失格式

> ID：10429418
> 
> 赞同：3
> 
> 时间：2012-05-03T10:21:13.953
> 
> 标签：excel, excel-2003, dde, vba

嗨，我正在使用 Oracle 表单中的 DDE.Execute 命令将数据填充到 Excel 工作表中。代码很好，但是当我使用 DDE.Execute 命令执行下面的宏**FORMAT_SECTION_TITLE_2**时，它会为行着色，但也会将日期更改为数字，而不是单元格的值显示为正确的日期，它显示为**39234**

```
Sub FORMAT_SECTION_TITLE_2()

    With Selection.Interior
        .ColorIndex = 7
        .Pattern = xlSolid
    End With
    Selection.Font.Bold = False
End Sub 
```

我也试图改变很多东西，但没有帮助。请建议。

谢谢

更新 1：Siddharth 我在 excel 表中添加了一个新子，正如你提到的，我的表名称与你提到的 Sheet1 相同

```
Sub formatColumn()
Sheets("Sheet1").Columns(1).NumberFormat = "dd-mmm-yy"
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T14:11:45.417

Shax，在两个半小时的聊天后发现，这似乎是一个 XY 问题 :)

就像我上面提到的，上面的代码不负责格式更改。格式被另一段代码更改

```
Sub two_decimals()
    Selection.NumberFormat = "#,##0.00"
End Sub 
```

实际的错误在于在我对 oracle 不太熟悉之后调用的**oracle 代码，但是在调试它时我们发现了这个问题。**`two_decimals``FORMAT_SECTION_TITLE_2`

BTW：多亏了你，我今天在 oracle 中学到了一些东西！

# javascript - $(window).resize 在 IE 中不起作用

> ID：10429419
> 
> 赞同：0
> 
> 时间：2012-05-03T10:21:17.850
> 
> 标签：javascript, jquery, internet-explorer

我遇到了 $(window).resize 在 Internet Explorer 中不起作用的问题。我现在只检查了 IE 8。

基本上，我创建了一个函数，我们称之为计算（）。该函数根据窗口的当前宽度更改某些元素的宽度/高度。因此，需要在准备好的文档和每次调整浏览器大小时调用该函数。但是当我调用函数窗口调整大小时，它在 IE 中不起作用！但更奇怪的是，它在准备好文档时工作得非常好，而不是在调整窗口大小时。

这是代码：

```
jQuery.noConflict();   
jQuery(document).ready(function($){ 
    calculations(); // works fine here, it does all what it should do

    $(window).resize(function(){
        calculations(); // works fine in all browsers except IE
    })

    function calculations() {
      //definition of function calculations here (i haven't pasted the exact function, all it does is change some widths and heights)
    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:29:55.570

也许 ：

```
var jNoConflit = jQuery.noConflict();   
jNoConflit(document).ready(function(){ 
    calculations(); // works fine here, it does all what it should do

    jNoConflit(window).resize(function(){
        calculations(); // works fine in all browsers except IE
    });

    function calculations() {
        alert("toto");
    };

}); 
```

# asp.net - 如何在运行时在 asp.net web foms 中添加文本框的数量？

> ID：10429423
> 
> 赞同：-1
> 
> 时间：2012-05-03T10:21:35.510
> 
> 标签：asp.net, textbox, runtime, add, insert-update

我正在用 asp.net-c# 开发一个迷你项目......我有一个困惑......**我如何在运行时看到文本框的数量以在 sql server 2005 中插入记录。**

例如...

> 如果我在运行时想要 3 个文本框，那么我们可以通过在 web 表单中轻松地做到这一点......

但是当我们从数据库中检索记录时，我们不知道要插入数据库的确切记录数......

> 我需要在用户指定编号时动态创建文本框...如果用户将行数指定为 3，则应将 3 个文本框添加到 Web 表单中，并且我还需要阅读稍后输入的文本（在我的情况下，它的标记为学生）……

这样做的最佳方法是什么？? 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:31:51.110

你在这里有很多选择。不幸的是，我无法了解哪种方法对您最有意义，因为我无法说明如何使用附加控件。

但一种选择是分配所需控件的新实例并将其添加到父控件的 Controls 集合中。

另一种方法是使用中继器、网格或其他数据控件。如果控件的数量取决于您需要显示的数据项的数量，请使用此方法。

还有一种方法是将文本插入到例如带有您需要的 HTML 标记的 Literal 控件中。如果您不需要将值回发到服务器，这是一种更精简的方法，尽管它可能需要更多的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:26:51.700

尝试这样的事情`Page_Init`

```
 for (int i = 0; i < ANYNUMBER; i++) 
       {
                var textBox = new TextBox();
                textBox.ID = "txb_" + i.ToString();                    
                this.Controls.Add(textBox);
       } 
```

您还可以查看[在 ASP.NET 中动态创建控件](http://support.microsoft.com/kb/317515)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T10:26:52.493

使用中继器。 [http://msdn.microsoft.com/en-us/library/c012haty(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/c012haty(v=vs.90).aspx)

这是一个使用没有真实数据源的中继器的示例（在 VB.NET 中）。

[VB.NET Repeater 无数据源的简单数据绑定](https://stackoverflow.com/questions/926619/vb-net-repeater-simple-data-binding-without-datasource)

这是在 C# 中

```
myRepeater.DataSource = new int[3];
myRepeater.DataBind();

<asp:Repeater id="myRepeater" runat="server">
<ItemTemplate>
  <input type="text" />
</ItemTemplate>
</asp:Repeater> 
```

# linux - 带线路缓冲的并发 UART 输出

> ID：10429434
> 
> 赞同：0
> 
> 时间：2012-05-03T10:22:02.123
> 
> 标签：linux, concurrency, grep, cat

我有 4 个 UART 设备，我想同时观看它们的输出。我使用以下脚本来完成这项工作：

```
# first kill the cat process from last run
killall -v cat

for i in `seq 0 3`; do
    cat /dev/crbif0rb0c$(i}ttyS0 | grep . --line-buffered &
    # cat /dev/crbif0rb0c$(i)ttyS0 &
done 
```

但是我没有从这个脚本中得到任何输出，除了许多空行。当我删除这些`grep`东西并使用 for 循环中的第二行时，我得到了很多输出，但由于所有输出都搞砸了，所以不可读。

所以我的问题是**为什么我使用 grep 时没有输出（空行除外）**？或者任何人都可以为我的场景提供更好（和可行）的解决方案？

提前致谢！

**[更新]**我突然发现这`cat /dev/crbif0rb0c${i}ttyS0 | grep ^ --line-buffered &`行得通。不知道为什么...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:46:57.933

怎么样`tail -f /dev/crbif0rb0c{0,1,2,3}`？

# git - 在另一个 git 存储库的父文件夹中创建一个 git 存储库并删除子存储库但将其历史记录集成到父存储库中

> ID：10429438
> 
> 赞同：12
> 
> 时间：2012-05-03T10:22:28.723
> 
> 标签：git, repository

我有以下文件夹结构：

```
foo/
foo/bar
foo/baz
foo/bee 
```

我在 foo/bar/.git 上创建了一个 git 存储库。

后来我意识到我需要将 foo 中的所有其他目录包含在一个 git 存储库中，所以我在 foo/.git 上创建了一个 git 存储库。

```
foo/.git
foo/bar/.git
foo/baz
foo/bee 
```

我可以只删除 foo/bar/.git，但我希望能够保留该 git 存储库的历史记录，但在 foo/.git 而不是 foo/bar/.git 中。

我试图阅读子模块，但如果我理解正确，这是一种将现有存储库的版本集成为您自己的存储库的子树的方法。

我不完全确定这是我需要的。我不需要保留 foo/bar/.git。我希望 foo/.git 成为我的主要存储库。我只是想知道是否有办法在 foo/.git 中保留或整合 foo/bar/.git 的历史记录，以便我可以删除 foo/bar/.git。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T10:31:23.507

为什么不在 中创建一个`bar`目录`foo/bar`，将`git mv`所有内容都移到中`foo/bar/bar`，然后移动（不涉及 git）`foo/bar/.git`到最终删除现在为空的子文件夹`.git`的内容。`foo/bar/bar``foo/bar``foo/bar/bar`

然后，您可以将其余子目录添加到现在位于 .git 中的 git 存储库中`foo`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-05-03T10:38:48.183

您正在寻找子树合并

Github 的帮助对此[有很好的指导](http://help.github.com/subtree-merge/)[，Pro Git 中](http://progit.org/book/ch6-7.html)有一个章节对此进行了介绍，与[Git 社区书相同](http://book.git-scm.com/5_advanced_branching_and_merging.html)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-05-03T10:39:21.353

`filter-branch`我建议对存储库的克隆使用一次调用：

```
git filter-branch --index-filter 'git ls-files -s | sed "s-\t\"*-&bar/-" |
           GIT_INDEX_FILE=$GIT_INDEX_FILE.new git update-index --index-info &&
         mv $GIT_INDEX_FILE.new $GIT_INDEX_FILE'  --tag-name-filter cat -- --all 
```

这会将所有文件移动到子目录“bar”中，重写所有修订历史记录（所有分支和标签）。

现在您可以将重写的历史记录视为新的存储库。

[*（命令改编自 中的示例[`man git-filter-branch`](http://linux.die.net/man/1/git-filter-branch)）：*]

* * *

### 可选背景信息

要删除旧的 cruft/reflogs/filter 分支备份，请执行

```
git for-each-ref --format="%(refname)" refs/original/ | xargs -n 1 git update-ref -d
git reflog expire --expire=now --all
git gc --prune=now 
```

当然，您也可以只克隆 repo 以摆脱备份/垃圾。

# python - 更多pythonic方式来“连接”两个对象

> ID：10429443
> 
> 赞同：0
> 
> 时间：2012-05-03T10:22:58.793
> 
> 标签：python, oop

[在一篇分析 Python PDF 库的博](http://slott-softwarearchitect.blogspot.com/2012/02/pdf-reading.html)文中，[S.Lott](https://stackoverflow.com/users/10661/s-lott)发表了以下评论：

这是一个非常糟糕的编程示例：

```
#Connect the parser and document objects.    
parser.set_document(doc)    
doc.set_parser(parser) 
```

只需要这两者之一；另一个作为 setter 方法的一部分被简单处理。

通过 setter 方法执行此操作的 Pythonic 方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:24:40.063

我猜作者的意思是这样的：

```
class Parser(object):
  def set_document(self, doc):
    self.doc = doc
    doc.parser = self 
```

另一个 setter`set_parser()`可以说是多余的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T10:25:25.210

```
class Parser(object):
    def set_document(self, doc):
        doc.set_parser(self)
        # whatever 
```

尽管在实践中，我会重新设计文档和解析器类以避免循环引用。它们不仅增加了概念上的复杂性，而且还会干扰垃圾收集，除非使用弱引用。

# json - Apache jmeter - 解析 json 大小限制

> ID：10429444
> 
> 赞同：0
> 
> 时间：2012-05-03T10:23:00.007
> 
> 标签：json, jmeter

jmeter可以解析的json大小有限制吗？

我正在尝试在我的 jmeter 初始化脚本中使用 json。json的大小是相当大的。我看到如果我截断 json，解析是没有错误的。但是对于原始尺寸，我得到一个错误。

请放心，json 本身是正确的，因为我已经在其他 javascript 解析器中进行了测试。

更新：既然确定*确实*存在限制，问题是是否有办法解决限制？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T12:58:24.110

我可以做的唯一解决方法是将 js 拆分为多个文件，方法如下：

```
file1.js: vars.putObject('huge_json', {"foo" : [...], "bar" : {...}});
file2.js: vars.getObject('huge_json').foo.push({"foo_child" : {...}});
...
final_file: var hugeJson = vars.getObject('huge_json'); 
```

# android - 更改 dalvik jit 后，示例程序并不总是执行

> ID：10429448
> 
> 赞同：1
> 
> 时间：2012-05-03T10:23:18.787
> 
> 标签：android, jit, dalvik, android-source

我通过将 jit 表结构从链式数组更改为哈希表和 B-tree 的组合，对 dalvik jit 进行了一些更改。现在，当我执行一个示例 java 程序时

```
public class prog {
public static void main(String args[])
{
        long start=System.currentTimeMillis();
        int sum=0;
        for(int i=1;i<10;i++) 
        {
              for(int j=0;j<10;j++) {
                    long h=getKey();
                    System.out.println("key : "+h);
              }
        }
        System.out.println("time : "+(System.currentTimeMillis()-start));
}
public static long getKey()
{
    Random rand=new Random();
    long key = rand.nextLong();
    if(key<0)
        return -key;
    else
        return key;
}
} 
```

在将 libdvm.so（在对 JIT 进行更改后构建）推送到 android 模拟器后使用 dalvikvm -cp prog.jar prog。有时程序运行完美，有时会导致分段错误。当我检查日志时，这是显示的错误：

```
Fatal signal 11 (SIGSEGV) at 0x00000020 (code=1)
I/DEBUG   (   33): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
I/DEBUG   (   33): Build fingerprint: 'generic/sdk/generic:4.0.3/MR1/237985:eng/test-keys'
I/DEBUG   (   33): pid: 766, tid: 766  >>> dalvikvm <<<
I/DEBUG   (   33): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 00000020
I/DEBUG   (   33):  r0 00000020  r1 4245b32a  r2 0000001f  r3 00000001
I/DEBUG   (   33):  r4 4245b32a  r5 41af7e90  r6 0000f9a0  r7 0000063d
I/DEBUG   (   33):  r8 4001edc0  r9 00000000  10 40513620  fp 00000014
I/DEBUG   (   33):  ip 400bf108  sp beb6cad0  lr 00000000  pc 00000020  cpsr 20000010
I/DEBUG   (   33):  d0  3f4000003f400000  d1  0000000000000000
I/DEBUG   (   33):  d2  0000000000000000  d3  0000000000000000
I/DEBUG   (   33):  d4  0000000000000000  d5  41ca61a4d0800000
I/DEBUG   (   33):  d6  3f50624dd2f1a9fc  d7  3ede5bd843b4bb5d
I/DEBUG   (   33):  d8  0000000000000000  d9  0000000000000000
I/DEBUG   (   33):  d10 0000000000000000  d11 0000000000000000
I/DEBUG   (   33):  d12 0000000000000000  d13 0000000000000000
I/DEBUG   (   33):  d14 0000000000000000  d15 0000000000000000
I/DEBUG   (   33):  scr 60000010
I/DEBUG   (   33): 
I/DEBUG   (   33):          #00  pc 00000020  
I/DEBUG   (   33):          #01  lr 00000000  <unknown>
I/DEBUG   (   33): 
I/DEBUG   (   33): code around pc:
I/DEBUG   (   33): 00000000 ffffffff ffffffff ffffffff ffffffff  ................
I/DEBUG   (   33): 00000010 ffffffff ffffffff ffffffff ffffffff  ................
I/DEBUG   (   33): 00000020 ffffffff ffffffff ffffffff ffffffff  ................
I/DEBUG   (   33): 00000030 ffffffff ffffffff ffffffff ffffffff  ................
I/DEBUG   (   33): 00000040 ffffffff ffffffff ffffffff ffffffff  ................
I/DEBUG   (   33): 
I/DEBUG   (   33): code around lr:
I/DEBUG   (   33): 00000000 ffffffff ffffffff ffffffff ffffffff  ................
I/DEBUG   (   33): 00000010 ffffffff ffffffff ffffffff ffffffff  ................
I/DEBUG   (   33): 00000020 ffffffff ffffffff ffffffff ffffffff  ................
I/DEBUG   (   33): 00000030 ffffffff ffffffff ffffffff ffffffff  ................
I/DEBUG   (   33): 00000040 ffffffff ffffffff ffffffff ffffffff  ................
I/DEBUG   (   33): 
I/DEBUG   (   33): stack:
I/DEBUG   (   33):     beb6ca90  0000001f  
I/DEBUG   (   33):     beb6ca94  00000000  
I/DEBUG   (   33):     beb6ca98  00000000  
I/DEBUG   (   33):     beb6ca9c  400817ed  /system/lib/libdvm.so
I/DEBUG   (   33):     beb6caa0  400a4736  /system/lib/libdvm.so
I/DEBUG   (   33):     beb6caa4  00000001  
I/DEBUG   (   33):     beb6caa8  4245b32a  /system/framework/core.odex
I/DEBUG   (   33):     beb6caac  0000001f  
I/DEBUG   (   33):     beb6cab0  00000001  
I/DEBUG   (   33):     beb6cab4  4245b32a  /system/framework/core.odex
I/DEBUG   (   33):     beb6cab8  41af7e90  
I/DEBUG   (   33):     beb6cabc  0000f9a0  [heap]
I/DEBUG   (   33):     beb6cac0  0000063d  
I/DEBUG   (   33):     beb6cac4  40081841  /system/lib/libdvm.so
I/DEBUG   (   33):     beb6cac8  df0027ad  
I/DEBUG   (   33):     beb6cacc  00000000  
I/DEBUG   (   33): #00 beb6cad0  400b3f90  /system/lib/libdvm.so
I/DEBUG   (   33):     beb6cad4  0000f9a0  [heap]
I/DEBUG   (   33):     beb6cad8  400b3f90  /system/lib/libdvm.so
I/DEBUG   (   33):     beb6cadc  beb6cb08  [stack]
I/DEBUG   (   33):     beb6cae0  41b40710  /dev/ashmem/dalvik-LinearAlloc (deleted)
I/DEBUG   (   33):     beb6cae4  beb6cb4c  [stack]
I/DEBUG   (   33):     beb6cae8  00000000  
I/DEBUG   (   33):     beb6caec  fffffe60  
I/DEBUG   (   33):     beb6caf0  beb6cb98  [stack]
I/DEBUG   (   33):     beb6caf4  40034200  /system/lib/libdvm.so
I/DEBUG   (   33):     beb6caf8  00000000  
I/DEBUG   (   33):     beb6cafc  beb6cbc8  [stack]
I/DEBUG   (   33):     beb6cb00  00000000  
I/DEBUG   (   33):     beb6cb04  beb6cbd0  [stack]
I/DEBUG   (   33):     beb6cb08  00000000  
I/DEBUG   (   33):     beb6cb0c  00000000  
I/DEBUG   (   33):     beb6cb10  00000000  
I/DEBUG   (   33):     beb6cb14  00000000  
I/BootReceiver(   77): Copying /data/tombstones/tombstone_05 to DropBox (SYSTEM_TOMBSTONE) 
```

可能的问题是什么？是与内存相关的问题还是与 JIT 代码相关的错误发生了变化？

谢谢

# c++ - 如何获取可靠的 QGLWidget 快照

> ID：10429452
> 
> 赞同：5
> 
> 时间：2012-05-03T10:23:27.433
> 
> 标签：c++, qt, opengl, qglwidget

在我的应用程序中，我出于两个目的对 QGLWidget 的内容进行快照：

*   当只有叠加层发生变化时，不要一直重绘场景，而是使用缓存的像素图
*   Lat 用户截取特定情节的屏幕截图（3D 场景）

我尝试的第一件事是`grabFrameBuffer()`。对于第一个应用程序使用此功能是很自然的，小部件中当前可见的正是我要缓存的内容。 **问题：**在某些硬件上（例如 Intel 集成显卡、带有 GeForce 显卡的 Mac OS X），获得的图像不包含当前屏幕内容，而是之前的内容。因此，如果场景将被绘制两次，在屏幕上您会看到第二张图，在图像中您会看到第一张图（应该是后缓冲区的内容？）。

我尝试的第二件事是`renderToPixmap()`。这呈现使用`paintGL()`，但不使用`paint()`。我有我所有的东西`paint()`，因为我使用 Qt 的绘画功能，并且只有一小部分代码使用本机 GL ( `beginNativePainting()`, `endNativePainting()`)。

我还尝试了常规 QWidget 的快照功能（QPixmap::fromWidget()，或者它的名称），但是 GL 帧缓冲区是黑色的。

关于如何解决问题并获得当前绘制场景的可靠描述的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T23:20:37.513

> 如何获取可靠的 QGLWidget 快照

将当前场景渲染到帧缓冲区，将数据从帧缓冲区保存到文件。或者在 glFlush 之后获取当前的后缓冲。其他任何东西都可能包括伪影或不完整的场景。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-16T18:56:25.373

似乎 QGLWidget::grabFrameBuffer() 在内部从 OpenGL 调用 glReadPixels() 。在双缓冲配置中，初始模式读取后台缓冲区（GL_BACK），使用 OpenGL 调用 glReadBuffer(GL_FRONT) 切换到前台缓冲区，然后使用 QGLWidget::grabFrameBuffer() 在屏幕上显示图像。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T00:05:06.717

的结果`QGLWidget::grabFrameBuffer()`，就像所有其他 OpenGL 调用一样，取决于视频驱动程序。Qt 只是将您的调用转发给驱动程序并获取它返回的图像，但图像的内容不受 Qt 的控制。除了确保您已经为您的显卡安装了最新的驱动程序之外，除了向您的显卡制造商报告错误并祈祷之外，您无能为力。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T22:03:38.057

我使用`paintGL();`and `glFlush()`; 使用前`grabFrameBuffer()`。paintGL 有助于在抓取帧缓冲区之前再次绘制当前帧，这会精确复制当前显示的内容。

# oracle - Oracle ADF：LOV 在创建时不起作用

> ID：10429454
> 
> 赞同：2
> 
> 时间：2012-05-03T10:23:38.590
> 
> 标签：oracle, oracle-adf

我有一个带有指向 ViewObject (VO2) 的 ListOfValue 的 ViewObject (VO1)，并从 VO2 获取记录。VO2 上没有添加 ViewCriteria。在 BC 测试仪中进行测试时，LOV 工作正常。无论是在 VO1 中编辑一行，还是在 VO1 中创建一行时。

在 jspx 页面中使用 LOV，在 VO1 中编辑行时 LOV 工作正常。但是当我在 jspx 页面中创建新行时，LOV 不会获取任何记录。只是一个空列表。我不知道出了什么问题，或者为什么它不起作用。我创造了几个 LOV，它们都像一个魅力一样工作，但这个让我把头发扯下来。

其他任何人都经历过类似的情况，即 LOV 仅在编辑行时起作用？有什么想法可能是错的吗？

jspx页面上的SOC：

```
<af:selectOneChoice value="#{row.bindings.IdSosBasGrantType.inputValue}"
label="#{row.bindings.IdSosBasGrantType.label}"
required="#{bindings.SosBasCaseGrantPerCaseType.hints.IdSosBasGrantType.mandatory}"
shortDesc="#{bindings.SosBasCaseGrantPerCaseType.hints.IdSosBasGrantType.tooltip}"
id="soc12" autoSubmit="true">
<f:selectItems value="#{row.bindings.IdSosBasGrantType.items}" id="si11"/>
</af:selectOneChoice> 
```

迭代器绑定：

```
<tree IterBinding="SosBasCaseGrantPerCaseTypeIterator" id="SosBasCaseGrantPerCaseType">
<nodeDefinition DefName="fo.att.alm.sos.model.bas.views.SosBasCaseGrantVO" Name="SosBasCaseGrantPerCaseType0">
<AttrNames>
<Item Value="Seq"/>
<Item Value="IdSosBasGrantType"/>
<Item Value="IdSosBasGrantVariant"/>
<Item Value="RuleType"/>
<Item Value="Status"/>
<Item Value="IdAplCfgPartyType"/>
</AttrNames>
</nodeDefinition>
</tree> 
```

视图属性：

```
<ViewAttribute
Name="IdSosBasGrantType"
LOVName="LOV_IdSosBasGrantType"
IsUnique="true"
IsNotNull="true"
PrecisionRule="true"
EntityAttrName="IdSosBasGrantType"
EntityUsage="SosBasCaseGrantEO"
AliasName="ID_SOS_BAS_GRANT_TYPE">
<Properties>
<SchemaBasedProperties>
<CONTROLTYPE
Value="choice"/>
</SchemaBasedProperties>
</Properties>
</ViewAttribute> 
```

列表绑定：

```
<ListBinding
Name="LOV_IdSosBasGrantType"
ListVOName="SosBasGrantTypeUsgLOV"
ListRangeSize="-1"
NullValueFlag="none"
NullValueId="LOV_IdSosBasGrantType_LOVUIHints_NullValueId"
MRUCount="0">
<AttrArray Name="AttrNames">
<Item Value="IdSosBasGrantType"/>
</AttrArray>
<AttrArray Name="ListAttrNames">
<Item Value="GrantTypeId"/>
</AttrArray>
<AttrArray Name="ListDisplayAttrNames">
<Item Value="ObjectTypeDisplayName"/>
</AttrArray>
<DisplayCriteria/>
</ListBinding> 
```

视图访问器

```
<ViewAccessor
Name="SosBasGrantTypeUsgLOV"
ViewObjectName="fo.att.alm.sos.model.bas.views.SosBasGrantTypeUsgRO"
RowLevelBinds="true"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T03:09:36.123

我猜想 1-Lov 视图对象 VO2 在两个视图对象之间定义了视图链接 2-Lov 视图对象 VO2 在其 sql 语句中有参数来过滤从当前视图对象 VO1 获取其值的数据，并且参数为 null 所以它不会返回数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T20:12:49.610

在不了解代码的情况下很难猜测。但是，如果您遇到在创建新记录时 LOV 显示为空的情况，那么您可能在两个 VO 之间定义了一个视图链接。您需要确保 LOV 数据来自独立的 VO2，而不是 VO1 的细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-08T17:58:10.773

尝试打开 ADF BC 调试，看看当您从页面调用 LOV 时，它向 DB 发送的查询是什么。编辑您的项目属性，然后在“运行/调试”页面中，选择运行配置并单击“编辑”。然后将字符串 -Djbo.debugoutput=console 添加到 Java 选项字段。

[http://docs.oracle.com/cd/E16162_01/web.1112/e16182/web_testdebug.htm#BABDBCGF](http://docs.oracle.com/cd/E16162_01/web.1112/e16182/web_testdebug.htm#BABDBCGF)

# linux - 将 .m4p 转换为非 DRM 格式（mp3、ogg）

> ID：10429456
> 
> 赞同：6
> 
> 时间：2012-05-03T10:23:55.190
> 
> 标签：linux, mp3, quicktime, drm, ogg

您是否知道如何在不使用昂贵软件（AKA 和脚本）以及可能在 Linux 上的情况下将 .m4p 文件（DRM quicktime）转换为 mp3 或 ogg？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T05:03:04.303

在 linux 中解密加密的 DRM quicktime 文件没有好的方法。您可能可以通过 wine 使用 quicktime 播放它们（只是猜测），但将它们保存为不同的格式可能会很困难。（虽然大声思考，我想知道是否有可能有一个 alsa 插件，它也可以将它获得的每个音频流转储到文件中？）

# box-api - Box API 返回的流位置不能用于跟踪事件

> ID：10429457
> 
> 赞同：2
> 
> 时间：2012-05-03T10:24:01.233
> 
> 标签：box-api

感谢您对我的问题的回复：[这是 Box API v2 获取事件时的错误吗](https://stackoverflow.com/q/10413952/978391)

这是一个与此相关的新问题。问题是我不能可靠地使用从以前的调用中获得的 next_stream_position 来跟踪事件。

鉴于这种情况：

给定以下两个 GET HTTP 查询：

```
1\. GET https://api.box.com/2.0/events?stream_position=1336039062458 
```

这个返回 JSON 文件，其中包含一个文件条目 myfile.pdf 和下一个流位置 = 1336039062934

```
2\. GET https://api.box.com/2.0/events?stream_position=1336039062934 
```

此调用使用我从第一次调用中获得的流位置。但是，它返回的 JSON 包含与第一次调用完全相同的 myfile.pdf 文件条目。

我认为如果第一个调用给出了一个流位置，它应该被用作那个确切时间的标记（比如：TIme A）。如果我在后续查询中使用该流位置，则不应返回“时间 A”之前的任何事件。

这是一个错误吗？还是我以错误的方式使用 API？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T19:38:25.777

Box 事件目前为您提供大约 5 秒过去的窗口，这样您就不会错过某些事件。

我们曾考虑将我们发送给您的事件延迟大约 5 秒，并对我们这边的事件进行重复数据删除，但在这一点上，我们已经将转盘更接近实时。如果您更喜欢完全重复数据删除的流，请告诉我们，这样会更慢。

目前，（在测试版中）如果您编写客户端来检查重复事件并丢弃它们，那将是最好的。我们即将向有效负载添加一个 event_id，以便您可以对其进行重复数据删除。在那之前，您将不得不查看一堆字段，具体取决于事件类型……这可能更具挑战性，值得。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T17:43:18.857

Box 的 /events 端点专注于向您提供与您的 Box 帐户相关的所有事件的高度可靠的列表。事件是针对我们称为 stream_position 的时间序列列表注册的。当您点击 /events API 并传入一个 stream_position 时，我们会以稍早于该流位置的事件响应您，直到当前的 stream_position 或 chunk_size，以较小者为准。由于时间滞后和我们希望确保您不会错过某些事件的偏好，当您调用 /events API 时，您可能会收到重复的事件。您可能还会收到看起来像是您已经收到的“之前”事件的事件。我们的理念是，您最好知道发生了什么，而不是在黑暗中错过重要的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-10T08:12:19.047

为了帮助您确定事件是否重复，我们现在为每个事件添加了一个唯一的 event_id。我们的意图是 event_id 将允许您对从后续 GET /events 调用中收到的响应进行重复数据删除。

[您可以在此处](http://developers.box.com/docs/#events)的更新文档中看到这一点，包括示例有效负载。

# javascript - 在jsp站点上创建动态课程图

> ID：10429458
> 
> 赞同：-1
> 
> 时间：2012-05-03T10:24:02.193
> 
> 标签：javascript, html, jsp, graphics

我必须这样做才能完成任务。

要求是： 1\. 这是所有四年的学生课程信息页面 2\. 每年的所有课程都将按列显示 3\. 每个课程/单元应显示指向其下属课程的链接或每次学生点击course 它应该显示一个指向其连续下一门课程的链接 4\. 这意味着每门课程都应该显示一个指向其必备课程的链接 5\. 如果没有 prereq，则没有链接 6\. 这一切都需要动态完成

我有一个 jsp/html 站点，我将在其中包含此页面。你能否建议我如何去做这件事。例如：我可以使用什么语言在 jsp 站点中绘制箭头链接或映射。

非常感谢您的帮助。！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:49:18.277

```
 <HTML><HEAD><TITLE>Dynamic Form</TITLE></HEAD>
 2: <BODY>
 3: <B>Form</B>
 4: <FORM ACTION=dynamicForm.jsp METHOD=POST>
 5: <TABLE BORDER=0 CELLSPACING=0 CELLPADDING=0>
 6: <%  String[] textFields = {"FirstName","LastName","Address","City","Zip"};
 7:     for(int j=0; j<textFields.length; j++){     %>
 8:     <TR>    <TD> <%=textFields[j]%>:                       </TD>
 9:             <TD> <INPUT TYPE=TEXT NAME=<%=textFields[j]%>> </TD>
10:     </TR>
11: <%  }   %>
12:     <TR>    <TD> State  </TD>
13:             <TD> <SELECT NAME=State>
14: <%  String[] states = {"AZ", "CA", "NM", "MA", "ME", "MD", "..."};
15:     for(int s=0; s<states.length; s++) {    %>
16:                     <OPTION><%=states[s]%></OPTION>
17: <%  }   %>
18:                  </SELECT></TD>
19:     </TR>
20:     <TR>    <TD> Card Number  </TD>
21:             <TD> <INPUT TYPE=TEXT NAME=cNumber></TD>
22:     </TR>
23:     <TR>    <TD> Card Type  </TD>
24:             <TD> <SELECT NAME=CardType>
25: <%  String[] cTypes = {"Amex", "Visa", "Master Card", "Discovery", "..."};
26:     for(int t=0; t<cTypes.length; t++) {    %>
27:                     <OPTION><%=cTypes[t]%></OPTION>
28: <%  }   %>
29:                  </SELECT></TD>
30:     </TR>
31:     <TR>    <TD> Expiration Date (MM/DD/YYYY) </TD>
32: <TD> <INPUT TYPE=TEXT NAME=cMonth SIZE=2><INPUT TYPE=TEXT NAME=cDay SIZE=2>
33:             <SELECT NAME=cYear>
34:             <%  int startYear = 2000;
35:                 int endYear = 2010;
36:                 for(int y=startYear; y<endYear; y++) {    %>
37:                     <OPTION><%=y%></OPTION>
38:             <%  }   %>
39:             </SELECT></TD>
40:     </TR>
41: </TABLE>
42:     <INPUT TYPE=SUBMIT VALUE=Submit>
43: </FORM>
44: <HR>
45: <B>Form Content</B><BR>
46: <TABLE>
47: <%  Enumeration parameters = request.getParameterNames();
48:     while(parameters.hasMoreElements()){
49:         String parameterName = (String)parameters.nextElement();
50:         String parameterValue = request.getParameter(parameterName); %>
51:         <TR>
52:             <TD><%=parameterName%></TD>
53:             <TD><%=parameterValue%></TD>
54:         </TR>
55: <%  }   %>
56: </BODY></HTML> 
```

# sql-server - 如何将网络路径传递给存储过程？

> ID：10429463
> 
> 赞同：1
> 
> 时间：2012-05-03T10:24:23.840
> 
> 标签：sql-server, networking, stored-procedures, path

我有一个存储过程（[上一个问题](https://stackoverflow.com/q/10427451/637425)），但现在我想在网络位置而不是服务器上的位置进行备份。

如果我使用如下命令：

```
sp_doStuff '\\172.16.97.15\DbBCK\', 'MyDatabase', 'F' 
```

然后我收到以下错误：

> 消息 3201，级别 16，状态 1，行 1
> 无法打开备份设备 '\172.16.97.15\DbBCK\MyDatabase_Full_20120503113029.BAK'。操作系统错误 5（拒绝访问。）。
> 消息 3013，级别 16，状态 1，第 1 行
> 备份数据库异常终止。

我还尝试制作该位置的网络驱动器（'Z：'），然后按如下方式运行突击队：

```
sp_doStuff 'Z:\', 'MyDatabase', 'F' 
```

然后我得到这个错误：

> 消息 3201，级别 16，状态 1，第 1 行
> 无法打开备份设备“Z:\MyDatabase_Full_20120503113340.BAK”。操作系统错误3（系统找不到指定的路径。）。
> 消息 3013，级别 16，状态 1，第 1 行
> 备份数据库异常终止。

但我可以去路径，路径确实存在。有没有人知道这是否可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:35:07.723

使用[@wqw](https://stackoverflow.com/users/40691)和[@Filburt](https://stackoverflow.com/users/205233/)提供的信息，我将我的SQL EXPRESS 服务设置为使用我的管理员帐户，然后它能够​​执行命令`'\\172.16.97.15\DbBCK\'`。给他们很多赞！

# xml - Delphi XML - 从父节点获取值

> ID：10429466
> 
> 赞同：2
> 
> 时间：2012-05-03T10:24:32.490
> 
> 标签：xml, delphi

我是在 Delphi 中使用 XML 的新手，并且已经使用已经发布的问题来找出我需要知道的大部分内容（谢谢！）。但是......我正在努力从我们的供应商之一发布的 XML 文件的顶部获取数据值。

XML 文件的顶部如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<form billId="1004" penId="ABCDE" appName="Report Sheet" penSerialNo="AJX-AAT-AGK-B4" >
<question id="1" reference="site_name" value="Acme Inc" /></question>
<question id="2" reference="site_address" value="London" /></question>
<question id="3" reference="TQM_job_no" value="AB1234567" /></question>
<question id="4" reference="TQM_site_no" value="XX999" /></question> 
```

如何获取**penId**和**penSerialNo**值？

作为参考，我正在使用从网站上的另一篇文章中获得的以下代码来遍历 XML 并从*问题*节点获取值：

```
for i:= 0 to XMLDocument1.DocumentElement.ChildNodes.Count - 1 do
   begin
       Node:= XMLDocument1.DocumentElement.ChildNodes[I];
 if Node.NodeName = 'question' then
  begin
   if Node.HasAttribute('value') then
    VALUEvar:= Node.Attributes[value'];
    // do something with VALUEvar which is a string
      end;
end;
end; 
```

我真的很感激可以提供的任何帮助......在此先感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T11:59:11.533

因为`form`是你的根节点，你可以使用这样的东西：

```
uses
  XMLDoc, XMLIntf;

procedure TForm1.Button1Click(Sender: TObject);
var
  XMLDocument: IXMLDocument;
begin
  XMLDocument := LoadXMLDocument('c:\YourFile.xml');
  if XMLDocument.DocumentElement.HasAttribute('penId') then
    ShowMessage(VarToStr(XMLDocument.DocumentElement.Attributes['penId']));
  if XMLDocument.DocumentElement.HasAttribute('penSerialNo') then
    ShowMessage(VarToStr(XMLDocument.DocumentElement.Attributes['penSerialNo']));
end; 
```

无论如何，您的文件无效。您不能使用包含的标签，例如：

```
<tag attr="value"/></tag> 
```

要么使用：

```
<tag attr="value"/> 
```

或者

```
<tag attr="value"></tag> 
```

# ruby-on-rails-3 - Rails 用设计形成助手

> ID：10429468
> 
> 赞同：0
> 
> 时间：2012-05-03T10:24:40.337
> 
> 标签：ruby-on-rails-3, devise

我正在使用带有设计的 rails 3.2.3 来注册和登录用户。问题是设计（我在这里可能错了）以某种方式覆盖了表单中发生错误的表单助手的解释（例如，注册/新表单）。它放置标签和输入，在某种 div 块中是错误的，并破坏了视图。

如何自定义该行为？

**更新 1**

views/devise/registrations/new.html.erb 看起来像这样：[https ://gist.github.com/2585197](https://gist.github.com/2585197)

如果发生错误，这里是输出：[https ://gist.github.com/2585208](https://gist.github.com/2585208)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:36:42.383

您将需要为模型生成视图。例如

```
rails generate devise:views users 
```

这使您可以控制从设计中获得的视图。在此处查看文档

[https://github.com/plataformatec/devise](https://github.com/plataformatec/devise)

# oop - App Engine 中的对象实例

> ID：10429470
> 
> 赞同：1
> 
> 时间：2012-05-03T10:24:42.693
> 
> 标签：oop, google-app-engine

我正在使用 App Engine 和 Webapp2 开发一个网站。

我了解 OO 的概念以及它们在 Python 中的应用方式。但是我对 App Engine 如何使用 OO 感到困惑。创建我的应用程序实例时，是否为每个用户创建并重复使用每个类的一个实例？还是为每个用户创建单独的实例？这将决定我应该使用实例变量还是类变量。

所以更具体地说，我什么时候应该使用 self. 变量（实例变量）以及何时应该省略 self. （类变量）？

谢谢你的帮助。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T15:40:39.757

我会将面向对象 (OO) 和请求处理的概念分开。首先，App Engine 基于请求驱动模型。请求是在 App Engine 上触发的大多数操作的基础。

其次，请注意 App Engine 实例[0] 和 webapp2.WSGIApplication[1] 之间的区别，它类似于应用程序的容器并由 App Engine 基础设施提供，它是你定义的类。

为简化起见，我假设您的应用程序只有 1 个 webapp2.WSGIApplication 。现在让我们从您的应用程序收到的第一个请求开始。在此之前，除了 App Engine 机器上可用的代码和配置之外，您的应用程序不存在任何内容。一旦请求到达 App Engine，就会创建一个新的 App Engine 实例[0]。一旦 App Engine 实例就位并设置好，它将实例化一个 webapp2.WSGIApplication 实例[1]。现在您拥有两个相关的“实例”，对象是容器的一部分。接下来，传入的请求被路由到您的 webapp2.WSGIApplication 实例，该实例将根据您所做的实现处理请求。

App Engine 系统将根据负载为您创建新的 App Engine 实例。如果单个实例无法处理所有进来的请求，它将创建一个新实例（首先是 [0]，然后是前者中的 [1]）并分散负载。如果这还不够，则创建第三个实例，依此类推。如果负载减少，情况也是如此。如果您的应用程序当前在 3 个实例上运行，但 2 个足以处理负载，则将杀死 1 个实例。此外，您不知道哪个特定实例将处理哪个请求。

这将我们引向您的第二个问题，您是否应该依赖实例变量。因为 App Engine 会在看起来合适的时候创建和终止实例，并且您不知道哪个实例处理请求，所以您应该始终假定实例是无状态的。虽然情况并非总是如此，但每个请求都可能由一个全新的实例处理。

如果您需要状态，请使用 memcache（易失性）或数据存储（持久性）或其他一些数据后端（blobstore、文件 API 等）。

[0] [https://developers.google.com/appengine/docs/adminconsole/instances](https://developers.google.com/appengine/docs/adminconsole/instances)

[1] [http://webapp-improved.appspot.com/guide/app.html](http://webapp-improved.appspot.com/guide/app.html)

PS：人们确实使用实例内存来优化请求，但是开始学习 App Engine 的初学者应该认为这是一种高级技术。

# ajax - 如何重定向到 JSF 中的 Ajax 调用？

> ID：10429471
> 
> 赞同：0
> 
> 时间：2012-05-03T10:24:46.243
> 
> 标签：ajax, url, jsf, commandlink

我在我的 JSF 文件的 commandLink-Tag 中嵌入了一个“ajax 执行”标签，效果很好。

我的问题：我想通过使用 Get-Request 直接执行这个 ajax 调用。到目前为止，我只使用了一个没有任何参数的 html-file(index.html)。

有没有办法通过使用 url/get-parameters 直接调用 AJAX-tag 但将 ajax-tag 保留在 jsf 中？

多谢你们

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T13:35:45.667

要回答问题标题中的问题“如何在 JSF 中重定向到 Ajax 调用？”，只需添加`?faces-redirect=true`到导航案例结果中即可。

```
public String submit() {
    // ...

    return "index?faces-redirect=true";
} 
```

要回答问题正文中的问题，“我想通过使用 Get-Request 直接执行此 ajax 调用”，请将 POST 命令链接替换为普通 GET 链接`<h:link>`，或者`<h:outputLink>`将参数传递为`<f:param>`.

```
<h:link value="link" outcome="index">
    <f:param name="foo" value="bar" />
</h:link> 
```

它们可以通过`<f:viewParam>`或在目标页面中收集和处理`@ManagedProperty`。

# java - 带有 ContextMenu 的 ViewPager，每个视图都不同

> ID：10429473
> 
> 赞同：4
> 
> 时间：2012-05-03T10:24:52.437
> 
> 标签：java, android, contextmenu, android-viewpager

我有`ViewPagerActivity`两种观点。我想注册一个上下文菜单，每个视图都不同。我尝试了一些东西（`registerForContextMenu()`），但我总是以两种视图的行为方式结束第二个视图。有任何想法吗？

```
public class ViewPagerActivity extends UomeActivity {

    private ViewPager viewPager;        
    private ViewPagerAdapter viewPagerAdapter;
    private ListAdapter adapter;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.view_pager);

        refreshAdapter();
    }

    private class ViewPagerAdapter extends PagerAdapter {

        private final List<Transaction> accountTransactions;
        private final List<User> accountUsers;

        public ViewPagerAdapter() {
            // initialize lists
        }

        @Override
        public Object instantiateItem(View collection, int viewPosition) {
            View layout;
            ListView listView;
            switch (viewPosition) {
                case 0:
                    layout = LayoutInflater.from(getApplicationContext()).inflate(
                            R.layout.list_account_paired_transactions, null);

                    List<PairedTransaction> pairedTransactions = getPairedTransactions();

                    adapter = new AccountPairedTransactionItemAdapter(ViewPagerActivity.this,
                            R.layout.list_account_paired_transactions, pairedTransactions);

                    listView = (ListView) layout.findViewById(android.R.id.list);
                    listView.setOnItemClickListener(new OnItemClickListener() {
                        @Override
                        public void onItemClick(AdapterView<?> parent, View view, int position,
                                long id) {
                            // do something
                        }
                    });
                    registerForContextMenu(listView);
                    break;
                case 1:
                    layout = LayoutInflater.from(getApplicationContext()).inflate(
                            R.layout.list_account_transactions, null);
                    initViewPagerInfo(layout, R.string.paired_transactions,
                            R.string.all_account_transactions, R.string.empty, viewPosition);

                    adapter = new TransactionItemAdapter(ViewPagerActivity.this,
                            R.layout.list_account_transactions, accountTransactions,
                            new UserDaoImpl(
                                    getApplicationContext()));

                    listView = (ListView) layout.findViewById(android.R.id.list);
                    registerForContextMenu(listView);
                    break;
                default:
                    throw new IllegalArgumentException("Unsupported number of views.");
            }

            listView.setAdapter(adapter);
            listView.setDivider(new ColorDrawable(R.color.list_separator));
            listView.setDividerHeight(1);
            listView.setBackgroundColor(Color.WHITE);
            listView.setCacheColorHint(Color.WHITE);
            ((ViewPager) collection).addView(layout);

            return layout;
        }

        // omitted

    }

    @Override
    protected void onResume() {
        refreshAdapter();
        super.onResume();
    }

    private void refreshAdapter() {
        viewPagerAdapter = new ViewPagerAdapter();
        viewPager = findById(R.id.view_pager);
        viewPager.setAdapter(viewPagerAdapter);
    }

    @Override
    public void onCreateContextMenu(ContextMenu menu, View view, ContextMenuInfo menuInfo) {
        menu.add(R.string.show_info);
    }

    @Override
    public boolean onContextItemSelected(MenuItem item) {
        // TODO: toast which object has been selected
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:01:23.710

问题是两个视图是同时实例化的（填充 viewpager）。在第二个视图中设置`onRegisterForContextMenu`是从第一个视图覆盖它。

`onContextItemSelected`一种可能的解决方案是检查您的方法中可见的视图。

# javascript - Ajax请求跨域json数据并显示？

> ID：10429475
> 
> 赞同：1
> 
> 时间：2012-05-03T10:24:54.893
> 
> 标签：javascript, jquery

我有一个从另一个域获取 JSON 数据的功能，但我不知道它有什么问题。它永远不会触发成功函数，并且不会返回任何错误。

```
$.ajax({
    url: "http://other-domain.com/sample/Json.aspx",
    dataType: "jsonp",
    type: 'get',
    crossDomain: true,
    jsonp: 'jsonp_callback',
    success: function() {
        alert('abc'); //when success take json data string but i din get in here
    }
}); 
```

有谁知道这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:32:17.517

尝试：

```
$.get('http://other-domain.com/sample/Json.aspx', function(data) {
    alert(data);
}); 
```

你应该得到一个带有 json 字符串（实际上是一个字符串）的警报，而不是使用`jQuery.parseJSON(data)`它，你会得到一个 JSON 对象来处理。

如果这不起作用，也许您需要检查您的获取参数。

编辑：

我刚刚尝试设置此页面：

```
<head>

    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>

    <script>

        $(document).ready(function(){

            $.getJSON('http://api.flickr.com/services/feeds/photos_public.gne?tags=cat&tagmode=any&format=json&jsoncallback=?',function(data){

                alert(data.title);

            });

        });

    </script>

</head>

<body>

    ... WHATEVER ...        

</body> 
```

它工作得很好，它提醒数据对象中的第一个标题元素。

# asp.net - 从 cs 文件 c# 启用下拉菜单、文本框

> ID：10429482
> 
> 赞同：0
> 
> 时间：2012-05-03T10:25:22.590
> 
> 标签：asp.net, c#-4.0

如何从cs文件C#中启用禁用的下拉菜单、文本框

```
 public void fill_name_selectedindexchanged(object sender, EventArgs ex)
{
    //txt_name.Enabled = true;
    ddl_title.Attributes.Add("enabled", "enabled");
    txt_full_name.Attributes.Add("enabled", "enabled");
    txt_login_name.Attributes.Add("enabled", "enabled");
    txt_email.Attributes.Add("enabled", "enabled");
    txtDefaultCompany.Attributes.Add("enabled", "enabled");

    //txt_name.Text = "";
    ddl_title.Items.Clear();
    txt_full_name.Text = "";
    txt_login_name.Text = "";
    txt_password.Text = "";
    txt_email.Text = "";
    AutoCompleteExtender1.ContextKey = ddl_user_type.SelectedValue.Trim();
    string val = ddl_user_type.SelectedValue;
    if (val.Trim() == "N")
    {
        ddl_title.Attributes.Add("enabled", "enabled");
        txt_full_name.Attributes.Add("enabled", "enabled");
        txt_login_name.Attributes.Add("enabled", "enabled");
        txt_email.Attributes.Add("enabled", "enabled");
        txtDefaultCompany.Attributes.Add("enabled", "enabled");
        txt_full_name.Text = "";
        txt_login_name.Text = "";
        txt_email.Text = "";
        mm.getlookup(ddl_title, "title", "u");
    }
} 
```

下拉菜单和文本框保持禁用状态，不会更改为启用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T10:34:23.380

`Enabled`像这样使用：

```
<asp:DropDownList ID="DropDownList1" runat="server" Enabled="False"> 
    </asp:DropDownList> 
```

您也可以在服务器端执行此操作：

```
DropDownList1.Enabled = false; 
```

要`disabled`在服务器控件上设置属性，您必须使用：

```
DropDownList1.Attributes.Add("disabled", "disabled"); 
```

或者启用它：

```
 DropDownList1.Attributes.Remove("disabled"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T10:28:02.017

我假设您正在使用像 ASP 这样的服务器控件`TextBox`？然后你可以使用：

```
txt_full_name.Enabled = true; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T10:32:46.470

除了罗迪给出的答案。
我想补充一点，你可以将一个属性`disabled`及其值`disabled`禁用，但
没有属性`enabled`。要启用 html 输入控件，您必须删除`disabled`属性而不是添加`enabled`属性

# jsp - 以 Nginx 作为反向代理的 tomcat Web 应用程序的上下文路径

> ID：10429487
> 
> 赞同：5
> 
> 时间：2012-05-03T10:25:48.657
> 
> 标签：jsp, tomcat, nginx, jstl, reverse-proxy

我正在尝试在以 Nginx 为前端的 tomcat 服务器上部署一个 Web 应用程序。我遇到的问题是我的jsp页面中的标签打印出“不正确”（从tomcat的角度来看是正确的）上下文路径。

我在 tomcat 上的 Web 应用程序部署在上下文路径：/webApp1 上，tomcat 在端口 8080 上运行。因此可以通过[http://localhost:8080/webApp1访问 Web 应用程序](http://localhost:8080/webApp1)

我的 nginx 配置为 proxy_pass 如下：

```
location / {
    http://localhost:8080/webApp1;
} 
```

使用此配置，Web 应用程序应该使用 url [http://localhost](http://localhost)

这仅适用于主页文本。主页加载成功，但主页上的所有链接都以 /webApp1 为前缀，因为 tomcat 认为它正在自行运行，因此输出上下文路径作为所有链接的前缀。

以前有没有人解决过这个问题。

非常感谢所有答案。

z。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-05T06:18:13.100

在花了很多时间后，我设法解决了这个问题。

[nginx HttpSubsModule](http://wiki.nginx.org/HttpSubsModule)有一个第 3 方模块，它允许您替换响应正文中的字符串（例如 html）。

所以问题可以通过以下方式解决：

```
location / {
    http://localhost:8080/webApp1;
    subs_filter_types text/html;
    subs_filter '/webApp1' '';
} 
```

它将从 html 响应中删除所有上下文“/webApp1”。

希望这对遇到此问题的其他人也有帮助。

z。

# umbraco - 自定义控制器中的 Umbraco.getDictionaryItem 助手

> ID：10429495
> 
> 赞同：2
> 
> 时间：2012-05-03T10:26:23.473
> 
> 标签：umbraco, multilingual, umbraco5

我可以在我的自定义区域中的自定义控制器中访问@Umbraco.getDictionaryItem Helper，然后将其添加到我通过纯 jquery Ajax 呈现的自定义部分页面的模型中。如果我可以在我的 Surface Controller 插件中访问它，那就太好了。

谢谢，

雪儿

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T10:17:50.637

您应该能够在服务器端文件中访问它，是的。您只需要确保在您的项目中引用了正确的 Umbraco DLL（虽然我不能 100% 确定该方法驻留在哪个 DLL 中，但您必须在源代码中查找）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-30T07:40:22.123

将您的自定义控制器创建为 Surface Controller，并获取 IRoutableRequestContext，

```
public class propertydetailsController : SurfaceController
{
    private IRoutableRequestContext _routableRequestContext;
} 
```

然后访问 Umbraco.Cms.Web.Dictionary 中的 Dictionary 助手类，示例代码如下。

```
DictionaryHelper dictionaryHelper = new DictionaryHelper(_routableRequestContext.Application);
string valueDictionary = dictionaryHelper.GetDictionaryItemValueForLanguage("DictionaryName", "en-GB"); 
```

干杯

# android - 我可以单独使用 xml 属性创建一个 android 自定义控件吗？

> ID：10429498
> 
> 赞同：0
> 
> 时间：2012-05-03T10:26:49.247
> 
> 标签：android, android-layout, android-widget, custom-controls, android-ui

是否可以创建一个 android UI 自定义控件。我需要将三个标签放置在单个线性布局中。我是否需要为此目的扩展线性布局类？是否可以不扩展类（线性布局） - 意味着仅使用具有线性布局和所需标签的单个 xml 文件？是否可以单独使用这个 xml 文件而不扩展线性布局类？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:33:07.017

用这个

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/linearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Large Text"
         />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Large Text"
         />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Medium Text"
       />

</LinearLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:36:22.933

是的你可以。您必须创建 XML 布局，就像在 Zaz Gmy 的回答中一样，并通过扩展 LinearLayout 创建您的自定义视图。然后，您必须在视图代码中使用视图作为父容器来扩展此布局：

```
inflater.inflate(R.layout.my_layout, this, true); 
```

# wpf - 从 wpf 窗口获取文本输入

> ID：10429503
> 
> 赞同：3
> 
> 时间：2012-05-03T10:26:57.573
> 
> 标签：wpf, keyboard, window

我在窗口上使用 key_up 事件将键入的数据附加到字符串生成器。

```
<Grid x:Name="grdMain" KeyUp="grdMain_KeyUp">
        <Grid.RowDefinitions>...

    private StringBuilder buffer = new StringBuilder();
    private void Window_KeyUp(object sender, KeyEventArgs e)
    {
        if (e.Key != Key.Enter)
        {
            buffer.Append(e.Key);
        } 
```

问题是应用于缓冲区的数据是“NumPad4”而不是“4”和“D3”而不是“3”......我错过了什么吗？有没有办法像在文本框中输入数据一样附加数据？我知道我可以自己转换数据，但似乎很奇怪，没有内置的方法可以这样做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:16:48.883

您可以使用[TextCompositionManager.TextInput Attached Event](http://msdn.microsoft.com/en-us/library/system.windows.input.textcompositionmanager.textinput.aspx)。

```
<Grid x:Name="grdMain"
      TextCompositionManager.TextInput="grid_TextInput"> 
```

在[TextCompositionEventArgs](http://msdn.microsoft.com/en-us/library/system.windows.input.textcompositioneventargs.aspx)你会找到你想要的。

```
private void grid_TextInput(object sender, TextCompositionEventArgs e)
{
    MessageBox.Show(e.Text);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:06:54.303

好的，乍一看这可能看起来很奇怪，但我相信这是正确的方法。我从 a 派生`TextBox`并添加`ContentPresenter`到那里以托管任何内容和`Content`设置该内容的属性。

因此，创建名为 TextBoxContainer 的 WPF 自定义控件（它是 Visual Studio 模板）。向其中添加以下属性：

```
 #region Content (DependencyProperty)

    /// <summary>
    /// Gets or sets Content property
    /// </summary>
    public object Content
    {
        get { return (object)GetValue(ContentProperty); }
        set { SetValue(ContentProperty, value); }
    }
    public static readonly DependencyProperty ContentProperty =
        DependencyProperty.Register("Content", typeof(object), typeof(TextBoxContainer),
          new PropertyMetadata(null));

    #endregion 
```

将 Assets/generic.xaml 文件中的样式替换为以下内容：

```
<LinearGradientBrush x:Key="TextBoxBorder" EndPoint="0,20" MappingMode="Absolute" StartPoint="0,0">
    <GradientStop Color="#ABADB3" Offset="0.05"/>
    <GradientStop Color="#E2E3EA" Offset="0.07"/>
    <GradientStop Color="#E3E9EF" Offset="1"/>
</LinearGradientBrush>
<Style TargetType="{x:Type local:TextBoxContainer}">
    <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"/>
    <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.WindowBrushKey}}"/>
    <Setter Property="BorderBrush" Value="{StaticResource TextBoxBorder}"/>
    <Setter Property="BorderThickness" Value="1"/>
    <Setter Property="Padding" Value="1"/>
    <Setter Property="AllowDrop" Value="true"/>
    <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
    <Setter Property="ScrollViewer.PanningMode" Value="VerticalFirst"/>
    <Setter Property="Stylus.IsFlicksEnabled" Value="False"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:TextBoxContainer}">
                <Grid>
                    <Microsoft_Windows_Themes:ListBoxChrome x:Name="Bd" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" RenderMouseOver="{TemplateBinding IsMouseOver}" RenderFocused="{TemplateBinding IsKeyboardFocusWithin}" SnapsToDevicePixels="true">
                        <ScrollViewer x:Name="PART_ContentHost" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                    </Microsoft_Windows_Themes:ListBoxChrome>
                    <ContentPresenter Content="{TemplateBinding Content}"/>
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsEnabled" Value="false">
                        <Setter Property="Background" TargetName="Bd" Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}"/>
                        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

并像下面这样使用它：

```
<local:TextBoxContainer TextChanged="TextBoxGrid_TextChanged" >
    <local:TextBoxContainer.Content>
        <Grid>
            <!-- Any markup here -->
        </Grid>
    </local:TextBoxContainer.Content>
</local:TextBoxContainer> 
```

请注意，在任何时候它都有包含​​所有输入文本的文本。您应该注意的唯一一件事是某些元素会阻止某些事件冒泡。例如`TextBox`停止`KeyDown`事件冒泡。因此，如果您放置`TextBox`在`TextBoxContainer`其中并且用户将单击它并开始在那里输入文本 - TextBoxContainer 将不会接收该文本，尽管它会触发`TextChanged`事件。

# javascript - jquery-ui 对话框不会立即打开

> ID：10429508
> 
> 赞同：0
> 
> 时间：2012-05-03T10:27:34.573
> 
> 标签：javascript, jquery, jquery-ui

我正在尝试在操作发生时为用户创建一个简单的进度显示。在执行此操作时，我注意到 jquery-ui 对话框直到所有 javascript 完成后才打开。

我创建了一些伪代码，但示例显示了问题：工作示例：http: [//jsbin.com/isivus](http://jsbin.com/isivus)

代码

```
<!DOCTYPE html>
<html>
<head>
    <link class="jsbin" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />
    <script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.13/jquery-ui.min.js"></script>
    <meta charset="utf-8">
    <title>HoL</title>
</head>
<script>
    $(function() {
        $('#dialog').dialog({
            autoOpen: false,
            width: 600,
            modal: true,
            closeOnEscape: false
        });

        $(".ui-dialog-titlebar").hide();
        $("#progressbar").progressbar({
            value: 0
        });

        $('input').click(function() {
            $('#dialog').dialog('open');
            for (i = 0; i < 100000; i++) {
                var span = document.getElementById('span');
                $('span').text(i);
            }
        });
    });
</script>
<body>
        <div id="dialog">
            <span class="dialogText">text</span>
            <div id="progressbar"></div>
        </div>
        <input type="button" value="Click me!" />
        <span id="span"></span>
</body> 
```

直到循环完成，对话框才会打开。看到我想显示对话框，并在循环运行时更新文本，这并没有真正起作用。

我不是javascript专家，不知道问题出在哪里，希望你们能提供帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:29:40.470

您的循环将在运行时阻止所有内容（很可能**是整个浏览器**）。

将其拆分为可能 10 或 100 个循环的小块，然后异步继续（即使用零延迟 setTimeout）。

这是一些可能完成这项工作的代码：

```
$('input').click(function() {
    $('#dialog').dialog('open');
    var i = 0, elem = $('#span');
    function loop() {
        for(var end = i + 100; i < end; i++) {
            elem.text(i);
        }
        if(i < 100000) {
            window.setTimeout(loop, 0);
        }
    }
    loop();
}); 
```

演示：http: [//jsfiddle.net/ThiefMaster/fKqQg/3/](http://jsfiddle.net/ThiefMaster/fKqQg/3/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-03T10:33:13.553

将`for`循环移动到独立函数中，并使用对话框`open`事件来调用它。

```
 $('#dialog').dialog({
        autoOpen: false,
        width: 600,
        modal: true,
        open: myBlockingLoopFunction, 
        closeOnEscape: false
    });

 function myBlockingFunction() { 
      // your loop here
 } 
```

# android - 在Android中根据时间对数据库列进行排序？

> ID：10429509
> 
> 赞同：0
> 
> 时间：2012-05-03T10:27:49.933
> 
> 标签：android, database

我正在制作一个应用程序，其中我在数据库中设置捕获图像的 URI，我这样做是这样的：

```
db.openDataBase();
                 Calendar cal = new GregorianCalendar();
                 ContentValues initialvalue = new ContentValues();
                 initialvalue.put("CreatedDate",cal.getTimeInMillis());
                 initialvalue.put("ImageUrl", outputFileUri.toString());
                 long rowis = db.insertRecordsInDB("Note", null,initialvalue);
                 db.close(); 
```

我想从按日期排序的列表视图中获取图像。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:38:05.687

Sql 有序查询示例：

```
SELECT * FROM Persons ORDER BY LastName DESC

SELECT * FROM Persons ORDER BY LastName ASC 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:32:54.243

错误：ORDERBY

右：ORDER BY

# asp.net - 使用 Twitter Bootstrap 在 @html.actionlink 中显示 html

> ID：10429510
> 
> 赞同：41
> 
> 时间：2012-05-03T10:27:51.450
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, twitter-bootstrap

我正在使用 Twitter Bootstrap，并试图让我的链接 ASP.Net MVC 看起来不错。

但是，下面链接中的 <i class=... 是 html 编码的，而不是作为 html 发送到浏览器：

```
 @Html.ActionLink("<i class='icon-user icon-white'></i> Create New", "Create", "", New With {Key .class="btn btn-primary"} ) 
```

![按钮如何出现](../Images/c2eeb99283065ca20367a1da8ee2bfa6.png)

有没有办法将 <i class=... 保持为 html，以便按钮正确显示？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-05-03T10:36:43.807

而不是使用`@Html.ActionLink()`，只需自己写出`<a>`标签。您可以使用`@Url.Action()`获取 HREF 属性的操作 URL。

`@Html`助手很好，但它们并不总是提供您需要的灵活性。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-05-03T15:52:33.097

我正在处理同样的问题，但想继续使用帮助程序，因为我正在制作一个 Ajax 按钮。

我最终得到了这两个辅助方法，每个辅助方法一个：

```
public static MvcHtmlString IconActionLink(this AjaxHelper helper, string icon, string text, string actionName, string controllerName, object routeValues, AjaxOptions ajaxOptions, object htmlAttributes)
{
    var builder = new TagBuilder("i");
    builder.MergeAttribute("class", icon);
    var link = helper.ActionLink("[replaceme] " + text, actionName, controllerName, routeValues, ajaxOptions, htmlAttributes).ToHtmlString();
    return new MvcHtmlString(link.Replace("[replaceme]", builder.ToString()));
}

public static MvcHtmlString IconActionLink(this HtmlHelper helper, string icon, string text, string actionName, string controllerName, object routeValues, object htmlAttributes)
{
    var builder = new TagBuilder("i");
    builder.MergeAttribute("class", icon);
    var link = helper.ActionLink("[replaceme] " + text, actionName, controllerName, routeValues, htmlAttributes).ToHtmlString();
    return new MvcHtmlString(link.Replace("[replaceme]", builder.ToString()));
} 
```

只需将它们放入项目中的静态类中，编译即可看到它们（您可能需要在页面上添加 using 语句）。

使用帮助程序时，您可以使用“icon-plus”甚至“icon-plus icon-white”作为图标字符串。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-18T14:49:40.123

***三步解决方案：***

**1\. 创建这个 HtmlExtensions 类：**

```
using System.Web.Mvc;

public static class HtmlExtensions
{
    public static MvcHtmlString ActionButton(this HtmlHelper html, string linkText, string action, string controllerName, string iconClass)
    {
        //<a href="/@lLink.ControllerName/@lLink.ActionName" title="@lLink.LinkText"><i class="@lLink.IconClass"></i><span class="">@lLink.LinkText</span></a>
        var lURL = new UrlHelper(html.ViewContext.RequestContext);

        // build the <span class="">@lLink.LinkText</span> tag
        var lSpanBuilder = new TagBuilder("span");
        lSpanBuilder.MergeAttribute("class", "");
        lSpanBuilder.SetInnerText(linkText);
        string lSpanHtml = lSpanBuilder.ToString(TagRenderMode.Normal);

        // build the <i class="@lLink.IconClass"></i> tag
        var lIconBuilder = new TagBuilder("i");
        lIconBuilder.MergeAttribute("class", iconClass);
        string lIconHtml = lIconBuilder.ToString(TagRenderMode.Normal);

        // build the <a href="@lLink.ControllerName/@lLink.ActionName" title="@lLink.LinkText">...</a> tag
        var lAnchorBuilder = new TagBuilder("a");
        lAnchorBuilder.MergeAttribute("href", lURL.Action(action, controllerName));
        lAnchorBuilder.InnerHtml = lIconHtml + lSpanHtml; // include the <i> and <span> tags inside
        string lAnchorHtml = lAnchorBuilder.ToString(TagRenderMode.Normal);

        return MvcHtmlString.Create(lAnchorHtml);
    }
} 
```

**2.在你的视图中添加这个**

```
@using Extensions 
```

**3\. 并在您需要时简单调用**

```
@: <li class="btn btn-mini btn-inverse"> @Html.ActionButton(lLink.LinkText, lLink.ActionName, lLink.ControllerName, lLink.IconClass)</li> 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-07-08T04:58:07.953

使用[TwitterBootstrapMVC](https://www.twitterbootstrapmvc.com/)。

它与智能感知一起工作，允许流畅的语法，你可以用它写这样的东西：

```
@(Html.Bootstrap().ActionLinkButton("Create New", "Create")
    .IconPrepend(Icons.user, true)
    .Style(ButtonStyle.Primary)) 
```

`true`中的参数`IconPrepend`用于白色图标类型。

此外，它还有很多非常有用的助手。

* * *

免责声明：我是 TwitterBootstrapMVC 的作者

将此库用于 Bootstrap 3 不是免费的。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-03-05T13:10:22.997

```
@Html.ActionLink(" New", "Create", "", new { @class="icon"} ) 
```

在 CSS 样式中：

```
.icon:before{
    font-family: FontAwesome;
    content: "\f055";
} 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2016-01-15T20:13:11.893

```
<a href="@Url.Action("Index","Employee")" class="btn btn-primary">Index</a> 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-08T12:15:32.373

@Html.ActionLink("Link Title", "ActionName", "ControllerName", 新建 {.id = Model.id },**新建 {.class = Html.Raw("btn btn-primary btn-mini")}** )

此 HTML.AcionLink 重载允许您向呈现的 html 添加属性 - 请记住在此重载中为所需参数传递 null/nothing。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2014-05-26T20:38:53.117

对于任何 ASP.NET 用户来说，这就是它对我的工作方式：

```
<%: Html.ActionLink("Cancel", "Index", "Catalog_Users", new { @class = "btn btn-primary" })%> 
```

显示的文本将是：取消。ActionResult 将是 Index 而 Catalog_Users 是控制器。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2015-10-16T18:17:05.907

虽然这个问题很老，但我仍然想提供一个更简单的解决方案。起初，我认为实现这一目标非常困难，但它是如此简单。

```
<a href="@Url.Action("ActionMethod", "Controller",)" class="btn btn-primary"><i class="fa fa-fw fa-bar-chart-o"></i> Chart</a> 
```

@Url.Action() 提供与 Html.ActionLink 相同的功能。请参见下图（顶部按钮正是您使用它的方式，而底部按钮是问题的解决方案。

[![在 MVC Html.Action 函数中使用 html 代码](../Images/0627ee03e85e8b666ad3e8367280b7aa.png)](https://i.stack.imgur.com/DF8IK.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-07-10T09:15:32.430

我喜欢 G Jeny Remirez 的回答。我只是想稍微扩展一下。使用四个参数的 actionlink 来包含该类很重要。所以，如果你只想重定向到同一个控制器，但不同的操作，它是：

```
@Html.ActionLink("cancel", "Index", null, new { @class = "btn" }) 
```

或者，如果您想使用一些参数重定向到同一个控制器：

```
@Html.ActionLink("Cancel", "Index", new { param1 = ViewBag.param1, input = "activity" }, new { @class = "btn" }) 
```

# android - Android SDK Manager 没有下载器库

> ID：10429512
> 
> 赞同：0
> 
> 时间：2012-05-03T10:27:54.663
> 
> 标签：android, sdk

在 Android SDK 中我找不到 Google Market Apk 扩展包。所以我不能在我的项目中包含下载器库。有谷歌市场许可包。

有谁知道问题出在哪里？或者任何人都可以上传库？

截图： http://imgupload.sk/viewer.php?file= [nkcbzgpi736cpalyn43n.jpg](http://imgupload.sk/viewer.php?file=nkcbzgpi736cpalyn43n.jpg)

**编辑** 问题解决了，我下载了新的 SDK 安装程序 v18，一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:30:51.743

这条路径可能对你有帮助......

```
\Android\android-sdk-windows\extras\google\play_apk_expansion 
```

# javascript - 在更改为下一个 td 时更改“th”的背景颜色

> ID：10429519
> 
> 赞同：0
> 
> 时间：2012-05-03T10:28:35.137
> 
> 标签：javascript, jquery, css, html-table

在我对旁边的“td”元素中的“输入”元素进行更改后，我想更改“第”元素的颜色。

这是我使用的 jQuery 脚本。

```
$('#phoneNo').change(function () {
    $(this).closest("tr").find("th").css("background-color","yellow");
    }); 
```

HTML 代码

```
<tr>
    <th>PhoneNo</th>
    <td><input type="text" id="phoneNo"/></td>
    <th>EmailId</th>
    <td><input type="text" id="emailId"/></td>

</tr> 
```

它的行为就像我预期的那样 - 它改变了行中所有“th”元素（代码中的 PhoneNo 和 EmailId）的背景颜色。但我想要的是只改变一个'th'的颜色 - 就在相应的'td'之前的那个（只有PhoneNo）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:30:49.067

```
$('#phoneNo').change(function () {
    $(this).parent().prev("th").css("background-color","yellow");
}); 
```

请注意，由于`.prev()`正在寻找以前的兄弟姐妹，因此您需要先找到 td 元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:30:08.973

```
$('#phoneNo').change(function () {
    $(this).parent().prev('th').css("background-color","yellow");
});​ 
```

[请参阅http://jsfiddle.net/zSjMh/1/](http://jsfiddle.net/zSjMh/1/)上的小提琴

# javascript - 将方法附加到 DOM 元素的 JavaScript 原型

> ID：10429520
> 
> 赞同：0
> 
> 时间：2012-05-03T10:28:35.117
> 
> 标签：javascript, dom

javascript 中的某些对象可以附加一个方法。例如我们可以有`Array.prototype.pop = function() {...}`

所以我想问的是，我们可以在 DOM 元素上附加一个方法吗？

假设我有以下

```
var x = document.getElementById("hello");
x.toggle(); 
```

`toggle`我怎样才能像我们在 jquery 中所做的那样，将调用的方法附加到 DOM 元素？

太感谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:44:02.100

从概念上讲，[您可以附加函数](http://jsfiddle.net/PFGGj/)，因为 DOM 元素毕竟是对象。但是，在实践中，您应该避免这样做。[循环引用](http://en.wikipedia.org/wiki/Circular_reference)是与将对象绑定到 DOM 元素相关的问题之一，这可能导致内存“泄漏”

# c# - 将字符串数组从 C# 应用程序传递到 C++ DLL

> ID：10429521
> 
> 赞同：2
> 
> 时间：2012-05-03T10:28:38.220
> 
> 标签：c#, c++

```
string []URL = {"www.facebook.com","www.orkut.com","www.yahoo.com"};
            Int32 result = URL.Length;
            SetPolicyURL( URL,result ); 
```

这是我的 C# 代码，我试图将字符串数组传递给像这样导入的 C++ Dll

```
 [PreserveSig]
    [DllImport("PawCtrl.dll", SetLastError = true, CharSet = CharSet.Auto,  CallingConvention = CallingConvention.StdCall)]
    public static extern void SetPolicyURL( string []policy, Int32 noURL); 
```

但我无法在我的 c++ DLL 中接收它。

```
 PAWCTRL_API void __stdcall SetPolicyURL( char ** URLpolicy, __int32 noURL)
 {

for ( int i = 0; i < noURL; i++)
     {

    URLvector.push_back(URLpolicy[i]);
  }
 } 
```

请任何人都可以帮助我如何通过该功能

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:46:44.473

CharSet = CharSet.Auto 是错误的，它必须是 CharSet.Ansi 才能与本机代码中的 char* 兼容。如果仍然有问题，请使用启用了非托管调试的调试器，在函数的第一条语句上设置断点。

还要drop [PreserveSig]，这里没有意义。并且 SetLastError 很可能是错误的，这仅在 Windows api 函数上很典型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-16T02:51:28.677

将字符串数组从 VB.Net 传递到 C 的示例。兼容 32 位和 64 位。

VB.Net：

```
Private Declare Function main_net32 Lib "MyCLib32.dll" Alias "_main_net@8" (ByVal argc As Int32, ByRef sArgs() As String) As Int32
Private Declare Function main_net64 Lib "MyCLib64.dll" Alias "main_net" (ByVal argc As Int32, ByRef sArgs() As String) As Int32

Private Sub MainWindow_Loaded(sender As Object, e As RoutedEventArgs) Handles Me.Loaded
    Dim sArgs() As String = Environment.GetCommandLineArgs
    Dim result As Int32
    If Environment.Is64BitProcess Then
        result = main_net64(sArgs.Length, sArgs)
    Else
        result = main_net32(sArgs.Length, sArgs)
    End If
End Sub 
```

C：

```
#define DllExport(result) __declspec(dllexport) result __stdcall
DllExport(int) main_net(int argc, char ***argv)
{
    int i;
    for(i=0;i<argc;i++)
        printf("%d: %s",i,(*argv)[i]);
} 
```

# php - 用我的 php 代码用 hsl 和函数着色

> ID：10429525
> 
> 赞同：-2
> 
> 时间：2012-05-03T10:28:49.757
> 
> 标签：php, html

我已经完成了这段代码，但是它没有按照我想要的方式工作。我正在尝试为一段字符串着色。颜色由一个函数`getcolor`决定，该函数由一个名为 raw transform 的函数决定，该函数会将原始分数转换为我的 switch case 的 1-9 分数。任何人都可以提供一些帮助吗？`$col`由另一个函数分配-为了参数，可以说它定义为：`$col= 0`.

```
<?php

$raw= 650;
function rawtransform($raw) {
  $score = (int)($raw/50)-9;
}
    //==========================================================================
//            Function to decide which color system                         //
//==========================================================================   
function getcolor($score, $col)
{
switch ($score){
// to return the function best way is to declare the case outcome as a variable eg.$truecol
case 1: /*500-550(Raw Score)*/
    $truecol="<span style=\"color: hsl($col,100%,90%);\">";
    break;
case 2: //550-600
    $truecol="<span style=\"color: hsl($col,100%,80%);\">";
    break;
case 3: //600-650
    $truecol="<span style=\"color: hsl($col,100%,70%);\">";
    break;
case 4: //650-700
    $truecol="<span style=\"color: hsl($col,100%,60%);\">";
    break;
case 5: //700-750
    $truecol="<span style=\"color: hsl($col,100%,50%);\">";
    break;
case 6: //750-800
    $truecol="<span style=\"color: hsl($col,100%,40%);\">";
    break;
case 6: //800-850
    $truecol="<span style=\"color: hsl($col,100%,30%);\">";
    break;
case 7: //850-900;
    break;
case 8: //900-950
    $truecol="<span style=\"color: hsl($col,100%,20%);\">";
    break;
case 9: //950-1000
    $truecol="<span style=\"color: hsl($col,100%,10%);\">";
    break;
   }
}

   $query="AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBBCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCCC";

$seq=chunk_split($query,50,"<br />");
getcolor($score);
function colorSequence ($seq,$position,$truecol,$TFBSlength){
    $nucleotides = str_split($seq);
    foreach ($nucleotides as $index => $nucl){
        if ($index == $position){
            echo $truecol;
        }
        if ($index == $position + $TFBSlength){
            echo "</span>";
        }

        echo $nucl;
    }
    echo "\n";
}
colorSequence($seq,49,$truecol,1);
?> 
```

输出不包括所选核苷酸的颜色。有谁知道为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:49:12.950

您不将返回值分配给`getcolor($score);`变量。我打赌它应该像`$truecol = getcolor($score);`打电话之前一样`colorSequence($seq,49,$truecol,1);`。

# asp.net - Asp.net 身份验证：使用不同浏览器的奇怪行为

> ID：10429527
> 
> 赞同：0
> 
> 时间：2012-05-03T10:28:57.967
> 
> 标签：asp.net, authentication

我正在使用 asp.net / windows 集成身份验证将我的用户（公司内部）“重定向”到不同的页面。在我的网络配置中

```
<authentication mode="Windows"/>
<authorization>
  <deny users="?"/>
</authorization> 
```

在主页的 Load 事件中，我有以下代码：

```
 Dim User As System.Security.Principal.IPrincipal
      Dim username As String

      User = System.Web.HttpContext.Current.User
      username = User.Identity.Name 'Here i'm getting something like MyDomain\MyName
      If User.Identity.IsAuthenticated Then
          'goto main page
      else
          'goto another page (where to login)
          'and print a label like "Welcome " + username + " to my webpage"
      end if 
```

问题是我对不同的用户和浏览器有不同的行为。例如

*   Internet Explorer 8,9 运行良好：它不询问我的用户名
*   Chrome 也很好用
*   Firefox：firefox 询问我的用户名和密码（所以我输入类似 MyCompanyDomain\MyName 和我的密码）

难道我做错了什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:34:26.237

谷歌搜索给出了： [firefox-and-integrated-windows-authentication](http://markmonica.com/2007/11/20/firefox-and-integrated-windows-authentication/)

您必须修改 Firefox 中的设置以信任该站点才能正常工作

# php - 正则表达式和 preg_replace_callback

> ID：10429533
> 
> 赞同：2
> 
> 时间：2012-05-03T10:29:32.163
> 
> 标签：php, regex

我有一个正则表达式的问题。
我正在使用令牌，我必须解析这样的文本：

```
Just some random text
#IT=AB|First statement# #xxxx=xxx|First statement|Second statement#
More text 
```

我`preg_replace_callback`之所以使用，是因为我必须使用第一个语句或第二个语句，这取决于第一个表达式是否为真；这是一种`IF...ELSE...`声明。

我期望的是这样的两个元素：

```
#IT=AB|First statement# 
#xxxx=xxx|First statement|Second statement# 
```

所以我可以在我的回调函数中开始操作它们。
我试过这个正则表达式`/#.*#/`，但我得到了整个字符串，它没有被解析成元素。

我怎样才能做到这一点？对不起，正则表达式不是我的事:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T10:32:09.750

量词`*`默认是贪婪的。因此，a`.*`将尽可能匹配，因此它也将匹配 a `#`。要解决此问题，您可以通过在其后添加 a 来使`*`非贪婪`?`。现在，a`.*?`将尽可能少地尝试。

```
/#.*?#/ 
```

或者您可以只查找两个 # 之间的非 # 字符：

```
/#[^#]*#/ 
```

# php - HTTP/1.1 303 重定向以避免刷新时重新提交

> ID：10429537
> 
> 赞同：0
> 
> 时间：2012-05-03T10:29:53.210
> 
> 标签：php, redirect, refresh, http-1.1

拜托我需要你的帮忙。我正在我的网站上编写评论功能脚本，并且我正在尝试将垃圾邮件减少到最低限度。我的问题/问题是，当用户/机器人（可能）提交评论时，我有此代码来执行 HTTP /1.1 303 重定向到同一页面，这样当用户尝试刷新页面时，之前的评论不会重新提交。

这是否足以减少垃圾邮件。

感谢您的时间、耐心和回答。我最欣赏它。

```
 header("HTTP/1.1 303 See Other");
       header("Location: http://127.0.0.1/     main/forum/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:31:08.207

这对垃圾邮件或机器人提交您的表单没有影响。唯一有用的是通过按 F5（刷新页面）来避免**意外重新提交，尽管通常它是通过 301 或 302 重定向完成的。**

我现在[在维基百科上](http://en.wikipedia.org/wiki/HTTP_303)读到：

> HTTP 响应状态代码 303 See Other 是将 Web 应用程序重定向到新 URI 的正确方式，尤其是在执行 HTTP POST 之后。

这表明 303 在您的情况下是正确的 HTTP 响应。但大多数人可能仍然使用 302。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:40:02.913

我认为这不会帮助您实现目标，`reduce spamming`您可以执行以下操作

A. 检查页面是否已刷新然后重定向，这已在此处进行了广泛讨论：请参阅

[PHP 刷新](https://stackoverflow.com/questions/456841/php-refresh)

B. 为了防止适当的泛滥，需要限制每个 IP 地址的请求数，请参见

[防止PHP脚本被淹没](https://stackoverflow.com/questions/10155339/prevent-php-script-from-being-flooded/10155437#10155437)

**编辑 1**

您要求的非 OOP 版本：

```
$memcache = memcache_connect ( 'localhost', 11211 );
$runtime = memcache_get ( $memcache, 'floodControl' );
if ((time () - $runtime) < 2) {
    die ( "Die! Die! Die!" );
} 
else {
    echo "Welcome";
    memcache_set ( $memcache, "floodControl", time () );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T10:43:52.347

简短的回答：没有。

Long answer: No, redirects have nothing to do with spamming. Spammers are making use of the full HTTP protocol of which the various status codes like 303 See Other are part of. Any HTTP client - spammer or not - is able to deal with these.

What actually helps to prevent spamming is to display a secondary page which asks again for posting the content (like a preview). Most spam bots don't get that and it's user-friendly as well.

# python - 如何在 python 中更改现有 3rd 方库中的函数

> ID：10429547
> 
> 赞同：11
> 
> 时间：2012-05-03T10:30:15.380
> 
> 标签：python

这是问我的一个面试问题。如果没有意义，请不要惩罚我。她问：

“我在 python 中有一个现有的 3rd 方库，其中有一个函数 foo()。导入现有模块后如何修改该函数？”

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-03T10:35:04.180

这称为猴子修补。简而言之，您可以只分配给持有该函数的变量：

```
import existingmodule

existingmodule.foo = lambda *args, **kwargs: "You fail it" 
```

这在实践中很少是正确的答案。最好用自己的函数包装一些东西，或者在其他地方提供自己的实现，或者使用继承（如果是类上的方法）。

这样做的唯一原因是如果您需要将更改的行为反映在库自己的代码（或其他第三方代码）中；如果是这样，请好好测试。这通常是比创建自己的分叉更好的方法；也就是说，将您的代码作为补丁提交可能是一个好主意，因此如果它被项目接受，不仅仅是您支持它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T10:35:37.470

最常见的方法是[猴子补丁](http://en.wikipedia.org/wiki/Monkey_patch)（参见：[stackoverflow：什么是猴子补丁](https://stackoverflow.com/questions/5626193/what-is-monkey-patching)）

例如：

```
>>> import os
>>> os.listdir('.')
['file_a', 'file_b']
>>> os.listdir = lambda folder: ['nothing in here, nope!']
>>> os.listdir('.')
['nothing in here, nope!'] 
```

在 PyCon 2012 上有一个关于这个主题的非常好的[演讲，你可以在](https://us.pycon.org/2012/schedule/presentation/380/)[youtube](http://youtu.be/Adr_QuDZxuM)上观看

该演讲还提供了一个很好的例子，说明猴子补丁在哪里有用：假设您有一个第三方库可以做某件事。要做到这一点，这个脚本需要以 root 身份运行 - 但实际功能不需要 root 权限。现在第三方库可能正在使用`os.geteuid() == 0`. 通过在使用此库的代码中进行猴子修补，您可以覆盖`geteuid`伪造为 root 以解决此限制。

使用猴子补丁是快速修复库的好方法。提交错误报告并等待补丁可能需要一段时间，因此您可以通过这种方式帮助自己，而无需深入研究库源代码。

# bash - 当应用程序执行脚本时，不会运行 bash 脚本中的 SSH 命令

> ID：10429548
> 
> 赞同：0
> 
> 时间：2012-05-03T10:30:15.770
> 
> 标签：bash, ssh, pgpool

我正在使用 PG 池，它在数据库节点出现故障时执行故障转移脚本。脚本需要在新的master上触及某个文件，并在旧的master上做一些改变。当我运行它时它工作正常，但当它由应用程序运行时它不会。我知道脚本正在正确执行，因为它会向我发送一封包含主机详细信息的电子邮件。设置了密钥，因此不需要密码。

脚本如下：

```
#! /bin/sh

OLD_HOST=$1
NEW_HOST=$2

# new host: touch trigger file
/usr/bin/ssh -T root@$NEW_HOST /bin/touch /mirror/pg_trigger/trigger

# old host: remove trigger file
/usr/bin/ssh -T root@$OLD_HOST /bin/rm /mirror/pg_trigger/trigger -f

# old host: rename recovery.done to recovery.conf
/usr/bin/ssh -T root@$OLD_HOST /bin/mv /opt/postgres/9.1/data/recovery.done /opt/postgres /9.1/data/recovery.conf -f 
```

如果旧/新主机是本地机器，它甚至都不起作用。我感觉这与它通过 pgpool 用户运行有关，但我真的不确定。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:38:41.650

当您手动运行它时，您是否以`pgpool`用户身份运行？SSH 密钥是每个用户的，因此如果您以不同的帐户运行，您将获得不同的结果。

您还可以尝试`-i <keypath>`使用 SSH 标志来明确地将路径传递给您的密钥。

# .net - MSTest（控制台）中的类别和 .orderedtest

> ID：10429551
> 
> 赞同：0
> 
> 时间：2012-05-03T10:30:27.353
> 
> 标签：.net, unit-testing, mstest, ordered-test

有没有办法在 MSTest 中同时使用类别和有序测试？

```
[TestMethod, TestCategory("UITest")]
public void TestMethod()
{
} 
```

并将一个新的有序测试添加到我的测试项目中。

好吧..从命令行调用此方法，例如：

```
MSTest.exe /testcontainer:MyOrderedTest.orderedtest 
```

它将执行测试方法。

但是当像下面这样调用 MSTest 时：

```
MSTest.exe /testcontainer:MyOrderedTest.orderedtest /category:UITest 
```

它找不到测试方法..

奇怪的行为 ..

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:14:35.377

当您使用该`/testcontainer:[file name]`选项时，您告诉 MSTest 运行此文件中指定的测试。因此，您的带有该属性的单元测试`[TestMethod, TestCategory("UITest")]`将不会运行，因为它不包含在`MyOrderedTest.orderedtest`.

您可以创建一个`TestList`来实现此行为，其中将包含属于该`UITest`类别的所有测试，`OrderedTest`然后运行以下命令：

```
MSTest.exe /testmetadata:$(ProjectDir)\TestProject.vsmdi /testlist:ListName 
```

# sql - 在 JOINed 表中的列上使用 SUM 的 SQL 查询

> ID：10429555
> 
> 赞同：6
> 
> 时间：2012-05-03T10:30:41.663
> 
> 标签：sql, join, sum, derby

我想一起查询 derby 数据库中有两个表。

```
Orders
+----+--------+--------------+------------+
| ID | UserID | PurchaseDate | TotalPrice |
+----+--------+--------------+------------+
|  1 |    1   | TIMESTAMP    |    7.00    |

OrderItems
+---------+-----------+----------+
| OrderID | ProductID | Quantity |
+---------+-----------+----------+
|    1    |      1    |     2    | 
```

我想要一个查询来返回 Orders 表中有关订单的所有信息以及与该订单关联的产品总数。

我试过这个，以为它会起作用，但得到错误 - “列引用'ID'无效。当 SELECT 列表包含至少一个聚合时，所有条目都必须是有效的聚合表达式。”

```
SELECT 
orders.ID, orders.UserID, orders.PurchaseDate, orders.TotalPrice, SUM(Quantity) 
AS productCount
FROM app.orders JOIN app.orderItems ON orders.ID=orderItems.OrderID 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-05-03T10:48:12.657

```
SELECT 
app.orders.ID, app.orders.UserID, app.orders.PurchaseDate, app.orders.TotalPrice, SUM(app.orderItems.Quantity) 
AS productCount
FROM app.orders JOIN app.orderItems ON app.orders.ID=app.orderItems.OrderID 
group by app.orders.ID, app.orders.UserID, app.orders.PurchaseDate, app.orders.TotalPrice 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:34:15.053

我认为您需要一个 group by 子句，例如：

```
GROUP BY orders.ID,orders.UserID,orders.PurchaseDate,orders.TotalPrice 
```

# python - 动画二次网格变化（matshow）

> ID：10429556
> 
> 赞同：11
> 
> 时间：2012-05-03T10:30:42.517
> 
> 标签：python, numpy, matplotlib

我有一个带有一些值的 NxN 网格，每个时间步都会改变。我找到了一种用函数绘制单个网格配置的`matshow`方法，但我不知道如何在每个时间步更新状态。这是一个简单的例子：

```
from pylab import *
from matplotlib import pyplot

a = arange(25)
a = a.reshape(5,5)
b = 10*rand(5,5)
matshow(a-b, cmap = cm.jet)
colorbar()
show() 
```

此代码生成以下图片： ![在此处输入图像描述](../Images/4ae752ee3dbef90954096d492e9600ae.png)
现在假设下一个时间步一些值发生了变化，这张图片也应该如此。这是我想到的逻辑：

```
from pylab import *
from matplotlib import pyplot

a = arange(25)
a = a.reshape(5,5)
time=10
for t in range(time):
    b = 10*rand(5,5)
    print b
    matshow(a-b, cmap=cm.jet)
    colorbar()
show() 
```

这会产生 10 张图片。我想对此进行动画处理，而不是生成单独的图片，例如，我想选择更改之间的时间步长（即帧速率）。
另外，我对不同功能的建议持开放态度，如果`matshow`不是要走的路，但请保持简单，我相对缺乏经验。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-03T12:17:44.797

matplotlib 1.1 有一个动画模块（查看[示例](http://matplotlib.sourceforge.net/examples/animation/index.html#animation-examples-index)）。

使用`animation.FuncAnimation`你可以像这样更新你的情节：

```
import numpy as np
import matplotlib.pyplot as plt 
import matplotlib.animation as animation

def generate_data():
    a = np.arange(25).reshape(5, 5)
    b = 10 * np.random.rand(5, 5)
    return a - b 

def update(data):
    mat.set_data(data)
    return mat 

def data_gen():
    while True:
        yield generate_data()

fig, ax = plt.subplots()
mat = ax.matshow(generate_data())
plt.colorbar(mat)
ani = animation.FuncAnimation(fig, update, data_gen, interval=500,
                              save_count=50)
plt.show() 
```

您可以使用以下方法保存动画：

```
ani.save('animation.mp4') 
```

我保存它

```
ani.save('animation.mp4', clear_temp=False) 
```

帧被保留，您可以创建一个如下所示的动画 gif

```
convert *.png animation.gif 
```

![在此处输入图像描述](../Images/a47b8bf0d10c36334c0d14c1243224ff.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T11:24:26.337

最简单的方法可能是让 matplotlib 保存单个图像，然后让另一个程序或库将它们拼接成动画。这种方法使用一个名为[write2gif](https://sites.google.com/site/almarklein/files-1/images2gif.py?attredirects=0)的模块，但您也可以使用 mencoder、ffmpeg 或任何其他能够生成视频的软件：

```
from images2gif import writeGif
from pylab import *
from matplotlib import pyplot as plt
from PIL import Image

a = arange(25)
a = a.reshape(5,5)
time=10
images = []
for t in range(time):
    fig = plt.figure(figsize = (5, 5))
    ax = fig.add_subplot(111)
    b = 10*rand(5,5)
    cax = ax.matshow(a-b, cmap=cm.jet, vmin = -8, vmax = 24)
    fname = 'tmp%03d.png' % t
    fig.colorbar(cax)
    fig.savefig(fname)
    images.append(Image.open(fname))
writeGif('matanim.gif', images, duration = .2) 
```

这是一个关于如何在 pylab 的界面中执行此操作的示例。由于连续渲染在与 pylabs gui 处理程序相同的线程中运行，因此效果不佳：

```
from pylab import arange, cm, draw, rand
from matplotlib import pylab as plt
from time import sleep
plt.ion()
a = arange(25)
a = a.reshape(5,5)
fig = plt.figure(figsize = (5, 5))
for i in range(200):
    ax = fig.add_subplot(111)
    b = 10*rand(5,5)
    cax = ax.matshow(a-b, cmap=cm.jet, vmin = -8, vmax = 24)
    if i == 0:
        fig.colorbar(cax)
    draw()
    sleep(0.2) 
```

# node.js - 将 maxAge 与 Express.js 一起使用的正确方法是什么？

> ID：10429557
> 
> 赞同：17
> 
> 时间：2012-05-03T10:30:45.580
> 
> 标签：node.js, express

我已经看到了几种变化。假设我希望我的 cookie 在一秒钟后过期。我应该使用

```
app.use(express.session({ secret: 'mysecret',  maxAge: new Date(Date.now() + 1000)})); 
```

或者

```
app.use(express.session({ secret: 'mysecret',  maxAge: 1000})); 
```

或者

```
app.use(express.session({ secret: 'mysecret',  cookie: {maxAge: new Date(Date.now() + 1000)}})); 
```

或者

```
app.use(express.session({ secret: 'mysecret',  cookie: {maxAge: 1000}})); 
```

还假设我已正确设置我的 cookie 过期并且它已过期。如果用户不重新启动他们的浏览器，他们是否仍然保留 cookie 信息，直到他们这样做？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-05-03T11:14:09.013

我认为您最好直接查看源代码。

对于 Express，它使用连接中间件，这是会话的代码[https://github.com/senchalabs/connect/blob/master/lib/middleware/session.js#L67](https://github.com/senchalabs/connect/blob/master/lib/middleware/session.js#L67)

[在连接站点http://www.senchalabs.org/connect/session.html](http://www.senchalabs.org/connect/session.html)上还有更多文档

所以你可以做

```
app.use(express.session({ secret: 'mysecret',  cookie: {expires: new Date(Date.now() + 1000)}})); 
```

或者

```
app.use(express.session({ secret: 'mysecret',  cookie: {maxAge: 1000}})); 
```

# android - DEVICE_POLICY_SERVICE 无法解析或不是已归档

> ID：10429558
> 
> 赞同：0
> 
> 时间：2012-05-03T10:30:46.847
> 
> 标签：android, device-admin

我遇到了这段代码的问题。

```
if (Build.VERSION.SDK_INT >= android.os.Build.VERSION_CODES.FROYO){
    DevicePolicyManager mDPM;
    mDPM = (DevicePolicyManager)context_.getSystemService(Context.DEVICE_POLICY_SERVICE);
    mDPM.wipeData(0);
} 
```

错误是：`FROYO can not be resolved or is not a filed`在第 1 行

`DEVICE_POLICY_SERVICE can not be resolved or is not a filed`在第 3行

我以前的图书馆有问题，他们不会通过 eclipse 找到。

对于某些测试，我将我的孔项目导入另一台 PC 并且它在那里工作。我们的管理员告诉我在 Windows 中创建一个新的本地用户，并使用新的工作区将其导入那里，它也可以工作。

我将我的 PC 用户切换为新用户并导入我的所有项目，但现在我收到其中一个错误。

我也在问题中找到了这个：

```
The method removeActiveAdmin(ComponentName) is undefined for the type DevicePolicyManager 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-29T06:23:40.190

我能够修复它，看起来我的 Eclipse 失去了与 ADT 插件的连接。它不能使用 API 8 或更高版本的函数。

从 Eclipse 插件重新安装后，它再次工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-21T23:04:28.230

我将其发布给将来可能会对此进行探索的人们。我发现我在`project.properties`文件中更改了 Android 目标后问题就消失了：

```
target=android-19 
```

`19`是可用的当前（最新）Android 版本。即使在 Android 网站的示例中也会发生此错误。

# c++ - 基于共享内存的聊天应用程序的问题

> ID：10429559
> 
> 赞同：2
> 
> 时间：2012-05-03T10:30:47.203
> 
> 标签：c++, linux, memory, shared-memory, shared

我正在尝试构建一个应用程序，该应用程序有两个使用共享内存交换消息的进程......正如您将看到的那样，我正在做的是请求共享内存，然后在其中放入一个结构。该结构由一个字符串，布尔标志和一个枚举值组成..字符串应该保存消息，标志应该告诉对方是否已经看到了这条消息（因为如果有，则不允许任何人添加消息是内存中的未读消息）我遇到了几个问题 1-我无法在字符串处访问字符串.... 2-当我用 int 替换字符串时，我在尝试时在客户端遇到问题进入内存，这是代码......

服务器端：

```
#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/shm.h>
#include <iostream>
#include <string>
#include <sys/wait.h>
using namespace std;
enum e {Server,Client};

struct chat             // struct that will reside in the memory
{

    bool ifread;        //boolian variable to determin if the message has been raed or not
    e who;
    char message[50];
    int msgl;

};

int main(void)
{
string temp;
int shmid;
//key_t key=ftok(".",'a');
key_t key=433;

if ((shmid = shmget(key, sizeof(chat), IPC_CREAT | 0666)) < 0)
{
cout<<"shmget"<<endl;
return(1);
}

chat *str ;
str = (chat *)shmat(shmid, NULL, 0);

pid_t pid;
pid=fork();
str->ifread==true;

str->who=Server;
if(pid==0)
{

    while(temp!="bye")
    {
        if(str->ifread==false && str->who==Client)
        {
            //cout<<"Client said : ";

            for(int i=0;i<str->msgl;i++)
            cout<<str->message[i];
    str->ifread==true;

        }

    }

}

else if (pid>0)
{
    while(temp!="bye")
    {
    getline(cin,temp);
    str->msgl=temp.length();
    if(str->ifread)
     {
        str->who=Server;
        for(int i=0;i<str->msgl;i++)
         {
            str->message[i]=temp.at(i);
         }

    str->who=Server;
    str->ifread==false;
      }

    else if (!str->ifread && str->who==Client)
       {
    sleep(1);
    waitpid(pid,NULL,0);
        }
}

}

shmctl (shmid, IPC_RMID, NULL);

} 
```

客户端：

```
#include <sys/types.h>
#include <sys/ipc.h>
#include <sys/shm.h>
#include <iostream>
#include <string>
#include <sys/wait.h>
using namespace std;
enum e {Server,Client};

struct chat             // struct that will reside in the memory
{

    bool ifread;        //boolian variable to determin if the message has been raed or not
    e who;
    char message[50];
    int msgl;

};

int main(void)
{
string temp;
int shmid;
//key_t key=ftok(".",'a');
key_t key=433;

if ((shmid = s`hmget(key, sizeof(chat),  0666)) < 0)
{
cout<<"shmget"<<endl;
return(1);
}

chat *str ;
str = (chat *)shmat(shmid, NULL, 0);

pid_t pid;
pid=fork();

if(pid==0)
{

    while(temp!="bye")
    {
        if(str->ifread==false && str->who==Server)
        {
            //cout<<"Server said : ";

            for(int i=0;i<str->msgl;i++)
            cout<<str->message[i];
    str->ifread==true;

        }

    }

}

else if (pid>0)
{
    while(temp!="bye")
    {
    getline(cin,temp);
    str->msgl=temp.length();
    if(str->ifread)
     {
        str->who=Client;
        for(int i=0;i<str->msgl;i++)
         {
            str->message[i]=temp.at(i);
         }
    str->ifread=false;

      }

    else if (!str->ifread && str->who==Server)
       {
    sleep(1);
    //waitpid(pid,NULL,0);
        }
}

}

shmctl (shmid, IPC_RMID, NULL);

} 
```

在此先感谢，对于糟糕的英语感到抱歉......

编辑：感谢 aix 但还有另一个问题，即客户端首先无法从共享内存中获取任何数据，即使我使用 int x 在它们之间交换数字时，客户端首先仍然给出 0，即使服务器已经放置了另一个值，过了一会儿它在调用 shmget(); 时开始给我一个错误；

编辑（2）：我做了一些更改，但仍然无法正常工作....

编辑（3）：问题解决了谢谢大家，结果是对标志的排序不好，再次感谢......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T10:33:09.340

主要问题是在幕后`std::string`使用堆分配。

这意味着

```
struct chat
{
   string  letter; 
```

不会将整个字符串放入结构中。它放置字符串*对象*，但不一定是与字符串关联的*字符数据。*

解决此问题的一种方法是替换`std::string`为`char[N]`.

通常，在将共享内存用于涉及指针或引用的任何内容时，应格外小心。

此外，为避免构造/破坏的复杂性，最好确保它`chat`是[POD](http://en.wikipedia.org/wiki/Plain_old_data_structure)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T12:04:32.370

我建议使用现有的库，而不是从头开始重新创建所有内容。

例如：[Boost.Interprocess](http://www.boost.org/doc/libs/1_49_0/doc/html/interprocess.html)提供了一个[Message Queue](http://www.boost.org/doc/libs/1_49_0/doc/html/interprocess/synchronization_mechanisms.html#interprocess.synchronization_mechanisms.message_queue)。

请注意，队列中的数据应该是 POD 或使用[进程间分配机制](http://www.boost.org/doc/libs/1_49_0/doc/html/interprocess/allocators_containers.html)。如果可能的话，我建议在将它们写入共享内存之前*序列化你的结构。*以这种方式处理向后和向前兼容性更简单。

# c++ - 无法从源代码安装 opencv

> ID：10429570
> 
> 赞同：5
> 
> 时间：2012-05-03T10:31:20.150
> 
> 标签：c++, opencv

它是 OpenCV-2.4.0

```
cd opencv
mkdir release
cd release
cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D BUILD_PYTHON_SUPPORT=ON -D BUILD_EXAMPLES=ON ..
make 
```

错误：

```
In file included from OpenCV-2.4.0/modules/core/src/system.cpp:460:
OpenCV-2.4.0/release/modules/core/version_string.inc:35:1: warning: missing terminating " character
In file included from OpenCV-2.4.0/modules/core/src/system.cpp:460:
OpenCV-2.4.0/release/modules/core/version_string.inc:35: error: missing terminating " character
OpenCV-2.4.0/release/modules/core/version_string.inc:36:11: error: too many decimal points in number
OpenCV-2.4.0/release/modules/core/version_string.inc:36:29: error: invalid suffix "st" on integer constant
OpenCV-2.4.0/release/modules/core/version_string.inc:40:29: warning: character constant too long for its type
OpenCV-2.4.0/release/modules/core/version_string.inc:57: error: stray ‘@’ in program
OpenCV-2.4.0/release/modules/core/version_string.inc:57: error: stray ‘@’ in program
OpenCV-2.4.0/release/modules/core/version_string.inc:68:10: error: #include expects "FILENAME" or <FILENAME>
OpenCV-2.4.0/release/modules/core/version_string.inc:71: error: stray ‘\’ in program
OpenCV-2.4.0/release/modules/core/version_string.inc:71:9: warning: missing terminating " character
OpenCV-2.4.0/release/modules/core/version_string.inc:71: error: missing terminating " character
OpenCV-2.4.0/release/modules/core/version_string.inc:74:23: warning: missing terminating " character
OpenCV-2.4.0/release/modules/core/version_string.inc:1515: error: stray ‘\’ in program
OpenCV-2.4.0/release/modules/core/version_string.inc:1515:4: warning: missing terminating " character
OpenCV-2.4.0/release/modules/core/version_string.inc:1515: error: missing terminating " character
OpenCV-2.4.0/release/modules/core/version_string.inc: In function ‘const std::string& cv::getBuildInformation()’:
OpenCV-2.4.0/release/modules/core/version_string.inc:36: error: expected ‘,’ or ‘;’ before ‘version’
OpenCV-2.4.0/release/modules/core/version_string.inc:138: error: ‘z_stream’ was not declared in this scope
OpenCV-2.4.0/release/modules/core/version_string.inc:140: error: expected ‘;’ before ‘typedef’
OpenCV-2.4.0/release/modules/core/version_string.inc:161: error: ‘gz_header’ was not declared in this scope
OpenCV-2.4.0/release/modules/core/version_string.inc:163: error: expected ‘;’ before ‘typedef’
OpenCV-2.4.0/release/modules/core/version_string.inc:1505: error: ‘ZEXTERN’ was not declared in this scope
OpenCV-2.4.0/release/modules/core/version_string.inc:1505: error: expected ‘;’ before ‘const’
OpenCV-2.4.0/release/modules/core/version_string.inc:1511: warning: no return statement in function returning non-void
OpenCV-2.4.0/release/modules/core/version_string.inc: At global scope:
OpenCV-2.4.0/release/modules/core/version_string.inc:1515: error: expected unqualified-id before ‘)’ token
OpenCV-2.4.0/modules/core/src/system.cpp:462: error: expected unqualified-id before ‘return’
OpenCV-2.4.0/modules/core/src/system.cpp:465: error: ‘string’ does not name a type
OpenCV-2.4.0/modules/core/src/system.cpp:474: error: ‘string’ does not name a type
OpenCV-2.4.0/modules/core/src/system.cpp:503: error: ISO C++ forbids declaration of ‘Exception’ with no type
OpenCV-2.4.0/modules/core/src/system.cpp:503: error: expected ‘,’ or ‘...’ before ‘&amp;’ token
OpenCV-2.4.0/modules/core/src/system.cpp: In function ‘void error(int)’:
OpenCV-2.4.0/modules/core/src/system.cpp:506: error: ‘exc’ was not declared in this scope
OpenCV-2.4.0/modules/core/src/system.cpp:510: error: ‘exc’ was not declared in this scope
OpenCV-2.4.0/modules/core/src/system.cpp:526: error: ‘exc’ was not declared in this scope
OpenCV-2.4.0/modules/core/src/system.cpp: At global scope:
OpenCV-2.4.0/modules/core/src/system.cpp:543: error: expected declaration before ‘}’ token
make[2]: *** [modules/core/CMakeFiles/opencv_core.dir/src/system.cpp.o] Error 1
make[1]: *** [modules/core/CMakeFiles/opencv_core.dir/all] Error 2
make: *** [all] Error 2 
```

我应该怎么办？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-04T13:45:08.353

我在 Debian 6.0 上构建 OpenCV-2.4.0 时遇到了同样的问题。查看还`release/modules/core/version_string.inc`显示了`"`缺失的评论`/*`，该评论发生在`using zlib v1:1.2.3.4.dfsg-3`. 我重新配置`BUILD_ZLIB`并没有问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T13:54:38.873

我遇到了同样的问题，我通过替换以下行更改了 CMakeLists.txt 文件：

```
OCV_OPTION(BUILD_ZLIB               "Build zlib from source"         WIN32 OR IOS OR APPLE ) 
```

和：

```
OCV_OPTION(BUILD_ZLIB       "Build zlib from source"   ON) #  WIN32 OR IOS OR APPLE ) 
```

一切都很好。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T16:40:41.647

我刚刚从存储库（rev 8300）下载了 OpenCV 2.4.0 源代码，并且在 Linux 上构建它没有问题：

```
$ svn info
Path: .
URL: http://code.opencv.org/svn/opencv/tags/2.4.0/opencv
Repository Root: http://code.opencv.org/svn/opencv
Repository UUID: c5418bc3-7546-4aae-8bad-fa6f2f3e53e6
Revision: 8300
Node Kind: directory
Schedule: normal
Last Changed Author: marina.kolpakova
Last Changed Rev: 8282
Last Changed Date: 2012-04-30 16:06:37 -0300 (Mon, 30 Apr 2012)

$ mkdir build
$ cd build
$ cmake -D CMAKE_BUILD_TYPE=RELEASE -D CMAKE_INSTALL_PREFIX=/usr/local -D BUILD_PYTHON_SUPPORT=ON -D BUILD_EXAMPLES=ON ..
$ make 
```

**20分钟后就结束了，编译成功。**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-01T23:47:11.340

我有同样的问题。似乎错误来自cmake 2.8.2。我升级到 2.8.8 版本，终于可以安装 opencv 2.4.0 了。

# java - Spring动态注入，类工厂模式

> ID：10429572
> 
> 赞同：15
> 
> 时间：2012-05-03T10:31:24.533
> 
> 标签：java, spring, dependency-injection, factory, factory-pattern

依赖注入的延续[，延迟注入实践](https://stackoverflow.com/questions/10384473/dependency-injection-delayed-injection-praxis/10414747)。我有主课：

```
package test;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.ApplicationContext;
import org.springframework.context.support.ClassPathXmlApplicationContext;
import org.springframework.stereotype.Component;

import java.util.List;
import java.util.Scanner;

@Component
public class Main {
    @Autowired
    private StringValidator stringValidator;

    @Autowired
    private StringService stringService;

    @Autowired
    private ValidationService validationService;

    public void main() {
        scanKeyboardCreateLists();

        stringValidator.validate();

        final List<String> validatedList = stringValidator.getValidatedList();
        for (String currentValid : validatedList) {
            System.out.println(currentValid);
        }
    }

    private void scanKeyboardCreateLists() {
        //Let's presume the user interacts with the GUI, dynamically changing the object graph...
        //Needless to say, this is past container initialization...
        Scanner scanner = new Scanner(System.in);
        int choice = scanner.nextInt();

        //Delayed creation, dynamic
        if (choice == 0) {
            stringService.createList();
            validationService.createList();
        } else {
            stringService.createSecondList();
            validationService.createSecondList();
        }
    }

    public static void main(String[] args) {
        ApplicationContext container = new ClassPathXmlApplicationContext("/META-INF/spring/applicationContext.xml");
        container.getBean(Main.class).main();
    }
} 
```

并且对象图是动态创建的，取决于用户交互。我解决了应用程序耦合，让我可以非常简单地测试它。**此外，由于列表由容器维护，因此此应用程序（以及其他所有应用程序）的动态特性是无关紧要的，因为可以在应用程序需要它们的任何时候请求它们，维护它们的元素。**

其余代码在这里：

```
package test;

import java.util.List;

public interface Stringable {
    List<String> getStringList();
}

package test;

import org.springframework.stereotype.Component;

import java.util.ArrayList;

@Component
public class StringList extends ArrayList<String> {
}

package test;

import org.springframework.stereotype.Component;

import javax.inject.Inject;
import java.util.ArrayList;
import java.util.List;

@Component
public class StringService implements Stringable {

    private List<String> stringList;

    @Inject
    public StringService(final ArrayList<String> stringList) {
        this.stringList = stringList;
    }

    //Simplified
    public void createList() {
        stringList.add("FILE1.txt");
        stringList.add("FILE1.dat");
        stringList.add("FILE1.pdf");
        stringList.add("FILE1.rdf");
    }

    public void createSecondList() {
        stringList.add("FILE2.txt");
        stringList.add("FILE2.dat");
        stringList.add("FILE3.pdf");
        stringList.add("FILE3.rdf");
    }

    @Override
    public List<String> getStringList() {
        return stringList;
    }
}

package test;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Component;

import java.util.ArrayList;
import java.util.List;

@Component
public class StringValidator {
    private List<String> stringList;
    private List<String> validationList;

    private final List<String> validatedList = new ArrayList<String>();

    @Autowired
    public StringValidator(final ArrayList<String> stringList,
                           final ArrayList<String> validationList) {
        this.stringList = stringList;
        this.validationList = validationList;
    }

    public void validate() {
        for (String currentString : stringList) {
            for (String currentValidation : validationList) {
                if (currentString.equalsIgnoreCase(currentValidation)) {
                    validatedList.add(currentString);
                }
            }
        }
    }

    public List<String> getValidatedList() {
        return validatedList;
    }
}

package test;

import java.util.List;

public interface Validateable {
    List<String> getValidationList();
}

package test;

import org.springframework.stereotype.Component;

import java.util.ArrayList;

@Component
public class ValidationList extends ArrayList<String> {
}

package test;

import org.springframework.stereotype.Component;

import javax.inject.Inject;
import java.util.ArrayList;
import java.util.List;

@Component
public class ValidationService implements Validateable {

    private List<String> validationList;

    @Inject
    public ValidationService(final ArrayList<String> validationList) {
        this.validationList = validationList;
    }

    //Simplified...
    public void createList() {
        validationList.add("FILE1.txt");
        validationList.add("FILE2.txt");
        validationList.add("FILE3.txt");
        validationList.add("FILE4.txt");
    }

    public void createSecondList() {
        validationList.add("FILE5.txt");
        validationList.add("FILE6.txt");
        validationList.add("FILE7.txt");
        validationList.add("FILE8.txt");
    }

    @Override
    public List<String> getValidationList() {
        return validationList;
    }
} 
```

有谁知道我将如何解决方法调用 createList() 或 createSecondList() - 不使用几乎强制设计的构造函数。我在想一个工厂，但是一个更大的项目中每个班级的工厂似乎不是一个好主意。

就像是：

```
<bean ... factory-method="..." depends-on="..." lazy-init="..."/> 
```

并在工厂方法中实例化该类并调用方法 createList()。或者像这样从某个方法调用它——这又看起来很糟糕，迫使该方法有责任实例化对象图。

我想在运行时解决的运行时依赖关系的图片如下：

![在此处输入图像描述](../Images/9197e504719420d084ca2bf5eb7ba50d.png)

**是否有其他方法可以根据用户交互使用容器来实现动态延迟初始化？**

谢谢你。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-07T14:35:11.103

如果您希望类的某些成员在每次调用相应的 getter 时动态初始化\填充，您可以尝试查找方法注入。[在此处](http://static.springsource.org/spring/docs/1.2.x/reference/beans.html)阅读*第 3.3.4.1 页* 。

因此即使`scope=singletone`每次访问分配了查找方法的字段时（spring bean容器的默认值）中创建了包含动态成员的类，您也会根据查找方法内部实现的业务逻辑获得适当的对象. 在您的情况下，列表是一个接口，因此您可以轻松地在查找方法中实现验证并返回经过验证的列表。

**编辑：**

我在 Spring 文档中找到了更好的[例子](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html#beans-factory-lookup-method-injection)——我认为这很清楚。看看《3.4.6.1 Lookup 方法注入》

当您配置`Main`类时，为其成员分配一个查找方法- 只要您需要bean`List`的新实例，就会调用它。`List`

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-11T19:37:31.463

Spring 是为可重用的组件注入而设计的，而不是为业务数据操作和注入而设计的。

事实上，一些数据用于依赖注入，但仅用于配置组件行为，而不是创建业务数据持有者。

顺便说一句，在您的情况下可以使用以下选项：感谢`BeanFactory`带有[BeanFactoryAware 接口](http://static.springsource.org/spring/docs/3.0.x/api/org/springframework/beans/factory/BeanFactoryAware.html)`getBean()`和使用 scope="prototype"，您可以通过在[该示例](http://nurkiewicz.blogspot.com/2010/08/creating-prototype-spring-beans-on.html)中或从其他问题中调用来生成 bean [：按需创建 bean](https://stackoverflow.com/questions/2128329/creating-beans-on-demand-using-spring) .

如果要准备的 bean 数量有限，另一种选择是使用通用 bean 创建[，就像模拟缺少 bean 一样](https://stackoverflow.com/questions/10247297/automatic-mock-instantiation-in-a-spring-junit-test/10293543#10293543)

现在考虑 Spring 从不会在其 Context 中垃圾收集 bean。所以创建Spring bean来保存业务数据是有内存消耗的风险的。

如果您的目标不同（我希望如此），也许您正在尝试自己实现多租户支持。如果您有不同的业务上下文要使用特定的组件或行为来实现， Spring 会提供*租户*。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-10T00:53:58.150

听起来用户可以选择 1..N 个对象图，而您只想加载用户在运行时选择的那个。如果图表在设计时是已知的，但用户只是选择了他们想要的那个，那么在我看来，你拥有的是一堆 ApplicationContext，而你只想加载用户在运行时选择的一个 ApplicationContext。那么为什么不直接定义一组 ApplicationContexts，然后在运行时实例化正确的一个。由于 Spring 支持 Java Config，因此将这些配置定义为 Java 类可能是有意义的，这样您就可以获得继承并避免剪切/粘贴任何代码。

# android - 无法将 Android 手机连接到 Adhoc 模式

> ID：10429574
> 
> 赞同：0
> 
> 时间：2012-05-03T10:31:35.813
> 
> 标签：android, android-wifi

我无法连接到我在 Windows 7 上的笔记本电脑上创建的开放 AD-HOC 网络，并尝试使用我的 samsung Galaxy i9000 进行连接。我遵循了与上述完全相同的程序，但我无法让它工作。请帮忙。我还需要为 OPEN adhoc 网络添加什么吗？（安卓＃），

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T10:44:34.117

上次我调查这个问题时，Android 不支持股票 ROM 上的 Ad-Hoc 网络。也许这已经在 Android 4.x 中得到修复，但对于 4.x 之前的所有版本，它根本不起作用。

如果您对手机进行 root 并安装[CyanogenMod](http://www.cyanogenmod.com/) ROM，您可以获得有效的 Ad-Hoc 支持。

如果您不想 root 和更改 ROM，另一种方法是创建标准 Wifi 热点而不是 ad-hoc 网络。

在 Windows 上，这可以使用[Connectify之类的程序来实现，也可以使用](http://www.connectify.me/)[http://www.ishanarora.com/2009/07/29/windows-7](http://www.ishanarora.com/2009/07/29/windows-7-as-a-wireless-access-point/)中所述的内置系统工具无需任何其他程序（仅限 Windows 7）来实现[-作为无线接入点/](http://www.ishanarora.com/2009/07/29/windows-7-as-a-wireless-access-point/)。

`System preferences`在 OSX 上，您可以从> `Sharing`>启用 WiFi 热点`Internet Sharing: Wi-Fi`，在 Linux 机器上，您可以使用[hostapd](https://nims11.wordpress.com/2012/04/27/hostapd-the-linux-way-to-create-virtual-wifi-access-point/)守护程序（如果您的 Wi-Fi 适配器支持它）。

最后，也许是最好的解决方案，是买一个 wifi 路由器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T10:34:41.057

Android 不支持 adhoc wifi

=> [http://code.google.com/p/android/issues/detail?id=82](http://code.google.com/p/android/issues/detail?id=82)

但是你有一些替代的 wpa_supplicant 文件可以让你连接到 adhoc wifi。众所周知，它们会导致错误和不稳定。

# entity-framework - 使用两个 EDMX 文件（一个 dbContext，另一个常规 EDMX）时出错

> ID：10429576
> 
> 赞同：4
> 
> 时间：2012-05-03T10:31:39.700
> 
> 标签：entity-framework, entity-framework-4, dbcontext, objectcontext

作为参考，请参阅[这个未回答的问题](https://stackoverflow.com/questions/10086834/entity-framework-error-could-not-find-the-conceptual-model-type-for-x)。我有完全相同的错误。它与错误地使用 Code-First 无关。两个 EDMX 文件（一个使用普通的旧 CodeGen，另一个使用 dBContext T4 代码生成）、两个不同的命名空间、不同的连接字符串等。你明白了。尝试访问数据时，DBContext 模型会引发错误。

因此，在访问`NameSpace.Models.MyEntities.ObjectSet`（dbContext T4 模板生成的对象）时，我收到以下错误：

> 找不到 的概念模型类型 `AnotherNameSpace.Models.MyObjectClass`。

where`AnotherNameSpace.Models.MyObjectClass`指的是不同文件夹/命名空间中完全不同的 EDMX。我在任何 t4 生成的文件等中都找不到任何引用`AnotherNameSpace.Models.MyObjectClass`。这些 EDMX 文件不是相互复制的。从字面上看，EDMX 文件的唯一共同点是它们最终指向同一个数据库（尽管它们不共享连接字符串）。

当尝试访问上面的 ObjectSet 时，它会抛出分类为 a 的错误`System.ArgumentException`：

```
 at System.Data.Metadata.Edm.MetadataWorkspace.GetEdmSpaceType[T](T objectSpaceType)
   at System.Data.Entity.Internal.InternalContext.UpdateEntitySetMappings()
   at System.Data.Entity.Internal.InternalContext.TryUpdateEntitySetMappingsForType(Type entityType)
   at System.Data.Entity.Internal.InternalContext.UpdateEntitySetMappingsForType(Type entityType)
   at System.Data.Entity.Internal.InternalContext.GetEntitySetAndBaseTypeForType(Type entityType)
   at System.Data.Entity.Internal.Linq.InternalSet`1.Initialize()
   at System.Data.Entity.Internal.Linq.InternalSet`1.get_InternalContext()
   at System.Data.Entity.Infrastructure.DbQuery`1.System.Linq.IQueryable.get_Provider()
   at System.Linq.Queryable.Where[TSource](IQueryable`1 source, Expression`1 predicate)
   at GratisWeb.Areas.App.Controllers.WorkplanController.Index() in B:\eGrATIS\Code\src\GratisWeb\Areas\App\Controllers\WorkplanController.cs:line 30
   at lambda_method(Closure , ControllerBase , Object[] )
   at System.Web.Mvc.ActionMethodDispatcher.Execute(ControllerBase controller, Object[] parameters)
   at System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass15.<InvokeActionMethodWithFilters>b__12()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-30T19:44:55.420

解决方案是在两个 EDMX 中进行两个单独的组装，但维护起来非常困难。以下是详细信息：[EDMX 用于遗留代码 _and_ Code First 用于在一个 MVC 项目中一起进行新开发](https://stackoverflow.com/questions/15268036/edmx-for-legacy-code-and-code-first-for-new-development-together-in-one-mvc-pr)

# php - cakePHP 中的验证如何工作？

> ID：10429577
> 
> 赞同：1
> 
> 时间：2012-05-03T10:31:40.613
> 
> 标签：php, validation, cakephp

在验证为真之前，我将向控制器添加什么以显示消息并停止保存？

```
class Rsvp extends AppModel {
var $name = 'Rsvp';
var $validate = array(
                'uname' => array(
                                'rule' => array('alphaNumeric', true),
                                'message' => 'Please enter a vlaid name that does not contain digits'),
                'uemail' => array(
                                'rule' => array('email', true),
                                'message' => 'Please supply a valid email address.')

);

} 
```

控制器

```
public function add() {

    if ($this->request->is('post')) {

        var_dump($this->request->data);
        $this->Rsvp->set('uname', $this->request->data['Post']['name']);
        $this->Rsvp->set('uemail', $this->request->data['Post']['emailaddress']);           
          //Begin Validation Routine
        echo 'Validation';
        var_dump($this->Rsvp->validates);

        $this->Rsvp->save();    
        /*if($this->Rsvp->save()) {
            $this->Session->setFlash('You have RSVP for the event');
           // $this->redirect(array('action' => 'index'));              
        }
        else {
            $this->Session->setFlash('Unable to RSVP you for the event.');
        }*/
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:52:04.200

你的意思是这样的：

```
if($this->Rsvp->validates()) {
   //data validated, so save
   $this->Rsvp->save($this->data);    
}
else {
   $this->Session->setFlash(__('Fill in all required fields.', true));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:48:20.450

默认情况下，该`Model::save()`方法将自动验证。因此，只需尝试保存即可完成验证：

```
if ($this->request->is('post')) {
  if ($this->Rsvp->save($this->request->data)) {
    // validated and saved to db
  } else {
    // didn't validate or failed saving to db
  }
} 
```

如果您不想验证，请使用

```
$this->Rsvp->save($this->request->data, array('validate' => false)); 
```

`validates()`最后，您可以通过设置数据并运行方法来手动验证。

```
$this->Rsvp->set('uname', $this->request->data['Post']['name']);
$this->Rsvp->set('uemail', $this->request->data['Post']['emailaddress']);
$validates = $this->Rsvp->validates(); 
```

如果它没有验证，它将设置`$this->Rsvp->validationErrors`，然后在控制器上设置它，表单助手将意识到这些错误并自动为您显示它们。

您可以在书中阅读有关保存数据和数据验证的更多信息：http: [//book.cakephp.org/2.0/en/models/saving-your-data.html](http://book.cakephp.org/2.0/en/models/saving-your-data.html)

# parallel-processing - PUM - 你知道它是什么吗？

> ID：10429578
> 
> 赞同：-1
> 
> 时间：2012-05-03T10:31:42.447
> 
> 标签：parallel-processing, ada

任务是：比较软件Ada、PUM、Win32。

谁能告诉我什么是“PUM”？

我找到答案。感谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:35:19.590

泵可以是：

> 代表“可能不需要的修改”。PUM 是对计算机设置的不必要更改。PUM 可以由合法应用程序和恶意软件执行，尽管恶意软件所做的更改更有可能导致严重问题。在某些情况下，您可能直到 PUM 发生后才知道它。

从技术术语

或者在另一种情况下（关于软件）：

> Privileged User Manager ® (PUM) 是一款超级用户权限管理软件产品，可让您在基于 UNIX 和 Linux 的系统上集中管理、监控和审核特权用户。

来自 AppleCrossTech

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-03T13:54:21.117

根据[这本教科书](http://books.google.com/books?id=g5HxbbU9LSQC&pg=PA62&lpg=PA62&dq=PUM%20parallel&source=bl&ots=9qNPu9mC0i&sig=BaBGYhzXAdSk3Lhe5K1CAsAdKEg&hl=en&sa=X&ei=jouiT5GjM8iOgweAkeXpCA&ved=0CCkQ6AEwAA#v=onepage&q&f=false)，PUM 显然是并行统一机。根据[本文](https://docs.google.com/viewer?a=v&q=cache%3aC0u7UYL1IpIJ%3amaths.dur.ac.uk/nass/schweitzer.pdf%20&hl=en&gl=us&pid=bl&srcid=ADGEESiUpwrsx7F5-NlusU_A7QzSA04VMpUf2imZe_tZrun_16zfzZYqZ6lCI4nU1TL_sc1ilQu6KH3RpwzmpXomY3o_7lOT9DaQvcILyBl8treKwiu_ObcTYcN1BJs6oDRnPUnkKOWO&sig=AHIEtbSBZrRtbxpJw478wMnUkm6Joia59A&pli=1)，PUM 是 Unity 方法的一个分区。

鉴于这项任务，显然与并行性有关，我敢说需要澄清，因为两者都以某种方式处理它。

# ios - 对两个文本字段使用相同的 UIDatePicker

> ID：10429581
> 
> 赞同：4
> 
> 时间：2012-05-03T10:31:52.337
> 
> 标签：ios, objective-c, xcode, uitextfield, uidatepicker

我有两个文本字段，fromdate 和 todate。如何从同一个 datepicker 获取不同的日期。我尝试了一些方法，当日期更改时，最终在两个文本字段中获得了相同的日期。

```
-(IBAction)dateValueChanged:(id)sender
{
        UIDatePicker *picker = (UIDatePicker *)sender;
        NSDate *dateSelected1 = [picker date];
        NSDate *dateSelected2 = [picker date];

        NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
        [dateFormatter setDateFormat:@"dd-MM-yyyy"];
        self.fromTextField.text = [dateFormatter stringFromDate:dateSelected1];
       self.toTextField.text = [dateFormatter stringFromDate:dateSelected2];
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-07-07T11:55:42.923

一种更优雅的方式可以在没有`UITextFieldDelegate`和的情况下实现这一点`textFieldDidBeginEditing:`

只需检查[`firstResponder`](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/EventOverview/EventArchitecture/EventArchitecture.html)

```
- (IBAction)dateValueChanged:(id)sender
{
    NSDate *dateSelected = [picker date];
    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"dd-MM-yyyy"];

    if ([firstTextField isFirstResponder])
    {
      firstTextField.text = [dateFormatter stringFromDate:dateSelected];
    }
    else if ([self.endTextField isFirstResponder])
    {
        secondTextField.text = [dateFormatter stringFromDate:dateSelected];
    }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T10:52:49.690

您可以`UITextFieldDelegate`为您的 TextFields`textFieldDidBeginEditing:`方法实现协议以及为每个 TextField 设置`tag`属性，以便它们易于识别......

然后当`textFieldDidBeginEditing:`被调用时，您可以读取已开始编辑的文本字段的标签并将其设置为全局值，以便您可以找出日期选择器应该更改的文本字段。示例：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField {

     someGlobalNSInteger = textField.tag; //the current text field tag is now globally set

}

-(IBAction)dateValueChanged:(id)sender {
    UIDatePicker *picker = (UIDatePicker *)sender;
    NSDate *dateSelected1 = [picker date];
    //NSDate *dateSelected1 = [picker date];

    NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    [dateFormatter setDateFormat:@"dd-MM-yyyy"];

    //self.fromTextField.text = [dateFormatter stringFromDate:dateSelected1];
    //self.toTextField.text = [dateFormatter stringFromDate:dateSelected2];

    UITextField *activeTextField = (UITextField*)[self viewWithTag:someGlobalNSInteger]; //gets text field what is currently being edited
    [activeTextField setText:[dateFormatter stringFromDate:dateSelected1]];

} 
```

但是，如果您不允许文本字段可编辑（因此它无法启动键盘），您可能需要一些其他方法来确定哪些 textField 应该获得更新日期，但我将把它留给您。

希望能帮助到你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T12:23:33.550

实现这一点的最佳方法是使用 UITextField 中可用的 inputview 属性。使用 Outlet 或编程初始化您的日期选择器一次，并将其分配为文本字段的委托方法“textFieldDidBeginEditing:”中的 inputView。对于分配日期，您可以在将输入视图实际分配给文本字段之前使用您自己的业务逻辑。

# spring - 在 Spring 中处理媒体类型

> ID：10429583
> 
> 赞同：0
> 
> 时间：2012-05-03T10:31:56.303
> 
> 标签：spring, http, types, media

我们是否可以动态处理 http 媒体类型或使用“ByteArrayHttpMessageConverter”处理多种媒体类型？我的要求是，在我从服务器检索文档之前，我不会知道确切的媒体类型！所以要么我应该尝试动态处理它，要么我应该去包括所有可能的媒体类型来处理:(你能给我一些想法吗？这里是春季论坛的链接，我已经很久没有发布它了响应 [。http://forum.springsource.org/showthread.php?124301-Handling-multiple-media-types](http://forum.springsource.org/showthread.php?124301-Handling-multiple-media-types)

提前致谢！帕里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T13:24:30.207

动态更改媒体类型对于消息转换器来说并不自然，因为（严格来说）每个消息转换器都绑定到某些特定的媒体类型。如果多个消息转换器盲目地支持相同的媒体类型，Spring MVC 将无法根据`Accept-type`客户端标头选择正确的一种。

您需要编写可以扩展的特定消息转换器`ByteArrayHttpMessageConverter`。您需要重写`AbstractHttpMessageConverter#getDefaultContentType(T t)`传递要写入的对象的方法，因此您可以动态定义返回的`Content-type`.

# javascript - 是否有可以用作库的 V8 CommonJS 实现？

> ID：10429594
> 
> 赞同：5
> 
> 时间：2012-05-03T10:32:33.223
> 
> 标签：javascript, v8, commonjs

我正在开发一个带有 V8 绑定的游戏引擎。虽然我有一些用于读取和写入文件等的简单功能，但如果有一个添加 CommonJS 内容的插件库会很棒。

有一个项目在做这件事吗？虽然 www.commonjs.org 上列出了许多实现，但它们都是像 node.js 这样的框架的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T01:09:27.753

[node-commonjs](https://github.com/kriszyp/node-commonjs)项目在node.js 之上实现了 CommonJS，它使用 V8 引擎作为其平台。

# iphone - 当没有音频硬件可用时调用 AudioUnitInitialize()

> ID：10429605
> 
> 赞同：1
> 
> 时间：2012-05-03T10:33:14.103
> 
> 标签：iphone, ios, core-audio, audiounit

在一个 iOS 应用程序项目中，我有一个音频单元（用于输入/输出）初始化代码（在设置各种属性、回调等之后）以：

```
OSErr err = AudioUnitInitialize (self.audioUnit);
NSAssert1 (err == noErr, "Error initializing audio unit: %ld", err); 
```

我的问题是，在某些情况下，我必须在没有可用音频硬件的计算机上（当然是在 iPhone 模拟器中）运行此代码，然后会发生以下情况：

首先，在控制台上我收到以下消息（对不起，很长的行，对我来说似乎更清楚，没有额外的换行符）：

```
2012-05-03 12:41:15.020 TimeKeeper[452:10703] Error loading /System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn:  dlopen(/System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2012-05-03 12:41:15.140 TimeKeeper[452:10703] Error loading /System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn:  dlopen(/System/Library/Extensions/AudioIPCDriver.kext/Contents/Resources/AudioIPCPlugIn.bundle/Contents/MacOS/AudioIPCPlugIn, 262): Symbol not found: ___CFObjCIsCollectable
  Referenced from: /System/Library/Frameworks/Security.framework/Versions/A/Security
  Expected in: /Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator5.0.sdk/System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
 in /System/Library/Frameworks/Security.framework/Versions/A/Security
2012-05-03 12:41:15.207 TimeKeeper[452:10703] Error '!obj' trying to fetch default input device's sample rate
2012-05-03 12:41:15.209 TimeKeeper[452:10703] Error getting audio input device sample rate: '!obj' 
```

然后大约 2 分钟左右过去了，直到`AudioUnitInitialize`返回错误代码`0`（即，`noErr`），控制台上出现这条消息：

```
2012-05-03 12:43:45.222 TimeKeeper[452:14403] AQMEIO_Base::DoStartIO: timeout
2012-05-03 12:43:45.226 TimeKeeper[452:14403] AQMEDevice(0x7b0de00)::StartIO: error -66681 
```

如果我再调用`AudioOutputUnitStart`，该函数再次返回大约需要 2 分钟，但至少返回状态不为零。

我希望能够判断音频硬件是否不可用，因此我可以避免`AudioUnitInitialize`首先调用 --- 或者至少获得非零返回状态而不必等待这么长时间（在应用程序运行中 -时间条款）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T20:46:38.667

您可以随时检查运行模拟的 iOS 代码并执行其他操作。

```
#if TARGET_IPHONE_SIMULATOR
    // stub out audio unit with a unit test, unix pipe, or etc.
#endif 
```

# scala - Scala / Akka：主演员上的 NullPointerException？

> ID：10429606
> 
> 赞同：1
> 
> 时间：2012-05-03T10:33:20.233
> 
> 标签：scala, parallel-processing, akka

我对 Scala 的 Akka 非常陌生，我收到一条错误消息，我不明白。我的代码基本上运行的是进化算法。对于在一代人中创造的每个新个体，都必须对其进行评估。对这些人的评估是我想要并行化的（从长远来看，我想在集群上这样做）。为了实现这一点，我已经完全将我的代码导向了 Akka 网站上的入门教程。代码如下所示：

```
object Configuration {

sealed trait Message
case object Broadcast extends Message
case class Work(inds:ArrayBuffer[Individual]) extends Message
case class Result(result:ArrayBuffer[Individual]) extends Message
case class NewIndividuals(inds:ArrayBuffer[Individual]) extends Message

class Worker extends Actor {

    val id = (Math.random * 100).asInstanceOf[Int]

    def receive = {
        case Work(inds) =>
            sender ! Result(geneticOperation(inds)) // perform the work
    }

    private def geneticOperation(inds:ArrayBuffer[Individual]) = {
        for(child <- inds) {
            child.mutate
            child.evaluate
            println(id + ": I've evaluated one.")
        }
        println("\n")
        inds
    }

}

class Master(nrOfWorkers:Int, nrOfMessages:Int, oldInds:ArrayBuffer[Individual], listener:ActorRef)
    extends Actor {

    var inds:ArrayBuffer[Individual] = _ 
    var nrOfResults:Int = _
    val start:Long = System.currentTimeMillis

    val workerRouter = context.actorOf(
            Props[Worker].withRouter(RoundRobinRouter(nrOfWorkers)), name = "workerRouter")

    def receive = {
        case Broadcast =>
            var workOn = new ArrayBuffer[Individual]    
            for(i <- 0 until nrOfMessages)
                workOn += oldInds(i)
            oldInds.trimStart(nrOfMessages)
            workerRouter ! Work(workOn)
        case Result(newInds) =>
            inds ++= newInds
            nrOfResults += 1
            println(nrOfResults)
            if(nrOfResults == nrOfMessages) {
                listener ! NewIndividuals(inds)
                context.stop(self)
            }
    }

}

class Listener extends Actor {
    def receive = {
        case NewIndividuals(inds) =>
            Configuration.environment(inds)
            context.system.shutdown()
    }
}

var d = Parameter.N_DROPLET_TYPE-2

  /** Apply genetic operators (recombination, mutation) on the population 
   * during the current generation.
   *  @param g Current generation.
   */
def apply(g:Int) {
    var children = Population.recombinate   // create offspring
    calculate(Parameter.NODES,(Parameter.L / Parameter.NODES),children)
}

def calculate(nrOfWorkers:Int, nrOfMessages:Int, inds:ArrayBuffer[Individual]) {
    val system = ActorSystem("GeneticOperations")
    val listener = system.actorOf(Props[Listener], name="listener")
    val master = system.actorOf(Props(new Master(
            nrOfWorkers,nrOfMessages,inds,listener)),
            name="master")
    master ! Broadcast
}

    private def environment(children:ArrayBuffer[Individual]) {
      if(Parameter.NEUTRAL) {       // if neutral evolution no selection pressure
          Population.neutralEvolution(children)
          writeDiversity
      }
      else Population.select(children)
      writeAllToEvoPath
} 
```

当我运行它时，我得到以下输出：

```
ID akka
Population setup complete.
Evolution: Gen 1
Gen 2
Gen 3
Gen 4
Gen 5
Gen 6
Gen 7
Gen 8
Gen 9

107 seconds elapsed.
79: I've evaluated one.
67: I've evaluated one.
89: I've evaluated one.
56: I've evaluated one.
17: I've evaluated one.
55: I've evaluated one.
77: I've evaluated one.
15: I've evaluated one.
57: I've evaluated one.
79: I've evaluated one.

[ERROR] [05/03/2012 12:15:01.864] [GeneticOperations-akka.actor.default-dispatcher-6] [akka://GeneticOperations/user/master] null
java.lang.NullPointerException
at framework.Configuration$Master$$anonfun$receive$2.apply(Configuration.scala:75)
at framework.Configuration$Master$$anonfun$receive$2.apply(Configuration.scala:67)
at akka.actor.Actor$class.apply(Actor.scala:311)
at framework.Configuration$Master.apply(Configuration.scala:57)
at akka.actor.ActorCell.invoke(ActorCell.scala:619)
at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:196)
at akka.dispatch.Mailbox.run(Mailbox.scala:178)
at akka.dispatch.ForkJoinExecutorConfigurator$MailboxExecutionTask.exec(AbstractDispatcher.scala:505)
at akka.jsr166y.ForkJoinTask.doExec(ForkJoinTask.java:259)
at akka.jsr166y.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:974)
at akka.jsr166y.ForkJoinPool.runWorker(ForkJoinPool.java:1478)
at akka.jsr166y.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:104)

55: I've evaluated one.

[ERROR] [05/03/2012 12:15:04.339] [GeneticOperations-akka.actor.default-dispatcher-4] [akka://GeneticOperations/user/master] null
java.lang.NullPointerException
at framework.Configuration$Master$$anonfun$receive$2.apply(Configuration.scala:75)
at framework.Configuration$Master$$anonfun$receive$2.apply(Configuration.scala:67)
at akka.actor.Actor$class.apply(Actor.scala:311)
at framework.Configuration$Master.apply(Configuration.scala:57)
at akka.actor.ActorCell.invoke(ActorCell.scala:619)
at akka.dispatch.Mailbox.processMailbox(Mailbox.scala:196)
at akka.dispatch.Mailbox.run(Mailbox.scala:178)
at akka.dispatch.ForkJoinExecutorConfigurator$MailboxExecutionTask.exec(AbstractDispatcher.scala:505)
at akka.jsr166y.ForkJoinTask.doExec(ForkJoinTask.java:259)
at akka.jsr166y.ForkJoinPool$WorkQueue.runTask(ForkJoinPool.java:974)
at akka.jsr166y.ForkJoinPool.runWorker(ForkJoinPool.java:1478)
at akka.jsr166y.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:104) 
```

（等等）

对于每一代（gen），它应该进行评估，但相反，我的代码似乎没有等待 Master Actor 获得结果，而是继续进行。错误消息在我看来就像 Master 上有 NullPointerException？但我不明白为什么会发生这种情况。Akka 教程声称它会等到 Master 收到来自 Workers 的所有结果（这是我想要的）。

任何有帮助的东西都将不胜感激！（请注意，我真的是 Akka 的初学者。）

**更新：**

1) framework.Configuration$Master$$anonfun$receive$2.apply(Configuration.scala:75): inds ++= newInds (在Master, receive, case Result)

2）Parameter中的变量只是整数，在这种情况下NODES = 4，L = 8

# php - 如何找出在php中上传图片的相对路径？

> ID：10429607
> 
> 赞同：1
> 
> 时间：2012-05-03T10:33:22.850
> 
> 标签：php, relative-path, image-uploading

我在找出将图像上传到其他目录的相对路径时遇到问题

**目标目录**

```
htdocs/dt3/tadi/adm/dim/dim_images/tadi_user_images/ 
```

**源目录**

```
htdocs/dt3/tadi/adm/cbt/uploadfile.php 
```

## 上传文件.php

```
<html>
    <form method="post"enctype="multipart/form-data">
        <input type="file" name="fileimg1" ><input type="submit" name="upload">
    </form>
</html>

<?php
    $dirname = "/dt3/tadi/adm/dim/dim_images/tadi_user_images/";    

    $of = $_FILES['fileimg1']['name'];
    $ext = pathinfo($of, PATHINFO_EXTENSION);

    $changename3 = time() * 24 * 60;
    $image_name3 = "timage_" . $changename3 . "." . $ext;

    $final_pathdir = $dirname . $image_name3;
    $suc = move_uploaded_file($_FILES['fileimg1']['tmp_name'], $final_pathdir);

    if ($suc > 0) 
    {
        echo "Image uploaded successfully"; 
    } 
    else 
    {
        echo "Error : " . $_FILES['filimg1']['error'];
    }
?> 
```

我尝试了一些路径，我没有得到任何解决方案。
如何将图像上传到该路径？

`htdocs/dt3/tadi/adm/dim/dim_images/tadi_user_images/`

仅使用相对路径。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T10:36:54.023

我相信你能做到

```
$dirname = dirname(__FILE__)."/../dim/dim_images/tadi_user_images/" 
```

# mysql - MySQL 按小时分组

> ID：10429611
> 
> 赞同：23
> 
> 时间：2012-05-03T10:33:34.677
> 
> 标签：mysql, sql, group-by

我正在尝试按小时使用从我的历史记录表中获取报告。`history`表是；

```
CREATE TABLE IF NOT EXISTS `history` (
`history_id` int(11) unsigned NOT NULL AUTO_INCREMENT,
`user_id` int(11) unsigned NOT NULL DEFAULT '0',
`created` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
PRIMARY KEY (`history_id`),
KEY `user_id` (`user_id`),
KEY `created` (`created`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1 ; 
```

我想对给定日期范围内的所有记录`HOUR`进行分组。`COUNT`

```
Hours            |    Usage
------------------------------------
00:00-01:00      |      5
01:00-02:00      |      9
02:00-03:00      |      0 (or NULL)
03:00-04:00      |      20
...
...
...
22:00-23:00      |      11
23:00-00:00      |      1 
```

我使用了类似这样的查询，但它没有显示所有时间。

```
SELECT 

CASE 
  WHEN HOUR(created) BETWEEN 0 AND 1 THEN '00:00 - 01:00'
  WHEN HOUR(created) BETWEEN 1 AND 2 THEN '01:00 - 02:00'
  WHEN HOUR(created) BETWEEN 2 AND 3 THEN '02:00 - 03:00'
  WHEN HOUR(created) BETWEEN 3 AND 4 THEN '03:00 - 04:00'
  WHEN HOUR(created) BETWEEN 4 AND 5 THEN '04:00 - 05:00'
  WHEN HOUR(created) BETWEEN 5 AND 6 THEN '05:00 - 06:00'
  WHEN HOUR(created) BETWEEN 6 AND 7 THEN '06:00 - 07:00'
  WHEN HOUR(created) BETWEEN 7 AND 8 THEN '07:00 - 08:00'
  WHEN HOUR(created) BETWEEN 8 AND 9 THEN '08:00 - 09:00'
  WHEN HOUR(created) BETWEEN 9 AND 10 THEN '09:00 - 10:00'
  WHEN HOUR(created) BETWEEN 10 AND 11 THEN '10:00 - 11:00'
  WHEN HOUR(created) BETWEEN 11 AND 12 THEN '11:00 - 12:00'
  WHEN HOUR(created) BETWEEN 12 AND 13 THEN '12:00 - 13:00'
  WHEN HOUR(created) BETWEEN 13 AND 14 THEN '13:00 - 14:00'
  WHEN HOUR(created) BETWEEN 14 AND 15 THEN '14:00 - 15:00'
  WHEN HOUR(created) BETWEEN 15 AND 16 THEN '15:00 - 16:00'
  WHEN HOUR(created) BETWEEN 16 AND 17 THEN '16:00 - 17:00'
  WHEN HOUR(created) BETWEEN 17 AND 18 THEN '17:00 - 18:00'
  WHEN HOUR(created) BETWEEN 18 AND 19 THEN '18:00 - 19:00'
  WHEN HOUR(created) BETWEEN 19 AND 20 THEN '19:00 - 20:00'
  WHEN HOUR(created) BETWEEN 20 AND 21 THEN '20:00 - 21:00'
  WHEN HOUR(created) BETWEEN 21 AND 22 THEN '21:00 - 23:00'
  WHEN HOUR(created) BETWEEN 22 AND 23 THEN '22:00 - 23:00'
  WHEN HOUR(created) BETWEEN 23 AND 24 THEN '23:00 - 00:00'
END AS `Hours`,

COUNT(*) AS `usage`
FROM history
WHERE (created BETWEEN '2012-02-07' AND NOW())
GROUP BY 
  CASE 
    WHEN HOUR(created) BETWEEN 0 AND 1 THEN 1
    WHEN HOUR(created) BETWEEN 1 AND 2 THEN 2
    WHEN HOUR(created) BETWEEN 2 AND 3 THEN 3
    WHEN HOUR(created) BETWEEN 3 AND 4 THEN 4
    WHEN HOUR(created) BETWEEN 4 AND 5 THEN 5
    WHEN HOUR(created) BETWEEN 5 AND 6 THEN 6
    WHEN HOUR(created) BETWEEN 6 AND 7 THEN 7
    WHEN HOUR(created) BETWEEN 7 AND 8 THEN 8
    WHEN HOUR(created) BETWEEN 8 AND 9 THEN 9
    WHEN HOUR(created) BETWEEN 9 AND 10 THEN 10
    WHEN HOUR(created) BETWEEN 10 AND 11 THEN 11
    WHEN HOUR(created) BETWEEN 11 AND 12 THEN 12
    WHEN HOUR(created) BETWEEN 12 AND 13 THEN 13
    WHEN HOUR(created) BETWEEN 13 AND 14 THEN 14
    WHEN HOUR(created) BETWEEN 14 AND 15 THEN 15
    WHEN HOUR(created) BETWEEN 15 AND 16 THEN 16
    WHEN HOUR(created) BETWEEN 16 AND 17 THEN 17
    WHEN HOUR(created) BETWEEN 17 AND 18 THEN 18
    WHEN HOUR(created) BETWEEN 18 AND 19 THEN 19
    WHEN HOUR(created) BETWEEN 19 AND 20 THEN 20
    WHEN HOUR(created) BETWEEN 20 AND 21 THEN 21
    WHEN HOUR(created) BETWEEN 21 AND 22 THEN 22
    WHEN HOUR(created) BETWEEN 22 AND 23 THEN 23
    WHEN HOUR(created) BETWEEN 23 AND 24 THEN 24
END 
```

仅在有记录时才显示。

```
Hours            |    Usage
------------------------------------
00:00-01:00      |      5
01:00-02:00      |      9
23:00-00:00      |      1 
```

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-05-03T10:36:52.817

您现有的查询可以简化为：

```
SELECT   CONCAT(HOUR(created), ':00-', HOUR(created)+1, ':00') AS Hours
  ,      COUNT(*) AS `usage`
FROM     history
WHERE    created BETWEEN '2012-02-07' AND NOW()
GROUP BY HOUR(created) 
```

要显示*每个*小时，包括那些没有数据的小时，您需要与一个包含您想要数据的所有小时的表进行外部连接。您可以使用以下方法在查询中构建这样的表`UNION`：

```
SELECT   CONCAT(Hour, ':00-', Hour+1, ':00') AS Hours
  ,      COUNT(created) AS `usage`
FROM     history
  RIGHT JOIN (
                   SELECT  0 AS Hour
         UNION ALL SELECT  1 UNION ALL SELECT  2 UNION ALL SELECT  3
         UNION ALL SELECT  4 UNION ALL SELECT  5 UNION ALL SELECT  6
         UNION ALL SELECT  7 UNION ALL SELECT  8 UNION ALL SELECT  9
         UNION ALL SELECT 10 UNION ALL SELECT 11 UNION ALL SELECT 12
         UNION ALL SELECT 13 UNION ALL SELECT 14 UNION ALL SELECT 15
         UNION ALL SELECT 16 UNION ALL SELECT 17 UNION ALL SELECT 18
         UNION ALL SELECT 19 UNION ALL SELECT 20 UNION ALL SELECT 21
         UNION ALL SELECT 22 UNION ALL SELECT 23
  )      AS AllHours ON HOUR(created) = Hour
WHERE    created BETWEEN '2012-02-07' AND NOW() OR created IS NULL
GROUP BY Hour
ORDER BY Hour 
```

但是，对于不存在数据的组的处理实际上是业务逻辑的问题，业务逻辑最好放在数据访问层而不是数据库本身：实际上，对于您的应用程序来说，只要一小时就使用零值应该是微不足道的。缺席的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-09-29T12:17:18.320

修改@eggyal 答案，因为另一个很好的用例是显示日期以及小时数。

假设您需要过去 7 天的 COUNT 条记录，每条记录 24 小时。

```
SELECT
   dayname(date_sub(curdate(), INTERVAL 1 DAY)) AS Day,
   CONCAT(Hour, ':00-', Hour+1, ':00') AS Hour,
   COUNT(created) AS `usage`
FROM
   history
   RIGHT JOIN
      (
         SELECT  0 AS Hour
         UNION ALL SELECT  1 UNION ALL SELECT  2 UNION ALL SELECT  3
         UNION ALL SELECT  4 UNION ALL SELECT  5 UNION ALL SELECT  6
         UNION ALL SELECT  7 UNION ALL SELECT  8 UNION ALL SELECT  9
         UNION ALL SELECT 10 UNION ALL SELECT 11 UNION ALL SELECT 12
         UNION ALL SELECT 13 UNION ALL SELECT 14 UNION ALL SELECT 15
         UNION ALL SELECT 16 UNION ALL SELECT 17 UNION ALL SELECT 18
         UNION ALL SELECT 19 UNION ALL SELECT 20 UNION ALL SELECT 21
         UNION ALL SELECT 22 UNION ALL SELECT 23
      )
      AS totalhours
      ON HOUR(created) = HOUR
      AND DATE(created) = date_sub(curdate(), INTERVAL 1 DAY)
      OR created IS NULL
GROUP BY
   Hour
ORDER BY
   Hour; 
```

[![SQL 结果](../Images/0cae932063afc5394018d77be3a14eb6.png)](https://i.stack.imgur.com/g5yuK.png)

在后端代码的业务逻辑或存储过程中修改它，

```
INTERVAL 1 DAY 
```

可以产生过去 7 天的查询结果以及当天的名称。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-06T10:35:40.897

给定一个包含列*ts*和*value*的表*Log*，以下将给出过去 24 小时的每小时平均值（假设每个小时至少有一行）。

 **```
SELECT 
    FROM_UNIXTIME( TRUNCATE( UNIX_TIMESTAMP( `ts` )/3600, 0 ) * 3600 ) as h,
    AVG( `value` ) as v,
    COUNT( * ) as q
FROM 
    Log
GROUP BY 
   h
ORDER BY 
   h desc
LIMIT
    24 
```

列*ts*可以是时间戳或日期时间列，而*value*是 AVG() 将接受的任何内容。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-30T21:09:43.593

根据 Prashanth 的回应，我收到了关于 Hour 模棱两可的警告（Percona 5.7）。另外，我没有以正确的顺序得到结果。以下为我解决了这些问题，并且更清楚地了解了 GROUP BY 和 ORDER BY 子句：

```
SELECT
  dayname(date_sub(curdate(), INTERVAL 1 DAY)) AS Day,
  CONCAT(Hour, ':00-', Hour+1, ':00') AS Hour,
  COUNT(created_at) AS `total`
FROM logtable
RIGHT JOIN
  (
     SELECT  0 AS Hour
     UNION ALL SELECT  1 UNION ALL SELECT  2 UNION ALL SELECT  3
     UNION ALL SELECT  4 UNION ALL SELECT  5 UNION ALL SELECT  6
     UNION ALL SELECT  7 UNION ALL SELECT  8 UNION ALL SELECT  9
     UNION ALL SELECT 10 UNION ALL SELECT 11 UNION ALL SELECT 12
     UNION ALL SELECT 13 UNION ALL SELECT 14 UNION ALL SELECT 15
     UNION ALL SELECT 16 UNION ALL SELECT 17 UNION ALL SELECT 18
     UNION ALL SELECT 19 UNION ALL SELECT 20 UNION ALL SELECT 21
     UNION ALL SELECT 22 UNION ALL SELECT 23
  )
  AS totalhours
  ON ( HOUR(created_at) = HOUR
  AND DATE(created_at) = date_sub(curdate(), INTERVAL 1 DAY) )
  OR created_at IS NULL
GROUP BY
   CONCAT(Hour, ':00-', Hour+1, ':00')
ORDER BY
   totalhours.Hour; 
```**

# android - 传输数据 USB

> ID：10429615
> 
> 赞同：13
> 
> 时间：2012-05-03T10:33:52.303
> 
> 标签：android, usb, ftdi

我正在尝试通过 USB 发送和接收数据，我的设备，Acer Iconia A500 拥有连接到设备所需的一切，一切都很好并且工作正常，但是当我尝试发送和接收数据时，它的行为不像预期的。这是我的代码

```
for( ; ; ) { //this is the main loop for transferring   
    String get = "$getPos";
    byte[] getBytes = get.getBytes();
    conn.bulkTransfer( epOUT, getBytes, getBytes.length, 500 );

    try {
        Thread.sleep( 500 );
        byte[] buffer = new byte[4096];
        conn.bulkTransfer( epIN, buffer, 4096, 500 );
        StringBuilder byStr = new StringBuilder();

        for( int i = 0; i < buffer.length; i++ ) {
            if( buffer[i] != 0 ) {
                byStr.append( buffer[i] + ", " );
            }
        }

        l( byStr );
    }
    catch( InterruptedException e ) {
        e.printStackTrace();
    }

    if( mStop ) {
        mStopped = true;
        return;
    }

    l( "sent " + counter );
    counter++;
    counter = (byte)( counter % 16 );
} 
```

它的意思是返回一个大约 80 个字符长的字节数组，但它只返回两个字节，即 1 和 96，如果 USB 设备端出现错误，它仍然会返回几个多于两个。我的代码甚至接近正确吗？我基于 serverbox 的 USB 转串口文章。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-05-17T23:04:58.807

我试图以错误的波特率发送数据。

这是有效的代码。为所有使用 FTDI 设备并需要帮助的人发布它。

```
private Runnable mLoop = new Runnable() {

        @Override
        public void run() {
            UsbDevice dev = sDevice;
            if (dev == null)
                return;
            UsbManager usbm = (UsbManager) getSystemService(USB_SERVICE);
            UsbDeviceConnection conn = usbm.openDevice(dev);
            l("Interface Count: " + dev.getInterfaceCount());
            l("Using "
                    + String.format("%04X:%04X", sDevice.getVendorId(),
                            sDevice.getProductId()));

            if (!conn.claimInterface(dev.getInterface(0), true))
                return;

            conn.controlTransfer(0x40, 0, 0, 0, null, 0, 0);// reset
                                                            // mConnection.controlTransfer(0×40,
                                                            // 0, 1, 0, null, 0,
                                                            // 0);//clear Rx
            conn.controlTransfer(0x40, 0, 2, 0, null, 0, 0);// clear Tx
            conn.controlTransfer(0x40, 0x02, 0x0000, 0, null, 0, 0);// flow
                                                                    // control
                                                                    // none
            conn.controlTransfer(0x40, 0x03, 0x0034, 0, null, 0, 0);// baudrate
                                                                    // 57600
            conn.controlTransfer(0x40, 0x04, 0x0008, 0, null, 0, 0);// data bit
                                                                    // 8, parity
                                                                    // none,
                                                                    // stop bit
                                                                    // 1, tx off

            UsbEndpoint epIN = null;
            UsbEndpoint epOUT = null;

            byte counter = 0;

            UsbInterface usbIf = dev.getInterface(0);
            for (int i = 0; i < usbIf.getEndpointCount(); i++) {
                l("EP: "
                        + String.format("0x%02X", usbIf.getEndpoint(i)
                                .getAddress()));
                if (usbIf.getEndpoint(i).getType() == UsbConstants.USB_ENDPOINT_XFER_BULK) {
                    l("Bulk Endpoint");
                    if (usbIf.getEndpoint(i).getDirection() == UsbConstants.USB_DIR_IN)
                        epIN = usbIf.getEndpoint(i);
                    else
                        epOUT = usbIf.getEndpoint(i);
                } else {
                    l("Not Bulk");
                }
            }

            for (;;) {// this is the main loop for transferring
                try {
                    Thread.sleep(100);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                String get = "$fDump G" + "\n";
                l("Sending: " + get);

                byte[] by = get.getBytes();

                // This is where it sends
                l("out " + conn.bulkTransfer(epOUT, by, by.length, 500));

                // This is where it is meant to receive
                byte[] buffer = new byte[4096];

                StringBuilder str = new StringBuilder();

                if (conn.bulkTransfer(epIN, buffer, 4096, 500) >= 0) {
                    for (int i = 2; i < 4096; i++) {
                        if (buffer[i] != 0) {
                            str.append((char) buffer[i]);
                        } else {
                            l(str);
                            break;
                        }
                    }

                }
                // this shows the complete string
                l(str);

                if (mStop) {
                    mStopped = true;
                    return;
                }
                l("sent " + counter);
                counter++;
                counter = (byte) (counter % 16);
            }
        }
    }; 
```

# android - Android ADT 版本更新抛出错误状态

> ID：10429618
> 
> 赞同：1
> 
> 时间：2012-05-03T10:34:11.913
> 
> 标签：android, eclipse, android-ndk

在为更新我的 ADT 做了很多努力之后，我正在写这篇文章。我尝试过使用不同的 eclipse、android sdk 一切，但它仍然告诉我 Android SDK 需要 android developer toolkit 版本 17.0.0 或更高版本，当前版本是 11.0.0.v201105251008-128486。

我提到了这里提到的问题[Android SDK 需要 android developer toolkit 版本 17.0.0 或更高版本](https://stackoverflow.com/questions/10074532/android-sdk-requires-android-developer-toolkit-version-17-0-0-or-above)

但是当我再次检查更新时，它会显示一条警告消息，指出

**警告：您正在安装包含未签名内容的软件。本软件的真实性或有效性无法确定。是否要继续安装？**

以及 OK 和 Cancel 按钮。

我受够了这个，谁能告诉我如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:45:47.607

打开 SDK 管理器（在 Windows 中右键单击并以管理员身份运行），然后将您的工具更新到最新版本。安装所有最新版本。那应该可以解决您的问题。记得以管理员权限打开 SDK 管理器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-07T07:05:03.320

我不知道eclipse或android sdk出了什么问题。我从字面上删除了除了我的工作区之外的所有内容。然后再次安装，现在它工作正常。

# windows - Windows 7 中的符号（例如 PowerPoint、Word）

> ID：10429626
> 
> 赞同：0
> 
> 时间：2012-05-03T10:34:28.810
> 
> 标签：windows, fonts, ms-word, powerpoint, symbols

我对 Power Point 中的符号有点问题。在 PC A (Win 7) 上，我使用专业版的 Powert Point 来创建幻灯片。

在 PC B（也是 Win 7）上，我只使用 Power Point Viewer。

PC B 似乎没有我在 PC A 上使用的字体和符号。复制字体不是问题。它工作正常。

但是如何将符号从 PC A 复制到 PC B？现在，PC B 为列表项采用标准符号（看起来像一个矩形，但原来它是一个圆形）

或者有没有办法将符号嵌入到我的幻灯片中，以便 PC B 从 ppt 文件中获取它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T15:31:36.143

这对于 SuperUser 来说更像是一个问题，因为它显然与编码没有任何关系。您需要嵌入您使用过的字体。由于您没有提及您正在使用的版本，我将假设当前版本 2010。

文件 | 另存为 在“另存为”对话框中，单击“工具”按钮上的向下箭头 在出现的“选项”对话框中，选中“在文件中嵌入字体”旁边的复选框，然后继续保存。

有些字体是可嵌入的，有些则不是。

# c# - 在 C# 中动态加载非托管 OCX

> ID：10429627
> 
> 赞同：3
> 
> 时间：2012-05-03T10:34:31.057
> 
> 标签：c#, ocx

我在 VC++ 中创建了 ocx 如果它是静态加载的，它可以正常工作，但是当我从程序集中动态加载它时，它会给出异常。

```
 public Assembly assembly;

    public Form1()
    {
        InitializeComponent();            
       assembly = Assembly.LoadFile(Application.StartupPath + "\\abc.ocx");

    } 
```

它给出了以下异常该模块应包含程序集清单。

> （来自 HRESULT 的异常：0x80131018）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T11:41:56.863

您必须执行许多在使用工具箱时通常会自动执行的步骤。首先，您必须运行 Aximp.exe 实用程序来生成 .NET 互操作程序集。使用 Visual Studio 命令提示符运行该工具。您将获得两个程序集，axinterop.foo.dll 包含一个从 AxHost 派生的包装类，并允许您将控件放在窗体上。还有 interop.foo.dll，它是使控件实现的 COM 接口可从 .NET 程序调用的互操作程序集。

接下来，您必须确保这些 DLL 存在于构建目录中。最好的办法是将它们添加到您的项目中并将它们的复制到输出目录设置为“如果更新则复制”。

现在您可以在代码中使用 Assembly.Load("axinterop.foo.dll") 来动态加载互操作程序集。

接下来，您必须创建控件实例，使用 Assembly.CreateInstance() 并传递 AxHost 包装类的类型名称。如果您不知道它的名称可能是什么，这并不明显，然后使用 ildasm.exe 查看 axinterop.foo.dll 程序集。将返回的对象强制转换为 AxHost。

接下来，您必须将控件添加到表单的 Controls 集合中，使其可见且可用。在创建控件实例之前，您不能调用任何接口方法，直到您添加了控件并且表单的 Load 事件已触发，才会发生这种情况。

接下来你必须使用反射或*动态*关键字来获取对控件实现的接口的引用，以防你需要设置属性或调用方法。这很难正确，您需要先使用从工具箱添加的控件来编写该代码，这样您就不必太费力地猜测正确的名称。

* * *

这显然是非常痛苦的，而且很难做到正确。通过向您的项目添加一个直接使用 OCX 并通过接口公开其重要属性的类库来提高获得良好结果的几率。*并在那个*上使用 Assembly.Load() 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T10:35:35.987

**Assembly.LoadFile 只能加载 .Net 程序集而不是本机 dll/exe/ocx 文件。**

**您可以通过解决方案资源管理器-> 引用**添加对 ocx 文件的引用，然后创建 ocx 类的实例。

# gnuplot - 范围过大时自动切换到对数刻度

> ID：10429628
> 
> 赞同：2
> 
> 时间：2012-05-03T10:34:33.823
> 
> 标签：gnuplot, logarithm

我有一个创建 Gnuplot 宏的通用脚本。

当范围很大时，有没有办法自动切换到 y 轴的对数刻度——比如说，超过两个数量级？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T10:56:14.197

已经明白了：

```
if(GPVAL_Y_MAX-GPVAL_Y_MIN>100) set logscale 
```

做这项工作。

# html - 在html页面中嵌入视频并使其播放本地驱动器中的任何视频文件

> ID：10429629
> 
> 赞同：4
> 
> 时间：2012-05-03T10:34:37.600
> 
> 标签：html, video, browser

我想在 html 页面中嵌入视频，以便我可以播放硬盘驱动器或 url 中的任何多媒体文件。我尝试创建一个网页

```
<video src="test.mp4" controls width="320" height="240">

</video> 
```

在`chrome`，视频播放没有任何问题。但是，mp4 文件无法识别。`firefox`它显示错误消息-`'no video with supported format or mimetype found'.`

碰巧我的大部分视频文件都是`.mp4 or .flv`文件。

如果我放入 `<source src="test.flv" />` 视频元素，那么 chrome 和 firefox 都无法显示它。

那么，我应该怎么玩`at least mp4 and flv files in both browsers`？

任何指针/建议最受赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T10:41:28.573

来自 Mozilla 关于[浏览器支持的音频/视频格式](https://developer.mozilla.org/En/Media_formats_supported_by_the_audio_and_video_elements)的页面：

> Internet Explorer 和 Safari 支持具有 H.264 视频编解码器和 AAC 音频编解码器或 MP3 音频编解码器的 MPEG 容器格式。Firefox 和 Opera 不支持该格式。Chrome 中已弃用对格式的支持，Chromium 也不支持它。
> 
> MPEG 媒体格式受专利保护，这些专利不是免费许可的。所有必要的许可证都可以从 MPEG LA 购买。根据 Mozilla [1, 2]、Google [1, 2] 和 Opera 的说法，由于 H.264 目前不是免版税格式，因此它不适合开放的 Web 平台。

简短的回答，Firefox 不支持 mp4，因为它不是开源的。但它确实支持多个来源，并且会播放它支持的第一个来源。

此外，似乎任何浏览器都不支持 swf 或 flv，因为它们完全是 Adob​​e 并且需要 Flash Player，但以下应该可以解决这个问题：

```
<video src="test.mp4" controls>
    <object data="test.flv" type="application/x-shockwave-flash">
      <param value="test.flv" name="movie"/>
    </object>
</video> 
```

请注意，上述`.swf`文件最初是作为数据和值的；我还没有测试是否`.flv`可以自己工作。

# perl - 如何将运算符传递给 Perl 子例程？

> ID：10429643
> 
> 赞同：1
> 
> 时间：2012-05-03T10:35:48.513
> 
> 标签：perl, operators, subroutine

我有一个名为“lookup”的子程序，它在哈希中查找给定值。我意识到如果我可以要求它不查找给定值，而是查找比作为参数传递的值更小的值，它会更强大。

我可以让lookupbigger、lookupsmall..等，但我相信有更好的方法。

```
# lookup id according to the search criteria
sub lookup {
  my( $data, $lk, $lv ) = ( @_ );
  my @res;

  foreach my $key (keys $data) {
    my $value = $$data{$key};
    next unless( defined $$value{$lk} );
    # this is the line where I want to replace eq with another operator
    push(@res, $key) if( $$value{$lk} eq $lv );
  }

  return \@res;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T11:12:07.017

您可以将标准函数传递给查找函数：

```
#!/usr/bin/env perl

use strict; use warnings;
use YAML;

my %hash = qw(a 1 b 2 c 3 d 4 e 5);

# find all keys with odd values

print Dump lookup_keys_by_value(\%hash, sub {
        return unless @_;
        my $v = shift;
        return $v % 2;
    },
);

sub lookup_keys_by_value {
    my ($hash, $criterion) = @_;

    my @keys;

    while (my ($k, $v) = each %$hash) {
        push @keys, $k if $criterion->($v);
    }

    return \@keys;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T13:20:32.850

这是一个想法（也许太“聪明”）：

```
use strict;
use warnings;

{   no strict 'refs';
    # When called like __PACKAGE__->$op( ... ),  __PACKAGE__ is $_[0]
    *{'>'}  = sub { return $_[1] > $_[2]; }; 
    *{'<'}  = sub { return $_[1] < $_[2]; };
    *{'=='} = sub { return $_[1] == $_[2]; };
}

sub determine {
    my ( $first_arg, $op, $second_arg ) 
        = map { s/^\s+//; s/\s+$//; $_ }
          split( /\s*([<>]|==)\s*/, @_ == 1 ? shift : "@_" )
        ;
    say "$first_arg $op $second_arg => " 
      . (  __PACKAGE__->$op( $first_arg, $second_arg ) ? 'TRUE' : 'FALSE' )
      ;
}

determine( qw( 1 < 2 ) );
determine( qw( 2 < 1 ) );
determine( qw( 1 > 2 ) );
determine( qw( 2 > 1 ) );
determine( qw( 1 == 2 ) );
determine( qw( 1 == 1 ) );
determine( qw( 2 == 2 ) );
determine( ' 1 < 2 ' );
determine( ' 2 < 1 ' );
determine( ' 1 > 2 ' );
determine( ' 2 > 1 ' );
determine( ' 1 == 2 ' );
determine( ' 1 == 1 ' );
determine( ' 2 == 2 ' ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T10:44:59.603

您可以尝试使用重载

```
use overload (
'>' => 'compareBigger',
'<' => 'compareSmaller',
'==' => 'equals'
 ) 
```

# c# - C# 将值传递给新表单

> ID：10429646
> 
> 赞同：5
> 
> 时间：2012-05-03T10:35:55.080
> 
> 标签：c#, .net, visual-studio, c#-4.0

当单击按钮时，我得到了 Windows 窗体，试图将值从该窗体传递到新窗体。使用：

```
private void Edit_button_Click(object sender, EventArgs e)
        {
             for (int i = 0; i < listBox1.SelectedItems.Count; i++)
            {

             Edit item = new Edit(int.Parse(listBox1.SelectedIndex.ToString()));
            item.ShowDialog();

            }
        } 
```

当我运行程序时，它没有显示我设计的表单，而是显示了这个 ![问题](../Images/0f8336d7134360824f4d6f389ca12ac5.png)

但是当我将代码更改为：

```
 Edit item = new Edit();
   item.ShowDialog(); 
```

运行它，它会显示正确的内容，但不会将值传递给第二种形式。 ![在此处输入图像描述](../Images/280a8e4ff790fd2fd52db92055198192.png)

我有办法将值传递给另一种形式吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T10:37:24.897

添加属性

```
Edit item = new Edit();
item.Value = 5;
item.ShowDialog(); 
```

## 编辑：

您必须定义此属性才能使用它。像这样扩展你的`Edit`课程：

```
class Edit {
    ...
    public int Value { get; set; }
    ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T10:37:35.363

确保您的参数化构造函数`InitiaizeComponent()`在其主体中。由于此函数名称指定它初始化表单的组件，即公司标签、文本框和按钮。

我会告诉你怎么做。

创建编辑表单的参数化构造函数。将该值传递给变量

```
public class Edit
{
    public int val = 0;

    public Edit()
    { 
        InitializeComponent();
    }

    public Edit(int a)
    {
        val = a; 
        InitializeComponent();
    }

    public void Edit_Load()
    {
      txtbox.Text = val.ToString();
    }
} 
```

并从第一个表单调用编辑，例如

```
Edit item = new Edit(5); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T10:39:25.177

只是一个猜测：在您自己的构造函数中，您忘记调用 IntializeComponents()。

# tomcat - 集群会话未复制到组节点

> ID：10429647
> 
> 赞同：0
> 
> 时间：2012-05-03T10:35:59.043
> 
> 标签：tomcat, cluster-computing, session-replication

我有两个Tomcat节点，两台服务器都启动了。

当我关闭一台服务器时，我得到以下异常并且会话没有被复制。我必须重新登录，我是否错过了一些步骤？

```
 WARNING: IOException in replication worker, unable to drain channel. Probable cause: Keep alive socket closed[An existing connection was forcibly closed by the remote host].
May 3, 2012 2:15:02 PM org.apache.catalina.tribes.transport.nio.NioReplicationTask run
WARNING: IOException in replication worker, unable to drain channel. Probable cause: Keep alive socket closed[An existing connection was forcibly closed by the remote host].
[ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-13T10:50:11.530

这只是警告，配置没有问题。当您关闭一个 tomcat 实例时，会出现此警告。

大多数情况下，您没有将应用程序标记为可分发。

在给定应用程序的 web.xml 中添加`<distributable />`标签。

# javascript - Backbone.js：如何从事件中解除绑定，模型移除

> ID：10429648
> 
> 赞同：7
> 
> 时间：2012-05-03T10:36:01.217
> 
> 标签：javascript, events, event-handling, backbone.js

在主干中，我们有一个使用事件聚合器的应用程序，位于`window.App.Events` 现在，在许多视图中，我们绑定到该聚合器，并且我在视图上手动编写了一个销毁函数，该函数处理与该事件聚合器的解除绑定，然后删除该视图. （而不是直接删除视图）。

现在，在某些模型中我们也需要此功能，但我不知道如何解决它。

某些模型需要绑定到某些事件，但也许我错了，但是如果我们从集合中删除一个模型，由于这些绑定到仍然存在的事件聚合器，它会保留在内存中。

模型上没有真正的删除功能，就像视图一样。那么我将如何解决这个问题？

**根据要求编辑** ，一些代码示例。

```
App = {
    Events: _.extend({}, Backbone.Events)
};

var User = Backbone.Model.extend({

    initialize: function(){
        _.bindAll(this, 'hide');
        App.Events.bind('burglar-enters-the-building', this.hide);
    },

    hide: function(burglarName){
        this.set({'isHidden': true});
        console.warn("%s is hiding... because %s entered the house", this.get('name'), burglarName);
    }

});

var Users = Backbone.Collection.extend({

    model: User

});

var House = Backbone.Model.extend({

    initialize: function(){
        this.set({'inhabitants': new Users()});
    },

    evacuate: function(){
        this.get('inhabitants').reset();
    }

});

$(function(){

    var myHouse = new House({});

    myHouse.get('inhabitants').reset([{id: 1, name: 'John'}, {id: 1, name: 'Jane'}]);

    console.log('currently living in the house: ', myHouse.get('inhabitants').toJSON());

    App.Events.trigger('burglar-enters-the-building', 'burglar1');

    myHouse.evacuate();

    console.log('currently living in the house: ', myHouse.get('inhabitants').toJSON());

    App.Events.trigger('burglar-enters-the-building', 'burglar2');

});​ 
```

在 jsFiddle 上查看此代码（在控制台中输出）：http: [//jsfiddle.net/saelfaer/szvFY/1/](http://jsfiddle.net/saelfaer/szvFY/1/)

如您所见，我没有绑定到模型上的事件，而是绑定到事件聚合器。从模型本身解除绑定事件是不必要的，因为如果它被删除，没有人会再次触发它的事件。但是 eventAggregator 始终存在，以便于在整个应用程序中传递事件。

代码示例显示，即使将它们从集合中删除，它们也不再住在房子里，但当窃贼进入房子时仍然执行隐藏命令。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-05-03T14:01:55.173

我看到，即使绑定事件方向是*Object1 -> Listening -> Object2*也必须将其删除，以便*Object1*丢失任何活动引用。

并且看到监听 Model`remove`事件不是一个解决方案，因为它没有在调用中被`Collection.reset()`调用，那么我们有两个解决方案：

### 1.覆盖正常的Collection cleanUp

正如[@dira sais 在这里，](https://stackoverflow.com/questions/7874339/backbone-js-does-calling-collection-reset-removes-the-models-as-well)您可以覆盖`Collection._removeReference`以更适当地清理该方法。

我不喜欢这个解决方案有两个原因：

*   我不喜欢覆盖必须`super`在它之后调用的方法。
*   我不喜欢覆盖私有方法

### 2\. 过度包装你的`Collection.reset()`电话

Wich 则相反：不是添加*更深层次的功能*，而是添加更*高级的功能*。

然后，`Collection.reset()`您可以调用一个在静默删除之前*清理模型的实现，而不是直接调用：*

```
cleanUp: function( data ){
  this.each( function( model ) { model.unlink(); } );
  this.reset( data );
} 
```

您的代码的分类器版本可能如下所示：

```
AppEvents = {};
_.extend(AppEvents, Backbone.Events)

var User = Backbone.Model.extend({
  initialize: function(){
    AppEvents.on('my_event', this.listen, this);
  },

  listen: function(){
    console.log("%s still listening...", this.get('name'));
  },

  unlink: function(){
   AppEvents.off( null, null, this );
  }
});

var Users = Backbone.Collection.extend({
  model: User,

  cleanUp: function( data ){
    this.each( function( model ) { model.unlink(); } );
    this.reset( data );
  }
});

// testing
var users = new Users([{name: 'John'}]);
console.log('users.size: ', users.size()); // 1
AppEvents.trigger('my_event');             // John still listening...

users.cleanUp();
console.log('users.size: ', users.size()); // 0
AppEvents.trigger('my_event');             // (nothing) 
```

检查[jsFiddle](http://jsfiddle.net/fguillen/3j7yS/)。

# 更新：删除绑定事件链接后验证模型是否已删除

首先，我们验证 Object1 监听 Object2 中的事件是否创建了方向*Obect2 -> Object1*的链接：

![我们的对象被保留](../Images/d307616eea6780010e3972ef0dee89c9.png)

在上图中，我们看到模型（@314019）不仅被`users`集合保留，还被`AppEvents`观察的对象保留。*从程序员的角度来看，事件链接*似乎是*Object that listen -> to -> Object that is listened*，但实际上完全相反：*Object that is listened -> to -> Object that is listener*。

现在，如果我们使用`Collection.reset()`清空 Collection，我们会看到`users`链接已被删除，但`AppEvents`链接仍然存在：

![我们的对象被保留 2](../Images/48590f0544139a819035c3bbf2b2e978.png)

`users`链接消失了，我认为链接也是工作`OurModel.collection`的一部分`Collection._removeReference()`。

当我们使用我们的`Collection.cleanUp()`方法时，对象会从内存中消失，我无法让`Chrome.profile`工具明确告诉我*对象@314019 已被删除*，但我可以看到**它不再在内存对象中了**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T10:57:27.407

我认为干净的引用过程是`Backbone`.

当您`Model`从`Collection`Collection 中删除 a 时，需要注意`unbind`Collection 自身绑定的 Model 上的任何事件。[检查此私有 Collection 方法](https://github.com/documentcloud/backbone/blob/master/backbone.js#L839-844)。

也许你可以在你的聚合器中使用同样的技术：

```
// ... Aggregator code
the_model.on( "remove", this.unlinkModel, this );
// ... more Aggregator code

unlinkModel: function( model ){
  model.off( null, null, this );
} 
```

在这种情况下，绑定的方向是*Aggregator -> Model*。如果方向相反，我认为您在移除模型后不必进行任何清洁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T10:21:07.253

我更喜欢直接扩展和覆盖，而不是像 fguillen 建议的那样包装`Collection`'s 。原因是 它只在客户端代码中生效，而不在库（即*Backbone*）中生效。例如，可以在内部调用. 除非修改*Backbone 的*源代码，否则我们不能在调用.`reset``cleanUp``Collection``reset``cleanUp`*`Collection.fetch``Collection.reset`*`cleanUp``Collection.fetch`**

 **基本上，我建议的片段如下：

```
var MyCollection = Backbone.Collection.extend({
        reset: function(models, options) {
            this.each(function(model) {
                model.unlink(); // same as fguillen's code
            });
            Backbone.Collection.prototype.reset.apply(this, arguments);
        }
    }); 
```

稍后，我们可以基于`MyCollection`.**

# android - 使用 Android 进行热插拔调试

> ID：10429651
> 
> 赞同：24
> 
> 时间：2012-05-03T10:36:16.987
> 
> 标签：android, debugging, hotswap

1) 在 Android 上启用热插拔调试是否需要任何特殊设置/配置？

示例案例：

*   在进入 Activity 的 onCreate 方法后添加断点。
*   在断点之后动态添加新行（虚拟“if (1==1) return;”代码）
*   转到下一条指令-> 问题：我的调试器没有在这一行中断，而是跳到下一条，导致我相信新行没有热交换到 VM 中。

2）只有模拟器支持热插拔吗？有没有同样支持的手机？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-07-31T14:48:32.527

每次构建 Android 项目时，它都会被 dexed 并放入一个调试签名的 apk 中，该 apk 会发送到您的手机/模拟器。因此，热插拔并不容易做到。

Hotswap 是精心设计的 JVM 的产物，它使交换类成为可能。在 Android 上，你有 Dalvik VM，它目前不支持热插拔。

不过，我猜 ADT 团队在他们的名单上有这个高分。

**编辑：尽管这个答案已经过去了 2.5 年，但变化不大。然而，ZeroTurnaround 已经准备好了，Android 版的 JRebel 应该为我们提供了一种非常需要的热插拔方法。 [http://zeroturnaround.com/software/jrebel-for-android/](http://zeroturnaround.com/software/jrebel-for-android/)**

**EDIT2：随着 Android Studio 2.0 Instant Run 的发布，您可以进行热插拔。热交换将在您的应用程序运行时更改一个类。**

**它们还支持热交换，这比热交换更能影响您的应用程序。热交换仍然让您的应用程序运行。资源更改将触发热交换。**

**观看 2015 年 Android 开发者峰会的演讲以了解更多信息：[https ://www.youtube.com/watch?v=fs0eira2pRY](https://www.youtube.com/watch?v=fs0eira2pRY)**

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-11-25T01:07:05.270

Android Studio 2.0 预览版引入了热插拔功能。您可以通过升级到：

```
 classpath group: 'com.android.tools.build', name: 'gradle', version: '2.0.0-alpha1' 
```

然后从菜单中设置它：

[![在此处输入图像描述](../Images/b5de8bce55cdc0370fc6236046fabb50.png)](https://i.stack.imgur.com/AqpKD.png)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-21T23:34:06.367

模拟器本身不支持代码热插拔，但使用 InstaReloader 等附加工具可以实现所需的操作。您可以免费使用此[Android 热插拔工具](http://www.instareloader.com/download)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-18T17:14:06.287

不是真正的热交换，但 Github 上有一个库可以模拟它。你可以在这里找到它：[https ://github.com/mmin18/LayoutCast](https://github.com/mmin18/LayoutCast)

它有一些问题，但在撰写此答案时处于活动状态。

此外，ZeroTurnaround 似乎正在解决 JRebel for Android 的问题。您可以在此处请求测试版访问权限：http: [//zeroturnaround.com/software/jrebel-for-android/](http://zeroturnaround.com/software/jrebel-for-android/)

# c# - Windows 窗体 XML 序列化保存对话框

> ID：10429654
> 
> 赞同：1
> 
> 时间：2012-05-03T10:36:27.630
> 
> 标签：c#, xml, windows, forms, streamwriter

我坚持这种愚蠢的形式......继承人我的代码。它将它保存在流编写器想要的位置，但是当我通过保存对话框将它保存在用户想要的位置时，它会创建 XML，但不会在其中放入任何内容！有人可以看一下，因为它开始让我感到震惊！

```
void SavebuttonClick(object sender, EventArgs e)
{
    Stream myStream ;
    SaveFileDialog savefile1 = new SaveFileDialog();

    savefile1.Filter = "xml files |*.xml"  ;
    savefile1.FilterIndex = 2 ;
    savefile1.RestoreDirectory = true ;

    if(savefile1.ShowDialog() == DialogResult.OK)
    {
        if((myStream = savefile1.OpenFile()) != null)
        {
            Values v = new Values();
            v.task1_name = this.task1_name.Text;
            v.task1_desc = this.task1_desc.Text;
            v.task1_date = this.task1_date.Value;
            v.task1_time = this.task1_time.Value;
            SaveValues(v);
        }
        myStream.Close();   
    }
} 
```

这是主播...

```
public void SaveValues(Values v)
{
    XmlSerializer serializer = new XmlSerializer(typeof(Values));
    using(TextWriter textWriter = new StreamWriter(@"E:\TheFileYouWantToStore.xml"))
    {
        serializer.Serialize(textWriter, v);
    }
...
} 
```

编辑：

```
public class Values 
{
public string task1_name { get; set;}
public string task1_desc { get; set;}
public DateTime task1_date { get; set;}
public DateTime task1_time { get; set;}
} 
```

我想这是你的意思的代码，我对编码相当陌生，虽然 mate :(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:19:14.253

您必须`textWriter.close();`在序列化后调用。如果您不关闭 writer，则不会将 chenges 应用于文件。顺便说一句，您正在将值写入**E:\TheFileYouWantToStore.xml**。您的保存方法不使用用户文件。

```
public void SaveValues(Values v)
{
    XmlSerializer serializer = new XmlSerializer(typeof(Values));
    using(TextWriter textWriter = new StreamWriter(@"E:\TheFileYouWantToStore.xml"))
    {
        serializer.Serialize(textWriter, v);
        textWriter.close();
    }
...
} 
```

**编辑：**

```
if(savefile1.ShowDialog() == DialogResult.OK)
{
        Values v = new Values();
        v.task1_name = this.task1_name.Text;
        v.task1_desc = this.task1_desc.Text;
        v.task1_date = this.task1_date.Value;
        v.task1_time = this.task1_time.Value;
        SaveValues(savefile1.FileName, v);
} 
```

-

```
public void SaveValues(string fileName, Values v)
{
    XmlSerializer serializer = new XmlSerializer(typeof(Values));
    using(TextWriter textWriter = new StreamWriter(fileName))
    {
        serializer.Serialize(textWriter, v);
        textWriter.close();
    }
...
} 
```

# ruby - 在 RVM 1.9.3 中安装 ruby 后，我可以在系统中安装 Ruby v1.8.7（不在 rvm 中）吗

> ID：10429655
> 
> 赞同：0
> 
> 时间：2012-05-03T10:36:38.860
> 
> 标签：ruby, rvm, chef-infra, ruby-1.8

实际上，我必须在使用`system default ruby v 1.8.7`. 并且安装了 rvm ruby​​，我的厨师没有工作。所以，要让我的厨师服务器安装。我需要在我的系统中安装 ruby​​1.8.7。在我为我的项目使用 ruby​​ 1.9.3 之前（通过 RVM）。

anybuddy 可以告诉我，在 RVM 1.9.3 中安装 ruby​​ 之后，如何在系统中安装 Ruby v1.8.7（不在 rvm 中）。

或者有没有可能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:23:08.267

你想设置一个默认的红宝石：

```
rvm use 1.8.7 --install --default 
```

如果未安装，这将安装 ruby `1.8.7`​​，它将使用它并设置为默认值，因此任何时候加载 rvm - 您都可以访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:48:49.680

`rvm use system`告诉 rvm 利用系统安装的 Ruby。要将系统 Ruby 设置为默认值，请键入`rvm reset`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T11:03:57.310

使用你的发行版的包管理器，这`rvm system`就是 - 将控制权交还给你的系统。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T10:45:43.057

有可能，但老实说，你对 RVM 更好，这样你就可以控制你的机器

# android - 带有可绘制选择器的 ImageView src 忽略启用状态

> ID：10429663
> 
> 赞同：17
> 
> 时间：2012-05-03T10:36:57.627
> 
> 标签：android, xml, android-imageview

当使用状态选择器作为 src 时`ImageView`，`enabled="false"`将被忽略。

即这不能正常工作：

```
<ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:enabled="false"
        android:src="@drawable/state_drawable" > 
```

PS： *我有一个丑陋的解决方法，我会尽快将其作为答案发布，如果您对此行为有更好的或解释，请告诉我。*

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-05-03T10:47:14.233

尝试添加属性 android:clickable="true"

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T10:39:48.593

可能的解决方法：将 a`TextView`与复合可绘制对象一起使用：

```
<TextView
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:drawableLeft="@drawable/state_drawable"
     android:enabled="false" /> 
```

这似乎可行，并从 state_drawable 中提取正确的可绘制对象，但不是很直观。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-06-23T09:07:15.230

我刚刚添加了以下属性：

```
android:background="@drawable/image_selector" 
```

并且不需要添加“android:src”。

现在在您的示例中，它应该如下所示：

```
<ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:clickable="true"
        android:background="@drawable/state_drawable" > 
```

希望能帮助到你...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-21T16:09:50.933

对我来说只有这个：

```
image.setClickable(false); 
```

For ImegeView android:enabled="false" for some reason doesn't work.

# math - ACM 4744 蛮力算法

> ID：10429666
> 
> 赞同：0
> 
> 时间：2012-05-03T10:37:14.300
> 
> 标签：math, functional-programming, nested-loops, fibonacci

问题的完整上下文可以在此处查看 [详细信息](http://livearchive.onlinejudge.org/index.php?option=com_onlinejudge&Itemid=8&page=show_problem&problem=2745)。

您也可以尝试我的源代码来绘制小数字的递归： [Pastebin](http://pastebin.com/X95Wz4B8)

我正在以数学方式看待这个问题，它是一个嵌套递归，如下所示：

```
Function Find(integer n, function func)
If n=1
   For i = 1 to a do func()
Elseif n=2
   For i = 1 to b do func()
Else Find(n-1,Find(n-2,func))

Function Main
   Find(n,funny) 
```

我在没有模运算的 Mathematica 中的实现是：

```
$IterationLimit = Infinity
Clear[A]

A [a_, b_, f_, 1] := A [a, b, f, 1, p] = (f a);
A [a_, b_, f_, 2] := A [a, b, f, 2, p] = (f b);
A [a_, b_, f_, n_] := 
A [a, b, f, n, p] = (A[a, b, A[a, b, f, n - 2], n - 1]); 
```

这揭示了一般**a**和**b的一些不错的输出**

```
A[a, b, funny, 1]
a funny
A[a, b, funny, 2]
b funny
A[a, b, funny, 3]
a b funny
A[a, b, funny, 4]
a b^2 funny
A[a, b, funny, 5]
a^2 b^3 funny
A[a, b, funny, 6]
a^3 b^5 funny 
```

因此，当我们查看调用 Func 的频率时，它看起来像 a^(F(n)) * b^(F(n+1))，其中 F(n) 作为第 n 个斐波那契数。所以我的问题是：我如何获得非常大的斐波那契数模 p，我对此做了很多研究，通读了斐波那契的周期长度，尝试了一些递归：

F(a+b) = F(a+1) * F(b) + F(a)*F(b-1)

但似乎递归深度 (log_2(1.000.000.000) ~=30 ) 将 p 分成两个数字时要多得多，即使是第一次递归也是如此。

```
a= floor(n/2)
b= ceiling(n/2) 
```

> 当我有 Fib 数字时，乘法和求幂在我看来应该不是问题。

不幸的是：/

我仍然坚持这个问题。首先计算指数中的斐波那契数并没有正确解决问题，这是我在那里应用的错误数学公式：/

所以我想到了其他计算公式的方法：

```
(a^(Fibonacci(n-2))*b^(Fibonacci(n-1))) mod p 
```

但是随着斐波那契数变得非常大，我假设必须有一种比计算整个斐波那契数然后使用 BigInteger/BigFloat 应用离散指数函数更简单的方法。有人对我有提示吗，我看不到进一步的进展。谢谢

所以这就是我到目前为止的地方，可能只是我错过的一件小事，所以期待你的回复

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T17:19:56.537

[您可能会发现我对计算斐波那契数和卢卡斯数](http://www.mathworks.com/matlabcentral/fileexchange/34766-the-fibonacci-sequence)的各种方法的思考很有帮助。在那里，我展示了如何使用基本上为 O(log2(n)) 的递归方案进行计算。它非常适用于大型斐波那契数。而且，如果您将所有这些都以某个小数为模，您甚至不需要使用大整数工具进行计算。即使是巨大的斐波那契数字，这也将是非常快的。下面这个只是中等大小。

```
fibonacci(10000)
ans =
    33644764876431783266621612005107543310302148460680063906564769974680
081442166662368155595513633734025582065332680836159373734790483865268263
040892463056431887354544369559827491606602099884183933864652731300088830
269235673613135117579297437854413752130520504347701602264758318906527890
855154366159582987279682987510631200575428783453215515103870818298969791
613127856265033195487140214287532698187962046936097879900350962302291026
368131493195275630227837628441540360584402572114334961180023091208287046
088923962328835461505776583271252546093591128203925285393434620904245248
929403901706233888991085841065183173360437470737908552631764325733993712
871937587746897479926305837065742830161637408969178426378624212835258112
820516370298089332099905707920064367426202389783111470054074998459250360
633560933883831923386783056136435351892133279732908133732642652633989763
922723407882928177953580570993691049175470808931841056146322338217465637
321248226383092103297701648054726243842374862411453093812206564914032751
086643394517512161526545361333111314042436854805106765843493523836959653
428071768775328348234345557366719731392746273629108210679280784718035329
131176778924659089938635459327894523777674406192240337638674004021330343
297496902028328145933418826817683893072003634795623117103101291953169794
607632737589253530772552375943788434504067715555779056450443016640119462
580972216729758615026968443146952034614932291105970676243268515992834709
891284706740862008587135016260312071903172086094081298321581077282076353
186624611278245537208532365305775956430072517744315051539600905168603220
349163222640885248852433158051534849622434848299380905070483482449327453
732624567755879089187190803662058009594743150052402532709746995318770724
376825907419939632265984147498193609285223945039707165443156421328157688
908058783183404917434556270520223564846495196112460268313970975069382648
706613264507665074611512677522748621598642530711298441182622661057163515
069260029861704945425047491378115154139941550671256271197133252763631939
606902895650288268608362241082050562430701794976171121233066073310059947
366875 
```

诀窍很简单。只需将第 2 个斐波那契数和卢卡斯数与第 n 个这样的数关联起来。它允许我们向后工作。所以要计算 F(n) 和 L(n)，我们需要知道 F(n/2) 和 L(n/2)。显然，只要 n 是偶数，这就会起作用。对于奇数 n，有类似的方案可以让我们递归地向下移动。

为了踢球，我只是修改了上面的工具，接受一个模数。因此，要计算索引为 1e15 的斐波那契数的最后 6 位数字，大约需要 1/6 秒。

```
tic,[Fn,Ln] = fibonacci(1e15,1000000),toc
Elapsed time is 0.161468 seconds.

Fn =
    546875

Ln =
    328127 
```

注意：在我对递归计算斐波那契数的讨论中，我确实对所需的递归调用数做了一些评论。看到这个数字确实与斐波那契数列本身非常相关。这很容易推导出来。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:42:42.193

如果是关于计算斐波那契数，则有一个非递归、非迭代的公式。它在荷兰维基百科关于斐波那契数的页面上很突出，但在英文页面上却没有那么多。

F(n) = ( ( 1 + sqrt(5) ) ^ n - ( 1- sqrt(5) ) ^ n ) / (2 ^ n * sqrt(5))

[http://upload.wikimedia.org/wikipedia/nl/math/1/7/4/1747ee745fbe1fbf10fb3d9de36b8927.png](http://upload.wikimedia.org/wikipedia/nl/math/1/7/4/1747ee745fbe1fbf10fb3d9de36b8927.png)

资料来源： http: [//nl.wikipedia.org/wiki/Rij_van_Fibonacci](http://nl.wikipedia.org/wiki/Rij_van_Fibonacci)

也许你可以用这个公式做点什么。

# wordpress - 通过php致命错误插入wordpress帖子

> ID：10429677
> 
> 赞同：0
> 
> 时间：2012-05-03T10:37:49.480
> 
> 标签：wordpress, post

当我想使用**wp_insert_post( $my_post );** 函数我收到以下错误：

> 致命错误：无法在 /home/izradawe/public_html/mydomain.com/wp-includes/post 中重新声明 create_initial_post_types()（之前在 /home/izradawe/public_html/mydomain.com/wp-includes/post.php:20 中声明） .php 在第 152 行

你能帮我解决这个问题吗？

我使用的代码：

```
 include_once('../wp-load.php');
  include("../wp-includes/post.php");

  // Creating post
  $my_post = array(
     'post_title' => 'My post',
     'post_content' => 'This is my post.',
     'post_status' => 'publish',
     'post_author' => 1,
     'post_category' => 5,
     'post_type' => 'post'
  );

  // Insert the post into the database
  wp_insert_post( $my_post ); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T16:49:16.870

要访问 Wordpress 的主要功能，请尝试：

```
<?php
include '../wp-blog-header.php';
$my_post = array(
  'post_title' => 'My post',
  'post_content' => 'This is my post.',
  'post_status' => 'publish',
  'post_author' => 1,
  'post_category' => 5,
  'post_type' => 'post'
);
wp_insert_post( $my_post );
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:57:11.873

如果您在 single.php 或 index.php 或模板目录中的任何模板文件中编写代码，则无需包含文件 wp-load.php 或 post.php

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-05T07:43:03.237

更改`include`为`include_once`.

# java - 我的 Java 程序在调用 shell 命令后挂起

> ID：10429681
> 
> 赞同：0
> 
> 时间：2012-05-03T10:38:11.853
> 
> 标签：java, shell

我写了一个小程序来启动 Hive Server。启动 Hive 服务器的命令在 shell 文件中。当我调用 shell 文件来启动 Hive Server 时，它往往会启动它并挂起。程序有问题吗？

## 代码：

```
 try
        {
            String cmd = "/home/hadoop/sqoop-1.3.0-cdh3u1/bin/StartServer.sh"; // this is the command to execute in the Unix shell

            // create a process for the shell
            ProcessBuilder pb = new ProcessBuilder("bash", "-c", cmd);
            pb.redirectErrorStream(true); // use this to capture messages sent to stderr
            Process shell = pb.start();
            InputStream shellIn = shell.getInputStream(); // this captures the output from the command
            // wait for the shell to finish and get the return code
            // at this point you can process the output issued by the command

            // for instance, this reads the output and writes it to System.out:
            int c;
            while ((c = shellIn.read()) != -1) 
            {
                System.out.write(c);
            }

            // close the stream
            shellIn.close();
        }
        catch(Exception e)
        {
            e.printStackTrace();
            e.printStackTrace(pw);
            pw.flush();
            System.exit(1);
        } 
```

请让我知道这一点。我在程序中错过了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:45:32.120

看起来你的程序正在做你告诉它做的事情。

前几行确实应该启动 Hive 服务器。之后的行从服务器进程的标准输出中读取，并将每个字符回显到 Java 进程的控制台。只要 Hive 服务器的输出流存在，您的 Java 进程就会处于一个循环中（进行阻塞 I/O 调用）。

也就是说，只要 Hive 服务器正在运行，您的 Java 进程就会处于循环中，回显输出。

这是你想要它做的吗？如果是这样，那么它显然将无法*退出*。如果没有，那么您根本没有理由从服务器的输入流中读取数据，并且您的 Java 程序可以在启动服务器进程后退出。或者，如果您想在 Java 进程中侦听输出*并*执行其他操作，则需要[使用多个线程](http://docs.oracle.com/javase/tutorial/essential/concurrency/)才能同时执行两项操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T10:45:19.403

据我所知，您正在启动服务器，即启动并且不会很快终止的应用程序。它仍在运行。这意味着此应用程序（服务器）的 STDOUT 未关闭（除非您正在终止服务器）。

方法`shellIn.read()`是阻塞。它从输入流中读取下一个字节，并在读取字节或关闭流时返回。

因此，在您的情况下，流永远不会关闭，因此您的程序卡住了：它永远等待输入（并且可能正在读取它）。

要解决此问题，您需要单独的线程：在 java 或 OS 中。您可以从单独的 java 线程运行服务器或编写命令行以在后台运行服务器（例如使用尾随 &）。

# jquery - 在由 HTML 字符串构建的 jQuery 对象中查找元素

> ID：10429687
> 
> 赞同：5
> 
> 时间：2012-05-03T10:38:56.517
> 
> 标签：jquery, dom

我希望能够从一串 HTML 构建一个 jQuery 对象并直接在里面搜索。

例子：

```
htmlString = '<h3>Foo</h3><div class="groups"></div>'
$html      = $(htmlString)
$groups    = $html.find('.groups') // Returns []. WTF? 
```

我希望这`find`实际上找到了`div`元素。

如果您想了解更多关于我的问题的上下文，我开发了一个 Backbone 应用程序并渲染某些视图，我有这样的事情：

```
render: ->
  $html   = $(@template(vehicle: @vehicle))
  $groups = $()

  _(@groups).each (group)=>
    subview = new App.Views.AttributesGroup(group: group, vehicle: @vehicle)
    $groups = $groups.add(subview.render().el)

  $(@el).html($html)
  $(@el).find('.groups').replaceWith($groups)
  @ 
```

我正在寻找一种更优雅的方式来实现相同的结果。

谢谢！

* * *

谢谢马特，很清楚。我为没有想到这种关于后代和兄弟姐妹的微妙之处而感到愚蠢。

所以我重构了我的代码：

```
render: ->
  $html   = $(@template(vehicle: @vehicle))
  $groups = $html.filter('.groups')

  _(@groups).each (group)=>
    subview = new App.Views.AttributesGroup(group: group, vehicle: @vehicle)
    $groups.append(subview.render().el)

  $(@el).html($html)
  @ 
```

现在只有一个 DOM 插入，代码看起来更清晰。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-05-03T10:42:48.090

这是因为`find()`在 jQuery 对象中搜索元素的后代，但该`.groups`元素*是*jQuery 对象中的元素，因此不会匹配。

相反，您需要使用[`filter()`](http://api.jquery.com/filter)来搜索当前元素。

```
htmlString = '<h3>Foo</h3><div class="groups"></div>'
$html      = $(htmlString)
$groups    = $html.filter('.groups'); 
```

但是，如果您当时拥有`htmlString`of `<h3><span class="bar">Foo</span></h3><div class="groups"></div>`，您将找不到`.bar`; 这将是一个`find()`电话。

因此，您需要同时检查两者；

```
htmlString = '<h3>Foo</h3><div class="groups"></div>'
$html      = $(htmlString)
$groups    = $html.find('.groups').add($html.filter('.groups')); 
```

# asp.net - 访问动态生成的控件 对象引用未设置为对象的实例

> ID：10429691
> 
> 赞同：1
> 
> 时间：2012-05-03T10:39:13.400
> 
> 标签：asp.net

我正在根据条件向我的页面动态添加控件。这些控件中有一个按钮，我还为单击事件附加了一个事件处理程序。现在在这个事件处理程序中，我正在尝试访问我的动态生成控制，但得到一个例外。这是我的代码：

```
protected void Page_Load(object sender, EventArgs e)
        {
            String Method = Request.QueryString["Method"];
            String Tag = Request.QueryString["Tag"];

            if (Method=="ADD" && Tag=="METHOD")
            {

                //6
            TableCell cell11 = new TableCell();
            cell11.Text = "NEXTLEVEL";

            TableCell cell12 = new TableCell();
            TextBox txt6 = new TextBox();
            txt6.ID = "txt6";
            cell12.Controls.Add(txt6);

            TableRow row6 = new TableRow();
            row6.Cells.Add(cell11);
            row6.Cells.Add(cell12);

            container.Rows.Add(row6);
                TableCell cell14 = new TableCell();
                Button submit = new Button();
                submit.ID = "SubmitButton";
                submit.Text = "Submit";
                submit.Click += new EventHandler(submit_Click);

                cell14.Controls.Add(submit);

                TableRow row7 = new TableRow();

                row7.Cells.Add(cell14);

                container.Rows.Add(row7);
            }

void submit_Click(object sender, EventArgs e)
        {
            ModifySessionAnalyzer msa = new ModifySessionAnalyzer();
            TextBox txt6= (TextBox)Page.FindControl("txt6") as TextBox;
            ##String message = txt6.Text;##

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:50:56.697

```
TableCell cell12 = new TableCell();
TextBox txt6 = new TextBox();
txt6.ID = "txt6";
cell12.Controls.Add(new TextBox()); 
```

这是错误的，您没有将 txt6 控件添加到单元格，而是添加了一个新的文本框...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T10:45:11.210

动态添加的控件应该在`Page_Init`方法中不添加`Page_Load`。如果将它们添加到`Page_Load`其中，它们将不会被添加到控制树中，并且您会遇到问题 - 即它们不会正确参与 ViewState。

`(TextBox)Page.FindControl("txt6")`由于文本框不再在控制树中，因此可能会失败

这可能是您问题的根源。

**进一步说明**

你的代码应该是

```
protected void Page_Init(object sender, EventArgs e)
{
      //.. your code goes here
} 
```

**不是**

```
protected void Page_Load(object sender, EventArgs e)
{
   //.. your code
} 
```

这是使用的正常做法，`Page_Load`所以这对人们来说只是一个简单的习惯，但是当使用动态控件时，这是一个例外

当我说动态控件时 - 当您动态添加控件而不是在页面中声明它们时，它就是任何东西。寻找任何你要去的地方`Controls.Add`

# android - 将某项活动放在前面

> ID：10429693
> 
> 赞同：0
> 
> 时间：2012-05-03T10:39:24.050
> 
> 标签：android, android-activity

假设：我有 2 个类 MainActivity 和 SecondActivity

起初，我的应用程序从 MainActivity 的一个实例开始。在 MainActivity 中，有几个按钮，如果单击它们将启动 SecondActivity。并且每次启动一个 SecondActivity，我都会通过 putExtra 函数为该 SecondActivity 设置一个不同的参数，所以每个 SecondActivity 都会显示每个不同的内容。

我在 SecondActivity 中使用了这段代码：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    if (keyCode == KeyEvent.KEYCODE_BACK) {
        moveTaskToBack(true);
        return true;
    }
    return super.onKeyDown(keyCode, event);
} 
```

所以每次在 SecondActivity 中按下后退按钮时，它都不会被破坏。

现在，例如，我有这种情况：

> MainActivity **==click_a_button==>** SencondActivity(instance1) **==press_back_button==>** MainActivity **==click_another_button==>** SecondActivity(instance2) **==press_back_button==>** MainActivity **(*)**

停止在步骤**(*)**：从这里（在 MainActivity 中），用户按下启动**instance1**的按钮，我的问题是如何将 SecondActivity(instance1) 准确地放在前面？

P/S：我读过`Intent.FLAG_ACTIVITY_REORDER_TO_FRONT`但不知道如何在我的情况下使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:42:28.060

将您的 SecondActivity 的 lanchMode 设置为 SingleTop。

```
 <activity
        android:name=".SecondActivity"
        android:launchMode="singleTop" >
    </activity> 
```

# database - 使用窗口调度程序删除数据库记录

> ID：10429695
> 
> 赞同：0
> 
> 时间：2012-05-03T10:39:25.890
> 
> 标签：database, batch-file, window, delete-file

我使用 Windows 调度程序创建了一个自动备份任务，以使用 .bat 备份我的数据库。

在我的备份文件夹中有 7 个子文件夹（星期一、星期二、星期三...）来保存每日备份数据库。

如何删除上周的数据库并保持最新版本？比如今天是星期四，我想删除上个星期四的db，保留今天的db？

这是 .bat 命令？

```
sqlcmd -S NATE-PC\SQLEXPRESS2008R2 -U user1 -P user -i C:\scheduled\schedule.sql

del d:\Backup\db_backup_*.bak ?? what should I write here 
```

这是为了每天运行的 sql 查询

```
 DECLARE @pathName NVARCHAR(512) 
SET @pathName = 'D:\Backup\db_backup\' + DATENAME(DW,GETDATE())+'\'+ Convert(varchar(8), GETDATE(), 112) + '.bak' 
BACKUP DATABASE [LEWREDB] TO  DISK = @pathName WITH NOFORMAT, NOINIT,  NAME = N'db_backup', SKIP, NOREWIND, NOUNLOAD,  STATS = 10 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:52:23.597

试试这个删除命令

```
forfiles /p "d:\Backup" /m "db_backup_*.bak" /c "cmd /c Del @path " /d -7 
```

[这里是描述](http://www.ss64.com/nt/forfiles.html)

# windows-phone-7 - WP7中的图像流到base64字符串

> ID：10429700
> 
> 赞同：0
> 
> 时间：2012-05-03T10:39:48.543
> 
> 标签：windows-phone-7, windows-phone-7.1, windows-phone, windows-phone-7.1.1

在我的 wp7 应用程序中，我从媒体库中选择图像，我想获取该图像的 base64 字符串，因为我将其发送到我的 wcf 服务以在服务器上创建图像。获取base64字符串的代码如下：

```
void taskToChoosePhoto_Completed(object sender, PhotoResult e)
{
    if (e.TaskResult == TaskResult.OK)
    {
        fileName = e.OriginalFileName;
        selectedPhoto = PictureDecoder.DecodeJpeg(e.ChosenPhoto);
        imgSelected.Source = selectedPhoto;
        int[] p = selectedPhoto.Pixels;
        int len = p.Length * 4;
        result = new byte[len]; // ARGB

        Buffer.BlockCopy(p, 0, result, 0, len);
        base64 = System.Convert.ToBase64String(result);
    }
} 
```

但在服务器上，此代码创建图像文件，但格式无效。我交叉验证了 base64 字符串，但我认为应用程序给出了错误的 base64string 可能是什么原因，请帮助找出问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:54:23.903

您正在服务器上发送 base64 编码的像素。我不确定这是你需要的。转换`Stream`成base64字符串怎么样？

```
var memoryStream = new MemoryStream();
e.ChosenPhoto.CopyTo(memoryStream);
byte[] result = memoryStream.ToArray();
base64 = System.Convert.ToBase64String(result); 
```

# chef-infra - 如何从本地机器上的服务器运行说明书

> ID：10429706
> 
> 赞同：1
> 
> 时间：2012-05-03T10:40:05.253
> 
> 标签：chef-infra

我有带有食谱（recepies）和添加主机的厨师服务器。

如何在本地服务器上运行说明书？我知道厨师自动制作它，默认情况下每 30 分钟一次，但我想立即运行它。

PS：我知道 chef-solo，但我需要从服务器运行食谱而不需要任何手动操作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T11:46:24.337

您可以通过执行按需运行 Chef `sudo chef-client`，但向 chef-client 守护进程发送 USR1 信号会更安全一些：

```
$ sudo killall -USR1 chef-client 
```

这告诉 chef-client 守护进程立即开始另一个运行。这样做更安全，因为不可能有两个厨师客户同时运行。

（厨师客户端运行实际上延迟到厨师客户端守护程序选项指定的秒数，`--splay`因此它不会立即发生在此时此刻）。

# google-maps - Google Maps V3 Street View Service 和 getPanoramaByLocation() 对配额的影响？

> ID：10429712
> 
> 赞同：0
> 
> 时间：2012-05-03T10:40:36.933
> 
> 标签：google-maps

在我的应用程序中，我需要`LatLng`使用**Street View Service**和`getPanoramaByLocation()`.

这会消耗我的请求配额吗？如果真是这样，那么是以哪种方式？我在文档中没有找到一个简单的答案。

# nsuserdefaults - XCODE：获取设置的值

> ID：10429713
> 
> 赞同：1
> 
> 时间：2012-05-03T10:40:40.197
> 
> 标签：nsuserdefaults

我几乎绝望，因为我的设置没有正确保存。

当用户选择一个单元格时，我在 UITableView 中保存一个设置：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

checkedCell = indexPath;
NSUInteger row1 = [indexPath row];
NSString *TD = [listData objectAtIndex:row1];
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

[defaults setObject:TD forKey:@"TestData"];
[defaults synchronize];
NSLog(@"Save");
[tableView reloadData];

} 
```

在另一个 ViewController 中，我加载数据并进行 if-else 语句：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

NSString *TD = [defaults objectForKey:@"TestData"];

NSLog(@"%@",TD);

if (TD == @"0") {
        NSString *NTD = @"TRUE";
    }
    else {
        NSString *NTD = @"FALSE";

    }
} 
```

我看到 NSLog 为 0 但 NTD 为 FALSE。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:44:30.473

使 if 条件像这样

if ([TD isEqualToString:@"0"]) {

```
 NSString *NTD = @"TRUE";

}
else {

    NSString *NTD = @"FALSE";

} 
```

这肯定会有所帮助

# c# - 错误：Microsoft Visual Studio 2010 上的“.Net Framework 许可证编译器”devexpress

> ID：10429714
> 
> 赞同：0
> 
> 时间：2012-05-03T10:40:59.577
> 
> 标签：c#, devexpress, licenses.licx

我正在使用 Microsoft Visual Studio 2010 Team Foundation Server。编译时出现以下 devexpress 错误：

Sorun imzası: - Sorunlu Olay Adı: CLR20r3
- Sorun İmzası 01: lc.exe
- Sorun İmzası 02: 4.0.30319.1 -
Sorun İmzası 03: 4ba1e1e3
- Sorun İmzası 04: DevExpress.XtraEditors.v11.2
- Sorun İmzası 05: 11.2\. 8.0
- Sorun İmzası 06: 4f293631
- Sorun İmzası 07: 279
- Sorun İmzası 08: 13
- Sorun İmzası 09: System.NullReferenceException
- OS Sürümü: 6.1.7601.2.1.0.256.4

```
Exception occurred creating type 'DevExpress.XtraEditors.Repository.RepositoryItemTextEdit, DevExpress.XtraEditors.v11.2, Version=11.2.8.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a' System.TypeInitializationException: 'DevExpress.XtraEditors.Repository.RepositoryItem' tür başlatıcısı özel durum döndürdü. ---> System.IO.FileLoadException: 'DevExpress.Design.v11.2' dosyasını veya derlemesini ya da bağımlılıklarından birini yükleyemedi. Geçersiz işaretçi (HRESULT özel durum döndürdü: 0x80004003 (E_POINTER)) ---> System.NullReferenceException: Nesne başvurusu bir nesnenin örneğine ayarlanmadı

Exception occurred creating type 'DevExpress.XtraBars.Ribbon.RibbonControl, DevExpress.XtraBars.v11.2, Version=11.2.8.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a' System.TypeInitializationException: 'DevExpress.XtraEditors.Repository.RepositoryItem' tür başlatıcısı özel durum döndürdü. ---> System.IO.FileLoadException: 'DevExpress.Design.v11.2' dosyasını veya derlemesini ya da bağımlılıklarından birini yükleyemedi. Geçersiz işaretçi (HRESULT özel durum döndürdü: 0x80004003 (E_POINTER)) ---> System.NullReferenceException: Nesne başvurusu bir nesnenin örneğine ayarlanmadı.   

Exception occurred creating type 'DevExpress.XtraEditors.Repository.RepositoryItemCheckEdit, DevExpress.XtraEditors.v11.2, Version=11.2.8.0, Culture=neutral, PublicKeyToken=b88d1754d700e49a' System.TypeInitializationException: 'DevExpress.XtraEditors.Repository.RepositoryItem' tür başlatıcısı özel durum döndürdü. ---> System.IO.FileLoadException: 'DevExpress.Design.v11.2' dosyasını veya derlemesini ya da bağımlılıklarından birini yükleyemedi. Geçersiz işaretçi (HRESULT özel durum döndürdü: 0x80004003 (E_POINTER)) ---> System.NullReferenceException: Nesne başvurusu bir nesnenin örneğine ayarlanmadı. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T12:02:01.767

我懂土耳其语，所以我可以说检查您对 DevExpress dll 的引用和您的安装。

由于您在开发和运行时使用不同版本的 dll，可能会出现这种情况，请确保它们相同

# svn - 编译PowerBuilder应用v12.1 Build 6518和OLE对象

> ID：10429719
> 
> 赞同：0
> 
> 时间：2012-05-03T10:41:23.600
> 
> 标签：svn, tortoisesvn, ole, powerbuilder

编译**PowerBuilder应用程序v12.1 Build 6518时出现问题**

一些开发人员正在使用**SVN**（客户端**CollabNet V1.6.16-1**和**TortoiseSVN V1.6.15 PBSCCProxy 02/01/78**）开发此应用程序。此应用程序包含一个包含“ **OLE 控件**”的窗口。当前版本的 OLE 控件在此窗口中存在 6 个月（迁移后），并且通常调用此控件的函数来启动应用程序。

OLE 控件在所有开发工作站上注册（通过`[Regsvr32 AgentLink.dll]`）。此 DLL 的控件由 Windows 引用，确实，要检查，您可以通过在任何窗口上插入控件来重新创建它，它存在于 PB 建议的列表中（尽管它在通过控制取消订阅后从列表中消失并在之后`[Regsvr32 / u AgentLink.dll]` 重新出现一切都结束了`[Regsvr32 AgentLink.dll]`）

在工作站（**Windows 7 Pro 32 位 SP1**）上，此应用程序在 PB 中的执行和可执行文件正常工作。在另一个扩展（**Windows 7 Pro 32 位 SP1**也是）上，恢复源更新后，在 PB 中执行并由独立生成的可执行文件生成以下错误消息：

```
PowerBuilder Application Execution Error (R0039)
Application terminated.
Error: Error Accessing external object property agentproxy at line 88 in open event of object w_hermes_toolbar. 
```

该错误发生在第一次调用 OLE 对象的函数时。

经过研究，放置在一个窗口上的一个**OLE对象**在这个窗口的导出文件的末尾生成了一个二进制段

```
[Start of PowerBuilder Binary Data Section: Do NOT Edit] 
```

**（此二进制部分在“编辑源**”期间不可见）SVN`.srw`在`WorkingCopy`.

不利的是，在应用程序不起作用的计算机上，窗口的导出会生成一个。Srw 具有完全不同的二进制部分。如果我们替换这个被**SVN WorkingCopy**`.srw`文件中存在的二进制部分损坏的二进制部分，然后我们将这个修改后的文件重新导入库中（在**CheckOut**之后），那么应用程序会再次正常工作。

 ****此二进制部分在某些项目上被**PBSCCProxy**（WorkingCopy 的版本包含正确的二进制部分）或**PowerBuilder**损坏。Regenerate 和 FullBuild 没有改变任何东西。该问题在独立执行或 PB 中是相同的。开发计算机在 windows、PB 和 SVN 版本中是相同的。 **PBSCCProxy 版本（2.1.78）**也相同，出现问题后更新为**2.1.80**版本（获取此版本中实现的日志**PBSCC**）

问题“突然”出现。该应用程序和生成的可执行文件在**14.30 (2.30pm)的编译中完美运行，并且在****16.00 (4.00pm)**编译后不再工作（每次更改都在另一台计算机上生成并通过**SVN**检索）。据我们所知，在**14:30**和**16:00**之间的窗口中没有发生任何更改或更新。

欢迎任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T18:23:52.160

此部分将表示来自上次编辑对象/窗口的工作站的 OLE 控件的二进制版本。

确保所有开发工作站（包括任何专用构建机器）都安装并注册了当前正确版本的 OLE 控件。****

# javascript - javascript覆盖addEventListener并使其跨浏览器

> ID：10429720
> 
> 赞同：2
> 
> 时间：2012-05-03T10:41:24.237
> 
> 标签：javascript, overriding, addeventlistener

进一步回答这个问题[Failure to override Element's addEventListener in Firefox](https://stackoverflow.com/questions/4787698/failure-to-override-elements-addeventlistener-in-firefox)

我不想使用这里提到的外部包装器/实用程序功能。[Javascript添加事件跨浏览器功能实现：使用attachEvent/addEventListener vs inline events](https://stackoverflow.com/questions/3763080/javascript-add-events-cross-browser-function-implementation-use-attachevent-add)

目标：我只是调用重写的 addEventListener 函数来保持简单，它应该处理自身内部的跨浏览器差异或请告知。

我已经编辑了代码，我们如何在这个解决方案中实现跨浏览器功能

```
 (function() {
        var interfaces = [ HTMLDivElement, HTMLImageElement /* ... (add as many as needed) */ ];
        for (var i = 0; i < interfaces.length; i++) {
            (function(original) {
                interfaces[i].prototype.addEventListener = function(type, listener, useCapture) {

                    // DO SOMETHING HERE
                    if(element.attachEvent){ //IE
                        arguments[0] = 'on' + arguments[0];
                        return element.attachEvent.apply(this, arguments);
                    } else { //other browsers
                        return original.apply(this, arguments);
                    }
                }
            })(interfaces[i].prototype.addEventListener);
        }
    })(); 
```

# azure - Azure 表存储批处理突然失败

> ID：10429723
> 
> 赞同：0
> 
> 时间：2012-05-03T10:41:41.053
> 
> 标签：azure, azure-storage, azure-table-storage

将数据批处理到 Azure 表存储时出现奇怪的错误。

我有一个包含 +350.000 个字符串的数组。我将每个字符串保存在一行中。它工作正常，直到第一个 +50.000 条记录，然后 Azure 表存储开始抛出“无效输入类型”和“状态码 400”的异常。

当我批处理时，我一次批处理 10 个项目，使用简单的重试策略。

```
_TableContext.RetryPolicy = RetryPolicies.Retry(4, new TimeSpan(0, 0, 30));
_TableContext.SaveChanges(System.Data.Services.Client.SaveChangesOptions.Batch); 
```

没有异步，没有并行。它在开发环境中运行良好。

呃……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T11:39:35.677

Azure 表存储的物理限制为每行 1MB，每个字符串字段的限制为 64 Kb（千字节）。

此外，如果您将字符串存储为分区键或行键，则不允许使用某些字符。

来源：http: [//msdn.microsoft.com/en-us/library/dd179338.aspx](http://msdn.microsoft.com/en-us/library/dd179338.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T23:53:15.013

错误是我自己的错误。我曾尝试使用相同的行和分区键来保存批次。当我改变它时，它工作得很好。

天蓝色 FTW！:)

# sql - SQL，匹配列 b 中的所有值并为这些匹配返回列 a

> ID：10429725
> 
> 赞同：1
> 
> 时间：2012-05-03T10:41:43.923
> 
> 标签：sql, sql-server, sql-match-all, relational-division

我只看一张桌子，我有我需要匹配的值，所以。

```
Col A / Col B
1 / 1
1 / 2
1 / 3
2 / 2
2 / 3
4 / 1
4 / 3 
```

所以我传入的值是 1 和 3，我想返回 1 和 4。

我已经尝试了一个 group by ，我不得不使用两个子查询，但它没有用。

编辑：理想情况下，我想使用一个选择查询，因为我需要在我在 sql server 之外构建的另一个查询中使用这个查询。

EDIT2：理想情况下，我想将输入作为 csv 字符串传递

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T10:50:58.847

```
select ColA 
from your_table
where ColB in(1, 3)
group by ColA
having count(ColA) > 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:48:57.353

如果我理解正确，传入的值与 ColumnB 相关，并且返回值来自 ColumnA：

```
SELECT      A.ColumnA
FROM        [YOUR TABLE] A
INNER JOIN  [YOUR TABLE] ON ( A.ColumnA = B.ColumnA AND B.ColumnB = 1 )
WHERE       A.ColumnB = 3 
```

# c# - MonoDroid 评估 Directory.CreateDirectory() 中的 System.UnauthorizedAccessException

> ID：10429728
> 
> 赞同：1
> 
> 时间：2012-05-03T10:41:57.983
> 
> 标签：c#, xamarin.android, monodevelop, mvvmcross

设想：

开始 MonoDevelop

新的安卓应用

将按钮单击委托替换为

```
string fullPath = "/data/misc.mvvmcross.customermanagement/files/_Caches/Pictures.MvvmCross/";
if (System.IO.Directory.Exists(fullPath))
{
    button.Text = "exists";
}
else
{
    button.Text = "not found";
    Directory.CreateDirectory(fullPath);
} 
```

运行并单击按钮。Directory.CreateDirectory 将失败

```
System.UnauthorizedAccessException 
```

已尝试创建具有不同 API 级别的新模拟器映像，但问题仍然存在

有什么想法吗？

好的，已经创建了新的 Android 模拟器图像并使用了它。现在一切正常。

解决方案：为您想要的 API 级别创建一个新的 android 模拟器映像（不要忘记 Google API 支持）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:21:52.223

我想知道这是否是由某种程序集/包命名问题引起的。

我已经测试了这段代码：

```
 string fullPath = Path.Combine(FilesDir.Path, "_Caches2/Pictures.MvvmCross/2/");
        if (System.IO.Directory.Exists(fullPath))
        {
            button.Text = "exists";
        }
        else
        {
            button.Text = fullPath;
            Directory.CreateDirectory(fullPath);
        } 
```

...它在 2.3.3 模拟器中运行良好。

数据文件夹模式是：`/data/ * package name * /files/`

一个包不能访问另一个包的数据是正确的（我认为）。

所以我想知道您的包名称是否有错误 - 检查您的应用程序的清单选项卡和 manifest.xml 文件？

# java - 如何将类映射到休眠中不相关的多个表？

> ID：10429734
> 
> 赞同：0
> 
> 时间：2012-05-03T10:42:06.627
> 
> 标签：java, hibernate, hibernate-mapping

我有一个有很多属性的类（例如 25）。假设我们有 5 个组，每个组有 5 个属性作为排列。这些组中的每一个都引用一个不同的表，该表与其他组的其他表没有任何关系。是否可以在 Hibernate 中进行这样的映射？

```
class Test
{
string var1;
string var2;
string var3;
string var4;
string var5;

}

Table1:
Column:var1

Table2:
Column:var2

Table3:
Column:var3

Table4:
Column:var4

Table5:
Column:var5 
```

现在我需要一个休眠映射 (.hbm) 文件，我需要在其中使用 table1、table2、table3、table4、table5 映射类测试。这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T15:31:00.823

不可能。不可能从不同的表中获取值，没有关系。您可以使用 JOIN 策略将一个表映射到一个实体上或将一个实体映射到多个表上。但是你不能在没有关系的情况下使用 JOIN 。所以这是不可能的

# prefuse - Prefuse：向边缘添加标签？

> ID：10429735
> 
> 赞同：1
> 
> 时间：2012-05-03T10:42:23.630
> 
> 标签：prefuse

在我的预可视化中，我想为边缘添加标签。我遵循了一些关于 SO 的示例，但我无法将其用于工作：

我将此渲染器用于我的边缘：

```
private class CustomEdgeRenderer extends LabelRenderer {

    private EdgeRenderer edgeRenderer = new EdgeRenderer();

    @Override
    public String getText(VisualItem item) {
        System.out.println("edgerenderer");
        return "test";
    }

    @Override
    public void render(Graphics2D g, VisualItem item) {
        edgeRenderer.render(g, item);
        item.setTextColor(BLACK);
    }

} 
```

现在的问题是，文本没有显示，但边缘以奇怪的形式绘制。那就是它们没有正确绘制。如果我不覆盖渲染，则绘制文本，但没有边缘。我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:57:47.767

遵循*prefuse*的体系结构，您将为标签创建一组单独的视觉项目，即所谓的`DecoratorItem`.

在 TreeMap 演示中可以找到一个示例： [https ://github.com/prefuse/Prefuse/blob/master/demos/prefuse/demos/TreeMap.java](https://github.com/prefuse/Prefuse/blob/master/demos/prefuse/demos/TreeMap.java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T14:04:51.180

另一个更临时的解决方案：

*   扩展`EdgeRenderer`.
*   注意在`render`方法中绘制标签。
*   调用`super.render`让 prefuse 绘制边缘。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-09T04:50:08.410

你可以检查这个问题：

[在 prefuse (java) 图中显示边标签](https://stackoverflow.com/questions/5156641/displaying-edges-labels-in-prefuse-java-graphs)

谷歌把这里和之前的问题发给我，找了一些代码，最近找到了以下版本，运行正常。

[http://netgrok.googlecode.com/svn-history/r2/trunk/src/test/AggregateDecoratorDemo.java](http://netgrok.googlecode.com/svn-history/r2/trunk/src/test/AggregateDecoratorDemo.java)

问候。

# sql - 在sqlite SQL语句中结合order by子句使用limit

> ID：10429738
> 
> 赞同：7
> 
> 时间：2012-05-03T10:42:28.293
> 
> 标签：sql, sqlite

**以下两条 SQL 语句是否总是产生相同的结果集？**

```
 1\. SELECT * FROM MyTable where Status='0' order by StartTime asc limit 10

 2\. SELECT * FROM (SELECT * FROM MyTable where Status='0' order by StartTime asc) limit 10 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T10:53:02.420

是的，但是订购子查询可能是一个不好的习惯。在第二个示例中，您可以在子查询之外进一步添加一个可行的方法`ORDER BY`，例如

```
SELECT * 
FROM (SELECT * 
      FROM Test
      ORDER BY ID ASC
     ) AS A
ORDER BY ID DESC
LIMIT 10; 
```

SQLite 仍然`ORDER BY`在内部查询上执行，然后在外部查询中再次对它们进行排序。不必要的资源浪费。

我已经做了一个[SQL Fiddle](http://sqlfiddle.com/#!5/61e5b/4)来演示，这样您就可以查看每个的执行计划。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-03T10:53:26.320

**没有**。首先是因为该`StartTime`列可能没有`UNIQUE`约束。因此，即使是第一个查询也可能并不总是产生相同的结果——它本身！

其次，即使没有两行具有相同的 StartTime，答案仍然是**否定**的。

第一条语句将始终按顺序排列`StartTime`并生成前 10 行。第二个查询可能会产生相同的结果集，但仅使用不了解`ORDER BY`子查询中的 冗余的原始优化器。并且仅当执行计划包含此排序阶段时。

SQLite 查询优化器（目前）可能不是很聪明，只能做到这一点（真的不知道，我们必须检查 SQLite* 的源代码）。因此，这两个查询似乎一直在产生相同的结果。不过，指望它并不是一个好主意。你永远不知道 SQLite 的未来版本会发生什么变化。

我认为在任何 DBMS 中`LIMIT`不使用 , 都不是一个好习惯。`ORDER BY`它现在可能工作，但您永远不知道应用程序将使用这些查询多长时间。升级 SQLite 或更改 DBMS 时，您可能不在身边。

(*) @Gareth 的链接提供了执行计划，表明当前的 SQLite 代码足够愚蠢，可以执行冗余排序。

# objective-c - 保存 UIManagedDocument 时应用程序崩溃

> ID：10429739
> 
> 赞同：1
> 
> 时间：2012-05-03T10:42:29.850
> 
> 标签：objective-c, ios, core-data, save, uimanageddocument

我有一个应用程序，它首先将一些数据加载到 UIManagedDocument 中，然后执行`saveToURL:forSaveOperation:completionHandler:`. 在completionHandler 块中，它会更新这个数据库的各种元素，当它完成后，它会再次保存。

除此之外，该应用程序还有 3 个按钮，分别用于重新加载数据、重新更新数据和删除数据库的一个实体。在每个按钮方法中，最后一条指令也是保存。

当我在模拟器中运行所有这些时，一切都很顺利。但在设备中没有。它不断崩溃。我观察到，通常情况下，当按下“删除”按钮，或者重新加载或重新更新数据库时，它会崩溃。它始终在`saveToURL`运行中。
在我看来，当有**多个线程**保存数据库时，问题就出现了。由于设备执行代码的速度较慢，可能会同时节省多个成本，而应用程序无法正确处理它们。此外，有时删除按钮不会删除实体，并说不存在（当它存在时）。

我对此完全感到困惑，所有这些保存操作都必须完成......事实上，如果我删除它们，应用程序的行为会更加不连贯。

关于我可以做些什么来解决这个问题的任何建议？非常感谢！

[编辑] 在这里我发布有问题的代码。对于第一次加载数据，我使用了一个帮助类，特别是这两种方法：

```
+ (void)loadDataIntoDatabase:(UIManagedDocument *)database
{
    [database.managedObjectContext performBlock:^{
        // Read from de plist file and fill the database
        [database saveToURL:database.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:^(BOOL success) {
            [DataHelper completeDataOfDatabase:database];
        }];
}

+ (void)completeDataOfDatabase:(UIManagedDocument *)database
{
    [database.managedObjectContext performBlock:^{

        // Read from another plist file and update some parameters of the already existent data (uses NSFetchRequest and works well)

        // [database saveToURL:database.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:nil];
        [database updateChangeCount:UIDocumentChangeDone];

    }];
} 
```

在视图中，我有 3 种操作方法，如下所示：

```
- (IBAction)deleteButton {

    [self.database.managedObjectContext performBlock:^{
        NSManagedObject *results = ;// The item to delete
        [self.database.managedObjectContext deleteObject:results];

            //  [self.database saveToURL:self.database.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:NULL];
        [self.database updateChangeCount:UIDocumentChangeDone];
        }];
}

- (IBAction)reloadExtraDataButton {

    [DataHelper loadDataIntoDatabase:self.database];

    // [self.database saveToURL:self.database.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:NULL];
    [self.database updateChangeCount:UIDocumentChangeDone];

}

- (IBAction)refreshDataButton {

    [DataHelper completeDataOfDatabase:self.database];
    //[self.database saveToURL:self.database.fileURL forSaveOperation:UIDocumentSaveForOverwriting completionHandler:NULL];
    [self.database updateChangeCount:UIDocumentChangeDone];
} 
```

[编辑2]更多代码：首先，初始视图以这种方式执行viewDidLoad：

```
- (void)viewDidLoad{
    [super viewDidLoad];
    self.database = [DataHelper openDatabaseAndUseBlock:^{
        [self setupFetchedResultsController];
    }];
} 
```

这就是 setupFetchedResultsController 方法的样子：

```
- (void)setupFetchedResultsController
{
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Some entity name"];
    request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"name" ascending:YES selector:@selector(localizedCaseInsensitiveCompare:)]];

    self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                        managedObjectContext:self.database.managedObjectContext
                                                                          sectionNameKeyPath:nil
                                                                                   cacheName:nil];
} 
```

应用程序的每个视图（它有选项卡）都有一个不同的 setupFetchedResultsController 以显示数据库包含的不同实体。

现在，在辅助类中，这是第一个通过每个视图的 viewDidLoad 执行的类方法：

```
+ (UIManagedDocument *)openDatabaseAndUseBlock:(completion_block_t)completionBlock
{
    NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
    url = [url URLByAppendingPathComponent:@"Database"];
    UIManagedDocument *database = [[UIManagedDocument alloc] initWithFileURL:url];

    if (![[NSFileManager defaultManager] fileExistsAtPath:[database.fileURL path]]) {

        [database saveToURL:database.fileURL forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success) {
            [self loadDataIntoDatabase:database];
            completionBlock();
        }];

    } else if (database.documentState == UIDocumentStateClosed) {
        // Existe, pero cerrado -> Abrir
        [database openWithCompletionHandler:^(BOOL success) {
            [self loadDataIntoDatabase:database];
            completionBlock();
        }];

    } else if (database.documentState == UIDocumentStateNormal) {
        [self loadDataIntoDatabase:database];
        completionBlock();
    }

    return database;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T12:19:07.403

您并没有真正提供太多代码。您提供的唯一真正线索是您正在使用多个线程。

UIManagedDocument 有两个 ManagedObjectContexts（一个指定用于主队列，另一个用于私有队列），但它们仍然必须只能从它们自己的线程中访问。

因此，您只能在主线程中使用 managedDocument.managedObjectContext。如果要从另一个线程使用它，则必须使用 performBlock 或 performBlockAndWait。同样，您永远无法知道您在父上下文的私有线程上运行，因此如果您想专门针对父上下文执行某些操作，则必须使用 performBlock*。

最后，您真的不应该调用 saveToURL，除非您最初创建数据库。UIManagedDocument 将自动保存（在它自己的时间）。

如果你想鼓励它提前保存，你可以发送 updateChangeCount: UIDocumentChangeDone 告诉它有需要保存的更改。

**编辑**

您应该只在第一次创建文件时调用 saveToURL。使用 UIManagedDocument，无需再次调用它（它实际上会导致一些意想不到的问题）。

基本上，当您创建文档时，在完成处理程序执行之前不要设置您的 iVar。否则，您可能正在使用处于部分状态的文档。在这种情况下，请在完成处理程序中使用像这样的帮助程序。

```
- (void)_document:(UIManagedDocument*)doc canBeUsed:(BOOL)canBeUsed
{
    dispatch_async(dispatch_get_main_queue(), ^{
        if (canBeUsed) {
            _document = doc;
            // Now, the document is ready.
            // Fire off a notification, or notify a delegate, and do whatever you
            // want... you really should not use the document until it's ready, but
            // as long as you leave it nil until it is ready any access will
            // just correctly do nothing.
        } else {
            _document = nil;
            // Do whatever you want if the document can not be used.
            // Unfortunately, there is no way to get the actual error unless
            // you subclass UIManagedDocument and override handleError
        }
    }];
} 
```

并初始化您的文档，例如...

```
- (id)initializeDocumentWithFileURL:(NSURL *)url
{
    if (!url) {
        url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
        url = [url URLByAppendingPathComponent:@"Default_Project_Database"];
    }
    UIManagedDocument *doc = [[UIManagedDocument alloc] initWithFileURL:url];

    if (![[NSFileManager defaultManager] fileExistsAtPath:[doc.fileURL path]]) {
        // The file does not exist, so we need to create it at the proper URL
        [doc saveToURL:doc.fileURL forSaveOperation:UIDocumentSaveForCreating completionHandler:^(BOOL success) {
            [self _document:doc canBeUsed:success];
        }];
    } else if (doc.documentState == UIDocumentStateClosed) {
        [doc openWithCompletionHandler:^(BOOL success) {
            [self _document:doc canBeUsed:success];
        }];
    } else {
        // You only need this if you allow a UIManagedDocument to be passed
        // in to this object -- in which case the code above that initializes
        // the <doc> variable will be conditional on what was passed...
        BOOL success = doc.documentState == UIDocumentStateNormal;
        [self _document:doc canBeUsed:success];
    }
} 
```

上面的“模式”是必要的，以确保您在文档完全准备好之前不要使用它。现在，那段代码应该是您调用 saveToURL 的唯一时间。

请注意，根据定义，document.managedObjectContext 的类型为 NSMainQueueConcurrencyType。因此，如果您知道您的代码在主线程上运行（就像您的所有 UI 回调一样），您不必使用 performBlock。

但是，如果您实际上是在后台进行加载，请考虑..

```
- (void)backgroundLoadDataIntoDocument:(UIManagedDocument*)document
{
    NSManagedObjectContext *moc = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
    moc.parentContext = document.managedObjectContext;
    [moc performBlock:^{
        // Do your loading in here, and shove everything into the local MOC.
        // If you are loading a lot of stuff from the 'net (or elsewhere),
        // consider doing it in strides, so you deliver objects to the document
        // a little at a time instead of all at the end.

        // When ready to save, call save on this MOC.  It will shove the data up
        // into the MOC of the document.
        NSrror *error = nil;
        if ([moc save:&error]) {
            // Probably don't have to synchronize calling updateChangeCount, but I do it anyway...
            [document.managedObjectContext performBlockAndWait:^{
                [document updateChangeCount:UIDocumentChangeDone];
            }];
        } else {
            // Handle error
        }
    }];
} 
```

除了将背景 MOC 设置为 mainMOC 之外，您还可以将其设置为 parentContext。加载然后保存到其中会将更改放在主 MOC 的“上方”。主 MOC 将在下次执行 fetch 操作时看到这些更改（注意 NSFetchRequest 的属性）。

注意：有些人报告说（它也在 Erica Sadun 的书中作为注释出现），在第一次 saveToURL 之后，您需要关闭，然后打开以使一切正常。

**编辑**

这真的很长。如果你有更多的积分，我建议你聊天。实际上，我们不能通过 SO 来实现，但我们可以通过另一种媒介来实现。我会尽量简短，但请返回并重新阅读我发布的内容，并特别注意，因为您的代码仍然违反了几个租户。

首先，在 viewDidLoad() 中，您直接将文档分配给调用 openDatabaseAndUseBlock 的结果。该文档当时处于**不可用状态。**在完成处理程序触发之前，您不希望文档可访问，这在 openDatabaseAndUseBlock() 返回之前不会发生。

其次，仅在您第一次创建数据库时调用 saveToURL（在 openDatabaseAndUseBlock() 中）。不要在其他任何地方使用它。

第三。在通知中心注册以接收所有事件（只需记录它们）。这将极大地帮助您进行调试，因为您可以看到正在发生的事情。

第四，子类化 UIManagedDocument，并覆盖handleError，看看它是否被调用......这是你看到确切的NSError（如果/当它发生时）的唯一方法。

3/4 主要是帮助你调试，不是你的生产代码所必需的。

我有约会，所以现在必须停下来。但是，解决这些问题，接下来就是

# extjs - ExtJs 条形图导出为 png 或 jpeg 图像

> ID：10429740
> 
> 赞同：1
> 
> 时间：2012-05-03T10:42:33.830
> 
> 标签：extjs

我正在尝试找出条形图到 JPEG/PNG 的导出功能......我在 extJs 示例部分的任何地方都没有找到这个。请让我知道此功能是否在 Extjs 图表中可用。如果有的话，请分享这方面的示例或 URL。

这方面的任何事情都会非常明显！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T16:55:33.217

他们现在有一些 4.1 的东西，他们在 sencha 服务器上为您转换它。我没有尝试过，但这[就是我的做法](https://stackoverflow.com/a/8807537/1062992)。

# sql - 同一服务器但表名相同的不同数据库之间的数据映射

> ID：10429742
> 
> 赞同：1
> 
> 时间：2012-05-03T10:42:41.927
> 
> 标签：sql, sql-server-2008

嗨，我被困在这里需要你的建议。我有一个带有多个数据库的服务器。现在我想映射一个 1 db 表中的数据是否等于另一个具有相同表名的 db 中的数据

任何人都可以建议如何做到这一点？提前感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:48:06.757

```
select * from db1.table1 t1
full outer join db2.table2 t2 on t1.id = t2.id
where t1.id <> t2.id
or t1.col2 <> t2.col2 or ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:56:31.640

取决于你需要映射什么。如果您只想知道主键的差异，我会尝试在 PK 上进行完全连接，这样它会告诉您存在于 A 但不存在于 B 上的记录以及存在于 B 但不存在于 A 上的记录。像这样：

```
create table DB_A(id int)
create table DB_B(id int)

insert into DB_A values (1)
insert into DB_A values (2)

insert into DB_B values (2)
insert into DB_B values (3)

select DB_A.ID as 'Exists on A but not on B', DB_B.id as  'Exists on B but not on A'
from DB_A full join DB_B on DB_A.id=DB_B.id 
where DB_A.id is null or DB_B.id is null 
```

如果您需要的不仅仅是比较所有列的值，我建议您使用数据比较工具。只使用 SQL 就不会那么困难了

# database - 删除数据库用户 drop 是否会触发用户在其他模式的表上提出？

> ID：10429745
> 
> 赞同：2
> 
> 时间：2012-05-03T10:42:51.870
> 
> 标签：database, oracle

假设用户 USER1 在多个表上创建了触发器，所有这些表都不属于该用户，但这些触发器将数据记录到 USER1 表中。

现在，如果我使用以下命令在 Oracle 中删除用户，这是否也会删除所有其他触发器？

SQL>drop 用户 USER 级联；

如果没有，触发器将无法工作，因为它们找不到要写入的目标表。此外，有没有办法删除数据库用户引发的所有触发器，而不管它们属于哪个模式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:57:59.473

一个简单的测试表明触发器将被丢弃。我创建了一个新用户`TEST2`，授予它`CREATE ANY TRIGGER`，然后创建了一个触发器`PHIL.BIGTABLE`。

```
PHIL@PHILL11G2 > select count(*) from dba_triggers;

  COUNT(*)
----------
       617

PHIL@PHILL11G2 > drop user test2 cascade;

User dropped.

PHIL@PHILL11G2 > select count(*) from dba_triggers;

  COUNT(*)
----------
       616

PHIL@PHILL11G2 > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:03:35.170

触发器元数据位于 DBA_TRIGGERS 中，因此删除它们是一个问题：

```
begin
  for x in (
    select owner,
           trigger_name
    from   dba_triggers
    where  ... -- apply predicate to select triggers here)
  loop
    execute immediate 'drop trigger '||x.owner||'.'||x.trigger_name;
  end loop;
end;
/ 
```

# python - 在 Visual Basic 中动态导入类

> ID：10429746
> 
> 赞同：1
> 
> 时间：2012-05-03T10:42:57.713
> 
> 标签：python, vb.net, class, import

我正在做一个需要在 Visual Basic 中完成的学校项目。为此，我正在用这种编程语言移植我的一个 Python 项目，该项目（在 Python 中）正在扫描目录中的 .py 文件，然后`__import__`在运行时使用语句（动态）导入它们。可以在 Visual Basic 中使用 .DLL 类执行此操作吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T13:27:46.013

您可以使用动态加载程序集`Assembly.LoadFrom(fileName)`，然后获取程序集信息、枚举类型、创建这些类型的实例等。详细信息取决于您想要此 DLL 的确切用途。

当您拥有要创建的对象的类型时，您可以使用与使用方法类似[的](https://stackoverflow.com/questions/578495/dynamically-create-an-object-of-type)[`Activator.CreateInstance()`](http://msdn.microsoft.com/en-us/library/system.activator.createinstance(VS.71).aspx)代码。

您可以在我的一个项目中找到一些（C#）示例：http: [//code.earlsoft.co.uk/hg/builderpro/file/41046067e90e/Library/Extensions/Extension.cs](http://code.earlsoft.co.uk/hg/builderpro/file/41046067e90e/Library/Extensions/Extension.cs) [http://code.earlsoft.co .uk/hg/builderpro/file/41046067e90e/Library/ActionInfo/ActionInfo.cs](http://code.earlsoft.co.uk/hg/builderpro/file/41046067e90e/Library/ActionInfo/ActionInfo.cs)

# algorithm - 阿特金分段筛，可能吗？

> ID：10429747
> 
> 赞同：6
> 
> 时间：2012-05-03T10:43:00.493
> 
> 标签：algorithm, sieve-of-eratosthenes, sieve, sieve-of-atkin

我知道可以实施 Eratosthenes 筛，以便它在没有上限的情况下连续找到素数（分段筛）。

我的问题是，阿特金/伯恩斯坦的筛子能否以同样的方式实施？

相关问题：[C#：如何使阿特金筛子增量](https://stackoverflow.com/questions/1569393/c-how-to-make-sieve-of-atkin-incremental)

然而，相关问题只有 1 个答案，上面写着“所有筛子都不可能”，这显然是不正确的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T22:30:33.550

[Atkin/Bernstein 在其原始论文](http://cr.yp.to/papers/primesieves.pdf)的第 5 节中给出了分段版本。据推测，伯恩斯坦的[素数](http://cr.yp.to/primegen.html)程序使用了这种方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-02T15:43:31.000

事实上，可以像我[在 F#](https://stackoverflow.com/questions/4629734/the-sieve-of-eratosthenes-in-f/18000745#18000745)中所做的那样，完全不使用分段来实现无界的 Atkin 筛选 (SoA) 。请注意，这是一个纯函数版本，它甚至不使用数组来组合二次方程和无平方滤波器的解，因此比更命令式的方法要慢得多。

Berstein 使用查找表对最佳 32 位范围进行优化会使代码极其复杂，不适合在这里展示，但调整我的 F# 代码会很容易，以便序列从设定的下限开始并且仅使用在一个范围内以实现分段版本，和/或将相同的技术应用于使用数组的更重要的方法。

[请注意，即使按照Kim Walisch 的素](https://code.google.com/p/primesieve/)数筛，即使 Berstein 的 SoA 实现并不比 Eratosthenes 的筛子更快，但仅比根据他**的选定数字范围的等效优化的 Eratosthenes 筛子**快执行。

**EDIT_ADD：** 对于那些不想涉足 Berstein 的伪代码和 C 代码的人，我在这个答案中添加了一个伪代码方法，以在从 LOW 到 HIGH 的范围内使用 SoA，其中从 LOW 到 HIGH 的增量+ 1 可能会被限制为偶数模 60，以便使用模数（以及仅对 2、3、5 轮上的条目的潜在位打包）优化。

这是基于使用 (4*x^2 + y^)、(3*x^2 + y^2) 和 (3*x^2 -y^2) 的 SoA 二次方的可能实现作为数字序列，每个序列的 x 值固定为 1 和 SQRT((HIGH - 1) / 4)、SQRT((HIGH - 1) / 3) 之间的值，并求解 2*x^2 + 的二次方2*x - HIGH - 1 = 0 for x = (SQRT(1 + 2 * (HIGH + 1)) - 1) / 2，分别在我的 F# 代码中按照顶部链接表示的序列。对那里的序列进行优化时，仅在筛选奇数组合时，对于“4x”序列，y 值只需为奇数，“3x”序列仅在 x 为偶数时使用 y 的奇数值，反之亦然。

我也不包括众所周知的优化，这些优化可以应用于主要的“无正方形”剔除以使用轮分解和起始段地址的计算，就像我在[分段 SoE 的实现中](https://stackoverflow.com/questions/4629734/the-sieve-of-eratosthenes-in-f/17820204#17820204)使用的那样。

因此，为了计算“4x”、“3x+”和“3x-”（或像我在 F# 代码中那样将“3x+”和“3x-”组合在一起）的序列起始段地址，并计算了根据上述每个x的范围，伪代码如下：

1.  计算范围 LOW - FIRST_ELEMENT，其中 FIRST_ELEMENT 是每个给定 x 值的 y 的最低适用值，或者对于“3x-”序列的情况，y = x - 1。

2.  对于计算该范围内有多少元素的工作，这归结为以下问题： (y1)^2 + (y2)^2 + (y3)^2... 每个 y 数在哪里由两个分隔，根据需要产生偶数或奇数 'y'。与平方序列分析中的往常一样，我们观察到平方之间的差异具有恒定增加的增量，因为增量（9 - 1）为 8，增量（25 - 9）为 16，增量为 8，增量（49 - 25）为24 进一步增加 8 等等。因此对于本例，对于 n 个元素，最后一个增量是 8 * n。用这个来表达元素的序列，我们得到它是一个（或任何一个选择作为第一个元素）加上八倍的序列（1 + 2 + 3 + ...+ n）。现在，线性序列的标准缩减适用于该总和为 (n + 1) * n / 2 或 n^2/2 + n/2 的情况。

3.  现在，如果 FIRST_ELEMENT + 4 * (n + 1) * n 不等于 LOW 作为起始地址，则将 n 加 1 并使用 FIRST_ELEMENT + 4 * (n + 2) * (n + 1) 作为起始地址。如果使用进一步的优化来将轮因式分解剔除应用于序列模式，则可以使用查找表数组来查找满足条件的已使用 n 的最接近值。

4.  起始元素的模数 12 或 60 可以直接计算，或者可以通过使用基于模数序列的重复性质的查找表来产生。

5.  然后使用每个序列将复合状态切换到上限。如果将附加逻辑添加到序列以仅在每个序列的适用元素之间跳转值，则无需进一步使用模条件。

6.  以上是针对每个“4x”序列后跟“3x+”和“3x-”序列（或将“3x+”和“3x-”组合成一组“3x”序列）直到计算得到的x限制更早或按循环测试。

你有它：给定一种将筛子范围划分为段的适当方法，最好将其用作与 CPU 缓存大小相关的固定大小，以获得最佳内存访问效率，一种分割 SoA 的方法，就像 Bernstein 使用的那样但正如它所提到的，表达方式有点简单，但没有结合模运算和位打包。

# spring - 如何在 Spring MVC 和 Apache Tiles 中更新 JSP

> ID：10429756
> 
> 赞同：0
> 
> 时间：2012-05-03T10:43:32.307
> 
> 标签：spring, spring-mvc, tiles2

我在我的 Spring 3 MVC 应用程序中使用 Apache Tiles 2，布局是：左侧的菜单和右侧的正文。

布局.jsp

```
<table>
  <tr>
    <td height="250"><tiles:insertAttribute name="menu" /></td>
    <td width="350"><tiles:insertAttribute name="body" /></td>
  </tr>
</table> 
```

菜单.jsp

```
<div><ul>
<li><a href="account.html">account</a></li>
<li><a href="history.html">history</a></li></ul></div> 
```

history.jsp 的主体

```
<c:forEach var="history" items="${histories}"><p><c:out value="${history}"></c:out></p></c:forEach> 
```

我也有一个历史控制器

```
@Controller 
public class HistoryController {

@RequestMapping("/history")
public ModelAndView showHistory() {

    ArrayList <String> histories = read from DB.
    return new ModelAndView("history","histories",histories);

   }
} 
```

因此，每次我单击菜单上的历史链接时，都会调用 showHistory()。

但还有一个更复杂的情况。历史数据库有数百个条目，因此我们决定仅在 history.jsp 第一次显示时显示前 10 个，然后通过添加另一个控制器向 history.jsp 添加一个“显示更多历史”按钮以显示下一个 10。

问题是，当用户执行以下操作时：

1.  点击历史链接，显示0-9条历史，
2.  点击“显示更多历史”显示10到19，
3.  点击账户链接返回账户页面，
4.  再次单击历史链接，history.jsp 显示的不是 10 到 19，而是显示 0-9。

如何使 history.jsp 显示上次访问的历史记录，而不是从头开始显示。

我对Spring很陌生，欢迎所有建议。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:33:12.510

您要做的是将最后请求的范围存储在会话中。如果用户没有指定范围（在请求中），则使用存储的会话。

像这样的东西

```
@RequestMapping("/history")
public ModelAndView showHistory(@RequestParam(value="startIndex", defaultValue="-1") Integer startIndex, HttpSession session) {
    Integer start = Integer.valueOf(0);
    if (startIndex == null || startIndex.intValue() < 0) {
        // get from session
        Integer sessionStartIndex = (Integer) session.getAttribute("startIndex");
        if (sessionStartIndex != null) {
            start = sessionStartIndex;
        }
    } else {
        start = startIndex;
    }
    session.setAttribute("startIndex", start);
    ArrayList <String> histories = read from DB, starting with start.
    return new ModelAndView("history","histories",histories);

   } 
```

# javascript - 如何按元素获取左侧位置

> ID：10429757
> 
> 赞同：1
> 
> 时间：2012-05-03T10:43:39.000
> 
> 标签：javascript, jquery

我需要在表格中获取位置元素。但是函数 position() 将我返回到其他数据。

img - 名称元素。我 = 0;

```
alert('0 ' + $(img + i).attr('style'));

var position = $(img + i).position();
var left = Math.round(position.left);

alert('1 left= ' + left);
alert('1 ' + $(img + i).attr('style'));
$(img + i).attr('style', 'position:absolute;display:block;left:' + left + 'px;top:' + position.top + 'px;');
alert('2 ' + $(img + i).attr('style')); 
```

痕迹：

> 0 位置：绝对；显示：块；左：289px；顶部：0px；
> 
> 剩下 1 个 = 582
> 
> 1个位置：绝对；显示：块；左：289px；顶部：0px；
> 
> 2 位置：绝对；显示：块；左：582px；顶部：159.0833282470703px；

**更新：** html：

```
 <table cellpadding="0" id="target" cellspacing="0" width="602" height="500" style="float: left;
        margin: 0px; padding: 0px; position: relative; background: url(/content/games/kamikaze2/back.jpg) no-repeat 0 0;">
        <tbody>
            <tr>
                <td valign="top">
                    <img id="stone_0" src="/content/games/kamikaze2/stone0.gif" width="31" height="28"
                        class="c" onclick="go()" >
</td>
</tr>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:48:25.930

```
var position = $(img + i).position();
var left = Math.round($(img + i).css("left")); 
```

# css - 文字阴影插入效果css3

> ID：10429760
> 
> 赞同：5
> 
> 时间：2012-05-03T10:44:00.647
> 
> 标签：css, insets

![在此处输入图像描述](../Images/2f26c6b822825fd4367d140fcdc3e7ed.png)

我想要上面按钮的插入效果。“文本”取消似乎是按类型。我已经尝试了很多在线可用的示例，但它们没有白色背景示例。

帮助我获得这种效果。

提前致谢！！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-05-03T11:55:09.133

使用该`text-shadow`属性，您应该能够获得您所追求的微妙效果：

```
text-shadow: 0 -1px 0 #888; 
```

[请参阅jsfiddle](http://jsfiddle.net/5KWAw/)上的一个非常基本的示例。

# html - 从上到下浮动div

> ID：10429770
> 
> 赞同：4
> 
> 时间：2012-05-03T10:44:28.200
> 
> 标签：html, css

我正在制作一个产品屏幕，我已经制作了一个我想到的 Paint 示例。![示例产品屏幕](../Images/961def408f17c0485d7962dec7864686.png)

大黑块是productView，后面有一个滑动容器。我想按字母顺序排列这些产品（所有这些小圆端块都是 div 中的产品）。但是这个顺序是“A”从开始和“Z”到 slindingcontainer 结束。

我想订购像红线这样的产品。我现在有第二个带有模块的容器，只是这会破坏我的代码。

有没有其他方法可以订购像我的示例图这样的产品？

**更新**- 我现在的代码：

```
 <?php
            if(!empty($productByType)){
                for($i=0;$i < count($productByType); $i++){

                    $id = $productByType[$i]['id'];
                    $title = $productByType[$i]['title'];
                    $img = base_url('/img/producten/'.$productByType[$i]["img"]);

                    if($i % 2 == 0){
                        echo '<div class="seperatorforproduct">';
                        //0,2,4,6,8
                    }

                    ============
                    Content divs

                    **Example of one product:** (Using modal from bootstrap)

                    echo '<div class="button btnstyle">';
                    echo '<div class="imgbtn">';    
                    //  <!-- Picture-->
                    echo '<img src="'.$img.'" title="'.$title.'" alt="'.$title.'" data-toggle="modal" href="#modal'.$id.'" />';
                    echo '</div>';  
                    echo '<div class="txtbtn txtstyle">';   
                    echo '<a class="btn" data-toggle="modal" href="#modal'.$id.'" >'.$title.'</a>';
                    echo '</div>';
                    echo '</div>';
                    ?>
                    <div class="modal" style="display:none;" id="modal<?=$id?>">
                        <div class="modal-header">
                            <a class="close" data-dismiss="modal">&times;</a>
                            <h2><?=$title?></h2>
                        </div>
                        <div class="modal-body">
                            <div class="modal-left">
                            <img src="<?=$img?>" title="<?=$title?>" alt="<?=$title?>" />
                            </div>
                            <div class="modal-right">
                            <p><?=$productByType[$i]['info']?></p>
                            </div>
                        </div>
                        <div class="modal-footer">
                            Telephone number etc.
                        </div>
                    </div>
                    ============

                    <?php
                    if($i % 2 == 1 || $i == count($productByType)){
                        // 0,3,6,9,12
                        echo '</div>';
                    }
                }      
            }?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:10:28.047

检查这个[http://jsfiddle.net/Mzmay/18/](http://jsfiddle.net/Mzmay/18/)

使用 PHP，您可以像在 fiddle 中那样生成标记，稍后您可以使用 jQuery 来做到这一点。我不确定如何仅使用 Php 来做同样的事情。

# cakephp-2.0 - cakephp211 条件问题

> ID：10429775
> 
> 赞同：1
> 
> 时间：2012-05-03T10:44:34.990
> 
> 标签：cakephp-2.0

赞！我的模型没有被配置为可包含的。以下查询不显示正确的结果（我想检索所有类别中两个日期之间的所有可用汽车）

```
$car=$this->Genre->find('all', array(
                            'contain' => array(
                                'cars'=>array(
                                    'conditions'=>array(
                                        'cars.startdate <=' => $qdu ,
                                        'cars.enddate >=' => $qau
                                    )
                                )
                            )
                        )
                    ); 
```

这是我的流派模型：

```
class Genre extends AppModel {
       public $actsAs = array('Containable');

    public $belongsTo = array(
    'houses' => array(
        'className' => 'houses',
        'foreignKey' => 'houses_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    )
);

public $hasMany = array(
    'cars' => array(
        'className' => 'cars',
        'foreignKey' => 'genres_id',
        'dependent' => false,
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'exclusive' => '',
        'finderQuery' => '',
        'counterQuery' => ''
    )
); 
```

}

这是汽车模型：

```
class Car extends AppModel {

    public $belongsTo = array(
    'Genres' => array(
        'className' => 'Genres',
        'foreignKey' => 'genres_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    )
);

public $hasMany = array(
    'ways' => array(
        'className' => 'ways',
        'foreignKey' => 'cars_id',
        'dependent' => false,
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'exclusive' => '',
        'finderQuery' => '',
        'counterQuery' => ''
    )
); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T13:58:59.087

型号名称通常应该是单数，所以用“Car”而不是“cars”。

```
$car=$this->Genre->find('all', array(
                            'contain' => array(
                                'Car'=>array(
                                    'conditions'=>array(
                                        'Car.startdate <=' => $qdu ,
                                        'Car.enddate >=' => $qau
                                    )
                                )
                            )
                        )
                    ); 
```

此外，请确保 Genre 模型加载 Containable 行为。

```
class Genre extends AppModel {
   $actsAs = array('Containable');
} 
```

关联也应该使用单数大写的模型名称：

```
class Genre extends AppModel {
  public $actsAs = array('Containable');

  public $belongsTo = array(
    'House' => array(
        'className' => 'House',
        'foreignKey' => 'houses_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    )
  );

  public $hasMany = array(
    'Car' => array(
        'className' => 'Car',
        'foreignKey' => 'genres_id',
        'dependent' => false,
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'exclusive' => '',
        'finderQuery' => '',
        'counterQuery' => ''
    )
  );
} 
```

拥有复数控制器（CarsController、GenresController）和单数模型（Car、Genre）是一个蛋糕惯例。在定义关联时，您实质上是将模型链接在一起而不是控制器，因此需要单数大写的类名。

# php - 未定义的行为：我在这里遇到后缀和前缀运算符的情况

> ID：10429783
> 
> 赞同：0
> 
> 时间：2012-05-03T10:45:08.987
> 
> 标签：php

我在这里遇到了 post fix 和 prefix 运算符的情况。看看下面的代码片段。我知道存在一些运算符优先级。但我需要对此作出明确解释。

```
<?php
    $a=0;
    echo $a++ + ++$a; //this will result 2 that is ok

    $b=0;
    echo $b++ - ++$b; //this should result 0 isn't it? but am getting -2!
 ?> 
```

**更新**：接受的答案描述了**未定义的行为**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T10:51:25.543

如果您使用*未定义的行为*，这种情况总是会发生。而你所做的是未定义的行为。所以不要试图得到一个遵循确定性逻辑的解释，因为 undefined 与此相反。

PHP手册[指出](http://www.php.net/manual/en/language.operators.precedence.php)：

> ```
> // mixing ++ and + produces undefined behavior
> $a = 1;
> echo ++$a + $a++; // may print 4 or 5 
> ```

您在评论中扩展了您的问题：

> `echo $c=($b++) - (++$b);`该语句的结果也得到-2。您所说的未定义行为是什么意思？

```
$b = 0 and it shall:

$c=($b++) - (++$b);   | $b is 0  - process first brackets
$c= 0 - (++$b);       | $b is 1  - process second bracktes inner operator
$c= 0 - ($b);         | $b is 2  - process second brackets 
$c= 0 - 2;            | calculate
$c= -2; 
```

这显然是*您执行代码时的*结果。没有定义这将始终以这种方式计算，因此未定义。例如，如果首先处理第二个括号，您将得到不同的结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T10:54:04.837

由于[递增/递减运算符（PHP doc）](http://docs.php.net/manual/en/language.operators.increment.php)

```
<?php
    $a=0;
    echo $a++ + ++$a; // 0 + 2 = 2

    $b=0;
    echo $b++ - ++$b; // 0 - 2 = -2
 ?> 
```

`$a++`返回`0`并递增`$a`1 ( `$a == 1`)； `++$a`递增`$a`1 ( `$a == 2`) 并返回`2`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T10:57:02.653

结果非常好：

$a++ 打印值并立即递增 ++$a 在输出前递增

所以在第一种情况下，这将是这样的：

1.  $a=0
2.  输出 0
3.  将 $a 加 1：$a=1
4.  再次增加（输出前）：$a=2
5.  输出 2

0+2 = 2

在第二种情况下：

1.  $b=0
2.  输出 0
3.  将 $b 加 1：$b=1
4.  再次增加（输出前）：$b=2
5.  输出 2

0 - 2 = -2

它只是按照它所说的去做。

问候，

斯蒂芬

# linq - Linq 使用 Where 条件查询员工详细信息？

> ID：10429784
> 
> 赞同：-3
> 
> 时间：2012-05-03T10:45:10.420
> 
> 标签：linq, linq-to-sql

我有一张如下表。

```
Eno Ename 工资

1 拉文德拉泰戈尔 60000

2 马赫什巴布 80000

3 拉玛 20000

4 克里希纳普拉萨德 25000

5 西塔 40000

6 Subhash Varma 20000

```

我需要一个 LINQ 查询谁拥有超过 20k 以及姓氏不为空的详细信息。

例子

```
1 拉文德拉泰戈尔 60000

2 马赫什巴布 80000

4 克里希纳·普拉萨德 25000。

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T13:36:57.817

假设您的实体集合称为“员工”，则以下查询应该有效：

```
var results = 
from employee in dc.Employees
where employee.Ename.Trim().Contains(" ")
select employee; 
```

查询将修剪`Ename`列的空格，如果在名称中未找到空格，则表示名称的一部分丢失。

# performance - Perl 中 unpack 结合 join 的性能

> ID：10429785
> 
> 赞同：4
> 
> 时间：2012-05-03T10:45:10.337
> 
> 标签：performance, perl, join, unpack

我有一个用 Perl 编写的解析器，它解析固定长度记录的文件。部分记录由几个字符串（也是固定长度）组成，仅由数字组成。字符串中的每个字符都被编码为数字，而不是 ASCII 字符。即，如果我有字符串 12345，它被编码为 01 02 03 04 05（而不是 31 32 33 34 35）。

我用 unpack 解析记录，这个特定部分被解包为`@array = unpack "C44", $s`. 然后我用简单的连接恢复所需的字符串，比如`$m = join("", @array)`.

我想知道这是否是解码的最佳方式。文件很大，有数百万条记录，显然我试图看看是否可以优化。Profiler 显示大部分时间都花在了解析记录上（即，读、写和其他东西都不是问题），而解析大部分时间都花在了这些连接上。我记得从其他来源那里加入是非常有效的操作。有什么想法可以加快代码速度还是已经达到最佳状态？也许有可能以某种巧妙的方式避免这个中间数组，例如，改用打包/解包组合？

**编辑：代码示例**

我尝试优化的代码如下所示：

```
 while (read(READ, $buf, $rec_l) == $rec_l) {
        my @s = unpack "A24 C44 H8", $buf;
        my $msisdn = substr $s[0], 0, 11;
        my $address = join("", @s[4..14]);
        my $imsi = join("", @s[25..39]);
        my $ts = localtime(hex($s[45]));
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T14:16:59.390

未经测试（当我不那么忙时我会回来编辑）但是如果我正确地完成了所有的数学运算，这应该可以工作，并且更快：

```
my ($msisdn, $address, $imsi, $ts) = 
    unpack "A11 x13 x3 a10 x10 a15 x5 N", $buf;
$address |= "0" x 10;
$imsi |= "0" x 15
$ts = localtime($ts); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:36:46.943

与 Perl 一样，速度越快可读性越差 :-)

```
join("", unpack("C44", $s)) 
```

我不相信这种改变会加速你的代码。一切都取决于您调用 join 函数读取整个文件的频率。如果您正在分块工作，请尝试增加它们的大小。如果您在解包和加入此数组之间进行一些操作，请尝试将它们与 map 操作对齐。如果您发布源代码，则更容易识别瓶颈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T11:48:17.037

我是一个打包/解包新手，但是如何通过更改示例代码来跳过连接，如下所示：

```
my $m = unpack "H*", $s ; 
```

快速测试：

```
#!/usr/bin/perl

use strict ;
use Test::More tests => 1 ;

is( unpack("H*", "\x12\x34\x56"),"123456"); 
```

# jquery - ASP.NET MVC Web 应用程序的数据缓存策略

> ID：10429787
> 
> 赞同：1
> 
> 时间：2012-05-03T10:45:13.140
> 
> 标签：jquery, asp.net-mvc, caching

我正在构建一个 MVC 应用程序，它使用 Knockout、JQuery 和 JSON 等进行繁重的客户端脚本。

这个网络应用程序有很多图表用于业务数据洞察和分析目的。JQuery Ajax 调用返回 JSON 的 MVC WebAPI 并使用 Jquery 和 Knockout 重新呈现图表。

有人可以建议在 MVC Web 应用程序上缓存大量数据的良好做法吗？

任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T05:39:49.443

我理解你的问题的方式是双重的：

1.  我应该缓存哪些数据？
2.  我应该如何缓存它？

# 我应该缓存哪些数据？

当然，这取决于。大多数时候，您希望缓存经常使用但很少更改或计算成本高昂的数据。有时您需要缓存一个或多个对象，而在其他时候您需要缓存整个页面。同样，此决定取决于您的特定业务需求。

# 我应该如何缓存它？

有几种方法可以做到这一点，它们将取决于您要缓存的内容。

## 缓存对象

如果多台服务器上的数据可用性不是问题，您可以使用内置缓存对象将数据存储一段时间。有关如何在 ASP.NET 中缓存项目的讨论，请参阅[此线程。](https://stackoverflow.com/questions/343899/how-to-cache-data-in-a-mvc-application)但是，如果您有一个具有非粘性请求的网络场，那么您可能会考虑设置一个[memcached 服务器](http://memcached.org/)来实现非常高性能、可扩展的缓存。

## 缓存输出/页面

缓存这些的最简单方法是将[OutputCache](http://www.asp.net/mvc/tutorials/older-versions/controllers-and-routing/improving-performance-with-output-caching-cs)属性添加到需要它的控制器操作中。查看链接以了解一些不错的用途（例如根据参数缓存页面的不同版本）。

# jquery - 如何在 jquery 中从下到上显示标题？

> ID：10429788
> 
> 赞同：0
> 
> 时间：2012-05-03T10:45:14.803
> 
> 标签：jquery, jquery-animate

[![](../Images/e2f39f2e98253e347105f0d6d7db3356.png)](/a1) 图片标题

```
<div class="btheme">    
   <a href="/a3"><img src="/a3.jpg" /></a>
   <div class="caption">
       <div>image caption3</div>
   </div>   
</div>

<div class="btheme">    
   <a href="/a2"><img src="/a2.jpg" /></a>
   <div class="caption">
      <div>image caption2</div>
   </div>   
</div> 
```

当鼠标悬停在jquery中时，我使用下面的代码显示/隐藏标题，

```
<script type="text/javascript">

    jQuery(document).ready(function(){

         jQuery("div.btheme img").mouseover(function(){
              jQuery(this).parent().find("div.caption").slideDown("slow");             
         });

         jQuery("div.btheme img").mouseout(function(){
             jQuery(this).parent().find("div.caption").slideUp("fast");              
         });                
   });

  </script> 
```

它工作正常。标题从上到下显示（因为 slideDown）。

但是当我鼠标悬停时，我需要从下到上显示该标题。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:50:50.283

你可以使用 jquery animate 来做到这一点。您可以尝试将边缘顶部设置为所需位置的动画。

```
$('div.caption').animate(); 
```

链接在这里。 [http://api.jquery.com/animate/](http://api.jquery.com/animate/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T12:29:17.923

我得到了答案，

```
<script type="text/javascript">
jQuery(document).ready(function(){
jQuery("div.btheme img").mouseenter(function(){
jQuery(this).find("div.caption").animate({
    width: "180px", 
    top: "-84px",   
    display: "block",
    opacity: "1"
  }, 1000 );
});
jQuery("div.btheme img").mouseleave(function(){
jQuery(this).find("div.caption").stop().animate({
    width: "180px", 
    display: "none",
    top: "-60px",
    opacity: "0"
  }, 500 );
  });

});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-04T05:01:49.977

否则我们也可以使用下面的一个，

```
<script type="text/javascript">

jQuery(document).ready(function(){
jQuery("div.btheme img").mouseenter(function(){
jQuery(this).find("div.caption").show('slide', {direction:'down'}, 500);
});
jQuery("div.btheme img").mouseleave(function(){
jQuery(this).find("div.caption").hide('slide', {direction:'down'}, 100);
});

});
</script> 
```

# bash - Shell 脚本解析器或编辑器

> ID：10429790
> 
> 赞同：0
> 
> 时间：2012-05-03T10:45:22.213
> 
> 标签：bash, shell, editor

是否有用于 shell 脚本的编辑器？还是有在线解析器或类似的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T11:27:45.957

编辑器：VI ;-) 说真的，任何简单的文本编辑器都可以。不过，您可能希望选择一种具有某种体面的语法突出显示（再次，VI，emacs 等）

解析器：如果您正在寻找一种方法来验证您的脚本而不实际执行它们，请查看该[`-n / noexec`](http://tldp.org/LDP/abs/html/options.html)选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T03:30:01.580

任何文本编辑器都可以帮助编辑 shell 脚本，U 通常使用 VIM 或 GEDIT 来编辑 shell 脚本。从可用性的角度来看，我觉得 gedit 更友好。

-n / noexec 选项。可用于验证 shell 脚本。

还将 -v 选项添加到 shebang 即：#!/bin/sh -v 将帮助您轻松调试脚本。

# android - 为什么我的布局不使用图形布局调整大小？

> ID：10429791
> 
> 赞同：0
> 
> 时间：2012-05-03T10:45:25.657
> 
> 标签：android, android-layout, android-ui

我在清单中添加了支持屏幕，所有 UI 元素值都在下降。

为什么我在图形布局中更改屏幕类型我的布局不会重新调整大小？

我正在使用LinearLayout，也许更好的方法是RelativeLayout？

请帮忙;

我的布局代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

        <RelativeLayout
        android:layout_width="match_parent"
        android:layout_height="55dp"
        android:background="#000000">
        <TextView
            android:id="@+id/a"
              android:layout_width="wrap_content"
              android:layout_height="wrap_content"
              android:textColor="#FFFFFF"
              android:textSize="20dip"
              android:textStyle="bold"
            android:layout_centerInParent="true"
            android:text="Login" />        
    </RelativeLayout>   

   <LinearLayout 
       android:layout_width="fill_parent"
       android:orientation="vertical"
       android:background="@drawable/background"
       android:layout_height="fill_parent">        

        <ImageView          
        android:id="@+id/Image"
            android:layout_width="280dip"
                  android:layout_marginLeft="20dip"
      android:layout_marginRight="20dip"  
            android:layout_marginTop="20dip"
    android:layout_height="35dip"   
            android:src="@+drawable/logo_big"/>
    <EditText       
      android:id="@+id/LoginName"
      android:hint="Email"
      android:layout_marginTop="20dip"
      android:layout_width="fill_parent"
      android:layout_height="50dip"   
      android:layout_marginLeft="20dip"
      android:layout_marginRight="20dip"        
      android:paddingLeft="20dip"
      android:paddingRight="20dip"     
      android:inputType="textEmailAddress"/>
    <EditText   
      android:hint="Password"
      android:layout_marginTop="0dip"
      android:layout_width="fill_parent"
      android:layout_height="50dip"   
      android:inputType="textPassword"
      android:layout_marginLeft="20dip"
      android:layout_marginRight="20dip"        
      android:paddingLeft="20dip"
      android:paddingRight="20dip"       
      android:password="true"
      android:id="@+id/Password"/>          
    <Button
      android:id="@+id/LogIn"
      android:layout_marginTop="20dip"
      android:layout_width="fill_parent"
      android:layout_height="45dip"  
      android:layout_marginLeft="20dip"
      android:layout_marginRight="20dip" 
      android:text="@+string/LogIn"/>
    <TextView       
      android:id="@+id/TextView"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"   
      android:textColor="#000000"
      android:gravity="center"
      android:layout_marginTop="10dip"
      android:textStyle="bold"
      android:textSize="18dp"
      android:text="@+string/DontHaveAnAccount"/>           
    <Button     
      android:id="@+id/SingUpNow"
      android:layout_width="fill_parent"
      android:layout_marginTop="10dip"
      android:layout_height="45dip"   
      android:src="@+drawable/gray_button"
      android:layout_marginLeft="20dip"
      android:layout_marginRight="20dip"       
      android:background="@+drawable/primary_button"
      android:clickable="true"
      android:text="@+string/SingUpNow"/>           
    <Button 
      android:textColor="#FFFFFF"   
      android:layout_width="fill_parent"
      android:layout_height="45dip"   
      android:layout_marginTop="10dip"
      android:layout_marginLeft="20dip"
      android:layout_marginRight="20dip"       
      android:id="@+id/ForgotYourPassword"
      android:background="@+drawable/secondary_button"
      android:text="@+string/ForgotYourPassword"/>  
      </LinearLayout>       
</LinearLayout> 
```

帮助;

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:55:02.980

这些提示可能对您有所帮助...

> 避免使用图形布局，只检查你的代码会有一些硬代码值或者可能有绝对布局..
> 
> 要重新调整屏幕布局的大小，请使用适合所有屏幕的相对布局...

# hibernate - 尝试使用休眠保存数据时出现 NullPointerException

> ID：10429793
> 
> 赞同：0
> 
> 时间：2012-05-03T10:45:31.857
> 
> 标签：hibernate

我是 hibernate 的新手。现在尝试使用 hibernate 将用户详细信息保存到我的数据库中。为此，我创建了 3 个 .java 文件。

1.首先是HiberUtil.java。代码如下包hiberpack；

```
import org.hibernate.SessionFactory;
import org.hibernate.cfg.AnnotationConfiguration;

public class HiberUtil {
    private static final SessionFactory sessionFactory;

    static {
        try {
            sessionFactory = new AnnotationConfiguration().configure()
                    .buildSessionFactory();
        } catch (Throwable ex) {
            System.err.println("Initial SessionFactory creation failed." + ex);
            throw new ExceptionInInitializerError(ex);
        }
    }

    public static SessionFactory getSessionFactory() {
        return sessionFactory;
    }
} 
```

2.next是DbMap.java

```
package hiberpack;

    import javax.persistence.Column;
    import javax.persistence.Entity;
    //import javax.persistence.GeneratedValue;
    import javax.persistence.Id;
    import javax.persistence.Table;

    @Entity
    @Table(name = "user_details")
    public class DbMap {

        @Id
        //@GeneratedValue
        @Column(name = "id")
        private long id_auto;

        @Column(name = "name", nullable = false)
        private String username;

        @Column(name = "Smobile", nullable=false)
        private String mobnum;

        public long getId_auto() {
            return id_auto;
        }

        public void setId_auto(long id_auto) {
            this.id_auto = id_auto;
        }

        public String getUsername() {
            return username;
        }

        public void setUsername(String username) {
            this.username = username;
        }

        public String getMobnum() {
            return mobnum;
        }

        public void setMobnum(String mobnum) {
            this.mobnum = mobnum;
        }

    } 
```

3.下面是UserSave servlet

```
package servlets;
    import hiberpack.DbMap;
    import hiberrepo.Repository;

    import java.io.IOException;
    import javax.servlet.ServletException;
    import javax.servlet.http.HttpServlet;
    import javax.servlet.http.HttpServletRequest;
    import javax.servlet.http.HttpServletResponse;

    public class UserSave extends HttpServlet {

        private static final long serialVersionUID = 1L;

        protected void doPost(HttpServletRequest request,
                HttpServletResponse response) throws ServletException, IOException {

            Repository rep = new Repository();
            String name = request.getParameter("uname");
            String mp = request.getParameter("mob");
            DbMap st = new hiberpack.DbMap();
            st.setUsername(name);
            st.setMobnum(mp);
            rep.insertStock(st); 

        }

        @Override
        protected void doGet(HttpServletRequest req, HttpServletResponse resp)
                throws ServletException, IOException {
            doPost(req, resp);
        }
    } 
```

4.下面是Repository.java

```
package hiberrepo;

import hiberpack.HiberUtil;
import hiberpack.DbMap;

import org.hibernate.Session;
import org.hibernate.SessionFactory;

public class Repository {
        SessionFactory sf = HiberUtil.getSessionFactory();
        Session sfSession = null;

        public void insertStock(DbMap storeObj)
        {
            sfSession.save(storeObj);
        }
} 
```

它显示空指针异常，当我尝试使用休眠将数据输入数据库时​​。错误消息如下

```
java.lang.NullPointerException
        hiberrepo.Repository.insertStock(Repository.java:15)
        servlets.UserSave.doPost(UserSave.java:25)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
        javax.servlet.http.HttpServlet.service(HttpServlet.java:722) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:14:16.033

`sfSession`调用时为空`Repository.insertStock()`。你肯定忘了设置会话。（空指针异常与 没有任何关系`DbMap storeObj`。在进入save方法之前抛出异常。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:11:28.790

这是你的代码：

```
Session sfSession = null;
...
sfSession.save(...) 
```

您不能在空引用上调用方法。初始化您的 sfSession 变量。

PS：Hibernate 是一个非常难以理解和使用的野兽。如果您不知道不能在空引用上调用方法，并且无法诊断出这样的基本错误，我建议您学习 Java 编程，但问题比使用 Hibernate 的 Web 应用程序更简单。

# .net - 正则表达式替换为捕获组

> ID：10429798
> 
> 赞同：0
> 
> 时间：2012-05-03T10:45:51.103
> 
> 标签：.net, regex, replace

我希望使用 .NET 正则表达式重构代码。目的是拆分声明和赋值（为了向后兼容 SQL 2005）。

样本输入：

```
DECLARE @clientCode char(10), @city nvarchar(100) = '', @country char(2) = 'US',
   @clientId int 
```

期望的输出：

```
DECLARE @clientCode char(10), @city nvarchar(100), @country char(2),
   @clientId int
SELECT @city = '', @country = 'us' 
```

这是我到目前为止匹配输入的内容：

```
DECLARE\s+
(
    ,?
    (@\w+\s+)
    (\(.+\))?
    (\=\s+\w+)?
)+ 
```

我可以使用什么替换正则表达式来获得预期的输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:36:13.243

即使您使用`RegEx`.

我建议你在代码中写出一些注释良好的字符串操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T14:52:42.087

好吧，只是为了好玩，如果您手头碰巧有[SQL Server 2012 功能包](http://www.microsoft.com/en-us/download/details.aspx?id=29065)，您可能会使用[Microsoft.SqlServer.Management.SqlParser.Parser](http://msdn.microsoft.com/en-us/library/ee213392.aspx)来解析您现有的 SQL 20xx 代码并生成等效的 2005 代码。[您甚至可以使用 PowerShell 这样做](http://sqlblogcasts.com/blogs/sqlandthelike/archive/2012/03/13/parsing-t-sql-the-easy-way.aspx)。不错的周末项目，嗯？:-)

# javascript - 任何压缩JS文件的高级工具？

> ID：10429799
> 
> 赞同：1
> 
> 时间：2012-05-03T10:45:53.063
> 
> 标签：javascript, refactoring, web, minify

我正在寻找一种工具来压缩我的 JS 文件。

我想要的不仅仅是简单地删除不必要的字符；我更喜欢工具能够减少函数中局部变量的长度。

更好的是，该工具可以减少所有其他内容的长度，如全局变量、函数名等。这是为了保护代码不被 Web 查看者在未经我们同意的情况下使用。

例如，该工具应将变量或函数名称从“some_variable”、“some_function”重命名为“sv”、“sf”等。然后重构所有相关引用。

我试图挖网，但找不到类似的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:48:33.930

我认为这个可以帮助你： http: [//www.minifyjavascript.com/](http://www.minifyjavascript.com/)

我过去用过它，它做得很好！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T10:48:40.910

试试 YUI 压缩器：

[http://developer.yahoo.com/yui/compressor/](http://developer.yahoo.com/yui/compressor/)

对我来说，它似乎是目前最强大的之一。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T10:48:42.940

Google [Closure Compiler](https://developers.google.com/closure/compiler/)就是这样做的。它有各种设置，但即使是“简单优化”设置也会缩短变量名称和（在它知道函数永远不会在脚本之外调用的情况下）函数名称。当需要节省时，它甚至会内联函数。

例如，给定这个脚本：

```
jQuery(function($) {
    var allDivsOnThePage = $("div"),
        someParagraphsAsWell = $("p");

    setColor(allDivsOnThePage, "blue");
    setColor(someParagraphsAsWell, "green");

    function setColor(elms, color) {
        return elms.css("color", color);
    }
}); 
```

使用带有简单优化的闭包编译器（并告诉它我们正在使用 jQuery）产生：

```
jQuery(function(a){var b=a("div"),a=a("p");b.css("color","blue");a.css("color","green")}); 
```

请注意，它不仅缩短了标识符，而且在它检测到可能的地方重用了一个（在这种情况下，这并没有为我们节省任何东西，但在其他一些情况下它可以），并内联`setColor`函数，因为这导致了节省。

# session - CakePHP 数据库会话是否会自动清理？

> ID：10429800
> 
> 赞同：1
> 
> 时间：2012-05-03T10:45:56.250
> 
> 标签：session, cakephp-1.3

我正在使用 Cakephp 1.3 并在我的数据库中保存会话。

到目前为止，尚未从“cake_sessions”表中清除任何已创建的会话。

我想知道 CakePHP 核心或进程是否会从此表中清除会话行，或者我是否需要处理这个问题。如果 CakePHP 核心或进程自动处理这个问题，我的表中的会话条目没有被清除的可能原因是什么/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T05:31:12.383

我刚刚在谷歌上搜索了这个确切的问题（很高兴你问了这个问题）。不得不在#CakePHP IRC 上询问开发人员。

显然**，当 PHP 触发垃圾收集时，数据库会被清理**。默认情况下，这大约是每 1,000 个请求。您可以通过设置来控制频率`session.gc_divisor`。

```
ini_set('session.gc_divisor', 1000);    // this is the default
ini_set('session.gc_divisor', 1);       // this will run GC on every request
                                        // (helpful for debugging) 
```

至少对于 CakePHP 2.x 是这样，但我怀疑它也适用于 1.3。

# python - Python中的脚本和交互式终端客户端

> ID：10429801
> 
> 赞同：2
> 
> 时间：2012-05-03T10:46:07.777
> 
> 标签：python

我需要使用 Python 编写/自动化交互式终端客户端的脚本。客户端接受三个参数并运行如下：

```
>./myclient <arg1> <arg2> <arg3>
Welcome...
blah...
blah..
[user input]
some more blah... blah... for the input entered
blah.. 
blah..
[basically it accepts input and puts the output in the console until the user types 'quit'] 
```

现在我需要在 Python 中自动执行此操作，并将控制台输出保存在文件中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-03T14:32:38.413

你可以看看[http://docs.python.org/library/cmd.html](http://docs.python.org/library/cmd.html)。

**示例代码：**

```
import cmd
import sys

class Prompt(cmd.Cmd):
    def __init__(self, stufflist=[]):
        cmd.Cmd.__init__(self)
        self.prompt = '>>> '
        self.stufflist = stufflist
        print "Hello, I am your new commandline prompt! 'help' yourself!"

    def do_quit(self, arg):
        sys.exit(0)

    def do_print_stuff(self, arg):
        for s in self.stufflist:
            print s

p = Prompt(sys.argv[1:])
p.cmdloop() 
```

**示例测试：**

```
$ python cmdtest.py foo bar
Hello, I am your new commandline prompt! 'help' yourself!
>>> help

Undocumented commands:
======================
help  print_stuff  quit

>>> print_stuff
foo
bar
>>> quit 
```

为了将输出保存到文件中，您可以将通常发送到 stdout 的内容也写入文件，例如使用此类：

```
class Tee(object):
    def __init__(self, out1, out2):
        self.out1 = out1
        self.out2 = out2

    def write(self, s):
        self.out1.write(s)
        self.out2.write(s)

    def flush(self):
        self.out1.flush()
        self.out2.flush() 
```

你可以像这样使用它：

```
with open('cmdtest.out', 'w') as f:
    # write stdout to file and stdout
    t = Tee(f, sys.stdout)
    sys.stdout = t 
```

一个问题是通过stdin读入的命令没有出现在这个输出中，但我相信这可以很容易地解决。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-03T15:28:30.387

您可能想要使用[pexpect](https://github.com/pexpect/pexpect)（它是古老的 expect 的纯 python 版本）。

```
import pexpect
proc = pexpect.spawn('./myclient <arg1> <arg2> <arg3>')
proc.logfile = the_logfile_you_want_to_use
proc.expect(['the string that tells you that myclient is waiting for input'])
proc.sendline('line you want to send to myclient')
proc.expect(['another line you want to wait for'])
proc.sendline('quit') # for myclient to quit
proc.expect([pexpect.EOF]) 
```

这样的事情应该足以解决您的问题。pexpect 有更多功能，因此请阅读文档以获取更高级的用例。

# gwt - 将视图绑定到演示者时出错？

> ID：10429803
> 
> 赞同：1
> 
> 时间：2012-05-03T10:46:22.283
> 
> 标签：gwt, dependency-injection, guice, gwt-gin, gwt-platform

运行 GWT 应用程序时出现此错误：

```
java.lang.AssertionError: This UIObject's element is not set; you may be missing a call to either Composite.initWidget() or UIObject.setElement()

public class MainView extends Composite implements HeaderPresenter.MyView {
  // Code omitted
} 
```

在 Gin **ClientModule.java** configure() 函数中，我有以下代码：

```
bindPresenter(HeaderPresenter.class, HeaderPresenter.MyView.class,
                MainView.class, HeaderPresenter.MyProxy.class); 
```

在视图类中，initWidget() 被正确调用并与小部件一起传递，什么可能导致错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T21:18:37.720

这就是我创建`Composite`稍后将在视图中使用的方法。

```
public class MyCustomBox extends Composite {

    private static MyCustomBoxUiBinder uiBinder = GWT.create(MyCustomBoxUiBinder.class);

    interface MyCustomBoxUiBinder extends UiBinder<Widget, MyCustomBox> {
    }

    public MyCustomBox() {
        initWidget(uiBinder.createAndBindUi(this));
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T16:38:07.467

`UIObject.setElement`未调用时会发生此错误。如果您`Composite.initWidget`使用非空小部件进行调用，请确保该小部件正确设置了自己的元素。如果这是一个标准的 GWT 小部件，它应该这样做，但否则传递给的小部件可能`initWidget`没有正确设置。

# jakarta-ee - Struts 2 - s：使用地图选择

> ID：10429804
> 
> 赞同：8
> 
> 时间：2012-05-03T10:46:28.257
> 
> 标签：jakarta-ee, select, struts2, hashmap

在 struts 2 中，我想使用从地图填充的 s:select。
我的地图有像 "key1" 、 "value1" "key2" 、 "value2" 这样的值

键是我想要发布的（它们是），但它显示了值。我不想显示这些值，但是从我在其他人（如 s:text）getTranslation("value1") 中使用的方法返回的值并显示该值。

如果我尝试

```
<s:select ... list="myMap" listValue="getTranslation(myMap)"> 
```

它不显示任何内容，只是空框可供选择。如何获取迭代的 id 以填充以选择以便使用类似的东西：

```
<s:select ... list="myMap" listValue="getTranslation(myMap.get(  how do I get this id?   ))"> 
```

或者类似的东西？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-05-03T11:36:19.267

渲染

```
<s:select list="myMap" /> 
```

等于

```
<s:select list="myMap" listKey="key" listValue="value" /> 
```

* * *

然后尝试以下

```
<s:select list="myMap" listValue="getTranslation(value)" /> 
```

# cakephp - CakePHP 在 HABTM 字段中保存数据

> ID：10429812
> 
> 赞同：0
> 
> 时间：2012-05-03T10:47:11.237
> 
> 标签：cakephp, has-and-belongs-to-many, cakephp-2.1

我正在使用这三个关系用户、电影和用户观察列表。其中 users_watchlists 包含电影 ID 和用户 ID 作为属性。我有这个结构

```
array(
'User' => array(
    'id' => '3'
),
'UsersWatchlist' => array(
    'UsersWatchlist' => array(
        (int) 0 => '3'
    )
) 
```

)

```
public function watchlist($id = null) {
    $userid = '3';
    if (!$id && $userid != 3) {
        $this->Session->setFlash('Invalid Movie');
        $this->redirect($this->referer(array('action' => 'listing')));
    }
    $this->request->data['User']['User'][] = $userid;
    $this->request->data['Movie']['Movie'][] = $id;
    debug($this->request->data);
    if ($this->User->saveAll($this->request->data)) {
        debug("saved");
        $this->Session->setFlash('The movie has been added to your watchlist', 'admin/flash_success');
        //$this->redirect($this->referer(array('action' => 'listing')));
    } else {
        debug("saved bo");
        $this->Session->setFlash('The movie could not be added to your watchlist. Please, try again.', 'admin/flash_error');
        //$this->redirect($this->referer(array('action' => 'listing')));
    }  
} 
```

我在 User 上使用了 saveAll 方法，但它没有保存..请为我提供保存数据的解决方案..

在电影模型中，

```
public $hasAndBelongsToMany = array('User' => array(
        'className' => 'User',
        'joinTable' => 'users_watchlists',
        'foreignKey' => 'movie_id',
        'associationForeignKey' => 'user_id',
        'unique' => 'keepExisting',
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'finderQuery' => '',
        'deleteQuery' => '',
        'insertQuery' => ''
    )
); 
```

在用户模型中，

```
public $hasAndBelongsToMany = array(
   'Movie' => array(
        'className' => 'Movie',
        'joinTable' => 'users_watchlists',
        'foreignKey' => 'user_id',
        'associationForeignKey' => 'movie_id',
        'unique' => 'keepExisting',
        'conditions' => '',
        'fields' => '',
        'order' => '',
        'limit' => '',
        'offset' => '',
        'finderQuery' => '',
        'deleteQuery' => '',
        'insertQuery' => ''
    ) 
```

);

在 UsersWatchlist 模型中，

```
public $belongsTo = array(
    'User' => array(
        'className' => 'User',
        'foreignKey' => 'user_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    ),
    'Movie' => array(
        'className' => 'Movie',
        'foreignKey' => 'movie_id',
        'conditions' => '',
        'fields' => '',
        'order' => ''
    )
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T12:11:39.357

您尝试保存的数据数组是错误的。

如果您通过 User 模型保存您的结构应该是：

```
array(
'User' => array(
    'id' => '3'
),
'Movie' => array(
    'Movie' => array(
        (int) 0 => '3'
    )
) 
```

# c++ - C++类中非原始静态数据类型的初始化

> ID：10429814
> 
> 赞同：3
> 
> 时间：2012-05-03T10:47:15.807
> 
> 标签：c++, qt, class, static-members

```
#include <QQueue>
#include <QString>

class   Util {
public:

    static QQueue<QString> links;

    Util() {
    }
};

    Util::links.enqueue("hello world"); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:57:01.717

您可以使用函数的结果对其进行初始化：

```
QQueue<QString> make_links() {
    QQueue<QString> queue;
    queue.enqueue("hello world");
    return queue;
}

QQueue<QString> Util::links = make_links(); 
```

我不熟悉 QT，但可能希望他们添加对 C++11 初始化程序列表的支持，在这种情况下，您可以将其初始化为：

```
QQueue<QString> Util::links {"hello world"}; 
```

（更新：根据 Shahbaz 评论中的链接，如果您使用 C++11，您确实可以这样做）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T11:53:45.370

您可以在所有此类情况下使用静态初始化对象：

头文件：

```
#include <QQueue>
#include <QString>

class   Util {
public:

    static QQueue<QString> links;

    Util() {
    }
}; 
```

cpp文件：

```
namespace {
    struct StaticInitializer {
        StaticInitializer() {
            Util::links.enqueue("hello world");
        }
    } initializer;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T10:52:52.377

尝试使用静态成员函数：

```
#include <QQueue>
#include <QString>

class   Util {
public:

    static QQueue<QString>& links() {
      static QQueue<QString> instance;
      static bool is_init = false;
      if(!is_init) {
        instance.enqueue("hello world");
        is_init = true;
      }
      return instance;
    }

    Util() {
    }
}; 
```

正如 Shahbaz 所说，在 C++11 QQueue 似乎支持初始化列表：

```
QQueue<QString> Util::links = {"hello world"}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T10:50:11.327

您像往常一样在全局范围内初始化：

```
QQueue<QString> Util::links; 
```

或者

```
QQueue<QString> Util::links(1); // with constructor parameters if necessary 
```

# eclipse - 在 Eclipse 中查看 Scaladoc

> ID：10429817
> 
> 赞同：47
> 
> 时间：2012-05-03T10:47:28.767
> 
> 标签：eclipse, scala, scala-ide, scaladoc

在**Eclipse**中，我将 Scala 项目的*Javadoc Location*属性设置为我的 Scala 项目的`file:/D:/EclipseWorkspace/MyProject/target/scala-2.9.1/api`位置`D:/EclipseWorkspace/MyProject`。

现在，如果我在一个实现类/特征的 Scala 文件中，当我键入`Shift`+时`F2`，Eclipse 会打开该类/特征的 Scaladoc 页面。但是，如果它是一个对象，这将不起作用，因为 Eclipse 尝试打开`<ObjectName>.html`而 Scaladoc 生成的文件名为`<ObjectName>$.html`.

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-10-29T11:24:53.060

自Scala-IDE 插件的[4.0.0 RC1 版本](http://scala-ide.org/blog/release-notes-4.0.0-RC1.html)以来，Scaladoc 现在已集成。您可以将鼠标悬停在您的术语上，或在光标位于标识符上时按 F2。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-20T09:55:42.140

Typesafe[宣布](http://blog.typesafe.com/genjavadoc-generate-true-javadoc-for-scala-pr)了一个用于 Scala 编译器的插件，它为您的*Scala* API生成*JavaDoc 。*该插件及其文档可在[github](https://github.com/typesafehub/genjavadoc)上找到。也许这有助于作为一种解决方法。

# iphone - 动态替换 TabBar 项

> ID：10429821
> 
> 赞同：1
> 
> 时间：2012-05-03T10:47:57.093
> 
> 标签：iphone, ios, uitabbarcontroller, uitabbar, uitabbaritem

我有一个带有两个 UIViewController 的 UITabBarController fe“所有消息”，“最喜欢的消息”。

对于某些操作，我需要用新的（其他操作，其他图像）动态替换我的 UITabBar 项目......

所以它应该是“喜欢”和“不喜欢”而不是“所有消息”、“最喜欢的消息”。

最好的方法是什么？

```
// Note
//I don't need ViewControllers for these items, I will use TabBar delegate
//so I can't do following:
tabBarVC.viewControllers = [NSArray ...new view controllers] 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:59:30.580

您可以在 tabbarselect 方法中使用此代码

```
 if(tabbar.selectedindex==1)
 {
  self.title=@"newtitle"
 } 
```

像这样

```
 UITabBarController *tabbar1 = [[UITabBarController alloc] init];

secondviewcontroller  *second = [[secondviewcontroller alloc] initWithNibName:nil bundle:nil];
second.title=@"message";

firstviewcontroller *third=[[firstviewcontroller alloc]initWithNibName:nil bundle:nil];
third.title=@"all message";

   if(tabbar1.selectedindex==0)
 {
 second.title=@"like";
  third.title=@"DisLike";
 }

tabbar1.viewControllers = [NSArray arrayWithObjects: second,third,nil]; 
tabbar1.view.frame=CGRectMake(0, 0, 320, 460);
[self.view addSubview:tabbar1.view]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:27:28.000

**此示例显示删除当前选定的选项卡栏项目。**

```
NSMutableArray* newArray = [NSMutableArray arrayWithArray:self.tabBarController.viewControllers];
[newArray removeObject:self];
[self.tabBarController setViewControllers:newArray animated:YES]; 
```

对`tabbar items array`和调用进行更改`setviewcontrollers`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T10:53:55.357

来自[UITabBarController](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITabBarController_Class/Reference/Reference.html)文档

> 要配置选项卡栏控制器的选项卡，请将为每个选项卡提供根视图的视图控制器分配给 viewControllers 属性。

你可以做的只是暂时隐藏tabBarController的工具栏并`UIToolbar`使用你的选项在它的位置创建一个新的

# java - 使用数组将随机选择的图像添加到可点击的网格视图

> ID：10429823
> 
> 赞同：1
> 
> 时间：2012-05-03T10:48:05.293
> 
> 标签：java, android, arrays, gridview, random

我想生成可变或 12 长度的图像的可点击网格视图。这我管理得很好，但我想随机（从列表中）以重复的对（6对）选择图像（水果或其他）[我还需要将匹配的声音连接到图片/网格视图的位置，以便单击它们] . 我应该将它们添加到数组中吗？当点击它们时，我需要将匹配的声音连接到图片/网格视图的位置。

我可以这样填充数组吗？命令是什么？例如，我可以通过这种方式添加到我的 array1 中吗：

```
array1[n] = arraycontainingimages[randomnumbern]; 
```

? 我有什么选择或最好的方法是什么？我可以创建一个空数组然后添加图像吗？哪个命令可以添加它们？我最好使用 ArrayList() java 命令然后添加（int index，Object element）。单击后，我还需要从网格视图中删除该项目。

我是一个初学者，下面有一些示例代码可能在很多方面都是错误的。如果我过于复杂，请告诉我。

```
public class MyImageAdapterFruit1 extends BaseAdapter {

int Totalfruit = 12; // this means there are 6 pairs of fruit to select
int fruitstilltoadd = Totalfruit;
int ftaddcnt = 1;
int puthere = 1; 
int counttotwo;

private Context mContext;

public MyImageAdapterFruit1(Context c) {
    mContext = c;
}

public int getCount() {
    return filenames.length;
}

public Object getItem(int position) {
    return null;
}

public long getItemId(int position) {
    return 0;
} 

// Create array to reference images later
public Integer [] displayfruit = {
        R.drawable.blank, 
        R.drawable.fruit1, R.drawable.fruit2, R.drawable.fruit3, 
        R.drawable.fruit4, R.drawable.fruit5, R.drawable.fruit6, 
        R.drawable.fruit7, R.drawable.fruit8, R.drawable.fruit9, 
        R.drawable.fruit10, R.drawable.fruit11, R.drawable.fruit12, 
};

// Create blank array to be populated randomly later - is this right/ok?
private Integer [] filenames;

// CONSIDER USING public void ArrayList (int capacity) {} here instead

//public void whyiseclipseaddingthis()     // Don't know why eclipse is adding this bit--------Fill (filenames) array randomly with 6 images in duplicate

{
while (fruitstilltoadd > 0) { 

//  select Fruittoaddtoarray - the following creates a random number (temprand) between 1 and 12 (if 12 is the total no. of fruit)
//  use this to randomly select fruit to add to the array 
    int restartfruitselection = 0;
    int minr = 1; 
    int maxr = (Totalfruit + 1); 
    Random temprand = new Random();
    int Fruittoaddtoarray = temprand.nextInt(maxr - minr + 1) + minr;
// end "select Fruittoaddtoarray" 

    // Now check if Fruittoaddtoarray already in array named "filenames"
    for (ftaddcnt = 1; ftaddcnt <= Totalfruit; ftaddcnt++) { 
        if (filenames[Fruittoaddtoarray] == filenames[ftaddcnt]) {
            restartfruitselection = 1; break;
            //if already in array then start over selecting new fruit else continue             
        }

    if (restartfruitselection == 0) {
    // new fruit has been selected successfully so lets add it TWICE to random positions
        counttotwo =1; 
        while (counttotwo <= 2) {

            minr = 1; 
            maxr = (Totalfruit + 1); 
            temprand = new Random();
            int Puthere = temprand.nextInt(maxr - minr + 1) + minr;
            // end selection of random Puthere

            //if Puthere location is empty then add fruit to that position in the array ...
            // ...otherwise select a different place to put the fruit and re-test    
            if (filenames[Puthere] == null) {
                filenames[Puthere] = displayfruit[Fruittoaddtoarray]; 
                counttotwo++; 
                fruitstilltoadd--;

            }
        }
    }       
}   
}}

int Fruitleft = 0;        

// create a new ImageView for each item referenced by the Adapter
public View getView(int position, View convertView, ViewGroup parent) {
    ImageView imageView;
    if (convertView == null) {  // if it's not recycled, initialize some attributes
        imageView = new ImageView(mContext);
        imageView.setLayoutParams(new GridView.LayoutParams(85, 85));
        imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
        imageView.setPadding(8, 8, 8, 8);
    } else {
        imageView = (ImageView) convertView;
    }

    imageView.setImageResource(filenames[position]);
    return imageView;
}

} 
```

谢谢你的帮助。欢迎任何方面的帮助。

PS我的gameonemainscreen.java文件是

```
 GridView gridview = (GridView) findViewById(R.id.gridView);
    gridview.setAdapter(new MyImageAdapterFruit1(this));

    gridview.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View v, int position, long id) {

            SoundManager.playSound(2, 1);     
            Toast.makeText(game1mainscreen.this, "" + position, Toast.LENGTH_SHORT).show();

        }
    });
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-18T09:50:26.577

显然我在一篇文章中问了太多问题。不会再发生了。简短的答案是：

1 我使用数组列表而不是数组，因为您无法修改数组。我在我的数组列表中交换了图像，如下所示：

```
myarraylist.set(position, R.drawable.newimage); //swap for new image
myarraylist.remove(0); //remove first int (image) from array

FruitToChooseFromImages = new ArrayList<Integer>();
FruitToChooseFromImages.add(R.drawable.image1);
FruitToChooseFromImages.add(R.drawable.image2); // etc to add images to the arraylist 
```

2 我用过：

```
switch (switchused) {
    case R.drawable.fruit0:
            soundtoplay = 0;
            break;
etc..... 
```

将声音与图像匹配，而不是像我发现的那样使用两个数组列表：

```
Collections.shuffle(intarraylistofimages, shufflevalueSeed);
Collections.shuffle(intarraylistofnames, shufflevalueSeed); 
```

即使使用相同的种子，两个数组的顺序也不相同，尽管文章相反。

3 要更改单击时的图标，我遇到了问题，所以我在更改图像后刷新了整个网格：

```
MyGridviewAdapter1.notifyDataChanged();
gridview.invalidateViews(); 
```

# c# - 如何将两个列表的值合并在一起

> ID：10429826
> 
> 赞同：1
> 
> 时间：2012-05-03T10:48:08.563
> 
> 标签：c#, .net, windows

例如我有：

```
public static List<int> actorList = new List<int>();
public static List<string> ipList = new List<string>(); 
```

他们都有各种各样的物品。

所以我尝试使用 foreach 循环将值（字符串和 int）连接在一起：

```
 foreach (string ip in ipList)
    {
        foreach (int actor in actorList)
        {
            string temp = ip + " " + actor;
            finalList.Add(temp);
        }
    }

    foreach (string final in finalList)
    {
        Console.WriteLine(finalList);
    } 
```

尽管回头看，这很愚蠢，显然行不通，因为第一个 forloop 是嵌套的。

我对 finalList 列表的期望值：

```
actorListItem1 ipListItem1
actorListItem2 ipListItem2
actorListItem3 ipListItem3 
```

等等..

因此，两个列表中的值相互连接 - 对应于它们在列表顺序中的位置。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-03T10:52:41.157

**`ZIP`LINQ的使用功能**

```
List<string> finalList = actorList.Zip(ipList, (x,y) => x + " " + y).ToList();

finalList.ForEach(x=> Console.WriteLine(x)); // For Displaying 
```

**或将它们组合成一行**

```
actorList.Zip(ipList,(x,y)=>x+" "+y).ToList().ForEach(x=>Console.WriteLine(x)); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T10:53:21.833

一些功能上的好处呢？

```
listA.Zip(listB, (a, b) => a + " " + b) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-03T10:50:37.787

循环遍历索引：

```
for (int i = 0; i < ipList.Count; ++i)
{
    string temp = ipList[i] + " " + actorList[i];
    finalList.Add(temp);
} 
```

您可能还想在此之前添加代码以验证列表的长度是否相同：

```
if (ipList.Count != actorList.Count)
{
    // throw some suitable exception
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T10:51:31.827

假设您可以使用 .NET 4，您需要查看[Zip 扩展方法](http://msdn.microsoft.com/en-us/library/dd267698.aspx)和提供的示例：

```
int[] numbers = { 1, 2, 3, 4 };
string[] words = { "one", "two", "three" };

// The following example concatenates corresponding elements of the
// two input sequences.
var numbersAndWords = numbers.Zip(words, (first, second) => first + " " + second);
foreach (var item in numbersAndWords)
    Console.WriteLine(item);
Console.WriteLine(); 
```

在此示例中，由于 中没有“4”的对应条目`words`，因此将其从输出中省略。在开始之前，您需要进行一些检查以确保集合的长度相同。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-05-03T10:50:35.857

```
for(int i=0; i<actorList.Count; i++)
{
   finalList.Add(actorList[i] + " " + ipList[i]);
} 
```

# unix - UNIX 中使用的 Net-SNMP

> ID：10429828
> 
> 赞同：0
> 
> 时间：2012-05-03T10:48:16.573
> 
> 标签：unix, snmp, net-snmp

有谁知道有助于 NET-SNMP 的在线教程或书籍。

或者任何人都可以推荐我的 Unix SNMP 陷阱生成器

基本上我想将 SNMP 陷阱从 UNIX 发送到 SCOM 服务器，但我不能使用 SCOM AGENT，因为它很重。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-06T08:54:19.077

Net-SNMP 包含一个命令行工具“snmptrap”，您可以使用它来发送陷阱。或者您可以使用 Perl 编写执行陷阱发送的脚本。

O'Reilly 的书“Essential SNMP”除了一般解释 SNMP 外，还有许多如何从命令行或 Perl 使用 SNMP 的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:24:10.710

您可以从官方**NET-SNMP wiki**获取教程- 只需搜索 google。

[关于您的问题，您可以在此snmptrap 教程链接](http://www.net-snmp.org/wiki/index.php/TUT%3asnmptrap)中找到一篇好文章

如果您使用 UNIX/Solaris 作为开发平台，请确保在**PATH**中包含“/usr/sfw/bin”文件夹，因为默认情况下不会搜索它。

# r - 当变量名作为字符串传递时如何获取值

> ID：10429829
> 
> 赞同：21
> 
> 时间：2012-05-03T10:48:20.550
> 
> 标签：r

我用 R 写这段代码

```
paste("a","b","c") 
```

返回值`"abc"`

变量`abc`的值为 5（比如说）我如何`"abc"`给我值 5 是否有任何函数`as.value(paste("a","b","c"))`可以给我答案 5？我让我的怀疑听起来很简单，这正是我想要的。所以请帮助我。提前致谢

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-05-03T11:00:22.043

`paste("a","b","c")``"a b c"`不给`"abc"`

无论如何，我认为您正在寻找`get()`：

```
> abc <- 5
> get("abc")
[1] 5 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-05-03T11:16:41.740

萨沙回答的补充。如果要使用以下方法为对象“abc”赋值`paste()`：

```
assign(paste("a", "b", "c", sep = ""), 5) 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-05-03T12:00:45.107

这当然是关于 R 语言以及它的邪恶孪生兄弟“我如何`x='myfunc'`变成可执行函数？”的最常被问到的问题之一。总之， `get`, `parse`, `eval`,`expression`都是值得学习的好东西。最有用（恕我直言）和最不为人知的是`do.call`，它为您处理了大量的字符串到对象的转换工作。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-12-05T08:33:53.243

这是一个演示 eval() 和 get(eval()) 的示例

```
a <- 1
b <- 2

var_list <- c('a','b')

for(var in var_list)
{
  print(paste(eval(var),' : ', get(eval(var))))
} 
```

这给出了：

```
[1] "a  :  1"
[1] "b  :  2" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-09T20:00:04.960

这是一个针对多个向量执行此操作的 purrr 示例

```
text1 = "Somewhere over the rainbow"
text2 = "All I want for Christmas is you"
text3 = "All too well"
text4 = "Save your tears"
text5 = "Meet me at our spot"

songs = (map(paste0("text", 1:5), get) %>% unlist)
songs 
```

这给

```
[1] "Somewhere over the rainbow"     
[2] "All I want for Christmas is you"
[3] "All too well"                   
[4] "Save your tears"                
[5] "Meet me at our spot" 
```

# google-chrome - 通过单击 Google Chrome 中的哈希锚链接导致水平滚动不正确

> ID：10429833
> 
> 赞同：3
> 
> 时间：2012-05-03T10:48:35.217
> 
> 标签：google-chrome, anchor, css-position, horizontal-scrolling

在我的一个项目中，我在 Google Chrome (v.18.0.1025.168 m) 中遇到了一个奇怪的行为。

在 Firefox、IE、Opera 中一切正常，但在 Chrome 中，通过单击指向哈希锚的链接会出现不正确的水平滚动。垂直滚动工作正常，但水平滚动非常糟糕。

有时请求的 div 显示得很好，但在大多数情况下，div 块位于视觉范围的左侧或右侧。

您可以使用以下代码重现这一点。通过单击左上固定菜单：例如 top、left、right、moreright、right。

我不确定这是 Chrome 错误还是我忽略了什么？！你什么意思？有已知的解决方法吗？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Google-Chrome don't follows anchors properly - incorrect horizontal scrolling</title>
<style type="text/css">
body
{
    min-width: 700px;
    overflow: auto;
}

div
{
    position: absolute;
    width: 400px;
    height: 300px;
    z-index: 1;
    padding-left:160px;
}

#top
{
    border: 1px solid black;
    top:0px;
    left: 400px;
    background: gray;
}

#left
{
    border: 1px solid blue;
    left:0px;
    top: 400px;
    background:#00d;
}

#right
{
    border: 1px solid orange;
    left:800px;
    top: 800px;
    background: yellow;
}
#moreright
{
    border: 1px solid red;
    left:1600px;
    top: 1500px;
    background:#d00;
}

div#fixedmenu
{
    position: fixed;
    top:0;
    left: 0;
    width: 150px;
    height: 150px;
    background: #ddd;
    border: 1px solid gray;
    z-index: 2;
    margin: 0;
    padding:0;
}

</style>
</head>
<body>
<div id="top" >top</div>
<div id="left">left</div>
<div id="right">right</div>
<div id="moreright">moreright</div>

<div id="fixedmenu">
    <ul>
        <li><a href="#top">top</a></li>
        <li><a href="#left">left</a></li>
        <li><a href="#right">right</a></li>
        <li><a href="#moreright">moreright</a></li>
    </ul>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T21:56:02.163

为每个链接添加 onclick，调用 Javascript Jump-Function::

```
<a href="#moreright" onclick="jump('moreright')">moreright</a> 
```

JS：

```
function jump(element_id)
{
        var d = document.getElementById(element_id);

        var gx = d.offsetLeft;
        var e = d;
        if (d.offsetParent) while (e = e.offsetParent) gx += e.offsetLeft;

        var gy = d.offsetTop;
        var e = d;
        if (d.offsetParent) while (e = e.offsetParent) gy += e.offsetTop;

        window.scrollTo(gx,gy);

} 
```

..和Chrome中的水平滚动作品..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-04T15:41:55.593

好吧，这绝对是浏览器之间的行为差​​异，但我不会称其为错误。在我看来，解决这个问题的正确地方是[Chrome 支持论坛。](http://productforums.google.com/forum/#!forum/chrome "Chrome 支持论坛")

至于变通方法，有很多解决方案，其中最明显的就是坚持垂直滚动。要问自己的相关问题是“我想要实现什么功能，我愿意接受什么妥协？”

从您发布的实现中，我假设您正在寻找将更多信息放在单个页面加载上并在不同小节之间快速切换的东西。你真的需要水平滚动吗？是否有某些原因您不使用 javascript 插件？[Jquery Tabs 浮现](http://jqueryui.com/demos/tabs/ "jQuery 选项卡")在脑海中，[Jquery Accordion](http://jqueryui.com/demos/accordion/ "JQeury 手风琴")也是如此。可能还有很多其他库可以完成同样的事情。

如果您正在使用其他限制，请随时发布它们，我们可以集思广益一些解决方案。

# html - CSS无法垂直排列元素

> ID：10429835
> 
> 赞同：1
> 
> 时间：2012-05-03T10:48:39.087
> 
> 标签：html, css

我无法让较小的（上标）内联元素与另一个内联元素对齐。

基本上 em 元素（包含单词 'USD'）应该与内联文本（包含单词 ABC）对齐，因此两个单词的顶部都在同一行。

对我来说，使用下面的代码，即使我将行高设置为 35px，USD 字样也会上升一半；

任何想法我做错了什么？

谢谢，

克里斯

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style type="text/css">
.plan-types-pricing
{
    font-size: 35px;
    line-height: 35px;
}

.plan-types-pricing strong
{
    display: block;
}

.plan-types-pricing em
{
    font-size:12px;
    vertical-align: top;
    line-height: 35px;
}

.plan-types-pricing small
{
    font-size: 12px;
    vertical-align: baseline;
}

</style>
</head>
<body>
    <span class="plan-types-pricing">
        <strong>Starting at</strong>
        <em>USD</em>
        ABC
        <small>/month</small>
    </span>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:03:15.660

的 line-height`.plan-types-pricing em`应该是所需的高度 - 字体大小 (35 - 12 = 23) 所以将`line-height`of设置`em`为`23px`.

```
.plan-types-pricing em
{
    line-height: 23px;
    font-size: 12px;
    vertical-align: top;
} 
```

# javascript - Uncaught TypeError: undefined is not a function on loading jquery-min.js

> ID：10429838
> 
> 赞同：104
> 
> 时间：2012-05-03T10:48:49.283
> 
> 标签：javascript, jquery, minify

我正在构建一个普通的网页，它需要我加载大约五个 CSS 文件和十个 Javascript 文件。

*   在 HTML 页面中单独加载它们时，我的网页加载正常。
*   现在为了生产，我按照需要的顺序将所有 Javascript 连接到一个文件中，并将所有 CSS 连接到另一个文件中。但是，当我尝试使用连接的文件运行网页时，它会抛出一个错误：

    `Uncaught TypeError: undefined is not a function`

在连接的 Javascript 文件中加载 jquery.min.js 的行上。

我能做些什么来减轻这种情况？我想连接所有文件并缩小它们以进行生产。请帮忙。

**编辑：**我按照它们单独加载并且工作正常时的顺序合并了 Javascript 和 CSS。

* * *

## 回答 #1

> 赞同：180
> 
> 时间：2012-06-04T15:42:27.117

假设这个问题仍然没有解决，很多单独的文件不会用分号结束它们的代码。大多数 jQuery 脚本`(jQuery)`都以`(jQuery);`.

作为单独的文件，脚本可以很好地加载，但作为一个单独的文件，您需要分号。

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-05-03T10:53:23.463

您可能需要重新检查合并文件的顺序，它应该类似于：

1.  jquery.min.js
2.  jquery-ui.js
3.  您加载的任何第三方插件
4.  你的自定义 JS

* * *

## 回答 #3

> 赞同：20
> 
> 时间：2014-11-08T18:02:58.350

这个解决方案对我有用

```
    ;(函数($){
        // 你的代码
    })(jQuery);

```

将代码移动到闭包内并使用 $ 而不是 jQuery

[我在https://magento.stackexchange.com/questions/33348/uncaught-typeerror-undefined-is-not-a-function-when-using-a-jquery-plugin-in-ma](https://magento.stackexchange.com/questions/33348/uncaught-typeerror-undefined-is-not-a-function-when-using-a-jquery-plugin-in-ma)中找到了上述解决方案

在搜索太多之后

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2014-06-02T18:30:31.177

我有两次引用不同版本的 jQuery 时遇到了同样的错误。

在我的母版页中：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script> 
```

而且在页面上：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"> </script> 
```

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2012-11-08T00:47:25.313

我最近在使用[jQuery Validation 插件时](https://github.com/jzaefferer/jquery-validation)遇到了这个问题，使用[Squishit](https://github.com/jetheredge/SquishIt)，也得到了 js 错误：

> “未定义不是函数”

**我通过更改对未缩小的jquery.validate.js**文件而不是 jquery.validate.min.js的引用来修复它。

```
@MvcHtmlString.Create(
    @SquishIt.Framework.Bundle.JavaScript()
        .Add("~/Scripts/Libraries/jquery-1.8.2.min.js")
        .Add("~/Scripts/Libraries/jquery-ui-1.9.1.custom.min.js")
        .Add("~/Scripts/Libraries/jquery.unobtrusive-ajax.min.js")
        .Add("~/Scripts/Libraries/jquery.validate.js")
        .Add("~/Scripts/Libraries/jquery.validate.unobtrusive.js")
         ... more files 
```

我认为某些文件的缩小版本，例如，当使用 Squishit 进一步压缩时，在某些情况下可能无法处理丢失的分号等，正如@Dustin 所建议的那样，因此您可能必须尝试使用​​哪些文件可以双重压缩，您只需将其留给 Squishit 或您捆绑的任何东西。

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2014-07-05T22:25:42.773

对于那些仍然无法解决这个问题的人，我在使用 jQuery 时将“this”更改为“$(this)”。

例如：

```
$('.icon').click(function() {
    this.fadeOut();
}); 
```

固定的：

```
$('.icon').click(function() {
    $(this).fadeOut();
}); 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2013-08-30T07:58:12.787

当错误地将具有相同名称的变量命名为函数时，我遇到了同样的问题。

所以这：

```
isLive = isLive(data); 
```

失败，生成 OP 提到的错误消息。

解决这个问题就像将上面的行更改为一样简单：

```
isItALive = isLive(data); 
```

我不知道，在这种情况下它有多大帮助，但我决定将此答案提供给其他寻找类似问题解决方案的人。

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2014-04-21T23:31:23.773

是的，我也修复了它在 js 库中更改为未缩小的。

例如，在标签中，更改：

```
<script type="text/javascript" src="js/jquery.ui.core.min.js"></script>
<script type="text/javascript" src="js/jquery.ui.widget.min.js"></script>
<script type="text/javascript" src="js/jquery.ui.rcarousel.min.js"></script> 
```

为了：

```
<script type="text/javascript" src="js/jquery.ui.core.js"></script>
<script type="text/javascript" src="js/jquery.ui.widget.js"></script>
<script type="text/javascript" src="js/jquery.ui.rcarousel.js"></script> 
```

退出'min'作为未缩小的。

谢谢你的主意。

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-03-05T09:00:18.917

## 请记住：Javascript 函数是区分大小写的。

我有一个案例，我很确定我的代码会顺利运行。但是，仍然出现错误，我检查了Google Chrome的*Javascript 控制台以检查它是什么。*

我的错误行是

```
opt.SetAttribute("value",values[a]); 
```

并得到了同样的错误信息：

```
Uncaught TypeError: undefined is not a function 
```

上面的代码似乎没有错，但它没有运行。我排查了将近一个小时，然后将其与我的其他运行代码进行了比较。我的错误是它被设置为`SetAttribute`，应该是`setAttribute`。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-07-07T13:45:54.700

如果有像我这样的白痴，我会遇到这个令人沮丧的问题，因为我忘记了一个简单的

`new`

实例化新对象之前的关键字。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-02-03T22:19:24.410

我刚刚收到了与以下代码相同的消息（在 IcedCoffeeScript 中）：

```
f = (err,cb) ->
  cb null, true

await f defer err, res
console.log err if err 
```

在我看来，这就像常规的 ICS 代码。我将 await-defer 结构展开为常规 CoffeeScript：

```
f (err,res) ->
  console.log err if err 
```

真正发生的是，我试图将 1 个回调函数（带有 2 个参数）传递给`f`期望两个参数的函数，实际上没有`cb`在内部设置`f`，编译器正确地报告为`undefined is not a function`.

错误的发生是因为我盲目地粘贴了回调样式的样板代码。`f`不需要`err`传递给它的参数，因此应该是：

```
f = (cb) ->
  cb null, true
f (err,res) ->
  console.log err if err 
```

在一般情况下，我建议仔细检查函数签名和调用以匹配arities。错误消息中的调用堆栈应该能够提供有用的提示。

在您的特殊情况下，我建议寻找在合并文件中出现两次的函数定义，具有不同的签名，或分配给保存函数的全局变量。

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2014-06-13T19:29:49.350

确保您已注释掉任何评论。有时在复制和粘贴时，您会遗漏“/*！”

此外，当您进入控制台时，他们会列出您的错误，您应该一次处理一个。如果您看到“Uncaught SyntaxError: Unexpected token *”，这可能意味着它正在读取您的 js 文件并且它没有超过第一行。

/*！* jquery.tools 1.1.2 - Web 缺少的 UI 库 * * [tools.tabs-1.0.4, tools.tooltip-1.1.2, tools.scrollable-1.1.2, tools.overlay-1.1.2, tools.expose-1.0.5] * * 版权所有 (c) 2009 Tero Piirainen * [http://flowplayer.org/tools/](http://flowplayer.org/tools/) * 文件生成时间：2009 年 10 月 7 日星期三 09:40:16 GMT */

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-08-20T19:59:52.397

当我不小心将太多参数传递给只需要一个回调参数的 jquery 函数时，我得到了这个。

对于其他故障排除：确保检查所有 jquery 函数调用以获取额外参数。

# actionscript-3 - 将模糊滤镜应用于自由形状区域

> ID：10429840
> 
> 赞同：0
> 
> 时间：2012-05-03T10:48:52.357
> 
> 标签：actionscript-3, flash

我必须为简单的皱纹修饰构建一个 Flash 应用程序。用户应该能够上传肖像照片，选择皱纹区域，然后将模糊过滤器应用于所选部分。我的问题是 - 是否有可能将过滤器应用于自由形状区域？我知道将选择设为矩形很容易，但这对于真正标记正确的区域并不是很有用。理想情况下，用户应该使用某种圆形刷子来标记区域，按“确定”，然后将应用过滤器。有没有办法做到这一点？对于如何完成这项任务，您可能有一些进一步的建议吗？我对使用 ActionScript 操作位图数据的经验很少。

任何帮助表示赞赏！首先十分感谢 ：-）

![它应该是什么样子的示例..](../Images/82865f6a695a1765272a1e7bda92ae79.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T11:52:31.393

算法如下：

1.  使用创建一个选择形状的 BitmapData `BitmapData.draw()`（让它成为 A）
2.  剪切一块被选择区域覆盖的矩形原始图像，使用`Bitmapdata.copyPixels()`（让它成为B）为模糊区域添加一些边距。
3.  `BitmapData.threshold()`使用 A 作为源位图，从 B 中删除所有未被形状 A 覆盖的像素。
4.  模糊生成的图像
5.  使用将模糊像素复制回目标图像`Bitmapdata.copyPixels()`

这是一个完整且有效的示例。
无论如何，我在找出解决方案的同时编写了代码。
希望你觉得它有用。

```
package
{
    import flash.display.Bitmap;
    import flash.display.BitmapData;
    import flash.display.Loader;
    import flash.display.Shape;
    import flash.display.Sprite;
    import flash.display.StageAlign;
    import flash.display.StageScaleMode;
    import flash.events.Event;
    import flash.filters.BlurFilter;
    import flash.geom.Matrix;
    import flash.geom.Point;
    import flash.geom.Rectangle;
    import flash.net.URLRequest;
    import flash.system.LoaderContext;

    [SWF(width="800", height="600",backgroundColor="#FFFFFF")]    
    public class TestBlur extends Sprite
    {
        private const loader:Loader = new Loader();

        public function TestBlur()
        {
            stage.align = StageAlign.TOP_LEFT;
            stage.scaleMode = StageScaleMode.NO_SCALE;

            loader.contentLoaderInfo.addEventListener(Event.COMPLETE, onLoadComplete);
            loader.load(new URLRequest("http://i.stack.imgur.com/u3iEv.png"), new LoaderContext(true));
        }

        protected function onLoadComplete(event:Event):void
        {
            trace(event);
            var bmp:Bitmap = loader.content as Bitmap;
            addChild(bmp);

            // create some test selection area
            var selection:Shape = new Shape();
            selection.graphics.lineStyle(30, 0xFF0000, .5);
            selection.graphics.curveTo(75, -50, 200, 10);
            selection.x = 40;
            selection.y = 60;
            addChild(selection);

            // create a duplicate of the original image
            var target:BitmapData = bmp.bitmapData.clone();
            var targetBmp:Bitmap = new Bitmap(target);
            targetBmp.x = bmp.x + bmp.width;
            addChild(targetBmp);

            //
            // *** main work starts here ***
            // by now we have selection shape and a bitmap to blur

            const destPoint:Point = new Point();
            const drawMatrix:Matrix = new Matrix();
            const blurMargin:uint = 10;
            const blur:BlurFilter = new BlurFilter(2, 2, 3);
            var rect:Rectangle;

            // 0: prepare an image of selection area
            // we'll need it at step 3
            rect = selection.getBounds(selection);
            rect.x -= blurMargin;
            rect.y -= blurMargin;
            rect.width += blurMargin*2;
            rect.height += blurMargin*2;            
            var selectionImage:BitmapData = new BitmapData(rect.width, rect.height, true, 0);
            drawMatrix.identity();
            drawMatrix.translate(-rect.x, -rect.y);
            selectionImage.draw(selection, drawMatrix);

                    // just some testing
                    var test0:Bitmap = new Bitmap(selectionImage.clone());
                    test0.y = bmp.y + bmp.height;
                    addChild(test0);

            // 1: cut a rectangular piece of original image that is covered by selection area
            rect = selection.getBounds(selection.parent);
            rect.x -= blurMargin;
            rect.y -= blurMargin;
            rect.width += blurMargin*2;
            rect.height += blurMargin*2;
            var area:BitmapData = new BitmapData(rect.width, rect.height, true, 0);
            area.copyPixels(bmp.bitmapData, rect, destPoint);

                    // just some testing
                    var test1:Bitmap = new Bitmap(area.clone());
                    test1.y = bmp.y + bmp.height;
                    test1.x = test0.x + test0.width;
                    addChild(test1);

            // 2: remove all pixels that are not covered by selection
            area.threshold(selectionImage, area.rect, destPoint, "==", 0, 0, 0xFF000000);

                    // just some testing
                    var test2:Bitmap = new Bitmap(area.clone());
                    test2.y = test0.y + test0.height;
                    test2.x = test0.x;
                    addChild(test2);

            // 3: blur copied area
            area.applyFilter(area, area.rect, destPoint, blur);

                    // just some testing
                    var test3:Bitmap = new Bitmap(area.clone());
                    test3.y = test0.y + test0.height;
                    test3.x = test2.x + test2.width;
                    addChild(test3);

            // 4: copy blurred pixels back to target image
            destPoint.x = rect.x;
            destPoint.y = rect.y;
            target.copyPixels(area, area.rect, destPoint);
        }        
    }
} 
```

# android - 设备无法连接安卓市场

> ID：10429841
> 
> 赞同：0
> 
> 时间：2012-05-03T10:48:54.857
> 
> 标签：android, in-app-purchase, google-play, connect

我的应用程序已在应用程序中购买，但是当我运行该应用程序时，会消失一条带有内容的警报“**此应用程序无法连接到市场。您的版本可能已过时。您可以继续使用此应用程序，但您将无法制作购买**”。我的设备安装了 Google Play 3.5.15，并且还连接了互联网。我已经在其他设备上运行了我的应用程序，没关系。我能告诉我为什么，什么解决方案？

# css - 当有负边距时背景被剪切的 IE CSS 问题

> ID：10429845
> 
> 赞同：2
> 
> 时间：2012-05-03T10:48:56.700
> 
> 标签：css, internet-explorer

这是有问题的网站

[http://kryptodesigns.com/dev/forum.php?styleid=3](http://kryptodesigns.com/dev/forum.php?styleid=3)

在 FF 中，Chrome 一切看起来都很好，注意导航中的论坛链接以及红色背景如何扩展灰色导航容器。

现在看看 IE 中的同一个链接，它切断了导航容器外整个边距的背景颜色。

我在谷歌上到处寻找有类似问题但没有运气的人。

这是我正在谈论的图片。

[![](../Images/8e836c2bd9e6acfeaa94cea974cfe5f3.png)](https://i.stack.imgur.com/TUXw0.jpg)

解决此问题的任何帮助都会很棒。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:15:24.313

问题出`filter`在这里：

```
#navtabs {
    /* for non-css3 browsers */
    background: #CDCFD0 url(kryptodesigns/KD0010/misc/navigation/navigation-repeat.png) top left repeat-x;
    /* for IE */
    filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#FFFFFF', endColorstr='#CDCFD0');
    /* for webkit browsers */
    background: -webkit-gradient(linear, left top, left bottom, from(#FFFFFF), to(#CDCFD0)); 
    /* for firefox 3.6+ */
    background: -moz-linear-gradient(top,  #FFFFFF,  #CDCFD0); 
} 
```

有 a`filter`会导致`overflow: hidden`-esque 效果，这就是为什么看不到顶部的原因`li`。

要解决此问题，我建议您简单地删除`filter`，因为您已经拥有相同渐变的图像版本。

# javascript - 使用 javascript 删除

> ID：10429848
> 
> 赞同：0
> 
> 时间：2012-05-03T10:49:04.497
> 
> 标签：javascript, html

我如何`<tr>`使用javascript从表中删除整个而不使用`getElementByID`，因为我没有任何表ID`tr`或`tds`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T11:03:51.890

假设您的表有 id="mytable"：

这是您获得所有 trs 的方式：

```
1\. var trs = document.getElementById("mytable").rows; or
2\. var trs = document.getElementById("mytable").getElementsByTagName("tr"); 
```

现在这样做：

```
while(trs.length>0) trs[0].parentNode.removeChild(trs[0]); 
```

如果您的表格没有 id 并且页面上只有一个表格，请执行以下操作：

```
var trs = document.getElementsByTagName("table")[0].rows; 
```

如果你不给它一个id，就很难删除一个特定的tr。如果要删除某种类型的 trs，请给它们一个类属性并仅删除具有该类属性的那些 trs。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T10:52:36.553

你可以用 jQuery 尝试这样的事情：

```
$(function(){
    $('tr, td').remove();
}); 
```

或者如果——无论出于何种原因——你想删除一个表的所有内容：

```
$('table').empty(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T10:54:46.480

一旦您确定了`<tr>`您希望删除的内容（您没有为您的问题提供足够的上下文来建议（没有做出很多假设）您可以如何做到这一点）：

```
tr_element.parentNode.removeChild(tr_element) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T11:44:19.937

尝试这样的事情

```
 <html>
        <head>
          <style>
        </style>
          <script src="http://code.jquery.com/jquery-latest.js"></script>
        </head>
        <body>
         <table>
         <tr>
          <td>test</td><td>test</td><td>test</td>
         </tr>
         <tr>
          <td>test</td><td>test</td><td>test</td>
         </tr>
         </table>

        <button>Empty</button>
        <script>
          $("button").click(function () {
            $("table").empty();
          });
        </script>

        </body>
        </html> 
```

# android - Monodroid 应用程序中的活动访问限制实现

> ID：10429850
> 
> 赞同：0
> 
> 时间：2012-05-03T10:49:16.123
> 
> 标签：android, xamarin.android

我有一个要求，我需要限制对 Monodroid 应用程序活动的访问。因此，我尝试了一个峰值，应用程序**IntentSayHello**将有一个访问受限的 Activity，称为**SayHelloActivity**。作为第一步，我在应用程序的**AndroidManifest.xml**中定义了权限标签，如下所示：

```
...
...
  </application>
  <permission
    android:name="intentsayhello.permission.SAYHELLO"
    android:protectionLevel="signature" android:label="@string/permlbl_restricted"
    android:description="@string/permdesc_restricted">  
  </permission>
</manifest> 
```

请注意，我使用的是**protectionLevel = signature**，这意味着使用与 IntentSayHello 相同的证书签名的任何其他应用程序只能访问受限活动。

现在我将 SayHelloActivity 编码如下：

```
 [Activity(Label = "SayHelloActivity", MainLauncher = true, Icon = "@drawable/icon", Permission = "intentsayhello.permission.SAYHELLO")]
    [IntentFilter(new string[] { "companyXYZ.intent.sayhello.MAIN" },Categories = new string[]{Intent.CategoryDefault},
        DataMimeType = "vnd.companyXYZ.say.hello/vnd.companyXYZ.activity")]
    public class SayHelloActivity : Activity
    {  
     .....
     .....
    } 
```

在此之后，我通过隐式意图调用 IntentSayHello 的 SayHelloActivity 来测试客户端应用程序，并且我得到了预期的**SecurityException 。**

***权限拒绝：从 ProcessRecord{4094f850 9126:DiffKeyHello.DiffKeyHello/ 10097}（pid=9126，uid=10097）需要intentsayhello.permission.SAYHELLO***

现在，如果我希望我的客户端应用程序能够访问受限应用程序的 SayHelloActivity，我应该使用相同的密钥库（证书）签署我的客户端应用程序，并在客户端应用程序的 AndroidManifest.xml 中提及如下：

```
...
<uses-sdk android:minSdkVersion="4" />
<uses-permission android:name="intentsayhello.permission.SAYHELLO" />
</manifest> 
```

但是当我同时执行这两个操作时，客户端应用程序仍然无法调用 SayHelloActivity 并引发相同的 SecurityException。

我想知道这个问题的方向/解决方案。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T07:07:31.967

在mono android论坛中进一步搜索，我发现另一种方法是在.csproj文件中显式添加androidmanifest.xml，如下所示：

```
<PropertyGroup>
  <AndroidManifest>Properties\AndroidManifest.xml</AndroidManifest>
</PropertyGroup> 
```

上述任何一种解决方案都有效，只是我不知道哪个/两者都是正确的做法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-09T03:49:26.520

谷歌搜索后，点击此页面： http: [//lists.ximian.com/pipermail/mono-bugs/2011-January/108218.html](http://lists.ximian.com/pipermail/mono-bugs/2011-January/108218.html)

我从这个页面中得到提示，需要将其放入客户端的**AssemblyInfo.cs**中。语法是：

```
// Add some common permissions, these can be removed if not needed 
```

**[程序集：UsesPermission("intentsayhello.permission.SAYHELLO")]**

[程序集：UsesPermission(Android.Manifest.Permission.Internet)]

从那时起它就起作用了。

# asp.net - 如何在 asp.net 中将上标应用于 BoundField

> ID：10429855
> 
> 赞同：0
> 
> 时间：2012-05-03T10:49:23.440
> 
> 标签：asp.net, superscript, boundfield

如何将上标应用于 BoundField。脚本就像

```
<fieldSet ..
    ..
    <asp:GridView...
    ..
        <Columns>
            **<asp:BoundField DataField="Price" HeaderText="Price" .../>**
        </Column>
    <asp:gridView>
</fieldSet> 
```

我想将价格列显示为“Price1”给用户。注意：在 Price1 中，1 是红色的上标。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:19:23.453

改用模板字段

```
<asp:TemplateField>
    <ItemTemplate>
        <%# Eval("Price") %><sup>1</sup>
    </ItemTemplate>
 </asp:TemplateField> 
```

**编辑**

如果您无法更改为模板字段，那么最好的办法是在加载文本后更改文本。网格视图有一个 OnLoad 事件，您可以挂钩，因此您可以在网格视图中拥有

```
<asp:GridView OnLoad="GridView_Load" 
```

然后在你的代码中你可以做这样的事情

```
public void GridView_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    {
        foreach (GridViewRow row in GridView.Rows)
        {
            row.Cells[0].Text += " <sup>1</sup>";
        }
    }
} 
```

# assembly - 汇编中的循环不起作用

> ID：10429856
> 
> 赞同：1
> 
> 时间：2012-05-03T10:49:26.170
> 
> 标签：assembly

当我尝试在 asm 中创建循环时遇到了一些问题。所以我只用循环创建了另一个代码。问题是，当我减少或增加 时`ecx`，变量会变得混乱。如果我使用没有 dec 的循环指令，它也不起作用。如何使用`ecx`to 循环？

代码

```
section .text
     global main

     extern printf
section .data
FORMAT: db "L", 10, 0 ; just to print the L 10 times
main:

     mov ecx, 10 ; start the counter in 10
     jmp runloop ; i imagine i dont need it
runloop:
     push FORMAT
     call printf
     add esp, 4
     dec ecx
     cmp ecx, 0
     jne runloop 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T10:53:07.693

`ecx`不保证在整个`printf`调用过程中保留值。请改用以下寄存器之一：`ebx`, `ebp`, `esi`, `edi`. `push`您也应该通过将选择的寄存器放入堆栈并在之后恢复它来保留它们。

# objective-c - 是否可以在编译时看到 ARC 生成的代码？

> ID：10429857
> 
> 赞同：15
> 
> 时间：2012-05-03T10:49:28.510
> 
> 标签：objective-c, xcode, automatic-ref-counting

我已阅读“摘要”部分中的[过渡到 ARC 发行说明](http://developer.apple.com/library/mac/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html)。他们告诉：

> ARC 通过在编译时添加代码来确保对象在必要时存在，但不再存在。从概念上讲，它通过为您添加适当的内存管理调用来遵循与手动引用计数（在高级内存管理编程指南中描述）相同的内存管理约定。
> 
> 为了让编译器生成正确的代码

我想知道 ARC 纠正了我们的代码的结果是什么。

**我的问题：**我们能看到变化吗？**（在 alloc 、 retain 、assign 或 release 方面。不是汇编级别！）**

**原因：**因为我觉得在没有ARC模式的老传统开发中能看到最佳实践的代码很好。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-05-03T15:15:38.600

clang 中的 ARC 不能通过将代码从 ObjC 重写为 ObjC 来工作，而是在代码生成期间发出额外的保留/释放 LLVM 位码。这意味着，如果不进入 LLVM IR / 汇编级别，就不可能知道编译器如何“修复”它。

* * *

> 如果 ARC 如您所说的那样发出 LLVM 位码。它是为了在编译过程中使用更少的时间而制作的吗？（不太复杂的 ObjC 代码，更少的头文件？）

如果编译器可以减少通过代码的次数总是更好的。

* * *

> 你能告诉我一些在汇编级别显示代码的示例或实用程序吗？

要获取汇编代码，您可以

1.  直接从编译器生成程序集。在命令行中，`-S`调用编译器时添加标志。结果是一个`.S`包含汇编代码的文件。在 Xcode 项目中，打开源代码文件，然后转到**Product**（在菜单栏上）→ **Generate Output** → **Assembly File**。

2.  生成目标文件，然后反汇编它。内置命令`otool -tvV <file>`可以执行反汇编，并且有[otx](http://otx.osxninja.com/)（免费）或[IDA](http://www.hex-rays.com/products/ida/index.shtml)（免费评估）等高级工具。

我更喜欢路线 2，因为它产生的垃圾更少，并且可以配置反汇编工具以产生更多有用的信息。无论如何，无论使用哪种方法，您都需要能够阅读汇编代码。

以这段代码为例：

```
- (BOOL)application:(UIApplication*)application 
        didFinishLaunchingWithOptions:(NSDictionary*)launchOptions
{
   self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
   self.window.backgroundColor = [UIColor whiteColor];
   [self.window makeKeyAndVisible];
   return YES;
} 
```

编译后将生成以下程序集（使用 IDA 分析）：

```
-[SomeAppDelegate 应用程序：didFinishLaunchingWithOptions:]：
    推 {r4-r7,lr}
    添加 r7, sp, #0xC
    str.w r8, [sp,-#0x4]！
    子 sp, sp, #0x18
    movw r1, #(0x343c - 0x2574) ; @选择器（分配）
    移动 r8, r0
    movt.w r1, #0
    mov r0, (0x3464 - 0x2576) ; _OBJC_CLASS_$_UIWindow
    添加 r1, 电脑
    添加 r0, 个人计算机
    ldr r1, [r1]
    ldr r0, [r0]
    blx _objc_msgSend
    移动 r1, (0x3440 - 0x258e) ; @选择器（主屏幕）
    移动 r6, r0
    movw r0, #(0x3468 - 0x2594) ; _OBJC_CLASS_$_UIScreen
    添加 r1, 电脑
    movt.w r0, #0
    添加 r0, 个人计算机
    ldr r1, [r1]
    ldr r0, [r0]
    blx _objc_msgSend
    移动 r7, r7
    blx _objc_retainAutoreleasedReturnValue
    移动 r5, r0
    cbz r5, L25ba
    movw r0, #(0x3444 - 0x25b2) ; @选择器（边界）
    移动 r1, r5
    movt.w r0, #0
    添加 r0, 个人计算机
    ldr r2, [r0]
    添加 r0, sp, #0x8
    blx _objc_msgSend_stret
    b L25c4

L25ba:
    添加 r0, sp, #0x8
    vmov.i32 q8, #0x80
    vstmia r0, {d16-d17}

L25c4：
    mov r1, (0x3448 - 0x25d2) ; @selector(initWithFrame:)
    ldr r0, [sp,#0x10]
    添加 r1, 电脑
    ldr r2, [sp,#0x8]
    ldr r3, [sp,#0xc]
    ldr r4, [sp,#0x14]
    stmea.w sp, {r0,r4}
    移动 r0, r6
    ldr r1, [r1]
    blx _objc_msgSend
    移动 r4, r0
    mov r0, (0x344c - 0x25F2) ; @selector(setWindow:)
    移动 r2, r4
    添加 r0, 个人计算机
    ldr r1, [r0]
    移动 r0, r8
    blx _objc_msgSend
    移动 r0, r4
    blx _objc_release
    移动 r0, r5
    blx _objc_release
    mov r0, (0x3450 - 0x2610) ; @选择器（窗口）
    添加 r0, 个人计算机
    ldr r5, [r0]
    移动 r0, r8
    移动 r1, r5
    blx _objc_msgSend
    移动 r7, r7
    blx _objc_retainAutoreleasedReturnValue
    移动 r1，（0x3454 - 0x2630）；@选择器（白色）
    移动 r6, r0
    movw r0, #(0x346C - 0x2636) ; _OBJC_CLASS_$_UIColor
    添加 r1, 电脑
    movt.w r0, #0
    添加 r0, 个人计算机
    ldr r1, [r1]
    ldr r0, [r0]
    blx _objc_msgSend
    移动 r7, r7
    blx _objc_retainAutoreleasedReturnValue
    移动 r4, r0
    mov r0, (0x3458 - 0x2652) ; @selector(setBackgroundColor:)
    移动 r2, r4
    添加 r0, 个人计算机
    ldr r1, [r0]
    移动 r0, r6
    blx _objc_msgSend
    移动 r0, r4
    blx _objc_release
    移动 r0, r6
    blx _objc_release
    移动 r0, r8
    移动 r1, r5
    blx _objc_msgSend
    移动 r7, r7
    blx _objc_retainAutoreleasedReturnValue
    移动 r4, r0
    mov r0, (0x345C - 0x2680) ; @selector(makeKeyAndVisible)
    添加 r0, 个人计算机
    ldr r1, [r0]
    移动 r0, r4
    blx _objc_msgSend
    移动 r0, r4
    blx _objc_release
    移动 r0, #1
    添加 sp, sp, #0x18
    ldr.w r8, [sp], #4
    弹出 {r4-r7,pc}

```

不细说，你可以看到有很多`_objc_release`和`_objc_retainAutoreleasedReturnValue`。**这些是 ARC 在代码生成期间插入的内容。**手动反编译，我们会得到：

```
UIScreen* r5 = objc_retainAutoreleasedReturnValue([UIScreen mainScreen]);
CGRect sp8 = r5 != nil ? [r5 bounds] : CGRectZero;
UIWindow* r4 = [[UIWindow alloc] initWithFrame:sp8];
[self setWindow:r4];
objc_release(r4);
objc_release(r5);

UIWindow* r6a = objc_retainAutoreleasedReturnValue([self window])
UIColor* r4a = objc_retainAutoreleasedReturnValue([UIColor whiteColor])
[r6a setBackgroundColor:r4a];
objc_release(r4a);
objc_release(r6a);

UIWindow* r4b = objc_retainAutoreleasedReturnValue([self window])
[r4b makeKeyAndVisible];
objc_release(r4b);

return 1; 
```

这与[@c roald](https://stackoverflow.com/a/10564459/)的链接描述的相同。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-12T14:09:30.093

Mike Ash 在这里对 ARC 实现进行了非常有启发性的讨论：http: [//www.mikeash.com/pyblog/friday-qa-2011-09-30-automatic-reference-counting.html](http://www.mikeash.com/pyblog/friday-qa-2011-09-30-automatic-reference-counting.html)

他在插入 C 函数调用（objc_retain()、objc_release()、objc_retainAutoreleaseReturnValue() 和其他一些函数调用的级别上讨论了它，如果这对你有帮助的话。这样写，编译器可以使用尾调用优化来消除不必要的步骤。

因此，简短的回答是，ARC 没有使用我们在旧版本的 Objecive C 中使用的相同 [retain]/[release] 方法，因此看到 ARC 预处理的代码不一定会指导您如何自己做。

ARC 在编译器中作为预处理步骤实现并不罕见——我相信 Objective C 的许多特性都是以这种方式实现的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-12T16:53:57.733

不，如果不了解 LLVM 的汇编级详细信息，您将无法了解此类详细信息。

# allegro5 - C ++ Allegro 5 - 在初始化中重新缩放图像

> ID：10429858
> 
> 赞同：1
> 
> 时间：2012-05-03T10:49:38.223
> 
> 标签：allegro5

如何在游戏的初始化部分使用 allegro5 调整初始化图像的大小？

```
ALLEGRO_BITMAP *player = NULL;
player = al_load_bitmap("st.png");
//something
al_draw_bitmap(player, player_position_x, player_position_y, 0); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T23:19:45.887

而不是`al_draw_bitmap()`使用：

```
void al_draw_scaled_bitmap(ALLEGRO_BITMAP *bitmap,
   float sx, float sy, float sw, float sh,
   float dx, float dy, float dw, float dh, int flags); 
```

# java - 具有创建该对象实例的方法的 Java 构造函数

> ID：10429869
> 
> 赞同：0
> 
> 时间：2012-05-03T10:50:52.613
> 
> 标签：java, xml, constructor, xstream

我想创建将 xml 作为字符串的构造函数，并且所有变量都将从中填充。该 xml 是由 XStream 创建的，所以我认为这样的东西会起作用，但不知道要在左侧添加什么：

```
 public xmlpacket(String xml)
    {
        XStream xstream = new XStream(new DomDriver());
       .... =  (xmlpacket)xstream.fromXML(xml);
    } 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:59:07.893

您可以使用静态方法。

```
public static XMLPacket unmarshall(String xml) {
    XStream xstream = new XStream(new DomDriver());

    return (XMLPacket)xstream.fromXML(xml);

} 
```

请注意我是如何重命名您的课程的。现在它遵守 Java 命名约定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T11:04:32.097

如果您已经创建了所需的类和这些类的 xstream 别名，那么

```
XMLPacket packet = (XMLPacket)xstream.fromXML(xml); 
```

但是您可能应该为此创建一个方法，而不是在构造函数中执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T11:04:11.330

XStream 将为您创建对象的实例。因此，除非您想将 XStream 创建的数据包的所有属性复制到您正在构建的数据包中，否则在构造函数中这样做是没有意义的。改为创建工厂方法：

```
public static XmlPacket fromXml(String xml) {
    XStream xstream = new XStream(new DomDriver());
    return (XmlPacket) xstream.fromXML(xml);
} 
```

# javascript - 获取 jQuery 中所有 .on() 绑定的事件

> ID：10429871
> 
> 赞同：2
> 
> 时间：2012-05-03T10:50:57.527
> 
> 标签：javascript, jquery

我有一个页面通过 Ajax 加载一些内容，并且还通过`.on()`方法将事件绑定到新的 comming 元素。

无论如何要获得所有绑定事件`<div class="inner">`吗？**加载完所有内容后**，我`$("div.inner").data('events')`在控制台中尝试过，但除了.**`undefined`**

 **html:

```
<div id="out"><p></p></div>​ 
```

JavaScript：（不是真正的ajax，只是一个模拟）

```
var innDiv = '<div class="inner">inner</div>' +
'<div class="inner">inner</div>' +
'<div class="inner">inner</div>';

$(document).on('click','.inner', function(){$(this).toggleClass("green")});

setTimeout('$("#out").append(innDiv)',2000);​ 
```

这是[jsfiddle 代码](http://jsfiddle.net/vcX7k/)演示。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T07:37:33.683

从 jQuery 1.8 开始， $(element).data("events") 被移除。但是出于调试目的，使用`$._data(element, "events")`可以获取元素上的事件绑定。由于它不是公共接口，因此将来可能无法使用。

[在此处](http://blog.jquery.com/2012/08/09/jquery-1-8-released/)查看 jQuery 发布日志。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-05-03T10:55:38.050

由于您将事件绑定到`document`元素，请尝试以下操作：

```
$(document).data("events") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T10:57:02.073

对不起，如果是现场活动的话，我很抱歉。

```
$('.target').live('click', function foo(){  }); 
```

或者

```
$('containerObj').on('click', 'target', function foo(){  }); 
```

您可能必须检查要绑定实时事件的对象的事件数据。

如果它在文档级别，您可能必须检查文档对象的事件或事件绑定到的目标容器。IE

从您所做的元素中删除实时附加事件。

```
$('containerObj').off('click', 'target', function foo(){  }); 
```

希望能帮助到你。**

# android - 我可以跳过第一个活动吗？

> ID：10429875
> 
> 赞同：0
> 
> 时间：2012-05-03T10:51:02.687
> 
> 标签：android, android-activity

我的代码是

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        try {
            Log.d("response", "starting city connection");
            HttpPost httppost = new HttpPost(
                    "http://10.0.2.2/wic3/wic2/mobile/verifyUser");

            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            sessionResponse = SignUpActivity.httpclient.execute(httppost,
                    responseHandler);
            Log.d("session response", "" + sessionResponse);

            if (sessionResponse.equals("true")) {
                Intent intent = new Intent(SignUpActivity.this,
                        FeedListViewActivity.class);
                startActivity(intent);
            }

        } catch (Exception e) {
            Log.e("error", "Error in http connection" + e.toString());
        } 
```

......

我的问题是我可以跳过第一个活动（或屏幕）并根据任何条件直接加载其他屏幕吗???如果会话已经存在，我的意图是加载主页（跳过登录页面）......在我的情况 sessionResponse 是真的，但我仍然得到登录页面

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T10:54:06.710

是的，您可以不要使用 setContentView 设置视图并检查条件并导航到所需的活动并完成您的第一个活动。但是，如果您的 Condition 为 false，您也必须处理它，否则将不会显示任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:36:33.523

而不是下面的代码

```
Intent intent = new Intent(SignUpActivity.this,FeedListViewActivity.class);  
startActivity(intent); 
```

简单地说`setContentView()`。`setContentView()`是将android中的屏幕显示到用户界面的方法。如果您不调用此方法，则不会显示任何内容。您只会看到一个空白屏幕。修改你上面的代码如下

```
if (sessionResponse.equals("true")) 
     setContentView(R.layout.screen1);
else  
     setContentView(R.layout.screen2); 
```

# jquery - 如何从 jsTree 隐藏根节点？

> ID：10429876
> 
> 赞同：5
> 
> 时间：2012-05-03T10:51:08.913
> 
> 标签：jquery, jquery-ui, jquery-selectors, jstree

[#1] 我想在 jstree 中隐藏根节点？

我将几个子根节点附加到**“根”**节点，所以我想从 jsTree 隐藏根节点？

![在此处输入图像描述](../Images/f8ed638ca98e209821da4800c1e14dfd.png)

应用以下 CSS 隐藏根节点后，IE8 中出现了 Look n feel 问题：

```
 $("ul:contains('Root')").css('position','relative');
    $("ul:contains('Root')").css('top','-20px');
    $("ul:contains('Root')").css('left','-20px'); 
```

![IE8中的CSS问题隐藏根节点](../Images/a12850dc44b6a640d83392714b671db3.png)

[#2] 在以下**核心**插件中，

我为 Root 节点提供了硬编码值（**Root_ID**）以打开 Root 节点最初，它工作正常

```
"core" : { initially_open" : [ "Root_ID" ] } 
```

根节点 ID 可能会有所不同 RootID、RID、Root_id、R_ID .....因为我们提供不同的 xml 响应。

伪代码类似于：

```
"core" : { initially_open" : [ **1st_node_of_Tree_like_(ul > li:first)_OR_$(".jstree-last").first()** ] } 
```

我怎样才能实现这两件事？

在此问题上的任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-12-30T22:11:24.667

这有点违反直觉，但创建没有显式根节点的树的最佳方法是在数据中不提供任何根节点，并使根节点的所有子节点都有父节点“#”。jstree 将呈现一个具有多个根的顶级子级的树。避免任何试图隐藏根的混乱。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T17:52:28.853

**我找到了非常简单的答案:)**

```
$("#treeViewDiv").bind("loaded.jstree", 
 function (event, data) {
       // To hide root nodes text
       $("a:contains('Root')").css("visibility","hidden")  
       // Need to find other way to hide rootNodeName Any1 knows ?

       // To hide - icon
       $(".jstree-last .jstree-icon").first().hide()
  }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T11:40:16.127

尝试：

```
$("a:contains('Root')").css("visibility","hidden") 
```

或者

```
$("a:contains('Root')").css("display","none") 
```

也许jsTree中还有一个选项，但我不熟悉那个lib。

**更新：**

假设您的 jsTree 在某种 div 中，请尝试移动它直到 Root Element 被隐藏：

```
$("ul:contains('Root')").css('position','relative');
$("ul:contains('Root')").css('top','-20px');
$("ul:contains('Root')").css('left','-20px'); 
```

您可能必须编辑 css 选择器（`"ul:contains('Root')"`）才能获得正确的`ul`. 此外，您可能想要编辑您移动的数量`top`和`left`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T09:39:55.663

对我来说，另一个有效的解决方案（至少在 Chrome 和 Firefox 中）是：

```
#root>ins, #root>a{
    display: none;
}

ul>#root{
    position: relative;
    /*top: -20px;*/
    left: -20px;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-05-05T14:52:04.470

```
$("#yourTreeDiv").on("loaded.jstree", function(e, data) {
    $("#yourTreeDiv > ul > li > i.jstree-icon").remove();
    $("#yourTreeDiv > ul > li > a.jstree-anchor").remove();
}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-07-16T12:34:56.860

在 JS 中：

```
.on('after_open.jstree', function(e, data){
        var a = $('#file_tree').find('i');
        $(a[0]).hide();
        $(a[1]).hide();
    }) 
```

在 CSS 中：

```
.jstree {
  display: inline-block;
  padding-right: 100%;
  margin-top: -20px;
  margin-left: -20px;
} 
```

# c++ - 远程网络服务器和树视图上的文件夹结构导航

> ID：10429880
> 
> 赞同：1
> 
> 时间：2012-05-03T10:51:24.387
> 
> 标签：c++, qt

我想要一些关于如何为远程文件夹导航创建树视图和模型的建议。我已经有一个方法（我们称之为**Navigate**），它以路径作为参数并返回子目录列表。我从[这里](http://doc-snapshot.qt-project.org/4.8/itemviews-simpletreemodel.html)的示例开始，这让我朝着正确的方向前进。

不过我有一些问题：首先，我想要延迟加载，即我只在要导航的根路径上调用 Navigate 函数，然后当用户选择一个文件夹时，我在该路径上再次调用 Navigate 函数. 这种方法的唯一问题是我必须在一个文件夹上单击两次才能使其展开，我猜是因为第一次该节点中还没有任何子节点（我还没有通过导航更新子列表）；这不是一个大问题，至少目前是这样。

问题是这种方法似乎只适用于前两个级别：我得到了根节点的列表，我可以从这个列表中得到任何子元素的列表，但是第二个列表没有显示，即使在节点本身上调用数据函数！此时我在 中遇到异常`QHashData::allocateNode`，但我对此一无所知，因为我无法调试 Qt 库。

你对此有什么想法吗？替代方法？谢谢！

# php - 从 php myadmin 数据库中获取数据时显示一条短信

> ID：10429886
> 
> 赞同：0
> 
> 时间：2012-05-03T10:51:56.383
> 
> 标签：php, javascript, jquery, html, ajax

在我的 php 网站中，我需要在从我的代码在 Mozilla 中运行的数据库中获取数据时显示一条文本消息。但它在 IE 8 中不起作用。我搜索了很多，但没有结果。看我的代码

```
<script type="text/javascript">
function LoadData(zone,city,cat,datein,dateout,room,adult,child,form,searchhot){
$("#LoadingMsg").show(1000);
$("body").load(hotel-search?frmZone='+zone+'&frm_city='+city+'&frm_category='+cat+'&datepickerIn='+datein+'&datepickerOut='+dateout+'&frm_room='+room+'&frm_adult='+adult+'&frm_child='+child+'&formpage='+form+'&searchHotel=1', function(){
$("#LoadingMsg").hide(1000);
});
}
</script>

<body onload="javascript:LoadData('<?=$_REQUEST['frmZone']?>','<?=$_REQUEST['frm_city']?>','<?=$_REQUEST['frm_category']?>','<?=$_REQUEST['datepickerIn']?>','<?=$_REQUEST['datepickerOut']?>','<?=$_REQUEST['frm_room']?>','<?=$_REQUEST['frm_adult']?>','<?=$_REQUEST['frm_child']?>','<?=$_REQUEST['formpage']?>','<?=$_REQUEST['searchHotel']?>')">

<div id="LoadingMsg"> <h2>Almost there...</h2><br />
    </div> 
```

有人知道吗？

请回复

提前致谢

# mysql - Mysql加入多个总计 - 使查询高效

> ID：10429887
> 
> 赞同：2
> 
> 时间：2012-05-03T10:52:00.320
> 
> 标签：mysql, sql, performance, join

我正在为员工创建一个打卡/打卡系统。

有一个 tbl_clockins 包含每个打卡/打卡会话的记录，其中包含有关每个会话是否支付的信息、员工在该会话中迟到了多长时间或他们加班了多少等信息。

还有另一个名为 tbl_user_work_settings 的表，经理可以在其中设置员工休假的天数，或因病休假等。

我正在创建一些报告，其中我需要每个员工的总数，例如每个员工在给定日期范围内作为假期的总天数。我有一个很长的查询，它实际上获取了所有必需的信息，但它很大而且效率很低。有没有办法让它更小/更高效？任何帮助表示赞赏。

```
// get total days worked, unpaid days, bank holidays, holidays, sicknesses
// and absences within given date range for given users            
$sql = "SELECT us.username, daysWorked, secondsWorked,
            unpaidDays, bankHolidays, holidays, sicknesses, absences
FROM
  (SELECT username FROM users WHERE clockin_valid='1') us
  LEFT JOIN (
    SELECT   username, selectedDate, count(isUnpaid) AS unpaidDays
    FROM     tbl_user_work_settings
    WHERE    isUnpaid = '1'
         AND selectedDate>='$startDate'
         AND selectedDate<='$endDate'
    GROUP BY username
  ) u ON us.username=u.username
  LEFT JOIN (
    SELECT   username, count(isBankHoliday) AS bankHolidays
    FROM     tbl_user_work_settings
    WHERE    isBankHoliday='1'
         AND selectedDate>='$startDate'
         AND selectedDate<='$endDate'
    GROUP BY username
  ) bh ON us.username=bh.username
  LEFT JOIN (
    SELECT   username, count(isHoliday) AS holidays
    FROM     tbl_user_work_settings
    WHERE    isHoliday='1'
         AND selectedDate>='$startDate'
         AND selectedDate<='$endDate'
    GROUP BY username
  ) h ON us.username=h.username
  LEFT JOIN (
    SELECT   username, count(isSickness) AS sicknesses
    FROM     tbl_user_work_settings
    WHERE    isSickness='1'
         AND selectedDate>='$startDate'
         AND selectedDate<='$endDate'
    GROUP BY username
  ) s ON us.username=s.username
  LEFT JOIN (
    SELECT   username, count(isOtherAbsence) AS absences
    FROM     tbl_user_work_settings
    WHERE    isOtherAbsence='1'
         AND selectedDate>='$startDate'
         AND selectedDate<='$endDate'
    GROUP BY username
  ) a ON us.username=a.username
  LEFT JOIN (
    SELECT   username, count(DISTINCT DATE(in_time)) AS daysWorked,
                SUM(seconds_duration) AS secondsWorked
    FROM     tbl_clockins
    WHERE    DATE(in_time)>='$startDate'
         AND DATE(in_time)<='$endDate'
    GROUP BY username
  ) dw ON us.username=dw.username";

if(count($selectedUsers)>0)
  $sql .= " WHERE (us.username='"
       .  implode("' OR us.username='", $selectedUsers)."')";

$sql .= " ORDER BY us.username ASC"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:05:23.803

您可以`SUM(condition)`在表的单次使用中使用`tbl_user_work_settings`：

```
// get total days worked, unpaid days, bank holidays, holidays, sicknesses
// and absences within given date range for given users            
$sql = "
  SELECT      users.username,
              SUM(ws.isUnpaid      ='1')       AS unpaidDays,
              SUM(ws.isBankHoliday ='1')       AS bankHolidays,
              SUM(ws.isHoliday     ='1')       AS holidays,
              SUM(ws.isSickness    ='1')       AS sicknesses,
              SUM(ws.isOtherAbsence='1')       AS absences,
              COUNT(DISTINCT DATE(cl.in_time)) AS daysWorked,
              SUM(cl.seconds_duration)         AS secondsWorked
  FROM        users
    LEFT JOIN tbl_user_work_settings           AS ws
           ON ws.username = users.username
          AND ws.selectedDate  BETWEEN '$startDate' AND '$endDate'
    LEFT JOIN tbl_clockins                     AS cl
           ON cl.username = users.username
          AND DATE(cl.in_time) BETWEEN '$startDate' AND '$endDate'
  WHERE       users.clockin_valid='1'";

if(count($selectedUsers)>0) $sql .= "
          AND users.username IN ('" . implode("','", $selectedUsers) . "')";

$sql .= "
  GROUP BY    users.username
  ORDER BY    users.username ASC"; 
```

顺便说一句（也许更多的是为了其他读者的利益），我**真的**希望您通过在将 PHP 变量插入 SQL 之前正确转义它们来避免 SQL 注入攻击。理想情况下，您根本不应该这样做，而是将这些变量作为准备好的语句的参数传递给 MySQL（不会针对 SQL 进行评估）：阅读有关[Bobby Tables](http://bobby-tables.com)的更多信息。

另外，顺便说一句，您为什么将整数类型作为字符串处理（通过将它们括在单引号字符中）？这是不必要的，而且在 MySQL 中必须执行不必要的类型转换，这是一种资源浪费。事实上，如果各种`isUnpaid`etc. 列都是`0`/ `1`，您可以更改上面的内容以删除相等测试并直接使用`SUM(ws.isUnpaid)`etc.。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:08:10.233

将要连接的每个表放入临时表...然后在临时表的可连接字段上创建索引...并使用临时表进行查询。

例子：

```
SELECT   username, selectedDate, count(isUnpaid) AS unpaidDays
INTO     #TempTable1
FROM     tbl_user_work_settings
WHERE    isUnpaid = '1'
     AND selectedDate>='$startDate'
     AND selectedDate<='$endDate'
GROUP BY username
create clustered index ix1 on #TempTable1 (username) 
```

# android - 当我插入数据库时 出现 NullPointerException (android)

> ID：10429888
> 
> 赞同：0
> 
> 时间：2012-05-03T10:52:02.923
> 
> 标签：android, database, insert

我有一些数据要写入数据库（三个字符串）；我有一个**私有类 DBHelper 扩展 SQLiteOpenHelper** 并且我有**dataBase = dbHelper.getWritableDatabase();** 当我执行 dataBase.insert() 时，我有一个 nullPointerException。

我在调试器中检查了我的数据以进行写入，它们不等于 null；

数据库助手：

```
private class DBHelper extends SQLiteOpenHelper { //for write and read data from DB

static final String GROUPPS = "groupps";
static final String IMPORTANCE = "importance";
static final String NAME_OF_TABLE = "Person";
static final String PERSON_KEY = "perskey";

    private static final String MY_QUERY = "CREATE TABLE " + NAME_OF_TABLE + " ( " +
            PERSON_KEY + " TEXT, " +
            GROUPPPS + " TEXT, " +
            IMPORTANCE + " TEXT);";

    public DBHelper(Context context) {
        // constructor of superclass
        super(context, "MyDBB", null, 2);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        Log.d("", "--- onCreate database ---");
        db.execSQL(MY_QUERY);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

    }
} 
```

我在数据库上写入数据的方法：

```
 public void writeDataToDB(ArrayList<Person> arrayList) {

    contentValues = new ContentValues();
    dbHelper = new DBHelper(activity.getApplicationContext());
    dataBase = dbHelper.getWritableDatabase();

    for (int i = 0; i < arrayList.size(); i++) {

        contentValues.put(PERSON_KEY, arrayList.get(i).getKey());
        contentValues.put(GROUPPPS, arrayList.get(i).getGroup());
        contentValues.put(IMPORTANCE, String.valueOf(arrayList.get(i).isImportant()));

        Log.e("writeDataToDB", "Start inserting " + contentValues.toString());
        long rowID = dataBase.insert(NAME_OF_TABLE, null, contentValues);
        Log.e("writeDataToDB - ", "Value inserted, rowID = " + rowID);
        contentValues.clear();
    }

} 
```

在我的方法中，我在行有异常： long rowID = dataBase.insert(NAME_OF_TABLE, null, contentValues);
和 rowID = -1 这意味着 - 东西不对；

和我的 LogCat：

```
Error inserting groupp=Withoutgroup importance=false perskey=0r2-2B43414D272B4D16
    android.database.sqlite.SQLiteException: table Persons has no column named groupp: , while compiling: INSERT INTO Persons(groupp,importance,perskey) VALUES (?,?,?) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:03:36.767

[Group](http://sqlite.org/lang_select.html)是一个关键字，因此如果您的表将此作为列名，那么这可能是个问题。看

```
group=Without group 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T10:57:15.150

“重要性=假组=没有组 perskey=0r114343434343434343434343434343434343434343434343”

你必须把Without group放在单引号内，像这样：`'Without group'`，否则SQLite会认为第二个词是SQL查询的一部分。

# asp.net - PasswordRecovery 控件中的强制密码更改

> ID：10429889
> 
> 赞同：2
> 
> 时间：2012-05-03T10:52:10.563
> 
> 标签：asp.net, login

我在 asp.net 中使用密码恢复控制。此控件使用他的密码向用户发送电子邮件，但我想在他再次登录时强制他更改密码。

如果你知道请帮助我。提前致谢。

# php - Frontpage幻灯片在Firefox中不起作用

> ID：10429891
> 
> 赞同：0
> 
> 时间：2012-05-03T10:52:19.660
> 
> 标签：php, css, joomla

有没有人不知道为什么首页幻灯片放映 joomla 组件在本网站的 firefox 中不起作用

[http://east-belfast.wsini.com/](http://east-belfast.wsini.com/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:51:46.947

这很可能是 Javascript 冲突，因为 Mootools 和 JQuery 并排运行，不是最佳组合！我自己在 Joomla 中的脚本多次看到这个问题。您可以尝试 Jquery 包含器插件，它声称可以解决任何 javascript 问题：[http ://bit.ly/aQ5tap](http://bit.ly/aQ5tap)

希望这对你有用！

# dynamic - 在 Primefaces 中以编程方式创建命令按钮

> ID：10429893
> 
> 赞同：2
> 
> 时间：2012-05-03T10:52:25.727
> 
> 标签：dynamic, jsf-2, components, primefaces

我正在尝试使用输入文本和命令按钮创建一个动态表单。一切正常。但是当我单击命令按钮时，永远不会调用动作侦听器。请建议我做错了什么，或者这是否是 PF 或 Mojarra 的错误。代码如下

```
panel = new Panel();
panel.setHeader("Test");

InputText text = new InputText();

final String binding = "#{roleCreateForm.role.name}";

text.setValueExpression("value",
           createValueExpression(binding, String.class));

panel.getChildren().add(text);

CommandButton button = new CommandButton();
button.setValue("Save");

MethodExpression me = createMethodExpression("#{roleCreateForm.save}");

button.addActionListener(new MethodExpressionActionListener(me));

panel.getChildren().add(button); 
```

createXXXExpression 也在下面

```
private MethodExpression createMethodExpression(String action) {
  final Class<?>[] paramTypes = new Class<?>[0];

  MethodExpression methodExpression = getExpressionFactory()
    .createMethodExpression(getELContext(),action, null, paramTypes);

  return methodExpression;
}

private ValueExpression createValueExpression(String binding,
     Class<String> clazz) {
  final ValueExpression ve = getExpressionFactory()
        .createValueExpression(getELContext(), binding, String.class);
  return ve;
}

public static ELContext getELContext() {
  return FacesContext.getCurrentInstance().getELContext();
}

public static ExpressionFactory getExpressionFactory() {
  return getApplication().getExpressionFactory();
}

public static Application getApplication() {
  return FacesContext.getCurrentInstance().getApplication();
} 
```

我的表单豆在下面

```
public void save() {
  logger.info("Saving role - {}" , role);
} 
```

我正在使用 Primefaces 3.2、Mojarra 2.1.7、Tomcat 7、JDK 6、Ubuntu 11

**这是我修改后的代码** 是的，我已经看到您指出这是常见错误。但这是我修改后的代码。这也不起作用。

```
public Panel getPanel() {
  if (panel == null) {
    panel = new Panel();
    panel.setHeader("Test");
    panel.setId("dynapanel");

    InputText text = new InputText();
    text.setId("dynatext");

    final String binding = "#{roleCreateForm.role.name}";

    text.setValueExpression("value", createValueExpression(binding, String.class));

    panel.getChildren().add(text);

    CommandButton button = new CommandButton();
    button.setValue("Save");

    MethodExpression me = getExpressionFactory().createMethodExpression(getELContext(),    "#{roleCreateForm.save}", void.class, new Class[0]);
    AjaxBehavior ajaxBehavior = new AjaxBehavior();
    //ajaxBehavior.setListener( me );
    ajaxBehavior.addAjaxBehaviorListener( new    AjaxBehaviorListenerImpl( me ) );
    button.addClientBehavior( "submit", ajaxBehavior);

    panel.getChildren().add(button);

  }
  return panel;
} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-05-04T11:16:16.933

据我记得，如果你想在你的支持 bean 中调用一个方法，使用 MethodExpression 作为你的 AjaxBehaviour 的监听器：

```
 AjaxBehavior ab1 = new AjaxBehavior();
        ExpressionFactory ef = ctx.getApplication().getExpressionFactory();
        MethodExpression me1 = ef.createMethodExpression(ctx.getELContext(),
                                     expression,//Your ELExpression #{roleCreateForm.save}
                                     expectedReturnType, //In your case null
                                     expectedParamTypes); //If you receive parameters put new Class[]{Object.class});
        ab1.setListener(me1);
        button.addClientBehavior( "submit", ab1); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-08-07T08:56:18.900

```
CommandButton btn = ((CommandButton) FacesContext.getCurrentInstance().getViewRoot().findComponent("full id of button"));

try{
    FacesContext context = FacesContextWrapper.getCurrentInstance();
    MethodExpressionActionListener methodExpression = new MethodExpressionActionListener(context.getApplication().getExpressionFactory()
                .createMethodExpression(context.getELContext(),"#{bean.method}", null, new Class[] {ActionEvent.class}));

    btn.addActionListener(methodExpression);
}catch(Exception exc){
    exc.printStackTrace();
} 
```

和 createMethodExpression ：

```
public static MethodExpression createMethodExpression(String expression, Class<?> returnType, Class<?>... parameterTypes) {
    FacesContext facesContext = FacesContext.getCurrentInstance();
    return facesContext.getApplication().getExpressionFactory().createMethodExpression(
        facesContext.getELContext(), expression, returnType, parameterTypes);
} 
```

这对我有用；）

# python - 在 Django admin 中删除用户时调用 Python 对象时超出最大递归深度的运行时错误

> ID：10429901
> 
> 赞同：0
> 
> 时间：2012-05-03T10:52:54.047
> 
> 标签：python, django, django-admin

在我的开发服务器上，我试图删除管理员中的用户，但出现此错误：

```
RuntimeError maximum recursion depth exceeded while calling a Python object 
```

直到几天前，它一直运行良好。我正在使用 Django 1.3.1。当我读到有些不适合开发服务器时，我尝试了各种浏览器。我不记得改变了应用程序中的视图以外的任何内容，与用户无关。几天前我更新到了最新版本的 django-social-auth。除此之外，我对这里发生的事情一无所知！有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-06T01:42:59.750

我是 django 和 django-social-auth 的新手，只是阅读文档。这可以描述你的问题吗？（从[这里](http://django-social-auth.readthedocs.org/en/latest/miscellaneous.html "django-social-auth 文档")）：

> 自定义用户模型 如果定义自定义用户模型，请不要从任何最终会从定义用户类的 models.py 导入的 models.py 导入 social_auth，否则会导致项目因递归导入而失败，因为 social_auth 使用 get_model()检索您的用户。

# c++ - 为什么会发生 QEvent::ShortcutOverride 事件？

> ID：10429908
> 
> 赞同：3
> 
> 时间：2012-05-03T10:53:13.277
> 
> 标签：c++, qt, user-interface, event-handling

我有一个安装了事件过滤器的 QMainWindow。在我打开和关闭 QDialog 后，键盘箭头键没有响应，因为 QMainWindow 只接收 ShortcutOverride 事件而不是 KeyPress 事件。

当我更改 QMainWindow 的事件过滤器以处理 ShortcutOverride 事件时，我得到了一个奇怪的行为，因为在我的程序中，每个按键事件之前都有两个快捷方式覆盖事件（为什么？？）。

这不起作用 - 事件被多次处理：

```
bool eventFilter(QObject *, QEvent *event) {
  if(type == QEvent::KeyPress || type == QEvent::ShortcutOverride) {
    QKeyEvent *keyEvent = static_cast<QKeyEvent *>(event);

    switch(keyEvent->key()) {
    case Qt::Key_Up:
    case Qt::Key_Down:
    case Qt::Key_Left:
    case Qt::Key_Right:
      // Do something here
      break;
    default:
      break;
    }

    return true;
  }

  return false;
} 
```

为什么会这样？这些 ShortcutOverride 事件从何而来？

## 编辑：

事实证明，当 QDialog 打开时 QMainwindow 失去焦点，并且在 QDialog 关闭时永远不会重新获得焦点。我在 QMainwindow 的 eventFilter 中使用了 setFocus() ，它似乎可以解决问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-17T21:13:11.550

失去焦点正是对话框打开后没有收到任何键盘事件的原因。您建议的解决方案可能是解决此问题的最佳方法。

至于 ShortcutOverride 事件，它们在每次按键时都会出现，因为任何键或键组合都可以注册为快捷方式。如果需要，此事件为您提供取消快捷方式处理的选项。当引擎还不知道按下的键是否将用作快捷方式时，必须尽早处理它。因此，为“以防万一”的所有按键生成事件。您可以在这里阅读更多内容：[https ://wiki.qt.io/ShortcutOverride](https://wiki.qt.io/ShortcutOverride)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T10:59:52.353

当孩子按下按键时会发生这种情况。它用于覆盖快捷键处理（QKeyEvent）。

参考[http://qt-project.org/doc/qt-4.8/qevent.html#Type-enum](http://qt-project.org/doc/qt-4.8/qevent.html#Type-enum)

# mysql - mysql复制是如何工作的？

> ID：10429916
> 
> 赞同：-1
> 
> 时间：2012-05-03T10:53:48.727
> 
> 标签：mysql, replication

根据我在网上找到的内容，mysql 将更改数据的语句存储在 bin 日志中，然后由从站读取。尚不清楚的是这些陈述接下来会发生什么？它们是否像在从服务器上发生一样重放？

例如，假设条件中有一个带有当前时间的查询，例如“UPDATE something SET updatedat = NOW()”，并且由于复制延迟，查询在几秒钟后在从属设备处结束。表中的值会不同吗？

或者，如果存在主-主复制，则在时间 1000 时，服务器 1 上会发生以下查询：

```
UPDATE t SET data = 'old', updatedat = 1000 WHERE updatedat < 1000 
```

在服务器 2 上的时间 1001 发生以下查询：

```
UPDATE t SET data = 'new', updatedat = 1001 WHERE updatedat < 1001 
```

然后服务器 2 从服务器 1 获取复制日志，服务器 2 上的值将是“旧”？如果是这样，有没有办法避免它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:55:49.003

> 例如，假设条件中有一个带有当前时间的查询，例如“UPDATE something SET updatedat = NOW()”，并且由于复制延迟，查询在几秒钟后在从属设备处结束。表中的值会不同吗？

不。复制复制了行，这意味着时间将相同

# php - 无法连接和回显名称

> ID：10429917
> 
> 赞同：0
> 
> 时间：2012-05-03T10:53:53.407
> 
> 标签：php, string-concatenation

这对你来说可能看起来很傻，但我被困在这里。我有一些照片正在上传，它们的名字被保存下来`$photo_name1`，比如`$photo_name2`......

```
$photo_name1 = $_FILES['pf5']['name'];
$photo_name2 = $_FILES['pf2']['name']; 
```

现在我想循环检索他们的名字

```
for($i = 1; $i<=4; $i++)
{
echo $photo_name.$i;        

list($txt, $ext) = explode(".", $photo_name.$i); 
```

以下回声仅显示 1,2,3...etc 。请帮助我，以便我可以在循环中检索他们的名字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T10:57:27.627

你是用`implode`不`explode`

我不确定你`HTML`的结构是怎样的，但你的名字应该是这样的

```
$_FILES['pf5']['name'][0];
$_FILES['pf5']['name'][1];
$_FILES['pf5']['name'][2]; 
```

原来它是这样的，这意味着您正在使用多种形式......

```
$photo_name1 = $_FILES['pf5']['name'];
$photo_name2 = $_FILES['pf2']['name']; 
```

想象一下

```
$names = array (); //have name array 
foreach ( $_FILES ['image'] ['tmp_name'] as $key => $val) {
    $names [] = $_FILES ['image'] ['name'] [$key]; //put names to array
}

echo implode(",", $names); // print the names 
```

HTML

```
<form method="post" enctype="multipart/form-data">
    <label for="file">Filename 1:</label> <input type="file" name="image[]"
        id="file" /> <br /> <label for="file">Filename 2:</label> <input
        type="file" name="image[]" id="file" /> <br /> <label for="file">Filename
        3:</label> <input type="file" name="image[]" id="file" /> <br /> <input
        type="submit" name="submit" value="Submit" />
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T10:57:45.207

```
echo ${'photo_name'.$i}; 
```

应该做的伎俩。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T10:58:40.310

为什么不做`$photo_name`一个数组？然后你可以简单地做

```
echo $photo_name[$i]; 
```

此外，您应该使用`pathinfo()`来确定文件扩展名，因为当有人命名文件时，`photo.foo.bar.jpg`事情会变得混乱：

```
$path_info = pathinfo($filename);
$ext = $path_info['extension']; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-03T10:58:50.643

您应该将名称存储在数组中，而不是单个变量中：

```
$photo_names[1] = $_FILES['pf5']['name'];
$photo_names[2] = $_FILES['pf2']['name']; 
```

然后，您可以使用 访问一个名称`$photo_names[$i]`。

# python - 基于 QStandardItem 数据属性的 QTableView 项目选择

> ID：10429919
> 
> 赞同：1
> 
> 时间：2012-05-03T10:53:55.823
> 
> 标签：python, pyqt, selection, qtableview, qstandarditemmodel

在 QTableView中进行任意多选的最有效和技术上（**Python/PyQt4 ）正确的方法是什么，该****QTableView**的模型包含`QStandardItems`（图表数据）的层次结构，`isSelected`每个项目都添加了自定义数据属性。

详细说明：与表格一起，我有一个 matplotlib 图，它输出`isSelected`与我的数据相对应的范围（属性直接来自这些范围），`QTableView`我想在这两个 gui 元素之间添加一些交互。

即 matplotlib 绘图选择反映在`QTableView`，反之亦然（我通过将选择更改挂钩到读取相应的索引并将它们反馈回图表来获得）。

希望这个解释是有道理的。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T21:15:22.950

正如你所说，现在你有你的 QTableView.selectionChanged() 将选择反馈给你的 matplot。最有效的方法是让您的 matplot 发出信号以供其选择，并带有相关项目。

表视图已经将其选择存储在 QItemSelectionModel 中，因此据我所知，将您自己的 isSelected 属性存储在项目上是多余且不必要的。您的 matplot 视图应该知道它正在使用的项目，并且应该能够通知表视图其选择更改。

您的 matplot 视图可以有一个您发出的信号，例如`selectionChanged(items)`，并且可以继续不了解表格视图。

您的表格视图，因为它已经知道 matplot 视图，可以将其连接到`selectionChanged(items)`matplot 并监听选择更改。即使您的表也发出信号并且不了解 matplot，您也可以在任何父类中都知道它们的任何父类中建立连接。

这就是我认为不需要该属性的原因：使用该属性的唯一方法是扫描整个模型，检查每个项目。那不是很有效。选择应根据发出的信号进行。

```
myMatPlotView.selectionchanged.connect(myTableView.matplotSelected) 
```

在您的`matPlotSelected()`插槽中，您可以使用选择模型来设置项目选择：

**表视图**

```
def matPlotSelected(self, qStandardItems):

    selModel = self.selectionModel()
    model = self.model()

    for item in qStandardItems:
        idx = model.indexFromItem(item)
        selModel.select(idx, selModel.Select) 
```

**更新**

在评论中，您提供了一个代码片段，它确实有助于隔离您想要实现的目标。

*你的例子*

```
def __init__(self):
    super(myDialog, self).__init__()
    self.t = QtGui.QTreeView()
    self.m = QtGui.QStandardItemModel()
    self.t.setModel(self.m)
    layout = QtGui.QVBoxLayout()
    layout.addWidget(self.t)
    self.setLayout(layout)
    self.l = [
        ['one', False], ['two', True], 
        ['three', False], ['four', True], 
        ['five', False]]
    self.populate()

def populate(self):
    self.m.clear()
    root = self.m.invisibleRootItem()
    for item in self.l:
        e = QtGui.QStandardItem()
        e.setText(item[0])
        root.appendRow(e) 
```

如果这是您的实际情况，那么我上面建议的内容如下：

```
def populate(self):
    self.m.clear()
    root = self.m.invisibleRootItem()
    selModel = self.t.selectionModel()
    for item in self.l:
        e = QtGui.QStandardItem()
        e.setText(item[0])
        root.appendRow(e)

        if item[1]:
            idx = self.m.indexFromItem(e)
            selModel.select(idx, selModel.Select) 
```

# asp.net-mvc - 使用 Ajax.ActionLink 将值数组传递给 Action

> ID：10429922
> 
> 赞同：0
> 
> 时间：2012-05-03T10:54:11.797
> 
> 标签：asp.net-mvc, jquery

我想为我的 Action 提供一个整数值数组（基于表单上选定的复选框值）。我正在尝试按如下方式使用 Ajax.ActionLink ...

```
 <%= Ajax.ActionLink("Submit", "PrintPinLetters", "EPOC", new { selectedItemsToPrint }, new AjaxOptions { HttpMethod="POST", UpdateTargetId = "PrintConfirmation", LoadingElementId = "resultLoadingDiv", OnFailure="handleError"}, new { id = "btnPrintPinLetter" }) %> 
```

但不确定将什么传递到 routeValue 部分。我在控制器中的操作被定义为...

```
 [HttpPost]
    public ActionResult PrintPinLetters(Int64[] selectedItemsToPrint)
    { 
```

基本上我希望在“selectedItemsToPrint”中传递一个数组（或逗号分隔的 ID 值列表）。该列表将使用表格的多行中的复选框（所有名称相同）定义的值来构建。

我使用了 Ajax.BeginForm，但由于这会导致嵌套表单，因此在使用旧版浏览器（IE 7 和 8）时会出现不可预知的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:04:12.317

通常我会用 jQuery 调用自己做 ajax。你会这样设置

1.  而不是使用 Ajax.ActionLink()，而是使用 Html.ActionLink(.... {id = "myid"})。不要忘记给你的链接一个 id
2.  创建一个onready函数

    ```
    $(document).ready(function () {
        $('#myid').click(function() {
            var allElements = $('#container').find('input').serialize();  
            $.post(action, allElements, function (data) {
                // add your code here to process the data returned from the post.
            });

            return false;  // dont post the form
        });
    }); 
    ```

3.  不要忘记将所有输入元素的 name 属性设置为 selectedItemsToPrint 以便绑定与您的 actionresult 一起正常工作

Html 应该看起来像这样

```
<div id="container">
    <input type="checkbox" name="selectedItemsToPrint" value="somevalue0" />
    <input type="checkbox" name="selectedItemsToPrint" value="somevalue1" />
    <input type="checkbox" name="selectedItemsToPrint" value="somevalue2" />
    <input type="checkbox" name="selectedItemsToPrint" value="somevalue3" />
    <input type="checkbox" name="selectedItemsToPrint" value="somevalue4" />
    <input type="checkbox" name="selectedItemsToPrint" value="somevalue5" />
</div> 
```

# android - Debian Sid 上的 Android 内核总是出错

> ID：10429929
> 
> 赞同：0
> 
> 时间：2012-05-03T10:54:55.867
> 
> 标签：android, compiler-errors, kernel

我需要编译自己的 android 内核进行研究。我完全按照开发者部分写的东西做了，然后尝试编译内核。但是由于一些错误，我尝试的每个构建都失败了..我认为当我使用稳定版本时，我应该毫无问题地编译内核...是否有可能我的 gcc 和东西太新了，因为我使用的是 Debian Sid而不是推荐的 Ubuntu 10.04？问题是我只有带有 LXC 的 Debian 服务器，所以创建一个 ubuntu 监狱似乎是可能的，但如果我不需要，我不想这样做。我已经在 Debian 机器上编译了我自己的 Android-x86 内核，它运行得非常好！

我尝试在不同的构建集（完整，crespo）中编译 2.4.6_r1、4.0.1_r1、4.0.4_r1、4.0.4_r1.2，但在 C 或 Java 文件中总是出现一些错误。我已经安装了 sun-java6-jdk 和 gcc/g++ Debian 4.6.3-5

编辑：首先看起来像这个问题：[https](https://groups.google.com/forum/#!topic/android-building/UrluVAdRTkU) ://groups.google.com/forum/#!topic/android-building/UrluVAdRTkU 当我这样做时，它实际上构建得更远，但即使这样也发生了错误......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T11:25:54.010

似乎在 Debian 上，成功构建内核所需的不仅仅是安装依赖项。Ubuntu 中的库版本和路径似乎与它们有很大不同，以至于几乎不可能在短时间内创建一个稳定的构建环境。

所以我切换到 Ubuntu 10.04，从那时起我可以构建一个内核而不会出现任何错误。

# c# - 在 Visual Studio 或 Expression Blend 中将 TreeView 连接到 .mdb 数据库

> ID：10429935
> 
> 赞同：0
> 
> 时间：2012-05-03T10:55:22.607
> 
> 标签：c#, visual-studio-2010, treeview, relational-database, expression-blend

我是 Visual Studio (2010) 和 Expression Studio (4) 的新手。

我一直在尝试让 TreeView 连接到我在 Visual Studio 中连接的 .mdb 数据库（使用 Silverlight 业务应用程序），以显示每个表中名称属性的导航树。我有 2 个层次结构：

（有比显示更多的属性，但这些是唯一需要的）

1.  根级别：**位置表**[LocationName 属性]
2.  第一级：**面积表**[AreaName 属性] [LocationID]
3.  第二级：**检查表** [InspectionName 属性] [AreaID]

我尝试了许多连接方式，但似乎都没有效果 - 现在我很高兴制作一个 TreeView 模板，该模板连接到在 Expression Blend 中创建的分层样本数据。不幸的是，我似乎只能与我的真实数据库的顶层建立连接——所以它只显示位置的名称，不会进一步扩展。

我不知道该怎么做。我正在使用的代码是：（没有代码隐藏）

**主页.xaml**

```
 <riaControls:DomainDataSource AutoLoad="True" d:DesignData="{d:DesignInstance my1:Location, CreateList=true}" Height="0" LoadedData="locationDomainDataSource_LoadedData_1" Name="locationDomainDataSource" QueryName="GetLocationsQuery" Width="0">
     <riaControls:DomainDataSource.DomainContext>
          <my:InspectDomainContext />
     </riaControls:DomainDataSource.DomainContext>
 </riaControls:DomainDataSource>

 <sdk:TreeView Height="200" ItemsSource="{Binding ElementName=locationDomainDataSource, Path=Data}" Name="locationTreeView1" Width="200" >
      <sdk:TreeView.Resources>
           <ResourceDictionary>
                <ResourceDictionary.MergedDictionaries>
                     <ResourceDictionary Source="NavigationTreeResourceDictionary.xaml"/>
                </ResourceDictionary.MergedDictionaries>
            </ResourceDictionary>
       </sdk:TreeView.Resources>
       <sdk:TreeView.ItemTemplate>
            <StaticResource ResourceKey="RootLevel"/>
       </sdk:TreeView.ItemTemplate>
   </sdk:TreeView> 
```

**导航树资源字典**

```
 <common:HierarchicalDataTemplate x:Key="Level2">
     <StackPanel Orientation="Horizontal">
         <TextBlock Margin="5,0,3,0" 
               FontStyle="Italic" 
               Text="{Binding Path=Name}" />                    

     </StackPanel>
 </common:HierarchicalDataTemplate>

 <common:HierarchicalDataTemplate x:Key="Level1"                 
    ItemsSource="{Binding Path=Inspections}"
    ItemTemplate="{StaticResource Level2}">
     <StackPanel Orientation="Horizontal">
         <TextBlock Margin="5,0,3,0" 
               Text="{Binding Path=Name}" />

     </StackPanel>
 </common:HierarchicalDataTemplate> 

 <common:HierarchicalDataTemplate x:Key="RootLevel"
     ItemsSource="{Binding Path=Areas}"
     ItemTemplate="{StaticResource Level1}">
     <StackPanel Orientation="Horizontal">
         <TextBlock Margin="5,0,3,0"
               Text="{Binding Path=Name}" 
               FontWeight="Bold" FontSize="12" />
     </StackPanel>
 </common:HierarchicalDataTemplate> 
```

**域服务 (c#) GetLocationsQuery**

```
 public IQueryable<Location> GetLocations()
    {
        return this.ObjectContext.Locations.OrderBy(l=>l.Name);
    } 
```

**这可能与使用的查询有关吗？我应该将树视图所需的信息放在 GetLocationsQuery 中吗？**

*   如果是这样，我如何输入查询以返回位置名称、子区域名称和子检查名称的列表？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T12:54:06.143

**已经找到解决方案，我会在需要的情况下为其他人发布：**

需要更改的是域服务和元数据信息 =>

在元数据文件中，您希望服务传回的表中的每个 EntityCollection 都需要 [Include] 例如：

**位置表**

```
[Include]
public EntityCollection<Area> Areas { get; set; } 
```

**区域表**

```
[Include]
public EntityCollection<Inspection> Inspections { get; set; } 
```

**检查表**

```
[Include]
public EntityCollection<InspectionItem> InspectionItems { get; set; } 
```

在域服务文件中，使用的查询需要：

```
public IQueryable<Location> GetLocationsAndSubCategories()
    {
        return this.ObjectContext.Locations.Include("Areas.Inspections");
    } 
```

其中每个“.Entity”是已包含在元数据文件中的集合实体的名称。

回到 xaml - 只要绑定路径名称与 EntityCollection 名称相同，它就应该与代码一起使用。

:) 希望有用

# hibernate - 在休眠中使用两个字段作为唯一ID

> ID：10429939
> 
> 赞同：2
> 
> 时间：2012-05-03T10:55:41.390
> 
> 标签：hibernate, nhibernate-configuration

我有一个实体类，它使用它的两个字段作为主键（一起）。这是我正在尝试的。我已经有了数据库，所以我不能停止遵循这条路径并创建一个主键。

```
 @Entity
public class Account {
    private String description;
    private AccountPk id;

    public Account (String description) {
    this.description = description;
    }

    protected Account() {
    }

    @EmbeddedId
    public AccountPk getId() {
        return this.id;
    }
    public String getDescription() {
        return this.description;
    }
    public void setId(AccountPk id) {
        this.id = id;
    }
    public void setDescription(String description) {
        this.description = description;
    }
} 
```

然后我有另一个支持类

```
 public class AccountPk {
    private String code;
    private Integer number;
    public AccountPk() {
    }

    public String getCode() {
        return this.code;
    }
    public Integer getNumber() {
        return this.number;
    }

    public void setNumber(Integer number) {
        this.number = number;
    }

    public void setCode(String code) {
        this.code = code;
    }

    public int hashCode() {
        int hashCode = 0;
        if( code != null ) hashCode ^= code.hashCode();
        if( number != null ) hashCode ^= number.hashCode();
        return hashCode;
    }

    public boolean equals(Object obj) {
        if( !(obj instanceof AccountPk) ) return false;
        AccountPk target = (AccountPk)obj;
        return ((this.code == null) ?
        (target.code == null) :
        this.code.equals(target.code))
        && ((this.number == null) ?
        (target.number == null) :
        this.number.equals(target.number));
    }
} 
```

我遇到的问题是映射器类**Account.hbm.xml**看起来像

```
<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
"-//Hibernate/Hibernate Mapping DTD//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping>
<class
name="hello.Account"
table="MESSAGES">
<id
name="id"
column="MESSAGE_ID">
<generator class="increment"/>
</id>
<property
name="description"
column="DESCRIPTION"/>
</class>
</hibernate-mapping> 
```

我确信这个 xml 文件是罪魁祸首，但我不知道如何以正确的方式进行操作。所以，我会感谢你在这方面的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T11:35:25.353

使用`<composite-id>`代替`<id>`，例如像这样：

```
<composite-id>
    <key-property name="firstId" column="FIRST_ID_COL" type="..." /> 
    <key-property name="secondId" column="SECOND_ID_COL" type="..." /> 
</composite-id> 
```

顺便说一句，您不能使用具有复合 ID 的生成器。您必须自己生成 id。（无论如何，复合键的生成器通常没有意义。它应该生成哪些关键组件以及何时生成？）

# php - php switch 语句限制

> ID：10429940
> 
> 赞同：1
> 
> 时间：2012-05-03T10:55:46.770
> 
> 标签：php

我正在使用的 PHP 脚本包含 switch 语句和 break 以防止代码自动运行到下一个案例：

```
if (!isset($a)) $a = '';
switch($a)
{
case 1:
default:
// some code
break;
case 2:
// some code
break;
case 3:
// some code
break;
} 
```

如何防止用户在 URL 中写入一些在 php switch 语句中不存在的数字“$a”？例如，在上面的这个例子中，如果有人写成一个 url indes.php?a=5 应该得到一个链接不正确的消息。最好的方法是什么？

我感兴趣的另一件事是，在一个页面上使用的 switch 语句的数量是否有任何限制，或者如果页面太大，该页面的大小是否会导致问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T10:57:47.273

将此添加到`switch`.

```
default:
   echo 'not correct';
break; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-03T10:57:50.607

来自 php 文档：

一种特殊情况是默认情况。此案例匹配其他案例不匹配的任何内容。例如：

```
<?php
switch ($i) {
    case 0:
        echo "i equals 0";
        break;
    case 1:
        echo "i equals 1";
        break;
    case 2:
        echo "i equals 2";
        break;
    default:
       echo "i is not equal to 0, 1 or 2";
}
?> 
```

[http://php.net/manual/en/control-structures.switch.php](http://php.net/manual/en/control-structures.switch.php)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T10:59:11.153

添加默认情况。

```
default:
   echo 'Invalid Option';
break; 
```

`cases`并且in没有限制`switch`。

更新：

无论页面大小如何。但是，这取决于案例中编写的脚本或代码。这比那会产生影响要费时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T23:51:10.393

默认标签的放置可能会导致问题，但我不能 100% 确定这一点：

```
 if (!isset($a)) $a = '';

    switch($a)
    {
    case 1:
    default:
    // some code
    break;
    case 2:
    // some code
    break;
    case 3:
    // some code
    break;
    } 
```

只要与 $a 匹配，就会执行各个 case 语句。例如，如果用户提交了 3（因此 $a==3），那么案例 3 将执行。它将继续执行，直到`break;`语句被命中。`default`仅当没有 case 语句与 $a 中包含的值匹配时，才会执行该块。

例如，如果用户提交了 5（因此 $a==5），则没有`case 5:`，因此将执行默认块。因此，通常的标准做法是将`default:`块放在 switch 语句的末尾，如下所示，以表明如果没有 case 语句与条件匹配，它将最后执行。

```
 if (!isset($a)){
        $a = '';
    }

    switch($a)
    {
        case 1:
            //some code
            break;
        case 2:
            // some code
            break;
        case 3:
            // some code
            break;
        default:
            //code displayed when $a does not match any case statements
    } 
```

希望有帮助。此外，switch 语句执行得非常快，它们基本上类似于嵌套的 if 语句。因此实际上没有限制，但是，代码优化始终是您应该努力的事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-27T08:09:23.627

[您的 switch 语句中断是因为您使用了错误的 switch 结构，请在此处](http://phpcodeacademy.com/php-switch-statement/)查看完整的 switch 语句参考

```
<?php

$i = 1;

switch ($i) {

    case 0:

        echo "i equals 0";

        break;

    case 1:

        echo "i equals 1";

        break;

    case 2:

        echo "i equals 2";

        break;

    default:

         echo 'no case match';

         break;

}

?> 
```

# bash - 脚本计算器师

> ID：10429943
> 
> 赞同：1
> 
> 时间：2012-05-03T10:55:53.560
> 
> 标签：bash, shell, logic

我的语法有问题，我想以十进制输出两个数字的除法，但是如果我输入 4 和 5，当我除以所有其他数字时，我的输出是 0 而不是 0.8。

```
case $ch in
  1)sum=`expr $n1 + $n2`
   echo "Sum ="$sum;;
  2)sum=`expr $n1 - $n2`
    echo "Sub = "$sum;;
  3)sum=`expr $n1 \* $n2`
    echo "Mul = "$sum;;
  4)sum=`expr $n1 / $n2`
    echo "Div = "$sum;;
  *)echo "Invalid choice";;
esac 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:00:52.357

Expr 只实现整数运算。考虑使用其他东西，比如[dc](http://www.manpagez.com/man/1/dc/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T11:02:47.347

使用`bc`.

```
sum=`echo -e "scale=5\n$n1/$n2" | bc` 
```

您的部门将`0.8`为此付出代价。

# mysql - 在 Mysql 中将相似的名称组合在一起作为唯一记录

> ID：10429945
> 
> 赞同：0
> 
> 时间：2012-05-03T10:55:56.223
> 
> 标签：mysql

假设我有一个包含以下行的表

```
id     Name                          Price      Supplier
1      Hello Apartment                $12       A
2      Hello Apartments               $8        B    
3      Itercontinental Hotel          $9        A
4      Hilton                         $18       C
5      Hello Apts                     $9        C
6      Apratrmentos Hello             $12       D
7      Ramada Hotel                   $8        A 
```

当我调用我的结果时，我希望将 id 1、2、5 和 6 归类为 1 个唯一项，因此结果集应如下所示：

```
Hello Apts                $8    (4 offers in total)
Itercontinental Hotel     $9
Hilton                    $18
Ramada Hotel              $8 
```

本质上，我想对相似的名字进行分组。考虑到还有数百个其他名称需要分组，这在 MySQL 中是否可行？

非常感谢任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:02:49.133

也许是这样的：

```
SELECT
    SUM(T.Price) AS price,
    T.Name
FROM
(
    SELECT
        Price,
        (
            CASE WHEN Name LIKE 'Hello Ap%'
            THEN 'Hello Apts'
            ELSE Name
        ) AS Name
    FROM
        table1
) AS T
GROUP BY
    T.Name 
```

# javascript - Javascript 库 - 如何绘制家谱组织图或流程图？

> ID：10429947
> 
> 赞同：13
> 
> 时间：2012-05-03T10:56:18.800
> 
> 标签：javascript, graph

我正在寻找一个简单的 Javascript 库（svg？），它允许我绘制家谱关系。

我在 google 上搜索了很多，发现了很多有趣的库，比如 Raphaël 及其扩展 Dracula。谷歌也有自己的库来制作流程图。

不幸的是，每个库都用一条线在节点之间建立关系。如果 A 和 B 与 C 有关系，我将获得 2 条线：一条从 A 到 C，一条从 B 到 C。

我需要的是一条从 A 到 B 的线（我们称之为 AB）和一条从 AB 到 C 的线来代表 A 和 B 的婚姻。

示例（来源：[example-image](http://s17.postimage.org/uqxx3bskv/scheme.png)）： [![我的要求](../Images/fad3be8e6052b53a10e93879674805e6.png)](https://i.stack.imgur.com/nz9Rc.png)

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T23:37:40.827

我有同样的问题。这是我发现的：

*   [http://astuteo.com/slickmap/](http://astuteo.com/slickmap/)

您还有其他解决方案吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-08-03T02:45:56.323

我发现 3 种方法能够满足您的要求：

1.  **巴尔干图**

[![在此处输入图像描述](../Images/bc04c2ae0a250f7b5633167075d1ce24.png)](https://i.stack.imgur.com/C1gn1.jpg)

参考链接：[https ://balkangraph.com/OrgChartJS/Demos/RoyalFamilyTree](https://balkangraph.com/OrgChartJS/Demos/RoyalFamilyTree)

2.  **dTree（基于 D3）**

[![在此处输入图像描述](../Images/06670a1ab1f20c52eb69725c01dc983e.png)](https://i.stack.imgur.com/oy5vu.png)

演示：[https ://treehouse.gartner.io/ErikGartner/58e58be650453b6d49d7](https://treehouse.gartner.io/ErikGartner/58e58be650453b6d49d7)

参考链接：[https ://github.com/ErikGartner/dTree](https://github.com/ErikGartner/dTree)

3.  **GoJS 基因图**

[![在此处输入图像描述](../Images/c6ba85455c41a5cdc897468fe1afbda1.png)](https://i.stack.imgur.com/f8YSB.png)

参考链接：[https ://gojs.net/latest/samples/genogram.html](https://gojs.net/latest/samples/genogram.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-10-20T17:45:21.370

找到[TreantJS](https://fperucic.github.io/treant-js/) - 可能会有所帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-04T23:24:02.653

我定制了一个[Graphviz](http://www.graphviz.org/)点文件来产生这样的输出。目前我正在使用[Ruby](https://www.ruby-lang.org/en/)脚本从 .gedcom 文件中生成它。 [![在此处输入图像描述](../Images/e99b4af833b48addc59de1f27cf63b51.png)](https://i.stack.imgur.com/8ThNO.jpg)

这里的 .dot 内容，带有数字的节点只是点并且以正确的方式流动边缘。

```
digraph G {
  graph [nodesep=0.2,splines=ortho,ranksep=0.05]
  node [shape=box,fontname=Helvetica,fontsize=8;color="green",fixedsize=true,width=1,height=0.5,style=filled]
  Grandfather [color="lightblue"]
  Grandmother [color="pink"]
  StephGrandmother [color="pink"]
  Father [color="lightblue"]
  Mother [color="pink"]
  Uncle [color="lightblue"]
  Laurent [color="lightblue"]
  Child2 [color="lightblue"]
  Child3, Child4 [color="pink"]
  node[label="", width=0, height=0];
  edge[arrowhead=none, color=blue];
  {rank=same;StephGrandmother;Grandfather;Grandmother;Grandfather1}
  {rank=same;Father;Father1;Mother;Uncle}
  {rank=same;Laurent;Child2;Child3,Child4}
  {rank=same;Father2;Father3}
  StephGrandmother:e -> Grandfather:w
  Grandfather:e -> Grandfather1
  Grandfather1 -> Grandmother:w
  Grandfather1 -> Grandfather2
  Grandfather2 -> Father:n 
  Grandfather2 -> Uncle:n
  Father:e -> Father1
  Father1 -> Mother:w
  Father1 -> Father2
  Father2:w -> Laurent:n 
  Father2:w -> Child2:n
  Father2 -> Father3
  Father3:e -> Child3:n
  Father3:e -> Child4:n
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-12-17T10:13:21.557

我知道我真的迟到了，但是当我看到您的示例图像是使用 yEd 创建的时，我认为链接到 yEd 所基于的底层软件库将是一个好主意。毕竟有一个[JavaScript 版本的图形可视化库](https://yworks.com/yfileshtml)，它内置了一个特定的家庭树自动布局。

有一篇关于如何使用该库[在 JavaScript 中绘制家庭图表](https://www.yworks.com/pages/drawing-family-trees-with-javascript)的文章，所以如果这是在商业环境中（这是一个商业库），您可能想看看，因为它专门解决了连接问题（“婚姻节点”）您正在描述：

![示例自动家谱布局](../Images/00ed98fffb70bfeb792032ece201cd83.png)

灰色圆形节点描绘了婚姻，子节点连接到各自父母的婚姻节点。

如果不是自动布局，当然您可能还想查看[此问题](https://stackoverflow.com/questions/7034/graph-visualization-library-in-javascript)中的其他库。

^(免责声明：我为提供链接库的公司工作，但我不代表该公司。我的评论、意见和答案是我自己的。)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-13T10:28:31.990

虽然不是“库”，但存在一个实用程序，可让您精确绘制您所描述的内容。简称为“SVG Utility”，这是一款带有图形设计器的免费软件，可让您定义真实的家庭关系（包括多个配偶、暂定子女等）。请参阅[有关 SVG 家谱的更多信息](http://parallax-viewpoint.blogspot.com/2017/10/more-on-svg-family-trees.html)。

一旦设计完成，关系和布局就会以简单的文本文件格式捕获，以便可以对其进行修改或重用。该实用程序生成 SVG 版本以用于博客文章或其他网页。有几种可能的配置允许在同一页面上显示多个 SVG 图像、人员框或“家庭”后面的工具提示或弹出信息、单个树的平移缩放、缩略图和标题等。

Dropbox 文件夹中提供了安装工具包、文档和示例。联系上述博客文章的作者以获取访问权限。

该实用程序设计为在 Windows 下运行，但也已在 Mac 上的 WINE 兼容层下运行。

# java - 选择 Web 用户界面库

> ID：10429954
> 
> 赞同：1
> 
> 时间：2012-05-03T10:56:56.383
> 
> 标签：java, vaadin, dhtmlx, webui

我工作的公司要求我为他们开发的车队管理系统创建一个 Web 用户界面。

这个系统是用java编写的，所以我认为我应该与java兼容或语言中立的库。此外，它应该是免费/开源的，并且功能齐全

经过一番小搜索后，我发现了以下库：

1) [http://dhtmlx.com/index.shtml](http://dhtmlx.com/index.shtml)

2) [https://vaadin.com/home](https://vaadin.com/home)

目前我面临以下关键问题：我应该依赖服务器端库来创建用户界面还是应该更喜欢客户端库？

还有什么我应该注意的其他重要的 Web 用户界面库？

由于我在该主题上没有任何经验，因此每个建议都会非常有用:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T11:03:23.420

我会说去Vaadin。它是类似于 Swing 的开发，没有 HTML、JavaScript、CSS 和任何其他“有用的库”。尽管这是一个多语言开发时间，但选择简单性和生产力而不是灵活性。从长远来看，你会感谢自己。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T13:33:08.993

我个人建议您使用服务器端框架（服务器端库）。性能是一件很重要的事情，那么为什么你的业务逻辑应该在客户端呢？您必须始终在服务器端进行验证，那么为什么要做两次呢？你更独立于不同的终端设备，如平板电脑、智能手机等。总结一下：让客户端负责 UI，其余的在服务器端完成。

我对 vaadin 没有性能问题。

# java - 包含在 TreeSet 与另一个 Set 上

> ID：10429957
> 
> 赞同：3
> 
> 时间：2012-05-03T10:57:01.967
> 
> 标签：java, collections, set, contains, binary-search

上的 contains 方法`TreeSet`（因为它已经按默认排序）比 say 快`HashSet`吗？

我问的原因是，`Collections.binarySearch`如果对 List 进行排序，那会非常快，所以我认为 TreeSet 的 contains 方法可能是相同的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T11:00:43.447

从[TreeSet](http://docs.oracle.com/javase/7/docs/api/java/util/TreeSet.html)的 javadoc ：

> 此实现为基本操作（添加、删除和包含）提供有保证的 log(n) 时间成本。

从[HashSet](http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html)的javadoc ：

> 此类为基本操作（添加、删除、包含和大小）提供恒定的时间性能，假设哈希函数将元素正确地分散在桶中。

所以答案是否定的。

查看实现（JDK 1.7 oracle），treeset.contains（resp.hashtree）依赖于treemap.containsKey（resp.hashmap）方法。containsKey 循环遍历 hashmap 中的一个哈希桶（可能只包含一项），而它循环遍历整个映射，在树形图中从一个节点移动到另一个节点，使用 compareTo 方法。如果您的项目是最大的或最小的，这可能需要更多的时间。

最后，我只是对包含 1m 个整数的树进行了快速测试（是的，我知道，不是很可靠），并寻找最大的 2 个整数之一，这迫使树集浏览整个集合。HashSet 快了 50 倍。

# objective-c - 如何使用 iPhone SDK 读取 RFID

> ID：10429961
> 
> 赞同：1
> 
> 时间：2012-05-03T10:57:12.700
> 
> 标签：objective-c, ios4, ios5, xcode4, rfid

在我的应用程序中，我需要读取 RFID。怎么可能。我不知道如何实现这一目标。有没有这方面的API。请在这个问题上给我建议。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:06:10.620

最简单的方法是为 iPhone 购买一个 rfid 阅读器，并使用它的 SDK。看看[iCarte](http://www.icarte.ca/)，它可能是一个很好的起点。

# facebook - 远程发布到 Facebook 页面，但帖子所有者显示为来自页面

> ID：10429964
> 
> 赞同：1
> 
> 时间：2012-05-03T10:57:24.243
> 
> 标签：facebook, facebook-graph-api, oauth-2.0, facebook-page

我想知道是否可以通过 Facebook 应用程序将帖子发布到相关页面，就好像帖子是在页面本身上完成的一样。即，如果我登录 Facebook 并转到我作为管理员的页面，那么当我发布时，它将显示页面名称而不是我的 Facebook 名称。我想复制这种行为，但来自通过 Facebook 应用程序连接的外部网站。我已经建立了所有联系，并且可以发布，但它是以我的名字出现的。我正在使用带有以下内容的 Javascript API 登录：

```
FB.login(function(response) {//do some login processing}, 
{scope: 'publish_stream'}); 
```

然后我在登录并接受权限后发布带有以下内容的消息：

```
FB.api('/[PAGE NAME]/feed', 'post', { message: Text to post }, function(response) {
  if (!response || response.error) {
    alert('Error occurred '+response.error.message);
  } else {
    alert('Post ID: ' + response.id);
  }
}); 
```

我的 Facebook 应用程序的站点 URL 和应用程序域设置正确，我已将应用程序设置为页面选项卡并将其合并到我的页面。

因此，如果有人可以让我知道这是否可能以及如何做到这一点，将不胜感激

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:10:03.157

这都是关于身份验证的，您有一个用户访问令牌，但您需要一个页面访问令牌来作为页面进行身份验证。

这是文档：[https ://developers.facebook.com/docs/authentication/pages/](https://developers.facebook.com/docs/authentication/pages/)

# salesforce - 我们可以在 VF 页面中有相关列表的链接吗

> ID：10429965
> 
> 赞同：1
> 
> 时间：2012-05-03T10:57:24.730
> 
> 标签：salesforce, apex-code, visualforce

我有一个 VF 页面，其中我使用显示的相关列表

```
 <apex:relatedList list="NOTESANDATTACHMENTS"/> 
```

有没有一种方法可以像标准页面中的那样在页面顶部显示相关列表的链接？原因是我的 VF 页面很长，用户需要滚动才能查看注释和附件列表。

我们有什么办法可以做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-03T11:18:43.520

不是直接的，但你总是可以使用锚链接。

```
<a href="#mylist">Go to related list</a>
...

<a id="mylist" />
<apex:relatedList list="NOTESANDATTACHMENTS"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-29T11:32:58.967

注释和附件相关列表的关系名称已在冬季 14 版本中更改。您可以在相关列表标签中显示附件。

`apex:relatedList list="CombinedAttachments" subject="{!$CurrentPage.parameters.id}"` 如果您使用的是标准控制器，则在 VF 页面中无需添加主题属性。

# c# - utc 格式的 C# 日期时间传递问题

> ID：10429971
> 
> 赞同：0
> 
> 时间：2012-05-03T10:57:45.817
> 
> 标签：c#, java, .net, windows

我的应用程序可以在具有任何 Windows 操作系统的任何类型的机器上运行。现在它将与java内置的服务器主机rest api进行通信。

现在我正在尝试像这样以 utc 格式获取时间

```
Console.WriteLine("utc : " + DateTime.UtcNow);
Console.WriteLine("utc : " + DateTime.Now.ToUniversalTime());
Console.WriteLine("normal : " + DateTime.Now); 
```

它的输出是这样的——

在window7机器上

```
utc : 03-05-2012 10:48:22
utc : 03-05-2012 10:48:22
normal : 03-05-2012 16:18:22 
```

在 windows server 2008R2 机器上

```
utc : 5/3/2012 10:47:35 AM
utc : 5/3/2012 10:47:35 AM
normal : 5/3/2012 4:17:35 PM 
```

现在在服务器机器上它用 AM/PM 给出 utc 时间，但在 windows7 机器上它给出没有 AM/PM 的时间为什么会这样？

是否有任何方法可以在所有类型的 Windows 操作系统上以相同的格式返回相同的 utc 时间，所以 java 家伙不会有任何解析问题？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T10:59:56.583

输出格式取决于文化，而不是操作系统版本。有关说明，请参阅[标准日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-03T11:00:58.817

这与操作系统无关 - 它与代码运行的语言环境有关。可能是机器设置了不同的语言环境，这就是差异的原因。

如果您需要精确控制格式，那么您应该通过该`DateTime.String(string format)`方法手动指定格式来使用自定义格式字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T11:00:20.983

您可以将[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)用于：

```
DateTime.ToString("format string", IFormatProvider) 
```

例子：

```
 DateTime.ToString("dd MM yyyy", CultureInfo.InvariantCulture); 
```

在上面的代码中，确保“格式字符串”是 Java 所期望的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-03T11:01:33.650

指定应用于日期的特定格式（在应用程序之间商定）

C# 序列化日期：

```
Console.WriteLine("utc : " + String.Format("{0:d/M/yyyy HH:mm:ss}", DateTime.UtcNow));
Console.WriteLine("utc : " + String.Format("{0:d/M/yyyy HH:mm:ss}", DateTime.Now.ToUniversalTime()));
Console.WriteLine("normal : " + String.Format("{0:d/M/yyyy HH:mm:ss}", DateTime.Now)); 
```

Java解析日期：

```
DateFormat formatter = new SimpleDateFormat("d/M/yyyy HH:mm:ss");
Date date = (Date) formatter.parse(dateToParse); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-05-03T11:07:42.320

其中一个想法是您可以以毫秒为单位发送时间，并在 Java 端将毫秒转换为 dateTime。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-05-04T04:38:55.100

如果我们使用本质上是 yyyy-MM-ddTHH:mm:ss 格式的 ToString("s") ，它将在具有不同文化的不同操作系统上为您提供相同的格式。

我们通常将其用于“可排序日期/时间模式”的此类通信。

感谢 V4Vendetta 和 ie 的评论。

它会让其他人在阅读相同的帖子时遇到相同的问题。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-01T02:14:56.483

[Noda Time](http://nodatime.org/)库将为您提供一致的结果。

# azure - 403 错误我的第一个 Azure 角色

> ID：10429975
> 
> 赞同：0
> 
> 时间：2012-05-03T10:57:52.827
> 
> 标签：azure, cloud

我刚刚下载了 Azure SDK 并创建了我最火的 WCF 服务角色，点击 F5 但它转到 127.0.0.1:81 并说

403 访问被拒绝 - 禁止 ....

谢谢你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:02:57.273

试试 127.0.0.1:81/Service1.svc ;)

将 Service1 更改为您的项目名称

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-04T09:41:30.487

正如 Julien 所指出的，请输入完整的地址。否则 IIS 认为您正在请求目录以列出文件，默认情况下是不允许的。

# mysql - MySQL-获取下一个插入的 id

> ID：10429976
> 
> 赞同：0
> 
> 时间：2012-05-03T10:57:55.507
> 
> 标签：mysql, insert

我正在构建一个系统，用户可以通过该系统为博客构建页面。这些页面可以包含显然需要在文件夹中处理和存储的图像。我使用存储页面数据的 SQL 表行的 ID 作为存储该页面图像的文件夹名称的基础。问题是，有时必须在将其他页面数据插入 SQL 表之前创建此文件夹。

所以...我如何找到下一个插入的 ID 是什么？

我不能使用 SELECT MAX(id) + 1 因为页面可能同时已被删除，从而减少了最大 ID。

有任何想法吗？我正在使用 codeigniter，所以如果有人知道 CI 中处理这个问题的库或方法，那将是理想的。

我可以插入一个虚拟行，获取 ID，将其删除，然后将其添加到值中，但似乎有点 hack？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T11:00:41.253

尝试使用 LAST_INSERT_ID() 函数。

# iphone - HTML - p 标签在 iphone 中显示不同的颜色

> ID：10429983
> 
> 赞同：-1
> 
> 时间：2012-05-03T10:58:24.497
> 
> 标签：iphone, html, css

非常感谢您的帮助。

我已经建立了一个网站，现在我正在尝试为 iPhone 优化它。特别是我有一个页面的问题：[到外部站点的链接断开](http://www.intelligenthygiene.co.uk/contact/)。

联系电话是白色的。但在 iPhone 中，它们是绿色的。我已经包括了一个屏幕截图。如您所见，数字是绿色的 (#029547)。

我试图只为 iphone 创建一些 css，但它们仍然是绿色的。我显然错过了一些东西，但我看不到什么。

**资料**：

css 文件的[断开链接](http://www.intelligenthygiene.co.uk/themes/main_theme/css/default.css)。

第 444 行：'.style2'

第 707 和 708 行包含仅适用于 iPhone 的 css：'.style2' 和'.style2 p'

干杯!

**更新**：

阿德里安，非常感谢您指出媒体声明是错误的。我修复了它，但问题仍然存在。

**更新 2**：

截屏：![在此处输入图像描述](../Images/d90352bb1c368634ea294f974042b13e.png)

* * *

**已解决**：

它是第 123 行中的“a”属性。是的，没错。a 属性覆盖了`.style2`p 属性。诡异的！！！我修复了添加的问题：

```
@media only screen and (max-device-width: 640px) {
    .style2 a {color: white;}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:07:33.473

@media 定义中的**最大宽度**是错误的！

// 第 695 行：

```
@media only screen and (max-width: 1200px) {
    /* Style adjustments for viewports 480px and over go here */
    header {
        height: 90px;
        background: #A3CE4B url('i/header_bg.jpg') top right no-repeat;
    }
    .page_width_1 {width: 1040px;}
    .ribbon_left {height: 164px;}
    .ribbon_right {height: 164px;}
    .style2 {color: white;}
    .style2 p {color: white;}
    input {width: 197px;}
    .date p {margin: 5px 35px 0 0;}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T11:03:33.227

尝试从中删除颜色声明`default.css:144`：

```
p {font-size: 1.4em; color: #736E74;} 
```

# android - 如何使对话框显示仅使用 XML 显示所有文本字段？

> ID：10429984
> 
> 赞同：0
> 
> 时间：2012-05-03T10:58:35.340
> 
> 标签：android, android-layout

我有一个样式为 Dialog 的活动，其中包含两个 EditText。但是，当我运行应用程序时，只显示第一个。这是我的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:background="@color/background"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:padding="10dip" >

<EditText
        android:id="@+id/firstEditText"
        android:layout_height="wrap_content"
        android:lines="1"
        android:inputType="number"
        android:scrollHorizontally="false"
        android:layout_width="fill_parent"/>

<EditText
        android:id="@+id/secondEditText"
        android:layout_height="wrap_content"
        android:lines="3"
        android:scrollHorizontally="false"
        android:layout_width="fill_parent"/>

</LinearLayout> 
```

据我所知，这是正常的 Android 行为，但如何在不编写 Java 代码且仅使用 XML 的情况下使活动显示两个字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:12:41.120

只需添加一行 android:orientation="vertical"

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"

      android:layout_width="fill_parent"
      android:layout_height="fill_parent"
      android:padding="10dip"
      android:orientation="vertical" > 
```

我希望这应该可以正常工作！！！！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T11:23:46.517

第二个`EditText`没有出现，因为父级`LinearLayout`具有默认的方向（`horizontal`），而第一个`EditText`的宽度设置为`fill_parent`. 这会将第二个`EditText`推出屏幕。您可以将 的方向设置为`LinearLayout`在另一个下方`vertical`显示一个，或者设置为第一个的宽度并使用（在两者上）在第一个和第二个之间设置所需的比例。`EditText``wrap_content``EditText``layout_weight``EditText``EditText`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-03T11:42:15.587

试试这个代替你的代码

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
         android:background="@color/background"
         android:layout_width="fill_parent"
         android:layout_height="fill_parent"
         android:padding="10dp" 
         android:orientation="vertical">

  <EditText
    android:id="@+id/firstEditText"
    android:layout_height="wrap_content"
    android:lines="1"
    android:inputType="number"
    android:scrollHorizontally="false"
    android:layout_width="fill_parent"/>

  <EditText
    android:id="@+id/secondEditText"
    android:layout_height="wrap_content"
    android:lines="3"
    android:scrollHorizontally="false"
    android:layout_width="fill_parent"/>

</LinearLayout> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-05-03T11:10:12.070

在这种情况下，您可以在特定组件中使用该属性...

```
android:visibility="gone" 
```

它可能对你有帮助......

# qt - 确定丢失的编解码器（声子）

> ID：10429993
> 
> 赞同：2
> 
> 时间：2012-05-03T10:59:16.787
> 
> 标签：qt, codec, phonon

通过 Phonon 播放音频/视频时如何确定缺少哪个编解码器？如果你知道请帮助我。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:07:31.220

您可以使用[isMimeTypeAvailable](http://qt-project.org/doc/qt-4.8/phonon-backendcapabilities.html#isMimeTypeAvailable)来检查 Phonon 所说的它能够解码的内容。

# javascript - 多事件绑定快捷方式

> ID：10429994
> 
> 赞同：1
> 
> 时间：2012-05-03T10:59:17.847
> 
> 标签：javascript, data-binding, knockout.js, dom-events

在淘汰赛中将相同元素绑定到多个操作时，我目前正在做的是：

```
data-bind="event: { click: doAction,
                    touchend : doAction}" 
```

**我的问题是：**
绑定到动作时是否可以使用某种快捷符号？

我希望是这样的：

```
data-bind="event: {click, touchend : doAction}" 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-03T12:07:47.903

没有内置的快捷方式可以做到这一点，但是使用自定义绑定来让你`data-bind`更干净是很容易的。

您可以采取多种方法。一种特定于 click 和 touchend 的解决方案是：

```
ko.bindingHandlers.clickAndTouch = {
    init: function(element, valueAccessor, allBindingsAccessor, data) {
         var action = valueAccessor(),
             newValueAccessor = function() {
                 return {
                     click: action,
                     touchend: action
                 }                     
             };

         ko.bindingHandlers.event.init.call(this, element, newValueAccessor, allBindingsAccessor, data);      
    }        
}; 
```

然后，你会像这样绑定它：

`data-bind="clickAndTouch: doAction"`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-26T08:19:46.637

由于至少 Knockout 2.1.0（它仍然适用于 3.4.2），因此可以使用：

```
data-bind="event: {'click touchend': doAction}" 
```

# c - _wgetenv 得到 ?? 当值包含 Unicode 字符时标记值（日语）

> ID：10429997
> 
> 赞同：1
> 
> 时间：2012-05-03T10:59:21.543
> 
> 标签：c, visual-studio, winapi

（标题已更新以表明 _wgetenv 存在问题）

当变量的路径包含日文文本时，以下程序将失败并 [显示错误 123 。](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681382%28v=vs.85%29.aspx)使用 Visual Studio 2005 编译时，相同的程序运行良好。

```
#include <windows.h>
#include <stdio.h>
#include <stdlib.h>
int  main  (int argc, char  **argv ) {
        wchar_t *wcharVarName= L"TEMP_PATH";
        wchar_t *longTempPath= _wgetenv(wcharVarName);

        MessageBoxW( NULL,  longTempPath, longTempPath, MB_OK | MB_ICONERROR);

        int wlength = GetShortPathNameW(longTempPath,0,0);
        int error= GetLastError();
        if ( wlength == 0 ) {
                char buf[1000];
                sprintf ( buf, "error code %d",error);
                MessageBox( NULL, "FAIL", buf, MB_OK | MB_ICONERROR);
        }
        else {
             MessageBoxW( NULL, longTempPath, wcharVarName, MB_OK | MB_ICONERROR);
        }

} 
```

有没有办法使上述程序适用于 Visual Studio 6？

编辑：TEMP_PATH 是 C:\tmp\汉字。_wgetenv 显示...

![在此处输入图像描述](../Images/84df88db9e9afe94f218851d5e084de7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T11:45:16.587

出于某种原因，在 VS6 下调用`_wgetenv`不会返回所需的值。这些`?`符号表示编码转换失败。

一个快速的解决方法是[`GetEnvironmentVariable`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms683188.aspx)改用。